# StackOverflow 问答 16127000-16127999

# java - 在 Java 中使用 this 和 super

> ID：16127003
> 
> 赞同：0
> 
> 时间：2013-04-21T01:15:08.697
> 
> 标签：java, inheritance, this, super

我有以下代码片段尝试使用`this`和`super`.

```
class SuperClass
{
    public final int x=10;
    public final String s="super";

    public String notOverridden()
    {
        return "Inside super";
    }

    public String overrriden()
    {
        return "Inside super";
    }
}

final class SubClass extends SuperClass
{
    private final int y=15;
    private final String s="sub"; //Shadowed member.

    @Override
    public String overrriden()
    {
        return "Inside sub";
    }

    public void test()
    {        
        System.out.println(super.notOverridden());
        System.out.println(this.notOverridden());

        System.out.println(this.overrriden());
        System.out.println(super.overrriden());

        System.out.println(this.s);
        System.out.println(super.s);

        System.out.println(this.x);
        System.out.println(super.x);

        System.out.println(this.y);
    }
}

public final class Test
{
    public static void main(String[] args)
    {
        SubClass subClass=new SubClass();
        subClass.test();
    }
} 
```

`test()`在这个最简单的 Java 代码中，将输出重定向到类中方法内的控制台的语句`SubClass`显示以下输出。

```
Inside super
Inside super
Inside sub
Inside super
sub
super
10
10
15 
```

`this`因此，看起来和之间没有区别`super`，当它们用于访问在其子类中未覆盖的方法时，以及在变量的情况下，当它们在其子类中未隐藏时。

他们都倾向于指向超类成员。但是，如果不是这种情况，则存在明显的差异。

当方法没有被覆盖或者变量没有在各自的子类中被隐藏时，它们是否相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T01:24:28.130

> `this`因此，看起来和之间没有区别`super`，当它们用于访问在其子类中未覆盖的方法时，以及在变量的情况下，当它们在其子类中未隐藏时。

它们是有区别的。如果您覆盖第三类中的方法，并`test`从中调用，您会看到，它`super`仍然调用`SuperClass`. 并将`this`调用新的实现（覆盖）。

添加：

`this.method()`用法意味着该方法属于对象的实例。因此将使用最后一个实现（私有方法除外）。

`super.method()`用法隐含实例的方法，但在当前类（super 或 super.super 等）之前实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T01:55:04.707

是的，它们是一样的。`notOverridden`方法和非阴影变量由子类继承。

为了更好地理解这一点，了解对象在内存中的位置是有帮助的。例如在下图中。假设它是子类的对象。蓝色区域是它从父级继承的，黄色区域是它自己定义的。该方法具有类似的设计，只是它使用 Vtable。

子对象与父对象具有相同的内存布局，只是它需要更多空间来放置新添加的字段。这种布局的好处是指向子类对象的父类型指针在开始时仍然可以看到父对象。

![在此处输入图像描述](https://i.stack.imgur.com/9ySRr.jpg)

# javascript - 响应式 CSS /java 脚本 DIV - 仅在移动查询上单击时显示

> ID：16127005
> 
> 赞同：0
> 
> 时间：2013-04-21T01:15:35.903
> 
> 标签：javascript, jquery, css, menu, navigation

我已经在网上到处寻找，试图解决这个问题。我正在制作一个响应移动设备的桌面网站，并且遇到了导航菜单的问题。我已将其设置`display:none`为移动版本，但我想将其设置为可以通过单击图像或文本来查看。我在其他地方找到的解决方案都只适用于其中只有`UL`和`LI`元素的 div 菜单。我的每个“部分”都有`H2`标签等。我只是希望单击按钮，然后将整个`DIV`显示在移动查询上，而不会弄乱我的任何 HTML 代码等。

我发现这个 jquery 代码看起来很接近，但它似乎隐藏了桌面上的导航 div。我需要它`display:none`仅通过 CSS 在媒体查询中设置。

```
$("#preview").toggle(function() {
    $("#navi").hide();
}, function() {
    $("#navi").show();
}); 
```

});

只需单击诸如“单击此处获取菜单”之类的文本即可调用它……也希望它是按钮或链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T01:33:43.120

尝试`$.toggleClass()`而不是使用`$.hide()`. 这样媒体查询 css 将有更多的控制权。以下是仅在小于 700px 的屏幕中隐藏 div 的按钮的示例。

JS：

```
$("#preview").toggleClass('hideInMobile'); 
```

CSS：

```
@media (max-width: 700px){
    .hideInMobile 
    {
        display:none
    }
} 
```

演示：http: [//jsfiddle.net/HZDCW/2/](http://jsfiddle.net/HZDCW/2/)

希望能帮助到你。

# ruby-on-rails - Omniauth Stripe Connect – 如何添加范围？

> ID：16127009
> 
> 赞同：1
> 
> 时间：2013-04-21T01:16:41.500
> 
> 标签：ruby-on-rails, ruby-on-rails-3, oauth-2.0, omniauth, stripe-payments

我正在使用 Omniauth Stripe-Connect gem，我想添加一个范围，但文档没有涵盖这一点。这是我现在正在尝试的，但不包括`scope`and参数：`stripe-landing`

```
Rails.application.config.middleware.use OmniAuth::Builder do
     provider :stripe_connect, ENV['STRIPE_CONNECT_CLIENT_ID'], ENV['STRIPE_SECRET'], { :scope => 'read_write', :stripe_landing => 'register' }
end 
```

宝石/策略： [https ://github.com/isaacsanders/omniauth-stripe-connect](https://github.com/isaacsanders/omniauth-stripe-connect)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:19:25.960

使用上面的 gem，添加 scope 和 stripe_landing 是`Builder`行不通的。

而是使用这个：

```
Rails.application.config.middleware.use OmniAuth::Builder do
    provider :stripe_connect, ENV['STRIPE_CONNECT_CLIENT_ID'], ENV['STRIPE_SECRET']
end 
```

然后在您的 Omniauth 链接中添加参数：

```
<a href='http://exampleapp.com/auth/stripe_connect?scope=read_write&stripe_landing=register'>Connect With Stripe</a> 
```

# quickbooks - 将基于 Web 的应用程序与 QuickBooks Online 集成

> ID：16127011
> 
> 赞同：3
> 
> 时间：2013-04-21T01:16:43.987
> 
> 标签：quickbooks, intuit-partner-platform, quickbooks-online

我有一个基于 Web 的应用程序，它通过 QuickBooks Web 连接器与 QuickBooks 集成。这适用于 QuickBooks 的桌面版本。但是，我希望添加对 QuickBooks Online 的支持，并且 Web 连接器不能与 QuickBooks Online 一起使用。

如何将我的应用程序与 QuickBooks Online 集成？如果可能，我想使用已经在使用 Web 连接器的 Web 服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:37:07.983

请访问[http://developer.intuit.com](http://developer.intuit.com)并单击 Intuit 合作伙伴平台部分中的将您的应用与 QuickBooks 集成链接。该链接打开了我们的 QuickBooks API 文档。如果您想要现在可以使用的东西，您应该专注于 V2 API。V3 API 将于今年晚些时候公开发布，允许您将您的应用程序与全球版本的 QuickBooks Online 集成。

注册为开发人员，如果您有任何其他问题，您可以提交支持票，我们会尽快回复您。

# ios - Objective c 从字符集中检查字符串后缀

> ID：16127014
> 
> 赞同：1
> 
> 时间：2013-04-21T01:17:09.950
> 
> 标签：ios, objective-c, nsstring

我正在尝试根据字符集检查字符串的后缀，但出现错误：

```
if ([string hasSuffix:[NSCharacterSet characterSetWithCharactersInString:@"(+-*/"]) 
```

我做错了什么，有正确的选择吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T01:25:22.883

`-[NSString hasSuffix:]`以 an`NSString`作为参数，而不是`NSCharacterSet`. 您最好的选择可能是调用`-[NSString rangeOfCharacterFromSet:options:]`with`NSBackwardsSearch`作为选项并检查该位置是否在字符串的末尾。

你想做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T03:40:29.480

我认为您正在尝试查看字符串的第一个字母是否是集合中的一个字符。如果是这样，那么使用这个：

```
NSCharacterSet *set =  [NSCharacterSet characterSetWithCharactersInString:@"(+-*/"];
if ([[string substringToIndex:1] rangeOfCharacterFromSet:set].location != NSNotFound)
    // String starts with one of the characters from the character set 
```

# javascript - 如何在加载 run_prettify.js 后重新应用 prettyPrint

> ID：16127015
> 
> 赞同：6
> 
> 时间：2013-04-21T01:17:10.920
> 
> 标签：javascript, pretty-print

我正在尝试使用 Javascript 代码美化器，并提出一个问题。

如果我没有在静态 html 中分配`class="prettyprint"`，`<pre>`但希望稍后应用 prettyprint（例如，当用户单击我网页上的“着色”按钮时），**我该如何实现？**

稍微修改原始的 run_prettify.js 或 prettify.js 是可以接受的，因为我打算离线使用它。

我的实验：

编写 try-delay-class.html：

```
<html>
<head>
<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
</head>
See it:
<pre>
class Voila {
public:
  // Voila
  static const string VOILA = "Voila";

  // will not interfere with embedded <a href="#voila1">tags</a>.
}
</pre>
</html> 
```

在 Chrome v26 中打开，调出控制台，执行：

```
pres=document.getElementsByTagName('pre')
pres[0].className+=" prettyprint" 
```

语法颜色没有出现。

![在此处输入图像描述](https://i.stack.imgur.com/zRaLu.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T03:04:24.640

根据在这里找到的评论，[如何让 prettyprint 处理动态生成的 dom 元素](https://stackoverflow.com/q/15742551/151453)，我找到了出路。只需致电：

```
PR.prettyPrint() 
```

顺便说一句：如果要删除代码颜色突出显示，则不能简单地将 pre 的类设置为空，然后`PR.prettyPrint()`再次设置。`PR.prettyPrint()`只能附加颜色标签，但不能删除它们。`<pre>`一种可行的方法是在应用 prettyprint 之前保存您的原始内容，然后再恢复这些`<pre>`内容。在我的帖子[jQuery 中验证，如何克隆回保存的元素？](https://stackoverflow.com/questions/16147598/jquery-how-to-clone-back-saved-elements).

![在此处输入图像描述](https://i.stack.imgur.com/M1peG.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-12T09:48:17.380

[你可以在这里](https://github.com/google/code-prettify/issues/268)找到三个例子

我在js中做了如下：

```
document.getElementById('outputa').innerHTML = 
 PR.prettyPrintOne("your code in brackets or your variable (without these brackets)",
 'java'); 
```

# c - C: Linux command executed by popen() function not showing results

> ID：16127027
> 
> 赞同：10
> 
> 时间：2013-04-21T01:18:42.137
> 
> 标签：c, linux, popen

I have the code below that I refer the thread on [here](https://stackoverflow.com/questions/671461/how-can-i-execute-external-commands-in-c-linux) to use the `popen` function

```
int main(int argc,char *argv[]){    
    FILE* file = popen("ntpdate", "r");
    char buffer[100];
    fscanf(file, "%100s", buffer);
    pclose(file);
    printf("buffer is :%s\n", buffer);
    return 0;
} 
```

It outputs:

```
21 Apr 03:03:03 ntpdate[4393]: no server can be used, exiting
buffer is: 
```

why `printf` does not output anything? If I use `ls` as a command, then printf outputs the ls output. what am I doing wrong `ntpdate` executing?

If I execute the code below (referring the [webpage](http://www.lainoox.com/how-to-execute-shell-commands-c/))

```
#define COMMAND_LEN 8
#define DATA_SIZE 512

int main(int argc,char *argv[]){

    FILE *pf;
       char command[COMMAND_LEN];
       char data[DATA_SIZE];

       // Execute a process listing
       sprintf(command, "ntpdate");

       // Setup our pipe for reading and execute our command.
       pf = popen(command,"r");

       if(!pf){
         fprintf(stderr, "Could not open pipe for output.\n");
         return;
       }

       // Grab data from process execution
       fgets(data, DATA_SIZE , pf);

       // Print grabbed data to the screen.
       fprintf(stdout, "-%s-\n",data);

       if (pclose(pf) != 0)
           fprintf(stderr," Error: Failed to close command stream \n");

       return 0;
} 
```

I get

```
21 Apr 03:15:45 ntpdate[5334]: no servers can be used, exiting
-�2}�����"|�4#|�-
 Error: Failed to close command stream 
```

what are wrongs on the codes above?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-21T01:37:42.923

Since the output is going to `stderr` you need to redirect `stderr` like so:

```
FILE* file = popen("ntpdate 2>&1", "r"); 
```

this will redirect `stderr` to `stdout` and so you will see output from both. Second issue `fscanf` will stop at the first space so you can replace with `fgets`:

```
fgets(buffer, 100, file); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T01:36:42.053

As [Shafik Yaghmour](https://stackoverflow.com/users/1708801/shafik-yaghmour) correctly diagnosed, the output you see from `ntpdate` is written (correctly) to its standard error, which is the same as your programs standard error.

To get the error messages sent down the pipe, use:

```
FILE *file = popen("ntpdate 2>&1", "r"); 
```

That sends the standard error output from `ntpdate` to the standard output of the command, which is the pipe you're reading from.

Of course, it looks like using `ntpdate` isn't going to work well until you've configured something.

# javascript - 为什么 CoffeeScript 包装类编译代码

> ID：16127032
> 
> 赞同：-1
> 
> 时间：2013-04-21T01:19:27.433
> 
> 标签：javascript, coffeescript

CoffeScript 编译这个：

```
class A
  a: 'value' 
```

至：

```
var A;

A = (function() {
  function A() {}

  A.prototype.a = 'value';

  return A;

})(); 
```

这有什么区别：

```
var A = function A(){};
A.prototype.a = 'value'; 
```

我在控制台中测试了代码，第一个返回`function A()`，而第二个返回`"value"`，但作为一个类旨在被实例化，使用`class A`，`myA = new A()`适用于这两种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:26:20.760

没有有效的区别，但由于 CoffeeScript 是一个代码生成器，它可能在不同情况下对变量范围有其他用途，并且根本没有针对实际上不需要额外范围的简单情况进行优化以减少代码。

我不使用 CoffeeScript，但这是我的猜测。

# mysql - 另一个外键问题 - #1451 - 无法删除或更新父行：外键约束失败

> ID：16127035
> 
> 赞同：1
> 
> 时间：2013-04-21T01:20:31.437
> 
> 标签：mysql, foreign-keys, foreign-key-relationship

在 MySQL 中执行此操作时：

```
UPDATE `client_therapist` SET `therapist_id` = 3 LIMIT 1 ; 
```

我收到以下错误：

```
#1451 - Cannot delete or update a parent row: a foreign key constraint fails (`test_structure`.`client_group`, CONSTRAINT `client_group_therapist_id` FOREIGN KEY (`therapist_id`) REFERENCES `client_therapist` (`therapist_id`) ON DELETE NO ACTION ON UPDATE NO ACTION) 
```

我已经到处搜索并阅读了 StackOverflow 上提出的几个外键问题......无济于事。我认为我目前还没有完全理解外键。

这是我的数据库结构： ![显示外键的数据库结构图](https://i.stack.imgur.com/BdX2q.png)

导致问题的外键位于 client_group 表上。我的理解是它的意思是“每当添加一行时，治疗师_id 必须与 client_treatment 表中的治疗师_id 匹配。”

只是输入这个让我意识到问题的一部分是当添加 client_group 时，它可能会绑定到 client_treatment 表中的某一行。因此，如果我尝试更新那个 client_treatment 行，它就会吓坏了。所以我想我的问题是 - 我该如何解决这个问题？我需要更新 client_therapy 表中某一行的 treatment_id，但只要 client_group 表中有一行，我似乎就不能。

这是我的表格，上面有一些虚拟信息：

```
CREATE SCHEMA IF NOT EXISTS `test_structure` DEFAULT CHARACTER SET utf8 ;
USE `test_structure` ;

-- -----------------------------------------------------
-- Table `test_structure`.`user`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `test_structure`.`user` (
  `user_id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT ,
  `email` VARCHAR(80) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL ,
  `password` VARCHAR(40) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL,
  `display_name` VARCHAR(60) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL ,
  `first_name` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL ,
  `last_name` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL ,
  `street_address` VARCHAR(120) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL ,
  `city` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL ,
  `state` CHAR(2) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL ,
  `zip` VARCHAR(10) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL ,
  `work_phone` VARCHAR(20) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL ,
  `cell_phone` VARCHAR(20) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL ,
  `home_phone` VARCHAR(20) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL ,
  `date_created` TIMESTAMP NULL DEFAULT NULL ,
  `expired` TINYINT(1) NOT NULL DEFAULT '0' ,
  `date_last_login` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ,
  `login_count` INT(10) UNSIGNED NULL DEFAULT '0' ,
  PRIMARY KEY (`user_id`) ,
  UNIQUE INDEX `email` (`email` ASC) )
ENGINE = InnoDB
AUTO_INCREMENT = 0
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci, 
COMMENT = 'Users table.  All Therapists, Clients, Admins and others wil' ;

-- -----------------------------------------------------
-- Table `test_structure`.`client_therapist`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `test_structure`.`client_therapist` (
  `client_therapist_id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT ,
  `client_id` INT(10) UNSIGNED NOT NULL ,
  `therapist_id` INT(10) UNSIGNED NOT NULL ,
  `start_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ,
  `end_date` TIMESTAMP NULL DEFAULT NULL ,
  `therapist_approval` TINYINT(1) NOT NULL DEFAULT '0' ,
  `date_client_agreed_to_terms` TIMESTAMP NULL DEFAULT NULL ,
  PRIMARY KEY (`client_therapist_id`) ,
  INDEX `client_therapist_client_id` (`client_id` ASC) ,
  INDEX `client_therapist_therapist_id` (`therapist_id` ASC) ,
  CONSTRAINT `client_therapist_client_id`
    FOREIGN KEY (`client_id` )
    REFERENCES `test_structure`.`user` (`user_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `client_therapist_therapist_id`
    FOREIGN KEY (`therapist_id` )
    REFERENCES `test_structure`.`user` (`user_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 0
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci, 
COMMENT = 'This defines the relationship between a client and therapist' ;

-- -----------------------------------------------------
-- Table `test_structure`.`client_group`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `test_structure`.`client_group` (
  `client_group_id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT ,
  `therapist_id` INT(10) UNSIGNED NOT NULL ,
  `title` VARCHAR(128) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL ,
  `description` VARCHAR(255) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL ,
  `date_added` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ,
  PRIMARY KEY (`client_group_id`) ,
  INDEX `client_group_therapist_id` (`therapist_id` ASC) ,
  CONSTRAINT `client_group_therapist_id`
    FOREIGN KEY (`therapist_id` )
    REFERENCES `test_structure`.`client_therapist` (`therapist_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 0
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;

-- -----------------------------------------------------
-- Table `test_structure`.`client_group_member`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `test_structure`.`client_group_member` (
  `client_group_member_id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT ,
  `client_group_id` INT(10) UNSIGNED NOT NULL ,
  `client_id` INT(10) UNSIGNED NOT NULL ,
  PRIMARY KEY (`client_group_member_id`) ,
  INDEX `client_group_id` (`client_group_id` ASC) ,
  INDEX `client_group_member_id` (`client_id` ASC) ,
  CONSTRAINT `client_group_id`
    FOREIGN KEY (`client_group_id` )
    REFERENCES `test_structure`.`client_group` (`client_group_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `client_group_member_id`
    FOREIGN KEY (`client_id` )
    REFERENCES `test_structure`.`client_therapist` (`client_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 0
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;

-- -----------------------------------------------------
-- INSERT TEST DATA
-- -----------------------------------------------------
INSERT INTO `test_structure`.`user` (`user_id`, `email`, `password`, `display_name`, `first_name`, `last_name`, `street_address`, `city`, `state`, `zip`, `work_phone`, `cell_phone`, `home_phone`, `date_created`, `expired`, `date_last_login`, `login_count`) VALUES (NULL, 'dr@dr.com', SHA1('12345'), 'Dr. Test', 'Dr.', 'Test', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NOW(), '0', CURRENT_TIMESTAMP, '0');

SET @therapist_id = LAST_INSERT_ID();

INSERT INTO `test_structure`.`user` (`user_id`, `email`, `password`, `display_name`, `first_name`, `last_name`, `street_address`, `city`, `state`, `zip`, `work_phone`, `cell_phone`, `home_phone`, `date_created`, `expired`, `date_last_login`, `login_count`) VALUES (NULL, 'client@client.com', '12345', 'Client', 'Client', 'Client', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NOW(), '0', CURRENT_TIMESTAMP, '0');

SET @client_id = LAST_INSERT_ID();

INSERT INTO `test_structure`.`client_therapist` (`client_therapist_id`, `client_id`, `therapist_id`, `start_date`, `end_date`, `therapist_approval`, `date_client_agreed_to_terms`) VALUES (NULL, @client_id, @therapist_id, CURRENT_TIMESTAMP, NOW(), '0', NOW());

INSERT INTO `test_structure`.`client_group` (`client_group_id`, `therapist_id`, `title`, `description`, `date_added`) VALUES (NULL, @therapist_id, 'Test', NULL, CURRENT_TIMESTAMP);

SET @group_id = LAST_INSERT_ID();

INSERT INTO `test_structure`.`client_group_member` (`client_group_member_id`, `client_group_id`, `client_id`) VALUES (NULL, @group_id, @client_id); 
```

然后运行这段代码，看看foreign_key问题：

```
INSERT INTO `test_structure`.`user` (`user_id`, `email`, `password`, `display_name`, `first_name`, `last_name`, `street_address`, `city`, `state`, `zip`, `work_phone`, `cell_phone`, `home_phone`, `date_created`, `expired`, `date_last_login`, `login_count`) VALUES (NULL, 'newdr@newdr.com', SHA1('12345'), 'New Dr', 'Dr.', 'New', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NOW(), '0', CURRENT_TIMESTAMP, '0');

SET @new_therapist_id = LAST_INSERT_ID();

UPDATE `test_structure`.`client_therapist` SET `therapist_id` = @new_therapist_id LIMIT 1; 
```

非常感谢所有帮助/说明/指导！

***更新***

我遇到的问题是因为 client_group 表中的 therapy_id 绑定到 client_treatment 表中的 treatment_id 而不是 user 表。该 therapy_id 可以在 client_treatment 和 client_group 表中多次存在，但在 user 表中只存在一次，因此只要 client_group 表中仍有一行引用该 therapy_id，我就永远无法更新 client_treatment 表中的该列。

我应该做的是将 therapy_id 绑定到 user 表而不是 client_treatment 表，因为最好让外键引用每个表上的主 ID（这是真的吗？）。

现在我必须学习如何删除/编辑/更新表上的外键... :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T01:37:06.320

您需要使用该选项声明的外键`ON UPDATE CASCADE`。

以下是如何在表上删除和添加外键的示例：

```
ALTER TABLE client_group drop FOREIGN KEY `client_group_therapist_id`, 
  ADD FOREIGN KEY `client_group_therapist_id` (`therapist_id`) 
  REFERENCES `client_therapist` (`therapist_id`) ON DELETE NO ACTION ON UPDATE CASCADE; 
```

然后，如果您更改 中的值`client_therapist.therapist_id`，它将自动更新 中的值`client_group.therapist_id`。

这种变化将是同时的和原子的——也就是说，没有其他同时运行的查询能够看到一个表中的数据发生了变化，而另一个表中的数据没有发生变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T02:09:45.683

外键不正确，因为它引用了另一个表中的非唯一列。

我应该做的是将 therapy_id 绑定到 user 表而不是 client_treatment 表，因为最好让外键引用每个表上的主 ID。

```
ALTER TABLE client_group drop FOREIGN KEY `client_group_therapist_id`, 
ADD FOREIGN KEY `client_group_therapist_id` (`therapist_id`) 
REFERENCES `user` (`user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION; 
```

# python - 在 python 中创建命令行开关

> ID：16127036
> 
> 赞同：5
> 
> 时间：2013-04-20T12:56:27.417
> 
> 标签：python

例如，sqlmap 使用`python sqlmap.py -h`.

上面的这个命令列出了 sqlmap 中所有可用的开关，`-h`它本身就是一个开关。

当您创建一个用于终端的python工具时，创建开关的基本方法是什么？

一个你好世界的例子将是最感激的！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T13:04:44.657

这些是命令行选项。您可以为此使用 stdlib[`argparse`模块](http://docs.python.org/2/library/argparse.html)。

```
import argparse

parser = argparse.ArgumentParser(description='Process some integers.')
parser.add_argument('integers', metavar='N', type=int, nargs='+',
                   help='an integer for the accumulator')
parser.add_argument('--sum', dest='accumulate', action='store_const',
                   const=sum, default=max,
                   help='sum the integers (default: find the max)')

args = parser.parse_args()
print args.accumulate(args.integers) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T04:13:49.563

程序启动时使用的命令行参数显示为 中的字符串列表[`sys.argv`](http://docs.python.org/2/library/sys.html#sys.argv)，其中`sys.argv[0]`是程序名称。

其他帮助处理它们的较旧的标准库模块包括[`getopt`](http://docs.python.org/3/library/getopt.html)和[`optparse`](http://docs.python.org/3/library/optparse.html). 不过，您确实应该使用`argparse`.

# c++11 - 检测两种类型是否是同一个类模板的特化？

> ID：16127038
> 
> 赞同：8
> 
> 时间：2013-04-21T01:20:39.310
> 
> 标签：c++11, template-specialization, template-meta-programming, typetraits

我想知道如何编写一个`type_traits`类来检测两种类型是否是同一个模板类的特化。最大的问题是它应该适用于混合类型/非类型模板类，例如：

```
template <typename T, std::size_t N>
class MyClass {}; 
```

有可能设计出这样的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:10:17.073

我认为您通常不能对混合了类型参数和非类型参数的任意类模板执行此操作。

您可以接近更具体的参数集，但我不知道如何处理一般情况：

```
#include <type_traits>

template <typename T, std::size_t N>
class MyClass {};

// assume not the same
template<typename T, typename U>
struct my_trait : std::false_type
{ };

// both specializations of MyClass
template<typename T1, std::size_t N1, typename T2, std::size_t N2>
struct my_trait<MyClass<T1, N1>, MyClass<T2, N2>>
: std::true_type
{ };

// both specializations of some class template Templ<typename, std::size_t>
template<template<typename, std::size_t> class Templ, typename A1, std::size_t S1, typename A2, std::size_t S2>
struct my_trait<Templ<A1, S1>, Templ<A2, S2>>
: std::true_type
{ };

// both specializations of some class template Templ<typename...>
template<template<typename...> class Templ, typename... A1, typename... A2>
struct my_trait<Templ<A1...>, Templ<A2...>>
: std::true_type
{ }; 
```

# php - 加载前出现在页面上的杂散“-->”

> ID：16127040
> 
> 赞同：0
> 
> 时间：2013-04-21T01:20:40.940
> 
> 标签：php, javascript, jquery, mysql, wordpress

我刚刚将我的 wordpress 站点从本地主机移动到实时站点，并且在加载页面之前它显示“-->”。那是怎么回事？

不确定这是否相关，但我使用的 jquery 脚本也已停止工作。

[链接到这里的网站。](http://web.kangabell.com)

*背景：*我在移动网站时遇到了困难。在最后一刻，在移动站点之前，我更改了主题文件夹名称。这在整个主题中破坏了很多实例，其中它引用了通过该文件夹的路径，所以我必须修复这些。我在数据库上使用了[搜索和替换工具](http://interconnectit.com/products/search-and-replace-for-wordpress-databases/)，但我发现 CSS 中也有一些实例必须手动修复。此外，当我尝试通过 PHP myAdmin 将 SQL DB 导入实时站点时，它说存在语法错误。这似乎超出了我的想象，所以我尝试通过他们的导入工具导入 WP 内容，然后再次手动设置菜单等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T01:23:46.967

“未打开”的评论块。如果没有开头，则在页面上打印`<!--`杂散关闭。`-->`

如果您使用的是 CMS（是的，您标记了 WordPress），那么

1.  你必须找到`-->`出现的那一行。
2.  查看周围的代码并确定它是什么。它可能是其中的一部分
    *   模板
    *   一个插件
    *   用户内容（尤其是未经过滤的输入）
    *   WordPress 本身（谁知道呢，它可能已经滑过了 QA）
    *   您在您的网站中放置的我们不知道的东西！
3.  寻找那个模板/插件/任何东西并挖掘！

尽管如此，这是手动工作，但至少您的范围要窄得多。

# javascript - 更改 Javascript 中的选定值 - Ruby

> ID：16127052
> 
> 赞同：0
> 
> 时间：2013-04-21T01:22:57.840
> 
> 标签：javascript, ruby-on-rails, combobox

鉴于 RoR (Ruby 1.9) 应用程序，我有一个组合框，如下所示：

```
<%= collection_select(:source, :source_id, @objects, :id, :name, :selected =>1) 
```

我想在 javascript 中更改选定的值。有可能吗？如果是，请向我展示有关此的示例代码。
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:35:28.203

您可以使用以下内容更改选择框的选定选项：

```
var sel = document.querySelectorAll('select[name="test"]')[0]; // Change this to target your select box
sel.selectedIndex = 1; 
```

[http://jsfiddle.net/ryanbrill/ffwXb/](http://jsfiddle.net/ryanbrill/ffwXb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T01:38:00.680

如果您愿意使用 JQuery，它非常容易

```
<%= collection_select(:source, :source_id, @objects, :id, :name, html_options = {selected: 1, id: 'yourid'}) 
```

在 .js 中

```
$("#yourid").val('thevalueyouwantselected'); 
```

希望有帮助

# c++ - 在 mac 上使用 macport 安装时，boost 库的默认位置是什么？

> ID：16127060
> 
> 赞同：23
> 
> 时间：2013-04-21T01:24:45.363
> 
> 标签：c++, macos, boost, macports

我刚刚在 mac 上安装了 boost，使用 macport 和以下命令

```
sudo port install boost 
```

它安装得很好，但我不知道 boost 库安装在哪里。
它应该在哪里/我如何搜索它？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-21T01:32:15.737

我相信标题应该在`/usr/local/include/boost`并且库应该在`/usr/local/lib.`Or in `/opt/local/include/boost`and中。`/opt/local/lib`

您可以使用搜索`locate`：

```
locate boost 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-26T21:51:06.937

对我来说，使用 High Sierra 和 MacPorts 2.4.4，MacPorts 在以下位置安装了 Boost 1.66：

```
/opt/local/include/boost 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-01T06:53:18.773

使用,`macOS Sierra 10.13.5`安装`boost`。`brew`位置在`/usr/local/include/`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T07:33:56.383

默认为 /usr/local/lib /usr/local/include

您可能想使用 clang 工具链重建库

```
./bjam toolset=clang 
```

然后在特定位置进行手动安装，特别是如果您想在版本之间切换（用于源代码控制或测试等）

```
> find . -name boost 
```

也有效

# ruby-on-rails - 嵌套模型测试：找不到表“*”错误。

> ID：16127062
> 
> 赞同：1
> 
> 时间：2013-04-21T01:25:28.430
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, factory-bot

我正在尝试针对`working`大型代码库运行 RSpec（我对 Rails 比较陌生），但在这一点上它失败了；我敢打赌，这与 FactoryGirl 的定义有关。

*模型概述：*

```
class User < ActiveRecord::Base
  # ...
  has_many :friends, :conditions => {:approved => true}
  has_many :friendships, :class_name => "User", :source => :friend, :through => :friends
  # ... 
```

*测试方法：*

```
# models/user.rb
def add_friend(user_id, friend_id)
  @friendship = self.friends.new({:user_id => user_id, :friend_id => friend_id})
  return false unless @friendship.save
end 
```

*FactoryGirl 工厂：*

```
FactoryGirl.define do
  factory :user, :class => User do |f|
    # ...
  end

  factory :friend, :class => Friend do |f|
    f.user_id     { Faker::Base.regexify(/\d{1,3}/)}
    f.friend_id   { Faker::Base.regexify(/\d{1,3}/)}
    # ...
  end
end 
```

*规格：*

```
# specs/models/user_spec.rb
it "Adds friends" do
  @current_user.add_friend(@current_user.id, @friend_1.id).should be_valid
end 
```

**错误 ：**

```
ActiveRecord::StatementInvalid: Could not find table 'friends' 
```

非常欢迎任何反馈，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T01:40:46.803

您可能需要运行`rake db:migrate RAILS_ENV=test`.

# php - 制作一个有自我意识的菜单栏

> ID：16127069
> 
> 赞同：0
> 
> 时间：2013-04-21T01:27:20.500
> 
> 标签：php, menu, menubar

所以，在我目前正在设计的网站（HTML5、PHP、JS/JQuery 和 Bootstrap）中，我在页面顶部有一个基本的菜单栏。只是你的正常

```
 <ul>
    <li><a href="index.php">Home</a></li>
    <li class="active"><a href="about.php">About</a></li>
    <li><a href="players.php">Players</a></li>
    <li><a href="rules.php">Rules</a></li>
    </ul> 
```

现在，还有更多内容，例如登录按钮等，但基本上它在我的页面顶部添加了很多混乱，我想知道是否有任何方法可以将它放入 header.php文件。
我的问题是如何在多个网页中使用它并且仍然拥有该`class="active"`部分。我唯一想到的是创建一个函数，它将页面名称作为字符串并遍历每一行并执行 if（页面与链接相同）{ echo the element with the `class="active"`} else { echo the element without类}
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:46:06.947

如您所说，您可能希望将标头提取到 header.php，然后使用 PHP 包含方法。

```
<?php

include 'header.php';

?> 
```

至于选择“活动”类，您可以在每个页面上传递并设置一个“$活动”变量。然后，由于包含的文件从包含它的页面继承范围，您可以获取变量并在 header.php 页面中执行您的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T01:45:50.400

[http://php.net/manual/en/function.include.php](http://php.net/manual/en/function.include.php)

您可以在服务器上的任何位置包含另一个 php 文件，并在其中包含菜单 html，如您所说的那样。

至于保持 class="active"，因为你已经让它在某个地方工作了，大概在你的主 php 文件中，你可以将它移动到将包含的新头 php 文件，并在必要时进行重构。

我根本不知道你的代码是什么样子的，如果你发布了菜单的一部分，我或其他人可能会提供更多帮助。

# java - PropertyPlaceholderConfigurer：我可以有一个动态位置值吗

> ID：16127070
> 
> 赞同：5
> 
> 时间：2013-04-21T01:27:24.497
> 
> 标签：java

现在我在我的 xml 文件中有这个：

```
 <bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost:3306/dashboardsupervisor" />
    <property name="username" value="root" />
    <property name="password" value="${jdbc.password}" />
</bean> 
```

和

```
 <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
<property name="location">
    <value>file:C:/jdbc.properties</value>
  </property>
</bean> 
```

现在，我的问题是我不知道这个文件（jdbc.properties）的确切位置，因为这个应用程序将在不同的计算机上运行，​​在某些地方它安装在 c: 中，有时可能在 f:..所以如果我不知道这个文件的路径，如果有的话我可以找到它。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-21T04:02:52.223

You can define the file location as system property, eg -Dprops.file=file:c:/1.properties

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
<property name="location">
    <value>$props.file</value>
  </property>
</bean> 
```

or

```
<context:property-placeholder location="${props.file}"/> 
```

or you can scan the file system

```
public class ScanningPropertyPlaceholderConfigurer extends org.springframework.beans.factory.config.PropertyPlaceholderConfigurer {
    @Override
       public void setLocation(Resource location) {
       File file = findFile(fileName);  // implement file finder
       super.setLocation(new FileSystemResource(file));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-09T14:03:13.160

```
PropertyPlaceholderConfigurer configurer = new PropertyPlaceholderConfigurer();
configurer.setLocation(new ClassPathResource("context.properties"));

ClassPathXmlApplicationContext applicationContext = new ClassPathXmlApplicationContext(new String[]{"applicationContext.xml"}, false);
applicationContext.addBeanFactoryPostProcessor(configurer);
applicationContext.refresh(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T01:32:17.897

是的。您可以让`Spring`在类路径中找到该文件。该文件可以存在于不同机器上的不同位置，但只要它存在于类路径中就会被加载。

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
   <property name="location">
      <value>classpath:jdbc.properties</value>
   </property>
</bean> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T01:34:34.540

可以有多种方法来处理它。

1.  将文件放入项目中，这样你就可以一直拥有相同的相对路径。
2.  在构建过程中填充值，即在值标签中放置一个占位符，并在构建过程中通过传递参数来替换它。例如，如果您使用 ant 进行构建，则可以使用[`expandproperties`](http://ant.apache.org/manual/properties.html)task 来完成。

# android - 如何随机选择一个字段SQLite Android上的记录之一

> ID：16127073
> 
> 赞同：0
> 
> 时间：2013-04-21T01:27:50.527
> 
> 标签：android, sqlite, android-sqlite

我有这样的 SQLite 数据库表：

```
_id  ||   Column1   ||    Column2    ||
1    ||    test1    ||   a,b,c,d,e,f ||
2    ||    test2    ||   g,h,i,j,k,l ||
3    ||    test3    ||   m,n,o,p,q,r || 
```

如何从此表中随机选择一个 Column2？

我想要这样的结果：

```
_id  ||   Column1   ||    Column2    ||
1    ||    test1    ||   d           ||
2    ||    test2    ||   k           ||
3    ||    test3    ||   r           || 
```

假设 d, k, r 是每条记录的 Column2 的随机值。

谢谢

更新：我创建了 CustomAdapter 并添加了一些这样的视图：

```
 @Override
  public View newView(Context context, Cursor cursor, ViewGroup parent) {
      Cursor c = getCursor();
      final LayoutInflater inflater = LayoutInflater.from(context);
      View v = inflater.inflate(layout, parent, false);
      int column2Name= c.getColumnIndex(DBAdapter.COLUMN2);
      String col2Name= c.getString(column2Name);
      String[] temp;
      Random random = new Random();
          temp = col2Name.split(",");
          String col2 = temp[random.nextInt(temp.length)];
      TextView col2_name = (TextView) v.findViewById(R.id.column2_label);
      if (col2_name != null) {
          col2_name .setText(col2);
      }
      return v;
  }

  @Override
  public void bindView(View v, Context context, Cursor c) {
      int column2Name= c.getColumnIndex(DBAdapter.COLUMN2);
          String col2Name= c.getString(column2Name);
          String[] temp;
          Random random = new Random();
              temp = col2Name.split(",");
              String col2 = temp[random.nextInt(temp.length)];
          TextView col2_name = (TextView) v.findViewById(R.id.column2_label);
      if (col2_name != null) {
          col2_name .setText(col2);
      }
    } 
```

现在，只需在您的活动上使用该 customAdapter，以便 column2 可以显示为 1 个随机值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T02:03:27.103

一旦您从数据库中获得数据，这将在 Java 中更容易完成。

```
Random RANDOM = new Random(System.currentTimeMillis());

int index = cursor.getColumnIndex("Column2");
String value = cursor.getString(index);
String[] values = value.split(",");
String randomValue = values[RANDOM.nextInt(values.length)]; 
```

# android - Android ListFragment 错误

> ID：16127074
> 
> 赞同：2
> 
> 时间：2013-04-21T01:27:56.437
> 
> 标签：android, android-fragments, android-listfragment

这是我第一次使用 ListFragments，我遇到了错误。所以我的问题是为什么我在这行代码上得到一条红线？

```
setListAdapter(new ArrayAdapter<String>(getActivity(),
            android.R.layout.simple_list_item_1, model.getIncidents())); 
```

它说`The constructor ArrayAdapter<String>(Activity, int, ArrayList<Incident>) is undefined`

***编辑***

我不再收到此片段的上述错误。我稍微修改了代码，现在看起来像这样：

```
public class Incidents_Frag extends ListFragment {
View view;
public static Model model;

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {        
    view = inflater.inflate(R.layout.incid, container, false);
    model = new Model();
    setListAdapter(new ArrayAdapter<Incident>(getActivity(),
            android.R.layout.simple_list_item_1, model.getIncidents()));        
    return view;
}
} 
```

但是现在我得到一个运行时错误。logcat在下面

```
04-21 18:47:40.934: E/AndroidRuntime(806): FATAL EXCEPTION: main
04-21 18:47:40.934: E/AndroidRuntime(806): java.lang.RuntimeException: Content has view with id attribute 'android.R.id.list' that is not a ListView class
04-21 18:47:40.934: E/AndroidRuntime(806):  at android.app.ListFragment.ensureList(ListFragment.java:402)
04-21 18:47:40.934: E/AndroidRuntime(806):  at android.app.ListFragment.onViewCreated(ListFragment.java:203)
04-21 18:47:40.934: E/AndroidRuntime(806):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:809)
04-21 18:47:40.934: E/AndroidRuntime(806):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:998)
04-21 18:47:40.934: E/AndroidRuntime(806):  at android.app.BackStackRecord.run(BackStackRecord.java:622)
04-21 18:47:40.934: E/AndroidRuntime(806):  at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1330)
04-21 18:47:40.934: E/AndroidRuntime(806):  at android.app.FragmentManagerImpl$1.run(FragmentManager.java:417)
04-21 18:47:40.934: E/AndroidRuntime(806):  at android.os.Handler.handleCallback(Handler.java:605)
04-21 18:47:40.934: E/AndroidRuntime(806):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-21 18:47:40.934: E/AndroidRuntime(806):  at android.os.Looper.loop(Looper.java:137)
04-21 18:47:40.934: E/AndroidRuntime(806):  at android.app.ActivityThread.main(ActivityThread.java:4340)
04-21 18:47:40.934: E/AndroidRuntime(806):  at java.lang.reflect.Method.invokeNative(Native Method)
04-21 18:47:40.934: E/AndroidRuntime(806):  at java.lang.reflect.Method.invoke(Method.java:511)
04-21 18:47:40.934: E/AndroidRuntime(806):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-21 18:47:40.934: E/AndroidRuntime(806):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-21 18:47:40.934: E/AndroidRuntime(806):  at dalvik.system.NativeStart.main(Native Method) 
```

我终其一生都无法弄清楚他们在第一行所说的内容。我没有看到任何`R.id`名为`list`. 我现在相信我只需要在某个地方放置一个列表视图或文本视图。谢谢你尽你所能的帮助

***编辑***

这是我的片段的新代码

```
public class Incidents_Frag extends ListFragment {
View view;
public static Model model;

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {        
    view = inflater.inflate(R.layout.incid, container, false);
    model = new Model();
    setListAdapter(new ArrayAdapter<Incident>(getActivity(),
            android.R.layout.simple_list_item_1, model.getIncidents()));        
    return view;
}

public class MyArrayAdapter extends ArrayAdapter<Item> {
    ArrayList<Incident> items;
    Context context;
    public MyArrayAdapter(Context context, int textViewResourceId,
            ArrayList<Incident> items) {
        super(context, textViewResourceId, items);

        this.context = context;
        this.items = items; 
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        View row = convertView;
        ViewHolder holder = new ViewHolder();
        Item item = items.get(position);

        if(row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(R.layout.list_item, parent, false);
            holder.userName = (TextView) row.findViewById(R.id.name);
            row.setTag(holder);
        }
        else
        { 
            holder = (ViewHolder) row.getTag();
        }

        holder.name.setText(item.getName());
        return row;
    }

    public static class ViewHolder
    {
        TextView name;
    }

    public int getCount() {
        return items.size();
    }

}
} 
```

我下面有红线 `Item item = items.get(position);`

`holder.userName = (TextView) row.findViewById(R.id.name);`
“无法解析用户名”

`holder.name.setText(item.getName());`
“方法 getName() 未定义 ClipData.Item 类型”

`public static class ViewHolder`
“成员类型 ViewHolder 不能声明为静态；静态类型只能声明为静态或顶级类型”

因此，如果我们可以清除这些红线，它可能会起作用，也可能不会起作用。如果您希望我继续走这条路，请告知此代码是否在正确的位置，以及需要进行哪些编辑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T01:49:03.747

Default constructor only accepts an Array of String. You can passing an Array of "Incident" hence that error.

You will have to implement your own ArrayAdapter that accepts array of object type "Incident".

A sample extended ArrayAdapter will look something like this.

```
public class MyArrayAdapter extends ArrayAdapter<Incident> { // changed from Item to Incident
    ArrayList<Incident> items;
    Context context;
    public MyArrayAdapter(Context context, int textViewResourceId,
            ArrayList<Incident> items) {
        super(context, textViewResourceId, items);

        this.context = context;
        this.items = items; 
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        View row = convertView;
        ViewHolder holder = new ViewHolder();
        Incident item = items.get(position); // item is your accident

        if(row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(R.layout.list_item, parent, false);
            holder.name = (TextView) row.findViewById(R.id.name); // updated it is name from holder class
            row.setTag(holder);
        }
        else
        {
            holder = (ViewHolder) row.getTag();
        }

        holder.name.setText(item.getName()); // this is just example item is your Incident, you have to get it's name function whatever that is in your class
        return row;
    }

    public static class ViewHolder
    {
        TextView name;
    }

    public int getCount() {
        return items.size();
    }

} 
```

You will have to create your own layout for this. For above example create list_item.xml and just add one TextView with id name and it will work.

# php - 致命错误：找不到类“Mustache_Engine”

> ID：16127077
> 
> 赞同：1
> 
> 时间：2013-04-21T01:29:11.443
> 
> 标签：php, windows, ubuntu-12.04, mustache

我正在为我的项目使用 Mustache，并且我正在关注它的文档.. 这是..

```
define('DS', DIRECTORY_SEPARATOR);
require 'system'.DS.'mustache'.DS.'Autoloader.php';
Mustache_Autoloader::register();
$m = new Mustache_Engine; 
```

小胡子坐在`system/mustache`文件夹中。有趣的是，它在 Windows 下运行良好。但是在我的服务器（ubuntu 12.04）上它说`Fatal error: Class 'Mustache_Engine' not found`。我的 PHP 与我的 Windows 相同，所以我真的不明白这里可能是什么问题。感谢所有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T16:42:32.657

包含的`mustache`文件夹`Autoloader.php`需要大写，以匹配类名的大小写。欢迎使用区分大小写的文件系统 :)

通常，您应该将项目根目录视为存储库本身或存储库中的`src`文件夹。所有子目录都是为了使项目和自动加载器[PSR-0 兼容](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)。

所以把 Mustache.php repo 本身放进去`/system`，给你`/system/mustache/src/Mustache/Autoloader.php`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-22T05:36:53.947

我有类似的问题，但路径是正确的。我失踪`Mustache_Autoloader::register();` 了 我花了一段时间才发现它

# django - setup.py：当所需的包名称包含破折号时，预期的带括号的列表

> ID：16127080
> 
> 赞同：22
> 
> 时间：2013-04-21T01:29:39.743
> 
> 标签：django, setuptools, distribute

我正在编写一个可重用的 Django 应用程序，如下所述： [https ://django.readthedocs.org/en/1.5.x/intro/reusable-apps.html](https://django.readthedocs.org/en/1.5.x/intro/reusable-apps.html)

当我在 setup.py 中指定包名称中包含破折号的要求时，setup.py 将不会运行。例如，如果我的 setup.py 包含这一行：

```
requires=[ 'djangotinymce', 'MtFileUtil', 'Django', 'PyYAML', ], 
```

然后它可以正常工作。

```
python ./setup.py sdist
running sdist
...
Creating tar archive 
```

如果我将行更改为如下所示：

```
requires=[ 'django-tinymce', 'MtFileUtil', 'Django', 'PyYAML', ], 
```

我们得到一个奇怪的错误

```
Traceback (most recent call last):
  File "./setup.py", line 32, in <module>
    'Topic :: Internet :: WWW/HTTP :: Dynamic Content',
  File "/usr/lib/python2.7/distutils/core.py", line 112, in setup
    _setup_distribution = dist = klass(attrs)
  File "/home/travis/venv/deleteme/local/lib/python2.7/site-packages/distribute-0.6.24-py2.7.egg/setuptools/dist.py", line 225, in __init__
    _Distribution.__init__(self,attrs)
  File "/usr/lib/python2.7/distutils/dist.py", line 259, in __init__
    getattr(self.metadata, "set_" + key)(val)
  File "/usr/lib/python2.7/distutils/dist.py", line 1220, in set_requires
    distutils.versionpredicate.VersionPredicate(v)
  File "/usr/lib/python2.7/distutils/versionpredicate.py", line 113, in __init__
    raise ValueError("expected parenthesized list: %r" % paren)
ValueError: expected parenthesized list: '-tinymce' 
```

我不确定该怎么做。我想要求 django-tinymce 但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-23T18:45:36.240

该`require`参数来自`distutils`并期望 python 包名称（此处的一些[文档](http://docs.python.org/2/distutils/setupscript.html#relationships-between-distributions-and-packages)）。由于您使用的是`setuptools`，因此您应该改用该`install_requires`参数，它确实支持 PyPI 包名称：

```
install_requires=['djangotinymce', 'MtFileUtil', 'Django', 'PyYAML'], 
```

Python 打包用户指南中有关[指定依赖项](https://python-packaging.readthedocs.io/en/latest/dependencies.html)的更多信息。

# javascript - 调整画布大小后，画布内的所有东西都变大了

> ID：16127082
> 
> 赞同：0
> 
> 时间：2013-04-21T01:29:47.243
> 
> 标签：javascript, canvas, resize

当我第一次开始我正在从事的这个项目时，我的画布尺寸为 1400 像素宽和 480 像素高。我意识到稍后我需要使画布与窗口本身的大小相同，所以我这样做了，画布内的所有东西都放大了或其他东西。我将 a 设置`drawImage();`为 300 px 宽和 180 px 高，它比这大很多，图像实际上与现在的画布宽度相同。有什么建议么？这是该项目的链接：

[http://brycemckenney.com/animation-app](http://brycemckenney.com/animation-app)

感谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T03:39:58.680

您已通过 css 设置尺寸，而不是（图像）画布的物理尺寸。

您的代码的相关部分（供其他人将来阅读）是：

```
var canvas = document.getElementById("canvas1");
var ctx = canvas.getContext("2d");
var windowHeight = $(window).height();
var windowWidth = $(window).width();
$(canvas).css({
    height: windowHeight - 8,
    width: windowWidth - 8
}); 
```

可以这样想：假设您有一个普通的 jpg 图像。
那个 jpg 有它自己的“物理”尺寸（又名宽度和高度）。
在HTML*和CSS 中**，*您可以设置您希望浏览器呈现（缩放）图片的尺寸（以 px、百分比等为单位）（嘿，图片已经具有不可变的尺寸，对吧？）。

现在画布：
为了使画布具有物理宽度/高度，您必须在 HTML 或每个 javascript 中设置画布元素本身的`.width`and `.height`（副作用是设置物理尺寸是画布将根据规范自行清除）。
然后*缩放*图像（就像您对上面的 jpg 示例所做的那样），您使用 css（再次在 px/percent/etc 中）。
我认为这是一个巧妙的解决方案，可以将新的 canvas-element 添加到 HTML-Spec！

因此，向上取整：
宽度和高度为 300 像素的画布呈现为 900x900 像素的容器（如 document.body）的 100% 将被放大 3 倍！
反过来（按比例缩小）可以让你画出更清晰的线条！

希望这有助于您的理解！

# c# - WinForms reportViewer (.NET 3.5) 从 DataTable 绑定数据

> ID：16127083
> 
> 赞同：0
> 
> 时间：2013-04-21T01:29:50.147
> 
> 标签：c#, data-binding, .net-3.5, datatable, reportviewer2008

WinForms reportViewer (.NET 3.5) 从 DataTable 绑定数据

我正在尝试将动态创建的 DataTable 绑定到 reportViewer 控件。互联网上有很多关于这方面的教程，但它们似乎不适用于这个项目......（有关于堆栈溢出的相关问题，但解决方案在我的情况下不起作用）

这是显示报告按钮的事件处理程序：

```
 private void btn_ShowRwport_Click(object sender, EventArgs e)
    {
        //Set the date range for the report
        rptctn.SetDateRangeOne(listBox1.SelectedItem.ToString(), dateTimePicker_Start.Value, dateTimePicker_End.Value);

        //Get the report datatable
        DataTable dt = rptctn.GetReportTest(listBox1.SelectedItem.ToString());

        //Set the datagridview
        dataGridView1.DataSource = dt;

        //Set the reportViewer
        this.reportViewer1.LocalReport.DataSources.Clear();            
        Microsoft.Reporting.WinForms.ReportDataSource rprtDTSource = new Microsoft.Reporting.WinForms.ReportDataSource(dt.TableName, dt);
        this.reportViewer1.LocalReport.DataSources.Add(rprtDTSource);
        this.reportViewer1.RefreshReport();
    } 
```

我知道 DataTable 正在重试，因为 dataGridView 工作...... [https://docs.google.com/file/d/0B6b_N7sDgjmvZHpEYS1BWWhqZ3c/edit?usp=sharing](https://docs.google.com/file/d/0B6b_N7sDgjmvZHpEYS1BWWhqZ3c/edit?usp=sharing)

该项目有以下限制：

*   由于客户端环境，必须使用 .NET 3.5。（所以报告查看器 2008）

*   DataTable 和 ReportViewer 的创建位于不同的包中（应用程序/表示层）

*   我试图避免创建 .rdlc 文件，因为报告（DataTables）具有可变数量的行/列。

任何人都知道在我的情况下如何将动态创建的 DataTable 绑定到报表查看器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:12:51.103

您真正要求做的是动态创建一个 RDLC 文件并添加一个表。我从 gotreportviewer.com 找到了一个带有一些代码的第 3 方示例，只需在页面的右侧向下查看动态生成 RDLC - 表。

# vb.net - 为什么一个 VB.net 项目属性列出配置和平台，而另一个没有？

> ID：16127084
> 
> 赞同：1
> 
> 时间：2013-04-21T01:30:05.487
> 
> 标签：vb.net, visual-studio-2010, visual-studio-2008

我刚刚使用 VS2010 创建了一个新的 VB Windows 窗体项目。该解决方案还包含一个 Fortran DLL 项目。我已将平台设置为 x86。

当我拉起 VB 项目属性时，它没有在属性对话框的顶部列出配置或平台。这意味着我无法为调试或发布设置不同的编译选项卡构建输出路径。

我使用 VS2008 创建了几个类似的解决方案，最近将它们转换为 VS2010 并且没有遇到这个问题。

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:38:18.300

那是因为您使用的是 VS2010 Express，而您的单个项目不在解决方案项目中。

您可以使用记事本手动更改 .VBPROJ 文件的输出。在该文件中，您可以进行其他更改。例如从 Debug 切换到 Release。您必须重新启动 VS2010 Express 版才能应用更改（如果我没记错的话，如果您使用的是 Express 版，这将是正确的）

# javascript - 骨干网和 SEO 伪装

> ID：16127085
> 
> 赞同：0
> 
> 时间：2013-04-21T01:30:18.250
> 
> 标签：javascript, backbone.js, seo

所以我正在使用 Backbone.js 构建一个页面，其中包含一个 jquery 数据表和一个带有搜索选项的面板（用于过滤数据表中的数据）。现在我希望这个页面被谷歌或其他引擎索引。

问题是，搜索面板是通过 Javascript 使用主干视图创建和附加的，这意味着 Google 不会看到这一点，因为爬虫不执行 javascript。

这被认为是 SEO 伪装吗？网站会被封吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T02:23:53.057

不，这不是 SEO 伪装。以这种方式加载数据是很常见的，搜索引擎和 adword 程序都禁止网站这样做。

（搜索引擎隐藏是当您试图欺骗搜索引擎认为您的网站具有实际上没有的数据时。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T07:40:34.923

我认为它可以被认为是伪装，它会导致你的网站在谷歌的结果中下降是另一个问题......

如果您绝对想避免它，您有 3 个选项：

*   使用 hashbang (#!) ：[Facebook 和新 Twitter URL 中的 shebang/hashbang (#!) 是什么？](https://stackoverflow.com/questions/3009380/whats-the-shebang-hashbang-in-facebook-and-new-twitter-urls-for)
*   生成完全相同的初始 html 服务器端，并在浏览器中加载后使用 js 对其进行增强，而无需更改显示的第一个内容
*   当您检测到是 google bot 需要它们时，使用 phantomjs 生成您真正的丰富页面服务器端。

就开发/架构而言，所有这 3 个都相当昂贵，但谷歌今天并未为应用程序提供“真正的”支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T18:59:16.517

我不相信这被认为是伪装。Google 提倡使用无头浏览器来呈现严重依赖 JS 的页面 ( [http://googlewebmastercentral.blogspot.com.au/2009/10/proposal-for-making-ajax-crawlable.html](http://googlewebmastercentral.blogspot.com.au/2009/10/proposal-for-making-ajax-crawlable.html) )。

# gwt - 如何使用 GWT 清除覆盖

> ID：16127086
> 
> 赞同：0
> 
> 时间：2013-04-21T01:30:29.267
> 
> 标签：gwt, google-maps-api-3

我有一个用来在地图上覆盖矩形的类。**但是，如果为我的displayOnMap 方法**提供了一组新结果，我无法弄清楚如何删除以前的叠加层以绘制新矩形。

提供有关**绘图**方法的更多见解。它接受 PlotSetOutput 作为包含中心的参数，每个中心包含一组纬度/经度坐标。因此，循环它并创建纬度/经度边界并将其分配给矩形对象的逻辑。

```
public class displayOnMap extends Composite {

    private final VerticalPanel pWidget;
    private MapWidget mapWidget;
    private static Rectangle rectangle;
    private RectangleOptions rectOpts;
    private static final LatLng USCENTER = LatLng.newInstance(33.68,-116.17);

    public displayOnMap(PlotSetOutput result) {
        pWidget = new VerticalPanel();
        initWidget(pWidget);
        draw(result);
    }

    private void draw(PlotSetOutput result) {
        MapOptions mapOpts = MapOptions.newInstance();
        mapOpts.setZoom(4);
        mapOpts.setCenter(USCENTER);
        mapOpts.setMapTypeId(MapTypeId.TERRAIN);
        mapWidget = new MapWidget(mapOpts);
        pWidget.add(mapWidget);
        mapWidget.setSize("800px", "800px");

        ArrayList<Centers> listOfCenters = new ArrayList<Centers>();

        List<ResultClusterPlots> finalCluster = result.getFinalcluster();

        int totalNumberOfClusters = result.getTotalNumberOfClusters();

        for (int i = 0; i < totalNumberOfClusters; i++) {
            listOfCenters.add(i, new Centers());
        }

        for (int j = 0; j < finalCluster.size(); j++) {
            Centers p = listOfCenters.get(finalCluster.get(j).getClusterID()-1);

            LatLng ne = LatLng.newInstance(finalCluster.get(j).getLatitude()
                    .get(0), finalCluster.get(j).getLongitude().get(0));

            LatLng sw = LatLng.newInstance(finalCluster.get(j).getLatitude()
                    .get(1), finalCluster.get(j).getLongitude().get(1));

            p.setLatLongArr(LatLngBounds.newInstance(ne,sw));
        }

        for (int k = 0; k < listOfCenters.size(); k++) {
            ArrayList<LatLngBounds> ltlgBound = listOfCenters.get(k).getLatLongArr();
            String color = getRandomColor();
            for (int l = 0; l < ltlgBound.size(); l++) {
                rectOpts = RectangleOptions.newInstance();
                rectOpts.setStrokeColor("#FF0000");
                rectOpts.setStrokeOpacity(0.3);
                rectOpts.setStrokeWeight(2);
                rectOpts.setFillColor(color);
                rectOpts.setFillOpacity(0.35);
                rectOpts.setMap(mapWidget);
                rectOpts.setBounds(ltlgBound.get(l));
                rectangle = Rectangle.newInstance(rectOpts);
                rectangle.setMap(mapWidget);
            }
        }   
    }
} 
```

**第一次调用方法（displayOnMap）时的输出。一切正常。** ![在此处输入图像描述](https://i.stack.imgur.com/Piadl.jpg)

**使用第二个查询调用 displayOnMap 方法时的输出。**

![在此处输入图像描述](https://i.stack.imgur.com/pDnSE.jpg)

我试着做**rectangle.setMap(null); pWidget.removeFromParent();** 但我一直得到相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T05:38:56.943

我遇到了同样的问题，我可以隐藏/删除/显示叠加层的唯一方法是通过 OverlayCompleteMapEvent。据我了解，在覆盖完成之前不可能获得覆盖的挂钩，一旦完成，获得挂钩的唯一方法就是处理“OverlayCompleteMapEvent”事件。我使用一个列表来存储叠加层，然后我可以隐藏/显示/删除它们。

# lua - 电晕：如何用物理学检测物体的方向

> ID：16127089
> 
> 赞同：0
> 
> 时间：2013-04-21T01:32:00.287
> 
> 标签：lua, physics, coronasdk, game-physics

我想知道如何用物理学检测物体的方向，我的意思是什么时候掉下来。可以通过事件监听器吗？知道怎么做吗？

我需要它知道我可以更改 spriteSheet。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:12:44.170

尝试这个 ：

```
local xVelocity, yVelocity
local upDown, leftRight         -- upDown = 1 for up, leftRight = 1 for left
....
-- Get speed of physics object here ( Assume normal orientation ---
    xVelocity, yVelocity = physicsObject:getLinearVelocity()
    if xVelocity > 0 then
        print( "Object goes right" )
        leftRight = 0
    end
    if xVelocity < 0 then
        print( "Object goes left" )
        leftRight = 1
    end
    if yVelocity > 0 then
        print( "Object goes down" )
        upDown = 0
    end
    if yVelocity < 0 then
        print( "Object goes up" )
        upDown = 1
    end
----------------------------------- 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-26T17:09:53.010

要根据您调用的对象速度找到确切的角度：

```
 local angle = atan2(xVelocity, yVelocity) 
```

这将返回以弧度为单位的角度，然后您可以将其转换为度数。这允许对对象进行更精确的控制。[Daniel Shiffman 在http://natureofcode.com/book/](http://natureofcode.com/book/)上写了一本很棒的书，涉及物理模拟的许多方面。

# php - lessphp 没有正确编译边框？

> ID：16127094
> 
> 赞同：4
> 
> 时间：2013-04-21T01:32:56.473
> 
> 标签：php, less

我刚刚花了几个小时试图弄清楚为什么我得到了无用的错误，却发现我的变量没有被导入，因为它不希望包含路径成为当前目录（奇怪... ）所以我有点累了，希望其他人可以在这里帮助我。

我正在使用[这个 PHP LESS 编译器](http://leafo.net/lessphp/)，它几乎适用于所有东西。它只是不喜欢这样的行：

```
border: 1px solid (@col-border / 3); 
```

在这种情况下，`@col-border`定义为`#996633`。它正确计算为`#332211`，但生成的“CSS”为：

```
border: 1px solid(#332211); 
```

不用说，这不起作用。有趣的是，其他这样的行没有这个问题，比如这个：

```
box-shadow: 2px 2px 4px (@col-shadow / 3 * 4), -2px -2px 4px (@col-shadow / 3);
/* this compiles just fine */ 
```

如果有人可以查看它并找出这个问题的来源，我将非常感激。我现在太累了，不能自己去挖……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T01:55:41.953

好吧，我想通了。

显然，它读起来`1px solid (@col-border / 3);`好像`solid`是一个函数名和`@col-border / 3`它的参数。

我编辑了第 2985 行以禁用 的`$eatWhitespace`参数`$this->match`，现在它尊重关键字后面的空格。当然，这意味着我不能再使用`function (argument)`语法了，但是有人用过吗？

无论如何，谢谢你没有对我投反对票！:p

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T19:40:08.723

## 不需要编辑一行代码的解决方案

我只是想我会提供一个不需要对代码本身进行行编辑的解决方案。这有效：

```
@col-border: #996633;
border: ~"1px solid"(@col-border / 3); 
```

输出：

```
border: 1px solid #332211; 
```

# mapreduce - Piglatin 查找一列是否包含另一列的内容

> ID：16127099
> 
> 赞同：0
> 
> 时间：2013-04-21T01:34:28.573
> 
> 标签：mapreduce, apache-pig

我有一个看似非常简单的问题，但我似乎无法弄清楚。

我有看起来像这样的数据：

```
A (B, C, A)
B (X, Y, Z)
C (F, C, D) 
```

我正在使用 Pig latin 检查第一列中的文本是否存在于第二列中。

这是我现在的代码：

```
Labels = LOAD 'example.txt' USING PigStorage('\t');

Projected = FOREACH Labels GENERATE $0 AS id, $1 AS group;

X = FILTER Projected BY (group matches '.*(chararray)id.*');

STORE X INTO '/test' USING PigStorage(','); 
```

我期待的输出是：

```
A (B, C, A)
C (F, C, D) 
```

我也尝试将“。*”连接到 id，但它没有用。

我已经坚持了很长一段时间，任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:01:34.590

有两个问题，一个你不能命名你的变量组，因为这是一个保留字，两个你匹配的是字符串“（chararray）id”，而不是id。

此外，IMO 我认为永远不要按索引分配变量，而只是在加载语句中定义它们，如果这样做，您可以删除 Projected 别名。

```
Labels = LOAD 'example.txt' USING PigStorage('\t') AS
   (id:chararray, stringvalue:chararray);
X = FILTER Labels BY (stringvalue matches CONCAT(CONCAT('.*',id),'.*'));
STORE X INTO '/test' USING PigStorage(','); 
```

对此进行了测试，它有效。

# web2py - Web2Py 调整文本框的大小

> ID：16127100
> 
> 赞同：1
> 
> 时间：2013-04-21T01:34:31.200
> 
> 标签：web2py

我一直在尝试使用 Web2py 以自定义形式调整文本框的大小。

```
contact=SQLFORM.factory(
        Field('your_email',requires=IS_EMAIL()),
        Field('question', requires=IS_NOT_EMPTY()))
   contact.custom.submit['_value'] = 'Send'
   contact.element('input[name=question]')['_style']='width:150px' 
```

以上有效，但我需要将字段“问题”作为多行输入。当我将其类型更改为“文本”时：

```
Field('question','text' requires=IS_NOT_EMPTY())) 
```

我不能再用上面的代码调整文本框的大小。

我将如何调整文本框的大小？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T03:39:36.693

它现在是一个文本区域，而不是输入，所以试试：

```
contact.element('textarea[name=question]')['_style'] = 'width:150px;height:50px;' 
```

# sql - 在 VIEWS 上应用 OUTER JOIN

> ID：16127106
> 
> 赞同：0
> 
> 时间：2013-04-21T01:35:52.160
> 
> 标签：sql, oracle, oracle11g

我从以下问题创建了一个视图：

“创建一个视图以选择员工 ID、员工姓名、雇用日期和部门编号。”

这是我的查询：

```
CREATE VIEW SIMPVIEW AS
SELECT EMPNO, ENAME, HIREDATE,DEPTNO
FROM EMP; 
```

从上面的查询中可以清楚地看出，视图名称是**"SIMPVIEW"**。现在我正在尝试编写另一个查询来回答以下问题：

“使用您刚刚在与部门表连接的 select 语句中创建的视图列出员工 ID、员工姓名、部门名称和雇用日期。”

我知道基本上我需要以某种方式**加入**我之前创建的视图和部门表的字段，因此我有两个问题：

由于我必须包含**SIMPVIEW**视图中的所有元素，有什么方法可以从视图中选择所有元素，而无需选择我在下面完成的每个元素。

`SELECT s.empno,s.ename,s.hirdate,s.deptno,d.dname FROM SIMPVIEW s LEFT OUTER JOIN Dept d ON s.empno = d.deptno;`

**我的问题：**上述查询是否正确？

以下是两个表（DEPT 和 EMP）供您参考：

```
DEPT

DEPTNO,DNAME,LOC

EMP

EMPNO, ENAME,JOB,MGR,HIREDATE,SAL,COMM,DEPTNO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:59:02.547

希望这是您所需要的

```
Create or replace view simpview 
(empno, ename, hirdate, deptno,dname  )
AS
SELECT s.empno,
       s.ename,
       s.hirdate,
       s.deptno,
       d.dname 
FROM SIMPVIEW s 
   LEFT OUTER JOIN Dept d 
ON s.deptno = d.deptno; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T04:35:15.907

阅读这个问题永远不会受到伤害。您被要求生成 4 列的查询；你的产生 5。因此，“它正确吗？”的答案。没有。

接下来，您不说这些表是如何相关的。这*可能*是`EMP.EMPNO`一个外键，`DEPT.DEPTNO`但至少可以说是非常规的！如果没有其他信息，我会假设

1.  该问题打算根据`EMP.DEPTNO =`DEPT.DEPTNO` 加入，并且
2.  员工必须在一个部门，`EMP.DEPTNO`不能为 NULL。

在这种情况下，一个简单的内部`JOIN`就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T01:44:24.233

您需要基于 加入`deptno`，因此您的查询应如下所示

```
SELECT s.empno,
       s.ename,
       s.hirdate,
       s.deptno,
       d.dname 
FROM SIMPVIEW s 
   LEFT OUTER JOIN Dept d ON s.deptno = d.deptno; 
```

是的，您可以将查询重写为

```
SELECT s.*,
       d.dname 
FROM SIMPVIEW s 
   LEFT OUTER JOIN Dept d ON s.deptno = d.deptno; 
```

# java - 现有 java 应用程序上的 SO_KEEPALIVE

> ID：16127108
> 
> 赞同：2
> 
> 时间：2013-04-21T01:36:33.287
> 
> 标签：java, sockets, kernel, keep-alive, ld-preload

我需要在现有的商业 Java 应用程序上激活 SO_KEEPALIVE，因为我的防火墙在一些不活动后会断开连接。我不拥有源代码，所以我无法更改它（当我拥有源代码时会很容易，只需添加 socket.setKeepAlive(true) ）。所以我一直在寻找一些替代方案：

*   首先，我尝试使用 libkeepalive.so ( [http://libkeepalive.sourceforge.net/](http://libkeepalive.sourceforge.net/) )，将其放入 de LD_PRELOAD 似乎适用于 telnet 和 nc 之类的东西，但是当我将它与我的 jrockit jvm 一起使用时，这个 LD_PRELOAD 是完全被忽略，并且每个套接字对象仍然在没有 SO_KEEPALIVE 的情况下被创建

*   然后我尝试在操作系统级别搜索是否有一个选项可以为所有 TCP 连接默认激活此 SO_KEEPALIVE：不幸的是，在 redhat 6 企业版上没有这样的选项，尽管我找到了一个用于 freebsd 的选项（net.inet.tcp .always_keepalive)

*   修补 linux 内核以添加此功能对我的系统管理员来说是一个很大的问题；）

*   搜索任何 java 命令行参数均不成功

*   所以最后一个选项：通过添加 setOption(SocketOptions.SO_KEEPALIVE, Boolean.valueOf(true)) 来修补现有 JVM 的 java.net.PlainSocketImpl；在受保护的同步 void create(boolean stream) 方法中，并通过 -Xbootclasspath/p 将其放在 rt.jar 之前

到目前为止，最后一个选项有效，但我有点沮丧，因为我不得不为此更改 JVM！任何人都知道其他/更好的方法来处理这样的问题？为什么没有另一种简单的方法可以在所有（java）应用程序上默认激活 SO_KEEPALIVE？

最后一个问题：为什么 java API 不允许您在 serverSockets 对象上设置 keepAlive？它只适用于 Socket 对象，但实际上它也适用于 serverSockets

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-04T00:06:52.250

我遇到了同样的问题，想知道为什么 libkeepalive 不起作用。经过一番调查，我发现 libkeepalive 有一些“限制”（也许有人会称它们为错误）。由于奇怪的许可证（它带有 GPL），我决定重新开始。结果是[libdontdie](https://github.com/flonatel/libdontdie)。您可以在那里找到一个与（至少）openjdk7 一起使用的小型 Java 测试程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T05:45:22.090

可以在运行时使用 java 代理 ( [http://docs.oracle.com/javase/6/docs/api/java/lang/instrument/package-summary.html](http://docs.oracle.com/javase/6/docs/api/java/lang/instrument/package-summary.html) ) 和 ASM4 ( [http: //asm.ow2.org/](http://asm.ow2.org/)）。正如你所知道的目标类和方法，所需要的只是捕获相关方法的返回字节码指令并在它之前注入一个方法调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T03:17:29.290

这是商业闭源软件的问题之一。如果它不起作用，那么您修复它的选项将受到限制。这是使用封闭源代码的成本。

您还没有尝试过一件显而易见的事情。

*   联系您正在使用的产品的支持热线，请他们为您提供解决方案。产品本身可能已经有一些东西可以解决这个问题；例如一些未记录的配置选项。或者他们可能能够为您的问题开发自定义解决方法。

如果客户支持没有帮助，您有许多潜在的选择：

*   您可以尝试对产品的相关部分进行逆向工程（例如，它创建套接字的位置），并通过以下方式找出如何设置“keepalive”：

    *   修改他们的一个类，

    *   子类化他们的一个类，或

    *   编写某种使用反射从私有变量等中挖掘出套接字对象的钩子。

    逆向工程可能违反您的许可协议。但是，如果您这样做的原因是为了解决他们的代码中的一个问题，使您无法使用它，那么他们将很难说服法庭您的所作所为应该受到惩罚。如果他们尝试这样做，“舆论法庭”很可能会惩罚*他们。*

*   您可以根据您的许可协议和相关的消费者保护法查看您的权利。如果您无法让产品为您工作，该产品是否“适合使用”？

*   您可以威胁取消您的支持合同并停止使用他们的产品。

*   您*实际上*可以取消您的支持合同并停止使用他们的产品。（如果你使用不同的产品，更喜欢开源，这样你就不会再次陷入同一个绑定。）

* * *

您的解决方案“有效”的问题是：

*   每次刷新 JVM 时，您可能都必须重复此操作。

*   它可能会干扰应用程序中的其他事情......或使用修补的 JVM 的其他应用程序。

*   您不能在不违反 Oracle 许可证的情况下重新分发它……除非您使用的是 OpenJDK。

*   这可能会让其他需要支持你的东西的人感到紧张。（可以理解）。

* * *

> 最后一个问题：为什么 java API 不允许您在 serverSockets 对象上设置 keepAlive？

您需要询问设计 API 的人。（祝你好运！）

如果您认为可以而且应该这样做，请通过 Java Bugs Database 提交 RFE。或者更好的是，自己实现它作为最新 OpenJDK 代码库的补丁，并贡献补丁。与您未命名的商业产品不同，Java（基本上）是开源的，他们欢迎改进产品的有用补丁。

# r - 在 R 中一起绘制数据

> ID：16127114
> 
> 赞同：0
> 
> 时间：2013-04-21T01:37:39.027
> 
> 标签：r, plot, ggplot2

我是 R 的新手。我听说 R 有很棒的工具来绘制图表。我有3个这样的数据集：

```
0.01 2
0.02 3
0.03 4 
```

作为 file1.txt 和

```
0.015 3
0.024 6 
0.34  56 
```

作为file2.txt。

我想绘制（例如，在 file1.txt 中，它们是 x 和 y 轴条目：x=0.01,y=2,x=0.01,y=3,...）file1.txt 和 file2.txt 条目作为 xy 图，两条曲线在同一个图中。file1.txt和file2.txt的曲线可以做成不同颜色吗？请帮忙！有没有办法用例如case1标记file1.txt的曲线，用case2标记file2.txt的曲线等等。我问了很多事情，但请给我一个例子，我可以从中学习。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T01:48:42.907

是的，可以使用`plot`然后`lines`覆盖图形。用于`col`选择不同的颜色。

试试`?plot`，，，`?lines`_`?points`

假设您已将数据读入数据帧，

```
file1=read.table(text="x y
0.01 2
0.02 3
0.03 4",header=T)

file2=read.table(text="x y
0.015 3
0.024 6 
0.34  56",header=T)

plot(file1$x, file1$y, col="red", type='l', xlim=c(0,0.5), ylim=c(0,100))
lines(file2$x, file2$y, col="blue") 
```

# javascript - 3秒后关闭弹出窗口

> ID：16127115
> 
> 赞同：11
> 
> 时间：2013-04-21T01:37:39.347
> 
> 标签：javascript, html

我需要在 3 秒后关闭弹出窗口。我该怎么做。

```
<map id="ImgMap0" name="ImgMap0">
                  <area alt="" coords="127, 22, 20" alt="" title="click here" href="includes/popup1.htm" onclick="javascript:void window.open

('includes/popup1.htm','1366002941508','width=500,height=200,left=375,top=330');return false;" shape="circle" />
</map></p> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-21T01:44:08.217

使用 setTimeout，例如：

```
var win = window.open("http://www.google.com", '1366002941508','width=500,height=200,left=375,top=330');

setTimeout(function () { win.close();}, 3000); 
```

小提琴示例：http: [//jsfiddle.net/N5rve/](http://jsfiddle.net/N5rve/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-21T01:42:08.783

```
<script type="text/javascript">
 function closeWindow() {
    setTimeout(function() {
    window.close();
    }, 3000);
    }

    window.onload = closeWindow();
    </script> 
```

那应该这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T01:42:31.740

尝试

```
<area alt="" coords="127, 22, 20" alt="" title="click here" href="includes/popup1.htm" onclick="openWindow()" shape="circle" />

function openWindow(){
    var win = window.open('includes/popup1.htm', '1366002941508',  'width=500,height=200,left=375,top=330');
    setTimeout(function(){
        win.close()
    }, 3000);
    return false;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-09T17:22:09.260

```
<area alt="" coords="127, 22, 20" alt="" title="click here" href="includes/popup1.htm" onclick="openWindow()" shape="circle" />

function openWindow(){
    var win = window.open('includes/popup1.htm', '1366002941508',  'width=500,height=200,left=375,top=330');
    setTimeout(function(){
        win.close()
    }, 3000);
    return false;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T01:53:58.607

使用本教程得到你想要的

[http://www.tizag.com/javascriptT/javascriptredirect.php](http://www.tizag.com/javascriptT/javascriptredirect.php)

```
<html>
  <head>
   <script type="text/javascript">
     function close_popup(){
        //code here...
     }
  </script>
 </head>
 <body onLoad="setTimeout('close_popup()', 3000)"> // 3000 milisec = 3sec

 </body>
</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-03T12:52:39.113

创建一个全局变量并在我们的代码中重用它。

```
var info = function (text, onClose, headerText) {
              if (!headerText)
                headerText = "Info";

            alert(text, null, onClose, headerText, true);
    }

    // Call this in own code where ever you need

    info("Message that going to close automatic.");
    hidePopUpMessage();

    // callback function to showing 3 sec.
    function hidePopUpMessage() {
            setTimeout(function () {
                $("#pp-alert-close").click();
                //$("#popup-close").click();
            }, 3000);
        }
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2013-04-21T01:46:13.877

```
<script type="text/javascript">
    function popup() {
        var myPopup = window.open('includes/popup1.htm','1366002941508','width=500,height=200,left=375,top=330');
        var t=setTimeout(myPopup.close(),3000);
        return false;
    }
</script>
<map id="ImgMap0" name="ImgMap0">
    <area alt="" coords="127, 22, 20" alt="" title="click here" href="includes/popup1.htm" onclick="popup();" shape="circle" />
</map> 
```

# regex - RegEx 如果目标字符串是正则表达式的超集

> ID：16127124
> 
> 赞同：0
> 
> 时间：2013-04-21T01:39:04.267
> 
> 标签：regex, mongodb

[编辑希望更清楚。]

我可能很困惑，但我有一个简单单词的 Mongodb 数据集：

> **项目**：
> 波士顿啤酒
> 波士顿啤酒厂
> 康胜酿造灯

我有一个*输入字符串*：

> “波士顿啤酒公司”

我想找到输入字符串中包含的任何*项目。*在这种情况下，“波士顿啤酒”将是匹配项。

问题是，给定任何输入字符串，我不知道字符串中的哪些单词会在字段中找到匹配项。（比赛没有锚定到开始或结束。）

在 Javascript 中，我只需创建一个循环并进行测试。

```
inputString.indexOf(currentItem) >= 0 
```

我可能对自己感到困惑，但我找不到表达正则表达式的方法，其中正则表达式是目标字符串，我正在测试更长的字符串中是否包含任何单个项目（字段）。

我希望这更清楚一些。

提前致谢-

# r - 使用 R 查询地理数据库以在 bioconductor 中使用

> ID：16127125
> 
> 赞同：-1
> 
> 时间：2013-04-21T01:39:07.520
> 
> 标签：r, geolocation, bioconductor

我正在尝试将地理数据库 GSE 文件导入 R，但我不知道如何以生物导体软件可以分析的格式获取它们，你能告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T02:11:49.357

您是否尝试过[GEOquery](http://bioconductor.org/packages/2.12/bioc/html/GEOquery.html)包？请务必阅读[小插图](http://bioconductor.org/packages/2.12/bioc/vignettes/GEOquery/inst/doc/GEOquery.pdf)

# css - 如何将ul标签内容居中对齐

> ID：16127131
> 
> 赞同：4
> 
> 时间：2013-04-21T01:40:50.833
> 
> 标签：css, html-lists, centering

我一直在尝试使用 CSS 将`#refer`'s 的`ul`内容对齐在屏幕中央。

```
<div id="refer" style="border:1px solid red">
    <ul>
        <li><a href="#" class="circlelink">One</a>
        </li>
        <li><a href="#" class="circlelink">Two</a>
        </li>
        <li><a href="#" class="circlelink">Three</a>
        </li>
    </ul>
</div>

.circlelink {
    display:block;
    width:100px;
    height:100px;
    border-radius:50px;
    font-size:20px;
    color:#fff;
    line-height:100px;
    text-align:center;
    text-decoration:none;
    background:linear-gradient(to bottom, #719ECE, #719FCE);
}

.circlelink:hover {
    text-decoration:none;
    background:#719ECE;
    box-shadow: 0 0 8px rgba(0, 0, 0, .8);
    -webkit-transform: scale(1.05, 1.07);
    -moz-transform: scale(1.05, 1.07);
}

#refer {
    position:absolute;
    top:20%;
    width:100%;
    margin-left:auto;
    margin-right:auto;
}

#refer ul {
    clear:both;
    margin: 0;
    padding: 0;
}

#refer ul li {
    display:block;
    position: relative;
    float: left;
    height: auto;
    width: 200px;
    padding: 0;
    margin-left: 10px;
    list-style: none;
    text-align: center;
    white-space: nowrap;
} 
```

[小提琴](http://jsfiddle.net/ptMwH/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T02:17:15.993

这在你的小提琴中对我有用：

```
* {
    padding:0;
    margin:0;
}
#refer {
    margin:20% 0 0;
    width:100%;
    /*
    position:absolute;
    top:20%;
    width:100%;
    margin-left:auto;
    margin-right:auto;
    */
}
#refer ul {
    text-align:center;
    /*
    clear:both;
    margin: 0;
    padding: 0;
    */
}
#refer ul li {
    display:inline-block;
    position: relative;
    /* float: left; */
    height: auto;
    width: 100px;
    padding: 0;
    margin:0 50px;
    list-style: none;
    text-align: center;
    white-space: nowrap;
    border:#0f0 solid 1px;
}
.circlelink {
    display:block;
    width:100px;
    height:100px;
    border-radius:50px;
    font-size:20px;
    color:#fff;
    line-height:100px;
    text-align:center;
    text-decoration:none;
    background:linear-gradient(to bottom, #719ECE, #719FCE);
}
.circlelink:hover {
    text-decoration:none;
    background:#719ECE;
    box-shadow: 0 0 8px rgba(0, 0, 0, .8);
    -webkit-transform: scale(1.05, 1.07);
    -moz-transform: scale(1.05, 1.07);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T02:11:56.530

代码：[jsfiddle](http://jsfiddle.net/ptMwH/2/)

您所要做的就是：

1.  添加`text-align:center;`到`#refer ul`
2.  换成in `display:block;`_`display:inline-block;``#refer ul li`
3.  `float:left;`从中删除`#refer ul li`

此外，请确保`#refer ul`提供`min-width`所有圆圈所需的宽度，以确保如果浏览器窗口太小，它不会折叠。

此外，最好`width`从`#refer ul li`. 让内容`<a>`指定宽度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T01:44:16.040

[这里是](http://jsfiddle.net/cha3W/)

```
.circlelink {

    display:block;

    width:100px;

    height:100px;

    border-radius:50px;

    font-size:20px;

    color:#fff;

    line-height:100px;

    text-align:center;

    text-decoration:none;

    background:linear-gradient(to bottom, #719ECE, #719FCE);

}

.circlelink:hover {

    text-decoration:none;

    background:#719ECE;

    box-shadow: 0 0 8px rgba(0, 0, 0, .8);

    -webkit-transform: scale(1.05, 1.07);

    -moz-transform: scale(1.05, 1.07);

}

#refer {

    position:absolute;

    top:20%;

    width:100%;

    margin-left:auto;

    margin-right:auto;
    text-align:center;
}

#refer ul {

    clear:both;

    margin: 0;

    padding: 0;

}

#refer ul li {

    display:inline-block;

    position: relative;

    height: auto;

    width: 200px;

    padding: 0;

    margin-left: 10px;

    list-style: none;

    text-align: center;

    white-space: nowrap;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T02:24:30.240

用**div**包裹你的**ul**会有所帮助

 **[http://jsfiddle.net/ptMwH/11/](http://jsfiddle.net/ptMwH/11/)这里检查一下

```
<div id="refer" style="border:1px solid red">
    <div class="wrapper">
    <ul>
        <li><a href="#" class="circlelink">One</a>
        </li>
        <li><a href="#" class="circlelink">Two</a>
        </li>
        <li><a href="#" class="circlelink">Three</a>
        </li>
    </ul>
    </div>
</div> 
```**

# jquery - 如何更改多个 div id/class 以便样式更改？

> ID：16127136
> 
> 赞同：2
> 
> 时间：2013-04-21T01:42:25.717
> 
> 标签：jquery

[http://jsfiddle.net/GHuwV/2/](http://jsfiddle.net/GHuwV/2/)

```
$("#container").each(function () {

    $(this).find('.taskName').each(function () {
        if ($(this).attr('value') == 'Each') {
            $(this).css('div#gold div.gold', 'gold');
            $(this).find('.taskName').each(function () {
                if ($(this).attr('value') == 'Offer') {
                    $(this).css('div#red div.red', 'red');
                    $(this).find('.taskName').each(function () {
                        if ($(this).attr('value') == 'Buying') {
                            $(this).css('div#green div.green', 'green');
                        }
                    });

                });

<div id="container">
    <div id="goldpricebox1">
        <div id="goldpricebox2">
            <input id="coin" type="text" id="text" name="text_name" style="width: 35px; style=" height: 21px; maxlength=3 />
            <div id="goldselectbox1">
                <div id="goldselectbox2">
                    <div id="goldselectbox3">
                        <select name="qty">
                            <option value="Each" selected>Each</option>
                            <option value="All"> All</option>
                            <option value="Offer">Offer</option>
                            <option value="Buying">Buying</option>
                        </select>
                    </div>
                </div>
            </div>
            <div id="goldpricebox3">
                <div id="goldpricebox4">
                    <div class="goldpricebox5"></div>
                </div>
            </div>
        </div>
    </div>
</div>

input#coin {
    font-family:Calibri, sans-serif, Geneva, Verdana;
    font-size:1em;
    color: black;
    border: none;
    text-align: center;
    background-image: url(http://kennenmen.netai.net/images/gcoin.png)
}
input {
    display: block;
    margin : 0 auto;
    height: 14px;
}
select {
    font-family:Calibri, sans-serif, Geneva, Verdana;
    font-size:1em;
    color: black;
    border: none;
    text-align: center;
    -webkit-appearance: none;
}
select {
    display: block;
    margin : 0 auto;
}
/*GOLD*/
 div#goldpricebox1 {
    background: none;
    width:auto;
    height:auto;
    border:1px solid #361801;
    float:left;
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    border-bottom-left-radius: 10px;
    border-bottom-right-radius: 10px;
}
div#goldpricebox2 {
    background-color: #EEC43A;
    border:1px solid #FDFF82;
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    border-bottom-left-radius: 10px;
    border-bottom-right-radius: 10px;
    padding-left: 5px;
    padding-right: 5px;
    padding-bottom: 5px;
}
div#goldpricebox3 {
    border:1px solid #FDFF82;
}
div#goldpricebox4 {
    border:1px solid #361801;
}
div.goldpricebox5 {
    border:1px solid #E1E1E1;
    background: white;
    width: 153px;
    min-height: 51px;
    height: auto;
    padding-botttom:25px;
}
div#goldselectbox1 {
    border:1px solid #FDFF82;
}
div#goldselectbox2 {
    border:1px solid #361801;
}
div#goldselectbox3 {
    border:1px solid #E1E1E1;
    background: white;
}
/*GREEN*/
 div#greenpricebox1 {
    background: none;
    width:auto;
    height:auto;
    border:1px solid #013601;
    float:left;
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    border-bottom-left-radius: 10px;
    border-bottom-right-radius: 10px;
}
div#greenpricebox2 {
    background-color: #39EE39;
    border:1px solid #83FF83;
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    border-bottom-left-radius: 10px;
    border-bottom-right-radius: 10px;
    padding-left: 5px;
    padding-right: 5px;
    padding-bottom: 5px;
}
div#greenpricebox3 {
    border:1px solid #83FF83;
}
div#greenpricebox4 {
    border:1px solid #013601;
}
div.greenpricebox5 {
    border:1px solid #E1E1E1;
    background: white;
    width: 153px;
    min-height: 51px;
    height: auto;
    padding-botttom:25px;
}
div#greenselectbox1 {
    border:1px solid #83FF82;
}
div#greenselectbox2 {
    border:1px solid #013601;
}
div#greenselectbox3 {
    border:1px solid #E1E1E1;
    background: white;
}
/* Red */
 div#redpricebox1 {
    background: none;
    width:auto;
    height:auto;
    border:1px solid #360101;
    float:left;
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    border-bottom-left-radius: 10px;
    border-bottom-right-radius: 10px;
}
div#redpricebox2 {
    background-color: #EE3939;
    border:1px solid #FF8383;
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    border-bottom-left-radius: 10px;
    border-bottom-right-radius: 10px;
    padding-left: 5px;
    padding-right: 5px;
    padding-bottom: 5px;
}
div#redpricebox3 {
    border:1px solid #FF8383;
}
div#redpricebox4 {
    border:1px solid #360101;
}
div.redpricebox5 {
    border:1px solid #E1E1E1;
    background: white;
    width: 153px;
    min-height: 51px;
    height: auto;
    padding-botttom:25px;
}
div#redselectbox1 {
    border:1px solid #FF8383;
}
div#redselectbox2 {
    border:1px solid #360101;
}
div#redselectbox3 {
    border:1px solid #E1E1E1;
    background: white;
} 
```

**我想做什么？**
我正在尝试根据选择/选项框更改 div 框的颜色。
All and Each 应该使盒子变成金色
Buying 应该使盒子变成绿色
Offer 应该使盒子变成红色

**我尝试了什么？**
作为编码新手，我没有尝试过所有尝试更改 jquery 的方法，但没有任何结果。

**我必须保留什么？**
至关重要的是，我将所有样式保留在 .css 中，并为所有 div 保留当前的 ​​.class 和 #ids。

**盒子应该是什么样子**
[http://jsfiddle.net/GHuwV/4/](http://jsfiddle.net/GHuwV/4/)

感谢任何可以帮助我的人，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T02:10:27.953

我有点讨厌这种方法，它似乎天生就过于复杂，但这*有效*（尽管我几乎希望它没有）：

```
// tying the selected option to the required colours:
var map = {
    'Each' : 'gold',
    'All' : 'gold',
    'Offer' : 'red',
    'Buying' : 'green'
},
// using the currently selected value to identify what string we're looking for in the id
    oldColour = map[$('#container select').val()];

$('select').change(function(){
    // caching variables, though it may not be needed
    var that = this,
        $that = $(that),
        container = $('#container'),
        colour = map[that.value];
    // finding all the elements whose id starts with the currently-selected colour
    container.find('[id^="' + oldColour + '"]').each(function(){
        // iterating over each of those elements, replacing the oldColour with the new colour
        this.id = this.id.replace(oldColour,colour);
    });
    // updating the oldColour variable for the next time
    oldColour = colour;
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/GHuwV/6/)。

以下是一种改进的代码方法，它依赖于更改`#container`对象的单个类，该类依赖于更新的 HTML：

```
<div id="container">
    <div class="pricebox1">
        <div class="pricebox2">
            <input id="coin" type="text" id="text" name="text_name" style="width: 35px; style=" height: 21px; maxlength=3 />
            <div class="selectbox1">
                <div class="selectbox2">
                    <div class="selectbox3">
                        <select name="qty">
                            <option value="Each" selected>Each</option>
                            <option value="All"> All</option>
                            <option value="Offer">Offer</option>
                            <option value="Buying">Buying</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="pricebox3">
                <div class="pricebox4">
                    <div class="pricebox5"></div>
                </div>
            </div>
        </div>
    </div>
</div> 
```

使用极其简单的 jQuery：

```
var map = {
    'Each' : 'gold',
    'All' : 'gold',
    'Offer' : 'red',
    'Buying' : 'green'
};

// the following adds the class of the currently-selected colour to the #container
$('#container').addClass(map[$('#container select').val()]);

$('select').change(function(){
    var that = this;
    $('#container').attr('class', map[that.value]);
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/GHuwV/8/)。

上面的 CSS*也*被简化了：

```
/* styles the elements when the #container is .gold */
.gold .pricebox1,
.gold .pricebox2,
.gold .pricebox3,
.gold .pricebox4 {
    background-color: #EEC43A;
    border:1px solid #FDFF82;
}
/* styles the elements when the #container is .green */
.green .pricebox1,
.green .pricebox2,
.green .pricebox3,
.green .pricebox4 {
    background-color: #0f0;
    border:1px solid #FDFF82;
}
/* styles the elements when the #container is .red */
.red .pricebox1,
.red .pricebox2,
.red .pricebox3,
.red .pricebox4 {
    background-color: #f00;
    border:1px solid #FDFF82;
}
/* base-styles that don't change */
.pricebox1 {
    background: none;
    width:auto;
    height:auto;
    border:1px solid #361801;
    float:left;
    border-radius: 10px;
}
.pricebox2 {
    background-color: #EEC43A;
    border:1px solid #FDFF82;
    border-radius: 10px;
    padding-left: 5px;
    padding-right: 5px;
    padding-bottom: 5px;
}
.pricebox3 {
    border:1px solid #FDFF82;
}
.pricebox4 {
    border:1px solid #361801;
}
.pricebox5 {
    border:1px solid #E1E1E1;
    background: white;
    width: 153px;
    min-height: 51px;
    height: auto;
    padding-bottom:25px;
}
.selectbox1 {
    border:1px solid #FDFF82;
}
.selectbox2 {
    border:1px solid #361801;
}
.selectbox3 {
    border:1px solid #E1E1E1;
    background: white;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T01:57:00.107

您已经使它变得非常复杂，而不是更改许多 ID 和类并以低效的方式查询 DOM，您可以选择一个最接近的包装元素并更改它的类名，然后使用 CSS 继承您可以轻松地设置后代元素的样式。

```
var colors = {
   Each: 'gold',
   All: 'gold',
   Offer: 'red',
   Buying: 'green'
} 

$('select.qty').change(function(){
   var cls = colors[this.value];
   $('#container').attr('class', cls);
}); 
```

另请注意，该`css`方法用于向元素添加内联样式，您使用不正确。

# rest - 带有 AngularJS 的 HATEOAS 客户端

> ID：16127138
> 
> 赞同：31
> 
> 时间：2013-04-21T01:42:38.407
> 
> 标签：rest, angularjs, hateoas, spring-data-rest

我想知道是否有任何隐藏在 Angular 中或由某些 3rd 方库公开的功能来轻松创建符合 HATEOAS 的 Restful 客户端。

在后端，我使用 Spring Data/REST 来生成 HATEOAS JSON API。但是，消费它是另一回事。

例如，我有这 3 个实体：

*   公司`{name, address}`
*   员工`{firstName, lastName, employer[Company]}`
*   活动`{rate, day, employee[Employee], client[Company]}`

并请求一个活动（模型中最复杂的实体）会产生如下内容：

```
{
    links: [],
    content: [{
            rate: 456,
            day: 1366754400000,
            links: [{
                rel: "self",
                href: "http://localhost:8080/api/activities/1"
            },
            {
                rel: "activities.activity.client",
                href: "http://localhost:8080/api/activities/1/client"
            },
            {
                rel: "activities.activity.employee",
                href: "http://localhost:8080/api/activities/1/employee"
            }]
        }]
} 
```

我的 API 在 REST（由链接标识的资源）方面进行讨论。例如，一个 Activity 有一个 Employee。我真正想要使用的是：`{rate: 456, day: 1366754400000, employee: {firstName:"xxx", lastName:"xxx" ...}}`。

但是，正如您在第一个输出中看到的那样，我的 Activity 仅包含指向员工的*链接，而不包含其数据。*Angular 或第 3 方库中是否有任何东西可以解析这些链接并嵌入结果数据？

对此有任何意见吗？

提前致谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-04-01T02:18:33.230

结帐[angular-hateoas](https://github.com/jmarquis/angular-hateoas)。它是一个 AngularJS 模块，用于将 $resource 与支持 HATEOAS 的 REST API 一起使用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-22T06:49:53.717

您可以编写一个响应转换来检查您返回的对象，检查链接，并在返回响应之前解析它们。[请参阅$http 服务文档](http://docs.angularjs.org/api/ng.$http)中的“转换请求和响应”部分。

像这样的东西：

```
transformResponse: function(rawData) {
  var json = JSON.parse( rawData );
  forEach( json.content.links, function(link) {
    // resolve link...
  });
  return json;
} 
```

由于“解析链接”步骤本身就是一个 $http 调用，因此子引用也将被解析。然而，由于这些是异步的，你可能会返回一个承诺而不是真正的价值；我不知道是否允许转换功能这样做。

但是，正如@charlietfl 指出的那样，请注意这将导致多次 HTTP 调用返回单个实体。尽管我喜欢 HATEOAS 的概念，但如果调用过多，这可能会导致反应迟缓。我建议您的服务器直接返回数据或其中的一部分，加上链接以获取详细信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-16T23:15:38.073

我一直在为我的一个项目使用[angular-hal](https://github.com/LuvDaSun/angular-hal)。这是一个 Spring HATEOAS 后端。而且我没有遇到任何问题。它处理参数化资源。我怀疑它只支持 HAL，因此由于您使用的是 Spring Data Rest，您可能必须对其进行配置以生成符合 HAL 的响应。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-30T19:59:29.147

根据您关于希望使用数据而不是客户端上的链接的评论，我认为[Restangular](https://github.com/mgonto/restangular)将是一个不错的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-16T12:04:17.017

我认为混淆可能是您要求使用 Angular 解决方案，而您真正想要做的是让 Spring Data 发送更完整的 JSON 响应。即，您真的只是希望服务器将员工数据作为响应 JSON 的一部分返回，而不是让客户端执行额外的步骤来查找它。我不知道您在 Spring Data 中使用的是什么数据存储，但一般的解决方案是将 public getEmployee() 方法添加到您的 Activity 类，然后使用 @RelatedTo 和 @Fetch 注释该方法（这将是设置Neo4J - 可能是您对 Spring Data 风格的不同注释）。这应该会导致 Spring HATEOAS 在 /activity 的响应中包含 Employee 记录。希望这可以帮助。

# excel - Excel从开头和结尾编号和标签创建列表

> ID：16127139
> 
> 赞同：0
> 
> 时间：2013-04-21T01:43:04.007
> 
> 标签：excel, excel-formula, vba

我正在尝试从分组值的索引创建一个列表。[这与此](https://stackoverflow.com/questions/635800/how-to-create-a-list-from-beginning-number-and-end-number)
非常相似，但是我的组也有“标签”，这会使列表复杂化。

这是我的 INDEX 选项卡的示例：

```
 | A  | B  | C  |  D  |
-------------------------
1 | 1  | 1  | 1  | CV  | 
2 | 1  | 2  | 2  | IS  |
3 | 1  | 3  | 3  | IS  |
4 | 2  | 4  | 5  | GN  |
5 | 2  | 6  | 7  | PS  |
6 | 4  | 8  | 11 | SQ  |
7 | 2  | 12 | 13 | SS  |
8 | 1  | 14 | 14 | AT  |
9 | 15 | 15 | 29 | AT  |
10| 4  | 30 | 33 | TYP | 
```

其中A是页数，B是第一页，C是最后一页，D是标签。我还想添加列，以便我可以保持标签的运行记录。

```
 | A  | B  | C  |  D  |  E   |  F   |
---------------------------------------
1 | 1  | 1  | 1  | CV  | CV1  | CV1  |  
2 | 1  | 2  | 2  | IS  | IS1  | IS1  |
3 | 1  | 3  | 3  | IS  | IS2  | IS2  |
4 | 2  | 4  | 5  | GN  | GN1  | GN2  |
5 | 2  | 6  | 7  | PS  | PS1  | PS2  |
6 | 4  | 8  | 11 | SQ  | SQ1  | SQ4  |
7 | 2  | 12 | 13 | SS  | SS1  | SS2  |
8 | 1  | 14 | 14 | AT  | AT1  | AT1  |
9 | 15 | 15 | 29 | AT  | AT2  | AT16 |
10| 4  | 30 | 33 | TYP | TYP1 | TYP4 | 
```

请注意，标签可能出现多次，并且可能不在连续的行中。

这是我希望我的 LIST 选项卡看起来的样子：

```
 | A   |
---------
1 | CV1 |
2 | IS1 |
3 | IS2 |
4 | GN1 |
5 | GN2 |
6 | PS1 |
7 | PS2 |
8 | SQ1 |
9 | SQ2 |
10| SQ3 |
11| SQ4 |
and so on... 
```

如何通过公式将附加列添加到 INDEX 选项卡？
如何通过公式创建 LIST？（……这可能吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:46:30.727

公式应该很容易编写。只需考虑您要完成的工作。

您的第一个公式（在 E 列中）只是对标签进行计数（在 D 列中）。因此，您要计算从第一个标签到标签名称相同的相应标签的所有单元格。该计数将附加到标签名称中。

```
=$D1 & COUNTIF($D$1:$D1, $D1) 
```

第二个公式（在 F 列中）只是取页数的运行总和（在 A 列中）。因此，您希望获取从第一个标签到标签名称相同的相应标签的所有相应页面计数的总和。总和将附加到标签名称。

```
=$D1 & SUMIF($D$1:$D1, $D1, $A$1:$A1) 
```

请注意，该列不会更改，范围的起始行也不会更改（因此需要使用绝对范围）。唯一改变的是标签的行和结束范围的行。

* * *

我认为不可能通过简单的公式生成该列表。据我所知，公式需要与另一个范围一一对应。单个范围可以产生多个值，因此公式不会削减它。您需要编写一个 VBA 脚本来生成它。

```
Sub GenerateList()

    Dim usedRange As Range
    Dim count As Dictionary

    Set usedRange = Worksheets("Index").usedRange
    Set count = CountValues(usedRange)

    Dim output As Range
    Dim row As Integer
    Dim key As Variant

    Set output = Worksheets("List").Columns("A").Rows
    output.ClearContents
    row = 1
    For Each key In count.Keys()
        Dim i As Integer

        For i = 1 To count(key)
            output(row) = key & i
            row = row + 1
        Next i
    Next key

End Sub 
```

```
Function CountValues( _
        usedRange As Range, _
        Optional tagsColumn As String = "D", _
        Optional valuesColumn As String = "A") As Dictionary

    Dim tags As Range
    Dim values As Range

    Set tags = usedRange.Columns(tagsColumn).Rows
    Set values = usedRange.Columns(valuesColumn).Rows

    Dim map As New Dictionary
    Dim tag As Range
    For Each tag In tags
        map(tag.Value) = map(tag.Value) + values(tag.row)
    Next tag

    Set CountValues = map

End Function 
```

这使用了 a `Dictionary`，因此您必须引用脚本运行时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T03:45:26.100

听起来您只是想在可以用作列表的单独工作表上获取“唯一值”列表。试试这些页面，有多种 VBA 方法可以在一个范围内粘贴唯一项目。

此外，高级筛选器可以选择将唯一值粘贴到另一个位置。因此，您的任何重复标签都不会出现在此列表中，只有您的“列表”选项卡中的唯一标签。

无论如何，不​​确定这是否是您想要的，但问题有点模糊。

此处的链接：
[创建唯一列表](http://www.mrexcel.com/forum/excel-questions/611558-visual-basic-applications-create-unique-list-range-data.html)
[创建唯一列表 2](http://www.ozgrid.com/forum/showthread.php?t=40545)

# ruby-on-rails - ROR 安装（Heroku 错误推送失败）

> ID：16127140
> 
> 赞同：0
> 
> 时间：2013-04-21T01:43:05.880
> 
> 标签：ruby-on-rails, heroku, push

```
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.3.2
       Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin --deployment
       You are trying to install in deployment mode after changing
       your Gemfile. Run `bundle install` elsewhere and add the
       updated Gemfile.lock to version control.
       You have added to the Gemfile:
       * sqlite3 (= 1.3.5)
       * sass-rails (= 3.2.5)
       * coffee-rails (= 3.2.2)
       * uglifier (= 1.2.3)
       * jquery-rails (= 2.0.2)
       * pg (= 0.12.2)
       You have deleted from the Gemfile:
       * coffee-rails (~> 3.2.1)
       * jquery-rails
       * sass-rails (~> 3.2.3)
       * sqlite3
       * uglifier (>= 1.0.3)
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T07:08:21.910

正如，日志说：

```
 You are trying to install in deployment mode after changing
       your Gemfile. Run `bundle install` elsewhere and add the
       updated Gemfile.lock to version control. 
```

我认为您在推送到 heroku 之前还没有提交 Gemfile.lock 文件。运行 bundle install 然后提交 Gemfile 和 Gemfile.lock。之后将代码推送到heroku。

# java - 多个变量存储在单节点java链表中

> ID：16127141
> 
> 赞同：0
> 
> 时间：2013-04-21T01:43:30.883
> 
> 标签：java, variables, nodes, singly-linked-list, circular-list

我很想知道如何将多个整数添加到 Java 中 LinkedList 中的节点（单循环）。我在 SO 上找到了一个线程并正在阅读它，但不确定它是如何工作的。以为我会重新提出这个问题，看看我是否能得到答案。

这是我的节点类

```
public class LinkedList{
private class Node{
    private int pid;
    private int time;
    private Node next;

    public Node(int pid, int time){
        this.pid=pid;
        this.time=time;
    }
}
int size;
Node head; 
```

这是我在执行任何删除或类似操作之前正在尝试的添加。

```
public void add(int pid, int time) {
    Node curr=head;
    Node newNode=new Node(pid, time);
    if(head==null){
        head=newNode;
            newNode.next=head;
    }//end if
    else{
        while(curr.next!=head){
            curr = curr.next;
        }//end while
        curr.next=newNode;
            newNode.next=head;
    }//end else
    size++;
}//end add
} 
```

这是我到目前为止所拥有的，但是当我尝试输入两个整数时，我在`private int time`我做错了什么？我正在读取一个文件，然后将两个整数存储在一个节点中，然后做同样的事情，直到文件被完全读取。我的文件读取得很好，我将两个整数存储为文件中的整数，但我似乎还不能让它将整数存储在节点中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T01:54:45.613

你是如何初始化的`head`？你做了`Node head = new Node()`吗？

如果您制作自定义构造函数，Java 将不再添加默认构造函数。你必须再次定义它。

你可以改为`Node head = null;`

# php - 用php修改html属性

> ID：16127142
> 
> 赞同：13
> 
> 时间：2013-04-21T01:43:31.330
> 
> 标签：php, dom

我有一个 html 字符串，其中恰好包含一个 a 元素。例子：

```
 <a href="http://www.test.com" rel="nofollow external">test</a> 
```

在 php 中，我必须测试*rel*是否包含*外部*，如果是，则修改*href*并保存字符串。

我一直在寻找 DOM 节点和对象。但是它们似乎对于只有一个 A 元素来说太多了，因为我必须迭代以获得 html 节点，而且我不确定如何测试*rel*是否存在并包含*external*。

```
$html = new DOMDocument();
$html->loadHtml($txt);
$a = $html->getElementsByTagName('a');
$attr = $a->item(0)->attributes();
... 
```

在这一点上，我将获得似乎是开销的 NodeMapList。有没有更简单的方法或者我应该用 DOM 来做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T05:12:11.027

> 有没有更简单的方法或者我应该用 DOM 来做？

用 DOM 来做。

这是一个例子：

```
<?php
$html = '<a href="http://example.com" rel="nofollow external">test</a>';
$dom = new DOMDocument;
$dom->loadHTML($html);
$xpath = new DOMXPath($dom);
$nodes = $xpath->query("//a[contains(concat(' ', normalize-space(@rel), ' '), ' external ')]");
foreach($nodes as $node) {
    $node->setAttribute('href', 'http://example.org');
}
echo $dom->saveHTML(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T02:24:04.390

我一直在用 DOM 进行修改。这就是我得到的：

```
$html = new DOMDocument();
$html->loadHtml('<?xml encoding="utf-8" ?>' . $txt);
$nodes = $html->getElementsByTagName('a');
foreach ($nodes as $node) {
    foreach ($node->attributes as $att) {
        if ($att->name == 'rel') {
            if (strpos($att->value, 'external')) {
                $node->setAttribute('href','modified_url_goes_here');
            }
        }
    }
}
$txt = $html->saveHTML(); 
```

我不想只为这个字符串加载任何其他库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T02:25:02.173

最好的方法是使用 HTML 解析器/DOM，但这里有一个正则表达式解决方案：

```
$html = '<a href="http://www.test.com" rel="nofollow external">test</a><br>
<p> Some text</p>
<a href="http://test.com">test2</a><br>
<a rel="external">test3</a> <-- This won\'t work since there is no href in it.
';

$new = preg_replace_callback('/<a.+?rel\s*=\s*"([^"]*)"[^>]*>/i', function($m){
    if(strpos($m[1], 'external') !== false){
        $m[0] = preg_replace('/href\s*=\s*(("[^"]*")|(\'[^\']*\'))/i', 'href="http://example.com"', $m[0]);
    }
    return $m[0];
}, $html);

echo $new; 
```

[在线演示](http://codepad.viper-7.com/aeygFA)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T01:49:23.507

You could use a regular expression like `if it matches /\s+rel\s*=\s*".*external.*"/` then do a regExp replace like `/(<a.*href\s*=\s*")([^"]\)("[^>]*>)/\1[your new href here]\3/`

Though using a library that can do this kind of stuff for you is much easier (like jquery for javascript)

# java - 如何初始化具有特定类型的列表数组？

> ID：16127143
> 
> 赞同：1
> 
> 时间：2013-04-21T01:43:38.603
> 
> 标签：java, arrays, list, initialization

我有一个方法需要返回 List<'MyClass>[] 并且需要设置一个局部变量来执行此操作，但是在初始化时遇到了问题。

我试过了：

```
List<MyClass>[] lists = new List<MyClass>[5]; 
```

这给了我“无法创建列表的通用数组”的错误

我尝试投射一个对象数组：

```
List<MyClass>[] lists = (List<MyClass>[]) new Object[5]; 
```

这在运行时给了我一个铸造错误。

我也试过：

```
List<MyClass>[] lists = (List<MyClass>[]) new List[5]; 
```

这导致了空指针异常。

任何人都知道需要做什么才能使其正常工作？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T01:59:15.217

您像这样声明一个列表（例如 ArrayList）：

```
List<MyClass> list = new ArrayList<MyClass>(); 
```

要创建此列表的数组，您可以：

```
List<?>[] listArray = new List<?>[]{list}; 
```

这会将您的列表放入一个数组中。我假设这就是您想要的，而不仅仅是列表中的项目。

# javascript - 单击导航时激活 tabber

> ID：16127144
> 
> 赞同：1
> 
> 时间：2013-04-21T01:43:39.057
> 
> 标签：javascript, jquery

好的，所以我的网站有一个带有 id 的导航，`#nav`所以我想根据点击导航列表激活一个 tabber。导航`#nav`有一个像这样的html： -

```
 <ul id ="nav">
    <li><a href="tab1">Fred</a></li>
    <li><a href="tab2">Thom</a></li>
    <li><a href="tab3">Kay</a></li>
</ul> 
```

现在，当从导航中单击 Fred 时，我想在具有这样的 html 的 tabber 上激活它

```
 <ul class="tabs">                                        
         <li><a href="#tab1">Fred</a></li>                                      
         <li><a href="#tab2">Thom</a></li>    
         <li><a href="#tab3">Kay</a></li>       
</ul> 
```

和标签内容是这样的： -

```
<div id="tab1" class="tab_content">Lorem</div>
<div id="tab2" class="tab_content">Ipsum</div>
<div id="tab3" class="tab_content">Dolor</div> 
```

所以我写了下面这行jquery

```
$("#nav li").click(function() {

         var hash = location.hash;
          var sel = $("ul.tabs li a[href='" + hash + "'], ul#tabs li a[href='" + hash + "']");

    if (sel.length) { 

        sel.addClass("active").parent().addClass("active"); //Activate tab

        $(hash).show();
    } 
```

但它不起作用:(我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T02:00:06.747

尝试

```
$(function(){

  $("#nav li").click(function(event) {
    var hash = $('a', this).attr('href');
    var sel = $("ul.tabs li a[href='#" + hash + "']");
    sel.trigger('click')
    return false;
  });

  $('.tab_content').hide();
  var tabllis = $('ul.tabs li');
  tabllis.click(function(){
    var $this = $(this).addClass('active');
    var hash = $('a', this).attr('href');

    tabllis.not($this).removeClass('active');

    $('.tab_content').hide();
    $(hash).show();

    return false;
  });

}); 
```

演示：[Plunker](http://plnkr.co/edit/z66XzJWvp527LQQtl2WF?p=preview)

# c# - 一个实体对象不能被多个 IEntityChangeTracker 实例引用。这是什么意思？

> ID：16127145
> 
> 赞同：0
> 
> 时间：2013-04-21T01:44:00.993
> 
> 标签：c#, database, winforms, ef-code-first

我已经阅读了许多有关此问题的主题，但我仍然无法理解为什么会出现此错误。
抛出标题中提到的错误：`db.megrendelesek.Add(form.uj);`

```
private void button1_Click(object sender, EventArgs e)
{
    foreach (Account item in db.accountok)
    {
        if (item.Username == textBox1.Text && item.Password == textBox2.Text)
        {
            MegrendelesForm form = new MegrendelesForm(item as Account);

            if (form.ShowDialog() == DialogResult.OK)
            {
                db.megrendelesek.Add(form.uj);

                db.SaveChanges();
            }
        }
        else
        {
            MessageBox.Show("Bad user or pw");
        }
    }
}

public partial class MegrendelesForm : Form
{
    RaktarDB db = new RaktarDB();
    public Megrendeles uj { get; set; }
    public Account belepett = new Account();

    public MegrendelesForm(Account item)
    {
        InitializeComponent();
        belepett = item;

        var aruk = (from aru in db.aruk
                select aru).ToList<Aru>();
        listBox1.DataSource = aruk;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        List<Aru> aruk = new List<Aru>();
        foreach (Aru item in listBox2.Items)
        {
            aruk.Add(item);
        }

        uj = new Megrendeles {account=belepett,aruk=aruk };
    }
    public class Megrendeles
    {
        public int ID { get; set; }
        public virtual Account account { get; set; }
        public virtual List<Aru> aruk { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T03:13:04.600

此错误通常来自维护两个上下文并试图将一个实体从一个上下文附加到另一个上下文。

在您上面的示例中，我无法真正说出为什么会这样，但我想 form.uj 是从任何 db 的另一个实例填充的。

与所有 UI 元素共享上下文通常是明智的，这可能会解决您的问题。

# cocos2d-iphone - 放大 CCSprite 时获得不正确的颜色

> ID：16127150
> 
> 赞同：1
> 
> 时间：2013-04-21T01:44:30.447
> 
> 标签：cocos2d-iphone, textures, scale, ccsprite

在放大从 PVR 纹理加载的 CCSprite 时，我得到了一种奇怪的效果。我的原始精灵是一个简单的纯色矩形，但我最终从两个边缘（左和右）都有一个抖动的颜色，并且缩放比例很大（例如：[mySprite setScaleX:100.0]）。请注意，当我从独立的 PNG 文件加载我的精灵时，这不会发生。知道出了什么问题或可能缺少什么特殊参数吗？顺便说一句，我使用 TexturePacker 并生成 PNG 纹理并不好。谢谢。

**[更新]**第一张图片是我要扩展的基本精灵（“test.png”，实际尺寸为 3x30pix，为了可见性，我放大了 4 倍）。

![在此处输入图像描述](https://i.stack.imgur.com/tPPXL.png)

第二张图片是预期的结果（我从独立的 PNG 文件加载时得到的结果）。

![在此处输入图像描述](https://i.stack.imgur.com/QnSCf.png)

使用的代码：

```
aSprite = [CCSprite spriteWithFile:@"test.png"];
[self addChild:aSprite];
[aSprite setScaleX:300.0]; 
```

第三张图片是从 PVR 纹理加载时的结果。

![在此处输入图像描述](https://i.stack.imgur.com/LBfsq.png)

使用的代码：

```
aSprite = [CCSprite spriteWithSpriteFrameName:@"test"];
[self addChild:aSprite];
[aSprite setScaleX:300.0]; 
```

# wordpress - 如何创建使用 wp_insert_attachment 以编程方式上传的图像的调整大小版本

> ID：16127152
> 
> 赞同：4
> 
> 时间：2013-04-21T01:44:34.337
> 
> 标签：wordpress, thumbnails, attachment, image-resizing

我正在以编程方式将图像上传到我的 Wordpress 媒体库，并将它们设置为我帖子的特色图像，效果很好。

我想生成这些特色图像的缩略图，就像在通过“插入媒体”窗格添加图像时 Wordpress 处理创建调整大小的缩略图的方式一样，它会在其中创建多个文件，每个文件都具有在文件名中指定的新尺寸。

不幸的是，我很难找到任何解释如何正确完成的东西。

下面是相关代码。它成功创建帖子并将特色图像设置为媒体文件，但不会生成缩略图。

任何帮助将不胜感激！

```
// If the post was created
if($post_id) {

    // Add meta/custom field data
    add_post_meta($post_id, 'gif_random_id', $randomId);

    // Add uploaded file to the actual Wordpress image library
    global $uploadURL;
    $filename = $uploadURL . $randomId . '.' . $fileExtension;
    $wp_filetype = wp_check_filetype(basename($filename), null);
    $wp_upload_dir = wp_upload_dir();

    $attachment = array(
        'guid' => $wp_upload_dir['url'] . '/' . basename($filename), 
        'post_mime_type' => $wp_filetype['type'],
        'post_title' => preg_replace('/\.[^.]+$/', '', basename($filename)),
        'post_content' => '',
        'post_status' => 'publish'
    );

    $attach_id = wp_insert_attachment($attachment, $filename, $post_id);

    $attach_data = wp_generate_attachment_metadata($attach_id, $filename);
    wp_update_attachment_metadata($attach_id, $attach_data);

    // Now set the attachement as the featured image
    update_post_meta($post_id, '_thumbnail_id', $attach_id);

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T02:42:36.733

您应该使用另一个 - 相当未知和被误解的功能 - [`media_sideload_image()`](http://codex.wordpress.org/Function_Reference/media_sideload_image)

```
 $attach_id = media_sideload_image($filename, $post_id); 
```

此函数将处理该`"upload"`过程，并将遵循将图像上传到 wordpress 的正常工作流程，其中包括在您的定义中定义的拇指生成`custom image sizes`

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-05-09T15:44:10.943

Kaput，您的代码非常好，但似乎您的初始图像不在上传文件夹中。看看[文档](http://codex.wordpress.org/Function_Reference/wp_insert_attachment)是怎么说的：

> 服务器上文件的位置。使用绝对路径而不是文件的 URI。**该文件必须在上传目录**中。请参阅 wp_upload_dir()。

只需确保首先将图像上传到上传目录中。

# c++ - 内部类的 C++ 向量

> ID：16127154
> 
> 赞同：0
> 
> 时间：2013-04-21T01:45:28.677
> 
> 标签：c++, c++03

所以我有一个头文件，Graph.h。在该头文件中，我声明了一个向量。

```
std::vector<Vertex*> vertexList; 
```

这个向量的元素是指向 Vertex 的指针类型，Vertex 是 Graph 的内部类。据我所知，这迫使我要么在标题中定义 Vertex 类，要么完全忘记将其作为内部类。

我真正想做的只是在 Graph.cpp 文件中定义这个 Vertex 类。我怎样才能做到这一点？

我希望我的问题很清楚。我来自 Java 世界，这样的事情更简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T01:48:47.950

You can forward-declare `Vertex` class in the public header:

```
class Vertex; 
```

That will enable usage of it's pointer anywhere.

In your implementation (private) class you can define the class body and methods:

```
class Vertex { ... }; 
```

Only parts of the code, that actually use Vertex methods, need to have access to the type definition.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T01:49:47.093

If you only want to use the class as a pointer, it is enough to do this:

```
class Graph {

public:
    class Vertex;

}; 
```

And you can do the rest elsewhere, like this:

```
class Graph::Vertex {
    ...
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T01:50:49.597

If you're talking about actually having to implement all the methods of Vertex, you can do it with scoping in the .cpp file the same way you would for the Graph class: //graph.h class Graph {

```
 Graph();

  class Vertex {
    Vertex();
  }

 vector<Vertex*> vertexList;
};

//graph.cpp
Graph::Graph() {

//...
}

Graph::Vertex::Vertex() {
//...

} 
```

If you want the whole definition of Vertex to only be in the .cpp file, you can use forward declaration:

```
//graph.h
class Vertex; //forward declaration
class Graph {

  Graph();

 vector<Vertex*> vertexList;
};

//graph.cpp
class Vertex {
  Vertex();

}

Vertex::Vertex() {...}

Graph::Graph() {...} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T02:00:24.840

在 c++ 中，我们通常为每个类都有一个包含类接口的 .h 文件和一个包含具体实现的 c++ 文件。通常你会在 Graph.h 中包含 vertex.h。唯一会搞砸的事情是这两个 .h 文件是否相互依赖。在这种情况下，您可以只使用一行`class Vertex;`在 graph.h 头文件中在图形类声明之前进行转发声明。

# apache - 在 Apache 中使用带有中文字符的 mod_rewrite

> ID：16127162
> 
> 赞同：2
> 
> 时间：2013-04-21T01:47:32.693
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting, special-characters

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T05:56:20.747

首先，您的正则表达式不正确。使用`?`告诉`mod_rewrite`它前面的字符是可选的。它不是任何字符的占位符。

你应该这样做：

```
RewriteRule ^character/(%[A-Z0-9]{3})$ characters?character=$1 [NC,L] 
```

此规则假定您只想捕获一个字符。如果不是这种情况，或者您在其他地方需要相同的规则，则`(%[A-Z0-9]{3})`换成`(%[A-Z0-9]+)`.

您还需要确保您的`.htaccess`文件以 Unicode 格式 (UTF-8) 保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:37:58.660

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^character/(.+)$ /characters?character=$1 [NE,NC,L,QSA] 
```

# sql - 如何查看 Rails 中有多少用户具有特定关联？

> ID：16127169
> 
> 赞同：0
> 
> 时间：2013-04-21T01:48:22.770
> 
> 标签：sql, ruby-on-rails, ruby, console

我试图弄清楚如何使用 Rails 控制台来获取具有两个特定关联的用户数量。这是我的条件：

A`User`可以有许多`DropboxUser`帐户链接，并且许多`DriveUser`帐户通过外键链接到他们的帐户。在我的模型声明中，`DropboxUser`和`DriveUser` `belongs_to :user`. 结合前面的陈述， a`User` `has_many :dropbox_users`和`has_many :drive_users`. 我知道我已经链接了我的所有模型，所以现在**我想知道如何找出有多少`User`帐户同时拥有一个`DropboxUser`帐户和一个`DriveUser`与之关联**的帐户。

这是我尝试过的一些代码（不成功）：

```
User.count(:conditions => "dropbox_users.uid='user.id' AND drive_users.uid='user_id'") 
```

也许我的最后一个查询朝着正确的方向前进，也许不是。它告诉我`no such column: dropbox_users.uid`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T01:56:17.887

您必须加入`dropbox_users`才能对其进行查询。

```
User.joins(:dropbox_users).joins(:drive_users).count 
```

此外，由于`joins`使用`INNER JOIN`，它只会返回同时具有 Dropbox 和 Drive 帐户的记录。

# r - 如何防止两个标签在条形图中重叠？

> ID：16127170
> 
> 赞同：8
> 
> 时间：2013-04-21T01:48:25.487
> 
> 标签：r, ggplot2

下图显示了我使用以下代码创建的图表。我突出显示了缺失或重叠的标签。有没有办法告诉 ggplot2 不要重叠标签？

![在此处输入图像描述](https://i.stack.imgur.com/afKlR.png)

```
week = c(0, 1, 1, 1, 1, 2, 2, 3, 4, 5)
statuses = c('Shipped', 'Shipped', 'Shipped', 'Shipped', 'Not-Shipped', 'Shipped', 'Shipped', 'Shipped', 'Not-Shipped', 'Shipped')

dat <- data.frame(Week = week, Status = statuses)

p <- qplot(factor(Week), data = dat, geom = "bar", fill = factor(Status))
p <- p + geom_bar()
# Below is the most important line, that's the one which displays the value
p <- p + stat_bin(aes(label = ..count..), geom = "text", vjust = -1, size = 3)
p 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-26T21:18:17.050

您可以使用著名的[人口金字塔](http://en.wikipedia.org/wiki/Population_pyramid)的变体。

一些示例数据（受 Didzis Elferts 回答启发的代码）：

```
set.seed(654)
week <- sample(0:9, 3000, rep=TRUE, prob = rchisq(10, df = 3))
status <- factor(rbinom(3000, 1, 0.15), labels = c("Shipped", "Not-Shipped"))
data.df <- data.frame(Week = week, Status = status) 
```

计算每周的计数分数，然后将一个类别转换为负值：

```
library("plyr")
plot.df <- ddply(data.df, .(Week, Status), nrow)
plot.df$V1 <- ifelse(plot.df$Status == "Shipped",
                     plot.df$V1, -plot.df$V1) 
```

画出情节。请注意，y 轴标签适用于在基线的任一侧显示正值。

```
library("ggplot2")
ggplot(plot.df) + 
  aes(x = as.factor(Week), y = V1, fill = Status) +
  geom_bar(stat = "identity", position = "identity") +
  scale_y_continuous(breaks = 100 *     -1:5, 
                     labels = 100 * c(1, 0:5)) +
  geom_text(aes(y = sign(V1) * max(V1) / 30, label = abs(V1))) 
```

剧情：

![阴谋](https://i.imgur.com/TOxd0wo.png)

出于生产目的，您需要动态确定适当的 y 轴刻度标签。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-23T05:26:01.583

制作了新的示例数据（受@agstudy 的代码启发）。

```
week <- sample(0:5,1000,rep=TRUE,prob=c(0.2,0.05,0.15,0.5,0.03,0.1))
statuses <- gl(2,1000,labels=c('Not-Shipped', 'Shipped'))
dat <- data.frame(Week = week, Status = statuses) 
```

使用`ddply()`库中的函数为标签`plyr`创建了新的数据框`text.df`。列`count`包含 和 的每个组合中的观察`Week`数`Status`。然后添加`ypos`包含`count`每周累计总和加 15 的列。这将用于 y 位置。`Not-Shipped` `ypos`换成-10 。

```
library(plyr)
text.df<-ddply(dat,.(Week,Status),function(x) data.frame(count=nrow(x)))
text.df<-ddply(text.df,.(Week),transform,ypos=cumsum(count)+15)
text.df$ypos[text.df$Status=="Not-Shipped"]<- -10 
```

现在`geom_text()`使用新数据框绘制标签。

```
ggplot(dat,aes(as.factor(Week),fill=Status))+geom_bar()+
  geom_text(data=text.df,aes(x=as.factor(Week),y=ypos,label=count)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/PjziC.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-21T03:28:31.430

避免重叠的一种解决方案是使用躲避条和文本的位置。为避免缺失值，您可以设置`ylim`. 这里举个例子。

![在此处输入图像描述](https://i.stack.imgur.com/nd4oo.png)

```
##  I create some more realistic data similar to your picture
week <- sample(0:5,1000,rep=TRUE)
statuses <- gl(2,1000,labels=c('Not-Shipped', 'Shipped'))
dat <- data.frame(Week = week, Status = statuses)

## for dodging
dodgewidth <- position_dodge(width=0.9)
## get max y to set ylim
ymax <- max(table(dat$Week,dat$Status))+20
ggplot(dat,aes(x = factor(Week),fill = factor(Status))) + 
  geom_bar( position = dodgewidth ) +
  stat_bin(geom="text", position= dodgewidth, aes( label=..count..),
           vjust=-1,size=5)+
  ylim(0,ymax) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-25T14:59:26.403

根据 Didzis 图，您还可以通过保持 y 轴上的位置不变并将文本着色为与图例相同的颜色来提高可读性。

```
library(ggplot2)
week <- sample(0:5,1000,rep=TRUE,prob=c(0.2,0.05,0.15,0.5,0.03,0.1))
statuses <- gl(2,1000,labels=c('Not-Shipped', 'Shipped'))
dat <- data.frame(Week = week, Status = statuses)

library(plyr)
text.df<-ddply(dat,.(Week,Status),function(x) data.frame(count=nrow(x)))
text.df$ypos[text.df$Status=="Not-Shipped"]<- -15
text.df$ypos[text.df$Status=="Shipped"]<- -55

p <- ggplot(dat,aes(as.factor(Week),fill=Status))+geom_bar()+
geom_text(data=text.df,aes(x=as.factor(Week),y=ypos,label=count),colour=ifelse(text.df$Status=="Not-Shipped","#F8766D","#00BFC4")) 
```

![在此处输入图像描述](https://i.stack.imgur.com/Okls9.png)

# asp.net-mvc-3 - ASP.NET MVC 领域 - ActionLink 和 RedirectToAction

> ID：16127173
> 
> 赞同：1
> 
> 时间：2013-04-21T01:48:44.900
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing, asp.net-mvc-areas

在 ASP.NET MVC 3 项目中使用区域时，我偶然发现这个问题与 ActionLink 和 RedirectToAction 方法有关。

我在根级别的 AccountController 中添加了以下代码...

```
[HttpPost]
public ActionResult LogOn(LogOnModel model, string returnUrl)
{
    if (ModelState.IsValid)
    {
        if (Membership.ValidateUser(model.UserName, model.Password))
        {
            FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
            if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
            {
                return Redirect(returnUrl);
            }
            else
            {
                if (Roles.Provider.IsUserInRole(model.UserName, "Admin"))
                {
                    return RedirectToAction("Index", "Admin", new { area = "Admin" });
                }
                else
                {
                    return RedirectToAction("Index", "Home");
                }                        
            }
        }
        else
        {
            ModelState.AddModelError("", "The user name or password provided is incorrect.");
        }
    } 
```

根据当前登录用户所属的角色，我重定向到相应的区域。到目前为止，它工作正常。

管理区域如下所示...

![在此处输入图像描述](https://i.stack.imgur.com/arzBH.png)

在这个区域，我从根目录复制了**_ViewStart.cshtml 。**

**Log Off**，**About**，**Home**等链接不起作用，因为它们指向的路线不存在。

![在此处输入图像描述](https://i.stack.imgur.com/JSYdh.png)

我不想在 Areas 文件夹中创建另一个帐户或 Home 控制器。我想使用根目录中的那个。

根据收到的建议，更改**_LogOnPartial.cshtml**代码，如图所示...

```
@if(Request.IsAuthenticated) {
    <text>Welcome <strong>@User.Identity.Name</strong>!
    [ @Html.ActionLink("Log Off", "LogOff", "Account", new { area = "" }) ]</text>
}
else {
    @:[ @Html.ActionLink("Log On", "LogOn", "Account", new { area = "" }) ]
} 
```

产生以下 URL ...

![在此处输入图像描述](https://i.stack.imgur.com/6AkF1.png)

这仍然不对。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T01:52:19.223

在rool级别的区域将是`new { area = "" }`。空字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T10:49:07.537

**通过更改_LogOnPartial.cshtml**代码来改进 gdoron 和 Jasen 建议的解决方案，如下工作...

```
@if(Request.IsAuthenticated) {
    <text>Welcome <strong>@User.Identity.Name</strong>!
    [ @Html.ActionLink("Log Off", "LogOff", "Account", new { area = "" }, null) ]</text>
}
else {
    @:[ @Html.ActionLink("Log On", "LogOn", "Account", new { area = "" }, null) ]
} 
```

同样，还更改了**_Layout.cshtml中****Home**和**About**菜单项的**ActionLink**参数，如下所示...

 ******```
 <div id="menucontainer">
        <ul id="menu">
            <li>@Html.ActionLink("Home", "Index", "Home", new { area = ""}, null)</li>
            <li>@Html.ActionLink("About", "About", "Home", new { area = "" }, null))</li>
        </ul>
    </div> 
```

链接显示正确并且现在可以使用...

![在此处输入图像描述](https://i.stack.imgur.com/FCeQL.png)******

# web-applications - Web 应用程序的门户概念是什么？

> ID：16127180
> 
> 赞同：2
> 
> 时间：2013-04-21T01:49:26.023
> 
> 标签：web-applications, content-management-system, portal

我是一个使用 SQL、实体框架、asp.net、WCF 和 REST 实现成功的内部 Web 应用程序的小组的一员。我们做得很好，现在我们被要求使用我们的技术来帮助公司的其他项目。我的一位同事正在推动他所谓的门户概念，但他含糊其辞，坚持要我们等到他介绍这个概念。我们可能在公司的不同部门处理不同的项目，所以我想知道门户网站是否只是一个共同的起点；基本上我只是不知道，我想知道是否有人这样做，如果你这样做，利弊可能是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T01:51:49.307

门户网站只是在更广泛的范围内使用您的模板的能力。基于现有代码，将当前 Web 应用程序迁移到门户解决方案可能很复杂，但通常涉及额外的安全层、组和/或权限包含、每个组的不同数据集（或修改现有数据结构以考虑新组/用户区别），并根据需要为这些组建模界面，其中可以包括对组进行简单的 css 样式更改，或通过包装器（iframe、包含、弹出窗口等）将您的应用程序引入另一个系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T03:18:07.710

我只从讲座中了解门户，但据我所知，Web 门户是小部件的容器。这些小部件（称为 portlet）执行诸如显示收件箱、计算器、搜索栏、日历等内容之类的操作。它们很有用，因为 portlet 在门户中提供了所有功能，这意味着您不必加载一堆不同的程序或网页来单独访问这些东西。

我记得只有两个地方的门户网站是大学计算机系统和今年停产的谷歌 iGoogle。

谷歌：[http ://www.google.com/ig](http://www.google.com/ig)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T01:54:58.707

*   [http://www.slideshare.net/BlazeDreamTech/website-vs-portal](http://www.slideshare.net/BlazeDreamTech/website-vs-portal)

*   [http://en.wikipedia.org/wiki/Web_portal](http://en.wikipedia.org/wiki/Web_portal)

    具有论坛、SSO、来自不同来源的提要、特定区域的入口点的网站。我认为 yahoo.com 是最古老的第一个例子

也许你的同事有一个架构和流程来实现这一点，或者只是一些模板

# css - Button hover image not working in CSS

> ID：16127183
> 
> 赞同：2
> 
> 时间：2013-04-21T01:49:46.270
> 
> 标签：css, image, button, hover

In my css I am using different image for hover state button but when I hover over the image, there is no change. Can you help find the fix?

```
.button {
background-image:url('/images/search.png');
width:73px;
height:23px;
background-repeat:no-repeat;
cursor:pointer;
border:none;
}

.button:hover {
background-image:url('/images/search_active.png');
background-repeat:no-repeat;
cursor:pointer;
border:none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T01:59:21.997

确保您的图片位于“./images/search_active.png”中并且路径正确。

# matlab - Matlab将行向量组合成一行

> ID：16127192
> 
> 赞同：0
> 
> 时间：2013-04-21T01:51:48.060
> 
> 标签：matlab, vectorization

是否有一种矢量化的自动化方式来填充行向量`l`时间，重复数字`x`，这样在一定数量的元素后`x`增加？给出。`y``k``k, l, x, and y`

**两个例子：**

```
(k = 4, l = 4, x = 0, y = 1): $A = [0 0 0 0; 1 1 1 1; 2 2 2 2; 3 3 3 3];$

(k = 2, l = 3, x = 0, y = 0.1): $B = [0 0; 0.1 0.1; 0.2 0.2]$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:17:46.083

您可以将 repmat 与 a:b 一起使用

这样，您的第一个示例将如下所示：

```
repmat((0:3)', 1,4) 
```

第二个：

```
repmat((0:0.1:0.2)', 1,2) 
```

您也可以尝试 linspace 或类似功能，以尽可能接近您想要的

# c++ - 类继承和重新定义成员类型c ++

> ID：16127195
> 
> 赞同：0
> 
> 时间：2013-04-21T01:52:11.970
> 
> 标签：c++, inheritance, polymorphism

假设我们有一个名为 Base 的类。在这个类中有一个向量和对这个向量进行操作的函数。我想根据向量的类型创建不同的派生类（一个继承类用于 int，另一个用于 char ......等）。对于不同的派生类，有些方法完全相同（int、char、bool...），而另一些则完全不同。这些方法需要访问向量元素。

考虑以下代码：

```
class Base {
public:
    std::vector<int> vec;

    virtual void Print() { std::cout << vec[0]; }

};

class Derived : public Base {
public:
    std::vector<bool> vec;
};

int main() {
    Base * test = new Derived;
    test->vec.push_back(5);
    test->Print();
    system("PAUSE");
} 
```

这会打印一个 int 而不是 boolean。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T01:57:10.907

您不能简单地通过派生来更改基类中向量的类型。派生类具有基类的所有成员，以及它自己的成员。

在您的代码中，派生类为 a `vector<int>`AND a `vector<bool>`。被调用的`Print`函数是基类的`Print`函数，因为派生类没有实现它自己的。基类的`Print`函数打印`vector<int>`.

您需要使用模板而不是继承。您可以执行以下操作：

```
template <class T>
class Generic {
public:
    std::vector<T> vec;

    void Print() { std::cout << vec[0]; }

};

int main() {
    Generic<bool> * test = new Generic<bool>;
    test->vec.push_back(5);
    test->Print();
    system("PAUSE");
} 
```

在上面的代码中，Generic 是一个包含 T 向量的类（其中 T 可以是 int、bool 等）。您可以通过指定类型来**实例化**特定类型的类，例如`Generic<bool>`. `Generic<bool>`is different from , `Generic<int>`which is different from`Generic<double>`等`vector<int>``vector<bool>`

# design-patterns - 您如何将 Data Gateway 与 Data Mapper 结合使用？

> ID：16127199
> 
> 赞同：1
> 
> 时间：2013-04-21T01:52:54.653
> 
> 标签：design-patterns, domain-driven-design, datamapper, gateway

根据 Martin Fowler 的说法，表/行数据网关与数据映射器模式并不互斥。他是这样说的：

> 这些模式并不是完全相互排斥的……但是，即使您使用 Data Mapper 作为主要的持久性机制，您也可以使用数据网关来包装被视为外部接口的表或服务。

但是，我想不出数据网关与数据映射器一起使用的情况。你们中的任何人都可以更详细地解释这一点，并可能提供一个如何完成数据网关和映射器集成的真实示例吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:15:39.100

它们不是相互排斥的，因为您可以在一个项目中同时使用它们。具体来说，Fowler 指出，如果您有某些被视为外部接口的表，您可以用网关封装它们。表数据网关是一个简单、直接的接口。另一方面，数据映射器倾向于提供比表数据网关更好的隔离，因此更适合映射到域模型。这种方法的一个主要示例是 ORM。

# java - JSch：如何使会话保持活跃

> ID：16127200
> 
> 赞同：20
> 
> 时间：2013-04-21T01:52:55.413
> 
> 标签：java, session, ssh, jsch, keep-alive

我正在使用 SSH 编写用于静态路由管理的 Java GUI 程序。我的代码如下：

```
import com.jcraft.jsch.*;
import java.io.*;

public class Konsep {
    String status;
    static String username;
    static String hostname;
    String inputcommand;
    String output;
    static Session session;

    JSch jsch = new JSch();

    public String status(String stringstatus) {
        stringstatus = status;
        return stringstatus;
    }

    public String InputCommand(String inputcommandstatus) {
        inputcommandstatus = inputcommand;
        return inputcommandstatus;
    }

    public void connect(String usernamelokal, String hostnamelokal,
            String password, int port) {
        //        JSch jsch=new JSch();
        try {
            Session sessionlokal = jsch.getSession(usernamelokal,
                    hostnamelokal, port);
            sessionlokal.setPassword(password);
            UserInfo ui = new UserInfoku.Infoku();
            sessionlokal.setUserInfo(ui);
            sessionlokal.setTimeout(0);
            sessionlokal.connect();
            status = "tersambung \n";
            username = usernamelokal;
            hostname = hostnamelokal;
            session = sessionlokal;
            System.out.println(username + " " + hostname);
        } catch (Exception e) {
            System.out.println(e);
            status = "Exception = \n " + e + "\n";

        }
    }

    public void disconnect() {
        //        JSch jsch=new JSch();
        try {
            Session sessionlokal = jsch.getSession(username, hostname);
            //            System.out.println(username +" "+ hostname);
            sessionlokal.disconnect();
            status = "wes pedhoott \n";
        } catch (Exception e) {
            System.out.println(e);
            status = "Exception = \n " + e + "\n";
        }

    }

    public void addRoute() {
        //        JSch jsch=new JSch();
        System.out.println(username + " " + hostname);
        try {
            Session sessionlokal = session; // =jsch.getSession(username, hostname);
            Channel channel = sessionlokal.openChannel("exec");
            ((ChannelExec) channel).setCommand(inputcommand);
            channel.setInputStream(null);
            channel.connect();
            ((ChannelExec) channel).setErrStream(System.err);
            InputStream in = channel.getInputStream();
            channel.connect();

            byte[] tmp = new byte[1024];
            while (true) {
                while (in.available() > 0) {
                    int i = in.read(tmp, 0, 1024);
                    if (i < 0)
                        break;
                    System.out.print(new String(tmp, 0, i));
                }
                if (channel.isClosed()) {
                    System.out.println("exit-status: "
                            + channel.getExitStatus());
                    break;
                }
                try {
                    Thread.sleep(1000);
                } catch (Exception ee) {
                }
            }

            channel.disconnect();
        } catch (Exception e) {
            System.out.println(e);
        }
    }
} 
```

问题是当我调用connect方法然后调用addroute时，程序返回

```
root 192.168.50.2
root 192.168.50.2
com.jcraft.jsch.JSchException: session is down 
```

我一直在尝试获取会话状态

```
Session sessionlokal=session; //returns com.jcraft.jsch.JSchException: ChannelExec 
```

或者

```
Session sessionlokal=jsch.getSession(username, hostname); //returns session is down 
```

我也尝试过使用keepalive，但它也不起作用。

我的意图是创建一个会话来托管（登录），同时让会话保持运行状态，执行一个或多个命令并可能稍后执行其他命令，然后在不需要时关闭会话（注销）。我一直在这个论坛上搜索，我发现了这个[问题](https://stackoverflow.com/questions/7207688/jsch-one-session-multiple-channels)，但是代码是创建一个方法来定义一个命令首先执行，然后创建会话，调用命令的方法并关闭会话。

我上面提到的关于如何做的任何想法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-03-04T14:48:48.540

在尝试`Session.sendKeepAliveMsg()`没有成功之后，我得出了以下似乎相当稳定的解决方案：

```
private Session getSession() throws Exception {
    try {
        if (!session.isConnected()) {
            logger.info("Session successfully tested, use it again.");
            session.connect();
        }
    } catch (Throwable t) {
        logger.info("Session terminated. Create a new one.");
        session = jsch.getSession(user, host, port);
        session.setConfig(config);
        session.connect();
    }
    return session;
} 
```

**更新：**几天后它失败了。

我试图通过终止服务器上的打开会话来测试它。我以这种方式测试的所有先前版本都显示了完全相同的行为，无论是在等待几天后还是在终止服务器进程后出现问题，所以我认为这个测试 - 以及上述解决方案的结果 - 是有意义的。不幸的是，事实并非如此。

我将尝试其他一些方法来修复它并让您了解最新情况。

**更新 2：最终解决方案，保证不优雅且有效：**

```
private Session getSession() throws Exception {
    try {
        ChannelExec testChannel = (ChannelExec) session.openChannel("exec");
        testChannel.setCommand("true");
        testChannel.connect();
        if(logger.isDebugEnabled()) {
            logger.debug("Session successfully tested, use it again.");
        }
        testChannel.exit();
    } catch (Throwable t) {
        logger.info("Session terminated. Create a new one.");
        session = jsch.getSession(user, host, port);
        session.setConfig(config);
        session.connect();
    }
    return session;
} 
```

此版本在生产环境中运行数周。每天一次，我记录了信息消息。

打开频道和执行一些无操作命令的成本有些烦人，但我发现没有其他方法可以确定会话的状态。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-23T06:01:08.427

[您可以尝试在调用Session#connect()](http://epaul.github.io/jsch-documentation/javadoc/com/jcraft/jsch/Session.html#connect%28%29)之前调用以下方法。

[会话#setServerAliveInterval(int 毫秒)](http://epaul.github.io/jsch-documentation/javadoc/com/jcraft/jsch/Session.html#setServerAliveInterval%28int%29)

虽然我发现了另一个可以尝试的函数[Session#sendKeepAliveMsg() 。](http://epaul.github.io/jsch-documentation/javadoc/com/jcraft/jsch/Session.html#sendKeepAliveMsg%28%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-06T17:52:18.457

您可以使用 pool ，我使用*org.apache.commons.pool2*所以 pool 负责提供连接的会话，基本上：

*   在 makeObject 上创建 JSCH 会话
*   如果断开连接，则激活
*   检查是否 isConnected 验证
*   钝化时发送KeepAliveMsg

以上对我有用，还请记住，如果您在验证上添加逻辑，则 poolConfig 应在 testOnBorrow 或 testOnReturn 上设置为 true。所以我使用***了 KeyedObjectPool你应该通过******borrowObject***方法从池中获取连接，并确保在通过***returnObject***完成操作后将它们返回到池中。

[https://commons.apache.org/proper/commons-pool/api-2.2/org/apache/commons/pool2/PooledObjectFactory.html](https://commons.apache.org/proper/commons-pool/api-2.2/org/apache/commons/pool2/PooledObjectFactory.html)

# javafx-2 - GridPane：RowConstraints percentHeight 未按预期工作

> ID：16127203
> 
> 赞同：1
> 
> 时间：2013-04-21T01:53:19.323
> 
> 标签：javafx-2, javafx, fxml

拥有一个 2 行 2 列的 GridPane，将行约束设置为 50% 的高度会导致不需要的行为。

代码：

```
<BorderPane xmlns:fx="http://javafx.com/fxml" fx:controller="..." stylesheets="@general.css" prefWidth="800" prefHeight="600">
    <top>
        <VBox>
            <!-- ... -->
        </VBox>
    </top>

    <bottom>
        <HBox>
            <!-- ... -->
        </HBox>
    </bottom>

    <center>
        <GridPane > 
            <children>

                <ScrollPane fx:id="tilePane" GridPane.columnIndex="0" GridPane.rowIndex="0">
                    <content>
                    </content>
                    <GridPane.margin>
                        <Insets bottom="2" left="2" right="2" top="2" />
                    </GridPane.margin>
                </ScrollPane>

                <TreeView fx:id="listPane" GridPane.columnIndex="0" GridPane.rowIndex="1">
                    <root>
                        <TreeItem value="Stages" />
                    </root>
                    <GridPane.margin>
                        <Insets bottom="2" left="2" right="2" top="2" />
                    </GridPane.margin>
                </TreeView>

                <ScrollPane fx:id="mapPane" GridPane.columnIndex="1" GridPane.rowIndex="0" GridPane.rowSpan="2">
                    <content>
                    </content>
                    <GridPane.margin>
                        <Insets bottom="2" left="2" right="2" top="2" />
                    </GridPane.margin>
                </ScrollPane>

            </children>

            <columnConstraints>
                <ColumnConstraints hgrow="ALWAYS" percentWidth="25"/>
                <ColumnConstraints hgrow="ALWAYS" />
            </columnConstraints>

            <rowConstraints>
                <RowConstraints vgrow="ALWAYS" percentHeight="50" />
                <RowConstraints vgrow="ALWAYS" percentHeight="50" />
            </rowConstraints>
        </GridPane>
    </center>
</BorderPane> 
```

*（底部提到的属性）*

我预计这两行将以 50% 的比率共享它们的可用高度。他们这样做，但他们也消耗了比需要更多的空间。

带有和不带`percentHeight`指定的结果图片：

![与百分比高度](https://i.stack.imgur.com/XIRpX.png) ![没有百分比高度](https://i.stack.imgur.com/qL2fn.png)

我理解`percentHeight`错了，还是有其他方法？

# java - Double.parseDouble() 中的 NumberFormatException

> ID：16127205
> 
> 赞同：-1
> 
> 时间：2013-04-21T01:54:05.160
> 
> 标签：java, numberformatexception

我正在尝试创建一个客户端/服务器应用程序，服务器要求客户端编写两个操作数，然后在客户端选择操作时选择一个操作，服务器将结果发回给他。

当我想运行我的程序时，我收到了这个错误：

```
Exception in thread "main" java.lang.NumberFormatException: For input string: "1lient connectée"
    at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1241)
    at java.lang.Double.parseDouble(Double.java:540)
    at Server.main(Server.java:29) 
```

这是我的代码：

**服务器： **

```
import java.net.*;
import java.util.*;
import java.io.*;

public class Server {

    public static void main (String[] args){
        try{
            DatagramSocket s = new DatagramSocket(1234);
            byte[] sendBuffer = new byte [1024];
            byte[] recvBuffer = new byte[1024];
            DatagramPacket sendPacket, recvPacket;
            String reply = null;

            //Get the connection declaration from client
            recvPacket = new DatagramPacket(recvBuffer, recvBuffer.length);
            s.receive(recvPacket);
            System.out.println(new String(recvPacket.getData()));

            //Send the first message to client to write the first operand
            sendBuffer = "Entré n1 : ".getBytes();
            sendPacket = new DatagramPacket(sendBuffer,sendBuffer.length,recvPacket.getAddress(),recvPacket.getPort());
            s.send(sendPacket);

            //Get the first operand
            recvPacket = new DatagramPacket(recvBuffer, recvBuffer.length);
            s.receive(recvPacket);
            double n1 = Double.parseDouble(new String(recvPacket.getData()));

            //Send the second message to client to write the second operand
            sendBuffer = "Donner n2 : ".getBytes();
            sendPacket = new DatagramPacket(sendBuffer, sendBuffer.length, recvPacket.getAddress(), recvPacket.getPort());
            s.send(sendPacket);

            //Get the second operand
            recvPacket = new DatagramPacket(recvBuffer, recvBuffer.length);
            s.receive(recvPacket);
            double n2 = Double.parseDouble(new String(recvPacket.getData()));

            //Send the third message to client to choose the operation
            sendBuffer = "Choisir l'op : \n1-Addition \n2-Soustraction \n3-Multiplication \n4-Division \nVotre choix : ".getBytes();
            sendPacket= new DatagramPacket(sendBuffer, sendBuffer.length, recvPacket.getAddress(), recvPacket.getPort());
            s.send(sendPacket);

            //Get the number of operation
            recvPacket = new DatagramPacket(recvBuffer, recvBuffer.length);
            s.receive(recvPacket);
            reply = new String(recvPacket.getData());

            //Traitement
            String res = null;
            switch(reply){
                    case "1" :
                        res = String.valueOf(n1 + n2);
                        break;
                    case "2" :
                        res = String.valueOf(n1 - n2);
                        break;
                    case "3" :
                        res = String.valueOf(n1*n2);
                    case "4" :
                        res = (n2 == 0) ? "Division sue zéro" : String.valueOf(n1/n2);
                        break;
                    default :
                        res = "Erreur";
            }       

            //Send the result of the operation to the client
            sendBuffer = ("Resultat : "+res).getBytes();
            sendPacket = new DatagramPacket(sendBuffer, sendBuffer.length, recvPacket.getAddress(), recvPacket.getPort());
            s.send(sendPacket);

        }catch(IOException e){
            e.printStackTrace();
        }
    }

} 
```

**客户 ：**

```
import java.net.*;
import java.util.*;
import java.io.*;

public class Client {

    public static void main (String[] args) throws UnknownHostException{
        DatagramSocket s;
        byte[] sendBuffer = new byte[1024];
        byte[] recvBuffer = new byte[1024];
        DatagramPacket sendPacket, recvPacket;
        String reply = null;
        final InetAddress ADRSS = InetAddress.getByName("localhost");
        final int PORT = 1234;
        Scanner cn = new Scanner(System.in);
        try{
             s = new DatagramSocket();

             //Declare connection to server
            sendBuffer = "Client connectée".getBytes();
            sendPacket = new DatagramPacket(sendBuffer, sendBuffer.length, ADRSS, PORT);
            s.send(sendPacket);

            //Receive the first message from server
            recvPacket = new DatagramPacket(recvBuffer, recvBuffer.length);
            s.receive(recvPacket);
            System.out.println(new String(recvPacket.getData()));

            //Send the answer for the first Message to server (first operand)
            sendBuffer = cn.nextLine().getBytes();
            sendPacket = new DatagramPacket(sendBuffer, sendBuffer.length, ADRSS, PORT);
            s.send(sendPacket);

            //Receive the second message from server
            recvPacket = new DatagramPacket(recvBuffer,recvBuffer.length);
            s.receive(recvPacket);
            System.out.println(new String(recvPacket.getData()));

            //Send the answer for the second Message to server (second operand)
            sendBuffer = cn.nextLine().getBytes();
            sendPacket = new DatagramPacket(sendBuffer, sendBuffer.length, ADRSS, PORT);
            s.send(sendPacket);

            //Receive the third message from server
            recvPacket = new DatagramPacket(recvBuffer, recvBuffer.length);
            s.receive(recvPacket);
            System.out.println(new String(recvPacket.getData()));

            //Send the answer for the third Message to server (operation)
            sendBuffer = cn.nextLine().getBytes();
            sendPacket = new DatagramPacket(sendBuffer, sendBuffer.length, ADRSS, PORT);
            s.send(sendPacket);

            //Receive the result from server (result of operation)
            recvPacket = new DatagramPacket(recvBuffer, recvBuffer.length);
            s.receive(recvPacket);
            System.out.println(new String(recvPacket.getData()));
        }catch(IOException e){
            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:58:49.743

`double n1 = Double.parseDouble(new String(recvPacket.getData()));`

此行导致错误，因为您正在从客户端发送 String 并在服务器上期望 double。对于变量 n2，您也可能面临同样的问题。所以，只要把它们当作字符串，就可以了。

# delphi - 创建一个控件对象并从 Delphi 中的函数返回它

> ID：16127215
> 
> 赞同：1
> 
> 时间：2013-04-21T01:55:45.060
> 
> 标签：delphi, delphi-7

此函数创建一个 TEdit 类型的控件对象，并将其返回到代码中恰好被调用的任何行：

```
function TBaseForm.CreateEdit(AOwner: TWinControl;
                              inTop, inLeft, inWidth: integer) : TEdit;
var
    edt: TEdit;
begin
    edt := TEdit.Create(AOwner);
    with edt do begin
        Parent := AOwner;
        Width  := inWidth;
        Top    := inTop;
        Left   := inLeft;
    end;
    result := edt;
end; 
```

稍后在代码中：

```
edtTitle := CreateEdit(Self, 20, 90, 300); 
```

现在。函数中的代码没有问题吗？例如，有什么东西不会挂在内存的某个地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:21:45.200

没有内存泄漏。

你可以做得更干净（虽然我仍然不确定你为什么这样做），并避免额外的变量`edt`：

```
function TBaseForm.CreateEdit(AOwner: TWinControl;
                              inTop, inLeft, inWidth: integer) : TEdit;
begin
  Result := TEdit.Create(AOwner);
  Result.Parent := AOwner;
  Result.Width  := inWidth;
  Result.Top    := inTop;
  Result.Left   := inLeft;
end; 
```

# javascript - 如何在 JS 中创建采购订单表单

> ID：16127216
> 
> 赞同：3
> 
> 时间：2013-04-21T01:55:46.623
> 
> 标签：javascript, forms

我是这个论坛的新手，也是 JS 的新手。我正在尝试为我正在创建的网站制作采购订单。基本上我需要它来添加我选择的项目的总数，然后发送订单。但是，我收到各种错误。第一个是当我通过 JS lint 运行 JS 时，第二个是在我的代码的第 111 行显示错误。此外，每个下拉值都显示为“未定义”，它不计算总数。再说一次，我对 JavaScript 很陌生，所以我不确定如何解决这个问题，这样我才能让它工作。任何建议或帮助都会很棒！这是代码

```
<!DOCTYPE HTML>

<html>
<head>

<style type="text/css"> 

</style>

<br/ >
<div align="center">
<img src="navBar.jpg" width="1257" height="96" alt="Navigation Bar" usemap="#navBar" 
style="box-shadow: -20px -20px 15px #0099FF, 20px 20px 15px #00FF00" />
        <map name="navBar" id="navBar">
                <area shape="rect" coords="0,1,206,95" href="northAmerica.html" alt="Home Page" />
                <area shape="rect" coords="244,0,568,95" href="worldMap.html" alt="Animal Map" />
                <area shape="rect" coords="601,0,835,95" href="purchaseForm.html" alt="Store" />
                <area shape="rect" coords="876,0,1256,95" href="zooSurvey.html" alt="Take a Survey!" />
        </map>
</div>
<br/ >

<link rel="stylesheet" type="text/css" href="sheet.css" />

<meta content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="sheet.css">

<script type="text/javascript">
var souvenirs = [Tiger, bobcat, elephant, penguin];

var Tiger = document.getElementById("Tiger_price");
var Tigerprice = parseFloat(Tiger, 10);
var tigerNew = Tigerprice.value;

var bobcat = document.getElementById("bobcat_price");
var bobcatprice = parseFloat(bobcat, 10);
var bobcatNew = bobcatprice.value;

var elephant = document.getElementById("elephant_price");
var elephantprice = parseFloat(elephant, 10);
var elephantNew = elephantprice.value;

var penguin = document.getElementById("penguin_price");
var penguinprice = parseFloat(penguin, 10);
var penguinNew = penguinprice.value;

window.onerror = function(msg, url, linenumber) {
    alert('Error message: '+msg+'\nURL: '+url+'\nLine Number: '+linenumber);
    return true;
};

function validate() {
var result = true;

var namefield = document.getElementById("yourname");
var nameerr = document.getElementById("nameerr");
var namefieldRE = /^[\w ]+$/;

var emailfield = document.getElementById("youremail");
var emailerr = document.getElementById("emailerr");

var emailfieldRE = /^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/ ;

if(!namefield.value.match(namefieldRE)){
nameerr.innerHTML = "Please fill in your name";
nameerr.style.color = "#ff0000";
result = false;
}
else{
nameerr.innerHTML = "";
result = true;
}

if(!emailfield.value.match(emailfieldRE)){
emailerr.innerHTML = "Please fill in your email";
emailerr.style.color = "#ff0000";
result = false;
}
else{
emailerr.innerHTML = "";
result = true;
}

return result;

}

function resetTotals() {
var total = 0.0;
for (souvenirs in souvenirs) {
var subtotal = souvenirs[souvenirs] + "_subtotal";
document.getElementById(subtotal).innerHTML = "0.00";
}
output = document.getElementById("finaltotal");
output.innerHTML = "0.00";
}

function doTotals() {
alert();

for (souvenirs in souvenirs) {

var tigerselectedvalue = document.souvenirsorderform.tiger_quantity.value;
var bobcatselectedvalue = document.souvenirsorderform.bobcat_quantity.value;
var elephantselectedvalue = document.souvenirsorderform.elephant_quantity.value;
var penguinselectedvalue = document.souvenirsorderform.penguin_quantity.value;

document.getElementByID(souvenirs[souvenirs] + "_subtotal") = (souvenirs[souvenirs] + "price") * (souvenirs[souvenirs] + "selectedvalue");

var subtotal = souvenirs[souvenirs] + "_subtotal";
document.getElementById(subtotal).innerHTML = "0.00";
}

output = document.getElementById("finaltotal");
output.innerHTML = total.toFixed(2);
}

if (document.getElementById) {
window.onload = setup;
}

function setup() {
var lastCol = document.getElementById("subtotal_header");

var theForm = document.getElementById("souvenirsorderform");

var amounts = document.getElementsByTagName("select");
for(var i = 0; i < amounts.length; i++){
amounts[i].onchange = doTotals;
}

theForm.onsubmit = "validate";
theForm.onreset = "resetTotals";
}
</script>
<title>ITS 110 Zoo: Gift Shop</title>
</head>

<body>

<div align="center">
<table>
<tr>
<td>
<img src="logoZoo.gif" width="280" height="224" alt="Home Page" usemap="#logoZoo" style="border:none" />
<map name="logoZoo" id="logoZoo">
                <area shape="circle" coords="141,114,120" href="northAmerica.html" alt="Home Page" />
        </map>
</td>
<td>
<h1>Purchase&nbsp;</h1>
</td>
<td>
<h1>some&nbsp;</h1>
</td>
<td>
<h1>souvenirs!</h1>
</td>
</tr>
</table>
<div>

<p><b>Don't leave our site without getting your very own ITS110 Zoo souvenirs!
<br/ >
Once you've placed your order, we'll ship your items to the zoo so they're ready when you come for a visit- or we will
send it directly to your home! </b></p>
<br/ >

<h2 style="font-size:24Pt"><b>Place your order:</b></h2>

<form method="post" action="#" name="souvenirsorderform" id="souvenirsorderform" onsubmit="returnvalidate()">

<table>

<tr>
<td><label for="Tiger_quantity"><b>Tiger Plush</b></label></td>
<td><img src="tigerplush.gif" width="200" height="200"/></img></td>
<td>$3<input type="hidden" id="Tiger_price" value="3.00"><br/ >
<select id="Tiger_quantity" name="Tiger_quantity" size="1">
<option value="10">10</option>
<option value="9">9</option>
<option value="8">8</option>
<option value="7">7</option>
<option value="6">6</option>
<option value="5">5</option>
<option value="4">4</option>
<option value="3">3</option>
<option value="2">2</option>
<option value="1">1</option>
<option value="0" selected>0</option>
</select>
</td>
<td id="Tiger_subtotal"></td>
<td><label for="bobcat_quantity"><b>Monkey Plush</b></label></td>
<td><img src="monkey.gif" width="200" height="200"/></img></td>
<td>$3.50<input type="hidden" id="bobcat_price" value="3.50">
<select id="bobcat_quantity" name="bobcat_quantity" size="1"><br/ >
<option value="10">10</option>
<option value="9">9</option>
<option value="8">8</option>
<option value="7">7</option>
<option value="6">6</option>
<option value="5">5</option>
<option value="4">4</option>
<option value="3">3</option>
<option value="2">2</option>
<option value="1">1</option>
<option value="0" selected>0</option>
</select>
</td>
<td id="bobcat_subtotal"></td>
</tr>

<tr>
<td><label for="Elephant_quantity"><b>Elephant Shirt</b></label></td>
<td><img src="shirt.gif" width="200" height="200"/></img></td>
<td>$12<input type="hidden" id="elephant_price" value="12.00">
<select id="elephant_quantity" name="elephant_quantity" size="1"><br/ >
<option value="10">10</option>
<option value="9">9</option>
<option value="8">8</option>
<option value="7">7</option>
<option value="6">6</option>
<option value="5">5</option>
<option value="4">4</option>
<option value="3">3</option>
<option value="2">2</option>
<option value="1">1</option>
<option value="0" selected>0</option>
</select>
</td>
<td id="elephant_subtotal"></td>
<td><label for="penguin_quantity"><b>Penguin Shirt</b></label></td>
<td><img src="penshirt.gif" width="200" height="200" /></img></td>
<td>$12<input type="hidden" id="penguin_price" value="12.00"><br/ >
<select id="penguin_quantity" name="penguin_quantity" size="1">
<option value="10">10</option>
<option value="9">9</option>
<option value="8">8</option>
<option value="7">7</option>
<option value="6">6</option>
<option value="5">5</option>
<option value="4">4</option>
<option value="3">3</option>
<option value="2">2</option>
<option value="1">1</option>
<option value="0" selected>0</option>
</select>
</td>
<td id="penguin_subtotal"></td>
</tr>

<tr id="tablefoot"><td>Total:</td><td colspan="2" id="totalerr"><td id="finaltotal"></td></tr>

</table>

<p><b><label for="yourname">Your Full Name:</label>
<input name="yourname" id="yourname" type="text">
<span id="nameerr"></span></b></p>
<p><b><label for="youremail">Your E-Mail Address to Confirm the Order:</label>
<input name="youremail" id="youremail" type="text">
<span id="emailerr"></span></b></p>

<div><button id="submit" type="submit">Place Order</button><button id="reset" type="reset">Clear Order</button></div>
<br/ >
</form>

</body>
</center> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T07:23:40.890

您不需要自己重置表格。`<input id="reset" type="reset" value="Clear Order"/>`为你做。如果你打电话`alert()`，它显示**未定义**（这是正常的）。
您试图在 DOM 就绪事件触发之前找到 DOM 元素。
`var Tiger = document.getElementById("Tiger_price");`
如果您真的想这样做，请在触发文档就绪事件时进行。
并且总是尝试使用小写字母作为 html 元素的属性。例如：`id="tiger_subtotal"`。
我希望这有帮助。我检查了一下，它正在工作：

```
<!DOCTYPE HTML>

<html>
<head>

<style type="text/css"> 

</style>

<br/ >
<div align="center">
<img src="navBar.jpg" width="1257" height="96" alt="Navigation Bar" usemap="#navBar" 
style="box-shadow: -20px -20px 15px #0099FF, 20px 20px 15px #00FF00" />
        <map name="navBar" id="navBar">
                <area shape="rect" coords="0,1,206,95" href="northAmerica.html" alt="Home Page" />
                <area shape="rect" coords="244,0,568,95" href="worldMap.html" alt="Animal Map" />
                <area shape="rect" coords="601,0,835,95" href="purchaseForm.html" alt="Store" />
                <area shape="rect" coords="876,0,1256,95" href="zooSurvey.html" alt="Take a Survey!" />
        </map>
</div>
<br/ >

<link rel="stylesheet" type="text/css" href="sheet.css" />

<meta content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="sheet.css">

<script type="text/javascript">
window.onerror = function(msg, url, linenumber) {
    alert('Error message: '+msg+'\nURL: '+url+'\nLine Number: '+linenumber);
    return true;
};

function validate() {
    var result = true;

    var namefield = document.getElementById("yourname");
    var nameerr = document.getElementById("nameerr");
    var namefieldRE = /^[\w ]+$/;

    var emailfield = document.getElementById("youremail");
    var emailerr = document.getElementById("emailerr");

    var emailfieldRE = /^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/ ;

    if(!namefield.value.match(namefieldRE)){
        nameerr.innerHTML = "Please fill in your name";
        nameerr.style.color = "#ff0000";
        result = false;
    } else{
        nameerr.innerHTML = "";
        result = true;
    }

    if (!emailfield.value.match(emailfieldRE)){
        emailerr.innerHTML = "Please fill in your email";
        emailerr.style.color = "#ff0000";
        result = false;
    } else{
        emailerr.innerHTML = "";
        result = true;
    }

    return result;
}

function doTotals() {
    var animals = ['Tiger_', 'bobcat_', 'elephant_', 'penguin_'];
    var priceStr = 'price';
    var quantityStr = 'quantity';
    var subtotalStr = 'subtotal';
    var total = 0;
    for (var i = 0; i < animals.length; i++) {
        var price = document.getElementById(animals[i] + priceStr).value;
        var quantity = document.getElementById(animals[i] + quantityStr).value;
        document.getElementById(animals[i] + subtotalStr)
            .innerHTML = parseInt(price) * parseInt(quantity);
        total += price * quantity;
    }
    document.getElementById("finaltotal").innerHTML = total;
}

function setup() {
    var lastCol = document.getElementById("subtotal_header");

    var theForm = document.getElementById("souvenirsorderform");

    var amounts = document.getElementsByTagName("select");
    for(var i = 0; i < amounts.length; i++){
        amounts[i].onchange = doTotals;
    }

    theForm.onsubmit = validate;
}

window.onload = setup;

</script>
<title>ITS 110 Zoo: Gift Shop</title>
</head>

<body>

<div align="center">
<table>
<tr>
<td>
<img src="logoZoo.gif" width="280" height="224" alt="Home Page" usemap="#logoZoo" style="border:none" />
<map name="logoZoo" id="logoZoo">
                <area shape="circle" coords="141,114,120" href="northAmerica.html" alt="Home Page" />
        </map>
</td>
<td>
<h1>Purchase&nbsp;</h1>
</td>
<td>
<h1>some&nbsp;</h1>
</td>
<td>
<h1>souvenirs!</h1>
</td>
</tr>
</table>
<div>

<p><b>Don't leave our site without getting your very own ITS110 Zoo souvenirs!
<br/ >
Once you've placed your order, we'll ship your items to the zoo so they're ready when you come for a visit- or we will
send it directly to your home! </b></p>
<br/ >

<h2 style="font-size:24Pt"><b>Place your order:</b></h2>

<form method="post" action="#" name="souvenirsorderform" id="souvenirsorderform" onsubmit="return validate()">

<table>

<tr>
<td><label for="Tiger_quantity"><b>Tiger Plush</b></label></td>
<td><img src="tigerplush.gif" width="200" height="200"/></img></td>
<td>$3<input type="hidden" id="Tiger_price" value="3.00"><br/>
<select id="Tiger_quantity" name="Tiger_quantity" size="1">
<option value="10">10</option>
<option value="9">9</option>
<option value="8">8</option>
<option value="7">7</option>
<option value="6">6</option>
<option value="5">5</option>
<option value="4">4</option>
<option value="3">3</option>
<option value="2">2</option>
<option value="1">1</option>
<option value="0" selected>0</option>
</select>
</td>
<td id="Tiger_subtotal"></td>
<td><label for="bobcat_quantity"><b>Monkey Plush</b></label></td>
<td><img src="monkey.gif" width="200" height="200"/></img></td>
<td>$3.50<input type="hidden" id="bobcat_price" value="3.50">
<select id="bobcat_quantity" name="bobcat_quantity" size="1"><br/ >
<option value="10">10</option>
<option value="9">9</option>
<option value="8">8</option>
<option value="7">7</option>
<option value="6">6</option>
<option value="5">5</option>
<option value="4">4</option>
<option value="3">3</option>
<option value="2">2</option>
<option value="1">1</option>
<option value="0" selected>0</option>
</select>
</td>
<td id="bobcat_subtotal"></td>
</tr>

<tr>
<td><label for="Elephant_quantity"><b>Elephant Shirt</b></label></td>
<td><img src="shirt.gif" width="200" height="200"/></img></td>
<td>$12<input type="hidden" id="elephant_price" value="12.00">
<select id="elephant_quantity" name="elephant_quantity" size="1"><br/ >
<option value="10">10</option>
<option value="9">9</option>
<option value="8">8</option>
<option value="7">7</option>
<option value="6">6</option>
<option value="5">5</option>
<option value="4">4</option>
<option value="3">3</option>
<option value="2">2</option>
<option value="1">1</option>
<option value="0" selected>0</option>
</select>
</td>
<td id="elephant_subtotal"></td>
<td><label for="penguin_quantity"><b>Penguin Shirt</b></label></td>
<td><img src="penshirt.gif" width="200" height="200" /></img></td>
<td>$12<input type="hidden" id="penguin_price" value="12.00"><br/ >
<select id="penguin_quantity" name="penguin_quantity" size="1">
<option value="10">10</option>
<option value="9">9</option>
<option value="8">8</option>
<option value="7">7</option>
<option value="6">6</option>
<option value="5">5</option>
<option value="4">4</option>
<option value="3">3</option>
<option value="2">2</option>
<option value="1">1</option>
<option value="0" selected>0</option>
</select>
</td>
<td id="penguin_subtotal"></td>
</tr>

<tr id="tablefoot"><td>Total:</td><td colspan="2" id="totalerr"><td id="finaltotal"></td></tr>

</table>

<p><b><label for="yourname">Your Full Name:</label>
<input name="yourname" id="yourname" type="text">
<span id="nameerr"></span></b></p>
<p><b><label for="youremail">Your E-Mail Address to Confirm the Order:</label>
<input name="youremail" id="youremail" type="text">
<span id="emailerr"></span></b></p>

<div><input id="submit" type="submit" value="Place Order"/>
<input id="reset" type="reset" value="Clear Order"/>
<br/ >
</form>

</body>
</html> 
```

# java - Java 并发队列

> ID：16127217
> 
> 赞同：2
> 
> 时间：2013-04-21T01:55:52.227
> 
> 标签：java, multithreading, concurrency, queue

我要做的基本上是启动新线程，将它们添加到队列中，然后在它们出列时执行其余代码。我不确定将它们添加到队列中的最佳方法是什么，以及如何在某个点暂停线程并在它们出队时通知它们。我之前并没有真正用 Java 做过太多的并发编程。任何帮助或建议将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T02:02:38.477

您可以使用[ThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)，基本上根据多个可自定义的规则创建一个线程池。

并且为了确保在您的进程继续执行剩余代码之前所有线程都完成了各自的工作，您只需调用`ThreadPoolExecutor`'`awaitTermination`方法，然后调用最终`ThreadPoolExecutor`的 '`shutdown`方法。

您还可以在调用之后发送`notify`/以唤醒其他一些与结果相关的线程。`notifyAll``awaitTermination`

[`ExecutorService`文档](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)中编写了一个示例（由 实现`ThreadPoolExecutor`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T02:13:22.977

`wait()`并且`notify()`可以用于此，例如：

```
class QueuedThread extends Thread {
    private volatile boolean wait = true; //volatile because otherwise the thread running run() might cache this value and run into an endless loop.

    public void deQueue() {
        synchronized(this) {
            wait = false;
            this.notify();
        }
    }

    public void run() {
        synchronized(this) {
            while (wait) { //You need this extra mechanism because wait() can come out randomly, so it's a safe-guard against that (so you NEED to have called deQueue() to continue executing).
                this.wait();
            }
        }
    //REST OF RUN METHOD HERE
    }
} 
```

只需`queuedThread.deQueue()`在应该出队时调用。

# javascript - grunt-contrib-concat - 如何在分隔符中包含连接路径？

> ID：16127223
> 
> 赞同：2
> 
> 时间：2013-04-21T01:57:17.903
> 
> 标签：javascript, gruntjs

鉴于这个简单的设置：

```
concat: {
        options: {
            stripBanners: false,
            separator: '\n/* path to js file */\n'
        },
        dist: {
            src: ['js/*.js'],
            dest: 'dist/<%= pkg.name %>-concat.js'
        }
    } 
```

有没有办法在每个分隔符中动态包含连接路径？

理想的连接文件应该是：

```
/* js/file1.js */
var someFunction = function(){

}

/* js/file2.js */
var anotherFunction = function(){
} 
```

我是 Grunt 的新手，任何想法都表示赞赏。

谢谢，

赛博。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-10T19:31:37.907

在流程选项中，您可以采用这种方式

```
process: function(src, filepath) {
        console.log('// Source: ' + filepath + '\n'); ;
        return '// Source: ' + filepath + '\n'+src;
      } 
```

# c++ - Visual C++ 成员变量意外且无法解释地更改

> ID：16127224
> 
> 赞同：-2
> 
> 时间：2013-04-21T01:58:22.303
> 
> 标签：c++, visual-studio-2010, pointers

我正在初始化一个 PhysWorld 类的实例，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/vVljN.jpg)

此时成员变量如下：

![在此处输入图像描述](https://i.stack.imgur.com/EsM2P.jpg)

这对我来说似乎是正确的。

然后这一行执行：

![在此处输入图像描述](https://i.stack.imgur.com/8NjlZ.jpg)

我们走进：

![在此处输入图像描述](https://i.stack.imgur.com/TGezQ.jpg)

此时，成员变量如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/KUu89.jpg)

有人可以帮我理解这里发生了什么吗？这是我在 C++ 中的第一次尝试，所以我猜这对我来说是愚蠢的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:12:13.097

您可能会在分配时丢失变量值：

```
pw = PhysWorld(...); 
```

该语句构造一个临时对象，然后调用：`pw.operator=(const PhysWorld&);`。检查你是如何实现它的（如果你这样做了）。

此外，您的函数`setRectDef`包含一个严重的错误：您正在存储指向堆栈变量的指针，该指针在离开函数范围后将无效，并且稍后访问它很可能会破坏您的堆栈。

编辑：如何处理`tmpS`。

您需要在堆上分配结构：

```
b2PolygoinShapre *tmpS = new b2PolygoinShape;
tmpS->SetAsTextBox(...);
this->rect = tmpS; 
```

# android - 如何让按钮随机点击

> ID：16127235
> 
> 赞同：0
> 
> 时间：2013-04-21T01:59:47.413
> 
> 标签：android, button, random, click

我有一个带有 x 个按钮的菜单，所有按钮都转到不同的页面问题是我必须从顶部的按钮开始 n 往下走我要让它工作而不会崩溃。如果我点击第二个或第三个按钮而不转到前面的按钮，我会崩溃。我不确定这是否是模拟器，或者是否有一些 java 代码可以让我随意点击任何按钮？谢谢。

```
package com.android.nameofmyappy;

import android.app.Activity;
import android.os.Bundle;
import android.content.Intent;
import android.view.View;
import android.widget.Button;

public class Mainmenu extends Activity { 

/** Called when the activity is first created. */
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mainmenu);

    Button Next = (Button) findViewById(R.id.bs);
    Next.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            Intent myIntent = new Intent(view.getContext(), Bs.class);
            startActivityForResult(myIntent, 0);

    Button Next = (Button) findViewById(R.id.pa);
    Next.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            Intent myIntent = new Intent(view.getContext(), Pa.class);
            startActivityForResult(myIntent, 0);

};
});
};
});
}
} 
```

这是代码的一部分，如果我从顶部按钮开始并工作到底部，我有更多具有不同 ID 的按钮并成功导致差异页面，但我希望能够随机单击任何按钮...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T02:36:04.463

执行 UI 模糊测试（与所有 UI 元素，例如按钮随机交互）的一种方法是 Monkey Runner，您可以使用 adb：

```
adb shell monkey -p <your app's package name> -v 500 
```

这将随机按下任何 500 次以测试崩溃。

# amazon-web-services - 无法下载或读取 Amazon S3 存储桶中的 Hive 输出

> ID：16127241
> 
> 赞同：1
> 
> 时间：2013-04-21T02:01:23.240
> 
> 标签：amazon-web-services, amazon-s3, hive, emr

我是 AWS 和 Hive 的新手，我正在尝试使用 Hive 分析 Google Ngrams 数据。我试图在 S3 存储桶中将表格另存为制表符分隔的 CSV，但现在我不知道如何查看或下载它以查看我的工作是否正确执行。

我用来创建表的查询是

```
CREATE EXTERNAL TABLE test_table2 (
 gram string,
 year int,
 occurrences bigint,
 pages bigint,
 books bigint
 )
ROW FORMAT DELIMITED FIELDS TERMINATED BY '\t'
LINES TERMINATED BY '\n'
STORED AS TEXTFILE
LOCATION 's3://mybucket/sub-bucket/test-table2.txt'; 
```

然后我用数据填充表格：

```
INSERT OVERWRITE TABLE test_table2
SELECT
 gram,
 year,
 occurrences,
 pages,
 books
FROM
 eng1m_5grams_normed
WHERE
 gram = 'early bird gets the worm'; 
```

查询运行良好，我认为一切正常。但是，当我在线导航到 S3 管理控制台中的存储桶时，文本文件显示为包含一堆文件的文件夹。这些文件有很长的十六进制字符名称，大小为 0 字节。

这只是表示为目录的文本文件吗？有没有办法可以查看或下载文件以查看我的查询是否有效？我试图将目录公开以便我可以下载它，但“操作”下拉菜单中的下载按钮仍然是灰色的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T00:11:05.540

在 Hive/S3 中，将 S3 目录视为表。这些目录中包含的文件是那些表（即行）的内容。目录中有多个文件的原因是多个减速器正在编写“表”。

[S3 Browser](http://s3browser.com/)是一个非常好的使用 S3 的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:01:57.023

发生的情况是，很少有行可能符合 where 子句中的谓词。所以很少（或没有）行被选择并发送到输出中（因此是零大小的文件）。EMR 没有提供下载查询结果的简单方法。

# java - Android viewBinder 在 simpleCursorAdapter 上显示图像

> ID：16127243
> 
> 赞同：0
> 
> 时间：2013-04-21T02:02:07.190
> 
> 标签：java, android, listview, android-viewbinder

我创建了一个工作 ViewBinder 与我的 simpleCursorAdapter 一起使用，并且一切正常。所需的图像按应有的方式显示等。但是当我测试我的代码时，我在我的 viewbinder 中放置了一个日志，其中显示了显示图像的标准。当我查看 logCat 时，它显示了两次迭代的结果，如下所示。（只有五个条目）。这反过来会创建我的 if 语句和结果图像显示的两次迭代。这不是显示的问题，但它会产生一些冗余，因为它会在 listView 中显示图像两次。

日志文件：

```
columnIndex=1  categoryIdentifier = Supplier
columnIndex=1  categoryIdentifier = Customer
columnIndex=1  categoryIdentifier = Other
columnIndex=1  categoryIdentifier = Other
columnIndex=1  categoryIdentifier = Other
columnIndex=1  categoryIdentifier = Supplier
columnIndex=1  categoryIdentifier = Customer
columnIndex=1  categoryIdentifier = Other
columnIndex=1  categoryIdentifier = Other
columnIndex=1  categoryIdentifier = Other 
```

运行 viewBinder 的代码是这样的：

代码：

```
private void fillData() {

    //The desired columns to be bound: 
    String[] from = new String[] { ContactsDB.COLUMN_CATEGORY, ContactsDB.COLUMN_LAST_NAME, ContactsDB.COLUMN_FIRST_NAME };
    //The XML views that the data will be bound to:
      int[] to = new int[] {R.id.contact_icon, R.id.label2, R.id.label};

   getLoaderManager().initLoader(0, null, this);
   adapter = new SimpleCursorAdapter(this, R.layout.contact_row, null, from, to, 0);
   // Set the ViewBinder to alternate the image in the listView
   adapter.setViewBinder(new SimpleCursorAdapter.ViewBinder() {
       public boolean setViewValue(View view, Cursor cursor, int columnIndex) {         
          // int viewId = view.getId();
           int categoryIndex = cursor.getColumnIndexOrThrow(ContactsDB.COLUMN_CATEGORY);

           if(columnIndex == categoryIndex)        
           {  
               String categoryIdentifier = cursor.getString(columnIndex);
               //switch categoryIdentifier
              if(categoryIdentifier.equalsIgnoreCase("Supplier")){
                  displayImage = (ImageView) view;
                  displayImage.setImageResource(R.drawable.supplier);
              }
              if(categoryIdentifier.equalsIgnoreCase("Other")){
                  displayImage = (ImageView) view;
                  displayImage.setImageResource(R.drawable.other);
              }    
               Log.v("TEST COMPARISON", "columnIndex=" + columnIndex + "  categoryIdentifier = " + categoryIdentifier);  

             return true;          
         } 
         return false;      
         } 
       });

    setListAdapter(adapter);
  } // end of fillData

  // Sort the names by last name, then by first name
  String orderBy = ContactsDB.COLUMN_LAST_NAME + " COLLATE NOCASE ASC"
  + "," + ContactsDB.COLUMN_FIRST_NAME + " COLLATE NOCASE ASC" ;

  // Creates a new loader after the initLoader () call
  @Override
  public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    //String[] projection = { ContactsDB.ROW_ID, ContactsDB.COLUMN_LAST_NAME, ContactsDB.COLUMN_FIRST_NAME };
      String[] projection = { ContactsDB.ROW_ID, ContactsDB.COLUMN_CATEGORY, ContactsDB.COLUMN_LAST_NAME, ContactsDB.COLUMN_FIRST_NAME };
    CursorLoader cursorLoader = new CursorLoader(this,
    whateverContentProvider.CONTENT_URI, projection, null, null, orderBy);
    return cursorLoader;
  } 
```

有谁知道为什么会有这种冗余？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:05:06.083

将您的列表视图更改`android:layout_height`为 match_parent

# java - 如何从方法的输入生成 sql

> ID：16127245
> 
> 赞同：1
> 
> 时间：2013-04-21T02:02:36.007
> 
> 标签：java, sql, database

我有下面的方法，它将接受两个参数-

> `final String userId- Primary Key for the database`
> 
> `final Collection<String> attributeNames- list of column names that I want to retrieve`

下面是代码

```
public Map<String, String> getAttributes(final String userId, final Collection<String> attributeNames) {

     //Below line doesn't works out the way I wanted
     String query="SELECT" +attributeNames.toString()+ ", * from test where id = "+userId+ ";";
     ResultSet result = CassandraDatastaxConnection.getInstance().getSession().execute(query);
     for (Row rows: result){
         System.out.println(rows.getString("key"));
     } 

    return attributes;
} 
```

举个例子，`userId as 40`

样品`attributeNames`看起来像这样 -

```
[account, behavior, segmentation] 
```

现在我需要生成与输入对应的 SQL。所以对于上面的例子，sql应该是这样的——

```
SELECT account, behavior, segmentation from test where id = "40"; 
```

如何从上述输入生成这样的 SQL？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:07:27.620

你可以使用类似的东西`attributeNames.toString().substring(1, attributeNames.toString().length()-1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T02:27:58.323

更改此功能

```
public Map<String, String> getAttributes(final String userId, final Collection<String> attributeNames) {
 //Below line doesn't works out the way I wanted
 String query="SELECT" +attributeNames.toString()+ ", * from test where id = "+userId+ ";";
 ResultSet result = CassandraDatastaxConnection.getInstance().getSession().execute(query);
 for (Row rows: result){
     System.out.println(rows.getString("key"));
 } 

return attributes;
} 
```

对此

```
public Map<String, String> getAttributes(final String userId, final Collection<String> attributeNames) {

 //Below line doesn't works out the way I wanted
 StringBuilder sb = new StringBuilder(attributeNames.size());

 for(int i = 0; i<attributeNames.size();i++)
 {
     sb.append(attributeNames.get(i));
     if(i != attributeNames.size() - 1)
          sb.append(",");
 }
 String query="SELECT" +sb.toString()+ " from test where id = "+userId+ ";";
 ResultSet result = CassandraDatastaxConnection.getInstance().getSession().execute(query);
 for (Row rows: result){
     System.out.println(rows.getString("key"));
 } 

return attributes;
} 
```

修改后的函数通过属性名称循环运行，并将查询部分构造为 name1、name2、name3 等，然后将其添加到查询正文中。希望这能解决您的问题。

# python - Android 设备的最佳压缩方法

> ID：16127247
> 
> 赞同：0
> 
> 时间：2013-04-21T02:02:45.097
> 
> 标签：python, python-2.7, compression

我正在开发一个需要在服务器上压缩文件并将压缩文件压缩到 Android 移动设备的应用程序。服务器将使用 python 脚本压缩文件。将压缩文件发送到 Android 设备并在手机上解压缩文件的最快最适合的推荐压缩方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T06:58:21.663

最快的是级别 1 的[zlib.compress](http://docs.python.org/2/library/zlib.html)。我不知道您所说的“最合适”是什么意思。

# django - Django 中与路径无关的链接的最佳实践？

> ID：16127254
> 
> 赞同：0
> 
> 时间：2013-04-21T02:05:13.897
> 
> 标签：django

在 Django 应用程序中编写 html 链接的最佳方法是什么，该应用程序旨在分发给其他用户，并且无法提前知道应用程序的最终 URL 路径是什么？

以下是我目前正在使用的一些链接：

```
<li><a href="/results/all_runs/">By Date</a></li>
<li><a href="/results/trends/by_app">Trends</a></li> 
```

当应用程序在 mysite/urls.py 中像这样配置为位于根路径中时，这可以正常工作。

```
url(r'^', include('myapp.urls')), 
```

但是，如果您更改 mysite/urls.py 以在不同的路径中运行应用程序：

```
url(r'^myapp/', include('myapp.urls')), 
```

然后链接断开。这似乎应该是一个常见的场景，但我一直无法发现如何干净地解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:11:52.920

你想要[url](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#url)标签：

> 返回与给定视图函数和可选参数匹配的绝对路径引用（没有域名的 URL）。这是一种在不违反 DRY 原则的情况下输出链接的方法，因为必须在模板中硬编码 URL

# c# - C# 让 StreamWriter 写入文本文件

> ID：16127256
> 
> 赞同：0
> 
> 时间：2013-04-21T02:05:54.097
> 
> 标签：c#, windows, forms

我已经多次复习教授的讲座，复习课本，在网上无休止地搜索答案，并尝试了所有合理的建议解决方法。我当然错过了一些东西。地址簿写入列表框，文件被创建，但名称和地址没有写入文件。对我所缺少的任何帮助将不胜感激。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System;
using System.Drawing;
using System.Collections;
using System.ComponentModel;
using System.Data;
using System.IO;

namespace LAB7A
{
    public partial class Form1 : Form
    {

        public Form1()
        {
            InitializeComponent();
        }

        List<Person> people = new List<Person>();
        class Person
        {
            public string Name
            {
                get;
                set;
            }

            public string Email
            {
                get;
                set;
            }
        }

        private void Form1_Load(object sender, EventArgs e)
        {

            try
            {
               StreamWriter address = new StreamWriter("addressbook.txt");
               address.WriteLine(textBox1.Text, textBox2.Text);
            }
            catch (DirectoryNotFoundException exc)
            {
                MessageBox.Show("Directory Could Not Be Found");
            }
        }

        private void button1_Click(object sender, System.EventArgs e)

        {

            Person p = new Person();
            p.Name = textBox1.Text;
            p.Email = textBox2.Text;
            people.Add(p);
            listBox1.Items.Add(p.Name);
            listBox1.Items.Add(p.Email);

            //StreamWriter address.WriteLine(textBox1.Text);
            //address.WriteLine(textBox2.Text);
            //listBox1.Items.Add(textBox1.Text);
            //listBox1.Items.Add(textBox2.Text);
        }

        private void listBox1_SelectedIndexChanged(object sender, System.EventArgs e)
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T04:00:17.127

当所有字段为空时，您在表单加载时将数据保存到文件。在您有机会在文本字段中键入值后，将编写代码移至某个按钮单击处理程序。

您还使用了将格式作为第一个参数的[TextWriter.WriteLine方法的版本。](http://msdn.microsoft.com/en-us/library/60scc1f1.aspx)除非您真的想这样做，否则 2 个单独的`WriteLine`调用或一个具有正确格式字符串的调用可能会满足您的需求。

还要确保关闭/处置您的流编写器，以便它提交对文件的更改并关闭文件。通常的方法是使用`using`：

```
using (var writer = new StreamWriter("addressbook.txt"))
{
     writer.WriteLine("First textbox:{0}, second:{1}", textBox1.Text, textBox2.Text);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T02:10:55.327

尝试在流上调用 Flush 或 Close。最佳做法是将其包装在 using 中。

```
using(StreamWriter address = new StreamWriter("addressbook.txt"))
{
    ...
} 
```

[http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)

向下滚动到示例代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T03:05:38.720

你忘了添加完整的地址，试试这个：

```
 private void Window_Loaded(object sender, RoutedEventArgs e)
    {

        try
        {

           using (StreamWriter address = new StreamWriter("d:\\addressbook.txt"))//Add correct address
            {
              address.WriteLine(textBox1.Text + textBox2.Text);
              //OR
              address.WriteLine(string.Format("Name:{0}, Email:{1}", textBox1.Text,    textBox2.Text));
            }
        }
        catch (DirectoryNotFoundException exc)
        {
            MessageBox.Show("Directory Could Not Be Found");
        } 
    } 
```

# javascript - Object.create 没有使用模块模式创建新对象

> ID：16127258
> 
> 赞同：4
> 
> 时间：2013-04-21T02:06:09.137
> 
> 标签：javascript

如果我在对象文字上使用 Object.create() 创建多个对象，我会得到多个不共享属性值的唯一对象。但是，当我在从模块返回的对象上使用 Object.create() 时，看起来它们共享相同的引用？这是为什么？

## #1 模块：

```
var objModule = (function () {
  var name = "module 1";
  var setName = function( strName ) {
    name = strName;
  };
  var getName = function() {
    return name;
  };

  return {
    setName: setName,
    getName: getName
  };
}());

var objModule2 = Object.create(objModule);
objModule2.setName("module 2");

console.log(objModule.getName()); // WRONG prints "module 2"
console.log(objModule2.getName()); // prints "module 2" 
```

## #2 字面量：

```
var objLiteral = {
  name : "literal 1"
};
var objLiteral2 = Object.create(objLiteral);
objLiteral2.name = "literal 2";

console.log(objLiteral.name); // prints "literal 1"
console.log(objLiteral2.name); // prints "literal 2" 
```

## 编辑

## #3 模块“构造函数”：

```
var module = function () {
  var name = "module 1";
  var setName = function( strName ) {
    name = strName;
  };
  var getName = function() {
    return name;
  };

  return {
    setName: setName,
    getName: getName
  };
};

var objModule1 = module();
var objModule2 = module();
objModule2.setName("module 2");

console.log(objModule1.getName()); // prints "module 1"
console.log(objModule2.getName()); // prints "module 2" 
```

## 编辑

如果我像构造函数一样使用模块（如@Matt Browne 建议的那样）并创建 2 个对象，结果就像使用对象文字一样。我想了解的是为什么模块示例 #1 的行为与模块示例 #3 不同？

## 编辑 2

正如@ben336 解释的那样，代码：

```
var objModule2 = Object.create(objModule); 
```

将 objModule2 的原型设置为 objModule。这在示例 #3 中不会发生，因此这两个对象不共享相同的闭包属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T02:10:04.480

### 示例 1

的第一个参数`Object.create`指定正在创建的新对象的原型对象。由于在您的第一个示例中，您将现有对象设置为新对象的原型，因此当您调用函数时，它们会修改您存储在闭包中的变量，然后您的现有对象和新的那一个。

这里要理解的两个关键点是：

1.  这段代码

    ```
    var objModule = function () {
      var name = "module 1";
      var setName = function( strName ) {
        name = strName;
      };
      var getName = function() {
        return name;
      };

      return {
        setName: setName,
        getName: getName
      };
    }(); 
    ```

    使用函数 getName 和 setName 创建一个闭包，该函数持有对`name`变量的访问权限。

2.  这些函数是 objModule 的属性，当您调用时，`Object.create`您将 objModule 设置为 objModule2 的原型，并且它也可以访问这些函数。

由于 2 个对象共享这些函数，并且它们可以访问模块创建的闭包，而不是将 name 属性本地存储在任一对象上，因此当您使用一个对象调用 set 函数时，它将更新闭包并因此更新两个对象.

### 示例 2

在第二个示例中，您还将对象设置为新对象的原型，但是您在本地对象上声明了一个属性，该属性将覆盖原型上的属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T02:10:06.870

`objModule2.setName`指与 相同的功能`objModule.setName`，但具有不同的`this`。（`Object.create`不复制任何东西）
调用它将设置相同的局部变量。

`objLiteral2.name = "literal 2"`在 上创建一个新属性`objLiteral2`，它会隐藏继承的`objLiteral.name`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-21T02:36:28.993

`()`我认为通过删除函数末尾的括号`objModule`并将其重命名为清楚地表明它是构造函数的内容，可以更好地完成您在这里要做的事情，即这样做：

```
var makeObjModule = function() {
  var name = "module 1";
  var setName = function( strName ) {
    name = strName;
  };
  var getName = function() {
    return name;
  };

  return {
    setName: setName,
    getName: getName
  };
}; //removed parentheses here 
```

（就我个人而言，我也会使用该`function objModule()`语法，但这是一个单独的问题，也是个人喜好的问题。）

然后你可以创建你的实例：

```
var objModule = makeObjModule();
var objModule2 = makeObjModule(); 
```

该`Object.create`方法当然也是解决此问题的有效方法；有关使这项工作的更多详细信息，请参阅@ben336 的答案。

就我个人而言，我发现`Object.create`在进行继承时比在进行这样的简单构造时更有用。（有些人在使用原型继承时也更喜欢使用`new`关键字，但由于您使用的是模块模式，我认为使用上面显示的“制造商”/构造函数更容易。）

# python - Python TCP & UDP 代理/中继

> ID：16127260
> 
> 赞同：1
> 
> 时间：2013-04-21T02:06:27.387
> 
> 标签：python, linux, sockets

操作系统：CentOS
Python：2.4 和 2.7

我正在尝试为我的应用程序构建 TCP 和 UDP 流量的中继或代理。
我的设置是 app1 通过不断发送 UDP 数据包来验证 app2 是否在线。
一旦 app1 验证 app2 在线，它就会通过 TCP 协议发送 app2 数据包。

到目前为止，这是我的代码：

```
#-------------------------------------
#SOCK_DGRAM --UDP
u_localPort = 20006
u_remotePort = 20006
u_remoteHost = "x.x.x.x"

u_sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
u_sock.bind(('', u_localPort))
u_knownClient = None
u_knownServer = (u_remoteHost, u_remotePort)
#-------------------------------------

#-------------------------------------
#SOCK_STREAM --TCP
t_localPort = 10006
t_remotePort = 10006
t_remoteHost = "x.x.x.x"

#client
c_tcp = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
c_tcp.connect((t_remoteHost, t_remotePort))

#server
s_tcp = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s_tcp.bind(('', u_localPort))
s_tcp.listen(1)

conn, addr = s_tcp.accept()
#-------------------------------------

while True:
    u_data, u_addr = u_sock.recvfrom(4096)
    if u_knownClient is None:
        u_knownClient = u_addr
    if u_addr == u_knownClient:
        u_sock.sendto(u_data, u_knownServer)
    else:
        u_sock.sendto(u_data, u_knownClient)

    data = conn.recv(1024)
    if not data: break
    print "received data:", data
    c_tcp.send(data)  # echo 
```

使用此代码，UDP 数据似乎可以正确中继。但 TCP 不是。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T06:23:41.310

我在任何地方都看不到您使任何套接字成为[非阻塞的](http://docs.python.org/2/library/socket.html#socket.socket.setblocking)。因此，任何对 recv 或 recvfrom 的调用都会挂起，直到实际收到数据。

因此，当您进入主循环时，您将永远阻塞对`usock.recvfrom(4096)`. 在您实际收到一个 UDP 数据包之前，您的代码不会使其`conn.recv(1024)`排队。

考虑使用非阻塞套接字（具有正确的[选择/轮询](http://docs.python.org/2/library/select.html#select.select)语义）。

# asp.net-mvc-4 - MVC4 下拉列表

> ID：16127261
> 
> 赞同：0
> 
> 时间：2013-04-21T02:06:51.097
> 
> 标签：asp.net-mvc-4, drop-down-menu

当用户从任何一个下拉列表中选择某个值时，我需要将三个下拉列表中的值传递给控制器​​。我尝试过这样，但仅传递所选下拉列表中的值，其他值为空值，任何帮助将不胜感激。

看法

```
 @@using (Html.BeginForm("GetFilterValues","Home",FormMethod.gET))
          {   
            @Html.DropDownList("FClass", ViewBag.Market as SelectList,  new { id = "Market" , onchange = "$(this).parents('form').submit();" })
           }

      @using (Html.BeginForm("GetFilterValues","Home",FormMethod.Get))
                    {
                          @Html.DropDownList("FClass", ViewBag.Class as SelectList,  new { id = "FClass" , onchange = "$(this).parents('form').submit();" })
                      }

              </td>
                        <td>
                 @Html.Label("Status")
                            </td>
               <td>
                    @using (Html.BeginForm("GetFilterValues","Home",FormMethod.Get))
                    {
                                                 @Html.DropDownList("Status", ViewBag.Status as SelectList,  new { id = "Status" , onchange = "$(this).parents('form').submit();" })

                    } 
```

控制器 [Httpget]

```
 public void GetFilterValues()
       {
        string  market = this.Request.Form.Get("Market");
        string fclass = this.Request.Form.Get("FClass");
        string status = this.Request.Form.Get("Status");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T03:52:32.717

通过 POST 尝试单个表单，并使用这样的 FormCollection 按名称提取值...

**看法：**

```
@using (Html.BeginForm("GetFilterValues","Home", FormMethod.Post))
    {     
          @Html.DropDownList("nameMarket", ViewBag.Market as SelectList,  new { id = "Market" , onchange = "$(this).parents('form').submit();" })
          @Html.DropDownList("nameClass", ViewBag.Class as SelectList,  new { id = "FClass" , onchange = "$(this).parents('form').submit();" })
          @Html.DropDownList("nameStatus", ViewBag.Status as SelectList,  new { id = "Status" , onchange = "$(this).parents('form').submit();" })
    } 
```

**控制器：**

```
[HttpPost]
public void GetFilterValues(FormCollection collection) {
    string  market = Convert.ToString(collection["nameMarket"]);
    string fclass = Convert.ToString(collection["nameClass"]);
    string status = Convert.ToString(collection["nameStatus"]);
} 
```

# android - NetworkInterface.getNetworkInterfaces() 抛出带有空消息字符串的异常

> ID：16127263
> 
> 赞同：6
> 
> 时间：2013-04-21T02:07:36.510
> 
> 标签：android, ip-address

我拿起了我的一些旧代码进行重建，而曾经在我的平板电脑和手机上工作的方法之一不再有效。我正在尝试使用我在此处获取的例程来获取我的 IP 地址。

当程序执行第 4 行时（以“for (Enumeration...”开头），它立即跳转到异常捕获部分。异常没有消息，对于字符串 ex.getMessage() 返回 null。异常编号为 830034796568（十进制）。

这是代码。如前所述，这在一年前工作得很好。

谢谢你的帮助！

```
public String getLocalIpAddress() {
    String address= null;
    try {  
        for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
            NetworkInterface intf = en.nextElement();
            for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                InetAddress inetAddress = enumIpAddr.nextElement();
                address = new String(inetAddress.getHostAddress().toString());
                if (!inetAddress.isLoopbackAddress() && address.length() < 18) {
                    return inetAddress.getHostAddress().toString();
                }
            }
        }
    } catch (SocketException ex) {
        String msg = ex.getMessage();
        //do nothing
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-05-21T13:58:10.140

只是为了澄清一个完整的答案。

```
NetworkInterface.getNetworkInterfaces() 
```

`SocketException`如果应用程序缺少此权限，则抛出`AndroidManifest.xml`

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

在我的测试中（在 Android 4.4.2 上）`android.permission.ACCESS_NETWORK_STATE`可以跳过。

# html - 从横向更改为纵向时强制 Ipad 缩小

> ID：16127264
> 
> 赞同：0
> 
> 时间：2013-04-21T02:07:52.593
> 
> 标签：html, css, wordpress, ipad, scale

我创建了一个响应式站点，它看起来不错，最小为 1000 像素，并且比这更小的屏幕被重定向到单独的移动站点。我故意希望 ipad 可以查看主站点。当您在 Ipad 上以横向模式加载站点时，它是完美的，但是当它转动时它太放大了。它有一种方法使用元标记和比例来强制比例在转动时说 0.75？

我尝试过环顾四周，如果首先以纵向加载，则可以使站点加载缩小，但无法在转弯时强制它缩小。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T07:41:37.507

我会给这个链接一个镜头。[https://stackoverflow.com/a/6379407/1011998](https://stackoverflow.com/a/6379407/1011998)从本质上讲，使用一些 HTML 元标记和一段 JavaScript 代码，您应该可以顺利实现优雅的缩放。

# css - 导航栏上的强制行（无序列表）？

> ID：16127267
> 
> 赞同：0
> 
> 时间：2013-04-21T02:08:23.687
> 
> 标签：css, navigation, html-lists, nav, navbar

我的导航栏目前正在将我所有的文本一起处理。我有下拉列表的“标题”，标题没有强制一行。

HTML 如下所示：

```
<li><p>Services</p><ul>
    <li id="ITServices"><p>IT Services</p></li>
    <li><a href="port_collab_work.html">Portals, Collaboration & Workflows</a></li>
    <li><a href="business_intel_dash.html">Business Intelligence & Dashboards</a></li>
    <li><a href="mobile_development.html">Mobile Development</a></li>
    <li><a href="custom_application_development.html">Custom Application Development</a></li>
    <li id="healthcare"><p>Healthcare Services</p></li>
    <li><a href="healthcare.html">EMR, ICD 10 and Healthcare Consulting</a></li>
</ul></li> 
```

CSS 看起来像这样：

```
#healthcare p {
    width: 280px;
    margin-left: 0px;
    padding: 0px;
    display: inline;
}

#ITServices p {
    width: 280px;
    margin-left: 0px;
    padding: 0px;
    display: inline;
}

.navbar li:hover ul {
    left: 15px;
    top: 40px;
    background: #7FBA00;
    padding: 1px;
    width: 280px;
    border: none;
    text-align: left;
}

.navbar li:hover ul a {
    margin: -7px -10px -7px -15px;
    text-align: left;
    padding: 0px 0px 0px 10px;
    display: block;
    font-size: 11px;
    width: 259px;
    line-height: 25px;
    color: #000;
    background-color: #F0F0F0;
    text-decoration: none;
    border-left: 10px solid #7FBA00;
    border-bottom: 1px solid transparent;
    border-right: 1px solid transparent;
    border-top: 1px solid transparent;
}

.navbar li:hover ul a:hover {
    background: #7FBA00;
    border-left: solid 10px #fff;
    border-top: solid 1px #fff;
    border-bottom: solid 1px #fff;
    width: 260px;
} 
```

啊！对？我试图让它全部显示在一个列表中，每个 li 元素之后基本上都有换行符。帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T02:48:02.837

基本上，一条规则凌驾于你的风格之上。`display`调用的属性`block`使元素表现得像块元素，从而覆盖整行。

您的使用可能如下，所以试试这个

```
li > ul li { display: block; } 
```

# c# - 如何从基类型中声明的方法返回派生类型

> ID：16127268
> 
> 赞同：2
> 
> 时间：2013-04-21T02:08:28.643
> 
> 标签：c#, .net, fluent, derived-class

我在基类中有一个方法，它应该将类型的 self 实例作为派生类型返回。例如：

```
class A
{
   public string X { get; set; }

   public A SetX(string x)
   {
       this.X = x;
       return this;
   }
}

class B:A
{
   public string Y { get; set; }

   public B SetY(string y)
   {
       this.Y = y;
       return this;
   }
} 
```

然后我想流利地调用方法如下：

```
B b = new B();

b.SetX("x")
 .SetY("y"); 
```

但是这里`SetX`返回的是 A 的类型，并且 A 没有任何名为 的方法`SetY`。我该如何设计这样的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T02:12:45.693

一种选择是声明`SetX`为通用扩展方法：

```
public static T SetX<T>(this T a, string x) where T : A
{
    a.X = x;
    return a;
} 
```

然后你可以这样称呼它：

```
var newB = b.SetX("foo"); // returns type B 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T02:34:14.720

你可以做一些不同的事情来实现这一点。

第一种是使用泛型，使用类型参数来指定实例的真实类型：

```
public class A<T> where T:A<T>
{
    public string X { get; private set; }

    public T SetX(string x)
    {
        X = x;
        return (T) this;
    }
}

public class B<T> : A<T>
    where T : B<T>
{
    public string Y { get; private set; }

    public T SetY(string y)
    {
        Y = y;
        return (T) this;
    }
}

public class A : A<A>
{
}

public class B : B<B>
{
} 
```

第二个是，在你的类中，使用关键字`B`隐藏方法，如下所示：`A``new`

```
class A
{
    public string X { get; set; }

    public A SetX(string x)
    {
        this.X = x;
        return this;
    }
}

class B : A
{
    public string Y { get; set; }

    public new B SetX(string x)
    {
        return (B) base.SetX(x);
    }

    public B SetY(string y)
    {
        this.Y = y;
        return this;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T02:09:34.423

使用受保护的：

```
protected string X { get; set; }
protected A SetX(string x)
{
   this.X = x;
   return this;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T05:03:20.267

这个对我有用：

```
(b.SetX("1") as B).SetY("2"); 
```

# css - 悬停时背景位置发生变化

> ID：16127270
> 
> 赞同：1
> 
> 时间：2013-04-21T02:09:24.350
> 
> 标签：css, background, hover, position, background-position

我一直有一个CSS问题。我有一个 div，其中包括一个图像 div、一个包含链接的 div 和一个包含描述的 div，分别命名为侧边栏、sbpic、lks 和 desc。

对于图像，这是我目前拥有的代码：

```
#sbpic {
background-image:url('{image:Sidebar1}');
background-attachment:fixed;
background-repeat:repeat;
background-position:0px 50px;
position:fixed;
width:230px;
height:130px;
margin:10px 0px 0px -25px;
-webkit-transition: all 1s ease-out;
-moz-transition: all 1s ease-out;
transition: all 1s ease-out;  
}

#sidebar:hover #sbpic {
margin-top:305px;
-webkit-transition: all 1s ease-out;
-moz-transition: all 1s ease-out;
transition: all 1s ease-out;  
} 
```

它在预览中运行良好，您可以[在此处看到](http://oi34.tinypic.com/33ykrjn.jpg)

但是当我打开我的网站时，这就是[这里的结果](http://i36.tinypic.com/14v4nrk.jpg)

我尝试使用#sbpic:hover 并更改那里的背景位置，我还尝试更改#sidebar:hover #sbpic 上的背景位置。第一个只有在我将鼠标悬停在图片上时才有效，而后者会使图片在到达底部时偏离 50px。

有什么建议么？

# r - 重现 ggplot2 geom_linerange() 示例

> ID：16127277
> 
> 赞同：1
> 
> 时间：2013-04-21T02:10:19.850
> 
> 标签：r, ggplot2

我正在尝试制作一个最终看起来像这样的情节：

![geom_linerange() 示例](https://i.stack.imgur.com/SQsTb.png)

但是，我希望每条线的端点代表每组数字的第 25 个百分位数（底部）和第 75 个百分位数（顶部）。中间的点应该是中位数。我可以用这些数据制作箱线图`geom_boxplot()`，但我认为这看起来会好很多。无论如何，我无法完成这项工作。现在我收到此错误消息：

```
Warning message:
In data.frame(x = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,  :
  row names were found from a short variable and have been discarded 
```

我的数据如下所示：

```
> str(outbtu)
'data.frame':   86400 obs. of  2 variables:
 $ bias: num  -0.248 -0.759 -0.471 -0.304 -0.358 ...
 $ cnd : int  1 1 1 1 1 1 1 1 1 1 ...
> outbtu[1:10,]
          bias cnd
1  -0.24756150   1
2  -0.75906264   1
3  -0.47142178   1
4  -0.30395184   1
5  -0.35756559   1
6   0.04072695   1
7  -0.45026249   1
8  -0.20509166   1
9  -0.24816174   1
10 -0.01581920   1 
```

其中，最终`cnd`达到 27，但 27 个值中的每一个都有 3200 个观测`cnd`值，因此您在这里显然看不到。`bias`我想要这张图上的 27 个线段，一个对应于27 个值中每一个的变量的第 25、50 和 75 个百分位数`cnd`。

这是我的代码：

```
p <- ggplot(outbtu,aes(factor(cnd),bias,
                   ymin=quantile(bias,.25),
                   ymax=quantile(bias,.75)))
p <- p + geom_linerange()
p + geom_pointrange() 
```

老实说，我什至不知道我是否接近，这正是我可以从 ggplot 帮助页面中得出的结论。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T10:29:21.853

```
set.seed(42)
DF <- data.frame(bias=rnorm(2700),cnd=1:27)
DF$cnd <- factor(DF$cnd)

library(ggplot2)
ggplot(DF,aes(x=cnd,y=bias,colour=cnd)) + 
  stat_summary(fun.data=function(x) {
    res <- quantile(x,probs=c(0.25,0.5,0.75))
    names(res)<-c("ymin","y","ymax")
    res}) 
```

或更短：

```
ggplot(DF,aes(x=cnd,y=bias,colour=cnd)) + 
  stat_summary(fun.data=median_hilow,conf.int=0.5) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T04:48:57.413

您需要分别计算所有统计数据，然后绘制获得的中位数和分位数。否则`ymin=quantile(bias,.25)`返回大于 的向量`factor(cnd)`。

这是一个例子

```
# Generate sample data
df <- data.frame(a=rnorm(100), b=sample(1:5, 100, replace=T))
# Calculate statistics for each group of b values
df2 <- t(sapply(unique(df$b), function(x) {
  s <- summary(df[df$b == x, "a"])[c(2,3,5)]
  c(x, s)
}))
# Convert output matrix to data.frame since ggplot works only with data.frames
df2 <- as.data.frame(df2)
# Rename column names for clarity
colnames(df2) <- c("b", "Q1", "Median", "Q3")
# Draw obtained values
ggplot(df2, aes(x=b, y=Median, ymin=Q1, ymax=Q3)) + geom_pointrange() 
```

# javascript - 使用AngularJs“传输”指令的最佳方式是什么

> ID：16127283
> 
> 赞同：1
> 
> 时间：2013-04-21T02:10:57.877
> 
> 标签：javascript, angularjs, angularjs-directive

我有一个具有以下结构的小部件（它是“计划选择器”简历）：

```
<div>
  <ul>
    <li resume="to" ng-repeat="item in items"></li>
  </ul>
  <div class="total"></div>
  <ul>
    <li resume="from" ng-repeat="item in items"></li>
  </ul>
</div> 
```

我的指令如下：

```
plans.directive('resume', function() {
  return {
    restrict: 'A',
    template: '<h3>{{step.name}}</h3><div>{{val}}</div>',
    link: function($scope, element, attrs, controller) {}
  };
}); 
```

笔记：

*   `plans`是一个`angular.module('Plans')`
*   `items`是通过AJAX加载的一些数据，每个item都有一个`selected`属性
*   它们与将要选择的项目共享相同的控制器，即`PlansCtrl`

我想要的是：

当用户完成选择项目（设置每个“选定”）时，它只会在“to”中显示，当它被选中时，它只会在“from”中显示，当它没有被选中时。我不想硬编码任何东西，因为一切都是使用 AJAX 安装的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:43:27.040

假设我对您的理解正确，最好像这样使用[过滤器过滤器](http://docs.angularjs.org/api/ng.filter%3afilter)：

[http://jsfiddle.net/qbGeG/](http://jsfiddle.net/qbGeG/)

```
<div ng-app ng-controller="x">
    <b>selected</b>
    <ul>
        <li ng-repeat="item in items | filter:{selected:true}" ng-click="item.selected = !item.selected">{{item.name}}</li>
    </ul>
    <div class="total"></div>
    <b>unselected</b>
    <ul>
        <li ng-repeat="item in items | filter:{selected:!true}" ng-click="item.selected = !item.selected">{{item.name}}</li>
    </ul>
</div> 
```

如果您需要将该功能作为指令，那么最好将整个`li`元素替换为以下内容：`<selectableList source="items" />`您的指令只是使用的地方`filter`，`ngClick`就像我在上面所做的那样。

# ruby - 设置运动布局会导致路径错误

> ID：16127288
> 
> 赞同：0
> 
> 时间：2013-04-21T02:12:09.233
> 
> 标签：ruby, rubymotion

[我遵循了运动布局](https://github.com/malkomalko/motion-layouts)的 gem 设置说明……超级简单。但是，提供的路径不起作用...在控制台中引发错误。路径如下：

```
 app.files.unshift(Dir.glob(File.join(app.project_dir, 'vendor/motion-layouts/lib/**/*.rb'))) 
```

这些文件都在 lib 目录中，但它们没有被加载。运行 rake 这些是错误：

```
 uninitialized constant Motion::Project (NameError)
/blah/blah/blah/vendor/motion-layouts/lib/motion-layouts.rb must be required within a  RubyMotion project Rakefile. (RuntimeError)
2013-04-20 18:58:51.675 SuperCast[81864:c07] *** Terminating app due to uncaught exception 'RuntimeError', reason: '/blah/blah/blah/vendor/motion-layouts/lib/motion-layouts.rb must be required within a RubyMotion project Rakefile. (RuntimeError) 
```

任何人都知道这里的问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:36:58.853

问题中的代码来自 gem 的一个分支。它的旧。当我不得不从 github 克隆文件时，我很怀疑。[宝石](https://github.com/qrush/motion-layout)是要走的路。

# jquery - jQuery 效果从另一个元素中打开一个对话框并将其关闭到该元素中

> ID：16127291
> 
> 赞同：0
> 
> 时间：2013-04-21T02:12:14.843
> 
> 标签：jquery, jquery-ui, jquery-effects

我想`dialog`从另一个元素中显示我的 jQuery 并将其隐藏到该元素中。

我应该如何实现这个？这样做有什么效果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:38:56.910

我只需要使用方法的 object 参数的`position`,`show`和properties就可以了。`hide``.dialog`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T02:34:24.683

您可以将效果绑定到导致对话框显示的事件上。您甚至可以创建自定义事件。这是关于这个主题的一个很好的解释：[http ://learn.jquery.com/events/handling-events/](http://learn.jquery.com/events/handling-events/)

# antlr - 如何在 ANTLR4 中编写类似于“任何字符，但除外......”的规则？

> ID：16127292
> 
> 赞同：1
> 
> 时间：2013-04-21T02:12:27.470
> 
> 标签：antlr

例如在 rfc2047

```
token = 1*<Any CHAR except SPACE, CTLs, and especials>
especials = "(" / ")" / "<" / ">" / "@" / "," / ";" / ":" / "
<"> / "/" / "[" / "]" / "?" / "." / "=" 
```

为令牌规则编写所有允许的字符或如何组合特殊规则？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T02:31:53.657

ANTLR 4 包括类似于正则表达式的*包容性集合表示法。*然后可以使用`~`运算符来否定该集合。这里有两个例子显示了一个包容性和排斥性的集合。

```
LETTER : [a-zA-Z];
NOT_LETTER : ~[a-zA-Z]; 
```

# php - 如何让我的自定义字段仅在其中写入内容时显示 - Wordpress？

> ID：16127294
> 
> 赞同：1
> 
> 时间：2013-04-21T02:12:42.230
> 
> 标签：php, wordpress, custom-fields

我正在使用一些自定义字段自定义 Wordpress 主题。为此，我使用插件“高级自定义字段”，但我希望它仅在其中写入内容时才显示这些字段。这是我用来显示自定义字段的代码：

```
<p class="tittelboks">Artikkelforfatter:</p>
        <?php if( get_field('artikkelforfatter') )
        {
        echo '<p>' . get_field('artikkelforfatter') . '</p>';
        } ?> 
```

如果在元框中写入了某些内容，如何更改代码以便它只回显信息和标签（在本例中为 .tittelboks）？

迈克尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T02:35:47.163

```
<?php if( $field = get_field('artikkelforfatter') ): ?>
    <p class="tittelboks">Artikkelforfatter:</p>
    <p><?php echo $field; ?></p>
<?php endif; ?> 
```

这是执行 if 语句的不同方式，因此您不必将 HTML 括在引号中并担心转义。`get_field('artikkelforfatter')`中间的两行只有在返回值或 true时才会打印出来。该值将分配给`$field`变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T02:26:33.057

像这样的东西应该工作：

```
<?php
$artikkel = get_field( 'artikkelforfatter' );

if ( ! empty( $artikkel ) ) {
?>
<p class="tittelboks">Artikkelforfatter:</p>
<p><?php echo $artikkel; ?></p>
<?php
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T12:39:00.067

要使用和显示自定义字段需要，您可以尝试将其放入循环中。

```
<?php $what_name_you_want=get_post_meta($post->ID,'Your Custom Field Name',true); ?>

    <?php echo $what_name_you_want; ?>// This call the value of custom field 
```

只更换

> what_name_you_wan 用你最喜欢的名字

和

> 您的自定义字段名称与自定义字段的名称

如果自定义字段的值为空，则回显将为空。

告诉我它是否工作

# html - Windows 8 html5/JS 应用程序中的网络存储

> ID：16127299
> 
> 赞同：1
> 
> 时间：2013-04-21T02:13:42.083
> 
> 标签：html, windows-8, web-storage, construct-2, windows-store

这对我来说是一个很难追查的问题。我正在创建一个要部署到 windows 8 市场的 windows 8 HTML5/JS 应用程序。我正在使用construct2 游戏引擎来生成html5/js 代码。

在传统的 Html5 网站中，如果我要将数据写入 Web 存储，该数据的处理方式类似于缓存数据，并且在用户清除缓存时很容易被删除（我相信？）

我的问题是，在 Windows 8 html5/js 应用程序中。当用户进入并清除他们的 Internet Explorer 缓存时，写入 webstorage 的数据是否容易被清除，或者 webstorage 数据是否针对 windows8 应用程序打包不同，因此对于应用程序是唯一的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T03:45:37.647

Construct 2 WebStorage 的“本地”子集映射到 HTML 5 [localStorage](http://dev.w3.org/html5/webstorage/#the-localstorage-attribute)，后者又映射到Windows 8 中的[applicationData.localFolder](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localfolder.aspx)，并在每个应用程序的基础上进行维护。您可以通过 HTML5 localStorage 为每个应用存储多达 10MB 的空间（从而构建 2 WebStorage 的*设置本地值*操作。

它不受您在 Internet Explorer 中所做的操作的影响，即使您更新应用程序，它也会持续存在。

Construct 2 还公开了[sessionStorage](http://dev.w3.org/html5/webstorage/#the-sessionstorage-attribute)，但正如您对 Windows 8 应用程序所期望的那样，存储仅在应用程序的当前执行期间持续存在，就像它只在传统 Web 场景中的当前浏览器会话中持续存在一样。

# html - CSS导航栏消失在另一个div下

> ID：16127301
> 
> 赞同：4
> 
> 时间：2013-04-21T02:14:42.273
> 
> 标签：html, css, nav

我有这个 html 代码

```
<div id="navbar">
    <ul>
        <li><a href="#">Page1</a></li>
        <li><a href="#">page2</a></li>
    <li id="NavItem">
        <a href="#">page3</a>
        <div id="PopOver">Some text here<br>Some text here<br>Some text here<br>Some text here<br>Some text here<br>Some text here<br>Some text here</div>
    </li>
        <li><a href="#">page4</a></li>
    </ul>
</div>

<div id="banners">
    <div class="wrap">
        <div class="left"><img src="http://www.mountainecho.bizland.com/banex1.jpg"></div>
        <div class="right"><img src="http://www.mountainecho.bizland.com/banex1.jpg"</div>
    </div>
</div> 
```

和CSS代码

```
#navbar { position: relative; margin: 3px; }
#navbar ul { padding: 0; margin: auto; background: #f0f0f0 url(../images/1px.png) repeat-x 0 -441px; padding: 4px 0 4px 0; }
#navbar li { display: inline; margin-right: 80px; }
#navbar li a { font-family: EqualSansDemo; font-size: 1.6em; color: #555555; text-shadow: 1px 1px 0px #fff; }   
#navbar li a:hover { color: #0071e4; } 

#PopOver {
position:absolute; 
border:2px solid #07B1F1; 
width:170px; 
height:auto; 
padding:15px 5px 10px 5px;
display:none;
top:30px; 
left:229px; 
background-color:#FFFFFF;
border-radius:8px;
-moz-border-radius:8px;
-webkit-border-radius:8px;

}

#NavItem:hover #PopOver {display:block}

#banners { padding-top: 25px; padding-bottom: 25px; position: relative;  } 
.wrap {  width: 1000px; margin: 0 auto; }
.left { float: left; }
.right { float: right; } 
```

问题 ：

在许多情况下，导航栏会在另一个 div 下消失

![在此处输入图像描述](https://i.stack.imgur.com/TjSAl.gif)

例如，我添加了“#banners”div，我认为问题是因为“位置：相对；”

但正如我所说，“#banners”div 仅用于示例，如果我需要解决这个问题，我应该在 #navbar #NavItem:hover #PopOver

请问有什么想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T02:25:59.470

```
#PopOver {
position:absolute; 
border:2px solid #07B1F1; 
width:170px; 
height:auto; 
padding:15px 5px 10px 5px;
display:none;
top:30px; 
left:229px; 
background-color:#FFFFFF;
border-radius:8px;
-moz-border-radius:8px;
-webkit-border-radius:8px;
z-index:1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T02:22:20.277

设置`z-index:2;`或更大`#PopOver`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T02:18:09.387

在 #navbar 项目上设置 z-index 值。 [http://www.w3schools.com/cssref/pr_pos_z-index.asp](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

# ruby-on-rails - Rails：找不到“twitter/bootstrap”的文件

> ID：16127302
> 
> 赞同：3
> 
> 时间：2013-04-21T02:15:24.190
> 
> 标签：ruby-on-rails, ruby, twitter-bootstrap, assets

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-10-05T15:14:10.703

重新启动服务器对我有用。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-24T07:22:58.333

我通过使用以下步骤解决了这个问题：

1.  从 gemfile 中的 :assets 外部移动**twitter-bootstrap-rails gem**
2.  更新**twitter-bootstrap-rails** gem 版本**2.2.6**或直接粘贴到您的 gemfile 中。

    **gem 'twitter-bootstrap-rails', :git => 'git://github.com/seyhunak/twitter-bootstrap-rails.git'**

**（或者）**

如果 twitter-bootstrap-rails 2.2.6 不起作用，则使用**twitter-bootstrap-rails gem 最新版本**。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-21T04:25:10.510

只需使用`//= require bootstrap`而不是`//= require twitter/bootstrap`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-12T15:20:39.720

在 application.css 中要求 Bootstrap LESS (bootstrap_and_overrides.css.less) 在这里没有意义，因为管道已经带有“require_tree”。它会自动包含资产管道文件夹中的所有内容。

所以，我建议你在 Gemfile 中做一些更改。

从 Gemfile 中的 :assets 外部移动以下 gem。

做这个

```
gem "therubyracer"
gem "less-rails"
gem "twitter-bootstrap-rails" 
```

而不是这个

```
group :assets do
  gem "therubyracer"
  gem "less-rails"
  gem "twitter-bootstrap-rails"
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-06T05:21:22.243

以下步骤对我有用：

1.  从 gemfile 中的 :assets 外部移动 twitter-bootstrap-rails gem
2.  在 gemfile 中用这个 (gem "twitter-bootstrap-rails", '~> 2.2.6') 替换 twitter bootstrap gem
3.  捆绑更新
4.  重启服务器并测试

# php - 如何在 PHP MySQL 或 javascript 中增加/删除产品的数量。或者如何在复选框中插入产品的数量值

> ID：16127303
> 
> 赞同：0
> 
> 时间：2013-04-21T02:15:28.190
> 
> 标签：php, javascript, html, mysql

如何在 PHP MySQL 或 javascript 中增加/删除产品的数量？或者如何在复选框中插入产品的数量值？

```
<form action="addtocart.php" method="post">
    <table width="100%" cellspacing="20px">
        <?php
            include 'dbconnect.php';//for connection
            $sql='select * from product';
            $res = $dbconn->prepare($sql, array(PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY));              
            $res->execute();
            $disp="<tr><th>Image</th><th>Product Name</th><th>Price</th><th>Add To Cart</th></tr>";
            while($rs=$res->fetch())
            {
                if($rs['availableOnline']==1)
                    $isonline="Yes";
                else
                    $isonline="No";
                if($rs['availableInStore']==1)
                    $isstore="Yes";
                else
                    $isstore="No";

                $disp.="<tr>";                  
                $disp.="<td><img src=".$rs['imageLink']." width=50 height=70></img></td>";
                $disp.="<td>".$rs['name']."</td>";
                $disp.="<td>$ ".$rs['price']."</td>";
                $disp.="<td><input type=checkbox value=".$rs['idProduct']." name=items[] > Add Item</td></tr>";
                $disp.="<tr><td>&nbsp;</td><td>Available Online : ".$isonline."</td><td>Available in Store :".$isstore."</td><td>&nbsp;</td></tr>";
            }
            echo $disp;
        ?>
          <tr><td>&nbsp;</td><td><input type="submit"  id="btnsubmit"  value="Add To Cart"  /></td></tr>
    </table>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T02:39:08.330

让我举个例子，对于动态数量变化，我们可以使用javascript

索引.php

```
 <a herf="#" onclick="increase()"> Increse</a>        
    <input type="number" min=0  max=100  id="quantity" name="quantity" value="1">        
    <a herf="#" onclick="decrease()"> Decrease</a>  

   <input type="checkbox" name="fruit[]" value="1">Orange<br>
   <input type="checkbox" name="fruit[]" value="2">Banna<br>
   <input type="checkbox" name="fruit[]" value="3">Kiwi<br> 
```

javscript 我们将使用 'id' 来获取数字的值（输入）

```
function increase()
{       
    e=parseFloat(document.getElementById("quantity").value);
    e+=1;
    document.getElementById('quantity').value=e;
}

function decrease(){
    e=document.getElementById("quantity").value;
    e-=1;
    //to prevent from quantity going less than zero 
    if(e>0) 
    {
        document.getElementById('quantity').value=e;
    }
} 
```

save.php 在第二个 php 中我们将使用 implode 函数来存储多个值

```
$quantity= $_POST['quantity'];
  $fruit= implode(',' , $_POST['fruits']);
  echo $fruit; //used that value to store in database result will be like this 1,2,5,6 
```

# c++ - Issues with dynamic_cast from parent to child

> ID：16127305
> 
> 赞同：3
> 
> 时间：2013-04-21T02:16:21.393
> 
> 标签：c++, inheritance, polymorphism, downcast

I'm working on a basic client server application in C++ using sockets that will run a game of battleship. All communication between client and server is in the form of a simple object hierarchy that looks something like this:

```
namespace Message {
    enum MessageType { BASE, RESULT };

    class BattleshipMessage {
    public:

        virtual MessageType get_type() { return BASE; }
        virtual ~BattleshipMessage() {}
    };

    class ResultMessage : public BattleshipMessage {
    public:
        char _attackResult;

        ResultMessage( char result ) : _attackResult( result ) {}
        virtual MessageType get_type() { return RESULT; }

        ~ResultMessage() {}
    };
} 
```

When receiving an object sent through the socket, I would like to be able to receive it as a generic BattleshipMessage and then based on the MessageType returned by get_type() cast it to the appropriate child class to retrieve whatever additional information I might need to process the message. I'm afraid that C# has made me soft as I've done this sort of thing with easy syntax like `ResultMessage result = message as ResultMessage` however I'm stuck trying to get my C++ implementation working.

```
BattleshipMessage* message;
recv( hAccepted, reinterpret_cast<char*>( &message ), sizeof(message), 0 );

switch ( message->get_type() ) {
case RESULT:
    if ( ResultMessage* result = dynamic_cast<ResultMessage*>(message)) {
        std::string celebration = "HOORAY!";
    }
    break;
} 
```

I get `Access violation reading location` when I dereference the pointer and try to call get_type(). Can anyone point me in the right direction?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T02:20:38.753

```
sizeof(message) 
```

给出指针的大小，通常是 32 位或 64 位，具体取决于您的机器。你要

```
sizeof(BattleshipMessage) 
```

它给出了班级的规模。即使那样，我也不确定这是正确的方法，因为每个类对象都将包含一个指向处理动态调度/虚拟函数调用的 vtable 的指针，并且使用您使用的原始强制转换方法跨机器发送类将使该类无效那个指针。

我认为你应该先序列化你的对象（即将它转换为字符流），然后再通过网络发送它，然后反序列化以重建类： [是否可以在 C++ 中序列化和反序列化一个类？](https://stackoverflow.com/questions/234724/is-it-possible-to-serialize-and-deserialize-a-class-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T02:32:40.740

去掉所有的虚方法，将 MessageType 作为成员变量存储在 BattleshipMethod 中。然后你的代码应该可以工作。

# c# - 如何防止生成的接口实现使用类型别名？

> ID：16127308
> 
> 赞同：5
> 
> 时间：2013-04-21T02:17:12.053
> 
> 标签：c#, visual-studio, visual-studio-2012

我目前正在使用 Visual Studio（特别是 2012 Express）。我已经定义了一个接口，如下所示：

```
interface IMyInterface
{
    public String Data { get; set; }
} 
```

如果我有一个空班：

```
class MyClass : IMyInterface
{
} 
```

我右键单击`IMyInterface`，我可以选择“实现接口”。当我这样做时，自动生成的代码会产生以下内容：

```
class MyClass : IMyInterface
{
    public string Data
    {
        get
        {
            throw new NotImplementedException();
        }
        set
        {
            throw new NotImplementedException();
        }
    }
} 
```

我的问题是，有没有一种方法可以自动生成以下内容：

```
 public String Data 
```

代替：

```
 public string Data 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:35:18.000

没有办法做到这一点。在可能的情况下使用内置别名是硬编码的。

# r - r：包arm：加载时出错：从命名空间'arm'导出非S4通用方法时发现的函数：'fixef'，'ranef'

> ID：16127316
> 
> 赞同：0
> 
> 时间：2013-04-21T02:19:17.430
> 
> 标签：r, arm, lme4

```
> library(arm)
Loading required package: lme4
Loading required package: RcppEigen
Loading required package: R2WinBUGS
Loading required package: foreign
Error : Functions found when exporting methods from the namespace ‘arm’ which are not S4 generic: ‘fixef’, ‘ranef’
Error: package/namespace load failed for ‘arm’ 
```

可能相关：R 版本是 2.15.3。手臂版本是 1.6-05。lme4 版本为 0.99999911-1。我在发布之前确实运行了 update.packages() 。

我目前想知道最新版本的arm和lme4是否不兼容。我想在新的 lme4 中使用 predict.mermod() 函数，但在使用 lme4 时我也依赖 arm。我尝试在分离 lme4 的情况下加载 arm，但 lme4 是 arm 的必需包，因此也不起作用。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T12:38:54.417

当前版本与来自 R-forge/GitHub`arm`的开发版本不兼容。`lme4`我想`arm`仍然希望`lme4`生成`mer`类，而不是新`merMod`类。

（旁注：`car`R-forge（2.0-19）的最新版本确实支持`merMod`例如 Anova() 的类，我今天发现了（以防万一你需要它））

# java - 如何修复 Android 中的通知以覆盖所有 API 级别

> ID：16127322
> 
> 赞同：0
> 
> 时间：2013-04-21T02:21:06.957
> 
> 标签：java, android, android-notifications

我喜欢涵盖所有 API 级别的通知。要使用`TaskStackBuilde`，我需要 API 级别最低 16。我不想设置`minSdkVersion`为 16，因为我的应用程序的目标是较低的 API 级别。所以我如何编码是检测 API 级别，如果高于 16，我遵循这种格式。如果 Sdk 较低，我遵循该格式。我想成为以下

```
 int currentapiVersion = android.os.Build.VERSION.SDK_INT;
           if (currentapiVersion >= android.os.Build.VERSION_CODES.JELLY_BEAN){
                // Do something for JELLY_BEAN and above versions
               TaskStackBuilder stackBuilder = TaskStackBuilder.create(context);
               // Adds the back stack for the Intent (but not the Intent itself)
               stackBuilder.addParentStack(DetailMapView.class);
               // Adds the Intent that starts the Activity to the top of the stack
               stackBuilder.addNextIntent(resultIntent);
               PendingIntent resultPendingIntent =
                          stackBuilder.getPendingIntent(
                          0,
                          PendingIntent.FLAG_UPDATE_CURRENT
                          );
               mBuilder.setContentIntent(resultPendingIntent);
            } else{
                // do something for phones running an SDK before JELLY_BEAN
                Intent intent = new Intent(context, DetailMapView.class);
                PendingIntent activity = PendingIntent.getActivity(context, 0, intent, 0);
                mBuilder.setContentIntent(activity);
            } 
```

但是代码有错误，`TaskStackBuilde`因为我的 minSdk 是 8。我不想更改为 16，因为我想将我的应用程序用于较低的 API 级别。我该如何解决？任何可用的示例代码？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-18T06:36:58.237

为了关闭这个问题。你可以使用

```
import android.support.v4.app.TaskStackBuilder; 
```

代替 ~~导入android.app.TaskStackBuilder；~~至

# c# - 在我的应用程序和应用程序之间共享内存注入 dll 后正在运行

> ID：16127324
> 
> 赞同：0
> 
> 时间：2013-04-21T02:21:26.850
> 
> 标签：c#, c++, memory, hook, share

我构建了一个应用程序，当我的应用程序正在构建时，它会将 dll 注入所有正在运行的应用程序中，并且我想在我的应用程序和正在运行的应用程序之间共享内存。我希望 OpenFileMapping 在运行 dll 注入 applacation 时自动运行。但我不知道这是怎么做到的？

# c# - 如何在没有辅助代码（C#/MVVM）的情况下对枚举属性进行双向数据绑定？

> ID：16127327
> 
> 赞同：1
> 
> 时间：2013-04-21T02:21:51.950
> 
> 标签：c#, .net, mvvm, enums, mvvm-light

我有一个基于 C# MVVM Light 的应用程序，它有几个枚举属性。我厌倦了编写管道代码来支持它们。通常，我编写的管道代码是成对字符串属性的形式，或者有时是类型特定的值转换器，以促进数据绑定到枚举属性。我怎样才能做到这一点，而无需编写额外的代码来将数据绑定的 UI 元素连接到枚举属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:21:51.950

我做了一些挖掘和试验，现在我有一个用于任何 ViewModel 枚举属性的值转换器，它在枚举值的描述​​属性字符串和它们表示的枚举常量之间进行双向转换。这允许您将双向数据绑定到枚举属性，而无需执行任何管道代码。您唯一需要做的就是将绑定属性的 Enumeration 类型的*完全限定类型名称放在***ConverterParameter**字段中（示例见下图）。**如果您在确定正确的完全限定的 Enum 类型名称时遇到问题，只需在ConvertBack()**中设置一个断点，将抛出异常。然后打电话*System.Reflection.Assembly.GetExecutingAssembly().DefinedTypes.ToList()*以获取该执行上下文中所有当前定义的系统类型的列表。找到正确的完全限定类型名称并将其粘贴到**ConverterParameter**字段中。

*   使用**ToDescriptionsList<>()**方便地从*Enum*类型中获取 Description 属性以填充列表框或其他元素。将对它的调用放在属性中，该属性将人类友好的字符串列表返回到绑定到枚举属性的 UI 元素。（例如，列表框的**ItemsSource属性）。**

具有描述属性的枚举类型示例：

```
 // (barnyard, bird, cat, dog, horse, pig, reptile, smallfurry)
    // List of Animal types the breed list method accepts.
    public enum EnumAnimalType
    {
        [Description("Barnyard")]
        barnyard,
        [Description("Birds")]
        bird,
        [Description("Cats & Kittens")]
        cat,
        [Description("Dogs & Puppies")]
        dog,
        [Description("Horses & Ponies")]
        horse,
        [Description("Pigs")]
        pig,
        [Description("Reptiles")]
        reptile,
        [Description("Other Small & Furry")]
        smallfurry
    } 
```

![数据绑定期间的示例值转换器声明](https://i.stack.imgur.com/igHyL.png)

```
// Value converter class that does the conversion work.
public class EnumToDescAttrConverter : IValueConverter
{
    // Derived Grant Barrintgon's blog on C#.

    /// <summary>
    /// Extension method that retrieves the description attribute for a particular enum value.
    /// [Description("Bright Pink")]
    /// BrightPink = 2,
    /// </summary>
    /// <param name="en">The Enumeration</param>
    /// <returns>A string representing the friendly name</returns>
    public string GetDescription(Enum en)
    {
        Type type = en.GetType();

        MemberInfo[] memInfo = type.GetMember(en.ToString());

        if (memInfo != null && memInfo.Length > 0)
        {
            object[] attrs = memInfo[0].GetCustomAttributes(typeof(DescriptionAttribute), false);

            if (attrs != null && attrs.Length > 0)
                return ((DescriptionAttribute)attrs[0]).Description;
        }

        // Unable to find a description attribute for the enum.  Just return the
        //  value of the ToString() method.
        return en.ToString();
    }

    // Consumer wants to convert an enum to a description attribute string.
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        // Since we don't know what the correct default value should be, a NULL value is unacceptable.
        if (value == null)
            throw new ArgumentNullException("(EnumToDescAttrConverter:Convert) The value is unassigned.");

        Enum e = (Enum)value;

        return e.GetDescription();
    } // public object Convert(object value, Type targetType, object parameter, CultureInfo culture)

    // Convert an enumeration value in Description attribute form back to the appropriate enum value.
    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        // Since we don't know what the correct default value should be, a NULL value is unacceptable.
        if (value == null)
            throw new ArgumentNullException("(EnumToDescAttrConverter:ConvertBack) The value is unassigned.");

        string strValue = (string)value;

        // Parameter parameter must be set since it must contain the concrete Enum class name.
        if (parameter == null)
            throw new ArgumentNullException("(EnumToDescAttrConverter:ConvertBack) The Parameter parameter is unassigned.");

        string theEnumClassName = parameter.ToString();

        // Create an instance of the concrete enumeration class from the given class name.
        Enum e = (Enum)System.Reflection.Assembly.GetExecutingAssembly().CreateInstance(theEnumClassName);

        if (e == null)
            throw new ArgumentException(
                "(EnumToDescAttrConverter:ConvertBack) Invalid enumeration class name: " + theEnumClassName
                + ". Set a break point here and call System.Reflection.Assembly.GetExecutingAssembly().DefinedTypes.ToList()"
                + " in the immediate window to find the right type.  Put that type into the Converter parameter for the"
                + " data bound element you are working with."
                );

        System.Type theEnumType = e.GetType();

        Enum eRet = null;

        foreach (MemberInfo memInfo in theEnumType.GetMembers())
        {
            object[] attrs = memInfo.GetCustomAttributes(typeof(DescriptionAttribute), false);

            if (attrs != null && attrs.Length > 0)
            {
                if (((DescriptionAttribute)attrs[0]).Description == strValue)
                {
                    // Ignore the case
                    eRet = (Enum)Enum.Parse(theEnumType, memInfo.Name, true);
                    break; // Found it.
                }
            }
        } // foreach (MemberInfo memInfo in typeof(TEnum).GetMembers())

        // If the string can not be converted to a valid enum value, throw an
        //  Exception.
        if (eRet == null)
            throw new ArgumentException(String.Format("{0} can not be converted to an enum value: ", strValue));

        return eRet;
    } // public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)

    /// <summary>
    ///  Returns all the values for given Enum as a list of their string attributes.  <br />
    ///   Use this method to fill a list box with human friendly strings for each <br />
    ///   enumeration value using the DescriptionAttribute() associated it/them.
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <returns>An enumerator for the Enum values</returns>
    public static List<string> ToDescriptionsList<T>()
    {
        // GetValues() is not available on Windows Phone.
        // return Enum.GetValues(typeof(T)).Cast<T>();
        List<string> listRet = new List<string>();

        foreach (var x in typeof(T).GetFields())
        {
            Enum e;

            if (x.IsLiteral)
            {
                e = (Enum)x.GetValue(typeof(Enum));

                listRet.Add(e.GetDescription());
            } // if (x.IsLiteral)
        } // foreach()

        return listRet;
    } // public static IEnumerable<T> GetValues<T>(this T theEnum)    } // public class EnumToDescAttrConverter : IValueConverter
} // public class EnumToDescAttrConverter : IValueConverter 
```

# javascript - 以编程方式导航到本地剑道视图不起作用

> ID：16127331
> 
> 赞同：0
> 
> 时间：2013-04-21T02:22:05.117
> 
> 标签：javascript, mvvm, telerik, kendo-ui, kendo-mobile

在 kendoUI 移动项目中，我使用最新的 kendo.all.min.js 文件 (2013.1.319) 和 JQuery 1.9.1，如文档中所述。在我的一个视图模型中，我试图显示第二个视图，但它失败了：

> 类型错误：l 为空

我有 2 个看起来像的视图：

```
<div id="MainView" data-title="My Group List" data-role="view" 
   data-model="listModel" data-layout="StandardLayout">
   .
   .
</div>

<div id="SelectedView" data-title="View Group" data-role="view" 
  data-model="selectedModel" data-layout="StandardLayout">
   .
   .
</div> 
```

在第一个视图的模型中，我有这个：

```
var listModel = kendo.observable({

    groups: [],

    viewGroup: function (e) {
        selectedModel.set("group", e.data);

                //kendoMobileApp variable pointing to a
                //kendo.mobile.Application object
        kendoMobileApp.navigate("#SelectedView"); /* ERROR HERE */
    } 
```

在我列出上面的错误的地方，我得到 TypeError l is null 错误。知道为什么吗？我的语法关闭了吗？尝试使用缩小的脚本进行调试令人沮丧，因为我所知道的调试版本不存在。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:18:21.933

@布莱恩

确保将“kendoMobileApp”变量保持为全局变量。

html:

```
<div id="MainView" data-title="My Group List" data-role="view" 
   data-model="listModel" >
       <div>Main View</div>
       <div><a data-role="button" data-bind="click: navigateToSelected">Go to Selected view</a></div>
</div>

<div id="SelectedView" data-title="View Group" data-role="view" 
  data-model="selectedModel">   
      <div>Selected View</div>
       <div><a data-role="button" data-bind="click: navigateToMain">Go to Main view</a></div>
</div> 
```

JavaScript：

```
var listModel =  kendo.observable({
    navigateToSelected: function(){
        kendoMobileApp.navigate('#SelectedView');
    }

});
var selectedModel =  kendo.observable({
    navigateToMain: function(){
        kendoMobileApp.navigate('#MainView');
    }
});

var kendoMobileApp = new kendo.mobile.Application(); 
```

[请参阅jsFiddle](http://jsfiddle.net/S7edM/47/)导航的简单示例。 **注意：**我没有使用布局，因为这在这里并不重要。

# gcc - 创建共享库时出现 Clang 错误

> ID：16127332
> 
> 赞同：2
> 
> 时间：2013-04-21T02:22:11.493
> 
> 标签：gcc, llvm, clang, llvm-clang

我想在 MBP 上编译一个共享库，根据[此处](https://stackoverflow.com/questions/16117462/my-c-code-runs-slowly-in-mac-comparing-to-ubuntu)给出的建议，我已切换到`clang`(from `gcc`) 来创建共享库。我`makefile`的是：

```
CC = clang
CFLAGS = -c -fPIC -Wall -O3 -lpthread -g
BaseDir = /Users/admin/Prog/
Include = -I$(BaseDir)UMFPACK/Include -I$(BaseDir)AMD/Include -I$(BaseDir)SuiteSparse_config
Lib = -L$(BaseDir)UMFPACK/Lib -L$(BaseDir)AMD/Lib -L$(BaseDir)GotoBLAS2 -L$(BaseDir)SuiteSparse_config
AddFiles = -lumfpack -lamd -lgoto2 -lsuitesparseconfig
StaticLibs = $(BaseDir)GotoBLAS2/libgoto2.a $(BaseDir)UMFPACK/Lib/libumfpack.a $(BaseDir)AMD/Lib/libamd.a $(BaseDir)SuiteSparse_config/libsuitesparseconfig.a

all: TDS.o TDSJac.o ExtraRoutines.o CalcVFC.o TDS.h
        $(CC) $(Include) $(Lib) $(AddFiles) -dynamiclib -lpthread -o libTDS.so $^ -lm -g $(StaticLibs)

TDS.o: TDS.c TDS.h
        $(CC) $(Include) $(CFLAGS) $^

TDSJac.o: TDSJac.c TDS.h
        $(CC) $(CFLAGS) $^

ExtraRoutines.o: ExtraRoutines.c TDS.h
        $(CC) $(CFLAGS) $^

CalcVFC.o: CalcVFC.c TDS.h
        $(CC) $(CFLAGS) $^

MexFile: TDSGateway.c
        mex -g -largeArrayDims -ldl TDSGateway.c

Move:
        mv libTDS.so ../../
        mv TDSGateway.mexmaci64 ../../ 
```

我在这里所做的是： 1) 只编译`TDS.c`, `TDSJac.c`, `ExtraRoutines.c`, 和`CalcVFC.c`创建四个对应的目标文件。2）使用以下命令合并目标文件并创建共享库：

```
clang -I(Some folders) -L(Some folders) -l(Some libraries) -shared -lpthread -o libTDS.so TDS.o TDSJac.o ExtraRoutines.o CalcVFC.o TDS.h -lm -g
clang: error: cannot specify -o when generating multiple output files 
```

由于我对 clang 完全陌生，我不知道 Makefile 有什么问题。（如果我替换`CC=clang`为`CC=gcc`，一切正常。）我搜索了互联网但没有成功。clang 的手册页没有提到共享库。我什至无法从 clang[主页](http://clang.llvm.org/docs/UsersManual.html)中得到任何东西。如果能帮助我解决这个问题，我们将不胜感激。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T07:52:40.323

我昨天遇到了几乎同样的问题。但我从未使用过cmake。我正在使用我公司自己的 makefile 系统，所以我只能告诉你，到目前为止，是什么解决了我的问题。

Clang 在为您提供有关错误情况的正确提示方面仍然存在一些问题。链接错误是：

```
/usr/bin/ld: /usr/lib/crt1.o: relocation R_X86_64_32 against `_DYNAMIC' can not be used when making a shared object; recompile with -fPIC 
```

我解决了这个问题，因为我发现 -shared 参数必须在 -o Xo 参数后面。正如我所见，这也不是您的情况。你应该先试试。

在我们的例子中，我还必须使用 -WL 或 -L 来解析 LFlags（afaik 使用哪个并不重要，但我读到了一个与 -Wl 相关的 clang 错误）。但是，在使用 cmake 时，您必须在多大程度上解析 LFlags。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-28T03:02:12.947

您已将标头 ( `TDS.h`) 列为依赖项，这很好，但您随后将其`$^`用作输入，其中包括*所有*依赖项。您不应将标题列为输入。它根本不应该在命令行上，`clang`这实际上是一个错误。

错误信息不明显，但很容易解决。您有 2 个选择：

1.  明确而不是使用`$^`. 您可以将一个变量用于输入，另一个用于依赖项，例如；或者
2.  使用中间`.o`文件而不是`.c`文件作为`.so`. 这些`*.o`文件可以依赖于`.h`它们包含的任何文件。

# c++ - LuaBridge 回调（将 lua 函数传递给 c++）

> ID：16127334
> 
> 赞同：1
> 
> 时间：2013-04-21T02:22:15.800
> 
> 标签：c++, binding, lua, luabridge

如何使用 Luabridge(1.0.2) 将函数从 LUA 传递到 C++

```
local Callback=function()
    print("Inside Callback function!");
end 
```

然后将该回调传递给 c++：

```
self.Background:On("Click",Callback) 
```

“点击”是 const std::string&，但是如何将回调定义为函数？我尝试了一些方法（void*,std::function），但这些方法都不能正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T05:51:23.187

弄清楚了！如果您尝试传递函数，LuaBridge 2.0（在开发分支中）通过引入 LuaRef 解决了这个问题。

您的函数如下所示：

```
void DisplayObject::On( const std::string& Param1,LuaRef Param2 ); 
```

然后像这样调用函数：

```
Param2(); 
```

[https://github.com/vinniefalco/LuaBridge/tree/develop](https://github.com/vinniefalco/LuaBridge/tree/develop)

# c++ - C++ error: initializer element is not constant

> ID：16127337
> 
> 赞同：-1
> 
> 时间：2013-04-21T02:22:57.360
> 
> 标签：c++

I can't get this simple C++ code to work:

```
int secInt = 5;

double rubbish = secInt/60;

double factor = floor(rubbish); 
```

I always get "**ERROR: initializer element is not constant**" from line 3

Factor always returns 0.00 in the log

Could anyone help with this, I'm feeling that I overlooked something very simple.

An example of this error can be seen here: [http://ideone.com/2Wrkr9](http://ideone.com/2Wrkr9)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T02:35:36.290

您的代码应该在`main`您的程序部分内：

```
int main()
{
    int secInt = 583;

    double rubbish = secInt/60.0;

    double factor = floor(rubbish);
} 
```

您还应该使用标准 C++ 头文件，例如`<cmath>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T02:36:12.773

您忘记将代码包含在函数中。

尝试这个。

```
int main()
{
    int secInt = 5;

    double rubbish = secInt/60.0;

    double factor = floor(rubbish);
} 
```

C++ 将开始在名为 的函数中执行代码`main`，并从那里调用从 main 调用的任何函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T02:36:20.270

```
double rubbish = secInt/60; 
```

应该

```
double rubbish = static_cast<double>(secInt)/60; 
```

因为`secInt =5`，所以`floor(rubbish)`应该`0`与上述更正一致。

`main`如果源文件中没有任何其他函数，则至少应该有一个函数。`main`是入口点。

```
int main()
{
 int secInt = 5;
 double rubbish = static_cast<double>(secInt)/60.0;

 double factor = floor(rubbish);
 return 0;
} 
```

# sql - sql - insert into column in target table based on column name in query table

> ID：16127338
> 
> 赞同：0
> 
> 时间：2013-04-21T02:22:58.650
> 
> 标签：sql, sql-server, sql-insert

I have a tableB that has 35 columns and many hundreds of thousand rows (each row is also unique).

```
+------------------------------------------------------------------------------+
|Date | ID | Name | Blah1 | Blah2 | ... | Hour1 | Hour2 | Hour3 | ... | Hour24 |
+------------------------------------------------------------------------------+ 
```

Each row in TableB has hourly observations and some other house keeping information.

I want to insert into another table (TableA) based on querying TableB, such that a column in TableA (Hour) gets assigned the value 1 for column Hour1, 2 for column Hour2, 3 for column Hour3 and so on AND the column ObservationValue gets assigned the value in Hour1, Hour2, Hour3... to Hour24\. So TableA is in time series representation.

TableA looks like so:

```
+------------------------------------------------+
|Date| ID| Name | Zone | Hour | ObservationValue |
+------------------------------------------------+ 
```

I am not sure at all how I can do this. I know how to insert into a table based on queries but don't know how to perform that operation I want to do.

Appreciate the help.

**EDIT**

Sample data (I'm not sure if the design of TableB is the best but this was done many years before I inherited the system).

TableB:

```
8/1/2006 12:00:00 AM 48590 Miami Florida Blah Blah Blah Blah 69.89 63.55 50.73 45.05 44.17 50.39 63.93 84.73 87.61 102.43 123.39 154.33 181.1 232.71 262.11 290.64 299.44   262.67 214.22 191.15 172.49 132.62 105.83 98.25 
```

The above is an example of one record. In this case the ID=48590, Name=Miami, Zone=Florida. There is an entry for each day of the year for 10 years. There are roughly 10,000 ID's in this table.

TableA:

```
8/1/2006 12:00:00 AM 48590 Miami Florida 1 69.89
8/1/2006 12:00:00 AM 48590 Miami Florida 2 63.55 
8/1/2006 12:00:00 AM 48590 Miami Florida 3 50.73
8/1/2006 12:00:00 AM 48590 Miami Florida 4 45.05
8/1/2006 12:00:00 AM 48590 Miami Florida 5 44.17 
8/1/2006 12:00:00 AM 48590 Miami Florida 6 50.39 
8/1/2006 12:00:00 AM 48590 Miami Florida 7 63.93 
8/1/2006 12:00:00 AM 48590 Miami Florida 8 84.73 
8/1/2006 12:00:00 AM 48590 Miami Florida 9 87.61 
8/1/2006 12:00:00 AM 48590 Miami Florida 10 102.43 
8/1/2006 12:00:00 AM 48590 Miami Florida 11 123.39 
8/1/2006 12:00:00 AM 48590 Miami Florida 12 154.33 
8/1/2006 12:00:00 AM 48590 Miami Florida 13 181.1 
8/1/2006 12:00:00 AM 48590 Miami Florida 14 232.71 
8/1/2006 12:00:00 AM 48590 Miami Florida 15 262.11 
8/1/2006 12:00:00 AM 48590 Miami Florida 16 290.64 
8/1/2006 12:00:00 AM 48590 Miami Florida 17 299.44  
8/1/2006 12:00:00 AM 48590 Miami Florida 18 262.67 
8/1/2006 12:00:00 AM 48590 Miami Florida 19 214.22 
8/1/2006 12:00:00 AM 48590 Miami Florida 20 191.15 
8/1/2006 12:00:00 AM 48590 Miami Florida 21 172.49 
8/1/2006 12:00:00 AM 48590 Miami Florida 22 132.62 
8/1/2006 12:00:00 AM 48590 Miami Florida 23 105.83 
8/1/2006 12:00:00 AM 48590 Miami Florida 24 98.25 
```

The other question I have is, what structure is better if I intend to do arithmetic operations such as subtracting the ObservationValue for a given ID from a ObservationValue for the same ID but in another table? Is TableA optimal for that type of operaiton or is it better to have the TableB structure?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:50:49.147

听起来您想对 TableB 中的数据进行 UNPIVOT 以将其插入到 TableA 中。这将获取 tableB 中的列值并将其转换为行：

```
-- insert into tableA (Date, Id, Name, Zone, hour, observationvalue)
select Date,
  Id,
  Name,
  Zone,
  replace(hour, 'hour', '') hour,
  observationvalue
from tableB
unpivot
(
  observationvalue
  for hour in (Hour1, Hour2, Hour3, Hour4, Hour5...)
) unpiv; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/419ec/1)

# mysql - Error to create view use ifnull function in mysql

> ID：16127339
> 
> 赞同：2
> 
> 时间：2013-04-21T02:23:17.233
> 
> 标签：mysql

```
select g.id, ifnull(s.count, 0)
from t_goods g
left join v_stock s on g.id = s.id 
```

This sql works well, and then I create a view:

```
create or drop view v_goods_stock as
select g.id, ifnull(s.count, 0)
from t_goods g
left join v_stock s on g.id = s.id 
```

I get the error:

> [Err] 1064 - You have an error in your SQL syntax

My mysql version is 5.5.

I try to remove the ifnull function like this

```
create or drop view v_goods_stock as select g.id id, s.count c from t_goods g left join v_stock s on g.id = s.id 
```

I still get the same error.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T02:25:58.370

您必须为计算值指定列名：

```
create or replace view v_goods_stock as
select g.id, ifnull(s.count, 0) as count
from t_goods g  
left join v_stock s on g.id = s.id 
```

默认列名是表达式本身`ifnull(s.count, 0)`，它不是一个有效的名称（包含括号、逗号等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T03:22:26.213

您的问题很简单，与以下内容无关`IFNULL()`：MySQL 无法识别语法`CREATE OR DROP VIEW`。（[这里是 的语法参考`CREATE VIEW`。](http://dev.mysql.com/doc/refman/5.5/en/create-view.html)）

如果您需要此语句在视图已经存在时工作，请删除单词`OR DROP`，或者将其替换为。`OR REPLACE`

# jquery - Retrieving "Active" state CSS with jQuery

> ID：16127340
> 
> 赞同：0
> 
> 时间：2013-04-21T02:23:18.753
> 
> 标签：jquery, css

Is it possible to retrieve the `:active` state CSS with jQuery? The reason why I ask this is because I'm trying to make dynamic code so I don't have to always tweak the jQuery when stylizing an element.

**Edit**

To elaborate, I don't want to `.addClass()` or `.removeClass()` because the class might not be the same for every element being affected by my jQuery code.

**Edit 2**

Let me further explain what I'm trying to do.

I'm trying to create a plugin for my own personal use, and instead of having to tweak the code every time I have a new element that will be affected by the plugin, I want it to grab what's already in the CSS so I won't have to lose time. What I'm trying to do is create a button with an `:active` state, and when the user clicks the button, it will "freeze" at that state (my thoughts are to grab the CSS from that state and put them in the `.css()` command). Now, the reason why I don't want to `.addClass()` or `removeClass()` because the `:active` state is going to differ from one button to another.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:54:07.723

`:active`无法从 jQuery 中检索和操作诸如此类的伪类。我没有尝试完成这项工作，而是有一个解决方法来解决这个问题。

首先创建一个只有`:active`零件的样式容器。例如：

```
<style id="activeLink">
    a:active { color: #f00; }
</style> 
```

现在您可以使用 jQuery 来操作它，以检索当前样式

```
var curStyle = $("#activeLink").html(); 
```

修改样式

```
$("#activeLink").html("a:active { color: #000; }"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T02:46:55.670

```
$('.somebutton').click(function(){
    $(this).css({...}) //insert whatever css
}); 
```

# javascript - HTML5 Audio jQuery .click To Play Issues

> ID：16127343
> 
> 赞同：-1
> 
> 时间：2013-04-21T02:23:29.637
> 
> 标签：javascript, jquery, html

I need another set of eyes on this.

I have various "hover sounds" that work fine using HTML5\. Now I'm trying to add "click to play" image, using jQuery to play the HTML Audio. Here is my code:

```
 $(".audio_photography").click(function(){
            photography_audio.play();
        },
        function(){
            photography_audio.pause();
        }); 
```

and HTML

```
 <span class="audio_photography">
            <audio id="photography_audio">
                <source src="audio/cherish-the-day.mp3" type="audio/mpeg"></source>
                <source src="audio/cherish-the-day.ogg" type="audio/ogg"></source>
            </audio>
        </span> 
```

Nothing happens when clicked. I double checked the path to my mp3/ogg, and it's correct.

Any ideas on what I'm doing wrong?

Just in case, here is the whole jQuery script:

```
 <script type="text/javascript">
    $(document).ready(function(){
        $(".main-navigation li").hover(function(){
            main_navigation_audio.play();
        },
        function(){
            main_navigation_audio.load();
        });
        $("#primary a, #secondary a, footer a").hover(function(){
            link_audio.play();
        },
        function(){
            link_audio.load();
        });
        $(".site-title a").hover(function(){
            header_audio.play();
        },
        function(){
            header_audio.load();
        });
        $("input, textarea, .site-header").hover(function(){
            input_textarea_audio.play();
        },
        function(){
            input_textarea_audio.load();
        });
        $(".audio_photography").click(function(){
            photography_audio.play();
        },
        function(){
            photography_audio.pause();
        });
    });
</script> 
```

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:39:44.383

这是我现在使用的脚本，它似乎可以工作。

```
 $('.audio_photography').click(function(){
              if(photography_audio.paused){
                photography_audio.play();
               } else {
                 photography_audio.pause();
               }
        }); 
```

# c# - Cannot implicitly convert type 'Windows.UI.Color' to 'Windows.UI.Xaml.Media.Brush'

> ID：16127351
> 
> 赞同：3
> 
> 时间：2013-04-21T02:24:41.567
> 
> 标签：c#, wpf

I have a ComboBox that has a list of colors, and I want to use the color selected to fill a rectangle so I did this:

```
var alwan = typeof(Colors).GetTypeInfo().DeclaredProperties;
            foreach (var item in alwan)
            {
                x.Add(item);
            }
            CbForColors.ItemsSource = x;
            CbForColors_Copy.ItemsSource = x;

private void CbForColors_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
        var color = CbForColors.SelectedItem as PropertyInfo;
        //var color2 = color.GetMethod;
        //var color3 = color2.Invoke(color,null);
        Rect_Sample.Fill = (Color)color.GetValue(null);       
} 
```

I get this error:

> Cannot implicitly convert type '`Windows.UI.Color`' to '`Windows.UI.Xaml.Media.Brush`'

The commented lines I get the `argb` for the color, ie. `#FFA07FF0` (something like that). What's wrong with what is already implemented and how can I make a color from this `argb`? Should I turn it into a string and then turn each 2 characters into an int and put them in a new color a,r,g,b?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T02:30:29.683

需要使用 SolidColorBrush：

```
 Rect_Sample.Fill = new SolidColorBrush( (Color)color.GetValue(null)); 
```

# java - 下载某些 Excel 文件并解释它的一些值

> ID：16127353
> 
> 赞同：0
> 
> 时间：2013-04-21T02:25:47.150
> 
> 标签：java, eclipse, excel, apache-poi, jxl

所以我正在努力获取一个特定的excel文件，主要是一个显示学生在作业中获得的作业和成绩的文件，并对这些值做一些事情。现在，我想获取作业名称、学生姓名、学生在各个作业中的成绩以及这些作业的到期日期。excel文件有点奇怪。作业是垂直列出的，有些作业占用 2+ 列。我在 Java 中创建了一个程序，它试图将赋值名称和值放在滚动条中，但是列出的赋值非常不同。

```
"Learning Experi
ST-2A: Life in " 
```

这将在 excel 中垂直列出，但是当我在 java 中阅读它时，它显示的是：

```
 Learning Experi
    ST-2A: Life in 
```

我希望输出在一行上显示上述内容。

关于如何解决这个问题的任何想法？谢谢。

编辑

现在，当我的程序读取 excel 文件时，它正在读取一些空单元格。这是它的输出：

```
Learning ExperiST-2A: Life in 
Learning ExperiST-2A: Life in 
[Empty Line]
[Empty Line]
Other information 
```

如何摆脱程序正在读取的空单元格导致的那些空行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T02:40:09.787

您可以通过用空字符串替换行分隔符来做到这一点，例如

`myString = myString.replaceAll(System.getProperty("line.separator"), "");`

您可以通过检查来检查该行是否为空`myString.trim().isEmpty()`，如果它确实为空，则不要将其添加到您的输出中。

# c - Read and delete from FIFO in C

> ID：16127354
> 
> 赞同：1
> 
> 时间：2013-04-21T02:25:54.183
> 
> 标签：c, named-pipes, fifo

I am building a server that communicates through FIFO with it's clients.

So far I've managed to create a FIFO, run a new thread, once a message arrives in the FIFO and output the message from the thread.

The problem is that as soon as the client writes something in the pipe, the server just prints the message endlessly (I am reading from the pipe in a `while(1)`).

My question is: shouldn't the `read` operation also remove the message from the pipe, so it doesn't get read again? Isn't that the point of First In, First **Out**? Is that something I have to do manually?

Here's my code too, if that helps: [http://pastebin.com/Ag7vgrav](http://pastebin.com/Ag7vgrav)
What I do to write in the FIFO is just: `echo test > /home/ubuntu/work/my_fifo`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T02:46:09.637

您需要检查来自 的返回码`read(2)`。如果它返回-1，则发生错误，您应该立即停止阅读。如果它返回 0，那就是 EOF，这意味着写入器关闭了 FIFO 的末端，您也应该停止写入并关闭 FIFO 的末端。

为了支持多个客户端，每次接受新客户端时都需要重新打开 FIFO。

您在管理子线程的方式上也有一些未定义的行为。无法保证线程将在`while`循环的当前迭代结束之前启动`main()`，此时`thread_arg`实例超出范围。为了确保线程在数据仍然有效时仍然可以访问该数据，您需要将其设为全局数据（如果您只有一个子线程），或者在堆上动态分配它。通常的模式是这样的：

```
// Parent thread:
thread_arg *arg = malloc(sizeof(*arg));
...
pthread_create(..., &thread_proc, arg);

void *thread_proc(void *t_arg)
{
    thread_arg *arg = t_arg;

    // Thread code goes here
    ...
    free(arg);
    return exit_status;
} 
```

# c# - 散列/加密用于密码的文本框

> ID：16127357
> 
> 赞同：0
> 
> 时间：2013-04-21T02:26:28.543
> 
> 标签：c#, password-protection

我有一个问题希望能得到一些帮助。我知道以前有人问过这个问题，并且在过去的几天里我浏览了很多帖子。我有一个表单，允许用户输入用户名和密码并将它们存储在注册表项中，然后在不同的应用程序中引用该键。我为设置密钥的应用程序添加了我的代码，有人能够向我解释提供密码的最佳方式。

```
private void button5_Click(object sender, EventArgs e)
    {
        Regex myRegularExpression = new Regex("@");
        u_p.BackColor = Color.White;
        u_n.BackColor = Color.White;
        if (myRegularExpression.IsMatch(u_n.Text))
        {
            if(!String.IsNullOrEmpty(u_p.Text))
            {
                RegistryKey key = Registry.CurrentUser.OpenSubKey("Software", true);
                key.CreateSubKey("####");
                key = key.OpenSubKey("####", true);
                key.CreateSubKey("Backup");
                key = key.OpenSubKey("Backup", true);
                key.SetValue("u_name", u_n.Text);
                key.SetValue("u_pass", u_p.Text);
                MessageBox.Show("Username and Pass Updated Successfully");
            }
            else
            {
                MessageBox.Show("no password entered");
                u_p.BackColor = Color.OrangeRed;
            }
        }
        else
        {
            MessageBox.Show("not a proper username entered");
            u_n.BackColor = Color.OrangeRed;
        }
    } 
```

# python - 使用类方法...失败，旧的“__init__() 正好采用 x 个参数（给定 x+1）”

> ID：16127359
> 
> 赞同：3
> 
> 时间：2013-04-21T02:26:44.707
> 
> 标签：python, class, self, class-method

这是我编写的一些代码，目的是让我有不止一种方法来初始化我的 GameObject 类：

```
class GameObject(object):

    def __init__(self, name, location, description, aliases=[]):
        self.name = name
        self.location = location
        self.description = description
        self.aliases = aliases
        ...

    @classmethod
    def from_values(cls, name, location, description, aliases=[]):
        return cls(name, location, description, aliases)

    @classmethod
    def from_super(cls, object):
        return cls(object.name, object.location, \
            object.description, object.aliases) 
```

具体来说，我尝试使用它的方式是`from_super()`从 GameObject 的子类调用我的方法并返回该子类的实例，给定一个 GameObject 实例。这看起来像：

```
item = o.GameObject(name, room.id, description, aliases)
if item_type == 'fix':
    item = fix.Fixture.from_super(item)
if item_type == 'move':
item = move.Moveable.from_super(item)
if item_type == 'take':
    item = take.Takeable.from_super(item)

# do something with item 
```

在 Takeable 中：

```
import object

class Takeable(object.GameObject):

    def __init__(self, name, current_room, description):
        object.GameObject.__init__(self, name, current_room, description)
        ... 
```

我认为这相当漂亮，但不幸的是，当我执行最后一点时，它在 GameObject 的代码中失败了，并且出现了一个非常熟悉的错误......

> 回溯（最后一次调用）：
> 文件“create_map.py”，第 207 行，
> `create_map()`
> 文件“create_map.py”，第 191 行，create_map
> `create_items(room)`
> 文件“create_map.py”，第 83 行，create_items
> `item = take.Takeable.from_super(item)`
> 文件“/home/brian/代码/chimai/chimai/objects/object.py"，第 21 行，在 from_super
> `return cls(object.name, object.location, object.description, object.aliases)`
> TypeError:`__init__()`恰好需要 4 个参数（给定 5 个）

......我不明白。通常，当我收到此错误时，我忘记包含 self. 但是，如您所见，在这种情况下我没有忘记。所以我认为这个错误与我的类方法在幕后发生的事情有关，我刚刚开始尝试研究究竟是什么魔法，但我想我可能会有你们中的一个好心人帮助我改为理解。

在此先感谢，如果我错过了一些明显的东西，我很抱歉。

# scala - Sequencing an HList

> ID：16127360
> 
> 赞同：18
> 
> 时间：2013-04-21T02:27:01.563
> 
> 标签：scala, shapeless

Given a Shapeless HList where every list element shares the same type constructor, how can the HList be sequenced?

For example:

```
def some[A](a: A): Option[A] = Some(a)
def none[A]: Option[A] = None

val x = some(1) :: some("test") :: some(true) :: HNil
val y = sequence(x) // should be some(1 :: "test" :: true :: HNil)

def sequence[L <: HList : *->*[Option]#λ, M <: HList](l: L): Option[M] =
  ??? 
```

I tried to implement sequence like this:

```
object optionFolder extends Poly2 {
  implicit def caseOptionValueHList[A, B <: HList] = at[Option[A], Option[B]] { (a, b) =>
    for { aa <- a; bb <- b } yield aa :: bb
  }
}

def sequence[L <: HList : *->*[Option]#λ, M <: HList](l: L): Option[M] = {
  l.foldRight(some(HNil))(optionFolder)
} 
```

But that does not compile:

```
could not find implicit value for parameter folder: shapeless.RightFolder[L,Option[shapeless.HNil.type],SequencingHList.optionFolder.type] 
```

Any tips on implementing this for either a specific example like Option or for an arbitrary Applicative?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-21T04:45:18.410

你非常接近 - 你只需要确保你有它要求的额外证据：

```
def sequence[L <: HList : *->*[Option]#λ, M <: HList](l: L)(implicit
  folder: RightFolder[L, Option[HNil], optionFolder.type]
) = l.foldRight(some(HNil: HNil))(optionFolder) 
```

或者，如果你想要更通用的东西，并且有一个这样的应用实现：

```
trait Applicative[F[_]] {
  def ap[A, B](fa: => F[A])(f: => F[A => B]): F[B]
  def point[A](a: => A): F[A]
  def map[A, B](fa: F[A])(f: A => B): F[B] = ap(fa)(point(f))
}

implicit object optionApplicative extends Applicative[Option] {
  def ap[A, B](fa: => Option[A])(f: => Option[A => B]) = f.flatMap(fa.map)
  def point[A](a: => A) = Option(a)
} 
```

你可以写：

```
object applicativeFolder extends Poly2 {
  implicit def caseApplicative[A, B <: HList, F[_]](implicit
    app: Applicative[F]
  ) = at[F[A], F[B]] {
    (a, b) => app.ap(a)(app.map(b)(bb => (_: A) :: bb))
  }
}

def sequence[F[_]: Applicative, L <: HList: *->*[F]#λ, M <: HList](l: L)(implicit
  folder: RightFolder[L, F[HNil], applicativeFolder.type]
) = l.foldRight(implicitly[Applicative[F]].point(HNil: HNil))(applicativeFolder) 
```

现在您也可以序列列表等（假设您有适当的实例）。

* * *

更新：请注意，我`sequence`在这两种情况下都省略了返回类型注释。如果我们把它放回去，编译器就会窒息：

```
<console>:18: error: type mismatch;
 found   : folder.Out
 required: F[M] 
```

这是因为`RightFolder`实例携带其返回类型作为抽象类型成员。我们知道`F[M]`在这种情况下，但编译器并不关心我们知道什么。

如果我们希望能够明确返回类型，我们可以使用`RightFolderAux`实例来代替：

```
def sequence[F[_]: Applicative, L <: HList: *->*[F]#λ, M <: HList](l: L)(implicit
  folder: RightFolderAux[L, F[HNil], applicativeFolder.type, F[M]]
): F[M] =
  l.foldRight(implicitly[Applicative[F]].point(HNil: HNil))(applicativeFolder) 
```

请注意，它`RightFolderAux`有一个额外的类型参数，它指示返回类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-14T20:40:03.620

Now you can use [kittens](https://github.com/milessabin/kittens/blob/master/core/src/test/scala/cats/sequence/sequence.scala) `cats.sequence`

```
import cats.implicits._
import cats.sequence._
import shapeless._

val f1 = (_: String).length
val f2 = (_: String).reverse
val f3 = (_: String).toDouble

val f = (f1 :: f2 :: f3 :: HNil).sequence
assert( f("42.0") == 4 :: "0.24" :: 42.0 :: HNil) 
```

The example sequenced against Function but you can use anything that has an cats `Applicative` instance.

# internet-explorer - 如何强制 Internet Explorer 在 Internet Explorer 8 文档模式下工作？

> ID：16127361
> 
> 赞同：1
> 
> 时间：2013-04-21T02:27:10.047
> 
> 标签：internet-explorer, internet-explorer-9, registry, internet-explorer-10, regedit

目前我在 AutoIt 中使用这个代码：

```
RegWrite("HKU\" & $objAccountSID & "\Software\Microsoft\Internet Explorer\BrowserEmulation\", "AllSitesCompatibilityMode", "REG_DWORD", 1) 
```

并强制IE以兼容模式打开。

但我找不到强制 IE 在 Internet Explorer 8 文档模式下永久运行的注册表项->

![即文档模式](https://i.stack.imgur.com/gtu3R.png)

[msdn](http://msdn.microsoft.com/en-us/library/ee330730%28VS.85%29.aspx#browser_emulation) ( [2](http://social.technet.microsoft.com/Forums/en-US/ieitprocurrentver/thread/f5ecfc0d-01e3-4d36-8608-406a6ec42aa9) )上的示例很少，但到目前为止都没有。

# google-apps-script - 使用 UrlFetchApp.fetch().getContentText 从网页中丢失源代码

> ID：16127362
> 
> 赞同：0
> 
> 时间：2013-04-21T02:27:25.483
> 
> 标签：google-apps-script, urllib2, urlfetch

并非所有来自该站点的视图源：[http://www.portofhueneme.org/home.php](http://www.portofhueneme.org/home.php)都是从`UrlFetchApp.fetch().getContentText`.

我听说 UrlFetchApp 只是 python 的 urllib2 模块的包装器。[之前的](https://stackoverflow.com/questions/9516933/urllib2-not-returning-full-webpage)一篇文章提到 urllib2 不会获取从脚本动态生成的上下文，但我找不到任何会生成页面其余部分的脚本。

我正在尝试获取“重要公告”下列出的日期。

```
function test_date() {
  var url = UrlFetchApp.fetch('http://www.portofhueneme.org/home.php') ;
  var text= hueneme_url.getContentText() ;
  Logger.log(hueneme_text) ;

  var pattern = /Current Vessel Schedule/

  var start =  hueneme_text.search(pattern) ;
  Logger.log("\n"+start) ; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:20:48.777

UrlFetchApp 和 urllib2 之间没有联系。（也许您听到的是关于 App Engine 上等效的 UrlFetch API，虽然我不知道；但绝对不是 Apps Script。）但是，一般来说，任何语言或平台的 UrlFetchApp 类库都不会执行脚本在页面中（甚至 JavaScript 自己的 XmlHttpRequest 也不这样做！）所以观察仍然是相关的。

在这种情况下，您的问题是文本不包含`/Current Vessel Schedule/`，因为如果您查看该页面的源代码，您会发现单词之间不仅有一个空格，而且还有很多空格，包括换行符。您在可见页面中看不到它，但它在 HTML 代码中，这是您从 UrlFetchApp 获得的。

要完成这项工作，您需要将脚本更改为`/Current\s*Vessel\s*Schedule/`。这是完整的示例：

```
function test_date() {
  var url = UrlFetchApp.fetch('http://www.portofhueneme.org/home.php') ;
  var text = url.getContentText() ;  
  var pattern = /Current \s*Vessel\s*Schedule/
  var start =  text.search(pattern) ;
  Logger.log(start) ;
} 
```

# python - 如何将编码的 unicode 转换为可读的 unicode

> ID：16127365
> 
> 赞同：3
> 
> 时间：2013-04-21T02:28:32.267
> 
> 标签：python, django, unicode, ascii, encode

我对这个话题很迷茫，以至于我什至不知道如何正确地表达我的问题。

我在 python 的 unicode 中有一堆奇怪的转义分隔代码。我想让它成为人类可读的。我相信它必须再次采用 unicode 格式，因为在 ascii 中有无法表示的字符。我怎样才能做到这一点？网上有太多的东西，比如编码、解码、str、编解码器等，我不知道该怎么办了。

谢谢你。

```
u"\u202e\u062c\u0647\u0627\u0646\u202c - \u202dBBC     
\u202e\u0641\u0627\u0631\u0633\u06cc\u202c - 
\u202e\u0646\u0634\u0633\u062a '\u062f" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T02:44:18.133

我相信你已经掌握了一些波斯语！

```
>>> foo = u"\u202e\u062c\u0647\u0627\u0646\u202c - \u202dBBC  \u202e\u0641\u0627\u0631\u0633\u06cc\u202c - \u202e\u0646\u0634\u0633\u062a
>>> print foo        
جهان‬ - ‭BBC  ‮فارسی‬ - ‮نشست 'د 
```

Stackoverflow 的代码块功能似乎不太喜欢左/右对齐文本的组合，所以这里还有一个屏幕截图：

![波斯unicode输出](https://i.stack.imgur.com/vY9Vu.png)

这似乎与 BBC World Persian（伊朗）有关。至少这就是[谷歌翻译所表明](http://translate.google.com/#auto/en/%D8%AC%D9%87%D8%A7%D9%86%E2%80%AC%20-%20%E2%80%ADBBC%20%20%E2%80%AE%D9%81%D8%A7%D8%B1%D8%B3%DB%8C%E2%80%AC%20-%20%E2%80%AE%D9%86%D8%B4%D8%B3%D8%AA%20%27%D8%AF)的。由于选择错误，很难让订单正确，但语言似乎很合适。

# visual-studio-2010 - Using .obj Files in VC++ Projects

> ID：16127367
> 
> 赞同：3
> 
> 时间：2013-04-21T02:28:52.930
> 
> 标签：visual-studio-2010, wavefront

I have a Win32 console project in VS2010 and I added an .obj file to the solution that I exported from Blender (it's a simple cube), but I get a LNK1107 error saying it can't read at 0x107 when I run or build the project. I tried going to Project > Properties > C/C++ > Additional Directories and named the .obj file there and put my file under the same directory as my source code and that didn't fix it.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-23T21:00:01.313

我在尝试加载 .obj 文件时遇到了同样的问题。方法是**右键单击**Visual Studio 中的文件并转到**properties**。在**General**部分中，选择**exclude from build**以防止 VS 尝试链接它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T02:36:51.953

这是一个常见的文件扩展名，意味着两个不同的东西。

C++ 链接器认为您的`.obj`文件是通用对象文件格式，而您的 .obj 文件实际上是 3d 对象定义文件。

C++ 编译器输出`*.obj`文件，这些文件与您的搅拌机`.obj`文件不同。

您需要将项目设置为将该 *.obj 文件视为资源，而不是链接它。

# javascript - Get the origination host of a Javascript Http request

> ID：16127369
> 
> 赞同：2
> 
> 时间：2013-04-21T02:29:19.650
> 
> 标签：javascript, ajax, http

When doing a cross domain `HTTP` request from a Javascript client, like JQuery (from a client browser). In the receiving end, will it be able to point out where the Javascript request came from?

Example, I have a site, and it loads up a Javascript that will call a web service, say `foo.com/someapi`

When the API receives the request, what will it be able to get the origination host. Say my site is `bar.com` and when I access `bar.com/index.html` it will load up the page and fire up the javascript HTTP request to `foo.com/someapi`

In the client request there was no server side request involved its pure Javascript.

Furthermore, what if the call is executed from a development environment, like localhost what will be the `hostname` that the receiving `foo.com/someapi` will get?

What does a browser do when doing HTTP request from Javascript:

*   In a public domain site
*   And with a localhost site

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T02:50:42.950

@Andbdrew 提到了`Origin`标头，它是跨域资源共享 (CORS) 规范的一部分。这是一个有用的指南，但不一定准确（或始终可用）。

唯一（几乎）100% 可靠的信息是请求来自的 IP 地址（或者，更确切地说是中继请求的最近代理服务器的 IP 地址）。这需要准确，否则响应将不会返回到发出请求的计算机。但是，它只显示客户端的位置，而*不是*发出请求的页面的来源。（无论页面是从文件、本地主机还是外部站点加载的，这个位置都是一样的）

使用支持 CORS 的浏览器，*应该*发生的是：

1.  客户从 foo.com 请求一个页面

2.  foo.com 返回一个页面，包括一些脚本（可能作为外部资源）。

3.  这些脚本运行时将它们的来源设置为 foo.com

4.  脚本尝试从 bar.com 请求另一个资源

5.  客户端向 bar.com 发送请求，并将 HTTP Origin 标头设置为“foo.com”——这不是客户端的主机名，但它表示脚本的来源。

6.  bar.com（如果它支持 CORS）应该返回带有 Access-Control-Allow-Origin 标头集（或相关标头）的资源

几点：

1.  如果客户端不支持 CORS，那么它根本不会发送 Origin 标头。有关浏览器支持矩阵，请参阅[http://caniuse.com/cors 。](http://caniuse.com/cors)

2.  如果第一个请求不是发往 foo.com，而是发往`file://`url，则不会发送 Origin 标头。

3.  如果该请求不是`file://`url，而是来自，*则应*`localhost`设置Origin 标头。规范中没有任何内容说不，但我还没有检查浏览器实际上做了什么。

**   还有一些其他情况下不会发送 Origin 标头；浏览器扩展和（我相信）Chrome 应用程序不会发送它。

    *   如果服务器不支持 CORS，那么它将忽略标头，并且浏览器可能会拒绝响应。* 

 *现在，说了这么多，你不能依赖任何这些。CORS 从根本上说是一种旨在帮助客户端浏览器保护*自己*免受其运行的脚本的技术。这与保护服务器无关，甚至不是让服务器知道谁在访问数据，因为它很容易被伪造。它存在的原因是为在“好”浏览器中运行的“好”脚本提供了一种说明它们是谁的方式——一种在同一个“好”浏览器中运行的“坏”脚本不应该能够模仿的方式。

这绝对不意味着实际控制资源的服务器应该依赖该标头来获得任何类型的安全性。如果被访问的数据真的很重要，则应该对其进行适当的访问控制（https、密码和基于 cookie 的安全会话是一个很好的组合）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T02:34:19.423

如果您的网站是`bar.com`，`ORIGIN`标题将设置为`bar.com`.

您可以在浏览器检查器的 NET 选项卡中查看这一点。

编辑：如果您来自您的开发环境或本地主机，您应该设置您的主机文件（假设 linux / mac）并将 local.bar.com 别名设置为 127.0.0.1。然后，`ORIGIN`标头将设置为 local.bar.com。

不应将此标头误认为是身份验证策略。要尝试限制对授权用户的访问，您可以在[http://oauth.net/2/上查看 OAuth](http://oauth.net/2/)*

# r - 使用十分位数定义地层

> ID：16127372
> 
> 赞同：1
> 
> 时间：2013-04-21T00:45:51.887
> 
> 标签：r, quantile

我有一个调查数据集，想用十分位数来定义地层，U1 =（数据集中的所有单位都在 D0=min 和 D1 之间），U2=（在 D1 和 D2 之间）.....U10=（在D9 到 D10 = 最大值）。

如何使用十分位数来定义地层？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T01:25:08.610

使用该`quantile`函数计算一个变量的十分位数的示例，然后使用该`cut`函数根据这些十分位数计算一个因子，然后在其他计算中使用该因子，通过`tapply`：

```
# Let's set up some data:

 y <- rnorm(30, 100, 20)
 x <- rpois(30, 25-y/20)  # make x depend on y a little
 surveyres <- data.frame(y=y,x=x)

# set up the deciles of one variable

 yd <- cut(y, breaks=c(-Inf,quantile(y,seq(0.1,0.9,by=0.1)),Inf) )

# compute means of another variable over deciles of the first:

 tapply(surveyres$x, yd, mean)      
(-Inf,84.2] (84.2,88.8] (88.8,93.8] (93.8,97.5]  (97.5,100]   (100,104] 
   23.66667    28.00000    22.33333    20.00000    20.33333    17.33333 
  (104,110]   (110,114]   (114,123]  (123, Inf] 
   20.66667    19.33333    21.00000    20.33333 
```

另请参阅`by`应该与变量一起使用的函数，例如`yd`.

# ios - iOS 谷歌地图添加额外的 UIGesturerRecognizer

> ID：16127375
> 
> 赞同：1
> 
> 时间：2013-04-21T02:29:55.820
> 
> 标签：ios, uigesturerecognizer, google-maps-sdk-ios

我刚开始使用适用于 iOS 的 Google Maps SDK，但遇到了一些问题。我正在尝试添加以下代码：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    // Google map code here...

    UITapGestureRecognizer *listTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(listClick:)];
    [self.listButton addGestureRecognizer:listTap];
}

- (void)listClick:(UITapGestureRecognizer *)recognizer {
    NSLog(@"List button pressed");
} 
```

但它似乎没有在图像上注册点击事件。我已经连接了 IBOutlet，但似乎谷歌地图正在接受所有的手势。我可以开始平移，将鼠标（或手指）放在列表​​按钮上并滑动，地图只会响应它。

我正在使用适用于 iOS v1.2 的 Google Maps SDK（应该是当前版本），目标 iOS 版本是 5.1。任何想法都会有所帮助，因为这一直让我发疯。

![在此处输入图像描述](https://i.stack.imgur.com/N35xG.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T00:25:41.900

你一定是在开玩笑......所以这就是发生的事情。Storyboard 已经`User Interaction Enabled`检查过了，但显然这并不意味着蹲下。我将代码更改为：

```
UITapGestureRecognizer *listTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(listClick:)];
self.listButton.userInteractionEnabled = YES;
[self.listButton addGestureRecognizer:listTap]; 
```

那里的关键是设置`self.listButton.userInteractionEnabled = YES;`

一切都按预期进行，我的 iOS 开发世界不再颠倒。

# actionscript-3 - 将显示对象投射到特定的影片剪辑 - 销毁该影片剪辑的所有其他实例

> ID：16127376
> 
> 赞同：1
> 
> 时间：2013-04-21T02:30:28.247
> 
> 标签：actionscript-3, flash

我有一个用 Flash 绘制的游戏板，其中包含一组 [Piece] 符号，我使用链接设置导出并通过 as3 代码引用。我听游戏板何时添加到舞台然后递归列表 - 检查以下内容

```
var child:DisplayObjectContainer = dOC.getChildAt(i) as DisplayObjectContainer;
if(child.toString() == "[object Piece]")
{
     //here i want to set some properties on the piece. 
} 
```

我遇到的问题是当我想获得对这篇文章的引用时，即

```
var piece:Piece = new Piece();
piece = child as Piece; 
```

通过将孩子铸成棋子，游戏板上的所有棋子都消失了，除了 1 - 所以看来我正在覆盖游戏中的所有 [object Piece]。fla 中的每一件作品都有一个独特的名称，所以我很好奇为什么获得这件作品的 ref 并铸造它会破坏我的董事会。

如果需要，可以提供更多信息

干杯!

**编辑：**

为了提供更多背景信息 - 我使用 JSFL 创建了 00 年代的 MovieClips，其名称如 row_1_col_3 等。我有一个带有 Piece.as 的机器人腿设置 - 所以我使用命令 (MXP) 将所有 MovieClips 交换为一种类型的 Piece。到目前为止，区分片段的唯一方法是在 JSFL 中设置阶段实例名称。当我执行交换时——我得到了所有可以调解的棋子，我知道哪个棋子被点击了，并且可以向其他玩家发送消息。但是我很想用他们自己的 PieceData 类（带有行、列、pieceOwner 变量）初始化每个单独的部分，这需要我在 ADDED_TO_STAGE 之后从阶段获取引用。我的想法是我可以在 Illustrator 中绘制我的棋盘并让 JSFL 连接各个部分 - 以前这一切都在代码中，但我试图为游戏棋盘设计工作流程。

# ios - Getting XML images from a Feedburner RSS Feed

> ID：16127378
> 
> 赞同：2
> 
> 时间：2013-04-21T02:30:40.613
> 
> 标签：ios, xml, feedburner

I am currently working on RSS app (iOS), and i'm able to parse XML data to my TableView and display the images of the feeds to UIImageView.

Being more specific, i'm just able to get the thumbnail images on the CNN Money article for example, but i need the normal size images, to display in my UIImageView.

Feeds URL example - [http://rss.cnn.com/rss/money_latest.rss](http://rss.cnn.com/rss/money_latest.rss)

In this XML feed, i just only have one tag for grab images "media:thumbnail". How can i access the normal images, displayed when you open the full article?

Thanks in advance!

Edward.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:59:53.180

您的 rss 没有普通图像的 url，但是是的，您可以通过解析`link`rss 提要中的详细信息页面来获取它。

打开链接并尝试查找如何在url中获取`<img src=>`普通图像的标签。`link`

您可以简单地使用`NSString substring`函数从标签中获取 src。在您的情况下，正如我所看到的，`Normal Image`可以从趋势中提取`<div id="ie_dottop">`该标签包含正常图像 url 之后的图像标签`div`，尝试读取 html 页面并解析，您将能够得到。

一切顺利。

# c# - Custom Authorize Attribute Redirect When UnAuthorized

> ID：16127381
> 
> 赞同：0
> 
> 时间：2013-04-21T02:31:20.587
> 
> 标签：c#, asp.net-mvc-4, authorization, forms-authentication

In my C# MVC4 application, I am performing a couple different redirect to actions from inside of a custom authorize attribute dependent upon if the user is logged in, in a certain role, etc.

I've placed the authorize attribute above one of my action results. If the user is not logged in or not authenticated or logged in but not a member of either group that I check against, I want the code within the action result to be performed. If the user is logged in and is a member of either group, I want a redirect to another action to occur (this is currently working).

With my current code, those that are logged in and within a specified group are re-directed as desired. All those listed in the other categories, cause my AuthorizationContext to be null. Knowing that when this is null HandleUnauthorizedRequest is called, I have attempted to override it to allow access to the original actionresult but cant figure it out.

No matter what I try I receive the error: `Object Reference not set to an instance of an object` on the line with: `filterContext.Result = new RedirectToRouteResult(`

My authorize attribute code is below:

```
 public class AuthorizeEditAttribute : AuthorizeAttribute
        {
            public string hName { get; set; }
        public override void OnAuthorization(AuthorizationContext filterContext)
        {
            base.OnAuthorization(filterContext);

            // Check if user is authenticated and if this action requires authorization
            if (filterContext.HttpContext.User.Identity.IsAuthenticated
                && filterContext.ActionDescriptor.IsDefined(typeof(AuthorizeAttribute), true)
                || filterContext.ActionDescriptor.ControllerDescriptor.IsDefined(typeof(AuthorizeAttribute), true))
            {
                List<object> attributes = new List<object>(filterContext.ActionDescriptor.GetCustomAttributes(typeof(AuthorizeAttribute), true));
                attributes.AddRange(filterContext.ActionDescriptor.ControllerDescriptor.GetCustomAttributes(typeof(AuthorizeAttribute), true));

                hName = filterContext.Controller.ValueProvider.GetValue("hSearch").AttemptedValue;

                // Check all authorzation attributes
                foreach (var attribute in attributes)
                {

                    var authAttribute = attribute as AuthorizeAttribute;
                    if (authAttribute != null)
                    {
                        if ((filterContext.HttpContext.User.IsInRole("TCL-CAdmin")) || (filterContext.HttpContext.User.IsInRole("TCL-C Group")))
                        {

                            // User is not authorized to perform edits so redirect to Index_Perm ActionResult
                            filterContext.Result = new RedirectToRouteResult(
                                new RouteValueDictionary 
                            {
                                //{ "area", "" },
                                { "controller", "Home" },
                                { "action", "Index_Perm" },
                                { "hSearch", hName.ToString() }
                            });
                            break;
                        }
                        else
                        {
                            filterContext.Result = new RedirectToRouteResult(
                               new RouteValueDictionary 
                            {
                                //{ "area", "" },
                                { "controller", "Home" },
                                { "action", "Index" },
                                { "hSearch", hName.ToString() }
                            });
                            break;
                        }
                    }
                }
            }
            else
            {

                filterContext.Result = new RedirectToRouteResult(
   new RouteValueDictionary 
                            {
                                { "controller", "Home" },
                                { "action", "Index" },
                                { "hSearch", hName.ToString() }
                            });
            }
        }

        protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
        {

                filterContext.Result = new RedirectToRouteResult(
 new RouteValueDictionary 
                            {
                                { "controller", "Home" },
                                { "action", "Index" },
                                { "hSearch", hName.ToString() }
                            });
        }
    }
} 
```

Rather than overriding HandleUnauthorizedRequest, I have also tried modifying the beginning portion of OnAuthorization to look like this:

```
public override void OnAuthorization(AuthorizationContext filterContext)
        {

            base.OnAuthorization(filterContext);

            if (filterContext.Result is HttpUnauthorizedResult)
            {
                filterContext.Result = new RedirectToRouteResult(
   new RouteValueDictionary 
                            {
                                { "controller", "Home" },
                                { "action", "Index" },
                                { "hSearch", hName.ToString() }
                            });
            } 
```

and I still receive the same warning about object reference.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:46:17.503

该问题是由分配了 hName 值的路由值“hSearch”引起的。在我的每次尝试中，hName 始终为 null，因为我没有设置它的值，直到行： `hName = filterContext.Controller.ValueProvider.GetValue("hSearch").AttemptedValue;`它从未被击中。

# arrays - Hash of hashes: How to get the number of occurrences of a key?

> ID：16127384
> 
> 赞同：4
> 
> 时间：2013-04-21T02:31:57.647
> 
> 标签：arrays, perl, hash

I have the following text file.

```
foo1    bam
foo1    bam
foo2    bam
foo1    zip
foo2    boo
foo1    zip
foo3    zip 
```

I would like to make a Hash of Hashes where KEY1 is **column one**, KEY2 is the sound it makes (**column two**): `bam`, `zip`, or `boo`, and the VALUE is the **number of occurrences** of that sound. Such that the data structure is like this:

```
$VAR1 = {
      'foo1' => {
                         'bam' => [
                                    2
                                  ],
                         'zip' => [
                                  2
                                ],
                       },
      'foo2' => {
                        'bam' => [
                                 1
                               ],
                        'boo' => [
                                 1
                               ],
                      },
        'foo3' => {
                        'zip' => [
                                  1
                                ],
                    }
         } 
```

Here's what I have so far

```
use strict; use warnings;    
open(my $fh, '<', 'file.txt') or die $!;
my %HoH;
while(<$fh>){
    chomp;
    my @cols = split(/\t/, $_);
    my $KEY1 = $cols[0];
    my $KEY2 = $cols[1];
    push( @{$HoH{$KEY1}{$KEY2}}, 1); # This actually creates a hash of hash of arrays
}

my %HoH_final;
foreach my $KEY1 (%HoH) {
    foreach my $KEY2 (keys %HoH{$KEY1}){
    my $count = scalar @{$HoH{$KEY1}{$KEY2}}; # get the size of that array
        push( @{$HoH_final{$KEY1}{$KEY2}}, $count);
   }
} 
```

What do you think?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T02:33:58.910

你真的不想要下面的数据结构吗？

```
{
   'foo1' => {
      'bam' => 2,
      'zip' => 2,
   },
   ...
} 
```

如果是这样，

```
while (<$fh>) {
    chomp;
    my @cols = split /\t/;
    ++$HoH{ $cols[0] }{ $cols[1] };
} 
```

如果你真的想要单元素数组，

```
while (<$fh>) {
    chomp;
    my @cols = split /\t/;
    ++$HoH{ $cols[0] }{ $cols[1] }[0];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T11:13:27.150

实际上这会解决问题

```
 perl -F'\t' -ane'$h{$F[0]}{$F[1]}++' 
```

如果你想看到结果

```
 perl -MData::Dumper -F'\t' -ane'$h{$F[0]}{$F[1]}++}{print Dumper(\%h)' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-21T02:36:08.777

每个二级键指向一个arrayref而不是数字是否有原因？我建议这样做：

```
while(<$fh>){
    chomp;
    my @cols = split(/\t/, $_);
    $HoH{ $cols[0] }{ $cols[1] }++;
} 
```

这将`++`在遇到每个二级键时增加 () 值。

# c - Recursive descent parser example for C

> ID：16127385
> 
> 赞同：6
> 
> 时间：2013-04-21T02:32:25.397
> 
> 标签：c, recursive-descent

I'm trying to learn about parsing expressions.I found recursive descent parse seems easy to do this. From wikipedia,I found an example in C. So,I start reading and editing this code to understand how it works. I written the missing routines according to descriptions on wikipedia's page,but it doesn't work from any expression as I expected. For example: `1+2*3+1;` returns

> error: statement: syntax error

Can someone explain what am I missing?

The current C code:

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef enum {ident, number, lparen, rparen, 
          times, // symbol *
          slash, // symbol \ not added yet
          plus, // symbol +
          minus, //symbol -
          eql, //symbol ==
          neq, // !=
          lss, // <
          leq,// <=
          gtr, // >
          geq, // >= 
          callsym, // not added yet 
          beginsym, // not added yet 
          semicolon, // ;
          endsym, 
          ifsym, whilesym, becomes, thensym, dosym, constsym, 
          comma, //:
          varsym, procsym, period, oddsym, 
          not, // !
          eq // =
} Symbol;

Symbol sym;
int peek;
void getsym(void);
void error(const char*);
void expression(void);
void program(void);
void nexttok(void);

#define is_num(c) ((c) >= '0' && (c) <= '9')
#define is_letter(c) ((c) <= 'a' && (c) <= 'z' || (c) >= 'A' && (c) <= 'Z')

int main(void)
{
  program();
  return 0;
}

void nexttok(void)
{
  peek = getchar();
}

void getsym(void)
{
  for(;;) {
    nexttok();
    if(peek == ' ' || peek == '\t') continue;
    else if(peek == EOF) break;
    else break;
  }
  //static char buf[256];
  switch(peek) {
  case '+': sym = plus; return;
  case '-': sym = minus; return;
  case '*': sym = times; return;
  case ';': sym = semicolon; return;
  case ':': sym = comma; return;
  case '=': 
    nexttok();
    if(peek == '=')
      sym = eql;
    else
      sym = eq;
    return;
  case '!': 
    nexttok();
    if(peek == '=')
      sym = neq;
    else
      sym = not;
    return;
  case '<':
    nexttok();
    if(peek == '=')
      sym = leq;
    else
      sym = lss;
    return;
  case '>':
    nexttok();
    if(peek == '=')
      sym = geq;
    else
      sym = gtr;
    return;
  }
  if(is_num(peek)) {
    sym = number;
    return;
  }
}

int accept(Symbol s) {
    if (sym == s) {
        getsym();
        return 1;
    }
    return 0;
}

int expect(Symbol s) {
    if (accept(s))
        return 1;
    error("expect: unexpected symbol");
    return 0;
}

void factor(void) {
    if (accept(ident)) {
        ;
    } else if (accept(number)) {
        ;
    } else if (accept(lparen)) {
        expression();
        expect(rparen);
    } else {
        error("factor: syntax error");
        getsym();
    }
}

void term(void) {
    factor();
    while (sym == times || sym == slash) {
        getsym();
        factor();
    }
}

void expression(void) {
    if (sym == plus || sym == minus)
        getsym();
    term();
    while (sym == plus || sym == minus) {
        getsym();
        term();
    }
}

void condition(void) {
    if (accept(oddsym)) {
        expression();
    } else {
        expression();
        if (sym == eql || sym == neq || sym == lss || sym == leq || sym == gtr || sym == geq) {
            getsym();
            expression();
        } else {
            error("condition: invalid operator");
            getsym();
        }
    }
}

void statement(void) {
    if (accept(ident)) {
        expect(becomes);
        expression();
    } else if (accept(callsym)) {
        expect(ident);
    } else if (accept(beginsym)) {
        do {
            statement();
        } while (accept(semicolon));
        expect(endsym);
    } else if (accept(ifsym)) {
        condition();
        expect(thensym);
        statement();
    } else if (accept(whilesym)) {
        condition();
        expect(dosym);
        statement();
    } else {
        error("statement: syntax error");
        getsym();
    }
}

void block(void) {
    if (accept(constsym)) {
        do {
            expect(ident);
            expect(eql);
            expect(number);
        } while (accept(comma));
        expect(semicolon);
    }
    if (accept(varsym)) {
        do {
            expect(ident);
        } while (accept(comma));
        expect(semicolon);
    }
    while (accept(procsym)) {
        expect(ident);
        expect(semicolon);
        block();
        expect(semicolon);
    }
    statement();
}

void program(void) {
    getsym();
    block();
    expect(period);
}

void error(const char *msg)
{
  fprintf(stderr,"error: %s\n",msg);
  exit(1);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-21T02:36:10.947

`statement`从不调用`expression`，因此所有表达式都将是语法错误。要解决此问题，您需要进行更改`statement`，以便它调用`expression`if`sym`是一个有效符号来启动表达式。（`accept`将是不可接受的，因为它会消耗符号并且`expression`看不到它。）

# firebase - 实时点击/链接计数器

> ID：16127389
> 
> 赞同：0
> 
> 时间：2013-04-21T02:33:19.613
> 
> 标签：firebase

我有这个代码...

```
<script>
      $(document).ready(function(){
    var x = 0;    
    function resetcounter() {
    x = 0;
    document.getElementById("counting").value = x;
    }

   function count() {
   if(x<50)
    {
      x += 1;
    }
    else
    {
        x=0;
    }
    document.getElementById("counting").value = x;
   }
   $('#btn').click(

         function() {
         count();
    });

    $('#reset').click(

    function() {
           resetcounter();
    });  
});
</script> 
```

效果很好。但是我需要它来实时更新。我想使用火力基地。我如何将提要放入火力基地。基本上我需要这个...每次有人点击我网站上的某个按钮时，都会有计数器跟踪它被点击的次数，并实时显示给页面上的每个人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T03:26:48.833

这里的一般方法是将您的“x”变量移到 Firebase 并使用它来支持计数器的状态。由于我们正在对多个潜在客户进行计数，因此我们将这些更新包装在一个事务中。

它看起来像这样：

```
var x = new Firebase('https://countingex.firebaseio-demo.com/');

x.on('value', function f(s) {
    $('#counting').text(0 + s.val());
});

$('#btn').click(function() {
  x.transaction(function(current_value) {
    return current_value + 1;
  });
});

$('#reset').click(function() {
    x.set(0);
}); 
```

我[在 JSFiddle 上放了一个工作示例](http://jsfiddle.net/qgHPc/2/)；通过在多个窗口中打开它来查看。为简单起见，我省略了针对幻数 50 的条件。

要开始使用其他 Firebase 基础知识，我建议您查看我们的[交互式教程](https://www.firebase.com/tutorial/#gettingstarted)。

# mysql - SqlContainer 过滤区分大小写的 Vaadin

> ID：16127391
> 
> 赞同：0
> 
> 时间：2013-04-21T02:34:09.313
> 
> 标签：mysql, macos, vaadin, case-sensitive, case-insensitive

我是 Vaadin 的新手，一直在尝试使用 SqlContainer。我已经设法让 mysql 数据库连接正常工作。这是连接和容器代码：

```
import java.io.Serializable;
import java.sql.SQLException;

import com.vaadin.data.util.sqlcontainer.SQLContainer;
import com.vaadin.data.util.sqlcontainer.connection.JDBCConnectionPool;
import com.vaadin.data.util.sqlcontainer.connection.SimpleJDBCConnectionPool;
import com.vaadin.data.util.sqlcontainer.query.TableQuery;
import com.vaadin.data.util.sqlcontainer.query.generator.filter.QueryBuilder;
import com.vaadin.data.util.sqlcontainer.query.generator.filter.StringDecorator;

public class DatabaseHelper implements Serializable {
    private JDBCConnectionPool connectionPool = null;
    private SQLContainer credentialContainer= null;

    public DatabaseHelper() {
        initConnectionPool();
    }

    private void initConnectionPool() {
        try {
            Class.forName("com.mysql.jdbc.Driver");
            connectionPool = new SimpleJDBCConnectionPool(
                    "com.mysql.jdbc.Driver",
                    "jdbc:mysql://localhost:3306/vaadin", "root", "mysqlpass",
                    2, 10);
            initContainers();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private void initContainers() {
        try {
            /* TableQuery and SQLContainer for personaddress -table */
            QueryBuilder.setStringDecorator(new StringDecorator("`","`"));
            TableQuery q1 = new TableQuery("credentials", connectionPool);
            q1.setVersionColumn("version");
            credentialContainer= new SQLContainer(q1);
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public SQLContainer getcredentialContainer(){
        return credentialContainer;
    }

} 
```

然后我在容器上使用了过滤器：

```
credentialcontainer.removeAllContainerFilters();
credentialcontainer.addContainerFilter("username", username.getValue(), false, true); 
```

但是，问题是我注意到过滤器忽略大小写，即使我将其设置为 ignoreCase 参数为 false。

任何人都知道这是一个错误还是我做错了什么？注意：我正在使用 OS X 并运行本地 MYSQL 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:06:04.510

现在解决了！问题不在于 Vaadin SqlContainer。我没有意识到由于 MYSQL 上的默认排序规则，比较不区分大小写。

# android - 有没有办法在不触发 onPause/onResume 的情况下获取 NFC 标签？

> ID：16127392
> 
> 赞同：8
> 
> 时间：2013-04-21T02:34:12.187
> 
> 标签：android, nfc, onnewintent

看这个问题： [onNewIntent() 生命周期和注册的侦听器](https://stackoverflow.com/questions/8619883/onnewintent-lifecycle-and-registered-listeners)

我看到 OP 遇到了同样的问题，但我不清楚为什么提供的解决方案符合他的目的。

当用户将他们的 NFC 轻触到设备时，我正在从传入的 Intent 中收集信息，但是，我不希望在收集这些数据时触发 onPause 或 onResume。如果没有办法阻止这种情况的发生，除了侦听 onNewIntent 之外，我还有其他方法可以收集传入的 NFC 信息吗？我在 onResume 中有一堆逻辑，完全没有准备好在用户没有离开应用程序时突然处理被突然调用......我希望避免不得不重构我的代码来处理这个意外意外情况。提前致谢。

# c - 如何纠正C中的大数组？

> ID：16127406
> 
> 赞同：0
> 
> 时间：2013-04-21T02:36:29.633
> 
> 标签：c, arrays

我有一个运行良好的简短 C 程序，直到我输入一个大数字作为第一个参数。如果我使用 10000000，但不是 1000000，我会得到`Segmentation fault`。我很确定这是因为数组太大了。我怎样才能解决这个问题？我对C很陌生。

这是我的代码：

```
#include <stdio.h>
#include <math.h>
#include <stdlib.h>

int isPrime(int n);

int main(int argc, char **argv) {
    int limit;
    limit = strtol(argv[1], NULL, 0);
    int scur = 0, checkp = (int) (limit / 275);

    if (limit < 2) {
        printf("Invalid limit.\n");
        return 0;
    }

    int primes[limit];
    primes[0] = 2;
    int i, j = 1;
    printf("Generating primes...\r");
    for (i = 3; i < limit; i += 2, scur++) {
        if (scur == checkp) {
            scur = 0;
            printf("\rGenerating primes... (%.2f%%)", (i * 100.0 / limit));
        }
        if (isPrime(i)) {
            primes[j] = i;
            j++;
        }
    }
    printf("\nPrimes below %i generated.\n", limit);
    printf("Writing to file...\n");

    FILE *file;
    file = fopen("primes.txt", "w");
    int k;
    for (k = 0; k < (sizeof(primes) / sizeof(int)); k++) {
        if (primes[k] == 0) break;
        fprintf(file, "%i\n", primes[k]);
    }
    fclose(file);
    printf("Finished.\n");

    return 0;
}

int isPrime(int n) {
    if (n < 2) return 0;
    else if (n == 2) return 1;
    else {
        if (n % 2 == 0) return 0;
        int i;
        for (i = 3; i < ((int) sqrt(n)) +1; i += 2) {
            if (n % i == 0) return 0;
        }
    }
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T02:42:32.223

代替：

```
int primes[limit]; 
```

和

```
int *primes = calloc(limit,sizeof(int)); 
```

更新循环边界：

```
for (k = 0; k < limit; k++) {
    if (primes[k] == 0) break;
    fprintf(file, "%i\n", primes[k]);
} 
```

并在使用后释放内存：

```
free(primes); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T02:39:57.003

您想在此处为堆栈分配太多内存`int primes[limit];`

改用[动态分配](http://www.cplusplus.com/reference/cstdlib/malloc/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T02:44:29.757

您的`primes`数组在`main()`堆栈上分配，whick 有一个固定的大小限制。

试着把它放在堆上：

```
int* primes = (int*)malloc(limit * sizeof(int)); 
```

完成后将其从堆中删除：

```
free(primes); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T02:42:36.860

```
int* primes = (int*) malloc(sizeof(int) * limit);

...

free(primes) 
```

# amazon - 没有 S3 的 Cloudfront

> ID：16127411
> 
> 赞同：2
> 
> 时间：2013-04-21T02:38:30.877
> 
> 标签：amazon, amazon-cloudfront

因此，我想使用 Amazon Cloudfront 为我的网站提供所有图像（和一些脚本），并使用我的服务器作为后备（来源）。但是，它似乎一直默认为我服务器上的版本。我已经使用指向我的服务器的自定义 cname 设置了 Cloudfront。

我假设在请求时：images.mydomain.com/18/photo.jpg（images.mydomain.com 被命名为我的 cloudfront url）它会首先查看 photo.jpg 是否存在于 cloudfront 中，如果不存在则缓存它下次它要求从云端提供服务吗？或者我还有其他事情要做（比如触发上传到云端）？

它一直默认为我服务器上的文件，这显然毫无意义......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:35:43.467

您需要确保 Cloudfront 在再次访问源之前被告知要提供文件多长时间。

查看`Behaviours`CloudFront 分配中的选项卡。对于每种类型的文件，您可以告诉 CloudFront：

*   `Use Origin Cache Headers`，在这种情况下，您需要确保您的服务器正在生成`Cache-Control`和/或`Expires`标头。

*   `Customize`，在这种情况下，您提供`Minimum TTL`（生存时间）。CloudFront 将在此秒数内提供文件，然后返回到您的服务器以查看它是否已更改。

# mysql - 尝试使用ajax从mysql中提取数据

> ID：16127415
> 
> 赞同：0
> 
> 时间：2013-04-21T02:39:13.837
> 
> 标签：mysql, ajax

我正在尝试根据来自 html 表单的 gpa 输入从 mysql 数据库中通过基于 ajax 的表单来吸引学生。

这是我的表单的代码：

```
<html>
<body>
<script language="javascript" type="text/javascript">
<!-- 
//Browser Support Code
function ajaxFunction(){
 var ajaxRequest;  // The variable that makes Ajax possible!

 try{
   // Opera 8.0+, Firefox, Safari
   ajaxRequest = new XMLHttpRequest();
 }catch (e){
   // Internet Explorer Browsers
   try{
      ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
   }catch (e) {
      try{
         ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
      }catch (e){
         // Something went wrong
         alert("Your browser broke!");
         return false;
      }
   }
 }
 // Create a function that will receive data 
 // sent from the server and will update
 // div section in the same page.
 ajaxRequest.onreadystatechange = function(){
   if(ajaxRequest.readyState == 4){
      var ajaxDisplay = document.getElementById('ajaxDiv');
      ajaxDisplay.value = ajaxRequest.responseText;
   }
 }
 // Now get the value from user and pass it to
 // server script.
 var gpa = document.getElementById('gpa').value;
 var queryString = "?gpa=" + gpa ;
 ajaxRequest.open("GET", "ajax.php" + 
                              queryString, true);
 ajaxRequest.send(null); 
}
//-->
</script>
<form name='myForm'>
GPA: <input type='text' id='gpa' /> <br />
<br />
<input type='button' onclick='ajaxFunction()' 
                              value='Search for students with higher GPA'/>
</form>
<div id='ajaxDiv'>Your result will display here</div>
</body>
</html> 
```

这是我的处理代码：

```
<?PHP

include_once ('database.php');

$gpa = $_GET['gpa'];
    // Escape User Input to help prevent SQL Injection
$gpa = mysql_real_escape_string($gpa);

    //build query
$data = $conn->query("SELECT * FROM StudentGPA WHERE GPA = $gpa");
    //Execute query
$qry_result = mysql_query($data) or die(mysql_error());

    //Build Result String
$display_string = "<table>";
$display_string .= "<tr>";
$display_string .= "<th>Student ID</th>";
$display_string .= "<th>Name</th>";
$display_string .= "<th>Gender</th>";
$display_string .= "<th>Major</th>";
$display_string .= "<th>GPA</th>";
$display_string .= "</tr>";

// Insert a new row in the table for each person returned
while($row = mysql_fetch_array($qry_result)){
    $display_string .= "<tr>";
    $display_string .= "<td>$row[studentID]</td>";
    $display_string .= "<td>$row[name]</td>";
    $display_string .= "<td>$row[gender]</td>";
    $display_string .= "<td>$row[major]</td>";
    $display_string .= "<td>$row[GPA]</td>";
    $display_string .= "</tr>";

}
echo "Query: " . $query . "<br />";
$display_string .= "</table>";
echo $display_string;
?> 
```

表单工作正常，但是当我单击提交按钮时，什么也没有发生。我没有从任何地方拉出任何错误，所以我真的看不到那里发生了什么。有没有办法可以明显地看到错误或什么？我不确定为什么它没有从数据库中提取任何数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T02:44:20.877

您需要更改`ajaxDisplay.value = ajaxRequest.responseText;`为`ajaxDisplay.innerHTML = ajaxRequest.responseText;`

# node.js - Nodejs 可以在 Apache 后面运行吗？它是否受支持？

> ID：16127422
> 
> 赞同：3
> 
> 时间：2013-04-21T02:40:05.310
> 
> 标签：node.js, mod-perl, mod-php

Apache 为每个请求创建一个新线程，或者更准确地说，它重用线程池中的一个线程，但 Node.js 本质上是一个线程。在 Apache 网络服务器后面运行 Node.js 网络应用程序会有任何复杂性吗？例如，我可以有以下配置吗？

[http://mywebsite.com/wordpress](http://mywebsite.com/wordpress) <-- mod_php

[http://mywebsite.com/bugzilla](http://mywebsite.com/bugzilla) <-- mod_perl

[http://mywebsite.com](http://mywebsite.com) <-- 指向 Node.js 应用程序

Node.js 是否有任何官方支持的 Apache 插件？

实现此拓扑的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T02:46:10.300

你可以这样设置。您可以使用 mod_proxy 反向代理发往 Node.js 的请求。它会起作用，但是如果您正在寻找更好的选择，我建议您在前端运行 Nginx 并将您的请求反向代理到后端 Apache`/wordpress`并`/bugzilla`路由，然后将所有其他请求反向代理到后端 Node.js。

# php - 如何显示导致异常的行，而不是异常发生的位置？

> ID：16127428
> 
> 赞同：0
> 
> 时间：2013-04-21T02:42:15.177
> 
> 标签：php, exception

如果函数由于调用代码未正确调用而引发异常，如何使错误显示调用代码的文件和行号，而不是（或除了）引发异常的行？

IE：

```
class MyClass {
   public function __call($MethodName, $Parameters)
   {
       if (!property_exists($this, $PropertyName))            
         throw new Exception('Error Getting Property: ' . $PropertyName . ' does not exist!');
       // THIS line number appears in the exception, but
       // is useless because it isn't the problem.
   }
}

$MyClass = new MyClass();
// THIS line number should be in the exception,
// since its the line that's wrong.
$MyClass->GetSomethingThatDoesNotExist(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:35:12.893

有几个选择；

## 自己滚

使用 PHP 中的[debug_print_backtrace()](http://php.net/manual/en/function.debug-print-backtrace.php)函数，您可以制作一些东西来显示您自己的输出。

## 用于输出堆栈跟踪的预构建库

您还可以安装很棒的[whoops](https://github.com/filp/whoops)包以获得更好的问题输出以及代码如何到达那里，请在此处查看：[https ://github.com/filp/whoops](https://github.com/filp/whoops)

## Xdebug

这是首选，因为它具有更好的 var_dump() 输出以及其他巨大优势。安装后，它只会使您的所有调试和错误输出变得更有洞察力且更易于阅读。

安装[xdebug](http://xdebug.org/docs/install)以显示导致问题的整个事件流的更详细的输出，称为堆栈跟踪。

# regex - 正则表达式 - 不捕获负字符类

> ID：16127433
> 
> 赞同：0
> 
> 时间：2013-04-21T02:42:51.877
> 
> 标签：regex, sed

我正在尝试编写不同的 sed 脚本来美化 ruby​​ 代码。我试图解决的一种情况`a=>b`是`a=> b`用`a => b`. 匹配此条件的正则表达式是，`[^ ]=>`但它也匹配之前的 1 个字符`=>`。所以，当我尝试替换它时，并没有给我想要的结果`s/[^ ]=>/ =>/g`

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:48:42.960

您需要使用捕获：

```
s/\([^ ]\)=>/\1 =>/g 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T02:48:23.320

无条件更换双方如何？

```
s/ ?=> ?/ => /g 
```

# r - 可能性的乘积太小 - R 只给出 0

> ID：16127435
> 
> 赞同：5
> 
> 时间：2013-04-21T02:43:11.877
> 
> 标签：r, statistics

我试图在 R 中计算这个后验分布。问题是分子太小，它是一堆 dbern(p_i, y_i) < 1 的乘积。（我的 n 约为 1500）。因此，R 吐出 0，所有 \theta 的后验值也为 0。

澄清一下，每个 y_i 都有自己的 p_i，这些 p_i 一起为 n y 组成一个包含 n 个元素的向量。每个 theta 都有自己的 n 元素向量 p_i。

![在此处输入图像描述](https://i.stack.imgur.com/fmEY6.png)

一个可重复的例子（分子）

```
p <- sample(seq(0.001,0.999,by=0.01), 1500, replace=T)
y <- sample(c(0,1), 1500, replace=T)
dbern(y, p) # 1500-element vector, each element < 1
prod(dbern(y, p)) # produces 0
exp(sum(log(dbern(y, p)))) # produces 0 
```

编辑（上下文）：我正在做贝叶斯变化点分析（jstor.org/stable/25791783 - Western and Kleykamp 2004）。与论文中的连续 y 不同，我的 y 是二进制的，所以我使用的是 Albert 和 Chib (1993) 中的数据增强方法。使用这种方法，y 的可能性是伯努利，p = cdf-normal(x'B)。

那么 p 如何取决于 theta 呢？这是因为θ是变化点。其中一个 x 是时间虚拟变量——例如，如果 theta=10，那么对于第 10 天之后的所有观测值，时间虚拟变量 = 1，对于第 10 天之前的所有观测值，时间虚拟变量 = 0。

因此，p 取决于 x，x 取决于 theta - 因此，p 取决于 theta。

我需要上述数量，因为它是吉布斯采样中 theta 的完整条件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T02:44:37.677

解决此类精度问题的一种方法是在日志空间中工作。但是，这会引入分母的对数和积，这通常可能会很痛苦。

如果您出于优化的目的计算后验，请注意您可以完全删除分母：您无需进行归一化即可找到`argmax`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T06:37:07.903

好吧，我运行了您的示例，您（正如预期的那样）得到了，`0`因为有一个`0`

```
p <- sample(seq(0,1,by=0.01), 1500, replace=T)
y <- sample(c(0,1), replace=T)
x <- dbern(y, p)
any(x == 0)
## [1] TRUE 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T06:15:23.057

我也在 Cross Validated 上问了这个问题，[glen_b](https://stats.stackexchange.com/users/805/glen-b)在下面给了我这个（经过测试的）解决方案：

* * *

这是计算各种模型的可能性的常见问题；通常做的事情是在日志上工作，并使用一个通用的比例因子将值带入一个更合理的范围内。

在这种情况下，我建议：

第 1 步：选择一个相当“典型”的 θ，θ0。将通用项的分子和分母的公式除以 θ=θ0 的分子，以得到不太可能下溢的东西。

步骤2：在对数尺度上工作，这意味着分子是对数差异和的exp，分母是对数差异和的exp的总和。

注意：如果您的任何 p 是 0 或 1，请将它们单独拉出并且不要记录这些术语；它们很容易按原样评估！

分子中的常用项在大小上往往会更适中，因此在许多情况下，分子和分母都是相对合理的。

如果分母中有一系列尺寸，请先将较小的尺寸相加，然后再添加较大的尺寸。

如果一个或几个术语占主导地位，您应该将注意力集中在使那些相对准确的计算上。

# php - 如何使用我的 routes.php 中的多维数组在我的视图中有两个 select 语句？

> ID：16127438
> 
> 赞同：0
> 
> 时间：2013-04-21T02:44:11.590
> 
> 标签：php, laravel, laravel-4

简单地说，我想进行一项调查，询问一个人一周喝了多少啤酒，抽了多少支烟。在我的 routes.php 中，我尝试过：

```
for ($numcigs=1; $numcigs<=60; $numcigs++) {
    $data['numcigs'][$numcigs] = $numcigs . ' cigarettes';
} 
```

然后，在我看来，我有：

```
{{ Form::select('numcigs',$data['numcigs']) }} 
```

不幸的是，这给了我错误：未定义的变量：数据

让我如此困惑的部分是我如何从我的路线中定义的一个数组中创建两个选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T02:46:30.690

直接使用`$numcigs`：

```
{{ Form::select('numcigs', $numcigs) }} 
```

中的所有数组键都会`$data`自动[`extract`](http://php.net/manual/en/function.extract.php)编辑到视图中，以便您可以直接访问它们。

* * *

以上假设您将您的传递`$data`到视图中：

```
View::make('path/to/view', $data); 
```

# google-chrome-app - toDATAURL JPEG 在 chrome 打包的应用程序中无法正常工作

> ID：16127441
> 
> 赞同：0
> 
> 时间：2013-04-21T02:44:27.113
> 
> 标签：google-chrome-app

当我尝试 a: `canvas.toDataURL('image/jpeg');` 在 chrome 打包的应用程序中，结果是 png 数据 url 而不是 jpeg url。另外，我也不能提供质量，即。 `canvas.toDataURL("image/jpeg",0.7);` 当且仅当我添加质量指标时，会抛出一个异常说该方法不存在。

难道我做错了什么？

# python - 为什么在使用 numpy.where 构建时我的数组长度为 1？

> ID：16127444
> 
> 赞同：4
> 
> 时间：2013-04-21T02:44:51.450
> 
> 标签：python, arrays, numpy

我想使用 numpy.where 中的索引值来打印该索引的字符串内容。我试图通过从 0 到数组长度迭代数组来做到这一点。但是长度总是1..？

```
import numpy as np
v,w,x, y, z = np.loadtxt('test.txt', dtype=str, delimiter='|',
                             skiprows=2,usecols=(0,1,2,3,4), unpack=True)
a,b,c, d, e = np.loadtxt('test2.txt', dtype=str, delimiter='|',
                             skiprows=2,usecols=(0,1,2,3,4), unpack=True)

checkValue = np.in1d(a, v)
missingValue=(np.where(checkValue==False))
print len(missingValue)
for i in range (len(MissingValue)):
    print a[i] 
```

这只会打印一个值，但数组实际上有 10

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T03:06:12.317

`numpy.where`总是返回一个数组*元组*，即使参数是一维的。它为每个维度返回一个数组。

例如：

```
In [2]: a = np.array([10, 5, 3, 9, 1])

In [3]: np.where(a > 5)
Out[3]: (array([0, 3]),) 
```

请注意，它`Out[3]`显示了一个长度为 1 的元组。元组中的单个对象是索引的 numpy 数组。要获取数组，只需将其从元组中拉出：

```
In [4]: np.where(a > 5)[0]
Out[4]: array([0, 3]) 
```

对于您的代码，将您的计算更改`missingValue`为

```
missingValue = np.where(checkValue == False)[0] 
```

# php - 正确的表格输入卫生

> ID：16127445
> 
> 赞同：2
> 
> 时间：2013-04-21T02:45:20.260
> 
> 标签：php, jquery, forms, codeigniter, input-sanitization

我有从我的表单中收集的表单字段

```
 var dataString = $("form").serialize(); 
```

然后我将它作为 dataType "html" 发送到我的控制器

我的 dataString 的 var_dump 看起来像这样（到目前为止，它将包含电子邮件地址、选择选项等）

```
array(3) {
  ["username"]=>
  string(5) "mikey"
  ["firstname"]=>
  string(4) "tes%"
  ["lastname"]=>
  string(6) "tester" } 
```

我的问题如下：在将数据发送到我的模型之前，我应该使用什么正确的表格卫生方法？我知道我需要去除特殊字符等，我应该使用一些预打包的类吗？

我需要像这样分解我的数据吗

```
 $username =  trim(Array[0]) ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:59:33.400

CodeIgniter 的[`xss_clean`](http://ellislab.com/codeigniter/user-guide/helpers/security_helper.html)功能应该足以满足大多数用途。

编辑：感谢@Starx's answer指出您可以通过`$config['global_xss_filtering'] = TRUE;`在`config.php`文件中设置来自动为您调用此功能。

另请查看表单验证类。这是一个示例： [http ://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#preppingdata](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#preppingdata)

另外，由于您通过 AJAX 发送表单数据，我只想提一下，在 Javascript 中进行输入清理是相当无用的，因为它可以绕过它，所以在服务器端进行，因为您似乎打算这样做无论如何，绝对是要走的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T03:00:59.847

启用 XSS 过滤`application/config/config.php`

```
$config['global_xss_filtering'] = TRUE; 
```

# html - 如果需要动态高度，如何让表格自动滚动（y）？

> ID：16127446
> 
> 赞同：1
> 
> 时间：2013-04-21T02:45:35.040
> 
> 标签：html, css

本质上，我希望一个表格尽可能多地显示在您的浏览器窗口中。但不是向下滚动整个页面，我只需要滚动 tbody 即可。你能帮我吗？

这是一个帮助的小提琴：http: [//jsfiddle.net/drKpT/](http://jsfiddle.net/drKpT/)

还有我的 HTML：

```
<div id="container">
    <div id="header"><h1>This is my header</h1></div>
    <div id="sidebar"><ul><li>Nav 1</li><li>Nav 2</li></ul></div><div id="content">
        <div id="title"><h2>This is my content title</h2></div>
        <div id="data">
            <table>
                <thead>
                    <tr><th>id</th><th>name</th></tr>
                </thead>
                <tbody>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>Pssssssst... &nbsp; &nbsp; I'd like this area (tbody) to scroll if it's taller than the window you're in</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                    <tr><td>1</td><td>abc</td></tr>
                </tbody>
            </table>
        </div>
    </div>
    <div id="footer"><p>This is my footer</p></div>
</div> 
```

和 CSS：

```
div,ul,li,h1,h2,td,tr {
    padding:0;margin:0;
}
#container {
    width:100%;
    background:#efefef;
}
#header {
    width:100%;
    display:inline-block;
    background:#dedede;
}
#sidebar {
    display:inline-block;
    width:20%;
    background:#cdcdcd;
}
#content {
    display:inline-block;
    width:80%;
    background:#bcbcbc;
}
table {
    border-collapse:collapse;border-spacing:0;
    width:100%;
}
tbody {
    border:3px dashed;
    width:100%;
}
#footer {
    width:100%;
    background:#ababab;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:08:12.837

您无法更改 tbody 的大小，因为它随着内容高度的扩展而扩展。要回答此解决方案，您需要创建另一个表。所以你有一张只包含 thead 的表。放在下面的另一个表只包含 tbody，包裹在一个带有溢出自动和一些高度的 div 中

如果您希望您的表格尽可能多地填充可用空间，请使用以下伪代码逻辑：

`wanted_height = window_height - header_height - footer_height - some_fix_constant`

编辑：第三版， http: [//jsfiddle.net/drKpT/3/](http://jsfiddle.net/drKpT/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T03:33:46.847

您可以使用`overflow`css 属性。它允许您定义大于包含对象的内容会发生什么。如果您总是想要显示滚动条，即使不可能，您也可以使用`overflow: scroll;`. 如果您只想在容器可滚动时看到滚动条，请使用`overflow: auto;`. `overflow: auto`是最常见的设置。

```
tbody{
overflow: auto;
position: absolute;
height: 100%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T02:59:18.140

你可以像这样使用它：

```
tbody {
    border:3px dashed;
    width:100%;
    overflow: auto;
} 
```

# php - 即使数据类型设置为字符串，mySQL 也会删除前导零

> ID：16127450
> 
> 赞同：2
> 
> 时间：2013-04-21T02:46:10.857
> 
> 标签：php, mysql, sql, database

我有一个 mySQL 地址数据库，对于邮政编码列，我需要 mySQL 来保留前导零。无论我做什么，都会从邮政编码中删除前导零。我尝试将列设置为 varchar 和 char 认为字符串类型可以解决问题，但这不起作用。我可以手动更改数据库中的数字以包含零，但使用 PHP 添加 zip 会导致“01234”更改为“1234”。

还有其他建议吗？谢谢！

代码：

```
$input_zip = "01234";

$query_buildzip = "INSERT INTO dir_zipcode(zipcode) VALUES($input_zip)";

$result_buildzip = mysql_query($query_buildzip); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-21T02:50:36.220

您缺少引号：

```
$query_buildzip = "INSERT INTO dir_zipcode(zipcode) VALUES('$input_zip')";
//                                                         ^          ^ 
```

# c# - 重生被摧毁的游戏对象（敌人）

> ID：16127453
> 
> 赞同：0
> 
> 时间：2013-04-21T02:46:31.360
> 
> 标签：c#, unity3d

我正在编写一个游戏（2D 平台游戏），我试图让敌人在玩家重生时重生。我不能简单地重新加载关卡，因为我有一些在关卡加载时会加载的对象，因此会导致一些问题。相反，为了重生玩家，我让它回到了它的起始位置（我处理了失去的生命和其他细节）。

玩家通过击中敌人的头来摧毁敌人，如下所示（在玩家的 OnTriggerEnter 中）：

```
if(otherObject.CompareTag("Minion")) //hit by minion
    {
        if(hitFromTop(otherObject.gameObject)) //if player jumped on enemy
        {
            otherObject.GetComponent<Minion>().setMoving(false); //stop moving
            playSound(KillEnemySound); //play killing enemy sound
            jump();
            Destroy(otherObject.gameObject); //kill minion

        }
                    //else hurt player
    } 
```

如您所见，我完全摧毁了敌人的物体。为了维护哪些敌人在哪里，我在创建时将它们添加到列表中（存储在单独的游戏对象中）。该列表是在单独的敌人重生对象中创建的，如下所示：

```
void Start ()
{
    enemyList = GameObject.FindGameObjectsWithTag("Minion");
    Debug.Log ("Adding all minions to list");
} 
```

我正在尝试调用一个函数，通过遍历列表在其原始位置重新生成列表中的所有奴才。功能如下：

```
public void RespawnAll()
{
    foreach(GameObject minion in enemyList)
    {
        Destroy(minion); //make sure to respawn ALL minions
    }
    Debug.Log ("Respawning all");
    foreach(GameObject minion in enemyList)
    {
        Debug.Log ("instantiating minions from list");
        Instantiate (minion, minion.GetComponent<Minion>().origPosition, Quaternion.identity);
    }
} 
```

我知道删除所有敌人并重生它们并不是最适时的方法，如果这个逻辑是错误的或者你知道更好的方法，我愿意接受新的想法。

这个想法的问题是，我收到一个错误：

`MissingReferenceException: The object of type 'GameObject' has been destroyed but you are still trying to access it. Your script should either check if it is null or you should not destroy the object.`

看来我正在向列表中添加对现有奴才的引用而不是副本。如何在原始位置正确重生敌人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T03:23:10.390

我接受了 Jerdak 的建议，没有消灭敌人，而是禁用了他们。这样，它们仍然存在，我可以循环并重新启用所有被禁用（杀死）的敌人。

# java - REST - 使用 Spring MVC 返回创建的对象

> ID：16127454
> 
> 赞同：9
> 
> 时间：2013-04-21T02:46:54.833
> 
> 标签：java, json, rest, spring-mvc, standards

我有一个接受 JSON 对象的 REST 调用，比如说一个人。创建此对象（验证并保存到数据库）后，我需要返回新创建的 JSON 对象。

我认为标准做法是返回`201 Accepted`而不是立即返回对象。但是我的应用程序立即需要新创建的对象。

我有一个控制器方法，它接受一个 POST 调用，调用一个服务类，然后调用一个使用 Hibernate 创建对象的 DAO。将其保存到数据库后，我将调用另一个控制器方法，该方法获取人员的 ID 并返回对象。

我的问题，这是更好的方法吗？即调用另一个Controller方法来获取新创建的对象。或者 POST 调用本身应该返回 Object。

**主要问题是：** 调用另一种方法需要往返，我想这是一种矫枉过正。（服务->DAO->休眠->数据库）。相反，我认为我应该在将对象保存在同一个调用中之后立即从数据库中获取它（从处理 POST 的方法中）。

这里的架构标准是什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-21T09:35:57.177

尝试使用`ResponseEntity`which 返回 HTTP 状态以及您需要的对象。

示例代码是（这是我返回客户对象的代码，根据您的需要进行更改）：

```
// imports (for your reference)
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;

// spring controller method
@RequestMapping(value = "getcust/{custid}", method = RequestMethod.GET, produces={"application/json"})
public ResponseEntity<Customer> getToken(@PathVariable("custid") final String custid, HttpServletRequest request) {

    customer = service.getCustById(custid);

    return new ResponseEntity<Customer>(customer, HttpStatus.OK);
} 
```

阅读本[文档](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/http/ResponseEntity.html)以了解更多信息。那里提供了一些示例代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-21T05:55:57.130

来自[POST 的 HTTP 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)：

> 如果在源服务器上创建了资源，则响应应该是 201（已创建）并包含描述请求状态并引用新资源的实体和 Location 标头（参见第 14.30 节）。

您将在响应正文中返回的内容将取决于您解释的严格程度`an entity which describes the status of the request and refers to the new resource`- 许多实现只是返回新创建实体本身的表示。最重要的是将`Location`响应中的标头设置为新创建资源的 URI，以便客户端可以在他们选择时立即获取它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T06:49:23.690

您可以在使用@ResponseBody 将实体对象持久化后，在@ResponseStatus 之后返回实体对象，但这不是标准的，因此您的客户端必须了解此自定义，否则如果您的客户端依赖于标准 API，您必须遵守标准通过返回无效。

# mysql - 警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在

> ID：16127462
> 
> 赞同：0
> 
> 时间：2013-04-21T02:48:43.007
> 
> 标签：mysql, sql

我有一行 PHP 代码出现错误。

```
while($row = mysql_fetch_array($result)) 
```

这行代码是我程序的第**60^行**，

这是完整 PHP 代码的链接：

[http://rancorous-rsps.com/SQL.java](http://rancorous-rsps.com/SQL.java)

我收到以下错误消息：

> 警告：`mysql_fetch_array()`期望参数 1 是资源，在 /home/ranco690/public_html/highscores/index.php 中给出的布尔值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T03:15:57.237

您的查询`$result = mysql_query("SELECT * FROM Ratio ORDER BY Kills DESC LIMIT 20");`一定不正确。检查您是否有表`Ration`、列`Kills`。`$result`在继续之前，您需要进行测试。

例如：

```
if ( $result )
{
   while($row = mysql_fetch_array($result))
   {
      echo $row['playerName'];
      echo "<br />";
   }
   mysql_free_result($result);
}
else
   die( mysql_error()) ; 
```

如您所见，我添加`mysql_free_result($result);`了您没有的。

此外`ranco690_kill`，数据库可能拼写不正确。尝试这个：

```
mysql_select_db("ranco690_kill", $con) || die( "ranco690_kill does not exist." ) ; 
```

祝福，格雷格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T03:20:09.137

首先，您应该将其包装在“如果”中，确保结果是一种资源。

```
$result = mysql_query("SELECT * FROM Ratio ORDER BY Kills DESC LIMIT 20");

if ( $result ) {
    while($row = mysql_fetch_array($result))
    {
        echo $row['playerName'];
        echo "<br />";
    }
} else {
    // there is a problem ...
    echo mysql_error(); // display error so you can fix it
} 
```

# python - 在python中：两个列表之间的区别

> ID：16127463
> 
> 赞同：5
> 
> 时间：2013-04-21T02:48:44.027
> 
> 标签：python, list, compare

我有两个这样的列表

```
found = ['CG', 'E6', 'E1', 'E2', 'E4', 'L2', 'E7', 'E5', 'L1', 'E2BS', 'E2BS', 'E2BS', 'E2', 'E1^E4', 'E5']
expected = ['E1', 'E2', 'E4', 'E1^E4', 'E6', 'E7', 'L1', 'L2', 'CG', 'E2BS', 'E3'] 
```

我想找出两个列表之间的差异。
我已经做好了

```
list(set(expected)-set(found)) 
```

和

```
list(set(found)-set(expected)) 
```

分别返回`['E3']`和`['E5']`。

但是，我需要的答案是：

```
'E3' is missing from found.
'E5' is missing from expected.
There are 2 copies of 'E5' in found.
There are 3 copies of 'E2BS' in found.
There are 2 copies of 'E2' in found. 
```

欢迎任何帮助/建议！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T03:19:38.917

[*collections.Counter*](https://docs.python.org/2.7/library/collections.html#collections.Counter)类将擅长枚举多集之间的差异：

```
>>> from collections import Counter
>>> found = Counter(['CG', 'E6', 'E1', 'E2', 'E4', 'L2', 'E7', 'E5', 'L1', 'E2BS', 'E2BS', 'E2BS', 'E2', 'E1^E4', 'E5'])
>>> expected = Counter(['E1', 'E2', 'E4', 'E1^E4', 'E6', 'E7', 'L1', 'L2', 'CG', 'E2BS', 'E3'])
>>> list((found - expected).elements())
['E2', 'E2BS', 'E2BS', 'E5', 'E5']
>>> list((expected - found).elements()) 
```

您可能还对[difflib.Differ](https://docs.python.org/2.7/library/difflib.html#differ-objects)感兴趣：

```
>>> from difflib import Differ
>>> found = ['CG', 'E6', 'E1', 'E2', 'E4', 'L2', 'E7', 'E5', 'L1', 'E2BS', 'E2BS', 'E2BS', 'E2', 'E1^E4', 'E5']
>>> expected = ['E1', 'E2', 'E4', 'E1^E4', 'E6', 'E7', 'L1', 'L2', 'CG', 'E2BS', 'E3']
>>> for d in Differ().compare(expected, found):
...     print(d)

+ CG
+ E6
  E1
  E2
  E4
+ L2
+ E7
+ E5
+ L1
+ E2BS
+ E2BS
+ E2BS
+ E2
  E1^E4
+ E5
- E6
- E7
- L1
- L2
- CG
- E2BS
- E3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T03:01:01.390

利用 Python[`set`类](http://docs.python.org/2/library/sets.html)和[`Counter`类](http://docs.python.org/2/library/collections.html#collections.Counter)而不是滚动您自己的解决方案：

1.  `symmetric_difference`: 查找要么在一个集合中，要么在另一个集合中的元素，但不能同时在这两个集合中。
2.  `intersection`: 找到两个集合共有的元素。
3.  `difference`：这本质上是您通过从另一组中减去一组来完成的

### 代码示例

*   ```
    found.difference(expected) # set(['E5']) 
    ```

*   ```
    expected.difference(found) # set(['E3']) 
    ```

*   ```
    found.symmetric_difference(expected) # set(['E5', 'E3']) 
    ```

*   查找对象的副本：[此问题](https://stackoverflow.com/questions/9835762/find-and-list-duplicates-in-python-list)已被引用。使用该技术可以获得所有重复项，并使用生成的`Counter`对象，您可以找到多少个重复项。例如：

    ```
    collections.Counter(found)['E5'] # 2 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T02:59:34.687

您已经回答了前两个：

```
print('{0} missing from found'.format(list(set(expected) - set(found)))
print('{0} missing from expected'.format(list(set(found) - set(expected))) 
```

后两个要求你看看计算列表中的重复项，网上有很多解决方案（包括这个：[Find and list duplicates in a list?](https://stackoverflow.com/questions/9835762/find-and-list-duplicates-in-python-list)）。

# java - 二十一点计划，不知道从哪里开始

> ID：16127465
> 
> 赞同：-2
> 
> 时间：2013-04-21T02:48:50.153
> 
> 标签：java, blackjack

所以我有一个编程任务来创建一个二十一点程序。我需要做的就是为 BlackJackHand 类创建方法。我很迷茫。到目前为止我的变量是否正确？这是BlackJackHand：包二十一点；

```
public class BlackjackHand {
    static final int MAX_HAND_SIZE = 5;
    public PlayingCard[] hand;
    public int numCards;
    private DeckOfCards[] deck;

    // an array of cards
    // number of cards in the hand
    // the deck this hand draws cards from

    // This constructor creates a new BlackjackHand using the provided deck.
    // Tip: Initialize all data fields, allocate space for the array of 5 cards,
    // then deal two cards from the deck into cards[0] and cards[1].
    // You'll have 2 cards in your hand, at this point.
    public BlackjackHand(DeckOfCards deck) {
     deck = new DeckOfCards();
   hand = new PlayingCard[5];  
   hand[0] = deck.dealACard();
   hand[1] = deck.dealACard();

    }

    // This method returns the point value of the hand.  It is a simple sum
    // of the PlayingCard values in the hand, except that an ace can count as
    // either 1 or 11 points.
    // Tip: Pretend the ace rule doesn;t exist, and sum up your card values.
    // If the sum is < 12, and there is an ace in the hand, then increment the
    // point value by 10 before returning it.
    public int valueOfHand() {

        return (0);
    }

    // Print out the names of all cards in the hand.
    // Tip: Don't iterate through all 5 cards, necessarily.  Use numCards
    // as the bound in your loop.
    public void printHand() {

    }

    // Return the number of cards in the hand.
    public int sizeOfHand() {
        return 0;
    }

    // Return the most recently dealt card in the hand.
    // Tip: That'll be the card at index numCards-1
    PlayingCard mostRecentCard() {
        return null;
    }

    // Draw a card from the deck.  If the hand already had 5 cards,
    // print out an error message instead.
    // Tip: Put the card from the deck into the array of cards at
    // index numCards, then increment numCards.
    public void hitMe() {
       if (numCards == 5){
           System.out.println("You already have 5 cards.");

       }//if
       else {

       }//else
    }//hitMe 
```

这是 PlayingCards 类

```
package blackjack;

public class PlayingCard {
    private String suit; // "clubs", "diamonds", "hearts" or "spades"
    private int cardFace; // the value on the card. 1 for ace, 2 for 2, 13 for king, etc

    // constructor
    public PlayingCard(int v, String s) {
        cardFace = v;
        suit = s;
    }

    // Is this card an Ace?
    boolean isAce() {
        if(cardFace == 1) {
            return true;
        } else {
            return false;
        }
    }
    // return the blackjack point value of this card
    public int pointValue() {
       if(cardFace > 10) {
           return 10;
       } else {
           return cardFace;
       }
    }

    // make a string of the name of the card
    public String name() {
        String temp = "";

        // concatenate the String equivalent of cardFace to temp
        if(cardFace == 1) {
            temp += "Ace";
        } else if(cardFace == 11) {
            temp += "Jack";
        } else if(cardFace == 12) {
            temp += "Queen";
        } else if(cardFace == 13) {
            temp += "King";
        } else { // a number card
            temp += cardFace; // implcit type conversion of cardFace into String
        }

        // concatenate the name together
        temp = temp + " of " + suit;
        return temp;
    }
} 
```

这是 DeckOfCards 类：

包二十一点；导入 java.util.Random；

公共类 DeckOfCards {

```
private PlayingCard[] cards;
private int topOfDeck; // array index that's "the top of the deck"

public DeckOfCards() {
    cards = new PlayingCard[52];
    for (int i = 1; i <= 13; i++) { // make all the "hearts" cards
        cards[i - 1] = new PlayingCard(i, "hearts");
    }
    for (int i = 1; i <= 13; i++) { // make all the "hearts" cards
        cards[i - 1 + 13] = new PlayingCard(i, "clubs");
    }
    for (int i = 1; i <= 13; i++) { // make all the "hearts" cards
        cards[i - 1 + 26] = new PlayingCard(i, "diamonds");
    }
    for (int i = 1; i <= 13; i++) { // make all the "hearts" cards
        cards[i - 1 + 39] = new PlayingCard(i, "spades");
    }
    topOfDeck = 51;
}

public PlayingCard dealACard() {
    PlayingCard temp = cards[topOfDeck];
    topOfDeck--;
    return temp;
}

public void shuffle() {
    PlayingCard[] tempArray = new PlayingCard[52];

    Random r = new Random();
    for (int i = topOfDeck; i >= 0; i--) {
        int index = r.nextInt(i + 1); // the index of a random card in the deck
        tempArray[i] = cards[index];
        // swap cards[i] with cards[index]
        PlayingCard tempCard = cards[i];
        cards[i] = cards[index];
        cards[index] = tempCard;
    }
    // at this point, tempArray has all the cards selected in random order
    cards = tempArray;
} 
```

}

最后是主班二十一点：

```
package blackjack;

public class Blackjack {
    static final int WINNING_LIMIT = 21;
    static final int STAND_VALUE = 17;

    public static void main(String[] args) {
        DeckOfCards deck = new DeckOfCards();
        deck.shuffle();

        // dealer's starting hand
        System.out.println("Let's play a hand of Blackjack!\nFirst, it's Dealer's turn.");
        BlackjackHand theDealer = new BlackjackHand(deck);
        System.out.println("Dealer begins with a hand of value " + theDealer.valueOfHand() + ":");
        theDealer.printHand();

        // dealer hits until he stands
        while (theDealer.valueOfHand() < STAND_VALUE) {
            if (theDealer.sizeOfHand() >= BlackjackHand.MAX_HAND_SIZE) { // 5 cards under 21: auto-win
                System.out.println("Dealer has drawn a hand of 5 cards, of value " + theDealer.valueOfHand() + ".  Automatic win!");
                theDealer.printHand();
                return;
            }
            theDealer.hitMe();
            System.out.println("Dealer draws a " + theDealer.mostRecentCard().name() + ", and now has " + theDealer.valueOfHand() + " points.");
        }

        // check to see if dealer busts
        if (theDealer.valueOfHand() > WINNING_LIMIT) {
            System.out.println("Dealer busts. Player 2 wins!");
            return;
        }

        System.out.println("Dealer stands with a hand of value " + theDealer.valueOfHand() + ":");
        theDealer.printHand();

        // player 2's starting hand
        System.out.println("Now, it's player 2's turn.");
        BlackjackHand player2 = new BlackjackHand(deck);
        System.out.println("Player 2 begins with a hand of value " + player2.valueOfHand() + ":");
        player2.printHand();

        // player 2 hits until he stands.  Beat the dealer's hand, or bust.
        while (player2.valueOfHand() < theDealer.valueOfHand()) {
            if (player2.sizeOfHand() >= BlackjackHand.MAX_HAND_SIZE) { // 5 cards under 21: auto-win
                System.out.println("Player 2 has drawn a hand of 5 cards, of value " + player2.valueOfHand() + ".  Automatic win!");
                player2.printHand();
                return;
            }
            player2.hitMe();
            System.out.println("Player 2 draws a " + player2.mostRecentCard().name() + ", and now has " + player2.valueOfHand() + " points.");
        }

        // check to see if Player 2 busts
        if (player2.valueOfHand() > WINNING_LIMIT) {
            System.out.println("Player 2 busts. Dealer wins!");
            return;
        }

        System.out.println("The hand is over.");
        System.out.println("Dealer's hand has value " + theDealer.valueOfHand() + ":");
        theDealer.printHand();
        System.out.println("Player 2's hand has value " + player2.valueOfHand() + ":");
        player2.printHand();

        // figure out who won
        if (theDealer.valueOfHand() >= player2.valueOfHand()) {
            System.out.println("Dealer wins!");
        } else {
            System.out.println("Player 2 wins!");
        }
    }//main
}//Blackjack 
```

我知道它令人生畏，但我真的需要一点帮助。我不希望它为我完成，我想帮助理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:54:08.427

```
public int valueOfHand() {

} 
```

从那里开始。你如何确定一手黑杰克的价值？首先，您确定每张卡的价值。PlayingCard 类方便地为每张牌存储一个整数值。创建一个名为 handsum 的变量，并将 hand[0].cardFace 添加到其中。虽然，首先您需要检查该值是否为 1，然后再向 handsum 添加 10（根据说明）。然后将 hand[0] 的值添加到 handsum，再次首先检查该值是否为 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T05:01:20.180

我个人会从 hitMe() 函数开始，另一个答案告诉你如何画一张牌。从那里您需要做的就是将经销商牌和玩家牌分开存储在数组中。从那里您可以轻松获取数组的大小（java 会为您跟踪数组大小）以及最新的卡片（应该是数组中最近添加的卡片）。从那里您需要做的就是打印数组并写入 valueOfHand()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T03:02:32.083

您可能希望将枚举用于花色和/或卡片面。

我不确定您的`shuffle`方法是否足够随机-我认为您对在数组的开头交换元素有很大的偏见，而数组的结尾不会随机化。您可以通过为您的牌组使用 ArrayList 而不是数组来纠正此问题，或者通过使用`Arrays.asList`;构造一个临时 ArrayList 来纠正此问题。创建一个临时 ArrayList，然后`remove`从原始列表中随机元素并将`add`它们放到临时列表的`tempList.add(originalList.remove(r.nextInt(originalList.size())))`末尾`originalList = tempList`（如果您使用的是 ArrayList 作为卡片组）。或者，您可以使用[Collections.shuffle](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)代替您的自定义 shuffle 方法。

# apache - 如何在 Bugzilla 和 Node.js 之间进行单点登录？

> ID：16127466
> 
> 赞同：4
> 
> 时间：2013-04-21T02:49:43.563
> 
> 标签：apache, node.js, single-sign-on, mod-perl2

Bugzilla 在 Apache 网络服务器 (mod_perl2) 后面运行，并将用户存储在 MySQL 数据库中。Node.js 是它自己的网络服务器。如何使用存在于 Bugzilla 的 MySQL 数据库中的用户数据在 Node.js 应用程序中单点登录用户？

更新：正如 Ravi 在下面的评论中提到的，我不是在寻找对用户进行身份验证的解决方案。我正在寻找一种解决方案，该解决方案允许已经在 Bugzilla 中进行身份验证的用户能够登录到 Node.js 应用程序，而无需重新提示进行身份验证。换句话说，我正在寻找单点登录。

# ruby-on-rails - 删除rails ActiveRecord中的updated_at字段是否安全？

> ID：16127469
> 
> 赞同：1
> 
> 时间：2013-04-21T02:50:00.247
> 
> 标签：ruby-on-rails, activerecord

标题真的说明了一切。我有一个带有多行表的 Rails 3.2 应用程序，这些行被添加但从未更改或删除。因此，尽管该列有用，但默认`updated_at`列没有用`created_at`。我可以安全地进行迁移以仅删除`updated_at`吗？

**补充：** 在一个好的指针之后，我仍在研究创建 SQL 更新语句的代码。`created_at`如果它不在模式中，则必须在此处省略该列。在这个应用程序中，我不能仅仅“尝试”并假设如果它在测试中有效，它就会一直有效。我需要绝对确定。我在网上能找到的Rails源码的搜索和交叉链接对下钻帮助不大。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T04:21:28.090

这样做实际上是安全的；

从 ActiveRecord 的 Persitence 层签出第 204 行：[https ://github.com/rails/rails/blob/master/activerecord/lib/active_record/persistence.rb](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/persistence.rb)

它说 ：

> 如果该列可用，则更新 updated_at/updated_on 列。

此外，如果您深入挖掘，您会发现该`touch`方法执行更新 updated_at/on 属性的操作，并且仅当该列存在时才会调用它。

**编辑**

进一步挖掘：如果 created_at/updated_at 列存在，该类`/lib/active_record/timestamp.rb`负责为创建/更新的记录添加时间戳。检查是在`Timestamp::create_record`它构建所有“时间戳列”的数组并循环它们的地方完成的。我想代码很清楚，如果`respond_to?(column) && respond_to?("#{column}=") && self.send(column).nil? write_attribute(column.to_s, current_time)`

# sql - 如何查询存储在不同表中的自定义排序顺序？

> ID：16127472
> 
> 赞同：1
> 
> 时间：2013-04-21T02:50:05.857
> 
> 标签：sql

假设我有一张表 Tbl1 (C1, C2, C3)

**C1-C2-C3**
A - 2 - 6
N - 6 - 7
C - 9 - 4
K - 3 - 5

& 另一个表 OrderOfTbl1 (C1, customOrder int)

**C1 - 定制订单**
K - 1
N - 2
C - 3
A - 4

现在，我可以对 Tbl1 进行各种查询，结果可以是任意顺序
N - 6
A - 2
K - 3

那么，如何让这个结果按照 OrderOfTbl1 表中的 Order 排序呢？

我不想在这两个表之间进行联接，我更喜欢“按案例排序......然后......”解决方案，因为它更自然。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T03:02:24.103

使用联接是您的最佳选择。但是，如果您想避免显式加入，可以这样做：

```
SELECT t.*
FROM table1 t
ORDER BY (SELECT customOrder FROM orderoftbl1 ot WHERE t.c1 = ot.c1) 
```

这个工作的要求是`SELECT`内部`ORDER BY`返回一个标量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T02:55:15.370

正确的方法是使用连接：

```
select t.*
from table1 t left outer join
     orderoftbl1 ot
     on t1.c1 = ot.c1
order by ot.customerOrder 
```

当您有常量时，您可以使用`case`语句：

```
select *
from table1
order by (case when c1 = 'K' then 1
               when c1 = 'N' then 2
               . . .
          end) 
```

但这违背了拥有另一张桌子的目的。

您所说的“解决方案，因为它更自然”是什么意思？是什么让一个 SQL 语句比另一个“更自然”？

您可以使用`order by`子句中的相关子查询来做您想做的事情：

```
select *
from table1 t1
order by (select customerOrder from orderoftbl1 ot where ot.c1 = t1.c1) 
```

然而，几乎没有人会认为这比带有`join`. 事实上，有些数据库可能不支持`order by`子句中的相关子查询。在这个答案之前，我当然从来没有写过这样的 SQL。

# mysql - 使用 CONVERT_TZ 12k+ 记录将东部时区批量转换为 gmt

> ID：16127474
> 
> 赞同：1
> 
> 时间：2013-04-21T02:50:12.377
> 
> 标签：mysql, datetime, convert-tz

```
UPDATE bridge_copy SET 
      game_begin = CONVERT_TZ(game_begin,'EST','GMT'), 
      game_end = CONVERT_TZ(game_end,'EST','GMT'); 
```

这是我试图运行的查询，但它失败了。最终结果是 2 列填充了`0000-00-00 00:00:00`而不是转换。有什么想法可以更新 12k+ 行而不通过一些服务器端脚本来循环它们，该脚本选择当前值，转换它，然后更新它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:42:38.150

您有正确的想法，但您需要使用 mysql.time_zone_name 表中的时区名称。通常这是空的，需要填充。

对我来说 time_zone_name 表是空的，所以我运行（在 Ubuntu linux 上）：

```
 mysql_tzinfo_to_sql /usr/share/zoneinfo |mysql -u root mysql 
```

然后我可以使用以下方法进行测试：

```
 SELECT CONVERT_TZ(game_end, "US/Eastern","GMT") from 
 bridge_copy; 
```

在确认它符合预期后，我可以继续进行更新。注意我使用的是“美国/东部”，只要确保从 mysql.time_zone_name 表中选择一些东西。

有关更多时区信息，请参阅文档。 [http://dev.mysql.com/doc/refman/5.0/en/time-zone-support.html](http://dev.mysql.com/doc/refman/5.0/en/time-zone-support.html)

# ios - iOS - NSURLConnection 异步请求工作一次，然后在第二次尝试时失败（挂起）

> ID：16127479
> 
> 赞同：0
> 
> 时间：2013-04-21T02:52:12.850
> 
> 标签：ios, asynchronous, nsurlconnection

我有一个用户将用来登录我的应用程序的登录视图。我使用 NSURLConnection 异步请求块连接到我的 Web 服务并来回传递数据。

我有一个奇怪的问题，如果用户第一次登录，它工作正常。但是如果他们注销，然后尝试再次登录，请求被发送但从不响应（我为所有场景设置了警报视图；即超时、数据 = nil、错误！= nil 等）。它只是与我显示的加载屏幕一起坐在那里，从不做任何事情。

我只是错过了什么吗？

```
[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
     {
         if ([data length] > 0 && error == nil){
             if( data != nil ) {
                  //Handle Data Here
                  .............    
             } else {
                 [loadingView removeFromSuperview];
                 loadingView = nil;
                 BlockAlertView *alert = [BlockAlertView alertWithTitle:@"Network Error" message:@"Network connection was successful, but there was a problem with data transfer.\nPlease try again."];
                 [alert setCancelButtonWithTitle:@"OK" block:nil];
                 [alert show];             }
         }
         else if ([data length] == 0 && error == nil){
             [loadingView removeFromSuperview];
             loadingView = nil;
             BlockAlertView *alert = [BlockAlertView alertWithTitle:@"Network Error" message:@"Network connection was successful, but there was a problem with data transfer.\nPlease try again."];
             [alert setCancelButtonWithTitle:@"OK" block:nil];
             [alert show];
         }
         else if (error != nil && error.code == NSURLErrorTimedOut){
             [loadingView removeFromSuperview];
             loadingView = nil;
             BlockAlertView *alert = [BlockAlertView alertWithTitle:@"Network Error" message:@"The network request timed out.\nPlease check your internet connection and try again."];
             [alert setCancelButtonWithTitle:@"OK" block:nil];
             [alert show];
         }
         else if (error != nil){
             [loadingView removeFromSuperview];
             loadingView = nil;
             BlockAlertView *alert = [BlockAlertView alertWithTitle:@"Network Error" message:@"There was a problem connecting to the network.\nPlease check your internet connection and try again."];
             [alert setCancelButtonWithTitle:@"OK" block:nil];
             [alert show];
         }
     }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T03:14:31.940

好的解决了这个问题。是我用来通知我的视图我完成处理/保存响应数据并执行转场的委托分配的问题。因为在 viewDidLoad 中设置了委托，所以当下一个视图出现并接管委托时，登录视图失去了委托控制。只需将委托分配移动到 viewWillAppear（或 viewDidAppear）。

# ios - 选项卡式 iOS 应用程序中的单个选项卡不断崩溃

> ID：16127481
> 
> 赞同：0
> 
> 时间：2013-04-21T02:53:03.437
> 
> 标签：ios, xcode, crash, rss, uitabbarcontroller

我在我的选项卡式 iPhone/iPad 应用程序中使用 BWRSS RSS 提要包装器。我正在使用最新的 Xcode 版本，并且我也提交并接受了两个版本。第一个工作完美，但第二个工作在 iPhone 上，但不是在 iPad 上（虽然它被接受了）。问题似乎源于具有 RSS 提要的选项卡。除了一个 RSS 选项卡外，所有选项卡都可以在应用程序中正常工作。现在，当我在 Ad Hoc 中对其进行测试时，该单个选项卡甚至无法与 iPhone 版本一起使用。（它将与正常的 Building & Running 一起使用。）我曾尝试做快照的事情，但现在那些已经工作不再。我试图改变很多东西来修复它，但似乎没有任何效果。

上个月我试图解决这个问题，但我无法弄清楚。我使用 iPhone 配置实用程序找到了崩溃的根源，这里是：

```
MBBC[5135] <Error>: *** Terminating app due to uncaught exception         
'NSInvalidArgumentException', reason: '*** -[__NSArrayM insertObject:atIndex:]: 
object cannot be nil'
*** First throw call stack:
(0x32a7a2a3 0x3a7a297f 0x329c48d9 0xa1715
0xa46f7 0xa3e59 0x348e9311 0x348f579b 0x348f54c1 
0x348c64e9 0x34885803 0x3462fd8b 0x3462f929 0x3463085d 
0x34630243 0x34630051 0x3488b8eb 0x32a4f6cd 0x32a4d9c1 
0x32a4dd17 0x329c0ebd 0x329c0d49 0x365992eb 0x348d6301 0x9f87f 0x3abd9b20) 
```

我必须使用 iPhone 配置实用程序，因为崩溃只发生在 Ad Hoc 测试中。

这是打开选项卡时应显示的视图控制器的代码。

```
#import "BWRSSFeedsTableViewController.h"
#import "BWRSSItemsTableViewController.h"
#import "Reachability.h"

@interface BWRSSFeedsTableViewController () {
    BOOL iPadIdiom;
    NSDictionary * _newFeed;
    RSSDB * _rssDB;
    NSArray * _feedIDs;
    BOOL bannerIsVisible;
}
@end

@implementation BWRSSFeedsTableViewController

- (void) viewWillAppear:(BOOL)animated {

    [super viewWillAppear:animated];

    if (UIDevice.currentDevice.userInterfaceIdiom == UIUserInterfaceIdiomPad) iPadIdiom = YES;
    [self loadFeedIDs];
    [self.tableView reloadData];
}

- (void) viewDidAppear:(BOOL)animated {
    if (_newFeed)  [self loadNewFeed];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.title = @"RSS Feeds";
    // Do any additional setup after loading the view, typically from a nib.

}
- (void)didReceiveMemoryWarning
{
   [super didReceiveMemoryWarning];
   // Dispose of any resources that can be recreated.
}

#pragma mark - Segue delegate

- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"SegueToItemTableView"]) {
        BWRSSItemsTableViewController * itemsTableViewController = [segue destinationViewController];
        NSIndexPath * path = [self.tableView indexPathForSelectedRow];
        NSNumber * feedID = _feedIDs[path.row];

        itemsTableViewController.currentFeedID = feedID;
        itemsTableViewController.rssDB = _rssDB;
    } 
    else if([segue.identifier isEqualToString:@"SegueToAddView"]) {

        BWRSSAddViewController *rssAddViewController = [segue destinationViewController];
        rssAddViewController.delegate = self;
     }
}

#pragma mark - Table View

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    [self loadFeedIDs];
    return _feedIDs.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"FeedsCell" forIndexPath:indexPath];
    [self loadFeedIDsIfEmpty];
    NSDictionary * feedRow = [_rssDB getFeedRow:_feedIDs[indexPath.row]];
    cell.textLabel.text = feedRow[@"title"];
    cell.detailTextLabel.text = feedRow[@"desc"];
    return cell;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{

    // Return NO if you do not want the specified item to be editable.
    return NO;
}

#pragma mark - Database methods

- (void) loadNewFeed {
    // NSLog(@"%s", __FUNCTION__);
    if (!_newFeed) return;

    NSDictionary * newFeed = _newFeed;
    _newFeed = nil;

    NSNumber * rc = [_rssDB addFeedRow:newFeed];
    NSIndexPath * idx = [self indexPathForDBRec:newFeed];
    if (rc == nil) {    // inserted row in DB
        [self.tableView insertRowsAtIndexPaths:@[idx] withRowAnimation:UITableViewRowAnimationLeft];
    }
    [self.tableView scrollToRowAtIndexPath:idx atScrollPosition:UITableViewScrollPositionNone animated:YES];
    if (rc != nil) {    // updated existing row in DB
        [self.tableView reloadRowsAtIndexPaths:@[idx] withRowAnimation:UITableViewRowAnimationLeft];
    }
}

- (NSIndexPath *) indexPathForDBRec:(NSDictionary *) dbRec {
    NSNumber * rowID = [_rssDB valueFromQuery:@"SELECT id FROM feed WHERE url = ?", dbRec[@"url"]];
    if (rowID) {
        NSArray * tempFeedIDs = [_rssDB getFeedIDs];
        return [NSIndexPath indexPathForRow:[tempFeedIDs indexOfObject:rowID] inSection:0];
    } else {
        return nil;
    }
}

- (NSArray *) loadFeedIDs {
    // NSLog(@"%s", __FUNCTION__);
    if (!_rssDB) [self loadFeedDB];
    _feedIDs = [_rssDB getFeedIDs];
    return _feedIDs;
}

- (NSArray *) loadFeedIDsIfEmpty {
    // NSLog(@"%s", __FUNCTION__);
    if (!_rssDB) [self loadFeedDB];
    if (!_feedIDs || ![_feedIDs count]) _feedIDs = [_rssDB getFeedIDs];
    return _feedIDs;
}

- (RSSDB *) loadFeedDB {
     // NSLog(@"%s", __FUNCTION__);
     // use self.rssDB? or rssDB?
     if (!_rssDB) _rssDB = [[RSSDB alloc] initWithRSSDBFilename:@"bwrss.db"];
    return _rssDB;
}

@end 
```

请告诉我他们是否还有什么我应该补充的，你们可能需要帮助我解决这个非常烦人的问题。谢谢！！！

**新 iPhone 配置输出**：

```
 MBBC[5750] <Error>: *** Terminating app due to uncaught exception        
'NSInvalidArgumentException', reason: '*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil'
*** First throw call stack:
(0x32a7a2a3 0x3a7a297f 0x329c48d9 0xe56c5 0xe86fb 0xe7e5b 0x348e9311 0x348f579b     
    0x348f54c1 0x348c64e9 0x34885803 
    0x3462fd8b 0x3462f929 0x3463085d 0x34630243 
    0x34630051 0x3488b8eb 0x32a4f6cd 0x32a4d9c1 0x32a4dd17
    0x329c0ebd 0x329c0d49 0x365992eb 0x348d6301 0xe382f 0x3abd9b20)
    Apr 21 12:36:40 iPhone ReportCrash[5752] <Notice>: Formulating crash report for process MBBC[5750]
    Apr 21 12:36:40 iPhone com.apple.launchd[1] (UIKitApplication:MBBC.App[0x7a64][5750])          
    <Warning>: (UIKitApplication:MBBC.App[0x7a64]) Job appears to have crashed: Abort trap: 6
    Apr 21 12:36:40 iPhone backboardd[26] <Warning>: Application 'UIKitApplication:MBBC.App[0x7a64]' 
    exited abnormally with signal 6: Abort trap: 6
    Apr 21 12:36:40 iPhone ReportCrash[5752] <Error>: libMobileGestalt          
    copySystemVersionDictionaryValue: Could not lookup ReleaseType from system version dictionary 
```

我看到它在 6 个东西上崩溃了，但我不知道这到底是什么意思

**链接到图片**：我不会让我把它上传到这个网站，虽然我之前上传过图片：[https ://docs.google.com/file/d/0BxE5vJUTZp7eVWxvRW0wd2pEN2c/edit?usp=sharing](https://docs.google.com/file/d/0BxE5vJUTZp7eVWxvRW0wd2pEN2c/edit?usp=sharing)

**更新**：我也尝试从头开始重新启动，只导入文件并检查每个文件，在我导入它们时一个接一个

**更新 2**：我添加了一个链接到我的故事板的一部分。不让我上传！！！

**更新 3**：当我添加异常断点时，我更新了它现在给我的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:05:45.613

给你的项目加个异常断点，看看调用链——你肯定会发现问题的。最可能的情况是您创建了一些对象，但始终没有对它的强引用，因此系统在某些情况下会在您想要它之前释放它。一个常见的失败路径是在委托方法中写入 ivar，而不是在块中发布 nil。

# android - ObjectOutputStream 未保存在自定义类中

> ID：16127489
> 
> 赞同：0
> 
> 时间：2013-04-21T02:54:17.757
> 
> 标签：android, fileinputstream, fileoutputstream, objectinputstream, objectoutputstream

我制作了自己的自定义类，但我无法弄清楚它有什么问题。更具体地说，我的问题是为 android 而不是 Java 创建一个类之间存在什么区别。我的意思是，根据 logCat 它不会抛出任何错误或任何东西。相反，它告诉我`InputStream`读取正确。由于某种原因，我无法保存它。完全没有。它不会抛出错误或任何东西。它只是不保存给定的参数。有任何想法吗？我认为这是因为我`saveData`错误地声明了该方法的参数。

```
package com.eai.thepicker;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.util.ArrayList;

import android.app.Activity;
import android.content.Context;
import android.util.Log;

public class DataHandler extends Activity {

    FileOutputStream file_out;
    FileInputStream file_in;
    ObjectOutputStream obj_out;
    ObjectInputStream obj_in;
    ArrayList<String> retrieved_data, data_out;
    private boolean switch_1;
    private String tag;
    private String default_message;
    Context context;
    ArrayList<String> data_given;

    public DataHandler(Context context_given){
        context = context_given;
    }

    @SuppressWarnings("unchecked")
    public ArrayList<String> retrieveData(){
        tag = "DataHandler";
        default_message = "Tested";

        try {
            file_in = context.openFileInput("array_saved");
            obj_in = new ObjectInputStream(file_in);
            retrieved_data = (ArrayList<String>) obj_in.readObject();
            obj_in.close();
            file_in.close();
            switch_1 = true;
            Log.d(tag, "Loaded");
            } catch (FileNotFoundException e) {
            Log.d(tag, "File Not Found Exception.");
            } catch (IOException e) {
                Log.d(tag, "IO Exception.");
            } catch (ClassNotFoundException e) {
                Log.d(tag, "Class Not Found Exception.");
            } 

        if (switch_1 == false);{
        retrieved_data = new ArrayList<String>();
        retrieved_data.add(default_message);
    }

        return retrieved_data;

    }
    public void saveData(ArrayList<String> data_given){
        try {
            file_out = context.openFileOutput("array_saved", 0);
            obj_out = new ObjectOutputStream(file_out);
            obj_out.writeObject(data_given);
            obj_out.close();
            file_out.close();
            Log.d(tag, "Loaded");
        } catch (FileNotFoundException e) {
        Log.d(tag, "File Not Found Exception.");
        } catch (IOException e) {
            Log.d(tag, "IO Exception.");
            } 
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T03:21:59.110

您在`saveData()`方法中传递了错误的变量范围。`this.data_given`当您应该调用实例变量时，您正在调用类变量`data_given`。您尚未为类变量`data_given`(this.data_given) 分配任何值。因此，输出流正在工作。它只是写它包含的东西——这没什么。

要回答您的第二个问题，在 Android 中创建类和在 Java 中创建类没有区别。Android 是用 Java 编写的。所以，这就像是在说“弦乐器和小提琴有什么区别？” 小提琴是一种弦乐器。这只是一个更专业的实现。它具有弦乐器的所有品质 - 然后是一些。Android有点像小提琴，可以这么说。它***是***Java。只是一个更专业的 Java 版本（有一些小例外）。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T03:18:46.137

而不是`"array_saved"`使用带有扩展名的完整文件名`"array_saved.txt"`

# opengl - 如何将 2D 世界转换为屏幕坐标 OpenGL

> ID：16127490
> 
> 赞同：22
> 
> 时间：2013-04-21T02:55:03.793
> 
> 标签：opengl, screen, coordinates, transformation

我目前正在将 OpenGL 驱动的渲染器实现到 2D 游戏引擎中。

因为 OpenGL 屏幕坐标空间是 [-1,1]，我对它应该如何与通用的笛卡尔 2D 世界坐标系进行交互有点困惑。

假设我的世界中的视口是 [-500,-500] 到 [1200, 1200]，其中 [0, 0] 是世界的原点。我只需要翻译和缩小到-1和1之间的坐标吗？还是需要执行其他形式的转换？

您如何计算在屏幕上在您自己的坐标系中定义了位置的对象的绘制位置？

我会很感激有和没有 glOrtho 的解释（所以我们也可以使用 Z 轴来实现透视效果）。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-06-09T13:34:29.007

首先，OpenGL使用多个坐标系，所以没有“ **OpenGL**坐标系”。您指的是标准化设备坐标 (NDC)，其中所有三个坐标都在 [-1, 1] 范围内。不同的坐标系及其名称[在](http://www.opengl.org/archives/resources/faq/technical/transformations.htm)“9.011 如何转换坐标？有哪些不同的坐标空间？”一节中进行了解释。1)

其次，为避免混淆，在 OpenGL 中，术语“视口”指的是您要渲染到的窗口部分，它位于窗口坐标中。在您的问题中，您使用它来描述您想要渲染的世界的部分 (l,r,t,b)=(-500, -500, 1200, 1200)，它位于世界坐标中。

您问如何“计算在屏幕上绘制对象的位置”。您需要做的是定义一个从一个坐标系映射到另一个坐标系的变换（一个 4x4 矩阵）。您的 2D 世界以世界坐标给出，因此您需要定义一个将世界坐标转换为 NDC 的矩阵，即投影矩阵。然后，在您的着色器中，您只需将顶点与此投影矩阵相乘，即可获得 NDC。`glm::ortho`/`glOrtho`计算这样一个投影矩阵。至于透视投影，不清楚你想做什么，但你应该试验一下glm中的`perspective`and`lookat`函数。

为了清楚起见，您可以在任何您想要的坐标系（称为世界坐标系）中定义顶点，然后简单地绘制这些顶点。您的顶点着色器的工作是应用您定义的转换。

另请注意，您指定了一个正方形，通常这不是您想要的。监视器和大多数窗口都不是正方形的，因此如果您将该正方形映射到一个典型的视口上，您会得到一个扭曲的世界视图。您需要考虑视口的纵横比（宽度：高度）。我试图在[这里](https://stackoverflow.com/questions/16320336/opengl-aspect-ratio-issue)解释。

* * *

1) 作为旁注，FAQ 相当陈旧，指的是 OpenGL 的古老版本。如今，人们期望并鼓励程序员自己管理模型视图和投影矩阵，因为您需要在着色器中使用它们。我强烈推荐[glm](http://glm.g-truc.net/)，它只是标题，因此非常容易集成，并且具有反映 GLSL 的漂亮语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T11:43:04.023

在投影矩阵上使用[glOrtho](http://www.opengl.org/sdk/docs/man2/xhtml/glOrtho.xml)，然后正常绘制。对于你的例子，我猜你想要 glOrtho(0, 1000, 0, 3000, -1, 1) 这会给你一个宽度为 1000 单位和高度为 3000 单位的视口

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-13T17:56:40.833

将您的场景放置在您想要的任何坐标系中。我建议使用 glm ( [http://glm.g-truc.net/](http://glm.g-truc.net/) ) 来初始化矩阵和执行数学运算等。所以你可能有一个场景图引擎，你可以在其中管理 2D/3D 世界中的所有对象。只需在 glm 中正确设置视图和投影。实际上，您不应该需要任何图形管道实现细节——因此您的游戏引擎中可能存在错误的设计决策。

# c - 不兼容的整数到指针转换错误？

> ID：16127491
> 
> 赞同：3
> 
> 时间：2013-04-21T02:55:09.010
> 
> 标签：c, pointers

出于某种原因，我在这一行遇到错误：

```
while ((en = strtok(NULL, " " ) !=NULL)){ //do something } 
```

在这一行（这一行的错误是'指针和整数之间的比较（'int'和'void *'），即使inputString是一个char数组并且null是null。

```
while (!inputString[i]==NULL) 
```

en 是一个 char，并被声明为 char *en。我不确定为什么……是因为我无法将它们与 NULL 进行比较吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-21T02:58:04.980

问题不在于比较——而是任务。 `!=`的优先级高于`=`，因此您的表达式被解析为：

```
en = (strtok(NULL, "") != NULL) 
```

大概`en`是一个指针类型，结果`!=`是一个`int`，所以这就是警告出现的地方。你可能的意思是：

```
(en = strtok(NULL, "")) != NULL 
```

作为条件。在您的第二个示例中也是如此 -`!`优先级高于`==`，因此您将`!inputString[i]`(which has type `int`)的结果与`NULL`(which may have type `void *`) 进行比较。你的意思可能是：

```
while (!(inputString[i] == NULL)) 
```

也可以写成：

```
while (inputString[i] != NULL) 
```

要不就

```
while (inputString[i]) 
```

# python - cc1：错误：在 mac 10.7.5 上安装 python-mysql 时无法识别命令行选项“-Wno-null-conversion”

> ID：16127493
> 
> 赞同：9
> 
> 时间：2013-04-21T02:55:21.497
> 
> 标签：python, mysql, macos, python-2.7, mysql-python

这个错误破坏了我在 Mac 10.7.5 上的 python-mysql 安装。以下是步骤

1.  安装的python是2.7.1，mysql是5.6.11的64位。
2.  正在安装的python-mysql是1.2.4，也试过1.2.3
3.  安装配置

    ```
    1) sudo ln -s /usr/local/mysql/lib /usr/local/mysql/lib/mysql
    2) Edit the setup_posix.py and change the following mysql_config.path = "mysql_config" to mysql_config.path = "/usr/local/mysql/bin/mysql_config" 
    3) sudo python setup.py build 
    ```

这是构建的堆栈跟踪

```
running build
running build_py
copying MySQLdb/release.py -> build/lib.macosx-10.7-intel-2.7/MySQLdb
running build_ext
building '_mysql' extension
llvm-gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -pipe -Dversion_info=(1,2,4,'final',1) -D__version__=1.2.4 -I/usr/local/mysql/include -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c _mysql.c -o build/temp.macosx-10.7-intel-2.7/_mysql.o -Wno-null-conversion -Os -g -fno-strict-aliasing -arch x86_64
cc1: error: unrecognized command line option "-Wno-null-conversion"
error: command 'llvm-gcc-4.2' failed with exit status 1 
```

欢迎您的建议和想法。谢谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-21T15:15:04.990

尝试`cflags -Wno-null-conversion -Wno-unused-private-field`删除

```
/usr/local/mysql/bin/mysql_config. 
```

喜欢：

```
cflags="-I$pkgincludedir  -Wall   -Os -g -fno-strict-aliasing -DDBUG_OFF -arch x86_64 " #note: end space! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T09:50:31.140

哇，我已经花了几个小时来尝试“pip install MySQL-python”。我一直在重新安装 Xcode 4.6.3、Xcode 命令行工具（在 Mac OS X 10.7.5 上），并安装 Kenneth Reitz 的东西（[https://github.com/kennethreitz/osx-gcc-installer](https://github.com/kennethreitz/osx-gcc-installer)）没用的时候我...

改变 cflags 选项终于有帮助了！

谢谢！

# c++ - C ++多次将文本写入文件

> ID：16127495
> 
> 赞同：2
> 
> 时间：2013-04-21T02:55:34.163
> 
> 标签：c++, storage

我有一个循环处理一些数据的 Qt C++ 程序。

它将每个数据处理结果附加到文本文件的末尾。数据处理操作被放置在一个循环中，因此程序可以在几秒钟内产生超过800个结果并一个一个地写入它们（即分别）。

我觉得这么多的I/O操作对电脑硬盘来说不是很好，所以我组织了一个数组来存储数据处理结果，当数组长度超过200时，程序将其附加到文件中并清理，而不是数组再次变为 200 以上，依此类推。

但我不确切知道 -*真的需要*吗？也许这只是*浪费 RAM*，我应该在没有这些数组（缓冲区）的情况下将数据附加到文本文件？毕竟，程序写入相同数量的数据，独立于它以何种方式写入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:37:33.107

一般来说，由于c++机制提供了缓冲io，你可以随意改变它。在您的上下文中，您提到的“800 个结果”并不能说明输出数据的确切大小。所以你可能技能过度了。仅供参考，函数 ios::rdbuf() 将获得一个指向 streambuf 对象的指针，该对象表示流的内部缓冲区。然后您可以调用 streambuf::pubsetbuf(char * s, streamsize n) 来设置一个给定大小的新内部缓冲区。您还可以从[http://en.cppreference.com/w/cpp/io/basic_ios/rdbuf](http://en.cppreference.com/w/cpp/io/basic_ios/rdbuf)找到详细信息。

# firefox - Selenium Webdriver：删除所有域上的 Cookie

> ID：16127496
> 
> 赞同：12
> 
> 时间：2013-04-21T02:55:58.500
> 
> 标签：firefox, selenium, webdriver

在 selenium 中，您只能删除当前域上的 cookie，但是否可以导航到 Firefox 存储 cookie 的文件并删除该文件或覆盖它？我一直在环顾四周，但找不到 selenium 存储 cookie 的位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T03:28:18.203

您可以指定一个用户目录，然后操作`<userdir>/Default/Cookies`. 这个问题类似：[Getting or Manipulating all cookies in Selenium Webdriver](https://stackoverflow.com/questions/13404670/getting-or-manipulating-all-cookies-in-selenium-webdriver)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T14:44:24.643

Selenium 不存储 cookie，浏览器存储。*因此，对于每个浏览器，“ [浏览器] 存储 cookie 的位置*”的答案会有所不同。但是由于 Selenium 总是以干净的配置文件启动浏览器，因此您不必这样做 - 浏览器启动时没有 cookie。

# asp.net-mvc - Visual Studio 或已安装的扩展之一引发未处理的异常，应关闭

> ID：16127499
> 
> 赞同：0
> 
> 时间：2013-04-21T02:58:07.257
> 
> 标签：asp.net-mvc, visual-studio-2010, exception, editor

```
When I edit HomeController.cs, VS 2010 complain something like "can not nevigation directory" (I don't remember exactly the sentence, because the visual studio cannot be open any more for that solution), and did not allow me to edit the file. I close the file and open it again, it still the same.

So I closed the VS 2010, and try to reopen it, the solution cannot be opened anymore,Vitual studio always shows an "Unhandled Exception" window with error message as follows. 

Anyone have idea how can I fix this and where to report the error.

The error message:

Unhandled Exception 
```

Visual Studio 或已安装的扩展之一引发未处理的异常，应关闭。错误报告已创建，可以发送给开发团队或扩展作者进行修复。

```
Exception Type: System.AggregateException
Exception Message: A Task's exception(s) were not observed either by Waiting on the Task or accessing its Exception property. As a result, the unobserved exception was rethrown by the finalizer thread.
Exception Stack Trace:    at System.Threading.Tasks.TaskExceptionHolder.Finalize()
Inner Exception:
Exception Type: System.InvalidOperationException
Exception Message: The calling thread cannot access this object because a different thread owns it.
Exception Stack Trace:    at System.Windows.Threading.Dispatcher.VerifyAccess()
at System.Windows.DependencyObject.GetValue(DependencyProperty dp)
at System.Windows.Controls.Panel.get_IsItemsHost()
at System.Windows.Controls.Panel.VerifyBoundState()
at System.Windows.Controls.Panel.get_InternalChildren()
at Microsoft.VisualStudio.Text.Editor.Implementation.AdornmentLayer.RemoveTranslatableVisual(AdornmentAndData data)
at Microsoft.VisualStudio.Text.Editor.Implementation.AdornmentLayer.RemoveAllAdornments()
at IndentGuide.IndentGuideView.UpdateAdornments()
at IndentGuide.IndentGuideView.UpdateAdornmentsCallback(Task task)
at System.Threading.Tasks.Task.<>c__DisplayClassb.<ContinueWith>b__a(Object obj)
at System.Threading.Tasks.Task.InnerInvoke()
at System.Threading.Tasks.Task.Execute()

-------------------------

Installed Extensions
LINQ Insight
State   =   Enabled
Version =   1.0

NuGet Package Manager
State   =   Enabled
Version =   1.8.30423.9026

JSEnhancements
State   =   Enabled
Version =   1.4.1

Word Wrap with Auto-Indent
State   =   Enabled
Version =   1.0

Remove And Sort Using
State   =   Enabled
Version =   1.4

devColor
State   =   Enabled
Version =   2.0

Find Results Highlighter
State   =   Enabled
Version =   1.0

VSFileNav
State   =   Enabled
Version =   11.2

CSSCop - FxCop for Stylesheets
State   =   Enabled
Version =   1.2

Image Optimizer
State   =   Enabled
Version =   1.9

Web Essentials
State   =   Enabled
Version =   2.7

PowerCommands for Visual Studio 2010
State   =   Enabled
Version =   1.0.2.3

Go To Definition
State   =   Enabled
Version =   2.4

Triple Click
State   =   Enabled
Version =   2.1

Sample Browser Visual Studio Extension
State   =   Enabled
Version =   5.815

Spell Checker
State   =   Enabled
Version =   2.24

Snip2Code
State   =   Enabled
Version =   1.1

VSCommands for Visual Studio 2010
State   =   Enabled
Version =   10.3.9.12

Indent Guides
State   =   Enabled
Version =   12.1

Activity Diagram
State   =   Enabled
Version =   1.0

Class Diagrams
State   =   Enabled
Version =   1.0

Component Diagram
State   =   Enabled
Version =   1.0

Persistence Diagram
State   =   Enabled
Version =   1.0

State Diagram
State   =   Enabled
Version =   1.0

t4 editor
State   =   Enabled
Version =   2.1.1

Use-Case Diagram
State   =   Enabled
Version =   1.0

-------------------------

Environment Data
VisualStudio.Version    =   10.0
VisualStudio.Edition    =   Ultimate
VisualStudio.FullName   =   c:\Program Files (x86)\Microsoft 
Visual Studio 10.0\Common7\IDE\devenv.exe
VisualStudio.RegistryRoot   =   Software\Microsoft\VisualStudio\10.0
VisualStudio.LocaleId   =   1033
VisualStudio.DisplayMode    =   vsDisplayMDITabs
Time.UTC    =   4/21/2013 1:58:40 AM
Time.Local  =   4/21/2013 9:58:40 AM
OS.Architecture =   AMD64
Environment.Version =   4.0.30319.296
Environment.HasShutdownStarted  =   False
Environment.OSVersion.Platform  =   Win32NT
Environment.OSVersion   =   6.1.7601.65536
CurrentThread.Id    =   1
CurrentThread.Name  =   [null]
CurrentThread.ThreadState   =   Background, WaitSleepJoin
CurrentThread.IsBackground  =   True
CurrentThread.UICulture =   English (United States)
CurrentThread.Culture   =   English (United States)
Process.PagedMemorySizeMB   =   439.88671875
Process.MaxWorkingSetMB =   1.34765625
Process.NonpagedSystemMemorySizeMB  =   0.201393127441406
Process.PagedSystemMemorySizeMB =   1.76486206054688
Process.PrivateMemorySizeMB =   439.88671875
Process.VirtualMemorySizeMB =   1254.84375
Process.WorkingSetMB    =   516.3984375
Process.UpTime  =   00:00:35.6518000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T07:43:21.060

Stacktrace 表明错误来自缩进指南扩展。尝试禁用它并重新启动 Visual Studio。

# c# - 如何捕获在测试管理器中为 Coded UI Test VS2012 选择的构建的名称

> ID：16127501
> 
> 赞同：1
> 
> 时间：2013-04-21T02:58:16.987
> 
> 标签：c#, testing, tfsbuild, coded-ui-tests

我需要传递`Microsoft Test Manager`为`CodedUI Test`.

例如，在执行测试之前，我选择 Build 并开始执行。在我的`CodedUI Test`我需要捕获构建的名称并放入一个变量。我需要这个，因为每次运行测试时，我都需要调用`.exe`由我的 Build 生成的被测应用程序。

因此，如果我知道 Build 的名称，我可以确定哪个是`.exe`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T06:41:16.883

尝试使用来自 的值`TestContext.Properties["__Tfs_BuildNumber__"].ToString()`。

Properties 字典中还有很多其他有用的信息。值得一看，看看是否还有其他有用的东西（例如`BuildDirectory`示例）

# android - java.lang.IllegalAccessError：试图访问字段

> ID：16127503
> 
> 赞同：2
> 
> 时间：2013-04-21T02:58:39.973
> 
> 标签：android, actionbarsherlock

最近我在我的 Android 应用中实现了 ActionBarSherlock。在 Google Apps 的开发者控制台的 Crash & ANR 报告中，有少量错误报告。我已经在模拟器 Android 2.2 到 4.2.2 中测试了该设备，在我的测试过程中出现了这样的错误，无论是在我的 Nexus 4 中还是在使用 Eclipse 运行的各种模拟器中。由于开发者控制台中没有给出用户消息，我无法识别导致此类错误的设备和 Android 版本。

```
java.lang.IllegalAccessError: tried to access field android.support.v4.app.Watson.mFragments from class android.support.v4.app.Watson
at android.support.v4.app.Watson.onCreatePanelMenu(Watson.java:51)
at com.actionbarsherlock.ActionBarSherlock.callbackCreateOptionsMenu(ActionBarSherlock.java:559)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.preparePanel(ActionBarSherlockCompat.java:479)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.dispatchInvalidateOptionsMenu(ActionBarSherlockCompat.java:272)
at com.actionbarsherlock.app.SherlockFragmentActivity.invalidateOptionsMenu(SherlockFragmentActivity.java:150)
at com.actionbarsherlock.app.SherlockFragmentActivity.supportInvalidateOptionsMenu(SherlockFragmentActivity.java:156)
at android.support.v4.app.Fragment.setHasOptionsMenu(Fragment.java:702)
at net.neobie.klse.MainMenuFragment.onCreateView(MainMenuFragment.java:45)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManagerImpl.java:505)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManagerImpl.java:709)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManagerImpl.java:692)
at android.support.v4.app.FragmentManagerImpl.dispatchActivityCreated(FragmentManagerImpl.java:1402)
at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:490)
at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1129)
at android.app.Activity.performStart(Activity.java:3885)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1595)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1638)
at android.app.ActivityThread.access$1500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:928)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3647)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method) 
```

下面是我的 onCreateOptionsMenu。menu 和 inflater 参数均来自 com.actionbarsherlock.view

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {

    SubMenu subMenu1 = menu.addSubMenu("More");
    subMenu1.add(Menu.NONE, 1, 0, "Feedback").setIntent(new Intent(getActivity(), ContactActivity.class));
    subMenu1.add(Menu.NONE, 1, 0, "Backup & Restore").setIntent(new Intent(getActivity(), SyncActivity.class));
    subMenu1.add(Menu.NONE, 1, 0, "Settings").setIntent(new Intent(getActivity(), SettingsActivity.class));
    subMenu1.add(Menu.NONE, 1, 0, "About").setIntent(new Intent(getActivity(), AboutActivity.class));

    MenuItem subMenu1Item = subMenu1.getItem();
    subMenu1Item.setIcon(R.drawable.ic_menu_moreoverflow);
    subMenu1Item.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS); 
```

我在 onCreateView 方法中的 View Inflater 之后有 setHasOptionsMenu：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.main_menu, container, false);

        this.setHasOptionsMenu(true); 
```

现在我需要更多关于上述错误的可能原因的信息，或者至少我如何重现上述错误以进行调试。谢谢。

# php - 这个 mysql_query 有什么问题？

> ID：16127506
> 
> 赞同：-1
> 
> 时间：2013-04-21T02:59:32.830
> 
> 标签：php, mysql

```
mysql_query("UPDATE users SET imagelocation="upload/ . $_FILES["file"]["name"]" WHERE     
uid='$_SESSION[uid]'"); 
```

我无法弄清楚上面的代码有什么问题。我只是没有在某处正确添加或减去引号吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T03:00:39.497

您的报价已关闭。

```
mysql_query("UPDATE users SET imagelocation='upload/" . $_FILES["file"]["name"] . "' WHERE uid='$_SESSION[uid]'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T03:00:58.560

检查报价。

```
mysql_query("UPDATE users SET imagelocation='upload/{$_FILES['file']['name']}' WHERE     
uid='{$_SESSION[uid]}'"); 
```

# sharepoint-2010 - Sharepoint 2010 警报在一夜之间被删除

> ID：16127510
> 
> 赞同：1
> 
> 时间：2013-04-21T02:59:59.687
> 
> 标签：sharepoint-2010, sharepoint-alerts

在 SharePoint 2010 中，如果有人在 SharePoint 网站上设置警报，他们会向用户发送一封确认电子邮件，但一夜之间，他们会在某个时间点被删除。我在 SharePoint 中禁用并启用了即时警报作业，但什么也没做。这种情况发生在其他人身上吗？如果发生了，你是如何解决这个问题的？

编辑：警报是在警报菜单中设置的，而不是通知。

# java - 将动态数据传递给 servlet 中的 HashTable

> ID：16127512
> 
> 赞同：1
> 
> 时间：2013-04-21T03:00:36.557
> 
> 标签：java, jsp, jakarta-ee, servlets, hashtable

我创建了一个 JSP 页面，其单选按钮与当月的天数相同。代码是：

```
<%@page import="java.util.Calendar"%>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org /TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Insert title here</title>
</head>
<body>
    <form action="TestAms" method="post">
    <%
        Calendar cal = Calendar.getInstance();
        int md = cal.getActualMaximum(Calendar.DATE);
        for(int i=0; i<md; i++){
            %>
                <input type="radio" name="<%= i%>" value="<%=i %>">
            <%
        }
    %>
    <input type="submit" value="SUBMIT">
    </form>
</body>
</html> 
```

现在我在 servlet 中获得单选按钮（JSP 页面）的响应并将它们存储在哈希表中，然后打印哈希表的元素，但我没有得到预期的结果。如果没有 HashTable，它可以正常工作，但我希望它可以与 HashTable 一起使用。Servlet 代码为：

```
import java.io.IOException;
import java.io.PrintWriter;
import java.util.Calendar;
import java.util.Enumeration;
import java.util.Hashtable;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class TestAms extends HttpServlet {

protected void doPost(HttpServletRequest request, HttpServletResponse response)   throws ServletException, IOException {
    PrintWriter out = response.getWriter();

    Calendar cal = Calendar.getInstance();
    int md = cal.getActualMaximum(Calendar.DATE);

    Hashtable ht = new Hashtable<>();
    Enumeration sh = ht.keys();

    for (int y=0; y<md; y++){
        String s[] = new String[md+1];
        s[md] = request.getParameter(Integer.toString(y)); 
        if(s[md]!=null){
            //out.println(s[md]);
            ht.put(y, s[md]);
        }
    }

    while(sh.hasMoreElements()){
        System.out.println(sh.nextElement() );
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T05:38:39.950

*我在 servlet 中获得单选按钮（JSP 页面）的响应并将它们存储在哈希表中，然后打印哈希表的元素，*

请在下面找到将请求参数值存储在`Hashtable`. 我希望这有效：

```
protected void doPost(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
        Hashtable<String, String> days = new Hashtable<>();
        Enumeration<String> names = request.getParameterNames();
        while(names.hasMoreElements()){
            String param = names.nextElement();
            String value = request.getParameter(param);
            days.put(param, value);
        }
        System.out.println(days);
} 
```

# c - 将数据从设备复制到主机是否有任何限制？

> ID：16127514
> 
> 赞同：0
> 
> 时间：2013-04-21T03:00:58.563
> 
> 标签：c, cuda

我正在尝试将大约 8650752 字节从设备复制到主机，但出现堆栈溢出错误，令人惊讶的是，我可以将相同的数据从主机复制到设备，但在对其进行计算后，无法返回。代码很简单，所以不知道出了什么问题

代码：

```
__global__ 
void kernel(....)
{
    int x=threadIDX.x;

    for (int j=0; j<256; j++)
    {
        for (int i=0; i<256; i++)
        { 
            int index = 256*256*x + 256*j + i;      
            dVOL_in[(x*65536)+(256*j)+i]=index;
        }
    }

}

int main(void)
{
    const int VOL_SIZE = 8650752;                           
    const int VOL_BYTES = VOL_SIZE * sizeof(float);
    float hVOL[VOL_SIZE];
    float * dVOL_in;

    gpuErrchk(cudaMalloc((void**) &dVOL_in, VOL_BYTES));

    // volume data read from some file
    gpuErrchk(cudaMemset(dVOL_in,0,VOL_BYTES));  
    gpuErrchk(cudaMemcpy(dVOL_in,Vol,VOL_BYTES, cudaMemcpyHostToDevice));  //works fine

    kernel<<<1,132>>>(....);
    cudaMemcpy(hVOL, dVOL_in, VOL_BYTES, cudaMemcpyDeviceToHost);  //stack overflow error
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T04:53:07.167

在函数体中定义为局部变量时：

```
int main(void)
{
   const int VOL_SIZE = 8650752;
   float hVOL[VOL_SIZE]; 
```

编译器将`hVol`在堆栈中分配对象。但是此对象不适合最大堆栈大小，因此您会收到此错误。对于这么大的对象，需要动态分配内存：

```
 float *hVOL = malloc(sizeof(float) * VOL_SIZE); 
```

# git - 交互式变基：在一堆 --no-ff 合并中修改最近的提交

> ID：16127520
> 
> 赞同：1
> 
> 时间：2013-04-21T03:02:26.367
> 
> 标签：git, merge, git-rebase, git-flow

## 目标

我想使用 rebase 修改最近的提交。神奇的命令是[`git rebase -i`](http://git-scm.com/docs/git-rebase)

假设您正在尝试**删除**提交问题

> *   首先，找出该提交有多远（大约）。然后做：
>     *   **git rebase -i HEAD~10**

-*来源*：
[Greg Hewgill](https://stackoverflow.com/a/1338758/1421642)对一个不太复杂的 git 问题的回答

## 问题

效果很好，**除非**你最近做了任何 --no-ff 合并

如果你碰巧遵循[git flow](http://nvie.com/posts/a-successful-git-branching-model)，你会一直做 --no-ff 合并

> *   检查下面的“来源”部分以获取有关rebase -i 炸毁 --no-ff 合并的**方式**和**原因的示例**
> *   现在，请相信我（或自己尝试）：它不漂亮

## 实际问题

如果我们查看[此页面](https://www.kernel.org/pub/software/scm/git/docs/git-rebase.html)，我们会看到一个`--preserve-merges`（或简单的`-p`）选项，我们可以尝试将其替换`-i`为

问题是，如果我们这样做，我们将不再收到`-i`以前那种漂亮的弹出窗口
-> 可以选择“编辑此提交，挤压那个”等。-
> 所以，我们可以' t 达到我们最初的目标：使用 rebase 修改/删除一些最近的提交 :(

*那么我们该怎么办？*

* * *

## 来源

问题部分：

> *   变基谋杀的[第一个例子--no-ff 提交](https://stackoverflow.com/questions/6221624/how-to-avoid-git-rebase-killing-merge-commits)
> *   [第二个例子](http://notes.envato.com/developers/rebasing-merge-commits-in-git)
>     *   他的引述：“TL;DR 版本是这样的：**当变基时，总是使用 -p 标志**”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:44:49.947

上面使用`-p`and`-i`是正确的 - 但是我想指出你*不需要*使用交互式更多来摆脱提交。您可以使用`--onto`来明确说明您希望您的基地在哪里。假设你想摆脱 HEAD~10，......

```
git rebase --onto HEAD~11 HEAD~9 HEAD 
```

这就是说，接受任何**在**中`HEAD`，但**不是* 在 中的提交`HEAD~9`，并将它们应用到`HEAD~11`. 那意味着它会跳过`HEAD~10`。上面的解决方案工作得很好，但有时，为了摆脱更大的历史记录，你可能想要使用`--onto`. 请记住，与 的情况一样`-p`，您也可以将交互模式与`--onto`.

关于[非快进合并和变基，看看](https://stackoverflow.com/questions/15973964/git-what-is-the-correct-merging-or-rebasing-workflow-to-modify-a-maintenance-br/16022472#16022472)我给另一个问题的这个答案。它主要解释了 的用法`--onto`，但如果你通读，你会发现关于 --no-ff 合并和变基的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T03:07:30.933

`-p`并且`-i`不是相互排斥的 - 您可以同时使用两者。*但是*，当你这样做时要非常小心——改变提交的顺序是一个*坏*主意。您也不应该尝试以这种方式删除合并提交；很容易使事情进入不正确的状态。

```
git rebase -p -i HEAD~10 
```

# delphi - 如何加载/卸载 DLL 并在 Delphi DWScript 执行的脚本中使用其方法

> ID：16127521
> 
> 赞同：0
> 
> 时间：2013-04-21T03:02:29.220
> 
> 标签：delphi, plugins, dll, scripting, dwscript

嗨，我的问题是关于脚本内的 DLL 加载/绑定，因为我想创建一个脚本接口，其中可能有基于 Delphi DWScript 的插件。其中一些插件可以让 DLL 使用其中包含的函数。DWScript 是否准备好加载在脚本中调用的 DLL？

我在想它是否已经实现了`LoadLibrary`、`GetProcAddress`（动态加载）或使用`lib <dllname> [alias <aliasname>]`方法声明中的语句静态绑定方法。

其他一些脚本机制已经管理此功能，例如 TMS Scripter、paxScript、paxCompiler。

# c++ - 在 OpenGL 中使用多个纹理

> ID：16127522
> 
> 赞同：2
> 
> 时间：2013-04-21T03:02:31.960
> 
> 标签：c++, opengl, textures, collada

更新：我现在可以绘制多个纹理，我弄清楚了 glGenTextures 等是如何工作的，并重写了我的 loadtextures () 函数和东西。然而，只画了汽车的几个部分；方向盘，一个轮毂盖和背光灯（可能还有一些小东西）。在 collada 文件中，一些材质永远不会与纹理文件相关联。我不认为这是问题所在，因为在我第一次使用时，我将列表中的纹理与前几个多列表（5 个，总共大约 80 个）相关联，并且我得到了一辆看起来像是在使用正确的纹理，只是缺少轮胎，也许还有一些我没有注意到的小东西。我想也许它与平铺的纹理有关？无论如何，我想用红色替换所有没有纹理文件的网格，但我不知道该怎么做。

[http://www.opengl-tutorial.org/beginners-tutorials/tutorial-4-a-colored-cube/](http://www.opengl-tutorial.org/beginners-tutorials/tutorial-4-a-colored-cube/)

我制作了一个颜色缓冲区，对其进行绑定等，但后来我意识到我需要编辑着色器文件，但我不知道该怎么做。

一：

```
attribute vec3 vPosition;
attribute vec2 vTextureCoord;
varying  vec2 vTexCoord; 
uniform  mat4 modelview_matrix;

void main(void)  
{     
   vTexCoord =  vTextureCoord;
   gl_Position =  modelview_matrix*vec4(vPosition,1.0);
} 
```

另一个：

```
varying  vec2 vTexCoord; 
uniform sampler2D myTexture;
void main (void)  
{  
   gl_FragColor =  texture2D(myTexture, vTexCoord);     
} 
```

**/////原始问题**

我正在做一个 uni 任务，我将不得不绘制一些带有纹理的对象（我必须能够在场景和其他东西中移动，但是当我到达它时我会越过那座桥）。我有一个教程作为基础，它将从一个 .obj 文件中的单个顶点数组和单个纹理文件中绘制一个对象（我为上一个教程编写了解析器）。

作业使用 collada 文件，所以我编写了一个 collada 解析器。这真的很辛苦！我的 collada 解析器生成一个包含 Material 对象的地图，这些对象有很多 name 和 id 变量（不在 main.cpp 中使用，它们只是用于关联 collada 文件的各个部分之间的内容），一个保存纹理文件的 m_TgaFile 变量名称作为字符串，以及一个 m_Mesh 变量，它保存顶点对象的向量，这是一个只有两个浮点数组的对象，m_Positions 和 m_Textures 来保存位置和 tex 坐标。

所以到目前为止我能够做的是通过循环地图并仅使用地图中的第一个纹理文件来绘制所有位（几分钟后它会崩溃但我稍后会弄清楚，我很高兴某些东西出现在屏幕上）。我尝试调用 loadTextures () （并发送一个材质），我在地图上循环，这样我就可以使用每个材质的纹理文件，但根本没有绘制任何东西（白屏）。那么如何为每一位绘图加载每个纹理呢？

我已经尝试研究它，并提出了我需要使用 glBindTexture、glTexImage2D 和另一个我不记得的事实。前两个在我的教程附带的 TgaParser 中。glBindTexture 在绘图代码中再次使用，第二个参数为零。据我所知，这意味着使用加载的默认纹理。我不知道如何在需要时加载每个纹理，我不明白纹理名称的含义以及它如何与纹理数据相关联。

哦，我已经尝试在 OpenGL 主函数中进行循环并将 pMaterial 作为变量发送到显示函数，但它不喜欢那样，我认为它不会起作用，但我想我至少会尝试。

这是一些代码。

OpenGL主函数：

```
int main(int argc, char **argv)
{

glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);

glutInitWindowSize(screenWidth, screenHeight);
glutCreateWindow("Intro to shading");
glewInit();

init();
glutDisplayFunc(forward_display);
glutIdleFunc(forward_animate);

glutMainLoop();
/*
    DONT DO THINGS HERE
*/
return 0;
} 
```

绘图功能：

```
void forward_display()
{
glClear(GL_COLOR_BUFFER_BIT| GL_DEPTH_BUFFER_BIT);

glMatrixMode(GL_MODELVIEW);
glLoadIdentity();

//glScalef(0.5,0.5,0.5);
glScalef(0.005,0.005,0.005);
glRotatef(timeGetTime()*0.01,0,1,0);
GLfloat m[16];
glGetFloatv (GL_MODELVIEW_MATRIX, m);
glUniformMatrix4fv(gvModelMatrixHandle,1,false,m);

glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D,0);

colladaObject->m_MaterialMap.StartIterator ();

while(!colladaObject->m_MaterialMap.IsEOM ())
{
    shared_ptr<Material> pMaterial = colladaObject->m_MaterialMap.Get ();

    if(pMaterial->m_Mesh.size () != 0)
    {
        glVertexAttribPointer(gvPositionHandle, 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), &pMaterial->m_Mesh[0].m_Positions);//v[0].pos

        glEnableVertexAttribArray(gvPositionHandle);

        glVertexAttribPointer(gvTextureCoordhandle, 2, GL_FLOAT, GL_FALSE,sizeof(Vertex), &pMaterial->m_Mesh[0].m_Textures);//&v[0].texCoords
        glEnableVertexAttribArray(gvTextureCoordhandle);

        glDrawArrays(GL_TRIANGLES, 0, pMaterial->m_Mesh.size());
    }
    colladaObject->m_MaterialMap.MoveNext ();
}

glutSwapBuffers();
} 
```

初始化函数：

```
void init()
{
char  * vertexShaderBuffer =       readFileData("../resources/shaders/IntroToShaders.vs");
char  * pixelShaderBuffer  =   readFileData("../resources/shaders/IntroToShaders.ps");

gProgram = createProgram(vertexShaderBuffer, pixelShaderBuffer);

//We have finished  compiling the shader now delete the char arrays with the source code
delete [] vertexShaderBuffer;
delete [] pixelShaderBuffer;

gvPositionHandle        = glGetAttribLocation(gProgram, "vPosition");
gvTextureCoordhandle    = glGetAttribLocation(gProgram, "vTextureCoord");
gvModelMatrixHandle     = glGetUniformLocation(gProgram, "modelview_matrix");
if (gvPositionHandle==-1)
    printf("gvPositionHandle is bad\n");

if (gvTextureCoordhandle==-1)
    printf("gvTextureCoordhandle is bad\n");

if (gvModelMatrixHandle==-1)
    printf("gvModelMatrixHandle is bad\n");
glUseProgram(gProgram);

//cube = new ObjParser("../resources/mesh/cube.obj");
colladaObject = new ColladaParser("../resources/mesh/car.dae");
loadTextures();

glEnable(GL_DEPTH_TEST);
glDepthFunc(GL_LEQUAL);
glEnable (GL_BLEND);
glBlendFunc (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
} 
```

加载纹理函数：

```
void loadTextures ()
{
//just try loading the first texture to make sure all the other code changes work before playing with this one.
colladaObject->m_MaterialMap.StartIterator ();
shared_ptr<Material> pMaterial = colladaObject->m_MaterialMap.Get ();
while(pMaterial->m_TgaFile == "")
{
    colladaObject->m_MaterialMap.MoveNext ();
    pMaterial = colladaObject->m_MaterialMap.Get ();
}

char tgafile [100];
strcpy(tgafile, "../resources/textures/");
strcat(tgafile, pMaterial->m_TgaFile.c_str ());
TgaParser explosion(tgafile);
} 
```

TgaParser 构造函数的 END （实际上打开文件并读取位等的地方还有很多）

```
unsigned char * imageData = (unsigned char*)getData (fp, size, imageBits);
myId=id;

glBindTexture (GL_TEXTURE_2D, id);
    glPixelStorei (GL_UNPACK_ALIGNMENT, 1);
    glTexParameteri (GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri (GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
    /* glTexParameteri (GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST); */
    glTexParameteri (GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
/* glTexParameteri (GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST); */
glTexParameteri (GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexEnvf (GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);
glTexImage2D (GL_TEXTURE_2D, 0, texFormat, imageWidth, imageHeight, 0, texFormat, GL_UNSIGNED_BYTE, imageData);

    /* release data, its been uploaded */
    free (imageData);

fclose(fp);

id++; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T03:42:59.980

没有在渲染过程中切换纹理的好方法。您需要做的是按纹理（材质）分离网格，分别绘制它们并在绘制调用之间切换纹理（可能还有材质的统一值）`glBindTexture(GL_TEXTURE_2D, id)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T07:56:13.640

恭喜你的 Collada 解析器；这肯定是一项复杂的任务；您可以使用第三方工具为您执行此操作，但我相信这是一种很好的做法，并且可以自己学习。

关于纹理，一种选择是使用纹理图集，将纹理组合成单个纹理，然后只需绑定一次并使用不同的纹理坐标，这样您就可以绘制所有对象而无需更改任何纹理。查找纹理图集。

# python - 从 Document 扩展的类，EmbeddedDocument 保存失败

> ID：16127529
> 
> 赞同：2
> 
> 时间：2013-04-21T03:04:45.190
> 
> 标签：python, mongodb, document, mongoengine

**模型.py**

```
class User(EmbeddedDocument,Document):
    ''' Store user's info'''
    user_id = IntField(unique = True)
    user_name = StringField(unique =True,primary_key =True,max_length = 256)
    user_secret = StringField(max_length=256) 
```

**视图.py**

```
def register(request):
    accept = False
    un = request.REQUEST.get('username')
    ps = request.REQUEST.get('password')
    if not un:
        raise ValueError('The given username must be set')
    if not ps:
        raise ValueError('The given password must be set')

    if isUserExistByName(un):
        o='The name has been registered.'
        raise TAUTHException(o)
    else:
        uid = getNextCount(UserCount)
        ps_hash = password_hash(un,ps)
        user = User(user_id = uid,user_name = un,user_secret = ps_hash)
        user.save(cascade = True)
        accept = True

    result = {'accept':accept}
    msg = urlencode(result)
    return HttpResponse(msg) 
```

当我尝试注册用户时，程序运行良好，但 mongodb 不存储该用户。奇怪的是，如果我将用户更改为

```
class User(Document):
    ''' Store user's info'''
    user_id = IntField(unique = True)
    user_name = StringField(unique =True,primary_key =True,max_length = 256)
    user_secret = StringField(max_length=256) 
```

它运行良好，mongodb 存储用户成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T07:05:26.857

请参阅文档：[文档](https://mongoengine-odm.readthedocs.org/en/latest/apireference.html#mongoengine.Document)和[EmbeddedDocument](https://mongoengine-odm.readthedocs.org/en/latest/apireference.html#mongoengine.EmbeddedDocument)：

```
 class mongoengine.EmbeddedDocument(*args, **kwargs)
   A Document that isn’t stored in its own collection.
   EmbeddedDocuments should be used as fields on Documents through the EmbeddedDocumentField field type. 
```

这是因为 mongoengine 检查文档类型并为不同类型提供不同的逻辑。

但是您可以尝试使用`force_insert=True`您的集合或使用 mixins 来避免文档定义重复：

```
class UserMixin(BaseDocument):
    ''' Store user\'s info'''
    user_id = IntField(unique = True)
    user_name = StringField(unique =True,primary_key =True,max_length = 256)
    user_secret = StringField(max_length=256)

    def __unicode__(self):
        return self.user_name

class User(Document, UserMixin):
    pass

class UserEmbdebed(EmbeddedDocument, UserMixin):
    pass 
```

# google-app-engine - 迭代 GQL 查询字段

> ID：16127535
> 
> 赞同：0
> 
> 时间：2013-04-21T03:06:06.960
> 
> 标签：google-app-engine, python-2.7, google-cloud-datastore, jinja2, webapp2

我正在尝试为谷歌应用引擎数据存储中的实体实现“编辑”功能。因此，如果为数据存储实体指定了一个键，我想用与该键关联的值填写一个表单。如果未指定任何键，则这些值将从先前的表单发布尝试中提取。虽然我可以使用 self.request.arguments() 循环遍历 self.request 字段，但我不知道如何使用数据存储区 (db.get(key)) 对象执行此操作。

所以请让我知道这是否可能，或者即使我的 gae 表单处理还很遥远。

```
class ItemsPage(webapp2.RequestHandler):
    def __init__(self, *args, **kwargs):
        super(ItemsPage, self).__init__(*args, **kwargs)
        self.formerrors = dict()
        self.formdata = dict()

    def get(self):

        if self.request.get('key'):
            # Key specified, get field values from db store
            key = self.request.get('key')
            item = db.get(key)
            for field in item.arguments():  # THIS DOES NOT WORK
                self.formdata[field] = item.field
        else:
            # No key specified, use the self.request values
            for field in self.request.arguments(): # THIS DOES WORK
                self.formdata[field] = self.request.get(field)

        # render the template with the formdata 
        template_values = {
                           'formerrors': self.formerrors,
                           'formdata': self.formdata # Use formdata to populate form fields
                           }
         template = JINJA_ENVIRONMENT.get_template(
                           'templates/items.html'
                           )
         self.response.write(template.render(template_values))

    def post(self):
        if self.validateSortForm():
            # Form input is valid, do some processing and then put into datastore
            item = itemDatstore()
            item.put()
            self.redirect('/')
        else():
            # Form input was not valid, redisplay the form
            self.get() 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:38:57.573

感谢马卡迪安的帮助，这让我走上了正确的道路。正如文档所说

> 模型.properties()
> 
> 返回为此模型类定义的所有属性的字典。

因此，我从 google.appengine.ext 调用 db.Model 对象的 properties() 并获取我可以迭代的所有属性的字典。

```
if self.request.get('key'):
    # Key specified, get field values from db store
    key = self.request.get('key')
    sort = db.get(key)
    for field in ItemDB.properties():
        self.formdata[field] = getattr(sort, field) 
```

# php - 尝试调整图像大小时出错

> ID：16127537
> 
> 赞同：1
> 
> 时间：2013-04-21T03:06:43.870
> 
> 标签：php, image

我正在尝试在 php 中的 while 循环中重新调整照片的大小，但我不断收到如下错误：

```
Warning: imagecreatefromjpeg(): gd-jpeg: JPEG library reports unrecoverable error: in C:\Users\Bob\xampp\htdocs\house\allphotos.php on line 17

Warning: imagecreatefromjpeg(): 'userphotos/27_1366493160164_BMW.jpg' is not a valid JPEG file in C:\Users\Bob\xampp\htdocs\house\allphotos.php on line 17

Warning: imagecopyresized() expects parameter 2 to be resource, boolean given in C:\Users\Bob\xampp\htdocs\house\allphotos.php on line 27 
```

然后一大堆随机字符...

在下文中，我试图回显 2 张以新尺寸选择的照片。我相信它与有关`$image`，我没有使用该功能吗？

```
 ini_set("gd.jpeg_ignore_warning", 1); //just added
 if ($getphotos->execute()){
       while ($array = $getphotos->fetch(PDO::FETCH_ASSOC)){

          $image = imagecreatefromjpeg('userphotos/'.$array['photoname'].'');

          list($image_width, $image_height, $type, $attr) = getimagesize('userphotos/'.$array['photoname'].'');

          $new_size = ($image_width + $image_height)/($image_width*($image_height/100));
          $new_width = $image_width * $new_size;
          $new_height = $image_height * $new_size;

          $new_image = imagecreatetruecolor($new_width, $new_height);
          imagecopyresized($new_image, $image, 0, 0, 0, 0, $new_width, $new_height, $image_width, $image_height);
          $imagearray = imagejpeg($new_image, null);

          echo $imagearray;
          //echo '<img src="userphotos/'.$array['photoname'].'">';

       }
    } else { die('Query Error'); } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T03:24:31.283

GD 对于有点偏离的 jpeg 可能是无情的，而理论上文件在您打开它时可以正常工作等，您可以通过以下方式抑制警告并让它继续以愉快的方式继续：

```
ini_set("gd.jpeg_ignore_warning", 1); 
```

这将使处理继续，并忽略警告。您的图像很可能仍会毫无问题地得到处理。

# winforms - 如何使用 .net framework 4.0 和 EF Code First 指定最大字段长度？

> ID：16127543
> 
> 赞同：0
> 
> 时间：2013-04-21T03:08:35.557
> 
> 标签：winforms, data-annotations, code-first

我正在编写一个 winforms 应用程序。我的域类可以很好地使用 Code First 和 .Net Framework 4.5，但是我需要切换到 .Net Framework 4.0 以便应用程序可以在 Windows XP 上运行。

框架 4.0的[System.ComponentModel.DataAnnotations](http://msdn.microsoft.com/en-AU/library/system.componentmodel.dataannotations%28v=vs.100%29.aspx)版本不支持 MaxLength 数据注解。

我应该怎么做？

更新：以下工作 [StringLength(450, ErrorMessage = "该字段不能超过 450 个字符。")]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:56:35.210

我发现以下将解决我的问题

```
 [StringLength(450, ErrorMessage = "The field cannot exceed 250 characters. ")] 
```

# html - HTML 文件上传操作 - 这可以被黑客攻击以发送无休止的文件上传吗

> ID：16127544
> 
> 赞同：2
> 
> 时间：2013-04-21T03:08:59.920
> 
> 标签：html, forms, file, upload

我有一个关于黑客文件上传的问题。下面显示了我正在使用的设置类型，我关心的是提供上传脚本完整路径的操作：

```
<form action="http://www.mydomain.com/scripts/php/photo_processing.php?page=join method="post" enctype="multipart/form-data">
  <input type="file" name="file" class="fileProfile"><br>
</form> 
```

有人可以使用完整路径不断发送重复文件，然后填充 Web 服务器磁盘空间等吗？例如：您可以在网站外使用此路径和/或以允许自动持续上传的方式发送文件吗？

注意：php 文件顶部有以下内容 - 它设置为仅此域名 - 由于 AWS Cloudfront POST 限制而需要

```
header("Access-Control-Allow-Origin: http://www.mydomain.com"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T03:15:13.000

不，它们基本上是由跨域策略阻止的。除非`mydomain.com`您可以访问它。

# python - 如何获取字符串中的最后一个数字和+1？

> ID：16127545
> 
> 赞同：1
> 
> 时间：2013-04-21T03:09:11.130
> 
> 标签：python

我需要在字符串中找到最后出现的数字（不是单个数字），并替换为`number+1`，例如：`/path/testcase9.in`to `/path/testcase10.in`。如何在python中更好或更有效地做到这一点？

这是我现在使用的：

```
reNumber = re.compile('(\d+)')

def getNext(path):
    try:
        number = reNumber.findall(path)[-1]
    except:
        return None
    pos = path.rfind(number)
    return path[:pos] + path[pos:].replace(number, str(int(number)+1))

path = '/path/testcase9.in'
print(path + " => " + repr(self.getNext(path))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T03:14:43.727

```
LAST_NUMBER = re.compile(r'(\d+)(?!.*\d)')

def getNext(path):
    return LAST_NUMBER.sub(lambda match: str(int(match.group(1))+1), path) 
```

这使用[`re.sub`](http://docs.python.org/2/library/re.html#re.sub)，特别是，让“替换”成为与原始匹配调用的函数以确定应该替换它的功能的能力。

它还使用[否定的前瞻](http://www.regular-expressions.info/lookaround.html)断言来确保正则表达式只匹配字符串中的最后一个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T03:20:02.163

通过在您的 re 中使用“。*”，您可以选择最后一位数字之前的所有字符（因为它是贪婪的）：

```
import re

numRE = re.compile('(.*)(\d+)(.*)')

test = 'somefile9.in'
test2 = 'some9file10.in'

m = numRE.match(test)
if m:
    newFile = "%s%d%s"%(m.group(1),int(m.group(2))+1,m.group(3))
    print(newFile)

m = numRE.match(test2)
if m:
    newFile = "%s%d%s"%(m.group(1),int(m.group(2))+1,m.group(3))
    print(newFile) 
```

结果是：

```
somefile10.in
some9file11.in 
```

# sql - 涉及连接的 SQL 查询中的连续记录

> ID：16127547
> 
> 赞同：0
> 
> 时间：2013-04-21T03:09:24.163
> 
> 标签：sql, tsql, sql-server-2005, left-join

我知道（没有`order by`子句）SQL 不对结果集的顺序做出任何保证。但是，对于涉及一个或多个连接的查询，我可以对结果集中相关项的*连续性做出任何假设吗？*

例如，如果我有类似的查询

```
select * from A left join B on P(x) left join C on Q(x) 
```

我可以假设与特定行对应的所有记录**`A`**在结果集中都是连续的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:18:41.333

你不能。除非有`order by`子句，否则永远不会指定查询的结果。

这是一个实际示例，结果不连续。并行散列连接根据连接键将不同处理器上的表分开。然后在结果可用时对其进行编译。所以一些结果来自一个处理器，一些来自另一个处理器，依此类推。

或者，在另一种情况下，您可能正在使用索引查找。但是，SQL Server 可能决定在 A 而不是 B 上使用索引——并在 B 而不是 A 中顺序遍历行。相同的 id 可能在表 B 中出现多次。因此，给定的行 A 可能会出现在 B.id = A.id 的结果中。

# optimization - 在交替元素时合并两个容器的 stl 样式是什么？

> ID：16127549
> 
> 赞同：1
> 
> 时间：2013-04-21T03:09:49.923
> 
> 标签：optimization, boost, coding-style, iterator, stl-algorithm

以 STL 风格而不是 for(;;) 执行以下操作的优雅方法是什么：

给定 p={1,2,3} 和 q={7,8,9}，我想将其合并为 pq={1,7,2,8,3,9}。一个应用程序正在创建 pq 向量，用于积分偏离位置 (q) 和动量 (p)：

```
for(size_t i=0; i<p.size();++i) {
 pq.push_back(p[i]);
 pq.push_back(q[i]);
} 
```

它不优雅，也不是 stl。它有效，但这个问题是关于正确学习 stl 风格而不是完成工作，因此它不同于[https://stackoverflow.com/questions/10746197/how-to-fit-elements-of-two-vectors-alternately- in-c](https://stackoverflow.com/questions/10746197/how-to-fit-elements-of-two-vectors-alternately-in-c)（请在关闭之前发表评论，以便我重新措辞）

我正在寻找的解决方案应该使用一些 stl 算法和迭代器操作。升压也不错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T03:26:38.667

我不知道真正适合这项任务的现有算法。显而易见的替代方法是大致编写上面的代码，但作为通用算法：

```
template <class InIter1, class InIter2, class OutIter>
OutIter unsorted_merge(InIter1 b1, Inter1 e1, inIter2 b2, OutIter r) { 
    while (b1 != e1) {
        *r = *b1; ++r; ++b1;
        *r = *b2; ++r; ++b2;
    }
    return r;
}; 
```

尽管*该*代码可能不是特别优雅或漂亮，但其余代码可以是：

```
unsorted_merge(p.begin(), p.end(), q.begin(), std::back_inserter(pq)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T07:19:48.730

如果您要问的话，没有交错两个数据结构的 STL 算法。但是，如果您想要一个基于迭代器的解决方案，您可以执行以下操作：

```
auto pIt = p.begin(), qIt = q.begin();
bool even = false;
while(pIt != p.end() && qIt != q.end()) {
  auto nextElement = (even = !even) ? pIt : qIt;
  pq.push_back(*nextElement);
  ++pIt;
  ++qIt;
} 
```

这具有交错每个向量的前*n 个*元素的优点，其中*n*是较小向量的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T22:33:21.863

使用 lambda 和`boost::for_each`（zip_iterator 与 std::for_each 类似）：

```
vector<double> pq;
boost::for_each(
  p,q,
  [&pq](double p,double q) { 
    pq.push_back(p); pq.push_back(q);
  }
); 
```

我没有针对 Jerry 的解决方案计时，我认为 Jerry 的解决方案更合适，但这是另一种选择，很容易理解

# python - 我如何在python中找到一个单词是len n的次数？

> ID：16127550
> 
> 赞同：0
> 
> 时间：2013-04-21T03:10:00.903
> 
> 标签：python, string

我试图在列表中找到一个单词等于设定长度的次数？因此，例如：'my name is ryan' and 2 该函数将返回 2 作为单词长度为 2 的次数。我有：

```
def LEN(a,b):
'str,int==>int'
'returns the number of words that have a len of b'
c=a.split()
res=0
for i in c:
    if len(i)==b:
        res=res+1
        return(res) 
```

但是这一切给我的都是 1 的 res 并且不会超过第一个 i 的 len 为 c。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T03:12:13.917

您`return res`在 for 循环中，一旦遇到该语句，程序将立即停止执行。您可以将它移到循环之外，或者使用这种可能更 Pythonic 的方法：

```
>>> text = 'my name is ryan'
>>> sum(1 for i in text.split() if len(i) == 2)
2 
```

或者更短但~~不太清楚~~（~~但~~[推荐](https://stackoverflow.com/a/3175293/1907098)）：

```
>>> sum(len(i) == 2 for i in text.split())
2 
```

第二个功能是基于这样一个事实：`True == 1`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T03:11:54.900

你的功能工作正常，你只是`return`早起：

```
def LEN(a,b):
        'str,int==>int'
        'returns the number of words that have a len of b'
        c= a.split()
        res = 0
        for i in c:
            if len(i)==b:
                res= res + 1
        return(res) # return at the end 
```

这相当于：

```
>>> text = 'my name is ryan'
>>> sum(len(w) == 2 for w in text.split())
2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T03:13:31.053

怎么样：

```
>>> s = 'my name is ryan'
>>> map(len, s.split()).count(2)
2 
```

# php - 未定义索引通知：为什么会发生这种情况，我该如何解决？

> ID：16127551
> 
> 赞同：0
> 
> 时间：2013-04-21T03:10:02.680
> 
> 标签：php, mysql

我的 php 代码有问题，这让我抓狂。我在这一行收到未定义的索引通知：`echo " <input type=\"text\" name=\"column3\" value=\"".$row['hca']."\"/>\n";`。这似乎是一个看似随机的错误发生。让我感到困惑的是，显示数据的表单代码与前一行和后一行完全相同，但是这个片段得到了一个错误/通知。最重要的是，尽管我在后端查询了数据库并发现数据确实存在，但数据并没有像应有的那样从数据库中显示出来。为什么会发生这种情况，我能做些什么来解决它？我的代码如下：

```
if ($count !== 0) {
        while($row = mysql_fetch_array($result)) {
            echo "<div class=\"addform\"><form method='get' action=\"update.php\">\n";
            echo "  <input type=\"text\" value=\"".$row['tfid']."\" name=\"column1\">\n";
            echo "  <input type=\"text\" name=\"column2\" value=\"".$row['fname']."\"/>\n";
            echo "  <input type=\"text\" name=\"column3\" value=\"".$row['lname']."\"/>\n";
            echo "  <input type=\"text\" name=\"column3\" value=\"".$row['hha']."\"/>\n"; //there are issues here.
            echo "  <input type=\"text\" name=\"column5\" value=\"".$row['file']."\"/>\n";
            echo "  <input type=\"image\" src=\"images/update.png\" alt=\"Update Row\" class=\"update\" title=\"Update Row\">\n";
            echo "<a href=\"delete.php?column1=".$row['tfid']."\"><img title='Delete Row' alt=\"Delete\" class='del' src='images/delete.png'/></a></form></div>\n";
        }
    echo "</table><br />\n";
} else {
    echo "<b><center>NO DATA</center></b>\n";
} 
```

人们可以提供的任何提示都会有所帮助。

谢谢，约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:19:49.363

检查数据库并确保字段名称与数组的索引匹配 ( `$row`)。

您的表格应该包含所有这些字段：`tfid`, `fname`, `lname`, `hha`,`file`和`tfid`

此外，转义和 PHP/echo/HMTL 可能会导致视觉噪音，也许这会使您的代码更容易调试：

```
<?php if ($count !== 0) : ?>
    <?php while($row = mysql_fetch_array($result)): ?>
        <div class="addform">
            <form method="get" action="update.php">
                <input type="text" value="<?php echo $row['tfid'] ?>" name="column1">
                <input type="text" name="column2" value="<?php echo $row['fname'] ?>"/>
                <input type="text" name="column3" value="<?php echo $row['lname'] ?>"/>
                <input type="text" name="column3" value="<?php echo $row['hha'] ?>"/>
                <input type="text" name="column5" value="<?php echo $row['file'] ?>"/>
                <input type="image" src="images/update.png" alt="Update Row" class="update" title="Update Row">;
                <a href="delete.php?column1=<?php echo $row['tfid'] ?>">
                    <img title="Delete Row" alt="Delete" class="del" src="images/delete.png"/>
                </a>
            </form>
        </div>
    <?php endwhile ?>
<?php else: ?>
    <b><center>NO DATA</center></b>
<?php endif ?> 
```

# java - 在 JTabbedPane 中更改选项卡的 ActionLister

> ID：16127552
> 
> 赞同：1
> 
> 时间：2013-04-21T03:10:05.257
> 
> 标签：java, swing, actionlistener, jtabbedpane

我有以下图形用户界面：

![在此处输入图像描述](https://i.stack.imgur.com/CFgnq.png)

问题是，[Register LMS] 按钮应该只在我在 Flood Monitoring 选项卡上时显示。

当我转到“用户注册”选项卡时，应该会显示另一个名为 [注册用户] 的按钮。显然，当我返回 Flood Monitoring 选项卡时，我需要返回 [Register LMS] 按钮。

我知道如何通过该`setVisible(false);`方法隐藏 Swing 组件，但我不确定如何将触发器（动作侦听器）添加到选项卡的更改中，仅此而已。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T03:11:50.207

尝试将[ChangeListener](http://docs.oracle.com/javase/6/docs/api/javax/swing/event/ChangeListener.html)添加到 JTabbedPane，这仅在对象更改状态时调用。即，当标签更改时。

# python - Python 包和模块版本管理

> ID：16127553
> 
> 赞同：4
> 
> 时间：2013-04-21T03:10:17.977
> 
> 标签：python, version-control, python-import

我计划使用多个包（内部和外部）开发一个中等规模的 Web 应用程序（有很多后端工作），因为这是我第一次体验这种规模，我可以得到一些建议：

1.  如何确保满足所有依赖项（没有缺少所需的包/模块，从正确的位置导入包等）
2.  如何管理包/模块的版本。我希望能够在其他连接的包/模块中以最少的代码更改引入新版本的包/模块。

请让我知道是否有可以对此有所帮助的工具。如果在以这种规模管理代码时遇到任何其他挑战（我什至可能不知道），请提醒我并提供解决方法。

我目前所知道的（并认为它可能有助于代码管理）：

*   `__all__`定义可导出的模块。
*   使用前面的单下划线来防止模块被导入
*   `__init__.py`在包级别管理导入（所以当我这样做时`import package_name`可以`__init__.py`集中控制其他导入）
*   PEP 328 用于管理相关导入、importlib 和其他与导入相关的内容。
*   我想一些 3rd 方包也定义`__version__`或`VERSION`变量以在运行时检查版本，但我不确定我是否可以依赖它。

如果有书籍、博客等可以提供帮助，请告诉我。

编辑：我不确定这种类型的问题是否适合这里。如果没有，那么我道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T03:40:19.540

> 如何确保满足所有依赖项（没有缺少所需的包/模块，从正确的位置导入包等）

使用[virtualenv](https://stackoverflow.com/questions/5844869/comprehensive-beginners-virtualenv-tutorial)并将带有[pip](https://stackoverflow.com/questions/3220404/why-use-pip-over-easy-install)的包[冻结](http://www.pip-installer.org/en/latest/usage.html#pip-freeze)到[需求](http://www.pip-installer.org/en/latest/requirements.html)文件中：

```
$ pip freeze > requirements.txt
$ cat requirements.txt
argparse==1.2.1
distribute==0.6.31
wsgiref==0.1.2 
```

基本上，只要您有一些需要安装模块的代码，就可以使用 virtualenv、distribute 和 pip。

根据您指定的版本安装软件包`requirements.txt`：

```
pip install -r requirements.txt 
```

# java - 对象的通用链表 (Java)

> ID：16127554
> 
> 赞同：3
> 
> 时间：2013-04-21T03:10:36.987
> 
> 标签：java, list, object, generics

我对 Java 很陌生，这是我在大学的第二堂课（在大学里）使用它。在学期开始的时候，我做了一个简单的类来代表僵尸，其中包含他们的年龄、类型和名字。后来，我制作了一个整数链表。现在，我需要制作一个可以容纳这些“僵尸”的通用链表。我还必须制作一个菜单，允许我添加、删除、计数和显示“僵尸”。我已经盯着这个看了好几个小时，浏览了我的书，并在网上寻找我的问题的答案。我可以添加和显示这些“僵尸”，但在列表中计算它们并尝试删除它们只是告诉我输入的参数没有。换句话说，我如何比较“僵尸”可能存在问题。这是我的代码。我明白了'

僵尸.java

```
public class Zombie
{
private String zAge;
private String zType;
private String zName;

public Zombie(String zA, String zT, String zN)
{
    zAge = zA;
    zType = zT;
    zName = zN;
}

public void setZAge(String zA)
{
    zAge = zA;
}

public void setZType(String zT)
{
    zType = zT;
}

public void setZName(String zN)
{
    zName = zN;
}

public String getZAge()
{
    return zAge;
}

public String getZType()
{
    return zType;
}

public String getZName()
{
    return zName;
}

public boolean equals(Zombie zomb)
{
    if(zomb.getZAge() == zAge && zomb.getZType() == zType && zomb.getZName() == zName)
        return true;
    else
        return false;
}
} 
```

LinkedBag.java

```
public class LinkedBag<E>
{
//Head node and number of nodes in bag
private Node<E> head;
private int manyNodes;

//Constructor
public LinkedBag()
{
    head = null;
    manyNodes = 0;
}

//Returns the number of nodes in the bag
public int getSize()
{
    return manyNodes;
}

//Returns the node that is at the head of the linked list
public Node<E> getListStart()
{
    return head;
}

//Adds a node to the beginning of the list
public void add(E element)
{
    head = new Node<E>(element,head);       //Creates a new node pointing to the head and sets the head of the linked bag to the new Node
    manyNodes++;        //Increments Node counter
}

//Counts the number of times Node [target] occurs within the bag
public int countOccurences(E target)
{
    int count = 0;      //Initializes incrementable counter

    if(head==null)      //Checks if bag is empty and returns null if bag is empty
        return 0;

    if(head.getData().equals(target))       //Checks if the head of the linked list is [target]
        count++;            //Increments counter

    Node<E> cursor = head;      //Sets temporary Node [cursor] to the same value and pointer as head

    while(cursor.getLink() != null)     //Loops until the next Node contains no value
    {
        if(cursor.getLink().getData().equals(target))           //Checks if the value of the next Node is [target]
            count++;                //Increments counter

        cursor=cursor.getLink();            //Cursor continues down linked list
    }

    return count;       //Returns incremented int [count], number of occurences of [target]
}

//Checks if Node [target] exists within the bag
public boolean exists(E target)
{
    if(head.getData().equals(target))       //Checks if the head of the linked list is [target]
        return true;

    Node<E> cursor = head;      //Sets temporary Node [cursor] to the same value and pointer as head

    while(cursor.getLink() != null)     //Loops until the next Node contains no value
    {
            if(cursor.getData().equals(target))     //Checks if current Node is [target] and returns true if true
                return true;

            cursor=cursor.getLink();        //Cursor continues down linked list
    }
            return false;       //Returns false if cursor goes through entire linked list and [target] isn't found
}

//Checks if Node [target] exists within the bag and removes the first occurence of it
public boolean remove(E target)
{       
    if(head==null)          //Returns false if bag is empty
        return false;

    if(head.getData().equals(target))   //If the head Node's data is [target]
    {
        head = head.getLink();      //Make the next Node the head
        manyNodes--;            //Decrements Node counter
        return true;            //Returns true, found [target]
    }

    Node<E> cursor = head;          //Sets temporary Node [cursor] to the same value and pointer as head

    while(cursor.getLink() != null)     //Loops until the next Node contains no value
    {
        cursor = cursor.getLink();      //Cursor continues down linked list

        if(cursor.getLink().getData().equals(target))   //If the next node's data is [target]
        {
            cursor.setLink(cursor.getLink().getLink());     //Sets current Node's link to the next Node's link, by passing the next Node
            manyNodes--;            //Decrements Node counter
            return true;            //Returns true, found [target]
        }
    }
    return false;           //Returns false, [target] not found
}
} 
```

节点.java

```
public class Node<E>
{
private E data;
private Node<E> link;

public Node(E initialData, Node<E> initialLink)
{
    data = initialData;
    link = initialLink;
}

public E getData()
{
    return data;
}

public Node<E> getLink ()
{
    return link;
}

public void setData(E element)
{
    data = element;
}

public void setLink(Node<E> newLink)
{
    link = newLink;
}
} 
```

这是用户与 ZombiesProj2.java 交互的菜单文件

```
import java.util.Scanner;

public class ZombiesProj2
{
public static void main(String[] args) throws InterruptedException
{
    LinkedBag<Zombie> zBag = new LinkedBag<Zombie>();       //Linked bag to hold Zombie Objects
    String choice = "";

    Scanner input = new Scanner(System.in);

    while(!choice.equalsIgnoreCase("x"))
    {   
        //Menu
        System.out.println("\nSac de Zombi\n");
        System.out.println("S - Display size of bag");
        System.out.println("A - Add 'Zombie' to bag");
        System.out.println("R - Remove 'Zombie' from bag");
        System.out.println("F - Find 'Zombie' in bag");
        System.out.println("D - Display contents of bag");
        System.out.println("X - Exit");
        System.out.print("Enter Selection: ");

        //Input and Output
        choice = input.nextLine();

        if(choice.equalsIgnoreCase("s"))
        {
            System.out.println("\nSize = " + zBag.getSize() + "\n");
        }
        else if(choice.equalsIgnoreCase("a"))       //adds zombie
        {
            String zAge;
            String zType;
            String zName;

            System.out.print("How many years has this zombie ROAMED THE EARTH: ");
            zAge = input.nextLine();
            System.out.print("What type of zombie is it: ");
            zType = input.nextLine();
            System.out.print("What would you like to name this zombie: ");
            zName = input.nextLine();

            Zombie newZomb = new Zombie(zAge,zType,zName);
            zBag.add(newZomb);
        }
        else if(choice.equalsIgnoreCase("r"))       //removes zombie
        {
            String zAge;
            String zType;
            String zName;

            System.out.print("How many years has this zombie ROAMED THE EARTH: ");
            zAge = input.nextLine();
            System.out.print("What type of zombie is it: ");
            zType = input.nextLine();
            System.out.print("What is the name of the zombie: ");
            zName = input.nextLine();

            Zombie rZomb = new Zombie(zAge,zType,zName);

            zBag.remove(rZomb);
        }
        else if(choice.equalsIgnoreCase("f"))       //counts number of matching zombies
        {
            String zAge;
            String zType;
            String zName;

            System.out.print("How many years has this zombie ROAMED THE EARTH: ");
            zAge = input.nextLine();
            System.out.print("What type of zombie is it: ");

            zType = input.nextLine();
            System.out.print("What is the name of the zombie: ");
            zName = input.nextLine();

            Zombie fZomb = new Zombie(zAge,zType,zName);

            System.out.println("The " + zAge + " year old zombie type " + zType + " named " + zName + " occurs " + zBag.countOccurences(fZomb)+ " time(s)");
        }
        else if(choice.equalsIgnoreCase("d"))       //displays entire zombie 'bag'
        {
            Node cursor = zBag.getListStart();
            Zombie dZomb;
            while(cursor !=null)
            {
                dZomb = (Zombie)cursor.getData();
                System.out.print("[Zombie "+dZomb.getZAge()+" "+dZomb.getZType()+" "+dZomb.getZName()+"],");
                cursor = cursor.getLink();
            }
        }
        else if(!choice.equalsIgnoreCase("x"))  
        {
            System.out.println("Error: Invalid Entry");
        }
    }
}
} 
```

更新了 equals 和 hashCode

```
public boolean equals(Object obj)
{
    if(obj==null)
        return false;
    if(obj==this)
        return true;
    if(obj.getClass() != getClass())
        return false;

    Zombie zomb = (Zombie)obj;
    if(zomb.getZAge().equals(zAge) && zomb.getZType().equals(zType) && zomb.getZName().equals(zName))
        return true;
    else
        return false;
}

public int hashCode() { return 0; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T04:12:52.790

我知道，因为您正在尝试学习编程，所以您正在编写自己的程序，`linked list`而不是使用 Java 的`LinkedList`. 但是，您错过了一些事情。

1.  您的 equals 方法应该具有与`Object` `Zombie.equals(Object)`. `false`而且，如果参数不是 Zombie ，它应该做的第一件事是返回。
2.  每当你写一个equals方法时，你也必须写一个hashCode方法。查看大多数示例以获取详细信息。
3.  永远不要对字符串使用等号运算符。始终使用 equals 方法。替换`zomb.getZAge() == zAge`为`zomb.getZAge().equals(zAge)`。
4.  为什么zAge是一个`String`？你可以让它成为某种数字。
5.  没有必要在课堂上到处都写“Z”。它在一个`Zombie`; 你的读者知道。在工作中，我有同事坚持在所有变量中重复类名。

这不是好的代码。

```
public class Document {
    private Long documentId;
    private String documentName;
    private String documentAuthor;
    private Date documentPublicationDate;
    // 10 more instance variables.
    // Constructors, accessors, other code.
} 
```

然后他们将类型变量命名`Document`为`documentA`,`documentB`等。多么无聊、重复和多余。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T03:37:17.317

1）你为什么要命名一个包含节点计数'manyNodes'而不是'nodeCount'的变量。如果你问一些随机的程序员，一个名为“manyNodes”的变量包含什么，你认为他们能猜到吗？如果你问一些随机的程序员 nodeCount 包含什么变量呢？您认为随机程序员甚至可以猜测 nodeCount 的类型吗？'manyNodes' 的类型呢？

2）如何尝试这样的事情：

```
public void add(Node<E> element)
{
    if (head == null) {
        head = element;
    }
    else {
        tail.nextNode = element;
    }

    tail = element;
    nodeCount++;        //Increments Node counter
}

public class Node<E>
{
    private E data;
    private Node<E> nextNode;
}

public class LinkedBag<E>
{

    private Node<E> head;
    private Node<E> tail;
    private int nodeCount;   
}

//Constructor
public LinkedBag()
{
    head = tail = null;
    nodeCount = 0;
} 
```

# php - 在 Wordpress 中通过 XMLHttpRequest 加载数据库内容

> ID：16127557
> 
> 赞同：1
> 
> 时间：2013-04-21T03:11:05.577
> 
> 标签：php, wordpress, get, xmlhttprequest

我创建了一个新的 wordpress 模板页面。这个想法是，当我单击侧边栏 div 中的链接时，它应该从我的 content-div 中的数据库加载内容。在一个简单的 php 页面上它可以工作，但结合我的 wordpress 模板页面它不起作用......

这就是我的代码：（短版）

```
<?php // Template Name: Weinkarte
get_header(); ?>

<div id="container-sidebar">
     <span id="wineList"></span>
</div>

<div id="sidebar-right">
    <li><a href='#' id='1' onclick='loadWine(this.id)'>Click</a></li>
</div>

get_footer();

<script>
function loadWine(id)
{
xmlhttp=new XMLHttpRequest();
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("wineList").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","loadWine.php?landID="+id,true); //I think here is probably the fault
xmlhttp.send();
}
</script> 
```

谢谢你的帮助！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T04:45:50.640

在 wordPress 中，您必须对 ajax 调用使用操作，类似这样（基本上在您的 functions.php 中）

```
add_action( 'wp_ajax_nopriv_myAjaxFunction', 'myAjaxFunction' );  
add_action( 'wp_ajax_myAjaxFunction', 'myAjaxFunction' );
function myAjaxFunction(){  
    //get the data from ajax call  
    $landID = $_POST['landID'];
    // rest of your code
} 
```

在你的javascript文件中也使用`post`而不是这样的东西`get`

```
var data = "action=myAjaxFunction&landID="+id;
xmlhttp.open("POST","http://your_site.com/wp-admin/admin-ajax.php",true);
xmlhttp.send(data); 
```

给定的示例只是一个想法，您应该阅读更多关于它的信息并`jQuery`轻松使用。您可以阅读有关[Codex](http://codex.wordpress.org/AJAX_in_Plugins)的更多信息，[这是另一篇不错的文章](http://www.garyc40.com/2010/03/5-tips-for-using-ajax-in-wordpress/)。

# output - PIC BTFSC 和 BTFSS 在 PORTA 上不起作用

> ID：16127558
> 
> 赞同：1
> 
> 时间：2013-04-21T03:11:11.483
> 
> 标签：output, pic, microchip, blink

我总是在 PIC16F628A 的 PORTB 上闪烁 LED。

现在我需要在 PORTA 上这样做，因为我正在 PORTB 上尝试键盘矩阵。

下面的代码在 PORTB 的 RB3 上完美运行，但我在 PORTA 中没有。

这是 PORTA 中的示例。我已经测试过，问题出在 BTFSS 和 BTFSC 功能上……因为如果我手动关闭或打开 led 运行良好。（我也省略了**delay_1s_routine**代码）

```
main
    ;*********CONFIGURACION LED**********
    clrf Puerto_Led
    movlw 0x07
    movwf CMCON
bsf STATUS,RP0
        clrf TRISA
bcf STATUS,RP0

loop
    call prende_apaga_Led
    call delay_1s_routine
goto loop

prende_apaga_Led
 btfsc PORTA,RA1    ;si esta en 0 salta el GOTO
 goto $+3
 bsf PORTA,RA1      ;Pongo en '1' el bit del Led Verde
 return
 bcf PORTA,RA1      ;Pongo en '1' el bit del Led Verde
return 
```

多谢指教！！

已编辑：将真正的价值放在代码上

PD：单独测试了这条指令，效果很好 - bsf PORTA,RA1 - bcf PORTA, RA1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:31:24.870

我更喜欢：

与其陷入技术怪癖和哲学辩论，不如绕过这个问题。

我总是将影子寄存器用于端口状态并测试和驱动它们。

因此，在您的 RAM 中使用一点来反映 PORTA、RA1 的状态。相信我，它将无缝运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T03:53:39.980

在标签 prende_apaga_Led 之后的代码中，您似乎将 LED 引脚一次作为输入（使用 btfsc 测试），一次作为输出（bsf 和 bcf）。该引脚不能同时用作两者。您可以将相关的 TRISA 位设置为输入或输出并坚持使用它。

在我看来，您尝试执行的代码会根据 LED 先前的状态切换 LED 的值。你这样做的方式是行不通的。更简单的方法是使用 xor 函数，如下所示：movlw 0xYY; 其中 YY 是模式，其中 0 表示引脚输出没有变化，1 表示切换，然后是 xorlw PORTA

所以简单地说就是：

```
 clrf Puerto_Led
    movlw 0x07
    movwf CMCON
    bsf STATUS,RP0
    clrf Conf_Led
    bcf STATUS,RP0
 loop
    movlw 0xYY ; change YY, i.e. if the LED is on RA2 YY will be 0x04
    xorlw Puerto_Led
    call delay_1s_routine
    goto loop 
```

# javascript - 如何将一组表行分组以溢出滚动（不使用 thead 或 tbody）？

> ID：16127560
> 
> 赞同：2
> 
> 时间：2013-04-21T03:11:26.647
> 
> 标签：javascript, html, css

我有一张有 100 行的表。我的`thead`和`tbody`已经用过了。但是我需要允许另一组表格行滚动而不使页面的其余部分滚动。我怎样才能做到这一点？

这是一个小提琴[http://jsfiddle.net/hMEuC/](http://jsfiddle.net/hMEuC/)这里有一些标记：

```
<table>
    <thead><tr><th>header</th></tr></thead>
    <tbody>
        <tr><td>abc<td></tr>
        <tr><td>def<td></tr>
        <tr><td>ghi<td></tr>

        <!-- Can I make these rows overflow auto scroll? -->

        <tr><td>abc<td></tr>
        <tr><td>def<td></tr>
        <tr><td>ghi<td></tr>
        ...
        <tr><td>xyz<td></tr>

        <!-- end hopeful autoscroll box -->

    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T03:13:56.313

在[.](http://www.whatwg.org/specs/web-apps/current-work/multipage/tabular-data.html#the-table-element) _ *_* _ `tbody`_ `table`_ 如果您有一组要定位的表行，请将它们包装在它们自己的`tbody`中，然后定位它。

您必须将第二个的显示设置为`tbody`类似`block`这样，以便您可以将 y 轴的溢出设置为自动。这也需要重新处理嵌套元素`tr`和`td`元素。

小提琴：http: [//jsfiddle.net/sycAT/2/](http://jsfiddle.net/sycAT/2/)

# javascript - 对 d3.js 上的函数的迭代调用

> ID：16127563
> 
> 赞同：0
> 
> 时间：2013-04-21T03:11:52.757
> 
> 标签：javascript, jquery, d3.js

单击几个复选框控件时，我想调用一个函数，

```
$('input[name=filt_box_gen]').click(function() {  
nodescheckclick(this,1);
}) 
```

所以我用控件名称制作了一个数组，

```
var nodesfilterlist = ['input[name=filt_box_gen]','input[name=filt_box_que]','input[name=filt_box_ans]']; 
```

...但只是为了能够使其工作仍然调用函数三次，每种情况一次...

```
$(nodesfilterlist[0]).click(function() {
nodescheckclick(this,0);
});

$(nodesfilterlist[1]).click(function() {
nodescheckclick(this,1);
});

$(nodesfilterlist[2]).click(function() {
nodescheckclick(this,2);
}); 
```

我如何遍历数组以`nodescheckclik`仅使用一个函数调用该函数？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T07:23:08.193

正如评论中提到的，这更像是一个 javascript 或 jQuery 问题，而不是 d3.js 问题。

您可以将内置`forEach()`函数用于数组。即：

```
nodesfilterlist.forEach(function(d,i){
    $(d).click(function(){nodescheckclick(this, i)})
}) 
```

作为`d`数组`i`中的元素和数组中元素的索引。

* * *

现在，如果您实际使用 d3 并且您`nodefilterlist`的数据是您正在处理的数据。然后你会有类似的东西：

```
var nodes = d3.select("#checkBoxContainer") // Container for checkBoxes
    .selectAll("#checkBox") //name it as you wish, will create as many elements as there is in the data
    .data(nodefilterlist) //append the data you want to use
    //.attr("color", "blue") // would set attributes to data
    .on("click", nodeschecklist) //perform action on data 
```

您甚至不必为`nodeschecklist`调用编写更多内容，因为它会自动按预期翻译 ( `.on("click", function(d, i){nodeschecklist(d,i)})`)，因为两个版本具有相同的签名。

# android - 从 Android 的 onActivityResult 中提示语音识别

> ID：16127568
> 
> 赞同：3
> 
> 时间：2013-04-21T03:13:00.783
> 
> 标签：android, voice-recognition

我希望我会足够清楚。

在我的应用程序中，我进行了设置，以便按下后退按钮激活谷歌的语音识别服务。在 中`onActivityResult`，它会检查第一个单词是“call”还是“text”，并相应地处理剩下的句子。具体而言，对于文本，它类似于“文本 [联系人姓名] 消息 [消息内容]”，然后使用`smsManager`. 但由于它可能会弄错名称或消息，我希望它先读出消息和人的姓名以进行确认，我做得很好。

问题是，要确认或取消，我还想使用语音识别。如果在读出消息后，用户说类似发送的话，那么它才应该继续发送消息。所以，我需要知道的是如何/是否可以`newVoiceCommand`在下面的代码中实现这个（）：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    switch (requestCode) {
    case RESULT_SPEECH: {
        if (resultCode == RESULT_OK && null != data) {
            s="";
            text = data
                    .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
            decide = text.get(0).split("\\s");
            for (int i=1; i<decide.length;i++) s= s+decide[i] + " ";
            if (decide [0].equals("text")){
                if (!s.equals("")){
                    msg = s.split(" message");
                    char[] stringArray = msg[0].toCharArray();
                    stringArray[0] = Character.toUpperCase(stringArray[0]);
                    msg[0] = new String(stringArray);
                    contact = get_Number (test(msg[0]));
                    Intent intent = getIntent();
                    finish();
                    startActivity(intent);
                    String temp = "Are you sure you want to send " + msg[1] + " to " + test(msg[0]);
                    speakOut (temp);

                    if (newVoiceCommand.equals("send")){
                        try {
                            SmsManager smsManager = SmsManager.getDefault();
                            out.append(contact);
                            smsManager.sendTextMessage(contact, null, msg[1], null, null);
                            Toast.makeText(getApplicationContext(), "SMS Sent! to "+msg[0] + " at " +contact,
                                        Toast.LENGTH_LONG).show();
                          } catch (Exception e) {
                            Toast.makeText(getApplicationContext(),
                                "SMS faild, please try again later!",
                                Toast.LENGTH_LONG).show();
                            e.printStackTrace();
                          }
                    }
                    else if (newVoiceCommand.equals("no")) out.append("Not sending");
                }
            }
            else if (decide[0].equals("call")){
                out.append (s);
                if (!s.equals(""))  {
                    call (s);
                }
            }
        }
        break;
    }
    }
} 
```

我目前的尝试：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    switch (requestCode) {
    case RESULT_SPEECH: {
        if (resultCode == RESULT_OK && null != data) {
            s="";
            //Grab the speech results and save them in an arraylist
            text = data
                    .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
            //Split each word into an array item
            decide = text.get(0).split("\\s");
            //Re-concatenate the words starting with the second word together
            for (int i=1; i<decide.length;i++) s= s+decide[i] + " ";
            //If the first word is "text", then send an SMS using the rest of the information spoken
            if (decide [0].equals("text")){
                if (!s.equals("")){
                    check (s);
                    Intent spIntent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
                    spIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, "en_US");

                    try {
                        startActivityForResult(spIntent, RESULT_SPEECH2);
                    } catch (ActivityNotFoundException a) {
                        Toast t = Toast.makeText(getApplicationContext(),
                                "Opps! Your device doesn't support Speech to Text",
                                Toast.LENGTH_SHORT);
                        t.show();
                    }
                    switch (requestCode) {
                    case RESULT_SPEECH2: {
                        if (resultCode == RESULT_OK && null != data) {
                            text2 = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
                            s2 = "";
                            if (text2.get(0).equals("send")){
                                smsText (s);
                            }
                            else if (text2.get(0).equals("cancel")) return;
                        }
                    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T03:16:04.720

简而言之，所有语音识别结果都将通过对`onActivityResult`. 您不会阻止并等待结果，因此您需要一种方法来确定识别是响应命令还是在收到结果时进行确认。

这是[参数`requestCode`的`Activity.startActivityForResult()`](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)用途：

> 有时您想在活动结束时从活动中获取结果。例如，您可以启动一个活动，让用户在联系人列表中选择一个人；当它结束时，它会返回被选中的人。为此，您`startActivityForResult(Intent, int)`使用第二个整数参数来标识调用的版本。结果将通过您的`onActivityResult(int, int, Intent)` 方法返回。

如果您在启动语音识别活动时使用两个不同的值`requestCode`（例如，定义`private final static int REQUEST_SPEECH_COMMAND = 1, REQUEST_SPEECH_CONFIRMATION = 2`），您可以在 中做出不同的响应`onActivityResult`。请注意，您需要存储第一次语音识别的结果（操作、消息和收件人），以便第二次可以使用此信息。

# java - 我可以使用哪些 Java API 来构建简单的语音通信程序？

> ID：16127570
> 
> 赞同：1
> 
> 时间：2013-04-21T03:13:10.873
> 
> 标签：java, api, chat, communication, voice

我想为一群朋友构建一个语音聊天程序，因为他们中的一些人受到了病毒的攻击，我们认为这些病毒是从 Skype 的未知用户那里发送的。Skype 还存在其他安全问题，用户可以访问其好友列表 IP 上的用户，从而允许 DDoS 和其他此类事情。为了帮助阻止这种情况，我想构建一个简单的语音聊天程序，我可以将它托管在我的计算机上（或者从单独的服务器，如果有的话）。我听说 Java 的内置 API 可以为此工作，但是我应该专门使用哪些 API，以及有哪些好的资源/教程/视频来学习这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T03:39:00.660

Twilio 很可能符合您的要求。您可以从这里开始：[Twilio 快速入门](http://www.twilio.com/docs/quickstart)。

它允许您发起和接听电话，甚至是短信。您将需要学习一点[TwiML](http://www.twilio.com/docs/api/twiml)，但它相对简单。

该站点有关于常见用例的良好示例代码。[这是一个发送 SMS 消息](http://www.twilio.com/docs/quickstart/java/sms/hello-monkey)的示例 Java 程序。

这是一个[拨打电话的电话](http://www.twilio.com/docs/quickstart/java/rest/call-request)——摘自 Twilio 网站：

```
import java.util.Map;
import java.util.HashMap;

import com.twilio.sdk.TwilioRestClient;
import com.twilio.sdk.TwilioRestException;
import com.twilio.sdk.resource.instance.Account;
import com.twilio.sdk.resource.instance.Call;
import com.twilio.sdk.resource.factory.CallFactory;

public class MakeCall {

    public static final String ACCOUNT_SID = "AC123";
    public static final String AUTH_TOKEN = "456bef";

    public static void main(String[] args) throws TwilioRestException {

        TwilioRestClient client = new TwilioRestClient(ACCOUNT_SID, AUTH_TOKEN);
        Account mainAccount = client.getAccount();
        CallFactory callFactory = mainAccount.getCallFactory();
        Map<String, String> callParams = new HashMap<String, String>();
        callParams.put("To", "5105551212"); // Replace with your phone number
        callParams.put("From", "(510) 555-1212"); // Replace with a Twilio number
        callParams.put("Url", "http://demo.twilio.com/welcome/voice/");
        // Make the call
        Call call = callFactory.create(callParams);
        // Print the call SID (a 32 digit hex like CA123..)
        System.out.println(call.getSid());
    }
} 
```

**重要提示：** Twilio 有[免费试用版](http://www.twilio.com/help/faq/twilio-basics/how-does-twilios-free-trial-work)，但最终会产生一些费用。

# xcode - 如何在 Mac 上通过命令行编译 C++ 程序

> ID：16127573
> 
> 赞同：4
> 
> 时间：2013-04-21T03:14:04.067
> 
> 标签：xcode, gcc, g++, clang

我曾经用来`Xcode`构建和运行`C++`程序。

我使用命令行在我的`Xcode`项目中编译相同的源代码。

编译单个`.cpp`文件是可以的。

编译更复杂的项目（多个文件）是不行的。

我试过了`gcc`，，，，。`g++``clang``clang++`

主要问题是未定义的符号。

你能展示如何通过命令行编译复杂的项目（多个文件）吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T04:07:14.687

From your description, it sounds like you're not using the `-c` (compile, but don't link) flag. Steps to build your project:

1.  Compile all of the source files:

    ```
    c++ -c file1.cpp
    c++ -c file2.cpp
    c++ -c file3.cpp 
    ```

2.  Link your final executable:

    ```
    c++ file1.o file2.o file3.o 
    ```

    You can use an optional `-o` flag to specify the output program name. It probably defaults to `a.out`.

It would be better to use some kind of build tool (like `make`, for example) to automate this process, or you'll find it to be very error prone.

# python - Python += 与全局变量上的函数内的 .extend()

> ID：16127575
> 
> 赞同：6
> 
> 时间：2013-04-21T03:14:28.497
> 
> 标签：python, methods, global, operator-keyword

我已经阅读了其他一些 SO（[PythonScope](https://stackoverflow.com/questions/146359/python-scope)和[globals 不需要 global](https://stackoverflow.com/questions/14323817/global-dictionaries-dont-need-keyword-global-to-modify-them)），但似乎没有什么能像我想要的那样明确解释，而且我在精神上筛选[PyDocs](http://docs.python.org/3/reference/lexical_analysis.html#operators)是否告诉我问题的答案时遇到了麻烦：

```
myList = [1]

def foo():
    myList = myList + [2, 3]
def bar():
    myList.extend([2, 3])
def baz():
    myList += [2, 3] 
```

现在，可以理解的是，

```
>>> foo()
UnboundLocalError: local variable 'myList' referenced before assignment 
```

和

```
bar()  # works
myList # shows [1, 2, 3] 
```

但是之后

```
>>> baz()
UnboundLocalError: local variable 'myList' referenced before assignment 
```

但是，我认为，`+=`在这种情况下，隐式称为方法运算符之类的东西`extend()`，但错误意味着由于某种原因它实际上并未`+=`视为`extends()`. 这与 Python 解析应该如何工作一致吗？

我会认为调用等效于方法运算符的函数，它们在所有情况下都是等效的。相反，它似乎将其视为`+=`实际的赋值运算符。除了，这不完全正确，因为如果我做某事（诚然做作）：

```
myList = range(50000000) # wait a second or two on my laptop before returning
myList += [0]            # returns instantly
myList = myList + [1]    # wait a second or two before returning 
```

所有这些都是预期的，如果`+=`实际上只是调用`extend()`.

是否有一些更好的区别（或非常明显的点......）我错过了，这清楚地表明`myList`in`baz()`需要被视为局部变量，因此`+=`不能隐式转换为`extend()`它可以识别全局变量多变的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T04:21:12.120

`+=`不会隐式调用`extend()`. 首先，它是一个[增广赋值运算符](http://docs.python.org/2/reference/simple_stmts.html#augmented-assignment-statements)。

如果你看它上面的部分`assignment`说：

> 将对象分配给单个目标的递归定义如下。
> 
> 如果目标是标识符（名称）：
> 
> 如果名称没有出现在当前代码块中的全局语句中：名称绑定到当前本地命名空间中的对象。否则：名称绑定到当前全局命名空间中的对象。

由于增强的分配是：

> 增强赋值是二元运算和赋值语句在单个语句中的组合：

它遵循相同的规则。如你看到的：

```
>>> def baz():
        myList += [2, 3]

>>> dis.dis(baz)
  2           0 LOAD_FAST                0 (myList)
              3 LOAD_CONST               1 (2)
              6 LOAD_CONST               2 (3)
              9 BUILD_LIST               2
             12 INPLACE_ADD         
             13 STORE_FAST               0 (myList)
             16 LOAD_CONST               0 (None)
             19 RETURN_VALUE 
```

> 扩充赋值计算目标（与普通赋值语句不同，不能解包）和表达式列表，对两个操作数执行特定于赋值类型的二元运算，并将结果分配给原始目标。目标只评估一次..

第一次调用尝试评估`myList`，这导致`LOAD_FAST`因为没有`global`声明它被假定为局部变量：

> `LOAD_FAST(var_num)`
> 
> **将对本地** 的引用推`co_varnames[var_num]`送到堆栈上。

找不到它，因此引发了错误。如果找到了，**那么**我们就到了调用执行扩展工作的方法的 oppcode **，**一旦这个操作完成，结果将被分配回变量，但我们从来没有走到这一步。**`INPLACE_ADD``myList.__iadd__`**

 **无论如何，您不应该真正操纵`global`s，从您的函数返回新结果或将其作为参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T03:22:19.417

当你改变列表时，你应该说 global myList。变异我的意思是改变参考。第一个示例和第三个示例基本相同，您只需使用 += 作为简写

```
myList = [1]

def foo():
    global myList
    myList = myList + [2, 3]
def bar():
    myList.extend([2, 3])
def baz():
    global myList
    myList += [2, 3]

foo()
bar()
baz() 
```**

# python - 文件 I/O：数组

> ID：16127580
> 
> 赞同：0
> 
> 时间：2013-04-21T03:14:56.627
> 
> 标签：python, python-2.7

```
def addNumbers(x,y):
        out_file = open("data.txt","w")
        out_file.write(x + "," + y +"\n")
        out_file.close()
        in_file = open("data.txt", "r")
        text = in_file.read()
        in_file.close()
        print text 
```

当我运行这个程序时，我得到：

```
x,y 
```

最终，我想要一个数组：

```
x  y 
```

我希望能够在文件中添加行。我错过了什么？最终结果应该给我一组坐标：

```
x  y
x  y 
x  y
x  y 
etc... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T03:17:09.053

您需要的是“a”作为打开的模式，它代表附加。每次打开文件时，模式“w”都会重置文件。如果您一次输出所有元素而不是为每个元素重新打开文件，它也会更有效。 [http://docs.python.org/2/library/functions.html#open](http://docs.python.org/2/library/functions.html#open)

# java - 使用对象调用方法

> ID：16127587
> 
> 赞同：0
> 
> 时间：2013-04-21T03:15:51.017
> 
> 标签：java, arrays, object, method-call

我需要帮助找出我的代码出了什么问题。我试图使用 driver1.DriverExam(answers) 来调用 object.method(array) 希望它能够正确地对用户的输入进行评分，但这会产生错误。如何在第二个文件中正确调用 driver1.DriverExam(answers) 以从第一个文件执行 DriverExam 构造函数？我敢肯定这是一些简单的修复，你们都会在看到它的一分钟内注意到，但我似乎无法弄清楚。先感谢您！

到目前为止我有这个（一个文件要处理，另一个作为用户输入）：

```
/**
   DriverExam class
   Chapter 8, Programming Challenge 5
*/

public class DriverExam
{
   final int PASSING = 15;       // Minimum # of correct answers to pass
   // Array of correct answers
   private char[] correct = { 'B', 'D', 'A', 'A',
                              'C', 'A', 'B', 'A',
                              'C', 'D', 'B', 'C',
                              'D', 'A', 'D', 'C',
                              'C', 'B', 'D', 'A' };

    //step 1: declare an array to hold the student's answers
    private char[] studentAnswers = new char[20];           

    //step 2: declare two int variables, one is to hold the number of correct answers.
   // The other is to hold the number of incorrect answers. 
    private int correctAnswers = 0;
    private int incorrectAnswers = 0;

    /**
   step 3: The constructor copies an array of answers
      to the student field.
      @param s The array of answers to copy.
   */
   public DriverExam(char[] answers)
    {
        studentAnswers = answers;
    }

   /**
    step 4: The gradeExam method determines the number of
      correct and incorrect answers.   */
   public void gradeExam()
    {
        for (int k = 0; k < correct.length; k++)
        {
            if (studentAnswers[k] == correct[k])
            {
                correctAnswers += 1;
            }
            else
            {
                incorrectAnswers += 1;
            }
        }
    }

    /**
     step 5: The passed method determines whether the student
      passed or failed the exam.
      @return true if the student passed, false otherwise.
   */
    public boolean passed()
    {
        if (correctAnswers >= 15)
        {
            return true;
        }
        return false;
    }

   /**
    step 6: The totalCorrect method returns the number of
      questions correctly answered.
      @return The number of questions correctly answered.
   */
    public char[] totalCorrect()
    {
        return correctAnswers;
    }

}

/**
   DriverTest program
   Chapter 8, Programming Challenge 5
*/

import java.util.Scanner;
public class DriverTest
{
   public static void main(String[] args) 
   {
      String input;                             // To hold keyboard input
      final int NUM_ANSWERS = 20;               // Number of answers
      char[] answers = new char[NUM_ANSWERS];   // Array to hold answers

      // Create a Scanner object for keyboard input.
      Scanner keyboard = new Scanner(System.in);

      // Get the user's answers to the questions.
      System.out.println("Enter your answers to the " +
                         "exam questions. (Make sure " +
                         "Caps Lock is ON!)");
        //step 7: Get the student's answers to the questions
        for (int x = 0; x < NUM_ANSWERS; x++)
        {
            System.out.print("Enter answer to question " + (x + 1) + ": ");
            answers[x] = keyboard.next().charAt(0);
        }

      //step 8: Create a DriverExam object.
        DriverExam driver1 = new DriverExam(answers);

        //step 9: Display a report to print the number of correct answers,  
        //the number of incorrect answers, and whether the student passes the exam or not by calling
        //gradeExam, totalCorrect, and passed methods.
        driver1.gradeExam();    
        System.out.println("The number of correct answers is: " + driver1.totalCorrect());
        System.out.println("The number of incorrect answers is: " + (NUM_ANSWERS - driver1.totalCorrect()));
        if (driver1.passed() == true)
        {
            System.out.println("Congratulations! You have passed!");
        }
        else 
        {
            System.out.println("You have failed.");
        }

    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:23:41.113

我看到两个问题，首先..

```
public char[] totalCorrect() {
    return correct;
} 
```

我认为它应该`correctAnswers`根据您对该功能的使用情况返回并对其进行评论。请记住，您还需要更改返回类型。第二，创建`DriverExam`对象的方式。它应该是

```
DriverExam driver1 = new DriverExam(answers); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T03:18:38.120

您应该使用允许您传递答案的 DriverExam 构造函数，而不是您正在执行的默认构造函数。

即，不是这个：

```
 DriverExam driver1 = new DriverExam();

    driver1.DriverExam(answers); // this makes no sense and is not legal Java 
```

但是这个：

```
 DriverExam driver1 = new DriverExam(answers); 
```

# php - 从表中检索数据

> ID：16127591
> 
> 赞同：2
> 
> 时间：2013-04-21T03:16:05.720
> 
> 标签：php, html, css

我在 php 方面相对较新，当我从数据库的表中检索数据时遇到问题......表的名称是“离开”。更重要的是我不得不说我可以轻松地从另一个表中检索数据同一个数据库。我使用的是开源数据库，“离开”表是由我创建的。这是原因吗？？实际上我没有找到这个问题的任何原因。我正在使用 mysql_fetch_row()，但我有错误如下

> 警告：mysql_fetch_row() 期望参数 1 是资源，在第 42 行的 C:\xampp\htdocs\attendance_system\admin_leave.php 中给出的布尔值
> 
> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“离开”附近使用正确的语法

这是我的代码...请帮助我

代码在这里

```
<?php
/*@session_start();
if (isset($_SESSION['username']) && $_SESSION['username']) {

} else {

header("Location: index.php");
}
$title = 'Leave Application';*/
include_once 'config.php';
include('header.php');
?>
<div class="grid_12">
<div class="contentpanel">

    <h2 align="center">Leave Application</h2>

    <?php

        $sql =  mysql_query('select * from leave');

    ?>
    <table class="list" cellspacing="0" cellpadding="5" border="1">
        <thead>
            <tr>
                <th>&nbsp;</th>
                <th>Employee ID</th>
                <th>Employee Name</th>
                <th>User Name</th>
                <th>Leave Days</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Reason</th>

            </tr>
        </thead>

        <tbody>

        <?php
           while($w= mysql_fetch_row($sql) or die(mysql_error()))
           {
              echo 
              "<tr>
              <td>&nbsp;</td>
              <td>".$w[0]."</td>
              <td>".$w[1]."</td>
              <td>".$w[2]."</td>
              <td>".$w[3]."</td>
              <td>".$w[4]."</td>
              <td>".$w[5]."</td>
              <td>".$w[6]."</td>

              </tr>";

           }
        ?>

        </tbody>

    </table>
    <br/>
    <br/>
</div>
</div>
<?php include('footer.php'); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:17:40.233

[leave](http://dev.mysql.com/doc/refman/5.0/en/leave.html)是MySql中的一个关键字

您需要将表名放在反引号中。

用这个：

```
 $sql =  mysql_query('select * from `leave`'); 
```

# coffeescript - CoffeeScript：不使用括号的惰性求值

> ID：16127593
> 
> 赞同：1
> 
> 时间：2013-04-21T03:16:36.520
> 
> 标签：coffeescript

我正在尝试在我的 CoffeeScript 代码中创建一种全局的单例对象：

```
window.MyLib = 
  Foos: {}
  Bars: {}
  Client: ->
    @_client ||= (
      someVar = 'foo'
      new ExpensiveClient(someVar)
    )

# ...

MyLib.Client.performSomeAction() 
```

但是，代码实际上需要我这样做：

```
MyLib.Client().performSomeAction() 
```

如何解决实现惰性实例化的问题，而无需使用括号将其作为函数调用？

**更新：**或者，如果有一种方法可以实现某种“缺少方法”，该`Client`函数可以返回一个将职责委托给实际客户端的对象，但仅在需要时实例化它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T22:05:50.057

也许是这样的：

```
lazyGet = (obj, name, property) ->
  Object.defineProperty obj, name, get: property

window.MyLib = do ->
  @_client = null

  Foos: {}
  Bars: {}

  lazyGet this, 'Client', ->
    @_client ||= (
      someVar = 'foo'
      new ExpensiveClient someVar
    ) 
```

# r - 从数据框中删除其列值与另一个数据框的列值不匹配的行 - R

> ID：16127600
> 
> 赞同：1
> 
> 时间：2013-04-21T03:17:38.287
> 
> 标签：r

所以我有两个不同维度的数据框。

第一个 x 大约有 10,000 行，长度如下所示：

```
Year    ID    Number
2008.1  38573 1
2008.2  24395 3 
```

（中间有很多数据）

```
2008.4  532   4 
```

第二个，x2，大约 80,000 行长，看起来像：

```
Year    ID     Number
2008.1  38573  2
2008.2  24395  3 
```

（中间有很多数据）

```
2008.4  532    4 
```

基本上，我想删除第二个数据中满足以下条件的行：该行中的 Year、ID 和 Number 值与第一个数据帧的任何行都不匹配。所以在上面的例子中，我会从第二个数据框中删除第 1 行，因为数字不匹配。

我试过了：

```
x2new <- x2[(x2$ID == x$ID && x2$Year==x$Year && x2$Number == x$Number),] 
```

但它不起作用，因为两个数据帧的长度不同。

我尝试过使用双 for 循环来删除不具备所有 3 个条件的行，但 R 根本无法进行那么多迭代。

请帮忙！谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T03:35:41.700

一个简单的`merge`

```
 merge(dat1,dat2) 
```

例如，使用您的数据：

```
dat1 <- read.table(text='Year,ID,Number
2008.1,38573,1
2008.4,532,4
2008.2,24395,3',header=TRUE,sep=',')

dat2 <- read.table(text='Year,ID,Number
2008.1,38573,2
2008.4,532,4
2008.2,24395,3',header=TRUE,sep=',') 
```

然后你得到：

```
merge(dat1,dat2)
    Year    ID Number
1 2008.2 24395      3
2 2008.4   532      4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T03:39:34.183

我知道您想删除第一个数据框中三列中没有一列匹配的所有行，并保留至少一列匹配的所有行，对吗？如果是这样，只需这样做：

```
newX2 <- x2[ x2$ID %in% x$ID | x2$Year %in% x$Year | x2$Number %in% x$Number,] 
```

# javascript - 用户输入的 Javascript 验证 (regExp)

> ID：16127602
> 
> 赞同：0
> 
> 时间：2013-04-21T03:17:59.960
> 
> 标签：javascript, html

我正试图围绕正则表达式。我目前有一个表单，我想验证用户输入是否只是字母（尽管字母、数字和空格的示例会有所帮助）。我希望通过提交按钮检查此验证。谁能帮我解决我的语法/逻辑？另外请解释您的答案，以便我尝试理解它。如果可能的话，我还想将它保留在 JavaScript 中，在这件事上的任何帮助将不胜感激！

这是我的表单代码：

```
First name: <input type="text" name="firstName" /><br />
<span id="firstNameWarnings" style="color:black"> </span>

<button type="submit" onclick="return validateRegistrationForm()" >Register</button> 
```

注意：我的 JavaScript 通过主函数运行所有函数。（提交调用主函数。）这是我当前的 JavaScript 代码：

```
 function validateFirstName()
        {
            var k=document.forms["registration"]["firstName"].value;
            var vld=new RegExp([A-Za-z]);

            if( k != vld)
            {
                document.getElementById("firstNameWarnings").style.color = "#F00";
                document.getElementById("firstNameWarnings").innerHTML = "First name onyl take letters!";
                return false;
            }
            else
            {
                document.getElementById("firstNameWarnings").innerHTML = "";
                return true;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T03:29:12.393

你可以用它来检查 - `if (/^[a-zA-Z]+$/.test(k))`。

`^`- 匹配字符串的开头。

`[a-zA-Z]`- 范围内的任何字符。

`+`- 一次或多次。

`$`- 匹配字符串的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T03:23:09.747

使用 RegExp 中的测试方法

```
 if( vld.test(vk)) 
```

这是有关 RegExp 测试方法的更多信息。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test)

# codeigniter - CodeIgniter：我无法在数据库中插入 file_name 图像

> ID：16127607
> 
> 赞同：-1
> 
> 时间：2013-04-21T03:18:20.030
> 
> 标签：codeigniter

那是代码在我的控制器中......我不能在数据库中插入图像的名称，除了上传到目录 /uploads/

插入图像文件名的代码如下：`$data[‘file_name’] = $_POST[‘file_name’];`

请帮助我，因为需要快速..非常感谢

```
public function edit ($id = NULL)
{

  // Fetch a article or set a new one
  if ($id) {
  $this->data[‘article’] = $this->article_m->get($id);
  count($this->data[‘article’]) || $this->data[‘errors’][] = ‘article could not be found’;
  }
  else {
  $this->data[‘article’] = $this->article_m->get_new();
  }

  // Set up the form
  $rules = $this->article_m->rules;
  $this->form_validation->set_rules($rules);

  // Process the form

  if ($this->form_validation->run() == TRUE) {

  $data = $this->article_m->array_from_post(array(
  ‘cat_id’,
  ‘title’, 
  ‘url’, 
  ‘body’, 
  ‘pubdate’
  ));

  /*
    * upload
    */
  $config[‘upload_path’] = ‘c:/wamp/www/uploads/’;
  $config[‘allowed_types’] = ‘gif|jpg|png’;
  $config[‘max_size’] = ‘1000’;
  $config[‘max_width’]  = ‘10240’;
  $config[‘max_height’]  = ‘7680’;
  $field_name = “file_name”;
  $this->load->library(‘upload’, $config);
  if( $this->upload->do_upload($field_name)){
    print “uploaded”;
    die(“uploaded”);

  } else {
    $error = array(‘error’ => $this->upload->display_errors());
    print_r($error);
    die();
  }

  //end of upload
  //insert file_name 
                    $data[‘file_name’] = $_POST[‘file_name’];
  $this->article_m->save($data, $id);

  } 
  // Load the view
  $this->data[‘subview’] = ‘admin/article/edit’;
  $this->load->view(‘admin/_layout_main’, $this->data);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:16:09.993

你可以试试这样的

```
if( $this->upload->do_upload($field_name) )
{
    // get upload data
    $upload_data = $this->upload->data();
    $data[‘file_name’] = $upload_data['file_name'];
    $this->article_m->save($data, $id);
    //...
}
else
{
    //...
} 
```

# restsharp - RestSharp 如何使用 AddDefaultUrlSegment？

> ID：16127611
> 
> 赞同：2
> 
> 时间：2013-04-21T03:18:42.183
> 
> 标签：restsharp

每次我尝试使用 AddDefaultUrlSegment 它都不起作用。

```
 var client = new RestClient("http://example.com/{test});
       client.AddDefaultUrlSegment("test",123); 
```

当我查看提琴手时，它不`%7Btest%7D`会这样做`123`。如果我在请求部分做同样的事情，它会起作用。

有谁知道我做错了什么？

# html - 为什么内联非替换元素的计算高度因浏览器而异？

> ID：16127614
> 
> 赞同：3
> 
> 时间：2013-04-21T03:19:24.430
> 
> 标签：html, css

![内容区域加前导等于行内框](https://i.stack.imgur.com/9hO4z.png)

根据上图（来自《CSS The Definitive Guide 3rd Edition》），计算出的内联框高度等于内容区域加上前导，如果我们不指定`line-height`，则高度仅由内容区域决定.

再次根据“CSS The Definitive Guide 3rd Edition”，用户代理可以选择以下两种方式之一来计算内容区域高度：

> 在不可替换元素中，内容区域可以是两种事物之一，CSS2.1 规范允许用户代理选择哪一种。内容区可以是元素中每个字符的em box串在一起所描述的box，也可以是元素中的字符glyphs所描述的box。

我使用一个简单的页面来测试浏览器之间的内联元素高度计算：

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <style>
        span {
            font-size: 15px;
        }
    </style>
</head>
<body>
    <span>MERLIN</span>
</body>
</html> 
```

结果如下所示，`span`高度值由浏览器开发者工具给出。

*   铬（23.0.1271.101）：15 像素
*   火狐（20.0）：16像素
*   Safari（6.0.3（8536.28.10））：17px

（`line-height`明确指定到 15px 仍然会导致相同的结果）

为什么所有三种浏览器的计算高度都不同？根据规范，用户代理只有两种方式可以选择表单（em box 或 character glyph）。

这是否意味着我无法控制内联非替换元素的高度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T03:22:45.513

> 根据规范，用户代理只有两种方式可以选择表单（em box 或 character glyph）。

但它也[说](http://www.w3.org/TR/CSS21/visudet.html#inline-non-replaced)：

> 内容区域的高度应该基于字体，但是这个规范没有具体说明如何。

因此，仍然没有 100% 明确定义应该如何计算高度。请注意，不同的浏览器有不同的字体渲染算法，这也可能会影响这些计算。

# javascript - 当参数是函数时，jQuery切换不起作用

> ID：16127616
> 
> 赞同：1
> 
> 时间：2013-04-21T03:19:35.063
> 
> 标签：javascript, jquery, html, web

我正在尝试使用`toggle()`来完成我的点击事件。在这种情况下，我阅读了 API，并使用`toggle(function1, function2, ...)`. 但这很奇怪。当我点击它时，标签只是隐藏起来，而不是在里面执行那些功能。

这是我的 JavaScript 代码。

```
function clickMe(){
    $("#lime").toggle(
        function(){
            var names = document.getElementsByName("selectOne");
            var len = names.length;
            if (len > 0) {
                var i = 0;
                for (i = 0; i < len; ++i) {
                    names[i].checked = true;
                }
            }
        },function(){
            var names = document.getElementsByName("selectOne");
            var len = names.length;
            if (len > 0) {
                    var i = 0;
                    for (i = 0; i < len; ++i) {
                        names[i].checked = false;
                    }
            }
        }
    ) ;      
} 
```

这是 HTML 代码。

```
 <a href="javascript:void(0);" onclick="clickMe()" id="lime">selectAll</a>
  <form>
    <input type="checkbox" name="selectOne" /><br />
    <input type="checkbox" name="selectOne" /><br />
    <input type="checkbox" name="selectOne" /><br />
    <input type="checkbox" name="selectOne" /><br />
    <input type="checkbox" name="selectOne" /><br />
    <input type="checkbox" name="selectOne" /><br />
  </form> 
```

我在等评论。提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T03:23:46.797

[此功能已在 jQuery 1.9 中删除](http://api.jquery.com/toggle-event/#entry-longdesc)。

改用它（也适用于旧版本）：

```
$(function ($) {

    var inputs = $('input[name=selectOne]');

    $("#lime").click(function () {
        inputs.prop( 'checked', ! inputs.prop('checked') );
    });
}); 
```

这是小提琴：http: [//jsfiddle.net/3GQDU/](http://jsfiddle.net/3GQDU/)

* * *

正如@Andre 所指出的，如果第一个是手动检查的，那么它将取消选中所有。如果这不是您想要的，请使用：

```
$(function ($) {

    var inputs = $('input[name=selectOne]'),
        flag = true;

    $("#lime").click(function () {
        inputs.prop( 'checked', flag );
        flag = ! flag;
    });
}); 
```

这是小提琴：http: [//jsfiddle.net/3GQDU/1/](http://jsfiddle.net/3GQDU/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T03:41:35.863

```
$(function(){
    var check = true;
    $("#lime").click(function(){
        $('input[name=selectOne]').prop('checked', check);
        check = !check;
    });
}); 
```

通过这样做，您将不需要`#lime`元素中的“onclick”属性。只需删除它，让 jQuery 为您绑定点击处理程序。这通常是一件好事，因为它将结构和行为分开。

**编辑：**

如果你需要一个能重现旧的 jQuery 切换行为的函数，这里是：

```
(function($){
    $.fn.toggleHandlers = function(eventType){
        var i = 0;
        var handlers = $.makeArray(arguments).slice(1);
        return this.bind(eventType, function() {
            handlers[i].apply(this, arguments);
            if(i < handlers.length -1)
                i++;
            else
                i = 0;
        });
    };
})(jQuery); 
```

与 jQuery toggle 的不同之处在于它获得了一个额外的参数（第一个），即事件类型。因此，它适用于点击以外的事件。称它为：

```
$("#myElement").toggleHandlers('click', handler1, handler2[, handler3]); 
```

见小提琴：http: [//jsfiddle.net/andreortigao/j9MH2/](http://jsfiddle.net/andreortigao/j9MH2/)

# php - 在 joomla 中创建对象而不是文章？

> ID：16127618
> 
> 赞同：0
> 
> 时间：2013-04-21T03:19:44.937
> 
> 标签：php, html, object, joomla, joomla-extensions

我试图在 joomla 中创建一个网站，类似于： [http](http://www.cuevana.tv/#!/peliculas) ://www.cuevana.tv/#!/peliculas 它不会是关于电影或在线流媒体的，但我想有“对象”。我检查了那个网站，我注意到电影是一种对象，它们有：类型、语言、演员、标题、类别等。在 joomla 我可以选择只制作文章，但我不能有文章属性。关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:01:20.403

我不确定您的确切含义，但使用 Joomla 3.1 您可以分配标签。我不确定您所说的文章没有标题是什么意思……文章和核心中的所有内容项都有标题、图像、链接、关键字、预告文本和 3.1 标记。

我假设您希望能够根据这些属性进行搜索，所以我真的认为嵌套标签会对您有所帮助，您可能希望使用插件来扩展标签 api。智能搜索地图也可能会有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-21T07:49:42.053

您需要的是一个第三方组件来扩展 Joomla 并提供 CCK 功能。寻找 Zoo、K2、SobiPro、Fabrik。

# python - Python：在 FTP 服务器上更改目录名称以下载文件

> ID：16127625
> 
> 赞同：0
> 
> 时间：2013-04-21T03:21:08.993
> 
> 标签：python

我正在尝试从 FTP 服务器下载文件。我能够连接到服务器。但无法更改目录。

```
#! /user/bin/python33
import os
import ftplib
ftp = ftplib.FTP("ftp.sec.gov")
ftp.login("anonymous", "abcd@yahoo.com")
data = []
ftp.dir(data.append)
ftp.quit()
for line in data:
    print( "-", line)
print(os.getcwd())
path= "/edgar/full-index/2013/"
print(path)
ftp.cwd(path) 
```

它在最后一行失败。有人可以建议需要做什么吗？ 非常感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:37:00.377

您的`cwd`呼叫失败，因为您之前呼叫过`ftp.quit()`。

[该方法的文档](http://docs.python.org/2/library/ftplib.html#ftplib.FTP.quit)说：

> 向服务器发送 QUIT 命令并关闭连接。这是关闭连接的“礼貌”方式，但如果服务器对 QUIT 命令响应错误，它可能会引发异常。这意味着调用 close() 方法会使 FTP 实例对后续调用无用（见下文）。

（“下面的”参考是文档的下一部分，它说您不能对已关闭的 FTP 对象执行任何操作。）

# python - Django单元测试执行后不清除数据库

> ID：16127626
> 
> 赞同：5
> 
> 时间：2013-04-21T03:21:29.080
> 
> 标签：python, django, unit-testing

我正在一个视图上运行一系列单元测试，但我注意到在每个测试中访问的数据库没有改变。

例如，我可能运行的第一个测试可能有以下命令：

```
Post.objects.create(title='TEST1',...) 
```

如果我得到响应，查询集将包含：

但是，我在此之后运行的所有测试都将返回相同的

```
<Post: TEST1> 
```

除了第一个测试之外，没有任何测试创建标题为“TEST1”的对象；它们都是用其他数字创建的，例如“TEST2”、“TEST3”等。

此外，如果我单独运行测试，我没有问题，但如果我为应用程序运行所有测试，则会出现这些错误。有谁知道发生了什么？我正在使用`django.test.TestCase`所有测试。

# templates - Smarty 模板 VS 模型视图控制器

> ID：16127642
> 
> 赞同：0
> 
> 时间：2013-04-21T03:24:57.817
> 
> 标签：templates, smarty, mvp

我读到 Model-View-Controller 具有很好的功能，它允许程序员在不接触其他文件的情况下修改脚本[http://en.wikipedia.org/wiki/Model-View-Controller](http://en.wikipedia.org/wiki/Model-View-Controller) 我想知道哪个更适合像这样的项目这个 MVC 还是 Smarty？IE。smarty 是否具有相同的功能，可以让程序员根据我的需要对其进行修改？还是我应该让程序员使用 MVC 从头开始​​工作？

提前感谢您的帮助>>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:43:26.620

Smarty 是一个模板引擎，它可以帮助你构建视图层来分离 html 和 php 脚本。从某种意义上说，Smarty 为你实现了 MVC 模式。</p>

MVC 只是一种模式，它不是一种特定的技术。

# mysql - 使用每个组中的前 N 个元素进行 SQL 组

> ID：16127646
> 
> 赞同：1
> 
> 时间：2013-04-21T03:26:18.813
> 
> 标签：mysql, sql, linq, group-by, average

假设我有下一张桌子：

```
+------------+---------+
|    MovieId |  rating  |
+------------+---------+
|      1     |     4   |
|      1     |     3   |
|      1     |     2   |
|      1     |     4   |
|      1     |     5   |
|      2     |     3   |
|      2     |     4   |
|      2     |     2   |
|      3     |     1   |
|      3     |     2   |
|      3     |     3   |
|      3     |     5   |
|      4     |     4   |
|      4     |     2   |
+------------+---------+ 
```

我想使用每组的前 2 个元素按组获得平均值。
例子：

```
+------------+---------+
|    MovieId |  rating  |
+------------+---------+
|      1     |     4   |
|      1     |     3   |
|      2     |     3   |
|      2     |     4   |
|      3     |     1   |
|      3     |     2   |
|      4     |     4   |
|      4     |     2   |
+------------+---------+ 
```

预期答案：

```
+------------+---------+
|    MovieId |  AVG    |
+------------+---------+
|      1     |     3.5 |
|      2     |     3.5 |
|      3     |     1.5 |
|      4     |     3   |
+------------+---------+ 
```

这是我必须获取所有电影的 AVG 的 SQL 查询。但正如我所说，我只想为每个组使用前 2 个元素。

`SELECT movieid, AVG(cast(rating as DECIMAL(10,2))) AS AVG FROM ratings group by movieid`

如果你能帮助我制作我欣赏的 SQL。我也会使用 Linq，以防你们中的一些人知道它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:13:21.343

在 SQL DBMS 中——就像在关系模型中一样——没有“第一”。您是指每部电影的任意 2 行，还是两个最高收视率，还是其他？

如果你不能定义一个订单，那么查询是没有意义的。

如果您可以定义订单，请按照我在[规范示例](http://www.schemamania.org/sql/#rank.rows)中显示的那样将表格连接到自身以创建排名，然后选择`where RANK < 3`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T04:15:48.000

对于 MySQL：-

```
select id, avg(rating) 
from (SELECT a.*, @num := @num + 1 rownum,
        (select count(*) 
         from movies m 
         where m.id<=a.id) last_count,

        (select count(*) 
         from movies m1 
         where a.id=m1.id) grp_count 
      from movies a, (SELECT @num := 0) d) f  
where grp_count-(last_count-rownum)<=2 
group by id; 
```

你可以`rownum`在oracle中使用函数。并`row_number()`在 sql server 中运行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-21T03:44:56.253

这是 SQL 中的解决方案

```
Create table #tempMovie (movieId int ,rating int)

INSERT INTO #tempMovie
Select  *  from table where movieidid=1 Limit 2
Union all
Select *  from table where movieidid=2 Limit 2
Union all
Select *  from table where movieidid=3 Limit 2
Union all
Select  *  from table where movieidid=4 Limit 2 
```

临时表#tempmovie 表将包含这样的数据

```
+------------+---------+
|    MovieId |  rating  |
+------------+---------+
|      1     |     4   |
|      1     |     3   |
|      2     |     3   |
|      2     |     4   |
|      3     |     1   |
|      3     |     2   |
|      4     |     4   |
|      4     |     2   |
+------------+---------+ 
```

然后应用分组

```
Select movieId, AVG(rating)
from #tempMovie
Group by movieId

Drop table #tempmovie 
```

# python - 如何将存档打包为可执行的 .exe 文件？

> ID：16127647
> 
> 赞同：1
> 
> 时间：2013-04-21T03:26:35.770
> 
> 标签：python, user-interface, tkinter, exe, py2exe

我用 Python 编写了一个基于 Tkinter 的 GUI 程序，并使用 Py2Exe 将它们转换为独立的 Windows 程序，现在我有一个包含帮助文件和一个 .exe 文件的大文件夹。

您知道将其全部打包到一个 .exe 文件的任何方法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T03:31:34.803

您必须在配置中设置构建脚本`zipfile = None`：

```
import py2exe, sys
from distutils.core import setup

sys.argv.append('py2exe')

setup(
    options = {
        'py2exe': {
            'verbose': True,
            'bundle_files': 1,
            'compressed': True,
            'dll_excludes': ['MSVCP90.dll', 'HID.DLL', 'w9xpopen.exe']
        }
    },
    windows = [{'script': "main.py"}],
    zipfile = None,
) 
```

这将创建一个可执行文件。

# sql - SQL 表中的分层主索引

> ID：16127651
> 
> 赞同：0
> 
> 时间：2013-04-21T03:27:55.853
> 
> 标签：sql, database-design, primary-key, teradata

我想构建一个使用两个字段A和B来识别人的sql表。它是一种层次关系，所以B总是属于某种A。

创建表时，我的主索引应该在 (A,B) 上还是只在 A 上？我正在使用基于主索引跨放大器分布数据的 Teradata，所以我想如果 B1、B2 和 B3 都属于 A1，并且如果我希望它们组合在一起，那么主索引应该只在 A .

编辑：早些时候我错误地输入了主键，它应该读取主索引

# php - 来自 HTML 表单的未定义值的 PHP 变量

> ID：16127654
> 
> 赞同：0
> 
> 时间：2013-04-21T03:28:22.707
> 
> 标签：php, is-empty

好的，所以我有一个基本上类似于订单的脚本。但是我唯一的输入选项是单选按钮。当我运行我的脚本时，我注意到它返回了错误。相反，我希望它显示并清空字段。该页面回发给自己，并更新了我在提交之前在底部留空的框。提交后的详细信息是从众多填写的。如果这有什么不同，我还使用了一个二维数组。所以我的问题是表格中的空变量。我无法解决这个问题，我认为这可能是我使用它的方式。我收到接收数据的变量的未定义索引错误。在这种情况下`$settype`并`$differentype`作为错误出现，因为它们被定义为文本框中的任何内容。我以为通过使用`empty()`我可以消除这个问题。我当然没有正确地接近它。有人可以在这里给我一些指导吗？谢谢你。

```
<form name="form1" method="POST" action="order.php">
    <input type="radio" name="set" value="1" /> 1
    <input type="radio" name="set" value="2" /> 2
    <input type="radio" name="set" value="3" /> 3
    <input type="radio" name="different" value="a" /> a
    <input type="radio" name="different" value="b" />
    <input type="radio" name="different" value="c" />
    <input type="submit" name="submit1" value="login" />
</form>

<?php
    if(isset($_POST['submit'])) {
        $settype = $_POST['set'];
        $differentype = $_POST['different'];
        if ($settype == '1' && $differenttype =='a'){
            $order = $field[0][1];
        }
        if (empty($settype) && empty($differenttype)){
            $order = "";
        }
    }
?>

<table>
    <tr>
        <td>
            <?php print($order); ?>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T03:36:54.360

您的输入提交在哪里？像这样`<input type="submit" name="submit" value="submit" />`

编辑1：您应该有一个默认的单选按钮选择值，例如

```
<input type="radio" name="set" value="1" checked="checked"/> 1
<input type="radio" name="different" value="a" checked="checked" /> a 
```

# iphone - 为什么我的 UIPageViewController 在 curl 过渡期间会自行裁剪？

> ID：16127656
> 
> 赞同：0
> 
> 时间：2013-04-21T03:28:50.220
> 
> 标签：iphone, ios, objective-c, uipopovercontroller, uipageviewcontroller

在 StoryBoard 中，我设置了两个视图控制器：

*   PageViewRootViewController - 这只是空白（在故事板中），因为一切都是以编程方式设置的。

*   VillagerTextViewController - Storyboard 设置布局

此外，我有一个充当数据源的 ModelController (NSObject)。

一切正常。我可以在页面之间转换，没有警告或错误，也没有崩溃。

但是，在转换时，页面底部会被裁剪掉。我一直试图修复它无济于事。

我还不能发布图片所以[http://s10.postimg.org/qbjlat649/Screenshot_2013_04_20_22_12_04.png](http://s10.postimg.org/qbjlat649/Screenshot_2013_04_20_22_12_04.png)

UIPageViewController 是在 PageViewRootViewController 的 viewDidLoad 方法中创建的：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    if (!pageViewController) {
        NSDictionary *options = [NSDictionary dictionaryWithObject:[NSNumber numberWithInt:UIPageViewControllerSpineLocationMin] forKey:UIPageViewControllerOptionSpineLocationKey];

        self.pageViewController = [[UIPageViewController alloc] initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal options:options];
        self.pageViewController.delegate = self;

        VillagerTextViewController *startingViewController = [self.modelController viewControllerAtIndex:0 storyboard:self.storyboard];
        NSArray *viewControllers = @[startingViewController];
        [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:NULL];

        self.pageViewController.dataSource = self.modelController;
        [self.pageViewController.view setClipsToBounds:NO];
        [self addChildViewController:self.pageViewController];
        [self.view addSubview:self.pageViewController.view];

        [self.pageViewController didMoveToParentViewController:self];

        self.view.gestureRecognizers = self.pageViewController.gestureRecognizers;
    }
} 
```

在情节提要中，我将 PageViewRootViewController 的视图设置为弹出框宽度 768 和高度 200。我还将其显示为弹出框。

VillagerTextViewController 和 ModelController 没有与大小、框架或边界明确相关的任何内容（在代码或情节提要中）。

任何帮助表示赞赏！

编辑：

固定：

```
[self.pageViewController.view setFrame:CGRectMake(self.view.bounds.origin.x, self.view.bounds.origin.y, self.view.bounds.size.width, self.view.bounds.size.height+600)]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T03:39:38.583

我没有看到你在你的代码中做任何关于给 UIPageViewController`view`一个框架的事情。重要的是不要忽略它！我不保证这是您问题的根源，但它可能是。

```
self.pageViewController.view.frame = ??????? 
```

这似乎不是问题的原因*是*`clipsToBounds`您通过设置为 NO来掩盖它；因此，您使自己不知道框架在哪里。好多了，我认为，*不是*设置`clipsToBounds`为 NO，而是让框架正确。

# javascript - 在窗口调整大小时更新画布

> ID：16127664
> 
> 赞同：1
> 
> 时间：2013-04-21T03:30:26.940
> 
> 标签：javascript, jquery, html, canvas, filter

我是使用画布元素的新手，正在尝试绘制全屏图像，然后进行一些像素修改。我为此编写了一个小方法，并且加载图像效果很好，但是调整浏览器窗口的大小非常慢 - 即使使用节流器也是如此。

这是我在画布上绘制图像并对其应用图像滤镜效果的方法：

```
drawCanvas:function(obj,src,onResize){
   var img=new Image(), 
       objData=$.data(obj), 
       canvas=Plugin.OBJ.$Canvas[0], 
       ctx=canvas.getContext("2d"), 
       win=$(window), 
       winW=win.width(), 
       winH=win.height();       

    img.src=src; 
    Plugin.CanvasSRC=src;

    img.onload=function(){ 
    var imgW=img.width, 
            imgH=img.height, 
            ratio=imgW/imgH;
        newH=(Math.round(winW/ratio)<winH)?winH:Math.round(winW/ratio), 
            winW=(newH<winH)?$win.width():Math.round(newH*ratio);

        canvas.width=winW; canvas.height=newH;
    ctx.drawImage(img,0,0,winW,newH);

    var imgdata=ctx.getImageData(0,0,winW,winH), 
            pix=imgdata.data, 
            l=pix.length, 
            filter=objData.bg_pic_filter;

    switch(filter){ ... this section does the pixel manipulation ...};

    // APPLY THE FILTER && FADE IN 
    ctx.putImageData(imgdata,0,0);
    };
}, 
```

希望我不会对此感到难以置信，但我想知道是否有更好的方法可以将图像简单地绘制到全屏画布上，但让它保持与背景大小相似的尺寸：封面？这些图像也使用像素操作过滤器。是否可以在窗口调整大小时调整画布的大小，而不必每次都重新绘制并重新应用过滤器？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T05:53:13.193

**关于你的问题的一些想法：**

当您说“即使使用节流器”时，我假设您正在防止重复触发昂贵的重绘。像这样的东西： [JavaScript/JQuery: $(window).resize 调整大小完成后如何触发？](https://stackoverflow.com/questions/2854407/javascript-jquery-window-resize-how-to-fire-after-the-resize-is-completed)

```
// on resizing, call for a delay
// after the delay call your drawCanvas()
$(window).resize(function () {
    waitForFinalEvent(function(){ drawCanvas(); }, 500, randomID());
});

// wait for the specified delay time before doing callback
// if this is called again before timeout, restart the timer
var waitForFinalEvent = (function () {
  var timers = {};
  return function (callback, ms, uniqueId) {
    if (timers[uniqueId]) {
      clearTimeout (timers[uniqueId]);
    }
    timers[uniqueId] = setTimeout(callback, ms);
  };
})();

// generate a "good enough" unique id
function randomID() {
   return (((1+Math.random())*0x10000)|0).toString(16).substring(1);
} 
```

如果您的原始过滤图像在调整大小时不会出现不可接受的像素化，您可以将原始图像保存到 dataURL，然后在调整大小的画布上缩放+重绘保存的图像，如下所示：

```
// save the canvas content as imageURL
var data=canvas.toDataURL();

// resize the canvas
canvas.width*=scaleFactor;
canvas.height*=scaleFactor;

// scale and redraw the canvas content
var img=new Image();
img.onload=function(){
    ctx.drawImage(img,0,0,img.width,img.height,0,0,canvas.width,canvas.height);
}
img.src=data; 
```

# javascript - 如何使用 JQuery 生成“onNOmousemove”事件

> ID：16127666
> 
> 赞同：0
> 
> 时间：2013-04-21T03:30:40.897
> 
> 标签：javascript, jquery, prototype, jquery-events

我玩弄了一个可以使用 jQuery 的网页设计。现在有一点我需要相反的 Eventwatching，所以我已经通过安装`"onnomousemove"`事件的 jQuery 例程意识到了这一点。是的，你没看错，一个`NOT HAPPENING EVENT`.

（*下面*）你可以在 jQuery 中找到我已经工作的解决方案。
这个想法是**控制未发生的事件**并通过这个额外指定的事件做出反应[`jQuery.Event`](http://api.jquery.com/category/events/event-object/)

呵呵，我知道最愚蠢的就是用这个来处理`"onnoerror"`事件。但这不是所希望的。它现在正在工作，我想在这里向前迈出一步。那么我的问题是什么？

**它来了：**如何触发相同的行为，`native Javascript EventListening`以便`element.addEventListener(...);`也可以处理相同的事件？

**问题：**较新的 Web 浏览器，如 Chrome、Firefox 已经实现了实现`CustomEvent`这一点的处理，但在较旧的浏览器中应该有一种使用原型的方法。我现在对 jQuery 有点盲目，无论如何，有没有人知道以传统方式生成自定义事件**而无需**原型.js 或其他库的怪异技巧？即使使用 jQuery 的解决方案也可以，但期望的目标是本机侦听器应该能够处理它。

jQuery：

```
(function($){
    $.fn.extend({
        // extends jQuery with the opposite Event Listener
        onno:function(eventname,t,fn){
            var onnotimer = null;
            var jqueryevent = {};
            $(this).on( eventname, function(e){
                window.clearTimeout(onnotimer);
                function OnNoEventFn(){
                    jqueryevent = jQuery.Event( "onno"+eventname );
                    $(this).trigger(jqueryevent);
                    e.timeStampVision=e.timeStamp+t;
                    e.timer=t; e.type="onno"+eventname;
                    fn(e);
                }
                onnotimer = window.setTimeout( OnNoEventFn, t);
            });
            return $(this);
        }
    });
})(jQuery);

$(document).ready(function() {
    // installs "onnomousemove" and fires after 5sec if mousemove does not happen.
    $(window).onno('mousemove', 5000, function(e){
        console.log('function fires after:'+e.timer+'ms at:'+e.timeStampVision+'ms with:"'+e.type+'" event, exact fired:', e.timeStamp);
    });
    // installs "onnoclick" and fires after 4sec if click does not happen.
    $(window).onno('click', 4000, function(e){
        console.log('function fires after:'+e.timer+'ms at:'+e.timeStampVision+'ms with:"'+e.type+'" event, exact fired:', e.timeStamp);
    });

    // just for demonstration, routine with "onno.." eventnamescheme
    $(window).on('onnomousemove',function(e){
        console.log( 'tadaaaa: "'+e.type+'" works! with jQuery Event',e);
    });
    // same for "onnoclick"
    $(window).on('onnoclick',function(e){
        console.log( 'tadaaaa: "'+e.type+'" works! with jQuery Event',e);
    });
});

// but how to install Custom Events even in older Safari ?
// newer Chrome, Firefox & Opera have CustomEvent.
window.addEventListener('onnomousemove',function(e){
    console.log('native js is watching you',e);
},false); 
```

# python - IndexError...超出范围，

> ID：16127667
> 
> 赞同：0
> 
> 时间：2013-04-21T03:31:11.503
> 
> 标签：python, indexing, range

继之前的出色帮助之后，我现在遇到了异常处理的问题。我有一个 11 个地块的列表，由它们的索引号选择。如果用户选择高于 11，它应该要求他们重新输入，但是 atm，我得到 IndexError: list index out of range。我会认为 except 行只会处理其他任何事情......但它一定只是缺失的一行？

```
try:
    response = raw_input("Select a monitoring plot from the list (0-11): ")
    if response == 'q':
        confirm = raw_input('Confirm quit (y/ n)...')
            if confirm == 'y':
                print 'Bye'
                break
            else:
                continue
    selected = dataList[int(plotSelect) + 1]
    print 'You selected : ', selected[1]
except ValueError:
    print "Error: Please enter a number between 0 and 11" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T03:36:43.590

`except ValueError`只捕获一个`ValueError`. 您还需要添加`IndexError`：

```
except (ValueError, IndexError): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T03:36:13.147

`except ValueError`意味着你只捕获类型的执行`ValueError`。`IndexError`如果您想以不同的方式处理它，或者同时捕获并以相同的方式处理，请包含一个 catch 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T03:39:57.180

`ValueError`当他用户输入不是数字的东西时会出现。（所以`int("hello")`抛出`ValueError`）

`IndexError`当用户输入的数字大于列表中元素的数量时抛出。（例如，`range(5)[7]`

您可能想尝试使用如下循环获取您的第一个输入

```
resp = ""
while resp not in ('0', '1', ... '10', 'q'):
    resp = raw_input(...) 
```

# jquery-mobile - Jquery Mobile“可折叠集”中的前 2 个项目在大屏幕上不对齐

> ID：16127669
> 
> 赞同：1
> 
> 时间：2013-04-21T03:31:22.660
> 
> 标签：jquery-mobile

这个 Collapsible-Set 中心的前两个项目本身。任何想法如何解决它？[http://www.mobileagentapps.com/](http://www.mobileagentapps.com/)
HTML 都是一样的，所以我认为它在 Jquery Mobile 的某个深处导致了这种情况。在我的手机上看起来不错。只是不在大屏幕上。请注意，我复制了前两项——一旦它们在列表中排名第三，它们看起来就很好。所以没有与 Jquery-Mobile 专家混淆 - 我确实在 HTML 中添加了这一行以将所有内容限制和居中在更大的屏幕上：

```
<div style="max-width:600px;margin: 0 auto;"> 
```

我的问题不相关 - 页面项目之前和之后都做了同样的事情。

```
 <div data-role="collapsible-set">
        <div data-role="collapsible" data-theme="b" data-content-theme="e" >
            <h3>Branded Mobile Apps</h3>
            <img src="phonesbig.png"/>
            <p>With the REcake system you get native mobile apps for iPhone, Android, and iPad. The apps are branded to you and make it super easy for your clients to contact you. Keeping prospects is always a challenge and having YOUR app on their phone really helps that!</p>
        </div>
        <div data-role="collapsible" data-theme="b" data-content-theme="e" >
            <h3>Branded Mobile Apps</h3>
            <img src="phonesbig.png"/>
            <p>With the REcake system you get native mobile apps for iPhone, Android, and iPad. The apps are branded to you and make it super easy for your clients to contact you. Keeping prospects is always a challenge and having YOUR app on their phone really helps that!</p>
        </div>
        <div data-role="collapsible" data-theme="b" data-content-theme="e">
            <h3>Lead Gen-Text, QR, and NFC</h3>
            <img src="daleresponse.png"/>
            <p>Text response is still the preferred method for mobile lead generation. Go ahead and try what the sign says and see what happens! Dale is an agent in Washington state and would love to hear from you. Our system allows these signs to be reusable- you just log in and change the MLS number and the sign works on the new property.  We can also show you how to get text leads from your print ads!  </p>
            <p>Our system also generates reusable QR codes that point to mobile property pages as well. These pages- like the one at <a href="http://rea.bz/kelly-6" target="new">rea.bz/kelly-6</a> give leads information about properties and also show them how to download your app.

        </div>
        <div data-role="collapsible" data-theme="b" data-content-theme="e">
            <h3>Agent Facebook App</h3>
            <img src="facebookapp.png"/>
            <p>Do you log into Facebook nearly every day? If so, then the REcake Facebook makes perfect sense for you. Your friends can stay right on Facebook and search for properties, contact you about the ones they like, save favorites, print flyers, map the properties, and more.</p>
        </div>
        <div data-role="collapsible" data-theme="b" data-content-theme="e">
            <h3>Agent Branded Mobile Web</h3>
            <img src="personal.png"/>
            <p>In addition to our apps we provide a growing number of mobile web features. For instance you get branded mobile property pages for every property in the MLS. You also get a personal agent page that allows people to contact you very easily- for instance- <a href="http://rea.bz/kelly" target="new">rea.bz/kelly</a> </p>
        </div>
        <div data-role="collapsible" data-theme="b" data-content-theme="e">
            <h3>REcake Overview</h3>
            <p>We provide you the tools you need to really connect with your prospects and communicate with your clients. And we pride ourselves in not nickle and diming you. We would love to have you as part of our party. Cake was used by the Romans to seal a bond- so we'd love to work with you to help you sell real estate.</p>
            <ul>
            <li>$14- Facebook App Only.</li>
            <li>$24- Mobile apps and text response system.</li>
            <li>$34- Mobile apps, Facebook App, text response system, and more!</li>
        </ul>
        <a href="signup.html" data-role="button" data-inline="true" data-theme="b">Sign Up Here</a>
            <p>Watch our overview video</p>
            <iframe width="200" height="200" src="http://www.youtube.com/embed/o3i0mc70y-I?controls=0&showinfo=0&showsearch=0&modestbranding=1"></iframe>
        </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:11:26.793

因为下面的 div 放在`collapsible-set`. 如果删除它，桌面上的一切都会很好。

```
<div class="content-secondary"></div> 
```

* * *

**前** ![删除 div 之前](https://i.stack.imgur.com/oTsIE.png)

* * *

**后** ![后](https://i.stack.imgur.com/bjyTF.png)

# image - 我想找到图像的傅立叶光谱

> ID：16127670
> 
> 赞同：1
> 
> 时间：2013-04-21T03:31:27.427
> 
> 标签：image, fft, frequency, dft

这个对吗？`p1`是源图像和`p2`目标图像，所有 3 个通道的值与我正在处理灰度图像并`pp1[i]`访问“第 i 个”通道具有相同的值。

```
for(int x=0;x<height;x++)
{
    for(int y=0;y<width;y++)
    {
        pp1=pixel1+x*rowstride+y*n_channels;
        pp2=pixel2+x*rowstride+y*n_channels;
        for(int xx=0;xx<height;xx++)
        {
            for(int yy=0;yy<width;yy++)
            {
                real=real+pp1[0]*cos(2*3.14*yy*y/width+2*3.14*xx*x/height);
                imag=imag-pp1[0]*sin(2*3.14*yy*y/width+2*3.14*xx*x/height);
            }
        }
        temp=sqrt(real*real+imag*imag);

        pp2[0]=(int)temp;
        pp2[1]=(int)temp;
        pp2[2]=(int)temp;
    }
} 
```

# ios - 如何在 SQLite 中使用 for 循环插入 strftime

> ID：16127672
> 
> 赞同：0
> 
> 时间：2013-04-21T03:31:50.850
> 
> 标签：ios, sqlite

我创建了列类型为“日期”的表`SQLite`。但是，当我用参数调用插入语句时：

```
sqlite3_bind_text(stmt, 6, [@"strftime('%%Y-%%m-%%d at %%H:%%M','now', 'localtime')" UTF8String],  -1, SQLITE_TRANSIENT); 
```

它不工作并返回结果：

```
strftime('%%Y-%%m-%%d at %%H:%%M','now', 'localtime') 
```

请帮我！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:46:02.767

当您调用时，`sqlite3_bind_text`您正在绑定一个文字字符串值。不执行字符串。

假设你有这样的东西：

```
sqlite3_stmt *stmt;
sqlite3_prepare_v2(dbHandle, "INSERT INTO table_name (column1, column2) VALUES (?, ?)", -1, query, nil);
sqlite3_bind_text(stmt, 1, [@"strftime('%%Y-%%m-%%d at %%H:%%M','now', 'localtime')" UTF8String], -1, SQLITE_TRANSIENT);
sqlite3_bind_text(stmt, 2, "Other value", -1, SQLITE_TRANSIENT); 
```

在这种情况下，您想要的是这样的：

```
sqlite3_stmt *stmt;
sqlite3_prepare_v2(dbHandle, "INSERT INTO table_name (column1, column2) VALUES (strftime('%%Y-%%m-%%d at %%H:%%M','now', 'localtime'), ?)", -1, query, nil);
sqlite3_bind_text(stmt, 1, "Other value", -1, SQLITE_TRANSIENT); 
```

您希望`strftime`直接在查询中调用。请注意，由于您在查询中少了一个`?`，因此您需要调整调用中使用的索引`sqlite3_bind_xxx`。

# jquery - jquery：如何根据文本输入隐藏表格

> ID：16127673
> 
> 赞同：1
> 
> 时间：2013-04-21T03:32:04.710
> 
> 标签：jquery, filter, html-table

我有一个文本输入框

```
<input type="text" id="search" /> 
```

和**多个这样的 HTML 表**：

```
<table id="table1">
<thead>
        <tr>
                <th>Table1 title</th>
        </tr>
        <tr>
                <th>Name</th>
                <th>Country</th>
        </tr>
</thead>
<tbody>
        <tr>
                <td>Andrew</td>
                <td>USA</td>
        </tr>
        <tr>
                <td>John</td>
                <td>Canada</td>
        </tr>
</tbody>
</table> 
```

我想根据输入框中的用户类型来过滤数据。

现在我的 JS 代码是：

```
$(document).ready(function(){

$("#search").keyup(function(){
        // When value of the input is not blank
        if( $(this).val() != "")
        {
                // Show only matching TR, hide rest of them
                $("#table1 > tbody > tr").hide();
                $("#table1 td:contains-ci('" + $(this).val() + "')").parent("tr").show();
         } else {
                // When there is no input or clean again, show everything back
                $("#table1 tbody > tr").show();
                }
        });
});

// jQuery expression for case-insensitive filter
$.extend($.expr[":"],
{
        "contains-ci": function(elem, i, match, array)
        {
                return (elem.textContent || elem.innerText || $(elem).text() || "").toLowerCase().indexOf((match[3] || "").toLowerCase()) >= 0;
        }
}); 
```

一切正常。

但是现在我想隐藏整个表格，如果输入的文本不在表格中，则包括thead TR。

我怎么能得到那个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T03:42:09.673

尝试这个`[Demo](http://jsfiddle.net/jrfUM/)`

```
 $("#search").keyup(function () {
    var txtVal = $(this).val();
    if (txtVal != "") {
        $(".tblDetails").show();
        $(".message").remove();
        $.each($('.tblDetails'), function (i, o) {
            var match = $("td:contains-ci('" + txtVal + "')", this);
            if (match.length > 0) $(match).parent("tr").show();
            else $(this).hide();
        });
    } else {
        // When there is no input or clean again, show everything back
        $("tbody > tr", this).show();
    }
    if($('.tblDetails:visible').length == 0)
    {
        $('#search').after('<p class="message">Sorry No results found!!!</p>');
    }
});

// jQuery expression for case-insensitive filter
$.extend($.expr[":"], {
    "contains-ci": function (elem, i, match, array) {
        return (elem.textContent || elem.innerText || $(elem).text() || "").toLowerCase().indexOf((match[3] || "").toLowerCase()) >= 0;
    }
}); 
```

# php - 2 二维数组php中的属性

> ID：16127674
> 
> 赞同：-3
> 
> 时间：2013-04-21T03:32:23.713
> 
> 标签：php, arrays, multidimensional-array

我想创建一个二维数组，第二个数组有 2 个属性。在php中可以吗？因为我知道这在 Pascal 中是可能的

例子

```
| Doc |        Term        |
|  0  |   0 => 'Term1'     |
|     |    1 =>  5         |
----------------------------
|  1  |   0 => 'Term'2'    |
|     |    1 => 2          | 
```

我的问题是，如何创建这个二维数组以及如何访问每个值？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T03:38:08.483

这是简单的数组嵌套：

```
$a = array(array('Term1', 5), array('Term2', 2));
$a[1][1] === 2; 
```

这是一个非常基本的问题。考虑查阅 php 书籍或教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T03:39:07.753

是的，您只需将数组中的项目的值制作为另一个数组，您可以根据自己的喜好进行操作。例如，

## 创建数组

```
$doc = array(
    array(
        'Term1',
        5
    ),
    array(
        'Term 2',
        2
    )
) 
```

由于没有设置 ID，因此会自动生成 ID，从 0 开始。如果需要，可以像这样设置 ID：

```
$doc = array(
    0 => array(
        3 => 'Term1',
        9 => 5
    ),
    1 => array(
        3 => 'Term 2',
        10 => 2
    )
) 
```

## 从数组中检索数据

```
$term1 = $doc[0][0];
echo $term1; // outputs 'Term 1' 
```

# c - 如何从 C 中没有空格的字符串中获取 int？

> ID：16127677
> 
> 赞同：0
> 
> 时间：2013-04-21T03:33:12.250
> 
> 标签：c, string, int

所以我有一个这样的字符串：“MULTR12”

我想将 '1' 和 '2' 作为两个单独的整数。我该怎么做呢？以前，我简单地认为它是：

```
char *string = "MULTR12";
val = string[5]; 
```

但是我得到了一个非常奇怪的 val 而不是 1 的值，就像我想要的那样。任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T03:36:54.183

这就是您将 a 转换`char`为`int`..

```
int x = string[5] - '0'; 
```

这里有一些解释.. 每个字符在内存中都表示为一个 ASCII 字符，`A`将会`65`和类似。这也适用于数字，因此`0`在 ASCII 中 is `48`, `1`is`49`等。

`0`现在，当我们从任何数字的 ASCII 表示中减去时。假设数字是`5`，这就是我们实际在做的事情..

```
int x = 53 - 48 
```

这给了我们`5`一个整数。换句话说，我们正在计算数字 ASCII 表示与 ASCII 表示的位移`0`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T03:38:05.363

有点hackish但尝试

```
val = string[5] - '0'; 
```

[无耻地从这里](https://stackoverflow.com/questions/868496/how-to-convert-char-to-integer-in-c)偷走

您在上面尝试做的基本上是采用 char '1' 的 ASCII 表示并将其转换为 int，产生 49。（可能不是您所期望的）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T03:37:58.757

你可以这样做：

```
int num = string[ 5 ] - '0'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T09:13:09.753

实际上你得到了一个奇怪的值，因为你试图改变一个固定的字符串的值。首先取一个新数组为 char str[]="Multr12"; 现在您可以访问 str[5]...试试这个

# redis - 如何使用redis的`DUMP`和`RESTORE`（离线）？

> ID：16127682
> 
> 赞同：15
> 
> 时间：2013-04-21T03:34:58.440
> 
> 标签：redis, restore, dump

我试过redis的[DUMP](http://redis.io/commands/dump)命令，重定向到文件（或管道），但是[RESTORE](http://redis.io/commands/restore)报这个错误：

```
$ redis-cli dump test > /tmp/test.dump
$ cat /tmp/test.dump | redis-cli -x restore test1 0
(error) ERR DUMP payload version or checksum are wrong
$ redis-cli dump test | redis-cli -x restore test1 0
(error) ERR DUMP payload version or checksum are wrong 
```

我知道[MIGRATE](http://redis.io/commands/migrate)可以在线执行此操作，但[MIGRATE](http://redis.io/commands/migrate)也会从原始服务器中删除该密钥，并且我不希望我的 redis 暴露在公共互联网上。

有一些第三方选项，例如[redis-rdb-tools](https://github.com/sripathikrishnan/redis-rdb-tools)，但毕竟，它究竟是如何`DUMP`工作`RESTORE`的呢？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-21T07:52:35.077

转储/恢复命令并不是真正设计用于从命令行使用，因为序列化格式是二进制的（它与用于 RDB 转储的相同）。这很不方便，因为 shell 倾向于解释这些字符（即使使用“可打印”格式）。

这是“可打印”格式：

```
$ redis-cli lpush test 1 2 3 4 5
(integer) 5
$ redis-cli dump test
"\n\x15\x15\x00\x00\x00\x12\x00\x00\x00\x05\x00\x00\xf6\x02\xf5\x02\xf4\x02\xf3\x02\xf2\xff\x06\x00\x1c\x8a\xda\x0e}\xcb\xe1." 
```

“可打印”格式不能用作真正需要实际数据的 -x 选项的输入。这是 redis-cli 的误导行为。

但是，有一种简单的方法可以获取原始格式：

```
$ redis-cli --raw dump test | hexdump -C
00000000  0a 15 15 00 00 00 12 00  00 00 05 00 00 f6 02 f5  |................|
00000010  02 f4 02 f3 02 f2 ff 06  00 1c 8a da 0e 7d cb e1  |.............}..|
00000020  2e 0a                                             |..| 
```

现在，不可能在 -x 恢复中直接通过管道传输 --raw 转储的结果，因为最后一个字符是错误的。比较 --raw 和可打印转储的输出。您会注意到 --raw 选项在末尾添加了一个额外的 \n。raw 选项不是 100% raw ;-)

在 -x 选项可以处理数据之前，需要删除这个额外的字符。最后，在还原中通过管道输出转储输出的正确命令（在 GNU/Linux 系统上）是：

```
$ redis-cli --raw dump test | head -c-1 | redis-cli -x restore test1 0
OK 
```

这不漂亮。我希望大多数人会依赖 perl/python/ruby 脚本而不是 shell 来完成这些任务。

# matlab - 特征检测算法有哪些特点及其他疑惑

> ID：16127684
> 
> 赞同：2
> 
> 时间：2013-04-21T03:35:29.443
> 
> 标签：matlab, opencv, surf, feature-extraction

我正在研究特征检测算法，很多事情似乎都不清楚。对于图像处理的初学者来说，原始论文理解起来相当复杂。如果这些都得到答复将很高兴

1.  SURF 和 SIFT 检测到哪些特征？
2.  是否有必要在灰度图像上计算这些？
3.  用简单的话来说，“描述符”一词是什么意思。
4.  一般来说，选择/提取了多少特征？有标准吗？
5.  Hessian矩阵的大小决定什么？
6.  被检测的特征的大小是多少？据说一个特征的大小就是blob的大小。那么，如果图像的大小是M*N，那么会有M*N个特征吗？

这些问题可能看起来太琐碎了，但请帮助..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T04:51:34.340

我会尝试对你的一些问题给出一个直观的答案，我不知道所有的答案。

（您没有指定您正在阅读的论文）

> SURF 和 SIFT 检测到哪些特征以及检测到多少特征？

通常，特征是图像中您围绕其选择一个小块的任何部分。您将该块向各个方向移动一小段距离。如果您发现所选内容与其周围环境之间存在相当大的差异，则将其视为一项功能。假设您稍微移动相机拍摄图像，您仍然会检测到此功能。这就是他们的重要性。通常，此类功能的最佳示例`corners`在图像中。即使是边缘也不是很好的特征。当你沿着边缘线移动你的块时，你没有发现任何变化，对吧？

检查此图像以了解我所说的内容，只有在移动补丁时您会在拐角处获得相当大的变化，在其他两种情况下您不会得到太多。

![在此处输入图像描述](https://i.stack.imgur.com/mfnC4.gif)

图片链接： http: [//www.mathworks.in/help/images/analyzing-images.html](http://www.mathworks.in/help/images/analyzing-images.html)

这里给出了一个很好的解释：http: [//aishack.in/tutorials/features-what-are-they/](http://aishack.in/tutorials/features-what-are-they/)

这是您提到的基本思想和算法，使其对多种变体更加稳健并解决了许多问题。（您可以参考他们的论文以获取更多详细信息）

> 是否有必要在灰度图像上计算这些？

我认同。无论如何，OpenCV 适用于灰度图像

> 用简单的话来说，“描述符”一词是什么意思？

假设您在一张图像中找到了特征，比如建筑物的图像。现在您拍摄了同一建筑物的另一张图像，但方向略有不同。您还在第二张图片中找到了功能。但是你怎么能匹配这些功能。说图像 1 中的特征 1 与图像 2 中的哪个特征匹配？（作为一个人，你可以很容易地做到，对吧？第一张图片中的这个角落对应第二张图片中的这个角落，某某。非常容易）。

功能只是为您提供像素位置。您需要有关该点的更多信息以将其与其他点匹配。因此，您必须使用**`describe`**该功能。而这种描述被称为“描述符”。为了描述这个特性，有算法，你可以看 SIFT 论文。

也检查这个链接：http: [//aishack.in/tutorials/sift-scale-invariant-feature-transform-introduction/](http://aishack.in/tutorials/sift-scale-invariant-feature-transform-introduction/)

> 一般来说，选择/提取了多少特征？有标准吗？

在处理过程中，您可以看到应用不同的阈值、删除弱关键点等。这都是计划的一部分。你需要了解算法才能理解这些东西。是的，您可以指定这些阈值和其他参数（在 OpenCV 中），也可以将其保留为默认值。如果您在 OpenCV 文档中检查[SIFT](http://docs.opencv.org/modules/nonfree/doc/feature_detection.html#sift-sift)，您可以查看函数参数来指定特征数量、倍频程层数、边缘阈值等。

> Hessian矩阵的大小决定什么？

我不确切知道，只是它是关键点检测器的阈值。检查 OpenCV 文档：[http ://docs.opencv.org/modules/nonfree/doc/feature_detection.html#double%20hessianThreshold](http://docs.opencv.org/modules/nonfree/doc/feature_detection.html#double%20hessianThreshold)

# spring-webflow - 页面加载时 dijit.form.DateTextBox 不可见

> ID：16127685
> 
> 赞同：0
> 
> 时间：2013-04-21T03:35:29.650
> 
> 标签：spring-webflow, spring-js

当我的页面加载时，我看不到日历： ![在此处输入图像描述](https://i.stack.imgur.com/NarDW.jpg)

当我单击表单的生日字段时，它会出现，但看起来不像我预期的那样： ![在此处输入图像描述](https://i.stack.imgur.com/3w3Yf.jpg)

我用来在jsp文件中显示的代码：

```
 <label for="birthday">Birthday<br/> </label>
          <sf:input path="birthday" id="birthday"
                 pattern="(0[1-9]|1[0-9]|2[0-9]|3[01])-(0[1-9]|1[012])-[0-9]{4}"/><br/>
            <script type="text/javascript">
              Spring.addDecoration(new Spring.ElementDecoration({
              elementId:"birthday",
              widgetType:"dijit.form.DateTextBox",
              widgetAttrs:{ datePattern:"dd-MM-yyyy", required:true }}));
    </script> 
```

所以我的问题是：

1.  加载表单后如何使日历始终可见？
2.  如何使用它的 css 进行管理，以便我可以通过 css 文件设置背景和其他属性？如果不可能，则通过 JavaScript 参数。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T07:22:42.277

为了日历工作，我必须将以下 css 类设置为 html body 元素：

```
<body class="tundra"> 
```

它有帮助。

# c# - 在 C# 2008 中将数据从 DataGridView 保存到 Sql Server 2008 需要太多时间

> ID：16127687
> 
> 赞同：1
> 
> 时间：2013-04-21T03:35:41.530
> 
> 标签：c#, sql-server-2008, datagridview

我有一个 DataGridView，它有 303 行和 11 列。当我要将所有这些数据保存到我的 sql 表中时，需要 30-40 秒。这是否可以在 1-2 秒内保存这些数据。我的代码是这样的

```
public SqlConnection  conn;
SqlTransaction transaction;
string strconn = "data source=nabid;Persist Security Info=false;database=dbTest;user id=sa ;password=123;Connection Timeout = 10000";
conn = new SqlConnection(strconn);
conn.Open();
transaction = conn.BeginTransaction();
            try
            {
                if (DataGridView1.Rows.Count > 0)
                {
                    clsProd.DeleteRecord("[tbl1]", "");
                    foreach (DataGridViewRow r in DataGridView1.Rows)
                    {
                        if (r.Cells[0].Value != null)
                        {
                            Ticker = r.Cells[1].Value.ToString().Trim();

                            string values = "'" + tt.Trim() + "',";
                            values += "'" + r.Cells[1].Value.ToString().Trim() + "',"; // Ticker
                            values += (r.Cells[2].Value.ToString().Trim() == "" ? 0 : Convert.ToDouble(r.Cells[2].Value.ToString().Trim())) + ",";    // LTP                        
                            values += Convert.ToDouble("0") + ","; // Open
                            values += (r.Cells[3].Value.ToString().Trim() == "" ? 0 : Convert.ToDouble(r.Cells[3].Value.ToString().Trim())) + ","; // High
                            values += (r.Cells[4].Value.ToString().Trim() == "" ? 0 : Convert.ToDouble(r.Cells[4].Value.ToString().Trim())) + ","; // LOW
                            values += (r.Cells[5].Value.ToString().Trim() == "" ? 0 : Convert.ToDouble(r.Cells[5].Value.ToString().Trim())) + ","; // Close
                            values += (r.Cells[6].Value.ToString().Trim() == "" ? 0 : Convert.ToDouble(r.Cells[6].Value.ToString().Trim())) + ","; // YCP
                            if (r.Cells[7].Value.ToString().Trim() == "--" || r.Cells[7].Value.ToString().Trim() == "")
                                chg_Prc = "0";
                            else
                                chg_Prc = r.Cells[7].Value.ToString().Trim();
                            values += Convert.ToDouble(chg_Prc.Trim()) + ","; // Change
                            values += (r.Cells[8].Value.ToString().Trim() == "" ? 0 : Convert.ToDouble(r.Cells[8].Value.ToString().Trim())) + ","; // Trade No
                            values += (r.Cells[9].Value.ToString().Trim() == "" ? 0 : Convert.ToDouble(r.Cells[9].Value.ToString().Trim())) + ","; // Volume
                            values += Convert.ToDouble("0") + ",";
                            if (r.Cells[2].Value.ToString().Trim() == "0.0" || r.Cells[2].Value.ToString().Trim() == "0.00" || r.Cells[2].Value.ToString().Trim() == "0")
                                tradeStatus = "N";
                            else
                                tradeStatus = "Y";
                            values += "'" + tradeStatus.Trim() + "',0";

                            addRecord("[tbl1]", values);
                        }
                    }
                    closeConnection();

                this.Cursor = Cursors.Default;
            }
            catch (Exception exx)
            {
                this.Cursor = Cursors.Default;
        errorTransaction();
                return;
            }

protected void ExecuteSQL(string sSQL)
        {
            SqlCommand cmd = new SqlCommand(sSQL, conn, transaction);
            cmd.ExecuteNonQuery();            
        }
public void DeleteRecord(string tblName, string values)
        {
            string sSQL = "DELETE FROM " + tblName + " " + values;
            ExecuteSQL(sSQL);
        }
public void addRecord(string tblName, string values)
        {
            string sSQL = "INSERT INTO " + tblName + " VALUES(" + values + ")";
            ExecuteSQL(sSQL);
        }
public void closeConnection()
        {
            transaction.Commit();
            conn.Close();
        }
public void errorTransaction()
        {
            transaction.Rollback();
            conn.Close();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T03:44:51.027

与其调用函数并给程序带来开销，不如对多个插入、更新和删除进行单个 sql 查询。

例如。

```
 string sqlInsert="";

        foreach (DataGridViewRow r in DataGridView1.Rows)
         {
         if (r.Cells[0].Value != null)
                                {
                                    Ticker = r.Cells[1].Value.ToString().Trim();

                                    string values = "'" + tt.Trim() + "',";
                                    values += "'" + r.Cells[1].Value.ToString().Trim() + "',"; // Ticker
                                    values += (r.Cells[2].Value.ToString().Trim() == "" ? 0 : Convert.ToDouble(r.Cells[2].Value.ToString().Trim())) + ",";    // LTP                        
                                    values += Convert.ToDouble("0") + ","; // Open
                                    values += (r.Cells[3].Value.ToString().Trim() == "" ? 0 : Convert.ToDouble(r.Cells[3].Value.ToString().Trim())) + ","; // High
                                    values += (r.Cells[4].Value.ToString().Trim() == "" ? 0 : Convert.ToDouble(r.Cells[4].Value.ToString().Trim())) + ","; // LOW
                                    values += (r.Cells[5].Value.ToString().Trim() == "" ? 0 : Convert.ToDouble(r.Cells[5].Value.ToString().Trim())) + ","; // Close
                                    values += (r.Cells[6].Value.ToString().Trim() == "" ? 0 : Convert.ToDouble(r.Cells[6].Value.ToString().Trim())) + ","; // YCP
                                    if (r.Cells[7].Value.ToString().Trim() == "--" || r.Cells[7].Value.ToString().Trim() == "")
                                        chg_Prc = "0";
                                    else
                                        chg_Prc = r.Cells[7].Value.ToString().Trim();
                                    values += Convert.ToDouble(chg_Prc.Trim()) + ","; // Change
                                    values += (r.Cells[8].Value.ToString().Trim() == "" ? 0 : Convert.ToDouble(r.Cells[8].Value.ToString().Trim())) + ","; // Trade No
                                    values += (r.Cells[9].Value.ToString().Trim() == "" ? 0 : Convert.ToDouble(r.Cells[9].Value.ToString().Trim())) + ","; // Volume
                                    values += Convert.ToDouble("0") + ",";
                                    if (r.Cells[2].Value.ToString().Trim() == "0.0" || r.Cells[2].Value.ToString().Trim() == "0.00" || r.Cells[2].Value.ToString().Trim() == "0")
                                        tradeStatus = "N";
                                    else
                                        tradeStatus = "Y";
                                    values += "'" + tradeStatus.Trim() + "',0";

                                    sqlInsert=sqlInsert+"Insert into " + tblName + " VALUES(" + values + ")";
                                }
                            }
ExecuteSQL(sqlInsert); 
```

尝试编写这样的代码。

这将减少您在系统上的开销。

希望它有帮助。

# twitter - Facebook 登录在 Twitter iOS 应用程序中不起作用

> ID：16127689
> 
> 赞同：3
> 
> 时间：2013-04-21T03:35:53.027
> 
> 标签：twitter, facebook-oauth

我有一个使用 Facebook OAuth 进行身份验证的 RoR / JQuery Mobile 应用程序。通过桌面和移动设备上的任何普通浏览器访问它时，一切正常，但有一个例外。

如果用户单击 Twitter iOS 应用程序中的应用程序链接，则主页会在内部 Web 视图中加载。如果用户然后单击“使用 Facebook 登录”，则身份验证似乎成功，但当 Facebook 将用户重定向回应用程序时，页面永远不会加载。它只是显示一个空白页面，屏幕顶部的网络指示器一直在旋转。如果我关闭 Web 视图并再次单击链接，则页面加载正常，因为用户已经过身份验证。

iOS 上的 Twitter 应用程序中的 Facebook Auth 是否有其他问题？关于如何解决这个问题的任何建议？这可能只是 iOS 上 Twitter 应用程序的一个错误吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T01:40:33.530

我相信我找到了解决方案。facebook 身份验证过程使用了很多我认为可能导致问题的重定向（总共 5 个）。在查看了该过程后，我意识到我可以删除其中一个重定向，并在用户通过身份验证后直接将其带到我想要的页面。

*   www.example.com（来自推文的链接）
*   www.example.com/auth/facebook（使用点击“使用 Facebook 登录”）
*   1 - 重定向到：graph.facebook.com/oauth/authorize
*   2 - 重定向到：www.facebook.com/dialog/oauth
*   3 - 重定向到：www.example.com/auth/callback
*   4 - 重定向到：www.example.com/entry_path（***现在已被删除***）
*   5 - 重定向到：www.example.com/final_logged_in_path

登录过程现在可以在 Twitter iOS 应用程序中运行。

# scrapy - 如何通过scrapy获取'img' src属性？

> ID：16127692
> 
> 赞同：10
> 
> 时间：2013-04-21T03:36:22.010
> 
> 标签：scrapy

我想使用scrapy来获取img的链接，所以我在scrapy的爬虫中编写了下面的程序：

```
hxs.select('//dl[@class="clearfix"]//img/@src/text()').extract() 
```

但是，它无论如何都不起作用。有什么问题吗 ？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2018-10-07T18:20:29.573

如果您使用 CSS 选择器而不是 XPath，则语法为`::attr(src)`

```
response.css('.product-list img::attr(src)').extract() # extract_first() to get only one 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-21T03:37:43.860

`text()`是元素的文本。只需使用`@src`：

```
hxs.select('//dl[@class="clearfix"]//img/@src').extract() 
```

# listbox - 如何在 Windows Phone 的列表框中突出显示选定的行

> ID：16127702
> 
> 赞同：1
> 
> 时间：2013-04-21T03:37:29.410
> 
> 标签：listbox

我试图在列表框中突出显示选定的行，但我很难让它工作。我在网上查看过，我发现的解决方案要么涉及使用 style.resources 要么 style.trigger，我的程序说这两种方法都无法识别。

我的列表框的 xaml 代码如下：

```
<ListBox x:Name="selectClassCanvas_ListBox" Width="448" Height="488" 
         SelectionChanged="selectListSelectionChanged" Grid.RowSpan="2" 
         Canvas.Left="4" Canvas.Top="54" Background="White">
  <ListBox.ItemTemplate>
    <DataTemplate>
      <ListBoxItem Width="450" BorderBrush="Black" BorderThickness="0,0,0,1">
        <TextBlock Text="{Binding}" FontWeight="Bold" 
                   Foreground="Black" Height="50" 
                   FontSize="17"/>
      </ListBoxItem>
    </DataTemplate>
  </ListBox.ItemTemplate>
</ListBox> 
```

有人可以给我一些关于如何使列表框的选定行突出显示的说明吗？

# php - CakePHP：使用 saveMany() 一次编辑多行的表单助手

> ID：16127705
> 
> 赞同：1
> 
> 时间：2013-04-21T03:37:57.407
> 
> 标签：php, cakephp, cakephp-2.1

在我看来（/View/Tests/admin_edit.ctp），我想通过将表单指向 QsetsController 和“admin_order”操作来编辑多行（来自不同的模型），然后使用`saveMany($this->request->data)`更新所有更改。

**/查看/测试/admin_edit.ctp：**

```
echo $this->Form->create( 'Qset', array('action'=>'order', 'admin'=>1));
$n = 1;
foreach ($qsets as $qset) : ?>
        <h3>Question set <?php echo $n; $n++;?></h3>
        <?php echo $this->Form->input('Qset.'.$n.'.order'); ?>
        <?php echo $this->Form->input('Qset.'.$n.'.id', array('type'=>'hidden') ); ?>
        ...
        $n++;

    endforeach;

echo $this->Form->end('save'); 
```

**/控制器/QsetsController.php**

```
public function admin_order() {

    $data = $this->request->data; //maybe just $this->data ?

    $this->Qset->saveAll($data);
    $this->Session->setFlash( "Order saved.");
    $this->redirect( Controller::referer() );
} 
```

目前，我的数据没有得到保存（尽管没有错误）。此外，只有 foreach 循环回显的*第一个*输入带有正确的`order`字段值。随后的每一个都没有任何价值。

**更新：** 我更改`$n = 1`为`$n = 0`，现在第一个*和*第二个输入以正确的顺序值出现。

**update2：** 表单的标记如下所示：

```
<form action="/admin/qsets/order" id="QsetOrderForm" method="post" accept-charset="utf-8"> 
```

显示正确的输入字段的标记：

```
<div class="input number"><label for="Qset2Order">Order</label>
<input name="data[Qset][2][order]" type="number" value="3" id="Qset2Order">
</div> 
```

为空输入字段生成的标记：

```
<div class="input number"><label for="Qset3Order">Order</label>
<input name="data[Qset][3][order]" type="number" id="Qset3Order">
</div> 
```

**Update3：** 我解决了输入显示不正确的问题！`$n` *请注意，在回显输入之前*我正在递增，因此这是在循环结束时创建重复项。我移到`$n++`输入之后，现在它们显示正确。呸。现在我只需要让他们保存。

有用的参考资料：
[关于 saveMany()/saveAll() 的蛋糕书章节](http://book.cakephp.org/2.0/en/models/saving-your-data.html)
[类似问题](https://stackoverflow.com/questions/6797151/edit-multiple-rows-with-one-form-in-cake)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T06:46:15.780

您参考了手册，但可能还没有读得足够好:)

从部分引用`saveMany()`：

> 请注意，我们传递的是数字索引，而不是通常包含 Article 键的 $data。当保存同一模型的多条记录时，记录数组应该只是在没有模型键的情况下进行数字索引。

所以不要`$data`传递`$data['Qset']`给 saveAll()/saveMany()。

也不`Controller::referer()`是静态方法使用`$this->referer()`

# python - 如何在多层python字典中找到最小值，以及它的“路径”（即叶值的键列表）

> ID：16127706
> 
> 赞同：1
> 
> 时间：2013-04-21T03:37:58.520
> 
> 标签：python, sorting, dictionary

我有以下格式的python字典：

```
d = 
{
  'category' :
  {
    'genre': <int_value>
  }
} 
```

我想`<int_value>`在原始字典中找到最小的，以及它的“路径”。

例如，如果

```
d = 
{
  'free':
  {
    'adventure' : 23,
    'arcade' : 101,
  },
  'paid':
  {
    'arcade' : 130,
  }
} 
```

...结果应该是`("free", "adventure", 23)`。

任何人都可以为此想到一个单行字吗？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T03:46:22.020

```
print min((d[c][x], c, x) for c in d for x in d[c]) 
```

并重新安排：

```
print min( (d[c][x], x, c) for c in d for x in d[c] )[::-1] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T03:44:22.810

您可以编写一个递归生成所有可能路径的生成器：

```
from operator import itemgetter

d = {
  'free': {
    'adventure' : 23,
    'arcade' : 101,
  },
  'paid': {
    'arcade' : 130,
  }
}

def get_paths(d):
    for key, value in d.items():
        if isinstance(value, dict):
            for path in get_paths(value):
                yield (key,) + path
        else:
            yield (key, value)

print min(get_paths(d), key=itemgetter(-1)) 
```

尽管这可能有点矫枉过正，因为您的字典没有嵌套任意深度。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-21T03:46:56.580

这适用于给定的字典（但仅适用于具有相同嵌套级别的字典）：

```
>>> min(((k, k2, v) for k, dct in d.items() for k2, v in dct.items()), key=lambda i: i[-1])
('free', 'adventure', 23) 
```

或替代解决方案：

```
>>> min((v, k2, k) for k, dct in d.items() for k2, v in dct.items())[::-1]
('free', 'adventure', 23) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T03:43:51.717

最直接的方法通常是最好的方法：

```
def find_smallest(d):
    result = None, None, float('inf')
    for category in d:
        for genre, value in d[category].items():
            if value < result[2]:
                result = category, genre, value
    return result 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T03:49:17.617

使用递归函数很容易解决这个问题。它不是单行的，但仍然非常简单：

```
def min_int_value(nested_dict):
    min_path = None
    min_value = float("inf")

    for k, v in nested_dict.items(): # use iteritems() in Python 2
        path = [k]
        if isinstance(v, dict):
            p, v = min_int_value(v)
            path += p

        if v < min_value:
            min_path = path
            min_value = v

    return min_path, min_value 
```

# windows - 如何让 text-icu 在 Windows 上运行？

> ID：16127710
> 
> 赞同：40
> 
> 时间：2013-04-21T03:38:40.847
> 
> 标签：windows, haskell

我能够毫无错误地安装 cabal `text-icu`。（我用`--extra-lib-dirs`and`--extra-include-dirs`指向 icu4c 二进制发行版中的`lib`and`include`目录。）

`text-icu`通过执行以下操作，我还能够构建以下使用的简单程序`ghc --make icu.hs`：

```
-- icu.hs
import Data.Text.ICU
main = print $ Locale "tr-TR" 
```

这些步骤中的任何一个都没有错误或警告。但是当我尝试运行编译后的程序时`icu.exe`，我根本没有得到任何输出。我希望得到一条线`Locale "tr-TR"`，但我什么也没得到——甚至没有错误或警告。如果我尝试，情况仍然如此

```
main = do
  print $ Locale "tr-TR"
  print "Done" 
```

所以使用这些`text-icu`东西似乎会导致程序静默失败。 `echo $?`产量`False`。

有没有人`text-icu`在 Windows 上启动并运行？你能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-12-31T07:35:43.860

[Stack](https://github.com/commercialhaskell/stack)在 Windows 上包含一个 msys2 的副本，其中包含`pacman`包管理器，因此我们可以运行：

```
stack exec -- pacman -Sy mingw64/mingw-w64-x86_64-icu
stack build text-icu 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-30T22:24:31.363

我通过这样做来管理它：

*   [从http://site.icu-project.org/download/56#TOC-ICU4C-Download](http://site.icu-project.org/download/56#TOC-ICU4C-Download)下载二进制文件，特别是[http://download.icu-project.org/files/icu4c/56.1/icu4c-56_1-Win32 -msvc10.zip](http://download.icu-project.org/files/icu4c/56.1/icu4c-56_1-Win32-msvc10.zip)。
*   将 的内容提取`icu/bin`到`C:\bin`我的`%PATH%`. 将 的内容提取`icu`到目录中`C:\bin\icu`。
*   使用[堆栈](https://github.com/commercialhaskell/stack)运行`stack ghci text-icu --extra-lib-dirs=c:\bin --extra-include-dirs=c:\bin\icu\include`。
*   在 GHCi 中，运行`import Data.Text.ICU.Normalize`，然后`:set -XOverloadedStrings`，然后`normalize None "test"`。
*   对于每个报告为找不到的 dll，例如`icuuc.dll`，获取`C:\bin\icuuc56.dll`并在 处复制`C:\bin\icuuc.dll`。对我来说，有三个相关的 dll。

毕竟，我可以在`ghci`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-29T01:39:14.900

这就是 windows 对缺少的静态依赖项的反应。当操作系统启动一个进程时，它会查找静态依赖项。如果缺少一个，则程序不会启动。

使用depends.exe 找出缺少的导入。那可能是缺少 dll 或版本错误。

Depends 可用于 1\. Visual Studio 2\. Microsoft 平台 SDK 3\. 其他 microsoft 包 4\. [http://www.dependencywalker.com](http://www.dependencywalker.com)

在追踪这种情况下发生的事情时，它是必不可少的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-28T12:47:15.777

您应该检查 cygcheck 是否缺少某些 DLL。检查路径和 windows 环境变量是否正确。或者尝试按照haskell程序重新安装。

[http://www.haskell.org/haskellwiki/Windows#Tools_for_compilation](http://www.haskell.org/haskellwiki/Windows#Tools_for_compilation)

祝你好运

# java - Spring Web Flow 中的会话变量、int 和 Object 类型

> ID：16127712
> 
> 赞同：0
> 
> 时间：2013-04-21T03:39:02.510
> 
> 标签：java, session, spring-webflow

我将以一种操作状态将我的实体 ID 保存到会话中：

```
<on-exit>
<evaluate expression="persistantService.saveOrUpdate(flowScope.entity)"/>
<evaluate expression="externalContext.sessionMap.put('entityId', flowScope.entity.Id)"/>
</on-exit> 
```

实际上，entity.Id 字段 - 是 int。

在流程开始时，我试图从会话中获取 entityId，如果存在，则从存储中加载它，否则 - 创建新的。这里我想怎么做：

```
<decision-state id="test">
<if test="externalContext.sessionMap.contains('entityId')"
then="findExistingEntity"
else="creteNewEntity"/>
</decision-state>

<action-state id="findExistingEntity">
<evaluate expression="persistantService.findEntityById(externalContext.sessionMap.entityId)" 
result="flowScope.entity" />
</action-state> 
```

问题是persistantService.findEntityById 接受int，但不接受从会话中获取的Object 或Integer。我该如何解决？如何将 externalContext.sessionMap.entityId 转换为 int？或者可能还有另一种方法来测试该实体是否已保存并从持久存储中加载它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T13:44:17.343

我会使用对话范围

```
<on-exit>
    <evaluate expression="persistantService.saveOrUpdate(flowScope.entity)"/>
    <set name="conversationScope.entityId" value="flowScope.entity.Id"/>
</on-exit> 
```

...

```
<decision-state id="test">
    <if test="conversationScope.entityId != null"  
    <!-- i'm not sure if that works you might put the test in a method in a bean and call that--!>
        then="findExistingEntity"
        else="creteNewEntity"/>
</decision-state>

<action-state id="findExistingEntity">
    <evaluate expression="persistantService.findEntityById(conversationScope.entityId)" 
        result="flowScope.entity" />
</action-state> 
```

# php - PHP CodeIgniter - PayPerClick

> ID：16127713
> 
> 赞同：0
> 
> 时间：2013-04-21T03:39:06.393
> 
> 标签：php, codeigniter

我正在尝试设计一个显示客户餐厅菜单的目录网站。每个项目都链接到有关该项目的详细信息页面。我的目标是实现一个系统，帮助我收集用户感兴趣的项目的统计信息。我使用codeigniter进行开发。该系统应该能够解决以下问题：

*   每次运行搜索查询并显示相关菜单项（加上图片）时，它应该记录每个项目的显示次数（展示次数）。
*   每次用户单击图像以转到详细信息页面时，它应该记录每个项目的点击次数（点击次数）。
*   我将通过电子邮件向网站的订户列表发送有关促销和新交易（包括图片）的信息。系统应记录打开的电子邮件数量和看到的图像（印象数）。
*   如果用户单击电子邮件中的链接进入我网站的详细信息页面，系统应记录点击次数。

据我了解，应遵循的过程如下：

1.  制作一个接受图像/页面标识符和代码的控制器。
2.  控制器将在数据库中查找此 ID。
3.  如果找到，它会根据 href 中包含的代码增加其展示次数（如果是图像）或点击次数（如果是到页面的链接）。
4.  控制器返回与 ID 关联的实际图像数据或页面路径。

**示例路径：**

*   图片路径：[http ://www.mysite.com/assets/newdish.jpg](http://www.mysite.com/assets/newdish.jpg)
*   详细信息页面：[http ://www.mysite.com/details/newdish](http://www.mysite.com/details/newdish)

**示例电子邮件：**

```
hi, check this new dish out!
<a href="http://www.mysite.com/details/newdish/linkedbyemail">
    <img src="http://www.mysite.com/images/12345">
</a> 
```

`Details`控制器将加载由 指示的视图，`newdish`如果`linkedbyemail`设置了参数，它也会记录点击计数。`Images`控制器将在数据库中找到 ID ，`12345`记录展示次数，并返回图像数据。

我可能有的选择是：

*   在我的网站上使用谷歌分析（不知何故）来计算有多少横幅被投放和点击。我不知道这有多灵活，因为我需要收集每个图像/页面的统计信息。以及是通过电子邮件还是直接访问该页面。如果谷歌确实允许​​这样的收集，那是我能要求的最好的事情。
*   使用处理这些需求的代码点火器火花/库。我搜索了很多，但还没有找到。如果你能在这里帮助我，那就太好了。
*   推出我自己的统计机制。如果以上两个选项都不可能，那么我将不得不这样做。我想我在这里有基本的想法。如果我需要记住其他一些事情来实现这一点，请告诉我。

再一次，我需要能够记录谁（有多少用户）正在访问我的页面/图像以及从哪里访问（电子邮件/直接/或由外部网站链接）。

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:46:08.063

首先..我很抱歉没有更彻底地搜索论坛..我确实遇到了一些帮助我找到解决方案的文章（虽然没有一个是直接的）..无论如何，这是我的解决方案..

**资产表**

*   ID (int, primary, auto inc)
*   路径（字符串）
*   印象计数（整数）

**Assets_model 模型**

*   GetPathByID ($iID) -> 返回具有给定 ID 的图像的实际路径
*   AddImpression ($iID) -> 增加具有给定 ID 的行的展示次数

**SimAssets 库**

```
class SimAssets
{
    const C_ASSETS_CONTROLLER = 'assets/index';

    public function GetTrackingAsset ($iImageID)
    {
        $sLink = sprintf('%s/%s/%u', config_item('base_url'), self::C_ASSETS_CONTROLLER, $iImageID);
        return $sLink;
    }
} 
```

**资产控制器**

```
class Assets extends CI_Controller
{
    public function index ($sID)
    {
        $iID = intval($sID);
        $this->load->model ('assets_model');
        $sPath = $this->assets_model->GetPathByID($iID);
        if ($sPath !== NULL)
        {
            if (file_exists($sPath))
            {
                $this->assets_model->AddImpression ($sID);
                header (sprintf('Content-Length: %u',                           filesize($sPath)));
                header (sprintf('Content-Type: %s',                             'image/jpg'));
                header (sprintf('Content-Disposition: inline; filename=%s',     $sPath));
                echo readfile ($sPath);
            }
        }
    }
} 
```

**用法**

```
echo '<img src="' . $this->simassets->GetTrackingAsset(3) . '">';

// <img src="http://localhost/Testing/index.php/assets/index/3"> 
```

**正在完成什么**

1.  每个需要跟踪的页面/电子邮件都将包含一个指向定义为资产的图像的嵌入式链接。
    *   1, 1x1.jpg => 用于跟踪特定电子邮件促销的图像
    *   2, 1x1.jpg => 用于跟踪另一个特定电子邮件促销的图像
    *   3, 1x1.jpg => 在所有电子邮件中使用的图像来跟踪总共打开了多少封邮件
    *   4、DishA_thumb.jpg => 搜索页面上使用的图片，看看有多少搜索显示了这个项目
    *   5、DishA_large.jpg => 详情页上使用的图片，查看有多少人实际详细查看了此商品。
2.  当对`Assets`控制器进行调用时，它会找到具有给定 ID 的图像的路径，将其呈现为图像，并增加其展示次数。

**可以进一步做什么**

1.  可以从`Assets`表中删除 ImpressionCount 并创建一个新表`AssetTracking`，如下所示：
    *   资产 ID（整数）
    *   上次访问时间 (time_stamp)
    *   标记（字符串）
2.  可以将第二个参数添加到包含标签的资产链接（唯一标识访问者的信息，此链接是否出现在页面或电子邮件中等）
3.  AddImpression 将简单地使用给定的和在`AssetTracking`表中添加一个新行。`AssetID``Tag`

4.  可以将类似的方法添加到`SimAssets`返回页面 URL 而不是图像 URL 的库中。

5.  可以将另一种方法添加到`Assets`控制器，检查传递的页面 ID、记录命中并重定向到实际页面 URL。这使我能够：
    *   发送包含页面 ID 而非页面 URL 的链接的电子邮件
    *   当用户点击链接时，控制器会将他们重定向到适当的页面，同时记录给定页面 ID 的点击。

**两种方案的结合**

创建电子邮件：

```
<img src="http://localhost/Test/index.php/assets/image/1/User123" style="display:none">
// actually loads http://localhost/Test/1x1.jpg

Hi, we at XYZ have a new promotion offer for a 
<a href="http://localhost/Test/index.php/assets/pages/1/User123">New Pizza</a>.
Can we tempt you with it? =)
// actually redirects to http://localhost/Test/index.php/items/detail/newpizza 
```

当电子邮件呈现时，它会记录 User123 请求的 1x1.jpg（因此阅读电子邮件）。如果用户单击链接跳转到我的站点，资产控制器将记录 User123 通过电子邮件到达给定页面。可能性是无止境。=)

希望这对某人有帮助.. =)

# ios - UITableView 的 indexPathsForSelectedRows 是否按选择顺序排序？

> ID：16127715
> 
> 赞同：1
> 
> 时间：2013-04-21T03:39:11.787
> 
> 标签：ios, objective-c, uitableview

我想从表格顶部开始对选定的单元格执行操作，向下。

是否`UITableView` `indexPathsForSelectedRows`按照用户选择它们的顺序返回其行，或者如果它是无序集？我在官方文档中没有看到这一点，需要知道在执行顺序很重要的操作之前是否需要以某种方式对返回的数组进行排序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T04:02:39.710

由于没有记录返回排序数组，因此即使它恰好在当前实现中排序，也不应依赖它进行排序。该顺序可能会在未来的 iOS 版本中发生变化。

由于`NSIndexPath`implements `compare:`，对数组进行排序是微不足道的：

```
NSArray *sortedIndexPaths = [[tableView indexPathsforSelectedRows]
    sortedArrayUsingSelector:@selector(compare:)]; 
```

# xml - 如何在 XQuery 中获取节点值的总和？

> ID：16127717
> 
> 赞同：2
> 
> 时间：2013-04-21T03:39:32.177
> 
> 标签：xml, xquery, scrape

在下面的 xml 中，有两种与零件和订单相关的信息。XML:

```
<mo>
        <parts>
        <part pno="10506">          
            <pname>Land Before Time I</pname>
            <qoh>200</qoh>
            <price>319.99</price>
            <level>20</level>
        </part>
        <part pno="10000">          
            <pname>Bottle</pname>
            <qoh>2</qoh>
            <price>3.00</price>
            <level>2</level>
        </part>
        <part pno="10508">          
            <pname>Land Before Time 3</pname>
            <qoh>202</qoh>
            <price>2.00</price>
            <level>22</level>
        </part>
        <part pno="10509">          
            <pname>Cycle</pname>
            <qoh>202</qoh>
            <price>1.00</price>
            <level>22</level>
        </part>
    </parts>
    <orders>    
        <order ono="1000" >
            <receivedDate>1967-08-17</receivedDate>
            <shippedDate>1967-08-13</shippedDate>
            <items>
                <item>
                    <partNumber>10508</partNumber>
                    <quantity>2</quantity>
                </item>
            </items>
        </order>
        <order ono="1001" >
            <receivedDate>1968-08-14</receivedDate>
            <shippedDate>1968-08-11</shippedDate>
            <items>
                <item>
                    <partNumber>10000</partNumber>
                    <quantity>2</quantity>
                </item>

            </items>
        </order>

        <order ono="1022">
            <receivedDate>1995-02-14</receivedDate>
            <shippedDate>1995-02-13</shippedDate>
            <items>
                <item>
                    <partNumber>10000</partNumber>
                    <quantity>1</quantity>
                </item>
                <item>
                    <partNumber>10508</partNumber>
                    <quantity>2</quantity>
                </item>
                <item>
                    <partNumber>10509</partNumber>
                    <quantity>3</quantity>
                </item>
            </items>
        </order>

    </orders>
</mo> 
```

需求：我想通过 XQuery 获取订单 1022 中产品的总价。我在 xquery 下面写了以获取 1022 号订单的零件价格总和。

查询：

```
for
$o in /mo/orders/order,
$p in /mo/parts/part
where
data($o/@ono) = ("1022")
and
data($p/@pno) = $o/items/item/partNumber
return fn:sum($p/price) 
```

但是，此查询返回零件价格而不是总价格。结果是：3 2 1

有人知道如何获得价格总和吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T10:42:54.660

您正在总结各个值。围绕`fn:sum()`查询计算每个项目的单个价格。

```
fn:sum(
  for $item in /mo/orders/order[@ono='1022']/items/item
  return /mo/parts/part[@pno = $item/partNumber]/price * $item/quantity
) 
```

# java - Java Wiki Bot Framework 日志记录

> ID：16127726
> 
> 赞同：1
> 
> 时间：2013-04-21T03:40:28.400
> 
> 标签：java, debugging, mediawiki, slf4j

我正在使用[Java Wiki Bot Framework](http://jwbf.sourceforge.net/)在使用 java 的 mediawiki 网站中进行更改，并且效果很好。唯一的问题是 JWBF 在我的应用程序的控制台中产生了大量的调试信息，这使我的输出黯然失色，并且在视觉上很难找到。无论如何，我可以停止 JWBF 的日志记录吗？顺便说一句，JWBF 使用 SL4J 进行日志记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T20:01:52.723

这是一个与 slf4j 相关的话题。如果未定义记录器绑定，您会看到以下内容

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details. 
```

如果您添加一个绑定，例如[Logback](http://logback.qos.ch/manual/configuration.html)，您可以减少日志输出。您的 logback.xml 应该包含类似的行

```
 ...
 <logger name="net.sourceforge.jwbf" level="ERROR"/>
 ... 
```

有关更多详细信息，请参阅[Logback 配置](http://logback.qos.ch/manual/configuration.html)

# bash - 使用 bash 从 HTML 论坛列表中提取数据

> ID：16127729
> 
> 赞同：1
> 
> 时间：2013-04-21T03:41:36.890
> 
> 标签：bash

我正在寻找创建一个快速脚本，但我遇到了一些问题。

```
<li type="square"> Y </li> 
```

我基本上是使用 wget 下载 HTML 文件，然后尝试在文件中搜索上述代码段。Y 是动态的，并且每次都在变化，因此其中一个可能是“Dave”，另一个可能是“Chris”。所以我试图让bash脚本找到

```
<li type="square"> </li> 
```

并告诉我两者之间是什么。文件的一般格式非常混乱：

```
<html stuff tags><li type="square">Dave</li><more html stuff>
<br/><html stuff>   
<br/><br/><li type="square">Chris</li><more html stuff><br/> 
```

我一直无法想出任何适用于解析文件的方法，并且非常感谢有人能推动我朝着正确的方向前进。

编辑 -

```
<div class="post">
                    <hr class="hrcolor" width="100%" size="1" />
                    <div class="inner" id="msg_4287022"><ul class="bbc_list"><li type="square">-dave</li><li type="square">-chris</li><li type="square">-sarah</li><li type="square">-amber</li></ul><br /></div>
                </div> 
```

是我要从中提取名称的代码块。“-”符号被添加到列表中以最小化其范围，所以我只是得到那个列表。我遇到的问题是：

```
awk '{print $2}' FS='(<[^>]*>)+-' 4287022.html > output.txt 
```

只输出第一个列表项，而不是其余的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T08:15:00.380

您通常不应该使用正则表达式来解析 html 文件。

相反，您可以使用我的[Xidel](http://videlibri.sourceforge.net/xidel.html)对其执行模式匹配：

```
xidel 4287022.html -e '<li type="square">{.}</li>*' 
```

或者使用传统的 XPath：

```
xidel 4287022.html -e '//li[@type="square"]' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T03:49:08.133

你可以用`grep -Eo "<li type=\"square\">-?(\w+)</li>" ./*`这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T04:59:20.777

使用 sed：

```
sed -n 's/.*<li type="square"> *\([^<]*\).*/\1/p' input.html 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T03:50:12.620

```
awk '{print $2,$3,$4,$5}' FS='(<[^>]*>)+' 4287022.html 
```

这会将 HTML 页面呈现为表格。但是，不是将空格作为字段分隔符运行，而是 HTML 标记的运行是字段分隔符。在这种情况下，第一个字段是行首的空白区域。案例中的第二个字段是名称，所以我们打印它。

结果

```
-dave -chris -sarah -amber 
```

# java - Android中通知的回调函数

> ID：16127734
> 
> 赞同：2
> 
> 时间：2013-04-21T03:43:04.760
> 
> 标签：java, android, android-notifications

如何检测用户是否按下“全部清除”按钮或通过侧推清除通知或单击通知？处理通知时需要清除一些数据吗？我在这里找到了相关的帖子[链接](https://stackoverflow.com/questions/13976634/callback-on-clear-all-button-in-notification-area)。但它需要一个额外的类来设置。处理通知后是否有任何更简单的方法来清除数据。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:56:48.170

要检测 a 的清除，`Notification`您必须发送 a`BroadCast`并`deleteIntent`捕获它`broadcast`，您需要创建 a `BroadCastReceive`。所以你必须做你分享的链接中提到的基本事情。所以我没有看到比这更简单的方法。你可以做一件事，而不是为你创建一个不同的java文件，`BroadCastReceiver`你可以在你的服务中声明它，但它和以前一样。

# eclipse - 在 Eclipse 之外使用 maven

> ID：16127739
> 
> 赞同：4
> 
> 时间：2013-04-21T03:43:48.447
> 
> 标签：eclipse, maven, m2eclipse

我已经在 Eclipse 之外使用 maven，但想使用 Eclipse 作为我的主要编辑器。我不想使用已经嵌入 M2E 的 maven。我想使用位于 /usr/bin/mvn 的我的。

在 Window > Preferences 下，我尝试在 /usr/bin/mvn （单击 Ok 什么都不做；停留在同一窗口）和 /usr/bin （给出错误：`The selected directory is not a valid Maven directory.`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T10:09:37.550

问你的 Maven Maven Home 在哪里

```
$ mvn -V

Apache Maven 3.0.5 (r01de14724cdef164cd33c7c8c2fe155faf9602da; 2013-02-19 14:51:28+0100)
Maven home: /home/myuser/maven 
```

并在 Eclipse 中将 Maven Home 添加到 Maven 安装设置。

但更好的解决方案是使用来自[http://maven.apache.org/](http://maven.apache.org/)的 Maven 发行版。只需解压它并在 Eclipse 中进行配置。来自系统发行版的 Maven 非常适合从系统安装的应用程序，但不适合开发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T03:49:06.017

`/usr/bin/mvn`是放置二进制文件的位置，实际的 maven 安装目录可能在`/usr/share/maven`

# php - PHP jquery数据库即时搜索表单中没有自动完成

> ID：16127741
> 
> 赞同：0
> 
> 时间：2013-04-21T03:43:58.087
> 
> 标签：php, jquery, database

我正在编写一些 php、jquery 和数据库组合脚本来创建即时搜索，但遇到了即时搜索结果与浏览器的自动自动完成重叠的问题。有没有办法解决这个麻烦？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T03:50:50.040

在输入控件中使用`autocomplete="off"`，如果控件在表单中，则在表单控件中。例子：

```
<form autocomplete="off" ... > 
```

或者

```
<input autocomplete="off" ... /> 
```

# c# - C# 从 Javascript Iframe 获取 HTML 文档

> ID：16127743
> 
> 赞同：-1
> 
> 时间：2013-04-21T03:44:13.743
> 
> 标签：c#, html

我正在尝试使用 C# 代码访问此网页[http://www.pof.com 。](http://www.pof.com)在我以用户身份成功登录后，我发现 Document 元素存储在 iframe 中，但我不熟悉如何访问 document 元素。

我要做的就是获取加载了 iframe 的该页面的 HTML 格式，然后转到该站点的一些链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:54:51.223

使用以下代码：

```
document.getElementById('iframe1').contentWindow.document 
```

或者简单地说，

```
var elemVal;
if (iframeDocument) {
   elemVal= iframeDocument.getElementById('#iframe1');
} 
```

# c# - 如何防止在 ASP.NET 中无意清除列表框

> ID：16127745
> 
> 赞同：0
> 
> 时间：2013-04-21T03:44:46.150
> 
> 标签：c#, asp.net, html, web-applications, ado.net

只是制作了一个有点复杂的 ASP.NET 页面，并且遇到了列表和文本框的问题。每次我单击一个按钮并执行服务器端 C# 脚本时，它都会清除我之前自动填充的列表框。关于如何防止这种情况发生的任何想法？

谢谢，

比利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T03:48:19.557

您的页面每次都会被回复。

因此，它正在清理数据。

使用`Page.IsPostBack`属性检查回发并处理页面中不必要的回发。

请参阅以下链接：

[http://msdn.microsoft.com/en-IN/library/system.web.ui.page.ispostback.aspx](http://msdn.microsoft.com/en-IN/library/system.web.ui.page.ispostback.aspx)

另请参阅这篇有用的文章：

[http://dotnet.tekyt.info/?p=30](http://dotnet.tekyt.info/?p=30)

# networking - 是否可以使用 Mono 控制系统音量，并在 VB.Net 上获取网络信息、电池信息

> ID：16127746
> 
> 赞同：0
> 
> 时间：2013-04-21T03:44:49.173
> 
> 标签：networking, mono, volume, battery, batterylevel

我想知道是否有可能在 Ubuntu 上使用 Mono 控制/获取系统音量、获取网络信息（即是有线还是无线连接、网络名称等）并使用 VB.Net 获取电池信息12.10？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:18:54.383

您可以使用[System.Diagnostics.Process](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)类调用 shell 并调用命令/获取您需要的信息。[这里](http://www.digitalcoding.com/Code-Snippets/C-Sharp/C-Code-Snippet-Execute-Shell-Commands-from-Net.html)有一个例子。

# javascript - 在供应商中使用助手 - CakePHP

> ID：16127754
> 
> 赞同：0
> 
> 时间：2013-04-21T03:46:03.377
> 
> 标签：javascript, jquery, cakephp, helper

在我的 CakePHP 应用程序中，我定义了一个向导供应商，它输出多步向导类型插件的 HTML 及其相关的 Javascript 代码。我想使用 JsHelper 以便我可以将我的代码缓冲到页面底部。

其他一切都在工作，包括我的 Javascript 代码，如果我直接用 HTML 输出它的话。我只是不太清楚如何使用 JsHelper。我是否使用 App:Uses 或 App:Import 语句？在视图中使用它时，我可以在控制器级别定义它，但这在这里不起作用。

`$this->Js->buffer("`

```
$('.mws-wizard').wizard({
    buttonContainerClass: 'mws-button-row', 
    orientation: '$orientation',
    forwardOnly: $forwardOnly
}); 
```

`");`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:44:41.223

如果您自己开发此“供应商”软件包，则不应将其开发为“供应商”，而应将其开发为插件。

供应商文件夹旨在包含未使用 CakePHP 开发的第三方库（例如，在您的应用程序中使用 Zend 框架的一部分）。

从[手册](http://book.cakephp.org/2.0/en/core-utility-libraries/app.html#loading-classes)：

> 注意：加载供应商通常意味着您正在加载不遵循约定的包。对于大多数供应商包，建议使用 App::import()。

## 创建*插件*而不是*供应商*

要开发可用于不同项目/应用程序的可重用代码，请将您的代码开发为**插件**。插件基本上是“迷你 CakePHP 应用程序”。插件中的类可以在您的应用程序中使用，反之亦然；插件可以像在应用程序中使用 CakePHP 助手一样使用它们。

请参阅[创建您自己的插件](http://book.cakephp.org/2.0/en/plugins.html#creating-your-own-plugins)

## 关于 JsHelper

与 Sam Delaney 的评论相反，您对 JsHelper 的使用对我来说看起来不错。将一些脚本添加到 Js 缓冲区以将其输出到布局中似乎很有用。只是不要尝试将它用于*扩展的 JavaScript 块*；应该放在外部 .js 文件中。

我*建议您*自己编写 JavaScript*代码*，不要让 JsHelper为您*生成*代码（例如，不要使用`$this->Js->get('#foo')->event('click', $eventCode);`）。这可能是个人的，但是 IMO 这使得跟踪/调试您的 JavaScript 变得更加困难，并且不比仅仅更具可读性`$('#foo').click('event code');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T08:00:14.477

我个人从来没有发现 CakePHP 中的 JavaScript 帮助器有任何用处，就好像你不小心，你最终会得到`<script>`标记乱七八糟的标记，这有时会使调试变得非常困难。根据您的描述，您将 JavaScript 聚合并附加在 HTML 的底部，因此它没有我之前强调的情况那么糟糕。

是否不可能将所有 JavaScript 重新定位到 .js 文件以封装向导插件/供应商的所有功能？如果你能做到这一点，这将符合 MVC 原则，你可以在逻辑上分离视图标记和表示逻辑。

# android - 从 Android 流式传输音频/视频

> ID：16127758
> 
> 赞同：1
> 
> 时间：2013-04-21T03:46:46.587
> 
> 标签：android, rtp, wowza

我正在编写 Android 应用程序以在 RTSP 交错模式下将音频/视频流式传输到 Wowza 服务器。使用 AAC 和 H.264 编码器。我为音频和视频创建了打包器。我面临的问题是，当我同时发送两个流时，我正在丢失视频流。我只能在 Wowza 和 VLC 上获得音频。当我不流式传输音频视频时，效果很好。这证明我的分包器和 RTP 流代码按预期执行。看起来我无法以足够快的速度发送视频来维持流。

iOS 上类似的架构代码提供了稳定的视频和音频源。

谢谢

# django - Django-simple-friendsfriendship_accept

> ID：16127762
> 
> 赞同：0
> 
> 时间：2013-04-21T03:47:27.470
> 
> 标签：django, django-templates, django-urls

我正在与 Django-simple-friends 合作并取得进展，但我坚持“接受”一个请求。

我在 url 中发送什么关键字（如果有）来接受请求。我是否只发送“from_user”，如果是，那么 URL 中的内容是什么样的？

我目前拥有的网址是：

```
{% url friendship_accept username={{from_user}} %} 
```

`{{from_user}}`正在从视图中传递。

我得到的错误是

> 无法解析剩余部分：来自“{{from_user}}”的“{{from_user}}”

我非常感谢反馈和专业知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T04:13:41.773

将参数传递给模板标签（即`{% url .. %}`）时，您不需要将`{{`它们加倍。

看看[django 文档](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#url) 广告[源代码](https://github.com/django/django/blob/master/django/template/base.py#L531)第 531 行

随时挖掘框架可能会有所帮助。

# html - 使元素更小而不是让它下降到新行

> ID：16127763
> 
> 赞同：1
> 
> 时间：2013-04-21T03:47:38.530
> 
> 标签：html, css

在我正在开发的这个布局中，宽度为 1124 像素且宽度更小，标题的绿色部分下降到新的一行。

我怎样才能让它及其内容随着视口宽度的减小而减小，同时将标题中的所有内容保持在一行中？

现在粉红色元素和绿色元素之间的比例是粉红色占据了头部的 20%，绿色占据了剩下的 80% 的宽度。

绿色内部的输入也应该像它的父级绿色部分一样在宽度上调整得更小。

这是发生这种情况的链接：[https ://dl.dropboxusercontent.com/u/270523/help/new.html](https://dl.dropboxusercontent.com/u/270523/help/new.html)

根据要求，这里是一个 JSFiddle 复制问题：http: [//jsfiddle.net/d7k43/](http://jsfiddle.net/d7k43/)

和基本的CSS：

```
#logo{
    height:100%;
    width:20%;
    min-width:225px;
    background:pink;
}
#input{
    height:100%;
    width:80%;
    background:green;    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T04:09:02.303

The problem is `#logo { min-width: 225px }`. When 0.2X = 225px, X = 1125px total width.

Your green area will still take up 80% of the total width, but the pink area's width will not shrink smaller than 225px. So when the window is less than 1125px, the pink area will take up more than 20% of the total width, which causes the green area to be pushed to a new line.

Example: 500px width window: 225px + .8*(500px) = 625px > 500px.

# c++ - gcc 编译器未显示注入名称的类模板的正确错误

> ID：16127770
> 
> 赞同：3
> 
> 时间：2013-04-21T03:48:42.620
> 
> 标签：c++, templates, name-lookup

最近，我在读这本书：`C++ templates: the complete guide`David Vandevoorde 和 Nicolai M. Josuttis 写的。

特别是关于模板解析引用的书 pp 126。

> 类模板也有注入类名，但是，它们比普通注入类名更奇怪：它们后面可以跟模板参数（在这种情况下它们是注入类模板名称），但是如果它们后面没有模板参数，它们代表以参数为参数的类（或者，对于部分特化，它的特化参数）。

书中相关代码除外，如下：

```
template<template<typename> class TT> 
class X
{
};

template <typename T>
class C
{
  C* a; //OK, same as "C<T>* a"
  C<void> b; // OK
  X<C> c;  //Error, C without a template argument list does not denote a template
  X< ::C>d; 
};

int main()
{  
   return 0;
} 
```

上面的代码示例试图解释整个引用的段落。

我在 gcc 4.5.3 中编译了上面的代码，它输出：

```
error: field ‘b’ has incomplete type 
```

因此，我有以下问题：

1.  为什么编译器会生成完全不同的错误消息？书`b`上说没问题，但 gcc 给出了错误；同时，没有检测到书中列出的其他错误？为什么，这可能是书中的编译器错误或错误？
2.  是什么`injected class names`意思？我如何识别哪些名称是`injected class names`哪些不是？
3.  为什么`C*a`一样`C<T>* a`？我尝试用 替换`C*a`，`C<T>* a`没有报错，那么是?`C* a`的简写`C<T>* a`？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T05:43:48.170

注意：*注入的类名*只是用于声明类的标识符（与其他也引用同一类的名称相反，例如 typedef 名称）。

以下是 C++11 标准第 14.6.1p1 节的相关引用：

> 像普通（非模板）类一样，类模板有一个注入类名（第 9 条）。注入的类名可以用作*模板名*或*类型名*。**当它**与*template-argument-list*一起使用时，**作为*模板模板参数*的模板*参数***，或作为朋友类模板声明的*详细类型说明*符中的最终标识符，**它指的是类模板本身**. 否则，它等价于*template-name*后跟包含在 中的类模板的*模板参数*`<>`。

很明显，这在 C++11 中是合法的。

但是，这本书正确地描述了 C++03 的行为：

> 与普通（非模板）类一样，类模板有一个注入类名（第 9 条）。注入的类名可以与模板参数列表一起使用，也可以不与*模板参数列表*一起使用。 **当它在没有*模板参数列表的*情况下使用时，它等效于注入的类名，后跟包含在 中的类模板的*模板参数*`<>`。** 当它与*template-argument-list*一起使用时，它指的是指定的类模板特化，可以是当前特化或另一个特化。

除了反转逻辑，我们看到 C++03 包含一个标识符引用模板的情况（当提供模板参数时），C++11 增加了两个额外的情况，其中一个影响了这段代码。

所以在 C++03 中，代码相当于`X<C<T>> c;`，这是一个错误，因为`X`需要传递一个模板而不是一个类型。

底线：要学习语言，尤其是模板，您需要[一本关于 C++11 的书](http://tinyurl.com/so-cxxbooks)。旧书在架构和高级设计方面仍然有用，但无法解释出版后发生变化的语言复杂性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T04:21:10.040

试图回答你的问题：

1.  跨供应商和版本的不同编译器会生成不同的诊断信息。您不能依赖从一个到另一个的确切消息。

2.  “注入的类名”在第 9 节第 2 段的标准中定义：

> 类名被插入到在看到类名之后立即声明它的作用域中。类名也被插入到类本身的范围内；这被称为注入类名。出于访问检查的目的，注入的类名被视为公共成员名。类说明符通常称为类定义。一个类在看到其类说明符的右大括号后被认为已定义，即使它的成员函数通常尚未定义。可选的属性说明符序列属于类；此后，无论何时命名，attribute-specifier-seq 中的属性都被视为该类的属性。

1.  原因与上下文`C* a`相同`C<T>* a`：两者都发生在`C`. C++ 允许一个“捷径”，因为模板类可以引用它自己的实例化，而无需在可以假设参数的上下文中使用模板参数（这是其中之一）。如果您想引用`C`具有不同模板参数的实例化，则需要明确说明。

您收到特定错误的原因是`C<void>`您尝试`C`使用不同的模板参数实例化 a 时类型不完整。

查看代码，我发现真正奇怪的是，我认为它应该可以干净地编译，因为您实际上从未实例化任何一个模板，因此类型的完整性`C`应该无关紧要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T04:11:20.113

我想这本书忘记`*`了

```
C<void> *b; 
```

否则，即使没有模板，声明也是无效的。因为当编译器到达该行时，C 还没有完全声明。这与尝试使用前向声明类相同。

例如，这是无效的。

```
class A {
    A a;
    ^// A has incomplete type here
}; 
```

然而这是有效的。

```
class A {
    A *a;
}; 
```

* * *

注入的类名是当类的模板参数**在类自己的范围内**注入到其使用中时。

```
tempalte<typename T>
class C {
    C* a;  // same as C<T>* a;
}; 
```

我认为这本书完全解释了它。

* * *

> 那么是`C* a`的简写`C<T>* a`吗？

仅在班级自己的范围内。（包括成员定义范围）例如

```
template <typename T>
void C<T>::f() {
    C a;            // Same as C<T> a;
} 
```

* * *

> 为什么编译器会生成完全不同的错误消息？书上说 b 没问题，但 gcc 给出了错误；同时，没有检测到书中列出的其他错误？为什么，这可能是书中的编译器错误或错误？

除了上面解释的事情之外，原因可能是这本书相对较旧并且编译器从那时起发生了变化。您不能期望错误消息完全相同。

# javascript - 单击时按钮背景更改

> ID：16127771
> 
> 赞同：0
> 
> 时间：2013-04-21T03:48:57.987
> 
> 标签：javascript, html

我正在尝试为我的 HTML5 音频播放器创建自定义控件。

目前，我有我的播放/暂停按钮，但是，在单击按钮时，我想将当前播放背景更改为暂停符号。

JS 完美运行，只是不知道如何切换背景。

HTML5：

```
<div id="myButtons">
<button id="playpause" title="play" onclick="togglePlayPause()"></button>
<input id="volume" min="0" max="1" step="0.1" type="range" onchange="setVolume()" />
<button id="mute" onclick="toggleMute()">Mute</button>
</div> 
```

Javascript：

```
function togglePlayPause() {
   var playpause = document.getElementById("playpause");
   if (audio.paused || audio.ended) {
      playpause.title = "";
      playpause.innerHTML = "";
      audio.play();
   }
   else {
      playpause.title = "";
      playpause.innerHTML = "";
      audio.pause();
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:58:47.463

尝试这个

```
function togglePlayPause() {

       var playpause = document.getElementById("playpause");

       if (audio.paused || audio.ended) {
          playpause.style.backgroundImage="url(play.png)";
          playpause.title = "";
          playpause.innerHTML = "";
          audio.play();
       }
       else {
          playpause.style.backgroundImage="url(pause.png)";
          playpause.title = "";
          playpause.innerHTML = "";
          audio.pause();
       }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T04:00:00.523

如果您只添加一些类可能会更好：

```
.button-icon-play {
  background: url(...) /*other background styling stuff*/;
}

.button-icon-pause {
  background: url(...) /*other background styling stuff*/;
} 
```

默认情况下将其添加`button-icon-play`到您的元素中，然后在您的 JS 中，只需执行以下操作：

```
/*Switch to pause button*/
playpause.className = 'button-icon-pause';

/*Switch to play button*/
playpause.className = 'button-icon-play'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T03:50:27.673

您可以使用 jquery 设置 css 值

```
var playpause = $("#playpause");
var foo = false;

    playpause.click(function(){
        if(foo===false){
        playpause.css("background", pause-background-url);
         foo=true;
        }
        else{
          foo=false;
         playpause.css("background", play-background-url);
        }
    }}; 
```

# machine-learning - 对一群实体进行编程有哪些相关的 AI 技术？

> ID：16127772
> 
> 赞同：8
> 
> 时间：2013-04-21T03:49:05.370
> 
> 标签：machine-learning, artificial-intelligence

具体来说，我正在谈论本次比赛的编程：[http ://www.nodewar.com/about](http://www.nodewar.com/about)

比赛涉及您在二维世界中面对其他拥有大量宇宙飞船的团队。船只受到边界的限制（如果它们退出，它们就会死亡），并且它们必须不断地避开卫星（它们用它们的重力拉动船只）。目标是杀死对方的女王。

我试图编写一些相对基本的技术，但我觉得好像我缺少一些基本的东西。

例如，我实现了一些 boids 行为（[http://www.red3d.com/cwr/boids/](http://www.red3d.com/cwr/boids/)），但它们似乎缺乏……目标，可以这么说。

这类游戏是否有任何通用技术（或者，最好是技术组合）？

**编辑**

我只想用赏金再次打开它，因为我觉得我仍然缺少关键信息。以下是我的 NodeWar 代码：

```
boundary_field = (o, position) ->
  distance = (o.game.moon_field - o.lib.vec.len(o.lib.vec.diff(position, o.game.center)))
  return distance

moon_field = (o, position) ->
  return o.lib.vec.len(o.lib.vec.diff(position, o.moons[0].pos))

ai.step = (o) ->
  torque = 0;
  thrust = 0;
  label = null;

  fields = [boundary_field, moon_field]

  # Total the potential fields and determine a target.
  target = [0, 0]
  score = -1000000
  step = 1
  square = 1

  for x in [(-square + o.me.pos[0])..(square + o.me.pos[0])] by step
    for y in [(-square + o.me.pos[1])..(square + o.me.pos[1])] by step
      position = [x, y]
      continue if o.lib.vec.len(position) > o.game.moon_field
      value = (fields.map (f) -> f(o, position)).reduce (t, s) -> t + s
      target = position if value > score
      score = value if value > score

  label = target

  { torque, thrust } = o.lib.targeting.simpleTarget(o.me, target)  
  return { torque, thrust, label } 
```

然而，我可能错误地实现了势场，因为我能找到的所有示例都是关于离散运动的（而 NodeWar 是连续的而不是精确的）。

主要问题是我的 AI 在游戏区域内停留的时间不会超过 10 秒而不会飞出屏幕或坠入月球。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T13:17:19.380

您可以轻松地让 boids 算法玩 Nodewar 的游戏，只需向您的 boids 添加额外的转向行为和/或修改默认行为。例如，您将添加一个转向行为以避开月球，并添加一个针对敌舰的转向行为（排斥或吸引力，取决于您与敌舰之间的位置）。然后应该调整吸引力/排斥力的权重（可能通过遗传算法，相互发挥不同的配置）。

我相信这种方法会给你一个相对强大的基线玩家，你可以开始添加协作策略等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T08:31:57.193

您可以使用控制理论实现最佳的植绒行为。我们可以首先将船舶的状态（位置和速度的向量）表示为变量 X。我们将使用 x 来表示与某个状态 X0 的小偏差。对于每个节点，围绕您希望各个船舶所处的状态进行线性化：

d/dt(X) = f(X - X0)

其中 X0 是您希望船处于的状态。f() 可以是非线性的（就像您的势场一样）。接近这一点，意志服从

d/dt(x) = 轴

A 是一个固定矩阵，您应该对其进行调整以实现稳定性。控制理论领域的大部分内容都告诉您如何做到这一点。对你来说，A 导致一个稳定的系统并且它快速收敛是非常重要的。您现在应该拆分 MATLAB 或 GNU Octave。您还应该阅读控制理论中的极点和拉普拉斯变换的含义。系统的极点（矩阵 A 的特征值）将表征船舶对任何类型扰动的响应、其稳定性和收敛速度。它还会告诉你船是朝 X0 移动还是围绕 X0 摆动。

有几种选择 A 的方法（由于游戏有限的物理特性，您可能无法完全控制 A），而无需自己进行大量分析。两种这样的算法是最优控制（您定义控制系统的成本与偏离 X0 的成本）和极点放置（您选择极点的位置）。

状态空间理论也适用于整个船群，偏离了当时每艘船所需的配置。如果系统是非线性的，您可能无法保证所有配置都是稳定的。

结论：

使用控制理论保证个体稳定性，根据周围的船只计算 X0，并添加一个势场以防止船只相互碰撞和卫星。

免责声明：

有几种表示状态空间系统的方式。这是最简单的，但在考虑开环系统时，您需要以不同的方式表达它（将 A 拆分为另一个“A”，为您提供物理系统和其他一些矩阵，为您提供控制参数）

# sql - SQL查询仅获取存在一对多关系的记录的1个实例

> ID：16127776
> 
> 赞同：0
> 
> 时间：2013-04-21T03:49:22.027
> 
> 标签：sql, sql-server

当存在一对多关系时，我有一个 SQL 查询试图取回 1 条记录。

```
SELECT     dbo.BlogEntries.ID AS blog_entries_id, dbo.BlogEntries.BlogTitle, dbo.BlogEntries.BlogEntry, dbo.BlogEntries.BlogName, 
                      dbo.BlogEntries.DateCreated AS blog_entries_datecreated, dbo.BlogEntries.inActive AS blog_entries_in_active, 
                      dbo.BlogEntries.HtmlMetaDescription AS blog_entries_html_meta_description, dbo.BlogEntries.HtmlMetaKeywords AS blog_entries_html_meta_keywords, 
                      dbo.BlogEntries.image1, dbo.BlogEntries.image2, dbo.BlogEntries.image3, dbo.BlogEntries.formSelector, dbo.BlogEntries.image1Alignment, 
                      dbo.BlogEntries.image2Alignment, dbo.BlogEntries.image3Alignment, dbo.BlogEntries.blogEntryDisplayName, dbo.BlogEntries.published AS blog_entries_published, 
                      dbo.BlogEntries.entered_by, dbo.BlogEntries.dateApproved, dbo.BlogEntries.approved_by, dbo.blog_entry_tracking.id AS blog_entry_tracking_id, 
                      dbo.blog_entry_tracking.blog, dbo.blog_entry_tracking.blog_entry, dbo.BlogCategories.ID, dbo.BlogCategories.BlogCategoryName, 
                      dbo.BlogCategories.BlogCategoryComments, dbo.BlogCategories.DateCreated, dbo.BlogCategories.BlogCategoryTitle, dbo.BlogCategories.BlogCategoryTemplate, 
                      dbo.BlogCategories.inActive, dbo.BlogCategories.HtmlMetaDescription, dbo.BlogCategories.HtmlMetaKeywords, dbo.BlogCategories.entry_sort_order, 
                      dbo.BlogCategories.per_page, dbo.BlogCategories.shorten_page_content, dbo.BlogCategories.BlogCategoryDisplayName, dbo.BlogCategories.published, 
                      dbo.BlogCategories.blogParent
FROM         dbo.BlogEntries LEFT OUTER JOIN
                      dbo.blog_entry_tracking ON dbo.BlogEntries.ID = dbo.blog_entry_tracking.blog_entry LEFT OUTER JOIN
                      dbo.BlogCategories ON dbo.blog_entry_tracking.blog = dbo.BlogCategories.ID 
```

我有一些记录分配给 2 个不同的博客类别，当我查询所有内容时，它返回重复记录。

我如何只返回 1 个博客实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:14:25.187

试试这个——

```
SELECT  blog_entries_id = be.Id
    ,   be.BlogTitle
    ,   be.BlogEntry
    ,   be.BlogName
    ,   blog_entries_datecreated = be.DateCreated
    ,   blog_entries_in_active = be.inActive
    ,   blog_entries_html_meta_description = be.HtmlMetaDescription
    ,   blog_entries_html_meta_keywords = be.HtmlMetaKeywords
    ,   be.image1
    ,   be.image2
    ,   be.image3
    ,   be.formSelector
    ,   be.image1Alignment
    ,   be.image2Alignment
    ,   be.image3Alignment
    ,   be.blogEntryDisplayName
    ,   blog_entries_published = be.published
    ,   be.entered_by
    ,   be.dateApproved
    ,   be.approved_by
    ,   blog_entry_tracking_id = bet.Id
    ,   bet.blog
    ,   bet.blog_entry
    ,   bc2.Id
    ,   bc2.BlogCategoryName
    ,   bc2.BlogCategoryComments
    ,   bc2.DateCreated
    ,   bc2.BlogCategoryTitle
    ,   bc2.BlogCategoryTemplate
    ,   bc2.inActive
    ,   bc2.HtmlMetaDescription
    ,   bc2.HtmlMetaKeywords
    ,   bc2.entry_sort_order
    ,   bc2.per_page
    ,   bc2.shorten_page_content
    ,   bc2.BlogCategoryDisplayName
    ,   bc2.published
    ,   bc2.blogParent
FROM dbo.BlogEntries be
LEFT JOIN dbo.blog_entry_tracking bet ON be.Id = bet.blog_entry
OUTER APPLY (
    SELECT TOP 1 *
    FROM dbo.BlogCategories bc
    WHERE bet.blog = bc.Id
) bc2 
```

另外，我想提一下，在这种情况下，在列名中使用别名会减小查询的大小并使其更便于理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T09:46:45.340

这是一个罗斯文示例。

它将在每个订单的订单详细信息表中仅返回 1 行。

```
Use Northwind
GO

Select COUNT(*) from dbo.Orders
select COUNT(*) from dbo.[Order Details] 

select * from dbo.Orders ord
join
(select ROW_NUMBER() OVER(PARTITION BY OrderID ORDER BY UnitPrice DESC) AS "MyRowID" , * from dbo.[Order Details] innerOD) derived1
on ord.OrderID = derived1.OrderID
Where
derived1.MyRowID = 1
Order by ord.OrderID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T05:43:18.723

如果您只需要返回一条记录，则可以使用

SELECT TOP 1 dbo.BlogEntries.ID AS blog_entries_id, dbo.Bl....（与您现在相同）。

它比 SELECT DISTINCT 更有效

# matlab - 运行 Matlab 函数时出现 FSEEK 错误

> ID：16127779
> 
> 赞同：0
> 
> 时间：2013-04-21T03:50:31.570
> 
> 标签：matlab

在 Matlab 中运行函数时出现此错误

“使用 fseek 时出错 无效的文件标识符。使用 fopen 生成有效的文件标识符。”

我可以知道这个错误的可能原因是什么吗？我对 Matlab 很陌生。请帮我。非常感谢

如果我不应该发布整体功能，我很抱歉。但恐怕我提供的信息还不够。该函数的总体命令是：

```
function  gau_hmm_init_train(traininglist_filename,model_filename,MODEL_NO,STATE_NO, dim )
if nargin == 0
    traininglist_filename='training_list.mat' ;
    model_filename='models.mat';
    MODEL_NO=11;
    STATE_NO=4;
    dim=12;
end
MIN_SELF_TRANSITION_COUNT=0;
load(traininglist_filename,'list');
% allocate mean, var vectors, transition prob. for the of models
mean_vec_i_m=zeros(dim,STATE_NO,MODEL_NO);
var_vec_i_m=zeros(dim,STATE_NO,MODEL_NO);
A_i_m=zeros(STATE_NO,MODEL_NO);
vector_sums_i_m=zeros(dim,STATE_NO,MODEL_NO);
var_vec_sums_i_m=zeros(dim,STATE_NO,MODEL_NO);
fr_no_i_m=zeros(STATE_NO,MODEL_NO);
self_tr_fr_no_i_m=zeros(STATE_NO,MODEL_NO);
utterance_no=size(list,1);
total_fr_no=0;
for k=1:utterance_no
    filename=list{k,2};
    m=list{k,1}; % word ID
    fid=fopen(filename,'r');
    fseek(fid, 12, 'bof'); % skip the 12-byte HTK header
    %fopen(fid, 12, 'bof'); % skip the 12-byte HTK header
    c=fread(fid,'float','b');
    fclose(fid);
    fr_no=length(c)/dim;
    total_fr_no=total_fr_no+fr_no;
    c=reshape(c,dim,fr_no);

    for i=1:STATE_NO
        begin_fr=round(  fr_no*(i-1) /STATE_NO)+1;
        end_fr=round( fr_no*i /STATE_NO);
        seg_length=end_fr-begin_fr+1;
        vector_sums_i_m(:,i,m) = vector_sums_i_m(:,i,m) + sum(c(:,begin_fr:end_fr),2);
        var_vec_sums_i_m(:,i,m) = var_vec_sums_i_m(:,i,m) +  sum( c(:,begin_fr:end_fr).*c(:,begin_fr:end_fr) , 2);
        fr_no_i_m(i,m)=fr_no_i_m(i,m)+seg_length;
        self_tr_fr_no_i_m(i,m)= self_tr_fr_no_i_m(i,m) + seg_length-1;
    end %for s=1:STATE_NO
end % for k=1:utterance_no
for m=1:MODEL_NO
    for i=1:STATE_NO
        mean_vec_i_m(:,i,m) = vector_sums_i_m(:,i,m) / fr_no_i_m(i,m);
        var_vec_i_m(:,i,m) = var_vec_sums_i_m(:,i,m) / fr_no_i_m(i,m);
        A_i_m(i,m)=(self_tr_fr_no_i_m(i,m)+MIN_SELF_TRANSITION_COUNT)/(fr_no_i_m(i,m)+2*MIN_SELF_TRANSITION_COUNT);
    end
end
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                   tying of cov. matrices
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
overall_var_vec=sum(sum(var_vec_sums_i_m(:,:,:),3 ),2)/sum(sum(fr_no_i_m,2 ),1);
for m=1:MODEL_NO
    for i=1:STATE_NO
        var_vec_i_m(:,i,m)=overall_var_vec;
    end
end
%%%%%%%%%%%%%%%%            end of cov. matrices tying
save(model_filename, 'mean_vec_i_m', 'var_vec_i_m', 'A_i_m');
fprintf('init. train complete \n');*** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:10:27.923

听起来像行`fid=fopen(filename, 'r')`。该文件名来自从`list`文件加载的变量`traininglist_filename`，因此您应该检查这些文件是否存在。如果你要传递它，`traininglist_filename`你应该在 MATLAB 中加载这个文件并查看列表的内容；否则它将加载默认值`'training_list.mat'`，因此您应该在那里查看以确保所有文件名都有效。也许你错过了一个文件？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-06-03T07:11:35.840

要继续@Wakjah 的回复，`training_list.mat`您正在使用的代码的引用路径中缺少该文件，因为它是在 MATLAB 默认路径下自动创建的。因此，只需将“当前文件夹”的路径更改为您打开当前代码的位置，它应该可以工作。

# java - 如何在Java中从一个字符串复制到另一个字符串？

> ID：16127786
> 
> 赞同：2
> 
> 时间：2013-04-21T03:51:29.393
> 
> 标签：java, string, substring, charat

我有两个字符串 str1 和 str2。我正在尝试使用**charAt**将一些字母从一个字符串复制到另一个字符串。我知道我可以使用字符串复制，但我想要一些字符不是全部。

如何在Java中将子字符串从字符串复制**到**另一个字符串？

```
public class MyServerSide {

    public static void main(String[] args) {
        String str1 = "Hello World!;
        String str2;
        for (int 1=0; i < str1.length(); i++){
            if (i>=3){
                str2.charAt(i) = str1.charAt(i);//Here is the problem. It gives me an error
                                                //Saying that the left argument must be a 
                                                //variable

            }//End of if statement
        }//End of for loop
    }//End of main method
}//End of class 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T03:55:10.217

`String.substring(...)`如果您只想要一些字符，请使用。

编辑：

要将现有字符串与另一个字符串中的某些字符组合，您可以使用：

```
String anotherString = anotherString + originalString.substring(...); 
```

要使用来自另一个字符串的某些字符创建一个新字符串，您可以使用：

```
String aNewString = originalString.substring(...); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T03:55:39.490

字符串对象是不可变的，创建后无法修改。相反，您将不得不使用 StringBuilder 通过附加`charAt()`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T03:53:08.940

[`charAt(int)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#charAt%28int%29)方法返回指定索引处的字符，它没有设置它，使用[`StringBuilder`](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html)类并继续附加你想要忽略其他的字符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-29T19:48:15.473

您可以在两个 char 数组中转换这两个字符串并对其进行处理。在算法结束时，从第二个 char 数组重新创建 str2：

```
char[] ch1 = str1.toCharArray();
char[] ch2 = str2.toCharArray();

for (int i=0; i < ch1.length; i++)
    if (i>=3)
        ch2[i] = ch1[i];

str2 = new String(ch2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T03:56:48.407

`str2.charAt(i)` 函数返回一个值；它不允许在该位置设置字符 - 因此它说左侧部分应该是一个变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-21T11:35:11.150

```
import java.sql.*;
import java.io.*;
import javax.sql.*;
class Ems 
{
public static void main(String args[])
{
        int ch;
try
{
Class.forName("oracle.jdbc.driver.OracleDriver");
Connection con =DriverManager.getConnection("jdbc:oracle:thin:@finn:1521:orcl","hr","hr");
Statement stmt=con.createStatement();
ResultSet rs=stmt.executeQuery("select * from EmpDirc");
while(rs.next())
System.out.println(rs.getInt(1)+" "+rs.getString(2)+" "+rs.getString(3)+" "+rs.getString(4)+" "+rs.getString(5)
+" "+rs.getString(6)+" "+rs.getString(7));

            do
            {
                System.out.println("\n");
                System.out.println("              ENTER EMPLOYEE DETAILS:");
                System.out.println("1.Insert Record into the Table");
                System.out.println("2.Update The Existing Record.");
                System.out.println("3.CALCULATE PRIVILAGE LEAVE");
                System.out.println("4.Display all the Records from the Table");
                System.out.println("5.Exit");
                System.out.println("Enter your choice: ");

                System.out.println("4.Exit");
                System.out.println("Enter your choice: ");

                BufferedReader br=new BufferedReader(new InputStreamReader(System.in));
                ch=Integer.parseInt(br.readLine());

                  switch(ch)
                {
                    case 1:

                System.out.println("1.INSERT EMPLOYEE ID.");
                int num= Integer.parseInt(br.readLine());
                System.out.println("2.INSERT EMPLOYEE NAME");
                String ename=br.readLine();
                System.out.println("3.INSERT EMPLOYEE DESIGNATION");
                String desig=br.readLine();
                System.out.println("4.INSERT EMPLOYEE DATEOFBIRTH");
                String dob=br.readLine();
                System.out.println("5.INSERT EMPLOYEE PHONE NO OR ANY CONTACT");
                String mob= br.readLine();
                System.out.println("6.INSERT EMPLOYEE EMAIL ID");
                String email= br.readLine();
                System.out.println("7.INSERT EMPLOYEE SALARY");
                String sal=br.readLine();
                System.out.println("8.INSERT EMPLOYEE paid LEAVES");
                String pl=br.readLine();
                System.out.println("9.INSERT EMPLOYEE CASUAL LEAVES");
                String cl=br.readLine();
                System.out.println("10.INSERT EMPLOYEE FINAL SALARY");
                String fi= br.readLine();

                    String sql="insert into EmpDirc values(?,?,?,?,?,?,?,?,?,?)";
                    PreparedStatement p=con.prepareStatement(sql);
                    p.setInt(1,num);
                    p.setString(2,ename);
                    p.setString(3,desig);
                    p.setString(4,dob);
                    p.setString(5,mob);
                    p.setString(6,email);
                    p.setString(7,sal);
                    p.setString(8,pl);
                    p.setString(9,cl);
                    p.setString(10,fi);

                    p.executeUpdate();
                    System.out.println("Record Added");
                    //p.close();
                    //con.close();
                    break;

            case 2:
                    System.out.println("UPDATE EMPLOYEE id : ");
                    int emnum=Integer.parseInt(br.readLine());
            System.out.println("UPDATE EMPLOYEE DESIGNATION : ");
                    String emdesig=br.readLine();
                    System.out.println("UPDATE EMPLOYEE PHONE: ");
                    String emphn=br.readLine();
                    System.out.println("UPDATE EMPLOYEE EMAIL: ");
                    String emmail=br.readLine();
                    System.out.println("UPDATE EMPLOYEE SALARY: ");
                    String emsal=br.readLine();
                    System.out.println("UPDATE EMPLOYEE PL: ");
                    String empl=br.readLine();
                    System.out.println("UPDATE EMPLOYEE CL: ");
                    String emcl=br.readLine();
                    System.out.println("UPDATE EMPLOYEE FINAL SALARY: ");
                    String emfi=br.readLine();
                    sql="update EmpDirc set Desig=?, Phnum=? , Email=?, Salary=? , Pl=?, Cl=?, TakeHomeSal=? where Empid=?";
                    PreparedStatement  ps=con.prepareStatement(sql);

                    ps.setString(1,emdesig);
                    ps.setString(2,emphn);
                    ps.setString(3,emmail);
                    ps.setString(4,emsal);
                    ps.setString(5,empl);
                    ps.setString(6,emcl);
                    ps.setString(7,emfi);
            ps.setInt(8,emnum);
                    ps.executeUpdate();
                    System.out.println("Record Updated");
                    //p.close();
                    //con.close();
                    break;

                    case 3:
                    System.exit(0);

                    default:
                    System.out.println("Invalid Choice");
                    break;
}
}while(ch!=2);

con.close();
}
catch(Exception e)
{
System.out.println(e);
}
}
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-25T09:12:25.077

请参阅下面的代码，它将 *首先初始化* `str2`

```
public static void main(String[] args) {
    String str1 = "Hello World!;
            String str2="";//Here initialize first
            for (int 1=0; i < str1.length(); i++){
                if (i>=3){
                   str2 = str2+str1.charAt(i);//Concatenate existing string with new String
                }//End of if statement
            }
 } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-18T06:33:50.167

您可以使用 new 运算符简单地创建一个新实例。

```
String str1 = "abc";
String str2 = new String(str1); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-01-15T11:23:26.573

由于字符串是不可变的，如果您尝试仅使用上述赋值运算符进行复制，您最终会出错。相反，您可以将每个字符附加到现有字符，如下面的代码：

```
class Cpystring{
    public static void main(String args[])
   {
       String str1="Hello World";
       String str2="";
      for(int i=0;i<str1.length();i++)
      {
          str2+=str1.charAt(i);
       }
       System.out.println(str2);
    } 
```

}

# c - C 中的左位移位，无扩展名

> ID：16127787
> 
> 赞同：0
> 
> 时间：2013-04-21T03:51:35.897
> 
> 标签：c

我想知道当我向左移位时如何让 C 不扩展我的二进制数

```
int main ()
{
    unsigned int binary_temp = 0b0100;
    binary_temp = binary_temp << 2;
    printf("%d", binary_temp);
    return 0;
} 
```

当我运行它时，我想要一个返回值 0，因为它已经超过了我拥有的 4 位数字，但现在它返回 16（10000）。我如何让 C 不延长我的号码？

编辑：我希望能够使用二进制形式的数字，所以我只需要 4 位数字，而不仅仅是输出正确的数字。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T03:54:50.853

它不会扩展您的号码，而是将其保存为大小为 4 字节（32 位）的 unsigned int 类型。您只填充最后 4 位。要将其视为仅 4 位，请使用按位与掩码值。这是示例代码：

```
int main()
{
    unsigned int binary_temp = 0b0100;
    binary_temp = (binary_temp << 2) & 0b1111;
    printf("%u", binary_temp);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T03:53:23.070

您可以`AND`使用 4 位掩码值按位计算结果：

```
binary_temp = (binary_temp << 2) & 0xF; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T04:30:18.127

标准 C中没有`0b`。您可以使用`4`.

```
unsigned int /* prepare for wtf identifier: */
             binary_temp = 4; 
```

左移 2 乘以 4。为什么不呢？

```
binary_temp *= 4; 
```

...然后减少模16？

```
binary_temp %= 16; 
```

在这种情况下，使用二元运算符有什么意义？我没有看到。

该`%d`指令对应于一个`int`参数，但您给出的参数`printf`是一个`unsigned int`. 那是未定义的行为。

```
printf("%u", binary_temp); 
```

我敢肯定，无论您正在阅读哪本书，都会告诉您有关该`%u`指令的信息。

# c++ - make: *** [src/Class.o] 错误 1 日食

> ID：16127792
> 
> 赞同：1
> 
> 时间：2013-04-21T03:52:51.283
> 
> 标签：c++, eclipse, eclipse-cdt

好的，所以我在我的机器上安装了用于 C++ 开发的 CDT。我试图让它工作并按照这些[说明](http://www3.ntu.edu.sg/home/ehchua/programming/howto/EclipseCpp_HowTo.html)进行设置。我错误地进入`Project>Properties>C++ Build>Enviorement`并错误地点击了恢复默认值。我不知道这是否改变了任何东西，但是当我上课时出现以下错误。

我试图将给定路径“C:\Users\Nathan\workspace\Project\Debug”中的斜杠切换为正斜杠，但什么也没做。我仍然得到同样的错误。关于我做错了什么的任何提示？

```
19:12:58 **** Incremental Build of configuration Debug for project Project ****
make all 
Building file: ../src/Project.cpp
Invoking: Cross G++ Compiler
g++ -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"src/Project.d" -MT"src/Project.d" -o "src/Project.o" "../src/Project.cpp"
cygwin warning:
  MS-DOS style path detected: C:\Users\Nathan\workspace\Project\Debug
  Preferred POSIX equivalent is: /cygdrive/c/Users/Nathan/workspace/Project/Debug
  CYGWIN environment variable option "nodosfilewarning" turns off this warning.
  Consult the user's guide for more details about POSIX paths:
    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
In file included from /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/cwchar:44:0,
                 from /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/postypes.h:42,
                 from /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/iosfwd:42,
                 from /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/ios:39,
                 from /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/ostream:40,
                 from /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/iostream:40,
                 from ../src/Project.cpp:9:
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/cstddef:44:20: fatal error: stddef.h: No such file or directory
src/subdir.mk:18: recipe for target `src/Project.o' failed
compilation terminated.
make: *** [src/Project.o] Error 1

19:12:59 Build Finished (took 535ms) 
```

# java - 如何从服务器读取输入行？（Java 客户端控制台应用程序）

> ID：16127793
> 
> 赞同：2
> 
> 时间：2013-04-21T03:53:00.107
> 
> 标签：java, sockets, client, inputstream

我已经连接到一个已经存在的服务器，其中包含我需要读取的字符串行。鉴于我只需要读取 String 类型，哪个输入读取器可以在这里工作，所以我可以在我的 While 循环中逐行读取？这是我的简单客户端：

```
public class Client
{
public static final int PORT_NUMBER = 8888;

public static void main(String[] args)
{
 int port = PORT_NUMBER;
 String content;
 OutputStream output;
 InputStream input;
 Socket s = null;

try
{
 s = new Socket("server.example.exp", port);
 output = s.getOutputStream();
 input = s.getInputStream();

 System.out.println("Connected to " + s.getInetAddress() + " on port " + s.getPort());
}
catch (IOException e) {System.err.println(e);}

while (true)
{
 try
 {
  //read next line from server
 }
 catch (EOFException eof){
  System.out.println("eof encountered" + eof.getMessage());
  break;
 }
 catch (OptionalDataException ode){System.out.println("OptionalDataException" + ode.getMessage());}
 catch (IOException ioe){System.out.println("IOException on read object");}
 catch (ClassNotFoundException cnf){System.out.println("ClassNotFoundException");}
}

  }
} 
```

我知道这是一个非常基本的问题，我只是难以开始，仅此而已。我感谢任何澄清。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T04:08:57.293

要从 InputStream 中读取，您可以将其包装在[InputStreamReader](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/InputStreamReader.html)中，然后是[BufferedReader](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/BufferedReader.html)中，您可以从中读取Line：

```
BufferedReader input;
input = new BufferedReader(new InputStreamReader(s.getInputStream()));

Then:
while(true){
    try{
        input.readLine();//Read from server
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T03:57:11.013

在您的 while 之前添加以下行

```
 BufferedReader inp2 = new BufferedReader(new InputStreamReader(inp));
 while (true) {
    try {  
       inp2.readLine();
    }
 } 
```

# c++ - 附加 QLinkedList（C++ 与 Qt）时内存访问冲突

> ID：16127795
> 
> 赞同：0
> 
> 时间：2013-04-21T03:53:18.243
> 
> 标签：c++, qt, memory, crash

所以我写了一个 MainWindow 来启动一些东西，其中一个是处理另一个线程中的连接的服务器。它基本上是基于 TCP 的点对点即时消息客户端。我还没有真正能够测试它是否正常工作，因为在将文本附加到数据项的 QLinkedList 时出现内存访问冲突。底层线程可以访问此列表，并在计时器上扫描列表以查找仍需要通过该套接字发送的数据。在主窗口中，当用户单击按钮时，框中的文本应附加到要由套接字发送的数据列表中。但是，每次我尝试附加某些内容时，都会出现内存访问冲突错误。我一直在尝试使用 Visual Studio 调试它几个小时，现在我正在寻找新的眼睛。

这是我的 MainWindow 类实现：

```
MainWindow::MainWindow(QWidget *parent)
   : QMainWindow(parent),
   , ui(new Ui::MainWindow)
{
    timer = new QTimer;
    sysFrame = new int;
    data = new QLinkedList<Data>;
    timer->start(500);
    connect(timer,SIGNAL(timeout(QPrivateSignal)),this,SLOT(handleTime()));
    *sysFrame =0;
    addr = new QString;
    msgs = new QString;
    lock = new QMutex;
    name = new QString;
    startDialog start(name,addr);
    start.setModal(true);
    start.exec();
    Server serv(sysFrame,data,lock,*addr,msgs);
    serv.StartServer();
    ui->setupUi(this);
}

MainWindow::~MainWindow()
{
    delete sysFrame;
    delete timer;
    delete addr;
    delete data;
    delete msgs;
    delete lock;
    delete ui;
}

void MainWindow::on_pushButton_clicked()
{
    Data tempData;
    QString tempString;
    tempString.clear();
    tempString.append("<").append(name).append(">: ");
    tempString.append(ui->lineEdit->text());
    ui->lineEdit->clear();
    lock->lock();
    tempData.frame=*sysFrame;
    tempData.text=tempString;
    data->append(tempData); //Memory access violation here.
    msgs->append(tempString);
    msgs->append("\n");
    lock->unlock();
}

void MainWindow::handleTime()
{
    ui->textBrowser->clear();
    ui->textBrowser->setText(*msgs);
    ui->textBrowser->repaint();
} 
```

内存问题已被注释，并且在“on_pushButton_clicked”方法中。

我真的很想弄清楚这个错误，以便我可以继续调试我的代码。

谢谢。

数据类：

```
#include <QObject>

class Data : public QObject
{
Q_OBJECT

public:
Data(QObject *parent=0);
~Data();
QString text;
int frame;

private:

}; 
```

# perl - 在另一个 perl 脚本中打印一个 perl 脚本？

> ID：16127796
> 
> 赞同：1
> 
> 时间：2013-04-21T03:53:22.143
> 
> 标签：perl, printing, nested

嗨，我是 stackoverflow 的新手。我已经尝试寻找一种在不同的 perl 脚本中打印另一个 perl 脚本的方法，我遇到的唯一建议是使用反斜杠转义变量……但我尝试了这个，但它不起作用。

我的目标是编写一个 perl 脚本来制作一堆新的 perl 脚本，但因为它不允许我在打印“”中使用变量/数组/等。有没有解决的办法？提前致谢！

这是我的初步脚本：

```
 #!/usr/bin/perl
    use warnings;
    use strict;

    my $idfile = $ARGV[0];
    open (IDFILE,'<',$idfile)
    or die "Could not open $idfile \n";

    my $outfile_name;
    my $outfile = $outfile_name."pl";
    open (OUTFILE, '>', $outfile)
    or die "Could not open $outfile \n";

    while (my $line = <IDFILE>) {
        chomp ($line);
        if ($line =~ /(T4-GC_[0-9]+)/) {
            my $outfile_name = "Pull_".$line;
            my $script = "
    #!/usr/bin/perl
    use warnings;
    use strict;
    use Bio::SearchIO;
    use Bio::SeqIO;

    my @ARGV = glob("*.fa");

    foreach my $fil (@ARGV) {
        my $seqio  = Bio::SeqIO->new(-format => 'fasta', -file  => $fil);
            while (my $seqobj = $seqio->next_seq) {
            my $seqid = $seqobj->display_id;
            $fil =~ /([A-Z]+[0-9]+)/;
            my $phage_name = $1;
            my $id = $seqid."|".$phage_name;
            my $nuc = $seqobj->seq();
            if ($seqid =~ /**$line**/) {
                    print ">$id\n$nuc\n";
            }
    }
    }"
        print OUTFILE $script;
        }
    } 
```

这是我回来的错误：

```
 String found where operator expected at make_perl_pull_genes_files.pl line 33, near                 "my $id = $seqid.""
      (Might be a runaway multi-line "" string starting on line 25)
        (Missing semicolon on previous line?)
    Backslash found where operator expected at make_perl_pull_genes_files.pl line 36, near "$id\"
      (Might be a runaway multi-line "" string starting on line 33)
        (Missing operator before \?)
    Backslash found where operator expected at make_perl_pull_genes_files.pl line 36, near "$nuc\"
        (Missing operator before \?)
    String found where operator expected at make_perl_pull_genes_files.pl line 39, near "}""
      (Might be a runaway multi-line "" string starting on line 36)
        (Missing semicolon on previous line?)
    syntax error at make_perl_pull_genes_files.pl line 25, near "*."
      (Might be a runaway multi-line "" string starting on line 18)
    Global symbol "$id" requires explicit package name at make_perl_pull_genes_files.pl line 36.
    Global symbol "$nuc" requires explicit package name at make_perl_pull_genes_files.pl line 36.
    Execution of make_perl_pull_genes_files.pl aborted due to compilation errors. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T04:12:29.433

使用带单引号的 HERE 文档围绕前导分隔符。

```
print <<'EOT';
#!/usr/bin/perl
use warnings;
use strict;
use Bio::SearchIO;
use Bio::SeqIO;

my @ARGV = glob("*.fa");

foreach my $fil (@ARGV) {
  my $seqio  = Bio::SeqIO->new(-format => 'fasta', -file  => $fil);
  while (my $seqobj = $seqio->next_seq) {
    my $seqid = $seqobj->display_id;
    $fil =~ /([A-Z]+[0-9]+)/;
    my $phage_name = $1;
    my $id = $seqid."|".$phage_name;
    my $nuc = $seqobj->seq();
    if ($seqid =~ /**$line**/) {
      print ">$id\n$nuc\n";
    }
  }
}
EOT 
```

请注意，尾随分隔符必须由换行符拥抱：\nTRAILING\n 在您的源代码中。例如，不要尝试缩进它。您可以在源文件中填充这样的文本的另一个位置超出了`__DATA__`一行。然后，您将通过`<DATA>`.

# matlab - 如何在 MATLAB 中安装“未找到”函数？

> ID：16127801
> 
> 赞同：1
> 
> 时间：2013-04-21T03:54:02.593
> 
> 标签：matlab, function

我在 Windows 7 64 位上使用 Matlab R2010a。

当我使用`imfindcircles`时，我得到了错误。

```
>> [centers, radii] = imfindcircles(image,[100 400],'ObjectPolarity','dark')
??? Undefined function or method 'imfindcircles' for input arguments of type
'uint8'. 
```

我引用[了一个有用的问题](https://stackoverflow.com/questions/197441/matlab-error-undefined-function-or-method-x-for-input-arguments-of-type-double)，发现我找不到`imfindcircles`函数。

```
>> which imfindcircles
'imfindcircles' not found.
>> help imfindcircles

imfindcircles not found.

Use the Help browser Search tab to search the documentation, or
type "help help" for help command options, such as help for methods. 
```

我在我的电脑上找不到 imfindcircles.m。

**编辑**：

我检查了[MATLAB Image Processing Toolbox](http://www.mathworks.com/help/images/functionlist.html)中的函数，发现`imread`.

```
>> which imread
C:\Program Files\MATLAB\R2010a\toolbox\matlab\imagesci\imread.m 
```

我在 C:\Program Files\MATLAB\R2010a\toolbox\matlab\imagesci 和 C:\Program Files\MATLAB\R2010a\toolbox\images 中找到了一些函数，但我没有 imfindcircles.m。我应该在某处下载 imfindcircles.m 并将其放入目录中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T06:10:17.213

你需要有工具箱版本。8.0 或更高版本以查找 imfindcircles。使用“ver”查找图像处理工具箱的安装版本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T04:08:28.820

[`imfindcircles`](http://www.mathworks.com/help/images/ref/imfindcircles.html) is part of the [Image Processing toolbox](http://www.mathworks.com/products/image/). You need to have this toolbox and to have a valid license for it.

Did you check if you have any of the other functions in this toolbox?

# python - 从 str 转换为 float 时保持尾随 0

> ID：16127804
> 
> 赞同：3
> 
> 时间：2013-04-21T03:54:43.930
> 
> 标签：python, string, floating-point

将带有尾随零的数字从字符串转换为浮点数时出现以下问题：

```
a = 1.100
string_a = str(a)
float_a = float(string_a)
float_a = 1.1 
```

有没有办法将 str 转换为 float，同时在末尾保留尾随 0？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T03:56:16.470

首先没有保留零：

```
>>> 1.100
1.1
>>> 1.100 == 1.1
True 
```

但是您可以在打印出来时使用字符串格式来保留它们：

```
>>> 'It works: {:0.3f}'.format(1.1)
'It works: 1.100'
>>> 'And even with integers: {:0.3f}'.format(10000)
'And even with integers: 10000.000' 
```

# c# - 用于返回下一个 ID 的 Linq 语句

> ID：16127807
> 
> 赞同：1
> 
> 时间：2013-04-21T03:55:00.270
> 
> 标签：c#, linq, list

我有`Books`PK 的列表，其中`Id`一些`Books`可能已删除。例如带有这个`Id`s 的列表：

1 2 5 6 8

现在我需要一个 linq 语句来返回下一个插入 ID（例如“3”）

我试过这段代码，但它总是`return`“1”：

```
 public int GetNextRecordId()
    {
        List<Book> books = getAll();
        int counted = books.Count();
        foreach (Book b in books)
        {
            if (books.Where(book => book.Id == (b.Id + 1)) == null)
                return b.Id + 1;
        }
        return 1;
    } 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T04:01:10.603

One thing I notice right away is that this will never be true:

```
books.Where(book => book.Id == (b.Id + 1)) == null 
```

The Where call returns an empty enumerable if it finds no matches. Start from there.

Try this instead:

```
!books.Where(book => book.Id == (b.Id + 1)).Any() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T04:40:59.683

如果您有大量书籍，您可能无法像那样将它们全部保存在内存中。而且您当然不想对它们进行循环，其中的`Where`子句再次迭代它们。你最好依次阅读它们以寻找这样的差距：-

```
public int GetNextRecordId()
{
    // Cannot load all books into memory ...
    IEnumerable<Book> books = dataContext.Books.OrderBy(b => b.Id);

    int index = 0;
    foreach (var book in books)
    {
      index++;
      if (index < book.Id) return index;
    }
    return index;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T04:16:00.137

我建议这个 linq 查询，如果这个查询在 linq to entites 上运行，查询成本非常低：

```
var id = books.Select(p => p.Id  + 1).Except(books.Select(p=>p.Id)).First(); 
```

# c# - DateTime.TryParseExact 与 "U" 和 DateTimeStyles.AdjustToUniversal

> ID：16127814
> 
> 赞同：1
> 
> 时间：2013-04-21T03:56:26.967
> 
> 标签：c#, .net, parsing, datetime, date-formatting

应该如何格式化日期/时间字符串，以便可以[`DateTime.TryParseExact`](http://msdn.microsoft.com/en-us/library/ms131044.aspx)使用“U”格式字符串和`DateTimeStyles.AdjustToUniversal`？换句话说，在下面的代码`timestampString`中`isDateTime`设置为什么是有效的？`true`

```
string timestampString = "...";

DateTime timestamp;
bool isDateTime = DateTime.TryParseExact(
    timestampString, "U", null, DateTimeStyles.AdjustToUniversal, out timestamp); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T04:11:06.517

以下是 en-US 文化的示例：

```
string timestampString = "Saturday, April 20, 2013 9:00:00 PM";

DateTime timestamp;
bool isDateTime = DateTime.TryParseExact(timestampString, "U", null,
    DateTimeStyles.AdjustToUniversal, out timestamp);

Console.WriteLine(isDateTime);     // True
Console.WriteLine(timestamp);      // 4/20/2013 9:00:00 PM
Console.WriteLine(timestamp.Kind); // Utc 
```

如 MSDN 库中的[标准日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx#UniversalFull)主题下所述，“U”表示由[DateTimeFormatInfo.FullDateTimePattern](http://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo.fulldatetimepattern.aspx)属性定义的格式，并自动转换为 UTC。对于 en-US，此格式为`"dddd, MMMM d, yyyy h:mm:ss tt"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T04:08:22.723

From [this MSDN post:](http://msdn.microsoft.com/en-us/library/bb504692.aspx)

> **AdjustToUniversal** Parses the string represented by input and, if necessary, converts it to UTC. It is equivalent to parsing a string and then calling the DateTimeOffset.ToUniversalTime method of the returned DateTimeOffset object.

So, try first to parse your date.

I am not sure the format "U" is valid for date time. For example, I did not found it on [MSDN date time formats](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx) page

# ruby - 需要为反引号命令设置环境变量

> ID：16127817
> 
> 赞同：6
> 
> 时间：2013-04-21T03:56:51.603
> 
> 标签：ruby, shell, scripting

如何将环境变量传递给我使用`Kernel#system`et al 执行的 shell 命令？

说，我想跑

```
%x{git checkout -f} 
```

但是这个命令依赖于环境变量`$GIT_WORK_TREE`。我该如何设置？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T04:29:27.090

您应该能够在`ENV`调用子 shell 之前在 Ruby 的哈希中设置变量：

```
ENV['GIT_WORK_TREE'] = 'foo'
`echo $GIT_WORK_TREE` 
```

应该返回“foo”。

有关更多信息，请参阅[`ENV[]=`](http://ruby-doc.org/core-2.0/ENV.html#method-c-5B-5D-3D)文档。

* * *

```
[1]（撬）主要：0> ENV['GIT_WORK_TREE'] = 'foo'
“富”
[2] (pry) main: 0> `echo $GIT_WORK_TREE`
“富\n”

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T04:18:06.800

您可以使用[`Process.spawn`](http://ruby-doc.org/core-1.9.3/Process.html#method-c-spawn)设置环境：

```
spawn({'GIT_WORK_TREE' => '/foo/bar'}, "git checkout -f") 
```

# sql - Visual Basic HowTo：从 .mdf 检索数据

> ID：16127821
> 
> 赞同：0
> 
> 时间：2013-04-21T03:57:39.073
> 
> 标签：sql, vb.net, visual-studio-2012, sql-server-2012

我究竟做错了什么？我已经这样做了一段时间了……我投降了。

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        Using sqlCon = New SqlConnection("Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|\gadgetDatabase.mdf;Integrated Security=True")

        Dim Id As Integer = 2
        'With the use of ID, it will get the appName or Application Display Name
        sqlCon.Open()
        Dim sqlText = "SELECT appName " & _
                      "FROM appTable " & _
                      "WHERE Id = @sqlID"
        Dim sqlCmd = New SqlCommand(sqlText, sqlCon)
        sqlCmd.Parameters.AddWithValue("@sqlID", Id)
        'sqlCmd.ToString()
        sqlCmd.ExecuteScalar() 'I had these in there before I copied the code over
        sqlCon.Close()
        Label3.Text = sqlText 'For testing or confirmation it went correctly...

    End Using

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T04:06:14.667

You forgot to call

```
string apName = sqlCmd.ExecuteScaler(); 
```

and retrieve the result.

If a resultset (multiple results) is expected, then call `reader = cmd.ExecuteReader()` and loop through the results.

# android - 在 SMS 上点击链接时启动 android 应用程序

> ID：16127822
> 
> 赞同：19
> 
> 时间：2013-04-21T03:57:49.670
> 
> 标签：android, android-intent, sms, launching-application

我不知道是否有很多人尝试过，但我正在尝试构建一个应用程序，要求用户点击他/她收到的短信上的链接，这将启动 android 应用程序。可以在android中做吗？如果是，我该怎么做？我知道这可以在IOS中完成。任何建议或帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-21T04:32:57.260

在您的清单中，在您要处理来自消息应用程序中单击的链接的传入数据的 Activity 下，定义如下内容：

```
<activity android:name=".SomeActivityName" >

    <intent-filter>
        <category android:name="android.intent.category.DEFAULT" />
        <action android:name="android.intent.action.VIEW" />
        <data android:scheme="com.your_package.something" />
    </intent-filter>

</activity> 
```

以下`android:scheme=""`是确保 Activity 对其中包含的任何数据做出反应的内容：

```
<data android:scheme="com.your_package.something" /> 
```

在`SomeActivityName`（*用作说明的名称。自然，您将使用自己的 :-)*），您可以像这样运行检查：

```
Uri data = getIntent().getData();
String strData = data.toString();
if (strScreenName.equals("com.your_package.something://"))  {
    // THIS IS OPTIONAL IN CASE YOU NEED TO VERIFY. THE ACTUAL USAGE IN MY APP IS BELOW THIS BLOCK
} 
```

我的应用程序的类似用法：

```
Uri data = getIntent().getData();
strScreenName = data.toString()
        .replaceAll("com.some_thing.profile://", "")
        .replaceAll("@", ""); 
```

我用它来处理我的应用程序中对 twitter **@username**链接的点击。我需要去掉`com.some_thing.profile://`和`@`以获取用户名以进行进一步处理。清单代码完全相同（只是`name`和`scheme`更改）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-21T04:14:58.600

向您的应用添加一个[意图过滤器](http://developer.android.com/guide/components/intents-filters.html)，用于侦听遵循您希望启动应用的格式的链接。

但是，这将是一个全局监听器，任何符合格式的链接甚至在 SMS 应用程序之外都会触发您的应用程序。因此，如果用户在 Web 浏览器中点击类似的链接，您的应用程序将尝试响应它。

此外，如果除了您的应用程序之外还有其他应用程序可以处理此链接，Android 将创建一个选择器，允许用户选择他们想要使用的任何应用程序。除了建议用户将您的应用设置为此类链接的默认处理程序外，您对此无能为力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-21T10:05:54.867

```
 <intent-filter>
        <category android:name="android.intent.category.DEFAULT" />
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.BROWSABLE"
        <data android:scheme="https" android:host="${hostName}" android:pathPattern="/.*" />
  </intent-filter> 
```

以前的答案是可以的，但不要忘记指定模式。

[在此处查看更多详细信息。](https://stackoverflow.com/a/18346414/4148568)

还要在 Gradle 文件中定义您的主机名，例如：

```
android {
    defaultConfig {
        manifestPlaceholders = [hostName:"subdomain.example.com"]
    }
} 
```

[关于这里的](https://developer.android.com/studio/build/manifest-build-variables.html)更多信息。`manifestPlaceholders`

# javascript - 如何成功地为 JS 中的字段设置值？尝试过.focus但没有运气

> ID：16127826
> 
> 赞同：0
> 
> 时间：2013-04-21T03:58:27.593
> 
> 标签：javascript, jquery, css, field, frontend

嗨，我正在尝试让我的输入字段说“输入您的电子邮件地址”，当您单击它时，它会消失以让用户键入它。我尝试使用 on:focus 和其他关于 SO 的各种技巧，但我无法让它发挥作用。谁能指出我正确的方向？你可以在 heyscout.com 上看到我在说什么。

在我的脚本标签中，我有：

```
<script type="text/javascript">
JotForm.init(function(){
   $('input_1').hint('Enter your e-mail address');
});
</script> 
```

对于我的输入字段，我有

```
 <div id="cid_1" class="form-input">
          <input type="email" class="form-textbox validate[required, Email]" id="input_1" name="q1_stayIn1" size="30"  />
        </div> 
            <button class="signup_btn" type="submit" class="form-submit-button">
              Okay!
            </button> 
```

它应该可以工作，但我不完全确定是什么问题。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T04:04:01.793

In case you don't already know, you can do this with plain HTML if you don't need to support older browsers.

```
<input type="email" placeholder="Enter your e-mail address" class="form-textbox validate[required, Email]" id="input_1" name="q1_stayIn1" size="30" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T04:01:31.717

You almost got it:

```
$('#input_1').hint('Enter your e-mail address');
   ^--------------- YOU NEED THIS TO SELECT ID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T04:02:59.307

The selector is used just like CSS, so you need to target it like `#input_1`, e.g.,

```
$('#input_1').hint('Enter your e-mail address'); 
```

# database - 数据库关系表人员和地址

> ID：16127832
> 
> 赞同：-1
> 
> 时间：2013-04-21T03:59:58.517
> 
> 标签：database, relational-database

处理具有人名、电话号码和其他信息的表 Person 和第二个表 Address 的情况的适当方法是什么？

您应该将 Address 主键指定为 Person 表中的外键，还是最好有一个 Person_has_Address 与人员和地址的外键？

我开始注意到使用外键约束非常麻烦，因为它要求您必须先输入地址，然后输入人，如果您使用 Person_has_Address，您可以从 Person 或 Address 表开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T04:10:33.253

Person和Address之间的关系一般是多对多的：多个Person可以在同一个地址居住/工作/度假，每个Person可以有不同的居住/工作/度假地址。

您应该构建单独的 Person 和 Address 表以及与每个和`PersonAddress`具有 FK 关系的表。`Person``Address`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T04:03:36.797

If a Person can only ever have 2 addresses, then the simple way to model this is to have `Address1Id` and `Address2Id` as foreign key columns in the Person table.

BUT if a person can have many addresses, create a many-to-many intermediate table `PersonAddress`

```
PersonAddress
=============

PersonId  (FK to Person.Id)
AddressId (FK to Address.Id) 
```

# java - 在系统中使用调度程序

> ID：16127834
> 
> 赞同：0
> 
> 时间：2013-04-21T04:00:01.217
> 
> 标签：java, design-patterns, solid-principles

**下面系统中调度员的相关性是什么？**

这是一种模式/原则吗？

![请求电梯](https://i.stack.imgur.com/OWV9F.jpg)

我无法推测`Dispatcher`这里的相关性。

根据文献，`Dispatcher`每辆车都有一个，其主要功能是计算汽车的目标移动方向和目的地，以及保持车门的打开时间。与系统中几乎所有的`Dispatcher`控制对象交互，除了`LanternControl`。

怎么不`HalButtonController`直接跟大佬聊`Drivecontrol`呢？什么是 a`DriveControl`不能履行的责任 - 并且需要 a `Dispatcher`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:05:58.660

The button and drivecontrol are stateless - the dispatcher is responsible for maintaining the state in the system. Without the dispatcher, then if two buttons were pushed then they'd both send their inputs to the drive control and the system would crap out (or else the drive control would simply ignore one of the inputs); instead, the dispatcher intercepts the button inputs and queues them appropriately (i.e. changes the system state to reflect the button inputs), then sequentially dispatches them to the drive control.

# datetime - Python转换军事时间用户输入并计算工作时间（datetime.timedelta）

> ID：16127839
> 
> 赞同：2
> 
> 时间：2013-04-21T04:00:29.577
> 
> 标签：datetime, time, python-2.7

菜鸟在这里，

我一直试图将军事时间的用户输入呈现为标准时间。该代码到目前为止有效，但我需要从结束时间减去 12 小时才能以标准时间显示。如何使用 datetime.time 执行此操作？另外，我是否需要将原始用户输入转换为整数来执行 datetime.timedelta 计算？以前的问题似乎没有回答我的编码问题。

我的代码是：

```
def timeconvert():
    print "Hello and welcome to Python Payroll 1.0."
    print ""
    # User input for start time. Variable stored. 
    start = raw_input("Enter your check-in time in military format (0900): ") 
    # User input for end time. Variable stored.
    end = raw_input("Enter your check-out time in military format (1700): ") 
    print ""

    # ---------------------------------------------------------------------------
    # Present user input in standard time format hhmm = hh:mm
    # ---------------------------------------------------------------------------
    import datetime, time
    convert_start = datetime.time(hour=int(start[0:2]), minute=int(start[2:4]))
    # need to find a way to subtract 12 from the hour to present end time in standard time
    convert_end = datetime.time(hour=int(end[0:2]), minute=int(end[2:4]))
    print 'You started at', convert_start.strftime("%H:%M"),'am', 'and ended at', convert_end.strftime("%H:%M"), 'pm' 

    # ---------------------------------------------------------------------------
    # Use timedelta to caculate time worked.
    # ---------------------------------------------------------------------------
    # print datetime.timedelta
timeconvert()
raw_input("Press ENTER to exit program") # Closes program. 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T04:43:25.103

您可以使用`strftime("%I:%M %p")`以“AM”或“PM”结尾的标准 12 小时格式。有关字符串格式的更多详细信息，请参阅[Python 文档。](http://docs.python.org/2.7/library/datetime.html?highlight=datetime#strftime-and-strptime-behavior)`datetime`

此外，虽然它本身不受支持，但您可以简单地使用这两个`datetime.time`实例作为`timedelata`构造函数的一部分进行计算。

下面的代码就足够了，尽管一定要使用正确的错误检查。;)
--ap

```
start = raw_input("Enter your check-in time in military format (0900): ") 
end = raw_input("Enter your check-out time in military format (1700): ") 

# convert user input to datetime instances
start_t = datetime.time(hour=int(start[0:2]), minute=int(start[2:4]))
end_t = datetime.time(hour=int(end[0:2]), minute=int(end[2:4]))
delta_t = datetime.timedelta(
    hours = (end_t.hour - start_t.hour),
    minutes = (end_t.minute - start_t.minute)
    )

# datetime format
fmt = "%I:%M %p"
print 'You started at %s and ended at %s' % (start_t.strftime(fmt), end_t.strftime(fmt))
print 'You worked for %s' % (delta_t) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-23T05:56:20.413

```
def time12hr(string):
    hours  =  string[:2] 
    minutes = string[2:]
    x = " "
    if int(hours) == 12:
       x = "p.m."
       hours = "12"
    elif int(hours) == 00:
         x = "a.m."
         hours = "12" 
    elif int(hours) > 12:
       x = "p.m."
       hours  = str(int(hours) - 12)
    else:
        x = "a.m."
    return "%s:%s %s"%(hours ,minutes,x)
print time12hr('1202')
print time12hr('1200')
print time12hr('0059')
print time12hr('1301')
print time12hr('0000') 
```

# build - (GNU) Make：如何建立一个基本系统？

> ID：16127843
> 
> 赞同：1
> 
> 时间：2013-04-21T04:01:32.340
> 
> 标签：build, makefile, gnu-make

我想尝试建立一个非常小的 Makefiles 系统。我有以下设置，但有些地方不太正确（这是通过阅读一些关于该主题的 SO 帖子拼凑而成的，虽然有点特定于项目，还有一些网站。我一定没有抓住一些基本的东西来拥有一个“ Makefile”调用子makefile。

这甚至比在不同的子目录中拥有主 Makefile 调用文件更简单。以下是我准备的以下文件：

生成文件：

```
全部：
    $(MAKE) -f ./make_system.mk
    $(MAKE) -f ./make_crc.mk

```

make_system.mk：

```
G = -g ## 调试选项
CC = gcc ## 编译器
SRCS = source.c sink.c gateway.c
EXES = 源宿网关
OBJS = source.o sink.o gateway.o
CFLG =
LFLG =
LIB = #-lsocket -lnsl -lpthread全部：$（EXES）

%.o: %.c %.h
    $(CC) -c $G $(CFLG) $<

来源：source.o
    $(CC) -o source source.o $(LIB) $(LFLG)

水槽：水槽.o
    $(CC) -o sink sink.o $(LIB) $(LFLG)

网关：gateway.o
    $(CC) -o 网关 gateway.o $(LIB) $(LFLG)

干净的：
    /bin/rm -f 核心 *.o $(EXES) *~

```

make_crc.mk：

```
CC = gcc
CFLAGS = -g
LFLAGS =
HDR = crcmode.h
SRC = crcmodel.c crctest.c
OBJ = crcmodel.o crctest.o
EXE = crctest全部：$（EXE）

%.o: %.c %.h
    $(CC) -c $(CLFAGS) $<

$(EXE): $(OBJ)
    $(CC) $(LFLAGS) $(OBJ) -o $(EXE)

干净的：
    /bin/rm -f *.o *~ 核心 $(EXE)

```

我将如何设置 Makefile 来调用较小的子 makefile（*.mk 类型）？这是使用更大规模 makefile 系统的基本但重要的第一步（有手册可供参考，尽管我认为它没有明确的基本示例）。如果这样做的人可以向我展示一个小的 Makefile 小插图，我们将不胜感激（同样，这个 makefile 系统可以存在于同一个本地目录中）。

注意：单独的makefile“make_system”和“make_crc”在它们本身被命名为“Makefile”时可以正常工作，但我想尝试将它们称为具有单个整体Makefile的单独的子makefile。

附录（下面的解决方案）：一旦我实现了如下所示的 Carl 解决方案，我意识到您需要始终包含某种形式的“make clean”，或者至少在调用 Makefile 之前在命令行中输入 at。否则，您会看到相应的输出“无事可做”。这是我以前知道的，但这次忽略了（简单检查：只需查看您的目录，您就会看到环境/目录中有可执行文件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:44:31.520

如果你想“转发”目标，你需要明确地做到这一点。像这个例子这样的东西应该可以工作（虽然我现在不能轻松测试，抱歉）：

```
default: all 
%:
    $(MAKE) -f ./make_system.mk $@
    $(MAKE) -f ./make_crc.mk $@ 
```

# c# - Unexpected output from SQL Server Compact

> ID：16127853
> 
> 赞同：0
> 
> 时间：2013-04-21T04:03:32.777
> 
> 标签：c#, asp.net, database, sql-server-ce

I have a SQL Server Compact database function for insertion and selection .

```
public Exception SetPartyDetails(PartyDetails pd)
{
        query = "Insert into [Party Details] ( [Name],[Address],[Tin No],[Land Line No],[Mobile No]) values (@Name,@Address,@PartyTin,@LandLineNo,@MobileNo)";
        try
        {
            com = new SqlCeCommand(query , con);
            com.Parameters.AddWithValue("@Name",pd.name);
            com.Parameters.AddWithValue("@Address",pd.address);
            com.Parameters.AddWithValue("@PartyTin",pd.tinNo);
            com.Parameters.AddWithValue("@LandLineNo",pd.landLineNo);
            com.Parameters.AddWithValue("@MobileNo",pd.mobileNo);
            con.Open();
            com.ExecuteNonQuery();
            con.Close();
            retrn = null;

        }
        catch(Exception e)
        {
            con.Close();
            retrn = e;
        }
        return retrn;
}

public List<PartyDetails> GetAllPartyDetails()
{
        query = "select * from [Party Details] ";
        try
        {
            List<PartyDetails> pls = new List<PartyDetails>();
            con.Open();
            com = new SqlCeCommand(query, con);

            sdr = com.ExecuteReader();
            while (sdr.Read())
            {
                pd = new PartyDetails();
                pd.name = sdr.GetString(1);
                pd.address = sdr.GetString(2);
                pd.tinNo = sdr.GetString(3);
                pd.mobileNo = sdr.GetString(4);
                pd.landLineNo = sdr.GetString(5);
                pls.Add(pd);
            }
            con.Close();
            return pls;
        }
        catch (Exception)
        {
            con.Close();
            return null;
        }
} 
```

When I am trying to call above function by following code

```
public static void Main()
{
    DataBase db = new DataBase();
    PartyDetails pd = new PartyDetails();
    pd.name = "Chet";
    pd.address = "b-77 ved villa colony ";
    pd.tinNo = "5346";
    pd.mobileNo = "88901505335725";
    pd.landLineNo = "014125353297610";

    Console.WriteLine(db.SetPartyDetails(pd) + " Sucess prd");

List<PartyDetails> pdl = db.GetAllPartyDetails();
Console.WriteLine(pdl.Count);
foreach (PartyDetails ps in pdl)
{
    Console.WriteLine(ps.name);
    Console.WriteLine(ps.address);
    Console.WriteLine(ps.landLineNo);
    Console.WriteLine(ps.mobileNo);
    Console.WriteLine(ps.tinNo);

}
} 
```

When I run above code it runs as expected first insertion and then selection. Gives following output:

```
Output 
Sucess prd
1 
chet
b-77 ved villa colony
88901505335725
5346 
```

But problem comes up when I run above code without calling insertion function only selection it gives output `0` which means it has no records but insertion was done before. I am not able to figure out what is wrong with the above code.

I tried few testing on the above code as follows

1.When i insert data from sql server management studio selection function works well .Suppose i insert 2 entries from management studio and one from above code. Selection function gives output of 3 entries which is right result but this only happens when i call insertion and selection simultaneously. With only selection call it gives two entries only which was inserted by Management studio.

2.When i insert 2-3 entries by insertion code and then call both function simultaneously it works well and give output of 2-3 entries.It means data is inserted in database because one time only entry is inserted but where the hell is it storing because in Management studio there is no data change.

3.Inserted data by code is stored temporarily because when i run my code after some time and call both function simultaneously it doesn't give entries inserted by code only gives entry by management studio ... as explained in point 1.

# python - 在 Python 中，如何将浮点数列表转换为特定格式的字符串？

> ID：16127862
> 
> 赞同：4
> 
> 时间：2013-04-21T04:06:11.843
> 
> 标签：python, string, python-2.7, floating-point

我有一个浮点数元组列表，例如

```
[ (1.00000001, 349183.1430, 2148.12222222222222), ( , , ), ..., ( , ,) ] 
```

如何在保持相同结构（元组列表或列表列表）的同时，将所有数字转换为具有相同格式（具有 8 个小数点精度的科学记数法）的字符串？

我想我可以用嵌套的 for 循环来做到这一点，但是有没有更简单的方法，比如以`map`某种方式使用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T04:13:26.410

假设您有一些列表列表或元组列表：

```
lst = [ [ 1,2,3 ], [ 1e6, 2e6, 3e6], [1e-6, 2e-6, 3e-6] ] 
```

您可以使用列表理解创建并行列表列表：

```
str_list = [['{0:.8e}'.format(flt) for flt in sublist] for sublist in lst] 
```

或元组列表：

```
str_list = [tuple('{0:.8e}'.format(flt) for flt in sublist) for sublist in lst] 
```

然后，如果您想显示这组数字：

```
str_display = '\n'.join(' '.join(lst) for lst in strlist)
print str_display 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T04:10:36.127

单程：

```
a = [ (2.3, 2.3123), (231.21, 332.12) ]
p = list()
for b in a:
    k = list()
    for c in b:
        k.append("{0:.2f}".format(c))
    p.append(tuple(k))
print p 
```

删除内循环：

```
p = list()
for b in a:
    p.append(tuple("{0:.2f}".format(c) for c in b)) 
```

也删除外循环：

```
p = [ tuple("{0:.2f}".format(c) for c in b) for b in a ] 
```

打印`p`：

```
"\n".join([ "\t".join(b) for b in p ]) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-21T04:14:53.427

使用 numpy 你可以这样做：

```
>>> a=[[11.2345, 2.0, 3.0], [4.0, 5.0, 61234123412341234]]
>>> numpy.char.mod('%14.8E', a)

array([['1.12345000E+01', '2.00000000E+00', '3.00000000E+00'],
      ['4.00000000E+00', '5.00000000E+00', '6.12341234E+16']],
      dtype='|S14') 
```

numpy 字符串数组中的数据类型为 S14，[根据文档](http://docs.scipy.org/doc/numpy/reference/arrays.dtypes.html)，它是一个 14 字节长度的字符串 (S)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-15T13:41:47.740

一个方便的功能：

```
def stringify(listAll, sFormat):
    listReturn = []
    for xItem in listAll:
        if type(xItem) == float:
            xNewItem = sFormat.format(xItem)
            print(type(xNewItem))
            listReturn.append(xNewItem)
        else:
            xNewItem = str(xItem)
            print(type(xNewItem))
            listReturn.append(xNewItem)
    return listReturn

listAll = ['a', 3.1, 'b', 2.6, 4, 5, 'c']
listNew = stringify(listAll, '{0:.3}')
print(listNew) 
```

在使用之前取出打印件等。我把它写得有点冗长，这样你就可以看到它是如何工作的，然后自己收紧代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T04:41:45.807

如果你真的想使用地图，你可以这样做：

```
map(lambda x: tuple(map(lambda y: '%08f' % y, x)), list) 
```

但是 IMO，列表理解更容易阅读。

# java - 如何使用“比较器”接口对二维数组进行排序？

> ID：16127867
> 
> 赞同：0
> 
> 时间：2013-04-21T04:06:42.820
> 
> 标签：java, arrays, sorting

我需要对以下数组进行排序：

```
String [][] myArray = {{"John", "3", "10"}, {"Paul", "16","2"}, 
                       {"Mike","8","20"},    {"Peter","5","0"}}; 
```

进入以下数组：

```
String [][] myArray = {{"John", "3", "10"}, {"Mike","8","20"}, 
                       {"Paul", "16","2"}, {"Peter","5","0"}}; 
```

我有两节课。第一个包含数组，另一个实现 Comparator 接口。这是 MyArray 类：

```
public class MyArray {
public static void main(String[] args) {
String [][] myArray = {{"John", "3", "10"}, {"Paul", "16","2"}, 
                       {"Mike","8","20"},{"Peter","5","0"}};
ByName byName = new ByName();
Arrays.sort(myArray,byName);
}
} 
```

这是 ByName 类：

```
 import java.util.Comparator;
    public class ByName implements Comparator {
         public int compare(Object o1, Object o2) {
            String name1 = (String)((MyArray) o1)[0]);
            String name2 = (String)((MyArray) o2)[0]);
    return (name1>name2) ? 1 : -1;
// Here I am confused, how can I compare it, how can I sort my array 
// alphabetically by the first element of each element, i.e. by the names. 
            }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T04:09:43.593

你几乎明白了：而不是`<`在

```
return (name1>name2) ? 1 : -1; 
```

使用`compareTo()`：

```
String name1 = ((String[])o1)[0];
String name2 = ((String[])o2)[0];
return name1.compareTo(name2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-30T00:38:47.500

您还可以使用类的对象而不是二维数组：

```
import java.util.Comparator;
    public class ByName implements Comparator {
         public int compare(Object o1, Object o2) {
            String name1 = (String)(( o1));
            String name2 = (String)((o2));
    return (name1>name2) ? 1 : -1; 
```

# sharepoint-2010 - Sharepoint 2010 folder level views on document library

> ID：16127871
> 
> 赞同：0
> 
> 时间：2013-04-21T04:07:53.017
> 
> 标签：sharepoint-2010, views

I have a document library in SharePoint 2010 and want to create different views on the basis of attribute values like

1.  View1 shows only those folder which have Close projects
2.  View2 shows only those folder which have Active projects

so I want to create folder level column which can be set as close/active.

Any Idea to solve ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:35:18.220

您可以为此使用内容类型。您只需创建内容类型并将父内容类型组设置为文件夹内容类型并将父内容类型设置为文件夹。完成后，您可以创建一个新的网站栏，稍后在您的列表文件夹中使用它。

可以在[此处](http://techtrainingnotes.blogspot.com/2007/08/sharepoint-how-to-create-links-from.html)找到更详细的分步说明。

# ruby-on-rails - Rails 4/Devise/MongoDB：使用自定义属性和强参数的“不允许的参数”

> ID：16127873
> 
> 赞同：7
> 
> 时间：2013-04-21T04:08:10.693
> 
> 标签：ruby-on-rails, mongodb, devise, ruby-on-rails-4, strong-parameters

尝试将嵌套的自定义属性**Profile**（Mongoid 文档）添加到我的设计**User**类。当提交设计注册表单时，它应该同时创建一个**用户**和一个相应的**配置文件**对象。

我希望最终结果在我的 MongoDB 中看起来像这样：

**用户：**

```
{
  # Devise fields:
  "email": "my@email.com",
  ...
  # Custom field
  "profile" : "<object_id>"
} 
```

**轮廓：**

```
{
  "first_name": "Dave",
  ....
} 
```

* * *

不幸的是，每当我提交注册时，我都会在控制台中收到此信息。它成功创建了用户，但未能创建关联的配置文件。

```
Started POST "/" for 127.0.0.1 at 2013-04-20 23:37:10 -0400
Processing by Users::RegistrationsController#create as HTML
Parameters:
   {"utf8"=>"✓",
   "authenticity_token"=>"awN2GU8EYEfisU0",
   "user"=>
       {"profile_attributes"=>
           {"first_name"=>"Dave",
           "birthday(2i)"=>"4",
           "birthday(3i)"=>"21",
           "birthday(1i)"=>"1933",
           "occupation_title"=>"Software Developer"},
        "password"=>"[FILTERED]",
        "password_confirmation"=>"[FILTERED]",
        "email"=>"my@email.com"}}
Unpermitted parameters: profile_attributes 
```

* * *

我有设置：

*   Rails 4.0.0beta1，Ruby 2.0.0-p0
*   设计（'rails4' 分支），Mongoid（来自 git）
*   自定义设计注册控制器，用于添加强参数的定义。

**模型/用户.rb：**

```
class User
  include Mongoid::Document

  devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable,
     :token_authenticatable, :confirmable, :lockable, :timeoutable

  field :email,              type: String, default: ''

  ...

  has_one :profile
  accepts_nested_attributes_for :profile
end 
```

**模型/profile.rb：**

```
class Profile
  include Mongoid::Document
  include Mongoid::Timestamps

  # Attributes
  # ----------
  field :slug,                type: String, default: '' # Acts as user-'friendlier' slug
  field :birthday,            type: DateTime, default: DateTime.now
  field :first_name,          type: String, default: ''
  field :occupation_title,    type: String, default: ''

  belongs_to :user
  embeds_many :photos
  has_one :occupation_industry, :as => :industry
end 
```

**控制器/用户/registrations_controller.rb**

```
class Users::RegistrationsController < Devise::RegistrationsController

  def resource_params
    params.require(:user).permit(:email, :password, :password_confirmation, :profile_attributes)
  end
  private :resource_params
end 
```

**路线.rb**

```
devise_for  :users,
              :path => '',
              :path_names => {
                :sign_in => 'login',
                :sign_out => 'logout',
                :sign_up => 'register'
                },
              :controllers => {
                :registrations => "users/registrations",
                :passwords => "users/passwords"
              } 
```

我已经看过这些相关的帖子，它们似乎没有帮助：

*   [Rails 4嵌套属性不允许的参数](https://stackoverflow.com/questions/15919761/rails-4-nested-attributes-unpermitted-parameters)
*   [https://gist.github.com/kazpsp/3350730](https://gist.github.com/kazpsp/3350730)

* * *

**编辑：**

看起来 Devise 确实在其“rails4”分支中支持强参数（应该在几天内合并到 master 中。）查看代码，您似乎可以为设计控制器上的每个操作覆盖 params 函数。对于创建新用户，它`sign_up_params`而不是`resource_params`在我的示例中。

尽管将此名称更改为正确的名称，但它仍然不起作用......仅使用此 bang 将所有参数列入白名单似乎有效：

```
def sign_up_params
  params.require(:user).permit!
end 
```

显然，这种破坏了强参数的目的......所以现在的问题是我如何允许我的嵌套属性`profile_attributes`（如我原来的问题所示）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T15:57:20.027

我遇到了完全相同的问题，并且覆盖**sign_up_params**确实对我有用

```
def sign_up_params
   params.require(:user).permit(:email, :password, :password_confirmation, :other, :etc)
end 
```

当然，不同之处在于我的只是标量值，而您正在尝试批量分配关系......我想这就是您应该寻找的地方。

顺便说一句，该主题中的文档仍然不存在（太新），并且代码注释建议覆盖[devise_parameter_sanitizer](https://github.com/plataformatec/devise/blob/rails4/lib/devise/controllers/helpers.rb#L86)，这不是必需的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-18T17:22:31.637

我发现了一种不同的方法，它允许**所有设计的覆盖逻辑和代码驻留在应用程序控制器**中。这允许为每个设计操作（登录、注册、更新）传递任何和所有自定义参数。我还为 devise_invitable 添加了一个参数清理程序，并在此处处理该逻辑（邀请，accept_invitation）。我有自定义参数，如 avatar、avatar_cache 等：

```
#application_controller.rb

  before_filter :configure_permitted_parameters, if: :devise_controller?

protected
  # There are just three actions in Devise that allows any set of parameters to be passed down to the model, 
  # therefore requiring sanitization. Their names and the permited parameters by default are:

  # sign_in (Devise::SessionsController#new) - Permits only the authentication keys (like email)
  # sign_up (Devise::RegistrationsController#create) - Permits authentication keys plus password and password_confirmation
  # account_update (Devise::RegistrationsController#update) - Permits authentication keys plus password, password_confirmation 
  # and current_password. More at https://github.com/plataformatec/devise#strong-parameters

  def configure_permitted_parameters
    devise_parameter_sanitizer.for(:accept_invitation) do |u|
      u.permit(:username,:validate_username, :password,:password_confirmation, :invitation_token)
    end
    devise_parameter_sanitizer.for(:invite) do |u|
      u.permit(:name,:comments)
    end

    devise_parameter_sanitizer.for(:sign_up) do |u|
      u.permit(:username,:password,:password_confirmation)
    end
    devise_parameter_sanitizer.for(:sign_in) do |u|
      u.permit(:username,:email,:password,:password_confirmation,:phone, :validate_username, :avatar_cache, :remove_avatar, :current_password,:remember_me)
    end

    devise_parameter_sanitizer.for(:account_update) do |u|
      u.permit(:username,:email,:password,:password_confirmation,:phone, :validate_username,:avatar, :avatar_cache, :remove_avatar, :current_password)
    end
  end 
```

[在https://github.com/plataformatec/devise#strong-parameters](https://github.com/plataformatec/devise#strong-parameters)查找并阅读更多信息

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-15T01:36:52.030

我在登录时遇到了同样的问题，它说：`Unpermitted parameters: password, remember_me`. 并且因为我有任何继承**Devise::SessionsController**的控制器，所以我使用我自己的[参数 sanitizer](https://github.com/plataformatec/devise/blob/rails4/lib/devise/controllers/helpers.rb#L86)。

这就是我所做的：

在 '#{Rails.root}/lib' 折叠中创建一个文件，my is `hzsapa_parameter_sanitizer.rb`and required in **config/application.rb**，然后覆盖**application_controller.rb**`devise_parameter_sanitizer`中的方法

 ****lib/hzsapa_parameter_sanitizer.rb**

```
class HzsapaParameterSanitizer < Devise::ParameterSanitizer
  def sign_in
    default_params.permit(auth_keys + [:password, :remember_me])
  end
end 
```

您可以覆盖这些方法取决于您的问题：

```
def sign_in
  default_params.permit(auth_keys)
end

def sign_up
  default_params.permit(auth_keys + [:password, :password_confirmation])
end

def account_update
  default_params.permit(auth_keys + [:password, :password_confirmation,    :current_password])
end 
```

**配置/应用程序.rb**

```
require "hzsapa_parameter_sanitizer" 
```

**应用程序/application_controller.rb**

```
class ApplicationController < ActionController::Base
  # Prevent CSRF attacks by raising an exception.
  # For APIs, you may want to use :null_session instead.
  protect_from_forgery with: :exception

  def devise_parameter_sanitizer
    @devise_parameter_sanitizer ||= if defined?(ActionController::StrongParameters)
                                      HzsapaParameterSanitizer.new(resource_class, resource_name, params)
                                    else
                                      Devise::BaseSanitizer.new(resource_class, resource_name, params)
                                    end
  end
end 
```

**编辑：**我刚刚在设计自述文件中找到了解决方案，你可以[在这里关注它](https://github.com/plataformatec/devise#strong-parameters)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T21:00:46.913

我使用了你的代码，它对我有用！

这是我所做的

```
class RegistrationsController < Devise::RegistrationsController
  skip_before_filter :verify_authenticity_token, :only => :create #, :if => Proc.new { |c| c.request.format == 'application/json' }
  respond_to :json, :html, :xml

  def create
    user = User.new(devise_registrations_permitted_parameters)
    if user.save
      render :json=> user.as_json(:auth_token=>user.authentication_token, :email=>user.email,:name => user.name), :status=>201
      return
    else
      warden.custom_failure!
      render :json=> user.errors, :status=>422
    end
  end

  protected                                                            
    def devise_registrations_permitted_parameters
      params.require(:user).permit(:name, :email, :password, :password_confirmation)
    end

end 
```**

# python - 如何使用 Python 和 HTML 构建桌面软件？

> ID：16127876
> 
> 赞同：6
> 
> 时间：2013-04-21T04:08:30.793
> 
> 标签：python, html, css, desktop-application

也许我的问题很愚蠢，但我还是想问。

我一直在想是否可以使用 Python、HTML 和 Css 来开发桌面软件。我知道已经有几个很好的 GUI 框架，如 Qt、Tk 等。但是 HTML 和 JS 框架的各种来源仍然对我很有吸引力。我的意思不是一个软件，它就像一个有前端的 Web 应用程序，Python 也充当服务器端语言。我的意思是像其他 GUI 框架一样使用 Python。我可以创建由 HTML 和 Css 构建的小部件。

有没有框架有这个功能？我知道Javascript有*app.js。*或者我认为是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T05:39:23.830

看看[pyjs](http://pyjs.org)。

## 什么是pyjs？

pyjs 是一个适用于 Web 和桌面的富 Internet 应用程序 (RIA) 开发平台。使用 pyjs，您可以完全用 Python 编写基于 JavaScript 的 Web 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-13T20:22:47.030

CEFPython 通过嵌入 Chromium 浏览器并为其提供 python 绑定来实现这一点： [https ://code.google.com/p/cefpython/](https://code.google.com/p/cefpython/)

〜：python示例.py

提出：

![在此处输入图像描述](https://i.stack.imgur.com/Hx4Ny.jpg)

# sql - 将数据从一个表（triplestore）插入到另一个表（属性表）

> ID：16127878
> 
> 赞同：1
> 
> 时间：2013-04-21T04:08:55.063
> 
> 标签：sql, postgresql, sql-insert, triplestore

我必须将 RDF 数据从三重存储传输到属性表。下面给出了三重存储和属性表的示例。

**三联店**

```
Subject Property Object
  Sub1 prop1 hello
  Sub2 prop1 hello1
  Sub3 prop1 hello2
  Sub1 prop2 world
  Sub2 prop2 world1
  Sub3 prop2 world2
  Sub4 prop3 random 
```

**属性表1**

```
Subject prop1 prop2
Sub1    hello world
Sub2    hello1 world1
Sub3    hello2 world2 
```

**属性表2**

```
Subject prop3
Sub4  random 
```

这是我正在使用的数据集的一个非常简化的版本。Triplestore 表中有大约一百万条记录。根据各种属性和对象的各种分组，必须创建一个以上的属性表。我已经确定并创建了各种属性表？选择构成属性表的属性以使主题完全包含在单个属性表中？

我面临的问题是将数据从三重存储插入到属性表。有没有一种方法可以在单个插入语句中将特定主题的数据插入到属性表的行中。如果不能在单个查询中完成，那么最有效的方法是什么。

我正在使用 python 创建 SQL 查询的转储，我后来在 postgres 服务器上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T05:00:01.630

如果您有一组已知的、固定的属性，这很容易。如果您没有一组已知的固定属性，则必须从您的应用程序、PL/PgSQL 或使用扩展中的`crosstab`函数生成动态 SQL。`tablefunc`

对于固定属性集，您可以自行加入：

[http://sqlfiddle.com/#!12/391b7/6](http://sqlfiddle.com/#!12/391b7/6)

```
SELECT p1."Subject", p1."Object" AS "prop1", p2."Object" AS "prop2"
FROM triplestore p1
INNER JOIN triplestore p2 ON (p1."Subject" = p2."Subject")
WHERE p1."Property" = 'prop1'
  AND p2."Property" = 'prop2'
ORDER BY p1."Subject";

SELECT p1."Subject", p1."Object" AS "prop1"
FROM triplestore p1
WHERE p1."Property" = 'prop3'
ORDER BY p1."Subject"; 
```

要将它们变成`INSERTs`简单的使用，`INSERT ... SELECT`例如：

```
INSERT INTO "Property Table 1"
SELECT p1."Subject", p1."Object" AS "prop1"
FROM triplestore p1
WHERE p1."Property" = 'prop3'
ORDER BY p1."Subject"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T22:37:12.880

一般来说，您尝试做的事情有点 EAV（实体属性值）模式的味道——这被广泛认为是一种反模式。此外，如果我的回答不符合您的需求，我认为我不太了解您要达到的目标

如果您的问题是在某个键下存储以前未知格式的数据 - 在您的示例中，这似乎是主题 - 我建议使用[postgres contrib hstore 扩展](http://www.postgresql.org/docs/9.2/static/hstore.html)。使用它可以让你创建一个像

```
create table foo (
  id serial not null primary key,
  subject character varying not null,
  properties hstore
); 
```

其中的属性字段本质上就是 Ruby 所称的“哈希”。您可以将键/值对插入此存储区（从上面的示例中，例如 'prop1=>hello' 并使用等效语法选择它。

插入相当简单：

```
insert into foo (subject, properties) values ('Sub1', 'prop1=>Hello'::hstore); 
```

使用其他方法的优势在于 hstore 支持 btree、gin 和 gist 索引（所有这些都在某些前提条件下）。在您的情况下 - 主要是直接匹配搜索属性中的某个值，即使 btree 也可以工作，因为它支持 hstore 的相等运算符。

# php - 如何修复 MediaWiki 错误“Wiki 使用 cookie 登录用户。您已禁用 cookie。请启用它们并重试。”？

> ID：16127882
> 
> 赞同：11
> 
> 时间：2013-04-21T04:09:05.023
> 
> 标签：php, cookies, mediawiki, wiki

我遇到的问题是我无法登录到我使用 MediaWiki 创建的新创建的 wiki。我在网上搜索了答案，但我发现的答案对这个特定问题没有帮助（比如这个：[mediawiki cookies 问题](https://stackoverflow.com/questions/1148583/problem-with-mediawiki-cookies)）我尝试了多个浏览器并更改了设置以确保启用 cookie，但是我不断收到同样的错误：

> " *Wiki 使用 cookie 登录用户。您已禁用 cookie。请启用它们并重试。* "

我不确定这是否是我当前版本的 PHP（当前为 5.3）或我的 wiki 中的设置的问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-21T16:18:24.710

我找到了解决方法，我将按步骤进行：

1.  打开`LocalSettings.php`
2.  转到页面底部，然后输入以下代码：`session_save_path("tmp");`
3.  `tmp`在您安装了 MediaWiki 的文件夹中创建一个名为的目录。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-29T14:53:59.963

如果您使用的是 NGINX + PHP-FPM，以前的答案可能无法解决您的问题。

根据我的经验，当 php-fpm 没有对 cookie_path 的写入权限时会导致此问题。您可以通过运行找到此路径：

```
php-fpm -i|grep --color cookie_path 
```

查看您的 cookie_path 是什么，然后统计文件夹并确保您的 php-fpm 用户对其具有写入权限。

要使用 Nginx 和 Php-Fpm 解决此问题，我必须将我的 cookie_path 从默认的 /（说真的，为什么这是默认的？）更改为 /tmp。

重启nginx和php-fpm后，完美运行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-03T21:55:44.447

Aaron Schulz也[推荐](https://www.mediawiki.org/wiki/User:Aaron_Schulz/How_to_make_MediaWiki_fast)的最简单的解决方案通常是设置

```
$wgSessionsInObjectCache = true;
$wgMainCacheType = CACHE_ANYTHING; 
```

在你的`LocalSettings.php`. 在最近的 PHP 中，您将默认启用 OPcache；如果没有可用的加速器，最坏的情况是此配置将使用数据库。

另请参阅[缓存](https://www.mediawiki.org/wiki/Manual:Cache)文档。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-30T10:35:36.037

我也有这个问题...

我所有的浏览器都在抱怨 cookie 被关闭了......

我认为已经实施了一个组策略来禁用 cookie。在与我的服务器支持团队协商没有实施任何此类操作后，我决定远程访问服务器。

服务器抱怨磁盘空间不足。我通过删除一些旧的不相关文件来清理磁盘。

尝试从我的浏览器再次登录，一切正常。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-25T16:56:58.770

这里没有提到的一个答案 - 确保您的文件系统没有空间不足。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-24T08:42:52.937

当使用 memcached 存储会话文件时，可能会发生同样的事情。在这种情况下，wiki 将无法在 /tmp 中写入 cookie。如果您在 error.log 中看到类似“找不到文件 (11211:9001/qweqweqweqweqe)”的内容，这意味着您已经安装并配置了 memchached，您需要在 LocalSettings.php 中添加以下行：

```
$wgMainCacheType = CACHE_MEMCACHED; 
$wgParserCacheType = CACHE_MEMCACHED; # optional 
$wgMessageCacheType = CACHE_MEMCACHED; # optional 
$wgMemCachedServers = array( "127.0.0.1:11211" );
$wgSessionsInMemcached = true; # optional 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-22T20:06:16.423

成为根：

```
su - 
```

然后编辑`php.ini`文件：

```
nano /etc/php5/apache2/php.ini 
```

并将这些变量设置为 /tmp：

```
session.save_path = "/tmp"   
session.cookie_path = "/tmp" 
```

您还可以更正权限以防万一：

```
chmod -R 1777 /tmp 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-11T22:05:26.737

刚刚在运行 IIS 的 Win2008 R2 服务器上遇到了这个问题，当创建用户时给出了这个（红色）消息：

> 帐户创建错误 未创建用户帐户，因为我们无法确认其来源。确保您已启用 cookie，重新加载此页面并重试。

此外，如果用户尝试登录 Wiki，他们会收到以下（红色）消息：

> 登录错误 (WikiName) 使用 cookie 登录用户。您已禁用 cookie。请启用它们并重试。

失败的尝试：

*   我尝试了 JesseG17 的解决方案，但无法保存对 `localsettings.php`文件的更改（尽管停止了服务器）。
*   我检查了临时位置的权限，但这没有帮助。
*   我改变了尝试通过 IIS 的 PHP 管理器更改临时位置，但这并没有改变任何东西。

最终起作用的是使用 IIS 的 PHP 管理器来更改 MediaWiki 的 PHP 设置；`session.use_cookies`从 0 到 1

这解决了问题而无需重新启动。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-04-18T21:49:37.987

我正在添加一个新答案，因为我的设置略有不同，并且我采取的步骤与其他人的步骤相似但并不完全相同。

我用 NGINX 在 CentOS 上安装了 MediaWiki。在成功运行了几个月后，我开始突然出现同样的 cookie 错误。

[![在此处输入图像描述](https://i.stack.imgur.com/pQyU3.png)](https://i.stack.imgur.com/pQyU3.png)

我遇到的问题是 php-fpm 用户无法访问该`session.save_path`文件夹。我不知道为什么会这样，但现在我修复了它。

我运行了[SprintCycle](https://stackoverflow.com/users/3018645/sprintcycle)命令的变体来确定会话的存储位置：

```
php-fpm -i|grep --color save_path 
```

在我的情况下，它是`/var/lib/php/session`.

然后我更改了目录并设置了权限：

```
cd /var/lib/php
chmod -R 1777 session 
```

我重新启动了服务，一切都恢复了。

```
service nginx restart
service php-fpm restart 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-06-02T03:12:36.030

要检查的另一件事是您的会话 tmp 目录是否已满。症状是您的 http 服务器错误日志中的“写入失败”消息。呸！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-11-16T19:03:10.543

我不得不取消注释 LocalSettings.php 中的 wgCookieSecure 设置：

`#$wgCookieSecure=true;`

只有在检查了同一台计算机上的另一个 wiki 在类似的设置下运行良好后才发现这一点。因此，要进行调试，您可能需要在邻居目录中安装一个新的 mediawiki 并检查这是否会给您带来任何麻烦。然后你可以通过这里的所有建议以及 [https://www.mediawiki.org/wiki/Topic:Rg3w5u0e70fs8l4e上的建议](https://www.mediawiki.org/wiki/Topic:Rg3w5u0e70fs8l4e)

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-03-23T19:22:36.003

放

```
$wgDisableCookieCheck = true; 
```

在你的`LocalSettings.php`.

（[来源](https://www.mediawiki.org/wiki/Topic:Qediwojbhxk5qlee)）

# javascript - 在条件中测试多个变量？DOM Javascript

> ID：16127885
> 
> 赞同：0
> 
> 时间：2013-04-21T04:10:24.233
> 
> 标签：javascript, dom, if-statement, conditional-statements

下面的代码代表了我想要实现的想法，但是当我测试它不起作用时，测试 q1 和 q2 是否等于 true 的适当方法是什么？

```
function processForm() {
  if(q1_valid = true && q2_valid = true){
    alert("yes");
    } else {
    alert("no");
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T04:18:45.927

当您`=`在 javascript（和大多数类似 C 的语言）中使用 simple 时，会发生什么是您分配变量，然后返回所述分配的结果。

以代码为例`a = b = true`。这可以拆分为`a = (b = true)`. 现在，如果我们只看括号内的部分，你会发现它首先将 b 设置为 true，然后返回 b。然后，在括号之外，它将 a 设置为 b 的任何值（原因是`true`），并返回 a 的值。a 的值无处可去，所以它被简单地丢弃了。

现在，如果我们回到你的 if 测试，你最终得到的基本上是这样的：

1.  设置`q1_valid`为`true`。
2.  将`true`（q1_valid 的值）返回给`&&`操作员。
3.  `true`是有效的，`&&`所以它看起来在右手边。
4.  设置`q2_valid`为`true`。
5.  返回. `true`_`&&`
6.  `&&`现在`true`两边都有。退货`true`。

测试总是通过。`q1_valid`并且`q2_valid`总是`true`在测试运行之后。

简单的解决方案是替换`=`为`==`(equals) 或`===`(type **and** value equals)。您的 if-check 应如下所示：

1.

```
if(q1_valid == true && q2_valid == true) 
```

2.

```
if(q1_valid === true && q2_valid === true) 
```

此外，由于使用布尔值（值是真或假），因此可以完全省略检查是否等于真。另一种方法就是这样：

```
if(q1_valid && q2_valid) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T04:15:45.943

这里有两个问题：

您需要使用两个等号进行比较`==`

函数中不存在变量，调用函数时需要将它们作为参数传递

```
function processForm(q1_valid, q2_valid) {
  if(q1_valid == true && q2_valid == true){
    alert("yes");
    } else {
    alert("no");
  }
} 
```

# java - JAX-RS - Glassfish 3.2 上没有根节点的 JSON

> ID：16127888
> 
> 赞同：1
> 
> 时间：2013-04-21T04:10:35.440
> 
> 标签：java, json, jaxb, glassfish, jax-rs

这里问了完全相同的问题： [JAX-RS - JSON without root node](https://stackoverflow.com/questions/4838192/jax-rs-json-without-root-node) 但是该解决方案对我不起作用，因为我的服务器除了 REST 没有任何其他接口，因此文件 WEB-INF/web.xml 没有存在。以下是原始问题：

我有一个完整的网络服务，响应是：

```
{
    "cities": [
        {
            "id": "1",
            "name": "City 01",
            "state": "A1"
        },
        {
            "id": "2",
            "name": "City 02",
            "state": "A1"
        }
    ]
} 
```

但我想要这个

```
 [
        {
            "id": "1",
            "name": "City 01",
            "state": "A1"
        },
        {
            "id": "2",
            "name": "City 02",
            "state": "A1"
        }
    ] 
```

如何配置 JAX-RS 以仅使用 JAX-RS 功能而不是实现特定功能来生成没有根节点的 JSON？我的代码需要跨任何应用服务器移植。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:02:28.103

我终于解决了这个问题。我所要做的就是在 Project Properties/Compile/GlassFish Server 3+ Jersay 中标记复选框“Package”

# mysql - 我应该在 MySQL 中使用 SMALLINT 而不是 DATETIME 来节省空间吗？

> ID：16127889
> 
> 赞同：2
> 
> 时间：2013-04-21T04:10:35.990
> 
> 标签：mysql, datetime, size

我正在尝试决定是否使用 SMALLINT(4) 与 DATETIME 来表示 MYSQL 中的一年。

我的表需要有型号年份，但我不想像这样浪费月份或日期的空间：`20xx-01-01 00:00:00`.

所以我可以像这样节省代表一年的空间：

```
year SMALLINT(4); 
```

如果节省不多，我可以使用 DATETIME。如果使用 4 位数年份有利于节省空间，那么如何`$_POST`使用四位数年份作为 DATETIME？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T04:20:11.730

MySQL中有年份数据类型 - [http://dev.mysql.com/doc/refman/5.1/en/year.html](http://dev.mysql.com/doc/refman/5.1/en/year.html)

> YEAR 类型是用于表示年份值的 1 字节类型。它可以声明为 YEAR(4) 或 YEAR(2) 以指定四个或两个字符的显示宽度。如果未指定宽度，则默认为四个字符。

笔记：

> YEAR(2) 数据类型有一些问题，您在选择使用它之前应该考虑这些问题。从 MySQL 5.1.65 开始，不推荐使用 YEAR(2)。

可能的范围：1901 到 2155，或 0000

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T04:26:40.063

您可以使用 DATE 数据类型（使用 3 个字节）而不是 DATETIME（8 个字节）。您仍然需要存储月份和日期，但不需要存储时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T04:18:39.093

你会用`mktime(date(Y), 0, 0, 0, 0, 0)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T04:43:04.713

MySQL DATE 类型分配 3 个字节，而 SMALLINT 是 2 字节整数。所以，如果有的话，这是急切的储蓄。另一方面，每次您想将 year-as-integer 列与其他 date 列进行比较时，都需要做一些额外的工作。

要将整数输入值转换为 MySQL 日期，您可以使用以下内容：

```
$year = isset($_POST['year']) ? intval($_POST['year']) : 1970;
// ISO 8601 standard date representation is YYYY-MM-DD
mysqli_query($link, "INSERT INTO `mytable`(`datefield`) VALUES('{$year}-01-01')"); 
```

# javascript - 使用 .val 设置值后的 JQuery .select

> ID：16127893
> 
> 赞同：0
> 
> 时间：2013-04-21T04:11:11.510
> 
> 标签：javascript, jquery, asp.net, telerik

我的 html 中的两个标签条中有两个 Radtextboxes (telerik)。我想根据用户对其他人所做的更改来设置每个人的值。我已经使用以下代码实现了：

```
function OnUsernameChanged() {
  $('#txtUserNameTab1').focus(function (e) {
    $(this).select();
  });
  $('#txtUserNameTab2').focus(function (e) {
    $(this).select();
  });
  $('#txtUserNameTab1').bind('keypress blur keyup', function (e) {
    var userNameValue = $(this).val();
    $('#txtUserNameTab2').val($(this).val());

  });
  $('#txtUserNameTab2').bind('keypress blur keyup', function (e) {
    var userNameValue = $(this).val();
    $('#txtUserNameTab1').val($(this).val());
  });
} 
```

当第一个值发生更改时，它可以正常更新第二个文本框的值，反之亦然。但问题在于选择，当专注于任何文本框时，它总是对该文本框进行全选，但值会更改为文本框的初始值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:38:35.907

我创建了一个小提琴，可以按照您想要的方式使用文本框控件。 [http://jsfiddle.net/ZeEXp/1/](http://jsfiddle.net/ZeEXp/1/)

JS：

```
 $('#txtUserNameTab1,#txtUserNameTab2').mouseup(function() {
            $(this).select();
        });

        $('#txtUserNameTab1').bind('keyup', function (e) {
            var userNameValue = $(this).val();
            $('#txtUserNameTab2').val($(this).val());
        });

        $('#txtUserNameTab2').bind('keyup', function (e) {
            var userNameValue = $(this).val();
            $('#txtUserNameTab1').val($(this).val());
        }); 
```

HTML：

```
<textarea id="txtUserNameTab1">asdfasdfa</textarea>
<textarea id="txtUserNameTab2">563gh45</textarea> 
```

# php - 是否有更有效的方法来根据数组中已有的内容插入新的数组变量

> ID：16127895
> 
> 赞同：0
> 
> 时间：2013-04-21T04:11:23.797
> 
> 标签：php, arrays

基本上按照标题。以下代码运行良好，但似乎是一个相当冗长的过程来完成看似相当简单的任务。

我将看看 foreach 如何替代它，但我想知道是否真的正确地解决了这个问题。

编辑：例如，我看到人们使用“{}”来连接而不是“。” 说它更快，但我一直无法让他们在这段代码中工作。

```
<?php
// Create Array
    $foobar = array(
        "foo" => "test1",
        "bar" => "hello",
        "far" => "this",
        "boo" => "is",
    //  "foo_result" => "", // Uncomment to check that function does nothing where foo_result already available
    "foo_link" => "http://1.media.collegehumor.cvcdn.com/82/16/162e153d618d49869783ccd475005fd5.jpg",
    "for" => "cool"
);

function _insertarray($foobar) {
// provide arrays to test against
    $foo1 = array("test1","test2");
    $foo2 = array("test3","test4");
    $foo3 = array("test5","test6");
    $foo4 = array("test7","test8");

// End function where "foo_result" is already set
    if (isset($foobar['foo_result'])) {
        // Nothing to do
    }
    else { 

    // add the variable to the foo_result index based on values returned
        if ((count(array_intersect($foo1, $foobar))) ? true : false) {
            $foobar['foo_result'] = "<iframe src='" . $foobar["foo_link"] . "'>";
        }
        else if ((count(array_intersect($foo2, $foobar))) ? true : false) {
            $foobar['foo_result'] = "<a href='" . $foobar["foo_link"] . "'>";
        }
        else if ((count(array_intersect($foo3, $foobar))) ? true : false) {
            $foobar['foo_result'] = "<img src='" . $foobar["foo_link"] . "'>";
        }
        else if ((count(array_intersect($foo4, $foobar))) ? true : false) {
            $foobar['foo_result'] = "<iframe src='" . $foobar["foo_link"] . "'>";
        }
        else {
            // Nothing to do here
        }
    }
    return $foobar;     
}
    print_r(_insertarray($foobar));
?> 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T04:27:59.353

我认为这在 CPU 时间上不会快得多，但它通过删除所有重复来简化代码。

```
$test_array = array(
  array('check' => array("test1", "test2"),
        'format' => '<iframe src="%s">'),
  array('check' => array("test3", "test4"),
        'format' => '<a href="%s">'),
  array('check' => array("test5", "test6"),
        'format' => '<img src="%s">'),
  array('check' => array("test7", "test8"),
        'format' => '<iframe src="%s">'));

foreach ($test_array as &$el) {
  if (array_intersect($foobar, $el['check'])) {
    $foobar['foo_result'] = sprintf($el['format'], $foobar["foo_link"]);
    break;
} 
```

`array_intersect`可能是瓶颈，但前提是您的阵列非常大。如果是这种情况，我建议您编写一个`arrays_have_common_element`更有效地执行此操作的函数（您可以将其中一个数组转换为关联数组的键（该函数`array_flip()`将为您执行此操作），然后遍历另一个数组，直到它找到匹配项）。

# paxos - paxos - 有人可以用例子解释接受消息吗

> ID：16127896
> 
> 赞同：1
> 
> 时间：2013-04-21T04:12:06.730
> 
> 标签：paxos

我读了这篇关于 Paxos [paxos 价值选择](https://stackoverflow.com/questions/14435646/paxos-value-choice)的帖子， 但我仍然不清楚。假设我们第一次运行 Paxos，Proposer 发送 Prepare，Acceptors 回复 (null, null)，因为他们没有学到任何值，所以 Proposer 同意自己的值并将其发送给他们接受的接受者。让我感到困惑的是，当 Proposer 收到 Promise-acks 并需要发送 Accept 消息时：

> 如果任何 Acceptor 之前接受过任何提案，那么他们将把他们的值发送给 Proposer，Proposer 现在必须将其提案的值设置为与 Acceptor 报告的最高提案编号相关联的值。（来自维基百科）

我不明白——选择“与接受者报告的最高提案编号相关的值”有什么意义？有人可以举个例子来解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T22:10:03.580

在许多分布式协议和无锁/无等待算法中，一个参与者将完成另一个参与者可能尚未完成的工作。Paxos 中的提议者将尽可能完成其他提议者的工作。（这不仅仅是为了排除其他提议者。）如果原始提议者或某些接受者在算法过程中变得不可用，这非常重要。

例如，最初的 Proposer (Paul) 发送了他的 Prepares 和 Accepts，但在将 accept 发送给一个接受者 (Art) 之前就死了。大多数接受者都接受了值（A），因此选择了该值，但整个系统可能对此一无所知。随之而来的是另一位提议者佩吉。她发出了自己的建议，并从亚当那里得知值 A 已被某人接受。请注意，它可能是也可能不是多数。为了安全起见，她将 A 送回去，现在 Art 知道了价值。

```
Paul            Alice Adam Art            Peggy
 |-propose(1)--->|---->|--->|
 |<----ack(_,_)--|-----|----|
 |-accept(A,1)-->|---->|    X               +
 X               |<----|<---|<---propose(2)-|
                 X     |------ack(A,1)----->|
                            |-ack(_,_)----->|
                 |<----|<---|<--accept(A,2)-|
                 |-----|----|-ack---------->| 
```

你可以看到这里至少发生了两件事：在准备阶段，Peggy**学习到了接受的值**；在接受阶段，她**将选择的值传播给其余的接受者**。

如上例所示，该值不必被大多数接受者接受。但 Peggy 只需要等待大部分准备确认，然后才能发送她的接受消息。这是因为大多数接受的答案**将始终包含所选值**。

（注意，如果 Peggy 没有*发送*值 A，她会*更改*选择的答案，这违反了共识不变量。）

让我们再举一个例子，prepare-ack 返回多个值：(A,1) 和 (B,2)。我们可以从这个场景中做出一些推论。

1.  (B,2) 的存在意味着大多数接受者已经确认了一个 prepare(2) 消息，因此
2.  不太*可能*选择 A（但并非不可能），因为大多数接受者会拒绝接受（A，1）消息。
3.  (B,2) 的存在也意味着B*可能*已被大多数受体选择。提议者在收到接受确认之前不会确定。

* * *

**更新**：回答评论中的几个问题。

> 客户在这一切中扮演什么角色？

这取决于应用程序。我维护的 Paxos 应用程序由两种类型的外部事件驱动：时间和客户端写入请求。客户端请求写入数据库；服务器使用 Paxos 来复制和同意写入；然后将结果发送回客户端。*我的*应用程序中的客户端根本不知道 Paxos，也不参与协议。

在*其他*应用程序中，客户端可以扮演提议者的角色。

> 为什么 Peggy 在准备阶段之后不使用她自己的值？

首先，请注意 Peggy 只等待简单的大多数接受者 [ `ceil( N/2 )`] 响应。这意味着`ceil( N/2 ) - 1`Peggy 不知道接受器的结果。这个数字*比简单多数少一*。

如果 Peggy 从准备阶段接收到一个值，她*必须*假设其他主机也具有该值。这将通过简单多数的阈值，这意味着**该值可能已由多数选择。**如果 Peggy使用她自己的值应该可能（有时会）违反共识不变量，即*一旦***选择了一个值，则始终选择相同的值。**

> 为什么 Peggy 使用与准备阶段返回的*最高值关联的值？*

这个问题的答案就在更新的正上方，她考虑了准备阶段返回的多个值。基本上，她假设最高返回值已被大多数接受者接受；并且大多数接受者将拒绝任何具有较低round-id的值（他们会）。

# jakarta-ee - 我实现向primefaces数据表添加行的方法有什么问题？

> ID：16127899
> 
> 赞同：0
> 
> 时间：2013-04-21T04:12:48.053
> 
> 标签：jakarta-ee, jsf-2, primefaces

我正在使用 JavaServer Faces 2.0 和 Primefaces 3.5，并在 Glassfish 3.1.2 上运行它。我在页面上有一个数据表，用于允许用户创建琐事问题、设置其属性并为其添加可能的答案，然后将其作为实体对象存储在表中。所以我使用数据表的Primefaces实现创建了一个数据表

```
<p:dataTable 
    id="answersTable" var="answer" style="width: 250px"
    value="#{createQuestionBean.datamodel}"   
    selection="#{createQuestionBean.selectedAnswer}"
    editMode="cell" editable="true"
    selectionMode="single">

    <p:column style="width:75%"> 
        <p:cellEditor >  
            <f:facet name="output">
                <h:outputText 
                    value="#{answer.answer.testAnswer}" />
            </f:facet>  
            <f:facet name="input">
                <p:inputText 
                    id="modelInput"  
                    style="width: 97%;height: 97%"
                    value="#{answer.answer.testAnswer}"/>
            </f:facet>  
        </p:cellEditor>  
    </p:column>
    <p:column style="width:25%">  
        #{answer.correct ? "Correct" : "Wrong" }  
    </p:column>

</p:dataTable> 
```

我在表格后添加了一个按钮，以允许用户添加答案（因此他们可能有超过 2 个可能的答案）

```
<p:commandButton 
    update="answersTable"
    value="Add +" partialSubmit="true"
    actionListener="#{createQuestionBean.addQuestion}"/> 
```

这是按钮调用的方法

```
public void addQuestion() {
    answers.add(new QuestionAnswers());
    answers.get(answers.size() - 1).setCorrect(false);
    setIDs();
    //set the data models
    datamodel = new QuestionAnswersDataModel(answers);
} 
```

当我运行 init 方法时，我调用了 addQuestion() 方法两次，当页面加载时，我看到了两个答案，它们的行为与它们应该的完全一样。但是，当我单击按钮时，除了这个 Stacktrace，我什么也没有得到：

```
SEVERE: Unable to create new Collection instance for type java.util.Arrays$ArrayList
java.lang.InstantiationException: java.util.Arrays$ArrayList
    at java.lang.Class.newInstance0(Class.java:357)
    at java.lang.Class.newInstance(Class.java:325)
    at com.sun.faces.renderkit.html_basic.MenuRenderer.createCollection(MenuRenderer.java:907)
    at com.sun.faces.renderkit.html_basic.MenuRenderer.convertSelectManyValuesForModel(MenuRenderer.java:367)
    at com.sun.faces.renderkit.html_basic.MenuRenderer.convertSelectManyValue(MenuRenderer.java:129)
    at com.sun.faces.renderkit.html_basic.MenuRenderer.getConvertedValue(MenuRenderer.java:315)
    at org.primefaces.component.selectmanycheckbox.SelectManyCheckboxRenderer.getConvertedValue(SelectManyCheckboxRenderer.java:37)
    at javax.faces.component.UIInput.getConvertedValue(UIInput.java:1030)
    at javax.faces.component.UIInput.validate(UIInput.java:960)
    at javax.faces.component.UIInput.executeValidate(UIInput.java:1233)
    at javax.faces.component.UIInput.processValidators(UIInput.java:698)
    at javax.faces.component.UIForm.processValidators(UIForm.java:253)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at javax.faces.component.UIViewRoot.processValidators(UIViewRoot.java:1172)
    at com.sun.faces.lifecycle.ProcessValidationsPhase.execute(ProcessValidationsPhase.java:76)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.access.channel.ChannelProcessingFilter.doFilter(ChannelProcessingFilter.java:144)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

我找不到我的问题在哪里。我知道我在 init 方法中实例化了列表，即使我没有它也不会加载页面。该异常仅在按下按钮时发生，并且仅在第一次时发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:59:19.393

尝试改变 `datamodel = new QuestionAnswersDataModel(answers);`

至

`datamodel = new QuestionAnswersDataModel(new ArrayList<QuestionAnswers>(answers));`

那应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:19:18.990

试试`datamodel.setWrappedData(answers);`吧

至于*为什么*会这样；虽然我不能给你细节（而且我似乎无法获得实现的来源`DataModel`），但似乎`DataModel`在某些时候尝试创建`java.util.Arrays$ArrayList`. `ArraysList`我们在这里谈论的不是来自class的内部类，`java.util`而是 class 的[内部`Arrays`类](http://www.docjar.com/html/api/java/util/Arrays.java.html)。

此外，您可能有兴趣知道您实际上并不*需要*该`DataModel`课程。您可以按`ArrayList`原样使用。这样，您就不需要在每次修改数据模型时重新包装一个全新的数组。只需添加`java.util.ArrayList`并重新渲染您的数据表

# java - GSON fromJson 返回 LinkedHashMap 而不是 EnumMap

> ID：16127904
> 
> 赞同：8
> 
> 时间：2013-04-21T04:13:31.000
> 
> 标签：java, gson

我想让 gson 能够返回一个`EnumMap`对象。我使用以下代码

```
package sandbox;

import com.google.gson.Gson;
import com.google.gson.reflect.TypeToken;
import java.util.EnumMap;
import java.util.Map;

/**
 *
 * @author yccheok
 */
public class Sandbox {

    public static void main(String[] args) throws InterruptedException {    
        testGson();
    }

    public static enum Country {
        Malaysia,
        UnitedStates
    }

    public static void testGson() {
        Map<Country, String> enumMap = new EnumMap<Country, String>(Country.class);
        enumMap.put(Country.Malaysia, "RM");
        enumMap.put(Country.UnitedStates, "USD");
        Gson gson = new Gson();
        String string = gson.toJson(enumMap);
        System.out.println("toJSon : " + string);
        enumMap = gson.fromJson(string, new TypeToken<EnumMap<Country, String>>(){}.getType());
        System.out.println("fromJSon : " + enumMap);
        System.out.println("fromJSon : " + enumMap.getClass());
    }
} 
```

但是，我得到以下

```
toJSon : {"Malaysia":"RM","UnitedStates":"USD"}
fromJSon : {Malaysia=RM, UnitedStates=USD}
fromJSon : class java.util.LinkedHashMap 
```

即使我已经习惯于`new TypeToken<EnumMap<Country, String>>(){}.getType()`具体我想要`EnumMap`而不是`LinkedHashMap`

**我怎样才能让 gson 返回`EnumMap`？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-21T06:51:50.597

即使使用类型标记，Gson 也只能将数据反序列化为具有默认构造函数的类。并且`EnumMap`没有（它需要使用其元素将匹配的枚举类型进行实例化）。解决此问题的最简单方法是定义和使用[`InstanceCreator`](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/InstanceCreator.html)：

> 实现此接口以创建未定义无参数构造函数的类的实例。如果可以修改类，则应改为添加私有或公共无参数构造函数。但是，对于库类（例如 JDK 类）或您没有源代码的第三方库，这是不可能的。在这种情况下，您应该为该类定义一个实例创建者。在 Gson 能够使用它们之前，应该使用 GsonBuilder.registerTypeAdapter(Type, Object) 方法注册此接口的实现。

下面是一些示例代码：

实例创建者：

```
class EnumMapInstanceCreator<K extends Enum<K>, V> implements
        InstanceCreator<EnumMap<K, V>> {
    private final Class<K> enumClazz;

    public EnumMapInstanceCreator(final Class<K> enumClazz) {
        super();
        this.enumClazz = enumClazz;
    }

    @Override
    public EnumMap<K, V> createInstance(final Type type) {
        return new EnumMap<K, V>(enumClazz);
    }
} 
```

测试代码：

```
final Gson gson = new GsonBuilder().registerTypeAdapter(
        new TypeToken<EnumMap<Country, String>>() {
        }.getType(),
        new EnumMapInstanceCreator<Country, String>(Country.class))
        .create();

final Map<Country, String> enumMap = new EnumMap<Country, String>(
        Country.class);
enumMap.put(Country.Malaysia, "RM");
enumMap.put(Country.UnitedStates, "USD");
String string = gson.toJson(enumMap);
System.out.println("toJSon : " + string);

final Map<Country, String> reverseEnumMap = gson.fromJson(string,
        new TypeToken<EnumMap<Country, String>>() {
        }.getType());
System.out.println("fromJSon (Class): " + reverseEnumMap.getClass());
System.out.println("fromJSon : " + reverseEnumMap); 
```

# css - CSS ID 的问题。无法设置样式

> ID：16127909
> 
> 赞同：0
> 
> 时间：2013-04-21T04:14:23.493
> 
> 标签：css, html

我陷入了一个问题。这些天我正在学习 HTML CSS，并且正在练习基本布局。

**HTML**

```
<!doctype html>
<html>

<head>
<link rel="stylesheet" type="text/css" href="C:\Users\Karan-Mehul\Desktop\asssi.css" />
<title>Assignment 1</title>
</head>

<body>
<div id="wrapper">
    <header>
         <h1> My First Website </h1>

    </header>
    <p>Welcome to my website! Here are a few things I enjoy Favourite Quotes Here is another favourite quote of mine Favourite Quotes Here is another favourite quote of mine And another And another</p>
    <ul>
        <li>Web Dev</li>
        <li>Chess</li>
        <li>Reading</li>
        <li>Learning</li>
    </ul>
    <ol>
        <li>Web Dev</li>
        <li>Chess</li>
        <li>Reading</li>
        <li>Learning</li>
    </ol>
    <div id="try">
        <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever ly with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
        <footer>
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever ly with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
        </footer>
    </div>
</body>

</html> 
```

**CSS**

```
body {
    font-family: sans-serif;
}
p {
    background-color: red;
    float: left;
    width: 330px;
    margin: 0px;
    padding-top: 20px;
    line-height: 37px;
}
ul {
    background-color: green;
    width: 250px;
    float: right;
    margin: 0px;
    margin-left: 50px;
}
#wrapper {
    width: 1000px;
    margin: auto;
    background-color: blue;
}
li {
    list-style: none;
    padding: 5px;
}
header {
    text-align: center;
}
ol {
    background-color: brown;
    width: 250px;
    float: right;
    margin: 0px;
}
#try {
    background-color: #005157;
    margin-top: 160px;
    margin-left: -30px;
    width: 500px;
    float: left;
}
footer {
    width: 700px;
    background-color: green;
} 
```

我的问题是我无法在`div id="try"`和`<footer>`

为什么会这样？为什么我默认会变成红色？我没有指定任何样式。此外，包装器的样式为 background-color:blue 所以即使颜色必须是蓝色的，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:25:23.680

## 问题

您经常遇到一些让人们绊倒的事情，每当您浮动一个元素时，它就不再影响父元素增加它的高度。

这就是为什么只有你的标题区域有蓝色背景，因为 h1 没有浮动，所以它的高度确实有助于主包装器的高度，但浮动元素没有。

## 修复

有几种方法可以解决这个问题，但有一种方法已经成为一种标准的修复方法。它被称为 clearfix，您可以在此处阅读更多信息：http: [//perishablepress.com/new-clearfix-hack/](http://perishablepress.com/new-clearfix-hack/)

基本上，您需要在 CSS 中添加以下内容：

```
/* new clearfix */
.clearfix:after {
    visibility: hidden;
    display: block;
    font-size: 0;
    content: " ";
    clear: both;
    height: 0;
    }
* html .clearfix             { zoom: 1; } /* IE6 */
*:first-child+html .clearfix { zoom: 1; } /* IE7 */ 
```

然后，在您的包装器中，并尝试部分，添加 class="clearfix" 以确保其中的任何浮动元素仍然归因于包装元素的高度，例如，

```
<div id="wrapper" class="clearfix"> 
```

旁注...您尚未关闭`<div id="wrapper">`标签

# achartengine - achartengine 演示的预算图表没有按预期工作

> ID：16127910
> 
> 赞同：0
> 
> 时间：2013-04-21T04:14:45.507
> 
> 标签：achartengine

我从这里下载了 achartengine 演示：[http](http://code.google.com/p/achartengine/downloads/list) ://code.google.com/p/achartengine/downloads/list 在我开始演示之后，我发现并不是每个图表都按预期绘制，当我点击预算饼图时，它没有用，这是我的日志：

```
06-11 17:48:31.478: D/AndroidRuntime(1909): Shutting down VM
06-11 17:48:31.478: W/dalvikvm(1909): threadid=1: thread exiting with uncaught exception (group=0x40a221f8)
06-11 17:48:31.518: E/AndroidRuntime(1909): FATAL EXCEPTION: main
06-11 17:48:31.518: E/AndroidRuntime(1909): java.lang.NullPointerException
06-11 17:48:31.518: E/AndroidRuntime(1909):     at android.view.GLES20Canvas.drawBitmap(GLES20Canvas.java:692)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at android.view.GLES20RecordingCanvas.drawBitmap(GLES20RecordingCanvas.java:103)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at org.achartengine.GraphicalView.onDraw(GraphicalView.java:174)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at android.view.View.draw(View.java:10982)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at android.view.View.getDisplayList(View.java:10421)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at android.view.ViewGroup.drawChild(ViewGroup.java:2850)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at android.view.View.draw(View.java:10985)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at android.widget.FrameLayout.draw(FrameLayout.java:450)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at android.view.View.getDisplayList(View.java:10421)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at android.view.ViewGroup.drawChild(ViewGroup.java:2850)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at android.view.View.getDisplayList(View.java:10419)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at android.view.ViewGroup.drawChild(ViewGroup.java:2850)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at android.view.View.draw(View.java:10985)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at android.widget.FrameLayout.draw(FrameLayout.java:450)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2126)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at android.view.View.getDisplayList(View.java:10421)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at android.view.HardwareRenderer$GlRenderer.draw(HardwareRenderer.java:840)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at android.view.ViewRootImpl.draw(ViewRootImpl.java:1935)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1659)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2467)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at android.os.Looper.loop(Looper.java:137)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at java.lang.reflect.Method.invokeNative(Native Method)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at java.lang.reflect.Method.invoke(Method.java:511)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-11 17:48:31.518: E/AndroidRuntime(1909):     at dalvik.system.NativeStart.main(Native Method) 
```

我无法在代码中捕获异常详细信息，可能是因为异常没有发生在主线程中。有人有同样的经历吗？欢迎任何相关的答案，提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-13T10:21:55.523

这本身可能与 AChartEngine 的演示应用程序没有直接关系。但是，我发现在使用 ProGuard 在发布模式下构建应用程序（使用 AChartEngine 库）时。正如[ProGuard](http://developer.android.com/tools/help/proguard.html#configuring)的 android 文档中所述，在某些情况下，它发现难以分析并错误地删除了它认为未使用的代码。在这种情况下，当库尝试通过调用 onDraw 来绘制图形时，它会引发 NPE。

为了克服这个问题，我发现您必须自定义 ProGuard 配置，以通过在 proguard.cfg 中添加以下行来指示它单独保留 AChartEngine 类。

```
-keep class javax.** { *; } 
```

希望这可以帮助某人。

# java - 在Java中检查字符串中的字母大小写（大写/小写）

> ID：16127923
> 
> 赞同：55
> 
> 时间：2013-04-21T04:17:27.290
> 
> 标签：java

我遇到的问题是我无法让我的密码验证程序检查一个字符串以确保其中 1 个字符是大写的，一个是小写的，它将检查整个字符串中的一个其他并根据它正在检查的语句打印错误消息。

我查看了这个网站和互联网寻找答案，但我找不到答案。这是家庭作业。

以下是我当前的代码。

```
import java.util.Scanner;

public class password
{
    public static void main(String[] args)
    {
        Scanner stdIn = new Scanner(System.in);
        String password;
        String cont = "y";
        char ch;
        boolean upper = false;
        boolean lower = false;

        System.out.println("Setting up your password is easy. To view requirements enter Help.");
        System.out.print("Enter password or help: ");
        password = stdIn.next();
        ch = password.charAt(0);

        while (cont.equalsIgnoreCase("y"))
        {
            while (password.isEmpty())
            {
                System.out.print("Enter password or help: ");
                password = stdIn.next();       
            }

            if (password.equalsIgnoreCase("help"))
            {
                 System.out.println("Password must meet these requirements." +
                     "\nMust contain 8 characters.\nMust contain 1 lower case letter." +
                     "\nMust contain 1 upper case letter.\nMust contain 1 numeric digit." +
                     "\nMust contain 1 special character !@#$%^&*\nDoes not contain the word AND or NOT.");

                password = "";
            }
            else if (password.length() < 8)
            {
                System.out.println("Invalid password - Must contain 8 charaters.");
                password = "";
            }
            else if (!(Character.isLowerCase(ch)))
            {
                for (int i=1; i<password.length(); i++)
                {
                    ch = password.charAt(i);

                    if (!Character.isLowerCase(ch))
                    {  
                        System.out.println("Invalid password - Must have a Lower Case character.");
                        password = "";
                    }
                }
            }
            else if (!(Character.isUpperCase(ch)))
            {
                for (int i=0; i<password.length(); i++)
                {       
                    ch = password.charAt(i);

                    if (!Character.isUpperCase(ch))
                    {
                        System.out.println("Invalid password - Must have an Upper Case character.");
                        password = "";
                    }
                }
            }
            else
            {
                System.out.println("Your password is " + password);

                System.out.print("Would you like to change your password? Y/N: ");
                cont = stdIn.next();
                password = "";
            }

            while (!cont.equalsIgnoreCase("y") && !cont.equalsIgnoreCase("n"))
            {
                System.out.print("Invalid Answer. Please enter Y or N: ");
                cont = stdIn.next();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2013-04-21T04:21:52.097

要确定字符串是否包含大写和小写字符，可以使用以下命令：

```
boolean hasUppercase = !password.equals(password.toLowerCase());
boolean hasLowercase = !password.equals(password.toUpperCase()); 
```

这使您可以检查：

```
if(!hasUppercase)System.out.println("Must have an uppercase Character");
if(!hasLowercase)System.out.println("Must have a lowercase Character"); 
```

本质上，这是通过检查字符串是否等于其完全小写或大写等效来实现的。如果不是这样，则必须至少有一个大写或小写字符。

至于您的其他条件，可以通过类似的方式满足这些条件：

```
boolean isAtLeast8   = password.length() >= 8;//Checks for at least 8 characters
boolean hasSpecial   = !password.matches("[A-Za-z0-9 ]*");//Checks at least one char is not alpha numeric
boolean noConditions = !(password.contains("AND") || password.contains("NOT"));//Check that it doesn't contain AND or NOT 
```

带有如上所述的适当错误消息。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-21T04:27:30.627

像这样的循环：

```
else if (!(Character.isLowerCase(ch)))
            {
                for (int i=1; i<password.length(); i++)
                {
                   ch = password.charAt(i);

                    if (!Character.isLowerCase(ch))
                       {  
                        System.out.println("Invalid password - Must have a Lower Case character.");
                        password = "";
                       }
                     // end if
                } //end for
            } 
```

有一个明显的逻辑缺陷：如果第一个字符不是小写就输入它，然后测试第二个字符是否不是小写。那时你会抛出一个错误。

相反，你应该做这样的事情（不是完整的代码，只是一个例子）：

```
boolean hasLower = false, hasUpper = false, hasNumber = false, hasSpecial = false; // etc - all the rules
for ( ii = 0; ii < password.length(); ii++ ) {
  ch = password.charAt(ii);
  // check each rule in turn, with code like this:
  if Character.isLowerCase(ch) hasLower = true;
  if Character.isUpperCase(ch) hasUpper = true;
  // ... etc for all the tests you want to do
}

if(hasLower && hasUpper && ...) {
  // password is good
} 
else {
  // password is bad
} 
```

当然，除了错误的逻辑之外，您提供的代码片段没有代码来测试您的“帮助”选项打印出的其他条件。正如其他答案之一所指出的，您可以考虑使用正则表达式来帮助您加快查找这些内容的过程。例如，

```
hasNumber  : use regex pattern "\d+" for "find at least one digit"
hasSpecial : use regex pattern "[!@#$%^&*]+" for "find at least one of these characters" 
```

在代码中：

```
hasNumber  = password.matches(".*\\d.*");  // "a digit with anything before or after"
hasSpecial = password.matches(".*[!@#$%^&*].*");
hasNoNOT   = !password.matches(".*NOT.*");
hasNoAND   = !password.matches(".*AND.*"); 
```

可以以巧妙的方式组合这些东西 - 但特别是当你是一个新手正则表达式用户时，最好稍微“缓慢而乏味”，并获得第一次工作的代码（另外你将能够弄清楚你六个月后做了什么）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-21T04:34:13.300

尽管此代码可能超出了新手的理解范围，但可以使用正则表达式在一行中完成，并带有正负前瞻：

```
boolean ok = 
    password.matches("^(?=.*[A-Z])(?=.*[!@#$%^&*])(?=.*\\d)(?!.*(AND|NOT)).*[a-z].*"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-09-21T04:34:09.940

这已经很老了，@SinkingPoint 已经在上面给出了很好的答案。现在，有了 Java 8 中可用的函数式惯用语，我们可以再给它一个转折点。您将有两个 lambda：

```
Function<String, Boolean> hasLowerCase = s -> s.chars().filter(c -> Character.isLowerCase(c)).count() > 0;
Function<String, Boolean> hasUpperCase = s -> s.chars().filter(c -> Character.isUpperCase(c)).count() > 0; 
```

然后在代码中我们可以像这样检查密码规则：

```
if (!hasUppercase.apply(password)) System.out.println("Must have an uppercase Character");
if (!hasLowercase.apply(password)) System.out.println("Must have a lowercase Character"); 
```

至于其他检查：

```
Function<String,Boolean> isAtLeast8 = s -> s.length() >= 8; //Checks for at least 8 characters
Function<String,Boolean> hasSpecial   = s -> !s.matches("[A-Za-z0-9 ]*");//Checks at least one char is not alpha numeric
Function<String,Boolean> noConditions = s -> !(s.contains("AND") || s.contains("NOT"));//Check that it doesn't contain AND or NOT 
```

在某些情况下，创建 lambda 是否在交流意图方面增加了价值是有争议的，但 lambda 的好处在于它们是功能性的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-09T05:57:17.020

我已将上面@Quirliom 的答案简化为可以使用的函数：

```
private static boolean hasLength(CharSequence data) {
    if (String.valueOf(data).length() >= 8) return true;
    else return false;
}

private static boolean hasSymbol(CharSequence data) {
    String password = String.valueOf(data);
    boolean hasSpecial = !password.matches("[A-Za-z0-9 ]*");
    return hasSpecial;
}

private static boolean hasUpperCase(CharSequence data) {
    String password = String.valueOf(data);
    boolean hasUppercase = !password.equals(password.toLowerCase());
    return hasUppercase;
}

private static boolean hasLowerCase(CharSequence data) {
    String password = String.valueOf(data);
    boolean hasLowercase = !password.equals(password.toUpperCase());
    return hasLowercase;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-24T10:38:38.373

```
function TellFirstCharacterType(inputString){
    var firstCharacter = inputString[0];
    if(isNaN(firstCharacter)){
        if(firstCharacter == firstCharacter.toUpperCase()){
            return "It's a uppercase character";
        }
        else{
            return "It's a lowercase character";
        }
    }
    else{
        return "It's a Number";
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-21T04:22:52.440

快速浏览一下[关于正则表达式 sytanx 的文档](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)应该会找到一些方法来判断它是否在某些时候包含小写/大写字符。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-15T23:20:33.370

这就是我得到的：

```
 Scanner scanner = new Scanner(System.in);
    System.out.println("Please enter a nickname!");
    while (!scanner.hasNext("[a-zA-Z]{3,8}+")) {
        System.out.println("Nickname should contain only Alphabetic letters! At least 3 and max 8 letters");
        scanner.next();
    }
    String nickname = scanner.next();
    System.out.println("Thank you! Got " + nickname); 
```

在此处阅读正则表达式模式： [https ://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html](https://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-22T20:20:18.470

```
package passwordValidator;

import java.util.Scanner;

public class Main {
    /**
     * @author felipe mello.
     */

    private static Scanner scanner = new Scanner(System.in);

     /*
     * Create a password validator(from an input string) via TDD
     * The validator should return true if
     *  The Password is at least 8 characters long
     *  The Password contains uppercase Letters(atLeastOne)
     *  The Password contains digits(at least one)
     *  The Password contains symbols(at least one)
     */

    public static void main(String[] args) {
        System.out.println("Please enter a password");
        String password = scanner.nextLine();   

        checkPassword(password);
    }
    /**
     * 
     * @param checkPassword the method check password is validating the input from the the user and check if it matches the password requirements
     * @return
     */
    public static boolean checkPassword(String password){
        boolean upperCase = !password.equals(password.toLowerCase()); //check if the input has a lower case letter
        boolean lowerCase = !password.equals(password.toUpperCase()); //check if the input has a CAPITAL case letter
        boolean isAtLeast8 = password.length()>=8;                    //check if the input is greater than 8 characters
        boolean hasSpecial = !password.matches("[A-Za-z0-9]*");       // check if the input has a special characters
        boolean hasNumber = !password.matches(".*\\d+.*");            //check if the input contains a digit
        if(!isAtLeast8){
            System.out.println("Your Password is not big enough\n please enter a password with minimun of 8 characters");
            return true;
        }else if(!upperCase){
            System.out.println("Password must contain at least one UPPERCASE letter");
            return true;
        }else if(!lowerCase){
            System.out.println("Password must contain at least one lower case letter");
            return true;
        }else if(!hasSpecial){
            System.out.println("Password must contain a special character");
            return true;
        }else if(hasNumber){
            System.out.println("Password must contain at least one number");
            return true;
        }else{
            System.out.println("Your password: "+password+", sucessfully match the requirements");
            return true;
        }

    }
} 
```

# java - Java：如何判断 JFrame 或 JDialog 何时移动？

> ID：16127926
> 
> 赞同：2
> 
> 时间：2013-04-21T04:18:21.670
> 
> 标签：java, swing, jframe, listener, jdialog

我有一个 a 的`JDialog`内部，`JFrame`我希望它与我的`JFrame`. 因此，当用户拖动窗口时，我希望`JDialog`保持在同一位置。

我如何知道用户何时拖动`JFrame`或`JDialog`以便我可以设置另一个的位置？还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T04:20:06.117

请参阅 Swing 教程中有关[如何编写组件侦听器的部分](http://docs.oracle.com/javase/tutorial/uiswing/events/componentlistener.html)。您可以将侦听器添加到框架中，然后在`componentMoved`触发事件时移动对话框。

# c# - 如何通过 SQL Server 在 C# 中更新日期

> ID：16127929
> 
> 赞同：4
> 
> 时间：2013-04-21T04:18:43.987
> 
> 标签：c#, sql-server, database

我正在为我的软件开发课程介绍制作一个体育俱乐部管理系统。我在后端使用 SQL Server。我添加了一个成员并更新了一个成员。

在 C# 中，我使用了 datetimepicker，它可以很好地添加新成员。它给出了选择的确切日期。但是，当我想更新成员信息时，它会给出一些奇怪的错误，例如“nvarchar 附近的输入错误”，而我什至没有`nvarchar`在 SQL Server 表中的任何地方使用过。

这是我的代码。谁能告诉我哪里错了。

```
string connectionstring = "Server=Momal-PC\\MOMAL;Database=Project;Trusted_Connection=True;";

SqlConnection conn = new SqlConnection();
conn.ConnectionString = connectionstring;
conn.Open();

string sql = "UPDATE Members SET Type = '" + comboBox1.Text + "' , FirstName = '" + FNTxt.Text + "', Address = '" + ATxt.Text + "' , [D.O.B] = '" + dateTimePicker1.Value + "' Where Number  = '" + comboBox1.Text + "'";

SqlCommand cmd = conn.CreateCommand();
cmd.CommandType = CommandType.Text;
cmd.CommandText = sql;

cmd.Parameters.Add(new SqlParameter("@Type", comboBox1.Text));
cmd.Parameters.Add(new SqlParameter("@FirstName", FNTxt.Text));
cmd.Parameters.Add(new SqlParameter("@Address", ATxt.Text));
cmd.Parameters.Add(new SqlParameter("@[D.O.B]", dateTimePicker1.Value));

int rowsInserted = cmd.ExecuteNonQuery();
MessageBox.Show("Done!");

conn.Close(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T04:41:23.423

首先，您需要按如下方式更正您的代码，以便使用参数。其次，您能告诉我们[DOB]字段的类型吗？

```
string connectionstring = "Server=Momal-PC\\MOMAL;Database=Project;Trusted_Connection=True;";
using(SqlConnection conn = new SqlConnection(connectionstring ))
{
    conn.Open();

    string sql = "UPDATE Members SET Type = @Type , FirstName = @FirstName, Address = @Address , [D.O.B] = @[D.O.B] Where Number  = '" + comboBox1.Text + "'";

    using(SqlCommand cmd = conn.CreateCommand())
    {
        cmd.CommandType = CommandType.Text;
        cmd.CommandText = sql;

        cmd.Parameters.Add(new SqlParameter("@Type", comboBox1.Text));
        cmd.Parameters.Add(new SqlParameter("@FirstName", FNTxt.Text));
        cmd.Parameters.Add(new SqlParameter("@Address", ATxt.Text));
        cmd.Parameters.Add(new SqlParameter("@[D.O.B]", SqlDbType.DateTime));
        cmd.Parameters["@[D.O.B]"].Value = dateTimePicker1.Value;

        int rowsInserted = cmd.ExecuteNonQuery();
        MessageBox.Show("Done!");
    }
   conn.Close()
} 
```

**编辑：**

要使用存储过程，首先创建一个：

![在此处输入图像描述](https://i.stack.imgur.com/DHWHK.png)

然后添加/复制/粘贴参数和 UPDATE 命令并按 F5 以“执行”命令并创建存储过程：

```
CREATE PROCEDURE UpdateMemberByID
@MemberID int,
@Type varchar(MAX),
@FirstName varchar(MAX),
@Address varchar(MAX),
@DOB smalldatetime
AS
BEGIN
SET NOCOUNT ON;
UPDATE Members SET 
[Type] = @Type
[FirstName] = @FirstName,
[Address] = @Address,
[DOB] = @DOB 
WHERE Number  = @MemberID
END
GO 
```

最后改变这个：

```
 cmd.CommandType = CommandType.Text; 
```

到：

```
 cmd.CommandType = CommandType.StoredPrcedure; 
```

# php - 在 Doctrine 1 中 LEFT JOIN 到 leftJoin() - 如何正确执行？

> ID：16127935
> 
> 赞同：0
> 
> 时间：2013-04-21T04:20:20.823
> 
> 标签：php, mysql, doctrine, left-join

我有两个表，`request`这里`request_reply`是`LEFT JOIN`选择请求以及回复数量的查询：

```
SELECT request.id, COUNT(request_reply.id) as replies
FROM request LEFT JOIN request_reply ON request.id = request_reply.request_id
GROUP BY `request`.`id`
ORDER BY replies ASC 
```

但是当我尝试将其编写为 Doctrine 查询时：

```
$query = Doctrine_Query::create()
         ->select('Request.id, COUNT(RequestReply.id) as reply_count')
         ->from('Request')
         ->leftJoin('RequestReply ON Request.id = RequestReply.request_id')
         ->groupBy('Request.id')
         ->orderBy('reply_count ASC, Request.id DESC'); 
```

结果没有`LEFT JOIN`：

```
SELECT `r`.`id` AS `r__id`, COUNT(`r2`.`id`) AS `r2__0` 
FROM `request` `r`, `request_reply` `r2`
GROUP BY `r`.`id`
ORDER BY `r2__0` ASC, `r`.`id` DESC 
```

我不明白出了什么问题，我已经尝试了所有方法，但是`JOIN`无论我做什么，结果查询中都没有。这是一个带有 Doctrine 1 的遗留项目，所以我无法更新到 Doctrine 2。

**更新**

映射。

`Request.php`

```
$this->hasMany('RequestReply as Replies', array('local' => 'id', 'foreign' => 'request_id')); 
```

`RequestReply.php`

```
$this->hasOne('Request', array('local' => 'request_id', 'foreign' => 'id')); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:51:13.613

您是否正确映射了您的实体？我想在您的实体请求中，您有一个 OneToMany 注释或指向实体 RequestReply 的任何其他 (YAML..)。如果是这样，你应该能够实现你正在寻找的只是这样做：

```
$query = Doctrine_Query::create()
         ->select('Request.id, COUNT(rp.id) as reply_count')
         ->from('Request r')
         ->leftJoin('r.RequestReply rp')
         ->groupBy('r.id')
         ->orderBy('reply_count ASC, r.id DESC'); 
```

让我知道你是否成功了。[您可以在此处](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html#one-to-many-bidirectional)找到对关联映射的任何疑问

**[编辑]**

尼克，请再试一次。第一个错误是因为我不知道您使用了别名回复。挑出来。第二个错误将随着 SELECT 中的字段 r.id 消失。;-)

```
$query = Doctrine_Query::create()
         ->select('r.id, COUNT(rp.id) as reply_count')
         ->from('Request r')
         ->leftJoin('r.Replies rp')
         ->groupBy('r.id')
         ->orderBy('reply_count ASC, r.id DESC'); 
```

# oracle - Oracle SQL：将表从一个用户转移到另一个用户

> ID：16127938
> 
> 赞同：1
> 
> 时间：2013-04-21T04:20:47.590
> 
> 标签：oracle, sqlplus, user-profile, copying

我创建了一个名为 temp 的新用户，密码为**temp**。我有另一个名为**Scott**的用户，由**tiger**识别。该配置文件中有三个表，我想将它们复制到**temp**上。所以我登录到**temp**并打卡（对于第一个名为**iowe**的表）

```
从 iowe@scott 复制 - 创建 iowe - 使用 select * from iowe；
```

之后，当我点击**Enter**时，它问我 FROM 密码。我输入了**tiger**，它抛出了一个错误。这是它的样子：

![在此处输入图像描述](https://i.stack.imgur.com/fgf8F.jpg)

所以请告诉我是否有办法将表从一个用户复制到另一个用户（我确定有）

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T04:41:03.353

使用此语法：

```
CREATE TABLE temp.iowe
  AS (SELECT * FROM scott.iowe); 
```

检查此链接：[http ://www.techonthenet.com/sql/tables/create_table2.php](http://www.techonthenet.com/sql/tables/create_table2.php)

另请注意，临时用户应有权访问 Scott 模式中的数据。

编辑：

授予其他用户访问权限的命令：以 Scott 身份登录并运行以下命令：

```
grant select, insert, update, delete on iowe to temp; 
```

查看此链接了解详情：[http ://www.techonthenet.com/oracle/grant_revoke.php](http://www.techonthenet.com/oracle/grant_revoke.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-08-05T12:11:02.990

```
copy from system/manager@localhost to scott/tiger@localhost create family using select * from family; 
```

# android - 所选 EditText 的 Toast：显示了多个 toast

> ID：16127943
> 
> 赞同：0
> 
> 时间：2013-04-21T04:21:24.730
> 
> 标签：android, focus, android-edittext, toast, textwatcher

所以问题是，当我将焦点从一个 EditText 更改为另一个时，我为所选的一个敬酒，但我不仅仅是所选 EditText 的一个 Toast，我得到了先前选择的一个，然后我得到了所选的结果。我不知道如何使用 TextWatcher 这是代码示例：

```
heure.setOnFocusChangeListener(new OnFocusChangeListener() {

            @Override
            public void onFocusChange(View arg0, boolean arg1) {
                datee.removeTextChangedListener(yourTextWatcher);
                Toast.makeText(RendezVousActivity.this,"heure", 5000).show();

            }
        });

        datee.setOnFocusChangeListener(new OnFocusChangeListener() {

            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                heure.removeTextChangedListener(yourTextWatcher);
                Toast.makeText(RendezVousActivity.this,"Date", 5000).show();

            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T04:22:56.033

OnFocusChanged 被调用两次：一次是在 EditText 获得焦点时，一次是在失去焦点时。

因此，当您单击 EditText 时，它会祝酒。然后，当您单击另一个 EditText 时，第一个失去焦点，再次显示第一个 toast，然后第二个获得焦点，显示您的第二个 toast。

如果您只想在选择 toast 时显示它，请尝试使用：

```
heure.setOnFocusChangeListener(new OnFocusChangeListener() {
    @Override
    public void onFocusChange(View arg0, boolean arg1) {
        datee.removeTextChangedListener(yourTextWatcher);
        if(v.isFocused()) {
            Toast.makeText(RendezVousActivity.this,"heure", 5000).show();
        }
    }
});

datee.setOnFocusChangeListener(new OnFocusChangeListener() {
    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        heure.removeTextChangedListener(yourTextWatcher);
        if(v.isFocused()) {
            Toast.makeText(RendezVousActivity.this,"Date", 5000).show();
        }
    }
}); 
```

# c# - 挂在 WinXPx32 中的 NtQuerySystemInformation 但在 Win7x64 中工作正常

> ID：16127948
> 
> 赞同：1
> 
> 时间：2013-04-21T04:22:16.300
> 
> 标签：c#, winapi, filehandle

我有一个类可以让我关闭给定进程中的进程句柄。我已经掌握了基础知识，它在 Win7 x64 中完美运行，但是当我在 WinXP x86 中运行它时，它挂起，我不明白为什么。我觉得我在这里遗漏了一些相当明显的东西。

```
 public static List<handleFinder.SYSTEM_HANDLE_INFORMATION>
    GetHandles(Process process = null, string IN_strObjectTypeName = null, string IN_strObjectName = null)
    {
        int nLength = 0;
        int nHandleInfoSize = 0x10000;
        IntPtr ipHandle = IntPtr.Zero;
        IntPtr ipHandlePointer = Marshal.AllocHGlobal(nHandleInfoSize);
        uint nStatus;

        while ((nStatus = handleFinder.NtQuerySystemInformation(CNST_SYSTEM_HANDLE_INFORMATION, ipHandlePointer,nHandleInfoSize, ref nLength)) == STATUS_INFO_LENGTH_MISMATCH)
        {
            nHandleInfoSize = nLength;
            Marshal.FreeHGlobal(ipHandlePointer);
            ipHandlePointer = Marshal.AllocHGlobal(nLength);
        }

        byte[] baTemp = new byte[nLength];
        Marshal.Copy(ipHandlePointer, baTemp, 0, nLength);

        long lHandleCount = 0;
        if (Is64Bits())
        {
            lHandleCount = Marshal.ReadInt64(ipHandlePointer);
            ipHandle = new IntPtr(ipHandlePointer.ToInt64() + 8);
        }
        else
        {
            lHandleCount = Marshal.ReadInt32(ipHandlePointer);
            ipHandle = new IntPtr(ipHandlePointer.ToInt32() + 4);
        }

        handleFinder.SYSTEM_HANDLE_INFORMATION shHandle;
        List<handleFinder.SYSTEM_HANDLE_INFORMATION> lstHandles = new List<handleFinder.SYSTEM_HANDLE_INFORMATION>();

        for (long lIndex = 0; lIndex < lHandleCount; lIndex++)
        {
            shHandle = new handleFinder.SYSTEM_HANDLE_INFORMATION();
            if (Is64Bits())
            {
                shHandle = (handleFinder.SYSTEM_HANDLE_INFORMATION)Marshal.PtrToStructure(ipHandle, shHandle.GetType());
                ipHandle = new IntPtr(ipHandle.ToInt64() + Marshal.SizeOf(shHandle) + 8);
            }
            else
            {
                ipHandle = new IntPtr(ipHandle.ToInt64() + Marshal.SizeOf(shHandle));
                shHandle = (handleFinder.SYSTEM_HANDLE_INFORMATION)Marshal.PtrToStructure(ipHandle, shHandle.GetType());
            }
            if (process != null)
            {
                if (shHandle.ProcessID != process.Id) continue;
            }

            string strObjectTypeName = "";
            if (IN_strObjectTypeName != null)
            {
                strObjectTypeName = getObjectTypeName(shHandle, Process.GetProcessById(shHandle.ProcessID));
                if (strObjectTypeName != IN_strObjectTypeName) continue;
            }

            string strObjectName = "";
            if (IN_strObjectName != null)
            {
                strObjectName = getObjectName(shHandle, Process.GetProcessById(shHandle.ProcessID));
                if (strObjectName != IN_strObjectName) continue;
            }
            lstHandles.Add(shHandle);

            string strObjectTypeName2 = getObjectTypeName(shHandle, Process.GetProcessById(shHandle.ProcessID));
            string strObjectName2 = getObjectName(shHandle, Process.GetProcessById(shHandle.ProcessID));
            Console.WriteLine("{0}   {1}   {2}", shHandle.ProcessID, strObjectTypeName2, strObjectName2);

        }
        return lstHandles;
    }

    public static bool Is64Bits()
    {
        return Marshal.SizeOf(typeof(IntPtr)) == 8 ? true : false;
    }
}

public class HandleKiller
{
    public static void doMurderHandle()
    {
        String ProcessName = "xboxstat";

        try
        {
            Process process = Process.GetProcessesByName(ProcessName)[0];
            var handles = Win32Processes.GetHandles(process, "File");
            if (handles.Count == 0) throw new System.ArgumentException("No handles found");
            foreach (var handle in handles)
            {
                IntPtr ipHandle = IntPtr.Zero;
                if (!handleFinder.DuplicateHandle(Process.GetProcessById(handle.ProcessID).Handle, handle.Handle, handleFinder.GetCurrentProcess(), out ipHandle, 0, false, handleFinder.DUPLICATE_CLOSE_SOURCE))
                    Console.WriteLine("DuplicateHandle() failed, error = {0}", Marshal.GetLastWin32Error());

                Console.WriteLine("Handle Killed!");
            }
        }
        catch (IndexOutOfRangeException)
        {
            Console.WriteLine("The process name '{0}' is not currently running", ProcessName);
        }
        catch (ArgumentException)
        {
            Console.WriteLine("The Handle '{0}' was not found in the process '{1}'", "", ProcessName);
        }
        Console.ReadLine();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-05T21:16:55.573

为了避免在遇到带有挂起等待操作的同步命名管道时出现死锁，请在复制句柄上调用 CreateFileMapping()。

如果 GetLastError() 返回 193 (ERROR_BAD_EXE_FORMAT)，则句柄不是文件句柄，您应该跳过对文件名的查询。

与测试命名管道的所有其他类型的调用不同，CreateFileMapping() 不会在内核中死锁。

ERROR_BAD_EXE_FORMAT -- ZwCreateSection 可能返回映射到该用户错误代码的 STATUS_INVALID_FILE_FOR_SECTION。

参见[http://msdn.microsoft.com/en-us/library/windows/hardware/ff566428(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff566428(v=vs.85).aspx) 也[http://support.microsoft.com/kb/113996](http://support.microsoft.com/kb/113996)

# php - Php通过请求与行的回声检索图像

> ID：16127952
> 
> 赞同：0
> 
> 时间：2013-04-21T04:23:36.377
> 
> 标签：php, jquery, mysql

嗨，我想问一下为什么当我尝试从数据库中**回**显图像源时它不起作用，它给了我很多未知的符号，当我尝试通过 php 中的请求使用 get 方法显示它时它起作用了。

我的问题是为什么它可以通过 php 中的请求而不是通过数据库获取 _assoc 的 echo

顺便说一句，我使用 ajax 作为从 jquery 获取图像的方法

*   **这**是错误的，它对我不起作用。getImageOne 来自我的数据库连接类

![在此处输入图像描述](https://i.stack.imgur.com/Cxbfg.png)

```
public function getImageOne(){
    $this->query("SELECT image_posts FROM ratepicture WHERE id = 1");
    return $this->returnOneRow();
}

if($method == 'getImage1')
{
    $getImage1 = $queryUpdate->getImageOne();
    $image1 = $getImage1['image_posts'];
    ?>
    <img src=<?php echo($image1)?> id="imageBoxImg"/>
    <?php
} 
```

*   **这**是正确的，但我想知道为什么

![在此处输入图像描述](https://i.stack.imgur.com/Z7j8l.png)

```
if($method == 'getImage1')
{
    $getImage1 = $queryUpdate->getImageOne();
    $image1 = $getImage1['image_posts'];
    ?>
    <img src=displayImages.php?id=1 id="imageBoxImg"/>
    <?php
}

<?php
 $con = mysqli_connect('127.0.0.1', 'root', '', 'test');

$id = $_REQUEST['id'];
$query = "SELECT image_posts FROM ratepicture WHERE id = ".$id."";
$image = mysqli_query($con, $query);
$image = mysqli_fetch_assoc($image);
$image = $image['image_posts'];

echo $image;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:50:03.793

标记的`src`属性`img`必须是返回图像数据的 URL。您不能将图像数据直接放入属性中（实际上，有一种方法可以将其转换为 base64 编码，但这很恶心）。

标签指向的 URL`src`可以是静态图像文件，也可以指向生成图像数据的脚本——它可以通过调用类似的函数来动态完成`imagecreate()`，也可以将数据从数据库中提取为在您的应用程序中。

您的第二个脚本就是一个例子。的HTML

```
 <img src=displayImages.php?id=1 id="imageBoxImg"/> 
```

调用脚本，该脚本回显图像数据。

# android - Windows Azure , 如何在 Android App 中进行自定义注册流程

> ID：16127953
> 
> 赞同：0
> 
> 时间：2013-04-21T04:23:45.427
> 
> 标签：android, azure-storage

我正在为我的 android 应用程序使用 windows azure 服务，在这个 windows azure 中提供来自 Facebook、Google、Twitter 等的身份验证。

但是我想为用户进行自定义注册，当用户在应用程序中成功注册时，他们也可以使用该用户 ID 登录并传递他们在注册时创建的信息。

如何在 android 应用程序中使用 windows azure。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:32:52.703

查看此示例，该示例演示了如何在服务器端和客户端处理自定义身份验证： http: [//chrisrisner.com/Authentication-with-Windows-Azure-Mobile-Services](http://chrisrisner.com/Authentication-with-Windows-Azure-Mobile-Services)。这篇文章涵盖了服务器端脚本，并链接到另一篇介绍 Android 客户端应用程序的文章。一切的代码也可以在 GitHub 上找到。

值得注意的是，我使用了一个稍微修改过的 Android SDK 版本，我为它提供了对重试请求的支持。尽管如果您不指向更新的 SDK，代码将无法编译，但您无需执行自定义身份验证。如果需要，您可以直接删除处理自定义身份验证注册和登录的代码。

# r - MinVar 投资组合循环优化

> ID：16127955
> 
> 赞同：0
> 
> 时间：2013-04-21T04:24:13.153
> 
> 标签：r, optimization, portfolio, quantitative-finance

我正在尝试使用循环内的优化来最小化 3 个股票投资组合的方差。我所做的是计算从 1980 年 1 月 1 日到 1989 年 12 月 31 日的股票收益和 cov 矩阵，并使用 solve.QP 为 minvar 投资组合进行了优化。从这里开始，我想计算截至 2010 年 12 月 31 日的每一年的 minvar 投资组合，并将权重和最优值存储在一个向量中。我的代码如下：

```
library(quantmod)
library(FRAPO)
library(quadprog)
getSymbols(c("F","AA","IBM"),from="1980-01-01",to="2010-12-31")
port=cbind(F$F.Adjusted,AA$AA.Adjusted,IBM$IBM.Adjusted)
portret=returnseries(port,"discrete",trim=TRUE)
portret=data.frame(date=index(portret),coredata=portret)
colnames(portret)=c("time","F","AA","IBM")
#to determine where to end portA
which(portret=="1989-12-29",arr.ind=TRUE)
#row number 2527 references date 1989-12-29
portA=subset(portret,select=c("F","AA","IBM"),subset=portret[,1]<portret[2527,1])
portAcov=cov(portA)
Dmat=portAcov
dvec=c(0,0,0)
A=c(1,1,1)
B=diag(3)
portAmeans=colMeans(portA)
Amat=cbind(A,portAmeans,B)
bvec=c(1,0,0,0,0)
sol=solve.QP(Dmat,dvec,Amat,bvec,meq=1)
#this gives me my minvar port weights for up to year 1990
portB=subset(portret,select=c("F","AA","IBM"),subset=portret[,1]>=portret[2527,1])
w=matrix(0,nrow(portB),3)
w[1,1:3]=sol$solution
v[1]=sol$value
v=matrix(0,nrow(portB),1)
for(i in (which(portret=="1990-01-02",arr.ind=TRUE)[1]:
          which(portret=="2010-12-31",arr.ind=TRUE)[1])){
Dmat=cov(subset(portret[,2:4],select=c("F","AA","IBM"),subset=portret[,1]
                                                       <portret[i,1]))
sol2=solve.QP(Dmat,dvec,Amat,bvec,meq=1)
for(j in 2:nrow(portB)){
w[j,1:3]=sol2$solution
v[j,]=sol2$value}} 
```

由于某种原因，我的权重向量 w 和值向量 v 等于所有相同的数字。几天来我一直在处理这段代码，但无法弄清楚。此外，我想要年度值和权重（即 1990、1991、1992...2010 年的最佳 minvar 权重和相应的值）。有没有简单的方法来做到这一点？

# ruby-on-rails - 如何在 Facebook 添加好友对话框回调中检测响应是正面还是负面？

> ID：16127960
> 
> 赞同：0
> 
> 时间：2013-04-21T04:25:04.470
> 
> 标签：ruby-on-rails, facebook

我正在将[Facebook 的添加朋友对话框添加](https://developers.facebook.com/docs/reference/dialogs/friends/)到 Rails 应用程序中的用户显示页面。

我已将以下代码添加到页面

```
<%= link_to "Friend on Facebook", "http://www.facebook.com/dialog/friends/?id=#{@user.facebook_uid}&app_id=#{@my_app_id}&redirect_uri=#{user_url(@user)}" %> 
```

到目前为止一切顺利，我收到了来自 Facebook 的以下回调响应：

```
If the user clicks to "Add Friend" (not sure where the additional # characters are coming from":
http://myapp.com/user/1?action=1#_=_

If the user clicks "Cancel":
http://myapp.com/user/1?action=0#_=_ 
```

我想检测这些响应，并且在用户控制器中有以下代码

```
def show
  ....
  if params[:action] == 1
    flash[:success] = "Friend added!"
  elsif params[:action] == 0
    flash[:error] = "Not added"
  else
   flash[:notice] = "no message"
  end
end 
```

Facebook 回调总是通过条件句并生成“无消息”闪存。我尝试了各种排列，包括转换为字符串、整数和添加`#_=_`字符。

`<%= params %>`如果我在视图中渲染，我会看到

```
{"action"=>"show", "controller"=>"users", "id"=>"5"} 
```

但地址栏中的 url 有 Facebook 参数

```
http://myapp.com/user/1?action=1#_=_ 
```

虽然我想找到解决办法，但我也想了解正在发生的事情。我会假设 action=1 将被添加到 params 响应中。

# ios - 在 UIWebView 中播放本地视频 .MOV 文件

> ID：16127966
> 
> 赞同：0
> 
> 时间：2013-04-21T04:25:25.627
> 
> 标签：ios, objective-c, html, video, uiwebview

您好我正在尝试在我的 UIWebView 中播放本地视频。

我不认为我这样做是对的。以前很容易，因为您可以将本地视频放入 Mainbundle，只需将 html 标签命名为：

但现在我的视频存储在文档目录/视频文件夹/video.MOV

我如何获得.. 到源（“src：”属性，对于 html5 视频？

```
NSString *videoHtml = [NSString stringWithFormat:@"<div align=\"center\"><video src=\"%@\" controls=\"controls\"></video></div>", videoName];

    [cell.videoWebView loadHTMLString:videoHtml baseURL:[NSURL URLWithString:self.documentsDirectoryPath]]; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T05:48:37.260

尝试这个

```
NSString *videoPath=[[NSBundle mainBundle] pathForResource:@"video" ofType:@"mov"];
NSURLRequest *req=[NSURLRequest requestWithURL:[NSURL URLWithString:videoPath]];
[cell.videoWebView loadRequest:req]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T05:35:36.033

好的，您可以像这样构建 URL

```
NSArray *paths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory,
                                                 NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

NSString *videoFilePath=[documentsDirectory stringByAppendingPathComponent:@"video folder/"];

NSString *videoHtml = [NSString stringWithFormat:@"<div align=\"center\"><video src=\"%@\" controls=\"controls\"></video></div>", videoName];

[cell.videoWebView loadHTMLString:videoHtml baseURL:[NSURL URLWithString:videoFilePat]]; 
```

# python - 如何返回包含新行的字符串？

> ID：16127968
> 
> 赞同：-1
> 
> 时间：2013-04-21T04:26:02.897
> 
> 标签：python

我有一个问题需要我使用`return`，但我不知道如何在多行上返回。我需要能够得到一个看起来像这样的输出

```
Dear so and so,
kjhagjkahgsdhgl;dslhglk
jkasdhgjkdshkglhds;g
kjdghksadjglkdjslkg
kjgahkjsdhlgkdsjg;lsd 
```

乱码是我拥有的字符串

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T04:27:30.943

您可以使用换行符转义序列 ( `\n`)：

```
return 'line1\nline2\nline3' 
```

或多行字符串：

```
return '''line1
line2
line3''' 
```

或者将行列表连接在一起：

```
return '\n'.join(['line1', 'line2', 'line3']) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T04:56:25.163

您的代码没有问题。它工作正常。唯一的问题是对返回值的混淆。

当您在交互式 Python 解释器中运行语句时，Python 将打印出返回值的“表示”（除非它是`None`）。表示与值本身不同。您可以使用内置`repr`函数获取任何对象的表示。

字符串的`repr`将包含引号，并将转义字符串的所有特殊字符。引号和转义字符实际上并不是字符串本身的一部分，只是表示的一部分。

如果用 打印出字符串`print(string)`，您将只看到字符串的内容，而不是仅在表示中的任何内容。无法使表示看起来像打印输出。Python 不能那样工作。您所拥有的功能可能正是您的任务所需要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T04:27:44.987

你可以试试这个：

```
str1 + '\n' + str2. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T04:28:15.543

```
str = """hello world
goodbye mars"""

print(str) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T05:03:09.330

你需要这样做：

```
>>> print customSpam("John","Bob","Zoo") 
```

如果你这样做：

```
>>> customSpam("John","Bob","Zoo") 
```

您将获得字符串的内部表示，而不是评估后的打印方式。

# php - 清理Mysql表中的数据

> ID：16127969
> 
> 赞同：0
> 
> 时间：2013-04-21T04:26:27.517
> 
> 标签：php, mysql, stored-procedures

我有一个产品 mysql 表。products_image 列中有一些错误数据。展望未来，我可以使用 php 并执行 str_replace，但我的问题是当前数据。

我想更新 products_image，它是产品图像的 url 或路径。它在应该是 / 的路径中有 ./。

有没有办法使用 mysql 中的存储过程（无 php）运行更新语句，或者使用 php，如下所示，但效果不佳。当我在 php 中尝试它时，（见下文）它在大多数情况下都有效，但它超时了。（12779 行）希望您能提供帮助。谢谢。KP

```
<pre> $sql ="Select products_image from products";
       $result = mysql_query( $sql,$link );
       while ($row = mysql_fetch_assoc($result)) {

        $products_image = $row['products_image'];
        $image = str_replace("./","/", $products_image);

         $sql1="UPDATE products set products_image='$image'";
         $result1 = mysql_query($sql1,$link);
           }
</pre> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T04:30:01.260

使用替换功能。

```
UPDATE products SET products_image = REPLACE(products_image, "./", "/") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T04:30:33.753

对您的代码的最小更改是：

改变

```
$sql1="UPDATE products set products_image='$image'"; 
```

至

```
$sql1="UPDATE products set products_image='$image' WHERE products_image = $row['products_image']"; 
```

# c# - 动态模型 ASP.Net MVC

> ID：16127971
> 
> 赞同：0
> 
> 时间：2013-04-21T04:27:02.510
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4, model

我想在 mvc 中应用功能。我有类别，这些类别将有动态列。

现在，对于动态列 - 我想创建 xml 文件并存储在 db 中。例如

```
<col1 name="Description 1" type="textarea" isrequired="true">
</col1>
<col2 name="Sub Options" type="dropdown" isrequired="true">
 <item val="" name="">
 ...
</col2> 
```

现在，如何在没有特定模型和数据注释的情况下动态创建视图？我还想集成验证、动态值绑定等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:30:38.823

您是否正在尝试实现弱类型模型？我想您可以使用带有基于键的查找的哈希表作为模型。这样，您就可以动态查找特定场景所需的任何数据。

# ruby-on-rails - 将设计参数从用户 [电子邮件] 和用户 [密码] 更改为电子邮件和密码

> ID：16127973
> 
> 赞同：0
> 
> 时间：2013-04-21T04:27:26.637
> 
> 标签：ruby-on-rails, devise, ruby-on-rails-3.2

我正在创建一个 API，并且想知道是否可以使用 devise gem 和 Rails 来更改参数，以便 user[email] 更改为 email 和 user[password] 更改为密码？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:33:20.707

您可以编辑设计`sessions/new`视图以更改登录表单。

只需键入`rails generate devise:views`以生成设计视图，然后使用它们。

请注意，您必须在 SessionsController 中处理此问题，因为默认的 Devise 控制器不知道您所做的更改，例如新参数名称。要覆盖或创建自定义设计控制器，请查看此处的文档： [配置设计控制器](https://github.com/plataformatec/devise#configuring-controllers)

出于一般目的，尚不清楚您需要做什么。说到 API，或者任何其他你可以不受限制地处理发送的参数的控制器。如果你得到`params[:user][:email]`（因为默认的设计形式）你可以自由地写它`params[:email]`并做你想做的事。

# objective-c - iPad 视网膜显示有没有办法减少使用 CGContextBeginPage 创建的 PDF 的文件大小？

> ID：16127974
> 
> 赞同：2
> 
> 时间：2013-04-21T04:27:28.237
> 
> 标签：objective-c, ipad, uiview, pdf-generation, retina-display

我正在使用具有 Retina Display 2048x1536 分辨率（2x 比例）的全屏 iPad 从 UIViews 创建 PDF 文件。生成的文件非常大，我得到 6-10 mb 的文件，用于 2 页相当简单的视图。理想情况下，每个文档我会达到 4-5 页，但当前的方法会使 PDF 尺寸过大。

**有没有办法使以这种方式创建的 PDF 更小？**就像创建视图的屏幕截图，将其转换为 JPG，然后将其写入 PDF 上下文？还是我缺少一些质量选项？

这是从单个视图创建 PDF 的代码：

```
+(NSMutableData *)createPDFDatafromUIView:(UIView*)aView 
{
    // Creates a mutable data object for updating with binary data, like a byte array
    NSMutableData *pdfData = [NSMutableData data];

    // Points the pdf converter to the mutable data object and to the UIView to be converted
    UIGraphicsBeginPDFContextToData(pdfData, aView.bounds, nil);
    UIGraphicsBeginPDFPage();
    CGContextRef pdfContext = UIGraphicsGetCurrentContext();

    // draws rect to the view and thus this is captured by UIGraphicsBeginPDFContextToData

    [aView.layer renderInContext:pdfContext];

    // remove PDF rendering context
    UIGraphicsEndPDFContext();

    return pdfData;
}

+(NSString*)createPDFfromUIView:(UIView*)aView saveToFilepath:(NSString*)filepath
{
    // Creates a mutable data object for updating with binary data, like a byte array
    NSMutableData *pdfData = [AppGraphics createPDFDatafromUIView:aView];

    // instructs the mutable data object to write its context to a file on disk
    [pdfData writeToFile:filepath atomically:YES];
    DLog(@"saving PDF to: %@",filepath);
    DLog(@"file exists: %@",[[NSFileManager defaultManager] fileExistsAtPath:filepath]?@"YES":@"NO");
    return filepath;
} 
```

这是我用来将多个 PDF 连接在一起的方法

```
+ (NSString *)joinPDF:(NSArray *)listOfPaths saveToPath:(NSString*)path
{

    CFURLRef pdfURLOutput = (  CFURLRef)CFBridgingRetain([NSURL fileURLWithPath:path]);

    NSInteger numberOfPages = 0;
    // Create the output context
    CGContextRef writeContext = CGPDFContextCreateWithURL(pdfURLOutput, NULL, NULL);

    for (NSString *source in listOfPaths) {
        CFURLRef pdfURL = (  CFURLRef)CFBridgingRetain([[NSURL alloc] initFileURLWithPath:source]);

        //file ref
        CGPDFDocumentRef pdfRef = CGPDFDocumentCreateWithURL((CFURLRef) pdfURL);
        numberOfPages = CGPDFDocumentGetNumberOfPages(pdfRef);

        // Loop variables
        CGPDFPageRef page;
        CGRect mediaBox;

        // Read the first PDF and generate the output pages
        DLog(@"GENERATING PAGES FROM PDF 1 (%@)...", source);
        for (int i=1; i<=numberOfPages; i++) {
            page = CGPDFDocumentGetPage(pdfRef, i);
            mediaBox = CGPDFPageGetBoxRect(page, kCGPDFMediaBox);
            CGContextBeginPage(writeContext, &mediaBox);
            CGContextDrawPDFPage(writeContext, page);
            CGContextEndPage(writeContext);
        }

        CGPDFDocumentRelease(pdfRef);
        CFRelease(pdfURL);
    }
    CFRelease(pdfURLOutput);

    // Finalize the output file
    CGPDFContextClose(writeContext);
    CGContextRelease(writeContext);

    return path;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T14:48:56.040

The solution was indeed to render the image as JPG within the PDF context. The resulting compressed PDF size is smaller - around 300-400kb per page!

```
//aView is used for its bounds property
//screenshot is the screenshot of the view within its bounds
//compression quality 0.55 is 380kb/page 0.66 is 450kb/page
+(NSString*)createPDFDataFromUIView:(UIView*)aView withScreenshot:(UIImage*)screenshot compressionQuality:(float)compression writeToFile:(NSString*)filepath
{

    //prepare JPEG data for rendering into PDF content
    NSData *jpegData = UIImageJPEGRepresentation(screenshot, compression);
    CGDataProviderRef dp = CGDataProviderCreateWithCFData((__bridge CFDataRef)jpegData);
    CGImageRef cgImage = CGImageCreateWithJPEGDataProvider(dp, NULL, true, kCGRenderingIntentDefault);

    NSMutableData *pdfData = [NSMutableData data];

    // Points the pdf converter to the mutable data object and to the UIView to be converted
    UIGraphicsBeginPDFContextToData(pdfData, aView.bounds, nil);
    UIGraphicsBeginPDFPage();
    CGContextRef pdfContext = UIGraphicsGetCurrentContext();

    // draws rect to the view and thus this is captured by UIGraphicsBeginPDFContextToData

    //we need to change the coordinate system, otherwise the image is drawn upside down
    CGContextTranslateCTM(pdfContext, 0, aView.bounds.size.height);
    CGContextScaleCTM(pdfContext, 1.0, -1.0);

    //this creates pixels within PDF context
    CGContextDrawImage(pdfContext, aView.bounds, cgImage);

    // remove PDF rendering context
    UIGraphicsEndPDFContext();

    [pdfData writeToFile:filepath atomically:YES];

    //memory cleanup
    CGDataProviderRelease(dp);
    CGImageRelease(cgImage);
    return filepath;

} 
```

# javascript - 如何使用javascript重定向页面

> ID：16127977
> 
> 赞同：0
> 
> 时间：2013-04-21T04:27:36.823
> 
> 标签：javascript, web

我遇到了页面重定向问题。我有一段代码在执行的某个阶段假设将页面重定向到其他地址。但由于某种原因，它没有。

由于某些原因，我必须使用 javascript，这是我使用的代码：

```
window.location.assign("http://www.myaddress.com") 
```

完整代码：

```
<head runat="server">
<title>try mail</title>

<script type="text/javascript">
    function openWin() {
        myWindow = window.open('myaddressgoeshere', '', 'width=600,height=400');
        myWindow.focus();
    } 
```

```
<body>
<form id="form1" runat="server">
<div>
<table width="300px" border="0" cellpadding="0" cellspacing="0">
<tr>
<td> <img src="imagesNew/mail.jpg" width="75" height="52"/></td>
<td>&nbsp;</td>
</tr>
<tr>
<td colspan="2">&nbsp;</td>
</tr>
<tr>
<td colspan="2" align="center"><div id="signin"></div></td>
</tr>
</table>

</div>
</form>

<script type="text/javascript" language="javascript">
    scope = ["wl.signin", "wl.basic", "wl.offline_access", "wl.emails", ],

function id(domId) {
    return document.getElementById(domId);
}

WL.Event.subscribe("auth.sessionChange",
    function (e) {
        if (e.session) {
            displayMe();
            authLogin();  
        }
        else {
            clearMe();
        }
    }
);

function authLogin(e) {
    if (e.status == 'connected') {
        WL.Event.unsubscribe("auth.login", authLogin);
        window.location.assign("http://www.hotmail.com");
        WinJS.Navigation.navigate('files.html');

    } 
}

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T04:38:37.767

它需要在`script`标签中

```
<html>
<head>
<script>
function newPage()
  {
  window.location.assign("http://www.example.com")
  }
</script>
</head>
<body>

<input type="button" value="click" onclick="newPage()">

</body>
</html> 
```

[http://jsfiddle.net/DpwnF/](http://jsfiddle.net/DpwnF/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T04:39:49.007

您不必使用 javascript。您可以使用一个`meta`元素：

```
<meta http-equiv="refresh" content="0; url='http://www.myaddress.com/'"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T04:33:59.233

document.location = "www.google.es"

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T04:41:28.997

您的 javascript 行没有错误。我认为你在其他地方有问题。请参考[此链接](http://www.w3schools.com/jsref/met_loc_assign.asp)。

# python - 无法从python访问mysql数据库

> ID：16127979
> 
> 赞同：4
> 
> 时间：2013-04-21T04:27:55.637
> 
> 标签：python, mysql, mysql-python

我尝试通过python访问mysql数据库中的数据然后我尝试了

```
import MySQLdb

db = MySQLdb.connect(host = "127.0.0.1",
                     port = 3306,
                      user="Bishnu",
                      password = "Pulchowk",
                      db = "telecom_db")
cursor =db.cursor()
cursor.execute("select * from profile")
numrows = int(cursor.rowcount)
for x in range(numrows):
    row = cursor.fetchone()
    #if (row):
    print row[0], row[1]

cursor.close()

db.cose() 
```

然后它显示错误

```
Traceback (most recent call last):
  File "D:\Bishnu\BE\4th year\7th semester\Major Project I\Workspace\Bishnuji\default\first.py", line 43, in <module>
    db = "telecom_db")
  File "C:\Python27\lib\site-packages\MySQLdb\__init__.py", line 81, in Connect
    return Connection(*args, **kwargs)
  File "C:\Python27\lib\site-packages\MySQLdb\connections.py", line 187, in __init__
    super(Connection, self).__init__(*args, **kwargs2)
TypeError: 'password' is an invalid keyword argument for this function 
```

然后我也尝试删除密码

```
import MySQLdb

db = MySQLdb.connect(host = "127.0.0.1",
                     port = 3306,
                      user="Bishnu",
                      #password = "Pulchowk",
                      db = "telecom_db")
cursor =db.cursor()
cursor.execute("select * from profile")
numrows = int(cursor.rowcount)
for x in range(numrows):
    row = cursor.fetchone()
    #if (row):
    print row[0], row[1]

cursor.close()

db.cose() 
```

仍然显示错误

```
Traceback (most recent call last):
  File "D:\Bishnu\BE\4th year\7th semester\Major Project I\Workspace\Bishnuji\default\first.py", line 43, in <module>
    db = "telecom_db")
  File "C:\Python27\lib\site-packages\MySQLdb\__init__.py", line 81, in Connect
    return Connection(*args, **kwargs)
  File "C:\Python27\lib\site-packages\MySQLdb\connections.py", line 187, in __init__
    super(Connection, self).__init__(*args, **kwargs2)
_mysql_exceptions.OperationalError: (1044, "Access denied for user ''@'localhost' to database 'telecom_db'") 
```

可能是什么解决方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-21T04:36:00.077

从[文档](http://mysql-python.sourceforge.net/MySQLdb.html)看来，参数的正确命名是`passwd`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T02:55:45.837

检查您是否在数据库上设置了密码。通常用户名和密码不会更改，默认用户名 = 'root'，密码填充为空，即密码 = ''。如果您设置了密码并忘记了密码，那么您可以按照[如何找回我的 MySQL 用户名和密码？](https://stackoverflow.com/questions/4371/how-do-i-retrieve-my-mysql-username-and-password)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-27T07:03:34.367

请使用卸载命令卸载并重新安装 mysqlclient

```
pip uninstall mysqlclient 
```

安装

```
pip install mysqlclient 
```

# javascript - 什么是 JavaScript AST，如何使用它？

> ID：16127985
> 
> 赞同：61
> 
> 时间：2013-04-21T04:28:46.667
> 
> 标签：javascript, abstract-syntax-tree

抽象语法树.. 我总是听说在 Github 上编译为 SpiderMonkey AST。
那么，这是 JS 语法树的实际标准吗？还有 V8，V8 使用的是同一种 AST 吗？

我该怎么玩呢？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2015-04-13T05:35:25.150

1.你可以看看[AST explorer](https://astexplorer.net/)。一个在线工具，用于探索由 10 多个解析器生成的 AST。它是学习一门语言的 AST 树的好工具。
[Github.com 上的 AST 资源管理器](https://github.com/fkling/astexplorer)。

[![在此处输入图像描述](https://i.stack.imgur.com/ICwGH.png)](https://i.stack.imgur.com/ICwGH.png)

* * *

2.您也可以将您的js代码粘贴到[JavaScript AST可视化](http://jointjs.com/demos/javascript-ast)工具中，然后单击“show ast”按钮，您将看到AST。

演示js代码：

```
function foo(d) {
  d += 3;
    return d+999
}
function bar(d) {
    return d*100
} 
```

![js ast 演示](https://i.stack.imgur.com/A9SZd.png)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-04-21T04:36:37.887

SpiderMonkey 提供[解析器 api](https://developer.mozilla.org/en-US/docs/SpiderMonkey/Parser_API)。这可能是掌握语法对象的最简单方法。

还有像[Esprima这样的开放式](http://esprima.org/)*js-js*解析器（实际上是 ECMAScript，但它就在小巷里）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-02-14T09:42:26.063

抽象语法树 (AST)，是程序源代码的树形表示。

有几个 JavaScript`AST`标准：

*   [estree](https://github.com/estree/estree) - EcmaScript AST 的标准；
*   [shift](https://shift-ast.org/) - 设计时考虑了转换，[与 estree 不兼容](https://blog.shapesecurity.com/2015/01/06/a-technical-comparison-of-the-shift-and-spidermonkey-ast-formats/)；
*   [babel](https://github.com/babel/babel/blob/main/packages/babel-parser/ast/spec.md) - 支持尚未成为标准但有[提案](https://github.com/tc39/proposals)的语言功能。

以下是 JavaScript 解析器列表：

*   [esprima](https://esprima.org)是第一个
*   [橡子](https://github.com/acornjs/acorn)非常受欢迎，快速且稳定
*   [espree](https://github.com/eslint/espree)基于`acorn`，用在[eslint](https://eslint.org)中；
*   [@babel/parser](https://babeljs.io/docs/en/babel-parser)基于`acorn`，支持所有新的语言特性
*   [shfit-ast 解析器](https://shift-ast.org/parser.html)产生`Shift AST`
*   [typescript](https://github.com/Microsoft/TypeScript/wiki/Using-the-Compiler-API)可以解析 JavaScript 和 TypeScript，为此生成它自己的 AST 格式

[您可以在astexplorer.net](https://astexplorer.net/)上找到更多解析器，其中大多数是`estree`兼容的。

虽然大多数支持的解析器`estree`可以很容易地相互替换，但它们`babel`具有非常广泛的基础设施，可以轻松使用`AST`. 它有：

*   描述所有工具及其使用方法的[手册。](https://github.com/jamiebuilds/babel-handbook/blob/master/translations/en/plugin-handbook.md)
*   [@babel/traverse](https://babeljs.io/docs/en/babel-traverse.html) - 维护整体树状态，负责替换、移除、添加节点；
*   [@babel/template](https://babeljs.io/docs/en/babel-template)`AST` -从字符串创建 -node 的最简单方法。
*   [@babel/types](https://babeljs.io/docs/en/babel-types) - 包含`AST`-nodes 的构建器和检查器。

最简单的方法之一`AST`是使用[putout](https://github.com/coderaiser/putout)，它基于并支持借助[插件 API](https://github.com/coderaiser/putout#plugins-api)`babel`转换代码的简化方法。`JavaScript`

这是删除`DebuggerStatement`节点的示例：

```
module.exports.replace = () => ({
    'debugger': '',
}); 
```

如果你想切换变量的位置，改变声明的方式：

```
module.exports.replace = () => ({
    'let __a = __b': 'const __b = __a'
}); 
```

如果您想将此代码转换为`return x[0]`：

```
for (const x of y) {
    return x;
} 
```

您可以使用：

```
module.exports.replace = () => ({
    'for (const __a of __b) {return __a}': 'return __a[0]',
}); 
```

在您的帮助下，`putout`您可以进行最简单的`JavaScript`代码转换，而无需直接处理`AST`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-25T12:11:51.933

如果你想试试 Marijnh 教授的 acron 解析器 [https://github.com/marijnh](https://github.com/marijnh)试试这个链接：[https ://astexplorer.net/](https://astexplorer.net/)

这是一个小巧、快速的 JavaScript 解析器，完全用 JavaScript 编写。

上面提到的[JavaScript AST 可视化](http://jointjs.com/demos/javascript-ast)器使用了 Esprima 引擎，并且也是用 JavaScrpt 编写的。

JavaScript 在解析 AST 方面占主导地位，因为如今 JavaScript 引擎已经超级优化。[https://en.wikipedia.org/wiki/JavaScript_engine](https://en.wikipedia.org/wiki/JavaScript_engine)

> JS语法树的SpiderMonkey AST标准？V8 使用的是同一种 AST 吗？

这两个 Web 浏览器引擎都具有用 C++ 编写的内部 AST 处理。这就是为什么 JavaScrpt 代码在大多数情况下都能快速运行的原因，除了`eval`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-13T10:51:03.840

我只知道一种 Javascript AST 规范：[https ://github.com/estree/estree](https://github.com/estree/estree)

它起源于 Mozilla 的 Dave Herman 的出版物，并从那时起演变为社区标准。所以它应该在某种程度上与 SpiderMonkey 匹配，但我不确定 V8 和 JSC。

如果有人可以提供有关此事的更多信息，将不胜感激。

# javascript - TypeError：无法调用未定义的方法“toFixed”，JavaScript 错误

> ID：16127987
> 
> 赞同：0
> 
> 时间：2013-04-21T04:29:04.147
> 
> 标签：javascript

我正在参加在线编码课程，但我不断收到此错误：

```
Line 18, TypeError: Cannot call method 'toFixed' of undefined 
```

不知道出了什么问题。这是完整的代码：

```
//Calculate the area of a rectangle
function calculateArea(length, width) {
  return length * width;
}

function calculateTileCount(tileWidth,length,width)
{
  var tileArea = tileWidth * tileWidth
  var tileCount = calculateArea(length, width) / tileArea;
}

var bathroom1 = calculateTileCount(0.3, 5, 3);
var bathroom2 = calculateTileCount(0.3, 6.5, 3.5);
var bathroom3 = calculateTileCount(0.45, 9, 4);
var bathroom4 = calculateTileCount(0.45, 11, 4);

console.log('Bathroom Tiling' +
  '\nBathroom 1: ' + bathroom1.toFixed(0) +
  '\nBathroom 2: ' + bathroom2.toFixed(0) +
  '\nBathroom 3: ' + bathroom3.toFixed(0) +
  '\nBathroom 4: ' + bathroom4.toFixed(0)); 
```

非常感谢任何帮助，-摩根

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T04:32:15.880

你应该`return tileCount;`

```
function calculateTileCount(tileWidth,length,width)
{
  var tileArea = tileWidth * tileWidth
  var tileCount = calculateArea(length, width) / tileArea;
  return tileCount;
} 
```

请参阅[jsFiddle](http://jsfiddle.net/XFYRv/)。

# java - Google Calendar API v3 抓取即将发生的事件

> ID：16127989
> 
> 赞同：1
> 
> 时间：2013-04-21T04:29:16.977
> 
> 标签：java, google-calendar-api

我想制作一个 API 请求来获取日历上的下一个事件。

我找到了 v2 的指南，但现在已弃用。在此处的文档中：[https://developers.google.com/google-apps/calendar/v3/reference/events/get](https://developers.google.com/google-apps/calendar/v3/reference/events/get)，

似乎我需要某种事件 ID。我正在考虑获取整个事件列表，然后按日期排序。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:47:36.713

是的，您将需要一个事件 ID 来获取特定事件。

但是，就像您提到的那样，您可以列出特定时间段的事件。

对于列表中返回的每个事件，您将获得几乎相同的信息（和事件资源）。

但是您需要某种起始参考来获得“下一个”事件。因此，假设您有一个事件 ID 开始（或其他可用于标识事件 ID 的东西），当所有资源按日期排序时，抓取“下一个”事件将是下一个列出的事件资源。

巧妙的是，您可以让列表事件 API 返回按开始时间排序的事件（注意，我没有使用过这个，但假设它有效）。

[https://developers.google.com/google-apps/calendar/v3/reference/events/list](https://developers.google.com/google-apps/calendar/v3/reference/events/list)

请参阅可选的 orderBy 值。

# cocos2d-iphone - Cocos2d 2.1 AWTextureFilter 仅模糊部分纹理

> ID：16127991
> 
> 赞同：0
> 
> 时间：2013-04-21T04:30:00.130
> 
> 标签：cocos2d-iphone, blur

我使用 Cocos2d 2.0 和 AWTextureFilter。我需要模糊纹理。这是我的代码：

```
//Create mutable texture
CCTexture2DMutable *texture = [[CCTexture2DMutable alloc] initWithCGImage:[UIImage imageNamed:@"image.png"].CGImage resolutionType:kCCResolutionUnknown];

//Apply blur to the mutable texture
[AWTextureFilter blur:texture radius:10 rect:CGRectMake(0, 0, texture.contentSize.width, texture.contentSize.height)];

//Create sprites to show the textures
CCSprite *sprite = [CCSprite spriteWithTexture:texture];
sprite.position = ccp(winSize.width/2, winSize.height/2);
[layer addChild:sprite]; 
```

但结果我得到的精灵只有部分模糊（截图）：http: [//img62.imageshack.us/img62/182/blura.png](http://img62.imageshack.us/img62/182/blura.png)

为什么这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:23:54.897

我猜你必须将它与内容比例因子相乘，因为纹理内容大小以点为单位，而不是像素。

```
CGSize size = texture.contentSize;
CGRect rect = CGRectMake(0, 0, 
                         size.width * CC_CONTENT_SCALE_FACTOR(), 
                         size.height * CC_CONTENT_SCALE_FACTOR());
[AWTextureFilter blur:texture radius:10 rect:rect]; 
```

# r - 将所有列标题转换为 R 中的回归器

> ID：16127993
> 
> 赞同：1
> 
> 时间：2013-04-21T04:30:11.597
> 
> 标签：r, regression, multiple-columns

我对 R 完全陌生，想将我的数据集中的每个列标签（标题？）变成一个回归量，而不必一次定义每个回归量，即 date -> data$Date

有没有办法一次完成这一切？

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T05:03:00.000

这是你想要的吗：

```
R > data(iris)
R > head(iris)
  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa
R > lm(Sepal.Length ~ ., data = iris)

Call:
lm(formula = Sepal.Length ~ ., data = iris)

Coefficients:
      (Intercept)        Sepal.Width       Petal.Length        Petal.Width
           2.1713             0.4959             0.8292            -0.3152
Speciesversicolor   Speciesvirginica
          -0.7236            -1.0235 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T05:10:27.857

如果要选择特定列，可以使用：

数据`sample.data`带有因变量，`col 3`并且`cols 1, 2, 4:8`是自变量

```
 yy<-lm(as.formula(paste(colnames(sample.data)[3], "~",paste(colnames(sample.data)[c(1, 2,4:8)], collapse = "+"), sep = "")), data=sample.data)
    )
 summary(yy) 
```

# git - 将 svn 工作副本合并到 git 工作副本中，反之亦然？

> ID：16127997
> 
> 赞同：1
> 
> 时间：2013-04-21T04:30:53.423
> 
> 标签：git, svn, tortoisesvn, smartgit

情况要求我在 git repo 上对自己的工作进行版本控制，而项目的“主干”在 svn repo 上，这意味着我需要定期更新我的 svn 工作副本并将其修订合并到我的 git 工作副本中，反之亦然. 在 svn 和 git 中有没有简单的方法来做到这一点？我目前使用 SmartGit 和 TortiseSVN 作为客户端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T04:33:50.987

是的，使用`git svn`. 查看[手册页](https://www.kernel.org/pub/software/scm/git/docs/git-svn.html)以获取更多详细信息，但基本思想是使用 克隆`svn`存储库，然后使用和`git svn clone`保持所有内容处于最新状态。`git svn rebase``git svn dcommit`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T11:30:52.010

使用 SmartGit/Hg 克隆存储库。根据 URL，它会立即识别出它是一个 SVN 存储库，或者它会询问您。在这种情况下，选择**SVN**。生成的克隆类似于使用*git-svn*时得到的克隆，但是 SmartGit 的功能要强大得多：

[http://www.syntevo.com/smartgithg/svn-tour.html](http://www.syntevo.com/smartgithg/svn-tour.html)

[http://www.syntevo.com/smartgithg/documentation.html?page=concepts-svn](http://www.syntevo.com/smartgithg/documentation.html?page=concepts-svn)

# sql - 如何从 SQL 中与用户相关的两个表中查询数据？

> ID：16127998
> 
> 赞同：0
> 
> 时间：2013-04-21T04:31:15.500
> 
> 标签：sql

我有 3 个表，其中包含有关用户、产品和类别的相关信息

```
Users
--------------
id (PK) |   user
--------------
1       Jessy
2       Emily
3       John

Products
--------------------------------------
id | user_id (FK) |  product   
--------------------------------------
1     1           iPhone
2     1           Galaxy S
3     1           xbox
4     2           PS5
5     2           MPhone
6     1           XPhone
7     3           PS3

Cateogories
---------------------------------------
id  | product_id(FK)| cateogy
---------------------------------------
1       1               Phone
2       7               Gaming Console
3       4               Gaming Console
4       5               Phone
5       2               Phone
6       3               Gaming Console
7       6               Phone 
```

伙计们，我如何使用sql获取属于该用户的类别的产品，如下所示？

```
Product List of Jessy
------
Phone
------
iPhone
Galaxy S
X Phone

------------
Gaming Console
------------
xbox 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:17:23.750

你可以通过加入三个表来做到这一点。以下内连接解释示例可能会对您有所帮助。

[http://www.codecandle.com/Articles/399/SQL/JOINS/INNER-JOIN/codedetail.aspx](http://www.codecandle.com/Articles/399/SQL/JOINS/INNER-JOIN/codedetail.aspx)

您需要在上面的示例中为您的类别表再添加一个内部连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T04:38:33.500

您可以加入这些表以获得所需的结果。

```
select u.user, p.product, c.category
from Users u, Products p, Category c
where u.id = p.user_id
and p.id = c.product_id
and u.user = 'Jessy' 
```

# jquery - Bootstrap/jQuery 事件绑定问题

> ID：16127999
> 
> 赞同：0
> 
> 时间：2013-04-21T04:31:16.683
> 
> 标签：jquery, twitter-bootstrap, jquery-events

我正在当前项目上实现 Twitter Bootstrap，并且在`$(document)`. 他们基本上被忽略了。如果我将它们绑定到`$("body")`，它们可以正常工作——在一定程度上。

这是HTML：

```
<div class="dropdown">
<a class="dropdown-toggle" data-toggle="dropdown" href="#">Menu</a>
<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
    <li><a href="/edit_status/1174" data-toggle="modal"><i class="icon-pencil"></i>  Change Status</a></li> 
```

这是JS：

```
$(function() {
    $("body").on("click", "a[data-toggle=modal]", on_click_data_toggle);
function on_click_data_toggle(e){
    e.preventDefault();
    var url = $(e.currentTarget).attr('href');
    if (url.indexOf('#') == 0) {
        $(url).modal('open');
    } else {
        $.ajax({
            url: url,
            success: function(data){
                if(data.length > 0)
                {
                    $('<div class="modal hide fade">' + data + '</div>').modal();
                }
            },
            error: function(){
            }
        });
    }
} 
```

当事件通过“body”绑定时，除了控制台不断显示以下错误外，它可以工作：

> 未捕获的错误：语法错误，无法识别的表达式：/edit_status/1348

代码执行得很好，但它让我觉得还有其他问题会导致该`$(document).on`方法也不起作用。

我读过 Javascript 错误通常意味着存在选择器问题，但代码确实执行了，所以我完全糊涂了。

任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:51:48.177

查看[quirks mode](http://www.quirksmode.org/js/events_order.html#link7)以了解事件如何冒泡到文档的说明。在所有条件相同的情况下，文档单击处理程序应该可以工作（请参阅this [fiddle](http://jsfiddle.net/shiftyp/Mhwth/)）。如果子节点（在本例中为主体）上的单击处理程序停止事件传播，则不会发生这种情况。我的猜测是您正在使用的插件之一就是这样做的。尝试在文档上使用单击处理程序制作页面（或使用我的小提琴），并逐个添加插件以查看导致问题的原因。

```
$(document).click(function(){
    alert('You clicked me!');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T04:43:37.397

不确定您是否有更多未显示的 jQuery 代码，但如果没有，则单击委托和就绪委托都缺少右括号和括号。我还将您的函数移动为匿名函数：

```
$(function() {
    $("body").on("click", "a[data-toggle=modal]", function(e){

        e.preventDefault();

        var url = $(this).attr('href');

        if (url.indexOf('#') == 0) {
            $(url).modal('open');
        } else {
            $.ajax({
                url: url,
                success: function(data){
                    if(data.length > 0)
                    {
                        $('<div class="modal hide fade">' + data + '</div>').modal();
                    }
                },
                error: function(){
                }
            });
        }
    });
}); 
```

快速浏览一下，这应该有效。使用这样的匿名函数（在委托中）可以更清楚`this`地指向什么（在这种情况下，是触发点击事件的锚点）。

**FWIW**，模态插件确实有一个`remote`选项，它可能会完成与您在这里尝试做的相同的结果：http: [//twitter.github.io/bootstrap/javascript.html#modals](http://twitter.github.io/bootstrap/javascript.html#modals)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-24T07:31:09.820

此错误是由于使用 bootstrap 的切换模型属性打开模型弹出窗口，而不是在 mvc 操作链接或 htnl 页面中使用此代码而不使用任何类。如果您有任何建议而不是给我发邮件：vishalroxx7@gmail。 com

```
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title"></h4>

            </div>
            <div class="modal-body"><div class="te">Please wait...</div></div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                @*<button type="button" class="btn btn-primary">Save changes</button>*@
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->

    $(document).ready(function () {
      //  $('.dialog-window').attr("data-target", "#myModal"); // this is used when you oen a single link on a page 
        //   $('.dialog-window').attr("data-toggle", "modal"); /// this is used to attache dyanaic call to anchor tag or action link 

        $("body").on("click", "a.dialog-window", null, function (e)
        {              
            e.preventDefault();

            var $link = $(this); // Reference to <a/> link
            var title = $link.text();// this is title to fetch in htnl    
            $('#myModal .modal-title').html(title);

            var url = $(this).attr('href');
            if (url.indexOf('#') == 0) {
                $('#myModal').modal('show');
            }
            else
            {

                $.get(url, function (data) {
                    $('#myModal .te').html(data);
                    $('#myModal').modal();
                }).success(function () { $('input:text:visible:first').focus(); });

            }

        });
    });

</script> 
```