# StackOverflow 问答 15930000-15930999

# css - 下载 Google 字体并设置使用它的离线站点

> ID：15930003
> 
> 赞同：157
> 
> 时间：2013-04-10T15:22:28.123
> 
> 标签：css, fonts, offline, google-fonts

我有一个模板，它引用了这样的 Google 字体：

```
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,400,600,300' rel='stylesheet' type='text/css'> 
```

如何下载它并将其设置为在我一直离线运行的页面中使用？

* * *

## 回答 #1

> 赞同：368
> 
> 时间：2014-12-29T21:42:39.917

## 查看[**google webfonts 助手**](https://google-webfonts-helper.herokuapp.com/)

它可以让你下载谷歌的每一种网络字体，并为实现建议 css 代码。该工具还允许您轻松地一次下载所有格式。

> 想知道 Google 在哪里托管他们的网络字体吗？如果您想直接从 google 下载字体变体的所有 .eot、.woff、.woff2、.svg、.ttf 文件（通常您的用户代理会确定最佳格式），此服务可能会很方便。

也看看他们的[Github 页面](https://github.com/majodev/google-webfonts-helper)。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2013-04-10T15:33:56.357

只需转到 Google 字体 - [http://www.google.com/fonts/](http://www.google.com/fonts/)，将您喜欢的字体添加到您的收藏中，然后按下载按钮。然后只需使用@fontface 将此字体连接到您的网页。顺便说一句，如果你打开你正在使用的链接，你会看到一个使用 @fontface 的例子

```
http://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,400,600,300 
```

举个例子

```
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 300;
  src: local('Open Sans Light'), local('OpenSans-Light'), url(http://themes.googleusercontent.com/static/fonts/opensans/v6/DXI1ORHCpsQm3Vp6mXoaTaRDOzjiPcYnFooOUGCOsRk.woff) format('woff');
} 
```

只需将 url 地址更改为已下载的字体文件上的本地链接。

你可以更容易地做到这一点。

只需下载文件，您已链接：

```
http://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,400,600,300 
```

将其命名为 opensans.css 左右。

然后只需将 url() 中的链接更改为字体文件的路径。

然后将您的示例字符串替换为：

```
<link href='opensans.css' rel='stylesheet' type='text/css'> 
```

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2013-09-06T00:34:02.483

找到了实现此目标的分步方法（对于 1 种字体）：（
*截至**2013 年 9 月 9 日**）*

> 1.  [在http://www.google.com/fonts](http://www.google.com/fonts)选择您的字体
> 2.  使用“添加到收藏”蓝色按钮将所需的一个添加到您的收藏中
> 3.  单击“从集合中删除”按钮附近的“查看所有样式”按钮，并确保您选择了您可能还需要的其他样式，例如“粗体”...
> 4.  点击页面右下角的“使用”标签按钮
> 5.  单击顶部带有向下箭头图像的下载按钮
> 6.  在出现的弹出消息中单击“zip 文件”
> 7.  点击弹出窗口中的“关闭”按钮
> 8.  慢慢滚动页面，直到看到 3 个选项卡“Standrd|@import|Javascript”
> 9.  单击“@import”选项卡
> 10.  选择并复制 和 之间的`'url('`url`')'`
> 11.  将其复制到新选项卡的地址栏上并转到那里
> 12.  执行“文件 > 将页面另存为...”并将其命名为“desiredfontname.css”（相应替换）
> 13.  解压您下载的字体 .zip 文件（应解压 .ttf）
> 14.  转到“ [http://ttf2woff.com/](http://ttf2woff.com/) ”并将从 zip 中提取的任何 .ttf 转换为 .woff
> 15.  使用您在 ttf2woff.com 上获得的相应转换后的 .woff 文件编辑`desiredfontname.css`并替换其中的任何 url [介于`'url('`和]；`')'`你写的路径应该根据你的服务器 doc_root
> 16.  保存文件并将其移动到最终位置并编写相应的`<link/>`CSS 标签以将这些标签导入您的 HTML 页面
> 17.  `font-family`从现在开始，在你的样式中通过它的名字来引用这个字体

就是这样。*因为我遇到了同样的问题，上面的解决方案对我不起作用。*

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2014-03-02T23:16:52.387

其他答案没有错，但我发现这是最快的方法。

1.  从 Google 字体下载 zip 文件并解压缩。
2.  一次将 3 个字体文件上传到[http://www.fontsquirrel.com/tools/webfont-generator](http://www.fontsquirrel.com/tools/webfont-generator)
3.  下载结果。

**结果包含所有字体格式：woff、svg、ttf、eot**。

并且作为额外的奖励，他们也会为您生成 css 文件！

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-11-25T18:41:56.840

如果您想明确声明您的包依赖项或自动下载，您可以添加一个 npm 包来拉入 google 字体并在本地提供服务。

### 字体源

[Fontsource](https://github.com/fontsource/fontsource)允许您：

> 整齐捆绑的 NPM 包中的自托管开源字体。

您可以搜索 npm以浏览可用的字体，例如[@fontsource/roboto](https://www.npmjs.com/package/@fontsource/roboto)或[@fontsource/open-sans](https://www.npmjs.com/package/@fontsource/open-sans)并像这样安装：[`scope:fontsource <*typefacename*>`](https://www.npmjs.com/search?q=scope%3Afontsource)

```
$ npm install @fontsource/roboto    --save 
$ npm install @fontsource/open-sans --save 
```

### 字体下载器

对于更通用的用例，有几个 npm 包将分两步提供字体，首先是安装库，然后将其指向您想要包含的字体名称和选项。

*   [谷歌字体 Webpack 插件](https://www.npmjs.com/package/google-fonts-webpack-plugin)
*   [谷歌字体离线](https://www.npmjs.com/package/google-fonts-offline)
*   [谷歌字体](https://www.npmjs.com/package/google-fonts)
*   [获取谷歌字体](https://www.npmjs.com/package/get-google-fonts)

### 延伸阅读：

*   [如何离线托管素材图标？](https://stackoverflow.com/q/37270835/1366033)
*   [在 Electron 应用中使用离线 Material 图标和 Roboto 字体](https://medium.com/@daddycat/using-offline-material-icons-and-roboto-font-in-electron-app-f25082447443)
*   **归档**：[字体](https://github.com/KyleAMathews/typefaces)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-09-08T20:49:19.700

3个步骤：

1.  在 Goole Fonts 上下载您的自定义字体并下载 .css 文件，例如：下载[http://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,400,600,300](http://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,400,600,300) 并另存为**example.css**
2.  打开您下载的文件（**example.css**）。现在您必须下载所有字体文件并将它们保存在**字体**目录中。
3.  编辑**example.css**：将所有字体文件替换为您的 .css 下载

前任：

```
@font-face {
  font-family: 'Open Sans';
  font-style: italic;
  font-weight: 400;
  src: local('Open Sans Italic'), local('OpenSans-Italic'), url(http://fonts.gstatic.com/s/opensans/v14/xjAJXh38I15wypJXxuGMBvZraR2Tg8w2lzm7kLNL0-w.woff2) format('woff2');
  unicode-range: U+0460-052F, U+20B4, U+2DE0-2DFF, U+A640-A69F;
}
```

查看 src: -> url。下载[http://fonts.gstatic.com/s/opensans/v14/xjAJXh38I15wypJXxuGMBvZraR2Tg8w2lzm7kLNL0-w.woff2](http://fonts.gstatic.com/s/opensans/v14/xjAJXh38I15wypJXxuGMBvZraR2Tg8w2lzm7kLNL0-w.woff2)并保存到**字体**目录。之后将 url 更改为所有下载的文件。现在它看起来像

```
@font-face {
  font-family: 'Open Sans';
  font-style: italic;
  font-weight: 400;
  src: local('Open Sans Italic'), local('OpenSans-Italic'), url(fonts/xjAJXh38I15wypJXxuGMBvZraR2Tg8w2lzm7kLNL0-w.woff2) format('woff2');
  unicode-range: U+0460-052F, U+20B4, U+2DE0-2DFF, U+A640-A69F;
}
```

** 下载所有包含 .css 文件的字体希望对您有所帮助

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-04-10T15:27:22.497

本质上，您将字体包含到您的项目中。

```
@font-face {
font-family: 'Open Sans';
font-style: normal;
font-weight: normal;
src: url('path/to/OpenSans.eot');
src: local('Open Sans'), local('OpenSans'), url('path/to/OpenSans.ttf') format('truetype'); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-04-10T15:29:21.233

使用 Google 字体时，您的工作流程分为 3 个步骤：“选择”、“自定义”、“嵌入”。如果您仔细观察，在“使用”页面的右端，有一个小箭头，可以让您下载当前收藏中的字体。

![](https://i.stack.imgur.com/TGU4k.png)

之后，一旦在系统上安装了字体，您只需像使用任何其他常规字体一样使用`font-family`CSS 指令即可。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-03-26T05:28:28.253

1）去谷歌字体

2）选择你的字体，它是一种风格

3）然后你会得到一个链接标签，链接的一侧点击导入

4.  复制其存在于 URL（'此处'）中的链接并将其粘贴到浏览器搜索栏上。

5.  然后你会得到这样的东西

6.  然后下载它并将其保存在您的项目文件所在的位置！

7) 然后将其包含在您的 HTML 链接标签中或将其导入您的 CSS 文件 ( [https://i.stack.imgur.com/NvJ60.jpg](https://i.stack.imgur.com/NvJ60.jpg) ) ( [https://i.stack.imgur.com/XwK0l. .jpg](https://i.stack.imgur.com/XwK0l.jpg) )

8）然后使用谷歌字体中提到的ton族

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-04-15T04:00:27.043

我按照[duydb 的](https://stackoverflow.com/users/7590912/duydb)回答生成了下面的 python 代码来自动化这个过程。

```
import requests

with open("example.css", "r") as f:
    text = f.read()
    urls = re.findall(r'(https?://[^\)]+)', text)

for url in urls:
    filename = url.split("/")[-1]
    r = requests.get(url)
    with open("./fonts/" + filename, "wb") as f: 
        f.write(r.content)
    text = text.replace(url, "/fonts/" + filename)

with open("example.css", "w") as f:
        f.write(text) 
```

希望这有助于一些复制粘贴的死亡。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-04-10T15:30:34.387

您需要下载字体并在本地引用它。

从您发布的链接下载`CSS`，然后下载所有`WOFF`文件并（如果需要）将它们转换为`TTF`.

然后`CSS`从您发布的链接中更改以在本地包含字体。

从

```
url(http://themes.googleusercontent.com/static/fonts/opensans/v6/
DXI1ORHCpsQm3Vp6mXoaTXhCUOGz7vYGh680lGh-uXM.woff) 
```

到

```
url(/path/to/font/font.woff) 
```

瞧！您可能还需要做一些其他事情，但以上是基础知识。[这篇文章](http://ruel.me/blog/2011/02/03/using-google-fonts-locally/)解释得好一点。

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2015-01-03T14:38:53.943

只需下载字体并将其解压缩到文件夹中即可。然后链接该字体。下面的代码对我有用。

```
body { 
  color: #000; 
  font-family:'Open Sans';
  src:url(../../font/Open_Sans/OpenSans-Light.ttf); 
} 
```

# ios - didUpdateLocations 可以超时吗？

> ID：15930011
> 
> 赞同：0
> 
> 时间：2013-04-10T15:22:46.963
> 
> 标签：ios, core-location

可以说我已经打开了所有东西，WIFI、GPS 和 CELL。然而，我在一个地铁里，每个人都被封锁了。

如果我执行 startUpdatingLocation，会有超时消息吗？它会从哪里来？

（注意：我相信它会向我发送一个以前已知的位置，但如果这是我第一次打开一切怎么办？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:17:51.617

当你第一次发送`startUpdatingLocation`你的委托时，你会得到一个带有缓存位置的回调。由于它的[年龄](https://stackoverflow.com/a/3098788/1693173)，你可以告诉它一个缓存的位置。然后，一旦它从 Cell、WiFI 和/或 GPS 获得修复，您将获得额外的更新。如果它从未得到修复，您将`didFailWithError:`在几分钟后收到消息。但是，我认为一旦你得到了至少一个修复，如果你以后进入地铁丢失 GPS/WiFi/Cell 信号，你就不会收到错误。

# linux - dup2 真的可以返回 EINTR 吗？

> ID：15930013
> 
> 赞同：5
> 
> 时间：2013-04-10T15:22:48.877
> 
> 标签：linux, posix, freebsd, language-lawyer, file-descriptor

在规范和两个实现中：

*   根据 POSIX，`dup2()`可能会返回 EINTR。
*   linux 手册页将其列为允许的。
*   FreeBSD 手册页表明它从未返回。这是一个错误吗 - 因为它的紧密实现可以 EINTR（至少对于 TCP 徘徊，如果没有别的）。

实际上，Linux 可以返回 EINTR`dup2()`吗？据推测，如果是这样，那将是因为`close()`决定等待并且信号到达（TCP 逗留或在关闭时尝试同步的狡猾的文件系统驱动程序）。

实际上，FreeBSD 是否保证不返回 EINTR `dup2()`？在这种情况下，它一定不会费心等待旧 fd 上的任何未完成的操作，而是简单地取消链接 fd。

[当POSIX`dup2()`](http://pubs.opengroup.org/onlinepubs/9699919799/)指的是“关闭”（不是斜体）而不是引用实际函数时，它是什么意思`close()`- 我们是否理解它只是以非正式的方式“关闭”它（取消链接文件描述符），还是它试图说效果应该就像`close()`函数首先被调用然后`dup2()`被原子调用一样。

> 如果*fildes2*已经是有效的打开文件描述符，则应首先将其关闭，除非*fildes*等于*fildes2*在这种情况下*dup2()*应返回*fildes2*而不关闭它。

如果`dup2()` *确实*必须关闭，等待，然后以原子方式复制，这对实现者来说将是一场噩梦！`close()`这比惨败的 EINTR 要糟糕得多。懦弱的 POSIX 甚至没有说在 EINTR 的情况下是否发生了重复......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:46:09.057

以下是 C/POSIX 库文档中关于标准 Linux 实现的相关信息：

```
 If OLD and NEW are different numbers, and OLD is a valid
 descriptor number, then `dup2' is equivalent to:

      close (NEW);
      fcntl (OLD, F_DUPFD, NEW)

 However, `dup2' does this atomically; there is no instant in the
 middle of calling `dup2' at which NEW is closed and not yet a
 duplicate of OLD. 
```

它列出了`dup`和`dup2`作为`EBADF`、`EINVAL`和的可能返回的错误值`EMFILE`，而没有其他值。该文档指出，所有可以返回 EINTR 的函数都按此类列出，这表明这些函数没有。请注意，这些是通过 实现`fcntl`的，而不是对 的调用`close`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-28T18:00:09.107

8 years later this still seems to be undocumented. I looked at the linux sources and my conclusion is that `dup2` can't return `EINTR` in a current version of Linux.

In particular, the function `do_dup2` in [fs/file.c](https://github.com/torvalds/linux/blob/v5.15/fs/file.c#L1032) ignores the return value of `filp_close`, which is what can cause `close` to return `EINTR` in some cases (see [fs/open.c](https://github.com/torvalds/linux/blob/v5.15/fs/open.c#L1325) and [fs/file.c](https://github.com/torvalds/linux/blob/v5.15/fs/file.c#L633)).

The way dup2 works is it first makes the atomic file descriptor update, and then waits for any flushing that needs to happen on close. Any errors happening on flush are simply ignored.

# python - Python 中的函数在返回后如何记住它的值？

> ID：15930015
> 
> 赞同：11
> 
> 时间：2013-04-10T15:22:52.097
> 
> 标签：python

警告：极端新手问题

我似乎一直在将函数视为食谱。在我的世界里，程序是一个食谱盒，一些食谱（功能）调用其他食谱（其他功能）。处理器通过将指令写入 RAM 并处理它们来开始执行主配方。比如早餐薄饼。你叫 Julia Childs 的早餐薄饼食谱。你必须做一次可丽饼面糊。然后，当你还有可丽饼面糊时，你会反复制作可丽饼。同时，您可以制作各种水果制品。

好吧，我显然不明白。我刚刚通过 pythontutor.com 运行 python wiki 解决方案来解决 Project Euler [Problem 2](https://projecteuler.net/problem=2)（偶数斐波那契数小于 400 万的总和）。我认为我发生了一些事情。似乎每次你想出一个食谱时，你不只是使用相同的处理器，你会得到一个带有一些罐子的侏儒来处理那个功能。罐子是变量，gnome 计算出他的配方，如果调用函数期望返回值，则 gnome 将这些罐子的内容显示给调用者。然后调用者可能会返回，找出更多的东西，并向他的调用者显示返回值。

假设 Al 打电话给 Bob 做薄饼。鲍勃做了面糊并叫查理做饭。查理做了一个可丽饼，把可丽饼端给鲍勃，鲍勃把它给了艾尔，然后又回到查理身边。谁还在！艾尔不知道鲍勃把查理藏在厨房里，但即使在查理做了第一个可丽饼之后，他仍然在厨房里，知道如何制作可丽饼，并且知道他还剩下多少可丽饼面糊。即使他已经退回了第一个可丽饼。

有人可以帮我解决这个问题吗？

这是来自 Python wiki 的代码

```
 def fib():
    x,y = 0,1
    while True:
        yield x
        x,y = y, x+y

def even(seq):
    for number in seq:
        if not number % 2:
            yield number

def under_a_million(seq):
    for number in seq:
        if number > 1000000:
            break
        yield number   

print sum(even(under_a_million(fib()))) 
```

这是[http://pythontutor.com/visualize.html](http://pythontutor.com/visualize.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:43:25.767

一个简化的答案。

如果您有一个生成一系列值的函数，您可以`generator`使用 yield 将其转换为 a。

```
def func():
    for i in range(3):
        yield i

list(func()) ==> [0,1,2]

for el in func():
    print(el) # 0
              # 1
              # 2 
```

每次调用 yield 时，函数都会在某处冻结。当它再次被调用时，它会从他的最后一个状态继续，并且不会重新开始（除非它已经完成了元素的消耗）。

如果你调用这个函数，你会得到一个`generator`，这是你可以迭代的东西。

请注意，这种方式可以迭代无限序列，而无需使用无限内存。

```
def inf():
    x = -1
    while True:
        x = x + 1
        yield x

for i in inf():
    if i < 10:
        print(i)
    else:
        break 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T15:29:11.100

这是因为这些*函数*不是函数，而是[生成器](http://www.python.org/dev/peps/pep-0255/)。该`yield`语句返回一个值，但不从函数返回。每次调用`next`生成器时，它都会从上次调用开始继续执行生成器，直到`yield`再次到达语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T15:31:33.547

原则上，您的第一个假设是正确的：函数的变量仅在函数执行时可用。但是，在您的情况下，您正在使用该`yield`语句。结果，函数调用返回一个迭代器，该迭代器在调用时返回下一条`yield`语句的值。

查看[这篇文章](https://stackoverflow.com/questions/231767/the-python-yield-keyword-explained)以获得关于迭代器是什么和做什么的进一步解释。

# html - 将随机查询字符串值附加到图像 URL 不会刷新它

> ID：15930026
> 
> 赞同：1
> 
> 时间：2013-04-10T15:23:15.647
> 
> 标签：html, caching, iis-7, webserver

我们有一个基于网络的闭路电视系统——每台摄像机实际上就像一个网络服务器，您只需浏览到一个 URL 即可查看摄像机的图像。

我编写了一个简单的 HTML 页面，将每个相机的图像“聚合”到一个页面上。我每隔几秒钟使用 javascript 将一个随机查询字符串值附加到每个图像 URL 上，从而强制刷新图像。URL 可能如下所示：

`http://192.168.50.100/camera1/current.jpg?rand=324923`

从内部网络查看此 HTML 页面时，一切正常。

现在，我还在我们的 DMZ 上创建了页面的“外部”版本，因此管理人员可以在场外查看 CCTV。除了图像 URL 之外，HTML 与“内部”页面相同，如下所示：-

`http://foo.com:1234/camera1/current.jpg?rand=...`

每个摄像头都有不同的端口号，所以我假设 IT 人员正在使用某种端口转发。当您查看此页面时，最初会显示摄像机图像，但不会刷新。在某些情况下，它会显示几秒钟甚至几分钟前捕获的图像。使用 Chrome 的 F12 功能，我可以看到图像 URL 中的随机数发生变化，所以我知道 javascript 正在工作。

知道为什么这个外部页面不刷新吗？似乎有些东西正在提供缓存的图像，而忽略了不断变化的查询字符串（整个问题应该是请求未缓存的版本）。

# facebook - 如何检查访问者是否喜欢我的 Facebook 粉丝专页。私人网站不是 facebook iframe 标签

> ID：15930027
> 
> 赞同：0
> 
> 时间：2013-04-10T15:23:16.573
> 
> 标签：facebook, facebook-like, facebook-page

是否可以检查我的私人网站的访问者是否喜欢我的 Facebook 粉丝专页？我发现了很多 Facebook Iframe-Tabs 的帖子，但不是私人网站所有者的帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:03:15.917

必须有user_likes权限，才能查询用户已有的like。

然后使用 javascript sdk 你可以通过这样做来实现它：

```
function isPageLiked(YOUR_VALID_TOKEN) {
    token = YOUR_VALID_TOKEN;
    FB.api('/me/likes/YOUR_PAGE_ID', function(response) {
        if(response.data.length){
            //the user likes your page do something here
        }
    }, {access_token: token});

} 
```

# web-services - 在 Spring Web 服务的 XSD 文件中更改请求元素的名称

> ID：15930028
> 
> 赞同：1
> 
> 时间：2013-04-10T15:23:17.073
> 
> 标签：web-services, spring, xsd, wsdl

我有一个带有名为 TestMethod 的方法的 Web 服务。

在 XSD 文件上，我有这个：

```
<element name="TestMethodResponse">
    <complexType>
        <sequence>
            <element name="codRta" type="int" />
        </sequence>
    </complexType>
</element>  
<element name="TestMethodRequest">
    <complexType>
        <sequence>
        </sequence>
    </complexType>
</element> 
```

如您所见，有一个 TestMethodRequest 和 TestMethodResponse

这个工作OK！

现在，我需要做出一些改变。

此 Web 服务将用于替换另一个 Web 服务。

所以我需要在我的 Web 服务上调用与旧的方法相同的方法。

那是因为我的客户有一个桌面应用程序（使用较旧的 Web 服务）正在工作，当然，不想更改它。

我的问题是旧 Web 服务的 WSDL。

如果您看到 WSDL，则“TestMethod”方法没有 TestMethodRequest 元素。它有一个“TestMethod”元素（没有请求部分）。

有可能这样做吗？我能怎么做？

如何更改 XSD 以将请求元素命名为“TestMethod”而不是“TestMethodRequest”？（并保持 Web 服务正常工作）

感谢并为我糟糕的英语感到抱歉

# powershell - PowerShell 中函数调用的条件

> ID：15930038
> 
> 赞同：13
> 
> 时间：2013-04-10T15:23:48.740
> 
> 标签：powershell

这种语言真的很奇怪。我正在尝试执行一个函数并将其结果值用作条件。这是我的代码：

```
function Get-Platform()
{
    # Determine current Windows architecture (32/64 bit)
    if ([System.Environment]::GetEnvironmentVariable("ProgramFiles(x86)") -ne $null)
    {
        echo "x64"
        return "x64"
    }
    else
    {
        echo "x86"
        return "x86"
    }
}

if (Get-Platform -eq "x64")
{
    echo "64 bit platform"
}
if (Get-Platform -eq "x86")
{
    echo "32 bit platform"
} 
```

预期的输出是这样的：

```
x64
64 bit platform 
```

但实际输出是这样的：

```
64 bit platform
32 bit platform 
```

这里发生了什么？如何解决这个问题？我在网络上找不到任何在`if`条件内使用函数的示例。这在 Powershell 中是否可行？我在没有特殊设置的 Windows 7 上，所以我有任何 PS 版本。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-10T17:40:05.817

如果要在条件中比较函数的返回值，则必须将函数调用分组（即放在括号中）或（如[@FlorianGerhardt](https://stackoverflow.com/a/15930202/1630171)建议的那样）将函数的返回值分配给变量并在有条件的。否则，比较运算符和另一个操作数将作为参数传递给函数（在您的情况下，它们会被默默地丢弃）。然后，您的函数返回一个既不是也不是也不是的结果`""`，`0`因此`$null`它的计算结果为`$true`，从而导致显示两条消息。

这应该做你想要的：

```
...
if ( (Get-Platform) -eq 'x64' ) {
  echo "64 bit platform"
}
... 
```

顺便说一句，您应该避免`if`对互斥的条件使用单独的语句。对于平台检查`if..then..elseif`

```
$platform = Get-Platform
if ($platform -eq "x64") {
  ...
} elseif ($platform -eq "x86") {
  ...
} 
```

或`switch`声明

```
Switch (Get-Platform) {
  "x86" { ... }
  "x64" { ... }
} 
```

会更合适。

我也会避免在函数内部回显。只需返回该值并使用返回的值执行任何可能需要的回显。函数内部回显的任何内容也将返回给调用者。

最后一点：我个人宁愿不依赖特定文件夹或环境变量的存在来确定操作系统架构。使用 WMI 完成这项任务让我更加可靠：

```
function Get-Platform {
  return (gwmi Win32_OperatingSystem).OSArchitecture
} 
```

此函数将返回一个字符串`"32-Bit"`或`"64-Bit"`，具体取决于操作系统架构。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T15:30:52.687

我认为您正在比较一个函数而不是函数结果。不知何故，回声在函数中也无法按预期工作。我通常使用 Write-Host。

这是我对您的问题的解决方案：

```
function Get-Platform()
{
    # Determine current Windows architecture (32/64 bit)
    if ([System.Environment]::GetEnvironmentVariable("ProgramFiles(x86)") -ne $null)
    {
        Write-Host("x64")
        return "x64"
    }
    else
    {
        Write-Host("x86")
        return "x86"
    }
}

$platform = Get-Platform

if ($platform -eq 'x64')
{
    echo "64 bit platform"
}

if ($platform -eq 'x86')
{
    echo "32 bit platform"
} 
```

# asp.net-mvc - 正则表达式数据注释：匹配所有非 HTML 标记内容的正则表达式

> ID：15930043
> 
> 赞同：0
> 
> 时间：2013-04-10T15:24:06.813
> 
> 标签：asp.net-mvc, regex, regex-negation, data-annotations

需要对*文本框进行客户端不显眼的验证，*以警告用户他键入了无效符号。我想在数据注释中使用正则表达式，如下所示：

```
[Required]
[Display(Name = "RecordBody", ResourceType = typeof(Resources))]
[RegularExpression(@"(\<(/?[^\>]+)\>)", ErrorMessageResourceType = typeof(ValidationErrors), ErrorMessageResourceName = "DisallowHtml")]
[StringLength(8191, ErrorMessageResourceType = typeof(ValidationErrors), ErrorMessageResourceName = "TooLongEntry")]
public string Description { get; set; } 
```

服务器端使用正则表达式来验证用户输入，并在 Javascript 正则表达式中用于客户端：

```
<textarea cols="20" data-val="true" data-val-disallowhtml="Поле Текст записи содержит недопустимые символы" data-val-disallowhtml-pattern="(\<(/?[^\>]+)\>)" data-val-length="Введено слишком много символов. Допустимо: 8191" data-val-length-max="8191" data-val-required="Требуется поле Текст записи." id="Description" name="Description" rows="2"></textarea> 
```

`(\<(/?[^\>]+)\>)`不起作用，因为它只匹配 html 标签。我需要一个匹配所有不是 HTML 标记的内容的正则表达式。换句话说，否定整个正则表达式。

这是一个工作示例[http://cafuego.net/2011/11/15/html-and-regular-expressions](http://cafuego.net/2011/11/15/html-and-regular-expressions)。但我想`(?<=^|>)([^><]+?)(?=<|$)`它只适用于 php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:55:39.073

Based on one of your comments, you should be able to use a lookahead assertion to search for any tags; if one is found, then the assertion will fail, and the error message should be displayed.

e.g.

```
[RegularExpression(@"^(?![^<]*<[^>]+>).*$", ... 
```

# windows-phone-7 - 更改 LongListSelector 的 ListFooterTemplate 的内容

> ID：15930044
> 
> 赞同：0
> 
> 时间：2013-04-10T15:24:10.980
> 
> 标签：windows-phone-7, xaml

跟进这个问题的答案：[在 ListBox 的末尾添加一个加载更多按钮而不丢失虚拟化？](https://stackoverflow.com/questions/8489508/add-a-load-more-button-at-the-end-of-listbox-without-losing-virtualization/15929639#15929639)

有了这个例子：

```
<toolkit:LongListSelector ItemsSource="{Binding Items}">
<toolkit:LongListSelector.ListFooter>
<Grid>
    <Button x:Name="btnReadMore" Content="ReadMore"/>
</Grid>
</toolkit:LongListSelector.ListFooter> 
```

有没有办法通过 C# 更改他的内容？(= "ReadMore" 并且当 itemsource=0 "go back") 谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:49:07.747

您可以将属性的值绑定`Content`到某个 ViewModel 属性。这是恕我直言的最佳方式：

您还可以将该`Command`属性绑定到某个 ViewModel 命令，这将确保您正确设置标题并处理结果。

但请注意，您不应该有一个显示“返回”的按钮，当按下该按钮时，它会充当硬件返回按钮。你不应该模拟这样的系统功能。

# math - 如何找到几何路线中的最短距离？

> ID：15930049
> 
> 赞同：0
> 
> 时间：2013-04-10T15:24:27.543
> 
> 标签：math, geometry

![在此处输入图像描述](https://i.stack.imgur.com/wxfml.png)

这里黑点画了一条线，它可能有n个点，我的问题是找到绿点和线之间的最短距离（不是黑点）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:29:40.947

线和点之间的距离已经回答： [点和线段之间的最短距离](https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment)

您只需要添加另一部分来循环所有线段并找到最短的线段。

# vba - 为什么 ADO VBA 代码只返回 6559 条记录？

> ID：15930050
> 
> 赞同：0
> 
> 时间：2013-04-10T15:24:29.310
> 
> 标签：vba, ado, adodb

我尝试使用 ADO 库制作与 sql 语句一起操作的宏，但实际上它只返回 6559 条记录，而我的一张表有 72k 条记录。为什么？

最近，我注意到，实际上我的代码并没有返回 6559，而是返回行数 - 65537。所以当我将工作表中的行数减少到 72092 时，我什至会得到更少的行数（6550）。

我注意到的另一件事是 rs.RecordCount 返回“-1”。

这是我的子程序的代码。它具有三个参数：sql 语句（sqlstmt）、目标工作表名称（sheet_name）和目标范围（destination1）。

```
'subprocedure that execute sql statements and save resault in given worksheet
    Public Sub sql_query(ByVal sqlstmt As String, ByVal sheet_name As String, ByVal destination1 As String)

        Dim conn As ADODB.Connection
        Dim rs As ADODB.Recordset
        Dim connstring As String
        Dim qt As QueryTable
        Dim tw_path As String
        Dim is_name As Boolean
        Dim sh As Worksheet

        '''making sheet if it doesn't exist
        is_name = False
        For Each sh In ThisWorkbook.Worksheets
            If sh.Name = sheet_name Then is_name = True
        Next
        If is_name = False Then ThisWorkbook.Worksheets.Add(After:=ThisWorkbook.Worksheets(ThisWorkbook.Worksheets.Count)).Name = sheet_name

        ''' connection
        tw_path = ThisWorkbook.path & "\" & ThisWorkbook.Name
        connstring = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & tw_path & ";Extended Properties=Excel 8.0;Persist Security Info=False"

        Set conn = New ADODB.Connection
        conn.ConnectionString = connstring
        conn.Open

        '''executing statement
        Set rs = New ADODB.Recordset
        rs.Source = sqlstmt
        rs.ActiveConnection = conn
        rs.Open

        '''saving records
        ThisWorkbook.Worksheets(sheet_name).Activate
        Set qt = Worksheets(sheet_name).QueryTables.Add(Connection:=rs, Destination:=Range(destination1))
        qt.Refresh

        '''end
        If rs.State <> adStateClosed Then rs.Close
        conn.Close
        If Not rs Is Nothing Then Set rs = Nothing
        If Not conn Is Nothing Then Set conn = Nothing
        Set qt = Nothing

        End Sub 
```

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T05:01:27.520

我猜您使用的是 excel 2003 或以前的版本，在这种情况下，工作表最多有 65,536 行。我会把它放在评论而不是答案中，但我还差 1 个代表能够发表评论:(。对不起

# javascript - 是否可以在不附加“.js”扩展名的情况下在 Dojo 中加载脚本

> ID：15930051
> 
> 赞同：2
> 
> 时间：2013-04-10T15:24:29.983
> 
> 标签：javascript, dojo

我需要从我一直在创建的一些模块中加载文件，但 dojo 加载程序不断添加“.js”扩展名。

我一直在使用类似的东西：

```
require(["dojo/ready","some/module"], function( ready, app ) {
        ready( function( ) {

            app.something();

        } );
    }); 
```

但它一直在加载 module.js，我想要类似`url/some/module`.

我发现使用类似“ `some/module?noext`”的东西可以工作，但是没有一些配置选项吗？

对于 RequestJs 和解决它的插件，我已经看到类似的问题（[https://github.com/millermedeiros/requirejs-plugins](https://github.com/millermedeiros/requirejs-plugins)）。

那么是否可以防止dojo添加de js扩展（后缀）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T00:57:48.607

对的，这是可能的。添加`dojo/text!.`之前`some/module`（包括感叹号和点字符），如下面的代码所示。我特意在下面的示例中保留了一个 php 目标，以证明它也可以是动态源：

```
require(["dojo/ready","dojo/text!.myPHPFiles/somePhpFile.php"], function( ready, app ) {
    ready( function( ) {

        app.something();

    } );
}); 
```

我不确定这是否允许结果中的任何 JS 代码可执行（在您上面的示例中`app.something()`可能无法执行）。您可能需要测试和确认。但是，这对于加载动态内容（例如 JSON 数据）以用作 FilteringSelect 等小部件的 DataStore 非常有用。

我回答这个问题是为了帮助其他开发人员解决类似的问题，尽管您的问题是在一段时间前发布的。

# vb.net - list.sort，但 groupby 结束数字

> ID：15930052
> 
> 赞同：4
> 
> 时间：2013-04-10T15:24:32.220
> 
> 标签：vb.net

我有一个我想按最后两个结尾数字分组的项目列表，所以：

```
127658
012345
123456
123457
123458
012345 
```

将排序为：

```
012345
012345
123456
123457
123458
127658 
```

这是如何通过重载 list.sort 来实现的？输出与 excel 自动过滤器“ENDS WITH 00”非常相似

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:39:07.763

不需要过载。只需使用 lambda：

```
list.OrderBy(Function(n) Cint(n.toString().Substring(n.toString().Length-2))).
     ThenBy(Function(n) n) 
```

这是一个非常完美的解决方案。

* * *

正如**Steven Doggart**指出的那样，您可以检查小于 2 位的数字：

```
list.OrderBy(Function(n) Cint(n.toString().
             Substring(n.toString().Length - Math.Min(n.ToString().Length, 2)))).
     ThenBy(Function(n) n) 
```

* * *

或者，甚至简单，使用**MarcinJuraszek**的部分答案：

```
list.OrderBy(Function(n) n Mod 100).ThenBy(Function(n) n) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:34:33.323

看起来很容易。比较功能：

```
Public Shared Function CompareByLastTwo(x As Integer, y As Integer) As Integer
    Return (x Mod 100).CompareTo(y Mod 100)
End Function 
```

和用法：

```
Dim items as List(Of Integer)

(...)

items.Sort(CompareByLastTwo) 
```

我以为你的物品是`Integer`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:37:50.243

这应该有效（假设 a `List(Of String)`）：

```
list = list.Select(Function(num) New With {
               .Num = num,
               .LastTwo = If(num.Length < 2, num, num.Substring(num.Length - 2))
           }).
        OrderBy(Function(x) x.LastTwo).
        ThenBy(Function(x) x.Num).
        Select(Function(x) x.Num).ToList() 
```

如果是`List(Of Int32)`相同的方法：

```
intList = intList.
    Select(Function(num) New With {.Num = num, .Str = num.ToString()}).
    Select(Function(x) New With {
        x.Num,
        x.Str,
        .LastTwo = If(x.Str.Length < 2, x.Str, x.Str.Substring(x.Str.Length - 2))
    }).
    OrderBy(Function(x) x.LastTwo).
    ThenBy(Function(x) x.Num).
    Select(Function(x) x.Num).ToList() 
```

# javascript - 内存泄漏 - Javascript/jquery 和 canvas

> ID：15930057
> 
> 赞同：0
> 
> 时间：2013-04-10T15:24:41.690
> 
> 标签：javascript, jquery, memory, canvas, memory-leaks

我遇到了一个严重的问题，关于帆布旋转木马。作为第一个 html/canvas/javascript 方法，我决定尝试为自己制作一些图片轮播。

你可以在这里找到它，在我主页[http://www.wizopunk-art.com](http://www.wizopunk-art.com)的每个页面上， 我停用了轮播，所以只是...

```
var wizopunk = new backroundViewer("backgroundCanv"); 
```

..在你的控制台某处

正如您可能马上感觉到的那样，动画效果不是很有效.. 似乎我有某种内存泄漏，但我自己无法找到它.. 我希望您可能有一些提示，比如有用工具，或者即使有人想看看我自己的脚本。我的印象是，我在画布上绘制的每张图片都保存在内存中。

这里是脚本的链接：http: [//www.wizopunk-art.com/javascript/carousel.js](http://www.wizopunk-art.com/javascript/carousel.js)

我不知道我的描述是否足够准确，我也不想打扰或其他什么..所以请告诉我我是否在我的信息中遗漏了什么

PS：对不起我的英语不好..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:36:37.227

首先...创建渲染循环的更好方法是使用`requestAnimationFrame`而不是`setInterval`. 另一件事是首先在后台渲染所有内容。在这里，您可以找到很多关于使用 canvas 元素进行开发的性能技巧。（[http://www.html5rocks.com/en/tutorials/canvas/performance/](http://www.html5rocks.com/en/tutorials/canvas/performance/)）

# java - 显示 java JTable 中的特定行

> ID：15930063
> 
> 赞同：0
> 
> 时间：2013-04-10T15:24:51.707
> 
> 标签：java, swing, jtable, rowfilter

我有一个 Java 表并且`TableModel.each row(element)`有一个 ID。我想显示特定的 ID。如何过滤这些元素？可以更改选定的 ID。

例如：

```
public class L {
int id;
String name;
String family;
}

//----

private static final String[] columnNames = { "name","family"};
private static final Class[] columnClasses = {class.String.class,String.Class};
private Vector<L> list = Vector<L>();

list.add(new L(1,"A","b"));
.
.
.
list.add(new L(100,"AB","aa"); 
```

我想显示具有此 ID 的元素，例如 {1 39 45 55 22}。

如何过滤这些 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:35:23.120

您可以使用 RowFilter 和 TableRowSorter 来做到这一点：

```
final int[] ids = new int[]{1, 39, 45, 55, 22};
RowFilter<Object, Object> filter = new RowFilter<Object, Object>() {
  public boolean include(Entry entry) {
    L currentObject = (L) (entry.getValue(0));
    for(int i=0;i<ids.length;i++){
        if(currentObject.getId()==ids[i]){
            return true;
        }
    }
    return false;
  }
};

TableRowSorter<TableModel> sorter = new TableRowSorter<TableModel>(model);
sorter.setRowFilter(filter);
yourTable.setRowSorter(sorter); 
```

经测试，对我有用

希望这可以帮助

# oop - 面向对象的设计模式查询

> ID：15930067
> 
> 赞同：3
> 
> 时间：2013-04-10T15:25:00.393
> 
> 标签：oop, design-patterns, ooad

我经历了关于 SO 的不同问题，并试图找出设计应用程序的最佳方法。我发现某处写着如果类的对象有这个状态，我们应该制作[它](https://stackoverflow.com/questions/2541139/best-practice-for-utilities-class)。

我在同一页面上发现应该避免使用实用程序，所以我的问题是如何实现该功能。我们不能创建对象，因为功能可以有也不能有状态。我们也不能使用静态方法。那么如何。

PS----我的问题可能是外行，因为我是新手，试图学习/实现设计模式，所以如果有人可以为我提供阅读材料，链接与示例，我会很高兴。

我在理论上知道一点设计模式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T01:16:51.113

您正在阅读指南并将它们视为授权，这使您无法使用过于严格的规则进行编码。

指导方针就是指导方针，仅此而已。如果不使用实用程序类是个好主意，那么就不要经常使用它们。在有意义的地方谨慎使用它们。

如果使用一些全局变量是一个坏主意（而且确实如此），那么不要经常这样做。但是，如果您需要一个静态助手类，其中包含一个或两个可用于应用程序的变量，那么在这种情况下执行此操作。

不要将指导方针视为法律。将它们视为指导方针，并在合理时反对它们。您只能通过编程获得这些知识。所以开始做吧，犯错误，从中吸取教训，并在你前进的过程中改进你的代码。你不会从一开始就完美地完成它。

# c# - 以赢取形式显示无效数据的图表

> ID：15930076
> 
> 赞同：1
> 
> 时间：2013-04-10T15:25:19.427
> 
> 标签：c#, mschart

我希望有人可以帮助我理解这个图表行为。基于下面的 XML

```
<ChartData>
 <ChartData Count="157">
  <Year>2012</Year> 
  <MonthString>April</MonthString> 
  <Month>4</Month> 
  </ChartData>
 <ChartData Count="196">
  <Year>2012</Year> 
  <MonthString>May</MonthString> 
  <Month>5</Month> 
  </ChartData>
 <ChartData Count="181">
  <Year>2012</Year> 
  <MonthString>June</MonthString> 
  <Month>6</Month> 
  </ChartData>
 <ChartData Count="222">
  <Year>2012</Year> 
  <MonthString>July</MonthString> 
  <Month>7</Month> 
  </ChartData>
 <ChartData Count="261">
  <Year>2012</Year> 
  <MonthString>August</MonthString> 
  <Month>8</Month> 
  </ChartData>
 <ChartData Count="163">
  <Year>2012</Year> 
  <MonthString>September</MonthString> 
  <Month>9</Month> 
  </ChartData>
 <ChartData Count="161">
  <Year>2012</Year> 
  <MonthString>October</MonthString> 
  <Month>10</Month> 
  </ChartData>
 <ChartData Count="181">
  <Year>2012</Year> 
  <MonthString>November</MonthString> 
  <Month>11</Month> 
  </ChartData>
 <ChartData Count="184">
  <Year>2012</Year> 
  <MonthString>December</MonthString> 
  <Month>12</Month> 
  </ChartData>
 <ChartData Count="227">
  <Year>2013</Year> 
  <MonthString>January</MonthString> 
  <Month>1</Month> 
  </ChartData>
 <ChartData Count="194">
  <Year>2013</Year> 
  <MonthString>February</MonthString> 
  <Month>2</Month> 
  </ChartData>
 <ChartData Count="177">
  <Year>2013</Year> 
  <MonthString>March</MonthString> 
  <Month>3</Month> 
  </ChartData>
 <ChartData Count="74">
  <Year>2013</Year> 
  <MonthString>April</MonthString> 
  <Month>4</Month> 
  </ChartData>
  </ChartData> 
```

到这个 C# 图表代码

```
 chart1.ChartAreas["ChartArea1"].AxisX.Interval = 1;
                    chart1.ChartAreas["ChartArea1"].AxisX.LabelStyle.Interval = 1;

                    chart1.Series["Series1"].IsVisibleInLegend = false;
                   chart1.Series["Series1"].Font = new
                   System.Drawing.Font("Arial", 10.0F, System.Drawing.FontStyle.Italic);

                    chart1.Series[0].IsValueShownAsLabel = true;
                    chart1.Series["Series1"].ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.FastLine;
                    chart1.DataBindCrossTable(chartgrouped, "Year", "MonthString", "Count", ""); 
```

当我查看图表时，我看到了两个不同的问题。

1.  该图表并未显示所有月份。
2.  该图表不正确地表示数据，它显示了 2003 年的数据

这是我用来查询数据并获取 XML 的查询

```
 var chartgrouped = (from x in data  group x by new { x.DateOpened.Month, x.DateOpened.Year } into g
            select new ChartData
                                {
                                    Year = g.Key.Year,
                                    Month = g.Key.Month,
                                    MonthString = string.Format("{0}",
                                    CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(g.Key.Month)),
                                    Count = g.Count()
                               }) .ToList(); 
```

这是我得到的屏幕截图 ![在此处输入图像描述](https://i.stack.imgur.com/5XVDL.png)

# haskell - Netwire 中的跳跃机制

> ID：15930082
> 
> 赞同：2
> 
> 时间：2013-04-10T15:25:33.320
> 
> 标签：haskell, reactive-programming, frp, arrows, netwire

我想我需要一些激励来了解如何制作这个，我在一般平台游戏机制方面并没有真正的经验......

无论如何，我的玩家身材到现在为止是这样的：

```
movePlayer = proc p -> do
    let gravity = 100
    sx <- keySpeed GLFW.LEFT GLFW.RIGHT 500 -< ()
    dy <- integralLim_ collision 0 -< (gravity, p)
    dx <- integralLim_ collision 0 -< (sx, p)
    returnA -< (sx, sy)
    where
        keySpeed k1 k2 s = onKey k1 (-s) <|> onKey k2 s <|> pure 0
        collision = undefined -- collision with the world 
```

随着`gravity`，玩家对象慢慢下落，直到有东西可以站立。当然，下一步是在`sin`曲线中添加跳跃……添加它的简单方法是什么`netwire`？还可以添加进一步的碰撞检测吗？

我只是不知道从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:59:33.083

首先请注意，积分适用于元组：

```
(x, y) <- integralLim_ f (x0, y0) -< ((dx, dy), w) 
```

现在考虑重力是一个加速度值。您可以轻松地将其添加到其他加速度值：

```
gravity = pure (0, -9.8)
jump    = pure (0, 1000) . holdFor 0.1 (keyPressed space) <|> pure (0, 0)

pos = integralLim_ collision p0 . integral_ v0 . (gravity ^+^ jump) 
```

其中`p0`是初始位置和`v0`初始速度。

# css - 样式 div（带有特定标签），没有类或 id

> ID：15930084
> 
> 赞同：2
> 
> 时间：2013-04-10T15:25:41.370
> 
> 标签：css, attributes

我喜欢这个 div，它没有`ID`或`CLASS`属性：

```
<div data-placement="kolp">
blabla
</div> 
```

如何在我的 CSS 中定位它？也许需要一些 javascript 帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:27:49.560

你可以试试这个：

```
.container > div {
 /* targets your div if it's a direct child of container */
}

.container div {
 /* targets any div that is inside container */
}

div[data-placement=kolp] {
  /* targets any div with the attribute data-placement=kolp */
} 
```

在这里摆弄：http: [//jsfiddle.net/JUP87/](http://jsfiddle.net/JUP87/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T15:28:59.777

您可以使用属性选择器：

```
div[data-placement] {
    /* selects all div elements with the 'data-placement' attribute */
}

/* or */

div[data-placement="kolp"] {
    /* selects all div elements with the 'data-placement' attribute which is equal to 'kolp' */
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/hHWs3/)。

参考：

*   [CSS 选择器，第 3 级](http://www.w3.org/TR/css3-selectors/#selectors)。

# c# - C# OleDb Oracle 函数和表类型

> ID：15930088
> 
> 赞同：0
> 
> 时间：2013-04-10T15:25:50.677
> 
> 标签：c#, function, oracle11g, oledb, oledbdatareader

我正在尝试调用一个 Oracle 函数，该函数返回一个封装在表中的类型

类型对象

```
create or replace
type Z_TBL_STRUCTURE_CODE
AS OBJECT
(
    PROJ_ID varchar2(50 BYTE)
); 
```

类型表

```
create or replace
type Z_TABLE_STRUCTURE_CODE AS TABLE of Z_TBL_STRUCTURE_CODE; 
```

甲骨文功能

```
create or replace
FUNCTION Z_TESTE_IN_FUNC
(
    var_teste in varchar2
)
return Z_TABLE_STRUCTURE_CODE
AS
tab Z_TABLE_STRUCTURE_CODE;
BEGIN
  EXECUTE IMMEDIATE
    'SELECT 
    CAST(
    MULTISET(
      select count(*) into num from structure 
      where structure_code in ('|| var_teste ||')) as Z_TABLE_STRUCTURE_CODE)
    into tab
    from dual;';
  dbms_output.put_line(var_teste);
  return tab;
 END Z_TESTE_IN_FUNC; 
```

注意：请忽略立即执行，它只是为了测试。

注意 2：我知道有一个避免类型的选项（使用光标），但我还不能理解这个主题，所以我会要求你在回答时忽略光标，除非它是唯一可用的选项。

C# 代码

```
public DataTable getTaskStartFinish()
{
    OleDbConnection con = null;
    OleDbDataReader reader = null;
    try{
        con = new OleDbConnection(ConfigurationManager.ConnectionStrings["OracleBD"].ConnectionString);

        OleDbCommand cmd = new OleDbCommand("", con);
        cmd.CommandText = "Z_TESTE_IN_FUNC";
        cmd.CommandType = CommandType.StoredProcedure;

        OleDbParameter retval = new OleDbParameter("retval", OleDbType.VarChar, 10);
        retval.Direction = ParameterDirection.ReturnValue;

        OleDbParameter inval = new OleDbParameter("inval", OleDbType.Variant, 50);
        inval.Direction = ParameterDirection.Input;
        inval.Value = "1";

        cmd.Parameters.Add(retval);
        cmd.Parameters.Add(inval);
        con.Open();

        reader = cmd.ExecuteReader();

        DataTable dt = new DataTable();
        dt.Load(reader);

        return dt;
    }
    catch(Exception ex)
    {
        throw new Exception("getTaskStartFinish error: " + ex.Message);
    }
    finally
    {
        if(con != null)
            con.Close();
        if(reader != null || !reader.IsClosed)
            reader.Close();
    }
} 
```

我得到的当前错误如下： ORA-06550：第 1 行，第 13 列：PLS-00382：表达式类型错误 ORA-06550：第 1 行，第 7 列：PL/SQL：语句被忽略

我在网上看到过类似的示例，但都使用 ExecuteScalar() 或一些用于返回奇异值但不返回表的过程或函数的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:58:58.047

好吧，如果您想返回单个值，我的建议是（针对多行进行了编辑）：

```
 OleDbConnection conn = new OleDbConnection(ConfigurationManager.ConnectionStrings["OracleBD"].ConnectionString);
        OleDbCommand cmd = new OleDbCommand("Z_TESTE_IN_FUNC", conn);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("@procValueName", "myValue");
        OleDbDataAdapter da = new OleDbDataAdapter(cmd);
        DataTable dt = new DataTable();
        conn.Open();
        try
        {
            da.Fill(dt);
        }
        catch (Exception excp)
        {
            //Handle Exception
        }
        finally
        {
            conn.Close();
        } 
```

编辑2：试试这个功能

```
OleDbConnection con = new OleDbConnection(cntStr);
con.Open();
OleDbCommand cmd = new OleDbCommand("F_TESTFUNC", con); 
cmd.CommandType = CommandType.StoredProcedure;
cmd.Parameters.Add(new OleDbParameter("retVal", OleDbType.VarChar, 11,ParameterDirection.ReturnValue, true, 0, 0, "retVal", DataRowVersion.Current,null);
cmd.Parameters.Add("ID", strID);
cmd.ExecuteScalar();
con.Close(); 
```

# perl - cpan2rpm 似乎没有安装 Perl 版本

> ID：15930091
> 
> 赞同：1
> 
> 时间：2013-04-10T15:25:57.147
> 
> 标签：perl, cpan, rpm

我在 RHEL6 上运行，安装了 RHEL 的 perl-5.10.1-130.el6_4。我正在尝试使用 cpan2rpm 2.028 构建一些 RPM。此外，还安装了 perl-version-0.77-130.el6_4。它给出了奇怪的失败，说安装的 Perl 版本不够新：

```
$ perl -

This is perl, v5.10.1 (*) built for x86_64-linux-thread-multi
...
$ cpan2rpm --no-sign ExtUtils::MakeMaker

-- cpan2rpm - Ver: 2.028 --
Upgrade check
Fetch: HTTP

-- module: ExtUtils::MakeMaker --
Using cached URL: http://search.cpan.org//CPAN/authors/id/M/MS/MSCHWERN/ExtUtils-MakeMaker-6.64.tar.gz
Tarball found - not fetching
Metadata retrieval
Tarball extraction: [/root/rpm/SOURCES/ExtUtils-MakeMaker-6.64.tar.gz]
Unable to build module, the following dependencies have failed:
  perl >= 5.006
Stopped at /usr/bin/cpan2rpm line 491.
cannot remove path when cwd is /tmp/bj8upl6poj/ExtUtils-MakeMaker-6.64 for /tmp/bj8upl6poj:  at /usr/share/perl5/File/Temp.pm line 902
-- Done -- 
```

是什么导致 cpan2rpm 不知道安装了哪个版本的 perl？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:48:43.663

我不确定为什么 cpan2rpm 在这里不起作用。但我要指出的是，Red Hat 团队现在使用它`cpanspec`来构建他们所有的 CPAN 模块 RPM。你可以试试那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T12:49:03.080

我遇到了同样的问题，通过安装 Perldoc 解决了这个问题。

```
$ cpan Perldoc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:44:59.927

除非有理由要使用 cpan2rpm 构建 rpm，否则您可以简单地从 yum 存储库安装 Perl 模块。例如：

```
# yum install perl-ExtUtils-MakeMaker.x86_64

# rpm -q perl-ExtUtils-MakeMaker
perl-ExtUtils-MakeMaker-6.55-130.el6_4.x86_64 
```

# php - 如何在 cakephp 1.2 中全局添加输入字段到 form->create 方法

> ID：15930094
> 
> 赞同：0
> 
> 时间：2013-04-10T15:25:59.827
> 
> 标签：php, forms, cakephp

我试图在我的所有表单上添加一个隐藏的输入作为 $form->create() 函数的一部分（有点像 rails 的做法），这样我就可以添加一个自定义 csrf 令牌。

无论如何我可以覆盖助手以在其后添加输入吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:33:06.397

最简单的方法是添加cake 提供的[安全组件。](http://book.cakephp.org/1.2/en/The-Manual/Core-Components/Security-Component.html)

> 通过使用安全组件，您可以自动获得 CSRF 和表单篡改保护。隐藏的令牌字段将自动插入表单并由安全组件检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:48:49.287

无论如何，您都不应该这样做，即以您提出问题的方式（表单->创建）。创建一个助手并使用它，如果您想知道将值放在哪里，您还可以将 CSRF 存储在用户的会话中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T21:32:59.890

## 在 CakePHP 2.x 中通过别名覆盖核心助手

在 CakePHP 2.x 中，可以通过为您自己的助手使用“别名”来覆盖默认助手。这将允许您为内置的 CakePHP 助手创建一个“插入式”替代品，而无需更改其余代码。

例如：

应用程序/控制器/AppController.php

```
class AppController extends Controller {
    public $helpers = array(
        'Form' => array(
            'className' => 'FancyFormHelper'
        )
    );
} 
```

app/View/Helper/FancyFormHelper.php

```
App::uses('FormHelper', 'View/Helper');

class FancyFormHelper extends FormHelper {

    public function create($model = null, $options = array())
    {
        $output = parent::create($model, $options);

        // append your hidden fields 
        return $output . $this->createCSRFfield(); // Or whatever you name your method
    }
} 
```

文档：[使用和配置助手](http://book.cakephp.org/2.0/en/views/helpers.html#using-and-configuring-helpers)

# java - 如何创建java gui动画？

> ID：15930101
> 
> 赞同：-1
> 
> 时间：2013-04-10T15:26:28.927
> 
> 标签：java, animation, user-interface

我在我的gui中画了一条线，我想把箭头放在线上。它有点动画，我似乎无法在谷歌上找到它。我希望你们能帮助我处理 Java gui 动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:31:00.827

在其方法中使用`Thread`带有循环的 a 。`run()`在循环的每一步中，稍微改变箭头的位置，重新绘制用户界面（或仅您知道已更改的部分）并等待大约 30 毫秒左右。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:31:46.123

UI 动画的主题远远超出了单一答案的范围，你可以写一本关于它的书。幸运的是，有人拥有——[肮脏的富客户](http://www.amazon.co.uk/Filthy-Rich-Clients-Developing-Applications/dp/0132413930)。

# c# - ASP.NET MVC：模型绑定半个对象

> ID：15930103
> 
> 赞同：3
> 
> 时间：2013-04-10T15:26:43.330
> 
> 标签：c#, asp.net-mvc, model-binding

我有一个表单来添加一个带有一些用户角色复选框的新用户。我的操作中有一个名为 User 的模型，它具有以下属性：

```
public string Username { get; set; }
public string Password { get; set; }
public IEnumerable<UserRole> Roles { get; set; } 
```

在 UserRole 类中，我有两个属性：

```
public int Id { get; set; }
public string Name { get; set; } 
```

在我的表单中，我可以通过输入名称“用户名”和“密码”成功地绑定到用户名和密码。当页面最初加载时，用户角色详细信息已加载，因此我需要传回的只是 Id，因为这是服务将用户与用户角色相关联所需的内容。

我想我可以通过为每个复选框提供角色 ID 的值并将其传递给 Roles 来完成此操作，从而部分完成角色类并将角色对象的 Name 字段留空。一个示例复选框如下所示：

```
<input type="checkbox" id="addUserAdministrator" name="Roles.Id" value="@Model.Roles.Where(role => role.Name == "Administrator").Select(role => role.Id).First()" class="css-checkbox"/> 
```

但是，这永远不会填充角色集合，并且它始终为空。有没有办法做到这一点，或者我需要做冗长的方式来传递整数列表并在动作中创建模型？

编辑：

我的动作是这样的：

```
public RedirectToRouteResult Add(User user) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:40:12.797

您可以绑定原始类型的集合 - 在您的情况下为 int

```
 public IList<Int> Roles { get; set; } //role id's here 
```

使用

```
<input type="checkbox" id="addUserAdministrator" name="Roles" 
```

或者，如果您想要 Roles 集合，您应该明确指定集合的​​索引。阅读[这篇文章](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)。最好使用非顺序索引（例如使用 Guid.NewGuid()），以防表单列表中的选定项目之间存在间隙。

```
<input type="hidden" name="Roles.Index" value="@(GuidIndexForThisRow)" />
<input type="checkbox" name="Roles[@(GuidIndexForThisRow)].Id" value="1" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:56:16.890

当我将 Collections 与 Razor 一起使用时，我会这样解决：我使用 for 块创建一个新的复选框、文本框或任何你想用集合索引显示的东西，因为当你调用控制器方法时，模型会绑定你的基于索引的集合值。

试试这个： 1\. 在您的角色 ViewModel 中创建一个布尔字段，以了解何时选择了角色。

```
@Html.TextBoxFor(model => model.Username)
@Html.PasswordBoxFor(model => model.Password, new { value = Model.Password })

<ul id="roles">
@for (int I = 0; I < Model.Roles.Count(); ++I)
{
    <li>
        @Html.HiddenFor(model => Model.Roles[I].ID)
        @Html.CheckBoxFor(model => Model.Roles[I].RoleSelected)
        @Model.Roles[I].Name
    </li>
}
</ul> 
```

尝试这样的事情。

# javascript - 更改代码时执行jquery移动代码

> ID：15930104
> 
> 赞同：0
> 
> 时间：2013-04-10T15:26:45.000
> 
> 标签：javascript, jquery, mobile, execute

我有这个代码

```
<div data-role="content">

<ul data-role="listview" data-inset="true" data-theme="b" data-icon="arrow-r">
       <li><a href="#info" >Information</a></li>
       <li><a href="#startLopen" >Start met lopen</a></li>
</ul>
</div> 
```

当用户按下“信息”按钮时，如何告诉我的应用程序执行代码？

我尝试尝试，但都失败了例如：

```
$('#liInfo').click(generateInfo);
function generateInfo()
{
alert("It works!");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:32:12.707

确保在此脚本之前包含 jquery：

```
$(document).ready(function(){

   $('#info').on('click', function(e){
            e.preventDefault();
            alert("It works");
   });

}); 
```

或者：

```
$(document).ready(function(){

          var clickFunc = function(){
              alert("works!");
          }

          $('a#info').click(clickFunc);
   }); 
```

# android - 在运行时将对象添加到 ListView 行

> ID：15930107
> 
> 赞同：0
> 
> 时间：2013-04-10T15:26:51.967
> 
> 标签：android

我试图在运行时动态地将元素添加到 ListView。这是我的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/category_row"
    android:orientation="horizontal" >
    <!-- Contents will be added at Runtime -->
</LinearLayout> 
```

我的适配器覆盖的 getView 函数

```
@Override
    public View getView(final int position, final View convertView,
            final ViewGroup parent) {
        View searchResultsRow = convertView;
        LinearLayout linearLayout;
        TextView e1,e2,e3,e4;
        if (searchResultsRow == null) {
            LayoutInflater layoutInflator = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            searchResultsRow = layoutInflator.inflate(
                    R.layout.categories_row_object, null);
            linearLayout = (LinearLayout) searchResultsRow.findViewById(R.id.category_row);

        }
        e1 = new TextView(context);
        e2 = new TextView(context);
        e3 = new TextView(context);
        e4 = new TextView(context);

        e1 = new TextView(context);
        e1.setText("Fashion");
        linearLayout.addView(e1);

        e2 = new TextView(context);
        e2.setText("Men");
        linearLayout.addView(e2);

        e3 = new TextView(context);
        e3.setText("Casual Wear");
        linearLayout.addView(e3);

        e4 = new TextView(context);
        e4.setText("Jeans");
        linearLayout.addView(e4);

        return searchResultsRow;
    } 
```

现在，前几行似乎混乱了会发生什么。就像多行已添加到同一行。我究竟做错了什么 ？

亲切的问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:44:09.640

我想知道 ConvertView != null, linearLayout 是否没有初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:52:08.253

这里的问题是`convertView`，如果不是 null，它是以前使用的视图，已经包含 4 `TextViews`。

您要做的是重用现有的`TextViews`from `convertView`。

这样做的一种方法是：你正在膨胀`categories_row_object`. 把你的 4 放进`TextView`去，然后通过 id 访问它。

或者，您可以浏览您的`LinearLayout`.

# java - FTP客户端java实现

> ID：15930110
> 
> 赞同：1
> 
> 时间：2013-04-10T15:27:07.417
> 
> 标签：java, ftp

我被 FTP 客户端 java 实现卡住了。我所要做的就是连接到 FTP 服务器并将一个文件传输到服务器。

我设法与 ftp 服务器建立连接（参见下面的代码），然后我使用 PASV 命令进入被动模式。现在我不知道下一步该做什么。我尝试在 PASV 命令之后创建一个新套接字并将其连接到 FTP 服务器端口 20，但这不起作用。

我的问题是如何在建立连接时启动文件传输？（我的想法是与端口 20 建立连接并执行 STOR 命令，但我不知道该怎么做）。

您有什么想法或有用的建议吗？

顺便提一句。我必须在不使用 FTPClient 之类的 java 类的情况下实现这一点

这是我的代码：

```
 public class FTPtest {

    Socket socket;
    PrintWriter pw;
    BufferedReader input;
    String info = "";

    public FTPtest(){
        try{
            socket = new Socket("some_ftp_server", 21);
            logUsername();
            closeEverything();
        }
        catch(IOException ioe){
            System.out.println("error");
        }
    }

    public void logUsername()throws IOException{
        input = new BufferedReader(new InputStreamReader(socket.getInputStream()));
        pw = new PrintWriter(socket.getOutputStream());

        //user
        pw.write("USER some_user\n");
        pw.flush();
        System.out.println(input.readLine());

        //pass
        pw.write("PASS some_pass");
        pw.flush();
        System.out.println(input.readLine());
        System.out.println(input.readLine());

        //PASV
        pw.write("PASV");
        pw.flush();
    }

    public void closeEverything() throws IOException{
        input.close();
        pw.close();
        socket.close();
    }
    public static void main(String[]args){
        new FTPtest();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:42:48.690

您最好使用已经存在的 FTP 客户端库。至于 PASV 请求 - 响应它的服务器返回编码的 IP 地址和您应该连接到的端口以进行数据连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T00:25:34.763

我遇到了同样的问题。阅读 RFC 959 我注意到：

> 参数字段由一个可变长度的字符串组成，该字符串以 NVT-ASCII 表示的字符序列（回车、换行）结尾；对于其他协商的语言，可能会使用不同的行尾字符。需要注意的是，在收到行尾代码之前，服务器不会采取任何行动。

代替

```
pw.write("USER some_user\n"); 
```

尝试

```
pw.write("USER some_user\r\n"); 
```

为我工作...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T16:45:17.000

请查看 RFC 959 以了解语法和响应详细信息，用 Java 实现完整的 FTP 客户端并非易事，并且需要相当长的时间。考虑使用 JSCAPE 的[Secure FTP Factory](http://www.jscape.com/products/components/java/secure-ftp-factory/)来实现 FTP/FTPs 协议的健壮实现。这是显示示例代码的[文档。](http://files.jscape.com/sftp/docs/html/index.html?overview2.html)

# ruby-on-rails - 在rails应用程序中出现未初始化的常量错误，但可以从rails控制台中提取数据

> ID：15930111
> 
> 赞同：0
> 
> 时间：2013-04-10T15:27:12.560
> 
> 标签：ruby-on-rails, twitter

我正在尝试使用 twitter gem，在我的家中#controller 我有

```
@tweets = Twitter.user_timeline("pantsstore").limit(2) 
```

和

```
<%= @tweets %> in homeController#index 
```

但我得到一个

```
uninitialized constant Spree::HomeController::Twitter 
```

错误。我应该在哪里放置“需要'推特''？或者我如何初始化变量 Twitter？我可以从 Rails 控制台中提取推文

```
Twitter.user_timeline("pantsstore").limit(2) 
```

# php - 用于 AJAX 自动完成和名称检查的多个文本框

> ID：15930114
> 
> 赞同：0
> 
> 时间：2013-04-10T15:27:28.583
> 
> 标签：php, javascript, ajax, methods

我正在尝试创建一个将搜索 mysql 数据库的文本框，在文本框下方提供自动完成的文本，然后显示确认勾号或叉号以表明该名称已经在数据库中（或不在数据库中）。

我只能使用一个文本框，但我想在同一页面上添加多个文本框。例如，某人可以搜索 10 个不同的名称，让它们全部自动完成，然后用绿色勾号或红色叉号显示以确认它们在数据库中。

我是新手，如果很明显我做错了，我深表歉意！

提前致谢。

这是javascript：

```
<script type="text/javascript">

function check_username(){

var username = $("#username").val();
if(username.length > 2){

    $.post("username.php", {
        username: $('#username').val(),
    }, function(response){
        $('#Info').fadeOut();
        setTimeout("finishAjax('Info', '"+escape(response)+"')", 450);
    });
    return false;
}
}

function finishAjax(id, response){

  $('#'+id).html(unescape(response));
  $('#'+id).fadeIn(1000);
} 

$(function() {

$( "#username" ).autocomplete(
{
     source:'source.php'    })
});

</script> 
```

这是 html 文本字段：

```
<td><input type="text" id="username" type="text" onblur="return check_username();"/></td>
<td><div id="Info"></div></td>

<td><input type="text" id="username2" type="text" onblur="return check_username2();"/></td>
<td><div id="Info"></div></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:56:10.337

尝试：

```
$( "input#username,input#username2" ).autocomplete( 
```

代替

```
$( "#username" ).autocomplete( 
```

# sqlite - 对于 SQLWCHAR，unixODBC 需要哪种编码？

> ID：15930119
> 
> 赞同：1
> 
> 时间：2013-04-10T15:27:38.067
> 
> 标签：sqlite, unicode, odbc, unixodbc

UnixODBC 的 SQLWCHAR 类型是 unsigned short int，与 Windows 上 wchar_t 类型的大小相匹配。我假设编码必须是 UCS2，但是使用 SQLite ODBC 驱动程序的快速测试应用程序失败了。如果我使用诸如“INSERT INTO foo(name) VALUES('ä')”之类的 UCS2 字符串调用 SQLExecDirectW()，则会存储值 0xE4（这是正确的 UCS2 值，但它应该存储为 UTF-8（0xC3A4 ））。

如果我在第一步中将 UCS2 字符串转换为 UTF-8 字符串，然后将每个字节 (!) 写入 SQLWCHAR 数组，则 SQLExecDirectW() 调用会将正确的值插入数据库。但是将 UTF-8（1 字节序列）打包成 2 字节序列（仍然包含 UTF-8）对我来说似乎是绝对错误的。

**只是一个提示：**

在 pyhton3 上使用 pyodbc（也使用了 Wide-API），出现了同样的问题：

```
cursor.execute("INSERT INTO bla VALUES('ä')") 
```

这导致：

```
sqlite> select hex(id), id from bla;
E4|� 
```

# python - wxpython + matplotlib：关闭图挂起python

> ID：15930121
> 
> 赞同：0
> 
> 时间：2013-04-10T15:27:43.670
> 
> 标签：python, matplotlib, wxpython

这个 python 程序在 wxpython 窗口中绘制一个图形。它在 Enthought Python Distribution 7.3-2 中运行良好，但是当我关闭图时，python 继续运行并且不退出。

我错过了什么？当我创建不使用 matplotlib 的 wxpython GUI 时，它们会在我关闭窗口后正确退出。我想wxpython中的消息循环一定有一些我不明白的地方。

```
# adapted from:
# http://wiki.wxpython.org/Getting%20Started
# http://www.cs.colorado.edu/~kena/classes/5448/s11/presentations/pearse.pdf

import wx
import pylab as pl
import matplotlib
from matplotlib.backends.backend_wxagg import FigureCanvasWxAgg as FigureCanvas

class GUIPanel(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)
        self.parent = parent

        # create some sizers
        sizer = wx.BoxSizer(wx.VERTICAL)

        # A button
        self.button =wx.Button(self, label="Tada!")
        self.Bind(wx.EVT_BUTTON, self.OnClick,self.button)

        # put up a figure
        self.figure = pl.figure()
        self.axes = self.drawplot(self.figure)
        self.canvas = FigureCanvas(self, -1, self.figure)

        sizer.Add(self.canvas, 0, wx.ALIGN_CENTER|wx.ALL)
        sizer.Add(self.button, 0, wx.ALIGN_CENTER|wx.ALL)

        self.SetSizerAndFit(sizer)  
    def log(self, fmt, *args):
        print (fmt % args)
    def OnClick(self,event):
        self.log("button clicked, id#%d\n", event.GetId())
    def drawplot(self, fig):
        ax = fig.add_subplot(1,1,1)
        t = pl.arange(0,1,0.001)
        ax.plot(t,t*t)
        ax.grid()
        return ax

app = wx.App(False)
frame = wx.Frame(None)
panel = GUIPanel(frame)
frame.Fit()
frame.Center()
frame.Show()
app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:12:18.330

嗯。根据 tcaswell 评论中的讨论，我改变了

```
self.figure = pl.figure() 
```

到

```
self.figure = matplotlib.figure.Figure() 
```

它解决了这个问题。（当我关闭窗口时，python 退出）

# c++ - Qt 程序中的错误

> ID：15930125
> 
> 赞同：1
> 
> 时间：2013-04-10T15:27:56.203
> 
> 标签：c++, qt

这段代码

```
#include <QtWidgets/QApplication>
#include <QLabel>

int main(int argc,char *argv[])
{
    QApplication app(argc,argv);
    QLabel *label = new QLabel("my first app");
    label->show();
    return app.exec();
} 
```

导致错误：

> QLabel：没有这样的目录

我在 Windows 中使用 Qt 5.0.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:34:08.937

改变

```
#include <QLabel> 
```

到`#include <QtWidgets/QLabel>` 这是`QLabel`实际居住的地方（如果这是`QLabel`你想要的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:46:33.977

将 QT += 小部件放入您的 .pro 文件中。

# php - 带有显示日期列前 4 个字符的临时列的 SQL 查询

> ID：15930131
> 
> 赞同：0
> 
> 时间：2013-04-10T15:28:12.983
> 
> 标签：php, mysql, sql

而不是显示整个日期，我只想显示日期列的前 4 个字符。

```
SELECT Test.Date From Test 
```

希望日期限制为 4 个字符长

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:29:43.023

这会给你一年。

```
SELECT YEAR(Date) as Year FROM Test 
```

或者你也可以使用`DATE_FORMAT()`

```
SELECT DATE_FORMAT(Date, '%Y') as Year FROM Test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:32:48.300

`SELECT LEFT(Test.Date, 4) FROM Test`

应该可以正常工作，假设格式是“2013-04-10”

# assembly - 汇编语言 8086 如何制作 64 位整数计算器？

> ID：15930137
> 
> 赞同：0
> 
> 时间：2013-04-10T15:28:34.363
> 
> 标签：assembly, x86, masm, x86-16

我想用 8086 汇编语言制作一个 64 位整数计算器，它具有以下功能：加法、减法、除法、乘法。

它应该提供一个菜单，这样如果我们按下`1`它就会增加，如果我们按下`2`它就会减去等等，我们可以给出一个 64 位的输入值。

问题是我们在编程时只能使用 16 位寄存器/内存，所以问题是我们如何使用 16 位寄存器并在控制台窗口中给出 64 位输入值。

我正在使用 KIP.R.IRVINE 程序集链接库。

我们必须对其进行编码，使其对每个功能（如加法、减法、除法和乘法）使用 16 位寄存器/操作数。16 + 16 + 16 + 16 = 64

我是汇编语言的新手，如果有人可以帮助我只制作计算器的 1 个功能（+、-、/、x），我可以完成其余的功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T19:26:24.153

这个问题与汇编语言几乎没有关系，或者至少是这个问题的最大份额。您应该用 C 或任何您喜欢的语言对其进行原型制作，然后简单地将其转换为另一种语言（在这种情况下为汇编）。

如果你记得在小学时如果我们想加 999 + 1

```
 999
   1 +
====== 
```

我们将进行很多“随身携带”

```
111
 999
   1 +
======
1000 
```

现在小学里可能没有定义的是“carry in”和“carry out”。您将 1 带到下一列的东西就是执行。当您将结转的东西添加到当前列中时，对于该列，现在将相同的数字称为进位。

```
ab
 c
 d +
====
 e 
```

b 是进位，a 是进位，操作数是 c 和 d。e 是该列的结果。我们确实在小学学到了我们可以添加无限大的数字，因为我们只需要学习一次添加一列并无限重复。请注意，第一列进位上方的原始问题是空白的，它是隐含的零。零加 9 加 1 等于“0 进位 1”，0 是 9+1 的结果，1 是进位。

所以现在做 999 + 1 但人为限制我们一次只能添加两列，也许我们的纸只够两个数字宽，谁知道（处理器有宽度有固定限制的寄存器，在您的案例 16 位或 16 列宽）。

我们知道答案看起来像这样，有四列，

```
1110
0999
0001 +
======
1000 
```

一次两列

```
11    10
09    99
00 +  01 +
====  ====
10    00 
```

首先将最不重要的列用零作为进位。然后将该使用作为下两列的进位执行，我们可以对无限大的数字无限重复此操作。

在汇编语言中，你经常（但不总是）有一个 ADD 和某种风格的 ADC 指令，不带进位的加法和带进位的加法，正常的加法有一个隐含的零进位，理想情况下有一个进位到一些进位标志处理器状态寄存器某处。那么如果有一个带进位的加法指令，你可以用带进位的加法进行其余的高阶加法，带进位的加法使用进位标志作为进位，并将进位放在进位标志中，所以你可以级联添加的内容。

清如泥？

减法，在计算机中没有真正的减法，你在初学者编程课上学到的疯狂的二进制补码是有原因的。使用二进制补码对数字求反是“反转并加 1”。现在考虑我们的加法运算，加法将两个数字相加并带有进位。如果您要反转第二个操作数，然后将 1 放入进位中怎么办？那是“反转并加1”，对吗？如果我想做与 5 + (-1) 相同的数学 5 - 1 与 5 + invert(1) + 1 相同，对吗？完全符合 ADD 逻辑。

不同的指令集对减法运算的进位执行不同的操作，基本上是在进入加法器的过程中，减法意味着反转第二个操作数并反转进位，然后进行正常的加法，尽管一些处理器系列反转如果运算是减法，则执行位，有些则不是。您可能需要也可能不需要根据您在操作后对进位位所做的操作（条件分支，例如如果进位设置跳转，如果进位未设置跳转），在这种情况下，如另一张海报所示，一些指令集合有借位减法。就像 add then 一系列 addc 操作级联一个无限大的加法一样，您可以使用 sub 和 sbb 级联一个无限大的减法。

相乘...幸运的是 8086 使这更容易一些，但整体性能在任何地方都是相同的。如果您查看数字（二进制​​），如果您将两个 x 位宽的数字相乘，理想情况下结果需要是 2*x 宽，因此要正确地将任何两个 16 位数字相乘，您需要一个 32 位的结果。如果您的硬件只能执行 16bit * 16bit = 16bit 那么轻松将该乘数级联为零高 8 位并假装执行 8bit * 8bit = 16bit ...

小学

```
 abcd
 efgh *
====== 
```

我们最终得到了四个相加的数字，对吗？我用 hhhh 代表 abcd*h 和 gggg 代表 abcd*g 等。

```
 abcd
   efgh *
======= 
   hhhh
  gggg
 ffff
eeee    +
========== 
```

当我们甚至做了两列乘法时

```
 cd
 gh *
==== 
```

分为四个乘法步骤

```
h * d
h * (c*10)
(g*10) * d
(g*10) * (d*10) 
```

使用数学属性的是

```
h * d = h*d
h * (c*10) = 10 * (h*c)
(g*10) * d = 10 * (g*d)
(g*10) * (d*10) = 100 * (g*d) 
```

以 10 为底乘以 10 只是移动一列，乘以 100 是两列，所有这些项目都相加。因此，如果您将乘法操作数分解为可消化的部分并跟踪每个项目需要移动多少，这基本上将该项目放在特定列中，使用我们无限宽的加法，我们已经将内容分解为列或组列。是的，它变成了一个交互过程，如上所述，我们有四件事要添加，我们的级联加法只添加两件事，所以你必须做 3 次宽加法，1）前两个操作数，2）1）的结果加上第三个操作数 3 ) 2) 的结果加上最后一个操作数

假设这些字母中的每一个都是一个 16 位数字

```
abcd
efgh *
====== 
```

上面唯一一个没有与它相关的 16 的倍数移位的乘法对（认为乘以十进制的 10 或 100 或 1000）是 h*d。

所以结果的低 16 位是 h*d 的低 16 位。h*d 的高 16 位必须添加到其他内容中

下一层是 h*c<<16 和 g*d<<16。每一个的低 16 位加在一起，也加到 d*h 的高 16 位。用两个字母组合来表示它们的乘法结果

换句话说 abcd * efgh =

```
000000hd
00000hc0
0000hb00
000ha000
00000gd0
0000gc00
000gb000
00ga0000
0000fd00
000fc000
00fb0000
0fa00000
000ed000
00ec0000
0eb00000
ea000000 +
========== 
```

h*d 的低 16 位（上面表示为 hd）被加到零并直接进入结果 h*d 的上半部分和 h*c 和 g*d 的下半部分相加成为下一个结果的 16 位，依此类推。

如果您想使用 16*16=32 位乘法运算和 16*16=16+进位加法运算将两个 64 位数字相乘，您可以根据上述进行硬编码。

如果您想将结果限制为 64*64=64bits 而不是 64*64=128bits，您可以将其减半

```
00hd
0hc0
hb00
a000 (h*a)
0gd0
gc00
b000 (g*b)
fd00
c000 (f*c)
d000 + (e*d)
====== 
```

我会离开部门让你弄清楚......

首先使用基本操作加减法，综合进位位在高级语言中实现这一点

做一个添加功能

```
unsigned int a,b,c,result,carry;

//addition
a = operand1&0xFFFF;
b = operand2&0xFFFF;
c = a+b;
result = c&0xFFFF;
carry = (c>>16)&1; 
```

和一个带进位功能的加法

```
//add with carry 
a=(operand1>>16)&0xFFFF;
b=(operand2>>16)&0xFFFF;
c = a+b+carry_in;
result = c&0xFFFF;
carry = (c>>16)+1; 
```

或者如果你想像硬件一样只做带进位功能的加法，并且在加法步骤中输入 0 表示进位，否则输入进位。

清如泥？

例如，x86 可能会反转减法的执行，而 arm 可能不会。有些处理器根本没有标志（mips），您必须使用小于寄存器大小的数字来合成上述所有内容（使用 32 位寄存器进行 16 位加法，从而允许保存第 17 位、执行或可能做一次 31 位，无论如何）。就像某些处理器一样，您必须在输入上使用乘法大小的一半（上半部分为零）才能得到结果的未剪辑答案，并执行上述游戏以正确执行全宽度乘法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:34:25.060

要使用 16 位寄存器减去 2 个 64 位值，请执行以下操作：

```
lea di, [operand1]  ;;  *di -= *si
lea si, [operand2]

    mov ax, [si]     // subtract initially first 16 bits
    sub [di], ax
    mov cx, 3        // setup loop counter
    xor bx, bx

a:  lea bx, [bx+2]    // advance the pointers without affecting status register
    mov ax, [si+bx]   // subtract 
    sbb [di+bx], ax

    loop a           // this does not affect carry flag 
```

# primefaces - Primefaces tabview tabChange 显示选项卡后触发的事件

> ID：15930138
> 
> 赞同：3
> 
> 时间：2013-04-10T15:28:39.220
> 
> 标签：primefaces, tabs, tabview

我正在使用 Primefaces 3.5 和 JSF2.1 (Mojarra) 进行项目

我创建了一个内部`<p:tabView id="tabsVw" dynamic="false">`有两个选项卡的 primefaces，每个选项卡都有一个 primefaces 数据表

```
 <h:form> 
        <p:tabView  dynamic="false">
        <p:ajax event="tabChange" listener="#{tstTab.onDtlTabChanged}" />

            <p:tab title="tab1">
                <p:dataTable value="#{tstTab.list1}" var="v1">
                    <p:column>
                        <h:outputText value="#{v1}"/>
                    </p:column>
                </p:dataTable>
            </p:tab>

            <p:tab title="tab2">
                <p:dataTable value="#{tstTab.list2}" var="v2">
                    <p:column>
                        <h:outputText value="#{v2}"/>
                    </p:column>
                </p:dataTable>          
            </p:tab>
        </p:tabView>
    </h:form> 
```

并在 bean 内部（查看范围）

```
@ManagedBean
@ViewScoped
public class TstTab {

    private List<String> list1;
    private List<String> list2;

    public TstTab(){
        list1 = new ArrayList<String>();
        list2 = new ArrayList<String>();

        list1.add("List 1 - Str 1");
        list1.add("List 1 - Str 2");
        list1.add("List 1 - Str 3");
        list1.add("List 1 - Str 4");
        list1.add("List 1 - Str 5");

        list2.add("List 2 - Str 1");
        list2.add("List 2 - Str 2");
        list2.add("List 2 - Str 3");
        list2.add("List 2 - Str 4");
        list2.add("List 2 - Str 5");            
    }

    public void onDtlTabChanged(TabChangeEvent event) {
        System.out.println("000000000000000000");
    }

    public List<String> getList1() {
        System.out.println("11111111111111");
        return list1;
    }

    public List<String> getList2() {
        System.out.println("222222222222222222");
        return list2;
    } 
```

}

现在的问题是当运行应用程序并尝试在选项卡之间导航（更改）时，但我可以看到`onDtlTabChanged`在调用 getter 之后调用了，所以这是一个大问题。

如果`tabView`从静态更改为动态，则行为是随机的，换句话说，对更改事件的调用发生在 getter 中间的某个地方。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T11:07:44.747

好吧，我认为这是一个primefaces BUG，我找到了一种解决方法，如下所示

1.  不要使用全局表单（tabView 本身的表单），而是为每个选项卡使用一个表单（在它内部围绕数据表）

2.  您必须添加一个虚拟选项卡作为第一个必须包含其中一些静态数据或预加载数据的表单的选项卡

就这样，

问题是 ajax 请求在全局表单中，它导致数据表在 ajax 请求之前首先获取它们的数据，Primefaces 的奇怪之处在于，如果您不添加第一个虚拟选项卡，它将始终执行第一个表单选项卡并获取其数据，这将导致问题

问候 ，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-14T10:06:39.623

我认为阿里萨利赫的答案是正确的。

如果您在使用 tabchangelistener 时遇到问题，也许这可以帮助您：

我对 Primefaces 5.1 有类似的问题

只要我将 tabview 放入表单中，一切正常。但是因为我想在我的选项卡中使用单独的表单，所以我不得不删除 tabview 的周围表单以避免嵌套表单。如果没有周围的表单，则在更改选项卡时不再触发 ajax 事件。

我的解决方案是以与 tabview 平行的形式使用远程命令。
远程命令由 tabview 元素的 onTabChange 属性触发。在那次调用中，我将索引参数转发到全局请求参数。

```
<p:tabView id="rootTabMenu" styleClass="tabcontainer" prependId="false" 
        activeIndex="#{sessionData.activeTabIndex}" widgetVar="rootTabMenu"
        onTabChange="tabChangeHelper([{name: 'activeIndex', value: index}])">
    // Tabs...  
</p:tabView>

<h:form id="tabChangeHelperForm">
    <p:remoteCommand name="tabChangeHelper" actionListener="#{sessionData.onTabChange()}" />
</h:form> 
```

在支持 bean 中，我再次从请求参数映射中捕获了值并设置了活动索引。

```
public void onTabChange()
{   
    FacesContext context = FacesContext.getCurrentInstance();
    Map<String, String> paramMap = context.getExternalContext().getRequestParameterMap();
    String paramIndex = paramMap.get("activeIndex");
    setActiveTabIndex(Integer.valueOf(paramIndex));
    System.out.println("Active index changed to " + activeTabIndex);
} 
```

希望能帮到你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T14:24:25.577

它在 Primefaces 3.5 和 mojarra 2.1.20 中运行良好，我的代码：bean：

```
@ManagedBean(name = "tabview")
@ViewScoped    
public class TabView implements Serializable {

        private static final long serialVersionUID = 1L;
        private List<Car> l1;
        private List<Car> l2;
        private List<Car> l3;

        public TabView() {
            l1 = new ArrayList<Car>();
            l2 = new ArrayList<Car>();
            l3 = new ArrayList<Car>();

            Car c1 = new Car("c1", "a1");
            Car c2 = new Car("c21", "a21");
            Car c3 = new Car("c31", "a31");
            Car c4 = new Car("c41", "a41");
            Car c5 = new Car("c51", "a51");
            Car c6 = new Car("c61", "a61");
            Car c7 = new Car("c71", "a71");
            Car c8 = new Car("c81", "a81");
            Car c9 = new Car("c91", "a91");
            l1.add(c1);
            l1.add(c2);
            l1.add(c3);

            l2.add(c4);
            l2.add(c5);
            l2.add(c6);

            l3.add(c7);
            l3.add(c8);
            l3.add(c9);
        }

        public void hand(TabChangeEvent event) {
            Car c1 = new Car("c1", "a1");
            Car c2 = new Car("c1", "a1");
            Car c3 = new Car("c1", "a1");
            Car c4 = new Car("c1", "a1");
            Car c5 = new Car("c1", "a1");
            Car c6 = new Car("c1", "a1");
            Car c7 = new Car("c1", "a1");
            Car c8 = new Car("c1", "a1");
            Car c9 = new Car("c1", "a1");
            l1.add(c1);
            l1.add(c2);
            l1.add(c3);

            l2.add(c4);
            l2.add(c5);
            l2.add(c6);

            l3.add(c7);
            l3.add(c8);
            l3.add(c9);
        }

        public List<Car> getL1() {
            return l1;
        }

        public void setL1(List<Car> l1) {
            this.l1 = l1;
        }

        public List<Car> getL2() {
            return l2;
        }

        public void setL2(List<Car> l2) {
            this.l2 = l2;
        }

        public List<Car> getL3() {
            return l3;
        }

        public void setL3(List<Car> l3) {
            this.l3 = l3;
        }
    } 
```

xhtml:

```
 <p:tabView id="mtrlDtlTabs" dynamic="true" cache="false">  
                    <p:ajax event="tabChange" update="t1 t2 t3" listener="#{tabview.hand}"/>
                    <p:tab id="t1" title="1">
                        <p:dataTable id="l1" value="#{tabview.l1}" var="l1">
                            <p:column headerText="l1">#{l1.manufacturer}</p:column>
                            <p:column headerText="l2">#{l1.model}</p:column>
                        </p:dataTable>
                    </p:tab>
                    <p:tab id="t2" title="2">
                        <p:dataTable id="l2" value="#{tabview.l2}" var="l2">
                            <p:column headerText="l2">#{l2.manufacturer}</p:column>
                            <p:column headerText="l22">#{l2.model}</p:column>
                        </p:dataTable>
                    </p:tab>
                    <p:tab id="t3" title="3">
                        <p:dataTable id="l3" value="#{tabview.l3}" var="l3">
                            <p:column headerText="l3">#{l3.manufacturer}</p:column>
                            <p:column headerText="l33">#{l3.model}</p:column>
                        </p:dataTable>
                    </p:tab>
                </p:tabView> 
```

# php - 将ajax关联数组传递给php关联数组

> ID：15930143
> 
> 赞同：0
> 
> 时间：2013-04-10T15:28:52.387
> 
> 标签：php, jquery, ajax, arrays, associative

我正在尝试通过 $.ajax 方法将表单值传递给 PHP。我在html中有以下表格：

```
<form>
<p>
   <label for="login">User ID:</label>
   <input type="text" name="login" id="login" value="user name">
</p>

<p>
   <label for="password">Password:</label>
   <input type="password" name="password" id="password" value="password">
</p>
</form> 
```

和阿贾克斯：

```
$("form").submit(function(event) {
 var formInput = $('form').serialize();// tried with serializeArray() also

 var request = $.ajax({
    type: "POST",
    url:"../some.php", 
    data: {formInput:formInput},
    statusCode: {
                404: function() { alert("file not found");}}

 }); 
```

php:

```
<?
$data = $_POST['formInput'];
$data = array();
parse_str($_POST, $data);
print_r($data);
?> 
```

在控制台上打印：

```
(
     [Array] =>
) 
```

我想要的是让 $data 成为一个关联数组：

```
$data = array(
        'login' => 'foo'
        'password' => 'bar'
        ); 
```

但似乎 $data 正在作为字符串处理......提前谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:32:49.267

使用`data: $('form').serializeArray()`代替`data: {formInput:formInput},`

然后在php端，`$_POST`就是你想要的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T15:36:14.173

你需要指定你想要一个关联数组而不是来自[**json_decode**](http://php.net/json_decode)的对象：

```
json_decode($data, true); 
```

您可能还需要这样做 -

```
$('form').serializeArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T15:32:51.153

而不是这个：

```
$("form").submit(function(event) {
 var formInput = $('form').serialize();// tried with serializeArray() also

 var request = $.ajax({
    type: "POST",
    url:"../some.php", 
    data: {formInput:formInput},
    statusCode: {
                404: function() { alert("file not found");}}
 }); 
```

用这个 ：

```
$("form").submit(function(event) {
 var formInput = $('form').serialize();// tried with serializeArray() also

 var request = $.ajax({
    type: "POST",
    url:"../some.php", 
    data: formInput,
    statusCode: {
                404: function() { alert("file not found");}}
 }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T15:37:02.893

我们想要的是序列化为一个可以解码的 json 对象。使用[这个](https://github.com/macek/jquery-serialize-object)插件来访问`.serializeObject`.

```
$("form").submit(function(event) {
 var formInput = $('form').serializeObject();
 formInput = JSON.stringify(formInput);

 var request = $.ajax({
    type: "POST",
    url:"../some.php", 
    data: {formInput:formInput},
    statusCode: {
                404: function() { alert("file not found");}}

 }); 
```

然后在 php 端，您可以轻松解码 JSON

```
$data = json_decode($_POST['formInput'], true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T17:21:58.733

从很好的回应中，我弄清楚了我的问题是什么。当我提交 POST 时，我将数组放入数组中。

下面的ajax代码：

```
$("form").submit(function(event) {
var formInput = $('form').serialize();// tried with serializeArray() also

var request = $.ajax({
type: "POST",
url:"../some.php", 
data: {formInput:formInput},
statusCode: {
            404: function() { alert("file not found");}}
}); 
```

改为：

```
$("form").submit(function(event) {
var formInput = $('form').serializeArray();

var request = $.ajax({
type: "POST",
url:"../some.php", 
data: formInput,
statusCode: {
            404: function() { alert("file not found");}}
}); 
```

并且 PHP 被更改为：

```
<? $data = $_POST;
    print_r($data); ?> 
```

在 cosole 上，它打印的正是我想要的：

```
Array
(
[login] => admin
[password] => qwerty123!
) 
```

**谢谢大家的快速回复**

# wordpress - 我无法打开我的 WordPress 登录页面

> ID：15930159
> 
> 赞同：0
> 
> 时间：2013-04-10T15:29:23.643
> 
> 标签：wordpress

我有一个奇怪的问题。当我尝试使用 Wordpress 登录到我的网站到此地址时：

[http://theexpeditioner.com/wordpress/wp-login.php](http://theexpeditioner.com/wordpress/wp-login.php)

我收到以下错误：

错误 101 (net::ERR_CONNECTION_RESET)：

我有时也会收到错误 103 (net::ERR_CONNECTION_ABORTED): Unknown error。

这发生在我计算机上的所有浏览器上。我尝试过清除缓存、禁用防火墙、关闭病毒防护等……我没有任何代理。我试过禁用插件等...

奇怪的是，我可以使用手机通过 LTE 打开该页面（我可以在其他计算机上打开它）。所以这似乎是我的电脑的问题？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:41:57.643

错误 101 是权限问题。（通常）尝试使用其他浏览器，或重新安装您已经在使用的浏览器。

如果要手动更改权限，请转到 Windows 资源管理器中的 %USERPROFILE%\AppData\Local。然后，转到 Temp 文件夹的属性。然后，转到“安全”选项卡。选择您的用户，然后确保您在下方框中拥有所有必要的访问权限。

# objective-c - 如果 CFDictionaryRef 不存在则崩溃

> ID：15930160
> 
> 赞同：2
> 
> 时间：2013-04-10T15:29:24.900
> 
> 标签：objective-c, macos

断开以太网电缆与计算机的连接或刚刚关闭以太网时出现问题。在这种情况下，某些条目不存在，我的应用程序会崩溃。所以我试图找出如何防止并刚刚找到**CFDictionaryContainsKey**，但这并不能防止错误。有谁知道也***低于 osx 10.6***的解决方法？

```
- (NSString *)checkNetworkInterface
{
    SCDynamicStoreRef ds = SCDynamicStoreCreate(kCFAllocatorDefault, CFSTR("myapp"), NULL, NULL);
    CFDictionaryRef dr = SCDynamicStoreCopyValue(ds, CFSTR("State:/Network/Global/IPv4"));
    Boolean ck = CFDictionaryContainsKey( dr, CFSTR("PrimaryInterface"));
    NSString *interfaceString;
    if (ck) {
        CFStringRef interface = CFDictionaryGetValue(dr, CFSTR("PrimaryInterface"));
        interfaceString = [NSString stringWithString:( NSString *)interface ];
    } else {
        interfaceString = [NSString stringWithString:@"" ];
    }
    CFRelease(dr);
    CFRelease(ds);
    return interfaceString;
} 
```

如果“状态：/网络/全球/IPv4”不存在，应用程序崩溃:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:08:25.830

作为[`SCDynamicStoreCopyValue()`](http://developer.apple.com/library/mac/documentation/Networking/Reference/SCDynamicStore/Reference/reference.html#//apple_ref/c/func/SCDynamicStoreCopyValue)状态的文档：

> **返回值**：与指定键关联的值，如果没有找到值或发生错误，则返回 NULL。您必须释放返回的值。

`CFDictionaryContainsKey()`尝试检查传入的字典；如果它为 NULL，则会因 NULL 指针取消引用而崩溃。您也不应该`CFRelease()`使用 NULL 指针。

要纠正这个问题，只需在调用之前添加一个 NULL 检查`CFDictionaryContainsKey()`。

```
NSString *interfaceString;
if(dr != NULL && CFDictionaryContainsKey(dr, CFSTR("PrimaryInterface")))
{
  CFStringRef interface = CFDictionaryGetValue(dr, CFSTR("PrimaryInterface"));
  ...
  CFRelease(dr);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T17:08:13.787

我想你只是想检查是否有`dr == NULL`，如果有就中止。抱歉，如果这有点明显，但你没有在这里做，它似乎可以避免崩溃。

# asp.net-mvc - 设置本地时钟会导致 WebResource.axd 错误

> ID：15930163
> 
> 赞同：3
> 
> 时间：2013-04-10T15:29:30.317
> 
> 标签：asp.net-mvc, webresource.axd

当我们将 pc 的本地时间设置为过去一个月时，我们会在 chrome 控制台中收到一个或多个 WebResource.axd 错误：

```
Failed to load resource: the server responded with a status of 404 (Not Found) http://localhost:64052/WebResource.axd?d=Cjzj7jVTY4EPdSq5mvGjoSrxnLXMy3QfSg…KKG_LUt-hCit6C6aGtLnP8Fyeauwxri1mHWA2&t=635010758504375000&_=1362893669293 
```

我们还在事件日志中得到了相应的错误：

```
URL: http://localhost:64052/WebResource.axd?d=uP9nGy6M3n_JdoEveOzmj96yg4ABiXKJAdqhkVRgVBsWd3gL5y7_K1_XWTQiJgcc8SBHZa93bfpldXjV9aPWUerfEFbhpKKC9spP0hhLnaliKvPWoHVXRzkiP3HsyBkV6i4cq3odGmq7L2OSDuFokuAHjYKYaS-AYoezs0raVsyEKQp9gYS_rkUnPMssEChEGrQLareZzDiKt9RKyN7I-A2&t=635010758504375000?version=4914; FilePath: /WebResource.axd: System.Web.HttpException (0x80004005): This is an invalid webresource request. 
at System.Web.Handlers.AssemblyResourceLoader.System.Web.IHttpHandler.ProcessRequest(HttpContext context)
at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

我们之所以关心将 PC 的本地时间设置为一个月前的原因是因为我们正在测试一个解决方案，以解决我们遇到的问题，即 2013 年 3 月 10 日的时间提前以及与之相关的无效时间间隔。

我们想了解这个问题以及它为什么会发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:53:03.283

一个可能的原因是嵌入式资源来自具有未来文件系统修改日期的 DLL。当 ASP.NET 处理`WebResource.axd`请求时，它会尝试将`Last-Modified`HTTP 标头设置为 DLL 的修改日期。但是，[`HttpCachePolicy.SetLastModified`](http://msdn.microsoft.com/en-us/library/system.web.httpcachepolicy.setlastmodified.aspx)如果日期晚于当前系统时间，则会引发异常。

尝试识别包含嵌入资源的 DLL，并将其文件系统修改日期重置为当前系统时间（或过去的日期）。为此，您可以启动命令提示符并使用以下 COPY 命令（[由 Raymond Chen 讨论](http://blogs.msdn.com/b/oldnewthing/archive/2013/07/10/10432879.aspx)）：

```
COPY /B ABC.DLL +,, 
```

# apache-flex - 在 BitmapData 上绘制样式文本

> ID：15930164
> 
> 赞同：0
> 
> 时间：2013-04-10T15:29:33.947
> 
> 标签：apache-flex, air

我有一个在`BitmapData`. 问题是，`TextFormat`指定不影响图像上的文字。我在文本格式中指定的大小、字体根本没有使用。

```
function drawString(target:BitmapData,text:String,color:uint,x:Number,y:Number):void {
        var channelName:TextField = new TextField();

        channelName.textColor=color;
        channelName.antiAliasType = AntiAliasType.ADVANCED;
        channelName.alpha=1.0;

        var txtFormat:TextFormat = new TextFormat("Verdana",25,color,true);
        txtFormat.size=Number(25);
        txtFormat.font="Verdana";
        txtFormat.bold=true;
        channelName.setTextFormat(txtFormat);
        channelName.text = text;

        channelName.defaultTextFormat = txtFormat;
        channelName.cacheAsBitmap = true;
        channelName.width=400;

        var mat:Matrix = new Matrix();
        mat.translate(x,y);
        target.draw(channelName,mat);

    } 
```

如何自定义在 ? 上绘制的文本字体和大小`BitmapData`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:51:19.803

这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                   xmlns:s="library://ns.adobe.com/flex/spark" 
                   xmlns:mx="library://ns.adobe.com/flex/mx" width="640" height="400" creationComplete="init(event)">
<fx:Script>
    <![CDATA[
        import mx.events.FlexEvent;

        [Embed(source='com/drawtext/Image.jpg')]
        public var Picture:Class;

        protected function init(event:FlexEvent):void
        {
            var bitmapData:BitmapData = new BitmapData(640, 400, true, 0xFF82DC);
            bitmapData.draw(new Picture());
            img.source = bitmapData;
            drawString(bitmapData, "It is Yours!", 0xff0000, 70, 60);
        }

        protected function drawString(target:BitmapData,text:String,color:uint,x:Number,y:Number):void 
        {
            var channelName:TextField = new TextField();

            channelName.antiAliasType = AntiAliasType.ADVANCED;

            var txtFormat:TextFormat = new TextFormat();
            txtFormat.size = 35;
            txtFormat.font = "Verdana";
            txtFormat.bold = true;

            channelName.defaultTextFormat = txtFormat;

            channelName.width = 400;
            channelName.height = 40;
            channelName.textColor=color;
            channelName.text = text;

            var mat:Matrix = new Matrix();
            mat.translate(x, y);

            target.draw(channelName, mat);
        }

    ]]>
</fx:Script>

<s:Image id="img" width="640" height="400"/>
</s:WindowedApplication> 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/9s4eq.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:39:28.823

在设置文本格式之前尝试设置 text 属性 - 并使用 setTextFormat(...) 或 defaultTextFormat = ... 不是两者

您也可以删除这些行：

```
//does the same thing as new TextFormat("Verdana",25,color,true)
txtFormat.size=Number(25);
txtFormat.font="Verdana";
txtFormat.bold=true;

//only useful if you add textField to the display list (ie: if you did addChild(channelName)
channelName.cacheAsBitmap = true; 
```

# java - 为 Spring @Scheduled 提供时区？

> ID：15930171
> 
> 赞同：56
> 
> 时间：2013-04-10T15:29:47.257
> 
> 标签：java, spring, cron, timezone, scheduling

如何为基于 Spring 的[@Scheduled](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/scheduling.html#scheduling-annotation-support-scheduled) cron 作业配置时区？

**背景：**

我有一份工作每天执行一次，比如下午 2 点，使用 Spring 的`@Scheduled`注释：

```
@Scheduled(cron = "0 0 14 * * *")
public void execute() {
    // do scheduled job
} 
```

问题是不同服务器之间的 2 PM 不同，因为 Spring 在`TimeZone.getDefault()` [内部](https://github.com/SpringSource/spring-framework/blob/3.2.x/spring-context/src/main/java/org/springframework/scheduling/support/CronSequenceGenerator.java#L81)使用 on 。此外，[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html#getDefault()) of`TimeZone.getDefault()` 声明：

> 获取此主机的默认时区。默认时区的来源可能因实现而异。

换言之，时区未确定。它可能取决于 JVM 实现、服务器时区配置、服务器位置和/或其他未知因素。因此，cron 作业在不同服务器上的不同时间触发，除非有办法明确设置应该使用哪个时区？

我正在使用 Spring 3.2.2。

* * *

**更新**

从 Spring 4 开始，Spring Jira 问题[SPR-10456](https://jira.spring.io/browse/SPR-10456)已得到解决。因此，`@Scheduled`注释具有正是用于此目的的新[区域](http://docs.spring.io/spring-framework/docs/4.0.x/javadoc-api/org/springframework/scheduling/annotation/Scheduled.html#zone--)属性。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-13T15:04:21.263

事实证明我无法使用`@Scheduled`注释，但我实施了一种解决方法。在[SchedulingConfigurer](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/scheduling/annotation/SchedulingConfigurer.html)的 JavaDoc 中指出：

> [SchedulingConfigurer is] 通常用于设置在执行计划任务时使用的特定 TaskScheduler bean，或以编程方式注册计划任务，而不是使用 @Scheduled 注释的声明性方法。

接下来，我更改了 cron 作业以实现`Runnable`接口，然后更新了我的配置文件以实现`SchedulingConfigurer`，见下文：

```
@Configuration
@EnableScheduling
@ComponentScan("package.that.contains.the.runnable.job.bean")
public class JobConfiguration implements SchedulingConfigurer {

    private static final String cronExpression = "0 0 14 * * *";
    private static final String timeZone = "CET";

    @Autowired
    private Runnable cronJob;

    @Bean
    CronTrigger cronTrigger() {
        return new CronTrigger(cronExpression, TimeZone.getTimeZone(timeZone));
    }

    @Override
    public void configureTasks(ScheduledTaskRegistrar taskRegistrar) {
        taskRegistrar.addCronTask(new CronTask(job, cronTrigger()));
    }
} 
```

请阅读[@EnableScheduling](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/scheduling/annotation/EnableScheduling.html)的JavaDoc了解更多信息。

* * *

**更新**

从 Spring 4 开始，Spring Jira 问题[SPR-10456](https://jira.spring.io/browse/SPR-10456)已得到解决。因此，`@Scheduled`注释有一个新的[区域](http://docs.spring.io/spring-framework/docs/4.0.x/javadoc-api/org/springframework/scheduling/annotation/Scheduled.html#zone--)属性正是为了这个目的，例如

```
@Scheduled(cron = "0 0 14 * * *", zone = "CET")
public void execute() {
    // do scheduled job
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-12-10T09:24:09.303

`zone`annotation 中有元素`@Scheduled`，从 4.0 版本开始。

您可以将时区插入为可以被`java.util.TimeZone`.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-07-25T05:26:22.460

你的代码应该是这样的：

```
@Scheduled(cron = "0 0 14 * * *", zone = "GMT-5")
    public void execute() {
     // do scheduled job
} 
```

“Zone”将是所需国家/地区的时区。

这是一个关于 Spring 计划任务的不错的教程：

> [https://www.baeldung.com/cron-expressions](https://www.baeldung.com/cron-expressions)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-13T06:31:09.720

您还可以`@Scheduled`在 spring-boot 中使用带有标签的时区，如下所示：

```
@Scheduled(cron = "0 0 14 * * *" , zone = "GMT+5:00")
public void execute() {
    // do the scheduled job
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T09:48:20.377

我怀疑您是否希望不同的工作或应用程序的一部分使用不同的时区。假设您希望它保持一致和干燥，或者将所有服务器上的操作系统配置为具有一致的时区，或者为所有应用程序服务器设置 user.timezone Java 系统属性。集中管理配置（操作系统、应用程序服务器），对于那个 puppet 和 chef 来说非常有用。

# jasper-reports - DynamicJasper 和亚洲字符

> ID：15930173
> 
> 赞同：2
> 
> 时间：2013-04-10T15:29:48.903
> 
> 标签：jasper-reports, dynamic-jasper, asianfonts

我由 DynamicJasper 生成的 PDF 现在看起来完全符合预期，我只面临一个问题：生成的 PDF 中根本不显示亚洲字符。任何其他字符都可以正常工作。我可以在调试器中验证字符串是否正确放置在 JRDataSource 中，Jasper 实际上确实在报告中为它们生成了行，但文本本身完全丢失了。

将 DynamicJasper 与亚洲文本元素一起使用时，是否需要考虑一些额外的编码设置？

感谢您的任何建议和问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T11:13:13.070

好的，这就是逐步解决问题的方法：

1.) 将 Arial Unicode MS 字体扩展 JAR 添加到您的类路径（或任何其他等效的 unicode 字体）。可以在[这里](http://community.jaspersoft.com/sites/default/files/files/Report24775-eastAsian.zip)找到一个“官方”的，但是我最终使用了[这个](http://www.speedshare.org/download.php?id=30F05B3C1)。如果您使用的是 maven，则可以使用以下`mvn`命令行和 POM 条目将文件添加到类路径：

```
mvn install:install-file -Dfile=DynamicJasper-arial-unicode-fonts-1.0.jar -DgroupId=ar.com.fdvs -DartifactId=DynamicJasper-arial-unicode-fonts -Dversion=1.0 -Dpackaging=jar 
```

```
<dependency>
    <groupId>ar.com.fdvs</groupId>
    <artifactId>DynamicJasper-arial-unicode-fonts</artifactId>
    <version>1.0</version>
</dependency> 
```

2.) 将 spring-core 和 spring-beans 添加到项目中（如果还没有的话）：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-core</artifactId>
    <version>3.2.2.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-beans</artifactId>
    <version>3.2.2.RELEASE</version>
</dependency> 
```

3.) 启用“Identity-H”Jasper PDF 编码：

```
static {
    JRProperties.setProperty("net.sf.jasperreports.default.pdf.encoding", "Identity-H");
} 
```

4.) 配置`Arial Unicode MS`为您的 DynamicJasper 字体（例如，用于行）：

```
// ...
final DynamicReportBuilder dynamicReportBuilder = new DynamicReportBuilder();
final Style style = new Style();
style.setFont(new Font(Font.MEDIUM, "Arial Unicode MS", false));
dynamicReportBuilder.setDefaultStyles(null, null, null, style);
// ... 
```

那是一些令人讨厌的废话：-/ ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:00:05.887

您可能需要配置 jasper 报告导出器以在 pdf 文件中嵌入特殊字体。还要检查 ck pdf 字符编码

# kendo-ui - 如何获取剑道细节网格的选定行数据

> ID：15930176
> 
> 赞同：4
> 
> 时间：2013-04-10T15:29:57.477
> 
> 标签：kendo-ui, kendo-grid

我能够在剑道网格（主网格）中获取选定的行，但我无法在详细网格中获取选定的行数据。请给我一个代码示例。谢谢，阿比

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T17:12:38.163

就像主网格一样。作为`childgrid`与细节对应的网格，请执行以下操作：

```
var row = childgrid.select();
var data = childgrid.dataItem(row);
console.log("row", row);
console.log("data", data); 
```

我将`master`网格定义为：

```
$("#grid").kendoGrid({
    ...
    detailInit: detailInit,
    ...
}); 
```

当扩展主网格中的一行时，使用以下函数创建详细信息网格：

```
function detailInit(e) {
    childgrid = $("<div/>").appendTo(e.detailCell).kendoGrid({
        dataSource: {
            type: "odata",
            transport: {
                read: "http://demos.kendoui.com/service/Northwind.svc/Orders"
            },
            serverPaging: true,
            serverSorting: true,
            serverFiltering: true,
            pageSize: 5,
            filter: { field: "EmployeeID", operator: "eq", value: e.data.EmployeeID }
        },
        scrollable: false,
        sortable: false,
        selectable: true,
        pageable: true,
        columns:
                [
                    { field: "OrderID", width: "70px" },
                    { field: "ShipCountry", title: "Ship Country", width: "110px" },
                    { field: "ShipAddress", title: "Ship Address" },
                    { field: "ShipName", title: "Ship Name", width: "200px" }
                ]
    }).data("kendoGrid");
} 
```

在此处运行示例：http: [//jsfiddle.net/OnaBai/2M86L/](http://jsfiddle.net/OnaBai/2M86L/)（当您单击`Show`按钮时，它会在浏览器的控制台中显示所选行及其数据）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T09:50:48.770

这里有一个关于如何获取点击行的数据的更简单的例子：http: [//jsfiddle.net/Corne/AQqMH/5/](http://jsfiddle.net/Corne/AQqMH/5/)

这是魔术发生的代码：

```
change: function (arg) {            
    var selectedData = this.dataItem(this.select());

    // selectedData now points to the selected dataSource item!

    alert("Clicked id: " + selectedData.id);
} 
```

# input - KnockoutJS 油门输入

> ID：15930177
> 
> 赞同：0
> 
> 时间：2013-04-10T15:30:01.460
> 
> 标签：input, knockout.js, throttling, extender

我正在尝试使用 KnockoutJS 实现类型安全的 ViewModel 之类的东西。在我开始通过 HTML 输入标签更新 observables 之前，它工作得很好。

我已经实现了`type`扩展器，它返回计算的 observable：

```
return ko.computed({
    read: target,
    write: fixer
}) 
```

`fixer`类似的东西在哪里：

```
function (newValue) {
    var current = target(),
        valueToWrite = (newValue == null ? null : fixNumber(newValue, 0));

    if (valueToWrite !== current) target(valueToWrite);
    else if (newValue !== current) target.notifySubscribers(valueToWrite);
} 
```

并且`fixNumber`是

```
function fixNumber(value, precision) {
    if (value == null || value === '') return null;

    var newValue = (value || '').toString().replace(/^[^\,\.\d\-]*([\.\,\-]?\d*)([\,\.]?\d*).*$/, '$1$2').replace(/\,/, '.'),
        valueToWrite = Number(newValue);

    return !!(valueToWrite % 1) ? round(valueToWrite, precision) : valueToWrite;
} 
```

它看起来不是那么简单，但我必须考虑可能使用逗号作为小数分隔符。

通常，一旦用户按下键以立即反映此更改，我需要立即更新我的 observables：

```
<input type="text" data-bind="value: nonThrottled, valueUpdate: 'afterkeyup'"></input> 
```

这里有很多问题，例如，我不能在那里输入小于 1 的十进制值（0.1、0.2 等）。

当我尝试限制 observable 时，它​​主要是有效的。但有时用户输入和类型修复程序会不同步，因此看起来某些输入偶尔会丢失。

完整的例子是[http://jsfiddle.net/mailgpa/JHztW/](http://jsfiddle.net/mailgpa/JHztW/)。我真的很感激任何提示，因为我花了几天时间试图解决这些问题。

## 2013 年 11 月 4 日更新

我解决了提供自定义`value`绑定的问题，所以现在节流的 observables 不会偶尔吃掉我的输入。

我添加了额外的 valueThrottle 选项绑定来限制元素值的更新：

```
var valueThrottle = allBindingsAccessor()["valueThrottle"];
var valueThrottleTimeoutInstance = null;

/* ... */

if (valueThrottle) {
    clearTimeout(valueThrottleTimeoutInstance);
    valueThrottleTimeoutInstance = setTimeout(function () {
      ko.selectExtensions.writeValue( element, ko.utils.unwrapObservable(valueAccessor()) );
    }, valueThrottle);
  } else applyValueAction(); 
```

此外，我注意到在我的情况下无法输入像 0.2 这样的值来自原始`value`绑定中的该语句：

```
if ((newValue === 0) && (elementValue !== 0) && (elementValue !== "0"))
    valueHasChanged = true; 
```

我把它改写为

```
if ((newValue === 0) && (elementValue != 0))
    valueHasChanged = true; 
```

它至少在 Chrome 上工作，但我没有正确测试它，甚至不确定它是否正确。

将添加示例，由于某种原因 jsFiddle 不接受我的自定义绑定。

任何评论都非常感谢。

# sql - 如何将当前月份数据的列添加到多月查询？

> ID：15930179
> 
> 赞同：0
> 
> 时间：2013-04-10T15:30:03.587
> 
> 标签：sql, sql-server-2005

我有一个简单的查询：-

```
SELECT *
FROM dbo.NGPCostPosition 
```

这将返回以下数据：-

![在此处输入图像描述](https://i.stack.imgur.com/O7yYq.png)

我想尝试显示当月的总成本，同时仍然可以访问所有其他数据，所以也许一个名为当月的新列只能由属于该类别的项目填充？

做这个的最好方式是什么？

欢迎和赞赏所有建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:43:44.663

这应该在查询中添加一个额外的列，仅显示当前月份的总成本。

```
SELECT
    *,
    CASE
        WHEN
            DATEPART(MOTNH, TranDate) = DATEPART(MONTH, GETDATE()) AND
            DATEPART(YEAR, TranDate) = DATEPART(YEAR, GETDATE())
        THEN TotalCost
        ELSE 0
    END CurrentMonthCost
FROM dbo.NGPCostPosition 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:36:57.527

您可以像这样在查询中添加一列：

```
 Select *, 
CASE WHEN 
    datepart(mm, getdate()) == datepart(mm, TranDate) 
    and datepart(yy, getdate()) == datepart(yy, tranDate) 
    then TotalCost 
else 0 
end as CurrentMonthTotalCost 
```

然后在你的工作表的某个地方总结一下。您还可以使用日期格式（我不喜欢这些，因为它们对于您正在比较的内容有点密码）：

```
 Select *, 
    CASE 
WHEN CONVERT(VARCHAR(7), GETDATE(), 111) == CONVERT(VARCHAR(7), TRANDATE, 111) 
THEN TotalCost 
ELSE 0 
End as CurrentMonthTotalCost 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:37:44.813

尝试这个：

```
 SELECT doctype, projectNo, CostCat, [all other columns etc.],
   (Select Sum(Quantity * UnitCost) From NGPCostPosition 
    Where transDate >= DateAdd(month, 
                        datediff(month,0,p.Transdate), 0)
       And transDate < DateAdd(month, 
                        datediff(month,0, p.Transdate), 31)) MonthlyTotal    
 FROM NGPCostPosition p 
```

# java - 正则表达式 java。为什么使用交叉点？

> ID：15930181
> 
> 赞同：5
> 
> 时间：2013-04-10T15:30:18.163
> 
> 标签：java, regex, intersection

我从[这个](http://docs.oracle.com/javase/tutorial/essential/regex/char_classes.html)关于 java regex 的 oracle 教程中获取了以下内容：

> 十字路口
> 
> 要创建仅匹配所有嵌套类共有的字符的单个字符类，请使用 &&，如 [0-9&&[345]]。这个特定的交集创建了一个字符类，它只匹配两个字符类共有的数字：3、4 和 5。
> 
> 输入您的正则表达式：[0-9&&[345]] 输入要搜索的输入字符串：3 我发现文本“3”从索引 0 开始，到索引 1 结束。

为什么会有用？我的意思是如果一个人只想图案化**345**为什么不只是 [ **345** ] 而不是“交叉点”？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T19:53:37.337

让我们考虑一个简单的问题：匹配字符串中的英语辅音。列出所有辅音（或范围列表）是一种方法：

```
[B-DF-HJ-NP-TV-Zb-df-hj-np-tv-z] 
```

另一种方法是使用环视：

```
(?=[A-Za-z])[^AEIOUaeiou]
(?![AEIOUaeiou])[A-Za-z] 
```

不确定是否有任何其他方法可以在不使用字符类交集的情况下执行此操作。

字符类交集解决方案（Java）：

```
[A-Za-z&&[^AEIOUaeiou]] 
```

对于.NET，没有交集，但有字符类减法：

```
[A-Za-z-[AEIOUaeiou]] 
```

我不知道实现细节，但如果字符类交集/减法比使用环视更快，我不会感到惊讶，如果字符类操作不可用，这是最干净的选择。

另一种可能的用法是当您有一个预先构建的字符类并且您想从中删除一些字符时。我遇到的类交集可能适用的一种情况是匹配所有空白字符，但换行符除外。

@beerbajay 评论的另一个可能的用例：

> 我认为内置字符类是主要用例，例如`[\p{InGreek}&&\p{Ll}]`小写希腊字母。

# winforms - 尽可能大地缩放 FlowLayout 中的组件

> ID：15930182
> 
> 赞同：1
> 
> 时间：2013-04-10T15:30:19.133
> 
> 标签：winforms, user-interface, resize, picturebox, flowlayout

如何缩放 PictureBox 组件以最适合屏幕上的给定空间，同时保持它们的纵横比（与实际图像或其 SizeMode 相互依赖）？

我测试了将 FlowLayout 的 Dock 和 PictureBox 设置为 Fill。我还使用面板作为包装器进行了测试，并测试了 AutoSize 和 AutoSizeMode 的不同设置。

提供有关背景的更多信息：我想在应用程序的视口中动态添加和删除图像，因此 TableLayout 在第一步中是静态的。我不得不承认我也在考虑手动计算位置的大小 - 或者动态调整 TableLayout 的行数和列数 - 但在我看来很容易出错。我认为拥有 FlowLayout 和自动调整大小的组件应该是正确的方法 - 但它似乎不是那样工作的。（作为 Web 开发人员，我只想“将图像向左浮动”，“宽度和高度设置为‘自动’”并且不滚动。）

图像应该有点形象化：第一个图应该指出布局，如果只有一个 PictureBox - 它占用整个空间（或在给定的纵横比下尽可能大）。第二个显示我希望布局如何，如果有两个（三个或四个）图像。第三个图基本上显示了一个带有三个（到六个）图像的调整大小的窗口。

我有什么遗漏吗？

![PictureBox 组件在动态添加更多 PictureBox 组件或调整应用程序大小时的期望行为](https://i.stack.imgur.com/YV3LY.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T20:29:30.260

此代码段执行此操作：

它根据纵横比排列容器内的可见控件（参见代码中的 R 变量），并使用容器边距值来获取项目之间的水平和垂直间隙。容器的填充也被处理。

```
public static void Arrange(Control container)
{
    var H = container.DisplayRectangle.Height;
    var W = container.DisplayRectangle.Width;
    var N = container.Controls.OfType<Control>().Count(c => c.Visible);
    var R = 4 / 3d; // item aspect ratio

    var margin = container.Margin;
    var padding = container.Padding;

    var horizontalGap = margin.Left + margin.Right;
    var verticalGap = margin.Top + margin.Bottom;

    if (N == 0)
        return;

    var bestSizedItem = (

        // Try n rows
        Enumerable.Range(1, N).Select(testRowCount =>
        {
            var testItemHeight = (H - verticalGap * (testRowCount - 1)) / testRowCount;

            return new
            {
                testColCount = (int)Math.Ceiling((double)N / testRowCount),
                testRowCount = testRowCount,
                testItemHeight = (int)testItemHeight,
                testItemWidth = (int)(testItemHeight * R)
            };
        })

        // Try n columns
        .Concat(
        Enumerable.Range(1, N).Select(testColCount =>
        {
            var testItemWidth = (W - horizontalGap * (testColCount - 1)) / testColCount;

            return new
            {
                testColCount = testColCount,
                testRowCount = (int)Math.Ceiling((double)N / testColCount),
                testItemHeight = (int)(testItemWidth / R),
                testItemWidth = (int)testItemWidth
            };
        })))

        // Remove when it's too big
        .Where(item => item.testItemWidth * item.testColCount + horizontalGap * (item.testColCount - 1) <= W &&
                       item.testItemHeight * item.testRowCount + verticalGap * (item.testRowCount - 1) <= H)

        // Get the biggest area
        .OrderBy(item => item.testItemHeight * item.testItemWidth)
        .LastOrDefault();

    Debug.Assert(bestSizedItem != null);

    if (bestSizedItem == null)
        return;

    int x = container.DisplayRectangle.X;
    int y = container.DisplayRectangle.Y;

    foreach (var control in container.Controls.OfType<Control>().Where(c => c.Visible))
    {
        control.SetBounds(x, y,
            bestSizedItem.testItemWidth,
            bestSizedItem.testItemHeight);

        x += bestSizedItem.testItemWidth + horizontalGap;
        if (x + bestSizedItem.testItemWidth - horizontalGap > W)
        {
            x = container.DisplayRectangle.X;
            y += bestSizedItem.testItemHeight + verticalGap;
        }
    }
} 
```

我将此片段放在[Gist](https://gist.github.com/grumly57/5630622)上，以便您可以根据需要做出贡献。

# java - 具有不同原始数据成员但方法相同的 Java 子类

> ID：15930183
> 
> 赞同：0
> 
> 时间：2013-04-10T15:30:19.340
> 
> 标签：java, inheritance

我正在编写一个 Ray Tracer，我有一个 Vec3 类，它是一个典型的数学向量，具有 3 个坐标：X、Y 和 Z。我还创建了一个包含 3 个组件的 Color 类：R、G 和 B。在写了相当多的代码之后，我开始注意到 Color 基本上是一个 Vec3。我开始为 Color 编写许多与 Vec3 相同的方法。看到 DRY 代码是可行的方法，我想合并这两个类，所以我不必为这两个类编写相同的代码。

就目前而言，这里是类：

```
class Vec3{
    public static final int X=0,Y=1,Z=2;
    double components[];
    ...
    // Constructors and Methods
}

class Color extends Vec3{
    public static final int R=0,G=1,B=2;
    int components[];
    ...
    // Constructors and Methods
} 
```

这两个类之间的唯一区别是 Vec3 对其组件使用双精度，而 Color 使用整数。除了数据的类型，所有的方法都完全相同。我最初的想法是尝试创建一个泛型类型 T 的 BaseVec3 类，然后在子类中声明该类型。但是，当然，泛型需要一个类，而不是原语。

**有什么方法可以让我拥有一个单一的方法代码库但具有不同的原始数据类型？**

编辑：我可能应该注意到我已经用 Python 和 C 编程了一段时间，而且自从我接触 Java 以来已经有一段时间了。所以，我对这个问题的第一直觉回答是**否定**的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:37:15.143

我不是 100% 确定你在问什么，但如果你的代码和你展示的一样，难道你没有你想要的吗？在您的代码中，`Color extends Vec3`. 由于这种说法，一个`Color`对象可以被视为一个`Vec3`对象；Vec3 的所有方法都由 Color 继承，采用 Vec3 类型的 arg 的方法将接受 Color 类型的 args。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:38:09.870

每个原语都有其对应的类。例如，`Integer`对于`int`. Java 可以自动装箱，即自动转换它们。

但是，我认为在这种情况下使用继承是不合适的。如果您`Vec3`的实施发生变化怎么办？如果您决定将您的成员设为私有（您应该这样做）怎么办？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:43:56.430

编辑 - 我最后看到你对泛型的评论。这不是自动装箱的用途吗？

你不能只使用这样的泛型吗？

```
public abstract class GenericVector<T> {
    private final T x, y, z;

    public GenericVector(T x, T y, T z) {
        this.x=x;
        this.y=y;
        this.z=z;
    }

    public T getX() { return x; }
    public T getY() { return y; }
    public T getZ() { return z; }
} 
```

# java - JEdi torPane - 来自 ArrayList 的 setText 内容？

> ID：15930184
> 
> 赞同：1
> 
> 时间：2013-04-10T15:30:19.487
> 
> 标签：java, swing, arraylist, jeditorpane

我已经阅读了 JEditorPane 文档，据我所知，您只需要 editorpane.setText(String value); 但是我对java很陌生，这个解决方案不适用于我的代码。我想我错过了一些明显但完全没有想法的东西。

我用这个扩展了 JEditorPane 的类创建了一个新选项卡，这个类旨在打开文件的内容，将它们放在一个数组上，反转数组（所以最新条目在顶部）然后在 JEditorPane 中显示这个列表（使用 JeditorPane 因为我需要将保存 url 变成超链接），

```
public class HistoryPane extends JEditorPane{

ArrayList<String> historyToSort = new ArrayList<String>();

public HistoryPane(){
    setEditable(false); 
    historySort();
}

public void historySort() {

    try (BufferedReader reader = new BufferedReader(new FileReader("BrowserHistory.txt")))
    {

        String currentLine;
        String newLine = new String("\n");

        while ((currentLine = reader.readLine()) != null) {
            historyToSort.add(currentLine + newLine);

        }

    } catch (IOException e) {
        e.printStackTrace();
    } 
    Collections.reverse(historyToSort);
    System.out.println(historyToSort);  
    }

{
}

private void displayHistory(){
    String sorted = historyToSort.toString();
*****   HistoryPane.setText(String sorted); <<<------ PROBLEM SYNTAX.*****

}
} 
```

我在 setText() 括号中尝试了多个不同的条目，但没有成功。我错过了什么？谢谢你。

笔记：

这个类不会编译，因为它依赖于另一个类（我不能全部粘贴），但是这段代码位于我的主类创建的选项卡式窗格中：

错误信息：

> 线程“AWT-EventQueue-0”java.lang.Error 中的异常：未解决的编译问题：令牌“setText”上的语法错误，此令牌后应有标识符 缺少该方法的返回类型 此方法需要正文而不是分号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:08:10.253

好的，尽管您还没有阅读错误消息，但您似乎确实是新手，所以我会提供帮助。

```
HistoryPane.setText(String sorted); 
```

以上不是有效的Java。方法调用采用参数列表，没有类型。

```
HistoryPane.setText(sorted); 
```

现在这是一个有效的方法调用。但它试图调用一个名为HistoryPane*类*的*静态*方法。您想要的是在当前*对象上调用**实例*方法。所以有效的语法是`setText()`**`setText()`**

 ***```
this.setText(sorted); 
```

或者干脆

```
setText(sorted); 
```

那应该解决这个特定的编译错误。在 Eclipse 的 Problems 视图中列出的每个编译错误都得到修复之前，不要尝试运行您的应用程序。

请注意，上面的行不会做你想做的事，但我会让你调查你应该做什么。

我的建议：不要尝试使用 Swing，它是一个相当复杂的野兽，如果你还不知道如何调用方法。从非常简单的 Java 练习开始，不涉及任何 GUI，直到您熟悉 Java 语法，并了解如何阅读、理解和修复基本的编译问题。***

# python - 如何保存我已经知道的数字列表？

> ID：15930186
> 
> 赞同：0
> 
> 时间：2013-04-10T15:30:26.230
> 
> 标签：python, python-3.x

正如标题所示，我目前正在使用 Python 开发 BASIC 模拟器。这是我解决这个问题的代码：

```
def getBASIC():
   l = []
   x = 1
   while x == 1:
      i = input()
      l.append(i)
      if len(i.split()) != 3:
         x = 0
   return l

def findLine(prog, target):
   for l in range(0, len(prog)):
      progX = prog[l].split()
      if progX[0] == target:
          return l

 def execute(prog):
      location = 0
      visited = [False] * len(prog)
      while True:
        T = prog[location].split()[2]
        location = findLine(prog, T)
        visited[location] = True
      if visited[len(visited)-1] == False:
          return "infinite loop"
      else:
          return "success" 
```

第一个函数做了它打算做的事情——将 BASIC 代码的输入转换成一个列表。第二个函数 findLine 也做了它打算做的事情，因为它找到包含等于输入的字符串的项目。然而，最后一个功能，我无法开始工作。我知道我必须做什么，那就是检查它的一部分是否被访问过两次。由于 while 循环的存在，我无法弄清楚如何做到这一点。因此，该函数的后半部分只是占位符。如果您能帮我弄清楚如何解决这个问题，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T23:20:55.970

尝试添加一个 if 语句，当在循环中遇到时，在访问列表中声明一行为真。这是我的解决方案：

```
 def execute(prog):
       location = 0
       visited=[False]*len(prog)
   while True:
           if location==len(prog)-1:
           return "success"
       if visited[location]==True:
           return "infinite loop"
       if visited[location]==False:
           visited[location]=True
       line2strings=prog[location].split()
       T=line2strings[-1]
       location=findLine(prog, T) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:42:10.237

您保留一个已访问过的地点列表（您已经这样做了），然后当您遇到 goto 时，检查它是否对已访问过的线路有效，如果已访问过，则退出。

现在的一个错误是您列出的列表与程序一样长。这很没有意义。只需保留已访问行号的列表，然后检查

```
if current_line in visited: 
```

# asp.net - "Data type mismatch in criteria expression" error inserting Dates into Date/Time Field in Access database

> ID：15930187
> 
> 赞同：0
> 
> 时间：2013-04-10T15:30:28.980
> 
> 标签：asp.net, vb.net, ms-access, datetime-format

I am using the Calendar extender to extend a textbox in ASP.NET inside of Visual Studio 2010\. I am trying to insert the date of an event into the database along with other bits of information. I am receiving the "Data type mismatch in criteria expression" error when trying to insert into the database.

I tried using DateTime.ParseExact to convert the string date to Access Date/Time but still no luck.

Here is my code behind:

> ```
> Protected Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
> 
>     Dim oleDbConn As New OleDb.OleDbConnection(ConfigurationManager.ConnectionStrings("BookMeetConnString").ConnectionString)
>     Dim SqlString As String = "Insert into Events(EventTitle,EventDescription,EventDate,EventCategory) Values (@f1,@f2,@f3,@f4)"
>     Dim cmd As OleDbCommand = New OleDbCommand(SqlString, oleDbConn)
> 
>     cmd.CommandType = CommandType.Text
>     cmd.Parameters.AddWithValue("@f1", tb_eventtitle.Text)
>     cmd.Parameters.AddWithValue("@f2", tb_eventdescription.Text)
>     cmd.Parameters.AddWithValue("@f3", DateTime.ParseExact(tb_eventdate.Text, "dd/MM/yyyy",
>     CultureInfo.InvariantCulture))
>     cmd.Parameters.AddWithValue("@f4", dd_eventcategory.SelectedValue)
>     oleDbConn.Open()
>     cmd.ExecuteNonQuery()
>     System.Threading.Thread.Sleep("2000")
>     Response.Redirect("~/calendar.aspx")
> End Sub 
> ```

Here is my ASP.NET code (notice that I am also formatting the date inserted into the textbox by the CalendarExtender as "dd/MM/yyyy"):

> ```
>  <asp:TextBox ID="tb_eventdate" runat="server" ToolTip="Enter a
>  date"></asp:TextBox>
>                 <ajaxToolkit:CalendarExtender ID="tb_eventdate_CalendarExtender"  Format="dd/MM/yyyy" runat="server"
> 
>                     TargetControlID="tb_eventdate">
>                 </ajaxToolkit:CalendarExtender> 
> ```

The field in my Access database is of type "Date/Time".

I don't know why I am having this problem as I have managed to retrieve dates from the database in another function and converted them ToString:

> ```
>  Function GetEventListing(selectedDay As DateTime) As DataTable
>     '--read event listing for the given day from an Access query
>     Dim con As OleDbConnection = GetConnection()
>     Dim cmd As OleDbCommand = New OleDbCommand()
>     cmd.Connection = con
>     cmd.CommandText = String.Format("Select * from EventInfo Where EventDate >= #{0}# And EventDate < #{1}#", _
>                                     selectedDay.ToString("dd/MM/yyyy"), _
>                                     selectedDay.AddDays(1).ToString("dd/MM/yyyy"))
>     Dim ds As DataSet = New DataSet()
>     Dim da As OleDbDataAdapter = New OleDbDataAdapter(cmd)
>     da.Fill(ds)
>     con.Close()
> 
>     Return ds.Tables(0)
> End Function 
> ```

What could be the cause of the error I am receiving?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:35:00.990

也许不是日期让你感到困惑。我想您可能会收到错误，因为您添加了一个`DateTime`值作为参数（而不是转换为格式为`yyyy-mm-dd`or的字符串的日期`m/d/yyyy`），但是我在 C# 中尝试了以下操作，它工作正常...

```
static void Main(string[] args)
{
    OleDbConnection conn = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Documents and Settings\Administrator\Desktop\Database1.accdb;");
    conn.Open();
    OleDbCommand cmd = new OleDbCommand("INSERT INTO Events (EventName, EventDate) VALUES (?, ?)", conn);
    cmd.Parameters.AddWithValue("?", "TestEvent");
    cmd.Parameters.AddWithValue("?", (new DateTime(2013,3,21)));
    cmd.ExecuteNonQuery();
    conn.Close();

    Console.WriteLine("Done.");
} 
```

...因此，如果您的 DateTime 解析返回一个有效的 DateTime 值，那么看起来您的查询*应该可以*工作。

如果确实是 SQL 语句的执行失败了，那么唯一可能的另一个嫌疑人是`dd_eventcategory.SelectedValue`. 也许这需要`.ToString()`'d...？

# python - wxpython + matplotlib：自动调整 matplotlib 图形的大小

> ID：15930189
> 
> 赞同：1
> 
> 时间：2013-04-10T15:30:31.260
> 
> 标签：python, layout, matplotlib, wxpython

这个 python 程序在 wxpython 窗口中绘制一个图形。

如何更改程序以便：

*   当我调整窗口大小时，图形会调整大小
*   主窗口不能调整为小于特定尺寸？（比如说，窗口默认大小的一半）

.

```
# adapted from:
# http://wiki.wxpython.org/Getting%20Started
# http://www.cs.colorado.edu/~kena/classes/5448/s11/presentations/pearse.pdf

import wx
import pylab as pl
import matplotlib
from matplotlib.backends.backend_wxagg import FigureCanvasWxAgg as FigureCanvas

class GUIPanel(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)
        self.parent = parent

        # create some sizers
        sizer = wx.BoxSizer(wx.VERTICAL)

        # A button
        self.button =wx.Button(self, label="Tada!")
        self.Bind(wx.EVT_BUTTON, self.OnClick,self.button)

        # put up a figure
        self.figure = pl.figure()
        self.axes = self.drawplot(self.figure)
        self.canvas = FigureCanvas(self, -1, self.figure)

        sizer.Add(self.canvas, 0, wx.ALIGN_CENTER|wx.ALL)
        sizer.Add(self.button, 0, wx.ALIGN_CENTER|wx.ALL)

        self.SetSizerAndFit(sizer)  
    def log(self, fmt, *args):
        print (fmt % args)
    def OnClick(self,event):
        self.log("button clicked, id#%d\n", event.GetId())
    def drawplot(self, fig):
        ax = fig.add_subplot(1,1,1)
        t = pl.arange(0,1,0.001)
        ax.plot(t,t*t)
        ax.grid()
        return ax

app = wx.App(False)
frame = wx.Frame(None)
panel = GUIPanel(frame)
frame.Fit()
frame.Center()
frame.Show()
app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:19:34.013

1）修改你设置你的sizer的方式：

```
sizer.Add(self.canvas, 1, wx.EXPAND | wx.ALL) 
```

这是[方法参考](http://www.wxpython.org/docs/api/wx.Sizer-class.html#Add)。[安装和使用wxPython Demo](http://wxpython.org/download.php)也很有帮助。Sizer 很好地覆盖在那里。顺便说一句：`wx.ALL`除非您指定边框，否则没用。

* * *

2）然后将其添加到您的框架设置中`frame.Show()`：

```
size = frame.GetSize()
frame.SetMinSize((size[0] / 2, size[1] / 2)) 
```

# sql - Coldfusion passing variable through url

> ID：15930190
> 
> 赞同：0
> 
> 时间：2013-04-10T15:30:34.243
> 
> 标签：sql, coldfusion

I am trying to pass the ID of a username through the URL (this part works). Then on to the next page where I display the user's information. However I cannot get the latter part to work correctly. Below is my code

Working URL code:

```
<a href="memberdetails.cfm?id='#custlist.customerID#'">#custlist.userName#<br /> 
```

The non working part:

```
<cfquery name="custlist" datasource="homesource">
       id = $_GET['customerID'] ;
   SELECT * FROM customers WHERE customerID = id
</cfquery> 
```

Any help with this problem would be welcomed. I am just starting to learn ColdFusion (like today). This application is just for me playing about, testing the waters. So if possible, no debates on me passing the id through the url.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T15:38:09.893

要引用 URL 变量，只需引用前缀为`url`. 您将 customerID 传递给`id`参数，因此您将指定`url.id`. 在字符串中，您需要用井号将其括起来：`"#url.id#"`

以下是更改查询以使用示例中的 URL 变量的方法：

```
<cfquery name="custlist" datasource="homesource">
    SELECT * 
    FROM customers 
    WHERE customerID = <cfqueryparam value="#url.id#" cfsqltype="cf_sql_integer">
</cfquery> 
```

为了更加安全，请务必使用`cfqueryparam`将变量绑定到您的 SQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:05:32.750

其他答案已经告诉您如何解决手头的问题。这是额外的东西。你有这个：

```
<cfquery name="custlist" datasource="homesource">
id = $_GET['customerID'] ;
SELECT * FROM customers WHERE customerID = id
</cfquery> 
```

错误是在 ColdFusion 应用程序中使用 php 代码。当然这很愚蠢，但你可以这样做：

```
<cfquery name="custlist" datasource="homesource">
<cfset id = url.customerID>
SELECT * FROM customers WHERE customerID = id
</cfquery> 
```

关键是您可以将其他冷融合标签放在 cfquery 块中。这是一个更实际的例子。

```
<cfquery name="custlist" datasource="homesource">
SELECT * 
FROM customers 
<cfif StructKeyExists(url,"customerid")>
WHERE customerID = <cfqueryparam cfsqltype="cf_sql_integer" value="#url.customer_id#">
</cfif>
</cfquery> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:37:04.570

```
<cfquery name="custlist" datasource="homesource">
   SELECT * FROM customers WHERE customerID = <cfqueryparam cfsqltype="cf_sql_integer"   value="#url.customer_id#">
</cfquery> 
```

切勿直接在查询中使用客户端数据，在本例中为 URL。整数参数将阻止所有 SQL 注入黑客尝试。由于数据库通信的发生方式（sql 准备语句），它还提高了性能。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-10T15:36:52.567

我建议购买一本关于冷融合的书，因为这是他们教给你的最基本的东西。

```
<cfquery name="custlist" datasource="homesource">
   SELECT * FROM customers WHERE customerID = <Cfqueryparam  cfsqltype="cf_sql_integer" value="#url.id#">
</cfquery> 
```

# javascript - Javascript 类和事件处理程序

> ID：15930195
> 
> 赞同：0
> 
> 时间：2013-04-10T15:30:37.780
> 
> 标签：javascript, oop, events

我对此 javascript 代码有疑问：

```
function MyClass() {
    var id_nr = Math.ceil(Math.random() * 999999);
    this.button_id = 'button_' + id_nr;
}

MyClass.prototype = {
    createButton: function() {
        var msg = 'Button \'' + this.button_id + '\' was clicked';

        var my_button = (
            '<input type="button" id="'
            + this.button_id
            + '" value="Click Me" /\>'
        );

        document.body.innerHTML += '<div>' + my_button + '</div>';
        document.getElementById(this.button_id).onclick = function() { alert(msg); }
    }
};

window.onload = function() {
    var s = new MyClass();
    s.createButton();
}; 
```

是的，这个当前的代码工作正常。但是当我添加多个 MyClass 对象时会出现问题：

```
window.onload = function() {
    var s = new MyClass();
    s.createButton();

    var w = new MyClass();
    w.createButton();

    /* ...and many other buttons */

}; 
```

出于某种原因，仅当我单击最后创建的按钮时才会触发***onclick事件。***我不知道为什么。

一种解决方法可能是这样的：

```
<input type="button" onclick="javascript:doSomeThing();" /> 
```

但不幸的是，这不是正确的解决方案，因为我的目标是 onclik 事件也应该能够调用另一个类方法。（这些方法尚未创建）。

如何使此代码正常工作？任何形式的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:32:18.153

当您使用时`innerHTML`，内容会从 DOM 中剥离，然后再次读取和解析，从而破坏您可能添加的任何过去的事件侦听器。

如果您想在 vanilla JS 中执行此操作，请考虑使用[`appendChild()`](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)，而且我建议使用[`addEventListener()`](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener?redirect=no). 您的代码将如下所示：

```
var my_button   = document.createElement('input');
my_button.type  = 'button';
my_button.id    = this.button_id;
my_button.value = 'Click me';

document.body.appendChild(my_button);
my_button.addEventListener('click', function () { alert (msg) }); 
```

`[**Working example with vanilla Javascript**](http://jsbin.com/ahosum/1/edit)`

如果您愿意使用一些 jQuery，这将更容易实现。你的方法看起来像：

```
var my_button = $('<input>')
                .prop('type', 'button')
                .prop('id',   this.button_id)
                .val('Click Me')
                .on('click', function () { alert(msg) } );

$('body').append(my_button) 
```

`[**Working example with jQuery**](http://jsbin.com/ahosum/3/edit)`

或者，您也许可以使用该[`jQuery.on()`](http://api.jquery.com/on/#on-events-selector-data)方法将事件处理程序委托给按钮的所有后续实例。

`[**Working example with delegated event handler**](http://jsbin.com/ahosum/6/edit)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:44:01.407

这里使用innerHTML 似乎破坏了事件监听器“onclick”。

您可以通过使用 document.createElement 方法来创建您的 html 元素来避免这种情况：

```
var but = document.createElement("input");
but.type = "button";
but.id = this.button_id;
but.value = "Click me";

document.body.appendChild(but); 
```

就个人而言，我更喜欢使用 jQuery 来操作 DOM 树元素，因为它为此提供了非常强大的工具。

# python-2.7 - Jinja Template Sub Loop Optimization

> ID：15930196
> 
> 赞同：1
> 
> 时间：2013-04-10T15:30:38.167
> 
> 标签：python-2.7, flask, jinja2

I have the following loop using the Jinja template in a Flask project:

```
<select style="width: 125px;" id="ddlQuarters" name="ddlQuarters">
    {% for e in element_values if e.DataKey == 'Quarter' %}
        {% for v in e.DataElementValues | reverse %}
            <option value="{{ v.DataElementValueId }}">{{ v.Value }}</option>
        {% endfor %}
    {% endfor %}
</select> 
```

Is there a way to optimize the jinja for loop so I don't need to do a sub loop to get the data elements that I want? Or, another question, would doing it in a single loop be any different as far as speed goes?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T23:13:07.730

我通常会尽量避免在模板中出现这样的嵌套循环。我会在控制器/视图中执行此操作，创建一个列表并将我的列表发送到模板。

当然，您的方法是完全有效的。您是否注意到性能/速度问题？如果是这样，您可能需要考虑实施缓存策略（如果使用 Flask [http://pythonhosted.org/Flask-Cache/](http://pythonhosted.org/Flask-Cache/)）并直接在模板中缓存您的循环。例如 - 这会将您的循环缓存 5 分钟：

```
{% cache 60*5 %}
<select style="width: 125px;" id="ddlQuarters" name="ddlQuarters">
    {% for e in element_values if e.DataKey == 'Quarter' %}
        {% for v in e.DataElementValues | reverse %}
            <option value="{{ v.DataElementValueId }}">{{ v.Value }}</option>
        {% endfor %}
    {% endfor %}
</select>
{% endcache %} 
```

如果您决定将逻辑移动到视图（如上所述），您还可以在将列表下推到模板之前缓存列表。

G

# jquery - 避免每次单击链接时打开相同的对话框

> ID：15930197
> 
> 赞同：0
> 
> 时间：2013-04-10T15:30:41.840
> 
> 标签：jquery, jquery-ui

我有一个菜单，菜单中的每个链接都使用模式对话框打开。我试图避免每次单击链接多次时都创建相同的对话框。

我试过检查

```
if(outputHolder.hasClass('ui-dialog-content:visible')){return false;} 
 $("body").append(outputHolder);
 outputHolder.load($this.attr("href"), null, function() {      
 outputHolder.dialog( 
```

否则它将显示对话框..

有什么建议么？？

完整代码

[http://jsfiddle.net/6qgTr/5/](http://jsfiddle.net/6qgTr/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T01:41:35.113

您希望它只在第一次显示对话框时进行 ajax 调用，但在随后的单击中，对话框会重新显示而不会重新进行 ajax 调用，对吗？

如果是这种情况，我认为您首先必须摆脱以下代码，因为它会在对话框关闭时删除对话框的元素。没有它，元素​​将保留，但会被隐藏。

```
close: function(event, ui) { $(this).remove(); } 
```

您还需要跟踪对话框 div 元素，以便可以重复使用它们。你可以使用这个`.data()`方法。

```
function openDialog($dialogDiv) {
    $dialogDiv.dialog({
        // options, but not including 'close'
   });
}

function loadEmployeesShow(link) {
    var $link = $(link),
        $dialogDiv = $link.data('dialogDiv');
    if (!$dialogDiv) {
        console.log('creating new dialog');
        $dialogDiv = $('<div>');
        $link.data('dialogDiv', $dialogDiv);
        $dialogDiv.load($link.attr('href'), function() { openDialog($dialogDiv); });    
    } else {
        console.log('reusing existing dialog');
        openDialog($dialogDiv);
    }
}; 
```

[**jsfiddle**](http://jsfiddle.net/john_s/6qgTr/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T23:16:36.850

您应该首先在您的 html 代码中创建一个 div，该 div 将用作对话框的基础，而不是动态创建它。然后，您可以打开和关闭同一个对话框，而不是每次都创建一个新对话框。

还要将所有 JavaScript 代码与 HTML 分开。

在您的对话设置中，您拥有的第一个选项是`bgiframe: true`这不是对话的有效选项。

您将无法使用来自的数据加载对话框`https://www.google.com.ar`

引用[jQuery ajax 页面](http://api.jquery.com/jQuery.ajax/)

> 由于浏览器安全限制，大部分“Ajax”请求都受同源策略的约束；请求无法从不同的域、子域或协议成功检索数据。

您必须指向您自己的服务器上的一个脚本，该脚本将执行您需要的任何检索。

[我用我认为你想要的东西创造了一个新的小提琴。](http://jsfiddle.net/oumichaelm/6qgTr/8/)

# .net - 连接到 .sdf

> ID：15930199
> 
> 赞同：2
> 
> 时间：2013-04-10T15:30:50.097
> 
> 标签：.net, asp.net-mvc, entity-framework, sql-server-ce

我是这个世界的新手，坦率地说，我不喜欢它的复杂性，但那不是重点。

我创建了一个名为 的新数据库`Sample.sdf`，然后创建了一个新的 ASP.NET MVC3 应用程序。我正在阅读您必须将`.sdf`数据库复制到项目的根目录。所以我这样做了，我尝试为这个紧凑型数据库创建一个新的 ADO.net 连接，但我必须这样做吗？

我可以不在 web.config 中使用连接字符串对象并将其配置为指向该数据库吗？如果是这样有没有办法测试连接？

我很好奇，因为我打算将它与实体框架一起使用。

**更新：**

所以我想出了一些事情：

一个`.sdf`必须进入`App_Data`文件夹，然后从他们那里创建一个基于现有数据库的 ADO.net 实体模型。它会自动查看数据库并为您完成其余的工作，或者至少在我的情况下是这样做的。

但是它会引发错误，在实体数据模型向导中单击下一步后，在选择我的数据连接后，我得到：

> 无法创建新数据库。
> 
> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）
> 
> System.Data.SqlClient.SqlException (0x80131904)：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供程序：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() 的 System.Data.SqlClient.SqlInternalConnection.OnError
> （SqlException 异常，布尔型 breakConnection） 。 Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean IntegratedSecurity)
> 
> 在 System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin（ServerInfo serverInfo，字符串 newPassword，布尔 ignoreSniOpenTimeout，TimeoutTimer 超时，SqlConnection owningObject）
> 在 System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover（ServerInfo serverInfo，字符串 newPassword，布尔重定向用户实例，SqlConnection owningObject，SqlConnectionString connectionOptions，TimeoutTimer 超时）
> 在 System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist（SqlConnection owningObject，TimeoutTimer 超时，SqlConnectionString connectionOptions，String newPassword，Boolean redirectedUserInstance）
> 在 System.Data.SqlClient.SqlInternalConnectionTds..ctor（DbConnectionPoolIdentity 标识，SqlConnectionString connectionOptions，对象 providerInfo，字符串 newPassword，SqlConnection owningObject，布尔重定向用户实例）
> 在 System.Data.SqlClient.SqlConnectionFactory.CreateConnection（DbConnectionOptions 选项，对象 poolGroupProviderInfo，DbConnectionPool 池， DbConnection owningConnection)
> 在 System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options)
> 在 System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject)
> 在 System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject )
> 在 System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject)
> 在 System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
> 在 System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
> 在 System.Data。 SqlClient.SqlConnection.Open()
> 在 Microsoft.SqlServer.Management.Common.ConnectionManager.InternalConnect(WindowsIdentity impersonatedIdentity)
> 在 Microsoft.SqlServer.Management.Common.ConnectionManager.Connect()

我不确定如何进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:05:33.820

我相信您走在正确的道路上，但由于这是您第一次，我建议您按照 Microsoft 的逐步演练进行操作，该演练可在此处获得：

数据库优先方法：http: [//msdn.microsoft.com/en-us/data/jj206878.aspx](http://msdn.microsoft.com/en-us/data/jj206878.aspx)

通用学习资源页面在这里：http: [//msdn.microsoft.com/en-us/data/ee712907](http://msdn.microsoft.com/en-us/data/ee712907)

这就是我一开始用来掌握 MVC 和实体框架的方法。它非常简单直接，我向你保证，你会爱上它。

我希望这有帮助。

# python - 将 bash 输出重定向到 python 脚本

> ID：15930203
> 
> 赞同：5
> 
> 时间：2013-04-10T15:30:55.213
> 
> 标签：python, bash

我正在使用**zbarimg**扫描条形码，我想将输出重定向到 python 脚本。如何重定向以下命令的输出：

```
zbarimg code.png 
```

到 python 脚本，脚本应该是什么样的？

我尝试了以下脚本：

```
#!/usr/local/bin/python
s = raw_input()
print s 
```

我通过发出以下命令使其成为可执行文件：

```
chmod +x in.py 
```

比我跑了以下：

```
zbarimg code.png | in.py 
```

我知道这是错的，但我想不出别的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:34:35.553

用于[`sys.stdin`](http://docs.python.org/2/library/sys.html#sys.stdin)从 python 脚本中的标准输入读取。例如：

```
import sys
data = sys.stdin.readlines() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T15:35:43.610

实际上，从命令中使用管道运算符`|`是正确的。它没有工作吗？

您可能需要明确指定 python 脚本的路径，如

```
zbarimg code.png | ./in.py 
```

正如@dogbane 所说，从标准输入中读取`sys.stdin.readlines()`比使用更好`raw_input`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-09T22:01:10.713

我不得不调用 python 程序命令 `somecommand | python mypythonscript.py`而不是`somecommand | ./mypythonscript.py`. 这对我有用。后者产生错误。

`soxi -D *mp3` 我的目的：通过管道输出到 python来总结所有 mp3 文件的持续时间：`soxi -D *mp3 | python sum_durations.py`

* * *

细节：

`soxi -D *mp3`产生：

```
122.473016
139.533016
128.456009
307.802993
... 
```

sum_durations.py 脚本：

```
import sys
import math
data = sys.stdin.readlines()
#print(data)
sum = 0.0
for line in data:
    #print(line)
    sum += float(line)

mins = math.floor(sum / 60)
secs = math.floor(sum) % 60

print("total duration: " + str(mins) + ":" + str(secs)) 
```

# iphone - 位置服务设置为“开启”时应用程序崩溃

> ID：15930214
> 
> 赞同：1
> 
> 时间：2013-04-10T15:31:30.610
> 
> 标签：iphone, ios, cocoa-touch

我有一个使用该`ALAssets`框架访问用户照片库的应用程序。我编写了一些代码来检测应用程序是否有权访问照片库，如果没有，我会显示一条警告消息，告诉用户在设置中为应用程序打开位置服务。问题是，当我进入设置并为我的应用程序打开或关闭位置服务时，它会使应用程序崩溃（无论应用程序在哪个视图控制器上，即使没有加载 ALAssets 的视图控制器，它仍然会崩溃） .

有谁知道为什么会这样，我能做些什么来解决这个问题？

更新：这是崩溃报告，在主要的这一行：

```
int retVal = UIApplicationMain(argc, argv, nil, @"AppDelegate"); 
```

它说线程 1：信号 SIGKILL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:43:27.997

您的应用程序正在被 iOS 杀死。这总是会发生影响您的应用程序的隐私设置更改。

请参阅：[更改隐私设置时被 SIGKILL 杀死的应用程序](https://stackoverflow.com/questions/12652502/app-killed-by-sigkill-when-changing-privacy-settings)

此外：请求访问位置服务，不会授予您访问照片库的权限！那是一个单独的隐私设置。

# forms - 带表单的 MvcMailer

> ID：15930220
> 
> 赞同：0
> 
> 时间：2013-04-10T15:31:39.267
> 
> 标签：forms, model-view-controller, mvcmailer

我是一个菜鸟，我想要一个带有表单的应用程序来发送电子邮件，

这是我要修改的代码：

```
var mailMessage = new MvcMailMessage { 
       Subject = "welcome" };
       mailMessage.To.Add("windchester**2@gmail.com");
       PopulateBody(mailMessage, viewName: "Welcome");
       return mailMessage; 
```

所以主题、正文和 Mail.message.To.Add 信息应该来自一个表单，

你能指引我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:34:26.367

你需要尝试更多的东西。创建一个表单，并使用 javascript 或 php 将字段值回显到屏幕上。

一旦你得到这个工作，尝试使用你上面的方法邮寄这些东西，或者找到一个相同的东西的 php 版本。

在这一点上忘记 MVC。它更像是一个先进的概念。

# r - 如何合并包含在唯一 csv 中的一对日期和值

> ID：15930222
> 
> 赞同：0
> 
> 时间：2013-04-10T15:31:40.640
> 
> 标签：r, excel, csv, time-series, zoo

我们有一个 csv 文件，其中包含 Excel 格式的日期和经理 A 和经理 B 的导航，如下所示：

```
Date,Manager A,Date,Manager B
41346.6666666667,100,40932.6666666667,100
41347.6666666667,100,40942.6666666667,99.9999936329992
41348.6666666667,100,40945.6666666667,99.9999936397787
41351.6666666667,100,40946.6666666667,99.9999936714362
41352.6666666667,100,40947.6666666667,100.051441180137
41353.6666666667,100,40948.6666666667,100.04877283951
41354.6666666667,100.000077579585,40949.6666666667,100.068400298752
41355.6666666667,100.00007861475,40952.6666666667,100.070263374822
41358.6666666667,100.000047950872,40953.6666666667,99.9661095940006
41359.6666666667,99.9945012295984,40954.6666666667,99.8578245935173
41360.6666666667,99.9944609274138,40955.6666666667,99.7798031949116
41361.6666666667,99.9944817907402,40956.6666666667,100.029523604978
41366.6666666667,100,40960.6666666667,100.14859511024
41367.6666666667,99.4729804387476,40961.6666666667,99.7956029017769
41368.6666666667,99.4729804387476,40962.6666666667,99.7023420799123
41369.6666666667,99.185046151864,40963.6666666667,99.6124531927299
41372.6666666667,99.1766469096966,40966.6666666667,99.5689030038018
41373.6666666667,98.920738006398,40967.6666666667,99.5701493637685
,,40968.6666666667,99.4543885041996
,,40969.6666666667,99.3424528379521 
```

我们要创建一个具有以下结构的动物园对象 [日期，经理 A 导航，经理 B 导航]。

读取 csv 文件后：

```
data = read.csv("...", header=TRUE, sep=",") 
```

我们为分割对象设置了一个索引，并使用 lapply 来分割

```
INDEX <- seq(1, by = 2, length = ncol(data) / 2)

data.zoo <- lapply(INDEX, function(i, data) data[i:(i+1)], data = zoo(data)) 
```

我坚持日期是 Excel 格式并且不知道如何解决这些问题。问题是否以正确的方式设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:12:47.983

如果您只想将日期转换为正确的日期，那么您可以很容易地做到这一点。您需要知道的是原始日期。您的数字代表自原始日期以来经过的整数和小数天数。通常这是 1990 年 1 月 0 日！！！去想，但要小心，因为我认为情况并非总是如此。你可以试试这个...

```
# Excel origin is day 0 on Jan 0 1900, but treats 1900 as leap year so...
data$Date <- as.Date( data$Date , origin = "1899/12/30")
data$Date.1 <- as.Date( data$Date.1 , origin = "1899/12/30")
# For more info see ?as.Date 
```

如果您也有兴趣保持时间，可以使用`as.POSIXct`，但您还必须指定时区（默认为 UTC）；

```
data$Date <- as.POSIXct(data$Date, origin = "1899/12/30" )
head(data)
#                    Date Manager.A     Date.1 Manager.B
#   1 2013-03-13 16:00:00       100 2012-01-24 100.00000
#   2 2013-03-14 16:00:00       100 2012-02-03  99.99999
#   3 2013-03-15 16:00:00       100 2012-02-06  99.99999
#   4 2013-03-18 16:00:00       100 2012-02-07  99.99999
#   5 2013-03-19 16:00:00       100 2012-02-08 100.05144
#   6 2013-03-20 16:00:00       100 2012-02-09 100.04877 
```

# razor - Using if statements in Razor/Webmatrix

> ID：15930226
> 
> 赞同：0
> 
> 时间：2013-04-10T15:32:02.833
> 
> 标签：razor, if-statement, webmatrix

I current have a foreach statement, which shows a group of images using a URL stored within the database.

Some of the records, however, haven't been assigned a picture yet, so I want any records with a missing URL to show a generic image.

Here's the code I currently have:

```
@foreach(var row in qPropertyDetails) {
    <div class="container">
        <div class="row">
            <div class="span12" style="padding-bottom: 10px">
                <div class="row thumb-pad">
                    <div class="span4">
                        <img src="@row.PrimaryImage" alt="">
                    </div>
                </div>
            </div>
        </div>
    </div>
} 
```

I'm guessing I need an IF statement within the foreach loop, but I don't know the correct syntax. I'm guessing maybe it's something like:

```
@foreach(var row in qPropertyDetails) {
    <div class="container">
        <div class="row">
            <div class="span12" style="padding-bottom: 10px">
                <div class="row thumb-pad">
                    @if (@row.PrimaryImage=Null) {
                        <div class="span4"><img src="~\tempimage.jpg" alt=""></div>
                    }
                    else {
                         <div class="span4"><img src="@row.PrimaryImage" alt=""></div>    
                    }
                </div>
            </div>
        </div>
    </div>
} 
```

But that doesn't work.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:37:16.647

检查 null 的正确语法是：`@if (@row.PrimaryImage == null) {`

# pdf - converting multipage pdf to series of images

> ID：15930228
> 
> 赞同：0
> 
> 时间：2013-04-10T15:32:07.317
> 
> 标签：pdf, ghostscript

I'm trying to use ghostscript to convert a multi-page PDF to a multi-page TIFF and am having some difficulty.

The tiff gets created just fine but it's asking me to manually hit enter for each page in the PDF. eg.

```
Page 39
>>showpage, press <return> to continue<< 
```

This doesn't lend itself well to automation. I didn't see a /force-like option in the man page so... any ideas as to how I can overcome this?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:56:00.153

我想通了 - 需要添加`-dNOPAUSE -dBATCH`到 CLI 调用中。

# java - 自动生成唯一的 varchar 字段 - mySQL、Java、Hibernate

> ID：15930232
> 
> 赞同：0
> 
> 时间：2013-04-10T15:32:16.613
> 
> 标签：java, mysql, sql, hibernate, auto-increment

**背景：**我有一个名为 Contact 的数据库表。我系统的所有用户在此表中都有他们联系人的详细信息，包括名字、姓氏，以及一个名为“UniqueId”的 varchar 字段。系统用户可以在 UniqueId 字段中放置任何内容，只要它与该用户的其他联系人的唯一 ID 不同即可。

**目标：**我现在需要更改我的代码，以便在用户不提供唯一 ID 时自动生成唯一 ID。这应该简短且视觉上令人愉悦。理想情况下，它可能只是一个自动递增的数字。但是，AUTO_INCREMENT 适用于整数字段，而不是 varchar 字段。

另请注意，每个联系人 UniqueId 需要与该用户的其他联系人不同，但不一定对整个系统都是唯一的。因此，以下 UniqueIds 是有效的：

```
Contact
    UserId  Firstname Lastname UniqueId
    1       Bob       Jones    1
    1       Harold    Smith    2
    2       Joe       Bloggs   1 
```

**问题：**那么，我该如何实现呢？是否有一种可靠且干净的方法可以让数据库为现有 UniqueId varchar 字段中的每个联系人生成一个唯一 ID（如果可能，这是我的偏好）？或者我是否被迫让 Java 去获取下一个可用的唯一 ID，如果是这样，那么最可靠的方法是什么？或者任何替代解决方案？

**编辑 - 4 月 11 日上午：**我们使用休眠来映射我们的字段。我刚刚开始研究这是否可以提供替代解决方案？有什么意见吗？

**编辑 - 4 月 11 日下午：**目前有 2 个选项很突出，但似乎都没有我想要的理想。

*1.*正如@eis 建议的那样，除了我当前的 varchar 字段之外，我还可以拥有一个自动递增字段。然后，当保存联系人时，也可以将 int 保存在 varchar 字段中，或者在检索联系人时，如果 varchar 为空，则可以使用 int。但是使用两个字段而不是一个字段感觉很混乱和错误

*2.*我正在考虑使用休眠生成器，如[这里](https://stackoverflow.com/questions/12517421/how-to-map-a-string-to-db-sequence-in-hibernate)所讨论的。但这涉及在别处保存下一个 id 和 Java 代码的计数，并且似乎使该过程过于复杂。

如果我现有的 uniqueId 字段是一个 int 字段，则 AUTO_INCREMENT 将简单地工作，并且工作得很好。有没有办法让数据库生成这个但将它保存为字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:01:20.730

我认为你真正应该做的是放弃你当前的“唯一”并生成在整个系统中真正独一无二的新的，总是自动生成并且永远不会由用户提供。您需要做单独的工作才能迁移到新系统。这是我认为保持理智的唯一方法。如果需要，用户可以提供类似别名的东西，以在视觉上更令人愉悦。

从好的方面来说，你可以使用自动增量。

* * *

好的，如果您真的想要您所要求的，还有一个选择。您可能有一个`§§§§`用户永远不允许使用的前缀，并且始终基于该前缀自动生成 id，例如`§§§§1`等`§§§§2`。如果您不允许最终用户以该前缀开头的任何内容，您就会知道不会发生冲突，并且您可以在需要时一一生成它们。

序列将是为其生成数字的理想选择。您在 MySQL 中没有序列，但您可以[像这样](http://www.microshell.com/database/mysql/emulating-nextval-function-to-get-sequence-in-mysql/)模拟它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:55:55.850

抱歉，我真的不知道 MySQL 的语法，但这是我在 SQL Server 中的做法。希望这对你仍然有一些价值。基本上，我只是在计算现有联系人的数量并将其作为 varchar 返回。

```
CREATE FUNCTION GetNewUniqueId
  (@UserId int)
RETURNS varchar(3)
AS
BEGIN
  DECLARE @Count int;

  SELECT @Count = COUNT(*) 
  FROM Contacts 
  WHERE UserId = @UserId;

  SET @Count = @Count + 1;

  RETURN CAST(@Count AS varchar(3));
END 
```

但是，如果您真的想要“视觉上令人愉悦”的东西，为什么不尝试返回更像 的东西`Firstname + Lastname`呢？

```
CREATE FUNCTION GetNewUniqueId
  (@UserId int, @FirstName varchar(255), @LastName varchar(255))
RETURNS varchar(515)
AS
BEGIN
  DECLARE @UniqueId varchar(515), @Count int;

  SET @UniqueId = @FirstName + @LastName;

  SELECT @Count = COUNT(*) 
  FROM Contacts 
  WHERE UserId = @UserId AND LEFT(UniqueId, LEN(@UniqueId)) = @UniqueId;

  IF @Count > 0
    SET @UniqueId = @UniqueId + '_' + CAST(@Count + 1 AS varchar(3));

  RETURN @UniqueId;
END 
```

# javascript - 动态 jquery 加载在旧 IE 上不起作用

> ID：15930233
> 
> 赞同：0
> 
> 时间：2013-04-10T15:32:17.520
> 
> 标签：javascript, jquery, internet-explorer, internet-explorer-8, internet-explorer-9

这适用于现代浏览器，但它没有在 IE <= 9.0 上加载 jQuery。

下面是 index.html 文件中的代码：

```
loadJQuery(function () {
    alert('hello');
}); 
```

然后在另一个文件（通过 包含`<script src>`）我有：

```
 if (typeof(loadJSInclude) == 'undefined') {
 function loadJSInclude(scriptPath, callback)
 {
   var scriptNode = document.createElement('SCRIPT');
   scriptNode.type = 'text/javascript';
   scriptNode.src = scriptPath;

   var headNode = document.getElementsByTagName('HEAD');
   if (headNode[0] != null)
      headNode[0].appendChild(scriptNode);

   if (callback != null)    
   {
     scriptNode.onreadystagechange = callback;            
     scriptNode.onload = callback;
   }
 }

 function loadJQuery(task) {
    if (typeof(jQuery) == "undefined") {
        loadJSInclude('http://code.jquery.com/jquery-latest.min.js', function() {
            $(document).ready(task)
        });
    } else {
        $(document).ready(task);
    }
 }
} 
```

关于为什么这在 IE <= 9.0 上不起作用的任何想法？我尝试向 loadJQuery 函数添加许多警报，它们都在显示，我的猜测是我错误地将节点添加到旧 IE 的 head 元素中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:41:47.943

你忘记了`;`结尾的`$(document).ready(task)`。

请注意，这可能不是实际问题，因为 JS（技术上）不需要*分号*，但它可能会导致问题，尤其是在处理动态内容时。

此外，`'undefined'`并且`"undefined"`不需要引号。

（由于对OP的误解而删除） ~~至于您的实现，请参见[this post](https://stackoverflow.com/a/912713/1506793)~~

你试过设置`scriptNode.async = true`吗？

另外，你看过[这个帖子](https://stackoverflow.com/q/14044248/1506793)吗？没有可接受的答案，但 OP 指定了一个在 IE（但不是 Chrome）中有效的解决方案。我建议您尝试调整该解决方案，测试它是否仍然无法在 Chrome 中运行，如果没有，我们可以从那里继续调试。这是帖子中的 IE8 解决方案：

```
<div id="test">
<p>This is a test.</p>
</div>

<script>
if (typeof jQuery == 'undefined') {
    s = document.createElement("script");
    s.src = "//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js";
    if (s.addEventListener) {
        s.addEventListener("load", runScript, false);
    } else if (s.readyState) {
        s.onreadystatechange = runScript;
    }

} else {
    runScript();
}

function runScript() {
    document.getElementsByTagName('head')[0].appendChild(s);
    $('#test').css('font-size', '50px');

}
</script> 
```

正如我所说，我没有写这个，我自己也没有测试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T02:22:46.503

一个简单的解决方案是像这样包含 jQuery：

```
window.jQuery || document.write('<script src="/js/jquery/jquery.js">\x3C/script>'); 
```

# python - Querying ElasticSearch with Python Requests not working fine

> ID：15930235
> 
> 赞同：9
> 
> 时间：2013-04-10T15:32:25.763
> 
> 标签：python, elasticsearch, python-requests

I'm trying to do full-text search on a mongodb db with the Elastic Search engine but I ran into a problem: no matters what search term I provide(or if I use query1 or query2), the engine always returns the same results. I think the problem is in the way I make the requests, but I don't know how to solve it.

Here is the code:

```
def search(search_term):
    query1 = {
        "fuzzy" : {
            "art_text" : {
                "value" : search_term,
                "boost" : 1.0,
                "min_similarity" : 0.5,
                "prefix_length" : 0
            }
        },
        "filter": {
            "range" : {
                "published": {
                    "from" : "20130409T000000",
                    "to": "20130410T235959"
                }
            }
        }
    }
    query2 = {
        "match_phrase": { "art_text": search_term }
    }

    es_query = json.dumps(query1)
    uri = 'http://localhost:9200/newsidx/_search'
    r = requests.get(uri, params=es_query)
    results = json.loads( r.text )
    data = [res['_source']['api_id'] for res in results['hits']['hits'] ]
    print "results: %d" % len(data)
    pprint(data) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-12T23:44:46.627

该`params`参数不适用于正在发送的数据。如果您尝试将数据发送到服务器，您应该专门使用 data 参数。如果您尝试发送查询参数，那么您不应该对它们进行 JSON 编码，而只是将其作为 dict 提供给 params。

我怀疑您的第一个请求应该如下：

```
r = requests.get(uri, data=es_query) 
```

在有人反对我之前，是的，HTTP/1.1 规范允许使用 GET 请求发送数据，是的，请求确实支持它。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-01-08T14:01:40.573

```
search = {'query': {'match': {'test_id':13} }, 'sort' {'date_utc':{'order':'desc'}} }

data = requests.get('http://localhost:9200/newsidx/test/_search?&pretty',params = search)
print data.json() 
```

[http://docs.python-requests.org/en/latest/user/quickstart/](http://docs.python-requests.org/en/latest/user/quickstart/)

# android - Facebook login fails with facebook app installed

> ID：15930237
> 
> 赞同：0
> 
> 时间：2013-04-10T15:32:31.330
> 
> 标签：android, facebook, login

I'm new to android development. I've downloaded facebook sdk 3.0.1, and using the sample code to log in. The problem is, that if facebook app is installed the authentication fails. (otherwise it works just fine) after pressing the log in button I get to onActivityResult with status CLOSED_LOGIN_FAILED. of course I'm not typing the password, it's done automatically through facebook's app, and the facebook app is logged in and works properly. I couldn't find a solution.. please help me :)

this is my code:

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    instance = this;
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    buttonLoginToFacebook = (Button) findViewById(R.id.buttonLoginToFacebook);
    tvWellcome = (TextView) findViewById(R.id.tvWellcome);

    Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_ACCESS_TOKENS);

    Session session = Session.getActiveSession();
    if (session == null) {
        if (savedInstanceState != null) {
            session = Session.restoreSession(this, null, statusCallback,
                    savedInstanceState);
        }
        if (session == null) {
            session = new Session(this);
        }
        Session.setActiveSession(session);
        if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
            session.openForRead(new Session.OpenRequest(this)
                    .setCallback(statusCallback));
        }
    }

    updateView();
}

@Override
public void onStart() {
    super.onStart();
    Session.getActiveSession().addCallback(statusCallback);
}

@Override
public void onStop() {
    super.onStop();
    Session.getActiveSession().removeCallback(statusCallback);
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Session.getActiveSession().onActivityResult(this, requestCode,
            resultCode, data);
    updateView();
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    Session session = Session.getActiveSession();
    Session.saveSession(session, outState);
}

private void updateView() {
    Session session = Session.getActiveSession();
    if (session.isOpened()) {
        Intent intent = new Intent(this, ScreenStartPage.class);
        startActivity(intent);
    } else {
        buttonLoginToFacebook.setOnClickListener(new OnClickListener() {
            public void onClick(View view) {
                onClickLogin();
            }
        });
    }
}

private void onClickLogin() {
    Session session = Session.getActiveSession();
    if (!session.isOpened() && !session.isClosed()) {
        session.openForRead(new Session.OpenRequest(this)
                .setCallback(statusCallback));
        updateView();
    } else {
        Session.openActiveSession(this, true, statusCallback);
    }
}

public void onClickLogout() {
    Session session = Session.getActiveSession();
    if (!session.isClosed()) {
        session.closeAndClearTokenInformation();
    }
}

private class SessionStatusCallback implements Session.StatusCallback {
    @Override
    public void call(Session session, SessionState state,
            Exception exception) {
        updateView();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T02:10:19.370

您是否在 Facebook 的应用设置仪表板中设置了调试密钥哈希和完整的类名？[请参阅Android 版 Facebook SDK 入门](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)文档中的步骤 5 和 6 。

# java - 为 Java 设置 Notepad++

> ID：15930240
> 
> 赞同：1
> 
> 时间：2013-04-10T15:32:36.367
> 
> 标签：java, batch-file, notepad++

为了使用 Notepad++ for Java，我创建了一个批处理文件来编译和运行该文件：

```
@ECHO OFF
C:\Program Files\Java\jdk1.7.0_17\bin\javac.exe %1
C:\Program Files\Java\jdk1.7.0_17\bin\java.exe %1
echo.
PAUSE
@ECHO ON 
```

然后运行它，在 Notepad++ 'Run' 提示符 (F5) 中，我输入：`C:\Program Files\Java\java.bat "$(FULL_CURRENT_PATH)"`. 所有文件路径都是正确的，但是当我按“运行”时没有任何反应。我怎样才能解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T15:38:26.810

放置`""`可执行文件，以便它知道包含空格，而不是将空格视为分隔符。

```
@ECHO OFF
"C:\Program Files\Java\jdk1.7.0_17\bin\javac.exe" %1
"C:\Program Files\Java\jdk1.7.0_17\bin\java.exe" %1
echo.
PAUSE
@ECHO ON 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T15:35:32.397

`"quotes"`因为空格被视为分隔符，所以将整个可执行文件名称括起来。

# javascript - Sorting list but retaining the CSS markup

> ID：15930241
> 
> 赞同：1
> 
> 时间：2013-04-10T15:32:38.443
> 
> 标签：javascript, jquery, html, css

## Introduction

I currently have a list (with `ul` and `li`'s).

It's made sortable using jQuery:

```
$( "#sortable1" ).sortable({
    update : function () {
    var items = $('#sortable1').sortable('serialize');
    alert(items);                       
    }
});
$( "#sortable1" ).disableSelection(); 
```

## The problem

This code moves the complete `li` item (including it's class - and thus it's markup).

## The question

Is there any way to match the target's destination class? I've setup a demo here: [http://tinker.io/65292](http://tinker.io/65292)

So basically, when moving `item 1` one place down, `item 1` should become green and `item 2` should become `red`.

Additionally, when moving `item 1` two places down, `item 1` should be yellow, `item 2` should be red and finally `item 3` should be green.

This demo list only exists of four items, but realistically this could be any number.

## Demo code

```
<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Sortable - Default functionality</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <style>
  #sortable { list-style-type: none; margin: 0; padding: 0; width: 60%; }
  #sortable li { margin: 0 3px 3px 3px; padding: 0.4em; padding-left: 1.5em; font-size: 1.4em; height: 18px; }
  #sortable li span { position: absolute; margin-left: -1.3em; }

    .first { background-color: red; }
    .middle1 { background-color: green; }
    .middle2 { background-color: yellow; }
    .last { background-color: blue; }
  </style>
  <script>
  $(function() {
    $( "#sortable" ).sortable();
    $( "#sortable" ).disableSelection();
  });
  </script>
</head>
<body>

<ul id="sortable">
  <li class="first"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 1</li>
  <li class="middle1"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 2</li>
  <li class="middle2"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 3</li>
  <li class="last"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 4</li>
</ul>

</body>
</html> 
```

Link: [http://tinker.io/65292](http://tinker.io/65292)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:36:22.270

使用 nth-child css 伪类...

```
 #sortable li:nth-child(1) { background-color: red; }
#sortable li:nth-child(2) { background-color: green; }
#sortable li:nth-child(3) { background-color: yellow; }
#sortable li:nth-child(4)  { background-color: blue; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T15:36:29.773

将 css 更改为基于索引而不是类的目标列表元素，它将自动更新：

```
#sortable li:first-child { background-color: red; }
#sortable li:nth-child(2) { background-color: green; }
#sortable li:nth-child(3) { background-color: yellow; }
#sortable li:last-child { background-color: blue; } 
```

[**修补匠**](http://tinker.io/65292/2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T15:39:02.257

jQuery UI 的 Sortable 是基于移动整个 DOM 元素的原理。

正如您正确注意到的那样，整个 DOM 对象都被移动了，包括它的所有内容和所有属性，因此也包括它的类。

我想到了几种方法：

1.  更改您的 CSS，使其不需要`<li>`s 上的类。可以使用纯 CSS 来制作第一个红色、第二个绿色等。您可以以各种方式使用`nth-child`or`+`或选择器。`~`然后移动`<li>`s 就可以了，它们落入到位时的外观是正确的。
2.  在每个元素移动后直接使用 javascript 删除和重新应用类。

# user-interface - 如何在文本框上使用 pywinauto 执行类似于 .readlines 的功能？

> ID：15930242
> 
> 赞同：0
> 
> 时间：2013-04-10T15:32:40.423
> 
> 标签：user-interface, python-2.7, pywinauto

我有一个使用 pywinauto 自动化的 GUI。在每个循环结束时，pywinauto 使 GUI 在文本框中显示一些文本（如果需要，我可以单击并在此文本框中键入）然后截屏。我想让 pywinauto 在文本框上执行一个简单的测试，以确保文本不是废话，然后截图。如何让 pywinauto 将文本框变成可以使用的 python 对象？

# javascript - 我的模态在 Bootstrap 中不起作用，看不出有什么问题

> ID：15930243
> 
> 赞同：0
> 
> 时间：2013-04-10T15:32:44.637
> 
> 标签：javascript, jquery

这是代码。我不明白为什么它不起作用也许是javascript导入的问题？

多谢你们。

```
 <link href="Bootstrap,%20from%20Twitter_files/bootstrap.css" rel="stylesheet">
        <script src="bootstrap/js/jquery.js"></script>
        <script src="bootstrap/js/bootstrap.js"></script>

    <div class="container">  
    <h2>Example of creating Modals with Twitter Bootstrap</h2>  
    <div id="example" class="modal hide fade in" style="display: none; ">  
    <div class="modal-header">  
    <a class="close" data-dismiss="modal">×</a>  
    <h3>This is a Modal Heading</h3>  
    </div>  
    <div class="modal-body">  
    <h4>Text in a modal</h4>  
    <p>You can add some text here.</p>                
    </div>  
    <div class="modal-footer">  
    <a href="#" class="btn btn-success">Call to action</a>  
    <a href="#" class="btn" data-dismiss="modal">Close</a>  
    </div>  
    </div>  
    <p><a data-toggle="modal" href="#example" class="btn btn-primary btn-large">Launch demo modal</a></p>  
    </div>  
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:58:23.803

适合我[http://jsfiddle.net/SpYNe/133/](http://jsfiddle.net/SpYNe/133/)

```
<div class="container">  
<h2>Example of creating Modals with Twitter Bootstrap</h2>  
<div id="example" class="modal hide fade">  
<div class="modal-header">  
<a class="close" data-dismiss="modal">×</a>  
<h3>This is a Modal Heading</h3>  
</div>  
<div class="modal-body">  
<h4>Text in a modal</h4>  
<p>You can add some text here.</p>                
</div>  
<div class="modal-footer">  
<a href="#" class="btn btn-success">Call to action</a>  
<a href="#" class="btn" data-dismiss="modal">Close</a>  
</div>  
</div>  
<p><a data-toggle="modal" role="button" href="#example" class="btn btn-primary btn-    large">Launch demo modal</a></p>  
</div> 
```

也许你的js路径有问题。你应该检查一下

# android - Remove or delete existing free Application and publish again as paid with same package name

> ID：15930250
> 
> 赞同：1
> 
> 时间：2013-04-10T15:33:02.003
> 
> 标签：android, google-play

If I published a free Application in Google play,then how to make this Application as paid Application or add In-App purchase feature?

I read in developer document,

> Once you publish your app as a free app, you cannot ever change it to being a priced app. However, you can still sell in-app products and subscriptions through Google Play's In-app Billing service. If you publish your app as a priced app, you can change it at any time to being a free app (but cannot then change it back to priced). You can also sell in-app products and subscriptions.

1.  Can I remove or delete existing free Application and publish again as paid with same package name?
2.  Can I add In-App purchase option for existing free Application with update?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T15:37:50.103

> 我可以删除或删除现有的免费应用程序并使用相同的包名称再次以付费方式发布吗？

不可以。一旦使用包名称发布应用程序，无论该应用程序是处于已发布还是未发布状态，Google 都会认为该特定包名称将永远被 Google 使用。

> 我可以为现有的免费应用程序添加应用内购买选项并进行更新吗？

是的。该过程与[此处](http://developer.android.com/google/play/billing/billing_integrate.html)描述的所有应用程序（付费或免费）相同。

# servicestack - Is there a more elegant way to build URIs in ServiceStack?

> ID：15930251
> 
> 赞同：6
> 
> 时间：2013-04-10T15:33:03.333
> 
> 标签：servicestack

I'm building a [Request/Acknowledge/Poll style REST service](http://gorodinski.com/blog/2012/07/13/request-acknowledge-poll-with-nservicebus-and-aspnet-webapi/) with NServiceBus underneath to manage queue processing. I want to give the client a URI to poll for updates.

Therefore I want to return a location header element in my web service as part of the acknowledgement. I can see that it is possible to do this:

```
return new HttpResult(response, HttpStatusCode.Accepted)
{
    Location = base.Request.AbsoluteUri.CombineWith(response.Reference)
} 
```

But for a Url such as: `http://localhost:54567/approvals/?message=test`, which creates a new message (I know I should probably just use a POST), the location will be returned as: `http://localhost:54567/approvals/?message=test/8f0ab1c1a2ca46f8a98b75330fd3ac5c`.

The ServiceStack request doesn't expose the Uri fragments, only the AbsouteUri. This means that I need to access the original request. I want this to work regardless of whether this is running in IIS or in a self hosted process. The closest I can come up with is the following, but it seems very clunky:

```
var reference = Guid.NewGuid().ToString("N");
var response = new ApprovalResponse { Reference = reference };

var httpRequest = ((System.Web.HttpRequest)base.Request.OriginalRequest).Url;
var baseUri = new Uri(String.Concat(httpRequest.Scheme, Uri.SchemeDelimiter, httpRequest.Host, ":", httpRequest.Port));
var uri = new Uri(baseUri, string.Format("/approvals/{0}", reference));

return new HttpResult(response, HttpStatusCode.Accepted)
{
    Location = uri.ToString()
}; 
```

This now returns: `http://localhost:55847/approvals/8f0ab1c1a2ca46f8a98b75330fd3ac5c`

Any suggestions? Does this work regardless of how ServiceStack is hosted? I'm a little scared of the `System.Web.HttpRequest` casting in a [self hosted process](https://github.com/ServiceStack/ServiceStack/wiki/Self-hosting). Is this code safe?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T15:55:56.830

## [Reverse Routing](https://github.com/ServiceStack/ServiceStack/wiki/Routing#reverse-routing)

If you're trying to build urls for ServiceStack services you can use the `RequestDto.ToGetUrl()` and `RequestDto.ToAbsoluteUri()` to build relative and absolute urls as seen in this earlier [question on Reverse Routing](https://stackoverflow.com/a/14080065/85785). e.g:

```
[Route("/reqstars/search", "GET")]
[Route("/reqstars/aged/{Age}")]
public class SearchReqstars : IReturn<ReqstarsResponse>
{
    public int? Age { get; set; }
}

var relativeUrl = new SearchReqstars { Age = 20 }.ToUrl("GET");
var absoluteUrl = HostContext.Config.WebHostUrl.CombineWith(relativeUrl);

relativeUrl.Print(); //=  /reqstars/aged/20
absoluteUrl.Print(); //=  http://www.myhost.com/reqstars/aged/20 
```

For creating Urls for other 3rd Party APIs look at the [Http Utils wiki](https://github.com/ServiceStack/ServiceStack/wiki/Http-Utils) for example extension methods that can help, e.g:

```
var url ="http://api.twitter.com/user_timeline.json?screen_name={0}".Fmt(name);
if (sinceId != null)
    url = url.AddQueryParam("since_id", sinceId);
if (maxId != null)
    url = url.AddQueryParam("max_id", maxId);

var tweets = url.GetJsonFromUrl()
    .FromJson<List<Tweet>>(); 
```

You can also use the `QueryStringSerializer` to serialize a number of different collection types, e.g:

```
//Typed POCO
var url = "http://example.org/login?" + QueryStringSerializer.SerializeToString(
   new Login { Username="mythz", Password="password" });

//Anonymous type
var url = "http://example.org/login?" + QueryStringSerializer.SerializeToString(
   new { Username="mythz", Password="password" });

//string Dictionary
var url = "http://example.org/login?" + QueryStringSerializer.SerializeToString(
  new Dictionary<string,string> {{"Username","mythz"}, {"Password","password"}}); 
```

You can also serialize the built-in `NameValueCollection.ToFormUrlEncoded()` extension, e.g:

```
var url = "http://example.org/login?" + new NameValueCollection { 
    {"Username","mythz"}, {"Password","password"} }.ToFormUrlEncoded(); 
```

# dynamics-crm-2011 - ACS and CRM Online - Cannot Create Identity Provider - Federation Metadata Fails

> ID：15930252
> 
> 赞同：0
> 
> 时间：2013-04-10T15:33:04.660
> 
> 标签：dynamics-crm-2011, acs, dynamics-crm-online, ws-federation

I'm trying to create an ACS WS-Federation identity provider that uses CRM Online as the identity provider. When I try to enter the federation metadata for CRM Online, it breaks. If I use the federation metadata url

https://[orgname].crm.dynamics.com/FederationMetadata/2007-06/FederationMetadata.xml

the error is shown on the page "Unable to download a WS-Federation metadata document from the specified URL." The URL works if I browse to it.

If I download the XML file from the browser and then try to upload the file into the identity provider creation page, the whole web page throws an exception (no details, because the web.config is not configured to show remote errors).

Anyone gotten past this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:05:50.490

CRM 是一个应用程序，而不是 IdP。您正在对面尝试。它应该被配置为“依赖方”。联合元数据文档可以描述两端：IdP 和 RP。

不过，我还没有在 ACS 上尝试过 CRM，所以我不确定它是否会起作用。（它应该，但是......）。我记得它需要令牌加密。

# java - Best practice for dynamically removing a Spring ApplicationListener?

> ID：15930254
> 
> 赞同：3
> 
> 时间：2013-04-10T15:33:07.987
> 
> 标签：java, spring

I would like to register and unregister Spring ApplicationListeners dynamically at run-time and not in a Spring config file.

If I can't remove them dynamically, I'll have a memory leak.

Here's my best guess:

I could call `AbstractApplicationContext.getApplicationEventMulticaster().add/removeApplicationListener()`.

Is that the recommended method?

Does anyone remove listeners dynamically?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-07-21T22:32:21.327

以下作品。这对于实现 ApplicationListener 并经常创建/销毁的原型 bean 尤其有用。如果您不取消注册它们，您将最终导致内存泄漏。

```
ApplicationEventMulticaster aem = context.getBean(AbstractApplicationContext.APPLICATION_EVENT_MULTICASTER_BEAN_NAME, ApplicationEventMulticaster.class);

aem.removeApplicationListener(appListener); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-21T13:39:54.183

这可以使用 2 中的方法解决[`AbstractApplicationEventMulticaster`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/event/AbstractApplicationEventMulticaster.html)。

1.  [`removeApplicationListenerBean(String listenerBeanName)`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/event/AbstractApplicationEventMulticaster.html#removeApplicationListenerBean-java.lang.String-)
2.  [`removeApplicationListener(ApplicationListener<?> listener)`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/event/AbstractApplicationEventMulticaster.html#removeApplicationListener-org.springframework.context.ApplicationListener-)

前任：

```
//Listener class.
@Component
public class CustomEventListener implements ApplicationListener <CustomEvent>{
    @Override
    public void onApplicationEvent(CustomEvent event) {
      //Your logic goes here
    }
} 
```

```
//Event Publisher class
@Component
public class CustomEventListener {

    @Autowired
    private SimpleApplicationEventMulticaster multicaster;

    @Autowired
    private CustomEventListener listener;

    public void doStuffAndPublishAnEvent(CustomEvent customEvent) {
        multicaster.removeApplicationListener(listener);
        multicaster.removeApplicationListenerBean(listener.getClass().getSimpleName());
        multicaster.multicastEvent(customEvent);
} 
```

注意：[`SimpleApplicationEventMulticaster`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/event/SimpleApplicationEventMulticaster.html) 扩展`AbstractApplicationEventMulticaster`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:48:20.477

我认为您推荐的方法很好。您还可以使用相同或相似的技术使您的侦听器自行移除。

但是我会问自己另一个问题：为什么我有内存泄漏，有没有办法在不移除监听器的情况下修复它？

# actionscript-3 - startdrag start point limitations?

> ID：15930255
> 
> 赞同：2
> 
> 时间：2013-04-10T15:33:10.113
> 
> 标签：actionscript-3, movieclip

I have a slider that controls a movie clip by dragging it through the frames to animate and this works great when dragging from left to right, But i want the slider to start in the middle and drag through the movie clip from a center point being able to go 350 to the right and 350 to the left.

Is this possible?

Heres my code so far and as you can see it drags 350 to the right through dialSpin_mc.

Is there a way to make the slider start at a certain frame and go backwards and forwards?

```
 dialSpin_mc.stop();

    slider_mc.knob_mc.buttonMode = true;

    slider_mc.knob_mc.addEventListener(MouseEvent.MOUSE_DOWN, onDragKnob);
    stage.addEventListener(MouseEvent.MOUSE_UP, onReleaseKnob)

    slider_mc.knob_mc.buttonMode = true;

    function onDragKnob(myEvent:Event):void
    {
        slider_mc.knob_mc.startDrag(false, new Rectangle(0,0,350,0));
        slider_mc.knob_mc.addEventListener(Event.ENTER_FRAME, onScrubMovie);
    }

    function onReleaseKnob(myEvent:Event):void
    {
        slider_mc.knob_mc.stopDrag();
slider_mc.knob_mc.removeEventListener(Event.ENTER_FRAME, onScrubMovie);
    }

    function onScrubMovie(myEvent:Event):void {
        var playHead:int=Math.round((slider_mc.knob_mc.x/350*8)+1);
        dialSpin_mc.gotoAndStop(playHead);    
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:05:35.513

正如评论中所讨论的，这是您如何在不使用`startDrag()`and`stopDrag()`函数的情况下对滑块功能进行编码。

这个想法是，当您在滑块上按下鼠标按钮时，`ENTER_FRAME`会创建一个侦听器。每一帧滑块的 X 位置都会更新以匹配`mouseX`位置，并确保它只能移动 175 像素，我们还检查滑块的新位置。

确保滑块位置有效后，您可以使用相同的代码设置`dialSpin_mc`框架。

释放鼠标按钮后，将删除输入帧侦听器。

代码顶部的`sliderOrigin`声明将需要更改为适合您项目的任何内容（当您将滑块移动到幻灯片区域的中间而不是最左侧时，滑块的 xposition 是什么）。

```
var sliderOrigin:int = 150; // The x position the slider is in when in the center of the slide bar
slider_mc.x = sliderOrigin;

slider_mc.addEventListener(MouseEvent.MOUSE_DOWN, mDown);
slider_mc.addEventListener(MouseEvent.MOUSE_UP, mUp);

function mDown(e:MouseEvent):void
{
    addEventListener(Event.ENTER_FRAME, UpdateDrag);
}

function mUp(e:MouseEvent):void
{
    removeEventListener(Event.ENTER_FRAME, UpdateDrag);
}

function UpdateDrag(e:Event):void
{
    slider_mc.x = mouseX;

    // Check if the slider is 'out of bounds' and change its position if it is
    if(slider_mc.x < sliderOrigin - 175)
        slider_mc.x = sliderOrigin - 175;
    else if(slider_mc.x > sliderOrigin + 175)
        slider_mc.x = sliderOrigin + 175

    var playHead:int = Math.round((slider_mc.x/350*8)+1);
    dialSpin_mc.gotoAndStop(playHead);
} 
```

根据滑块的起始位置，播放头的范围会发生变化（因此，如果滑块从 x pos 200 开始，范围将在 2 到 10 之间，在 x pos 400 处，范围在 6 到 14 之间 - 通过更改从 +1 偏移到任何必要的值）。

# cookies - Salesforce: Can a Javascript Remoting Static Function Access ApexPages.CurrentPage Functions?

> ID：15930256
> 
> 赞同：2
> 
> 时间：2013-04-10T15:33:12.660
> 
> 标签：cookies, static, salesforce, visualforce, force.com

I was wondering, In a RemoteAction function in an apex class can or should this be able to access the current force.com site page? I would like to access and write to cookie parameters from within my static remote method but I'm guessing this may not be possible? If not, any suggestions on how to get around this would be useful.

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T01:48:42.080

远程操作方法在异步模式下运行。因此，从 url 参数访问值将为您获取空值。如果您的 apex 类需要任何静态值来处理，请使用参数。使用参数从页面传递到您的 apex 方法。

我最近发现有一种方法可以做到这一点

使用 {!$currentpage.parameters.something} 从页面上的脚本传递它们

您仍然需要检查代码中的空值，因为它可能合法地为空

# compiler-construction - Returning an attribute from flex to bison

> ID：15930257
> 
> 赞同：2
> 
> 时间：2013-04-10T15:33:13.380
> 
> 标签：compiler-construction, bison, context-free-grammar, flex-lexer

i am trying yo write some kind of a simple compiler that detects undeclared variable, and does some extra stuff. The problem is, i cannot use "$$" in my bison file, it says **"$$ of `type' has no declared type"**. Here are the related parts of my flex and bison files:

```
flx file:

int[ \t\n]+matrix {yylval.type_id.Type = 4;return tINTMATRIXTYPE; } 
```

* * *

```
bison file:

%}

%union semrec
{
struct
{
  int Type;
  char *id;
 }type_id;
}

%start prog

%%
prog: stmtlst
;

stmtlst : stmt
    | stmt stmtlst
;

tmt : decl //baktım
     | asgn
     | if
;

decl : type vars '=' expr ';' 
;

type : tINTTYPE     
     | tINTVECTORTYPE    
     | tINTMATRIXTYPE   {$$.Type=$1.Type;}
     | tREALTYPE         
     | tREALVECTORTYPE    
     | tREALMATRIXTYPE    
;

%% 
```

Writing $1.Type in bison file works, but $$.Type does not work. Can anyone help? Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:57:47.797

您需要明确告诉野牛您计划为其分配值的每个令牌是什么类型（终端和非终端）。看起来您也没有声明任何令牌。

```
%type <Type> type 
```

会让你开始。但是现在您必须确保为所有其他类型（tINTTYPE 等）设置了 $$。

这是一个简单的示例，应该可以让您大致了解野牛的运作方式：[http ://www.gnu.org/software/bison/manual/bison.html](http://www.gnu.org/software/bison/manual/bison.html)

# php - pass $_GET variable to javascript function

> ID：15930258
> 
> 赞同：1
> 
> 时间：2013-04-10T15:33:21.493
> 
> 标签：php, javascript

i have a php page that displays a table from multiple MySQL queries and from their use a JavaScript function to sort the column results, all that works fine, my problem is i need to refresh the results of those queries every 10 seconds or so which works fine(with a meta-refresh), the problem is the refresh after column sorting. when the page refreshes the sorting is reset also. here is a snippet of the sorting function;

```
 <script>
    function tablesort(which){  <-----I tried using the $_GET method you suggested
                                <-----But i get a "missing formal parameter" error
                                <-----When also using this suggestion and use the
                                <-----"onclick" i get a "tablesort" is not defined
                                <-----error
$(document).ready(function(){
if(which == '1.0'){<!--This sorts the pause row, descending --> 
$("#Mtable").tablesorter({sortList: [[1,0]]});
}
if(which == '2.1'){<!--This sorts the total dialer row, descending --> 
$("#Mtable").tablesorter({sortList: [[2,1]]});
}
if(which == '3.0'){<!--This sorts Wrap-up time row, descending --> 
$("#Mtable").tablesorter({sortList: [[3,0]]});
}
if(which == '4.1'){<!--This sorts donation amount row, descending --> 
$("#Mtable").tablesorter({sortList: [[4,1]]});
}
if(which == '5.1'){<!--This sorts Up-sale row, descending --> 
$("#Mtable").tablesorter({sortList: [[5,1]]});
}
if(which == '6.1'){<!--This sorts the Monthl donation row, descending --> 
$("#Mtable").tablesorter({sortList: [[6,1]]});
}
if(which == '7.1'){<!--This sorts the verified sales row, descending --> 
$("#Mtable").tablesorter({sortList: [[7,1]]});
}
if(which == '8.1'){<!--This sorts the calles per hour row, descending --> 
$("#Mtable").tablesorter({sortList: [[8,1]]});
}
if(which == '9.1'){<!--This sorts the payments per hour row, descending --> 
$("#Mtable").tablesorter({sortList: [[9,1]]});
}
if(which == '10.1'){<!--This sorts the average sale row, descending --> 
$("#Mtable").tablesorter({sortList: [[10,1]]});
}
if(which == '11.1'){<!--This sorts the sales total row, descending --> 
$("#Mtable").tablesorter({sortList: [[11,1]]});
}
    });
    }
    </script> 
```

here are the links that sort the table'

```
 Sort by: 
<a onclick="tablesort('1.0')"> Lowest Pause<a/>&nbsp &nbsp
<a onclick="tablesort('2.1')"> Highest Dialer<a/>&nbsp &nbsp
<a onclick="tablesort('3.0')"> Best Wrap-up<a/>&nbsp &nbsp 
```

because of the refresh im wanting to pass the variable data from the onlcick to the URL similar to $_GET so it would would something like and then read into the sorting function;

localhost/dbtabke.php?which=2.1 <----exact URL example being used

any help on how to do that would be greatly appreciated, thanks in advance.

@prabeen giri i have provided the complete function, thanks again

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:10:36.810

我使用 $_GET 结束了以下操作，这是代码；

```
 <body>
    <!--This gets the element from the URL to set the Sorting, so the page
        can be refreshed without losing the sorting-->
    <body onload="sorttable.innerSortFunction.apply(document.getElementById('<?php echo $_GET["id"]; ?>'), [])">

    <!--table headers that are used to determine columns to sort by-->
    echo "<th id=\"dialertime\">".ucfirst("Dial Time")."</th>\n";
    echo "<th id=\"pausetime\">".ucfirst("Pause Time")."</th>\n";

    ...*other table info*
    <!--links that sort the specific row-->
    <a href="?id=wrap-by-time"> Wrap-up time<a/>&nbsp &nbsp
    <a href="?id=wrap-by-percent"> Wrap-up %<a/>&nbsp &nbsp
    </body> 
```

谢谢大家的意见，希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:43:19.443

您不一定必须使用 GET 方法来保留排序顺序。

您还可以使用 cookie 来存储排序顺序。这样您的代码会看起来更清晰。

```
function setCookie(c_name,value,exdays)
{
var exdate=new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
document.cookie=c_name + "=" + c_value;
} 

function getCookie(c_name)
{
var i,x,y,ARRcookies=document.cookie.split(";");
for (i=0;i<ARRcookies.length;i++)
{
  x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
  y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
  x=x.replace(/^\s+|\s+$/g,"");
  if (x==c_name)
    {
    return unescape(y);
    }
  }
} 
```

排序时调用该`setCookie()`函数，并将排序顺序作为参数传递。

当页面第一次加载或刷新时，调用相同的排序函数并调用`getCookie()`以获取 cookie 值并将其设置为排序前的排序顺序。

如果你想使用 GET，这在页面刷新时也会起作用，我希望你`tablesort()`在文档准备好时调用这个函数。

```
tablesort('<?php print $_GET['MTable']?>') ; 
```

注意：在函数中检查参数是否有效，`tablsort()`因为当页面第一次加载时，`GET`变量将为空，我相信

# java - How to refresh data on tabbox item click?

> ID：15930263
> 
> 赞同：1
> 
> 时间：2013-04-10T15:33:56.117
> 
> 标签：java, zk

I have got tabbox with several items. I need to refresh data when user click on tab. I have click command that perform refreshing in the container, but I can't create refreshing of the page. This is example of item on .zul page:

```
<row valign="top">
    <label value="Title with diacritics" zclass="field_label"/> 
    <textbox value="@{main$composer.inventory.titleTranslitDcr, is-live=true}"  hflex="1"/>
</row> 
```

This is how this data which I tried to set in the bean:

```
public void populateTitleStatementFields()
{
    this.titleTranslitDcr = Commons.getString(context, "/xml/TitleTranslitDCR", EMPTY);
} 
```

I'm sure that in this code I've got valid value of the string. But nothing work until full reload with F5.

As for samples - I have got about 50+ fields which I should update in 5 includes. I tested this by opening two pages - at one I save data into db, on other change tab and looking for changes, but nothing happened, even if I got right value from db (which was changed on another browser instance) **EDIT 11.04.2013:**

Found something close to this. Reloading .zul page from onclick event in tutorial, but I think I should combine it with @Command. Is there a way to do it just to test will it work?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:28:02.253

您可以使用 ZK MVVM 执行此操作，如下所示：

**测试.zul**

```
<zk>
    <div apply="org.zkoss.bind.BindComposer"
        viewModel="@id('vm') @init('test.TestVM')">
        <tabbox onSelect="@command('updateData')">
            <tabs>
                <tab label="tab 1" />
                <tab label="tab 2" />
            </tabs>
            <tabpanels>
                <tabpanel>
                    <label value="@load(vm.dataOne)" />
                </tabpanel>
                <tabpanel>
                    <label value="@load(vm.dataTwo)" />
                </tabpanel>
            </tabpanels>
        </tabbox>
    </div>
</zk> 
```

**TestVM.java**

```
package test;

import org.zkoss.bind.annotation.Command;
import org.zkoss.bind.annotation.NotifyChange;

public class TestVM {
    public String getDataOne () {
        return System.currentTimeMillis() % 19 + "";
    }
    public String getDataTwo () {
        return System.currentTimeMillis() % 91 + "";
    }
    @Command
    @NotifyChange({"dataOne", "dataTwo"})
    public void updateData () {

    }
} 
```

# seo - Correct way of doing navigation

> ID：15930265
> 
> 赞同：-1
> 
> 时间：2013-04-10T15:33:58.123
> 
> 标签：seo, submenu

I am creating a wordpress website with multi-level of navigation.

When i say multi-level the parent link also has `<a href="#">`. I have this link for nothing. And this is creating issues when I check for Link quality in chrome extention "SEO Site Tools" It gave me I have over 200 links in my homepage and this is bad seo.

Is there anyway I can replace parent item link `<a href="#">` to `<span>`? If I do will search engine make my website as scam? This is the structure I am trying to implement.

```
<ul>
  <li>
    <span>Products</span>
    <ul>
      <li><a href="product-1">Product 1</a></li>
      <li><a href="product-2">Product 2</a></li>
    </ul>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:58:24.380

我写了 seo 网站工具。每页 200 个链接实际上更像是一个经验法则……我相信你会没事的。如果您发送域名，请看一下，但我不明白您为什么要在菜单中列出所有产品。你可以做的另一件事是最深的页面用javascript写出导航代码，然后谷歌不会看到所有其他页面上的每个页面的链接。如果您选择这样做，请确保 google 仍然可以导航到这些页面（这通常通过类别列表页面完成）

# sphinx - Sphinx frequency ranking

> ID：15930266
> 
> 赞同：0
> 
> 时间：2013-04-10T15:34:08.417
> 
> 标签：sphinx

I have read sphinx documentation and cant find an answer.

I have a sphinx index set up on 2 fields (title, description)

I would like ranking to be higher the more times a search term is present in one or both of the fields. For example: A search for "car"

```
Product A:
Title: Red car
Desc: good car

Product B:
Title: Green car
Desc: A really good car. The best car. 
```

In the above example I would like product B to rank higher than A because "car" is present 2 times in its description. Currently they two items are ranked equally.

What settings do i need to adjust in Sphinx to get this to work?

Thanks for the help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:36:37.313

快速简单的方法是使用 SPH_RANK_WORDCOUNT

[但是您可以通过使用自定义排名器http://sphinxsearch.com/docs/current.html#expression-ranker](http://sphinxsearch.com/docs/current.html#expression-ranker) 例如使用 word_count 或 hit_count来获得更好的结果 。

# ubuntu - Apt-get 安装程序：它是如何工作的

> ID：15930268
> 
> 赞同：-1
> 
> 时间：2013-04-10T15:34:09.697
> 
> 标签：ubuntu, installation, apt-get

我需要学习开发的新方面：制作 apt-get 安装程序。因此，我需要了解它是如何工作的。我试图搜索有关它的信息，但其中 90% 是 apt-get man 的。

例如：用户打印`sudo apt-get install package_name`，什么？服务器上是否有`sources.list`文件中的安装脚本？如果是，它如何在客户的计算机上执行？

我很高兴在你的帮助下学习它。可能这是一个愚蠢的问题，但我真的找不到关于这个话题的必要信息。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:43:04.077

简短的回答是 apt-get 从服务器下载包，其中 source.list 包含并执行安装脚本。[长答案是您可以从http://www.debian.org/doc/manuals/developers-reference/best-pkging-practices.html](http://www.debian.org/doc/manuals/developers-reference/best-pkging-practices.html)学习 debian 开发人员文档。

# haskell - Applying Semantics to Free Monads

> ID：15930270
> 
> 赞同：9
> 
> 时间：2013-04-10T15:34:13.887
> 
> 标签：haskell, functional-programming, category-theory, free-monad

I am trying to abstract the pattern of applying a certain semantics to a free monad over some functor. The running example I am using to motivate this is applying updates to an entity in a game. So I import a few libraries and define a few example types and an entity class for the purposes of this example (I am using the free monad implementation in control-monad-free):

```
{-# LANGUAGE DeriveFunctor #-}
{-# LANGUAGE TypeFamilies #-}

import Control.Monad.Free
import Control.Monad.Identity
import Control.Monad.Writer

-- Things which can happen to an entity
data Order = Order deriving Show
data Damage = Damage deriving Show

class Entity a where
    evolve :: Double -> a -> a
    order :: Order -> a -> a
    damage :: Damage -> a -> a

-- Make a trivial entity for testing purposes
data Example = Example deriving Show
instance Entity Example where
    evolve _ a = a
    order _ a = a
    damage _ a = a

-- A type to hold all the possible update types
data EntityUpdate = 
      UpdateTime Double
    | UpdateOrder Order
    | UpdateDamage Damage
    deriving (Show)

-- Wrap UpdateMessage to create a Functor for constructing the free monad
data UpdateFunctor cont = 
    UpdateFunctor {updateMessage :: EntityUpdate, continue :: cont} deriving (Show, Functor)

-- Type synonym for the free monad
type Update = Free UpdateEntity 
```

I now lift some basic updates into the monad:

```
liftF = wrap . fmap Pure

updateTime :: Double -> Update ()
updateTime t = liftUpdate $ UpdateTime t

updateOrder :: Order -> Update ()
updateOrder o = liftUpdate $ UpdateOrder o

updateDamage :: Damage -> Update ()
updateDamage d = liftUpdate $ UpdateDamage d

test :: Update ()
test = do
    updateTime 8.0
    updateOrder Order
    updateDamage Damage
    updateTime 4.0
    updateDamage Damage
    updateTime 6.0
    updateOrder Order
    updateTime 8.0 
```

Now we have the free monad, we need to provide the possibility of different implementations, or semantic interpretations, of monad instance such as `test` above. The best pattern I can come up with for this is given by the following function:

```
interpret :: (Monad m, Functor f, fm ~ Free f c) => (f fm -> fm) -> (f fm -> a -> m a) -> fm -> a -> m a
interpret _ _ (Pure _  ) entity = return entity
interpret c f (Impure u) entity = f u entity >>= interpret c f (c u) 
```

Then with some basic semantic functions we can give the two following possible interpretations, one as a basic evaluation and one as a writer monad preforming logging:

```
update (UpdateTime t) = evolve t
update (UpdateOrder o) = order o
update (UpdateDamage d) = damage d

eval :: Entity a => Update () -> a -> a
eval updates entity = runIdentity $ interpret continue update' updates entity where
    update' u entity = return $ update (updateMessage u) entity

logMessage (UpdateTime t) = "Simulating time for " ++ show t ++ " seconds.\n"
logMessage (UpdateOrder o) = "Giving an order.\n"
logMessage (UpdateDamage d) = "Applying damage.\n"

evalLog :: Entity a => Update () -> a -> Writer String a
evalLog = interpret continue $ \u entity -> do
    let m = updateMessage u
    tell $ logMessage m
    return $ update m entity 
```

Testing this in GHCI:

```
> eval test Example
Example
> putStr . execWriter $ evalLog test Example
Simulating time for 8.0 seconds.
Giving an order.
Applying damage.
Simulating time for 4.0 seconds.
Applying damage.
Simulating time for 6.0 seconds.
Giving an order.
Simulating time for 8.0 seconds. 
```

This all works fine, but it gives me a slightly uneasy feeling that it could be more general, or could be better organised. Having to provide a function to provide the continuation wasn't obvious at first and I'm not sure it is the best approach. I have made several efforts to redefine `interpret` in terms of functions in the Control.Monad.Free module, such as `foldFree` and `induce`. But they all seem to not quite work.

Am I on the right lines with this, or am a making a misjudgement? Most of the articles on free monads I have found concentrate on their efficiency or different ways to implement them, rather than on patterns for actually using them like this.

It also seems desirable to encapsulate this in some kind of `Semantic` class, so I could simply make different monad instances from my free monad by wrapping the functor in a newtype and making it an instance of this class. I couldn't quite work out how to do this however.

UPDATE --

I wish I could have accepted both answers as they are both extremely informative and thoughtfully written. In the end though, the edit to the accepted answer contains the function I was after:

```
interpret :: (Functor m, Monad m) => (forall x. f x -> m x) -> Free f a -> m a
interpret evalF = retract . hoistFree evalF 
```

(`retract` and `hoistFree` are in Edward Kemmet's free package in Control.Monad.Free).

All three of `pipes`, `operational` and [sacundim's free-operational package](https://github.com/sacundim/free-operational) are very relevant and look like they will be very useful for me in the future. Thank you all.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T18:41:21.143

你可以使用我的`pipes`库，它为使用免费的 monad 提供了更高级别的抽象。

`pipes`使用自由单子来具体化计算的每个部分：

*   数据（即您的`Producer`更新）是一个免费的单子
*   数据（即你的`Consumer`解释器）是一个免费的单子
*   数据（即您的`Pipe`记录器）是一个免费的单子

事实上，它们并不是三个独立的自由单子：它们都是伪装的自由单子。一旦定义了这三个，就可以使用管道组合将它们连接起来`(>->)`，以便开始流式传输数据。

我将从您的示例的略微修改版本开始，该版本跳过您编写的类型类：

```
{-# LANGUAGE RankNTypes #-}

import Control.Lens
import Control.Proxy
import Control.Proxy.Trans.State
import Control.Monad.Trans.Writer

data Order  = Order deriving (Show)
data Damage = Damage deriving (Show)

data EntityUpdate
    = UpdateTime   Double
    | UpdateOrder  Order
    | UpdateDamage Damage
    deriving (Show) 
```

现在我们要做的是定义`Update`a`Producer`为`EntityUpdate`s 的 a：

```
type Update r = forall m p . (Monad m, Proxy p) => Producer p EntityUpdate m r 
```

然后我们定义实际的命令。每个命令使用管道原语产生相应的更新`respond`，将数据进一步发送到下游进行处理。

```
updateTime :: Double -> Update ()
updateTime t = respond (UpdateTime t)

updateOrder :: Order -> Update ()
updateOrder o = respond (UpdateOrder o)

updateDamage :: Damage -> Update ()
updateDamage d = respond (UpdateDamage d) 
```

由于 a`Producer`是一个自由单子，我们可以使用`do`符号来组装它，就像你为你的`test`函数所做的那样：

```
test :: () -> Update ()
-- i.e. () -> Producer p EntityUpdate m ()
test () = runIdentityP $ do
    updateTime 8.0
    updateOrder Order
    updateDamage Damage
    updateTime 4.0
    updateDamage Damage
    updateTime 6.0
    updateOrder Order
    updateTime 8.0 
```

但是，我们也可以将解释器具体化为`Consumer`数据。这很好，因为我们可以直接在解释器上对状态进行分层，而不是使用`Entity`您定义的类。

我将使用一个简单的状态：

```
data MyState = MyState { _numOrders :: Int, _time :: Double, _health :: Int }
    deriving (Show)

begin :: MyState
begin= MyState 0 0 100 
```

...并为清晰起见定义了一些方便的镜头：

```
numOrders :: Lens' MyState Int
numOrders = lens _numOrders (\s x -> s { _numOrders = x})

time :: Lens' MyState Double
time = lens _time (\s x -> s { _time = x })

health :: Lens' MyState Int
health = lens _health (\s x -> s { _health = x }) 
```

...现在我可以定义一个有状态的解释器：

```
eval :: (Proxy p) => () -> Consumer (StateP MyState p) EntityUpdate IO r
eval () = forever $ do
    entityUpdate <- request ()
    case entityUpdate of
        UpdateTime   tDiff -> modify (time      +~ tDiff)
        UpdateOrder  _     -> modify (numOrders +~ 1    )
        UpdateDamage _     -> modify (health    -~ 1    )
    s <- get
    lift $ putStrLn $ "Current state is: " ++ show s 
```

这使得解释器在做什么变得更加清楚。我们可以一目了然地看到它如何以有状态的方式处理传入的值。

为了连接我们的`Producer`和`Consumer`我们使用`(>->)`组合运算符，然后是`runProxy`，它将我们的管道转换回基本 monad：

```
main1 = runProxy $ evalStateK begin $ test >-> eval 
```

...产生以下结果：

```
>>> main1
Current state is: MyState {_numOrders = 0, _time = 8.0, _health = 100}
Current state is: MyState {_numOrders = 1, _time = 8.0, _health = 100}
Current state is: MyState {_numOrders = 1, _time = 8.0, _health = 99}
Current state is: MyState {_numOrders = 1, _time = 12.0, _health = 99}
Current state is: MyState {_numOrders = 1, _time = 12.0, _health = 98}
Current state is: MyState {_numOrders = 1, _time = 18.0, _health = 98}
Current state is: MyState {_numOrders = 2, _time = 18.0, _health = 98}
Current state is: MyState {_numOrders = 2, _time = 26.0, _health = 98} 
```

您可能想知道为什么我们必须分两步执行此操作。为什么不直接去掉`runProxy`部分？

原因是我们可能希望组合两个以上的东西。例如，我们可以很容易地在`test`和之间插入一个日志记录阶段`eval`。我称这些中间阶段`Pipe`为：

```
logger
    :: (Monad m, Proxy p)
    => () -> Pipe p EntityUpdate EntityUpdate (WriterT String m) r
logger () = runIdentityP $ forever $ do
    entityUpdate <- request ()
    lift $ tell $ case entityUpdate of
        UpdateTime   t -> "Simulating time for " ++ show t ++ " seconds.\n"
        UpdateOrder  o -> "Giving an order.\n"
        UpdateDamage d -> "Applying damage.\n"
    respond entityUpdate 
```

同样，我们可以非常清楚地看到是做什么`logger`的：它`request`是值，是值`tell`的表示形式，然后使用 . 将值进一步传递到下游`respond`。

我们可以在`test`和之间插入它`logger`。我们唯一必须注意的是所有阶段都必须具有相同的基本 monad，因此我们使用`raiseK`插入一个`WriterT`层，`eval`以便它与 的基本 monad 匹配`logger`：

```
main2 = execWriterT $ runProxy $ evalStateK begin $
    test >-> logger >-> raiseK eval 
```

...产生以下结果：

```
>>> main2
Current state is: MyState {_numOrders = 0, _time = 8.0, _health = 100}
Current state is: MyState {_numOrders = 1, _time = 8.0, _health = 100}
Current state is: MyState {_numOrders = 1, _time = 8.0, _health = 99}
Current state is: MyState {_numOrders = 1, _time = 12.0, _health = 99}
Current state is: MyState {_numOrders = 1, _time = 12.0, _health = 98}
Current state is: MyState {_numOrders = 1, _time = 18.0, _health = 98}
Current state is: MyState {_numOrders = 2, _time = 18.0, _health = 98}
Current state is: MyState {_numOrders = 2, _time = 26.0, _health = 98}
"Simulating time for 8.0 seconds.\nGiving an order.\nApplying damage.\nSimulating time for 4.0 seconds.\nApplying damage.\nSimulating time for 6.0 seconds.\nGiving an order.\nSimulating time for 8.0 seconds.\n" 
```

`pipes`旨在解决您描述的那种问题。很多时候，我们不仅想具体化生成数据的 DSL，还想具体化解释器和中间处理阶段。 `pipes`同等对待所有这些概念，并将它们全部建模为可连接的流 DSL。这使得交换各种行为变得非常容易，而无需定义自己的自定义解释器框架。

如果您不熟悉管道，那么您可能需要查看[教程](http://hackage.haskell.org/packages/archive/pipes/3.2.0/doc/html/Control-Proxy-Tutorial.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T08:37:12.020

我不太明白你的例子，但我认为你基本上是[`operational`](http://hackage.haskell.org/packages/archive/operational/latest/doc/html/Control-Monad-Operational.html)在这里重建包。您的`EntityUpdate`类型非常像 意义上的指令集`operational`，而您的类型就像指令集上`UpdateFunctor`的自由函子——这正是关联`operational`和自由单子的构造。（请参阅[“操作真的与自由单子同构吗？”](https://stackoverflow.com/questions/14263363/is-operational-really-isomorphic-to-a-free-monad)和[这个 Reddit 讨论](http://www.reddit.com/r/haskell/comments/17a33g/free_functors_the_reason_free_and_operational_are/)）。

但无论如何，这个`operational`包有你想要的功能，[`interpretWithMonad`](http://hackage.haskell.org/packages/archive/operational/latest/doc/html/Control-Monad-Operational.html#v:interpretWithMonad)：

```
interpretWithMonad :: forall instr m b.
                      Monad m => 
                      (forall a. instr a -> m a) 
                   -> Program instr b
                   -> m b 
```

这允许您提供一个函数，将程序中的每个指令（每个`EntityUpdate`值）解释为一个单子操作，并处理其余部分。

如果允许我进行一点自我推销，我最近正在编写[自己的`operational`使用免费 monads](https://github.com/sacundim/free-operational)的版本，因为我想要一个's类型的`Applicative`版本。因为你的例子让我觉得纯粹是应用性的，所以我根据我的库进行了编写你的练习，我不妨把它粘贴在这里。（我无法理解你的功能。）这里是：`operational``Program``evalLog``eval`

```
{-# LANGUAGE GADTs, ScopedTypeVariables, RankNTypes #-}

import Control.Applicative
import Control.Applicative.Operational
import Control.Monad.Writer

data Order = Order deriving Show
data Damage = Damage deriving Show

-- UpdateI is short for "UpdateInstruction"
data UpdateI a where
    UpdateTime   :: Double -> UpdateI ()
    UpdateOrder  :: Order -> UpdateI ()
    UpdateDamage :: Damage -> UpdateI ()

type Update = ProgramA UpdateI

updateTime :: Double -> Update ()
updateTime = singleton . UpdateTime

updateOrder :: Order -> Update ()
updateOrder = singleton . UpdateOrder

updateDamage :: Damage -> Update ()
updateDamage = singleton . UpdateDamage

test :: Update ()
test = updateTime 8.0 
    *> updateOrder Order
    *> updateDamage Damage
    *> updateTime 4.0
    *> updateDamage Damage
    *> updateTime 6.0
    *> updateOrder Order
    *> updateTime 8.0

evalLog :: forall a. Update a -> Writer String a
evalLog = interpretA evalI
    where evalI :: forall x. UpdateI x -> Writer String x
          evalI (UpdateTime t) = 
              tell $ "Simulating time for " ++ show t ++ " seconds.\n"
          evalI (UpdateOrder Order) = tell $ "Giving an order.\n"
          evalI (UpdateDamage Damage) = tell $ "Applying damage.\n" 
```

输出：

```
*Main> putStr $ execWriter (evalLog test)
Simulating time for 8.0 seconds.
Giving an order.
Applying damage.
Simulating time for 4.0 seconds.
Applying damage.
Simulating time for 6.0 seconds.
Giving an order.
Simulating time for 8.0 seconds. 
```

`interpretWithMonad`这里的技巧与原始包中的函数相同，但适用于应用程序：

```
interpretA :: forall instr f a. Applicative f =>
              (forall x. instr x -> f x)
           -> ProgramA instr a -> f a 
```

如果您真的需要一元解释，则只需导入`Control.Monad.Operational`（原始的或我的）代替`Control.Applicative.Operational`，并使用`Program`代替`ProgramA`. `ProgramA`但是，您可以更强大地静态检查程序：

```
-- Sum the total time requested by updateTime instructions in an
-- applicative UpdateI program.  You can't do this with monads.
sumTime :: ProgramA UpdateI () -> Double
sumTime = sumTime' . viewA 
    where sumTime' :: forall x. ProgramViewA UpdateI x -> Double
          sumTime' (UpdateTime t :<**> k) = t + sumTime' k
          sumTime' (_ :<**> k) = sumTime' k
          sumTime' (Pure _) = 0 
```

的示例用法`sumTime`：

```
*Main> sumTime test
26.0 
```

* * *

**编辑：**回想起来，我应该提供这个较短的答案。这假设您使用[`Control.Monad.Free`](http://hackage.haskell.org/packages/archive/free/3.4.1/doc/html/Control-Monad-Free.html)的是 Edward Kmett 的软件包：

```
interpret :: (Functor m, Monad m) =>
             (forall x. f x -> m x) 
          -> Free f a -> m a
interpret evalF = retract . hoistFree evalF 
```

# javascript - 性能 - Array.forEach 与实现的版本

> ID：15930271
> 
> 赞同：12
> 
> 时间：2013-04-10T15:34:13.963
> 
> 标签：javascript, foreach

我本来希望本机版本更快。

是什么赋予了？

[http://jsperf.com/native-vs-implmented-0](http://jsperf.com/native-vs-implmented-0)

**执行**

```
function each (obj, func, context) {
    var kindex,
        length;
    for (kindex = 0, length = obj.length; kindex < length; kindex++) {
        func.call(context, obj[kindex], kindex, obj);
    }
} 
```

**测试用例**

```
// implemented
each([0,1,2,3], function(val){
    val++;
}) 
```

对比

```
// native
[0,1,2,3].forEach(function(val){
    val++
}) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T15:49:20.920

好吧，这就是 Array.forEach 在内部实现的方式。如您所见，涉及许多检查，而不是直接作为您的实施。

参考[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)

```
if ( !Array.prototype.forEach ) {

  Array.prototype.forEach = function forEach( callback, thisArg ) {

    var T, k;

    if ( this == null ) {
      throw new TypeError( "this is null or not defined" );
    }

    // 1\. Let O be the result of calling ToObject passing the |this| value as the argument.
    var O = Object(this);

    // 2\. Let lenValue be the result of calling the Get internal method of O with the argument "length".
    // 3\. Let len be ToUint32(lenValue).
    var len = O.length >>> 0; // Hack to convert O.length to a UInt32

    // 4\. If IsCallable(callback) is false, throw a TypeError exception.
    // See: http://es5.github.com/#x9.11
    if ( {}.toString.call(callback) !== "[object Function]" ) {
      throw new TypeError( callback + " is not a function" );
    }

    // 5\. If thisArg was supplied, let T be thisArg; else let T be undefined.
    if ( thisArg ) {
      T = thisArg;
    }

    // 6\. Let k be 0
    k = 0;

    // 7\. Repeat, while k < len
    while( k < len ) {

      var kValue;

      // a. Let Pk be ToString(k).
      //   This is implicit for LHS operands of the in operator
      // b. Let kPresent be the result of calling the HasProperty internal method of O with argument Pk.
      //   This step can be combined with c
      // c. If kPresent is true, then
      if ( Object.prototype.hasOwnProperty.call(O, k) ) {

        // i. Let kValue be the result of calling the Get internal method of O with argument Pk.
        kValue = O[ k ];

        // ii. Call the Call internal method of callback with T as the this value and
        // argument list containing kValue, k, and O.
        callback.call( T, kValue, k, O );
      }
      // d. Increase k by 1.
      k++;
    }
    // 8\. return undefined
  };
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T15:48:17.123

`forEach()`做的不仅仅是你的实现。如果您不需要官方算法执行的额外工作，那么当需要原始速度时，像您这样的简单实现确实更可取。

“官方”算法在[MDN 参考中对`Array.forEach`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach).

# ios - 在 Objective C 中前向声明结构

> ID：15930276
> 
> 赞同：1
> 
> 时间：2013-04-10T15:34:23.577
> 
> 标签：ios, objective-c, tbxml

我正在编写一个 iOS 应用程序，其中我有一个模型类，它将使用我给它的 XMLElement 进行初始化。

我将 TBXML 用于 XML 部分。

模型类的标题如下所示：

```
@interface CatalogItem : NSManagedObject

@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) NSManagedObject *group;

-(id)initWithXMLElement:(TBXMLElement*)element;

@end 
```

现在，我不想包含定义 TBXMLElement 的标头，而是希望`struct TBXMLElement`在类定义之前使用: 转发声明它。但是，我收到“预期类型”错误，告诉我我的声明不起作用。这不是我会怎么做的吗？

据我了解，在头文件中包含头文件是不好的做法。编译器不需要知道 的内部工作原理`TBXMLElement`，只需知道它存在或将在编译时存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:43:40.013

结构的前向声明一直在使用，但仍涉及导入标头。动机是不允许开发人员直接进入该结构。即看`CFString`。它被实现为结构，但您不能直接接触结构内容。相反，有一个完整的 API 用于操作结构内容。这允许在不破坏二进制兼容性的情况下更改 CFString 的实现细节。

在您的标头中（理想情况下，标头定义了与之关联的任何 API `TBXMLElement*`）：

TBXMLElement.h：

```
typedef const struct TBLXMLElement *TBXMLElementRef;

extern TBXMLElementRef TBLXMLCreateElement();
... etc ... 
```

然后，在包含 TBLXMLElementAPI 实现的实现文件中：

TBXMElement.c（假设它是一个 C 文件）：

```
typedef struct __TBLXMLElement {
    ... struct members here ...
} TBLXMLElement;

TBXMLElementRef TBLXMLCreateElement()
{
     return (TBXMLElementRef)malloc(sizeof(TBLXMLElement));
}
... etc .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:37:44.320

你确定这是一个`struct`？不是一堂课吗？那么前向声明将是`@class TBXMLElement`

如果它真的是 a `struct`，只需导入定义它的标头即可。

# freebase - 通过单个请求获取链接主题的信息

> ID：15930283
> 
> 赞同：1
> 
> 时间：2013-04-10T15:34:45.063
> 
> 标签：freebase

所以，假设我使用 Freebase API 搜索城市。说，旧金山：

[https://www.googleapis.com/freebase/v1/topic/m/0d6lp?limit=20&filter=/common/topic/description&filter=/common/topic/article&filter=/location/location/geolocation&filter=/location/location/ containsby&filter=/travel/travel_destination/tourist_attractions](https://www.googleapis.com/freebase/v1/topic/m/0d6lp?limit=20&filter=/common/topic/description&filter=/common/topic/article&filter=/location/location/geolocation&filter=/location/location/containedby&filter=/travel/travel_destination/tourist_attractions)

我得到一堆数据，包括“/location/location/containedby”，它指的是这个实体包含在哪些其他实体中。这就是我可以找出城市属于哪个州和国家的方法。

问题是我只得到那些实体的名称和中间值，而不是'/common/topic/notable_for'，因此，我必须对每个实体进行单独的查询，只询问 notable_for 属性，找出其中一个是国家、州或其他我不需要的东西。

例如，这是确定美国是一个国家/地区的查询之一： [https](https://www.googleapis.com/freebase/v1/topic/m/09c7w0?filter=/common/topic/notable_for) ://www.googleapis.com/freebase/v1/topic/m/09c7w0?filter=/common/topic/notable_for 这是每个城市执行 3 到 6 次。

有没有办法告诉 API 在某个主题上包含有关这些链接实体的更多信息？就像在这种情况下，在链接实体上包含“/common/topic/notable_for”。在我的情况下，它将为最终用户节省大量查询和时间。

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:12:32.363

您实际上可以使用[Freebase Search API](https://developers.google.com/freebase/v1/search-overview)上的新[输出参数](https://developers.google.com/freebase/v1/search-output)获得这些结果。像这样：

```
query=/m/0d6lp
output=(description /location/location/geolocation (/location/location/containedby notable)) 
```

[试试看](https://www.googleapis.com/freebase/v1/search?query=/m/0d6lp&output=%28description%20/location/location/geolocation%20%28/location/location/containedby%20notable%29%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:42:12.147

如果您想更好地控制返回的信息，我建议您使用 MQL 读取 API。然后，您可以指定嵌套查询，要求将 contains_by 位置与其类型一起返回（或者您可以显式过滤到仅属于国家或州的位置）。

# javascript - 如果已选中所选框，如何在加载页面时运行 onchange 函数

> ID：15930288
> 
> 赞同：3
> 
> 时间：2013-04-10T15:35:31.693
> 
> 标签：javascript, jquery, reload

我遇到了一个问题，我有一个 ajax 驱动的页面，当用户从一个简单的下拉列表中选择某些内容时会绘制该页面：

```
<select id = "selectdepartment">
    <option id = "default">Select an option...</option>
    ....
</select> 
```

页面的其余部分是使用 jquery 绘制的`.change()`：

```
$('#selectdepartment').change(function(){

}); 
```

然后运行一些 ajax 到 php 脚本。一切正常，问题是当我提交一个用 ajax（使用`$_SERVER['PHP_SELF'];`）绘制的表单时，数据被提交，页面重新加载，页面被清除但选择框仍然留在原处。用户必须移动到不同的选项，然后回到最初选择的选项以重新触发`.change()`. 太糟糕了。

我可以通过在我的所有表单中传递一个 php 变量来解决这个问题，然后检查在每个页面加载时设置的变量以及是否绘制页面部分，但这会导致代码非常混乱，而且不太理想。

必须有一种方法可以使用 jquery 库来做到这一点，尽管我对 javascript 语言的一般知识并不是我想要的。如果有人有任何有用的提示，请分享，但不要为我做，我不会那样学习:)

编辑：带有 .trigger 的代码

```
$('#selectdepartment').change(function(){
var department = $('#selectdepartment').val();
var day = $('#data').data('day');
var month = $('#data').data('month');
var year = $('#data').data('year');
//alert (department);

if(department === "Select an option..."){
    $('.hiddenuntildepartmentisselected').css({"display":"none"});
}
else{
$('.hiddenuntildepartmentisselected').css({"display":"block"});
}

showpoints(department);
drawpointstable(department, day, month, year);
displaytheuseresforselecteddepartment(department, '');

$('#sendthedepartment').val(''+department+'');
$('#hiddendepartmentidforaddinganewpoint').val(''+department+'');

}).trigger('change');//end run functions 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T15:45:07.543

您可以使用该[`.trigger()`](http://api.jquery.com/trigger/)函数在页面加载后立即触发`change`事件处理程序：

```
$('#selectdepartment').change(function() {
    // code here
}).trigger('change'); 
```

或者，如果您需要通过 JavaScript/jQuery 在其他地方调用它：

```
$('#selectdepartment').trigger('change'); // or just .change() as a shorthand 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T15:51:32.740

**更新**

您的表单按钮可以使用该`onClick`属性，该属性将调用一种方法来解析表单字段并将数据通过`.ajax()`.

然后在`success`事件方法中检查您需要的任何标志，并在需要时根据需要修改元素。

基本示例：

内部`.ajax()`：

```
...

url: 'xxx.xxx.xxx',
async: true,
type: 'POST',
dataType: 'html',
data: JSON.stringify( form_fields ),
beforeSend: function()
{
     // Pre send stuff, like starting a loading gif
},
success: function( data, textStatus, xhr )
{
    // Be sure you load the page with the content first
    $( '#containing-div' ).html( data );

    // Do  your check here, and modify your element if needed here
    if( flagtocheck === 'xxx' )
    {
        // Modify the element in question...
    }

    // I call a custom method termed `.ctrls()` here that makes any 
    // adjustments to the DOM once its loaded/updated.
},
error: function( xhr, textStatus, errorThrown )
{
} 
```

当然，您需要根据`flagtocheck`自己的情况进行适当的设置。

希望有帮助！

**关于编辑的注意事项** *这篇文章被编辑得更具描述性和更容易理解。由于提出问题的人已经在使用该`.ajax()`方法，因此`success`事件方法是执行提出问题的人所要求的理想场所。与使用它来调用`.trigger()`或直接修改元素相比，直接修改元素的方法调用少 1`.change()`次。*

# python - 在同一组轴上学习 python 多重图

> ID：15930291
> 
> 赞同：0
> 
> 时间：2013-04-10T15:35:35.400
> 
> 标签：python, plot

我将如何在 Python 中设置这个情节？

这是我在 Mathematica 中所做的：

```
mykvalue = Table[k, {k, 0, 10, 1}];

u[r_, k_] = 1/(2*r^2) + k/(2*r^2);

Plot[u[r, mykvalue], {r, 0, 5}, PlotStyle -> {Red}, 
 PlotRange -> {{0, 5}, {0, 2}}] 
```

![在此处输入图像描述](https://i.stack.imgur.com/hOq4L.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:31:02.583

在我看来，最简单的方法之一是使用多维列表来存储值，而不是使用 matplotlib 绘图。这就是我的意思

```
from math import *
import numpy as np
import matplotlib.pyplot as plt

k = range(11)

yvals = [[] for i in range(len(k))] #there should be a more pythonic way to
x = np.arange(0.4,5,0.1)               #create nested lists i think, ALM I added np.

for i in k:
    for j in x:
        i = float(i) #this conversion from int to float was to debug,       
        j = float(j) #it should be made better
        y=1/(2*j**2) + i/(2*j**2)
        i = int(i)
        yvals[i].append(y)

for i in k:
    plt.plot(x,yvals[i])

plt.show() 
```

我猜这应该可行。您可以摆弄 matplotlib 来修复轴并获取标签和东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:52:32.197

来自 Matplotlib 库 - 他们展示了源代码。

这很接近：

[http://matplotlib.org/examples/pylab_examples/errorbar_limits.html](http://matplotlib.org/examples/pylab_examples/errorbar_limits.html)

[http://matplotlib.org/examples/pylab_examples/step_demo.html](http://matplotlib.org/examples/pylab_examples/step_demo.html)

[http://matplotlib.org/gallery.html](http://matplotlib.org/gallery.html)

高温高压

# php - 用php随机生成颜色

> ID：15930293
> 
> 赞同：1
> 
> 时间：2013-04-10T15:35:39.077
> 
> 标签：php, colors

所以我正在努力让我的标题每天都改变颜色，并且我试图使用随机颜色来创建它。标题中有 2 种颜色，我正在制作它们的互补色。第一种颜色是随机生成的，然后通过 150` 更改色调来修改第二种颜色。The problem is when certain colors are chosen, they could be either too vibrant or dark. 我正在运行一个检查，以便我可以稍微控制亮度值，但仍有一些颜色太亮（例如极黄色）。我将在下面发布我的代码。任何帮助或建议表示赞赏！谢谢！

```
// grab a random color on hue 
$h = rand(0,360);

// color values 50-120 tend to be extremely bright, 
// make adjustments to the S and L accordingly
// a better solution is available?
if ($h > 50 && $h < 120) {
    $s = rand(60,80);
    $l = rand(30,50);
} else {
    $s = rand(60,90);
    $l = rand(38,63);
}

// declare string to place as css in file for primary color           
$randomColor = "hsl(". $h .",". $s ."%,". $l ."%)";

// declare degree for secondary color (30 = analogous, 150 = complimentary)
$degree = 150;

// point to secondary color randomly on either side of chart        
$bool = rand(0,1);
if ($bool) {
    $x = $degree;
} else {
    $x = -$degree;
} 

// set value of the new hue
$nh = $h + $degree;

// if the new hue is above 360 or below 0, make adjustments accordingly
if ($nh > 360) {
    $nh -= 360;
}
if ($nh < 0 ) {
    $nh = 360 - $nh;
}

// set the secondary color
$secondaryColor = "hsl(". abs($h + $x) .",". $s ."%,". $l ."%)"; 
```

这看起来很简单，我相信有更好的方法。我环顾四周，但我注意到的只是色调等的基本公式。再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:10:26.590

这实际上更多是您认为可以查看哪些颜色的问题。这当然不是一个最佳解决方案，但它至少是一种可读的方法（如果你甚至关心它，它也比你原来的更随机）*：*

```
function randColor() {
    return array( rand(0,360), rand(0,100), rand(0,100) );
}

function isAcceptableColor($colorArr) {
    // return true if the color meets your criteria
}

do {
    $color = randColor();
} while ( ! isAcceptableColor($color) ); 
```

# python - elif 和 if 语句中的比较之间的混淆

> ID：15930294
> 
> 赞同：0
> 
> 时间：2013-04-10T15:35:42.127
> 
> 标签：python

你好有人可以帮助我吗？我正在使用 if 和 elif 语句，但由于某种原因，elif 语句代码也回答 if 语句，而 if 代码不回答自己这里是一个例子：

```
 #login
if(input('username=')=='hello'):
    print('continue')
elif(input('passcode=')=='goodbye'):
    print('continue')
else :
    print ('alert') 
```

当我运行此代码时，结果如下：

```
username=hello
continue
>>> 
```

相反，如果我插入密码而不是用户名，则会出现以下结果：

```
username=goodbye
passcode=goodbye
continue
>>> 
```

最糟糕的是，如果我将用户名空间留空并按回车键会发生什么：

```
username=
passcode=goodbye
continue
>>> 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:37:36.193

因为 if 和 elif 的结果是一样的

你的代码：

```
 #login
if(input('username=')=='hello'):
    print('continue')
elif(input('passcode=')=='goodbye'):
    print('continue')
else :
    print ('alert') 
```

尝试这个：

```
 #login
if(input('username=')=='hello'):
    print('continue')
elif(input('passcode=')=='goodbye'):
    print('continue 2')
else :
    print ('alert') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:43:35.557

我不确定我是否理解。该代码正在执行您编写的代码。

您的目标是检查用户名和密码是否匹配以便能够继续？如果是这样，你可能想要更像这样的东西：

```
if(input('username=')=='hello'):
    print('username is OK. Continue')
    if(input('passcode=')=='goodbye'):
        print('passcode is OK. Continue')
    else :
        print('alert. Passcode is wrong.')
else :
    print('alert. Username is wrong.') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:43:53.133

看，该程序完全按照您的指示执行。

您首先测试 an`input()`是否为`"hello"`。如果是，它将打印`'continue'`并跳过`elif`和`else`。如果不是，它将测试另一个是否`input()`等于`"goodbye"`。如果是，它将打印`'continue'`并跳过`else`. 只有当第一个`input()`不是`'hello'`并且第二个`input()`不是`'goodbye'`时，它才会打印`'alert'`。

我想你的意思是这样的：

```
 #login
if(input('username=')=='hello'):
    print('continue')
else:
    raise ValueError('alert')
if(input('passcode=')=='goodbye'):
    print('continue')
else:
    raise ValueError('alert') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T15:45:09.220

`elif``if`只有当语句为假时才会评估语句。逐行跟踪每个案例，您应该会看到正在发生的事情是您应该期待的。

不确定您希望它如何工作，但可能是这样的

```
if(input('username=')=='hello' and input('passcode=')=='goodbye'):
    print('continue')
else :
    print ('alert') 
```

# .net - MsBuild Subversion 错误 元素 无法识别

> ID：15930296
> 
> 赞同：0
> 
> 时间：2013-04-10T15:35:44.073
> 
> 标签：.net, svn, msbuild

我正在尝试编写一个 Msbuild 脚本，该脚本将检索在颠覆中保存的解决方案到本地路径，然后构建解决方案。

从命令行执行时出现错误 - MSB4060 该元素无法识别，或在此上下文中不受支持。任何指针将不胜感激。

```
<project name="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003>">

  <PropertyGroup>
    <RepositoryPath>http://Path<RepositoryPath>
    <svnUsername>USERNAME</svnUsername>
    <svnPassword>PASSWORD</svnPassword>
    <LocalPath>LOCAL_PATH_TO_COMPILE_SOLUTION</LocalPath>
    <solutionFileName>SOLUTION_FILENAME</solutionFileName>
  </PropertyGroup>

  <!--<ItemGroup>
  </ItemGroup>-->

  <Import Project="C:\Program Files\MSBuild\MSBuildCommunityTasks\MSBuild.Community.Tasks.Targets"/>

  <Target Name="GetSource">
    <Message Text="Checking out trunk into $(LocalPath)" />
    <SvnCheckout RepositoryPath="$(RepositoryPath)"
        LocalPath="$(LocalPath)"
        UserName="$(svnUsername)"
        Password="$(svnPassword)">
      <Output TaskParameter="Revision" PropertyName="Revision" />
    </SvnCheckout>
    <Message Text="Have got revision: $(Revision)"/>
  </Target>

  <Target Name="Build" DependsOnTargets="GetSource;Clean;" />

  <Target Name="Clean">
    <MSBuild Projects="$(LocalPath)$(solutionFileName)" Targets="Clean;Rebuild" />
  </Target>

</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:06:49.820

*   在示例中使用大写`Project`根元素而不是小写`project`
*   使用正确的命名空间`xmlns="http://schemas.microsoft.com/developer/msbuild/2003"`（即`>`在关闭引号之前删除）
*   修复结束标签`RepositoryPath`

ie - 只生成有效的 MSBUILD XML 项目

# android - Android 视图管理

> ID：15930297
> 
> 赞同：2
> 
> 时间：2013-04-10T15:35:47.257
> 
> 标签：android, xml, layout, view

我目前正在编写一个 android 应用程序，我希望它编写/设计得很好。

现在，我在一个我经常使用的相对布局中有一组多重视图（2 个图像视图，3 个文本视图）。有没有办法创建一个自定义视图来重新组合它们？

我截取了这张截图来解释我现在所做的事情：

![在此处输入图像描述](https://i.stack.imgur.com/JZsKEl.png)

如您所见，现在我刚刚复制/粘贴了包含我所有视图的框架布局...这是正确的方法还是有更清洁的解决方案？

多谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:45:35.713

没有更好的方法是将您放入布局中的所有内容放入`ArrayList`对象中。然后创建一个以您想要的方式从该对象`ArrayAdapter`中填充一个。`ListView`

这种技术的优点是您获得了一种视图回收机制，该机制将回收`Views`您的内部`ListView`以减少内存消耗。

**简而言之**，您必须：

**1.**创建一个代表单行数据的对象。

**2.**创建`ArrayList`这些对象中的一个。

**3.**创建一个包含 ListView 的布局或使用代码将 ListView 添加到您的主布局。

**4.**创建单行布局（您已经拥有它）。

**5.**创建一个`ViewHolder`从 的角度代表数据行的视觉方面`Views`。

**6.**创建一个自定义`ArrayAdapter`，将根据您的需要填充行。

**7.**最后把这个分配`ArrayAdapter`给你的`ListView`in `onCreate`。

您可以通过阅读我写的这篇博客文章来了解如何实现这一点：

[创建自定义 ArrayAdapter](http://blog-emildesign.rhcloud.com/?p=495)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:52:24.913

如果您在代码中而不是界面构建器中执行此操作，您可以每次使用[LayoutInflator](http://developer.android.com/reference/android/view/LayoutInflater.html)从您的 xml 创建一个视图，然后将这些视图作为子视图添加到您的 LinearLayout。这也将允许您更改数字，而无需复制粘贴每个新视图。

```
LayoutInflater layoutInflator = (LayoutInflater) getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
LinearLayout ll = (LinearLayout) findViewById(R.id.yourLayout);
for(int i=0; i<numOfSubViews; i++){
    View view = layoutInflator.inflate(R.layout.yourFrameLayout, null);
    ll.add(view);
} 
```

# entity-framework - 实体框架：添加迁移失败，无法更新数据库

> ID：15930301
> 
> 赞同：10
> 
> 时间：2013-04-10T15:36:08.993
> 
> 标签：entity-framework

我在一个项目（VS2012 Express 中的 ASP.NET MVC）中使用实体框架（5.0）已有一段时间了。但现在，我不再能够添加迁移。

```
PM > Add-Migration -projectName MyProject.DAL TestMigration
Unable to update database to match the current model because there are pending changes and automatic migration is disabled. Either write the pending model changes to a code-based migration or enable automatic migration. Set DbMigrationsConfiguration.AutomaticMigrationsEnabled to true to enable automatic migration. 
```

我不知道这是否提供任何线索，但“无法...”文本显示为红色。

我试图启用自动迁移（这没有任何意义，因为我试图将挂起的模型更改写入基于代码的迁移），这会导致在数据库中进行所需的迁移。然而，这不是我想要的，因为我在项目中没有迁移。

我试图删除数据库并重新创建数据库。重新创建了数据库（直到上一次迁移），但是当我尝试使用 Add-Migration 时，我仍然收到“无法更新..”错误。

*编辑*

我尝试了 -force 参数，但没有区别。

我的配置类的内容（上次迁移后我没有更改任何内容）：

```
 public Configuration()
    {
        AutomaticMigrationsEnabled = false;
    }

    protected override void Seed(Bekosense.DAL.Context.BekosenseContext context)
    {           
        context.Database.ExecuteSqlCommand(Properties.Resources.TriggerAlertMessageDrop);
        context.Database.ExecuteSqlCommand(Properties.Resources.TriggerAlertMessageCreate); 
        context.Database.ExecuteSqlCommand(Properties.Resources.TriggerAlertMessageSentDrop);
        context.Database.ExecuteSqlCommand(Properties.Resources.TriggerAlertMessageSentCreate); 
        context.Database.ExecuteSqlCommand(Properties.Resources.AddDbUsers);
    } 
```

*编辑 2* 当我在我的 DbContext 中注释以下行时，我发现我能够进行添加迁移：

```
//Database.SetInitializer(new MigrateDatabaseToLatestVersion<MyContext, Configuration>()); 
```

当我将上面的行保持活动状态并注释掉配置文件中的所有内容时，它仍然无法正常工作。为什么 Database.SetInitializer 行会导致这种奇怪的行为？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-06-06T13:03:30.157

您可以重置实体框架来解决您的问题 [*但请记住，它会将迁移带入默认状态*]

**注意：在执行以下操作之前进行备份**

您需要删除当前状态：

*   删除项目中的迁移文件夹
*   删除数据库中的 __MigrationHistory 表（可能在系统表下）

您将在数据库中找到 __MigrationHistory 表 [在 App_Data 文件夹下]

然后在包管理器控制台中运行以下命令：

```
Enable-Migrations -EnableAutomaticMigrations -Force 
```

使用或不使用 -EnableAutomaticMigrations

最后，您可以运行：

```
Add-Migration Initial 
```

[这也可能对您有所帮助](https://stackoverflow.com/questions/11679385/reset-entity-framework-migrations)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-30T08:57:19.273

Never use automigrations, that gave me problems in the past (when migrating the database down, use the correct way to do it from the start!)

This line should be in your global.asax:

```
Database.SetInitializer(new MigrateDatabaseToLatestVersion<MyContext, Configuration>()); 
```

And not in your DbContext!

Other tips if the above won't help:

Perhaps you have multiple layers in your application:

```
Add-Migration 000  -StartupProjectName "NameOfTheProjectInSolutionExplorer" -ConfigurationTypeName "MyConfiguration"  -ConnectionString "theconnectionstring;" -ConnectionProviderName "System.Data.SqlClient" -Verbose 
```

Above is the Add-Migration command i use for a multi-layered application.

Same thing for an update of the database

```
Update-Database -ConfigurationTypeName "SlaveConfiguration" -StartupProjectName "FacturatieMVCv2.Data" -Verbose -script 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-14T18:48:23.573

在我的情况下，我遇到了同样的错误，因为我在迁移期间在构造函数方法的类 DbContext 上强制 ObjectContext.CommandTimeout。

尝试删除它

```
((IObjectContextAdapter)this).ObjectContext.CommandTimeout = 5000; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-06-09T07:54:17.583

这对我有用：

```
update-database -targetmigration:"0" -force -verbose
add-migration Initial
update-database 
```

# jquery - ajax 调用 WCF 服务错误“405 Method Not Allowed”

> ID：15930306
> 
> 赞同：1
> 
> 时间：2013-04-10T15:36:15.210
> 
> 标签：jquery, ajax, wcf

我有一个 web 服务，我使用 jquery ajax 调用它来调用它，该服务托管在一个项目中，该项目还在 web.config 中托管 silverlight 项目，我有

```
<system.webServer>    
    <httpProtocol>
      <customHeaders>
        <add name="Access-Control-Allow-Origin" value="*" />
        <add name="Access-Control-Allow-Headers" value="Content-Type, Accept, X-Requested-With" />
        <add name="Access-Control-Allow-Methods" value="GET, POST, OPTIONS" />
      </customHeaders>
    </httpProtocol>
</system.webServer> 
```

端点配置是

```
<service behaviorConfiguration="ThreeBirds.HttpServiceBehavior" name="TheWire.Server.Endpoints.LeadCaptureService">
        <endpoint address="" binding="webHttpBinding" behaviorConfiguration="AspNetAjaxBehavior" name="LeadCaptureService" contract="ThreeBirds.Services.Contracts.ILeadCaptureService" />
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service> 
```

和自定义行为配置是

```
<behavior name="AspNetAjaxBehavior">
          <enableWebScript />
        </behavior> 
```

所以当我从 javascript 调用 web 服务来发布数据时，我得到 '405 method not allowed' 错误

```
var webMethod = 'RecordSubscribe';
                                        var formFields = {

                                            dealerid: dealerID,
                                            firstname: $(form).find(".inputFirstName").val(),
                                            lastname: $(form).find(".inputLastName").val(),
                                            email: $(form).find(".inputEmail").val()
                                        };

                                        $.ajax({
                                            type: "POST",
                                            url: "http://thewire.3birdsmarketing.com/wire/endpoints/Leadcapture.svc/Record" + webMethod,
                                            processData: false,
                                            contentType: "application/json",
                                            data: JSON.stringify(formFields),
                                            allowCrossDomain: true,
                                            dataType: "json",
                                            success: function (data, status, req) {                                                
                                                alert("Thank you " + formFields.firstname + " " + formFields.lastname + ", your information has been submitted.");

                                            },
                                            error: function (data) {
                                                alert('Sorry ! There was an error sending your data. Please try it again.');
                                            }
                                        }); 
```

在 Chrome 中，该服务确实成功，但在 IE (10) 和 firefox (19) 中它失败并且我收到错误消息。Chrome 首先执行 OPTIONS 请求，这会导致 405，就像 IE 和 firefox 中的请求一样，但之后 chrome 会自动执行另一个 POST 请求，并且会出现 200。 IE 和 Firefox 不会执行另一个 POST 请求。

有什么我想念的吗？感谢您的回答

# php - C++/C 在 Web 环境中的用途是什么？

> ID：15930311
> 
> 赞同：2
> 
> 时间：2013-04-10T15:36:24.833
> 
> 标签：php, c++, c

我可能对此解释不正确，但我偶然发现了流行网站上使用的编程语言[列表](http://en.wikipedia.org/wiki/Programming_languages_used_in_most_popular_websites)。

我注意到 C 和 C++ 经常在 youtube、google、twitter 和 facebook 等网站上使用。我一直认为 c/c++ 用于非基于 Web 的环境，例如桌面应用程序和嵌入式系统编程。

我的编程经验几乎只是基于 Web 的语言，除了一些用于一些小项目的 Python。这些站点需要使用 c++/c 执行哪些类型的任务，以及它们如何与 PHP 等更典型的 Web 语言交互？例如，c++ 会与 PHP 类似地使用（处理请求等），还是更像优化服务器设置和网络？

# iphone - 如何布局可滚动的 iPhone 视图

> ID：15930312
> 
> 赞同：1
> 
> 时间：2013-04-10T15:36:25.977
> 
> 标签：iphone, ios, layout, view, uiscrollview

我需要有关布局以下视图的最实用方法的建议。正如您从所附图片中看到的那样，我有一个静态徽标和出现在视图顶部的文本，然后是可变数量的项目。

最初，我打算将 TableView 用于可变数量的项目，这样我就可以在运行时加载任何给定数量的单元格。

我的问题是，如果我将 tableView 放到静态徽标和文本下方的此视图上，当用户滚动时，静态徽标和文本将保持固定。我需要静态徽标/文本和 tableView 来向上滚动。

我的下一个倾向是使用滚动视图，我将在其中放置我的 tableView 和静态徽标。

这是解决问题的最务实的方法吗？如果是这样，滚动scrollView与滚动tableView时是否会出现可用性问题？在我看来，这可能会变得混乱。

非常感谢任何有关解决此问题的最佳方法的建议。

![内容](https://i.stack.imgur.com/3q16M.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:41:38.083

在滚动视图中使用表格视图是个坏主意，Apple 在他们的文档中对此提出了警告。基本上，内部手势识别器可能会发生冲突并产生笨拙的用户体验。最好的方法是使用 tableview（它是滚动视图的子类）并有两种不同类型的单元格——一种用于徽标，一种用于底部的重复内容。将第一个单元格设为徽标并调整表格视图的设置以将其格式化为您想要的内容。

# bash - 回显但保留双引号

> ID：15930323
> 
> 赞同：5
> 
> 时间：2013-04-10T15:36:57.153
> 
> 标签：bash, shell, ubuntu, echo

我正在尝试创建一个将变量/文本回显到文件的脚本 - 该脚本的一个片段是：

```
echo "
SUBJECT="Text here"
EMAIL="email@domain.co.uk"
EMAILMESSAGE="/tmp/emailmessage.txt"
" > /root/email.txt 
```

这工作正常，但所有双引号都被删除了。

电流输出：

```
# cat /root/email.txt
SUBJECT=Text here
EMAIL=email@domain.co.uk
EMAILMESSAGE=/tmp/emailmessage.txt 
```

期望的输出：

```
# cat /root/email.txt
SUBJECT="Text here"
EMAIL="email@domain.co.uk"
EMAILMESSAGE="/tmp/emailmessage.txt" 
```

有任何想法吗？

干杯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T15:39:56.853

双引号不嵌套。使用单引号：

```
echo '
SUBJECT="Text here"
EMAIL="email@domain.co.uk"
EMAILMESSAGE="/tmp/emailmessage.txt"
' > /root/email.txt 
```

但这会在文件的顶部和底部添加空行。如果你不想要那些：

```
echo 'SUBJECT="Text here"
EMAIL="email@domain.co.uk"
EMAILMESSAGE="/tmp/emailmessage.txt"' > /root/email.txt 
```

可能更清洁的解决方案是使用[“此处文档”](http://www.gnu.org/software/bash/manual/html_node/Redirections.html#Here-Documents)

```
cat > email.txt <<'EOF'
SUBJECT="Text here"
EMAIL="email@domain.co.uk"
EMAILMESSAGE="/tmp/emailmessage.txt"
EOF 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T15:53:38.033

转义双引号将起作用

```
echo "a\"" 
output -> a" 
```

试试这个：

```
echo "
SUBJECT=\"Text here\"
EMAIL=\"email@domain.co.uk\"
EMAILMESSAGE=\"/tmp/emailmessage.txt\"
" > /root/email.txt 
```

# vb.net - 删除特定文件，然后将它们提取到另一个文件夹中

> ID：15930325
> 
> 赞同：1
> 
> 时间：2013-04-10T15:37:00.480
> 
> 标签：vb.net, visual-studio-2010

使用以下代码，我试图删除闪存驱动器上文件夹中的特定文件，然后将剩余文件复制到单独的文件夹中。当程序运行并且我启动按钮执行此操作时，程序会删除过去一年内未修改的文件，但随后它不会继续提取剩余的文件并将它们放入单独的文件夹中。

有谁知道为什么？

```
Imports System.IO

Public Class frmExtractionator

    Dim txtFiles1 As Control

    Private Sub btnStart_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnStart.Click

        Dim sourceDirectory As String = "E:\CopierFolderforTestDriveCapstone"
        Dim archiveDirectory As String = "E:\FilesExtracted"

        Try
            DeleteUnmodifiedFiles(sourceDirectory, 365)

            Dim txtFiles = Directory.EnumerateFiles(sourceDirectory)

            If (Not System.IO.Directory.Exists(archiveDirectory)) Then
                System.IO.Directory.CreateDirectory(archiveDirectory)
            End If

            For Each currentFileLoc As String In txtFiles
                Dim fileName = currentFileLoc.Substring(sourceDirectory.Length + 1)
                File.Move(currentFileLoc, Path.Combine(archiveDirectory, fileName))
            Next
        Catch eT As Exception
            Console.WriteLine(eT.Message)
        End Try
    End Sub

    Private Sub DeleteUnmodifiedFiles(ByVal directoryName As String, ByVal modificationThresholdDays As Integer)
        Dim folder As New DirectoryInfo(directoryName)
        Dim thresholdDate As Date
        Dim wasModifiedSinceThreshold As Boolean
        For Each file As FileInfo In folder.GetFiles
            thresholdDate = DateTime.Now().AddDays(-1 * modificationThresholdDays)
            wasModifiedSinceThreshold = (file.LastWriteTime > thresholdDate)
            If (Not wasModifiedSinceThreshold) Then file.Delete()
        Next
        MessageBox.Show("Deleting Files")
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:31:57.483

这将删除源目录中一年未修改的所有文件，然后将所有剩余文件移动到目标目录...

```
Private Sub btnStart_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnStart.Click
    Dim fileListA() As String
    fileListA = (IO.Directory.GetFiles("C:\Scource_Directory"))
    For Each i As String In fileListA
        If (IO.File.GetLastWriteTime(i).ToShortDateString.Substring(6)) < (CType(DateTime.Now.Year.ToString, Integer) - 1) Then
            IO.File.Delete(i)
        End If
    Next
    Dim fileListB() As String
    fileListB = (IO.Directory.GetFiles("C:\Scource_Directory"))
    For Each i As String In fileListB
        IO.File.Move(i, "Destination_Directory")
    Next
End Sub 
```

# javascript - 如何使用 Jquery 停止所有音频播放

> ID：15930328
> 
> 赞同：9
> 
> 时间：2013-04-10T15:37:03.340
> 
> 标签：javascript, jquery, dom, jquery-mobile, kineticjs

我正在使用 jquery mobile 更新页面中的 div 以播放一些动画。

动画还通过使用`document.createElement('audio');`

我的问题是，当我将页面更新为另一个动画时，旧声音继续播放。

抱歉，这是我的第一个问题，如果我的措辞不正确，我深表歉意。

这是我的代码..

这是要加载到#animation div中的动画代码

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>
  </head>
<body>
    <div id="container"></div>
    <script src="scripts/kinetic-v4.3.2.min.js"></script>
    <script src="scripts/jquery-1.9.1.js"></script>
    <script>
    /*BABY SCENE*/
    var stage = new Kinetic.Stage({
        container: 'container',
        width: 578,
        height: 400
    });
    var babyLayer = new Kinetic.Layer();
    var backLayer = new Kinetic.Layer();

    var imageObj = new Image();
    var backObj = new Image();
    imageObj.onload = function() {
    var baby = new Kinetic.Image({
      x: stage.getWidth() / 2 -100 ,
      y: stage.getHeight() / 2 -100,
      image: imageObj,
      width: 200,
      height: 200,
      opacity: 0.0
    });

    var background = new Kinetic.Image({
      x: 0,
      y: 0,
      image: backObj,
      width: 578,
      height: 400,
      opacity: 0.0
    });

    // add the shape to the layer
    babyLayer.add(baby);
    backLayer.add(background);

    // add the layer to the stage
    stage.add(babyLayer);
    stage.add(backLayer);
    babyLayer.moveToTop();
    babyLayer.draw();

    /*ANIMATION TIMELINE
     * 
     * FIRST EVENT: FADE IN BABY
     * SECOND EVENT: BABY TRANSITION
     * THIRD EVENT: FADE IN BACKGROUND
     */

    /*1) Fade in Baby*/
    setTimeout(function() {
        baby.transitionTo({
        opacity: 1,
        duration: 1
    });
    }, 200);

    setTimeout(function() {
    /*JQuery Baby Speech*/
       $(document).ready(function() {
        var babySpeech = document.createElement('audio');
        babySpeech.setAttribute('src', '../Animations/sounds/babyspeech.mp3');
        babySpeech.setAttribute('autoplay', 'autoplay');
        //audioElement.load()
        $.get();
        babySpeech.addEventListener("load", function() {
        babySpeech.play();
        }, true);
    });
    }, 800);

    /*2) Baby Transition*/
    setTimeout(function() {
        baby.transitionTo({
        x: 140,
        y: stage.getHeight() / 2 + 59,
        width: 106,
        height: 118,
        opacity: 1,
        duration: 3
    });
    }, 3000);

    setTimeout(function() {
    /*JQuery Baby Giggle*/
       $(document).ready(function() {
        var baby = document.createElement('audio');
        baby.setAttribute('src', '../Animations/sounds/baby.mp3');
        baby.setAttribute('autoplay', 'autoplay');
        //audioElement.load()
        $.get();
        baby.addEventListener("load", function() {
        baby.play();
        }, true);
    });
    }, 3000);

    /*3) Fade in Background*/
    setTimeout(function() {
        background.transitionTo({
        opacity: 1,
        duration: 3
    });
    }, 3200);

    setTimeout(function() {
    /*Second JQuery Baby Speech*/
       $(document).ready(function() {
        var babySpeech = document.createElement('audio');
        babySpeech.setAttribute('src', '../Animations/sounds/babyspeech.mp3');
        babySpeech.setAttribute('autoplay', 'autoplay');
        //audioElement.load()
        $.get();
        babySpeech.addEventListener("load", function() {
        babySpeech.play();
        }, true);
    });
    }, 8700);

  };
  imageObj.src = '../Animations/images/baby.png';
  backObj.src = '../Animations/images/background/babyroom.jpg';

</script> 
```

这是主页代码。当您单击下一步按钮时，它会从数组中获取要加载到#animation 的动画页面的文件名。

```
<div id="nav" data-role="content" style="width: 600px; margin: 0 auto; text-align: center; position: relative; top:450px">
    <a href="#animation" data-role="button" data-inline="true" id ="back">Back</a>
    <a href="#animation" data-role="button" data-inline="true" data-theme="b" id="next">Next</a>
    <script>
        var count=0;
        var link_array = ['baby', 'bed', 'book', 'cat', 'chair', 'daddy', 'dog', 'mummy', 'shoe', 'teddy'];
        $("#next").click(function(e) {
            if(count!==9)
            { 
                $('audio').stop();
                count+=1;
            }
            $('#animation1wl').load('../Animations/' + link_array[count] + '.html');
            $('#animation1wl').trigger('create');
        }); 
        $("#back").click(function(e) {
            if(count !==0)
            {
                count-=1;
            }
            $('#animation1wl').load('../Animations/' + link_array[count] + '.html');
            $('#animation1wl').trigger('create');
        }); 
    </script>
</div>

<div id="animation" data-role="content" style="width: 600px; margin: 0 auto; text-align: left">Problem Loading Resource LNW</div> 
```

当我单击前进或后退按钮时，我希望将上一个动画中的音频加载到#animation 中以停止播放..

这是在#animation 中呈现的代码

```
<div id="animation1wl" data-role="content" style="width: 600px; margin: 0 auto; text-align: left" class="ui-content" role="main">

    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>

    <div id="container"><div style="position: relative; display: inline-block; width: 578px; height: 400px;" class="kineticjs-content"><canvas width="578" style="width: 578px; height: 400px; position: absolute;" height="400"></canvas><canvas width="578" style="width: 578px; height: 400px; position: absolute;" height="400"></canvas></div></div>
    <script src="scripts/kinetic-v4.3.2.min.js"></script>
    <script src="scripts/jquery-1.9.1.js"></script>
    <script>
      /*BABY SCENE*/
      var stage = new Kinetic.Stage({
        container: 'container',
        width: 578,
        height: 400
      });
      var babyLayer = new Kinetic.Layer();
      var backLayer = new Kinetic.Layer();

      var imageObj = new Image();
      var backObj = new Image();
      imageObj.onload = function() {
        var baby = new Kinetic.Image({
          x: stage.getWidth() / 2 -100 ,
          y: stage.getHeight() / 2 -100,
          image: imageObj,
          width: 200,
          height: 200,
          opacity: 0.0
        });

        var background = new Kinetic.Image({
          x: 0,
          y: 0,
          image: backObj,
          width: 578,
          height: 400,
          opacity: 0.0
        });

        // add the shape to the layer
        babyLayer.add(baby);
        backLayer.add(background);

        // add the layer to the stage
        stage.add(babyLayer);
        stage.add(backLayer);
        babyLayer.moveToTop();
        babyLayer.draw();

        /*ANIMATION TIMELINE
         * 
         * FIRST EVENT: FADE IN BABY
         * SECOND EVENT: BABY TRANSITION
         * THIRD EVENT: FADE IN BACKGROUND
         */

        /*1) Fade in Baby*/
        setTimeout(function() {
            baby.transitionTo({
            opacity: 1,
            duration: 1
        });
        }, 200);

        setTimeout(function() {
        /*JQuery Baby Speech*/
           $(document).ready(function() {
            var babySpeech = document.createElement('audio');
            babySpeech.setAttribute('src', '../Animations/sounds/babyspeech.mp3');
            babySpeech.setAttribute('autoplay', 'autoplay');
            //audioElement.load()
            $.get();
            babySpeech.addEventListener("load", function() {
            babySpeech.play();
            }, true);
        });
        }, 800);

        /*2) Baby Transition*/
        setTimeout(function() {
            baby.transitionTo({
            x: 140,
            y: stage.getHeight() / 2 + 59,
            width: 106,
            height: 118,
            opacity: 1,
            duration: 3
        });
        }, 3000);

        setTimeout(function() {
        /*JQuery Baby Giggle*/
           $(document).ready(function() {
            var baby = document.createElement('audio');
            baby.setAttribute('src', '../Animations/sounds/baby.mp3');
            baby.setAttribute('autoplay', 'autoplay');
            //audioElement.load()
            $.get();
            baby.addEventListener("load", function() {
            baby.play();
            }, true);
        });
        }, 3000);

        /*3) Fade in Background*/
        setTimeout(function() {
            background.transitionTo({
            opacity: 1,
            duration: 3
        });
        }, 3200);

        setTimeout(function() {
        /*Second JQuery Baby Speech*/
           $(document).ready(function() {
            var babySpeech = document.createElement('audio');
            babySpeech.setAttribute('src', '../Animations/sounds/babyspeech.mp3');
            babySpeech.setAttribute('autoplay', 'autoplay');
            //audioElement.load()
            $.get();
            babySpeech.addEventListener("load", function() {
            babySpeech.play();
            }, true);
        });
        }, 8700);

        console.log($('animation1wl').find('audio')[0]);

      };
      imageObj.src = '../Animations/images/baby.png';
      backObj.src = '../Animations/images/background/babyroom.jpg';

    </script>

</div> 
```

任何帮助都会很棒..

非常感谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-10T15:38:11.517

你可以这样做：

```
$('audio').each(function(){
    this.pause(); // Stop playing
    this.currentTime = 0; // Reset time
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-07T13:22:16.320

Ihad to rewrite the code but, I got this working in the end by loading the animation in its entirety when you click on the next button rather than just updating a single div.

It's a workaround but at least its working now.

Thanks to Omar who helped a lot with this problem.

# c# - C# MDI 窗体容器包装子窗体

> ID：15930331
> 
> 赞同：0
> 
> 时间：2013-04-10T15:37:05.397
> 
> 标签：c#

我在 C# 中有一个容器 MDI 表单，有 2 个不同大小的孩子。

当我将新的孩子初始化到容器时，有没有办法 - 我会以编程方式设置容器的大小来包装子表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:42:43.120

当您从 Mdi 父级打开新表单时，请设置其属性`size`：

```
Form childForm = new Form();
childForm.MdiParent = this;
childForm.Size = new Size(100, 100);//edit size
childForm.Show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:46:47.157

好的，由于 IRSOG 已删除答案，我找到了答案：

```
 Form form= new Form();
    form.MdiParent = this;
    this.Size = new Size(form.Width, form.Height);
    form.Show(); 
```

希望它会帮助某人

# sql - SQL - 返回仅包含满足要求的字段

> ID：15930333
> 
> 赞同：0
> 
> 时间：2013-04-10T15:37:09.813
> 
> 标签：sql

我正在尝试执行以下操作：

将 Y/N 标志指定为 Prior Approval，其中包括所有具有 BI 限制 25/50 和 PD 限制 25 且没有其他承保范围的保单。

所以这段代码满足了第一个要求：

```
SELECT DISTINCT
        PolNum
FROM    Results_Vehicle
WHERE   ( CovCode = 'BI'
          AND CovLimit = '25/50'
        )
        OR ( CovCode = 'PD'
             AND CovLimit = '25'
           ) 
```

我不知道如何不包括具有其他覆盖范围的记录。所以基本上对于每个策略，他们可以有 UMBI、COL、REN、BI、PD 等的 CovCode。但是如果对于该 PolNum，他们只有 BI 或 PD 作为 CovCode 和上面定义的 CovLimit，则标志应该只给出 Y。

所以我也需要把它放在 Y/N 格式如下，显然这只满足第一部分的要求：

```
SELECT  CASE WHEN ( CovCode = 'BI'
                    AND CovLimit = '25/50'
                  )
                  OR ( CovCode = 'PD'
                       AND CovLimit = '25'
                     ) THEN 'Y'
             ELSE 'N'
        END AS PriorApproval
FROM    Results_Vehicle 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:51:25.413

下面这个查询怎么样。联合查询为您提供了具有该类型覆盖范围的所有 PolNum 的组合列表，因此您执行 a`not in`以提供所有不在该列表中的保单编号，然后您`not in`在*该*列表上执行 a，这应该给您留下仅具有所需覆盖范围而没有其他覆盖范围的 PolNum。

```
SELECT CASE WHEN 
(
 (CovCode = 'BI' AND CovLimit = '25/50') 
 OR 
 (CovCode = 'PD' AND CovLimit = '25')
 and PolNum not in 
 (
  select PolNum from Results_Vehicle as r1 where PolNum not in 
    (
     select PolNum from Results_Vehicle as r2 
     where CovCode = 'BI' and CovLimit = '25/50' 
     union 
     select PolNum from Results_Vehicle as r3 
     where CovCode = 'PD' AND CovLimit = '25'
    )
 )
) THEN 'Y'
ELSE 'N'
END AS PriorApproval 
```

FROM Results_Vehicle

# angularjs - 如何通过 $http 将 angular-ui 的 typeahead 与服务器绑定以进行服务器端优化？

> ID：15930339
> 
> 赞同：69
> 
> 时间：2013-04-10T15:37:32.960
> 
> 标签：angularjs, angular-ui

typeahead 示例（[http://angular-ui.github.io/bootstrap/#/typeahead](http://angular-ui.github.io/bootstrap/#/typeahead)）提到在此自动完成中实现后端很容易，但没有提供示例。我特别感兴趣的是找出当前输入的字符串，以便我可以将其发送*到*服务器并发送回已经过滤的结果 - 我想在服务器端进行此优化并最小化我的查询，我不认为返回对于数据库中有超过 200,000 个条目的应用程序，整个结果集并仅排除不匹配的项目以进行显示是可行的。

在这种情况下，我应该完全忘记预先输入并使用下拉菜单实现自定义解决方案，还是有办法轻松做到这一点？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2013-04-10T15:49:33.470

有一种方法可以很容易地实现这一点，无需推出您的自定义解决方案（至少在这种情况下不是！）。基本上，您可以使用任何函数作为 typeaheads 表达式的一部分，例如：

```
<input type="text" ng-model="selected" typeahead="state for state in getStates($viewValue)"> 
```

正如您从这个示例中看到的，`getStates($viewValue)`可以调用方法（在作用域上定义）并且`$viewValue`对应于用户输入的值。

这里最好的是你的函数可以返回一个promise，并且这个promise 将被typeahead 正确识别。

前段时间，我编写了一个示例 plunk，展示了如何使用服务器端调用来提供自动完成功能。检查这个显示美国所有城市的自动完成功能（基于 geobytes.com）的 plunk，其中城市是从 JSONP 服务实时查询的：

[http://plnkr.co/edit/t1neIS?p=preview](http://plnkr.co/edit/t1neIS?p=preview)

查看有关如何在服务器端进行过滤的工作示例（您需要输入至少 3 个字符才能看到结果）。当然你不限于 jsonp 调用，你可以使用任何返回 promise 的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-13T19:49:23.793

Don't have the rep to comment so posting as an answer (sorry!)

If you are using a newer version of bootstrap you need to add uib- in front of typeahead (like so)

```
<input type="text" ng-model="selected" uib-typeahead="state for state in getStates($viewValue)"> 
```

# node.js - javascript 类上的事件或函数

> ID：15930340
> 
> 赞同：1
> 
> 时间：2013-04-10T15:37:33.333
> 
> 标签：node.js

我`EventEmitter`在某些类中使用，但我真的很困惑事件侦听和事件发射是否比调用对象方法更有效？

我希望对象能够侦听向它发出的许多事件，并且还向最初向对象和其他一些对象发出事件的对象发出许多事件。

而且我很困惑是否应该何时使用依次调用其他对象方法的函数等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:55:13.930

事件改善了模块解耦。一切都与这个简单的问题有关：“我必须触摸多少文件才能修改或添加功能 X？”

一个简单的例子：你有一个 Web 服务器、一个日志模块和一个启动脚本，它们在启动时将它们联系在一起。函数调用方式如下：

```
// Startup.js
var Startup = function() {
    var logger = new Logger();
    var server = new Server(logger);
};

// Logger.js
var Logger = function() {
};
Logger.prototype.log = function(msg) {
    console.log(msg);
};

// Server.js
var Server = function(logger) {
    this.logger = logger;
};
Server.prototype.start() {
    this.logger.log("Start server...");
}; 
```

您可以看到 Startup 知道所有类，Server 知道 logger 以及如何使用它。如果我想重命名 Logger 的函数 log 来写，我必须触摸 Logger 和 Server。

现在让我们看一下事件驱动的方法：

```
// Startup.js
var Startup = function() {
    var logger = new Logger();
    var server = new Server();
    server.addListener(logger);
};

// Logger.js
var Logger = function() {
    this.on("startup", function(msg) {
        console.log(msg);
    });
};
Logger.prototype.__proto__ = EventEmitter.prototype;

// Server.js
var Server = function() {
};
Server.prototype.start() {
    this.emit("startup", "Start server...");
};
Server.prototype.__proto__ = EventEmitter.prototype; 
```

现在 Logger 和 Server 互不认识。我可以重命名日志，我只需要接触 Logger.js。我什至可以删除 Logger 或添加更多 Logger，它们都与 Server 一起工作。但我永远不必接触 Server.js。

这是一个简单的例子，解耦在这里看起来并不重要。但是项目越大，收益就越多。

您可以对服务器进行单元测试，而无需模拟 Logger。而 Logger 只是一个依赖项。想象一下如果 Server 有五个或更多您必须模拟的子模块的优势。

我希望这可以帮助您了解事件驱动架构的好处。

# playframework - PlayFramework 2.1中的多个FieldConstructor？

> ID：15930343
> 
> 赞同：3
> 
> 时间：2013-04-10T15:37:36.603
> 
> 标签：playframework, playframework-2.0, playframework-2.1

我正在尝试在 scala 文档中构建自定义 FieldConstructor。

我按照说明，建立一个`twitterBootstrapInput.scala.html`，它的工作原理......

这是我的输出：

![输出截图](https://i.stack.imgur.com/bSRHL.png)

问题来了：

我想要`@helper.inputRadioGroup`“水平”的跨度，而不是垂直的。

（因为块中的`twitterBootstrapInput.scala.html`扭曲）`@elements.input``<div>`

但我不知道如何在不感染其他“文本字段”的情况下修改模板？

我应该定义另一个implicitFieldConstructor 吗？还是做点别的？

我找不到有关如何解决此问题的示例...

所有的自定义模板文档都太少见了……

有人可以给我一个例子吗？谢谢 ！

这是我的代码（播放 2.1）：

```
@import views.html.helper.FieldConstructor
@implicitFieldConstructor = @{ FieldConstructor(twitterBootstrapInput.f) }

@helper.inputRadioGroup(consultForm("currency") 
  , options = Seq(
    "USD" -> "USD" 
  , "HKD" -> "HKD" 
  , "RMB" -> "RMB") 
  , '_label -> "Currency" 
  , '_error -> consultForm("currency").error.map(_.withMessage("select currency"))
) 
```

======== 2011 年 4 月更新 ===============

感谢@Schleichardt 让我迈出了第一步。`(FieldConstructor(twitterBootstrapRadioGroup.f) , lang)`我在 之后追加`inputRadioGroup`，它似乎有效。但是，即使我`@elements.input`在模板中写了最简单的（没有其他装饰），它仍然是垂直跨越的。如下截图：

![在此处输入图像描述](https://i.stack.imgur.com/rs3nx.png)

输出的html源代码是：

![在此处输入图像描述](https://i.stack.imgur.com/Q0qzy.png)

如何修改`<span class="buttonset" ...>`块？我不应该调用`@elements.input`模板吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T22:39:11.250

**精简版：**

```
@(consultForm: Form[Consult])(implicit lang: play.api.i18n.Lang)

@import views.html.helper.FieldConstructor
@implicitFieldConstructor = @{ FieldConstructor(twitterBootstrapInput.f) }

@* uses twitterBootstrapInput */
@helper.inputText(consultForm("name"))

@* uses anotherFieldConstructor */
@helper.inputRadioGroup(consultForm("currency") 
  , options = Seq(
    "USD" -> "USD" 
  , "HKD" -> "HKD" 
  , "RMB" -> "RMB") 
  , '_label -> "Currency" 
  , '_error -> consultForm("currency").error.map(_.withMessage("select currency"))
)(FieldConstructor(anotherFieldConstructor.f), lang)

@* uses twitterBootstrapInput */
@helper.inputText(consultForm("anotherFormFieldName")) 
```

`anotherFieldConstructor`是您必须创建的附加 FieldConstructor。它应该根据您的需要放置单选按钮。

**长版：**

inputRadioGroup 的 API 文档在这里：[http](http://www.playframework.com/documentation/api/2.1.0/scala/index.html#views.html.helper.inputRadioGroup) ://www.playframework.com/documentation/api/2.1.0/scala/index.html#views.html.helper.inputRadioGroup $

由于 inputRadioGroup 是一个 Scala 单例对象，因此以下代码语句是相同的：

```
helper.inputRadioGroup(consultForm("currency") /* etc. */)
helper.inputRadioGroup.apply(consultForm("currency") /* etc. */) 
```

inputRadioGroup 的 apply 方法有两个参数列表。第二个列表使用隐式参数。

`@implicitFieldConstructor = @{ FieldConstructor(twitterBootstrapInput.f) }`指定后，`twitterBootstrapInput`FieldConstructor 是 inputRadioGroup 的第二个参数列表中处理程序的“默认参数” 。

但是您可以使用显式参数覆盖它：

```
helper.inputRadioGroup(consultForm("currency") /* etc. */)(FieldConstructor(anotherFieldConstructor.f), lang) 
```

如果您使用 Scala 控制器，则模板需要额外的 lang 参数列表：

```
@(consultForm: Form[Consult)])(implicit lang: play.api.i18n.Lang) 
```

模板中不能有两个隐含的 FieldConstructor。

# c# - System.Threading.Timer TimerCallback 委托与参数？

> ID：15930350
> 
> 赞同：3
> 
> 时间：2013-04-10T15:37:55.250
> 
> 标签：c#, timer

我需要将以下内容传递`int dldnow`给 sendData 静态方法/委托。

```
public int dldnow;
Timer timer = new Timer(new TimerCallback(sendData), null, 1000*30, 1000*30);

public static void sendData(object obj)
{
  string imageCount = (string)dldnow;
  string imageCountJson = wc.DownloadString("http://*********/u.php?count=" + imageCount);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T15:38:58.193

如果要传递一次，请使用第二个构造函数参数：

```
System.Threading.Timer(new TimerCallback(sendData), dldnow, 1000*30, 1000*30); 
```

如果您想定期访问它，您可以制作一个静态 volatile 字段：

```
public static volatile int dldnow; 
```

（需要 volatile 以便在从多个线程访问时始终保持最新状态）

# asp.net-mvc-4 - EF 并发导致触发器出现问题

> ID：15930353
> 
> 赞同：2
> 
> 时间：2013-04-10T15:38:09.560
> 
> 标签：asp.net-mvc-4, entity-framework-4.1

在我的 SQL 表 (2008) 中，我有一个名为 Timestamp 的时间戳列。

在我的 .Net 项目中，我有一个带有属性的 POCO 类

```
public byte[] Timestamp {get; set;} 
```

在我的配置代码中，我有以下内容：

```
Property(p => p.Timestamp).IsRowVersion(); 
```

现在，如果我打开两个编辑屏幕，对其中一个进行更改并保存（接受保存），然后在第二个中进行更改并保存（DbUpdateConcurrencyException 拒绝保存）。

我觉得奇怪的一件事是，即使我收到并发异常，SQL Profiler 也会显示正在发送到 SQL 数据库的更新请求。更新未在数据库上提交，但已发送。这正常吗？我有点希望 EF 提前检查，甚至不发送请求。

最后，如果我在此表上启用触发器：

```
ALTER TRIGGER [dbo].[trg_person_log_changes]
   ON  [dbo].[Person]
   AFTER INSERT,DELETE,UPDATE
AS 
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;
DECLARE @auditBody XML
DECLARE @actionType char(1)
DECLARE @username nvarchar(100)

if not exists(select * from deleted)
    Begin
        SET @actionType = 'I'
        SET @username = (select Case 
                                    When lastchangedby is null or lastchangedby = '' then Suser_name()
                                    Else lastchangedby
                                End  
                         from inserted)
    End
else if not exists(select * from inserted)
    Begin
        SET @actionType = 'D'
        SET @username = Suser_name()
    End
else
    Begin
        SET @actionType = 'U'
        SET @username = (select distinct Case 
                                    When lastchangedby is null or lastchangedby = '' then Suser_name()
                                    Else lastchangedby
                                End  
                         from inserted)
    End

If @actionType = 'I'
    Set @auditBody = (select 'Person' as "@tableName",  'True' as "@synch",
      (select * from inserted for xml path('DataItem'), type, binary base64)
      for xml path('Root'))
Else
    SET @auditBody = (select 'Person' as "@tableName", 'True' as "@synch",
      (select * from deleted for xml path('DataItem'), type, binary base64)
      for xml path('Root'))

insert into [dbo].[AuditLog]
           ([Action]
           ,[ActionDate]
           ,[ActionUser]
           ,[AuditData]
           )
    values (
           @actionType
           ,getdate()
           ,@username
           ,@auditBody)
END 
```

现在，当我尝试保存第二次编辑时，我不再收到 DbUpdateConcurrencyException，我收到一条错误消息，指出 ActionUser 不能为空。再一次，我认为我的触发器正在执行，因为即使存在冲突，EF 也允许更新通过。

关于我可能做错了什么的任何想法？

**笔记**

这是一个 MVC 项目。在我的 Edit POST 控制器中，我收到了一个包含所有表单属性的 DTO 对象（其中之一是 Timestamp - 我的编辑表单上的一个隐藏字段）。我正在从 datacontext 加载已编辑的人员，并将已编辑的属性从 DTO 对象映射到从 datacontext 返回的 Domain 对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T20:18:07.150

正确进行乐观并发的唯一方法是进行版本检查并 100% 确保在实际更新完成之前没有任何变化。最方便的方法是在`UPDATE`语句中合并版本检查，这就是 EF 所做的。所以它确实发送了一条更新语句，看起来像

```
UPDATE table SET columnA = value
WHERE rowversion = xxxx 
```

但是，当语句在内存中找不到具有`rowversion`它的行时，它返回的受影响行数与预期不同，并且抛出异常。**并且事务被回滚**。所以是的，您在 SQL Profiler 中看到了一条语句，但它从未被提交。

触发器作为更新语句的一部分运行，即在 EF 报告更新命令之前。显然，`@username`在这个过程中没有得到一个值，所以这会抛出一个 SQL 异常，在注意到任何并发冲突之前破坏更新方。

# weblogic - 将 ear 部署到 Weblogic 12c

> ID：15930362
> 
> 赞同：2
> 
> 时间：2013-04-10T15:38:27.747
> 
> 标签：weblogic, ear, weblogic12c

我有一个在 JBoss7 和 WebSphere 8.5 上成功部署的 ear 文件在尝试 WebLogic 12c 时，我在 AdminServer.log 中收到此错误：

```
####<Apr 10, 2013 5:29:36 PM IDT> <Error> <J2EE> <wbl12t2.autowblciddmeronserver.autop> <AdminServer> <[ACTIVE] ExecuteThread: '5' for queue: 'weblogic.kernel.Default (self-tuning)'> <weblogic> <> <> <1365604176997> <BEA-160228> <AppMerge failed to merge your application. Merge again with the -verbose option for more details. See the error message(s) below.>
####<Apr 10, 2013 5:30:09 PM IDT> <Debug> <Socket> <wbl12t2.autowblciddmeronserver.autop> <AdminServer> <ExecuteThread: '0' for queue: 'weblogic.socket.Muxer'> <<WLS Kernel>> <> <> <1365604209078> <BEA-000450> <Socket 420 internal data record unavailable (probable closure due idle timeout), event received -32> 
```

这在网络控制台中：

```
Error Unable to access the selected application.
Error Exception in AppMerge flows' progression
Error Exception in AppMerge flows' progression
Error com.demo.tasks.api.RTExecutor
Error com.demo.tasks.api.RTExecutor 
```

耳朵使用 jax-ws 和 jax-rs（使用 Jersey 依赖项）。com.demo.tasks.api.RTExecutor 类是与 @WebService 注释的接口。

有谁知道问题是什么？

是否有更多关于问题的详细信息（我错过的更多日志文件等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-31T07:06:29.043

我收到了相同的错误代码，经过一番挖掘，我发现 Weblogic 希望你 EAR 的扩展名全部小写，否则它认为它无效。

因此，您的应用程序必须称为**YourApp.ear**，而不能称为**YourApp.EAR**。

# c# - 当源字段不存在时，AutoMapper 在目标字段上写入 Null

> ID：15930369
> 
> 赞同：1
> 
> 时间：2013-04-10T15:38:46.113
> 
> 标签：c#, automapper

我有以下对象：

```
public class DomainStudent {
    public long Id { get; set; }
    public string AdvisorId { get; set; }
}

public class ApiStudent {
    public long Id { get; set; }
    public long AdvisorName { get; set; }
} 
```

当我运行以下映射时：

```
ApiStudent api = new ApiStudent();
api.Id = 123;
api.AdvisorName = "Homer Simpson";

DomainStudent existing = service.load(api.Id); // 123
// at this point existing.AdvisorId = 555

existing = Mapper.Map<ApiStudent, DomainStudent>(api);
// at this point existing.AdvisorId = null 
```

如何配置 AutoMapper，以便当`AdvisorId`源对象中缺少该属性时，它不会被覆盖为 null？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:41:39.687

您必须将 Map() 调用更改为：

```
Mapper.Map(api, existing); 
```

然后将映射配置为：

```
 Mapper.CreateMap<ApiStudent, DomainStudent>()
            .ForMember(dest => dest.AdvisorId, opt => opt.Ignore()); 
```

# ios - ios - 为什么我的 UITableView 没有填充评论

> ID：15930370
> 
> 赞同：1
> 
> 时间：2013-04-10T15:38:48.760
> 
> 标签：ios, objective-c, uitableview, ios5, ios6

我有一个 UITableView，它在我的 .h 文件中声明如下：

```
@interface EnterInviteCodeController : UIViewController
@property (weak, nonatomic) IBOutlet UITableView *itemList;
@end 
```

然后我在我的 .m 文件中这样声明它

```
#import "EnterInviteCodeController.h"

@interface EnterInviteCodeController ()
@property (nonatomic, retain) NSArray *items_array;
@end
@implementation EnterInviteCodeController
@synthesize itemList; // UITableView 
```

但是当我尝试填充列表时，没有显示任何项目。这是我填充列表的方式。我远程调用服务器以获取物品。然后当服务器返回数据时，我尝试这样做：

```
 items_array = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:nil];
                         [self.itemList reloadData];

                         dispatch_sync(dispatch_get_main_queue(), ^{
                             [self.itemList reloadData];
                         }); 
```

但是数据没有显示出来。有人知道我在这里缺少什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T15:44:00.663

您需要实施的最低要求：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
```

和

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

并说你实现了 UITableViewDataSource。

```
@interface EnterInviteCodeController : UIViewController <UITableViewDataSource> 
```

还要确保将文件所有者设置为表的代表。

# sql-server-2008-r2 - 分散 SQL 等效项

> ID：15930376
> 
> 赞同：1
> 
> 时间：2013-04-10T15:39:02.667
> 
> 标签：sql-server-2008-r2

在 Visual FoxPro 中有一个名为 Scatter 的命令。我可以转到某个记录并使用“Scatter Memvar Memo”命令，它将记录和所有字段或选择的字段复制到内存中。然后我可以将记录插入另一个表。

我的问题：

SQL 2008R2 中是否有类似的命令可以做同样的事情？或者我将如何去做？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:42:20.437

选择到光标中，然后从光标处插入。

# php - 在方法/函数中调用对象变量

> ID：15930380
> 
> 赞同：0
> 
> 时间：2013-04-10T15:39:10.523
> 
> 标签：php, object

如何调用在方法中保存对象的变量？任何建议和帮助将不胜感激。

这是进一步解释的示例，

这是我的名为 shirt.php 的类脚本

```
<?php 
    class shirt {
        //some function and code here
        public getSize() {
            return $this->size;
        }
    }
?> 
```

这是我调用名为 shirt.func.php 的 shirt.php 的脚本

```
<?php
    require_once 'shirt.php';

    $shirt = new Shirt();

    function getShirtSize() {
        return $shirt->getSize();
    }
?> 
```

问题是我不能在函数中使用变量**$shirt**但是如果我在函数之外使用它，它可以完美地工作。我有一种方法来解决它，即创建一个返回该对象启动的方法。

这是我的方式：

```
<?php
    require_once 'foo.php';

    function init() {
        return $shirt = new Shirt();
    }

    function getShirtSize() {
        return init()->getSize();
    }
?> 
```

还有其他有效的方法吗？感谢任何专业人士的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:21:46.503

方法和函数有自己的作用域。他们只知道对象和标量，你明确地提供给他们。因此，您必须将对象传递给函数。

```
require_once 'shirt.php';

$myCurrentShirt = new Shirt();

function getShirtSize($shirt) {
    return $shirt->getSize();
} 
```

会做的。有关函数使用的更多信息，请参阅[手册](http://de2.php.net/manual/en/functions.user-defined.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:43:44.530

```
require_once 'shirt.php';

$shirt = new shirt();

function getShirtSize($_shirt) {
    return $_shirt->getSize();
}

getShirtSize($shirt) // pass the $shirt to the function 
```

**编辑：**

或（不是那么）伟大的全球：

```
require_once 'shirt.php';

$shirt = new shirt();

function getShirtSize() {
    global $shirt;
    return $shirt->getSize();
}

getShirtSize(); 
```

# python - Python四舍五入错误

> ID：15930381
> 
> 赞同：3
> 
> 时间：2013-04-10T15:39:17.980
> 
> 标签：python, python-2.7

我只是使用 python 作为计算，我看到了这个

```
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> 62 * 41.2 * 2 / 250
20.435200000000002
>>> 62 * 4.12 * 2 / 25
20.4352
>>> 
```

只是为了确保我通过 gcc 触发了以下代码，但这并没有向我显示上述行为。我知道这可能是四舍五入的东西，但它应该是统一的。为什么python在数学上不应该存在尾随的00000000002时加起来。

C/C++ 代码

```
#include <stdio.h>
int main () {
  printf ("%lf %lf \n", 62 * 41.2 * 2 / 250, 62 * 4.12 * 2 / 25);
} 
```

结果是

20.435200 20.435200

如果有人对他们属于某些发动机排量计算比较的特定数字感到好奇:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T15:45:57.350

除了@Ashwini Chaudhary 的回答，

**问题 ：**

为什么python在数学上不应该存在时添加尾随的00000000002

**回答 ：**

因为机器中的值**不**准确。这不是 Python 中的错误，也不是您的代码中的错误。您将在所有支持二进制浮点运算的语言中看到完全相同的问题。但是，不同的语言可能会以不同的方式显示（四舍五入）。

尝试这个：

```
0.1 + 0.2 
```

你会得到

```
0.30000000000000004 
```

这是因为`0.1`不能准确地以二进制形式表示。在基数 2 或二进制中，`0.1`是无限重复的数字

```
0.0001100110011001100110011001100110011001100110011... 
```

因此，Python 决定将其改为四舍五入。

我建议你[在这里](http://docs.python.org/2/tutorial/floatingpoint.html)阅读更多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T15:47:53.750

不用担心，C 实际上也是如此，您只是没有打印它，因为您显示的数字太少：

```
#include <stdio.h>
int main () {
    printf ("%.16lf %.16lf \n", 62 * 41.2 * 2 / 250, 62 * 4.12 * 2 / 25);
} 
```

给

```
20.4352000000000018 20.4351999999999983 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T15:40:53.517

也可以`print`在 python 中使用。

```
In [87]: print 62 * 41.2 * 2 / 250
20.4352

In [88]: print 62 * 41.2 * 2 / 25
204.352 
```

Python shell 用来`repr`显示输出，这就是为什么你会得到那个奇怪的输出：

```
In [89]: print repr(62 * 41.2 * 2 / 250)
20.435200000000002 
```

而`print`使用`str`：

```
In [90]: print str(62 * 41.2 * 2 / 250)
20.4352 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-10T16:21:16.140

尝试使用十进制

```
>>> from decimal import Decimal
>>> dec = Decimal('41.2')
>>> 62 * dec * 2 / 250
Decimal('20.4352') 
```

请注意，您必须使用字符串作为参数。如果您使用 float 作为参数，它将失败。

```
>>> dec1 = Decimal(41.2)
>>> dec2 = Decimal('41.2')
>>> dec1 == dec2
False
>>> print dec1, dec2
41.2000000000000028421709430404007434844970703125 41.2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T16:20:18.837

您将接触到使用二进制浮点数的常见怪癖；这些是大多数计算机语言所共有的。不同的输出舍入策略可以隐藏这些问题，但它们仍然存在。理解这些的通常参考是[“What Every Computer Scientist Should Know About Floating-Point Arithmetic”](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)，但在[“Floating Point Arithmetic: Issues and Limitations”中也有一个 Python 特定指南](http://docs.python.org/2/tutorial/floatingpoint.html)

Python 有几个解决方案可用于在需要时获得更准确的结果。第一个是使用十进制数而不是二进制数的[`decimal`模块。](http://docs.python.org/2/library/decimal.html)

```
>>> from decimal import Decimal
>>> Decimal(62) * Decimal("41.2") * Decimal(2) / Decimal(250)
Decimal('20.4352')
>>> Decimal(62) * Decimal("4.12") * Decimal(2) / Decimal(25)
Decimal('20.4352') 
```

还有一个[`fractions`模块](http://docs.python.org/2/library/fractions.html)可以跟踪单独的分子和分母，因此可以表示任何可能的分数。

```
>>> from fractions import Fraction
>>> Fraction("41.2")
Fraction(206, 5)
>>> Fraction(62) * Fraction("41.2") * Fraction(2) / Fraction(250)
Fraction(12772, 625)
>>> Fraction(62) * Fraction("4.12") * Fraction(2) / Fraction(25)
Fraction(12772, 625)
>>> float(Fraction(12772, 625))
20.4352 
```

# wordpress - WordPress 类别图像不显示

> ID：15930382
> 
> 赞同：1
> 
> 时间：2013-04-10T15:39:19.513
> 
> 标签：wordpress

所以我尝试创建一些代码，根据类别在帖子上显示一个图标。我对其进行了测试，它只是显示了 alt 文本，img 元素显示在代码中并且目录正确，但没有图像？有什么我遗漏的东西，我没有对图像做的事情吗？谢谢你。

```
foreach((get_the_category()) as $category) { 
echo '<img class="catimg" src="images/cats/' . $category->cat_name . '.gif" alt="' . $category->cat_name . '" />'; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:20:01.563

如果您在 wp-content 文件夹中自己创建了 images 文件夹，请尝试此操作。

```
foreach((get_the_category()) as $category) { 
echo '<img class="catimg" src="'.content_url().'/images/cats/' . $category->cat_name . '.gif" alt="' . $category->cat_name . '" />'; } 
```

如果图像在主题文件夹中，那么您可以使用它：

```
foreach((get_the_category()) as $category) { 
echo '<img class="catimg" src="'.get_template_directory_uri().'/images/cats/' . $category->cat_name . '.gif" alt="' . $category->cat_name . '" />'; } 
```

# guice - Guice 请求范围：我是否需要为 servlet 过滤器中播种的值提供 Provider 绑定？

> ID：15930385
> 
> 赞同：5
> 
> 时间：2013-04-10T15:39:31.697
> 
> 标签：guice, servlet-filters

[在使用 RequestScope ( https://code.google.com/p/google-guice/wiki/ServletModule#Using_RequestScope](https://code.google.com/p/google-guice/wiki/ServletModule#Using_RequestScope) )的 Guice wiki 文档之后，我遇到了一些问题。

我正在尝试设置一个应用程序，其中我有一个请求范围的 ExecutorService。我的用例与文档中的示例不同——为了完整起见，我尝试包含其他相关类。

主要区别在于我在过滤器中实例化 ExecutorService 的实例，而不是从请求参数中提取文字值：

```
@Singleton
public class ExecutorServiceScopingFilter implements Filter {

    public ExecutorService getExecutor() {
        return Executors.newFixedThreadPool(10, ThreadManager.currentRequestThreadFactory());

    @Override
    public void doFilter(ServletRequest req, ServletResponse resp, FilterChain chain) throws IOException, ServletException {
        ExecutorService executor = getExecutor();

        HttpServletRequest httpRequest = (HttpServletRequest) req;
        httpRequest.setAttribute(Key.get(ExecutorService.class).toString(), executor);

        chain.doFilter(req, resp);
    }

    ...
} 
```

在我的 servlet 模块中，我绑定了过滤器：

```
public class MyServletModule extends ServletModule {
    @Override
    protected void configureServlets() {
        filter("/*").through(ExecutorServiceScopingFilter.class);
        ...
    }
} 
```

我在我的 servlet 上下文侦听器中正常安装模块（我已设置 web.xml 以使用 guice 过滤器和以下侦听器）：

```
public class MyServletContextListener extends GuiceServletContextListener {
    @Override
    protected Injector getInjector() {
        Injector injector = Guice.createInjector(
            Stage.PRODUCTION,
            new MyServletModule(),
            new MyExampleModule(),
            ...
        );
    }
} 
```

我在一个无范围的 POJO 中声明了提供者：

```
class MyExampleImpl implements IMyExample
{
    @Inject
    protected Provider<ExecutorService> executorProvider;

    ...
} 
```

我绑定在一个模块中（并且是上面我的侦听器中 createInjector 调用的参数）：

```
public class MyExampleModule extends AbstractModule {

   @Override
   protected void configure() {
        bind(IMyExample.class).to(MyExampleImpl.class);
   }
} 
```

当我启动我的网络应用程序时，我得到以下异常：

> com.google.inject.CreationException：Guice 创建错误：
> 
> 1) 没有绑定 java.util.concurrent.ExecutorService 的实现。同时在 com.example.ExampleModule.configure(ExampleModule.java:23) 为 com.example.MyExampleImpl.executorProvider(MyExampleImpl.java:12) 的字段定位 com.google.inject.Provider
> 
> 1 个错误

我发现了一个相关问题，表明使用了虚假绑定（[Guice：Cannot injection annotated type in Request scope](https://stackoverflow.com/questions/8977492/guice-cannot-inject-annotated-type-in-request-scope?rq=1)）。给出的例子是：

```
bind(String.class)
.annotatedWith(Names.named("name"))
.toProvider(Providers.<String>of(null)); 
```

我尝试使用此方法绑定 ExecutorService 并为提供者获取 null（因此注入器返回声明的绑定，而不是使用过滤器定义的绑定）。官方文档中从未提及使用虚假绑定。

所以有几个问题可以尝试解决这个问题，并更多地了解 Guice 的运作方式：

1.  除了设置属性之外，我是否需要显式绑定（与 Guice 文档相反）？

2.  如果是这样，我是否需要使用 @RequestScope 注释绑定任何东西？

3.  我是否需要创建一个实现提供者的提供者？

4.  检查@Inject Injector 对象，我在绑定映射中看不到 ExecutorService 的请求范围绑定。我应该看到这个绑定吗？

5.  在运行时检查 ServletScope 类中的 requestScopeContext 线程局部变量，我确实看到了 ExecutorService 绑定。这表明绑定正在工作，所以我没有做某事（或做错某事）来访问它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-28T07:41:19.470

您不需要请求中的任何值来创建执行程序服务，因此您不需要过滤器。只需在您的一个模块中创建一个提供程序方法

```
@Provides @RequestScoped
ExecutorService provideExecutor() {
    return Executors.newFixedThreadPool(
        10, ThreadManager.currentRequestThreadFactory());
} 
```

# paypal - 发货方式未在贝宝沙箱中列出

> ID：15930388
> 
> 赞同：2
> 
> 时间：2013-04-10T15:39:34.743
> 
> 标签：paypal, paypal-sandbox

我为我的沙盒测试帐户设置了一些运费/方法，但它们没有显示在付款页面上。沙盒是否支持自定义运输成本/方法，还是我做错了什么？

我为德国设置了国际运输方式。

最好的克雷布尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:12:33.757

如果您在测试沙盒卖家账户上设置了运输选项，那么在买家输入信用卡信息并继续到下一页或使用 PayPal 账户登录后，它们应该会显示在付款页面上。如果您仍然没有看到这些出现，您能否提供一个结帐链接，我可以查看一下，看看可能是什么问题。

# c# - Windows 服务上的本地 Http 服务器

> ID：15930394
> 
> 赞同：2
> 
> 时间：2013-04-10T15:39:57.203
> 
> 标签：c#, .net, windows-services

我使用此代码编写用作本地 http 请求服务器的 Windows 服务。

```
public void StartMe()
    {
        System.Net.IPAddress localAddr = System.Net.IPAddress.Parse("127.0.0.1");
        System.Net.Sockets.TcpListener server = new System.Net.Sockets.TcpListener(localAddr, 1234);
        server.Start();
        Byte[] bytes = new Byte[1024];
        String data = null;
        while (RunThread)
        {
            System.Net.Sockets.TcpClient client = server.AcceptTcpClient();
            data = null;
            System.Net.Sockets.NetworkStream stream = client.GetStream();
            stream.Read(bytes, 0, bytes.Length);
            data = System.Text.Encoding.ASCII.GetString(bytes);

            System.IO.StreamWriter sw = new System.IO.StreamWriter("c:\\MyLog.txt", true);
            sw.WriteLine(data);
            sw.Close();

            client.Close();
        }
    } 
```

我对这段代码有一些问题：首先在`data`字符串中，我在浏览器中写了这个 URL 后得到了这样的东西`http://127.0.0.1:1234/helloWorld`

```
GET /helloWorld HTTP/1.1
Host: 127.0.0.1:1234
Connection: keep-alive
Cache-Control: max-age=0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
User-Agent: Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.64 Safari/537.31
Accept-Encoding: gzip,deflate,sdch
Accept-Language: he-IL,he;q=0.8,en-US;q=0.6,en;q=0.4
Accept-Charset: windows-1255,utf-8;q=0.7,*;q=0.3 
```

我想知道我怎样才能`helloWorld`从这个例子中得到唯一的。第二个问题是我希望服务器会对浏览器做出响应，它只让我关闭连接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T17:49:06.240

前几天问了一个类似的问题。更好地实现 HTTPListener-Class。让生活更轻松。

请参阅此示例：http: [//msdn.microsoft.com/de-de/library/system.net.httplistener%28v=vs.85%29.aspx](http://msdn.microsoft.com/de-de/library/system.net.httplistener%28v=vs.85%29.aspx)

你的 HelloWorld 是这样检索的：

```
HttpListenerContext context = listener.GetContext(); // Waits for incomming request
HttpListenerRequest request = context.Request;
string url = request.RawUrl; // This would contain "/helloworld" 
```

如果你想等待多个请求，要么实现异步方式，要么像这样：

```
new Thread(() =>
{
    while(listener.IsListening)
    {
        handleRequest(listener.GetContext());
    }

});
...

void handleRequest(HttpListenerContext context) { // Do stuff here } 
```

那个代码示例是从我的脑海中浮现出来的。它可能需要一些笨拙的方法才能很好地工作，但我希望你明白这一点。

# python - Sqlalchemy 继承 - 在 psql 中返回零结果 rawsql 工作得很好

> ID：15930398
> 
> 赞同：0
> 
> 时间：2013-04-10T15:40:00.870
> 
> 标签：python, sqlalchemy

在我的应用程序中，我有一个contact_types 表，它被细分为供应商/客户联系类型。联系人类型有点像他们的头衔，但并非总是如此。无论如何，以下每个类都在三个不同的文件中。父级和两个子级的 globals.py 文件位于 customer.py 和 vendor.py 文件中。我还使用我在[这里](https://stackoverflow.com/questions/5631078/sqlalchemy-print-the-actual-query)找到的函数来打印带有值的实际 db 查询，以便我可以手动运行 sql。

```
class ContactType(DeclarativeBase,TimeUserMixin):
    __tablename__ = 'contact_types'
    id = Column(Integer,primary_key=True,autoincrement=True)
    _code = Column('code',Unicode(50),nullable=False)
    sort_order = Column(Integer,nullable=False,default=9999)
    type = Column(Unicode(1),nullable=False)
    __mapper_args__ = {'polymorphic_on':type}

    @hybrid_property  
    def code(self):
        return self._code

    @code.setter
    def code(self,code):
        self._code = code.upper()

    def __init__(self,code,sort_order=None):
        self.code=code
        if sort_order is not None:
            self.sort_order = sort_order

    @property
    def as_dict(self):
        return {
            'id':self.id,
            'code':self.code
        }

    @classmethod
    def all_as_dict(cls, ):
        return [c.as_dict for c in DBSession.query(cls).order_by(cls.code)]

    @classmethod
    def by_id(cls,id):
        return DBSession.query(cls).get(id)

    @classmethod
    def by_code(cls,code ):
        return DBSession.query(cls).filter(cls.code == code.upper()).first()

class VendorContactType(m_globals.ContactType):
    __mapper_args__ = {'polymorphic_identity':'v'}

class CustomerContactType(g.ContactType):
    __mapper_args__ = {'polymorphic_identity':'c'}

Table detail ...
 create_time    | timestamp without time zone | not null
 modify_time    | timestamp without time zone | not null
 id             | integer                     | not null default nextval('contact_types_id_seq'::regclass)
 code           | character varying(50)       | not null
 sort_order     | integer                     | not null
 type           | character varying(1)        | not null
 create_user_id | integer                     | not null
 modify_user_id | integer                     | not null
Indexes:
"contact_types_pkey" PRIMARY KEY, btree (id)
"ix_contact_types_create_user_id" btree (create_user_id)
"ix_contact_types_modify_user_id" btree (modify_user_id)
Foreign-key constraints:
"contact_types_create_user_id_fkey" FOREIGN KEY (create_user_id) REFERENCES tg_user(user_id)
"contact_types_modify_user_id_fkey" FOREIGN KEY (modify_user_id) REFERENCES tg_user(user_id)
Referenced by:
TABLE "contacts" CONSTRAINT "contacts_contact_type_id_fkey" FOREIGN KEY (contact_type_id) REFERENCES contact_types(id)

select id,code,type from contact_types where code='NEW';
  id  | code | type
------+------+------
 7242 | NEW  | c
 7251 | NEW  | v 
```

现在的问题是无论我做什么应用程序说它找不到记录，当我将 sqlalchemy 使用的 sql 复制并粘贴到 postgres 中时，我得到了一个结果。太让人抓狂了！！！！我猜继承发生了一些奇怪的事情，但我找不到它。

这是我得到的控制台输出......

```
08:34:17,419 DEBUG [erp.model.m_ap] 0  <----- This is just a simple queryresult.count()
08:34:17,421 DEBUG [erp.model.m_ap] SELECT contact_types.code, contact_types.create_time,   contact_types.modify_time, contact_types.id, contact_types.sort_order, contact_types.type,   contact_types.create_user_id, contact_types.modify_user_id
FROM contact_types
WHERE contact_types.code = 'NEW' AND contact_types.type IN ('v') <--- output of printquery 
```

所以没有找到结果。现在我将上面输出的查询直接粘贴到 psql ...

```
erp_beta=# SELECT contact_types.code, contact_types.create_time,   contact_types.modify_time,  contact_types.id, contact_types.sort_order, contact_types.type,   contact_types.create_user_id, contact_types.modify_user_id
erp_beta-#     FROM contact_types
erp_beta-#     WHERE contact_types.code = 'NEW' AND contact_types.type IN ('v')
erp_beta-# ;
 code |        create_time         |        modify_time        |  id  | sort_order | type | create_user_id | modify_user_id
------+----------------------------+---------------------------+------+------------+------+----------------+----------------
 NEW  | 2013-04-10 08:16:02.778212 | 2013-04-10 08:16:02.77822 | 7251 |          9 | v    |             46 |             46
(1 row) 
```

是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:52:30.967

问题与会话有关。一些代码正在擦除表格，为行导入一堆，然后试图找到它之前删除的行。会话回滚，物理数据库表看起来一样，没有变化。

# java - 视频中的帧速率不正确（Xuggler + MPEG 4 + H.264）

> ID：15930399
> 
> 赞同：2
> 
> 时间：2013-04-10T15:40:01.823
> 
> 标签：java, video, ffmpeg, h.264, xuggler

转换后，输出文件中的帧速率值不正确有问题。我做了一个非常简单的例子来描述一个问题：

```
public static void main(String[] args) {
    // reader
    IMediaReader reader = ToolFactory.makeReader("/tmp/1/i3.avi");
    IMediaWriter writer = ToolFactory.makeWriter("/tmp/1/o3.mp4", reader);
    reader.addListener(writer);

    while (true) {
        try {
            final IError error = reader.readPacket();
            if(error != null) {
                System.err.println("Error decoding packet " + error.getDescription());

                if (!reader.isOpen()) {
                    break;
                }
            }
        } catch (final Exception ex) {
            System.err.println("Error decoding packet " + ex.getMessage());
            if (!reader.isOpen()) {
                break;
            }
        }
    }
} 
```

未配置视频或音频流/编解码器的任何其他参数。

输入视频文件（“/tmp/1/i3.avi”）具有以下特点：

*   一般的
    *   容器：音频视频交错 (AVI)
*   视频
    *   尺寸：624x352
    *   编解码器：XVID MPEG-4
    *   帧率：**每秒 24 帧**
    *   比特率：不适用
*   声音的：
    *   编解码器：MPEG-1 第 3 层 (MP3)
    *   声道：立体声
    *   采样率：48000 赫兹
    *   比特率：112 kbps

输出视频文件（“/tmp/1/o3.avi”）具有以下特点：

*   一般的
    *   容器：Quicktime
*   视频
    *   尺寸：624x352
    *   编解码器：H.264
    *   帧率：**每秒 8 帧**
    *   比特率：378 kbps
*   声音的：
    *   编解码器：MPEG-4 AAC
    *   声道：立体声
    *   采样率：48000 赫兹
    *   比特率：127 kbps

因此，输出文件中的帧速率是 8 而不是 24。我该如何解决？请帮我..

PS：我已经尝试过[Xuggler H264 FPS 编码问题](https://stackoverflow.com/questions/8217088/xuggler-h264-fps-encoding-issue)和其他几个解决方案，它没有帮助..

* * *

**UPD：**经过与 Xugler 的长期战争后，我为 avconv 编写了自己的纯 Java 接口，它对我来说很好用：[https ://github.com/vbauer/avconv4java](https://github.com/vbauer/avconv4java)

# android - 手动将值插入 SQLite 数据库

> ID：15930406
> 
> 赞同：9
> 
> 时间：2013-04-10T15:40:16.897
> 
> 标签：android, sqlite

我是 Android 开发新手，刚刚开始学习用户界面开发的基础知识。在我的应用程序中，我有一个微调器，我想用数据库中的值填充微调器。因此，为了从数据库中获取值，其中必须有一些值。如何在不编写程序的情况下将值插入数据库？我可以像我们在 MySQL 和 Oracle 数据库中插入值一样以任何其他方式插入它吗？希望我的问题得到很好的理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:56:29.093

如果要手动插入数据（完全图形化），请执行以下操作：

1.  转到 DDMS 透视图
2.  文件资源管理器（选项卡菜单）
3.  找到您的数据库（/data/data/com.example.your_package/databases/your_db.db）
4.  单击放置在其他选项卡旁边的图标（**从设备中提取文件**）
5.  将您的数据库保存在您的计算机上
6.  打开 SQLite 数据库浏览器 [从这里下载][1] [1]：http: [//sourceforge.net/projects/sqlitebrowser/](http://sourceforge.net/projects/sqlitebrowser/)
7.  做你的工作，并保存
8.  回到您的 DDMS 并找到您的数据库
9.  单击放置在其他选项卡旁边的图标（**将文件推送到设备上**）
10.  找到您编辑的数据库并单击打开

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:41:24.833

> 我可以像我们在 MySQL 和 Oracle 数据库中插入值一样以任何其他方式插入它吗？希望我的问题得到很好的理解。

是的，您可以通过以下步骤手动将数据插入 SQLite 数据库。

要遵循的步骤：

```
1) Go to your sdk-tool directory . (Example - E:\android-sdk-windows\tools>)
2) Type adb shell and press enter
3) cd data
4) cd data
5) cd your package name
6) cd databases 
```

到达此处后，请执行以下步骤来创建数据库并创建表，然后将数据插入其中。

```
sqlite3 your_database_name.db;
SQLite version 3.7.7 2011-06-25 16:35:41 
```

输入“.help”获取说明 输入以“;”结尾的 SQL 语句

```
sqlite> CREATE TABLE province_table (pid INTEGER PRIMARY KEY AUTOINCREMENT, pname TEXT);
sqlite> INSERT INTO province_table (pname) values ('Quebec');
sqlite> ...
sqlite> .q 
```

.q 表示 SQLlite 的安静，现在你有了 database `your_database_name.db`。

但是在您的情况下，如果您想为所有移动设备创建数据库，例如一旦您的应用程序运行启动数据库操作，那么您必须以编程方式进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:48:51.763

您可以使用 adb shell 中的[sqllite3](http://developer.android.com/tools/help/adb.html#sqlite)工具手动执行查询。我不会依赖它出现在生产设备上（[没有生根并经历一些痛苦的步骤](https://stackoverflow.com/questions/5485890/how-to-install-or-get-access-to-sqlite3-from-adb-shell)）。您可以在模拟器上使用该工具。

```
adb -s emulator-5554 shell
# sqlite3 /data/data/com.example.google.rss.rssexample/databases/rssitems.db
SQLite version 3.3.12 
```

# linux - 如何在 bash 脚本中递归地执行 foreach *.mp3 文件？

> ID：15930407
> 
> 赞同：12
> 
> 时间：2013-04-10T15:40:19.093
> 
> 标签：linux, bash, for-loop, mp3

以下在当前文件夹中工作正常，但我希望它也能扫描子文件夹。

```
for file in *.mp3

do

echo $file

done 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T16:11:10.027

这些答案中有太多使用外壳扩展来存储查找结果。这不是你应该轻易做的事情。

假设我有 30,000 首歌曲，这些歌曲的标题平均约为 30 个字符。让我们暂时不要讨论*空白*问题。

我的 find 将返回超过 1,000,000 个字符，而且我的命令行缓冲区很可能没有那么大。如果我做了这样的事情：

```
for file in $(find -name "*.mp3")
do
    echo "some sort of processing"
done 
```

问题（除了文件名中的空格）是您的命令行缓冲区将简单地从`find`. 它甚至可能完全无声无息地失败。

这就是`xargs`创建命令的原因。它确保命令行缓冲区永远不会溢出。它将`xargs`根据需要多次执行以下命令以保护命令行缓冲区：

```
$ find . -name "*.mp3" | xargs ... 
```

当然，使用`xargs`这种方式仍然会阻塞空白，但是现代实现`xargs`并`find`有一种处理这个问题的方法：

```
$ find . -name "*.mp3 -print0 | xargs --null ... 
```

如果您可以保证文件名中没有制表符或`\n`（或双空格），则将 find 传递到 while 循环中会更好：

```
find . -name "*.mp3" | while read file
do 
```

管道将`while read`在命令行缓冲区满之前将文件发送到。更好的是，`read file`读取整行并将在该行中找到的所有项目放入`$file`. 它并不完美，因为`read`仍然会在空白处中断，因此文件名如下：

```
I will be in \n your heart in two lines.mp3
I   love song names with     multiple spaces.mp3
I \t have \t a \t thing \t for \t tabs.mp3. 
```

还是会失败。该`$file`变量将它们视为：

```
I will be in 
your heart in two lines.mp3
I love song names with multiple spaces.mp3
I have a thing for tabs.mp3. 
```

为了解决*这个*问题，您必须`find ... -print0`使用空值作为输入分隔符。然后要么更改`IFS`为使用空值，要么使用`-d\0`BASH shell 中的 while read 语句中的参数。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-10T15:42:37.820

有很多方法可以给这只猫剥皮。我会自己调用 find 命令：

```
for file in $(find . -name '*.mp3') do
  echo $file
  TITLE=$(id3info "$file" | grep '^=== TIT2' | sed -e 's/.*: //g')
  ARTIST=$(id3info "$file" | grep '^=== TPE1' | sed -e 's/.*: //g')
  echo "$ARTIST - $TITLE"
done 
```

如果文件名中有空格，那么最好使用`-print0`查找选项；一种可能的方法是：

```
find . -name '*.mp3' -print0 | while read -d $'\0' file
do
  echo $file
  TITLE=$(id3info "$file" | grep '^=== TIT2' | sed -e 's/.*: //g')
  ARTIST=$(id3info "$file" | grep '^=== TPE1' | sed -e 's/.*: //g')
  echo "$ARTIST - $TITLE"
done 
```

或者，您可以保存和恢复`IFS`. 感谢 David W. 的评论，特别是指出`while`循环版本还具有正确处理大量文件的好处，而将 a 扩展`$(find)`为 for 循环的第一个版本将无法在某些时候工作，因为外壳扩展有限制。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-10T15:42:43.110

这适用于大多数文件名（包括空格），但不适用于换行符、制表符或双空格。

```
find . -type f -name '*.mp3' | while read i; do
   echo "$i"
done 
```

这适用于所有文件名。

```
find . -type f -name '*.mp3' -print0 | while IFS= read -r -d '' i; do
   echo "$i"
done 
```

但是，如果您只想运行一个命令，则可以使用`xargs`示例：

```
find . -type f -name '*.mp3' -print0 | xargs -0 -l echo 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-10T22:33:16.807

```
find . -name *.mp3 -exec echo {} \; 
```

该字符串`{}`被当前文件名替换，它出现在命令的参数中，而不仅仅是在单独的参数中，如在某些版本的 find 中。

请查看 find man 了解更多信息[http://unixhelp.ed.ac.uk/CGI/man-cgi?find](http://unixhelp.ed.ac.uk/CGI/man-cgi?find)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-10T15:41:57.223

听起来您正在寻找 find 命令。我还没有测试过这个，但是这些方面的东西：

```
files=(`find . -name *.mp3`)
for file in "${files[@]}"; do
    echo $file TITLE="id3info "$file" | grep '^=== TIT2' | sed -e 's/.*: //g'" ARTIST="id3info "$file" | grep '^=== TPE1' | sed -e 's/.*: //g'"
done 
```

编辑：使用数组使命令对于名称中带有空格的文件是安全的。

# android - surfaceChanged() 中的运行时异常 startPreview 失败 1

> ID：15930408
> 
> 赞同：1
> 
> 时间：2013-04-10T15:40:21.673
> 
> 标签：android

我有好几天试图让我的项目工作，但它没有，这个网站上有类似的问题和答案，但不能帮助我解决我的问题，这就是为什么我用下面的完整代码问这个问题。

我正在使用 Android 相机 API 创建一个相机项目，我想要的只是同时在表面上启动预览，但我一直收到运行时错误。

```
 04-10 22:52:28.690: D/com.Server.camerapreview.PreviewActivity(1194): SurfaceChanged: startPreview failed 
```

我的活动 xml 是

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".PreviewActivity" >

    <SurfaceView
        android:id="@+id/surfaceView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true" />

</RelativeLayout> 
```

我的安卓清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.Server.camerapreview"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.CAMERA"/>
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.Server.camerapreview.PreviewActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我的主要活动是：

```
 package com.Server.camerapreview;

//import android.graphics.PixelFormat;

import android.hardware.Camera;
import android.os.Bundle;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.app.Activity;

public class PreviewActivity extends Activity implements SurfaceHolder.Callback{

    SurfaceView surfaceView;
    SurfaceHolder surfaceHolder;
    Camera camera = null;
    boolean inPreview = false;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.preview);
        surfaceView = (SurfaceView) findViewById(R.id.surfaceView);
        surfaceHolder = surfaceView.getHolder();
        surfaceHolder.addCallback(this);

    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        camera = Camera.open();
        if(camera != null){
            try{
                camera.setPreviewDisplay(surfaceHolder);
            }catch(Exception x){
                Log.d(PreviewActivity.class.getName(), "Error in surface created: ["+x.getMessage()+"]");
            }
        }else Log.d(PreviewActivity.class.getName(), "Camera null");
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
        if (surfaceHolder.getSurface() == null){
             Log.d(PreviewActivity.class.getName(), "SurfaceHolder is null");
              return;
            }

        if(camera != null && !inPreview){    
            Camera.Parameters parameters = camera.getParameters();
            Camera.Size size = getBestPreviewSize(width, height, parameters);

            if (size != null) {

                parameters.setPreviewSize(size.width, size.height);
                //parameters.setPictureFormat();
               // Log.d(PreviewActivity.class.getName(), "size: "+surfaceHolder;
                parameters.set("orientation", "portrait");
                camera.setParameters(parameters);
                try {
                    camera.setPreviewDisplay(surfaceHolder);
                    surfaceView.setVisibility(0);
                    camera.startPreview();

                    inPreview = true;
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    Log.d(PreviewActivity.class.getName(), "SurfaceChanged: "+e.getMessage());
                }
            }

        }else Log.d(PreviewActivity.class.getName(), "Camera null");

    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub
        if(inPreview){
            camera.stopPreview();
            camera.release();
            camera = null;
            inPreview = false;
        }
    }

    // Getting the best preview size
    private Camera.Size getBestPreviewSize(int width, int height, Camera.Parameters parameters) {
        Camera.Size result = null;

        for (Camera.Size size : parameters.getSupportedPreviewSizes()) {
            if (size.width <= width && size.height <= height) {
                if (result == null) {
                  result=size;
                }
                else {
                    int resultArea = result.width * result.height;
                    int newArea = size.width * size.height;

                    if (newArea > resultArea) {
                        result = size;
                    }
                }
            }
        }

        return(result);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:51:21.297

这实际上不是一个解决方案，但我通过添加解决了这个问题

```
surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS); 
```

并且我的应用程序可以工作，但是上面有一个叉号表示它已被弃用，因为我使用 API 级别 17 进行构建，有没有人知道另一种未被弃用且可以在此 API 级别中使用的替代方法？

# ssis - 以编程方式计算表达式

> ID：15930409
> 
> 赞同：5
> 
> 时间：2013-04-10T15:40:22.297
> 
> 标签：ssis

## 基本问题

我是否缺少一种方法来评估 SSIS 中的表达式？

## 背景故事

我正在以编程方式修复大量软件包，以使它们符合我们的标准。以最简单的形式，假设我正在创建一个新[变量](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.variable.aspx)并为其分配一个[表达式](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.variable.expression.aspx)。这工作正常。

![带表达式的变量](https://i.stack.imgur.com/CTshw.png)

如果我单击省略号，然后单击结果对话框窗口中的 Evaluate Expression，我会看到我的公式计算在语法上是正确的，并且在逻辑上它正在生成我期望的值。*评估如何进行？*

![评估表达式](https://i.stack.imgur.com/bDyf7.png)

当我在上一步中单击“确定”时，请注意我的变量的更改`.Value`。它现在填充了表达式的评估版本。我需要在我的代码中模拟相同的步骤，但我不知道它在 BIDS/SSDT 中是如何做到的。从概念上讲，这只是`variable.Value = MAGIC;`我在巫师 101 中失败了。

## 为什么这是个问题

我正在执行的实际工作比这要复杂得多。我正在添加和配置几个任务以及处理数据流。其中一个步骤是添加一个执行 SQL 任务，该任务使用一个分配有表达式的变量（要平底船的表）将现有数据从表中删除。包的运行时似乎没有评估实际的表达式......导致我发现我的问题。

## 复制代码

```
/// <summary>
/// Create a simple package with a variable that has an expression to figure
/// out how to evaulate the resulting value.
/// </summary>
static void ExpressionPOC()
{
    Microsoft.SqlServer.Dts.Runtime.Package p = new Microsoft.SqlServer.Dts.Runtime.Package();
    Microsoft.SqlServer.Dts.Runtime.Application app = new Microsoft.SqlServer.Dts.Runtime.Application();
    p.Name = "ProofOfConcept";
    Microsoft.SqlServer.Dts.Runtime.Variable v = null;
    // This creates a simple variable of type string with an initial value of blank string
    v = p.Variables.Add("ContrivedExample", false, "User", string.Empty);
    v.Expression = @"""My package is named "" + @[System::PackageName]";
    // Looking for something here to 
    //v.Value = v.Expression.EvaluatePrettyPlease();
    app.SaveToXml(@"C:\Users\bfellows\Documents\Visual Studio 2012\Projects\Demo\Demo\testVariable.dtsx", p, null);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T15:40:22.297

## 解析度

由于我已经写了这个问题，我将发布它以希望为其他人省去麻烦。在 SQL Server 2012 之前，或者如果您*不*使用[BIDSHelper](http://bidshelper.codeplex.com)创建表达式，则有**两个**步骤可以将变量与表达式一起使用。

1.  分配实际表达式。
2.  我忽略的是设置`EvaluateAsExpression = true`。这些工具现在自动设置该标志。

修改后的代码很简单

```
//v.Value = v.Expression.EvaluatePrettyPlease();
// The missing EvaluatePrettyPlease method is the property EvaluateAsExpression
// By setting this property, the expressions actually evaluate
// go figure
v.EvaluateAsExpression = true; 
```

# git - Git 设置 ssh 密钥

> ID：15930421
> 
> 赞同：1
> 
> 时间：2013-04-10T15:41:24.303
> 
> 标签：git, heroku, ssh, key, git-clone

我在使用 Windows Xp 的机器上安装了 git，我试图从托管在 heroku 上的远程存储库中克隆。问题是，当我第一次登录 heroku 时，没有出现生成 ssh 密钥选项。使用`ssh-keygen -t rsa -C "your_email@example.com"`我创建了一个 ssh 密钥（或者 git bash 说），但是如果我转到该文件夹​​，它只包含该`known_hosts`文件。系统和隐藏文件可见。由于没有显示生成 ssh 选项，我想已经存在一个 ssh，但是它不适合 - 因为我在尝试克隆存储库时收到权限被拒绝错误。
知道我应该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T17:45:36.803

使用以下命令查看 Heroku 上的密钥名称：

```
heroku keys 
```

去掉它：

```
heroku keys:remove your_key 
```

生成新的 SSH 密钥

```
ssh-keygen -t rsa -C "your_email@example.com" 
```

将其添加到 Heroku：

```
heroku keys:add 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T22:09:41.637

输入以下代码行

**heroku 键：添加**

[https://devcenter.heroku.com/articles/keys#adding-keys-to-heroku](https://devcenter.heroku.com/articles/keys#adding-keys-to-heroku)

# c# - 不确定在哪里捕获异常、验证和消息“文件仍在处理中”

> ID：15930426
> 
> 赞同：2
> 
> 时间：2013-04-10T15:41:44.303
> 
> 标签：c#, .net, exception-handling, windows-services

使用 C# 构建了一个 Windows 服务来处理进入服务器的 .tif 文件。该服务工作正常，但会引发异常，然后继续根据需要处理文件。问题是我收到此错误：

> System.IO.IOException：该进程无法访问该文件，因为它正被另一个进程使用。在 System.IO._Error.WinIOError *(Int32 errorCode, String maybeFullPath) 在 System.IO。*System.IO.File.Move 处的 _Error.WinIOError()（字符串源文件名，字符串 destFileName）

我相信我需要捕获异常、验证错误并显示消息“文件仍在处理中”但是，我不确定在哪里？我的 timer1 设置为 10 秒，这应该有足够的时间来处理文件。

我的代码：

```
protected void timer1Elapsed(object sender, EventArgs e)
    {
        try
        {
            if (mainProg == null)
            {
                mainProg = new ProcessFilesFromSource(System.Configuration.ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
            }
            mainProg.ScanArchiverMain();          
        }
        catch (Exception ex)
        {
            EventLog.WriteEntry("ScanArchiver Error", ex.ToString());
            EventLog.WriteEntry("ScanArchiver Online");
        }            
      }
    protected override void OnStop()
    {
        EventLog.WriteEntry("ScanArchiver Offline");
        timer1.Enabled = false;
        timer1.Dispose();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:01:22.417

处理过程中停止计时器，完成后重新启动。

还可以看看[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)作为 Timer 的替代品。

```
protected void timer1Elapsed(object sender, EventArgs e)
    {
        timer1.Stop();
        try
        {

            if (mainProg == null)
            {
                mainProg = new ProcessFilesFromSource(System.Configuration.ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
            }
            mainProg.ScanArchiverMain();          
        }
        catch (Exception ex)
        {
            EventLog.WriteEntry("ScanArchiver Error", ex.ToString());
            EventLog.WriteEntry("ScanArchiver Online");
        }            
        timer1.Start();
      } 
```

# php - php 只允许数字数据和逗号，删除重复的逗号

> ID：15930430
> 
> 赞同：2
> 
> 时间：2013-04-10T15:41:51.477
> 
> 标签：php, preg-replace, replace

我有一个正在为自动化任务编写的脚本，所以我并不担心干净的代码，因为它只会被使用一次。

该脚本读取一个平面文件并将信息存储到一个数组中，该数组稍后将用于从数据库中读取某些内容。

但是，我只想要数字数据，所以我使用了 preg_replace() 和逗号。我的代码如下。

这些是使用循环从平面文件中的值中读取的。

```
$store = array();
$store[] = 111;
$store[] = 2;
$store[] = 4;
$store[] = 55;
$store[] = 66;
$store[] = 'Kilory';
$store[] = 9090;

$theList[$i] = preg_replace( '/[^0-9,]/u', '', implode( ',', $store ) );
unset( $store ); 
```

这给我的结果是 0,2,4,55,66,,9090。如果我要尝试在 mysql IN() 语句中使用该信息，由于两个逗号相邻，它会向我吐出一个错误。删除彼此相邻的重复项的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:44:27.523

重复的逗号，包括标题和尾随逗号，您可以使用 . 删除`$string = trim(preg_replace('#,{2,}#', ',', $string), ',');`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:13:24.507

PHP 为此提供了一个过滤器功能：

```
$store = array();
$store[] = 111;
$store[] = 2;
$store[] = 4;
$store[] = 55;
$store[] = 66;
$store[] = 'Kilory';
$store[] = 9090;

$theList[$i] = implode(',', array_filter($store, 'is_numeric'));
unset($store); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:48:07.340

循环遍历`store[]`值时，使用该`is_numeric()`函数检查值是否为数字。如果是，请添加逗号，如果不是，请不要。

[手动的](http://php.net/manual/en/function.is-numeric.php)

# java - 在 y 轴 java 上反映方法中的坐标

> ID：15930432
> 
> 赞同：0
> 
> 时间：2013-04-10T15:41:53.037
> 
> 标签：java, coordinates

我对 Java 很陌生，我正在使用 acm 图形包来学习。我有几种`.drawLine(double x, double y)`方法，我用它们来画蘑菇。蘑菇的左侧和右侧相同，但倒置了。我想知道我如何（如果它是正确的）在 y 轴上反映我的坐标。在数学上，我们可以通过将所有 x 值乘以 -1 来做到这一点。这样我就不必为右侧重新编写整个代码。我一直在研究，但我没有找到任何有效的方法。我已经尝试过 java 反射，但一无所获。我也以错误的方式接近这个吗？我愿意接受所有有助于我理解这个概念的建议。

这是我的代码示例：

```
GPen black = new GPen(); //Make new pen
add(black, 270, 30); //Add it at these coords
black.drawLine(0, 30); //Draw a box
black.drawLine(-40, 0);
black.drawLine(0, -30);
black.drawLine(40, 0); 
```

我可以遍历这些，将 x 值乘以 -1，然后让它再次运行该方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:13:22.323

“从数学上讲，我们可以通过将所有 x 值乘以 -1 来做到这一点”——这就是你的问题。这会给您在 y 轴上的反射，但不是关于特定垂直线的反射。要反映特定的垂直线，请说 x=270 行，如您的示例中所示：

反映 p<270 的点 (p, q)

与反射线的距离 = 270-p

所以新坐标是：(270 + d, q)

等于： (540 - p, q)

所以一般来说，反映线 x = A 中的点 (p,q) 的公式是 (2A - p, q)

编辑：您可以尝试的另一种方法是：

```
 GPen black = new GPen(); //Make new pen

 int[] x_coords = new int[4] {0,-40,0,40};
 int[] y_coords = new int[4] {30,0,-30,0};

 add(black, 270, 30); //Add it at these coords

 for (int i=0; i<x_coords.length; i++){
    black.drawLine( -1*x_coords[i] , y_coords[i]);
 } 
```

# c# - 无法将类型“char”隐式转换为类型 Test ， 为什么？

> ID：15930437
> 
> 赞同：0
> 
> 时间：2013-04-10T15:42:06.243
> 
> 标签：c#, char, type-conversion, console-application

我正在为以后学习 C# 进行独立学习的学生制作一个示例程序。我以为我明白`<T>`了，但显然我缺少一些能让我充分利用它的神奇秘密。

当我尝试创建一个变量时，它工作正常：

```
 static Test<char> c = new Test<char>('n'); 
```

如您所见，它已被实例化。

现在，当我通过 then 将其分配给不同的值时，`Console.Read()`它给了我错误：无法将类型隐式转换`'char'`为`'ConsoleApplication1.Test<char>'`

我都试过了：

```
c = (char)Console.Read(); 
```

和：

```
c = Convert.ToChar(Console.Read()); 
```

甚至：（我知道这样做很愚蠢，但我很生气，想看看它是否可行）

```
c = (char)Convert.ToChar(Console.Read()); 
```

所以，我对如何继续感到非常困惑。请帮忙。

编辑：课堂上的当前构造函数`Test`：

> ```
>  public Test() { }//empty constructor
> 
>     public Test(T obj)
>     {
>         variable = obj;
>     }//filled constructor 
> ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:52:51.743

`Test<char>`不是一个`char`。这是一个新的泛型类型 ( `Test<T>`)，它（大概）对提供的类型参数 (ie `T`) 的对象做了一些事情。在您的示例中，您已声明要使用该`char`类型作为此泛型类型的类型参数。

想象一下，你有一个`Test<T>`类型的属性`T`：

```
class Test<T>{
    public T MyTypeValue { get; set; }
} 
```

然后，您可以创建此泛型类型的新实例，并将该属性分配给您尝试获取的事物的实例（在这种情况下，控制台读取）：

```
static Test<char> c = new Test<char>(){ MyTypeValue = 'n'}; 
```

由于`MyTypeValue`is 是`char`通过泛型类型的`T`类型参数进行的类型，因此您可以为其分配一个实际值`char`，但不能为`c`. 也就是说，没有实现@Austin 所建议的其他一些转换方法。

# azure - Azure 共享内存使用配额是如何计算的？

> ID：15930438
> 
> 赞同：13
> 
> 时间：2013-04-10T15:42:07.373
> 
> 标签：azure

Windows Azure 共享网站每小时提供 512MB 的内存使用量。然而，他们几乎没有解释这个数字是如何计算的。

这是一个应用程序在一小时内使用的所有内存的总和吗？或者它是在一小时内某个时间点使用的最大内存量？

![Azure 内存容量过剩](https://i.stack.imgur.com/E5f7s.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T19:41:54.767

Windows Azure 网站使用林模型，其中所有网站都在它们自己的有限容量区域中运行，也称为 AppDomain，它是 IIS 主机 (w3wp) 进程中的隔离边界。AppDomain 旨在隔离并提供围绕在其主机中执行的托管代码的安全性。根据 Windows Azure 网站类型确定 AppDomain 容量，并且网站应用程序被限制在这些限制范围内。

因此，您在内存使用量表中看到的值是特定网站在特定时间在进行检查时使用的内存。这些检查每小时进行一次，您看到的值是给定时间的值。如果在检查时共享网站正在使用超过内存配额，则该网站将暂停一小时，直到下一个强制执行期。

# iphone - identifierForVendor vs SecureUDID / OpenID

> ID：15930439
> 
> 赞同：0
> 
> 时间：2013-04-10T15:42:13.007
> 
> 标签：iphone, ios, objective-c, ipad, udid

用什么来代替旧的 UDID 更好？identifierForVendor 或 SecureUDID 或 OpenID？

目前我们使用 OpenID，但我坚持认为，如果 Apple 开发了 identifierForVendor，它应该是最好的解决方案。另一方面，我听说它有问题，很快也会被弃用。那么从长远来看，最好的选择是什么

当我开始阅读这些差异时，我遇到了 SecureUDID。所以也许它会更好，因为它基于 OpenUDID 但更安全。我必须说，我有点失落。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:28:00.150

这些是我现在的想法。让我知道你的想法：

OpenUDID 不是传输唯一标识符的最安全方法，有更安全的方法，例如 SecuredUDID。但是OpenId被广泛使用，因此该应用不太可能很快在应用商店中被拒绝。所以没有真正需要迁移到 SecureUDID。iOS6 之前不支持 IdentifierForVendor，因此对于需要兼容 iOS5 的应用来说，它不是一个选项。所以就我而言，目前最好**的办法**是继续使用 OpenUDID。

# jsp - 无法在 html 选择选项中显示法语字符

> ID：15930442
> 
> 赞同：0
> 
> 时间：2013-04-10T15:42:28.807
> 
> 标签：jsp, web-applications

我有一个 jsp 页面“myAccount.jsp”。它包括一个标头jsp，使用：

```
<%@ include file="jspHeader.jsp"%> 
```

在 jspHeader.jsp 中，charset 定义如下：

```
<%@ page contentType="text/html;charset=windows-1252"%> 
```

在 myAccount.jsp 中，我必须在 html 选择选项中硬编码两个字符串：“English”和“français”：

```
<select name="Lang"> 
    <option value=""><fmt:message key="myaccount_lbl_13" bundle="${lang}"/></option>
    <option <%if (LangVal.equals("en")){%> selected <%}%> value="en">English</option>
    <option <%if (LangVal.equals("fr")){%> selected <%}%> value="fr">français</option>
</select> 
```

问题在于 IE 中的法语单词“français”显示不正确。如果我在 myAccount.jsp 中添加编码为

```
<%@ page pageEncoding="UTF-8"%> 
```

有谁知道如何解决这个问题？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:48:26.113

这两种声明`charset=windows-1252`又`pageEncoding="UTF-8"`显得矛盾。尝试在任何地方使用 UTF8。

如果它不起作用，您可以使用`&ccedil;`打印 ac cédille。

# android - 如何将 ActionMode 完成按钮对齐在 ActionBar 的右侧而不是左侧？

> ID：15930448
> 
> 赞同：5
> 
> 时间：2013-04-10T15:42:37.790
> 
> 标签：android, android-actionbar, actionbarsherlock

正如标题所示，有没有办法将`ActionMode` **完成按钮**对齐在右侧而不是左侧？或者我应该隐藏它并添加一个菜单按钮并管理它`onClick`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-15T09:59:27.327

在你调用 "startActionMode" 之后，你可以找到 actionMode 的视图，并设置它的布局方向（或者调查它然后做你想做的事）：

```
// <= call "startActionMode" here
final View actionModeView = findViewById(R.id.action_mode_bar);
if (actionModeView != null)
   actionModeView.setLayoutDirection(View.LAYOUT_DIRECTION_LTR); 
```

我知道它至少适用于工具栏（当被设置为 actionBar 时），使用支持库。

# python - Python'AttributeError：'function'对象没有属性'min''

> ID：15930454
> 
> 赞同：15
> 
> 时间：2013-04-10T15:42:48.760
> 
> 标签：python, numpy, attributes, attributeerror

首先，为这两个问题看起来如此明显而道歉；我对此非常陌生，不知道我在做什么。

我正在尝试编写一些东西来将用于样条插值的 Scipy 函数应用于值数组。我的代码目前如下所示：

```
import numpy as np
import scipy as sp
from scipy.interpolate import interp1d

x=var
x1 = ([0.1,0.3,0.4])
y1 = [0.2,0.5,0.6]

new_length = 25
new_x = np.linspace(x.min(), x.max(), new_length)
new_y = sp.interpolate.interp1d(x, y, kind='cubic')(new_x) 
```

但是当它到达线路时

```
new_x = np.linspace(x.min(), x.max(), new_length) 
```

我收到以下错误：

```
AttributeError: 'function' object has no attribute 'min' 
```

到目前为止，谷歌搜索等并没有出现我理解的任何内容。这是什么意思，我该如何解决？

第二个问题：如何一次输入多行代码？目前，如果我尝试复制整个内容然后将其粘贴到 PyLab 中，它只会输入我的代码的第一行，所以我必须一次将整个内容粘贴到一行中。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T15:55:04.103

If this line

```
new_x = np.linspace(x.min(), x.max(), new_length) 
```

is generating the error message

```
AttributeError: 'function' object has no attribute 'min' 
```

then `x` is a function, and functions (in general) don't have `min` attributes, so you can't call `some_function.min()`. What is `x`? In your code, you've only defined it as

```
x=var 
```

I'm not sure what `var` is. `var` isn't a default builtin in Python, but if it's a function, then either you've defined it yourself for some reason or you've picked it up from somewhere (say you're using Sage, or you did a star import like `from sympy import *` or something.)

[Update: since you say you're "using PyLab", probably `var` is `numpy.var` which has been imported into scope at startup in IPython. I think you really mean "using IPython in `--pylab` mode.]

You also define `x1` and `y1`, but then your later code refers to `x` and `y`, so it sort of feels like this code is halfway between two functional states.

Now `numpy` arrays *do* have a `.min()` and `.max()` method, so this:

```
>>> x = np.array([0.1, 0.3, 0.4, 0.7])
>>> y = np.array([0.2, 0.5, 0.6, 0.9])
>>> new_length = 25
>>> new_x = np.linspace(x.min(), x.max(), new_length)
>>> new_y = sp.interpolate.interp1d(x, y, kind='cubic')(new_x) 
```

would work. Your test data won't because the interpolation needs at least 4 points, and you'd get

```
ValueError: x and y arrays must have at least 4 entries 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T17:30:22.383

> 第二个问题：如何一次输入多行代码？目前，如果我尝试复制整个内容然后将其粘贴到 PyLab 中，它只会输入我的代码的第一行，所以我必须一次将整个内容粘贴到一行中。我该如何解决这个问题？

假设你被`ipython`称为或类似[的](http://ipython.org/ipython-doc/stable/interactive/tutorial.html#magic-functions)`ipython --pylab`东西，那么你可以简单地使用[魔法命令](http://ipython.org/ipython-doc/stable/interactive/tutorial.html#magic-functions)。如果您没有定义为另一个变量，则将其称为或简单地调用它：[`paste`](http://ipython.org/ipython-doc/stable/interactive/tutorial.html#magic-functions)`%paste``paste``paste`

```
In [8]: paste
import numpy as np
import scipy as sp
from scipy.interpolate import interp1d

x=var
x1 = ([0.1,0.3,0.4])
y1 = [0.2,0.5,0.6]

new_length = 25
new_x = np.linspace(x.min(), x.max(), new_length)
new_y = sp.interpolate.interp1d(x, y, kind='cubic')(new_x)

## -- End pasted text --
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
<ipython-input-8-b4e41f59d719> in <module>()
      3 from scipy.interpolate import interp1d
      4 
----> 5 x=var
      6 x1 = ([0.1,0.3,0.4])
      7 y1 = [0.2,0.5,0.6]

NameError: name 'var' is not defined

In [9]: 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T15:43:56.560

将该行更改为：

```
new_x = np.linspace(min(x), max(x), new_length) 
```

`min`并且`max`不是列表的属性，它们是它们自己的功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-15T22:39:16.530

当我调用`timezone.now`而不是`timezone.now()`. 然后我尝试格式化`DateTime`我期望的值。但它不是一个`DateTime`; 这是一个功能。这导致了一条关于“月份”不是“功能”属性的错误消息。

解决方法是在 . 之后简单地添加括号`now`。这调用了`now`函数并返回了它的结果，而不是返回`now function`对象本身。

愚蠢的错误，我知道。但不容易排除故障。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-16T16:04:16.710

我遇到了类似的问题。

我的错误是我将变量和函数名称命名为相同。

我纠正了这一点，错误消失了。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-10T15:46:06.250

Int 没有 min() 函数，但 min() 是内置函数。您需要使用 min(x)。

# c++ - 在不同线程上发送和接收

> ID：15930456
> 
> 赞同：3
> 
> 时间：2013-04-10T15:42:54.007
> 
> 标签：c++, objective-c, sockets

我正在开发一个基本的配对服务器。基本流程是这样的：

1.  客户端连接到服务器，报告客户端的名称和他们正在寻找的匹配类型
2.  服务器报告所有可能的匹配
3.  客户选择他/她想要配对的匹配项
4.  服务器匹配两个客户端

问题是，每次客户端连接时，我都需要向该新客户端报告所有可能的匹配项，并将所有可能的匹配项报告给该新连接客户端（因此，在不匹配的情况下，客户端必须始终准备好`recv`从服务器访问）。同时，客户端可以随时选择匹配或断开连接（因此客户端必须始终准备好，`send`服务器必须准备好`recv`）

我怀疑这个问题的真正解决方案是使用线程，一个`recv`用于客户端和服务器的后台线程，以及一个主用户交互`send`线程。

所以我有两个与此相关的问题：

1.  它是否在不同线程上同时保存到`send`同一个套接字连接？`recv`
2.  这甚至是处理这个问题的正确方法吗？

（标记为 C++ 和 obj-c，因为服务器是用 C++ 构建的，客户端是 obj-c）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:51:03.817

是的，`recv()`在一个线程和`send()`另一个线程上使用同一个套接字是安全的。

在服务器端，只有当您同时连接到服务器的客户端相对较少时，使用专用线程才会有效。如果可伸缩性是一个问题，您需要使用异步 I/O，如果可能的话甚至使用 I/O 完成端口，在单个线程上管理多个客户端，将所需线程的数量保持在最低限度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:47:21.463

在任何合理的套接字库实现中都是安全的。这也是正确的做法。

# actionscript-3 - AS3“错误：返回值必须未定义”

> ID：15930461
> 
> 赞同：0
> 
> 时间：2013-04-10T15:43:04.210
> 
> 标签：actionscript-3

如果我声明这样的函数：

```
public function foo():void
{
    // do something
} 
```

有时在该功能中，我可能会决定提前退出，通常带有日志消息，如下所示：

```
public function foo():void
{
    if( somethingWentWrong )
    {
        log( "blah blah" );
        return;
    }

    // do something
} 
```

where`log()`本质上是`trace()`带有签名的包装器`public function log( msg:String ):void`

为了节省一点空间，我可能会重写该检查并提前为此：

```
public function foo():void
{
    if( somethingWentWrong )
        return log( "blah blah" );

    // do something
} 
```

这在 99% 的情况下编译和运行都没有问题，*除了*偶尔（当项目的另一个不相关部分存在错误，或者我进行清理时），我会收到以下形式的编译错误：

```
"Error: Return value must be undefined" 
```

而且我需要以长格式重新编写它才能编译。编译完成后，我可以将其返回到其简短版本，一切都会再次变得愉快。

然而，当这个错误发生时，它很烦人，我不喜欢在引入 3 行冗余时重写代码。关于它为什么会发生（并且只是偶尔发生）以及我如何才能阻止它而不是到处写长表格的任何想法？从技术上讲，看到`log()`回报`void`，应该没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:07:23.217

你的函数声明：

```
public function foo():void 
```

建议你的函数不应该返回任何东西。所以如果我是你，我会做

```
log( "blah blah" );
return; 
```

代替

```
return log( "blah blah" ); 
```

第二个版本不好，不仅因为它并不总是有效，而且它还会导致代码的任何读者假设它`log`返回一个值，而实际上它没有。

它使您的代码更难理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:13:58.453

如果函数要“返回”一个值，则必须定义类型。

您将函数定义为“void”，但您尝试“返回”一个值。

如果您打算返回一个值，这是编写函数的正确方法：

```
// if you want to return a value, you must specify the type
public function foo():String
{
    if( somethingWentWrong )
    {
        // I am assuming that log returns a String
        return log( "blah blah" );
    }
        else
        {
            return null;
        }
} 
```

此外，如果您指定返回类型，则函数必须返回一个值。

根据您要执行的操作，您似乎还需要确保您的日志函数返回一个字符串。函数签名应该是：

```
public function log(msg:String):String 
```

它应该返回一个字符串。

# ads - OpenX 2.8.10 视频广告

> ID：15930462
> 
> 赞同：3
> 
> 时间：2013-04-10T15:43:08.760
> 
> 标签：ads, myisam, openx

我正在尝试使用 OpenX 2.8.10 AdServe 创建新的视频广告，但出现以下错误：

```
PEAR Error

MDB2 Error: syntax error
_doQuery: [Error message: Could not execute statement]
[Last executed query: CREATE TABLE banner_vast_element_seq (id INT NOT NULL AUTO_INCREMENT, PRIMARY KEY (id)) TYPE=MYISAM]
[Native code: 1064]
[Native message: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE=MYISAM' at line 1]

PEAR Error

MDB2 Error: syntax error
[Error message: on demand sequence banner_vast_element could not be created]

PEAR Error

DB_DataObject Error: [mdb2_error: message="MDB2 Error: syntax error" code=-2 mode=callback callback=pearErrorHandler prefix="" info="[Error message: on demand sequence banner_vast_element could not be created] "] 
```

有什么解决办法吗？我如何知道错误发生在哪个 PHP 类中（当我更改`TYPE=MyISAM`为时它起作用`ENGINE=MyISAM`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:36:12.433

该文件是`/lib/pear/MDB2/Driver/Manager/mysql.php`. 在第 842 行，更改`TYPE=`为`ENGINE=`.

PS：这不是`PHP`问题。

# java - 在eclipse中启动模拟器时出错

> ID：15930465
> 
> 赞同：0
> 
> 时间：2013-04-10T15:43:13.380
> 
> 标签：java, android, eclipse, android-emulator, emulation

当我运行我的程序时，它说：

“不幸的是，您的应用程序已停止！”

这是控制台

```
[2013-04-10 18:36:09 - STO App] ------------------------------
[2013-04-10 18:36:09 - STO App] Android Launch!
[2013-04-10 18:36:09 - STO App] adb is running normally.
[2013-04-10 18:36:09 - STO App] Performing sarah.bodoor.sto.Reminder activity launch
[2013-04-10 18:36:09 - STO App] Automatic Target Mode: Preferred AVD 'STODevice' is available on emulator 'emulator-5554'
[2013-04-10 18:36:11 - STO App] Application already deployed. No need to reinstall.
[2013-04-10 18:36:11 - STO App] Starting activity sarah.bodoor.sto.Reminder on device emulator-5554
[2013-04-10 18:36:14 - STO App] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=sarah.bodoor.sto/.Reminder } 
```

这是 logCat

```
04-10 15:57:00.324: E/Trace(1977): error opening trace file: No such file or directory (2)
04-10 15:57:01.565: E/AndroidRuntime(1977): FATAL EXCEPTION: main
04-10 15:57:01.565: E/AndroidRuntime(1977): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.test2/com.example.test2.MainActivity}: java.lang.RuntimeException: Binary XML file line #16: You must supply a layout_width attribute.
04-10 15:57:01.565: E/AndroidRuntime(1977):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at android.os.Looper.loop(Looper.java:137)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at java.lang.reflect.Method.invokeNative(Native Method)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at java.lang.reflect.Method.invoke(Method.java:511)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at dalvik.system.NativeStart.main(Native Method)
04-10 15:57:01.565: E/AndroidRuntime(1977): Caused by: java.lang.RuntimeException: Binary XML file line #16: You must supply a layout_width attribute.
04-10 15:57:01.565: E/AndroidRuntime(1977):     at android.content.res.TypedArray.getLayoutDimension(TypedArray.java:491)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at android.view.ViewGroup$LayoutParams.setBaseAttributes(ViewGroup.java:5614)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at android.view.ViewGroup$MarginLayoutParams.<init>(ViewGroup.java:5756)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at android.widget.FrameLayout$LayoutParams.<init>(FrameLayout.java:610)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at android.widget.FrameLayout.generateLayoutParams(FrameLayout.java:554)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at android.widget.FrameLayout.generateLayoutParams(FrameLayout.java:56)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:748)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at android.app.Activity.setContentView(Activity.java:1881)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at com.example.test2.MainActivity.onCreate(MainActivity.java:14)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at android.app.Activity.performCreate(Activity.java:5104)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-10 15:57:01.565: E/AndroidRuntime(1977):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-10 15:57:01.565: E/AndroidRuntime(1977):     ... 11 more 
```

即使我做一个简单的项目作为测试，它也给了我同样的信息。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:59:13.547

您缺少 layout_width 属性：

原因：java.lang.RuntimeException：二进制 XML 文件第 16 行：您必须提供 layout_width 属性。

在 XML 文件中添加 layout_width 属性将解决该问题。

# netbeans - Netbeans - 部署 WAR 错误：模块尚未部署

> ID：15930472
> 
> 赞同：0
> 
> 时间：2013-04-10T15:43:33.763
> 
> 标签：netbeans, deployment, ejb, glassfish-3, war

我使用 NetBeans 7 创建了一个 Java 企业应用程序。我使用的是[GlassFish](http://en.wikipedia.org/wiki/GlassFish) v3。当我将[WAR](http://en.wikipedia.org/wiki/WAR_%28Sun_file_format%29)文件部署到 GlassFish 中时，它显示错误*“模块尚未部署”*，但如果我部署整个企业应用程序，它就可以工作。

例如，

```
enterprise
enterprise-ejb
enterprise-war 
```

当我部署“企业”时它可以工作，但部署“企业战争”不起作用。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:10:07.967

有几件事可能会发生：

1.  在尝试部署“企业战争”之前，您已经部署了“企业”。在这种情况下，错误可能意味着上下文根已经被占用，因此部署失败。

2.  在尝试部署“enterprise-war”之前，您尚未部署“enterprise”。在这种情况下，失败表明您在企业战争中有代码/资源/某些东西依赖于代码“企业-ejb”。如果在部署时无法满足依赖关系，则部署失败。

继续进行的“最佳”方法是部署“企业”，然后让 NetBeans 在您进行更改时更新应用程序。这通常称为“保存时部署”。您会遇到一个昂贵的点（当您开发更大的应用程序时），但对于初始探索和学习 API 阶段，保存时部署很有帮助。它使您可以专注于您的应用程序和 API，而不是部署机制。

# android - 构建cocos2d-x android项目失败：未知EABI对象属性44

> ID：15930478
> 
> 赞同：5
> 
> 时间：2013-04-10T15:43:49.293
> 
> 标签：android, android-ndk, cygwin, cocos2d-x

今天，我使用`cygwin`and`ndk-r8`来交叉构建我的 cocos2d-x android 项目：HelloCpp，我失败并收到一些错误，例如：

```
Unknown EABI object attribute 44 
```

以下是来自 cygwin 的消息：

```
StaticLibrary  : libcocos2d.a
SharedLibrary  : libhellocpp.so
E:/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../../../arm-linux-androideabi/bin/ld.exe: Warning: ./obj/local/armeabi/webp.a(alpha.o): Unknown EABI object attribute 44
E:/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../../../arm-linux-androideabi/bin/ld.exe: Warning: ./obj/local/armeabi/webp.a(buffer.o): Unknown EABI object attribute 44 
```

网上找了一些tips，也有大佬说是ndk的工具链的问题。但是我不知道怎么办，有没有和我一样在研究cocos2d-x的问题？真希望有可以给我指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-17T11:59:16.023

您正在使用的工具链不理解该属性并忽略它。尝试更新 ndk-r9b 以避免该警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T21:15:16.180

您在 Windows 上使用 Android NDK R8。通常我在 Mac 上工作，但在我的 Windows 中，我使用 android-ndk-r8c 版本，因为我在尝试编译时遇到了其他版本的问题。

尝试下载另一个 NDK (r8c) 并重试。

# c# - 创建一个模型（类）来处理 MVC 视图所需的一切

> ID：15930488
> 
> 赞同：0
> 
> 时间：2013-04-10T15:44:01.717
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我正在创建一个 MVC 4 视图使用的模型，并且我一直在创建一个为其自身加载值的方法。

在我的控制器中：

```
public ActionResult Index(int id)
{
    MyModel _Model = new MyModel();
    _Model.LoadValues(id); //Now that's init'd, get it's values
    return View(_Model);
} 
```

问题出在“LoadValues()”方法中 - 不允许将“this”作为引用传递 =/

我的模型：

```
public class MyModel
{
public string Value1 { get; set; }
public string Value2 { get; set; }

    public MyModel()
    {
    }

    public LoadValues(int id)
    {
        //I would like to pass "this" to the method as a ref so it could directly fill the values
        DAL.LoadMyModel(id, ref this); //doesn't work

        //My work around is this, but there has to be a better way....
        MyModel _TempModel = new MyModel(); //this
        DAL.LoadMyModel(id, ref _TempModel); //is
        Value1 = _TempModel.Value1; //very
        Value2 = _TempModel.Value2; //terribad
    }

} 
```

我想我也可以将“LoadValues(int id)”更改为“LoadValues(int id, ref MyModel _TempModel)”，如果这是正确的做法，我想这就是我要做的。但是能传入“这个”就太好了！:)

我正在尝试做的事情可能吗？为什么“this”是只读的并且不能传递给另一个方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:48:49.493

你不需要使用“ref”。您的 MyModel 类是引用类型，因此将始终通过引用传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:56:14.533

`ref`如果您想更改引用指向的实例，则只需要在这种情况下，因此传递`ref this`是非法的，因为您无法更改`this`指向的内容。

您可以删除`ref`调用中的关键字（和`LoadMyModel`定义），DAL 将（可能）填写 "`this"`实例的属性。

*就个人*而言，我更喜欢让 DAL*返回*实例而不是*填充*它们，所以我会在控制器中做这样的事情：

```
public ActionResult Index(int id)
{
    MyModel _Model = DAL.LoadMyModel(id); 
    return View(_Model);
} 
```

并将`DAL`类注入模型，这样我就不会绑定到特定的`DAL`. 就目前而言，您*似乎*正在将模型绑定到 DAL，这可能会在稍后回来咬您。

# java - org.hibernate.HibernateException：无法实例化默认 tuplizer [org.hibernate.tuple.entity.PojoEntityTuplizer]

> ID：15930495
> 
> 赞同：5
> 
> 时间：2013-04-10T15:44:15.210
> 
> 标签：java, hibernate, hibernate-mapping

我正在使用 Hibernate 框架开发一个 Web 应用程序。尝试运行 webapp 时出现此错误。

错误控制台：

```
Exception caught in Create Account Dataorg.hibernate.HibernateException: Unable to
instantiate default tuplizer [org.hibernate.tuple.entity.PojoEntityTuplizer]
java.lang.NullPointerException 
```

我的映射文件（hbm.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
<class name="org.vgec.bean.CreateAccount" table="CreateAccount" >
        <id name="enrollment_number" type="java.lang.String">
            <column name="enrollment_number" length="20"/>
            <generator class="assigned" />
        </id>
       <property name="activation_code" type="java.lang.String">
        <column name="activation_code" length="50"/>
       </property>

</class>
</hibernate-mapping> 
```

DataAccessObject 文件代码：

```
public void addCreateAccount(CreateAccount act) throws Exception {

    Session session = null;

    try{
        //this step will read hibernate.cfg.xml
        SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();
        session = sessionFactory.openSession();
        Transaction tx = session.beginTransaction();
        session.save(act);
        tx.commit();

    }catch(Exception e) {
        System.out.println("Exception caught in Create Account Data" + e);
    }finally{
        session.flush();
        session.close();
    }

} 
```

在上面的代码中抛出异常 - catch 中的字符串显示在控制台的错误中。

这是我的 bean 或 POJO 文件：

```
package org.vgec.bean;

public class CreateAccount {

    private String enrollment_number;
    private String activation_code;

    public String getEnrollment_number() {
        return enrollment_number;
    }

    public void setEnrollment_number(String enrollment_number) {
        this.enrollment_number = enrollment_number;
    }

    public String getActivation_code() {
        return activation_code;
    }

    public void setActivation_code(String activation_code) {
        this.activation_code = activation_code;
    }

} 
```

*   我已经检查了其他线程解决方案。
*   我已包含`javaassist.jar`文件
*   所有的 setter 和 getter 都没有任何拼写错误。
*   我也有`java.lang.NullPointerException`。

这个错误的根本原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:58:19.763

您应该明确定义无参数构造函数。这是 Hibernate 对所有 POJO 的要求。

详细解释可以在这里找到：[https ://stackoverflow.com/a/2971717/283426](https://stackoverflow.com/a/2971717/283426)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-23T12:50:19.217

没错，您需要有一个不带参数的构造函数，这样它就可以使用控制器以及服务类启动一个对象，或者无论如何您正在使用该对象。

# php - Drupal 7 添加 PHP 到视图过滤器

> ID：15930496
> 
> 赞同：0
> 
> 时间：2013-04-10T15:44:16.643
> 
> 标签：php, mysql, drupal, drupal-7, views

我似乎找不到答案，我确定它很简单......

我需要将一小段 PHP 代码添加到视图过滤器中。

我在网站的其他地方使用相同的 PHP 代码从数据库中加载某些用户的个人资料信息，而不是登录用户，而是他们在网站其他地方点击的用户。

可能我一起做错了，如果是这样，请提出更好的方法！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T06:06:46.553

您还可以在视图中创建自定义过滤。[链接在这里](http://www.metaltoad.com/blog/drupal-7-tutorial-creating-custom-filters-views)

# javascript - RoboHelp 目录在 Chrome 中不起作用

> ID：15930502
> 
> 赞同：0
> 
> 时间：2013-04-10T15:44:44.093
> 
> 标签：javascript, xmlhttprequest, robohelp

RoboHelp 脚本文件是否解决了无法在 chrome 中访问 xml 文件的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-09T15:59:30.727

它从本地文件或网站浏览器？

如果通过本地文件 chrome 访问将通过命令行运行

--allow-file-access-from-files 在命令行中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T14:15:42.790

如果您选择 Adob​​e AIR 单源布局，它工作正常，但选择**基于浏览器的帮助**作为**输出类型**，假设您需要 HTML 帮助。

# sed - 在unix中获取两个字符串之间的文本

> ID：15930503
> 
> 赞同：1
> 
> 时间：2013-04-10T15:44:59.380
> 
> 标签：sed

我需要获取字符串中两个单词或文本段之间的文本。

我已经用 sed 搜索并尝试了 EVERTYHING，但无法让它工作：S

我有一个像“aaa bbb ccc ddd eee”这样的字符串，我想提取 bbb 和 ddd 之间的文本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T15:49:13.797

假设`bbb`在您感兴趣的文本和反向约束之后没有发生`ddd`，您可以这样做：

```
 sed 's/^.*bbb //; s/ddd.*$//' <<< "aaa bbb ccc ddd eee" 
```

输出：

```
ccc 
```

`sed`可能不是最好的工具，也许你可以解释一下你想要做什么？例如，您可能希望使用积极的后视和前瞻：

```
grep -oP '(?<=bbb ).*?(?=ddd)' <<< "aaa bbb ccc ddd eee" 
```

输出：

```
ccc 
```

### 编辑

根据评论，OP 想要从中提取 IP 地址`checkip.dyndns.org`。一种通用且更便携的方法是使用`grep -o`，例如：

```
curl -s http://checkip.dyndns.org/ | grep -oE '([0-9]+.){3}[0-9]+' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:05:06.987

您可以使用 sed 分组。三对括号表示三个分组。输出端的\2是第二组的内容

```
sed 's/\(^.*bbb\)\(.*\)\(ddd.*$\)/\2/' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T09:24:41.930

假设您不希望 bbb 和 ddd 之间的输出文本周围有空格

`sed 's|^\(.*bbb *\)\(.*\)\( *ddd.*\)$|\2|g'`

# css - 以 Stellar JS 为中心的 CSS 背景图像

> ID：15930504
> 
> 赞同：4
> 
> 时间：2013-04-10T15:45:04.320
> 
> 标签：css, background-image, parallax

我正在使用 Stellar JS 将背景图像设置为元素，并尝试实现以视差移动的居中图像。但是，当我尝试使用标准方法时，我意识到背景位置由 stellar 更新，然后覆盖居中（我假设这就是覆盖它的原因）。我创建了一个小提琴来解释这种情况。

[http://jsfiddle.net/captDaylight/wvuQm/1/](http://jsfiddle.net/captDaylight/wvuQm/1/)

有没有办法让图像保持在滚动中心？

（堆栈让我在这篇文章中附上代码，虽然在这种情况下它无关紧要，小提琴上的例子非常简单，所以我发布了一些绕过的东西）

```
background: url(http://upload.wikimedia.org/wikipedia/commons/e/e5/Seine_wide.jpg) no-repeat center center; 
background-size: auto 100%; 
```

<> 我正在阅读有关背景位置的其他[堆栈帖子](https://stackoverflow.com/questions/12484196/problems-with-background-image-position-on-stellar-js)，但是当我尝试进行更新时，它表明它似乎已经破坏了视差。

[http://jsfiddle.net/captDaylight/wvuQm/3/](http://jsfiddle.net/captDaylight/wvuQm/3/)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-11T01:33:00.867

您需要禁用水平视差。这将导致 Stellar.js 保持水平背景定位不变。

在您的示例中，对 Stellar 的更新调用

```
$(window).stellar({ horizontalScrolling: false }); 
```

我已通过此更改更新了您的 JSFiddle 示例：http: [//jsfiddle.net/wvuQm/5/](http://jsfiddle.net/wvuQm/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:19:43.483

删除以下css

边距底部：50px；

添加以下脚本并尝试

```
$(window).stellar({
    scrollProperty: 'transform'
}); 
```

# asp.net - 使用jquery进行跨域web服务调用，web服务托管在iis6.0上

> ID：15930507
> 
> 赞同：0
> 
> 时间：2013-04-10T15:45:10.290
> 
> 标签：asp.net, web-services, jquery, iis-6

我将此代码用于跨域 Web 服务调用：

$.support.cors = 真；

```
$.ajax({
    type: 'POST',
    crossDomain: true,
    dataType: "jsonp",
    jsonpCallback: 'jsonCallback',
    contentType: "application/json; charset=utf-8",
    url: baseurl + "/HelloWorld",
    data: '{}',
    dataType: "json",
    success: function(data) {
        alert(data.d);
    },
    error: function(err) {
        alert(err.statusText);
    }
}); 
```

我在 IIS6.0 中添加了这个标题条目：**Access-Control-Allow-Origin" value="*"**

当我运行它时，我得到 500 内部服务器错误（在浏览器控制台中检查）。

谁能告诉我如何解决跨域Web服务访问问题。

提前致谢。

# c++ - C++ 中的部分类

> ID：15930509
> 
> 赞同：1
> 
> 时间：2013-04-10T15:45:13.917
> 
> 标签：c++, partial-classes, binary-compatibility

我想避免重新编译包含公共头文件的所有内容，只是因为类定义的私有部分发生了更改。我正在研究 PIMPL 之外的其他选项。

这是我尝试过的：

我创建了一个包含 A 类的库：

**A_p.h**包含 A 类的私有部分

```
void PrivateMethod(int i); 
```

**啊**公共头文件：

```
class A
{
public:
    A();
    virtual ~A();
    // other public members
private:
#ifdef A_PRIVATE
#include "A_p.h"
#endif
}; 
```

**A.cpp**

```
#define A_PRIVATE
#include "A.h"

A::A() {}
A::~A() {}
void A::PrivateMethod(int i) { } 
```

然后，我创建了一个 Win32 控制台项目，其中包括公共标头 (Ah) 和针对 .lib 文件的链接。

一切似乎都有效，但我想知道一路上是否有任何陷阱。谁能详细说明这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T15:47:31.317

“一切似乎都有效” -**似乎**是必不可少的。您只是遇到了未定义的行为。那是一个格式错误的程序——一个类定义在使用该类的编译单元中必须是相同的。

由于这是 UB，它似乎可以工作，但尝试`virtual`在私有部分声明一个方法，您很可能会遇到一些明显的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:18:53.073

抽象类允许您通过子类化抽象类来声明公共接口但具有私有数据和函数。

这将无法按照您描述的方式工作，因此在 C++ 标准中不受支持的一个关键原因是您提出的公共声明使得无法知道`A`. 公开声明没有透露私有数据需要多少空间。因此，只看到 public 声明的代码不能执行`new A`，不能为定义的数组分配空间，`A`也不能用指向 的指针进行算术运算`A`。

还有其他问题，可能会以某种方式解决，例如指向虚函数成员的指针所在的位置。然而，这会导致不必要的并发症。

要创建一个抽象类，您至少要在该类中声明一个虚函数。定义虚函数`= 0`而不是函数体。这表示它没有实现，因此除了作为从它派生的类的子对象外，没有抽象类的对象。

然后，在单独的私有代码中，声明并定义一个`B`派生自`A`. 您将需要提供创建和销毁对象的方法，可能使用一个返回指针的公共“新”函数，`A`并通过调用一个可以看到声明的私有函数`B`和一个接受指针的公共“删除”函数来工作`A`并通过调用可以看到`B`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T16:31:16.297

有 3 种隐藏此类信息的好方法：

1.  只**向前声明**你的班级。这仅在它只是通过客户端代码（通过指针和/或引用）传递并且仅在您的库中*使用时才有效。*您的库首先需要提供工厂函数或类似函数来返回指针/引用，客户端永远不能调用`new`或`delete`

2.  公开一个**抽象基类**，并再次提供工厂函数（实例化一个仅在您的库中可见的具体派生类）

3.  使用**粉刺**

我也同意你应该重新考虑任何大到有必要隐藏它的类，但如果你真的不能分解它，那么这些是你的选择。

* * *

至于 ODR 违规如何以及为什么会在实践中破坏事情：

*   库及其客户端代码对实例的大小可能有不同的看法。这可能会导致分配/解除分配等问题。
*   他们还可以期待不同的数据成员偏移量、vtable 布局等。
    *   PS。出于这些目的，内联方法算作客户端代码，因为它们不会通过放入新的动态库构建来更新
    *   聚苯乙烯。较新的优化器可能会在您不知情的情况下内联一些*离线方法*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-11T14:50:10.717

正如所写的，在 C++ 中不可能有一个适当的部分类，在某些情况下这实际上很烦人。继承和 Pimpl 模式提供了一种替代方案，但每个对象都有一个指针的开销，这在 RAM 有限的嵌入式软件中可能很高。

为了解决这个问题，ISO 有一个官方的“部分类”提案：

[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0309r0.pdf](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0309r0.pdf)

不幸的是，该提议被拒绝了。

# c# - C# DynamicObject 在内部是如何工作的？

> ID：15930511
> 
> 赞同：0
> 
> 时间：2013-04-10T15:45:21.840
> 
> 标签：c#, dynamic

我读到了`dynamic`它对语言的贡献。DLR 管理对对象 ( ) 成员的任何调用`dynamic`，为此它使用反射机制。但我无法理解**DynamicObject**类型的行为（内部）。

当您从**DynamicObject**继承时，您可能会创建类似于现有**ExpandoObject**的东西，您需要覆盖**TrySetMember**、**TryGetMember**和其他方法。我的问题是：当你做**object.method**时，它是如何传递给我们类的**TryGetMember**的，乍一看似乎**DynamicObject**是绑定到 DLR 的，但我对此表示怀疑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:36:59.230

评论中已澄清问题的答案。

虽然我不确定，但我认为 TryInvokeMember 等函数只是对反射进行包装，以克服反射的基本设计问题——它只抛出一种类型的异常：TargetInvocationException。所有其他异常，包括您正在调用的方法中的您自己的异常，都使用 TargetInvocationException 进行包装。

动态变量没有这个问题——它们抛出与最初抛出的完全相同的 excaption。虽然在某些情况下它们仍然在内部使用反射，但它们应该解开底层异常。我认为这是 TryInvokeMember 和相关方法的目的。它还使 CLR 的开发人员能够以更适当和特殊的方式处理不存在成员的调用。

# javascript - RequireJS 来自字符串名称的模块的新实例

> ID：15930513
> 
> 赞同：0
> 
> 时间：2013-04-10T15:45:30.090
> 
> 标签：javascript, requirejs

我有几个模块要从字符串中实例化对象。当类/对象等在全局范围内时，这通常很容易`window`

```
new window["MyClass"]() 
```

使用 require JS，模块不在范围内，如果在一个类中`window`，它们也不在。`this`

你知道我需要什么范围吗？

```
define(['testclassb'], function(TestClassB) {
  var TestClassA, testclassa;

  TestClassA = (function() {
    function TestClassA() {
      console.log("A");
      new this["TestClassB"](); #errors with undefined function
      new window["TestClassB"](); #errors with undefined function
      new TestClassB(); #works fine
    }

    TestClassA.prototype.wave = function() {
      return console.log("Wave");
    };

    return TestClassA;

  })();

  testclassa = new TestClassA();
  return testclassa.wave();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:18:34.943

> 我有几个模块，我想从字符串中实例化对象

这主要是个坏主意，表明代码有异味。你真的需要那个吗？

> 你知道我需要什么范围吗？

`TestClassB`是一个*局部变量*，无法通过名称访问。由于您已经静态地声明`testclassb`为依赖项，因此没有理由不使用静态变量`TestClassB`。

但是，require.js 允许你同步`require()`已经加载的模块，所以你也可以使用

```
new (require("testclassb"))(); 
```

# mysql - MySQL：在选择语句中自动增加临时列

> ID：15930514
> 
> 赞同：47
> 
> 时间：2013-04-10T15:45:33.700
> 
> 标签：mysql, auto-increment, temporary

如何使用 MySQL 在我的 select 语句中创建和自动增加临时列？

这是我到目前为止所拥有的：

```
SET @cnt = 0;
SELECT
    (@cnt =@cnt + 1) AS rowNumber,
    rowID
FROM myTable
WHERE CategoryID = 1 
```

返回：

```
+++++++++++++++++++++
+ rowNumber | rowID +
+++++++++++++++++++++
+  (NULL)   |   1   +
+  (NULL)   |   25  +
+  (NULL)   |   33  +
+  (NULL)   |   150 +
+  (NULL)   |   219 +
+++++++++++++++++++++ 
```

但是我需要：

```
+++++++++++++++++++++
+ rowNumber | rowID +
+++++++++++++++++++++
+  1        |   1   +
+  2        |   25  +
+  3        |   33  +
+  4        |   150 +
+  ...      |   ... +
+++++++++++++++++++++ 
```

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-04-10T15:50:41.127

这将为您提供一个***连续***的行号`3`。

```
SELECT
    (@cnt := @cnt + 1) AS rowNumber,
    t.rowID
FROM myTable AS t
  CROSS JOIN (SELECT @cnt := 0) AS dummy
WHERE t.CategoryID = 1
ORDER BY t.rowID ; 
```

**结果**

```
| 行号 | ROWID |
---------------------
| 1 | 1 |
| 2 | 25 |
| 3 | 33 |
| 4 | 150 |
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-03-16T05:14:28.600

但是，如果您`group by`在 select 语句中有 a 怎么办？计数将关闭。

对于这种情况，我发现的唯一解决方案是嵌套选择：

```
SELECT (@cnt := @cnt + 1) AS rowNumber, t.*
from
(select
    t.rowID
FROM myTable 
WHERE CategoryID = 1
ORDER BY rowID) t
CROSS JOIN (SELECT @cnt := 0) AS dummy 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-04-10T15:48:15.647

尝试这个：

```
SET @rownr=0;
SELECT @rownr:=@rownr+1 AS rowNumber, rowID
  FROM myTable
  WHERE CategoryID = 1 
```

在 MySQL 的现代版本中，您可以使用 MySQL Window：[http ://www.mysqltutorial.org/mysql-window-functions/mysql-row_number-function/](http://www.mysqltutorial.org/mysql-window-functions/mysql-row_number-function/)

例子：

```
SELECT  ROW_NUMBER() OVER (  ORDER BY productName  ) row_num, 
        productName, msrp 
FROM   products ORDER BY   productName; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-25T16:26:00.373

您可以使用此代码。我认为这是一个更简单的解决方案。

```
select ROW_NUMBER() OVER (  ORDER BY id  ) AS Seid, id from table1 where id<10 
```

结果：

## | 赛德 | 编号 |

| 1 | 5|

| 2 | 7|

| 3 | 8|

| 4 | 9|

# json - JSON补丁规范的解释

> ID：15930516
> 
> 赞同：3
> 
> 时间：2013-04-10T15:45:37.070
> 
> 标签：json, patch

[我对 JSON Patch ( RFC 6902](https://www.rfc-editor.org/rfc/rfc6902) )的解释有疑问。

假设我有一个看起来像这样的资源：

```
{
   "type": "assembly",
   "uri": "http://example.com/campSrv/Assembly/18",
   "name": "/sample",
   "description": "Hello, World Application",
   "created": "2013-03-27T16:15Z",
   ...
} 
```

这个资源的定义说它可以有一个名为“tags”的值，它被定义为一个字符串数组。但是，此资源当前没有标签，因此我的服务不会序列化不存在的数组。

现在假设我提交了以下 HTTP PATCH 请求：

```
PATCH http://example.com/campSrv/Assembly/18 HTTP/1.1
Content-Type: application/json-patch

[
  { "op": "add", "path": "/tags/0", "value": "flobbit" }
] 
```

这应该创建“标签”数组并将“flobbit”添加为第一个/唯一元素，还是我的服务器应该返回错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:05:09.617

在我的理解...

您的补丁将导致错误，因为`tags`不存在，并且您无法添加到尚不存在的数组中。

> [RFC 6902 4.1](https://www.rfc-editor.org/rfc/rfc6902#section-4.1)
> 
> ...
> 
> 但是，对象本身或包含它的数组确实需要
> 存在，如果不是这种情况，它仍然是一个错误。例如
> ，以该文档开头的目标位置为“/a/b”的“添加”：
> 
> { "a": { "foo": 1 } }
> 
> 不是错误，因为“a”存在，并且“b”将被添加到它的
> 值中。这是本文档中的错误：
> 
> { "q": { "bar": 2 } }
> 
> 因为“a”不存在。

但是，此补丁将添加`tags`一个值为 的字符串`"flobbit"`。

```
[
  { "op": "add", "path": "/tags", "value": "flobbit" }
] 
```

这个补丁将添加`tags`第一个元素为的数组`"fobbit"`。

```
[
  { "op": "add", "path": "/tags", "value": ["flobbit"] }
] 
```

# mongodb - Salat 在运行 Play Framework 应用程序时无法序列化，但在控制台中工作正常

> ID：15930520
> 
> 赞同：2
> 
> 时间：2013-04-10T15:45:55.280
> 
> 标签：mongodb, scala, playframework-2.0, salat

我有一个 Play 2.1.0 (Scala) 框架应用程序，我正在尝试使用 Salat 将我的案例类对象转换为 MongoDBObjects。当我启动游戏控制台时，实例化我的一个案例类，导入 salat._ 和 salat.global._ 我能够从我的案例类转换为 MongoDBObject。

当我在游戏中处于“运行”模式时，我调用一个调用 Actors 的页面，该 Actors 又执行相同的代码以从案例类转换为 MongoDBObject，我收到错误（data.Field 是我的案例类的全名） ：

com.novus.salat.util.GraterGlitch：

```
 GRATER GLITCH - unable to find or instantiate a grater using supplied path 
```

姓名

```
 REASON: Very strange!  Path='data.Field' from pickled ScalaSig causes Clas 
```

sNotFoundException

```
 Context: 'global'
  Path from pickled Scala sig: 'data.Field' 
```

为了回答这里的另一个问题，我将 scala-compiler 添加到我的项目的依赖项中，但这并没有帮助。

令我感到困惑的是，这在控制台手动实例化东西时工作正常，但在运行完整播放应用程序时失败。

在这里的任何帮助将不胜感激。

编辑：将 scala 编译器添加到依赖项并使用“播放开始”工作正常。如果我使用“play run”，它会因上述错误而惨遭失败。任何关于为什么的见解都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-09T07:33:08.783

根据[https://github.com/playframework/Play20/issues/822](https://github.com/playframework/Play20/issues/822)，这是由动态类加载器引起的。

就我而言，这段代码解决了这个问题。

```
implicit val ctx = new Context {
  val name = "Custom_Classloader"
}
ctx.registerClassLoader(Play.classloader(Play.current)) 
```

另请参阅 [https://github.com/novus/salat/wiki/CustomContext](https://github.com/novus/salat/wiki/CustomContext)

# c# - 使用 Web 服务的自动完成功能失败 ASP.NET

> ID：15930525
> 
> 赞同：0
> 
> 时间：2013-04-10T15:46:08.903
> 
> 标签：c#, javascript, asp.net, autocomplete

我正在尝试将 Web 服务用于从数据库读取的自动完成文本框。当我尝试编译时出现错误

`HttpExceptionUnhandled` 指示异常发生位置的标记和 JS

```
 <%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
        CodeFile="Default.aspx.cs" Inherits="_Default" %>

    <asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"
                type="text/javascript"></script>
            <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css"
                rel="Stylesheet" type="text/css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js" type="text/javascript"></script>
    </asp:Content>
    <asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
            <script type="text/javascript">
                $(document).ready(function () {
                    $("#txtSearch").autocomplete({
                        source: function (request, response) {
                            $.ajax({
 error on this line             url: '<%=ResolveUrl("~/Service.asmx/GetDrugs") %>',
                                data: "{ 'prefix': '" + request.term + "'}",
                                dataType: "json",
                                type: "POST",
                                contentType: "application/json; charset=utf-8",
                                success: function (data) {
                                    response($.map(data.d, function (item) {
                                        return {
                                            label: item.split('-')[0],
                                            val: item.split('-')[1]
                                        }
                                    }))
                                },
                                error: function (response) {
                                    alert(response.responseText);
                                },
                                failure: function (response) {
                                    alert(response.responseText);
                                }
                            });
                        },
                        select: function (e, i) {
                            $("#txtHidden").val(i.item.val);
                        },
                        minLength: 1
                    });

                }); 
            </script>

            <form id="form1" runat="server">
            <asp:TextBox ID="txtSearch" runat="server"></asp:TextBox>
            <asp:HiddenField ID="txtHidden" runat="server" />
            <br />
            <asp:Button ID="btnSubmit" runat="server" Text="Submit" OnClick="Submit" />
            </form>

    </asp:Content> 
```

当我尝试在浏览器中运行 Web 服务时，我可以看到可用方法列表并单击`GetDrugs`，它会将我带到可以输入文本的屏幕，但它也失败了。当它失败时，我在浏览器中得到以下文本

当我尝试调用 Web 服务时发生的错误。这是在改写 SQL 并在 while 循环中向阅读器添加 ToString() 之后。

```
System.FormatException: Input string was not in a correct format.
   at System.Text.StringBuilder.AppendFormat(IFormatProvider provider, String format, Object[] args)
   at System.String.Format(IFormatProvider provider, String format, Object[] args)
   at System.String.Format(String format, Object arg0)
   at Service.GetDrugs(String prefix) in c:\Users\dtceci2\Desktop\WebSite2\App_Code\Service.cs:line 45 
```

连接字符串很好，SQL Server 正在我的本地计算机上运行。这是网络服务的代码

```
using System;
using System.Collections.Generic;
using System.Web;
using System.Web.Services;
using System.Data.SqlClient;
using System.Configuration;
using System.Web.Script.Services;

/// <summary>
/// Summary description for Service_CS
/// </summary>
[WebService(Namespace = "http://localhost/~Service.asmx")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
[System.Web.Script.Services.ScriptService]
public class Service : System.Web.Services.WebService
{

    public Service()
    {

        //Uncomment the following line if using designed components 
        //InitializeComponent(); 
    }

    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string[] GetDrugs(string prefix)
    {
        List<string> drugs= new List<string>();
        using (SqlConnection conn = new SqlConnection())
        {
            conn.ConnectionString = ConfigurationManager
                    .ConnectionStrings["constr"].ConnectionString;
            using (SqlCommand cmd = new SqlCommand())
            {
                cmd.CommandText = "select distinct drug_name from rx where drug_name like @SearchText" + "'%'";
                cmd.Parameters.AddWithValue("@SearchText", prefix);
                cmd.Connection = conn;
                conn.Open();
                using (SqlDataReader rdr = cmd.ExecuteReader())
                {
                    while (rdr.Read())
                    {
                        drugs.Add(string.Format("{0}}", rdr["drug_name"].ToString()));
                    }
                }
                conn.Close();
            }
            return drugs.ToArray();
        }
    }
} 
```

带有标记的页面背后的代码很简单

```
public partial class _Default : System.Web.UI.Page
{
    protected void Submit(object sender, EventArgs e)
    {
        string drugName = Request.Form[txtSearch.Text];

    }
} 
```

关于我在搞砸什么的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:55:33.167

Your plus sign is missing in the query. It should be:

```
"select distinct drug_name from rx where drug_name like @SearchText + '%'"; 
```

The SQL that's currently getting sent to SQL Server is:

```
 select distinct drug_name from rx where drug_name like @SearchText'%' 
```

which is of course no good.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:06:44.327

将“%”附加到传入变量之前，然后在参数中使用它，这样您就不必担心 SQL SELECT 中的连接。

```
prefix += "%"; 
```

固定 GetCustomers() 函数：

```
 public string[] GetCustomers(string prefix)
    {
        prefix += "%";
        List<string> customers = new List<string>();
        using (SqlConnection conn = new SqlConnection())
        {
            conn.ConnectionString = ConfigurationManager
                    .ConnectionStrings["constr"].ConnectionString;
            using (SqlCommand cmd = new SqlCommand())
            {
                cmd.CommandText = "select distinct drug_name from rx where drug_name like @SearchText";
                cmd.Parameters.AddWithValue("@SearchText", prefix);
                cmd.Connection = conn;
                conn.Open();
                using (SqlDataReader rdr = cmd.ExecuteReader())
                {
                    while (rdr.Read())
                    {
                        customers.Add(rdr["drug_name"].toString());
                    }
                }
                conn.Close();
            }
            return customers.ToArray();
        }
    }
} 
```

# c++ - 如何将像素数组转换为 HBITMAP

> ID：15930528
> 
> 赞同：10
> 
> 时间：2013-04-10T15:46:18.683
> 
> 标签：c++, winforms, dib, createdibsection

我有一个像素数组，我需要将其转换为 HBITMAP 以便在窗口中显示它。我尝试使用 CreateDIBitmap() 但我没有 BMP 标头。我尝试根据 MSDN 文档手动构建它们，但这不起作用。

这是我的代码的外观

```
HBITMAP hBitmap
char pixels[160*120]; // White grayscale image of size 160x120
memset(pixels,255,sizeof(pixels));

BITMAPINFOHEADER bmih;
bmih.biSize     = sizeof(BITMAPINFOHEADER);
bmih.biWidth    = 160;
bmih.biHeight   = -120;
bmih.biPlanes   = 1;
bmih.biBitCount = 8;
bmih.biCompression  = BI_RGB ;
bmih.biSizeImage    = 0;
bmih.biXPelsPerMeter    =   10;
bmih.biYPelsPerMeter    =   10;
bmih.biClrUsed  =0;
bmih.biClrImportant =0;

BITMAPINFO dbmi;
dbmi.bmiHeader = bmih;
dbmi.bmiColors->rgbBlue = 0;
dbmi.bmiColors->rgbGreen = 0;
dbmi.bmiColors->rgbRed = 0;
dbmi.bmiColors->rgbReserved = 0;
void* bits = (void*)&(pixels[0]); 
hBitmap = CreateDIBitmap(localDC, &bmih, CBM_INIT, qB.bmBits, &dbmi, DIB_RGB_COLORS); 
```

现在我得到一个非 NULL hBitmap 这很好，但它总是显示黑色图像，好像它没有指向像素数组。我使用代码检查了它

```
BITMAP qB;
GetObject(reinterpret_cast<HGDIOBJ>(hBitmap),sizeof(BITMAP),reinterpret_cast<LPVOID>(&qB)); 
```

实际上 qB.bmBits 是 NULL。有什么问题以及如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T07:14:47.267

我找到了怎么做。我们需要使用`CreateDIBSection()`而不是`CreateDIBitmap()` 所以这里是工作代码

```
HBITMAP hBitmap = NULL;
    unsigned char pixels[160*120*3]; 
    for (int i=0; i<160*120*3; i++){
        pixels[i] = (i%4==1)*255;        // An BGR (not RGB) 160x120 image.
    }
BITMAPINFOHEADER bmih;
bmih.biSize     = sizeof(BITMAPINFOHEADER);
bmih.biWidth    = 160;
bmih.biHeight   = -120;
bmih.biPlanes   = 1;
bmih.biBitCount = 24;
bmih.biCompression  = BI_RGB ;
bmih.biSizeImage    = 0;
bmih.biXPelsPerMeter    =   10;
bmih.biYPelsPerMeter    =   10;
bmih.biClrUsed    =0;
bmih.biClrImportant =0;

BITMAPINFO dbmi;
ZeroMemory(&dbmi, sizeof(dbmi));  
dbmi.bmiHeader = bmih;
dbmi.bmiColors->rgbBlue = 0;
dbmi.bmiColors->rgbGreen = 0;
dbmi.bmiColors->rgbRed = 0;
dbmi.bmiColors->rgbReserved = 0;
void* bits = (void*)&(pixels[0]); 

// Create DIB
hBitmap = CreateDIBSection(localDC, &dbmi, DIB_RGB_COLORS, &bits, NULL, 0);
if (hBitmap == NULL) {
    ::MessageBox(NULL, __T("Could not load the desired image image"), __T("Error"), MB_OK);
    return;
}
// copy pixels into DIB.
memcpy(bits,pixels,sizeof(pixels)); 
```

对于灰度图像，将像素循环复制到 DIB，而不是使用 memcpy()

```
#define INTENSITY unsigned char

INTENSITY* dest = (INTENSITY*)bits;
const INTENSITY* src  = .. Put your char array of pixels;
for (int j=0; j<imageWidth; j++){
    for (int i=0; i<imageHeight; i++, src++){
        *dest++ = *src;
        *dest++ = *src;
        *dest++ = *src;
    }
    // Padd the line to round WORD.
    if (imageWidth%2)
        *dest++ = 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-26T10:38:36.770

您的帖子非常有帮助（答案）但是它对我不起作用，这是带有小修正的代码：

```
 // creating input

    unsigned char pixels[160*120*3]; 
    for (int i=0; i<160*120*3; i++)
        pixels[i] = (i%4==1)*255;        // An BGR (not RGB) 160x120 image.

    // at this point we have some input

    BITMAPINFOHEADER bmih;
    bmih.biSize     = sizeof(BITMAPINFOHEADER);
    bmih.biWidth    = 160;
    bmih.biHeight   = -120;
    bmih.biPlanes   = 1;
    bmih.biBitCount = 24;
    bmih.biCompression  = BI_RGB ;
    bmih.biSizeImage    = 0;
    bmih.biXPelsPerMeter    =   10;
    bmih.biYPelsPerMeter    =   10;
    bmih.biClrUsed    =0;
    bmih.biClrImportant =0;

    BITMAPINFO dbmi;
    ZeroMemory(&dbmi, sizeof(dbmi));  
    dbmi.bmiHeader = bmih;
    dbmi.bmiColors->rgbBlue = 0;
    dbmi.bmiColors->rgbGreen = 0;
    dbmi.bmiColors->rgbRed = 0;
    dbmi.bmiColors->rgbReserved = 0;

    HDC hdc = ::GetDC(NULL);

    HBITMAP hbmp = CreateDIBitmap(hdc, &bmih, CBM_INIT, pixels, &dbmi, DIB_RGB_COLORS);
    if (hbmp == NULL) {
        ::MessageBox(NULL, L"Could not load the desired image image", L"Error", MB_OK);
        return;
    }

    ::ReleaseDC(NULL, hdc);

    // a little test if everything is OK
    OpenClipboard(NULL);
    EmptyClipboard();
    SetClipboardData(CF_BITMAP, hbmp);
    CloseClipboard();

    // cleanup
    DeleteObject(hbmp); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-28T22:37:32.873

这里的其他答案非常有帮助，但我最终只用 1 行就可以实现它。

```
HBITMAP hBm = CreateBitmap(width,height,1,32,pixels); // 1 plane, 32 bits 
```

希望对以后的读者有用。

* * *

此外，[`CreateCompatibleBitmap`](https://docs.microsoft.com/en-us/windows/desktop/api/wingdi/nf-wingdi-createcompatiblebitmap)您[`SetDIBits`](https://docs.microsoft.com/en-us/windows/desktop/api/wingdi/nf-wingdi-setdibits)还需要使用设备上下文。

在 MSDN 中，[`CreateDIBitmap`](https://docs.microsoft.com/en-us/windows/desktop/api/wingdi/nf-wingdi-createdibitmap)它指出：

> 以 fdwInit 为 CBM_INIT 调用 CreateDIBitmap 相当于调用 CreateCompatibleBitmap 函数创建设备格式的 DDB，然后调用 SetDIBits 函数将 DIB 位转换为 DDB。

# python - Python Matplotlib：动态更新绘图 - 数组长度先验未知

> ID：15930529
> 
> 赞同：2
> 
> 时间：2013-04-10T15:46:18.873
> 
> 标签：python, dynamic, matplotlib

我知道这些问题：[（A）](https://stackoverflow.com/questions/10944621/dynamically-updating-plot-in-matplotlib)、[（B）](https://stackoverflow.com/questions/2050728/change-dynamically-the-contents-of-a-matplotlib-plot)和[（C）](https://stackoverflow.com/questions/8406385/how-can-i-dynamically-update-my-matplotlib-figure-as-the-data-file-changes) ——所有这些都解决了我的部分问题。
我还阅读了[Animations Cookbook](http://www.scipy.org/Cookbook/Matplotlib/Animations)
我的问题，但是，上述任何内容似乎都没有得到解决。
我希望在优化器运行时绘制优化器返回的目标函数。我事先不知道优化器将运行多少次迭代。与我如何获得包含目标函数的数组无关，可以在这个最小示例中隔离问题：

```
import numpy as np  
import matplotlib.pyplot as plt  

SIZE = 50  
R1 = 0.5
R2 = 0.75

plt.ion()

fig = plt.figure()
ax = fig.add_subplot(111)
fig.canvas.set_window_title('broken spiral')

for i in range(0, SIZE):
  A.append(R1 * i * np.sin(i))
  B.append(R2 * i * np.cos(i))
  line1, = ax.plot(A,'-k',label='black')
  line2, = ax.plot(B,'-r',label='red')
  legend = ax.legend(loc=0)
  plt.draw()

plt.savefig('test_broken_spiral.png') 
```

这里的情节只是“伪”更新。真正发生的是，对于每次迭代，都会生成一个新行 for `A`and `B`，与原始行重叠，但也会生成一个新的图例条目。经过 50 次迭代，我有 100 行和 100 个图例条目。
我接下来尝试了这个：

```
for i in range(0, SIZE):
  A.append(R1 * i * np.sin(i))
  B.append(R2 * i * np.cos(i))
  if i == 0: 
    line1, = ax.plot(A,'-k',label='black')
    line2, = ax.plot(B,'-r',label='red')
    legend = ax.legend(loc=0)
    plt.draw()
  else:
    line1.set_ydata(A)
    line2.set_ydata(B)
    plt.draw()

plt.savefig('test_broken_spiral.png') 
```

不幸的是，这个情节完全搞砸了轴。
我把`if i == 0`语句放进去，因为我事先不知道迭代的次数（是的，在这种情况下我知道，但不是在针对的应用程序中）并且不知何故必须“初始化”情节和图例。
我的问题可以总结如下：
1.）我如何更新我的情节？如果我将优化器运行 10,000 次迭代，我不希望我的绘图（文件大小）中有 10,000 条覆盖线。
2.) 我在哪里放置`legend`命令？

我正在运行 python 2.6.6 和 matplotlib 0.99.1.1

编辑：
[这](https://stackoverflow.com/questions/12680427/updating-a-plot-in-python-in-real-time)似乎是一个类似的问题，同样没有答案的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:52:36.390

只需在循环之外使用空数据创建行对象：

```
line1, = ax.plot([], [],'-k',label='black')
line2, = ax.plot([], [],'-r',label='red')
ax.legend()
for i in range(0, SIZE):
  A.append(R1 * i * np.sin(i))
  B.append(R2 * i * np.cos(i))
  line1.set_ydata(A)
  line1.set_xdata(range(len(A)))
  line2.set_ydata(B)
  line2.set_xdata(range(len(B)))
  ax.relim()
  ax.autoscale_view()
  plt.draw() 
```

您可能会更聪明地更新您的`xdata`.

如需更完整的示例，请参见[此处](http://matplotlib.org/examples/animation/animate_decay.html)和完整的[动画示例](http://matplotlib.org/examples/animation/)库。

# makefile - kdevelop 中的并行构建

> ID：15930534
> 
> 赞同：2
> 
> 时间：2013-04-10T15:46:37.720
> 
> 标签：makefile, kdevelop

如何配置 kdevelop 以并行执行构建？

等效的命令行可能是：

```
make -j 4 
```

...并行运行四个作业。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:46:37.720

转到*项目*->*打开配置...*

点击左侧的*制作。*然后在*Number of simulataneous jobs*下设置所需的值。

![](https://i.imgur.com/JSn1NC7.png)

这些说明适用于 KDevelop 4.4.1，但也可能适用于早期版本。

# python - 扭曲的肥皂引发异常

> ID：15930539
> 
> 赞同：0
> 
> 时间：2013-04-10T15:46:53.110
> 
> 标签：python, ubuntu, soap, twisted

使用

```
from twisted.web import soap, xmlrpc, resource, server
import os

def getQuote():
    return "Victory to the burgeois, you capitalist swine!"

class XMLRPCQuoter(xmlrpc.XMLRPC):
    def xmlrpc_quote(self):
        return getQuote()

class SOAPQuoter(soap.SOAPPublisher):
    def soap_quote(self):
        return getQuote()

def main():
    from twisted.internet import reactor
    root = resource.Resource()
    root.putChild('RPC2', XMLRPCQuoter())
    root.putChild('SOAP', SOAPQuoter())
    reactor.listenTCP(7080, server.Site(root))
    reactor.run()

if __name__ == '__main__':
    main() 
```

我得到“：：1：0：找不到元素”。查看回溯，我可以看到进行此调用时引发了异常

```
p, header, body, attrs = SOAPpy.parseSOAPRPC(data, 1, 1, 1) 
```

我还测试了另一个twisteSOAP 程序，我认为这是有一些版本问题。我在 ubuntu 12.04 上，带有扭曲的 11.01。

可能是一些与 python 和 xml 相关的版本。有人有类似的吗？

如果我在 /usr/lib/python2.7/dist-packages/twisted/web/soap.py 中添加以下代码，在第 52 行

```
 f = open('/tmp/nannata', 'w')
    f.write(data)
    f.close() 
```

查看 /tmp/nannata 我可以看到该文件是无效的！所以解析问题，大概就是指这个……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:31:07.313

对不起，所有的骚动，

使用纯肥皂客户端而不是网络浏览器运行游戏。所以，这是一个误报。

是否有一些建议来开发一个带有 twisted 和 ZSI 或 twised 和 suds 的 SOAP 服务器？我会很感激的:)

# java - 比较两个不同长度的数组

> ID：15930540
> 
> 赞同：2
> 
> 时间：2013-04-10T15:46:55.057
> 
> 标签：java, android, arrays, similarity

我正在 Android 上开发一个程序，它将使用手势点比较手势的相似性。我有两个这样的数组：

```
gest_1 = [120,333,453,564,234,531]
gest_2 = [222,432,11,234,223,344,534,523,432,234] 
```

我知道没有办法动态调整任何一个数组的大小，所以我有什么办法可以使用这些数组比较这两种手势并返回相似度？

请注意，数组中的数据只是随机输入的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T15:51:32.650

使用哈希集。对于两个列表的并集，

```
HashSet<Integer> hashSet = new HashSet<>(); // Contains the union
for(int i = 0; i < array1.length; i++)
    hashSet.add(array1[i]);
for(int i = 0; i < array2.length; i++)
    hashSet.add(array2[i]); 
```

对于两个列表的交集，

```
HashSet<Integer> hashSet = new HashSet<>();
List<Integer> list = new ArrayList<>();  // Contains the intersection
for(int i = 0; i < array1.length; i++)
    hashSet.add(array1[i]);
for(int i = 0; i < array2.length; i++) {
    if(hashSet.contains(array2[i])) {
        list.add(array2[i]);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T05:59:17.740

试试这个函数它返回数组： -

```
public static String[] numSame (String[] list1, String[] list2) 
     {  
          int same = 0;  
          for (int i = 0; i <= list1.length-1; i++) 
          {  
             for(int j = 0; j <= list2.length-1; j++) 
             {  
                if (list1[i].equals(list2[j])) 
                {  
                    same++;  
                    break;  
                }  
             }  
          }  

          String [] array=new String[same];
          int p=0;
          for (int i = 0; i <= list1.length-1; i++) 
          {  
             for(int j = 0; j <= list2.length-1; j++) 
             {  
                if (list1[i].equals(list2[j])) 
                {  
                    array[p]=  list1[i]+"";
                    System.out.println("array[p] => "+array[p]);
                    p++;
                    break;  
                }  
             }  
          } 
          return array;
       } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T15:55:14.710

You could try something like this:

```
 List similarities = new ArrayList();
  for(int i = 0; i < Math.max(gest_1.length, gest_2.length); i++){
    if (gest_1[i] == gest_2[i])
       similarities.add(gest_1[i];
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T15:51:13.450

空间重要吗？如果没有，您可以将其中一个数组存储在哈希表中，然后遍历另一个数组，检查该元素是否包含在哈希表中。这将是 O(n) 而不是 O(nm)，但这也会增加算法的大小。

如果您无法执行此操作，则需要两个循环。在内部循环通过整个第二个数组增加检查元素是否沿途相等之后，外部循环将增加第一个数组的索引。这可能是 O(nm)。

上述想法假设当您说“相似性”时，它意味着一个数组中的任何元素都等于另一个数组中的任何其他元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T15:48:48.603

```
 int temp = 0;
        int[] gest_1 = {120, 333, 453, 564, 234, 531};
        int[] gest_2 = {222, 432, 11, 234, 223, 344, 534, 523, 432, 234};
        ArrayList<Integer> g1 = new ArrayList<>();
        ArrayList<Integer> g2 = new ArrayList<>();

        for (int i : gest_1) {
            g1.add(i);
        }
        for (int i : gest_2) {
            g2.add(i);
        }
        for (int i : gest_1) {
            if (g2.contains(i)) {
                temp++;
            }
//            else{
//                break;
//            }
        }

        System.out.println(temp + " element(s) are equal ...");
    } 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-02-12T04:39:38.907

我们考虑这样的两个数组
int[] array1={3,5,4,2,6,1,7,9,8}; int[] array2={1,2,3,4,8};

我们的目标是找到相似的值。

```
 int[] res;

    if(array1.length>array2.length){
         res=new int[array2.length];
    }else{
        res=new int[array1.length];
    }

      int k=0;

    for(int i=0;i<array1.length;i++)
            {
            for(int j=0;j<array2.length;j++)
                {
                    if(array1[i]==(array2[j]))
                        {
                        res[k]=array1[i];
                            k++;
                            break;

                       }

                }
            }

    for(int l=0;l<res.length;l++){

        System.out.print(res[l]);

    } 
```

# sony - 索尼 Xperia Flash 工具“艾玛”

> ID：15930541
> 
> 赞同：5
> 
> 时间：2013-04-10T15:46:56.573
> 
> 标签：sony

上周我从开发者世界网站下载了索尼提供的[Flash 工具](http://developer.sonymobile.com/services/flash-tool/)，安装后注册为新用户。但是，我的帐户似乎没有得到验证。我没有收到任何电子邮件说他们无法验证我的帐户，也没有收到任何电子邮件说他们可以。

有人知道这个验证过程吗？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-11T16:00:13.017

您不必注册或获得验证。

访问链接了解更多信息。

[http://developer.sonymobile.com/services/flash-tool/how-to-download-and-install-the-flash-tool/](http://developer.sonymobile.com/services/flash-tool/how-to-download-and-install-the-flash-tool/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T08:00:02.183

您没有正确遵循安装指南。我相信你已经跳过了第五步。

5.将Customization.ini 文件粘贴到安装文件夹中。安装文件夹就是上面3.1和3.2点安装路径示例中名为Emma的文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-04T20:49:32.280

安装软件后以在线模式运行并让应用程序无线更新，更新完成后会要求注册，这一次您需要关闭应用程序，然后按照以下步骤操作：-

A. 复制 Customization.ini 文件。您可以在 Flash_tool_for_Xperia_X.zip 中找到它。

B. 将 Customization.ini 文件粘贴到安装文件夹中。安装文件夹是安装路径中名为 Emma 的文件夹。举些例子：-

一个。Windows 64 位的默认路径为：“C:\Program Files (x86)\Sony Mobile\Emma\”</p>

湾。Windows 32 位的默认路径是：“C:\Program Files\Sony Mobile\Emma\

C. 上网并通过“单击开始 > 所有程序 > Sony Mobile > Emma（如果您使用上述步骤 B 中的默认安装路径）来启动 flash 工具”来运行应用程序。一切就绪，运行应用程序..

问候，

普里扬克·阿比内特。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-13T07:20:49.037

这确实是正确的！只需将 .ini 文件放在 .exe 旁边，无需注册！
但并非所有索尼设备都受支持。

不支持 E1。

# php - 从 XML 获取和存储数据

> ID：15930542
> 
> 赞同：1
> 
> 时间：2013-04-10T15:46:58.010
> 
> 标签：php, xml

我正在尝试从以 XML 结构输出数据的 API 获取数据。

它有很多分支，看起来很复杂。这是结构，

```
<rss xmlns:media="http://search.yahoo.com/mrss/" version="2.0">
<channel>
<item>
<title>Test Video</title>
<media:content url="http://localhost/video/test.mp4" type="video/x-flv" duration="6474"/>
</item>
</channel>
</rss> 
```

我也想知道如果它有更多的分支，比如视频描述，类型..我怎样才能抓住它们？并且在媒体标签内部它有多个值，我怎样才能分别获取它们？示例：如何获取**媒体标签**内的**内容 url**？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T21:39:22.900

我意识到您的 XML 中有一个名称空间（第 1 行），这可以解决问题：

```
$xml = simplexml_load_string($x); // assuming your XML in $x
$contents = $xml->xpath("//media:content");

foreach ($contents as $content) echo $content['url'],"<br />"; 
```

查看现场演示：[http ://codepad.viper-7.com/7bJf9Q](http://codepad.viper-7.com/7bJf9Q)

替代方案：寻找`namespace`和`simplexml`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T23:03:04.800

是的，您可以使用 SimpleXML。`<media:content>`指一个命名空间（[http://search.yahoo.com/mrss/](http://search.yahoo.com/mrss/)）。所以你可以使用：

```
$string = <<<XML
<rss xmlns:media="http://search.yahoo.com/mrss/" version="2.0">
<channel>
<item>
<title>Test Video</title>
<media:content url="http://localhost/video/test.mp4" type="video/x-flv" duration="6474"/>
</item>
</channel>
</rss>
XML;

$xml = simplexml_load_string($string);

//var_dump($xml);
echo $xml->channel->item->title;
$contentAttr = $xml->channel->item->children('media', true)->content->attributes();
echo $contentAttr['url'];

exit; 
```

还可以查看[使用 SimpleXML 读取 RSS 提要](https://stackoverflow.com/questions/4887300/using-simple-xml-to-read-rss-feed)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:59:55.550

看看`simplexml`或`DOMDocument`在 php.net。
这些提供解析 XML 数据的函数。
里面的url`<media:content>`叫做属性，上面的函数也提供了拉取属性的方法。

我建议您尝试使用我提供的信息，并在需要帮助时返回 SO，好吗？

尝试愉快！**

# ios - 获取 NSUserdefaults 的问题

> ID：15930544
> 
> 赞同：1
> 
> 时间：2013-04-10T15:47:02.817
> 
> 标签：ios, nsuserdefaults

我是 XCode 编码的新手，我尝试了很多来保存信息，但没有成功。我用谷歌搜索，但我仍然没有找到任何东西。

我采用了一个名为 classNames 的可变数组，并尝试从文本字段 (classField) 中保存信息，但它没有存储在数组中。

我还有另一个问题：我正在使用具有 iOS 5.1 的 XCode，并且我升级到具有 iOS 6.1 的 Xcode，但它给了我一个错误，说“连接中断”并且没有任何按钮或功能起作用，但它适用于具有 iOS 的 XCode 5.1 我需要帮助，谢谢。

```
#import "ViewController.h"

    @interface ViewController ()

    @end

    @implementation ViewController
    @synthesize orignalClass;
    @synthesize otherClassName;
    @synthesize editClassLabel;
    @synthesize displayLabel;
    @synthesize doSomethingButton;
    @synthesize classField;
    @synthesize testField;
    @synthesize classFieldFireTheme;
    @synthesize testFieldFireTheme;

    - (void)viewDidLoad
    {
        [super viewDidLoad];

        _classNames = [[NSMutableArray alloc] init];
        _classNames = [defaults objectForKey:@"classNames"];
        //NSLog(@" %@", [defaults objectForKey:@"classNames"]);

    }

- (void)viewDidUnload
{
    [self setDoSomethingButton:nil];
    [self setClassField:nil];
    [self setTestField:nil];
    [self setClassFieldFireTheme:nil];
    [self setTestFieldFireTheme:nil];
    [self setDisplayLabel:nil];
    [self setOrignalClass:nil];
    [self setEditClassLabel:nil];
    [self setOtherClassName:nil];
    [self setTestClass:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (IBAction)classtextFieldDoneEdtiting:(id)sender {
    [sender resignFirstResponder];
}
- (IBAction)testClassTextFieldDoneEdtiting:(id)sender {
    [sender resignFirstResponder];
}
- (IBAction)TestTextFieldDoneEdtiting:(id)sender {
    [sender resignFirstResponder];
}
- (IBAction)ChangeClassTextFieldDoneEdtiting:(id)sender {
    [sender resignFirstResponder];
}
- (IBAction)ChangeClassToTextFieldDoneEdtiting:(id)sender {
    [sender resignFirstResponder];
}

- (IBAction)addClass:(id)sender {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    _classNames = [defaults objectForKey:@"classNames"];
    _classSize = [_classNames count];
    NSLog(@" %d", [_classNames count]);

    if(_classSize <=9){

        [_classNames insertObject: classField.text atIndex: [_classNames count]];
        NSLog(@"ClassNames#2::: %@", _classNames);
        NSLog(@"textfieldvalue::: %@", classField.text);
        [defaults setObject:_classNames forKey:@"classNames"];
        [[NSUserDefaults standardUserDefaults] synchronize];

        NSLog(@" %d", [_classNames count]);
        NSLog(@"ClassNames#3::: %@", _classNames);

   }else{
        displayLabel.text = @"You exceeded the limit of classes being stores!!!!";
   }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:54:59.523

The problem is that when an array comes out of NSUserDefaults it is not a mutable array. Even if what you put in was an NSMutableArray, what comes out is an ordinary NSArray. You need to use `mutableCopy` on that array to make it mutable. Now you can store into it, and then put it back into NSUserDefaults.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:53:32.490

此代码无法工作。您在方法中声明`defaults`，`addClass:`然后尝试从`viewDidLoad`方法中访问它，这是您无法做到的。`viewDidLoad`在like的顶部添加一行

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults]; 
```

如果您需要更多帮助，我们需要有关您遇到的错误的更多信息。

# codeigniter - php - 在 codeigniter 中创建 adodb db2 加载器

> ID：15930545
> 
> 赞同：0
> 
> 时间：2013-04-10T15:47:05.487
> 
> 标签：codeigniter, connection, db2, loader, adodb

任何人都可以帮我在codeigniter中为db2数据库创建adodb加载器。我尝试使用一些库，它适用于 oracle 数据库，但现在我对将新的 codeigniter 应用程序连接到 IBM DB2 感到困惑。这是 oracle 的 adodbloader。

```
    <?php if (!defined('BASEPATH')) exit('不允许直接脚本访问');

    类 Adodbloader{
        函数 Adodbloader(){
            if ( !class_exists('ADONewConnection') )
                require_once(BASEPATH.'/system/libraries/adodb/adodb.inc.php');

            $obj =& get_instance();
            $this->_init_adodb_library($obj);
        }

        函数 _init_adodb_library(&$ci) {
            $db_var = 假；
            $调试=假；

            如果（！isset（$dsn））{
                // 回退到使用 CI 数据库文件
                包括（APPPATH.'配置/数据库'.EXT）；
                $group = '默认';
                $dsn = 'oci8://my_dbusername:my_dbpassword@my_dbhostname/my_oracledb';
            }

            // $ci 是通过引用，指回全局实例
            $ci->adodb =& ADONewConnection($dsn);

            如果（$db_var）{
                // 也设置正常的 CI db 变量
                $ci->db =& $ci->adodb;
            }

            如果（$调试）{
                $ci->adodb->调试=真；
            }
        }
    }
    ?>

```

adodb for db2 中的手动连接如下所示：

```
    包括（'adodb/adodb.inc.php'）；
    $dbms = 'odbc_db2';
    $db =& ADONewConnection($dbms);
    $dsn = "驱动程序={IBM db2 odbc DRIVER}；数据库=MY_DBNAME；主机名=MY_DBHOST；端口=50000；协议=TCPIP；"."uid=MYDBUSERNAME；pwd=MY_DBPASSWORD";
    $db->连接($dsn);

```

我现在的问题是，如何使用该手动 adodb db2 连接与 codeigniter 集成，以便我可以在我的所有应用程序模型上使用变量 $db。感谢所有给我解决问题的人;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T16:00:20.773

我也尝试过这样做，但从 CI 文档看来，您无法覆盖、扩展或替换数据库类。

请参阅此页面：[http ://ellislab.com/codeigniter/user-guide/general/creating_libraries.html](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)

当我单步执行代码时，/system/database/DB.php 中似乎有很多硬编码的路径和类名。

不过，我很想被证明是错误的。

# prolog - 关于本 Prolog 练习中使用 CUT 的一些问题

> ID：15930546
> 
> 赞同：-1
> 
> 时间：2013-04-10T15:47:06.987
> 
> 标签：prolog

我正在使用 SWI Prolog 为大学考试学习 Prolog，我对以下问题的两种不同解决方案之间的差异有一些疑问：

> 定义子句**count(X, L, NumX)**，其中 X 是一个原子，L 是一个列表，NumX 是 X 在 L 中出现的次数。

这是第一个解决方案：

```
count0(_,[],0).

count0(A, [A|Tail], N) :-
            count0(A,Tail,N1), % L'elemento cercato appare N1 volte nella sottolista
                N is N1+1\.     % N vale N1+1

count0(A, [B|Tail], N) :-
            A\=B,            % A è diverso da B
        count0(A,Tail,N). % N è il numero di occorrenze di A nella sottolista 
```

这是第二种解决方案：

```
count1(_,[],0).

count1(A, [A|Tail], N) :- !,
                      count1(A, Tail, N1),
              N is N1+1.

count1(A, [_|Tail], N) :- count1(A, Tail, N). 
```

我的问题是我不明白 CUT 在第二个版本中扮演什么角色

我知道 CUT 可以防止在放置 CUT 的特定点回溯。

程序的第一个版本在第二条规则中检查 A 是否与 B 不同（我需要这个吗？如果第一条规则失败，则意味着 A 不与列表的 HEAD 统一，因此列出它与 A 中的元素不同）

第二个版本不在第二条规则中执行此检查，而是在第一条规则中进行了删减......

这可能取决于（在第二个版本中）如果我不阻止回溯发生的事实：在那之后，Prolog 给我第一个（正确的）响应，如果我强制回溯使用 ; 发生使用第二条规则：

```
count1(A, [_|Tail], N) :- count1(A, Tail, N). 
```

在计算中采用不同的分支，在那个分支中我没有 N 是 N+1 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:00:20.237

第一个版本在第二个子句中留下一个选择点，而第二个版本在进入第二个子句时提交（带有剪切）该子句。

第一个版本需要明确检查该项目与列表头部不同，因为**在回溯**时，无论第二个子句之前是否成功，都会执行第三个子句。

如果您使用一个简单的输入列表（比如 1 个元素）来跟踪这两个过程，您可以自己看到它。

```
?- count0(a,[a], Count). 
```

您的程序的第一个版本将项目与列表的头部匹配，并执行递归。但是，如果需要，它将在那里留下一个选择点以查看其他替代方案。然后递归由于基本情况（空列表）而结束，你得到*Count=1*的结果。

如果您现在向 prolog 询问其他替代方案，它仍然具有该选择点，因此它将尝试 thirc 子句。如果您不明确检查 A 和 B 是否不同，它将递归调用自身（再次使用空列表）并返回*Count=0*这是错误的答案！

现在，您的程序的第二个版本（使用剪辑的那个）。当 prolog 进入带有 item a 的第二个子句时，它与 cut 一起提交，因此它不会留下选择点。现在您进行递归并以*Count=1*的正确结果结束。

如果你现在向 prolog 询问其他替代方案，它会说没有什么需要检查的了。作为剪切的结果，不再需要检查 A 和 B 是否不同，因为您确定它们会不同，否则第二个子句将被提交，而第三个子句将不会被测试。

# jasmine - 导致茉莉花测试失败的私有方法

> ID：15930547
> 
> 赞同：0
> 
> 时间：2013-04-10T15:47:08.963
> 
> 标签：jasmine

我正在尝试使用 Jasmine 测试类似于下面的功能

```
closure.respond = function (value){ 
if(value)
{
    thisIsAPrivateMethod();

}
thisIsAPublicMethod();

} 
```

我的测试看起来像这样

```
 it('will display the calendar widget when value is true', function(){

    value=true
    closure.respond(value);
    expect(closure.thisIsAPublicMethod).toHaveBeenCalled();
)

}) 
```

每当我运行测试时，我都会在 jasmine 测试运行器中收到一个异常，指出在私有函数内部调用的方法不存在。（对象 # 没有方法 'methodName' ）

我不关心私有函数的内部工作，我怎么能忽略那个调用？

我可以忽略它吗？显然我不能/不应该监视它，因为它是私人的。任何方向将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:03:44.490

有两点，你不能测试从外部不可见的方法调用，只是因为它们不可见。而且你不应该测试你想要测试的对象的内部行为。

# css - 如何将图标放在 GXT 中按钮的中心

> ID：15930548
> 
> 赞同：4
> 
> 时间：2013-04-10T15:47:11.820
> 
> 标签：css, gwt, gwt2, gxt

嗨，我正在研究 GXT

我有一个带有图标的按钮。

我想把图标放在中心。

目前它看起来像这样。

![在此处输入图像描述](https://i.stack.imgur.com/osgMH.jpg)

按钮的图标在左侧（因为 IconAlign.LEFT）。

我想要它在中心。但是没有像 IconAlign.CENTER 这样的东西

如果有人知道要在代码中添加什么。请分享

**代码**

```
button.setIconAlign(IconAlign.LEFT);
button.setIcon(Resources.INSTANCE.modify());
button.setStyleName("project-Button"); 
```

**CSS**

```
.project-Button {
    color: Black;
    border: thin outset #FF6600;
    font-family: Courier New, Century Gothic, Times New Roman, Verdana, Arial;
    vertical-align: middle;
    text-align: center;
    background-color: White;
    cursor: pointer;
} 
```

先感谢您

* * *

更新

```
public interface Resources extends ClientBundle {

    public Resources INSTANCE = GWT.create(Resources.class);

     @Source("Images/modify.png")
     ImageResource modify();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:04:11.123

用了这个。它工作正常。

```
vertical-align: middle;
text-align: center;
background-position:30% 70%; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:46:01.247

利用`.center {margin:0, auto; }`

如果你使用“背景位置：30% 70%;” 这是分辨率变化或大尺寸显示器的问题。当我们设计 UI 时，我们也会确保交叉分辨率。

快乐的 CSS 设计

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:21:06.670

[这个问题的](https://stackoverflow.com/questions/11431020/gwt-custom-button-with-icon-above-text)最佳答案有点小技巧，但它应该可以工作。

基本上，您可以像这样在按钮中设置 HTML：

```
Button button = new Button();
String html = "...";
button.setHTML(html); 
```

在 HTML 字符串中，您可以`<div>`在图像中放置一个。

不过，很可能还有更好的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T09:38:50.560

您可以像这样更改样式：

```
.x-btn-text-icon .x-btn-text {
  position: relative;
  white-space: nowrap;
  outline: 0 none;
  overflow: hidden;
  width: 86px;
  margin: 0;
  cursor: pointer;
  border: 0 none;
  font: normal 11px arial,tahoma,verdana,helvetica;
  color: #333;
  background: transparent;
  background-position: 0 center;
  background-repeat: no-repeat;
  height: 32px;
  ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T11:42:12.730

似乎 ExtJs 有 a `iconAlign:'center'`，所以我想知道你是否可以`JsObject`在你的 java 代码中使用 a 和正确的 JSON 描述......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T06:07:57.913

您是否需要这个长按钮，图像在中心，文本在图像右侧？我的意思是，您可以将它与顶部的图像和它们下方的文本一起使用吗？像这里一样[EXT GWT Showcase 按钮](http://www.sencha.com/examples-2/#buttons)

# r - 打印到多个设备

> ID：15930551
> 
> 赞同：2
> 
> 时间：2013-04-10T15:47:27.670
> 
> 标签：r, device

我正在尝试同时打印到两个设备。大多数情况下，我可以创建我想要的输出，但我不确定如何更改`par$mfrow`第一个设备的设置。

```
pdf(file="test.all.pdf",width=7,height=10,pointsize=12,bg="white",paper="letter",pagecentre=T)
par(mfrow=c(3,2))

for(i in 1:12){
  temp <- rnorm(500,i,1)
  pdf(paste0("test_",i,".pdf"))
  dev.control(displaylist="enable")
  hist(temp)
  dev.copy(which=2)
  dev.off(which=3)
}

graphics.off() 
```

我正在尝试为每个图获取单独的 .pdf 文件，然后是每页 6 个图的组合 .pdf 文件。相反，我只是得到一个组合的 .pdf 文件，每页有 1 个图。

我根据这篇[文章](http://www.stackoverflow.com/q/7942612/1000343)构建了我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T06:49:55.953

像@DWin 一样，我认为这不可能如你所问。dev.copy() 复制设备区域，而不是绘图，这就是为什么我认为它不能仅仅根据一组不同的 par() 参数放置绘图。

在我看来，它也似乎更干净，更容易阅读和写作阅读以绘制每个情节我害怕两次。如果绘制绘图的代码非常复杂，请事先将其转换为函数。

```
mycomplicatedPlot <- function(x, ...){
    hist(x,...)
    abline(v=mean(x))
    abline(v=quantile(x, probs=c(0.025, 0.975)), lty=2, col="red")
}

pdf(file="test.all.pdf",width=7,height=10,pointsize=12,bg="white",paper="letter",pagecentre=T)
    par(mfrow=c(3,2))

    for(i in 1:12){
      temp <- rnorm(500,i,1)
      pdf(paste0("test_",i,".pdf"))
          mycomplicatedPlot(temp, main=i)
      dev.off()
    mycomplicatedPlot(temp, main=i)
    }
dev.off() 
```

# jsp - 如何在表达式语言 (EL) 中显示地图的类别？

> ID：15930554
> 
> 赞同：1
> 
> 时间：2013-04-10T15:47:37.807
> 
> 标签：jsp, el

如果我有一些对象存储为名为 myObject 的请求属性，我可以在 JSP EL 中找到它的类型，如下所示：

`${myObject['class']}`

但是如果我有一个`java.util.Map`存储为请求属性 myMap，我把它放在我的页面中......

`${myMap['class']}`

...搜索地图以查找其键为“类”的条目。这是有道理的，否则我们永远无法从带有“class”键的 Map 中检索 EL 中的任何内容。

那么如何在 EL 语句中显示我的 Map 类型呢？

（而且你们中的大多数人会想问我：“你为什么在乎？”。好吧，今天我在没有互联网连接的火车上工作，我不得不`java.util.HashMap`在一个页面中迭代一个，我完全忘记了如何做到这一点. 所以，不能谷歌或 SO 它，我决定找出类型是什么（我知道它不是一个实际的 java.util.HashMap，Tomcat 把它变成了别的东西）所以我可以去翻找Tomcat jar 文件，看看它暴露了哪些方法，也许自己弄清楚。好吧，我无法通过 EL 找出类型。我求助于在`<% %>`标签中嵌入 Java。但它一直困扰着我一整天，我可以不能单独与 EL 一起发现。所以，这就是我关心的原因。它正在吞噬我。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:35:56.653

如果您使用的是[EL](https://stackoverflow.com/tags/el/info) 2.2+，您可以简单地使用：

```
${myMap.getClass()} 
```

另一种可能性是编写[自定义 EL 函数](https://stackoverflow.com/questions/7079978/how-to-create-a-custom-el-function)或标签。在那里你可以检查对象是否是[`java.util.AbstractMap`](http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html).

# excel - Excel：跨多个工作表公式的单元格总数

> ID：15930555
> 
> 赞同：3
> 
> 时间：2013-04-10T15:47:38.457
> 
> 标签：excel, excel-formula

我有一个包含多个工作表的 Excel 工作簿，每个工作表代表一个日历月，从 May_2013 开始，到 December_2013 结束。我只想计算每个包含数据的工作表中 C2-C32 中的单元格，并忽略没有数据的单元格。

说到Excel，我完全没用。任何解决方案/建议将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T15:51:41.243

```
=CountIF(C2:C32,"<>"&"") 
```

应该做你想做的。

对于多个页面，为每个页面示例执行 countIf -

```
=CountIF('Sheet1'!C2:C32,"<>"&"")+CountIF('Sheet2'!C2:C32,"<>"&"") 
```

*这将为您提供具有值的单元格的数量，如果您想将这些值相加，请在您的问题中指定，我可以修复答案*

# php - mysql connect - 将我的网站移动到本地主机

> ID：15930556
> 
> 赞同：0
> 
> 时间：2013-04-10T15:47:42.270
> 
> 标签：php, mysql, xampp, localhost, mysql-connect

我已经使用 CMS 创建了一个网站。我一直在更新实时站点，最后在我的开发朋友“tsk tsk”几个月后，我决定在我的计算机上创建一个本地版本，以便在上线之前测试更新。

我将所有文件和数据库复制到一个文件夹中。然后，使用 XAMPP 将文件传输到本地主机

```
> http://localhost/mywebsite/ 
```

然后我在 phpmyadmin 中创建了一个名为“mywebsite”的新数据库，并成功导入了下载的数据库。

现在，当我导航到

```
> http://localhost/mywebsite/ 
```

我收到以下消息：

> 检测到错误导致无法加载此页面。如果此问题仍然存在，请联系网站管理员。core.error_file_line mysql_connect() [function.mysql-connect]: 未知的 MySQL 服务器主机 'mywebsitecom.fatcowmysql.com' (1)

大概我必须将数据库与计算机上的 CMS 链接起来。我想这对 Stack Overflow 上的大多数人来说听起来很简单，但我的 PHP 和 DB 技能有限。

任何人都立即明白我接下来需要采取什么行动来完成本地设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:51:05.843

在您的`mysql_connect`通话中，您将其`mywebsitecom.fatcowmysql.com`作为主机，找到您连接到 MySQL 的代码文件并将该值更改为`localhost`

喜欢

```
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password'); 
```

最好不要使用`mysql_*`函数:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:51:14.957

您正在尝试连接到 mywebsitecom.fatcowmysql.com 上的 MySQL 服务器，尽管出于安全原因，该服务器可能不允许外部连接。尝试连接到“localhost”而不是“mywebsitecom.fatcowmysql.com”。如果您在本地系统上安装了 MySQL，那应该可以。根据您使用的 CMS，您应该能够在某处编辑配置文件。

# twitter - Twitter 流 API 未记录的更改

> ID：15930557
> 
> 赞同：0
> 
> 时间：2013-04-10T15:47:47.520
> 
> 标签：twitter, streaming

twitter 流媒体端点最近是否发生了变化，从[https://sitestream.twitter.com/2b/site.json](https://sitestream.twitter.com/2b/site.json)到[https://sitestream.twitter.com/1.1/site.json](https://sitestream.twitter.com/1.1/site.json)？我在 twitter api 文档页面上找不到任何文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:28:12.850

我直接向 tweeterapi 开发博客作者发了推文，他回答说，确认 api 端点已从 /2b/site.json 更改为 /1.1/site.json 但 /2b/site.json 应该继续工作。获取的站点流数据应该相同。

# java - 最后一行仅在 Java 中部分打印

> ID：15930558
> 
> 赞同：1
> 
> 时间：2013-04-10T15:47:51.660
> 
> 标签：java, file, file-io, wait

我有一些比较两个文件的java代码。当它在特定行上找到相似的数字时，它会将该行打印到一个新文件中。这似乎工作了很长时间......直到我相信是最后一行。那条线只会被部分打印出来。我认为这可能是因为代码后面的“中断”，但我在谷歌上环顾四周，并不确定是否有任何答案真的相关。这是一些我认为相关的代码：

```
Read in files
while the line isn't null...
Parse files
Write a header
Some comparisons
while (!input.startsWith("#") && !input.startsWith("P")) {
      prse = input.split("\t");//split the file by tabs
      pos = prse[7];
      poson = prse[8];
      pos = Integer.parseInt(poson);
      if (cnt < num.size()) { //if we haven't exceeded an array
         if (num.get(cnt).equals(pos)) { //if the first number is the same
              if (cnt2 < posstart.size()) { //if we haven't exceeded another array
                  end = Integer.parseInt(posend.get(cnt2)); //change to int
                  start = Integer.parseInt(posstart.get(cnt2));//change to int
                  if (pos < start) { //if it is less then the starting pos then it can't fall within 
                      break; //so break
                  }
                  if (pos < end && pos > start) {//I am trying to see if a number falls within the range of numbers from a separate file
                      out1.write(input + "\n"); //If it does: This is where I am writing out the line
                       break; //if I remove this break the program hangs here
                   } else {
                       cnt2++; //if it wasn't the same, add 
                 }
               }
               } else {
                   cnt++; //if it was the same move to the next one
                   cnt2 = 0; //reset this number
                   break; //go  back to beginning
               }
               } else {
                  break;
               } 
```

因此，该代码可以完美运行大约 6500 行，但随后它突然切断了最后一行：

```
Blah    B   6   5   8   C   5   X   6
Blah    A   0   1   4   C   2   X   7
Blah    B   3   5   9   C   5   X   6
Blah    B   0   9   4 
```

有谁知道我可以添加什么来阻止最后一行突然中断？我知道在 BASH 中你可以指定它等待......但我对 java 等价物感到困惑，并希望有人可以为我推荐一个并帮助更好地解释它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T17:44:05.400

为了得到答案（直到卡尔提出他的答案）我将继续回答

> 你关闭了输出流吗？也许你需要调用flush方法。– 卡尔

他是对的。我没有。傻我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T02:13:38.013

Actually, i made that mistakes a lot, i think it is because with the garbage collector,we don't really care about memory management,so,it tends to forget to close any iostream we'd opened or to flush memory to disk.That's a terrible thing to do though.

# git - “git status”正在显示不应该显示的文件

> ID：15930561
> 
> 赞同：0
> 
> 时间：2013-04-10T15:48:04.290
> 
> 标签：git, msysgit

在过去的几周里，我遇到了两次同样的问题，git 似乎只是出于某种原因假发并列出`git status`了不应列为已更改/新/等的文件...

版本：`git version 1.8.1.msysgit.1`

截屏：
![在此处输入图像描述](https://i.stack.imgur.com/L3kl0.png)

这是我的`.gitignore`文件的内容：

```
#ignore thumbnails created by windows
Thumbs.db
#Ignore files build by Visual Studio
*.obj
*.exe
*.pdb
*.user
*.aps
*.pch
*.vspscc
*_i.c
*_p.c
*.ncb
*.suo
*.tlb
*.tlh
*.bak
*.cache
*.ilk
*.log
[Bb]in
[Dd]ebug*/
*.lib
*.sbr
obj/
[Rr]elease*/
_ReSharper*/
[Tt]est[Rr]esult*
*.sln
.gitignore
.orig
*.psess
#word temp files
~*.docx
*.tmp 
```

屏幕截图中绿色的所有内容都不正确。首先，所有 .resx 文件都不是新文件，它们在我开始更改之前就已经存在。其次，最后一个绿色文件（.cache）不仅在我的`.gitignore`文件中，目录（obj/）也是如此。

我所在的分支是昨天刚刚创建的，这里是它以绿色显示的文件之一：
![在此处输入图像描述](https://i.stack.imgur.com/eqGXU.png)

如您所见，它的日期为 2/19/13，我今天刚刚对这个项目进行了更改。

红色的一切实际上都是我改变的。我只更改了项目中的一个文件（红色的底部文件），所有“不正确”的新文件都来自然后构建。

有谁知道发生了什么？

更新：执行`git reset`修复了问题。这是输出：

```
Unstaged changes after reset:
D       Correspondence/STAR/Participants/Claim - Framework/Word/C_PAR_ClmFrmWrk_SuppRptFrmEC1.docx
D       Correspondence/STAR/Participants/Claim - Framework/Word/C_PAR_ClmFrmWrk_SuppRptFrmEC1_DT.docx
D       Correspondence/STAR/Participants/Claim - Framework/Word/C_PAR_ClmFrmWrk_SuppRptFrmEC2.docx
D       Correspondence/STAR/Participants/Claim - Framework/Word/C_PAR_ClmFrmWrk_SuppRptFrmEC2_DT.docx
D       Correspondence/STAR/Participants/Claim - Framework/Word/C_PAR_ClmFrmWrk_SuppRptFrmEP1.docx
D       Correspondence/STAR/Participants/Claim - Framework/Word/C_PAR_ClmFrmWrk_SuppRptFrmEP1_DT.docx
D       Correspondence/STAR/Participants/Claim - Framework/Word/C_PAR_ClmFrmWrk_SuppRptFrmEP2.docx
D       Correspondence/STAR/Participants/Claim - Framework/Word/C_PAR_ClmFrmWrk_SuppRptFrmEP2_DT.docx
D       SQL/STAR/Stored Procedures/s_ClmTrackingRecordSEL_ResendSuppByTrackingRecordID.sql
M       Shared Objects/Components/TRSEnums/TRSEnums.vb
M       Shared Objects/Components/TrsPartFilterScreens/VB Code/ReportRequest.Partial7.Miscellaneous.vb 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:53:04.887

经过多次测试，我发现了问题所在：`Git Source Control Provider`. 如果我构建了以前没有在我的分支中构建的任何项目，问题就会再次发生。例如，我构建了我们的电子邮件对象： ![在此处输入图像描述](https://i.stack.imgur.com/RtLL0.png)

那么如何解决呢？删除`"Git Source Control Provider"`，问题得到纠正。不幸的是，现在每次我打开一个项目时，我都会得到“找不到与此解决方案相关的源代码控制提供程序”，而我没有得到 pre `update 2`。不幸的是，我认为无论如何都不需要卸载`update 2`。

如果您遇到同样的问题，只需执行 a来解决问题，但如果您不希望它再次发生，则`git reset`必须删除它。`"Git Source Control Provider"`

# c# - 如何使用实体框架制作查询字符串

> ID：15930565
> 
> 赞同：2
> 
> 时间：2013-04-10T15:48:16.350
> 
> 标签：c#, entity-framework

我有一个复杂的查询，它可以根据接收到的参数而增长或变小。例子：

```
public string CreateQuery(string[]  fields)
{
    var query = "SELECT student_name,student_last_name FROM students";

    if(fields[0]!= "")
    {
        query += " WHERE studient_id='"+fields[0]+"'";
    }

    if(fields[1] != null)
    {
        //them....
    }
    //and so on

    return query;
} 
```

所以我需要像 webmatrix 一样执行那个查询

```
ViewBag.StudentInf = db.Query("Query string here..."); 
```

那么，如何使用实体框架执行查询字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:56:08.930

你真的不应该这样做。你冒着有人对你执行 SQL 注入攻击的风险。

您可以执行此[答案](https://stackoverflow.com/questions/10323066/linq-to-sql-multiple-conditional-where-clauses)中推荐的操作。

但是，如果您真的想这样做，可以执行以下操作：

```
using (System.Data.Common.DbCommand cmd = db.Database.Connection.CreateCommand())
{
    cmd.CommandText = "SELECT *...";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:54:54.707

For .NET Framework version 4 and above: use [ObjectContext.ExecuteStoreCommand()](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.executestorecommand.aspx)

A tutorial [here](http://msdn.microsoft.com/en-us/data/jj592907.aspx)

Or try this function

```
static void ExecuteSql(ObjectContext c, string sql)
{
    var entityConnection = (System.Data.EntityClient.EntityConnection)c.Connection;
    DbConnection conn = entityConnection.StoreConnection;    
    ConnectionState initialState = conn.State;

    try
    {
        if (initialState != ConnectionState.Open)
            conn.Open();  

        using (DbCommand cmd = conn.CreateCommand())
        {
            cmd.CommandText = sql;
            cmd.ExecuteNonQuery();
        }
    }
    finally
    {
        if (initialState != ConnectionState.Open)
            conn.Close(); 
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:08:05.380

如果您的问题是关于使用 Linq to Entities 构建动态查询，您至少可以使用[Dynamic Linq](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)。

# .net-4.0 - 强制网页超时

> ID：15930568
> 
> 赞同：0
> 
> 时间：2013-04-10T15:48:20.960
> 
> 标签：.net-4.0, session-timeout

我有一个网页，它调用一个返回一些 XML 的外部 Web 服务 - 像这样调用它：

```
Resp = Req.GetResponse() *As HttpWebResponse 
```

我对此进行了尝试以捕获应用程序错误，例如超时。为了测试这一点，我在 web.config 中输入了以下内容：

```
 <system.web>
    <sessionState timeout="1" /> 
```

然而这不起作用——我认为这是 1 分钟，而不是我想要的 1 秒。我也尝试将其设置为 t0 01。

由于我在 VS 2010 中以调试模式运行，因此我没有 IIS 设置可乱。

如何测试异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:52:51.863

sessionState 超时不是您要查找的内容，我会考虑在 HttpWebRequest.Timout 方法上设置超时。

```
Req.Timeout = 1;  //Milliseconds
Resp = Req.GetResponse() *As HttpWebResponse 
```

# python - 从linux运行python脚本中的函数运行整个脚本

> ID：15930579
> 
> 赞同：0
> 
> 时间：2013-04-10T15:48:46.407
> 
> 标签：python, linux

```
def parseCommand():
    args = None
    if len (sys.argv) < 2:
        print('no command entered')
        return

    command = sys.argv[1]
    print ('command executed: %s' %command)
    if len(sys.argv) == 3:
        args = sys.argv[2]
    if len(sys.argv) > 3:
        args = sys.argv[2:]

    commandList = {
                'fA'              : fA(),
                'fB'              : fB(),
                }

    if args == None:
        return commandList[command]
    else:
        return commandList[command](args)

if __name__ == "__main__": 
    parseCommand() 
```

我正在从 linux 运行这个脚本。但是，当我运行 python scriptname.py fA 或 python scriptname.py fB 时，脚本似乎只是从上到下运行，同时执行两个函数当我将其更改为

```
if __name__ == "__main__": 
    fA() 
```

或者

```
if __name__ == "__main__": 
    fB() 
```

并运行 python scriptname.py frtom linux 它只执行我正在调用的函数。

谁能告诉我我的方法有什么问题？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T15:52:15.020

你创造`commandList`错了；`fA`和之后的括号`fB`正在调用函数：

```
commandList = {
            'fA'              : fA(),
            'fB'              : fB(),
            }                     ~~ <-- remove these parentheses 
```

# php - 'uksort()' 函数对数组键进行错误排序

> ID：15930583
> 
> 赞同：1
> 
> 时间：2013-04-10T15:48:59.277
> 
> 标签：php, arrays, sorting, key

我有一个数组，其键的格式为 [A1] -> [A20]、[B1] -> [B20] 等，我正在尝试使用 first 对该数组进行排序`ksort()`（以正确的顺序获取字母) 然后`uksort()`.

但是，我不知道`uksort()`应该如何编写函数，并且我的数组键以奇怪的顺序返回。有人可以看看我做错了什么并提出建议吗？谢谢。

```
function _sort_selection_keys($a, $b){

    $let_a = substr($a, 0, 1);
    $let_b = substr($b, 0, 1);
    $num_a = intval(substr($a, 1));
    $num_a = intval(substr($b, 1));

    /** Check that the first letter is the same. It should be, as the array has already been through 'ksort()', but it's worth checking any way */
    if($let_a !== $let_b) :
        return strcasecmp($a, $b);
    endif;

    if($num_a > $num_b) :
        return -1;
    elseif($num_a = $num_b) :
        return 0;
    elseif($num_a < $num_b) :
        return 1;
    endif;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:55:42.107

You could just use the ***[strnatcmp](http://php.net/manual/en/function.strnatcmp.php)*** function which will fit your needs:

```
uksort($array, 'strnatcmp'); 
```

And another solution metioned by @M8R-1jmw5r

`ksort($array, SORT_NATURAL);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:56:58.287

如果不在那里调试您的代码，您可以使用 'strnatcmp' 的内置功能[`uksort`](http://php.net/uksort)对键进行字母数字排序。

**未排序的数组代码**

```
$array = array(
    'A1' => array(),
    'A2' => array(),
    'A3' => array(),
    'A4' => array(),
    'C1' => array(),
    'B2' => array(),
    'B1' => array(),
    'D1' => array(),
    'C2' => array(),
    'B3' => array(),
    'D3' => array(),
    'D2' => array(),
);

uksort($array, 'strnatcmp');

var_dump($array); 
```

**结果**

```
array (size=12)
  'A1' => 
    array (size=0)
      empty
  'A2' => 
    array (size=0)
      empty
  'A3' => 
    array (size=0)
      empty
  'A4' => 
    array (size=0)
      empty
  'B1' => 
    array (size=0)
      empty
  'B2' => 
    array (size=0)
      empty
  'B3' => 
    array (size=0)
      empty
  'C1' => 
    array (size=0)
      empty
  'C2' => 
    array (size=0)
      empty
  'D1' => 
    array (size=0)
      empty
  'D2' => 
    array (size=0)
      empty
  'D3' => 
    array (size=0)
      empty 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T15:52:12.040

根据以下[文档`usort`](http://us1.php.net/manual/en/function.usort.php)：

> 如果认为第一个参数分别小于、等于或大于第二个参数，则比较函数必须返回一个小于、等于或大于零的整数。

也就是说，而不是返回`true`or `false`，您应该返回`$num_a - $num_b`（或进行比较并返回`-1`, `1`, or `0`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T15:54:25.143

First, I think all you need to do is change your second "$num_a" line to "$num_b". Other than that, I would simply use strnatcasecmp() on the keys instead of all the dissecting you are attempting.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T16:02:15.550

您想按*自然顺序*按键对数组进行排序：

```
ksort($array, SORT_NATURAL); 
```

见[`ksort()`](http://php.net/ksort)。

自然排序顺序为：

```
regular:  A1, A10, A11, A2, A20, A21, ... A3, ...
natural:  A1, A2, A3, ..., A10, A11, ... A20, A21 
```

# jquery-ui - jQuery UI 可选择不带选择框

> ID：15930585
> 
> 赞同：2
> 
> 时间：2013-04-10T15:49:09.207
> 
> 标签：jquery-ui, jquery-ui-selectable

在这里给出这个例子：http: [//jqueryui.com/selectable/#display-grid](http://jqueryui.com/selectable/#display-grid)我想在没有单击“n 拖动”时出现的“选择框”的情况下进行选择。即，当我单击数字 5 并拖动到数字 6 然后到 10 我得到这个：

![在此处输入图像描述](https://i.stack.imgur.com/z6FcW.jpg)

实际上我想要的是从 5 拖到 6 到 10，并且只选择它们而不选择 9。

我搜索了文档但找不到该选项，我的谷歌技能并没有给我带来任何运气，我认为这一定已经完成了，只是碰巧我无法自己掌握或找到现有的解决方案，所以这里的任何帮助表示赞赏（不是说你应该为我做研究，我只是希望有人之前处理过这个问题，这样他就可以指出我正确的方向）。

也可能是我错过了尝试使用 jquery UI 完成此任务的重点，但这是我发现的第一个适合（某种）我想要完成的示例。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T17:53:36.280

首先，您可能想要隐藏`.ui-selectable-helper`或更改 CSS：

```
.ui-selectable-helper{display:none;} 
```

接下来，执行以下操作：

```
$(function() {
    var _mousedown = false;
    $('#selectable').selectable({
        start: function(event,ui){
            _mousedown=true;
        },
        stop: function(event,ui){
            _mousedown=false;
            $('.ui-selected').removeClass('ui-selected');
            $('.selecting').addClass('ui-selected');
        },
        selecting: function(event,ui){
            if($('.ui-selecting').length == 1)
                $(ui.selecting).addClass('selecting');

            $('.ui-selecting').removeClass('ui-selecting');
            $('.selecting').addClass('ui-selecting');
        },
        unselecting: function(event,ui){
            if($(ui.unselecting).hasClass('selecting'))
                $(ui.unselecting).removeClass('selecting');
        }
    });

    $('#selectable').on('mouseenter', '.ui-selectee', function(){
        if(_mousedown)
            $(this).addClass('selecting');
    });
}); 
```

演示： http: [//jsfiddle.net/dirtyd77/7UVNS/5/](http://jsfiddle.net/dirtyd77/7UVNS/5/)（HELPER HIDDEN）

[http://jsfiddle.net/dirtyd77/7UVNS/6/](http://jsfiddle.net/dirtyd77/7UVNS/6/)（助手可见）

如果您有任何问题，请告诉我！

* * *

## ***更新：***

`.selectable()`无法做你正在寻找的东西。但是，这是我创建的东西。希望能帮助到你！

JAVASCRIPT：

```
$(function() {
    var _mousedown = false,
        _last=null;    
    $('#selectable li').mousedown(function(){
        _mousedown = true;
        $('.ui-selected').removeClass('ui-selected');
        $('#selectable li').attr('unselectable', 'on').css('user-select', 'none');
        $(this).addClass('ui-selecting');
    }).mouseup(function(){
        _mousedown=false;  
        $('.ui-selecting').addClass('ui-selected').removeClass('ui-selecting');
        $('#selectable li').removeAttr('unselectable style');
    }).mouseenter(function(){
        if(_mousedown){
            if($(this).hasClass('ui-selecting'))
                $(_last).removeClass('ui-selecting');

            $(this).addClass('ui-selecting')
        }
    }).mouseleave(function(){
        if(_mousedown){
            _last =  $(this)[0];
            $(this).addClass('ui-selecting');
        }
    });
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/7UVNS/9/](http://jsfiddle.net/dirtyd77/7UVNS/9/)

* * *

## ***更新#2：***

如果您想在移动设备上使用它，我建议您完全更改格式以避免任何可能的陷阱。以下是我将如何去做：

JAVASCRIPT：

```
$(function() {
    var _clicked = false;
    $('#btn_select').click(function(){
        _clicked = false;
        $(this).hide();
        $('#selectable li').removeAttr('unselectable style');
        $('.ui-selecting').addClass('ui-selected').removeClass('ui-selecting');
    });
    $('#selectable li').click(function(){
        if(!_clicked){
            _clicked = true;
            $('.ui-selected').removeClass('ui-selected');
            $('#selectable li').attr('unselectable', 'on').css('user-select', 'none');
            $('#btn_select').show();
        }
        if($(this).hasClass('ui-selecting')){
            $(this).removeClass('ui-selecting');
        }else{
            $(this).addClass('ui-selecting');
        }
    });
}); 
```

*注意：您可能希望 a`$('body').click()`作为 end_selection 按钮。

演示：http: [//jsfiddle.net/dirtyd77/7UVNS/13/](http://jsfiddle.net/dirtyd77/7UVNS/13/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-23T20:18:21.303

这没有回答原始问题，但它确实显示了如何访问可选小部件的帮助 div。

```
var helper = $( "#selectable" ).selectable('widget').data().uiSelectable.helper;
helper.css( { border:'none' } ); 
```

# html - 自定义复选框在 IE 7 和 IE 8 中不起作用

> ID：15930586
> 
> 赞同：0
> 
> 时间：2013-04-10T15:49:13.137
> 
> 标签：html, css

我在 HTML 上创建了自定义复选框，在 IE 9 、 IE 10 和其他最新版本的浏览器上运行良好。但是当我尝试在 IE 7 和 IE 8 上运行它时，它不起作用。见图。我所做的？请帮我！

![在此处输入图像描述](https://i.stack.imgur.com/9mFUY.png)

我的 CSS 和 HTML 代码如下

CSS

```
 .ckbox
{
    width: 25px;
    height: 25px;
}
.custom-checkbox
{
    position: relative;
    display: inline-block;
}

.custom-checkbox > .box
{
    position: relative;
    display: block;
    width: 25px;
    height: 25px;
    background-color: #FFF;
    padding: 0px;
    margin: 0px;
}

.custom-checkbox > .box > .tick
{
    position: absolute;
    left: 4px;
    top: 7px;
    width: 14px;
    height: 6px;
    border-bottom: 4px solid #000;
    border-left: 4px solid #000;
    -webkit-transform: rotate(-45deg);
    -moz-transform: rotate(-45deg);
    -o-transform: rotate(-45deg);
    -ms-transform: rotate(-45deg);
    transform: rotate(-45deg);
    display: none;
}

.custom-checkbox > input:checked + .box > .tick
{
    display: block;
}

.custom-checkbox > input
{
    position: absolute;
    outline: none;
    left: 0;
    top: 0;
    padding: 0;
    width: 25px;
    height: 25px;
    border: none;
    margin: 0;
    opacity: 0;
    z-index: 1;
} 
```

HTML

```
<table style="background-color: #E5E5E5;">
        <tr>
            <td>
                <span class="custom-checkbox">
                    <input id="fileItem" name="fileItem" type="checkbox" class="ckbox" value="1" checked="checked" />
                    <span class="box"><span class="tick"></span></span>
                </span>
                <input id="fileId" name="fileId" type="hidden" value="" />
            </td>
            <td>
                <label for="fileItem" title="">
                    Check</label>
            </td>
        </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:25:45.100

正如 Adrift 和 Matthew 所指出的，您包含的许多样式不适用于 ie7 和 8。在我看来，对于大多数应用程序来说这很好，因为它们仍然可以工作，而且人们无论如何都不应该使用 ie7 和 8 .

但是，如果您需要它在 ie 中工作，您可以使用 javascript 方法：[http ://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/](http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/)

# ruby-on-rails - 使用表单运行 rake 任务

> ID：15930587
> 
> 赞同：1
> 
> 时间：2013-04-10T15:49:13.260
> 
> 标签：ruby-on-rails

我创建了一个接受参数的 rake 任务。我可以在命令行中使用`rake my_task["args"]`.

我现在正在尝试创建一个带有文本字段和按钮的表单。单击按钮时，rake 任务应以文本字段的内容作为任务的参数运行。

如何让 aa rails 表单（我相信它与任何资源无关）以这种方式运行，以及如何在单击按钮时运行 rake 任务？

我不确定去哪里，所以如果你能指定说明应该在哪里，这对我来说将是一个巨大的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:17:41.013

rake 任务是一个服务器脚本，因此您需要遵循的模式如下所示。

1）用户请求具有文本字段和提交按钮的表单（控制器#new）

2) 用户在向您的 Rails 应用程序发出请求的表单上点击提交 (controller#create)

3) 控制器操作使用“系统”方法运行 rake 任务，并传递表单中的参数：

```
class MyController  < ApplicationController
  def new
  end

  def create
    system "rake my_task", params[:args]
  end
end 
```

在您的新视图中，您将使用 form_tag 创建表单，为您的参数创建一个 text_field_tag，为您的按钮创建一个 submit_tag，如下所示

```
<%= form_tag my_rake_task_path, :method => 'post' do %>
   <%= text_field_tag :args %>
   <%= submit_tag "Run Task" %>
<% end %> 
```

如果您仔细观察，您会发现表单标签正在使用一种名为 my_rake_task_path 的方法。那是一个命名的路由助手。要创建它，您必须将条目添加到您的路线文件中，例如

```
get 'rake_task', to: 'mycontroller#new'
post 'rake_task', to: 'mycontroller#create', :as => 'my_rake_task' 
```

如果您想了解有关在控制器中运行 rake 任务的更多信息，请查看此 railscast [http://railscasts.com/episodes/127-rake-in-background](http://railscasts.com/episodes/127-rake-in-background)

# java - 不知道如何迭代提供的“项目”

> ID：15930594
> 
> 赞同：4
> 
> 时间：2013-04-10T15:49:40.700
> 
> 标签：java, jsp, jsf, jstl, jsf-1.2

我在我的应用程序中使用 JSF 1.2。我正在尝试遍历在我的支持 bean 中定义的字符串数组，如下所示：

```
private String[] services; 
```

下面是 faces-config 文件中的托管 bean 条目：

```
<managed-bean>     
    <managed-bean-name>registrationBean</managed-bean-name>
    <managed-bean-class>com.bean.RegistrationBean</managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>        
</managed-bean> 
```

我正在尝试遍历用户选择的服务并将其显示在我的屏幕上。下面是我使用的代码：

```
<c:forEach items="#{registrationBean.services}" var="service">
    <c:out value="${service}"></c:out>
</c:forEach> 
```

但我收到错误：

```
Don't know how to iterate over supplied "items" in <c:forEach> 
```

请让我知道如何解决这个问题。

**编辑**

如果我更改`String[]`为，`List<String>`那么我会收到此异常：

```
java.lang.RuntimeException: wrapped Exception: java.lang.UnsupportedOperationException
com.icesoft.faces.webapp.http.servlet.MainServlet.service(MainServlet.java:156)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
com.icesoft.faces.webapp.xmlhttp.BlockingServlet.service(BlockingServlet.java:56) 
```

下面是Backing Bean的初始化：

```
private List<String> services;
public RegistrationBean() {
    this.services = new ArrayList<String>();
} 
```

面孔-config.xml：

```
<?xml version='1.0' encoding='UTF-8'?> 
```

```
<managed-bean>     
    <managed-bean-name>registrationBean</managed-bean-name>
    <managed-bean-class>com.bean.RegistrationBean</managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>        
</managed-bean>   

<navigation-rule>
    <description>This will navigate to the Success screen.</description>
    <from-view-id>/registration.jspx</from-view-id>
    <navigation-case>
        <from-outcome>success</from-outcome>
        <to-view-id>/success.jspx</to-view-id>
    </navigation-case>
</navigation-rule> 
```

Web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">

<description>
    ICEfaces Address Demo
</description>

<context-param>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>server</param-value>
</context-param>

<context-param>
    <param-name>javax.faces.application.CONFIG_FILES</param-name>
    <param-value>/WEB-INF/faces-config.xml</param-value>
</context-param>

<context-param>
    <param-name>com.sun.faces.validateXml</param-name>
    <param-value>true</param-value>
</context-param>
<context-param>
    <param-name>com.icesoft.faces.synchronousUpdate</param-name>
    <param-value>true</param-value>
</context-param>

<context-param>
  <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
  <param-value>.jspx</param-value>
</context-param>

<listener>
    <listener-class>com.icesoft.faces.util.event.servlet.ContextEventRepeater</listener-class>
</listener>

<!-- Faces Servlet -->
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup> 1 </load-on-startup>
</servlet>

<servlet>
    <servlet-name>Persistent Faces Servlet</servlet-name>
    <servlet-class>com.icesoft.faces.webapp.xmlhttp.PersistentFacesServlet</servlet-class>
    <load-on-startup> 1 </load-on-startup>
</servlet>

<servlet>
    <servlet-name>Blocking Servlet</servlet-name>
    <servlet-class>com.icesoft.faces.webapp.xmlhttp.BlockingServlet</servlet-class>
    <load-on-startup> 1 </load-on-startup>
</servlet>

<!-- Faces Servlet Mapping -->
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.faces</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jspx</url-pattern>
</servlet-mapping>

<!-- Persistent Faces Servlet Mapping -->
<servlet-mapping>
    <servlet-name>Persistent Faces Servlet</servlet-name>
    <url-pattern>*.iface</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>Persistent Faces Servlet</servlet-name>
    <url-pattern>/xmlhttp/*</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>Blocking Servlet</servlet-name>
    <url-pattern>/block/*</url-pattern>
</servlet-mapping>

<session-config>
  <session-timeout>30</session-timeout>
</session-config>

<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>
</web-app> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T16:55:35.983

如果您使用的是 JSF 1.2，我无法解释为什么会出现此问题。您的项目或环境很可能被重复或冲突的库弄乱了。或者您`faces-config.xml`的声明符合 JSF 1.1 而不是 JSF 1.2。或者也许 ICEfaces 以某种方式发挥了作用，但我无法确定这一点，因为我从未真正使用过那个库。

无论如何，当您实际使用 JSF 1.1 时，我可以具体解释这个问题。然后`#{}`JSP 标记中根本不支持 并且`<c:forEach items>`会产生这个错误。

> 不知道如何迭代 <c:forEach> 中提供的“项目”

然后，您应该`${}`一直在 JSP 标记中使用。但是，`${}`当 JSF 托管 bean 尚不存在于范围内时，它们不会自动创建它们。在这种情况下，这`<c:forEach>`将有效地获得一个空集合并且什么都不渲染（但因此不会产生您所面临的错误！）。

因此，您需要确保在`<c:forEach>`输入之前已经自动创建了 JSF 托管 bean。您可以通过使用完整的 JSF 组件来做到这一点，比如`<h:panelGroup rendered="#{not empty bean.list}">`包装标签，或者`<h:outputText value="#{bean.text}">`标签之前的 a。

例如

```
<h:someComponent someAttribute="#{registrationBean.something}" />
<c:forEach items="${registrationBean.services}" var="service">
    <c:out value="${service}" />
</c:forEach> 
```

一个完全值得的 JSF 1.x 替代方案是使用[Tomahawk's](http://myfaces.apache.org/tomahawk/) `<t:dataList>`而不是 JSTL `<c:forEach>`。

```
<t:dataList value="#{registrationBean.services}" var="service">
    <h:outputText value="#{service}" />
</t:dataList> 
```

# asp.net - 为什么我的 html5 标签没有显示在 Live Web Preview 中？

> ID：15930595
> 
> 赞同：0
> 
> 时间：2013-04-10T15:49:47.237
> 
> 标签：asp.net, visual-studio-2010, html, forms

我在一个 asp.net web 项目中将这个（直接取自一本书，“HTML5 24-Hour Trainer”）添加到 Default.aspx：

```
<form method="post" action="">
        <fieldset>
            <legend>Personal details</legend>
            <p>
                <label for="Name"> Name:</label>
                <input type="text" name="name" id="Name"/>
            </p>
            <p>
                <label for="Email"> Email:</label>
                <input type="text" name="email" id="Email"/>
            </p>
            <p>
                <label for="Tel"> Telephone:</label>
                <input type="text" name="tel" id="Tel"/>
            </p>
        </fieldset>
        <p>
            <input type="submit" value="Submit"/>
        </p>
    </form> 
```

标签（“姓名：”、“电子邮件：”和“电话：”）不会显示在文本输入控件（编辑框）旁边 - 或者其他任何地方（我可见）如果我选择“Live Web”预览”（Ctrl+Alt+Enter）。但是，如果我选择在浏览器中查看 (Ctrl+Shift+W)，我可以看到标签。

如果我在我的三个选项（谷歌浏览器、内部网络浏览器或 Internet Explorer）中的任何一个中查看页面，它都可以正常工作；只有*实时*网络预览被破坏。

所以问题是，为什么“实时网络预览”标签不可见？但我想我会避免那个观看选项；没什么大不了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:55:20.480

Tried the exact same thing and it works as expected. I guess it's a local issue. Need more info.

# ruby-on-rails - POST提交时的Heroku SocketError

> ID：15930600
> 
> 赞同：0
> 
> 时间：2013-04-10T15:49:59.020
> 
> 标签：ruby-on-rails, heroku, internal-server-error

提交表单以创建简单对象时，出现 SocketError：

```
Completed 500 Internal Server Error in 526ms
SocketError (getaddrinfo: Name or service not known):
app/controllers/posts_controller.rb:58:in `block in create'
app/controllers/posts_controller.rb:57:in `create' 
```

我已经用 Google 搜索并通过 StackOverflow 进行了搜索，其他所有有类似错误的人似乎都在发送电子邮件。我不是——这只是一个用于创建属于用户的简单博客文章的表单。

此应用程序正在使用 SendGrid（尽管此特定功能不使用它），但是，即使在删除 SendGrid 之后，SocketError 仍然存在。

这是来自控制器的代码，在错误消息中引用：

```
 # POST /posts
  # POST /posts.json
  def create
    @user = User.find(params[:user_id])
    @post = @user.posts.new(params[:post])

    respond_to do |format|
      if @post.save
        format.html { redirect_to user_posts_path, notice: 'Post was successfully created.' }
        format.json { render json: @post, status: :created, location: @post }
      else
        format.html { render action: "new" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end 
```

此外，其他提到此错误的帖子似乎在主机声明/URL/URI 和生产环境文件中的怪异配置方面存在问题。我似乎没有这些问题，而且我似乎无法确定这是我的应用程序的问题还是 Heroku 的主机配置问题。我倾向于相信这是我的错误。

我一直在努力解决这个问题，但没有运气。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:04:46.567

邮件是否在 post#save 上发送？ActionMailer 应配置为在 Cedar 堆栈上手动使用 sendgrid：

[https://devcenter.heroku.com/articles/sendgrid#actionmailer](https://devcenter.heroku.com/articles/sendgrid#actionmailer)

# intellij-idea - 如何更改 IDEA 建议的合理默认值的顺序？

> ID：15930607
> 
> 赞同：1
> 
> 时间：2013-04-10T15:50:25.390
> 
> 标签：intellij-idea

使用 IntelliJ 12.1 Ultimate，当我键入时`pub`，我希望“public”成为第一个合理的默认值，而不是

![在此处输入图像描述](https://i.stack.imgur.com/v3ZWC.png)

如何更改建议的顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:53:32.650

IntelliJ IDEA 会跟踪您最常选择的建议并自动确定它们的优先级。没有用于手动重新排序完成变体的 UI 或设置。

# delphi - CopyMemory 导致 Win8 上的访问冲突

> ID：15930608
> 
> 赞同：3
> 
> 时间：2013-04-10T15:50:40.140
> 
> 标签：delphi, 64-bit

我有一段代码使用 Delphi XE3 编译成 64 位 COM DLL。

```
function TRPMFileReadStream.Read(var Buffer; const Count: Longint): Longint;
begin
  if ((Self.FPosition >= 0) and (Count > 0)) then
  begin
    Result := Self.FSize - Self.FPosition;
    if ((Result > 0) and (Result >= Count)) then
    begin
      if (Result > Count) then
      begin
        Result := Count;
      end;
      CopyMemory(
        Pointer(@Buffer),
        Pointer(LongWord(Self.FMemory) + Self.FPosition),
        Result
      );
      Inc(Self.FPosition, Result);
      Exit;
    end;
  end;
  Result := 0;
end; 
```

在 Win7-64bit 上，上述工作正常。但是在 Win8-64bit 上，相同的 DLL 文件会在 CopyMemory 上引发访问冲突。CopyMemory 在 WinAPI.windows 单元中实现。

就像这样。

```
procedure CopyMemory(Destination: Pointer; Source: Pointer; Length: NativeUInt);
begin
  Move(Source^, Destination^, Length);
end; 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T15:52:35.557

在此刻：

```
Pointer(LongWord(Self.FMemory) + Self.FPosition) 
```

您将 64 位指针截断为 32 位。因此访问冲突。相反，您需要

```
Pointer(NativeUInt(Self.FMemory) + Self.FPosition) 
```

您的代码在 Win7 上同样损坏，但不知何故，您很不幸，只使用地址 < 4GB 的指针运行此代码。

您应该运行一些自上而下的内存分配测试以清除任何其他此类错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T19:39:40.713

大卫指出了你问题的根源——你的指针类型转换对于 64 位是错误的。更好的解决方案是使用指针算法，让编译器为您处理指针大小：

```
CopyMemory(
  @Buffer,
  PByte(Self.FMemory) + Self.FPosition,
  Result
); 
```

或者：

```
Move(
  (PByte(Self.FMemory) + Self.FPosition)^,
  Buffer,
  Result
); 
```

# sql - 获取昨天的日期，如果星期一获取 SQL 服务器的周末范围

> ID：15930611
> 
> 赞同：-1
> 
> 时间：2013-04-10T15:50:48.673
> 
> 标签：sql, sql-server, sql-server-2008

我如何获得昨天的日期，如果当前日期是星期一，我需要星期日、星期六和星期五。[这里](https://stackoverflow.com/questions/15907162/get-yesterdays-date-and-if-monday-get-weekend-range)已经要求ms 访问。我现在需要这个用于 SQL 服务器。我该怎么办？

将创建一个内联视图，该视图将在 SQL 中返回上一个日期它将根据当前日期返回 1 到 3 行。

如果当前日期是星期一 返回：

```
Sundays date
Saturdays date
Fridays date 
```

*   如果当前日期是星期二，则返回：星期一日期
*   如果当前日期是星期三，则返回：星期二日期
*   如果当前日期是星期四，则返回：星期三日期
*   如果当前日期是星期五，则返回：星期四日期
*   如果当前日期是星期六，则返回：星期五日期
*   如果当前日期是星期日，则返回：星期六日期

我希望这有助于更清楚地解释我想要做的事情。

样本选择查询

```
--get previous date
select * from [Purchase Orders] where MyDate in (previous date(s)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:33:19.683

不过，这个问题并不完全清楚。但是你可以在类似的线路上做一些事情。
使用`DATEPART`和`DATEADD`

```
DECLARE @TodaysDate DATETIME
SET @TodaysDate = '2013-04-10'

SELECT CASE 
     WHEN DATEPART (DW, DATEADD (DD, -1, @TodaysDate )) IN (1, 6, 7) 
     THEN 'WeekEnd' ELSE 'WeekDay' 
     END D 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:01:45.777

使用您链接到的查询，您可以尝试以下代码：

```
SELECT * 
  FROM [Purchase Order] 
 WHERE MyDate >= CASE 
                     WHEN DATENAME(dw, CONVERT(CHAR(8), GETDATE() , 112)) LIKE 'Monday' THEN CONVERT(CHAR(8), DATEADD(dd, -3, GETDATE()), 112)
                     ELSE CONVERT(CHAR(8), DATEADD(dd, -1, GETDATE()), 112)
                 END 
   AND MyDate < CONVERT(CHAR(8),GETDATE(),112) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-19T14:26:21.390

您可以使用下表函数：

```
CREATE FUNCTION dbo.ufnPreviousDay (@suppliedDate DATE)
RETURNS @PreviousDates TABLE (PreviousDate DATE)
AS
BEGIN

    INSERT INTO @PreviousDates (
        PreviousDate)
    SELECT
        PreviousDate = DATEADD(DAY, -1, @suppliedDate)

    IF DATEPART(WEEKDAY, DATEADD(DAY, @@DATEFIRST - 1, @suppliedDate)) = 1 -- If Monday
    BEGIN

        INSERT INTO @PreviousDates (
            PreviousDate)
        SELECT
            PreviousDate = DATEADD(DAY, -2, @suppliedDate)
        UNION ALL
        SELECT
            PreviousDate = DATEADD(DAY, -3, @suppliedDate)

    END

    RETURN

END 
```

你可以像这样使用它：

```
SELECT
    T.*
FROM
    dbo.ufnPreviousDay('2018-03-19') AS T

/*
Result:
    2018-03-18
    2018-03-17
    2018-03-16
*/ 
```

如果你想要今天以前的日期：

```
SELECT
    T.*
FROM
    YourTable AS T
    INNER JOIN dbo.ufnPreviousDay(GETDATE()) AS M ON T.MyDate = M.PreviousDate 
```

# asp.net-mvc-4 - Asp.net MVC4，在 unitofwork 中调用 dispose()

> ID：15930612
> 
> 赞同：2
> 
> 时间：2013-04-10T15:50:50.643
> 
> 标签：asp.net-mvc-4, unit-of-work

我有一个 unitofwork 类，我认为 Dispose() 方法会被自动调用，但事实并非如此。

```
public class UnitOfWork : IDisposable
{
    private DBContext context = new DBContext();
    private GenericRepository<Users> usersRepository;
    public GenericRepository<Users> UsersRepository
    {
        get
        {
        if (this.usersRepository == null)
        {
            this.usersRepository = new GenericRepository<Users>(context);
        }
        return usersRepository;
        }
    }

    public void Save() 
    {
        context.SaveChanges();
    }

    private bool disposed = false;

    protected virtual void Dispose(bool disposing)
    {
        if (!this.disposed)
        {
        if (disposing)
        {
            Debug.WriteLine("This never be called :( ");
            context.Dispose();
        }
        }
        this.disposed = true;
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

} 
```

在许多工作单元和存储库教程中，我看不到任何调用 Dispose() 方法的代码。所有事务完成后是否需要手动调用 Dispose() 方法？

我试过这样，但它不起作用。

```
public class UserController : Controller
{
    UnitOfWork unitofwork = new UnitOfWork();

    ~UserController() {
        Debug.WriteLine("This is never called");
        unitofwork.Dispose();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:52:43.340

如果要自动调用 Dispose，则需要包装 using 语句。

```
using(var uow = new UnitOfWork()){
  ..do stuff

} 
```

在 using 语句的最后，如果一个对象有 IDisposable 接口，编译器会在生成的 finally 块中调用 Dispose 函数。否则，如果没有 using 语句，那么是的，您需要手动调用 dispose 函数。

作为对您的编辑的回应...我不确定 ~UserController() 做了什么（我从未见过这种语法？您是否尝试在构造函数中进行处理？无论如何，使用下面的示例，您将看到 Dispose 方法被调用适当地。

```
public class UserController : Controller
{
    private UnitOfWork unitofwork;

    public UserController(){
         unitofwork = new UnitofWork();
    }

    public ActionResult DoStuff(){
       var model = unitofwork.DoWork();
       unitofwork.Dispose();
       return View(model);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T20:17:39.357

Controller 类是 Disposable，在每次请求结束时销毁。有关更多信息，您可以阅读[此内容](http://www.asp.net/mvc/overview/getting-started/lifecycle-of-an-aspnet-mvc-5-application)

```
public abstract class Controller : ControllerBase, [...] IDisposable, [...] 
```

所以你可以重写他的 Dispose 方法来销毁你自己的 unitOfWork ：

```
public class HomeController : Controller
{

    private readonly UnitOfWork _unitOfWork = new UnitOfWork();

    public ActionResult Index()
    {
        var homeViewModel = new HomeViewModel {Users = _unitOfWork.UserRepository.LastUsers()};
        return View(homeViewModel);
    }

    protected override void Dispose(bool disposing)
    {
        _unitOfWork.Dispose();
        base.Dispose(disposing);
    }
} 
```

# asp.net - 使用 System.Net.Mail 发送电子邮件

> ID：15930614
> 
> 赞同：1
> 
> 时间：2013-04-10T15:50:56.630
> 
> 标签：asp.net, email

我正在尝试通过执行以下操作从 admin@bitcoindk.dk 向 hejmeddig@gmail.com 发送邮件：

```
 MailMessage mailObj = new MailMessage();
    mailObj.From = new MailAddress("admin@bit.dk");
    mailObj.To.Add("hejmeddig@gmail.com");
    mailObj.Body = "HEJ";
    mailObj.Subject = "HEJ";

    SmtpClient SMTPServer = new SmtpClient();
    SMTPServer.Send(mailObj); 
```

在我的 web.config 中，我有这个：

```
 <system.net>
    <mailSettings>
      <smtp from="admin@bitcoindk.dk">
        <network host="mail.bitcoindk.dk" port="25" userName="admin@bitcoindk.dk" password="password"  />
      </smtp>
    </mailSettings>
  </system.net> 
```

当我发送邮件时，我得到了这个异常

```
Transaction failed. The server response was: 5.7.1 <hejmeddig@gmail.com>: Relay access denied 
```

如果我向 admin@bit.dk 发送邮件，它工作正常。但是，如果我发送到 hejmeddig@gmail.com 或任何其他邮件，我就会得到例外。我正在使用 Uno Euro 的邮件服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:06:40.410

这是我用来发送电子邮件的。看看这样的事情是否有助于解决您的问题。

```
SmtpSection cfg = NetSectionGroup.GetSectionGroup(WebConfigurationManager.OpenWebConfiguration("~/web.config")).MailSettings.Smtp;
MailMessage objMessage = new MailMessage();
objMessage.IsBodyHtml = true;
objMessage.From = new MailAddress(cfg.From);
objMessage.Subject = "Some Subject";
objMessage.Body = sb.ToString();
objMessage.To.Add(new MailAddress("google@gmail.com"));
SmtpClient client = new SmtpClient(cfg.Network.Host);
client.Send(objMessage); 
```

网页配置

```
<mailSettings>
    <smtp from="fromemail@mydomain.com">
         <network host="mail.mydomain.com" port="25" userName="mydomain.com" password="myPassword" />
    </smtp>
</mailSettings> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:17:14.933

我使用了错误的外发邮件服务器。

# java - 如何使用空布局将 JScrollPane 添加到 JTabbedPane 上？

> ID：15930621
> 
> 赞同：2
> 
> 时间：2013-04-10T15:51:19.220
> 
> 标签：java, swing, jframe, jscrollpane, jtabbedpane

我想在我的选项卡上实现一个滚动条。然而，什么都没有显示，也没有例外。

我想我需要一个：

> scrollPane.setViewportView(scrollPanel);

但它也没有奏效。

我想知道在将 Jscrollpane 添加到 JTab 时如何在不使用显式框架的情况下将其设置为可见。如果我使用框架并将其添加到框架上，它会创建一个新窗口。但是，我假设框架看起来是如何构建的，这使一切变得复杂。

```
import java.awt.*;
import javax.swing.*;

public class Test extends JFrame {

    private     JTabbedPane tabbedPane;
    private     JPanel      panel; // Page where I want JScrollPane intisialized

    public Test()
    {
        setTitle( "Program" );
        setSize( 400, 200 ); // I want the JScrollPane to extend to 400 vertically

        JPanel topPanel = new JPanel();
        topPanel.setLayout( new BorderLayout() );
        getContentPane().add( topPanel );

        // Create the tab pages
        createPage1();

        tabbedPane = new JTabbedPane();
        tabbedPane.addTab( "Welcome", panel );
        topPanel.add( tabbedPane, BorderLayout.CENTER );    
    }

    public void createPage1()
    {
        panel = new JPanel();
        panel.setLayout( null ); // sets layout to null

////////////////////////
JPanel scrollPanel = new JPanel();
scrollPanel.setLayout(null);
scrollPanel.setPreferredSize(new Dimension(400,400));
///////////////////////

        panel.add(scrollPanel);
        scrollPanel.setVisible (true);

    }

    public static void main( String args[] )
    {
        // Create an instance of the test application
        Test mainFrame  = new Test();
        mainFrame.setVisible( true );
    }
} 
```

如果您有任何问题，请不要犹豫。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T16:00:15.597

你想要的是使用一个[`JScrollPane`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JScrollPane.html). 将方法更改为`createPage1()`如下所示：

```
public void createPage1()
{
    panel = new JPanel();
    panel.setLayout( new BorderLayout() );

    ////////////////////////
    JScrollPane scrollPanel = new JScrollPane();
    scrollPanel.setViewportView(new JLabel("hellossssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss"));
    scrollPanel.setPreferredSize(new Dimension(400,400));
    ///////////////////////

    panel.add(scrollPanel,BorderLayout.CENTER);
} 
```

你会看到一个滚动条。请注意，此更改包含四件事：

1.  将`null`布局调用替换为`BorderLayout`
2.  做一个`JScrollPane`而不是一个`JPanel`
3.  出于演示目的在窗格中添加一些内容
4.  删除不必要的`setVisible(true)`电话。

# applet - org.codehaus.groovy.runtime.metaclass.MissingPropertyExceptionNoStack：没有这样的属性：resourceResolver for class：griffon.swing.SwingApplet

> ID：15930622
> 
> 赞同：0
> 
> 时间：2013-04-10T15:51:27.513
> 
> 标签：applet, griffon

当我将它打包到小程序时，我在浏览器中运行 griffon 小程序时遇到问题。当浏览器尝试执行我的小程序时发生此错误：-

**org.codehaus.groovy.runtime.metaclass.MissingPropertyExceptionNoStack：没有这样的属性：resourceResolver for class：griffon.swing.SwingApplet**

我的html页面是这样的：-

```
<script src="http://java.com/js/deployJava.js"></script>
<script>
    var attributes = {id: 'Mocha',
                      codebase:'http://localhost:8080/testapplet/applet',
                      code:'griffon.swing.SwingApplet',
                      archive:'griffon-swing-runtime-1.2.0.jar,griffon-rt-1.2.0.jar,groovy-all-2.0.6.jar,jcl-over-slf4j-1.7.2.jar,jul-to-slf4j-1.7.2.jar,log4j-1.2.17.jar,mocha.jar,slf4j-api-1.7.2.jar,slf4j-log4j12-1.7.2.jar',
                      width:'320', height:'240'} ;
    var parameters = {fontSize:16,
                      java_arguments: "-Djnlp.packEnabled=false",
                      //jnlp_href:'http://localhost:8080/testapplet/applet/applet.jnlp',
                      draggable:'true',
                      image:'griffon.png',
                      boxmessage:'Loading Mocha',
                      boxbgcolor:'#FFFFFF', boxfgcolor:'#000000',
                      codebase_lookup: 'false'} ;
    var version = '1.5.0' ;
    deployJava.runApplet(attributes, parameters, version);
</script> 
```

我的 applet.jnlp :-

```
<jnlp
    version="0.1"
    codebase="http://localhost:8080/testapplet/applet"
    href="applet.jnlp"
>
    <information>
        <title>mocha 0.1</title>
        <vendor>cipon</vendor>
        <homepage href="http://localhost:8080/testapplet"/>
        <!--fallback description-->
        <description>mocha 0.1</description>
        <description kind="one-line">mocha 0.1</description>
        <description kind="short">mocha 0.1</description>
        <description kind="tooltip">mocha 0.1</description>
        <!-- default icon -->
        <icon href="griffon-icon-64x64.png" kind="default" width="64" height="64"/>
        <!-- icon used for splash screen -->
        <icon href="griffon.png" kind="splash" width="391" height="123"/>
        <!-- icon used in selected -->
        <icon href="griffon-icon-64x64.png" kind="selected" width="64" height="64"/>
        <!-- icon used on disabled -->
        <icon href="griffon-icon-64x64.png" kind="disabled" width="64" height="64"/>
        <!-- icon used on rollover -->
        <icon href="griffon-icon-64x64.png" kind="rollover" width="64" height="64"/>
        <!-- icon used on shortcut -->
        <icon href="griffon-icon-64x64.png" kind="shortcut" width="64" height="64"/>
<!-- to create shortcuts, uncomment this
        <shortcut online="true">
            <desktop/>
            <menu submenu="Mocha"/>
        </shortcut>
-->
        <offline-allowed/>
    </information>
    <security>
        <all-permissions/>
        <!--<j2ee-application-client-permissions/>-->
    </security>
    <resources>
        <property name="griffon.runmode" value="applet"/>
        <property name="jnlp.packEnabled" value="true"/>
        <j2se version="1.5+" />
        <!-- auto-added jars follow, griffon-rt, app, and groovy -->
        <jar href='griffon-swing-runtime-1.2.0.jar' main='true'/>
        <jar href='griffon-rt-1.2.0.jar'/>
        <jar href='groovy-all-2.0.6.jar'/>
        <jar href='jcl-over-slf4j-1.7.2.jar'/>
        <jar href='jul-to-slf4j-1.7.2.jar'/>
        <jar href='log4j-1.2.17.jar'/>
        <jar href='mocha.jar' main='false' />
        <jar href='slf4j-api-1.7.2.jar'/>
        <jar href='slf4j-log4j12-1.7.2.jar'/>
        <!-- Add all extra jars below here, or the app may break -->

    </resources>

  <applet-desc
      documentbase="http://localhost:8080/testapplet/applet"
      name="MochaApplet"
      main-class="griffon.swing.SwingApplet"
      width="320"
      height="240">
      <!-- params are ignored when referenced from web page for 6u10 -->
    <!--<param name="key1" value="value1"/>-->
    <!--<param name="key2" value="value2"/>-->

  </applet-desc>
</jnlp> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T14:08:40.643

该问题已确定并修复，请参阅[https://jira.codehaus.org/browse/GRIFFON-641](https://jira.codehaus.org/browse/GRIFFON-641)了解更多信息。事实证明，这`griffon.swing.AbstractSwingApplet`并没有`resourceResolver`按应有的方式公开。`swing`该插件的1.3.1 版本修复了该问题。

# ios - 在 iOS 应用程序中实施 OAuth 1.0

> ID：15930628
> 
> 赞同：8
> 
> 时间：2013-04-10T15:51:32.947
> 
> 标签：ios, objective-c, api, oauth

我一整天都在为此头疼。

我希望将我的 iOS 应用程序与 Withings api 集成。它使用 OAuth 1.0，我似乎无法完全理解如何实现它。

我一直在下载多个 OAuth 框架（[MPOAuth](https://github.com/thekarladam/MPOAuth)、[gtm-oauth](https://github.com/jdg/gtm-oauth)、[ssoauthkit](https://github.com/soffes/ssoauthkit)），但无法完全弄清楚我应该做什么。

我搜索了很多，也在堆栈溢出中寻找关于如何实施 OAuth 1.0 以及特别是与 Withings 集成但没有成功的良好参考。

请解释将 iOS 应用程序与需要 OAuth 1.0 的 api 集成的流程。代码示例将非常有帮助。建议的第 3 方框架也不错。

澄清一下，我完全理解 OAuth 1.0 原则，只是在我的应用程序中实际实现它时遇到了问题。

我认为一个包含代码示例和良好参考的详尽答案对很多人来说非常有帮助，因为我找不到。如果有人在实施它方面有很好的经验，请花时间分享它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-16T11:01:06.060

[我认为TDOAuth](https://github.com/tweetdeck/TDOAuth)是最好的解决方案。它干净简单，只有一个 .h 和 .m 文件可以使用，没有复杂的示例项目..

这是 OAuth 1.0 流程：

**第 1 步 - 获取请求令牌**

```
//withings additional params
NSMutableDictionary *dict = [NSMutableDictionary dictionary];
[dict setObject:CALL_BACK_URL forKey:@"oauth_callback"];

//init request
NSURLRequest *rq = [TDOAuth URLRequestForPath:@"/request_token" GETParameters:dict scheme:@"https" host:@"oauth.withings.com/account" consumerKey:WITHINGS_OAUTH_KEY consumerSecret:WITHINGS_OAUTH_SECRET accessToken:nil tokenSecret:nil];

//fire request
NSURLResponse* response;
NSError* error = nil;
NSData* result = [NSURLConnection sendSynchronousRequest:rq  returningResponse:&response error:&error];
NSString *s = [[NSString alloc] initWithData:result encoding:NSUTF8StringEncoding];
//parse result
NSMutableDictionary *params = [NSMutableDictionary dictionary];
NSArray *split = [s componentsSeparatedByString:@"&"];
for (NSString *str in split){
    NSArray *split2 = [str componentsSeparatedByString:@"="];
    [params setObject:split2[1] forKey:split2[0]];
}

token = params[@"oauth_token"];
tokenSecret = params[@"oauth_token_secret"]; 
```

**第 2 步 - 获取授权令牌**（通过在 UIWebView 中加载请求，webViewDidFinishLoad 委托方法将处理回调..）

```
//withings additional params
NSMutableDictionary *dict2 = [NSMutableDictionary dictionary];
[dict setObject:CALL_BACK_URL forKey:@"oauth_callback"];

//init request
NSURLRequest *rq2 = [TDOAuth URLRequestForPath:@"/authorize" GETParameters:dict2 scheme:@"https" host:@"oauth.withings.com/account" consumerKey:WITHINGS_OAUTH_KEY consumerSecret:WITHINGS_OAUTH_SECRET accessToken:token tokenSecret:tokenSecret];

webView.delegate = self;
[DBLoaderHUD showDBLoaderInView:webView];
[webView loadRequest:rq2]; 
```

**按如下方式处理 webView 以启动第 3 步**（我知道 isAuthorizeCallBack 闻起来很臭，但它可以完成工作，应该重构它..）

```
- (void)webViewDidFinishLoad:(UIWebView *)aWebView
{
    [DBLoaderHUD hideDBLoaderInView:webView];

    NSString *userId = [self isAuthorizeCallBack];
    if (userId) {

        //step 3 - get access token
        [DBLoaderHUD showDBLoaderInView:self.view];
        [self getAccessTokenForUserId:userId];
    }

    //ugly patchup to fix an invalid token bug
    if ([webView.request.URL.absoluteString isEqualToString:@"http://oauth.withings.com/account/authorize?"])
    [self startOAuthFlow];
}

- (NSString *)isAuthorizeCallBack
{
    NSString *fullUrlString = webView.request.URL.absoluteString;

    if (!fullUrlString)
        return nil;

    NSArray *arr = [fullUrlString componentsSeparatedByString:@"?"];
    if (!arr || arr.count!=2)
        return nil;

    if (![arr[0] isEqualToString:CALL_BACK_URL])
        return nil;

    NSString *resultString = arr[1];
    NSArray *arr2 = [resultString componentsSeparatedByString:@"&"];
    if (!arr2 || arr2.count!=3)
        return nil;

    NSString *userCred = arr2[0];
    NSArray *arr3 = [userCred componentsSeparatedByString:@"="];
    if (!arr3 || arr3.count!=2)
        return nil;

    if (![arr3[0] isEqualToString:@"userid"])
        return nil;

    return arr3[1];
}

- (void)startOAuthFlow
{ 
    [self step1];
    [self step2];
} 
```

**最后 - 第 3 步 - 获取访问令牌**

```
- (void)getAccessTokenForUserId:(NSString *)userId
{
    //step 3 - get access token

    //withings additional params
    NSMutableDictionary *dict = [NSMutableDictionary dictionary];
    [dict setObject:CALL_BACK_URL forKey:@"oauth_callback"];
    [dict setObject:userId forKey:@"userid"];

    //init request
    NSURLRequest *rq = [TDOAuth URLRequestForPath:@"/access_token" GETParameters:dict scheme:@"https" host:@"oauth.withings.com/account" consumerKey:WITHINGS_OAUTH_KEY consumerSecret:WITHINGS_OAUTH_SECRET accessToken:token tokenSecret:tokenSecret];

    //fire request
    NSURLResponse* response;
    NSError* error = nil;
    NSData* result = [NSURLConnection sendSynchronousRequest:rq  returningResponse:&response error:&error];
    NSString *s = [[NSString alloc] initWithData:result encoding:NSUTF8StringEncoding];

    //parse result
    NSMutableDictionary *params = [NSMutableDictionary dictionary];
    NSArray *split = [s componentsSeparatedByString:@"&"];
    for (NSString *str in split){
        NSArray *split2 = [str componentsSeparatedByString:@"="];
        [params setObject:split2[1] forKey:split2[0]];
    }

    [self finishedAthourizationProcessWithUserId:userId AccessToken:params[@"oauth_token"] AccessTokenSecret:params[@"oauth_token_secret"]];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-25T14:04:09.683

我还在这里保存了请求标头

```
NSMutableDictionary *dict2 = [NSMutableDictionary dictionary];
[dict2 setObject:CALL_BACK_URL forKey:@"oauth_callback"];
NSURLRequest *rq2 = [TDOAuth URLRequestForPath:@"/authorize"
                                 GETParameters:dict2
                                        scheme:@"https"
                                          host:@"oauth.withings.com/account"
                                   consumerKey:WITHINGS_OAUTH_KEY
                                consumerSecret:WITHINGS_OAUTH_SECRET
                                   accessToken:self.token
                                   tokenSecret:self.tokenSecret];
headers = rq2.allHTTPHeaderFields; 
```

在回调方法中，我将向请求添加缺少的参数。通过这样做，我避免了“丑陋的补丁修复”。

```
- (BOOL)webView:(UIWebView *)wV shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{
if (![request.allHTTPHeaderFields objectForKey:@"Authorization"] &&
    [request.URL.absoluteString rangeOfString:@"acceptDelegation=true"].location == NSNotFound){
    NSMutableURLRequest *mutableCp = [request mutableCopy];
    NSLog(@"request :::%@", request);
    [mutableCp setAllHTTPHeaderFields:headers];
    dispatch_async(dispatch_get_main_queue(), ^{
        [webView loadRequest:mutableCp];
    });
    return NO;
}
return YES;
} 
```

我希望它会帮助某人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:16:46.447

我建议您检查这个项目作为参考和真正有效的 OAuth 类。它继承自另一个伟大的项目，因此您需要将两者都添加到您的项目中。检查许可证是否符合您的要求。 [https://github.com/rsieiro/RSOAuthEngine](https://github.com/rsieiro/RSOAuthEngine)

# reporting-services - 使用报表执行 Web 服务，我如何判断报表的表是否没有返回任何行？

> ID：15930629
> 
> 赞同：2
> 
> 时间：2013-04-10T15:51:38.877
> 
> 标签：reporting-services

我有一个使用 ReportExecution2005.asmx Web 服务的 C# 项目。在我的项目中，我遍历了一些数据库记录，将行的数据传递给报表的参数，然后呈现报表。

该报告是一个简单的、一个数据集、一个表格报告，我最终将其导出到 Excel。

当我呈现报表时，我不知道我传递的参数是否实际上会导致报表的数据集/表返回任何行。如果报告确实返回了数据，那么我会通过电子邮件将报告发送出去。但是，如果报告的表格是空的，那么我需要跳过这个报告并继续下一个报告。

无论如何我可以检查我呈现的报告以查看数据集或表是否返回任何数据？

感谢您的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:16:37.387

这听起来更像是可以在后端 sql 中完成的事情，而不是在报告中。该报告只是生成，据我所知，没有任何东西可以做到这一点。订阅的知识是非常基本的....但是您可以进行动态订阅，这可能会脱离数据库逻辑。

我相信您可以采取多层次的方法来使订阅为此动态化。

1.  在 SQL 数据库中为跟踪包含数据的报表的数据库创建一个作业。只需简单地插入 RecordTable select (reportname), dateadd(day, datediff(day, 0, getdate()), 0), Count(*) from (tabledataset)。
2.  如果您的数据集有行或没有行，请每天在设定的时间运行此作业以填充。
3.  创建动态订阅以执行查询，如果行数大于零则发送出去，否则不发送。

# php - php包括不显示

> ID：15930632
> 
> 赞同：0
> 
> 时间：2013-04-10T15:51:49.983
> 
> 标签：php, include

我正在制作一个网站，其中所有页面的页眉和页脚都相同。我查看了一些关于如何拥有 header.php 和 footer.php 的教程，然后在每个页面中需要的地方调用它们。

但是，我无法实现这一点。

在我的 index.php 中，我使用：

```
<?php include "header.php"; ?> 
```

我的 header.php 看起来完全如下（没有省略代码）：

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta http-equiv="imagetoolbar" content="no" />
<link rel="stylesheet" href="styles/layout.css" type="text/css" />
<!-- Homepage Specific Elements -->

<div class="wrapper row1">
 <div id="header" class="clear">
   <div class="fl_left">
     <h1><a href="index.html">hansmoolman.com</a></h1>
      <p>Art & Science</p>
   </div>
  <div class="fl_right">
      <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">Contact Us</a></li>
        <li><a href="#">A - Z Index</a></li>
        <li><a href="#">Login</a></li>
        <li class="last"><a href="#">Registration</a></li>
      </ul>
      <form action="#" method="post" id="sitesearch">
        <fieldset>
          <strong>Search:</strong>
          <input type="text" value="Search Our Website&hellip;" onfocus="this.value=(this.value=='Search the Website&hellip;')? '' : this.value ;" />
          <input type="image" src="images/search.gif" id="search" alt="Search" />
        </fieldset>
      </form>
    </div>
  </div>
</div> 
```

当我运行它时，没有显示任何标题。谁能告诉我我哪里出了问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:02:24.777

首先，您的标头确实会导致 HTML 无效，因为您混合了 head 和 body 元素。

尽管如此：

1.  确保在`body`元素内显示 HTML。
2.  确保包含的文件位于预期位置。您可以通过临时交换来测试`include`它`require`。如果未找到该文件，程序将停止执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:19:10.690

所以我发现了我的错误......原来它是在座位和屏幕之间。将索引保存为 .html 而不是 .php。

感谢大家的帮助。

# java - Java以单例模式同步

> ID：15930633
> 
> 赞同：10
> 
> 时间：2013-04-10T15:51:55.630
> 
> 标签：java, synchronization, singleton

像这样实现单例模式的类的每个方法都需要使用 synchronize 关键字吗？

```
public class Singleton {

  private Singleton(){}

  public synchronized static Singleton getInstance()
    {   
        if(instance == null)
            instance = new Singleton ();

        return instance;
    }

  public void DoA(){
  }
} 
```

由于 Singleton 不公开公共构造函数并且 getInstance() 方法是同步的，因此不需要同步方法 DoA 和 Singleton 类公开的任何其他公共方法。

这个推理正确吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-10T16:01:31.503

这就像任何其他课程一样。它可能需要也可能不需要进一步同步。

考虑以下示例：

```
public class Singleton {

  private Singleton() {}

  public synchronized static Singleton getInstance() { ... }

  private int counter = 0;

  public void addToCounter(int val) {
    counter += val;
  }
} 
```

如果要从多个线程使用该类，`addToCounter()`则具有竞争条件。解决此问题的一种方法是`addToCounter()`同步：

```
 public synchronized void addToCounter(int val) {
    count += val;
  } 
```

还有其他方法可以修复竞争条件，例如使用`AtomicInteger`：

```
 private final AtomicInteger counter = new AtomicInteger(0);

  public void addToCounter(int val) {
    counter.addAndGet(val);
  } 
```

在这里，我们在不使用`synchronized`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-10T16:04:16.663

好吧，Singleton 类的目的是它最多有一个实例，并且所有线程都可以访问同一个对象。

如果您不同步该`getInstance`方法，可能会发生以下情况

线程1进入`getInstance()`

线程2进入`getInstance()`

Thread1 计算`instance == null`为`true`

Thread2 评估`instance == null`为`true`

Thread1 赋值`instance`并返回

Thread2**重新**分配`instance = new Singleton()`并返回。

现在两个线程都有一个 Singleton 类的不同实例，这是这种模式应该阻止的。

同步可以防止两个线程同时访问同一个代码块。因此，当您实例化单例类时，在多线程环境中需要同步。

现在假设多个线程将尝试同时访问 Singletons 方法，这些方法也可能需要同步。特别是如果他们更改数据而不是只读取数据，这是真的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-20T05:09:36.350

使用单例的正确（实际上是最好的）方法

```
private static singleton getInstance() {
    if (minstance == null) {
        synchronized (singleton.class) {
            if (minstance == null) {
                minstance = new singleton();
            }
        }
    }
    return minstance;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-17T07:55:15.823

延迟初始化和线程安全解决方案：

```
public class Singleton {

    public static class SingletonHolder {
        public static final Singleton HOLDER_INSTANCE = new Singleton();
    }

    public static Singleton getInstance() {
        return SingletonHolder.HOLDER_INSTANCE;
    }
} 
```

# visual-studio-2012 - 使 NuGet WebApi.HelpPage 包消失

> ID：15930634
> 
> 赞同：1
> 
> 时间：2013-04-10T15:51:59.933
> 
> 标签：visual-studio-2012, nuget

我在 NuGet 控制台中执行此操作以试用 Web Api 帮助包：Install-Package Microsoft.AspNet.WebApi.HelpPage

现在，每次我创建 MVC Web Api 项目时，我都会得到 Areas\HelpPage。

我试过了：

```
PM> Uninstall-Package Microsoft.AspNet.WebApi.HelpPage
Skipping 'Areas\HelpPage\Views\_ViewStart.cshtml' because it was modified.
Skipping 'Areas\HelpPage\Views\_ViewStart.cshtml' because it was modified.
Skipping 'Areas\HelpPage\Views\_ViewStart.cshtml' because it was modified.
Skipping 'Areas\HelpPage\Views\_ViewStart.cshtml' because it was modified.
Successfully removed 'Microsoft.AspNet.WebApi.HelpPage 4.0.0' from MvcApplication16.
Successfully uninstalled 'Microsoft.AspNet.WebApi.HelpPage 4.0.0'.

PM> 
```

我决定不使用 HelpPage 包。

如何使该 HelpPage 及其区域消失并且不在我创建的每个项目中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:30:27.067

它实际上是 VS2012.2 更新（或 webtools 2012.2 版本）中的一个功能。这不是因为您安装了该软件包一次。如果您不喜欢它，您有 2 个选项：1\. 每次创建新的 webapi 项目后删除包 2\. 创建只安装包的自定义 webapi 模板（在 asp.net 上搜索如何执行此操作）你想要的

# java - 将 getCallingActivity 的活动与另一个活动进行比较

> ID：15930635
> 
> 赞同：7
> 
> 时间：2013-04-10T15:52:07.227
> 
> 标签：java, android, android-activity

我想将调用活动与其他活动进行比较，以了解哪个调用了当前活动。我试过了：

```
getCallingActivity().getClassName().toString().equals(MainActivity.class.toString()) 
```

它不起作用，除了在调用 Intent 中传递一个值，我们如何使用`getCallingActivity()`or比较类`getCallingPackage()`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-04-01T06:40:05.257

如果该活动是为另一个活动的结果而启动的，您可以通过以下方式比较调用活动。

```
 if (getCallingActivity().getClassName().equals(MainActivity.class.getName())) {

            /* here the main activity is calling activity*/

     }else{

             /*other activity is calling activity*/
  } 
```

# ios - ios 使用 icloud 和核心数据 sqlite 存储

> ID：15930636
> 
> 赞同：-5
> 
> 时间：2013-04-10T15:52:09.323
> 
> 标签：ios, core-data, icloud

我找到了一个我需要阅读的关于这个的教程。我现在的问题是我的应用程序是否应该为 icloud 提供登录屏幕？如果不是，我的应用程序将如何提供对特定 icloud 用户的访问权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:28:56.917

您没有为 iCloud 提供登录屏幕。当用户配置新设备或使用 Settings.app 配置（或删除）iCloud 帐户时，iOS 会处理这一点。您无权访问用户的 iCloud 登录信息。该设备只有一个 iCloud 帐户，它要么存在，要么不存在。

确定您的应用程序是否可以使用 iCloud 的标准方法是调用`[[NSFileManager defaultManager] ubiquityIdentityToken]`并查看结果是否为`nil`. 如果不是，`nil`则 iCloud 可用。如果这种情况发生变化，您还应该倾听`NSUbiquityIdentityDidChangeNotification`。

# opengl - 相机旋转时OpenGL点光源移动

> ID：15930638
> 
> 赞同：0
> 
> 时间：2013-04-10T15:52:12.047
> 
> 标签：opengl, glsl

我的场景中有一个点光源。我认为它工作正常，直到我用相机从不同角度观察被照亮的物体并发现光照区域在网格上移动（在我的例子中是简单的平面）。我正在使用典型的 ADS Phong 照明方法。我将灯光位置转换到客户端的相机空间，然后使用模型视图矩阵转换顶点着色器中的插值顶点。

我的顶点着色器如下所示：

```
#version 420 

layout(location = 0)  in vec4 position;
layout(location = 1)  in vec2 uvs;
layout(location = 2)  in vec3 normal;

uniform mat4 MVP_MATRIX;
uniform mat4 MODEL_VIEW_MATRIX;
uniform mat4 VIEW_MATRIX;
uniform mat3 NORMAL_MATRIX;

uniform vec4 DIFFUSE_COLOR;

//=======  OUTS  ============//
out smooth  vec2 uvsOut;
out flat  vec4 diffuseOut;

out  vec3 Position;
out smooth vec3 Normal;

out gl_PerVertex
{
   vec4 gl_Position;
};

void main()
{
    uvsOut = uvs;
    diffuseOut  =  DIFFUSE_COLOR;
    Normal = normal;
    Position = vec3(MODEL_VIEW_MATRIX * position);

    gl_Position = MVP_MATRIX * position;
} 
```

片段着色器：

```
//====================  Uniforms  ===============================
struct LightInfo{

 vec4 Lp;///light position
 vec3 Li;///light intensity
 vec3 Lc;///light color
 int  Lt;///light type

};

const int MAX_LIGHTS=5;

uniform LightInfo lights[1];

// material props:
uniform vec3 KD;
uniform vec3 KA;
uniform vec3 KS;
uniform float SHININESS;
uniform int num_lights;

////ADS lighting method :

vec3 pointlightType( int lightIndex,vec3 position , vec3 normal) {

    vec3 n = normalize(normal);
    vec4 lMVPos = lights[0].Lp ;  //
    vec3 s = normalize(vec3(lMVPos.xyz) - position); //surf to light
    vec3 v = normalize(vec3(-position)); //
    vec3 r = normalize(- reflect(s , n));
    vec3 h = normalize(v+s);

    float sDotN = max( 0.0 , dot(s, n) );

    vec3 diff = KD *  lights[0].Lc * sDotN ;
    diff = clamp(diff ,0.0 ,1.0);

    vec3 spec = vec3(0,0,0);

    if (sDotN > 0.0) {
        spec = KS * pow( max( 0.0 ,dot(n,h) ) ,  SHININESS);
        spec = clamp(spec ,0.0 ,1.0);
    }

    return lights[0].Li *  ( spec+diff);
} 
```

我研究了很多教程，但没有一个对变换空间的整个过程给出详尽的解释。我怀疑它与我将光和顶点位置变换到的相机空间有关。在我的情况下，视图矩阵是创建于

```
 glm::lookAt() 
```

它总是否定“眼睛”向量，所以我的着色器中的视图矩阵已经否定了翻译部分。应该是这样的吗？有人可以详细解释它是如何在可编程管道中以正确的方式完成的吗？我的着色器是根据**“OpenGL 4.0 Shading language cookbook”**一书实现的。作者似乎也使用了相机空间。但它不能正常工作，除非这是它应该工作的方式......

我只是将计算移到世界空间中。现在点光保持在原地。但是如何使用相机空间实现相同的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T09:24:56.500

我确定了这个错误，这是一个非常愚蠢的错误。但它可能对其他过于“数学友好”的人有帮助。我在着色器中的灯光位置是用 vec3 定义的。现在，在客户端它用 vec4 表示。在用视图矩阵转换它之前，我每次都有效地将 vec4 的 .w 分量设置为零。这样做，我相信，光位置矢量没有得到正确转换，因此所有光位置问题都源于shader.解决方案是保持光照位置向量的w分量始终等于1。

# c# - 使用 { } 进行事件绑定

> ID：15930640
> 
> 赞同：2
> 
> 时间：2013-04-10T15:52:12.307
> 
> 标签：c#, wpf, events, binding

我正在创建一个`TextBox`代码隐藏。

```
TextBox textBox = new TextBox(); 
```

我还有一个功能：

```
private void TextBox_Focus(object sender, RoutedEventArgs e)
{
    // does something
} 
```

我想绑定`TextBox_Focus`到`TextBox.GotFocus`.

而不是像这样单独设置每个属性

```
TextBox textBox = new TextBox();
textBox.Width = 100;
textBox.Height = 25;
textBox.Background = Brushes.White;
textBox.Foreground = Brushes.Blue;
textBox.GotFocus += TextBox_Focus; 
```

我更喜欢使用大括号（大括号）`{}`：

```
TextBox textBox = new TextBox()
{
   Width = 100,
   Height = 25,
   Background = Brushes.White,
   Foreground = Brushes.Blue
}; 
```

但是，当我使用大括号方法时，我无法绑定到事件。

我尝试过以下操作，但无济于事...

```
TextBox textBox = new TextBox()
{
   Width = 100,
   Height = 25,
   Background = Brushes.White,
   Foreground = Brushes.Blue,
   this.GotFocus += TextBox_Focus
}; 
```

**问题：** 有没有办法使用大括号 ( `{}`) 方法进行事件绑定？

**更新：** 元素是动态创建的，所以我不能使用 XAML。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:01:51.637

No. [Object initializers](http://msdn.microsoft.com/en-us/library/vstudio/bb384062.aspx) only work to set properties or fields. You're trying to subscribe to an event, which isn't supported in Object initializer syntax.

As other commenters are saying, XAML is the best way to initialize WPF controls.

Apparently Mono though supports what you're asking for. See: [Initializing events with initializer syntax](https://stackoverflow.com/questions/4751837/initializing-events-with-initializer-syntax)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:58:00.203

为什么不使用 Xaml，您会发现它非常灵活。还有一点WPF的东西。

```
<TextBox x:Name="textBox"
         Width="100"
         Height="25"
         Background="White"
         Foreground="Blue"
         GotFocus="TextBox_Focus" /> 
```

根据您的评论，您可以做您想做的事情：

```
<ListBox ItemsSource="{Binding MyCollection}">
     <ListBox.ItemTemplate>
          <DataTemplate>
                  <TextBox Text="{Binding }"
                           Width="100"
                           Height="25"
                           Background="White"
                           Foreground="Blue"
                           GotFocus="TextBox_Focus" />
          </DataTemplate>
     </ListBox.ItemTemplate> 
```

If you make your Collection an `ObservableCollection<T>` when you add an item to the collection it will update your list box for you.

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-10T16:07:08.213

Try EventManager.RegisterClassHandler(typeof(TextBox),TextBox.GotKeyboardFocusEvent, new RoutedEventHandler(yourMethod());

# sql-server - 函数中的连接

> ID：15930641
> 
> 赞同：0
> 
> 时间：2013-04-10T15:52:12.700
> 
> 标签：sql-server

当我尝试从工作中的 concat 选择创建函数时遇到问题

这里的功能

```
CREATE FUNCTION dbo.afEvrGetConsequencesConcat
(@id_evr int,@type_evr int)
RETURNS varchar(max)
AS
BEGIN

    declare @result varchar(max)
    set @result= ''

IF @type_evr = 0 
BEGIN

    SELECT @result = @result + (case when (CEV.ID_CON is null) then CEV.NOM_CEV else CON.NOM_CON end) + ' ; '  
    from T_CONSEQUENCE_EVRP CEV 
    left join T_CONSEQUENCE CON on CEV.id_con=CON.id_con
    WHERE CEV.id_evr = @id_evr

END

IF @type_evr = 1
BEGIN

        SELECT DISTINCT @result = @result + isnull(NOM_PHR,'') + ' ; '  
        FROM T_EVRP EVR
        INNER JOIN T_EVR_CHIM CHIM on EVR.ID_EVR=CHIM.ID_EVR
        INNER JOIN T_PRODUIT PROD on CHIM.ID_PROD=PROD.ID_PROD
        INNER JOIN T_PRODUIT_PHRASE_R PROD_PHR on PROD.ID_PROD=PROD_PHR.ID_PROD
        INNER JOIN T_PHRASE_R PHR on PROD_PHR.ID_PHR=PHR.ID_PHR
        WHERE TYPE_EVR=1 AND EVR.id_evr = @id_evr AND PHR.flag_consequence = 1

        UNION 

        SELECT DISTINCT @result = @result + isnull(nom_cons_txt,'') +' ; '  
        FROM T_EVRP EVR
        INNER JOIN T_EVR_CHIM CHIM on EVR.ID_EVR=CHIM.ID_EVR
        INNER JOIN T_PRODUIT PROD on CHIM.ID_PROD=PROD.ID_PROD
        INNER JOIN t_consequence_txt PROD_CONS on PROD.ID_PROD=PROD_CONS.ID_PROD
        WHERE TYPE_EVR=1 AND EVR.id_evr = @id_evr AND PROD.transverse_prod = 1

END

    RETURN @result

END
GO 
```

消息错误是“Msg 444, Niveau 16, État 2, Procédure afEvrGetConsequencesConcat, Ligne 23 Select statements 包含在函数中无法将数据返回给客户端。

上面的 SELECT 在函数之外工作得很好。每次，我在@result 中得到 1 个与 SELECT 连接匹配的 varchar。这个相似的功能也很有效：

```
CREATE FUNCTION dbo.afEvrGetControleConcat
(@id_evr int,@type_evr int,@type_ctrl int)
RETURNS varchar(8000)
AS
BEGIN
    declare @result varchar(8000)
    set @result= ''

    -- 0 tous
    -- 1 date + comm

    IF @type_ctrl = 0
    BEGIN   

        SELECT @result = @result + ( CONVERT(VARCHAR(10),date_ctr, 103) + ' - ' + CONVERT(VARCHAR(30),isnull(valeur_mesure,'')) + ' - ' + isnull(unite_mesure,'') + ' - ' + com_ctr  ) + ' ;'
        FROM t_controle_exposition 
        WHERE id_evr = @id_evr

    END

    IF @type_ctrl = 1
    BEGIN   

        SELECT @result = @result + ( CONVERT(VARCHAR(10),date_ctr, 103) + ' - ' + com_ctr  ) + ' ;'
        FROM t_controle_exposition 
        WHERE id_evr = @id_evr

    END

    RETURN @result

END
GO 
```

那么问题是什么？按逻辑，我想返回一个 varchar，而不是表或任何时髦的数据。所以我不明白这个错误信息。

感谢您的帮助。

编辑：添加一个临时表并在 UNION 和 concat 的结果中插入 next 效果很好:)

```
CREATE FUNCTION dbo.afEvrGetConsequencesConcat
(@id_evr int,@type_evr int)
RETURNS varchar(max)
AS
BEGIN

    declare @result varchar(max)
    set @result= ''
    declare @t as table (v varchar(max))

IF @type_evr = 0 
BEGIN

    SELECT @result = @result + (case when (CEV.ID_CON is null) then CEV.NOM_CEV else CON.NOM_CON end) + ' ; '  
    from T_CONSEQUENCE_EVRP CEV 
    left join T_CONSEQUENCE CON on CEV.id_con=CON.id_con
    WHERE CEV.id_evr = @id_evr

END

IF @type_evr = 1
BEGIN

        insert into @t 
        SELECT DISTINCT isnull(NOM_PHR,'') + ' ; '  
        FROM T_EVRP EVR
        INNER JOIN T_EVR_CHIM CHIM on EVR.ID_EVR=CHIM.ID_EVR
        INNER JOIN T_PRODUIT PROD on CHIM.ID_PROD=PROD.ID_PROD
        INNER JOIN T_PRODUIT_PHRASE_R PROD_PHR on PROD.ID_PROD=PROD_PHR.ID_PROD
        INNER JOIN T_PHRASE_R PHR on PROD_PHR.ID_PHR=PHR.ID_PHR
        WHERE TYPE_EVR=1 AND EVR.id_evr = @id_evr AND PHR.flag_consequence = 1

        UNION 

        SELECT DISTINCT isnull(nom_cons_txt,'') +' ; '  
        FROM T_EVRP EVR
        INNER JOIN T_EVR_CHIM CHIM on EVR.ID_EVR=CHIM.ID_EVR
        INNER JOIN T_PRODUIT PROD on CHIM.ID_PROD=PROD.ID_PROD
        INNER JOIN t_consequence_txt PROD_CONS on PROD.ID_PROD=PROD_CONS.ID_PROD
        WHERE TYPE_EVR=1 AND EVR.id_evr = @id_evr AND PROD.transverse_prod = 1

SELECT @result = @result + v FROM @t

END

    RETURN @result

END
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:09:59.613

我认为这与UNION有关。尝试运行：

```
DECLARE @result varchar(max)

SELECT @result = 'test'

UNION 

SELECT @result = 'another' 
```

你会得到：

```
Msg 10734, Level 15, State 1, Line 5
Variable assignment is not allowed in a statement containing a top level UNION, INTERSECT or EXCEPT operator. 
```

如果你必须做 UNION，你将不得不返回一张桌子，否则想出一些没有 UNION 的其他方法。这可以解释为什么第二个函数有效，因为它没有 UNION

# ruby - 独立 Ruby 中的活动记录

> ID：15930644
> 
> 赞同：2
> 
> 时间：2013-04-10T15:52:22.777
> 
> 标签：ruby, rails-activerecord

我有独立的 Ruby 应用程序，并希望将它与活动记录 gem 一起使用。我制作了 3 个模型：user.rb

```
require 'active_record'

class User < ActiveRecord::Base
  has_many :posts, :dependent => :destroy
  has_many :comments

  validates :name, :presence => true

  attr_accessible :name, :state
end 
```

post.rb

```
require 'active_record'

class Post < ActiveRecord::Base
  belongs_to :user
  has_many :comments

  validates :title, :length => { :in => 6..40 }

  attr_accessible :title, :content
end 
```

评论.rb

```
require 'active_record'

class Comment < ActiveRecord::Base
  belongs_to :user
  belongs_to :post

  validates :content, :presence => true

  attr_accessible :content, :user_id
end 
```

现在我想通过发出以下代码为该帖子和用户填充一个用户、一个帖子和一个评论的数据库：

```
require 'active_record'
require 'sqlite3'
require './models/user'
require './models/post'
require './models/comment'

ActiveRecord::Base.configurations = YAML::load(IO.read('config/database.yml'))
ActiveRecord::Base.establish_connection("development")

user1 = User.create name: "Joe",   state: "England"

post1 = user1.posts.create title: "RoR introduction", content: "RoR intro."

comment1 = post1.comments.create content: "This is great article!" 
```

但现在它填充数据库但 user_id 为空。我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:08:18.743

我认为您的评论与帖子相关联，而不是用户...

只是说做`comment1.user = user1`然后`comment1.save!`

我认为这里的关键问题是发表评论的用户不一定是发表原始帖子的用户。如果是这种情况，您可以通过 through 选项强制执行它。但是，由于任何用户都可以评论帖子，所以说 post1.comments.create 等不应自动拉入创建帖子的用户，对吗？因为它可能是另一个用户...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:00:23.190

我不确定，但我认为您不希望在活动记录类中使用这些 attr_accessible 规范 - 我认为它们会干扰活动记录自动提供的字段 - 尝试删除所有这些

# groovy - 是否可以在主 Groovy 项目中使用 Gradle buildSrc 编译的类？

> ID：15930646
> 
> 赞同：6
> 
> 时间：2013-04-10T15:52:23.363
> 
> 标签：groovy, build, gradle

由 buildSrc/build.gradle 编译的类在主 PROJECT 类中使用时不会在运行时解析。

```
My Groovy project structure looks like this:
-PROJECT
    -buildSrc/
        -build.gradle
        -/src/main/groovy
            - com.company.global.test.report
    -src/test/groovy
    -build.gradle 
```

有什么我可以添加到顶级 PROJECT/build.gradle 以允许它编译的类使用 buildSrc/build.gradle 编译的类吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T16:13:19.063

`buildSrc`是它自己的*构建*（不是项目），在主构建之前执行。它的唯一目的是使一些类（插件、任务、常规类）可用于主构建的*构建脚本*。因此，您可以将其称为“元构建”。

从技术上讲，可以`buildSrc`在主构建中将已编译的类添加到项目的编译或运行时类路径中，但我不建议这样做。很可能有更好的方法来实现你的目标（但我不知道那些是什么）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-15T12:49:58.343

以下是使用 Gradle 的方法`2.12`：

在`your_project/buildSrc/build.gradle`

```
task sourcesJar(type: Jar, dependsOn: classes) {
  classifier = 'sources'
  from sourceSets.main.allSource
}

// Thanks to this, IDE like IntelliJ will provide you with "Navigate to sources"
artifacts {
  archives sourcesJar
} 
```

在`your_project/build.gradle`

```
ext.buildSrcJars = fileTree("$rootDir/buildSrc/build/libs") { include("*.jar") exclude("*sources.jar")}

// Works in every subproject
dependencies {
    compile buildSrcJars
} 
```

# coldfusion - 使用 JDBC 将 ColdFusion 8 连接到 Oracle 11g

> ID：15930649
> 
> 赞同：1
> 
> 时间：2013-04-10T15:52:32.960
> 
> 标签：coldfusion, oracle11g, coldfusion-8

我使用 JDBC/Oracle 瘦客户端从我的 ColdFusion 8 管理员创建了一个数据源。数据源创建成功。

当 Oracle 加密配置为“已请求”时，我可以浏览我的 ColdFusion 应用程序。并毫无问题地运行许多功能。但是，当 Oracle 加密配置为“必需”时，连接会失败。

我测试并知道它失败的方式是当我登录我的网络应用程序时。它不会让我登录。但是当 Oracle 切换回“已请求”时，我可以成功登录并运行我的任务。

我有 ColdFusion 8 企业版，操作系统是 Unix。从网络部门，我被告知他们有正确的 JAR 文件，但不确定什么是正确的 JAR 文件。

目前，我的 Web 应用程序正在运行使用 Oracle Thin Clint 创建的数据源，但 Oracle 加密需要切换回“已请求”，否则我的用户会抱怨他们无法登录。

有没有人遇到过这种情况并找到解决方案？
我应该怎么做才能使用设置为“必需”的 Oracle 加密？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:32:43.757

我相信您正在 ColdFusion8/wwwroot/WEB-INF/lib 目录中寻找 ojdbc14.jar 文件（这适用于 11g）。

我会让 Coldfusion 重新启动，但这可能没有必要。

导航到您的 Coldfusion 管理员。

在数据源下的 ColdFusion Administration 中。添加新数据源以及您的凭据，然后从数据库驱动程序选项中选择其他。

然后在 JDBC URL 文本区域中输入：jdbc:oracle:thin:@10.10.10.11:1521:ORCL。

在驱动程序类文本字段中输入 oracle.jdbc.OracleDriver。

如果你需要一个不同的罐子（不确定你会不会），但如果你需要，你可以从这里下载它。 [http://www.oracle.com/technetwork/indexes/downloads/index.html](http://www.oracle.com/technetwork/indexes/downloads/index.html)

希望这会有所帮助，或者至少能让你走得更远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:20:42.900

弗兰克，谢谢你的回答，但是在我的CF服务器上运行的java版本是JAVA1.6，并且那里安装的ojdbc.jar是ojdbc6.jar ojdbc.jar和java的版本应该相同吗？如果我的 ojdbs.jar 和 java 文件已经走在正确的轨道上，那么我将回到正轨

此外，我使用 Oracle 加密作为“请求”的进一步测试，我可以运行我的应用程序。很好，除非我的 CF 打电话给 str。程序，它没有返回结果。所以我得到了CF错误。通过谷歌搜索这个问题，我发现一个博客说这是使用 Oracle 瘦客户端时 CF 标准版本的问题。我的 CF 是企业版。我很困惑……这有关系吗？我怎样才能使这项工作？

# android - 多个 ACTION_DOWN 事件做同样的事情

> ID：15930653
> 
> 赞同：1
> 
> 时间：2013-04-10T15:52:39.333
> 
> 标签：android, button, multi-touch

我想让 3 个按钮一次可触摸，这样您就可以触摸一个按钮而无需将手指从另一个按钮上移开。到目前为止，我按以下顺序使用 ACTION_DOWN、ACTION_POINTER_1_DOWN 和 ACTION_POINTER_2_DOWN：

```
 public boolean onTouch(final View v, final MotionEvent event) {

            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                switch (v.getId()) {
                case R.id.button1:
                {   playSound(SOUND1,  1.0f) ;};
                    break;
                case R.id.button2:
                {   playSound(SOUND2,  1.0f) ;};
                    break;
                case R.id.button3:
                {   playSound(SOUND3,  1.0f) ;};
                    break;}

            } else if (event.getAction() == MotionEvent.ACTION_POINTER_1_DOWN) {
                switch (v.getId()) {
                case R.id.button1:
                {   playSound(SOUND1,  1.0f) ;};
                    break;
                case R.id.button2:
                {   playSound(SOUND2,  1.0f) ;};
                    break;
                case R.id.button3:
                {   playSound(SOUND3,  1.0f) ;};

                    break;}

            } else if (event.getAction() == MotionEvent.ACTION_POINTER_2_DOWN) {
                switch (v.getId()) {
                case R.id.button1:
                {   playSound(SOUND1,  1.0f) ;};

                    break;
                case R.id.button2:
                {   playSound(SOUND2,  1.0f) ;};

                    break;
                case R.id.button3:
                {   playSound(SOUND3,  1.0f) ;};
                    break;} 
```

如果我在手机上编译并运行此项目，则不会出现错误或警告。

但是当我进行第二次触摸时，会播放与第一次相同的声音。示例：手指 2 按下按钮 2（声音 2 播放）。在按钮 2 上按住手指 2 时，我用手指 3 触摸按钮 3。我预计，声音 3 正在播放，但声音 2 再次播放。

我已经尝试过“return true”，但这并没有改变任何东西。

少数人也有这个问题，但没有人真正在这些线程中找到解决方案。

亚历克斯

更新：我刚刚发现点击的位置并不重要。即使我点击一个空白区域，另一根手指所在的按钮也会再次做出反应

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:23:39.683

我注意到您使用的代码已被弃用。我相信以下代码（从 Android 培训文档中获取，链接如下）应该有助于解决您的问题。

[http://developer.android.com/training/gestures/multi.html](http://developer.android.com/training/gestures/multi.html)

```
private int mActivePointerId;

public boolean onTouchEvent(MotionEvent event) 
{
    ....
    // Get the pointer ID
    mActivePointerId = event.getPointerId(0);

    // ... Many touch events later...

    // Use the pointer ID to find the index of the active pointer 
    // and fetch its position
    int pointerIndex = event.findPointerIndex(mActivePointerId);
    // Get the pointer's current position
    float x = event.getX(pointerIndex);
    float y = event.getY(pointerIndex);
} 
```

然后，您可以使用 x、y 坐标来确定他们正在按下哪个按钮，并激活您的声音。

# git - 撤消 git add 和 git commit 以及某种 git push origin

> ID：15930655
> 
> 赞同：1
> 
> 时间：2013-04-10T15:52:45.683
> 
> 标签：git, github

我是 github 新手，主要只使用“git add”、“git commit”和“git push origin”。

我有一个相当大的压缩文件，我们称之为 big.zip（大约 1 GB），并且想将它上传到我的 git 存储库，所以我做了：

```
git add big.zip
git commit -m "this is my big file"
git push origin 
```

它开始上传它，但过了一段时间我决定不再需要它，所以我输入了 ctrl+c。

现在我在我的存储库中看不到我的 big.zip，显然，但我想从“git add zone”中删除所有内容。例如，如果我想推送一个我看到的小 txt 文件：

```
Enter passphrase for key '/root/.ssh/id_rsa': 
Counting objects: 39, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (27/27), done.
Citing objects:  96% (28/29) 
```

所以我猜测“添加区域”中有 39 或 29 个文件等待被推送到存储库，而且大胖 big.zip 也在那里。我该如何冲洗它？我尝试了 git reset、git clean、git remove from index、git gtfo，但都不起作用。

有没有一种简单的方法可以摆脱这一切？我想删除“添加区域”中的所有内容以及正在前往存储库的文件。

还有一件事：我不再有本地的 .zip 文件，而且我不记得它的名称。如果我键入 git ls-files，我在列表中看不到 .zip 文件。

谢谢你的时间，马特乌斯。

编辑：当然我不想继续使用 git push origin，因为 .zip 文件太大并且不希望它在我的 git 存储库中。如果这听起来很愚蠢，请忽略它并将其视为必需品。

EDIT2：发生了什么事：当我输入 git status 我得到：

```
On branch master
 Your branch is ahead of 'origin/master' by 5 commits.

 Untracked files:
   (use "git add <file>..." to include in what will be committed)

    ../diag/blabla.pdf
    ../mod/tab6
    ../tej.txt 
```

这不是我想看到的，因为那里没有大的 .zip 文件，我知道有一个。如果我去 git push origin，显然正在上传一些大的东西。

无论如何，我所做的是输入“git push origin”，因为我必须继续我的项目。大文件以某种方式上传，我可以在提交历史记录中看到它（虽然它说“二进制文件已删除”），但我在存储库中看不到它。似乎我也无法下载它（我希望它只是关于它的文本信息）。

我的头有问题，但问题仍然悬而未决：如何阻止 git 上传文件（假设它不是 800 MB，而是 800 GB，我真的不想等到它完成？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:39:15.893

运行`git status`，它将向您显示分阶段的更改（索引）。然后，您可以`git rm someFile`从索引中删除文件，然后再删除`git commit`其余文件。

您可能需要稍后强制将您的分支推送到远程，但 ( `git push -f origin master`)。

# mysql - 从 MYSQL 数据库中检索唯一数据

> ID：15930659
> 
> 赞同：0
> 
> 时间：2013-04-10T15:52:55.243
> 
> 标签：mysql, duplicates, unique, distinct

我的数据库中有一个包含 5 行的表。我正在尝试编写一个 sql 语句，该语句将检索所有仅分配了 1 个机构的行。

```
case_id    agency_ID
   1          4
   2          4
   3          3
   4          2
   4          4 
```

为了澄清，我想选择所需的行（以及任何其他行），但前提是 case_id 是唯一的。任何有重复的行都将被省略。

我曾尝试使用 DISTINCT(case_id), COUNT(*) 来计算所有行，但它不起作用，它正在慢慢侵蚀我的灵魂。这可能是一个简单的修复，但对于我的生活，我就是看不到它。

希望这是足够的信息继续下去。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:55:36.127

你可以试试

```
SELECT case_id,agency_ID,COUNT(case_id) as c 
FROM yourTable
GROUP BY case_id
HAVING (c=1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:57:05.017

```
SELECT * FROM your_table GROUP BY case_id HAVING COUNT(agency_ID) = 1 
```

# highcharts - 有没有办法禁用 Highcharts 中的标题和副标题？

> ID：15930661
> 
> 赞同：127
> 
> 时间：2013-04-10T15:53:03.670
> 
> 标签：highcharts

我只是要使用图表周围的 html 对其进行硬编码，我不想使用内置的。

我在 API 中没有看到“禁用：true”选项。

任何人都可以在这里帮助我。

你如何禁用highcharts中的标题/副标题？

（如果您只是将文本留空，它仍然会在标题所在的位置划出一个空格，我不想发生这种情况）

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2013-04-10T16:05:27.827

将标题文本设置为空字符串是一种方法。

在这种情况下，不会为标题创建空格：

没有文字：http: [//jsfiddle.net/jlbriggs/JVNjs/284/](http://jsfiddle.net/jlbriggs/JVNjs/284/)

带文字：http: [//jsfiddle.net/jlbriggs/JVNjs/286/](http://jsfiddle.net/jlbriggs/JVNjs/286/)

```
title:{
    text:''
} 
```

如果您想要的空间比这种情况下的剩余空间少，只需将您的 'marginTop' 设置为 0

{{**由于众多评论而编辑**：

正如下面多次指出的那样，文档现在`text: null`将其作为实现此目的的方法。

任何一种方法都能达到预期的效果。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2014-10-13T22:55:58.870

来自[highcharts 文档](http://api.highcharts.com/highcharts#title)：

> text: String 图表的标题。要禁用标题，请将文本设置为 null。默认为图表标题。

小提琴：http: [//jsfiddle.net/daub10dr/](http://jsfiddle.net/daub10dr/)

```
title:{
      text: null
      } 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2013-09-25T15:00:32.130

我更喜欢这种方法：

```
title: {
    text: '',
    style: {
        display: 'none'
    }
},
subtitle: {
    text: '',
    style: {
        display: 'none'
    }
}, 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2018-04-05T04:38:17.627

很简单！在最新版本的 Highcharts 中，只需将 title 和 subtitle 属性设置为 false。

```
{
title: false,
subtitle: false
} 
```

在这里找到工作小提琴：[https ://jsfiddle.net/samuellawrentz/hkqnvm7k/4/](https://jsfiddle.net/samuellawrentz/hkqnvm7k/4/)

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2013-09-15T00:05:08.560

你总是可以这样做：

```
chart:{
    marginTop: 30
}

title:{
    text: ''
} 
```

这对我有用:-)

***注意：*** *此答案适用于`version 2.*`，对于较新的版本，有更好的答案。*

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2014-07-25T14:17:03.597

这很简单......只需将标题的文本设置为空。像这样

```
 $(function () {
$('#container').highcharts({
    xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
    },
    title: {
        text: null  
    },
    series: [{
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]        
    }]
}); 
```

});

参见@APIreference：[http ://api.highcharts.com/highcharts#title.text](http://api.highcharts.com/highcharts#title.text)

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2014-05-06T16:06:53.933

Set the text field to *null*

From the documentation at [http://api.highcharts.com/highcharts#title.text](http://api.highcharts.com/highcharts#title.text)

> text: String
> 
> The title of the chart. To disable the title, set the text to null. Defaults to Chart title.

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2015-07-01T20:58:39.613

根据 Highcharts 文档，正确的方法是将“文本”设置为空。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2018-09-25T05:45:04.203

在下面的 react-native 代码中为我工作，

```
 title: {
    style : {
      display : 'none'
    }
 } 
```

希望它有所帮助。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2020-01-03T06:18:53.063

For those that use Typescript you can set the Highcharts.TitleOptions to hide the chart title.

```
title: {
  text: undefined
},
subtitle: {
  text: undefined
} 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2014-06-10T05:03:16.580

这是解决方案

```
title: {
    text: null
},
subtitle: {
    text: null
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-06-30T10:40:59.460

只写一个 JSON 对象

```
title : {
  style : {
    display : 'none'
  }
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-06-23T07:57:50.050

这对我有用！！！

`title:false`

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-03-24T04:06:36.853

这有点小技巧，但您也可以尝试：

```
title: {
    text: '<span class="hidden">My custom Hello</span>',
    align:"left",
    useHTML:true
} 
```

# javascript - 如何 - 自动提交 javascript 表单

> ID：15930664
> 
> 赞同：0
> 
> 时间：2013-04-10T15:53:05.923
> 
> 标签：javascript, forms, twitter

我向 twitter 报告了很多我自己的工作，以便通过他们的[https://support.twitter.com/forms/dmca 删除](https://support.twitter.com/forms/dmca)

我试图找到一种方法来加快这个过程。我知道表格是用javascript写的。我希望能够预先填写某些字段，这样我就不必（您的全名、公司、职位、电子邮件地址等）。我做了一些研究，有人说可以使用 urllib2 用 python 完成。我还尝试获取他们整个页面的 html 并将其放在 wamp 上，看看我是否可以从那里提交，但没有运气。

我希望有人能指出我正确的方向。

更新：我找到了一些关于使用 python 代理的信息，这似乎是要走的路。有没有人有这方面的经验可以为我指明正确的方向？

# javascript - display:none / visibility:hidden 以防 javascript 被禁用

> ID：15930667
> 
> 赞同：1
> 
> 时间：2013-04-10T15:53:07.253
> 
> 标签：javascript, jquery, html, cross-browser, fallback

基本上，我最初在我的 css 文件中设置了某些元素，`display: none;`并`visibility: hidden;`在 jQuery 的帮助下使它们可见。我在想，如果用户禁用了 javascript，那将意味着他们根本看不到任何这些隐藏元素。我怎样才能创建一种回退，以便将此内容显示给禁用 javascript 的浏览器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T15:55:05.213

在你的脑海中，放置类似的东西：

```
<noscript>
    <style type="text/css">
        .hidden_by_js_class {display: block;}
    </style>
</noscript> 
```

来自[MDN](https://developer.mozilla.org/en-US/docs/HTML/Element/noscript)：

> `<noscript>`如果页面上的脚本类型不受支持或当前在浏览器中关闭脚本，则HTML元素定义要插入的一段 html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:57:17.787

您可以使用标签：[http ://www.w3schools.com/tags/tag_noscript.asp](http://www.w3schools.com/tags/tag_noscript.asp)

```
<script type="text/javascript">
document.write("Javascript is On");
</script>
<noscript><span>Your Javascript is off</span></noscript>` 
```

# c# - 动态调用泛型目标上的方法

> ID：15930670
> 
> 赞同：4
> 
> 时间：2013-04-10T15:53:14.530
> 
> 标签：c#, generics, reflection

我有一个通用接口`ICommandHandler<>`，它将有许多实现，每个实现都用于处理 的特定实现`ICommand`，例如：

```
public class CreateUserCommand : ICommand { ... }
public class CreateUserCommandHandler : ICommandHandler<CreateUserCommand> { ... } 
```

当我得到一个`ICommand`对象时，我试图将它动态分派到正确的`ICommandHandler`. 目前，我`Invoke`在调度程序类中使用了一种非常简单的反射方法：

```
public void Dispatch<T>(T command) where T : ICommand
{
    Type commandType = command.GetType();
    Type handlerType = typeof(ICommandHandler<>).MakeGenericType(commandType);
    object handler = IoC.Get(handlerType);
    MethodInfo method = handlerType.GetMethod("Handle");

    method.Invoke(handler, new object[] { command });
} 
```

这种方法有两个问题。首先它使用慢反射。其次，如果该方法抛出任何类型的异常，那么它将被包裹在 a 中`TargetInvocationException`，如果我重新抛出它，我将丢失堆栈跟踪。

我想出了一种通过创建委托并使用来进行调用的方法，`DynamicInvoke`但这并不能解决异常问题（而且我不确定`DynamicInvoke`是否真的比 更好`Invoke`）：

```
public void Dispatch<T>(T command) where T : ICommand
{
    Type commandType = command.GetType();
    Type handlerType = typeof(ICommandHandler<>).MakeGenericType(commandType);
    object handler = IoC.Get(handlerType);
    MethodInfo method = handlerType.GetMethod("Handle");

    Type actionType = typeof(Action<>).MakeGenericType(commandType);
    Delegate action = Delegate.CreateDelegate(actionType, handler, method);
    action.DynamicInvoke(command);
} 
```

我的问题是，有没有更好的方法来实现我想要做的事情？最好我可以进行强类型调用，而不是获取`object`并查找`MethodInfo`. 我认为这是不可能的，因为在编译时不知道类型。

如果这是不可能的，那么一个更“本机”抛出异常的有效解决方案将是下一个最佳选择。

**编辑**：更新代码示例以阐明我使用 IoC (Ninject)`ICommandHandler`在运行时创建，而不是`Activator.CreateInstance()`像我最初提出的那样。包括一个如何按要求使用的示例：

```
var command = new CreateUserCommand() { Name = "Adam Rodger" };
var dispatcher = new CommandDispatcher();
dispatcher.Dispatch(command);
// this would send the message to CreateUserCommandHandler.Handle(command) 
// dynamically and any exceptions would come back 'natively' 
```

**编辑 2**：如下所示，我无法将结果转换为`IoC.Get(handlerType)`，`ICommandHandler<T>`因为我`InvalidCastException`在运行时得到一个。这是因为在运行时`T`实际上是`ICommand`，我假设是因为命令类是通过 WCF 到达的，并且以某种方式设法失去了它们的强类型。调用调度程序的代码类似于：

```
[ServiceContract]
public class CommandService
{
    [OperationContract]
    public void Execute(ICommand command) // no type information
    {
        var dispatcher = new CommandDispatcher(); // injected by IoC in real version
        dispatcher.Dispatch(command);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T16:21:45.393

大多数 DI 容器（包括 Ninject）允许您执行以下操作：

```
public void Dispatch<T>(T command) where T : ICommand
{
    ICommandHandler<T> handler = IoC.Get<ICommandHandler<T>>();
    handler.Handle(command);
} 
```

如果您不知道命令的类型（换句话说， if `typeof(T) != command.GetType()`），使用双分派是最简单的方法：

```
class SomeCommand : ICommand
{
    // ...

    public void Dispatch(IoC ioc)
    {
        var handler = ioc.Get<IHandle<SomeCommand>>();
        handler.Handle(this);
    }
} 
```

但是，如果您发现将此代码添加到所有命令中令人反感，则可以进行反思。

**编辑**这里是一个基于反射的版本。您可以（并且应该）缓存已编译的委托。

```
interface ICommand { }
interface IHandle<TCommand> where TCommand : ICommand
{
    void Handle(TCommand command);
}

class CreateUserCommand : ICommand { }
class CreateUserHandler : IHandle<CreateUserCommand>
{
    public void Handle(CreateUserCommand command)
    {
        Console.Write("hello");
    }
}

[TestMethod]
public void build_expression()
{
    object command = new CreateUserCommand();
    object handler = new CreateUserHandler();

    Action<object, object> dispatcher = BuildDispatcher(command.GetType());
    dispatcher(handler, command);
}

private static Action<object, object> BuildDispatcher(Type commandType)
{
    var handlerType = typeof(IHandle<>).MakeGenericType(commandType);
    var handleMethod = handlerType.GetMethod("Handle");

    var param1 = Expression.Parameter(typeof(object));
    var param2 = Expression.Parameter(typeof(object));

    var handler = Expression.ConvertChecked(param1, handlerType);
    var command = Expression.ConvertChecked(param2, commandType);
    var call = Expression.Call(handler, handleMethod, command);

    var lambda = Expression.Lambda<Action<object, object>>(call, param1, param2);
    return lambda.Compile();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:58:40.837

尝试这个

```
dynamic handler=Activator.CreateInstance(handlerType);
try
  {
         handler.Handle((dynamic)command);
   }

   catch
   {
   // do whatever you want 
   } 
```

# java - 移除球体

> ID：15930678
> 
> 赞同：-3
> 
> 时间：2013-04-10T15:53:38.570
> 
> 标签：java, java-3d

我终于设法让我的程序检测到我在 Java-3D 中创建的两个球之间的碰撞；玩家球和敌方球。现在的问题是我不知道如何让玩家球在与敌方球碰撞时被移除。我尝试了一些简单的东西，比如`objTrans.removeChild(sphere);`和`objRoot.removeChild(objTrans);`（objTrans 是我的 TransformGroup，objRoot 是我的 BranchGroup），在这两种情况下我都会收到这个错误消息

```
Exception in thread "AWT-EventQueue-0" javax.media.j3d.RestrictedAccessException: Group: only a BranchGroup node may be removed 
```

我也尝试过`objRoot.detach();`，但后来我收到错误消息：

```
Exception in thread "AWT-EventQueue-0" javax.media.j3d.CapabilityNotSetException: BranchGroup: no capability to detach 
```

我不知道任何其他方法可以使球被移除。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:00:34.877

我在自己设计游戏时遇到了同样的问题。我发现效果最好的解决方案是将可能被破坏的对象存储在一个列表中，我可以在必要时对其进行迭代和删除元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-22T11:01:10.183

一个简单的代码示例。每次调用 updateModel() 时，都会删除一个 BranchGroup，然后用新形状更新它，然后再次添加

```
private BranchGroup             mapGroup = null;

public void updateModel (....)
{
    Shape3D                 shape;

    // Update 3D primitives
    if (mapGroup != null)                       // remove previous 3D model
        object.removeChild (mapGroup);      

    shape = facesTexturedShape (....);
    if (shape != null)                          // add new 3D model if non-null
    {
        mapGroup = new BranchGroup ();
        mapGroup.setCapability (BranchGroup.ALLOW_DETACH);
        mapGroup.addChild (shape);

        object.addChild (mapGroup);         
    }
} 
```

# sql - 为什么我收到错误 ORA-01427：单行子查询返回多于一行

> ID：15930680
> 
> 赞同：0
> 
> 时间：2013-04-10T15:53:49.720
> 
> 标签：sql, oracle, toad

为什么我收到错误消息？

> ORA-01427: 单行子查询使用此查询返回多行

```
UPDATE JOB_TASK JT1
   SET JT1.job_task_status_id =
          (SELECT JTS1.JOB_TASK_STATUS_ID
             FROM MAXIMO_WO MW1
                  INNER JOIN job_task_status jts1
                     ON MW1.STATUS = jts1.description
                     INNER JOIN JOB_TASK JT1
                     ON jt1.job_task_id = mw1.wonum)
WHERE   JT1.JOB_TASK_STATUS_ID IN
          (SELECT JTS.JOB_TASK_STATUS_ID
             FROM JOB_TASK_STATUS JTS,
                  JOB_TASK JT,
                  MAXIMO_WO MW,
                  WORK_ORDER_CONTROL WOC
            WHERE     JT.JOB_TASK_ID = MW.WONUM
                  AND JT.JOB_TASK_STATUS_ID = JTS.JOB_TASK_STATUS_ID
                  AND JT.WORK_ORDER_ID = WOC.WORK_ORDER_ID
                  and jt.job_task_id = mw.wonum
                  AND MW.STATUS IN
                         ('APPR',
                          'SCHED',
                          'INPRG',
                          'FNACCEPT',
                          'WMATL',
                          'WKCOMP',
                          'COMP')
                  AND WOC.COMPANY_ID = '21'
                  AND MW.SITEID <> 'NUCDEV'
                  AND DECODE (
                         INSTR (JTS.DESCRIPTION, '-', 1),
                         0, JTS.DESCRIPTION,
                         SUBSTR (JTS.DESCRIPTION,
                                 1,
                                 (INSTR (JTS.DESCRIPTION, '-', 1) - 1))) <>
                         MW.STATUS
                  AND JT.LEVEL_NUMBER = '3'
                  AND MW.STATUSDATE < SYSDATE - 1
                  AND MW.WONUM <> 'UNDEFINED') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:02:20.113

我怀疑你真的想要语句的 SET 部分中的子选择。尝试这样的事情：

```
 UPDATE JT1
    SET JT1.job_task_status_id = JTS1.JOB_TASK_STATUS_ID
 FROM MAXIMO_WO MW1
      INNER JOIN job_task_status jts1
            ON MW1.STATUS = jts1.description
      INNER JOIN JOB_TASK JT1
            ON jt1.job_task_id = mw1.wonum
 WHERE   JT1.JOB_TASK_STATUS_ID IN
      (SELECT JTS.JOB_TASK_STATUS_ID
         FROM JOB_TASK_STATUS JTS,
              JOB_TASK JT,
              MAXIMO_WO MW,
              WORK_ORDER_CONTROL WOC
        WHERE     JT.JOB_TASK_ID = MW.WONUM
              AND JT.JOB_TASK_STATUS_ID = JTS.JOB_TASK_STATUS_ID
              AND JT.WORK_ORDER_ID = WOC.WORK_ORDER_ID
              and jt.job_task_id = mw.wonum
              AND MW.STATUS IN
                     ('APPR',
                      'SCHED',
                      'INPRG',
                      'FNACCEPT',
                      'WMATL',
                      'WKCOMP',
                      'COMP')
              AND WOC.COMPANY_ID = '21'
              AND MW.SITEID <> 'NUCDEV'
              AND DECODE (
                     INSTR (JTS.DESCRIPTION, '-', 1),
                     0, JTS.DESCRIPTION,
                     SUBSTR (JTS.DESCRIPTION,
                             1,
                             (INSTR (JTS.DESCRIPTION, '-', 1) - 1))) <>
                     MW.STATUS
              AND JT.LEVEL_NUMBER = '3'
              AND MW.STATUSDATE < SYSDATE - 1
              AND MW.WONUM <> 'UNDEFINED') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:00:56.170

正如错误所示，您的 SET 语句中的子查询返回多个值：

```
SELECT JTS1.JOB_TASK_STATUS_ID
             FROM MAXIMO_WO MW1
                  INNER JOIN job_task_status jts1
                     ON MW1.STATUS = jts1.description
                     INNER JOIN JOB_TASK JT1
                     ON jt1.job_task_id = mw1.wonum 
```

因为这个查询无论如何都没有连接到您的外部 UPDATE 语句。我知道，我知道，您对 JOB_TASK 表使用了相同的别名！但就 Oracle 而言，这只是巧合，因为您将 JOB_TASK 表重新加入到查询中。这个查询基本上会返回*每个*job_task、它的工单数据和它的任务状态。

您需要的只是引用您的外部别名：

```
UPDATE JOB_TASK JT1
   SET JT1.job_task_status_id =
          (SELECT JTS1.JOB_TASK_STATUS_ID
             FROM MAXIMO_WO MW1
                  INNER JOIN job_task_status jts1
                     ON MW1.STATUS = jts1.description
                     and MW1.MoNum = jt1.job_task_id )
... 
```

这将正确使用您外部 JOB_TASK 的 job_task_id 来获取其 task_status_id。

# ruby - 跟踪在每个网站上花费的时间

> ID：15930681
> 
> 赞同：3
> 
> 时间：2013-04-10T15:53:50.517
> 
> 标签：ruby, time, web, browser-plugin

有没有办法跟踪您在每个网站上花费的时间？理想情况下，我想要一些可以插入到浏览器中的东西，它可以为我提供可以传递给 Ruby 程序的信息。每天它可能会输出如下内容：

```
http://www.google.com => 45.02 minutes
http://www.espn.com => 34.21 minutes
http://www.facebook.com => 26.35 minutes 
```

如果这不存在，你会用什么来构建它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-26T20:45:08.580

如果您使用 Firefox，您可以编写一个greasemonkey 脚本来执行此操作。还有一个插件可以为您执行此操作：[https ://addons.mozilla.org/En-us/firefox/addon/leechblock/](https://addons.mozilla.org/En-us/firefox/addon/leechblock/)

它的主要目的是阻止浪费时间的网站，但它也可以跟踪您在一个网站或网站块上花费的时间。

如果您使用 Chrome，则此时间跟踪器似乎可以满足您的要求：[https ://chrome.google.com/webstore/detail/timestats/ejifodhjoeeenihgfpjijjmpomaphmah?hl=en](https://chrome.google.com/webstore/detail/timestats/ejifodhjoeeenihgfpjijjmpomaphmah?hl=en)

# jquery - 尝试使用 knockoutjs 从 JSON 自动刷新

> ID：15930682
> 
> 赞同：1
> 
> 时间：2013-04-10T15:53:54.253
> 
> 标签：jquery, json, knockout.js

我正在尝试使用 AJAX JSON 请求来使用来自服务器的最新值自动刷新页面上显示的数据。

这是我的javascript：

```
function ExampleViewModel() {
    var self = this;
    self.ExampleData = ko.observableArray([]);

    $.getJSON("/JSONExample", function (allData) {
        var mappeddata = $.map(allData, function (item){
            return new DataItem(item)
        });
        self.ExampleData(mappeddata);
    })

    window.setTimeout(ExampleViewModel, 5000);
}

function DataItem(data) {
    //console.log(data);
    this.Name = ko.observable(data.Name);
    this.Price = ko.observable(data.Price);
}

ko.applyBindings(new ExampleViewModel()); 
```

这是我的 HTML：

```
<div id="knockout">
    <table>
        <thead>
            <tr>
                <th>Name</th><th>Price</th>
            </tr>
        </thead>
        <tbody data-bind="foreach: ExampleData">
            <tr>
                <td data-bind="text: Name"></td>
                <td data-bind="text: Price"></td>
            </tr>    
        </tbody>
    </table>
</div> 
```

它正确地提取了 JSON，并在第一次迭代时正确显示。输出如下所示：

```
Name        Price
Item1       $150.00
Item2       $20.00
Item3       $99.99 
```

在随后的迭代中，它会提取 JSON，如果我更改服务器上的数据（例如，如果我将 Item1 的价格更改为 200.00 美元），它确实会在 JSON 中获取更新的数据。但是，UI 不会刷新 - 它只会显示初始数据，直到我刷新整个页面。

我相信我对淘汰赛绑定的工作方式有误解，否则我的方法完全不适合我正在尝试做的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T16:22:22.277

结帐[演示](http://jsfiddle.net/gurkavcu/rsvLj/)

您必须保留 ExampleViewModel 的实例并将该实例用于所有内容。

```
function getRandomData() {
    return [{
        "Name": "Apple",
        "Price": (Math.random()*10)+1},
    {
        "Name": "Orange",
        "Price":(Math.random()*10)+1},
    {
        "Name": "Banana",
        "Price": (Math.random()*10)+1},
    {
        "Name": "Melon",
        "Price": (Math.random()*10)+1}];
}

function ExampleViewModel() {
    var self = this;
    self.ExampleData = ko.observableArray([]);    
    self.update = function() {
          $.ajax("/echo/json/", {
            data: {
                json: ko.toJSON(getRandomData())
            },
            type: "POST",
            dataType: 'json',
            success: function(allData) {        
                var mappeddata = $.map(allData, function (item){
                    return new DataItem(item)
                });
                self.ExampleData(mappeddata);
            }
        }); 
    }  
}

function DataItem(data) {
    //console.log(data);
    this.Name = ko.observable(data.Name);
    this.Price = ko.observable(data.Price);
}

var exampleViewModel = new ExampleViewModel();
window.setInterval(exampleViewModel.update,1000);
ko.applyBindings(exampleViewModel); 
```

还要注意在 setTimeout & Interval 的回调函数中直接使用这个关键字。改用“自我”。签出[这个问题部分](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout#The_%27this%27_problem)

# xpath - 在 Selenium IDE 中单击包含部分 id 和标题的 XPath 按钮

> ID：15930683
> 
> 赞同：22
> 
> 时间：2013-04-10T15:53:57.290
> 
> 标签：xpath, selenium, selenium-ide

使用 Selenium IDE，我正在尝试使用带有部分 id 和元素标题的 XPath 在网页上的表格中单击一个按钮。我使用的 XPath 是：

```
xpath=//*[contains(@id, 'ctl00_btnAircraftMapCell')]//*[contains(@title, 'Select Seat')] 
```

这就是我试图单击的按钮示例的整个 html 代码：

```
<li id="ctl00_MainContent_repAircraftMap_ctl20_repAircraftMapRow‌​_ctl00_liAircraftMap‌​Cell" class=""> 
    <a id="ctl00_MainContent_repAircraftMap_ctl20_repAircraftMapRow‌​_ctl00_btnAircraftMa‌​pCell" href="javascript:void(0)" seatnumber="20A" mapbindattribute="1124" title="Select Seat 20A" onclick="SeatClick(1124);"></a> 
</li> 
```

我构造不正确吗？它不工作！

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-04-11T08:29:13.367

现在您已经提供了 HTML 示例，我们可以看到您的 XPath 有点错误。虽然它是有效的 XPath，但它在*逻辑上*是错误的。

你有：

```
//*[contains(@id, 'ctl00_btnAircraftMapCell')]//*[contains(@title, 'Select Seat')] 
```

翻译成：

给我*所有*具有`ID`包含的元素`ctl00_btnAircraftMapCell`。在这些元素中，获取*任何*具有`title`包含的子元素`Select Seat`。

你*真正*想要的是：

```
//a[contains(@id, 'ctl00_btnAircraftMapCell') and contains(@title, 'Select Seat')] 
```

翻译成：

获取*所有***同时**具有的**锚**元素：一个包含和一个包含。**`id``ctl00_btnAircraftMapCell``title``Select Seat`**

# html - 是否可以将 Facebook 页面的“推荐框”整合到网站中？

> ID：15930686
> 
> 赞同：1
> 
> 时间：2013-04-10T15:54:03.960
> 
> 标签：html, facebook, facebook-page

我说的不是显示相关页面/链接[的东西](https://developers.facebook.com/docs/reference/plugins/recommendations/)，我说的是显示在页面上的框：

![脸书推荐](https://i.stack.imgur.com/7cxLF.jpg)

我在 Facebook 上找不到任何有关它的信息 - 出现的只是上面链接的“推荐框”。事实上，该框最近消失了，我们不得不采用一些复杂的方法使其再次出现（添加地址并确保显示地图）。

我们希望在我们网站的推荐页面上显示这些建议。有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:37:20.803

不，没有显示此信息的社交插件，也没有返回这些建议的 API

# c - 如何在c中找到字符串的位模式

> ID：15930688
> 
> 赞同：2
> 
> 时间：2013-04-10T15:54:26.333
> 
> 标签：c

我有以下两个问题

1.  给定这样的语句 char * str = "999999999999"; 编译器如何确定在堆栈上分配多少空间？

2.  如何遍历 str 指向的内存并确定其中各个位的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:56:43.510

1.  `"999999999999"`不在堆栈上。指针可能在堆栈上，编译器知道指针应该有多大。确实有一个空 `"999999999999"`终止，让您知道它何时结束。

2.  要遍历每一位，可能是这样的：

    ```
    for(i=0; str[i]; i++)  // str[i] will evaluate to false(0) when that character is the null
        for(j=7; j>=0; j--)
            printf("%d", (str[i] >> j) & 0x01) 
    ```

    但我更喜欢以十六进制表示而不是二进制来查看位，所以我只想

    ```
    for(i=0; str[i]; i++)
        print("%X ", str[i]) 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:58:45.870

1) 在 C 中，字符串由设置为零的字节终止。因此，在您的示例中，将为该字符串分配 13 个字节 - 12 个字节用于 12 个 ascii 字符，1 个字节用于 '\0' 字符（NULL 终止符）。

2）您可以迭代它并包含一些按位算术：

```
for(i = 0; i < strlen(str); i++)
{
    for(j = 7; j >= 0; j--)
     printf("%d", (str[i] & (1 << j)) == 0 ? 0 : 1);
    printf(" ");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:57:21.753

1.  是字符串文字，编译器可以看到文字并计算所需的空间+空终止符

2.  str 是一个指针，它指向您枚举的字符数组中的第一个字符，就像您对任何数组一样。std 库提供了大量函数来帮助处理字符数组。

# wpf - Raising a user-defined event from a WPF control

> ID：15930695
> 
> 赞同：0
> 
> 时间：2013-04-10T15:54:56.587
> 
> 标签：wpf, xaml, events, custom-controls

I have a ListView control with support for incremental loading of large item collections. The loading of additional items is triggered when the user scrolls down to the bottom ListView's vertical scrollbar. I strive to use MVVM pattern in the implementation (no code-behind), but IMHO in this particular case it's not essential.

I am tinking about introducing a new event (e.g. NeedsMoreItems) and perhaps subclass ListView (ListViewWithIncrementalLoading) so the application won't need to do ScrollChanged events mapping. I haven't implemented custom events for XAML controls before, so I am not quite sure what's the easiest way to achive this. Do I need to create custom control? User control? Use attached events?

If you have code snippets from similar tasks, I will really appreciate it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:49:26.250

这不是完整的代码，因为这一切都很难开发，而且代码非常多（在软件 CCFinder 中使用），它也不完美，但它确实可以完成工作。

```
 <CCFinder:AnimatedScrollViewer VerticalScrollBarVisibility="{Binding IsItemsFound, Converter={StaticResource __boolToVisibilityConverter}}" Margin="36,211,38,72" 
                  ScrollChanged="ScrollViewer_ScrollChanged" HorizontalContentAlignment="Center" Focusable="False" x:Name="ScrolView1">

            <ItemsControl Name="_itemsControl"  ItemsSource="{Binding CurrentImages}"
            ... 
```

在代码隐藏中：

```
 private void ScrollViewer_ScrollChanged(object sender, ScrollChangedEventArgs e)
    {
        if (e.VerticalOffset + e.ViewportHeight == e.ExtentHeight)
        {
            var scroller = ((ScrollViewer)sender);
            scroller.ReleaseMouseCapture();
            scroller.InvalidateScrollInfo();
            ((OverviewViewModel)this.DataContext).ShowMoreTriggered();
        }
    } 
```

因此，重要的部分来了：在 ViewModel 类中，我将 MaximumImages 属性设置为更高的值……它从大约 50 开始，然后提高到 251，然后在再次触发时提高到 500。在 MaximumImages 的设置器中，通知 WPF 框架 CurrentImages 已更改，在 CurrentImages 获取器中我有很多笨拙的代码，它们意识到现在的 MaximumImages 数字比以前更高，并向 CurrentImages 添加新项目（全部在吸气剂）。不太好，但它可以工作并且主要在 ViewModel 类中：

```
 public void ShowMoreTriggered()
    {
        if (Photos != null && !ShowMoreTriggeredActive && MaximumImages < Photos.Count)
        {
            ShowMoreTriggeredActive = true;
            ThreadPool.QueueUserWorkItem(delegate
                                             {
                                                 Thread.Sleep(1000);
                                                 MaximumImages = MaximumImages < 251 ? 251 : 500;
                                                 Thread.Sleep(1500);
                                                 ShowMoreTriggeredActive = false;
                                             });
        }
    }

    private int _maximumImages;
    public int MaximumImages
    {
        get
        {
            return _maximumImages;
        }
        set
        {
            _maximumImages = value;
            InvokePropertyChanged("MaximumImages");
            InvokePropertyChanged("CurrentImages");
        }
    } 
```

当然，如果滚动事件达到最低点，引发用户定义的事件会更优雅，但我想它只会产生更多代码，而不是更少，因为无论如何它肯定会从 ScrollChanged 事件传播.

# c++ - getenv 函数未返回预期答案

> ID：15930696
> 
> 赞同：2
> 
> 时间：2013-04-10T15:54:57.487
> 
> 标签：c++, linux, ubuntu, environment-variables

我正在尝试访问我的环境变量之一，即`JAVA_HOME`. 为此，我正在使用`getenv()`函数，如下所示：

```
#include <iostream>
#include <string.h>

int main() {
    const char* env = getenv("JAVA_HOME");
    if(env != NULL)
        std::cout << "Environnement : " << env << std::endl;
    else
        std::cout << "NULL" << std::endl;
    return 0;
} 
```

我尝试`std::getenv("PATH");`了它返回的东西与`/etc/bash.bashrc`我放置`JAVA_HOME`变量的文件不同。

我希望`std::getenv("JAVA_HOME")`返回我放入`/etc/bash.bashrc`文件中的内容。现在它返回不同的东西。

如何获得正确的环境变量？我究竟做错了什么 ？

我在 Ubuntu 12.04 和 GCC 4.7.2 下使用 C++11 和 QtCreator

编辑：代码

*   Include[...] 是包含的简写

*   添加了 NULL 处理

编辑：进展

*   我试过`extern char **environ`了，但它不包含我需要的一个变量......

编辑：部分解决方案

正如我发现的那样，没有办法轻松地做这些事情。我在 IDE 中设置了个人环境变量来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:57:04.407

你的代码很好，除了你应该明确地处理 NULL 返回值`getenv()`。

几乎可以肯定，问题在于您如何运行代码。如果你：

1.  启动一个外壳；
2.  确保`$JAVA_HOME`在该外壳中正确设置（通过`bashrc`或任何其他方式）；
3.  从 shell 运行可执行文件；

我敢打赌它会正常工作。

# hyperlink - LoginView注销按钮未链接

> ID：15930697
> 
> 赞同：0
> 
> 时间：2013-04-10T15:54:59.150
> 
> 标签：hyperlink, umbraco, logout, loginview

我为我的 umbraco 网站使用了 LoginView 控件。我可以登录，但注销按钮没有链接，它只显示“注销”文本，无法单击它。

这是我的代码：

```
<asp:LoginView ID="lwLogin" runat="server">
<AnonymousTemplate>
    <asp:Login ID="lwLoginPanel" CssClass="panel-fieldset" UserNameLabelText="Email Address:" TitleText="" TitleTextStyle-CssClass="h3" runat="server">
            </asp:Login>
</AnonymousTemplate>
<LoggedInTemplate>
        <asp:LoginName
    <asp:LoginStatus ID="logStatus" runat="server" />
</LoggedInTemplate> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:55:25.277

在 LoggedInTemplate 中，您有一个未完成的控件定义：

```
<LoggedInTemplate>
        **<asp:LoginName**
    <asp:LoginStatus ID="logStatus" runat="server" />
</LoggedInTemplate> 
```

这可能会导致问题。您还可以向 LoginStatus 控件添加额外的属性：

```
<asp:LoginStatus ID="lgnStatus" runat="server" LogoutText="uitloggen" LogoutAction="Redirect" LogoutPageUrl="/loginpage"  /> 
```

# javascript - 在 clickEvent 时转换到新数据

> ID：15930699
> 
> 赞同：0
> 
> 时间：2013-04-10T15:54:59.960
> 
> 标签：javascript, d3.js, transition

我正在使用创建水平条形图的代码，我已[在此处](http://hdnrnzk.me/2012/07/04/creating-a-bar-graph-using-d3js/)访问表单并进行了一些修改以满足我的需要。

我希望通过单击其中一个条来转换到新数据集。

例如，如果有人点击 America，我想渲染一个包含美国州名及其值的新图表。

这是初始数据集

```
var countries = ['India', 'America', 'China', 'Russia', 'London'],
    value = [8, 4, 9, 12, 11]; 
```

这就是我希望它在单击美国或 4 栏时过渡到的内容

```
var AmericaS = ['MA','CA','NH'],
AmericaV = [10,9,11]; 
```

这是我到目前为止的代码的jsfiddle：

[jsfiddle](http://jsfiddle.net/6HVmk/)

我一直在尝试不同的方法来做到这一点，但似乎没有任何效果。我真的很感激你能给我的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:47:19.747

看看[M.Bostocks 的示例](http://mbostock.github.io/d3/talk/20111116/bar-hierarchy.html)，如果我是正确的，这与您尝试做的类似。查看用于绘制图形的代码的页面源代码。

如果您想要一个传递的数据示例 -

```
var demoArray = {
    "name" : "aa",
    "children" : [{
        "name" : "analytics",
        "children" : [{
            "name" : "cluster",
            "children" : [{
                "test" : 'aaa',
                "name" : "AgglomerativeCluster",
                "size" : 3938
            }, {
                "test" : 'aaa',
                "name" : "CommunityStructure",
                "size" : 3812
            }, {
                "test" : 'aaa',
                "name" : "MergeEdge",
                "size" : 743
            }]
        }, {
            "name" : "graph",
            "children" : [{
                "test" : 'aaa',
                "name" : "BetweennessCentrality",
                "size" : 3534
            }, {
                "test" : 'aaa',
                "name" : "LinkDistance",
                "size" : 5731
            }]
        }]
    }]
}; 
```

将页面源代码的第 72-76 行替换为如下所示，

```
hierarchy.nodes(demoArray);
x.domain([0, demoArray.value]).nice();
down(demoArray, 0); 
```

或者只是将其放入 JSON 数组中。

希望这会对您有所帮助，如果不是道歉的话：D

# jakarta-mail - 为什么我可以在本地通过 gmail 发送电子邮件，但不能通过 ubuntu 服务器发送？

> ID：15930703
> 
> 赞同：1
> 
> 时间：2013-04-10T15:55:06.293
> 
> 标签：jakarta-mail

我使用 JavaMail 1.4.3 版，我可以在我的开发环境中发送电子邮件，但在 ubuntu 服务器中部署时无法发送电子邮件。我比较调试日志如下：不能接受smtp，但我的本地可以。有什么建议吗？我也在这里搜索[java邮件错误](https://stackoverflow.com/questions/2965251/javamail-with-gmail-535-5-7-1-username-and-password-not-accepted)

```
local:

    **DEBUG: setDebug: JavaMail version 1.4.3
DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc]
DEBUG SMTP: useEhlo true, useAuth true
DEBUG SMTP: useEhlo true, useAuth true
DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 465, isSSL false
220 mx.google.com ESMTP u9sm646165paf.22 - gsmtp
DEBUG SMTP: connected to host "smtp.gmail.com", port: 465
EHLO 10.37.129.2
250-mx.google.com at your service, [112.64.93.195]
250-SIZE 35882577
250-8BITMIME
250-AUTH LOGIN PLAIN XOAUTH XOAUTH2
250 ENHANCEDSTATUSCODES
DEBUG SMTP: Found extension "SIZE", arg "35882577"
DEBUG SMTP: Found extension "8BITMIME", arg ""
DEBUG SMTP: Found extension "AUTH", arg "LOGIN PLAIN XOAUTH XOAUTH2"
DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
DEBUG SMTP: Attempt to authenticate
DEBUG SMTP: check mechanisms: LOGIN PLAIN DIGEST-MD5 NTLM 

ubuntu:

DEBUG: setDebug: JavaMail version 1.4.3
DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc]
DEBUG SMTP: useEhlo true, useAuth true
DEBUG SMTP: useEhlo true, useAuth true
DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 465, isSSL false
220 mx.google.com ESMTP ed8sm502698qeb.7 - gsmtp
DEBUG SMTP: connected to host "smtp.gmail.com", port: 465

WkFRITJ3c3hjZGUz
535-5.7.1 Username and Password not accepted. Learn more at
535 5.7.1 http://support.google.com/mail/bin/answer.py?answer=14257 ed8sm502698qeb.7 - gsmtp
15:21:33,167 ERROR ~

@6e0gki7nd
The email has not been sent

Mail error
A mail error occured : Error while sending email

play.exceptions.MailException: Error while sending email
        at play.libs.Mail$2.call(Mail.java:186)
        at play.libs.Mail$2.call(Mail.java:178)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.commons.mail.EmailException: Sending the email to the following server failed : smtp.gmail.com:25
        at org.apache.commons.mail.Email.sendMimeMessage(Email.java:1242)
        at org.apache.commons.mail.Email.send(Email.java:1267)
        at play.libs.Mail$2.call(Mail.java:183)
        ... 6 more
Caused by: javax.mail.AuthenticationFailedException: 535-5.7.1 Username and Password not accepted. Learn more at
535 5.7.1 http://support.google.com/mail/bin/answer.py?answer=14257 ed8sm502698qeb.7 - gsmtp

        at com.sun.mail.smtp.SMTPTransport$Authenticator.authenticate(SMTPTransport.java:648)
        at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:583)
        at javax.mail.Service.connect(Service.java:313)
        at javax.mail.Service.connect(Service.java:172)
        at javax.mail.Service.connect(Service.java:121)
        at javax.mail.Transport.send0(Transport.java:190)
        at javax.mail.Transport.send(Transport.java:120)
        at org.apache.commons.mail.Email.sendMimeMessage(Email.java:1232)
        ... 8 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:49:41.430

最可能的解释是您认为在这两种情况下都使用相同的用户名和密码，但事实并非如此。

请注意，“AUTH LOGIN”之后的有趣文字是您的 base64 编码的用户名和**密码**。任何人都可以解码它们。如果不解码它们，我可以告诉您它们在两种情况下都不相同，可能是因为您以某种方式更改了调试输出。

检查您的程序并确保您在两种情况下都使用相同的用户名和密码。

# matlab - GUI Matlab中的toc向量

> ID：15930705
> 
> 赞同：0
> 
> 时间：2013-04-10T15:55:12.207
> 
> 标签：matlab, user-interface, vector, tableofcontents

我使用 GUIDE 创建了一个 GUI。我添加了执行任务的按钮。开始按钮，绘制图表并播放我分配给它的波形文件。在开始按钮中，我还添加了一个“tic”。

GUI 的另一侧是另一个按钮，即保存按钮。该按钮的功能是将我按下按钮的确切时间保存到向量中。我使用的代码只保存了最后一个实例，而我希望能够看到该向量的所有元素。

```
 handles.counter.push(handles.count + 1)
  handles.sfront(size(handles.counter)) = toc 
```

有没有办法将所有实例保存到 sfront 向量中？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:13:17.007

要将新元素添加到向量的末尾，请使用：

```
handles.sfront(end+1) = toc; 
```

然后调用 guidata(hObject,handles) 来存储句柄的更新版本。

我不能在这里重新创建你的整个 GUI，但这里有一个在向量中存储多个 toc 输出的示例。运行大约需要 10 秒：

```
tic
tocList = [];
for i = 1:5
    tocList(end+1) = toc;
    pause(2)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:02:45.200

您必须每次在回调函数结束之前存储句柄。

使用[GUIDATA](http://www.mathworks.com/help/matlab/ref/guidata.html)：

```
guidata(hObject,handles) 
```

# jquery - html template tag and jquery

> ID：15930706
> 
> 赞同：20
> 
> 时间：2013-04-10T15:55:13.443
> 
> 标签：jquery, html, html5-template, templatetag

I've got this situation where I'm trying to use the `<template>` tag in my html source:

```
<template id="some-id">
  <div id="content-container">
    <span>{{some_string}}</span>
  <div>
</template> 
```

This ends up placing the template in the document but it is not considered to be in the DOM. This means that $("#content-container") is not found in browsers that support template tags. If I search for:

```
$("#some-id") 
```

I get this back:

```
<template id=​"some-id">​
  #document-fragment
    <div id="content-container">
      <span>{{some_string}}</span>
    <div>
</template>​ 
```

None of this surprises me. What I need to know how to do is to clone the contents of the document-fragment and have a fresh node I can then stick into the DOM where I want it.

I have found examples of how to do this w/o jQuery but much of the code around this stuff is already using jQuery and I need to know how to use jQuery to do this.

My first thought was to get the html and then use it to create a new node:

```
stuff = $("#some-id").html()
new_node = $(stuff) 
```

This results in the following errors:

```
Error: Syntax error, unrecognized expression: <the html string> 
```

I don't know if the error is caused by the mustache syntax or not. I figure there has to be a jQuery solution to this behavior somewhere but when I search with Google I get craploads of hits for jQuery Templates, which are different.

Does anyone have thoughts, answers or pointers to sites/pages that will help me through this? I'm trying to avoid cobbling together something hackish.

EDIT: I ended up finding this solution (I'm still testing it to make sure it IS a solution but it looks promising);

```
template = $("#some-id")
content = template.html()
new_div = $("<div></div>")
new_div.html(content) 
```

I end up with that containing div that I didn't really need previously but I can live with that. But this kind of feels kludgy. Does anyone have a better approach to this? The upside is that it will still work in browsers that haven't adapted the template tag behavior fully yet.

thanks!

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-11-24T18:58:43.250

尝试：

```
var myTemplate = $("#some-id").html().trim();
var myTemplateClone = $(myTemplate); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-15T01:30:33.083

我相信这个站点将有助于解释 shadow dom 的工作原理以及模板如何与它们交互。 [http://robdodson.me/blog/2013/08/27/shadow-dom-the-basics/](http://robdodson.me/blog/2013/08/27/shadow-dom-the-basics/)

此外，克隆影子模板的节点实际上非常简单，甚至不需要使用 jquery。

这是一个演示它的 jfiddle：http: [//jsfiddle.net/dtracers/fhWc3/1/](http://jsfiddle.net/dtracers/fhWc3/1/)

HTML：

```
<div id = "hoster">
    <span class = "title">Title</span>
    <span class = "id">51ab89af</span>
</div>

<template id = "im-a-template">
    <h1><content select =".title"></content></h1>
    <h1>Class Id: <content select = ".id"></content></h1>
    <input type="text" placeholder = "Name"></input>  
</template> 
```

Javascript：

```
// find where you want to put your shadow dom in
var host = document.querySelector('#hoster');

var root = host.createShadowRoot(); // create the host root

var template = document.querySelector('#im-a-template');

// this is the node of the object you wanted
var documentFragment = template.content;

// this is a cloned version of the object that you can use anywhere.
var templateClone = documentFragment.cloneNode(true);

root.appendChild(templateClone); // this empty root now has your template 
```

# ios - 在检测到隐私设置更改时让应用程序自行重启

> ID：15930708
> 
> 赞同：17
> 
> 时间：2013-04-10T15:55:16.450
> 
> 标签：ios, cocoa-touch

我有一个使用该`ALAssets`框架访问用户照片库的应用程序。我编写了一些代码来检测应用程序是否有权访问照片库，如果没有，我会显示一条警告消息，告诉用户在设置中为应用程序打开位置服务。

问题是，当用户手动更改隐私设置然后重新打开应用程序时，iOS 会强制应用程序因 SIGKILL 崩溃。

我注意到另一个应用程序处理此问题的方式是通过某种方式检测隐私设置的更改，并在用户下次打开它时强制应用程序重新启动。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-10T16:04:59.657

你误解了正在发生的事情。您的应用程序没有崩溃（尽管如果您使用调试器运行应用程序，它可能会出现）。

当您切换到设置应用程序（并且您的应用程序在后台暂停）并更改隐私设置时，暂停的应用程序将被终止。当您切换回您的应用程序时，它只是再次启动。这与您的应用因任何其他原因被杀死没有什么不同。

您可以对应用程序进行编码以通过恢复其先前状态来处理此问题。您谈论的另一个应用程序只是将用户返回到以前的状态。许多应用程序都这样做。它与因隐私更改而被杀死无关。该应用程序会在因任何原因被杀死时恢复状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:59:05.233

[`authorizationStatus`您可以使用 的类方法](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009722)检查您是否被授权访问照片库`ALAssetsLibrary`。您应该在每次您的应用“打开”时调用的某种方法中检查此值，并相应地更新您的 UI。

# backbone.js - 添加模块会导致额外的http请求

> ID：15930718
> 
> 赞同：0
> 
> 时间：2013-04-10T15:55:39.200
> 
> 标签：backbone.js, requirejs

在我的路由器文件中添加 Backstack 作为测试应用程序的模块时，它会引发错误 404 loadingbone.js

我不知道是什么原因，但是添加了一个额外的 http get 请求 js/Backbone.js 然后抛出 404，因为我的库只有在 js/libs 文件夹中。

可能是什么问题？

```
// index.html
<!DOCTYPE html>
<html>
<head>
<title>Starting Require</title>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0"/>
<script data-main="js/main" src="js/libs/require.js"></script>
</head>
<body>
<div id="content">
</div>
</body>

// main.js
requirejs.config({
paths : {
  'jquery' : 'libs/jquery-1.8.2.min',
  'underscore' : 'libs/underscore',
  'backbone' : 'libs/backbone',
  'backstack' : 'https://github.com/pwalczyszyn/backstack/blob/master/backstack'
},
shim: {
    'backbone': {
        deps: ['underscore', 'jquery'],
        exports: 'Backbone'
    },
    'backstack': {
        deps: ['backbone', 'underscore', 'jquery'],
    },
    'underscore': {
        exports: '_'
    }
}
});
require([
  'app',
    ], function(App){
  App.initialize();
});

// app.js
define([
'jquery', 
'underscore', 
'backbone',
'router'
], function($, _, Backbone, Router){
var initialize = function(){
Router.initialize();
};
return { 
initialize: initialize
};
});

// router.js
define([
'jquery',
'underscore',
'backbone',
'backstack'
], function($, _, Backbone, Backstack) {

var AppRouter = Backbone.Router.extend({
routes: {
  '': 'welcome'
}
});

var initialize = function(){
var app_router = new AppRouter;
app_router.on('route:welcome', function(){
    $('#content').html('Hello World!');
});
  };
  return { 
    initialize: initialize
  };
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:45:29.600

[backstack 使用`Backbone`模块名称](https://github.com/pwalczyszyn/backstack/blob/9a9e0f6cb5b0466feb1bbb25b953d0ed993d9b3a/backstack.js#L25)，而不是`backbone`.

此小提琴仅使用大写的`Backbone`模块名称，并且没有额外的模块负载。

[http://jsfiddle.net/MUSBk/](http://jsfiddle.net/MUSBk/)

或者你可以定义一个别名（如果你放在一个名为的文件中，请省略模块名称`Backbone.js`） - [http://jsfiddle.net/3UXGZ/1/](http://jsfiddle.net/3UXGZ/1/)

```
define('Backbone', ['backbone'], function (Backbone) {
    return Backbone;
}); 
```

我不确定您是否可以使用您的`path`配置将新`Backbone`模块指向您现有的 Backbone JS，因为这可能会加载与 Backbone 的第二个实例相同的文件，这可能会导致问题。

# python - OpenERP Payroll Loan Deduction

> ID：15930722
> 
> 赞同：2
> 
> 时间：2013-04-10T15:55:55.437
> 
> 标签：python, openerp

Can anyone help me with a formula or process to deduct loans taken by employees from their salary/wages please? Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:14:02.700

通过配置工资和薪金结构为员工创建合同。在薪金结构中，为具有扣除类型的房屋贷款添加新规则，并指定带有负 (-) 号的固定/百分比金额作为其扣除。转到员工工资单，选择一名员工并单击计算表。您将在薪资计算选项卡中看到薪资结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:33:56.767

您可以制定这样的规则并将其添加到员工的工资结构中

这是固定示例，当您单击计算表时，它会从金额中扣除

![在此处输入图像描述](https://i.stack.imgur.com/uAJLm.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T06:51:58.277

您可以在 Salary Rule 中创建新的贷款扣除规则并在此处指定 Amount 类型。

这一新规则将在从公司贷款的员工薪酬睡眠结构中生效。

# c# - change tcp/ip port for sql server express using C#

> ID：15930724
> 
> 赞同：3
> 
> 时间：2013-04-10T15:55:56.073
> 
> 标签：c#, sql-server-2008, tcp

I am deploying SQL Server Express with my application and I need to have C# code that changes the TCP/IP properties without changing them in SQL Server Configuration Manager.

The following code stops SQL Server then it changes the tcp port to 1433 and then starts SQL Server again. The code works fine on a Windows XP machine; however, it errors out on a Windows 7 machine. The error occurs on the `prot.Alter();` line.

```
try
{
    Service Mysvc = mc.Services["MSSQL$SQL" + machineName];

    if (Mysvc.ServiceState == ServiceState.Running)
    {
       MessageBox.Show("Stopping Service","PMP");
       Mysvc.Stop();
    }

    ServerInstance s = mc.ServerInstances["SQL" + machineName];
    ServerProtocol prot = s.ServerProtocols["Tcp"];
    prot.IPAddresses[0].IPAddressProperties["TcpPort"].Value = "1433";
    prot.Alter();

    MessageBox.Show("Starting Service","PMP");
    Mysvc.Start();
}
catch (Exception e)
{
    MessageBox.Show("Error in setting TCP Port " + e.ToString(),"PMP");
} 
```

The following error message is what I receive when I run it on a Windows 7 machine:

> SqlServer.Management.Smo.FailedOperationException: Alter failed. ---> Microsoft.SqlServer.Management.Smo.FailedOperationException: SetStringValue failed for ServerIPAddress 'IPAll'. ---> System.NullReferenceException: Object reference not set to an instance of an object.
> at System.Management.ManagementObject.MapOutParameters(Object[] args, ManagementBaseObject >outParams, IWbemClassObjectFreeThreaded outParamsClass)
> at System.Management.ManagementObject.InvokeMethod(String methodName, Object[] args)
> at Microsoft.SqlServer.Management.Smo.Wmi.WmiSmoObject.InvokeMgmtMethod(ManagementObject mo, >ManagementOperationObserver observer, String methodName, Object[] parameters)
> 
> --- End of inner exception stack trace ---
> at Microsoft.SqlServer.Management.Smo.Wmi.WmiSmoObject.InvokeMgmtMethod(ManagementObject mo, >ManagementOperationObserver observer, String methodName, Object[] parameters)
> at Microsoft.SqlServer.Management.Smo.Wmi.WmiSmoObject.AlterProtocolProperties (ProtocolPropertyCollection protocolProperties)
> at Microsoft.SqlServer.Management.Smo.Wmi.ServerIPAddress.AlterImplWorker()
> --- End of inner exception stack trace ---
> at Microsoft.SqlServer.Management.Smo.Wmi.ServerIPAddress.AlterImplWorker()
> at Microsoft.SqlServer.Management.Smo.Wmi.ServerProtocol.AlterImplWorker()
> at Microsoft.SqlServer.Management.Smo.Wmi.ProtocolBase.Alter()
> --- End of inner exception stack trace ---
> at Microsoft.SqlServer.Management.Smo.Wmi.ProtocolBase.Alter()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-06T19:48:30.363

UAC 是这里的问题。以管理员身份运行将解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-28T17:45:54.233

该类`Service`不允许您在继续下一步操作之前等待服务启动或停止。正如您的代码所代表的那样，该服务被发送一个停止命令，但在服务停止之前继续执行。

您可以通过重构类来解决此问题`ServiceController`：

```
using Microsoft.SqlServer.Management.Smo.Wmi;

const string instanceName = "SQLEXPRESS";

var managedComputer = new ManagedComputer();

var serviceController = new ServiceController(string.Concat("MSSQL$", instanceName));

var serverInstance = managedComputer.ServerInstances[instanceName];

var serverProtocol = serverInstance?.ServerProtocols["Tcp"];

var ipAddresses = serverProtocol?.IPAddresses;

if (ipAddresses != null)
{
    for (var i = 0; i < ipAddresses?.Count; i++)
    {
        var ipAddress = ipAddresses[i];

        if (!string.Equals(ipAddress.Name, "IPAll"))
        {
            continue;
        }

        if (serviceController.Status == ServiceControllerStatus.Running)
        {
            serviceController.Stop();

            serviceController.WaitForStatus(ServiceControllerStatus.Stopped);
        }

        ipAddress.IPAddressProperties["TcpDynamicPorts"].Value = "0";
        ipAddress.IPAddressProperties["TcpPort"].Value = "1433";

        serverProtocol.Alter();

        break;
    }
}

if (serviceController.Status == ServiceControllerStatus.Running)
{
    return;
}

serviceController.Start();

serviceController.WaitForStatus(ServiceControllerStatus.Running); 
```

# python - matplotlib 3D 带状图

> ID：15930727
> 
> 赞同：5
> 
> 时间：2013-04-10T15:56:06.477
> 
> 标签：python, numpy, matplotlib, scipy, 3d

我正在使用 NumPy 1.6.2、SciPy 0.11.0、Matplotlib 1.1.1。我可以像图片中那样绘制色带吗？

![在此处输入图像描述](https://i.stack.imgur.com/E9geK.gif)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T07:31:43.237

这是完整的代码。

```
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.mlab import griddata
from mpl_toolkits.mplot3d import Axes3D

data=np.genfromtxt('fluorescence_2.txt')
x=data[:,0]
fig=plt.figure()
ax=fig.gca(projection='3d')

for i in range(1,17,2):
    y=data[:,i]
    z=data[:,i+1]
    xi=np.linspace(min(x),max(x))
    yi=np.linspace(min(y),max(y))
    X,Y=np.meshgrid(xi,yi)
    Z=griddata(x,y,z,xi,yi)
    ax.plot_surface(X,Y,Z,rstride=50,cstride=1,cmap='RdYlBu')
    ax.set_zlim3d(np.min(Z),np.max(Z))

ax.set_title('Fluorescence spectra (WL ex = 350 nm)')
ax.set_xlabel('WL em (nm)')
ax.set_ylabel('Spectrum')
ax.set_yticks([])
ax.set_zlabel('Emission')
plt.show() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-28T09:26:08.987

在我以前的版本中，必须在加载到脚本之前更改数据表结构。以下版本是我的最后一个版本，它直接根据原始数据绘制色带，一个简单的吸光度表。

```
import itertools
import numpy as np
from matplotlib.mlab import griddata
from mpl_toolkits.mplot3d import Axes3D
from pylab import *
matplotlib.rcParams.update({'font.size':10})
spectra=loadtxt('C:/.../absorbance.txt')
fig=figure()
ax=fig.gca(projection='3d')
for i in range(0,7+1):
    y=spectra[:,i]
    x=sorted(range(1,len(y)+1)*2)
    a=[i,i+1]*len(y)
    b=list(itertools.chain(*zip(y,y)))
    xi=np.linspace(min(x),max(x))
    yi=np.linspace(min(a),max(a))
    X,Y=np.meshgrid(xi,yi)
    Z=griddata(x,a,b,xi,yi)
    ax.plot_surface(X,Y,Z,rstride=50,cstride=1,cmap='Spectral')
    ax.set_zlim3d(np.min(Z),np.max(Z))

ax.grid(False)
ax.w_xaxis.pane.set_visible(False)
ax.w_yaxis.pane.set_visible(False)
ax.w_zaxis.pane.set_color('gainsboro')
ax.set_title('Molecular spectra')
ax.set_xlim3d(0,23)
ax.set_xticks([1.6735,6.8367,12.0000,17.1633,22.3265])
ax.set_xticklabels(['350','400','450','500','550'])
ax.set_xlabel('Wavelength (nm)')
ax.set_yticks([0.5,1.5,2.5,3.5,4.5,5.5,6.5,7.5,8.5])
ax.set_yticklabels(['1','2','3','4','5','6','7','8'])
ax.set_ylabel('Spectrum')
ax.set_zlim3d(0,2)
ax.set_zlabel('Absorbance')
show() 
```

![吸光度](https://i.stack.imgur.com/4Xm7r.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-19T14:29:41.350

这是创建功能区图的工作代码。它基于 mplot3d 示例代码：surface3d_demo.py，然后修改以创建功能区。我的代码不是最有效的方法，但它确实有效。

```
from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm
from matplotlib.ticker import LinearLocator, FormatStrFormatter
import matplotlib.pyplot as plt
import numpy as np

#create data
x = np.linspace(-10,5,200)
y = np.linspace(-5,5,40)
xGrid, yGrid = np.meshgrid(y, x)
z = np.sin(np.sqrt(xGrid**2 + yGrid**2))

numPts = x.shape[0]
numSets = y.shape[0]

fig = plt.figure()
ax = fig.gca(projection='3d')

#plot each "ribbon" as a surface plot with a certain width
ribbonWidth = 0.75
for i in np.arange(0,numSets-1):
    X = np.vstack((x,x)).T
    Y = np.ones((numPts,2))*i
    Y[:,1] = Y[:,0]+ribbonWidth
    Z = np.vstack((z[:,i],z[:,i])).T
    surf = ax.plot_surface(X,Y,Z, rstride=1, cstride=1, cmap=cm.jet,
                           linewidth=0, vmin=-1, vmax=1)

ax.zaxis.set_major_locator(LinearLocator(10))
ax.zaxis.set_major_formatter(FormatStrFormatter('%.02f'))
ax.set_xlabel('Data Points')
ax.set_ylabel('Data Set Number')
ax.set_ylim((0,numSets))
ax.set_zlabel('Z')
ax.set_zlim((-1, 1))
fig.colorbar(surf, shrink=0.5, aspect=5)

plt.show() 
```

# c# - 将 CTRL+C 发送到进程而不杀死我的窗口

> ID：15930728
> 
> 赞同：1
> 
> 时间：2013-04-10T15:56:06.743
> 
> 标签：c#, process, cmd

我有一个控制台应用程序，它产生一个“cmd mcast /recv ... > somefile.txt”

（process.standardoutputstream 不能与 mcast 一起正常工作，如果您想对此问题做出贡献，请参阅[重定向标准输出，未引发事件](https://stackoverflow.com/questions/15874251/redirecting-standard-output-event-is-not-raised/15909396?noredirect=1#15909396)）

我需要向 mcast 发送一个 ctrl+c 并使用以下代码：

```
 [DllImport("kernel32.dll")]
   static extern bool GenerateConsoleCtrlEvent(
   uint dwCtrlEvent,
   uint dwProcessGroupId);

    void start(string path)
    {
        currentProcess = new Process();
        currentProcess.StartInfo.FileName = @"C:\WINDOWS\system32\cmd.exe";
        currentProcess.StartInfo.Arguments = "/C " + "mcast /recv /grps:239.255.0.1 /dump:3"
                    + " > " + path;
        currentProcess.StartInfo.UseShellExecute = false;
        currentProcess.Start();
     }

     void Stop()
     {
        Process mcast = Process.GetProcessesByName("mcast")[0];
        GenerateConsoleCtrlEvent(0 /*CTRL_C_EVENT*/, (uint)mcast.SessionId);
      } 
```

但是 mcast 与我的程序共享控制台，并且 mcast 的 sessionid 为零。所以我的程序也收到一个 CTRL+C 并终止（这真的不是我想要做的），有什么想法吗？

编辑：我所有的研究表明，不可能将 CTRL+C 事件发送到另一个进程。只能发送 WIN_CLOSE 事件，控制台进程会忽略这些事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:04:53.580

您可以尝试调用`currentProcess.CloseMainWindow()`，这应该会关闭 cmd.exe，并且 cmd 希望可以正确关闭正在执行的应用程序。

# visual-studio-2008 - OpenNI2项目与CMake奇怪的sintax错误与uint16_t

> ID：15930736
> 
> 赞同：4
> 
> 时间：2013-04-10T15:56:20.047
> 
> 标签：visual-studio-2008, cmake, openni

我按照通常的步骤制作了一个使用**OpenNI2**和**NITE2的 CMake 项目。**CMake 能够找到 NITE 和 OpenNI 的包含和库的路径。Visual Studio 中的项目链接库并正确包含。

到目前为止，一切看起来都是正确的，但是当我编译时（没有链接错误），文件 OnyCTypes.h 出现奇怪的 sintax 错误。错误如下：

```
Error1 error C2146: syntax error : missing ';' before identifier 'usbVendorId'  c:\program files (x86)\openni2\include\OniCTypes.h  84 
```

我还将文件夹**Openni/Redist**的内容复制到 Visual Studio 项目的同一文件夹中，所以我无法猜测是什么导致了错误。

我还能检查什么？有人对 OpenNI2 有过类似的错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T07:57:45.490

uint16_t 属于 stdint.h[看看](http://www.nongnu.org/avr-libc/user-manual/group__avr__stdint.html)

这个库默认不包含在VS2008中，下载它并包含在CMake中以运行项目而不会出现链接问题。

# ajax - Internet Explorer ajax 响应问题

> ID：15930737
> 
> 赞同：1
> 
> 时间：2013-04-10T15:56:27.820
> 
> 标签：ajax, json, internet-explorer, upload, fine-uploader

我有一个文件上传插件（jQuery Fine Upload）。使用这个插件，我通过 AJAX 上传图像，并从响应 (JSON) 生成预览图像。这在主要浏览器中运行良好，除了所有版本的 Internet Explorer，因为这个 sh... 想要打开带有 .js 扩展名的 JSON 响应。当文件输入发生变化时触发该事件。请看下面的代码：

```
initFileuploader: function() {
    $('#imageUploadWrapper').fineUploader({
        request: {
            uuidName: 'uploadId',
            inputName: 'upload',
            endpoint: '/admin/model/media/image/upload', 
            params: {
                format: 'json'
            }
        },
        // debug: true, // ##### !!!!! #####
        autoUpload: true,
        responseJSON: true,
        deleteFile: {
            enabled: true,
            forceConfirm: true
        }
    }).on('complete', function(event, id, name, response) {

        var elem = $('.qq-upload-list li')[id];

        $(elem).prepend('<div class="previewContainer"></div>').addClass('cf');
        $(elem)
            .children('.previewContainer')
            .append($('<img src="/admin/model/media/image/view/tmp/'+response.result[0].name+'" class="previewItem"/>'));

    });
} 
```

这是 JSON 响应：

```
{
    "success": true,
    "version": "1.0",
    "code": 200,
    "result": [{
        "name": "08390ab5-0c1d-4801-bef9-7bfd5d446776.jpg",
        "type": "image\/pjpeg",
        "error": 0,
        "size": 845941
    }],
    "error": ""
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:38:36.800

如文档中所述，您的响应的 Content-Type 标头必须具有“text/plain”值。如果您的响应的 Content-Type 是“application/json”，正如我认为的那样，您将遇到您正在观察的问题。

# ruby-on-rails - ActiveRecord 中的 model_name.new() 是否只创建新记录或更新现有记录

> ID：15930739
> 
> 赞同：0
> 
> 时间：2013-04-10T15:56:32.060
> 
> 标签：ruby-on-rails, ruby, activerecord, rake, pg

我有一个模型，我在下面的 ruby​​ 脚本中使用了活动记录。诸如 level_type、name、parent.id 和 pipcode 之类的内容被分配给模型的属性，以便进入级别表。我的问题是，这仅适用于新记录吗？您会看到，名称、parent.id 和 pipcode 经常更改。我不希望它在每次这些值更改时创建新记录。我希望它使用来自 pipcode、parent.id 等的新值更新现有记录。

我的记录创建代码：

```
 new_region = Level.new(
            :level => level_type,
            :name => name,
            :parent_id => parent.id,
            :make_code => pipcode
          ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:22:01.420

Level.new(...) 通常用于在调用 new_region.save() 时创建新行

如果你想更新，首先你需要通过调用类似的方法找到你想更新的行：

```
# if patient_id is the primary key
existing_region = Level.find(patient_id) 
```

此时，您可以更新existing_region 的参数并调用.save() 来更新数据库。

```
existing_region.level = level_type
existing_region.name = name
...
existing_region.save() 
```

# powershell - Powershell如何将数字添加到变量中

> ID：15930742
> 
> 赞同：4
> 
> 时间：2013-04-10T15:56:39.243
> 
> 标签：powershell

如何将一个数字添加到包含在变量中的另一个数字？

```
$t0 = Get-date -UFormat "%H%M"
$t1 = $t0 + 10 
```

所以，如果 $t0 是 1030，我会 $t1 值 1040。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T16:11:05.110

`[int]`在将值赋给 $t0 之前强制执行（`get-date -uformat`返回 [string] 类型）：

```
[int]$t0 = Get-date -UFormat "%H%M"
$t1 = $t0 + 10 
```

如果您更改顺序，powershell 的强制功能会给出预期值：

```
$t0 = Get-date -UFormat "%H%M"
$t1 = 10 + $t0 
```

因为第二个操作数被转换为第一个操作数的类型

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T16:05:12.243

做完之后`$t0 = Get-date -UFormat "%H%M"`，`$t0`不包含数字，而是一个String。您可以通过调用来验证这一点`$t0 | Get-Member`。

解决此问题的一种简单方法是将其强制转换为 int: `[int]$t0 + 10`，这将执行正常的整数加法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T16:04:42.517

这将做到：

```
$t1 = [int]$t0 + 10 
```

# python - 使用 python 或 awk 将表中的值插入到不同的表中

> ID：15930746
> 
> 赞同：-2
> 
> 时间：2013-04-10T15:56:46.910
> 
> 标签：python, awk

我在一个文件（文件-A）中有一个制表符分隔的表，如下所示：

```
ind1   A1   B1   C1   
ind2   A2   B2   C2   
ind3   A3   B3   C3 
```

另一个文件（文件-B）中的一列值按如下顺序排列：

```
ind1
X1
Y1
ind2
X2
Y2
ind3
X1
Y2 
```

我想合并这两个文件，以便文件-B（ind1、ind2 等）中每个人下列出的值插入与文件-A 中每个人相对应的“中间”值。对于这种特殊情况，输出应如下所示：

```
ind1   A1   X1   B1   Y1   C1
ind2   A2   X2   B2   Y2   C2
ind1   A3   X3   B3   Y3   C3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:16:31.550

我相信你的例子有错误：

file2 应该以

```
X3
Y3 
```

最后一行输出应该是：

```
ind3 ..... 
```

**这个 awk oneliner 适用于您的示例`：**

```
awk -F'\t' -v OFS='\t' 'NR==FNR{a[NR]=$0;next}{print $1,$2,a[(FNR-1)*3+2],$3,a[FNR*3],$4}' file2 file 
```

使用您的数据：

```
kent$  head file file2
==> file <==
ind1    A1      B1      C1
ind2    A2      B2      C2
ind3    A3      B3      C3

==> file2 <==
ind1
X1
Y1
ind2
X2
Y2
ind3
X3
Y3

kent$  awk -F'\t' -v OFS='\t' 'NR==FNR{a[NR]=$0;next}{print $1,$2,a[(FNR-1)*3+2],$3,a[FNR*3],$4}' file2 file
ind1    A1      X1      B1      Y1      C1
ind2    A2      X2      B2      Y2      C2
ind3    A3      X3      B3      Y3      C3 
```

# asterisk - 如何在星号中延迟 sip 183

> ID：15930747
> 
> 赞同：0
> 
> 时间：2013-04-10T15:56:53.560
> 
> 标签：asterisk, sip, voip

我的电话没有收到回铃音，但不到 4 秒就进入了 IVR 系统。当查看我端的 SIP 捕获并注意到 SIP 180 振铃消息之后立即是带有 SDP 的 SIP 183 会话进度。带有 SDP 的 SIP 183 表明我的星号服务器已准备好通过音频发送，并且由于音频流中没有响铃，因此没有观察到回铃。所以，请告诉我如何在 SIP 183 中设置延迟。

我在 centos 5 中使用星号 1.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:04:47.733

您不能在进度消息中放置任何延迟。

实际上你可以，但这需要重写 chan_sip.c（可能，但代价高昂）

您可以完全删除 183。见这篇文章：

[http://www.voip-info.org/wiki/view/Asterisk+sip+progressinband](http://www.voip-info.org/wiki/view/Asterisk+sip+progressinband)

# ruby - ruby中数字系列的正则表达式

> ID：15930748
> 
> 赞同：-1
> 
> 时间：2013-04-10T15:56:58.123
> 
> 标签：ruby, regex

我正在尝试匹配下面给出的模式

```
pattern: file.update.20120304.xml
     file.update.1.xml
     file.update.201203040002.xml 
```

如果我必须匹配留下数字 file.update..xml 的模式，我该怎么做 ruby​​？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:17:06.873

```
"file.update.20120304.xml"[/\d+/]     # => "20120304"
"file.update.1.xml"[/\d+/]            # => "1"
"file.update.201203040002.xml"[/\d+/] # => "201203040002" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:59:49.343

您可以使用[Regexp](http://ruby-doc.org/core-2.0/Regexp.html)和[gsub](http://ruby-doc.org/core-2.0/String.html#method-i-gsub)提取数字

```
filename = 'file.update.20120304.xml'
numbers = filename.gsub(/\Afile\.update\.(\d+)\.xml\z/, '\1') 
```

使用的正则表达式组成如下：

*   `file\.update\.`确保您拥有“file.update”的第一部分
*   中间部分`([0-9]+)`有一个或多个数字
*   一个结束部分`\.xml`，确保最后有“.xml”
*   锚点`\A`和`\z`字符串的开头和结尾

中间部分被包装`()`成一个正则表达式变量，您可以在替换字符串中重用它`\1`

**更新`variableName[/regular expression/]`**

```
filename = 'file.update.20120304.xml'
numbers = filename[/\Afile\.update\.(\d+)\.xml\z/, 1] 
```

它返回第一个捕获的组，即 between `()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T18:48:51.010

```
p "file.update.201203040002.xml".split(".") .map { |x|  x if x.to_i != 0}.compact[0].to_i
#=> 201203040002
p "file.update.20120304.xml".split(".") .map { |x|  x if x.to_i != 0}.compact[0].to_i
#=> 20120304 
```

# excel - 宏来计数并给出结果

> ID：15930750
> 
> 赞同：0
> 
> 时间：2013-04-10T15:56:58.230
> 
> 标签：excel, excel-formula, vba

谁能帮我。我想计算有多少数字 > 45，并将结果放在最后一个数据单元格下方 3 行。让我们给它一个名字——称之为结果。然后在结果的左侧，我想输入数字 > 45。数据行的数量会改变，所以当我在 D 列上运行宏时，它会找到最后一个数据点并进行计算。一些行将是空的。谢谢您的帮助

它应该是这样的

```
 50          
     20

        100
    120
     45
     30
     30 
```

返回 >45=4

```
Sub enter()
    Dim result As Integer
    Dim firstrow As Integer
    Dim lastwow As Integer
    Firstrow = d2 
    Result = ‘ Value of count
    Worksheets("sheet1").Range("c?").Value = "Total>45"
    Range("d100000").End(xlUp).Select
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:08:27.217

尝试这个

```
Sub Sample()
    Dim result As Long, firstrow As Long, lastrow As Long
    Dim ws As Worksheet
    Dim rng As Range

    '~~> Set this to the relevant worksheet
    Set ws = ThisWorkbook.Sheets("Sheet1")

    With ws
        '~~> Find Lastrow in Col D
        lastrow = .Range("D" & .Rows.Count).End(xlUp).Row
        '~~> Set First row
        firstrow = 1

        '~~> Set your range
        Set rng = .Range("D" & firstrow & ":D" & lastrow)

        '~~> Put relevant values
        .Range("C" & lastrow + 3).Value = "Total>45"
        .Range("D" & lastrow + 3).Value = _
        Application.WorksheetFunction.CountIf(rng, ">45")

    End With
End Sub 
```

**截屏**

![在此处输入图像描述](https://i.stack.imgur.com/ijl2U.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:52:08.817

这是一个可以让你通过任何数字，而不仅仅是 45

```
Sub MakeCount(lGreaterThan As Long)

    Dim lLast As Long

    With Sheet1
        lLast = .Cells(.Rows.Count, 4).End(xlUp).Row
        .Cells(lLast + 3, 4).FormulaR1C1 = "=COUNTIF(R[-" & lLast + 1 & "]C:R[-3]C,"">""&RC[-1])"
        .Cells(lLast + 3, 3).Value = lGreaterThan
        .Cells(lLast + 3, 3).NumberFormat = """Number>""#"
    End With

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:10:11.000

你不能使用像这样的工作表公式吗

`=COUNTIF(A2:A7,">45")`

**或者，正如Siddharth Rout**先生在他的回答中所建议的那样，在 VBA 中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T16:10:17.220

需要vba吗？

如果没有，该功能`=COUNTIF(C:C,">45")`会给你你想要的答案。

# c++ - lambda 是否像 C++ 中的函数一样内联？

> ID：15930755
> 
> 赞同：67
> 
> 时间：2013-04-10T15:57:06.143
> 
> 标签：c++, c++11, lambda, stl

编译器是否可以/是否内联 lambda 函数以提高效率，就像使用简单的标准函数一样？

例如

```
std::vector<double> vd;
std::for_each(vd.begin(), vd.end(), [](const double d) {return d*d;}); 
```

还是由于缺乏优化而导致效率损失？

第二个问题：我在哪里可以检查我使用的编译器是否优化了内联函数的调用，这些调用被发送到算法？我的意思是，如果一个函数——而不是函数对象——被发送到一个算法，最后一个得到一个指向函数的指针，一些编译器优化了指向内联函数的指针，而另一些则没有。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-10T16:54:58.813

在简单的情况下，例如您的示例，**您应该期望使用 lambdas 比使用函数指针具有更好的性能，**请参阅

[为什么编译器可以比普通函数更好地优化 lambda？](https://stackoverflow.com/q/13722426/341970)

正如其他人已经指出的那样，不能保证你的调用会被内联，但你有更好的机会使用 lambdas。检查调用是否已内联的一种方法是检查生成的代码。如果您使用 gcc，请将 -S 标志传递给编译器。当然，它假设您可以理解汇编代码。

* * *

* * *

**2018 年 9 月 11 日更新：** [Vipul Kumar](https://stackoverflow.com/users/9791449/vipul-kumar)在他的编辑中指出了两个编译器标志。

海合会[`-Winline`](https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html)

> 如果声明为 inline 的函数不能被内联，则发出警告。即使使用此选项，编译器也不会警告系统头文件中声明的内联函数失败。
> 
> 编译器使用各种启发式方法来确定是否内联函数。例如，编译器会考虑被内联的函数的大小以及在当前函数中已经完成的内联量。因此，源程序中看似微不足道的变化，都会导致 -Winline 产生的警告出现或消失。

据我了解，如果您的函数未内联声明，则此编译器标志很可能*没有*帮助。不过，很高兴知道它的存在，它部分回答了您的第二个问题。

他指出的另一面旗帜是：

铛[`-Rpass=inline`](https://clang.llvm.org/docs/UsersManual.html#rpass)

> 发出优化报告的选项
> 
> 优化报告从高层次上跟踪编译器转换所做的所有主要决策。例如，当内联决定将函数 foo() 内联到 bar() [...]

我自己没有使用过这个，但根据文档，它可能对您的用例有用。

每当生成的程序集如此重要时，我都会亲自检查它。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-04-10T17:21:25.170

首先：在 C++ 中设计 lambda 的重点在于，与函数调用相比，它们没有开销。这尤其包括可以内联对它们的调用这一事实。

但是这里有一个概念混淆：在 C++ 标准中，[“内联”是函数的*链接*，即它是关于如何*定义*](https://en.cppreference.com/w/cpp/language/inline)函数的声明，而不是如何调用它。内联定义的函数*可以*受益于编译器优化，通过这种优化可以内联对此类函数的调用。这是一个不同但高度相关的概念。

在 lambda 的情况下，被调用的实际函数`operator()`是隐式定义为`inline`编译器为 lambda 创建的匿名类中的成员。对 lambda 的调用被转换为对其的直接调用，`operator()`因此可以内联。[我在另一个答案中更详细地解释了编译器如何创建 lambda 类型](https://stackoverflow.com/a/13722515/1968)。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-09-13T12:09:14.013

这取决于给予编译器的优化级别。以这两个功能为例，它们在语义上是相同的。一种是 C++11 风格，另一种是 C 风格。

```
void foo1 (void)
{
    int arr[100];
    std::generate(std::begin(arr), std::end(arr), [](){return std::rand()%100;});
}

void foo2 (void)
{
    int arr[100];
    for (int *i = arr; i < arr+100; i++) *i = std::rand()%100;
} 
```

用 gcc -O4 编译它会生成两个函数极其相似（不相同，但复杂度相当）的代码。

但是，在编译未优化时，lambda 不会内联（std::begin 和 std::end 调用也不是）。

因此，尽管编译器可以（并且确实）在被要求优化现代风格代码方面做得很好，但在未优化的调试版本中，这种代码可能会或可能会出现性能损失。

# sass - 有条件地导入部分 - 指南针

> ID：15930756
> 
> 赞同：8
> 
> 时间：2013-04-10T15:57:09.133
> 
> 标签：sass, compass-sass

如果存在覆盖一组默认样式变量，我正在尝试有条件地导入一个 sass 部分。鉴于 @import 指令不能嵌套，我正在寻找一种方法来完成以下任务：

```
 @if 'partials/theme'{
   @import 'partials/theme';
 } 
```

导入指令不能在控制指令或混合中使用，那么引用可能存在或不存在的部分的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-14T07:01:07.340

您不能在控制指令中显式使用导入指令。

“不可能将 @import 嵌套在 mixins 或控制指令中。” -[萨斯参考](http://sass-lang.com/documentation/file.SASS_REFERENCE.html#import)

```
 error sass/screen.scss (Line 9: Import directives may not be used within control directives or mixins.) 
```

`@content`如果你真的需要这个，有一些方法可以用指令绕过它。但这实际上取决于您的任务真正归结为什么。

一个会为每个主题生成多个 .css 文件输出的示例，您可以这样处理：

**_config.scss**

```
$theme-a: false !default;

// add content only to the IE stylesheet
@mixin theme-a {
  @if ($theme-a == true) {
    @content;
  }
} 
```

**_module.scss**

```
.widget {
  @include theme-a {
    background: red;
  }
} 
```

**all.theme-a.scss**

```
@charset "UTF-8";

$theme-a: true;

@import "all"; 
```

在另一种情况下，要在单个 .css 输出中生成多个主题选项，您可能必须依赖于这样的复杂循环：

```
//
// Category theme settings
// ------------------------------------------
// store config in an associated array so we can loop through
// and correctly assign values
//
// Use this like this:
// Note - The repeated loop cannot be abstracted to a mixin becuase
// sass wont yet allow us to pass arguments to the @content directive
// Place the loop inside a selector
//
//      .el {
//          @each $theme in $category-config {
//              $class: nth($theme, 1);
//              $color-prop: nth($theme, 2);
//
//              .#{$class} & {
//                  border: 1px solid $color-prop;
//              }
//          }
//      }
//

$category-config:
    'page-news-opinion' $color-quaternary,
    'page-advertising' #e54028,
    'page-newspaper-media' $color-secondary,
    'page-audience-insights' $color-tertiary,
;

$news-opinion-args: nth($category-config, 1);
    $news-opinion-class: nth($news-opinion-args, 1);
    $news-opinion-color: nth($news-opinion-args, 2);

$advertising-args: nth($category-config, 2);
    $advertising-class: nth($advertising-args, 1);
    $advertising-color: nth($advertising-args, 2);

$news-media-args: nth($category-config, 3);
    $news-media-class: nth($news-media-args, 1);
    $news-media-color: nth($news-media-args, 2);

$audience-args: nth($category-config, 4);
    $audience-class: nth($audience-args, 1);
    $audience-color: nth($audience-args, 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-15T00:59:46.017

回想起来，最好的解决方案可能是使用 JavaScript 有条件地加载主题资产或模块。

# django - 在 django 中添加简单视图

> ID：15930757
> 
> 赞同：0
> 
> 时间：2013-04-10T15:57:16.153
> 
> 标签：django, django-views

我开始使用 django，这就是我的看法

```
from django.template import Context, loader
from datetime import datetime
from django.http import HttpResponse

def hello_view(request):
    """ Simple Hello World View """
    t = loader.get_template('helloworld.html')
    c = Context({
        'current_time': datetime.now(),
    })
    return HttpResponse(t.render(c))

def detail_view(request):
    return HttpResponse("You're looking at detail view") 
```

我的 urls.py 文件看起来像这样

```
from django.conf.urls import patterns, include, url
from posted.views import hello_view
#from posted.views import detail_view

# Uncomment the next two lines to enable the admin:
# from django.contrib import admin
# admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
     url(r'^$', view=hello_view, name='hello_page'),
     #url(r'^$', view=detail_view, name='detail_page'),
    # url(r'^posts/', include('posts.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    # url(r'^admin/', include(admin.site.urls)),
) 
```

当我运行服务器并访问[http://example.com:8000/](http://example.com:8000/)时，会显示 hello_view。我希望我的网址采用[http://example.com:8000/hello](http://example.com:8000/hello)或[http://example 的形式。 com:8000/详细信息](http://example.com:8000/detail)。我需要 .htaccess 来实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:57:09.810

在我研究丹尼尔建议我看的内容时，我已经解决了这个问题。

```
from django.conf.urls import patterns, include, url
from django.views.generic import TemplateView

# Uncomment the next two lines to enable the admin:
# from django.contrib import admin
# admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
    (r'^detail/', TemplateView.as_view(template_name="detail.html")),
    # url(r'^posts/', include('posts.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    # url(r'^admin/', include(admin.site.urls)),
) 
```

# hudson - 哈德森只建造改变的项目

> ID：15930760
> 
> 赞同：0
> 
> 时间：2013-04-10T15:57:21.130
> 
> 标签：hudson, jobs

我需要在哈德逊建立仅更改的项目。我们的存储库结构为

项目/

-------- 项目 A/src

-------- 项目 B/src

-------- 项目 C/src

我们在中国有大约 100 多个独立项目

我在 hudson 中配置了一项工作，它监视整个项目文件夹的更改（svn 更新）。

我想要实现的是只构建通过将项目名称作为我的构建脚本的参数来更改的项目，例如..... ant Project B（在projectB发生变化时）。这可行吗？请指导我完成。

谢谢

# php - 将数组中的所有相对 URL 更改为绝对 URL

> ID：15930770
> 
> 赞同：1
> 
> 时间：2013-04-10T15:57:56.487
> 
> 标签：php, regex

我有一个包含一些相对 URL ( file.html ) 和绝对 URL ( [http://website.com/index.html](http://website.com/index.html) ) 的数组。

我正在尝试将它们转换为绝对 URL。

所以，我要做的是遍历数组并检查 URL 是否是绝对的。如果是，那么我将其添加到仅包含绝对 URL 的新数组中。

如果它不是绝对 URL，我从当前 URL 中获取域名并将其连接到相对 URL；因此，将其设为绝对 URL，然后将其添加到仅包含绝对 URL 的数组中。

但是，当我浏览绝对 URL 数组时，我注意到了一些相对 URL。

我究竟做错了什么？

```
foreach($anchors as $anchor){
    if(preg_match('/(?:https?:\/\/|www)[^\'\" ]*/i', (string)($anchor))){
        //has absolute URL
       //add to array
       array_push($matchList, (string)($anchor));
    }
    else{
        //has relative URL
        //change to absolute
        //add to array
        $urlPrefix = preg_match('/(?:https?:\/\/|www)[^\/]*/i', $url);
        $absolute = (string)(((string)$urlPrefix).((string)($anchor)));
        array_push($matchList, $absolute);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:16:56.030

这不是 preg_match() 的工作方式（它不返回匹配的内容，当没有匹配时返回 0，如果发生匹配则返回 1）：

```
$urlPrefix = preg_match('/(?:https?:\/\/|www)[^\/]*/i', $url); 
```

你需要这样做：

```
preg_match('/(?:https?:\/\/|www)[^\/]*/i', $url, $matches);

urlPrefix  = $matches[0]; 
```

见[preg_match()](http://php.net/manual/en/function.preg-match.php)

# android - 如何让股票“DigitalClock”每分钟随机出现在不同位置的屏幕上

> ID：15930778
> 
> 赞同：0
> 
> 时间：2013-04-10T15:58:15.350
> 
> 标签：android, random, clock, appearance

绝对初学者（到安卓）在这里，

我在 Eclipse 中有一个非常简单的 android 项目，基本上只是一个全屏活动，在 Linearlayout 中放置了一个数字时钟。我只是希望该时钟在每次分钟更改或每 30 秒或其他任何时间出现在屏幕的随机位置。

现在我不是要求这里的某个人编写一些可以使这项工作的代码，我意识到这将花费大量时间和研究（我正在做！）。即使有人可以指出我正确的方向，因为无处可寻似乎有我需要的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:06:35.063

一个很笼统的问题。让我们来看看。

我相信你的时钟有代表中心的坐标`(x,y)`。它还可以采用一些值范围（取决于屏幕分辨率？）。每 30 秒从该范围生成两个随机数并将其用作新中心。

# java - 数组有时无法按预期工作

> ID：15930779
> 
> 赞同：0
> 
> 时间：2013-04-10T15:58:19.237
> 
> 标签：java, android, arrays

我正在为 Android 开发一款游戏。我已经启动并运行了大部分，但刚刚注意到一个我不能总是复制的错误，这（如你所知）使它成为调试的噩梦！我确定这是一个逻辑问题，但我一直盯着它看太久我看不到它。这是对数组进行排序的代码：

```
 // RANDOMISE UP SOME LETTERS //
    for(int i=0; i<MAX_LETTERS; i++)
    {
        int r = rand.nextInt(25);       

        // SAVE THIS LETTER //
        lettersToUse[i] = letters[r];           
    }       

    // NOW MAKE SURE WE COPY IN OUR WORD //
    for(int i=0; i<nameLen; i++)
    {
        int r = rand.nextInt(MAX_LETTERS);

        Letter tmpLetter = new Letter();
        tmpLetter = letters[lettersInName[i]];                      

        while(in_array(lastElementsUsed, r))
        {
            r = rand.nextInt(MAX_LETTERS);
        }

        lastElementsUsed[i] = r;            

        if(!in_array(lettersToUse, tmpLetter.getLetter()))
        {               
            lettersToUse[r] = tmpLetter;
        }
    } 
```

我有一个包含 18 个允许字母的数组（在应用程序中）。第一个循环（显然）只是挑选一堆随机字母。然后第二个循环确保要猜测的单词的至少一个字母包含在最后的 18 个字母中。

问题是：大多数时候它工作得完美无缺。以看似随机的间隔，最终的数组将丢失要猜测的单词中的一个字母。它也不总是在这个词中的同一个地方。

谁能看出我的逻辑有问题？如果我错过了拼图中的重要部分，我很乐意提供更多信息和代码！

TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:07:39.127

这个方法看起来简单多了：

```
for (int i=0; i<(MAX_LETTERS-wordLength); i++)
{
    int r = rand.nextInt(25);       

    // SAVE THIS RANDOM LETTER //
    lettersToUse[i] = letters[r];           
}   
for (int i=MAX_LETTERS-wordLength; i<MAX_LETTERS; i++)
{
    // SAVE THIS LETTER OF THE WORD //
    lettersToUse[i] = lettersInName[r]; //I think that lettersInName is the right variable name to use, hopefully you understand what I'm trying to do here           
}   
lettersToUse.shuffle() //or similar method for whatever array type you're using 
```

然后确保你有你的话加上其余的 18 个都是随机的，而且它们已经被洗牌了

# java - 使用附加类路径选项调用“java -jar MyFile.jar”

> ID：15930782
> 
> 赞同：103
> 
> 时间：2013-04-10T15:58:26.283
> 
> 标签：java, jar, classpath

我创建了一个包含所有编译内容的 jar 文件。此外，我的 ant 构建脚本将所需的库复制到子文件夹“库”中。结构如下所示：

```
MyProgram.jar
libs/ 
```

因此，当我现在尝试运行程序时，出现以下错误：

```
java -cp ".:/home/user/java/MyProgram/jar/libs" -jar MyProgram.jar
java.lang.ClassNotFoundException: org.postgresql.Driver
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:186)
    at database.PostgresQL.getConnection(PostgresQL.java:38)
    at recommender.dao.Creative2IdxDAO.createCreatives2Idx(Creative2IdxDAO.java:19)
    at main.Main.calculateCorrelationMatrix(Main.java:51)
    at main.Main.main(Main.java:28)
java.lang.NullPointerException
    at recommender.dao.Creative2IdxDAO.createCreatives2Idx(Creative2IdxDAO.java:25)
    at main.Main.calculateCorrelationMatrix(Main.java:51)
    at main.Main.main(Main.java:28) 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2013-04-10T16:07:19.120

您使用*或* `-jar` *，* `-cp`您不能将两者结合起来。如果您想在类路径中添加额外的 JAR，那么您应该将它们放在主 JAR 的清单中然后使用`java -jar`，或者您将完整的类路径（包括主 JAR 及其依赖项）放入`-cp`并在命令行上显式命名主类

```
java -cp 'MyProgram.jar:libs/*' main.Main 
```

（我使用的`dir/*`语法告诉`java`命令将`.jar`特定目录中的所有文件添加到类路径。请注意，`*`必须防止 shell 扩展，这就是我使用单引号的原因。）

您提到您正在使用 Ant，因此对于替代清单方法，您可以在复制依赖项*之后但**在*构建 JAR之前使用 ant 的`<manifestclasspath>`任务。

 **```
<manifestclasspath property="myprogram.manifest.classpath" jarfile="MyProgram.jar">
  <classpath>
    <fileset dir="libs" includes="*.jar" />
  </classpath>
</manifestclasspath>

<jar destfile="MyProgram.jar" basedir="classes">
  <manifest>
    <attribute name="Main-Class" value="main.Main" />
    <attribute name="Class-Path" value="${myprogram.manifest.classpath}" />
  </manifest>
</jar> 
```

有了这个，`java -jar MyProgram.jar`它将正常工作，并将包括`libs`类路径中的所有 JAR 文件。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-04-10T16:06:02.933

`-jar`使用该选项时，该选项将`-cp`被忽略。设置类路径的唯一方法是使用 jar 中的清单文件。

使用该`-cp`选项更容易，将您的 jar 文件添加到其中，然后显式调用主类。

此外，假设`/home/user/java/MyProgram/jar/libs`文件夹包含 jar 文件（而不是类文件），这将不起作用。您不能指定 jar 文件的文件夹，但必须在类路径中单独指定每个 jar 文件（如果有大量 jar，则值得编写一个简单的 shell 脚本来为您执行此操作）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-08T17:19:36.950

这有点棘手。以下脚本尝试从 jar 的清单中获取类路径，然后允许添加额外的类路径条目。我对此有好坏参半的结果，但仍想共享该脚本，以便它可以在这里完全发挥作用。

脚本有两个名字

*   演出清单
*   呼叫罐

通过将两个文件硬链接在一起

```
ln calljar showmanifest 
```

用 calljar -h 你可以看到用法。

```
#!/bin/bash
#set -x
# show the manifest of a jar file
# 2012-07-18
# author WF

#
# show usage
#
usage() {
 echo "usage: showmanifest (jarfile | directory jarfile) " 1>&2
 echo "usage: calljar directory jarfile classpath pattern arguments" 1>&2
 echo "             -h|--help " 1>&2
 echo "               show this help and exit" 1>&2
 echo "             -m|--mainclass javaclass" 1>&2
 echo "               mainclass to use (otherwise manifest is inspected)" 1>&2
 exit 1
}

#
# show the manifest of the given jar file
#
show() {
  dir="$1"
  jar="$2"
    fulljar=`find "$dir" -name "$jar"`
    cd /tmp
    mkdir show$$
    cd show$$
    jar xvf $fulljar META-INF/MANIFEST.MF
    cat META-INF/MANIFEST.MF
    cd /tmp
    rm -rf show$$
}

#
# show the classpath of the manifest
#
calljar() {
  dir="$1"
    jar="$2"
    classpath="$3"
    pattern="$4"
    arguments="$5"
    cmd=`show "$dir" "$jar"   | awk -v extracp="$classpath" -v dir="$dir" -v pattern="$pattern" -v jar="$jar" -v mainclass="$mainclass" -v args="$arguments" '
/Main-Class: / { if (mainclass=="") mainclass=$2 }
/^Class-Path:/ { 
  incp=1; 
    cp=$0; 
    gsub("Class-Path: ","",cp) 
    next
}
/^ .*$/ && incp { 
    line=substr($0,2)
  # remove carriage return (if any)
  cp=cp line
}
END { 
  # we do not like carriage returns
  gsub("\\r","",cp)
  gsub("\\r","",mainclass)
    # we do not like blanks ...
  gsub(" ","",cp)
    gsub(pattern,":"dir"/"pattern,cp)
  print "java -cp " extracp cp ":"dir"/"jar " " mainclass " " args
}
    '`
  #echo $cmd
    $cmd
}

# echo $# arguments found: $*
# parse command line options
while true; do
# echo "option $1"
  case "$1" in
    # options without arguments
    -h|--help) usage;;
         # for options with required arguments, an additional shift is required
        -m|--mainclass) mainclass=$2; shift;;
      (--) shift; break;;
      (-*) echo "$0: error - unrecognized option $1" 1>&2; usage;;
    (*) dir=$1;shift;break;;
  esac
  shift
done

#echo "argcount=$#"
case  $# in
  0) dir=`dirname "$dir"`
       jar=`basename "$dir"`
         show "$dir" "$jar";;
  1) jar="$1"
         show "$dir" "$jar";;
  2) usage;;
    3) usage;;
  *) jar="$1"; shift;
         classpath="$1"; shift;
         pattern="$1"; shift;
         arguments="$@";
    #echo "mainclass=${mainclass}"
    #echo "classpath=${classpath}"

  #echo calljar "${dir}" "${jar}" "${classpath}" "$pattern" "$arguments"
    calljar "$dir" "$jar" "$classpath" "$pattern" "$arguments"
    ;;
esac 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-10-21T11:31:13.963

对于应用程序的快速一次性测试，您可以简单地将所需的依赖项 JAR 文件符号链接到包含主应用程序 JAR 文件的目录中。

示例（对于`app.jar`使用 Eclipse SWT 库的应用程序，在我的情况下安装在 中`/usr/share/java`）：

```
$ ln -s /usr/share/java/swt.jar .
$ java -jar app.jar 
```**

# javascript - 如何处理 api 的 javascript/clojurescript 包装器库？

> ID：15930785
> 
> 赞同：4
> 
> 时间：2013-04-10T15:58:32.513
> 
> 标签：javascript, ajax, clojurescript

我主要是一名 Python 开发人员，但最近我一直在尝试学习 Clojure/ClojureScript。作为实践，我想为 Reddit 的 API 编写一个 ClojureScript 包装器。

我的大部分困惑是由于 Javascript 的异步特性。由于 AJAX 函数实际上并不返回来自 API 的响应，我该如何编写包装器以使其工作方式与同步服务器端请求有些相似？

或者这根本不可能，并且我必须为我的应用程序中对 API 的每次调用使用回调（因此包装库将毫无意义）？

我可以参考类似的库吗？(Javascript/ClojureScript)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T23:44:12.460

可以进行同步 XHR 请求，但这不是惯用的。Javascript（以及扩展的 Clojurescript）使用单线程执行模型，因此长时间运行的调用通常是异步的，以避免阻塞应用程序其他部分的执行。如果您正在为同步 API 编写包装器，您通常会为每个 API 方法添加一个回调参数（并且不要忘记提供某种形式的错误处理）。

关于您的具体问题，从浏览器访问 reddit API 几乎可以肯定违反[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)：您通常只能向提供原始 Javascript 的域发出 AJAX 请求。通常，当您想提供对第三方服务的客户端（基于浏览器）访问时，您可以通过服务器代理客户端请求来实现此目的。服务器应确保它只代理来自授权客户端的请求。如果您决定采用这条路线，您将使用 clojurescript 从浏览器向您的网络服务器（可能正在运行 clojure）发出异步请求，该服务器将对请求进行身份验证，然后向 reddit API 发出同步请求并将结果返回给客户。当响应准备好时，客户端将调用回调，您的代码将收到结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T01:14:28.487

您正在寻找的概念被大多数编程语言称为“期货”。[实现此类事情](http://documentup.com/kriskowal/q/)的JavaScript 库通常将期货称为“承诺”。

在 Python 中有几个实现期货的库。然而，最著名的是[`Twisted`](http://twistedmatrix.com)and是一个崭露头角的库，它[很可能会成为 Python 3.4 的默认事件循环实现](http://www.python.org/dev/peps/pep-3156/)。[`Tornado`](http://www.tornadoweb.org/en/stable/)[`Tulip`](https://code.google.com/p/tulip/)

JavaScript 也是如此。 [许多](http://documentup.com/kriskowal/q/) [流行的](https://github.com/cujojs/when) [库](https://github.com/tildeio/rsvp.js)（[包括 jQuery](http://api.jquery.com/jQuery.Deferred/)）提供了期货的实现，让你可以这样：

```
function makeTwoAsyncCalls(errorCallback, successCallback) {
    ajaxRequest(errorCallback, function onSuccess(data) {
       processWithWebWorker(errorCallback, successCallback);
    });
} 
```

进入这个：

```
function doWorkAsync(errorCallback, successCallback) {
    return ajaxRequest()
        .then(processWithWebWorker)
        .then(successCallback)
        .fail(errorCallback);
} 
```

# c++ - Qt - 相对路径问题

> ID：15930791
> 
> 赞同：1
> 
> 时间：2013-04-10T15:58:48.810
> 
> 标签：c++, qt

1.  我在 Qt Creator 的解决方案资源管理器中创建了一个新文件 (data.xml)，该文件自动添加到`Other`files 文件夹中。
2.  我创建了一段从该文件中读取数据的代码，但出现了一个问题：找不到该文件。
3.  我将文件复制到`c://data.xml`并将代码中的路径也更改为`c://data.xml`，一切正常。

我的问题是：如何处理这些相对路径？

这是代码：

```
 QString filename="data.xml";
    QVector<Student> students;
    QFile file(filename);
    if (!file.open(QFile::ReadOnly | QFile::Text))
    {
        return;
    }
    QDomDocument doc;
    if (!doc.setContent(&file))
    {
        file.close();
        return;;
    }
    file.close();
    QDomElement root = doc.documentElement();
    QDomElement studentNode = root.firstChildElement("Student");
    while(!studentNode.isNull())
    {
        QString firstName=studentNode.firstChildElement("FirstName").text();
        QString lastName=studentNode.firstChildElement("LastName").text();
        int age=studentNode.firstChildElement("Age").text().toInt();
        students.push_back(Student(firstName, lastName, age));
        studentNode=studentNode.nextSiblingElement("Student");
    } 
```

这是项目文件：

```
QT       += core gui xml

greaterThan(QT_MAJOR_VERSION, 4): QT += widgets

TARGET = GUI1
TEMPLATE = app

SOURCES += main.cpp\
        mainwindow.cpp \
    editdialog.cpp \
    student.cpp

HEADERS  += mainwindow.h \
    editdialog.h \
    student.h

FORMS    += mainwindow.ui \
    editdialog.ui

OTHER_FILES += \
    data.xml 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:16:23.170

所有此类路径都是相对于您启动应用程序的目录计算的。QtCreator 从它们自己的目录启动程序。在您的情况下，我建议您将此行添加到您的`pro`文件中：

```
DESTDIR = $$PWD 
```

# c - 从 C 中的十六进制字符串中获取 uint

> ID：15930795
> 
> 赞同：3
> 
> 时间：2013-04-10T15:58:59.120
> 
> 标签：c, string, hex, type-conversion

假设我有一个`char*`被调用的代码，它就`"0x41"`在其中。

```
char *code = "0x41"; 
```

我怎样才能把它转换成一个`unsigned int`？（确切地说，我需要一个`WORD`，但这只是一个`unsigned int`）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T16:03:17.197

```
unsigned int h;
sscanf(code, "%x", &h); 
```

**编辑**考虑到***ExP***的评论：`%x`可以捕获字符串中的值`"0x41"`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T16:03:07.017

我猜你的意思是声明为`char *code = "0x41";`指向由 . 表示的字符串的变量`"0x41"`。

在 C中没有 a 这样的东西`WORD`，但是如果你把它 typedef'd as an `unsigned int`，那么你可以把这个十六进制数字字符串转换成`unsigned int`这样的：

```
char *code = "0x41";
unsigned int foo;
assert(sscanf(code, "%X", &foo) == 1); 
```

您可能会注意到`assert`此代码中的使用。我建议用逻辑替换该断言以在返回值不是 1 时报告错误，因为这表明字符串的格式不正确，无法按指定的方式解析。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T16:04:37.837

```
#include <stdio.h>
#include <stdlib.h>

int main() {
    char *code = "0x41";
    char *ck;
    long unsigned lu;

    lu=strtoul(code, &ck, 16);
    printf("%lu\n", lu);

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-10T16:08:23.733

您可以使用 strtol 函数将字符串转换为您想要的任何基数的无符号长整数

[http://www.cplusplus.com/reference/cstdlib/strtoul/](http://www.cplusplus.com/reference/cstdlib/strtoul/)

# spring - 休眠/JPA 锁 OPTIMISTIC_FORCE_INCREMENT 不起作用

> ID：15930796
> 
> 赞同：1
> 
> 时间：2013-04-10T15:59:01.753
> 
> 标签：spring, hibernate, jpa, optimistic-locking

我在对象上设置锁定模式时遇到问题。

这是代码：

```
MyObject a = myQuery.getSingleResult();
logger.info(entityManager.getLockMode(a));
entityManager.lock(a, LockModeType.OPTIMISTIC_FORCE_INCREMENT);
logger.info(entityManager.getLockMode(a)); 
```

结果是：

```
OPTIMISTIC
OPTIMISTIC 
```

我的对象 A 包含对象 B 的列表。我想在修改 B 时增加 A，这就是我使用强制增量功能的原因。

但显然它根本不起作用。请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:41:35.910

所以经过大量搜索，我使用的是 Hibernate 3.6.10.Final 版本，它有这个极好的错误： [https ://hibernate.atlassian.net/browse/HHH-5222](https://hibernate.atlassian.net/browse/HHH-5222)

> 从 READ 升级到 OPTIMISTIC_FORCE_INCREMENT 失败
> 
> 修复版本/秒：4.0.0.CR7

简而言之，默认情况下，锁设置为 READ，其优先级高于 OPTIMISTIC 或 OPTIMISTIC_FORCE_INCREMENT，因此您无法更改它。

所以我升级到 4.2.0.Final 一切正常

# ruby-on-rails - Rails 3.2.13 active_admin 未定义的局部变量或方法

> ID：15930800
> 
> 赞同：1
> 
> 时间：2013-04-10T15:59:09.967
> 
> 标签：ruby-on-rails, ruby, activeadmin

长时间的潜伏者第一次站在上层提问者。

我刚刚开始了一个新的 Rails 项目，在 Rails 3.2.13 和 ruby​​ 2.0 上运行。从技术上讲，这是一个干净的安装。只有我添加的 gem 是 pry 和 activeadmin + 所需的元搜索、sass-rails 和 coffee-rails。在遵循 active_admin 设置说明和 belongs_to 段落之后。

```
 /app/admin/houses.rb
ActiveAdmin.register House do
  sidebar "Details" do
    ul do
      li link_to("Bookings", admin_house_bookings_path(house))
    end
  end 
end

/app/admin/bookings.rb

ActiveAdmin.register Booking do
  belongs_to :house
end 
```

现在，当我访问房屋时，我在 rails 的终端中收到错误消息。

```
ActionView::Template::Error (undefined local variable or method `house' for #<ActiveAdmin::Views::SidebarSection:0x007fb8b0989a98>):
    1: insert_tag renderer_for(:index)
  app/admin/houses.rb:4:in `block (3 levels) in <top (required)>'
  app/admin/houses.rb:3:in `block (2 levels) in <top (required)>' 
```

如前所述，我没有对 Rails 新应用程序进行任何自定义。我知道当我访问 /admin/houses 时，确实没有可变房子，因为还没有选择房子。而且，没有侧边栏，所以这不应该是相关的。

我尝试了没有 'house' 的链接，就像 Zippie 建议的那样，但遇到了错误“没有路由匹配{：控制器 =>“admin/bookings”} 而且，这是我的 rake 路由[http://pastebin.com/i48mVr0e](http://pastebin.com/i48mVr0e)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:17:44.110

我想出了一种不同的方法来做到这一点，不是那么漂亮和通用，但这里是代码

```
ActiveAdmin.register House do
  sidebar "Details" do
    ul do
      li link_to "Bookings", "#{request.protocol}#{request.host_with_port}#{request.fullpath}/bookings"
    end
  end..
end 
```

为了 ruby​​ 的缘故，我已经将 3 个请求移到了 helper 中的一个函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T20:56:25.510

我有类似的情况，嵌套模型不会创建有效链接。尝试以下操作：

```
ActiveAdmin.register House do
  sidebar "Details", :only => :edit do
    ul do
      li link_to("Bookings", admin_house_bookings_path(params[:id]))
    end
  end
 end 
```

# ms-access - 检测断开连接的 Microsoft Access 链接表

> ID：15930803
> 
> 赞同：2
> 
> 时间：2013-04-10T15:59:16.683
> 
> 标签：ms-access, ms-access-2007

底线是我想尽可能优雅地处理网络断开连接。

我有一个 Microsoft Access 应用程序，它使用链接表将 UI 与数据“分离”。因此，有两个 msaccess 数据库文件（一个 UI 和另一个数据）。这两个数据库都在我们的内部网络上，并且 UI 使用链接表链接到数据。这是一个非常标准的设置。

代码中只有一个位置需要这种优雅的断开逻辑（即执行 SQL UPDATE 时）。我认为这就像一些错误处理一样简单。但是，**Microsoft Access 有时会假装成功**！

这是我的世界的窗口：

```
On Error GoTo ErrorHandler:
Call CurrentDb.Execute("UPDATE [Thing] SET [Length]=5 WHERE [ID]=1;", dbFailOnError)
On Error GoTo 0

   ...(continued code)...

ErrorHandler:
    fSuccess = False
    Resume Next 
```

我启动应用程序，拔掉我的网线（不，wifi 没有打开），但**有时错误处理从未发生过**，即使它实际上并没有更新！澄清一下，*当断开连接时，我希望此更新失败，并且我想检测它！*

我一直在尝试解决像这样对我撒谎的 Access。我越是尝试，我就越绝望：

1.  我注意到的第一件事是，**如果我使用调试器单步执行，它将正确且可靠地失败**。不过，这对我没有帮助。
2.  我试过检查更新操作的**RecordCount**，但是当它假装成功时，它真的设置为 1！
3.  我已经尝试执行后续的 SELECT 语句来查看 UPDATE 是否真的发生了。但是，即使我在 UPDATE 中输入了一个随机数，访问也会返回正确的结果。
4.  我查看了 Access 对象（如 CurrentDb 和 TableDefs），寻找任何可靠的迹象表明它在“离线模式”或“缓存模式”下工作。我找不到任何指标。这对我有很大帮助。
5.  链接表的 RecordCount 始终为 -1，无论是已连接还是已断开连接。
6.  我通过修改和修复“Connect”连接字符串*断开并重新连接*了关联的 TableDef。Access声称它重新连接正常。

我不明白我看到的行为。MSAccess 是否在连接数据的某些缓存下运行？如果是这样，为什么它*有时*只工作？如果他们真的有一些复杂的离线缓存模式，为什么没有在任何地方记录呢？不幸的是，我不允许在工作中喝酒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:10:25.910

也许，正如您所建议的那样，数据库引擎会`UPDATE`针对内存中存在的表的缓存版本执行该`[Thing]`操作，以便稍后将其写入磁盘。但是，如果发生了这种情况，似乎 Access 在稍后尝试执行磁盘写入时应该会引发错误。

老实说，我不明白为什么你没有收到错误。`UPDATE`我认为在事务中尝试[使用`dbForceOSFlush`with`CommitTrans`](http://msdn.microsoft.com/en-us/library/office/ff835985.aspx)可能很有用。至少它可能会强制您的代码在遇到该问题时知道该错误。

```
Dim strUpdate As String
Dim db As DAO.Database
Dim ws As DAO.Workspace

strUpdate = "UPDATE [Thing] SET [Length]=5 WHERE [ID]=1;"
Set ws = DBEngine(0)
Set db = CurrentDb
ws.BeginTrans
db.Execute strUpdate, dbFailOnError
ws.CommitTrans dbForceOSFlush
ws.Close
Set db = Nothing
Set ws = Nothing 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:20:18.303

我从来没有遇到过像你描述的那样的问题，但我做两件事不同：

1.  我总是先声明`Dim cdb As DAO.Database`，`Set cdb = CurrentDB`然后再做`cdb.Whatever`。有时，`CurrentDB.Whatever`行为会有所不同。

2.  我总是这样做`cdb.Execute "SQL statement", dbFailOnError`。我认为这可能与您的问题特别相关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:22:50.943

到目前为止，我想出的最好方法是检查我是否可以通过网络访问底层数据库文件。

```
Public Function EnsureNetworkConnected() As Boolean

    Dim sDataPath As String
    sDataPath = GetDataPath

    Dim fFileExists As Boolean
    Dim objFileSystem As New FileSystemObject
    fFileExists = objFileSystem.FileExists(sDataPath)
    If Not fFileExists Then
        ' Huh.
    End If

    EnsureNetworkConnected = fFileExists

End Function 
```

如果更新语句“假装”成功，我会使用此函数再次检查它。这是一个脆弱的黑客。

如果您有我的问题并打算使用此解决方案，使用的**GetDataPath**函数通过**CurrentDb.TableDefs获取链接表的位置**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-08T08:29:05.530

我意识到这个线程有点老了，但我现在陷入了与描述相同的情况，并想添加我的两个便士。

我按照上面 HansUp 的建议添加了“dbForceOSFlush”。拔下网线时仍然没有出现错误（并关闭 WiFi）

```
Dim wrk As DAO.Workspace
Dim dbs As DAO.Database
Set wrk = DBEngine(0)
Set dbs = CurrentDb
wrk.BeginTrans
dbs.Execute "aJudges", dbFailOnError
wrk.CommitTrans dbForceOSFlush
Debug.Print "AppendJudger " & Time()
TimerCounter = 0 
```

另一个观察结果是，当我拉网络时，第一次尝试执行查询需要很长时间（比如 30 秒），然后所有查询运行顺利，只有连接丢失，因此在关闭 Access 时丢失任何数据。

# c - 运行exe时出错

> ID：15930804
> 
> 赞同：-6
> 
> 时间：2013-04-10T15:59:25.357
> 
> 标签：c, release, exe, codeblocks

我正在尝试制作我的代码的 exe 版本，该代码具有 3 个参数，在代码块的“调试”和“发布”模式下完美运行，问题是当我尝试运行“.exe”文件时cmd 它告诉我参数中有错误。请注意，我为“调试”和“发布”模式更改了“设置程序的参数”菜单中的参数，但这也没有任何意义！

请给点建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:02:48.220

代码块将参数传递给命令行上的可执行文件。在 cmd 中，您必须手动执行此操作，因为代码块中的设置不再适用。

# youtube - 在网站上动态嵌入 youtube 频道的最佳方式是什么（首选 wordpress）

> ID：15930805
> 
> 赞同：-1
> 
> 时间：2013-04-10T15:59:26.077
> 
> 标签：youtube, wordpress, youtube-api, youtube-channels

我希望能够通过简码和小部件将频道中的 youtube 视频嵌入到 wordpress 页面。那里有很多 youtube 频道画廊，但找了几个小时后，我发现没有一个包含所有这些功能：

*   动态添加视频（即 - 频道上的新视频出现在网页上）
*   许多视频的分页
*   使用实际的 youtube 播放器，而不是一些 Flash 播放器（与 iOS 不兼容）
*   有简码和小部件（整页和侧边栏频道列表）
*   显示来自 youtube 的标题信​​息

我对现有的插件持开放态度，但如果涉及到这一点，我愿意编写自己的插件，我在这方面花费了太多时间。

感谢社区！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:26:28.747

在审查我的选择时，tubepress 看起来像是要走的路。它不是那么漂亮，但我可以设计它。

# java - 有没有办法监听初始化对象的方法？Interactive Broker API 连接对象

> ID：15930807
> 
> 赞同：0
> 
> 时间：2013-04-10T15:59:28.970
> 
> 标签：java, listener, interactive, broker

我将以下代码绑定到 Jbutton。

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    // TODO add your handling code here:

    m_client.eConnect("127.0.0.1", 4001, 1);
    if (m_client.isConnected()) {
        jButton1.setText("Connected");
        jButton1.setEnabled(false);

    }
} 
```

有没有办法不断检查`m_client.isConnected()`是真还是假，所以如果是假我可以`setEnable(true)`我的`jButton1`. 我搜索了一些相关信息，它们都指向一个名为“LISTENER”的功能？但我仍然没有弄清楚这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:07:15.037

这是一个 java IB API 的特性。

当 TWS 关闭套接字连接或 TWS 关闭时，调用方法[EWrapper#connectionClosed()](http://www.interactivebrokers.com/php/apiUsersGuide/apiguide/java/connectionclosed.htm)。

注意捕获来自套接字和代码的所有异常，否则 TWS 将意外关闭连接。

# android - android 2.2弹出窗口不显示多行文本

> ID：15930808
> 
> 赞同：0
> 
> 时间：2013-04-10T15:59:29.860
> 
> 标签：android

我在 android 的弹出窗口中的 textview 中显示一个长文本。它可以在更高版本（4.1 和 4.2）的 android 上正常工作。但在 2.2 中，它只显示单行文本，而文本不显示多行。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@color/floating_background"
>

<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="10dp"
    android:background="@drawable/dialog_image" >

    <TextView
        android:id="@+id/dialog_title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:text="@string/lite_email_msg"
        android:textColor="#ffffff"
        android:singleLine="false"
        android:textSize="20sp" />

    <ImageButton
        android:id="@+id/btn_cancel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/dialog_title"
        android:layout_centerHorizontal="true"
        android:background="@drawable/ic_close"
        android:contentDescription="@string/app_name" />

    <TextView
        android:id="@+id/text_cancel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/btn_cancel"
        android:layout_centerHorizontal="true"
        android:text="@string/cancel"
        android:textColor="#FFFFFF" />
</RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:54:06.003

只需在 textview 中添加 android:scrollHorizo​​ntally="false" 即可。请享用：）

# variables - METAPOST：在标签中使用循环变量

> ID：15930810
> 
> 赞同：4
> 
> 时间：2013-04-10T15:59:32.187
> 
> 标签：variables, loops, text, label, metapost

亲爱的stackoverflowers，

最近，在玩 METAPOST 环境时，我遇到了一个问题。在使用循环“for”宏绘制某些东西时，我需要循环变量的**值**正确显示在标签内，但是我不知道如何做到这一点，Google 先生无法帮助我。下面是我使用的代码示例：

```
for i=1 upto N: label(btex $here should be the value of i$, some_position); endfor; 
```

任何形式的帮助都会受到重视：]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-31T16:06:50.817

起初有一个`etex`失踪前`, some_position`。`btex`和之间的所有`etex`内容都被视为一个字符串。它不被解释。为此，必须首先计算字符串的内容`TEX()`。例子：

```
prologues := 2;

input tex;

verbatimtex
\documentclass[12pt,a4paper]{article}
\usepackage[T1]{fontenc}
\usepackage[ansinew]{inputenc}
etex;

beginfig(0);
n := 10;
    for i := 1 upto n:
    label.lrt(TEX("$i = "&decimal(i)&"$"),(0,i*1cm));
endfor; 
endfig; 
```

如果你想使用 LaTeX-Struktures，你必须这样修改原来的 TEX()：

```
vardef TEX primary s =
write "verbatimtex"                    to "mptextmp.mp";
write "\documentclass[12pt]{article}"  to "mptextmp.mp"; 
write "\usepackage[T1]{fontenc}"       to "mptextmp.mp";
write "\usepackage[ansinew]{inputenc}" to "mptextmp.mp";
write "\usepackage{amsmath,amssymb}"   to "mptextmp.mp";
write "\begin{document}"               to "mptextmp.mp";
write "etex"                           to "mptextmp.mp";
write "btex "&s&" etex"                to "mptextmp.mp";
write EOF                              to "mptextmp.mp";
scantokens "input mptextmp"
enddef; 
```

希望有帮助

大众

# cordova - 谷歌地图在 Windows Phone 8 上使用 PhoneGap 时显示为空白

> ID：15930811
> 
> 赞同：0
> 
> 时间：2013-04-10T15:59:34.420
> 
> 标签：cordova, windows-phone-8

我想在 Windows Phone 上运行的 PhoneGap 应用中显示谷歌地图。

我关注了以下博客文章[http://www.christianengvall.se/phonegap-and-google-maps/](http://www.christianengvall.se/phonegap-and-google-maps/)

但地图显示为空白，如下所示：![在此处输入图像描述](https://i.stack.imgur.com/ZFfy2.png)

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:22:37.423

好，我知道了

问题是我错过了将**中心**属性分配给地图选项：

```
var mapOptions = {                
zoom: 4,
center: new google.maps.LatLng(-33, 151),
mapTypeId: google.maps.MapTypeId.ROADMAP
} 
```

这看起来很奇怪，您必须为地图分配一个中心位置，否则它不会出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T03:58:44.720

检查这个：

windows phone 8 版本上的 IE 问题是阻塞 API。

您必须使用域“maps.google.co.uk”而不是“maps.googleapis.com”

谷歌地图 API URL 工作：[https ://maps.google.co.uk/maps/api/js?v=3.exp&sensor=false](https://maps.google.co.uk/maps/api/js?v=3.exp&sensor=false)

查询也往往更快。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T20:46:45.320

1/通过插入 onDeviceReady 函数检查您的应用是否允许访问互联网：

```
function onDeviceReady(){
    if (typeof google === 'object' && typeof google.maps === 'object'){
      var map = new GoogleMap();
      map.initialize();
    }else
      alert("You need an internet connection to display the map.")
} 
```

2/当我只使用 wifi 时，我在模拟器上的应用程序没有互联网（但 WMP 上的 IE 可以访问）。如果我同时使用我的 wifi 和以太网。

3/检查你的 config.xml，你有权访问谷歌服务器（访问标签）

# python - 如何获取列表元素的总和？

> ID：15930813
> 
> 赞同：-11
> 
> 时间：2013-04-10T15:59:42.227
> 
> 标签：python, list, sum

如何获得列表元素的总和？IE，

```
f = [1,8,3]
sum(f)=12? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:00:08.773

你猜对了， `sum(f)`. 你为什么不试试？

```
>>> f = [1,8,3]
>>> sum(f)
 12 
```

# java - 为列表定义集合实现类型以设置映射

> ID：15930815
> 
> 赞同：0
> 
> 时间：2013-04-10T15:59:48.150
> 
> 标签：java, collections, dozer

我有一个双向列表来设置推土机中的映射，我想知道是否可以定义用于创建集合的新实例的集合实现类型，例如 LinkedHashSet。我在这个映射中尝试了 create-method 属性。但是，此方法将应用于项目实例化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:10:24.213

我找到了解决这种情况的方法。我正在使用迭代方法映射（另请参阅[自定义方法](http://dozer.sourceforge.net/documentation/custommethods.html)），以确保该集合将被实例化为 LinkedHashSet。

# c++ - 从 borland OWL 迁移到 microsoft MFC

> ID：15930819
> 
> 赞同：1
> 
> 时间：2013-04-10T15:59:54.260
> 
> 标签：c++, mfc, migration, borland-c++

我有一个依赖于 OWL 库的应用程序，每个对话框都是从 `TDialog`类继承的，我想移动到最近的 MFC，我想依赖 MFC CDialog 或其任何类而不是 OWL。

在这种情况下，是否有任何指导方针可以简化任务、缩短时间并避免著名的错误。

另外owl和mfc之间的消息映射区别是什么？

# mongodb - 如何删除标签范围

> ID：15930821
> 
> 赞同：2
> 
> 时间：2013-04-10T16:00:02.317
> 
> 标签：mongodb

我们可以使用 删除标签`sh.removeShardTag()`，但是我们如何删除 TagRange 呢？

例如，我有一个范围，并想删除。

```
tag: 0_to_F  { "_id" : "0" } -->> { "_id" : "F" } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:43:22.810

目前没有删除标签范围辅助功能（请参阅[此页面](https://jira.mongodb.org/browse/SERVER-6352)以获取添加请求）。现在，您必须手动修改**配置数据库中的****标签**集合。我会在确保它们反映之后重新启动你的 mongos 进程。

# c# - 将图像列添加到 Telerik Radgrid

> ID：15930827
> 
> 赞同：0
> 
> 时间：2013-04-10T16:00:15.917
> 
> 标签：c#, winforms, telerik, radgridview

使用 c#.net4.5 telerik，Visual Studio 2012。Winforms。

一个简单的问题，我如何在代码中有一个可以将图像存储在 radgridview 中的新列？

我以前的带有 datagridview 的 winforms 代码曾经是这样的。

```
DataGridViewImageCell p2 = new DataGridViewImageCell();
dgv_Pareto.Columns.Add(new DataGridViewImageColumn() { CellTemplate = p2, FillWeight = 1, HeaderText = "p2", Name = "p2", Width = 30 }); 
```

为什么哦为什么在telerik中不是这种情况。

先谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:25:20.323

您只需要使用 GridViewImageColumn。更多信息[在这里](http://www.telerik.com/help/winforms/gridview-columns-gridviewimagecolumn.html)

# ruby-on-rails - Ruby on Rails：NoMethodError

> ID：15930831
> 
> 赞同：0
> 
> 时间：2013-04-10T16:00:24.697
> 
> 标签：ruby-on-rails, nomethoderror

我是 ROR 的初学者。当我在一本书上测试代码时，我遇到了一个问题。我一步一步地遵循它，但错误出现了......

CaculatorController 中的 NoMethodError#calculate

```
undefined method `[]=' for nil:NilClass 
```

Rails.root：/home/toth4321/calculator

```
app/controllers/caculator_controller.rb:4:in `set_charset' 
```

**控制器**

```
class CaculatorController < ApplicationController
  before_filter:set_charset
  def set_charset
    @headers['Content-Type'] = 'text/html; charset=GB2312'
  end

  def calculate
    if request.post?
      arg1 = convert_float(:arg1)
      arg2 = convert_float(:arg2)
      op = convert_operator(:operator)
      @result = op.call(arg1, arg2)
    end
  end

  private
  def convert_float(name)
    Float (params[name])
  end

  def convert_operator(name)
    case params[name]
      when "+" then proc {|a,b| a+b}
      when "-" then proc {|a,b| a-b}
      when "*" then proc {|a,b| a*b}
      when "/" then proc {|a,b| a/b}
    end
  end
end 
```

**意见**

```
<html>
  <head>
    <title>簡單的網頁計算器</title>
  </head>
  <body>
    <%= form_tag(:action => :calculate) %>
      <%= text_field_tag(:arg1, @params[:arg1], :size =>3) %>
      <%= select_tag(:operator, options_for_select(%w{+ - * /})), @params[:operator])) %>
      <%= text_field_tag(:arg2, @params[:arg2], :size =>3) %>
      <%= submit_tag（"送出"）　％&gt;
    <% end_form_tag %>
    <b><%= @result %></b>
  </body>
</html> 
```

有人可以帮助我吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T13:27:57.387

请尝试通过添加以下代码来运行。

```
before_filter :set_charset
def set_charset
    @headers["Content-Type"] = "text/html; charset=GB2312" 
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T21:37:05.480

删除`@`from`@headers`因为它不是实例变量，而是`response.headers`散列的委托方法：

```
headers['Content-Type'] = 'text/html; charset=GB2312' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:03:52.410

不知道是什么`@headers`，但据我所知，你还没有在任何地方定义它。尝试：

```
 def set_charset
    @headers = {'Content-Type' => 'text/html; charset=GB2312'}
  end 
```

# excel - 将 Excel 中的动态和静态范围导入到 MS-Access 中，而不是从单元格 A1 开始

> ID：15930832
> 
> 赞同：6
> 
> 时间：2013-04-10T16:00:29.253
> 
> 标签：excel, ms-access, ms-access-2007, excel-2007

如何链接 Excel 电子表格中的数据范围，以便该范围中的数据在 Access 中显示为可用表？

链接到具有从单元格 A1 开始的数据的 Excel 工作表很容易，但是 Excel 电子表格中的数据从工作表的其他地方开始，我不确定如何让 Access 精确定位它，特别是如果那个非 A1范围是动态的。

通过导入/链接向导时，访问似乎没有选择命名/动态范围。

真实世界场景：

我有一个 Excel 电子表格文件，我们称之为“ **ExcelFile1.xls** ”，它是从外部提供给我的（所以我不能真正改变它的格式）。

1 个工作表/选项卡，我们称之为“*动态*”，有一个我希望在 Access 中作为表可用的数据范围，但它的列标题从第 14 行开始，一直到 EL 列。我希望 Access 将这个数据范围作为一个表格。此外，“ **ExcelFile1.xls** ”也将定期更新，即“ExcelFile.xls”文件的新版本将可用，但在第 14 行的列标题下方有更多数据，所以理想情况下我希望 Access 获取新版本每当我覆盖以前版本的“ **ExcelFile1.xls** ”时，此范围内的数据。

我还有另一个 Excel 电子表格文件，我们称它为“ **ExcelFile2.xls** ”，再次由外部提供给我。

这有一个工作表/选项卡，我们称之为“*静态*”，它同样有一个我想要在 Access 中作为表格的数据范围，并且同样会有更新版本的“ **ExcelFile2.xls** ”，它将覆盖我之前的版本理想情况下，就像 Access 一样。这个范围是`A14:O19`并且将永远是这个范围（即静态范围）。

总而言之：我想将 Access 链接到来自 2 个各自 Excel 文件的 2 个数据范围，以在 Access 中生成 2 个单独的表。源数据范围中的 1 个是动态的，另一个是静态的。如果可能的话，我希望 Access 通过使用完全相同的文件名和路径的新版本覆盖源 Excel 文件来获取新数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T11:08:04.917

好的，从这里关于这个问题的有用指针，以及我在其他地方提出的其他一些问题，我认为对于任何想要从 Excel 电子表格中提取数据作为动态范围或静态范围的人来说，我有一个相当简单的解决方案，其中Excel 中的数据不在单元格 A1 中开始。

这两个示例都使用按钮来启动代码。您显然不必这样做，但如果这样做，您将需要创建一个表单和按钮，然后从按钮上运行代码生成器，并用下面您需要的任何解决方案替换该代码。

**动态范围：**

请注意，此动态范围示例假定 Excel 中的单元格范围始终从相同的最左上角位置开始，并且列数始终相同 - 即唯一动态的是底部行数你的细胞范围。

您需要根据自己的设置换出的参考资料：

*   `C:\Users\Matt\Desktop\ExcelFile1.xls`替换为 Excel 文件的完整路径

*   `Dynamic`替换为 Excel 文件中包含的工作表名称

*   `A14:A2000`替换为您要测试的范围以查看有多少非空单元格。这个范围应该： 从列标题所在的数据行开始；覆盖您要导入的数据中永远不会有空单元格条目的列；覆盖的范围足够大，以至于它总是会超过 Excel 电子表格中包含实际数据的行数。

*   `ExcelDynamicRangeData`替换为您想要在 Access 中调用包含从 Excel 范围中提取的数据的表的任何内容。

*   `Dynamic!A14:EL`替换为工作表的名称、Excel 范围的最顶部/最左侧的单元格引用和最右侧的列字母。不要包括最底部/最右侧的行号，因为这是需要动态的，因此`numberofrows`稍后将其分配给该范围的末尾并将其连接到该范围的末尾。

*   `numberofrows = 13 ...`将 13 替换为列标题开始位置上方的行数。例如，如果您的列标题从第 4 行开始，则此数字需要为 3。

*   `Command0`替换为用于启动所有此代码的按钮的名称。

```
Sub ImportDataFromRange()

' Assign the Excel Object
Dim excelapp As Object
Set excelapp = CreateObject("excel.application")

' Assign the workbook
Dim wb As Object
Set wb = excelapp.Workbooks.Open("C:\Users\Matt\Desktop\ExcelFile1.xls")

' Assign the result of your CountA function used in the next line
Dim numberofrows As Integer

' Get the bottom-most row number needed to complete our dynamic range address
numberofrows = 13 + excelapp.Application.CountA(wb.worksheets("Dynamic").Range("A14:A2000"))

' Delete any previous access table, otherwise the next line will add an additional table each time it is run
DoCmd.DeleteObject acTable, "ExcelDynamicRangeData"

' Import data from Excel using a range that now knows where bottom row number is
DoCmd.TransferSpreadsheet acLink, acSpreadsheetTypeExcel9, "ExcelDynamicRangeData", "C:\Users\Matt\Desktop\ExcelFile1.xls", True, "Dynamic!A14:EL" & numberofrows

' Close and clean
wb.Close
Set wb = Nothing
excelapp.Quit
Set excelapp = Nothing

End Sub    

Private Sub Command0_Click()

ImportDataFromRange

End Sub 
```

**静态范围：**

这要简单得多，因为无需打开 Excel 工作簿即可`CountA`对数据应用函数。

您需要根据自己的设置换出的参考资料：

*   `C:\Users\Matt\Desktop\ExcelFile2.xls`替换为 Excel 文件的完整路径

*   `ExcelStaticRangeData`替换为您想要在 Access 中调用包含从 Excel 范围中提取的数据的表的任何内容。

*   `Static!A14:EL20`替换为工作表的名称，以及要导入的 Excel 中单元格的完整范围地址。由于此方法描述了如何从 Excel 中获取*静态*数据范围以访问 Excel 中的数据，因此您要导入的数据永远不应超出此范围。

*   `Command0`替换为用于启动所有此代码的按钮的名称。

```
Sub ImportDataFromRange()

' Delete any previous access table, otherwise the next line will add an additional table
DoCmd.DeleteObject acTable, "ExcelStaticRangeData"

' Import data from Excel using a static range
DoCmd.TransferSpreadsheet acLink, acSpreadsheetTypeExcel9, "ExcelStaticRangeData", "C:\Users\Matt\Desktop\ExcelFile2.xls", True, "Static!A14:EL20"

End Sub    

Private Sub Command0_Click()

ImportDataFromRange

End Sub 
```

**注意**：

*   两种方法中的`acSpreadsheetTypeExcel9`位指的是您正在导入的 Excel 文件的版本；在我的示例中，我正在导入 Excel 2000 格式；您可能正在导入不同版本的 Excel，因此请参阅[此](http://msdn.microsoft.com/en-us/library/office/bb225982%28v=office.12%29.aspx)以查看您需要在代码中引用哪个版本；*.xlsx*文件未列出，但应该是`acSpreadsheetTypeExcel12Xml`.

*   我的示例将数据作为源数据的活动链接引入 Access。如果您有大量数据，您可能会发现将数据实际导入并存储到 Access 中会更好，因为链接可能会导致一些性能问题。如果是这种情况，请换掉`acLink`。`acImport`

*   如果您尚未在 Access 中手动创建一个空白表（在代码中引用了相同的表名），那么您要么需要这样做，要么`DoCmd.DeleteObject acTable, "yourAccessTable"`在第一次运行代码时注释掉，然后再恢复这部分.

可能还有更多的事情可以做 - 即，如果您的数据源具有不同数量的列，则调整 CountA 函数以考虑动态的列数。

再次感谢@david-zemens、@gord-thompson 以及其他 StackoverFlow 用户帮助我实现这一点 - 这对我和希望其他人都非常有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T16:30:59.537

我不是 Access 的人，但让我给你一些应该能够帮助你的建议。

> 1 个工作表/选项卡，我们称之为“动态”，有一个我希望在 Access 中作为表格可用的数据范围，但它的列标题从第 14 行开始，一直到 EL 列。我希望 Access 将这个数据范围作为一个表格。此外，“ExcelFile1.xls”也将定期更新，即“ExcelFile.xls”文件的新版本将可用，但在第 14 行的列标题下方有更多数据，所以理想情况下我希望 Access 获取新版本每当我覆盖以前版本的“ExcelFile1.xls”时，此范围内的数据。

好的，所以在此工作表上，您将要建立一个动态命名范围。基本上，您创建一个公式来确定/调整范围的大小，只要向其中添加新数据。

有关如何创建动态命名范围的概述，请从这里开始：

[http://support.microsoft.com/kb/830287](http://support.microsoft.com/kb/830287)

那么，使用 VBA，最坏的情况是您可以访问此命名范围，将其内容读入数组变量或简单地遍历行/列，然后将这些内容写入您的 Access 表。但是，不是 Access 程序员，可能有一些更有效的方法可以做到这一点。

> 这有一个工作表/选项卡，我们称之为“静态”，它同样有一个我想要在 Access 中作为表格的数据范围，并且再次，将有更新版本的“ExcelFile2.xls”覆盖我之前的版本理想情况下，就像 Access 一样。这个范围是 A14:O19 并且总是这个范围（即静态范围）。

您同样可以创建另一个命名范围，`=$A$14:$O$19`该范围定义为静态命名范围。然后，您可以像上面一样对待它。

**编辑**这是获取 Excel 数据然后遍历行和列的示例，您只需添加代码以将字段/记录/等添加到 Access 中的表中。

```
Sub ImportDataFromRange()
'Access variables
Dim dbFile As Database
Dim tbl As TableDef, fld As Field

'Excel variables
Dim xlApp As Excel.Application
Dim xlFile As Excel.Workbook
Dim xlSheet As Excel.Worksheet
Dim xlRange As Excel.Range
Dim r#, c#
Dim clVal As String 'string to hold cell's value, may need to modify this type.

Set dbFile = CurrentDb

'Use this to create a new table definition
'    Set tbl = dbFile.CreateTableDef("Test")
'Use this if your table already exists:
    Set tbl = dbFile.TableDefs("Test")

'Get the info from Excel:
Set xlApp = New Excel.Application

Set xlFile = xlApp.Workbooks.Open("C:\Users\david_zemens\desktop\Book1.xlsx")
Set xlSheet = xlFile.Sheets("Sheet1")
Set xlRange = xlSheet.Range("A1:B10")

    For r = 1 To xlRange.Rows.Count
        For c = 1 To xlRange.Columns.Count

            'Add code to append new fields/records/etc to your table

        Next c
    Next r

xlApp.Quit
Set xlApp = Nothing

End Sub 
```

希望这足以让你开始！

# php - 未定义索引 PHP 代码

> ID：15930834
> 
> 赞同：-3
> 
> 时间：2013-04-10T16:00:31.630
> 
> 标签：php, ajax, html

我有这个使用 ajax 的 php

**cotizaciones.php**

```
 <script>
        function showUser(str)
        {
            if (str == "")
            {
                document.getElementById("txtHint").innerHTML = "";
                return;
            }
            if (window.XMLHttpRequest)
            {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            }
            else
            {// code for IE6, IE5
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange = function()
            {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
                {
                    document.getElementById("txtHint").innerHTML = xmlhttp.responseText;
                }
            }
            xmlhttp.open("GET", "getuser.php?q=" + str, true);
            xmlhttp.send();
        }
    </script> 
```

我有另一个如上所述的脚本，除了它被称为 calcularCuotas(cuotas) 并且最后几行是：

```
xmlhttp.open("GET", "getuser.php?c=" + str, true);
                xmlhttp.send(); 
```

身体标签包含：

```
<select name="users" onchange="showUser(this.value)">
<select name="cuotas" onchange="calcularCuota(this.value)"> 
```

文件**getuser.php**

```
 <?php 
$q = $_GET["q"]; 
$c = $_GET["c"]; 
?> 
```

当我尝试使用它时，php 会抛出这个错误：

***注意：未定义的索引：第 3 行 C:\wamp\www\Cotizacion\getuser.php 中的 c***

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:07:28.500

使用 Jquery 的 Ajax 库，这只是一个建议。

[jQuery:阿贾克斯](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:02:21.547

在您的第一个代码块中，即 cotizaciones.php

```
xmlhttp.open("GET", "getuser.php?q=" + str, true); 
```

它不包含 c 作为查询字符串，因此您会收到错误 undefined index c

# c# - Winform 控件值默认和验证

> ID：15930836
> 
> 赞同：2
> 
> 时间：2013-04-10T16:00:42.477
> 
> 标签：c#, winforms

希望这是一个有趣的问题：

假设我使用包含许多控件的 winform 设计了一个对话框。

(1) 打开此对话框时，我想为所有控件设置默认值。但是，一个控件的值可能取决于另一个控件（或某些其他控件）的值。

(2) 当用户更改了一个控件的值时，我想在整体上下文中验证新值。换句话说，我有很多规则说明哪些值组合是可接受的（如果控件 A 的值为 1，控件 B 的值为 2，那么控件 C 的值不得为 3）

现在让我们假设我可以保证我定义的所有“规则”都不会陷入死循环。

我的问题是：是否有任何已知的框架或通用做法可以以一般方式处理此问题？我不希望它特定于我创建的这个特定对话框。我希望它是这样一个框架，我只需定义“规则”——规则说明哪些组合是无效的，规则说明控制的推断值是什么——并且框架将在控制值发生变化时评估这些规则。

欢迎任何想法或评论:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:17:44.383

我不确定这种模式是否有名称，或者即使它是最佳实践，但我通常以以下方式处理它。我只展示了一个控件，但设计很容易支持添加更多控件。

```
public partial class Form1 : Form
{
    private EventHandler textBoxChanged;

    public Form1() {
        InitializeComponent();

        this.Load += new EventHandler(Form1_Load);

        textBoxChanged = new EventHandler(textBox1_TextChanged);
    }

    void setEventHandlers() {
        textBox1.TextChanged += textBoxChanged;
    }

    void removeEventHandlers() {
        textBox1.TextChanged -= textBoxChanged;
    }

    void textBox1_TextChanged(object sender, EventArgs e) {
        checkAndUpdate(sender as TextBox);
    }

    void Form1_Load(object sender, EventArgs e) {
        // set minimum required set of default values ...

        setEventHandlers();
        checkAndUpdate(null);
    }

    private void checkAndUpdate(Control userModified) {
        removeEventHandlers();

        // enforce rules
        //   if rules are violated, you can notify the user 
        //   of the offending control: userModified

        // update dependent controls

        setEventHandlers();
    }
} 
```

# javascript - 使用 javascript 检查 url 的有效性

> ID：15930838
> 
> 赞同：0
> 
> 时间：2013-04-10T16:00:49.493
> 
> 标签：javascript, html, validation

如何使用 javascript 并检查链接是否来自特定网站？

例如：

如果网站= [http://youtube.com/ajshdas](http://youtube.com/ajshdas)

如果选项= youtube

```
 <html>
 <select>
 <option>Youtube</option>
 .......
 </html> 
```

我如何使用 javascript 来验证这一点？我应该使用正则表达式吗？如果是这样，它是如何在javascript中完成的？我正在使用后端进行检查，使用前端脚本或后端脚本进行检查是否好？

更新：我需要用户从 10 个网站的列表中进行选择，并在下面的文本框中提交一个链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:04:38.533

尝试使用字符串函数和分隔符拆分字符串， 通过将分隔符作为“.”从[https://www.youtube.com中提取“youtube”。](https://www.youtube.com)然后使用函数 .contains 检查网站名称字符串中的该字符串。

还有很多其他方法。这只是一个基本的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:17:10.987

Input should always be validated on the back-end to ensure correctness of your application (malicious users can easily circumvent front-end validation).

Input should preferably be validated on the front-end as well, to improve the user experience (not having to reload a page).

In javascript:

```
var url= document.createElement('a');
url.href = "http://youtube.com/ajshdas";

url.protocol == "http:";
url.hostname == "youtube.com";
url.pathname == "/ajshdas"; 
```

I don't know your usecase, but instead of a `<select>` input, you could simply extract your hostname from your url input.

# iphone - 播放声音时录制音频

> ID：15930841
> 
> 赞同：3
> 
> 时间：2013-04-10T16:00:56.413
> 
> 标签：iphone, ios, avaudioplayer, avaudiorecorder

是否可以使用 AVAudioRecorder 录制音频并同时使用 AVAudioPlayer 播放另一个音频文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T11:50:56.653

iOS 6 是可能的。我自己在 iOS 5.x 中这样做时遇到了问题。没有关于 5.x 之前版本的信息。

为此，必须将 AudioSession-category 设置为`AVAudioSessionCategoryPlayAndRecord`

```
NSError *error = nil;
NSLog(@"Setting category for AudioSession to AVAudioSessionCategoryPlayAndRecord");
BOOL success = [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayAndRecord error:&error];
if (!success) {
    NSLog(@"Error setting category for AudioSession:\n\terror: %@", error.localizedDescription);
} 
```

AVAudioRecorder 的设置如下：

```
NSString *fileToRecordPath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject] stringByAppendingPathComponent:@"record.m4a"];
NSURL *fileToRecordURL = [NSURL fileURLWithPath:fileToRecordPath];
NSDictionary *settings = @{AVFormatIDKey: [NSNumber numberWithInt:kAudioFormatMPEG4AAC],
                           AVSampleRateKey: [NSNumber numberWithFloat:44100.0],
                           AVNumberOfChannelsKey: [NSNumber numberWithInt:1]};
NSError *error = nil;

AVAudioRecorder *audioRecorder = [[AVAudioRecorder alloc] initWithURL:self.fileURL settings:settings error:&error];
 if (!audioRecorder) {
    NSLog(@"Error initializing AVAudioRecorder:\n\terror: %@", error.localizedDescription);
}
audioRecorder.delegate = self;
[audioRecorder prepareToRecord]; 
```

在 AVAudioPlayer 中播放另一个音频文件（相同格式，m4a）时，在 iOS 6 中一切正常。在 iOS 5 中，行为很奇怪。播放音频或音频播放暂停时，无法开始录音。当首先开始录制时，可以同时播放（另一个文件）。

经过一番搜索后，我找不到正确设置它的方法。虽然我不敢相信，这是 iOS 中的一个错误，但缺少设置。

所以这适用于 iOS 6，但非常感谢对 iOS 5 问题的帮助；o)

# php - Facebook 提要流：如何在用户操作上显示弹出窗口？

> ID：15930845
> 
> 赞同：0
> 
> 时间：2013-04-10T16:01:02.487
> 
> 标签：php, facebook

我正在尝试通过 facebook php sdk 提交一些内容，并且在我的计算机（然后是本地主机）上使用我的测试应用程序时，一切正常。但是在我的网络服务器（PROD）上，当我登录时，$userId 一直返回 0：

```
// PROD
define('YOUR_APP_ID', 'XXXXXX');
define('SECRET_KEY', 'XXXXXXXXXXX');

//TEST
//define('YOUR_APP_ID', 'YYYYYYY');
//define('SECRET_KEY', 'YYYYYYYYYYYY');

$facebook = new Facebook(array(
        'appId'  => YOUR_APP_ID,
        'secret' => SECRET_KEY,
));

$userId = $facebook->getUser(); 
```

（而且我确定应用程序 id 和密码都可以）

知道为什么吗？

# ruby-on-rails - Ruby on Rails 中的 AssociationType 不匹配

> ID：15930846
> 
> 赞同：0
> 
> 时间：2013-04-10T16:01:08.860
> 
> 标签：ruby-on-rails, ruby, model, controller, associations

我有一个模型 HighSchool (high_school.rb)，它扩展了用户，还有一个模型运动员 (athlete.rb)，它也扩展了用户。在 Athlete 中，它有一个 belongs_to :high_school。在高中，它有一个 has_many :athletes。

当尝试从 HighSchool 控制器创建 Athlete 时，在我添加belongs_to 和 has_many 之前它运行良好（因为当时我在 Athlete 中没有 high_school_id 列），它中断了。以下是我收到的错误，任何想法是什么问题？

```
ActiveRecord::AssociationTypeMismatch (HighSchool(#2194641240) expected, got 
String(#2151984260)):
app/controllers/high_school_controller.rb:6:in `new'
app/controllers/high_school_controller.rb:6:in `create_high_school_athlete'
config/initializers/disable_assets_logger.rb:10:in `call' 
```

这是高中控制器：

```
class HighSchoolController < ApplicationController

def create_high_school_athlete
  athlete_attributes = params[:athlete]
  athlete_attributes = construct_athlete_attributes(athlete_attributes)
  @high_school_athlete = Athlete.new(athlete_attributes)

  if @high_school_athlete.valid? && @high_school_athlete.save
    stat_success = create_athlete_stats(@high_school_athlete, params)
        if stat_success[:success]
            respond_to do |format|
                format.json { render json: { errors: @high_school_athlete.errors.full_messages } }
            end
        else
            @high_school_athlete.destroy
            respond_to do |format|
                format.json { render json: { errors: stat_success[:error_messages] } }
            end
        end
  else
        respond_to do |format|
            format.json { render json: { errors: @high_school_athlete.errors.full_messages } }
        end
  end
end

def create_athlete_stats high_school_athlete, params
  @height = high_school_athlete.stat(:height)
  @weight = high_school_athlete.stat(:weight)

  height_in_inches = (params[:height_feet][:value].nil? ? 0 : params[:height_feet][:value].to_f * 12) + (params[:height_inches][:value].nil? ? 0 : params[:height_inches][:value].to_f)

  @height.value = height_in_inches.to_s
  @weight.value = params[:weight][:value]

  if @height.save && @weight.save
    {:success => true, :error_messages => ""}
  else
    {:success => false, :error_messages => @height.errors.full_messages + @weight.errors.full_messages}
  end
end

private

def construct_athlete_attributes athlete_attributes
  athlete_attributes[:username] = create_athlete_username(params[:athlete][:first_name], params[:athlete][:last_name])
  athlete_attributes[:password] = (36**(16-1) + rand(36**16)).to_s(36)
  athlete_attributes[:password_confirmation] = athlete_attributes[:password]
  athlete_attributes[:user_type_id] = 1
  athlete_attributes[:account_type_id] = 1
  athlete_attributes[:state] = current_high_school.state
  athlete_attributes[:hometown] = current_high_school.hometown
  athlete_attributes[:high_school] = current_high_school.high_school
  athlete_attributes[:high_school_id] = current_high_school.id

  athlete_attributes
end 
```

这是一个相当长的 ajax 调用，但直接来自 Ajax 调用的参数（根据 Rails 的日志）如下：

```
Started POST "/high_school/create_high_school_athlete" for 127.0.0.1 at 2013-04-10 10:45:29 -0500
Processing by HighSchoolController#create_high_school_athlete as */*
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"DIzC7Ix45dbXklLvYjbGf9i1sn67amaJYvG6zs5fhUA=", 
    "athlete"=>{"first_name"=>"a", "last_name"=>"a", "recruit_year"=>"2015", 
    "primary_sport_id"=>"6", "primary_sport_primary_position_id"=>"", 
    "secondary_sport_id"=>"", "email"=>"TEST@blah.com", "birthday"=>""}, "height_feet"=>
    {"value"=>"5"}, "height_inches"=>{"value"=>"9"}, "weight"=>{"value"=>"160"}} 
```

最后，使用调试器打印运动员属性（就在 Athlete.new 被作为参数调用之前）显示了这一点：

```
(rdb:1) p athlete_attributes
{"first_name"=>"a", "last_name"=>"a", "recruit_year"=>"2015", "primary_sport_id"=>"6", 
"primary_sport_primary_position_id"=>"", "secondary_sport_id"=>"", 
"email"=>"TEST@blah.com", "birthday"=>"", "username"=>"aa", 
"password"=>"c5n9abih4q705yet", "password_confirmation"=>"c5n9abih4q705yet", 
"user_type_id"=>1, "account_type_id"=>1, "state"=>"AL", "hometown"=>"blahtown", 
"high_school"=>"Blah University", "high_school_id"=>109} 
```

# javascript - 我可以在子窗口中访问变量吗

> ID：15930847
> 
> 赞同：0
> 
> 时间：2013-04-10T16:01:12.497
> 
> 标签：javascript, jquery

我正在尝试访问已打开的窗口中的变量。

这是父窗口，它打开一个新窗口，设置对子窗口的引用，然后在另一个 onclick 事件中尝试检索子窗口中定义的变量。

```
 var window1;

    //open a window
    $('#btnOpen').click(function () {
        window1 = window.open('openedwindow', 'window2');
    });

    //get child variable
    $('#btnGetChildVariable').click(function () {
        alert(window1.childVariable);
    }); 
```

这是子窗口中的代码

```
 var childVariable = 'My child'; 
```

这可能吗？是 window1.childVariable 正确的语法，目前它只返回 undefined （没有不安全的 javascript 错误，我已经尝试过它来获取子窗口中的控件并且我可以访问它）。Javascript的权威指南第358页似乎表明这是可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:25:35.510

我出错的地方如下，我已经定义了

```
$(document).ready(function () { 
```

函数和我的变量是在这些函数中定义的。这意味着

```
var childVariable 
```

没有在全局范围内定义，而是在函数的上下文中定义，因此在函数之外无法访问（我相信是闭包）。

（它确实有效，但如果我有任何错误，请纠正我）

# excel - 我如何使用 Vlookup 或是否抓取相邻的单元格

> ID：15930849
> 
> 赞同：0
> 
> 时间：2013-04-10T16:01:21.810
> 
> 标签：excel, if-statement, vlookup

```
0.4  0.7295 0.008082
0.45 0.7332 0.001519
0.45 0.7307 0.03161
0.5  0.7352 0.1174
0.5  0.7345 0.1528
0.5  0.7347 0.127
0.5  0.7323 0.07249
0.55 0.7354 0.1349
0.55 0.7349 0.1475
0.55 0.7321 0.1017
0.4  0.7432 0.1018
0.4  0.7506 0.09984
0.4  0.7529 0.1948 
```

我尝试了什么： =VLOOKUP(.4,C3:E11,2) 我想要做的是绘制与第一列匹配的所有数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:15:29.323

例如，如果您想为第一列的每个唯一值绘制第二列的平均值，您可以使用 averageif 语句为第一列的每个值创建数据表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:52:18.090

您可以使用 excel 数据透视图来执行此操作

将数据放入带有标题、alt、提升和拖动的工作表中，然后单击插入数据透视表 > 数据透视图

接下来将字段列表项按如下 alt 移动到报告过滤器，拖动到 Axis 字段提升到 Sigma 值

这应该会为您生成一个图表，您可以修改所需的选项，例如图表类型、颜色等

# android - 重启、关机和进入安卓手机下载模式的代码？

> ID：15930850
> 
> 赞同：1
> 
> 时间：2013-04-10T16:01:22.540
> 
> 标签：android, shutdown, reboot

大家好，我只是想找出一些可以以***编程***方式重新启动、***关闭***并进入***下载模式***手机的代码。我已经筋疲力尽地在互联网上寻找与此有关的东西，但失败了。有没有人有任何想法/链接/参考？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:13:29.297

如果您的应用使用系统密钥签名，则可以使用[reboot()](http://developer.android.com/reference/android/os/PowerManager.html#reboot%28java.lang.String)。

另一方面，如果你有 root，你仍然可以这样做（这在一些 ROM 上不起作用，主要是一些股票 HTC 的。

关闭：

```
try {
    Process proc = Runtime.getRuntime()
                    .exec(new String[]{ "su", "-c", "reboot -p" });
    proc.waitFor();
} catch (Exception ex) {
    ex.printStackTrace();
} 
```

重新开始：

相同的代码，只需使用`reboot`而不是`reboot -p`.

AFAIK，无法使用任何 API 启动到“下载模式”，但在有根设备上，您可以使用`adb`二进制文件来完成

# r - findAssocs 和 numeric(0)

> ID：15930854
> 
> 赞同：0
> 
> 时间：2013-04-10T16:01:36.790
> 
> 标签：r, text, text-mining, tm

我正在尝试使用 tm 包在术语文档矩阵中查找与特定单词相关的单词。

我总是得到`numeric(0)`我的结果示例；

```
findAssocs(myTdm, "evrensel", 0.25)
numeric(0) 
```

`numeric(0)`， 那是什么意思？我想找到关系。任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T16:47:55.383

我认为你没有任何与 evrensel 相关的术语，相关因子超过 0.25

# javascript - 在 css 动画完成之前使 onclick 功能不起作用

> ID：15930856
> 
> 赞同：0
> 
> 时间：2013-04-10T16:01:43.263
> 
> 标签：javascript, css

我有这些“上一个”和“下一个”按钮，可以在我的网站上移动一些幻灯片。当您单击一个时，它会转到下一张或上一张幻灯片，并使用 css3 过渡属性进行动画处理，并更改滑动容器的左侧属性 += 或 -= 800px。

```
#sliding-container {
position: relative;
left: -1600px;

transition: all 2s ease;
-moz-transition: all 2s ease;
-webkit-transition: all 2s ease;
-o-transition: all 2s ease;
}

.slide {
width: 800px; height: 500px;
background-color: white;

transition: all 2s ease;
-moz-transition: all 2s ease;
-webkit-transition: all 2s ease;
-o-transition: all 2s ease;
} 
```

这是js：_

```
 function slide(direction) {
            if (direction == 'prev') {
                    $("#sliding-container").css('left', '+=800px');

            }

            else if (direction == 'next') {
                    $("#sliding-container").css('left', '-=800px');

            }
        } 
```

这个幻灯片函数被称为 onclick:_

```
 <div class="fade" id="fade1" onclick="slide('prev')"><</div>
        <div class="fade" id="fade2" onclick="slide('next')">></div> 
```

问题

但问题是，如果您快速单击下一个或上一个按钮两次，它会搞砸，这就是为什么，我希望该功能在单击时不会再次运行，直到 2 秒过去（即，直到转换完成）​​。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:06:12.177

您可以在单击按钮时将诸如运行之类的变量设置为true。然后，您需要像这样绑定到动画结尾：

OBJECT.bind('animationend webkitAnimationEnd ',function(e){ running = false; });

这样你就不必玩延迟或超时，可以等待它告诉你它已经完成了。

然后在您单击时，您可以在决定运行动画之前检查它当前是否正在运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:07:47.210

我使用了超时功能，在 Fernker 的帮助下，我想到了如何使用超时。

我在头部部分之前添加了这个，

```
 <script type="text/javascript">
    var running = false;
    </script> 
```

我将此添加到幻灯片功能的顶部，

```
running = true; 
```

和幻灯片功能底部的这一行

```
window.setTimeout(function() {running = false;}, 2000); 
```

2000 年，因为那是过渡的时候。

我编辑了 onclick 部分

```
 <div class="fade" id="fade1" onclick="if (!running) { slide('prev'); }"><</div>
        <div class="fade" id="fade2" onclick="if (!running) { slide('next'); }">></div> 
```

现在它起作用了！所以基本上这是 fernker 的建议，只是超时，因为绑定不起作用。

# c++ - 尽管没有错误，Opencv 程序仍会退出

> ID：15930860
> 
> 赞同：0
> 
> 时间：2013-04-10T16:02:14.070
> 
> 标签：c++, visual-c++, opencv, execution

我尝试运行[与 FLANN](http://docs.opencv.org/doc/tutorials/features2d/feature_flann_matcher/feature_flann_matcher.html)代码匹配的功能。我正在使用 Ms Visual C++ 2010 Express，在构建解决方案时我没有收到任何错误

> 1>----- 构建开始：项目：SURF_image_matching，配置：Debug Win32 ------ 1> SURF_image_matching.cpp 1>c:\users\karthick\documents\visual studio 2010\projects\surf_image_matching\surf_image_matching \surf_image_matching.cpp(83): 警告 C4018: '<' : 有符号/无符号不匹配 1> SURF_image_matching.vcxproj -> C:\Users\KARTHICK\Documents\Visual Studio 2010\Projects\SURF_image_matching\Debug\SURF_image_matching.exe == ======== 构建：1 成功，0 失败，0 最新，0 跳过 ==========

当我运行时，它终止而没有任何输出我得到以下形式的几行

> “SURF_image_matching.exe”：已加载“C:\Windows\SysWOW64\sechost.dll”，找不到或打开 PDB 文件“SURF_image_matching.exe”：已加载“C:\Windows\SysWOW64\rpcrt4.dll”，找不到或打开 PDB 文件
> 
> 'SURF_image_matching.exe': 卸载'C:\Program Files (x86)\Searchqu Toolbar\Datamngr\IEBHO.dll' 'SURF_image_matching.exe': 卸载'C:\Windows\SysWOW64\dbghelp.dll'
> 
> 线程“Win32 线程”(0x6e8) 已退出，代码为 0 (0x0)。程序“[7592] SURF_image_matching.exe: Native”已退出，代码为 -1 (0xffffffff)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T14:35:06.127

确保编译器可以看到 OpenCV bin 目录，可以通过以下两种方式之一完成：

1.  将其添加到您的环境`PATH`变量中

2.  选择您的 VS 解决方案 Configuration Properties > Debugging > Environment 将值设置为

    ```
    PATH = %PATH%;C:\OpenCVX.XX\bin 
    ```

希望能帮助到你。

# javascript - 如何在类中创建类

> ID：15930868
> 
> 赞同：0
> 
> 时间：2013-04-10T16:02:25.227
> 
> 标签：javascript

我已经用 Java 编程了一段时间。可以在 Java 中完成以下操作：

```
public class Parent
{
    public static class Child
    {
    }
} 
```

然后可以像这样调用它的新实例`new Parent.Child();`

我想知道是否可以在 JavaScript 中实现相同的功能。有人可以告诉我如何做到这一点，并解释它是如何以及为什么起作用的吗？（我仍然不太习惯 OO-JavaScript 处理类等的方式。）

谢谢，丹尼斯

# javascript - 如何断开 iframe 中的 Javascript 或覆盖 iframe 中的类

> ID：15930870
> 
> 赞同：0
> 
> 时间：2013-04-10T16:02:29.497
> 
> 标签：javascript, css

我想问我怎么能做到这一点？

我有一个`iframe`来自另一个站点的站点，它显示 2 个红色`<div>`元素。他们有自己的班级`.red`。有没有办法`class="red"`从我的网站将部分覆盖到另一个类？

或者我可以在此断开 Javascript`iframe`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:07:00.900

`iframe`如果您可以在资源之后访问 DOM，则`load`可以覆盖范围内的 a `function`，`global`如下所示：

```
window.myFunction = function(arg){
      // implementation
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:05:41.963

您应该阅读[Same origin policy](http://en.wikipedia.org/wiki/Same_origin_policy)，该政策规定了您可以在多大程度上操纵 iframe 的内容。

简而言之，如果 iframe 正在显示来自另一个域的页面，您将无法修改其 DOM。

# ruby-on-rails - Ruby on Rails 使用 pdf 中间件打印和下载 pdf

> ID：15930871
> 
> 赞同：0
> 
> 时间：2013-04-10T16:02:32.743
> 
> 标签：ruby-on-rails, printing, pdf-generation, pdfkit

我已经在我的 rails-project 中安装了 PDFkit，一切正常，但我没有找到任何方法来打印和下载生成的 pdf。我相信有人和我有同样的问题。

# typo3 - 在单个 Typoscript 对象路径中包含多个插件

> ID：15930874
> 
> 赞同：1
> 
> 时间：2013-04-10T16:02:40.313
> 
> 标签：typo3, typoscript

如果我的 Templavoila 模板中有一个元素是 Typoscript 对象路径，是否可以通过 Typoscript 包含多个插件？

我尝试了以下方法，但它没有渲染任何东西。

`lib.my_mapping.10 < plugin.tx_myplugin_pi1`

`lib.my_mapping.20 < plugin.tx_myotherplugin_pi1`

如果我只想渲染一个插件，那么它可以正常工作，例如

`lib.my_mapping.10 < plugin.tx_myplugin_pi1`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:12:11.103

您需要首先声明`lib.my_mapping`为`COA`cObject （`COA`代表[内容对象数组](http://wiki.typo3.org/TSref/COA)）

```
lib.my_mapping = COA
lib.my_mapping {
  10 < plugin.tx_some_pi1
  20 < plugin.tx_some_pi2
  // etc
} 
```

# c# - System.Data.SqlClient 代码是托管代码吗？

> ID：15930875
> 
> 赞同：2
> 
> 时间：2013-04-10T16:02:43.633
> 
> 标签：c#, sql-server, managed, unmanagedresources

1.  在 C# 程序中使用 System.Data.SqlClient 命名空间执行的查询是托管代码还是非托管代码？

2.  每次连接关闭时，`(conn.Close()`都会使用方法）资源是否考虑释放或者我们必须释放它才能释放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:16:29.017

关于第二个问题：

Close 方法回滚任何挂起的事务。然后它释放到连接池的连接，或者如果连接池被禁用，则关闭连接。

**已编辑**

下面的示例创建一个 SqlConnection，打开它，显示它的一些属性。连接在 using 块结束时自动关闭。

```
private static void OpenSqlConnection(string connectionString)
{
    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        connection.Open();
        Console.WriteLine("ServerVersion: {0}", connection.ServerVersion);
        Console.WriteLine("State: {0}", connection.State);
    }
} 
```

**已编辑**

您创建的每个实现 IDisposable 的对象都需要一个 using。这包括`SqlCommand`和`SqlConnection`。如果你使用`using`语句，它们将在使用块后处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:37:05.197

System.Data.SqlClient 本身是托管代码。但是，它是建立在其他几个库之上的。其中一些是托管代码，而另一些则不是。

1.  查询本身由数据库执行。因此，查询的文本（在程序中硬编码的部分）将被视为托管代码，但是一旦命令发送到数据库，它就不再是托管的。

2.  执行 .close 命令后，连接本身将从您的 .net 应用程序中释放并返回到连接池（OLEDB、ODBC 和/或其他子系统的一部分）。此时，连接被释放，非托管部分被释放。Dispose 将完成所有关闭操作并释放其他托管部分（连接字符串等）。

在实现它的任何对象上调用 dispose 总是一个好主意（或将其包装在 using 块中，如 @IRSOG 所示）。在这种情况下，调用 close() 并不是特别危险。我不会养成这样的习惯。

# ios - iOS 没有可用于签名的身份

> ID：15930876
> 
> 赞同：2
> 
> 时间：2013-04-10T16:02:45.420
> 
> 标签：ios

我在 stackoverflow 上查看了许多此类问题，但找不到对我有帮助的问题。我的问题看起来与[错误相同：“没有可用于签名的身份”Xcode 4.3.1](https://stackoverflow.com/questions/9635939/error-no-identities-are-available-for-signing-xcode-4-3-1)

如果我单击“下载身份”，它什么也找不到。如果我单击 Import Developer Profile，它只允许我选择 .developerprofile。如果我选择 1 我有它不接受它并返回到与链接中相同的屏幕。

当我转到 iTunes Connect 并制作和下载配置文件时，它们都以 .mobileprovision 结尾，并且存档的验证不会让我从我的下载文件夹中选择它们（它们是灰色的）。

我错过了什么？如何制作像这样的 .developerprofile 似乎只是想要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:06:28.327

我建议您仔细阅读此文档[https://developer.apple.com/programs/ios/gettingstarted/](https://developer.apple.com/programs/ios/gettingstarted/)，如果您还没有并且可能需要重新创建您的开发人员证书请求并从头开​​始。

# c# - 如何将文件从隔离存储复制到 Skydrive

> ID：15930879
> 
> 赞同：4
> 
> 时间：2013-04-10T16:02:51.497
> 
> 标签：c#, windows-phone-7, onedrive, live-sdk

我需要将数据从我的 WP7 应用程序备份到 Skydrive，这个文件是 xml 文件。我知道如何连接到 skydrive 以及如何在 skydrive 上创建文件夹：

```
try
{
    var folderData = new Dictionary<string, object>();
    folderData.Add("name", "Smart GTD Data");

    LiveConnectClient liveClient = new LiveConnectClient(mySession);
    liveClient.PostAsync("me/skydrive", folderData);
}
catch (LiveConnectException exception)
{
    MessageBox.Show("Error creating folder: " + exception.Message);
} 
```

但我不知道如何将文件从隔离存储复制到 skydrive。

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T17:35:40.163

很简单，你可以用这个[`liveClient.UploadAsync`](http://msdn.microsoft.com/en-us/library/live/microsoft.live.liveconnectclient.uploadasync)方法

```
private void uploadFile(LiveConnectClient liveClient, Stream stream, string folderId, string fileName) {
    liveClient.UploadCompleted += onLiveClientUploadCompleted;
    liveClient.UploadAsync(folderId, fileName, stream, OverwriteOption.Overwrite);
}

private void onLiveClientUploadCompleted(object sender, LiveOperationCompletedEventArgs args) {
    ((LiveConnectClient)sender).UploadCompleted -= onLiveClientUploadCompleted;
    // notify someone perhaps
    // todo: dispose stream
} 
```

您可以从 IsolatedStorage 获取流并像这样发送

```
public void sendFile(LiveConnectClient liveClient, string fileName, string folderID) {
    using (IsolatedStorageFile storage = IsolatedStorageFile.GetUserStoreForApplication()) {
        Stream stream = storage.OpenFile(filepath, FileMode.Open);
        uploadFile(liveClient, stream, folderID, fileName);
    }
} 
```

请注意，您需要在上传流时使用*文件夹 ID 。*由于您正在创建文件夹，因此您可以在文件夹创建完成后获取此 ID。只需在发布文件夹数据请求时注册该`PostCompleted`事件。

这是一个例子

```
private bool hasCheckedExistingFolder = false;
private string storedFolderID;

public void CreateFolder() {
    LiveConnectClient liveClient = new LiveConnectClient(session);
    // note that you should send a "liveClient.GetAsync("me/skydrive/files");" 
    // request to fetch the id of the folder if it already exists
    if (hasCheckedExistingFolder) {
      sendFile(liveClient, fileName, storedFolderID);
      return;
    }
    Dictionary<string, object> folderData = new Dictionary<string, object>();
    folderData.Add("name", "Smart GTD Data");
    liveClient.PostCompleted += onCreateFolderCompleted;
    liveClient.PostAsync("me/skydrive", folderData);
}

private void onCreateFolderCompleted(object sender, LiveOperationCompletedEventArgs e) {
    if (e.Result == null) {
        if (e.Error != null) {
          onError(e.Error);
        }
        return;
    }
    hasCheckedExistingFolder = true;
    // this is the ID of the created folder
    storedFolderID = (string)e.Result["id"];
    LiveConnectClient liveClient = (LiveConnectClient)sender;
    sendFile(liveClient, fileName, storedFolderID);
} 
```

# r - 取消列出数据框中的所有列表元素

> ID：15930880
> 
> 赞同：10
> 
> 时间：2013-04-10T16:02:54.247
> 
> 标签：r, dataframe

我有一个数据框，每列包含以下变量类别：

```
"date" "numeric" "numeric" "list" "list" "numeric" 
```

每行中的数据如下所示：

```
 1978-01-01, 12.5, 6.3, c(0,0,0.25,0.45,0.3), c(0,0,0,0.1,0.9), 72 
```

我想将其转换为每列一个值的矩阵或数据框，因此结果应如下所示：

```
1978-01-01, 12.5, 6.3, 0, 0, 0.25, 0.45, 0.3, 0, 0, 0, 0.1, 0.9, 72 
```

我试过使用：

```
j<-unlist(input)
output<-matrix(j,nrow=nrow(input),ncol=length(j)/nrow(input)) 
```

但它弄乱了输出中行的顺序。

任何想法？

**附加信息：**

上面的例子稍微简化了，`dput(head(input))`返回下面的例子：

```
structure(list(DATE = structure(c(2924, 2925, 2926, 2927, 2928, 
2929), class = "Date"), TEMP_MEAN_M0 = c(-7.625, -7.375, -6, 
-5.5, -7.625, -9.625), SLP_MEAN_M0 = c(1012.125, 991.975, 989.825, 
986.675, 988.95, 993.075), WIND_DIR_RF_M0 = structure(list(`2.counts` = c(0, 
0.625, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.125, 0, 0, 0, 0.125), `3.counts` = c(0.75, 
0.25, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), `4.counts` = c(0.375, 
0.125, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.125, 0.125, 0, 0, 0), `5.counts` = c(0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.125, 
0, 0, 0.125, 0.375, 0.25, 0, 0, 0, 0, 0, 0, 0, 0, 0), `6.counts` = c(0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.125, 
0, 0.25, 0.125, 0.25, 0.25, 0, 0, 0, 0, 0, 0, 0, 0, 0), `7.counts` = c(0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0.125, 0.5, 0.375, 0, 0, 0, 0, 0, 0, 0, 0, 0)), .Names = c("2.counts", 
"3.counts", "4.counts", "5.counts", "6.counts", "7.counts")), 
    CEIL_HGT_RF_M0 = structure(list(`2.counts` = c(0.625, 0, 
    0, 0, 0, 0, 0, 0, 0, 0.375), `3.counts` = c(0.75, 0.125, 
    0, 0.125, 0, 0, 0, 0, 0, 0), `4.counts` = c(0.25, 0.125, 
    0, 0.125, 0, 0, 0, 0, 0.25, 0.25), `5.counts` = c(0, 0, 0, 
    0, 0, 0, 0, 0, 0.125, 0.875), `6.counts` = c(0, 0, 0, 0, 
    0, 0, 0, 0, 0, 1), `7.counts` = c(0, 0, 0, 0, 0, 0, 0, 0, 
    0, 1)), .Names = c("2.counts", "3.counts", "4.counts", "5.counts", 
    "6.counts", "7.counts")), WIND_SPD_MEAN_M0 = c(12.8125, 18.7375, 
    6.175, 8.175, 10.5375, 16.5375)), .Names = c("DATE", "TEMP_MEAN_M0", 
"SLP_MEAN_M0", "WIND_DIR_RF_M0", "CEIL_HGT_RF_M0", "WIND_SPD_MEAN_M0"
), row.names = c(NA, 6L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-10T17:03:40.963

这有点混乱，可能效率很低，但应该可以帮助您入门：

以下是一些示例数据：

```
mydf <- data.frame(Date = as.Date(c("1978-01-01", "1978-01-02")),
                   V1 = c(10, 10),
                   V2 = c(11, 11))
mydf$V3 <- list(c(1:10),
                c(11:20))
mydf$V4 <- list(c(21:25),
                c(26:30))
mydf
#         Date V1 V2                                     V3                 V4
# 1 1978-01-01 10 11          1, 2, 3, 4, 5, 6, 7, 8, 9, 10 21, 22, 23, 24, 25
# 2 1978-01-02 10 11 11, 12, 13, 14, 15, 16, 17, 18, 19, 20 26, 27, 28, 29, 30 
```

并且，一个小函数检查哪些列是列表，对于这些列，`rbind`将它们放在一起，并最终`cbind`将它们与*不是*列表的列放在一起。

```
myFun <- function(data) {
  temp1 <- sapply(data, is.list)
  temp2 <- do.call(
    cbind, lapply(data[temp1], function(x) 
      data.frame(do.call(rbind, x), check.names=FALSE)))
  cbind(data[!temp1], temp2)
}

myFun(mydf)
#         Date V1 V2 V3.1 V3.2 V3.3 V3.4 V3.5 V3.6 V3.7 V3.8 V3.9 V3.10 V4.1
# 1 1978-01-01 10 11    1    2    3    4    5    6    7    8    9    10   21
# 2 1978-01-02 10 11   11   12   13   14   15   16   17   18   19    20   26
#   V4.2 V4.3 V4.4 V4.5
# 1   22   23   24   25
# 2   27   28   29   30 
```

这仅在每个“列”列表包含相同长度的向量时才有效（否则基本 R`rbind`将不起作用）。

* * *

### 更新

半天后重新审视这个问题，我看到另一个用户（[**@user1981275**](https://stackoverflow.com/users/1981275/user1981275)）发布了一个更直接的解决方案，但随后删除了他们的答案。也许他们删除了，因为他们的方法将日期转换为整数，因为正如 DWin 指出的那样，矩阵中的项目必须都是相同的模式。

这是他们的解决方案：

```
t(apply(mydf, 1, unlist))
#      Date V1 V2 V31 V32 V33 V34 V35 V36 V37 V38 V39 V310 V41 V42 V43 V44 V45
# [1,] 2922 10 11   1   2   3   4   5   6   7   8   9   10  21  22  23  24  25
# [2,] 2923 10 11  11  12  13  14  15  16  17  18  19   20  26  27  28  29  30 
```

以下是如何轻松修改它以获得所需的输出。这肯定会比早期的方法更快：

```
cbind(mydf[!sapply(mydf, is.list)], 
      (t(apply(mydf[sapply(mydf, is.list)], 1, unlist))))
#         Date V1 V2 V31 V32 V33 V34 V35 V36 V37 V38 V39 V310 V41 V42 V43 V44 V45
# 1 1978-01-01 10 11   1   2   3   4   5   6   7   8   9   10  21  22  23  24  25
# 2 1978-01-02 10 11  11  12  13  14  15  16  17  18  19   20  26  27  28  29  30 
```

或者，作为用户函数：

```
myFun <- function(data) {
  ListCols <- sapply(data, is.list)
  cbind(data[!ListCols], t(apply(data[ListCols], 1, unlist)))
}
myFun(mydf) 
```

* * *

### 更新 2

我还编写了一个更有效的函数，称为`col_flatten`“SOfun”包的一部分。

使用以下命令安装包：

```
source("http://news.mrdwab.com/install_github.R")
install_github("mrdwab/SOfun") 
```

然后，你可以这样做：

```
library(SOfun)
col_flatten(mydf, names(which(sapply(mydf, is.list))), drop = TRUE)
##          Date V1 V2 V3_1 V3_2 V3_3 V3_4 V3_5 V3_6 V3_7 V3_8 V3_9 V3_10 V4_1 V4_2 V4_3 V4_4 V4_5
## 1: 1978-01-01 10 11    1    2    3    4    5    6    7    8    9    10   21   22   23   24   25
## 2: 1978-01-02 10 11   11   12   13   14   15   16   17   18   19    20   26   27   28   29   30 
```

它基于`transpose`“data.table”中的函数，因此请确保您也有“data.table”。

# php - 使用 Apache 和 PHP 连接到 MySQL

> ID：15930883
> 
> 赞同：1
> 
> 时间：2013-04-10T16:03:03.993
> 
> 标签：php, mysql, database, apache, connection

我目前在使用 PHP 5 的 Apache 2.2 上。我正在尝试连接到我的 Apache 服务器上的 MySQL 并创建一个名为 my_db 的数据库...我有以下代码：

```
<?php
$con=mysqli_connect();
// Check connection
if (mysqli_connect_errno()){
echo "Failed to connect to MySQL: " . mysqli_connect_error();
}else{
echo "Connected Successfully!";
}
// Create database
$sql="CREATE DATABASE my_db";
if (mysqli_query($con,$sql)){
echo "Database my_db created successfully";
}else{
echo "Error creating database: " . mysqli_error();
}
?> 
```

但是，当脚本运行时，我得到以下输出：

> 连接成功！创建数据库时出错：

请帮忙。这不是身份验证问题，因为“连接成功！” 被印...

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:21:50.693

您可以使用以下方法查询用户权限的概览：

```
SHOW GRANTS FOR 'user'@'host'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:19:39.293

尝试在 mysql 命令行上创建一个新用户，授予该用户所有权限，然后以该新用户身份连接并尝试创建数据库。这应该可以解决您的问题。假设您在 localhost 上连接到 mysql，则创建新用户所需的代码是：

```
bash# mysql --user=root -p

mysql> CREATE USER 'monty'@'localhost' IDENTIFIED BY 'some_pass';
mysql> GRANT ALL PRIVILEGES ON *.* TO 'monty'@'localhost' WITH GRANT OPTION; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-05T12:12:51.043

替换 `echo "Error creating database: " . mysqli_error();` 为 `echo "Error creating database: " . mysqli_error($con);`

`$con`在函数中作为参数添加`mysqli_error`，你会得到确切的错误，

[http://php.net/mysqli_error](http://php.net/mysqli_error)

# python - 将不规则时间戳的测量值转换为等间距的时间加权平均值

> ID：15930885
> 
> 赞同：16
> 
> 时间：2013-04-10T16:03:08.267
> 
> 标签：python, pandas, time-series

我有一系列带有时间戳且间隔不规则的测量值。这些系列中的值始终代表测量值的变化——即没有变化就没有新值。此类系列的一个简单示例是：

```
23:00:00.100     10
23:00:01.200      8
23:00:01.600      0
23:00:06.300      4 
```

我想要达到的是一系列等距的时间加权平均值。对于给定的示例，我可能会针对基于秒的频率，因此结果如下：

```
23:00:01     NaN ( the first 100ms are missing )
23:00:02     5.2 ( 10*0.2 + 8*0.4 + 0*0.4 )
23:00:03       0
23:00:04       0
23:00:05       0
23:00:06     2.8 ( 0*0.3 + 4*0.7 ) 
```

我正在寻找解决该问题的 Python 库。对我来说，这似乎是一个标准问题，但到目前为止我在 pandas 等标准库中找不到这样的功能。

该算法需要考虑两件事：

*   时间加权平均
*   在形成平均值时考虑当前间隔之前的值（甚至可能提前）

## 使用熊猫

```
data.resample('S', fill_method='pad')          # forming a series of seconds 
```

做部分工作。为聚合提供用户定义的函数将允许[形成时间加权平均值](https://stackoverflow.com/questions/10839701/time-weighted-average-with-pandas/10856106#10856106)，但由于忽略了间隔的开始，这个平均值也将是不正确的。更糟糕的是：系列中的孔被平均值填充，在上面的示例中导致第 3、4 和 5 秒的值不为零。

```
data = data.resample('L', fill_method='pad')   # forming a series of milliseconds
data.resample('S') 
```

以一定的准确性完成这个技巧，但是 - 取决于准确性 - 非常昂贵。就我而言，太贵了。

## 编辑：解决方案

```
import pandas as pa
import numpy as np
from datetime import datetime
from datetime import timedelta

time_stamps=[datetime(2013,04,11,23,00,00,100000), 
             datetime(2013,04,11,23,00,1,200000),
             datetime(2013,04,11,23,00,1,600000),
             datetime(2013,04,11,23,00,6,300000)]
values = [10, 8, 0, 4]
raw = pa.TimeSeries(index=time_stamps, data=values)

def round_down_to_second(dt):
    return datetime(year=dt.year, month=dt.month, day=dt.day, 
                    hour=dt.hour, minute=dt.minute, second=dt.second)

def round_up_to_second(dt):
    return round_down_to_second(dt) + timedelta(seconds=1)

def time_weighted_average(data):
    end = pa.DatetimeIndex([round_up_to_second(data.index[-1])])
    return np.average(data, weights=np.diff(data.index.append(end).asi8))

start = round_down_to_second(time_stamps[0])
end = round_down_to_second(time_stamps[-1])
range = pa.date_range(start, end, freq='S')
data = raw.reindex(raw.index + range)
data = data.ffill()

data = data.resample('S', how=time_weighted_average) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-09-27T17:14:41.630

你可以用[traces](http://traces.readthedocs.io/)做到这一点。

```
from datetime import datetime
import traces

ts = traces.TimeSeries(data=[
    (datetime(2016, 9, 27, 23, 0, 0, 100000), 10),
    (datetime(2016, 9, 27, 23, 0, 1, 200000), 8),
    (datetime(2016, 9, 27, 23, 0, 1, 600000), 0),
    (datetime(2016, 9, 27, 23, 0, 6, 300000), 4),
])

regularized = ts.moving_average(
    start=datetime(2016, 9, 27, 23, 0, 1),
    sampling_period=1,
    placement='left',
) 
```

结果是：

```
[(datetime(2016, 9, 27, 23, 0, 1), 5.2),
 (datetime(2016, 9, 27, 23, 0, 2), 0.0),
 (datetime(2016, 9, 27, 23, 0, 3), 0.0),
 (datetime(2016, 9, 27, 23, 0, 4), 0.0),
 (datetime(2016, 9, 27, 23, 0, 5), 0.0),
 (datetime(2016, 9, 27, 23, 0, 6), 2.8)] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T01:53:17.120

这是一个解决方案，它可能需要一些调整以满足您的要求。

将秒数添加到索引并向前填充：

```
tees = pd.Index(datetime(2000, 1, 1, 23, 0, n) for n in xrange(8))
df2 = df1.reindex(df1.index + tees)
df2['value'] = df2.value.ffill()

In [14]: df2
Out[14]:
                            value
2000-01-01 23:00:00           NaN
2000-01-01 23:00:00.100000     10
2000-01-01 23:00:01            10
2000-01-01 23:00:01.200000      8
2000-01-01 23:00:01.600000      0
2000-01-01 23:00:02             0
2000-01-01 23:00:03             0
2000-01-01 23:00:04             0
2000-01-01 23:00:05             0
2000-01-01 23:00:06             0
2000-01-01 23:00:06.300000      4
2000-01-01 23:00:07             4 
```

取时间差（使用[`shift`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.shift.html)）直到下一个值，然后乘以（值 * 秒）：

```
df3['difference'] = df3['index'].shift(-1) - df3['index']
df3['tot'] = df3.apply(lambda row: np.nan
                                   if row['difference'].seconds > 2  # a not very robust check for NaT
                                   else row['difference'].microseconds * row['value'] / 1000000,
                        axis=1)

In [17]: df3
Out[17]:
                        index  value      difference  tot
0         2000-01-01 23:00:00    NaN 00:00:00.100000  NaN
1  2000-01-01 23:00:00.100000     10 00:00:00.900000  9.0
2         2000-01-01 23:00:01     10 00:00:00.200000  2.0
3  2000-01-01 23:00:01.200000      8 00:00:00.400000  3.2
4  2000-01-01 23:00:01.600000      0 00:00:00.400000  0.0
5         2000-01-01 23:00:02      0        00:00:01  0.0
6         2000-01-01 23:00:03      0        00:00:01  0.0
7         2000-01-01 23:00:04      0        00:00:01  0.0
8         2000-01-01 23:00:05      0        00:00:01  0.0
9         2000-01-01 23:00:06      0 00:00:00.300000  0.0
10 2000-01-01 23:00:06.300000      4 00:00:00.700000  2.8
11        2000-01-01 23:00:07      4             NaT  NaN 
```

然后重新采样到秒（总和值*秒）：

```
In [18]: df3.set_index('index')['tot'].resample('S', how='sum')
Out[18]:
index
2000-01-01 23:00:00    9.0
2000-01-01 23:00:01    5.2
2000-01-01 23:00:02    0.0
2000-01-01 23:00:03    0.0
2000-01-01 23:00:04    0.0
2000-01-01 23:00:05    0.0
2000-01-01 23:00:06    2.8
2000-01-01 23:00:07    NaN
Freq: S, dtype: float64 
```

*注意：终点需要一些强制（总和很聪明，忽略了NaN）......*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-11T00:58:10.943

这不是答案，但我需要一些图表来确定什么是时间加权平均平均值。这是一个用您的数据绘制的图表：

![在此处输入图像描述](https://i.stack.imgur.com/UJMAm.png)

你想要每个垂直跨度的平均值吗？第一个跨度是 0-1，因为它包含未知数据，所以结果是 NaN。第二个块是1-2，其值计算公式为：（10*0.2 + 8*0.4 + 0*0.4），和你的一样。但是不知道 5-6 的值是怎么来的：

```
23:00:06     2.8 ( 0*0.3 + 2*0.7 ) 
```

你能解释一下如何计算这个值吗？

# windows-phone-8 - Windows Phone 8：如何将不可见的地图渲染为位图？

> ID：15930890
> 
> 赞同：2
> 
> 时间：2013-04-10T16:03:18.447
> 
> 标签：windows-phone-8, writeablebitmap, here-api

这是我到目前为止所拥有的：

```
const int imgSize = 210;
Map tempMap = new Map { Width = imgSize, Height = imgSize };
// ... adding some layers, setting the view
Size size = new Size(imgSize, imgSize);
tempMap.Measure(size);
tempMap.Arrange(new Rect(new Point(0, 0), size));
tempMap.UpdateLayout();

WriteableBitmap bmp = new WriteableBitmap(imgSize, imgSize);
bmp.Render(tempMap, null);
bmp.Invalidate();
IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication();
string filename = "/Shared/ShellContent/" + /* ... file name */ ".jpg";
using (IsolatedStorageFileStream stream = store.OpenFile(filename, FileMode.OpenOrCreate))
    bmp.SaveJpeg(stream, imgSize, imgSize, 0, 100);

tile.Update(new FlipTileData
{
    // ... set other properties
    BackgroundImage = new Uri("isostore:" + filename, UriKind.Absolute)
}); 
```

我想用地图的图像（WP8，来自诺基亚）更新动态磁贴。根据[这个答案](https://stackoverflow.com/a/6939575/1420237)，即使是从不属于可视化树的 UIElements 也可以使用 WriteableBitmap 进行渲染；但是，我的图像只是黑色的。这是地图控件的问题，还是我做错了什么？

编辑 1：Windows Phone WriteableBitmap 类似乎与[MSDN 上记录的](http://msdn.microsoft.com/de-de/library/system.windows.media.imaging.writeablebitmap.aspx)完全不同。诡异的。

编辑 2：[Silverlight WriteableBitmap 的文档](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap%28v=vs.95%29.aspx)

编辑 3：部分进展！添加以下三行：

```
tempMap.Width = imgSize // right before the measure call. DO NOT set the height.
(Content as Grid).Children.Add(tempMap) // right after creating tempMap. (your layout may vary)
(Content as Grid).Children.Remove(tempMap) // after you're done. (your layout may vary) 
```

这会产生一个完全蓝色的图像，而不是一个完全黑色的图像。更改 tempMap.Center 和 tempMap.ZoomLevel 对图块没有影响；*调用 tempMap.SetView完全*没有效果（为了调试，我将地图留在了我的应用页面中，这样我就可以看到调用的效果 - 瓷砖*不是*地图在页面中的样子）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T19:34:29.883

我自己试过这个，也无法让它工作。不过，我只是使用 Bing 的静态地图 API 解决了这个问题。然后我可以下载一张地图，指定为我想要的确切大小，然后使用它。以下链接显示了如何使用它，并提供了获取 API 密钥的链接（只需一秒钟）。

[http://bingmapsdemos.sharepoint.com/Pages/BingMapsStaticMaps.aspx](http://bingmapsdemos.sharepoint.com/Pages/BingMapsStaticMaps.aspx)

# android - 脸书登录安卓

> ID：15930891
> 
> 赞同：4
> 
> 时间：2013-04-10T16:03:20.407
> 
> 标签：android, andengine

我需要为我的 Android 应用程序实现 facebook 登录。我正在使用andengine，所以我无法使用facebook提供的登录按钮。我还需要用户的电子邮件地址。

为此，我创建了一个名为 facebookActivity 的活动：

```
public class FacebookActivity extends BaseGameActivity{
    private static final int CAMERA_WIDTH = 480;
    private static final int CAMERA_HEIGHT = 720;
    private Scene scene;
    private StatusCallback callback;

    @SuppressLint("NewApi")
    @Override
    public EngineOptions onCreateEngineOptions() {
        int SDK_INT = android.os.Build.VERSION.SDK_INT;

        if (SDK_INT>8){

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

        StrictMode.setThreadPolicy(policy); 

        }
        final Camera camera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
        return new EngineOptions(true, ScreenOrientation.PORTRAIT_SENSOR, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), camera);

    }
    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
      super.onActivityResult(requestCode, resultCode, data);
      Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
    }
    @Override
    public void onCreateResources(
            OnCreateResourcesCallback pOnCreateResourcesCallback)
            throws Exception {
        pOnCreateResourcesCallback.onCreateResourcesFinished();
        // TODO Auto-generated method stub

    }

    @Override
    public void onCreateScene(OnCreateSceneCallback pOnCreateSceneCallback)
            throws Exception {
        scene = new Scene();
        scene.setBackground(new Background(HelperMethods.getColorFromHex("#372108")));

        pOnCreateSceneCallback.onCreateSceneFinished(scene);

    }

    @Override
    public void onPopulateScene(Scene pScene,
            OnPopulateSceneCallback pOnPopulateSceneCallback) throws Exception {
        callback = new Session.StatusCallback() {

              // callback when session changes state
              @Override
              public void call(Session session, SessionState state, Exception exception) {
                if (session.isOpened()) {

                  // make request to the /me API
                  Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

                    // callback after Graph API response with user object
                    @Override
                    public void onCompleted(GraphUser user, Response response) {
                      if (user != null) {
                        Log.d("text","Hello " + user.getName() + " " + user.getInnerJSONObject());

                      }
                    }
                  });

                }
                else{

                }
              }
            };
            final OpenRequest openRequest = new OpenRequest(this);
              List<String> readPermissions = new ArrayList<String>();
              readPermissions.add("email");
              openRequest.setPermissions(readPermissions);
              openRequest.setLoginBehavior(SessionLoginBehavior.SSO_WITH_FALLBACK);
              openRequest.setCallback(callback);
        runOnUiThread(new Runnable(){

            @Override
            public void run() {

                 new Session(FacebookActivity.this).openForRead(openRequest);

            }

        });
        pOnPopulateSceneCallback.onPopulateSceneFinished();     
    }

} 
```

当我运行此代码时，出现异常`NullPointerException`：

```
java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=64206, result=-1, data=Intent { (has extras) }} to activity {com.vocabtrainer.code/com.vocabtrainer.code.FacebookActivity}: java.lang.NullPointerException 
```

我尝试调试，发现里面 onActivityResult Session.getActiveSession() 为空，但我的应用程序实际上去 facebook 授权我并请求权限。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-12T22:15:50.960

```
 protected void onFacebookLoginClicked() {
            Session.openActiveSession(SplashActivity.this, true, permissions,
                    new Session.StatusCallback() {
                        @Override
                        public void call(Session session, SessionState state,
                                Exception exception) {
                            if (session.isOpened()) {
                                Request.newMeRequest(session,
                                        new Request.GraphUserCallback() {
                                            @Override
                                            public void onCompleted(GraphUser user,
                                                    com.facebook.Response response) {
                                                if (user != null) {
                                                    final Session curSession = Session
                                                            .getActiveSession();
                                                    fbUserid = user.getId();
                                                    fbEmail = user.asMap()
                                                            .get("email")
                                                            .toString();
                                                    fbtoken = curSession
                                                            .getAccessToken();
                                                    fbFirstName = user
                                                            .getFirstName();
                                                    fbLastName = user.getLastName();
                                                    fbLink = "https://graph.facebook.com/"
                                                            + fbUserid + "/picture";

        enter code here
                                                }
                                            }
                                        }).executeAsync();
                            }
                        }

                });
    }
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        Session.getActiveSession().onActivityResult(this, requestCode,
                resultCode, data);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-21T11:46:35.750

```
private Context context;
private Fragment mFragment;
private ShareDialog mShareDialog;

/**
 * @param context
 */
public FacebookLoginManager(Context context, Fragment fragment) {
    this.context = context;
    this.mFragment = fragment;
}

/**
 * @param context
 */
public FacebookLoginManager(Context context) {
    this.context = context;
}

/**
 * The purpose of this method is to initialize the facebook sdk
 *
 * @param callbackManager
 */
public void initializedFacebook(CallbackManager callbackManager) {
    if (FacebookSdk.isInitialized()) {
        performFacebookLogin(callbackManager);
    } else {
        FacebookSdk.sdkInitialize(getApplicationContext());
        performFacebookLogin(callbackManager);
    }
}

/**
 * The purpose of this method is to initialize the facebook  data from the server
 *
 * @param callbackManager
 */
private void performFacebookLogin(CallbackManager callbackManager) {
    try {
        LoginManager.getInstance().registerCallback(callbackManager,
                new FacebookCallback<LoginResult>() {
                    @Override
                    public void onSuccess(LoginResult loginResult) {
                        final String accessToken = "" + loginResult.getAccessToken().getToken();
                        Log.e("accessToken", accessToken);

                        GraphRequest request = GraphRequest.newMeRequest(
                                AccessToken.getCurrentAccessToken(),
                                new GraphRequest.GraphJSONObjectCallback() {
                                    @Override
                                    public void onCompleted(
                                            JSONObject object,
                                            GraphResponse response) {
                                        try {
                                            final FacebookResponseBean mFacebookResponseBean = new FacebookResponseBean();
                                            if (object != null) {
                                                if (object.has(FacebookConstants.ID) && object.get(FacebookConstants.ID) != null) {
                                                    mFacebookResponseBean.setUserId(object.get(FacebookConstants.ID) + "");
                                                }
                                                if (object.has(FacebookConstants.NAME) && object.get(FacebookConstants.NAME) != null) {
                                                    mFacebookResponseBean.setName(object.get(FacebookConstants.NAME) + "");
                                                }
                                                if (object.has(FacebookConstants.EMAIL) && object.get(FacebookConstants.EMAIL) != null) {
                                                    mFacebookResponseBean.setEmail(object.get(FacebookConstants.EMAIL) + "");
                                                }
                                                if (object.has(FacebookConstants.GENDER) && object.get(FacebookConstants.GENDER) != null) {
                                                    mFacebookResponseBean.setGender(object.get(FacebookConstants.GENDER) + "");
                                                }
                                                if (object.has(FacebookConstants.BIRTHDAY) && object.get(FacebookConstants.BIRTHDAY) != null) {
                                                    mFacebookResponseBean.setBirthday(object.get(FacebookConstants.BIRTHDAY) + "");
                                                }
                                                if (object.has(FacebookConstants.AGE_RANGE) && object.get(FacebookConstants.AGE_RANGE) != null) {
                                                    mFacebookResponseBean.setAgerange(object.get(FacebookConstants.AGE_RANGE) + "");
                                                }
                                                if (object.has(FacebookConstants.TIMEZONE) && object.get(FacebookConstants.TIMEZONE) != null) {
                                                    mFacebookResponseBean.setTimezone(object.get(FacebookConstants.TIMEZONE) + "");
                                                }
                                                if (object.has(FacebookConstants.VERIFIED) && object.get(FacebookConstants.VERIFIED) != null) {
                                                    mFacebookResponseBean.setVerified(object.get(FacebookConstants.VERIFIED) + "");
                                                }
                                                if (object.has(FacebookConstants.UPDATED_TIME) && object.get(FacebookConstants.UPDATED_TIME) != null) {
                                                    mFacebookResponseBean.setUpdatedtime(object.get(FacebookConstants.UPDATED_TIME) + "");
                                                }
                                                if (object.has(FacebookConstants.LOCALE) && object.get(FacebookConstants.LOCALE) != null) {
                                                    mFacebookResponseBean.setLocale(object.get(FacebookConstants.LOCALE) + "");
                                                }
                                                if (object.has(FacebookConstants.FIRST_NAME) && object.get(FacebookConstants.FIRST_NAME) != null) {
                                                    mFacebookResponseBean.setFirstName(object.get(FacebookConstants.FIRST_NAME) + "");
                                                }
                                                if (object.has(FacebookConstants.LAST_NAME) && object.get(FacebookConstants.LAST_NAME) != null) {
                                                    mFacebookResponseBean.setLastName(object.get(FacebookConstants.LAST_NAME) + "");
                                                }
                                                if (object.has(FacebookConstants.PICTURE) && object.get(FacebookConstants.PICTURE) != null) {
                                                    JSONObject picture = object.getJSONObject(FacebookConstants.PICTURE);
                                                    JSONObject data = picture.getJSONObject("data");
                                                    if (data.has("url") && data.get("url") != null) {
                                                        mFacebookResponseBean.setPhotolink(data.get("url") + "");
                                                        Logger.error("image", data.get("url") + "");
                                                    }

                                                }
                                            }
                                            if (context instanceof LoginActivity) {
                                                ((LoginActivity) context).setFaceBookResponse(mFacebookResponseBean);
                                            } else if (context instanceof RegistrationActivity) {
                                                ((RegistrationActivity) context).setFaceBookResponse(mFacebookResponseBean);
                                            } else if (context instanceof UserProfileActivity) {
                                                ((UserProfileActivity) context).setFaceBookResponse(mFacebookResponseBean);
                                            } else if (mFragment != null && mFragment instanceof FragmentLinkAccounts) {
                                                ((FragmentLinkAccounts) mFragment).setFaceBookResponse(mFacebookResponseBean);

                                            }
                                        } catch (JSONException e) {
                                            e.printStackTrace();
                                        }
                                    }
                                });
                        Bundle parameters = new Bundle();
                        parameters.putString("fields", FacebookConstants.PERMISSION);
                        request.setParameters(parameters);
                        request.executeAsync();
                    }

                    @Override
                    public void onCancel() {
                    }

                    @Override
                    public void onError(FacebookException exception) {
                        exception.printStackTrace();
                        if (exception instanceof FacebookAuthorizationException) {
                            if (AccessToken.getCurrentAccessToken() != null) {
                                LoginManager.getInstance().logOut();
                            }
                        }
                    }
                });
    } catch (Exception e) {
        e.printStackTrace();
    }
}

/**
 * The purpose of this method is to share the image and content on facebook
 *
 * @param activity
 * @param manager
 * @param image
 * @param isShareRequest
 * @param id
 */
public void shareContent(final Activity activity, CallbackManager manager, View image, final boolean isShareRequest, int id) {
    mShareDialog = new ShareDialog(activity);
    String time = GlobalAcess.getDateTime();
    mShareDialog.registerCallback(manager, new FacebookCallback<Sharer.Result>() {
        @Override
        public void onSuccess(Sharer.Result result) {
            if (isShareRequest)
                ToastMessage.getInstance(activity).showLongMessage(activity.getString(R.string.msg_request_posted));
            else
                ToastMessage.getInstance(activity).showLongMessage(activity.getString(R.string.msg_trip_posted));

        }

        @Override
        public void onCancel() {
        }

        @Override
        public void onError(FacebookException error) {
            error.printStackTrace();

        }
    });
    String url = "";
    if (isShareRequest) {
        url = NetworkConstants.SHARE_REQUEST_URL + "id=" + id + "?t=" + time;
    } else {
        url = NetworkConstants.SHARE_TRIP_URL + "id=" + id + "?t=" + time;
    }
    if (ShareDialog.canShow(ShareLinkContent.class)) {
        ShareLinkContent content = new ShareLinkContent.Builder()
                .setContentUrl(Uri.parse(url))
                .build();
        mShareDialog.show(content);
    }

} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-21T12:10:26.077

您可以创建一个登录`Helper`类：`facebook`

```
public class FbSignInHelper implements FacebookCallback<LoginResult>,
        GraphRequest.GraphJSONObjectCallback {

    private final LoginManager loginManager;
    private FbSignInCompletionListener fbSignInCompletionListener;
    private final Fragment fragment;
    private String accessToken;
    private PrefManager prefManager = PrefManager.getInstance();

    public FbSignInHelper(@NonNull LoginManager loginManager,
                          @NonNull CallbackManager callbackManager, Fragment fragment) {
        this.loginManager = loginManager;
        this.fragment = fragment;

        loginManager.registerCallback(callbackManager, this);
    }

    public void loginUsingFb(FbSignInCompletionListener fbSignInCompletionListener) {
        this.fbSignInCompletionListener = fbSignInCompletionListener;
        loginManager.logInWithReadPermissions(fragment, Arrays.asList("public_profile", "email"));
    }

    @Override
    public void onSuccess(LoginResult loginResult) {

        loginResult.getAccessToken();

        accessToken = loginResult.getAccessToken().getToken();

        if (loginResult.getRecentlyDeniedPermissions().contains("email")) {
            fbSignInCompletionListener.onFbPermissionDenied();
            return;
        }
        GraphRequest request = GraphRequest.newMeRequest(loginResult.getAccessToken(), this);
        Bundle parameters = new Bundle();
        parameters.putString("fields", "name,picture,email,first_name,last_name");
        request.setParameters(parameters);
        request.executeAsync();
    }

    @Override
    public void onCancel() {

        fbSignInCompletionListener.onFbSignInError(R.string.error_msg_fb_error);
    }

    @Override
    public void onError(FacebookException error) {
        if (error instanceof FacebookAuthorizationException) {
            if (AccessToken.getCurrentAccessToken() != null) {
                LoginManager.getInstance().logOut();
            }
        }
        fbSignInCompletionListener.onFbSignInError(R.string.error_msg_fb_error);
    }

    @Override
    public void onCompleted(JSONObject object, GraphResponse response) {

        FacebookRequestError error = response.getError();

        if (error != null) {

            fbSignInCompletionListener.onFbSignInError(R.string.error_msg_fb_error);
            return;
        }

        if (!object.has("email")) {
            fbSignInCompletionListener.emailEmpty(accessToken, object.optString("id"));
            final String first_name = object.optString("first_name");
            final String last_name = object.optString("last_name");

            return;
        }

        if (!object.has("email") || !object.has("id")) {

            fbSignInCompletionListener.onFbSignInError(R.string.error_msg_fb_error);
            return;
        }

        try {
            final String email = object.getString("email");
            final String profilePhoto = object.getJSONObject("picture").
                    getJSONObject("data").optString("url");
            final String name = object.optString("name");
            final String first_name = object.optString("first_name");
            final String last_name = object.optString("last_name");
            final String id = object.optString("id");

            prefManager.setUserName(first_name + " " + last_name);
            FacebookUser facebookUser = new FacebookUser(first_name, last_name, email, profilePhoto, id, accessToken);
            fbSignInCompletionListener.onFbSignInSuccess(facebookUser);

        } catch (JSONException e) {
            Log.e("exception", "unable to parse response from facebook with error message ->%s" + e.getMessage());
            //report error to the presenter
            fbSignInCompletionListener.onFbSignInError(R.string.error_msg_fb_error);
        }
        //
        Log.d("response ->%s", response.getRawResponse());
    }
} 
```

# git - Git rebase 基于标签而不是单个提交

> ID：15930892
> 
> 赞同：1
> 
> 时间：2013-04-10T16:03:28.717
> 
> 标签：git, git-rebase, git-commit, git-tag

我有一个项目，其中我的开发分支在我的稳定分支之前有 2 个标记的版本，但我想删除第一组标记的更改（这是我不再需要的一系列功能）但应用最新的标记更改（第二个标记) 到稳定的标签上。

例如：

提交：

```
[tag] 3.0 - 
sdaf213 Some Commit of the tag 3
sdaas34 Some other commit in this tag
[tag] 2.0 -
wert78 Some commit of tag 2
werg99 Another commit of tag 2
werh55 And another of tag 2
[tag] 1.0 (Stable) -
pry77 Commits of tag 1
...older commits 
```

有没有办法对标签进行 git rebase 而不是提交，这样我就可以在 [tag] 1.0 之上 rebase [tag] 3.0 的所有提交，但从 [tag] 2.0 中排除所有内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:03:28.717

您可以通过以下方式简单地做到这一点：

```
git rebase --onto 1.0 2.0 BRANCH 
```

其中 BRANCH 是要应用变基的分支的名称。

这将使用 1.0 标签作为父标签，然后按顺序重放 3.0 标签的提交：

```
sdaf213 Some Commit of the tag 3
sdaas34 Some other commit in this tag
1.0 (Stable) -
pry77 Commits of tag 1
...older commits 
```

如您所见，3.0 标记不会重新应用到历史记录的末尾。您将不得不创建一个新的，尽管这是有道理的，因为历史已经改变，您可能希望制作这个 2.1 或 3.1 以满足您的需要。

此外，您可以在一系列标签上使用它。例如，如果您现在使用 [tag] 4.0 并想摆脱 [tag] 2.0 和 3.0：

```
git rebase --onto 1.0 3.0 BRANCH 
```

# mysql - Qt MySQL -------- 无法打开包含文件：'mysql.h'：

> ID：15930894
> 
> 赞同：1
> 
> 时间：2013-04-10T16:03:29.207
> 
> 标签：mysql, sql, qt, qtsql

我在 Qt 中制作了一个 GUI 应用程序，它基本上是数据库的前端

但是我什至还没有到做任何事情的地步，因为我的数据库连接一直失败（嗯，它实际上并没有编译，所以它不是数据库连接问题）

无论如何，我的项目甚至不会构建，因为 Qt 给出了错误：

```
 error: C1083: Cannot open include file: 'mysql.h': No such file or directory 
```

我不是特别明白，因为在使用 QtSQL 的课程中​​，我包括了：

```
#include <QtSql/QSqlDatabase>
#include <QtSql/QMYSQLDriver> 
```

现在有点把我的头撞在桌子上，因为我从文档中了解到这两个包含的就是你所需要的，哦，这在我的 .pro 中

```
QT       += sql 
```

我在这里错过了一些非常明显的东西吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:11:31.337

您实际上不需要包含`QMYSQLDriver`. 您真正需要的是构建 mysql 驱动程序。这是[手册，它告诉您如何操作](http://qt-project.org/doc/qt-4.8/sql-driver.html#how-to-build-the-mysql-driver-for-mingw-users)。

# jquery - 使用单选按钮更改 jquery 滑块内的图像 src

> ID：15930895
> 
> 赞同：1
> 
> 时间：2013-04-10T16:03:32.063
> 
> 标签：jquery, html, html5-data

好的，所以基本上我试图在 jquery 图像滑块中构建一个“车辆颜色配置器”。我希望人们能够单击样式化的单选按钮并相应地修改特定的幻灯片 img src。这是我下面的代码，但我无法更改图像...

HTML

```
<div data-iview:image="features/design/design_5.1.jpg" id="config">
            <div class="iview-caption design5" data-transition="fade">
                <h1>Colour</h1><h2>the town...</h2>
                <p>Blah blah fish paste</p>
                <span>
                 <input type="radio" name="config" value='design_5.1.jpg' />
                 <input type="radio" name="config" value='design_5.2.jpg' />
                 <input type="radio" name="config" value='design_5.3.jpg' />
                 <input type="radio" name="config" value='design_5.4.jpg' />
                 <input type="radio" name="config" value='design_5.5.jpg' />
                 <input type="radio" name="config" value='design_5.6.jpg' />
                 <input type="radio" name="config" value='design_5.7.jpg' />
                 <input type="radio" name="config" value='design_5.8.jpg' />
                </span>
            </div>
</div> 
```

查询

```
imgFldr = 'features/design/'; 

$("input[type='radio']").click(function() {   
  $('#config').attr('data-iview', imgFldr+this.value);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:19:44.250

你错过了'：image'，代码是这样的

```
$(function(){
var imgFldr = 'features/design/'; 
$("input[type='radio']").click(function() {   
$('#config').attr('data-iview:image', imgFldr+this.value);
});}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:32:43.360

我设法根据以下内容找到了不同的解决方案：

```
 //The color picker div    
<div class="picker" data-bkgnd="/content/images/someimg.jpg"></div>

//The container for your product image
<div class="productDisplay"></div>

<script type="text/javascript">

 $(document).ready(function(){
   $(".picker").click(function(){       
       //Load background string from data of clicked element
       var bVal = $(this).attr('data-bkgnd');
       //Set display's background to retrieved background string
       $(".productDisplay").hide().css({'background-image': "url(" + bVal + ")"}).show();
   });
 });

</script> 
```

感谢所有的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:19:11.457

在`data-iview:image`运行时将其转换为 css 背景属性，因此动态更改它不会影响滑块上的任何内容

# javascript - 谷歌地图没有正确填充 div

> ID：15930897
> 
> 赞同：2
> 
> 时间：2013-04-10T16:03:36.080
> 
> 标签：javascript, html, css, google-maps, google-maps-api-3

我有一个谷歌地图，它应该获取用户的位置，以他们的位置为中心，然后提供到地图上固定点的方向。

问题是地图没有填充整个地图，`div`也没有居中或缩放到正确的位置，但它正在加载用户位置并给出方向。如果我在 jsFiddle 中重新创建它，虽然它可以正常工作，但是当包含在我的网站中时，就会出现所描述的问题。

jsFiddle：http: [//jsfiddle.net/wXnjt/1/](http://jsfiddle.net/wXnjt/1/)

包含在我的网站中时的外观。 ![地图错误](https://i.stack.imgur.com/3lt0W.jpg)

是什么导致了这个问题？（让我知道您是否希望将我的代码发布在此处，而不必费力）

编辑：开发控制台中也没有出现错误。我也尝试过使用`preserveViewport: true`，但没有效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:37:38.593

如果不确定，您的 Google 地图初始化应该在一个函数中。然后，您只能在切换地图后对其进行初始化，这也将确保如果用户不希望看到它，它不会被加载。

```
function init_maps(){

    // google maps api goes here

}

var init = false;

$('.contact_us').click(){

    if(!init){

        init_maps();
        init = true;
    }

    $('.contact_us').slideToggle();

} 
```

# php - 会话的条件

> ID：15930898
> 
> 赞同：1
> 
> 时间：2013-04-10T16:03:39.043
> 
> 标签：php, session

我正在做一个注册页面，但是我有一个小问题我有一个 initialize.php 页面，其中包含与数据库的连接和一个用于检查成员是否正在登录的会话（对于所有页面）

初始化.php：

```
<?php
session_start();

$host="localhost"; // Host name 
$username="root"; // Mysql username 
$password=""; // Mysql password 
$db_name="memoire"; // Database name 

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

if (!$_SESSION['member_id'])
{
header('Location: login.php');
exit;   
}
?> 
```

问题出在注册页面内部，我需要一种在注册页面内部（显然该成员没有ID）忽略“if（！$_SESSION ['member_id']）”的方法......我只需要初始化页面（在 signup.php 中）只连接到数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:08:59.043

尝试这样的事情：

```
if (!$_SESSION['member_id'] && 
    strpos($_SERVER['SCRIPT_NAME'], "signup.php") === false){

  header('Location: login.php');
  exit;

} 
```

# html - 异步 Ajax 与异步属性

> ID：15930899
> 
> 赞同：2
> 
> 时间：2013-04-10T16:03:52.100
> 
> 标签：html, ajax, asynchronous

一个简单的问题是异步 Ajax 与异步属性相同吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:07:22.187

笼统地说：是的。但是，由于一个适用于 XHR 请求，另一个适用于脚本元素，因此尝试将它们混为一谈没有多大意义。

# mysql - SQL #/count 来自内部连接

> ID：15930902
> 
> 赞同：1
> 
> 时间：2013-04-10T16:03:56.817
> 
> 标签：mysql, sql

我有一个简单的查询：

```
SELECT games.*
FROM games 
INNER JOIN invitations ON invitations.game_id = games.id 
```

我想获得#(COUNT) 个游戏邀请。我不确定在哪里放置 count 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:06:21.320

您将使用`count()`聚合函数并按游戏 ID 分组：

```
SELECT g.id, g.name, count(i.game_id) TotalInvitations
FROM games g
INNER JOIN invitations i
  ON i.game_id = g.id 
group by g.id, g.name 
```

这也可以使用子查询来编写：

```
select g.*, i.TotalInvitations
FROM games g
INNER JOIN
(
  select game_id, count(game_id) TotalInvitations
  from invitations
  group by game_id
) i
  ON i.game_id = g.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:06:52.547

子句中的`count`go 。`select`它计算该记录分组级别的所有记录。做为了得到你需要分组的游戏计数`games.id`。如果您只想要一个总数`,games.id`，则从 select 子句中删除并且不进行任何分组。

```
SELECT count(invitations.invitationID), games.id
FROM games 
INNER JOIN invitations ON invitations.game_id = games.id 
Group By Games.Id 
```

# html - 对齐 a 内的文本 列表

> ID：15930911
> 
> 赞同：0
> 
> 时间：2013-04-10T16:04:29.553
> 
> 标签：html, css

如何对齐 ul 列表中的文本？我尝试了垂直对齐：中间但它没有用

我有其他选择吗？？

这是小提琴链接： http: [//jsfiddle.net/TBEnf/1/](http://jsfiddle.net/TBEnf/1/) 这是我的代码

```
<style>
.profilePicture {
    width:200px;
    height:200px;
    border:1px solid #808080;
    margin:5px;

}

.UploadPicture ul li a {
    display:table-cell;
    text-decoration:none;
    margin-left:10px;
    padding-left:30px;
    padding-right:30px;

}
.UploadPicture ul li {
    display:table-cell;
    list-style-type:none;
    margin:10px;
    vertical-align:middle;
    display:block;
    background:#ff6a00;
}
.UploadPicture ul li:hover {
    background:#808080;
}
 .UploadPicture ul {
     display:table-row;
} 
```

```
 <div class="UploadPicture">
                <ul>
                    <li><a href="#">Change Profile Picture</a></li>
                    <li><a href="#">Privacy</a></li>
                </ul>
            </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:08:03.503

`display:table-cell`从`a`造型中移除。然后`text-align:center`会工作。

```
.UploadPicture ul li a {
    text-decoration:none;
    margin-left:10px;
    padding-left:30px;
    padding-right:30px;

}
.UploadPicture ul li {
    list-style-type:none;
    margin:10px;
    vertical-align:middle;
    display:block;
    background:#ff6a00;
    text-align: center;
} 
```

另请注意，语法是 text-align: *center*，而不是*middle*。

[更新了 JSFiddle](http://jsfiddle.net/TBEnf/2/)。

# javascript - Fancybox 关闭时显示 div

> ID：15930913
> 
> 赞同：1
> 
> 时间：2013-04-10T16:04:36.750
> 
> 标签：javascript, fancybox

我正在使用这段代码加载一个fancybox弹出窗口，它在打开时隐藏父页面上的另一个div，然后当它关闭时我需要它再次显示div，但它似乎找不到要显示的原始div。

```
<script type="text/javascript">
        $(document).ready(function() {
        $(".fancybox").fancybox();
            $(".fancybox").click(function() {
                $("#divtotoggle").hide();
                $.fancybox.open({
                      'type': 'iframe',
                    padding : 0,
                  afterClose: function() {
                        //$("#divtotoggle",parent.document).show();
                        $("#divtotoggle").show();
                    } 
                });
            });
        });
</script> 
```

我得到了`TypeError: document.getElementById(...) is null`一个`afterClose`功能

我认为这是因为它在父母身上，但`$("#divtotoggle",parent.document).show();`也失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:54:16.060

我认为你没有以正确的方式使用fancybox API：试试这个，虽然我没有测试过：注意：如果这不起作用那么，去这个链接并稍微调整一下 [http://fancybox.net/api](http://fancybox.net/api)

```
$(".fancybox").fancybox({
    'type': 'iframe', 
    'onStart':function(){ 
      $("#divtotoggle").hide();
    },
    'onClosed': function() {
      $("#divtotoggle").show();
    }
}); 
```

# c# - 递归正则表达式以匹配键和名称

> ID：15930917
> 
> 赞同：2
> 
> 时间：2013-04-10T16:04:44.680
> 
> 标签：c#, regex, recursive-regex

我有字符串，`["02-03-2013#3rd Party Fuel", "-1#Archived", "2#06-23-2013#Newswire"]`，我想将其分解为几个部分。这些字符串以日期和索引键为前缀并包含名称。

我设计了一个`RegEx`正确匹配每个键的。但是，如果我想一举匹配索引键、日期键和名称。只找到第一个键。递归组似乎没有像我预期的那样工作。

```
private const string INDEX_KEY_REGEX = @"(?<index>-?\d+)";
private const string DATE_KEY_REGEX = @"(?<date>(?:0?[1-9]|1[012])-(?:0?[1-9]|[12]\d|3[01])-\d{4})";
private const string KEY_SEARCH_REGEX = @"(?<R>(?:^|(?<=#))({0})#(?(R)))(?<name>.*)";

private string Name = "2#06-23-2013#Newswire"
... = Regex.Replace(
    Name,
    String.Format(KEY_SEARCH_REGEX, INDEX_KEY_REGEX + "|" + DATE_KEY_REGEX),
    "${index}, ${date}, ${name}"
);

// These are the current results for all strings when set into the Name variable.

// Correct Result: ", 02-03-2013, 3rd Party Fuel"
// Correct Result: "-1, , Archived"
// Invalid Result: "2, , 06-23-2013#Newswire"
// Should be: "2, 06-23-2013, Newswire" 
```

敏锐的眼睛能看到我错过的东西吗？

* * *

**我需要的最终解决方案**

事实证明我不需要递归组。我只需要 0 到多个序列。这里是完整的`RegEx`。

```
(?:(?:^|(?<=#))(?:(?<index>-?\d+)|(?<date>(?:0?[1-9]|1[012])-(?:0?[1-9]|[12]\d|3[01])-(\d{2}|\d{4})))#)*(?<name>.*) 
```

并且，分段`RegEx`

```
private const string INDEX_REGEX = @"(?<index>-?\d+)";
private const string DATE_REGEX = @"(?<date>(?:0?[1-9]|1[012])-(?:0?[1-9]|[12]\d|3[01])-(\d{2}|\d{4}))";
private const string KEY_WRAPPER_REGEX = @"(?:^|(?<=#))(?:{0})#";
private const string KEY_SEARCH_REGEX = @"(?:{0})*(?<name>.*)"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:44:04.730

好吧，各个正则表达式分解为：

索引：捕获单个正数或负数。（-、0 或 1 个代表，后跟一位或多位数字）

date：指定日期字符串，用-分隔。不考虑任何其他日期格式。请注意，不处理前导 '#' 和尾随 '#'，它专门捕获日期，并且仅捕获日期

R：行首或#，然后是格式替换，使其成为一个大正则表达式......然后是另一个#，指定。然后一个没有假的条件......并且真也不做任何事情。

名称：捕获剩下的任何东西。

最终结果，编译成一个正则表达式......两个捕获：R 和名称。R：（4 部分） R-1：匹配行首或 # R-2：获取任何一个（但从不同时获取）日期或索引 R-3：匹配 # R-4：空条件表达式名称：匹配剩下的任何内容.

问题似乎是您不匹配索引和日期

**最终编辑，工作正则表达式**

忍受我，这件事很讨厌。您必须考虑所有 4 种可能性，否则它不会匹配所有可能的情况。我想不出任何方法来概括它。

```
(?:(?<index>-?\d+(?!\d-))#(?<date>(?:0?[1-9]|1[012])-(?:0?[1-9]|[12]\d|:3[01])-\d{4})|(?<date>(?:0?[1-9]|1[012])-(?:0?[1-9]|[12]\d|:3[01])-\d{4})#(?<index>-?\d+)|(?!-?\d+#)(?<date>(?:0?[1-9]|1[012])-(?:0?[1-9]|[12]\d|:3[01])-\d{4})|(?<index>-?\d+)(?!#(?:0?[1-9]|1[012])-(?:0?[1-9]|[12]\d|:3[01])-\d{4}))#(?<name>.*) 
```

丑陋，我知道。它有 4 个初始条件。

```
1a) capture <index>#<date>  OR
1b) capture <date>#<index>  OR
1c) capture <index> only, as long as its not followed by a date  OR
1d) capture <date> only, as long as its not preceded by an index
...
2) match but ignore #
3) capture <name> 
```

适用于所有 4 种情况。

**最终：最终编辑**

有一种方法可以使用 3 个正则表达式而不是 1 个来执行此操作，这最终可能会更干净。

```
//note: index MIGHT be preceeded by, and is ALWAYS followed by, a #
indexRegex = @"((?=#)?(?<!\d|-)-?\d+(?=#))";
//same with date
dateRegex = @"((?=#)?(?:0?[1-9]|1[012])-(?:0?[1-9]|[12]\d|3[01])-\d{4}(?=#))";
//then name
nameRegex = @"(?:.*#){1,2}(.*)"; 
```

分别针对替换运行它们以获取各个变量，然后重建字符串。

# python - equest() 得到了一个意外的关键字参数“预取”

> ID：15930921
> 
> 赞同：1
> 
> 时间：2013-04-10T16:04:59.570
> 
> 标签：python, django

以下代码：

```
response = requests.post(settings.SAGEPAY_URL, data=request_body,
                                     prefetch=True, verify=True) 
```

给出这个错误：

```
request() got an unexpected keyword argument 'prefetch' 
```

为什么以及如何解决？

谢谢

PS 我正在运行 Django 1.5.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T16:08:50.990

参数改为流： http: [//www.python-requests.org/en/master/api/#api-changes](http://www.python-requests.org/en/master/api/#api-changes)

# ios - 如何解析这个 Flickr 响应？

> ID：15930932
> 
> 赞同：7
> 
> 时间：2013-04-10T16:05:28.987
> 
> 标签：ios, nsdictionary, flickr

我从他们的 api 站点中的示例 Flickr 响应中得到这个：

```
jsonFlickrApi({"method":{"_content":"flickr.test.echo"}, "format":{"_content":"json"}, "api_key":{"_content":"8038f7f7d7151ccbf6df2aa10b1b35ae"}, "stat":"ok"}) 
```

我可以在那里看到字典，就在 jsonFlickApi 之后。但是我如何摆脱那个领先的文本并将字典放入我的 NSDictionary 中？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-10T16:08:19.010

使用[`NSJSONSerialization`该类](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)解析 JSON 数据。

**编辑：**表示`jsonFlickrApi(...)`您正在使用 JSONP 端点与 Flickr 交谈。你不需要这个；一个普通的 JSON 端点就可以了。根据[此 Flickr API 文档](http://www.flickr.com/services/api/response.json.html)，您可以通过在发出请求时将参数`nojsoncallback`包含在值中来解决此问题。`1`

# sockets - Worklight 推送异常：SocketException：连接被远程主机关闭

> ID：15930935
> 
> 赞同：0
> 
> 时间：2013-04-10T16:05:34.060
> 
> 标签：sockets, exception, push-notification, apple-push-notifications, ibm-mobilefirst

我完成了 Push 的所有步骤，现在在调用 Push 时，它给出了以下异常。

我正在调用 IBM 的示例推送代码。我可以在数据库中看到设备 ID、令牌、用户 ID，因为用户已成功订阅 Push。

```
[4/10/13 18:27:24:647 AST] 00000044 JavaScriptInt I com.worklight.integration.js.JavaScriptIntegrationLibraryImplementation log Push Called -----> userId:aahad notificationText:ThisismyPushMessage
[4/10/13 18:27:24:663 AST] 00000044 JavaScriptInt I com.worklight.integration.js.JavaScriptIntegrationLibraryImplementation log submitNotification >> userId :: aahad, text :: ThisismyPushMessage
[4/10/13 18:27:24:679 AST] 00000045 ApnsConnectio W com.notnoop.apns.internal.ApnsConnectionImpl sendMessage Failed to send message com.notnoop.apns.EnhancedApnsNotification@6acb1af9... trying again
                                 java.net.SocketException: Connection closed by remote host
    at com.ibm.jsse2.SSLSocketImpl.k(SSLSocketImpl.java:165)
    at com.ibm.jsse2.k.write(k.java:30)
    at java.io.OutputStream.write(OutputStream.java:69)
    at com.notnoop.apns.internal.ApnsConnectionImpl.sendMessage(ApnsConnectionImpl.java:161)
    at com.notnoop.apns.internal.ApnsServiceImpl.push(ApnsServiceImpl.java:46)
    at com.notnoop.apns.internal.AbstractApnsService.push(AbstractApnsService.java:52)
    at com.notnoop.apns.internal.ApnsServiceImpl.push(ApnsServiceImpl.java:36)
    at com.worklight.integration.notification.apns.ApplicationConnection.sendNotification(ApplicationConnection.java:84)
    at com.worklight.integration.notification.apns.APNSMediator.sendNotification(APNSMediator.java:85)
    at com.worklight.integration.notification.Mediator$4.run(Mediator.java:174)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:452)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:314)
    at java.util.concurrent.FutureTask.run(FutureTask.java:149)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:897)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:919) 
```

从 WL 服务器机器我可以远程登录 Apple 服务器。

还有什么我必须在我的网络上检查的东西吗？因为我的客户有非常严格的证券。

这是我正在使用的推送适配器功能代码。

```
function testNotification(userId ,notificationText){
    WL.Logger.debug("Push Called -----> userId:" + userId + " notificationText:"+notificationText);
    var userSubscription = 
        WL.Server.getUserNotificationSubscription('PushAdapter.PushEventSource', userId);

    if (userSubscription==null){
        return { result: "No subscription found for user :: " + userId };
    }

    WL.Logger.debug("submitNotification >> userId :: " + userId + ", text :: " + notificationText);

    WL.Server.notifyAllDevices(userSubscription, {
        badge: 1,
        sound: "sound.mp3",
        activateButtonLabel: "ClickMe",
        alert: notificationText,
        payload: {
            foo : 'bar'
        }
    });

    return { result: "Notification sent to user :: " + userId };
} 
```

**我已经缩小了这个问题的范围。**

我使用码头在我的本地机器（Windows 7 联想笔记本电脑）WL Consumer studio 上进行了 Push 演示，它运行良好。我收到了通知。

我发现我犯了一个错误，即我正在使用带有分发配置文件的开发 APNS 证书....这意味着 WL 服务器将向错误的 Apple 服务器发送请求。

我在我的笔记本电脑上尝试了上面的东西来测试 Push 演示，另外我还在我的个人笔记本电脑上停止了我的防火墙和 Norton 防病毒软件，这样 Push 工作得很好。

现在，今天在客户端，我重新生成了另一个 APNS 证书，即生产 APNS，并使用分发配置文件来实现这一目标。这次我收到了不同的异常。

```
[4/11/13 12:36:32:566 AST] 00000046 JavaScriptInt I com.worklight.integration.js.JavaScriptIntegrationLibraryImplementation log Push Called -----> userId:aahad notificationText:This is my First Push Message
[4/11/13 12:36:32:566 AST] 00000046 JavaScriptInt I com.worklight.integration.js.JavaScriptIntegrationLibraryImplementation log submitNotification >> userId :: aahad, text :: This is my First Push Message
[4/11/13 12:36:32:676 AST] 0000003b webcontainer  E com.ibm.ws.webcontainer.internal.WebContainer handleRequest SRVE0255E: A WebGroup/Virtual Host to handle /favicon.ico has not been defined.
[4/11/13 12:36:58:066 AST] 00000045 ApnsConnectio E com.notnoop.apns.internal.ApnsConnectionImpl socket Couldn't connect to APNS server
                                 java.net.ConnectException: Connection timed out: connect
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:381)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:243)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:230)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:377)
    at java.net.Socket.connect(Socket.java:539)
    at com.ibm.jsse2.SSLSocketImpl.connect(SSLSocketImpl.java:284)
    at com.ibm.jsse2.SSLSocketImpl.<init>(SSLSocketImpl.java:712)
    at com.ibm.jsse2.SSLSocketFactoryImpl.createSocket(SSLSocketFactoryImpl.java:15)
    at com.notnoop.apns.internal.ApnsConnectionImpl.socket(ApnsConnectionImpl.java:133)
    at com.notnoop.apns.internal.ApnsConnectionImpl.sendMessage(ApnsConnectionImpl.java:160)
    at com.notnoop.apns.internal.ApnsServiceImpl.push(ApnsServiceImpl.java:46)
    at com.notnoop.apns.internal.AbstractApnsService.push(AbstractApnsService.java:52)
    at com.notnoop.apns.internal.ApnsServiceImpl.push(ApnsServiceImpl.java:36)
    at com.worklight.integration.notification.apns.ApplicationConnection.sendNotification(ApplicationConnection.java:84)
    at com.worklight.integration.notification.apns.APNSMediator.sendNotification(APNSMediator.java:85)
    at com.worklight.integration.notification.Mediator$4.run(Mediator.java:174)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:452)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:314)
    at java.util.concurrent.FutureTask.run(FutureTask.java:149)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:897)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:919)
    at java.lang.Thread.run(Thread.java:772)

[4/11/13 12:36:58:066 AST] 00000045 ApnsConnectio W com.notnoop.apns.internal.ApnsConnectionImpl sendMessage Failed to send message com.notnoop.apns.EnhancedApnsNotification@4fc0c1a1... trying again
                                 com.notnoop.exceptions.NetworkIOException: java.net.ConnectException: Connection timed out: connect
    at com.notnoop.apns.internal.ApnsConnectionImpl.socket(ApnsConnectionImpl.java:146)
    at com.notnoop.apns.internal.ApnsConnectionImpl.sendMessage(ApnsConnectionImpl.java:160)
    at com.notnoop.apns.internal.ApnsServiceImpl.push(ApnsServiceImpl.java:46)
    at com.notnoop.apns.internal.AbstractApnsService.push(AbstractApnsService.java:52)
    at com.notnoop.apns.internal.ApnsServiceImpl.push(ApnsServiceImpl.java:36)
    at com.worklight.integration.notification.apns.ApplicationConnection.sendNotification(ApplicationConnection.java:84)
    at com.worklight.integration.notification.apns.APNSMediator.sendNotification(APNSMediator.java:85)
    at com.worklight.integration.notification.Mediator$4.run(Mediator.java:174)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:452)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:314)
    at java.util.concurrent.FutureTask.run(FutureTask.java:149)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:897)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:919)
    at java.lang.Thread.run(Thread.java:772)
Caused by: java.net.ConnectException: Connection timed out: connect
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:381)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:243)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:230)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:377)
    at java.net.Socket.connect(Socket.java:539)
    at com.ibm.jsse2.SSLSocketImpl.connect(SSLSocketImpl.java:284)
    at com.ibm.jsse2.SSLSocketImpl.<init>(SSLSocketImpl.java:712)
    at com.ibm.jsse2.SSLSocketFactoryImpl.createSocket(SSLSocketFactoryImpl.java:15)
    at com.notnoop.apns.internal.ApnsConnectionImpl.socket(ApnsConnectionImpl.java:133)
    ... 13 more 
```

现在有两件事我们必须了解，请帮助。

**(1)**通过查看 Logs 是否仍然意味着客户端某处存在网络阻塞？

**(2)**当钥匙串同时显示开发 APNS 和生产 APNS 证书时，我看到它的一个不同之处。两者都使用相同的私钥。开发 apns 证书显示 App ID“us.com.abc.myApp”作为它的后修复.....而生产 apns 证书没有显示它。........**这样好吗？还是会引起一些问题**？........我尝试重新生成生产 APNS 证书三次，但每次都显示相同的数字而不是 APP ID 作为 Post-fix。

**谢谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T05:15:50.913

问题 #1：请参阅有关 APNS 和网络访问的 Stackoverflow 问题：[发送推送通知时出现 Worklight 错误](https://stackoverflow.com/questions/15429116/worklight-error-when-sending-push-notification)

来自[Apple 技术说明：](http://developer.apple.com/library/ios/#technotes/tn2265/_index.html#//apple_ref/doc/uid/DTS40010376-CH1-TNTAG41)

> 整个 17.0.0.0/8 地址块分配给 Apple，因此您可以在防火墙规则中指定该范围。

问题 #2：熟悉 APNS 的主题，[请参阅这篇博](https://www.ibm.com/developerworks/community/blogs/worklight/entry/understanding-and-setting-up-push-notifications-in-development-evnironment?lang=en)文。

# visual-studio - Crystal Reports for Visual Studio 2012 安装错误

> ID：15930938
> 
> 赞同：0
> 
> 时间：2013-04-10T16:05:37.943
> 
> 标签：visual-studio, asp-classic, visual-studio-2012

我曾尝试为 VS2012 安装 Crystal Reports，但每次都会出现此错误。有人遇到过这种情况么？老实说，整个 CR/VS2012 的事情很痛苦，我一直使用 2010 并且从未遇到任何问题。任何和所有的帮助表示赞赏。谢谢。

错误 1327。无效的驱动器：O:\

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T08:09:29.620

当我想安装 Dreamweaver 5.5 并在[此处找到解决方案时遇到了同样的问题](http://www.techsupportforum.com/forums/f19/error-1327-invalid-drive-e-424437.html)

# ruby-on-rails - Heroku如何在rails 3应用程序上设置resque web？

> ID：15930939
> 
> 赞同：0
> 
> 时间：2013-04-10T16:05:38.013
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, heroku, ruby-on-rails-3.2

我遵循了一些关于如何在 heroku 上设置 resque 的指南，但它们已经过时了。

我的 config.ru：

```
require File.dirname(__FILE__) + '/config/environment'
require 'resque/server'

Resque::Server.class_eval do

  use Rack::Auth::Basic do |email, password|
    user = User.authenticate( email, password )
    user && user.admin?
  end

end

app = Rack::Builder.new {
  use Rails::Rack::Static

  map "/resque" do
    run Resque::Server
  end

  map "/" do
    run ActionController::Dispatcher.new
  end
}.to_app

run app 
```

在 lib/tasks/resque.task 中：

```
require 'resque/tasks'

task "resque:setup" => :environment do
  ENV['QUEUE'] = '*'
end

desc "Alias for resque:work (To run workers on Heroku)"
task "jobs:work" => "resque:work" 
```

我已将此添加到我的 gemfile 中：

```
gem "resque" 
```

然后在 initalizers/resque.rb 中：

```
ENV["REDISTOGO_URL"] ||= "mydatabaseurl"

uri = URI.parse(ENV["REDISTOGO_URL"])
Resque.redis = Redis.new(:host => uri.host, :port => uri.port, :password => uri.password, :thread_safe => true) 
```

我正在使用 redistogo nano heroku 插件。

在 Heroku 上，应用程序因错误而崩溃：

```
/app/config.ru:16:in `block (2 leve
ls) in <main>': uninitialized constant Rails::Rack::Static (NameError) 
```

导轨版本是`3.2.11`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:55:06.743

它无法`Static`在命名空间中找到常量`Rails::Rack`。

尝试`Rack::Static`

# c# - 如何将按钮放在Repeater控件中的图像下方？

> ID：15930943
> 
> 赞同：1
> 
> 时间：2013-04-10T16:05:49.583
> 
> 标签：c#, asp.net, webforms

我正在学习如何使用 ASP.Net Repeater 控件。目前，我的输出如下所示： ![在此处输入图像描述](https://i.stack.imgur.com/6uDSJ.jpg)

我的来源如下所示：

```
<form id="form1" runat="server">
<div>
    <asp:FileUpload runat="server" ID="FileUpload1" />&nbsp
    <asp:Button runat="server" Text="Upload" ID="Button1" OnClick="Button1_Click" />
    <hr />
    <asp:Repeater runat="server" ID="Repeater1">
        <ItemTemplate>

                <asp:Image runat="server" Width="200px" Height="200px" ID="image1" ImageUrl='<%# Eval("Url") %>' />

        </ItemTemplate>
    </asp:Repeater>
    <hr />
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
        SelectCommand="SELECT [Url] FROM [Gallery]"></asp:SqlDataSource>
</div>
</form> 
```

现在，我尝试添加一个按钮，但它并没有完全出现在我想要的位置，并且它会抛出显示： ![在此处输入图像描述](https://i.stack.imgur.com/S4KhS.jpg)

我的 ItemTemplate 代码现在看起来像这样：

```
 <asp:Image runat="server" Width="200px" Height="200px" ID="image1" ImageUrl='<%# Eval("Url") %>' />
            <asp:Button runat="server" ID="btnCopy" Text="Copy" /> 
```

所以，我想知道，我怎样才能让按钮出现在图像下方？我猜这可以通过使用 CSS 来处理，但我不确定如何处理。有人可以提供一些帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:13:56.197

在您的项目模板中尝试此操作：

```
 <div style="float:left;overflow:hidden;display:inline-block;">
                <asp:Image runat="server" Width="200px" Height="200px" ID="image1" ImageUrl='<%# Eval("Url") %>' />
                <br/>
                <asp:Button runat="server" ID="btnCopy" Text="Copy" />
    </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:37:16.637

这应该将按钮放在图像的左下角，并保持图像布局与您的第一个屏幕截图相同。

```
<ItemTemplate>
    <div style="width:200px;height:200px;float:left;position:relative;margin:2px;">
        <asp:Image runat="server" Width="200px" Height="200px" ID="image1" ImageUrl='<%#Eval("Url") %>' />
        <asp:Button runat="server" ID="btnCopy" Text="Copy" style="position:absolute;left:2px;bottom:2px;" />
    </div>
</ItemTemplate> 
```

如果你不能让`<div>`'s 正确对齐，`<li>`'s 将是另一种选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:08:05.963

您可以`<br />`在图像和按钮之间放置

# mysql - 触发更新mysql表中的值

> ID：15930944
> 
> 赞同：0
> 
> 时间：2013-04-10T16:05:53.113
> 
> 标签：mysql, database

我想出正确的语句来更新与插入触发器相同的表中的字段时遇到问题。它适用于 MySql 表。

基本上我需要在字段中检查插入的值是否有基色，所以如果字段是：“钴蓝色”，我希望插入字段的颜色为“蓝色”。

我已经想出了以下语句来获得正确的颜色：

```
SELECT CASE
    WHEN 'value' LIKE '%blue%' THEN 'Blue'
    WHEN 'value' LIKE '%red%' THEN 'Red'
    ELSE 'Other color'
END AS normalized_color
FROM 'products_extra_fields'
WHERE 'products_extra_fields'.'value' = 'color' 
```

现在接下来我需要它在表上的触发器中插入 WHERE 'products_extra_fields'.'value' = 'color'。

我似乎无法弄清楚如何使用 SELECT CASE 语句构建此触发器以包含 UPDATE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:30:29.703

插入后不需要更新表，只需更改要插入到触发器中的值即可。

```
CREATE TRIGGER `before_insert_products_extra_fields` 
BEFORE INSERT ON `products_extra_fields` FOR EACH ROW 
BEGIN
    IF(NEW.name = 'color') THEN
        SET NEW.value = CASE 
            WHEN NEW.value LIKE '%red%' THEN 'red'
            WHEN NEW.value LIKE '%blue%' THEN 'blue'
            ...
            ELSE 'other'
        END;
    END IF;
END 
```

此外，您可能应该`BEFORE UPDATE`在该表上创建一个类似的触发器。

# java - Java初学者 - 计算句子中的单词数

> ID：15930946
> 
> 赞同：4
> 
> 时间：2013-04-10T16:06:01.533
> 
> 标签：java, methods

我想使用方法来计算一个句子中的单词数。我写了这段代码，但我不太确定它为什么不起作用。不管我写什么，我只收到一个字数。如果你能告诉我如何修复我写的东西，而不是给我一个完全不同的想法，那就太好了：

```
import java.util.Scanner;

public class P5_7 
{
    public static int countWords(String str)
    {
        int count = 1;
        for (int i=0;i<=str.length()-1;i++)
        {
            if (str.charAt(i) == ' ' && str.charAt(i+1)!=' ')
            {
                count++;
            }
        }
        return count;
    }
    public static void main(String[] args)
    {
        Scanner in = new Scanner(System.in);
        System.out.print("Enter a sentence: ");
        String sentence = in.next();
        System.out.print("Your sentence has " + countWords(sentence) + " words.");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T16:12:08.260

您需要阅读整行。而不是`in.next();`使用`in.nextLine()`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T16:12:28.220

解决此问题的简单方法：

```
return str.split(" ").length; 
```

或者更小心，这是您考虑多个空格的方式：

```
return str.split("\\s+").length; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-13T05:43:20.597

试试这个简单的代码，使用 split() 和参数作为空格

```
int length=str.split(" ").length; 
```

它将返回您句子中的单词数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-13T08:58:45.830

我就是这样做的：

它也可以正常工作

```
 import java.util.Scanner;

    public class countwords {

        public static void main(String args[]){
            Scanner in=new Scanner(System.in);
            System.out.println("Enter your sentence:[Try to ignore space at end]");
            String s=in.nextLine();
            System.out.println("Size of the string is "+s.length());
            int res=count(s);
            System.out.println("No of words in the given String --->>"+"  "+s+" "+"is"+" :"+res);
        }

        private static int count(String s) {
            // TODO Auto-generated method stub
            int count=0;
            if(s.charAt(0)!=' '){
                count++;
            }
            for(int i=0;i<s.length();i++){
                if((s.charAt(i)==' ')){
                    count++;
                }
            }
            return count;
        }

} 
```

输出：这是我的世界富矿

字符串的大小为 23

给定字符串中的单词数 --->> 这是我的世界 bonazais :5

有一些错误尝试更正并重新发布

我发现一个更简单的方法是：

只需使用这个：

```
 // Read a string
String st=s.nextLine();

// Split string with space
String words[]=st.trim().split(" "); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T16:12:47.583

`i<=str.length()-1`可能应该是，否则您将在（可用值为to ）`i<str.length()-1`处获得 IndexOutOfBoundsException 。`str.charAt(i+1)``str.charAt(0)``str.charAt(str.length()-1)`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T16:22:42.577

实际上，如果你输入这样的句子：

```
"Hello World" 
```

您的代码`String sentence = in.next();`只会得到句子中的第一个单词，即`Hello`. 因此，您需要使用`in.nextLine()`in`in.next()`来获取整个句子，即`Hello World`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-10T16:14:14.723

请在 处检查边界条件`str.charAt(i+1)`。`StringIndexOutOfBoundsException`当字符串以空格终止时，它可能会导致a 。

1.  考虑字符串以 ' ' 开头的情况
2.  字符串可以为空。
3.  “词”的定义可能不同。例如 - '1 2'。是1,2个字吗？

我知道您不想要替代方法，但 string.split(" ").length() 是一种更简单的开始方式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-10T16:11:20.703

如果你没有`int count = 0;`代替`int count = 1;`, 以防空句。如果您遇到 Java 错误，请将它们添加到您的问题中。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-04-21T05:41:21.323

经过测试的方法 - 处理所有输入

```
public static void countwords() {
    String s = "  t    ";
    int count = 0;
    int length = s.length()-1;
    char prev = ' ';

    for(int i=length; i>=0; i--) {
        char c = s.charAt(i);
        if(c != prev && prev == ' ') {
            count++;
        }
        prev = c;
    }
    System.out.println(count);
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-03-13T09:09:41.467

```
This program works fine, 
```

step1：输入字符串

step2：将字符串拆分为单个单词存储在数组中

step3：返回数组的长度

```
public class P5_7 
{
public static int countWords(String str)
{
   String words[]=str.split(" ");
   int count=words.length;
    return count;
}
public static void main(String[] args)
{
    Scanner in = new Scanner(System.in);
    System.out.print("Enter a sentence: ");
    String sentence =in.nextLine();
    System.out.print("Your sentence has " + countWords(sentence) + " words.");
} 
```

}

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-01-09T11:26:24.860

简单的逻辑是仅在之前没有任何空格的情况下计算空格。尝试这个：

```
public class WordCount 
{
    public static void main(String[] args) 
    {
        int word=1;
        Scanner s = new Scanner(System.in);
        System.out.println("Enter a string: ");
        String str=s.nextLine();
        for(int i=1;i<str.length();i++)
            {
                if(str.charAt(i)==' ' && str.charAt(i-1)!=' ')
                word++;
            }
       System.out.println("Total Number of words= "+word);
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-12-28T09:57:16.587

这是另一种仅使用`split`, `trim`,`equals`方法来改进代码和性能的方法。

> 此代码也适用于空间。

```
public int countWords(String string){
    String strArr [] = string.split("\\s");
    int count = 0;
    for (String str: strArr) {
        if(!str.trim().equals("")){
            count++;
        }
    }
    return count;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-08-04T09:30:34.510

导入 java.util.HashMap；

导入 java.util.Map；

导入 java.util.Scanner；

公共类 WordrCount {

```
public static void main(final String[] args) {
    System.out.println("Please Enter Your String: ");
    final Map<String, Integer> hm = new HashMap<String, Integer>();
    final Scanner sc = new Scanner(System.in);
    final String s1 = sc.nextLine();
    final String[] c1 = s1.split(" ");
    for (int i = 0; i < c1.length; i++) {
        if (!hm.containsKey(c1[i])) {
            hm.put(c1[i], (Integer)1);
        }// if
        else {
            hm.put(c1[i], hm.get(c1[i]) +(Integer) 1);

        }// else
    }// for

    System.out.println("The Total No Of Words: " + hm);

}// main 
```

}// 字数

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-11-07T09:16:35.203

我建议使用[BreakIterator](https://docs.oracle.com/javase/7/docs/api/java/text/BreakIterator.html)。这是覆盖非标准语言（如日语）的最佳方式，其中没有空格分隔单词。

[这里](http://tutorials.jenkov.com/java-internationalization/breakiterator.html)是字数统计的例子。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2014-05-27T07:52:53.510

使用此方法计算字符串中的单词数：-

```
 private int calculateWords(String s){

    int count=0;

    if(s.charAt(0)!=' ' || s.charAt(0)!=','){

        count++;

    }

    for(int i=1;i<s.length();i++){
            if((s.trim().charAt(i)==' ' && s.charAt(i+1)!=' ')  || (s.trim().charAt(i)==',' && s.charAt(i+1)!=',')){

                count++;
            }

    }

    return count;
} 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2018-06-26T06:55:01.137

```
package test;
public class CommonWords {
    public static void main(String[] args) {
        String words = "1 2 3 44 55                            966 5                                   88              ";
        int count = 0;
        String[] data = words.split(" ");
        for (String string : data) {
            if (!string.equals("")) {
                count++;
            }
        }
        System.out.println(count);
    }
} 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2015-08-19T19:47:01.453

```
class Words {
public static void main(String[] args) {

    String str="Hello World this is new";
    str=str.trim();
    int n=str.length();
    char a[]=new char[n];
    str.getChars(1,n,a,0);
    for (int i=0;i<str.length() ; i++){
        if(a[i]==' ') count++;
    }
    System.out.println("No. of words = "+(count+1));
} 
```

}

# ruby - 如何在 Ruby 中使用 Nokogiri 解析 HTML

> ID：15930948
> 
> 赞同：2
> 
> 时间：2013-04-10T16:06:04.643
> 
> 标签：ruby, html-parsing, nokogiri

我正在尝试使用 Nokogiri 解析一些 HTML，但遇到了一些问题。我想通过每个“employerReview”课程并在“优点”和“缺点”下捕获内容。

我在做第一部分时遇到了麻烦：让一个项目返回控制台。

```
require 'open-uri'
require 'nokogiri'

doc = Nokogiri::HTML(open('http://www.glassdoor.com/Reviews/Microsoft-Reviews-E1651.htm'))

doc.css('//*[@id="empReview_2320868"]/div[1]/p[1]/tt').each do |link|
puts link.content
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:19:20.227

一个问题是您将 XPath 访问器用于需要 CSS 的方法：

```
doc.css('//*[@id="empReview_2320868"]/div[1]/p[1]/tt') 
```

您可以使用`search`or`xpath`代替 XPaths。

但这并没有找到你想要的节点。一个简单的测试表明它们不存在：

```
doc.css("#empReview_2320868") 
```

应该返回一些东西，但它返回`[]`，这意味着 ID 不存在于任何标签中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:43:35.230

您已传递`xpath`给`css`选择器。

```
require 'open-uri'
require 'nokogiri'

doc = Nokogiri::HTML(open('http://www.glassdoor.com/Reviews/Microsoft-Reviews-E1651.htm'))
ps = doc.xpath('//div[@class="employerReview"]//div[@class="description"]/p[position()<3]')

ps.map{|p| p.text.strip}.each_slice(2) do |pros, cons|
  puts pros
  puts cons
end 
```

指定的 xpath 已包含`Pros -`and`Cons -`部分，如果这不是您想要的，您可以将 xpath 更改为

```
//div[@class="employerReview"]//div[@class="description"]/p[position()<3]/tt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:21:14.360

下面是一种通过使用 CSS 而不是 XPath 来更接近找到您正在寻找的数据的方法：

```
require 'open-uri'
require 'nokogiri'

doc = Nokogiri::HTML(open('http://www.glassdoor.com/Reviews/Microsoft-Reviews-E1651.htm'))

doc.css('div.employerReview > div.description > p > strong').each do |item|
  puts item.content
  item.parent.css('tt').each do |details|
    puts details.content
  end
end 
```

# eclipse - Eclipse PRE_DELETE 资源更改事件

> ID：15930951
> 
> 赞同：0
> 
> 时间：2013-04-10T16:06:10.433
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

可以使用资源更改侦听器通知 Eclipse 插件有关资源的更改。

删除项目时，会通知资源更改侦听器并将 IResourceChangeEvent 传递给它。使用下面的代码，可以获得事件的类型。

```
 @Override
public void resourceChanged(IResourceChangeEvent event) {
    switch (event.getType()) {
    case IResourceChangeEvent.PRE_DELETE:
        // do something
        break;
    }
} 
```

但是当在 Eclipse 中删除项目时，用户可以选择从文件系统中删除项目或仅从工作区中删除项目。

有没有办法在资源更改监听器中区分这两种情况？

编辑：我想要做的是：我有两个项目 A 和 B，其中 B 依赖于 A。当 A 被删除时，我希望 B 也被删除。如果从文件系统中删除 A，我希望 B 也从文件系统中删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:34:06.350

这是不可能的，原因是：Eclipse 插件应该只使用和知道工作区资源。从架构的角度来看，工作空间之外没有任何东西。如果 Eclipse 插件正在处理文件（除了导出/导入任务），那么这通常是错误的。

因此，对于您的插件，如果 IResources 被删除，则是否删除底层文件都无关紧要。

# javascript - 字符串长度未定义

> ID：15930955
> 
> 赞同：1
> 
> 时间：2013-04-10T16:06:17.323
> 
> 标签：javascript, jquery

我需要从表单输入中获取一个值。将其保存到 var。获取用户输入的长度。而不是我收到的字符数`undefined`。两个警报都返回相同的`undefined`. 为什么？

```
var aisbn = $('#aisbn').val();
alert(aisbn.lenght);
alert(aisbn.toString().lenght); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T16:07:03.827

JavaScript 不会自动进行拼写检查。

改变：

```
alert(aisbn.lenght); 
```

至：

```
alert(aisbn.length); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T16:08:00.277

你拼错了`lenght`。是`length`。看看[JSLint](http://www.jslint.com/lint.html)，它是一个代码质量工具。

# signalr - IE 10，singalr 错误，协商请求期间出错：未定义

> ID：15930957
> 
> 赞同：0
> 
> 时间：2013-04-10T16:06:24.117
> 
> 标签：signalr, internet-explorer-10, signalr.client

我有一个启用跨域、启用 javascript 代理的 singalr 自托管服务器，并且我有一个带有 jquery.support.cors = true 的 javascript 无代理客户端。**我的客户端托管在 SSL 中，而我的服务器不是。**我的 javascript 客户端在最新的 chrome 和 mozilla 中运行良好，除了 IE 10。

是的，我确实启用了 ramfar，我的 webconfig 文件中也设置了 access-control-allow-origin 我不确定发生了什么

IE 只是给了我 SignalR：协商请求期间出错：未定义任何帮助将不胜感激。

更新：如果这有帮助，在我的客户端上关闭 Https 时它也可以在 IE 10 中运行，因此 IE 10 上的 SSL 不允许 singalr 通过代理连接。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:07:06.127

If you are using SignalR from an SSL website, the SignalR endpoint must also be SSL if you want IE 10 to work yet this is still best practice in general.

Additionally, to enable cross-domain support in SignalR, all you need to do is:

```
RouteTable.Routes.MapHubs(new HubConfiguration { EnableCrossDomain = true }); 
```

Enabling RAMFAR and changing the webconfig is unnecessary. Setting `jquery.support.cors` to true is [counterproductive](https://stackoverflow.com/questions/15367968/cross-domain-will-not-work-with-a-signalr-persistentconnection).

# xml - 删除 xml 文件中两个标签之间的 EOL 和空格

> ID：15930960
> 
> 赞同：0
> 
> 时间：2013-04-10T16:06:32.230
> 
> 标签：xml, bash, formatting

我有很多（超过 50 个）xml 文件，其中一些行（每个文件超过 30/40 个）格式不正确：

例如，这个：

```
<TAG1>
    <TAG_TO_FORMAT>
           a_random_string

    </TAG_TO_FORMAT>
    <AN_OTHER_TAG_TO_FORMAT>
                       an_other_random_string
    </AN_OTHER_TAG_TO_FORMAT>
    <OTHER_TAG>pifpafpouf</OTHER_TAG>

</TAG1> 
```

应该变成这样：

```
<TAG1>
    <TAG_TO_FORMAT>a_random_string</TAG_TO_FORMAT>
    <AN_OTHER_TAG_TO_FORMAT>an_other_random_string</AN_OTHER_TAG_TO_FORMAT>
    <OTHER_TAG>pifpafpouf</OTHER_TAG>

</TAG1> 
```

之前的新行是否仍然存在并不重要`</TAG1>`，我的关键问题是每个模式：`<TAG>random_string</TAG>`必须在一行上（random_string 不包含 EOL）

我在 bash 中找不到任何允许我执行此操作的工具，那么我如何在 bash 中执行此操作？（或者也许在 python 中，但我更喜欢 bash）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T18:53:40.340

有像 xmllint 和 tidy 这样的命令行工具可以像这样使用：

```
tidy -xml -iq somefile.xml 
```

理论上 xmllint 也可以做到，但 xmllint 在 OS X 上不能像我描述的那样工作（目前没有方便的 Linux 实例在那里测试）：

```
xmllint --noblanks somefile.xml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:17:57.803

I'd recommend Perl for this kind of task.

```
#!/usr/bin/env perl

use strict;
use warnings;

my $text = join "", <>; 
$text =~ s/>\s+([^\s].*?[^\s])\s+<\//>$2<\//;
print "$text"; 
```

Call it like this:

```
my.pl < input.xml > output.xml 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T18:38:36.510

好吧，你可以在 sed 中做到这一点：

```
x='TAG_TO_FORMAT'
sed -e '/<'"$x"'>/{:next;/<\/'"$x"'>/!{N;bnext;};s/\n//g;s/>\s*/>/;s/\S\s*</</;}' 
```

当一行以正确的标签开始时，我们进入一个循环收集行，直到找到结束标签。然后我们删除所有换行符并清理由 > 一侧和 < 在另一侧锚定的空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-09T00:23:37.370

整洁的工作是合理的。另一种选择是调用 normalize-space() 的 xslt 转换

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml"/>
<xsl:template match="@*|node()|/">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()">
            <xsl:sort select="@kname"/>
        </xsl:apply-templates>
    </xsl:copy>
</xsl:template>
<xsl:template match="text()">
    <xsl:value-of select="normalize-space(text())"/>
</xsl:template> 
```

我会把它保存到一个文件中，如果从命令行运行

```
xsltproc normalize-space.xsl file.xml 
```

或在管道中

```
run_some_command | xsltproc normalize-space.xsl - | xmllint --format - 
```

xmllint --noblanks 并没有将我想要的所有空格字符都描述为“可忽略”。这在技术上几乎可以肯定是正确的，但不是我想要的。

# mysql - C#- 如何通过组合框中的选定项目总结 mysql 中的特定行？

> ID：15930961
> 
> 赞同：0
> 
> 时间：2013-04-10T16:06:37.153
> 
> 标签：mysql, database, combobox, selection

我有包含产品和价格列的数据库，我的列包含相同的产品但价格不同。

```
product   | price
productA  | 20
productA  | 40    
productB  | 50
productB  | 10 
```

我有按钮、文本框和组合框，如果我在组合框示例 productA 中选择一个产品并单击按钮添加，我只想添加 ProductA。

```
private void button6_Click(object sender, EventArgs e)
        {
            dgvMain.Rows.Clear();
            List<string>[] detailList = a.mysqlSelect("select * from sales where product like '" + comboTotal.Text + "'");
            for (int i = 0; i < detailList.Length; i++)
            {
                dgvMain.Rows.Add(detailList[i][0], detailList[i][1], detailList[i][2], detailList[i][3]);
            }

            for (int i = 0; i < dgvMain.Rows.Count; i++)
            {
                DataGridViewRowHeaderCell cell = dgvMain.Rows[i].HeaderCell;
                cell.Value = (i + 1).ToString();
                dgvMain.Rows[i].HeaderCell = cell;
            }

            string conn = "server=localhost;user=root;password='';database=cashieringdb;";
            MySqlConnection myconn = new MySqlConnection(conn);
            string sql = "select sum(price group by" + comboTotal.Text + ") from sales";
            MySqlDataAdapter da = new MySqlDataAdapter(sql, myconn);
            DataTable dt = new DataTable();
            da.Fill(dt);
            txtSum.Text = dt.Rows[0][0] + "";
        } 
```

我在这里的某个地方有一个例外：

```
string conn = "server=localhost;user=root;password='';database=cashieringdb;";
            MySqlConnection myconn = new MySqlConnection(conn);
            string sql = "select sum(price group by" + comboTotal.Text + ") from sales";
            MySqlDataAdapter da = new MySqlDataAdapter(sql, myconn);
            DataTable dt = new DataTable();
            da.Fill(dt);
            txtSum.Text = dt.Rows[0][0] + ""; 
```

# matlab - Matlab - .wav 的双倍持续时间

> ID：15930964
> 
> 赞同：1
> 
> 时间：2013-04-10T16:06:45.833
> 
> 标签：matlab, double

`wavread`我正在从使用该函数读取的单个笔记创建单独的笔记。

我正在使用该`resample`功能来创建这些笔记。例如：

```
 f5  = resample(a,440,698); %creates note.
    f5_short  = f5(dur:Hz);    %creates duration of note (ie 1 sec)
    f5_hf  = f5_short(dur:Hz/2); %creates note of half duration 
```

上面的代码似乎运行良好。不幸的是，我在创建“双音符”时遇到了麻烦......我不想只演奏两次同一个音符，我尝试了以下方法：

```
 f5_db  = f5_short(dur*2:Hz); %exceeds size of matrix
    f5_db  = f5_short(dur:Hz*2); %exceeds size of matrix
    f5_db  = resample(f5_short,Hz*2,330); %tried upSampling it and although lengths it, note becomes deeper. 
```

什么是最简单的为什么在不更改音符的情况下将非 / wav 的长度加倍？（伸展但保持正确的音符？）谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:14:06.847

您需要将 的大小加倍`f5_short`，而不是对其进行索引：

```
f5_db = repmat(f5_short, 2, 1); 
```

要不就

```
f5_db = [f5_short; f5_short]; 
```

* * *

如果你在开头和结尾都有停顿`f5_short`，但中间的顺序是不变的，你可以重现中间以获得双音符。像这样的东西：

```
f5_short_len = length(f5_short);
f5_short_mid = floor(f5_short_len/2);
f5_db = [f5_short(1:f5_short_mid,:); ...
         repmat(f5_short(f5_short_mid,:),f5_short_len,1); ...
         f5_short(f5_short_mid+1:f5_short_len,:)]; 
```

如果要删除暂停；

```
f5_short = repmat(f5_short(f5_short_mid),f5_short_len,1);
f5_db = repmat(f5_short, 2, 1); 
```

# jquery - Grails jquery post only working with an alert present?

> ID：15930965
> 
> 赞同：0
> 
> 时间：2013-04-10T16:06:46.010
> 
> 标签：jquery, grails, post, alert

So, I've got a link on a page which calls a little jQuery function, which in turn posts to a controller, the controller just runs some SQL before refreshing the page.

All this works nicely, while debugging it with lots of alerts etc to make sure things are doing what I want. BUT, once I remove all the alerts it stops working?! Any ideas? You can see the commented out alert in the function below, commented out nothing happens, no SQL update, nothing. If I add that alert back in it then works fine?!

Has anyone ever come across this or found a way around it? Is there a way/obvious reason why this is happening? Cheers!

jQuery function

```
function reQueueTest(url, id){
    $.post(url, { id:id },function(data){   
    });
    //alert("work!")
    location.reload(true);
} 
```

Controller

```
def reQueueTest(int id){
    def sql = new Sql(dataSource)

    def rowID = id
    sql.executeUpdate "update test_exec_queue set [State]='READY' where test_exec_queue_id=$rowID"
    sql.close()
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:17:11.763

**Edit:**

Ok, so try to reload in the done method:

```
function reQueueTest(url, id){
    $.post(url, { id:id },function(data){   
        }).done(function() { location.reload(true); })
          .fail(function() { alert("error"); })
} 
```

# xaml - TextBlock 绑定显示类名而不是空字符串

> ID：15930967
> 
> 赞同：10
> 
> 时间：2013-04-10T16:06:57.237
> 
> 标签：xaml, binding, windows-runtime, microsoft-metro, winrt-xaml

我有以下 Windows RT 应用程序。我将字符串列表绑定到 TextBlock 的 ItemsControl。这会将空字符串显示为“System.Collections.Generic.List'1[System.String]”，而不仅仅是一个空字符串。我希望它显示一个空字符串而不是 DataContext 的类型。

后面的代码：

```
public sealed partial class MainPage : Page
{
    public MainPage()
    {
        this.InitializeComponent();
        DataContext = new List<string>() { "", "not empty string" };
    }
} 
```

xml:

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <ItemsControl ItemsSource="{Binding}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Vertical"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding}" FontSize="25"/>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Grid> 
```

输出：

```
System.Collections.Generic.List'1[System.String]
non empty string 
```

我用传统的 wpf 做了同样的例子，它正确显示了空字符串。

**编辑** 这输出相同的东西。

后面的代码：

```
public class Model
{
    private readonly List<string> items = new List<string>() { "", "non empty string" };

    public List<string> Items
    {
        get { return items; }
    } 
}

public sealed partial class MainPage : Page
{
    public MainPage()
    {
        this.InitializeComponent();
        DataContext = new Model();
    }
} 
```

xml:

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <ItemsControl ItemsSource="{Binding Path=Items}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Vertical"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding}" FontSize="25"/>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Grid> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T17:40:35.880

通过将 Converter 添加到`TextBlock` `Binding`.

添加静态资源：

```
<Page.Resources>
    <local:NoNullsConverter x:Key="fixNulls"></local:NoNullsConverter>
</Page.Resources> 
```

然后更改 Binding 以引用 Converter：

```
<TextBlock Text="{Binding Converter={StaticResource fixNulls}}" FontSize="25"/> 
```

添加这个类：

```
public class NoNullsConverter : IValueConverter
{
    // This converts the value object to the string to display.
    public object Convert(object value, Type targetType,
        object parameter, string language)
    {
        return value is string ? value : "";         
    }

    public object ConvertBack(object value, Type targetType, 
        object parameter, string language)
    {
        throw new NotImplementedException();
    }
} 
```

如果您在语句上放置一个断点`return`，您将看到实际传递的第一个值是整个列表。是的，出乎意料。但是，如果您按原样使用此转换器，它会处理这种奇怪的情况并返回一个更合乎逻辑的空字符串。

或者，您可以做一些更*有趣*的事情并创建一个简单的包装类：

```
public class StringContext
{
    public string Value { get; set; }
    public static implicit operator StringContext(string value)
    {
        return new StringContext() { Value = value };
    }

    public override string ToString()
    {
        return Value;
    }
} 
```

使用此类，您可以按预期使用 Binding ：

```
<TextBlock Text="{Binding}" FontSize="25"/> 
```

但是，您需要在 List 的声明中使用不同的类类型：

```
DataContext = new List<StringContext>() { "", "not empty string" }; 
```

使用隐式转换，它“正常工作”，因为它将 转换`String`为`StringContext`. 是的，它会增加创建不必要的类的开销，但它确实有效。:) 我更喜欢 Converter 选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:14:17.343

我真的无法解释为什么，但是当您直接设置`ItemsSource`属性时它会按预期工作：

```
<ItemsControl x:Name="itemsControl">
    ...
</ItemsControl>

public MainPage()
{
    this.InitializeComponent();
    itemsControl.ItemsSource = new List<string>() { "", "not empty string" };
} 
```

* * *

我也试过这个：

```
<ItemsControl ItemsSource="{Binding Items}">
    ...
</ItemsControl>

public MainPage()
{
    this.InitializeComponent();
    Items = new List<string>() { "", "not empty string" };
    DataContext = this;
}

public IEnumerable Items { get; set; } 
```

但它会导致显示

> **TextBlockBindingTest.MainPage**
> 
> **非空字符串**

显然，当项绑定的计算结果为*null 或 empty*时，它会退回到继承的 DataContext。我猜这是WinRT中的一个错误。

* * *

或者，您也可以设置`Name`MainPage 类的属性并编写如下绑定：

```
<Page ... x:Name="mainPage">
...
<ItemsControl ItemsSource="{Binding Items, ElementName=mainPage}">
    ...
</ItemsControl> 
```

并且不设置DataContext：

```
public MainPage()
{
    this.InitializeComponent();
    Items = new List<string>() { "", "not empty string" };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-16T22:11:38.403

实际上，我偶然发现了一个更简单的解决方案。毫无疑问，这是一个错误。WPF 中的相同代码给出了预期的结果。错误的来源是 TargetNullValue 属性，它不能正确解释空字符串。要解决该错误，您可以使用上面建议的 IValueConverter（根据我的经验，Converter 解决方案存在性能问题）或使用：

```
 <TextBlock Text="{Binding TargetNullValue=' '}" FontSize="25"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T17:35:39.310

或尝试在后面设置绑定代码：

```
//list is ItemsControl
var bin = new Binding();
var mylist = new List<string>(){"","not empty string"};
bin.Source = mylist;
list.SetBinding(ItemsControl.ItemsSourceProperty,bin); 
```

这对我有用。

# ios - 自 iPhone 3GS 以来 iOS 6.1.3 中无法访问的主机

> ID：15930972
> 
> 赞同：1
> 
> 时间：2013-04-10T16:07:08.967
> 
> 标签：ios, iphone-3gs

有人知道为什么自 iPhone 3GS 以来 Web 服务无法访问，但 iPad 和 XCode Simulator 工作正常。

可能是 IIS 的特定配置，Web 服务在哪里（WCF Web 服务）

任何人都可以帮助我吗？

# php - PHP 未在 facebook 中解析

> ID：15930982
> 
> 赞同：0
> 
> 时间：2013-04-10T16:07:23.343
> 
> 标签：php, facebook, parsing

Aloha 伙计们，我有一个 Fangate，它的用户，取决于它是否是粉丝，fan.php 或输出 nofan.php。fangate 工作正常，nofan.php 也正常工作。在 fan.php 中有一个基于 PHP 的联系表格。当我直接调用此文件时，它可以工作。当我通过我的 Facebook 应用程序运行该文件时，不会解析 PHP 代码。

在 PHP 短标签上它不是，我试过了。我想我可能只使用了错误版本的 PHP。但是，当我写入`addHandler php5-cgi. php`我的。Htaccess 似乎仅此而已。

这是我的方门（工作没有问题）：

```
<?php

require 'facebook.php';
$app_id = "blablabla";
$app_secret = "blablabla";
$facebook = new Facebook(array(
'appId' => $app_id,
'secret' => $app_secret,
'cookie' => true
));

$signed_request = $facebook->getSignedRequest();

$page_id = $signed_request["page"]["id"];
$page_admin = $signed_request["page"]["admin"];
$like_status = $signed_request["page"]["liked"];
$country = $signed_request["user"]["country"];
$locale = $signed_request["user"]["locale"];

// If a fan is on your page
if ($like_status) {
$a = file_get_contents("fan.php");
echo ($a);
} else {
// If a non-fan is on your page
$a = file_get_contents("nofan.php");
echo ($a);
}

?> 
```

这是我的fan.php：

```
<?php

// Receiver E-Mail Adress
$receiver = "test@test.de";

if ((isset($_POST["action"])) && ($_POST["action"] == "sendform"))
{
    include($this_module_path."phpmailer/class.phpmailer.php");
    $mail = new PHPMailer();
    $mail->From = $_POST["email"];
    $mail->FromName = $_POST["vorname"."name"];
    $mail->AddAddress($receiver);
    $mail->Subject = "SCHWERIN live - Formular Facebook";

    $mail_msg = $mod_lang["de"][12]." \n";
                $mail_msg = $_POST["message"]." \n";
                $mail_msg .= " \n";
                $mail_msg .= "Antwort       : ". $_POST["antwort"]." \n";
                $mail_msg .= "Name          : ". $_POST["vorname"]." ".$_POST["name"]." \n";
                $mail_msg .= "Telefonnummer : ". $_POST["telefon"]." \n";
                $mail_msg .= "Mail-Adresse  : ". $_POST["email"]." \n";
                $mail_msg .= " \n";
                $mail_msg .= " \n";
                $mail_msg .= "Gewinnspiel";
    $mail->Body = $mail_msg;
    if($mail->Send())
    {
        echo "<p>Hallo ". $_POST["vorname"]."!</p>";
    }
    else
    {
        echo "<p><b>FEHLER: mail server problem.</b></p>";
    }
}
else
{
?>
<script language="Javascript">

function regexmail(mail)
{
    var regexist = false;
    var res = false;
    if(typeof(RegExp) == 'function')
    {
        var testregex = new RegExp('abc');
        if(testregex.test('abc') == true)
        {
            regexist = true;
        }
    }

    if(regexist == true)
    {
        reg = new RegExp('^([a-zA-Z0-9\\-\\.\\_]+)(\\@)([a-zA-Z0-9\\-\\.]+)(\\.)([a-zA-Z]{2,4})$');
        res = (reg.test(mail));
    }
    else
    {
        res = (mail.search('@') >= 1 && mail.lastIndexOf('.') > mail.search('@') && mail.lastIndexOf('.') >= mail.length-5)
    }
    return(res);
}

function sendForm()
{
    if ((document.contactform.email.value != "") && (document.contactform.vorname.value != "") && (document.contactform.name.value != "") && (document.contactform.telefon.value !="") && (regexmail(document.contactform.email.value)))
    {
        document.contactform.submit();
    }
    else
    {
        document.getElementById("checkEmail").innerHTML = "";
        document.getElementById("checkVorname").innerHTML = "";
        document.getElementById("checkName").innerHTML = "";
        document.getElementById("checkTelefon").innerHTML = "";
        if (document.contactform.email.value == "")
        {
            document.getElementById("checkEmail").innerHTML = "<li class='clearfix'><fehler for='fehler1'>Fehler</fehler><fehlerscript for='fehler1'>Ung&uuml;ltige E-Mail Adresse!</fehlerscript></li>";
        }
        else
        {
            if (!regexmail(document.contactform.email.value))
            {
                document.getElementById("checkEmail").innerHTML = "<li class='clearfix'><fehler for='fehler2'>Fehler</fehler><fehlerscript for='fehler2'>Die Mail-Adresse fehlt!</fehlerscript></li>";
            }
        }
        if (document.contactform.vorname.value == "")
        {
            document.getElementById("checkVorname").innerHTML = "<li class='clearfix'><fehler for='fehler3'>Fehler</fehler><fehlerscript for='fehler3'>Der Vorname fehlt</fehlerscript></li>";
        }
        if (document.contactform.name.value == "")
        {
            document.getElementById("checkName").innerHTML = "<li class='clearfix'><fehler for='fehler4'>Fehler</fehler><fehlerscript for='fehler3'>Der Nachname fehlt</fehlerscript></li>";
        }
        if (document.contactform.telefon.value == "")
        {
            document.getElementById("checkTelefon").innerHTML = "<li class='clearfix'><fehler for='fehler8'>Fehler</fehler><fehlerscript for='fehler3'>Die Telefonnummer fehlt</fehlerscript></li>";
        }
    }
}
</script>

<form name="contactform" method="POST" id='contact_form' />
<ul>
  <li class="clearfix"> 
  <input type="hidden" name="action" value="sendform">
<label for="antwort">Antwort*</label>
<input type='text' name='antwort' id='vorname' /></li>
<li class="clearfix">
<label for="vorname">Vorname</label>
<input type='text' name='vorname' id='vorname' /></li>
<li class="clearfix"> 
<label for="nachname">Nachname</label>
<input type='text' name='name' id='name' /></li>
<li class="clearfix"> 
<label for="email">E-Mail</label>
<input type='text' name='email' id='email' /></li>
<li class="clearfix"> 
<label for="telefon">Telefon</label>
<input type='text' name='telefon' id='telefon' /></li>
<li class="clearfix"> 
<label for="datenschutz">Bestätigen!</label>
<input type="button" class="datenschutzbutton" value="Ja!" onClick="return toggleMe('para02')" href="javascript:void(0)">
</li>
<div id="checkVorname"></div>
<div id="checkName"></div>
<div id="checkEmail"></div>
<div id="checkTelefon"></div>
<div style="display:none;" id="para02"><li class="clearfix"><label for="nachricht">&nbsp;</label><input type="button" class="kontaktbutton" value="Meine Daten absenden" onClick="sendForm()"></div>
</li> 
</ul> 
</form>
<?php
}
?> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:12:53.973

file_get_contents() 是错误的函数。这会将文件包含为纯字符串。请改用 include(FILENAME)。

//编辑：

```
if ($like_status) {
include("fan.php");
} else {
// If a non-fan is on your page
include("nofan.php");
} 
```

# javascript - 通过网络访问 Windows 共享文件夹中的文件

> ID：15930983
> 
> 赞同：0
> 
> 时间：2013-04-10T16:07:23.997
> 
> 标签：javascript, jquery

我正在尝试访问共享 Windows 文件夹中的文件（例如：pdf 文件）。
（使用 FILE 协议）

```
file://myShareServer/path/to/myFile.pdf 
```

jquery ajax 返回：

```
 XMLHttpRequest cannot load file://myShareServer/path/to/myFile.pdf. Cross origin requests are only supported for HTTP. 
```

我如何使用 jquery javascript 访问此文件

ps：授予对服务器的所有访问权限。
我在服务器端使用 ASP.NET MVC4

编辑：我正在使用 PDF.JS 库来运行 pdf 文件（问题就在这里）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:48:40.210

您可以像对待计算机上的任何其他文件一样对待它，并将其设为链接，因为链接没有像 XMLHttpRequests 这样的跨源策略。

```
<a href="file://myShareServer/path/to/myFile.pdf">Download the file</a> 
```

# big-o - 计算大O

> ID：15930987
> 
> 赞同：-3
> 
> 时间：2013-04-10T16:07:34.680
> 
> 标签：big-o

所以我想为这段代码计算大 O，但我不确定如何处理它。一些帮助开始将不胜感激。

`

```
 for ( i = 1 ; i * i < n ; i++){
                for ( j = 1 ; j < n ; j++)
                {
                  ...
                }
            }
            for ( i = 1 ; i < n ; i++){
                for ( j = i % 5 ; i + j < 2000; j++)
                {
                  ...
                } 
```

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:11:29.220

好的，所以我们从第一个内部循环开始，看看它是`O(n)`. 然后，`i`从 1 到平方根 n，因此该循环的复杂度为`O(sqrt(n))`。然后我们将它们相乘以找到第一个嵌套循环的复杂度，即`O(n * sqrt(n))`.

第二个外循环的复杂度`n`为 ，内循环运行定义的次数（不依赖于 n），因此总复杂度为`O(n * sqrt(n) + n)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:10:31.963

大 O 是最坏的情况，在这种情况下是 N^2，因为您在第一个 for 循环内有一个嵌套的 for 循环。

第二组 for 循环只是 N 中的大 O，因为内部 for 循环最多会运行 2000 次，而且在事情的范围内非常小，尤其是当 N 很大时。

# c# - 在使用 MVC 4 和 jQuery Mobile 提交表单后，使用 InsertionMode.Replace 替换当前页面

> ID：15930988
> 
> 赞同：0
> 
> 时间：2013-04-10T16:07:35.330
> 
> 标签：c#, asp.net-mvc, jquery-mobile, asp.net-mvc-4

我正在使用 jQuery Mobile 构建网站。其中一个页面是一个局部视图`<div id="page13">`，它有一个要发送到使用 Ajax.BeginForm 设置的服务器的简单表单。服务器上的操作方法更新数据库中的值。

原来的局部视图应该被替换为新版本的`<div id="page13">`.

实际发生的是在旧版本`<div id="page13">`之后插入新版本。

如何用新页面替换页面？

**看法**

```
<div data-role="page" data-theme="a" id="page13">
<div data-role="content">
    <div>
    @using (Ajax.BeginForm("ReinstateAlarms", "Mobile", new { EntityId = ViewBag.EntityId }, new AjaxOptions { UpdateTargetId = "page13", InsertionMode = InsertionMode.Replace, HttpMethod = "Post" }, new { }))
    {
        @Html.AntiForgeryToken()
        <label for="">Reinstate Alarms</label>
        <button type="submit" value="Search" >Submit</button>
    }
    </div>
<div data-theme="a" data-role="footer" data-position="fixed" data-id="footer-div" class="footer-div" >
<div data-role="navbar">
    <ul>
        <li><a href="#page1" data-transition="fade" data-icon="home">Final Home</a></li>
        <li><a href="#page4" data-transition="fade" data-icon="grid">Panel</a></li>
    </ul>
</div> 
```

**实际表格标签**

```
<form action="/m/ReinstateAlarms/9665" data-ajax="true" &#39;slideup&#39;, true, false);" data-ajax-method="Post" data-ajax-mode="replace" data-ajax-update="#page13" id="form1" method="post"> 
```

**控制器**

```
 public ActionResult PanelAlarms(string EntityId)
    {
        return PartialView("~/Views/Mobile/Partial/PanelAlarms.cshtml");
    }

    [HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult ReinstateAlarms(string EntityId)
    {
        //Do some databse stufff
        return PanelAlarms(EntityId);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:09:17.250

这是我完成提交表单并使用更新版本刷新页面的方式。

我使用了常规的`<form>`，而不是 Ajax.BeginForm()。data-ajax 必须设置为 false。

**形式**

```
<form id="meterForm" data-ajax="false">
      @Html.AntiForgeryToken()
      <label for="MeterReadingHours">Update Meter Reading</label><br />
      <input type="number" aria-valuemin="1" aria-required="true" name="MeterReadingHours" />
      <button type="submit" value="Update" >Update</button>
</form> 
```

然后使用jquery绑定一个函数来提交表单。`e.preventDefault();`阻止表单提交。设置一个常规的[$.post() 函数](http://api.jquery.com/jQuery.post/)来提交表单。然后在响应中，使用[$().load()](http://api.jquery.com/load/)`<div data-role="content">`从任何 ActionResult 创建原始版本中获取新版本。load() 允许您指定要插入的远程文档的一部分。这里我们只需要内容div，所以我们`div[data-role="content"]`在URL后面指定。

如果你停在这里，并运行脚本一切都会工作 - 但新的内容 div 将显示为纯文本，没有应用 jquery 样式。要强制更新，请将函数传递给`$('#page15').trigger('create');`.load() 的完整属性。这将导致新插入的元素被 jQuery 初始化。

**脚本**

```
$(document).ready(function () {
$('#meterUpdateForm').bind('submit', function (e) {
    e.preventDefault();
    $.post(
        '@Url.Action("MeterReadingUpdate", "Mobile", new { EntityId = ViewBag.EntityId })',
        $(this).serialize(),
        function (response) {
            $('#page15 div[data-role="content"]').load(
                 '@Url.Action("MeterReading", "Mobile", new { EntityId = ViewBag.EntityId }) div[data-role="content"]', 
                 function () {
                     $('#page15').trigger('create');
                 });
             });
         });
     });
 }); 
```

# java - 构建 Eclipse RCP 应用程序以在 GUI 和无头模式下运行

> ID：15930991
> 
> 赞同：0
> 
> 时间：2013-04-10T16:07:51.370
> 
> 标签：java, eclipse-plugin, eclipse-rcp

我想构建一个 Eclipse RCP 应用程序，以便它可以在 GUI 模式和无头（控制台）模式下运行。基本上，是这样的：

在 GUI 模式下：

```
 eclipse.exe -application appName <more args> 
```

在控制台（无头）模式下：

```
 eclipse.exe  -console -application appName  <more args>    OR
  eclipsec.exe -application appName  <more args> 
```

我想进行构建，以便使用单个步骤/过程生成“eclipse.exe”和“eclipsec.exe”。

顺便说一句，我正在使用（或必须使用）Eclipse 3.6.x。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:11:27.673

只有当`IApplication.start(IApplicationContext)`方法调用`PlatformUI.createAndRunWorkbench(...)`时，您才会拥有一个带有 UI 的 Eclipse 应用程序。

支持这一点的常用方法是通过不同的应用程序 - 请参阅`org.eclipse.core.runtime.applications`扩展点 - 但您也可以拥有一个`IApplication`通过应用程序命令参数控制的单一应用程序（请参阅 参考资料`IApplicationContext.getArguments()`）。

如果您的应用程序基于 Eclipse IDE，那么后面的选项当然是不可能的，您必须使用单独的应用程序 ID。请注意，Eclipse IDE 已经内置了大约 15 个应用程序 - 除了 IDE 本身，这是主要的各种 p2 应用程序。

# java - 从其类子类调用对象上的方法

> ID：15930995
> 
> 赞同：2
> 
> 时间：2013-04-10T16:08:03.847
> 
> 标签：java, superclass

我正在尝试从该类中调用一个方法，该类`Weapon`是`Item`. 从字段中可以看出，我已将该对象声明`currentWeapon`为 Item 的对象，并且在`setCurrentWeapon`方法中我使用`getClass()`方法来检查它`Item`是否真的是子类 Weapon。

有没有一种方法可以成功地从`Weapon`我的 Item 对象（实际上是 Weapon 类）的类中调用方法？

`backpack`是一个包含`Item`对象的哈希图。如果我在字段中设置`currentWeapon`为 a ，则该对象不会添加到.`Weapon``Weapon``backpack`

编译失败的方法：（找不到符号 - 方法 getMinDamage()）

```
public int attack(Imperial currentEnemy) {
    int damage = Utils.random(currentWeapon.getMinDamage(), currentWeapon.getMaxDamage()+1);
    currentEnemy.changeHealth(-damage);
    return damage;
} 
```

场：

```
private Item currentWeapon; 
```

currentWeapon的设置方法：

```
public boolean setCurrentWeapon(String itemToEquip) {
    if(useItem(itemToEquip) == true) {
        currentWeapon = backpack.get(itemToEquip.toLowerCase());
        if(currentWeapon.getClass() == Weapon.class) {
            System.out.println(getNick() + " has equipped " + currentWeapon.getName() + " as current weapon");
            equipped = true;
            return true;
        }
        else {
            System.out.println(itemToEquip + " is not a weapon");
            currentWeapon = null;
            return false;
        }
    }
    else System.out.println(itemToEquip + " is not owned by " + getNick());
    return false;
} 
```

我希望这个问题不会太令人困惑，请提供有关如何澄清这是否是问题的提示

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T16:14:44.550

你的问题是，当你打电话

```
currentWeapon.getMinDamage() 
```

`currentWeapon`有类型`Item`。它的运行时类型是`Weapon`，但是您会收到关于它是错误类型的编译时错误。如果您希望该字段保持 type `Item`，则需要`Weapon`在调用该方法之前将其强制转换为 a ，以告诉编译器您希望它确实是 type `Weapon`：

```
((Weapon)currentWeapon).getMinDamage() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T16:22:14.707

您可以检查 with 的类型，`Item`然后`instanceof Weapon`将其强制`Item`转换为 a `Weapon`。

对您来说更好的设计`Backpack`可能是使其成为一个包含不同类型库存的不同集合的类。例如，您可以：

```
class Backpack {
    List<Weapon> weapons;
    List<Armor> armory;
    List<Provision> provisions;
    ...
} 
```

然后重载一个`add`方法，以便将项目添加到正确的集合中。

`Item`如果您需要将背包中的所有物品都视为通用的（例如，如果您需要获取背包的总重量），这将使您可以灵活地循环遍历所有集合，但仍保留不同类型的`Item`为方便起见分开。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T16:11:42.600

您可以使用它`instanceof`来检查某物是否是类的实例。在这种情况下，您可以使用：

```
Weapon a; Item b;
if(a instanceof Weapon) returns true
if(b instanceof Weapon) returns false 
```

然后，您可以简单地投射它。

`instanceof`检查第一个参数中的对象是否属于第二个参数的类型，因此可以安全地转换为第二个参数中的类型。因此，如果一个项目是武器，它必须被具体实例化为武器。

因此，`Weapon instanceof Item`也应如此。

代码中出现错误的原因是您正在对 Item 调用 Wea​​pon-only 函数；您首先需要检查是否可以将物品施放为武器，然后再施放。

# php - 是否可以将此 mySQL 语句重写为 redbean ORM 的 WHERE 子句？

> ID：15930996
> 
> 赞同：-1
> 
> 时间：2013-04-10T16:08:05.027
> 
> 标签：php, mysql, redbean

基于[如何合并这些 mysql 语句](https://stackoverflow.com/questions/15928154/how-can-i-merge-these-mysql-statements?noredirect=1#comment22690941_15928154) ，我有以下工作 sql 语句：

```
SELECT *, max(DUP_NUMBER) as dup FROM table1 where  CONTACTS=1 GROUP BY FIELD_A ORDER BY date LIMIT 3 
```

我正在使用 redbean ORM [http://redbeanphp.com/finding_beans](http://redbeanphp.com/finding_beans)，它使用“bean”对象来表示行。我想使用一个名为 findAll 的特定方法，它要求关联的 sql 查询以 WHERE 关键字开头

```
$all = R::findAll('needle',' where $sql '); 
```

这似乎不太可能，但我想我会问，考虑到这个约束无论如何都要将上面的整个查询重写为 WHERE SQL 子句。就像是：

```
" WHERE  max(DUP_NUMBER) as dup  where  CONTACTS=1 GROUP BY FIELD_A ORDER BY date LIMIT 3 " 
```

“SELECT *”和“from table”由 R::findAll 处理。如果这是不可能的，我会用另一种方式来做。

提前致谢，

账单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:18:21.393

如果单击您引用的“查找 Bean”页面上的[SQL 查询](http://redbeanphp.com/queries)链接，您将在底部找到一个使用自定义查询检索 bean 的示例：

```
$sql = 'SELECT author.* FROM author 
        JOIN club WHERE club.id = 7 ';
    $rows = R::getAll($sql);
    $authors = R::convertToBeans('author',$rows); 
```

因此，对于您的情况，它可能类似于：

```
$rows = R::getAll('SELECT *, max(DUP_NUMBER) as dup FROM table1 where  CONTACTS=1 GROUP BY FIELD_A ORDER BY date LIMIT 3');
$all = R::convertToBeans('needle', $rows); 
```

假设`'needle'`是你的 bean 类型。