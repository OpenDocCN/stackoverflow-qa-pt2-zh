# StackOverflow 问答 12779000-12779999

# c# - WPF 在 C# 中更改屏幕分辨率

> ID：12779001
> 
> 赞同：0
> 
> 时间：2012-10-08T09:36:48.180
> 
> 标签：c#, wpf, ribbon

我有一个 WPF 应用程序，当我将屏幕分辨率更改为 800 X 600 或其他更小的分辨率时，我看不到我的所有表单。我只看到表格的正面。我该如何克服这一点？

```
 <local:WorkControl x:Class="Mzaddress.AddressControl"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:local="clr-namespace:Mzaddress"
      Title="Adresse" mc:Ignorable="d" d:DesignWidth="840"    
      xmlns:r="http://schemas.microsoft.com/winfx/2006/xaml/presentation/ribbon" 
      Loaded="WorkControl_Loaded" x:Name="myCntl"
      FontFamily="Arial" FontSize="12" xmlns:my="clr-namespace:Mzaddress.UserControls" 
      VerticalAlignment="Top" VerticalContentAlignment="Stretch" 
      local:HelpProvider.HelpParameter="AddressControl">
      <local:WorkControl.Resources> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:01:02.860

试试这个小示例并将您的表单放入如此简单的 ScrollViewer。

```
<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
              <Grid Height="600" Width="800" Background="Green"/>
</ScrollViewer> 
```

# android - 在 jQuery Mobile 中，如果手机倾斜到横向，如何在编辑时使文本输入全屏显示？

> ID：12779002
> 
> 赞同：2
> 
> 时间：2012-10-08T09:36:47.260
> 
> 标签：android, cordova, jquery-mobile, android-4.0-ice-cream-sandwich, textinput

我在 jQuery Mobile 中有一个文本输入。我还使用 PhoneGap 将其打包为应用程序。然而，问题是，当我将手机倾斜到横向视图时，我的文本编辑不会全屏显示。我如何让它做到这一点？

```
<!DOCTYPE HTML>
<html>
<head>
    <title>My App</title>
    <script src="phonegap.js" type="text/javascript"></script>
    <link rel="stylesheet" href="jqm/jquery.mobile.min.css" />
    <link rel="stylesheet" href="jqm/jquery.mobile.structure.min.css" />
    <link rel="stylesheet" href="jqm/jquery.mobile.theme.min.css" />
    <script src="jquery.min.js" type="text/javascript"></script>
    <script src="jqm/jquery.mobile.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="style.css" />
    <script src="myapp.js" type="text/javascript"></script>
</head>
<body>
    <div data-role="page">

        <div data-role="header" data-id="header" data-position="fixed" data-theme="c">
            <h1 style="text-align:left; margin: 10px;">My App</h1>
            <a href="settings.html" data-icon="gear" class="ui-btn-right" style="margin:1px;">Settings</a>
        </div><!-- /header -->

        <div data-role="content">
            <p>
                <label for="basic">Text Input:</label>
                <input type="text" name="status" id="status" value=""  />
            </p>
        </div><!-- /content -->

        <div data-role="footer" data-id="footer" data-position="fixed" data-theme="c">
            <div data-role="navbar">
                <ul>
                    <li><a href="index.html" data-icon="plus" class="ui-disabled">New Log</a></li>
                    <li><a href="logs.html" data-icon="refresh">Logs</a></li>
                    <li><a href="about.html" data-icon="info">About</a></li>
                </ul>
            </div><!-- /navbar -->
        </div><!-- /footer -->
    </div><!-- /page -->
</body>
</html> 
```

这是我想说的一个很好的例子。这是消息应用程序处于纵向模式时的文本输入。

![在此处输入图像描述](../Images/7fe944fc8ce15abe7358bdd77db1feca.png)

现在当我将手机倾斜到横向时，文本输入框将变成这样的全屏：

![在此处输入图像描述](../Images/5fb955e66b23395deee9d1c8d01e3043.png)

这就是我想要达到的目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:29:09.440

在标题中添加以下内容：

```
<meta name='viewport' content='minimum-scale=1.0, width=device-width, maximum-scale=1.0, user-scalable=no'/> 
```

所以你的标题看起来像这样：

```
<head>
    <title>My App</title>

<meta name='viewport' content='minimum-scale=1.0, width=device-width, maximum-scale=1.0, user-scalable=no'/>

    <script src="phonegap.js" type="text/javascript"></script>

    <link rel="stylesheet" href="jqm/jquery.mobile.theme.min.css" />

    <link rel="stylesheet" href="jqm/jquery.mobile.structure.min.css" />

    <script src="jquery.min.js" type="text/javascript"></script>
    <script src="jqm/jquery.mobile.min.js" type="text/javascript"></script>

    <link rel="stylesheet" href="style.css" />
    <script src="myapp.js" type="text/javascript"></script>
</head> 
```

试试。这应该正常工作。

# javascript - API 包装器的 LMSSetValue 未设置从 LMSGetValue 获得的值，它们不同吗？

> ID：12779003
> 
> 赞同：0
> 
> 时间：2012-10-08T09:36:51.913
> 
> 标签：javascript, scorm, scorm2004

我在 new.js 中有获取和设置代码：

```
APIClass.prototype.LMSGetValue = function (element) {
   var value = GetValueJson(element, '1.2', 'LMSGetValue');  
   return value;
}

APIClass.prototype.LMSSetValue = function (element, value) {
  SetValueJson(element, value, '1.2', 'LMSSetValue');
  return "true";
}

API_1484_11_Class.prototype.GetValue = function (element) {
var value = GetValueJson(element, '2004 3rd Edition', 'GetValue');
  return value;
}

API_1484_11_Class.prototype.SetValue = function (element, value) {
   SetValueJson(element, value, '2004 3rd Edition', 'SetValue');
return "true";
}

function SetValueJson(key1, value1, scormVersion, methodCalled) {
  if (key1 = "cmi.suspend_data") {
    value1 = "none";
  }
    var obj = {
    key: key1,
    value: value1
  }
  setValuesArray.push(obj);

  for (var i = setValuesArray.length - 1; i >= 0; i--) {
  var array = setValuesArray[i];
  if (array.key === key1) {
    alert("returning value for key= " + setValuesArray[i].key + " with value as: " +  setValuesArray[i].value);
    return setValuesArray[i].value;
   }
  }
  //return value1;
} 
```

函数GetValueJson（键，scormVersion，方法调用）{

```
if (scormVersion == '1.2' && methodCalled == 'LMSGetValue')
{
 alert("key that must be set for 1.2: " + key);
}

if (scormVersion == '2004 3rd Edition' && methodCalled == 'GetValue') {
  alert("key that must be set 2004: " + key);
}

if (key = "cmi.completion_status") {
  value = "not completed"; 
}

if (key = "cmi.location") {
  value = "";
}

if (key = "cmi.suspend_data") {
  value = "";
}

 return value;
} 
```

当我想设置一个值（SetValueJson）并且它与我在 GetValueJson 中获得的值不同时，会发生什么情况，我会弹出一个提示，指出无法存储持久数据。我怎样才能解决这个问题？一些模块使用 1.2 和其他 2004

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:43:30.353

关于您提供的示例代码的观察：

`if (key1 = "cmi.suspend_data")``if (key = "cmi.completion_status")`在我看来像是错别字。你想在这里赋值吗？在条件语句中赋值通常被认为是一种不好的做法，我倾向于认为这些是错别字。

[JSHint](http://www.jshint.com/)您的代码还指出`setValuesArray`未定义，并且`value`在您的`GetValueJson`函数中未定义。

另一个考虑因素：SCORM 的`cmi.suspend_data`空间非常有限，意外尝试存储超过允许数量的情况很常见。SCORM 1.2 提供 4096 个字节，而 SCORM 2004 提供 64,000 个字节。如果您在测试中使用 SCORM 1.2，我会检查以确保您的字符串不超过 4096 字节。

**更新：**

重新阅读您的代码后，我发现您的帖子已被标记，`SCORM2004`但您正在指定 SCORM 1.2 元素：

```
SetValueJson(element, value, '1.2', 'LMSSetValue');

function SetValueJson(key1, value1, scormVersion, methodCalled) 
```

您的代码在 和 中指定了 SCORM 1.2 `SetValueJson`，`GetValueJson`并使用 SCORM 1.2 方法`LMSSetValue`和`LMSGetValue`，但它还包含 SCORM 2004 CMI 元素`cmi.location`和`cmi.completion_status`。SCORM 1.2 和 SCORM 2004 语法不能混合使用，因此您需要更正代码以独占使用其中一种或另一种。

# git - 无法连接到缓存守护进程？

> ID：12779007
> 
> 赞同：20
> 
> 时间：2012-10-08T09:37:04.437
> 
> 标签：git

我能够很好地推动，但我突然收到这个“致命”信息

```
$ git push
fatal: unable to connect to cache daemon: Bad file descriptor
Username for 'https://github.com':
Password for 'https://myid@github.com':
fatal: unable to connect to cache daemon: Bad file descriptor
... 
```

为什么我会突然收到这条消息？我该怎么办？

我不确定这可能会有所帮助，但从现在到发生此问题之前

*   我在一些不是主人的分支上工作
*   我在 git config --global 中更改了我的 user.email
*   我的计算机崩溃了，因为我将错误的项目连接器（不是用于计算机的）连接到它，我相信某些文件以某种方式损坏了
*   在那之后，当我尝试进行新的提交时，我收到以下消息：致命：无法将 HEAD 解析为有效参考。
*   然后我通过将配置中的 HEAD 修改为“ref: refs/heads/master”来修复它
*   在本地编码并成功提交更改后，当我尝试将其推送到远程服务器时，我收到以下错误消息

    $ git推送

    致命：无法连接到缓存守护进程：错误的文件描述符“https://github.com”的用户名：“https://myid0@github.com”的密码：致命：无法连接到缓存守护进程：错误的文件描述符致命：松散对象8ce710b1c78658e066cd2309b12b7766d1be4920（存储在.git/objects/8c/e710b1c78658e066cd2309b12b7766d1be4920）已损坏致命：远程端意外挂断致命：远程端意外挂断致命：写入错误：文件描述符错误

*   所以我备份了我所做的所有更改，删除了存储库，从 github 克隆了存储库，并对备份文件进行了一些更改，添加、提交和推送更改...但是该消息仍然没有消失:(

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-03-28T11:36:55.417

[https://stackoverflow.com/a/14160580](https://stackoverflow.com/a/14160580)

solved this for me:

```
sudo chown kev ~/.git-credential-cache/socket 
```

replace kev with your user if you don't know your user:

```
whoami 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-04-11T20:38:12.470

小心操纵`~/.git-credential-cache/socket`（如`chown`），因为它自 2014 年以来已经移动，正如 Git 2.13（2017 年第二季度）所承认的那样，
[Adam K Dean](https://stackoverflow.com/users/1138620/adam-k-dean)[在评论](https://stackoverflow.com/questions/12779007/unable-to-connect-to-cache-daemon/43355775?noredirect=1#comment102224574_43355775)中也提到了 path `~/.cache/git/credential/`，它只需要回馈给用户。

请参阅[Devin Lehmacher ( ) 的](https://github.com/lehmacdj)[提交 612c49e](https://github.com/git/git/commit/612c49e94d5c761bd9fc4752283b82786c23856a)、[提交 60759ba](https://github.com/git/git/commit/60759baac1f063a6c3069ca4b909abb8a20fa08a)（2017 年 3 月 17 日）和[提交 e7f136b](https://github.com/git/git/commit/e7f136bf93132c24183c168a9a054540e6216c06)（2017 年 3 月 13 日[）](https://github.com/lehmacdj)。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 78cf8ef](https://github.com/git/git/commit/78cf8efec34c419ecea86bc8d1fe47ec0b51ba37))^(中，2017 年 3 月 24 日）)[`lehmacdj`](https://github.com/lehmacdj)
^([`gitster`](https://github.com/gitster))

> ## 凭据缓存：`XDG_CACHE_HOME`用于套接字

> `git-credential-cache`默认情况下遵循XDG**[基本路径规范](https://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html)**。这**增加了与其他应用程序的一致性，并有助于使用户的主目录保持混乱**。

> 检查旧的套接字位置，如果该目录存在则`~/.git-credential-cache/`使用 `~/.git-credential-cache/socket`，而不是强制以前使用`git credential-cache`过的用户迁移到新的 XDG 兼容位置。

> 否则使用`$XDG_CACHE_HOME/git/credential/socket`遵循 XDG 基本路径规范的套接字。
> 使用子目录`credential/`以防将来缓存其他文件`$XDG_CACHE_HOME/git/`并明确套接字的用途。

* * *

注意：在 Git 2.29（2020 年第四季度）中，树内代码中的少数地方仍然依赖于能够以“”形式执行^( ^([man](https://git-scm.com/docs/git)) ^)子命令，尤其是内置命令，这些已得到纠正。[`git`](https://github.com/git/git/blob/18aff08e04502c565e9a0538df12d04f2ca8765c/Documentation/git.txt)**`git-foo`**

请参阅[Junio C Hamano () 的](https://github.com/gitster)[提交 c0e190c](https://github.com/git/git/commit/c0e190c168becfd7d6c27cd868542295bd474742)、[提交 7cff3b6](https://github.com/git/git/commit/7cff3b67aca11f757fb36ac58a89ae54bcb5b19e)、[提交 675df19](https://github.com/git/git/commit/675df192c5fad6a2b35ea43d4017b01e275eddef)（2020 年 8 月 26 日[）](https://github.com/gitster)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 18aff08](https://github.com/git/git/commit/18aff08e04502c565e9a0538df12d04f2ca8765c))^(中，2020 年 9 月 3 日）)[`gitster`](https://github.com/gitster)
^([`gitster`](https://github.com/gitster))

> ## [`credential-cache`](https://github.com/git/git/commit/c0e190c168becfd7d6c27cd868542295bd474742)： 利用`child_process.args`

> 由于`child_process`结构具有`strvec args`用于制定命令行的嵌入，因此让我们使用它而不是使用`argv[]`需要正确维护长度的外联。
> 
> 此外，当产生`git`子命令时，从命令列表中省略它，而是使用结构`.git_cmd`中的位`child_process`。

因此，不再调用`git-credential-cache--daemon`，而是调用`git credential-cache--daemon`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-11T09:20:06.677

> 当您尝试使用“sudo”提交时，会出现此错误。
> 所以保存的密码仅适用于“sudo”用户，
> 
> 但是当您尝试以普通用户身份提交时，
> 会发生此错误，普通用户的权限被拒绝，
> 您可以使用上述答案 Kev Price 摆脱此错误

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-13T15:02:15.483

**快速解决方案**

这是解决问题所需的单个命令。

```
sudo chown $(whoami) ~/.cache/git/credential/socket 
```

如果您想更深入地了解导致此问题的原因，请阅读其他答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-05T07:08:44.043

这可能是由于您第一次设置为 root 用户，然后您想以另一个用户身份使用 git。您可以更改 git 缓存权限：

chown -R user:user_group ~/.cache/git/

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-02T10:32:57.927

尝试设置全局 gitconfig。

```
git config --global user.name "your username"
git config --global user.email "your email address" 
```

# networking - AFNetworking 在 iOS 6 下停止工作

> ID：12779010
> 
> 赞同：7
> 
> 时间：2012-10-08T09:37:19.580
> 
> 标签：networking, nsurlconnection, ios6, afnetworking, nsmutableurlrequest

我最近注意到，我的代码使用 AFNetworking（来自 master 分支的最新版本）在 iOS 6 下停止正常工作。这是我的代码：

```
httpClient = [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:baseURL]];
httpClient.operationQueue.maxConcurrentOperationCount = 1; 
```

其中`httpClient`是一个类变量。

接下来，我正在创建一个请求：

```
NSMutableURLRequest *signInRequest = [httpClient requestWithMethod:@"POST" path:@"/user/register" parameters:dataToSend];
signInRequest.timeoutInterval = 15.0;
signInRequest.cachePolicy = NSURLRequestReloadIgnoringLocalAndRemoteCacheData;

AFJSONRequestOperation *signInOperation = [AFJSONRequestOperation JSONRequestOperationWithRequest:signInRequest success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON)
{
    // Blah
}
    failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON)
{
    // Blah
}];

[httpClient enqueueHTTPRequestOperation:signInOperation]; 
```

所有其他请求的构造类似。第一个入队操作运行良好，我可以进入成功处理程序块。`request timeout`但是，无论我选择的超时值有多大，对其他请求的下一次调用都会以失败处理程序和错误完成。

我使用 plain 完成了相同的调用`NSURLConnection`，编写了大量代码:)，成功地处理了请求。

我切换到 iOS 5 设备，上面的代码运行良好。

我切换到 3G 连接（iOS 6），上面的代码有效。

似乎我只在 WiFi 连接上遇到这个问题（除了我与我的 REST 服务器在同一个子网中的情况。）

对此有什么想法吗？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:32:07.640

看来您也在 AFNetworking 的 github 上发布了一个问题，并自己找到了解决方案 :)！

> 似乎 iOS 6 对 TCP 实现或其他东西进行了更改。我将服务器移至第三方托管，它现在正在运行。

对于未来的读者，可以在[此处](https://github.com/AFNetworking/AFNetworking/issues/564)找到该问题。

# eclipse - 使用 Delta Pack 为 mac 构建 RCP 失败

> ID：12779018
> 
> 赞同：0
> 
> 时间：2012-10-08T09:37:58.697
> 
> 标签：eclipse, macos, swt, rcp

我在使用 Delta Pack 构建适用于 Mac 的 RCP 应用程序时遇到问题。我已经正确安装和配置了**Delta Pack 3.7.2**（插入到目标平台中），并且 Building 部分完美地完成了。

当我尝试在我的 Windows（Dev PC）上运行构建应用程序时，它工作正常。但是当我压缩 Mac 版本并尝试在我的 Mac 上运行它时，我尝试的每个版本都会失败：

*   可可32b，
*   可可64b，
*   碳等

该应用程序无法打开，我也没有收到错误消息。

有没有办法得到错误信息？以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:58:53.393

在 Windows 机器上为 mac 构建时，不应直接构建到目录。相反，您应该建立档案。然后把这个存档放在mac上并在那里展开。然后一切都应该工作

# php - MySQL 在查询中运行查询

> ID：12779019
> 
> 赞同：2
> 
> 时间：2012-10-08T09:38:00.773
> 
> 标签：php, mysql

我有一个获取 5 行数据的查询，如下例所示

```
$query = "SELECT ref,user,id FROM table LIMIT 0, 5"; 
$result = mysql_query($query) or die(mysql_error());
while($row = mysql_fetch_array($result))
{
$ref = $row['ref'];
} 
```

我想在每个结果中运行一个查询，如下所示

```
$query = "SELECT ref,user,id FROM table LIMIT 0, 5"; 
$result = mysql_query($query) or die(mysql_error());
while($row = mysql_fetch_array($result))
{
 $ref = $row['ref'];
$query = "SELECT domain,title FROM anothertable WHERE domain = '$ref'";
$result = mysql_query($query) or die(mysql_error());
if (mysql_num_rows($result) )
{
$title = $row['title'];
} else {
$title = "No Title";
}
echo "$ref - $tile";
} 
```

但由于某种原因，当我在其中添加查询时，它只显示第一行。我似乎可以让它运行所有 5 个查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:40:35.933

```
SELECT 
    t1.ref, 
    t1.user,
    t1.id,
    t2.domain,
    t2.title
FROM 
    table AS t1
    LEFT JOIN anothertable AS t2 ON
        t2.domain = t1.ref
LIMIT
    0, 5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T09:41:26.263

问题是在 while 循环中您使用相同的变量`$result`，然后它会被覆盖。`$result`在 while 循环中使用另一个变量名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T09:40:19.053

您在 while 循环中更改 $query 的值。将变量名称更改为不同的名称。

前任：

```
$query = "SELECT ref,user,id FROM table LIMIT 0, 5"; 
$result = mysql_query($query) or die(mysql_error());
while($row = mysql_fetch_array($result))
{
 $ref = $row['ref'];
$qry = "SELECT domain,title FROM anothertable WHERE domain = '$ref'";
$rslt = mysql_query($qry) or die(mysql_error());
if (mysql_num_rows($rslt) )
{
$title = $row['title'];
} else {
$title = "No Title";
}
echo "$ref - $tile";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T09:41:37.280

使用以下内容：

```
$query = "SELECT ref,user,id FROM table LIMIT 0, 5"; 
$result = mysql_query($query) or die(mysql_error());
while($row = mysql_fetch_array($result))
{
    $ref = $row['ref'];
    $query_domain = "SELECT domain,title FROM anothertable WHERE domain = '$ref'";
    $result_domain = mysql_query($query_domain) or die(mysql_error());
    if (mysql_num_rows($result_domain) )
    {
        $row_domain = mysql_fetch_row($result_domain);
        $title = $row_domain['title'];
    } else {
        $title = "No Title";
    }
    echo "$ref - $title";
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T09:46:17.927

这是一个逻辑问题。它是这样发生的，因为循环内外的变量名相同。

**解释：**

```
$query = "SELECT ref,user,id FROM table LIMIT 0, 5"; 
$result = mysql_query($query) or die(mysql_error());
// Now $results hold the result of the first query

while($row = mysql_fetch_array($result))
{
    $ref = $row['ref'];

    //Using same $query does not affect that much
    $query = "SELECT domain,title FROM anothertable WHERE domain = '$ref'";    

    //But here you are overriding the previous result set of first query with a new result set
    $result = mysql_query($query) or die(mysql_error());
    //^ Due to this, next time the loop continues, the $result on whose basis it would loop will already be modified

//.............. 
```

**解决方案1：**

避免对内部结果集使用相同的变量名

```
$query = "SELECT ref,user,id FROM table LIMIT 0, 5"; 
$result = mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_array($result))
{
    $ref = $row['ref'];
    $query = "SELECT domain,title FROM anothertable WHERE domain = '$ref'";    
    $sub_result = mysql_query($query) or die(mysql_error());
    // ^ Change this variable so that it does not overrides previous result set 
```

**解决方案2：** 避免双重查询的情况。使用联接在一个查询调用中获取数据。（**注意：** *您应该始终尝试优化您的查询，以便最大限度地减少服务器上的查询数量。*）

```
SELECT 
    ref,user,id 
FROM 
    table t
INNER JOIN 
    anothertable t2 on t.ref t2.domain
LIMIT 0, 5 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T09:40:44.017

了解[SQL 连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)：

```
SELECT table.ref, table.user, table.id, anothertable.title
FROM   table LEFT JOIN anothertable ON anothertable.domain = table.ref
LIMIT  5 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-08T09:41:21.953

您正在更改`$result`循环中的值。更改您的第二个查询以使用不同的变量。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-08T09:42:13.417

它没有给出正确的结果，因为您使用了两次相同的名称，使用不同的名称，如此编辑。

```
$query = "SELECT ref,user,id FROM table LIMIT 0, 5"; 
$result = mysql_query($query) or die(mysql_error());
while($row = mysql_fetch_array($result))
{
    $ref = $row['ref'];
    $query1 = "SELECT domain,title FROM anothertable WHERE domain = '$ref'";
    $result1 = mysql_query($query1) or die(mysql_error());
    if (mysql_num_rows($result1) )
    {
        $title = $row['title'];
    } else {
        $title = "No Title";
    }
    echo "$ref - $tile";
} 
```

# excel - Excel：触发双击事件

> ID：12779021
> 
> 赞同：4
> 
> 时间：2012-10-08T09:38:07.557
> 
> 标签：excel, password-protection, double-click, vba

我有一个受第三方密码保护的 Excel 工作簿。该工作表中的交互是通过双击来切换字段中的复选标记来完成的。我必须双击 7000 次才能完成这项任务，所以我想自动化它。我怀疑工作表正在使用 BeforeDoubleClick 事件。密码加密隐藏了实际的实现。

我开始在自己的工作表中运行测试，没有密码，以解决这些问题。

我试过 Application.DoubleClick：

```
Range("B17").Select
Application.DoubleClick 
```

但这不会触发我的事件代码（Worksheet_BeforeDoubleClick），它适用于“真正的”双击。

这显然是根据 MS 设计的：http: [//msdn.microsoft.com/en-us/library/office/aa220809 (v=office.11​​).aspx](http://msdn.microsoft.com/en-us/library/office/aa220809(v=office.11).aspx)

> DoubleClick 方法不会导致此事件发生。

我不能直接调用第三方事件代码，因为 sub 是私有的。有没有解决的办法？

我在 Excel 2003 和 2007 中都试过了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:51:55.027

这是您可以尝试的解决方法（我在 Excel 2007 上尝试过）

1.  `BeforeDoubleClick`公开活动（我在 Sheet1 中使用了这个 ）

    > Public Sub Worksheet_BeforeDoubleClick(ByVal Target As Range, Cancel As Boolean)

2.  在您的宏中只需调用此函数

    ```
    Range("B17").Select
    Call Sheet1.Worksheet_BeforeDoubleClick(Selection, False) 
    ```

# node.js - 在节点js的jade模板中使用会话变量

> ID：12779022
> 
> 赞同：3
> 
> 时间：2012-10-08T09:38:13.807
> 
> 标签：node.js, pug, express

除了使用动态帮助函数并通过 res.render 传递它之外，是否有任何替代方法可以在翡翠模板文件中使用会话变量？如果我使用 dynamichelpers 方法，它会显示错误，因为它已被弃用。请帮忙

```
app.use(function(req, res, next){
            res.locals.user = "xxxx";
            next(); 
        }); 
```

我在 app.configure 函数中的 app.js 中使用了这段代码。但我仍然无法在我的视图中使用变量用户。我需要安装任何其他软件包或任何其他代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:07:23.567

这段代码应该可以工作。例如，我在我的一个生产系统中使用几乎相同的代码：

```
app.use(function (req, res, next) {
    app.locals.token = req.session._csrf;
    app.locals.user = req.user;
    ...
    next();
}); 
```

您需要确保此代码*在*您设置 req.locals.user 之后 - 例如，如果您使用 Passport，则在您执行初始化和会话代码之后，但*在*您实际处理和呈现请求之前。

# unix - Unix V6 源代码

> ID：12779026
> 
> 赞同：9
> 
> 时间：2012-10-08T09:38:24.383
> 
> 标签：unix, kernel

我正在寻找 Unix V6 内核源代码。请告诉我从哪里得到它。

我从[http://v6.cuzuco.com/v6.pdf](http://v6.cuzuco.com/v6.pdf)下载了 pdf 副本。这在“Unix Source-J. Lions 的评论”中有所描述。

谢谢你。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-10T09:20:02.670

这是麻省理工学院的一门开放课程（[http://pdos.csail.mit.edu/6.828/2012](http://pdos.csail.mit.edu/6.828/2012)）。

从这个网站你可以得到 xv6 的源代码和许多有用的资料，包括一个详细的文档，如“Unix Source-J. Lions 评论”，以帮助你理解 xv6 的代码。

在我看来，xv6 比 unix v6 更好，因为 xv6 是用 ANSI C 和 AT&T 汇编语言编写的，但 unix v6 是为在 PDP 机器上运行而设计的。

我也在自学操作系统，正在寻找xv6和linux0.11的源代码。

我希望这些话可以帮助你。^_^

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2016-09-02T02:13:52.027

如今，您不需要手动制作引导加载程序，但需要使用 uefi 固件（可免费下载），该固件具有所需的功能，可以按需调用以将其从硬盘驱动器加载到 RAM .... 分区也是受管理的。它是用 c/c++ 编写的。我一直在学习尝试自己制作一个 ..我遇到了它。从现代 UEFI 支持的主板开始，这是一个很好的起点。

# javascript - 从 Javascript 数组中清除对象

> ID：12779028
> 
> 赞同：5
> 
> 时间：2012-10-08T09:38:29.673
> 
> 标签：javascript, arrays, memory, memory-management

> **可能重复：**
> [如何在 JavaScript 中清空数组 在 javascript](https://stackoverflow.com/questions/1232040/how-to-empty-an-array-in-javascript)
> [中释放数组数组的最佳方法](https://stackoverflow.com/questions/2999604/best-way-to-deallocate-an-array-of-array-in-javascript)

我有一个对象数组：

```
var arr = [complexObj1, complexObj2]; 
```

如果我想清除数组并确保没有内存泄漏，下面会做吗？

```
arr.length = 0; 
```

或者我是否需要遍历我的数组并调用类似：

```
complexObj.release(); or
arr[0] = null; or 
delete arr[0]; 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:00:23.700

如果数组由不引用其他方法或 DOM 元素的简单对象组成，那么上述所有解决方案就足够了。

但是，如果数组包含的对象又包含对已附加到 DOM 元素的事件处理程序的引用，则在清除数组时该对象不会被销毁。

```
var Complex = function(nodeId){
   this.node=document.getElementById(nodeId);
   this.handler=function(e){alert('wohooo'};

   this.node.addEventListener('click', this.handler);
}

var myArray = [new Complex('buttonOne'), new Complex('buttonTwo')]; 
```

如果您现在使用`myArray = []`. 数组将被清理，但对象仍包含一个节点和一个实时事件处理程序，该处理程序将在单击按钮时触发，这意味着无法从内存中删除该对象。您只是通过从数组中删除而丢失了对它的引用。

您的第一个想法是正确的，因为您应该以某种方式“销毁”复杂对象并删除它拥有的任何引用。

```
Complex.prototype.release = function() {
    this.node.removeEventListener('click',this.handler);
    delete this.handler;
    delete this.node

} 
```

您现在遍历数组并调用对象上的 release 以从节点中删除事件侦听器。

这是我认为人们通常会错过的一个简单示例。它也不必是事件处理程序，但可以是在复杂对象之外引用的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:42:25.797

只需重新初始化数组：

```
arr = []; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:42:34.870

你需要做的只是

```
arr = null 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T09:45:49.947

就像是

```
var t = myArray;
delete myArray;
//or
myArray = null; 
```

# asp.net - 在 ASP.Net 运行时向 HTML 表添加行

> ID：12779030
> 
> 赞同：0
> 
> 时间：2012-10-08T09:38:35.237
> 
> 标签：asp.net, c#-4.0, html-table

`runat="server"`我在 asp.net 中有一个 HTML 表。

我想在表格中添加行在按钮的单击事件或类似的事情上，我的表格就像：

```
<table id="table1" runat="server"></table> 
```

我试过了`table1.InnerHtml = "<tr></td>Test</td></tr>";`

但它不起作用，我得到了这个例外：

> System.NotSupportedException：“HtmlTable”不支持 InnerHtml 属性。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:44:04.137

您需要明确添加行和单元格：

未经测试：

```
var newRow = new HtmlTableRow();
var newCell = new HtmlTableCell();

newCell.InnerText = "Test";

newRow.Cells.Add(newCell);

table1.Rows.Add(newRow); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T09:44:53.830

您需要在表格中添加一行，并在该行中添加一个单元格：

```
var row = new HtmlTableRow();
var cell = new HtmlTableCell() { InnerText = "Test" };
row.Cells.Add(cell);
table1.Rows.Add(row); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-16T16:02:43.630

我在 vb.net 中执行上面的代码，当我单击按钮时，它会创建一个新行，其中包含我在文本框中输入的文本。但问题是它只创建一行，并在第二次点击时用新输入更改第一行。我需要

```
<table id="Mytable" runat="server">
    <tr><td>Row Data 1.....!</td></tr>  //New row on 1st click
    <tr><td>Row Data 2.....!</td></tr>  //New row on 2nd click
    <tr><td>Row Data 3.....!</td></tr>  //New row on 3rd click
</table> 
```

每次单击按钮时都会出现一个新行。我们怎么能做到这一点？

# android - 如何将片段列表添加到 DialogFragment 中？

> ID：12779032
> 
> 赞同：3
> 
> 时间：2012-10-08T09:38:53.060
> 
> 标签：android, android-dialogfragment

我对 DialogFragment 有疑问

例如，我有一个片段列表，我想将所有这些片段添加到 DialogFragment 中，并在用户单击按钮时发出警报，有人知道吗

我在这个页面上试试这个：http: [//developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

```
public static class DetailsFragment extends Fragment {

    public static DetailsFragment newInstance(int index) {
        DetailsFragment f = new DetailsFragment();

        // Supply index input as an argument.
        Bundle args = new Bundle();
        args.putInt("index", index);
        f.setArguments(args);

        return f;
    }

    public int getShownIndex() {
        return getArguments().getInt("index", 0);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        if (container == null) {
            return null;
        }

        ScrollView scroller = new ScrollView(getActivity());
        TextView text = new TextView(getActivity());
        int padding = (int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,
                4, getActivity().getResources().getDisplayMetrics());
        text.setPadding(padding, padding, padding, padding);
        scroller.addView(text);
        text.setText(Shakespeare.DIALOGUE[getShownIndex()]);
        return scroller;
    }
} 
```

请帮忙 ：）

# html - 准备大型 ogv/mp4/webm/flv 用于流式传输和搜索

> ID：12779034
> 
> 赞同：1
> 
> 时间：2012-10-08T09:39:13.667
> 
> 标签：html, video, flv, webm

我有一个两个小时长的视频，我想通过 HTML5 视频标签流式传输（以及作为后备的老好 Flash）所以我有四个文件：mp4、ogv、webm 和 flv（每个 500-800Mb）

我的服务器返回正确的 Content-Type 和 Accept-Range 标头

我知道 .mp4 文件的 qt-faststart 和 .flv 文件的 yamdi/flvtool2 我是否需要任何用于 .webm 和 .ogv 的额外工具？或者任何其他服务器设置？

是否可以要求浏览器不要下载整个文件，但仅提前 5 分钟缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:04:30.933

根据浏览器的不同，行为可能会有所不同，唯一真正的控制是通过 preload 属性。根据 preload 属性中的指导，浏览器将尝试在给定网络条件等的情况下执行它认为正确的操作。您可以指定以下三个选项之一：无；元数据；汽车

*   none：假定用户不会播放视频，因此不预加载任何内容
*   元数据：仅预加载元数据（视频尺寸、字幕等）
*   自动：针对用户体验进行优化，因此可能只下载接下来的 5 分钟，但如果带宽可用，可以尝试下载整个文件

注意：如果您还指定了自动播放，这假定需要收集元数据并且至少足以建立一个播放缓冲区，因此它成为“预加载：自动”条件。

[http://www.w3.org/TR/html5/embedded-content-0.html#attr-media-preload](http://www.w3.org/TR/html5/embedded-content-0.html#attr-media-preload)

# typescript - TypeScript：全局模块/命名空间中的访问类

> ID：12779035
> 
> 赞同：4
> 
> 时间：2012-10-08T09:39:14.230
> 
> 标签：typescript

我有以下情况：

```
module MyModule {
    export class Image {
        ...
    }

    var image = Image(); // returns an instance of MyModule.Image
} 
```

但是，我想创建一个 HTMLImageElement 实例，而不是 MyModule.Image。如何指定要实例化驻留在全局模块/命名空间中的类？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:50:16.787

有很多方法，但我建议`document.createElement`以任何方式使用。例如：

```
var image = <HTMLImageElement>document.createElement('img'); 
```

您可以创建方便的函数或为您包装它的类。

例如，其他方法之一是在类定义之前创建对原始 Image 类的引用：

```
var ImageElement = Image;

...

export class Image {
    ...
}

var image = new ImageElement() 
```

但是它不会被识别为`HTMLImageElement`实例，即没有适当的代码完成。

**编辑**：这是我在评论中提到的增强界面的*非工作*尝试：`Window`

```
interface Window {
    Image: new(width?: number, height?: number) => HTMLImageElement;
} 
```

它编译正确（即没有错误），但在 Visual Studio 中它被标记为错误，saying `Duplicate Identifier 'Image'`，并且尝试通过创建实例`new window.Image()`被标记为saying `new expressions only valid on constructors`。有趣的是，它在其他接口上运行良好，并且如前所述，它可以正确编译。

# oracle-adf - 返回地图的数据控制方法的 ADF 绑定

> ID：12779040
> 
> 赞同：0
> 
> 时间：2012-10-08T09:39:21.337
> 
> 标签：oracle-adf

我有一个返回类型为 Map 的数据控制方法

我想将此返回类型绑定到 SelectOneChoice UI 组件，以便选择项的显示文本应该是 Map.value 并且选择项值应该是 Map.key 。

是否有可能实现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:56:38.590

谷歌是你的朋友： [https ://forums.oracle.com/forums/thread.jspa?threadID=2427671](https://forums.oracle.com/forums/thread.jspa?threadID=2427671)

或者您可以为您的地图制作一个属性，为其制作一个吸气剂。然后您将能够在页面上拖动您的属性 > 选择一个 > 选择一个选项

# android - Android Fragments 内容视图尚未创建

> ID：12779041
> 
> 赞同：6
> 
> 时间：2012-10-08T09:39:27.200
> 
> 标签：android, android-fragments

一切都运行良好。但是在通过我的应用程序进行了一些测试之后。它崩溃了，在我的 Logcat 中我看到了这个“尚未创建的内容视图”经过一番谷歌搜索后，我发现我应该将我的 listadapter 放入 onActivityCreated。我的代码有点不同，我使用的是lazyadapter，所以我想我需要一些建议。请帮我。

```
public class AndroidFragment extends SherlockListFragment  implements        ActionBar.TabListener{

            static final String URL = "https://xml.xml";
            static final String KEY_SONG = "song";
            static final String KEY_ID = "id";
            static final String KEY_TITLE = "title";
            static final String KEY_CAT_ARTIST = "artistcat";
            static final String KEY_DURATION = "duration";
            static final String KEY_THUMB_URL = "thumb_url";
            static final String KEY_BIG_URL = "big_url";
            static final String KEY_CAT_URL = "cat_url";
            static final String KEY_DESC = "cat_desc";
            ArrayList<HashMap<String, String>> menuItems;
            ListAdapter adapter;
            Context appContext;

            @Override
            public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
                appContext = inflater.getContext().getApplicationContext();

                new loadListView().execute();   

            return super.onCreateView(inflater, container, savedInstanceState);
            }

            public class loadListView extends AsyncTask<Integer, String, String> {

            @Override
            protected void onPreExecute() {
                    super.onPreExecute();
            }

            @Override
            protected String doInBackground(Integer... args) {
                // updating UI from Background Thread
            menuItems = new ArrayList<HashMap<String, String>>();

            XMLParser parser = new XMLParser();
            String xml = parser.getXmlFromUrl(URL); // getting XML
            Document doc = parser.getDomElement(xml); // getting DOM element

            NodeList nl = doc.getElementsByTagName(KEY_SONG);
            // looping through all item nodes <item>
            for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(KEY_ID, parser.getValue(e, KEY_ID));
            map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
            map.put(KEY_CAT_ARTIST, parser.getValue(e, KEY_CAT_ARTIST));
            map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
            map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));
            map.put(KEY_BIG_URL, parser.getValue(e, KEY_BIG_URL));
            map.put(KEY_CAT_URL, parser.getValue(e, KEY_CAT_URL));
            map.put(KEY_DESC, parser.getValue(e, KEY_DESC));
            // adding HashList to ArrayList
            menuItems.add(map);
            }
            return null;
            }   

            @Override
            protected void onPostExecute(String args) {

            if (getActivity() != null) {
            adapter=new MainPageLazyAdapter(getActivity(), menuItems);
            setListAdapter(adapter);

            }

            }
            }

            @Override
            public void onTabSelected(Tab tab, FragmentTransaction ft) {
            ft.add(android.R.id.content, this);
            ft.attach(this);
            }

            @Override
            public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            ft.detach(this);

            }

            @Override
            public void onTabReselected(Tab tab, FragmentTransaction ft) {
            }

        } 
```

我的日志：

```
10-08 17:29:32.946: E/AndroidRuntime(6376): FATAL EXCEPTION: main
10-08 17:29:32.946: E/AndroidRuntime(6376): java.lang.IllegalStateException: Content view not yet created
10-08 17:29:32.946: E/AndroidRuntime(6376):     at android.support.v4.app.ListFragment.ensureList(ListFragment.java:328)
10-08 17:29:32.946: E/AndroidRuntime(6376):     at android.support.v4.app.ListFragment.getListView(ListFragment.java:222)
10-08 17:29:32.946: E/AndroidRuntime(6376):     at in.wptrafficanalyzer.actionbarsherlocknavtab.AndroidFragment$loadListView.onPostExecute(AndroidFragment.java:108)
10-08 17:29:32.946: E/AndroidRuntime(6376):     at in.wptrafficanalyzer.actionbarsherlocknavtab.AndroidFragment$loadListView.onPostExecute(AndroidFragment.java:1)
10-08 17:29:32.946: E/AndroidRuntime(6376):     at android.os.AsyncTask.finish(AsyncTask.java:602)
10-08 17:29:32.946: E/AndroidRuntime(6376):     at android.os.AsyncTask.access$600(AsyncTask.java:156)
10-08 17:29:32.946: E/AndroidRuntime(6376):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
10-08 17:29:32.946: E/AndroidRuntime(6376):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-08 17:29:32.946: E/AndroidRuntime(6376):     at android.os.Looper.loop(Looper.java:137)
10-08 17:29:32.946: E/AndroidRuntime(6376):     at android.app.ActivityThread.main(ActivityThread.java:4512)
10-08 17:29:32.946: E/AndroidRuntime(6376):     at java.lang.reflect.Method.invokeNative(Native Method)
10-08 17:29:32.946: E/AndroidRuntime(6376):     at java.lang.reflect.Method.invoke(Method.java:511)
10-08 17:29:32.946: E/AndroidRuntime(6376):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:982)
10-08 17:29:32.946: E/AndroidRuntime(6376):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:749)
10-08 17:29:32.946: E/AndroidRuntime(6376):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T18:57:39.087

我认为这应该可以解决您的问题。

```
 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
   View view = inflater.inflate(R.layout.layout, null);
   return view  //You must return your view here
}

@Override
public void onResume() {
  //onResume happens after onStart and onActivityCreate
  new loadListView().execute();
  super.onResume() ; 
} 
```

# java - 使用 JaxB 创建 Java 类

> ID：12779046
> 
> 赞同：9
> 
> 时间：2012-10-08T09:39:58.937
> 
> 标签：java, xsd, jaxb

我试图从这个 XSD [http://pda.rosreestr.ru/upload/www/files/02_V04_STD_Region_Cadastr_KV.rar](http://pda.rosreestr.ru/upload/www/files/02_V04_STD_Region_Cadastr_KV.rar)用 Ja​​XB 创建 Java 类，但得到了这些错误。

```
parsing a schema...
[WARNING] Simple type "dAllDocuments" was not mapped to Enum due to EnumMemberSizeCap limit. Facets count: 298, current limit: 256\. You can use customization attribute "typesafeEnumMaxMembers" to extend the limit.
line 3 of file:/D:/liferay-develop/workspace/JABX_test/src/02_V04_STD_Region_Cadastr_KV/dAllDocuments.xsd

compiling a schema...
[ERROR] Two declarations cause a collision in the ObjectFactory class.
line 1645 of file:/D:/liferay-develop/workspace/JABX_test/src/02_V04_STD_Region_Cadastr_KV/STD_Region_Cadastr_KV.xsd

[ERROR] (Related to above error) This is the other declaration.   
line 1587 of file:/D:/liferay-develop/workspace/JABX_test/src/02_V04_STD_Region_Cadastr_KV/STD_Region_Cadastr_KV.xsd

Failed to produce code. 
```

当我使用其他模式时，一切都很好。我不擅长使用 XML，你能告诉我这些错误是什么意思以及如何解决吗？

**更新**

我尝试在类生成中使用 binding.xml，但出现此错误。

```
C:\Documents and Settings\kliver\Мои документы\Загрузки\jaxb-ri-2.2.6\bin>xjc -d
out -b binding.xml D:/liferay-develop/workspace/JABX_test/src/02_V04_STD_Region
_Cadastr_KV/STD_Region_Cadastr_KV.xsd
parsing a schema...
[ERROR] "D:/liferay-develop/workspace/JABX_test/src/02_V04_STD_Region_Cadastr_KV
/STD_Region_Cadastr_KV.xsd" is not a part of this compilation. Is this a mistake
 for "file:/D:/liferay-develop/workspace/JABX_test/src/02_V04_STD_Region_Cadastr
_KV/STD_Region_Cadastr_KV.xsd"?
 line 6 of file:/C:/Documents%20and%20Settings/kliver/%D0%9C%D0%BE%D0%B8%20%D0%
B4%D0%BE%D0%BA%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B/%D0%97%D0%B0%D0%B3%D1%80%D1%8
3%D0%B7%D0%BA%D0%B8/jaxb-ri-2.2.6/bin/binding.xml

[WARNING] Simple type "dAllDocuments" was not mapped to Enum due to EnumMemberSi
zeCap limit. Facets count: 298, current limit: 256\. You can use customization at
tribute "typesafeEnumMaxMembers" to extend the limit.
 line 3 of file:/D:/liferay-develop/workspace/JABX_test/src/02_V04_STD_Region_C
adastr_KV/dAllDocuments.xsd

Failed to parse a schema. 
```

**更新2**

我试试这个绑定：

```
<jxb:bindings 
xmlns:xs="http://www.w3.org/2001/XMLSchema"
xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
version="2.1">

    <!-- Raise theEnumMemberSizeCap limit -->
    <jxb:bindings >
       <jxb:globalBindings typesafeEnumMaxMembers="2000"/>
   </jxb:bindings>

   <jxb:bindings schemaLocation="D:\liferay-develop\workspace\JABX_test\src\02_V04_STD_Region_Cadastr_KV\STD_Region_Cadastr_KV.xsd">
       <jxb:bindings node="//xs:complexType[@name='tRight_Owner']">
           <jxb:class name="tRight_Owner2"/>
       </jxb:bindings>
   </jxb:bindings>

</jxb:bindings> 
```

这个控制台命令：

```
C:\Documents and Settings\kliver\Мои документы\Загрузки\jaxb-ri-2.2.6\bin>xjc -d
out -b binding.xml D:\liferay-develop\workspace\JABX_test\src\02_V04_STD_Region
_Cadastr_KV\STD_Region_Cadastr_KV.xsd 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-08T10:14:04.467

您可以使用外部绑定文件为其中一种复杂类型指定不同的类名。

**绑定.xml**

```
<jxb:bindings 
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
    version="2.1">

   <!-- Raise theEnumMemberSizeCap limit -->
   <jxb:bindings >
       <jxb:globalBindings typesafeEnumMaxMembers="2000"/>
   </jxb:bindings>

    <jxb:bindings schemaLocation="your-schema.xsd">
            <jxb:bindings node="//xs:complexType[@name='tRight_Owner']">
                <jxb:class name="TRight_Owner2"/>
            </jxb:bindings>
    </jxb:bindings>

</jxb:bindings> 
```

xjc 命令行将是：

```
xjc -d out -b binding.xml your-schema.xsd 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-23T12:00:14.793

对于以后遇到这个问题的人来说，这种方法对我有用。

环境：**Netbeans 7.4**

构建方法：**Maven - jaxb2-maven-plugin**

1.  创建一个名为`xjb`in的文件夹`src\main`。
2.  在该文件夹中创建一个名为`binding.xjb`（或任何其他`.xjb`名称）的文件。

在里面：

```
<jxb:bindings 
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
    version="2.1">

   <!-- Raise theEnumMemberSizeCap limit -->
   <jxb:bindings >
       <jxb:globalBindings typesafeEnumMaxMembers="2000"/>
   </jxb:bindings>

</jxb:bindings> 
```

请注意，这不是 Blaise 帖子的替代解决方案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-15T08:54:53.887

我使用的是 0.13.0 版的 maven-jaxb2-plugin，我发现绑定文件的正确路径是：

```
src/main/resources/binding.xjb 
```

内容与OldCurmudgeon提出的相同，即：

```
<jxb:bindings xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:jxb="http://java.sun.com/xml/ns/jaxb" version="2.1">

    <!-- Raise theEnumMemberSizeCap limit -->
    <jxb:bindings>
        <jxb:globalBindings typesafeEnumMaxMembers="2000" />
    </jxb:bindings>

</jxb:bindings> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T09:49:04.680

`tRight_Owner`
您的 XSD 有问题，第 1587 行有多个同名声明：

```
 <xs:complexType>
                        <xs:complexContent>
                            <xs:extension base="tRight_Owner"/>
                        </xs:complexContent>
                    </xs:complexType> 
```

第 1645 行：

```
<xs:complexType name="tRight_Owner"> 
```

# sql-server-2008 - 如何在 sql server 2008 中添加单列的时间（如 9:25:03 + 11:36:27 =）

> ID：12779052
> 
> 赞同：0
> 
> 时间：2012-10-08T09:40:23.667
> 
> 标签：sql-server-2008

我有列（时间数据类型），其中包含类似的值

```
9:25:03 
4:43:21 
2:50:13 
11:25:33 
```

，我应该写什么查询来获取列中所有值的总和

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:50:56.020

试试这个：

```
;with cte as(
select SUM(DATEPART(hh,tm))*3600+
       SUM(DATEPART(MI,tm))*60+
       SUM(DATEPART(SS,tm)) tme
from time_table)
SELECT cast(datepart(hh,cast(CONVERT(varchar(8),
       DATEADD(ss, tme  , 0), 114) as time))+
       datediff(dd,'1900-01-01',CONVERT(varchar, 
       DATEADD(ss, tme  , 0), 121))*24 as varchar(20))+
       right(CONVERT(varchar(8), DATEADD(ss, tme  , 0), 114),6)
from cte 
```

结果

```
28:24:10 
```

# [SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/b7450/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:50:26.520

把你的时间变成秒，然后把它们加起来。

```
with YourTable(TimeCol) as
(
  select '9:25:03' union all
  select '4:43:21' union all
  select '2:50:13' union all
  select '11:25:33'
)

select sum(datediff(second, 0, TimeCol)) sumSeconds
from YourTable 
```

结果：

```
sumSeconds
-----------
102250 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:57:26.903

试试这个：

```
create table tbl123(tm time)

insert into tbl123
values('9:25:03'),('4:43:21'),('2:50:13'),('11:25:33')

;WITH CTE as(select SUM(DATEPART(hh,tm)) as hh,SUM(DATEPART(mi,tm)) as mm,SUM(DATEPART(ss,tm)) as ss from tbl123)

SELECT cast(hh+(mm+(ss/60))/60 as varchar(10))+':'+
       cast((((mm+(ss/60))%60)) as varchar(10))+':'+
       cast(ss%60 as varchar(10)) 
       from CTE 
```

结果：

```
 28:24:10 
```

# python - Python：这种语法如何以及为什么起作用？{1,2,3,4}

> ID：12779053
> 
> 赞同：4
> 
> 时间：2012-10-08T09:40:25.027
> 
> 标签：python, list, syntax, dictionary, set

据我们所知，

```
{} # Represents a dict 
```

和

```
{'one': 1} # Again a dict 
```

如何以及为什么这是一组：

```
{'one', 'two', 'three', 'four'} # I thought it should give syntax error 
```

但它给出了：

```
set(['one', 'two', 'three', 'four']) # Strange ?? [ Should this happen ? ] 
```

您能否提供一些讨论相同内容的官方文档的链接？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T09:41:41.830

[Set literals](http://docs.python.org/dev/whatsnew/2.7.html#other-language-changes)是 3.x 的一项功能，已被向后移植到 2.7。

这是一个有用的特性——注意集合推导也是允许的。

# big-o - 大 O 表示法——更复杂意味着更快或更慢

> ID：12779055
> 
> 赞同：1
> 
> 时间：2012-10-08T09:40:34.680
> 
> 标签：big-o

我正在学习大 O 符号，我有点困惑。我不认为我真的了解“复杂性”对算法的影响，而且我不知道我是否在向后看。

复杂度的顺序是从最小到最复杂：O(1)、O(log n)、O(n)、O(n log n)、O(n^2)？还是我把它弄反了？

如果这是正确的顺序，我猜一个复杂度为 O(n^2) 的程序会比 O(n log n) 的程序更快地处理大量数据。然而，在测试了冒泡排序（O（n^2））和快速排序（O（n log n））之后，很明显O（n ^ 2）排序的处理速度比O（n log n）慢得多。所以我很困惑......复杂性是好是坏？如果算法更复杂，算法会很快（就完成程序需要多长时间而言），还是复杂的程序会更慢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T09:47:10.600

O 表示法表示计算机将对具有算法将处理的对象的*最大元素数进行的数字操作。*例如，如果您使用具有 O(n^2) 的算法对具有 3 个元素的数组进行排序，这意味着计算机将对数组执行*最多*9 次操作。

在这里，您可以查看不同 O 复杂度之间的比较：

![O符号的比较](../Images/5f7a99936d60e27a3e841500fe9293f1.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T09:46:49.470

要回答您的第一个问题，是的，这是正确的复杂顺序。大 O 表示法不会告诉您程序或算法需要多长时间才能运行。它只是相对于具有更好复杂性或更差复杂性的另一种方法来衡量其性能。为了帮助您对其进行概念化，**O(1)**将是一条指令，**O(n)**将是一个单循环，**O(n^2)**将是一个内部带有嵌套循环的循环。

要回答您关于**O(n^2)**比**O(n log n)**快的问题，它***可能***不会。我说可能是因为有许多因素决定了程序的速度，并且可以想象，复杂性更差的程序比复杂性更高的程序执行*得更快。*换句话说，大 O 表示法衡量算法的复杂性，而不是构成该算法的程序。

例如，假设您有两个程序，为简单起见，一个在**O(n)**时间内运行，另一个在**O(n^2)时间内运行。**

运行 10 个对象，具有**O(n)**时间的程序导致 100 毫秒。**以O(n^2)**时间运行程序会导致 10 毫秒。这是为什么？因为与第一个程序相比，执行工作所需的时间为 **O(n^2)的程序少。**

但是让我们看看 100 个对象会发生什么。具有**O(n)**时间的程序会产生 1000 毫秒，而具有**O(n^2)**时间的程序也会产生 1000 毫秒。对于较大的对象，它的增长速度要快得多，这就是为什么一般来说，优化复杂性会更好。

有些算法的复杂度无法降低，例如[旅行商问题](http://en.wikipedia.org/wiki/Traveling_salesman)的变体，它询问是否存在一定长度的路径来通过他必须访问的所有城市。要获得有保证的最佳解决方案，您必须运行所有可能的场景，其中包含**O(n!)**的大 O 表示法，这已经非常糟糕了。幸运的是，有许多替代算法可以确定 98% 以内的解决方案，并且可以更快地执行。**在O(n!)**时间内运行的一组已知问题称为[NP 问题](http://en.wikipedia.org/wiki/NP_%28complexity%29)。

我希望这能回答你的问题。

# ruby-on-rails - 设置系统目录 Rails 生产环境

> ID：12779060
> 
> 赞同：0
> 
> 时间：2012-10-08T09:41:01.987
> 
> 标签：ruby-on-rails, paperclip, capistrano

我有一个在我的开发机器上运行良好的应用程序，但在我的生产服务器上，它使用断开的链接来提供使用 Paperclip Gem 提供的图像。

生产环境是 Linux(Debian)、Apache、Passenger，我正在使用 Capistrano 进行部署。

该应用程序存储在（指向使用 capistrano 部署的应用程序当前版本的公共文件夹的符号链接）：

```
/var/www/apps/root/appname 
```

但是，当我尝试在生产服务器上访问它时，Apache 错误日志将其显示为它正在查找的路径：

```
/var/www/apps/root/system 
```

然而，正确的路径是：

```
/var/www/apps/appname/shared/system 
```

我可用的一个选项是在根目录中创建一个符号链接，将系统引导到正确的路径，但我不想这样做，以防我想在同一个根目录中部署另一个应用程序。

这个请求的 url 是由 rails 生成的，但是 Apache 是获取静态资源（图像文件）的，所以我尝试在我的 config/environments/production.rb 中放置以下内容：

```
ENV["RAILS_RELATIVE_URL_ROOT"] = '/appname/' 
```

这解决了我遇到的所有其他路径问题，但是当 rails 生成 url（通过 Paperclip gem）时，它似乎没有使用它。

我该如何设置它以便 Paperclip 使用正确的路径并且只使用它生产？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-23T04:16:28.393

我有一个解决方法，将其添加为初始化程序之一：

`config/initializer/paperclip.rb`

```
Paperclip::Attachment.class_eval do 

  def url(style_name = default_style, options = {})
    if options == true || options == false # Backwards compatibility.
      res = @url_generator.for(style_name, default_options.merge(:timestamp => options))
    else
      res = @url_generator.for(style_name, default_options.merge(options))
    end
    # replace adding uri before res, minus final /
    Rails.application.config.site_relative_url[0..-2]+res
  end

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:53:33.580

目前 Paperclip 不能与`ENV['RAILS_RELATIVE_URL_ROOT']`and 一起使用。您可以在此处关注问题： [https ://github.com/thoughtbot/paperclip/issues/889](https://github.com/thoughtbot/paperclip/issues/889)

# android - 崩溃后恢复的Android

> ID：12779064
> 
> 赞同：0
> 
> 时间：2012-10-08T09:41:23.967
> 
> 标签：android, android-activity, crash

当我的应用程序崩溃时，总是会启动活动 2-3 活动。为什么是这样？我可以将其更改为始终启动最近的活动（当然是在崩溃之前）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:46:32.597

这可能是因为您`finish()`在调用下一个崩溃的活动的活动中调用了方法。尝试从调用活动中删除该 finish() 方法。

# silverlight - 已通过身份验证访问站点时 crossdomain.xml 401 错误

> ID：12779066
> 
> 赞同：1
> 
> 时间：2012-10-08T09:41:25.983
> 
> 标签：silverlight, single-sign-on, crossdomain.xml, unauthorized

我有一个从一个域到另一个域的 SingleSignOn 解决方案。

它由一个 Silverlight 应用程序完成，该应用程序向我的其他域发送经过身份验证的请求。

我遇到的问题是，当我转到 silverlight 页面时，当我还没有登录到第二个域时，SSO 完成并且我登录到第二个域没有任何问题。

然后，当我不注销，但再次执行 SSO 时，我的**crossdomain.xml**文件出现**401 Not authorized**错误。

 **任何人都遇到过类似的问题并知道发生了什么？

如果需要，将提供额外的信息，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:56:38.723

显然问题是只允许匿名访问该文件。设置`<location> <allow =? and =*`没有帮助。

修复方法是将所有人添加到文件的权限并授予他们读取权限。**

# iphone - 我们可以在 Obj C 元素上保留没有 getter 和 setter 的属性吗？

> ID：12779072
> 
> 赞同：2
> 
> 时间：2012-10-08T09:41:41.523
> 
> 标签：iphone, objective-c, optimization, encapsulation

好的，所以我正在阅读一些关于**良好编程实践**的文章，我遇到了一个声明，它说**为你的类公开你的所有元素并不是一个好主意.. 也就是封装的概念**。

现在在 Objective C 中，当我为我的类创建一个元素时，我执行以下操作，考虑一个 NSMutableArray

```
@property (nonatomic, retain) NSMutableArray* myArray; 
```

**为什么我这样做？**

以便将 Retain 属性赋予 myArray 并因此赋予它更简单的内存管理周期。稍后，我将 viewDidLoad 中的 myArray 初始化为

```
self.myArray = [NSMutableArray arrayWithCapacity:0]; 
```

后来在Dealloc...

```
self.myArray = nil; 
```

**还会发生什么**

通过给出这个属性并在 .m 文件中合成 myArray，我在不知不觉中为我的类的所有元素**制作了 Public Getter 和 Setter**。

此外，来自 Xib 文件的自动生成的 UI 元素确实应用了相同的声明。

继续为类的每个元素创建公共 Getter 和 setter 并不是一个好主意，对吧？

所以，绝对没有应用任何封装！如果我在这里错了，请纠正我并帮助我解决任何问题！

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T09:45:51.063

只需使用[**类扩展**](http://developer.apple.com/library/ios/documentation/cocoa/conceptual/objectivec/Chapters/ocCategories.html#//apple_ref/doc/uid/TP30001163-CH20-SW2)的原则，该原则允许您将部分声明放在`.m`文件中，从而使其在您的标题中不可见，并且对其他类不可见。

*（顺便说一下，这是 Apple 推荐的声明私有方法和属性的方式）*

***`YourClass.h`***

```
@interface MyClass : MySuperclass
// public properties
// public methods
@end 
```

***`YourClass.m`***

```
@interface MyClass()
// This is a class extension
// put here private properties
// and private methods too
@end

@implementation MyClass
// And your implementation of course here
@end 
```

例如，您甚至可以在公共接口（在头文件中）中将属性声明为只读，并在私有接口（在`.m`文件中的类扩展名中）将其重新声明为读写。

**有关详细信息，请参阅[Apple 文档](http://developer.apple.com/library/ios/documentation/cocoa/conceptual/objectivec/Chapters/ocCategories.html#//apple_ref/doc/uid/TP30001163-CH20-SW2)**。

* * *

注意：

*   如果您声明属性，则无需声明实例变量：编译器会自动为您生成它，因此您不必费心并在`.h`. 在最新版本的编译器（现代 Objective-C）中，甚至不需要该`@synthesize`指令，因为如果不存在，它现在会自动生成它（参见 doc）
*   如果您更喜欢声明实例变量，您也可以在类扩展中执行此操作，`.m`就像在`.h`. 这也是一种从公共标头中隐藏实例变量的方法。一般来说，我真的很少使用实例变量（因为只声明属性就足够了），如果我真的需要一个 ivar，我会在类扩展中声明它以使其在公共标头中不可见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T09:48:09.207

您可以在 class.m 文件中声明该属性，因此 getter 和 setter 方法只能在该类中访问。一个例子：

**我的类.h**

```
@interface MyClass : NSObject {
    NSMutableArray *_myArray;
}
@end 
```

**我的班级.m**

```
@interface MyClass ()
    @property(nonatomic, retain) NSMutableArray *myArray;
@end

@implementation MyClass

[... MyClass implementation ..]

@synthesize myArray = _myArray;
@end 
```

所以你只能在“MyClass.h”文件中使用“self.myArray”。

# perl - Perl 中的转义字符

> ID：12779075
> 
> 赞同：0
> 
> 时间：2012-10-08T09:41:51.757
> 
> 标签：perl, escaping

一个愚蠢的问题。

我正在尝试搜索并替换`"$option">$option_translated`为`$option>$option_translated`.

当我在 unix 终端中执行此命令时，它工作正常。

```
sed -i 's/"$option">$option_translated/$option>$option_translated/g' filename.txt 
```

但是当我在我的 Perl 脚本中使用它时它不起作用

```
my $cmd = ("sed -i 's/"$option">$option_translated/$option>$option_translated/g' $filename");
qx{$cmd}; 
```

我认为有些字符需要在这里转义。让我知道哪些是那些。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:12:14.903

您需要转义引号：

```
my $cmd = ("sed -i 's/\"$option\">$option_translated/$option>$option_translated/g' $filename");
                here__^      __^ 
```

或使用不同的引用运算符代替`"`，例如：

```
my $cmd = qq(sed -i 's/"$option">$option_translated/$option>$option_translated/g' $filename); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:28:36.660

您不需要为此`sed`从 Perl 调用，使用 Perl 的正则表达式功能，只需使用`\Q` `\E`或只是将其转义，例如使用（据我了解，您正在尝试删除`"`）：

```
my $str = '"$option">$option_translated';

$str =~ s/"//g;
print $str; 
```

# silverlight-4.0 - Silverlight 4.0 中的实时聊天

> ID：12779080
> 
> 赞同：0
> 
> 时间：2012-10-08T09:42:05.313
> 
> 标签：silverlight-4.0, silverlight-5.0

我正在尝试在 silverlight 4.0 中创建实时聊天和视频会议和视频消息。我尝试了很多代码，但它们对我不起作用。我是这种代码的新手。我怎样才能实现这一切？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:12:12.970

您可以为此使用 WCF (Windows Communication Foundation)。它允许您在服务器和（Silverlight）客户端之间建立“双工”通信。Google for wcf chat duplex silverlight - 有很多例子。

另一种方法是使用套接字——它更快，但你必须自己构建它。WCF 有许多内置标准，因此可以为您节省大量工作。

# c# - WPF中UI组件的动态生成

> ID：12779086
> 
> 赞同：0
> 
> 时间：2012-10-08T09:42:23.610
> 
> 标签：c#, wpf, data-binding, dynamic

好吧，这是一个棘手的情况。我的 WPF 项目中有 2 个 xaml 文件，VoltageChannelView.xaml 和 VoltageView.Xaml，在我的 VoltageView.xaml 中，我将网格分为 3 行，如下所示：

**电压视图**：

```
<Grid Style="{DynamicResource styleBackground}" >
    <Grid.RowDefinitions>
        <RowDefinition Height="70" />
        <RowDefinition />
        <RowDefinition Height="50" />
    </Grid.RowDefinitions>

    <Grid Grid.Row="0" >            
    </Grid>

    <Grid Name="ContentGrid" Grid.Row="1" Height="Auto" Width="Auto">
        <Grid.RowDefinitions>
            <RowDefinition Name="Label11" />
            <RowDefinition Name="Label22" />
            <RowDefinition Name="Label33" />
            <RowDefinition Name="Label44" />
            <RowDefinition Name="Label55" />
            <RowDefinition Name="Label66" />
            <RowDefinition Name="Label77" />
            <RowDefinition Name="Label88" />
            <RowDefinition Name="Label99" />
        </Grid.RowDefinitions>
    </Grid>        

    <Grid Grid.Row="2" >
        <Button Content="Bavaria 2" FontSize="13" Height="25" HorizontalAlignment="Left" Margin="30,0,0,0" Name="RefreshBtn" VerticalAlignment="Center" Width="105" />
        <Button Content="Redhook" FontSize="13" Height="25" HorizontalAlignment="Center" Margin="0,0,0,0" Name="Refresh1Btn" VerticalAlignment="Center" Width="105" />
        <Button Content="Bavaria 1" FontSize="13" Height="25" HorizontalAlignment="Right" Margin="0,0,30,0" Name="Refresh2Btn" VerticalAlignment="Center" Width="105" />
    </Grid>
</Grid> 
```

现在您可以注意到**Grid.Row="1"**我将网格划分为 9 行。

**电压通道视图**：

```
<CheckBox Content="On" Grid.Column="3" Height="Auto" HorizontalAlignment="Center" Margin="0" Name="On" VerticalAlignment="Center" />
<Button Content="Set" Grid.Column="1" Height="23" HorizontalAlignment="Center" Margin="85,0,0,0" Name="Set" VerticalAlignment="Center" Width="75" />
<TextBox Grid.Column="1" Height="23" HorizontalAlignment="Center" Margin="0,0,80,0" Name="textBox1" VerticalAlignment="Center" Width="70" />
<Label Content="VDD__Main" Grid.Column="0" Height="15" HorizontalAlignment="Center" Margin="0,0,70,0" Name="VoltageLabel" VerticalAlignment="Center" />
<Label Content="0.0 V" Grid.Column="2" Height="15" HorizontalAlignment="Center" Margin="0" Name="CurrentLabel" VerticalAlignment="Center" /> 
```

现在我的 Grid.Row="2" 中有 3 个按钮，我的要求是，当我单击“Bavaria 2”按钮时，我希望将 VoltageChannelView 的内容**放在**我的**VoltageView** Grid.Row="1" 中。这是诀窍，它应该动态生成整个内容 5 次。即在 Grid.Row="1" 的 9 行中，VoltageChannelView 的内容应该出现在前 5 行中，每行一个。

在单击“Bavaria1”时，它应该生成内容 8 次，依此类推。基本上WPF中是否可以根据每个按钮单击生成VoltageChannelView“n”次的内容并将其显示在我的VoltageView中？？？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:13:13.457

是的。您可以创建一个`VoltageChanelView`集合，然后为它创建一个数据模板。我认为这样你更容易展示它。

首先，我真的不明白你想用所有这些网格行等来完成什么。但也许使用列表视图而不是划分为 9 行的网格会使其更简单。

实现这个类...

```
namespace TestWpf
{
    class VoltageChangeModel : INotifyPropertyChanged
    {
        private int _Voltage = 0;
        private string _ChanelName = "";
        private Brush color = Brushes.Blue;

        public Brush Color
        {
            set
            {

                if (value != color)
                {
                    onPropertyChanged("Color");
                    color = value;
                }
            }
            get
            {
                return color;
            }

        }
        public int Voltage
        {
            set
            {

                if (value != _Voltage)
                {
                    onPropertyChanged("Voltage");
                    _Voltage = value;
                }
            }
            get
            {
                return _Voltage;
            }
        }
        public String ChanelName
        {
            set
            {
                if (value != _ChanelName)
                {
                    onPropertyChanged("ChanelName");
                    _ChanelName = value;
                }
            }

            get
            {
                return _ChanelName;
            }
        }
        public VoltageChangeModel(int Voltage, string ChanelName, Brush Color)
        {
            this.ChanelName = ChanelName;
            this.Voltage = Voltage;
            this.Color = Color;
        }
        public override string ToString()
        {
            return _ChanelName;
        }

        public void onPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;
    }
}

next this clas.... 

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Collections.ObjectModel;

namespace TestWpf
{
    class ChanellList : ObservableCollection<VoltageChangeModel>
    {

    }
}
 in the mainWindow this code  after <window ,,,,,,,,,,,>

    <Grid>
        <ListBox x:Name="myViewChannelList" HorizontalAlignment="Left" Height="161" ItemsSource="{Binding}" Margin="82,38,0,0" VerticalAlignment="Top" Width="187">
            <ListBox.ItemTemplate>
                <DataTemplate >
                    <StackPanel Background="{Binding Path=Color}">
                    <Label Content="{Binding Path=Voltage}" ></Label>
                    <Label Content="{Binding Path=ChanelName}"></Label>

                    </StackPanel>
                </DataTemplate>

            </ListBox.ItemTemplate>

        </ListBox>

    </Grid>
</Window>

and then in code behind set the data context.

using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace TestWpf
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            ChanellList myChanels = new ChanellList();
            myChanels.Add(new VoltageChangeModel(30,"Channel 1 " , Brushes.Blue ));
            myChanels.Add(new VoltageChangeModel(30, "Channel 1 ", Brushes.Red));
            myViewChannelList.DataContext = myChanels;
        }
    }
} 
```

您可以在此处下载源代码[http://mihairadulescu.com/download/TestWpf.rar](http://mihairadulescu.com/download/TestWpf.rar)

# c# - WebClient/HttpRequest 登录后导航到页面

> ID：12779088
> 
> 赞同：0
> 
> 时间：2012-10-08T09:42:26.477
> 
> 标签：c#, cookies, webclient, httprequest, httpresponse

我想使用 webclient 或 httpwebrequest 登录网站，登录后我想导航到网站中的页面。
所以我知道如何发布数据和登录，我的问题是登录后的导航，
它将我重定向到登录页面，我知道它与 cookie 有关，但我不明白我在做什么。 ..这是我的代码->它取自stackoverfllow上的另一个答案...（http://stackoverflow.com/questions/8425593/c-sharp-httpwebrequest-post-login-to-facebook）

```
 string getUrl = "somesite.com";
        CookieCollection cookies = new CookieCollection();
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(getUrl);
        request.CookieContainer = new CookieContainer();
        request.CookieContainer.Add(cookies);
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        cookies = response.Cookies;

        string getUrl2 = "somepage.login.com";
        string postData = String.Format("username={0}&userpassword={1}", "foo", "foofoo");

        HttpWebRequest getRequest = (HttpWebRequest)WebRequest.Create(getUrl2);
        getRequest.CookieContainer = new CookieContainer();
        getRequest.CookieContainer.Add(cookies);

        getRequest.Method = WebRequestMethods.Http.Post;
        getRequest.UserAgent = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.2 (KHTML, like Gecko) Chrome/15.0.874.121 Safari/535.2";
        getRequest.AllowWriteStreamBuffering = true;
        getRequest.ProtocolVersion = HttpVersion.Version11;
        getRequest.AllowAutoRedirect = true;
        getRequest.ContentType = "application/x-www-form-urlencoded";

        byte[] byteArray = Encoding.ASCII.GetBytes(postData);
        getRequest.ContentLength = byteArray.Length;
        Stream newStream = getRequest.GetRequestStream(); 
        newStream.Write(byteArray, 0, byteArray.Length); 
        newStream.Close();

        HttpWebResponse getResponse = (HttpWebResponse)getRequest.GetResponse();
        using (StreamReader sr = new StreamReader(getResponse.GetResponseStream()))
        {
            string sourceCode = sr.ReadToEnd();
        }
        //untill here it works fine i'm logged in....

        HttpWebRequest getRequest2 = (HttpWebRequest)WebRequest.Create("a page on the site..");
        getRequest2.CookieContainer = new CookieContainer();
        getRequest2.CookieContainer.Add(cookies); 
        HttpWebResponse getResponse2 = (HttpWebResponse)getRequest2.GetResponse();
        cookies = getResponse2.Cookies;

        using (StreamReader sr = new StreamReader(getResponse2.GetResponseStream()))
        {
            string sourceCode = sr.ReadToEnd();
        }
        //here it rediects me to login page 
```

任何建议>我做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:46:50.033

不要为每个请求实例化 CookieContainer。您需要一个 CookieContainer 来处理所有请求。尝试这个：

```
 CookieContainer cc = new CookieContainer();

    string getUrl = "somesite.com";

    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(getUrl);
    request.CookieContainer = cc;
    HttpWebResponse response = (HttpWebResponse)request.GetResponse();

    string getUrl2 = "somepage.login.com";
    string postData = String.Format("username={0}&userpassword={1}", "foo", "foofoo");

    HttpWebRequest getRequest = (HttpWebRequest)WebRequest.Create(getUrl2);
    getRequest.CookieContainer = cc;

    getRequest.Method = WebRequestMethods.Http.Post;
    getRequest.UserAgent = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.2 (KHTML, like Gecko) Chrome/15.0.874.121 Safari/535.2";
    getRequest.AllowWriteStreamBuffering = true;
    getRequest.ProtocolVersion = HttpVersion.Version11;
    getRequest.AllowAutoRedirect = true;
    getRequest.ContentType = "application/x-www-form-urlencoded";

    byte[] byteArray = Encoding.ASCII.GetBytes(postData);
    getRequest.ContentLength = byteArray.Length;
    Stream newStream = getRequest.GetRequestStream(); 
    newStream.Write(byteArray, 0, byteArray.Length); 
    newStream.Close();

    HttpWebResponse getResponse = (HttpWebResponse)getRequest.GetResponse();
    using (StreamReader sr = new StreamReader(getResponse.GetResponseStream()))
    {
        string sourceCode = sr.ReadToEnd();
    }
    //untill here it works fine i'm logged in....

    HttpWebRequest getRequest2 = (HttpWebRequest)WebRequest.Create("a page on the site..");
    getRequest2.CookieContainer = cc;
    HttpWebResponse getResponse2 = (HttpWebResponse)getRequest2.GetResponse();

    using (StreamReader sr = new StreamReader(getResponse2.GetResponseStream()))
    {
        string sourceCode = sr.ReadToEnd();
    }
    //here it rediects me to login page 
```

# sql - SQL ODBC 中的 DateDiff

> ID：12779090
> 
> 赞同：0
> 
> 时间：2012-10-08T09:42:35.267
> 
> 标签：sql, sql-server-2008, odbc, datediff

我在 SQL 中使用 datediff。当直接在 sql server 2008 中运行时，它会返回记录，但是当我尝试通过 ODBC 运行它时，它不会出现错误，但它不会返回任何行。

```
SELECT  mc_id, mc_date_entered,
 COUNT([mv_value]) total
FROM MarkbookValue t1
    RIGHT JOIN MarkbookColumn t2 ON t1.mv_column_id = t2.mc_id
WHERE mc_module_id = '703000026609358' 
    AND DateDiff(dd, mc_date_entered, '2012-10-05 20:00:00') = 0
    AND mc_type = 'KEF'
    AND mc_entered_by = 'A.ADMIN'
GROUP BY
    mc_id, mc_date_entered; 
```

摆脱 DateDiff 可以让函数正确运行，但我显然希望将它放在那里。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:50:18.333

我几乎总是以 ISO-8601 格式写日期，没有破折号的是 YYYYMMDD。
还想指出，如果您希望查询使用索引`mc_date_entered`并保持[SARGABLE](http://en.wikipedia.org/wiki/Sargable)，您需要像这样重写它。

```
SELECT  mc_id, mc_date_entered, COUNT([mv_value]) total
FROM MarkbookValue t1
RIGHT JOIN MarkbookColumn t2 ON t1.mv_column_id = t2.mc_id
WHERE mc_module_id = '703000026609358' 
    AND mc_date_entered >= '20121005'
    AND mc_date_entered <  '20121006'
    AND mc_type = 'KEF'
    AND mc_entered_by = 'A.ADMIN'
GROUP BY
    mc_id, mc_date_entered; 
```

您是否也知道[DATEDIFF(DD](http://msdn.microsoft.com/en-us/library/ms189794.aspx)只考虑日期部分，所以包括时间真的没有意义（如果我们仍在使用 DATEDIFF）？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T11:01:00.057

`YYYY-MM-DD HH:MM:SS`不是用于 SQL Server 中日期时间文字值的安全日期格式。根据`SET DATEFORMAT`您的月份和日期，部分可能会被切换。

`YYYY-MM-DDTHH:MM:SS`并且`YYYYMMDD HH:MM:SS`无论`SET DATEFORMAT`.

要获取特定日期的行，我建议您按照[@RichardTheKiwi](https://stackoverflow.com/a/12779226/569436)提供的答案进行操作，或者如果您在 SQL Server 2008 中，您可以将列转换为日期以删除时间部分。

```
where cast(mc_date_entered as date) = '2012-10-05' 
```

`YYYY-MM-DD` **对于数据类型**是**`date`安全的。**

# asp.net-mvc - 使用 MVC 3 和 razor 的具有依赖关系的嵌套 jQuery AJAX 调用

> ID：12779096
> 
> 赞同：0
> 
> 时间：2012-10-08T09:42:53.613
> 
> 标签：asp.net-mvc, jquery

我正在使用 MVC 3 Ajax.BeginForm 调用通过客户端验证进行表单提交。输入字段之一是邮政编码（邮政编码），除了验证格式之外，我还想检查它是否存在于大约 200 万个条目的数据库表中。

我选择的解决方案是使用 BeginForm OnBegin 调用在提交之前执行查找，如果邮政编码不存在，则为用户提供接受或重新输入的选项。我正在使用另一个 Ajax 调用执行邮政编码查找

问题是我需要等待内部 Ajax 调用返回并处理响应，然后再返回到外部调用，但由于这是一个异步调用，因此在内部 Ajax 完成之前函数正在继续。

我可以看到几个非首选的解决方案，例如使内部 Ajax 调用同步或捕获提交按钮单击事件，但有没有人有一个干净的不显眼的解决方案的建议。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:48:30.443

您可以使用该[`[Remote]`](http://msdn.microsoft.com/en-us/library/gg508808%28v=vs.98%29.aspx)属性来执行远程验证。您只需使用此属性装饰视图模型上的相应属性，然后指定将执行实际验证的控制器操作。

显然，无论您选择哪种解决方案，一旦在服务器上提交表单，您**绝对必须**执行相同的检查，因为在您最初使用 AJAX 检查和实际提交表单时，您的数据库数据可能会发生变化，并且最初有效的是不再有效。

# grails - 如何使用apache POI逐行迭代.docx文件

> ID：12779097
> 
> 赞同：3
> 
> 时间：2012-10-08T09:42:57.387
> 
> 标签：grails, groovy, apache-poi, openxml

我的目标是读取 .docx 文件并在视图（网页）上显示该文件的文本。

我正在使用 apache POI 在 Grails 应用程序中读取 .docx 文件 请建议我一种在视图上显示输出而不会丢失空格和换行符的方法。

我的 .docx 文档内容

```
This is a .docx document ...
this is second line
this is third line 
```

在我打印时阅读后在 Groovy 控制台上的结果：

```
This is a .docx document ...
this is second line
this is third line 
```

但是当我将输出传递给查看时它变成了

```
This is a .docx document ... this is second line this is third line 
```

.

```
My code is : 

    import org.apache.poi.xwpf.usermodel.XWPFDocument
    import org.apache.poi.xwpf.extractor.XWPFWordExtractor

    ...
            String str = "E:\\Query.docx"
            File docFile = null;
            docFile = new File(str);
            FileInputStream fis=new FileInputStream(docFile.getAbsolutePath());
            XWPFDocument doc = new XWPFDocument(fis)
            XWPFWordExtractor docExtractor =  new XWPFWordExtractor(doc)
            println docExtractor.getText()
    ... 
```

如果有人可以建议我遍历文档每一行的方法，那么我可以很容易地得到我的结果。请帮助我，我被卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:40:15.030

HTML 忽略换行符。因此，虽然像 "Hello there\nLine 2\n" 这样的字符串在控制台中呈现为

```
Hello There
Line 2 
```

作为 HTML，它将全部显示在同一行。您需要用一些合适的 HTML 替换换行符，例如，`<br />`或者将内容包装在段落/div 标记中。

# php - Javascript - 使用 jquery 获取多个文本区域值

> ID：12779099
> 
> 赞同：0
> 
> 时间：2012-10-08T09:43:02.243
> 
> 标签：php, javascript, jquery

我是 jQuery 的新手。我想从这两个文本区域中获取价值，我有这样的 html 和下面的 jquery：

**网页：**

```
<pre>
<a id="send-thoughts" href="">Click</a>
<textarea id="message1" class="message">Hello</textarea>
<textarea id="message2" class="message">World</textarea>
</pre> 
```

**jQuery：**

```
jQuery("a#send-thoughts").click(function() {
                var thought= jQuery("textarea.message").val();
                alert(thought);
 });​ 
```

为什么只显示一个值？以及如何获得 textarea 的两个值？

[http://jsfiddle.net/guruhkharisma/9zp9H/](http://jsfiddle.net/guruhkharisma/9zp9H/)

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:44:54.040

```
var text = "";

jQuery("textarea.message").each(function(){
   text += jQuery(this).val() + "\n";
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:44:36.477

试试`thought = $('textarea').text()` 我认为这应该有效或`thought = $('.message').text();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T09:45:39.510

使用`each()`方法。

```
jQuery("a#send-thoughts").click(function() {
    jQuery("textarea.message").each(function() {
        var thought= $(this).val();
        alert(thought);
    });
 });​ 
```

查看在线文档以获取更多信息：[http ://api.jquery.com/each/](http://api.jquery.com/each/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T09:46:57.723

[`.val()`](http://api.jquery.com/val)与所有 jQuery getter 一样，返回第一个匹配的表单输入元素的值。您将不得不使用[`.each()`](http://api.jquery.com/each/)循环并连接值：

```
jQuery("a#send-thoughts").click(function() {
    var thought = '';
    jQuery("textarea.message").each(function() {
        thought += $(this).val() + ' ';
    });
    alert(thought);
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T09:44:55.167

```
<pre>
<a id="send-thoughts" href="">Click</a>
<textarea id="message1" class="message1">Hello</textarea>
<textarea id="message2" class="message2">World</textarea>
</pre>

jQuery:

jQuery("a#send-thoughts").click(function() {
                var thought1= jQuery("textarea.message1").val();
                alert(thought1);
                var thought2= jQuery("textarea.message2").val();
                alert(thought2);
 });​ 
```

# excel - excel vba-如果值大于*，则遍历列并显示消息框

> ID：12779105
> 
> 赞同：-1
> 
> 时间：2012-10-08T09:43:24.933
> 
> 标签：excel, vba

我通过检查一个值获得了显示 msgbox 的 vba 代码。If Range("AH4").Value Then MsgBox "tablespace 大于 95"

但我想检查大约 50 个值的一整列，并且我想要一个遍历整列并在任何值大于 95 时显示一个 msgbox 的循环代码。 ABCD 1 表空间总大小（Mb）总空闲（MB ）PCT_USED 2 MONITOR 100 99 1 3 PSAPSR3 73940 3992 94.6 4 PSAPSR3702 84960 24391 71.29 5 PSAPSR3USR 40 16 61 6 PSAPUNDO 9260 9221 0 7 760 SYSAUX 93 51.3125 8 SYSTEM 1470 9.75 99

现在我想完善克里斯给出的解决方案。1\. 我希望我的 msgbox 应该显示它在 PCT_USED 下找到大于 95 的单元格的实际值。2.那个msgbox应该在A列下显示相应表空间的名称（我已经在我的excel表中冻结了这个列）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:47:13.050

你不需要为此循环。

尝试

```
Sub TestRange()
    Dim rng As Range

    Set rng = [F1:F10]  ' <-- adjust to your requirements
    If Application.WorksheetFunction.Max(rng) > 95 Then
        MsgBox "tablespace greater than 95"
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:51:20.290

`for each`使用循环怎么样....

```
Sub CheckInColumn()
Dim TestCell As Range

    For Each TestCell In [E1].EntireColumn.Cells
        ' break on first find
        If TestCell > 95 Then
            MsgBox "Co-coo"
            Exit For
        End If
    Next TestCell
End Sub 
```

您可以使用 [E1] 代替`Selection`检查光标当前所在的列。

`For Each`循环通常比离散`For ... Next`循环快。

# magento - Magento 如何检查购物车是否为空？

> ID：12779110
> 
> 赞同：10
> 
> 时间：2012-10-08T09:43:47.113
> 
> 标签：magento, cart, shopping, php

我正在尝试检查购物车是否为空。我正在尝试从静态块和 phtml 文件中执行此操作。

有人知道怎么做吗？

提前致谢

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-08T10:43:01.790

我能够使用以下代码找到购物车中的商品总数：

```
$totalItemsInCart = Mage::helper('checkout/cart')->getItemsCount(); 
```

如果它不起作用，请告诉我。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-13T14:50:54.283

你可以试试这个。

```
$cart_qty = (int) Mage::getModel('checkout/cart')->getQuote()->getItemsQty();

if($cart_qty) {
    // Not empty.
} else {
    // Empty.
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T09:59:21.800

我认为这可能会有所帮助：

[http://blog.decryptweb.com/empty-cart-magento/](http://blog.decryptweb.com/empty-cart-magento/)

你可以尝试这样的事情：

```
$checkout_cart = Mage::getSingleton('checkout/cart');
$items = $checkout_cart->getItems(); 
```

# java - IdentityHashMap 会接受碰撞吗？

> ID：12779113
> 
> 赞同：3
> 
> 时间：2012-10-08T09:43:52.343
> 
> 标签：java, data-structures

根据[Javadocs](http://docs.oracle.com/javase/7/docs/api/)，`IdentityHashMap`它说

> 此类`Map`使用哈希表实现接口，在比较键（和值）时使用引用相等代替对象相等。换句话说，在 a 中`IdentityHashMap`，当且仅当 时，两个键 k1 和 k2 被认为相等`(k1==k2)`。（在正常`Map` 实现中（如`HashMap`），当且仅当 时，两个键 k1 和 k2 被认为是相等的`(k1==null ? k2==null : k1.equals(k2))`。）

据我了解，指向不同内存位置的两个不同对象仍然可以具有相同的哈希码，因此`object1.equals(object2)`可以返回`true`. 但是指向不同内存位置的两个不同对象永远无法返回`true`.`object1 == object2`

**问题 1** - 当`IdentityHashMap`严格依赖引用相等时，这是否意味着永远不会发生冲突？

**问题 2** - 调试以下代码向我展示了总共 6 个存储桶，其中键和值都存储在单独的存储桶中。但情况并非如此`HashMap`，其中键和值存储在同一个存储桶中。

由于它的名称中有一个“哈希”字，所以它必须对键进行哈希处理，那么它为什么要分别存储键和值以及它如何检索给定键的值？

```
String A = "abc";
String B = "def";
String C = new String("abc");
Map<String, String> map1 = new IdentityHashMap<String, String>();
map1.put(A, "123");
map1.put(B, "345");
map1.put(C, "567"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T09:51:18.017

`IdentityHashMap`不使用`hashCode`键的 ，但它们的`System.identityHashCode`. 虽然如果你有一个巨大的内存，这种身份哈希码的冲突是可能的，但它们很少见。这当然不会阻止两个键最终在同一个存储桶中，因为存储桶的数量通常远小于 2^32 - 1。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T09:50:51.357

> 当 IdentityHashMap 严格依赖引用相等时，这是否意味着永远不会发生冲突？

碰撞的可能性几乎与没有发生碰撞的可能性一样。系统 hashCode 不是唯一的，即使它们是集合的大小也不是 2^^32，因此只需将 hashCode 减少到少量位。

> 它如何检索给定键的值？

我会阅读代码以找出答案。

```
public V get(Object key) {
    Object k = maskNull(key);
    Object[] tab = table;
    int len = tab.length;
    int i = hash(k, len);
    while (true) {
        Object item = tab[i];
        if (item == k)
            return (V) tab[i + 1];
        if (item == null)
            return null;
        i = nextKeyIndex(i, len);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T09:51:09.467

当两个不同的项目具有相同的哈希码时会发生冲突，因此显然`IdentityHashMap`必须处理冲突。唯一的区别是“常规”哈希映射`equals`可以`true`用于不同的对象，而不能`IdentityHashMap`用于不同的对象。`==``true`

“常规”哈希映射具有单独的键和值变量的原因是 的实现细节`IdentityHashMap`：它的实现使用[*线性探测*](http://en.wikipedia.org/wiki/Linear_probing)来解决冲突，并且它还将键和值存储在同一个表中：键放置在`table[hash]`，而该值位于`table[hash+1]`。常规`HashMap`定义了一个`Entry`类，它将键与其值组合在同一个对象中，并将条目存储在桶中。

# version-control - 在 Windows 中安装 SCM Manager（Mercurial 管理 Web 前端）

> ID：12779118
> 
> 赞同：2
> 
> 时间：2012-10-08T09:44:18.143
> 
> 标签：version-control, mercurial, iis-7.5, versioning, scmmanager

我在 Windows7（IIS 7.5）上成功安装了 mercurial，并获得了默认 UI（默认 Mercurial 管理 Web 前端）。但是无法通过此 UI 添加存储库、用户或设置权限。经过一番研究，我开始了解 SCM Manager。但我无法安装它。谁能告诉我如何在 Windows 上安装 SCM Manager？如果你能给出步骤，那将非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-17T11:28:41.700

您使用 IIS 有什么原因吗？您也可以使用带有嵌入式 Jetty 服务器的独立版本的 SCM-Manager。只需解压缩并运行 scm-server.bat。

[https://bitbucket.org/sdorra/scm-manager/wiki/download](https://bitbucket.org/sdorra/scm-manager/wiki/download)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T05:23:34.800

最后，我在 Windows 7 上成功安装了 SCM Manager。我遵循了本教程[http://www.helicontech.com/articles/hosting-git-svn-and-hg-mercurial-repositories-on-windows-with-iis/](http://www.helicontech.com/articles/hosting-git-svn-and-hg-mercurial-repositories-on-windows-with-iis/)

# google-apps-script - 提交表单后，如何从谷歌电子表格中给定列的最后一行获取数据？

> ID：12779120
> 
> 赞同：0
> 
> 时间：2012-10-08T09:44:21.257
> 
> 标签：google-apps-script

我想根据最后一行的数据向特定的人发送电子邮件，类似于 vlookup 功能。如果在表单中输入的数据是 x，则发送邮件给 joe，如果数据是 y，则发送邮件给 jack 等。我很困惑当没有活动范围时，范围选择是如何工作的，就像在电子表格视图中一样。

```
function sendEmails() 
{   
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
  var row = sheet.getLastRow();
  var data = sheet.getRange(row, 5).getValue();

 if (data == "xxx")
 {
   sendmail //i got this
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T20:32:08.650

塞尔吉 -

我按照您的建议编写了此脚本，只是将最后一行替换为：

```
return sh.getRange(row, 5).getValue(); 
```

并将其放在我的电子表格中。但是，一旦新的表单提交到达，电子表格中的单元格就不会更新......

应该做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:35:09.057

在电子表格不一定打开的这种情况下（对表单提交做出反应），您最好使用这些方法来访问工作表：

```
 var ss = SpreadsheetApp.openById('the ID of the spreadsheet');
  var sh = ss.getSheets()[0];// access first sheet (0 indexed)
  var row = sh.getLastRow();
  var data = sh.getRange(row, 5).getValue(); 
```

# android - 如何移动和缩放图像

> ID：12779123
> 
> 赞同：-3
> 
> 时间：2012-10-08T09:44:24.540
> 
> 标签：android, image

我的 android 应用程序中有一个 Imageview。我想**移动和缩放**图像。我还想**裁剪图像的选定部分**（就像照片/图像编辑器一样）。我怎样才能做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:53:13.007

做这样的事情：

```
Intent intent = new Intent("com.android.camera.action.CROP");
// this will open all images in the Galery
intent.setDataAndType(photoUri, "image/*");
intent.putExtra("crop", "true");
// this defines the aspect ration
intent.putExtra("aspectX", aspectY);
intent.putExtra("aspectY", aspectX);
// this defines the output bitmap size
intent.putExtra("outputX", sizeX);
intent.putExtra("outputY", xizeY);
// true to return a Bitmap, false to directly save the cropped iamge
intent.putExtra("return-data", false);
//save output image in uri
intent.putExtra(MediaStore.EXTRA_OUTPUT, uri); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-08T09:49:34.463

```
<ImageView
        android:id="@+id/imgProfilePic"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/image"
        android:scaleType="fitCenter" <!-- TO CROP/SCALE -->
android:gravity="center"    <!-- TO MOVE -->
        /> 
```

希望这对你有帮助

# ios - 我的 HTTP 服务器的输出显然无效。我该如何调试它？

> ID：12779124
> 
> 赞同：0
> 
> 时间：2012-10-08T09:44:28.707
> 
> 标签：ios, http, pcap, cfnetwork, tshark

背景：我有一个用 Erlang 编写的自定义 HTTP 服务器，用于将内容流式传输到 iPad 应用程序。我正在使用 NSURLConnection - 标准的高级 Apple 方式来使用 HTTP 内容。但是我遇到了小块数据被缓冲并且没有立即传递给我的代码的问题，所以我被迫切换到 CFNetwork。

虽然 NSURLConnection 从未抱怨过，但 CFNetwork 有时（大约 3 次中的 1 次）会出现以下错误并终止连接：

```
The operation couldn’t be completed. (kCFErrorDomainCFNetwork error 303.) 
```

根据[Apple 文档](https://developer.apple.com/library/mac/documentation/Networking/Reference/CFNetworkErrors/Reference/reference.html#//apple_ref/doc/c_ref/kCFErrorHTTPParseFailure)，这对应于“无法解析 HTTP 服务器响应”。

这仅在连接打开几秒钟并做出响应后才会发生。

我已经使用 tshark 在服务器上进行了数据包捕获。它非常大，包含 UTF-8 以及机密细节。

如何验证它是有效的 HTTP 1.1 分块响应？

只是为了澄清一下，我查看了结果，`tcpick -C -yP -r ...`并没有立即看到任何问题，但我想知道是否有任何东西可以通过它来确认它的字节对字节有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:33:51.443

事实证明，`sndbuf`问题在于 Erlang Web 服务器设置得太低。

这浪费了 5 个小时来扫描数据包捕获、从头开始使用 CFStream 实现分块 HTTP 等等

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-08T09:52:38.930

> 如何验证它是有效的 HTTP 1.1 分块响应？

通过确认是否[正确实施了](https://www.rfc-editor.org/rfc/rfc2616#section-3.6.1)[分块传输编码](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)。

# javascript - 如何在 ruby on rails 中滑动用于创建和编辑的表单？

> ID：12779126
> 
> 赞同：0
> 
> 时间：2012-10-08T09:44:35.767
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3

是否可以在不安装的情况下使用 JavaScript在同一页面中`form`滑动而不刷新页面？这有什么例子吗？`Create and Edit``index``gem`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:39:34.667

您需要在页面中有一个**唯一的 html 节点**，例如，

```
<div id="main_content">
    #Any of your conntent will go here
</div> 
```

你的链接应该有`remote=>true`。

单击任何链接**将请求创建或编辑表单**，该表单将实际**替换`main_content`**div 的内容。

这是您可以关注的参考=> **[http://www.alfajango.com/blog/rails-3-remote-links-and-forms/](http://www.alfajango.com/blog/rails-3-remote-links-and-forms/)**

你应该在网络上找到大量的资源。让我们知道实施上述任何具体问题。

**更多帮助：**

*   [link_to 上的 Ror Api 指南](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)
*   [Rails 中不健壮的 Javascript 助手](http://solnic.eu/2009/09/08/unobtrusive-javascript-helpers-in-rails-3.html)
*   [UJS 上的 RailsCast](http://solnic.eu/2009/09/08/unobtrusive-javascript-helpers-in-rails-3.html)

**更新：**

好的。如果您完全是初学者，那么这似乎有点困难。然后我建议将整个事情分解成更小的可实现的步骤。并一一实现。最终你会成功的。

以下是我推荐的步骤：

1.  学习**远程链接**
    *   什么是远程链接
    *   如何在 Rails 3 中创建这些。
    *   自己创建一个远程链接。
2.  学习**响应处理程序**
    *   什么是控制器中的响应处理程序。
    *   如何处理ajax响应。
    *   一个ajax请求对应的视图文件是什么
3.  编写***.js.erb**文件
    *   需要熟悉javascript。
    *   需要了解jquery的基础知识。
    *   了解如何在**js.erb**文件中呈现表单
    *   在主页的 DIV 中设置此表单。

我尝试了一个最简单的例子。[**在这里找到代码**](https://gist.github.com/3853453)。

与我们分享您在每个步骤中遇到的问题。祝你好运。

# php - 通过单击文本更改 MYSQL 中的值？

> ID：12779128
> 
> 赞同：-1
> 
> 时间：2012-10-08T09:44:42.037
> 
> 标签：php, mysql, message

我正在做一个小型的社交网络项目。到目前为止，我有一个一切正常的消息系统，用户可以发送和接收消息。我正在寻找一种让用户删除自己的消息的方法。

已将“删除”行设置为通过回显命令在每条消息的侧面显示。有没有办法让这个文本可点击，这样当用户点击它时，它会将数据库中的值从“0”更改为“1”？

代码：

```
<?php
$page_title = "Messages";
include('includes/header.php');     
confirm_logged_in();
include('includes/mod_login/login_form.php');
?>

<div class="modtitle">
    <div class="modtitle-text">Inbox</div>
</div>

<div class="modcontent">

<strong>Inbox</strong> | <a href="messages_sent.php">Sent Messages</a>
| <a href="messages_deleted.php">Deleted</a> <br /><br />
 <table
width="100%" border="0" cellpadding="5" cellspacing="0">
<tr
bgcolor="#CCCCCC">
    <td width="30%"><strong>Recieved</strong></td>
    <td width="20%"><strong>From</strong></td>
    <td width="28%"><strong>Subject</strong></td>
    <td width="0%"><strong>Read/Unread</strong></td>
    <td width="0%"><strong>Delete</strong></td>
</tr>

<?php
    $inbox_set = get_inbox();
    while ($inbox =
mysql_fetch_array($inbox_set)) {
             ?>

<?php  if ($inbox['read'] == 0) { ?>   <tr bgcolor="#6666B3"> <?php } 
if ($inbox['read'] == 1) { ?>   <tr>

<?php }  ?>

    <td><?php 

            $datesent1 = $inbox['date_sent'];
            echo "$datesent1"; ?></td>

    <a href="profile.php?id={$inbox['from_user_id']}"><td><?php echo "<a
href=\"profile.php?id={$inbox['from_user_id']}\">{$inbox['display_name']}";
?></td></a>

    <td><?php echo "<strong><a href=\"read_message.php?msg={$inbox[0]}\">{$inbox['subject']}</a></strong>";
?></td>

    <td><?php   if ($inbox['read'] == 0)  {
                echo "Unread"; 
                }
                if ($inbox['read'] == 1)  {
                echo "Read";
                }
                ?></td>
                <td>
                <?php 
                if ($inbox['delete'] == 0)  {
                echo "Delete"; 

                }
                 if ($inbox['delete'] == 1)  {
                echo "$deleted_set;";
                }   

                    ; ?></td>

                </td>
        <?php }

?>

</tr> </table>

</div>

<?php include('includes/footer.php'); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:51:07.223

使用 jQuery + Ajax 完成类似这样的任务

```
$.ajax({
        type:"POST",
        url: url, // action page url
        data: "id="+id,
        success: function(msg){
        if(msg) {
              //action here     
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:49:18.377

使用 AJAX 请求在服务器端触发正确的操作。

请记住检查授权，否则可能会删除其他用户拥有的消息。

# javascript - 按钮切换类在按下另一个按钮时保持活动状态

> ID：12779133
> 
> 赞同：0
> 
> 时间：2012-10-08T09:45:00.010
> 
> 标签：javascript, jquery, greasemonkey

我正在编写一个 Greasemonkey 脚本，并且在为我添加的两个按钮设置活动状态时遇到问题，每个按钮都用于切换。

我添加了代码来分配类。切换按钮时出现问题。

例如，当我按下***Button A***时，它会变为活动状态。但是，如果我按下***按钮 B，*** ***按钮 A***仍然处于活动状态。从而使我有两个处于活动状态的按钮。

我知道我可以通过在转到另一个按钮之前再次按下我的活动按钮来删除活动类。但是，我想实现一个功能，如果*Button A*处于活动状态，并且我按下*Button B*，那么*Button A 将*失去其活动类，反之亦然。

这是我正在使用的为我的按钮分配类的代码：

```
$('#ButtonA').toggle(function () { 
    $("#ButtonA").addClass("active"); }, function () {
    $("#ButtonA").removeClass("active");
});

$('#ButtonB').toggle(function () {
    $("#ButtonB").addClass("active"); }, function () {
    $("#ButtonB").removeClass("active"); 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:36:10.470

目前尚不清楚您为什么要使用这样的切换，并尽可能避免[***CloneAndModifyProgramming 。***](http://c2.com/cgi/wiki?CloneAndModifyProgramming)

为您的按钮添加一个类，如下所示：

```
$("#ButtonA, #ButtonB, #ButtonC").addClass ("MyRadioBtns"); 
```

然后用于`click`处理活动状态：

```
$("button.MyRadioBtns").click ( function (zEvent) {
    $("button.MyRadioBtns").removeClass ("active");
    var jThis   = $(this);
    jThis.addClass ("active");

    //- DO WHATEVER ELSE IS DESIRED WITH jThis HERE.
} ); 
```

[**请参阅 jsFiddle 的实际代码**](http://jsfiddle.net/PSuMf/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:14:55.013

您只需在每个按钮的第一个回调中添加一行，即可从任何活动按钮中删除活动类。

```
$('#ButtonA').toggle(function() {
    $('button.active').click(); // Remove active class from any active button.
    // you may adapt 'button.active' to select the proper buttons
    $('#ButtonA').addClass("active");
}, function() {
    $('#ButtonA').removeClass("active");
});​ 
```

**但是，**对所有按钮只使用一个代码块，就像这样；

```
$('#ButtonA, #ButtonB, #ButtonC').toggle(function() { // this refer to the just clicked button.
    $('button.active').click(); // Remove active class from all other buttons.
    $(this).addClass("active");
}, function() {
    $(this).removeClass("active");
}); 
```

而不是复制和粘贴。

请参阅[http://jsfiddle.net/fNtPP/1/](http://jsfiddle.net/fNtPP/1/)以获得干净的重构代码，其中显示了一个带有 3 个按钮的示例。

# regex - 解析 .ssh/config 以获取代理信息

> ID：12779134
> 
> 赞同：2
> 
> 时间：2012-10-08T09:45:11.227
> 
> 标签：regex, perl, bash, sed, awk

我想解析`.ssh/config`文件中包含的代理信息，并将每个具有相关代理信息的主机与代理信息一起显示。应该过滤掉没有任何代理信息的主机。手册页`.ssh/config`：[http ://man-wiki.net/index.php/5:ssh_config](http://man-wiki.net/index.php/5:ssh_config)

这应该通过 Bash 下的 Unix shell 脚本完成，因此首选 Perl、awk 或 sed 等标准工具。

示例输入文件：

```
Host ssh.foo.com
    User ssh
    HostName ssh.foo.com
    Port 443
    ProxyCommand /usr/local/bin/corkscrew proxy 8080 %h %p ~/.ssh/proxyauth

Host ci
    HostName 127.0.0.2
    User ci

Host nightly
    HostName 192.168.1.1
    User goodnight

Host foobar.org
    User git
    HostName foobar.org
    Port 443
    ProxyCommand /usr/local/bin/corkscrew proxy 8080 %h %p ~/.ssh/proxyauth

Host integration
    HostName 192.168.1.2
    User int 
```

预期的输出应如下所示：

```
Host: ssh.foo.com - Proxy: /usr/local/bin/corkscrew proxy 8080 %h %p ~/.ssh/proxyauth
Host: foobar.org - Proxy: /usr/local/bin/corkscrew proxy 8080 %h %p ~/.ssh/proxyauth 
```

这里的困难是搜索必须覆盖多行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T09:54:46.123

尝试以下`awk`命令：

```
awk '
    $1 == "Host" { 
        host = $1 ": " $2; 
        next; 
    } 
    $1 == "ProxyCommand" { 
        $1 = ""; 
        sub( /^[[:space:]]*/, "" ); 
        printf "%s - Proxy: %s\n", host, $0;
    }
' .ssh/config 
```

它产生：

```
Host: ssh.foo.com - Proxy: /usr/local/bin/corkscrew proxy 8080 %h %p ~/.ssh/proxyauth
Host: foobar.org - Proxy: /usr/local/bin/corkscrew proxy 8080 %h %p ~/.ssh/proxyauth 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T09:52:16.317

awk oneliner 可能会满足您的要求：

```
awk -v RS="" '/Proxy/{gsub(/\n/,"");gsub(/\s*User.*ProxyCommand/,"- Proxy:");print}'file 
```

**测试**（a.txt 是您的输入文件）

```
kent$  awk -v RS="" '/Proxy/{gsub(/\n/,"");gsub(/\s*User.*ProxyCommand/,"- Proxy:");print}' a.txt                                                                  
Host ssh.foo.com    - Proxy: /usr/local/bin/corkscrew proxy 8080 %h %p ~/.ssh/proxyauth
Host foobar.org    - Proxy: /usr/local/bin/corkscrew proxy 8080 %h %p ~/.ssh/proxyauth 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T10:59:42.600

只是为了好玩，这是一个讨厌的 sed 命令，似乎可以完成此操作。

```
sed -n '/^[Hh]ost/{:r;h;:l;n;/^[Hh]ost/!{/[Pp]roxy/H;bl};/^[Hh]ost/{x;/[Pp]roxy/{s/\n\s*/ - /;s/[Cc]ommand/:/;s/[Hh]ost/\0:/;p};x;br}}' ~/.ssh/config 
```

无论如何，这更多是出于演示目的，因为其他解决方案更容易掌握。对此的评论意见：

```
/^[Hh]ost/ {                # Begin on a Host line
    :restart                # Label to jump back to
    h                       # Copy the pattern space to the save space
    :loop                   # Label to jump to when we don't want to wipe out the save space
    n                       # Read in the next line
    /^[Hh]ost/!{            # For lines that aren't host definitions
        /[Pp]roxy/H         # If they are proxy configurations, append the line to the save space
        b loop              # Go to :loop
    }
    /^[Hh]ost/{             # If they are *not* host definitions
        x                   # Exchange the pattern and save spaces
        /[Pp]roxy/{         # If the new pattern space contains a proxy configuration
            s/\n\s*/ - /    # Insert the required separator
            s/[Cc]ommand/:/ # Change "ProxyCommand" to "Proxy:"
            s/[Hh]ost/\0:/  # Change "Host" to "Host:"
            p               # Print the pattern space
        }
        x                   # Exchange the pattern and save spaces
        b restart           # Go to :restart
    }
} 
```

示例输出：

```
Host: ssh.foo.com - Proxy: /usr/local/bin/corkscrew proxy 8080 %h %p ~/.ssh/proxyauth
Host: foobar.org - Proxy: /usr/local/bin/corkscrew proxy 8080 %h %p ~/.ssh/proxyauth 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T12:27:41.413

一种使用方式`GNU sed`：

```
sed -nre '/^Host/h;/ProxyCommand/{H;x;s/(Host)(.*)\n +[^ ]+ /\1:\2 - Proxy: /p}' file.txt 
```

结果：

```
Host: ssh.foo.com - Proxy: /usr/local/bin/corkscrew proxy 8080 %h %p ~/.ssh/proxyauth
Host: foobar.org - Proxy: /usr/local/bin/corkscrew proxy 8080 %h %p ~/.ssh/proxyauth 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T09:49:19.473

你检查过[Net::SSH::Perl::Config](http://search.cpan.org/dist/Net-SSH-Perl/lib/Net/SSH/Perl/Config.pm)模块吗？它声称以标准`ssh`格式读取配置 - 尽管使用了一部分关键字。

> 配置文件的格式应与 ssh 命令行程序使用的格式相同；有关此格式的信息，请参见 ssh 手册页。Net::SSH::Perl::Config 理解可以存在于这些文件中的配置指令的子集；这个子集与 Net::SSH::Perl 可以支持的功能相匹配。未知的关键字将被简单地跳过。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T02:25:50.340

尝试这个：

```
#! /usr/bin/perl
use strict;
use warnings;
open FD, "DATA" || die $!;
my $line = do {local $/; <FD>};
my @a = split /Host\b/, $line;
foreach (@a) {
    if (defined $_ and /^\s*(\S+).*ProxyCommand\s+([^\n]+)/s) {
        print "$1 - Proxy: $2\n";
    }   
} 
```

# api - Haskell GHC API 中的动态编译错误

> ID：12779143
> 
> 赞同：7
> 
> 时间：2012-10-08T09:45:43.177
> 
> 标签：api, haskell, compiler-construction, ghc, dynamic-compilation

我一直在尝试按照[此处](http://www.bluishcoder.co.nz/2008/11/dynamic-compilation-and-loading-of.html)找到的教程使用 GHC API 进行一些基本的动态代码编译。

这段代码：

```
import GHC
import GHC.Paths
import DynFlags
import Unsafe.Coerce

main :: IO ()
main =
    defaultErrorHandler defaultDynFlags $ do
      func <- runGhc (Just libdir) $ do
        dflags <- getSessionDynFlags
        setSessionDynFlags dflags
        target <- guessTarget "Test.hs" Nothing
        addTarget target
        r <- load LoadAllTargets
        case r of
          Failed -> error "Compilation failed"
          Succeeded -> do
            m <- findModule (mkModuleName "Test") Nothing
            setContext [] [m]
            value <- compileExpr ("Test.print")
            do let value' = (unsafeCoerce value) :: String -> IO ()
               return value'
      func "Hello"
      return () 
```

应该从另一个名为 Test.hs 的文件中获取打印功能，加载它并运行它的打印功能。

我使用 ghc 版本 7.4.1 使用以下命令编译代码：

```
ghc -package ghc --make Api.hs 
```

但收到以下错误：

```
Api.hs:8:25:
    Couldn't match expected type `Severity' with actual type `Settings'
    Expected type: LogAction
      Actual type: Settings -> DynFlags
    In the first argument of `defaultErrorHandler', namely
      `defaultDynFlags'
    In the expression: defaultErrorHandler defaultDynFlags 
```

我究竟做错了什么？我已经检查了 GHC API 文档，但对这类事情还不够精通，无法理解其中的大部分内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T14:30:00.730

该教程已过时。在 ghc-7.0.* 和之前的版本中，类型`defaultErorHandler`为

```
defaultErrorHandler :: (ExceptionMonad m, MonadIO m) => DynFlags -> m a -> m a 
```

并且`defaultDynFlags`只是一个值。

从 ghc-7.2.* 开始，类型`defaultErrorHandler`为

```
defaultErrorHandler :: (ExceptionMonad m, MonadIO m) => LogAction -> m a -> m a 
```

`defaultDynFlags`是一个函数

```
defaultDynFlags :: Settings -> DynFlags 
```

并且`LogAction`是同义词

```
type LogAction = Severity -> SrcSpan -> PprStyle -> Message -> IO () 
```

在 7.6 中，它再次发生了变化，我们现在有了

```
defaultErrorHandler :: (ExceptionMonad m, MonadIO m) => FatalMessager -> FlushOut -> m a -> m a 
```

和

```
type FatalMessager = String -> IO () 
```

并`FlushOut`成为. `newtype`_`IO ()`

我对 GHC Api 不是很熟悉（对我来说这个目标太快了），所以我不确定工作代码应该是什么样子，但对于 7.2 和 7.4 系列，第一个参数`defaultErrorHandler`应该是`defaultLogAction`.

的类型`setContext`也发生了变化，我不知道我所拥有的是否符合您的要求，但它可以编译（使用 7.4.2；但`ghc-paths`除了模块之外，您还需要包`ghc`）`GHC.Paths`-我没有尝试过不过，运行它。

```
import GHC
import GHC.Paths
import DynFlags
import Unsafe.Coerce

main :: IO ()
main =
    defaultErrorHandler defaultLogAction $ do
      func <- runGhc (Just libdir) $ do
        dflags <- getSessionDynFlags
        setSessionDynFlags dflags
        target <- guessTarget "Test.hs" Nothing
        addTarget target
        r <- load LoadAllTargets
        case r of
          Failed -> error "Compilation failed"
          Succeeded -> do
            m <- findModule (mkModuleName "Test") Nothing
            setContext [IIModule m]
            value <- compileExpr ("Test.print")
            do let value' = (unsafeCoerce value) :: String -> IO ()
               return value'
      func "Hello"
      return () 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-22T17:02:47.123

这是动态加载的完整示例，也托管[在此处](https://gist.github.com/worldsayshi/8853946)：

## 动态负载.hs

```
-----------------------------------------------------------------------------
-- | Example for loading Haskell source code dynamically using the GHC api
-- Useful links:
-- GHC api:
-- http://www.haskell.org/ghc/docs/latest/html/libraries/ghc/GHC.html
-- Wiki:
-- http://www.haskell.org/haskellwiki/GHC/As_a_library
-----------------------------------------------------------------------------
module DynLoad where

import GHC
import GhcMonad (liftIO)
import GHC.Paths (libdir)
import Name (getOccString)
import Data.Dynamic (fromDyn)

-- |  List all exports of this module
--    and evaluate a symbol from a module DynTest 
main = 
  runGhc (Just libdir) $ do
    putString ":::Display exports of modules:::"
    modSums <- initSession ["DynLoad","DynTest"]
    let thisModSum = head modSums
    exports <- listExports thisModSum
    mapM_ putString exports

    putString ":::Evaluate a name from module DynTest:::"
    importDecl_RdrName <- parseImportDecl "import DynTest as D"
    setContext [IIDecl importDecl_RdrName]
    dynVal <- dynCompileExpr "D.aString"
    liftIO $ print $ (fromDyn dynVal "nope-nothing")

-- | Init interactive session and load modules
initSession modStrNames = do
  dflags <- getSessionDynFlags
  setSessionDynFlags $ dflags {
    hscTarget = HscInterpreted
    , ghcLink   = LinkInMemory
    }
  targets <- mapM
              (\modStrName -> do
                  putString modStrName
                  target <- guessTarget ("*"++modStrName++".hs") Nothing
                  return target
              ) modStrNames
  setTargets targets
  load LoadAllTargets
  modSums <- mapM
              (\modStrName -> do
                  putString modStrName
                  modSum <- getModSummary $ mkModuleName modStrName
                  return $ ms_mod modSum
              ) modStrNames
  return modSums

-- | List exported names of this or a sibling module
listExports mod = do
  maybeModInfo <- getModuleInfo mod
  case maybeModInfo of
    (Just modInfo) -> do
      let expNames = modInfoExports modInfo
          expStrNames = map getOccString expNames
      return expStrNames
    _ -> return []

-- | Util for printing
putString = liftIO . putStrLn 
```

这是一个要加载的示例文件：

## DynTest.hs

```
module DynTest where

aString = "Hello" 
```

# c - 在 C 中使用 ODE 时未定义的符号

> ID：12779144
> 
> 赞同：0
> 
> 时间：2012-10-08T09:45:46.663
> 
> 标签：c, xcode, macos, linker, ode-library

我正在尝试在 Xcode 4.5.1 (MacOS 10.8) 上的 C 项目中使用[ODE](http://www.ode.org)。我用了

```
./autogen.sh
./configure
make
sudo make install 
```

安装库。然后我尝试编译一个测试程序：

```
#include <stdio.h>
#include <ode/ode.h>

int main(int argc, const char * argv[]) {
    dWorldID world = dWorldCreate();
    return 0;
} 
```

我`dSINGLE` 在 Build Settings->Preprocessor Macros 和`libode.a`我的 Xcode 项目中添加了。

当我尝试构建和运行时，我得到了一堆错误，比如

> 架构 x86_64 的未定义符号：
> “std::terminate()”，引用自：
> libode.a(ode.o)
> 中的 _dJointGroupCreate libode.a(ode.o) 中的
> _dBodyCreate dxJointBall::dxJointBall(dxWorld*) 在 libode.a (ball.o)
> dxJointBall::dxJointBall(dxWorld*) 在 libode.a(ball.o)
> dxJointFixed::dxJointFixed(dxWorld*) 在 libode.a(fixed.o)
> dxJointFixed::dxJointFixed(dxWorld*) 在 libode。 a(fixed.o)
> dxJointHinge::dxJointHinge(dxWorld*) 在 libode.a(hinge.o)
> ...
> 中。
> .
> .
> .

```
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

如果我创建一个 C++ 项目而不是 C 项目，那么同样的过程可以正常工作。

我是否忘记在构建设置中添加一些内容以使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:15:08.683

Solved adding

```
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/lib/libstdc++.dylib 
```

to the Xcode project.

# php - 上传附件前发送的 PHP 邮件

> ID：12779147
> 
> 赞同：3
> 
> 时间：2012-10-08T09:46:00.547
> 
> 标签：php, email, attachment

我正在制作一个 PHP 表单，允许用户上传附件并将其发送到我的电子邮件。我一直在寻找很长时间才能做到这一点。最后，我找到了这个。[http://www.shotdev.com/php/php-mail/php-send-email-upload-form-attachment-file/](http://www.shotdev.com/php/php-mail/php-send-email-upload-form-attachment-file/)。它工作正常。但是，当我自己修改它（更改字段）时，有些事情并不顺利。

```
<?php

$location=$_POST['location'];
$name_ha=$_POST['name_ha'];
$name_person=$_POST['name_person'];
$email=$_POST['email'];
$date_sent=$_POST['date_sent'];
$date_completed=$_POST['date_completed'];
$date_received=$_POST['date_received'];

$to="admin@admin.com" . "$email";

$message="to";

//*** Uniqid Session ***//
$sid = md5(uniqid(time()));

$header = "";
$header .= "From: ".$_POST["name_ha"]."<".$_POST["email"].">\nReply-To: ".$_POST["email"]."";

$header .= "MIME-Version: 1.0\n";
$header .= "Content-Type: multipart/mixed; boundary=\"".$sid."\"\n\n";
$header .= "This is a multi-part message in MIME format.\n";

$header .= "--".$sid."\n";
$header .= "Content-type: text/html; charset=utf-8\n";
$header .= "Content-Transfer-Encoding: 7bit\n\n";
$header .= $message."\n\n";

//*** Attachment ***//
if($_FILES["fileAttach"]["name"] != "")
{
    $FilesName = $_FILES["fileAttach"]["name"];
    $Content = chunk_split(base64_encode(file_get_contents($_FILES["fileAttach"]["tmp_name"]))); 
    $header .= "--".$sid."\n";
    $header .= "Content-Type: application/octet-eam; name=\"".$FilesName."\"\n"; 
    $header .= "Content-Transfer-Encoding: base64\n";
    $header .= "Content-Disposition: attachment; filename=\"".$FilesName."\"\n\n";
    $header .= $Content."\n\n";
}

$flgSend = @mail($to,"A new file for you!",null,$header);  // @ = No Show Error //

if ($flgSend)
{
    echo "Mail sent.";
}

?> 
```

我从 shotdev.com 下载的文件和我修改的文件托管在同一台服务器上和同一文件夹下。但是，对于我修改过的那个，如果文件大小大于 1MB，则在上传附件之前发送电子邮件（大约 45% 的上传过程）。我收到的电子邮件，没有附件，也没有发件人（$name_ha）的信息。另一方面，对于在shotdev.com上下载的文件，无论多大的附件，只有在附件完全上传后才会发送电子邮件。

脚本是否有任何错误，或者缺少某些内容，导致发生这种情况？非常感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:21:49.453

首先，在您作为示例显示的代码中，此行有错误：

```
$to="admin@admin.com" . "$email"; 
```

将其更改为：

```
$to="admin@admin.com, " . "$email"; 
```

*   请注意您缺少的逗号...对于您要以特定方式添加的每封新接收者电子邮件，它都需要在那里...

我还在我的服务器上测试了代码，一切正常。
我上传了 100 mbps 并尝试了 4.5 MB 的文件，它可以工作。

因此，您的上传速度可能存在问题，并且您调用发送此电子邮件的 php 脚本的允许执行时间可能存在问题。

尝试在`<?php`您以 HTML 形式设置为 action="something.php" 的 php 文件中添加以下内容：

```
set_time_limit(0); 
```

这意味着脚本的执行时间没有限制，将 0 更改为所需的秒数...

如果有错误需要查看它们，还要在 @mail() 函数之前删除 @，隐藏它们对你没有任何好处。

编辑：

我已经更改了您的代码，以便它首先检查是否有文件，如果没有发送没有附件的邮件。如果有文件，它会检查它是否被编码为 base64 并被分割，在这种情况下，它会发送带有附件的邮件......

```
<?php

$location=$_POST['location'];
$name_ha=$_POST['name_ha'];
$name_person=$_POST['name_person'];
$email=$_POST['email'];
$date_sent=$_POST['date_sent'];
$date_completed=$_POST['date_completed'];
$date_received=$_POST['date_received'];
$FilesName = $_FILES["fileAttach"]["name"];

$to = "admin@mail.com," . "$email";

$message = "to";

$sid = md5(uniqid(time()));

$header = "";
$header .= "From: ".$_POST["name_ha"]."<".$_POST["email"].">\nReply-To: ".$_POST["email"]."";

$header .= "MIME-Version: 1.0\n";
$header .= "Content-Type: multipart/mixed; boundary=\"".$sid."\"\n\n";
$header .= "This is a multi-part message in MIME format.\n";

$header .= "--".$sid."\n";
$header .= "Content-type: text/html; charset=utf-8\n";
$header .= "Content-Transfer-Encoding: 7bit\n\n";
$header .= $message."\n\n";

if($_FILES["fileAttach"]["name"] != "") {

    $Content = chunk_split(base64_encode(file_get_contents($_FILES["fileAttach"]["tmp_name"]))); 
    $header .= "--".$sid."\n";
    $header .= "Content-Type: application/octet-stream; name=\"".$FilesName."\"\n"; 
    $header .= "Content-Transfer-Encoding: base64\n";
    $header .= "Content-Disposition: attachment; filename=\"".$FilesName."\"\n\n";
    $header .= $Content."\n\n";

}

if (strlen($FilesName) > 0) {

    if ($Content) {

        $flgSend = mail($to,"Here is that file",null,$header);

    }
    else {

        echo "problem with file...";

    }

}
else {

    $flgSend = mail($to,"Here is that file",null,$header);

}

if ($flgSend) {

    echo "Mail sent.";

}

?> 
```

**这是它的 HTML：**

```
<html>
<head>
</head>
<body>
<form method="post" action="sender.php" enctype="multipart/form-data" >
    location: <input type="text" name="location" />
    <br />
    name_ha: <input type="text" name="name_ha" />
    <br />
    name_person: <input type="text" name="name_person" />
    <br />
    email: <input type="text" name="email" />
    <br />
    date_sent: <input type="text" name="date_sent" />
    <br />
    date_completed: <input type="text" name="date_completed" />
    <br />
    date_received: <input type="text" name="date_received" />
    <br />
    file: <input type="file" name="fileAttach" />
    <br />
    <input type="submit" value="submit" />
</form>
</body>
</html> 
```

# c - 为什么此代码无法按预期工作

> ID：12779149
> 
> 赞同：0
> 
> 时间：2012-10-08T09:46:03.063
> 
> 标签：c, bit-manipulation

为什么`x_temp`不更新值，因为注释行`x &= ~(1 << i);`工作正常。哪里出错了？

```
int x = 0x4567;
int x_temp = 0x0;// = 0xF0FF;
int y = 0x0200;
int i;
for(i = 8; i < 12; i++)
{//clean clear
    x_temp = x & ~(1 << i);
    //x &= ~(1 << i); //This line works perfectly.
}
printf("x_temp = %x....\n", x_temp);//Still it retains the value 0x4567.
printf("x = %x....\n", x);
y = x|y; //y = x_temp|y;
printf("y = %x\n", y); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:50:38.113

在循环的最后一次迭代中，`i`是 11，但第 11 位`x`已经是 0，所以结果是 0x4567。我不知道你为什么期待别的东西。在 的情况下，您在 的*前一个*值中`x &= ~(1 << i)`清除了一点，而您继续为... 分配一个新值，一种情况是累积的，另一种不是。*`x``x_temp``x_temp`*

 *考虑两个循环的轨迹：

> ```
> for `x &= ~(1 << i)`, you have
> x is 0x4567 originally
> x is 0x4467 after clearing 1<<8
> x is 0x4467 after clearing 1<<9
> x is 0x4067 after clearing 1<<10
> x is 0x4067 after clearing 1<<11 
> ```
> 
> 但
> 
> ```
> for `x_temp = x & ~(1 << i)`, you have
> x is 0x4567 (originally and forever)
> x_temp is 0x4467 after clearing 1<<8 from x (which hasn't changed)
> x_temp is 0x4567 after clearing 1<<9 from x (which hasn't changed)
> x_temp is 0x4167 after clearing 1<<10 from x (which hasn't changed)
> x_temp is 0x4567, after clearing 1<<11 from x (which hasn't changed) 
> ```

也许这更清楚：假设 x = 5; 那么设置 x += 1 的循环将产生 6,7,8,9,10 的值，...但是设置 x_temp = x + 1 的循环将产生 6,6,6,6,6 的值， ...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T09:49:12.280

也许是因为您正在丢弃 ? 的旧值`x_temp`？

```
for(i = 8; i < 12; i++)
{
    x_temp = x & ~(1 << i);
} 
```

是相同的

```
x_temp = x & ~(1 << 11); 
```*

# c# - 覆盖 WndProc

> ID：12779157
> 
> 赞同：1
> 
> 时间：2012-10-08T09:46:27.717
> 
> 标签：c#, outlook-addin, wndproc

我正在使用 C#、VS 2010 和 Outlook 2010 开发 Outlook 加载项。我已经在相邻表单中编写了一个程序（它显示在 Outlook 邮件的底部）。

现在我的问题是，例如，在每个“Tab Press”上，焦点都从 AddIn Form 跳到 Outlook。我有一些文本框等，应该通过按标签来集中注意力。

现在是我覆盖 WndProc 并将所有消息发送到我的自定义表单的解决方案，但我不知道该怎么做？有没有人可以举例说明如何解决问题或更好的方法来解决问题？

致以最诚挚的问候并感谢您的回答

比利卜

# oracle - 在 oracle 中删除和截断记录所花费的时间

> ID：12779160
> 
> 赞同：0
> 
> 时间：2012-10-08T09:46:37.480
> 
> 标签：oracle, plsql, oracle9i

oracle删除和截断43GB数据需要多少时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:49:28.953

由于`TRUNCATE`它是一个 DDL 命令，它几乎可以立即完成——几乎可以肯定少于几秒钟，除非您有非常多的扩展区。当然，这假设截断表是一个有效的选项——`TRUNCATE`不能回滚，不能应用`WHERE`子句选择性地删除数据，表不能有任何外键约束等。

表中每一行需要多长时间`DELETE`很大程度上取决于您的系统。正如 Alex Poole 在评论中指出的那样，这将取决于系统负载、索引数量、触发器数量、约束数量等。

# html - windows8 Metro 应用程序中的弹出控件？

> ID：12779169
> 
> 赞同：6
> 
> 时间：2012-10-08T09:46:57.193
> 
> 标签：html, popup, microsoft-metro, winjs

我有一个 Metro 应用程序，正在尝试为我的应用程序设计登录屏幕。在这里我想设计我的登录屏幕，就像 Microsoft 登录屏幕一样。我在 XAML 中找到了 Popup 控件，但在 html 5 中没有找到。是地铁应用程序中存在任何特殊控件。我想设计我的登录页面像这样。

![在此处输入图像描述](../Images/ddb763fde610f36e94316f68594526e4.png) 谢谢你。

```
<body style="background-color:#1d3665;">
<div class="loginPage fragment">
    <header aria-label="Header content" role="banner">
        <button class="win-backbutton" aria-label="Back" disabled></button>
        <h1 class="titlearea win-type-ellipsis">
            <span class="pagetitle">Welcome to loginPage</span>
        </h1>
    </header>
    <section aria-label="Main content" role="main">
        <table style="position: absolute;background-color:skyblue;">
            <tr>
                <td><input type="text"><br/></td>
            </tr>
            <tr>
            <td>
                 <input type="password"/>
                </td>
            </tr>
        </table>
    </section>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:54:43.773

使用 WinJS.UI.Flyout 控件。它可用于确认对话框、登录、弹出窗口等。此外，您可以设置显示的位置。

> [您可以在此处](http://msdn.microsoft.com/en-us/library/windows/apps/br211726.aspx)阅读文档。这里有 [指南和清单](http://msdn.microsoft.com/en-us/library/windows/apps/hh465341.aspx)。还有一个[例子](http://code.msdn.microsoft.com/windowsapps/Flyout-sample-258757b3/view/SourceCode#content)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T13:41:11.873

JavaScript Windows 应用商店应用程序无权访问外观/行为类似于 Microsoft 帐户登录对话框的内置弹出窗口。

中有一个简单的*消息框*体验`Windows.UI.Popups.MessageBox`，但它没有添加额外控件等的能力。

根据您的经验，您正在寻找一个*模态*UI——构建它，您可以自己相对简单地构建它（只需`position: absolute`向主体添加一个元素，并使其填满屏幕——其余的元素子项/位置是完全由您控制），或者按照 Mayur 的建议，使用现有的众多帮助库之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T10:24:09.857

如果您针对 Microsoft 帐户（提供默认的 Microsoft 帐户登录框）进行身份验证，您可能需要尝试 Live SDK，它将登录到 Microsoft 帐户。如果您想创建自己的登录机制，其 UI 看起来类似于 Microsoft 帐户，您可以尝试使用 JQuery UI 插件并对其进行自定义。它有内置的弹出控件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T08:19:29.607

看看这个教程。这是非常有帮助的。

[http://www.c-sharpcorner.com/UploadFile/63f5c2/login-windows-store-apps/](http://www.c-sharpcorner.com/UploadFile/63f5c2/login-windows-store-apps/)

# python - 删除列表中的不同实例

> ID：12779172
> 
> 赞同：1
> 
> 时间：2012-10-08T09:46:58.723
> 
> 标签：python

嗨，大家好！

我有一个小问题，我无法口头解释这个问题，所以我将尝试用代码说明它：

```
class move(object):
    def __init__(self, number):
        self.number = number

list1 = [move(1), move(2), move(3), move(4)]
list2 = [move(3), move(7)]

list1.remove(list2[0])

Traceback (most recent call last):
  File "<pyshell#6>", line 1, in <module>
    list1.remove(list2[0])
ValueError: list.remove(x): x not in list 
```

如您所见，list1[2] 和 list2[0] 都派生自同一个类，并且具有完全相同的属性，它们只是该类的两个不同实例

这个问题的最佳解决方案是什么？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T09:50:00.820

你应该重写`__eq__`你的类来告诉 Python 如果它们的数量相等，两个类是相等的：

```
class move(object):
    def __init__(self, number):
        self.number = number

    def __eq__(self, other):
        return self.number == other.number 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:01:12.803

如果你关心性能，你可以使用这种情况：

```
class move(int):
    pass # you can add new attrs and methods 

list1 = [move(1), move(2), move(3), move(4)]
list2 = [move(3), move(7)]

list1.remove(list2[0])

print list1 # [1, 2, 4] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T11:32:08.820

如果您的`Move`数据类型将是不可变的，那么您最好使用`namedtuple`非常简洁的定义，并且您可以获得免费的相等实现。

```
>>> from collections import namedtuple
>>> Move = namedtuple('Move', 'number')
>>> list1 = [Move(2), Move(3), Move(7)]
>>> list2 = [Move(3), Move(7)]
>>> 
>>> list1.remove(list2[0])
>>> list1
[Move(number=2), Move(number=7)] 
```

# linux - 从 Linux 内核模块识别 glibc mmap 区域（VMA）

> ID：12779174
> 
> 赞同：0
> 
> 时间：2012-10-08T09:47:06.240
> 
> 标签：linux, memory-management, linux-kernel, mmap

我理解当分配大于 MMAP_THRESHOLD 字节的内存块时，glibc malloc() 实现使用 mmap 将内存分配为私有匿名映射，并且这个 mmap 分配区域不会作为linux vma中**[heap]的一部分。**

那么是否有任何方法可以从 linux 内核模块中识别所有 glibc mmap 区域。？

例子 ：

多次执行大于 MMAP_THRESHOLD 的 malloc 的测试程序之一显示 cat /proc/pid/maps 输出为

```
00013000-00085000 rw-p 00000000 00:00 0          [heap]
40000000-40016000 r-xp 00000000 00:0c 14107305   /lib/arm-linux-gnueabi/ld-2.13.so
4025e000-4025f000 r--p 00001000 00:0c 14107276   /lib/arm-linux-gnueabi/libdl-2.13.so
4025f000-40260000 rw-p 00002000 00:0c 14107276   /lib/arm-linux-gnueabi/libdl-2.13.so
.....
.....
40260000-40261000 ---p 00000000 00:00 0 
40261000-40a60000 rw-p 00000000 00:00 0
40a60000-40a61000 ---p 00000000 00:00 0 
40a61000-42247000 rw-p 00000000 00:00 0 
beed8000-beef9000 rw-p 00000000 00:00 0          [stack] 
```

在这几个（40a61000-42247000,40261000-40a60000）实际上是glibc mmap区域，那么从Linux内核模块有没有办法识别这些区域，比如下面的代码识别堆栈和堆？

```
if (vma->vm_start <= mm->start_brk &&
                            vma->vm_end >= mm->brk) {
        name = "[heap]";
 } else if (vma->vm_start <= mm->start_stack &&
                         vma->vm_end >= mm->start_stack) {
       name = "[stack]";
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T05:17:21.430

我相信您不应该从内核模块中转储应用程序的内存。您应该考虑使用[应用程序检查点](http://en.wikipedia.org/wiki/Application_checkpointing)，请参阅[此答案](https://stackoverflow.com/a/10018465/841108)和[伯克利检查点重启库](https://ftg.lbl.gov/projects/CheckpointRestart/)

您还可以考虑使用`core`内核中的转储工具。

# facebook - 从 URL 上传 Facebook API 照片不起作用

> ID：12779182
> 
> 赞同：0
> 
> 时间：2012-10-08T09:47:48.387
> 
> 标签：facebook, url, upload, photo

尝试通过访问令牌、album_id 或 user_id 和 URL 上传照片，但出现错误：

"(#324) 需要上传文件" "OAuthException"

我已经检查了令牌并且它是有效的。也可以从文件上传，但不能从 URL 上传。Facebook 似乎不想识别“url”参数。这很奇怪，因为前几天我发誓测试它工作正常。

还有其他人有这个问题吗？

我的代码：

```
$graph_url = "https://graph.facebook.com/ALBUM_ID/photos?access_token=TOKEN";
$postdata = http_build_query( array('message' => 'hello', 'url' => IMAGE_URL);
$opts = array('http' => array(
'method' => 'POST',
'header' =>
'Content-type: application/x-www-form-urlencoded',
'content' => $postdata));
$context  = stream_context_create($opts);
$result = json_decode(file_get_contents($graph_url, false, $context)); 
```

我也检查过，它在 FB 的图形 API 资源管理器中工作，但在使用任何 REST 客户端工具时也不起作用。

**更新：** 我通过在 http_build_query 中切换数组的顺序来使其工作，以便 URL 是第一个（或删除“消息”参数）。第二个元素总是 ingored。

谁能看到我做错了什么？为什么在这种情况下忽略第二个参数？虽然上传“有效”，但我仍然希望“消息”参数能够正常工作，以便也可以加载图像描述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:37:10.340

当您通过 URL 上传图像时，您**不能**使用 Content-type application/x-www-form-urlencoded - 这是从您的服务器完成的*真实*文件上传`source`，仅使用参数。

# python - 如何在 Heroku 云上部署 Scrapy spider

> ID：12779184
> 
> 赞同：11
> 
> 时间：2012-10-08T09:48:06.730
> 
> 标签：python, python-2.7, heroku, scrapy

我在 scrapy 中开发了一些蜘蛛，我想在 Heroku 云上测试它们。有人知道如何在 Heroku 云上部署 Scrapy 蜘蛛吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-18T21:58:44.433

是的，在 Heroku 上部署和运行 Scrapy 蜘蛛相当简单。

以下是使用真实的 Scrapy 项目作为示例的步骤：

1.  克隆项目（注意它必须有一个`requirements.txt`文件让 Heroku 将其识别为 Python 项目）：

    `git clone https://github.com/scrapinghub/testspiders.git`

2.  将 cffi 添加到 requirements.txt 文件（例如 cffi==1.1.0）。

3.  创建 Heroku 应用程序（这将添加一个新的 Heroku git 远程）：

    `heroku create`

4.  部署项目（第一次需要一段时间，当构建 slug 时）：

    `git push heroku main`

5.  运行你的蜘蛛：

    `heroku run scrapy crawl followall`

一些注意事项：

*   Heroku 磁盘是短暂的。如果您想将抓取的数据存储在一个持久的地方，您可以使用[S3 提要导出](http://doc.scrapy.org/en/latest/topics/feed-exports.html#topics-feed-storage-s3) （通过附加`-o s3://mybucket/items.jl`）或使用插件（如 MongoHQ 或 Redis To Go）并编写一个管道将您的项目存储在那里
*   在 Heroku 上运行 Scrapyd 服务器会很酷，但目前还不可能，因为该`sqlite3`模块（Scrapyd 需要）在 Heroku 上不起作用
*   如果您想要一个更复杂的解决方案来部署您的 Scrapy 蜘蛛，请考虑设置您自己的[Scrapyd 服务器](http://scrapyd.readthedocs.org/en/latest/)或使用[Scrapy Cloud等托管服务](http://scrapinghub.com/platform/)

# perl - Perl - 将指针移动到行首

> ID：12779186
> 
> 赞同：0
> 
> 时间：2012-10-08T09:48:11.783
> 
> 标签：perl, seek

我有 2 个文件。

1.  名为 input.txt 的混淆文件
2.  第二个名为 mapping.txt 的文件由键值对组成。

我想从 input.txt 中的 mapping.txt 中找到键的每次出现，并将其替换为与键对应的值。

请注意，每次成功匹配时，我都想覆盖 input.txt 中该行的内容。

我写了以下代码：

```
#! /usr/bin/perl

use strict;
use warnings;

(my $mapping,my $input)=@ARGV;

open(MAPPING,'<',$mapping) || die("couldn't read from the file, $mapping with error: $!\n");

while(<MAPPING>)
{
    chomp $_;
    my $line=$_;
    (my $key,my $value)=split("=",$line);
    open(INPUT,'+<',$input);
    while(<INPUT>)
    {
        chomp $_;
        if(index($_,$key)!=-1)
        {
            $_=~s/\Q$key/$value/g;
            # move pointer to beginning of line
           print INPUT $_."\n";
        }
    }
    close INPUT;
}
close MAPPING; 
```

代码简要概述：

1.  以读取模式打开 mapping.txt 文件。
2.  由于每一行都是一个键值对，因此将其拆分为键和值。
3.  以覆盖模式打开 input.txt 文件。
4.  检查是否在当前行中找到密钥。
5.  如果找到键，则用忽略键中任何元字符的值替换键（通过前缀 \Q）
6.  此时，文件指针将位于行尾，因为前面的语句将扫描整行以查找密钥并替换它。
7.  如果我可以将文件指针移动到行首，那么我可以覆盖：

    打印输入 $_,"\n"

8.  我尝试查找 seek 功能，但无法找到为此目的使用它的方法。

完成后，代码将关闭文件。它将从 mapping.txt 中选择下一个键值对，然后再次扫描输入文件，从开始查找匹配项并替换它们。

最重要的一点是，每次内部 while 循环都会在 input.txt 上运行，该 input.txt 是在内部 while 循环的上一次迭代中修改的。这样，任何成功的查找和替换操作都会继续保存在 input.txt 文件中。

我该怎么做呢？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T10:24:34.757

首先，您应该使用词法文件句柄，即 的三参数形式`open`，并始终检查状态以确保 an`open`已成功（就像您对映射文件而不是输入文件所做的那样）。

您建议的解决方案（在使用前倒退到行首）`print`将不起作用，因为您无法更新文件的一部分，除非您的替换数据与它正在替换的数据的大小*完全相同。*在您的情况下，这通常不是真的。

有很多解决方案，第一个也是最简单的方法是反转循环并将映射文件的读取循环放在输入文件的读取循环中。您的代码如下所示：

```
use strict;
use warnings;

my ($mapping, $input) = @ARGV;

open my $infh, '<', $input or die "Unable to open '$input': $!";

while (my $line = <$input>) {

  open my $mapfh, '<', $mapping or die "Unable to open '$mapping': $!";

  while (<$mapfh>) {
    chomp;
    my ($key, $value) = split /=/;
    $line =~ s/\Q$key/$value/g;
  }
  print $line;
} 
```

但是您的输出被发送到 STDOUT，您必须安排将输出保存到文件并适当地重命名。

这里的另一种选择是使用`-I`命令行选项，它强制文件自动重命名，并在需要时保存备份。使用bare`-I`将通过删除旧文件并重命名新输出来就地修改文件，同时给参数一个值`-I.bak`将通过追加`.bak`而不是删除旧文件来重命名旧文件。该`-I`选项仅适用于使用空运`<>`算符从 ARGV 读取的文件，并且将内置变量设置`$^I`为一个值（或空字符串`''`）具有相同的效果。代码如下所示：

```
use strict;
use warnings;

my $mapping = shift @ARGV;
$^I = '.bak';

while (my $line = <>) {

  open my $mapfh, '<', $mapping or die "Unable to open '$mapping': $!";

  while (<$mapfh>) {
    chomp;
    my ($key, $value) = split /=/;
    $line =~ s/\Q$key/$value/g;
  }
  print $line;
} 
```

第三种更简洁的替代方法是使用[`Tie::File`](https://metacpan.org/module/Tie%3a%3aFile)，它将 Perl 数组映射到文件内容，并将数组的所有修改反映回原始文件。这是一个例子：

```
use strict;
use warnings;

use Tie::File;

my ($mapping, $input) = @ARGV;
tie my @input, 'Tie::File', $input or die "Unable to open '$input': $!";

for my $line (@input) {

  open my $mapfh, '<', $mapping or die "Unable to open '$mapping': $!";

  while (<$mapfh>) {
    chomp;
    my ($key, $value) = split /=/;
    $line =~ s/\Q$key/$value/g;
  }
} 
```

最后，为每一行输入持续打开和读取映射文件是非常低效的，最好从其内容构建一个正则表达式并在整个程序中使用它。这个版本首先`%mapping`从映射文件构建一个散列，然后通过应用`quotemeta`到每个散列键以转义任何正则表达式元字符来创建一个正则表达式，然后将它们与正则表达式交替运算符连接起来`|`。键按长度降序排序，以便找到最长的匹配并将其替换为优先于较短的匹配。

```
use strict;
use warnings;

use Tie::File;

my ($mapping, $input) = @ARGV;

open my $mapfh, '<', $mapping or die "Unable to open '$mapping': $!";
my %mapping = map { chomp; /\S/ ? split /=/ : () } <$mapfh>;
my $regex = join '|', map quotemeta, sort { length $b <=> length $b } keys %mapping;

tie my @input, 'Tie::File', $input or die "Unable to open '$input': $!";

for my $line (@input) {
  $line =~ s/($regex)/$mapping{$1}/g;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:34:16.283

> 如果我可以将文件指针移动到行首，那么我可以覆盖：
> 
> ```
> print INPUT $_,"\n" 
> ```

您的前提是错误的：假设字节序列`00 01 02`和规则`01 = A1 A2`，生成的字节序列将是`00 A1 A2`而不是`00 A1 A2 02`。解决方法包括：

*   使用`Tie::File`模块。
*   一旦您的通行证完成，写入另一个文件，并将第二个文件重命名为原始文件。这可能是最有效和可扩展的。

`seek`ing 不是一个好主意：您将被限制为固定长度的替换，并且`seek`对`tell`字节而不是字符进行操作。如果你真的必须使用就地编辑，你可以使用这个循环：

```
my $beginning_of_line = tell $fh;
while (<$fh>) {
  # do processing
  seek $fh, $beginning_of_line, 0;
  # do update
} continue {$beginning_of_line = tell $fh} 
```

此外，您对输入文件进行了几次传递。假设令牌序列`a b c`和规则`b = d e`和`d = f`，您将产生序列`a f e c`或`a d e c` *取决于*规则的顺序！这可能不是你想要的。此外，请考虑规则和输入
之间的歧义。这会产生或吗？`a = c``a b = d``a b``c b``d`

# lucene - 无法使用“facets”查询中提供的“exclude” words 选项过滤掉 n shingle(n - gram) facets

> ID：12779187
> 
> 赞同：0
> 
> 时间：2012-10-08T09:48:11.717
> 
> 标签：lucene, elasticsearch, faceted-search, tag-cloud

我正在尝试使用 elasticsearch 的 facets 功能制作单词和短语的标签云。

我的映射：

```
curl -XPOST http://localhost:9200/myIndex/ -d '{

  ...

  "analysis":{  
    "filter":{ 
      "myCustomShingle":{
        "type":"shingle",
        "max_shingle_size":3,
        "output_unigrams":true
      }
    },
    "analyzer":{ //making a custom analyzer
      "myAnalyzer":{
        "type":"custom",
        "tokenizer":"standard",
        "filter":[
          "lowercase",
          "myCustomShingle",
          "stop"
        ]
      } 
    }
  }

  ...
},
"mappings":{

   ...

   "description":{ //the field to be analyzed for making the tag cloud
     "type":"string",
     "analyzer":"myAnalyzer",
     "null_value" : "null"
   },

   ...

} 
```

生成构面的查询：

```
curl -X POST "http://localhost:9200/myIndex/myType/_search?&pretty=true" -d '
{
  "size":"0",

  "query": {
    match_all:{}
  },

  "facets": {
    "blah": {
      "terms": {
        "fields" :     ["description"],
        "exclude" : [ 'evil' ], //remove facets that contain these words
        "size": "50"
      }
    }
  }
} 
```

我的问题是，当我在“facets”的“exclude”选项中插入一个单词说“evil”时，它成功地删除了包含匹配“evil”的单词（或单个[shingles ）的构面。](http://www.elasticsearch.org/guide/reference/index-modules/analysis/shingle-tokenfilter.html)但它不会删除 2/3 单词 shingles，“生化危机”，“邪恶的计算机”，“我的邪恶猫”。如何删除包含“排除词”的短语的方面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:25:50.473

It isn't completely clear what you want to achieve. You usually wouldn't make facets on analyzed fields. Maybe you could explain why you're making shingles so that we can help achieving what you want in a better way.

With the exclude facet parameter you can exclude some specific entry, but `evil` is not the same as `resident evil`. If you want to exclude it you need to specify it. Facets are made based on indexed terms, and `resident evil` is in fact a single term in the index, which is not the same as the term `evil`.

Given the choice that you already made for indexing and faceting, there is a way to achieve what you want. Elasticsearch has a really powerful scripting module. You can use a script to decide whether each entry should be included in the facet or not like this:

```
{
  "query": {
    "match_all" : {}
  },
  "facets": {
    "tags": {
      "terms": {
        "field" : "tags",
        "script" : "term.contains('evil') ? true : false"
      }
    }
  }
} 
```

# codeigniter - codeigniter 会话过期

> ID：12779188
> 
> 赞同：0
> 
> 时间：2012-10-08T09:48:12.800
> 
> 标签：codeigniter, session, lifetime

我遇到了一个我无法解决的 codeigniter 会话问题。即使我的到期时间设置为“无限”，我的会话也总是会到期。我尝试将过期时间设置为 0 以及一个较高的数字，例如 604800（一周）。

目前我的变量如下所示：

```
$config['sess_cookie_name'] = 'ci_session';
$config['sess_expiration']  = 604800;
$config['sess_expire_on_close'] = FALSE;
$config['sess_encrypt_cookie']  = FALSE;
$config['sess_use_database']    = TRUE;
$config['sess_table_name']  = 'ci_sessions';
$config['sess_match_ip']    = FALSE;
$config['sess_match_useragent'] = FALSE;
$config['sess_time_to_update']  = 300; 
```

我尝试了很多不同的组合和几个不同的库，但我似乎无法找到解决问题的方法。我是否必须更改`gc_maxlifetime`我的 php.ini 文件才能使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T05:14:54.913

**`config.php`请在您的文件中将这两个设置从 TRUE 更改为 FALSE**

```
$config['sess_use_database'] = TRUE;
$config['sess_encrypt_cookie'] = TRUE; 
```

# jenkins - 在詹金斯重命名工作

> ID：12779189
> 
> 赞同：39
> 
> 时间：2012-10-08T09:48:18.177
> 
> 标签：jenkins

如何在詹金斯重命名工作？除了创造新工作并摧毁旧工作之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2019-02-06T08:47:10.087

在 Jenkins v2 中，在仪表板或作业概览中，单击作业上的右键并选择重命名：

[![在此处输入图像描述](../Images/e023ea7297e8467bcb723fb9229c5137.png)](https://i.stack.imgur.com/37AX5.png)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-10-08T09:52:18.720

在我们正在运行的版本（1.480）中，只需更改菜单`Project name`中的`Configure`，然后点击保存即可。

干杯，

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-08-07T12:56:53.787

在 New Jenkins 中，单击左侧导航窗格中的重命名链接，更新作业名称并单击保存。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-04-19T15:38:30.700

只需更改管道/项目名称中的名称并点击保存。

请注意，如果您的浏览器窗口不够宽，下面的“弹出窗口”将不在屏幕上，因此请确保您向下滚动，否则您的工作可能会神秘地不重命名。

```
"Are you sure about renaming old-job to new-job?" 
```

# image-processing - 带有卡方内核的线性 svm 与 rbf 内核

> ID：12779190
> 
> 赞同：2
> 
> 时间：2012-10-08T09:48:20.037
> 
> 标签：image-processing, computer-vision, svm, libsvm, pattern-recognition

我有一个大约 2000 维的特征向量。都是直方图特征。

我不知道在我的情况下哪个有效：将 SVM 与 RBF 内核或卡方内核一起应用？

您能否建议我在我的情况下使用有效的内核？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T18:43:58.180

一般来说，卡方和交叉核最适合直方图风格的特征向量。但是，结果通常会因数据、直方图归一化、内核参数等而有所不同。因此，选择内核类型以及 SVM 和内核参数的最佳方法是使用交叉验证凭经验进行。

此外，仅供参考，仅当内核是线性的时，支持向量机才是线性的。使用卡方、交集、RBF 和多项式内核，支持向量机将不再是线性的。

# c - 如果将所有数据都放入内存，那么执行“SELECT ...WHERE ...”的最快方法是什么？

> ID：12779192
> 
> 赞同：0
> 
> 时间：2012-10-08T09:48:22.510
> 
> 标签：c, algorithm, memory

如果所有数据都放入内存，这意味着媒体速度要快得多，那么执行“SELECT .. WHERE ..”查询（过滤数据）的最快方法是什么？到目前为止，我脑海中的选项：

1) b 树状算法，但可能仍需要索引和更大的空间

2）固定长度数组，尺寸更小但可能更慢。

如果速度和大小都是问题，还有其他更好的方法吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:44:31.247

**这取决于**您的具体情况 - 您需要快速进行哪些操作，确切的大小是多少等等。一些例子：

1.  对于`AND`查询，通常维护一组排序列表（每个特征的列表）。这种数据结构称为**[倒排索引](http://en.wikipedia.org/wiki/Inverted_index)**，搜索引擎经常使用它从给定查询中获取相关文档。（例如，Apache Lucene 使用这种数据结构）。
2.  如果可以使用**数组- 并且需要对数据进行迭代 - 这是一种非常有效的方法，因为数组基本上是**[缓存](http://en.wikipedia.org/wiki/CPU_cache)效率最高的数据结构。在大多数情况下，从数组中顺序读取比任何其他 DS 都要快得多，因为它可以让您获得最少的“命中未命中”，这通常是迭代数据时的瓶颈。
3.  例如，如果您的数据是字符串，并且您将使用为字符串设计的数据结构（例如**[trie](http://en.wikipedia.org/wiki/Trie)或[基数树](http://en.wikipedia.org/wiki/Radix_tree)**）根据某些字符串属性（例如前缀）进行过滤- 可能会为您带来最佳性能。

**底线**：如果你打算做一些定制的事情来提高默认库的性能，你应该在设计你选择的数据结构之前考虑具体的问题细节。

# sql - 使用变量创建 SQL 参数

> ID：12779194
> 
> 赞同：0
> 
> 时间：2012-10-08T09:48:33.157
> 
> 标签：sql, vb.net

我有一个循环，它从文本框和下拉列表中获取值并使用它们来更新 SQL 表。我需要能够重命名参数并根据循环计数的变量为它们赋值。示例：如果循环从 0 变为 2，则 textname_0 将转到 @paramname_0，而 textname_1 将转到 @paramname_1，依此类推。

我已经编写了下面的代码，但它会生成一个错误，提示找不到第一个参数，因此语法显然是错误的。

```
 Protected Sub Insert_To_Tables()

    Try

        Dim con As SqlConnection = New SqlConnection()
        Dim connectionString As String = "Data Source=wolf;Initial Catalog=Seat_Planner_2013;Integrated Security=True;Integrated Security=True"
        Using cn As New SqlConnection(connectionString)

            For i As Int32 = 0 To number_of_tickets_Ddl.SelectedValue

                cn.Open()
                Dim cmd As New SqlCommand()
                cmd.CommandText = "INSERT INTO tables ([table_num], [seat], [available], [ticket_num], [seat_title], [seat_firstname], [seat_surname], [booking_ref],[booked_by]) VALUES (@table_num_ & i, @seat_ & i, @available_ & i, @ticket_num_ & i, @seat_title_ & i, @seat_firstname_ & i, @seat_surname_ & i, @booking_ref, @booked_by) WHERE ([table_num] = @table_num) AND ([seat] = @seat_ & i)"

                cmd.Parameters.Add("@table_num", SqlDbType.SmallInt).Value = ddltable.SelectedValue
                cmd.Parameters.Add("@seat_" & i, SqlDbType.NChar).Value = CType(Me.FindControl(("DDLSeat_") & i), DropDownList).SelectedValue
                cmd.Parameters.Add("@available", SqlDbType.NChar).Value = "No"
                cmd.Parameters.Add("@ticket_num_" & i, SqlDbType.NChar).Value = CType(Me.FindControl(("TicketNo_TextBox_") & i), TextBox).Text.Trim
                cmd.Parameters.Add("@seat_title_" & i, SqlDbType.NChar).Value = CType(Me.FindControl(("Title_TextBox_") & i), TextBox).Text.Trim
                cmd.Parameters.Add("@seat_firstname_" & i, SqlDbType.NChar).Value = CType(Me.FindControl(("FirstName_TextBox_") & i), TextBox).Text.Trim
                cmd.Parameters.Add("@seat_surname_" & i, SqlDbType.NChar).Value = CType(Me.FindControl(("Surname_TextBox_") & i), TextBox).Text.Trim
                cmd.Parameters.Add("@booking_ref", SqlDbType.NChar).Value = booking_ref_LBL.Text
                cmd.Parameters.Add("@booked_by", SqlDbType.NChar).Value = CType(Me.FindControl(("TBoxFull_name_0")), TextBox).Text.Trim

                cmd.Connection = cn
                cmd.ExecuteNonQuery()
                cn.Close()

            Next

        End Using

        DB_error1.Text = " Insert to tables success. "

    Catch ex As Exception

        DB_error1.Text = "Fail "
        DB_error1.Text = DB_error1.Text + ex.Message.ToString
    Finally

    End Try 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:57:33.507

SQL 没有动态参数名称——它们是固定的。例如 - 您`@table_num`在 SQL 查询 ( `CommandText`) 中有一个参数。此外，您`& i` **在 string 内部**，使此**无效 SQL**。

只需使用`(@table_num, @seat, @available, ...`

添加的参数**必须与**这些名称匹配，因此在 SQL 中或添加参数时进行连接是*错误的。*

只需删除连接，事情就会如您所愿。

* * *

为了提高效率，我建议您阅读[表值参数](http://msdn.microsoft.com/en-us/library/bb510489.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:09:02.400

1.  检查你的`cmd.CommandText`，你应该把变量`i`去掉引号。

2.  您还将参数名称设置为，`@table_num`但您想像使用它一样使用它`@table_num_1`

    cmd.Parameters.Add( **"@table_num"** , SqlDbType.SmallInt).Value = ddltable.SelectedValue

    cmd.CommandText = ...VALUES ( **@table_num_ & i** , ...

    与`@available`参数相同

您会看到参数名称不一样，因此当您修复这两个问题时，其他部分似乎还可以。

# android - 在共享首选项 GCM 上存储注册 ID

> ID：12779195
> 
> 赞同：2
> 
> 时间：2012-10-08T09:48:40.357
> 
> 标签：android, google-cloud-messaging

我正在尝试集成`GCM`到我的应用程序中。我在很多地方读到`onRegistered()`，我们应该存储`regId`共享首选项。谁能告诉我，为什么需要将 ID 存储在共享首选项中。我看到了`GCMRegistrar.java`代码，在内部它正在执行这种机制。那么为什么需要手动将 ID 存储在共享首选项中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T11:56:55.587

您不需要将其保存在 sharedPreference 中。使用以下行

```
final String regId = GCMRegistrar.getRegistrationId(getApplicationContext());
if (regId.equals("")) {
      GCMRegistrar.register(this,SENDER_ID);
 } else {
        //Already registered
 } 
```

如果注册ID为空，您可以去注册..

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T07:43:33.123

此方法用于每次不注册设备。

1.  如果您使用 gcm-client.jar，则无需担心。这是在这个 jar 文件中实现的。
2.  如果你想自己实现它，那么你可以

    *   使用 SharedPreferences 保存 registrationId 或将其保存在数据库或文件系统等上。
    *   不是每次都保存registrationId和注册设备。但是，这不是一个好的设计选择，因为它需要在应用程序启动时再进行一次迭代（从google获取注册id）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-11T09:22:00.057

这很简单。不要让它变得复杂。由于您的设备注册了 GSM，它不会自动收到通知。您必须在需要您的注册 ID 的第三方服务器上注册您的设备。

由于 id 存储在 pref 中，它不会一次又一次地注册设备。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T08:20:24.977

这是一种设计选择。您可能希望将其存储在`SharedPreferences`、文件或 SQLite 数据库中。这实际上取决于应用程序以及您尝试使用它完成的任务。

至于为什么`GCMRegistrar.java`示例存储它`SharedPreferences`- 我认为它已经完成，因为在更新应用程序时需要使本地存储的设备 ID 无效/删除，这很容易通过删除保存在设备上的原始数据来完成。比查询数据库或通过`rmfile()`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-11T09:26:21.777

我认为您必须自己注册它才能在将来使用它，例如与指定您的 regID 的推送服务器通信。

# git - 如何处理 git 存储库的元存储库？

> ID：12779197
> 
> 赞同：6
> 
> 时间：2012-10-08T09:48:48.010
> 
> 标签：git

给定项目目录中的 git 存储库树，例如

```
Projects/
+A/
|+.git/
+B/
|+.git 
```

我想建立一个 git 存储库`Projects.git`，它不跟踪项目的内容，而只跟踪它们的存在和状态。克隆此存储库的人应该只有一个未克隆存储库等的骨架`A`，`B`并单独激活它们是否保持同步。典型的工作流程如下所示：

*   第一次设置：`git clone server:Projects.git`
*   激活项目`A`，它也会克隆它
*   现在每个`git-push/pull`，无论它是否在`Projects/`或`Projects/A`应该更新两者`A.git` *和* `Projects.git`的信息`A`。任何相关的东西都`B`应该被忽略，因为它是非活动的并且在本地是空的
*   激活项目`B`，克隆它
*   现在 any `git-push/pull`in也应该在and`Projects`中这样做，而 push/pull in不应该影响`A``B``A``B`
*   停用项目`A`，（验证后`A.git`不需要 a `git-push`）清空本地目录`A`，不影响`Project.git`

怎样才能得到最好的治疗？我目前的方法是一些钩子魔术，但我对[git 子模块](http://git-scm.com/book/en/Git-Tools-Submodules)不够熟悉，看是否可以通过子模块来实现，或者我是否需要使用其他解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-08-08T00:54:08.493

“元”工具对此非常有用。

你可以在 npm 上找到它：[https ://www.npmjs.com/package/meta](https://www.npmjs.com/package/meta)

您可以使用它一次克隆一个元存储库和所有子存储库，这很棒。

然后，您可以使用它对所有子存储库应用操作，例如拉取您的元存储库和所有子存储库：

```
cd my-repo
meta git pull 
```

这里有一篇文章可以帮助您开始使用“元”： [https ://medium.com/@patrickleet/mono-repo-or-multi-repo-why-choose-one-when-you-can-have-两者-e9c77bd0c668](https://medium.com/@patrickleet/mono-repo-or-multi-repo-why-choose-one-when-you-can-have-both-e9c77bd0c668)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T10:32:10.573

这确实是[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)的用途：
跟踪每个子存储库的确切配置（即确切的提交 SHA1）。

如“[如何在一行中对所有子模块进行 git clone --recursive 和 checkout master？](https://stackoverflow.com/questions/6474847/how-do-i-git-clone-recursive-and-checkout-master-on-all-submodules-in-a-single) ”中的详细说明，您可以在一个命令中克隆您的父 repo 及其所有子模块。

如“[子模块的真实性质](https://stackoverflow.com/questions/1979167/git-submodule-update/1979194#1979194)”中所述，您可以修改它们，前提是您意识到每个模块都处于[DETACHED HEAD](https://stackoverflow.com/questions/3965676/why-did-git-detach-my-head/3965714#3965714)模式（您需要先签出本地分支），并且您需要先提交并推送子模块，在返回父仓库之前，提交并推送到那里（记录新的配置，即新的子模块 SHA1）

您可以删除子模块目录，而不会损坏对该子模块的父 repo 引用。

* * *

[OP Tobias Kienzler](https://stackoverflow.com/users/321973/tobias-kienzler) [评论](https://stackoverflow.com/questions/12779197/how-to-treat-a-meta-repository-of-git-repositories/12779920#comment17276742_12779920)：

这听起来有点像我想要的，但在这种情况下，分离的头是相当无用的——当我克隆一个子模块时，它应该在它的主头上。
基本上，我正在寻找一种方法来获得所有可用项目的本地索引，而不必单独克隆它们，以及“同步当前克隆的所有项目”一体化命令。

我[建议](https://stackoverflow.com/questions/12779197/how-to-treat-a-meta-repository-of-git-repositories/12779920#comment17277767_12779920)看看[**git-slave**](http://gitslave.sourceforge.net/)：

> Gitslave 创建了一组相关的存储库——一个超级项目存储库和多个从属存储库——所有这些存储库都是同时开发的，并且所有 git 操作都应该在这些存储库上正常运行；
> 所以当你分支时，项目中的每个仓库都会依次分支。
> 同样，当您提交、推送、拉取、合并、标记、签出、状态、日志等时；每个 git 命令将依次在超级项目和所有从存储库上运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-28T08:27:29.323

为什么不使用 git 已经提供的东西：

> git submodule [--quiet] foreach [--recursive]

```
git submodule foreach git checkout develop
git submodule foreach git commit
git submodule foreach git push 
```

# javascript - 添加信息后文本输入不改变

> ID：12779204
> 
> 赞同：0
> 
> 时间：2012-10-08T09:49:10.550
> 
> 标签：javascript, jquery, html

我有一个你可以在下面使用的应用程序，但基本上它是一个文本输入，在用户从一行添加信息后不会改变。

这是应用程序：

[应用](http://helios.hud.ac.uk/u0867587/Mobile_app/QandATable2.php)

请按照以下步骤操作：

1：当你打开应用程序时，你会看到一个“添加问题”按钮，点击这个按钮，你会看到下面附加了一个表格行。

2：在附加的行中，单击按钮“B”和“C”，这些按钮将变为绿色，表示它们已打开，在下方您将看到 2 个文本输入显示您已打开的按钮的值。

3：您将在行的左侧看到一个绿色的加号按钮。请单击此按钮，您将看到一个模式窗口出现。

4：您将在模态窗口中看到一个搜索栏，在搜索栏中输入“狗”，然后单击搜索按钮。

5：将出现与您的搜索相关的一行，请点击右侧的“添加”按钮添加信息。

6：您将在附加行中看到，现在按钮“A”已突出显示，而其他按钮已关闭。

但问题是下面的文本输入并没有改变。IT 仍然显示值“B”和“C”的文本输入，这是不正确的，因为按钮“A”已打开并且是唯一打开的按钮，它应该只显示为按钮“A”的文本输入，另一个应删除文本输入。

所以我的问题是，在用户从模式窗口添加信息之后，它如何将文本输入更改为仅显示打开的按钮的值？

以下是更新答案按钮的代码：

```
 updateAnswer(context , iQuestionIndex, bDisableAppend);

    var container = $btn.closest(".optionAndAnswer");
    $(".answertxt", container).val( $(".answerBtnsOn", container).length );

    return false;
}

function updateAnswer(context, iQuestionIndex, bDisableAppend) {
    var _sCurrQ_Class = 'q_' + iQuestionIndex;
    var _oCurrAnswerContainer = jQuery('#answer_selections .' + _sCurrQ_Class);
    if (!_oCurrAnswerContainer.length) {
        _oCurrAnswerContainer = jQuery(document.createElement('div')).addClass(_sCurrQ_Class);
        !bDisableAppend && jQuery('#answer_selections').append(_oCurrAnswerContainer);
    }

    _oCurrAnswerContainer.html('');

    var value, id;
    // loop through all buttons with 'on' status and their info to the current answer container
    $('.answerBtnsOn', context).each(function(i, btn) {

        var $btn = $(btn);
        value = btn.value;
        id = $btn.attr('id');

        var n = $("input[name='" + id + "value']").length;
        var hid = "hidden" + id + n + "value";    
        $(btn).attr("data-hid", hid);

        if (!bDisableAppend) {
            // append those values to the form
            var input = '<input type="text" id="' + hid + '" value="' + value + '" name="' + id + 'value" />';
            _oCurrAnswerContainer.append(input);
        }
    });        
} 
```

下面是它控制模态窗口及其中所有内容的代码：

函数添加窗口（btn）{

```
 var answers = $.map(btn.split(''),function(chr){   return "#answer"+chr;  }).join(', 
    var answersrow = $.map(btn.split(''),function(chr){   return "#answer"+chr+"Row";  }).join(', ');
}

    if($(plusbutton_clicked).attr('id')=='mainPlusbutton') { //green plus button at top of application

        $('#answerSection').find('.answerBtnsOn').removeClass('answerBtnsOn').addClass('answerBtnsOff');
        $(answers).addClass("answerBtnsOn").siblings().addClass('answerBtnsOff');

        } else { 
//green plus button within an appended row
            $(plusbutton_clicked).closest('tr').find('.answerBtnsOn').removeClass('answerBtnsOn').addClass('answerBtnsOff');
            $(plusbutton_clicked).closest('tr').find(answersrow).addClass("answerBtnsOn").siblings().addClass('answerBtnsOff');

            }

    $.modal.close(); 
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:09:40.433

正如我在评论中提到的，用于`updateAnswer`更新文本输入。

您需要发送包含该答案的所有按钮的节点。在`addwindow`我认为应该是`$(plusbutton_clicked).closest('tr')`。您还需要以某种方式发送问题索引。

[如果您将一些数据属性](http://html5doctor.com/html5-custom-data-attributes/)附加到某些元素以简化检索各种值而不是为每个值创建类，这可能会更容易。

# c - 找到曲线上一点到点的最小距离的最快方法

> ID：12779210
> 
> 赞同：7
> 
> 时间：2012-10-08T09:49:25.127
> 
> 标签：c, algorithm, geometry

我正在寻找以下问题的快速解决方案：

![最小距离问题图解](../Images/a37f8bde969b633e27ab049f475ffd93.png)

我有一个固定点（比如说白色测量线上的右上角），需要在由等距点（下曲线）组成的曲线上找到最近的点。此外，我对上曲线上的每个点执行此操作，以绘制具有不同颜色的曲线之间的距离（三个级别：低于最小值 [红色]、最小值和最大值之间 [橙色] 以及高于最大值 [绿色]）。

我目前的解决方案是权衡：我取固定点，遍历任意间隔（例如，固定点左右各 50 个单位）并计算每对的距离。这节省了一些 CPU 功率，但它既不优雅也不准确，因为我可能会错过我选择的间隔之外的最小距离。

有更快算法的建议吗？

编辑：等间距意味着所有点在 x 轴上的距离相同，这对于两条曲线都是如此。我也不需要在点之间进行插值，这太耗时了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T10:29:43.173

您可以迭代直到“超出范围”，而不是任意距离。

在您的示例中，假设您从直线右上角的上曲线上的点开始。然后垂直向下下降，你会得到（在我看来）大约 200 微米的距离。

现在您可以从这里测试点向右移动，直到*水平*距离为 200um。除此之外，不可能达到小于 200 微米的距离。

向左移动，距离下降，直到找到 150 微米的最小值，然后再次开始上升。一旦你在你的上点左侧 150 微米，再一次，你不可能超过你找到的最小值。

如果您先向左走，则不必向右走那么远，因此优化要么遵循距离下降的方向，要么同时从中间向两个方向进行计算。

我不知道 um 50 单位是多少，所以这可能比你所拥有的要慢或快。不过，它确实避免了丢失较低值的风险。

由于您正在对较低曲线上的同一组点进行大量测试，因此您可以通过忽略这些点完全形成曲线的事实来改进这一点。将它们全部粘贴在 kd 树或类似树中，然后反复搜索。这称为[最近邻搜索](https://en.wikipedia.org/wiki/Nearest_neighbor_search)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T11:29:59.733

将这个问题识别为[最近邻搜索](http://www.cs.sunysb.edu/~algorith/files/nearest-neighbor.shtml)问题可能会有所帮助。该链接包含有关用于此的各种算法的很好的讨论。如果您可以使用 C++ 而不是直接使用 C，那么[ANN](http://www.cs.umd.edu/~mount/ANN/)看起来是一个很好的库。

看起来这个问题以前也有人[问过](https://stackoverflow.com/questions/4509798/finding-nearest-point-in-an-efficient-way)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T10:45:39.177

我们可以标记顶部曲线 y=t(x) 和底部曲线 y=b(x)。标记最接近的函数 x_b=c(x_t)。我们知道最近函数是弱单调非递减的，因为两条最短路径永远不会相互交叉。

如果您知道距离函数 d(x_t,x_b) 对于每个固定的 x_t 只有一个局部最小值（如果曲线“足够平滑”就会发生这种情况），那么您可以通过“走”曲线来节省时间：

```
- start with x_t=0, x_b=0
- while x_t <= x_max
-- find the closest x_b by local search
     (increment x_b while the distance is decreasing)
-- add {x_t, x_b} to the result set
-- increment x_t 
```

如果您希望 x_b 足够平滑，但您不能假设并且想要一个准确的结果，

沿两个方向走曲线。在结果一致的地方，它们是正确的。在他们不同意的地方，在两个结果（最左边和最右边的局部最大值）之间运行一个完整的搜索。以这样的顺序（二进制除法）对“模糊块”进行采样，以允许由于单调性而进行最多的修剪。

作为中间立场：

沿两个方向走曲线。如果结果不一致，请在两者中选择。如果您可以保证每个固定 x_t 最多有两个局部最大值，则这会产生最佳解决方案。仍然存在一些未找到最佳解决方案的病理情况，并且包含一个局部最小值，该局部最小值两侧是其他两个比这个更差的局部最小值。我敢说，很难找到解决方案远非最优的情况（假设平滑 y=b(x)）。

# java - JR报告不显示数据

> ID：12779211
> 
> 赞同：1
> 
> 时间：2012-10-08T09:49:29.440
> 
> 标签：java, jasper-reports

我编写了这段代码来使用*iReport 4.7.1*显示一个简单的报告。

```
 private void printReport() {
    try {
        JRTableModelDataSource dataSource = new JRTableModelDataSource(
                new JTable().getModel());

        String reportSource = "C:\\Reports\\report1.jrxml";
        Map<String, Object> params = new HashMap<String, Object>();

        params.put("Name", "SriLanka");

        JasperReport jasperReport = JasperCompileManager.compileReport(reportSource);
        JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, params, dataSource);
        JasperViewer.viewReport(jasperPrint, false);
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

这是我的图书馆：

*   commons-beanutils-1.8.0.jar
*   commons-collections-2.1.1.jar
*   commons-digester-2.1.jar
*   commons-logging-1.1.1.jar
*   jasperrreports-4.7.1.jar
*   jasperreports-applet-4.7.1.jar
*   jasperreports-javaflow-4.7.1.jar
*   groovy-all-1.7.5.jar

NetBeans*输出*显示此警告

> 2012 年 10 月 8 日下午 2:57:31 net.sf.jasperreports.engine.component.ComponentsEnvironment findBundles 警告：找到命名空间[http://jasperreports.sourceforge.net/jasperreports/components的两个组件](http://jasperreports.sourceforge.net/jasperreports/components)

这是*.jrxml*文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report1" language="groovy" pageWidth="595" pageHeight="842" whenNoDataType="BlankPage" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="5174594e-de3c-4b09-932b-c6665bf6a34b">
    <parameter name="Name" class="java.lang.String" isForPrompting="false"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="79" splitType="Stretch">
            <textField>
                <reportElement uuid="fd02a8bc-548b-41c1-aed5-2a7c2e257704" x="210" y="23" width="157" height="36"/>
                <textElement>
                    <font size="18"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{Name}]]></textFieldExpression>
            </textField>
        </band>
    </title>
    <pageHeader>
        <band height="35" splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band height="61" splitType="Stretch"/>
    </columnHeader>
    <detail>
        <band height="125" splitType="Stretch"/>
    </detail>
    <columnFooter>
        <band height="45" splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band height="54" splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band height="42" splitType="Stretch"/>
    </summary>
</jasperReport> 
```

报告打开但不显示任何文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T07:18:24.067

To solve this problem you should:

1.  check your datasource, it can be empty;
2.  add *textFields* elements with fields expressions (*`<textFieldExpression><![CDATA[$F{field}]]></textFieldExpression>`*) to the *Detail* band to show records in report.

Anyway your parameter ***Name*** should be displayed in the *Title* band (in generated report). You can pass even the ***JREmptyDataSource*** to check this.

* * *

For showing data you can chose one of this ways:

### 1\. Using *Detail* band

It is classical, "old school" method for showing data stored in records from the data source. The *JR* engine iterates through the data source for rendering this section. With help of *textField* elements we can show the fields values.

*The sample*: look at `$jasperreports$\demo\samples\jasper` sample from *JR* [distribution package](http://sourceforge.net/projects/jasperreports/files/jasperreports/JasperReports%204.7.0/jasperreports-4.7.0-project.zip/download).

### 2\. Using *Crosstab* component

The *Crosstab* component used for summarizing data into grid which has two dimensions.

The sample: look at `$jasperreports$\demo\samples\crosstabs` sample.

### 3\. Using *List* component

The *List* component iterates on set of its records (defined with help of ***subDataset*** property).

*The sample*: look at [Using the Built-in List Component sample](http://jasperreports.sourceforge.net/sample.reference/list/index.html#list).

### 4\. Using *Table* component

The *Table* is using for showing data with tabular structure. As a *List* component has its own ***subDataset***.

*The sample*: look at [Using the Built-in Table Component sample](http://jasperreports.sourceforge.net/sample.reference/table/index.html#table).

### 4\. Using *Subreport* component

The *Subreport* is using for building complex reports such as compilation of different reports in one. This component often operates with subqueries.

*The sample*: look at [Subreports sample](http://jasperreports.sourceforge.net/sample.reference/subreport/index.html#subreports).

* * *

You can read details in [JasperReports Ultimate Guide](http://jasperreports.sourceforge.net/JasperReports-Ultimate-Guide-3.pdf)

# python - 编辑最后一列的数据

> ID：12779212
> 
> 赞同：-4
> 
> 时间：2012-10-08T09:49:32.043
> 
> 标签：python, perl, bash, shell

我有一个数据文件（制表符分隔），如下所示：

```
chr1    38045559    38046059    chr1:38045559-38046559_NM_001142726_C1orf122_+,chr1:38045559-38046559_NM_198446_C1orf122_+,chr1:38045952-38046952_NM_024640_YRDC_-
chr1    205291045   205291545   chr1:205290545-205291545_NM_018566_YOD1_-
chr1    1499717 1500625 chr1:1499625-1500625_NM_014188_SSU72_-
chr1    1679941 1680441 chr1:1679441-1680441_NM_001198995_NADK_-
chr1    1699769 1700657 chr1:1699269-1700269_NM_023018_NADK_-,chr1:1699657-1700657_NM_001198993_NADK_-
chr1    1701368 1701868 chr1:1700868-1701868_NM_001198994_NADK_-
chr1    1812386 1812886 chr1:1811886-1812886_NM_002074_GNB1_-
chr1    2066155 2066655 
chr1    2149493 2149993 chr1:2149493-2150493_NM_003036_SKI_+
chr1    2312573 2313353 chr1:2312353-2313353_NM_024848_MORN1_-,chr1:2312573-2313573_NM_007033_RER1_+ 
```

在哪里：

*   前三列是坐标和
*   最后一列包含一组零个或多个注释记录
    *   每个注释记录由逗号分隔
    *   注释记录中的字段由下划线或冒号分隔

我想要的是从每个注释记录中获取前三列和第五个字段。例如对于第 1 行，输出应该是这样的

```
chr1    38045559    38046059   C1orf122
                               C1orf122
                               YRDC 
```

我所做的是，我已经根据逗号“，”分割了最后一列中的数据

使用`tr ',' '\t' <input>temp1`

现在我拥有的是一个看起来像这样的文件

```
chr1    38045559    38046059    chr1:38045559-38046559_NM_001142726_C1orf122_+  chr1:38045559-38046559_NM_198446_C1orf122_+ chr1:38045952-38046952_NM_024640_YRDC_-
chr1    205291045   205291545   chr1:205290545-205291545_NM_018566_YOD1_-
chr1    1499717 1500625 chr1:1499625-1500625_NM_014188_SSU72_-
chr1    1679941 1680441 chr1:1679441-1680441_NM_001198995_NADK_-
chr1    1699769 1700657 chr1:1699269-1700269_NM_023018_NADK_-   chr1:1699657-1700657_NM_001198993_NADK_-
chr1    1701368 1701868 chr1:1700868-1701868_NM_001198994_NADK_-
chr1    1812386 1812886 chr1:1811886-1812886_NM_002074_GNB1_-
chr1    2066155 2066655 
chr1    2149493 2149993 chr1:2149493-2150493_NM_003036_SKI_+
chr1    2312573 2313353 chr1:2312353-2313353_NM_024848_MORN1_-  chr1:2312573-2313573_NM_007033_RER1_+ 
```

现在，我需要您的一些专业知识来让我获得所需的输出格式。

请指导我在 python/perl/shell 中获得所需的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:07:55.330

我建议这个解决方案，它期望输入文件作为命令行上的参数

```
use strict;
use warnings;

while (<>) {
  chomp;
  my @columns = split "\t";

  print join "\t", @columns[0, 1, 2];

  unless ($columns[3]) {
    print "\n";
    next;
  }

  my @records = split /,/, $columns[3];
  my $tabs = 1;
  for (@records) {
    my @notes = split /[_:]/;
    print "\t" x $tabs;
    print $notes[4], "\n";
    $tabs = 4;
  }
} 
```

**输出**

```
chr1    38045559    38046059    C1orf122
                C1orf122
                YRDC
chr1    205291045   205291545   YOD1
chr1    1499717 1500625 SSU72
chr1    1679941 1680441 NADK
chr1    1699769 1700657 NADK
                NADK
chr1    1701368 1701868 NADK
chr1    1812386 1812886 GNB1
chr1    2066155 2066655
chr1    2149493 2149993 SKI
chr1    2312573 2313353 MORN1
                RER1 
```

请注意，未对齐是由于可变长度字段的制表符分隔

**更新**

此版本将输出累积在一个数组中，并评估每列的最大宽度，以便它可以以适当的固定字段宽度显示

```
use strict;
use warnings;

my @output;

while (<>) {
  chomp;
  my @columns = split "\t";
  my @outrec = @columns[0,1,2];

  if ($columns[3]) {

    my @records = split /,/, $columns[3];
    for (@records) {
      my @notes = split /[_:]/;
      $outrec[3] = $notes[4];
      push @output, [ @outrec ];
      @outrec = ();
    }
  }
  else {
      push @output, \@outrec;
  }
}

my @sizes;
for (@output) {
  for my $i (0..3) {
    my $length = length($_->[$i] // '');
    $sizes[$i] = $length unless $sizes[$i] and $sizes[$i] > $length;
  }
}

for my $outrec (@output) {
  printf "%-*s %-*s %-*s %-*s\n", map { $sizes[$_], $outrec->[$_] // ''} 0..3;
} 
```

**输出**

```
chr1 38045559  38046059  C1orf122
                         C1orf122
                         YRDC    
chr1 205291045 205291545 YOD1    
chr1 1499717   1500625   SSU72   
chr1 1679941   1680441   NADK    
chr1 1699769   1700657   NADK    
                         NADK    
chr1 1701368   1701868   NADK    
chr1 1812386   1812886   GNB1    
chr1 2066155   2066655           
chr1 2149493   2149993   SKI     
chr1 2312573   2313353   MORN1   
                         RER1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:32:15.237

我会考虑为此使用脚本文件，因为它是调整和重用的主要候选者，并且至少适度复杂。另外，它允许您更轻松地为您的代码使用合适的模块。[`Text::CSV`](http://search.cpan.org/perldoc?Text%3a%3aCSV)将安全地读取您的 csv 文件，[`Text::ParseWords`](http://search.cpan.org/perldoc?Text%3a%3aParseWords)将处理您的嵌套字段。

以下脚本用于演示。您可以将文件句柄更改`*DATA`为`*ARGV`以使脚本解析参数文件，例如：

```
perl script.pl file.csv > output.txt 
```

**代码：**

```
use strict;
use warnings;
use Text::CSV;
use Text::ParseWords;

my $csv = Text::CSV->new({                     # create csv object
        sep_char => "\t",                      # delimiter is tab
    });  

while(my $row = $csv->getline(*DATA)) {        # read from file handle
    my @anno = quotewords(',', 0, $row->[-1]); # get list of fields
    @anno = "" unless @anno;                   # avoid empty list
    for (@anno) {                              # for each field
        my @inner = quotewords('[:_]', 0, $_);    # get inner fields
        my $anno = $inner[-2] // "";              # take second last
        print join "\t", @$row[0 .. 2], $anno;
        print $/;
        $_ = "" for @$row;                     # clear primary row once printed
    }
}
__DATA__
chr1    38045559    38046059    chr1:38045559-38046559_NM_001142726_C1orf122_+,chr1:38045559-38046559_NM_198446_C1orf122_+,chr1:38045952-38046952_NM_024640_YRDC_-
chr1    205291045   205291545   chr1:205290545-205291545_NM_018566_YOD1_-
chr1    1499717 1500625 chr1:1499625-1500625_NM_014188_SSU72_-
chr1    1679941 1680441 chr1:1679441-1680441_NM_001198995_NADK_-
chr1    1699769 1700657 chr1:1699269-1700269_NM_023018_NADK_-,chr1:1699657-1700657_NM_001198993_NADK_-
chr1    1701368 1701868 chr1:1700868-1701868_NM_001198994_NADK_-
chr1    1812386 1812886 chr1:1811886-1812886_NM_002074_GNB1_-
chr1    2066155 2066655 
chr1    2149493 2149993 chr1:2149493-2150493_NM_003036_SKI_+
chr1    2312573 2313353 chr1:2312353-2313353_NM_024848_MORN1_-,chr1:2312573-2313573_NM_007033_RER1_+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:09:08.420

这个 Perl 解决方案能满足您的需求吗？您可能需要调整它：

```
perl -ane '
    @names = split /,/, $F[-1];
    print +(join "\t", @F[0 .. 2], join "\n\t\t\t", map +(split /_/)[3], @names), "\n";
' 
```

**更新：**

`-n`告诉 Perl 逐行处理输入。

`-a`告诉 Perl 将每一行拆分为数组 @F。

最后一个字段被拆分为`,`一个新数组@names。然后，打印前三个字段，然后是由换行符和三个制表符连接的名称。每个名称都是从@names 中获得的，方法是用下划线拆分它并返回第四个成员。

## 使用 Text::Table 格式化输出：

```
perl -MText::Table -ane '
    BEGIN { $t = Text::Table->new }
    @names = split /,/, $F[-1];
    @n = map +(split /_/)[3], @names;
    my $f;
    $t->add($f++ ? (("") x 3)
                 : @F[0 .. 2], $_)
        for  @n ? @n : ("")
    }{
       print $t' 
```

# mysql - 查询双重排序

> ID：12779220
> 
> 赞同：1
> 
> 时间：2012-10-08T09:49:53.777
> 
> 标签：mysql, sql

我有一张物品表以及它们来自哪个供应商：tabel`items`

```
Ttem ID - Item Title - Supplier - Date added 
```

供应商可以提供多个项目，标题和供应商都不是唯一的。

我想显示最新添加的 56 项，并且从这 56 项中我想显示前十名供应商

所以我个人有：

```
select * 
from items 
order by dateadded desc 
limit 56 
```

而对于供应商

```
select count(supplier) as howmany 
from items 
group by supplier 
order by howmany desc 
limit 10 
```

我的问题是如何显示选择的56个项目的前十名供应商

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:55:05.843

只需结合您的两个语句并将第一个语句用作子选择：

```
select count(*) as howmany from (
    select * from items order by dateadded desc limit 56
) top_items group by supplier order by howmany desc limit 10 
```

**更新：**您最初拥有`count(supplier)`，它应该可以工作，但不是很清楚（看起来您正在尝试计算供应商的数量）。我改为`count(*)`突出显示您正在计算每个供应商的行数（项目数）这一事实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:55:00.790

这将为您提供最近 56 项商品的前 10 名供应商：

```
SELECT COUNT(supplier) AS howmany
FROM items

WHERE item_id IN (
    SELECT t2.item_id
    FROM items t2
    ORDER BY t2.dateadded DESC
    LIMIT 56
)

GROUP BY supplier
ORDER BY howmany DESC
LIMIT 10; 
```

# objective-c - 不要旋转子视图

> ID：12779225
> 
> 赞同：0
> 
> 时间：2012-10-08T09:50:17.480
> 
> 标签：objective-c, xcode, rotation

当我使用此代码时：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
// Return YES for supported orientations
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:    (NSTimeInterval)duration {

  if ((toInterfaceOrientation==UIInterfaceOrientationLandscapeLeft) || toInterfaceOrientation==UIInterfaceOrientationLandscapeRight ) {
    LeftLVC* vc = [[LeftLVC alloc] initWithNibName:@"LeftLVC" bundle:nil];      
    [self.navigationController pushViewController:vc animated:YES];     
  }
} 
```

子视图旋转。在我的项目中，子视图必须保持固定的肖像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:19:21.420

`shouldAutorotateToInterfaceOrientation:`用于指定支持的方向。如果您只想支持纵向模式，那么：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
        return UIInterfaceOrientationIsPortrait(interfaceOrientation);  
} 
```

上述方法在 iOS 6.0 中已弃用。改写`supportedInterfaceOrientations`and`preferredInterfaceOrientationForPresentation`方法。有关详细信息，请阅读[Apple 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/UIViewController/shouldAutorotateToInterfaceOrientation%3a)。

`willRotateToInterfaceOrientation:duration:`在用户界面开始旋转之前发送到视图控制器。在这里，当您将方向从横向移动到纵向时，将调用此方法。

# iphone - 在 xcode 中创建基于科尔多瓦的应用程序后找不到 www 文件夹

> ID：12779230
> 
> 赞同：-1
> 
> 时间：2012-10-08T09:50:27.050
> 
> 标签：iphone, cordova

我在 XCode 中创建了一个基于 Cordova 的应用程序，当我尝试访问`www`我的项目文件夹时，我没有找到它。

谁能告诉我在哪里可以找到`www`应该包含在项目中的文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:10:22.673

非常仔细地查看在线文档提供的教程：

[http://docs.phonegap.com/en/1.5.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS](http://docs.phonegap.com/en/1.5.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)

通常，在创建项目时，您应该关闭 ARC：

![1](../Images/b3ded8b2961bf82c80c40232a142d670.png)

如果您忘记关闭 ARC，您可以尝试以下操作：

1.  选择您的项目文件。

2.  选择`Build settings`选项卡，然后选择过滤器选项`All`和`levels`（默认为`Combined`）。

3.  在过滤器选项右侧的搜索字段中`Combined`，输入`automatic`。

4.  将有一个名为`Apple LLVM Compiler 3.0 – Language`包含该行的组`Objective-C Automatic Reference Counting`。

5.  单击该行，然后在中间列（其中显示`yes`）中单击并选择`no`。

以上应该关闭你的ARC。

然后，尝试执行项目创建的后续步骤：

> *   您现在应该在 Xcode 4 中看到您的项目。按左上角的**运行按钮。**您的构建应该成功并在模拟器中启动
> *   您应该在模拟器中看到一个错误，通知您 index.html 未找到
> *   为了解决这个问题，我们需要将**www** 目录复制到项目中。右键单击左侧导航窗口中的项目，然后单击在查找器中显示
> *   在 Finder 中，您应该会在项目旁边看到**www目录**
>     
>     
> *   下一步很**重要**！将**www**文件夹拖到 Xcode 4 中。您不能只将 www 文件夹拖到应用程序的文件夹中。需要拖入Xcode 4！！在我的情况下，我会将它拖放到 HiWorld 上，如下所示。

![2](../Images/8551f6679859235103fc0359d0239c50.png)

> 拖动后，您应该会看到带有几个选项的提示。确保为任何添加的文件夹选择创建文件夹引用。点击完成

[从在线文档的步骤**4.HelloWorld**继续...](http://docs.phonegap.com/en/1.5.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)

希望这可以帮助。

# php - 功能只工作1次

> ID：12779232
> 
> 赞同：0
> 
> 时间：2012-10-08T09:50:29.807
> 
> 标签：php, file, function, upload

我编写了一个脚本，用于将图像上传到我的服务器。用户可以使用它来上传他们的头像或他们的作品。

这是functions.php中的函数

```
function save_image($image, $uploadedfile)
{

error_reporting(0);

$change="";
$abc="";

 define ("MAX_SIZE","40000");
 function getExtension($str) {
         $i = strrpos($str,".");
         if (!$i) { return ""; }
         $l = strlen($str) - $i;
         $ext = substr($str,$i+1,$l);
         return $ext;
 }

 $errors=0;

    if ($image) 
    {

        $filename = stripslashes($image);

        $extension = getExtension($filename);
        $extension = strtolower($extension);

 if (($extension != "jpg") && ($extension != "jpeg") && ($extension != "png") && ($extension != "gif")) 
        {

            $change='<div class="msgdiv">Unknown Image extension </div> ';
            $errors=1;
        }
        else
        {

 $size=filesize($uploadedfile);

if ($size > MAX_SIZE*1024)
{
    $change='<div class="msgdiv">You have exceeded the size limit!</div> ';
    $errors=1;
}

if($extension=="jpg" || $extension=="jpeg" )
{
$uploadedfile = $uploadedfile;
$src = imagecreatefromjpeg($uploadedfile);

}
else if($extension=="png")
{
$uploadedfile = $uploadedfile;
$src = imagecreatefrompng($uploadedfile);

}
else 
{
$src = imagecreatefromgif($uploadedfile);
}

echo $scr;

list($width,$height)=getimagesize($uploadedfile);

$newwidth=$width;
$newheight=$height;
$tmp=imagecreatetruecolor($newwidth,$newheight);

imagecopyresampled($tmp,$src,0,0,0,0,$newwidth,$newheight,$width,$height);

$filename = "images/vcard_images/". $image;

imagejpeg($tmp,$filename,100);

imagedestroy($src);
imagedestroy($tmp);
imagedestroy($tmp1);
}}

} 
```

所以现在我在 create.php 页面上有一个表单，他们可以在其中上传 6 个作品。所以他们从硬盘中选择了 6 个文件，然后按保存。然后我像这样调用函数 6 次：

```
$work1 = $_FILES["work1"]["name"];
save_image($_FILES["work1"]["name"], $_FILES['work1']['tmp_name']);

$work2 = $_FILES["work2"]["name"];
save_image($_FILES["work2"]["name"], $_FILES['work2']['tmp_name']);

$work3 = $_FILES["work3"]["name"];
save_image($_FILES["work3"]["name"], $_FILES['work3']['tmp_name']);

$work4 = $_FILES["work4"]["name"];
save_image($_FILES["work4"]["name"], $_FILES['work4']['tmp_name']);

$work5 = $_FILES["work5"]["name"];
save_image($_FILES["work5"]["name"], $_FILES['work5']['tmp_name']);

$work6 = $_FILES["work6"]["name"];
save_image($_FILES["work6"]["name"], $_FILES['work6']['tmp_name']); 
```

但奇怪的是，如果我按 SAVE，页面就会变成白色。如果我只调用一次函数，那么只有这个：

```
$work1 = $_FILES["work1"]["name"];
save_image($_FILES["work1"]["name"], $_FILES['work1']['tmp_name']); 
```

它工作得很好..

不知道我在做什么错..

亲切的问候

编辑：

错误报告告诉我：

```
Notice: Constant MAX_SIZE already defined in /Applications/XAMPP/xamppfiles/htdocs/vcard2/user/functions.php on line 11

Fatal error: Cannot redeclare getExtension() (previously declared in /Applications/XAMPP/xamppfiles/htdocs/vcard2/user/functions.php:12) in /Applications/XAMPP/xamppfiles/htdocs/vcard2/user/functions.php on line 12 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:58:41.280

您输入错误： echo $scr 而不是 echo $src

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:05:39.670

我建议你看看 HTML5 的 FILE API，它管理多个文件上传和拖放系统。如果你想玩，推荐两个脚本：

[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

和

[https://github.com/weixiyen/jquery-filedrop](https://github.com/weixiyen/jquery-filedrop)

我都试过了，它们都很好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:24:37.300

您的错误是两个独立的，但出于相同的原因发生：

```
Notice: Constant MAX_SIZE already defined in /Applications/XAMPP/xamppfiles/htdocs/vcard2/user/functions.php on line 11 
```

您在函数中编写 DEFINE。它第一次运行时运行良好，但第二次运行时，它已经定义了。将 DEFINE 移出函数`save_image`

```
Fatal error: Cannot redeclare getExtension() (previously declared in /Applications/XAMPP/xamppfiles/htdocs/vcard2/user/functions.php:12) in /Applications/XAMPP/xamppfiles/htdocs/vcard2/user/functions.php on line 12 
```

这个错误也是如此。函数运行函数 getExtention 的秒数被重新清除。将功能移到外面，`save_image`它应该可以按预期工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T10:25:15.960

您的函数包含一个`define`语句。每次调用函数时都会执行此操作，但`define`在尝试重新定义现有常量时会失败。

而是将此`define`语句放在函数之外。

该函数的故事相同`getExtension`：我不清楚为什么要在另一个函数中这样做；不。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T10:44:33.780

将函数`getExtension`移出`save_image`函数。

PHP 中的嵌套函数不受函数“私有”范围的约束，它们进入全局函数表。而且您不能重新声明（全局）函数。

如果你真的想嵌套函数，那么只在未声明时声明：

```
if (!function_exists('getExtension')) { function getExtension(){...}} 
```

您应该考虑将`define`Statement 也移出函数或使其成为有条件的：

```
if (!defined('MAX_SIZE')) { define('MAX_SIZE', 1024); } 
```

`isset`您还可以使用or来检查 Requestvars `empty`，即。在一个循环中：

```
foreach (range(1,7) as $num) { 
  if (!empty($_FILES['work'.$num]['tmp_name'])) { 
    save_image($_FILES["work".$num]["name"], $_FILES['work'.$num]['tmp_name']); 
  } 
} 
```

# c++ - 如何为并行进程正确选择 rng 种子

> ID：12779235
> 
> 赞同：8
> 
> 时间：2012-10-08T09:50:38.737
> 
> 标签：c++, c, random, parallel-processing

我目前正在使用随机数生成器（[gsl](http://www.gnu.org/software/gsl/)或[boost](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_random.html)）的 C/C++ 项目。整个想法可以简化为一个接收种子并返回结果的非平凡[随机过程。](http://en.wikipedia.org/wiki/Stochastic_process)我正在计算该过程的不同实现的平均值。

因此，种子很重要：这些过程必须使用不同的种子，否则会使平均值产生偏差。

到目前为止，我正在使用`time(NULL)`提供种子。但是，如果两个进程在同一秒开始，则种子是相同的。发生这种情况是因为我正在使用并行化（使用[openMP](http://openmp.org/wp/)）。

所以，我的问题是：如何在 C/C++ 上实现一个提供独立种子的“种子提供者”？

例如，我虽然在使用线程号（`thread_num`）`seed = time(NULL)*thread_num`，. 然而，这意味着种子是相关的：它们是彼此的倍数。这会对“伪随机”造成任何问题还是与顺序种子一样好？

要求是它必须在 Mac OS（我的电脑）和类似于 OS Cent（集群）的 Linux 发行版上工作（并且自然会提供独立的实现）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T12:41:18.673

一个常用的方案是有一个“主”RNG 用于为每个流程特定的 RNG 生成种子。

这种方案的优点是整个计算仅由一个种子决定，您可以将其记录在某个地方以便能够重播任何模拟（这可能对调试讨厌的错误很有用）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T10:04:17.107

我们在 Beowulf 计算网格上遇到了类似的问题，我们使用的解决方案是将进程的 pid 合并到 RNG 种子中，如下所示：

```
time(NULL)*thread_num*getpid() 
```

当然，您可以从 /dev/urandom 或 /dev/random 中读取一个整数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T10:13:25.763

遇到这个问题时，我经常使用[`seed_rng`](http://www.boost.org/doc/libs/1_42_0/boost/uuid/seed_rng.hpp)Boost.Uuid。它使用`time`,`clock`和随机数据`/dev/urandom`来计算种子。你可以像这样使用它

```
#include <boost/uuid/seed_rng.hpp>
#include <iostream>

int main() {
  int seed = boost::uuids::detail::seed_rng()();
  std::cout << seed << std::endl;
} 
```

请注意，`seed_rng`它来自`detail`命名空间，因此它可以在没有进一步通知的情况下消失。在那种情况下，编写自己的实现`seed_rng`应该不会太难。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T10:08:49.337

Mac OS 也是 Unix，所以它可能有`/dev/random`. 如果是这样，那是获得种子的最佳解决方案。否则，*如果*生成器是好的，取`time( NULL )`一次，然后为每个生成器的种子增加它，应该会产生相当好的结果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T10:16:23.593

如果您在 x86 上并且不介意使代码不可移植，那么您可以读取时间戳计数器 (TSC)，它是一个 64 位计数器，以 CPU（最大）时钟速率（约 3 GHz）递增，并且用它作为种子。

```
#include <stdint.h>
static inline uint64_t rdtsc()
{
    uint64_t tsc;
    asm volatile
    ( 
        "rdtsc\n\t"
        "shl\t$32,%%rdx\n\t"       // rdx = TSC[ 63 : 32 ] : 0x00000000
        "add\t%%rdx,%%rax\n\t"     // rax = TSC[ 63 :  0 ]
        : "=a" (tsc) : : "%rdx"
    );
    return tsc;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-08T10:33:12.420

当比较由相同的伪随机数生成器产生的具有不同种子的两个无限时间序列时，我们可以看到它们相同地延迟了某个时间 tau。通常这个时间尺度比你的问题要大得多，以确保两个随机游走是不相关的。

如果您的随机过程处于高维相空间中，我认为一个好的建议可能是：

```
seed = MAXIMUM_INTEGER/NUMBER_OF_PARALLEL_RW*thread_num + time(NULL) 
```

请注意，使用方案不能保证时间 tau 很大！

如果您对系统时间尺度有所了解，您可以多次调用随机数生成器，以生成在某个时间间隔内等距的种子。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-08T13:28:55.933

也许您可以尝试 C++11 中的 std::chrono 高分辨率时钟：

> 类 std::chrono::high_resolution_clock 表示系统上可用的最小滴答周期的时钟。它可能是 std::chrono::system_clock 或 std::chrono::steady_clock 的别名，或第三个独立时钟。

[http://en.cppreference.com/w/cpp/chrono/high_resolution_clock](http://en.cppreference.com/w/cpp/chrono/high_resolution_clock)

但是我不确定 srand(0) 有什么问题；srand(1), srand(2).... 但我对 rand 的了解非常基础。：/

为了疯狂的安全考虑这个：

> 请注意，下面描述的所有伪随机数生成器都是 CopyConstructible 和 Assignable。复制或分配生成器将复制其所有内部状态，因此原始和副本将生成相同的随机数序列。

[http://www.boost.org/doc/libs/1_51_0/doc/html/boost_random/reference.html#boost_random.reference.generators](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_random/reference.html#boost_random.reference.generators)

由于大多数生成器都有疯狂的长周期，您可以生成一个，将其复制为第一个生成器，使用原始生成 X 个数字，将其复制为第二个，使用原始生成 X 个数字，将其复制为第三个......如果您的用户调用他们自己的生成器少于 X 次，它们不会重叠。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-11T06:20:41.657

我理解您的问题的方式是，您有多个进程使用相同的伪随机数生成算法，并且您希望每个随机数“流”（在每个进程中）彼此独立。我对么 ？

在这种情况下，你猜对了，除非 rng 算法这么说，否则给出不同的（相关的）种子并不能保证任何东西。你基本上有两个解决方案：

## 简单版

使用具有单个种子的单一随机数源。然后以循环方式向每个进程提供随机数。

此解决方案很慢，但可以保证您提供给流程的数字是可以的。

您可以做同样的事情，但一次生成您需要的所有随机数，然后将此集合分成与您的进程一样多的切片。

## 使用为此设计的 RNG

您可以在论文和网络上找到几种专门设计用于从单个初始状态提供独立随机数流的算法。它们很复杂，但大多数都提供源代码。这个想法通常是将RNG空间（您可以从初始状态获得的值）“拆分”成各种块，如上所示。它们只是更快，因为如果您跳过给定数量的值，使用的算法可以轻松计算 RNG 的状态。

这些生成器通常被称为“并行随机数生成器”。最受欢迎的可能是这两个：

*   RngStreams：[http ://statmath.wu.ac.at/software/RngStreams/](http://statmath.wu.ac.at/software/RngStreams/)
*   [弹簧： http](http://sprng.cs.fsu.edu/) ://sprng.cs.fsu.edu/

查看他们的手册以充分了解他们的工作、他们的工作方式以及是否真的是您需要的。

# html - html a:active 不起作用？

> ID：12779242
> 
> 赞同：-1
> 
> 时间：2012-10-08T09:51:15.203
> 
> 标签：html, css

***CSS：***

```
// Highlight to show that the user is viewing current tab.    
// css for the active tab

.HeaderTabs li.tab a { 
   display: block;    //anchor tab 
   padding: 12px 8px 12px 8px;
}

.HeaderTabs li.tab a:link {
   outline: none;  //link works 
   text-decoration: none;
}

.HeaderTabs li.tab a:hover {  //this works hovering over the text
   color: #A4C639;
   font-weight: bold;
}

.HeaderTabs li.tab a:active { //this doesnt work 
   color: #A4C639;
   font-weight: bold;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T09:53:35.710

`:active`选择器在元素处于活动状态时**起作用**，例如当您保持单击元素时**，**样式将应用，如果您想设置当前活动选项卡的样式，您需要为此使用 jQuery 或服务器端编程，您无法设置样式只需使用`:active`选择器，您当前的活动标签

[**更多参考**](http://reference.sitepoint.com/css/pseudoclass-active)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T09:58:06.277

我认为您可能会混淆“活跃”的含义。CSS 中的 ':active' 指的是链接被点击时的状态（在某些浏览器中可能是几毫秒的问题）。如果您想让引用当前页面的选项卡看起来不同，您需要向其添加某种选择器并设置不同的样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T09:56:21.613

当用户单击链接时，将在链接上设置活动状态。一旦用户释放点击，链接就不再活跃。如果您更改活动链接的颜色（与悬停状态不同的颜色），您将看到差异。

一旦使用 JavaScript 或在服务器端有效地选择了选项卡，您应该将自己的“选定”类添加到链接中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T09:58:22.653

我认为 :active 仅在您单击链接时起作用，当您 mouseUp 时，它不再“活跃”。

如果您希望该选项卡保持颜色，只需定义另一个类。

```
.activeTab {
color: #A4C639;
font-weight: bold;
} 
```

并通过 javascript 或 jquery 将该类添加到选项卡中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T09:59:14.810

> 这个伪类匹配任何正在被激活的元素。例如，它适用于鼠标单击链接的持续时间，从按下鼠标按钮的点到再次释放鼠标按钮的点。伪类并不表示指向活动或当前页面的链接——这是 CSS 初学者常见的误解。

[读这个](http://reference.sitepoint.com/css/pseudoclass-active)

```
 li class="current"

.HeaderTabs li.tab a.current {
color: #A4C639; 
font-weight: bold; 
 } 
```

CSS 中的附加注释不是用`//`Javascript 完成的。利用`/* Cooment */`

**例子**

**HTML/标记**

文件 =`index.html`

```
<ul>
<li class="current"><a href="index.html"</a>Home</li>
<li><a href="about_us.html"</a>About Us</li>
<li><a href="news.html"</a>News</li>
<li><a href="products.html"</a>Products</li>
<li><a href="contact_us.html"</a>Contact Us</li>
</ul> 
```

文件 =`abouts_us.html`

```
<ul>
<li><a href="index.html"</a>Home</li>
<li class="current"><a href="about_us.html"</a>About Us</li>
<li><a href="news.html"</a>News</li>
<li><a href="products.html"</a>Products</li>
<li><a href="contact_us.html"</a>Contact Us</li>
</ul> 
```

文件 =`news.html`

```
<ul>
<li><a href="index.html"</a>Home</li>
<li><a href="about_us.html"</a>About Us</li>
<li class="current"><a href="news.html"</a>News</li>
<li><a href="products.html"</a>Products</li>
<li><a href="contact_us.html"</a>Contact Us</li>
</ul> 
```

文件 =`products.html`

```
<ul>
<li><a href="index.html"</a>Home</li>
<li><a href="about_us.html"</a>About Us</li>
<li><a href="news.html"</a>News</li>
<li class="current"><a href="products.html"</a>Products</li>
<li><a href="contact_us.html"</a>Contact Us</li>
</ul> 
```

文件 =`contact_us.html`

```
<ul>
<li><a href="index.html"</a>Home</li>
<li><a href="about_us.html"</a>About Us</li>
<li><a href="news.html"</a>News</li>
<li><a href="products.html"</a>Products</li>
<li class="current"><a href="contact_us.html"</a>Contact Us</li>
</ul> 
```

**样式/CSS**

```
li.current
{
color: #A4C639; 
font-weight: bold;
} 
```

此外，您可能需要将 the 提供`class="current"`给 the`<a>`而不是`<li>`and 使用

```
a.current
{
color: #A4C639; 
font-weight: bold;
} 
```

# django - 需要有关 Django url 和视图设计的帮助

> ID：12779243
> 
> 赞同：2
> 
> 时间：2012-10-08T09:51:16.287
> 
> 标签：django, design-patterns, django-views, django-urls

抱歉，如果之前已经讨论过这个问题，已经搜索和搜索但没有发现任何有用的东西:)

但是这里。我们目前正在重写我们的 webapp 的一部分。我们的应用程序相当陈旧，因此在编程、约定和 url 方面存在一些相当牛仔风格的方法。

我们正在寻找一种简单干净的方式来设计我们的视图和 url，以便我们将来可以更轻松地维护它们。

问题是; 到目前为止，我们用于主站点的 urls.py 文件是一团糟。许多 url 指向一个独特的视图，只有一个薄。前任。list_books/, edit_book/ 等当涉及到特定格式等时，我们有类似 list_books_json/ 的东西

（虽然这些不是实际的网址，但只是用来证明一点，因为真正的网址要糟糕得多）

我们现在要做的就是稍微清理一下。我们想知道绕过它的最佳方法是什么？

到目前为止我们所想到的（在阅读了很多关于这个主题的东西之后）：

我们考虑过按照以下模式设计我们的 url：domain/object/action/

因此，用于在应用程序中更改书籍的应用程序“员工”网站的 URL 将是：员工/书籍 - 查看所有书籍 (GET) 员工/书籍/ID - 查看一本书 (GET) 员工/书籍/新 - 到创建新书 (POST) staff/books/ID/edit - 编辑特定书籍 (POST) staff/books/ID/delete - 删除特定书籍 (POST)

当时的想法是只有 1 个视图，views.staff_books() 来处理通过站点的“员工”部分处理书籍时的所有这些操作。以便 staff_books() 检查 ID 或某个“操作”（编辑、新建、删除等）

结果会更少，但更大的视图必须处理员工/书籍的各个方面。现在我们有很多只处理一件事的小视图。

这有意义吗，你能看到潜在的问题吗？你们是怎么处理的？？

我认为我们迷路的一个地方是格式。你会把前任放在哪里。在 json 中返回响应的请求？我们想知道“staff/books.json”或“staff/books/ID.json”等，然后将所有 json 逻辑保存在同一个“staff_books()”视图中。

基本上就是这样。对不起，这个问题有点“蓬松”......我们基本上需要一些关于如何构建 url 和视图的示例或好的设计建议。

亲切的问候

皮特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T12:17:22.797

作为您问题的扩展（和解决方案），我建议使用策略模式。由于您已经有了一个结构，并且唯一不同的是它应该如何执行，因此这种模式非常适合您的问题。我的意思是：

1.  创建一个视图，它是您的应用程序的入口点，其功能命名为基于 url 的功能（编辑、新建、删除等）。即你的 url.py 决定从那里去哪里。
2.  创建基于您的域等执行您的工作的类。我们现在称它们为 Book、Calendar 等。
3.  实现这些类的功能，如编辑、新建、删除等。
4.  然后在您的视图中，确定要实例化的类并调用相应的函数，例如在 View.edit() 中调用 domain.edit()

我认为应该这样做^^希望它有所帮助：D

# javascript - 附加脸书评论

> ID：12779246
> 
> 赞同：2
> 
> 时间：2012-10-08T09:51:27.520
> 
> 标签：javascript, jquery, append

我可以要求这样的 facebook 评论：

```
<div class="fb-comments" data-href="http://www.google.com/" data-num-posts="2" data-width="470"></div> 
```

现在我想用'追加'到一个名为'.description'的div来动态调用它，如下所示：

```
setTimeout(function() {
$('.embed').find('.description').append('<div class="fb-comments" data-href="http://www.google.com/" data-num-posts="2" data-width="470"></div>');
}, 1000); 
```

问题是它没有附加。看一下例子：[JsFiddle](http://jsfiddle.net/rLMZk/2/)

我还将 facebook 评论作为常规 div 放在 HTML 部分中，只是为了表明 facebook 脚本没有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T10:28:31.400

您将不得不实现 Facebook [JavaScript SDK](https://developers.facebook.com/docs/reference/javascript/)。该 SDK 有一个名为`FB.XFBML.parse()`.

> 此函数动态解析和呈现文档中的 XFBML 标记。如果您通过 ajax 从服务器发送 XFBML 并希望在客户端呈现它，则可以使用此方法。XFBML 使您能够将 FBML 合并到您的网站和 IFrame 应用程序中。

您所要做的就是附加评论插件代码，然后`FB.XFBML.parse()`在包含元素的 ID 上执行该函数。

```
FB.XFBML.parse(document.getElementById('facebook_comments_holder')); 
```

使用 jQuery（以及在您的具体示例中），我相信您需要的代码是这样的 -

```
// assuming the folowing selector matches only one element
var element = $('.embed').find('.description')[0];
FB.XFBML.parse(element); 
```

# php - Youtube 视频上传 API 问题

> ID：12779247
> 
> 赞同：0
> 
> 时间：2012-10-08T09:51:30.687
> 
> 标签：php, api, youtube, feed

我似乎无法让这个 API 工作。我的眼睛错过了我正在犯的错误。我遇到的问题是页面仍然显示空白。

我需要表格将数据上传到 Youtube，稍后将显示在我的网站上。

这是我的代码：

```
<?php
require_once 'library/Zend/Loader/AutoloaderFactory.php'; // the Zend dir must be in    your include_path
Zend_Loader::loadClass('Zend_Gdata_YouTube');
$yt = new Zend_Gdata_YouTube();

Zend_Loader::loadClass('Zend_Gdata_AuthSub');
Zend_Loader::loadClass('Zend_Gdata_ClientLogin'); 
// start a new session 
session_start();

function getAuthSubRequestUrl()
{
$next = 'http://www.example.com/welcome.php';
$scope = 'http://gdata.youtube.com';
$secure = false;
$session = true;
return Zend_Gdata_AuthSub::getAuthSubTokenUri($next, $scope, $secure, $session);
}

function getAuthSubHttpClient()
{
if (!isset($_SESSION['sessionToken']) && !isset($_GET['token']) ){
    echo '<a href="' . getAuthSubRequestUrl() . '">Login!</a>';
    return;
} else if (!isset($_SESSION['sessionToken']) && isset($_GET['token'])) {
  $_SESSION['sessionToken'] = Zend_Gdata_AuthSub::getAuthSubSessionToken($_GET['token']);
}

$httpClient = Zend_Gdata_AuthSub::getHttpClient($_SESSION['sessionToken']);
return $httpClient;
}
$yt = new Zend_Gdata_YouTube($httpClient, $applicationId, $clientId, $developerKey);
$authenticationURL= 'https://www.google.com/accounts/ClientLogin';
$httpClient = 
 Zend_Gdata_ClientLogin::getHttpClient(
          $username = 'myuser@gmail.com',
          $password = 'mypassword',
          $service = 'youtube',
          $client = null,
          $source = 'MySource', // a short string identifying your application
          $loginToken = null,
          $loginCaptcha = null,
          $authenticationURL);
$developerKey = 'ABC123 ... ';
$applicationId = 'Video uploader v1';
$clientId = 'My video upload client - v1';

$yt = new Zend_Gdata_YouTube($httpClient, $applicationId, $clientId, $developerKey);

// Assuming that $yt is a valid Zend_Gdata_YouTube object
$yt->setMajorProtocolVersion(2);
function getAndPrintVideoFeed($location = Zend_Gdata_YouTube::VIDEO_URI)
{
$yt = new Zend_Gdata_YouTube();
// set the version to 2 to receive a version 2 feed of entries
$yt->setMajorProtocolVersion(2);
$videoFeed = $yt->getVideoFeed($location);
printVideoFeed($videoFeed);
}

function printVideoFeed($videoFeed)
{
$count = 1;
foreach ($videoFeed as $videoEntry) {
echo "Entry # " . $count . "\n";
printVideoEntry($videoEntry);
echo "\n";
$count++;
}
}

// Note that this example creates an unversioned service object.
// You do not need to specify a version number to upload content
// since the upload behavior is the same for all API versions.
$yt = new Zend_Gdata_YouTube($httpClient);

// create a new VideoEntry object
$myVideoEntry = new Zend_Gdata_YouTube_VideoEntry();

$myVideoEntry->setVideoTitle('My Test Movie');
$myVideoEntry->setVideoDescription('My Test Movie');
// The category must be a valid YouTube category!
$myVideoEntry->setVideoCategory('Autos');

// Set keywords. Please note that this must be a comma-separated string
// and that individual keywords cannot contain whitespace
$myVideoEntry->SetVideoTags('cars, funny');

$tokenHandlerUrl = 'http://gdata.youtube.com/action/GetUploadToken';
$tokenArray = $yt->getFormUploadToken($myVideoEntry, $tokenHandlerUrl);
$tokenValue = $tokenArray['token'];
$postUrl = $tokenArray['url'];

// place to redirect user after upload
$nextUrl = 'http://www.example.com/youtube_uploads';

// build the form
$form = '<form action="'. $postUrl .'?nexturl='. $nextUrl .
    '" method="post" enctype="multipart/form-data">'. 
    '<input name="file" type="file"/>'. 
    '<input name="token" type="hidden" value="'. $tokenValue .'"/>'.
    '<input value="Upload Video File" type="submit" />'. 
    '</form>';
echo "aaaa".$form;

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:02:58.603

这是我的 Zend 代码

```
 //include Zend Gdata Libs

require_once("Zend/Gdata/ClientLogin.php");       
require_once("Zend/Gdata/HttpClient.php");          
require_once("Zend/Gdata/YouTube.php");          
require_once("Zend/Gdata/App/HttpException.php");         
require_once('Zend/Uri/Http.php');

//yt account info
$yt_user = 'myuser@gmail.com'; //youtube username or gmail account
$yt_pw = 'mypassword'; //account password
$yt_source = 'title of my video'; //name of application (can be anything)

//yt dev key  get here : https://code.google.com/apis/youtube/dashboard/
$yt_api_key = ''ABC123 ... ''; //your youtube developer key

//login in to YT
$authenticationURL= 'https://www.google.com/youtube/accounts/ClientLogin';
$httpClient = Zend_Gdata_ClientLogin::getHttpClient(
                                          $username = $yt_user,
                                          $password = $yt_pw,
                                          $service = 'youtube',
                                          $client = null,
                                          $source = $yt_source, // a short string identifying your application
                                          $loginToken = null,
                                          $loginCaptcha = null,
                                          $authenticationURL);

// Note that this example creates an unversioned service object.
// You do not need to specify a version number to upload content
// since the upload behavior is the same for all API versions.
//$yt = new Zend_Gdata_YouTube($httpClient);
$yt = new Zend_Gdata_YouTube($httpClient, $yt_source, NULL, $yt_api_key); 
```

我可以上传我的文件，过了一会儿我被重定向到“$nextUrl”。我的问题是我得到了这个页面：[http](http://www.example.com/youtube_uploads?statu=400&error=failed) ://www.example.com/youtube_uploads?statu=400&error= failed 我不知道为什么。

有什么想法吗？

# android - 在android中使用ZXing扫描，如何改变预览方向？

> ID：12779248
> 
> 赞同：-1
> 
> 时间：2012-10-08T09:51:33.487
> 
> 标签：android, zxing

在android中，zxing中预览的默认方向是横向。在我将 Manifest.xml 中的它更改为纵向后，预览很奇怪：它不是纵向的。你可以试一试。我怎样才能改变其他地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:42:09.607

这里有一些关于如何让肖像工作的 [技巧](http://code.google.com/p/zxing/issues/detail?id=178)。我设法使用那里发布的技巧组合来进行肖像工作。

# facebook - 使用 facebook 登录为 0fees.net 创建网站

> ID：12779254
> 
> 赞同：1
> 
> 时间：2012-10-08T09:51:57.417
> 
> 标签：facebook, web-applications

今天我试图将 Facebook 功能添加到我的网站。它托管在`0fees.net`.

在 0fees.net 上，我上传`index.html`到我的虚拟主机，例如`mysite.0fees.net`. 这很有效，当我访问 URL 时页面可以正常打开。

然后，在 Facebook 上，我创建了我的 Facebook 应用程序，并将“使用 Facebook 登录的网站”设置为`http://mysite.0fees.net/`，按下 Save Changes。但是我收到了错误信息，

> **错误站点 URL 不是有效的 URL。**

当我尝试设置另一个 URL（例如`mysite.1fees.net`）时，应用程序保存得很好。

我不想更改提供者，那么我该如何设置`mysite.0fees.net`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:39:45.547

尝试`http://0fees.net/`在 Facebook 上发布链接时，您会看到一条消息，指出您不能这样做，因为该域因垃圾邮件而被阻止。因此，恐怕您将不得不使用另一个域。（这就是廉价虚拟主机的问题，您只能获得一个子域 - 让一个用户在该主域下做一些愚蠢的事情，所有其他使用它的人也会受到惩罚。）

# php - 激活 facebook 身份验证对话框

> ID：12779255
> 
> 赞同：0
> 
> 时间：2012-10-08T09:52:00.687
> 
> 标签：php, facebook-apps, facebook-authentication

我正在制作一个 Facebook 应用程序。我需要 facebook 用户在使用我的应用程序之前对其进行身份验证。

在我的应用程序的设置下，我在 facebook 开发人员 -> 设置 -> 权限下找到了一个身份验证对话框。

我创建了这个：http: [//i46.tinypic.com/34gwyn6.png](http://i46.tinypic.com/34gwyn6.png)

那么我的问题是，如何激活它？

当我使用 facebook 帐户测试应用程序时，我永远无法从该用户那里检索用户 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:32:06.503

您在应用仪表板中所做的设置*只会*影响[Authenticated Referrals](https://developers.facebook.com/docs/opengraph/authentication/#referrals) - 当您在应用中自己处理登录时，您必须通过`scope`参数请求权限。

由于您已经在使用 JS SDK，只需使用[`FB.login`](https://developers.facebook.com/docs/reference/javascript/FB.login/)触发您的应用程序的 Auth 对话框。

# .net - 实体框架实体更新忽略时间戳

> ID：12779259
> 
> 赞同：3
> 
> 时间：2012-10-08T09:52:21.950
> 
> 标签：.net, vb.net, entity-framework, optimistic-concurrency

我正在尝试实现乐观并发检查。我使用通用存储库和工作单元模式。

我已经向我的实体引入了时间戳属性（作为字节数组），每当我更新数据时它会自动增加值（似乎是数据库管理的，这是它应该做的）。

我通过将 VM 映射到实际模型（使用 automapper）从视图模型加载更新的值。这会产生一个正确类型的实体的新（分离？）实例，并设置了所有相应的字段（包括时间戳）。

更新本身的执行方式如下

```
i_oOldEntity =  m_oDbSet.Find(i_oEntity.MaterialId)
context.Entry(i_oOldEntity).CurrentValues.SetValues(i_oEntity)
context.SaveChanges() 
```

i_oEntity 是自动映射的实体。

这会很好地更新值本身，但是它完全忽略了来自视图模型的时间戳值。生成的 SQL 代码在 WHERE 子句中使用最新的 rowversion 值。

简而言之：如何让我的 viewmodel-timestamp 值在 EF 的 WHERE 子句中使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T15:00:19.643

假设：

```
var target = dbContext.Employees.Find(dto.Id); 
```

此技术导致 EF5 在更新时在 where 子句中使用 dto 的 Timestamp 值，如果 dto 的 Timestamp 与数据库的 Timestamp 值不匹配，则会触发乐观并发异常：

```
context.Entry(target).Property(o => o.Timestamp).OriginalValue = dto.Timestamp;
context.Entry(target).Property(o => o.Timestamp).IsModified = true; 
```

单独更新`OriginalValue`不会在 EF5 中执行任何操作。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-23T09:54:45.867

请更新`OriginalValues->RowVersion`，您将到达天堂 =)

# javascript - 将输入数据轴 x 和轴轴更改为轴 x 数组或轴轴数组以用于堆积条形图

> ID：12779260
> 
> 赞同：0
> 
> 时间：2012-10-08T09:52:28.453
> 
> 标签：javascript, charts, smarty, flot

如何将输入数据axisx和axisy更改为axisx数组或axisy数组，从输入数据[x1，x1]，[x2，y2]，[x3，y3]到[x1，x2，x3]和[y1，y2 ,y3]。它与axisy或axisx的技巧无关。

请查看折线图的输入数据。它的axisy数据是u=[100,35,35,30,105,40,35,30,40,20,15]。

```
 function d(k) {
    var n = [];
    for(var e = 0; e <= 10; e += 1) {
        n.push([e, parseInt(Math.random() * 30)])
    }
    var m = [];
    for(var e = 0; e <= 10; e += 1) {
        m.push([e, parseInt(Math.random() * 30)])
    }
    var j = [];
    for(var e = 0; e <= 10; e += 1) {
        j.push([e, parseInt(Math.random() * 30)])
    }
    var l = {
        series: {
            stack: true,
            bars: {
                show: true,
                barWidth: 0.4
            }
        },
        grid: {
            borderWidth: 0
        }
    };
    a.plot(k, [{
        data: n,
        color: "#E15656"
    }, {
        data: m,
        color: "#A6D037"
    }, {
        data: j,
        color: "#61A5E4"
    }], l)
} 
```

[jsfiddle](http://jsfiddle.net/TXPWK/62/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T04:02:01.263

您只需要在对象 ( ) 中指定详细信息（特别`ticks`是要使用的）：`yaxis``options``l`

```
 var l = {
            series: {
                stack: true,
                bars: {
                    show: true,
                    barWidth: 0.4
                }
            },
            grid: {
                borderWidth: 0
            },
            yaxis:{ 
                ticks: [1,3,17,23,35,43] //replace with the array of your dreams
            }
        }; 
```

更新[了小提琴](http://jsfiddle.net/TXPWK/65/)。

**编辑**（我是回答/评论的新手，不知道评论编辑有时间限制）：

好的，事实证明这个问题与我最初的解释非常不同。我的新解释是，Alouty 想对一组数据使用一对数组：一个包含 x 值数组 ( `[x1,x2,x3,...]`)，另一个包含 y 值 ( `[y1,y2,y3,...]`)。

在最终调用中`.plot()`，每个系列的数据对象必须是`[[x1,y1],[x2,y2],...]`.

虽然数组`u`不是以这种形式创建的（见下文），但它在用作数据之前被转换为坐标对数组（时间序列值作为每对中的 x 值）：

```
var u = [100, 35, 35, 30, 105, 40, 35, 30, 40, 20, 15];
var j = [];
for (var o = 0; o < u.length; o++) {
    j.push([new Date(2012, 5, o + 1), u[o]]);
}
var n = [{
    data: j,
    label: "Sales",
    color: "#E15656"},... 
```

您将无法`u`直接用作数据。您需要将 x 和 y 数组混合到一个坐标对数组中，就像在现有代码中所做的那样。

# javascript - 解析 javascript 的 JSON 响应

> ID：12779261
> 
> 赞同：1
> 
> 时间：2012-10-08T09:52:30.000
> 
> 标签：javascript

如何使用 javascript 解析以下 JSON 数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:02:42.577

您使用 jQuery 解析 JSON 的代码是有效的并且应该可以工作：

```
var Data = $.parseJSON('{"Status":"True","Data":[{"Loginstatus":"Success","agentid":1004}]}'); 
```

现在您可以使用以下方法遍历数组`jQuery.each`：

```
$.each(Data.Data, function(index, item) {
    alert(item.agentid);
}); 
```

如果你想从 AJAX 解析数据，你不需要 $.parseJSON。它已经解析：

```
alert(url.Data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:00:47.687

我通常将[JSON](http://www.json.org/)库用于 JavaScript：[https](https://github.com/douglascrockford/JSON-js) ://github.com/douglascrockford/JSON-js 只需下载 json2.js 并包含在您的页面中，然后调用 JSON.parse，如下所示：

var text = '{"Status":"True","Data":[{"Loginstatus":"Success","agentid":1004}]}';

var myObject = JSON.parse(text);

# wpf - Awesomium WebControl WPF 似乎误解了缩放

> ID：12779262
> 
> 赞同：0
> 
> 时间：2012-10-08T09:52:31.543
> 
> 标签：wpf, awesomium

我正在尝试构建一个简单的原型（使用 Awesomium 1.7 RC3），它允许 WPF 应用程序显示网页，允许放大/缩小页面。我不想保留布局，而是以与调整窗口大小相同的方式调整布局。这与 Internet Explorer 的缩放功能相同。实际渲染放大时，逻辑显示区域会升高。

例如，以下是 100% 缩放的应用程序截图：

![缩放 100%](../Images/fb5b6e4e3ddb9b6f66ec7d4c11e6bcb3.png) [![缩放 100%](../Images/366e621e3b6d533f050da139245e4e59.png)](https://i.stack.imgur.com/Cs4FH.png)
[（来源：[hand-net.com](https://hand-net.com/temp/zoom100_2.PNG)）]

上部滑块允许控制缩放。当我将缩放比例更改为 90% 或 110% 时，我得到的是：

![放大 90%](../Images/752dd9679125a04defa5f40dc0e376ef.png) [![放大 90%](../Images/11b237bf502c24738a59df0be396e79c.png)](https://i.stack.imgur.com/NNBBv.png)
[（来源：[hand-net.com](https://hand-net.com/temp/zoom90_2.PNG)）]

和

![放大 110%](../Images/459bcb4ddd87ed9e2aeb079d14b4ea1d.png) [![放大 110%](../Images/c703c703f6da006e719d3b48fcbc076d.png)](https://i.stack.imgur.com/Mamlq.png)
[（来源：[hand-net.com](https://hand-net.com/temp/zoom110_2.PNG)）]

如您所见，浏览器呈现混乱。不仅内部渲染与WebBrowser控制区域不匹配，而且图片缩放质量非常低。

所有这些都与 Awesomium 1.6.6 一起正常工作。

我怎样才能得到想要的结果？

示例应用程序可在[此处](http://hand-net.com/temp/WpfApplication1.zip)下载。关键部分是：

xml:

```
 <Slider Value="{Binding Path=Zoom, Mode=TwoWay}"
            IsSnapToTickEnabled="True"
            TickPlacement="Both"
            Grid.ColumnSpan="2"
            Minimum="0.1"
            Maximum="2.0"
            TickFrequency="0.1"
            LargeChange="0.1" />

    <Grid x:Name="Container"
          Background="SaddleBrown"
          Grid.Row="1"
          utils:SizeObserver.Observe="true"
          utils:SizeObserver.ObservedWidth="{Binding ContainerActualWidth, Mode=OneWayToSource}"
          utils:SizeObserver.ObservedHeight="{Binding ContainerActualHeight, Mode=OneWayToSource}">
        <Grid x:Name="Containee"
              Background="LightBlue"
              RenderTransformOrigin="0,0"
              Width="{Binding ContaineeWidth, Mode=OneWay}"
              Height="{Binding ContaineeHeight, Mode=OneWay}">
            <Grid.LayoutTransform>
                <TransformGroup>
                    <ScaleTransform ScaleX="{Binding Zoom, Mode=OneWay}"
                                    ScaleY="{Binding Zoom, Mode=OneWay}" />
                    <SkewTransform />
                    <RotateTransform />
                    <TranslateTransform />
                </TransformGroup>
            </Grid.LayoutTransform>
            <awe:WebControl Source="http://www.flickr.com/search/?q=strasbourg&amp;z=m" />
        </Grid>
    </Grid> 
```

用作 DataContext 的 ViewModel：

```
public class ViewPortViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void RaisePropertyChanged(string propertyName)
    {
        Debug.WriteLine("Property changes: " + propertyName);
        if (PropertyChanged != null) PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    private double m_Zoom = 1D;

    public double Zoom
    {
        get { return m_Zoom; }
        set
        {
            if (value != m_Zoom)
            {
                m_Zoom = value;
                RaisePropertyChanged("Zoom");
                RaisePropertyChanged("ContaineeWidth");
                RaisePropertyChanged("ContaineeHeight");
            }
        }
    }

    private double m_ContainerActualWidth = 100D;

    public double ContainerActualWidth
    {
        get { return m_ContainerActualWidth; }
        set
        {
            if (value != m_ContainerActualWidth)
            {
                m_ContainerActualWidth = value;
                RaisePropertyChanged("ContainerActualWidth");
                RaisePropertyChanged("ContaineeWidth");
            }
        }
    }

    private double m_ContainerActualHeight = 100D;

    public double ContainerActualHeight
    {
        get { return m_ContainerActualHeight; }
        set
        {
            if (value != m_ContainerActualHeight)
            {
                m_ContainerActualHeight = value;
                RaisePropertyChanged("ContainerActualHeight");
                RaisePropertyChanged("ContaineeHeight");
            }
        }
    }

    public double ContaineeWidth
    {
        get { return m_ContainerActualWidth / Zoom; }
    }

    public double ContaineeHeight
    {
        get { return m_ContainerActualHeight / Zoom; }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:10:59.710

这看起来类似于我在以前版本的控件中遇到的问题，其中文本以不可读的方式呈现。解决方案（对我来说）是在我的 XAML 中`RenderOptions.BitmapScalingMode`设置`NearestNeighbor`。我从 Awesomium 得到的答案表明，这是一个已知问题，他们正在为此制定多种策略，而我从那时起就没有注意到这个问题，它很可能再次出现。

检查[*带有模糊文本的问题问题*](http://support.awesomium.com/discussions/problems/484-issue-with-blurry-text)，看看它是否解决了您的问题。这就是我的 XAML 最终的样子：

```
 <awe:WebControl x:Name="MyBrowser" 
                    Grid.Row="1" 
                    Focusable="True" 
                    Visibility="Visible" 
                    HorizontalAlignment="Stretch" 
                    VerticalAlignment="Stretch"  
                    SnapsToDevicePixels="True"

                    >
        <awe:WebControl.Style>
            <Style>
                <Setter Property="RenderOptions.BitmapScalingMode" Value="NearestNeighbor" />
            </Style>
        </awe:WebControl.Style>
    </awe:WebControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:56:17.553

我在Perikles 提供的[awesomium 支持论坛问题](https://forums.awesomium.com/viewtopic.php?f=7&t=110&p=205#p205)中找到了解决方案。

解决我的问题的两个步骤：

1.  还将布局转换应用于 webcontrol：

    ```
    <Grid x:Name="Containee"
        Background="LightBlue"
        RenderTransformOrigin="0,0"
        Width="{Binding ContaineeWidth, Mode=OneWay}"
        Height="{Binding ContaineeHeight, Mode=OneWay}">
    <Grid.LayoutTransform>
      <TransformGroup>
        <ScaleTransform ScaleX="{Binding Zoom, Mode=OneWay}"
                        ScaleY="{Binding Zoom, Mode=OneWay}" />
      </TransformGroup>
    </Grid.LayoutTransform>
    <awe:WebControl Source="http://www.flickr.com/search/?q=strasbourg&amp;z=m"
                            LoadingFrameComplete="WebControl_LoadingFrameComplete_1">
      <awe:WebControl.LayoutTransform>
        <ScaleTransform ScaleX="{Binding Zoom, Mode=OneWay}"
                        ScaleY="{Binding Zoom, Mode=OneWay}" />
      </awe:WebControl.LayoutTransform>
    </awe:WebControl>
    </Grid> 
    ```

2.  订阅 LoadingFrameComplete 事件以在页面加载后应用渲染转换选项：

    ```
    private bool renderingOptionsApplied;

    private void WebControl_LoadingFrameComplete_1(object sender, Awesomium.Core.FrameEventArgs e)
    {
        if (renderingOptionsApplied)
            return;
        var webControl = sender as Awesomium.Windows.Controls.WebControl;

        if ((webControl.Surface != null) && (webControl.Surface is WebViewPresenter))
        {
            RenderOptions.SetBitmapScalingMode(webControl.Surface as WebViewPresenter, BitmapScalingMode.Linear);
            renderingOptionsApplied = true;
        }
    } 
    ```

# iphone - 如何在 ios6 中将设备令牌发送到服务器？

> ID：12779272
> 
> 赞同：1
> 
> 时间：2012-10-08T09:53:17.190
> 
> 标签：iphone, ios6, devicetoken

我想在我的应用程序中将设备令牌发送到服务器。我正在使用以下方法来检索设备令牌。

```
- (void)application:(UIApplication *)app didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken {
     NSLog(@"deviceToken: %@", deviceToken);
} 
```

但不适用于ios6。怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T10:07:10.903

你写过这一行吗

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:
 (UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)]; 
```

在这个函数里面，

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

如果你这样做了，它应该在 iOS 6 中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:23:57.300

如果您使用的是 Urbanariship，则需要先清理 deviceToken，然后再通过 NSURLConnection PUT 将其发送回 urbanairship 服务器。

```
NSString *deviceToken = [[_deviceToken description] stringByReplacingOccurrencesOfString: @"<" withString: @""];
    deviceToken = [deviceToken stringByReplacingOccurrencesOfString: @">" withString: @""] ;
    deviceToken = [deviceToken stringByReplacingOccurrencesOfString: @" " withString: @""]; 
```

否则，您可以使用 NSURequest/NSURLConnection 发送

希望这会帮助你。或者如果您还想要请求和连接的代码，请告诉我们。

# c# - HttpPostedFileBase 锁定文件

> ID：12779276
> 
> 赞同：0
> 
> 时间：2012-10-08T09:53:28.353
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我正在使用`HttpPostedFileBase`. 文件上传没有问题，但是当我尝试从该文件（excel文件）中读取时，我收到一条错误消息，指出我无法从文件中读取，因为它已被锁定。如何从文件中删除锁定/首先使其不锁定文件？

```
[HttpPost]
        public ActionResult Index(HttpPostedFileBase file)
        {
            string path = string.Empty;
            if (file.ContentLength > 0)
            {
                var fileName = Path.GetFileName(file.FileName);
                path = Path.Combine(Server.MapPath("~/App_Data/"), Guid.NewGuid() + fileName);
                file.SaveAs(path);
                file.InputStream.Flush(); 

                file.InputStream.Close();
                file.InputStream.Dispose();

                // Import the file
                ViewData["FileName"] = fileName;
                //Added to ensure that the file had finished being written by the time      I try and read it
                System.Threading.Thread.Sleep(2000);
            }

            return RedirectToAction("Index", new{fileName = path});
        } 
```

上面的代码读取文件并毫无问题地保存它，但下面的代码无法加载该文件：

> var workbook = excelApp.Workbooks.Open（ExcelDocumentLocation，Missing.Value，Missing.Value，Missing.Value，Missing.Value，Missing.Value，Missing.Value，Missing.Value，Missing.Value，Missing.Value，Missing.Value , Missing.Value, Missing.Value, Missing.Value, Missing.Value);

我已经通过在 excel 中打开文件并看到“文件已被另一个用户锁定”消息确认文件被锁定为问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T10:05:17.057

你只需要`file.SaveAs(path);`. 您无需刷新或关闭`file.InputStream`. 这**不会锁定**文件。

正是从它读取的代码锁定了它。我看到您在 ASP.NET MVC 应用程序中使用 Office Interop。不要使用它。这从未打算在多线程环境中使用，例如 ASP.NET 应用程序。Office Interop 的问题在于，您实际上需要在服务器上安装 MS Office，而这从来没有打算以这种方式使用。锁定文件的是 MS Office 进程，而不是简单地将文件存储在磁盘上的 ASP.NET MVC 应用程序。

如果您想在服务器上操作 Office 文档，您可以使用[OpenXML SDK](http://msdn.microsoft.com/en-us/library/office/bb448854.aspx)。

# java - JsonMappingException（原为 java.lang.NullPointerException）

> ID：12779278
> 
> 赞同：14
> 
> 时间：2012-10-08T09:53:36.910
> 
> 标签：java, json, nullpointerexception, jackson, idml

我一直在寻找这个，但没有找到任何答案，所以要么我错过了一些如此明显的东西，没有人写过任何关于它的东西，要么我遇到了一个不寻常的问题。我希望这是第一个...

我正在使用第三方库 ( [IDMLlib](http://idmllib.com) ) 从以 .idml 格式存储的 Adob​​e InDesign 文档中提取信息。内容很容易读取并存储在“Idml”类型的对象中，其中包含我需要的所有内容。现在，我想使用[Jackson JSON](http://wiki.fasterxml.com/JacksonHome)将此对象发送到 Web 客户端（浏览器） 。

我遇到了两个问题：

1）对象树充满了循环引用。我已经通过使用带有注释的 Mix-ins 解决了这个问题

```
@JsonIdentityInfo(generator = ObjectIdGenerators.IntSequenceGenerator.class, property = "@id") 
```

所以现在我已经准备好了很多 Mix-ins，如果问题 2 需要的话。

2）我在序列化时不断收到新的特定于对象的错误。

```
--Output from testMethodsReturnsSomething--
| Failure:  testMethods(package.IdmlServiceTests)
|  com.fasterxml.jackson.databind.JsonMappingException: (was java.lang.NullPointerException) (through reference chain: de.fhcon.idmllib.api.elements.Idml["document"]->de.fhcon.idmllib.api.elements.Document["tags"]->de.fhcon.idmllib.api.elements.tags.Tags["xmltagList"]->java.util.ArrayList[0]->de.fhcon.idmllib.api.elements.tags.XMLTag["tagColor"]->de.fhcon.idmllib.api.elements.typedefs.InDesignUIColorType["greenValue"])
at com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:218)
at com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:183)
at com.fasterxml.jackson.databind.ser.std.StdSerializer.wrapAndThrow(StdSerializer.java:155)
at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:533)
... 
```

我尝试编写自定义 NullValue/NullKey 序列化程序，但这对 NullPointerException 没有帮助。

有没有我可以在我的 Mix-ins 中使用的注释来处理这个问题？
或者我还有其他方法可以序列化这个对象吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2017-04-19T23:25:55.743

你是对的，`Double`可以处理*空*值，`double`但不能。就我而言，我的属性是类型`Long`，但 getter 返回的是`long`值而不是`Long`值。只要值不是*null* ，这是可以接受的。但是当值为*null**时*，杰克逊无法序列化.*`long`*

 *只需更改 getter 以返回 a`Long`而不是`long`固定它。验证您的吸气剂是否返回 a`Double`而不是 a`double`在您的情况下。

ps：我知道这个问题已经很老了，但是因为我遇到了同样的问题，而且这个问题在谷歌答案中排名第二……似乎迟到总比从不

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-11-05T12:51:44.753

我不知道这是否仍然有效，但是我通过更改`com.fasterxml.jackson.dataformat:jackson-dataformat-yaml`. 早些时候我使用的是 2.3.0 并且遇到了同样的错误。我将其更改为 2.7.8，现在可以正常工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-12T20:38:55.893

从 1.5 升级到 spring boot 2.4.1 后，我遇到了同样的问题，问题是在调用 GET 请求时字段之一没有被序列化。之前的代码如下所示（在春季启动升级之前）

```
@Bean
    public RepositoryRestConfigurer getRestConfigurer() {
        return new RepositoryRestConfigurerAdapter() {
            @Override
            void configureJacksonObjectMapper(ObjectMapper objectMapper) {
                super.configureJacksonObjectMapper(objectMapper)
                def validationResponseSerializerUtil = new ValidationResponseSerializerUtil()
                def simpleModule = validationResponseSerializerUtil.getSerializeModule()
                objectMapper.registerModule(simpleModule)
                objectMapper.enable(SerializationFeature.INDENT_OUTPUT)
            }
        }
    } 
```

但是在 spring boot 升级之后，上面的代码（通过 RepositoryRestConfigurer 序列化 ValidationResponse）不起作用，用下面的代码替换它

```
@Bean(name = "objectMapper")
    ObjectMapper objectMapper() {
        def validationResponseSerializerUtil = new ValidationResponseSerializerUtil()
        def simpleModule = validationResponseSerializerUtil.getSerializeModule()
        ObjectMapper objectMapper=new ObjectMapper()
        objectMapper.registerModule(simpleModule)
        objectMapper.enable(SerializationFeature.INDENT_OUTPUT)
        return objectMapper
    } 
```

现在一切正常

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-19T14:20:31.067

我在一个使用@com.fasterxml.jackson.annotation.JsonCreator 标记构造函数的类上遇到了 NullPointerException。当我删除标签时，反序列化 json -> mojo 起作用了。*

# sed - 如何查找和打印具有严格模式的行是合适的

> ID：12779284
> 
> 赞同：0
> 
> 时间：2012-10-08T09:54:05.800
> 
> 标签：sed, pattern-matching, strict, busybox

问题如下。有一个带有一组字符串 testfile 的文件：

```
string2 var var33
string2 HD loop 334
000:000:7878:7878:8978
string1 var var33    
string1 HD loop
000:000:7878:7878:8978
string3 var var33
string3 HD loop4343
000:000:7878:7878:8978 
```

需要找到一条具有严格模式的行是合适的，例如“HD loop”，然后输出在该行及其之后找到的字符串。换句话说，结果应该是这样的：

```
string1 var var33
string1 HD loop
000:000:7878:7878:8978 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:50:41.497

也许您正在寻找*context*和*max_count*。使用`GNU grep`：

```
grep -C 1 -m 1 "HD loop" file.txt 
```

如果您只想输出匹配的行及其后面的行：更改`-C 1`为`-A 1`.

编辑：

```
grep -P -C 1 "\bHD loop\b" file.txt 
```

编辑：

```
grep -C 1 "[^a-zA-Z0-9_]HD loop[^a-zA-Z0-9_]" file.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:06:52.293

在`awk`一个`shell`：

```
awk '
    {
        arr[c++] = $0
    }
    END{
        for (a in arr) {
            if (arr[a] ~ "HD loop") {
                printf("%s\n%s\n%s\n", arr[a-1], arr[a], arr[a+1])
                exit
             }
        }
    }
' FILE 
```

另一种不需要填充太多 RAM 的实现：

```
awk '
    {
        if ($0 ~ "HD loop") {
            print var
            print $0
            getline
            print
            exit
        }
        else{
            var=$0
        }
    }
' FILE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:23:42.870

既然您要的是一个`sed`程序，那么这里有一个可以给出您所寻求的答案的程序

```
sed -n -f xfile.sed xfile.txt 
```

其中*xfile.txt*是您的示例输入文件，而*xfile.sed*是

```
H
/HD loop/{
  x
  p
  n
  p
  q
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T14:01:34.283

```
awk '{for(i=1;i<NF;i++)if($i" "$(i+1)=="HD loop"){print x;print;getline;print}};{x=$0}' your_file 
```

测试如下：

```
> cat temp
    000:000:7878:7878:8978
    string1 var var33    
    string1 HD loop
    000:000:7878:7878:8978
    string3 var var33
    string3 HD loop4343
    000:000:7878:7878:8978

> awk '{for(i=1;i<NF;i++)if($i" "$(i+1)=="HD loop"){print x;print;getline;print}};{x=$0}' temp
    string1 var var33    
    string1 HD loop
    000:000:7878:7878:8978 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T23:58:59.910

这可能对您有用（GNU sed）：

```
sed '$!N;/HD loop$/!D;$!N;p;d' file 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T11:52:14.390

使用 sed：

```
#!/bin/sed -nf

/HD loop$/ {
    x
    G
    N
    p
    s/.*\n\([^\n]*\)/\1/
}
h 
```

当在行尾（由`$`字符表示）找到“HD 循环”时，执行命令块。该命令块首先使用交换命令将保持空间（辅助缓冲区）的内容与模式空间（工作缓冲区）的内容`x`交换。正如我们稍后将看到的，我们将保留最后一行读取的保持空间。该`G` 命令会将保持空间（现在包含当前行）的内容附加到模式空间中，并且该`N`命令将读取输入的下一行并将其附加到模式空间中。然后我们可以用`p`命令。最后要做的是恢复保持空间。我们使用两个命令来做到这一点。第一个是替代命令，它从模式空间中删除除最后一行之外的所有行。然后我们用命令复制模式空间来保存空间`h`。

即使该行与“HD 循环”不匹配，它也会被复制以保留空间。通过这样做，保持空间将始终包含上一行的内容。请注意，由于我们在找到匹配项后设置保留空间的方式，它不能正确识别出现在连续行上的两个匹配项。如果要考虑这一点，则需要进行一些特殊处理：

```
#!/bin/sed -nf

/HD loop$/ b next
h

:start
n

/HD loop$/ {
    x
    G
    :next
    N
    p
    s/.*\n\([^\n]*\)/\1/
    /HD loop$/ b next
    d
}
h
b start 
```

对于更完整和通用的版本，我们必须首先考虑在第一行找到“HD loop”时会发生什么。在以前的版本中，它会打印一个空行，然后是“HD loop”行。因为这会使输出混淆，认为 HD 循环实际上前面有一个空行，所以我们必须对此进行特殊处理。特殊处理是使用我们自己的覆盖 sed 的评估循环。

我们`start`用命令定义了一个标签`:`，它定义了我们循环的开始。然后，在脚本结束时，我们使用`b`分支命令跳回到循环的开头。为了完全模仿 sed 的评估循环，`start`标签之后的第一个命令是 `n`下一个命令，将下一个输入行读入模式空间。

定义了循环后，我们可以处理第一种特殊情况，即第一行以 HD 循环开头的情况。如果是这样，我们必须跳过加载保持空间的内容，因为我们知道它不包含任何有用的数据。`next`让我们在命令之后定义一个标签`G`以附加保留空间的内容。我们现在可以使用`/HD loop/ b next`跳过保持空间操作，只打印当前行和后面的行。

如果第一行不是以“HD loop”开头的，我们必须先将其存储到保持空间中，然后`n`再用另一个命令替换它。所以我们用`h`命令来做到这一点。

下一个特殊情况是两条“HD 循环”线彼此跟随出现。在这种情况下，在之前版本的块末尾，我们可以检查新读取的行是否包含“HD loop”，如果是，我们可以简单地跳回`next`标签以读取另一行并打印它。我们可以根据需要多次执行此操作，处理尽可能多的连续“高清循环”行。

最后一种特殊情况是两条“HD 循环”线被一条线隔开。如果我们保持原样，这种情况将打印两次“HD loop”行之间的行。为了解决这个问题，如果在匹配后立即找到“HD 循环”行，我们必须表现得好像不需要打印保持空间。因为这种情况类似于我们查看输入的第一行时发生的情况，所以我们可以`d`在匹配结束时使用删除命令来清除模式空间并重新启动整个脚本。现在它的行为就好像该行是第一个输入行，并且如果匹配之后的行是“HD 循环”行，则不会打印保持空间。

**更新**：如果你只想要第一个结果，你可以简化一些事情：

```
#!/bin/sed -nf

/HD loop$/ b next
h

:start
n

/HD loop$/ {
    x
    G
    :next
    N
    p
    q
}
h
b start 
```

现在，我们可以使用`q`命令退出，而不是在打印该行后执行所有先前的操作。

希望这会有所帮助=)

# java - Java 1.6 中 @Override 注释的意义何在

> ID：12779286
> 
> 赞同：2
> 
> 时间：2012-10-08T09:54:08.807
> 
> 标签：java, overriding

> **可能重复：**
> [您何时使用 Java 的 @Override 注释，为什么？](https://stackoverflow.com/questions/94361/when-do-you-use-javas-override-annotation-and-why)

由于此注释，我一直遇到不兼容问题。无论如何，拥有它有什么意义？

简单地覆盖一个方法和覆盖一个方法+用@override注释它有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T09:56:18.843

引用`@Override`JavaDoc：

> 如果使用此注解类型对方法进行注解但未覆盖超类方法，则编译器需要生成错误消息。

所以一个好的答案是“在编译时防止潜在的运行时错误”:-)

干杯，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T09:57:02.887

如果您没有真正覆盖方法，那么关键是启动错误。

例如，您有

```
public class SuperClass {
  public void doSomething(int a) {
  }
} 
```

扩展时可能会出错

```
public class SubClass {
  public void doSomething(String a) {
  }
} 
```

现在您是否相信您已经重新实现了超类方法，但您只是添加了一个新方法。

在方法声明之前添加`@Override`，会显示错误，所以你知道有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T09:56:39.203

它清楚地表明方法应该覆盖父方法。

如果您遇到问题，这表明您在父类中进行了许多不兼容的更改（没有让您的 IDE 为您执行此操作），或者您正在使用 Java 5.0 编译代码，如果您正在实现接口，则不允许使用此注释。

# c# - 创建 Windows 应用商店应用时出现问题。（视窗 8）

> ID：12779293
> 
> 赞同：5
> 
> 时间：2012-10-08T09:54:42.553
> 
> 标签：c#, microsoft-metro, visual-studio-2012, windows-store-apps

当我在 Visual Studio 中创建一个新的空白应用程序 (XAML) 项目时，我收到以下错误：

以某些参考文献开头是不正确的。在新的解决方案中真的应该是这样吗？（还没有写任何东西）如果我尝试在这一点上构建，我会得到：

> 无法解析 Windows 元数据

所以我想我会解决命名空间问题。这是通过添加对 Window 的引用并添加命名空间`Windows.UI.XAML`；之后我收到了超过 3000 个（3136）错误，其中有一些：

> *   .winmd 文件“Windows.winmd”包含类型“Windows.Globalization.ILanguageStatics”。保留使用 Windows 命名空间。
> *   .winmd 文件“Windows.winmd”包含类型“Windows.Globalization.ICalendarFactory”。保留使用 Windows 命名空间。
> *   .winmd 文件“Windows.winmd”包含类型“Windows.Globalization.IGeographicRegion”。保留使用 Windows 命名空间。
> *   .winmd 文件“Windows.winmd”包含类型“Windows.Globalization.DayOfWeek”。保留使用 Windows 命名空间。
> *   等等

**到目前为止我尝试过的**

*   修复 Visual Studio
*   修复 SDK'
*   卸载/重新安装 SDK'

'[适用于 Windows 8 的 Windows 软件开发工具包 (SDK)](http://msdn.microsoft.com/en-us/windows/hardware/hh852363.aspx)

我还应该补充一点，我已经将我的 Windows 7 升级到了 Windows 8。

有人对如何解决此问题有任何建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T15:33:06.167

我刚刚用 VS 2012 Update 2 解决了这个问题。输出中还有一个警告，比如“找不到 'Windows.winmd' 文件的实现细节”（我没有保存这个文本，所以不要'不记得确切的拼写。这个警告​​指向某个项目Debug文件夹中的Windows.winmd。我发现这个文件夹实际上包含这个文件的副本。显然，VS出于某种原因制作了这个副本。删除它后我能够再次构建我的项目。

因此，请在重新安装 SDK、VS 或 Windows 8 之前阅读所有警告

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-27T13:09:16.783

我有一个在多个端口之间共享的通用便携式项目。为了解决这个问题，我找到了 Windows 参考并将 Copy Local 更改为 False。从那以后一直很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T15:02:28.403

一位同事对他的推荐信也有类似的问题。虽然，他使用的是 Win 7 而不是 Win 8。他所做的是重新安装 Windows 8 SDK。

[http://msdn.microsoft.com/en-us/windows/hardware/hh852363.aspx](http://msdn.microsoft.com/en-us/windows/hardware/hh852363.aspx)

在完成整个 Win 8 之前可能值得一试。

# javascript - 滚动到 jQuery 无法正常工作的文档顶部

> ID：12779295
> 
> 赞同：1
> 
> 时间：2012-10-08T09:54:47.667
> 
> 标签：javascript, jquery, html, css

我正在使用 jQuery 构建智能手机应用程序 (iOS)。我有 2 个 div，一个显示事件列表，另一个显示一个事件。这是他们的样子：

```
<div id="output">

            </div>
<div id="single" style="background-color: red;">

</div> 
```

第一个单曲隐藏在 document.ready 上。

向下滚动页面并单击事件时，它会显示#single 并隐藏#output。现在，问题是，它保留 x + y 值的当前页面“位置”，而不是像使用新页面那样转到顶部，因此页面显示为空白，但内容不在页面视图中（并且不能滚动）。这就是我尝试将文档置于顶部的方式：

```
function showSingle(itemId){

                $('#output').hide();
                $('#single').show();
    $("#single").scrollTop(0);
/* ajax */
} 
```

然而，这并没有把它带到顶部，我犯了错误吗？谢谢

编辑：

这是在我点击之前：imgur.com/Mitlp 这是在点击之后：imgur.com/873pO

它应该看起来像：http: [//imgur.com/nPGU8](http://imgur.com/nPGU8)

第二次编辑：函数内部的 AJAX

```
$.ajax({
                        url: 'http://dev.24323423.co.uk/getSingle.php',
                        dataType: 'jsonp',
                        data: { dbId: itemId },
                        jsonp: 'jsoncallbackSingle',
                        timeout: 8000,
                        success: function(data, status){
                            $.each(data, function(i,item){ 
                                var linkedPageSingle = '<p><a href="#" onClick="homePage(1)">Back</a></p><h2>'+item.eventName+'</h2>'
                                    + '<p>Description: '+item.description+'</p><p>Type: '
                                    + item.type+'</p><p id="pageid">'+item.id+'</p>';

                                $('#single').append(linkedPageSingle);
                            });
                        },

                        error: function(){
                            $('#single').text('There was an error loading the data.');
                        }

                    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T10:03:28.853

使用`window.scrollTo(0, 0);`或`$(document).scrollTop(0);`将文档滚动到顶部，而不是`$("#single").scrollTop(0);`。

[`.scrollTop()`](http://api.jquery.com/scrollTop/)设置所选元素的顶部滚动偏移值，而不是相对于文档。

如果您只是希望页面滚动`#single`可见（而不是到顶部），请使用`$("#single")[0].scrollIntoView();`.

**注意：**您可能希望将滚动部分移动到and*之后*。`show()``hide()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:30:15.507

我的猜测是在第一个 div 真正隐藏并且第二个 div 真正可见之前执行滚动。尝试这个：

```
function showSingle(itemId){
    $('#output').hide();
    $('#single').show(0, function(){
        $(document).scrollTop(0);
        /* ajax */
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T11:51:00.310

首先感谢帮助过的人。然而，我没有试图解决我遇到的问题，而是找到了解决方法。这是我使用的：

```
 var linkedPage = '<h2><a href="#" onClick="takeToSingle('+item.id+')">'+item.eventName+'</a></h2>'
                            + '<p>Date: '+item.date+'</p><p>Description: '+item.description+'</p><p>Type: '
                            + item.type+'</p><p id="pageid">'+item.id+'</p>';

                        output.append(linkedPage);

 function takeToSingle(itemId){
                localStorage.setItem("pageID",itemId);
                document.location.href = 'page1.html';
            } 
```

这将设置一个本地存储项并发送到 page1.html 我检索它：

```
 pageId = localStorage.getItem("pageID"); 
```

# javascript - 如何使用javascript获取嵌入在xml标签中的值？

> ID：12779300
> 
> 赞同：0
> 
> 时间：2012-10-08T09:55:04.330
> 
> 标签：javascript, jquery, xml-parsing

我有一个这样的 xml 字符串：

```
<?xml version="1.0"?> 
<itemsPrice> 
    <setA> 
          <Category Code="A1">
                <price>30</price> 
          </Category> 
          <Category Code="A2">
                  <price>20</price> 
          </Category> 
     </setA>
    <setB> 
          <Category Code="A3"> 
                <price>70</price> 
           </Category> 
          <Category Code="A4"> 
                <price>80</price> 
          </Category> 
    </setB> 
</itemsPrice> 
```

如何在 javascript 变量或数组中获取属性“代码”的值？我想要的是：A1、A2、A3、A4 最好在一个数组中。或者，如果它也可以在“每个”函数中获得，那也很好。我该如何在 Javascript 中进行此操作？

这是我尝试过的：

```
var xml=dataString;  // above xml string
xmlDoc = $.parseXML( xml );
$xml = $( xmlDoc );
$code = $xml.find("Category");
alert($code.text());  // gives me the values 30 20 70 80
                      // I want to get the values A1 A2 A3 A4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:08:52.520

您可以使用以下脚本获取数组中的所有代码

```
codeArray = []
$($($.parseXML(dataString)).find('Category')).each(function(){ codeArray.push($(this).attr('Code'))}) 
```

codeArray 将是`["A1", "A2", "A3", "A4"]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:20:02.177

试试这个

```
var arr = [];
$code = $xml.find("Category");

$.each( $code , function(){
    arr.push( $(this).attr('Code'));
});

console.log( arr);  // Will have the code attributes 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:22:35.800

这应该可以帮助你

```
$xml.find('Category').each(function(){
   alert($(this).attr('Code'));
}); 
```

# javascript - 在动力学 js 中旋转画布内的图像并在该图像上涂鸦

> ID：12779301
> 
> 赞同：2
> 
> 时间：2012-10-08T09:55:08.410
> 
> 标签：javascript, image, html, kineticjs

实际上，我正在画布中加载图像并在其上涂鸦然后旋转。它工作正常。旋转图像后如果我尝试涂鸦或写任何东西，线条会按照之前的坐标打印（即，在旋转图像之前）。

使用此代码我正在旋转图像。

```
image.setRotationDeg(image.getRotationDeg()+90); (or)
image.setRotationDeg(90); 
```

旋转图像后，我无法正确获取鼠标位置（或鼠标坐标）。旋转图像后，我想在其上正常涂鸦。

请在这种情况下帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:53:39.073

I'm not certain about Kinetic.JS specifically (never having used it), but from a purely Canvas-oriented standpoint I would use context.save() and context.restore() methods.

Check the Kinetic.JS documentation to see if anything similar is available. Normally, when you rotate the canvas, you rotate everything, including coordinates. save() and restore() allow you to save the current canvas state (coordinate set and transformations), perform some actions, and then restore them afterward.

Relevant link: [http://html5.litten.com/understanding-save-and-restore-for-the-canvas-context/](http://html5.litten.com/understanding-save-and-restore-for-the-canvas-context/)

It's been a while since I worked with Canvas, so please pardon me if my explanation is less than clear. I do hope the link helps explain it better. Hopefully this helps put you on the right track for your own research, at least until somebody more-knowledgeable about Kinetic.JS weighs in.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T14:31:54.020

我看过一个很好的旋转盘教程。这可以帮助你。 [http://www.techrecite.com/html5-canvas-disc-rotation-animation-using-kineticjs/](http://www.techrecite.com/html5-canvas-disc-rotation-animation-using-kineticjs/)

# iphone - ios 6：iPhone 5 中的背景图像视图

> ID：12779304
> 
> 赞同：2
> 
> 时间：2012-10-08T09:55:14.197
> 
> 标签：iphone, ios, uiimageview

在我的 iphone 应用程序中，我使用的是背景图像 bg.png（对于视网膜大小 bg@2x.png）。我将 xcode 更新为 4.5。现在我需要安排 UI 以适应 iPhone 5 - 4 英寸的显示屏。由于框架高度将变为 568，我需要修复我的背景高度也为 568。我在我的应用程序中添加了一个名为 bg-568h@2x.png 的图像。但我没有在 xcode 中为 iPhone 6 模拟器获取此图像。有没有办法得到这个图像？或者我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:58:50.053

试试这个动态代码....

```
self.view.backgroundColor = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"bg.png"]]; 
```

或者

这会造成内存泄漏。要么将 initWithPatternImage 更改为 colorWithPatternImage，要么将你的 UIColor 对象分配给一个变量并正确释放它：

```
UIColor *color = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"bg.png"]];
self.view.backgroundColor = color;
[color release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:15:02.440

将 bg-568h@2x.png 设置为背景图像，并将 ImageView 缩放设置为 Aspect Fill 怎么样？

# selenium-ide - 使用 Selenium IDE 捕获由 javascript 生成的文本框的 xpath

> ID：12779306
> 
> 赞同：1
> 
> 时间：2012-10-08T09:55:17.610
> 
> 标签：selenium-ide

在我的应用程序中，我有一个按钮，如果我点击一个 javascript 弹出窗口，会出现一个文本框来输入任务的名称和一个确定和取消按钮。在自动化过程中，我需要捕获文本框的 xpath 以便输入任务名称。请有人帮我做这件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-15T22:20:01.857

你试过“answerOnNextPrompt”吗？

```
answerOnNextPrompt(answer)
    Arguments:

        answer - the answer to give in response to the prompt pop-up

    Instructs Selenium to return the specified answer string in response to the next JavaScript prompt [window.prompt()]. 
```

# typo3 - 用户登记表

> ID：12779307
> 
> 赞同：0
> 
> 时间：2012-10-08T09:55:19.603
> 
> 标签：typo3

我正在开发typo3空白网站并希望向用户提供注册和登录表单。所以为此我安装了 static_info_tables 扩展和研究

[http://typo3.org/extension-manuals/sr_feuser_register/2.5.9/view/1/5/](http://typo3.org/extension-manuals/sr_feuser_register/2.5.9/view/1/5/) 教程。

但我未能向用户提供注册和登录表格。

请帮助我并提供有关此主题的正确文档链接。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:26:50.273

我解决了我的问题......

表单不可见，因为我没有在模板文件中包含插件。我们可以这样定义插件：-

对于登录表单：

```
plugin.tx_felogin_pi1 {
    templateFile = typo3/sysext/felogin/template.html
    _CSS_DEFAULT_STYLE =
} 
```

报名表：

```
plugin.tx_srfeuserregister_pi1 {
    templateFile = typo3conf/ext/sr_feuser_register/pi1/tx_srfeuserregister_pi1_css_tmpl.html
    _CSS_DEFAULT_STYLE =
} 
```

也不要忘记在您的打字稿模板中包含 FE 用户注册 CSS 样式

# android - 如何在布局中使用菜单

> ID：12779308
> 
> 赞同：-1
> 
> 时间：2012-10-08T09:55:19.290
> 
> 标签：android, android-layout, android-intent, android-emulator, android-menu

我正在寻找布局中的菜单.. 怎么做.. 我不想在操作栏中使用默认菜单。因为我把它禁用了..它在我的应用程序中没有用..我在这方面做得不好..请给我一些示例来做到这一点..提前谢谢你。

我正在使用冰淇淋三明治.sdk 11

下面的图片显示了以这种方式使用操作栏其显示菜单...我不想要这种方式，因为我没有在我的应用程序中使用操作栏 ![在此处输入图像描述](../Images/64c1b961af7d714efec6619b6df9c72a.png)

这是我的实际应用程序，其中包含线性布局，我需要此布局中的菜单。请帮我..

![在此处输入图像描述](../Images/ed7d70e44a7da9e4eb3850716f902691.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:58:25.093

使用一系列自定义视图并处理它们的`onClick'方法来实现片段的切换以充当菜单？

请参阅我的问题[，](https://stackoverflow.com/questions/11831124/action-bar-in-api-level-3-0-but-still-support-api-3-0)了解我是如何实现自定义 ActionBar 的。尽管它是一个动作栏，但原理是相同的。

# php - 如何使用 HTML 和 PHP 创建一个只有一个提交按钮的多表单搜索功能？

> ID：12779311
> 
> 赞同：0
> 
> 时间：2012-10-08T09:55:29.510
> 
> 标签：php, html, mysql, sql, forms

继最近的一篇文章之后。

我正在创建一个查询 SQL 数据库的搜索功能。该数据库由不同类型的肉类包装组成。我创建了 HTML 和 PHP 代码，它将仅使用一个表单和提交按钮来搜索数据库并显示结果。但是我现在想创建一个有多个表单（包括三个下拉表单）的搜索框，当用户输入尺寸时，单击下拉列表并输入 id 代码，他们可以使用一个提交按钮提交，然后将被引用由匹配所有三个组合的结果组成的页面。

谁能给我一些关于如何解决这个问题的见解？我尝试创建两个表单，它们提交到同一个 PHP 页面以获得结果，但一个似乎覆盖了另一个。

*这是我目前的 HTML 和 PHP 代码：*

```
 <body>

    <form action="form2.php" method="post"> 
              Search: <input type="text" name="term" /><br />
    <input type="submit" value="Submit" /> 
    </form> 

</body> 
```

*和 PHP 代码：*

```
 <body>

   <?php
    $con = mysql_connect ("localhost", "root", "");
    mysql_select_db ("delyn_db", $con);

  if (!$con)
    { 
    die ("Could not connect: " . mysql_error());
    }

$term = mysql_real_escape_string($_REQUEST['term']);    

     $sql = "SELECT * FROM delyn WHERE toolcode LIKE '%".$term."%' OR trayheight LIKE
     '%".$term."%' OR delyncode LIKE '%".$term."%' OR description LIKE '%".$term."%' 
      OR trayshape LIKE '%".$term."%' OR traydepth LIKE '%".$term."%' OR traywidth
     LIKE '%".$term."%'";
     $r_query = mysql_query($sql);

if(!$sql)
    {
        echo "could not find";
    }

       while ($row = mysql_fetch_array($r_query)){ 
       echo 'ID: ' .$row['ID']; 
       echo '<br /> Delyn code: ' .$row['delyncode']; 
       echo '<br /> Tool Code: '.$row['toolcode'];
       echo '<br /> Description: '.$row['description']; 
       echo '<br /> Tray range '.$row['trayrange']; 
       echo '<br /> Tray type: '.$row['traytype'];
       echo '<br /> Tray size: '.$row['traysize']; 
       echo '<br /> Tray height: '.$row['trayheight']; 
       echo '<br /> Tray width: '.$row['traywidth']; 
       echo '<br /> Tray depth: '.$row['traydepth'];
       echo '<br /> Tray shape: '.$row['trayshape'];  
       echo '<br /> imagename: '.$row['imagename'];
       echo '<br /> Tray live: '.$row['traylive'] . ' <br /><br />';  
    }

?>

    </body> 
```

提前致谢 ：）

编辑过的php：

```
 <body>

    <?php
$con = mysql_connect ("localhost", "root", "");
mysql_select_db ("delyn_db", $con);

if (!$con)
    { 
    die ("Could not connect: " . mysql_error());
    }

if(isset($_POST['formSubmit']) )
{
    $varType = $_POST['traytype'];
}

$term = mysql_real_escape_string($_POST['term']);    
$sql = "SELECT * FROM delyn WHERE traytype LIKE '%".$varType."%'";

$r_query = mysql_query($sql);

while ($row = mysql_fetch_array($r_query)){ 
echo 'ID: ' .$row['ID']; 
echo '<br /> Delyn code: ' .$row['delyncode']; 
echo '<br /> Tool Code: '.$row['toolcode'];
echo '<br /> Description: '.$row['description']; 
echo '<br /> Tray range '.$row['trayrange']; 
echo '<br /> Tray type: '.$row['traytype'];
echo '<br /> Tray size: '.$row['traysize']; 
echo '<br /> Tray height: '.$row['trayheight']; 
echo '<br /> Tray width: '.$row['traywidth']; 
echo '<br /> Tray depth: '.$row['traydepth'];
echo '<br /> Tray shape: '.$row['trayshape'];  
echo '<br /> imagename: '.$row['imagename'];
echo '<br /> Tray live: '.$row['traylive'] . ' <br /><br />';  
    }

?>
  </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:04:35.380

为什么不在同一个表单上使用多个输入？像这样的东西：

```
<form action="form2.php" method="post"> 
          Search: <input type="text" name="term" /><br />
          Sizes: <input type="text" name="sizes" /><br />
          Select an option: <select name="dropdownselection" ><option...</option></select><br />
          ID Code: <input type="text" name="id" /><br />
<input type="submit" value="Submit" /> 
</form> 
```

然后，您可以像访问为搜索词输入的值一样访问这些值。注意：你应该为你的标签使用标签标签，并使用一个列表来布局你的表单。

编辑：选项标签如下所示：

```
<option value="what is posted to the script">What is seen by the user</option> 
```

编辑：请删除 $vartype 变量赋值周围的条件

编辑：在您的 sql 查询中使用 and，not or，因为您需要两个条件都为真。如果您还有其他问题，请打开一个新问题，因为这个问题有些混乱。最后，如果您觉得这个答案对您有所帮助，请考虑接受它。

# javascript - 如何动态找出一个 div 的 ID 或类？

> ID：12779312
> 
> 赞同：0
> 
> 时间：2012-10-08T09:55:31.363
> 
> 标签：javascript, jquery, ajax, json

我有一个滚动 div，当您水平滚动时，它会通过 API 的 ajax 和 json 加载数据。

我目前可以使用它，但我遇到的问题是我在一个页面上有多个滚动 div。我需要让 jquery 知道正在滚动的 div 的 ID，以便 ajax 可以使用不同的 API 调用将正确的数据加载到该特定的 div。

这是我的代码的 HTML：

```
<div id="ip-technology" class="scroll-box">
<h2>Latest Videogames Titles</h2>
    <a class="view" href="technology.html">See all</a>
    <ul class="scroll-horizontal mCustomScrollbar _mCS_3">
    <div class="mCustomScrollBox mCSB_horizontal" id="mCSB_3" style="position:relative; height:100%; overflow:hidden; max-width:100%;"><div class="mCSB_container" style="position: relative; left: 0px; width: 6721px; ">  
    <li class="product-Magazine">
        <a href="#">
            <span class="store-badge"></span>
        <img src="cover.jpg" width="124" height="166">
    </li>
           </div>

    <div class="mCSB_scrollTools" style="position: absolute; display: block; ">
    <div class="mCSB_draggerContainer" style="position:relative;">
    <div class="mCSB_dragger ui-draggable" style="position: absolute; width: 149px; ">
    <div class="mCSB_dragger_bar" style="position:relative;">
    </div></div><div class="mCSB_draggerRail"></div>
    </div></div></div>
</ul> 
```

这里是 jquery/ajax...

```
 $(".scroll-horizontal").mCustomScrollbar({
        horizontalScroll:true,
        scrollEasing:"easeOutBack",
        advanced:{
            autoExpandHorizontalScroll: true
        },
        callbacks:{
            onTotalScrollOffset: 30,
            onTotalScroll: function(){                  

             var url = 'http://www.URL-TO-API.com' //Needs to somehow pass in the div id

              $.ajax({
                    type: 'GET',
                    url: url,
                    async: true,
                    jsonpCallback: 'callback',
                    dataType: 'jsonp',
                    success: function(data)
                    {

                         $.each(data.products, function(key, val)
                         {
                                if (loadNumber <= 4) {
                                     $('li.loading').before('<li class="product-ebook"><a href="product.html"><span class="store-badge"></span><img src="'+val.image+'" width="124" height="166" /><h3>'+val.title+'</h3></a></li>');
                                };
                                if (loadNumber >= 4) {
                                     $('li.loading').hide();
                                };
                         });

                          $('h3').html(function(index, currentHtml) {
                              return currentHtml.replace('Issue', '<span>Issue')
                                                .replace('Vol', '<span>Vol');
                              $(this).apppend("</span>");
                          });
                          $('.scroll-horizontal').mCustomScrollbar("update");

                    },
                    error: function() {
                        console.log('failed');
                    }
                    });
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:28:36.160

“.scroll-horizo​​ntal”类应用于代码块中的 UL 项目 $(this).attr('id') 将引用 UL 元素的 id，但我相信你想要 div 的 id。

尝试 `$(this).find('.mCSB_horizontal').attr('id');`

这将使 UL 找到带有 mCSB_horizo​​ntal 的 div，然后获取它的 id。

*编辑：查看“this”的使用及其范围。*

我不熟悉您正在使用的滚动插件，但尝试在加载时依次应用于每个元素：

```
$(document).ready(function(){
    $(document).find('.scroll-horizontal').each(function(){
        //for each UL now find its scrolling div
        var the_div_id = $(this).find('.mCSB_horizontal').attr('id');
        //test, should spit all ids out on load
        console.log(the_div_id);

        $(this).mCustomScrollbar({
            //your code
            callbacks:{
                //your code

                //the_div_id should be valid in this scope
                //pass it via ajax property - data:the_div_id,
                //or append it to your url depending on your api
                var url = 'http://www.URL-TO-API.com' //Needs to somehow pass in the div id

            }
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:58:43.500

您可以使用

`this`

这将为您提供正在滚动的特定 div

之后你可以使用

```
$(this).find('.mCSB_horizontal')attr('id'); 
```

获取该 div 的 id

# ios - NSTimer scheduleTimerWithTimeInterval 增加内存分配

> ID：12779313
> 
> 赞同：1
> 
> 时间：2012-10-08T09:55:33.433
> 
> 标签：ios, automatic-ref-counting, nstimer

当我使用重复“YES”`scheduledTimerWithTimeInterval`的方法时`NSTimer`，每次`@selector`调用都会导致内存增加一点

ARC模式下运行的应用~

```
- (void)d{
    NSLog(@"%f -- %f",0.0f , 0.0f);
}

[NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(d) userInfo:nil repeats:YES]; 
```

# java - 自上次数据事件以来经过的时间

> ID：12779314
> 
> 赞同：3
> 
> 时间：2012-10-08T09:55:34.557
> 
> 标签：java, multithreading, executorservice, future

我有一个接收数据更新的类（如下所示）。我的目标是找出自上次数据更新后 5 分钟内是否没有收到任何数据更新。

这是我的代码：

```
public class DataListener {

    private final ScheduledThreadPoolExecutor executor;
    private ScheduledFuture<Void> future;

    public DataUpdateListener() {
        executor = new ScheduledThreadPoolExecutor(1);
    }

    /**
     * Start listening for data.
     */
    public void start() {
        // do some setup...

        rescheduleTask();
    }

    /**
     * Called whenever a data event is received.
     */
    public void onEvent(final DataEvent event) {
        System.out.println("Received event: " + event);
        rescheduleTask();
    }

    private synchronized void rescheduleTask() {
        // cancel the existing task
        if (future != null) {
            future.cancel(true);
            executor.purge();
        }

        // schedule a new one
        future = executor.schedule(new Callable<Void>() {
            @Override
            public Void call() {
                System.out.println("No data events received in the last 5 minutes!");
                // do some stuff...
                shutdown();
                return null;
            }
        }, 5, TimeUnit.MINUTES);
    }

    void shutdown() {
        executor.shutdownNow();
    }    
} 
```

该类维护一个`ScheduledThreadPoolExecutor`. 每当收到数据更新时，它都会取消现有任务并安排新任务。

我想知道这种方法是否可行，或者是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:04:00.923

您是否考虑过优先级队列实现？如果我没有误解您的问题，那么`PriorityBlockingQueue`在这种情况下，类似 a 的内容可能会很有用。特别是，您可以[`poll()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/PriorityBlockingQueue.html#poll%28long,%20java.util.concurrent.TimeUnit%29)使用所需的超时值检查方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:43:09.597

在您的方法中，您明确地`cancel`安排了任务，并安排了一个新任务。这不是**重新安排**.. 这实际上是重新**创建**一个时间表。IMO，您最好将“即将成为”的时间表存储在列表中.. 或 a`queue`或 a `stack`。然后在准备好时检索任务。

# ruby-on-rails - Ruby on Rails：编辑页面上没有保存数据的字段

> ID：12779319
> 
> 赞同：1
> 
> 时间：2012-10-08T09:55:48.917
> 
> 标签：ruby-on-rails, ruby, controller, action, edit

我有一个应用程序，用户可以在其中提交一个新项目。提交后，他们可以选择编辑刚刚提交的项目。单击编辑时，它会再次弹出表单，并显示之前输入的所有数据。

我的问题在于允许用户选择许多技术的领域之一。它链接到另一个名为的表，该表保存表和表`Projecttechnol`之间的链接。当用户单击编辑按钮时，该项目所拥有的所有技术都不会显示出来。如果用户点击一项新技术并保存，则新技术保存，旧的仍然存在。`Technol``Project`

**我对技术的编辑视图：**

```
<%= fields_for(@project_technol) do |ab| %>
  <%= ab.label "Choose Technologies"%> </br>
  <%= collection_select( :technols, :id, Technol.all, :id, :tech, {}, {:multiple => true } ) %>
<% end %> 
```

**我的项目控制器：具有新的、编辑、创建和更新操作**

```
def new

  @project = Project.new
  @technol = Technol.new(params[:tech])

  @all_technols = Technol.all
  tech_ids = params[:technols][:id].reject(&:blank?) unless params[:technols].nil?

  @project_technol = @project.projecttechnols.build

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @project }
    end
  end

def edit
    @project = Project.find(params[:id])

@project_technol = @project.projecttechnols.build

  end

def create  
    @project = Project.new(params[:project])
    @project.client = params[:new_client] unless params[:new_client].blank?
    @technol.tech = params[:new_tech] unless params[:new_tech].blank?
    @project.role = params[:new_role] unless params[:new_role].blank?

    params[:technols][:id].each do |tech|

    if !tech.empty?

    @project_technol = @project.projecttechnols.build(:technol_id => tech) 

end

end

    respond_to do |format|
      if @project.save
        format.html { redirect_to @project, notice: 'Project was successfully created.' }
        format.json { render json: @project, status: :created, location: @project }
      else
        format.html { render action: "new" }
        format.json { render json: @project.errors, status: :unprocessable_entity }
      end
    end
  end

def update
    @project = Project.find(params[:id])
    @project.client = params[:new_client] unless params[:new_client].blank?
    @technol.tech = params[:new_tech] unless params[:new_tech].blank?
    @project.role = params[:new_role] unless params[:new_role].blank?

     params[:technols][:id].each do |tech|

     if !tech.empty?
     @project_technol = @project.projecttechnols.build(:technol_id => tech) 

  end
  end
    respond_to do |format|
      if @project.update_attributes(params[:project])
        format.html { redirect_to @project, notice: 'Project was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @project.errors, status: :unprocessable_entity }
      end
    end
  end 
```

我是rails的新手，所以任何帮助都将不胜感激，在此先感谢。

更新：这是我的项目模型

```
class Project < ActiveRecord::Base
  attr_accessible  :fullname, :edited_first_name, :edited_last_name, :first_name, :last_name, :business_div, :client, :customer_benefits, :edited_date, :end_date, :entry_date, :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary, :tech , :technols, :technol_tokens

has_many :projecttechnols
has_many :technols, :through => :projecttechnols

accepts_nested_attributes_for(:technols) 
```

更新2

参数：

```
{"utf8"=>"✓",
 "_method"=>"put",
 "authenticity_token"=>"+Fdh61iVz2IqZ+bNQz9SIa5ly7nNXaiCEr28hVWUxpM=",
 "project"=>{"project_name"=>"Beverly",
 "status"=>"Completed",
 "client"=>"Qtjpa",
 "business_div"=>"Ecbly",
 "project_owner"=>"Qpzrv",
 "start_date"=>"2012-10-15",
 "edited_date"=>"2012-10-08",
 "projecttechnols"=>{"id"=>["",
 "41"]},
 "role"=>"Ozeoe",
 "industry"=>"Wjfiq",
 "summary"=>"Eypriw lorem ipsum dolor sit amet,
 consectetur adipisicing elit,
 sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
 "lessons_learned"=>"Kbjuhy lorem ipsum dolor sit amet,
 consectetur adipisicing elit,
 sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
 "customer_benefits"=>"Fsonlw lorem ipsum dolor sit amet,
 consectetur adipisicing elit,
 sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",,
 "keywords"=>"Bwdtm"},
 "new_client"=>"",
 "new_business_div"=>"",
 "new_project_owner"=>"",
 "new_role"=>"",
 "new_industry"=>"",
 "commit"=>"Save Edit",
 "id"=>"103"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:16:20.657

```
<%= fields_for(@project_technol) do |ab| %>
  <%= ab.label "Choose Technologies"%> </br>
  <%= collection_select( :technols, :id, Technol.all, :id, :tech, {}, {:multiple => true } ) %>
<% end %> 
```

应该是这样的：

```
<%= f.fields_for(:projecttechnols) do |ab| %>
  <%= ab.label "Choose Technologies"%> </br>
  <%= ab.collection_select(:id, Technol.all, :id, :tech, {}, {:multiple => true } ) %>
<% end %> 
```

但是，`f`应替换为您用于 form_for 块的参数。喜欢：

```
form_for(@project) do |f| 
```

还要确保您`Project`包含与嵌套模型的正确关系，并且它具有`accepts_nested_attributes_for`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:20:01.607

您已`:multiple => true`在`collection_select`.

# sql - SCOPE_IDENTITY() 与会话或表相关吗？

> ID：12779323
> 
> 赞同：0
> 
> 时间：2012-10-08T09:56:12.273
> 
> 标签：sql, sql-server, sql-server-2008

> **可能重复：**
> [使用 @@identity 而不是 scope_identity 的原因](https://stackoverflow.com/questions/353526/reason-for-using-identity-rather-than-scope-identity)

当用户向表中添加记录时，我想返回该记录的 ID，以便在插入之后的页面中使用。我目前正在使用此命令（参见示例）：

```
INSERT INTO tCRnames (fname, lname) VALUES ('Super','Man')
DECLARE @Id INT;
SET @Id = SCOPE_IDENTITY();
SELECT @Id; 
```

关于这种方法，我有两个问题。

1.  此命令与会话相关吗？这意味着如果两个用户同时插入一条记录，返回的 ID 会有问题吗？

2.  有没有更好的方法来返回插入的 ID？目前我所有的 ID 都是正常的身份字段，这很好；但是我们正在考虑对我们的一些服务进行一些更改，这将给我们留下不是身份字段的 ID 字段。

然后，您将获得一个生成的 ID，例如“TMP001-05”或“000004”。

如何从该插入返回插入的 ID（除了在生成时返回它）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:00:48.227

1.  scope_identity() 用于会话
2.  使用[OUTPUT](http://msdn.microsoft.com/en-us/library/ms177564.aspx)子句，如果您有一个操作/创建 id 的子句，它将在触发后获取 id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:04:56.250

1.  该值是会话本地的，因此如果不同的用户同时添加记录，则没有问题。

2.  如果 id 不是自动生成的，那么您可以自己创建它，因此最简单的方法就是保留该值。正如 RichardTheKiwi 建议的那样，您还可以使用`output`从插入的记录中获取值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:58:43.757

据我了解，您这样做的方式是“最佳”方式，并将*从当前事务*返回 INSERTed 行的 ID 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T09:58:55.420

[请参阅http://msdn.microsoft.com/en-us/library/ms190315.aspx](http://msdn.microsoft.com/en-us/library/ms190315.aspx)上的文档

> **SCOPE_IDENTITY和@@IDENTITY 返回*****在当前会话的任何表中***生成的最后一个标识值。但是，**SCOPE_IDENTITY**返回仅在当前范围内插入的值；@@IDENTITY 不限于特定范围。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T10:00:23.250

它与当前会话+当前语句相关

# java - 测试相关查询

> ID：12779326
> 
> 赞同：-1
> 
> 时间：2012-10-08T09:56:18.810
> 
> 标签：java, testing, maven, testng

> **可能重复：**
> [ClassNotFoundException - 用于测试目的](https://stackoverflow.com/questions/12777583/classnotfoundexception-for-testing-purposes)

是否可以使用另一个模块中存在的 testng 运行属于某个其他 maven 模块的类。即如果有模块 A 和 B，在模块 A 内我想使用 testng.xml 运行模块 2。请告诉我如果可能的话。谢谢

我想它可能不允许测试...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:41:53.753

据我了解您问题的本质，您应该向 maven surefire 插件的方向进行调查。[这是关于使用 Maven 和 JUnit 类别进行单元和集成测试](http://johndobie.blogspot.com/2012/04/unit-and-integration-tests-with-maven.html)的注释 从我当前项目的角度来看，我使用了以下内容： ![在此处输入图像描述](../Images/fdbee84d5c9362f6c065b36ecd1d67dd.png)

rms-web pom：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.11</version>
            <dependencies>
                <dependency>
                    <groupId>org.apache.maven.surefire</groupId>
                    <artifactId>surefire-junit47</artifactId>
                    <version>2.12</version>
                </dependency>
            </dependencies>
                            <configuration>
                <!--<includes>-->
                    <!--<include>**/*.class</include>-->
                <!--</includes>-->
                <excludedGroups>com.exadel.rms.selenium.SeleniumTests</excludedGroups>

            </configuration>

        </plugin>

PassTest.java
package com.exadel.rms.selenium;

import org.junit.Test;

import java.io.IOException;

import static org.junit.Assert.assertTrue;

/**
 * Created with IntelliJ IDEA.
 * User: ypolshchykau
 * Date: 8/28/12
 * Time: 8:38 PM
 * To change this template use File | Settings | File Templates.
 */
public class PassTest {

    @Test
    public void pass() throws IOException, InterruptedException {
        assertTrue(true);
    }
}

SeleniumTests.java

package com.exadel.rms.selenium;

/**
 * Created with IntelliJ IDEA.
 * User: ypolshchykau
 * Date: 8/27/12
 * Time: 6:49 PM
 * To change this template use File | Settings | File Templates.
 */
public class SeleniumTests {
}

LoginPageTestSuite.java
package com.exadel.rms.selenium;

import org.junit.Assert;
import org.junit.Test;
import org.junit.experimental.categories.Category;
import org.openqa.selenium.By;

import java.io.IOException;

@Category(SeleniumTests.class)
public class LoginPageTestSuite extends BaseSeleniumTest {

    @Test
    public void pressLoginButton() throws IOException, InterruptedException {
        doLogout();
        fluentWait(By.cssSelector(propertyKeysLoader("login.loginbutton"))).click();

        Assert.assertTrue(fluentWait(By.cssSelector(propertyKeysLoader("login.validator.invalidautentication"))).getText().trim().equals("Invalid authentication"));
    }
…..........
} 
```

在完成上述所有步骤后，我运行控制台并运行以下 maven 命令：

```
mvn -Dmaven.buildNumber.docheck=false -Dmaven.buildNumber.doUpdate=false clean test 
```

用于验证您所有标记的类别是否正常工作。

希望这对您有所帮助。

# java - Spring ConversionService 添加转换器

> ID：12779329
> 
> 赞同：17
> 
> 时间：2012-10-08T09:56:24.533
> 
> 标签：java, spring, type-conversion

我搜索了以下问题，但找不到答案。

我想通过编写实现**org.springframework.core.convert.converter.Converter**的自定义转换器来使用 spring 的转换服务。

然后我添加我的自定义转换器如下：

```
<bean id="conversionService" class="org.springframework.context.support.ConversionServiceFactoryBean">
    <property name="converters">
        <list>
            <bean id="StringToLoggerConverter" class="com.citi.spring.converter.LoggerConverter" />
       </list>
   </property>
</bean> 
```

执行上述操作时，我的应用程序初始化失败，因为我正在覆盖 bean conversionService 并仅注册我的自定义转换器。

我怎么能不覆盖conversionService，只将我的自定义转换器添加到转换器列表中，同时保留现有的转换器？

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-08-07T12:22:22.083

对于现在通过谷歌搜索或类似问题最初发布 2 年多后偶然发现此问题的任何人，通过 Java Config 添加转换器变得更加容易：`WebMvcConfigurerAdapter`提供`addFormatters(FormatterRegistry)`可用于指定其他自定义转换器的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T11:01:15.277

在尝试不同的方式，甚至在一些中遵循 spring 源代码时，我遇到了一件有趣的事情。

我发现使用conversionService 而不用我的自定义转换器覆盖现有转换器的唯一方法是扩展或重新实现conversionService，调用超类的afterPropertiesSet() 方法来注册默认转换器，然后添加自定义转换器。

但即使我使用这种方式，在运行时我也会遇到一个异常，即没有为我的特定类型找到转换器（例如，从 String 到 Logger）。

这引发了我的兴趣，我按照 spring 源代码找出原因，我意识到 spring 试图找到一个使用 PropertyEditor 注册的自定义转换器。我不确定为什么会这样。我必须在这里补充一点，我的应用程序没有使用 spring mvc，并且 conversionService 可能需要以某种方式注册，而我没有这样做。

最后，我解决了使用属性编辑器注册自定义转换器的问题。本文档可作为参考：

[http://static.springsource.org/spring/docs/current/spring-framework-reference/html/validation.html](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/validation.html)

我很想知道为什么 Spring 没有在转换服务的注册表中找到我注册的自定义转换器（或者至少为什么 Spring 没有查看该注册表来查找自定义转换器）。我错过了任何配置吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-30T19:40:59.813

您还可以在 DefaultConversionService-ish 类上使用 addConverter 方法动态添加它：

```
DefaultConversionService cs = new <YourClassThatInheritsFromDefaultConversionService or DefaultConversionService>();

cs.addConverter(new MyConverter()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-03T20:15:16.023

在 spring > 4 的情况下，不再需要实现自己的 ConversionService 派生。在 @Configuration 注解的类中初始化它，如下所示：

```
@Configuration
public class ConversionServiceProvider
{
    @Autowired
    private MyConverterImpl myConverter;

    @Bean
    public ConversionService getConversionService()
    {
        ConversionServiceFactoryBean bean = new ConversionServiceFactoryBean();
        bean.setConverters( getConverters() );
        bean.afterPropertiesSet();
        ConversionService object = bean.getObject();
        return object;
    }

    private Set<Converter<?, ?>> getConverters()
    {
        Set<Converter<?, ?>> converters = new HashSet<Converter<?, ?>>();

        converters.add( myConverter );
        // add here more custom converters, either as spring bean references or directly instantiated

        return converters;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T12:54:51.537

在 Stackoverflow 中遇到了一种非常有趣的方法 - [https://stackoverflow.com/a/12760579/204788](https://stackoverflow.com/a/12760579/204788)

使用名为[Collection merging](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-collection-elements-merging)的功能，您基本上可以这样做：

```
<bean id="customConversionService" class="org.springframework.context.support.ConversionServiceFactoryBean" parent="conversionService">
    <property name="converters">
        <list merge="true">
            <bean id="StringToLoggerConverter" class="com.citi.spring.converter.LoggerConverter" />
       </list>
   </property>
</bean> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-03T07:43:28.790

覆盖 ConversionServiceFactoryBean.afterPropertiesSet() 并将 ConversionService 对象设置为您的转换器就足够了。让您的转换器实现一些允许设置 ConversionService 对象的接口，例如 ConversionServiceAware。唯一的问题是访问已注册的转换器，因此您还必须覆盖“setConverters()”方法。

```
public class MyFormattingConversionServiceFactoryBean extends FormattingConversionServiceFactoryBean {

    private Set<?> cachedConverters = new LinkedHashSet<>();

    @Override
    public void setConverters(Set<?> converters) {
        super.setConverters(converters);
        this.cachedConverters = new LinkedHashSet<>(converters);

    }

    @Override
    public void afterPropertiesSet() {
        super.afterPropertiesSet();
        FormattingConversionService conversionService = getObject();
        for (Object converter : cachedConverters) {
            if (converter instanceof ConversionServiceAware) {
                ((ConversionServiceAware) converter).setConversionService(conversionService);
            }
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-02-05T20:29:13.323

要解决任何循环依赖关系，请执行以下步骤（Spring Boot v5.2.1）：

注册一个简单的转换服务

```
@Configuration
public class ConverterProvider {

    @Bean
    public ConversionService conversionService() {
        ConversionService conversionService = new GenericConversionService();
        return conversionService;
    }
} 
```

注入您的自定义转换器

```
@Component
public class ConvertersInjection {

    @Autowired
    private GenericConversionService conversionService;

    @Autowired
    private void converters(Set<Converter> converters) {
        converters.forEach(conversionService::addConverter);
    }
} 
```

转换器甚至可以自动连接您的转换服务

```
@Component
public class PushNotificationConverter implements Converter<PushNotificationMessages.PushNotification, GCM> {
    @Lazy
    @Autowired
    private ConversionService conversionService;

    @Override
    public GCM convert(PushNotificationMessages.PushNotification source) {
        GCM gcm = new GCM();
        if (source.hasContent()) {
            PushNotificationMessages.PushNotification.Content content = source.getContent();
            if (content.hasData()) {
                conversionService.convert(content.getData(), gcm.getData().getClass());
            } else if (content.hasNotification()) {
                conversionService.convert(content.getNotification(), gcm.getNotification().getClass());
            }
        }
        return gcm;
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-08T12:24:35.530

编写自定义转换服务

```
public class CustomerConversionServiceFactoryBean extends ConversionServiceFactoryBean {

    List<Converter<Object, Object>> converters = new ArrayList<>();

    public CustomerConversionServiceFactoryBean() {
        super();

    DefaultConversionService conversionservice = (DefaultConversionService)  super.getObject();

        for(int i=0;i<converters.size();i++){
            conversionservice.addConverter(converters.get(i));
        }
    }
} 
```

然后改变你的xml

```
<bean id="conversionService"
    class="CustomerConversionServiceFactoryBean" >
    <property name="converters" >
        <list>
            <bean class="CustomConverter"  />
        </list>
    </property>
</bean> 
```

我想这会帮助你...

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-09-16T12:05:13.773

这个变体对我有用。如果您使用 java 配置，您可以将转换器添加到现有的`GenericConversionService`

[https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/annotation/Autowired.html](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/annotation/Autowired.html)

```
Config methods may have an arbitrary name and any number of arguments; each of those arguments will be autowired with a matching bean in the Spring container. Bean property setter methods are effectively just a special case of such a general config method. Such config methods do not have to be public.

    @Configuration
    class MyConfig {

    @Autowired
    void conversionService(GenericConversionService genericConversionService) {
        genericConversionService.addConverter(String.class, UUID.class, UUID::fromString);
        genericConversionService.addConverter(String.class, DateTime.class, DateTime::parse);
        genericConversionService.addConverter(String.class, EnumState.class, EnumState::valueOf);
    }
} 
```

# mysql - OpenGeoDB：将 mySQL 数据迁移到 postgreSQL

> ID：12779330
> 
> 赞同：0
> 
> 时间：2012-10-08T09:56:32.507
> 
> 标签：mysql, ruby, postgresql, ruby-on-rails-3.2, postgis

我想为我的 Ruby on Rails 项目使用[OpenGeoDB 。](http://opengeodb.giswiki.org/wiki/OpenGeoDB)Kostiantyn Kahanskyi 编写了[active_geo_db](https://github.com/kostia/active_geo_db) gem，它是一个“用于访问 OpenGeoDb 的 Rails (ActiveRecord) 库”。问题是它使用 MySQL 而我使用 PostgreSQL。有没有办法使用 PostgreSQL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:46:40.677

OpenGeoDB 文档使它看起来[可以与 PostgreSQL/PostGIS 一起使用](http://opengeodb.org/wiki/OpengeoDB_mit_PostGIS)。Ruby on Rails / ActiveRecord[与 PostGIS 一起使用](https://stackoverflow.com/questions/5298797/rails-with-postgis)。active_geo_db 本身并不是很大，因此一旦您的 ActiveRecord w/ PostGIS 和 OpenGeoDB 正常工作，重构 active_geo_db 以使用您的设置应该相对简单。如果您遇到重构问题，也许您可​​以发布一个更具体的后续问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:08:31.233

如果我理解您的问题，您希望将 MySQL 数据迁移到 PostgreSQL。以我的经验，手动迁移模式通常是最简单的。这是因为现有工具有很多盲点。通常更容易浏览文件，使用 sed 转换引号，然后逐行重写。

转换数据通常更加困难。关键问题是不同的系统可能有不同的表示。最好的办法是编写一个从 MySQL 数据库读取数据、根据需要转换数据并将其写入 PostgreSQL 数据库的工具。在某种程度上，您可以使用可以通过类似抽象层处理表示的 gem，您可以避免自己处理这些问题。

# c# - 当 BusinessObject DataSource 新数据已更改时，StimulSoft 报表无法正确显示

> ID：12779336
> 
> 赞同：1
> 
> 时间：2012-10-08T09:56:48.760
> 
> 标签：c#, linq-to-sql, business-objects, bindingsource, stimulsoft

我将 StimulSoft Report for .net 作为我的第三方报告来创建我的 BusinessObject 报告。

这是我的客户类

```
class CustomerSet
    {
        public string CustomerID { get; set; }
        public string CompanyName { get; set; }
        public string ContactName { get; set; }
        public string ContactTitle { get; set; }
    } 
```

LINQ to SQL 是我的数据访问组件

将所有客户 ID 加载到列表框

```
 private void CustomerReport_Load(object sender, EventArgs e)
        {
            var idQuery = from c in db.Customers
                         select c.CustomerID;

            listBox1.DataSource = idQuery;
        } 
```

当用户从列表框中选择一个 ID 并单击“显示”按钮时，它将根据该 ID 查询客户信息并生成报告。

```
 private void btnShow_Click(object sender, EventArgs e)
            {
                try
                {
                    var custQuery = from c in db.Customers
                                      where c.CustomerID == listBox1.SelectedValue.ToString()
                                      select new CustomerSet { 
                                       CustomerID=c.CustomerID,
                                       CompanyName=c.CompanyName,
                                       ContactName=c.ContactName,
                                       ContactTitle=c.ContactTitle
                                      };
                    customersBindingSource.Clear();
                    customersBindingSource.Insert(0,custQury.FirstOrDefault());

                    stiReport1.RegReportDataSources();
                    stiReport1.Show();
                }
                catch (Exception ex) { MessageBox.Show(ex.Message); }
            } 
```

第一次可以，但是当用户关闭报表并选择新ID并显示报表时，报表显示旧记录。

请注意，报表是由报表向导创建的，并使用customersBindingSource 作为从DataSource 窗口拖放的DataSource。

我错过了什么？任何人都可以帮忙吗？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:37:34.273

请尝试改用该`RegData()`方法`RegReportDataSources()`。`Render()`也请在显示报告前尝试使用该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T11:08:46.170

在 RegReportDataSources 之前添加：

```
stiReport1.BusinessObjectsStore.Clear(); 
```

# javascript - iOS PhoneGap。防止 iFrame 缓存

> ID：12779337
> 
> 赞同：2
> 
> 时间：2012-10-08T09:56:57.623
> 
> 标签：javascript, ios, ipad, html, cordova

在 iPad 的 PhoneGap 应用程序中，我有一个 iFrame，它显示存储在在线数据库中的数据。在进一步的步骤中，我通过 JSON 下载此数据并在应用程序中对其进行编辑。完成后，我返回 iFrame 但它仍然显示旧数据。使用 JSON，我得到了新的正确数据。

...简而言之，应用程序缓存了 iFrame 的内容

我尝试了一切来防止缓存，包括页面中常见的元标记内容

```
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" /> 
```

并使用时间戳作为获取参数调用页面。我什至尝试通过 JavaScript 重新渲染整个 iFrame，但它仍然不起作用。

```
function loadFrame() {
var cid = localStorage.getItem("cid");  
var ts = new Date().getTime();
var url = pageURL+"?c=" +cid + "&timestamp=" + ts;

localStorage.removeItem("cid");

ifid = "iframe_" + ts;  

$("#iframe_wrap").html('<iframe name="iframe" id="'+ifid+'" src="'+url+'" class="fullscreen"></iframe>');
$("#"+ifid).hide();
$("#"+ifid).one("load",onLoad);

console.log("URL in iFrame '#"+ifid+"': "+url);
} 
```

只有当我重新启动应用程序时，我才能获得新页面

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:08:59.467

我解决了这个问题，但这只是 iOS 的部分问题！

我忘了提到的是 iFrame 中的页面还显示来自 AJAX 请求的数据。在 iOS 6 中，即使您说“cache: false”（我们使用 jQuery），AJAX 请求也会被缓存。

因此，要获取最新数据，您必须添加一个随机但每次唯一的值作为参数（我使用时间戳）。我建议我的同事（他制作了那个数据显示页面）添加这个参数，现在它可以工作了。

当我直接在应用程序中加载数据时，我已经做了这个技巧，他没有:)

# spring - 尝试使用 aspectJ 从 Spring Data JPA 存储库中建议一种方法

> ID：12779338
> 
> 赞同：2
> 
> 时间：2012-10-08T09:57:01.027
> 
> 标签：spring, aop, aspectj, spring-aop, spring-data-jpa

我正在尝试定义一个切入点，当调用来自 Spring Data JPA 存储库的方法时，它的建议将运行。

这是我的匿名切入点以及内联建议（来自`PliEventManagerAspect`）：

```
after(Pli pli) returning: (execution(* org.springframework.data.repository.CrudRepository+.save(Pli)) && args(pli)){
    System.out.println("Caught!!!!");   
} 
```

这里是我的 PliRepository 的定义：

```
public interface PliRepository extends GlobalRepository<Pli, Long>, PliRepositoryCustom { 
```

和 PliRepositoryImpl：

```
public class PliRepositoryImpl extends QueryDslRepositorySupport implements PliRepositoryCustom { 
```

和 PliRepositoryCustom：

```
public interface PliRepositoryCustom { 
```

最后是 GlobalRepository：

```
@NoRepositoryBean
public interface GlobalRepository<T, ID extends Serializable> extends JpaRepository<T, ID> { 
```

我还设置了 javaagent 命令行参数。我有以下aop.xml：

```
<!DOCTYPE aspectj PUBLIC
"-//AspectJ//DTD//EN"
"http://www.eclipse.org/aspectj/dtd/aspectj.dtd">
<aspectj>
    <weaver options="-verbose">
        <include within="org.springframework.data.repository..*"/>
    </weaver>
    <aspects>
        <aspect name="trc.suivi.aspects.PliEventManagerAspect" />
    </aspects>
</aspectj> 
```

上面的建议应该在 LTW 中运行，因为它建议 jar 中的一个类，但根本没有运行......我确信我必须在切入点定义中犯一些错误。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:23:51.713

我更改为以下配置：

**aop.xml：**

```
<!DOCTYPE aspectj PUBLIC
"-//AspectJ//DTD//EN"
"http://www.eclipse.org/aspectj/dtd/aspectj.dtd">
<aspectj>
    <weaver options="-verbose"></weaver>
    <aspects>
        <aspect name="trc.suivi.aspects.PliEventManagerAspect" />
    </aspects>
</aspectj> 
```

因此，织布工扫描所有类。

和**PliEventManagerAspect.aj：**

```
after(Pli pli) returning: (execution(* org.springframework.data.repository.CrudRepository+.save(*)) && args(pli)){
        log.debug("Caught!!!!");  
    } 
```

它现在可以工作了（感谢 Spring Forums 的 Marten）。

# cocos2d-iphone - cocos2d ccDrawPoly over the CCSprite

> ID：12779339
> 
> 赞同：1
> 
> 时间：2012-10-08T09:57:02.223
> 
> 标签：cocos2d-iphone, drawing, z-index, sprite

如何在 cocos2d 1.1 中将 z-index 设置为 ccDrawPoly() 以将其绘制在场景中的所有 CCSprite(s) 之上？

```
-(void)draw
{
    CGSize screenSize = [[CCDirector sharedDirector] winSize];
    glEnable(GL_LINE_SMOOTH);
    glBlendFunc(GL_SRC_ALPHA,GL_ONE_MINUS_SRC_ALPHA);
    glColor4ub(0, 0, 255, 255);
    glLineWidth(2);
    CGPoint vertices2[] = { ccp(0,0), ccp(0,screenSize.height*0.5), ccp(screenSize.width*0.5,screenSize.height*0.5), ccp(screenSize.width*0.5,0) };
    ccDrawPoly(vertices2, 4, YES);

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T14:19:12.400

有几种方法可以做到这一点。假设 draw 方法在您自己的 CCNode 子类中被覆盖，则：

*   添加 z 顺序大于任何精灵的 z 顺序的 drawPoly 节点
*   在绘制顺序高于具有精灵的层的单独层（或节点）中添加 drawPoly 节点

如果在包含子精灵的类中重写了 draw 方法，则应该重写 visit 方法。然后在运行自定义绘制多边形代码之前首先调用[超级访问]：

```
-(void) visit
{
    // draw node and children first
    [super visit];

    // draw custom code on top of node and its children
    ccDrawPoly( … );
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T12:04:10.217

AFAIK，所有绘图都是用零 zOrder 完成的。因此，如果您希望您的精灵在您手动绘制的东西下绘制，您可以添加带有负 zOrder 的精灵。例如，`addChild:`您可以使用`addChild:z:`with z value而不是使用方法`-1`。

# c# - 清除所有值并在 DataGridView 中再次加载（刷新）

> ID：12779344
> 
> 赞同：2
> 
> 时间：2012-10-08T09:57:16.613
> 
> 标签：c#, c#-4.0, datagridview

我是.net 初学者。我想刷新 datagridview 中的所有值。

```
 DataSet ds = new DataSet();
 ds.ReadXml(@"..\..\stock.xml"); /* XML file */
 dgvMain.DataSource = ds.Tables[0]; 
```

我正在尝试下面的代码来刷新（*不工作*）

**按钮点击**

```
dgvMain.DataSource = null;
dgvMain.DataSource = ds.Tables[0]; 
```

我想我在上面的代码中遗漏了一些东西。

我什至尝试过`dgvMain.Refresh();`（我对此一无所知。在智能感知中看到它）

我尝试的其他代码是：（*不起作用*）

```
dgvMain.Rows.Clear(); /*ERROR: Cannot clear this list.*/ 
```

`dgvMain.EndEdit();` [不用找了](https://stackoverflow.com/a/1390312/1577396)

`this.BindingContext[this.dgvMain.DataSource].EndCurrentEdit(); this.dgvMain.Refresh(); this.dgvMain.Parent.Refresh();` [不用找了](http://social.msdn.microsoft.com/Forums/en-US/winformsdatacontrols/thread/18a9762e-ac67-48a7-a372-55307fe344f3/)

请协助
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:14:08.533

正如您在其中一条评论中注意到的那样，您使用一些后端应用程序更改了 xml 文件。因此，每次单击按钮时，都需要重新加载 xml 文件：

```
**onButtonClick**

ds.Clear();
ds.ReadXml(@"..\..\stock.xml"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:59:51.740

我认为你必须调用 dgvMain.DataBind(); 为了以您描述的新方式绑定数据。如果这不起作用，那么我会将数据绑定到一个空集，然后调用 DataBind();

# android - 如何在我们的android项目中使用phonegap插件

> ID：12779347
> 
> 赞同：4
> 
> 时间：2012-10-08T09:57:20.053
> 
> 标签：android, cordova, phonegap-plugins

我需要在 phonegap 上的 android 应用程序中使用短信插件

我也下载了所需的插件，我已将“phonegap”的所有实例更改为“cordova”，但我仍然收到错误

```
 E/Web Console(2086): TypeError: Result of expression 
'window.plugins' [undefined] is not an object. at file:///android_asset/www/pluginexample.html:38 
```

请给我链接到使用插件（任何）的任何工作项目，以便我知道我在哪里得到这个错误

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:09:15.420

```
var MyPlugin = function () {};

MyPlugin.prototype.mFunctionName = function (action , successCallback, failureCallback, arrVal) {    
    return PhoneGap.exec(successCallback, failureCallback,  "ClassName", 'maction',arrVal );
};

PhoneGap.addConstructor(function() {
    PhoneGap.addPlugin("mObject", new MyPlugin());
}); 
```

您的 phonegap js 将采用上述形式

你可以调用上面的js

```
window.plugins.mObject.mFunctionName('maction',function(success){},function(error){}); 
```

或者

```
var mObj =  new MyPlugin();

    mObj.mFunctionName('maction',function(success){},function(error){}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:59:22.283

在这里，您有一个适用于 phonegap 的工作短信插件。您可以按原样使用它，也可以根据您的特定需求重写！

[短信插件](https://github.com/phonegap/phonegap-plugins/tree/master/Android/SMSPlugin)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:05:44.983

请查看此[将 PhoneGap 条码扫描器插件添加到项目，使用条码扫描器技术编写应用程序](http://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt3)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-18T09:41:31.917

您的意思是如何在您的 phonegap 项目中使用该插件，还是您想在您的 android (studio) 项目中使用 phonegap 插件（如果您正在使用本机语言/java 开发 android 应用程序，请使用 android studio）？

最好的方法是从插件文档。您还可以查看此链接：http: [//javatechig.com/cross-platform/phonegap/phonegap-sms-plugin-android](http://javatechig.com/cross-platform/phonegap/phonegap-sms-plugin-android)

# crystal-reports - Crystal Reports - 用动态生成的网页替换提示

> ID：12779360
> 
> 赞同：0
> 
> 时间：2012-10-08T09:58:03.377
> 
> 标签：crystal-reports

我想为我的客户提供一个报告解决方案，该解决方案使用许多带有参数的 Crystal Reports。目前，他们的解决方案使用提示用户输入每个参数的默认机制 - 这很乏味，并且不提供验证（例如日期输入的正确格式等）。

我宁愿展示一个接受报告的页面，并评估报告所需的参数，然后动态构建一个包含每个参数字段的页面，供用户输入，然后单击运行按钮以编程方式传递报告参数的所有输入值。

我没有通过 Google 搜索找到任何东西。这已经完成了吗？我不想在这个上重新发明轮子。任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T05:29:29.227

原来用 asp.Net MVC 这实际上是相当微不足道的......控制器：

```
public PartialViewResult ReportParameters(string reportFileName)
        {

            string path = Path.Combine(System.Configuration.ConfigurationManager.AppSettings["CustomReportPath"], reportFileName);
            ReportDocument oReport = new ReportDocument();
            oReport.Load(path);
            ViewBag.ReportFileName = reportFileName;
            ViewData.Model = oReport;
            return PartialView();
        } 
```

剃刀视图：

```
@model CrystalDecisions.CrystalReports.Engine.ReportDocument

<h2>Report: @Model.SummaryInfo.ReportTitle</h2>
@using (Html.BeginForm("PrintCustomReport", "Reporting", FormMethod.Post, new { target = "_blank" }))
{
    <input type="hidden" name="ReportFileName" value="@ViewBag.ReportFileName" />
    <fieldset>
        <legend>Enter Parameters for Report</legend>
        @{ 
    foreach (CrystalDecisions.CrystalReports.Engine.ParameterFieldDefinition oParam in Model.DataDefinition.ParameterFields)
    {
            <text>
            <div class="editor-label">
                @Html.Label(oParam.PromptText)
            </div>
            </text>
        switch (oParam.ParameterValueKind)
        {
            case CrystalDecisions.Shared.ParameterValueKind.BooleanParameter:
                    <div class="editor-field">
                        @Html.CheckBox(oParam.Name)
                    </div>
                break;
            case CrystalDecisions.Shared.ParameterValueKind.CurrencyParameter:
                    <div class="editor-field">
                    @Html.Kendo().NumericTextBox().Name(oParam.Name).Format("c")
                    </div>
                break;
            case CrystalDecisions.Shared.ParameterValueKind.DateParameter:
                    <div class="editor-field">
                    @Html.Kendo().DatePicker().Name(oParam.Name)
                    </div>
                break;
            case CrystalDecisions.Shared.ParameterValueKind.DateTimeParameter:
                    <div class="editor-field">
                    @Html.Kendo().DateTimePicker().Name(oParam.Name)
                    </div>
                break;
            case CrystalDecisions.Shared.ParameterValueKind.NumberParameter:
                    <div class="editor-field">
                    @Html.Kendo().NumericTextBox().Name(oParam.Name)
                    </div>
                break;
            case CrystalDecisions.Shared.ParameterValueKind.StringParameter:
                    <div class="editor-field">
                    @Html.TextBox(oParam.Name, oParam.HasCurrentValue ? oParam.CurrentValues[0].Description : "")
                    </div>
                break;
            case CrystalDecisions.Shared.ParameterValueKind.TimeParameter:
                    <div class="editor-field">
                    @Html.Kendo().TimePicker().Name(oParam.Name)
                    </div>
                break;
            default:
                break;
        }
    }
        }
    </fieldset>
    <input class="k-button" onclick="CloseWindow()" type="submit" value="Print" />
    <input  class="k-button" onclick="CloseWindow()" type="button" value="Cancel" />
} 
```

然后提交按钮将发布到控制器上的 PrintCustomReport 方法，该方法返回 PdfReportResult，如@RenanMarks[所述](https://stackoverflow.com/questions/6966593/crystal-reports-viewer-with-mvc3)

# visual-studio - GitHub Enterprise 与 Team Foundation Server (TFS)

> ID：12779365
> 
> 赞同：8
> 
> 时间：2012-10-08T09:58:17.127
> 
> 标签：visual-studio, git, tfs, github

我们将在我工作的公司开始一个新项目。这是一个 C++ 和 C# 软件开发项目，在三个地点有大约 6-8 名开发人员。

这里的旧项目使用 SVN 和自定义问题跟踪器，但计划切换到 TFS。对于这个新项目，我想说服管理层使用 GitHub Enterprise 而不是 TFS。我对TFS没有太多经验，但是我用过很多git，并且有一些GitHub经验。

我特别问的是完整的体验，即版本控制、问题/错误跟踪和 Wiki 的集成。这里有一些[相关](https://stackoverflow.com/questions/4415127/git-vs-team-foundation-server)的问题，但它们只关注版本控制方面。所以：

*   GitHub Enterprise 相对于 TFS 的主要优势是什么？
*   TFS 提供了哪些 GitHub Enterprise 无法复制的优势？
*   这两种解决方案中的哪一种为持续集成提供了更好的支持？

所有开发都将在使用 Visual Studio（2010 年，可能是 2012 年）的 Windows 机器上进行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T11:36:37.650

好吧，我不能给你一个完整的答案。但是我们查看了用于 Java 开发的 TFS，这里有一些您可能也会感兴趣的观点。

*   我们遇到了使用 TFS 的路径+文件名的长度限制。这在 Java 中似乎更有可能，因为 C# 中的打包方式不同
*   锁定：创建文件以某种方式将其锁定在 TFS 中（或为其保留“位置”）。当人们不在房间里修复这些文件时，这变得非常烦人。对于分布式团队，我无法想象这应该如何工作。
*   使用 Java 的 CI 很混乱。它有效，但与 Jenkings/Hudson/Bamboo/TeamCity 相比，我不会将它用于 Java。使用 C# 可能更有趣，因为 TFS 允许 CI 构建的工作流。因此，某些构建可以提升为自动部署。但我从来没有在现实生活中使用过。我只是喜欢这个主意:)
*   TFS 中的问题跟踪没问题。还有一些可用的 Scrum/Agile 计划插件
*   TFS wiki 是浪费时间。但是 GitHub wiki 是基于 Git 的，所以人们需要编写标记。这对开发人员来说没问题，但我怀疑我们的团队成员来自那个领域。
*   我不知道 GitHub 有内置的 CI 吗？我知道的所有 CI 服务器都支持 Git。
*   Git Windows 客户端有点奇怪。msysgit 客户端有路径长度限制，cygwin one os 更奇怪（只是感觉），但两者都运行良好。GitHub 有一个自己的客户端——我不知道它是基于什么的。

考虑到您的团队是分布式的，我会选择 Git。它将允许更灵活的工作流程。如果网络稳定，TFS 肯定也能胜任。如果您以前使用过 SVN：TFS 作为源代码控制肯定会惹恼人们。但是习惯于 VisualStudio 和 MS-Server-Parts 的开发人员与它的冲突要少得多。

再说一遍：我们尝试（或不得不尝试）使用 TFS + Java，而使用 C# + Visual Studio 则完全不同。那里的整合会更好。然而我的一些观点可能仍然有用:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T14:40:56.743

我无法具体评论 TFS，因为我唯一的体验是简短且非常不愉快，所以我不会。

然而，我确实经常使用 git 和 github（以及企业版），并且我使用过各种集中式 VCS（rcs、cvs、svn、synergy）和分散式 VCS（hg、git）。

我认为 GIT 和 TFS 之间的主要区别除了一些辅助功能差异外，基本上 TFS 是一个集中式系统（如 rcs、cvs、svn 和 synergy），而 git 是一个分散式系统（dvcs）。乍一看，这似乎没有太大的区别，但它具有深远的意义。

*   dvcs repo 的克隆包含整个历史记录，因此您可以继续工作、切换分支、提交功能等。如果网络出现故障、服务器没有响应、您坐在飞机上等。
*   由于提交是克隆存储库的本地提交，因此您有一个额外的自由度（与分支正交等），您可以通过对存储库进行功能克隆来处理功能，如果不起作用，只需删除存储库如果您不推送，它将永远不会进入上游存储库的历史记录。
*   DVCS 并不规定特定的工作流程。你可以自由地以任何你想要的方式构建你的团队交互（分层、正交、扁平、集中，你有什么）。这是一个很大的优势，可以帮助团队成长（和缩小），而不会留下无法通过设计满足其需求的系统。
*   GIT（以及 hg）直接支持补丁集/被子之类的东西，可用于持续集成。这通常在集中式 VCS 中很难做到，所以大部分都没有完成（我不知道 TFS 是否有这些功能）

# java - 通用图像加载器是否支持蜂窝之前的 android 版本？

> ID：12779370
> 
> 赞同：0
> 
> 时间：2012-10-08T09:58:33.443
> 
> 标签：java, android, universal-image-loader

我想知道通用图像加载器（[在此处找到](https://github.com/nostra13/Android-Universal-Image-Loader)）是否支持蜂窝之前的版本。因为蜂窝之前的版本有一个单独的本机堆堆栈，所以位图使用的内存不计入 VM 堆。

我正在开发一个使用这个库的图像密集型应用程序，并且我确实在 android ICS 上成功使用了它。现在我正在尝试降低 API 要求，但我在远离导致我的应用程序崩溃的内存不足异常时遇到了一些麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:14:40.863

Universal Image Loader 支持 1.5+ Android 版本。UIL 试图通过使用弱引用和自己的缓存和引用清理逻辑来防止 OOM。为了在 3.0 之前的 Android 版本中进行有效的内存管理，我们需要使用`Bitmap.recycle()`清除本机内存。但是UIL不能自己做，因为它不知道什么时候Bitmap不可见并且没有被任何人引用。

用户应该自己做回收，当他知道他可以做到时。

还有一些 UIL 配置调整可以防止 OOM。

PS：如何定义 Bitmap 是否在 UIL 内存缓存中：

```
Bitmap bmp = ...;
boolean isBitmapInCache = false;
MemoryCacheAware<String, Bitmap> memoryCache = ImageLoader.getInstance().getMemoryCache();
for (String key : memoryCache.keys()) {
    if (bmp == memoryCache.get(key)) {
        isBitmapInCache = true;
        break;
    }
}

if (!isBitmapInCache) {
    // You can recycle bitmap
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:12:05.857

它应该可以工作，它将位图大小计算为：

```
 bitmap.getRowBytes() * bitmap.getHeight(); 
```

无论它是在 java 还是本机堆上，它都会给出正确的位图大小。

# memory - HSET 与 SET 内存使用情况？

> ID：12779372
> 
> 赞同：18
> 
> 时间：2012-10-08T09:58:36.813
> 
> 标签：memory, redis

我正在阅读[这篇文章](http://instagram-engineering.tumblr.com/post/12202313862/storing-hundreds-of-millions-of-simple-key-value-pairs)，其中提到在 redis 中存储 100 万个密钥将使用 17GB 的内存。然而，当切换到散列时，将它们分块为 1k（例如：）`HSET "mediabucket:1155" "1155315" "939"`允许它们将 1M 存储在 5GB 中，这是一个相当大的节省。

我读了[redis内存优化](http://redis.io/topics/memory-optimization)，但我不太明白其中的区别。它说 HGET 不是 O(1) 但足够接近，并且在使用 hset 时提到了更多的 cpu 使用率。我不明白为什么会有更多的 cpu 使用率（确保空间交易时间。但是如何/什么？）。它提到了“编码”，但没有提到它们是如何编码的。

它也只提到了字符串，但我不知道只有字符串是什么意思。是哈希字段吗？这是否意味着哈希字段？[我在HSET](http://redis.io/commands/hset)中没有看到任何关于它的信息。究竟会编码什么，为什么编码比使用 SET 更有效？

那怎么可能`HSET "mediabucket:1155" "1155315" "939"`更有效率`SET "mediabucket:1155315" "939"`呢？SET 中的数据较少（使用 1155315 和 1155 而不是 1155315）。我个人会尝试使用二进制密钥，但我认为这与 HSET 更高效的原因无关。

编辑 ：

交叉发布在 redis-db 邮件列表上：[https ://groups.google.com/d/topic/redis-db/90K3UqciAx0/discussion](https://groups.google.com/d/topic/redis-db/90K3UqciAx0/discussion)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-08T12:13:13.373

小散列对象根据 hash-max-ziplist-entries 和 hash-max-ziplist-value 参数的值编码为 ziplist。这是简单的数据序列化。

一个 ziplist 定义如下（摘自 Redis 源代码）：

```
/* The ziplist is a specially encoded dually linked list that is designed
* to be very memory efficient. It stores both strings and integer values,
* where integers are encoded as actual integers instead of a series of
* characters. It allows push and pop operations on either side of the list
* in O(1) time. However, because every operation requires a reallocation of
* the memory used by the ziplist, the actual complexity is related to the
* amount of memory used by the ziplist.
*
* ----------------------------------------------------------------------------
*
* ZIPLIST OVERALL LAYOUT:
* The general layout of the ziplist is as follows:
* <zlbytes><zltail><zllen><entry><entry><zlend>
*
* <zlbytes> is an unsigned integer to hold the number of bytes that the
* ziplist occupies. This value needs to be stored to be able to resize the
* entire structure without the need to traverse it first.
*
* <zltail> is the offset to the last entry in the list. This allows a pop
* operation on the far side of the list without the need for full traversal.
*
* <zllen> is the number of entries.When this value is larger than 2**16-2,
* we need to traverse the entire list to know how many items it holds.
*
* <zlend> is a single byte special value, equal to 255, which indicates the
* end of the list.
*
* ZIPLIST ENTRIES:
* Every entry in the ziplist is prefixed by a header that contains two pieces
* of information. First, the length of the previous entry is stored to be
* able to traverse the list from back to front. Second, the encoding with an
* optional string length of the entry itself is stored.
*
* The length of the previous entry is encoded in the following way:
* If this length is smaller than 254 bytes, it will only consume a single
* byte that takes the length as value. When the length is greater than or
* equal to 254, it will consume 5 bytes. The first byte is set to 254 to
* indicate a larger value is following. The remaining 4 bytes take the
* length of the previous entry as value.
*
* The other header field of the entry itself depends on the contents of the
* entry. When the entry is a string, the first 2 bits of this header will hold
* the type of encoding used to store the length of the string, followed by the
* actual length of the string. When the entry is an integer the first 2 bits
* are both set to 1\. The following 2 bits are used to specify what kind of
* integer will be stored after this header. An overview of the different
* types and encodings is as follows:
*
* |00pppppp| - 1 byte
*      String value with length less than or equal to 63 bytes (6 bits).
* |01pppppp|qqqqqqqq| - 2 bytes
*      String value with length less than or equal to 16383 bytes (14 bits).
* |10______|qqqqqqqq|rrrrrrrr|ssssssss|tttttttt| - 5 bytes
*      String value with length greater than or equal to 16384 bytes.
* |11000000| - 1 byte
*      Integer encoded as int16_t (2 bytes).
* |11010000| - 1 byte
*      Integer encoded as int32_t (4 bytes).
* |11100000| - 1 byte
*      Integer encoded as int64_t (8 bytes).
* |11110000| - 1 byte
*      Integer encoded as 24 bit signed (3 bytes).
* |11111110| - 1 byte
*      Integer encoded as 8 bit signed (1 byte).
* |1111xxxx| - (with xxxx between 0000 and 1101) immediate 4 bit integer.
*      Unsigned integer from 0 to 12\. The encoded value is actually from
*      1 to 13 because 0000 and 1111 can not be used, so 1 should be
*      subtracted from the encoded 4 bit value to obtain the right value.
* |11111111| - End of ziplist.
*
* All the integers are represented in little endian byte order.
*/ 
```

哈希对象中的每个项目都表示为 ziplist 中的键/值对（2 个连续条目）。键和值都可以存储为简单的字符串或整数。这种格式在内存中更紧凑，因为它节省了实现动态数据结构（如真正的哈希表）所需的大量指针（每个 8 字节）。

缺点是当应用于 ziplist 时，HSET/HGET 操作实际上是 O(N)。这就是为什么 ziplist 必须保持较小的原因。当 ziplist 数据适合 L1 CPU 缓存时，尽管具有线性复杂性，但相应的算法足够快。

您可能需要参考以下链接以获取更多信息：

[Redis 内存使用量比数据多 10 倍](https://stackoverflow.com/questions/10004565/redis-10x-more-memory-usage-than-data/10008222#10008222)

[Redis 数据结构空间要求](https://stackoverflow.com/questions/12269429/redis-data-structure-space-requirements/12272007#12272007)

这些答案指的是其他数据结构（如集合、列表或排序集合），但它是完全相同的概念。

# cocos2d-iphone - CCRotateTo 设置 CCW 或 CW

> ID：12779379
> 
> 赞同：-1
> 
> 时间：2012-10-08T09:59:09.197
> 
> 标签：cocos2d-iphone

标题非常明确。如何设置使用 CCRotateTo 旋转 CCSprite 的方向？

即逆时针或顺时针旋转

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:11:10.847

我认为，您可以管理它的唯一方法是从当前角度设置正偏移或负偏移。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:39:03.970

您可以使用 CCRotateBy 代替 to。然后根据需要的方向设置正偏移或负偏移。CCRotateTo 取壁橱方向

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:43:10.807

试试这个：

```
sprite.rotation = 0;
//CW
[sprite runAction:[CCRotateTo actionWithDuration:2.0 angle:360]];
//CCW
[sprite runAction:[CCRotateTo actionWithDuration:2.0 angle:-360]]; 
```

# php - php到javascript int变量解析

> ID：12779382
> 
> 赞同：0
> 
> 时间：2012-10-08T09:59:17.083
> 
> 标签：php, javascript, int

我正在尝试将 php 中的 int 值解析为 javascript 变量，但它不起作用。

第一个警报正确显示 int 值，但第二个警报显示“未定义”。如何将 php 变量正确解析为整数变量“test”？我尝试了 parseInt 但它没有用。该值用于图表，因此我需要在某些时候使用 fillRect() 命令，警报仅用于测试。谢谢。

```
 alert('<?php echo( $graph_max_max_value ); ?>');
    var test = <?php $graph_max_max_value; ?>
    alert(test); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T10:01:14.203

`var test = <?php echo $graph_max_max_value; ?>;`应该管用。

这将输出您忘记的 using `echo`，*并*在末尾添加以分号结尾的语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T10:00:20.667

你忘了做任何事情来输出变量。

你想要一个`echo`, `print`,`printf`等。

（您还需要确保 PHP 中的数据符合 JavaScript 中 Number 类型的语法。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T10:01:53.277

试试这个

```
var test = <?php echo $graph_max_max_value; ?>, 
```

进而

```
alert(test); 
```

如果您不使用 echo 则该值未定义

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T10:07:49.313

您忘记了**回显**，需要确保将整数值传递给变量。

```
<script>
    <?php $graph_max_max_value = 1024;?>
    alert('<?php echo( $graph_max_max_value ); ?>');
    var test = '<?php echo $graph_max_max_value;?>';
    test.replace(/[^0-9]/g, '');
    alert(test);
</script> 
```

# local - 如何从雅虎本地搜索中获取所有结果

> ID：12779389
> 
> 赞同：1
> 
> 时间：2012-10-08T09:59:28.557
> 
> 标签：local, yahoo, web-crawler

我想搜索该地区的所有披萨（zipcod=89030），然后我在雅虎本地搜索中构造一个查询： [http ://local.yahooapis.com/LocalSearchService/V3/localSearch?appid=appid&query=pizza&zip=89030&results= 20&开始=250](http://local.yahooapis.com/LocalSearchService/V3/localSearch?appid=appid&query=pizza&zip=89030&results=20&start=250)

结果xml文件显示有totalResultsAvailable="1714" totalResultsReturned="20" firstResultPosition="250"

可以在 url 中使用的最大数量是 'results=20', 'start=250'。所以我最多只能得到 250+20=270 个结果。但是有 1714 个可用结果。

如何获得剩余的结果元组？

需求参数见：http: [//developer.yahoo.com/search/local/V3/localSearch.html](http://developer.yahoo.com/search/local/V3/localSearch.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T06:26:51.750

Adding 'longitude' + 'latitude' + 'radius' to the url helps reduce the number of matched records to 270.

Is it the only solution?

# c - 获得分或 2 位小数的公式可能是什么？

> ID：12779391
> 
> 赞同：3
> 
> 时间：2012-10-08T09:59:40.663
> 
> 标签：c

我正在做一个程序，该程序将输入该周的每周工资和总工作时间。它应该以小时工资率显示答案。但我无法显示正确的“centavos/2 个小数位”公式，并且它不想使用 float % float 运行。请帮忙！

```
#include <stdio.h>

int gethourpaypes(int weekpay, int hoursworked)
{
  int hourpaypes;
  hourpaypes = weekpay / hoursworked;
  return hourpaypes;
}

int gethourpaycent(int weekpay, int hoursworked)
{
  int hourpaycent;
  hourpaycent = ((weekpay / hoursworked) % 100);
  return hourpaycent;
}

int main()
{
  int hourpaypes, weekpay, hoursworked;
  int hourpaycent;
  printf("Enter total week pay in pesos: ");
  scanf("%d", &weekpay);
  printf("Enter total hours worked that week: ");
  scanf("%d", &hoursworked);
  hourpaypes = gethourpaypes(weekpay, hoursworked);
  hourpaycent = gethourpaycent(weekpay, hoursworked);
  printf("Your hourly pay rate is %.0d pesos and %.2d centavos", hourpaypes, hourpaycent);
  fflush(stdin);
  getchar();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:07:21.973

恐怕你的两个计算都不正确。比索计算实际上计算的是小时工资，你*似乎*只得到整数比索，因为你打印它时没有小数。

时薪是

```
hourpay = weekpay / hoursworked; 
```

从中，您可以获得以比索为单位的小时工资，`floor()`以获得一个整数（不是`int`）数字：

```
pesos = floor(hourpay); 
```

和centavos作为余数；这通常使用 来完成`round()`，因此 12.345 变为 12 比索和 35 分（但您可以使用`floor()`而不是截断它`round()`）：

```
cvos  = round(100.0*(hourpay - pesos)); 
```

**整数运算**

您将周薪换算为分，然后除以工作时间。为了将舍入误差降至最低，您将所有内容保留`float`到最后一刻。

```
int main()
{
    float weekpay, hoursworked;
    int centavos_per_hour, psos, cvos;

    printf("Enter total week pay in pesos: ");
    scanf("%f", &weekpay);
    printf("Enter total hours worked that week: ");
    scanf("%f", &hoursworked);

    centavos_per_hour = (weekpay * 100.0) / hoursworked;

    psos = centavos_per_hour / 100;  // Hourly pay is 2345 co = 23 pesos
    cvos = centavos_per_hour % 100;  // 

    printf("Your hourly pay is %d pesos %d centavos per hour\n", psos, cvos);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:01:06.997

用于`fmod`计算浮点余数。`%`运算符只能与整数类型的操作数一起使用。

```
#include <math.h>
double fmod(double x, double y);
float fmodf(float x, float y); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T10:12:02.580

不要给自己和他人制造麻烦，不要用float/double/etc来代表金钱。使用整数，其中 1 是最小的货币单位，在您的情况下是 cent(avo)。

# c# - 暂停主要形式绘画时的奇怪行为

> ID：12779393
> 
> 赞同：0
> 
> 时间：2012-10-08T09:59:51.107
> 
> 标签：c#, .net, winforms, paint

我的 mdi 表单需要很长时间才能加载，因此会给屏幕带来很多闪烁。为了防止闪烁，我使用了此处所述的 sendmessage API[如何暂停控件及其子控件的绘制？](https://stackoverflow.com/questions/487661/how-do-i-suspend-painting-for-a-control-and-its-children). **我们暂停应用主窗体**的绘制。

这样做很好，除了我们遇到了各种奇怪的行为：

*   如果用户有一个 windows explorer 实例，并且在冻结期间移动鼠标，windows explorer 左侧窗口的某些部分开始显示在屏幕上。
*   有时，如果用户在绘画冻结期间单击鼠标，我们的应用程序就会失去焦点。

是因为我们冻结了主窗体吗？

我们如何在加载我们的 mdi 表单时防止任何绘图而没有任何副作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:34:59.653

暂停/恢复在许多情况下都很棒。

然而，对于表单的加载，我更喜欢让绘图继续正常进行，但使用透明度隐藏表单，直到它完全加载。

```
Form f = new Form { Opacity = 0.01 };
f.Show();
f.BeginInvoke( new Action(() => f.Opacity = 0.99 )); 
```

# python - Mac上的Django：无法创建sqlite文件

> ID：12779397
> 
> 赞同：0
> 
> 时间：2012-10-08T10:00:02.863
> 
> 标签：python, django

我是 Django 的新手，请多多包涵。我遵循本[教程](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)并在通过修改`settings.py`. 我知道[以前有人问过](https://stackoverflow.com/questions/9256442/django-help-django-not-creating-sqlite-database-file-as-expected)这个问题，但答案对我不起作用。

如下修改 settings.py 后，我运行`python manage.py syncdb`(and `sudo python manage.py syncdb`)，但终端中没有任何反应。在我指定的路径中也没有创建 db 文件。

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': '/Users/philip/Documents/Developer/mysite/abc.db',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:25:47.057

I restart terminal and it just works.

# xml - 无法为模块 XML::LibXML::Common 加载“/usr/lib/perl5/vendor_perl/5.8/msys/auto/XML/LibXML/Common/Common.dll”：dlopen：Win32 错误 126

> ID：12779400
> 
> 赞同：0
> 
> 时间：2012-10-08T10:00:10.650
> 
> 标签：xml, perl, xml-parsing, perl-module

我被这个错误困住了：

```
Can't load '/usr/lib/perl5/vendor_perl/5.8/msys/auto/XML/LibXML/Common/Common.dll' for module XML::LibXML::Common: dlopen: Win32 error 126 at /usr/lib/perl5/5.8
/msys/DynaLoader.pm line 230.
 at /usr/lib/perl5/vendor_perl/5.8/msys/XML/LibXML.pm line 12
Compilation failed in require at /usr/lib/perl5/vendor_perl/5.8/msys/XML/LibXML.pm line 12.
BEGIN failed--compilation aborted at /usr/lib/perl5/vendor_perl/5.8/msys/XML/LibXML.pm line 12.

Compilation failed in require at script.pl line 5\.    
BEGIN failed--compilation aborted at script.pl line 5. 
```

在加载使用`XML::Libxml`.

上周它工作得很好，所以我确定我没有任何语法错误或路径错误。

我无法阅读错误也无法理解它....

这是我的脚本，非常简单：

```
 #!/usr/bin/perl
    use utf8; 
    use strict;
    use warnings;
    use XML::LibXML;
    require "D:/Projets/Maroc Scada/Rabat 41 - Images T200i-DRR-F200C/script_PI/addresses.pl";

    my $Filepath = "D:/Projets/Maroc Scada/Rabat 41 - Images T200i-DRR-F200C/script_PI/RTUS_originaux";     # Must contain a "treated" subdirectory to store results
    my $parser;         # LibXML object used to read the text file .xml
    my $xmldoc;         # XML document parsed, ready to use with libxml API
    my $i = 0;          # treated elements per file
    my $j = 0;          # treated files
    my $RTUName;        # Name of the current RTU
    my $RTUType;        # Type of the RTU. matching the key in %address hash table in addresses.pl
    my $MeasureName;    # Current Measure Name (for printing in console)
    my $Parameters;     # parameters to apply to on the node. Typically a hash containing key->values of the parameters to be updated as { "MonitorTcAddress" => "11", ... }
    my $v = 0;          # 1 for more debug information. If 0, only errors and message "end of program"

    # Get the files in the given directory and loop on all xml files exported from PowerCC
    print "Beginning of program...\n";
    opendir(DIR, $Filepath);
    my @FILES= readdir(DIR); 
    foreach my $File (@FILES) {

        if ($File =~ m/.xml/) {   #  m/.xml$/
            print "Opening ".$File."\n" if $v;
            $j++;
            $parser = XML::LibXML->new();
            $xmldoc = $parser->parse_file($Filepath."/".$File);

            #  Loop on all nodes in xml file to place the default addresses (IOA) 
            #  and the types of the measurements in the RTYType defined in 
            #  the hash in address.pl

            # Loop on all RTUs
            for my $rtu ($xmldoc->findnodes('/XDF/Instances/Parent/CfeSubRemoteTerminalUnit')) {
                $RTUName = $rtu->getAttribute("Name");
                $RTUType = $rtu->getAttribute("Description");
                if (length($RTUType) < 2) { print "[ERROR 002] : Type of RTU is not defined for RTU=".$RTUName."   Type=".$RTUType."\n"; }
                print "RTUName=".$RTUName . ", Type=". $RTUType. "\n"  if $v;

                # Chosing IEC 101 and address structure 24 bits
                $rtu->setAttribute("TeleControlProtocolType", "1");
                $rtu->setAttribute("DataPointAddressStructure", "4");

                # Looking for all Analog measurements
                for my $Measure ($rtu->findnodes('CfeTelemeteredAnalog')) { 
                    $MeasureName = $Measure->getAttribute("Name");
                    $Parameters = getAddress($MeasureName, $RTUType);

                    if ($$Parameters{"RemoveFromPI"}) {             # Special. Point is in PI but doesn't exist in reality -> removing from XML.
                        print "[SPECIAL 005] : Removing node ".$MeasureName." from XML file.\n" if $v;
                        $Measure->unbindNode();
                    }
                    else {
                        # Overwrite all parameters in the Hash $adresses on the attributes of the current node.
                        foreach my $Param (keys %$Parameters)  {
                            $Measure->setAttribute( $Param, $$Parameters{$Param} );
                            print " ".$MeasureName." :      ".$Param." =>   ".$$Parameters{$Param}."\n" if $v;
                        }
                        $i++;
                    }
                } # Analog Iteration

                # Looking for all Digital Status. Same structure. Duplicated code iterating on digital nodes
                for my $Measure ($rtu->findnodes('CfeTelemeteredDigital')) { 
                    $MeasureName = $Measure->getAttribute("Name");
                    $Parameters = getAddress($MeasureName, $RTUType);

                    if ($$Parameters{"RemoveFromPI"}) {             # Special. Point is in PI but doesn't exist in reality -> removing from XML.
                        print "[SPECIAL 006] : Removing node ".$MeasureName." from XML file.\n" if $v;
                        $Measure->unbindNode();
                    }
                    else {
                        # Overwrite all parameters in the Hash $adresses on the attributes of the current node.
                        foreach my $Param (keys %$Parameters)  {
                            $Measure->setAttribute( $Param, $$Parameters{$Param} );
                            print " ".$MeasureName." :      ".$Param." =>   ".$$Parameters{$Param}."\n"   if $v;
                        }
                        $i++;
                    }
                } # Digital iteration

            } # RTU iteration

            # write the xml tree to a text file
            open (MYFILE, '>'.$Filepath.'/treated/'.$File);
            print MYFILE $xmldoc->toString(1);
            close (MYFILE); 
            print "Closing ".$File.". Treated elements = ".$i."\n"  if $v;
        } # if . or ..
    } # loop on files in directory

    print "End of Program. ".$j." XML files treated, ".$i." elements.\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:15:02.283

基本上你的 Perl 库已经损坏，你应该向负责维护它的人报告。如果您可以自己执行此操作，则只需重新安装`XML::LibXML`

# java - JVM 选项 jmxremote.local.only=true 不能正常工作

> ID：12779401
> 
> 赞同：7
> 
> 时间：2012-10-08T10:00:15.700
> 
> 标签：java, jmx

我编写了一个应该由 JMX 客户端控制的批处理 Java 7 应用程序。JMX 服务已启动并正在运行，我可以使用我机器上的 jConsole 连接到它。

我设置了选项 -Dcom.sun.management.jmxremote.local.only=true 以避免任何来自 127.0.0.1 的传入连接。

但是...当我尝试从另一台计算机连接时，我的连接没有被过滤掉，并且我能够远程访问 JMX。

这是java调用：

```
java -Dcom.sun.management.jmxremote ^
 -Dcom.sun.management.jmxremote.port=7000 ^
 -Dcom.sun.management.jmxremote.local.only=true ^
 -Dcom.sun.management.jmxremote.authenticate=false ^
 -Dcom.sun.management.jmxremote.ssl=false ^
 -cp lib/*;hns-consumer.jar it.andrearota.com.Main %1 
```

似乎没有考虑该选项。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-01-27T11:11:21.360

我正在寻找一种方法来限制 JMX 服务器仅在 localhost 上接受请求并偶然发现了这个问题。现在可以使用 flag 了`-Dcom.sun.management.jmxremote.host=localhost`。请参阅有关[类似问题的](https://stackoverflow.com/questions/35367232/how-to-configure-jmx-to-bind-to-localhost-only)[评论](https://stackoverflow.com/questions/35367232/how-to-configure-jmx-to-bind-to-localhost-only#comment98456197_41785238)。

# spring-mvc - 如果表标签中的条件

> ID：12779407
> 
> 赞同：0
> 
> 时间：2012-10-08T10:00:28.323
> 
> 标签：spring-mvc, spring-roo

我正在使用 Spring Roo。有`table:table`和`table:column`标签。

```
<table:table data="${memberDetails}" id="memberDetail" delete="false"
                 create="false"
                 update="false" show="false" paginationFlag="false"
                 path="" typeIdFieldName="instanceId"
                 z="40I0ZgJoR5iBRXkYGHvl959736E=">
    <table:column id="customer" property="user.name"/> 
</table:table> 
```

`null`如果属性`user.name`不为空，我如何检查或为空？如果它是空的，我希望解决那里的其他财产。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:15:26.847

检查此代码

```
<c:if test="${user.name =='null'}" >
 <table:column id="customer" property="user.name"/> 
</c:if> 
```

或者你可以使用

```
 <c:if test="${not empty user.name}">
       <table:column id="customer" property="user.name"/> 
    </c:if> 
```

# sql - 关于获取不同余额的 Oracle SQL 帮助

> ID：12779418
> 
> 赞同：0
> 
> 时间：2012-10-08T10:01:16.327
> 
> 标签：sql, oracle

从 dummy_table 中选择 pdat、ac_no、bal；

```
PDATE     | AC_NO | BAL
14/02/2012| abcd  | 1200
15/02/2012| abcd  | 1300
29/02/2012| abcd  | 1300 
```

我的问题是如何使结果集获取

```
PDATE     | AC_NO | BAL
14/02/2012| abcd  | 1200
29/02/2012| abcd  | 1300 
```

那是相同余额的最大日期？

我曾尝试在我的 ORACLE 查询中使用 MAX 和 Distinct，但它们不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:26:09.110

所以在我看来你的问题可以这样重新陈述：

> 每当有一组具有相同`AC_NO`和的连续行时`BAL`，仅返回其中的最后一个，其中*连续*和*最后一个*都暗示*按 排序`PDATE`*。

以下是我在 SQL Server 中解决此问题的方法：

```
SELECT
  MAX(PDATE) AS PDATE,
  AC_NO,
  BAL
FROM (
  SELECT
    YourTable.*,
    ROW_NUMBER() OVER (PARTITION BY AC_NO      ORDER BY PDATE) -
    ROW_NUMBER() OVER (PARTITION BY AC_NO, BAL ORDER BY PDATE) AS grp
  FROM YourTable
) s
GROUP BY
  AC_NO,
  BAL,
  grp
ORDER BY
  AC_NO,
  MAX(PDATE)
; 
```

基本上，查询使用双重排名来确定连续行组的位置`AC_NO`和`BAL`位置相同。因此，每个这样的组都会收到一个附加属性，该属性与`AC_NO`和一起`BAL`唯一标识该组，然后您只需使用这三列对行进行分组并获取`MAX(PDATE)`。

我期待它在 Oracle 中的工作与[在 SQL Server 中一样](http://sqlfiddle.com/#!3/f33cc/1)。但是，在 SQL Fiddle 上测试 Oracle 中的查询时，[我收到了这个错误](http://sqlfiddle.com/#!4/85cb0/2)：

```
ORA-00935: group function is nested too deeply 
```

如果有 Oracle 经验的人对此特定查询发表评论，那就太好了。同时，这是另一种选择（[在 Oracle 中确实有效](http://sqlfiddle.com/#!4/85cb0/5 "SQL Fiddle 演示")），其中分组被另一轮排名 + 检索排名靠前的行所取代：

```
SELECT
  PDATE,
  AC_NO,
  BAL
FROM (
  SELECT
    PDATE,
    AC_NO,
    BAL,
    ROW_NUMBER() OVER (PARTITION BY AC_NO, BAL, grp ORDER BY PDATE DESC) AS rnk
  FROM (
    SELECT
      PDATE,
      AC_NO,
      BAL,
      ROW_NUMBER() OVER (PARTITION BY AC_NO      ORDER BY PDATE) -
      ROW_NUMBER() OVER (PARTITION BY AC_NO, BAL ORDER BY PDATE) AS grp
    FROM YourTable
  ) s
) s
WHERE rnk = 1
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:03:44.797

尝试

```
select max(pdate) as pdate,
       ac_no,
       bal
from your_table
group by ac_no, bal 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:04:04.080

```
select max(pdate),
       ac_no,
       bal
from dummy_table
group by ac_no, bal; 
```

# crystal-reports - 水晶报表中如何根据key在不同页面显示所有记录

> ID：12779421
> 
> 赞同：0
> 
> 时间：2012-10-08T10:01:33.220
> 
> 标签：crystal-reports

我在 SQL Server 2008 中有一个销售表：

```
NIM   NAME       QTY         SALES
----- ---------- ----------- -----------
U001  RUDI       12          12000
U001  RUDI       15          16000
U001  RUDI       20          30000
U001  RUDI       6           6000
U002  MARK       10          11000
U002  MARK       12          13000
U002  MARK       19          20000
U003  JOKO       5           5000
U003  JOKO       4           4000
U003  JOKO       9           9000 
```

我将使用 Crystal Report 创建一个报表，其设计如下：

```
NIM  : <nim>
NAME : <NAME>
------------
QTY    SALES
------------
<QTY> <SALES> 
```

当我尝试预览时，所有记录的数量和销售额都显示在一页中。但我想根据 NIM 和 NAME 作为 KEY 在其他页面中显示它们。例如：第 1 页

```
NIM  : U001
NAME : RUDI
-------------
QTY Sales
-------------
12      12000
15      16000
20      30000
6       6000 
```

第2页

```
NIM  : U002
NAME : MARK
-------------
QTY Sales
-------------
10      11000
12      13000
19      20000 
```

你能帮我吗，如何显示这样的报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:46:08.537

创建一个NIM**组**并将 NIM 和名称放在组头中。选中**Section Expert**中 Group Footer的**New Page After**属性。 尝试并返回结果。

# jquery - jQuery 占位符和母版页

> ID：12779425
> 
> 赞同：0
> 
> 时间：2012-10-08T10:02:21.020
> 
> 标签：jquery, asp.net, placeholder

我在我的表单上使用了 jQuery Placeholder 插件，一切都在 asp.net 页面上运行良好；在我的母版页上，我拥有所有正确的 .ClientID 设置，因此我的 jQuery 验证有效。

我遇到的问题是初始化您使用的占位符脚本：

```
$('input, textarea').placeholder(); 
```

有没有办法让我在母版页上工作，我试着打电话

```
<%=txtFirstName.UniqueID %>.placeholder() 
```

没有运气，有没有办法让它工作？

**对不起，我犯了一个错误；占位符位于文本框上。**

非常感谢所有帮助。

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:05:05.263

修改代码：试试这个

```
$("#<%=ddlFirstHome.UniqueID %>").placeholder() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:06:46.957

~~我只能想象您的`ddlFirstHome.UniqueID`属性返回一个字符串，其中包含您要添加占位符的元素的 ID。类似的东西`FirstHome`。所以你需要用 jQuery 选择它...~~

 ~~```
$("#FirstHome").placeholder(); 
```~~ 

添加你得到的 ASP.NET 占位符...

```
$("#<%=ddlFirstHome.UniqueID %>").placeholder(); 
```

 ~~**编辑**忘记上述内容，您应该能够不加选择地在所有输入和文本区域上运行插件。大概在您的母版页中，您有一个 html 头标签，或者您将它包含在模板中的某个地方。只需添加...

```
<script type="text/javascript">
  // Run on document ready
  $(function() {
    // target all inputs and textareas with the attribute placeholder
    // and enable cross-browser placeholders
    $("input[placeholder],textarea[placeholder]").placeholder();
  });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:04:35.920

怎么样：

```
$("#<%= dllFirstHome.UniqueID %>").placeholder(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T10:04:44.977

你应该使用：

```
$('#<%=ddlFirstHome.UniqueID %>').placeholder(); 
```~~

# php - PHP - 从磁卡读取数据

> ID：12779427
> 
> 赞同：6
> 
> 时间：2012-10-08T10:02:36.117
> 
> 标签：php, device, magnetic-cards

我必须制作一个将读卡器连接到系统的应用程序，如果有人在连接的读卡器上交换卡，我必须读取磁卡读卡器数据。

磁卡主要保存用户注册信息。所以用户会在接待时给卡。接待员将交换卡，系统将从卡中读取数据并在我的派对管理应用程序中注册该用户。

不，我知道该怎么做？可以用 PHP 吗？

请分享想法如何做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T10:25:39.223

> I have to make a application where card reader will be attached to system and I have to read magnetic card reader data if someone swap card on card reader attached.

Since you want to do this in PHP, I assume this is a **web application** and that the card is swiped at the *client* machine where the *browser* is running.

You may have a **keyboard-emulation swiper** (you usually get a text such as '*123456*'), in which case you need to intercept the keyboard/focus and upload the data as form field or AJAX. This can be tricky if the field or the browser lose the focus, and you'd need to run the browser in "kiosk mode".

Or you can have a swiper using other technologies such as **serial (RS232[C])**, which I believe is quite obsolete, or **custom interface** (which means normally an USB swiper and a set of API). If this is the case, it all depends on what API are implemented; some devices come with an ActiveX applet which will force you to use Internet Explorer technologies on Windows platform. Some others use Java applets, and you will have to integrate them in the Web page.

Finally some of them have a **completely custom application** which may interface with the system in several ways (the case "custom LIBRARY" is the same, except that you have to also develop the custom application *yourself*!):

*   By sending a custom HTTP query to a programmable server. If this is the case you're lucky; you can program a query for each terminal, e.g. "http://yourserver/gotcard?terminal=LODGE&card=$$CODE$$". The custom application will lurk in the background, grab the swiped code, send it to the server; and you shall poll the server to know when each terminal has received a code. You'll need to handle spurious and duplicate codes. Such applications come with several 'placeholders' such as $$CODE$$, $$TIMESTAMP$$, and sometimes $$SWIPEDIRECTION$$; they're used for personnel timetracking (swipe left to right when entering work, right to left when going home).
*   By uploading the code into a MySQL or SQL Server, again with programmable placeholders. Here you'll be perhaps forced to use a VPN/SSH connection to be able to intercept the query, and the DB drivers supplied might limit your architectural choices.
*   By running a custom application or script with the usual placeholders. In this case your best options is, IMHO, to write a script calling `lynx` (either Linux or Windows) and dovetail into case #1, "custom HTTP query".

Unfortunately the various suppliers tend to either the "hacky" side (i.e., they supply you the hardware and a minimum of software, a library and a sample MFC app or source code, and you're on your own) or on the "everything included and nonnegotiable" side (i.e., you get your reader with a fully configured POS or employee timelogger app, and no easy way of doing anything else with it).

If you're running **server side**, i.e., PHP script (not its HTML/text output) and badge reader are on the same machine, then again it depends on what software you were supplied with. For servers, keyboard emulation are either the best (if you have a headless server with no reason to ever connect a keyboard) or asking for trouble (if the magnetic reader and the real keyboard find themselves in competition). RS232[C] are also very simple to use, in Linux you can `ttytail` or maybe even `tail -f` the device on a log file and poll the log file. **YOU MAY HAVE PRIVACY ISSUES WITH THAT** (think "recording all customers' credit card numbers in plain text"). Or you can attach the device in PHP with `fopen()`, no trouble there.

Custom-API libraries might be tricky. You might have to resort to the trick of creating a socket or named pipe "server" which opens the device and makes its results available to PHP through `fsockopen()`. Unix sockets and client/server programming knowledge required.

**UPDATE**

I saw in a comment that you have the library for the barcode reader. I still assume you're in a web app scenario (say, three POS with readers, one server).

A way of doing this could be:

```
// PHP "server" application running as CLI on POS #1
// (will read some data from an INI file)

* application initialization

for(;;)
{
    /* Hypothesis 1: blocking library */
    $code = read_barcode();

    /* Hypothesis 2: nonblocking, but buffering library */
    if (!barcode_available())
    {
        sleep(1);
        continue;
    }
    /* Hypothesis 3 is left as an exercise ;-) - remember to reinit the buffer */

    if (!checks_if_valid_barcode($code))
       continue;

    // Unless there's some reason of using cURL, we keep it simple
    // We might want to use mcrypt() function to encrypt the code, though.
    $response = file_get_contents(
         $CONFIG['server_url'].'?terminal='.$CONFIG['terminal']
         .'&code='.$code
    );
    // Do something with the response - maybe just an OK or an ERROR
    // (e.g. play a sound, just for kicks).
    // The server, which generates the error, knows all about the error itself
    // and the webapp will poll details from the server, not from this app.
} 
```

The web application will query the server at intervals; we have two paralle workflows:

*   (1) AJAX checks for swipe
*   (2) CLI listens for a swipe
*   (1) Server responds 'none yet'
*   (2) CLI app sends a swipe
*   (1) AJAX checks for swipe
*   (1) Server responds 'none yet'
*   (2) Server validates the swipe
*   (1) AJAX checks for swipe
*   (1) Server responds 'I got it'
*   (2) goes back to listening
*   (1) client displays form and starts processing
*   ...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T10:24:31.830

On a unix system i would use a named pipe and have something like python handle the magnetic card. the ones ive used use RS232 which python handles nicely. and can then pipe to PHP. PHP can also send info back on this pipe eg ask for a re read etc.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T10:23:01.460

使用条形码阅读器构建了一个模块化系统 - 一种方法是使用 VB 或 c# 之类的语言构建一个简单的 Web 浏览器（C# 有一个组件供您在大约 5 分钟内完成此操作）。然后 C# 可以与浏览器交互，将数据发送到站点？

# asp.net - 无法获取隐藏字段值

> ID：12779428
> 
> 赞同：1
> 
> 时间：2012-10-08T10:02:38.630
> 
> 标签：asp.net, knockout.js

我想访问淘汰赛中的隐藏字段值。
这是我的html代码

```
<td>
                        <input type="checkbox" data-bind="checked: status, disable: status, click: $root.UpdateStatus" />
                        <input id="hdnGoalId" type="hidden" data-bind="value: goalId" />
                    </td> 
```

这是我的 JavaScript 代码

```
var WebmailViewModel = function() {

 self.UpdateNote = function () {
    $.ajax({
        type: "POST",
        url: 'SinglePageApp.aspx/UpdateNote',
        data: "{goalId: '" + self.goalId + "'}",
        contentType: "application/json; charset=utf-8",
        success: function (result) {
            alert(result.d);
        }
    });
};
};ko.applyBindings(new WebmailViewModel()); 
```

在 UpdateNote 我想传递选定的goalId。请给我一些建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:49:27.480

我看到两个可能的问题

1.  *targetId*必须定义为可观察的，因为您在视图中使用`data-bind="value: goalId"`.
2.  要获取*goalId*的值，您必须将其作为函数调用（因为它是可观察的）。

查看更新的视图模型：

```
var WebmailViewModel = function() {
    var self = this;
    self.goalId = ko.observable(10); // where 10 is whatever value goalId should be
    self.UpdateNote = function() {
        $.ajax({
            type: "POST",
            url: 'SinglePageApp.aspx/UpdateNote',
            data: "{goalId: '" + self.goalId() + "'}",
            contentType: "application/json; charset=utf-8",
            success: function(result) {
                alert(result.d);
            }
        });
    };
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:28:03.207

感谢您的回复。我通过这样的更新得到了解决方案

```
self.UpdateNote = function (tblUsers) {
    $.ajax({
        type: "POST",
        url: 'SinglePageApp.aspx/UpdateNote',
        data: "{goalId: " + tblUsers.goalId + "}",
        contentType: "application/json; charset=utf-8",
        success: function (result) {
            alert(result.d);
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) {
            alert(textStatus);
            alert(errorThrown);
        }
    });
}; 
```

其中 tblUsers 是 json 对象。

# .net - Dataflow LinkTo 参数discardMessages 发生了什么？

> ID：12779431
> 
> 赞同：3
> 
> 时间：2012-10-08T10:02:57.257
> 
> 标签：.net, task-parallel-library, dataflow

在“TPL 数据流简介”中，Stephen Toub 在 LinkTo 下写道：“......以及如果不满足谓词应该是什么行为（例如，如果这样的消息被简单地丢弃，如果这样的消息被拒绝并提供给其他目标， ETC。）”

在某些示例中，我看到在过滤谓词之后将布尔值传递给 LinkTo 方法，并且提到了参数 discardMessages。例如，这个不错的示例[Tpl Dataflow 演练](http://blogs.microsoft.co.il/blogs/bnaya/archive/2012/01/28/tpl-dataflow-walkthrough-part-5.aspx)中的链接无法编译：

```
linkBroadcaster.LinkTo(downloader, linkFilter, true); 
```

我在 LinkTo 重载中找不到该参数。此行为是否已更改为某些默认值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T12:14:49.447

discardMessages 参数已被替换为

```
...LinkTo（DataflowBlock.NullTarget）

```

有关更详细的讨论，请参阅[Dataflow MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/tpldataflow/thread/d27ad0e0-ee86-4104-85cf-22eda1e11ee8)

# vb.net - 如何在 VB.NET 中获取 Main 方法的参数

> ID：12779446
> 
> 赞同：7
> 
> 时间：2012-10-08T10:04:14.523
> 
> 标签：vb.net

在 C# Console Application 中，Main 方法有一个 string() 参数，但在 VB.NET 中，Main 方法不包含参数，如果我设置命令行参数，如何检索它们？

在 C# 中，如果我右键单击项目并选择属性，在调试项中设置命令行参数，我可以使用 args[0]、args[1] 等来实现我的参数。在 VB.NET 中，我发现

```
System.Environment.GetCommandLineArgs() 
```

也可以实现它们，但是它包含了一个参数，它还包含了过程的路径，任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T10:10:51.333

您可以将它们添加到入口点方法签名 ( `ByVal args() As String`) 并像在 C# 中一样访问它们。您还可以使用 VB.NETs`My`类来访问它们，例如`My.Application.CommandLineArgs`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-08T10:07:59.943

您只需将参数添加到`Main`方法，它就像在 C# 中一样工作：

```
Sub Main(args As String()) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-15T22:18:33.507

然后您可以使用此代码片段来实际使用命令行参数。原始发帖人没有要求或需要，但提供给那些看到这篇文章的人。此片段显示如何查看是否有命令行参数以及如何访问它们：

```
Dim myFilename As String
If args.Length > 0 Then
        myFilename = args(0)
End If
... 
```

# python - 用于转换旧数据的文件格式

> ID：12779449
> 
> 赞同：2
> 
> 时间：2012-10-08T10:04:18.930
> 
> 标签：python, json, file-format, legacy

我有大量的文件结构如下：

```
// NAME = XXXX
// MARKER = YYYY
// SOURCE = ZZZZ
# Real data follows, one item per line
Item1
Item2
Item3 
```

我正在尝试摆脱这种传统格式，因为解析起来很麻烦（有时有 3 // 行，有时是 4 行）：鉴于 Item1 等...列表不长（最多 400 项左右）我正在考虑一个合适的替代品。绝对必要的是基于文本的。

我想到了两个想法：

1.  使用 JSON
2.  保持数据不变，但将标题压缩在一行

然而，目标是尽可能*避免*自定义解析（这些文件的主要问题）并依赖构建的解析器（在我的特定情况下是 Python 解析器）。假设我选择 1，那么 JSON 实际上是一个合适的选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T10:17:35.290

以下是支持 JSON 的一些原因：

*   它是人类可读的
*   它不像 XML 那样冗长
*   Python 有一个用于读取/写入 JSON的[内置库](http://docs.python.org/library/json.html)
*   JSON 不是 Python 特定的（与[configparser](http://docs.python.org/dev/library/configparser.html)不同）。其他语言也可以解析JSON

JSON 的一个可能问题：

*   必须读取整个 JSON 才能进行解析。如果 JSON 很大，这可能是一个（内存）问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T10:35:37.083

在企业环境中，我更喜欢 XML，因为它具有成熟的验证选项、数据类型规范和非 unicode 支持。

我知道 JSON 也有一个草案 Schema 规范，如果你沿着 JSON 路线走，这将是值得使用的。

# iphone - iOS 6 放大镜点击解决方法

> ID：12779452
> 
> 赞同：6
> 
> 时间：2012-10-08T10:04:36.250
> 
> 标签：iphone, jquery-ui, ios6

我正在使用 jQueryUI 将一些项目从一个列表拖到另一个。对于移动设备，特别是触摸驱动设备，用户必须按下并等待列表项开始拖动 - 这是必需的，因为它不会禁用滚动功能。

现在，在 iOS 6.0 中，如果用户一直按下相同的列表项，则会出现放大镜，这会使拖动任务变得困难。

任何人都知道（也许）CSS 或 jQuery 解决方案？

![在此处输入图像描述](../Images/6cff39d33047802bb7fe3daf5ce9b939.png)

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T02:34:24.270

选择时会出现放大镜。

因此，将通常的跨浏览器添加`user-select`到您的列表项中：

```
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none; 
```

为了更好地衡量，添加`touch-callout`

```
-webkit-touch-callout: none; 
```

这是一个演示：http: [//jsfiddle.net/MadLittleMods/3tzkc/](http://jsfiddle.net/MadLittleMods/3tzkc/)

# c++ - const 内的非 const

> ID：12779453
> 
> 赞同：0
> 
> 时间：2012-10-08T10:04:38.237
> 
> 标签：c++, constants

```
class A
{
void koo(){}
void foo() const {this->koo();}
};

int main()
{
A a;
a.foo();
} 
```

我试图在 const 函数中调用一个非常量函数。

```
error: passing ‘const A’ as ‘this’ argument of ‘void A::koo()’ discards qualifiers [-fpermissive] 
```

1.  这个错误是什么意思？
2.  我可以为此使用 mutable 关键字吗，如果那样，如何？（[作为这篇文章](https://stackoverflow.com/questions/5008541/how-to-call-a-non-const-function-within-a-const-function-c)）
3.  我可以为此使用 const_cast 吗？如果是这样，怎么做？（[作为这篇文章](https://stackoverflow.com/questions/5008541/how-to-call-a-non-const-function-within-a-const-function-c)）
4.  蚂蚁还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T10:08:53.970

1.  在功能`foo`上，`this`有类型`const A*`。为了在其上调用非常量函数，您最终会`this`得到`koo`相同的值但 type `A*`，即它会丢弃 const 限定符。

2.  不。

3.  你可以，因为你碰巧知道该`koo`函数不会修改任何作为数据成员的 const 对象`A`（因为（a）函数体是空的，（b）`A`没有数据成员，（c）它是在非-const 实例`A`）。但不要那样做。

4.  标记`koo`为`const`成员函数，同`foo`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:06:19.390

`koo`未声明为`const`，这表明它*可以*以某种方式更改对象，这在 const 对象上是不允许的。的签名`foo`表示当前对象 ( `this`) 应被视为常量。

您需要指定一个`const`变体`koo`：

```
void koo() const {}
void koo() {} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:08:04.750

如果`koo`声明不是 const（即它修改了对象的内部状态），那么确实`foo`不是 const。

要么制作`koo`const，`foo`而不是 const，或者如果对象表现得像“没有状态”但具有必须更新的内部变量，则制作这些变量`mutable`。

```
mutable int m_accessCount; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T10:11:44.887

当您将函数声明为`const`时，您是在说“此函数*永远不会*更改对象”。这允许您在`const`对象上使用该功能。

在您的情况下，您正在从 const 内部调用非常量函数，这意味着您无法确保对象不会更改。这会导致错误，因为`const`on`foo()`意味着在任何情况下都不能更改对象。

请避免使用`const_cast`，因为如果使用不当会导致UB。

修复它的最佳方法是提供`const`一个`koo()`. 要么编写它的非修改版本，要么（如果它不按原样修改对象）只需添加`const`关键字。

# ruby-on-rails - 覆盖引擎中主应用程序的视图

> ID：12779455
> 
> 赞同：1
> 
> 时间：2012-10-08T10:04:48.323
> 
> 标签：ruby-on-rails, rubygems

我目前正在处理主题。我需要在主 application_controller 中编写一个函数以在 engine_controller 中添加一个路径，以便它在主应用程序主题中查找视图，然后在引擎中查找相同的视图。

我不希望对我所做的引擎进行任何编辑，并且必须将视图路径添加到主应用程序的引擎视图加载路径中`application_controller`。

# gdb - openssh tty 烫发

> ID：12779465
> 
> 赞同：0
> 
> 时间：2012-10-08T10:05:17.690
> 
> 标签：gdb, openssh

对于每个 ssh 连接，都会设置一个关联的伪终端，例如`/dev/ttyp1 /dev/ttyp2`等。

在某些代码路径的 openssh 中，/dev/ttyp2 权限从`crw-rw-rw-`（默认）更改为`crwx-w----`（连接设置后）。

有什么方法可以让我在 openssh 中查看哪个代码部分？可能与 gdb 调试器一起使用，有什么方法可以“监视”特定文件权限。

在 openssh 的某些函数中，`session *s`作为参数，`s->tty`设置为`/dev/ttyp2`，到那时 perms 没有`'x'`设置执行位。但是在完全建立连接后，/dev/ttyp2 设置了“x”位。

我尝试查看`s->tty`变量的地址，但这无济于事。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:09:06.150

openssh/sshpty.c 中有一个函数 pty_setowner() ，它实际上在为会话分配的 tty 设备上执行 chmod。

我面临的问题是 chmod 在 tty dev 文件上失败，并且 tty dev 文件没有获得执行权限，因此我的终端上没有打印日志。

不管怎么说，多谢拉。

# php - 控制器存在，但找不到页面

> ID：12779469
> 
> 赞同：2
> 
> 时间：2012-10-08T10:05:35.897
> 
> 标签：php, yii

我的控制器有问题

我在 Windows 上使用服务器，一切正常，但在互联网上我试图访问页面 social_apartament/beauty_life/ 并且找不到页面，代码错误 404 这里是一些关于错误的信息

```
 [code] => 404
            [type] => CHttpException
            [errorCode] => 0
            [message] => Unable to resolve the request "beauty_life".
            [file] => /home1/moldovaj/public_html/testit/YiiRoot/framework/web/CWebApplication.php
            [line] => 287
            [trace] => #0 /home1/moldovaj/public_html/testit/YiiRoot/framework/web/CWebApplication.php(142): CWebApplication->runController('beauty_life')
#1 /home1/moldovaj/public_html/testit/YiiRoot/framework/base/CApplication.php(162): CWebApplication->processRequest()
#2 /home1/moldovaj/public_html/testit/www.social_apartament/index.php(13): CApplication->run()
#3 {main} 
```

服务器上的结构是这样的：

控制器/Beauty_LifeController.php 视图/beauty_life/index.php

控制器 Beauty_LifeController 是这样的：

```
 <?php

class Beauty_LifeController extends Controller
{

    public function actionIndex()
    {

....

        $this->render('index',
            array(
                'models'=>$models,
                'pages' => $pages,
                'archive' => $archive,
                'monthNames'=>$monthNames
            )
        );

    }

} 
```

当我用 Lovercase 字母输入 social_apartament/Beauty_Life/ 时很有趣，我给出了一个错误：`CException - Beauty_LifeController cannot find the requested view "index".`，奇怪的是主机服务器是[http://hostmonster.com](http://hostmonster.com)的问题，如果它有帮助，谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T10:07:40.757

windows 不区分大小写，但 linux 不区分大小写。将中的**L**设为 小写`Beauty_Life`。

您必须更改类名和文件名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T10:11:08.057

Controller = BeautyLife 并且您尝试获得 beautylife，您必须使用大写 B 和 L 请求才能获得正确的控制器。

看到这个链接：“http://hugoware.net/blog/ignoring-case-with-mono-mvc”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T10:12:55.037

如果您使用控制器命名约定会更好。将控制器命名为 BeautyLifeController 而不是 Beauty_Life。

而且，如果您使用的是 Windows，则文件命名不会有任何问题，但 linux 可能会有。

# ruby - 获取所需文件的完整路径

> ID：12779472
> 
> 赞同：2
> 
> 时间：2012-10-08T10:05:44.147
> 
> 标签：ruby, path

`file_name`获取成功`require`-d的文件的完整路径的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T10:27:06.837

我想出了答案。它是`$".last`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:28:45.993

`$LOAD_PATH`您可以在aka变量中查找已加载的文件，`$:`如[Show full path name of the ruby​​ file when it get loaded 中所述](https://stackoverflow.com/questions/456379/show-full-path-name-of-the-ruby-file-when-it-get-loaded)。您可以通过查询`$LOADED_FEATURES`aka列出所需的文件`$"`

```
require '/home/ashish/samples/required_test.rb'

$".each do |path|
    puts path
end 
```

有关要求的更多信息 - [http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-require](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-require)

# javascript - 如果它不是未定义的，则更改值

> ID：12779477
> 
> 赞同：0
> 
> 时间：2012-10-08T10:06:26.287
> 
> 标签：javascript, jquery

我正在使用此代码段将输入字段转换为常规文本。

```
$(".supernappula").live('click', function() {
   $('.item-quantity .simpleCart_input').replaceWith(function(){
   return '<span class='+this.className+'>'+this.value+'</span>'
   })    
}); 
```

但是，如果该值已经从输入更改为跨度，它会将其转换为`undefined`并且不应该这样做。

我正在考虑这样的解决方案：

```
$(".supernappula").live('click', function() {
    var howmany = $('.item-quantity .simpleCart_input').html();
    if(howmany == "undefined"){return false;}
        $('.item-quantity .simpleCart_input').replaceWith(function(){
        return '<span class='+this.className+'>'+this.value+'</span>'
        });
}); 
```

但它实际上并没有做任何事情。所以基本上，如果它已经转换，我将如何阻止它执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:09:05.247

用 if 条件包围你的替换

```
$(".supernappula").live('click', function() {
   if( $('.item-quantity .simpleCart_input').length){
      $('.item-quantity .simpleCart_input').replaceWith(function(){
         return '<span class='+this.className+'>'+this.value+'</span>'
      }) 
    }   
}); 
```

**编辑**

两个类名都分配给相同的输入..您使用了错误的选择器..

试试这个 `$('.item-quantity.simpleCart_input')`

[更新的小提琴](http://jsfiddle.net/qXv6Z/1/)

这`$('.item-quantity .simpleCart_input')`意味着 .simpleCart_input 是一个孩子，`.item-quantity`在你的情况下是错误的..

两个类都关联到同一个元素..所以你的选择器之间不应该有任何空格..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:20:27.433

您的元素内部必须至少有一个空格。因此，您可以使用以下方式进行验证：

`if($.trim($(".item-quantity .simpleCart_input").html()) == ""){return false;} ...`

# php - 使用基本身份验证参数向 HTTPS 发送 GET 请求

> ID：12779479
> 
> 赞同：2
> 
> 时间：2012-10-08T10:06:33.523
> 
> 标签：php, javascript, html, applet, basic-authentication

`php`我的目标是在我的页面和另一个页面之间建立主动连接。我的页面上有一个`java applet`，点击后，小程序会将我的页面重定向到另一个。默认情况下有一个登录屏幕，但我想跳过该步骤，所以当我的小程序重定向页面时，我希望用户将使用我的默认登录帐户登录。

我试过`"https://name:pass@addres"`了，也试过一些我在网上搜索后找到的例子，但我仍然没有结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:25:22.633

由于安全问题，大多数浏览器不再支持该语法。

主要是因为未编码的密码以及创建看起来像这样的虚假 URL 的可能性：

[http://www.yourbank.com_somelongpath:xxx@somescammerssite.com](http://www.yourbank.com_somelongpath:xxx@somescammerssite.com)

99% 的互联网用户会认为这是属于“yourbank.com”而不是“somescammerssite.com”的 URL。

# postgresql - 使 postgres 函数中的语句以原子方式运行

> ID：12779480
> 
> 赞同：0
> 
> 时间：2012-10-08T10:06:38.947
> 
> 标签：postgresql, transactions

我有以下 postgres 功能

```
CREATE OR REPLACE FUNCTION refresh_materialized_view(name)
  RETURNS integer AS
$BODY$
DECLARE
  _table_name ALIAS FOR $1;
  _entry materialized_views%ROWTYPE;
  _result INT;
BEGIN

  SELECT * INTO _entry FROM materialized_views WHERE table_name = _table_name;

  BEGIN;
    EXECUTE 'CREATE TEMP TABLE new_materialized_view_rows ON COMMIT DROP AS SELECT * FROM ' || _entry.view_name;
    EXECUTE 'TRUNCATE TABLE ' || _table_name;
    EXECUTE 'INSERT INTO ' || _table_name || ' SELECT * FROM new_materialized_view_rows';

    UPDATE materialized_views
    SET    last_refresh = CURRENT_TIMESTAMP
    WHERE  table_name = _table_name;
  COMMIT;

  EXECUTE 'ANALYZE ' || table_name; 
  RETURN 1;
END
$BODY$
LANGUAGE plpgsql VOLATILE SECURITY DEFINER;

ALTER FUNCTION refresh_materialized_view(name) OWNER TO portal; 
```

该函数是从非事务性上下文中调用的，因此我附上了更新数据的语句

```
BEGIN; 

COMMIT; 
```

以便这些语句以原子方式执行。但是，当我执行上面的脚本时，出现以下错误：

```
ERROR:  syntax error at or near ";"
LINE 16:   BEGIN; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:16:00.333

函数始终是*调用*事务的一部分。您不能在函数中提交事务。因此，您需要在调用代码中执行以下操作：

```
begin;
select efresh_materialized_view('foobar');
commit; 
```

“*该函数是从非事务性上下文中调用的*”
这是不可能的。如果没有 PostgreSQL 中的事务，您将无法工作。您可能指的是隐式提交每条*语句*的“自动提交”模式- 但这仍然是事务性的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:15:23.320

您不能在函数中使用 COMMIT。无论如何，该功能都是事务性的，这就是您不需要第二个 BEGIN 的原因；也是。这也是你的错误，这就是它失败的地方。

# c# - Ninject - 使用约束绑定泛型类型

> ID：12779482
> 
> 赞同：4
> 
> 时间：2012-10-08T10:06:46.480
> 
> 标签：c#, .net, dependency-injection, ninject, ioc-container

是否可以设置一个 ninject 绑定来遵守通用约束？

例如：

```
interface IFoo { }
interface IBar { }
interface IRepository<T> { }

class FooRepository<T> : IRepository<T> where T : IFoo { }
class BarRepository<T> : IRepository<T> where T : IBar { }

class Foo : IFoo { }
class Bar : IBar { }

class Program
{
    static void Main(string[] args)
    {
        IKernel kernel = new StandardKernel();

        // Use this binding only where T : IFoo
        kernel.Bind(typeof(IRepository<>)).To(typeof(FooRepository<>));

        // Use this one only where T : IBar
        kernel.Bind(typeof(IRepository<>)).To(typeof(BarRepository<>));

        var fooRepository = kernel.Get<IRepository<Foo>>();
        var barRepository = kernel.Get<IRepository<Bar>>();
    }
} 
```

按原样调用此代码将产生多个激活路径异常：-

> 激活 IRepository{Foo} 时出错：有多个匹配的绑定可用。

如何将绑定设置为以 T 的值为条件？理想情况下，我希望他们从目标类型中获取约束，因为我已经在那里定义了它们，但是如果我必须在绑定中再次定义它们也是可以接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:36:42.717

也许有一个更清洁的解决方案，但它绝对适用于`When` [上下文绑定](https://github.com/ninject/ninject/wiki/Contextual-Binding)方法和一些反射：

```
// Use this binding only where T : IFoo
kernel.Bind(typeof(IRepository<>)).To(typeof(FooRepository<>))
   .When(r => typeof(IFoo).IsAssignableFrom(r.Service.GetGenericArguments()[0]));

// Use this one only where T : IBar
kernel.Bind(typeof(IRepository<>)).To(typeof(BarRepository<>))
  .When(r =>  typeof(IBar).IsAssignableFrom(r.Service.GetGenericArguments()[0])); 
```

# asp.net - 在 Response.OutputStream.Write 之后写入屏幕

> ID：12779483
> 
> 赞同：0
> 
> 时间：2012-10-08T10:06:48.580
> 
> 标签：asp.net

我正在使用 System.Drawing 命名空间创建一个位图，并将其作为 jpeg 呈现给浏览器

```
HttpContext.Current.Response.OutputStream.Write(buffer, 0, buffer.Length); 
```

渲染的 jpeg 占据了整个屏幕 - 我想让 div 在图形加载后出现在图形上。鉴于没有呈现 html，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:50:28.513

我认为不可能做到这一点。

你可以为你的图像使用一个 HttpHandler，然后在它下面有你想要的任何东西：

```
<img src='imageHandler.ashx' />
<div id='otherContent'>
   all other stuff here
</div> 
```

有关在这种情况下如何使用 HttpHandler 的更多信息，请参阅：[bytearray to image asp.net](https://stackoverflow.com/questions/1738020/bytearray-to-image-asp-net)

# android - 如何在android中突出显示日历上的某些日期

> ID：12779484
> 
> 赞同：0
> 
> 时间：2012-10-08T10:06:49.897
> 
> 标签：android, android-calendar, android-date

我在 android 中做日历应用程序。我的代码来自：[http](http://code.google.com/query/#q=android%20calendar) ://code.google.com/query/#q=android%20calendar 在这里我可以从日历中获取日期。但我需要在上面标记一些日期。例如，当我给出任何日期时，它应该在我的日历上突出显示。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:11:06.853

通常，当您调用

```
setDate() 
```

方法，这将为您完成工作。

# php - PHP 中的 RGB 或 CYMK 图像

> ID：12779486
> 
> 赞同：0
> 
> 时间：2012-10-08T10:06:51.770
> 
> 标签：php

在我的 PHP 应用程序中，我想只允许上传 RGB 图像。使用*getimagesize()*函数，返回一个数组，其中一个元素是*channels*。RGB 图像的值为 3，CYMK 图像的值为 4。

现在，PNG 图像的问题在于该函数没有返回通道值。因此，如何检查 PNG 图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T10:08:47.870

简单的。PNG 不支持 CMYK。

通过 Google 轻松找到更多信息：http: [//www.prepressure.com/library/file-formats/png](http://www.prepressure.com/library/file-formats/png)

# android - 我可以 System.load 本机库包含在不同的 apk 中吗？

> ID：12779488
> 
> 赞同：4
> 
> 时间：2012-10-08T10:06:53.423
> 
> 标签：android, android-ndk, shared-libraries

AFAIK 每个 android 应用程序都安装有自己的用户权限。如果应用程序*A*包含本机库（即`/data/data/com.app.A/lib/libA.so`），我可以`System.load("/data/data/com.app.A/lib/libA.so")`从应用程序*B*使用吗？

在我拥有的设备上，`/data/data/com.app.A/lib/libA.so`设置了其他读取权限，因此我可以从另一个应用程序加载它。但这对所有安卓系统都有效吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T12:25:56.083

我得出的结论是，即使在技术上是可行的，也应该非常不鼓励这样做。Android 文档对此并不清楚，但安全策略为每个应用程序分配了一个用户 ID，以便应用程序 A 不能干扰应用程序 B，除非通过 Android 框架。

我能看到的唯一例外是两个应用程序由相同的密钥签名，例如由同一个开发人员。

因此，不应允许加载外部应用程序的本机库，如果在未来的 Android 版本中删除其他读取权限也就不足为奇了。

不确定当一个应用程序实际上是一个库项目时会发生什么，例如 OpenCV Manager 的情况。在这种情况下，App A 与 App B（包含本机库）一起编译，并且 System.load() 由 App B 的代码执行，即使在 App A 的运行时进程中执行也是如此。（欢迎对此发表评论；））

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-08T10:25:55.007

Even if you are able to load it because of the permission you won't be able to execute the functions inside the libA.so because it has different function signature related to package name and Class name defined in app **A**

```
JNIEXPORT jint JNICALL Java_com_android_A_class_method(JNIEnv *d, jobject e, jstring f)
{
//some action

} 
```

Hence no harm done even if you are able to load it from another app B.

# java - 比较2个excel文件的内容

> ID：12779489
> 
> 赞同：3
> 
> 时间：2012-10-08T10:07:03.877
> 
> 标签：java, excel, comparison, compare

我有 2 个 excel 文件，我想比较内容并突出差异。例如：

第一个文件...

```
name|age
abc|123
def|456
second file...
name|age
abc|123
def|456
ghi|789 - this being the differece 
```

有没有第三方库可以做到这一点？或者最好的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T10:25:01.933

Like DaDaDom said Apache POI is what you are looking for. You can download it from [this page](http://poi.apache.org/download.html). Mind that POI project is not fully independent and you may need to download some extra libraries. Follow the instructions on Apache POI website. This is how you use it:

```
InputStream myxls = new FileInputStream("workbook.xls"));
HSSFWorkbook wb = new HSSFWorkbook(myxls); // for *.xlsx use XSSFWorkbook 
```

If it's a new file you might need to create sheet before proceeding, but in this case the files are already created.

```
HSSFSheet sheet = wb.getSheetAt(0);       // first sheet
HSSFRow row     = sheet.getRow(0);        // first row
HSSFCell cell   = row.getCell((short)0);  // first cell 
```

To get value from the cell use:

```
String value = cell.getStringCellValue(); 
```

However if the type stored in cell is numeric you would get an error. In case of numbers use:

```
Int value = cell.getCellValue(); 
```

This is a method I wrote to deal with different cell data types:

```
public String getValue(int x, int y){
    Row row = this.activeSheet.getRow(y);
    if(row==null) return "";
    Cell cell = row.getCell(x);
    if(cell==null) return "";
    int type = cell.getCellType();
    switch(type){
    case 0:
        return cell.getNumericCellValue() + "";
    case 1:
        return cell.getStringCellValue();
    case 2:
        return cell.getCellFormula();
    case 3:
        return "";
    case 4:
        return cell.getBooleanCellValue() + "";
    case 5:
        return cell.getErrorCellValue() + "";
    default:
        return "";
    }
} 
```

I hope this quick introduction into Apache POI will help you with your project :)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T09:08:40.893

从[这个问题](https://stackoverflow.com/questions/866346/easiest-way-to-compare-two-excel-files-in-java/12346967#12346967)，我的答案部分重复如下。

我的项目[simple-excel](https://github.com/tobyweston/simple-excel/)提供了一堆 Hamcrest 匹配器并包装了 Apache POI 的语法。

当您执行以下操作时，

```
assertThat(actual, WorkbookMatcher.sameWorkbook(expected)); 
```

例如，你会看到，

```
java.lang.AssertionError:
Expected: entire workbook to be equal
     but: cell at "C14" contained <"bananas"> expected <nothing>,
          cell at "C15" contained <"1,850,000 EUR"> expected <"1,850,000.00 EUR">,
          cell at "D16" contained <nothing> expected <"Tue Sep 04 06:30:00">
    at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20) 
```

[阅读有关它的博客文章](http://baddotrobot.com/blog/2012/09/14/diff-excel-with-java-and-hamcrest/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:11:01.223

我会使用 epplus 将两个文档加载到数据表中，然后遍历它们以查找差异。根据您想要突出显示差异的方式，您可以简单地使用 epplus 为单元格着色并将它们保存回文件中。

# html - 尽管 w3schools 说不支持，但 IE9 是否支持 css :target 选择器？

> ID：12779491
> 
> 赞同：2
> 
> 时间：2012-10-08T10:07:08.063
> 
> 标签：html, css, cross-browser, internet-explorer-9

我建立并维护的站点具有可见的 div，具体取决于它们是否为 :target 。由于 w3schools 告诉我 ( [http://www.w3schools.com/cssref/sel_target.asp](http://www.w3schools.com/cssref/sel_target.asp) ) 没有任何版本的 Internet Explorer 支持 :target 选择器，因此我建立了一个单独的 IE 站点。

不过，现在看来，IE9*确实*正确显示了我的代码。[您可以在此处](http://www.yben.eu)找到该站点。它现在自动转发到 IE 8 和更低版本的 IE 站点。

我可以安全地将这种结构用于 IE9，还是应该将 IE9 也转发到备份站点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T10:10:39.630

是的，IE9 是第一个支持`:target`伪类的 Internet Explorer 版本，因此您可以安全地与 IE9 一起使用它

除此之外，w3schools 通常不被认为是获取最新信息的最佳资源。我发现[Can I Use...是一个更简洁、更全面的](http://caniuse.com/)[资源`:target`](http://caniuse.com/#search=:target)，如.

你会经常看到人们提到[http://w3fools.com/](http://w3fools.com/)这解释了为什么有些人认为 w3schools 是一个糟糕的资源。我建议您阅读本文并下定决心继续使用它。就我个人而言，我不使用 w3shcools 并且更喜欢[Can I Use...](http://caniuse.com/)和[Mozilla Developer Network](https://developer.mozilla.org/en-US/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T10:14:58.017

当您想检查功能支持时使用的最佳替代方案：

*   [Find Me By IP 支持 HTML5 和 CSS3](http://fmbip.com/litmus)
*   [我可以用吗...](http://caniuse.com/)
*   [Sitepoint Reference](http://reference.sitepoint.com/css) *他们也有版本号！*

希望这可以帮助。不要相信 W3Schools。

# c# - 如何将 .EXE 文件内容复制到剪贴板？

> ID：12779494
> 
> 赞同：-2
> 
> 时间：2012-10-08T10:07:11.847
> 
> 标签：c#, binary, clipboard, exe

我想通过 C# 以编程方式将 .exe 文件的逐字节内容复制到剪贴板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:54:03.053

尝试这个 ：

```
// copying to the clipboard
var fileContent = File.ReadAllBytes("Path\\to\\exefile.exe");
Clipboard.SetData(DataFormats.Text, Convert.ToBase64String(fileContent));

// reading from the clipboard
var readBackFileContent = (string)Clipboard.GetData(DataFormats.Text);
File.WriteAllBytes("destination.exe", Convert.FromBase64String(readBackFileContent)); 
```

我正在转换为 base64，因为剪贴板没有适合二进制数据 AFAIK 的格式。

# oracle - 如何创建 Oracle 全局类型并在 PL/SQL 中使用它？

> ID：12779495
> 
> 赞同：4
> 
> 时间：2012-10-08T10:07:14.423
> 
> 标签：oracle, plsql

在过程或函数中声明的 Oracle RECORD TYPE 是本地的，因此它可能只在本地使用。如何声明一个全局的 RECORD TYPE，可以在 DB 中全局的所有过程和函数中使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T10:14:01.267

`Record` types cannot be created as a separate schema object, so to make a `Record` type publicly available the type is usually declared in a package specification, or a package body to be available only in the scope of that package.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T10:24:14.983

在包中使用对象类型的基本示例。

```
CREATE OR REPLACE TYPE test_rec IS OBJECT
(
 ID             VARCHAR2(30)
 ,TYPE               VARCHAR2(30)
);
/

CREATE OR REPLACE TYPE test_NT AS TABLE OF test_rec;
/

declare
 v_test_NT   test_NT;

begin
select test_rec (id
                ,type
                 )
        BULK COLLECT INTO v_test_NT  
 FROM test ;

--use it as you want

end; 
```

# c# - 网格视图及其绑定的索引超出范围问题

> ID：12779497
> 
> 赞同：0
> 
> 时间：2012-10-08T10:07:20.107
> 
> 标签：c#, asp.net, exception, gridview

我有一个包含 500 多条记录的网格。在第一页上，当我随机选择任何项目并单击编辑时它会起作用，但是在分页到任何页面后它会给我异常

```
> Index was out of range. Must be non-negative and less than the size of
> the collection. Parameter name: index 
```

我已经交叉检查：视图状态已启用，网格绑定正确。

以下是我的代码：

```
/// <summary>
/// Returns a comman separated value of the id selected in the grid.
/// </summary>
/// <param name="gv"></param>
/// <param name="checkbox"></param>
/// <returns></returns>
public static string GetGridViewsSelectedRowValues(GridView gv, string checkbox)
{
    var sb = new StringBuilder();
    if(gv.Rows.Count>0)
    {
        foreach (GridViewRow row in gv.Rows)
        {
            var cbx = (CheckBox) row.FindControl(checkbox);
            if(cbx!=null && cbx.Checked)
            {
                var dataKey = gv.DataKeys[row.RowIndex];
                if (dataKey != null) sb.Append(string.Format("{0},", dataKey.Value));
            }
        }
    }
    return sb.ToString().Remove(sb.ToString().LastIndexOf(','));
} 
```

我的编辑按钮点击事件：

```
protected void btnEdit_Click(object sender, EventArgs e)
{
    int count = Common.GridSelectedRows(gvCityMaster, "chkBxSelect");
    if (count > 1)
    {
        Common.ShowMessage("Only one item can be edited at once.");
    }
    else
    {
        int id = Common.ParseInt(Common.GetGridViewsSelectedRowValues(gvCityMaster, "chkBxSelect"));
        if (id > 0)
        {
            DisplayForm();
            DisplayUserDetails(id);
        }
    }
} 
```

我什至查看了 DataKeys 集合，每个集合中都有 18 个，这很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:13:51.567

`GridView.Rows`只返回当前页面的所有行。您可以使用`ViewState`将逗号分隔的 ID 值存储在 GridView 中。

```
private string SelectedIDs{
    get {
        if (ViewState("SelectedIDs") == null {
            ViewState("SelectedIDs") = "";
        }
        return (String)ViewState("SelectedIDs");
    }
    set { ViewState("SelectedIDs") = value; }
} 
```

您需要更新中的字符串`PageIndexChanging`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:27:26.633

上面的解决方案在分页时对我不起作用（使用 C# .Net 4.5），所以我想出了另一个解决方案。

注意：我在选择而不是按钮（第一个功能）时使该行可编辑。

```
protected override void Render(System.Web.UI.HtmlTextWriter writer)
{
    foreach (GridViewRow row in gridView.Rows)
    {
        if (row.RowType == DataControlRowType.DataRow)
        {
            row.Attributes["onclick"] = ClientScript.GetPostBackClientHyperlink(gridView, "Select$" + row.DataItemIndex, true);
        }
    }
    base.Render(writer);
}

protected void trackingDataGV_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    gridView.PageIndex = e.NewPageIndex;
    getGridViewData();
}

protected void gridView_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "Select")
    {
        int pageSize = gridView.PageSize;
        int pageIndex = gridView.PageIndex;
        int rowIndex = Convert.ToInt32(e.CommandArgument);
        int newRowIndex = 0;

        if (pageIndex > 0)
        {
            newRowIndex = pageIndex * pageSize;
            rowIndex = rowIndex - newRowIndex;
        }

    string valueXYZ = ((HiddenField)gridView.Rows[rowIndex].FindControl("valueXYZ")).Value;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-21T14:58:58.843

如果您在模板字段中有一个复选框：

```
<asp:GridView ID="EditListGridView" runat="server" AutoGenerateColumns="false"  AllowPaging="true" AllowSorting="true" PageSize="3" >
    <Columns>
      <asp:TemplateField>
        <ItemTemplate>
          <asp:CheckBox ID="Include" runat="server" OnCheckedChanged="Checkbox_Click"  AutoPostBack="true"  />
        </ItemTemplate>
      </asp:TemplateField> 
```

要获取总索引，请使用：

```
int i = ((GridViewRow)((Control)sender).Parent.Parent).DataItemIndex; 
```

要获取当前页面上的索引，请使用：

```
int i = ((GridViewRow)((Control)sender).Parent.Parent).RowIndex; 
```

要在分页网格视图中获取复选框（在当前页面上使用索引）：

```
CheckBox cb = (CheckBox)EditListGridView.Rows[i].FindControl("Include"); 
```

# javascript - 范围事件处理程序的 JavaScript 最佳实践

> ID：12779498
> 
> 赞同：1
> 
> 时间：2012-10-08T10:07:19.827
> 
> 标签：javascript, events, scoping

我是一名 Flash 开发人员，后来转变为 UX 开发人员。在命名空间对象或类中编写事件处理函数时，我试图找出最佳实践是什么？

当我看到一些添加嵌套处理程序的大量 init 函数时，我不喜欢它。它很难阅读和凌乱。我认为事情应该更多地被打破。

这就是我的做法（使用 jQuery），但有没有更好更容易接受的方式？

```
var myNamespace = {

   init: function() {

      var self = this;
      $('#button').click( function(event) { self.onClick(event); } );

   },

   onClick: function(event) {
      // do something
   }

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:33:49.343

如果您正在开发一个新项目，我推荐您使用 Backbone，它有一种添加事件的好方法：

```
var DocumentRow = Backbone.View.extend({
    tagName: "li",
    className: "document-row",

    events: {
        "click .icon":          "open",
        "click .button.edit":   "openEditDialog",
        "click .button.delete": "destroy"
    },

    render: function() {
        ...
    },

    open: function() {
        // listener...
    }
}); 
```

# objective-c - Xcode4.5 汇编器无法编译 Xcode4.4 完美处理的文件

> ID：12779502
> 
> 赞同：7
> 
> 时间：2012-10-08T10:07:26.520
> 
> 标签：objective-c, ios, xcode, simulator, xcode4.5

将 xcode 更新到 4.5 版本后出现错误

> 命令 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang 失败，退出代码为 1

我在更新后读到了这样的错误，但是在目标的构建设置中更改架构并没有帮助。它适用于模拟器，但不适用于设备。

整个错误

> CompileC /Users/psitkowski/Library/Developer/Xcode/DerivedData/Jasiu2-gskaidiujznurtdqnebvtogjtdnd/Build/Intermediates/Jasiu2.build/Debug-iphoneos/Jasiu2.build/Objects-normal/armv7/maxvid_decode_arm.o Classes/AVAnimator/maxvid_decode_arm.s正常 armv7 汇编器-with-cpp com.apple.compilers.llvm.clang.1_0.compiler cd /Users/psitkowski/Xcode/ksiazki/kopie/Jasiu2 setenv LANG en_US.US-ASCII setenv PATH "/Applications/Xcode.app/ Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
> 
> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x assembler-with-cpp -arch armv7 -fmessage-length=0 -Wno-trigraphs -fpascal-strings -O0 -Wno -缺失字段初始化器 -Wno-缺失原型 -Wreturn-type -Wformat -Wno-missing-braces -W括号 -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wempty-body -Wuninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-shorten-64-to-32 -Wno-newline-eof -DDEBUG =1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -Wdeprecated-declarations -g -Wno-sign-conversion -miphoneos-version-min=5 .1 -iquote /Users/psitkowski/Library/Developer/Xcode/DerivedData/Jasiu2-gskaidiujznurtdqnebvtogjtdnd/Build/Intermediates/Jasiu2.build/Debug-iphoneos/Jasiu2.build/Jasiu2-generated-files.hmap -I/Users/psitkowski/库/开发人员/Xcode/DerivedData/Jasiu2-gskaidiujznurtdqnebvtogjtdnd/Build/Intermediates/Jasiu2.build/Debug-iphoneos/Jasiu2.build/Jasiu2-own-target-headers.hmap -I/Users/psitkowski/Library/Developer/Xcode/ DerivedData/Jasiu2-gskaidiujznurtdqnebvtogjtdnd/Build/Intermediates/Jasiu2.build/Debug-iphoneos/Jasiu2.build/Jasiu2-all-target-headers.hmap -iquote /Users/psitkowski/Library/Developer/Xcode/DerivedData/Jasiu2-gskaidiujznurtdqnebvtogjtdnd/构建/中间体/Jasiu2.build/Debug-iphoneos/Jasiu2.build/Jasiu2-project-headers。hmap -I/Users/psitkowski/Library/Developer/Xcode/DerivedData/Jasiu2-gskaidiujznurtdqnebvtogjtdnd/Build/Products/Debug-iphoneos/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/包括 -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Users/ psitkowski/库/开发人员/Xcode/DerivedData/Jasiu2-gskaidiujznurtdqnebvtogjtdnd/Build/Intermediates/Jasiu2.build/Debug-iphoneos/Jasiu2.build/DerivedSources/armv7 -I/Users/psitkowski/Library/Developer/Xcode/DerivedData/Jasiu2- gskaidiujznurtdqnebvtogjtdnd/Build/Intermediates/Jasiu2.build/Debug-iphoneos/Jasiu2。build/DerivedSources -F/Users/psitkowski/Library/Developer/Xcode/DerivedData/Jasiu2-gskaidiujznurtdqnebvtogjtdnd/Build/Products/Debug-iphoneos -MMD -MT 依赖项-MF /Users/psitkowski/Library/Developer/Xcode/DerivedData/Jasiu2 -gskaidiujznurtdqnebvtogjtdnd/Build/Intermediates/Jasiu2.build/Debug-iphoneos/Jasiu2.build/Objects-normal/armv7/maxvid_decode_arm.d --serialize-diagnostics /Users/psitkowski/Library/Developer/Xcode/DerivedData/Jasiu2-gskaidiujznurtdqnebvtogjtdnd/构建/中间体/Jasiu2.build/Debug-iphoneos/Jasiu2.build/Objects-normal/armv7/maxvid_decode_arm.dia -c /Users/psitkowski/Xcode/ksiazki/kopie/Jasiu2/Classes/AVAnimator/maxvid_decode_arm.s -o /用户/psitkowski/库/开发人员/Xcode/DerivedData/Jasiu2-gskaidiujznurtdqnebvtogjtdnd/Build/Intermediates/Jasiu2.build/Debug-iphoneos/Jasiu2。构建/对象-正常/armv7/maxvid_decode_arm.o
> 
> /Users/psitkowski/Xcode/ksiazki/kopie/Jasiu2/Classes/AVAnimator/maxvid_decode_arm.s:65:2：错误：无效指令strneh r8，[r10]，#2 ^
> 
> ... 大约 100 行如上 ... /Users/psitkowski/Xcode/ksiazki/kopie/Jasiu2/Classes/AVAnimator/maxvid_decode_arm.s:474:2: 错误：无效指令 stmeqia r10!, {r0, r1} ^命令 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang 失败，退出代码为 1

当我忘记在构建阶段添加 libz.dylib 时，我之前遇到过这样的错误。你知道如何解决它吗？

非常感谢，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T07:05:06.633

是的，Xcode 4.5 做了一些改变，破坏了 ASM 代码的编译。修复很简单，只需在 AVAnimator 中 maxvid_decode_arm.s 文件的编译选项中添加 -no-integrated-as 标志。

像这样：

在列出文件的左侧窗口中选择项目文件（它是顶部带有蓝色图标的那个）。

在“目标”列表中选择您的目标。

选择“构建阶段”选项卡。

双击 maxvid_decode_arm.s，然后通过粘贴到出现的列表中添加 -no-integrated-as。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:44:49.297

错误很明显 - max_vid_decode.s 中的两个汇编指令格式不正确：

```
strneh r8, [r10], #2
stmeqia r10!, {r0, r1} 
```

可能汇编器规范已经收紧，并且之前稍微不合规的代码可以正常工作。找到 armv7 汇编器文档并阅读这两个命令，并使它们兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T16:25:06.740

[在 iphone 上编写 ARM 汇编代码的工作流中](https://stackoverflow.com/questions/1579950/workflow-for-writing-arm-assembly-code-on-the-iphone)找到了这个 。实际上我认为是我回答它的开发人员

> 在构建阶段的编译器标志中添加 -no-integrated-as。

# javascript - 使用另一个对象的 init 函数创建新对象

> ID：12779507
> 
> 赞同：0
> 
> 时间：2012-10-08T10:07:42.947
> 
> 标签：javascript

在我正在创建的对象的 init 函数中，我想创建另一个对象的新实例。

目前我的初始化代码如下所示：

```
 var myObj = {

getData: function(){

      var instance = this;

      // Display preloader gif
      instance.selectors.preloader.fadeIn();

      // Make call for appropriate data */
      dataManager.feed.get( function(data){

        for( var i = 0, len = data.feed.length; i < len; i++ ){

          var template = '';

        }
      }, window, null, '' );

      instance.displayVideos();

    },

    init: function(){

          var instance = this;

          // Create new DataManager object
          var dataManager = new DataManager();
    }

    } 
```

myObj.init();

我的问题是我收到一个错误，告诉我 DataManager 没有定义，谁能解释我如何引用这个对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:14:26.357

看，你的代码可能是可以挽救的，但维护起来会很糟糕。因此，我建议您使用闭包，您可以在其中尽可能多地*准备对象，然后最终公开它：*

```
var myObj = (function(current)
{
    'use strict';//<-- not necessary, but highly recommended
    var instance = {};//<-- this is going to become the value myObj references
    //if you want the init method, make a function object
    var init = function()
    {
        instance.dataManager = new DataManager();
    };
    instance.init = init;//<-- make it "public"
    //alternatively:
    instance.dataManager = new DataManager();
    //OR to have access to an instance of the DataManager object, but as a 
    // "private" property:
    var dataManager = new DataManager();
    //All methods or functions declared in this scope will have access to this object, 
    // the outer scope won't!
    //same for getData, use either one of the following:
    var getData = function()
    {
        //refer to the instance, not by using this, but use instance var
        //which is safer, and immutable thanks to the closure we're building
    };
    instance.getData = getData;
    //OR:
    instance.getData = function()
    {
        //same function body, just created and assigned directly
    };
    //if you chose to use the init method:
    instance.init();
    //if you created an init function, but didn't assign it to the instance object:
    init();
    //when the instance object is all set up and good to go:
    return instance;//will be assigned to the myObj variable
}(this));//call function and pass current scope as argument 
```

然后，只有这段代码我*真的*不明白：

```
dataManager.feed.get( function(data)
{
    //...
    for( var i = 0, len = data.feed.length; i < len; i++ )
    {//loop through an array of sorts
         var template = '';//and initialize a variable to an empty string each time?
    }
}, window, null, '' ); 
```

为什么？有什么意义，或者这只是一个虚拟循环？

* * *

在我看来，这里有两个主要问题。第一个是你没有包含`DataManager`构造函数。假设在您的代码*中定义了构造函数：*

```
var myObj = {
    init: function()
    {
        var instance = this;
        // Create new DataManager object
        var dataManager = new DataManager();
    },
    myObj.init();//<== this can't work
}; 
```

*您在定义对象字面量的同时*调用它的方法。这不起作用：

```
var myObj = {
    init: function()
    {
        var instance = this;
        // Create new DataManager object
        var dataManager = new DataManager();
    }
};
myObj.init();//<== now myObj exists, and has an init method 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:12:13.717

DataManager 对象应在调用 init() 方法之前定义。我在您的代码中看到了另一个问题（）。dataManager 变量未在 getData() 函数中声明/分配。在这种情况下使用对象级变量。试试这个：在 init 方法中 -

> 初始化：函数（）{
> 
> ```
>  var instance = this;
> 
>       // Create new DataManager object
>       this.dataManager = new DataManager();  } 
> ```

并在 getData() 方法中使用

> this.dataManager

代替

> 数据管理器

.

# refresh - 刷新整个页面检票口

> ID：12779511
> 
> 赞同：4
> 
> 时间：2012-10-08T10:08:00.053
> 
> 标签：refresh, wicket

我正在开发一个项目，单击链接时将替换用户会话。由于页眉、页脚和内容（即整个页面）中的所有数据都依赖于会话数据，因此必须重新加载整个页面（所有子页面）。我尝试了 bookmarkablepagelink，但我无法在此链接上执行操作（更改会话）。我还尝试创建一个更改会话的链接，然后以编程方式单击书签页面链接，但我找不到不使用 javascript 来单击链接的方法（这在这个项目中是没有选择的）。

任何好的建议如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T11:44:03.230

在`onClick`链接的方法中，进行会话重置，然后

```
setResponsePage(getPage()); 
```

并且页面应该很好地刷新。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T11:58:43.203

您的问题的解决方案是双重的：您替换会话，可能最好通过

```
getSession().invalidateNow(); 
```

并将重定向发送到可收藏的 URL。这也可以通过以下方式完成`setResponsePage`：

```
setResponsePage(OtherPage.class, new PageParameters().add("foo", "bar")); 
```

这将向浏览器发送一个 302 重定向，其中包含可添加书签的 URL 和提供的参数，让 servlet 容器有足够的机会在等待浏览器响应时重置会话（基本上是注销用户）。它还将触发一个新的会话 cookie（因为之前的会话不再活动）。

# .net - .NET 框架 4 / 4.5 是否支持 WSE？会是吗？

> ID：12779513
> 
> 赞同：0
> 
> 时间：2012-10-08T10:08:03.057
> 
> 标签：.net, wse

我们必须与一些使用 WSE 的第三方软件交互。我们确实需要他们升级到 WCF，但首先我需要检查 .NET4 / VS2012 是否支持 WSE？

谢谢，

乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:09:50.600

> WSE 没有与 VS2008 一起使用的更新。相反，VS 2008 依赖 WCF 来实现相同的功能。

[http://en.wikipedia.org/wiki/Web_Services_Enhancements](http://en.wikipedia.org/wiki/Web_Services_Enhancements)

# syntax-highlighting - Sublime 的 Maxscript 语法亮点？

> ID：12779515
> 
> 赞同：2
> 
> 时间：2012-10-08T10:08:08.060
> 
> 标签：syntax-highlighting, sublimetext2, maxscript

我知道目前没有针对 SublimeText2 的 Maxscript 语法定义，但是是否可以轻松地从 Notepad++ 或 Textpad 转换现有语法集或创建一个（更令人生畏的前景，因为我不知道从哪里开始） ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T08:04:53.047

我今天刚刚创建了一个：

[https://www.dropbox.com/s/zj5egnr0a74ldui/MaxScript.zip](https://www.dropbox.com/s/zj5egnr0a74ldui/MaxScript.zip)

我是语言定义的新手，所以这里和那里仍然有一些松散的结局，但到目前为止它已经完成了这项工作。如果您有任何问题、建议或修复，请告诉我。

我还没有机会将它上传到 GitHub 以进行包控制，但我有一天会做到的。在那之前，只需使用上面的下载链接并将文件放在你的包目录中，在一个名为 /MaxScript 的目录中。

享受！

2013 年 12 月 10 日编辑：更新了链接，现在又可以使用了。

# xml - 用于测试 API 负载的 XML 注入器

> ID：12779517
> 
> 赞同：0
> 
> 时间：2012-10-08T10:08:22.710
> 
> 标签：xml, testing

我为 Web 服务开发了一个 API，它也接受输入 XML 文件和使用 XML 文件的答案。

你知道我可以在 Linux 上使用的工具/框架来测试我的 API，例如：10 个请求/秒；20个请求/秒等等......

我没有找到任何工具来帮助我做到这一点。除非我开发自己的框架..

谢谢您的帮助 ！

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:11:19.710

尝试[ab2](http://httpd.apache.org/docs/2.2/programs/ab.html) (apache bench) 或[siege](http://www.joedog.org/siege-home/)。它们都允许您调整请求总数和并发级别。

# android - Android - 从 Web 管理位图

> ID：12779528
> 
> 赞同：1
> 
> 时间：2012-10-08T10:09:07.877
> 
> 标签：android, memory-management, bitmap

我正在编写一个专门显示图像的应用程序。它有一个图像的 GridView，它在屏幕上任何时候最多显示 10 个图像。我在 Android Developers 网站上找到了有关有效管理位图的教程，但这似乎只处理资源图像。我想知道如何对从网上下载的图像执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:17:03.187

请参考以下链接

[http://www.javacodegeeks.com/2012/08/android-load-images-from-web-and-caching.html](http://www.javacodegeeks.com/2012/08/android-load-images-from-web-and-caching.html)

在示例中，它只加载了一张图片。但与您在适配器类中用于在 getView() 中设置图像的功能相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:14:53.263

您可以从网络上下载您的图像并将其放入应用程序的图像文件夹中。然后，该图像将作为其他资源图像进行管理，您可以照此使用。

在此处阅读说明：http: [//developer.android.com/training/displaying-bitmaps/cache-bitmap.html](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

# single-sign-on - SP 发起的 SSO 和 IDP 发起的 SSO 之间的区别

> ID：12779532
> 
> 赞同：114
> 
> 时间：2012-10-08T10:09:25.483
> 
> 标签：single-sign-on, adfs2.0, openam

谁能向我解释**SP 发起的 SSO**和**IDP 发起的 SSO**之间的主要区别是什么，包括哪个是结合 ADFS + OpenAM 联合实施单点登录的更好解决方案？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2014-03-26T06:38:56.487

**IDP 发起的 SSO**

来自 PingFederate 文档：- [https://docs.pingidentity.com/bundle/pf_sm_supportedStandards_pf82/page/task/idpInitiatedSsoPOST.html](https://docs.pingidentity.com/bundle/pf_sm_supportedStandards_pf82/page/task/idpInitiatedSsoPOST.html)

在这种情况下，用户登录到 IdP 并尝试访问远程 SP 服务器上的资源。SAML 断言通过 HTTP POST 传输到 SP。

处理步骤：

1.  用户已登录到 IdP。
2.  用户请求访问受保护的 SP 资源。用户未登录到 SP 站点。
3.  可选地，IdP 从用户数据存储中检索属性。
4.  IdP 的 SSO 服务向浏览器返回一个 HTML 表单，其中包含一个 SAML 响应，其中包含身份验证断言和任何其他属性。浏览器自动将 HTML 表单发送回 SP。

**SP 发起的 SSO**

来自 PingFederate 文档：- [http://documentation.pingidentity.com/display/PF610/SP-Initiated+SSO--POST-POST](http://documentation.pingidentity.com/display/PF610/SP-Initiated+SSO--POST-POST)

在这种情况下，用户尝试在未登录的情况下直接访问 SP 网站上的受保护资源。用户在 SP 站点上没有帐户，但有一个由第三方 IdP 管理的联合帐户。SP 向 IdP 发送身份验证请求。请求和返回的 SAML 断言都通过用户的浏览器通过 HTTP POST 发送。

处理步骤：

1.  用户请求访问受保护的 SP 资源。该请求被重定向到联合服务器以处理身份验证。
2.  联合服务器向浏览器发送一个 HTML 表单，其中包含来自 IdP 的身份验证请求。HTML 表单会自动发布到 IdP 的 SSO 服务。
3.  如果用户尚未登录到 IdP 站点，或者如果需要重新验证，则 IdP 会要求提供凭据（例如，ID 和密码）并且用户登录。
4.  可以从用户数据存储中检索有关用户的附加信息以包含在 SAML 响应中。（这些属性是作为 IdP 和 SP 之间的联合协议的一部分预先确定的）

5.  IdP 的 SSO 服务向浏览器返回一个 HTML 表单，其中包含一个 SAML 响应，其中包含身份验证断言和任何其他属性。浏览器自动将 HTML 表单发送回 SP。**注意：** SAML 规范要求对 POST 响应进行数字签名。

6.  （未显示）如果签名和断言有效，SP 为用户建立会话并将浏览器重定向到目标资源。

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2012-10-08T18:56:18.960

在 IDP Init SSO（未经请求的 Web SSO）中，联合过程由 IDP 向 SP 发送未经请求的 SAML 响应来启动。在 SP-Init 中，SP 生成一个 AuthnRequest 作为联合过程中的第一步发送给 IDP，然后 IDP 以 SAML 响应进行响应。恕我直言，ADFSv2 对 SAML2.0 Web SSO SP-Init 的支持比其 IDP-Init 支持更强：与第 3 方 Fed 产品的集成（主要围绕对 RelayState 的支持），因此如果您有选择，您将希望使用 SP-初始化，因为它可能会使 ADFSv2 的生活更轻松。

以下是 PingFederate 8.0 入门指南中的一些简单 SSO 描述，您可以通过这些描述也可能有所帮助 - [https://documentation.pingidentity.com/pingfederate/pf80/index.shtml#gettingStartedGuide/task/idpInitiatedSsoPOST.html](https://documentation.pingidentity.com/pingfederate/pf80/index.shtml#gettingStartedGuide/task/idpInitiatedSsoPOST.html)

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2016-11-11T06:54:59.797

# SP 发起的 SSO

向用户收费：“嘿，吉米，给我看那份报告”

SP 吉米：“嘿，我还不确定你是谁。我们这里有一个流程，所以你先去 IdP 鲍勃验证自己。我相信他。”

Bob the IdP：“我看到 Jimmy 派你来这里的。请给我你的凭据。”

向用户收费：“嗨，我是比尔。这是我的凭据。”

Bob the IdP：“嗨，Bill。看起来你已经退房了。”

Bob the IdP：“嘿，Jimmy。这家伙 Bill 检查了，这里有一些关于他的额外信息。你可以从这里做任何你想做的事情。”

SP 吉米：“好吧，很酷。看起来比尔也在我们的已知客人名单中。我会让比尔进来。”

# IdP 发起的 SSO

向用户收费：“嗨，鲍勃。我想去吉米家。那里的保安很严密。”

IdP 鲍勃：“嘿，吉米。我相信比尔。他检查了，这里有一些关于他的额外信息。你可以从这里做任何你想做的事情。”

SP 吉米：“好吧，很酷。看起来比尔也在我们的已知客人名单中。我会让比尔进来。”

* * *

我在这里详细介绍，但仍然保持简单：[https](https://jorgecolonconsulting.com/saml-sso-in-simple-terms/) ://jorgeclonconsulting.com/saml-sso-in-simple-terms/ 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-06T15:50:58.783

[https://support.procore.com/faq/what-is-the-difference-between-sp-and-idp-initiated-sso](https://support.procore.com/faq/what-is-the-difference-between-sp-and-idp-initiated-sso)

还有更多内容，但这是关于哪个是哪个的高级概述。

Procore 支持 SP 和 IdP 发起的 SSO：

身份提供者发起的（IdP 发起的）SSO。使用此选项，您的最终用户必须登录身份提供者的 SSO 页面（例如 Okta、OneLogin 或 Microsoft Azure AD），然后单击图标登录并打开 Procore Web 应用程序。要配置此解决方案，请参阅为 Microsoft Azure AD 配置 IdP 发起的 SSO、为 IdP 发起的 Okta SSO 配置 Procore 或为 OneLogin 配置 IdP 发起的 SSO。或服务提供商发起（SP 发起）的 SSO。称为 Procore 发起的 SSO，此选项使您的最终用户能够登录 Procore 登录页面，然后向识别提供者（例如 Okta、OneLogin 或 Microsoft Azure AD）发送授权请求。一旦 IdP 验证了用户的身份，用户就会登录到 Procore。要配置此解决方案，

# sql-server-2008 - Delphi - 带有 UPDATE SQL 语句的 TADOQuery.RowsAffected 始终为 -1

> ID：12779534
> 
> 赞同：3
> 
> 时间：2012-10-08T10:09:46.487
> 
> 标签：sql-server-2008, delphi, tadoquery, rows-affected

我正在使用 TADOQuery 组件执行 SQL UPDATE 语句，并希望检查已更新的行数。UPDATE 语句执行良好，并且相应地修改了行，但 .RowsAffected 属性始终返回 -1。文档状态 -1 表示该语句有错误，但正如我所说，它执行得很好。我尝试在语句前加上 SET NOCOUNT OFF 但这没有任何区别。我的代码如下：

```
var
  adoUpdateQuery: TADOQuery;
  blnUpdatedOK: Boolean;
begin
  adoUpdateQuery := TADOQuery.Create(nil);
  adoUpdateQuery.DisableControls;
  adoUpdateQuery.Connection := adcMiddleTierDB;
  adoUpdateQuery.ExecuteOptions := [eoExecuteNoRecords];
  adoUpdateQuery.SQL.Text := 'UPDATE MyTable SET Status = 1 WHERE Status = 0';
  try
    adoUpdateQuery.ExecSQL;
    blnUpdatedOK := (adoUpdateQuery.RowsAffected > 0); 
```

我正在使用 Delphi XE2，连接到 MS SQL Server 2008R2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T11:16:22.537

抱歉伙计们，感谢您的所有帮助，但我已经意识到问题所在。键入示例代码片段时，我未能将我实际更改数据库作为查询的一部分包含在 SQL 中。SQL 应该显示：

```
USE MyDatabase; UPDATE MyTable SET Status = 1 WHERE Status = 0 
```

事实证明，USE 命令阻止 RowsAffected 在同一语句中工作（停止它在 TADOQuery 和 TADOCommand 中工作）。我现在通过更改我的代码解决了这个问题，如下所示：

```
try
  // Need to change database in separate SQL query in order for RowsAffected to work
  adoUpdateQuery.SQL.Text := 'USE MyDatabase;';
  adoUpdateQuery.ExecSQL;
  adoUpdateQuery.SQL.Text := 'UPDATE MyTable SET Status = 1 WHERE Status = 0';
  adoUpdateQuery.ExecSQL;
  blnUpdatedOK := (adoUpdateQuery.RowsAffected > 0); 
```

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:12:06.650

使用 TADOCommand 并像这样调用它：

```
var
  AffectedRows: Integer;
begin
  adoUpdateCommand.Execute(AffectedRows, EmptyParam); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T11:52:25.527

一种可能性是这样的：

```
adoUpdateQuery.SQL.Add( 'USE MyDatabase;' );
adoUpdateQuery.SQL.Add( 'UPDATE MyTable SET Status = 1 WHERE Status = 0;' );
adoUpdateQuery.SQL.Add( 'SELECT @@rowcount;' );

adoUpdateQuery.Open;
try
  LRowCount := adoQuery.Fields[0].AsInteger;
finally
  adoUpdateQuery.Close;
end; 
```

如果您有更多的语句，您可以将 RowCounts 存储在一个临时表中，最后通过选择发布该临时表。

BTW TADOQuery.ExecSQL 是一个函数并返回受影响的行数。所以你的代码可以更紧凑

```
blnUpdatedOK := ( adoUpdateQuery.ExecSQL > 0 ); 
```

# javascript - __doPostBack 触发 Microsoft JScript 运行时错误：访问被拒绝

> ID：12779537
> 
> 赞同：1
> 
> 时间：2012-10-08T10:09:51.130
> 
> 标签：javascript, asp.net, internet-explorer-9

我有这个 javascript 代码：

```
 function checkUploadedFile() {
        var inputFile = $("#fuUploadProfile").val();
        if (inputFile != "") {
            __doPostBack('btnUploadProfile', '');
        } else {
            $("#lblMessage").show();
            return false;
        }
    } 
```

这是控件：

```
<asp:Label ID="lblMessage" runat="server" CssClass="srn_error">*Required</asp:Label>
<asp:FileUpload ID="fuUploadProfile" runat="server" CssClass="srn_file" />    
<asp:Button ID="btnUploadProfile" ClientIDMode="Static" runat="server" Text="Upload" class="srn_button" OnClientClick="checkUploadedFile();" /> 
```

即使我已经选择了要上传的文件，我仍然收到“Microsoft JScript 运行时错误：访问被拒绝”。仅在使用 IE9 时。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T07:27:44.417

在对代码进行了彻底的搜索之后，这是由于加载了一个 javascript，它触发了 asp.net FileUpload 控件的“点击”事件。似乎 IE 不能很好地处理触发 DOM 控件的 javascript 事件。

在我禁用 javascript 功能后，它运行良好。

# php - 如何访问存储在根文件夹之外的文档（.pdf .doc 等）

> ID：12779538
> 
> 赞同：-1
> 
> 时间：2012-10-08T10:09:58.437
> 
> 标签：php, root, documents

> **可能重复：**
> [如何使用 PHP 从 Web 根目录外部提供文档？](https://stackoverflow.com/questions/7701771/how-to-serve-documents-from-outside-the-web-root-using-php)

基本上这是我的第一个站点之一，但是我的客户想要存储的一些文档包含敏感信息，所以我已经阅读了，似乎解决这个问题的最佳方法是将文档存储在根文件夹之外。

但是，如果它们存储在根文件夹之外，我将如何让客户端访问它们进行下载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T10:12:14.500

当`readfile()`你告诉浏览器下载它时

```
$file = '/outsite/website/file.doc';
header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-Disposition: attachment; filename=" . basename($file));
header("Content-Type: " . mime_content_type($file));
header("Content-Length: " . filesize($file));
header("Content-Transfer-Encoding: binary");
readfile($file);
exit; 
```

请记住，Apache 必须有权访问它。

# sql - SQL 分组错误

> ID：12779540
> 
> 赞同：0
> 
> 时间：2012-10-08T10:10:04.953
> 
> 标签：sql, sql-server-2005

我正在运行以下 SQL，但不断收到错误消息：-

> '列 'SRVS.dbo.BTQGLDistributionsWithProjectCodesHM.AccountNo' 在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。

我正在运行的代码是：-

```
SELECT         AccountNo, 
           TransDate, 
           JournalNo, 
           AuditTrail, 
           Description, 
           JnlAmount, 
           ACTINDX, 
           CONTRACTNAME, 
           PAPROJNUMBER,GROUPING(PAPROJNUMBER) as PAPROJNUMBER, 
           SUM(PAFeebillamount) as total
FROM       SRVS.dbo.BTQGLDistributionsWithProjectCodesHM
GROUP BY   PAPROJNUMBER with rollup
ORDER BY   GROUPING (PAPROJNUMBER 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:12:35.043

使用`GROUP BY`语句时，必须在`group by`子句中指定不使用聚合的任何内容。

```
SELECT     AccountNo,  
           TransDate,  
           JournalNo,  
           AuditTrail,  
           Description,  
           JnlAmount,  
           ACTINDX,  
           CONTRACTNAME,  
           PAPROJNUMBER,GROUPING(PAPROJNUMBER) as PAPROJNUMBER,  
           SUM(PAFeebillamount) as total 
FROM       SRVS.dbo.BTQGLDistributionsWithProjectCodesHM 
GROUP BY   
       AccountNo,  
       TransDate,  
       JournalNo,  
       AuditTrail,  
       Description,  
       JnlAmount,  
       ACTINDX,  
       CONTRACTNAME,
       PAPROJNUMBER with rollup 
ORDER BY   GROUPING (PAPROJNUMBER) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:12:54.023

您必须在`SELECT`语句中包含未包含在`GROUP BY`子句中的聚合函数中的所有列，如下所示：

```
SELECT AccountNo, TransDate, 
  JournalNo, AuditTrail, Description, 
  JnlAmount, ACTINDX, CONTRACTNAME, 
  PAPROJNUMBER, GROUPING(PAPROJNUMBER) as PAPROJNUMBER,
  SUM(PAFeebillamount) as total 
FROM SRVS.dbo.BTQGLDistributionsWithProjectCodesHM 
GROUP BY 
  AccountNo, TransDate, 
  JournalNo, AuditTrail, Description, 
  JnlAmount, ACTINDX, CONTRACTNAME, 
  PAPROJNUMBER
with rollup 
ORDER BY GROUPING (PAPROJNUMBER) 
```

# asp.net - ASP.NET 从内容页面更改母版页中的超链接文本和 url

> ID：12779541
> 
> 赞同：0
> 
> 时间：2012-10-08T10:10:09.570
> 
> 标签：asp.net, hyperlink, master-pages

我的主页面“登录/注册”上有一个超链接。我希望在用户完成登录后将所有内容页面上的此超链接文本更改为“注销”并更改 URL。我还需要在 20 之后将其更改回来min-在哪里声明这个？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:15:19.273

您可以在母版页中创建属性。您将从需要转换为正确类型（即母版页的类型）的子页面获取母版页对象，然后您将能够访问母版页的属性。

此属性将为您提供有关用户状态的信息，您将能够与子页面通信并使用此属性传递数据。

# java - java servlet删除不重定向

> ID：12779546
> 
> 赞同：2
> 
> 时间：2012-10-08T10:10:42.253
> 
> 标签：java, sql, jsp, servlets, http-delete

我有一个简单的 servlet 页面，它推送到一个 jsp 页面，当你选择你想要的记录时，它应该从数据库中删除它并重新加载页面。然而发生的事情是在控制台中它打印正确的 sql delete 语句，但它**1）它不删除和 2）不重新加载页面**

这是servlet代码

```
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;

import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

/**
 * Servlet implementation class StudentModify
 */
@WebServlet("/StudentModify")
public class StudentModify extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public StudentModify() {
        super();
        // TODO Auto-generated constructor stub
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        sendBack(request, response);
    }

    private void sendBack(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        HttpSession session = request.getSession(true);

        //Set data you want to send back to the request (will be forwarded to the page)
        //Can set string, int, list, array etc.
        String sql = "SELECT ul.id, s.name, l.time, l.day, l.room,l.id" +
              " FROM lab l, subject s, user_lab ul" +
                " WHERE ul.user_id=" + (Integer)session.getAttribute("id") +" AND ul.lab_id ="+ "l.id"+" AND l.subject_id ="+"s.id";

      try{
        Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/wae","root","");
        System.out.println("got boob");
        System.out.println(session.getAttribute("id"));

          Statement stmt = con.createStatement();
          ResultSet res = stmt.executeQuery(sql);
          System.out.println(res);
          ArrayList<String> list1 = new ArrayList<String>();
          ArrayList<String> list2 = new ArrayList<String>();
          ArrayList<String> list3 = new ArrayList<String>();
          if (res.next()){
              do{
                  list1.add(res.getString(1));
                   list2.add(res.getString(2) + " " + res.getString(3) +" "+ res.getString(4) +" "+res.getString(5));
                   list3.add(res.getString(6));

              }while(res.next());

          String[] arr = list1.toArray(new String[list1.size()]);
          String[] arr1 = list2.toArray(new String[list2.size()]);
          String[] arr2 = list3.toArray(new String[list3.size()]);
          request.setAttribute("res", arr);
          request.setAttribute("res1", arr1);
          request.setAttribute("res2", arr2);
          }

      }catch (SQLException e) {
        } 
        catch (Exception e) {
        } 

        //Decides what page to send the request data to
        RequestDispatcher view = request.getRequestDispatcher("StudentModify.jsp");
        //Forward to the page and pass the request and response information
        view.forward(request, response); 
    } 

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        request.getSession(true);
        int user_id = Integer.parseInt((String)request.getParameter("user_id"));
        int lab_id =  Integer.parseInt((String)request.getParameter("lab_id"));
        int id = Integer.parseInt((String)request.getParameter("id"));
        System.out.println(request.getParameter("user_id")+"  "+request.getParameter("lab_id"));
          String message = null; 
          try {
              Class.forName("com.mysql.jdbc.Driver");
              Connection con = 
                DriverManager.getConnection("jdbc:mysql://localhost:3306/wae","root","");
            System.out.println("got connection"); 
            Statement s = con.createStatement(); 

            String sql = "DELETE FROM user_lab" + 
                      " WHERE id= " + id + " AND user_id= " + user_id + " AND lab_id= " + lab_id; 

              System.out.println(sql);
              int i = s.executeUpdate(sql); 
              if (i==1) {
                message = "Successfully Enrolled In lab."; 
                response.sendRedirect("Student_manage.jsp");
              } 

              s.close(); 
              con.close(); 
            } 
            catch (SQLException e) {
              message = "Error." + e.toString(); 
            } 
            catch (Exception e) {
              message = "Error." + e.toString(); 
            } 
            if (message!=null) {
              PrintWriter out = response.getWriter(); 
              out.println("<B>" + message + "</B><BR>"); 
              out.println("<HR><BR>"); 
            } 

          } 
// TODO Auto-generated method stub

} 
```

和jsp页面

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Mars University Lab System</title>
    <link rel="stylesheet" href="style.css" type="text/css" media="screen">
</head>

<body>
<jsp:include page="headerStudent.jsp"/>
<tr>
<td>
</td>
</tr>
<tr>
<td>

<div id = "centrecontent">
<br>
<h3>Enrol into Labs</h3>

<% if (session.getAttribute("id") == null) {
   System.out.println("error");
}
else{ %>
<%  String[] list1 = (String[])request.getAttribute("res");
String[] list2 = (String[])request.getAttribute("res1");
String[] list3 = (String[])request.getAttribute("res2");%>

<p>Please Choose a Class</p>

<form name="StudentModify" ACTION="StudentModify" method="post">

        <%
        for(int i=0; i<list1.length; i++)  
        { %> 
        <input type="hidden" name="id" value=<%=list3[i]%>>
        <input type="hidden" name="user_id" value=<%=session.getAttribute("id")%>>  
        <%out.print(list2[i] + " ");%>
        <input type="radio" name="lab_id" value=<%out.println(list1[i]);%>><br>
        <%
        } 
            }
            %>

        <input type=SUBMIT value="Submit" name="Submit"/>
        </form>

</div>
<jsp:include page="footer.jsp"/>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:21:07.363

您是否尝试过使用提交。如果您在查询运行后不提交更改，则更改不会反映在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:22:20.937

问题是[HTTP规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3)禁止DELETE / POST / PUT的重定向：

> "10.3 重定向 3xx
> 
> 此类状态码表明用户代理需要采取进一步的行动才能满足请求。当且仅当第二个请求中使用的方法是 GET 或 HEAD 时，用户代理可以执行所需的操作，而无需与用户交互。"

* * *

目前尚不清楚为什么数据库删除不起作用，但可能是您尚未提交事务。（OTOH，如果连接设置了自动提交，则不需要提交。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:14:03.407

Try changing

```
<input type=SUBMIT value="Submit" name="Submit"/> 
```

to

```
<input type="submit" value="Submit" name="Submit"/> 
```

# c++ - C++编译错误“没有命名类型”与上面定义的类型发生错误？

> ID：12779548
> 
> 赞同：-1
> 
> 时间：2012-10-08T10:10:51.550
> 
> 标签：c++

我写了一个包，在编译时遇到了“没有命名类型”的问题。

这是代码：skeleton.h

```
 #include "gp.h"

  ...       

  class Formula : public GP
  {
     ...
  };

  ...

  class FormulaPopulation : public GPPopulation
  {
     ...
     Formula* NthMyGP (int n) { return (Formula*) GPContainer::Nth (n); }
     ...
  }; 
```

当我编译时，编译器会指出 Formula(in FormulaPopulation) 没有命名类型，但是类 Formula 是在类 FormulaPopulation 之上定义的，我不知道为什么会发生这个错误......

如果您想了解更多信息，可以在[此处](http://homepage.ntu.edu.tw/~b98901160/printNatural.tar.gz)下载软件包。（下载后解压这个文件，在“printNatural”目录下make，可以看到错误）

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:37:47.243

您的 tarball 无法构建，因为缺少文件，但是有一个声明 `extern vector<myFNode> Formula;`会导致冲突。

非常令人困惑的是，显然可以定义`Formula`类而不会引起冲突，而无法使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:13:25.600

如果您复制和粘贴的代码与项目中的相同，则缺少分号：

```
 #include "gp.h"
  class Formula : public GP
  {
     ...
  }; // <-- HERE

  ...

  class FormulaPopulation : public GPPopulation
  {
     ...
     Formula* NthMyGP (int n) { return (Formula*) GPContainer::Nth (n); }
     ...
  }; // <-- HERE 
```

# javascript - 提取 Facebook 个人资料图片

> ID：12779560
> 
> 赞同：-1
> 
> 时间：2012-10-08T10:11:36.863
> 
> 标签：javascript, facebook, jsp, profile, image

我正在 Windows 8 中构建 Metro 应用程序，我希望它能够与 Facebook 同步。我想在我的 jsp 文件中显示图片。在用户单击他收到的 facebook 通知后，将显示 jsp 文件。

当我只问用户的名字时，我成功了，但是当我问个人资料图片时，我遇到了障碍。

我为 Facebook 创建了一个 XMLHTTPRequest，Facebook 将我作为响应“JFIF”发送给我。

```
function getFacebookPicture(facebookUser) {
    var request = new XMLHttpRequest();
    var str = "https://graph.facebook.com/" + facebookUser.id + "/picture";
    request.open("GET", str, false);
    request.send();
    var response = request.responseText;
    return response;
}//getPic() 
```

响应 = “JFIF”。

我收到并发送通知。

```
 function sendNotification2() {

    var uid = facebookUser.id;
    var picture = getFacebookPicture(facebookUser);

    var request = new XMLHttpRequest();
    var appID = "XXXXXX"; // the app id
    var appSecret = "YYYYYYYY"; // the app secret 
    var notificationContent = "YO yo yo"; // the message on the notification.
    var str = "https://graph.facebook.com/" +
        uid + "/notifications?access_token=" +
        appID + "|" + appSecret + "&href=?name=" + facebookUser.name +"?picture="+ picture + "&template=" +notificationContent + "&method=POST&format=json";

    request.open("GET", str, false);
    request.send();
    var response = request.responseText;
} 
```

我得到的错误是

```
{
   "error": {
      "type": "OAuthException",
      "message": "An access token is required to request this resource."
   }
} 
```

我在我的应用程序中添加了权限：read_friendlists、manage_notifications、publish_stream、offline_access、user_photos 登录时。

那么我怎样才能得到图片呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:16:03.340

当您查询此 URL 时 -

```
https://graph.facebook.com/USER_ID/picture 
```

你没有得到图像的“路径”。你得到图像本身。我不确定您如何准确地实施个人资料图片，但我知道在常规网页上，只需将该 URL 放在`src`标签`<img>`中即可。

```
<img src="https://graph.facebook.com/4/picture" width="50" > 
```

![](../Images/7b8e885789bda84bd43a236df816e801.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:00:40.637

```
function getFacebookPicture(facebookUser) {
    return "https://graph.facebook.com/" + facebookUser.id + "/picture";
}//getPic() 
```

[从此处](https://developers.facebook.com/docs/authentication/server-side/)开始阅读以了解如何获取访问令牌。

# postgresql - 创建 PostGIS 我的第一个表

> ID：12779563
> 
> 赞同：0
> 
> 时间：2012-10-08T10:11:49.723
> 
> 标签：postgresql, geospatial, postgis

我在 PostgreSQL 数据库的一个表中有大约 200 万条记录，其中包含“source_location”、“destination_location”、“source_lat”、“source_long”、“destination_lat”、“destination_long”等列。

如何使用此表将其转换为 PostGIS 中的空间表，以便我可以对此数据进行空间查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:52:07.270

假设您的数据在 table 中`foo`。首先添加几何列：

```
SELECT AddGeometryColumn('foo', 'source_geom', 4326, 'POINT', 2);
SELECT AddGeometryColumn('foo', 'destination_geom', 4326, 'POINT', 2); 
```

比您可以设置几何列的值：

```
UPDATE foo SET
  source_geom =
    ST_SetSRID(ST_MakePoint(source_lon, source_lat), 4326),
  destination_geom = 
    ST_SetSRID(ST_MakePoint(destination_lon, destination_lat), 4326); 
```

因此，您可以在空间查询中使用`source_geom`列`destination_geom`：

```
SELECT * FROM foo
WHERE ST_Distance_Sphere(source_geom, destination_geom) > 1000000; 
```

此查询返回源和目的地之间的距离 > 1000 公里的所有记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:49:02.623

错误：

```
函数 addgeometrycolumn("unknown", "unknown", integer, "unknown", integer) 不存在
```

告诉你 PostgreSQL 不能识别这个 PostGIS 函数。

这可能是因为：

1.  未安装 PostGIS（请参阅[http://postgis.refractions.net/download/](http://postgis.refractions.net/download/)）；

2.  您的数据库没有加载这些函数（请参阅[http://trac.osgeo.org/postgis/wiki/UsersWikiNewbieAddgeometrycolumn](http://trac.osgeo.org/postgis/wiki/UsersWikiNewbieAddgeometrycolumn)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:38:47.677

[创建空间表 - PostGIS 手册](http://postgis.refractions.net/documentation/manual-1.3/ch04.html#id2571655)

它建议您使用 AddGeometryColumn。

# java - 通过 JAAS 以编程方式登录用户

> ID：12779566
> 
> 赞同：7
> 
> 时间：2012-10-08T10:12:01.957
> 
> 标签：java, jboss, jboss7.x, jaas

我试图通过以编程方式登录这样的用户（剥离异常处理），在不同的身份验证下运行 JBoss Container 中的代码：

```
LoginContext ctx = ctx = 
    new LoginContext("MyLoginSchema", 
        new UsernamePasswordCallbackHandler("newuser", "")
    );
ctx.login();

Subject.doAs(ctx.getSubject(), new PrivilegedAction<T>() {
    @Override
    public T run() {
        Subject.getSubject(AccessController.getContext());
        InitialContext ic = new InitialContext();
        EJBContext sctxLookup = (EJBContext) ic.lookup("java:comp/EJBContext");
        Principal principal = sctxLookup.getCallerPrincipal();
    }           
}); 
```

作品登录`newuser`（调用`LoginModule`成功）但未`Subject.doAs()`将新主题与`EJBContext`. `run()`-Method中的代码仍然从`EJBContext`.

我在这里测试了另一种检索登录用户但行为相同的方法：

```
Subject caller = (Subject) PolicyContext.getContext("javax.security.auth.Subject.container"); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T09:34:26.310

你现在用哪个`LoginModule`？在 JBoss 6.1 中，您必须使用`ClientLoginModule`在容器中进行身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T10:51:11.827

我的理解是 JBoss AS 7.1 目前不支持这一点。看到[这个线程](https://community.jboss.org/message/750783#thread-message-750777)

**编辑**

我在这里写的是错误的，该线程仅适用于客户端登录（在 JBoss 之外）。

# selenium - Selenium：如何定位动态元素，如通知消息

> ID：12779575
> 
> 赞同：1
> 
> 时间：2012-10-08T10:12:20.333
> 
> 标签：selenium, selenium-webdriver, xpath

我正在将 Selenium 与 Web 驱动程序一起使用。

我有一张表格要在灯箱里填写。现在，当我单击“提交”时。灯箱关闭，页面顶部生成一个简单的通知，几秒钟后消失。

现在我的问题是：当我这样做时

```
driver.findElement(By.xpath(".//*[@id='createCaseBtn']")).click(); // x-path of submit button 
```

我应该如何检查该通知消息是否出现在 UI 上。

因为当我这样做时

```
driver.findElement(By.xpath(".//*[@id='easyNotification']")).getText(); // x-path of easyNotification message 
```

我向我展示了无法找到逻辑上正确的元素，因为当时 UI 上不存在通知消息。只有在完成 AJAX 请求（用于提交表单）之后，消息才会出现在 UI 上。

请帮忙！！！！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T10:57:40.513

已使用显式等待。它对我来说很好：

显式等待是您定义的代码，用于等待特定条件发生，然后再继续执行代码。最坏的情况是 Thread.sleep()，它将条件设置为要等待的确切时间段。提供了一些方便的方法来帮助您编写只等待所需时间的代码。WebDriverWait 与 ExpectedCondition 结合使用是实现此目的的一种方式。

```
WebDriverWait wait = new WebDriverWait(driver, 10);
WebElement element = wait.until(
    ExpectedConditions.visibilityOfElementLocated(By.id(".//*[@id='easyNotification']"))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:54:05.197

好。当我处理 AJAX 时，我总是使用流利的等待方法。假设您在单击提交按钮后有消息的定位器：

```
String xPathMessage= ".//*[@id='easyNotification']"; 

    public WebElement fluentWait(final By locator){
            Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
                    .withTimeout(30, TimeUnit.SECONDS)
                    .pollingEvery(5, TimeUnit.SECONDS)
                    .ignoring(NoSuchElementException.class);

            WebElement foo = wait.until(
    new Function<WebDriver, WebElement>() {
                public WebElement apply(WebDriver driver) {
                            return driver.findElement(locator);
                    }
                    }
    );
                               return  foo;              }     ;

//simply call the method:
String text=fluentWait(By.xpath(xPathMessage)).getText(); 
```

来自有关 fluent wait 的文档： *Wait 接口的实现，它可以动态配置其超时和轮询间隔。每个 FluentWait 实例定义等待条件的最长时间，以及检查条件的频率。此外，用户可以将等待配置为在等待时忽略特定类型的异常，例如在页面上搜索元素时的 NoSuchElementExceptions。*

上述方法与 isElementPresent 配对也不错：

```
public bool isElementPresent(By selector)
{
    return driver.FindElements(selector).Any();
} 
```

或者那个：

```
public bool isElementPresent(By selector)
{
    return driver.FindElements(selector).size()>0;
} 
```

希望这对你有用

# r - 使用 R 进行 K 中心聚类

> ID：12779578
> 
> 赞同：4
> 
> 时间：2012-10-08T10:12:28.070
> 
> 标签：r, cluster-analysis, k-means, hierarchical-clustering

我找不到使用 R 进行 k-centers 聚类的简单库函数，而我可以找到 k-means ( `kmeans()`) 和层次聚类 ( `hclust()`)。

如本文所述，是否有使用 R 进行简单贪婪 k 中心聚类的库[函数](http://proteneer.com/blog/?p=207)

如果不是 - 因为我是 R 新手 - 将如何实现它（我理解逻辑 - 只是不知道如何用 R 代码实际编写它）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T11:08:26.133

尝试`kmeans`使用`method = "centers"`.

如果这不是您想要的，那么 CRAN 在[http://cran.r-project.org/web/views/Cluster.html](http://cran.r-project.org/web/views/Cluster.html)有一个包含数十个包的集群任务视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:05:50.157

从这篇博文中的描述来看，这似乎类似于用于 k-means 的众多种子策略之一。我还没有真正称它为聚类方法，而是预聚类或类似的东西。

也许你应该看看`flexclust`R 的包，我相信它有一些 k-means 变体和初始化，也许它有这个变体作为一个初始化选项。或者它可能在[http://cran.r-project.org/web/views/Cluster.html](http://cran.r-project.org/web/views/Cluster.html)

请注意，总是选择最远的对象很容易选择异常值作为聚类中心！看一下基于类似想法的例如 k-means++，但更聪明（另外，它更好地支持随机化，因此您可以尝试多种不同的初始化）。或者您可以选择最接近`(2k-1)/(2k)`分位数的对象，这可能是一个好的聚类中心的更好猜测。

# git - Git 签出文件消除混乱

> ID：12779582
> 
> 赞同：1
> 
> 时间：2012-10-08T10:12:45.313
> 
> 标签：git, git-checkout

所以我尝试改变分支，我得到：

```
error: The following untracked working tree files would be overwritten by checkout:
env/local/include
    # many more files
env/local/lib
Please move or remove them before you can switch branches.
Aborting 
```

所以我按照[stackoverflow.com/ignoring-a-directory-from-a-git-repo-after-its-been-added](https://stackoverflow.com/questions/6618612/ignoring-a-directory-from-a-git-repo-after-its-been-added)`git rm -r --cached .`的建议尝试

我得到：

```
 fatal: pathspec 'env/' did not match any files 
```

我尝试了其他各种途径。里面有没有文件？如果是这样，我怎样才能让 git 忽略它们？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:26:27.580

`git rm -r --cached .` would work for files that you have added to the index.
But if you haven't added `env/`, you could consider add `env/` and stash it (as [in this question](https://stackoverflow.com/questions/12323128/git-the-following-untracked-working-tree-files-would-be-overwritten-by-checkout)).

Other elements to be aware of:

*   if you have added those files, remove them in the right branch: see "[git says “The following untracked working tree files would be overwritten by checkout” when switching branches](https://stackoverflow.com/questions/6829671/git-says-the-following-untracked-working-tree-files-would-be-overwritten-by-che)"
*   make sure anything hasn't been automatically rename, as in [this question](https://stackoverflow.com/questions/8839247/unresolvable-git-error-the-following-untracked-working-tree-files-would-be-over).

# iphone - Xcode 与 libcommonCrypto.dylib 的链接错误

> ID：12779583
> 
> 赞同：1
> 
> 时间：2012-10-08T10:12:47.970
> 
> 标签：iphone, ios, xcode, ipad

使用最新的 Xcode，我的应用程序在模拟器中运行良好，但在设备上运行时出现此错误：

![在此处输入图像描述](../Images/b69b66166ad228b0da7e3aad59efa503.png)

我没有在我的二进制文件中链接它。我有`libz.dylib`。这是我要链接的内容：

![在此处输入图像描述](../Images/10083c6c49ee1bf28a97095e7bd57a38.png)

如果我不这样做，为什么我的项目会尝试链接到密码学的东西？怎么修？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T15:22:00.683

我重新安装了 Xcode，问题就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:21:54.357

看起来您正在对代码使用加密。请将`libcommonCrypto.dylib`框架添加到您的代码中。

# c++ - 指向数组的简单指针

> ID：12779586
> 
> 赞同：9
> 
> 时间：2012-10-08T10:13:00.863
> 
> 标签：c++

下面的代码有什么作用？

```
obj *x = new obj[100];
delete x; // Note the omission of [] 
```

它是否只删除数组中的第一个元素？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T10:14:44.703

上面的代码表现出未定义的行为：它应该是

```
delete[] x; 
```

因为分配是用`new[]`.

当您使用正确的运算符时，指针指向的整个数组将被删除：

```
obj *x = new obj[100];
delete[] x; // The entire array gets deleted 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-08T16:04:04.640

即使它是未定义的行为，您也应该注意最可能的结果（为了调试此类问题）。

当您通过 创建数组时`new Object[100]`，首先分配内存。默认行为（假设没有覆盖默认分配器）是简单地调用`malloc(100 * sizeof(Object))`. 之后，`Object`需要在每个`Object`大小的区域上调用 for 的构造函数。这是一个重要的细节：**内存被分配一次**，但构造函数在 100 个位置被调用。

当一个块通过 分配时`malloc`，它不能被分段释放。只有调用`free(block)`才会释放该内存。如果关键字调用，则C++ 关键字在`delete`内部调用. 因此，删除数组的正确方法是调用. 那么，如果你打电话会发生什么？可能的答案是内存将被释放（全部释放，而不仅仅是第一个元素），但只会调用一个析构函数：第一个元素的析构函数。`free``new``malloc``delete [] array``delete array`

显然，有很多事实需要考虑。`new`and`delete`不一定与`malloc`and绑定`free`。他们可能使用特定架构或操作系统特有的系统调用。（特别是 Windows，在其 C API之外`malloc`和内部都有一整套堆管理功能。）我只是用and演示了这个示例，因为这是我在单步执行代码时最常看到的。例如，Visual Studio 允许您进入调用并实际查看函数代码。（这是另一个重要的细节。只是简单的函数调用，在很多情况下你甚至可以覆盖它。）`free``malloc``free``new``new``new``delete`

* * *

你可以用这个小程序演示这个概念。只需创建一个`Object`在构造函数期间输出某些内容并在析构函数期间输出其他内容的类。

```
int main(int argc, char** argv)
{
    Object* o = new Object[4];
    delete o;
    return 0;
} 
```

我运行它，果然：构造函数被调用了 4 次，而析构函数被调用了一次。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-08T14:25:34.957

此代码在 GCC 上表现出明确的行为，即删除第一个对象。

```
#include <iostream>
#include <stdlib.h>
#include <time.h>

class myclass {

public:

int i;

myclass(){

std::cout <<"myclass constructed \n";

this->i = rand() % 100;

std::cout<<this->i;
}

~myclass(){

std::cout <<"myclass destroyed\n";

std::cout<<this->i;
}       
};

int main()
{

myclass * pt;

srand ( time(NULL) );   

pt = new myclass[3];

delete pt;

return 0;
} 
```

# h2 - 在 H2 数据库中使用 csvread 以 unicode 字符作为分隔符的问题

> ID：12779587
> 
> 赞同：1
> 
> 时间：2012-10-08T10:13:07.120
> 
> 标签：h2

我正在尝试使用 csvread 从附加的测试文件中读取。该文件在字段之间具有 CTRL-A (\u0001) 作为分隔符。

我使用的语句是

```
select * from csvread('test.csv','id, name','charset=UTF-8 fieldDelimiter=\u0001'); 
```

预期输出：

```
ID | Name
12 | sandeep 
```

实际输出：

```
ID | Name
12\u0001sandeep | null 
```

这意味着它没有选择 \u0001 作为分隔符。

`CTRL-A(\u0001)`在对文件进行 csvread 时如何处理分隔符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:51:43.617

你可以使用：

```
select * from csvread('~/Downloads/test.csv',
stringdecode('id\u0001name'),
stringdecode('charset=UTF-8 fieldSeparator=\u0001')); 
```

您需要使用[stringdecode](http://h2database.com/html/functions.html#stringdecode)，因为 ANSI-SQL 文本文字不支持 Java 转义序列，例如`\u0001`. 然后，您使用了 fieldDelimiter 而不是 fieldSeparator（请参阅文档）。

# python - 需要时间小部件或时钟小部件

> ID：12779588
> 
> 赞同：2
> 
> 时间：2012-10-08T10:13:09.897
> 
> 标签：python, django, time, django-widget

Django中有没有类似timewidget或clock widget的东西可以帮助我将数据输入到约会日期的表单中（比如我们有日历或日期小部件）。

我的日期小部件在我的 forms.py 中使用以下代码：

```
import datetime
from django.forms.extras.widgets import SelectDateWidget
mydate = forms.DateField(widget=SelectDateWidget) 
```

时间小部件有这样的东西吗

# c# - 打开进程启动命令提示符后如何在c#中编写ipconfig

> ID：12779592
> 
> 赞同：3
> 
> 时间：2012-10-08T10:13:23.327
> 
> 标签：c#, console-application

我正在从 c# 打开命令提示符

```
 Process.Start("cmd"); 
```

当它打开时，我需要自动编写 ipconfig 以便进程打开并找到工作站的 ip，我应该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T10:17:00.033

**编辑**

```
Process p = new Process();
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.FileName = "ipconfig.exe";
p.Start();
p.WaitForExit();
string output = p.StandardOutput.ReadToEnd();
return output; 
```

或者

编辑

```
 Process pr = new Process();
  pr.StartInfo.FileName = "cmd.exe";
  pr.StartInfo.Arguments = "/k ipconfig"; 
  pr.Start(); 
```

检查：[如何在 C# 中执行命令？](http://www.codeproject.com/Articles/25983/How-to-Execute-a-Command-in-C)

```
System.Diagnostics.Process process = new System.Diagnostics.Process(); 
System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();
 startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
 startInfo.FileName = "cmd.exe";
 startInfo.Arguments = "ipconfig";
 process.StartInfo = startInfo;
 process.Start(); 
```

或者

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T10:16:39.570

试试这个

```
 string strCmdText; 
 strCmdText= "ipconfig";
 System.Diagnostics.Process.Start("CMD.exe",strCmdText); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T10:20:24.527

用这个

```
System.Diagnostics.Process.Start("cmd", "/K ipconfig"); 
```

This `/K` parameter will start cmd with an `ipconfig` command and will show it's output on the console too. To know more parameters which could be passed to a cmd [Go here](http://ss64.com/nt/cmd.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T10:16:43.390

在运行外部进程时，有一些特定的方法可以重定向标准输入、标准输出和错误消息，例如在您的情况下检查：[ProcessStartInfo.RedirectStandardInput Property](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.redirectstandardinput.aspx)

那么这里还有很多例子：[Sending input/getting output from a console application (C#/WinForms)](https://stackoverflow.com/questions/1765493/sending-input-getting-output-from-a-console-application-c-winforms)

# ajax - Magento 编辑个人资料 AJAX

> ID：12779595
> 
> 赞同：0
> 
> 时间：2012-10-08T10:13:25.377
> 
> 标签：ajax, magento

我正在寻求你的帮助。我想在 Magento 中使用 Ajax 更改头像图片。我的表单没有 AJAX，它是默认表单`action="<?php echo $this->getUrl('customer/account/editProfile') ?>"`

这是我的代码：

```
 <form id="avatarform" enctype="multipart/form-data" method="post">
         <?php echo $this->getBlockHtml('formkey')?>                    
            <input type="file" name="avatar"/>
            <a><button type="submit" class="general-btn"><span><?php echo $this->__('Save Profile') ?></span></button></a>  
     </form> 
```

我现在的 JS 函数：

```
jQuery("#avatarform").submit(function(){
            //alert ("test");   
            //jQuery.post('<?php echo $this->getUrl('customer/account/editProfile') ?>');       
            //return false;

            url = '<?php echo $this->getUrl('customer/account/editProfile') ?>';             
            new Ajax.Request(url, {
                parameters: {isAjax: 1, method: 'POST'},
                onSuccess: function(transport) {
                }
            }); 
        }); 
```

你对我有什么建议吗？

提前致谢。

编辑：使用这个新代码，我可以获得成功警报。

```
jQuery('#avatar').live('change', function() {   
            //alert('test');
            var boxval = jQuery("#avatar").val();
            var dataString = 'avatar='+ boxval;
            //document.avatarform3.submit();        
            jQuery.ajax({
                type: "POST",
                data: dataString,
                cache: false,
                url: "http://localhost/magento-sample/index.php/customer/account/editProfile",
                success: function(html) {
                alert('sucess');                                        
                }
            });
        }); 
```

但表格不提交。也许我错过了添加正确的数据/参数，但是为什么在正常请求模式下我需要在 Ajax 中添加一些参数？我怎样才能找到要添加的正确参数？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-19T13:30:24.067

您如何读取表单提交的参数，使用 post 方法时需要读取请求参数。

# php - 如何通过正则表达式拆分字符串并将模式保留在输出中？

> ID：12779596
> 
> 赞同：2
> 
> 时间：2012-10-08T10:13:25.910
> 
> 标签：php, regex, arrays, string, preg-split

我这里有一些代码：

```
$testString = "text23hello54stack90overflow34test";
$testArray = preg_split("/[0-9]{2}/Uim", $testString);
echo "<pre>".print_r($testArray)."</pre>"; 
```

执行这些命令后，我有一个数组，其中包含：

```
{text, hello, stack, overflow, test} 
```

我想修改它，所以我得到：

```
{text, 23hello, 54stack, 90overflow, 34test} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T10:18:47.620

怎么样：

```
$testString = "text23hello54stack90overflow34test";
$testArray = preg_split("/(?=[0-9]{2})/Uim", $testString);
echo print_r($testArray); 
```

**输出：**

```
Array
(
    [0] => text
    [1] => 23hello
    [2] => 54stack
    [3] => 90overflow
    [4] => 34test
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:17:26.333

使用`preg_replace()`：

```
$testString = "text23hello54stack90overflow34test";
$testArray = preg_replace("/([0-9]{2})/Uim", ', $1', $testString);

echo $testArray;
// text, 23hello, 54stack, 90overflow, 34test 
```

# iphone - 如何使用 googleAPI 在 UIWebView 中获取方向？

> ID：12779597
> 
> 赞同：2
> 
> 时间：2012-10-08T10:13:31.377
> 
> 标签：iphone, ios, google-maps, webview, ios6

我正在开发一个应用程序，它必须在“a - b”位置之间给出一个方向，并且我没有在我的**UIWebView**中得到我想要的方向......有人可以帮助我吗？

```
[self setDestinationLocation    :@"an Address"];
[self setSourceLocation         :@"53.219091,6.568096"];

int startMatch = 1;
int numberOfMatches=1;

[self setUrlAddress:
    [NSString stringWithFormat:@"http://maps.google.com/maps?f=d&om=2&daddr=%@&saddr=%@&start=%d&num=%d&view=map&layer=t&t=m",
            [self sourceLocation],
            [self destinationLocation],
            startMatch,
            numberOfMatches
    ]
 ];

NSURL *url = [NSURL URLWithString:[self urlAddress]];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[[self webView] loadRequest:requestObj]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:07:15.587

试试这个简短的例子：

```
- (void)getDirections {
    CLLocationCoordinate2D start = { (startLat), (startLong) };
    CLLocationCoordinate2D end = { (EndLat), (EndLong) };

    NSString *googleMapsURLString = [NSString stringWithFormat:@"http://maps.google.com/?saddr=%f,%f&daddr=%f,%f", start.latitude, start.longitude, end.latitude, end.longitude];

    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:googleMapsURLString]];

} 
```

通过您想要的纬度，经度对。您有格式化的 URL，将其显示在 UIWebView 上。

试试这个，到目前为止。告诉我你看到了什么。

# mysql - MySQL如何构建Where子句

> ID：12779598
> 
> 赞同：1
> 
> 时间：2012-10-08T10:13:39.140
> 
> 标签：mysql, sql, database

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:18:33.570

```
where (Table.table_who<>"aaa") OR (Format(Now()-[table_when],"hh")<12 AND Table.table_who="aaa") 
```

如果我理解正确的话。哪里不是 aaa 或者现在是 aaa - 当 > 12 时？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:18:40.363

请尝试：

```
 SELECT Table.table_id, Table.table_who, Table.table_whom, Table.table_when, Format(Now()-  [table_when],"hh") AS Diff
    FROM [Table]
    WHERE (((Table.table_who)<>"aaa") AND ((Format(Now()-[table_when],"hh"))<12))
    OR (((Table.table_who)="aaa") AND ((Format(Now()-[table_when],"hh"))<12)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:18:42.057

试试这个代码：

```
SELECT Table.table_id, Table.table_who, Table.table_whom, Table.table_when, Format(Now()-[table_when],"hh") AS Diff
    FROM [Table]
    WHERE (Table.table_who)<>"aaa") 
    OR ((Table.table_who)="aaa") AND ((Format(Now()-[table_when],"hh"))<12) ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T10:18:46.087

只需像您定义的那样编写条件：

```
WHERE
 (Table.table_who = 'aaa' AND Format(Now() - [table_when], 'hh') < 12) OR
 Table.table_who <> 'aaa' 
```

你只需要括号在某些情况下当然不应该过度使用它们，但我喜欢在这样的情况下将条件组合在一起，当你想要（A AND B）OR C时。如果你这样写，就不会出错关于计算表达式的顺序。

根据您的习惯，不同的缩进可能会使其更加清晰。

```
WHERE
 (
    Table.table_who = 'aaa' 
    AND Format(Now() - [table_when], 'hh') < 12
 ) 
 OR Table.table_who <> 'aaa' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T10:22:32.650

我想这就是你想要的：

```
WHERE (Table.table_who = "aaa" AND Table.table_when > SUBDATE(CURDATE(), INTERVAL 12 DAY)) OR Table.table_who <> "aaa" 
```

# iphone - Suitability of CodeNameOne for image processing application

> ID：12779599
> 
> 赞同：2
> 
> 时间：2012-10-08T10:13:43.560
> 
> 标签：iphone, image-processing, smartphone, codenameone

We need to build an image processing application for smartphones (mainly for iPhone). The operations consist of:

*   image filtering
*   composite geometrical transformation
*   region growing

Also, the user is required to specify (touch) some parts of the image. Those parts would serve as inputs for the app. Example: eyes and lip in a face. We have built a desktop version of this app. The processing part is quite heavy and we extensively used BufferedImage class.

Should we use **CodeNameOne** for building this app? If not then what alternatives do you suggest?

Please consider the following factors:

*   Performance
*   Ease of writing the code (for image processing)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:38:13.417

我在我们的论坛中对此给出了答案，但我认为对于重复的帖子来说这是一个值得的问题：

一般来说，对于大多数平台，除了 iOS 和可以说是 Windows Phone 之外，你的性能应该没问题。

Codename One 针对常见用例进行了优化，因为 iOS 不允许 JIT，它在桌面上永远不会像 Java 一样快，因为它真的很难进行一些优化，例如数组绑定检查消除。因此，对数组的每次访问都将包含一个分支检查，这对于图像处理来说可能非常昂贵。

除此之外，除了基本的 ARGB 之外，我们没有任何图像处理 API，而且您可以获得“图片”，这既不高效也不简单。

问题是这是一个非常具体的领域，我非常怀疑您会找到任何可以帮助您处理此类代码的解决方案。因此，您唯一的方法 AFAIK 是构建本机代码来完成实际的图像处理繁重工作。

您可以通过使用 API 使用 Codename One 来执行此操作，该`NativeInterface`API 允许您在本机代码中调用关键代码并使用`cn1lib`'s 将它们包装为库。然后，您将能够获得该部分代码的本机性能，但这仅对代码中的关键部分有意义。如果您编写了大量本机代码，Codename One 的好处开始消散，您还不如使用本机代码。

# javascript - jqPlot from line to dotted

> ID：12779600
> 
> 赞同：2
> 
> 时间：2012-10-08T10:13:49.797
> 
> 标签：javascript, jquery, jqplot, dotted-line

I have a graph where I show projections for several statistics. The statistics up to this year are certain, but from 2012 and beyond, they are just a projection, and therefore not certain. I want to have a line when the statistics are certain, and become dotted when the projection starts.

Is this possible? Or do I have to create a new line that is dotted and starts after this year?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T23:56:42.123

我认为您需要将数据分成两个不同的系列，每个系列都有不同的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:52:01.097

这就是我害怕的。有人找到了一种只为背景着色的好方法，所以就去做了。[关联](https://stackoverflow.com/questions/10837997/jqplot-how-to-color-parts-of-background-grid-with-several-different-colors)

# php - Rendering SoundCloud widget for a private track using PHP API

> ID：12779601
> 
> 赞同：1
> 
> 时间：2012-10-08T10:13:49.900
> 
> 标签：php, api, soundcloud, http-status-code-302

I am trying to render a SoundCloud HTML5 widget using the PHP API, but every time I run the command I think should return the HTML for the widget, I simply get an Exception:

```
The requested URL responded with HTTP code 302 
```

I realise this is a redirect. What I don't know is why that's all I ever get, or what to do about it to actually get the widget HTML.

The documentation on the API says that to embed the widget using PHP you should do this:

```
<?php
    require_once 'Services/Soundcloud.php';

    // create a client object with your app credentials
    $client = new Services_Soundcloud('YOUR_CLIENT_ID', 'YOUR_CLIENT_SECRET');

    // get a tracks oembed data
    $track_url = 'http://soundcloud.com/forss/flickermood';
    $embed_info = $client->get('/oembed', array('url' => $track_url));

    // render the html for the player widget
    print $embed_info['html']; 
```

I'm running this:

```
// NB: Fully authorised SoundCloud API instance all working prior to this line
// $this->api refers to an authorised instance of Services_Soundcloud

try {   
        $widget = array_pop(
            json_decode( $this->api->get('oembed', array('url' => $track_url)) )
        );

        print_r($widget);

    } catch (Exception $e)
    {
        print_r($e->getMessage());
    } 
```

where "track_url" is actually the URL I get back when asking SoundCloud for a track object earlier in the app using the same API.

I'm not actually sure this URL is correct in the first place, because the track object I get back gives the 'uri' in the form:

```
[uri] => https://api.soundcloud.com/tracks/62556508 
```

The documentation examples all have a straight [http://soundcloud.com/username/track-permalink](http://soundcloud.com/username/track-permalink) URL - but even using a known path to a public track the attempt to run the API oembed method fails... I still get a 302 Exception.

Finally, there are mentions of setting "allow_redirects" to false in the 'get' command, but this has no effect when I add to the parameters used to build the query to the API. I also tried adding additional cURL options, but that too had no effect.

I have definitely enabled API access to the track within SoundCloud.

Kind of banging my head off the wall on this. If anyone has any pointers I'd be very grateful to hear them. Just for clarity's sake, I am able to access all the user data, comments etc. via the API instance I have created, so it appears to be working fine.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:15:34.640

感谢您指出了这一点。文档中有一个错误导致您误入歧途。对于那个很抱歉。我已经更新了文档以修复错误。这是更新的代码示例：

```
<?php

require_once 'Services/Soundcloud.php';

// create a client object with your app credentials
$client = new Services_Soundcloud('YOUR_CLIENT_ID', 'YOUR_CLIENT_SECRET');
$client->setCurlOptions(array(CURLOPT_FOLLOWLOCATION => 1));

// get a tracks oembed data
$track_url = 'http://soundcloud.com/forss/flickermood';
$embed_info = json_decode($client->get('oembed', array('url' => $track_url)));

// render the html for the player widget
print $embed_info->html; 
```

注意区别：

*   您需要将 CURLOPT_FOLLOWLOCATION 设置为 1，如上面评论中所述。
*   您需要将退货包裹`$client->get`在`json_decode`
*   结果是一个`stdClass`对象，而不是一个`Array`，因此`html`必须使用`->`运算符访问该属性。

希望有帮助。如果您仍然遇到问题，请随时发表评论，我会修改我的答案。

# c# - Image not appearing in listview - just showing the text "system.windows.media.imaging.bitmapimage"

> ID：12779604
> 
> 赞同：0
> 
> 时间：2012-10-08T10:13:57.580
> 
> 标签：c#, wpf, image, listview

I am having problems with a listview in WPF C#. I have a class called FaultRecords which contains an integer field, a bitmap image and a string. When I run the code the integer and string appear fine but the image does not. In the column where the image is supposed to be I just get the path to the type instead - "system.windows.media.imaging.bitmapimage". Its driving me crazy.....

Here's my code

```
public void RecordNewFault()
{
    FaultRecords myRecord = new FaultRecords(FaultIndex, PublicVars.SrcBmp, "Hi There!");
    lstvFaults.Items.Add(myRecord);

}

public class FaultRecords
{
    private int _faultNumber;
    public int FaultNumber
    {
        get { return _faultNumber; }
        set { _faultNumber = value; }
    }

    public BitmapImage _faultImage;
    public BitmapImage FaultImage
    {
        get { return _faultImage; }
        set { _faultImage = value; }
    }

    private string _faultDescription;
    public string FaultDescription
    {
        get { return _faultDescription; }
        set { _faultDescription = value; }
    }

    public FaultRecords(int faultNumber, BitmapImage faultImage, string faultDescription) 
    {
        FaultDescription = faultDescription;
        FaultNumber = faultNumber;
        FaultImage = faultImage;
    }
} 
```

XAML:

```
 <ListView Height="412" HorizontalAlignment="Left" Margin="312,49,0,0"         Name="lstvFaults" VerticalAlignment="Top" Width="636" ItemsSource="{Binding}"    FontSize="12"> 
                              <ListView.View>
                    <GridView>
                            <GridViewColumn 
                                DisplayMemberBinding="{Binding Path=FaultNumber}"
                                Header="Fault No." Width="50"/>
                            <GridViewColumn 
                               DisplayMemberBinding="{Binding Path=FaultImage}"
                                Header="Photo" Width="150"/>
                        <GridViewColumn 
                               DisplayMemberBinding="{Binding Path=FaultDescription}"
                            Header="Fault Description" Width="300"/>
                    </GridView>
                    </ListView.View> 
```

If I just write the Bitmap to the listview on it's own (and remove the XAML bindings) - `lstvFaults.Items.Add(PublicVars.SrcBmp);` it works fine.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:53:07.197

请参阅[此相关问题](https://stackoverflow.com/questions/2570568/showing-items-as-images-in-a-wpf-listview?rq=1)。

您需要告诉 ListView 将内容呈现为不是文本（因此它向您显示类型），而是呈现为图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:27:26.837

您将需要使用 DataTemplate。[请参阅此处](http://marlongrech.wordpress.com/2008/02/28/gridviewcolumn-displaymemberbinding-vs-celltemplate/)的简化示例。您还需要一个 ImageSource 而不是 BitmapImage！对不起 ：（

# android - SharedPreferences and Emulator

> ID：12779605
> 
> 赞同：0
> 
> 时间：2012-10-08T10:14:00.633
> 
> 标签：android, emulation

I have this simple piece of code:

```
 SharedPreferences settings = getSharedPreferences(Constants.USER_DETAILS, 0);
        SharedPreferences.Editor editor = settings.edit();

        //editor.putLong(Constants.USER_DETAILS_SIGNEDINON, registerResponse.getSignedInOn()); // signed in on

        editor.putLong(Constants.USER_DETAILS_SIGNEDINON, 1); // signed in on
        long test = settings.getLong(Constants.USER_DETAILS_SIGNEDINON, 2);

        if (settings.edit().commit()) {
            System.out.print("ok");
        } else {
            System.out.print("not ok");
        } 
```

as you can see I have been playing around to understand what is going on.

So, I have checked the /data/data/... and the preferences file is indeed created but is empty (just the Map tag)

The test long variable returns 2, even if I set it to 1 the line before. The commit returns true.

Am I missing something?

I have set uses-permission android:name=android.permission.WRITE_EXTERNAL_STORAGE though I believe this is only needed when I truly do external storage.

Regards. David.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-26T21:49:50.157

我遇到的一件事是您不能继续调用 pref.edit() 并期望您的更改持续存在。似乎每次调用 pref.edit() 都会产生一个新的编辑器（而不是单例）。

不会坚持：

```
pref.edit().remove("key"); // new editor created
pref.edit().commit();      // new editor created 
```

将坚持：

```
Editor edit=pref.edit();   // new editor created
edit.remove("key");        // same editor used
edit.commit();             // same editor used 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:36:11.290

试试这段代码。

```
 SharedPreferences settings = getSharedPreferences(Constants.USER_DETAILS, 0);
    SharedPreferences.Editor editor = settings.edit();

    //editor.putLong(Constants.USER_DETAILS_SIGNEDINON, registerResponse.getSignedInOn()); // signed in on

    editor.putLong(Constants.USER_DETAILS_SIGNEDINON, 1); // signed in on

    if (editor.commit()) {
        System.out.print("ok");
    } else {
        System.out.print("not ok");
    }
    long test = settings.getLong(Constants.USER_DETAILS_SIGNEDINON, 2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:26:52.120

```
SharedPreferences pref = getApplicationContext().getSharedPreferences("MyPref",  0);        0 - for private mode
Editor editor = pref.edit();
editor.putBoolean("key_name", true); // Storing boolean - true/false
editor.putString("key_name", "string value"); // Storing string
// returns stored preference value
// If value is not present return second param value - In this case null
pref.getString("key_name", null); // getting String
pref.getInt("key_name", null); // getting Integer
editor.remove("name"); // will delete key name
editor.remove("email"); // will delete key email

editor.commit(); // commit changes
editor.clear();
editor.commit(); // commit changes 
```

# mdx - How to correctly use InStr with ActivePivot?

> ID：12779609
> 
> 赞同：1
> 
> 时间：2012-10-08T10:14:05.153
> 
> 标签：mdx, activepivot

I am trying to use the INSTR() function with ActivePivot. I am testing by using an Instr call that should always return > 0.

Here is my initial MDX query that works fine:

```
 SELECT
   {
     {[CODE].[ALL].[AllMember]}
   } ON ROWS
 FROM [Cube]
 WHERE ([Measures].[contributors.COUNT]) 
```

Here is my test InStr query:

```
SELECT
  NON EMPTY
    Generate
    (
      [CODE].[ALL].[AllMember]
      ,(
        Instr
        (
          "Test"
          ,"es"
        ) > 0
      )
    )ON ROWS
FROM [Cube]
WHERE ([Measures].[contributors.COUNT]) 
```

Please can you help me create a working example for the Instr MDX query in ActivePivot?

Many thanks

* * *

Edit: What I wanted to do

```
SELECT
NON EMPTY Hierarchize({[CODE].[CODE].Members}) ON ROWS,
NON EMPTY Hierarchize({Filter([RELEVANCE].Members,      InStr([RELEVANCE].CurrentMember.Name, "n/a") > 0)}) ON COLUMNS
FROM [Cube]
WHERE ([Measures].[contributors.COUNT]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:07:34.383

我不确定您尝试使用 MDX 实现什么，但这里有一个示例可能会有所帮助：

之前，我考虑了所有具有积极贡献者的地方。COUNT：

```
SELECT
NON EMPTY Hierarchize({Filter([PlaceDimension].[Continent].Members, [Measures].[contributors.COUNT] > 0)}) ON ROWS
FROM [TwitterCube]
WHERE ([Measures].[contributors.COUNT]) 
```

之后，我只保留名称中带有“a”的地方：

```
SELECT
NON EMPTY Hierarchize({Filter([PlaceDimension].[Continent].Members, InStr([PlaceDimension].CurrentMember.Name, "a") > 0)}) ON ROWS
FROM [TwitterCube]
WHERE ([Measures].[contributors.COUNT]) 
```

# android - How to use Async task for Pagination

> ID：12779611
> 
> 赞同：0
> 
> 时间：2012-10-08T10:14:07.323
> 
> 标签：android, android-asynctask, android-parser

```
public class AndroidXMLParsingActivity extends Activity {

    public int currentPage = 1;
    public ListView lisView1;
    static final String KEY_ITEM = "docdetails";
    static final String KEY_NAME = "heading";
    public Button btnNext;
    public Button btnPre;
    public static String url = "http://dev.taxmann.com/TaxmannService/TaxmannService.asmx/GetNotificationList?YearID=&CircularNo=33&SearchText=tax&pagenumber=1";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // listView1
        lisView1 = (ListView) findViewById(R.id.listView1);

        // Next
        btnNext = (Button) findViewById(R.id.btnNext);
        // Perform action on click
        btnNext.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                currentPage = currentPage + 1;
                ShowData();
            }
        });

        // Previous
        btnPre = (Button) findViewById(R.id.btnPre);
        // Perform action on click
        btnPre.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                currentPage = currentPage - 1;
                ShowData();
            }
        });

        ShowData();
    }

    public void ShowData() {
        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(url); // getting XML

        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);

        int displayPerPage = 5; // Per Page
        int TotalRows = nl.getLength();
        int indexRowStart = ((displayPerPage * currentPage) - displayPerPage);
        int TotalPage = 0;
        if (TotalRows <= displayPerPage) {
            TotalPage = 1;
        } else if ((TotalRows % displayPerPage) == 0) {
            TotalPage = (TotalRows / displayPerPage);
        } else {
            TotalPage = (TotalRows / displayPerPage) + 1; // 7
            TotalPage = (int) TotalPage; // 7
        }
        int indexRowEnd = displayPerPage * currentPage; // 5
        if (indexRowEnd > TotalRows) {
            indexRowEnd = TotalRows;
        }

        // Disabled Button Next
        if (currentPage >= TotalPage) {
            btnNext.setEnabled(false);
        } else {
            btnNext.setEnabled(true);
        }

        // Disabled Button Previos
        if (currentPage <= 1) {
            btnPre.setEnabled(false);
        } else {
            btnPre.setEnabled(true);
        }

        // Load Data from Index
        int RowID = 1;
        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();
        HashMap<String, String> map;

        // RowID
        if (currentPage > 1) {
            RowID = (displayPerPage * (currentPage - 1)) + 1;
        }

        for (int i = indexRowStart; i < indexRowEnd; i++) {
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map = new HashMap<String, String>();
            map.put("RowID", String.valueOf(RowID));
            map.put(KEY_NAME, parser.getValue(e, KEY_NAME));

            // adding HashList to ArrayList
            menuItems.add(map);

            RowID = RowID + 1;

        }

        SimpleAdapter sAdap;
        sAdap = new SimpleAdapter(AndroidXMLParsingActivity.this, menuItems,
                R.layout.list_item, new String[] { "RowID", KEY_NAME },
                new int[] { R.id.ColRowID, R.id.ColName });
        lisView1.setAdapter(sAdap);
    }

} 
```

This my source code i want to use Async task for parsing data but i m not able to write code for that this code is able to Print data on emulator but when i run it on devices then its unexpectedly closed i want to set parsing function in back ground to

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-02T11:34:46.253

调整您的原始代码以使用 AsyncTask 非常容易实现。以下将起作用

```
public class AndroidXMLParsingActivity extends Activity {

    public int currentPage = 1;
    ...

    @Override
    public void onCreate(Bundle savedInstanceState) {
        ...
        btnNext.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                currentPage = currentPage + 1;
                //we pass in the page number every time so it knows what fetch
                new AsyncPaginator().execute(currentPage);
            }
        });
        ...
        btnPre.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                currentPage = currentPage - 1;
                new AsyncPaginator().execute(currentPage);
            }
        });
        new AsyncPaginator().execute(currentPage);
    }

    private class AsyncPaginator extends AsyncTask<Integer, Void, ArrayList<HashMap<String, String>>> {

        int TotalPage = 0;

        @Override
        protected ArrayList<HashMap<String, String>> doInBackground(Integer... params) {
            //the busy work happens here on another thread
            XMLParser parser = new XMLParser();
            String xml = parser.getXmlFromUrl(url); // getting XML
            Document doc = parser.getDomElement(xml); // getting DOM element
            NodeList nl = doc.getElementsByTagName(KEY_ITEM);
            int displayPerPage = 5; // Per Page
            int TotalRows = nl.getLength();
            int indexRowStart = ((displayPerPage * currentPage) - displayPerPage);
            if (TotalRows <= displayPerPage) {
                TotalPage = 1;
            } else if ((TotalRows % displayPerPage) == 0) {
                TotalPage = (TotalRows / displayPerPage);
            } else {
                TotalPage = (TotalRows / displayPerPage) + 1; // 7
            }
            int indexRowEnd = displayPerPage * currentPage; // 5
            if (indexRowEnd > TotalRows) {
                indexRowEnd = TotalRows;
            }
            int RowID = 1;
            ArrayList<HashMap<String, String>> menuItems = new ArrayList<>();
            HashMap<String, String> map;
            if (currentPage > 1) {
                RowID = (displayPerPage * (currentPage - 1)) + 1;
            }
            for (int i = indexRowStart; i < indexRowEnd; i++) {
                Element e = (Element) nl.item(i);
                map = new HashMap<>();
                map.put("RowID", String.valueOf(RowID));
                map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
                menuItems.add(map);
                RowID = RowID + 1;
            }
            return menuItems;
        }

        @Override
        protected void onPostExecute(ArrayList<HashMap<String, String>> menuItems) {
            //when everything finishes we display the updates from here
            super.onPostExecute(menuItems);
            if (currentPage >= TotalPage) {
                btnNext.setEnabled(false);
            } else {
                btnNext.setEnabled(true);
            }
            if (currentPage <= 1) {
                btnPre.setEnabled(false);
            } else {
                btnPre.setEnabled(true);
            }
            lisView1.setAdapter(new SimpleAdapter(AndroidXMLParsingActivity.this, menuItems,
                R.layout.list_item, new String[]{"RowID", KEY_NAME},
                new int[]{R.id.ColRowID, R.id.ColName}));
        }
    }
} 
```

# c++ - C++ 模板错误：“<”标记之前的预期构造函数、析构函数或类型转换

> ID：12779613
> 
> 赞同：0
> 
> 时间：2012-10-08T10:14:19.397
> 
> 标签：c++, templates, g++

我正在尝试实现 C++ 链表，但出现了 6 次此错误。

上线： `error: expected constructor, destructor, or type conversion before '<' token` 5,13,​​19,26,45,

在标题的第 13 行：`error: expected unqualified-id before 'template'`

你知道为什么吗？

标题：

```
#ifndef LINKEDLIST_H
#define LINKEDLIST_H
// includes
#include <iostream>
#include <stdexcept>

template <typename Type> struct Node
{
    Type& data;
    struct Node* next;
}

template <typename Type> class LinkedList
{
private:
    Node* head;
    unsigned length;
public:
    LinkedList();
    virtual ~LinkedList();
    LinkedList(const LinkedList& other);
    LinkedList& add(Type& data);
    Node& operator[](unsigned index);
    friend ostream& operator << (ostream& out, Node& data);
};

#endif // LINKEDLIST_H 
```

资源：

```
 #include "../include/LinkedList.h"
using namespace std;

template <typename Type>
LinkedList<Type>::LinkedList<Type>()
{
    head = NULL;
    head->next = NULL;
    length = 0;
}

template <typename Type>
LinkedList<Type>::~LinkedList<Type>()
{
    //dtor
}

template <typename Type>
LinkedList<Type>::LinkedList(const LinkedList& other)
{
    //copy ctor
}

template <typename Type>
LinkedList<Type>& LinkedList<Type>::add(Type& data)
{
    Node<Type>* ptr = head, *last;
    while(ptr)
    {
        last = ptr;
        ptr = ptr->next;
    }
    //   ptr now is null
//    try {ptr = new Node<Type>();}
 //   catch (bad_alloc& e) { cout << "Bad allocation .."; terminate();}
    ptr->data = data;
    ptr->next = NULL;
    last->next = ptr ; // link the previos;
    ++length;
    return *ptr;
}

template <typename Type>
Node<Type>& LinkedList<Type>::operator[] (unsigned index)
{
    if(index < 0 || index >= length) throw std::out_of_range("Out of range exception thrown!");
    Node<Type>* ptr = head;
    for(int i = 0; i < index; ++i) ptr = ptr->next;
    return *ptr;
}

template <typename Type>
std::ostream& operator << (std::ostream& out, Node<Type>& data)
{
    out << data.data << " ";
    return out;
} 
```

你知道这个错误信息是什么意思吗？以及如何解决？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T10:16:27.643

看起来你需要添加一些';' 到你的声明结束。

```
template <typename Type> struct Node
{
    Type& data;
    struct Node* next;
}; // <<< 
```

# .net - .NET 调试布局

> ID：12779616
> 
> 赞同：0
> 
> 时间：2012-10-08T10:14:26.853
> 
> 标签：.net, excel, logging

我在 .NET 中有一个 Excel 加载项，它有时会在关闭 Excel 时崩溃。崩溃的类型是“已停止工作”，它描述了某些非托管代码或非守护线程中的异常。

我试图通过插入日志语句来了解发生了什么，但是我想查看更多信息：调用者的类、时间、方法等。

使用 .NET 本机记录器是否可行，还是应该使用更复杂的日志库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:21:52.300

大多数情况下，当您遇到此类错误时，系统事件日志中会写入全面的错误日志。您可以在事件日志 > 应用程序中查看它，看看出了什么问题。

不过，它将具有行性质，并会为您提供故障模块的名称和堆栈跟踪。

只要您在托管域中，就可以使用 JIT 调试器进行调试，但是一旦您继续使用本机代码，您将无法调试，因为该代码是在发布模式下制作的并且没有足够的调试信息. 尽管使用 Visual Studio 提供的调试器，您可能会看到反汇编。

# nhibernate - NHibernate 映射 - 从单个类中对同一个表的多次引用

> ID：12779617
> 
> 赞同：2
> 
> 时间：2012-10-08T10:14:33.873
> 
> 标签：nhibernate, mapping

我有一个具有（除其他外）这些属性的类“人”：

*   homeAddress（地址类型）
*   billingAddress（地址类型）
*   地址（List 类型，包含此人的所有已知地址）

集合“地址”包含对该人的所有已知地址的引用，包括由其他两个属性明确引用的两个地址（不是历史，只是“我可以找到”该人的地点的列表，例如“奶奶的家”或“办公室”）。也许这个人只有一个地址，被“家庭地址”、“帐单地址”和“地址”引用。

在数据库上，我将有一个表“people”，其中有一列“homeAddressID”和另一个“billingAddressId”，还有一个表“addresses”，其中只有“personId”（这里没有像“isHomeAddress”或“isBillingAddress”这样的标志）

我应该如何映射这个类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:01:01.470

就这么简单

```
public PersonMap()
{
    References(x => x.HomeAddress, "homeAddressID");
    References(x => x.BillingAddress, "billingAddressID");
    HasMany(x => x.Addresses)
        .KeyColumn("personId");
} 
```

# lisp - 如果我打算通读整个 SICP 书，视频讲座是否值得一看？

> ID：12779621
> 
> 赞同：3
> 
> 时间：2012-10-08T10:14:45.770
> 
> 标签：lisp, scheme, sicp

在我开始关注 coursera 上的“Scala 中的函数式编程原理”课程（顺便说一句，你可以在 Quroa 上找到关于这门课程的[反馈](http://www.quora.com/Functional-Programming/How-is-Martin-Oderskys-Functional-Programming-Principles-in-Scala-Coursera-class)），其中部分教材取自 SICP 后，我受到启发，通过整本书并完成所有练习。

我知道在 SO 和其他在线地方已经有很多关于这本书的资源和讨论。[然而，似乎对 Hal Abelson 和 Gerald Jay Sussman 的视频讲座](http://groups.csail.mit.edu/mac/classes/6.001/abelson-sussman-lectures/)本身没有特别的评论，我的问题是：**是否值得观看（或有必要观看）这些视频？是否只有讲座中涵盖了任何优秀的东西？**

稍微介绍一下我的背景可能有助于回答我的问题：我是一名专业程序员，工作中使用 c++/python 编写代码，学习了函数式编程的一些基本概念，并且毫无困难地通过了 SICP 的第 1 章的材料和做大部分的练习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:07:50.737

请注意，视频讲座参考了本书的第一版，而当前版本是第二版。所以它们有点过时，对本书最新版本中的主题给出了不同的处理或使用略有不同的示例，并且某些部分完全缺失（例如：并发编程）。

但无论如何，视频讲座值得你花时间。看着这本书的作者用自己的话解释这些概念真是太棒了，看着穿着巫师服装的 Gerald Sussman 在元循环评估器的讲座中绝对是无价的。

# android - AES算法是适合android的加密算法吗？

> ID：12779626
> 
> 赞同：3
> 
> 时间：2012-10-08T10:14:58.383
> 
> 标签：android, encryption

我想为android开发一个简单的加密应用程序。我应该使用哪种算法来加密所有数据类型，例如图像、办公文档、多媒体等，为什么它是一个好的算法？

AES 是否涵盖所有类型的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:41:03.720

AES 可以加密任何可以表示为字节序列的数据，因此它可以加密所有类型的数据。

AES 已经通过了大量的测试，还没有人打破它。几乎每个加密库都将包含 AES，包括适用于 Android 的 Bouncy Castle 和 Spongy Castle。AES 是标准并且是您的首选，除非您有特定的理由不使用它。

在带有 PKCS7 填充的 CBC 模式或 CTR 模式下使用它。是的，如果您不知道，您将需要了解一些有关[块密码模式](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation)和[加密填充](http://en.wikipedia.org/wiki/Padding_%28cryptography%29)的知识。

对于身份验证，如果需要，请使用 HMAC-SHA256 或 GCM 模式，其中包括身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:36:40.147

是的，我相信你可以用 AES 加密你想要的一切。只需将所有数据类型视为字节流。这里没问题。

# c# - 使用 C# 即时创建 PowerPoint 演示文稿

> ID：12779628
> 
> 赞同：1
> 
> 时间：2012-10-08T10:15:05.787
> 
> 标签：c#, powerpoint

我曾尝试研究使用 C# 创建 PowerPoint 演示文稿，但我无法找到如何从模板克隆幻灯片并使用 C# 即时将图表添加到演示文稿幻灯片。

创建演示文稿后，还要保存文件。

为 .NET 使用 Aspose.slide

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T10:26:40.910

您还可以参考以下有用的链接：

1.  [克隆幻灯片，包括 PowerPoint 演示文稿中的图像和图表以及使用 Open XML SDK 2.0 生产力工具](http://www.exsilio.com/blog/post/2011/03/21/Cloning-Slides-including-Images-and-Charts-in-PowerPoint-presentations-Using-Open-XML-SDK-20-Productivity-Tool.aspx)

2.  [动态添加图表到 PowerPoint](http://openxmldeveloper.org/discussions/formats/f/15/t/1429.aspx)

3.  [使用 C# 以编程方式创建 PowerPoint .PPT](http://www.free-power-point-templates.com/articles/create-powerpoint-ppt-programmatically-using-c/)

4.  [如何使用 C# 创建 PowerPoint 演示文稿并将图片嵌入到幻灯片中](http://www.free-power-point-templates.com/articles/how-to-create-a-powerpoint-presentation-using-c-and-embed-a-picture-to-the-slide/)

# c++ - 转换为`const Y`不适用于clang上的`R&&`

> ID：12779630
> 
> 赞同：5
> 
> 时间：2012-10-08T10:15:13.890
> 
> 标签：c++, c++11, g++, clang, move-semantics

下面的代码可以很好地编译`g++ (GCC) 4.7.1 20120721`，但在最近构建时失败`clang version 3.2 (trunk)`。

```
struct Y {};

struct X {
  operator const Y() const { return Y(); }
};

void f(Y&& y) {}

int main()
{
  f(X());
  return 0;
} 
```

将转换运算符更改`operator Y() const`为足以使代码在两个编译器上编译。

在这种情况下，哪个编译器实际上是符合标准的？标准实际上对此有何评论？

要求的逐字错误：

```
bla.cpp:14:5: error: no viable conversion from 'X' to 'Y'
  f(X());
    ^~~
bla.cpp:1:8: note: candidate constructor (the implicit copy constructor) not viable: no known conversion from 'X' to
      'const Y &' for 1st argument
struct Y {
       ^
bla.cpp:1:8: note: candidate constructor (the implicit move constructor) not viable: no known conversion from 'X' to
      'Y &&' for 1st argument
struct Y {
       ^
bla.cpp:6:3: note: candidate function
  operator const Y() const { return Y(); }
  ^
bla.cpp:10:12: note: passing argument to parameter 'y' here
void f(Y&& y) {}
       ^ 
```

**编辑：**不幸的是，即使添加了重载

```
void f(const Y&) {} 
```

仍然让 clang 选择右值引用重载，因此这会破坏用于编译的现有代码，例如使用标准容器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T11:16:43.263

我相信clang拒绝这一点是正确的。将参数传递给`f(Y&&)`需要两个转换步骤，第一个是 your `operator const Y()`，第二个是`Y`'s 的复制构造函数。我认为两者都算作用户定义的转换，并且都是隐式的，这违反了隐式转换序列仅包含一个用户定义的转换的原则。

这个[按 const 值返回的目的是什么？](https://stackoverflow.com/questions/8716330/purpose-of-returning-by-const-value)包含一些关于返回 a 的语义的有趣见解`const T`。

嗯，如果我尝试`void f(const Y&y)`像现在编辑的问题那样添加重载，clang 的行为会非常奇怪。它仍然抱怨无法转换`X`为`Y`，甚至没有`f(const Y& y)`在其诊断中列出过载。但是，一旦我将重载更改为`Y`按值获取，即 write `void f(const Y y)`，它就会抱怨调用`f`模棱两可。

这是 XCode 4.5 的 clang 报告`Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn)`. 如果您可以使用原版 clang 重现此问题，您可能应该在 clang 邮件列表中报告此问题 - 确实似乎*某个地方*潜伏着一个错误......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T13:02:07.620

该示例格式不正确。

一些 N3242 报价。

8.5.3 第 4 段：

> 给定类型“<em>cv1 `T1`”和“<em>cv2” ，如果“<em>cv1”与“<em>cv2 ”类型相同，或者是“<em>cv2”的基类，则“<em>cv1”与“< `T2`em>cv2 `T1`”引用相关。如果“<em>cv1 ”与“<em>cv2”引用相关，并且 cv1 与 cv2 具有相同的 cv-qualification 或大于 cv2 的 cv-qualification，则“<em>cv1”与“<em> cv2 ”是*引用*兼容*的*。`T2``T1``T2``T1``T2``T1``T2``T1``T2`

 **第 5 段（子弹标签是我的）：

> *对“ cv1* ”类型的引用由“ *cv2* `T1` ”类型的表达式初始化，如下所示： *`T2`*
> 
>  *1.  如果引用是左值引用并且...
> 2.  否则，该引用应为对非易失性 const 类型的左值引用（即*cv1*应为`const`），或者该引用应为右值引用。
>     
>     
>     
>     一种。如果初始化表达式
>     
>     
>     *   一世。是一个 xvalue、类纯右值、数组纯右值或函数左值，并且“cv1”与“ *cv2* *”* `T1`引用兼容，或者 *`T2`*
>     **   ii. 具有类类型（即`T2`是类类型），其中`T1`与 不引用相关`T2`，并且可以隐式转换为类型为“ *cv3* `T3` ”的xvalue、类纯右值或函数左值，其中“ *cv1* `T1` ”与引用兼容“ *cv3* `T3` ”，*   然后引用绑定到....* *湾。否则，将使用非引用复制初始化 (8.5) 的规则从初始化表达式创建并初始化一个临时类型“ *cv1 ”。* `T1`然后将引用绑定到临时文件。如果`T1`与 相关`T2`，*则 cv1*应与 cv2 具有相同的 cv-qualification 或大于*cv2*的 cv-qualification 。...**

 **对于函数参数初始化，`T1`is `Y`, `T2`is `X`, *cv1*和*cv2*都是空的。1 出来了：引用是右值引用，而不是左值引用。2.ai 已淘汰：`X`与`Y`. 2.b。因为`Y`从类型的纯右值复制初始化 an`X`涉及两个用户定义的转换：转换函数，然后是`Y`. （确切的禁令在 13.3.3.1p4 中。）

对于案例 2.a.ii.，“ *cv3* `T3` ”的明显选择是`const Y`，但这并不好，因为`Y`它与`const Y`. 您可能会主张尝试`T3`is`Y`并且*cv3*为空，但随后您又需要复制构造函数`Y`作为第二个隐式用户定义转换。****

# sublimetext2 - 如何为 TypeScript 配置 Sublime 构建系统

> ID：12779631
> 
> 赞同：8
> 
> 时间：2012-10-08T10:15:14.137
> 
> 标签：sublimetext2, typescript

我正在寻找在 Sublime Text 中为 TypeScript 配置构建系统。

我目前正在使用...

```
{
  "cmd": ["tsc", "$file"],
  "selector": "source.ts"
} 
```

我还想设置“file_regex”属性来处理错误消息。

任何人都知道将其设置为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-08T11:43:52.700

在 OS-X 上使用它：

```
{
    "cmd": ["tsc","$file"],
    "file_regex": "(.*\\.ts?)\\s\\(([0-9]+)\\,([0-9]+)\\)\\:\\s(...*?)$",
    "selector": "source.ts",
    "osx": {
       "path": "/usr/local/bin:/opt/local/bin"
    }
} 
```

**编辑：**

这是为 Windows 创建的 Sublime 构建系统。经过测试并按预期工作。但是，您需要在 windows 环境中包含 tsc.cmd 路径，否则您应该在`cmd`下面的部分中为 Typescript 命令定义根：

```
{
    "cmd": ["tsc","$file"],
    "file_regex": "(.*\\.ts?)\\s\\(([0-9]+)\\,([0-9]+)\\)\\:\\s(...*?)$",
    "selector": "source.ts",

    "windows": {
        "cmd": ["tsc.cmd", "$file"]
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T22:19:04.927

现在有两个版本。这个[，](https://gist.github.com/3814020)或者[这个](http://blog.hugeaim.com/2012/10/03/build-typescript-with-sublime-text-2/)。参考本[文档](http://www.sublimetext.com/docs/build)，创建您自己的很容易。

# javascript - Firefox xul 浏览器没有页面标题

> ID：12779639
> 
> 赞同：0
> 
> 时间：2012-10-08T10:15:56.007
> 
> 标签：javascript, firefox, firefox-addon, xul

从上一个会话加载选项卡时，Firefox 浏览器元素不返回页面标题。我使用的代码：

```
var browsers = gBrowser.browsers;
for (var i = 0, len = browsers.length; i < len; i++) {
    dump('page title #1: ' + browsers[i].contentTitle + '\n'); // here I get no title
    dump('page title #2: ' + browsers[i].contentDocument.title + '\n'); // nothing here
    dump('url: ' + browsers[i].contentDocument.location + '\n'); // url is fully loaded here 
} 
```

所以问题是：我如何获得页面标题？当我激活选项卡时，页面开始加载。但是页面标题会在浏览器启动后立即显示在选项卡列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:02:27.423

问题是页面确实*没有*恢复。选项卡已`about:blank`加载到其中，真正的页面仅在用户转到选项卡时才开始加载。所以`contentDocument.title`不能有任何有意义的价值。

您显然想要的是选项卡上显示的标题 - 它不反映加载到选项卡中的内容，而是从上一个会话中记住的内容。所以你实际上应该得到标签标题，像这样：

```
var tabs = gBrowser.tabs;
for (var i = 0, len = tabs.length; i < len; i++) {
    dump('page title: ' + tabs[i].label + '\n');
} 
```

# objective-c - 通知“UIApplicationDidEnterBackgroundNotification”的实用程序

> ID：12779649
> 
> 赞同：1
> 
> 时间：2012-10-08T10:16:15.263
> 
> 标签：objective-c, ios, xcode, cordova

我正在使用 Cordova 2.1.0 进行 IOS 应用程序开发。因为，我是应用程序开发的新手，所以我有一个非常基本的问题。

`applicationDidEnterBackground`当应用程序进入后台时，我正在使用方法来处理应用程序控制。但我想了解`UIApplicationDidEnterBackgroundNotification`应用程序进入后台时发送的实用程序。我可以通过什么方式使用`UIApplicationWillEnterForegroundNotification`系统发送的此通知和其他通知（如等）。这些通知的 USP 是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:28:28.113

根据文档，该方法`applicationDidEnterBackground:`告诉`UIApplication`' 代表应用程序现在在后台。在 Cocoa 中，许多委托消息都有相应`UINotification`的 s 也被发送。这也不例外。

根据[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html)：

> 应用程序还会`UIApplicationDidEnterBackgroundNotification`在调用此方法的同时发布通知，让感兴趣的对象有机会响应转换。

因此，如果您的对象图中存在需要响应状态转换的对象，它们可以观察到此通知。除了允许图中的所有对象响应应用程序状态转换之外，我不确定是否真的有一个未说明的目的。我想如果你有一个长时间运行的任务要在应用程序转换到后台任务时在对象层次结构的某个地方执行，你可以使用`beginBackgroundTaskWithExpirationHandler:`类似于你在`applicationDidEnterBackground`.

**编辑：**

```
//  example, save NSArray *_myArray to disk when app enters background
//  this is contrived, and untested, just meant to show how you can
//  observe the UIApplicationDidEnterBackgroundNotification and save state
//  in an arbitrary point in the object graph. (as opposed, or in addition to, the
//  application's delegate.

//  long-running tasks, e.g. web service connections, etc. will need to 
//  get a background task identifier from the UIApplication and manage that.

__block id enteredBackground = nil;
NSNotificationCenter *center = [NSNotificationCenter defaultCenter];
enteredBackground = [center addObserverForName:UIApplicationDidEnterBackgroundNotification
                                        object:nil
                                         queue:nil
                                    usingBlock:^(NSNotification *note) {
                                        [_myArray writeToFile:@"/path/to/you/file" atomically:YES];

                     }]; 
```

# extjs - Extjs 中的 MVC 路径

> ID：12779650
> 
> 赞同：1
> 
> 时间：2012-10-08T10:16:20.083
> 
> 标签：extjs, path, extjs-mvc

我有一个 ExtJs 应用程序 (MVC)。

因此，我定义了许多控制器、模型、视图和存储。目前，我的项目结构并不简单。

例如我的模型：

```
Ext.define('KP.model.account.AccountList', {

    extend: 'Ext.data.Model',
    fields: ['parameter', 'string_value']

}); 
```

我用这样的模型定义我的商店：

```
Ext.define('KP.store.account.AccountList', {
    extend: 'Ext.data.Store',

    alias: 'store.s_AccountList',

    model: 'KP.model.account.AccountList',
    ......................................
}); 
```

如果我想移动一些 .js 文件，我必须重写类定义中的许多路径。那么，我怎样才能声明我的类（可能通过别名）并更有效地使用它们？如果我在文件树上移动文件，这是需要的。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:35:15.637

我相信商店是唯一用全名引用模型类的类。控制器通过名称减去“AppName.model”前缀来引用模型类。所以一个模型`MyApp.model.User`在控制器类中被称为 simple `User`。如果您的代码分离比`MyApp.model.specific.User`控制器称为`specific.User`.

别名用于注册 xtypes，也被`Ext.widget`方法使用。

# .net - 是否可以在 Directory.GetFiles 中指定目录通配符？

> ID：12779653
> 
> 赞同：2
> 
> 时间：2012-10-08T10:16:23.497
> 
> 标签：.net, file, directory

我有一个要筛选的目录结构，我需要能够指定顶级文件夹，一个典型的例子是：

```
c:\folder1\1\targetfolder
c:\folder1\2\targetfolder
c:\folder1\3\targetfolder
c:\folder1\4\targetfolder 
```

我想获取名为*targetfolder*的文件夹中的每个文件，指定这似乎失败了：

```
Directory.GetFiles("c:\folder1\*\targetfolder"); 
```

有没有一种快速简便的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:23:37.347

试过这个并且有效，但如果你的根路径中有文件或文件夹具有相同的模式，你可能会得到误报

```
var files = Directory.GetFiles("c:\\folder1", "*.*", 
        SearchOption.AllDirectories).Where(n => n.Contains("\\targetfolder\\")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:43:29.783

`targetfolder`如果您有名为或类似的文件，这对我有用并且没有副作用。

```
Directory.GetDirectories(
    @"c:\folder1\",
    @"targetfolder",
    SearchOption.AllDirectories)
    .SelectMany(dir => Directory.GetFiles(dir, "*", SearchOption.TopDirectoryOnly)) 
```

这将为您提供仅存在于文件夹中命名`targetfolder`的文件夹中的文件`c:\folder1\`

# slickgrid - 两个巧妙的网格问题：1.如何突出显示列标题，2.如何知道滚动结束的时间

> ID：12779657
> 
> 赞同：2
> 
> 时间：2012-10-08T10:16:33.980
> 
> 标签：slickgrid, tableheader

我正在使用 slickgrid 建立一个网站，我遇到了这两个问题：

1.  每当用户单击列标题时，我都想选择整个列。我已经能够改变这个[例子](http://mleibman.github.com/SlickGrid/examples/example14-highlighting.html)中给出的单元格的样式。我无法弄清楚如何更改列标题的样式

2.  如何知道 slickgrid 中滚动结束的时间。我目前正在做

    ```
    $(".slick-viewport").scroll(function () {
        if ($(this)[0].scrollHeight - $(this).scrollTop() <= $(this).outerHeight()) {
            handle_end_of_scroll()
        }
    }) 
    ```

但是我依赖于光滑网格体的 css 类名，如果我最终将 slickgrid 更新到更新版本，我可能会遇到问题。如果 slickgrid 的实现发生变化，我可能必须更新这部分代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-02T04:40:25.887

## 更改标题的样式

您可以强制更新标题，这将触发一个`onHeaderCellRendered`事件，您可以在该事件中更改标题上的类。不过很乱。

```
grid.onHeaderCellRendered.subscribe(function (e, args) {
    var headerCell = args.node;
});
grid.updateColumnHeader('columnID'); 
```

## 检查是否滚动到结束

直接绑定到滚动事件总是不好的。您应该订阅`onViewportChanged`事件和`getViewport`方法以检查您是否已到达终点。

```
grid.onViewportChanged.subscribe(function () {
    var lastRow = grid.getViewport().bottom;
    if (lastRow >= grid.getDataLength() - 1) {
        console.log('at bottom');
    }
}); 
```

# ldap - python ldap“错误的搜索过滤器”错误

> ID：12779662
> 
> 赞同：1
> 
> 时间：2012-10-08T10:16:39.783
> 
> 标签：ldap

这个过滤器在我的 LDAP 浏览器中运行良好，python ldap 不会选择它：

```
(&(!objectClass=computer)(sn=*%s*)) 
```

导致：

```
Request Method: GET Request
URL: http://localhost:8000/ldap_find/%D0%B1%D0%BE%D0%BB%D0%BE%D1%82/
Django Version: 1.4
Exception Type: FILTER_ERROR
Exception Value: {'desc': 'Bad search filter'} 
```

这是执行此操作的代码：

```
try:
    LDAPClient.connect()
    base = AUTH_LDAP_SEARCH_BASE
    scope = ldap.SCOPE_SUBTREE
    filter = '(&(!objectClass=computer)(sn=*%s*))' % search_string
    result_set = list()
    result = LDAPClient.client.search(base.encode(encoding='utf-8'), scope, filter.encode(encoding='utf-8'),['cn','mail'])
    res_type, res_data = LDAPClient.client.result(result)
    for data in res_data:
        if data[0]:
            result_set.append(data)
    return json.dumps(result_set)
except Exception, e:
    raise e
finally:
    LDAPClient.unconnect() 
```

它适用于简单的过滤器，例如

```
filter = 'sn=*%s*' % search_string 
```

所以我猜这是对 & 或 ldap lib 中的某种转义，但还找不到根目录。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T10:47:31.563

搜索过滤器语法不正确。使用`(&(sn=*%s*)(!(objectClass=computer)))`. 搜索过滤器在[RFC4511](https://www.rfc-editor.org/rfc/rfc4511)和[RFC4515](https://www.rfc-editor.org/rfc/rfc4515)中有详细记录。

# android - 在相机应用中应用背景样式效果

> ID：12779664
> 
> 赞同：0
> 
> 时间：2012-10-08T10:16:43.610
> 
> 标签：android, android-camera

![在此处输入图像描述](../Images/e1031f25e402cdbe3e8eeeaa7afdd373.png)

我有一个拍照密码。然后如何应用如上图的照片效果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:22:10.747

使用 android aviary sdk 进行图像效果。

[http://www.aviary.com/android](http://www.aviary.com/android)

在此处查看[文档](http://www.aviary.com/android-documentation)。

# asp.net - BuildManager.GetReferencedAssemblies 等效于非 Web 应用程序

> ID：12779665
> 
> 赞同：14
> 
> 时间：2012-10-08T10:16:44.763
> 
> 标签：asp.net, asp.net-mvc, winforms, wcf, asp.net-web-api

相比`AppDomain.GetAssemblies()`，`BuildManager.GetReferencedAssemblies()`( [System.Web.Compilation.BuildManager](http://msdn.microsoft.com/en-us/library/system.web.compilation.buildmanager.aspx) ) 似乎是一种更可靠的方式来获取 ASP.NET 应用程序在运行时引用的程序集，因为[AppDomain.GetAssemblies()](http://msdn.microsoft.com/en-us/library/system.appdomain.getassemblies.aspx)只获取“*已经*加载到的程序集此应用程序域的执行上下文”。

遍历所有程序集是在应用程序启动时在 DI 容器中动态注册类型的重要工具，尤其是在应用程序启动期间，可能还没有加载其他程序集（在不需要的地方），组合根是第一个需要它们的人。因此，有一个可靠的方法来获取应用程序的引用程序集是非常重要的。

虽然`BuildManager.GetReferencedAssemblies()`对于 ASP.NET 应用程序来说是一种可靠的方法，但我想知道：对于其他类型的应用程序，例如桌面应用程序、Windows 服务和自托管 WCF 服务，**还有哪些替代方案可用？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-08T12:11:09.773

我目前看到的唯一方法是手动预取所有引用的程序集，就像幕后`BuildManager`所做的那样：

```
var assemblies =
    from file in Directory.GetFiles(AppDomain.CurrentDomain.BaseDirectory)
    where Path.GetExtension(file) == ".dll"
    select Assembly.LoadFrom(file); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T11:41:15.063

我有同样的问题。在做了一些研究之后，我仍然没有找到一个可靠的答案。我想出的最好的方法就是`AppDomain.CurrentDomain.GetAssemblies()`与`AppDomain.AssemblyLoad`事件相结合。

通过这种方式，我可以处理所有已加载的程序集，同时获得所有新程序集的通知（然后我会对其进行扫描）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-01T21:27:43.747

该解决方案基于@steven 的回答。但可以在 Web、WinForms、控制台和 Windows 服务中工作。

```
var binDirectory = String.IsNullOrEmpty(AppDomain.CurrentDomain.RelativeSearchPath) ? AppDomain.CurrentDomain.BaseDirectory : AppDomain.CurrentDomain.RelativeSearchPath;

var assemblies = from file in Directory.GetFiles(binDirectory)
                 where Path.GetExtension(file) == ".dll"
                 select Assembly.LoadFrom(file); 
```

# regex - 正则表达式匹配单词之间的空格和制表符

> ID：12779666
> 
> 赞同：2
> 
> 时间：2012-10-08T10:16:54.607
> 
> 标签：regex

词之间有`<tab> <space> <tab>`。

```
Reskontradatum      Transaktionsdatum       Text        Belopp      Saldo
2012-10-01      2012-09-30      SATS-TIGER AIR      -92,17      629,07
2012-10-01      2012-10-01      Per oktober         -1 000,00       721,24
2012-09-30      2012-10-02      ÖVERTRASSRÄNTA      -1,00       1 721,24 
```

我怎样才能删除它们（不删除单词中的空格`SATS-TIGER AIR`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T11:24:00.953

*我不确定这是否是您要查找的内容，但是当单词之间同时存在*制表符和空格时，您似乎想要删除所有制表符和空格- 即当只有空格字符或之间只有制表符时字。

此正则表达式在两个单词之间查找一个或多个空格和一个或多个制表符：

```
\b(\s+\t+)\b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:22:59.187

不太确定你在问什么，但匹配选项卡的正则表达式是 \t。如果可能不止一个，您可以将其与 \t+ 匹配

此外，这将取决于您使用什么语言来实现您的正则表达式

# php - Doctrine2 ManyToMany-relation 不保存

> ID：12779669
> 
> 赞同：1
> 
> 时间：2012-10-08T10:17:05.183
> 
> 标签：php, mysql, symfony, doctrine-orm, many-to-many

我在学说 2 中的多对多关系有问题。即使关系存在，关系也不会持续存在。如果我检查两个 foreach 循环中的持久性，则返回正确的对象。

第一类是文档。

```
class Document extends BaseEntity
{
    ....
    /**
     * @ORM\ManyToMany(targetEntity="Job", mappedBy="documents", cascade={"all"})
     * @ORM\JoinTable(name="job_document")
     */
     protected $jobs;
    .... 
```

第二类是 Job

```
class Job extends BaseEntity
{
    ....
    /**
     * @ORM\ManyToMany(targetEntity="Document", inversedBy="jobs", cascade={"all"})
     * @ORM\JoinTable(name="job_document")
     */
    protected $documents;
    .... 
```

在我的控制器中，我执行以下操作：

```
$job->addDocument($document);
$document->addJob($job);
$em->persist($job);
$em->flush(); 
```

添加功能工作正常。执行此操作后，当我遍历对象时，我可以看到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:09:08.623

在我看来，您只尝试更新关系的反面，而不是拥有关系。

[正如教义文档](http://docs.doctrine-project.org/en/latest/reference/unitofwork-associations.html)中指出的那样：

> 仅对关联的反面所做的更改将被忽略。确保更新双向关联的双方（或至少从 Doctrine 的角度来看拥有方）

# scheme - Scheme中的可变参数函数

> ID：12779670
> 
> 赞同：3
> 
> 时间：2012-10-08T10:17:05.640
> 
> 标签：scheme, variadic, cdr

我必须在 Scheme 中定义一个采用以下形式的可变参数函数： `(define (n-loop procedure [a list of pairs (x,y)])`其中对的列表可以是任意长度。

每对指定一个下限和上限。也就是说，以下函数调用：`(n-loop (lambda (x y) (inspect (list x y))) (0 2) (0 3))`产生：

```
(list x y) is (0 0)
(list x y) is (0 1)
(list x y) is (0 2)
(list x y) is (1 0)
(list x y) is (1 1)
(list x y) is (1 2) 
```

显然，汽车和 cdr 将不得不参与我的解决方案。但是使这变得困难的规定如下。根本不使用赋值语句或迭代循环（while 和 for）。

我可以使用 while 和 for 来处理它来索引对列表，但看来我必须使用递归。我不想要任何代码解决方案，除非您认为有必要进行解释，但是有人对如何攻击这有建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T12:12:03.150

在 Scheme 中进行循环的标准方法是使用尾递归。事实上，假设你有这个循环：

```
(do ((a 0 b)
     (b 1 (+ a b))
     (i 0 (+ i 1)))
    ((>= i 10) a)
  (eprintf "(fib ~a) = ~a~%" i a)) 
```

这实际上被宏扩展为如下内容：

```
(let loop ((a 0)
           (b 1)
           (i 0))
  (cond ((>= i 10) a)
        (else (eprintf "(fib ~a) = ~a~%" i a)
              (loop b (+ a b) (+ i 1))))) 
```

进一步，它被宏扩展为这个（我不会宏扩展`cond`，因为这与我的观点无关）：

```
(letrec ((loop (lambda (a b i)
                 (cond ((>= i 10) a)
                       (else (eprintf "(fib ~a) = ~a~%" i a)
                             (loop b (+ a b) (+ i 1)))))))
  (loop 0 1 0)) 
```

你应该看到`letrec`这里并想，“啊哈！我看到了递归！”。确实可以（特别是在这种情况下，尾递归，尽管`letrec`也可以用于非尾递归）。

*Scheme 中的任何*迭代循环都可以这样重写（命名`let`版本是在 Scheme 中惯用地编写循环的方式，但如果您的分配不允许您使用 named `let`，请进一步扩展并使用`letrec`）。我上面描述的宏扩展是简单而机械的，您应该能够看到一个如何转换为另一个。

* * *

由于您的问题询问可变参数函数如何，您可以这样编写可变参数函数：

```
(define (sum x . xs)
  (if (null? xs) x
      (apply sum (+ x (car xs)) (cdr xs)))) 
```

（顺便说一句，这是一种非常低效的编写`sum`函数的方法；我只是用它来演示如何发送（使用`apply`）和接收（使用不正确的 lambda 列表）任意数量的参数。）

* * *

### 更新

好的，这里有一些一般性建议：您将需要两个循环：

1.  一个外循环，它通过范围级别（那是你的可变参数）
2.  一个内部循环，循环遍历每个范围级别中的数字

在每个循环中，仔细考虑：

1.  起始条件是什么
2.  结束条件是什么
3.  你想在每次迭代中做什么
4.  在迭代之间是否需要保持任何状态

特别是，请仔细考虑最后一点，因为这是在给定任意数量的嵌套级别的情况下嵌套循环的方式。（在我下面的示例解决方案中，这就是`cur`变量。）

在你决定了所有这些事情之后，你就可以构建你的解决方案的一般结构。我将在下面发布我的解决方案的基本结构，但是在查看我的代码之前，您应该好好考虑一下要如何解决问题，因为它可以让您很好地掌握两者之间的差异您的解决方案方法和我的方法，它将帮助您更好地理解我的代码。

此外，不要害怕首先使用命令式循环（如 ）来编写它，然后在一切正常时`do`将其转换为等效的命名。`let`只需重新阅读第一部分以了解如何进行转换。

说了这么多，这是我的解决方案（去掉了细节）：

```
(define (n-loop proc . ranges)
  (let outer ((cur ???)
              (ranges ranges))
    (cond ((null? ranges) ???)
          (else (do ((i (caar ranges) (+ i 1)))
                    ((>= i (cadar ranges)))
                  (outer ??? ???)))))) 
```

请记住，一旦你得到这个工作，你仍然需要将`do`循环转换为一个基于 named的循环`let`。（或者，您可能需要更进一步，将外循环和内循环都转换为它们的`letrec`形式。）

# asp.net-mvc-3 - 下拉在 ToSelectList 扩展方法中不起作用

> ID：12779672
> 
> 赞同：0
> 
> 时间：2012-10-08T10:17:07.663
> 
> 标签：asp.net-mvc-3

我有一个可为空的枚举，与同一页面上的其他枚举不同，它不起作用。我有一个枚举，`Title`使用扩展方法将有助于填充页面上的下拉列表。ViewBag 声明如下所示：

```
ViewBag.TitleList = EnumExtensions.ToSelectList<Title>("[select]"); 
```

现在，也许有人可以向我解释一下，但这就是在 MVC 中绑定时发生黑魔法的地方。如果调用时页面无效，`if(ModelState.IsValid)`则在重新渲染屏幕时，再次调用上述语句。但是，这一次，将选择正确的下拉项（取决于您当时选择了哪一项）。

深入挖掘，这是方法声明：

```
 public static SelectList ToSelectList<TEnum>(string nullEntry = null) where TEnum : struct
    {
        return ToSelectList<TEnum>(nullEntry, null);
    }

    public static SelectList ToSelectList<TEnum>(string nullEntry = null, string selectedValue = null) where TEnum : struct
    {
        var enumType = typeof(TEnum);
        var values = Enum.GetValues(enumType).OfType<TEnum>();
        List<SelectListItem> items =  ToSelectList<TEnum>(values, nullEntry, selectedValue);
        SelectList sl = new SelectList(items, "Value", "Text", selectedValue);
        return sl;
    }

    public static List<SelectListItem> ToSelectList<T>(this IEnumerable<T> enumerable, string nullEntry, string selectedValue = null)
    {
        List<SelectListItem> items;

        if ((typeof(T).IsEnum))
        {
            items = enumerable.Select(f => new SelectListItem()
            {
                Text = f.GetDescription(),
                Value = f.ToString(),
                Selected = f.ToString() == selectedValue
            }).ToList();
        }
        else
        {
            items = enumerable.Select(f => new SelectListItem()
            {
                Text = f.ToString(),
                Value = f.ToString()
            }).ToList();
        }

        if (!string.IsNullOrEmpty(nullEntry))
        {
            items.Insert(0, new SelectListItem() { Text = nullEntry, Value = "" });
        }

        return items;
    } 
```

只有一些重载可以处理随机情况，尽管可能不需要其中一些。

正如我所说，将为其他枚举选择正确的项目，但对于这个特定的项目，标题，它不会。这是枚举声明：

```
public enum Title
{
    Mr,
    Miss,
    Mrs,
    Ms
} 
```

最后，`DropDownListFor`在页面本身上使用的声明；

```
@Html.DropDownListFor(x => x.Title, (SelectList)ViewBag.TitleList) 
```

问题是当我第一次访问页面时，选中的项目总是“[select]”（当提供的枚举值在模型中为空时）。但是，模型属性`Title` *肯定*有一个值设置，并且该`SelectedItem`属性也是为下拉列表设置的，但是在屏幕上，它默认为“[select]”，这是出乎意料的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:22:44.257

会不会是因为名字`Title`？尝试将其更改为另一个名称只是为了查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-02T16:13:14.667

也许您应该尝试添加 String.Empty 以便下拉列表默认为空白

> @Html.DropDownListFor(x => x.Title, (SelectList)ViewBag.TitleList, String.Empty)

# prolog - Prolog - 不确定书籍的规则

> ID：12779673
> 
> 赞同：-7
> 
> 时间：2012-10-08T10:17:09.737
> 
> 标签：prolog

我真的不知道如何处理规则，我讨厌序言，我所做的只是，我列出了事实

使用结构化数据对象来表示一本书。描述一本书的信息是：

*   标题
*   作者
*   类型
*   页数

类型应该是以下{犯罪、戏剧、喜剧、研究、小说、参考}之一。

您可以将图书馆表示为书籍列表。写一套推荐书籍的规则：

*   假期（书应少于 400 页，而不是学习或参考书）。
*   修订（用于学习的书或超过 300 页的参考书）。
*   文学阅读（戏剧书籍）。
*   休闲（喜剧或小说的书籍）。

事实：

*   书（小村庄，震动，戏剧，300）
*   书（地图，osi，参考，100）
*   书（csi，杰瑞，犯罪，80）
*   书（主播，费雷尔，喜剧，200）
*   书（java，jomo，学习，400）
*   书（圣经，耶稣，小说，600）

规则：它如何执行规则，都是我在问的问题，例如，对于假期，第一条规则的代码是否应该是：holidayPages(400,Y) :- book(_, _, Y),400

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T11:29:08.703

chac 已经铺平了道路。Prolog 规则具有以下形式：

```
Head :- Body. 
```

对于头部，您可以选择化合物或原子。正文可以是 Prolog 查询。查询基本上是从以下内容构建的：

```
- Invocations: Call some other rules with bound or unbound arguments
- Conditions: Unification =, Arithmetic =:=, <, etc.. Lexical @<, ==, etc..
- Connectives: And ,, Or ;, Not \+ etc..
- Everything else that is found in the handbook of your Prolog system. 
```

如果您有规则的口头规范。首先查找主调用，然后查找条件，最后查找连接词。这是一个例子：

```
Holidays (book should be less than 400 pages and not be a study or reference book). 
```

我得到：

```
Main invocation: book(Title, Author, Genre, Pages)
Condition_1: Pages < 400
Condition_2: Genre = study
Condition_3: Genre = reference
Connectives: Condition_1, \+ (Condition_2 ; Condition_3) 
```

如果我将所有这些放在一起，我会得到以下主体，您可以轻松地首先在顶层作为查询对其进行测试：

```
?- book(Title, Author, Genere, Pages), Pages < 400, \+ (Genre = study; Genre = reference). 
```

现在你可以把它变成一个规则。注意使用下划线 (_) 表示未使用的调用变量，否则 Prolog 系统会向您发出单例警告：

```
holidays(Title) :- 
     book(Title, _, Genre, Pages), 
     Pages < 400, 
     \+ (Genre = study; Genre = reference). 
```

这是一个很好的作业，你有一个好老师。玩得开心。

再见

# dojo - 当多个字段设置为“_item”时，对 dojo 数据网格中的列数据进行排序

> ID：12779675
> 
> 赞同：1
> 
> 时间：2012-10-08T10:17:14.653
> 
> 标签：dojo

我有一个由 ObjectStore 填充的 dojo DataGrid，其中 4 列表示来自子对象的数据。

使用[这篇文章的](https://stackoverflow.com/questions/10115518/json-child-object-with-dojo-data-objectstore)建议，我能够访问和显示我的网格中的数据。有没有更好的方法来访问子数据？

正如[dojo文档](http://dojotoolkit.org/documentation/tutorials/1.7/populating_datagrid/)中所说（我使用的是1.8，但问题是一样的），

> “通过使用 get、fields 或 field 设置为“_item”，DataGrid 将无法对您的数据进行排序。如果您需要在客户端进行排序和高级计算，则需要在数据到达您的商店之前对其进行转换。”

我的问题是：我如何转换数据，我将它转换成什么？这是否也会影响对这些列进行编辑的方式？

# wcf - 如何在 WCF 中使用超时计时器连续运行存储过程

> ID：12779677
> 
> 赞同：-1
> 
> 时间：2012-10-08T10:17:21.840
> 
> 标签：wcf

我想在 WCF 应用程序中连续执行存储过程，并且不使用计时器需要执行存储过程。

我尝试使用计时器并且它可以工作，但是如果不使用 WCF 中的计时器，我该如何实现？

提前致谢，

普拉萨德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:19:35.833

```
while(true)
{
    CallStoredProcedure()
} 
```

你对结果做了什么？我不明白为什么你需要不断地打电话给 SP。您可能需要重新设计执行此操作的方式。

# objective-c - NSWindow 可恢复并不总是有效

> ID：12779681
> 
> 赞同：8
> 
> 时间：2012-10-08T10:17:45.707
> 
> 标签：objective-c, macos, cocoa, nswindow, nswindowrestoration

我已经检查了我的 NSWindow 上的可恢复选项当我移动我的应用程序并更改其大小并关闭/重新打开我的应用程序时，它会将窗口大小和位置设置为最后的大小和位置

但这不会发生在我测试它的每台计算机上。它只发生在几台电脑上

他们没有关于简历的特殊设置。

有没有人有这方面的经验？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-15T11:11:52.643

> 但这不会发生在我测试它的每台计算机上。它只发生在少数计算机上。他们没有关于简历的特殊设置。

事实上，他们确实如此。查看“系统偏好设置”>“常规”窗格。应该有一个名为“退出应用程序时关闭窗口”的选项负责恢复行为。此外，在 OS X Mountain Lion 中，Apple 更改了默认行为，现在该应用程序仅在您使用 Command-Option-Q 退出时恢复其状态。

因此，您可能应该检查在另一台 Mac 上安装了哪个 OS X 版本，以及在“常规”窗格中选择了哪个首选项。希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T19:10:35.050

您应该知道的一件事是检查 IB 中的“可恢复”选项只会更改窗口属性。实际的恢复和保存在您手中。

首先，您必须遵守`NSWindowDelegate`协议并实现对 窗口属性进行编码和解码的方法`-window:willEncodeRestorableState:state`和`-window:didDecodeRestorableState:` 方法（例如，您显然可以通过调用获得的窗口框架`[myWindow frame]`）。

您还需要遵守`NSWindowRestoration`协议并实施`+restoreWindowWithIdentifier:state:completionHandler:`. （确保您使用该`setRestorationClass`方法将您的课程设置为恢复课程）

如需更多、更深入的信息，您可以[在此处访问此 Apple 文档文档](http://developer.apple.com/library/mac/#documentation/General/Conceptual/MOSXAppProgrammingGuide/CoreAppDesign/CoreAppDesign.html#//apple_ref/doc/uid/TP40010543-CH3-SW26)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-25T04:08:25.943

如果您只想恢复窗口的框架，请使用`setFrameAutosaveName:`.

[https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/WinPanel/Tasks/SavingWindowPosition.html](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/WinPanel/Tasks/SavingWindowPosition.html)

# ios - MPMoviePlayerController 无法从 Documents 文件夹播放

> ID：12779683
> 
> 赞同：4
> 
> 时间：2012-10-08T10:17:46.413
> 
> 标签：ios, mpmovieplayercontroller, nsurl, nsdocumentdirectory

绝望了。大家好！我遇到了 MPMoviePlayerController 的一些问题。我已经使它与来自 NSBundle 的视频一起工作。但这不是我需要的。我需要从 Documents 目录播放它，因为那是我存储录制视频的地方，而 URL 存储在 CoreData 中。但是让我们把它放在一边，并将代码简化到所需的最低限度。如果使用 contentURL，此代码实际上可以工作，这会导致 NSBundle。之后，我要做什么才能到达文档位置。我所做的：

```
 NSURL *contentURL = [[NSBundle mainBundle] URLForResource:@"Oct_08_2012_10_00_51" withExtension:@"mp4"]; // this works
NSString* docPath = [NSSearchPathForDirectoriesInDomains
                     (NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString * docaPathFull = [NSString stringWithFormat:@"%@%@", docPath, @"/Oct_08_2012_10_00_51.mp4"];
NSURL * docUrl= [NSURL URLWithString: docaPathFull];
BOOL ex = [[NSFileManager defaultManager] fileExistsAtPath:docaPathFull];
NSLog(@"file exists: %d, path using docPath: %@",ex, docaPathFull);
MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:docUrl];
player.shouldAutoplay = YES;
player.controlStyle = MPMovieControlStyleEmbedded;
[player.view setFrame: self.thumbButton.bounds];
[player prepareToPlay];
[self.view addSubview: player.view];
[player play]; 
```

我们有什么：

```
2012-10-08 13:14:43.532 Voto[11968:907] file exists: 1, path using docPath: /var/mobile/Applications/07B8574A-A3BA-4B23-BB3F-995B33A01B95/Documents/Oct_08_2012_10_00_51.mp4
2012-10-08 13:14:43.907 Voto[11968:907] content URL: file://localhost/var/mobile/Applications/07B8574A-A3BA-4B23-BB3F-995B33A01B95/Voto.app/Oct_08_2012_10_00_51.mp4
2012-10-08 13:14:44.265 Voto[11968:907] doc URL: /var/mobile/Applications/07B8574A-A3BA-4B23-BB3F-995B33A01B95/Documents/Oct_08_2012_10_00_51.mp4
2012-10-08 13:14:45.343 Voto[11968:907] [MPAVController] Autoplay: Disabling autoplay for pause
2012-10-08 13:14:45.344 Voto[11968:907] [MPAVController] Autoplay: Disabling autoplay
2012-10-08 13:14:46.518 Voto[11968:907] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 1, on player: 0)
2012-10-08 13:14:46.540 Voto[11968:907] [MPAVController] Autoplay: Enabling autoplay
2012-10-08 13:14:46.554 Voto[11968:907] [MPAVController] Autoplay: Likely to keep up or full buffer: 0
2012-10-08 13:14:46.555 Voto[11968:907] [MPAVController] Autoplay: Skipping autoplay, not enough buffered to keep up.
2012-10-08 13:14:46.557 Voto[11968:907] [MPAVController] Autoplay: Enabling autoplay
2012-10-08 13:14:46.567 Voto[11968:907] [MPCloudAssetDownloadController] Prioritization requested for media item ID: 0
2012-10-08 13:14:46.871 Voto[11968:907] [MPAVController] Autoplay: Enabling autoplay 
```

所以，该文件存在......我看过的问题：

[MPMoviePlayer 加载和播放保存在应用文档中的电影](https://stackoverflow.com/questions/3945121/mpmovieplayer-load-and-play-movie-saved-in-app-documents)

[MPMoviePlayerController 不适用于文档文件夹中的电影](https://stackoverflow.com/questions/8984390/mpmovieplayercontroller-does-not-work-with-movie-in-documents-folder)

[MPMoviePlayerViewController 从 Documents 目录播放电影-objective-c](https://stackoverflow.com/questions/7520437/mpmovieplayerviewcontroller-play-movie-from-documents-directory-objective-c)

我还检查了类参考，没有关于从 Documents 播放的具体内容。我的项目设置：使用最新的 iOS 6，部署目标 5.0 在 iOS6 iPhone 模拟器和带有 iOS 6 的 iPad 上测试。如果我忘记添加一些东西，请提醒我，我会立即做。

请帮忙！:)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-08T10:28:03.717

好吧，您没有以正确的方式构建文件 URL，您应该这样做：

```
NSString *docPath = [NSSearchPathForDirectoriesInDomains
                     (NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *docaPathFull = [docPath stringByAppendingPathComponent:@"/Oct_08_2012_10_00_51.mp4"];
NSURL *docUrl= [NSURL fileURLWithPath:docaPathFull]; 
```

`stringByAppendingPathComponent`您应该使用以下方法将目录和文件添加到路径`NSString`；同样在创建文件 URL 时使用`fileURLWithPath:`on `NSURL`，这将为给定路径创建一个正确的 NSURL。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-03-26T12:52:26.710

每个人最常犯的错误就是都使用

```
NSURL *fileURL = [NSURL URLWithString:mVidPath];
                        ^^^^^^^^^^^^^ 
```

代替

```
NSURL *fileURL = [NSURL fileURLWithPath:mVidPath];
                        ^^^^^^^^^^^^^^^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-29T11:11:46.700

```
-(IBAction)playVideo
{
NSURL *vedioURL;
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSArray *filePathsArray = [[NSFileManager defaultManager] subpathsOfDirectoryAtPath:documentsDirectory  error:nil];
NSLog(@"files array %@", filePathsArray);        
NSString *fullpath;
for ( NSString *apath in filePathsArray )
{
    fullpath = [documentsDirectory stringByAppendingPathComponent:apath];       
    vedioURL =[NSURL fileURLWithPath:fullpath];
}
NSLog(@"vurl %@",vedioURL);
MPMoviePlayerViewController *player = [[MPMoviePlayerViewController alloc] initWithContentURL:vedioURL];
[player.view setFrame: self.view.bounds];
[player.moviePlayer prepareToPlay];
[self.view addSubview:player.view];
player.moviePlayer.controlStyle = MPMovieControlStyleDefault;
player.moviePlayer.shouldAutoplay = YES;
[player.moviePlayer setFullscreen:YES animated:YES];
[player.moviePlayer play];
[self presentMoviePlayerViewControllerAnimated: player];
} 
```

不要忘记在各自的代码中添加 MediaPlayer.framework 和 #import < MediaPlayer/MediaPlayer.h>。祝你好运！！！

# javascript - 从一个 html 页面导航到另一个页面，但将它们都保存在内存中

> ID：12779687
> 
> 赞同：0
> 
> 时间：2012-10-08T10:17:54.857
> 
> 标签：javascript, html, javascript-events

通常，html 导航会释放第一个 html 页面并加载另一个。但我希望从一个 html 页面导航到另一个页面，但将它们都保存在内存中，因此我可以应用文档消息。

可能吗？

欢迎任何评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:41:25.430

你可以尝试使用标签

[http://www.w3.org/Style/Examples/007/target.en.html#tab1](http://www.w3.org/Style/Examples/007/target.en.html#tab1)

将每个页面的内容放在一个单独的选项卡 div 中，并使用格式/导航来模拟页面之间的移动，以使用户看起来他们正在导航页面，但实际上是在单个页面中切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:37:32.153

如果你想使用消息（onmessage、postMessage），你可以使用帧，具体来说是 iframe。一个带有两个 iframe 窗口的父窗口，它们可以使用 onmessege 和 postMessege 相互通信（也可以通过不同的域，因此不适用同源策略）。如果两个 iframe 没有从同一个域加载页面，您将无法访问窗口/DOM

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:37:00.417

是和不是。

不，您不能更改页面并将旧页面保留在内存中。

是的，您可以将当前的 window.document 存储到一个变量中，然后使用通过 AJAX 从另一个页面加载的内容覆盖整个页面。

但是，此方法不会真正加载新页面。url 不变，title 不变，实际上只有 DOM 会更新。

# mysql - MySQL触发器在插入后更新值

> ID：12779690
> 
> 赞同：1
> 
> 时间：2012-10-08T10:18:07.587
> 
> 标签：mysql, triggers

```
create table Test1
(
WRO varchar(10),
Test_No varchar(10),
TestDate datetime
);

insert into Test1(WRO,TestDate) values('T0001',now());
create table Test2
(
WRO varchar(10),
Test_No varchar(10),
Test2Date datetime,
TestAmount varchar(10)
); 
```

我必须`Test1` `Test_No`在插入`Test2`表后更新，`Test_No`两者都有共同的字段`WRO`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:25:28.680

Try the following,

```
delimiter |    

CREATE TRIGGER after_insert AFTER INSERT ON Test_2
    FOR EACH ROW BEGIN
    UPDATE Test_1 SET Test_1.Test_No = Test_2.Test_No WHERE <YOUR CONDITION>
END;

| 
```

make sure you edit WHERE to match your condition

you may also want to consult [here](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html) to get better understanding on triggers

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:41:56.697

```
delimiter |
CREATE
    TRIGGER trigger1 
     AFTER INSERT ON test2
    FOR EACH ROW BEGIN
     UPDATE test1 SET test1.Test_No=new.Test_no where test1.WRO=new.WRO;    
    END;
    | 
```

# caching - IOS6 网络应用程序 - 主屏幕应用程序不刷新

> ID：12779704
> 
> 赞同：2
> 
> 时间：2012-10-08T10:18:47.940
> 
> 标签：caching, web-applications, geolocation, ios6, homescreen

我写这篇文章是关于 IOS 6 的臭名昭著的问题，其中网络应用程序中的地理位置经常中断。唯一的解决方案是从解决此问题的索引中删除该 `<meta name="apple-mobile-web-app-capable" content="yes" />` 行，因为它会导致 Web 应用程序成为常规浏览器应用程序。我遇到的问题是，即使使用此解决方案，所有当前安装的主屏幕应用程序仍然无法正常工作（使用旧索引），并且只有在主屏幕中再次安装 Web 应用程序时，该解决方案才有效。这里到底有什么问题？以前的主屏幕应用程序是否缓存索引？有没有办法解决这个问题？

谢谢

# sympy - 同情解决给出错误的结果

> ID：12779705
> 
> 赞同：3
> 
> 时间：2012-10-08T10:18:52.407
> 
> 标签：sympy

`sympy.solve()`似乎给了我一个错误的结果。不等式存在已知问题，例如[http://code.google.com/p/sympy/issues/detail?id=3244](http://code.google.com/p/sympy/issues/detail?id=3244)但这很简单，它应该可以工作：

```
 import sympy
    from sympy.abc import x, u, s
    t1 = x*(1 - x)/(1 - s*x)
    t2 = u*x + (1-s)*(1 - u)*x*(1 - x)/(1 - s*x)
    sympy.solve(t1-t2,x) 
```

给了我3个解决方案。应该只有两个，第一个是错误的。这是一个错误还是我在某个地方犯了错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T03:57:29.497

这已在 SymPy 的开发版本（以及 0.7.2，将在大约一周后发布）中得到修复。它现在给出`[0, s*(u - 1)/(2*s*u - s - u)]`.

因此，要回答您的问题，是的，这是一个错误，并且已修复。

关于之前出了什么问题，我过去常常`git bisect`缩小[解决问题的提交](https://github.com/sympy/sympy/commit/e6f98b2e00906717d8f879196fffbe33432d8f5a)范围。该提交只是改变了 SymPy 中一种基本简化算法的`as_numer_denom`工作方式。所以我猜发生的事情是一些中间操作的结果很简单，`solve()`能够识别出错误的解决方案只是`1/s`（假设平方根嵌套）。 `solve()`确实通过重新插入来检查找到的解决方案，但是如果它们太复杂，它将无法判断它们是否是伪造的。

可能实际上发生了什么，现在我看起来更近了一点`(t1 - t2).as_numer_denom()[0]`，它解决了使用（因为表达式的零点只是分子的零点），在 0.7.2 中只有 2 度`x`，而在 0.7.1它的度数为 3。虚假的解决方案来自这个“假零”（这意味着它也是分母的零），正如我所指出的，解决方案太复杂以至于无法注意到它。

在没有深入研究代码的情况下，这是我能说的最好的。

# c# - 用 C# 构建类库项目

> ID：12779708
> 
> 赞同：0
> 
> 时间：2012-10-08T10:19:03.790
> 
> 标签：c#, asp.net, .net, class-library, typelib

我正在处理现有的 c# 类库项目。我想为它添加更多课程。然后将其用于新项目。我已将所需的类添加到现有的 typelib 项目中，但是当我在下一个项目中引用 typelib 并尝试访问新添加的方法时，它显示错误

> 名称空间 xyz.TypeLib.core 中不存在类型或名称空间名称“abc”（您是否缺少程序集引用）

但我可以访问该项目中以前存在的所有类。我对新添加的文件有疑问。

这是我做的步骤，

> 1.  向现有项目添加了新类。
> 2.  构建项目
> 3.  将 dll 从类库项目的 bin 文件夹添加到下一个项目

**此外，作为测试，我还尝试在我可以访问的一个类中添加一个新方法，但这个方法不可用！**

我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:47:24.710

1.) 确保您已将正确的 DLL 添加到项目中。因此，清理库项目、构建它并使用该 DLL。

2.）（这很可能是问题所在）：在 Visual Studio 中，单击 DLL 并在属性中，确保将“复制到输出目录”设置为“如果较新则复制”。

3.) 重新添加对文件的引用。

4.）清理然后再次构建使用该库的新项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-22T07:29:20.190

如果两个项目在同一个 Visual Studio 解决方案中，正确的做法是直接添加类库项目作为引用。这将绕过可能`dll`由其他方法引起的任何可能的不匹配。

# jquery - 缩略图图库 jquery

> ID：12779713
> 
> 赞同：1
> 
> 时间：2012-10-08T10:19:33.583
> 
> 标签：jquery, jquery-selectors, image-gallery

我正在尝试制作拇指画廊。
**结构体：**

*   一个显示大图像的容器
*   另一个容器有 3 个以上的组，每个组有 3 个单选按钮选项。
*   在从单选按钮中选择任何选项时，相应的图像应显示在大容器中。
*   通过从每个组中选择三个选项中的任何一个，图像应显示在大容器中，但所有图像都应保留在容器本身中。
    我已经在 jquery[参考](http://jsfiddle.net/FJqEL/3/)中尝试过这个，因为我是一个初学者，任何人都可以提出正确的方法。

![在此处输入图像描述](../Images/3fc61cffc13bcc6e9d45253439464041.png)

拇指图像来自“/images/thumbs”文件夹
大图像来自“images/big”文件夹

# javascript - NicEdit - 解除绑定事件

> ID：12779717
> 
> 赞同：0
> 
> 时间：2012-10-08T10:19:49.123
> 
> 标签：javascript, jquery-events, nicedit

我决定在一个项目中使用 NicEdit，因为它是轻量级的。

所以，现在我的页面中有可变数量的实例，在点击时加载并在编辑器模糊时删除。

我需要知道如何从这个组件中解除绑定事件。我试图手动解除绑定，但我不明白它们的链接位置！

```
$('.container').bind('click', function(){
    var _form = $(this).parentsUntil('form').parent();
    var textarea = _form.find('textarea.edit');
    var ta_id = textarea.attr('id');
    var ed = new nicEditor(niceditOptions).panelInstance(ta_id);

    // Show Preview and update textarea and so on
    ed.addEvent('blur', function() {
        var _ed = nicEditors.findEditor(ta_id);
        var ev_type, evt, events = this.eventList;

        for (ev_type in events){
            for (evt in ev_type){
                if (this.removeEventListener){
                    this.removeEventListener(ev_type, events[ev_type][evt]);
                }
                else {
                    this.detachEvent('on' + ev_type, events[ev_type][evt]);
                }
            }
        }
        this.removeInstance(ta_id);
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:47:59.913

可能有其他方法可以解决您的解决方案，但在这种情况下，我更喜欢使用nicEditor 面板的**一个版本并绑定我所有的所见即所得实例。**这样做的原因是我认为它稍微整洁一些。我假设您知道如何[将一个编辑器绑定到多个可编辑实例](http://nicedit.com/demos.php?demo=4)。

加载时，我的 HTML 可能看起来像这样：

```
<div id="instance1">text</div>
...
<div id="instance2">text</div>
...
<div id="myNicPanel" style="display:none;position:relative;"></div> 
```

所以，一旦页面完成了它的加载周期，我应该有两个可编辑区域和一个隐藏的编辑器。然后，我将使用以下jQuery重新定位并在选择实例以进行编辑时显示编辑器：

```
 $('#instance1 , #instance2').click(function () {
         //Reposition the editor to just above the selected instance
            $('#myNicPanel').css({
                top: $(this).position().top,
                left: $(this).position().left,
                display: 'block',
                width: $(this).width() - 2 //manual adjustment,
                position: 'absolute'
            });
         //Make the width of the editor equal to that of the instance
            $('#myNicPanel').css({
                top: $(this).position().top - $('#myNicPanel').height()
            });
        }); 
```

您当然已经在此之前启动了您的编辑器和实例，如果您还想让编辑器在模糊时再次隐藏，您可以将您的`hide()`函数附加到[nicEditor 事件](http://wiki.nicedit.com/w/page/518/Editor%20Events)之一。

# web-services - playframework 中 CRUD 的 Web 服务

> ID：12779719
> 
> 赞同：0
> 
> 时间：2012-10-08T10:19:58.640
> 
> 标签：web-services, scala, playframework-2.0

我和一些朋友打算开发一个带有 playframework 和移动应用程序（android 和 iphone）的网站。所以我们需要为移动应用程序（CRUD）制作一些网络服务。所以我们考虑在我们的 playframework 应用程序中使用这个 Web 服务，而不是浪费时间和创建 CRUD `anorm`（编写所有 sql 请求）。

好吧，我是来征求你的意见的。这是一件好事吗？这里最好的建议方法是什么？

谢谢你。

PS：Web 服务是使用我们数据库中的 Netbeans 自动生成的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T18:37:02.963

我建议反对这种方法的原因有很多。

一般的设计规则是不要向用户公开您的内部数据模型。这条规则有多种形式，其中分层架构可能是最广为人知的一种。

详细会出现以下问题：

1.  调整性能：这很难实现，因为您对生成的 Web 服务没有或没有太多控制权。当您的应用程序真正采用时，您将受到此限制
2.  访问服务：我不知道你是生成 RESTful Web 服务还是 WS-* 的。后者在通过 iphone 访问它们时会给您带来麻烦。
3.  设计 Play 与同步 Web 服务：与性能相关的还有一个问题，即生成的服务可能是同步的、阻塞的，这与 play 框架所采用的非阻塞方法不太匹配。
4.  抽象级别：因为您的数据库是基于集合的，但您的业务模型可能不是，所以您将在开发一个体面的客户端、调整性能、进行适当的验证、安全性等方面遇到问题。
5.  身份验证、授权和记帐：很难做到，因为数据库只知道数据库系统用户
6.  改变：如果你改变你的数据库模型怎么办？生成的服务会继续工作吗？如果您只是添加一列，您是否有采纳他们的事件？
7.  ...

其中一些原因确实重叠，但我认为一般问题应该很清楚。

我会推荐以下方法，而不是这种方法。为您的应用程序开发一个 RESTfull 端点，这并不难。这是客户应该开发的外部合同。[例如， play-mini](https://github.com/typesafehub/play2-mini)非常需要基于未过滤的 API 来执行此操作。在执行此操作时，请专注于您的应用真正需要的操作。在考虑生产就绪软件时，CRUD 通常是一个糟糕的模型。

如何访问数据库是您必须做出的另一个决定，但可能并不那么重要，因为它不是您的外部合同，因此您可以在需要时更改它。

# google-chrome - 带有 iframe 的 Chrome 扩展：域、协议和端口必须匹配

> ID：12779720
> 
> 赞同：1
> 
> 时间：2012-10-08T10:20:00.043
> 
> 标签：google-chrome, iframe, cross-domain, content-security-policy

Manifesto 版本 2 和他的新 content_security_policy 现在是 chrome 扩展所必需的。我阅读了一些关于“沙盒模式”的文档，这似乎是内联 JavaScript 的一种解决方法，但我仍然有一个大问题。

经过一些重构后，我收到以下错误：“不安全的 JavaScript 尝试从具有 URL chrome-extension://mafcgphdkdbjlngfndodameheehmfhac/DCE24DB153A80B735442BF97F168AE6C.cache.html 的框架访问具有 URL chrome-extension://mafcgphdkdbjlngfndodameheehmfhac/eventpage.html 的框架。域，协议和端口必须匹配。”

我不明白为什么来自同一扩展名的 2 个文件没有相同的“域、协议和端口”！

注意：这是我的宣言的一部分：

```
"permissions": [
        "http://*/",
        "tabs"
    ],
  "background": {
    "page": "eventpage.html",
    "persistent": false
  },
  "sandbox": {
    "pages": [
        "sandbox.html",
        "DCE24DB153A80B735442BF97F168AE6C.cache.html"
    ]
  }
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:16:48.093

沙盒页面被允许绕过扩展的内容安全策略，部分原因是沙盒强制它们进入一个唯一的来源。他们无法访问扩展的特殊 API，也无法获取其数据。

[http://developer.chrome.com/trunk/extensions/sandboxingEval.html](http://developer.chrome.com/trunk/extensions/sandboxingEval.html)提供了我们建议您对沙盒页面使用的工作流程的描述。简而言之，您需要将框架与其父级之间的直接访问替换为`postMessage`基于 - 的通信。

# node.js - 限制 node.js 的内存使用

> ID：12779724
> 
> 赞同：18
> 
> 时间：2012-10-08T10:20:11.923
> 
> 标签：node.js, memory, ram

我正在尝试限制`node.js`应用程序使用大量内存，并且我发现了V8 中可以在调用文件时传递的`--max-stack-size`&选项，但是我应该如何结合这些和可能的其他参数来限制最大内存使用量`--max_executable_size`1GB？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-08T15:00:07.703

[https://github.com/joyent/node/wiki/FAQ](https://github.com/joyent/node/wiki/FAQ)

> 节点进程的内存限制是多少？
> 
> 目前，默认情况下，v8 在 32 位系统上的内存限制为 512mb，在 64 位系统上为 1gb。可以通过将 --max_old_space_size 设置为最大 ~1gb（32 位）和 ~1.7gb（64 位）来提高限制，但如果您遇到内存限制，建议您将单个进程拆分为多个工作程序.

我相信，价值以兆字节为单位。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-01-22T13:08:30.550

现在是，`--max-old-space-size`没有技术限制...

例如`node --max-old-space-size=8192 ./app`。*我们在8Gb*中创建限制

# jquery - jquery 创建登录框对话框安全连接

> ID：12779727
> 
> 赞同：0
> 
> 时间：2012-10-08T10:20:18.520
> 
> 标签：jquery, html, sharepoint

我正在使用 jquery 和 html 处理 sharepoint
我必须创建一个登录框窗口，我必须在其中输入用户名和密码
我在网上找到了很多教程：
[http ://www.alessioatzeni.com/blog/login-box -modal-dialog-window-with-css-and-jquery/#blog](http://www.alessioatzeni.com/blog/login-box-modal-dialog-window-with-css-and-jquery/#blog)

[http://buckwilson.me/lightboxme/#](http://buckwilson.me/lightboxme/#)

我的问题是：
我不需要连接到数据库
我只有一个用户名和一个密码
，所以我怎样才能以安全的方式做到这一点，所以我们只能使用用户名和密码访问
我感谢所有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:00:57.450

我没有添加评论所需的代表，所以这里有一个“答案”。（点燃火焰）

您是否正在构建此自定义登录模式来对用户进行身份验证，以便他们可以访问 SharePoint 网站？如果用户能够访问您的自定义组件所在的 SharePoint 页面，那么用户已经通过身份验证是理所当然的，但我想我还是会问。如果您*要向*SharePoint 验证此用户，那么您必须使用 FBA（基于表单的身份验证），在这种情况下，您可能正在利用自定义成员资格提供程序……这几乎肯定会命中某种数据源。

您提到您没有使用这些凭据访问数据库；另一个资源呢，也许是 Web 服务？如果您所做的只是捕获和审查一组预定义的凭据，那么在我看来，安全要求更多地与您存储用于审查用户输入的凭据的位置以及当用户单击“签名”时如何检索它们有关在，“对吗？如果是这样，这就是我的想法（假设正在部署自定义解决方案）：

*   将凭据作为应用程序设置存储在 web.config 中。只有场管理员有权访问 web.config 文件。在验证用户输入之前，您需要在回发时运行一些提升的代码来检索应用程序设置值。
*   将凭据存储在隐藏且安全的列表中；在回发时运行提升的代码以从列表中检索凭据并进行比较。

如有必要，您还可以在这两种情况中的任何一种情况下使用自己的加密。

# jquery - jQuery 循环和标题图像

> ID：12779729
> 
> 赞同：2
> 
> 时间：2012-10-08T10:20:21.187
> 
> 标签：jquery, jcycle

我需要帮助，我想在旋转图像时更改 div 中的标题。

```
$('.pics').cycle({
fx:     'fade',
timeout: 6000,
after:   function() {
    var title = $('.image').attr('alt');
    $('.image_title').html(title);
}
}); 
```

……

```
<div class="pics"> 
<img src="01.jpg" alt="Picture 1" class="image"/>
    <img src="02.jpg" alt="Picture 2" class="image"/>
    <img src="03.jpg" alt="Picture 3" class="image"/>
</div>
<div class="image_title"></div> 
```

但这不起作用，它只显示第一个属性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:32:01.900

我相信您唯一需要更改的是使用`$(this)`关键字来引用当前图像项。

```
after:   function() {
    var title = $(this).attr('alt');
    $('.image_title').html(title);
} 
```

每次执行时`$('.image').attr('alt');`，你得到的只是`alt`第一个匹配选择器的元素的属性。`$('.image')`可以很好地匹配您页面上的多个元素。

# linux - 在 RHEL v5 64 位中为 CentOS 安装 DRBD 二进制包

> ID：12779735
> 
> 赞同：0
> 
> 时间：2012-10-08T10:20:43.273
> 
> 标签：linux, linux-kernel, rhel, drbd

我想问一下，我在 RHEL v5 上安装了 CentOS 的 DRBD 二进制包，有 2 个文件。

1.drbd83-8.3.13-2.el5.centos.x86_64.rpm 2.kmod
-drbd83-8.3.13-1.el5.centos.x86_64.rpm

首先我使用 执行**drbd83-8.3.13-2.el5.centos.x86_64.rpm**文件`rpm -i <filename>`，然后我使用相同的命令执行**kmod-drbd83-8.3.13-1.el5.centos.x86_64.rpm**文件，但第二个操作给出以下输出：

```
error: Failed dependencies:
        kernel(rhel5_lib_u6) = aab649531cab69cbeff5665f2aef9e0dba844b20 is needed by kmod-drbd83-8.3.13-1.el5.centos.x86_64 
```

所以我必须做什么？我知道，它需要的依赖文件名为**aab649531cab69cbeff5665f2aef9e0dba844b20**，但我知道什么是**aab649531cab69cbeff5665f2aef9e0dba844b20**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:33:04.240

该错误表明您安装的内核 DRBD 模块（驱动程序）不是为您拥有的内核版本构建的。内核版本可以使用

```
rpm -qa | grep kernel 
```

确保您已更新您的 Centos 系统（使用 'yum update'）并且您拥有最后一个相关的 kmod-drbd。

在 Centos 软件包存储库中，我可以看到有[一个比你的更新的 drbd-kmod 版本](http://mirror.centos.org/centos/5/extras/x86_64/RPMS/)

# java - 成功编组后无法解组 \u0000

> ID：12779742
> 
> 赞同：11
> 
> 时间：2012-10-08T10:21:19.843
> 
> 标签：java, xml, unicode, jaxb

我在 UTF-8 ( )中有一个`String`包含二进制文件的二进制文件。JAXB 愉快地编组包含此类字符的 XML 文档，但随后无法解组：`0``"A\u0000B"`

```
final JAXBContext jaxbContext = JAXBContext.newInstance(Root.class);
final Marshaller marshaller = jaxbContext.createMarshaller();
final Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();

Root root = new Root();
root.value = "A\u0000B";

final ByteArrayOutputStream os = new ByteArrayOutputStream();
marshaller.marshal(root, os);

unmarshaller.unmarshal(new ByteArrayInputStream(os.toByteArray())); 
```

根类很简单：

```
@XmlRootElement
class Root { @XmlValue String value; } 
```

输出 XML 包含和之间的二进制以及`0`（十六进制：），这会在解组期间导致以下错误：`A``B``41 00 42`

```
org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 63; 
An invalid XML character (Unicode: 0x0) was found in the element content of the document. 
```

有趣的是，使用原始 DOM API ( [example](https://gist.github.com/3851796) ) 会产生 escaped `0`:`A&#0;B`但尝试读回它会产生类似的错误。此外，任何 XML 解析器或（另请参见：[Python + Expat: Error on entity](https://stackoverflow.com/questions/3038798)`0` ）都不允许（二进制或转义）。`xmllint`

## 我的问题：

*   为什么 JAXB/DOM API 允许创建无法读取的*无效XML 文档？*它不应该在编组期间快速失败吗？

*   有一些优雅的全球解决方案吗？我看到人们通过以下方式解决这个问题：

    *   [手动忽略输入中的特殊字符](http://blog.mark-mclaren.info/2007/02/invalid-xml-characters-when-valid-utf8_5873.html)

    *   [拦截传入的流](http://blog.lesc.se/2009/03/escape-illegal-characters-with-jaxb-xml.html)甚至

    *   [实现一些内部`com.sun.xml.internal.bind.marshaller.CharacterEscapeHandler`类](https://stackoverflow.com/a/10312400/605744)

但是，Java 中成熟的 XML 堆栈（我使用的是 1.7.0_05）不应该默认或通过一些简单的设置来处理这个问题吗？我正在寻找转义、忽略或快速失败 - 但生成无效 XML 的默认行为是不可接受的。我相信这样的基本功能不需要在客户端进行任何额外的编码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T10:42:45.403

> 为什么 JAXB/DOM API 允许创建无法读取的无效 XML 文档？它不应该在编组期间快速失败吗？

1.  您需要询问实施者。

2.  他们可能认为检查每个序列化的数据字符的费用是不合理的......特别是如果解析器随后将再次检查它们。

3.  决定以这种方式实现序列化程序（或者只是错误地这样做），如果他们随后更改行为以默认进行严格检查，他们将破坏依赖于能够序列化非法 XML 的现有代码。

> 但是，Java 中成熟的 XML 堆栈（我使用的是 1.7.0_05）不应该默认或通过一些简单的设置来处理这个问题吗？

不一定...如果您接受上述原因＃2。即使是简单的设置也会对性能产生可衡量的影响。

* * *

> 此外，任何 XML 解析器或 xmllint 都不允许 0（既不是二进制也不是转义）...

完全正确！XML 规范禁止这样做。

然而，一个更有趣的测试是看看当您尝试使用其他 XML 堆栈生成包含非法字符的 XML 时会发生什么。

* * *

> 有一些优雅的全球解决方案吗？

如果您要解决的问题是如何发送`\u0000`or ，那么您需要在将字符串插入 DOM*之前*`\u000B`对字符串应用一些特定于应用程序的编码。而另一端需要部署等效解码。

 *如果您要解决的问题是如何在为时已晚之前检测到错误数据，您可以在序列化器和最终输出流之间使用输出流过滤器来做到这一点。但是，如果您检测到错误，就没有好的（即对 XML 使用者透明）方法来修复它。*

# javascript - 使用 JavaScript 显示/隐藏表单的某些部分。如何一次只显示一个部分？

> ID：12779747
> 
> 赞同：3
> 
> 时间：2012-10-08T10:21:30.870
> 
> 标签：javascript, jquery, forms, show-hide, jquery-events

我有以下设置：

```
<form action="?" method="post" name="contactform">

<div class="question">
    <p><span><input type="radio" name="answer" value="Yes" onclick="showHide('one')"/></span> Yes</p>
</div>
<div id="one" class="answers" style="display:none">
    <p><input type="radio" name="answerdetail" value="Reason One" /> Reason One</p>
    <p><input type="radio" name="answerdetail" value="Reason Two" /> Reason Two</p>
    <p><input type="radio" name="answerdetail" value="Reason Three" /> Reason Three</p>
</div><!-- end answers -->

<div class="question">
    <p><span><input type="radio" name="answer" value="No" onclick="showHide('two')"/></span> No</p>
</div>
<div id="two" class="answers" style="display:none">
    <p><input type="radio" name="answerdetail" value="Reason One" /> Reason One</p>
    <p><input type="radio" name="answerdetail" value="Reason Two" /> Reason Two</p>
    <p><input type="radio" name="answerdetail" value="Reason Three" /> Reason Three</p>
    <p><input type="radio" name="answerdetail" value="Reason Four" /> Reason Four</p>
</div><!-- end answers -->

<div class="question">
    <p><span><input type="radio" name="answer" value="Not sure" /></span> Not sure</p>
</div> 
```

当您第一次看到表单时，只有 3 个复选框可见（是、否、不确定）。当您单击“是”时，会出现“是”的子复选框，如果您单击“否”，则会出现“否”的子复选框。

我想知道是否可以一次只显示一组子复选框？

即，如果有人选中“是”，则会出现“是”的子复选框。如果他们随后改变主意并单击“否”，则“是”的子复选框会消失，而“否”的子复选框会出现（即，任何时候都只能看到一组子复选框）。

我希望这是有道理的。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T10:23:35.243

jQuery 有几个内置的方法应该对此很有用。您可以使用[`.hide()`](http://api.jquery.com/hide)/[`.show()`](http://api.jquery.com/show)切换元素的可见性。您可以使用 定位正确答案部分[`.next()`](http://api.jquery.com/next)。此外，要处理“更改”事件，您可以使用[`.change()`](http://api.jquery.com/change/)，每次用户选择不同的选项时都会触发处理程序：

```
$(document).ready(function() {
    $('input[name="answer"]').change(function() {
        $(".answers").hide();
        $('input[name="answer"]:checked')
            .closest(".question")
            .next(".answers")
            .show();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:48:32.843

以下是我将如何处理这个问题：

演示测试：http: [//jsfiddle.net/earthdesigner/UYWx8/](http://jsfiddle.net/earthdesigner/UYWx8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:52:11.733

鉴于您的 HTML，我能想到的最简单的方法：

```
$('input:radio').change(
    function(){
        $('.answers').slideUp();
        $(this).closest('div').next('.answers').slideDown();
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/rvapE/)。

参考：

*   [`closest()`](http://api.jquery.com/closest/).
*   [`next()`](http://api.jquery.com/next/).
*   [`slideDown()`](http://api.jquery.com/slideDown/).
*   [`slideUp()`](http://api.jquery.com/slideUp/).

# symfony - Doctrine2：跳过未设置的列

> ID：12779755
> 
> 赞同：1
> 
> 时间：2012-10-08T10:21:52.583
> 
> 标签：symfony, doctrine-orm

我有以下实体：

```
class Employee {

/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $employeeId;

/**
 * @ORM\Column(type="string", length=45, unique=true)
 */
protected $username;

/**
 * @ORM\Column(type="string", length=255, nullable=false)
 */
protected $email; 
```

我正在运行以下代码：

```
$employee = new Employee();
$employee->setUsername('test');

$em = $this->getDoctrine()->getManager();
$em->persist($employee);
$em->flush(); 
```

如您所见，我没有为电子邮件列设置值。

但坚持我得到：

SQLSTATE [23000]：违反完整性约束：1048 列“电子邮件”不能为空

因为 Doctrine 将所有实体列添加到 INSERT 查询并为电子邮件列设置空值。

有没有办法跳过插入时未设置的列？或者让Doctrine插入''（空字符串）作为非空字符串列的默认值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:16:28.970

您可以允许您的列是`null`，设置`nullable=true`：

```
/**
 * @ORM\Column(type="string", length=255, nullable=true)
 */
protected $email; 
```

这不会引发 SQL 错误。但是，如果您想保持一致，请使用[验证，以便您可以在持久性](http://symfony.com/doc/current/book/validation.html)*之前*处理空字段：

```
use Symfony\Component\Validator\Constraints as Assert;

...

/**
 * @Assert\NotBlank()
 * @ORM\Column(type="string", length=255)
 */
protected $email; 
```

这样，您可以以更具体的方式处理验证错误，例如文档中所述：

```
$author = new Author();
// ... do something to the $author object

$validator = $this->get('validator');
$errors = $validator->validate($author);

if (count($errors) > 0) {
    return new Response(print_r($errors, true));
} else {
    return new Response('The author is valid! Yes!');
} 
```

如果您只想要列的普通默认值，[请查看此问题](https://stackoverflow.com/questions/3376881/default-value-in-doctrine)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:28:04.553

我似乎只需要使用实体 __construct 来设置默认值：

```
__construct() {
    $this->email = '';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T11:00:00.040

这是您的数据模型而不是教义的问题。您明确声明每条记录都应在电子邮件列中具有某些值。因此，要么从实体中删除 NOT NULL 约束，要么只是在电子邮件列上设置一些值。在这种情况下，教义只是做你告诉它去做的事情。

# asp.net - 将 HTTPS 与 IIS 和 ASP.NET 结合使用

> ID：12779756
> 
> 赞同：1
> 
> 时间：2012-10-08T10:21:52.640
> 
> 标签：asp.net, ssl, iis-7, https, ssl-certificate

我正在使用 ASP.NET 和 IIS Web 服务器。我想在我的网站上使用 HTTPS 协议。在我的 IIS Web 服务器中，我使用以下过程将我的网站绑定到端口 443：

1.  打开 IIS

2.  选择我要配置的站点（在我的情况下为“我的测试站点”）

3.  单击窗口右侧的绑定

4.  在新窗口中，我删除了 http，并添加了 https（IIS 向您询问我之前创建的证书文件）

5.  点击确定

6.  单击 IIS 窗口右侧的浏览

我现在使用 HTTPS，我的所有数据都加密了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:27:06.683

它应该是。但是，为确保数据已加密，您可以进行进一步检查。

在浏览器中打开该站点，如果您使用的是 Firefox，您应该会在地址栏附近看到一个绿色标签，在 Internet Explorer 上，您会看到一个锁定标志 - 简而言之，会有某种安全信息。打开它并检查它。它将显示证书的状态，还会显示该站点是否受保护。

这是客户端的最终测试。如果您安装了可以验证的正确证书，则会说该站点受到保护，否则会说数据已加密但证书无效 - 一种安全异常。

# ruby-on-rails - 在 RAILS 中单击后退按钮时禁用 Flash 消息而不禁用缓存

> ID：12779759
> 
> 赞同：2
> 
> 时间：2012-10-08T10:22:20.090
> 
> 标签：ruby-on-rails, ruby

我有一个用 Rails 编写的应用程序。我有显示用户说他成功登录或创建或更新他的个人资料的闪烁消息。一旦用户登录，就会显示一条 Flash 消息（“欢迎”）并且用户导航到不同的页面。如果用户单击 BACK 按钮，则再次显示 Flash 消息（“Welcome”）。

我不想禁用缓存，因为它会影响性能。

解决这种情况的任何想法都会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-29T13:33:12.997

这适用于通过搜索引擎提出这个问题的人。

**问题**

当用户单击后退按钮时，不会向服务器发出新请求，而是显示浏览器的缓存副本。但是，在第一次请求期间，浏览器已经缓存了 flash 消息，并且在单击返回按钮时，flash 消息会再次显示。

**解决方案**

解决此问题的一种方法是使用浏览器的 localStorage 或 sessionStorage。

更改您的代码，以便通过 javascript 显示或隐藏 Flash 消息。当显示 flash 消息时，将该事实存储在浏览器的 sessionStorage 中。下次，检查是否已经显示了 flash 消息，如果是，则不要再次显示。

我更喜欢使用 sessionStorage 而不是 localStorage，因为 sessionStorage 在关闭浏览器时会被清理。如果您有太多的 Flash 消息，这将很有帮助。否则，您将不得不编写删除旧条目的逻辑

```
# app/views/layouts/application.html.erb - or wherever your flash messages reside

...
<% 
  flash_name_mappings = {
    "notice" => "success",
    "error" => "danger",
    "alert" => "warning"
  }
%>

<% flash.each do |name, msg| %>
  <% if msg.is_a?(String) %>
    <% flash_token = Time.current.to_s(:number) # or use any other random token generator, like Devise.friendly_token %>

    <div id="flash-<%= flash_token %>" style="display:none" class="alert alert-<%= flash_name_mappings[name] || name  %>">
      <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
      <%= content_tag :div, msg.html_safe, id: "flash_#{name}" %>
    </div>

    <script type="text/javascript">
      $(document).ready(function(){
        if (typeof(Storage) !== "undefined") {
          // Code for localStorage/sessionStorage.
          if(sessionStorage["flash-<%= flash_token %>"] != "shown"){
            $("#flash-<%= flash_token %>").show();
            sessionStorage["flash-<%= flash_token %>"] = "shown";
          }
        } else {
          // Sorry! No Web Storage support..
          $("#flash-<%= flash_token %>").show();
        }
      }
    </script>
  <% end %>
<% end %>

... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:40:49.003

尝试改用 Flash.now：

```
flash.now[:notice] = "Welcome" 
```

与 flash 方法相比，它仅在执行下一个操作之前显示消息。显示正常的闪烁消息，直到下一个请求发送到服务器。我希望它有所帮助。

# jquery - 尝试使用添加类模拟切换功能

> ID：12779766
> 
> 赞同：1
> 
> 时间：2012-10-08T10:22:34.140
> 
> 标签：jquery, jquery-animate

我动态创建一个 div 并将这个动态 div 添加到另一个 div 中。我试图为 div 设置动画，并使用添加/删除类和 hasclass 函数来获得某种切换功能。但我的代码不能正常工作。看看这部分，告诉我有什么问题。

```
if(oDiv.hasClass('test')) {
return oDiv.animate({ opacity: 'toggle', marginTop:('-' + allChildDivHeight + 'px')    },  speed, easing, callback);
$oDiv.removeClass('test');        
    }
    else
    {

 return oDiv.animate({ opacity: 'toggle', marginTop:('-' + (margin_top+allChildDivHeight )+ 'px') }, speed, easing, callback);
 oDiv.addClass('test');

    } 
```

我可以使用 jquery 切换功能来产生这种效果吗

```
$('.btnName').click(function() {
$('#panel').toggle(function() {
$(this).animate({ 
 // style change
}, 500);
},
function() {
$(this).animate({ 
 // style change back
}, 500);
}); 
```

上面的代码只是一个示例。我只需要知道我可以使用类似具有切换功能的东西。

我用切换的方式写了它，但仍然无法正常工作

```
oDiv.toggle(function()
{
alert('class'+allChildDivHeight );
return oDiv.animate({ opacity: 'toggle', marginTop:('-' + allChildDivHeight + 'px') }, speed, easing, callback);

},function()
{
alert('no class'+(margin_top+allChildDivHeight));
return oDiv.animate({ opacity: 'toggle', marginTop:('-' + (margin_top+allChildDivHeight )+ 'px') }, speed, easing, callback);
}); 
```

请在最上面查看我的代码。完整的代码在这里[http://jsfiddle.net/tridip/PTdsz/8/](http://jsfiddle.net/tridip/PTdsz/8/)

请去那里查看我的完整代码并告诉我为什么总是控制进入这个如果 `if(oDiv.hasClass('test')) {}`

为什么删除类不起作用`$oDiv.removeClass('test');`

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:13:22.677

You are returning before you remove the class that's why!

Your `$oDiv.removeClass('test');` is never called see:

```
 if(oDiv.hasClass('test')) {
        alert('class'+allChildDivHeight );
        return oDiv.animate({ opacity: 'toggle', marginTop:('-' + allChildDivHeight + 'px') }, speed, easing, callback);
        $oDiv.removeClass('test');        <------ This is never called
    } 
```

Because you have a return in the line before.

# c# - 从任务调用 Messagebox.Show

> ID：12779768
> 
> 赞同：3
> 
> 时间：2012-10-08T10:22:37.557
> 
> 标签：c#, task-parallel-library

我刚刚在我们的代码库中以一种形式找到了这个 gem。我想我已经知道了这个问题的答案：我很确定在后台线程中调用 MessageBox.Show 是一个糟糕的主意，但是有人可以为我确认和澄清吗？

```
private void MainForm_FormClosing(object sender, FormClosingEventArgs e)
{
    if (_FileScanner.IsSending)
    {
        Trace("Cannot close form because: Transferring files.");
        e.Cancel = true;
        Task<DialogResult> t = Task.Factory.StartNew(() => MessageBox.Show("Transferring files"));
        return;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:31:40.957

这样做似乎几乎没有意义，实际上潜在的危险 - 考虑到繁重的工作实际上是使用任务在非 UI 阻塞线程上处理的（应该是这种情况），那么正是你想要的时间表单阻止输入（取决于要求，但无论对话模式如何，这仍然存在），直到您在 STAThread 上执行此操作时得到确认。

# ruby-on-rails - Rails 3，如何使用单个 check_box_tag 或 Confirm-/Refuse-Buttons 更新 habtm 关系

> ID：12779769
> 
> 赞同：1
> 
> 时间：2012-10-08T10:22:39.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3, checkbox, has-and-belongs-to-many, update-attributes

我有一个**habtm 模型**，例如：

```
class Recurrence < ActiveRecord::Base
  has_many :participations, :include => :user
  has_many :users, :through => :participations 
  accepts_nested_attributes_for :participations

  attr_accessible :scheduled_to, :user_id, :user_ids
end

class Participation < ActiveRecord::Base
  belongs_to :recurrence
  belongs_to :user

  attr_accessible :recurrence_id, :user_id
end

class User < ActiveRecord::Base
  has_many :participations, :dependent => :delete_all
  has_many :recurrences, :through => :participations
  accepts_nested_attributes_for :participations

  attr_accessible :name, :email, :phone, :recurrence_ids
end 
```

具有针对重复控制器的标准操作（索引、显示、新建、编辑、创建、更新、销毁）。

鉴于单个重复（/recurrences/10 -> show-action），我尝试创建/更新用户的参与。当我在提到的视图中执行以下操作时：

```
<%= form_for @recurrence do |f| %>
  <div class="checkbox">  
      <% for user in User.find(:all) %>  
        <div>
          <%= check_box_tag "recurrence[user_ids][]", user.id, @recurrence.users.include?(user) %>  
          <%= user.name %>
        </div>
      <% end %>
  </div>
  <div class="actions">
    <%= f.submit "Update", :class => 'btn btn-mini btn-primary'  %>
  </div>  
<% end %> 
```

一切正常，我可以添加或删除一个或多个用户的参与。

**但我喜欢这样做——只针对一个用户**，即 current_user！我尝试使用以下来源：

```
<%= form_for(@recurrence) do %>
  <%= check_box_tag "recurrence[user_id]", current_user.id, 
      @recurrence.users.include?(current_user) %>
  <%= current_user.name %> 
  <%= submit_tag "Update" %>
<% end %> 
```

哪个**不起作用**，更详细

*   更新未更改状态：不参与，不做任何事情：正确！
*   更改状态：从不参与 - 到参与，适用于 current_user，但也会删除其他用户的状态：错误！
*   改变状态：从参与到不参与，不会改变任何事情：错！

欢迎任何帮助！

最后，我想**将 Check-Box 减少为 Confirm-/Refuse-Buttons** with hidden-fields **for the** increasing ，但可能有更简单的rails-way？

# javascript - 打开两个窗口onClick按钮javascript

> ID：12779771
> 
> 赞同：1
> 
> 时间：2012-10-08T10:22:46.630
> 
> 标签：javascript, forms

我试图通过单击一个按钮打开两个不同的窗口，但是当我单击该按钮时，它会打开同一个窗口两次。这是我的功能：

```
function flush(form) {
    var custid = form.custid.value;
    var url1 = "https://www.blabla.com?type=customer&id="+custid;
    flushWindow1 = window.open(url1);
    var url2 = "https://web.blabla.com?type=customer&id="+custid;
    flushWindow2 = window.open(url2);
} 
```

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:27:34.007

尝试为 window.open() 方法提供第二个参数，即窗口的名称，如果名称不同，则相同的 url 将在不同的窗口中打开。例如

```
function flush(form) {
    var custid = form.custid.value;
    var url1 = "https://www.blabla.com?type=customer&id="+custid;
    flushWindow1 = window.open(url1,"flushWindow1");
    var url2 = "https://web.blabla.com?type=customer&id="+custid;
    flushWindow2 = window.open(url2,"flushWindow2");   
} 
```

[演示](http://jsfiddle.net/shSn8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:38:19.717

来自：[JSfiddle 点击两个窗口](http://jsfiddle.net/zaheerahmed/u2DBx/)

```
$('document').ready(function(){
    $('input').click(function(){
        window.open("https://www.google.com.pk/search?q=123&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a")
        window.open("https://www.google.com.pk/search?q=abc&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a")
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:42:22.180

尝试通过添加参数在新窗口/选项卡中打开`'_blank'`
，然后`window.focus();`在打开两个新窗口后通过放置在要聚焦的窗口后面来聚焦你想要的窗口

```
function flush(form) {
    var custid = form.custid.value;
    var url1 = "https://www.blabla.com?type=customer&id="+custid;
    flushWindow1 = window.open(url1, '_blank');
    var url2 = "https://web.blabla.com?type=customer&id="+custid;
    flushWindow2 = window.open(url2, '_blank');
    window.focus(); // focus on url2
} 
```

# wpf - Azure StorageClient 客户端超时

> ID：12779772
> 
> 赞同：2
> 
> 时间：2012-10-08T10:22:48.943
> 
> 标签：wpf, azure, timeout, storage, blob

提前感谢您的时间和帮助。

我正在使用 Azure 客户端库（即 CloudStorageAccount - CloudBlobClient - CloudBlob）在 WPF 应用程序中下载/上传 Blob。

我想在我的 WPF 客户端应用程序中设置一个超时会话以中止获取云 blob 的尝试。这与我可以在 blob 传输会话上设置的服务器端超时不同。我想这样做是因为将使用该应用程序的 Internet 连接具有非常不稳定的间歇性连接。

换句话说，我尝试在实际数据传输之前执行 BlobContainer.FetchAttributes 以检查 Internet 连接。如果没有连接，我不想在它超时并引发异常之前等待 90 多秒。

我已经尝试在 BlobRequestOptions 中设置超时，但这不起作用，因为它仅在我建立连接后才适用。

我是否理解错误的设置或者我需要设置/配置/代码以实现更快的超时？

我可以在 Fiddler 中看到 StorageClient 库在幕后使用 HTTP，根据我阅读的一些帖子，我尝试在 app.config 中设置超时，如下所示。这也不起作用。

```
<configuration>
  <system.web>
    <httpRuntime executionTimeout="5" />  
  </system.web>
</configuration> 
```

使用 BlobRequest 选项的示例超时：

```
CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();
blobContainer = blobClient.GetContainerReference("abcd");
CloudBlob blob = blobContainer.GetBlobReference(aCloudPath);
BlobRequestOptions bro = new BlobRequestOptions() 
                           { Timeout = TimeSpan.FromSeconds(5) };
blob.DownloadToFile(aLocalPath, bro); 
```

任何一个选项都不起作用！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T10:54:59.500

首先，在 app.config 中更改 httpRuntime executionTimeout 将不起作用。这是 ASP.NET 在服务器端使用的设置。

其次，带有 BlobRequestOptions 的代码应该可以工作，但有一点需要注意。默认情况下，BlobClient 带有一个指数退避重试策略来处理瞬态条件（即：无网络访问）。在每次重试之间，它会稍等片刻，然后再试一次。

如果您想在尝试检查网络访问时禁用此功能，您可以简单地禁用重试策略：

```
 blobClient.RetryPolicy = () =>
        {
            return (int currentRetryCount, Exception lastException, out TimeSpan retryInterval) =>
            {
                retryInterval = TimeSpan.Zero;
                return false;
            };
        }; 
```

确保仅在测试网络访问时禁用此功能，不要为您的实际请求禁用此功能。

哦，顺便说一句，你为什么不简单地使用已经存在的东西来检查互联网连接呢？Windows 中有一些 API 可用，例如[InternetCheckConnection](http://www.pinvoke.net/default.aspx/wininet.internetcheckconnection)。

如果您的连接不稳定，最好改进重试策略而不是禁用它（例如查看[TOPAZ](http://nuget.org/packages/EnterpriseLibrary.WindowsAzure.TransientFaultHandling)）。

# css - 线性淡出 div、内容和边框（顶部实心到底部透明）

> ID：12779776
> 
> 赞同：17
> 
> 时间：2012-10-08T10:23:13.480
> 
> 标签：css, transparency

> **可能重复：**
> [是否可以对 HTML 元素的不透明度进行分级？](https://stackoverflow.com/questions/12664132/is-it-possible-to-graduate-the-opacity-of-an-html-element)

我正在尝试使用 css 让 div（及其边框和内容）淡入透明（即顶部为实心，底部为透明）。

有没有办法做到这一点？

我已经能够使用以下方法淡出背景：

```
.fade-to-nothing
{
    background-image: -moz-linear-gradient(top, rgba(255,255,255,1), rgba(255,255,255,0));
    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(rgba(255,255,255,1)), to(rgba(255,255,255,0)));
    background-image: -webkit-linear-gradient(top, rgba(255,255,255,1), rgba(255,255,255,0));
    background-image: -o-linear-gradient(top, rgba(255,255,255,1), rgba(255,255,255,0));
    background-image: linear-gradient(to bottom, rgba(255,255,255,1),rgba(255,255,255,0));
    background-repeat: repeat-x;
} 
```

但也无法找到一种方法来处理 div 的内容/边框。也许有某种嵌套或覆盖？

**编辑** 继承人我正在尝试做的事情：

![在此处输入图像描述](../Images/28f1b37cfe077479b6ae2ee271781923.png)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-08T10:30:57.563

在这里引用[我的回答](https://stackoverflow.com/questions/12664132/is-it-possible-to-graduate-the-opacity-of-an-html-element/12670548#12670548)：

检查这个[**工作演示**](http://jsfiddle.net/gionaf/m5A83/)，并尝试添加/删除内容`#contents`

HTML

```
<div id="container">
    <div id="contents">
        Some contents goes here
    </div>
    <div id="gradient">
    </div>
</div> 
```

CSS

```
#container {
    position:relative;
}
#contents {
    background:red;
}
#gradient {
    position:absolute;
    z-index:2;
    right:0; bottom:0; left:0;
    height:200px; /* adjust it to your needs */
    background: url(data:image/svg+xml;base64,alotofcodehere);
    background: -moz-linear-gradient(top,  rgba(255,255,255,0) 0%, rgba(255,255,255,1) 70%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,0)), color-stop(70%,rgba(255,255,255,1)));
    background: -webkit-linear-gradient(top,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 70%);
    background: -o-linear-gradient(top,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 70%);
    background: -ms-linear-gradient(top,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 70%);
    background: linear-gradient(to bottom,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 70%);
}​ 
```

这几乎适用于任何支持不透明度的浏览器（包括 IE9），这是 IE8“rgba”后备（未经测试）：

```
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#ffffff',GradientType=0 ); 
```

要生成您自己的渐变，请访问[Colorzilla](http://www.colorzilla.com/gradient-editor/)。

第一个站点 (0%) 的不透明度必须为 0 ( `rgba(255,255,255,0);`)，然后是 70% 左右 - 做一些测试以找到对您有好处的 - 添加另一个不透明度为 1 ( `rgba(255,255,255,1);`) 的站点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:46:33.420

如果你知道你可以利用这些知识来发挥你的优势的高度，你总是可以从 js 更新它，但这对我来说似乎比定义无数渐变更简单[http://jsfiddle.net/6cXRZ/4/](http://jsfiddle.net/6cXRZ/4/)你可以调整你的参数隐藏你喜欢多少

# android - 单击对话框中的editext框时。隐式键盘必须隐藏

> ID：12779780
> 
> 赞同：1
> 
> 时间：2012-10-08T10:23:32.103
> 
> 标签：android, android-edittext, android-dialog, android-keypad

我在对话框上有一个edittextbox。当我单击编辑文本框时，必须禁用键盘。

在这里，我有以下代码，其中编辑 tetxtbox 存在。

公共类 NumberPicker 扩展 LinearLayout 实现 OnClickListener、OnFocusChangeListener、OnLongClickListener {

```
private static final String TAG = "NumberPicker";
private static final int DEFAULT_MAX = 10;
private static final int DEFAULT_MIN = 1;
public static String quantityForOrder;

public interface OnChangedListener {
    void onChanged(NumberPicker picker, int oldVal, int newVal);
}

public interface Formatter {
    String toString(int value);
}

/*
 * Use a custom NumberPicker formatting callback to use two-digit
 * minutes strings like "01".  Keeping a static formatter etc. is the
 * most efficient way to do this; it avoids creating temporary objects
 * on every call to format().
 */
public static final NumberPicker.Formatter TWO_DIGIT_FORMATTER =
        new NumberPicker.Formatter() {
            final StringBuilder mBuilder = new StringBuilder();
            final java.util.Formatter mFmt = new java.util.Formatter(mBuilder);
            final Object[] mArgs = new Object[1];
            public String toString(int value) {
                mArgs[0] = value;
                mBuilder.delete(0, mBuilder.length());
                mFmt.format("%02d", mArgs);
                return mFmt.toString();
            }
    };

private final Handler mHandler;
private final Runnable mRunnable = new Runnable() {
    public void run() {
        if (mIncrement) {
            changeCurrent(mCurrent + 1);
            mHandler.postDelayed(this, mSpeed);
        } else if (mDecrement) {
            changeCurrent(mCurrent - 1);
            mHandler.postDelayed(this, mSpeed);
        }
    }
};

private final EditText mText;
private final InputFilter mNumberInputFilter;

private String[] mDisplayedValues;
protected int mStart;
protected int mEnd;
protected int mCurrent;
protected int mPrevious;
private OnChangedListener mListener;
private Formatter mFormatter;
private long mSpeed = 300;

private boolean mIncrement;
private boolean mDecrement;

public NumberPicker(Context context) {
    this(context, null);
}

public NumberPicker(Context context, AttributeSet attrs) {
    this(context, attrs, 0);
}

@SuppressWarnings({"UnusedDeclaration"})
public NumberPicker(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs);
    setOrientation(VERTICAL);
    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    inflater.inflate(R.layout.number_picker, this, true);
    mHandler = new Handler();
    InputFilter inputFilter = new NumberPickerInputFilter();
    mNumberInputFilter = new NumberRangeKeyListener();
    mIncrementButton = (NumberPickerButton) findViewById(R.id.increment);
    mIncrementButton.setOnClickListener(this);
    mIncrementButton.setOnLongClickListener(this);
    mIncrementButton.setNumberPicker(this);
    mDecrementButton = (NumberPickerButton) findViewById(R.id.decrement);
    mDecrementButton.setOnClickListener(this);
    mDecrementButton.setOnLongClickListener(this);
    mDecrementButton.setNumberPicker(this);

    mText = (EditText) findViewById(R.id.timepicker_input);
    mText.setOnFocusChangeListener(this);
    mText.setFilters(new InputFilter[] {inputFilter});
    mText.setRawInputType(InputType.TYPE_CLASS_NUMBER);

    if (!isEnabled()) {
        setEnabled(false);
    }

    mStart = DEFAULT_MIN;
    mEnd = DEFAULT_MAX; 
```

// mText.setText(mStart); }

```
@Override
public void setEnabled(boolean enabled) {
    super.setEnabled(enabled);
    mIncrementButton.setEnabled(enabled);
    mDecrementButton.setEnabled(enabled);
    mText.setEnabled(enabled);
}

public void setOnChangeListener(OnChangedListener listener) {
    mListener = listener;
}

public void setFormatter(Formatter formatter) {
    mFormatter = formatter;
}

/**
 * Set the range of numbers allowed for the number picker. The current
 * value will be automatically set to the start.
 *
 * @param start the start of the range (inclusive)
 * @param end the end of the range (inclusive)
 */
public void setRange(int start, int end) {
    mStart = start;
    mEnd = end;
    mCurrent = start;
    updateView();
}

/**
 * Set the range of numbers allowed for the number picker. The current
 * value will be automatically set to the start. Also provide a mapping
 * for values used to display to the user.
 *
 * @param start the start of the range (inclusive)
 * @param end the end of the range (inclusive)
 * @param displayedValues the values displayed to the user.
 */
public void setRange(int start, int end, String[] displayedValues) {
    mDisplayedValues = displayedValues;
    mStart = start;
    mEnd = end;
    mCurrent = start;
    updateView();
}

public void setCurrent(int current) {
    mCurrent = current;
    updateView();
}

/**
 * The speed (in milliseconds) at which the numbers will scroll
 * when the the +/- buttons are longpressed. Default is 300ms.
 */
public void setSpeed(long speed) {
    mSpeed = speed;
}

public void onClick(View v) {
    validateInput(mText);
    if (!mText.hasFocus()) mText.requestFocus();

    // now perform the increment/decrement
    if (R.id.increment == v.getId()) {
        changeCurrent(mCurrent + 1);
    } else if (R.id.decrement == v.getId()) {
        changeCurrent(mCurrent - 1);
    }
}

private String formatNumber(int value) {
    return (mFormatter != null)
            ? mFormatter.toString(value)
            : String.valueOf(value);
}

protected void changeCurrent(int current) {

    // Wrap around the values if we go past the start or end
    if (current > mEnd) {
        current = mStart;
    } else if (current < mStart) {
        current = mEnd;
    }
    mPrevious = mCurrent;
    mCurrent = current;

    notifyChange();
    updateView();
}

protected void notifyChange() {
    if (mListener != null) {
        mListener.onChanged(this, mPrevious, mCurrent);
    }
}

protected void updateView() {

    /* If we don't have displayed values then use the
     * current number else find the correct value in the
     * displayed values for the current number.
     */
    if (mDisplayedValues == null) {
        mText.setText(formatNumber(mCurrent));
    } else {
        mText.setText(mDisplayedValues[mCurrent - mStart]);
    }
    mText.setSelection(mText.getText().length());
    System.out.println("my value in number picker"+mText.getText().length());
    System.out.println("my value in number picker"+mText.getText().toString());
    quantityForOrder = mText.getText().toString();
    System.out.println("my value with static : "+quantityForOrder);
}

private void validateCurrentView(CharSequence str) {
    int val = getSelectedPos(str.toString());
    if ((val >= mStart) && (val <= mEnd)) {
        if (mCurrent != val) {
            mPrevious = mCurrent;
            mCurrent = val;
            notifyChange();
        }
    }
    updateView();
}

public void onFocusChange(View v, boolean hasFocus) {

    /* When focus is lost check that the text field
     * has valid values.
     */
    if (!hasFocus) {
        validateInput(v);
    }
}

private void validateInput(View v) {
    String str = String.valueOf(((TextView) v).getText());
    if ("".equals(str)) {

        // Restore to the old value as we don't allow empty values
        updateView();
    } else {

        // Check the new value and ensure it's in range
        validateCurrentView(str);
    }
}

/**
 * We start the long click here but rely on the {@link NumberPickerButton}
 * to inform us when the long click has ended.
 */
public boolean onLongClick(View v) {

    /* The text view may still have focus so clear it's focus which will
     * trigger the on focus changed and any typed values to be pulled.
     */
    mText.clearFocus();

    if (R.id.increment == v.getId()) {
        mIncrement = true;
        mHandler.post(mRunnable);
    } else if (R.id.decrement == v.getId()) {
        mDecrement = true;
        mHandler.post(mRunnable);
    }
    return true;
}

public void cancelIncrement() {
    mIncrement = false;
}

public void cancelDecrement() {
    mDecrement = false;
}

private static final char[] DIGIT_CHARACTERS = new char[] {
    '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'
};

private NumberPickerButton mIncrementButton;
private NumberPickerButton mDecrementButton;

private class NumberPickerInputFilter implements InputFilter {
    public CharSequence filter(CharSequence source, int start, int end,
            Spanned dest, int dstart, int dend) {
        if (mDisplayedValues == null) {
            return mNumberInputFilter.filter(source, start, end, dest, dstart, dend);
        }
        CharSequence filtered = String.valueOf(source.subSequence(start, end));
        String result = String.valueOf(dest.subSequence(0, dstart))
                + filtered
                + dest.subSequence(dend, dest.length());
        String str = String.valueOf(result).toLowerCase();
        for (String val : mDisplayedValues) {
            val = val.toLowerCase();
            if (val.startsWith(str)) {
                return filtered;
            }
        }
        return "";
    }
}

private class NumberRangeKeyListener extends NumberKeyListener {

    // XXX This doesn't allow for range limits when controlled by a
    // soft input method!
    public int getInputType() {
        return InputType.TYPE_CLASS_NUMBER;
    }

    @Override
    protected char[] getAcceptedChars() {
        return DIGIT_CHARACTERS;
    }

    @Override
    public CharSequence filter(CharSequence source, int start, int end,
            Spanned dest, int dstart, int dend) {

        CharSequence filtered = super.filter(source, start, end, dest, dstart, dend);
        if (filtered == null) {
            filtered = source.subSequence(start, end);
        }

        String result = String.valueOf(dest.subSequence(0, dstart))
                + filtered
                + dest.subSequence(dend, dest.length());

        if ("".equals(result)) {
            return result;
        }
        int val = getSelectedPos(result);

        /* Ensure the user can't type in a value greater
         * than the max allowed. We have to allow less than min
         * as the user might want to delete some numbers
         * and then type a new number.
         */
        if (val > mEnd) {
            return "";
        } else {
            return filtered;
        }
    }
}

private int getSelectedPos(String str) {
    if (mDisplayedValues == null) {
        return Integer.parseInt(str);
    } else {
        for (int i = 0; i < mDisplayedValues.length; i++) {

            /* Don't force the user to type in jan when ja will do */
            str = str.toLowerCase();
            if (mDisplayedValues[i].toLowerCase().startsWith(str)) {
                return mStart + i;
            }
        }

        /* The user might have typed in a number into the month field i.e.
         * 10 instead of OCT so support that too.
         */
        try {
            return Integer.parseInt(str);
        } catch (NumberFormatException e) {

            /* Ignore as if it's not a number we don't care */
        }
    }
    return mStart;
}

/**
 * @return the current value.
 */
public int getCurrent() {
    return mCurrent;
} 
```

}

如果我通过键盘编辑 editetxt 框，那么我会收到以下错误。

10-08 16:16:01.194：WARN/System.err(27016)：java.lang.NumberFormatException：无法将“null”解析为整数 10-08 16:16:01.202：WARN/System.err(27016)：在 java.lang.Integer.parseInt(Integer.java:406) 10-08 16:16:01.202: WARN/System.err(27016): 在 java.lang.Integer.parseInt(Integer.java:382) 10- 08 16:16:01.202: WARN/System.err(27016): at com.cpt.coffee.activity.CoffeeOrder$EfficientAdapter$1$1.onClick(CoffeeOrder.java:316) 10-08 16:16:01.202: WARN/ System.err(27016): 在 android.view.View.performClick(View.java:2408) 10-08 16:16:01.202: WARN/System.err(27016): 在 android.view.View$PerformClick.run (View.java:8816) 10-08 16:16:01.202: WARN/System.err(27016): 在 android.os.Handler.handleCallback(Handler.java:587) 10-08 16:16:01.202: WARN /System.err(27016): 在 android.os.Handler.dispatchMessage(Handler.java:92) 10-08 16:16:01.202: WARN/System.err(27016): 在 android.os.Looper.loop(Looper.java:123) 10-08 16:16:01.202: WARN/System.err( 27016): 在 android.app.ActivityThread.main(ActivityThread.java:4627) 10-08 16:16:01.212: WARN/System.err(27016): 在 java.lang.reflect.Method.invokeNative(Native Method) 10-08 16:16:01.212: WARN/System.err(27016): 在 java.lang.reflect.Method.invoke(Method.java:521) 10-08 16:16:01.212: WARN/System.err( 27016): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 10-08 16:16:01.212: WARN/System.err(27016): 在 com.android.internal.os .ZygoteInit.main(ZygoteInit.java:626) 10-08 16:16:01.212: WARN/System.err(27016): at dalvik.system.NativeStart.main(Native Method)WARN/System.err(27016): at android.app.ActivityThread.main(ActivityThread.java:4627) 10-08 16:16:01.212: WARN/System.err(27016): at java.lang.reflect.Method .invokeNative(Native Method) 10-08 16:16:01.212: WARN/System.err(27016): at java.lang.reflect.Method.invoke(Method.java:521) 10-08 16:16:01.212: WARN/System.err(27016): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 10-08 16:16:01.212: WARN/System.err(27016): at com .android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 10-08 16:16:01.212: WARN/System.err(27016): at dalvik.system.NativeStart.main(Native Method)WARN/System.err(27016): at android.app.ActivityThread.main(ActivityThread.java:4627) 10-08 16:16:01.212: WARN/System.err(27016): at java.lang.reflect.Method .invokeNative(Native Method) 10-08 16:16:01.212: WARN/System.err(27016): at java.lang.reflect.Method.invoke(Method.java:521) 10-08 16:16:01.212: WARN/System.err(27016): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 10-08 16:16:01.212: WARN/System.err(27016): at com .android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 10-08 16:16:01.212: WARN/System.err(27016): at dalvik.system.NativeStart.main(Native Method)错误（27016）：在 java.lang.reflect.Method.invoke（Method.java:521）10-08 16:16:01.212：WARN/System.err（27016）：在 com.android.internal.os.ZygoteInit $MethodAndArgsCaller.run(ZygoteInit.java:868) 10-08 16:16:01.212: WARN/System.err(27016): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 10- 08 16:16:01.212：WARN/System.err（27016）：在 dalvik.system.NativeStart.main（本机方法）错误（27016）：在 java.lang.reflect.Method.invoke（Method.java:521）10-08 16:16:01.212：WARN/System.err（27016）：在 com.android.internal.os.ZygoteInit $MethodAndArgsCaller.run(ZygoteInit.java:868) 10-08 16:16:01.212: WARN/System.err(27016): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 10- 08 16:16:01.212：WARN/System.err（27016）：在 dalvik.system.NativeStart.main（本机方法）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:28:24.947

隐藏键盘使用

```
InputMethodManager imm = (InputMethodManager)getSystemService(
  Context.INPUT_METHOD_SERVICE);
  imm.hideSoftInputFromWindow(myEditText.getWindowToken(), 0); 
```

您也可以尝试在侦听器中设置它，因此不会在对话框本身中调用它：

```
dialog.setOnShowListener(new OnShowListener() {
@Override
 public void onShow(DialogInterface dialog) {
     InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
     imm.showSoftInput(textEdit, InputMethodManager.SHOW_IMPLICIT);
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:28:09.717

试试下面的代码：

```
InputMethodManager im=(InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
im.hideSoftInputFromWindow(yourEditText.getWindowToken(), 0); 
```

# python - 如何在 Eclipse 中将 PostgreSQL 与 PyDev 连接起来

> ID：12779784
> 
> 赞同：1
> 
> 时间：2012-10-08T10:23:53.370
> 
> 标签：python, eclipse, unit-testing, pydev, tryton

我正在为 Tryton 开发一个模块，当我尝试在 Eclipse 中使用 PostgreSQL 和 PyDev 运行 unittest 测试时，Eclipse 无法连接到 PostgreSQL。测试失败并引发此消息：

> OperationalError：fe_sendauth：未提供密码

unittest 测试文件是正确的，因为如果我在 Python 控制台中运行它，它就可以正常工作。

如何将 Eclipse 中的 unittest 测试与 PostgreSQL 和 PyDev 集成？

# c# - C# - 在 js 中访问 activeX 控件的简单属性时出错 - stackoverflowexception

> ID：12779786
> 
> 赞同：0
> 
> 时间：2012-10-08T10:24:01.860
> 
> 标签：c#, javascript, c#-3.0, activex, stack-overflow

我正在创建一个`ActiveX`对象`javascript`，并在该对象上调用一个方法。这工作得很好。但是，如果我尝试访问一个`property`activeX 控件（或从被调用的方法返回一个值），浏览器就会崩溃（消息：**IE 已停止工作**）。在详细信息部分，它说`System.StackOverflowException`没有被抓住。C#代码是：

```
interface IScreenshot{
   int data {get; set;}
}

 public class ScreenShot : UserControl, IScreenShot, IObjectSafety
    {
       public int data
        {
            get
            {
                return data;
            }
            set
            {
                data=13;
            }
        }
   } 
```

访问它的js代码是：

```
<script type="text/javascript" language="JavaScript">
 var x = new ActiveXObject("Try1.ScreenShot");
 var value = x.data;
</script> 
```

详细错误是：

```
Problem signature:
  Problem Event Name: CLR20r3
  Problem Signature 01: iexplore.exe
  Problem Signature 02: 9.0.8112.16448
  Problem Signature 03: 4fecf1b7
  Problem Signature 04: Try1
  Problem Signature 05: 1.0.0.0
  Problem Signature 06: 507399f0
  Problem Signature 07: 5
  Problem Signature 08: 0
  Problem Signature 09: System.StackOverflowException
  OS Version: 6.1.7601.2.1.0.768.11
  Locale ID: 1033 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T10:27:41.073

看看这段代码：

```
 public int data
 {
    get
    {
        return data;
    }
} 
```

为了返回数据，你……返回数据。砰。您需要有一个*字段*来存储该值。

您的二传手也忽略了传入的值，这显然很奇怪。

假设您的属性不需要任何*逻辑*，您可以使用自动实现的属性 - 理想情况下已更改名称以遵循 .NET 命名约定：

```
public int Data { get; set; } 
```

（理想情况下，你会同时给它一个更有*意义的*名字......）

请注意，这与 Javascript 无关 - 您会在纯 C# 应用程序中看到与该属性实现相同的问题。

# jquery - JQuery UI 对话框未在 IE 中显示

> ID：12779789
> 
> 赞同：0
> 
> 时间：2012-10-08T10:24:09.283
> 
> 标签：jquery, internet-explorer, dialog

嗨，我遇到了 IE 中未显示对话框的问题

下面是修改后的代码：

```
function setSpinnerDialog(text) {
var spinner = $('<div></div>').html(text +
"<img  id='loadingImage' src='../../Content/images/spinner.gif'/>").dialog({
    autoOpen: false,
    modal: true,
    height: 35,
    width: 160
});
return spinner;}

$('#imgVisitorEscortIds,#imgVisitingCardIds').click(function (e) {

 $spinnerDialog = setSpinnerDialog("loading... ");
 $spinnerDialog.dialog('open');

 //create list 
  $('#' + listId).selectBox();

//show dialog of list

 //close spinner
  $spinnerDialog.dialog('close'); 
```

在生成选择时（可能有 100 个名称），将显示一个加载对话框。这发生在所有浏览器中，但不是 IE。

有什么建议么

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:55:39.997

我以前遇到过类似性质的问题，但从来没有这个确切的问题。我发现 IE 有时会尝试变得有点*过于*高效并且会破坏事情。尝试在获得所选项目之前稍作间隔，以确保对话框有时间显示....

```
//create list 
setTimeout(function () {
    $('#' + listId).selectBox();
}, 500); 
```

# android - 使用自定义小部件的圆形图像角

> ID：12779791
> 
> 赞同：0
> 
> 时间：2012-10-08T10:24:14.677
> 
> 标签：android, imageview, rounded-corners

我想为自定义列表中的图像获得圆角。我使用了以下链接中提到的自定义小部件方法：

[http://wiresareobsolete.com/wordpress/2011/08/quick-rounded-corners/#comments](http://wiresareobsolete.com/wordpress/2011/08/quick-rounded-corners/#comments)

图像角落变得模糊。任何人都可以给我一个解决方案，让我使用这个mentod拥有光滑的角落。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:28:57.197

在drawable文件夹中创建一个文件。给它命名任何东西。`imageview`并使用该文件设置背景。它会给你一个圆角。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle">

<stroke android:width="1dip"
    android:color="@color/stroke_color"/>

<solid android:color="@color/white"/>

<padding 
    android:left="5dip"
    android:top="5dip"
    android:right="5dip"
    android:bottom="5dip" />

<corners android:radius="5dip" />

</shape> 
```

# coffeescript - CoffeeScript 中的 Yeoman 生成器 - HookFor 警告

> ID：12779803
> 
> 赞同：1
> 
> 时间：2012-10-08T10:24:53.760
> 
> 标签：coffeescript, generator, yeoman

我正在尝试使用**CoffeeScript为****Yeoman**开发一个自定义生成器，但我遇到了一个问题。当我在我的类的构造函数中使用该方法时，当我尝试使用 Yeoman 和我的自定义生成器初始化我的项目时，我得到一个警告*hookFor must be used within the constructor 。*这是我的生成器在 index.coffee 中的代码：**`hookFor``Generator`**

 ***```
path = require 'path'
util = require 'util'
yeoman = require '../../../../'
module.exports = class Generator extends yeoman.generators.Base
    constructor: ->
        super()
        @directories = ['controllers', 'helpers', 'models', 'templates', 'views']
        @hookFor 'artefact:controller', args: ['App']
    deploy: ->
        @directory '.', '.'
        @mkdir path.join 'dev', directory for directory in @directories 
```

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T06:19:16.930

显然，错误来自**yeoman-generators/lib/base.js**文件中的**Yeoman Generators**代码。以下是我得出这个结论的方法：

 **1.  警告是由在函数中`_running`设置的变量引起的*（第 296 行）*`true``hookFor`
**   `run`该变量在函数中设置为 true *（第 78 行）*，然后迭代该类`Generator`的方法（第 81-137 行）*   CoffeeScript 中为该类定义的构造函数在`Generator`迭代期间被调用，因此`@hookFor`被调用，而`_running`is `true`:**警告！***   但是，不应调用构造函数，因为在迭代期间进行了测试以防止它*（第 92 行）*：

    ```
    if ( method.constructor === '-' ) 
    ```

    *   但是，在我看来，这个测试应该是：

    ```
    if ( method === 'constructor' ) 
    ```* 

 *黑客可以解决问题。如果我错了，请随时添加评论。******

# asp.net-mvc - mvc 控制器架构和模型绑定

> ID：12779807
> 
> 赞同：0
> 
> 时间：2012-10-08T10:25:08.923
> 
> 标签：asp.net-mvc, asp.net-mvc-4, model-binding

我的用户实体有许多不同的属性来定义用户记录。在创建了默认的脚手架编辑和创建页面之后，我们现在正在尝试对页面实施一些区域，以便可以编辑和更新用户配置文件的相似区域，而无需回发和刷新整个属性列表。

我正在考虑将区域拆分为单独的部分视图，如下所示，然后使用 @Ajax.BeginForm(

```
 public partial class UserContact : UserBase
    {
        [DataType(DataType.EmailAddress)]
        [StringLength(255)]        
        public string EmailAddress { get; set; }

        [DataType(DataType.PhoneNumber)]
        [StringLength(50)]
        public string PhoneHome { get; set; }
            ...
    }
    public partial class UserAddress : UserBase
    {
        [StringLength(60)]
        public string AddressLine1 { get; set; }

        [StringLength(60)]
        public string AddressLine2 { get; set; }
            ...
    }
    public partial class UserBase
    {
        [Key]
        [Required(ErrorMessage = "User is required")]
        public System.Guid UserId { get; set; }
    } 
```

刚刚发现了[binding](http://www.codeproject.com/Articles/159749/ASP-NET-MVC-Model-Binding-Part1)关键字，我想知道人们使用哪些方法。我想它在网络上的效率不是很高，而且在每次回发整个用户模型的必要验证方面，人们是否将主模型拆分为单独的模型，或者是否可以（甚至建议）使用绑定参数只指定属性的子集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:03:06.810

在我看来，确实建议将模型拆分为多个子模型，但是您还需要将您的操作拆分为子操作。每个操作都将“绑定”到该子类，而不是整个 UserBase 类。

如果你只使用一个动作，我认为不可能[动态地]指定要绑定哪些属性，哪些不绑定。

# python - python中的异步I/O是什么？

> ID：12779808
> 
> 赞同：2
> 
> 时间：2012-10-08T10:25:09.423
> 
> 标签：python, multithreading, asynchronous

很抱歉这个愚蠢的初学者问题，但我在理解异步 I/O 的概念时遇到了真正的问题，我不谈论回调和其他复杂的东西，我只是想了解“python 如何执行代码”的开头

所以这是我想理解的例子

```
class Foo()
    take a user input # line 1
    seek for this input from the database # line 2
    make some operation using the database output # line 3
    make an output to the client and show the message to the page # line 4 
```

所以如果用户使用 Tornado 为例，如果他在服务器上执行代码，那么，假设我们有**4 个客户端**请求 url 与 class 匹配的页面`Foo`，那么 Python 将如何执行代码；

IE; 在python中，既然它是一种`Script`语言，那么每一行都在执行并返回值？那么它是否为**用户 1执行第****1 行**，然后**停止**，并为**客户端 2等其他客户端提供第****1 行**，然后跳到第**2 行**，依此类推？

 ******* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:37:46.007

问题与python没有多大关系。这是一个关于异步python框架（即龙卷风）的问题。

龙卷风中的客户端是异步处理的。这意味着当服务器处理客户端请求并点击完成某些异步操作的行（您的示例中的数据库查询 -**第 2 行**）时，它会中断那里的执行并切换到另一个客户端。当数据库查询完成时，关于它的通知进入队列，客户端在那里等待轮到它从他停止的点再次执行（**第 3 行**）。

Tornado 有自己的客户执行模式。它被称为[反应器模式](http://en.wikipedia.org/wiki/Reactor_pattern)。基本上，这意味着它正在遍历客户端队列并在需要时处理它们（即请求来自套接字，数据库查询已完成）。

这种非阻塞循环是通过操作系统的实用程序（如[Epoll](http://en.wikipedia.org/wiki/Epoll) ）完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:15:46.413

我认为您的问题与 python 处理的方式有关[`multithreading`](http://docs.python.org/library/threading.html)。

尽管解释器永远不会使用处理器的多个内核（[此处](http://docs.python.org/glossary.html#term-global-interpreter-lock)和[此处](https://stackoverflow.com/questions/tagged/gil+python)的一些信息），但它支持多线程，因为可以在其他线程等待时执行不同的线程`I/O`。在上面的示例中，可以在**client1**等待数据库调用（**line #2**）返回时为**client2**（**line #1 ）提供服务。**

 ****关于*“既然是脚本语言，那么每一行都在执行并返回值？”* ，不，我想不出那样的事情；[您可以使用生成器](https://stackoverflow.com/questions/231767/the-python-yield-keyword-explained)来执行“为每一行返回值”之类的操作，但我想这不是您想要的。**********

# apache - Bug on wordpress with chrome in localhost?

> ID：12779816
> 
> 赞同：0
> 
> 时间：2012-10-08T10:25:50.513
> 
> 标签：apache, google-chrome

I am deploying a synchronized web enviroment with WAMP and Google Drive. For one reason I want that the Apache server uses the port 8080\. Well, but if a put a wordpress website in the apache main folder, it does not work in Chrome, but yes in Firefox and Internet Explorer.

The point is that in Chrome when i do:

localhost:8080/my-wp

it redirect me to

localhost/my-wp

And then it does work beacause my apache server is running in port 8080.

Is it a bug or i can solve that in chrome settings?

# .net - Moq - How to get a callback

> ID：12779818
> 
> 赞同：0
> 
> 时间：2012-10-08T10:25:56.447
> 
> 标签：.net, moq

I have a function with the following signature

I'm trying to mock this and get a value back

`Sub CreateEntry(ByVal description As String, response As Action(Of AsyncResponse(Of Response)))`

the second parameter is a callback and I'm trying to get it back by:

`serviceProxy.Setup(Sub(sp) sp.CreateEntry(It.IsAny(Of String),It.Isany(Of AsyncResponse(Of Response))))`

This gives me the following error:
Value of type 'AsyncResponse(Of Response)' cannot be converted to 'System.Action(Of AsyncResponse(Of Response))'

any ideas?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:38:26.127

问题是您试图在设置中匹配**AsyncResponse(of Response)**而不是**Action(of AsyncResponse(of Response))**。

尝试

```
serviceProxy.Setup(Sub(sp) sp.CreateEntry(It.IsAny(Of String),It.IsAny(Of Action(Of AsyncResponse(Of Response))))) 
```

# java - Calling multiple oracle stored procedure in java and maintaining data consistency

> ID：12779819
> 
> 赞同：1
> 
> 时间：2012-10-08T10:25:57.757
> 
> 标签：java, exception-handling, java-stored-procedures

This method has some issues I failed to understand, such as it doesn't rollback the changes made in previous procedure call if any of the procedure calls down the hierarchy throws an exception.... Please help me out

```
public synchronized boolean save(DTO dto) throws DAOException,IllegalArgumentException
{           boolean retVal=false;
            boolean retVal1=false;
            boolean retVal2=false;
            boolean retVal5=true;
    try{
                connection=dataSource.getConnection();
                connection.setAutoCommit(false);
                cstmt=connection.prepareCall("{call PKG_ALL.PROC_MAIN(?,?,?)}");

                cstmt.setString(1, "A");     cstmt.setString(2, "B");
                cstmt.registerOutParameter(3,Types.VARCHAR);

                ResultSet rs=cstmt.executeQuery();                  
                String ErrMsg=cstmt.getString(3);
                if(ErrMsg.equalsIgnoreCase("Record Inserted"))  retVal=true;
                else retVal=false;

        cstmt.close();

        cstmt1=connection.prepareCall("{call PKG_ALL.PROC_CHILD1(?,?,?)}");

                cstmt1.setString(1, "A");     cstmt1.setString(2, "B");
                cstmt1.registerOutParameter(3,Types.VARCHAR);

                ResultSet rs1=cstmt.executeQuery();                 
                String ErrMsg1=cstmt1.getString(3);
                if(ErrMsg1.equalsIgnoreCase("Record Inserted")) retVal1=true;
                else retVal1=false;

        cstmt1.close();

        if(strSerialNo!=null && strSerialNo.length > 0) // for a non-mandatory multirow in the form
        {  
            cstmt2=connection.prepareCall("{call PKG_ALL.PROC_CHILD2(?,?,?)}");
                for(int k=0;k<strSerialNo.length;k++)
                    {
                        cstmt2.setString(1,"M");
                        cstmt2.setString(2,"I");
                        cstmt2.registerOutParameter(3,Types.VARCHAR);

                        ResultSet rs2=cstmt2.executeQuery();
                        String ErrMsg2=cstmt2.getString(3);
                        if(ErrMsg2.equalsIgnoreCase("Record Inserted")) retVal2=true;
                        else
                            {
                                retVal5=false;
                                retVal2=false;
                            }           
                    } 
            cstmt2.close();
        }   

        **if(retVal&&retVal1&&retVal5)**
                {
                    retVal=true;
                    connection.commit();
                }
                else
                {
                    //connection.rollback();
                    retVal=false;
                }
    }
    catch(SQLException e)
            {
                throw new DAOException(":"+e.getMessage());
            }
            catch(Exception e)
            {
                throw new DAOException(":"+e.getMessage());

            }
            finally
            {
                closeConnection(connection);
            }
            return retVal;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:36:36.340

> 如果层次结构中的任何过程调用引发异常，它不会回滚在先前过程调用中所做的更改

Ofc，您不要将回滚调用放在 catch SQLException 块中。如果您的请求之一不工作而不会引发异常，您只会调用回滚方法。

此外，您在执行请求后永远不会提交更改，因此当您来到调用的 else 语句时`connection.rollback();`，您实际上没有什么可回滚的，因为没有任何内容被提交。

阅读[此页面](http://docs.oracle.com/javase/tutorial/jdbc/basics/transactions.html)以获取有关如何处理提交/回滚的基本示例。

# mysql - 在 MySQL 中创建事件

> ID：12779825
> 
> 赞同：0
> 
> 时间：2012-10-08T10:26:36.863
> 
> 标签：mysql

任何人都可以帮助我如何在 MySQL 中创建一个事件，以便它必须每 10 秒执行一次吗？

我尝试使用以下代码，但它只插入一次，但是当我看到事件是否正在运行时不在进程列表中，它处于运行状态

```
 create event e_insert on schedule at 'timestamp' + interval 1 second do insert into 'table_name' values (now()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:44:45.150

你应该写 -

```
ON SCHEDULE EVERY '10' SECOND 
```

代替`on schedule at...`

[使用事件调度程序](http://dev.mysql.com/doc/refman/5.1/en/events.html)。

**编辑：**

```
CREATE EVENT event1
  ON SCHEDULE EVERY '10' SECOND
  STARTS CURRENT_TIMESTAMP
  ON COMPLETION PRESERVE
  DO 
BEGIN
  INSERT INTO...
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:46:24.377

设置全局 event_scheduler = 1;

[在这里](http://ftp.nchu.edu.tw/MySQL/tech-resources/articles/mysql-events.html)检查

# windows - console2 colors solarized

> ID：12779826
> 
> 赞同：8
> 
> 时间：2012-10-08T10:26:40.060
> 
> 标签：windows, console, console2

I am trying to use Solarized colors on a Windows 7 pc using Console2\. I can't get the colors to work correctly though.

I tried changing the entries in console.xml as suggested [here](https://github.com/stevenharman/console2-solarized). Is this all I need to do?

Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T16:43:30.973

[从此处](http://www.curlybrace.com/words/2012/02/12/console2-and-cygwin-with-solarized-color-palette/)的说明复制：

> 将该`<colors> ... </colors>`部分替换为以下内容：
> 
> `<colors> <color id="0" r="7" g="54" b="66"/> <!-- black --> <color id="1" r="38" g="139" b="210"/> <!-- blue --> <color id="2" r="133" g="153" b="0"/> <!-- green --> <color id="3" r="42" g="161" b="152"/> <!-- cyan --> <color id="4" r="220" g="50" b="47"/> <!-- red --> <color id="5" r="211" g="54" b="130"/> <!-- magenta --> <color id="6" r="181" g="137" b="0"/> <!-- yellow/brown --> <color id="7" r="238" g="232" b="213"/> <!-- white --> <color id="8" r="0" g="43" b="54"/> <!-- brblack --> <color id="9" r="131" g="148" b="150"/> <!-- brblue --> <color id="10" r="88" g="110" b="117"/> <!-- brgreen --> <color id="11" r="147" g="161" b="161"/> <!-- brcyan --> <color id="12" r="203" g="75" b="22"/> <!-- brred --> <color id="13" r="108" g="113" b="196"/> <!-- brmagenta/violet --> <color id="14" r="101" g="123" b="131"/> <!-- bryellow --> <color id="15" r="253" g="246" b="227"/> <!-- brwhite --> </colors>`

这对我来说效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:44:26.440

我经历了同样的过程，配色方案似乎对我有用。要检查的一件事是打开 Console2 设置对话框并验证您的*控制台颜色映射*是否正确映射。附加的屏幕截图使用的是深色曝光配色方案。

![带有 Solarized 控制台颜色图的控制台设置](../Images/30adb42c4b71b42e007d9d2478f3d01f.png)

# c# - 在 C# 中执行时将自定义变量添加到应用程序路径的末尾

> ID：12779831
> 
> 赞同：4
> 
> 时间：2012-10-08T10:26:50.987
> 
> 标签：c#, .net, arguments

我将如何读取应用程序路径末尾的自定义变量？我不确定它们的确切名称，但例如在 Google Chrome 的快捷方式路径中，您可以将设置添加到路径的末尾，例如：

“C:\Program Files (x86)\Google\Chrome\Application\chrome.exe **--自定义设置**”

在我的申请开始后，我将如何阅读这些论点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T10:29:15.433

它们是您传递给应用程序的参数。例如以下应用：

```
static void Main(string[] args)
{
if (args == null)
{
    Console.WriteLine("args is null"); // Check for null array
}
else
{
    Console.Write("args length is ");
    Console.WriteLine(args.Length); // Write array length
    for (int i = 0; i < args.Length; i++) // Loop through array
    {
    string argument = args[i];
    Console.Write("args index ");
    Console.Write(i); // Write index
    Console.Write(" is [");
    Console.Write(argument); // Write string
    Console.WriteLine("]");
    }
}
Console.ReadLine(); 
```

如果您从命令行运行以下命令：

```
"C:\ConsoleApplication1.exe" a b c 
```

该程序将显示：

```
args length is 3
args index 0 is [a]
args index 1 is [b]
args index 2 is [c] 
```

[http://msdn.microsoft.com/en-us/library/acy3edy3.aspx](http://msdn.microsoft.com/en-us/library/acy3edy3.aspx)

[http://msdn.microsoft.com/en-us/library/cb20e19t.aspx](http://msdn.microsoft.com/en-us/library/cb20e19t.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T10:28:32.027

这些值将包含在`Main()`用作应用程序入口点的方法中的 args 数组中。

```
static void Main(string[] args) { } 
```

*   [命令行参数](http://msdn.microsoft.com/en-us/library/cb20e19t%28v=vs.110%29.aspx)
*   [Main() 和命令行参数](http://msdn.microsoft.com/en-us/library/acy3edy3.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T10:30:05.340

它们被称为命令行参数。虽然您可以直接从程序入口点[手动](http://msdn.microsoft.com/en-us/library/aa288457%28v=vs.71%29.aspx)解析它们`main()`，但有几个帮助库可以让您和您的用户的生活更加轻松，例如[这里](http://nuget.org/packages/CommandLineParser)和[这里](http://commandline.codeplex.com/)的这个。

# java - What does this mysterious code do?

> ID：12779834
> 
> 赞同：-9
> 
> 时间：2012-10-08T10:26:53.253
> 
> 标签：java

My code:

```
public void mysterious() {
    int x = 1;
    x = x++ / ++x;
    System.out.println(x);
} 
```

whats the answer?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T10:40:20.897

```
int x = 1;
x = x++ / ++x;
System.out.println(x); 
```

**从左到右进行评估：-**

*   首先对 x++ 进行评估。所以，它将是`1`
*   然后 x 将增加 1.. 对于 Post Increment..
*   然后`++x`被评估..这将是3（因为x在之后增加`x++`）

**所以，基本上，你上面的代码相当于： -**

```
int x = 1;
int a = x++;   // a = 1, x = 2
int b = ++x;   // b = 3, x = 3
x = a / b;     // x = 1 / 3
System.out.println(x); // Prints 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:00:45.613

```
public void mysterious() {
    int x = 1;
    x = x++ / ++x;
    System.out.println(x);
} 
```

`x = 1;` // 将整数值 1 赋给变量 x

```
x = x++ / ++x; 
```

让我们把上面的语句分成 2 个 diff 语句。

`x++`- PostIncrement，x的值加1，所以现在它的值是2，那么

`x++`- PreIncrement，x 的值再次递增并分配给左侧的 x，所以现在是 3。

```
System.out.println(x); 
```

所以它将是`1/3`，这将导致`0`，如果您使用`double`而不是 int，您将看到该值为`0.33333333`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:33:14.910

此表达式的评估是从左到右执行的。这个表达式等价于增量评估后的这个：

```
x = 1/3; 
```

因此，答案是 0；

# javascript - 不理解在 safari 中工作的 js

> ID：12779835
> 
> 赞同：0
> 
> 时间：2012-10-08T10:26:57.750
> 
> 标签：javascript, jquery

如果这样写：

```
 $(document).on("click", function () {
             window.scroll( 0, 70 );
        }); 
```

总是有效，但如果这样写：

```
 window.onload = function () {
             window.scroll( 0, 70 );
        } 
```

这不适用于 safari 和 chrome 的“隐身窗口”。在其他浏览器中有效。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T10:33:29.357

简单来说，主要原因是您绑定到的不同浏览器/dom 元素的状态。

在第一个中，您将绑定到使用 jQuery`click`上的事件`<body/>`，这可能会确保当您开始实际单击它时，`body`文档已初始化并有足够的滚动余量以使效果出现在您面前.

在第二个中，您绑定到`onload`窗口的事件，该事件实际上在`body`加载之前触发，或者积累了足够的可滚动区域，从而使效果不出现。

相反，理想的技术是使用

```
$(document).ready(function() {
    window.scrollTo(0,70);
}); 
```

# java - Servlet 路径错误

> ID：12779837
> 
> 赞同：0
> 
> 时间：2012-10-08T10:27:01.897
> 
> 标签：java, gwt, servlets

出于练习目的，我正在使用由登录表单组成的 GWT 制作应用程序。运行时出现错误

> 加载模块 com.logvin.LoginForm
> 
> [错误] 从第 19 行开始的元素“servlet”缺少必需的属性“路径”
> 
> [错误] 解析 XML 时失败

我正在使用 GWT-RPC 并检查给定的用户名和密码是否正确。我对 xml 文件进行了一些更改，这些更改是：

```
entry-point class='com.logvin.client.LoginForm'/>   
<servlet> path="/LoginForm" class="com.logvin.gwt.server.GreetingServiceImpl"/>  
  <servlet> 
   <servlet-name>GreetingServiceImpl</servlet-name> 
   <servlet-class>com.logvin.server.GreetingServiceImpl</servlet-class>
  </servlet> 
<servlet-mapping> 
 <servlet-name>GreetingServiceImpl</servlet-name> 
 <url-pattern>/LoginForm</url-pattern>    
</servlet-mapping> 
```

为什么我再次收到此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T10:55:41.467

您正在混合两种 XML 方言。

所有这些`<servlet>`元素都应该进入您的`WEB-INF/web.xml`文件，告诉 servlet 容器（您将部署应用程序的服务器）如​​何为您的 servlet 提供服务。

该`*.gwt.xml`文件（GWT 模块）是关于告诉 GWT 编译器（请参阅：编译时，而不是运行时）如何编译您的代码：加载应用程序时从哪里开始（该`entry-point`），哪些类是客户端（将被编译为JavaScript，其他（仅限服务器端）必须排除），要导入哪些 GWT 模块（`inherits`）等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:36:32.363

我怀疑你不正确`gwt.xml`

你的`LoginForm.gwt.xml`应该是这样的。

```
<entry-point class="com.logvin.client.LoginForm"/>
<servlet path="/LoginForm"
       class="com.logvin.gwt.server.GreetingServiceImpl" /> 
```

编辑：

`servlet`*.gwt.xml 文件中不再需要条目。所以你也可以删除这一行：

```
<servlet path="/LoginForm"
           class="com.logvin.gwt.server.GreetingServiceImpl" /> 
```

另外，检查您的`web.xml`.

[在此处](http://www.digizol.com/2008/09/java-gwt-servlets-web-app-tutorial.html)阅读示例

# sql - 有没有办法使用 Union with Use？

> ID：12779838
> 
> 赞同：1
> 
> 时间：2012-10-08T10:27:03.297
> 
> 标签：sql, sql-server, sql-server-2008, union

我有几个 USE 语句，我希望 UNION 将所有结果放在一个结果集中，但我不能这样做，因为 UNION 只能与 SELECT 一起使用。是否有解决方法或任何方法可以以另一种方式实现我的目标？

例子：

```
USE Customer 
select min(len(Password)) as min, 
    max(len(Password)) as max, 
    avg(len(Password)) as avg 
FROM Password
USE website 
select min(len(password)) as min, 
    max(len(password)) as max, 
    avg(len(password)) as avg 
FROM Password 
```

我有更多这些语句使用不同的数据库和表，所以想将它们全部组合在一起。

我正在使用 Microsoft SQL Server 2008。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:31:21.043

不要使用`USE`语句。为您的对象（表、视图等）使用完全限定的名称

```
SELECT
    min(len(Password)) AS minPassword, 
    max(len(Password)) AS maxPassword, 
    avg(len(Password)) AS avgPasswword 
FROM 
    Customer.dbo.Password
UNION
select 
    min(len(password)), 
    max(len(password)), 
    avg(len(password))
FROM 
    Website.dbo.Password 
```

这假设您的表有 dbo 作为所有者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:31:22.867

`[database name].[schema name].[table name]`您可以使用within来限定表名，`UNION`如下所示：

```
select min(len(Password)) as min, 
    max(len(Password)) as max, 
    avg(len(Password)) as avg 
FROM customer.schemaname.Password
UNION ALL 
select min(len(password)) as min, 
    max(len(password)) as max, 
    avg(len(password)) as avg 
FROM website.schemaname.Password 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:32:18.453

您可以在表名前加上要使用的数据库，然后可以使用 a`UNION ALL`同时查询它们：

```
select min(len(Password)) as min, 
    max(len(Password)) as max, 
    avg(len(Password)) as avg 
FROM Customer.yourSchema.Password
UNION ALL
select min(len(password)) as min, 
    max(len(password)) as max, 
    avg(len(password)) as avg 
FROM website.yourSchema.Password 
```

调用时的结构将是：

```
yourDataBase.yourSchemaName.yourTableName 
```

# java - 将队列转换为列表

> ID：12779839
> 
> 赞同：24
> 
> 时间：2012-10-08T10:27:05.380
> 
> 标签：java, list, queue

在保持队列顺序`Queue`的同时将 a 转换为最快的方法是什么？`List`

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-08T10:28:45.567

最快的方法是首先使用 LinkedList，它可以用作 List 或 Queue。

```
Queue q = new LinkedList();
List l = (List) q; 
```

否则需要复印

```
List l = new ArrayList(q); 
```

注意：在处理 PriorityQueue 时，使用循环，轮询每个元素并添加到列表中。PriorityQueue to List 不维护堆顺序。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-12-10T13:02:14.037

# 传递`Queue`给`ArrayList`构造函数

最简单的方法是创建 a[`ArrayList`](http://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html)并将您[`Queue`](http://docs.oracle.com/javase/8/docs/api/java/util/Queue.html)作为参数传递给 ArrayList 的[构造](http://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html#ArrayList-java.util.Collection-)函数，该构造函数采用[`Collection`](http://docs.oracle.com/javase/8/docs/api/java/util/Collection.html). A`Queue`是 a `Collection`，所以有效。

这是最简单的方法，我也相信最快的方法。

```
List<?> list = new ArrayList<>( myQueue ); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-04-12T18:11:18.150

如果您要从转换**`PriorityQueue`**为 a `List`，请记住它实际上是一个堆，因此使用该`poll()`方法确定排序，在这种情况下，按照此处其他一些答案中讨论的构造方法进行操作，不会保持队列的自然顺序。

考虑到这一点，您可以按照以下方式进行：

```
List<E> result = new ArrayList<>(yourPriorityQueue.size());
while (!yourPriorityQueue.isEmpty()) {
    result.add(yourPriorityQueue.poll());
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-08T10:28:15.503

```
Queue queue = new LinkedList();
...
List list = new ArrayList(queue); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-09-29T14:50:47.903

为已经使用 Java 8 的用户回答老问题
Java 8 提供了使用流的选项，您可以从队列中获取列表：

例如：

```
Queue<Student> queue = new LinkedList<>();
        Student s1 = new Student("A",2);
        Student s2 = new Student("B",1);
        Student s3 = new Student("C",3);
        queue.add(s1);
        queue.add(s2);
        queue.add(s3);

    List<Student> studentList = queue.stream().collect(Collectors.toCollection(ArrayList::new)); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-08T10:29:18.420

谷歌：

```
Queue fruitsQueue = new LinkedList();
fruitsQueue.add("Apples");
fruitsQueue.add("Bananas");
fruitsQueue.add("Oranges");
fruitsQueue.add("Grapes");

List fruitsList = new ArrayList(fruitsQueue); 
```

# properties - Intellij - Showing and property values and names

> ID：12779842
> 
> 赞同：2
> 
> 时间：2012-10-08T10:27:08.843
> 
> 标签：properties, ide, intellij-idea

Using IntelliJ to edit a Spring Beans file, I am using a properties file to define some of the values of the beans.

In IntelliJ, when you open the bean file all of the properties are displaying their values (in grey). When you edit this, it then displays the property name.

To get the value back, you have to close and then re-open the file

Is there another way to switch between the property name and value in an XML bean file other than closing and re-opening the file?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T20:03:16.910

IDEA 试图在这里提供帮助，向您展示属性占位符（“ *${foo.bar}* ”）引用的实际值。

您可以通过以下方式查看原始占位符表达式：

1.  双击值
2.  将插入符号放在值上，然后按*Ctrl-Plus*

# c# - 当预期超时时，如何处理负载下的 WCF 调用生命周期？

> ID：12779844
> 
> 赞同：2
> 
> 时间：2012-10-08T10:27:20.763
> 
> 标签：c#, wcf, performance, wcf-client

我有一个不错的快速任务调度组件（Windows 服务，但这是无关紧要的），它订阅了一个内存队列中的待办事项。

队列的填充速度非常快......当我说快速时，我的意思是快速......如此之快，以至于我遇到了某些特定部分的问题。

队列中的每个项目都会附加一个“类别”，然后传递到 WCf 端点进行处理，然后保存在远程数据库中。

这提出了一个问题。

“队列”可以每分钟处理数百万个项目，而 WCF 端点实际上每秒只能处理大约 1000 到 1200 个项目，其中许多是“堆叠”的，以便等待插槽将它们转储到数据库.

我的 WCF 客户端配置为调用触发并忘记（故意）我的问题是，当调用偶尔会发生超时，那就是头痛开始的时候。

线程似乎在超时后停止，没有进入我的 catch 块……只是坐在那里，更令人困惑的是，这是一个间歇性的事情，这只发生在队列处理极端负载和 WCF 端点时被过度征税，即使在那种情况下，这种情况也只会每两周发生一次。

此代码24/7 全天候在服务器上不断运行。

所以......我的问题......我怎样才能确定导致我的问题的边缘情况，以便我可以解决它？

一些额外的信息：

调用 WCF 端点的客户端似乎自动“限制自己”，因为我限制了进行调用的线程数量，并且代码一直挂起，直到调用被认为完成（我认为这是一个 http 级别的事情因为我没有向服务询问我的方法调用的结果）。

与 EF 对话的 db 似乎永远不会打开超过固定数量的与 db 的连接（数量也很低，这很酷），并且来自呼叫接收的 WCF 端点似乎超级可靠。

问题似乎是从队列处理器到 WCf 端点。

队列处理器有我的 WCF 端点客户端的单个实例，它重用于所有调用......（每次调用重建此端点是一种好习惯吗？ - 请记住此处的调用次数）。

最后说明：

它是一个特殊的功能“模块”，在一次重载几个小时的情况下它是稳定的，但由于某种原因，这种奇怪的事情发生了，导致整个工作停止并且没有恢复。该调用包含在 try catch 中，但似乎即使 catch 被命中（不能保证），代码也不会按预期恢复/退出......它只是挂起。

有任何想法吗？

请让我知道我是否可以添加任何其他内容来帮助解决此问题。

编辑1：

绑定 - basicHttpBinding

错误处理 - 除了将 WCF 调用包装在 try catch 中之外，没有编写任何代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:14:45.167

似乎我的解决方案似乎是增加客户端配置上的超时设置，以允许服务器有更多时间响应。

最终结果是，当数据库忙于保存数据（实际上是这个过程中最慢的部分）时，调用客户端坐下来等待（在所有线程上，但似乎没有我想要的那么长）。

这个问题似乎是对 WCF 的大量多线程调用的最终结果，并且没有给它足够的时间来响应。

高负载不是连续的，服务使用量似乎会激增然后下降，增加预期的响应时间允许在峰值发生时过滤掉它们。

关键说明：太多的调用将导致服务器/服务将它们视为 dos 类型的攻击，因此可能会简单地终止连接。这不是我得到的，但一些微调和时间可能会导致......

是时候换一些更大的服务器了！！！

# android - BroadcastReceiver onReceive is not fired

> ID：12779846
> 
> 赞同：1
> 
> 时间：2012-10-08T10:27:32.993
> 
> 标签：android, sms, broadcastreceiver

I'm trying to cope with SMS receiving funcions in Android. I read a lot of related topics on Stackoverflow and other sites and I tried with a very simple Class that simply print on the console that a message has been received and the message, but I cannot figure out why it doesn't work.

I see that similar questions remained unanswered in the past (see [Android - Broadcast Receiver not being fired](https://stackoverflow.com/questions/6966902/android-broadcast-receiver-not-being-fired))

Hope someone could find where's the problem with my code.

Code:

```
package com.storassa.android.smsapp;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;

public class SmsReceiver extends BroadcastReceiver {

private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
private static final String TAG = "SMSBroadcastReceiver";

@Override
public void onReceive(Context context, Intent intent) {
System.out.println("Intent recieved: " + intent.getAction());

if (intent.getAction().equals(SMS_RECEIVED)) {
Bundle bundle = intent.getExtras();
if (bundle != null) {
Object[] pdus = (Object[])bundle.get("pdus");
final SmsMessage[] messages = new SmsMessage[pdus.length];
for (int i = 0; i < pdus.length; i++) {
messages[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
}
if (messages.length > -1) {
System.out.println("Message recieved: " + messages[0].getMessageBody());
        }
    }
}
     }
} 
```

And Manifest

```
<manifest package="com.storassa.android.smsapp"
    android:versionCode="1"
    android:versionName="1.0" xmlns:android="http://schemas.android.com/apk/res/android">

    <uses-sdk android:minSdkVersion="6" android:targetSdkVersion="6"/>
    <uses-permission android:name="android.permission.RECEIVE_SMS"></uses-permission>

    <application android:label="@string/app_name" android:permission="android.permission.RECEIVE_SMS">
        <receiver android:name="com.storassa.android.smsapp.SmsReceiver"
            android:enabled="true"
            android:exported="true">
            <intent-filter android:priority="999">
                <action android:name="android.provider.Telephony.SMS_RECEIVED"></action>
            </intent-filter>
        </receiver>

    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:48:32.710

当您还安装了其他优先级高于当前应用程序的应用程序时，就会发生这种情况，因此增加您的优先级它将开始工作，我也多次遇到这个问题，在一个应用程序中我的优先级为 100，但它不工作但当我将其更改为 999 时，它开始工作，所以尝试设置不同的和大的无优先级并再次检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:21:24.803

我试过你的代码，它对我来说很好。

您所指的帖子有 setPriority 设置为 999 的问题，但仍然没有收到广播。

尝试将优先级设置为 Integer.MAX_VALUE 或者在 xml 中它应该是 2147483647

一些 SMS 应用程序会使用这个 Integer.MAX_VALUE 作为它们的优先级，因此会“吃掉”所有收到的消息。

如果将 setPriority 设置为 Integer.MAX_VALUE 或 2147483647 无济于事，请尝试卸载所有处理传入短信的应用程序，并查看短信是否通过您的应用程序。

如果这有帮助，那么它是已经安装的应用程序之一正在吃 SMS'es。

解决此问题的方法是始终将您的应用程序安装为第一个。通过这样做，您将始终是第一个接收 SMS 广播的应用程序。

编辑：将优先级设置为 Integer.MAX_VALUE 或 2147483647 是一种黑客行为，可能不应该使用。setPriority() 方法仅声明从 -1000 到 1000 的优先级。但是我自己在应用程序中使用它，但我只处理从特定号码收到的特定短信，所以我看不到它有问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-08T11:01:18.520

```
//In on resume and on pause of actvities register the receiver and also in manifest

    protected void onPause(){

        super.onPause();
    unregisterReceiver(SmsReceiver ); 

    }

        protected void onResume()
{

            super.onResume();

            registerReceiver(SmsReceiver , 
                new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));

        }

    private BroadcastReceiver SmsReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {

                        }

        }; 
```

# linux - 查找在给定文件之前和之后 30 分钟创建的文件 - UNIX

> ID：12779850
> 
> 赞同：1
> 
> 时间：2012-10-08T10:27:51.980
> 
> 标签：linux, unix, command, debian, command-line-interface

我试图找出在创建另一个文件之前和之后显示 30 分钟（例如）创建的所有文件的命令。到目前为止，我设法找到了比该文件更新的文件，但我无法弄清楚如何在给定时间之前和之后查找。

我用过的一个命令：find -type f -newer file.txt -cmin -30

这工作正常，但只做了我想做的一半。另外，我需要修改它以仅搜索 setuid 文件，我认为可以通过在该命令中添加 -perm -4000 来做到这一点。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T11:39:29.077

据我所知，没有办法找到文件创建时间。您可以按修改时间尝试（这将获得所有文件的最后修改时间在 5 日和 8 日之间）

```
find . -type f -newermt 2012-10-05 ! -newermt 2012-10-08 
```

（或访问时间替换`newermt`为`newerat`）

`newerXY`是用于将当前文件的时间戳与参考进行比较的标志（有关更多信息，请参见 man find ）。

根据`man find`（在我的debian上）有4个标志（除了`t`直接解释为时间）

```
a   The access time of the file reference
B   The birth time of the file reference
c   The inode status change time of reference
m   The modification time of the file reference 
```

您也可以尝试使用`'B'`出生时间，但它对我不起作用，给我错误。我不知道为什么它包含在手册页中

与另一个文件比较

```
find / -newer file
find / ! -newer file 
```

您可以创建临时文件（一个修改时间在目标文件前 30 分钟，另一个在目标文件后 30 分钟）

```
touch -d `stat -c %y test.txt` - 30 temp/before_temp
touch -d `stat -c %y test.txt` + 30 temp/after_temp

find / -newer temp/before_temp ! -newer temp/after_temp 
```

`touch -d`需要一个日期选项，所以如果你正确地添加和减去，这应该可以工作。

# javascript - JQuery 动画在 IE/Opera、Chrome、Firefox 中的工作方式不同

> ID：12779858
> 
> 赞同：1
> 
> 时间：2012-10-08T10:28:19.140
> 
> 标签：javascript, jquery, html, css, cross-browser

我的图像动画在最新的 chrome 和 firefox 中无法正常工作，但在 IE8 和最新的 Opera 中运行良好

[http://jsfiddle.net/wzHx3/7/](http://jsfiddle.net/wzHx3/7/)和全屏示例[http://dev.fama.net.pl/tides/](http://dev.fama.net.pl/tides/) - 单击右侧三角形触发动画，然后单击左侧触发第二个动画片

更新 - Chrome 中的第二个动画现在已修复为 afshin

更新 2 - 所有 Chrom 问题都已修复至 afshin

ISSUE - Firefox：第一个动画比其他浏览器中的动画短，第二个动画之前是向右大跳转

Chrome、IE8 和 Opera 完美运行

查询

```
$(window).load(function(){

    var speed = 500;
    var times = 2;
    var loop = setInterval(anim, 500);
    function anim(){
        times--;
        if(times === 0){clearInterval(loop);}
        $('#arrow-right').animate({right:-1,opacity:.2},speed).animate({right:-15, opacity:.5},speed);
    }
    anim(); 

    $('#bg img.pic').css('opacity','0');
});
$(document).ready(function(){

    var easing = 'easeInOutCubic';

$('#arrow-right').click(function(){
    $('#bg img.pic').animate({left:'0%', opacity: 1}, 2500, function() {
        $('#arrow-left').animate({left:0}, 800, easing);
    });
    $(this).animate({right:-125}, 800, easing);

});    

$('#arrow-left').click(function(){
    $('#bg img.pic').animate({left: '20%', opacity: 0}, 2500, easing, function() {
        $('#arrow-right').animate({right:-15}, 800, easing);
        //$(this).css('left','75%');
    });        
    $(this).animate({left:-125}, 800, easing);
});
}); 
```

CSS

```
* { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

body,html {
    overflow: hidden
}
#bg {
    position:fixed; 
    top:-50%; 
    left:-50%; 
    width:200%; 
    height:200%;
}
#bg img {
    position:absolute; 
    top:0; 
    left:0; 
    right:0; 
    bottom:0; 
    margin:auto; 
    min-width:50%;
    min-height:50%;
}
#bg img.blank {
    z-index: 0;
}
#bg img.pic {
    z-index: 1;
    left: 20%;
    opacity: 0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
}
.arrow {
    position: absolute;
    top: 50%;
    margin-top: -120px;
    width: 0;
    height: 0;
    opacity:.5;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
    cursor: pointer;
    border-top: 120px solid transparent;
    border-bottom: 120px solid transparent;         
}
.arrow:hover {
    opacity:.2 !important;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=20)" !important;
}
#arrow-left {
    border-left: 120px solid #83bedd;
    left: -125px;
    z-index: 2;
}
#arrow-right {
    border-right: 120px solid #83bedd;
    right: -15px;
    z-index: 2;
} 
```

HTML

```
<div id="bg">
    <img class="blank" src="http://dev.fama.net.pl/tides/img/bg.jpg" alt="" />
    <img class="pic" src="http://dev.fama.net.pl/tides/img/bga.jpg" alt="" />
</div>

<div id="arrow-left" class="arrow"></div>
<div id="arrow-right" class="arrow"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:52:37.723

看看这个也许有帮助

```
$('#arrow-right').click(function(){
    $('#bg img.pic').animate({left:'0%', opacity: 1}, 2500, function() {
        $('#arrow-left').animate({left:0}, 800, easing);
    });
    $(this).animate({right:-125}, 800, easing);

});    

$('#arrow-left').click(function(){
    $('#bg img.pic').animate({left: 20+'%', opacity: 0}, 2500, easing, function() {
        $('#arrow-right').animate({right:-15}, 800, easing);
        //$(this).css('left','75%');
    });        
    $(this).animate({left:-125}, 800, easing);
}); 
```

[jsFiddle](http://jsfiddle.net/wzHx3/7/)

# node.js - Redis：如何检查while循环中是否存在

> ID：12779874
> 
> 赞同：1
> 
> 时间：2012-10-08T10:29:09.790
> 
> 标签：node.js, redis

我在我的应用程序中使用 Redis，但我不清楚一件事。我保存一个随机生成的字符串作为其键的对象。但是我想检查该密钥是否存在。我打算使用 while 循环，但是我不确定如何根据 Redis 来构造它。因为如果我想检查一次，我会做；

```
redisClient.get("xPQ", function(err,result){
   if(result==null)
      exists = false
}); 
```

但我想将while循环用作；

```
while(exists == false) 
```

但是我无法在脑海中构建代码结构。while 是在**函数**内部还是函数外部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:19:14.217

通常，您不应该检查客户端是否存在密钥。它会导致竞争条件。例如，另一个线程可以在第一个线程检查它的存在之后插入密钥。

您应该使用以 NX 结尾的命令。例如 - [SETNX](http://redis.io/commands/setnx)和[HSETNX](http://redis.io/commands/hsetnx)。这些将仅在不存在时插入密钥。它保证是原子的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:41:42.533

我不明白为什么您需要实施主动轮询来检查密钥是否存在（有更好的方法来处理这种情况），但我会尝试回答这个问题。

您根本不应该使用 while 循环（在函数内部或外部）。由于 node.js 的异步特性，这些循环最好使用尾递归来实现。这是一个例子：

```
var redis = require('redis')
var rc = redis.createClient(6379, 'localhost');

function wait_for_key( key, callback ) {
   rc.get( key, function(err,result) {
      if ( result == null ) {
         console.log( "waiting ..." )
         setTimeout( function() {
            wait_for_key(key,callback);
         }, 100 );
      } else {
         callback(key,result);
      }
   });
}

wait_for_key( "xPQ", function(key,value) {
   console.log( key+" exists and its value is: "+value )
}); 
```

有多种方法可以使用专用库（使用延续传递样式或纤维）来简化这些表达式。例如，您可能想要检查 async.js 包的 while 和 until 函数。

[https://github.com/caolan/async](https://github.com/caolan/async)

# c# - 在 wp7 中动态添加控件和手势监听器

> ID：12779879
> 
> 赞同：0
> 
> 时间：2012-10-08T10:29:26.953
> 
> 标签：c#, windows-phone-7, silverlight-toolkit, gestures

我想在我的画布控件中动态添加一些图像或控件，并且对于每个控件我想要获取其手势事件。我将如何得到最好的方法。

```
void AddText()
        {
            TextBlock name = new TextBlock();
            name.Text = "This is text " + Count;
            Random rnd1 = new Random();
            name.Width = rnd1.Next(0, 400);
            name.Height = rnd1.Next(0, 800);
            var gl = GestureService.GetGestureListener(name);
            gl.Tap += new EventHandler<GestureEventArgs>(GestureListener_Tap);
            gl.Hold += new EventHandler<GestureEventArgs>(GestureListener_Hold);
            canvas1.Children.Add(name);
        }

private void GestureListener_Tap(object sender, GestureEventArgs e)
{
    MessageBox.Show("I Am Tapped");
}

private void GestureListener_Hold(object sender, GestureEventArgs e)
{
    MessageBox.Show("I Am Holded");
} 
```

但是通过这种方式，我的所有控件都放在同一个地方，即使我使用随机函数来控制它们的宽度和高度。当我点击我用这种方式创建的任何文本块时，还有其他事情。它调用所有手势事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:38:25.967

与 StackPanel 不同，Canvas 控件的行为类似于 HTML/CSS 中的绝对定位。每个元素将在页面上被赋予其自己的特定位置。对于绝对定位的元素，它们不会调整。元素将重叠，不会对其邻居产生任何与定位相关的影响。

```
<Canvas>
  <Rectangle Fill="Red" Width="100" Height="100" Canvas.Top="100" Canvas.Left="100" />
  <Rectangle Fill="Orange" Width="100" Height="100" Canvas.Top="100" Canvas.Left="200" />
  <Rectangle Fill="Green" Width="100" Height="100" Canvas.Top="200" Canvas.Left="100" />
  <Rectangle Fill="Blue" Width="100" Height="100" Canvas.Top="200" Canvas.Left="200" />
</Canvas> 
```

对于 Canvas 中的每个元素，您需要指定 Canvas.Top 和 Canvas.Left 属性。省略这些值将导致您的元素位于画布的左上角，位置为 0,0。

所以你需要提供 Left 和 Top 属性，如下所示，

```
Canvas.SetLeft(name, 50);
Canvas.SetTop(name, 100); 
```

# android - Android：禁用 SD 卡/不允许安装 SD 卡

> ID：12779883
> 
> 赞同：0
> 
> 时间：2012-10-08T10:29:43.350
> 
> 标签：android

我需要防止手机更新其固件/ROM。我已经禁用了很多东西，比如 USB 调试，但人们仍然可以通过按下 Vol+ 并重新启动设备进入恢复模式，然后从 SD 卡中刷新新固件。我可以以某种方式完全禁用 SD 卡插槽，而无需对设备进行物理更改或编写我自己的固件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:04:52.423

> 我可以以某种方式完全禁用 SD 卡插槽，而无需对设备进行物理更改或编写我自己的固件吗？

幸运的是，没有。

# java - 阅读 pop3 邮件时出现异常

> ID：12779885
> 
> 赞同：-1
> 
> 时间：2012-10-08T10:29:55.060
> 
> 标签：java, jakarta-mail

我在阅读 pop3 邮件时遇到问题

我的代码很简单..

```
Properties objServerProp = new Properties();
objServerProp.setProperty("mail.transport.protocol", "pop3");
objServerProp.setProperty("mail.host", "xxx.xx-ip.org");
objServerProp.put("imap.mail.port", "110");
objServerProp.put("imap.mail.auth", "true");

Session  objSession = Session.getDefaultInstance(objServerProp, null);
Store instStore = objSession.getStore("pop3");
instStore.connect("xxx.xx-ip.org", Integer.valueOf(110), "id", "pwd");
Folder  objFolder = instStore.getFolder("inbox");
objFolder.open(Folder.READ_WRITE);
int count = objFolder.getMessageCount();

 Message objMessage = objFolder.getMessage(1);
 System.out.println("objMessage is :: "+objMessage);
 System.out.println("  message contenttype :: " + objMessage.getContentType()); 
```

当我在消息对象上调用任何方法（例如 :getContentType() ）时，我遇到了异常，，，

并且消息对象很好

```
objMessage is :: com.sun.mail.pop3.POP3Message@37d8d2 
```

例外如下..

```
javax.mail.MessagingException: error loading POP3 headers;
  nested exception is:
    java.io.IOException: Unexpected response: 
    at com.sun.mail.pop3.POP3Message.loadHeaders(POP3Message.java:467)
    at com.sun.mail.pop3.POP3Message.getSize(POP3Message.java:106)
    at in10sbouncemailtracker.BMTServer.checkBouncedMails(BMTServer.java:232)
    at BMTMain.main(BMTMain.java:18)
Caused by: java.io.IOException: Unexpected response: 
    at com.sun.mail.pop3.Protocol.simpleCommand(Protocol.java:361)
    at com.sun.mail.pop3.Protocol.multilineCommand(Protocol.java:373)
    at com.sun.mail.pop3.Protocol.top(Protocol.java:271)
    at com.sun.mail.pop3.POP3Message.loadHeaders(POP3Message.java:451)
... 3 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:41:58.000

如 JavaMail FAQ 中所述，[打开会话调试](http://www.oracle.com/technetwork/java/javamail/faq/index.html#debug)。协议跟踪将向您显示意外响应是什么。您还应该查看[com.sun.mail.pop3 包 javadocs 中描述的属性](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/pop3/package-summary.html)，其中一些可能有助于解决服务器中的错误。

# c# - 在 C# 中调用基类构造函数

> ID：12779887
> 
> 赞同：1
> 
> 时间：2012-10-08T10:30:01.713
> 
> 标签：c#, constructor, base-class

我有以下课程：

```
public abstract class BusinessRule
{
    public string PropertyName { get; set; }
    public string ErrorMessage { get; set; }

    public BusinessRule(string propertyName)
    {
        PropertyName = propertyName;
        ErrorMessage = propertyName + " is not valid";
    }

    public BusinessRule(string propertyName, string errorMessage)
        : this(propertyName)
    {
        ErrorMessage = errorMessage;
    }
 } 
```

和

```
public class ValidateId : BusinessRule
{
    public ValidateId(string propertyName) : base(propertyName)
    {
        ErrorMessage = propertyName + " is an invalid identifier";
    }

    public ValidateId(string propertyName, string errorMessage)
        : base(propertyName)
    {
        ErrorMessage = errorMessage;
    }

    public override bool Validate(BusinessObject businessObject)
    {
        try
        {
            int id = int.Parse(GetPropertyValue(businessObject).ToString());
            return id >= 0;
        }
        catch
        {
            return false;
        }
    }
} 
```

和

```
public class Customer : BusinessObject
{
    public Customer()
    {
        AddRule(new ValidateId("CustomerId"));
    }
 } 
```

从 Customer 类中，我添加了一个新的业务规则 - ValidateId 通过调用它的构造函数，这很好，但是 ValidateId 的构造函数正在调用基类构造函数，这是我开始有点困惑的地方。

当 ValidateId 构造函数可以做我想要实现的事情时，为什么我需要调用基类构造函数？ValidateId 构造函数和基本构造函数都将错误消息设置为：

这是在基本构造函数中：

```
 PropertyName = propertyName;
        ErrorMessage = propertyName + " is not valid"; 
```

这是在 ValidateId 构造函数中：

```
ErrorMessage = propertyName + " is an invalid identifier"; 
```

哪一个 ErrorMessage 将用于向用户显示错误？

此外，如果我删除`: base(propertyName)`而不调用基本构造函数，我会得到 BusinessRule 不包含无参数构造函数错误消息，显然我可以向 Businessrule 添加一个无参数构造函数并在 ValidateId 构造函数中实现所有内容，但我想知道有什么优点/含义调用或不调用基本构造函数？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T10:34:12.010

> 当 ValidateId 构造函数可以做我想要实现的事情时，为什么我需要调用基类构造函数？

您*总是必须在继承层次结构的**每个*级别上都经过一个构造函数- 否则任何“跳过”的级别都没有机会初始化自己并验证参数 public ValidateId(string propertyName) : base(propertyName) { ErrorMessage = propertyName + " 是一个无效的标识符"; }。

`FileStream`想象一下，如果您可以创建一个可以跳过现有构造函数的派生类`FileStream`——那将代表什么文件？它从哪里获取数据？

在我看来，`ValidateId(string propertyName)`应该实现为：

```
public ValidateId(string propertyName)
    : base(propertyName, propertyName + " is an invalid identifier")
{
} 
```

Only *one* piece of code needs to be setting the error message - and personally I'd actually make the setters private within `BusinessRule`, or even use a separate readonly field and only provide a getter at all.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:43:52.477

Just create BusinessRule() constructor without paramters. Call base() in validateId()

# typescript - TypeScript 和 TFS 的问题

> ID：12779889
> 
> 赞同：11
> 
> 时间：2012-10-08T10:30:13.063
> 
> 标签：typescript

与 Typescript 一起进行的 TFS Visual Studio 项目可能存在问题。

在构建时 tsc 无法覆盖只读 .js 文件并抛出 Permission denied 错误。

```
Error   1   Permission denied   
Error   2   The command ""C:\Program Files (x86)\Microsoft SDKs\TypeScript\0.8.0.0\tsc 
"c:\users\schlicht\documents\visual studio 2012\Projects\TypeScriptHTMLApp1\TypeScriptHTMLApp1\app.ts"" exited with code 1\. 
```

是否可以**在不**明确签出文件的情况下使用**带有**tsc 的构建？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T01:59:10.990

不要签入 .js 文件。我们在 TypeScript 项目中使用了这种方法，并且效果很好。不需要在源代码管理中拥有生成的 .js；将 .js 文件视为项目输出，如 .exe 或 .dll。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-11-28T06:05:15.953

现在，如果您的构建服务器配置为运行 Typescript，TSC 将运行并生成 JavaScript 文件。

这是另一种替代解决方案，以防您不想删除 JS 文件。因为，如果您暂时删除 JS，并且任何其他开发人员再次将这些文件签入到 TFS 中，则会出现相同的错误。（更多的是隐藏文件，所以如果你不仔细签入，它们可以在 TFS 中签入）

在这种情况下，您可以运行 Pre-Build 事件，该事件将删除该项目的 JS 文件的所有只读属性。

1.*右键单击*项目*并*打开*项目属性窗口*

2\. 选择*构建事件*选项卡

[![在此处输入图像描述](../Images/ffaaef325aa4e87551c01e5dcaccc81b.png)](https://i.stack.imgur.com/opdjt.png)

这将确保所有 JS 文件都释放只读属性，并且不会出现写入文件失败的错误。

希望这可以帮助。

来源：[http ://dailydotnettips.com/2014/05/03/typescript-emit-error-write-to-file-failed-how-to-resolve](http://dailydotnettips.com/2014/05/03/typescript-emit-error-write-to-file-failed-how-to-resolve)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-18T10:30:16.997

Here's a workaround: To keep your JS files as part of the project and in source control.

Use a Local Workspace, as this does not apply the read-only flag on files, so saving the .JS files do not require a check-out for it to be written to.

I found this because I was not exhibiting this problem, but others in my team were, so after some digging I found out what was different. I was using a Local Workspace instead of a Server Workspace.

The other team members have converted to a Local Workspace and they are smooth sailing once again.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T13:52:14.600

这是一个已知的错误（或缺少的功能）：

[http://typescript.codeplex.com/workitem/108](http://typescript.codeplex.com/workitem/108)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T12:43:32.053

我昨天[经历了这个。](http://devio.wordpress.com/2012/11/19/typescript-projects-in-tfs/)

正如 iano 所说，不要将生成的 .js 添加到 TFS；或将`tf checkout`and添加`tf checkin`到 BeforeBuild 目标。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-06T06:14:01.067

在回复有人建议从项目中排除 .js 文件时，我不得不说这只能在小型单一解决方案软件中使用。在大型软件应用程序（即 ERP）中，每个模块通常存在多个解决方案，当每个模块都有自己的 .js 文件时，交付 .js 和其他此类源文件通常是通过将它们设置为“嵌入式资源”和一些自定义的虚拟路径提供程序或其他东西。

那么，什么有效？ [该解决方案](http://dailydotnettips.com/2014/05/03/typescript-emit-error-write-to-file-failed-how-to-resolve/)可能对您有所帮助，我建议您尝试一下。

但无论如何，正如 AM 所说。这是一个已知的错误。而且我认为 TypeScript 编译器的最佳解决方案是跳过为那些本身是只读（签入）的 .ts 文件编写 .js 文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-06T13:09:36.770

问题：
如果您将生成的 *.js 文件添加到 TFS，则 TFS 会写保护它们，如果您签入或不签出它们。因此，如果您更改 *.ts 文件，它无法生成 *.js 文件，因为该文件是写保护的。
==> 错误
但是如果你不签入，如果你运行部署，*.js 文件将会丢失。
==> 编译，但运行时错误
另外，如果您需要它作为嵌入式资源，则不能排除该文件...

附加问题1：
如果您运行“重建解决方案”，Visual Studio 想要在执行构建之前删除 TypeScript 生成的 *.js 文件。
但是无法删除，因为 *.js 文件是写保护的...
==> 错误

**附加问题2：**
由于清理不是“构建”，因此预构建事件不会在清理时执行......
因此，如果您在预构建中删除写保护，如果您执行“构建”，它将起作用，但它如果您选择“重建”，无论您是在解决方案中还是在项目中进行，都会失败。

附加问题 3：
您无法在项目设置编辑器中定义预清理事件命令。

因此，您可以执行以下操作：在您的 typescripted *.js 文件上
运行`attrib -r /s`（删除写保护）作为预构建操作。
例如

```
attrib -r /s "$(ProjectDir)Resources/Scripts/0/*.js" 
```

这是有效的，因为 * 被扩展了：

*   如果文件不存在，则没有错误，因为没有执行任何命令。
*   如果文件确实存在，则没有错误，则执行命令。

如果您在文件名上运行它，如果该文件不存在，它将失败。

现在，您需要手动编辑项目文件 (*.csproj)，以添加预清理操作。
pre-clean 操作与 pre-build 操作相同。

```
 <Target Name="BeforeClean">
    <!-- DO YOUR STUFF HERE -->
    <Exec Command="attrib -r /s &quot;$(ProjectDir)Resources/Scripts/0/*.js&quot;" />
  </Target> 
```

你去吧。现在您可以检查 *.js 文件，可以编辑 *.ts 文件（您需要取消保护 *.js 文件，或者之后运行构建）

如果要基于每个文件运行它，命令是：

```
if EXIST "$(ProjectDir)Resources/Scripts/0/leaflet.EasyAjax.js" (
attrib -r "$(ProjectDir)Resources/Scripts/0/leaflet.EasyAjax.js"
) 
```

或以 XML 形式：

```
<Exec Command="if EXIST &quot;$(ProjectDir)Resources/Scripts/0/leaflet.EasyAjax.js&quot; (&#xD;&#xA;attrib -r &quot;$(ProjectDir)Resources/Scripts/0/leaflet.EasyAjax.js&quot;&#xD;&#xA;)" /> 
```

您还可以使用 TFS 命令行工具检查各个文件，而不是在预构建操作中删除只读属性批发：
`"$(DevEnvDir)CommonExtensions/Microsoft/TeamFoundation/Team Explorer/tf.exe" checkout /lock:none "$(ProjectDir)Resources/Scripts/0/leaflet.EasyAjax.js"`

顺便说一句，您可以在此处找到 VisualStudio/MsBuild 宏的列表：
[https ://docs.microsoft.com/en-us/cpp/ide/common-macros-for-build-commands-and-properties?view= VS-2017](https://docs.microsoft.com/en-us/cpp/ide/common-macros-for-build-commands-and-properties?view=vs-2017)

并找出宏的实际值：

*   在解决方案资源管理器中右键单击您的项目，选择*属性*
*   选择*构建事件*选项卡
*   单击*Edit pre-build*或*Edit post-build*按钮，都可以
*   在弹出的窗口中，单击*宏*按钮
*   向下滚动列表直到找到`ProjectDir`，在下一个窗格中是它的实际值

此外，您可以将签出添加为 BeforeBuild-target 命令，而不是在项目中使用预构建事件。这样，如果他们将某些东西放入项目设置中的预构建中，任何人都不会意外删除它。

```
 <Target Name="BeforeBuild">
    <Exec Command="&quot;$(DevEnvDir)CommonExtensions/Microsoft/TeamFoundation/Team Explorer/tf.exe&quot; checkout /lock:none &quot;$(ProjectDir)Resources/Scripts/0/leaflet.EasyAjax.js&quot;" />
  </Target> 
```

# perl - 如何在 Perl 中使用 NET::SSH2 的 SFTP 模块按时间顺序列出文件？

> ID：12779891
> 
> 赞同：3
> 
> 时间：2012-10-08T10:30:16.510
> 
> 标签：perl, list, ssh, sftp

我通过 Perl 中的 NET::SSH2 包使用 SFTP。使用 opendir 函数列出文件夹中的文件效果很好。

我想让文件按时间顺序排列，最后修改最新的文件。这可能吗？怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:02:58.370

方法返回的哈希值`Net::SSH2::Dir::read`和调用`mtime`的条目指示条目被修改的时间。使用它对条目进行排序：

```
my @e;
my $dir = $sftp->opendir($dir);

while (my $e = $dir->read) {
  push @e, $e;
}

@e = sort { $a->{mtime} <=> $b->{mtime} } @e;
print "$_->{name}\n" for @e; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:48:01.227

你不能直接执行 using `exec('ls -t')`through plain`SSH`吗？（没有`SFTP`）。

就像是：

```
my $chan = $ssh2->channel();
$chan->exec('ls -t'); # executed in the dir you would like to get the files sorted from 
```

# mysql - 无论如何优化这个 MySQL 查询？

> ID：12779896
> 
> 赞同：2
> 
> 时间：2012-10-08T10:30:32.393
> 
> 标签：mysql, join, subquery

这需要很长时间才能完成，但希望能够快速提取它收集的信息。

```
SELECT *
FROM releases
WHERE (artist IN (SELECT artist FROM artist_love WHERE user='Quickinho')
OR
label IN (SELECT label FROM label_love WHERE user='Quickinho')
OR
id IN (SELECT release_id FROM charts_extended WHERE artist IN (SELECT dj FROM dj_love WHERE user='Quickinho'))
OR
id IN (SELECT artist FROM releases WHERE id IN (SELECT release_id FROM charts_extended WHERE user='Quickinho'))
OR
id IN (SELECT label FROM releases WHERE id IN (SELECT release_id FROM charts_extended WHERE user='Quickinho')))
AND
id NOT IN (SELECT release_id FROM charts_extended WHERE user='Quickinho')
ORDER BY date DESC
LIMIT 0,102 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T20:10:36.353

避免任何子选择（虽然没有测试，所以请原谅任何错别字）

```
SELECT *
FROM releases
LEFT OUTER JOIN artist_love ON releases.artist = artist_love.artist AND artist_love.user = 'Quickinho'
LEFT OUTER JOIN label_love ON releases.label = label_love.label AND label_love.user = 'Quickinho'
LEFT OUTER JOIN charts_extended ON releases.id = charts_extended.release_id
LEFT OUTER JOIN dj_love ON charts_extended.artist = dj_love.dj AND dj_love.user = 'Quickinho'
LEFT OUTER JOIN releases releases1 ON releases.id = releases1.artist
LEFT OUTER JOIN charts_extended charts_extended1 ON charts_extended1.artist = releases1.id AND charts_extended1.user = 'Quickinho'
LEFT OUTER JOIN releases releases2 ON releases.id = releases2.label
LEFT OUTER JOIN charts_extended charts_extended2 ON charts_extended2.artist = releases2.id AND charts_extended2.user = 'Quickinho'
LEFT OUTER JOIN charts_extended charts_extended3 ON charts_extended3.release_id = releases.id AND charts_extended3.user = 'Quickinho'
WHERE (artist_love.user IS NOT NULL
OR label_love.user IS NOT NULL
OR dj_love.user IS NOT NULL
OR charts_extended1.user IS NOT NULL
OR charts_extended2.user IS NOT NULL)
AND charts_extended3.user IS NULL 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T20:31:07.627

其他人提供的优化查询可能还不够快。

假设您的原始查询需要 120 秒才能执行，而最佳优化查询仍然需要 30 秒，但您需要 5 秒或更好的响应时间。你能做什么？

## 预填充！

**运行由定期执行的cron 作业**触发的查询，例如**每小时一次**。使用这样的`INSERT SELECT`查询：

```
INSERT INTO releases_queried
SELECT -- your query (your original one or one of the optimized ones) 
```

请参阅[MySQL 手册 INSERT-SELECT](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)。然后你会得到结果

```
SELECT * FROM releases_queried 
```

立即在**几毫秒内**。这是一种众所周知的改进响应时间的技术。如果查询所需的数据始终可用，则效果很好。

## 现实世界的使用

StackOverflow 本身有许多复杂的查询不是按请求完成的，而是异步完成的。徽章不是在每次访问时计算的，而是按 cron 计算的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T10:37:41.787

```
...from releases
WHERE (artist IN (SELECT artist FROM artist_love WHERE user='Quickinho') 
```

我建议你使用`JOIN`而不是做`IN (SELECT..)`

你可以做类似的事情

```
select r.* from releases r, artist_love al 
where r.artist = al.artist and al.user='Quickinho' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-11T07:04:18.013

**IN() 和 NOT IN() 子查询优化不佳**
MySQL 将子查询作为外部查询中每一行的依赖子查询执行。这是 MySQL 5.5 和更早版本中严重性能问题的常见原因。查询可能应该分别重写为 JOIN 或 LEFT OUTER JOIN。

**选择 ***

如果表的架构发生变化，选择所有带有 * 通配符的列将导致查询的含义和行为发生变化，并可能导致查询检索到过多的数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T06:39:08.500

首先 - 使 JOIN 关系中使用的所有字段都被索引。

然后试试这个查询 -

```
SELECT
  r.*
FROM
  releases r
LEFT JOIN (SELECT artist FROM artist_love WHERE user='Quickinho') al
  ON al.artist = r.artist
LEFT JOIN (SELECT label FROM label_love WHERE user='Quickinho') ll
  ON ll.label = r.label
LEFT JOIN (
    SELECT release_id FROM charts_extended ce
    INNER JOIN (SELECT dj FROM dj_love WHERE user='Quickinho') djl
      ON djl.dj = ce.artist
    ) ce
  ON r.id = ce.release_id
LEFT JOIN (
    SELECT artist FROM releases r
    INNER JOIN (SELECT release_id FROM charts_extended WHERE user='Quickinho') ce
      ON r.id = release_id
  ) r2
  ON r2.artist = r.id OR r2.label = r.id

LEFT JOIN (SELECT release_id FROM charts_extended WHERE user='Quickinho') ce2
  ON ce2.release_id = r.id

WHERE
  (al.artist IS NOT NULL OR ll.label IS NOT NULL OR ce.release_id IS NOT NULL OR r2.id IS NOT NULL)
  AND ce2.release_id IS NULL
GROUP BY
  r.id 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-16T07:01:24.013

Kickstart 的解决方案是正确的想法（尽管我建议您尽可能在 USER 上加入，但让“user = 'Quickinho'”出现这么多次并不是一个好习惯），然后考虑为以下部分或全部字段添加索引：

*   艺术家爱艺术家
*   label_love.label
*   chart_extended.release_id
*   dj_love.dj
*   发布.艺术家
*   发布.标签
*   chart_extended.release_id

虽然我不能说我能想到你想用这个做什么。可能有更好的解决方案。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-16T09:40:38.953

您可以搜索`key_cache`, `SQL` `Partition`, `performance tuning`;

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-17T17:24:50.453

您可以使用`JOIN`来提高性能。在 JOIN 中，RDBMS 可以创建一个更适合您的查询的执行计划，这与子查询不同，子查询将运行所有查询并加载所有数据以进行处理。

# eclipse - Eclipse / IBM RSA Rational Software Architect 中缺少“服务器视图”

> ID：12779897
> 
> 赞同：11
> 
> 时间：2012-10-08T10:30:34.653
> 
> 标签：eclipse, rational-rsa, ibm-rational

我在新的 RSA for WebSphere Software 安装中缺少*“服务器视图”*。*它在"Window > Show View > Other..."*中也不可用。

有人有想法吗？我希望从一开始就可以使用该视图。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-08T12:52:32.503

这是解决方案：您必须**在 RSA 中启用“JEE 开发人员能力”。**

您可以在*“窗口”-“首选项”-“常规”-“功能”*下找到所有功能。启用上述功能后，服务器视图将可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:53:22.127

我记得（现在可能不是这样），RSA 默认只安装基础。您必须返回安装包并选择附加的可选功能进行安装。

# android - 如何从monkey talk ide连接应用程序？

> ID：12779900
> 
> 赞同：1
> 
> 时间：2012-10-08T10:30:57.803
> 
> 标签：android

如何从monkey talk ide连接应用程序？我正在尝试在monkey talk上运行android应用程序。我安装了 android sdk、monkey talk、eclipse，并尝试按照文档运行应用程序。但我无法运行该应用程序，每次在模拟器中都发生强制关闭。它显示了一些致命的异常。请帮助摆脱这个...

10-09 11:05:16.648: 错误/AndroidRuntime(277): 致命异常: main

10-09 11:05:16.648: 错误/AndroidRuntime(277): java.lang.ExceptionInInitializerError

10-09 11:05:16.648: 错误/AndroidRuntime(277): 在 java.lang.Class.newInstanceImpl(Native Method)

10-09 11:05:16.648: 错误/AndroidRuntime(277): 在 java.lang.Class.newInstance(Class.java:1429)

10-09 11:05:16.648: 错误/AndroidRuntime(277): 在 android.app.Instrumentation.newActivity(Instrumentation.java:1021)

10-09 11:05:16.648: 错误/AndroidRuntime(277): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)

10-09 11:05:16.648: 错误/AndroidRuntime(277): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)

10-09 11:05:16.648: 错误/AndroidRuntime(277): 在 android.app.ActivityThread.access$2300(ActivityThread.java:125)

10-09 11:05:16.648: 错误/AndroidRuntime(277): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)

10-09 11:05:16.648: 错误/AndroidRuntime(277): 在 android.os.Handler.dispatchMessage(Handler.java:99)

10-09 11:05:16.648: 错误/AndroidRuntime(277): 在 android.os.Looper.loop(Looper.java:123)

10-09 11:05:16.648: 错误/AndroidRuntime(277): 在 android.app.ActivityThread.main(ActivityThread.java:4627)

10-09 11:05:16.648: 错误/AndroidRuntime(277): 在 java.lang.reflect.Method.invokeNative(Native Method)

10-09 11:05:16.648: 错误/AndroidRuntime(277): 在 java.lang.reflect.Method.invoke(Method.java:521)

10-09 11:05:16.648: 错误/AndroidRuntime(277): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)

10-09 11:05:16.648: 错误/AndroidRuntime(277): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)

10-09 11:05:16.648：错误/AndroidRuntime（277）：在 dalvik.system.NativeStart.main（本机方法）

10-09 11:05:16.648: 错误/AndroidRuntime(277): 原因: java.lang.NoClassDefFoundError: org.aspectj.runtime.reflect.Factory

10-09 11:05:16.648: 错误/AndroidRuntime(277): 在 com.mytest.Mymonkeytest1Activity.ajc$preClinit(Mymonkeytest1Activity.java:1)

10-09 11:05:16.648: 错误/AndroidRuntime(277): 在 com.mytest.Mymonkeytest1Activity.(Mymonkeytest1Activity.java:1)

10-09 11:05:16.648: 错误/AndroidRuntime(277): ... 还有 15 个

10-09 11:05:16.708: WARN/ActivityManager(59): 强制完成活动 com.mytest/.Mymonkeytest1Activity

10-09 11:05:17.288: WARN/ActivityManager(59): HistoryRecord{44efd5f0 com.mytest/.Mymonkeytest1Activity} 的活动暂停超时

提前致谢 ....

# c# - MVC3 C# Facebook 登录集成

> ID：12779902
> 
> 赞同：0
> 
> 时间：2012-10-08T10:31:16.410
> 
> 标签：c#, facebook, asp.net-mvc-3

我正在尝试根据以下教程创建一个使用 facebook 登录的 MVC3 C# 简单应用程序：

[http://facebooksdk.codeplex.com/wikipage?title=Getting%20Started%20with%20an%20ASP.NET%20MVC%203%20Website](http://facebooksdk.codeplex.com/wikipage?title=Getting%20Started%20with%20an%20ASP.NET%20MVC%203%20Website)

我在 facebook 中设置了一个应用程序，设置如下：

1.  选择了 facebook 登录的网站
2.  网站网址：`http://localhost:14568/`<-- 14568 与我在 VS2010 中为该项目设置的端口号相同。
3.  我已将我从 facebook 收到的 appId 和 appSecret 添加到我的 webconfig 文件中，如教程中所示。

当我运行我的应用程序并单击我的 facebook 登录图标时，它会将我重定向到 facebook，然后我登录到 facebook，选择不保存设备。完成此步骤后，我在 facebook 中收到以下错误：

**作为登录过程的一部分，可能发生了错误。您可以关闭此窗口并尝试返回应用程序，但它可能会要求您再次登录。这可能是由于应用程序中的错误。**

我完全按照教程进行了操作，但出现了这个错误，我在教程中注意到，在 facebook 中设置应用程序看起来不同。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:47:59.967

看来您必须在 facebook 中注册该页面的 URL，可从 Internet 访问。就您使用`http://localhost:<portnumber>`facebook API 而言，您无法访问您的页面。

# windows-store-apps - 当必须在 Windows Store App 中等待结果（没有 Dispatcher）时，如何将执行传递给任务中的 UI 线程？

> ID：12779910
> 
> 赞同：0
> 
> 时间：2012-10-08T10:31:42.203
> 
> 标签：windows-store-apps, winrt-async

这是我在 Windows 应用商店应用论坛中的问题的重复：

我有一个等待的方法返回一个任务。它通过了指定的代表做出决定。该任务遍历一些对象并调用委托以确定是否应该处理一个对象。在经典的 .NET 中，我将按如下方式实现：

```
private Task ProcessDemo(Func<int, bool> processDecisionHandler)
{
   // Get the current SynchronizationContext
   SynchronizationContext synchronizationContext = SynchronizationContext.Current;

   return Task.Run(() =>
   {
      for (int i = 0; i < 10; i++)
      {
         // Invoke the process decision handler in the UI thread 
         bool process = false;
         synchronizationContext.Send((state) => { process = processDecisionHandler(i); }, i);
         if (process)
         {
            // Process the item
            ...
         }
      }
   });
} 
```

可以像这样调用此方法：

```
private async void testButton_Click(object sender, RoutedEventArgs e)
{
   this.WriteLine("UI-Thread ({0})", Thread.CurrentThread.ManagedThreadId);

   Func<int, bool> handler = (i) =>
   {
      if (MessageBox.Show("Process " + i + "?", this.Title, MessageBoxButton.YesNo, MessageBoxImage.Information) == MessageBoxResult.Yes)
      {
         return true;
      }
      else
      {
         return false;
      }
   };

   await this.ProcessDemo(handler);
} 
```

在 Windows Store Apps 中，我面临 SynchronizationContext 的 Send 方法不可用的问题。Post 显然对我的目标不起作用，因为我必须“等待”处理程序结果。

如果没有 Dispatcher（我在库代码中没有），我怎么能实现我的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:05:33.340

如果它总是从 UI 线程调用，那么您可以执行以下操作：

```
private Task ProcessDemo(Func<int, bool> processDecisionHandler)
{
  for (int i = 0; i < 10; i++)
  {
    // Invoke the process decision handler in the UI thread
    if (processDecisionHandler(i))
    {
      // Process the item on a threadpool thread.
      await Task.Run(...);
    }
  }
} 
```

# ipad - 在 iPad 的登录页面后推送我的 UISplitViewController？

> ID：12779912
> 
> 赞同：1
> 
> 时间：2012-10-08T10:31:44.580
> 
> 标签：ipad, uinavigationcontroller, uisplitviewcontroller

我的应用程序在完成启动后加载登录页面。登录成功后，我需要从登录页面导航到详细视图（这是一个 SplitViewController）。我试过推送拆分视图，但错误报告说

```
 "Split View Controllers cannot be pushed to a Navigation Controller <UINavigationController:" 
```

谷歌搜索后，我发现拆分视图控制器必须始终是任何接口的根。

他们有更好的解决方案来在登录页面后显示我的详细 SplitViewController 吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:12:49.607

试试这个代码。

```
NSMutableArray *allViewControllers = [NSMutableArray arrayWithArray:self.navigationController.viewControllers]; 

[allViewControllers replaceObjectAtIndex:0 withObject:split]; 

//you can add or replace 

self.navigationController.viewControllers = allViewControllers; 
```

# c# - MVC 中的 URL 隐藏

> ID：12779913
> 
> 赞同：0
> 
> 时间：2012-10-08T10:31:47.903
> 
> 标签：c#, asp.net-mvc

任何人都可以帮助我。如何管理地址栏中的 url，不会因某个控制器中的每个操作（创建/编辑/删除等）而更改。

例如，如果我们在像“http://localhost/Music”这样的页面中

当我们添加时，我们会得到'http://localhost/Music/Add'

但是在编辑特定项目详细信息时'http://localhost/Music/Edit?id=XXXXXXX'

在这里，我想每次都将网址显示为“http://localhost/Music/”，如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T10:33:16.673

如果您希望用户始终停留在同一页面上，则需要使用 AJAX。所以基本上你不会执行完整的回发，而只会执行异步 AJAX 调用。

例如，您可以使用`Ajax.*`帮助程序或自己实现此功能[`jQuery.ajax`](http://api.jquery.com/jQuery.ajax/)。

# c - 错误：在 '{' 标记之前应有 '='、','、';'、'asm' 或 '__attribute__'

> ID：12779914
> 
> 赞同：17
> 
> 时间：2012-10-08T10:31:52.663
> 
> 标签：c

我正在研究一个解析文本文件的项目，该文件假设是一个简单的编码程序。问题是当我尝试编译程序时出现此错误：

```
In file included from driver.c:10:
parser.c: In function ‘Statement’:
parser.c:24: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
parser.c:153: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
parser.c:159: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
parser.c:167: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
parser.c:176: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
parser.c:185: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
parser.c:194: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
parser.c:201: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
parser.c:209: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
driver.c:19: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
driver.c:50: error: old-style parameter declarations in prototyped function definition
driver.c:50: error: expected ‘{’ at end of input 
```

我不熟悉这个错误，不知道如何修复它。

这是我的 parser.c 文件，错误发生在：

```
#include <stdio.h>
#include <stdlib.h>
#include "parser.h"

AST_NODE* Program(AST_NODE* node);
AST_NODE* Statement(AST_NODE* node)
AST_NODE* AssignStmt(AST_NODE* node);
AST_NODE* Print(AST_NODE *node);
AST_NODE* Repeat(AST_NODE* node);
AST_NODE* Exp(AST_NODE* node);
AST_NODE* Factor(AST_NODE* node);
AST_NODE* Term(AST_NODE* node);

AST_NODE* parser(TOKEN* token,AST_NODE* node, FILE* input_file)
{
    AST_NODE temp = malloc(sizeof(AST_NODE*));

    if(token->type == Id)
    {
        temp-> tok = token;
        node -> child1 = temp;
        return node
    }else
    if(token->type == keyword)
    {
        if(strcmp(node->attribute, "print") == 0)
        {
            temp -> type = print;
            node -> child1 = temp;
            return node;
        }
        else if(strcmp(node->attribute, "repeat") == 0)
        {
            temp -> type = repeat;
            node -> child1 = temp;
            return node;
        }
        return node->prev;
    }else
    if(token->type == num)
    {

        temp->type = factor;
        temp->tok = token;
        AST_NODE temp2 = Exp(Term(temp));
        node-> child3 = temp2

        return node;//back to ID->term->exp then to either print repeat or assignment
    }else
    if(token->type == addOp)
    {
        temp-> tok = token;
        node-> child2 = temp;
        return node;
    }else
    if(token->type == multOp)
    {
        temp-> tok = token;
        node-> child2 = temp;
        return node;
    }else
    if(token->type == assignment)
    {
        temp->type = assignStmt;
        temp->tok = token; 
        node->child2 = temp;
        return node;
    }else
    if(token->type == semicolon)
    {
        temp-> type = assignStmt;
        temp-> tok = token;
        if(node->type == keyword)
        {
            node->child3 = temp;
        }else
        {
            node->child4 = temp;
        }
        return node;
    }else
    if(token->type == lparen)
    {
        temp -> tok = token;
        if(node->type == repeat)
            node->child2 = temp;
        else
            node->child1 = temp;

        return node = node->prev;
    }else
    if(token->type == rparen)
    {
        temp -> tok = token;
        if(node->type == repeat)
            node->child4 = temp;
        else
            node->child3 = temp;

        return node;
    }else if(token->type == newLine)
    {
        while(node->type != program)
        {
            node = node->prev;
        }
        return node;
    }else{

        if(token->type == Id)
        {
            AST_NODE temp2 =  AssignStmt(Program(node));
            temp->type = Id;
            temp->tok = token
            temp->prev = temp2;
            temp2-> child1 = temp;
            return temp2;
        }else if(strcmp(token->attribute,"print"))
        {

            AST_NODE temp2 =  Print(Program(node));
            temp->type = print;
            temp->tok = token
            temp->prev = temp2;
            temp2-> child1 = temp;
            return temp2;
        }else if(strcmp(token->attribute,"repeat"))
        {

            AST_NODE temp2 =  Repeat(Program(node));
            temp->type = repeat;
            temp->tok = token
            temp->prev = temp2;
            temp2-> child1 = temp;
            return temp2;
        }
        printf("error");
        return NULL;
    }

}
AST_NODE* Program(AST_NODE* node)
{
    node->type = program;
    Statement(node);
    return node;
}
AST_NODE* Statement(AST_NODE* node)
{
    AST_NODE temp = malloc(sizeof(AST_NODE*));
    temp-> type = statement;
    temp-> prev = node;
    node->child1-> temp;
    return temp;
}
AST_NODE* AssignStmt(AST_NODE* node)
{
    AST_NODE temp = malloc(sizeof(AST_NODE*));
    temp->type = assignStmt;
    temp-> prev = node;
    node->child1-> temp;
    return temp;

}
AST_NODE* Print(AST_NODE* node)
{
    AST_NODE temp = malloc(sizeof(AST_NODE*));
    temp->type = print;
    temp-> prev = node;
    node->child1-> temp;
    return node;

}
AST_NODE* Repeat(AST_NODE* node)
{
    AST_NODE temp = malloc(sizeof(AST_NODE*));
    temp->type = repeat;
    temp-> prev = node;
    node->child1-> temp;
    return node;

}
AST_NODE* Exp(AST_NODE* node)
{
    AST_NODE temp = malloc(sizeof(AST_NODE*));
    temp->type = exp;
    temp->child1-> node;
    return temp;
}
AST_NODE* factor(AST_NODE* node)
{
    AST_NODE Temp = malloc(sizeof(AST_NODE*));
    temp->type = factor;
    node->child1-> temp;
    return temp;

}
AST_NODE* Term(AST_NODE* node)
{
    AST_NODE temp = malloc(sizeof(AST_NODE*));
    temp->type = term;
    temp->child1-> node;
    return temp;

} 
```

这是我的 driver.c 文件，在该文件中我还收到错误“原型函数定义中的旧式参数声明在输入末尾预期为'{'”。这也是我很陌生的。

```
#include <stdio.h>
#include "parser.c"
#include "parser.h"

AST_NODE* parser(TOKEN* token,AST_NODE node, FILE *input_file);

int main(void)
{
    TREE *current = 0;
    FILE *input_file = fopen("test.txt", "r");
    TOKEN *token = (TOKEN*) malloc(sizeof(TOKEN));
    TOKEN *tok = (TOKEN*) malloc(sizeof(TOKEN));
    AST_NODE* node = malloc(sizeof(AST_NODE));

    while(!feof(input_file))
    {
    token = scan(input_file);

        if(token->type != null)
        {
            parser(token,node,input_file);
            printf("%s", token->attribute);
            if(token->checkR == ';')
            {

                tok->type = semicolon;
                tok->attribute = ";";
                parser(tok,node,input_file);            
            }if(token->checkR == ')')
            {
                tok->type = rparen;
                tok->attribute = ")";
                parser(tok,node,input_file);
            }
        }
    }
    fclose(input_file);
    return 0;
} 
```

这是我的 parser.h 文件，我在其中声明我的 TOKEN 和我的 AST_NODE 来创建我的树并形成我的令牌来填充树。

```
#ifndef _parser_h
#define _parser_h

typedef enum token_type
{
    null,
    Id,
    keyword,
    num,
    addOp,
    multOp,
    assignment,
    semicolon,
    lparen,
    rparen,
    newLine
}TOKEN_TYPE;

typedef struct token{
    int type;
    char *attribute;
    char checkR;
}TOKEN;

typedef enum node_type
{
    program,
    statement,
    assignStmt,
    print,
    repeat,
    exp,
    factor,
    term
}NODE_TYPE;

typedef struct ast_node{
    NODE_TYPE type;
    TOKEN *tok;
    struct AST_NODE *prev;
    struct AST_NODE *child1;
    struct AST_NODE *child2;
    struct AST_NODE *child3;
    struct AST_NODE *child4;
    struct AST_NODE *child5;

}AST_NODE;

#endif 
```

还有一个名为scanner.c 的文件，但我知道它工作得很好，因为我已经在所有可能的输入中对其进行了测试并且没有遇到任何问题。

如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-08T10:40:38.047

```
AST_NODE* Statement(AST_NODE* node) 
```

缺少分号（主要线索是错误消息“In function 'Statement': ...”），第 24 行也是如此，

```
 return node 
```

（一旦你解决了这些问题，你会遇到其他问题，其中一些是其他人在这里提到的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:36:15.633

1.  您似乎包含了一个来自花药的 C 文件。`#include`通常应仅与头文件一起使用。

2.  在您的定义中，`struct ast_node`请参阅`struct AST_NODE`不存在的 。C 区分大小写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-07T14:57:33.887

我在代码中遇到了同样的问题，我所做的是我发现了我从上次正确编译中所做的所有更改。而且我观察到一个函数声明没有“；” 而且它正在传递一个值，我已经声明它不会传递任何“无效”。这种方法肯定会解决很多人的问题。

威斯康

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T10:38:48.420

在解析器函数的末尾附近您错过了“}”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-23T11:34:26.780

你的函数声明出错了，看下面这句话！你需要一个分号！</p>

* * *

```
AST_NODE* Statement(AST_NODE* node) 
```

# spring - HttpInvokerServiceExporter + HttpInvokerProxyFactoryBean - 无法访问 HTTP 调用程序远程服务

> ID：12779915
> 
> 赞同：0
> 
> 时间：2012-10-08T10:31:53.973
> 
> 标签：spring, remote-access, http-proxy, httpinvoker

我正在尝试使用 HttpInvokerServiceExporter + HttpInvokerProxyFactoryBean，但无论我做什么都会出现异常：

```
org.springframework.remoting.RemoteAccessException: Could not access HTTP invoker remote service at [http://localhost:9999/testcaseapp/testcaseservice]; nested exception is java.io.IOException: Did not receive successful HTTP response: status code = 404, status message = [Not Found] 
```

为简单起见，我创建了一个测试用例。

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration
public class RemoteTest {

    private static final Logger logger = LoggerFactory.getLogger("TestsLogger");

    static interface TestCaseService {
        public Integer add(Integer arg1, Integer arg2);
    }
    static class TestCaseServiceImpl implements TestCaseService {
        public Integer add(Integer arg1, Integer arg2) {
            return (arg1 != null ? arg1.intValue() : 0) + (arg2 != null ? arg2.intValue() : 0);
        }
    }

    @Configuration
    static class Config {
        @Bean
        public HttpInvokerServiceExporter httpInvokerServiceExporter() {
            HttpInvokerServiceExporter httpInvokerServiceExporter = new HttpInvokerServiceExporter();
            httpInvokerServiceExporter.setService(new TestCaseServiceImpl());
            httpInvokerServiceExporter.setServiceInterface(TestCaseService.class);
            return httpInvokerServiceExporter;
        }
        @Bean
        public HttpInvokerProxyFactoryBean httpInvokerProxyFactoryBean() {
            HttpInvokerProxyFactoryBean httpInvokerProxyFactoryBean = new HttpInvokerProxyFactoryBean();
            httpInvokerProxyFactoryBean.setServiceInterface(TestCaseService.class);
            httpInvokerProxyFactoryBean.setServiceUrl("http://localhost:9999/testcaseapp/testcaseservice");
            httpInvokerProxyFactoryBean.afterPropertiesSet();
            return httpInvokerProxyFactoryBean;
        }
    }

    @Autowired
    private TestCaseService[] testCaseServices;
    private static Server server;

    @BeforeClass
    public static void setUp() {
        try {
            server = new Server();
            SelectChannelConnector connector = new SelectChannelConnector();
            connector.setPort(9999);
            server.addConnector(connector);
            //
            WebAppContext webAppContext = new WebAppContext();
            webAppContext.setContextPath("/testcaseapp");
            webAppContext.setWar("src/test/java/" + RemotingTest.class.getPackage().getName().replace('.', '/'));
            server.setHandler(webAppContext);
            //
            server.start();
        } catch (Exception ex) {
            logger.info("Could not permorm the set up: {}", ex.toString());
        }
    }

    @AfterClass
    public static void destroy() {
        try {
            server.stop();
        } catch (Exception e) {
        }
    }

    @Test
    public void addTest() {
        for (TestCaseService testCaseService : testCaseServices) {
            Integer sum = testCaseService.add(10, 5);
            Assert.assertNotNull(sum);
            Assert.assertEquals(15, sum.intValue());
        }
    }

} 
```

我也尝试过创建一个 TestCaseService bean

```
@Bean public TestCaseService testCaseService() ... 
```

并将其作为 httpInvokerServiceExporter 参数提供

```
@Bean public HttpInvokerServiceExporter httpInvokerServiceExporter(TestCaseService testCaseService)
...
httpInvokerServiceExporter.setService(testCaseService); 
```

但结果还是一样。

我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:41:55.490

我认为问题在于 Servlet 不可访问。

**服务器端**

确保您的 WEB-INF/web.xml（在公开方法 -SERVER- 的应用程序上）中有以下代码：

```
<web-app>
...
<servlet>
    <servlet-name>remoting</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>remoting</servlet-name>
    <url-pattern>/services/*</url-pattern>
</servlet-mapping>
...
</web-app> 
```

在这里，远程方法在“服务”下提供服务，即调用该方法的 URL 应该是：

```
http://localhost:8080/sample/services/list 
```

您必须通过创建一个 bean（在我的例子中，在 WEB-INF/remoting-servlet.xml 下）将此 Servlet 定义为可访问的：

```
<bean name="/list" class="org.springframework.remoting.httpinvoker.HttpInvokerServiceExporter">
    <property name="service" ref="myObjectQueryService" />
    <property name="serviceInterface" value="com.kategor.myapp.sample.service.ObjectQueryService" />
</bean> 
```

**客户端**

如果您在客户端下使用 Spring（不像您的示例中那样），则必须定义一个用于访问远程资源的 bean，定义一些 bean（每个公共资源一个）：

在这种情况下，它将是：

```
<bean id="listService" class="org.springframework.remoting.httpinvoker.HttpInvokerProxyFactoryBean">
    <property name="serviceUrl" value="http://localhost:8080/sample/services/list" />
    <property name="serviceInterface" value="com.kategor.myapp.sample.service.ObjectQueryService" />
</bean> 
```

在你的例子中是对的。

这样，调用服务“listService”，您将拥有类 com.kategor.myapp.sample.service.ObjectQueryService 中可用的所有方法

```
@Controller
public class HomeController {

    // This is the remote service definition
    @Autowired
    private ObjectQueryService<MyObject, Long> objectQueryService;

    /* .... */

    /**
     * List all Objects retrieved through Web Service from a remote Server
     */
    @RequestMapping(value = "listRemoteWS", method = RequestMethod.GET)
    public String listRemoteWS(Locale locale, Model model) {

        StringBuilder result = new StringBuilder();
        try {

            // The Remote Service is called
            List objs = objectQueryService.findAll(0, 10);
            result.append(objs.size() + " objs found");

        for (MyObject o : objs) {
            result.append("<br>* ").append(o.getId()).append(" = ").append(o.getName());
        }

        } catch (Exception e) {

            result.append("No objs have been found");
            e.printStackTrace();

        }

        model.addAttribute("result", result);

        return "index";
    }

} 
```

所以我认为问题来自 URL：也许服务不可见或者这不是它的正确路径。

有关更多信息，请查看此链接（第一个非常有用）：

[https://github.com/JamesEarlDouglas/barebones-spring-mvc/tree/master/reference/spring-remoting](https://github.com/JamesEarlDouglas/barebones-spring-mvc/tree/master/reference/spring-remoting)

[http://www.ibm.com/developerworks/web/library/wa-spring3webserv/index.html](http://www.ibm.com/developerworks/web/library/wa-spring3webserv/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-10T13:15:32.517

对我来说，问题是 tomcat 获取了相同应用程序的两个版本。这在调试模式下从 STS 运行客户端时引发了上述错误。所以解决方案是清理应用程序在tomcat中所有扩展的webapp文件夹。然后重新部署应用程序。

# android - 没有股票背景的 AlertDialog

> ID：12779918
> 
> 赞同：0
> 
> 时间：2012-10-08T10:32:07.767
> 
> 标签：android, background, android-alertdialog

这是我尝试过的：

```
 public AlertDialogEx(final Context context, View lytCustom)
    {
        // Set your theme here
        super(context, android.R.style.Theme_Translucent);
        requestWindowFeature(Window.FEATURE_NO_TITLE);

        // This is the layout XML file that describes your Dialog layout
        this.setView(lytCustom);
//        this.setContentView(lytCustom);
    } 
```

它并没有摆脱黑色背景：

![在此处输入图像描述](../Images/c363f84a6eb7ed88b0f94201b3f33335.png)

使用`setContentView()`而不是`setView()`抛出臭名昭著的“requestFeature() 必须在添加内容之前调用”消息，不幸的是没有明显的原因。我怎样才能实现我的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:11:24.777

最终得到了一个常规的全屏 Activity，而不是使用主题 @android:style/Theme.Translucent.NoTitleBar 的 AlertDialog，并且有很多透明背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:38:56.713

您应该在 xml 布局文件/中定义对话框的背景，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="?windowBackground"
android:orientation="vertical" >
.........................
body of your dialog
...........................
</LinearLayout> 
```

或者您可以以编程方式执行此操作

```
 view.setBackgroundColor(color) 
```

# iphone - iOS：webView 委托方法并不总是被调用

> ID：12779926
> 
> 赞同：1
> 
> 时间：2012-10-08T10:32:36.733
> 
> 标签：iphone, ios, jquery-mobile, uiwebview, back-button

我想为我的 web 视图设置后退/前进按钮，所以我检查了所有 4 个 web 视图委托方法中的 canGoBack、canGoForward 状态。委托设置正确，并且在大多数情况下都会调用方法。但是，在少数情况下，它们不会被调用：

*   当我调用 [webView goBack] 时（对于某些链接）
*   当我单击一个链接时，返回，然后再次单击该链接（再次，对于某些链接）。

我怀疑它与 jquery 移动库或该页面中使用的 html/css 有关。但是，Safari 后退按钮可以正常工作。

那么除了制作计时器之外，我如何跟踪后退/前进按钮的状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:13:30.317

也许你错过了`webViewDidFinishLoading`重置？

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    webBack.enabled = [webView canGoBack];
    webForward.enabled = [webView canGoForward];
} 
```

# c# - Linq.ConvertAll 将类转换为接口类型

> ID：12779927
> 
> 赞同：-1
> 
> 时间：2012-10-08T10:32:41.790
> 
> 标签：c#

我有一个实现 IApp 接口的类 App 这个 IApp 接口是这样的

```
 interface IApp
    {
        string Status;
        dateTime start;
        datetime end;
    } 
```

现在我想使用 Linq 将 List 转换为 List 我可以这样做

```
//AppClassList is a List<App>
List<IApp> result = AppClassList.ConvertAll<IApp>(o => (IApp)o); 
```

但是我想在将 App 转换为 IApp 时做自定义代码，就像我想设置 Status 属性取决于开始和结束日期的差异，假设差异是一天，那么如果两天，状态将是“优秀”，如果三天，状态将是“好”然后“确定”等等...

请建议我在使用 C#.net 将 App 转换为 IApp 时如何做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:39:54.730

```
List<IApp> result = AppClassList.ConvertAll<IApp>(o => ConvertToIApp(o));
    {
        IApp result = (IApp)o;
        TimeSpan span = result .end - result .start;
        if (span.TotalDays > 1)
        {
           result.Status = "Excellent";
        }
        return result;
    }); 
```

并有这个方法：

```
public IApp ConvertToIApp(Object element)
{
    IApp result = (IApp)element;
    TimeSpan span = result.end - result.start;
    if (span.TotalDays > 1)
    {
        result.Status = "Excellent";
    }
    return result;
} 
```

你可以写：

```
List<IApp> result = AppClassList.ConvertAll<IApp>(o => ConvertToIApp(o)); 
```

或者

```
List<IApp> result = AppClassList.ConvertAll<IApp>(ConvertToIAppo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:41:50.190

认为你在追求：

```
someList.Cast<OtherType>(); 
```

您可能还想将 ToList() 粘贴在那里 + 可以始终将其包装在您自己的扩展方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:44:05.753

行，

```
IList<SomeIAppImplementor> before = ...
var iapps = new List<IApp>(before.Count)

for (i = 0; i < before.Count; i++)
{
    var iapp = (IApp)before[i];
    if (iapp. ...
    {
         iapp.Status = ...
    }
    iapps[i] = iapp;
} 
```

* * *

这将在使用索引器时准确地迭代列表一次，我认为这是您想要实现的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T10:44:18.287

您可以使用 select ，然后在 lambda`=>`开括号中使用，然后在其中`{}`处理您想要执行的操作 - 您说您想根据差异设置状态。

```
 List<App> appList = new List<App>();
  List<IApp> iAppList = appList.Select(x =>
  {
    IApp app = x;
    int difference = (app.end - app.start).Days;
    if (difference == 1)
      app.Status = "Good";
    return app;
  }).ToList(); 
```

还要使您的界面具有可以在`App`类中设置的属性，然后将其转换为 IApp 并适当地设置 IApp 的属性。

```
 interface IApp
  {
    string Status {get; set;}
    DateTime start {get; set;}
    DateTime end {get; set;}
  } 
```

# c - fork() 和 ~fork() 有什么区别

> ID：12779929
> 
> 赞同：0
> 
> 时间：2012-10-08T10:32:46.297
> 
> 标签：c, operating-system, fork

〜fork（）函数调用与简单的fork（）有何不同..我尝试了以下代码..在这个甚至孩子正在执行父部分的代码。

```
main()
{
pid_t pid = ~fork();
int a = 2;
int *ptr = (int*)malloc(sizeof(int));
*ptr = 2;
if(pid == 0)
{
    a = a + 3;
    *ptr = *ptr + 2;
    printf("value at a and ptr in child process : %d and %d\n" , a , *ptr);
    printf("address a and ptr in child process : %p and %p\n" , &a , ptr);
}
else
{
    printf("value at a and ptr in parent process : %d and %d\n" , a , *ptr);
    printf("address a and ptr in parent process : %p and %p\n" , &a , ptr);
}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T10:34:26.017

```
pid_t pid = ~fork(); 
```

是相同的

```
pid_t temporary = fork();
pid_t pid = ~temporary; 
```

您只是使用按位非运算符，而不是另一个函数。请注意，这实际上会使 fork 的返回无用，因为子级将获得`~0 == 0xff`（或另一个非零值），而父级将获得非零值`~child_id`，如果`child_id`不是的话`MAX_PID`。

这就是孩子和父母都执行给定部分的原因。

也可以看看：

*   [维基百科：按位操作#NOT](http://en.wikipedia.org/wiki/Bitwise_operation#NOT)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T10:35:04.290

`~`只是翻转返回的值的位`fork()`

# android - 我们如何在 Android 中将注册数据与 WebServices 一起发送

> ID：12779939
> 
> 赞同：0
> 
> 时间：2012-10-08T10:33:49.683
> 
> 标签：android, web-services

我要制作一个安卓应用程序。在注册过程中，我必须填写两个字段

*   电话号码
*   姓名

除了这两个字段，我还必须动态发送我的设备 ID、当前时间和操作系统版本。

我该怎么做？

我的网络服务是 [http://frapp.badoniya.com/webservices/register.php?username=Vijay%20&deviceid=12345&mobile=98XXXXXXXX&platform=Android&os_version=4.0](http://frapp.badoniya.com/webservices/register.php?username=Vijay%20&deviceid=12345&mobile=98XXXXXXXX&platform=Android&os_version=4.0)

请给我一个逐步的解决方案。因为我是编程新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:36:51.613

您必须使用 AsyncTask 并且在异步任务中您可以使用 HTTPPost 或 HTTPGet 请求使用参数调用 Web 服务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:49:31.457

使用 AsyncTask 来实现您正在寻找的东西。下面是一些关于如何使用 AsyncTask、发送 GET 请求和发送 POST 请求的示例。对于这种情况，您必须发送一个 GET 请求。

**GET 请求**
[示例 1](https://stackoverflow.com/questions/4634052/http-get-request-in-android)
[示例 2](https://stackoverflow.com/questions/2959316/how-to-add-parameters-to-a-http-get-request-in-android)

**POST 请求**
[示例 1](http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient)

**异步任务**
[示例 1](http://www.vogella.com/articles/AndroidPerformance/article.html)

# c# - IXmlSerializable 和 XmlRootAttribute

> ID：12779940
> 
> 赞同：1
> 
> 时间：2012-10-08T10:34:02.183
> 
> 标签：c#, xml, serialization

我对 xml 序列化有一个奇怪的要求。

请参阅以下 C# 代码（由于变量“rootName”超出范围而无法编译）。我的意图是让我的 GeneralData 类成为“通用”类。这意味着该类可以根据类构造函数的输入参数，序列化为具有不同根元素的不同 XML 字符串。

```
[XmlRoot(ElementName = rootName)]
public class GeneralData : Dictionary<String, Object>, IXmlSerializable
{
    public string rootName;
    public GeneralData(string rootName)
    {
        this.rootName = rootName;
    }

    public System.Xml.Schema.XmlSchema GetSchema()
    {
        throw new NotImplementedException();
    }

    public void ReadXml(System.Xml.XmlReader reader)
    {
        throw new NotImplementedException();
    }

    public void WriteXml(System.Xml.XmlWriter writer)
    {
        foreach (var key in Keys)
        {
            var value = base[key];
            writer.WriteElementString(key, value.ToString());
        }
    }
} 
```

任何人都可以帮助我完成任务吗？也许以完全不同的方式？提前致谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T10:39:33.903

`IXmlSerializable`无法控制根元素。所以不，你真的不能那样做。您可以做的最接近的方法是使用`new XmlSerializer(...)`允许您在运行时指定根名称的重载（在构造函数中），但您应该小心：非平凡的构造函数`XmlSerializer`不使用内置的序列化程序缓存，这意味着：您最终可以创建一个新的程序集`new XmlSerializer(...)`，并且永远不会卸载程序集。如果您不为序列化程序实例添加自己的缓存层，这可能会导致内存泄漏问题。

# android - 增量绘图

> ID：12779946
> 
> 赞同：1
> 
> 时间：2012-10-08T10:34:24.433
> 
> 标签：android, canvas, drawing

我试图在一个单独的线程中逐步在画布上绘制波形，即在线程的每个循环中仅绘制硬件最近获取的部分而不重绘整个曲线。

我不确定我是否可以依赖保留在`SurfaceHolder.unlockCanvasAndPost`和之间的画布内容`SurfaceHolder.lockCanvas`。

文档似乎对此有点模棱两可，我的实验给出了令人惊讶的结果：在绘图线程的两个后续循环中返回的画布的“旧”内容是不同的。看起来好像交替使用了两个画布（但我检查了 - 它是相同的画布但内容不同）。

我发现重现此行为的最简单方法：

1.  导入 LunarLander 示例应用程序。

2.  在 LunarView.run 方法中，在循环中插入 sleep(500) 指令。

3.  在 LunarView.doDraw 方法中注释掉以下行： `canvas.drawBitmap(mBackgroundImage, 0, 0, null);`，它会删除旧的内容。

运行游戏，让飞船坠毁。您将看到船的中间位置，但它们会闪烁：奇数和偶数位置将交替显示。

所以，我的问题是：我们是否可以绘制仅对之前绘制的内容添加更改的图片？如果可以，是否有任何记录在案的方法来处理上述奇怪行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:10:57.243

登月不缓存。它每次都绘制背景图像（刷新），然后绘制宇宙飞船。

```
private void doDraw(Canvas canvas) {
            // Draw the background image. Operations on the Canvas accumulate
            // so this is like clearing the screen.
            canvas.drawBitmap(mBackgroundImage, 0, 0, null); 
```

仔细检查您的 If 子句。也许一个是真假交替。这将导致事物快速连续绘制然后不绘制。

如果需要，请使用 Log 输出您的布尔值，看看是否有变化。

如果做不到这一点，则改为以下游戏循环。

[http://blorb.tumblr.com/post/236799414/simple-java-android-game-loop](http://blorb.tumblr.com/post/236799414/simple-java-android-game-loop)

# asp.net - 如何解决asp.net中超出限制的内存消耗？

> ID：12779951
> 
> 赞同：3
> 
> 时间：2012-10-08T10:34:59.667
> 
> 标签：asp.net, .net, iis, iis-6

我在 asp.net [.net 4 框架和 Visual Studio 2010] 中创建了一个 Web 应用程序。现在我使用 IIS 5.1 版本运行。当我运行我的应用程序时，我收到以下错误

```
Server Application Unavailable
 The web application you are attempting to access on this web server is currently unavailable.  Please hit the "Refresh" button in your web browser to retry your request.

Administrator Note: An error message detailing the cause of this specific request failure can be found in the application event log of the web server. Please review this log entry to discover what caused this error to occur. 
```

我还用 EventViewer 检查...它说

```
Event Type: Error
Event Source:   ASP.NET 4.0.30319.0
Event Category: None
Event ID:   1001
Date:       8/10/12
Time:       9:55:47 AM
User:       N/A
Computer:   SARAVANAN-
Description:
aspnet_wp.exe  (PID: 1724) was recycled because memory consumption exceeded the 1221 MB (60 percent of available RAM).

For more information, see Help and Support Center at http://go.microsoft.com/fwlink/events.asp. 
```

我不知道如何解决这个问题？有什么方法可以增加我的 IIS 的 RAM 内存消耗限制。

请指导我摆脱这个问题......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:50:13.213

底线 - 你应该调试代码，看看为什么它需要这么多内存。

但是要回答您的实际问题，是的，有一种方法可以增加此限制。

在 machine.config 文件中有一个名为“processModel”的部分，默认情况下它看起来像这样：

> `<processModel autoConfig="true"/>`

如果您更改它以添加“memoryLimit”值，这将修改用于确定何时回收进程的百分比值。例如：

> `<processModel autoConfig="true" memoryLimit="90"/>`

这将允许进程在进程被回收之前消耗 90% 的可用 RAM。默认值为“60”。当然，您也可以设置较低的值。

# java - Flex Remoting - 在数据序列化期间更改对象名称

> ID：12779952
> 
> 赞同：1
> 
> 时间：2012-10-08T10:35:01.223
> 
> 标签：java, apache-flex

在将数据（数据序列化）从 Java（服务器）传递到 Flex（客户端）时，对象的名称正在发生变化。请在下面找到详细信息。

# 爪哇波乔

```
public class MSC
{
   public String Column1;
   public String Column2;
} 
```

# Java 远程类

```
public List<MSC> getData()
{
   MSC pojoMSC = new MSC;
   pojoMSC.Column1 = "1";
   pojoMSC.Column2 = "2";

   List<MSC> listMSC = new ArrayList<MSC>;
   listMSC.add(pojoMSC);
   return listMSC;
} 
```

# Flex 结果处理程序

```
var ReturnData:ArrayColelction = event.result as ArrayCollection; 
```

当我调试并观察表达式 ReturnData 时，我得到以下信息

```
ReturnData
  [0]
     column1   "1"
     column2   "2" 
```

虽然过程都是正确的，值也都是正确的，但是ReturnData的0索引的对象名称从Column1更改为column1，Column2更改为column2。

我认为这是由 Flex AMF 数据序列化完成的。如何防止它，以便我可以将 Coulmn1 作为 Column1 等。如果不是，它背后的概念是什么。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:42:30.917

是的，这是因为 BlazeDS 使用 Java Bean 命名约定。

首先，在 Java 中，类的成员（字段、方法）的名称不以大写字母开头。

其次，遵循封装原则并将您的字段设为私有并使用 getter/setter 来改变它们是一种很好的做法。

在你的情况下，这将是这样的：

```
public class MSC
{
   private String column1;
   private String column2;

   public String getColumn1(){
      return column1;
   }

   public void setColumn1(String value) {
      column1 = value;
   }  

   public String getColumn2(){
      return column2;
   }

   public void setColumn2(String value) {
      column2 = value;
   } 
} 
```

但总的来说：不要以大写字母开头变量。

# dynamics-crm - 如何将带有自定义服务器端处理程序的功能区按钮添加到 Dynamics CRM Web？

> ID：12779960
> 
> 赞同：0
> 
> 时间：2012-10-08T10:35:57.133
> 
> 标签：dynamics-crm

我们需要将用户在联系人网格中选择的一些外部系统组导入。

目前我看到的唯一选项是：如果选择了联系人，则获取 ID，并使用 JavaScript 将其发送到外部系统。

但是是否有可能在功能区按钮按下获取服务器端选定联系人的列表？我们想在服务器上处理这些联系人并使用我们的 C# 代码（很可能在插件中）将它们发送到外部系统？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:13:57.593

是的，以一种略显冗长的方式。您不能直接从 JavaScript 调用服务器端代码。但是，您可以执行将调用服务器端代码的操作。

例如：

*   创建一个新实体 - 'Contact Processor'，它具有对联系人的查找。
*   在“联系处理器”的创建上放置一个插件（或自定义工作流活动）。这使用查找联系人来执行您需要的任何逻辑，例如将数据发送到外部系统。
*   您将一些 JavaScript 添加到功能区按钮，单击该按钮会创建“联系人处理器”记录，这将触发服务器端代码。

# mvvm - 导航分层数据、FrameAdapter、Frame 控件

> ID：12779965
> 
> 赞同：1
> 
> 时间：2012-10-08T10:36:12.423
> 
> 标签：mvvm, tree, microsoft-metro, windows-runtime, caliburn.micro

我想实现导航树结构，就像在 WinRT 文件选择器中完成的那样。然后我希望能够将此行为作为任何页面的一部分删除。

我目前的尝试是尝试在容器中注册一个辅助`FrameAdapter`/`INavigationService`并将其用于与应用程序根框架不同的框架。到目前为止，我无法让它工作。我背后的动机是，我不想重新实现某事。已经`INavigationService`提供的。

基本结构：

*   `ShellView`表示一般应用程序布局（页眉、页脚、导航），目前是`OneActive`导体。

*   `Frame`control ( `x:Name="ActiveItem"`) 在`ShellView`应该发生分层导航的内部

*   选择的导体还没有相关性，因为稍后我可能必须将其嵌套`FrameControl`在另一个视图中才能真正设置 MDI 界面。我将希望有多个应该能够分层导航的屏幕

我找不到这种情况的 CM WP7 示例

你能帮帮我吗？

到目前为止我的问题：

*   如何在不使用`Application.Current`. 我想，我想在代码隐藏中设置 secondary `FrameAdapter`，因为在这里我可以访问`FrameControl`

*   如何设置`INavigationService`CM 的初始加载（填充`ActiveItem`）在其中注册。这个初始显示似乎没有导航事件`ActiveItem`。

提前谢谢了，

托拜厄斯

PS：我已经交叉发布到 Caliburn Micro 讨论（[在 CodePlex CM 上讨论](http://caliburnmicro.codeplex.com/discussions/398445)）

# android - 线性布局不可见

> ID：12779968
> 
> 赞同：0
> 
> 时间：2012-10-08T10:36:27.917
> 
> 标签：android, layout

在下面这段代码中，最底部的线性布局不可见。我尝试了几种方法，但无法使其可见。请看一下

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/GlobalBG"
    android:orientation="vertical" >

    <include
        android:id="@+id/id_nav_bar"
        layout="@layout/app_nav_layout" />

    <ListView
        android:id="@+id/id_home_screen_list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:cacheColorHint="@android:color/transparent" />

    <RelativeLayout
        android:id="@+id/id_linear_layout_system_capacity"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="105dip"
        android:background="@drawable/home_storage_bg"
        android:orientation="vertical" >

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_marginTop="40dip"
            android:gravity="center_horizontal"
            android:text="Dummy"
            android:textStyle="bold" />

        <LinearLayout
            android:id="@+id/id_linear_layout_seekbar"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:background="@drawable/home_seekbar_bg" />
    </RelativeLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/home_bottom_bg"/ >
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:38:53.413

你放了

```
android:layout_width="wrap_content" android:layout_height="wrap_content" 
```

作为 wrap_content 并且您的布局中没有内容，因此它可能不可见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:52:01.390

通过编辑如下代码修复了该问题：-

```
<TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="17dip"
        android:gravity="center_horizontal"
        android:text="Dummy"
        android:textStyle="bold" /> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-08T11:01:28.900

据我了解，这种不可见的布局应该始终在屏幕底部可见，那么您最好使用`RelativeLayout`insted 的`LinearLayout` 更改此布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@color/GlobalBG"
android:orientation="vertical" > 
```

TO`<RelativeLayout>`并将其设置`android:layout_alignParentBottom="true"`为您的不可见布局

编辑：这对我有用

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@color/red" >

<RelativeLayout
    android:id="@+id/id_linear_layout_system_capacity"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="105dip"
    android:background="@color/row_base_background_end"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginTop="20dip"
        android:gravity="center_horizontal"
        android:text="Dummy"
        android:textStyle="bold" />

    <LinearLayout
        android:id="@+id/id_linear_layout_seekbar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:background="@color/row_base_background_start" />
</RelativeLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:background="@color/gray" >
</LinearLayout>

</RelativeLayout> 
```

# c# - 如何将多个 Linq 表达式的结果组合成一个表达式？

> ID：12779971
> 
> 赞同：1
> 
> 时间：2012-10-08T10:36:33.380
> 
> 标签：c#, linq, lambda, expression, linq-expressions

我有一个 Linq 表达式列表，`List<Expression>`其中每个表达式类型（表达式将返回的类型）是`Item`or `Item[]`。

我正在尝试编写一些代码，将提到的集合作为输入参数并生成一个 Linq 表达式，该表达式将返回一个项目列表（或数组）（`Item[]`）。

这是一个抽象的例子：

```
public static string[] GetStrings()
{
    return new[]
        {
            "first",
            "second",
            "third"
        };
}

public static string GetString()
{
    return "single1";
}

private void SOExample()
{
    var expressions = new List<Expression>
    {
        Expression.Call(GetType().GetMethod("GetString")),
        Expression.Call(GetType().GetMethod("GetStrings")), 
        Expression.Call(GetType().GetMethod("GetString")),
        Expression.Call(GetType().GetMethod("GetStrings"))
    };

    // some magic code here
    var combined = SomeMagicHere(expressions);
}

private Expression SomeMagicHere(List<Expression> expressions)
{
    foreach (var expression in expressions)
    {
        if (expression.Type.IsArray)
        {
            // Use array's elements
        } 
        else
        {
            // Use expression
        }
    } 
```

我要做的是生成一个表达式，它将`Item`从提供的列表中返回一个列表（在我的示例中为字符串）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T10:55:18.283

这似乎是一个非常奇怪的场景，在大多数情况下，我希望看到使用原始反射（或者可能是委托）而不是`Expression`在这里 - 这不是一个明显的适合。但是：您可以通过将表达式转换为每个调用的*块*`Add`或`AddRange`将值附加到列表中来做到这一点。例如：

```
using System;
using System.Collections.Generic;
using System.Linq.Expressions;

static class Program
{
    public static string GetString()
    {
        return "single1";
    }
    public static string[] GetStrings()
    {
        return new[]
        {
            "first",
            "second",
            "third"
        };
    }
    static void Main()
    {
        var expressions = new List<Expression>
        {
            Expression.Call(typeof(Program).GetMethod("GetString")),
            Expression.Call(typeof(Program).GetMethod("GetStrings")), 
            Expression.Call(typeof(Program).GetMethod("GetString")),
            Expression.Call(typeof(Program).GetMethod("GetStrings"))
        };

        // some magic code here
        var combined = SomeMagicHere(expressions);

        // show it works
        var lambda = Expression.Lambda<Func<List<string>>>(combined);
        var list = lambda.Compile()();
    }
    private static Expression SomeMagicHere(List<Expression> expressions)
    {
        List<Expression> blockContents = new List<Expression>();
        var var = Expression.Variable(typeof(List<string>), "list");
        blockContents.Add(Expression.Assign(var,
            Expression.New(typeof(List<string>))));
        foreach (var expression in expressions)
        {
            if (expression.Type.IsArray)
            {
                blockContents.Add(Expression.Call(
                    var, var.Type.GetMethod("AddRange"), expression));
            }
            else
            {
                blockContents.Add(Expression.Call(var,
                    var.Type.GetMethod("Add"), expression));
            }
        }
        blockContents.Add(var); // last statement in a block is the effective
                                // value of the block
        return Expression.Block(new[] {var}, blockContents);
    }

} 
```

# vim - 复制VI中的部分行

> ID：12779972
> 
> 赞同：14
> 
> 时间：2012-10-08T10:36:34.657
> 
> 标签：vim, vi

有很多不同的方法可以拉动完整的单行/多行。有没有一种方法可以在 vi 中复制部分行，例如该行的 10 个字符。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-11T22:51:30.553

我猜最常见的部分 yanks 是：

`yaw`: 拉出光标当前所在
`2yaw`的单词 : 拉出光标当前所在的单词和下一个单词（总共 2 个单词）
`ya(`: 拉出包含光标的匹配括号
`yf.`: 从光标拉到下一个`.`
`y$`: 从光标拉到末尾行的

可以使用任何移动键。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-05-01T11:14:48.843

剪切和粘贴：

将光标放在要开始切割的位置。

1.  按**v**选择字符（或大写**V**选择整行）。
2.  将光标移动到要剪切的内容的末尾。
3.  按**d**剪切（或按**y**复制）。
4.  移动到您要粘贴的位置。
5.  按**P**粘贴在光标之前，或按**p**粘贴在之后。
6.  使用相同的步骤执行复制和粘贴，除了步骤 4 中您将按**y**而不是**d**：

**d** = 删除 = 剪切

**y** = yank = 复制

资源： [vim.wikia.com：复制、剪切和粘贴](http://vim.wikia.com/wiki/Copy,_cut_and_paste)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-08T10:40:49.903

您可以执行`y`*Movement*，因此对于 10 个字符：`y10l`从（包括）当前光标位置拉出 10 个字符

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-08T15:38:37.130

我更喜欢只按 v 键，然后使用光标键移动您的选择。然后在您满意时按 y 键拉出选择。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-11T07:47:59.570

你也可以

```
yt<char> - yank 'till char - i use that a lot

or y/<pattern>/ - yank until pattern 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-08T10:40:03.137

当然，将光标放在行首，输入：

```
y10l 
```

这会将 10 个字符拉到右侧。如果您出于某种原因需要重复执行此操作，只需添加此临时 kep 映射：

```
:noremap ,m ^y10l 
```

每次按下时都会拉出任何行的前 10 个字符`,m`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-08T10:47:03.960

如果要复制多行，请尝试可视块模式，

```
" beginning of line
C-v
" up-down move 10j or 5k
10l
" copy & paste
y
p 
```

更详细的，见[维基](http://vim.wikia.com/wiki/Cut/copy_and_paste_using_visual_selection)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-08T15:35:15.460

这是鼠标实际上可能会击败键盘的一个地方，特别是如果当前鼠标光标远离复制目标，或者如果您想选择多行具有部分起始行或结束行。

用于`:set mouse=a`启用鼠标支持。然后用鼠标选择任何不规则的文本块，然后按`y`

# mysql - 删除数据库的前 X 行

> ID：12779978
> 
> 赞同：23
> 
> 时间：2012-10-08T10:37:06.220
> 
> 标签：mysql, sql-delete

是否有删除数据库表的前 X 行的 SQL 命令？

我有一个包含一些信息但没有 id 或自动递增值的数据库表，以及一个处理该表的前 X 行的程序。之后需要删除这些 X 行。所以标准查询是：

```
DELETE FROM table WHERE something = value; 
```

那么，有没有办法构建一个查询，如：

```
DELETE FROM table WHERE rownumber <= X; 
```

我试过这个命令，但数据库没有任何反应。你有什么线索吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-08T10:40:05.030

用于`LIMIT`您的删除：

```
DELETE FROM table WHERE condition LIMIT 10 
```

或者，如果你不想要这个条件

```
DELETE FROM table LIMIT 10 
```

请记住，删除行的顺序是未定义的——这取决于您的 DBMS 配置和表索引。您应该包括一个`ORDER BY`，以便按照定义的顺序进行删除，例如`ORDER BY id ASC`首先删除最低的 ID。

有关更多详细信息，请参阅有关[删除的 MySQL 文档](http://dev.mysql.com/doc/refman/5.6/en/delete.html)。

# iphone - 自动更新订阅实施

> ID：12779986
> 
> 赞同：0
> 
> 时间：2012-10-08T10:37:43.607
> 
> 标签：iphone, ios, in-app-purchase, app-store-connect

在我的应用程序中实施自动续订订阅 - 应用程序内购买时，我遇到了以下问题。

我发现在自动更新订阅下提供诗歌的困难场景。我参考了[这个](http://www.marco.org/2012/01/06/autorenewable-subscription-restrictions)网址。通过阅读这篇文章，我很困惑我是否可以通过自动更新订阅提供诗歌？

请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:36:04.680

Apple 是让您进行自动续订订阅还是让您进行非续订订阅与您的内容无关，而更多地与内容的交付方式有关。我假设您已经阅读了[iTunes Connect Developer Guide](http://developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/13_ManagingIn-AppPurchases_Robert/ManagingIn-AppPurchases.html#//apple_ref/doc/uid/TP40011225-CH4-SW1)中的信息。您还应该观看[2012 年关于支持订阅的 WWDC 视频](https://developer.apple.com/videos/wwdc/2012/)（它是 308），它将举例说明何时使用哪种订阅。

我最近做了一个带有订阅的应用程序，我们最初被拒绝自动续订并被告知使用非续订订阅。据我所知，如果您定期创建原创内容并构建您的应用程序以便有逻辑单元（如每月通讯或杂志），您将使用自动更新。在我的例子中，用户订阅了一系列每隔几天更新的博客条目。但是，条目显示在按日期排序的单个表格视图列表中，而不是分成任何类型的每日或每周单位。

同样，我无法从您的问题中看出这些诗歌将如何呈现，但我的建议是查看上述文档，如果您不能 100% 确定您清楚地符合自动续订订阅类别之一，请提交您的应用程序非续订订阅。

# asp-classic - 获取名称属性中带有后缀的输入值 - 经典 ASP

> ID：12779989
> 
> 赞同：0
> 
> 时间：2012-10-08T10:38:06.170
> 
> 标签：asp-classic

我正在尝试编写一个表单生成器系统。
现在，我到达了收集信息部分，在这个部分，我需要将信息分为三组，例如：
文本输入的“短响应”“文本区域的
长响应”
和单选、复选框和下拉列表的“选项响应”

在表单页面视图中，系统根据数据库记录创建表单。
正如我之前所说，我正在使用基于这些组的输入的后缀，如下所示：

```
<inputs name="dynamicpart_short" value="" />
<textarea name="dynamicpart_logn"></textarea> 
```

现在，在服务器端，我想收集这些信息并将它们分组。
我正在使用

```
for each item in Request.Form
Next 
```

但是我如何根据“_short”或“_long”之类的输入后缀创建一个循环......
意味着每个后缀都有它自己的循环！

PS：
输入有一个名字，有两部分，第一部分是动态的，是一个随机数！
像这样：name="15_short"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:09:59.593

"item" 将具有表单字段的名称，使用字符串函数检查其中是否包含短或长：

```
for each item in Request.Form
  if instr(item,"_short")<>0 then
      'do something
  elseif instr(item,"_long")<>0 then
      'do something else
      '.....
  end if
Next 
```

# php - 获取数组第一项的最快方法是什么？

> ID：12779990
> 
> 赞同：2
> 
> 时间：2012-10-08T10:38:08.763
> 
> 标签：php, arrays, performance

> **可能重复：**
> [获取数组的第一个元素](https://stackoverflow.com/questions/1921421/get-first-element-of-an-array)

在php中获取数组第一项的最快和最简单的方法是什么？我只需要将数组的第一项保存在字符串中，并且不得修改数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T10:39:34.777

我会说这是非常优化的：

```
echo reset($arr); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T10:49:27.263

我不得不试试这个

```
$max = 2000;
$array = range(1, 2000);
echo "<pre>";

$start = microtime(true);
for($i = 0; $i < $max; $i ++) {
     $item = current($array);
}
echo  microtime(true) - $start  ,PHP_EOL;

$start = microtime(true);
for($i = 0; $i < $max; $i ++) {
     $item = reset($array);
}
echo  microtime(true) - $start  ,PHP_EOL;

$start = microtime(true);
for($i = 0; $i < $max; $i ++) {
    $item = $array[0];
}
echo  microtime(true) - $start  ,PHP_EOL;

$start = microtime(true);
for($i = 0; $i < $max; $i ++) {
    $item = &$array[0];
}
echo  microtime(true) - $start  ,PHP_EOL;

$start = microtime(true);
for($i = 0; $i < $max; $i ++) {
     $item = array_shift($array);
}
echo  microtime(true) - $start  ,PHP_EOL; 
```

输出

```
0.03761100769043
0.037437915802002
0.00060200691223145  <--- 2nd Position
0.00056600570678711  <--- 1st Position
0.068138122558594 
```

所以最快的是

```
 $item = &$array[0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T10:39:29.503

使用`reset`：

```
<?php
$array = Array(0 => "hello", "w" => "orld");
echo reset($array);
// Output: "hello"
?> 
```

请注意，当您使用它时，数组的光标设置为数组的开头。

## [现场演示](http://ideone.com/KCiS8)

（当然，您可以将结果存储到字符串中而不是`echo`ing，但我`echo`用于演示目的。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T10:39:26.650

像这样的东西？：

```
$firstitem = $array[0]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T10:39:47.100

[`reset`](http://php.net/manual/en/function.reset.php)做这个：

```
$item = reset($array); 
```

无论键是什么，这都会起作用，但它会移动数组指针（我*从来*没有理由担心这一点，但应该提及）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T10:41:08.530

最有效的是获取引用，因此不涉及字符串复制：

```
$first = &$array[0]; 
```

只要确保你不修改`$first`，因为它也会在数组中被修改。如果您必须修改它，请寻找其他答案替代方案。

# xml - XSLT 遍历数组值

> ID：12779996
> 
> 赞同：3
> 
> 时间：2012-10-08T10:38:28.677
> 
> 标签：xml, xslt, xslt-2.0

这是变量：

```
<xsl:variable name="WepNr" select="/*/DbResponse/ResultSet/Row[Cell[@name='ARTNR']=$ArtNr][Cell[@name='WEANR']=$WeaNr]/Cell[@name='WEPNR']"/> 
```

它可以返回多个值，因此在这种情况下，它将输出如下内容：`2 21 36`=3 个值。

我尝试通过它们：

```
<xsl:for-each select="$WepNr">
    <LineNumber><xsl:value-of select="$WepNr"/></LineNumber>
</xsl:for-each> 
```

但它只输出相同的值`2 21 36`三次：

```
<LineNumber>2 21 36</LineNumber>
<LineNumber>2 21 36</LineNumber>
<LineNumber>2 21 36</LineNumber> 
```

如何输出 3 次，例如：

```
<LineNumber>2</LineNumber>
<LineNumber>21</LineNumber>
<LineNumber>36</LineNumber> 
```

?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-08T10:43:56.580

您在 for-each 中再次选择整个变量。

您可能想要类似（未经测试）的东西：

```
<xsl:for-each select="$WepNr">
    <LineNumber><xsl:value-of select="."/></LineNumber>
</xsl:for-each> 
```

# php - PHP/AJAX 登录需要很长时间

> ID：12779999
> 
> 赞同：2
> 
> 时间：2012-10-08T10:38:45.280
> 
> 标签：php, javascript, mysql, ajax

我继承了一个要求用户登录的网站。

登录仅使用 Ajax 和 PHP，当只有 4000 个注册用户时，此登录过程可能需要一分钟才能完成。

这可能是由于登录的编码方式造成的吗？

**AJAX**

```
 <form name="login-form" onsubmit="return false">
            <input type="text" id="the_username" value="Username" onfocus="emptyUsername(this);" onblur="clickrecall(this,'Username')"  class="focusfield input push"  />
            <input type="password" id="the_password" value="Password" class="input" onfocus="emptyPassword(this);" onblur="clickrecall(this,'Password')" /> 
            <span id="dialog-login-fail" title="Login failed"></span>
            <input type="submit" onclick="javascript:void(0);"  id="loginBtnBre" class="sign-in signin-submit-btn" value="Login Now" /> 
 </form> 
```

**PHP**

```
<?php
require 'config.inc.php';

foreach($_POST as $k=>$v) 
{
$_POST[$k] = trim($v);
}

if(!isset($_POST['theusername']) or !isset($_POST['thepassword']))
{
    print "Please use all fields";
}elseif(empty($_POST['theusername'])){
    print "Please enter a username";
}elseif(empty($_POST['thepassword'])){
    print "Please enter a password";
}elseif($_POST['theusername'] == "username" && $_POST['thepassword'] == "password")
{
    print "Password & User cannot be the ones already listed";
}elseif(!preg_match("/^[a-z0-9]+$/i", $_POST['theusername']))
{
    print "Please use only characters and numbers for username, no spaces, dashes or others!";
}else{

    $password = md5($_POST['thepassword']);
    $user = $_POST['theusername'];

    $loginVar = $usersClass->login($user, $password);

    if(is_array($loginVar))
    {
        $_SESSION['loggedIn'] = $loginVar; 
        @session_regenerate_id(true);

        print "success";

    }else{
        print "Whoops, something went wrong! Try again.";
    }
}

?> 
```

询问

```
public function login($username, $password)
{

    $rs = mysql_query("SELECT `id`,`active` from `$this->usersTable` WHERE 
        `username` = '".mysql_real_escape_string($username)."' AND 
        `password` = '".mysql_real_escape_string($password)."'");

    if($rs) {
        $row = @mysql_fetch_object($rs);

            return $this->userInfo($row->id);

    }else{
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:49:21.720

首先更改浏览器以确保它不是浏览器的问题（很少见，但有时仍然会发生）。

然后尝试使用 PHP 分析器来识别“慢”后端代码。[http://erichogue.ca/2011/03/linux/profiling-a-php-application/](http://erichogue.ca/2011/03/linux/profiling-a-php-application/)甚至还有一个很好的教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:55:59.117

您可能在用户名或密码字段上没有索引

跑：

```
alter table `TableName` add index `username` (`username`(500));
alter table `TableName` add index `password` (`password`(500)); 
```

在 mysql 提示符下，其中 TableName 是您的表的名称，然后再试一次。如果这样可以加快速度，请将索引调整为更合适的长度。

而且您真的不应该将密码作为明文存储在数据库中。最低限度将它们存储为散列字符串（MD5 等），或者更好的是，将它们存储为加盐的 MD5 散列。

我会将您的选择更改为仅根据用户名进行选择（删除密码），然后执行其他检查以确保输入的密码与返回的行匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:44:44.120

您可以使用 firefox 的 firebug 功能来了解是否发布了正确的信息？我可以看到除了“登录”功能之外没有任何问题。您可以回显查询并将其从 firebug 复制并运行到数据库。跟踪运行该查询所需的时间并在其上添加一些时间。查看您的数据库查询是否需要大量时间。

如果您的查询需要更多时间，那么您需要优化您的 SQL 查询