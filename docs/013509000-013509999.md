# StackOverflow 问答 13509000-13509999

# php - 如何将输入框更改为单击时选择

> ID：13509001
> 
> 赞同：1
> 
> 时间：2012-11-22T09:02:57.507
> 
> 标签：php, javascript

我有一个包含值“男性”的输入框。如何将该输入框更改为包含两个选项“男性”和“女性”onclick 的选择。任何帮助，将不胜感激

```
<?php

echo '<input type="text" name="gender" id="gender" value="male" onclick="changeSelect();"/>';

?> 
```

html页面------------

```
<script type="text/javascript" > 

 function changeSelect(){

}

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:19:00.673

没有 jquery 试试这个：

```
<script type="text/javascript">
function toggle(me, other) {
    me.setAttribute('style', 'display: none');
    var otherElement = document.getElementById(other);
    otherElement.removeAttribute('style');

    if(otherElement.tagName.toLowerCase() === 'select') {
        myValue = me.getAttribute('value');
        for(var n = 0; n < otherElement.options.length; n++) {
            if(otherElement.options[n].getAttribute('value') == myValue) {
                otherElement.options[n].select;
                break;
            }
        }
    }
    else {
        myValue = me.options[me.options.selectedIndex].getAttribute('value');
        otherElement.value = myValue;
    }
}
</script>

<input onclick="toggle(this, 'the_select');" id="the_input" />
<select onchange="toggle(this, 'the_input');" id="the_select"  style="display:none">
    <option value="male">male</option>
    <option value="female">female</option>
    <option value="alien">alien</option>
</select> 
```

用 jquery 试试这个

```
<script type="text/javascript">

function initToggle(select, input) {
    var s = jQuery('#' + select);
    var i = jQuery('#' + input);
    i.click(function(){
        i.hide();
        s.show().val(i.val());
    });
    s.change(function(){
        s.hide();
        i.show().val(s.val());
    });

}

</script>

<input id="the_input" />
<select id="the_select"  style="display:none">
    <option value="male">male</option>
    <option value="female">female</option>
    <option value="alien">alien</option>
</select>
<script type="text/javascript">
    jQuery(function(){
        initToggle('the_select', 'the_input');
    });
</script> 
```

或使用 jquery 和动态

```
<script type="text/javascript">

function initToggle(input, options) {
    var s = jQuery('<select />')
        .hide();
    for(var n = 0; n < options.length; n++) {
        s.append(jQuery('<option/>')
            .attr('option', options[n])
            .html(options[n]));
    }
    var i = jQuery('#' + input).after(s);
    var conf = function(a, b, method) {
        a.unbind(method).bind(method, function(){
            a.hide();
            b.show().val(a.val());
        });

    }
    conf(i, s, 'click');
    conf(s, i, 'change');       
}

</script>

<input id="the_input" />
<script type="text/javascript">
    jQuery(function(){
        initToggle('the_input', ['male', 'female', 'alien']);
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:07:50.140

这是一个使用 jQuery 的例子：http: [//jsfiddle.net/mJ7s6/1/](http://jsfiddle.net/mJ7s6/1/)

**JavaScript**

```
$('#textInput').click(function () {
    var input = $(this),
        parent = input.parent();
    $('<select><option value="male">male</option><option value="female">female</option>').insertAfter(input);
    input.remove();
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T09:19:19.497

你的要求很奇怪。以下是几种方法

将元素文本框更改为选择框意味着您完全更改了元素并且您不能将输入元素转换为选择元素

最简单的方法是实现选择框而不是文本框。

另一种方法是更改​​文本框创建新的选择框附加到 div 并删除输入控件

另一种方法是 DataList 的实现，它可以帮助您无需任何编码。代码如下

```
echo '<input list="gender">

<datalist id="gender">
  <option value="Male">
  <option value="Female">
</datalist>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T09:10:14.227

```
<div id="mydivid"><input type='text' onclick='changeSelect()' value='Men' /></div>

<script>
function changeSelect()  {
    document.getElementById("mydivid").innerHTML = "<select name='gender'><option value='male'>Male</option><option value='female'>Female</option></select>";
  }
  </script>​ 
```

[演示](http://jsfiddle.net/aNRky/1/)

# mysql - 如何在上下文文件中设置连接池？

> ID：13509004
> 
> 赞同：0
> 
> 时间：2012-11-22T09:03:05.980
> 
> 标签：mysql, eclipse, jsp, servlets

我已经使用简单的 servlet 开发网页。在这里，我使用一个上下文文件来声明这样的数据库连接。

```
<?xml version="1.0" encoding="UTF-8"?>
<Context>
<Resource name="jdbc/red" auth="Container" type="javax.sql.DataSource"
      maxActive="50" timeBetweenEvictionRunsMillis="3600000"
      minEvictableIdleTimeMillis="3600000"
      maxIdle="30" maxWait="10000" username="root"
      password="root" driverClassName="com.mysql.jdbc.Driver"
      url="jdbc:mysql://localhost:3306/red"
      defaultAutoCommit="false" >

</Resource>
</Context> 
```

我已经在 web.xml 中配置了

```
 <resource-ref>
    <description>Mysql datasource</description>
    <res-ref-name>jdbc/red</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
 </resource-ref> 
```

在 servlet 页面中

```
 Context ctx=new InitialContext();
    DataSource ds=(DataSource)ctx.lookup("java:comp/env/jdbc/red");
    con=ds.getConnection();
    state=con.createStatement();
    rs=state.executeQuery(s);
    rs.close();
    con.close();
    ctx.close(); 
```

我的问题是当连接建立超过 50 次时，会出现这样的错误：

```
 SEVERE: Servlet.service() for servlet jsp threw exception 
```

java.util.NoSuchElementException：在 org.apache.tomcat.dbcp.dbcp.PoolingDataSource.getConnection（PoolingDataSource）的 org.apache.tomcat.dbcp.pool.impl.GenericObjectPool.borrowObject（GenericObjectPool.java:1171）等待空闲对象超时.java:106) 在 org.apache.tomcat.dbcp.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)

上下文 ctx=new InitialContext(); 120: 数据源 ds=(数据源)ctx.lookup("java:comp/env/jdbc/red"); 121: con=ds.getConnection();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:17:55.333

尝试 `SET GLOBAL max_connections = 500;`在 MySQL 中执行或重新启动 MySQL。此链接将帮助您解决 [此处的问题](https://dev.mysql.com/doc/refman/5.5/en/too-many-connections.html)

# c# - Fiddler 对解码后的响应进行编码。我怎样才能在 vb.net 中做同样的事情？

> ID：13509005
> 
> 赞同：2
> 
> 时间：2012-11-22T09:03:06.450
> 
> 标签：c#, vb.net, httpwebrequest, decode, fiddler

我正在使用 httpwebrequest 从网站获取响应。在这个响应中，我应该看到一个 xml。但在我的回应中，它只是让我觉得很乱。我用提琴手看看我得到了什么。我得到一个编码响应，我需要手动对其进行解码以查看内容（这是在提琴手中）。

我怎样才能在 vb.net 中做同样的事情？

**编辑**响应返回为**https**。

我试过了：

```
 HttpUtility.HtmlDecode(myResult,myStreamwriter)

  Dim request As HttpWebRequest = DirectCast(WebRequest.Create("www.url.com/$filetype=xml"), HttpWebRequest)

        request.KeepAlive = True
        request.UserAgent = "Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11"
        request.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"
        request.ContentType = "text/xml, charset=utf-8"
        request.Headers.Set(HttpRequestHeader.AcceptEncoding, "gzip,deflate,sdch")
        request.Headers.Set(HttpRequestHeader.AcceptLanguage, "nl-NL,nl;q=0.8,en-US;q=0.6,en;q=0.4")
        request.Headers.Set(HttpRequestHeader.AcceptCharset, "ISO-8859-1,utf-8;q=0.7,*;q=0.3")

        Using getResponse = request.GetResponse
            Dim webServiceResponse = getResponse.GetResponseStream()

   Dim xmlreader As New IO.StreamReader(webServiceResponse)

'here is where it shows a really gibberish output
     Dim myResult As String = xmlreader.ReadToEnd() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T09:18:12.407

听起来您需要解压缩响应。

你试过 HttpWebRequest 自动解压吗？[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.automaticdecompression.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.automaticdecompression.aspx)

```
httpWebRequest.AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate; 
```

# delphi - Delphi XE2 TChart PointSeries Bug

> ID：13509006
> 
> 赞同：0
> 
> 时间：2012-11-22T09:03:08.297
> 
> 标签：delphi, delphi-xe2, teechart

我有以下问题。

我使用的是 Delphi 2010，最近安装了 Delphi XE2 并重新编译了我的不同项目。我注意到一个错误？在 tchart 的指针中。

当我将点添加到点序列时，最后一个点不显示或仅当没有其他点显示时？？？

起初画一切都很好：

![在此处输入图像描述](../Images/e4b65fe2750bab5dca1653c8474c8d26.png)

然后我清除serie并重新添加相同的点最后一个点不显示

![在此处输入图像描述](../Images/cc98b5a267a0c39d81a87f8c26bf07c9.png)

但是，如果我滑动图表以使屏幕上没有其他点出现，则会显示该缺失点

![在此处输入图像描述](../Images/58231c9ec1a68b71ecb34248b1b182c5.png)

任何想法或帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T11:20:19.513

我无法在这里使用 build 2012.07.121105 重现该问题，这就是我得到的：

![在此处输入图像描述](../Images/e2755942d353b4b40801cc118cdca6df.png)

您是否在 XE2 中安装了 Update 4 + hotfix 1？您可以在 Embarcadero 下载处下载更新 4 的 TeeChart 升级：http: [//cc.embarcadero.com/item/28780](http://cc.embarcadero.com/item/28780)

# c# - 从字符串中删除无法识别的 ASCII 字符

> ID：13509007
> 
> 赞同：1
> 
> 时间：2012-11-22T09:03:08.063
> 
> 标签：c#, string, ascii

我正在使用 HTML Agility Pack 解析 html，有时我会得到看起来很奇怪的字符串，例如："â€""。删除它们的最简单方法是什么？顺便说一句，我正在使用 C#。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T09:29:03.577

您可能需要首先研究为什么要获取这些字符，并且编码可能有问题

但是，如果您确实需要从字符串中删除所有非 ascii 字符，那么正则表达式 [^ -~] 就可以了

```
 var stripped = Regex.Replace("străipped of baâ€d charâ€cters", "[^ -~]", "");
        Console.WriteLine(stripped); //outputs "stripped of bad characters" 
```

请参阅[http://www.catonmat.net/blog/my-favorite-regex/](http://www.catonmat.net/blog/my-favorite-regex/)了解为什么该正则表达式有效

# r - 重新排序树状图

> ID：13509013
> 
> 赞同：4
> 
> 时间：2012-11-22T09:03:29.463
> 
> 标签：r

我想用 reorder.dendrogram 重新排序一个树状图，但不能弯曲我的头关于如何设置参数。

树状图有一个“异常值”分支，我想将其移至另一侧。

我可以通过这个 cut/merge 调用来做到这一点，但肯定可以通过重新排序来实现吗？

这是树状图：

```
tdro <- structure(list(structure(9L, members = 1L, height = 0, label = "leaf1", leaf = TRUE, class = "dendrogram"), 
structure(list(structure(list(structure(list(structure(list(
    structure(15L, label = "leaf2", members = 1L, height = 0, leaf = TRUE, class = "dendrogram"), 
    structure(14L, label = "leaf3", members = 1L, height = 0, leaf = TRUE, class = "dendrogram")), members = 2L, midpoint = 0.5, height = 24.8381484584436, class = "dendrogram"), 
    structure(list(structure(13L, label = "leaf4", members = 1L, height = 0, leaf = TRUE, class = "dendrogram"), 
        structure(12L, label = "leaf5", members = 1L, height = 0, leaf = TRUE, class = "dendrogram")), members = 2L, midpoint = 0.5, height = 24.3975287023022, class = "dendrogram")), members = 4L, midpoint = 1.5, height = 33.1101361501252, class = "dendrogram"), 
    structure(list(structure(10L, members = 1L, height = 0, label = "leaf6", leaf = TRUE, class = "dendrogram"), 
        structure(list(structure(11L, label = "leaf7", members = 1L, height = 0, leaf = TRUE, class = "dendrogram"), 
            structure(8L, label = "leaf8", members = 1L, height = 0, leaf = TRUE, class = "dendrogram")), members = 2L, midpoint = 0.5, height = 30.9363490461899, class = "dendrogram")), members = 3L, midpoint = 0.75, height = 32.3912839969328, class = "dendrogram")), members = 7L, midpoint = 3.125, height = 36.9011152635297, class = "dendrogram"), 
    structure(list(structure(5L, members = 1L, height = 0, label = "leaf9", leaf = TRUE, class = "dendrogram"), 
        structure(list(structure(list(structure(4L, members = 1L, height = 0, label = "leaf10", leaf = TRUE, class = "dendrogram"), 
            structure(list(structure(2L, label = "leaf11", members = 1L, height = 0, leaf = TRUE, class = "dendrogram"), 
              structure(6L, label = "leaf12", members = 1L, height = 0, leaf = TRUE, class = "dendrogram")), members = 2L, midpoint = 0.5, height = 20.537001267289, class = "dendrogram")), members = 3L, midpoint = 0.75, height = 27.9153607968991, class = "dendrogram"), 
            structure(list(structure(list(structure(7L, label = "leaf13", members = 1L, height = 0, leaf = TRUE, class = "dendrogram"), 
              structure(3L, label = "leaf14", members = 1L, height = 0, leaf = TRUE, class = "dendrogram")), members = 2L, midpoint = 0.5, height = 19.3278637150999, class = "dendrogram"), 
              structure(1L, members = 1L, height = 0, label = "leaf15", leaf = TRUE, class = "dendrogram")), members = 3L, midpoint = 1.25, height = 27.6624008548179, class = "dendrogram")), members = 6L, midpoint = 2.5, height = 30.8706298846279, class = "dendrogram")), members = 7L, midpoint = 1.75, height = 41.426993488228, class = "dendrogram")), members = 14L, midpoint = 5.9375, height = 41.7600747862578, class = "dendrogram")), members = 15L, midpoint = 3.46875, height = 66.2893195420674, class = "dendrogram")
plot(tdro) 
```

这是我所追求的：

```
ddr_cut <- cut(tdro, 50)
want_tdro <- merge(ddr_cut$lower[[2]],
                   ddr_cut$lower[[1]],
                   height=attr(ddr_cut$upper, "height"))
plot(want_tdro) 
```

问题是，下面的调用应该是怎样的：

```
plot(reorder(tdro, c(15,1:14))) 
```

这样就变成了`want_tdro`？为什么？**_**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-07T13:06:19.350

您提供给`reorder.dendrogram()`函数的权重必须与原始数据用于构建树状图的顺序相同。这不一定与您标记的叶子的顺序相同（`"leaf1"`到`"leaf15"`）。您可以通过使用最简单的权重 来检查基础顺序，`1:15`然后查看分配给每个叶子的值。

```
tdro2 <- reorder(tdro, 1:15, mean)
str(tdro2) 
```

如果您查看`str()`函数的输出，报告的值对应于我们分配的简单权重。由此，我们推导出数据的底层顺序是**leaf15，leaf11，leaf14，leaf10，leaf9，leaf12，leaf13，leaf8，leaf1，leaf6，leaf7，leaf5，leaf4，leaf3，leaf2。**

由于您希望叶子的顺序是leaf2-leaf15，leaf1，因此您应该为leaf2提供权重1，为leaf3提供权重2，...，为leaf15提供权重14，为leaf1提供权重15，但您必须提供这些权重按照叶子的基本顺序，如下所示：

```
tdro3 <- reorder(tdro, c(14, 10, 13, 9:8, 11:12, 7, 15, 5:6, 4:1), mean)
plot(tdro3) 
```

# php - 插入子节点的 XML 问题

> ID：13509018
> 
> 赞同：0
> 
> 时间：2012-11-22T09:03:40.010
> 
> 标签：php, xml, simplexml

我正在使用 simplexml 使用来自 wordpress 站点的数据更新 xml 文件。每次有人访问一个页面时，我都想以这样的嵌套结构将页面 ID 和视图计数器添加到文件中……</p>

```
<posts>
    <post>
        <postid>3231</postid>
        <postviews>35</postviews>
    </post>
    <post>
        <postid>7634</postid>
        <postviews>1</postviews>
    </post>
</posts> 
```

我遇到的问题是插入发生在错误的位置 - 我得到以下内容......</p>

```
<posts>
    <post>
        <postid>3231</postid>
        <postviews>35</postviews>
    <postid>22640</postid><postviews>1</postviews><postid>22538</postid><postviews>1</postviews></post>
</posts> 
```

如您所见，`<postid>`and`<postviews>`节点没有被包裹在新的`<post>`父节点中。谁能帮帮我，这让我发疯了！

到目前为止，这是我检查帖子 ID 是否存在的代码，如果不存在则添加一个…</p>

```
//Get the wordpress postID
$postID = get_the_ID();

$postData = get_post($postID);

//echo $postID.'<br />'.$postData->post_title.'<br />'.$postData->post_date_gmt.'<br />';

// load the document
$xml = simplexml_load_file('/Applications/MAMP/htdocs/giraffetest/test.xml');

// Check to see if the post id is already in the xml file - has it already been set?
$nodeExists = $xml->xpath("//*[contains(text(), ".$postID.")]");

//Count the results
$countNodeExists = count($nodeExists);

if($countNodeExists > 0) {

    echo 'ID already here';

} else {
    echo 'ID not here';

    $postNode = $xml->post[0];
    $postNode->addChild('postid', $postID);
    $postNode->addChild('postviews', 1);
}

// save the updated document
$xml->asXML('/Applications/MAMP/htdocs/giraffetest/test.xml'); 
```

非常感谢，詹姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:12:42.657

如果你想`<post>`在你的 xml 文档中添加一个新元素，你的代码中应该有一个`addChild('post')`地方。像这样更改`else`部分：

```
/* snip */
} else {
    $postNode = $xml->addChild('post'); // adding a new <post> to the top level node
    $postNode->addChild('postid', $postID); // adding a <postid> inside the new <post>
    $postNode->addChild('postviews', 1); // adding a postviews inside the new <post>
} 
```

# php - 在同一行中选择不同的列和其他列

> ID：13509029
> 
> 赞同：0
> 
> 时间：2012-11-22T09:04:44.950
> 
> 标签：php, mysql

是否有一种简单的非 JOIN 方式来执行此任务？

```
mysql_query("select DISTINCT artist, id from ringtones where artletter='A'"); 
```

结果应该是：所有没有重复的艺术家值和相应的 id。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T09:12:44.820

通过执行以下操作，您可以获得每个艺术家的一行，该艺术家的所有 ID 在一行上：

```
SELECT artist, GROUP_CONCAT(id) as `IDs`
FROM ringtones
WHERE artletter='A'
GROUP BY artist; 
```

如果您只想 为每个艺术家提供*第一个，请尝试以下操作：* `id`

```
SELECT artist, MIN(id) as `first_id`
FROM ringtones
WHERE artletter='A'
GROUP BY artist; 
```

（你可以通过使用而不是得到*最后一个* ）`id``MAX``MIN`

如果您想要该艺术家的第一行或最后*一行*（基于`id`），您可以按照该链接中的说明进行[分组最大值。](http://dev.mysql.com/doc/refman/5.0/en/example-maximum-column-group-row.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:13:55.927

可能你正在寻找这个..

```
select DISTINCT artist, id where id IN(select DISTINCT id from ringtones where artletter='A') 
```

# javascript - Django：动态部分的内部链接

> ID：13509034
> 
> 赞同：0
> 
> 时间：2012-11-22T09:05:01.907
> 
> 标签：javascript, html, django

在 zebras %} 循环中使用 {% x, y,

1.  我正在将具有相似数据的多个表动态插入到一个页面上。

2.  由于列表可能会变得很长（例如表 100），我希望为用户提供一种快速轻松地访问他想要查看的表的方法

3.  我目前正在尝试（没有成功）使用内页锚。--
    表3的链接

我欢迎任何更好、高效或用户友好的解决方案。

提前致谢

# c++ - 对与字符和 wchar_t 相关的输出感到困惑

> ID：13509040
> 
> 赞同：2
> 
> 时间：2012-11-22T09:05:29.723
> 
> 标签：c++

无法理解以下代码中发生的事情

```
wchar_t wc;

wc =L'ab';

char ch = 'ab'; 
```

当我调试上面的代码时，我发现 a 存储在`wc`as`b`存储的位置`ch`。我不明白为什么`a`没有存储在`ch`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T09:14:20.077

6.4.4.4 规范第 10 段：

> 包含多个字符（例如，'ab'）或包含不映射到单字节执行字符的字符或转义序列的整数字符常量的值**是实现定义的**

换句话说，不同的编译器可能会做不同的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:21:01.613

从标准：

> 多字符文字具有 int 类型和**实现定义的**值。

因此，您使用（实现定义的）int 初始化 char `ch`，然后将其转换为 char。那个字符恰好是'b'。

如果编译器在这里也发出警告，我也不会感到惊讶，尤其是。带有`-Wall`编译器标志或类似标志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T09:21:49.393

它是编译器定义的行为：

在 VS2012 上，我得到`'a'`,`'b'`输出

在 gcc 4.7.2 上，我得到`'b'`,`'b'`输出并在编译时收到警告：

```
warning: character constant too long for its type [enabled by default]
warning: multi-character character constant [-Wmultichar]
warning: overflow in implicit constant conversion [-Woverflow] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T09:24:04.830

首先，您不应该将两个字符添加到这些单字符变量中。这根本不正确。

然后，当我尝试通过我的 VC2010 编译您的代码时，我收到了行“wc = L'ab';”的警告消息 C4066，并收到行“char ch = 'ab';”的警告消息 C4305 和 C4309。

C4066 告诉我们第二个字符被忽略了。这是因为编译器将 L'ab' 的类型视为字符。但是对于下一行，编译器将 'ab' 视为一个整数值，而不是两个字符。所以我收到警告消息 C4305“从 int 截断到 char”和 C4309“截断常量值”。

# c++ - 检查 gpu 是否存在 VBO

> ID：13509041
> 
> 赞同：3
> 
> 时间：2012-11-22T09:05:30.677
> 
> 标签：c++, opengl, gpgpu

我有一个（预制的）Opengl 顶点缓冲区对象`(VBO)`
，但我不知道`GLuint` 在 opencl 中提交它的价值 ..

是否在任何opengl库（如glew）中进行检查，以向我提供当前在gpu上的现有VBO及其相应的GLuint（或任何类似的东西......因为我只知道数据输入是数组和数组中的元素数量尺寸）

编辑：为什么我不知道 GLuint ...

这是cinema4d opengl api中的一个函数（必须使用这个函数来访问cinema4d VBO）..这个函数（或者我应该说很多类函数）会自动做这样的事情

allocSubBuffer ...与 *pBuffer（面向对象的 C++）mapBuffer ..返回 void *pData 然后将此 *pData 转换为向量 *pvData 然后将数组值传递给该 *pvData 然后 unmapbuffer ...在此之后有一个叫做 pFactory 的东西。 ..它自动分配一个新的VBO ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:57:59.247

> 但我不知道它的 GLuint 值

那么你如何使用OpenGL的VBO呢？您也必须`glBindBuffer`在 OpenGL 中使用它。OpenGL 对象 ID 很宝贵，请妥善保管它们并确保它们安全。

创建一个 OpenGL 对象而不记住它的名字就像用`new`or分配一些内存`malloc`然后扔掉指针：浪费内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:16:32.090

也许 glGetIntegerv(GL_ARRAY_BUFFER_BINDING, &buf) 会为您解决问题。即你以某种方式强制cinema4d 绑定缓冲区，然后查询当前绑定的缓冲区ID。

# c++ - 错误：带有类的体系结构 x86_64 的未定义符号

> ID：13509046
> 
> 赞同：4
> 
> 时间：2012-11-22T09:05:50.943
> 
> 标签：c++

我是一个初学者，正在编写一个有趣的程序来帮助我节食。该程序尚未完成，但在我编写时正在编译。我不断收到标题中提到的错误：

> 带有类的体系结构 x86_64 的未定义符号

我看过类似的问题，但它们都与模板和继承的类有关，这与我的场景不同。我只是宣布一个类，没什么特别的。我认为这与没有正确定义类有关，但我不知道它是什么。这可能是我想念的愚蠢的东西，但我仍然被困住了。谢谢。

```
#include <iostream>
#include <string>
using namespace std;

class Meal
{
private:
    string name;
int protein;
int carbs;
int fat;
int calories;

public:
 Meal(string name, int calories, int protein, int carbs, int fat);

};

int main()
{
int calories = 0;
int rest_or_lift;
int create_or_not;
cout << "Enter 1 if it is a workout day, enter 2 if it is a rest day./n";
cin >> rest_or_lift;
if (rest_or_lift == 1)
{
    calories = 2554;
}
else if (rest_or_lift == 2)
{
    calories = 1703;
}

cout << "Enter 1 to input existing foods, enter 2 to create new foods./n";
cin >> create_or_not;
if (create_or_not == 1)
{
    cout << "This aspect has not yet been created /n"; //need to fix this part
}
else if (create_or_not == 2)
{
    do 
    {   
        string name;
        int protein;
        int carbs;
        int fat;
        int calories;
        cout << "Enter the name of the food./n";
        cin >> name;
        cout << "Enter how many calories the food has. /n";
        cin >> calories;
        cout << "Enter how many grams of protein the food has /n";
        cin >> protein;
        cout << "Enter how many grams of carbs the food has /n";
        cin >> carbs;
        cout << "Enter how many grams of fats the food has /n";
        cin >> fat;
        Meal(name, calories, protein, carbs, fat);
        cout << "Enter another food? Enter 1 to exit, 2 to continue.";
        cin >> create_or_not;
    } while (create_or_not == 2);

}

return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T09:19:32.297

class 没有构造函数`Meal`。你可以像这样解决它：

```
class Meal
{
private:
  string m_name;
  int m_protein;
  int m_carbs;
  int m_fat;
  int m_calories;

public:
  Meal(string name, int calories, int protein, int carbs, int fat)
    : m_name(name), m_protein(protein),
      m_carbs(carbs), m_fat(fat), m_calories(calories)
  {
  }
}; 
```

# nginx - 如何在 NGINX 配置中指定没有扩展名的文件的 mimetype？

> ID：13509050
> 
> 赞同：19
> 
> 时间：2012-11-22T09:06:01.363
> 
> 标签：nginx, mime-types

我有一台带有 nginx 的服务器。而且我有很多图像 - pngs 和 jpgs 保存为没有扩展名的文件（如“123123123_321312”）。

当我在 html 页面中使用标签“img”时，我会在控制台中收到这些消息：

```
资源解释为图像，但使用 MIME 类型应用程序/八位字节流传输：“http://xxxx/images/1350808948_997628”。jquery.js:2
资源解释为图像，但使用 MIME 类型 application/octet-stream: "http://xxxx/images/1343808569_937350" 传输。

```

有没有办法让 nginx 添加具有请求文件的正确 mimetype 的标头？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-22T10:19:10.913

你应该使用[`default_type`](http://wiki.nginx.org/HttpCoreModule#default_type)指令：

```
server {
   ...
   default_type text/html;

   location /images/png {
      default_type image/png;
   }

   location /images/jpg {
      default_type image/jpeg;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-04T18:01:20.783

我也必须补充。

如果您的网页被下载而不是执行，Mickaël Le Baillif 解决方案也可以工作。因为 nginx 认为它应该是`default_type application/octet-stream;`即使官方文档说：

> 要使特定位置为所有请求发出“application/octet-stream”MIME 类型，可以使用以下配置

并指出`location /download/` 这也给出了：

```
Resource interpreted as Image but transferred with MIME type application/octet-stream: "http://xxxxx.com/" 
```

Nginx 版本：1.6.2

# javascript - 如何在 jQM 列表视图中显示长文本

> ID：13509054
> 
> 赞同：0
> 
> 时间：2012-11-22T09:06:12.953
> 
> 标签：javascript, css, jquery-mobile, cordova

我正在制作一个 jQuery 移动和 phonegap 应用程序。我对列表视图有疑问。它们是动态创建的。在这些列表视图中有 h1 标签。这就是问题所在。文本被切割成 60% 或 70% 的长度，并用点填充。这很烦人，因为这段文字还有很多空间可以显示。你知道如何防止这种行为吗？

![下面的例子：](../Images/7897405f927066d9015a084ec5fdf52e.png)

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T08:32:36.030

如果可以，在普通浏览器中测试它并找到用于呈现列表的 css 类，然后将 css 空白更改为普通。像这样的东西：

```
.ul-li .ui-btn-text a.ui-link-inherit {
overflow: hidden;
text-overflow: ellipsis;
white-space: nowrap; 
```

}

改变：

```
 white-space: nowrap; 
```

到：

```
 white-space: normal; 
```

# android - 使用应用程序上下文而不是活动上下文

> ID：13509061
> 
> 赞同：4
> 
> 时间：2012-11-22T09:06:36.083
> 
> 标签：android, ddms

这个问题是 我昨天发布的这个[问题的扩展。](https://stackoverflow.com/questions/13490493/memory-leaks-in-android-application)我发现了可能的内存泄漏，并以正确的方式处理了这个问题。由非静态内部类引起的内存泄漏之一，更准确地说是非静态的`Handler`。

但是我今天面临一个新的内存泄漏问题。我读过这篇[文章](http://android-developers.blogspot.no/2009/01/avoiding-memory-leaks.html)，本质是基于`Context`Activity 或 Application Context。 ![在此处输入图像描述](../Images/575b55a0da49208e086ec0aeae94bb46.png)

这是我从`Eclipse Memory Analyzer`

我已经看到`Remainder`这个饼图的变化，在修复问题后`Handler`，剩余部分增加了 10.6 MB。

但是到了上下文问题，这`Problem Suspect 2`给了我一个提示在哪里看

```
35 instances of "android.widget.FrameLayout", loaded by "<system class loader>" occupy 39 218 464 (39,94%) bytes. 

Biggest instances:

•android.widget.FrameLayout @ 0x425aa258 - 3 266 728 (3,33%) bytes. 
•android.widget.FrameLayout @ 0x425d9b20 - 3 266 728 (3,33%) bytes. 
•android.widget.FrameLayout @ 0x42609258 - 3 266 728 (3,33%) bytes. 
•android.widget.FrameLayout @ 0x4260a248 - 3 266 728 (3,33%) bytes. 
•android.widget.FrameLayout @ 0x42925960 - 3 266 728 (3,33%) bytes. 
•android.widget.FrameLayout @ 0x429808e0 - 3 266 728 (3,33%) bytes. 
•android.widget.FrameLayout @ 0x429a4350 - 3 266 728 (3,33%) bytes. 
•android.widget.FrameLayout @ 0x429d9b20 - 3 266 728 (3,33%) bytes. 
•android.widget.FrameLayout @ 0x429e5710 - 3 266 728 (3,33%) bytes. 
•android.widget.FrameLayout @ 0x42a28c98 - 3 266 728 (3,33%) bytes. 
•android.widget.FrameLayout @ 0x42a51b80 - 3 266 728 (3,33%) bytes. 
•android.widget.FrameLayout @ 0x46a8caf0 - 3 266 728 (3,33%) bytes. 
```

它告诉我内存泄漏发生在我使用`FrameLayout`. 我使用 FrameLayout 的唯一地方是在我的`Splash Screen`.

```
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);
    utils = new AppUtils(getApplicationContext());
    pd = (ProgressBar) findViewById(R.id.pd);
    progress = (TextView) findViewById(R.id.progress);
    version = (TextView)findViewById(R.id.version);
    prefs = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());

    SharedPreferences.Editor prefEditor = prefs.edit();
    prefEditor.putString("firstpw", "first");
    prefEditor.commit();

    folder = new CreateApplicationFolder(getApplicationContext(), true); 
    boolean isSDPresent = Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED);

    if (!isSDPresent) {
        ErrorDialog dialog = new ErrorDialog(getApplicationContext(), getResources().getString(R.string.sdCardTitle),
                getResources().getString(R.string.sdCardContent),
                getResources().getString(R.string.ok), 2);
        Log.i("SDCARD: ", "Is Not Present");
        dialog.canCancelDialog(false);

    } else {
        Log.i("SDCARD: ", "Is Present");

        version.setText("Version: " + utils.getAppVersion()); 

        try {
            new ReadConfig(Splash.this, pd, progress).execute("");
        } catch (ParserConfigurationException e) {
            Log.e("Parser: ", e.getMessage());
        } catch (SAXException e) {
            Log.e("Sax: ", e.getMessage());
        } catch (IOException e) {
            Log.e("IO: ", e.getMessage());
        }
    }
} 
```

我怀疑当我将 Activity 上下文发送到 AsyncTask 时会发生内存泄漏`ReadConfig`，如下所示：

```
try {
            new ReadConfig(Splash.this, pd, progress).execute("");
        } catch (ParserConfigurationException e) {
            Log.e("Parser: ", e.getMessage());
        } catch (SAXException e) {
            Log.e("Sax: ", e.getMessage());
        } catch (IOException e) {
            Log.e("IO: ", e.getMessage());
        } 
```

在 ReadConfig 类中，我还使用此上下文`Activity`在方法中启动一个新`onPostExecute`方法，这将使此上下文保持活动状态。

```
protected void onPostExecute(String result) {

        if (result.equals("noConfig")) {
            Toast.makeText(context, context.getResources().getString(R.string.configNotFound),
                    Toast.LENGTH_LONG).show();
            Intent mainIntent = new Intent(context, MainClass.class);
            context.startActivity(mainIntent);
        }
        else if(result.equals("pathnotFound")) {

            new ErrorDialog(context, context.getResources().getString(R.string.noBTFolderTitle), context.getResources().getString(R.string.noBtFolderContent), context.getResources().getString(R.string.exit), 2);

        } else {
            Intent mainIntent = new Intent(context, MainClass.class);
            context.startActivity(mainIntent);
        }
    } 
```

我需要上下文来启动这个新的活动，从资源中获取字符串等等。有什么可能的方法可以让我以不同的方式来避免内存泄漏？感谢您阅读这篇大文章，如果您需要更多代码或其他任何内容，只需添加评论即可。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T09:12:28.750

您可能应该尽可能尝试使用 Application Context 而不是 Activity 上下文（这并不总是可能的）。

要从任何地方访问您的应用程序上下文，您可以定义自己的应用程序类

```
class MyApp extends Application
{
private static MyApp mInstance;

@Override
public void onCreate()
{
   mInstance = this;
}

public static Context context()
{
   return mInstance.getApplicationContext();
}

} 
```

然后你在你的清单中声明这个类

```
<application android:icon="@drawable/ic_launcher" android:label="@string/app_name" android:theme="@style/AppTheme" android:name="com.myapp.MyAppClass"> 
```

并在适用的情况下使用 MyApp.context()

# android - 单击按钮关闭充气布局

> ID：13509062
> 
> 赞同：1
> 
> 时间：2012-11-22T09:06:42.130
> 
> 标签：android

单击膨胀布局的按钮时，我想关闭此膨胀布局。如何实现这一点请帮助我。

```
li = LayoutInflater.from(VMAdjustFrame.this);
promptsView = li.inflate(R.layout.wishlist_save_prompt, null);
alertDialogBuilder = new AlertDialog.Builder(VMAdjustFrame.this);
alertDialogBuilder.setView(promptsView);
alertDialogBuilder.show();

TextView textView = (TextView)promptsView.findViewById(R.id.textView1);
textView.setText(context.getString(R.string.share_photo)); 
```

单击电子邮件按钮时调用侦听器

```
Button emailButton = (Button)promptsView.findViewById(R.id.phoneButton);
emailButton.setText(context.getString(R.string.share_photo_email));
emailButton.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {

    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:14:09.100

查看这两行是否有变化

1.  从您的方法创建一个**AlertDialog**对象（实例） 。`alertDialogBuilder.show()`

    ```
    AlertDialog dialog = alertDialogBuilder.show(); 
    ```

2.  **使用AlertDialog**的该实例调用`dismiss()`方法来隐藏它。

     **```
    emailButton.setOnClickListener(new OnClickListener() {
     @Override
     public void onClick(View v) {
         dialog.dismiss();
     } 
    ```** 

 ****更新：**

实际上，您正在膨胀视图并将其设置为**AlertDialog**，因此您必须关闭该**AlertDialog**以隐藏该膨胀视图。**

# actionscript-3 - AGAL HELP：在 2D 纹理、2D 渲染中，如何使用 agal 从程序常量的 x、y 偏移量计算顶点

> ID：13509063
> 
> 赞同：0
> 
> 时间：2012-11-22T09:06:40.863
> 
> 标签：actionscript-3, stage3d, agal

我希望有人可以对我的 agal 问题有所了解：

我有一个 64x64 固定大小的纹理。uv 和顶点也是固定的。

现在我需要在 2D 阶段移动它。

我目前使用的方法是每次从这个纹理中绘制三角形时计算和上传一个新顶点。

我发现 VertexBuffer3D.uploadFromByteArray 需要大量时间来处理。

我相信在 agal 中必须有更聪明的方法来做到这一点。

我可以在顶点阴影的常量寄存器中传递 x、y 偏移量，并在 agal 中计算顶点大小吗？

如果这是可能的，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:41:28.267

上传一次几何图形，然后将每个顶点乘以顶点着色器中的模型-视图-透视矩阵。矩阵可以传递给常量寄存器中的顶点着色器（注意一个 4x4 矩阵需要 4 个常量寄存器）。[这是一个很好的例子](http://www.adobe.com/devnet/flashplayer/articles/hello-triangle.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T05:45:57.843

如果 MVP 矩阵不足并且您需要操纵单个顶点位置，则可以使用常量寄存器索引。但是请注意，可以以这种方式处理的顶点数量是有限的，因为可用于顶点着色器的常量寄存器的数量是有限的（最多 128 个常量，包括您的 MVP 矩阵）。

1.  在构建几何图形时，为每个顶点分配一个唯一的 id 并将其上传到顶点数据。最小的 id 应该等于用于存储偏移量的第一个常量的索引。让我们假设这个最小的 id 是`n0`并且 id 存储在register的`x`组件中。`va1`此外，由于 AGAL 没有与 PixelBender 的操作码等效的`loadFloat`操作码，因此最好为每个顶点设置一些初始位置。让它存储在`va0`.
2.  每次渲染场景时，设置常量`n0...(n0 + m - 1)`，其中`m`是顶点数。`Float2`您可以使用数据类型将单个顶点的 x 和 y 位移存储在常量内。使用`Float4`数据类型，您可以为每个顶点存储两个额外的数字（它可能是颜色/纹理偏移或其他）。也可以使用稍微复杂的着色器将两个后续顶点的 xy 偏移存储在单个常量中。
3.  在 AGAL 中，您可以索引顶点着色器的常量寄存器（至少现在只能索引它们）。让我们在着色器中使用此功能来获取特定顶点的数据：

    ```
    mov vt1 vc[va1.x] // obtain the offset from constants using vertex id
    add vt1 vt1 va0   // add the offset to the initial position of the vertex
    m44 op vt1 vc0    // multiply with MVP (assuming that it is stored in vc0...vc3) 
    ```

这种方法适用于几种特定情况，但不适用于一般情况。

# php - PHP中的神秘代码

> ID：13509064
> 
> 赞同：0
> 
> 时间：2012-11-22T09:06:43.110
> 
> 标签：php, sql, loops, while-loop

这段代码是在别人写的脚本中找到的，我被要求编辑。它似乎没有做任何事情..我想知道它到底为什么在那里，如果我删除它，世界上某个地方是否会出现严重错误..

我错过了什么吗？

```
//begin mystery code - i have no idea what this chunk of code is doing..
$result = mysql_query("SHOW COLUMNS FROM ".$table."");
$i = 0;
if (mysql_num_rows($result) > 0) {
while ($row = mysql_fetch_assoc($result)) {
$i++;
}
}
//end mystery code 
```

`$result`没有在其他任何地方引用..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T09:07:55.123

它正在计算数据库表中的列数`$table`，并将值放入`$i`

想必，`$i`是后来用的什么东西？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T09:11:28.643

它做了两件事：

1.  `$i`每行增加。
2.  将每一行存储到其中`$row`并最终存储`false`到其中。

所以最后它设置：

*   `$i`到行数。
*   `$row`至`false`

但是不要对垃圾代码感到好奇。改为改进它：

```
$i   = mysql_num_rows($result);
$row = false; 
```

还封装`mysql_*`调用，以便您以后可以轻松替换它们。如果查询失败，您还应该处理错误情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:11:00.403

它似乎唯一要做的就是计算 $i 中的列数。如果脚本中的任何地方都没有使用 $i，您可以删除此代码。

如果无法删除任何代码，还可以在脚本中查找 $row 和 $result 变量使用情况。

# vb.net - 按下 Escape 键时关闭 VB.NET 表单

> ID：13509065
> 
> 赞同：15
> 
> 时间：2012-11-22T09:06:45.687
> 
> 标签：vb.net, visual-studio-express

我正在使用 VB 2010 Express。

在`C#`我将设置表单`CancelButton`属性。

对于这个 VB 表单，我没有 CancelButton，所以我怀疑我需要对`KeyPress`或进行编程`KeyDown`。

1.  这两个事件有什么区别？
2.  我应该使用哪个？
3.  我假设这个的一般代码如下？：

    ```
    If e.KeyCode = Keys.Escape Then
        Close()
    End If 
    ```

我`.Focus`在表单的其他控件中有某些代码，然后将其放在主表单事件过程中变得毫无意义，因为主表单从未真正*拥有*焦点。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-22T09:20:36.977

将表单 keydown 设置为

```
Private Sub Form1_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles MyBase.KeyDown
    If e.KeyCode = Keys.Escape Then Me.Close()
End Sub 
```

**然后，请记住将表单上的 KeyPreview 属性设置为 TRUE。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-01T07:32:06.327

我的解决方案也是表单属性：

*   将 CancelButton 属性设置为执行取消功能的按钮

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-14T18:37:20.110

1.  你说“VB 表单没有取消按钮”——所以给它*一个不可见的按钮。* a.) 将按钮添加到表单中。b.) 将其**Visible**属性设置为**False**。（请记住，计算机不会犯错误——*它们会撒谎。*所以让我们算一算吧。）
2.  在表单属性菜单上，将**CancelButton**属性设置为**不可见的取消按钮**。
3.  在表单属性菜单上，将**KeyPreview**属性设置为**True**。
4.  双击你不可见的 CancelButton 并添加 Me.Dispose()
5.  现在你要处理一个令人讨厌的问题。结构化编程的基本原则之一是“例程必须只有一个出口”。您不想在两个不同的地方处理退出例程。您的用户可以通过使用右上角的“Esc”退出。结构化编程真是太棒了。所以 。. .
6.  红色按钮右上角的黑色“X”调用 FormName_Deactivate——如果您的表单名称是 FormSanta，那么它就是 FormSanta_Deactivate。为简单起见，不要介意正确的方法，（你的天鹅绒血汗工厂里的微型农奴，你能听到我在哭吗？）给你右上角的“X”按钮和你不可见的退出按钮相同的代码。然后添加 Me.Close()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-08T23:26:43.353

表单的“KeyPreview”属性必须设置为true，否则这将不起作用...

# android - 如何在安卓浏览器中播放直播视频？

> ID：13509068
> 
> 赞同：1
> 
> 时间：2012-11-22T09:06:47.743
> 
> 标签：android, html, live-streaming, android-browser

我正在寻找一个应用程序，例如在 android 中进行直播。我在 android 中使用 Ip camera 应用程序得到了一个解决方案。它在使用 flv 播放器的桌面上运行良好。但在android浏览器中它不起作用。我想在任何浏览器（如 android 移动浏览器或任何计算机浏览器）中播放直播视频。经过我的研究，我得出一个结论，即 html5 将在任何浏览器而不是 flv 中播放。任何人都可以建议我关于 html5 如何在直播视频中使用。

请帮助提供示例代码或任何合适的链接。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T09:36:05.797

不幸的是，不存在适用于*所有*移动浏览器的 HTML5 实时流媒体解决方案。

声称支持 HTML5 视频的浏览器还必须支持使用的

*   编解码器：有些支持[H.264](http://en.wikipedia.org/wiki/H.264/MPEG-4_AVC)，有些支持 VP8 ( [WebM](http://en.wikipedia.org/wiki/WebM) )，有些支持两者。
*   流式传输格式：实时视频不能作为渐进式 HTTP 下载流式传输（至少在没有[.mp4](http://en.wikipedia.org/wiki/MPEG-4_Part_14)等常见容器格式（主要用于 H.264，不要与[MPEG-4 视频编解码器](http://en.wikipedia.org/wiki/MPEG-4_Part_2)混淆）的情况下不能流式传输) 或 MKV（WebM 基本上是 MKV 容器中的 VP8 视频）。

你现在最好的选择可能是[HTTP Live Streaming——](http://en.wikipedia.org/wiki/HTTP_Live_Streaming)它不完全是 HTML5 的一部分，但它受到 Android、iOS 和可能的其他移动操作系统的支持。

作为旧设备的后备方案，您可以支持[RTSP](http://en.wikipedia.org/wiki/Real_Time_Streaming_Protocol)流，它在非智能手机和旧 Android 设备上得到更广泛的支持，但缺点是使用基于 UDP 的 RTP 协议而不是标准 HTTP，后者更有可能通过通过企业防火墙并在内容交付网络、HTTP 缓存等方面更好地扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:10:19.997

您可以参考以下网址，

[http://code.google.com/p/spydroid-ipcamera/](http://code.google.com/p/spydroid-ipcamera/)

[http://code.google.com/p/ipcamera-for-android/](http://code.google.com/p/ipcamera-for-android/)

# django - Django Formsets：ManagementForm 数据丢失或已被篡改

> ID：13509069
> 
> 赞同：1
> 
> 时间：2012-11-22T09:06:49.627
> 
> 标签：django, django-forms

我正在使用内联表单集。我有一个主窗体**应用程序**。然后 2 formset**使用**和**qual**。

当我运行我的视图时。我收到一条错误消息，提示**ManagementForm 数据丢失或已被篡改**

这是我的看法

```
@login_required
def apply(request):
    if request.POST:
        data = {'form-TOTAL_FORMS': u'1','form-INITIAL_FORMS': u'0','form-MAX_NUM_FORMS': u''}
        form = ApplicationForm(request.POST)
        employ_formset = EmploymentFormSet(data)
        qual_formset = QualificationFormSet(data)
        if form.is_valid():
            application = form.save(commit=False)
            employ_formset = EmploymentFormSet(request.POST, instance=application)
            qual_formset = QualificationFormSet(request.POST, instance=application)
            if employ_formset.is_valid() and qual_formset.is_valid():
                application.save()
                employ_formset.save()
                qual_formset.save()
            return HttpResponse('This Worked!!!!!!!!')
    else:
        form = ApplicationForm()
        employ_formset = EmploymentFormSet(instance=Application())
        qual_formset = QualificationFormSet(instance=Application())
    return render_to_response('apply.html', {'form':form, 'employ_formset':employ_formset, 'qual_formse 
```

这是我的模板。我意识到我可以简单地使用模板。但我希望内联表单集像 Django Admin 一样水平显示。

```
{% extends "base.html" %}
{% load i18n %}

{% block content %}
<form action="." method="post" class="application_form">
    {% csrf_token %}
    <!-- PERSONAL -->
    <h3>Applicant Details</h3><br />
    <table>
      <tr>
        <td><label for="id_title">Title:</label></td>
        <td>{{ form.title }}<small>{{ form.title.errors }}</small></td>
      </tr>
      <tr>
        <td><label for="id_firstname">Firstname:</label></td>
        <td>{{ form.firstname }}<small>{{ form.firstname.errors }}</small></td>
        <td><label for="id_surname">Surname:</label></td>
        <td>{{ form.surname }}<small>{{ form.surname.errors }}</small></td>
      </tr>
      <tr>
        <td><label for="id_address">Address:</label></td>
        <td>{{ form.address }}<small>{{ form.address.errors }}</small></td>
      </tr>
      <tr>
        <td><label for="id_email">Email:</label></td>
        <td>{{ form.email }}<small>{{ form.email.errors }}</small></td>
      </tr>
      <tr>
        <td><label for="id_mobilephone">Mobile Phone:</label></td>
        <td>{{ form.mobilephone }}<small>{{ form.mobilephone.errors }}</small></td>
      </tr>
      <tr>
        <td><label for="id_homephone">Home Phone:</label></td>
        <td>{{ form.homephone }}<small>{{ form.homephone.errors }}</small></td>
      </tr>
    </table>

    <!-- EDUCATION -->
    <br />
    <h3>Employment Details</h3><br />
    {{ employ_formset.management_form }}
    {{ employ_formset.non_form_errors.as_ul }}
    <table id="formset" class="form">
    {% for form in employ_formset.forms %}
      {% if forloop.first %}
      <thead>
        <tr>
        {% for field in form.visible_fields %}
          <th>{{ field.label|capfirst }}</th>
        {% endfor %}
        </tr>
      </thead>
      {% endif %}
      <tr class="{% cycle row1,row2 %}">
      {% for field in form.visible_fields %}
    <td>
    {# Include the hidden fields in the form #}
    {% if forloop.first %}
      {% for hidden in form.hidden_fields %}
        {{ hidden }}
      {% endfor %}
    {% endif %}
    {{ field.errors.as_ul }}
    {{ field }}
    </td>
  {% endfor %}
  </tr>
{% endfor %}
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:15:24.820

您不必像在代码中那样为管理数据构建字典：

```
data = {'form-TOTAL_FORMS': u'1','form-INITIAL_FORMS': u'0','form-MAX_NUM_FORMS': u''} 
```

这应该来自 POST。如果您愿意，可以在构建处理 GET 请求的表单集时使用[`max_num`,参数适当地更改它。`extra`](https://docs.djangoproject.com/en/dev/topics/forms/formsets/#limiting-the-maximum-number-of-forms)

# asp.net - 从 itemtemplate 复选框事件中获取 gridview 列和行

> ID：13509072
> 
> 赞同：1
> 
> 时间：2012-11-22T09:06:55.510
> 
> 标签：asp.net, events, gridview, checkbox, itemtemplate

我有带有 itemTemplate 的 gridview 包含在 onCheckChanged 处触发的复选框。我想捕捉gridview所在的gridview列和行。

我该怎么做 ？

```
public void PM_chkbx_Chacked_Changed(object sender, EventArgs e)
{
     //What to write here?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:12:31.020

我在 gridview 中使用了**datakeys**并且能够获取行和特定列。这里 gridview id 是**grdrequestlist**。

```
public void PM_chkbx_Chacked_CheckedChanged(object sender, EventArgs e)
{
//here you can get row on whcih you checkbox chnged event called

GridViewRow Row = ((GridViewRow)((Control)sender).Parent.Parent);
string requestid = grdrequestlist.DataKeys[Row.RowIndex].Value.ToString();
string cellvalue=Row.Cells[1].Text;
} 
```

这个gridview的.aspx页面设计在这里你可以在**Columns**部分添加你的列。

```
<asp:GridView ID="grdrequestlist" runat="server" DataKeyNames="RequestId" >
<Columns>
 <asp:TemplateField HeaderText="Actions" >
                 <ItemTemplate>
 <asp:CheckBox ID="PM_chkbx_Chacked" AutoPostBack="true" runat="server" oncheckedchanged="PM_chkbx_Chacked_CheckedChanged" />
                 </ItemTemplate>
                </asp:TemplateField>
                    </Columns>
</asp:GridView> 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:34:01.497

我找到了解决方案：

```
public void PM_chkbx_Chacked_Changed(object sender, EventArgs e)
    {
        GridViewRow gvr = ((GridViewRow)((Control)sender).Parent.Parent);
        int index_row = gvr.RowIndex;
        string role_name = gv_permissions_management.DataKeys[index_row].Value.ToString();
        string fileld_name = ((DataControlFieldCell)((Control)sender).Parent).ContainingField.HeaderText;
        ((DataControlFieldCell)((Control)sender).Parent).BackColor = Color.Red; //Color the Cell

     } 
```

# python - python中的基本计算器程序

> ID：13509078
> 
> 赞同：0
> 
> 时间：2012-11-22T09:07:31.717
> 
> 标签：python, calculator

我刚刚在python中编写了一个简单的计算器脚本，通常python默认应该识别（-）减号，（*）乘法，（/）除号，但是在考虑这个脚本时它无法识别符号。请留下您的评论以清除我...

```
#! /usr/bin/python

print("1: ADDITION")
print("2: SUBTRACTION")
print("3: MULTIPLICATION")
print("4: DIVISION")

CHOICE = raw_input("Enter the Numbers:")

if CHOICE == "1":
    a = raw_input("Enter the value of a:")
    b = raw_input("Enter the value of b:")
    c = a + b
    print c

elif CHOICE == "2":
    a = raw_input("Enter the value of a:")
    b = raw_input("Enter the value of b:")
    c = a - b
    print c

elif CHOICE == "3":
    a = raw_input("Enter the value of a:")
    b = raw_input("Enter the value of b:")
    c = a * b
    print c

elif CHOICE == "4":
    a = raw_input("Enter the value of a:")
    b = raw_input("Enter the value of b:")
    c = a / b
    print c

else: 
 print "Invalid Number"
 print "\n" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T09:13:44.017

您需要将输入、字符串更改为整数或浮点数。因为，有除法，你最好把它改成浮动。

```
a=int(raw_input("Enter the value of a:"))
a=float(raw_input("Enter the value of a:")) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T09:15:04.773

当你得到输入时，它是一个字符串。运算符是为字符串定义的`+`，这就是它可以工作但其他人不能工作的原因。我建议使用辅助函数来安全地获取整数（如果您正在执行整数算术）。

```
def get_int(prompt):
    while True:
        try:
            return int(raw_input(prompt))
        except ValueError, e:
            print "Invalid input"

a = get_int("Enter the value of a: ") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T09:36:27.133

Billwild 说你应该改变以使你的变量成为整数。但为什么不浮动。它是整数还是浮点数并不重要，它必须是数字类型。Raw_input 接受任何输入，如字符串。

```
a=float(raw_input('Enter the value of a: ')) 
```

或者对于蒂姆的方法

```
def get_float(prompt):
    while True:
        try:
            return float(raw_input(prompt))
        except ValueError, e:
            print "Invalid input"

a = get_float("Enter the value of a: ") 
```

您始终可以将结果转换为浮点数或整数或返回。你正在编程什么样的计算器很重要。

# matlab - 如何在matlab中检测向量中的重复值

> ID：13509088
> 
> 赞同：1
> 
> 时间：2012-11-22T09:07:56.413
> 
> 标签：matlab

如果我有这些数据： m= {'a' 'b' 'a' 'v'}

如何制作一个 if 语句，如果我在该行中有重复的值，我应该省略这一行我有这个代码，但它不是直接代码......我想要更专业的东西（一个没有 for 循环的行函数！ )

```
for j=1:length(m)
    if isequal(m{1,j},m{1,j+1})
        disp('error');
    end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T09:24:19.917

使用独特的命令。它还可以从矩阵[http://www.mathworks.se/help/matlab/ref/unique.html#btb0_85中找到重复的行](http://www.mathworks.se/help/matlab/ref/unique.html#btb0_85)

# javascript - 将数据从一个网页传递到另一个网页

> ID：13509089
> 
> 赞同：8
> 
> 时间：2012-11-22T09:07:59.403
> 
> 标签：javascript, client-side

我需要使用客户端技术将大量数据从一个页面传递到另一个页面。它基本上是一个将显示在目标页面上的 id 列表。显然查询字符串不适合，因为可能有数千个 id，所以我想我可以使用 javascript 动态添加表单（method=GET），将 id 写入隐藏字段并将表单提交到目标页面。它似乎工作正常，但我想知道是否有更好的方法 - 这感觉有点hacky。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T09:18:02.167

通过使用 HTML5 Storage API，您可以实现此目的...

使用 HTML5，网页可以在用户浏览器中本地存储数据。

早些时候，这是通过 cookie 完成的。但是，Web 存储更安全、更快速。数据不包含在每个服务器请求中，但仅在请求时使用。也可以在不影响网站性能的情况下存储大量数据。

数据以键/值对的形式存储，网页只能访问自己存储的数据。

*   **`localStorage`**- 存储没有过期日期的数据
*   **`sessionStorage`**- 存储一个会话的数据

**例子：**

设置

```
window.localStorage.setItem("name",document.getElementById("name").value); 
```

要得到

```
var name = window.localStorage.getItem("name"); 
```

有关更多参考，请参阅[HTML5 存储](http://www.w3schools.com/html/html5_webstorage.asp)

**注意：** Internet Explorer 8+、Firefox、Opera、Chrome 和 Safari 支持 Web 存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:11:43.693

身份证的结果并没有那么多。如果 ID 是 GUID，则将有 Nx32 字节。你可以使用 jQuery post，它会触发一个 HTTP Post。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-10T02:25:59.937

*   如果没有太多数据，您还可以在 URL 的末尾添加一个哈希值，并让新页面在加载时获取该值
*   [https://developer.mozilla.org/en-US/docs/Web/API/URL/hash](https://developer.mozilla.org/en-US/docs/Web/API/URL/hash)
*   下面是一些演示这个的代码：

**page-1.html**

```
<html>
    <head>
        <meta charset="utf-8"/>
        <title>Page 1</title>
    </head>
    <body>
        <input id="txtMessage" type="text" value="Hello">
        <button id="btnSend">Send</button>
        <script>
            btnSend.onclick = () => {
                const message = txtMessage.value || "No message defined";
                window.location = "page-2.html#" + message;
            };
        </script>
    </body>
</html> 
```

* * *

**page-2.html**

```
<html>
    <head>
        <meta charset="utf-8"/>
        <title>Page 2</title>
    </head>
    <body>
        <h2>The message is ...</h2>
        <p id="output"></p>
        <script>
            let message = location.hash;
            message = message.substring(1); // strip off leading #
            message = decodeURI(message); // get rid of %20 for spaces
            output.innerHTML = message;
        </script>
    </body>
</html> 
```

# java - 如何为一个特定的 servlet 应用过滤器？

> ID：13509090
> 
> 赞同：7
> 
> 时间：2012-11-22T09:08:02.947
> 
> 标签：java, servlets, servlet-filters, web.xml

在聊天我的应用程序中，我有五个 servlet。我需要为单个 servlet 应用过滤器。

我的过滤器是

```
package com.tps.flexchat.action;

import java.io.IOException;
import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;

/**
 * Servlet Filter implementation class EncodingFilter
 */
public class EncodingFilter implements Filter {
    private String encoding = "UTF-8";
    private FilterConfig filterConfig;
    /**
     * @see javax.servlet.Filter#init(javax.servlet.FilterConfig)
     */
    public void init(FilterConfig filterConfig) throws ServletException {
        this.filterConfig = filterConfig;
    }

    /**
     * @see javax.servlet.Filter#doFilter(javax.servlet.ServletRequest, javax.servlet.ServletResponse, javax.servlet.FilterChain)
     */
    public void doFilter(ServletRequest req, ServletResponse resp,FilterChain chain) throws IOException, ServletException {

        resp.setCharacterEncoding("encoding");
        resp.setContentType("encoding");
                    req.setCharacterEncoding(encoding);
        chain.doFilter(req, resp);

        System.out.println("filter -------> :"+encoding );
    }

    /**
     * @see javax.servlet.Filter#destroy()
     */
    public void destroy() {
    }

} 
```

web.xml 中的映射将是

```
<filter>
    <display-name>EncodingFilter</display-name>
    <filter-name>EncodingFilter</filter-name>
    <filter-class>com.tps.flexchat.action.EncodingFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>EncodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

我只需要将 EncodingFilter 过滤器应用于此 SendMessageAction servlet，

```
package com.tps.flexchat.action;

import java.io.IOException;
import java.io.PrintWriter;
import java.net.URLDecoder;
import java.net.URLEncoder;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.genesyslab.platform.webmedia.protocol.FlexChatProtocol;
import com.tps.flexchat.Request.SendMessage;
import com.tps.flexchat.info.ApplicationInfo;
import com.tps.flexchat.info.CustomerInfo;

public class SendMessageAction extends HttpServlet {
    private static final long serialVersionUID = 1L;

    private String msg;
    private String seckey;
    private String uid;
    private String sessionId;
    private int counter;
    private FlexChatProtocol protocol = null; 
    private SendMessage message;

    public SendMessageAction() {
        super();
    }

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

            msg = request.getParameter("message");
            seckey = request.getParameter("securekey");
            uid = request.getParameter("userId");
            sessionId = request.getParameter("sessionId");
            counter = 1;
            protocol = ApplicationInfo.flexProtocol;

            message = new SendMessage();
            message.send(msg, seckey, uid, sessionId, counter, protocol);

            CustomerInfo customer = ApplicationInfo.customerDetails.get(uid);

            out.print(customer.getMessage());

        }

    } 
```

提前致谢....

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T09:39:02.210

您还可以通过引用 servlet 名称而不是 url 模式将过滤器应用于特定的 servlet。如果您的 servlet 声明如下：

```
<servlet>
    <servlet-name>SendMessageAction</servlet-name>
    <servlet-class>com.tps.flexchat.action.SendMessageAction</servlet-class>
</servlet> 
```

您应该能够使用以下过滤器映射：

```
<filter-mapping>
    <filter-name>EncodingFilter</filter-name>
    <servlet-name>SendMessageAction</servlet-name>
</filter-mapping> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T09:13:47.010

您可以更改过滤器路径：

更改`<url-pattern>`为与您的 servlet 相同的路径

```
<filter>
    <display-name>EncodingFilter</display-name>
    <filter-name>EncodingFilter</filter-name>
    <filter-class>com.tps.flexchat.action.EncodingFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>EncodingFilter</filter-name>
    <url-pattern>/SendMessageAction/</url-pattern>
</filter-mapping> 
```

# xcode - Xcode - 构建后如何将可执行文件复制到新位置？

> ID：13509095
> 
> 赞同：27
> 
> 时间：2012-11-22T09:08:14.613
> 
> 标签：xcode, xcode4

我正在使用 Xcode 4 构建命令行应用程序。

构建完成后，可执行文件位于默认的 DerivedData 文件夹中。这没关系，但是我想将此文件复制到特定文件夹。无论构建的类型（发布/调试）如何，我都希望这种情况发生。

谁能建议这样做的方法？

顺便说一句，我的项目在 DerivedData 中的子目录中有一个随机字符标签：

```
myProject-fnkwvtitgroivocadokaayqexhqy 
```

有谁知道这是否会随着时间的推移而改变（从而改变我要复制的可执行文件的位置），或者它是否适用于这个项目？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-22T09:14:41.960

实际上有一个很好的方法来自动化这个。假设你当前在你的 Xcode 项目中，点击项目文件并点击目标（既然你说它是一个简单的命令行程序，应该只有一个）。

接下来单击选项卡构建阶段并打开复制文件的三角形。

（如果您没有看到带有“复制文件”的三角形，请单击 + 符号添加它。）

现在在 Products 文件夹中的导航器中将是构建的可执行文件。将其拖入 Copy Files 构建阶段。

在“复制文件”小菜单中，单击下拉菜单以选择“绝对路径”，然后在该路径下方输入您希望安装它的路径。确保选中“仅在安装时复制”，每次构建项目并成功时，它都会将可执行文件复制到该位置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-04-06T17:05:59.647

就我而言，我希望将新建的应用程序复制到应用程序文件夹中的现有版本上。在构建规则中，将一个添加`New Run Script Phase`到列表中。我使用`/bin/bash`，但您也可以使用默认值`/bin/sh`。然后，我将以下代码添加到脚本中。

```
cp -f -R ${BUILT_PRODUCTS_DIR}/${APPLICATION_NAME} /Applications 
```

# php - 其他两天之间的星期几

> ID：13509101
> 
> 赞同：1
> 
> 时间：2012-11-22T09:08:32.030
> 
> 标签：php, date

我在 PHP 中存储了两个日期`date("w")`（星期几，从 0 到 6），我需要知道当前日期（再次使用 w）是否在这两者之间。很简单，除了周日的部分。我不能只做类似的事情

```
$now = date("w");
if ($first_day < $now < $sec_day){
    //is in between
} 
```

导致 if和`$first_day = 5`，即使介于两者之间，它也会失败。我应该如何处理这个？`$now = 6``$sec_day = 0`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:42:39.473

只需要在第一天大于最后一天的情况下更改天数：

```
//first correct days
if ($first_day > $sec_day){
    if ($now > $first_day){
        $sec_day+=7;
    }
    if ($now < $first_day)
        $first_day-=7;
    }
}
if ($first_day < $now < $sec_day){
    //is in between
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:15:58.817

这是预期的行为。星期六不在星期五和星期日之间，除非你开始谈论不同的星期。在这种情况下，您需要考虑`date("W")`（周​​数）。一个简单的解决方案是使用`date("z");`这意味着一年中的某一天。如果不查看较大的日期，则无法确定一天是否介于两天之间。

# python - 如何用某种“动量”生成随机方向（N、S、E、W、无）？

> ID：13509103
> 
> 赞同：2
> 
> 时间：2012-11-22T09:08:33.523
> 
> 标签：python, random, prng, random-walk

我正在尝试以随机方式探索网格。
我可以去的五个可能的方向是北、东、南、西和停留，所有这些都是同样可能的，至少在最初是这样。

从上面简单地选择一个随机方向的问题在于它最终使我的代理离中心太近（两个随机方向很容易相互抵消），这完全违背了随机游走的目的。

我*想做*的是以随机方式生成随机方向，整体上是无偏的，但*更有可能选择接近先前选择的方向的方向*。

换句话说，我需要我的 RNG 有某种“动力”。

我想出了这个算法：

```
def RandomWithMomentum(n, momentum=0.5):
    from random import uniform
    v = uniform(-1, 1)
    for i in range(n):
        yield v
        v = v * momentum + uniform(-1, 1) * (1 - momentum) 
```

这似乎给出了很好的结果：

```
-0.04367186243339227
-0.1798381656787107
-0.07608795741137708
-0.0728742899528114
-0.06215075604982321
 0.17952360050689026
 0.016352984710556573
 0.16954506853320414
 0.3947467183848671
 0.12785652121165636 
```

...除了虽然该算法保证正数和负数的可能性相同，但它*不能*保证从 -1 到 +1 的区间内均匀分布！

（如果您意识到数字不一定以 -1 和 +1 为界，这应该很明显！）

所以我的问题是，我如何将这个（或其他算法）扩展到选择五个*方向*之一，而不仅仅是一个正数或负数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:57:17.857

您可以使用`turn right`, `turn left`,`move forward`作为可能的移动。

所以现在你需要随机到一个方向两次才能返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:30:08.010

您是否允许在步骤之间存储动量（速度）？

如果是这样，那么最好的办法可能是在每个时间步选择一个速度——即速度和方向——这*就像一个矢量一样*添加到先前的速度。无论如何，这是更现实的物理学，因为力会改变动量。

（但考虑到你生活在一个网格上，你如何量化事物会很复杂，以至于你最终只能移动 NESW。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T09:46:58.780

为什么不直接创建一个随机数 0 <= r <= 4 并将其映射到一个方向（假设方向 0 是“不要移动”）？

我看到你的随机游走太随机的问题，我可能会尝试坚持你的方向一段时间（你也可以使用随机数来确定多长时间）然后重新决定。在我看来，这至少是基于现实的：通常*，如果*你决定走向某个方向，你会做一段时间，而不是考虑每隔 x 秒就改变主意。

[http://docs.python.org/2/library/random.html](http://docs.python.org/2/library/random.html)展示了如何使用随机数函数。random.uniform() 为您提供浮动的均匀分布。将 random.randint() 用于整数结果（我想也是统一的）。

# java - 如何在 JSpinner 中只允许正值？

> ID：13509107
> 
> 赞同：3
> 
> 时间：2012-11-22T09:08:48.967
> 
> 标签：java, swing, jspinner

我只想在我的`JSpinner`. 我如何在 Netbeans 中设置它？

我通过选择模型然后方法调用尝试了微调器的属性，之后我不知道如何继续修改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T09:11:10.450

假设您使用 a[`SpinnerNumberModel`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SpinnerNumberModel.html)作为模型，只需将最小值设置为 0。

（如果不是，则需要提供更多详细信息。）

# sql - SQL 查询变量

> ID：13509109
> 
> 赞同：0
> 
> 时间：2012-11-22T09:08:50.840
> 
> 标签：sql, r

我有一个 sql 查询，它可以获取特定股票的交易数据。我现在正在尝试遍历不同的股票以应用特定分析。下面的代码显示了我尝试将变量传递给循环中的查询以及“硬编码”查询。

任何指导将不胜感激。

```
my.stocks <- c('ABL','IPL')

for (i in 1:2)
{
channel <- odbcConnect("Public_Trades")
my.frame1 <- sqlQuery(channel,
"SELECT TRADE_DATE_TIME,
 PRICE,
 QUANTITY
 FROM [ISLDWODS].[HERMES_PUBLIC].[PUBLIC_TRADES_HISTORY]
 where TRADE_DATE_TIME > '2012-11-01' and TRADE_TYPE ='AT' and INSTR_CODE = " & my.stocks[i] &  
 "order by TRADE_DATE_TIME asc")

my.frame2 <- sqlQuery(channel,
"SELECT TRADE_DATE_TIME,
 PRICE,
 QUANTITY
 FROM [ISLDWODS].[HERMES_PUBLIC].[PUBLIC_TRADES_HISTORY]
 where TRADE_DATE_TIME > '2012-11-01' and TRADE_TYPE in ('AT','UT') and INSTR_CODE = 'MPC'  
 order by TRADE_DATE_TIME asc")

close(channel)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:45:59.810

谢谢sgibb，

?paste 解决了这个问题：

```
my.stocks <- c("'ABL'","'IPL'")

for (i in 1:2)
{

my.string1 <- paste("SELECT TRADE_DATE_TIME,PRICE,QUANTITY  
              FROM [ISLDWODS].[HERMES_PUBLIC].[PUBLIC_TRADES_HISTORY] 
              where TRADE_DATE_TIME > '2012-11-01' and TRADE_TYPE ='AT' and INSTR_CODE = ", my.stocks[1]," order by TRADE_DATE_TIME asc")

my.string2 <- paste("SELECT TRADE_DATE_TIME,PRICE,QUANTITY  
              FROM [ISLDWODS].[HERMES_PUBLIC].[PUBLIC_TRADES_HISTORY] 
              where TRADE_DATE_TIME > '2012-11-01' and TRADE_TYPE in ('AT','UT') and INSTR_CODE = ", my.stocks[1]," order by TRADE_DATE_TIME asc")

channel <- odbcConnect("Public_Trades")
my.frame1 <- sqlQuery(channel,my.string1)

my.frame2 <- sqlQuery(channel,my.string2)
} 
```

# asp.net - EF：当 IDENTITY_INSERT 设置为 OFF 时，无法在表“组”中插入标识列的显式值

> ID：13509112
> 
> 赞同：3
> 
> 时间：2012-11-22T09:09:10.010
> 
> 标签：asp.net, sql, entity-framework, c#-4.0, identity-insert

是的，这些问题中的另一个。我看过这里但无济于事..
这是我的情况。
我创建了一个 ASP 站点，最初使用的是 SQLce。事实证明这很糟糕，因为主持人不支持它。我通过 Web Matrix 方法将 sdf 文件转换为 SQL server 2012 db。数据库一切正常，一切都可以读取数据。当我尝试将任何内容写入表格时，问题就出现了。VS 出现说：
当 IDENTITY_INSERT 设置为 OFF 时，无法在表“组”中插入标识列的显式值。
现在..以前一切都很顺利。这是我建立的一个故事的例子：

```
Column1: ID - Int - Primary key. - Identity specification yes, with a increment of 1  
Column2: GroupName - nvarchar(100) - just a normal text field 
```

然后。它阻塞的代码在哪里：

```
 using (SLEntities context = new SLEntities())  
        {  
            var namecheck = (from n in context.Groups  
                             where n.GroupName == newname  
                             select n).Count();  

            if (namecheck > 0)  
            {  
                // the name already exists.. return  
                lab_Error.Text = newname + " is already in the database. Please use another name";  
                return;  
            }  

            // namecheck is new.. add to db  
            Group g = new Group();  
            g.GroupName = newname;  
            context.Groups.Add(g);  
            context.SaveChanges();  
        } 
```

它在 savechanges() 上死掉了。
我的问题是我该如何解决这个问题？（我看到了 IDENTITY_INSERT ON 的东西，但是当你只创建表时不是吗？）.. 或者，不是使用和自动递增 ID，还有什么方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T09:16:02.820

转到您的数据模型并验证身份列的“StoreGeneratedPattern”属性是否有效设置为“身份”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:16:37.413

在数据库中创建表时，如果您已将 IDENTITY_INSERT 放在任何列上，则在从代码插入数据时不需要为该列提供值。

例如 ：-

```
CREATE TABLE dummy(id int identity(1,1), data varchar(100))

Insert into dummy values('First row')// it will work 

Insert into dummy values(1,'First row')// it will give error 
```

所以更好的方法是同时插入来自代码提及列名的数据

喜欢

```
Insert into dummy(data) values('First row') 
```

或者您可以这样做（：-这将允许您将值插入标识列）

```
SET IDENTITY_INSERT dummy ON
INSERT INTO dummy(id, data) VALUES(3, 'garden shovel') 
```

您应该先查看这篇文章：- [http://msdn.microsoft.com/en-us/library/aa259221(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa259221(v=sql.80).aspx)

# android - “使用 Facebook 登录示例”中的错误编译

> ID：13509113
> 
> 赞同：42
> 
> 时间：2012-11-22T09:09:11.010
> 
> 标签：android, facebook, login, sdk, sample

我正在尝试在[本](https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/)教程中创建登录应用程序：

我在我的 logcat 中收到此错误：

```
11-22 15:57:53.863: E/AndroidRuntime(816): com.facebook.FacebookException: Cannot use SessionLoginBehavior SSO_WITH_FALLBACK when com.facebook.LoginActivity is not declared as an activity in AndroidManifest.xml 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-07-04T11:57:29.623

可能你忘了`Activity`在你的`AndroidManifest.xml`

```
<activity
    android:name="com.facebook.LoginActivity"
    android:label="@string/title_facebook_login" >
</activity> 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-11-22T14:47:03.290

我遇到了同样的问题，这是因为我忘记将**com.facebook.LoginActivity**活动添加到*AndroidManifest.xml*。

还要检查您是否遵循了[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/上“](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)*使用 Facebook 登录创建新的 Android 项目*”部分中的步骤，特别是那些关于将*app_id*字符串添加到*res/values/strings.xml*、*INTERNET*权限、*com.facebook.sdk.ApplicationId*元数据以及最后提到的 LoginActivity。

 **** * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-04-10T06:11:13.703

虽然最初的问题与 SDK 3.0 有关，但我认为值得一提的是，在 SDK v4.0.+ 中，需要在其中声明的活动`AndroidManifest.xml`是`com.facebook.FacebookActivity`：

```
<activity android:name="com.facebook.FacebookActivity"
    android:configChanges="keyboard|keyboardHidden|screenLayout|screenSize|orientation"
    android:theme="@android:style/Theme.Translucent.NoTitleBar"
    android:label="@string/app_name" /> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-12-23T19:19:18.333

在这个[链接](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

```
<activity
    android:name="com.facebook.LoginActivity"
    android:label="title_facebook_login" >
</activity> 
```

没有提到。

加上这个`AndroidMainfest.xml`，问题就解决了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-19T17:18:26.167

[https://developers.facebook.com/docs/reference/android/3.0/class/LoginActivity/](https://developers.facebook.com/docs/reference/android/3.0/class/LoginActivity/)

```
<activity
    android:name="com.facebook.LoginActivity"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Translucent.NoTitleBar">
</activity> 
```***

# shell - Unix字符串拆分问题

> ID：13509133
> 
> 赞同：2
> 
> 时间：2012-11-22T09:10:28.640
> 
> 标签：shell, unix

在搜索 unix 问题时，我遇到了以下字符串拆分正则表达式语句：

```
 string="abc@hotmail.com;xyz@gmail.com;uvw@yahoo.com"
    str1=${string%%;*} 
    str2=${string##*;}

    Result:
    str1=abc@hotmail.com 
    str2=uvw@yahoo.com 
```

我不明白第二个表达式（str2）。可以请人帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:13:08.633

从`bash`手册中，在`Parameter Expansion`：

```
 ${parameter#word}
   ${parameter##word}
          The word is expanded to produce a pattern just as in pathname expansion.  If the pattern matches  the  beginning  of  the
          value  of  parameter, then the result of the expansion is the expanded value of parameter with the shortest matching pat-
          tern (the ``#'' case) or the longest matching pattern (the ``##'' case) deleted.  If parameter is @  or  *,  the  pattern
          removal operation is applied to each positional parameter in turn, and the expansion is the resultant list.  If parameter
          is an array variable subscripted with @ or *, the pattern removal operation is applied to each member  of  the  array  in
          turn, and the expansion is the resultant list.

   ${parameter%word}
   ${parameter%%word}
          The  word  is  expanded to produce a pattern just as in pathname expansion.  If the pattern matches a trailing portion of
          the expanded value of parameter, then the result of the expansion is the expanded value of parameter  with  the  shortest
          matching pattern (the ``%'' case) or the longest matching pattern (the ``%%'' case) deleted.  If parameter is @ or *, the
          pattern removal operation is applied to each positional parameter in turn, and the expansion is the resultant  list.   If
          parameter  is  an  array variable subscripted with @ or *, the pattern removal operation is applied to each member of the
          array in turn, and the expansion is the resultant list. 
```

# php - 将 SQL 对象传递给新类

> ID：13509134
> 
> 赞同：2
> 
> 时间：2012-11-22T09:10:33.323
> 
> 标签：php

我有一个活动的 mysql 对象，其中包含我的连接等。$db->query（我的查询）。我想将此对象传递给一个新类，因此我不必再次创建该对象

我将如何将它传递到新课程中以便它仍然有效？

```
class NewClass {
  var $db;
  function __construct($db) {
   $this->db=$db;
 }

} 
```

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T20:39:06.050

你的例子对我来说似乎有效。[它是 Martin Fowler确定](http://martinfowler.com/articles/injection.html)的三种依赖注入类型之一：

*   构造函数
*   二传手
*   界面

例如，如果您想使用 setter 注入而不是构造函数注入，请在您的类上创建一个 setter 方法以接受数据库参数。也可能值得将该属性设为私有，以防止其他代码使用对象`NewClass`作为数据库对象的提供者。

```
class NewClass {
  private $db;
  public function setDb($db) {
    $this->db=$db;
  }
} 
```

# javascript - canvas、drawImage 不适用于远程图片

> ID：13509148
> 
> 赞同：2
> 
> 时间：2012-11-22T09:11:19.713
> 
> 标签：javascript, canvas, drawimage

我想从网上画一张图片，所以我有以下 html5 代码，这是 W3C Shool 的示例，但是当我在 Chrome 中加载 html 页面时，显示了图像。

```
<!DOCTYPE html>
<html>
    <body>
        <canvas id="myCanvas" width="500" height="500" style="border:1px solid #c3c3c3;">
            Your browser does not support the canvas element.
        </canvas>

        <script type="text/javascript">
            var c=document.getElementById("myCanvas");
            var cxt=c.getContext("2d");
            var img=new Image();
            img.src='http://www.w3school.com.cn/i/ct_html5_canvas_image.gif';
            cxt.drawImage(img, 0, 0);
        </script>
    </body>
</html> 
```

图片来自w3school，可以在我的Chrome中查看，我的Chrome是最新版本，所以不知道问题出在哪里，我什至尝试将图片下载到我的本地机器并放在同一目录下在上面的 html 页面中，将代码更改为 img.src='flower.gif'，但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:19:56.003

问题是您试图在图像加载之前绘制图像。尝试这样的事情：

```
 <canvas id="myCanvas" width="500" height="500" style="border:1px solid #c3c3c3;">
        Your browser does not support the canvas element.
    </canvas>

    <script type="text/javascript">

        var c = document.getElementById("myCanvas");
        var cxt = c.getContext("2d");

        var img=new Image();
        img.src='http://www.w3school.com.cn/i/ct_html5_canvas_image.gif';

        img.onload = draw;

        function draw(){               
            cxt.drawImage(img, 0, 0);            
        }

    </script> 
```

# hibernate - Hibernate 3 可以在 Tomcat 7 下工作吗？

> ID：13509149
> 
> 赞同：0
> 
> 时间：2012-11-22T09:11:23.897
> 
> 标签：hibernate, tomcat7

我有一个 HibernateUtil 类，`SessionFactory`它在初始化期间初始化 a 。下面是执行初始化的代码的快照。

```
public class HibernateUtil {

  ...

  static {
    try {
      if (cacheFactory.get("factory") == null) {
        sessionFactory = new Configuration().configure().buildSessionFactory();
        cacheFactory.put("factory", sessionFactory);
      }
      else {
        sessionFactory = (SessionFactory) cacheFactory.get("factory");
      }

    } 
    catch (HibernateException ex) {
       throw new RuntimeException(ex.getMessage(), ex);
    }
  }
} 
```

我测试了这段代码在 JDK6 和 WAS8 环境下运行，然后它工作正常。但是当我使用 JDK6 迁移到 Tomcat7 时，它将在`buildSessionFactory()`. 我使用的 Hibernate 版本是 3.6.10.Final。我只是好奇 Hibernate 3 是否不支持 Tomcat 7？

这是供您参考的完整堆栈跟踪：

```
javax.servlet.ServletException: Could not initialize class org.huahsin.util.hibernate.HibernateUtil
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:323)
    org.apache.myfaces.webapp.filter.ExtensionsFilter.doFilter(ExtensionsFilter.java:357)
    org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378)
    org.springframework.security.intercept.web.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    org.springframework.security.intercept.web.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    org.springframework.security.ui.ExceptionTranslationFilter.doFilterHttp(ExceptionTranslationFilter.java:101)
    org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    org.springframework.security.wrapper.SecurityContextHolderAwareRequestFilter.doFilterHttp(SecurityContextHolderAwareRequestFilter.java:91)
    org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    org.springframework.security.ui.webapp.DefaultLoginPageGeneratingFilter.doFilterHttp(DefaultLoginPageGeneratingFilter.java:86)
    org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    org.springframework.security.ui.AbstractProcessingFilter.doFilterHttp(AbstractProcessingFilter.java:277)
    org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    org.springframework.security.ui.preauth.AbstractPreAuthenticatedProcessingFilter.doFilterHttp(AbstractPreAuthenticatedProcessingFilter.java:69)
    org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    org.springframework.security.ui.logout.LogoutFilter.doFilterHttp(LogoutFilter.java:89)
    org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    org.springframework.security.context.HttpSessionContextIntegrationFilter.doFilterHttp(HttpSessionContextIntegrationFilter.java:235)
    org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    org.springframework.security.util.FilterChainProxy.doFilter(FilterChainProxy.java:175)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:236)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    org.huahsin.security.Initializer.doFilter(Initializer.java:65) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:17:57.897

像任何其他基于 Java 的框架一样支持 Hibernate。检查日志是否有其他错误。

有问题的代码也与 Hibernate 有关，但`org.huahsin`可能不是来自 Hibernate 项目的东西。

# objective-c - 更改 shkactionsheet 中单词的字体大小

> ID：13509150
> 
> 赞同：0
> 
> 时间：2012-11-22T09:11:25.837
> 
> 标签：objective-c, ios, xcode, facebook, sharekit

我想更改 shkactionsheet 中显示的单词的字体大小。我不确定如何更改字体大小。

这个词看起来像：

```
+ (SHKActionSheet *)actionSheetForType:(SHKShareType)type
{
    SHKActionSheet *as = [[SHKCONFIG(SHKActionSheetSubclass) alloc] initWithTitle:SHKLocalizedString(@"Share ")
                                                      delegate:nil
                                             cancelButtonTitle:nil
                                        destructiveButtonTitle:nil
                                             otherButtonTitles:nil];
    as.delegate = as;
    as.item = [[[SHKItem alloc] init] autorelease];
    as.item.shareType = type;

    as.sharers = [NSMutableArray arrayWithCapacity:0];
    NSArray *favoriteSharers = [SHK favoriteSharersForType:type];

    // Add buttons for each favorite sharer
    id class;
    for(NSString *sharerId in favoriteSharers)
    {
        class = NSClassFromString(sharerId);
        if ([class canShare])
        {
            [as addButtonWithTitle: [class sharerTitle] ];
            [as.sharers addObject:sharerId];
        }
    }

    if([SHKCONFIG(showActionSheetMoreButton) boolValue])
    {
        // Add More button
        [as addButtonWithTitle:SHKLocalizedString(@"More...")];
    }

    // Add Cancel button
    [as addButtonWithTitle:SHKLocalizedString(@"Cancel")];
    as.cancelButtonIndex = as.numberOfButtons -1;

    return [as autorelease];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T20:56:12.650

SHKActionSheet 是 UIActionSheet 的子类。所以检查 UIActionSheet 的文档。如果我没记错的话，是不可能改变字体的。但是，您可以创建自己的 UIView 并使用您的自定义来模仿 UIActionSheet 界面。

# php - 我如何将此 UTF-8 字符串编码为 ASCII 以将其插入 latin1 数据库？

> ID：13509154
> 
> 赞同：2
> 
> 时间：2012-11-22T09:11:38.533
> 
> 标签：php, mysql, database, utf-8, latin1

我有这个字符串：

> dsfssdsdfdsf « ظ...ط¯ظˆظ†ط© ط£طظ...ط¯ ط§ظ„ط®ظˆط§ط¬ط©</p>

它以 UTF-8 编码，我从远程页面中提取它，我使用 file_get_contents 函数获取它的内容，远程页面编码为 UTF-8，

现在我想将此字符串插入其表编码为 latin1 的数据库中，以将其显示到具有字符集 ISO-8859-1 的 html 页面中，

我多次尝试将其编码从 UTF-8 转换为 ASCII 或 TO ISO-8859-1 以及其他编码（如 Windows-1256），但没有成功，字符串出现奇怪字符，请注意默认字符串包含阿拉伯字符，

编码失败结果示例：

> dsfssdsdfdsf Ã‚Â« Ã〜Â¸Ã¢Â€Â¦Ã〜Â·Ã‚Â¯Ã〜Â¸Ã‹Â†Ã〜Â¸Ã¢Â€Â Ã〜Â·Â© Ã〜 ········································································································································································ Ã,Â®Ã〜Â¸Ã‹Â†Ã〜Â·Ã,Â§Ã〜Â·Ã,Â¬Ã〜Â·Ã,Â©</p>
> 
> dsfssdsdfdsf « ãÏæäÉ ãÍãÏ ÇáÎæÇÌÉ

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T09:16:09.430

如果您有 UTF-8 字符串，请将它们以 UTF-8 或二进制形式存储到数据库中，因此数据库应该有一个不会更改其编码的列。使用 ISO-8859-1 编码会破坏字符串。

在具有 ISO-8859-1 编码的 HTML 页面中，将数据库中的字符串重新编码，然后将支持的字符编码为 ISO-8859-1，对于所有其他字符，使用 HTML 实体。在 PHP 中能够做到的函数是[`mb_convert_encoding`](http://php.net/mb_convert_encoding)：

```
$usascii = mb_convert_encoding($utf8, 'HTML-ENTITIES', 'UTF-8'); 
```

# c++ - 仅给定一次遍历时找到二叉树的其他两次遍历

> ID：13509158
> 
> 赞同：6
> 
> 时间：2012-11-22T09:11:43.210
> 
> 标签：c++, binary-tree, inorder, postorder, preorder

我知道当给定二叉树的中序和前序遍历作为字符串时，您可以重建二叉树，但是仅在给定中序遍历的情况下，是否可以找到后序和/或前序遍历？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T09:32:59.663

不，仅从中序遍历中检索后序/预序是不可能的。如果是这样，则可以仅使用中序遍历来重构二叉树，这是不可能的，因为一次中序遍历可以为您提供几种可能的重构二叉树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:52:05.563

您的输入看起来如何，树的目的是什么？

如果你有一个完全括号内的有序表达式，那么你就有一个唯一的树，你可以通过构造树然后从树中构造前序项和后序项来获得前序和后序项。

如果您的表达式没有完全括起来，那么这表明与您的顺序匹配的不同树之间没有区别。例如，如果它是表示算术表达式的树，则 与and`x+y+z`相同。然而，这意味着，您使用哪个预购或后购都没有关系，而且是相同的。`(x+y)+z``x+(y+z)``++xyz``+x+yz`

现在，如果这无关紧要，您无需担心您的有序的几种可能的表示。只需选择其中一种表示，然后计算这棵树引起的前序和后序。

# python - python中元组的键值对

> ID：13509165
> 
> 赞同：2
> 
> 时间：2012-11-22T09:12:19.860
> 
> 标签：python, django, web.py

如何动态地将元组转换为键值对？

假设我有：

```
tuple = ('name1','value1','name2','value2','name3','value3') 
```

我想把它放进字典：

```
dictionary = { name1 : value1, name2 : value2, name3 : value3 ) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-22T09:15:15.883

将元组转换为键值对并让`dict`构造函数构建字典：

```
it = iter(tuple_)
dictionary = dict(zip(it, it)) 
```

惯用语从原本扁平的可迭代对象中`zip(it, it)`产生成对的项目，提供可以传递给`dict`构造函数的成对序列。itertools 文档中的 grouper [recipe](http://docs.python.org/2/library/itertools.html#recipes)对此进行了概括。

如果输入足够大，请替换`zip`为`itertools.izip`以避免分配临时列表。与基于映射`t[i]`到`[i + 1]`的表达式不同，以上将适用于任何可迭代对象，而不仅仅是序列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T10:24:54.807

```
dictionary = {tuple[i]: tuple[i + 1] for i in range(0, len(tuple), 2)} 
```

另一种简单的方法：

```
dictionary = dict(zip(tuple[::2],tuple[1::2])) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T09:16:47.033

只需做一个简单的循环。

```
my_dic = {}
tuple = ('name1','value1','name2','value2','name3','value3')
if len(tuple) % 2 == 1:
    my_dic[tuple[-1]] = None
for i in range(0, len(tuple) - 1, 2):
    my_dic[tuple[i]] = tuple[i + 1]
print my_dic 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-22T09:17:43.810

```
tuple = ('name1','value1','name2','value2','name3','value3')
d = {}
for i in range(0, len(tuple), 2):
    d[tuple[i]] = tuple[i+1]
print d 
```

# air - 有没有办法从 Flash Builder 4.7 转储 adt 编译命令行

> ID：13509168
> 
> 赞同：1
> 
> 时间：2012-11-22T09:12:28.457
> 
> 标签：air, flash-builder

Flash Builder 4.7 有非常好的 AIR 编译设置对话框。

有没有办法在编译 ipa 文件时转储​​/显示完整的命令行 Flash Builder？

我要求这个的原因是，当为一个拥有大量资产以及几个 ANE 的项目手动编码 adt 编译命令行时，这是非常令人沮丧的。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T05:36:03.920

Flash Builder 使用 Java 触发 adt.jar 文件来编译项目。您必须获取 Java 可执行进程的参数才能找到正在执行的命令。

您可以通过 ProcessExplorer 工具在 Windows 上执行此操作。只需选择 java.exe 进程并检查其属性。在属性选项卡之一中有一个命令行文本字段。

在 OS X 上稍微复杂一些。首先，使用 Activity Monitor 获取 java 可执行文件的进程 ID。启动一个新的终端窗口并输入以下语句

```
ps -p PROCESS_ID | open -tf 
```

将 PROCESS_ID 替换为活动监视器中的实际数字。结果将显示在一个新的 TextEdit 窗口中。

请注意，Java 可执行文件可能有多个实例。只需选择第一个启动的，即所有 java 实例中进程 ID 最低的那个。

# javascript - 从字符串运行 javascript

> ID：13509169
> 
> 赞同：1
> 
> 时间：2012-11-22T09:12:30.050
> 
> 标签：javascript, string

嗨，如果可能的话，我想在**没有 eval**的情况下从字符串/数组运行 javascript 。这有点像我想要的。

```
code = ["document.write('hello')", "function(){}"];
code.run[1]; 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T09:14:39.330

~~从字符串运行 javascript 的唯一方法是使用`eval()`.~~
更正：除了`eval("codeString");`,`new Function("codeString")();`也会执行你的代码。这样做的缺点是，当您调用时，您的代码必须被解释`new Function(...)`，而与浏览器在预定义代码时可能使用的优化相比，如下例所示。
所以，`eval("codeString");`并且`new Function("codeString")();`是可能的，但是是坏主意。

更好的选择是将函数存储在数组中，如下所示：

```
function foo(){
    document.write('hello');
}
function bar(){
    return 1+2;
}

var code = [   foo,
               function(){
                   alert("Hi there!");
               },
               bar
           ];
code[0](); // writes "hello" to the document.
code[1](); // alerts "Hi there!"
code[2](); // returns 3. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T09:23:00.033

您可以将其作为函数执行。

像这样

```
function yourNewEval(){
    var code = ["document.write('hello');", "function(){}"];
    var F = new Function(code[0]);
    return(F());
}
yourNewEval(); 
```

从 Stefan 的答案复制的答案。

[如何执行存储为字符串的 Javascript](https://stackoverflow.com/questions/939326/how-can-i-execute-javascript-stored-as-a-string)中有很多创造性的答案？

# sorting - 对只有最小值的列进行排序

> ID：13509170
> 
> 赞同：3
> 
> 时间：2012-11-22T09:12:34.203
> 
> 标签：sorting, tcl

我有这种文件：

```
abak 1 2 3 4
b.b   2 3 4 5 
abak 2 5 6 2 
b.b  -1.2 3 4 6
cc   3 4 5 6 
```

而且我要

```
abak 1 2 3 4
b.b  -1.2 3 4 6
cc   3 4 5 6 
```

按第 2 列排序的文件，只有该列的最小值

作为第一步，我尝试使用以下命令对行进行排序：

```
set file [open "[lindex $argv 0]" "r"]

    foreach line [split [read $file] "\n"] {
            lappend records [split $line " "]
    }
    set records [lsort -index 1 -real $records]

    foreach record $records {
            puts [join $record " "]
    }
} 
```

但我犯了错误：

```
预期的浮点数，但得到“”
    在执行时
“lsort -index 1 -real $records”

```

第 2 列并非全是浮点数，而是实数；为什么它不能工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:09:58.907

这是一个关于创建和操作数据结构的问题。这就是我的处理方式：

```
set fid [open filename r]
set data [dict create]
while {[gets $fid line] != -1} {
    set fields [regexp -inline -all {\S+} $line]
    dict lappend data [lindex $fields 0] [lrange $fields 1 end]
}
dict for {key values} $data {
    puts [format "%-5s %s" $key [lindex [lsort -real -index 0 $values] 0]]
} 
```

输出

```
abak  1 2 3 4
b.b   -1.2 3 4 6
cc    3 4 5 6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:01:20.797

您的关键问题是这`split`不是提取这些记录的正确方法：它将多空间序列转换为空元素。相反，你想使用这个：

```
lappend records [regexp -all -inline {\S+} $line] 
```

这会将行转换为其非空间序列列表。（是的，当您重新转换时会丢失空格；这通常不是什么大问题，但如果需要，您可以处理它。）您的其余代码看起来足够好。

# asp.net-mvc - 浏览器中的 asp.net mvc 日期时间格式

> ID：13509173
> 
> 赞同：0
> 
> 时间：2012-11-22T09:12:38.773
> 
> 标签：asp.net-mvc, jquery-ui, datepicker

我有一个 jQuery 日期时间选择器。

这是模型的属性：

```
[DataType(DataType.Date)]
[DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}", ApplyFormatInEditMode = true)]
[DisplayName("Birth date (DD/MM/YYYY)")]
public DateTime? BirthDate { get; set; } 
```

视图中的代码：

```
@Html.TextBoxFor(m => m.Employee.BirthDate, new { @class = "dpTextBox" }) 
```

一些JavaScript：

```
$(".dpTextBox").datepicker({
                changeMonth: true,
                changeYear: true,
                dateFormat: 'dd/mm/yy'
            });
$.datepicker.setDefaults($.datepicker.regional['nl']); 
```

在 Internet Explorer 中，它运行良好。在 Chrome 中它没有。验证错误是“字段出生日期 (DD/MM/YYYY) 必须是日期。” Chrome 的语言是英语。当我将语言更改为荷兰语时，它可以正常工作，但我想要英文版 Chrome 的 UI...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:17:03.967

```
@{Html.Telerik().DatePickerFor(model => model.BlogDate)
                    .Name("BlogDate")
                    .HtmlAttributes(new { id = "DatePicker_wrapper" })
                    .OpenOnFocus(true)
                    .Render();              
            } 
```

使用 Telerik 日期选择器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:41:41.517

当我删除以下代码时，它工作正常......

@Scripts.Render("~/bundles/jqueryval")

它与这个库有关

# mongodb - 如何在客户端等待，直到服务器端的 mongo 连接准备好？

> ID：13509175
> 
> 赞同：9
> 
> 时间：2012-11-22T09:12:41.453
> 
> 标签：mongodb, meteor

我的流星服务器和远程 mongodb 实例之间的连接速度很慢。我可以以某种方式在客户端等待而不注册订阅，直到服务器未建立与 mongo 的连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:17:31.843

一种原始的方法是使用 Meteor.autorun 监听 Meteor.userId() 的变化。如果你能得到这个，你就会知道你已经连接到 MongoDB。如果您不处理身份验证，那么您可以在服务器端创建一个从 MongoDB 返回某些内容的方法。当它返回某些内容时，在客户端成功时，您可以启动所有订阅。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T11:09:57.490

最可靠的方法是通过 Meteor.call 调用。如果您将其作为同步调用（无回调）执行，客户端将等待调用完成。以下是异步执行此操作的方法：

```
 Meteor.call('isEverythingReady', param1,
    function(error, result) {
      if (error === undefined) {
        Meteor.subscribe("mystuff");
        Session.set("sess1", "whatever");
      } else {
        alert("There was an error during startup.");
      }
    }); 
```

进而

```
if (Meteor.isServer) {
  Meteor.methods( {
    isEverythingReady: function(param1) {
      // can you connect to database?
      return true;
    }
  }
} 
```

# python - 在 addWidget() 问题之后的 setGeometry()

> ID：13509183
> 
> 赞同：2
> 
> 时间：2012-11-22T09:12:54.313
> 
> 标签：python, qt, python-2.7, pyqt, pyqt4

在将子 QWidget 添加到父 QWidget 后，我​​在设置子 QWidget 的尺寸时遇到了麻烦。问题是它根本没有设置几何：

```
from PyQt4 import QtCore, QtGui

class MyWidget(QtGui.QWidget):

    def __init__(self):

        super(MyWidget, self).__init__()

        self.initUI()

    def initUI(self):

        # setting up parent QWidget
        self.setMinimumSize(256, 256)
        self.setMaximumSize(256, 256)
        self.GL = QtGui.QGridLayout(self)
        self.GL.setMargin(0)

        # setting up child QWidget
        self.GL.myWidget2 = QtGui.QFrame()
        self.GL.myWidget2.setMinimumSize(128, 128)
        self.GL.myWidget2.setMaximumSize(128, 128)
        self.GL.myWidget2.setStyleSheet("background: orange")

        # attaching child to parent
        self.GL.addWidget(self.GL.myWidget2)

        # trying to reposition child in parent's local space
        self.GL.myWidget2.setGeometry(QtCore.QRect(0, 128, self.width(), self.height()))

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    widget = MyWidget()
    widget.show()
    app.exec_() 
```

添加一个在短暂延迟后设置几何形状的计时器确实有效......（替换`self.GL.myWidget2.setGeometry([...])`为）：

```
 timer = QtCore.QTimer()
        timer.singleShot(10, self.updatePosition)

    def updatePosition(self):

        self.GL.myWidget2.setGeometry(QtCore.QRect(0, 128, self.width(), self.height())) 
```

...所以我怀疑 addWidget(...) 方法正在执行回调，例如在主线程已经通过该`self.GL.myWidget2.setGeometry([...])`行时将小部件重绘到其默认位置。

不过，这纯粹是推测性的，任何关于如何`addWidget()`影响后续编码器或执行时间的内部信息都将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T04:01:16.037

如果您想手动定位小部件，则不需要布局：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4.QtCore import *
from PyQt4.QtGui import *

class orange(QWidget):
    def __init__(self, parent=None):
        super(orange, self).__init__(parent)

        self.setMinimumSize(256, 256)
        self.setMaximumSize(256, 256)

        self.frame = QFrame(self)
        self.frame.setMinimumSize(128, 128)
        self.frame.setMaximumSize(128, 128)
        self.frame.setGeometry(QRect(0, 128, self.width(), self.height()))
        self.frame.setStyleSheet("background: orange")

if __name__ == "__main__":
    import  sys

    app = QApplication(sys.argv)
    main = orange()
    main.show()
    sys.exit(app.exec_()) 
```

# php - PHP 评估的条件

> ID：13509185
> 
> 赞同：1
> 
> 时间：2012-11-22T09:13:02.170
> 
> 标签：php, operators, boolean-logic

我有以下代码

> $cond = '0'; if($cond) 回显 $cond;
> 
> $cond = '0'; if($cond) 回显 $cond;
> 
> $cond = '0 和 0'; if($cond) 回显 $cond;

第一个只做预期的事情，其余的不做。这些如何执行相同的行为，特别是我如何评估第三种情况下的条件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:14:33.820

尝试

```
if (intval($cond)) echo $cond; 
```

但是你为什么要这样做呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:18:14.180

只需使用 strpos 在 $cond 中搜索 0

```
$cond = '0 AND 0';
$search = '0';

if (strpos($cond, $search) !== false) echo $cond; 
```

[http://php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T09:27:53.207

首先，我将解释发生了什么。在每种情况下，您都在测试一个字符串，而不是一个布尔表达式。非空字符串的计算结果始终为，`true`除非它可以转换为另一种类型。

*   `'0'`将被转换为整数`0`等`false`
*   `'0 '`将保留为字符串，因为空间明确表示它是一个字符串，所以是`true`
*   `'0 AND 0'`显然是一个字符串，`true`也是

我不知道您到底想要实现什么，以及是否需要处理其他情况，但您似乎需要的是[eval() 函数](http://www.php.net/manual/en/function.eval.php)。如文档中所述，它的使用**非常危险**，因此请确保`$cond`尽可能避免使用它。

```
$cond = '0 AND 0';
if(eval('return '.$cond.';'))
    echo $cond; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T09:16:27.397

尝试第二个

```
 if ((trim($cond)){
   echo $cond;
    } 
```

# php - 如何将 csv 内容保存/下载到 Excel

> ID：13509187
> 
> 赞同：2
> 
> 时间：2012-11-22T09:13:03.930
> 
> 标签：php, logic, export-to-csv

我有一个 API，它返回 csv 内容作为响应，我想以 Excel 格式下载，我尝试了什么：

**HTML：**

```
<form id="test_form" accept-charset="utf-8" method="POST" action="http://prime.dev/index.php//data/reporting/downloadCSVFile.json"></form>

<a id="downloadcsv" class="min-button-silver">Download to Excel</a> 
```

**JS：**

```
jQuery("#downloadcsv").click(function(e){                       jQuery('#test_form').submit();                  
}); 
```

**PHP**

```
public function downloadCSVFile()
{
    $data = $this->reporting_service->fetchCSV($request); //API request
    header("Content-Type: application/csv");        
    header("Content-Disposition: attachment; filename=test.csv");
    //header("Content-Length: ".$thesize);
    header("Pragma: no-cache");
    header("Expires: 0");
    //Will get the response from API like the below;    
    $data = 'clicks|conversions|ctr|cvr|impressions|invalid_clicks|currency.id
    4220894|127984|.1962348497109191647|.0059484688672145487|2150940063|557193|163';

    echo $data;
} 
```

文件下载为 test.csv，但在记事本中打开，你们中的任何人都可以告诉我，这里出了什么问题。

提前致谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:18:35.753

如果你想下载 Excel，你需要额外的软件，比如 PEAR_Spreadsheet_Excel，因为你必须生成额外的标题和许多其他废话！但通常如果您创建一个正确的 CSV 文件，您也可以使用 Excel 打开它，它会显示所有列，就像在普通的 excel 文件中一样。

# php - 我们可以使用 Flex 合并 2 个视频吗？

> ID：13509190
> 
> 赞同：1
> 
> 时间：2012-11-22T09:13:07.900
> 
> 标签：php, apache-flex, flex4, red5, wowza

我在 php 中有视频采访 Web 应用程序。视频聊天和录音保存到 wowza 服务器。现在我想使用 flex 在 wowza 中合并 2 个视频，我们可以在 flex 中这样做吗？如果可以的话请给个教程或者链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:33:51.333

您可以通过 ffmpeg 轻松完成此操作。[在这里](http://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20concatenate%20%28join,%20merge%29%20media%20files)阅读更多。

关于类似主题的SO帖子：

*   [结合来自ffmpeg的两个视频](https://stackoverflow.com/questions/7567713/combining-two-video-from-ffmpeg)
*   [https://superuser.com/questions/556308/ffmpeg-concatenate-videos-have-multiple-audio-stream](https://superuser.com/questions/556308/ffmpeg-concatenate-videos-have-multiple-audio-stream)

# wicket - Wicket 错误路径：'label1' 页面不存在：BarPage

> ID：13509192
> 
> 赞同：0
> 
> 时间：2012-11-22T09:13:41.157
> 
> 标签：wicket

我想`label1`在某些应用程序中声明一些标签。我编写了以下junit测试用例：

```
wicketTester.assertLabel("label1", "Hello!"); 
```

添加标签的页面如下所示：

FooPage.java

```
public class FooPage extends WebPage {

    public FooPage() {
        add(new Label("label1", "Hello!"));
    }
} 
```

对应的html页面如下所示：FooPage.html

```
<body>
..
...

<div wicket:id="label1"></div>
..
<body> 
```

`label1`当有人点击链接时，我想断言的标签会显示

```
<a wicket:id="fooId" href="FooPage">Foo</a> 
```

在以下页面中：

```
<html xmlns:wicket="http://wicket.apache.org/">
<body>
    <wicket:panel>

            <div class="xxx">
                <a wicket:id="fooId"
                    href="FooPage">Foo</a>
            </div>
    </wicket:panel>
</body>
</html> 
```

当我运行 junit 测试时，我收到以下错误：

```
path: 'label1' does not exist for page: BarPage 
```

我的问题是：如何为标签找到正确的路径`label1`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:26:05.267

您是否在测试中单击了链接“fooId”（使用 wicketTester.clickLink）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T12:50:47.587

你可以像这样找到你的组件路径

修改**WicketApplication**类

在检票口 7

```
getDebugSettings().setComponentPathAttributeName("component_path"); 
```

在 Wicket 6 或以上

```
getDebugSettings().setOutputComponentPath(true); 
```

**使用示例：**

```
@Override
public RuntimeConfigurationType getConfigurationType() {
    if (Boolean.valueOf(getProperty("development.mode"))) {
        //show component path in html tag
        getDebugSettings().setComponentPathAttributeName("component_path");
        return RuntimeConfigurationType.DEVELOPMENT;
    }       
    return RuntimeConfigurationType.DEPLOYMENT;
} 
```

如果您在 Web 浏览器中检查您的组件，您会发现类似以下内容：

```
<input type="text" value="" component_path="pageContent_form_username" name="username" id="username3" > 
```

请不要忘记用 (:) 冒号更改所有下划线，如下所示：

pageContent_form_username -> pageContent:form:username

# java - 在不知道远程主机地址的情况下远程执行参与者

> ID：13509198
> 
> 赞同：2
> 
> 时间：2012-11-22T09:13:53.627
> 
> 标签：java, akka

我想构建一个在静态 IP 地址和端口上具有公共服务器的参与者系统。会有很多客户端知道服务器的地址。服务器不知道客户端的 IP 地址。

服务器的配置：

```
akka {
  actor {
    provider = "akka.remote.RemoteActorRefProvider"
  }
  remote {
    transport = "akka.remote.netty.NettyRemoteTransport"
    netty {
      hostname = "46.38.232.161"
      port = 2552
    }
  }
} 
```

客户端配置：

```
akka {
  actor {
    provider = "akka.remote.RemoteActorRefProvider"
  }
  remote {
    transport = "akka.remote.netty.NettyRemoteTransport"
    netty {
      port = 2553
    }
  }
} 
```

一个客户可能来自整个互联网。现在我想从客户端上的演员向服务器上的演员发送消息。服务器如何知道，在哪里发回他的消息？当我向`ActorPath`服务器发送 s 时，他会知道相应的客户端地址，这些不包含客户端的 IP 地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:04:22.887

`Actor`有一个方法被调用`sender`，可以在actor的`receive`方法中调用来获取对`ActorRef`发送当前消息的actor()的引用。有`ActorRef`一个`ActorPath`which 有一个`RootActorPath`which 有一个which 包含actor 所在`Address`的主机和端口。`ActorSystem`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T19:39:14.557

`akka.remote.netty.hostname`属性可以在您的`application.conf`, 中设置为可访问的 IP 地址或可解析的名称，以防您想通过网络进行通信。实际上，当使用 Akka 时，您的“客户端”节点也将是服务器。

如果在应用程序启动时地址未知，请考虑 Akka 文档中的以下代码片段：

```
import akka.actor.ActorSystem
import com.typesafe.config.ConfigFactory

val customConf = ConfigFactory.parseString("""
  akka.actor.deployment {
    /my-service {
      router = round-robin
      nr-of-instances = 3
    }
  }
""")

// ConfigFactory.load sandwiches customConfig between default reference
// config and default overrides, and then resolves it.
val system = ActorSystem("MySystem", ConfigFactory.load(customConf)) 
```

# php - 拉取或自动填充表单输入字段

> ID：13509202
> 
> 赞同：0
> 
> 时间：2012-11-22T09:14:09.257
> 
> 标签：php

好的，我正在尝试查找这是否可能，我有一个包含两个登录表单的页面。但使用相同的用户名和密码。是否有可能，而一旦我登录到一个表单，我的用户名是从已经有我的用户名的表单中提取的，并且密码是从数据库中提取的？

```
<form action="home.php" method="post" id="LoginForm" style="color:#FFF">
<input type="hidden" name="SessionID" value="new"></input>
Username:
<input type="text" name="AccountNo" value="" class="input" size="28"></input>
<BR /><BR />
&nbsp;&nbsp;Password:
<input type="password" name="Password" value="" class="input" size="30"></input>
<BR />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="image" src="images/input-img.gif" value="Log On" class="input-img"></input>
<BR /><br />
<a href="#" class="link" style="font-size:12px;">Register now!</a>   <a href="#" style="font-size:12px;">Forgotten your password?</a>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:16:24.117

如果你的问题是它是否可能，那么答案是肯定的，它是可能的。

提交表单后，您可以使用 JavaScript 从第一个表单中读取用户名并将其填充到第二个表单中。要获取密码，您可以使用 AJAX。

# python - python 中的 MS Word r/w、Python-docx 问题和 win32com 参考？

> ID：13509207
> 
> 赞同：4
> 
> 时间：2012-11-22T09:14:30.320
> 
> 标签：python, ms-word, win32com

最近我正在尝试使用不同的 API 进行 MS Word 文件管理（现在正在编写）。此时我只需要一个简单的编写python API。我尝试了 win32com 模块，该模块被证明非常强大，但缺乏在线 python 示例（对 VB 和 C 的了解很少，无法翻译 MSDN 中的示例）。

我尝试使用 python-docx，但安装后我得到了任何 docx 函数的回溯。

```
Traceback (most recent call last):
  File "C:\filepath.py", line 9, in <module>
    ispit = newdocument()
NameError: name 'newdocument' is not defined 
```

我在通过源代码和 easy_install 安装 lxml 时遇到了一些问题。它正在检查 libxlm2 和 libxslt 二进制文件。我下载了它们并添加了环境路径，但安装槽源或 easy_install 每次都停止。

[最后我使用了来自这个站点Link](http://www.lfd.uci.edu/~gohlke/pythonlibs/)的非官方 python 扩展包。安装很快，最后没有错误。

我可以做些什么来使 docx 工作，并且在线是否有一些与 python win32com 相关的参考资料？我找不到任何东西。（除了[MSDN](http://msdn.microsoft.com/en-us/)（VB 不是 python）和[O'Reily 在 win32 上的 Python 编程](http://shop.oreilly.com/product/9781565926219.do)）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T09:40:12.020

使用 时`win32com`，请记住您正在与 Word 对象模型对话。您无需了解很多 VBA 或其他语言即可将示例应用到使用 Python；你只需要弄清楚对象模型的哪些部分正在被使用。

让我们采用以下示例（在 VBA 中），它将创建 的新实例`Application`，并将新文档加载到该新实例中：

```
Public Sub NewWordApp()

    'Create variables to reference objects
    '(This line is not needed in Python; you don't need to declare variables 
    'or their types before using them)
    Dim wordApp As Word.Application, wordDoc As Word.Document

    'Create a new instance of a Word Application object
    '(Another difference - in VBA you use Set for objects and simple assignment for 
    'primitive values. In Python, you use simple assignment for objects as well.)
    Set wordApp = New Word.Application

    'Show the application
    wordApp.Visible = True

    'Create a new document in the application
    Set wordDoc = wordApp.Documents.Add()

    'Set the text of the first paragraph
    '(A Paragraph object doesn't have a Text property. Instead, it has a Range property
    'which refers to a Range object, which does have a Text property.)
    wordDoc.Paragraphs(1).Range.Text = "Hello, World!"

End Sub 
```

Python 中类似的代码片段可能如下所示：

```
import win32com.client

#Create an instance of Word.Application
wordApp = win32com.client.Dispatch('Word.Application')

#Show the application
wordApp.Visible = True

#Create a new document in the application
wordDoc = wordApp.Documents.Add()

#Set the text of the first paragraph
wordDoc.Paragraphs(1).Range.Text = "Hello, World!" 
```

Word 对象模型的一些链接：

*   [应用](http://msdn.microsoft.com/en-us/library/ff838565%28v=office.14%29.aspx)对象
*   [文件](http://msdn.microsoft.com/en-us/library/ff840891%28v=office.14%29.aspx)收集
*   [文档](http://msdn.microsoft.com/en-us/library/ff822963%28v=office.14%29.aspx)对象
*   [段落](http://msdn.microsoft.com/en-us/library/ff837506%28v=office.14%29.aspx)集合
*   [段落](http://msdn.microsoft.com/en-us/library/ff845307%28v=office.14%29.aspx)对象
*   [范围](http://msdn.microsoft.com/en-us/library/ff845882%28v=office.14%29.aspx)对象
*   [概念](http://msdn.microsoft.com/en-us/library/ff192359%28v=office.14%29.aspx)

一些 Python 示例：

*   [Python 和 Microsoft Office – 使用 PyWin32](http://www.blog.pythonlibrary.org/2010/07/16/python-and-microsoft-office-using-pywin32/)
*   [使用 Python 使用 PyWin32 库解析 Microsoft Word 文档](http://www.galalaly.me/index.php/2011/09/use-python-to-parse-microsoft-word-documents-using-pywin32-library/)

# php - Magento 编程和课堂利用

> ID：13509210
> 
> 赞同：4
> 
> 时间：2012-11-22T09:14:33.610
> 
> 标签：php, class, magento

在这个大学假期期间，我承担了学习 Magento 的项目，虽然我已经弄清楚了如何轻松创建主题，但我在使用 Magento 的班级结构时遇到了麻烦。

对于我想做的事情，我想计算一个月至今的销售数字。在仪表板上，我希望找到`$this->getTotals()`创建的位置，以便我可以将此图添加到数组中。

作为一个起点，是否可以再将我引导至创建此`Mage`文件的文件，或者甚至可能是解释 Magento 编程结构的资源，该结构既不是那么基本以至于让人麻木，也不是那么先进以至于不可能？（这些天似乎是一项艰巨的任务，除非你知道在哪里看）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:27:12.417

Magento（特别是块和模型）在 PHP 中大量使用重载，因此`grep`通常会产生令人分心的结果或根本没有；参考。[`Varien_Object::__call()`[链接]](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/lib/Varien/Object.php#L622)。

Magento 的视图是从一个对象实例呈现的 - 块类，它们往往驻留在模块目录中的*块文件夹中，例如**app/code/core/Mage/Adminhtml/Block/* - 和（可选）模板，可以在*app/design下找到/{area}/{package}/{theme}/template/*。

在调试视图时，`get_class($this)`在模板文件中使用调用通常会揭示所涉及的类。当然，这意味着您需要找到模板。在前端，您可以使用[模板路径提示](http://www.redlightblinking.com/blog/magento-tutorials/magento-debugging-how-to-debug-template-paths-logging-and-display-errors)- 并且可以在管理员中通过几行 XML 使用这些提示 - 但我会推荐[Fabrizio Branca](https://stackoverflow.com/users/674636/fbrnc)的[高级模板提示](http://www.fabrizio-branca.de/magento-advanced-template-hints.html)，因为它易于使用并且能够包装非模板块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:04:01.897

Magentos 的结构非常混乱，我会通读[此文档](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-1-introduction-to-magento/)，因为它确实有助于了解所有内容的位置。

现在至于找到具体的方法，我发现最好的方法是使用[grep。](http://unixhelp.ed.ac.uk/CGI/man-cgi?grep)

在您要查找的示例中`getTotals`，我运行以下 grep：

`grep -RTi 'function getTotals(' ./app/`

它返回：

```
./app/code/core/Mage/Sales/Block/Order/Totals.php      :    public function getTotals($area=null)
./app/code/core/Mage/Sales/Model/Quote.php     :    public function getTotals()
./app/code/core/Mage/Sales/Model/Resource/Sale/Collection.php  :    public function getTotals()
./app/code/core/Mage/Sales/Model/Entity/Sale/Collection.php    :    public function getTotals()
./app/code/core/Mage/Sales/Model/Quote/Address.php     :    public function getTotals()
./app/code/core/Mage/Checkout/Block/Onepage/Review/Info.php    :    public function getTotals()
./app/code/core/Mage/Checkout/Block/Cart/Abstract.php  :    public function getTotals()
./app/code/core/Mage/Checkout/Block/Cart/Totals.php    :    public function getTotals()
./app/code/core/Mage/Paypal/Block/Express/Review/Details.php   :    public function getTotals()
./app/code/core/Mage/Paypal/Model/Cart.php     :    public function getTotals($mergeDiscount = false)
./app/code/core/Mage/Adminhtml/Block/Sales/Order/Create/Totals.php     :    public function getTotals()
./app/code/core/Mage/Adminhtml/Block/Sales/Order/Totalbar.php  :    protected function getTotals()
./app/code/core/Mage/Adminhtml/Block/Customer/Edit/Tab/View/Sales.php  :    public function getTotals()
./app/code/core/Mage/Adminhtml/Block/Widget/Grid.php   :    public function getTotals()
./app/code/core/Mage/Adminhtml/Block/Dashboard/Bar.php :    protected function getTotals() 
```

哦，天哪，这似乎是一个流行的方法名称，但至少现在我们可以缩小需要哪个方法的范围。所以我猜它会在销售部分，因为你似乎在谈论销售，所以我们最终得到了一个更易于管理的列表。

```
./app/code/core/Mage/Sales/Block/Order/Totals.php      :    public function getTotals($area=null)
./app/code/core/Mage/Sales/Model/Quote.php     :    public function getTotals()
./app/code/core/Mage/Sales/Model/Resource/Sale/Collection.php  :    public function getTotals()
./app/code/core/Mage/Sales/Model/Entity/Sale/Collection.php    :    public function getTotals()
./app/code/core/Mage/Sales/Model/Quote/Address.php     :    public function getTotals() 
```

狩猎愉快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T13:33:47.417

如果您正在查看 .phtml 文件，首先要做的是意识到每个 .phtml 文件都在某个 Block 类的某个实例的上下文中工作。因此，首先通过查看注释或打印/回显/var_dumping/etc 返回的值来找出您所在的块类`get_class($this)`。

然后你可以为块的类声明grep app/code 目录，即`grep -irn 'class Mage_Catalog_Block_Product_List_Toolbar' app/code/core`

请注意，无论您是否使用 *nix，如果您使用的是 IDE，您可能只是告诉您的 IDE 将您传送到类文件/声明，方法是站在 PHP 文档注释（例如核心中的注释） .phtml 文件，即`@see Mage_Catalog_Block_Product_List_Toolbar`按下任何快捷方式在您的 IDE 上触发该功能。

顺便说一句，关于**getter**方法的说明：

几乎所有 Magento 类都继承自**Varien_Object**类，该类实现了**__call()** ——如果你记得，它是在对对象调用不可访问的方法时触发的——所以当你调用`$this->getBananas()`一个对象时，Magento 赢了t 抛出一个致命错误，而是检查`$data`对象的内部数组是否包含键“bananas”，并返回其值，如果不存在则返回 NULL。

这意味着有时你会看到一个类似的调用`$this->getSomething()`，然后你会用 grep 查找代码`function getSomething()`，但你不会找到它，因为它没有在任何地方声明，它只是使用魔法 getter 行为的模板**Varien_Object**的。

尽管如此，获取 Magento 源代码**还是**非常有用的。另外，如果您 grep 一个 getter 函数**但没有**找到它的声明，那么您知道代码只是在访问一个数据属性，这也是非常有用的信息。

# java - 添加或请求用户将电子邮件 ID 添加到联系人列表。这可以自动使用 javamail 吗？

> ID：13509212
> 
> 赞同：0
> 
> 时间：2012-11-22T09:14:35.200
> 
> 标签：java, jakarta-mail

我编写了一个 java 程序来通过 SMTP 发送电子邮件。我想知道如何要求用户自动/手动将我的电子邮件 ID 添加到他的客户端的地址簿/联系人列表中。有没有办法让我从我的 java 代码中做到这一点。我想要这个功能，因为我的电子邮件不会被列为垃圾邮件/垃圾邮件。我正在使用 javamail API。

谢谢你，纳加拉詹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:18:51.463

不可能！！您不能那样做，电子邮件将只是邮件。列出您的电子邮件 ID 和其他事情（垃圾邮件，垃圾邮件）只能由接收者完成。接收者必须配置。

# ios - iOS 获取特定的 UITableViewCell

> ID：13509216
> 
> 赞同：1
> 
> 时间：2012-11-22T09:14:46.707
> 
> 标签：ios, uitableview

我有`UIButton`一个习惯`UITableViewCell`。此按钮在单击时触发事件。

```
[myButton addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside]; 
```

单击按钮时调用的方法是：

```
 - (void) buttonClicked:(id)sender
{

UIButton *b = (UIButton*)sender;

.....

} 
```

我的问题是，如何获取放置按钮的单元格的实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:20:58.747

```
 UITableViewCell *cell = (UITableViewCell*)[[b superview] superview]; 
```

如果您将单元格上的按钮添加为子视图，则按钮的超级视图将是 contentView，而 contentView 的超级视图将是 UITableViewCell

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:16:25.473

```
- (void) buttonClicked:(id)sender
{

  UIButton *b = (UIButton*)sender;    
  UITableViewCell *tableViewCell =(UITableViewCell*) [b superview];  

 //if you added the UIButton as a subview of UITableViewCell contendView, use this
  UITableViewCell *tableViewCell =(UITableViewCell*) [[b superview] superview]; 

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:18:36.423

当您在表格视图单元格中添加按钮时，您可以将标签设置为按钮。如果您使用能够查看单元格的相同 indexPath 会更好。然后从 [sender tag] 你可以得到 indexPath 值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T09:39:20.453

我建议您不要只是将按钮放入 UITableViewCell。您最好将 UITableViewCell 子类化并制作 UITableViewButtonCell ，它将像这样调用委托回调：`- (void) tableViewButtonCellDidButtonTap:(UITableViewCell*) buttonCell` 这将是更可靠的解决方案。

只有当您的按钮直接插入可能不是案例的 UITableviewCell 中时，案例 才会起作用。`UIButton *b = (UIButton*)sender;
UITableViewCell *tableViewCell =(UITableViewCell*) [b superview];`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T03:31:54.943

正如您正确地说的那样，按钮在单元格“中” - 从某种意义上说，它是某个单元格的某个深度的子视图。因此，只需沿着视图层次结构向上走，直到到达单元格：

```
- (void) buttonClicked:(id)sender {
    UIView* v = sender;
    while (![v isKindOfClass:[UITableViewCell class]])
        v = v.superview;
    // now v is the cell
} 
```

# .net - 如何为 .Net 应用程序提供更多内存？

> ID：13509221
> 
> 赞同：0
> 
> 时间：2012-11-22T09:14:58.190
> 
> 标签：.net, memory, out-of-memory

我必须处理一个巨大的数据结构并且`System.OutOfMemoryException`非常快。

在 Java 中，我可以轻松调整允许我的应用程序消耗多少内存并将其设置为高达 2 GiB。在 .Net 中也可以吗？

我的开发人员有 4 GiB 的 RAM 和 32 位 Windows。机器（并且愿意将至少 2 GiB 专用于应用程序）和 16 GiB 的 RAM 和服务器上的 64 位 Windows（并且愿意将多达 10 GiB 专用于应用程序）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:23:12.683

首先，当您在 32 位上构建应用程序时，您将使用 2GB 的虚拟内存。

没有办法避免这种情况。

你在64位机器上有同样的问题吗？你在那里运行 32 位版本吗？AnyCPU（默认为 32 位）。尝试创建一个 64 位应用程序并在那里运行它。

# javascript - 为什么继承的数组是共享的而不是普通变量？

> ID：13509222
> 
> 赞同：0
> 
> 时间：2012-11-22T09:14:59.333
> 
> 标签：javascript, arrays, inheritance, member

`foo1`并`foo2`从人那里继承。为什么是`foo1.a`一样的`foo2.a`？

```
 var foo1, foo2;

    var person = function(a) {
        this.a = []
        this.b = 1;
        console.log('construct 1');
    }

    var kevin = function(a, b) {
        console.log('construct 2');
    }

    kevin.prototype = new person();

    foo1 = new kevin();
    foo2 = new kevin();

    foo1.a[3] = true;
    foo1.a[1] = true;
    foo2.a[1] = false;
    foo1.b = 2;
    foo2.b = 3;
    console.log(foo1.a);
    console.log(foo1.b);
    console.log(foo2.a);
    console.log(foo2.b); 
```

为什么是`foo*.a`共享的？为什么不`foo*.b`共享？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:18:41.447

尝试：

```
function kevin( a, b ){
    Person.call( this, a );
    this.b = b;
    //do extra kevin stuff here...

} 
```

您需要调用超级构造函数。也许[这篇文章](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Inheritance_Revisited)也会给你一些如何实现继承的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:26:34.980

对象（包括数组）存储为引用。基元（包括数字）存储为值。

`new person()`创建一个新人，并引用一个空数组。您将此对象（不是类，对象！）分配为`kevin`.

`foo1.a`不存在，所以`a`查找原型链，在这里我们找到了之前找到的空数组。当我们修改这个数组的内容时，我们仍然有 undefined `foo1.a`。您更改了数组内容，但没有更改引用的值（不是在原型上，当然也不是在 上`foo1`）。

`foo2.a`也不存在，因此`a`再次在原型上查找 - 找到与之前完全相同的数组（现在包含我们通过 访问它时的一些更改`foo1`）。

相反，`foo1.b = ...`将在 上定义一个新值`foo1`。下一次查找`b`不会沿着原型链向上传播。除此之外，数字无法更改，只能被覆盖，因此您无法进入内容更改而身份不变的情况，例如对象。

所以 - 你在这里有两种不同的现象，它们都是你所询问的那种行为的常见嫌疑人。在这里，具体来说，原型继承是罪魁祸首，但这只发生在 JavaScript 和类似的语言中（其中并不多）。在大多数其他情况下，类似的问题是由参考/值的区别引起的。

# c++ - 面部未正确绘制

> ID：13509223
> 
> 赞同：2
> 
> 时间：2012-11-22T09:15:00.360
> 
> 标签：c++, opengl, glut

**更新**

看起来我的法线工作正常，这与我画脸的方式有关（只画了一半），我不知道为什么——

![顶点，法线被正确绘制](../Images/d782adeddb43e74fb96048ff5b6539c6.png)

如果您可以查看我之前的代码（如下所示）

* * *

*原帖*

我目前正在为 .obj 文件类型开发解析器/渲染器。我遇到了显示法线向量的问题：

没有法线：

![](../Images/17da753656d1ca4bdccb31f018c0651a.png)

使用法线：

![](../Images/6296528cb0973a2c68850888d7fc2c7c.png)

出于某种原因，我无法弄清楚为什么只有一半的法线向量有效果，而另一半则表现得好像根本没有一张脸。

这是我在 obj 文件中加载的代码：

```
 void ObjModel::Load(string filename){
    ifstream file(filename.c_str());

    if(!file) return;

    stringstream ss;
    string param, line;
    float nparam, cur;

    vector<vector<float> > coords;
    vector<float> point;

    while(getline(file, line)){ 
        ss.clear();
        ss.str(line);

        ss >> param;

        //vertex
        if(param == "v"){
            for(int i = 0; i < 3; i++){
                ss >> nparam;
                this->vertices.push_back(nparam);
            }
        }

        //face
        else if(param == "f"){
            coords.clear();
            point.clear();

            for(int i = 0; i < 3; i++){
                ss >> nparam;
                nparam--;

                for(int j = 0; j < 3; j++){
                    cur = this->vertices[nparam * 3 + j];

                    this->faces.push_back(cur);
                    point.push_back(cur);
                }

                coords.push_back(point);
            }

            point = this->ComputeNormal(coords[0], coords[1], coords[2]);

            for(int i = 0; i < 3; i++) this->normals.push_back(point[i]);
        }

        else continue;
    }
}
void ObjModel::Render(){
    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_NORMAL_ARRAY);

    glVertexPointer(3, GL_FLOAT, 0, &this->faces[0]);
    glNormalPointer(GL_FLOAT, 0, &this->normals[0]);

    glDrawArrays(GL_TRIANGLES, 0, this->faces.size() / 3);

    glDisableClientState(GL_NORMAL_ARRAY);
    glDisableClientState(GL_VERTEX_ARRAY);
} 
```

这是计算法线向量的函数：

```
vector<float> ObjModel::ComputeNormal(vector<float> v1, vector<float> v2, vector<float> v3){
vector<float> vA, vB, vX;
float mag;

vA.push_back(v1[0] - v2[0]);
vA.push_back(v1[1] - v2[1]);
vA.push_back(v1[2] - v2[2]);

vB.push_back(v1[0] - v3[0]);
vB.push_back(v1[1] - v3[1]);
vB.push_back(v1[2] - v3[2]);

vX.push_back(vA[1] * vB[2] - vA[2] * vB[1]);
vX.push_back(vA[2] * vB[0] - vA[0] * vB[2]);
vX.push_back(vA[0] * vB[1] - vA[1] * vB[0]);

mag = sqrt(vX[0] * vX[0] + vX[1] * vX[1] + vX[2] * vX[2]);

for(int i = 0; i < 3; i++) vX[i] /= mag;

return vX;} 
```

我已经检查过以确保有相同数量的法线向量和面（如果我是对的，应该有）。

先感谢您！:)

**编辑**这是我启用/禁用 OpenGL 功能的方式：

```
glEnable(GL_DEPTH_TEST);
glDepthFunc(GL_LESS);
glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST);
GLfloat amb_light[] =  0.1, 0.1, 0.1, 1.0 ;
GLfloat diffuse[] = {0.6, 0.6, 0.6, 1};
GLfloat specular[] = {0.7, 0.7, 0.3, 1};
glLightModelfv(GL_LIGHT_MODEL_AMBIENT, amb_light);
glLightfv(GL_LIGHT0, GL_DIFFUSE, diffuse);
glLightfv(GL_LIGHT0, GL_SPECULAR, specular);
glEnable(GL_LIGHT0);
glEnable(GL_COLOR_MATERIAL);
glShadeModel(GL_SMOOTH);
glLightModeli(L_LIGHT_MODEL_TWO_SIDE, GL_FALSE);
glDepthFunc(GL_LEQUAL);
glEnable(GL_DEPTH_TEST);
glEnable(GL_LIGHTING);
glEnable(GL_LIGHT0);
glDisable(GL_CULL_FACE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:20:17.770

你在使用元素吗？Obj 文件从 1 开始计数，但 OpenGL 从 0 开始计数。只需从每个元素中减去 1，您就应该得到正确的渲染。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:01:52.050

法线的方向很重要。看起来您的对象的面方向不一致，因此具有相似平面的相邻面的法线指向相反的方向。

如果你从模型文件中导入了该模型，我建议你不要在代码中计算法线——无论如何你都不应该这样做，因为艺术家可能会手动调整法线以局部微调照明——但将它们存储在模型文件也是如此。所有 3D 建模器都具有将法线翻转为共同方向的功能。例如，在 Blender 中，此功能可通过`CTRL + N`编辑模式下的热键来实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T16:28:56.243

```
for(int i = 0; i < 3; i++) this->normals.push_back(point[i]); 
```

这只为每个面提供一个法线。*每个顶点*都需要一个法线。

# restkit - RestKit 0.20 - 预期的内容类型（空）

> ID：13509224
> 
> 赞同：4
> 
> 时间：2012-11-22T09:15:03.297
> 
> 标签：restkit

休息套件 0.20

有谁知道为什么我每次通话都会得到这个输出？关于追踪它有什么建议吗？我可以在调试输出中看到 json 有效负载。

```
error=Error Domain=AFNetworkingErrorDomain Code=-1016 "Expected content type (null), got application/json" UserInfo=0x9187fe0 {NSLocalizedRecoverySuggestion={ 
```

我正在打的电话是

```
[manager getObjectsAtPath:@"/customers" parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
        NSArray* statuses = [mappingResult array];
        NSLog(@"Loaded customers: %@", statuses);
    } failure:^(RKObjectRequestOperation *operation, NSError *error) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                        message:[error localizedDescription]
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
        [alert show];
        NSLog(@"Customer Error: %@", error);
    }]; 
```

我的映射代码是

```
@interface DataCustomers : NSObject

@property (nonatomic, copy) NSString* customerid;
@property (nonatomic, copy) NSString* firstname;
@property (nonatomic, copy) NSString* lastname;
@property (nonatomic, copy) NSString* email;

@end

RKObjectMapping *map = [RKObjectMapping mappingForClass:[DataCustomers class]];
    [map addAttributeMappingsFromDictionary:@{
     @"id" : @"customerid",
     @"firstname" : @"firstname",
     @"lastname" : @"lastname",
     @"email" : @"email"}];

[manager addResponseDescriptor: [RKResponseDescriptor responseDescriptorWithMapping:map
                                                                            pathPattern:@"/customers"
                                                                                keyPath:@"customers"
                                                                            statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)]]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:45:04.033

您是否正确设置了处理内容类型的意愿？

尝试将此添加到您的 AppDelegate：

```
#import "RKMIMETypeSerialization.h"
#import "RKNSJSONSerialization.h"

[RKMIMETypeSerialization registerClass:[RKNSJSONSerialization class] forMIMEType:@"application/json"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T05:57:17.483

发生了一些奇怪的库冲突，完全混淆了 AFNetwork。

除了消除这个问题之外，我还在 pathPattern 中添加了 nil。

# c# - informix 是否支持命名参数？

> ID：13509226
> 
> 赞同：1
> 
> 时间：2012-11-22T09:15:04.493
> 
> 标签：c#, informix, parameterized-query

我有以下查询：

```
 public static DataTable GetTasks(int empNum)
        {
                StringBuilder cmdTxt = new StringBuilder();
                Dictionary<string, string> paramList = new Dictionary<string, string>();
                cmdTxt.Append(" SELECT DISTINCT a.task_code, a.task_name ");
                cmdTxt.Append(" FROM rr2_task a, rr2_task_state b, rr2state_user c ");
                cmdTxt.Append(" WHERE a.task_code= b.task_code ");
                cmdTxt.Append(" AND b.state_code= c.state_code ");
                cmdTxt.Append(" AND c.emp_num = ? ");
                cmdTxt.Append(" AND b.new_flag= 1 ");
                cmdTxt.Append(" UNION SELECT DISTINCT a.task_code, a.task_name FROM rr2_task a , rr2_candidate b ");
                cmdTxt.Append(" WHERE empnum_candidate = ? ");
                cmdTxt.Append(" AND a.task_code = b.task_code ");
                cmdTxt.Append(" UNION SELECT DISTINCT a.task_code, a.task_name FROM rr2_task a, rr2_taskstate b, rr2_stategroup c ");
                cmdTxt.Append(" WHERE a.task_code= b.task_code ");
                cmdTxt.Append(" AND b.state_code= c.state_code ");
                cmdTxt.Append(" AND ((( c.group_type = 1 ) AND ( c.group_code = (SELECT x.degree_code FROM kk2_degree_infor x WHERE x.emp_num = ? ");
                cmdTxt.Append(" AND x.degree_date = ( SELECT MAX(xx.degree_date) FROM kk2_degree_infor xx WHERE xx.emp_num = x.emp_num )))) ");
                cmdTxt.Append(" OR (( c.group_type = 2 ) AND ( c.group_code =  ( SELECT y.title_code FROM hetjob y WHERE y.emp_num = ? ");
                cmdTxt.Append(" AND y.title_date = ( SELECT MAX(yy.title_date) FROM hetjob yy WHERE yy.emp_num = y.emp_num ))))) "); 
```

现在我应该添加四个具有不同名称的参数，尽管它实际上是一个具有相同值的参数吗？ `empNum`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T09:17:18.257

那么目前您使用的是*位置*参数 ( `?`) 而不是*命名*参数 ( `@empnum`)。您还没有告诉我们您使用的是什么数据库，但我希望如果您*可以*使用命名参数，您可以在任何地方使用相同的名称并只需添加一个值。

使用位置参数，您必须为每个占位符提供一个值，因为无法将单独的占位符绑定在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:19:27.393

首先，使用@创建一个多行字符串

```
string sql = @"SELECT ...
FROM...
WHERE..."; 
```

避免一些混乱:)

关于您的问题，如果使用带有匿名参数的 OleDB 提供程序，请声明具有此类值的变量，然后引用它：

```
DECLARE @par int; --or char or whatever else
SET @par = ?

SELECT ...
FROM ...
WHERE x = @par
AND y = @par 
```

这样，您应该只能传递一次参数。

# jquery - 使用来自 jQuery 的参数调用 ASP.NET 函数

> ID：13509232
> 
> 赞同：1
> 
> 时间：2012-11-22T09:15:22.527
> 
> 标签：jquery, asp.net, function

我可以从 jQuery 调用没有参数的 ASP.NET 函数，如下所示（default.aspx.cs）

```
public string GetaString()
        {
            return "New String";
        } 
```

**jQuery**（默认.aspx）

```
$(function () {var returnStr = '<%=GetaString() %>'; }; 
```

但是当调用带有参数的函数时，我没有得到任何值。

```
public string GetaString(string str1)
        {
            return "New String"+ str1;
        }

$(function () {var Company = "test";var returnStr = '<%=GetaString(Company) %>'; }; 
```

抱歉信息缺失。但这是通过 jquery 变量时的问题。

如何将参数传递给 asp.net 函数并获取返回值。更新实际代码：

```
$(document).ready(function () {

        $("#txtCompany").focusout(function () {

            var Company = $("#txtCompany").val();
            var returnStr = '<%=GetNameString("Company") %>';
            var availableTags = returnStr.split('|');
            $("#txtName").autocomplete({
                source: availableTags
            });

        });
}); 
```

我正在从 txtCompany 中的值填充 txtName 的自动完成。它在提供直接参数时起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:24:46.030

如果要向服务器端传递一些值，参数名称应该相同。在你的情况下，你可以尝试这样的事情

```
 $(function () {var str1="some value"; var returnStr = '<%=GetaString(str1) %>'; }; 
```

其他代码相同。我假设您的代码实际上可以调用服务器端函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:55:52.760

```
Ruchan ,
your code is fine , no problems are there 

i just run the code on my pc and its return the "New String Test"   value 
please have below what i run and its return correct value so let me know what exactly you want ?

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">

    <script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>
    <title></title>
    <script>

        var returnStr = '<%=GetaString("Test") %>';

        alert(returnStr);
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>

    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:00:28.033

我不认为你可以像这样从 Jquery 调用服务器端函数。传递参数问题是在那之后。

你不能像这样在 Jquery 中调用服务器端函数

```
 $(function () {var returnStr = '<%=GetCompString("Test") %>'; }; 
```

**解决方案**

1.  如果您有需要调用的仅限服务器的方法，请在服务器端使用 WebMethod，在客户端使用 ajax。看到[这个](http://api.jquery.com/category/ajax/?rdfrom=http://docs.jquery.com/mw/index.php?title=Ajax&redirect=no)

    $.ajax({ type: "POST", url: "MessagePopup.asmx/SendMessage", data: "{subject:'" + subject + "',message:'" + message + " studentId +"'}", contentType: "application/json; charset=utf-8", dataType: "json", success: function(msg) { // 在这里做一些有趣的事情。} });

2.  要调用 ASP.NET AJAX“ScriptServices”和页面方法，您需要使用完整的 $.ajax() 语法：[link](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

3.  看到这个帖子

    [如何在页面刷新的情况下使用 jquery 调用服务器端函数？](https://stackoverflow.com/questions/814581/how-to-call-server-side-function-using-jquery-wth-out-page-refresh)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T10:30:11.437

您使用的语法`<%= %>`是页面呈现期间函数调用的快捷方式`Response.Write`- 查看此[MSDN 链接](http://msdn.microsoft.com/en-us/library/6dwsdcf5%28v=vs.100%29.aspx)以获取更多信息。请注意，这是*服务器端*部分，它实际上在将输出发送到客户端*之前*将输出写入呈现的 HTML 。在您的第一个场景中：

```
var returnStr = '<%=GetNameString("Company") %>'; 
```

页面渲染来到该`<%= %>`部分，`GetNameString`使用参数调用函数`"Company"`并将其输出写入页面。然后生成的标记被发送到客户端。

所以最终当页面到达客户端时，它看起来像这样：

```
$(document).ready(function () {

        $("#txtCompany").focusout(function () {

            var Company = $("#txtCompany").val();
            var returnStr = 'New StringCompany'; // or whatever the output of the GetNameString is
            var availableTags = returnStr.split('|');
            $("#txtName").autocomplete({
                source: availableTags
            });

        });
}); 
```

现在执行 javascript。显然，它没有关于服务器端函数的概念，而只是一个字符串文字。

如果你真的想从客户端代码调用服务器端函数，你应该按照其他人的建议去做——实现 HttpHandler、Web 服务或页面方法并对其进行 Ajax 调用。

# javascript - Facebook Javascript SDK：FB.login() 在 Firefox/IE 上不起作用

> ID：13509251
> 
> 赞同：0
> 
> 时间：2012-11-22T09:16:16.977
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我正在构建一个非常简单的 facebook 应用程序，它只从 Facebook 获取用户的通知并允许他们登录。网址是：[http ://widget.sidepage.co/_jump_frame.html](http://widget.sidepage.co/_jump_frame.html)

这在 Chrome 上完美运行 - 允许用户通过标准 Facebook 弹出窗口登录和授权应用程序，一旦应用程序获得授权，它就会运行良好。

问题是，在 Firefox 上，单击小部件上的 Facebook 图标只会打开一个空白选项卡。控制台没有弹出窗口阻止程序警告或 JS 错误。

有关如何解决此问题的任何指示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:18:15.187

哦，伙计，轻松解决这是一个定义文档兼容性问题...

对于您需要的确切内容，我建议您完全按照我的做法来找出您的问题是在 Firefox 16 中运行您的应用程序，并请求查看页面源代码并观察标记，因为它呈现给 Firefox，然后做一点研究 firefox 16 需要什么来运行代码的兼容输入。应该不会太糟糕。对你最好..其他一些来源。关于这个主题和遗留兼容性。

[有用的链接](https://github.com/h5bp/html5-boilerplate/issues/378)

[有用的链接](http://msdn.microsoft.com/en-us/library/cc288325(v=VS.85).aspx)

希望对老兄有帮助:)

# iphone - 屏幕旋转锁定时如何获取设备方向？

> ID：13509257
> 
> 赞同：2
> 
> 时间：2012-11-22T09:16:26.447
> 
> 标签：iphone, objective-c, ios, device

我使用通知来获取设备的方向。

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [notificationCenter addObserver:self  
                                   selector:@selector(deviceOrientationDidChange)           
                                       name:UIDeviceOrientationDidChangeNotification 
                                     object:nil]; 
```

但是当设备的屏幕旋转被锁定时，不会调用选择器函数。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:37:01.263

您可以使用加速度计来获取屏幕方向的值。看到[这个](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAcceleration_Class/Reference/UIAcceleration.html)。另请参阅[此](http://blog.sallarp.com/iphone-accelerometer-device-orientation/)博客

# php - 离开页面时取消设置会话

> ID：13509258
> 
> 赞同：3
> 
> 时间：2012-11-22T09:16:26.790
> 
> 标签：php, session, session-variables, unset

如何`SESSION['variables']`在用户离开页面时取消设置，而不必在我网站上的每个页面的顶部包含一些内容？

您可能知道的任何最佳实践？

谢谢。

**编辑**

我有一个设置公司和客户的向导。这包括 2 页：1 页用于公司，1 页用于客户。如果用户想为客户重复使用在公司填写的数据，他可以选中复选框，当第 1 页（公司）的表单发布时，在第 2 页（客户）这些字段会自动设置（想想字段，例如：邮政地址、街道、电话等）。用户可以随时访问第 1 页和第 2 页，因此我必须取消设置会话，否则它将继续自动填充字段。

在第 2 页设置字段后，我可以取消设置会话，但是当他刷新浏览器时，字段再次变为空。这当然不是一个大问题，但是当用户转到任何其他页面（不退出浏览器和在我的网站内）时，是否有一种简单的方法可以仅取消设置这些会话？

**编辑**

我的代码：

公司页面：

```
$_SESSION['wizard2']= "true"; // used for manipulating page when entering in wizard mode
if (isset($_POST['savedata'])) // if user wants to re-use data from page1
{
$_SESSION['savedata'] = "true";
$_SESSION['custprovincesession']=mysql_real_escape_string($_POST['compprovince']);
header("Location:customer_page.php");
exit(); 
```

客户页面：

```
if (isset($_SESSION['wizard2'])) // used for manipulating page when entering in wizard 
{
    unset ($_SESSION['wizard2']);
}
if (isset($_SESSION['savedata'])) // if user wants to re-use data from page1
{
    $_SESSION['wizard3'] = "true";
}

  <tr>
    <th><label for="custprovince">Province:</label></th>
    <th><input type="text" name="custprovince" style=width:200px id="custprovince" size="8" value="<?php if (isset($_SESSION['wizard3']))   {   echo $_SESSION['custprovincesession'];}?>"/></th>
    <th>&nbsp;</th>
    <th>&nbsp;</th>
  </tr> 
```

在第 2 页的末尾：

```
if (isset($_SESSION['wizard3']))
{
    unset ($_SESSION['wizard3']);
    unset ($_SESSION['custprovincesession']);
} 
```

因此，通过刷新页面可以取消设置会话。当用户离开“customer_page.php”时，是否没有其他方法可以取消设置这些会话？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T09:21:40.387

这可能是一个愚蠢的问题，但为什么要在每个页面上取消设置某些会话变量？

当然，会话的重点是在页面视图中持续存在，因此您只想在特定触发点（例如用户注销系统）取消设置或清除它。

为了回答这个问题，许多框架通常会为所有脚本使用一个入口点，该入口点会执行任何初始化，将实际页面工作转移到控制器，然后返回到单个入口点。如果您使用这种方法，那么您可以将任何关闭逻辑放在页面末尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T09:41:14.167

如果我正确理解了这个问题，那么我实际上不会使用会话，而是依赖页面之间的 POST 变量。

我相信您想要做的只是在您直接从公司页面进入客户页面（或者可能反过来？）时保留某些表单字段。当用户直接或稍后访问客户页面时，需要清除这些字段。

在这种情况下，您只需确保在提交表单时发布到另一个页面并从请求中收集数据。

如果您实际上是在其他地方发布表单（以处理公司的添加），然后转发到客户的表单页面，那么您可以发布隐藏表单，或者您可以重新安排您的工作流程公司和客户的插入在最后完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T09:19:40.850

试试功能[`session_destroy();`](http://php.net/manual/en/function.session-destroy.php)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T09:34:32.697

你可以通过两种方式做到这一点。

```
1) session_destroy(); by using this function.
2) unset($_session[$var_name or 'session_name']); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T09:20:34.850

当连接断开时，会话会自动销毁。如果用户关闭了他的浏览器窗口，或者您的页面的所有选项卡，会话将自行销毁。

# objective-c - 检查是否在 NSTextView 内按下了空格键

> ID：13509260
> 
> 赞同：2
> 
> 时间：2012-11-22T09:16:28.520
> 
> 标签：objective-c, notifications, nstextview

我有一个 NSTextView ，我需要在其中检查何时按下特定按钮。使用 ModifierKeyFlags 我可以检查是否按下了 shift 和 control 等按钮，但我需要检查是否按下了 SPACE。因此，我不能使用 ModifierFlags（因为它可以检查一些按钮，不包括空格键）

所以我需要一个检查，每次我在我的应用程序的文本字段中按下空格键时都会通知我。有什么想法吗？我认为它需要是这样的：

```
if(spacebar is pressed) {
        Dlog(@"give me a notification");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:25:45.833

使用 NSText 的委托。

```
-(void)textDidChange:(NSNotification *)notification
{
    //Check if it has added a spacebar
} 
```

# lisp - 使用 rplaca 函数

> ID：13509264
> 
> 赞同：1
> 
> 时间：2012-11-22T09:16:55.037
> 
> 标签：lisp

我正在尝试用另一个符号示例替换列表中的符号：（替换 'the 'a '（坐在垫子上的猫））==>（坐在垫子上的猫）所以应该替换“the”通过“一个”

这是我的代码，

```
(defun replace (item new-item list)
 (cond ((null list)
          list
        ) 
       ((eq (first list) (item))
        ((rplaca list new-item)
         (replace (rest list))))
       ))
;rplace replace the first of the cons with obj
 ;(defparameter *some-list* (list* 'one 'two 'three 'four)) =>  *some-list*
 ;*some-list* =>  (ONE TWO THREE . FOUR)
 ;(rplaca *some-list* 'uno) =>  (UNO TWO THREE . FOUR) 
```

当我在 aligra 中编译它时出现以下错误

```
Error: Function position must contain a symbol or lambda expression: (RPLACA LIST NEW-ITEM)
[condition type: PARSE-ERROR] 
```

我不明白为什么会给出这个错误，因为 rplace 函数需要两个参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:05:32.680

您的代码中有几个不同的错误：

*   `item`不是一个函数，所以你不应该用括号括起来
*   您的递归调用应重复与原始调用相同的两个第一个参数
*   在所有情况下都应该进行递归调用（而不仅仅是在更换汽车时）
*   您在调用周围有额外的括号`rplaca`，这是报告错误的实际原因

```
(defun replace (item new-item list)
  (cond ((null list)
         list) 
        ((eq (first list) item)
         (rplaca list new-item)
         (replace item new-item (rest list)))
        (t
         (replace item new-item (rest list)))))

(setq l '(a cat sat on a mat))
(replace 'a 'the l)
l ;; -> (the cat sat on the mat) 
```

此外，正如评论中所指出的，不习惯将文字静音；您可能想要构建一个新列表，例如：

```
(defun replace-1 (item new-item list)
  (mapcar (lambda (car)
            (if (eq car item)
                new-item
              car))
          list))

(replace-1 'a 'the '(a cat sat on a mat))
;; -> (the cat sat on the mat) 
```

# javascript - Google 日历 v3：未配置访问权限

> ID：13509265
> 
> 赞同：0
> 
> 时间：2012-11-22T09:16:57.940
> 
> 标签：javascript, calendar

我使用这个的javascript版本并且有这个代码

```
gapi.client.load('calendar', 'v3', function() {
        var request = gapi.client.calendar.events.list({
             'calendarId': 'idofmycalendar@group.calendar.google.com'});
        request.execute(function(resp) {console.log(resp);});
}); 
```

一切都很好（我猜），我也公开了日历。但我总是收到“未配置访问”错误。如果我将calendarId设置为主要...对我在这里错过了什么有任何想法吗？多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T23:11:23.560

您需要使用[API 控制台](https://code.google.com/apis/console/)启用 Google 日历服务。

（/q/13863500/ 的欺骗）

# android - 如何更改 ActionMode 中“更多”项的背景颜色？

> ID：13509266
> 
> 赞同：2
> 
> 时间：2012-11-22T09:17:01.657
> 
> 标签：android, background, android-actionbar

`ActionMode`超过 3 项时会显示“更多”项，但它是自动生成的。我想在按下它时更改背景。我应该怎么办？我正在使用 Android 4.0 API 级别 15。

![更多项目](../Images/9095ea1b49efa7083ada5f5bdce57e49.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:50:38.287

我已经解决了这个问题。

```
<style name="Theme.Seven" parent="android:Theme.Holo">
    ...
    ...
    <item name="android:selectableItemBackground">@drawable/action_background</item>
</style> 
```

action_background.xml 如下：

`<selector xmlns:android="http://schemas.android.com/apk/res/android" android:exitFadeDuration="@android:integer/config_mediumAnimTime" > <item android:state_pressed="true" android:drawable="@drawable/btn_dismiss_pressed" /> <item android:drawable="@android:color/transparent" /> </selector>`

# iphone - 这种编程范式对我的成功至关重要吗？

> ID：13509270
> 
> 赞同：3
> 
> 时间：2012-11-22T09:17:16.930
> 
> 标签：iphone, ios, user-interface, uiview, paradigms

我目前正在为 iOS 制作应用程序，并且我有一个关于制作 UIViews 的快速问题。在设计 UIView 的过程中，我想知道是否一切都应该基于包含我的视图的矩形的边界。

例如，我目前正在做的那个被设​​计成一个只占据屏幕上部 25% 的页眉。尽管有这个意图，我是否仍然应该设计代码，以便如果视图占据整个屏幕，它仍然可以工作？

为了提供一个场景，假设我需要画一条线。我应该只画 20 个像素，还是应该总是画矩形宽度的 30%。

我理解可重用性的概念，但如果我只是为了这个特定目的设计这个视图，让它在本质上有点僵化是否可以接受？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T09:38:39.137

为改变和可重用性而设计始终是一个好的实践。但是，正如您也意识到的那样，它引入的开销有时会超过灵活设计的好处。

我会说，如果视图仅用于具有特定大小的特定目的，那么硬编码某些值是可以的。为 UI 组件创建固定大小的图像是相当普遍的，就像在代码中使用固定大小的值一样。尽管如此，对所有硬编码值使用常量并在代码的集中位置收集所有这些值是一种很好的做法，例如：

```
static const CGFloat centerLineWidth = 20.0; 
```

这样，如果需要更改某些内容，您可以相对轻松地重新配置您的视图。

最后，如果视图可能使用不同尺寸的可能性很小，您应该选择灵活的设计。您也可以混合使用这些概念，例如创建一个在设计时考虑到灵活宽度但其高度应该是固定值的视图。

# java - Java 线程级沙箱

> ID：13509272
> 
> 赞同：2
> 
> 时间：2012-11-22T09:17:22.093
> 
> 标签：java, multithreading, security, sandbox

是否可以在线程级别对不受信任的代码进行沙箱处理？

sanboxing 代码的常见答案[似乎是实现一个 SecurityManager](https://stackoverflow.com/questions/502218/sandbox-against-malicious-code-in-a-java-application)并替换默认的 SecurityManager。但这将沙箱强加在 JVM 级别。这不适合我。

有没有办法只针对特定线程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T09:22:21.747

我对此表示怀疑。由于线程共享大量资源（地址空间等），因此很难设想一种实用的机制来执行您所要求的操作。您最好的选择可能是在单独的进程中运行不受信任的代码。

# c# - 在字符串列表中查找公共字符串

> ID：13509277
> 
> 赞同：7
> 
> 时间：2012-11-22T09:17:38.050
> 
> 标签：c#, linq, string-comparison

我非常接近这一点。我昨天收到一个开发人员向我提出的问题，如果我可以看看这个。

我感觉很亲近，但我认为这里的一些人也会欣赏挑战，我迷路了。

如果我有`List<string>`以下成员：

> 今天
> 
> 周一
> 
> 周二
> 
> 周三

我想得到一个返回字符串**，**`day`因为这是. 这应该与位置和字符串长度无关，只是想在大量字符串中找到最大长度的公共字符串。**`List<string>`**

 **我的尝试失败了一点，我选择了：

> 星期一星期二
> 
> 周一至周三

然后`Intersect`在每个之间做了一个。显然这会返回多个字符串，但是`Monday - Wednesday`你会得到`nday`，因为那是它共有的字母。

这是我的代码：

```
 List<string> strs = new List<string>();
  strs.Add("Monday");
  strs.Add("Tuesday");
  strs.Add("Wednesday");

  var v = strs.SelectMany((day, i) => strs.Select((day2, j) => new
  {
    iDay = i,
    Day = day,
    iDay2 = j,
    Day2 = day2
  })).Where(x => x.iDay != x.iDay2).Select(x => new string(x.Day.Intersect(x.Day2).ToArray())); 
```

有人有一个很好的解决方案吗？

**笔记**

它不一定是 LINQ

如果没有公共字符串，则返回`null`或空字符串。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T09:28:01.453

这比我的第一种方法（删除）更好。

您可以使用以下扩展来获取列表中最短字符串的所有子字符串（为了提高效率）：

```
public static IEnumerable<string> getAllSubstrings(this string word)
{
    return from charIndex1 in Enumerable.Range(0, word.Length)
           from charIndex2 in Enumerable.Range(0, word.Length - charIndex1 + 1)
           where charIndex2 > 0
           select word.Substring(charIndex1, charIndex2);
} 
```

*   现在按`Length`（最长的优先）对这些子字符串进行排序
*   查看所有其他字符串（不包括字符串本身，因为该测试是多余的）是否包含该子字符串（[`Enumerable.All`](http://msdn.microsoft.com/en-us/library/bb548541.aspx)如果一个字符串不包含给定的子字符串，则立即返回）
*   如果一个字符串出现在所有其他字符串中，则您找到了最长的公共子字符串
*   否则重复此操作，直到您检查了所有子字符串（如果没有找到公共字符串）

* * *

```
string shortest = list.OrderBy(s => s.Length).First();
IEnumerable<string> shortestSubstrings = shortest
    .getAllSubstrings()
    .OrderByDescending(s => s.Length);
var other = list.Where(s => s != shortest).ToArray();
string longestCommonIntersection = string.Empty;
foreach (string subStr in shortestSubstrings)
{
    bool allContains = other.All(s => s.Contains(subStr));
    if (allContains)
    {
        longestCommonIntersection = subStr;
        break;
    }
} 
```

[**演示**](http://ideone.com/Rj29fr)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T09:30:31.457

查找列表中最短的条目。

*   今天
*   周一
*   周二
*   周三

所以我们使用“今天”。

在“Today”中构建一个连续字符的字符串列表，将字符串的长度向下到每个字符，以“最长的优先”顺序。

“今天”，

“户田”、“今天”、

“Tod”、“oda”、“day”、

“到”、“od”、“da”、“ay”、

“今天”

枚举这个列表，找到所有其他字符串都包含该条目的第一个条目。

```
 List<string> words = new List<string> { "Today", "Monday", "Tuesday", "Wednesday" };

        // Select shortest word in the list
        string shortestWord = (from word in words
                            orderby word.Length
                            select word).First();

        int shortWordLength = shortestWord.Length;

        // Build up the list of consecutive character strings, in length order.
        List<string> parts = new List<string>();
        for (int partLength = shortWordLength; partLength > 0; partLength--)
        {
            for (int partStartIndex = 0; partStartIndex <= shortWordLength - partLength; partStartIndex++)
            {
                parts.Add(shortestWord.Substring(partStartIndex, partLength));
            }
        }
        // Find the first part which is in all the words.
        string longestSubString = (from part in parts where words.All(s => s.Contains(part)) select part).FirstOrDefault();

       // longestSubString is the longest part of all the words, or null if no matches are found. 
```

**编辑**

多想一点，就可以优化一点。

您无需建立零件列表 - 只需在生成每个零件时对其进行测试。此外，通过按长度顺序对单词列表进行排序，您总是首先测试最短的字符串以更快地拒绝候选部分。

```
 string longestSubString = null;

        List<string> words = new List<string> { "Todays", "Monday", "Tuesday" };

        // Sort word list by length
        List<string> wordsInLengthOrder = (from word in words
                                           orderby word.Length
                                           select word).ToList();

        string shortestWord = wordsInLengthOrder[0];
        int shortWordLength = shortestWord.Length;

        // Work through the consecutive character strings, in length order.
        for (int partLength = shortWordLength; (partLength > 0) && (longestSubString == null); partLength--)
        {
            for (int partStartIndex = 0; partStartIndex <= shortWordLength - partLength; partStartIndex++)
            {
                string part = shortestWord.Substring(partStartIndex, partLength);

                // Test if all the words in the sorted list contain the part.
                if (wordsInLengthOrder.All(s => s.Contains(part)))
                {
                    longestSubString = part;
                    break;
                }
            }

        }

        Console.WriteLine(longestSubString); 
```**

# ios - 如何从 Twitter 帐户获取直接消息

> ID：13509278
> 
> 赞同：2
> 
> 时间：2012-11-22T09:17:36.643
> 
> 标签：ios, xcode, api, twitter

任何人都可以描述如何获取 twitter 直接消息，每个人都说启用应用程序读取、写入、从帐户直接消息访问，我已经从 twitter 开发人员启用了所有功能。帐户，但我仍然不知道如何从我的 Twitter 帐户获取直接消息，请举例说明。

提前致谢，

# java - HttpMessageNotReadableException：无法读取 JSON：读取超时

> ID：13509283
> 
> 赞同：3
> 
> 时间：2012-11-22T09:17:52.813
> 
> 标签：java

我操作 API 服务器。
手机APP联系API服务器时，有时会出现该异常。
我在测试服务器上尝试过测试，但我无法重现。（我更改了 apache 和 tomcat 的连接时间。）

有什么问题？？
我怎么解决这个问题？

* * *

```
 ERROR Could not read JSON: Read timed out; nested exception is java.net.SocketTimeoutException: Read timed out
org.springframework.http.converter.HttpMessageNotReadableException: Could not read JSON: Read timed out; nested exception is java.net.SocketTimeoutException: Read timed out
        at org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.readInternal(MappingJacksonHttpMessageConverter.java:125)
        at org.springframework.http.converter.AbstractHttpMessageConverter.read(AbstractHttpMessageConverter.java:153)
        at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver.readWithMessageConverters(AbstractMessageConverterMethodArgumentResolver.java:120)
        at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver.readWithMessageConverters(AbstractMessageConverterMethodArgumentResolver.java:91)
        at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.resolveArgument(RequestResponseBodyMethodProcessor.java:71)
        at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:75)
        at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:156)
        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:117)
        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
        at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
        at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
        at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:776)
        at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:705)
        at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:898)
        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.net.SocketTimeoutException: Read timed out
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(SocketInputStream.java:129)
        at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
        at java.io.BufferedInputStream.read1(BufferedInputStream.java:258)
        at java.io.BufferedInputStream.read(BufferedInputStream.java:317)
        at org.apache.jk.common.ChannelSocket.read(ChannelSocket.java:628)
        at org.apache.jk.common.ChannelSocket.receive(ChannelSocket.java:566)
        at org.apache.jk.common.JkInputStream.receive(JkInputStream.java:200)
        at org.apache.jk.common.JkInputStream.doRead(JkInputStream.java:179)
        at org.apache.coyote.Request.doRead(Request.java:427)
        at org.apache.catalina.connector.InputBuffer.realReadBytes(InputBuffer.java:304)
        at org.apache.tomcat.util.buf.ByteChunk.substract(ByteChunk.java:419)
        at org.apache.catalina.connector.InputBuffer.read(InputBuffer.java:327)
        at org.apache.catalina.connector.CoyoteInputStream.read(CoyoteInputStream.java:193)
        at org.codehaus.jackson.impl.ByteSourceBootstrapper.ensureLoaded(ByteSourceBootstrapper.java:507)
        at org.codehaus.jackson.impl.ByteSourceBootstrapper.detectEncoding(ByteSourceBootstrapper.java:129)
        at org.codehaus.jackson.impl.ByteSourceBootstrapper.constructParser(ByteSourceBootstrapper.java:224)
        at org.codehaus.jackson.JsonFactory._createJsonParser(JsonFactory.java:785)
        at org.codehaus.jackson.JsonFactory.createJsonParser(JsonFactory.java:561)
        at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1923)
        at org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.readInternal(MappingJacksonHttpMessageConverter.java:122) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-01T16:30:51.460

问题就在堆栈跟踪中：“读取超时”。这意味着客户端停止向您的服务器发送数据的时间过长，以至于服务器放弃并假设连接丢失。然后服务器无法解析 JSON 消息，因为它没有收到所有消息（因为它放弃了等待客户端发送其余的消息）。

# java - 为什么我不能在保留 compareTo 合同的同时使用新的值组件扩展可实例化类？

> ID：13509286
> 
> 赞同：6
> 
> 时间：2012-11-22T09:18:00.870
> 
> 标签：java

Joshua Blotch 的Per *Effective Java*：

> `compareTo`除非您愿意放弃面向对象抽象的好处，否则无法在保留契约的同时使用新的值组件扩展可实例化类

您能否通过示例和挑战解释上述内容？您能否也解释一下 Joshua 所说的“价值组件”是什么意思以及还有哪些其他类型的组件可用。

> 这使您可以自由地`compareTo`在第二个类上实现您喜欢的任何方法，同时允许其客户端在需要时将第二个类的实例视为第一个类的实例。

你能否解释一下 Joshua 所说的*第二类作为第一类的实例是*什么意思？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T09:28:31.817

> 您能否通过示例和挑战解释上述内容？

当然。考虑两个这样的类 - 我已经省略了所有的 getter、setter 等，但希望你能明白：

```
class NamedThing {
    String name;
}

class Person extends NamedThing {
    Date dateOfBirth;
} 
```

忽略这是否是继承的一个*很好的例子——它是一个**简单*的例子。

`NamedThing`按字母顺序实现基于名称的比较是很自然的。

`Person`实现一个比较也很自然，首先比较名称（因此在这方面保持一致），然后检查一个出生日期是否早于另一个*。*

现在想象一下：

```
NamedThing person1 = new Person("Jon", date1);
NamedThing person2 = new Person("Jon", date2);
NamedThing thing = new NamedThing("Jon");

int comparison1 = person1.compareTo(thing);
int comparison2 = person2.compareTo(thing);
int comparison3 = person1.compareTo(person2);
int comparison4 = thing.compareTo(person1); 
```

你希望所有这些结果是什么？如果`Person.compareTo`足够聪明，*仅*将其日期处理应用于 的实例`Person`，那么您可能期望`comparison1`and`comparison2`为 0，但`comparison3`不为零。

大概`comparison4`必须*为*0，因为它正在使用`NamedThing.compareTo`，*它只*比较名称。

从根本上说，试图比较不同类型的实例是有问题的。拥有一个比较的*外部*定义会更清晰，它定义了它将使用什么比较。因此，您可以有一个`Comparator<Person>`只接受`Person`引用并使用名称和日期的一个，以及一个`Comparator<NamedThing>`只按名称比较的。该行为将具有对称性和清晰度。

> 你能解释一下 Joshua 所说的第二类作为第一类的实例是什么意思吗？

你已经断章取义了。它是：“将第二类的实例视为第一类的实例” - 例如

```
// First class = Animal
// Second class = Zebra
Animal person = new Zebra(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:42:22.447

1.  这意味着对于每个子类，您必须重写`compareTo`方法。
2.  转换为超类称为*向上转换*。

# java - 仅调用 servlet 类的方法而不是整个 servlet

> ID：13509291
> 
> 赞同：0
> 
> 时间：2012-11-22T09:18:17.040
> 
> 标签：java, ajax, servlets

//下面是我的名为 HtmlTable 的 servlet。我正在尝试在这里实现类似购物车的功能。addItems 是另一个将元素放入 ArrayList 的类。每当我从网站添加一些东西时，我希望 AJAX 请求只调用方法 jusAdding() 而不是 processRequest 方法。因此，当向 ArrayList 添加足够的项目时，我可以通过调用 aI.getItems() 在屏幕上打印它，这将在简单地调用 servlet 时自动发生。是否可以？？如果是，我应该如何在 AJAX 请求中编写 URL。

```
public class HtmlTable extends HttpServlet {

        addingItems aI = new addingItems();

        public void jusAdding(HttpServletRequest request, HttpServletResponse response){
            aI.addItemsInCart(request, response);
        }
        protected void processRequest(HttpServletRequest request, HttpServletResponse response)
                throws ServletException, IOException {
            response.setContentType("text/html;charset=UTF-8");
            PrintWriter out = response.getWriter();
            List<itemsCart> itemsInCart = aI.getItemsInCart();

            try {

                out.println("<html>");
                out.println("<head>");
                out.println("<title>Servlet HtmlTable</title>");
                out.println("</head>");
                out.println("<body>");
             //whatever content is in the itemsInCart will be displayed here in body tag   
    out.println("</body>");
                out.println("</html>");
            } finally {
                out.close();
            }
        }

    } 
```

//如果我不清楚，请原谅我。让我知道我会根据读者的方便进行更新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T09:26:53.137

你不能那样做。

流经 Servlet 的 HTTP 请求将*始终*转到 Servlet 的`service`方法。您需要将该`service`方法用作控制器，因此它会`jusAdding`根据请求的参数检查传入的请求和调用（或其他方法）。

最有可能的是，您将希望使用已经存在的框架来执行此操作。

下面应该给你更多的信息，以及一些如何去做的想法：[如何使用 Servlets 和 Ajax？](https://stackoverflow.com/questions/4112686/how-to-use-servlets-and-ajax)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T09:28:11.657

容器不会调用您的任何方法。您应该从[servlet 规范](http://jcp.org/aboutJava/communityprocess/final/jsr315/index.html)（或至少[`HttpServlet`javadoc](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServlet.html)）开始。

容器调用`service()`您的 servlet 的方法，该方法又用于`HttpServlet`分派到与请求 HTTP 方法对应的方法：`doGet()`等`doPost()`。这就是您应该挂钩逻辑的地方（覆盖其中一个，或`service()`自身并放置您的代码那里）。

为了区分“整页请求”和“AJAX 请求”，您需要客户端在该调用中包含一些鉴别器：一些具有不同值的请求参数、不同的 HTTP 方法或其他。一旦有了它，例如在您的`doGet()`方法中，您可以检查该鉴别器并根据客户端请求调用`justAdd()`或调用。`processRequest()`

# android - 关于android中的界面设计

> ID：13509292
> 
> 赞同：-2
> 
> 时间：2012-11-22T09:18:20.313
> 
> 标签：android, button

我正在设计一个网页视图。单击不同的按钮并显示不同的内容。像这样：

![在此处输入图像描述](../Images/fdf4596caf3232da88d8fab74afb3af3.png)

当我切换左侧的四个按钮时，我想实现该功能。它可以在右侧显示不同的内容。谢谢！</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:52:00.563

您的 xml 文件中有您的 webview 和按钮。在 youractivityname.java 中尝试以下代码

```
public class yourActivityname extends Activity implements OnClickListener {

    private WebView yourWebView;    
    private Button button1, button2; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
            // assign reference of xml activity contents to your class variables
        yourWebView = (WebView) findViewById(R.id.web);
            button1 = (Button) findViewById(R.id.button1);   
            button2 = (Button) findViewById(R.id.button2);
        String url = "https:/www.google.com";
        yourWebView.getSettings().setJavaScriptEnabled(true);
           //load default url
           loadWebContents(url);

    } 
```

创建一个加载您的网络并调用此方法 onclick 的方法

```
private void loadWebContents(String url){
        yourWebView.setWebChromeClient(new WebChromeClient() {
            public void onProgressChanged(WebView view, int progress) {

            }
        });

        yourWebView.loadUrl(url);
    } 
```

点击方法

```
public void onClick(View v) {
        switch (v.getId()) {
        case R.id.button1:
            loadWebContents("www.msn.com");
            break;
        case R.id.restoreBtn:
            loadWebContents("www.gmail.com");
            break;
        }

    }
} 
```

# git - git：致命：无法从远程存储库读取

> ID：13509293
> 
> 赞同：498
> 
> 时间：2012-11-22T09:18:23.697
> 
> 标签：git

我正在尝试使用[http://danielmiessler.com/study/git/#website](http://danielmiessler.com/study/git/#website)设置 git来管理我的网站。

我已经到了说明的最后一步：git push website +master:refs/heads/master

我正在使用 win7 中的 git ming32 命令行

```
$ git push website +master:refs/heads/master
Bill@***.com's password:
Connection closed by 198.91.80.3
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

这里的一个问题可能是程序正在寻找 Bill@***.com。当我通过 ssh 连接到我的网站时，我有一个不同的用户名（比如说“abc”）。所以也许这应该是 abc@***.com。如果是这样，我不知道如何更改它，或者我是否可以使用别名推送

* * *

## 回答 #1

> 赞同：372
> 
> 时间：2016-10-12T22:49:13.767

您的 ssh 密钥很可能已从 ssh 代理中删除

```
ssh-add ~/.ssh/id_rsa 
```

其中 id_rsa 是与 git repo 关联的 ssh 密钥

**更新**

您可能会通过`Could not open a connection to your authentication agent.`以下方式解决需要先启动代理的错误：

```
eval `ssh-agent -s` 
```

* * *

## 回答 #2

> 赞同：220
> 
> 时间：2015-12-04T05:38:22.613

前段时间我也面临同样的问题...

我的 .git/config 有

```
url = git@github.com:manishnakar/polymer-demo.git 
```

我把它换成了

```
url = https://github.com/manishnakar/polymer-demo.git 
```

现在可以使用了:)

* * *

## 回答 #3

> 赞同：159
> 
> 时间：2012-11-22T09:24:04.707

您可以指定 SSH 应发送到远程系统的用户名作为远程 URL 的一部分。将用户名，后跟一个`@`，放在远程主机名之前。

```
git remote set-url website abc@***.com:path/to/repo 
```

* * *

## 回答 #4

> 赞同：148
> 
> 时间：2013-12-21T00:51:58.760

确保你有正确的网址`.git/config`

```
url = git@github.com:username/repo.git 
```

如果这是您的第一次推送，您需要设置正确的上游

```
$ git push -u origin master 
```

您可以检查以下用户使用了哪个密钥：

```
$ ssh -vvv git@github.com 
```

回复应包含以下内容：

```
debug1: Next authentication method: publickey
debug1: Offering RSA public key: ~/.ssh/id_rsa
...
You've successfully authenticated, but GitHub does not provide shell access. 
```

也可以为 ssh in 定义规则`~/.ssh/config`，例如基于别名：

```
 Host github
      HostName github.com 
      User git
      IdentityFile "~/.ssh/id_rsa"

   Host git
      HostName github.com 
      User git
      IdentityFile "~/.ssh/some_other_id" 
```

您可以为每个别名设置连接到不同的端口、使用不同的用户名等。

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2014-07-30T17:25:15.507

尝试删除 GIT_SSH 环境变量`unset GIT_SSH`。这是我的问题的原因。

* * *

## 回答 #6

> 赞同：25
> 
> 时间：2015-09-27T11:45:28.910

这通常是由于 SSH 密钥与远程不匹配造成的。

**解决方案：**

1.  转到终端并键入以下命令（Mac、Linux）替换为您的电子邮件 ID。

    ssh-keygen -t rsa -C "you@email.com"

2.  使用从 word ssh 开始的以下命令复制生成的密钥。

    猫 ~/.ssh/id_rsa.pub

3.  将其粘贴到遥控器的 github、bitbucket 或 gitlab 中。
4.  保存。

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2015-10-19T20:05:32.373

通过在终端上执行以下命令确保 ssh-agent 正在运行：

```
eval $(ssh-agent -s) 
```

来源：[Github 文档](https://help.github.com/articles/generating-ssh-keys/#step-3-add-your-key-to-the-ssh-agent)

* * *

## 回答 #8

> 赞同：19
> 
> 时间：2020-03-20T21:55:02.237

我有一个错误的 Bitbucket ssh 私钥以及 ssh 代理中的正确私钥。

首先删除所有密钥

```
ssh-add -D 
```

然后添加了正确的键。

```
ssh-add ~/.ssh/id_rsa 
```

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2017-04-18T15:51:12.833

我有同样的问题。

此错误表示您尚未指定代码将推送到的远程 URL 位置。

您可以通过 2（主要）方式设置远程 URL：

1.  通过在 Git Bash 上执行命令指定远程 URL。

    *   导航到您的项目目录

    *   打开 Git Bash

    *   执行命令：

        *   `git remote set-url origin <https://abc.xyz/USERNAME/REPOSITORY.git>`
2.  在配置文件中直接提及远程 URL

    *   导航到您的项目目录

    *   移动到**.git**文件夹

    *   在文本编辑器中打开**配置文件**

    *   复制并粘贴以下行

        *   `[remote "origin"] url = https://abc.xyz/USERNAME/REPOSITORY.git fetch = +refs/heads/*:refs/remotes/origin/*`

有关更多详细信息，请访问此[链接](https://help.github.com/articles/changing-a-remote-s-url/)。

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2013-10-01T10:38:47.223

在做了一些研究之后，我终于找到了解决方案，你已经为 plink.exe 路径声明了一个环境变量。因此，如果您删除该路径，请重新打开 git bash 并尝试通过 SSH 进行克隆，它将起作用。

参考这个链接

[http://sourceforge.net/p/forge/site-support/2959/#204c](http://sourceforge.net/p/forge/site-support/2959/#204c)

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2015-01-23T21:05:01.890

我有同样的错误。解决方案如下：我已在`.git/config`. 刚刚从 HTTPS 克隆 URL 复制了它。那将是这样的：

```
url = https://github.com/*your*git*name*/*your*git*app*.git 
```

有效。

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2015-06-22T15:07:45.193

另一种解决方法：

有时这发生在我身上是因为网络问题。我不完全理解根本问题，但是切换到不同的子网或使用 VPN 可以解决它

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2018-02-10T15:44:35.873

如果在“git push origin master”命令之后你看到错误“无法从远程存储库读取”，那么试试这个

```
1.ssh-keygen -t rsa -b 4096 -C "youremail"
2.eval $(ssh-agent -s)
3.ssh-add ~/.ssh/id_rsa
4.clip < ~/.ssh/id_rsa.pub(it copies the ssh key that has got generated)
5.then go to your remote repository on github and goto settings-> SSH and GPG keys ->new SSH key ->enter any title and paste the copied SSH key and save it
6\. now give git push origin master 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2013-07-27T20:20:26.667

在你的 .git/config 文件中

```
[remote "YOUR_APP_NAME"]
    url = git@heroku.com:YOUR_APP_NAME.git
    fetch = +refs/heads/*:refs/remotes/YOUR_APP_NAME/* 
```

而且很简单

```
git push YOUR_APP_NAME master:master 
```

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2018-05-23T18:52:17.247

如果您使用 Gitlab，则可能需要登录并接受 Gitlab 新条款，然后再尝试拉取或推送。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2020-10-13T11:14:26.420

2020 年 10 月更新

在大多数情况下，当您有多个用户从同一个客户端系统访问同一个 git 服务器时，此时 git 服务器与两个用户都允许的用户的访问密钥混淆，但是当您触发命令时，它使用了默认用户。

```
ssh -T git@gitlab.com 
```

查看您尝试与该用户一起推送的用户

**简单的解决方案从 git 服务器中删除未使用的用户公钥。**

然后尝试 git fetch 或 pull，push 它将对我有用

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2016-09-05T01:22:23.590

就我而言，我使用带有密码的 ssh 密钥向 github 进行身份验证。我没有在 Windows 中正确设置选美（仅在 cygwin 中）。缺少的步骤是将 git_ssh 环境变量指向 plink.exe。此外，您需要将 github.com 放入 plink known_hosts。

```
 plink github.com
   y
   <then ctrl-c> 
```

希望这可以帮助！

我当然希望 intellij 能给我一个更有用的错误，或者更好地要求我输入 ssh 密钥密码。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2018-03-02T17:04:14.743

我有一个完美的工作 git，但当我尝试推送到 master 时突然出现了这个错误。我发现，这是因为存储库主机有问题。

如果您使用 GitHub 或 Bitbucket，您可以在以下位置轻松检查状态

[https://status.github.com/messages](https://status.github.com/messages)或[https://status.bitbucket.org/](https://status.bitbucket.org/)

[![在此处输入图像描述](../Images/9817019c94353f4bcd5056f6929f9eaa.png)](https://i.stack.imgur.com/85OWs.png)

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2019-03-01T00:16:33.653

我已经尝试了一切，包括生成新密钥、添加到 GitHub 帐户、编辑**.ssh/config**和**.git/config**。但它仍然给了我同样的错误。然后我尝试了以下命令，它确实成功了。

```
ssh-agent bash -c 'ssh-add ~/.ssh/id_rsa; git clone git@github.com:username/repo.git' 
```

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2019-09-21T07:35:18.483

我刚刚遇到问题并通过以下方式解决它： `git config user.email "youremail"`。

* * *

更新：根本原因可能是我糟糕的网络和糟糕的代理。我仍然不知道为什么会这样，但是每次都有这个错误，这个命令有效！！！

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2020-05-07T18:26:21.537

您需要为 Git 使用 HTTPS：

在终端中输入：

```
$ git remote set-url origin abc@***.com:path/to/httpURLRepo 
```

然后提交：

```
$ git add .
$ git commit -m "This is the commit message" 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2015-07-08T11:00:23.760

就我而言，我在办公室使用公司网络（没有互联网连接）。为了从 github 拉代码，我在 gitbash 中设置了 https 代理，然后使用 https 而不是 ssh 来拉代码，它工作正常。但是，在推送代码时，https 代理将不起作用。所以要么切换到 Internet 网络（有 Internet 连接），要么设置 ssh 代理可以解决问题。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2016-03-09T22:13:53.027

实际上，我尝试了很多方法使其在 Win7 上运行，因为将 SSH exectun 从本机更改为 build-it 和向后以及相同的错误。碰巧，我在“.git/config”文件中将其更改为 HTTPS，如下所示：

```
[remote "origin"]
        url = https://github.com/user_name/repository_name.git
        fetch = +refs/heads/*:refs/remotes/origin/* 
```

它终于奏效了。所以也许它也对你有用。

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2017-03-10T15:09:29.353

我遇到了同样的问题，过了一会儿我看到我在 root 用户下（使用 sudo -s）。愿这对某人有所帮助。

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2017-09-18T00:31:02.570

```
user@server:/etc/nginx$ cat .git/config 
...
[remote "origin"]
    url = git@gitlab.com:user/.git
    fetch = +refs/heads/*:refs/remotes/origin/*
... 
```

* * *

1.  使用 ssh 而不是 https。
2.  在 git 中使用 ssh 密钥（添加 ssh 密钥）。
3.  如果您是 root，请使用 ssh 密钥。

* * *

```
$ sudo ssh-keygen
$ cat /root/.ssh/id_rsa.pub 

$ git init
$ git add file
$ git commit -m "add first file"
$ git remote add origin git@gitlab.com:user/example.git 
$ git push -u origin master 
```

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2019-01-30T10:46:55.083

**我通过重新启动终端**（打开一个新窗口/标签）解决了这个问题。

因此，如果您真的不想/不需要了解潜在问题，那么在深入挖掘之前，值得一试测试方法:)

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2019-05-22T20:47:29.133

我在 Windows 10 上使用 gitbash 时遇到了这个问题。我尝试了几件事来解决这个问题，主要是这些：

1.  重新创建了我的 ssh 密钥并更新为 bitbucket。没有帮助
2.  [使用它](https://stackoverflow.com/a/38706495/3885927)打开调试，发现我收到“通道 0 上的 shell 请求失败”，如此处所[问](https://stackoverflow.com/q/27021641/3885927)
3.  重新启动我的Windows PC

以上都没有帮助。[我最终为 Windows](https://gitforwindows.org/)重新安装了Git与我所做的其他事情相比，这只花了几分钟，它解决了问题！

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2016-01-04T16:05:28.390

就我而言，它是 postBuffer ..

```
git config --global http.postBuffer 524288000 
```

供参考阅读：[https ://gist.github.com/marcusoftnet/1177936](https://gist.github.com/marcusoftnet/1177936)

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2016-12-08T16:02:18.033

我有同样的错误，这让我得到了这个对我没有帮助的答案。我第一次尝试使用以下命令创建一个新的“裸”存储库来跟踪 NTFS 位置：

```
cd myrepository
git init --bare \\myserver.mycompany.local\myrepository.git
git init
git status
git add .
git status
git commit -m "Initial Commit"
git remote add origin \\myserver.mycompany.local\myrepository.git
git push -u origin master
git status 
```

我的问题原来是在尝试添加原点以设置（新）跟踪的上游分支时在 NTFS 位置使用反斜杠而不是正斜杠。

我不得不使用以下方法删除原点：

```
git remote rm origin 
```

然后使用预期的正斜杠再次添加原点

```
git remote add origin //myserver.mycompany.local/myrepository.git 
```

希望这对将来的某人有所帮助。

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2017-03-12T21:29:17.183

换电脑后出现这个错误。我将 SourceTree 与 Bitbucket 一起使用。

因此，我必须在新计算机上的 Bitbucket 设置 > 安全 > SSH 密钥中添加 SourceTree 生成的 SSH 密钥，同时连接到我在 Web 上的 Bitbucket 帐户。

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2019-04-15T18:05:47.790

我间歇性地遇到这个问题，大多数时候它不会给出错误消息。我的解决方案是在我的 LDAP 服务器的 IP 地址更改后正确配置 LDAP。

LDAP的`/etc/gitlab/gitlab.rb`配置指向一个不存在的 IP 地址，因此将主机更改为指向 LDAP 服务器的正确主机名解决了这个问题。

要诊断问题，请使用该`gitlab-ctl tail`命令帮助您查找堆栈跟踪。对我来说，我发现了这个堆栈跟踪：

```
==> /var/log/gitlab/gitlab-rails/production.log <==

Net::LDAP::Error (No route to host - connect(2) for 10.10.10.12:389):
  /opt/gitlab/embedded/lib/ruby/gems/2.3.0/gems/net-ldap-0.16.0/lib/net/ldap/connection.rb:72:in `open_connection'
... 
```

对主机值进行更改`/etc/gitlab/gitlab.rb`

```
gitlab_rails['ldap_servers'] = YAML.load <<-'EOS'
   main: 
     label: 'My LDAP'
     # this was an IP address
     # host: '10.10.10.12'
     host: 'internal-ldap-server' # this is the fix
     port: 389 
```

修改上面的config文件后，一定要重新配置gitlab

```
gitlab-ctl reconfigure 
```

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2019-09-14T19:33:41.853

可能是网络问题。

尝试做`ssh -vvvT git@gitlab.com`. 如果服务器意外挂起，则可能是网络连接不可靠。

将以下内容放入您的 ~/.ssh/config

```
IPQoS lowdelay throughput 
```

* * *

## 回答 #33

> 赞同：1
> 
> 时间：2019-11-29T18:04:54.003

就我而言，我试图用`sudo`. 根据 Github 的文档，您不应将 sudo 与 git clone 一起使用： [https ://help.github.com/en/github/authenticating-to-github/error-permission-denied-publickey#should-the-sudo-command - 与 git 一起使用](https://help.github.com/en/github/authenticating-to-github/error-permission-denied-publickey#should-the-sudo-command-be-used-with-git)

我所做的是授予当前用户编辑目录的权限（Debian 9）：

```
chown myuser:root . 
```

然后在没有克隆的情况下`sudo`成功了。

* * *

## 回答 #34

> 赞同：1
> 
> 时间：2020-04-11T07:43:29.597

如果您在我的情况下设置了**recievepack** 或**uploadpack** ，我在错误设置后得到了错误

```
receivepack = powershell git receive-pack 
```

在我的情况下`.git/config`

您可以按照下面的答案删除它们

[https://stackoverflow.com/a/26207308/7668448](https://stackoverflow.com/a/26207308/7668448)

或者直接修改`.git/config`

* * *

## 回答 #35

> 赞同：1
> 
> 时间：2020-04-20T06:21:55.887

有时您需要使用带有`ssh://`方案的完整 URL：

```
ssh://git@yourhost:port/path/repo.git 
```

或指定端口：

```
ssh://git@yourhost:port/path/repo.git 
```

对我来说，它解决了这个问题。

* * *

## 回答 #36

> 赞同：1
> 
> 时间：2020-06-04T02:43:50.523

遇到这个，因为我在中国有防火墙......

> kex_exchange_identification：连接被远程主机关闭致命：无法从远程存储库读取。
> 
> 请确保您具有正确的访问权限并且存储库存在。

* * *

## 回答 #37

> 赞同：1
> 
> 时间：2020-06-11T15:20:15.670

就我而言，问题及其解决方案就写在我面前。那天早些时候，我编辑了 /etc/ssh/ssh_config 文件并添加了一些键。错误说：

```
/etc/ssh/ssh_config: line 52: Bad configuration option: allowusers
/etc/ssh/ssh_config: terminating, 1 bad configuration options
fatal: Could not read from remote repository. 
```

我删除了`allowusers`密钥，它的价值和一切都按预期工作。

* * *

## 回答 #38

> 赞同：1
> 
> 时间：2020-10-12T17:23:59.077

不是 OP 的问题，但如果您在**GitHub 组织/团队**中工作，您可能没有存储库的写入权限。不幸的是，git 没有显示更具体的权限错误。就我而言，我正在开发一个私有存储库，并获得了“分类”或“读取”访问权限。

有关每个权限级别的存储库访问的更多信息，请参阅[GitHub 文档](https://docs.github.com/en/free-pro-team@latest/github/setting-up-and-managing-organizations-and-teams/repository-permission-levels-for-an-organization)。

在 GitHub 上更改此设置的链接是`https://github.com/orgs/ORGANISATION_NAME/teams/TEAM_NAME/repositories`，您可以在其中更改授予团队的权限。

[![github 组织的团队的存储库选项卡的屏幕截图](../Images/8db183f266dcb2d297b053d43a2786d1.png)](https://i.stack.imgur.com/lYY64.png)

* * *

## 回答 #39

> 赞同：1
> 
> 时间：2020-10-20T11:03:23.797

我有同样的问题并通过更新到最新的 git 版本来解决

* * *

## 回答 #40

> 赞同：1
> 
> 时间：2021-10-17T02:16:26.483

就我而言，bitbucket 的 web ssh 密钥设置 UI 令人困惑。

存储库设置 -> 访问密钥 -> 添加密钥：错误

个人设置 -> SSH 密钥 -> 添加密钥：好的

公钥注册屏幕是互斥的。您必须仅在一处注册公钥。将它们统一在一个屏幕上似乎很好。

* * *

## 回答 #41

> 赞同：0
> 
> 时间：2014-11-08T16:27:28.303

对于那些在私人远程仓库中遇到此问题的人。确保您已接受远程服务器上的 Xcode 协议：我们花了数周时间才找到此修复程序

从命令行使用此命令：sudo xcodebuild -license

* * *

## 回答 #42

> 赞同：0
> 
> 时间：2015-05-06T07:12:00.933

我只是想补充一下这个问题。我设置了 Git 以使用 PLink 和 Pageant 进行身份验证，但我也遇到了错误`FATAL ERROR: Disconnected: No supported authentication methods available (server sent: publickey)`。我打开了Pageant，但错误仍然出现。问题？我没有在 Pageant 中加载私钥（要添加密钥，请按照[这些说明](http://the.earth.li/~sgtatham/putty/0.60/htmldoc/Chapter9.html#pageant-mainwin-addkey)进行操作）。就这么简单。

* * *

## 回答 #43

> 赞同：0
> 
> 时间：2015-06-14T18:36:23.727

我只是想分享一下我找到了一个简单的解决方法：

**拒绝访问。致命：无法从远程存储库中读取。请确保您具有正确的访问权限并且存储库存在。**

只需从 gitlab 注销并再次登录。然后应该解决这些问题。

* * *

## 回答 #44

> 赞同：0
> 
> 时间：2015-10-14T14:50:11.810

使用 putty/pageant 时，请确保您没有忘记将正确的 SSH 密钥添加到 pageant，否则会出现此错误。呃

* * *

## 回答 #45

> 赞同：0
> 
> 时间：2016-05-24T06:05:23.507

转到 MINGW32 终端输入以下命令： git branch --set-upstream-to=origin/(branch Name)

* * *

## 回答 #46

> 赞同：0
> 
> 时间：2016-08-30T11:21:14.093

如果仍然出现同样的错误，请确保在 git settings->ssh tab->ssh client to use 设置为**openSSH**[![在此处输入图像描述](../Images/c3a9b0dbc2736eb1663f9b523620321d.png)](https://i.stack.imgur.com/OH5CE.png)

* * *

## 回答 #47

> 赞同：0
> 
> 时间：2017-07-31T04:38:13.733

根据我的经验，出现**此问题**的原因之一是您的**互联网连接不稳定**。

* * *

## 回答 #48

> 赞同：0
> 
> 时间：2017-08-08T09:26:54.777

我遇到了同样的问题；只需您可以在命令窗口上运行它：

git 远程添加源[https://your/repository/url](https://your/repository/url)

* * *

## 回答 #49

> 赞同：0
> 
> 时间：2017-08-24T01:15:25.913

除了“我有同样的问题并且......”之外，我还在 Windows 中通过 Ming32 (git bash) shell 使用 git。

在我的情况下，repo 要求我输入密码，而不是使用 SSH 密钥，但它*没有*提示输入密码，只是说“致命：无法读取...”，尽管我可以使用 plink 和 ssh 正常 SSH ，并且设置了两个已知主机密钥。

我在这里和其他 SO 中尝试了大部分建议。

最后我发现**它在 Powershell 中运行良好**，但在 git bash 中运行良好，没有任何更改或更正。

* * *

## 回答 #50

> 赞同：0
> 
> 时间：2018-01-16T03:33:12.573

我建议检查您配置的所有遥控器`git remote -v`如果您将 repo 配置为已删除的遥控器，您将收到此错误消息： `fatal: Could not read from remote repository. Please make sure you have the correct access rightsand the repository exists.`即使尝试推送或拉到另一个（现有）遥控器。因此，如果您有一个已删除的遥控器，您可以删除，`git remote remove name-of-remote-to-remove`之后您可以毫无问题地推送或拉入现有的遥控器。

* * *

## 回答 #51

> 赞同：0
> 
> 时间：2018-12-13T18:34:53.730

我在尝试将代码从工作中推送到我的个人 git 时遇到此错误 - 默认指向工作 git。所以我按照以下步骤操作：

1.  转到我的个人 git 帐户并使用默认设置创建 repo
2.  在终端上， git remote add origin git@github.com:/.git
3.  git push --set-upstream origin master，确保 origin 位于上游，并且只能使用 git push 进行下一次提交。

出于某种原因，没有其他方法对我有用。希望这对使用 2 个或更多 git 帐户的人有所帮助。

* * *

## 回答 #52

> 赞同：0
> 
> 时间：2019-09-09T09:16:31.547

我通过输入多次错误密码遇到这个问题。

所以我必须将 MaxAuthTries 更改为更大的数字：

打开`sshd_config`服务器端：

```
vim  /etc/ssh/sshd_config 
```

更改 MaxAuthTries 编号：

```
MaxAuthTries 100    # there I change to 100, you can change to a bigger than your current tries number 
```

* * *

## 回答 #53

> 赞同：0
> 
> 时间：2021-10-02T12:15:54.547

我的解决方案实际上很简单。我只需要复制并放置这个问题“请输入‘是’、‘否’或指纹”中的指纹，而不是直接按回车键。

* * *

## 回答 #54

> 赞同：0
> 
> 时间：2021-12-23T00:40:30.360

我有同样的错误，但如果你再次传递命令，你会注意到你被提示：`Are you sure you want to continue connecting (yes/no)?`，并且通过写“yes”*然后*点击`enter`它应该可以解决。

* * *

## 回答 #55

> 赞同：0
> 
> 时间：2021-12-30T11:21:44.643

在极少数情况下，您会收到“致命：无法从远程存储库读取”错误，例如

```
[user@example.com repo]$ git fetch --all --prune
Fetching origin
exec request failed on channel 0
fatal: Could not read from remote repository. 
```

当 Git 服务器文件系统已满时。要验证这一点，请运行：

```
ssh -v ssh://git@yourhost/path/repo.git 
```

如果服务器这样回复：

```
...
debug1: Authentications that can continue: publickey,gssapi-keyex,gssapi-with-mic,password
debug1: Next authentication method: publickey
debug1: Offering public key: /home/...
SHA256:...
debug1: Server accepts key: /home/...
SHA256:...
Authenticated to linux-git.....com ([xxx.xxx.xx.xx]:xx) using "publickey".
debug1: channel 0: new [client-session]
debug1: Requesting no-more-sessions@openssh.com
debug1: Entering interactive session.
debug1: pledge: filesystem full
...
debug1: Remote: PTY allocation disabled.
PTY allocation request failed on channel 0
shell request failed on channel 0 
```

那么服务器上的磁盘空间就用完了。

我知道这个答案不会得到很多赞成票；为了完整起见添加它。

PS也可以使用类似的东西

```
GIT_SSH_COMMAND="ssh -v" git pull 
```

诊断问题。

* * *

## 回答 #56

> 赞同：0
> 
> 时间：2022-02-11T23:29:09.713

就我而言，我在做一个开源贡献时没有分叉项目就拉了这个项目，这让我陷入了这个错误。

还要确保使用此命令从终端将公共 ssh 密钥添加到远程 ssh 密钥

```
add-ssh /keyPath 
```

例如：我已经将我的公钥保存在 github 文件夹中，这个文件夹在一个隐藏的 ssh 文件夹中，在主目录中隐藏了 ssh 文件夹，所以，ssh 密钥文件路径是这样的

```
~/.ssh/github/id-rsa 
```

所以终端中将本地 ssh 密钥添加到远程的命令是

```
add-ssh ~/.ssh/github/id-rsa 
```

* * *

## 回答 #57

> 赞同：0
> 
> 时间：2022-03-01T14:35:35.587

在这里对我有用的非常简单的解决方案 =>[使用端口 443 的 HTTPS](https://gist.github.com/Tamal/1cc77f88ef3e900aeae65f0e5e504794)

* * *

## 回答 #58

> 赞同：-5
> 
> 时间：2019-09-13T16:19:42.953

我通过使用 sudo su 切换到 root 解决了这个问题。

* * *

## 回答 #59

> 赞同：-34
> 
> 时间：2017-08-08T02:33:03.070

我也遇到了同样的问题，经过多次尝试，我发现它们无效。最后，我用

```
$ git push origin master 
```

有效！

# c# - .net Profiler 收集长期指标？

> ID：13509295
> 
> 赞同：2
> 
> 时间：2012-11-22T09:18:29.267
> 
> 标签：c#, c++, profiler

我们有一个客户端/服务器应用程序，我想对它们进行分析以创建指标，例如“平均登录时间为 xx 毫秒，xxx 为最大值，x 为最小值，自 yyyy 以来总共有 xx 次登录”等等。

我知道 Equatec 和 ANTS 分析器（我都非常喜欢）。但我认为他们不提供我需要的功能。

当然，我可以自己编写必要的函数，但我认为 ANTS 或 Equatec 自己可以很好地做到这一点，必须有某种方法来使用该功能。

我需要的：

*   尽可能多地收集有关函数调用的数据，同时仍保持合理的性能

*   缩放就像在（取消）选择我不想监视的代码路径时一样好

*   将所有收集的数据保存在数据库中，可以是本地数据库，也可以是远程 SQL 数据库

*   如果该工具可以自己创建像 ANTS 这样的图表，那会很酷，但原始数据就足够了

*   代码是用 C# 3.5（服务器和客户端<->服务器通信）和 C++（客户端 GUI）编写的。也可以监控 C++ 代码（C# 嵌入为 COM 对象），但目前，监控 C# 就足够了

这不一定是免费的，但必须进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:51:05.727

Profiler 更加以代码/功能为中心，并且对性能有很大的影响。此外，不可能将带有您的代码的分析器推出给您的用户。
我认为您应该考虑为您的代码使用像 log4net 这样的日志记录框架，然后配置日志记录以将结果保存到可用于分析性能数据的数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T09:55:14.180

以下是我现在能想到的几个选项：

1.  编写自己的代码，专门为要分析的函数计时（显然是最简单的选项）。
2.  使用性能计数器 ( [System.Diagnostics.PerformanceCounter](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounter%28v=vs.90%29.aspx) )。
3.  [使用.NET Profiling API](http://msdn.microsoft.com/en-us/magazine/cc301725.aspx)滚动您自己的分析器
4.  使用性能工具包中称为[Xperf](http://msdn.microsoft.com/en-us/performance/cc825801.aspx)的低级内置 OS 分析器。

编辑：我怎么能忘记这个小宝石！

[MiniProfiler](http://miniprofiler.com/)可以像这样包裹你的代码：

```
var profiler = MiniProfiler.Current; // it's ok if this is null
using (profiler.Step("Doing complex stuff")){
    using (profiler.Step("Step A"))
    { // something more interesting here
        Thread.Sleep(100);
    }

    using (profiler.Step("Step B"))
    { // and here
        Thread.Sleep(250);
    }
} 
```

# maven - 如何配置nexus维护任务？

> ID：13509300
> 
> 赞同：0
> 
> 时间：2012-11-22T09:18:43.967
> 
> 标签：maven, nexus

[这个 SO answer](https://stackoverflow.com/a/1650403/7581)有一些关于维护内部 maven 存储库的好技巧，但在细节上相当模糊。特别是，答案说

> 将 Nexus 配置为对内部存储库执行以下操作
> 
> 1.  定期删除旧快照
> 2.  发布时删除快照

但我还没有弄清楚如何做到这一点。我可以在 nexus 配置中的哪个位置进行这些更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:41:59.907

[Nexus 书籍“管理计划任务”](http://www.sonatype.com/books/nexus-book/reference/confignx-sect-managing-tasks.html)中对此进行了描述。

不幸的是，我似乎无法直接链接到快照删除任务的描述。该部分称为“从存储库中删除快照”。

# c# - 如何在 ASP.NET 中使用 jQuery 使我的 Div 可拖动

> ID：13509303
> 
> 赞同：1
> 
> 时间：2012-11-22T09:18:56.023
> 
> 标签：c#, javascript, asp.net, html, jquery-ui-draggable

我有一个带有主站点和内容站点的 ASP.NET 应用程序。在其中一个内容站点中，我有一个带控件的 Div，我想尝试使用 jQuery 使其可拖动，但由于 asp 中的控件 ID，我不知道如何在 ASP.NET 中做到这一点。

这是我的代码：

主站：

```
...
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>

    <link href="Styles/jquery-ui.css" rel="stylesheet" type="text/css" />
    <script src="Script/jquery-1.8.2.js" type="text/javascript"></script>
    <script src="Script/jquery-ui.js" type="text/javascript"></script>

    <script>

        $(function () {
            $("#create_box").draggable();
        });

       </script>

</head>
<body>
    <form id="mainform" runat="server">
    <div class="gastzugang">
        <asp:ContentPlaceHolder ID="lw_header" runat="server">
            <!--Header-->
        </asp:ContentPlaceHolder>
         <asp:ContentPlaceHolder ID="lw_content" runat="server">
             <!--Content--> 
        </asp:ContentPlaceHolder>
         <asp:ContentPlaceHolder ID="lw_footer" runat="server">
            <!--Footer-->
        </asp:ContentPlaceHolder>
    </div>
    </form>
</body>
</html> 
```

我的内容网站：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/master.Master" AutoEventWireup="true" CodeBehind="CreateUser.aspx.cs" Inherits="lw_gastzugang.CreateUser" %>

<asp:Content ID="Content2" ContentPlaceHolderID="lw_content" runat="server">
    <div class="createuser">

        <div class="create_box">
            <div class="newUser">

        Benutzer Anlegen <br/>
        <br/>

//Here are my Controls

        <br/>
        <asp:Button ID="btnAnlegen" runat="server" Text="Benutzer anlegen" 
                    onclick="btnAnlegen_Click" />

             </div>
        </div>

    </div>

</asp:Content> 
```

我想要这个：

[http://jqueryui.com/droppable/](http://jqueryui.com/droppable/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T09:19:54.197

只需使用**jQuery UI draggable**。

制作

```
ClientIDMode="static" in the asp.net Tag 
```

或使用

```
<script type="text/javascript">
    $('#'+'<%=lw_content.ClientID%>').draggable();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:24:48.143

你可以看一下hammer.js，它涵盖了一个“拖动”风格的事件：

[https://github.com/EightMedia/hammer.js](https://github.com/EightMedia/hammer.js)

拖动示例位于：

[http://eightmedia.github.com/hammer.js/drag/](http://eightmedia.github.com/hammer.js/drag/)

现在我对 ASP.NET 不太了解，但我会尝试将拖动行为应用于任何具有 .draggable 类的东西。

希望能有所帮助！

# windows - 如何使 Tools->Git->Push 在 Qt Creator 中工作

> ID：13509307
> 
> 赞同：0
> 
> 时间：2012-11-22T09:19:04.587
> 
> 标签：windows, git, qt-creator

当我在 Qt Creator 中尝试 Tools->Git->Push 时，我得到了

```
fatal: remote error: Invalid username/password.
You may need to use your generated googlecode.com password; see https://code.google.com/hosting/settings
The command 'C:\Program Files\Git\cmd\git.exe' terminated with exit code 128. 
```

我有远程存储库的密码，但在 Qt Creator 的设置中找不到输入密码的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T05:48:47.283

我有同样的问题，唯一的解决方案是在终端中运行它。我没有找到更好的方法。如果你找到更好的方法，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-25T08:12:58.180

我在这里找到了解决问题的解决方案：

[https://stackoverflow.com/a/70101716/7511257](https://stackoverflow.com/a/70101716/7511257)

这对我来说很容易：

`git push --set-upstream origin master`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-11T23:52:31.657

您可以使用凭证助手告诉 Git 在每次与 GitHub 对话时记住您的 GitHub 用户名和密码。

您最初需要从 cmd 行进行设置，但随后您的密码将被缓存，并且 Qt Creator -> 远程存储库 -> 推送将按预期工作。

1.  从终端设置 Windows 凭据助手：

    `git config --global credential.helper wincred`

2.  出现提示时执行推送并输入您的密码：

    `git push`

您的密码现在被缓存以供将来所有推送操作使用，因此从 Qt Creator 推送也可以使用。

# c#-2.0 - 如何在 C# 中生成固定的随机数？

> ID：13509310
> 
> 赞同：1
> 
> 时间：2012-11-22T09:19:16.617
> 
> 标签：c#-2.0

我需要随机化固定数字，例如 1、3、5、7、10。我的输出将只有 1,3,5,7 或 10。请帮助我！谢谢！有没有办法随机化固定数字或用户输入的数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:23:42.887

从 0-4 中获取一个随机数，然后从`{ 1, 3, 5, 7, 10 }`.

```
int[] select = new int[] { 1, 3, 5, 7, 10 };
var rand = new Random();
int num = select[rand.Next(5)]; 
```

# android - 如何在andorid中使用xml文件中的宽度和高度？

> ID：13509312
> 
> 赞同：0
> 
> 时间：2012-11-22T09:19:18.457
> 
> 标签：android, android-layout

我已经以编程方式确定了屏幕的宽度和高度。现在我想在我的 xml 文件中使用该宽度和高度。请给我一个实现这一目标的方法。

这是我的活动课。

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        DisplayMetrics display = this.getResources().getDisplayMetrics(); 
        float width = display.widthPixels;
        float height = display.heightPixels;
        Toast.makeText(TestProjectActivity.this, "width and height is: "+width + ": "+height, Toast.LENGTH_LONG).show();

        float w = convertPixelsToDp(width, this);
        float h = convertPixelsToDp(height, this);

        Toast.makeText(TestProjectActivity.this, "DP" +w+":  "+h, Toast.LENGTH_LONG).show();
    }

    public static float convertPixelsToDp(float px,Context context){
        Resources resources = context.getResources();
        DisplayMetrics metrics = resources.getDisplayMetrics();
        float dp = px / (metrics.densityDpi / 160f);
        return dp;
    } 
```

现在我想将**`w`**and发送**`b`**到 xml 以进行进一步的工作。

有什么帮助会得到帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:32:50.683

您不能将信息传递回 XML。最多，您可以使用您的小部件`findViewById`，然后以编程方式设置小部件大小。

> 我正在开发在任何屏幕设备上运行的应用程序。所以屏幕大小的问题。如果我将 textview 的宽度设置为 200dp，那么它在我的设备上可以，但在其他设备上，它不会出现。所以我只想要一种方法，我可以在我的 XML 中使用上面检测到的宽度和高度

然后你应该使用 a`LinearLayout`给你的图像一个相对于可用宽度的大小（比如屏幕宽度的百分比

这是您的 XML 的外观（伪代码）

```
LinearLayout (layout_width: match_parent, layout_height: wrap_content)
  ImageView (layout_width: 0dip, layout_height: wrap_content, layout_weight: 50)
  ImageView (layout_width: 0dip, layout_height: wrap_content, layout_weight: 50) 
```

在上面的示例中，每个图像视图将占据屏幕宽度的 50%，无论像素数是多少。

我认为你需要谷歌一个关于 Android 布局的好教程。

# android - 请你帮我从 Android SDK 中理解这些信息

> ID：13509318
> 
> 赞同：2
> 
> 时间：2012-11-22T09:19:34.063
> 
> 标签：android

我一直在重读这篇文章，无法理解它，你能解释一下吗？

> 通常不需要子类化 Application。在大多数情况下，静态单例可以以更模块化的方式提供相同的功能。如果您的单例需要全局上下文（例如注册广播接收器），则可以为检索它的函数提供一个 Context，该上下文在首次构建单例时在内部使用 Context.getApplicationContext()。

来自[http://developer.android.com/reference/android/app/Application.html](http://developer.android.com/reference/android/app/Application.html)

我不明白为什么不需要子类化应用程序。我经常对它进行子类化，这样我就可以从任何地方访问应用程序上下文。那么，根据这份文件，正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:23:02.757

我认为这个想法是**避免重载 Application 类**，而是让多个小型单例类专注于不同的问题。

这可能就是他们所说的“更模块化的方式”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:21:48.977

通常人们制作“应用程序”类，以便他们可以在其中存储对象以保持应用程序的整个生命周期或在活动之间转移。我认为那条线的意思是，简单地制作它`static`会以更“模块化”的方式实现相同的目的。

至于应用程序上下文，您是否已经知道`getApplicationContext()`？

# asp.net - ArgumentException：传入的未终止字符串

> ID：13509324
> 
> 赞同：3
> 
> 时间：2012-11-22T09:20:01.530
> 
> 标签：asp.net

我最近在我网站的一个页面中遇到了这个错误。

```
[ArgumentException: Unterminated string passed in. (26): {"selectedIndexes":["0"],"]
at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializeString()
at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializeMemberName()
at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializeDictionary(Int32\ depth)
at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializeInternal(Int32\ depth)
at System.Web.Script.Serialization.JavaScriptObjectDeserializer.BasicDeserialize(String\ input, Int32 depthLimit, JavaScriptSerializer serializer)
at System.Web.Script.Serialization.JavaScriptSerializer.Deserialize(JavaScriptSerializer\ serializer, String input, Type type, Int32 depthLimit)
at System.Web.Script.Serialization.JavaScriptSerializer.DeserializeObject(String\ input)
at Telerik.Web.UI.RadCompositeDataBoundControl.LoadPostData(String postDataKey,\ NameValueCollection postCollection)
at Telerik.Web.UI.RadCompositeDataBoundControl.System.Web.UI.IPostBackDataHandler.LoadPostData(String\ postDataKey, NameValueCollection postCollection)
at System.Web.UI.Page.ProcessPostData(NameValueCollection postData, Boolean\ fBeforeLoad)
at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint,\ Boolean includeStagesAfterAsyncPoint)

[HttpUnhandledException: Exception of type 'System.Web.HttpUnhandledException' was thrown.]
at System.Web.UI.Page.HandleError(Exception e)
at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint,\ Boolean includeStagesAfterAsyncPoint)
at System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint,\ Boolean includeStagesAfterAsyncPoint)
at System.Web.UI.Page.ProcessRequest()
at System.Web.UI.Page.ProcessRequestWithNoAssert(HttpContext context)
at System.Web.UI.Page.ProcessRequest(HttpContext context)
at ASP.pages_appeal_appealaction_aspx.ProcessRequest(HttpContext context)
at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

此异常的原因可能是什么？任何想法如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-08T20:04:25.507

是的。当 ASP.NET 系统接收到请求，将其路由到您的处理程序并且 ModelBinder 接管以将传入的值映射到处理程序中的参数时，会发生此错误。当其中一个参数是字符串并且该字符串已启动但未终止时，它会从 System.String.DeserializeString() 方法抛出 System.ArgumentException。

你有两个选择。

1.  在发送之前用 JavaScript 修复浏览器上的字符串数据。（呃）。
2.  创建一个自定义模型绑定器以优雅地处理异常并发送回 500 系列 HTTP 错误，或者更好的是，以可预测的方式修复数据。这种修复并不总是可能的，就像在声音文件、图像、电影或其他 base64 编码的 blob 中一样。

以下是如何做 #2 -[创建自定义模型绑定器](https://docs.microsoft.com/en-us/aspnet/core/mvc/advanced/custom-model-binding)。

# facebook - 如何在我的 ASP.NET 网站（没有 fb 应用程序）中检查用户是否是任何页面的粉丝（或不是）？

> ID：13509325
> 
> 赞同：1
> 
> 时间：2012-11-22T09:20:00.687
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-javascript-sdk, facebook-page

在我的 ASP.NET 站点中，假设我有 facebook **user_id**和**page_id**并且想要确定用户是否喜欢页面。我找到了一个创建应用程序的示例，然后检查用户喜欢。我不希望这样，首先用户登录到应用程序，然后检查。我可以在没有应用程序的情况下检查这个吗？我该怎么办？或其他建议请.. 如果没有应用程序是不可能的，那么，我该如何隐藏应用程序登录窗口？ **我希望用户不要使用任何应用程序，不知道我检查他的喜好。** 我需要这样的结果：**是**或**否** （对不起我的英语不好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:08:47.213

facebook 扇门，别忘了在你的页面中包含 javascript sdk

```
FB.getLoginStatus(function (response) {
    if (response.status == 'connected') {
        var user_id = response.authResponse.userID;
        var page_id = "00"; //page id of the page that should be liked
        var fql_query = "SELECT uid FROM page_fan WHERE page_id =" + page_id + " and uid=" + user_id;
        var the_query = FB.Data.query(fql_query);

        the_query.wait(function (rows) {

            if (rows.length == 1 && rows[0].uid == user_id) {
                //user like page

            }

            else {
                //user not like page

            }
        });
    } else {
        //user not logged in

    }
});

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:34:07.057

将其放入 .js 文件中并将其命名为 facebookscript.js 之类的名称，然后 `<head> <script src="facebookscript.js" type="text/javascript"></script> </head>`像这样将其包含在其中。

看看这个页面如何包含 javascript sdk：[https](https://developers.facebook.com/docs/reference/javascript/) ://developers.facebook.com/docs/reference/javascript/ 否则此代码将不起作用。

如果用户未登录或未获得身份验证...您的应用程序将它们发送到登录功能，如下所示：

```
function login() {
FB.login(function (response) {
    if (response.authResponse) {
        console.log('Access Token: ' + response.authResponse.accessToken);
    } else {
        console.log('User cancelled login or did not fully authorize.');
    }
}, { scope: 'email' });
} 
```

将登录功能放在我在上一条评论中放置评论标签“//用户不喜欢页面和//用户未登录”的位置。

# sql - SQL Server 2008：每个数据库文件的 I/O 等待时间

> ID：13509326
> 
> 赞同：8
> 
> 时间：2012-11-22T09:20:03.100
> 
> 标签：sql, sql-server, sql-server-2008

我正在运行 SQL Server 2008 企业版，并希望通过动态管理视图（从 SQL 内部）监控以下性能指标：

> 滑动时间窗口的**每个数据库文件**的平均/最大读/写**I/O 等待**时间（以毫秒为单位）。

 **即：每个数据库文件 4 个数字：平均读取等待、最大读取等待、平均写入等待、最大写入等待。全部以毫秒为单位，并且全部用于一些理智的（甚至更好的可配置的）滑动时间窗口。

我怎样才能做到这一点？

PS：我有 VIEW SERVER STATE 权限，可以阅读`sys.dm_os_performance_counters`，`sys.database_files`等`sys.dm_io_virtual_file_stats`

PS2：至少有 1 个工具（用于 SQL Server 的 Quest Spotlight 7）能够为每个数据库文件提供 Max I/O Wait（以毫秒为单位）。所以必须有某种方式..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T18:09:38.777

下面是 SSMS 的 Activie Monitor 使用的查询。他们将 io_stall 字段标记为总等待时间。您可以添加`fs.io_stall_read_ms`and`fs.io_stall_write_ms`字段以获取读/写特定数字。

```
SELECT     
    d.name AS [Database], 
    f.physical_name AS [File], 
    (fs.num_of_bytes_read / 1024.0 / 1024.0) [Total MB Read], 
    (fs.num_of_bytes_written / 1024.0 / 1024.0) AS [Total MB Written], 
    (fs.num_of_reads + fs.num_of_writes) AS [Total I/O Count], 
    fs.io_stall AS [Total I/O Wait Time (ms)], 
    fs.size_on_disk_bytes / 1024 / 1024 AS [Size (MB)],
    fs.io_stall_read_ms
FROM sys.dm_io_virtual_file_stats(default, default) AS fs
INNER JOIN sys.master_files f ON fs.database_id = f.database_id AND fs.file_id = f.file_id
INNER JOIN sys.databases d ON d.database_id = fs.database_id; 
```

此查询只为您提供总数。您必须在某个时间间隔运行它并将结果记录在带有时间戳的临时表中。然后，您可以根据需要查询此表以获取您的最小值/最大值/平均值。滑动时间窗口只是您在该表中保留多少数据以及您查询的时间段的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T21:42:49.490

您将遇到的问题是 SQL 不一定会跟踪您希望获得的每个文件的详细程度。您可能还必须使用性能监视器。随着时间的推移，您将不得不使用组合方法查看两个性能监视器以获取有关磁盘上 I/O 的详细信息。以及前面提到的SQL监控技术，看得到一个更完整的全貌。我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T04:24:31.653

您可以使用一些脚本来提取指标。我已启用 SQL Server 8 中内置的数据收集/数据收集服务器。它从多个实例收集指标并将它们存储在您指定为收集器的 mssql 服务器中。为每个实例提供的报告足以满足大多数目的。我确信有超过数据收集器功能的第 3 方工具，因为它只报告性能/磁盘使用情况/和查询统计信息而没有性能提示。

这为您提供了日志和数据文件的数据文件增长预测和增长事件摘要，但是，我不知道它是否会为您提供您正在寻找的每个文件或文件组的指标:)

注意：如果您使用数据收集仓库，您应该考虑随着大小的增长定期重建索引。它收集大约。我的 senario 中每天 20 MB 的数据。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-30T02:59:09.267

请参阅以下内容以收集每个文件的等待统计信息[http://msdn.microsoft.com/en-us/library/ms187309(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms187309(v=sql.105).aspx)**

# ruby-on-rails - Rails 对资产的强排序要求

> ID：13509329
> 
> 赞同：0
> 
> 时间：2012-11-22T09:20:22.890
> 
> 标签：ruby-on-rails, ruby-on-rails-3, assets

这是mobile.js

```
//= require jquery
//= require iui
//= require faye-updater
//= require anonymous-chat
//= require anonymous-vote
//= require_self 
```

这是我包含脚本的方式

```
<%= content_for :head do %>
<%= javascript_include_tag "#{Settings.faye.address}/client.js" %>
<%= javascript_include_tag "mobile" %>
<% end %> 
```

以及我在重新编译资产后得到的：mobile....js 从

```
function launch_faye_updater.... 
```

这是 faye-updater.js 中的函数，它必须包含在 jquery 和 iui 之后。由于包含顺序错误，它不起作用。如何使 Rails 以正确的顺序包含资产？

UPD：这是在生产模式 Rails 3.2.8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:32:03.493

从哪里调用launch_faye_updater？

我猜你可以通过移动这条线来解决这个问题：

```
<%= javascript_include_tag "#{Settings.faye.address}/client.js" %> 
```

低于其他包括，如下所示：

```
<%= javascript_include_tag "mobile" %>
<%= javascript_include_tag "#{Settings.faye.address}/client.js" %> 
```

（您可能还需要考虑创建一个新的已编译 JS 文件，其中包含这两个文件。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T15:23:01.763

我的 jquery、引导程序和应用程序依赖项也有同样的问题。您可以在 Rails 3.1+ 中按首选顺序交付所有 JS 模块。在您的示例中，您希望在 mobile.js 之前包含 jquery.js。

首先，从您的 mobile.js 文件**中删除 jquery 。**

然后您需要将以下代码行添加到您的*application.rb*：

```
config.assets.precompile += ['mobile.js', 'jquery.js', 'jquery_ujs.js'] 
```

此刻，您已经预编译并准备好使用所有内容。您的 mobile.js 不包含 jquery，因此您可以按您喜欢的顺序包含它：

```
<%= javascript_include_tag "jquery" %> 
<%= javascript_include_tag "mobile" %> 
```

就是这样！

# java - JavaFX - 使用 mediaplayer 和 mediaview 播放视频

> ID：13509331
> 
> 赞同：1
> 
> 时间：2012-11-22T09:20:31.337
> 
> 标签：java, media-player, javafx-2, scenebuilder

这就是我在控制器中的内容：

```
@FXML
private MediaView mediaView; 
```

在按下处理按钮的方法中，我得到了文件选择器：

```
 File file = fileChooser.showOpenDialog(null);

    if(file != null){
        initPlayer(file.toURI().toString());
    } 
```

这是方法initPlayer：

```
private void initPlayer (String uri) {
        if (uri == null)
            return;
        if (mediaPlayer != null) {
            mediaPlayer.stop();
            mediaPlayer = null;
        }

        Media media = new Media(uri);
        mediaPlayer = new MediaPlayer(media);
        mediaPlayer.setAutoPlay(true);
        mediaView = new MediaView(mediaPlayer);
        mediaPlayer.setOnReady(new Runnable() {
            @Override
            public void run() {
                // TODO Auto-generated method stub
            }
        });
    } 
```

这是我在场景生成器中创建的视图中的代码的一部分：

```
<Pane layoutX="80.0" layoutY="14.0" prefHeight="480.0" prefWidth="640.0">
          <MediaView fx:id="mediaView" fitHeight="480.0" fitWidth="640.0" />
        </Pane> 
```

当我选择文件时，我听到声音但看不到视频。这段代码有什么问题？我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T06:08:57.287

当您加载 FXML 文件时 ，将创建一个`MediaView`实例`FXMLLoader`并将其放置在您的文件中。`Pane`

你不需要创建一个新的`MediaView`，当你这样做时，它不会被附加到场景中，这就是你什么都看不到的原因。

代替：

```
 mediaView = new MediaView(mediaPlayer); 
```

写：

```
 mediaView.setMediaPlayer(mediaPlayer); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-27T12:54:09.183

如果您只听到声音并且您使用的是 Windows XP 计算机，则可能缺少编解码器。

请参阅[http://docs.oracle.com/javafx/2/system_requirements_2-2/jfxpub-system_requirements_2-2.htm](http://docs.oracle.com/javafx/2/system_requirements_2-2/jfxpub-system_requirements_2-2.htm)

或者你可以检查播放器提供的错误，如果有的话

```
mediaPlayer.setOnError(new Runnable() {    
    @Override
    public void run() {
        String message = mediaPlayer.errorProperty().get().getMessage();
        System.out.println(message);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-06T07:25:57.220

在您的 Fxml 中，您需要

```
<FlowPane alignment="CENTER" columnHalignment="CENTER" layoutX="9.0" layoutY="48.0" AnchorPane.bottomAnchor="5.0" AnchorPane.leftAnchor="9.0" AnchorPane.rightAnchor="5.0" AnchorPane.topAnchor="48.0">
<children>
<MediaView fx:id="mediaView">
</MediaView>
</children>
</FlowPane> 
```

在你的控制器中：

```
 @FXML    private MediaPlayer mediaPlayer;
 @FXML    private Duration duration;
 @FXML    private MediaView mediaView;
 ....

 @Override
    public void initialize(URL url, ResourceBundle rb) {
        try {
            init();
        } catch (MalformedURLException ex) {
            Logger.getLogger(MainOnlineController.class.getName()).log(Level.SEVERE, null, ex);
        }

    }

  public void init() throws MalformedURLException { 
        ....
        mediaPlayer = new MediaPlayer(media);
        mediaPlayer.setAutoPlay(true);
        mediaView.setMediaPlayer(mediaPlayer);
        mediaPlayer.setOnPlaying(new Runnable() {
                    public void run() {
                        if (stopRequested) {
                            mediaPlayer.pause();
                            stopRequested = false;
                        } else {
                            playButton.setText("||");
                        }
                    }
                });
    ...other methods for mediaPlayer 
```

# php - 内存不足和允许的*字节内存大小之间的差异

> ID：13509342
> 
> 赞同：2
> 
> 时间：2012-11-22T09:21:09.310
> 
> 标签：php, mysql

我试图从 MySQL 表中获取数百万行到 PHP 我的应用程序。

获取数据的步骤如下。

1.  使用 mysql_query() 或 mysqli_query() 向 mySQL 发送查询。

2.  使用 mysql_fetch_array() 将结果设置为数组并循环每行。或使用 mysqli_fetch_all() 添加数组。

我收到了“内存不足”或“允许的内存大小为 * 字节已用尽”的消息。

如果我更改 'memory_limit' ，我可能能够解决它们。

但我想知道为什么显示这些消息。

我已将“memory_limit”更改为 128M-> 512M ->1024M。

当我设置 128M 时，发送查询失败，允许的内存大小为 *bytes 耗尽，我无法将结果添加到数组区域。

然后设置512M，查询成功完成，但我无法将结果添加到数组，允许的内存大小为*字节耗尽。

最后设置 1024M，发送查询和设置结果以将结果添加到数组都已完成。但有时 mysqli_fetch_all() 是内存不足的字段。

我无法理解的一件事是为什么内存不足不会经常发生？

我想知道的另一件事是如何将超过一百万行的整行从表中转换为 PHP 更少的内存转换。在获得整行后，我想让我的用户通过浏览器操作访问它们，包括下载某些类型的文件，如 csv。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T09:52:12.057

当所需的内存量超过 php.ini 文件中指定的内存限制时，您将获得“允许的内存大小为 * 字节已用完”。

当服务器本身（或 Apache 或 MySQL）内存不足时，您将得到“内存不足”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:22:53.553

检索大量行的最佳选择是在查询中使用`limit`and`offset`并遍历它们。

这将防止您面临的内存问题。

# jquery - 如何在刷新的 DIV 中重新初始化 JQuery 自动完成功能？

> ID：13509347
> 
> 赞同：1
> 
> 时间：2012-11-22T09:21:30.357
> 
> 标签：jquery, jquery-autocomplete

我有 DIV，里面有一个从 JQuery 示例复制的自动完成小部件：http: [//jqueryui.com/resources/demos/autocomplete/default.html](http://jqueryui.com/resources/demos/autocomplete/default.html)

按下按钮时，DIV 的内容被新的 HTML 替换，HEADER 包含动态生成的 Javascript 以初始化自动完成

```
<head> .. 
<script>
$(function() {
    var availableTags = [
        "ActionScript",
        "AppleScript",
        "Scala",
        "Scheme"
    ];
    $( "#tags" ).autocomplete({
        source: availableTags
    });
}); 
```

我的问题是： $(function()) 在 DIV == autocomplete 的后续重新加载不起作用时未进行评估。

意外惊喜，DIV 没有“就绪”事件

请告知如何重新初始化自动完成代码。

主页包含一个 PROJECT 选择器，在更改时将重新加载 DIV，其中包含动态生成的详细信息，包括自动完成小部件。

```
<html>
 <head>
  <script>
   function refresh_div() {
    ..    
    document.getElementById(DYNA_DIV).innerHTML = self.xmlHttpReq.responseText;
   }
  </script>
 </head>
<body>
 <select id=PROJECT_ID onchange="refresh_div()" ..>
 <div id="DYNA_DIV"> ..here is dynamically generated form with autocomplete widget containing items related to the PROJECT selected above</div>
</body>
</html> 
```

DIV 的 HTML 如下所示。按照建议剥离 HTML、HEAD、BODY

首先加载自动完成工作。刷新 DIV 的内容时，下面的初始化脚本不运行

```
 ..  <input type="text" name="AUTOCOMP"> ..

 <script>
    $(function() {
        var availableItems = [ <% dynamically enumerate items for PROECT_ID %> ];

        $( "#AUTOCOMP" ).autocomplete({
            source: availableItems
        });
    });    

  </script> 
```

-亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:39:53.200

你`DIV`用完整的 HTML 树替换内容吗

```
<html>
  <head>
    <script>... 
```

如果是，那么除非您通过创建`IFRAME`元素来包含此新树，否则浏览器会忽略您的内容。您应该只输出要放入其中的内容`DIV`（没有标签：`HTML`，`HEAD`以及所有标签，`BODY`），并且只包含`BODY`. 如果这是您需要的，您也可以包含`SCRIPT`在里面。`BODY`

**更新**：

更新您的问题后，我看到一个错误。也许这只是问题的错误，但让我们试试：

你有`"#AUTOCOMP"`选择器，但你有`<input type="text" name="AUTOCOMP">`. 如果这就是您的内容的样子，那么您应该通过`'input[name="AUTOCOMP"]'`选择器选择输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:33:05.583

尝试将代码包装在`add_load`：

```
Sys.Application.add_load(function () {

    var availableTags = [
        "ActionScript",
        "AppleScript",
        "Scala",
        "Scheme"
    ];
    $( "#tags" ).autocomplete({
        source: availableTags
    });

}); 
```

# algorithm - 具有任意多个节点的 Bellman-Ford 距离向量算法

> ID：13509348
> 
> 赞同：2
> 
> 时间：2012-11-22T09:21:34.720
> 
> 标签：algorithm, router, graph-algorithm, bellman-ford

我正在尝试为模拟路由器的类编写程序，到目前为止我已经设置了基础知识（“路由器”可以通过模拟服务器向连接到服务器的其他“路由器”发送和接收数据包）。每个数据包仅包含该路由器的距离矢量。当路由器接收到一个数据包时，它应该使用 Bellman-Ford 算法相应地更新它自己的距离矢量。我遇到的问题是我发现自己无法在不作弊和使用邻接矩阵的情况下实现实际算法。

例如，假设我有 3 个路由器连接如下：

```
A ---1--- B ---2--- C 
```

也就是说，A 和 B 以链路成本 1 连接，B 和 C 以链路成本 2 连接。所以当路由器都启动时，它们会向每个直接连接的邻居发送一个数据包，其中包含它们的距离矢量信息。所以 A 会发送路由器 B (0, 1, INF)，B 会发送 A 和 C (1, 0, 2)，C 会发送 B (INF, 2, 0)，其中 INF 表示 2 个路由器没有直接连接。

因此，让我们看看路由器 A 从路由器 B 接收数据包。使用 Bellman-Ford 算法计算到其他路由器的最小成本如下。

```
Mincost(a,b) = min((cost(a,b) + distance(b,b)),(cost(a,c) + distance(c,b))

Mincost(a,c) = min((cost(a,b) + distance(b,c)),(cost(a,c) + distance(c,c)) 
```

所以我遇到的问题是，我一生都无法弄清楚如何实现一个算法来计算一个路由器到每个其他路由器的最小路径。如果您确切知道将有多少个路由器，那么制作一个很容易，但是当路由器的数量可以任意大时，您会怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T01:22:36.523

您永远无法确定使用 DVMRP 的最短路径。一方面，您没有网络的全局视图。每个路由器都在尽可能多地运行它所看到的并且它所看到的受到限制 - 可能会产生误导。查找 DVMRP 的循环问题。DVMRP 永远无法拥有要处理的完整网络信息。

它也不是可扩展的。随着路由器数量或路由器数量的增加，其性能会越来越低。这是因为距离矢量更新消息泛滥和这些消息的当前准确性。

它是最早的多播协议之一。它的性能与单播规模的 RIP 相当。

# perl - PERL RRDTTOL：带有条件图例的图形子程序

> ID：13509350
> 
> 赞同：3
> 
> 时间：2012-11-22T09:21:40.153
> 
> 标签：perl, rrdtool

愚蠢的事情我无法管理...

在 Perl 中，使用 RRDTool（rrds 模块），我创建了一个通用子程序来创建不同时间段（1 天、1 周，...）的图表。我想使用一些子参数来显示可选的图例。

使用以下代码，不会生成任何图形....

```
#!/usr/bin/perl
use strict;
use OWNet;
use RRDs;
use warnings;
use diagnostics;

my $rrd = '/var/rrd/electricite.rrd';
my $img = '/mnt/ds211/web/';

&CreateGraph("conso","Consommation electrique 1 heure","1h",1);

sub CreateGraph
# inputs:   $_[0]: sensor_rrd_name
#       $_[1]: chart title
#       $_[2]: interval period (1h,24h,7d,1m,1y,10y)
#       $_[3]: Puissance instantanee (1/0)
{
    my $temp_graph;
    $temp_graph ="\"$img$_[0]-$_[2].png\",";
    $temp_graph .="\"--start=end-$_[2]\",";
    $temp_graph .="\"--end=now\",";
    $temp_graph .="\"--width=600\",";
    $temp_graph .="\"--height=200\",";
    $temp_graph .="\"--slope-mode\",";
    $temp_graph .="\"--title=$_[1]\",";
    $temp_graph .="\"--vertical-label=Watt\",";
    $temp_graph .="\"--lower-limit=0\",";
    $temp_graph .="\"--alt-autoscale-max\",";
    $temp_graph .="\"DEF:energy=$rrd:$_[0]:AVERAGE\",";
    $temp_graph .="\"CDEF:Watt=energy,3600,*\",";
    $temp_graph .="\"LINE2:Watt#0000FF:\",";
    $temp_graph .="\"AREA:Watt#00FF00:\",";
    $temp_graph .="\"VDEF:WattHour=energy,TOTAL\",";

    if ($_[3]==1)
    {
        $temp_graph .="\"GPRINT:Watt:LAST:  Puissance instantanee\\: %6.2lf%sW\",";
    }

    $temp_graph .="\"GPRINT:WattHour:   Consommation totale\\: %6.2lf%sWh\\n\",";
    $temp_graph .="\"GPRINT:Watt:MIN:  Puissance min\\: %6.2lf%sW\",";
    $temp_graph .="\"GPRINT:Watt:AVERAGE:  Puissance moyenne\\: %6.2lf%sW\",";
    $temp_graph .="\"GPRINT:Watt:MAX:  Puissance max\\: %6.2lf%sW\"";

    RRDs::graph ("$temp_graph");

    if ($ERROR = RRDs::error)
    {
        print "$0: failed to generate graph $_[0] data into rrd: $ERROR\n";
    }
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:30:03.397

问题是您正在向 rrdtool 传递一个字符串而不是带有参数的数组。

代替

```
RRDs::graph ("\"graph.gif\",\"DEF:...\" ..."); 
```

你应该打电话

```
RRDs::graph ("graph.gif","DEF:...","...");` 
```

如果你想事先准备好你的论点，那么你会使用

```
my @args = ("graph.gif","DEF:...","...")
RRDs::graph(@args); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:32:25.770

我猜测标题中的空格字符会影响选项解析。$temp_graph 字符串中的标题周围有一些单引号怎么样？

我希望这有帮助。

```
my $temp_graph = qq{"$img$_[0]-$_[2].png",};
$temp_graph .= qq{"--start=end-$_[2]",};
$temp_graph .= qq{"--end=now",};
$temp_graph .= qq{"--width=600",};
$temp_graph .= qq{"--height=200",};
$temp_graph .= qq{"--slope-mode",};
$temp_graph .= qq{"--title='$_[1]'",};
$temp_graph .= qq{"--vertical-label=Watt",};
$temp_graph .= qq{"--lower-limit=0",};
$temp_graph .= qq{"--alt-autoscale-max",};
$temp_graph .= qq{"DEF:energy=$rrd:$_[0]:AVERAGE",};
$temp_graph .= qq{"CDEF:Watt=energy,3600,*",};
$temp_graph .= qq{"LINE2:Watt#0000FF:",};
$temp_graph .= qq{"AREA:Watt#00FF00:",};
$temp_graph .= qq{"VDEF:WattHour=energy,TOTAL",};

if ($_[3]==1)
{
    $temp_graph .= qq{"GPRINT:Watt:LAST:  Puissance instantanee\\: %6.2lf%sW",};
}   

$temp_graph .= qq{"GPRINT:WattHour:   Consommation totale\\: %6.2lf%sWh\\n",};
$temp_graph .= qq{"GPRINT:Watt:MIN:  Puissance min\\: %6.2lf%sW",};
$temp_graph .= qq{"GPRINT:Watt:AVERAGE:  Puissance moyenne\\: %6.2lf%sW",};
$temp_graph .= qq{"GPRINT:Watt:MAX:  Puissance max\\: %6.2lf%sW"};

print join qq{",\n"}, split /","/, $temp_graph;
print "\n"; 
```

# android - 使用渲染脚本将相机 YUV 数据转换为 ARGB

> ID：13509360
> 
> 赞同：14
> 
> 时间：2012-11-22T09:22:03.690
> 
> 标签：android, android-camera, renderscript

我的问题是：我在 Android 中设置了一个摄像头，并使用 onPreviewFrame-listener 接收预览数据，该监听器向我传递了一个 byte[] 数组，其中包含默认 android YUV 格式的图像数据（设备不支持 R5G6B5-格式）。每个像素由 12 位组成，这使得事情有点棘手。现在我想做的是将 YUV 数据转换为 ARGB 数据，以便用它进行图像处理。这必须使用渲染脚本来完成，以保持高性能。

我的想法是在一个元素中传递两个像素（即 24 位 = 3 个字节），然后返回两个 ARGB 像素。问题是，在 Renderscript 中，一个 u8_3（一个 3 维 8 位向量）以 32 位存储，这意味着最后 8 位未使用。但是当将图像数据复制到分配中时，所有的 32 位都被使用了，所以最后 8 位丢失了。即使我使用 32 位输入数据，最后 8 位也没用，因为它们只有 2/3 像素。当定义一个包含 3 字节数组的元素时，它实际上具有 3 个字节的实际大小。但是 Allocation.copyFrom() 方法没有用数据填充 in-Allocation，认为它没有正确的数据类型来填充字节 []。

renderscript 文档指出，有一个 ScriptIntrinsicYuvToRGB 应该在 API 级别 17 中完全做到这一点。但实际上该类不存在。我已经下载了 API Level 17，尽管它似乎不再可下载。有没有人有任何关于它的信息？有没有人尝试过 ScriptIntrinsic？

所以总而言之，我的问题是：如何快速将相机数据转换为 ARGB 数据，硬件加速？

这就是在 Dalvik VM 中执行此操作的方法（在网上某处找到代码，它可以工作）：

```
@SuppressWarnings("unused")
private void decodeYUV420SP(int[] rgb, byte[] yuv420sp, int width, int height) {  
    final int frameSize = width * height;  
    for (int j = 0, yp = 0; j < height; j++) {
        int uvp = frameSize + (j >> 1) * width, u = 0, v = 0;  
        for (int i = 0; i < width; i++, yp++) {  
            int y = (0xff & ((int) yuv420sp[yp])) - 16;  
            if (y < 0)
                y = 0;  
            if ((i & 1) == 0) {  
                v = (0xff & yuv420sp[uvp++]) - 128;  
                u = (0xff & yuv420sp[uvp++]) - 128;  
            }  
            int y1192 = 1192 * y;  
            int r = (y1192 + 1634 * v);  
            int g = (y1192 - 833 * v - 400 * u);  
            int b = (y1192 + 2066 * u);  
            if (r < 0)
                r = 0;
            else if (r > 262143)
                r = 262143;  
            if (g < 0)
                g = 0;
            else if (g > 262143)
                g = 262143;  
            if (b < 0)
                b = 0;
            else if (b > 262143)  
                b = 262143;  
            rgb[yp] = 0xff000000 | ((r << 6) & 0xff0000) | ((g >> 2) & 0xff00) | ((b >> 10) & 0xff);  
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-23T10:54:49.170

我相信您会发现 LivePreview 测试应用程序很有趣……它是最新 Jelly Bean (MR1) 中 Android 源代码的一部分。它实现了一个相机预览，并使用 ScriptIntrinsicYuvToRgb 将预览数据与 Renderscript 进行转换。您可以在此处在线浏览源代码：

[实时预览](https://android.googlesource.com/platform/frameworks/rs/+/master/tests/java_api/LivePreview/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-26T16:48:19.323

我无法运行 ScriptInstrinsicYuvToRgb，所以我决定编写自己的 RS 解决方案。

这是准备好的脚本（名为**yuv.rs**）：

```
#pragma version(1) 
#pragma rs java_package_name(com.package.name)

rs_allocation gIn;

int width;
int height;
int frameSize;

void yuvToRgb(const uchar *v_in, uchar4 *v_out, const void *usrData, uint32_t x, uint32_t y) {

    uchar yp = rsGetElementAtYuv_uchar_Y(gIn, x, y) & 0xFF;

    int index = frameSize + (x & (~1)) + (( y>>1) * width );
    int v = (int)( rsGetElementAt_uchar(gIn, index) & 0xFF ) -128;
    int u = (int)( rsGetElementAt_uchar(gIn, index+1) & 0xFF ) -128;

    int r = (int) (1.164f * yp  + 1.596f * v );
    int g = (int) (1.164f * yp  - 0.813f * v  - 0.391f * u);
    int b = (int) (1.164f * yp  + 2.018f * u );

    r = r>255? 255 : r<0 ? 0 : r;
    g = g>255? 255 : g<0 ? 0 : g;
    b = b>255? 255 : b<0 ? 0 : b;

    uchar4 res4;
    res4.r = (uchar)r;
    res4.g = (uchar)g;
    res4.b = (uchar)b;
    res4.a = 0xFF;

    *v_out = res4;
} 
```

不要忘记将相机预览格式设置为 NV21：

```
Parameters cameraParameters = camera.getParameters();
cameraParameters.setPreviewFormat(ImageFormat.NV21);
// Other camera init stuff: preview size, framerate, etc.
camera.setParameters(cameraParameters); 
```

分配初始化和脚本使用：

```
// Somewhere in initialization section 
// w and h are variables for selected camera preview size
rs = RenderScript.create(this); 

Type.Builder tbIn = new Type.Builder(rs, Element.U8(rs));
tbIn.setX(w);
tbIn.setY(h);
tbIn.setYuvFormat(ImageFormat.NV21);

Type.Builder tbOut = new Type.Builder(rs, Element.RGBA_8888(rs));
tbOut.setX(w); 
tbOut.setY(h);

inData = Allocation.createTyped(rs, tbIn.create(), Allocation.MipmapControl.MIPMAP_NONE,  Allocation.USAGE_SCRIPT & Allocation.USAGE_SHARED);
outData = Allocation.createTyped(rs, tbOut.create(), Allocation.MipmapControl.MIPMAP_NONE,  Allocation.USAGE_SCRIPT & Allocation.USAGE_SHARED);

outputBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);

yuvScript = new ScriptC_yuv(rs); 
yuvScript.set_gIn(inData);
yuvScript.set_width(w);
yuvScript.set_height(h);
yuvScript.set_frameSize(previewSize);
//..... 
```

相机回调方法：

```
public void onPreviewFrame(byte[] data, Camera camera) {
    // In your camera callback, data 
    inData.copyFrom(data);
    yuvScript.forEach_yuvToRgb(inData, outData);
    outData.copyTo(outputBitmap);
    // draw your bitmap where you want to 
    // .....
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-04T23:28:10.747

对于不知道的人，RenderScript 现在位于 Android 支持库中，包括内部函数。

[http://android-developers.blogspot.com.au/2013/09/renderscript-in-android-support-library.html](http://android-developers.blogspot.com.au/2013/09/renderscript-in-android-support-library.html)

[http://android-developers.blogspot.com.au/2013/08/renderscript-intrinsics.html](http://android-developers.blogspot.com.au/2013/08/renderscript-intrinsics.html)

# parsing - 用于代码生成的语言无关的 ANTLR 语法

> ID：13509363
> 
> 赞同：2
> 
> 时间：2012-11-22T09:22:09.570
> 
> 标签：parsing, code-generation, antlr

我正在开发一种 ANTLR 语法来填补文本中的一些空白。就像那样：

```
<% SOME_STATEMENT_TO_BE_REPLACED > 
```

我的问题是，我必须使用 ANTLR3（可能有 4 个）代码生成来定位多种语言。我要替换的语句实际上是一些业务逻辑的查询（有现有代码，我只是替换一个解析器）。

我想知道我是否可以利用 ANTLR 的一些功能来切换到语言模板，例如：

```
options {
    language=CSharp3;
    output=AST;
    ASTLabelType=CommonTree;
} 
```

是否有一些可以跨 C#、Java 和 C++ 使用的元语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:15:53.457

> 是否有一些可以跨 C#、Java 和 C++ 使用的元语法？

不，ANTLR 中没有这样的东西。你必须自己做这样的替换。

# encryption - 可以加密和解密字符串的 TCL 代码

> ID：13509369
> 
> 赞同：1
> 
> 时间：2012-11-22T09:22:41.680
> 
> 标签：encryption, tcl

我需要一段代码来定义可以加密和解密一段字符串的函数。我基本上想要的是字符串不应该对第三方用户可见，因此当字符串源自一个文件时，它会使用加密函数转换为整数值，然后作为参数传递给另一个文件。然后 decrpyt 函数将其解密回来并使用该字符串对其执行操作。

任何建议或已经可用的代码都可以！

请帮帮我。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T09:38:08.153

安装[tcllib](http://tcllib.sourceforge.net)。tcllib 中实现了几种标准加密算法。

可以使用以下加密算法：

*   河豚：[http ://tcllib.sourceforge.net/doc/blowfish.html](http://tcllib.sourceforge.net/doc/blowfish.html)
*   AES：http : [//tcllib.sourceforge.net/doc/aes.html](http://tcllib.sourceforge.net/doc/aes.html)
*   des（包括三重des）：[http ://tcllib.sourceforge.net/doc/des.html](http://tcllib.sourceforge.net/doc/des.html)
*   rc4：[http ://tcllib.sourceforge.net/doc/rc4.html](http://tcllib.sourceforge.net/doc/rc4.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T09:41:30.230

[Tcllib 中](http://tcllib.sourceforge.net/doc/des.html)的des 包应该可以满足您的需求。它很容易使用：

```
package require des

set key "12345678";  # Must be 8 bytes long
set msg "abcde"

##### ENCRYPTION
set encryptedMsg [DES::des -dir encrypt -key $key $msg]
# $encryptedMsg is a bunch of bytes; you'll want to send this around...

##### DECRYPTION
set decryptedMsg [DES::des -dir decrypt -key $key $encryptedMsg]
puts "I got '$decryptedMsg'" 
```

请注意，DES 会将消息填充为 8 字节长的倍数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:25:17.730

请访问 TCL/TK 主页，例如：http://wiki.tcl.tk/900

这只是一种方法。我敢肯定，还会有更多。

# java - 在 jframe 上添加 webview 引擎控件

> ID：13509372
> 
> 赞同：0
> 
> 时间：2012-11-22T09:22:56.580
> 
> 标签：java, swing, javafx-2, javafx

我在 javafxapplication 的帮助下设计了一个 WebView 页面。现在我想在 java jframe 表单上添加这个 webview 来创建 webview 我使用下面的代码

```
package timetrimnew;

import java.util.List;
import javafx.application.Application;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.geometry.HPos;
import javafx.geometry.Insets;
import javafx.geometry.VPos;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.TextField;
import javafx.scene.layout.ColumnConstraints;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.Pane;
import javafx.scene.layout.Priority;
import javafx.scene.layout.VBox;
import javafx.scene.web.WebEngine;
import javafx.scene.web.WebView;
import javafx.stage.Stage;
import java.io.*;

public class WebView1 extends Application {
    String htmlpath = "d:/lcrux/html/";@Override public void start(Stage primaryStage) throws Exception {
        Pane root = new WebViewPane();
        primaryStage.setScene(new Scene(root, 500, 500));
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }

    public class WebViewPane extends Pane {

        public WebViewPane() {
            // VBox.setVgrow(this, Priority.ALWAYS);
            // setMaxWidth(Double.MAX_VALUE);
            // setMaxHeight(Double.MAX_VALUE);

            WebView view = new WebView();
            view.setMinSize(500, 400);
            view.setPrefSize(500, 400);
            final WebEngine eng = view.getEngine();
            File htmlFile = new File(htmlpath + "pi/welcome.htm");
            try {
                eng.load(htmlFile.toURI().toURL().toString());
            } catch (Exception ex) {

            }

            GridPane grid = new GridPane();
            grid.setVgap(5);
            grid.setHgap(5);

            GridPane.setConstraints(view, 0, 1, 2, 1, HPos.CENTER, VPos.CENTER, Priority.ALWAYS, Priority.ALWAYS);
            grid.getColumnConstraints().addAll(
            new ColumnConstraints(100, 100, Double.MAX_VALUE, Priority.ALWAYS, HPos.CENTER, true),
            new ColumnConstraints(40, 40, 40, Priority.NEVER, HPos.CENTER, true));
            grid.getChildren().addAll(view);
            getChildren().add(grid);
        }

        @Override protected void layoutChildren() {
            List < Node > managed = getManagedChildren();
            double width = getWidth();
            double height = getHeight();
            double top = getInsets().getTop();
            double right = getInsets().getRight();
            double left = getInsets().getLeft();
            double bottom = getInsets().getBottom();
            for (int i = 0; i < managed.size(); i++) {
                Node child = managed.get(i);
                layoutInArea(child, left, top,
                width - left - right, height - top - bottom,
                0, Insets.EMPTY, true, true, HPos.CENTER, VPos.CENTER);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T22:11:15.650

我必须做同样的事情，这是我的实现。我需要在 JTabbed 窗格（或任何其他 JPanel，没关系）上显示 WebView，并且我还使用了 GridPane 示例。当您指定 JFrame 时，我不会包含 JTabbed 窗格的代码

如果您需要在 JFrame 中显示它，请使用以下类：

```
 package testproject;

            import javafx.application.Platform;
            import javafx.beans.value.ChangeListener;
            import javafx.beans.value.ObservableValue;
            import javafx.embed.swing.JFXPanel;
            import javafx.event.EventHandler;
            import javafx.scene.Scene;
            import javafx.scene.web.WebEngine;
            import javafx.scene.web.WebEvent;
            import javafx.scene.web.WebView;

            import javax.swing.*;
            import java.awt.*;
            import java.awt.event.*;
            import java.net.MalformedURLException;
            import java.net.URL;

            import static javafx.concurrent.Worker.State.FAILED;
            import javafx.scene.web.PopupFeatures;
            import javafx.util.Callback;

            /**
             *
             * @author id011593
             */
            public class MyWebBrowser implements Runnable {

                private JFXPanel jfxPanel;
                private WebEngine engine;
                private JFrame frame = new JFrame();
                private JPanel panel = new JPanel(new BorderLayout());
                private JLabel lblStatus = new JLabel();
                private JButton btnGo = new JButton("Go");
                private JTextField txtURL = new JTextField();
                private JProgressBar progressBar = new JProgressBar();

                private void initComponents() {

                    jfxPanel = new JFXPanel();
                    createScene();

                    ActionListener al = new ActionListener() {
                        @Override public void actionPerformed(ActionEvent e) {
                            loadURL(txtURL.getText());
                        }
                    };

                    btnGo.addActionListener(al);
                    txtURL.addActionListener(al);

                    progressBar.setPreferredSize(new Dimension(150, 18));
                    progressBar.setStringPainted(true);

                    JPanel topBar = new JPanel(new BorderLayout(5, 0));
                    topBar.setBorder(BorderFactory.createEmptyBorder(3, 5, 3, 5));
                    topBar.add(txtURL, BorderLayout.CENTER);
                    topBar.add(btnGo, BorderLayout.EAST);

                    JPanel statusBar = new JPanel(new BorderLayout(5, 0));
                    statusBar.setBorder(BorderFactory.createEmptyBorder(3, 5, 3, 5));
                    statusBar.add(lblStatus, BorderLayout.CENTER);
                    statusBar.add(progressBar, BorderLayout.EAST);

                    panel.add(topBar, BorderLayout.NORTH);
                    panel.add(jfxPanel, BorderLayout.CENTER);
                    panel.add(statusBar, BorderLayout.SOUTH);

                    frame.getContentPane().add(panel);
                }

                private void createScene() {

                    Platform.runLater(new Runnable() {
                        @Override public void run() {

                            final WebView webviewMain = new WebView();
                            //final MyWebBrowser newWin = new MyWebBrowser();
                            engine = webviewMain.getEngine();

            //                engine.setCreatePopupHandler(new Callback<PopupFeatures, WebEngine>() {
            //                    @Override
            //                    public WebEngine call(PopupFeatures config) {
            //
            //                        newWin.run();
            //                        return newWin.getEngine();
            //                    }
            //                });

                            engine.titleProperty().addListener(new ChangeListener<String>() {
                                @Override
                                public void changed(ObservableValue<? extends String> observable, String oldValue, final String newValue) {
                                    SwingUtilities.invokeLater(new Runnable() {
                                        @Override public void run() {
                                            frame.setTitle(newValue);
                                        }
                                    });
                                }
                            });

                            engine.setOnStatusChanged(new EventHandler<WebEvent<String>>() {
                                @Override public void handle(final WebEvent<String> event) {
                                    SwingUtilities.invokeLater(new Runnable() {
                                        @Override public void run() {
                                            lblStatus.setText(event.getData());
                                        }
                                    });
                                }
                            });

                            engine.locationProperty().addListener(new ChangeListener<String>() {
                                @Override
                                public void changed(ObservableValue<? extends String> ov, String oldValue, final String newValue) {
                                    SwingUtilities.invokeLater(new Runnable() {
                                        @Override public void run() {
                                            txtURL.setText(newValue);
                                        }
                                    });
                                }
                            });

                            engine.getLoadWorker().workDoneProperty().addListener(new ChangeListener<Number>() {
                                @Override
                                public void changed(ObservableValue<? extends Number> observableValue, Number oldValue, final Number newValue) {
                                    SwingUtilities.invokeLater(new Runnable() {
                                        @Override public void run() {
                                            progressBar.setValue(newValue.intValue());
                                        }
                                    });
                                }
                            });

                            engine.getLoadWorker()
                                    .exceptionProperty()
                                    .addListener(new ChangeListener<Throwable>() {

                                        public void changed(ObservableValue<? extends Throwable> o, Throwable old, final Throwable value) {
                                            if (engine.getLoadWorker().getState() == FAILED) {
                                                SwingUtilities.invokeLater(new Runnable() {
                                                    @Override public void run() {
                                                        JOptionPane.showMessageDialog(
                                                                panel,
                                                                (value != null) ?
                                                                engine.getLocation() + "\n" + value.getMessage() :
                                                                engine.getLocation() + "\nUnexpected error.",
                                                                "Loading error...",
                                                                JOptionPane.ERROR_MESSAGE);
                                                    }
                                                });
                                            }
                                        }
                                    });

                            jfxPanel.setScene(new Scene(webviewMain));
                        }
                    });
                }

                public void loadURL(final String url) {
                    Platform.runLater(new Runnable() {
                        @Override public void run() {
                            String tmp = toURL(url);

                            if (tmp == null) {
                                tmp = toURL("http://" + url);
                            }

                            engine.load(tmp);
                        }
                    });
                }

                private static String toURL(String str) {
                    try {
                        return new URL(str).toExternalForm();
                    } catch (MalformedURLException exception) {
                            return null;
                    }
                }

                @Override public void run() {

                    frame.setPreferredSize(new Dimension(1024, 800));
                    frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

                    initComponents();

                    loadURL("http://www.bbc.co.uk/news");

                    frame.pack();
                    frame.setVisible(true);
                }

                public WebEngine getEngine() {
                    return engine;
                }

                public void setEngine(WebEngine engine) {
                    this.engine = engine;
                }

                public JFXPanel getJfxPanel() {
                    return jfxPanel;
                }

                public void setJfxPanel(JFXPanel jfxPanel) {
                    this.jfxPanel = jfxPanel;
                }

            } 
```

如果您不想处理弹出窗口，请在处理程序中评论该部分。希望能帮助到你。JFXPanel 也可以工作，但我在调整 JPanel 大小时遇到​​了很多问题。GridPane 没有这个，但我是 Java 新手，对 FavaFX 也很陌生，所以它可能是飞行员错误:) 祝你好运....

为文本框中格式错误的代码道歉，我知道这会惹恼一些人，但这是一个快速复制粘贴，我必须开始工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:38:18.240

我认为您正在寻找的是`JFXPanel`课程（http://docs.oracle.com/javafx/2/api/javafx/embed/swing/JFXPanel.html）。它是一个可以嵌入JavaFX 场景的swing 组件。不是使用舞台来显示场景，而是使用将其添加到 JFXPanel 实例

```
Platform.runLater(new Runnable() {
    public void run() {
        myFXPanel.setScene(myWebView);
    }
}); 
```

您需要该`Platform.runLater(...)`部分，因为 JFXPanel#setScene 必须在 JavaFX 应用程序线程上调用，而 UI 的其余部分将在 Swing 事件队列上运行。

# drupal - Drupal 7 - 登录用户的菜单用户访问？

> ID：13509373
> 
> 赞同：1
> 
> 时间：2012-11-22T09:22:58.440
> 
> 标签：drupal

我正在构建会员网站，并且我只想为登录的用户构建页面。我在访问回调中写了什么以仅授予登录用户的访问权限？

'访问回调' => '?'

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T17:17:45.280

您可以使用[user_is_logged_in()](http://api.drupal.org/api/drupal/modules!user!user.module/function/user_is_logged_in/7)函数来检查用户是否已登录。像这样：

```
$items['custmomenu'] => array(
  'title' => 'yourtitle',
  'page callback' => 'yourcallback function',
  'access callback' => 'user_is_logged_in',
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T22:21:16.600

您需要使用如下访问回调，如下所示：

```
$items['mypage'] => array(
  'title' => 'My Page',
  'page callback' => 'mypage_callback',
  'access callback' = > 'user_is_logged_in',
); 
```

有关检查用户是否登录的更多信息：

[http://oliverdavies.co.uk/blog/2013/01/09/checking-if-user-logged-drupal-right-way](http://oliverdavies.co.uk/blog/2013/01/09/checking-if-user-logged-drupal-right-way)

# php - 如何在 IF MySQL Row1=Row2 语句中插入 PHP 变量

> ID：13509379
> 
> 赞同：0
> 
> 时间：2012-11-22T09:23:12.333
> 
> 标签：php, mysql, sql, database

这是我现在的代码：

```
<td align="center" valign="middle">
        <?php 
        // IF the users tips match with the correct tip, echo correct, else wrong on table cell
        if ($row['1g1']==$row['1w1']){
        ?>          
            <img src="../../images/tick-cross/Tick1.png" width="20" height="20" alt="Correct" border="0" />
        <?
        }
        else
        {
        ?>
            <img src="../../images/tick-cross/Cross1.png" width="20" height="20" alt="Wrong" border="0" />
        <?
        }
        ?>
        </td> 
```

基本上，如果表中的 2 行相等，它会插入一个勾号/检查的图像，如果它们不是，它会插入一个十字的图像。

如果您感到困惑，请[查看此处的表格](http://pddtest2.fhost.com.au/tables/selections/round1.php)

好的，所以我想将“g”和“w”之前的数字变成变量，否则我将不得不更改它们数百次。在线：

```
if ($row['1g1']==$row['1w1']){ 
```

我想做：`if ($row['$VARIABLEg1']==$row['$VARIABLEw1']){`

这样做的正确语法是什么？它让我发疯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:25:03.690

尝试

```
if ($row[$VARIABLE . "g1" ]==$row[$VARIABLE . "w1"]) { 
```

这应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:26:01.050

正确的语法是通过在变量周围添加花括号来完成的，如下所示：

```
$row["{$VARIABLE}g1"] == $row["{$VARIABLE}w1"]){ 
```

顺便说一句，它只适用于双引号。

# ckeditor - 翻译ckeditor文本

> ID：13509381
> 
> 赞同：1
> 
> 时间：2012-11-22T09:23:14.877
> 
> 标签：ckeditor, translation

我需要**翻译 ckeditor 文本**，我看到了相关的帖子

[如何在 CKEditor 中使用谷歌翻译？](https://stackoverflow.com/questions/6434026/how-to-use-google-translate-with-ckeditor)但不知道如何实现。

抱歉，我是入门级程序员，需要帮助！

提前致谢

# javascript - Rails 3，注释嵌套资源节省1个实例4次

> ID：13509384
> 
> 赞同：0
> 
> 时间：2012-11-22T09:23:25.750
> 
> 标签：javascript, ruby-on-rails-3, resources, nested

我有一个奇怪的问题。我有 2 个模型**问题，评论**。评论嵌套在问题中，因此我在评论控制器中有创建操作，如下所示：

```
 def create
    @issue = Issue.find(params[:issue_id])
    @comment = @issue.comments.create!(params[:comment])

    respond_to do |format|
      if @comment.save
        format.html { redirect_to @comment, notice: 'Comment was successfully created.' }
        format.json { render json: @comment, status: :created, location: @comment }
        format.js #create.js.erb
      else
        format.html { render action: "new" }
        format.json { render json: @comment.errors, status: :unprocessable_entity }
      end
    end
  end 
```

还有我的 create.js.erb：

```
var new_comment = $("<%= escape_javascript(render(:partial => @comment))%>").hide();
$('#comments').prepend(new_comment);
$('#comment_<%= @comment.id %>').fadeIn('slow');
$('#new_comment')[0].reset(); 
```

问题.rb

```
class Issue < ActiveRecord::Base
  attr_accessible :category, :description, :title

  has_many :comments
end 
```

评论.rb

```
class Comment < ActiveRecord::Base
  attr_accessible :body, :issue_id
  belongs_to :issue
end 
```

路线.rb

```
 resources :comments

  resources :issues do
    resources :comments
  end 
```

**问题：**当我创建一个评论时，它是一个部分驻留在views/issues/show.html.erb 上的表单。评论在数据库中创建了 4 次。

我找不到问题所在以及导致它的原因。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:32:31.850

首先，我会**建立**相关的评论：

```
@comment = @issue.comments.build(params[:comment]) 
```

然后我会保存评论实例

```
@comment.save 
```

还要检查 Javascript，也许您在事件冒泡方面遇到了一些问题，并且事件被触发了两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T08:07:37.770

我实际上正在研究一些旧的 Rails 版本，其中 js 文件放在 /public/assets 中，这就是这种奇怪行为的原因。我删除了 /public/assets 文件夹中的所有文件，该应用程序现在可以正常工作了。

# php - 从 xamp 输入我的 phpmyadmin 时遇到问题

> ID：13509386
> 
> 赞同：0
> 
> 时间：2012-11-22T09:23:35.020
> 
> 标签：php, phpmyadmin, xampp

我输入了密码和 root 用户（root 并按 Enter）.. 然后 phpmyadmin 无限期地运行.. 并且永远不会进入内部。我还想完全删除身份验证屏幕..我该怎么做..

这是我的 config.inc.php 文件：

```
 <?php
/*
 * This is needed for cookie based authentication to encrypt password in
 * cookie
 */
$cfg['blowfish_secret'] = 'xampp'; /* YOU SHOULD CHANGE THIS FOR A MORE SECURE COOKIE AUTH! */

/*
 * Servers configuration
 */
$i = 0;

/*
 * First server
 */
$i++;

/* Authentication type and info 
$cfg['Servers'][$i]['auth_type'] = 'cookie';
*/
$cfg['Servers'][$i]['user'] = 'root';
$cfg['Servers'][$i]['password'] = '';
$cfg['Servers'][$i]['extension'] = 'mysql';
$cfg['Servers'][$i]['AllowNoPassword'] = true;
$cfg['Lang'] = '';

/* Bind to the localhost ipv4 address and tcp */
$cfg['Servers'][$i]['host'] = '127.0.0.1';
$cfg['Servers'][$i]['connect_type'] = 'tcp';

/* User for advanced features */
$cfg['Servers'][$i]['controluser'] = 'pma';
$cfg['Servers'][$i]['controlpass'] = '';

/* Advanced phpMyAdmin features */
$cfg['Servers'][$i]['pmadb'] = 'phpmyadmin';
$cfg['Servers'][$i]['bookmarktable'] = 'pma_bookmark';
$cfg['Servers'][$i]['relation'] = 'pma_relation';
$cfg['Servers'][$i]['table_info'] = 'pma_table_info';
$cfg['Servers'][$i]['table_coords'] = 'pma_table_coords';
$cfg['Servers'][$i]['pdf_pages'] = 'pma_pdf_pages';
$cfg['Servers'][$i]['column_info'] = 'pma_column_info';
$cfg['Servers'][$i]['history'] = 'pma_history';
$cfg['Servers'][$i]['designer_coords'] = 'pma_designer_coords';
$cfg['Servers'][$i]['tracking'] = 'pma_tracking';
$cfg['Servers'][$i]['userconfig'] = 'pma_userconfig';
$cfg['Servers'][$i]['recent'] = 'pma_recent';
$cfg['Servers'][$i]['table_uiprefs'] = 'pma_table_uiprefs';
$cfg['Servers'][$i]['port'] = '8080';
$cfg['Servers'][$i]['verbose'] = 'localhost';
$cfg['Servers'][$i]['host'] = 'localhost';
/*
 * End of servers configuration
 */

?> 
```

更新：

这就是我处理 phpmyadmin 的方式：

```
http://localhost:8080/phpmyadmin/ 
```

交换这个： $cfg['Servers'][$i]['auth_type'] = 'cookie';

对此：

$cfg['Servers'][$i]['auth_type'] = 'config';

没用，我的加载时间仍然很长..最后什么也没出现

**php_error_log**：

```
[22-Nov-2012 08:35:56 UTC] PHP Warning:  file_get_contents(lang.tmp): failed to open stream: No such file or directory in C:\xampp\htdocs\xampp\index.php on line 2

[22-Nov-2012 08:46:59 UTC] PHP Warning:  file_get_contents(lang.tmp): failed to open stream: No such file or directory in C:\xampp\htdocs\xampp\index.php on line 2

[22-Nov-2012 09:01:38 UTC] PHP Fatal error:  Maximum execution time of 30 seconds exceeded in C:\xampp\phpmyadmin\libraries\session.inc.php on line 96 
```

**来自C:\xampp\apache\logs**的错误文件

 **```
 [Thu Nov 22 10:56:28.128254 2012] [mpm_winnt:notice] [pid 992:tid 252] AH00418: Parent: Created child process 4152

[Thu Nov 22 10:56:29.065254 2012] [ssl:warn] [pid 4152:tid 264] AH01873: Init: Session Cache is not configured [hint: SSLSessionCache]
[Thu Nov 22 10:56:29.098254 2012] [mpm_winnt:notice] [pid 4152:tid 264] AH00354: Child: Starting 150 worker threads.
[Thu Nov 22 11:15:44.631864 2012] [core:warn] [pid 6036:tid 252] AH00098: pid file C:/xampp/apache/logs/httpd.pid overwritten -- Unclean shutdown of previous Apache run?
[Thu Nov 22 11:15:44.928894 2012] [ssl:warn] [pid 6036:tid 252] AH01873: Init: Session Cache is not configured [hint: SSLSessionCache]
[Thu Nov 22 11:15:44.961897 2012] [mpm_winnt:notice] [pid 6036:tid 252] AH00455: Apache/2.4.3 (Win32) OpenSSL/1.0.1c PHP/5.4.7 configured -- resuming normal operations
[Thu Nov 22 11:15:44.961897 2012] [mpm_winnt:notice] [pid 6036:tid 252] AH00456: Server built: Aug 18 2012 12:41:37
[Thu Nov 22 11:15:44.961897 2012] [core:notice] [pid 6036:tid 252] AH00094: Command line: 'c:\\xampp\\apache\\bin\\httpd.exe -d C:/xampp/apache'
[Thu Nov 22 11:15:44.962897 2012] [mpm_winnt:notice] [pid 6036:tid 252] AH00418: Parent: Created child process 6056
[Thu Nov 22 11:15:45.790980 2012] [ssl:warn] [pid 6056:tid 264] AH01873: Init: Session Cache is not configured [hint: SSLSessionCache]
[Thu Nov 22 11:15:45.823984 2012] [mpm_winnt:notice] [pid 6056:tid 264] AH00354: Child: Starting 150 worker threads. 
```

来自同一文件夹中访问文件的一些详细信息：

```
 ::1 - - [22/Nov/2012:10:56:32 +0200] "GET /phpmyadmin/phpmyadmin.css.php?server=1&token=437f6c565c1596df2943490f3a782513&js_frame=right&nocache=4043133233 HTTP/1.1" 200 82604 "http://localhost:8080/phpmyadmin/" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.112 Safari/534.30"
::1 - - [22/Nov/2012:10:56:32 +0200] "GET /phpmyadmin/js/messages.php?lang=en&db=&token=437f6c565c1596df2943490f3a782513 HTTP/1.1" 200 16556 "http://localhost:8080/phpmyadmin/" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.112 Safari/534.30"
::1 - - [22/Nov/2012:10:56:33 +0200] "GET /phpmyadmin/themes/pmahomme/img/logo_right.png HTTP/1.1" 200 4548 "http://localhost:8080/phpmyadmin/" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.112 Safari/534.30"
::1 - - [22/Nov/2012:10:56:33 +0200] "GET /phpmyadmin/themes/pmahomme/img/input_bg.gif HTTP/1.1" 200 170 "http://localhost:8080/phpmyadmin/" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.112 Safari/534.30"
::1 - - [22/Nov/2012:10:56:38 +0200] "POST /phpmyadmin/index.php HTTP/1.1" 302 - "http://localhost:8080/phpmyadmin/" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.112 Safari/534.30"
::1 - - [22/Nov/2012:11:01:38 +0200] "-" 408 - "-" "-"
::1 - - [22/Nov/2012:10:56:38 +0200] "GET /phpmyadmin/index.php?token=437f6c565c1596df2943490f3a782513 HTTP/1.1" 200 - "http://localhost:8080/phpmyadmin/" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.112 Safari/534.30"
::1 - - [22/Nov/2012:10:57:54 +0200] "POST /phpmyadmin/index.php HTTP/1.1" 200 154 "http://localhost:8080/phpmyadmin/" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.112 Safari/534.30"
::1 - - [22/Nov/2012:11:09:09 +0200] "POST /phpmyadmin/index.php HTTP/1.1" 302 - "http://localhost:8080/phpmyadmin/" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.112 Safari/534.30"
::1 - - [22/Nov/2012:11:14:09 +0200] "-" 408 - "-" "-"
::1 - - [22/Nov/2012:11:09:09 +0200] "GET /phpmyadmin/index.php?token=437f6c565c1596df2943490f3a782513 HTTP/1.1" 200 - "http://localhost:8080/phpmyadmin/" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.112 Safari/534.30"
::1 - - [22/Nov/2012:11:20:51 +0200] "-" 408 - "-" "-"
::1 - - [22/Nov/2012:11:15:50 +0200] "POST /phpmyadmin/index.php HTTP/1.1" 200 - "http://localhost:8080/phpmyadmin/" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.112 Safari/534.30"
::1 - - [22/Nov/2012:11:33:05 +0200] "GET /Dummy/index.php HTTP/1.1" 200 193 "-" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.112 Safari/534.30"
::1 - - [22/Nov/2012:11:33:38 +0200] "GET /Dummy/index.php HTTP/1.1" 200 193 "-" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.112 Safari/534.30" 
```

现在我得到：

```
Fatal error: Maximum execution time of 30 seconds exceeded in C:\xampp\phpmyadmin\libraries\session.inc.php on line 96 
```

有没有办法完全禁用会话？

最后的变化：

```
 $cfg['Servers'][$i]['port'] = '8080';
$cfg['Servers'][$i]['verbose'] = 'localhost';
$cfg['Servers'][$i]['host'] = 'localhost';
$cfg['Servers'][$i]['auth_type'] = 'config';
$cfg['Servers'][$i]['user'] = 'root';
$cfg['Servers'][$i]['password'] = '12345';
$cfg['Servers'][$i]['extension'] = 'mysql';
$cfg['Servers'][$i]['AllowNoPassword'] = true;
$cfg['Lang'] = ''; 
```

现在我什至无法到达面板:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:26:29.323

尝试取消注释以下行：

```
$cfg['Servers'][$i]['auth_type'] = 'cookie'; 
```

并更改`auth_type`为`config`

```
$cfg['Servers'][$i]['auth_type'] = 'config'; 
```

**编辑：** /* 身份验证类型和信息 */

```
$cfg['Servers'][$i]['auth_type'] = 'config';
$cfg['Servers'][$i]['user'] = 'your_mysql_user_here';
$cfg['Servers'][$i]['password'] = 'your_mysql_password_here';
$cfg['Servers'][$i]['extension'] = 'mysql';
$cfg['Servers'][$i]['AllowNoPassword'] = true; 
```

[在这里](https://stackoverflow.com/questions/4124447/reset-root-password-with-wrong-mysql-config/)，您可以看到有关如何重置 MySQL 密码的说明，以防您出现拼写错误等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:16:57.783

你可以试试换

```
$cfg['Servers'][$i]['host'] = '127.0.0.1'; 
```

至

```
$cfg['Servers'][$i]['host'] = 'localhost'; 
```

**和**

```
/* Authentication type and info 
$cfg['Servers'][$i]['auth_type'] = 'cookie';
*/ 
```

至

```
/* Authentication type and info */
$cfg['Servers'][$i]['auth_type'] = 'config'; 
```

此外，您还需要以下行：

```
$cfg['Servers'][$i]['extension'] = 'mysqli'; 
```**

# c# - 在asp页面上的div内的新行中显示每个复选框

> ID：13509387
> 
> 赞同：0
> 
> 时间：2012-11-22T09:23:36.173
> 
> 标签：c#

我有许多复选框将文本作为长消息的子字符串。我这样做是为了从长消息中选择必要的字符串，最后组合成 required message ，我知道该怎么做。

我想知道如何在新行中显示这些复选框。我如何在 div 中显示它们，每个复选框都在新行中。

```
 string[] longMsg = str.Split('*'); //Message contains * character as delimiter

    for (int i = 0; i < longMsg.Length; i++)
    {
        CheckBox cb = new CheckBox();

        cb.Text = longMsg[i];
        Form.Controls.Add(cb);
    } 
```

现在`Form.Controls.Add(cb)`以串行方式显示它们的结果。请帮助我应该在**aspx**页面和**.cs**页面上做什么。谢谢，需要你的帮助..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:25:34.760

试试这个

```
string[] longMsg = str.Split('*'); //Message contains * character as delimiter

for (int i = 0; i < longMsg.Length; i++)
{
  CheckBox cb = new CheckBox();
  cb.Text = longMsg[i];

  Literal br = new Literal();
  br.Text = "<br/>";

  Form.Controls.Add(cb);
  Form.Controls.Add(br );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:28:24.860

添加每个控件后，添加一个`<br />`

作为

```
Form.Controls.Add(cb); 
```

在上述行之后添加以下内容

```
Form.Add(new LiteralControl("<br />")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T09:28:51.347

只需这样做：-

```
string[] longMsg = str.Split('*'); //Message contains * character as delimiter

    for (int i = 0; i < longMsg.Length; i++)
    {
        CheckBox cb = new CheckBox();

        cb.Text = longMsg[i];
        Form.Controls.Add(cb);
        Form.Controls.Add(new LiteralControl("<br>"));

    } 
```

# html - 用 margin:auto 定位 div 的左右元素

> ID：13509395
> 
> 赞同：0
> 
> 时间：2012-11-22T09:23:48.840
> 
> 标签：html, css

我有一个设置宽度（以像素为单位）的 div，以`margin: auto;`. 如何将元素定位到此 div 的左侧或右侧，宽度动态调整为中心 div 的边距有多宽？

谢谢你的帮助！

编辑：更多信息...

基本上，它是以下设置：

```
<div></div>
<div style="margin:auto; width: 950px">content goes here</div>
<div></div> 
```

我想在中心 div 的左侧和右侧具有相同的背景图像，但在中心 div 中具有不同的背景图像。那么如何将左右 div 与中心 div 的左右对齐，宽度覆盖中心 div 的整个边距。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:34:54.797

如果它只是背景，你可以这样做：

```
<div style="background: url('path/to/image.jpg'); background-size: cover; position: absolute; left: 0; top: 0; right: 0; bottom: 0;">
  <div style="margin:auto; width: 950px">content goes here</div>
</div> 
```

它将背景投影到背景 div 上。然后在内部 div 上，您可以指定另一个背景，它将覆盖父 div 的背景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:11:02.033

这也应该有效......我已经缩小了宽度（以适应 jsfiddle [http://jsfiddle.net/Neograph734/Vb4Hm/1/](http://jsfiddle.net/Neograph734/Vb4Hm/1/)）。如果您应该同时编辑左边距。

```
<div style="margin:auto; width: 250px; background: red;">    
  <div id="left_sidebar" style="float: left; width: 200px; margin-left: -200px;">
    <div id="right_sidebar" style="float: left; width: 200px; margin-left: 450px;">

    </div>
  </div>

Content here

</div> 
```

更新：内容应在浮动 div 下方

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T10:18:41.210

***解决方案1：***

很容易解决这个问题`table`，就这样使用

```
<table width="100%">
   <tr>
       <td background="your/image/url5">content...</td>
       <td width="950" background="your/image/url">content goes here...</td>
       <td background="your/image/url5">content...</td>
  </tr>
</table> 
```

您可以使用所有三个块来编写内容，也可以使用不同的内容

***解决方案2：***

如果你需要 with `div`，那么你需要为此编写一点 jQuery

**html：**

```
<div class="left"></div>
<div class="center">content goes here...</div>
<div class="right"></div> 
```

**CSS：**

```
<style>
.left{
    background:url(your/image);
    float:left;
}
.center{
    background:url(your/image);
    float:left;
    width:950px;
}
.right{
    background:url(your/image);
    float:left;
}
</style> 
```

**jQuery :**

```
<script type="text/javascript">
    var window_width = $(window).width(); // get window width
    var total_remain = $(window).width()-950; // (-) your center div width
    var apply_width = total_remain / 2; // get remaining and divide by 2
    $(".left").css("width","apply_width"); // appying the width to the right / left
    $(".right").css("width","apply_width"); // appying the width to the right / left
</script> 
```

# javascript - AngularJS 在指令中添加 ng-click

> ID：13509398
> 
> 赞同：10
> 
> 时间：2012-11-22T09:24:04.953
> 
> 标签：javascript, jquery, angularjs, directive

我正在实施拖放指令。在放置时，我将元素的副本添加到我的 div 并将`ng-click`属性附加到它，如下所示：

```
copy.append('<button class="close" ng-click="abc()">&times;</button>'); 
```

例如，在控制器中我有

```
$scope.abc = function () {
    alert('Hello!');
} 
```

它不起作用。如果我手动在页面上添加此按钮，它工作正常。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T11:41:27.480

```
copy.append('<button class="close" ng-click="abc()">&times;</button>');
$compile(copy)($scope); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:45:37.387

我猜你确实需要编译你的新模板以便 AngularJS 识别它。文档为您提供了如何使用[`ng.$compile`](http://docs.angularjs.org/api/ng.$compile).

然后可以像这样进行克隆：

```
var templateHTML = angular.element('<p>{{total}}</p>'),
    scope = ....;

var clonedElement = $compile(templateHTML)(scope, function(clonedElement, scope) {
  //attach the clone to DOM document at the right place
}); 
```

# php - div 滑动效果不适用于 jQuery

> ID：13509401
> 
> 赞同：0
> 
> 时间：2012-11-22T09:24:16.233
> 
> 标签：php, jquery

我之前创建了这个问题，但以另一种方式，没有得到答案。所以今天我写了一些简单的代码来清晰地分享我的问题。

1.  我曾经`jQuery`调用图像幻灯片功能。
2.  中的 AJAX 函数`show.php`将调用`get.php`并在 DIV 中打印结果。

我的问题是在提供的 DIV 内滑动（上一个 - 下一个）`get.php`在`show.php`. 但是如果我`get.php`直接在我的浏览器中调用，那么它就可以工作。

我很困惑，我想在调用 AJAX 时我的 div 中有错误。

**我的文件**

**显示.php**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>test </title>
        <link rel="stylesheet" type="text/css" href="demo.css" />
        <script type="text/javascript" src="jquery-1.4.2.min.js"></script>
        <script type="text/javascript" src="newscript.js"></script>
        <link href="themes/2/js-image-slider.css" rel="stylesheet" type="text/css" />
        <script src="themes/2/js-image-slider.js" type="text/javascript"></script>
        <link href="generic.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <?php
            include("samiloxide.php");
            $sql=mysql_query(" select * from  section ");

            while($r=mysql_fetch_array($sql)){
                echo "<li><a  onclick='loadpage($r[id])' >$r[section]</a></li>" ;
            }
        ?>
        <div id="pageContent"></div>
    </body>
</html> 
```

**新脚本.js**

```
var section;
function loadpage(section){ 
    var section = section.toString();

    $.ajax({
       type: "POST",
       url: "get.php",
      dataType: "script",
       data: ({section : section}),
     success: function(html){
            $("#pageContent").empty();
            $("#pageContent").append(html);
        }
    });
} 
```

**获取.php**

```
<script type="text/javascript" src="jquery-1.4.2.min.js"></script>
<style type="text/css">
    <!--
    #gallery-wrap{margin: 0 auto; overflow: hidden; width: 732px; position: relative;}
    #gallery{position: relative; left: 0; top: 0;}
    #gallery li{float: left; margin: 0 20px 15px 0;}
    #gallery li a img{border: 4px solid #40331b; height: 175px; width: 160px;}
    #gallery-controls{margin: 0 auto; width: 732px;}
    #gallery-prev{float: left;}
    #gallery-next{float: right;}
    -->
</style>

<script type="text/javascript">
    <!--
    $(document).ready(function(){ 
        // Gallery
        if(jQuery("#gallery").length){
            // Declare variables
            var totalImages = jQuery("#gallery > li").length, 
            imageWidth = jQuery("#gallery > li:first").outerWidth(true),
            totalWidth = imageWidth * totalImages,
            visibleImages = Math.round(jQuery("#gallery-wrap").width() / imageWidth),
            visibleWidth = visibleImages * imageWidth,
            stopPosition = (visibleWidth - totalWidth);

            jQuery("#gallery").width(totalWidth);

            jQuery("#gallery-prev").click(function(){
                if(jQuery("#gallery").position().left < 0 && !jQuery("#gallery").is(":animated")){
                    jQuery("#gallery").animate({left : "+=" + imageWidth + "px"});
                }
                return false;
            });

            jQuery("#gallery-next").click(function(){
                if(jQuery("#gallery").position().left > stopPosition && !jQuery("#gallery").is(":animated")){
                    jQuery("#gallery").animate({left : "-=" + imageWidth + "px"});
                }
                return false;
            });
        }
    });
    -->
</script>

           <?php
            include("samiloxide.php");
//if(!$_POST['page']) die("0");

$section = (int)$_POST['section'];

$sql=mysql_query(" select * from images  where section='$section'");

echo "
<div id='gallery-wrap'>
    <ul id='gallery'>
    ";

while($rr=mysql_fetch_array($sql)){

      echo " <li><a href='$rr[image]'><img src='$rr[image]' alt='' /></a></li>";
           }
           echo "

    </ul>
</div>
<div id='gallery-controls'>
    <a href='#' id='gallery-prev'><img src='images/prev.png' alt='' />next</a>
    <a href='#' id='gallery-next'><img src='images/next.png' alt='' />last</a>
</div>
           ";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:54:09.903

这有点复杂，我无法为您的代码提供快速修复，您只需复制、粘贴和验证即可。

在`get.php`中，您加载带有图库的文档，并将*其*设置为工作图库`$(document).ready()`。

但是在`show.php`，当你加载`get.php`文件时，`$(document).ready()`不会被调用。`$(document).ready()`of很久以前就已经被调用了`show.php`，并且您的文档现在处于该`interactive`状态。因此，当您加载布局时，您不会自动执行使该布局工作的代码。

您必须将`$(document).ready()`代码移动到 in 中`get.php`，`show.php`然后将其绑定到 AJAX 调用完成。或者解`get.php`绑`$(document).ready()`.

**但是，这并不能在所有浏览器中一直得到保证**，因为虽然`$(document).ready()`在文档准备好时会正确调用，但`show.php`您所做的是要求加载 HTML 文件。

HTML 被加载，因此`onLoad`被触发。你不能指望不同。

*然后*该 HTML 要求加载其他资产（例如图像），但浏览器不知道这一点。它已经触发了`onLoad`，所以你已经执行了画廊设置代码。如果布局需要*已经加载*图像的 SRC 才能正确设置样式，那么它并不总是有效。它可能会第二次起作用，因为图像位于浏览器缓存中。它可能适用于快速连接，而不适用于慢速连接；它可能适用于快速加载的小图像，而不适用于较大的图像。所有这些行为表明*已经加载的图像是必要的*。

Again, a quick and dirty fix is to fire the setup after a suitable delay (but what is suitable? You can't know). Another possibility, if all the images are of known sizes, is to supply those sizes in HTML or CSS. After all, the layout usually requires images being loaded *so that they occupy space on the page*, but for that, you don't need images to be actually *displayable*. They might be empty spaces (maybe styled with a background).

A third possibility, more complicated but guaranteed to work in all browsers, is to save the image SRC's into another kind of tag (e.g. DIVs with a class of *imageloading*, by default hidden), and after the load() success to analyze these tags and convert them to IMGs attaching an `onload` to them. When all those onloads have fired, you know that it's OK to launch the gallery setup. While longer to describe (and code), this last method is actually *much faster* than the naive "quick fix: wait a bit and fire setup" one.

# php - 带有 preg_match_all 的正则表达式

> ID：13509403
> 
> 赞同：0
> 
> 时间：2012-11-22T09:24:29.603
> 
> 标签：php

使用正则表达式时出现问题：

```
php> $html = "<html><head><body><h1>hello world</h1><img src=\"data:rawIMGdata\" /><p/><img src=\"sdfsdf.jpg\" title=\"pic1\" /><p/><div class=\"myclass\"><img src=\"data:imageData\" /></div><img alt=\"bla\" src=\"bla.jpg\" title=\"bla\" /></body></html>";
php> $pat = '/<img.*src="(data:.*)"/m';
php> preg_match_all($pat, $html, $matching);
php> var_dump($matching);
array(2) {
  [0]=>
  array(1) {
    [0]=>
    string(169) "<img src="data:rawIMGdata" /><p/><img src="sdfsdf.jpg" title="pic1" /><p/><div class="myclass"><img src="data:imageData" /></div><img alt="bla" src="bla.jpg" title="bla""
  }
  [1]=>
  array(1) {
    [0]=>
    string(63) "data:imageData" /></div><img alt="bla" src="bla.jpg" title="bla"
  }  
} 
```

我的预期输出只是在第二个数组中出现“data:imageData”，而且应该有两个匹配项（“data:rawIMGdata”）

我是否以错误的方式定义了我的正则表达式？

问候， 布朗科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:27:44.033

您可能想要考虑使用 DOM Document 来解析 HTML，尽管如果这个示例很复杂，那么您可能会使用正则表达式；不过，DOM 文档总是会更加健壮。

试试这个：

```
/<img.*?src="(data:[^"]*)"/m 
```

这 ？将 * 设置为非贪婪（因此它将获得最小匹配，默认情况下它会尽可能多地抓取）

而不是匹配任何东西，你可以用 [^"] 匹配任何不是 " 的东西。

.* 之前是贪婪的并且匹配另一个元素中的 "

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:32:49.200

您基本上是在告诉 PCRE 获取太多信息。正则表达式匹配运算符将尽可能匹配，这就是为什么您会在匹配中获得如此多的额外内容。首先，切换到使用非贪婪变体来匹配初始空格，或者匹配元素的内容。其次，引入适当的分隔符来匹配属性内容的结尾。这是您应该使用的模式：

```
$pat = '/<img.*?src="(data:[^"]*)"/m'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T09:39:15.270

如果您尝试解析有效​​（几乎有效）的 HTML，您可以尝试使用[仅用于解析 XML 的工具，](http://www.php.net/manual/en/refs.xml.php)例如[`DOM`](http://php.net/manual/en/book.dom.php)，它可以让您非常有效地浏览 XML。

RegExp 肯定会完成这项工作，但是一旦你交换`'`或`"`html 更改`<img src="">`，`<img class="" src="">`你可能会遇到问题。

XML 解析实用程序通常还负责转义和“取消转义”参数，处理重复的参数。

例如使用[`DOMxPath`](http://www.php.net/manual/en/domxpath.query.php)（这里是[[tutorial]](http://www.w3schools.com/xpath/xpath_syntax.asp)）：

```
$doc = new DOMDocument;
$doc->Load('book.xml');
$xpath = new DOMXPath($doc);
$query = '//img';

$entries = $xpath->query($query);

foreach ($entries as $entry) {
    if( !$entry->hasElement('src')){
        continue;
    }

    $src = $entry->getAttribute( 'src');

    if( strncmp( $src, 'data:', 5) != 0){
       continue;
    }

    $content = substr( $src, 5);

    // Do whatever you need
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T09:32:27.713

尝试使用“懒惰”的表达方式——

```
$pat = '/<img(.*?)src="(data:.*)"/m'; 
```

更多信息：[http ://www.regular-expressions.info/repeat.html](http://www.regular-expressions.info/repeat.html)

# java - 永久解决 Lucene LockObtainFailed 异常（在 Java 中）

> ID：13509404
> 
> 赞同：0
> 
> 时间：2012-11-22T09:24:30.157
> 
> 标签：java, lucene

我正在研究使用 Lucene Search（不使用 Solar 的简单 Lucene 库）的 Java 项目。当我运行项目时，它卡住了，一段时间后它显示`org.apache.lucene.store.LockObtainFailedException: Lock obtain timed out exception.`

解决此问题的最快和简单的方法是删除`write.lock`lucene 索引文件夹中的文件并重新启动 tomcat。但是当我运行我的应用程序时，它会显示相同的异常。我想要永久解决这个问题。

请在这方面帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T09:31:23.097

出现该错误是您处理`IndexReader`和处理方式出现问题的明显迹象`IndexWriter`。您可能为同一个目录打开了不止一个。而不是直接处理它们，您应该使用`NRTManager`or `SearcherManager`，它会根据最佳实践自动处理重新打开。

# ruby - 如何在 GDAL ruby 绑定中显式关闭数据集？

> ID：13509405
> 
> 赞同：4
> 
> 时间：2012-11-22T09:24:35.110
> 
> 标签：ruby, swig, gdal

我正在使用ruby​​1.9 中的[GDAL](http://www.gdal.org) 1.7.1 来生成 GeoTIFF 文件。在本[教程](http://www.gdal.org/gdal_tutorial.html)中，他们建议使用 GDALClose() 关闭数据集并将任何剩余内容刷新到文件系统。同样的情况也发生在数据集的析构函数中。问题是 ruby​​ 绑定依赖于这种析构机制来关闭数据集，我需要文件的结果已经在生成它的过程中。由于 ruby​​ 是垃圾收集的，因此如果不退出 ruby​​ 进程，我似乎无法可靠地关闭我的文件。现在我修补了我的 GDAL 版本以支持 GDALClose 方法，但这似乎不是一个好的长期解决方案。

```
require 'gdal/gdal'

[...]

# open the driver for geotiff format
driver = Gdal::Gdal.get_driver_by_name('GTiff')
# create a new file
target_map = driver.create(output_path,
                xsize,
                ysize, 3,
                Gdal::Gdalconst::GDT_UINT16, ["PHOTOMETRIC=RGB"])

# write band data
3.times do |i|
    band = target_map.band(i + 1)
    target_map.write_band(i + 1, mapped_data)
end

# now I would like to use the file in output_path, but at this point 
# large parts of the data still resides in memory it seems until 
# target_map is destroyed

file = File.open( output_path, "r" )

[...] 
```

ruby 或 swig 中是否有一些东西可以强制调用析构函数，我可能忽略了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:51:35.877

通常，在 Python 中对 GDAL 绑定所做的是将对象设置为`None`. 所以在 Ruby 中，这将是`nil`：

```
band = nil
target_map = nil 
```

这是一种保存/刷新/关闭数据的有趣方式，但它就是这样做的。

# android - Android 中的 DDMS 问题

> ID：13509406
> 
> 赞同：0
> 
> 时间：2012-11-22T09:24:39.700
> 
> 标签：android, eclipse, device, adb, ddms

> **可能重复：**
> [插件 com.android.ide.eclipse.adt 无法加载类 android](https://stackoverflow.com/questions/10151691/plug-in-com-android-ide-eclipse-adt-was-unable-to-load-class-android)

我在 Android 中更新 DDMS 模块（Help> Check for Updates），但现在当我启动 Eclipse 时会出现此错误：

```
Plug-in com.android.ide.eclipse.adt was unable to load class     com.android.ide.eclipse.adt.ToolsLocator.
An error occurred while automatically activating bundle com.android.ide.eclipse.adt (802). 
```

即使我可以使用 adb devices 看到我连接的设备

我在 DDMS > 设备中看不到它（在 Eclipse 中）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T09:29:15.467

只需按照以下步骤操作：

在 Eclipse 帮助 > 安装新软件 > 使用：[https](https://dl-ssl.google.com/android/eclipse/) ://dl-ssl.google.com/android/eclipse/添加名为 Android 的存储库。选择所有Developer Tools DDMS（Dalvik Debug Monitor Server）透视图、Development Tools、Hierarchy Viewer、Traceview。接受许可证和未签名的警告。重新启动 Eclipse。

安装后，在帮助 > 更新中获取更新。

# c++ - 对 operator<<.... 的未定义引用是什么意思？在 C++ 中

> ID：13509409
> 
> 赞同：0
> 
> 时间：2012-11-22T09:24:47.310
> 
> 标签：c++, class, function, friend

我在课堂上有朋友功能。（在头文件中。head.h）我已经在head.cpp和head.h中实现了类外我有ostream& operator<< (ostream& out, TreeNode* ptr); 我也在 head.cpp 中实现。这有什么问题吗？

头文件

```
friend ostream& operator<< (ostream& out, const TreeDB& ptr);
 ostream& operator<< (ostream& out, TreeNode* ptr); 
```

执行

```
ostream& operator<< (ostream& out, TreeNode* ptr)
{
 if(rhs!=NULL)
 {
  operator<<(out,ptr->Left());
  out<<(*(ptr->Entry()));
  operator<<(out,ptr->Right());
 }
 return out;
}

ostream& operator<< (ostream& out, const TreeDB& ptr)
{
 return (operator<<(out,ptr.root));
} 
```

错误：未定义对 'operator<<(std::basic_ostream >&,DBentry const&)' 的引用

DBentry 是另一个操作数据库条目的类

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:48:04.243

您的 TreeDB 打印全局函数在您的类定义（我们假设）中是友好的：

```
friend ostream& operator<< (ostream& out, const TreeDB& ptr); 
```

您稍后将其定义为

```
ostream& operator<< (ostream& out, const TreeDB& ptr)
{
   return (operator<<(out,ptr.root));
} 
```

注意：**`ptr`是 const；因此`ptr.root`也是 const**

现在看看你的节点指针运算符：

```
ostream& operator<< (ostream& out, TreeNode* ptr) 
```

`ptr`不是 const，因此该运算符不适用。它应该是：

```
ostream& operator<< (ostream& out, const TreeNode* ptr) 
```

一旦你解决了这个问题。你的错误信息：

> 错误：未定义对 'operator<<(std::basic_ostream >&,DBentry const&)' 的引用

这几乎可以保证是因为您没有以下内容：

```
ostream& operator <<(ostream& os, const DBEntry& entry); 
```

如果您确实有这样的运算符，则很有可能它没有`const`在右侧使用限定符声明，就像您`const TreeNode*`在其`operator <<()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:29:33.343

当你得到一个未定义的引用时，它通常是缺少函数定义的症状，签名与定义和声明的微小差异，或者函数的定义没有编译/链接。

因此，请检查您的参数是否匹配，名称空间是否匹配，以及函数的定义是否确实已编译。

据我在您提供的代码中看到的，您尚未定义 operator<< for `DBEntry& const`。

# sql - 更新 SQL 中最早的记录？

> ID：13509411
> 
> 赞同：1
> 
> 时间：2012-11-22T09:24:51.243
> 
> 标签：sql

我现在有一个问题，我想更新我的表中名为 Service_Log_Temp 的作业的最早条目，重复 = '否'，其余的重复 = '是'

这是我现在的桌子：

![http://s15.postimage.org/gulifcaiz/Current_Table.jpg](../Images/f4bfd0140c4db125bc95a7face38da34.png)

所以我想要一个查看 K_B_Job_No 的脚本（你会看到我在这里列出了 2 个不同的工作）并根据 L1_GA_SR_Creation_Date 和 L2_B_Start_time_Of_Activity 更新最早的条目，其中 Duplicate = 'No'，其余的 Duplicate = 'Yes'。

它应该是这样的：

![http://s14.postimage.org/h7zx5xgj5/Desired_Table.jpg](../Images/b398ee8c2e589d1861ea82dc990d1835.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:21:57.737

这应该在postgres中工作，其中连接是|| - 您必须将其更改为系统中的串联

背景：查找每个作业的第一次运行时间：

```
select k_r_job_no,min( L1_GA_SR_Creation_Date+L2_B_Start_time_Of_Activity) from
service_log_temp
group by k_r_job_no 
```

问题是我们无法从这个查询中得到 ids ......

但我们可以将其用作子查询。由于通常不可能从子查询中获取多于一行，因此我们必须进行串联以获得每个作业的正确时间：（您可能需要进行类型转换才能使串联工作）

```
select key_service from service_log_temp where 
   k_r_job_no||L1_GA_SR_Creation_Date+L2_B_Start_time_Of_Activity in( 
     select k_r_job_no||min( L1_GA_SR_Creation_Date+L2_B_Start_time_Of_Activity) 
       from service_log_temp
        group by k_r_job_no
     ) 
```

这可以重写为更新：

```
update service_log_temp set Duplicate='Yes' where 
   k_r_job_no||L1_GA_SR_Creation_Date+L2_B_Start_time_Of_Activity in( 
     select k_r_job_no||min( L1_GA_SR_Creation_Date+L2_B_Start_time_Of_Activity) 
       from service_log_temp
        group by k_r_job_no
     ) 
```

然后之后

```
 update service_log_temp set Duplicate='No' where Duplicate is null 
```

（或者，如果您想在一个查询中使用 SRIRAM 建议的“案例”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:10:14.767

```
;with a as (select K_B_Job_No, min(L1_GA_SR_Creation_Date + cast(L2_B_Start_time_Of_Activity as datetime)) as dttime from Service_Log_Temp
group by K_B_Job_No)
select key_service,K_B_Job_No,L1_GA_SR_Creation_Date,L2_B_Start_time_Of_Activity, 
(case when
(select dttime from a where a.K_B_Job_No=b.K_B_Job_No)=(L1_GA_SR_Creation_Date + cast(L2_B_Start_time_Of_Activity as datetime))
then 'NO' else 'YES' end) as Duplicate
from Service_Log_Temp b 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:42:24.617

尝试这个

```
select key_service,k_r_job_no,L1_GA_SR_Creation_Date,L2_B_Start_time_Of_Activity,
   case 
    when (select min(L1_GA_SR_Creation_Date) and min(L2_B_Start_time_Of_Activity)
       then 'No'
      else 'Yes'
  end as Duplicate
from Service_Log_Temp
group by k_r_job_no 
```

# android - ListView setonclicklistener 中的 CheckBox 无法正常工作

> ID：13509417
> 
> 赞同：0
> 
> 时间：2012-11-22T09:25:42.410
> 
> 标签：android, listview, checkbox, onitemclicklistener, ischecked

我有一个`ListView`with`CheckBox`和一个`TextView`. 在我的适配器`getView()`方法中，我在复选框上实现了这个监听器。

```
holder.check.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            HashMap<String, String> localMap = (HashMap<String, String>) holder.check
                    .getTag();
            if (holder.check.isChecked()) {
                trackinglist.add(localMap.get("taskid"));
                checkedlist.add(localMap.get("taskid"));
            } else {
                if (trackinglist.contains(localMap.get("taskid"))) {
                    trackinglist.remove(localMap.get("taskid"));
                }
                if (alreadycheckedlist.contains(localMap.get("taskid"))) {
                    undonelist.add(localMap.get("taskid"));
                    alreadycheckedlist.remove(localMap.get("taskid"));
                } else {
                    checkedlist.remove(localMap.get("taskid"));
                }
            }

        }
    }); 
```

现在我的问题是`holder.check.isChecked()`即使`CheckBox`单击并选中它也总是返回false。什么可能导致这种行为？是的，我不想使用`setoncheckchangelistener`. 请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:36:17.990

你可以使用

```
holder.check.setOnCheckedChangeListener(new OnCheckedChangeListener(){
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
    {
        if ( isChecked )
        {
            // perform logic
        }

    }
}); 
```

# hibernate - 即使某些表没有记录，也可以在 hql 中检索多条记录

> ID：13509418
> 
> 赞同：0
> 
> 时间：2012-11-22T09:25:46.157
> 
> 标签：hibernate, hql

我有一种情况，需要从多个表中检索记录，并且根据条件标准，某些表可能没有记录例如：-

```
select *
from A a, B b, C c, D d, E e 
where a.CERT_REQUEST_ID = '' 
  and a.CERT_OBJ_RLT_CD = '' 
  and b.CERT_ID = a.CERT_OBJ_KEY_ID 
  and b.CERT_TRS_SEQ_NBR = a.CERT_TRS_SEQ_NBR 
  and b.CERT_TRS_SEQ_NBR = c.CERT_TRS_SEQ_NBR 
  and b.CERT_ID = c.CERT_ID 
  and c.CERT_OBJ_KEY_ID = d.CERT_OVERRIDE_ID 
  and e.CERT_WORDING_ID = c.CERT_OBJ_KEY_ID 
```

表 E、D 可能没有上述标准的记录。所以在这种情况下，我还需要其他表的记录。

我可以通过左外连接来实现这一点，但 HQL 不支持连接，而且这些表也没有映射。那么，如何在 hql 中实现这一点。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:36:19.893

HQL 确实支持连接（包括左连接）：[link](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-joins)。

但是，如果未映射表，您将无法使用 HQL。

[您可以通过createSQLQuery()](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#createSQLQuery%28java.lang.String%29)在 SQL 中使用查询。

# c# - C#中的MongoDB MapReduce问题

> ID：13509423
> 
> 赞同：0
> 
> 时间：2012-11-22T09:25:53.263
> 
> 标签：c#, mongodb, mapreduce, deserialization

我正在用**C#编写一个相对简单的****MongoDB MapReduce**演示。

 **代码如下：

```
 public List<CategorySummaryResult> GetCategorySummaries()
    {
        string map = @"
            function() {
                var key = this.FeedType;
                var value =  {count: 1, names: this.Name};
                emit(key, value);
            }";

        string reduce = @"
            function(key, values) {
                var result =  {count: 0, names: ''};

                values.forEach(function(value) {
                    result.count += value.count;
                    result.names += ',' + value.names;
                });

                return result;
            }";

        string finalize = @"
            function(key, value) {
                if (value.names.charAt(0) === ',')
                    value.names = value.names.substr(1);

                return value;                  
            }";

        var options = 
            MapReduceOptions
                .SetFinalize(finalize)
                .SetOutput(MapReduceOutput.Inline);

        var result =
            _db.GetCollection("NewsCategories")
                .MapReduce(map, reduce, options)
                .GetInlineResultsAs<CategorySummaryResult>()
                .ToList();

        return result;
    } 
```

要反序列化的对象：

```
public class CategorySummaryResult
{
    public double id { get; set; }
    public ICollection<CategorySummary> value { get; set; }
}

public class CategorySummary
{
    public double count { get; set; }
    public string names { get; set; }
} 
```

下面是 BSON 输出的样子：

```
[0]: { "_id" : 1.0, "value" : { "count" : 3.0, "names" : "Games,Technologie,Auto" } }
[1]: { "_id" : 2.0, "value" : { "count" : 1.0, "names" : "Hoofdpunten" } } 
```

但是我不断收到以下异常：

```
An error occurred while deserializing the value property of class MetroNews.Managers.CategorySummaryResult:
 Expected element name to be '_t', not 'count'. 
```

出了什么问题，**我该如何解决**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:31:23.563

您无法正确序列化/反序列化 ICollection。

它将很好地序列化为任何对象的列表，但是当您想要反序列化它时会出现问题。

反序列化器无法实例化 ICollection 并且不知道要使用哪种特定类型，除非您通过约定指定它。

你应该改变

```
public class CategorySummaryResult
{
   public double id { get; set; }
   public ICollection<CategorySummary> value { get; set; }
} 
```

类似于

```
public class CategorySummaryResult
{
   public double id { get; set; }
   public List<CategorySummary> value { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:09:12.673

尝试添加`[BsonDiscriminatorAttribute(required=true)]`到您的`CategorySummary`课程中。**

# php - codeigniter，选择两次与否

> ID：13509424
> 
> 赞同：0
> 
> 时间：2012-11-22T09:25:55.813
> 
> 标签：php, database, codeigniter

我想知道是否需要选择（where 语句）两次，如果我想更新数据库中的特定用户。

例子，

```
// Add new income for the day
function add_new_income($user_id, $budget_group_id, $day, $month, $year, $income)
{

    // Check if there has been posted anything at the same day
    $this->db->where('day',$this->current_date);
    $this->db->where('month',$this->current_month);
    $this->db->where('user_id',$user_id);
    $this->db->where('budget_group_id',$budget_group_id);

    $query = $this->db->get('budget_day',1);

    // Check if something was found
    if($query->num_rows() > 0)
    {
        // If something was found, update the value
        $data = array('income_total' => $income);
        $this->db->update('budget_day',$data);
    }

} 
```

这行得通吗？还是我必须运行一个新的“db->where”语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:30:14.670

你需要写两次 where 条件，但你可以单行尝试如下：

```
$this->db->where(array('day'=>$this->current_date, 'month'=>$this->current_month, 'user_id'=>$user_id, 'budget_group_id'=>$budget_group_id)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:30:37.240

您将不得不`where`为`update`. 最好将所有`where`条件存储在其中并在必要时`array`使用它`array`。`select``update`

```
$where = array(
    'day' => $this->current_date,
    'month' => $this->current_month,
    'user_id' => $user_id,
    'budget_group_id' => $budget_group_id
);
...
$this->db->where($where); 
```

在您的情况下，似乎不需要两个查询，您只需要运行`update`查询。您可以使用它`$this->db->affected_rows()`来检查某些内容是否已更新。

# jquery - 使用 AJAX 加载外部内容

> ID：13509425
> 
> 赞同：0
> 
> 时间：2012-11-22T09:25:57.273
> 
> 标签：jquery, ajax

我在导航的帮助下使用 ajax 加载外部内容。

一切正常。如果用户经常点击菜单选项卡，他也不能再次加载相同的内容。但是，如果用户是第一次访问网站，他可以再次加载内容（第一个菜单选项卡）。

我希望这对用户来说是不可能的。

这是JavaScript：

```
$.get('header/1.php', function(data) {
    $('.contentHeader').html(data);
}); 

$.get('content/1.php', function(data) {
    $('.content').html(data);
}); 

$.get('advertisement/1.php', function(data) {
    $('.advertisement').html(data);
}); 
var current;
$(".navigation li").click(function() {
    var source = $(this).attr('id') + ".php";

    // the current content doesn't load again
    if(current === source) {
        return;
    }

    current = source;

    // content
    $(".content").fadeOut(function() {
        $(this).load("content/" + source).fadeIn('normal');
    })

    // advertisement
    $(".advertisement").fadeOut(function() {
        $(this).load("advertisement/" + source).fadeIn('normal');
    })

    // header
    $(".contentHeader").fadeOut(function() {
        $(this).load("header/" + source).fadeIn('normal');
    })

}); 
```

这是html代码：

```
<div class="navigation">

        <ul>
            <li id="1">
                <div id="menuImage1" class="menuImage"></div>
                <div class="menuText"><p>1</p></div>
            </li>
            <li id="2">
                <div id="menuImage2" class="menuImage"></div>
                <div class="menuText"><p>2</p></div>
            </li>
            <li id="3">
                <div id="menuImage3" class="menuImage"></div>
                <div class="menuText"><p>3</p></div>
            </li>
            <li id="4">
                <div id="menuImage4" class="menuImage"></div>
                <div class="menuText"><p>4</p></div>
            </li>
            <li id="5">
                <div id="menuImage5" class="menuImage"></div>
                <div class="menuText"><p>5</p></div>
            </li>
            <li id="6">
                <div id="menuImage6" class="menuImage"></div>
                <div class="menuText"><p>6</p></div>
            </li>
        </ul>

    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:35:57.120

我认为你应该初始化`current`变量。

IE -：

```
$.get('header/1.php', function(data) {
    $('.contentHeader').html(data);
}); 

$.get('content/1.php', function(data) {
    $('.content').html(data);
}); 

$.get('advertisement/1.php', function(data) {
    $('.advertisement').html(data);
}); 
var current = "1.php";
$(".navigation li").click(function() {
    var source = $(this).attr('id') + ".php";

    // the current content doesn't load again
    if(current === source) {
        return;
    }

    current = source;

    // content
    $(".content").fadeOut(function() {
        $(this).load("content/" + source).fadeIn('normal');
    })

    // advertisement
    $(".advertisement").fadeOut(function() {
        $(this).load("advertisement/" + source).fadeIn('normal');
    })

    // header
    $(".contentHeader").fadeOut(function() {
        $(this).load("header/" + source).fadeIn('normal');
    })

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:36:07.967

替换您的以下行：

```
var current; 
```

对于这个：

```
var current = '1.php'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:35:10.023

怎么样？：

```
if($(_element).is('visible')){
 // do not load again content
}else{
//load content
} 
```

`_element`应该是刚刚加载的内容中的某个 id 或 class :)

# php - 使用php随机化

> ID：13509430
> 
> 赞同：0
> 
> 时间：2012-11-22T09:26:07.777
> 
> 标签：php, mysql

我尝试使用 ORDER BY rand() 来随机化从我的 php 网站中的 MySQL 表中获取的数据。但是，问题是，在我转到下一页后，第 1 页的一些数据出现在第 2 页中，依此类推。我尝试在网上搜索随机化的 php 版本。但是，我找不到它。谁能帮我解决这个问题？谢谢 :D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:36:26.940

你可以通过仍然使用 SQL-rand() 来做到这一点。

不要调用 rand() 为空，而是使用种子调用它，它保持不变。在 php.ini 中随机生成该种子。

例如，`ORDER BY rand(5)`将始终返回相同的订单。

如果您使用 Ajax 调用来加载其他页面，请在每次调用时提交相同的种子。如果它是在每个页面切换时重新加载页面，您可以使用 GET/POST 发送它以使其保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:34:02.383

为什么要对随机数据进行分页？

但是...如果您仍然想这样做，您可以使用 POST 请求从一个页面移动到另一个页面。但这仍然是无法使用的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:35:18.870

看来您正在 php.ini 中搜索类似 shuffle() 的函数。将返回的数据存储在数组中并使用 shuffle(array)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T09:30:54.483

如果您每次都计算随机数，很明显您在其他页面上也会有相同的值。您需要获取一次随机数并将其传递给其他站点，例如。每个 HTTP-Get。

使用一些代码，有人可以为您提供更多帮助；）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T09:33:51.870

我想您`LIMIT x,y`在查询中使用进行分页。因此，**一种可能的解决方案**`SEED`是在您的中使用 a`ORDER BY`并通过 SESSION 或通过 GET 传递它

例子：

```
$seed = isset($_SESSION['seed'])? $_SESSION['seed'] : mt_rand();
$_SESSION['seed'] = $seed;
$qry = "SELECT * FROM `table` ORDER BY RAND($seed) LIMIT 0,5"; 
```

# javascript - XML 查找每个 javascript 请求，另一个每个在主每个

> ID：13509433
> 
> 赞同：0
> 
> 时间：2012-11-22T09:26:15.580
> 
> 标签：javascript, jquery, xml, ajax

我一直在 phonegap 框架的帮助下开发 android 应用程序。我制作了 1 个 php -xml 文件来解析从我的站点到应用程序的数据。我遇到的问题是，当我单击按钮时，我想获取`<vic></vic>`单击的 cat_id 的所有分隔符，这是带有 xml 文件的链接 [http://smeshnoto.eu/rss/mobile_vicove_cats.php](http://smeshnoto.eu/rss/mobile_vicove_cats.php)

目前我有这个代码：

```
function showVicoveKategorii(){
      var xml = '';
    $.ajax({
      url: "http://smeshnoto.eu/rss/mobile_vicove_cats.php",
      dataType: 'xml',
     success: kategorii,
     error: function () {
         alert('Грешка в сървъра');
     }
    });

}

function kategorii(xml){
     var obj = document.getElementById("vicove_kategorii_id");  
$(xml).find('category').each(function(){
  var catname = $(this).find('cat_name').text();
  var catid = $(this).find('cat_id').text();
  var titlevic = $(this).find('title_vic').text();
  var descvic = $(this).find('desc_vic').text();
  addContent(obj, '<a href="" onClick="alert(\''+descvic+'\');" data-role="button">'+catname+'</a>');

});

} 
```

我希望当我单击按钮时，警报全部`<vic></vic>`包含`<br>`在每个元素之后，当然那些`<vic></vic>`来自单击的类别（cat_id）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:07:23.450

解决方案是使用[http://smeshnoto.eu/rss/mobile_vicove_cats.php?cat_id=ChosenID](http://smeshnoto.eu/rss/mobile_vicove_cats.php?cat_id=ChosenID) 以便您可以从所选 id 中获取项目 :)

# c# - 如何将游戏对象放入列表中？

> ID：13509436
> 
> 赞同：0
> 
> 时间：2012-11-22T09:26:32.007
> 
> 标签：c#, list, unity3d, instantiation, gameobject

我有游戏对象，我需要将它们放入列表中，如下所示：

`List<GameObject> unityGameObjects = new List<GameObject>();`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-11T23:47:07.313

您首先创建您的列表。

```
List<GameObject> unityGameObjects = new List<GameObject>(); 
```

您需要引用要添加到列表中的 GameObject。您可以通过查找 GameObject 或创建它的新实例来完成此操作。

### 寻找游戏对象

```
GameObject g = GameObject.Find("NameOfGameObject");
unityGameObjects.Add(g); 
```

### 创建新实例

您不能调用`new`GameObjects，因为它们是 MonoBehaviours，但您可以从预制件中实例化它们。

```
GameObject g = Instantiate(prefab);
unityGameObjects.Add(g); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:33:11.713

```
unityGameObjects.Add(new GameObject()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-18T17:39:30.983

```
MyList.AddRange( new List<GameObject> { new GameObject { name = "Frank", tag = "3" ,layer= 2, active = isActiveAndEnabled, hideFlags =  HideFlags.HideInHierarchy, isStatic = false },
                                       new GameObject { name = "Jill", tag = "3" },
                                       new GameObject { name = "Dave", tag = "5" },
                                       new GameObject { name = "Jack", tag = "8" },
                                       new GameObject { name = "Judith", tag = "12" },
                                       new GameObject { name = "Robert", tag = "14" },
                                       new GameObject { name = "Adam", tag = "1" } } ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T12:19:30.730

我找到了我的问题的解决方案，因此我会问我的问题，也许它对其他人有帮助：

```
 unityGameObjects.Add(GameObject.Find(unityObject.Value)); 
```

# java - Android：Dialog Builder 多选设置数组

> ID：13509444
> 
> 赞同：3
> 
> 时间：2012-11-22T09:27:15.340
> 
> 标签：java, android, android-dialog

我正在尝试关注有关多选对话框的 android 文档。我遇到了问题，我认为这与我尝试加载的数组类型有关。

```
public void addCondition(View view){

         ArrayList<String> mHelperNames= new ArrayList<String>();
           mHelperNames.add("Test Item");
           mHelperNames.add("Test Item");
           mHelperNames.add("Test Item");

           mSelectedItems = new ArrayList();  

            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setTitle("My Title")
                   .setMultiChoiceItems(mHelperNames, null,
                              new DialogInterface.OnMultiChoiceClickListener() {
                       @Override
                       public void onClick(DialogInterface dialog, int which,
                               boolean isChecked) {
                           if (isChecked) {

                               mSelectedItems.add(which);
                           } else if (mSelectedItems.contains(which)) {

                               mSelectedItems.remove(Integer.valueOf(which));
                           }
                       }
                   })

                   .setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
                       @Override
                       public void onClick(DialogInterface dialog, int id) {
                            //Create onlcick method
                       }
                   })
                   .setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {
                       @Override
                       public void onClick(DialogInterface dialog, int id) {
                            //Create onlcick method
                       }
                   });
            builder.show();

    } 
```

以上是我的代码，但它是eclipse中的红线城市：

![在此处输入图像描述](../Images/6aa13b617af81ba5003700c31977e00c.png)

在文档中，从未声明过 mSelectedItems，而且我不太确定我将其声明为什么。

.SetMultipleChoiceItems 上的错误是：

AlertDialog.Builder 类型中的方法 setMultiChoiceItems(int, boolean[], DialogInterface.OnMultiChoiceClickListener) 不适用于参数 (ArrayList, null, new DialogInterface.OnMultiChoiceClickListener(){})

但是，如果我从字符串中更改它，如何在其中显示文本项？任何帮助将不胜感激。

汤姆

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T09:32:55.543

您必须提供一个`CharSequence[]`to`setMultiChoiceItems`方法，而不是一个`ArrayList`.

你可以这样创建`mHelperNames`：

```
CharSequence[] mHelperNames = new CharSequence[] { "test item 1", "test item 2" }; 
```

并且不要忘记声明`mSelectedItems`：

```
final List<Integer> mSelectedItems = new ArrayList<Integer>(); 
```

（它必须是最终的，因为您从内部类访问它）

`mHelperNames`如果您以后需要修改它，您也可以保留为 ArrayList。然后您需要在调用时将其转换为数组`setMultiChoiceItems`：

```
 List<CharSequence> mHelperNames = new ArrayList<CharSequence>();
    mHelperNames.add("Test Item 1");
    mHelperNames.add("Test Item 2");

    final List<Integer> mSelectedItems = new ArrayList<Integer>();

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("My Title")
            .setMultiChoiceItems(mHelperNames.toArray(new CharSequence[mHelperNames.size()]), null,
                    new DialogInterface.OnMultiChoiceClickListener() {
                        @Override
                        public void onClick(DialogInterface dialog,
                                int which, boolean isChecked) {
                            if (isChecked) {

                                mSelectedItems.add(which);
                            } else if (mSelectedItems.contains(which)) {

                                mSelectedItems.remove(Integer
                                        .valueOf(which));
                            }
                        }
                    }) 
```

# android - Android LocationListener 从 GPS 切换到网络

> ID：13509452
> 
> 赞同：4
> 
> 时间：2012-11-22T09:27:47.897
> 
> 标签：android, location

我有一个服务实现 LocationListener 监听 GPS 和网络。

该应用程序依赖于持续的位置反馈，但似乎当 GPS 难以获取 locationfix 网络位置时，它**不会**介入。

```
manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000 * 30,0, LocationReporterService.this);
manager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 1000 * 60 * 2,0, LocationReporterService.this); 
```

**问题**
如何确保始终获得位置信息？
我如何确保如果我没有获得 GPS 位置，我会获得网络位置？
这是一个已知的错误吗？
我应该有 2 个服务，GPSLocationService 和 NetworkLocationsService 吗？
有针对这个的解决方法吗？:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T21:09:55.640

我同意 AlexBottoni 的大部分评论很好的回答，尽管在某些方面我不能支持他。

**概述**

首先，只是为了检查你是否做对了......

您`LocationListener`为两个提供商设置相同的设置。要确定您从哪里接收位置，您需要像这样测试它：

```
public void onLocationChanged(Location fix) {
    if(fix.getProvider().equals(LocationManager.GPS_PROVIDER)){
        //here Gps
    } else if(fix.getProvider().equals(LocationManager.NETWORK_PROVIDER)){
        //here Network
    } 
```

此外，您可以设置不同的采集频率。每 30 秒和每 2 分钟`Gps`提供一个新位置。`Network`

由于您没有规定最小距离，您应该`Location`从每个供应商那里收到一个新的（只要他们能得到修复），并按照要求的频率。如果您没有收到修复，是因为他们无法获得修复。

此外，获得修复（主要是使用 Gps）可能需要更长的时间，因为与卫星同步和修复位置可能需要一些时间。

**倒退**

从一个提供者到另一个提供者没有内置的回退。正如亚历克斯所说，他们是独立的。我正在使用以下方法来实现回退：

*   注册 Gps 监听器并启动计时器
*   在每个 GPS 位置，重新启动计时器
*   如果计时器结束，注册网络监听器（Gps监听器保持注册）
*   如果新的 Gps 位置到达，取消注册网络侦听器，重新启动计时器

**首选供应商**

虽然`Gps`可能不是随处可用，但最精确的`Network`。在我的城镇，GPS 精度为 6 米，网络精度为 1 公里 :-(

**两项服务**

无论您在哪里注册监听器、活动或服务，将它们分开，只要您请求它们并且提供者可以得到修复，您就会得到位置（假设应用程序中没有错误:-)）

**最后的笔记**

确保您拥有所需的权限（ACCESS_FINE_LOCATION、INTERNET 等）。

确保电话设置启用了网络位置（通常默认为禁用）

大多数 Gps 接收器支持更新有关卫星位置的信息，从而缩短了定位时间。你可以`GPS Satus`从市场上使用，做到这一点。

问候。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T10:54:53.990

这真的很奇怪，因为，AFAIK，只有当第一个（GPS）不起作用时，Android才会退回到第二个选择（网络位置提供者）。这两个位置提供者是独立的，应该彼此独立地向您的听众发送位置更新。因此，第一个（GPS）在任何情况下都不应该能够阻止第二个（网络）。

关于你的问题：

如何确保始终获得位置？

你没有。没有办法确定。在某些情况下，您无法获得任何位置修复，因为没有可用的位置参考。地铁/地铁站经常出现这种情况。没有 GPS，没有蜂窝天线（不是每个人都住在纽约或伦敦……），没有 Wi-Fi 热点，因此无法确定您当前的位置。信不信由你，在我镇的新医院里，我们目前遇到这种情况，因为 GPS 星座不可见（室内......），还没有安装 wi-fi 热点，唯一可用的 CellID 天线只是几百米外，因此无论在建筑物内外，您都可以在任何地方获得相同的信号。

我如何确保如果我没有获得 GPS 位置，我会获得网络位置？

你也不能。这取决于可用的网络。无论如何，您可以在代码中检查您从位置提供者那里获得的信息，然后从一个切换到下一个，直到获得可用的位置修复。

这是一个已知的错误吗？

不，这不是错误。它更多是现有技术的已知限制。

我应该有 2 个服务，GPSLocationService 和 NetworkLocationsService 吗？

这是可以尝试的。正如尼克已经说过的，这不应该是一个问题，但支票不应该受到伤害。

有针对这个的解决方法吗？:)

如果您的应用主要用于城市环境（城镇），您很可能应该使用网络定位引擎作为您的主要定位引擎。如今，每个村庄和城镇都被大量的手机天线和大量的 Wi-Fi 热点所覆盖，因此您更有可能从网络位置提供商那里获得比 GPS 定位器更好的定位。在高楼和狭窄道路的城镇中尤其如此（这不仅意味着纽约市。即使在威尼斯，我们的 GPS 也有问题）。网络引擎在获得第一次修复方面也更快，并且在室内也可以工作。

仅当网络定位引擎不起作用时才回退到 GPS。

# sql - 在 sql 上的情况

> ID：13509453
> 
> 赞同：0
> 
> 时间：2012-11-22T09:27:48.567
> 
> 标签：sql

我的 sql 脚本有什么问题？它总是说语法不正确。

```
Select Case 
When(DAY(GETDATE()) <= 23 and DAY(GETDATE()) >= 9) Then Convert(varchar(10),YEAR(getdate()))+'-'+Convert(varchar(10),MONTH(getdate()))+'-'+'9'
When(DAY(GETDATE()) <= 8 and DAY(GETDATE()) >= 24) Then  Convert(varchar(10),YEAR(getdate()))+'-'+Convert(varchar(10),MONTH(getdate()))+'-'+'24' 
```

它应该根据当前日期显示 2012-11-9 或 2012-11-24。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T09:29:00.173

可能你错过了`end`，试试这个：

```
Select Case 
         When(DAY(GETDATE()) <= 23 and DAY(GETDATE()) >= 9) 
           Then Convert(varchar(10),YEAR(getdate()))+'-'+Convert(varchar(10),MONTH(getdate()))+'-'+'9'
         When(DAY(GETDATE()) <= 8 and DAY(GETDATE()) >= 24) 
           Then  Convert(varchar(10),YEAR(getdate()))+'-'+Convert(varchar(10),MONTH(getdate()))+'-'+'24'
       end as Date1
from YourTable 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T09:29:18.647

你需要`End`你的案例

```
Select Case 
    When(DAY(GETDATE()) <= 23 and DAY(GETDATE()) >= 9) Then Convert(varchar(10),YEAR(getdate()))+'-'+Convert(varchar(10),MONTH(getdate()))+'-'+'9'
    When(DAY(GETDATE()) <= 8 and DAY(GETDATE()) >= 24) Then  Convert(varchar(10),YEAR(getdate()))+'-'+Convert(varchar(10),MONTH(getdate()))+'-'+'24'
End 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T09:35:42.760

除了失踪之外`end`，你的`case`条件之一永远不会是真的

```
When(DAY(GETDATE()) <= 8 and DAY(GETDATE()) >= 24) 
```

采用

```
 case when DAY(GETDATE()) between 9 and 23 then CONVERT(varchar(8),getdate(),120) + '9'
        else CONVERT(varchar(8),getdate(),120) + '24'
   end 
```

此外，您的逻辑看起来可能令人怀疑。您真的要在 10 月 2 日和 30 日都返回 10 月 24 日吗？

# jquery - 非表格数据如何实现DataTables分页插件？

> ID：13509455
> 
> 赞同：0
> 
> 时间：2012-11-22T09:27:50.847
> 
> 标签：jquery, jquery-plugins, pagination, datatables

嗨，我已经为我的客户端分页实现了[**DataTables**](http://www.datatables.net/release-datatables/examples/basic_init/alt_pagination.html)插件。因为它可以很好地处理表格数据。但我也想为非表数据实现同样的插件。在某些地方我已经`list and div`格式化了数据（`<ul><li>ABC</li></ul>`）。

如何对非表数据实现这一点？我应该将`li`and`div`转换为表格格式的数据来执行此操作吗？

# java - 在 setSoTimeout 中等待的合理时间是多少

> ID：13509457
> 
> 赞同：2
> 
> 时间：2012-11-22T09:27:52.373
> 
> 标签：java, sockets, network-programming

我正在编写一个需要读取表单套接字的程序，如下所示：

```
socket = (SSLSocket) factory.createSocket(domain, port);
socket.setSoTimeout(5000); 
socket.startHandshake(); 
```

我以前没有套接字编程的经验。我需要知道在抛出错误之前等待 5 秒是否是合理的时间？我需要设定一个时间，让我不会失去建立联系的机会。

第二个问题是：计时器开始时，读数开始后它会停止吗？或者，我应该考虑程序完成阅读所需的时间吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:10:50.937

你的第一个问题基本上没有意义。您可以根据您对平均服务器响应时间的预期以及在确定存在问题之前准备等待的额外时间来设置读取超时。只有你有信息来量化你的应用程序，但肯定 5s 太短了。一条经验法则是使用预期响应时间的两倍或三倍，具体取决于差异，但这完全取决于您来决定。

要回答您的第二个问题，计时器在您输入 read() 时启动，并在第一个数据字节到达或超时到期时停止。

# javascript - 如何使用javascript获取下拉列表的选定值

> ID：13509459
> 
> 赞同：0
> 
> 时间：2012-11-22T09:27:56.633
> 
> 标签：javascript, asp.net-mvc, html.dropdownlistfor

我有一张桌子，`@Html.dropdowlistfor`里面有几张。

我试图通过使用 javascript 读取选定的值，但所有读取都是生成的 html。怎么读？？

```
for (var i = 0; i < oTable.length; i++) {
  **userModel.Id    = oTable[i][0];**

  regionModel.Users.push(userModel);
  processModel.Regions.push(regionModel);

  userModel   = { "Id": "", "Name": ""};
  regionModel = { "Id": "", "Name": "", "Users": []};
} 
```

桌子

```
<table class="tbl" id="tbl">
        <thead>
            <tr>
                <th>
                    Region
                </th>
                <th>
                    Owner
                </th>
            </tr>
        </thead>
        <tbody>
            @if (Model != null)
            {
                foreach (var item in Model.Regions)
                {
                <tr>
                    <td>
                        @Html.DisplayTextFor(i => item.Name)
                    </td>
                    <td>
                        @Html.DropDownListFor(i => item.Users, new SelectList(item.Users, "Id", "Name"))
                    </td>
                </tr>
            }
            }
        </tbody> 
```

代码

```
function ProcessSave() {
    // Step 1: Read View Data and Create JSON Object

    var userModel = { "User": "", "Name": ""};

    var regionModel = {"Region" : "","Name": "", "Users": []};

    var processModel = { "User": "", "Description": "", "Code": "", "Regions": []};

    var oTable = $('.tbl').dataTable().fnGetData();

        for (var i = 0; i < oTable.length; i++) {

            regionModel.Name  = oTable[i][0];

            userModel.User    = oTable[i][1];
            userModel.Name    = oTable[i][1];

            regionModel.Users.push(userModel);
            processModel.Regions.push(regionModel);

            userModel   = { "Id": "", "Name": ""};
            regionModel = { "Name": "", "Users": []};
       }
    // Step 1: Ends Here

    // Set 2: Ajax Post
    // Here i have used ajax post for saving/updating information
    $.ajax({
        url: '/Process/Create',
        data: JSON.stringify(processModel),
        type: 'POST',
        contentType: 'application/json;',
        dataType: 'json',
        success: function (result) {

            if (result.Success == "1") {
                window.location.href = "/Process/Index";
            }
            else {
                alert(result.ex);
            }
        }
    });
} 
```

楷模

```
 namespace TestingTool.ViewModels
    {
        public partial class ProcessModel
        {
            public string Name { get; set; }
            public string Description { get; set; }
            public string Code { get; set; }

            public virtual ICollection<RegionModel> Regions { get; set; }
        }
    }

    namespace TestingTool.ViewModels
    {
        public class RegionModel
        {
            public int Region { get; set; }
            public string Name { get; set; }
            public virtual ICollection<UserModel> Users { get; set; }

        }
    }

    namespace TestingTool.ViewModels
    {
        public class UserModel
        {
            public int User{ get; set; }
            public string Name { get; set; }
        }
    } 
```

HTML 输出

```
<table class="tbl" id="tbl">
            <thead>
                <tr>
                    <th>
                        Region
                    </th>
                    <th>
                        Owner
                    </th>
                </tr>
            </thead>
            <tbody>
                    <tr>
                        <td>
                            Belgium
                        </td>
                        <td>
                            <select id="item_Users" name="item.Users"><option value="1">Steven Segers</option>
<option value="2">Rui Martins</option>
</select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            France
                        </td>
                        <td>
                            <select id="item_Users" name="item.Users"><option value="1">Steven Segers</option>
<option value="2">Rui Martins</option>
</select>
                        </td>
                    </tr>
            </tbody>
        </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:25:46.470

你有没有尝试过：

```
$("#item_Users option:selected").index(); 
```

如果您有许多具有相同 ID 的选择，请尝试此操作（该选择器选择所有名称属性以 Users 结尾的“选择”：

```
 $("select[name$='Users']:eq(0) option:selected").index();  //get first select

 $("select[name$='Users']:eq(1) option:selected").index();  //get second select 
```

但是在页面上使用多个相同 id 的不良做法。相同的 id 应该在页面上单独显示。但即使您在页面上有多个 id 最好为所有选择指定相同的类，在这种情况下，代码将很快：

```
 $("select.Users:eq(0) option:selected").index();  //get first select

 $("select.Users:eq(1) option:selected").index();  //get second select 
```

更新：

```
$("select.Users").each(function (index, element) {
    var optionIndex = $(element).find("option:selected").index();
}); 
```

# css - 如何为日文网站显示流畅的字体？

> ID：13509470
> 
> 赞同：-1
> 
> 时间：2012-11-22T09:28:31.817
> 
> 标签：css, windows

在 MacOS 中显示如下

![在此处输入图像描述](../Images/46ba38aa6f31eadc4cfa91ac2b2b347f.png)

但在 Windows 中它看起来不像在 MAC 中那样干净

![在此处输入图像描述](../Images/63556368583548f3a1da27748da999f1.png)

我使用的字体系列是

```
font-family: Georgia;
    font-size: 1.2em;
    font-style: normal; 
```

网站链接：http: [//jp.baccarat.com/%E3%82%A2%E3%83%A9%E3%83%95%E3%82%A9%E3%83%AA%E3%83%9A% E3%83%B3%E3%83%80%E3%83%B3%E3%83%88/2101057,ja_JP,pd.html?start=1&cgid=jewelry-pendants](http://jp.baccarat.com/%E3%82%A2%E3%83%A9%E3%83%95%E3%82%A9%E3%83%AA%E3%83%9A%E3%83%B3%E3%83%80%E3%83%B3%E3%83%88/2101057,ja_JP,pd.html?start=1&cgid=jewelry-pendants)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:04:42.157

最后我发现，

```
font-family:Meiryo 
```

这种语言会更好。

# boot-animation - 模拟器上的 Bootanimation.zip 位置

> ID：13509471
> 
> 赞同：3
> 
> 时间：2012-11-22T09:28:34.683
> 
> 标签：boot-animation

我在 Android 模拟器 2.3.3 上找不到 Bootanimation.zip 文件。我检查了以下所有路径。

系统/媒体或系统/自定义/资源或数据/本地。

我需要将 Bootanimation.zip 放在模拟器的正确位置并进行测试

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-06T21:09:37.533

system/media 和 /data/local/ 是正确的位置。后者更可取，因为它更容易修改，并且不需要对 system.img（系统分区）大小进行繁琐的修改。请注意，bootanimation.zip 应该是小写的，并且 -0 压缩。

# c# - 如何使用C#匹配正则表达式中的“

> ID：13509473
> 
> 赞同：2
> 
> 时间：2012-11-22T09:28:37.370
> 
> 标签：c#, .net, regex

我想`"`在字符串中匹配，但无法添加`"`到列表中

当前我的正则表达式是

```
Regex.Replace(str, @"[\\/:*?<>|]","", RegexOptions.Compiled); 
```

我也想补充`"`

`\"`不被接受。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T09:33:21.260

`"`你需要逃到`""`.

`""`与逐字字符串一起使用..

IE`@"[\\/:*?<>|""]"`

**或者**

只需使用`\"` **没有**逐字字符串。

IE`"[\\/:*?<>|\"]"`

* * *

前面带有正斜杠的字符`\`被视为`special character`..

例如.. `\t`, `\n`,`\r`是特殊字符..

但`\e`不是特殊字符，因为`e`没有特殊含义。所以，编译器会显示编译时错误`Unrecognized escape sequence`

为了处理`\`字面上前面的字符（即使其成为非特殊字符），我们使用逐字字符串，即`@""`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:34:16.187

您必须使用 \ 来转义它。

例如：`\"`

# php - 'imagecopy（）'和'imagecopymerge（）'之间的区别？

> ID：13509475
> 
> 赞同：6
> 
> 时间：2012-11-22T09:28:44.450
> 
> 标签：php, gd

PHP GD 库中的这两个函数有什么区别？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-22T09:35:50.380

这两个功能都非常相似，因为它们将一张图片复制到另一张图片中。

这些函数的不同之处在于最后一个参数：`imagecopy()`总是用源像素覆盖目标中的所有像素，而`imagecopymerge()`将目标像素与源像素合并为额外参数中指定的数量：

```
0 means "keep the source picture fully", 
100 means "overwrite with the source picture fully", 
and 50 means "mix the source and destination pixel colours equally". 
```

因此，该`imagecopy()`函数等效于调用`imagecopymerge()`并传入 100 作为最后一个参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T09:35:39.583

不同的是[最后一个参数`$pct`](http://php.net/imagecopymerge)：

> **`pct`**
> 
> 两个图像将根据 pct 进行合并，范围从 0 到 100。当 pct = 0 时，不执行任何操作，当 pct = 0 时，此函数的行为与用于调色板图像的 imagecopy() 相同，而它实现了真彩色图像的 alpha 透明度.

这是关于*透明地将*两个图像混合在一起而不是复制粘贴。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T09:38:46.960

[imagecopymerge](http://php.net/manual/en/function.imagecopymerge.php)看**pct** arg 描述

> 两个图像将根据 pct 合并，范围从 0 到 100。当 pct = 0 时，不采取任何行动，当 100 时，此函数的行为与用于调色板图像的 imagecopy() 相同，除了忽略 alpha 分量，而它实现真彩色图像的 alpha 透明度。

# php - PHP是命名空间的一部分还是全局的？

> ID：13509481
> 
> 赞同：0
> 
> 时间：2012-11-22T09:28:57.570
> 
> 标签：php, class, namespaces

我最近一直在研究名称空间。我正在创建一个 MVC 框架并想尝试转向 PHP 5.3+ 功能。

假设我定义了一个命名空间，称之为 \Controller。

然后我想包含一个具有 Home 类的文件。

```
namespace Controller;

include "class.home.php"; 
```

文件内容：

```
class.home.php:

class Home {
    public function hello() {
    }
} 
```

在这个例子中，Home 会是 Controller 命名空间的一部分吗？还是全局命名空间的一部分？

我希望能够像`new \Controller\Home();`上面的代码那样访问主页吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:32:10.803

类的命名空间取决于声明它的命名空间，而不是包含它的命名空间。如果是后者，就不可能清楚地知道某物将在哪个命名空间中。

如果您没有在声明类的文件顶部写入`namespace Foo\Bar\Baz;`，**则**该类始终位于全局命名空间中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:14:09.883

在您的情况下， Home 不会是 Controller 命名空间的一部分，因为您需要在 class.home.php 中定义命名空间，例如：

```
namespace Controller;

class Home {
    public function hello() {
    }
} 
```

而且你可以：

```
namespace Controller;

include "class.home.php";

new \Controller\Home(); 
```

# jquery - 我可以防止发生模糊事件吗？

> ID：13509484
> 
> 赞同：16
> 
> 时间：2012-11-22T09:29:03.453
> 
> 标签：jquery, events

我有一个简单的例子，我有一个`input`字段，我在上面放了一个`blur`和`change`事件：

**HTML**

```
<input name="test" value=""/> 
```

**JS**

```
$('input').change(function(e){

 alert('change'); 

});

$('input').blur(function(e){

 alert('blur'); 
}); 
```

如果事件被触发，是否可以阻止`blur`事件发生？`change`

一种方法是定义一个在触发更改事件时更改的布尔值，但我不喜欢它，有更好的方法吗？

[这](http://codepen.io/anon/pen/JCExL)是一个你可以玩的例子。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-22T10:12:04.180

**解决了[这个](http://jsfiddle.net/GV3YY/5/)问题..**

```
 $('input').change(function(e){
  alert('change'); 
   e.stopImmediatePropagation();
   $(this).off("blur");
 });

$('input').focus(function(e){
   $(this).on("blur", function(e){
   e.stopImmediatePropagation();
   e.preventDefault();
  alert('blur'); });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T09:33:58.447

利用`.off`

**[演示](http://jsfiddle.net/pintu31/GV3YY/1/)**

```
$('input').change(function(e){
  alert('change'); 
  e.stopImmediatePropagation();
  $(this).off("blur"); //$("input[name='test']").off("blur");
});

$('input').blur(function(e){  
  e.preventDefault();
 alert('blur'); 
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T09:35:10.083

您可以使用

`this.unbind('blur');`在 onchange 通话中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T09:40:38.320

如果我理解正确，答案是使用`event.preventDefault();` 请参阅[http://jsbin.com/welcome/52201/edit](http://jsbin.com/welcome/52201/edit)进行演示。

# c# - 转换 IEnumerable 列出 表现

> ID：13509487
> 
> 赞同：2
> 
> 时间：2012-11-22T09:29:06.623
> 
> 标签：c#, linq, linq-to-sql

我有一个返回的网络服务`List<SampleClass>`。我使用 LINQ-to-SQL 从数据库中获取数据，`IEnumerable<SampleClass>.`然后转换`IEnumerable<SampleClass>`为`List<SampleClass>`.

LINQ-to-SQL 操作性能还可以，但是要花一些时间来做操作`IEnumerable<SampleClass>`。`List<SampleClass>`是否有任何解决方案可以从 to 获得最佳`IEnumerable<SampleClass>`性能`List<SampleClass>`？

我从我的数据库中读取了 3000 多条记录。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T09:30:34.713

> IEnumerable to List 需要一些时间来完成操作。

您收到延迟的原因是，当您这样做时`ToList`，即执行实际查询并从数据库中获取记录的时间。

这称为[延迟执行](http://blogs.msdn.com/b/charlie/archive/2007/12/09/deferred-execution.aspx)。

```
var query = db.yourTable.Where(r=> r.ID > 10);
var List = query.ToList(); //this is where the actual query gets executed. 
```

`ToList`当您使用,等迭代查询时`ToArray`，`Count()`就是执行实际查询的时间。

> 是否有任何解决方案可以从 IEnumerable 到 List 获得最佳性能？我从我的数据库中读取了 3000 多条记录。

如果不改进查询，不，你不能。但是你真的需要获取 3000 条记录吗，你可以考虑使用[`Skip`](http://msdn.microsoft.com/en-us/library/bb358985.aspx)和[`Take`](http://msdn.microsoft.com/en-us/library/bb503062.aspx)

# algorithm - 从中心扫描阵列

> ID：13509489
> 
> 赞同：3
> 
> 时间：2012-11-22T09:29:13.270
> 
> 标签：algorithm

我正在制作一个照片马赛克应用程序，一个简单的解决方案是扫描位图以将位图划分为小方块并用小图像替换每个。但为了提高生成图像的质量，我想从中心而不是从左上角扫描位图。有没有现有的算法可以解决这个问题？

例如：

在传统方法中，我们从左上角扫描二维数组：

```
1  2  3  4

5  6  7  8

9  10 11 12

13 14 15 16 
```

但我想从中心扫描到边界，螺旋式：

```
16 15 14 13

5  4  3  12

6  1  2  11

7  8  9  10 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:32:20.447

解决这个问题的一种可能性是考虑向后绘制螺旋。

您从点 (0,0) 开始，然后转到 (0, y) -> (x,y) -> (x, 0) -> (1, 0)。剩下的是一个较小的矩形。只要剩余部分的高度/宽度大于 2，您就可以这样做。

现在你有一个大小为 (x,2) 或 (2,y) 的矩形，它是开始绘制的中心矩形。为简单起见，我假设您有一个大小为 (x,2) 的矩形。你从它的左下角开始。向右画 x 步，然后向上画 1。然后你增加你的宽度或高度的步数。

现在的问题是，如何获得第一个大小为 (x,2) 的矩形？假设你有一张大小为 (w,h) 的图片，`w > h`那么你的第一个矩形是 (w-h+2,2) 并且开始的坐标是 (w/2-(w-h+2)/2, h /2)。

**示例**：给定一个矩形 w=8，h=4。中心矩形是 w=6，h=2。你从位置 (1,2) 开始。

绘图将是：向右 6，向上 1，向左 6，向下 2，向右 7，向上 3，向左 7，完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:10:50.827

```
bool between(int x, int low, int high) {
  return low <= x && x <= high;
}

// we use this constant array to help tweaking the (row,col) coordinate
const int D[4][2] = {
  {0, 1},   // 0 - right
  {1, 0},   // 1 - down
  {0, -1},  // 2 - left
  {-1, 0}   // 3 - up
};

int a[n][n]; // suppose the array is n times n in size
int row = 0, col = 0, dir = 0; // initial direction is "0 - right"

for (int m = n*n; m >= 1; m--) {
  a[row][col] = m;

  int old_row = row, old_col = col;  // remember current coordinate

  row += D[dir][0];
  col += D[dir][1];

  if (!(between(row,0,n-1) && between(col,0,n-1))) { // have to move back
    // move back
    row = old_row;
    col = old_col;

    // change direction
    dir++;
    dir %= 4;

    // move again
    row += D[dir][0];
    col += D[dir][1];
  }
} 
```

# java - 片段标签的使用

> ID：13509495
> 
> 赞同：30
> 
> 时间：2012-11-22T09:29:35.763
> 
> 标签：java, android, kotlin, android-fragments

在 Android 中，您可以在 FragmentTransaction 中为 Fragment 设置标签。

为什么我需要为片段设置标签？

如果 Fragment 根据其标签更改其行为，这是一种好的做法吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-22T10:27:09.263

片段标签可用于避免重新创建`Fragment`方向`Activity`更改。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.photos_image_pager);

    MyFragment fragment;
    if (savedInstanceState != null) {
        fragment = (MyFragment) getFragmentManager()
            .findFragmentByTag("my_fragment_tag");
    } else {
        fragment = new MyFragment();
        fragment.setArguments(getIntent().getExtras());
        getFragmentManager()
            .beginTransaction()
            .add(android.R.id.content, fragment, "my_fragment_tag")
            .commit(); 
    }
} 
```

在`Activity`方向更改时重新创建，并`onCreate(...)`调用其方法。如果是在被销毁`Fragment`之前创建的，并且使用标签添加到 ，那么现在可以通过相同的标签从 中检索它。`Activity``FragmentManager``FragmentManager`

有关如何使用它的更长讨论，请参阅：

*   [ViewPager 和片段 - 存储片段状态的正确方法是什么？](https://stackoverflow.com/questions/7951730/viewpager-and-fragments-whats-the-right-way-to-store-fragments-state)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-15T20:29:27.797

## 对于非 UI 片段：

> 为什么我需要为片段设置标签？

有时，`Fragment`可以将`Activity`. 这种片段没有UI，也称为非UI片段。这`String tag`是识别此片段的唯一方法。要添加此片段，请使用`add(Fragment, String)`不需要`View Id`. 例如：

```
FragmentManager fm = getFragmentManager();
workFragment.setTargetFragment(this, 0);
fm.beginTransaction().add(workFragment, "work").commit(); 
```

然后稍后，要获得对这个片段使用的引用，

```
workFragment = (WorkFragment)fm.findFragmentByTag("work"); 
```

现在使用`workFragment`引用，您可以在`Activity`它的 UI 片段中访问此片段的所有方法。[这](https://github.com/android/platform_development/blob/master/samples/ApiDemos/src/com/example/android/apis/app/FragmentRetainInstance.java)是非 UI 片段的完整示例。

* * *

## 对于带有 UI 的片段：

> 如果 Fragment 根据其标签更改其行为，这是一种好的做法吗？

在某些情况下，我们必须通过`Activity`使用标签来改变片段的行为。这样做应该没问题，我见过一些开源应用程序使用这种做法。基本上，您为片段提供字符串标签。这用于标记 中的片段，`FragmentManager`以便我们稍后可以轻松查找它。并从`Activity`.

例如：用户切换到`SettingsActivity`from `MainActivity`，更改设置，按下返回按钮返回到 MainActivity。您可以检测 MainActivity#onResume() 中的设置更改，并根据新设置更新或更改当前片段的行为。

```
FragmentManager fm = getFragmentManager();
uiFragment = (UiFragment) fm.findFragmentByTag("ui");
uiFragment.fetchNewData();
uiFragment.displayNewData(); 
```

# javascript - 在 JavaScript 中使用正则表达式匹配“$”

> ID：13509497
> 
> 赞同：0
> 
> 时间：2012-11-22T09:29:39.257
> 
> 标签：javascript, regex

我正在尝试编写一个正则表达式来匹配任何出现在“$”之间的单词，例如 var myString = " there was a $dog$# and a $rat$ in a town"; 我想匹配狗和老鼠我已经为它写了表达式

```
 var reg = /^$(.*)$/gmi 
```

但这不是因为“$”是行尾的特殊字符，我该如何转义它，我可以使用“\”吗？你能建议正确的表达方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:43:19.530

正如您在一些评论中提到的，贪婪存在问题。`*`将尽可能多地消耗，因此如果像这样使用它，如果以后能找到另一个，`.*`它也会消耗更多。`$`有两种可能性。最快和最常见的一种方法是简单地使该量词变得不贪婪：

```
/\$(.*?)\$/g 
```

现在它将尽可能少地消耗。然而，推荐的方法是使重复和分隔符互斥并保持重复贪婪：

```
/\$([^$]*)\$/g 
```

这通常更有效，因为不需要回溯。（请不要阻止我，在任何特定情况下，回溯版本可能仍然更有效，但这是通常推荐的做法）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:34:01.650

是的，转义是用`\`-s 完成的，如果你想捕捉单个`$...$`标记的单词，试试这个正则表达式：

```
/\$([^$]+)\$/gmi // inside character classes ( the []-s) you don't need to escape it, but if you do it does the same thing 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T09:32:34.627

正如您所说，您应该使用 '\' 来转义特殊字符。'^' 也是您要匹配的字符串的开头。您应该使用以下内容：

```
/\$(.*)\$/g 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T09:32:55.393

```
/\$(.*)\$/ 
```

`\`正如您所想，您用于逃避。此外，鉴于您的要求，`^`（字符串开头）是有害的。

如果您多次出现此类字符串，则必须小心贪婪（默认），因此您要么禁止内容中的终止符：

```
/\$([^$]*)\$/g 
```

或者您使重复运算符不贪心：

```
/\$(.*?)\$/g 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T09:32:19.133

> 我可以用吗 ”\” ？？

是的。

你为什么不自己尝试呢？

```
var reg = /^\$(.*)\$/gmi 
```

将匹配：

*   字符串的开始
*   一个`$`
*   零个更多字符
*   一个`$`

# java - java mongo日期搜索

> ID：13509501
> 
> 赞同：1
> 
> 时间：2012-11-22T09:30:05.293
> 
> 标签：java, mongodb, date

我们正在使用 Java 并查询 MongoDB。想要获取前一天的记录。例如，我们想要获取昨天注册的所有学生。这是我们使用的查询，

```
Date toDay = new Date();            
Date twoDaysBack  = Util.twoDaysBack(toDay);
query.put("enroldate", new BasicDBObject("$gt", twoDaysBack).append("$lt", toDay)); 
```

假设今天是 2012 年 11 月 22 日。即使我们为今天指定了 $lt，此查询也会显示 21 日和 22 日注册的学生列表。

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:04:13.887

Tha Java [Date](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)对象不仅包括日期，还包括时间，精确到秒。所以当你创建一个新的 Date() 时，你会得到当前日期和当前时间。今天任何更早的日期都比它少。当您的数据库包含没有时间的日期时，它被视为`November 22nd 2012 00:00:00`. 这小于`November 22nd 2012 11:05:22`

解决方案：将 toDay 的小时、分钟和秒设置为 0 以排除今天的任何日期。

**顺便说一句**：许多 Java 程序员认为库[jodatime](http://joda-time.sourceforge.net/)远远优于 Java 的本地日期和时间处理类。这从其等效于 java.util.Date 的具有较少误导性的名称[DateTime](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html)开始。

# bash - 检查shell脚本中的字符串是否既不是空也不是空格

> ID：13509508
> 
> 赞同：127
> 
> 时间：2012-11-22T09:30:33.360
> 
> 标签：bash, shell, freebsd

我正在尝试运行以下 shell 脚本，该脚本应该检查字符串是否既不是空格也不是空的。但是，对于所有提到的 3 个字符串，我得到了相同的输出。我也尝试过使用“[[”语法，但无济于事。

这是我的代码：

```
str="Hello World"
str2=" "
str3=""

if [ ! -z "$str" -a "$str"!=" " ]; then
        echo "Str is not null or space"
fi

if [ ! -z "$str2" -a "$str2"!=" " ]; then
        echo "Str2 is not null or space"
fi

if [ ! -z "$str3" -a "$str3"!=" " ]; then
        echo "Str3 is not null or space"
fi 
```

我得到以下输出：

```
# ./checkCond.sh 
Str is not null or space
Str2 is not null or space 
```

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2012-11-22T09:40:50.393

您需要在`!=`. 将您的代码更改为：

```
str="Hello World"
str2=" "
str3=""

if [ ! -z "$str" -a "$str" != " " ]; then
        echo "Str is not null or space"
fi

if [ ! -z "$str2" -a "$str2" != " " ]; then
        echo "Str2 is not null or space"
fi

if [ ! -z "$str3" -a "$str3" != " " ]; then
        echo "Str3 is not null or space"
fi 
```

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2012-11-22T09:37:22.397

用于检查 shell 中的空字符串

```
if [ "$str" == "" ];then
   echo NULL
fi 
```

或者

```
if [ ! "$str" ];then
   echo NULL
fi 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-11-22T09:43:30.560

如果您需要检查任何数量的空格，而不仅仅是单个空格，您可以这样做：

去除多余的空白字符串（也将中间的空白压缩为一个空格）：

```
trimmed=`echo -- $original` 
```

`--`确保如果包含回显可以理解的`$original`开关，它们仍将被视为要回显的正常参数。同样重要的是不要放置`""`，`$original`否则空格将不会被删除。

之后，您可以检查是否`$trimmed`为空。

```
[ -z "$trimmed" ] && echo "empty!" 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-05-23T18:36:46.267

另一个快速测试字符串是否包含空间但包含一些内容。

```
if [[ -n "${str// /}" ]]; then
    echo "It is not empty!"
fi 
```

“-n”表示非零长度字符串。

然后前两个斜杠表示匹配以下*所有*内容，在我们的例子中是空格。然后第三个斜杠后面是替换（空）字符串并用“}”关闭。请注意与通常的正则表达式语法的区别。

您可以在此处阅读有关[bash shell 脚本中的字符串操作的](https://www.linuxtopia.org/online_books/advanced_bash_scripting_guide/string-manipulation.html)更多信息。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-11-22T09:41:17.503

要检查字符串是否为空或仅包含空格，您可以使用：

```
shopt -s extglob  # more powerful pattern matching

if [ -n "${str##+([[:space:]])}" ]; then
    echo '$str is not null or space'
fi 
```

请参阅Bash 手册中的[Shell 参数扩展](https://www.gnu.org/software/bash/manual/bash.html#Shell-Parameter-Expansion)和[模式匹配](https://www.gnu.org/software/bash/manual/bash.html#Pattern-Matching)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-01T11:40:43.390

```
[ $(echo $variable_to_test | sed s/\n// | sed s/\ //) == "" ] && echo "String is empty" 
```

从字符串中删除所有换行符和空格将导致空白的减少到可以测试和采取行动的任何内容

# forms - 一键提交2个表格

> ID：13509512
> 
> 赞同：1
> 
> 时间：2012-11-22T09:30:36.387
> 
> 标签：forms, wordpress, login, submit

我有 2 个表格。一个用于登录 wordpress，另一个用于登录基于 Flash 的聊天。基于 Flash 的聊天使用 wordpress 帐户登录用户。我想将这两种形式混合在一起。当用户单击提交按钮登录到 wordpress 和聊天时。

这是聊天登录表单：

```
 <form action="http://www.domain.com/1chat.php" method="post" target="mychat1" onsubmit="window.open('', 'mychat1', 'width=800,height=600,status=yes,resizable=yes,scrollbars=no')">

<input type="text" name="username">

<input type="password" name="password">

<input type="submit" value=""> 
```

这是wordpress登录表单：

```
<form id="wp_login_form" action="" method="post">
<label>Username</label><br />
<input type="text" name="username" class="text" value="" /><br />
<label>Password</label><br />
<input type="password" name="password" class="text" value="" /> <br />
<label>
<input name="rememberme" type="checkbox" value="forever" />Remember me</label>
<input type="submit" id="submitbtn" name="submit" value="Login" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:10:40.237

不可能同时提交多个 HTML 表单。但是您看到了几种解决方法：

*   您可以将聊天登录表单嵌入到 iframe（在同一域上以避免[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)问题），显示（但可能通过 CSS 隐藏）到 wordpress 登录页面。使用jQuery，您可以在提交登录表单时提交。这样，两个表单将同时无缝提交。见这个例子：http: [//jsbin.com/ivaluv/1/edit](http://jsbin.com/ivaluv/1/edit)

*   也许您可以通过 AJAX (POST) 提交聊天登录表单，但我不确定，因为 Web 浏览器使用了一堆内置的安全规则。

以下是如何使用 jQuery 从父级（登录表单）向 iframe 提交表单：

```
jQuery(function($){
    $('#wp_login_form').submit(function(e){
        var chat_login_window = $('#chat_login_iframe').contentWindow;
        chat_login_window.jQuery('form').submit();
    });
}); 
```

# .net - .Net 基于密钥的缓存。接触依赖模型

> ID：13509513
> 
> 赞同：0
> 
> 时间：2012-11-22T09:30:39.710
> 
> 标签：.net, caching, basecamp

来自[http://37signals.com/svn/posts/3113-how-key-based-cache-expiration-works](http://37signals.com/svn/posts/3113-how-key-based-cache-expiration-works)

“您通过在更新时将模型对象绑定在一起来处理依赖结构。因此，如果您更改属于某个项目的 todolist 的待办事项，您将更新链的每个部分的 updated_at 时间戳，然后会自动更新基于这些对象的缓存键。”

我正在学习基于密钥的缓存并尝试在.Net中实现。这是我正在努力解决的一点，更新依赖于最近更新的缓存项的缓存项。

```
 class Parent
    {
      public int ID;
      public DateTime updated_at;
      public Child child;
    }
    class Child
    {
      public int ID;
      public DateTime updated_at;
      public string name;
    } 
```

假设我添加`Child`到缓存中。然后`Parent`使用它创建`Child`并缓存它。当我更新时，`Child`我想以`Parent`与 37Signals 相同的方式破坏缓存。

我能看到的唯一方法是`updated_at`在`Parent`我在`Child`. 我不确定，但希望得到一些澄清。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:41:42.393

您应该展示如何构建密钥。
上面提到的文章对 memcached 很紧，因此当您使用此方法时，需要实现提到的 memcached 的某些功能。

# titanium - 浏览在 iTunes 文件共享中共享的应用程序文件夹

> ID：13509516
> 
> 赞同：1
> 
> 时间：2012-11-22T09:30:56.030
> 
> 标签：titanium, directory, itunes, appcelerator-mobile

在我们的应用程序中，我在应用程序 Documents 文件夹中有预定义的文件夹，它们通过 iTunes 文件共享进行共享。这些文件夹可以通过 iTunes 查看，但是我无法浏览到该文件夹​​。双击不起作用。查看内容的唯一选择是将文件夹复制到 Mac。是否需要进行任何配置才能浏览通过 iTunes 共享的应用程序文件夹？

注意：应用程序使用 Appcelerator Titanium 开发，在 iPhone 4 上测试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:54:03.140

不，您不能浏览文件夹。为此，您必须将文件夹保存到您的计算机并使用它来浏览它。唯一真正的选择是没有文件夹并将所有文件放在 Documents 文件夹中。

# jquery - 在fancybox2中添加按钮，并调用服务器方法

> ID：13509518
> 
> 赞同：0
> 
> 时间：2012-11-22T09:30:56.840
> 
> 标签：jquery, fancybox

我想在我的幻想框中添加一个按钮，它将调用服务器方法。请你帮助我好吗？我正在使用fancyBox2。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:00:36.383

其实很简单。这是一个普通的服务器调用。假设您想查询以下 url（呈现一些 json）：[http ://echo.jsontest.com/key/value/one/two](http://echo.jsontest.com/key/value/one/two)

然后你只需要在你的按钮的点击事件上绑定服务器调用。像这样的东西：

```
$.getJSON('http://echo.jsontest.com/key/value/one/two', function(data) {
    var items = [];
    $.each(data, function(key, val) {
        items.push('<li>' + key + ':' + val + '</li>');
    });

    $('<ul/>', {
        html: items.join('')
    }).appendTo('#myId');
}); 
```

或者一个普通的 ajax 调用，如果你请求 json 以外的东西：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

您可以在此处找到功能示例：http: [//jsfiddle.net/xavier_seignard/2MDpe/2/](http://jsfiddle.net/xavier_seignard/2MDpe/2/)

我想你会拥有你需要的所有钥匙。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:15:33.397

谢谢你的回复，但我发现了别的东西，没关系。这是我的代码：

```
$(".ad-gallery").on("click", ".ad-image", function () {
    $.fancybox({

        href: $(this).find("img").attr("src"),
        titlePosition: 'outside',
        title: $(this).text(),
        'beforeShow': function () {
            var content = $('.fancybox-inner');  
content = $('.fancybox-inner');
                $('.fancybox-wrap').append('<div class="fancy_print"></div>'); //here I add the buton
                $('.fancy_print').bind("click", function () {//and here, call the function
                    var retVal = confirm("Are you sure you want to order it?");
                    if (retVal == true) {
                            $.ajax({
                                type: "POST",
                                url: "WebForm1.aspx/coucou",
                                data: "{}",
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                async: true,
                                cache: false,
                                error: function() {
                                            alert("Error");
                                            },
                                success: function (msg) {
                                    alert("The item has been added to your list order!");
                                }
                            })
                        return true;
                    }

                else {
                    alert("The item hasn't been added to your list order!");
                }

            });
        }
    });
}); 
```

# lwuit - lwuit 键释放

> ID：13509521
> 
> 赞同：0
> 
> 时间：2012-11-22T09:31:09.947
> 
> 标签：lwuit, lwuit-textfield

如何检测文本字段中释放的键？我尝试过覆盖 keyReleased(int code) 但效果不佳。如下图所示：

```
TextField tf = new TextField(){

     public void keyReleased(int keyCode) {

                         }
                 }; 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:21:48.730

因此，如果您想在非触摸设备中捕获此密钥，请查看此帖子：

[LWUIT 键按下](https://stackoverflow.com/questions/8818176/how-to-detect-key-pressed-event-in-lwuit-form)

如果是触控设备，可以使用pointerReleased(int x, int y)。覆盖它并在此方法中执行您想要执行的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T19:42:11.230

覆盖它的形式。您可能还应该说明设备，因为并非所有设备的行为都相同。`DataChangeListener`如果您只想跟踪对文本字段的更改，则可能需要使用。

# php - 保存与外键相关的模型的最佳实践

> ID：13509525
> 
> 赞同：2
> 
> 时间：2012-11-22T09:31:18.590
> 
> 标签：php, database, foreign-key-relationship, yii

有这样一个场景，我有一个模型`Project`，这个项目有一个画廊`Image`。所以：

```
Project HAS_MANY Image
Image BELONGS_TO Project -> Foreign key: project_id 
```

在一个表单中，我希望能够将项目信息和多个图像一起保存。问题是我怎样才能得到，`project_id`因为模型`Project`有一个自动递增的 id，在保存模型之前我无法访问它。

我想到的一种方法是在开始时虚拟保存模型，然后在用户提交更新它的表单之后。但是好像很恶心！

以相同形式保存具有 HAS_MANY 和 BELONGS_TO 关系的模型的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:44:15.767

对我来说，最好的解决方案是扩展[activerecord-relation-behavior](http://www.yiiframework.com/extension/activerecord-relation-behavior/)。该扩展将处理所有的 HAS_MANY 和 MANY_MANY 关系。

由于它是一种行为，因此它将处理您需要父模型的 id 以将其分配给子模型的部分。所以而不是做

```
//save to get the id
if($project->save()) {
    foreach($images as $image) {
        $image->project_id = $project->id;
        if(!$image->save()) {
            //Handle the errors        
        }
    }
} 
```

您只需要做：

```
$project->images = $images;
if($project->save()) {
    //do what you have to do (redirection, render, ...)
} 
```

# javascript - 将服务器日期时间转换为毫秒

> ID：13509529
> 
> 赞同：1
> 
> 时间：2012-11-22T09:31:27.247
> 
> 标签：javascript, asp.net

```
 function validateDate()
            {
                var dateDifference;
                pickedDate = Date.parse(txtDate.value.replace(/-/g, " "));
                todaysDate = new Date();
                todaysDate.setHours(0, 0, 0, 0);
                dateDifference = Math.abs(Number(todaysDate) - pickedDate);
                //7 Days=604800000ms//
                if (dateDifference > 604800000)
                {
                      alert("Appointment can be fixed for next seven days only from current day.");                         
                    return false;
                }
                else
                {
                    return true;
                }
            }

I m getting server side date from c# in this format 2012-11-22 12:53:23
now i have to convert server datetime to millisecond for checking 7 days difference

***txtDate.value=22-Nov-2012*** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:42:31.153

尝试这个：

```
var time = '2012-11-22 12:53:23'; // this value is what you get from server

var a=time.split(' ');
var d=a[0].split('-');
var t=a[1].split(':');

var date = new Date(d[0],d[1],d[2],t[0],t[1],t[2]);

var millisecs = date.getTime(); // server time in milliseconds

var todayTime = (new Date()).getTime();

var diff = todayTime - millisecs; // work on this 
```

希望这可以帮助。

# c# - 如何查找和替换文件中的文本

> ID：13509532
> 
> 赞同：173
> 
> 时间：2012-11-22T09:31:49.250
> 
> 标签：c#, .net, io, streamreader, file-handling

到目前为止我的代码

```
StreamReader reading = File.OpenText("test.txt");
string str;
while ((str = reading.ReadLine())!=null)
{
      if (str.Contains("some text"))
      {
          StreamWriter write = new StreamWriter("test.txt");
      }
} 
```

我知道如何找到文本，但我不知道如何用我自己的替换文件中的文本。

* * *

## 回答 #1

> 赞同：361
> 
> 时间：2012-11-22T09:38:00.847

读取所有文件内容。用 替换`String.Replace`。将内容写回文件。

```
string text = File.ReadAllText("test.txt");
text = text.Replace("some text", "new value");
File.WriteAllText("test.txt", text); 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-11-22T09:37:42.797

您将很难写入正在读取的同一文件。一种快速的方法是简单地执行此操作：

```
File.WriteAllText("test.txt", File.ReadAllText("test.txt").Replace("some text","some other text")); 
```

你可以更好地布置它

```
string str = File.ReadAllText("test.txt");
str = str.Replace("some text","some other text");
File.WriteAllText("test.txt", str); 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2012-11-22T09:42:09.860

您需要将读取的所有行写入输出文件，即使您不更改它们。

就像是：

```
using (var input = File.OpenText("input.txt"))
using (var output = new StreamWriter("output.txt")) {
  string line;
  while (null != (line = input.ReadLine())) {
     // optionally modify line.
     output.WriteLine(line);
  }
} 
```

如果您想就地执行此操作，那么最简单的方法是使用临时输出文件，最后用输出替换输入文件。

```
File.Delete("input.txt");
File.Move("output.txt", "input.txt"); 
```

（尝试在文本文件中间执行更新操作是相当困难的，因为由于大多数编码都是可变宽度，因此总是很难替换相同的长度。）

**编辑：**而不是两个文件操作来替换原始文件，最好使用`File.Replace("input.txt", "output.txt", null)`. （见[MSDN](https://msdn.microsoft.com/library/System.IO.File.Replace.aspx)。）

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-11-22T09:39:06.320

您可能必须将文本文件拉入内存，然后进行替换。然后，您必须使用您清楚知道的方法覆盖文件。所以你会首先：

```
// Read lines from source file.
string[] arr = File.ReadAllLines(file); 
```

然后，您可以循环并替换数组中的文本。

```
var writer = new StreamWriter(GetFileName(baseFolder, prefix, num));
for (int i = 0; i < arr.Length; i++)
{
    string line = arr[i];
    line.Replace("match", "new value");
    writer.WriteLine(line);
} 
```

此方法使您可以对可以执行的操作进行一些控制。或者，您只能在一行中进行替换

```
File.WriteAllText("test.txt", text.Replace("match", "new value")); 
```

我希望这有帮助。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-10-02T04:09:48.047

这就是我使用大（50 GB）文件的方式：

我尝试了 2 种不同的方法：第一种，将文件读入内存并使用 Regex Replace 或 String Replace。然后我将整个字符串附加到一个临时文件中。

第一种方法适用于一些正则表达式替换，但如果您在大文件中进行多次替换，Regex.Replace 或 String.Replace 可能会导致内存不足错误。

第二种是逐行读取临时文件并使用 StringBuilder 手动构建每一行并将每个处理的行附加到结果文件中。这种方法非常快。

```
static void ProcessLargeFile()
{
        if (File.Exists(outFileName)) File.Delete(outFileName);

        string text = File.ReadAllText(inputFileName, Encoding.UTF8);

        // EX 1 This opens entire file in memory and uses Replace and Regex Replace --> might cause out of memory error

        text = text.Replace("</text>", "");

        text = Regex.Replace(text, @"\<ref.*?\</ref\>", "");

        File.WriteAllText(outFileName, text);

        // EX 2 This reads file line by line 

        if (File.Exists(outFileName)) File.Delete(outFileName);

        using (var sw = new StreamWriter(outFileName))      
        using (var fs = File.OpenRead(inFileName))
        using (var sr = new StreamReader(fs, Encoding.UTF8)) //use UTF8 encoding or whatever encoding your file uses
        {
            string line, newLine;

            while ((line = sr.ReadLine()) != null)
            {
              //note: call your own replace function or use String.Replace here 
              newLine = Util.ReplaceDoubleBrackets(line);

              sw.WriteLine(newLine);
            }
        }
    }

    public static string ReplaceDoubleBrackets(string str)
    {
        //note: this replaces the first occurrence of a word delimited by [[ ]]

        //replace [[ with your own delimiter
        if (str.IndexOf("[[") < 0)
            return str;

        StringBuilder sb = new StringBuilder();

        //this part gets the string to replace, put this in a loop if more than one occurrence  per line.
        int posStart = str.IndexOf("[[");
        int posEnd = str.IndexOf("]]");
        int length = posEnd - posStart;

        // ... code to replace with newstr

        sb.Append(newstr);

        return sb.ToString();
    } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-10-14T13:26:25.860

我倾向于尽可能多地使用简单的转发代码，下面的代码对我来说很好用

```
using System;
using System.IO;
using System.Text.RegularExpressions;

/// <summary>
/// Replaces text in a file.
/// </summary>
/// <param name="filePath">Path of the text file.</param>
/// <param name="searchText">Text to search for.</param>
/// <param name="replaceText">Text to replace the search text.</param>
static public void ReplaceInFile( string filePath, string searchText, string replaceText )
{
    StreamReader reader = new StreamReader( filePath );
    string content = reader.ReadToEnd();
    reader.Close();

    content = Regex.Replace( content, searchText, replaceText );

    StreamWriter writer = new StreamWriter( filePath );
    writer.Write( content );
    writer.Close();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-26T06:05:48.037

> 这段代码为我工作

```
- //-------------------------------------------------------------------
                           // Create an instance of the Printer
                           IPrinter printer = new Printer();

                           //----------------------------------------------------------------------------
                           String path = @"" + file_browse_path.Text;
                         //  using (StreamReader sr = File.OpenText(path))

                           using (StreamReader sr = new System.IO.StreamReader(path))
                           {

                              string fileLocMove="";
                              string newpath = Path.GetDirectoryName(path);
                               fileLocMove = newpath + "\\" + "new.prn";

                                  string text = File.ReadAllText(path);
                                  text= text.Replace("<REF>", reference_code.Text);
                                  text=   text.Replace("<ORANGE>", orange_name.Text);
                                  text=   text.Replace("<SIZE>", size_name.Text);
                                  text=   text.Replace("<INVOICE>", invoiceName.Text);
                                  text=   text.Replace("<BINQTY>", binQty.Text);
                                  text = text.Replace("<DATED>", dateName.Text);

                                       File.WriteAllText(fileLocMove, text);

                               // Print the file
                               printer.PrintRawFile("Godex G500", fileLocMove, "n");
                              // File.WriteAllText("C:\\Users\\Gunjan\\Desktop\\new.prn", s);
                           } 
```

# java - 铃声播放时间过长

> ID：13509534
> 
> 赞同：1
> 
> 时间：2012-11-22T09:31:50.780
> 
> 标签：java, android

我正在使用带有 RingtonePreference 的 RingtoneManager。当我使用默认铃声时，没有问题，但是当我使用配置的铃声时，它会播放几分钟......我不知道歌曲的持续时间是几分钟还是循环播放......

这是我的代码：

```
private static void playNotificationSound(Context context) {
    RingtoneManager rm  = new RingtoneManager(context);
    String ringtone = MySharedPreferences.ringtone(context);
    Uri uri = null;
    if(ringtone == null)
        uri = RingtoneManager
            .getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
    else
        uri = Uri.parse(ringtone);
    if (uri != null) {
        Ringtone rt = RingtoneManager.getRingtone(context, uri);
        if (rt != null) {
            rt.setStreamType(AudioManager.STREAM_NOTIFICATION);
            rt.play();
        }
    }
} 
```

我用它来播放带有通知的歌曲，但我不想让手机播放 5 分钟...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:19:24.430

尝试添加以下行。

```
ringtoneManager.stopPreviousRingtone(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:21:30.427

我找到了另一个解决方案，我设置了 notification.sound = uri; 并且不再使用 RingtoneManager。

与 notification.flags |= Notification.FLAG_AUTO_CANCEL | Notification.FLAG_ONLY_ALERT_ONCE；

但歌曲仍然循环播放。也许铃声真的是5分钟长？或者是否可以将铃声配置为循环歌曲？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:37:24.013

你能用这样的线程吗？

```
if (rt != null) {
                rt.setStreamType(AudioManager.STREAM_NOTIFICATION);

                rt.play();
            }

            Thread myThread = new Thread() {

                int wait = 0;

                @Override
                public void run() {
                    try {
                        super.run();

                        while (wait < 5000) {
                            sleep(500);
                            wait += 500;
                        }
                    } catch (Exception e) {

                    } finally {
                        if (rt.isPlaying())
                            rt.stop();

                    }
                }
            };
            myThread.start(); 
```

# sql-server - 如果语句包含 UNION 运算符，ORDER BY 项是否必须出现在选择列表中？

> ID：13509535
> 
> 赞同：20
> 
> 时间：2012-11-22T09:31:56.407
> 
> 标签：sql-server

一个sql脚本，在生产服务器上运行了很长时间没有问题，但是最近系统报告“如果语句包含UNION运算符，ORDER BY项目必须出现在选择列表中”

奇怪的是 sql 脚本仍然可以在我的测试服务器上运行。所以我不知道我所做的任何修订是否可以在生产中正确运行。

```
SELECT '' as value ,'Outstanding' as text , 0 as disp_order
union
select a.buyer_status_code AS value , a.buyer_status_name AS text ,a.disp_order
FROM   rfq_buyer_status_v a WITH (NOLOCK)
ORDER BY a.disp_order 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-22T09:38:42.623

尝试这个：

```
select * from 
(
SELECT '' as value ,'Outstanding' as text , 0 as disp_order
union
select a.buyer_status_code AS value , a.buyer_status_name AS text ,a.disp_order
FROM   rfq_buyer_status_v a WITH (NOLOCK)
) t

ORDER BY t.disp_order 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-10-16T06:11:12.253

SQL Server 按阶段顺序解析查询，如下所示：

**FROM -> WHERE -> GROUP BY -> HAVING -> SELECT -> ORDER BY**

每个阶段对一个或多个表作为输入进行操作，并返回一个虚拟表作为输出。一个阶段的输出表被认为是下一阶段的输入。这与产生关系的关系上的操作是一致的。如果指定了 ORDER BY，则结果不是关系的。

在较早阶段定义的任何别名都可以被其后的阶段看到，但反之则不然。

例如

以下查询没问题

```
SELECT [Col_1], [Col_2] 
FROM Table_A AS A 
WHERE A.[Col_1] > 0
ORDER BY A.[Col_2]; 
```

虽然这个不行

```
SELECT [Col_1] AS C1, [Col_2] AS C2 
FROM Table_A 
WHERE C1 > 0
ORDER BY C2; 
```

现在，UNION 集合运算符统一了两个输入查询的结果。作为集合运算符，UNION 具有隐含的 DISTINCT 属性，这意味着它不会返回重复的行。

如果您在查询中使用了 UNION，它将两个集合合并为一个，并且 ORDER BY 将对组合集合生效，而不仅仅是 SELECT ... FROM ... 数据集。原因是 ORDER BY 是队列中最弱的（或最后一个），它“抓住所有”

在查询的第一行中，您为 0 提供了一个名为“disp_order”的别名，这很好。在 UNION 运算符之后，您从表“rfq_buyer_status_v”中查询了一个数据集，其中包含一个名为“disp_order”的列，这也是完全可以接受的。问题出现在 ORDER BY 之后。

由于您还为表指定了别名，即“a”，因此 ORDER BY a.disp_order 意味着限制对部分组合数据集的排序操作，这与“Catches All”活动相冲突。

解决方案是删除“a”。在 ORDER BY 子句之后。你可以这样做的原因是你给了 0 别名'disp_order'，它与表 rfq_buyer_status_v 中的列名相同。那么在这种情况下，我看不到任何别名表的价值......

```
SELECT '' AS value ,'Outstanding' AS text , 0 AS disp_order
UNION 
SELECT a.buyer_status_code AS value , a.buyer_status_name AS text ,a.disp_order
FROM   rfq_buyer_status_v a WITH (NOLOCK)
ORDER BY disp_order 
```

编写查询的另一种方法是

```
SELECT ''            AS value ,
       'Outstanding' AS text  , 
       0             AS ABC
UNION 
SELECT buyer_status_code AS value , 
       buyer_status_name AS text ,
       disp_order        AS ABC
FROM   rfq_buyer_status_v 
    WITH (NOLOCK)
ORDER BY ABC 
```

第二个为 disp_order 列提供了一个完全不同的别名，使其易于阅读，并减少了在查看代码时感到困惑的机会。

# jquery - jsTree - 渲染优化| 2000 个节点的超长渲染

> ID：13509542
> 
> 赞同：7
> 
> 时间：2012-11-22T09:32:16.527
> 
> 标签：jquery, ajax, browser, rendering, jstree

我正在使用带有通过 AJAX 加载数据的选项的 jsTree ( 1.0-rc3 )，我在加载大约 2000 个子节点时遇到问题。虽然服务器会在几秒钟内做出响应，但 jsTree 仅需要大约 40 秒才能在浏览器中呈现结果（chrome、FF）。除此之外，FF 从 'jquery-1.7.2.min.js' 返回关于没有响应的信息。相同数量的数据冻结 IE。数据是否超载？或者它是某种错误？是否有任何可变因素可以帮助我加快渲染速度？

```
jQuery( "#dependency-tree" ).jstree(
        {
            'plugins':['themes', 'json_data', 'ui', 'core', 'types', 'sort'],
            "json_data":{
                "progressive_render": true,
                "data":initData,
                cache:false,
                "ajax":{
                    "url":function ( node )
                    {
                        return appContext + 'GetUnitsNode/'
                            + node.attr( 'id' );
                    },
                    dataType:"text",
                    "success":function ( data )
                    {
                        if ( data == "none" )
                        {
                            return false;
                        }
                        return jQuery.parseJSON( data );
                    }
                }
            },
            "ui":{
                'select_limit':1
            },
            "core":{
                'animation':0,
                'html_titles':true
            },
            "themes":{
                "theme":"rules",
                "dots":true,
                "icons":true
            },
            "types":{
                "types":{
                    "default":{
                        "icon":{
                            "image":appContext + "/img/orange.png"
                        }
                    }
                }
            },
            "sort":function ( a, b )
            {
               return this.get_text( a ).toUpperCase() > this.get_text( b ).toUpperCase() ? 1 : -1;
            }
        } ).bind( "select_node.jstree", function ( event, data )
        {
            submitedNodeId = data.rslt.obj.attr( 'id' );
            submitedNodeTypeId = data.rslt.obj.attr( "typeId" );
            submitedNodeLast = data.inst.is_leaf( data.rslt.obj );
            g_node_text = jQuery( data.rslt.obj ).children().eq(1).html();
        } ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T22:09:17.040

你有没有尝试过？

*   [渐进式渲染](http://www.jstree.com/documentation/json_data)

    progress_render 一个布尔值。默认为假。如果此选项设置为 true，则仅将返回的 JSON 的可见（打开节点）部分转换为 DOM 节点，任何隐藏部分都将被保存并按需解析（当节点变为可见时）。当你有一个会导致大量 DOM 的大型嵌套树时，这很有用

*   AJAX 加载

# ssl-certificate - 如何创建私钥可导出的自签名证书？

> ID：13509548
> 
> 赞同：4
> 
> 时间：2012-11-22T09:32:26.953
> 
> 标签：ssl-certificate, mmc

我尝试了以下创建证书并将其安装在本地机器个人证书存储中的模板：

```
makecert -sk <<UniqueKeyName>> -iv RootCATest.pvk -n "CN=<<MachineName>>" -ic RootCATest.cer -sr localmachine -ss my -sky exchange -pe 
```

RootCATest.pvk 是根 CA 证书的私钥。RootCATest.cer 是根 CA 证书的公钥（用于颁发证书）。

当我从 MMC 查看它并右键单击它时，属性 -> 导出，然后它的私钥导出选项是灰色的。

如何创建私钥可导出的自签名证书？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T14:59:17.780

### 选项1

刚刚google了一下，最直接的方法是使用makecert.exe的“-pe”选项。这是文档：

[证书创建工具](http://msdn.microsoft.com/en-us/library/bfsktky3%28v=vs.80%29.aspx)

### （遥远的）选项2

如果您想花大量时间在它上面并且不介意它是自我认证的，我建议您使用 OpenSSL。只有几个步骤：

1.  下载源代码并构建 openssl.exe 或获取预编译副本（[链接](http://www.openssl.org/related/binaries.html)）。

2.  创建 PEM 格式的自签名证书。在包含 openssl.exe 和 openssl.cnf 的文件夹中打开 DOS 提示符。下面的命令创建了一个可以使用大约 10 年的命令：

    *openssl req -x509 -days 3650 -newkey rsa:2048 -keyout mycert.pem -out mycert.pem -config ./openssl.cnf*

3.  将 PEM 转换为 PFX：

    *openssl.exe pkcs12 -export -in mycert.pem -out mycert.pfx*

4.  双击 PFX 将其导入，并确保在您输入 PFX 密码的同一对话框中选中“将此密钥标记为可导出”框。 ![在此处输入图像描述](../Images/dea556d36dc6da00751235ac1fbbcd0e.png)

# html - 带有溢出的文本区域：隐藏未在 Firefox 中显示新添加的行

> ID：13509549
> 
> 赞同：-2
> 
> 时间：2012-11-22T09:32:30.833
> 
> 标签：html, css, firefox

我正在使用带有样式的文本区域`overflow:hidden`来删除滚动，用户可以在此文本区域中插入文本行。

问题出在火狐上，当文本超过 textarea 的高度时，新行将不会出现在 textarea 上，我必须单击向下箭头键才能看到它们，而它在其他浏览器上工作得很好。

我的意思是，`overflow:hidden`在 Firefox 上使用样式在 textarea 上编写多行将只显示第一行，直到它到达文本区域的末尾，其余的被隐藏，你需要移动光标才能到达它们。

我希望光标位于我正在编写的行上，并在 textarea 的视图中显示这一行

我根本**不想使用 javascript**

这是一个示例代码：

**HTML：**

```
<textarea></textarea> 
```

**CSS：**

```
textarea{
    overflow:hidden;
    height:50px;
    width:200px;
    resize: none;
} 
```

这是[jsfiddle上的示例](http://jsfiddle.net/mb7b4/)

**只有**HTML 和 CSS 有什么可能的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:44:16.367

所以你不想滚动并且问题只出现在Firefox上然后你可以这样做，

1.  向文本区域添加字符限制。链接：[http ://unwrongest.com/projects/limit/](http://unwrongest.com/projects/limit/)

2.  使用 textarea auto-grow 插件自动扩展 textarea 高度，请点击此处[http://unwrongest.com/projects/elastic/](http://unwrongest.com/projects/elastic/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:16:15.700

嗨，你为什么不使用 jQuery？它不像传统的 js 那样麻烦 :)

```
$('textarea').keyup(function(){
    $(this).scrollTop(9999)
}) 
```

# php - PHP jQuery - 动态加载或完成页面

> ID：13509555
> 
> 赞同：0
> 
> 时间：2012-11-22T09:32:50.320
> 
> 标签：php, jquery

我想用 mysql 和 jquery 在 php 中编写一个中等大小的 web 应用程序。只生成一个“启动”页面并使用 jquery 帖子动态加载每个内容站点是否有意义？

制作像这样的文件夹结构是否有意义

```
images
index.php
func.js
content
        / news 
               / add.php
               / delete.php
               / index.php
               / func.js 
```

其中根 index.php 描述了完整的网站布局，根 func.js 是“登陆时加载的内容和女巫按钮转到女巫功能”内容，在 content/news/ 文件夹中，每个操作都有很多文件一个带有特定 func.js 文件的文件，其中包含新闻站点的操作（在此演示中）。

或者最好只制作一个带有 get 的文件：`news.php?action=show`

还是您希望新闻/添加页面包含完整网页？不仅是要从主布局加载的内容吗？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:37:22.490

是的，这是有道理的，但是文件夹结构还不错:)

在这里查看[http://en.wikipedia.org/wiki/Single-page_application](http://en.wikipedia.org/wiki/Single-page_application)

您应该使用允许您包含 html 的片段/模块的 css 布局，越小的片段越快应用程序是:)

如果您进行一些谷歌搜索，您还可以找到模块化结构的 js 框架和 Backbone.js 等单页应用程序，例如：[http ://backbonejs.org/](http://backbonejs.org/)

# android-intent - Android :: 如何在不更改按钮大小的情况下更改字体大小？

> ID：13509558
> 
> 赞同：1
> 
> 时间：2012-11-22T09:32:57.217
> 
> 标签：android-intent

我有一个相同大小的按钮的 XML 网格表布局菜单，这些按钮根据手机分辨率改变它们的大小。这个想法是让菜单用同样大小的按钮填满屏幕。当按钮没有文本标签时，这非常有效。但是一旦我在按钮上添加文本，那么按钮的宽度也会受到文本的影响。如果我将文本大小更改为较小的大小，则按钮会自动重新调整大小以小于其他按钮。例如： 按钮 A 的名称是“主页” 按钮 B 的名称是“通知” 我的问题是按钮 B 变得比按钮 A 大，我希望所有按钮都具有相同的宽度，无论标签文本大小是多少。我还将附上 XML 布局。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="4dp"
    android:background="#2b2c31"
    android:orientation="vertical"  >

    <include
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        layout="@layout/layout_topheader" />

        <TableLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="10dp"
            android:stretchColumns="*" >

                <TableRow 
            android:layout_weight="1"
            android:gravity="center"
            android:padding="10dp" >

                    <Button
                        android:id="@+id/buttonScan"
                        android:layout_width="fill_parent" 
                        android:layout_height="fill_parent"
                        android:layout_weight="1"
                        android:background="@drawable/btn"
                        android:text="Refill"                            
                        android:layout_margin="10dp"
                        android:textColor="@color/status_text"
                        android:textSize="30dip"
                        android:textStyle="bold" />

                    <Button
                        android:id="@+id/buttonSetReminder"
                       android:layout_width="fill_parent"                              
                        android:layout_height="fill_parent"
                        android:layout_weight="1"
                        android:background="@drawable/btn"
                        android:text="Reminders"                         
                        android:layout_margin="10dp"
                        android:textColor="@color/status_text"
                        android:textSize="30dip"
                        android:textStyle="bold" />

                 </TableRow>

                 <TableRow 
            android:layout_weight="1"
            android:gravity="center"
            android:padding="10dp" >

                    <Button
                        android:id="@+id/buttonRewards"
                        android:layout_width="fill_parent"                             
                        android:layout_height="fill_parent"
                        android:layout_weight="1"
                        android:background="@drawable/btn" 

                        android:layout_margin="10dp"
                        android:textSize="30dip"
                        android:textColorHint="@color/status_text" 
                        android:textColor="@color/status_text"
                        android:text="Rewards"
                        android:textStyle="bold" />

                    <Button
                        android:id="@+id/buttonTracker"
                        android:layout_width="fill_parent"                            
                        android:layout_height="fill_parent"
                        android:layout_weight="1"
                        android:background="@drawable/btn"
                        android:text=" Tracker"

                        android:layout_margin="10dp"
                        android:textColor="@color/status_text"
                        android:textSize="30dip"
                        android:textStyle="bold" />

                 </TableRow>

                 <TableRow 
                    android:layout_weight="1"
                    android:gravity="center"
                    android:padding="10dp" >

                    <Button
                        android:id="@+id/buttonProfile"
                        android:layout_width="fill_parent"                             
                        android:layout_height="fill_parent"
                        android:layout_weight="1"
                        android:background="@drawable/btn"
                        android:text="Profile"                           
                        android:layout_margin="10dp"
                        android:textColor="@color/status_text"
                        android:textSize="30dip"
                        android:textStyle="bold" />

                    <Button
                        android:id="@+id/buttonChat"
                        android:layout_width="fill_parent"                             
                        android:layout_height="fill_parent"
                        android:layout_weight="1"
                        android:background="@drawable/chaticon"
                        android:text="Chat"                           
                        android:layout_margin="10dp"
                        android:textColor="@color/status_text"
                        android:textSize="30dip"
                        android:textStyle="bold" />

                 </TableRow>

                  <LinearLayout
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:background="#ffffff"
             android:orientation="vertical" >

                <ImageView
                    android:id="@+id/imageView1"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:src="@drawable/add3" />

      </LinearLayout>                    

   </TableLayout>        

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:35:23.643

不确定这是否是最好的方法，但是我遇到了类似的问题并通过在运行时获取屏幕尺寸来解决它：

```
 DisplayMetrics displaymetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displaymetrics); 
```

然后设置按钮宽度为：int buttonWidth = displaymetrics.widthPixels/2;

最后将最大和最小宽度/高度设置为 buttonWidth

# javascript - 在 Rails 中通过 ajax 请求更新页面

> ID：13509561
> 
> 赞同：0
> 
> 时间：2012-11-22T09:33:01.410
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3

我在 rails 3.2 的显示页面上有一个交互式 javascript 图，该页面还包含一个链接到图中项目的标题。当用户单击图表中的项目时，我想通过 ajax 请求更新页面，但我不希望重新加载图表。我以前没有实现 ajax 请求，我不能说我完全理解这个概念对于 Web 开发来说是新的。但是，我已经阅读了一些关于 turbolinks 和 pjax 的内容，我的问题似乎与这些有关，但我不知道如何实现这种方法。

```
show.html.erb

<% provide(:title, @item.name) %>

<h2>
   <%= @item.name %> 
</h2>
… 
```

显示页面的 url 路径是（对于第 1 项）：

```
localhost:3000/items/1 
```

我想我必须通过来自我的 javascript 代码的 ajax 请求来更改实例变量@item。但是，我还想更新 url，所以它不仅仅是一个变量更改，而是一个 url 重定向。关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:16:47.003

这不是一个可以用代码来回答的问题，因为实现你想要的东西的方法太多了，而且没有足够的信息能够给你任何有意义的东西。

您需要做出的关键区别在于服务器端代码和客户端代码。Ruby 在服务器上执行，而 javascript 在客户端的浏览器中执行。因此，您不能`@item`使用 AJAX 查询修改您的变量。您可以做的是编辑使用 AJAX 呈现的 HTML，但这本身就是一个值得几本书的主题。

Turbo 链接和 PJAX 是 AJAX 的一种实现，它`<body>`在您单击链接时重新加载标签的全部内容（或您可以定义的部分），而不是进行正常的页面重新加载。这可以节省大量时间，因为不会重新加载资产（javascript、样式表等）。这可能是您需要的，也可能不是，因此请查看[PJAX 示例页面](http://pjax.heroku.com/)。

在进一步研究之前，真的值得阅读 AJAX。我可以推荐的一个资源是一本名为[Agile Development With Rails](http://pragprog.com/book/rails4/agile-web-development-with-rails)的书。这贯穿了构建 Rails 应用程序的整个过程，并在上面添加了 AJAX 甜头。

但是，网上有很多资源。首先，了解 Ajax 如何在 Rails 之外工作，然后开始在 Google 上搜索“Rails 和 AJAX”。

# asp.net-mvc-3 - 如何从 Customer 实例访问 Orders 属性？

> ID：13509564
> 
> 赞同：-1
> 
> 时间：2012-11-22T09:33:07.157
> 
> 标签：asp.net-mvc-3, c#-4.0, entity-framework-4

作为学习 c# 和 asp.net 的一部分，我有两个表。客户和订单及其在我的 POCO 中的 1:m 关系。

```
public class Customer
{
public int CustID {get; set;}
public string FirstName {get; set;}
public string LastName {get; set;}
public List<Orders> orders {get; set;}
}

public class Orders
{
public int OrdersID {get; set;}
public int CustID {get; set;}
public string OrderName {get; set;}
public virtual Customer customer {get; set;}
} 
```

现在我的问题是如何从 Customer 实例**而不是**Orders 实例在一个视图中显示客户和订单的列表。

这就是我的控制器中的内容：

```
 namespace MvcApplication3.Controllers
{ 
    public class janController : Controller
    {
        private coContext db = new coContext();

     public ViewResult Index()
        {

        return View(db.customer.ToList());
    } 
```

我的 DbContext 的代码：

```
 namespace MvcApplication3.Models
{
    public class coContext : DbContext
    {
        public DbSet<Customer> customers { get; set; }
        public DbSet<Orders> orders { get; set; }

    }
} 
```

我的部分观点有以下代码：

```
 @model List<MvcApplication3.Models.Customer>
 @foreach(var customer in Model) {
    <div>Display customer props:</div>
    @Html.DisplayFor(m => customer.LastName)

    <div>Display Orders:
        **@foreach(var order in customer.Orders)** {
            <div>Display some order props:
              @Html.DisplayFor(m => order.OrderName)
            </div>
        }
    </div>
} 
```

我打算从我的客户那里查看子属性或数据。简而言之，我想根据客户读取相关数据，即客户名字姓氏（这些必须是唯一的），然后在之后有相关数据（订单名）。这就是我想要做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:43:55.007

我决定把我的“评论”写在一起作为答案：

[http://coding-in.net/asp-net-mvc-3-how-to-use-editortemplates/](http://coding-in.net/asp-net-mvc-3-how-to-use-editortemplates/)

**1 -**您可能会忘记是否使用延迟加载的事实......取决于您是否使用 EF4.X/5.X CodeFirst，您可能需要执行以下操作：

```
var res = db.Customers.where(x=>x.Deleted != null).include(x=>x.Orders).toList(); 
```

否则（如果您不加载所有“子”属性“您将无法在视图中显示）

**2-** Sithelo > @emanyalpsid 感谢 Emanyalpsid。如何在我的视图中加载子属性。我试过这个 Html.DisplayFo(modelItem =>item.orders.OrderName 但它可以让我这样做。

[您可以使用不同的方式，例如 Jan 解决方案，或其他类似的方式：MVC 编辑器模板： http](http://coding-in.net/asp-net-mvc-3-how-to-use-editortemplates/) ://coding-in.net/asp-net-mvc-3-how-to-use-editortemplates/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:11:25.417

我仍然不确定，你的问题到底是什么，但我试着回答它。从我阅读的您的评论中，您想知道如何在视图中显示相关数据。

```
@model List<Customer>

@foreach(var customer in Model) {
    <div>Display customer props:</div>
    @Html.DisplayFor(m => customer.LastName)

    <div>Display Orders:
        @foreach(var order in customer.Orders) {
            <div>Display some order props:
              @Html.DisplayFor(m => order.OrderName)
            </div>
        }
    </div>
} 
```

这是你想要的？

**编辑**

我看过你的项目。您的视图中有此代码：

```
@foreach(var customer in Model) {
    @Html.DisplayFor(m => customer.LastName)
}

@foreach(var order in customer.orders) {
    <div>Display some order props:
        @Html.DisplayFor(m => order.OrderName)
    </div>
} 
```

问题是，您正在关闭第一个 foreach 循环，您必须将第二个循环嵌入到第一个循环中。这就是变量`customer`在第二个循环中未知的原因。它必须是这样的：

```
@foreach(var customer in Model) {
    @Html.DisplayFor(m => customer.LastName)

    @foreach(var order in customer.orders) {
        <div>Display some order props:
            @Html.DisplayFor(m => order.OrderName)
        </div>
    }
} 
```

# git - Git 分支：轻松将第三个分支合并为两个冲突的分支

> ID：13509568
> 
> 赞同：1
> 
> 时间：2012-11-22T09:33:24.333
> 
> 标签：git

我在 git 中有以下情况：一个“稳定”分支和一个“不稳定”分支。不稳定分支包含错误，我尝试通过在同一输入上运行稳定和不稳定分支并比较它们的输出日志来找到这些错误。

现在，我的日志框架对于这个调试来说还不够好。所以我想改进我的日志类。我从“stable”创建了一个新分支“log_improve”。在我完成它的工作后，我会将它合并回“稳定”。到这里为止一切都很好。

我的问题是：如何将“log_improve”与“不稳定”分支合并，同时完全避免所有“稳定/不稳定”冲突？我只对“log_improve”对记录器类所做的更改感兴趣，这与“稳定”和“不稳定”不同意的代码是分开的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:37:49.593

我会说，摆脱冲突。创建冲突（不稳定->稳定）的合并尚未提交（不可能，只要您有冲突）；所以只需重置您的工作目录，并将 log_improve 合并到第一个，然后是另一个工作分支。然后再次尝试不稳定 -> 稳定合并。

# iphone - 如何根据位置显示广告/横幅

> ID：13509571
> 
> 赞同：2
> 
> 时间：2012-11-22T09:33:40.153
> 
> 标签：iphone, ios

我正在使用 admob 在我的应用上展示广告。我想根据用户位置显示广告（特定城市内某个地区的相关广告）。

我找到了一种为 admob 服务器发送 lat/long 的方法。

```
- (void)setLocationWithLatitude:(CGFloat)latitude longitude:(CGFloat)longitude
                       accuracy:(CGFloat)accuracyInMeters;
```

但它可能会将广告细化到城市级别而不是城市内的位置。

所以任何人请让我知道如何实现这一目标。除了 admob 也是可以接受的。我什至在 iAds 中也找到了这个选项。

谢谢。

# java - 比较两个arraylist内容并将不匹配的内容存储在另一个arraylist中

> ID：13509573
> 
> 赞同：5
> 
> 时间：2012-11-22T09:33:48.343
> 
> 标签：java, arraylist, compare

我想比较两个 arraylist 内容。

我以这种方式将对象存储在其中。

对于数组列表 1：

```
Employee e1=new Employee();

e1.setID("1");
e1.setID("2");

ArrayList<Employee>list1 = new ArrayList<Employee>(); 

if(e1!=null){
    list1.add(e1);
} 
```

对于数组列表 2：

```
Employee e2=new Employee();

e2.setID("1");
e2.setID("2");
e2.setID("4");

ArrayList<Employee>list2 = new ArrayList<Employee>(); 

if(e2!=null){
    list2.add(e2);
} 
```

现在我正在尝试以这种方式比较上面的arraylist内容

```
ArrayList<Employee>unmatchedList = new ArrayList<Employee>();   

for (Employee l1 : list1){                               
    if(!list2.contains(l1.getID())){    
        System.out.println("list2 does not contains this ID"+l1.getID());   
        Employee e3=new Employee();          
        e3.setID(l1.getID());

        if(unmatchedList==null){            
        unmatchedList=new ArrayList<Employee>();            
        unmatchedList.add(e3);          
        }

        if(unmatchedList!=null){                            
            unmatchedList.add(e3);              
        }                       
    }
} 
```

但我没有得到正确的 unmatchedList 内容为 "4" only 。我得到 unmatchedList 为“1”和“2”，这是错误的。那么如何才能仅在“unmatchedList”中获得不匹配的内容

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T10:13:21.217

如果你的类`Employee`是这样定义的：

```
public class Employee {

private int id;

public Employee(int id){
    this.id = id;
}

public int getId() {
    return id;
}

@Override
public String toString() {
    return "Id : " + this.id;
}

@Override
public boolean equals(Object obj) {
    return (obj instanceof Employee) && this.id == ((Employee)obj).getId();
} 
```

在 Main 方法中，您可以像这样检索不匹配的内容：

```
 public static void main( String[] args )
{
   List<Employee> l1 = new ArrayList<Employee>();
   l1.add(new Employee(1));
   l1.add(new Employee(2));
   l1.add(new Employee(3));
   l1.add(new Employee(4));
   l1.add(new Employee(5));

   List<Employee> l2 = new ArrayList<Employee>();
   l2.add(new Employee(4));
   l2.add(new Employee(5));

   l1.removeAll(l2);
   System.out.println(l1);

} 
```

这将打印：`[Id : 1, Id : 2, Id : 3]`

请注意，对于这项工作，您必须覆盖该`equals`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:41:15.977

问题是这段代码： -

```
if(!list2.contains(l1.getID())){ 
```

你`list2`是一个`ArrayList<Employee>`，并且你正在检查`l1.getId()`. 所以，你的`if`条件永远是真实的。

* * *

你应该在你的类中重写`equals`和`hashCode`方法`Employee`，并且只使用： -

```
if(!list2.contains(l1)) 
```

用于检查 list2 是否包含 employee `l1`。

* * *

以及为什么`id`在将其添加到列表之前将 3 次设置为背靠背。它不会添加所有三个 id，而只会添加一个`Employee`为 id 设置的最后一个值。你需要纠正它： -

```
e2.setID("1");
e2.setID("2");
e2.setID("4");

list.add(e2);  // Will only add one Employee with id = 4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T09:55:15.700

为您的员工添加一个`equals`方法，通过他们的 ID 比较他们，复制`list2`并调用`removeAll`：

```
List<Employee> list1 = ...;
List<Employee> list2 = ...;
List<Employee> unmatchedList = new ArrayList<Employee>(list2);
unmatchedList.removeAll(list1); 
```

有关完整示例，请参阅@Dimitri 的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T09:56:41.867

我认为你应该使用`Set`你的场景。可能这个例子会对你有所帮助。

`Employee`班级_

```
package com.yourcomp;

/**
 * <br>
 * <div style="width:600px;text-align:justify;">
 *
 * TODO: Class comment.
 *
 * </div>
 * <br>
 *
 */
public class Employee {

    private int id;

    /**
     * Constructor for Employee. <tt></tt>
     */
    public Employee() {
        this(-1);
    }

    /**
     * Constructor for Employee. <tt></tt>
     */
    public Employee(int id) {
        this.id = id;
    }

    /**
     * Gets the id.
     * 
     * @return <tt> the id.</tt>
     */
    public int getId() {
        return id;
    }

    /**
     * Sets the id.
     *
     * @param id <tt> the id to set.</tt>
     */
    public void setId(int id) {
        this.id = id;
    }

    @Override
    public boolean equals(Object obj) {
        return this.id == ((Employee)obj).id;
    }

    /* (non-Javadoc)
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString() {
        return "Employee [id=" + id + "]";
    }

    /* (non-Javadoc)
     * @see java.lang.Object#hashCode()
     */
    @Override
    public int hashCode() {
        // TODO Auto-generated method stub
        return new Integer(id).hashCode();
    }

} 
```

`TestEmployee`班级：

```
package com.yourcomp;

import java.util.HashSet;
import java.util.Set;

/**
 * <br>
 * <div style="width:600px;text-align:justify;">
 *
 * TODO: Class comment.
 *
 * </div>
 * <br>
 * 
 */
public class TestEmployee {

    public static void main(String[] args) {
        // creating the first set with employees having ID's 1 to 5
        Set<Employee> set1 = new HashSet<Employee>();
        for(int i=1;i<5;i++) 
            set1.add(new Employee(i));

        System.out.println(set1); // printing it

        // creating the first set with employees having ID's 3 to 8.
        // note that now you have two employees with same ID, 3 & 4
        Set<Employee> set2 = new HashSet<Employee>();
        for(int i=3;i<8;i++)
            set2.add(new Employee(i));

        System.out.println(set2);// printing the second set

        // creates a final set to contain all elements from above two sets without duplicates
        Set<Employee> finalSet = new HashSet<Employee>();
        for(Employee employee:set1)
            finalSet.add(employee); // adds first set content

        for(Employee employee:set2)
            finalSet.add(employee); // adds second set content. If any duplicates found, it will be overwritten

        System.out.println(finalSet); // prints the final set

    }
} 
```

和输出

```
[Employee [id=1], Employee [id=2], Employee [id=3], Employee [id=4]]
[Employee [id=3], Employee [id=4], Employee [id=5], Employee [id=6], Employee [id=7]]
[Employee [id=1], Employee [id=2], Employee [id=3], Employee [id=4], Employee [id=5], Employee [id=6], Employee [id=7]] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T10:30:21.010

我也会推荐一个 Set 来做差异，如果你可以使用 Sets 那么我会使用 Guava-Sets 的差异方法：http: [//google-collections.googlecode.com/svn/trunk/javadoc/com/ google/common/collect/Sets.html#difference%28java.util.Set,%20java.util.Set%29](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Sets.html#difference%28java.util.Set,%20java.util.Set%29)

# wordpress - 在 Wordpress 中通过 API 创建新用户时如何发送电子邮件密码？

> ID：13509575
> 
> 赞同：6
> 
> 时间：2012-11-22T09:33:52.533
> 
> 标签：wordpress, api

可以使用以下行通过 API 创建新用户：

```
$user_id = wp_insert_user( $user_data ); 
```

我想知道如何向新创建的用户发送一封包含其密码的电子邮件？Wordpress API 中是否有任何功能可以处理这项工作，或者我应该自己创建和发送电子邮件？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-20T16:08:52.473

正如大卫猜测的那样（但没有具体说明），Wordpress 中有一些功能可以做到这一点：[`wp_new_user_notification($user_id, $user_pass)`](http://codex.wordpress.org/Function_Reference/wp_new_user_notification).

所以，重写上面的代码，它应该是这样的（*代码在 4.3.1 参数弃用后被编辑*）：

```
$user_id = wp_insert_user( $user_data );
wp_new_user_notification( $user_id, null, 'both' ); 
```

**编辑：**另请参阅下面的@ale 评论。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-22T09:59:33.820

我假设您正在生成密码并将其添加到`$user_data`数组中？

如果没有，您可以使用它来生成密码 -

```
$this->password = wp_generate_password(6, false);
$user_data['user_pass'] = $this->password; 
```

虽然可能有一种方法可以连接到通用 WP 发送密码电子邮件，但我只是使用自己的方法。这样，我可以自定义内容，让它看起来像我网站上的其他电子邮件。

请注意，我已经设置了一个注册类，所以如果你没有，你需要删除`$this->`.

```
function prepare_email(){

        $confirmation_to = $_REQUEST['email_address'];
        $confirmation_subject = 'Confirmation - Registration to My Site';
        $confirmation_message = 'Hi '.$_REQUEST['first_name'].',<br /></br />Thank you for registering with My Site. Your account has been set up and you can log in using the following details -<br /><br />'
            .'<strong>Username:</strong> '.$_REQUEST['username']
            .'<br /><strong>Password:</strong> '.$this->password
            .'<br /><br />Once you have logged in, please ensure that you visit the Site Admin and change you password so that you don\'t forget it in the future.';
        $headers = 'MIME-Version: 1.0'."\r\n";
        $headers.= 'Content-type: text/html; charset=iso-8859-1'."\r\n";
        $confirmation_headers = $headers.'From: My Site <no-reply@mysite.com>'."\r\n";

        $this->form_for_email = compact('confirmation_to', 'confirmation_subject', 'confirmation_message', 'confirmation_headers');

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-13T17:08:15.093

接受的答案现在已过时。使用的答案`wp_new_user_notification()`有效，并将发送类似 WordPress 的邮件。

不过，您可能希望按照 David Gard 的建议发送自己的邮件。这是执行此操作的一些代码。您可以将其用作函数，也可以用作类中的方法。

```
/**
 * Send mail with a reset password link
 *
 * @param  int $user_id  User ID
 */
function notify_new_user( $user_id )
{
    $user = get_userdata( $user_id );

    $subject   = '[website] Connection details';
    $mail_from = get_bloginfo('admin_email');
    $mail_to   = $user->user_email;
    $headers   = array(
        'Content-Type: text/html; charset=UTF-8',
        'From: ' . $mail_from,
    );

    $key = get_password_reset_key( $user );
    if ( is_wp_error( $key ) ) {
        return;
    }
    $url_password = network_site_url( "wp-login.php?action=rp&key=$key&login=" . rawurlencode( $user->user_login ) );

    $body = '<p>HTML body in your own style.</p>';
    $body .= '<p>It must include the login identifier: ' . $user->user_login . '</p>';
    $body .= '<p>And the link: ' . $url_password . '</p>';

    wp_mail( $mail_to, $subject, $body, $headers );
} 
```

如果您不想在函数中包含 HTML 内容，可以使用模板引擎。这是您可以添加到上述代码中的示例。

```
// Set up Mustache
$path = get_stylesheet_directory() . '/mails';
$dir  = wp_get_upload_dir();
$m    = new \Mustache_Engine( [
    'cache'           => $dir['basedir'] . '/mustache_cache',
    'loader'          => new \Mustache_Loader_FilesystemLoader( $path ),
    'partials_loader' => new \Mustache_Loader_FilesystemLoader( $path . '/layouts' ),
] );

// Variable data in the mail
$data['mail']['title'] = $subject;          // {{mail.title}}
$data['identifier']    = $user->user_login; // {{identifier}}
$data['url-password']  = $url_password;     // {{url-password}}

$body = $m->render( 'mail-template-new-user', $data ); 
```

[小胡子标签文档](https://github.com/bobthecow/mustache.php/wiki/Mustache-Tags)。

# ruby-on-rails-3 - 制表符或空格可以破坏测试或程序吗？

> ID：13509576
> 
> 赞同：0
> 
> 时间：2012-11-22T09:33:57.513
> 
> 标签：ruby-on-rails-3, tdd, rspec-rails

我阅读了“Ruby on Rails Tutorial 3”并尝试找出测试。我刚刚意识到我的（非常简单的）测试失败了，因为我以某种方式混合了制表符和空格以进行缩进。

结果我收到了这样的错误：

```
[31mURI::InvalidURIError:←[0m
       ←[31mthe scheme http does not accept registry part: www.example.comstatic_pages (or bad hostname?)←[0m 
```

在我复制/粘贴测试的第一部分（通过的部分）并更改内容后，所有测试都通过了。

**我的问题：**是否有一种“正确”的方法来做到这一点，或者只坚持一种方法（制表符或空格）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T00:01:50.213

我被困在同一个问题上，我认为我们的问题是忘记了访问语句中的第一个斜杠 (/)。以下代码使测试输出 URI 错误。

```
visit 'static_pages/about'
page.should have_content('About us') 
```

写下第一个斜杠，代码将按预期工作。

```
visit '/static_pages/about'
page.should have_content('About us') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T16:50:16.397

制表符/空格对您的测试的影响应该*为零。*有一些语言很重要，但 ruby​​ 不是其中之一。我冒险猜测可能看起来像空格的东西实际上是一些不可见的 utf8 字符导致了问题。我以前从其他来源复制和粘贴时发生过这种情况。并根据我所看到的修复它简单地重写它。

底线......使用你想要的任何东西......保持一致只是为了让你的生活更简单，但这并不重要。

# asp.net-mvc - (.NET) MVC 和 WCF（REST 与 SOAP）并将它们一起使用

> ID：13509587
> 
> 赞同：0
> 
> 时间：2012-11-22T09:34:11.293
> 
> 标签：asp.net-mvc, wcf, rest, soap

我正在寻找可以由 ASP.NET MVC 控制器或彼此使用的两个 WCF 服务。

本质上，该服务将生成一个 (XML) DataContract，可以由另一个服务使用。

> A. OutputService1 将输出一个对象，InputService2 将其作为输入并保存。在这种情况下，用户将例如单击 MVC 应用程序中的链接以强制消息传输。

或者

> B. OutputService1 会将输出提供给 ASP.NET MVC 控制器，然后该控制器会将其放入文件中并提供给用户进行保存。然后，用户可以在不久的将来通过 MVC 应用程序将其上传到 InputService2。

到目前为止，我有两个服务和 .NET MVC 应用程序。我已经测试了几个场景，但我对结果不太满意。

这是我如何能够通过发送对象。View 中的输入表单然后通过控制器传递给支持 REST 的 WCF。OutputService1 的输出包括`<?xml version="1.0"?>`使用 REST 时。InputService2 将只接受没有第一行的 XML 的其余部分。

REST WCF 服务类似于此示例：[http ://forums.asp.net/t/1830710.aspx/1](http://forums.asp.net/t/1830710.aspx/1)

输入输出服务.cs

```
[OperationContract]
[WebInvoke(Method = "POST",
    ResponseFormat = WebMessageFormat.Xml,
    UriTemplate = "Input")]
ServiceRequestStatus Input(MyDataContract mdc); 
```

网络配置

```
 <service name="myns.InputOutputService">
    <endpoint address="/" binding="webHttpBinding" name="InputOutputEndPoint"
      contract="myns.IInputOutputService" behaviorConfiguration="restBehavior" />
    <endpoint address="mex" binding="mexHttpBinding" name="MetaDataExchangeEndpoint"
      contract="IMetadataExchange" />
  </service>
...
<endpointBehaviors>
  <behavior name="restBehavior">
    <webHttp helpEnabled="true" automaticFormatSelectionEnabled="true" />
  </behavior>
</endpointBehaviors> 
```

.NET MVC 部分与此示例类似：[Passing object with WCF RESTful](https://stackoverflow.com/questions/1552971/passing-object-with-wcf-restful)

MVC MyView.cshtml

```
<form method="post" action='@Url.Action("TestWCFRest")'>
    <textarea name="xml" id="WCFTestData" rows="10" cols="50">        
        <?xml version="1.0"?>
        <MyDataContract xmlns="myns" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
            <item1>100</item1><item2>0.5</item2>
        </MyDataContract>
    </textarea>
    <br />        
    <input id="Url" name="Url" type="text" value="http://localhost/ProjectName/WCFTestService.svc/Input" size="80" />
    <input type="submit" value="Test WCF input"/>
</form> 
```

.NET MVC MyController.cs

```
 // Added to avoid validating the XML 
    [ValidateInput(false)]
    public ActionResult TestWCFRest(string xml, string url)
    {

        byte[] reqData = Encoding.UTF8.GetBytes(xml);

        HttpWebRequest req = WebRequest.Create(url) as HttpWebRequest;
        req.Method = "POST";
        req.ContentType = " application/xml";
        req.ContentLength = xml.Length;
        req.Proxy = null;
        Stream reqStream = req.GetRequestStream();
        reqStream.Write(reqData, 0, reqData.Length);

        HttpWebResponse resp = req.GetResponse() as HttpWebResponse;
        string code = resp.StatusCode.ToString();
        return Content(code);
    } 
```

如果我尝试将 ServiceReference 添加到 WCF 服务，并将 XML 转换为 MVC 内的数据合同，这是可能的还是一个坏主意？

```
 public ActionResult TestWCFRest(string xml, string url)
    {
        InputOutputServiceClient iosc = new InputOutputServiceClient();
        // Need to convert the XML to MyDataContract
        ...?
        iosc.Input(myDataContractObj);
    } 
```

我应该使用 REST 而不是 SOAP 吗？我尝试通过 SOAP 从 OutputService1 输出 DataContract 类，然后使用手动将其发送到 InputService2，`HttpWebRequest and HttpWebResponse`但没有让它工作（还）。用户获得的文件不一定需要是人类可读的，但如果这很重要，服务可能会在某个时候向外部客户端开放。

有没有更好的方法来使用 .NET MVC 和 WCF 服务？主旨是两个服务 InputService 和 OutputService 需要通过 MVC 中的 User 命令时直接相互通信，并且能够将输出直接输出给用户（XML 文件），并将同一个文件作为输入。

基本上，这种方法在输出的 XML 中的额外行之外有效。但是，有没有更好的方法，是否应该将 XML 转换为 DataContract 对象并传递给用户？OutputService 应该最好输出 SOAP 还是 REST XML？`HttpWebRequest and HttpWebResponse`用于将数据发送到服务似乎有点尴尬。

# javascript - 在 Knockout.js 中，如何对数组进行排序

> ID：13509590
> 
> 赞同：0
> 
> 时间：2012-11-22T09:34:16.283
> 
> 标签：javascript, knockout.js

在 ViewModel 我有一个 observableArray 和一个计算返回在视图中管理的数组：

```
var operators = ko.observableArray([]);
    var records = ko.computed(function () {
        return operators();
    }); 
```

这是我的排序方法；

```
Order = function (data, event, colName) {
            var th = $('#th-' + colName),
                attr = th.data('sort');

            setAttribute(th, attr); //switch data-sort between 'asc' and 'desc'

            if (attr === 'asc') {
                operators = operators.sort(function (a, b) {
                    return (a.fullname === b.fullname) ? 0 : (a.fullname < b.fullname ? -1 : 1);
                });
            }
            else {
                operators = operators.sort(function (a, b) {
                    return (a.fullname === b.fullname) ? 0 : (a.fullname > b.fullname ? -1 : 1);
                });
            }
        }; 
```

这是观点：

```
<table id="table-hour">
    <thead>
        <tr>
            <th data-bind="click: function(data, event) { Order(data, event, 'fullname')}" data-sort="asc" id="th-fullname">Fullname</th>
        </tr>
    </thead>
    <tbody>
        <!-- ko foreach: records -->
        <tr>
            <td>
                <span data-bind="text: fullname"></span>
            </td>
        </tr>    
        <!-- /ko -->
    </tbody> 
```

好吧，排序功能就像一个魅力，实际上用浏览器调试我可以看到数组以两种方式排序，但视图只是第一次更新。我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T09:37:10.687

问题是，您需要更新 observableArray，并将数据放回该数组中。

如果未更新可观察对象，则视图不会更新

看看 JavaScript 排序功能（[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)）。

# jquery - 重新触发引导选项卡更改事件

> ID：13509591
> 
> 赞同：0
> 
> 时间：2012-11-22T09:34:23.270
> 
> 标签：jquery, twitter-bootstrap

我有一个如下所示的屏幕： [![代理画面](../Images/eaec8a26c70da6b8c6196f2cd06729df.png)](https://i.stack.imgur.com/9hUEY.jpg)

选项卡通过选项卡更改事件上的 ajax 调用加载。页面顶部的网格需要能够触发特定选项卡的显示事件（因为它提供了一个 id 等...），但它仅适用于单击的第一个项目，几乎就像第二次单击被阻止.

简化代码

```
$(function() {

    var self = this;

    self.agencyId = -1;

    self.SwitchView = function(partialViewName, targetDiv) {
        alert('Switching To ' + partialViewName)
    };

    $("#AgencyTabs").tab();
    $("#AgencyTabs").on("show", function(e) {

        var target = "#partialContainer";
        var partialViewName = $(e.target).data("src");

        self.SwitchView(partialViewName, target);

        $("#AgencyTabs").tab();
    });

    $('#toolbar').on('click', '.action-button', function() {

        var iGrid = this;

        self.agencyId = $(iGrid).data('rowid');
        self.currTab = "Details";

        $('#AgencyTabs a[data-src="' + self.currTab + '"]').tab('show');

        return false;
    });

    $('#AgencyTabs a[data-src="Parameters"]').tab('show');

});​ 
```

我已经设置了这个[小提琴](http://jsfiddle.net/rohan_buchner/87gLC/)来证明我的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T09:57:01.747

[这是你需要的吗？](http://jsfiddle.net/87gLC/5/)

```
$("#AgencyTabs").on("show", function(e) {
    var target = "#partialContainer";
    var partialViewName = $(e.target).data("src");

    //self.SwitchView(partialViewName, target);

    $("#AgencyTabs").tab();
});

$("#AgencyTabs").on("click", function(e) {
    self.SwitchView($(e.target).data("src"), e.target);
}); 
```

据我了解，问题是`SwitchView`在已经选择选项卡时没有执行。此编辑通过将函数执行从`onshow`事件移动到事件来解决此`onclick`问题。

**编辑：**

[小提琴](http://jsfiddle.net/87gLC/5/)现在`SwitchView`也在“查看”按钮上执行。但是，它并没有专门触发`onshow`事件，它只是调用函数。

编辑为 $('#toolbar').on('click', <...>); ：

```
$('#toolbar').on('click', '.action-button', function() {

    var iGrid = this;

    self.agencyId = $(iGrid).data('rowid');
    self.currTab = "Details";
    self.targeted = $('#AgencyTabs a[data-src="' + self.currTab + '"]')

    self.SwitchView(self.currTab, self.targeted);

    self.targeted.tab('show');

    return false;
}); 
```

# wpf - 如何在绑定到数据表的 WPF Toolkid Datagrid 中对数据进行分组

> ID：13509592
> 
> 赞同：1
> 
> 时间：2012-11-22T09:34:26.720
> 
> 标签：wpf, datatable, wpftoolkit

我是 wpf 的新手。我正在.net 3.5 中使用 wpf 开发一个小型应用程序。我有一个与数据表绑定的 wpf toolkid 数据网格控件。现在我无法在我的数据网格上对数据进行分组。

谁能告诉我如何做到这一点？

这是我的xmal

```
 <Window.Resources>
        <Style x:Key="GroupHeaderStyle" TargetType="{x:Type GroupItem}">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type GroupItem}">
                                <Expander x:Name="exp" IsExpanded="True"
                                  Background="White"
                                  Foreground="Black">
                                    <Expander.Header>
                                        <TextBlock Text="{Binding AdmissionDate}"/>
                                    </Expander.Header>
                                    <ItemsPresenter />
                                </Expander>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Window.Resources>

<tk:DataGrid Grid.Row="2" Grid.ColumnSpan="4" Margin="5,0,5,0"
                     AutoGenerateColumns="False" 
                     Name="testTakerGrid" 
                     AlternationCount="2" 
                     AlternatingRowBackground="Azure"
                     RowHeaderWidth="40"
                     CanUserSortColumns="True"
                     IsSynchronizedWithCurrentItem="True"
                     GridLinesVisibility="None"
                     ItemsSource="{Binding}"
                     SelectionMode="Single"
                     CanUserAddRows="False" CanUserDeleteRows="False">
         <tk:DataGrid.GroupStyle>
                        <GroupStyle ContainerStyle="{StaticResource GroupHeaderStyle}">
                            <GroupStyle.Panel>
                                <ItemsPanelTemplate>
                                    <tk:DataGridRowsPresenter/>
                                </ItemsPanelTemplate>
                            </GroupStyle.Panel>
                        </GroupStyle>
                    </tk:DataGrid.GroupStyle>
<tk:DataGrid.Columns>                
        <tk:DataGridTextColumn Header="Serial Id" Binding="{Binding Path=SerialId, Mode=OneWay, ValidatesOnDataErrors=True}" Width="60"/>              
        <tk:DataGridTextColumn Header="Name" Binding="{Binding Path=Name, Mode=OneWay, ValidatesOnExceptions=True}" Width="200"/>
        <tk:DataGridTextColumn Header="Gender" Binding="{Binding Path=Gender, Mode=OneWay, ValidatesOnExceptions=True}"/>
        <tk:DataGridTextColumn Header="Admission Date" Binding="{Binding Path=AdmissionDate, Mode=OneWay, ValidatesOnExceptions=True, StringFormat='d'}" Width="100" />
</tk:DataGrid.Columns>
</tk:DataGrid> 
```

这是我隐藏的代码

```
 public partial class MainApp : Window
    {
        TestTakerDataSet takerDs = new TestTakerDataSet();
        TestTakersTableAdapter takerTa = new TestTakersTableAdapter();

        CollectionView view;
        private void Window_Loaded(object sender, RoutedEventArgs e)
        {
                 takerTa.FillByTerm(takerDs.TestTakers, "2010-2011T1E");        

                        view = (CollectionView)CollectionViewSource.GetDefaultView(takerDs.TestTakers);
this.DataContext=view;
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:28:40.780

@sovantha 在您上面给出的代码中，我无法在任何地方看到数据网格绑定。在 XAML 中使用资源绑定或在后面的代码中绑定 Datagrid ItemSource，如下所示：

```
testTakerGrid.ItemSource = view; 
```

# python - AttributeError: Nonetype - 但变量是字符串

> ID：13509600
> 
> 赞同：1
> 
> 时间：2012-11-22T09:35:03.037
> 
> 标签：python, python-3.x, attributeerror, nonetype

我在我的 Python 脚本上遇到了一个奇怪的属性错误。

```
 File "/home/francesco/Documents/Dropbox/py_campaigns/queries.py", line 132, in replace_string
string[9] = string[9].replace(' ', '_')
AttributeError: 'NoneType' object has no attribute 'replace'
>>> string[9]
'displayURL_A'
>>> string[9].replace(' ','_')
'displayURL_A' 
```

正如你所看到的，我有一个列表元素的属性错误。但是当我在解释器上尝试完全相同的命令时，一切都很好。如何找到 None 的对象？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T23:37:16.127

`with block`如果在退出时修改某些变量的 a 内部引发异常时看到类似的错误。当您在异常发生后获得解释器的控制权时，所有上下文管理器都已关闭，并且某些变量可能具有不同的值。

这可能是你的情况吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:20:47.320

尝试以下几行，它不会抛出任何错误

```
x= string[9] and string[9].replace(' ', '_') 
```

# php - 以用户身份通过 PHP sdk 检索 facebook fanpage 帖子

> ID：13509604
> 
> 赞同：-1
> 
> 时间：2012-11-22T09:35:11.710
> 
> 标签：php, facebook, facebook-php-sdk

我想构建一个应用程序，关注特定 Facebook 粉丝页面的用户（那些喜欢粉丝页面的用户）可以评论粉丝页面上的帖子。当我使用粉丝页面的管理员用户的访问令牌来检索帖子时，我没有收到任何错误，但是当我使用非管理员用户（至少是喜欢该页面的人）时，我得到了错误：

```
Fatal error:  Uncaught OAuthException: An active access token must be used to query information about the current user. 
```

我将每个用户的详细信息存储在数据库中，包括他们登录时的访问令牌并接受必要的权限，例如**publish_stream、read_stream、offline_access、manage_pages**

我的问题是，我是否可以使用其他用户的访问令牌检索帖子，因为似乎只有管理员用户的访问令牌才允许我检索帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:36:36.440

For reading the feed of a page, you only need an app access token:

```
$app_accesstoken = APP-ID . '|' . APP-SECRET; 
```

See here: [https://developers.facebook.com/docs/reference/api/page/](https://developers.facebook.com/docs/reference/api/page/)

> "an app or user access token for public and non-demographically restricted pages"

Btw, "offline_access" is deprecated since months and will be deactivated soon.

# android - 安卓 Facebook 错误。“抱歉出了点问题。我们正在努力尽快解决这个问题”

> ID：13509606
> 
> 赞同：2
> 
> 时间：2012-11-22T09:35:19.203
> 
> 标签：android, facebook

我是安卓新手。我已经在我的应用程序中集成了 facebook，它可以正常工作。当我想分享我的内容时，突然出现上述错误。如何解决这个问题请帮助我。

提前谢谢

我的 faceboobc.java 类代码如下

```
import com.example.shareslabfb.DialogError;
import com.example.shareslabfb.Facebook;
import com.example.shareslabfb.Facebook.DialogListener;
import com.example.shareslabfb.FacebookError;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.os.Bundle;

import android.view.View;
import android.view.Window;
import android.widget.Toast;

public class Facebookc extends Activity{

    private static final String APP_ID = ".............";
    private static final String[] PERMISSIONS = new String[] {"publish_stream"};

    private static final String TOKEN = "access_token";
        private static final String EXPIRES = "expires_in";
        private static final String KEY = "facebook-credentials";

    private Facebook facebook;
    private String messageToPost;

    public boolean saveCredentials(Facebook facebook) {
        Editor editor = getApplicationContext().getSharedPreferences(KEY, Context.MODE_PRIVATE).edit();
        editor.putString(TOKEN, facebook.getAccessToken());
        editor.putLong(EXPIRES, facebook.getAccessExpires());
        return editor.commit();
    }

    public boolean restoreCredentials(Facebook facebook) {
        SharedPreferences sharedPreferences = getApplicationContext().getSharedPreferences(KEY, Context.MODE_PRIVATE);
        facebook.setAccessToken(sharedPreferences.getString(TOKEN, null));
        facebook.setAccessExpires(sharedPreferences.getLong(EXPIRES, 0));
        return facebook.isSessionValid();
    }

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    facebook = new Facebook(APP_ID);
    restoreCredentials(facebook);

    requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.facebook_dialog);

    String facebookMessage = getIntent().getStringExtra("facebookMessage");
    if (facebookMessage == null){
        /*if(!MessageList.URLToPost.isEmpty()){
            System.out.println("Inside IF");
            String title="  . For more info Click : ";
            //facebookMessage = "";
            facebookMessage = MessageList.title;
        }else{System.out.println("Inside ELSE");*/
        facebookMessage = "";

    }
    messageToPost = facebookMessage;
}

public void doNotShare(View button){
    finish();
}
public void share(View button){
    if (! facebook.isSessionValid()) {
        loginAndPostToWall();
    }
    else {
        postToWall(messageToPost);
    }
}

public void loginAndPostToWall(){
     facebook.authorize(this, PERMISSIONS,Facebook.FORCE_DIALOG_AUTH, new LoginDialogListener());
}

public void postToWall(String message){
    Bundle parameters = new Bundle();
    String s;
    if(MessageList.singleDescription.length()>70){
        s=MessageList.singleDescription.substring(0, 70);   
    }else{
        s=" ";
    }

    parameters.putString("title", message);
    parameters.putString("description", s);
    parameters.putString("picture", MessageList.imageURL);
    parameters.putString("link", MessageList.URLToPost); 
        facebook.dialog(this, "stream.publish", parameters, new WallPostDialogListener());
}

class LoginDialogListener implements DialogListener {
    public void onComplete(Bundle values) {
        saveCredentials(facebook);
        if (messageToPost != null){
        postToWall(messageToPost);
    }
    }
    public void onFacebookError(FacebookError error) {
        showToast("Authentication with Facebook failed!");
        finish();
    }
    public void onError(DialogError error) {
        showToast("Authentication with Facebook failed!");
        finish();
    }
    public void onCancel() {
        showToast("Authentication with Facebook cancelled!");
        finish();
    }
}

class WallPostDialogListener implements DialogListener {
    public void onComplete(Bundle values) {
                final String postId = values.getString("post_id");
                if (postId != null) {
                showToast("Message posted to your facebook wall!");
            } else {
                showToast("Wall post cancelled!");
            }
            finish();
        }
    public void onFacebookError(FacebookError e) {
        showToast("Failed to post to wall!");
        e.printStackTrace();
        finish();
    }
    public void onError(DialogError e) {
        showToast("Failed to post to wall!");
        e.printStackTrace();
        finish();
    }
    public void onCancel() {
        showToast("Wall post cancelled!");
        finish();
    }
    }

private void showToast(String message){
    Toast.makeText(getApplicationContext(), message, Toast.LENGTH_SHORT).show();
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    facebook.authorizeCallback(requestCode, resultCode, data);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:37:29.610

在这里，您正在使用 Facebook Dialog 将 Facebook 集成到您的 android 应用程序中......所以，有时会发生这种情况......

使用此链接将 facebook 集成到您的应用程序中。

[http://developers.facebook.com/docs/mobile/android/hackbook/](http://developers.facebook.com/docs/mobile/android/hackbook/)

# php - mysql关键字搜索全文

> ID：13509607
> 
> 赞同：0
> 
> 时间：2012-11-22T09:35:23.053
> 
> 标签：php, mysql

我正在我的网站上寻找关键字搜索并且遇到了一些困难

```
$q = "SELECT * from post WHERE post_k like '%".$_GET['s']."%'"; 
```

搜索后的网址是**website.com/?s=keyword**

我没有得到全文搜索。例如，如果我搜索 robin，我可以从 batman 获得结果，因为它们的单词中都有 n。我正在寻找一个搜索，如果我输入 robin，我只会从 robin 获得结果。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T09:38:29.953

您需要使用`MATCH AGAINST`with `FULLTEXT INDEX`。

```
CREATE FULLTEXT INDEX search_index ON post (post_k); 
```

那么您的查询将更像（使用 MySQLi 准备好的语句的示例）：

```
$query = $mysqli->prepare("SELECT * FROM post WHERE MATCH(post_k) AGAINST(?)");
$query->bind_param('s', $_GET['s']); 
```

# php - 使用 HTML5 contenteditable javascript 和 PHP 进行内联编辑

> ID：13509615
> 
> 赞同：1
> 
> 时间：2012-11-22T09:35:45.273
> 
> 标签：php, html, css, inline-editing

我是 ajax 新手，所以我想问一个简单的 ajax 脚本来更新 mysql 数据库，使用 HTML5 contenteditable="true" 进行内联编辑。

已经在谷歌上搜索，但仍然不知道如何弄清楚。有人可以帮我提供一个 javascript 来更新数据库，甚至不用使用 javascript 的提交按钮。

我尽量不使用 jQuery，因为它可以在 iPad 和手机上访问，即使我正在使用 twitter 引导程序

这是我的html5

```
<!DOCTYPE html>
    <html lang="en">
    <head>
    <meta charset="utf-8">
        <title>Contact</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <!-- Le styles -->
        <link href="../assets/css/bootstrap.css" rel="stylesheet">
        <link href="../assets/css/bootstrap-responsive.css" rel="stylesheet">
        <link href="../assets/js/google-code-prettify/prettify.css" rel="stylesheet">
    <style>
        body {
            padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
        }
    </style>
<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<script src="../assets/js/jquery.js"></script>
<script src="../assets/js/bootstrap.min.js"></script>
<script src="../assets/js/google-code-prettify/prettify.js"></script>
<!-- Fav and touch icons -->
<link rel="shortcut icon" href="../assets/ico/favicon.ico">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
<link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
</head>

----
----
<div class="contact">
    <form class="form-horizontal" method="POST" action="updatecontactmaininfo.php">
         <?php
            $sql=mysql_query("select * from contacts where SupplierId='$compid'");
            $dt=mysql_fetch_array($sql);
        ?>
        <table class="table table-bordered table-hover table-striped ">
            <tr>
                <td><i class="icon-user"></i> ID:</td>
                <td><input type="text" name="SupplierId" value="<?=$dt[SupplierId]?>"></td>
                <td><i class="icon-briefcase"></i> Company:</td>
                <td><input type="text" name="CompanyName" value="<?=$dt[CompanyName]?>"></td>
            </tr>
            <tr>
                <td><i class="icon-home"></i> Address:</td>
                <td colspan="3"><input type="text" name="Address1" value="<?=$dt[Address1]?>"></td>
            </tr>
            <tr>
                <td><i class="icon-map-marker"></i> City:</td>
                <td><input type="text" name="City" value="<?=$dt[City]?>"></td>
                <td><i class="icon-map-marker"></i> State:</td>
                <td><input type="text" name="State" value="<?=$dt[State]?>"></td>
            </tr>
            <tr>
                <td align="right" class="tdblue"><i class="icon-flag"></i> Country:</td>
                <td><input type="text" name="Country" value="<?=$dt[Country]?>"></td>
                <td align="right" class="tdblue"><i class="icon-envelope"></i> Zip:</td>
                <td><input type="text" name="State" value="<?=$dt[ZipCode]?>"></td>
            </tr>
            <tr>
                <td><i class="icon-volume-up"></i> Phone:</td>
                <td><input type="text" name="Phone" value="<?=$dt[Phone]?>"></td>
                <td><i class="icon-print"></i> Fax:</td>
                <td><input type="text" name="Fax" value="<?=$dt[Fax]?>"></td>
            </tr>
            <tr>
                <td><i class="icon-globe"></i> Website:</td>
                <td><input type="text" name="website" value="<?=$dt[website]?>"></td>
                <td><i class="icon-adjust"></i> Zone:</td>
                <td><input type="text" name=Zone"" value="<?=$dt[Zone]?>"></td>

                <input type="hidden" name="RecId" value="<?=$dt[RecId]?>">
                <input type="hidden" name="limit" value="<?=$limit?>">
            </tr>
        </table>   
</div> 
```

我的 PHP (updatecontactmaininfo.php) 是：

```
<?php
    include("../config.php");

    $SupplierId             =   $_POST[SupplierId];
    $CompanyName            =   $_POST[CompanyName];
    $Address1               =   $_POST[Address1];
    $City                   =   $_POST[City];
    $State                  =   $_POST[State];
    $Country                =   $_POST[Country];
    $ZipCode                =   $_POST[ZipCode];
    $Phone                  =   $_POST[Phone];
    $Fax                    =   $_POST[Fax];
    $website                =   $_POST[website];
    $Zone                   =   $_POST[Zone];
    $RecId                  =   $_POST[RecId];
    $limit                  =   $_POST[limit];

    mysql_query("update contacts set SupplierId='$SupplierId', Address1='$Address1', City='$City', State='$State', Country='$Country', ZipCode='$ZipCode', Phone='$Phone', Fax='$Fax', website='$website' where RecId='$RecId'");

    header('Location:contactsform.php?limit='.$limit);

?> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:15:08.580

您可以附加`event` `oninput`到`contenteditable`.

```
var el = document.getElementById('element_id')
el.oninput = function(){
    // you can grab values of other inputs and send ajax call here
} 
```

# javascript - JS 确认更改为 Jquery 模态对话框

> ID：13509617
> 
> 赞同：0
> 
> 时间：2012-11-22T09:35:51.007
> 
> 标签：javascript, jquery, modal-dialog

我现在有一个模态删除确认我想更改确认以使用 jQuery Modal。这是我的：

```
$('.stdelete').live("click", function() {
    var ID = $(this).attr("id");
    var uid = $("#uid").val();
    var dataString = 'msg_id='+ ID + '&uid=' + uid;

    if (confirm("Sure you want to deletes this update? There is NO undo!")) {
        $.ajax({
            type: "POST",
            url: "delete_message_ajax.php",
            data: dataString,
            cache: false,
            success: function(html) {
                $("#stbody"+ID).slideUp();
            }
        });
    } 
```

有人有想法吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:41:54.750

```
 $('.stdelete').live("click",function()  {
        var ID = $(this).attr("id");
        var uid = $("#uid").val();
        var dataString = 'msg_id='+ ID + '&uid=' + uid;
        var d = $('<div />').append('Sure you want to deletes this update? There is NO undo!').dialog({
            buttons: {
                'no': function() {
                    $(this).dialog('close');
                },
                'yes': function() {
                    $.ajax({
                        type: "POST",
                        url: "delete_message_ajax.php",
                        data: dataString,
                        cache: false,
                        success: function(html){
                            $("#stbody"+ID).slideUp();
                        }
                    });
                    $(this).dialog('close');
                }
            }
        });
        $('body').append(d);
    }); 
```

# matlab - 二维散点图

> ID：13509618
> 
> 赞同：-2
> 
> 时间：2012-11-22T09:35:53.767
> 
> 标签：matlab

我在做散点图时遇到了一个很大的问题。让，在 X 轴上，我必须输入变量 x=5,6,7....,10 的值。

对于 x=5，我有 1000 个值。同样，对于 x=6，我还有另外 1000 个值，依此类推，让它们为 Y。如何在 matlab 中为“X”与“Y”创建二维散点图？它的 matlab 命令是什么？请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:47:03.600

如果您正在使用“最近” - 少于 4 年 - 版本的 Matlab，您可以通过在变量面板中选择 x 和 y 从 GUI 访问散点图，然后单击 plot 以选择散点图。

否则，您可以按照官方文档中给出的示例进行操作：http: [//www.mathworks.com/help/matlab/ref/scatter.html](http://www.mathworks.com/help/matlab/ref/scatter.html)

# c++ - C++ 中 xmalloc 的右类似物

> ID：13509624
> 
> 赞同：1
> 
> 时间：2012-11-22T09:36:15.630
> 
> 标签：c++

两个简单的问题：简而言之，`C`我们经常使用`xmalloc`分配或中止例程。我用 C++ 实现了它。这是一个正确的无异常实现吗？

```
template <typename T>
T *xnew(const size_t n)
{
    T *p = new (std::nothrow) T[n];
    if (p == nullptr)
    {
        cerr << "Not enough memory\n";
        abort();
    }
    return p;
}

int main()
{
    int *p = xnew<int>(5000000000LL);
} 
```

第二个问题，如果我`<int>`从`xnew<int>(5000000000LL);`调用中删除，编译器（g++ 4.7.2）**不能再推断**出`[T = int]`，尽管返回类型`int *`仍然存在。这是为什么？

**编辑：**`new`使用即使没有抛出异常也可能抛出异常的版本是否有任何开销？当不是绝对必要时，我真的不想使用任何例外。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T09:38:57.930

我不明白为什么这是必要的。 如果分配内存失败，`new`将抛出。`std::bad_alloc`如果您不处理异常，这将导致调用`std::terminate`有效地结束程序并具有与`xmalloc`.

当然，当您的编译器不实现异常时，这种情况会发生变化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T10:01:20.000

> 第二个问题，如果我`<int>`从 `xnew<int>(5000000000LL);`调用中删除，编译器（g++ 4.7.2）不能再推断 [T = int] 尽管返回类型 int * 仍然存在。这是为什么？

函数模板参数仅从函数调用中的参数表达式的类型推导出来。由于`T`没有以任何方式出现在函数参数中，因此无法推断。

你对函数调用的返回值所做的事情永远不会影响 C++ 中的模板参数推导。如果你写`int *p = some_function(5000000000LL);`then`int*` *不一定*是 的返回类型`some_function`，它是编译器将尝试将返回类型转换为的类型`some_function`。

因此，编译器无法推断出的最接近的原因`int`是标准禁止它（至少，没有诊断）。最终的原因是 C++ 的设计者（最初可能是 Stroustrup）想要限制推理所考虑的事物，以保持规则如果不简单，那么至少对于凡人的头脑来说是可以理解的。

C++ 中有一条规则，即子表达式的类型仅取决于子表达式本身，而不取决于周围的表达式。而且AFAIK只有一个例外，那就是函数指针或成员函数指针不明确时：

```
void foo();
void foo(int);

void (*pfoo1)() = &foo; // &foo evaluates to a pointer to the void overload
void (*pfoo2)(int) = &foo; // &foo evaluates to a pointer to the int overload
void (*pfoo3)() = (void(*)(int))&foo; // &foo evaluates to the int overload, but doesn't convert to the type of pfoo3 so the line fails. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T10:06:49.617

此代码不能保证 100% 安全，因为`operator<<()` **可能会抛出**. 实际上，这并不是普遍的情况，因为抛出应该满足一些罕见的条件：

1.  `std::cerr`已`badbit`在其`exceptions()`掩码中设置（默认情况下不是）
2.  输出时抛出异常

在这种情况下，异常将被重新抛出并且内存将泄漏。

关于`<int>`从模板函数调用表达式中删除 - 当然它不会起作用。编译器只能从调用表达式本身推断模板参数类型，而不是从将分配的左值类型。所以你想要自动推导的模板参数应该是函数参数，而不是返回类型：

```
template <class T> T f1();
template <class T> T f2(T);

int a = f1();   // Will not compile, shall be f1<int>();
int b = f2(42); // OK 
```

异常开销实际上取决于实现。我相信现代编译器足够聪明，可以尽可能避免这种开销，但您应该使用您的平台进行检查以确定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T10:34:55.940

如果您想避免抛出异常`new`（无论出于何种原因 - 也许您正在使用不支持异常的平台，例如某些嵌入式平台），如果无法分配内存，您可以提供 a`new_handler`中止程序：`new`

```
#include <stdlib.h>

#include <iostream>
#include <new>

namespace {
    void new_handler_abort()
    {
        std::cerr << "Not enough memory\n";
        abort();
    }

    struct new_handler_abort_installer {

        new_handler_abort_installer() {
            std::set_new_handler(new_handler_abort);
        }

    };

    // a statically allocated object that does nothing but install the
    //  new_handler_abort() function as the new_handler

    new_handler_abort_installer install_new_handler_abort;
} 
```

仅将此源文件作为程序的一部分包含在内将安装一个`new_handler`将中止程序的程序，并且`new`在分配内存时遇到问题。

然而：

*   何时完成此初始化不是确定性的（除了在`main()`调用之前会发生）。因此，如果您之前遇到内存问题`main()`，它可能不会完全按照您的意愿行事。
*   编译器可能仍会添加代码以支持异常处理，并且对于某些包含每次调用时发生的代码的编译器，`operator new`因此可能仍会花费*少量*开销来处理永远不会发生的异常（较新的编译器可能会避免这种开销通过使用表驱动的堆栈展开，避免在每次调用时运行代码来设置异常）。

# android - Android：如何在drawable-hdpi中放置具有不同分辨率的相同图像

> ID：13509630
> 
> 赞同：0
> 
> 时间：2012-11-22T09:36:24.063
> 
> 标签：android

我有三星 Galaxy 7" tab(hdpi) 和 kindle fire 7" hd 设备。两者都有不同的屏幕分辨率（三星银河 - 1024*600 和 kindle fire hd - 1280*800）。两者都是 hdpi 设备，所以很自然地从 drawable-hdpi 中挑选资源。

现在我想做以下事情：

一张图片说 Img1.png 以两种不同的大小和相同的名称创建

例如：Img1.png（比如 72*72px）和 Img1.png（比如 78*78px）

现在如何将这些图像放在 drawable-hdpi 文件夹下，以便 samsung tab 拾取 72*72 图像，kindle fire 拾取 78*78 图像。

图像或可绘制文件夹是否遵循任何命名约定，以便 android 可以识别具有不同屏幕尺寸的 hdpi 设备的图像，

请帮助我。

提前致谢，

凯坦·班格尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:40:35.073

当应用程序检测到屏幕是 hdpi 时，会自动选择 hdpi 的图像。您只需将名称相同但大小不同的图像放在相应的文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:41:29.050

您可以将较大的放入 sw600dp 文件夹中（必要时调整值）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:41:40.140

实际上有一个命名约定。根据您命名资源文件夹的方式，android 选择从哪里选择图形。[在这里](http://developer.android.com/guide/topics/resources/providing-resources.html#table2)，您可以找到支持的所有不同限定符的完整列表。

> 例如，drawable-en-rUS-land 适用于横向的美式英语设备。

但是我不确定是否有任何限定符可以区分这两个设备。

# android - 将任何 android-view 添加到自定义视图

> ID：13509639
> 
> 赞同：0
> 
> 时间：2012-11-22T09:37:02.660
> 
> 标签：android, custom-component, seekbar

我在 CustomDialog 中有一个简单的视图：

```
public class ColorPickerDialog extends Dialog 
{
    private static class ColorPickerView extends View
    {
        ColorPickerView(Context c, int color) 
        {
             super(c);
             //...
        }
        @Override 
        protected void onDraw(Canvas canvas) {
            //...
        }

        @Override
        protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
            setMeasuredDimension(CENTER_X*2, CENTER_Y*2);
        }
    }

    public ColorPickerDialog(Context context,
                             int initialColor) {
        super(context);
        mInitialColor = initialColor;
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(new ColorPickerView(getContext(), mInitialColor));
    }
} 
```

如何添加到这个视图 SeekBar？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:13:51.530

您可以为颜色选择器和搜索栏创建一个容器类。

例如，如果您想垂直布局它们：

```
private static class ColorPickerContainer extends LinearLayout {

    private ColorPickerView colorPicker;
    private SeekBar seekBar;

    public ColorPickerContainer(Context context, int initialColor) {
        super(context);
        setOrientation(LinearLayout.VERTICAL);

        colorPicker = new ColorPickerView(context, initialColor);
        addView(colorPicker);

        seekBar = new SeekBar(context);
        addView(seekBar);
    }

    public ColorPickerView getColorPicker() {
        return colorPicker;
    }

    public SeekBar getSeekBar() {
        return seekBar;
    }
} 
```

# iphone - 如何在 iOS 6 地图上绘制多条路线

> ID：13509640
> 
> 赞同：0
> 
> 时间：2012-11-22T09:37:04.217
> 
> 标签：iphone, polyline, ios6-maps

> **可能重复：**
> [MKMapView iOS6 上的多个 MKPolyline](https://stackoverflow.com/questions/13580664/multiple-mkpolyline-on-mkmapview-ios6)

我有两个包含纬度和经度的 csv 文件。我想在 iOS 6 地图上绘制两条折线或路线。我怎样才能做到这一点？？

我试过下面的代码来绘制单条折线。

```
NSString* filePath = [[NSBundle mainBundle] pathForResource:@"route" ofType:@"csv"];
NSString* fileContents = [NSString stringWithContentsOfFile:filePath];
NSArray* pointStrings = [fileContents componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

NSMutableArray* points = [[NSMutableArray alloc] initWithCapacity:pointStrings.count];

for(int idx = 0; idx < pointStrings.count; idx++)
{
    // break the string down even further to latitude and longitude fields.
    NSString* currentPointString = [pointStrings objectAtIndex:idx];
    NSArray* latLonArr = [currentPointString componentsSeparatedByCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@","]];

    CLLocationDegrees latitude  = [[latLonArr objectAtIndex:0] doubleValue];
    CLLocationDegrees longitude = [[latLonArr objectAtIndex:1] doubleValue];

    CLLocation* currentLocation = [[CLLocation alloc] initWithLatitude:latitude longitude:longitude];
    [points addObject:currentLocation];
}

// create our route layer view, and initialize it with the map on which it will be rendered.
_routeView = [[CSMapRouteLayerView alloc] initWithRoute:points mapView:mapView]; 
```

但这段代码的问题是我无法滚动地图，双击放大也不起作用（基本上地图冻结）。虽然它在 Xcode 4.3（使用谷歌地图）中运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:23:09.267

不要使用 CSMapRouteLayerView，而是使用 mapview 本身。您可以在 mapView 上轻松绘制自定义路径。

请参阅 MKMapKit 参考：http: [//developer.apple.com/library/ios/#documentation/MapKit/Reference/MapKit_Framework_Reference/_index.html](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MapKit_Framework_Reference/_index.html)

**使用以下类创建叠加层：**
`MKOverlayPathView`或
`MKPolylineView`和`MKPolyline`用于线条。
（如果你想要`MKPolygonView`和 `MKPolygon 多边形。）

要将这些类与 mapView 一起使用，请使用以下方法/委托：

**MKMapView : 向地图添加叠加层**
`– addOverlay:`

**MKMapViewDelegate：管理叠加视图**
`– mapView:viewForOverlay:`
`– mapView:didAddOverlayViews:`

# javascript - 三.js 模型位置问题

> ID：13509648
> 
> 赞同：2
> 
> 时间：2012-11-22T09:37:28.963
> 
> 标签：javascript, webgl, three.js

我正在尝试以下代码：

```
var loader = new THREE.JSONLoader();
var onGeometry = function(geom) {
var tooth = new THREE.Mesh( geom, new THREE.MeshFaceMaterial());
tooth.position.set(xpos,ypos,0);
teeth.push(tooth);
scene.add(tooth);
xpos+=10;
};
loader.load('js/JsonModels/teeth1.js', onGeometry);
loader.load('js/JsonModels/tooth2.js', onGeometry);
loader.load('js/JsonModels/teeth1.js', onGeometry);
loader.load('js/JsonModels/tooth2.js', onGeometry);
loader.load('js/JsonModels/teeth1.js', onGeometry);
loader.load('js/JsonModels/tooth2.js', onGeometry); 
```

模型不会按照我加载它们的顺序出现在屏幕上，这在我的情况下是必要的，因为我根据加载它们的顺序定位对象。当我使用 OBJLoader 并使用它的回调将对象添加到场景中并将它们存储在数组中时，问题也是如此。那么，我该如何实现这一点，如何在我可以指定的屏幕位置上显示多个对象。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:53:33.433

创建一个回调工厂，您可以为其传递所需的位置并将其保存在闭包中：

```
function getGeomHandler(posx) {
  return function(geom) {
    var tooth = new THREE.Mesh(geom, new THREE.MeshFaceMaterial());
    tooth.position.set(posx, posy, 0);
    teeth.push(tooth);
    scene.add(tooth);
  };
}
var posx = 123;
var loader = new THREE.JSONLoader();
loader.load('js/JsonModels/teeth1.js', getGeomHandler(posx)); posx += 10;
loader.load('js/JsonModels/tooth2.js', getGeomHandler(posx)); posx += 10;
loader.load('js/JsonModels/teeth1.js', getGeomHandler(posx)); posx += 10;
loader.load('js/JsonModels/tooth2.js', getGeomHandler(posx)); posx += 10;
loader.load('js/JsonModels/teeth1.js', getGeomHandler(posx)); posx += 10;
loader.load('js/JsonModels/tooth2.js', getGeomHandler(posx)); posx += 10; 
```

# php - 直接从 iPad 上传到网站时，Ipad 照片没有旋转，但从计算机上传时可以

> ID：13509650
> 
> 赞同：4
> 
> 时间：2012-11-22T09:37:30.530
> 
> 标签：php, ipad, orientation, exif

我正在开发一个 PHP 网站，当我上传从 ipad 以纵向模式拍摄的照片时，它会以横向显示在网站上，但是当我从计算机上传相同的照片时（照片没有更改）它在横向模式下正确显示。所有风景照片都以横向显示就好了。

我试图找到解决此问题的方法，并阅读了有关从 EXIF 数据中获取方向的信息，但无论照片是在横向还是肖像。

我试图从 ipad 将肖像照片上传到 flickr，并且它在肖像模式下正确显示，所以我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T09:00:24.563

取自[http://www.php.net/manual/en/function.exif-read-data.php#110894](http://www.php.net/manual/en/function.exif-read-data.php#110894) 来源：chadsmith729 at gmail dot com。

我自己没有测试过这个解决方案..

```
<?php
$image = imagecreatefromstring(file_get_contents($_FILES['image_upload']['tmp_name']));
$exif = exif_read_data($_FILES['image_upload']['tmp_name']);
if(!empty($exif['Orientation'])) {
    switch($exif['Orientation']) {
        case 8:
            $image = imagerotate($image,90,0);
            break;
        case 3:
            $image = imagerotate($image,180,0);
            break;
        case 6:
            $image = imagerotate($image,-90,0);
            break;
    }
}
// $image now contains a resource with the image oriented correctly
?> 
```

这应该适用于所有 Apple 产品（iPod、iPhone 和 iPad）

# java - 多个运动事件发生故障并混淆

> ID：13509654
> 
> 赞同：0
> 
> 时间：2012-11-22T09:37:39.673
> 
> 标签：java, android, oop, touch, motion

我的代码中有 3 个单独的运动事件，2 个用于在屏幕上动态放置的对象，1 个用于我的水平/垂直滚动条。

对象被放置在滚动条中，每当我尝试使用滚动条滚动时，它都会出现故障（首先返回到 x,y 0,0 位置？）然后移动。

当我删除我的一个对象（一个动态创建的充满单独对象的网格）的运动事件时，故障就消失了。

这让我相信运动事件正在变得混乱。因为网格项附加了运动事件，这可能使滚动运动事件在“看到”自己的运动事件数据之前相信 x,y = 0,0？

将动作事件更改为单击事件没有帮助..

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:12:54.467

我已经解决了这个问题！

滚动条运动事件是后来添加到代码中的，然后是其他两个运动事件，我所要做的就是将滚动条运动事件移到其他运动事件之上。是的，就是这样。

# c# - SQL Server 超时已过期？

> ID：13509656
> 
> 赞同：0
> 
> 时间：2012-11-22T09:37:42.023
> 
> 标签：c#, sql-server, iis

我运行的服务器 24/7 都处于活动状态，并且在极少数情况下（过去一个月仅发生一次或两次）我的 Web 服务器将无法连接到我的 SQL Server 数据库（托管在同一台服务器上）。服务器负载不重，似乎没有发生其他错误。

现在，我知道你在想什么；这可能是由以下三件事之一引起的：

1.  OP 没有使用`using`他的 SQLConnection 上的语句。
2.  OP 不知道[ConnectionTimeout](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectiontimeout.aspx)或[CommandTimeout](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx)。
3.  OP 使用了一些奇怪的连接字符串，或者格式不正确。

嗯，这三个都不是。而且由于我使用的是 VS2008 而不是 VS2003，因此[在运行 Visual Studio .NET 2003 应用程序时也可能不会收到“超时已过期”错误消息](http://support.microsoft.com/default.aspx?scid=kb;en-us;830118)。

如果您有一个不是`1` `2`或的建议`3`，请发布。我今天不能发布代码示例（不是在开发计算机上），但如果您真的需要查看（大约）7 行 C#，我也许可以找到我的 MSDN SQL Server 支持论坛帖子。但是，如果您要索取代码，则可能会假定它是`1` `2`或`3`尽管...

# powershell - 如何在 powershell 的注册表项上使用 getauditrules() 获取 acl 对象中的审计规则？

> ID：13509667
> 
> 赞同：1
> 
> 时间：2012-11-22T09:38:05.043
> 
> 标签：powershell, acl, audit

我正在尝试使用此代码应用审核规则

```
function add-acl($Right,$Access)
{
$audit = "mydomain\myaccount","$Right","containerinherit","none","$Access"
$r = new-object system.security.accesscontrol.registryauditrule $audit
$acl.addauditrule($r)
}

$acl = get-acl hklm:\software\_test
add-acl "CreateSubKey" "Success"
add-acl "Delete" "Success"  
add-acl "Delete" "Failure"  
$acl | set-acl 
```

但是这段代码编写审计规则时没有考虑到之前的规则。所以我想在应用代码之前检索审计规则。为此，我使用了 getauditrules() 方法：

```
$acl.getauditrules($true,$true,??) 
```

在 ？？位置，我尝试了 NTaccount 对象和 windowsSecurity。它不返回错误，实际上根本不返回任何东西。这真的很令人失望，因为在使用 Windows 界面时，我可以看到应用了审核规则。我不明白什么类型的对象期望 getauditrules() 方法。有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T10:06:07.790

尝试将参数添加`-audit`到`get-acl`cmdlet（此检索 `SACL`，`System Access Control List`）。

```
$acl = get-acl hklm:\software\_test -audit 
```

你可以使用：

```
$acl.getauditrules($true,$true, [System.Security.Principal.NTAccount] ) 
```

或者

```
$acl.getauditrules($true,$true, [System.Security.Principal.SecurityIdentifier] ) 
```

根据你的目标。

# javascript - 找出变量是否在数组中？

> ID：13509669
> 
> 赞同：21
> 
> 时间：2012-11-22T09:38:13.640
> 
> 标签：javascript, arrays

我有一个变量：

```
var code = "de"; 
```

我有一个数组：

```
var countryList = ["de","fr","it","es"]; 
```

有人可以帮助我，因为我需要检查变量是否在 countryList 数组中 - 我的尝试在这里：

```
 if (code instanceof countryList) {
        alert('value is Array!');
    } 

    else {
        alert('Not an array');
    } 
```

但是运行时我在 console.log 中收到以下错误：

> 类型错误：无效的“instanceof”操作数国家列表

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-22T09:39:38.103

您需要使用`Array.indexOf`：

```
if (countryList.indexOf(code) >= 0) {
   // do stuff here
} 
```

请注意它在 IE8 和之前的版本中不受支持（可能还有其他旧版浏览器）。[在此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)了解更多信息。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-22T09:44:29.097

jQuery 有一个实用函数来查找一个元素是否存在于数组中

```
$.inArray(value, array) 
```

它返回值的索引，`array`如果`-1`值不存在于数组中。所以你的代码可以是这样的

```
if( $.inArray(code, countryList) != -1){
     alert('value is Array!');
} else {
    alert('Not an array');
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-22T09:39:47.420

您似乎正在寻找[Array.indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)函数。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-22T09:46:51.137

`instanceof`用于检查对象是否属于某种类型（这是一个完全不同的主题）。因此，您应该在数组中查找，而不是您编写的代码。您可以像这样检查每个元素：

```
var found = false;
for( var i = 0; i < countryList.length; i++ ) {
  if ( countryList[i] === code ) {
    found = true;
    break;
  }
}

if ( found ) {
  //the country code is not in the array
  ...
} else {
  //the country code exists in the array
  ...
} 
```

或者您可以使用更简单的`indexOf()`函数使用方法。每个数组都有一个`indexOf()`函数循环一个元素并返回它在数组中的索引。如果找不到元素，则返回-1。因此，您检查 的输出`indexOf()`以查看它是否在数组中找到与您的字符串匹配的任何内容：

```
if (countryList.indexOf(code) === -1) {
  //the country code is not in the array
  ...
} else {
  //the country code exists in the array
  ...
} 
```

我会使用第二种算法，因为它更简单。但是第一个算法也很好，因为它更具可读性。两者的收入相同，但第二个性能更好，时间更短。但是，旧浏览器（IE<9）不支持它。

如果您使用的是 JQuery 库，则可以使用`inArray()`适用于所有浏览器的功能。`indexOf()`如果它没有找到您要查找的元素，则它与返回 -1相同。所以你可以像这样使用它：

```
if ( $.inArray( code, countryList ) === -1) {
  //the country code is not in the array
  ...
} else {
  //the country code exists in the array
  ...
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-22T09:40:19.800

在 jquery 中，您可以使用

[**jQuery.inArray()**](http://api.jquery.com/jQuery.inArray/) - 在数组中搜索指定值并返回其索引（如果未找到则返回 -1）。

```
if ($.inArray('de', countryList ) !== -1) 
{
} 
```

对于 javascript 解决方案检查现有 [如何检查数组是否包含 JavaScript 中的对象？](https://stackoverflow.com/questions/237104/array-containsobj-in-javascript)

```
Array.prototype.contains = function(k) {
    for(p in this)
        if(this[p] === k)
            return true;
    return false;
}
for example:

var list = ["one","two"];

list.contains("one") // returns true 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-22T09:47:21.700

对于纯 JavaScript 解决方案，您可以只遍历数组。

```
function contains( r, val ) {
    var i = 0, len = r.length;

    for(; i < len; i++ ) {
        if( r[i] === val ) {
            return i;
        }
     }
     return -1;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-22T09:41:19.270

使用**jQuery**

您可以使用[$.inArray()](http://api.jquery.com/jQuery.inArray/)

```
$.inArray(value, array) 
```

如果未找到，则返回项目索引或 -1

# android - 从 AttributeSet 中获取 Hint 属性值

> ID：13509671
> 
> 赞同：3
> 
> 时间：2012-11-22T09:38:25.020
> 
> 标签：android, view, attributes, android-edittext

我已经覆盖了**[此链接](http://arunbadole1209.wordpress.com/2011/12/16/how-to-create-edittext-with-crossx-button-at-end-of-it/)**中给出的 EditText 。

现在在我正在使用的布局中声明这个字段时

```
<com.and.ab1209.ClearableEditText
android:id=”@+id/edit_text_clearable”
android:layout_width=”fill_parent”
android:hint="My Hint Goes here"
android:layout_height=”wrap_content” /> 
```

我如何在任何这些构造函数中检索此提示值。

```
 public ClearableEditText(Context context, AttributeSet attrs, int defStyle){...}
 public ClearableEditText(Context context, AttributeSet attrs){...} 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-06T16:21:29.090

您可以通过在视图构造函数中执行以下操作来访问标准 xml 属性：

```
final String xmlns="http://schemas.android.com/apk/res/android";
//If you had a background attribute this is the resource id
int backgroundResource = attrs.getAttributeResourceValue(xmlns, "background", -1);
//This is your views hint
String hint = attrs.getAttributeValue(xmlns, "hint"); 
```

您的视图是否继承自 TextView 无关紧要，如果您指定使用`android:hint`它的提示，则可以在您的自定义视图中访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:04:10.157

您无法访问“android”属性。您可以`getHint()`在调用`super()`构造函数后使用。如果您想创建自己的属性，请遵循[本教程](http://blog.infidian.com/2008/05/02/android-tutorial-42-passing-custom-variables-via-xml-resource-files/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T10:05:32.747

`this.getHint()`在构造函数中使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-13T16:34:25.943

您可以通过在您的属性集中定义它来使用 android-namespaced 属性。例如：

**attrs_custom_input_field.xml**

```
<resources>
    <declare-styleable name="CustomInputField">
        <attr name="android:hint" format="string" />
        <attr name="android:text" format="string" />
    </declare-styleable>
</resources> 
```

**自定义输入字段.kt**

```
class CustomInputField : ConstraintLayout {
    // ....

    // init called from all constructors
    private fun init(attrs: AttributeSet?, defStyle: Int) {
        val a = context.obtainStyledAttributes(
                attrs, R.styleable.CustomInputField, defStyle, 0)

        val hint = a.getString(R.styleable.CustomInputField_android_hint)
        val text = a.getString(R.styleable.CustomInputField_android_text)

        a.recycle()

        // use hint and text as you want
    }
} 
```

您应该只定义现有属性，否则，您将在编辑器中收到错误

# java - Hibernate从子实体获取父ID

> ID：13509675
> 
> 赞同：2
> 
> 时间：2012-11-22T09:38:43.483
> 
> 标签：java, hibernate, jpa-2.0, spring-data-jpa

很多人都发布了非常相似的问题，但我似乎无法找到一个解决我的情况的问题。

我有一个父实体`Dnar`和一个子实体`WorkLocationSuburb`。A`Dnar`有一对多`WorkLocationSuburbs`。

通常，我会这样定义这种关系：

**孩子**

```
@Entity
@Table(name = "req_work_suburb", schema = SCHEMA)
public class WorkLocationSuburb {

  @Id
  @GeneratedValue(generator = "req_work_suburb_seq")
  @GenericGenerator(strategy="sequence", name="req_work_suburb_seq", parameters={@Parameter(name="sequence", value=SCHEMA+".req_work_suburb_seq")})
  @Column(name = "id", nullable = false)
  private Long id;

  @Column(name="suburb", length=255, nullable=false)
  private String suburb;

  //remainder omitted
} 
```

**父母**

```
@Entity
@Table(name = "req_dnar", schema = SCHEMA)
@Inheritance(strategy = JOINED)
@DiscriminatorColumn(name = "form_type", discriminatorType = STRING, length = 64)
public abstract class Dnar {

  @Id
  @GeneratedValue(generator = "req_dnar_seq")
  @GenericGenerator(strategy = "sequence", name = "req_dnar_seq", parameters = { @Parameter(name = "sequence", value = SCHEMA + ".req_dnar_seq") })
  @Column(name = C_DNAR_ID, nullable = false)
  private Long dnarId;

  @Column(name = "original_id")
  private Long originalId;

  @OneToMany(cascade = ALL, fetch = EAGER, orphanRemoval=true)
  @JoinColumn(name = "dnar_id", nullable=false)
  private Set<WorkLocationSuburb> workLocationSuburbs;

  //remainder omitted
} 
```

上面的示例有效，当我手动查询`req_work_suburb`表时，我可以看到它有一个`dnar_id`列并且该列被正确填充。一切顺利，到目前为止！

在一些查询代码中，我创建了一个依赖于值的条件查询`req_work_suburb.dnar_id`：

```
 private static Specification<SubmittedDnarSummary> suburbIs(final String suburb) {
    return new Specification<SubmittedDnarSummary>(){
      @Override
      public Predicate toPredicate(Root<SubmittedDnarSummary> root, CriteriaQuery<?> query, CriteriaBuilder cb) {
        Subquery<Long> subquery = query.subquery(Long.class);
        Root<WorkLocationSuburb> suburbRoot = subquery.from(WorkLocationSuburb.class);
        return cb.in(root.get("dnarId")).value(subquery.select(suburbRoot.<Long>get("dnarId")).where(cb.equal(suburbRoot.get("suburb"), suburb)));
      }
    };
  } 
```

当我执行上述操作时，出现以下异常：

```
org.springframework.dao.InvalidDataAccessApiUsageException: Unable to resolve attribute [dnarId] against path; nested exception is java.lang.IllegalArgumentException: Unable to resolve attribute [dnarId] against path
         at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:301)
         at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:106)
         at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:403)
         at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:58)
         at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:213)
         at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:163)
         at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
         at org.springframework.data.jpa.repository.support.LockModeRepositoryPostProcessor$LockModePopulatingMethodIntercceptor.invoke(LockModeRepositoryPostProcessor.java:91)
         at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
         at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)
         at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
         at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
         at $Proxy253.findAll(Unknown Source)
         at au.com.wpcorp.sys.dnar.spring.manager.impl.SearchManagerImpl.search(SearchManagerImpl.java:66)
         at au.com.wpcorp.sys.dnar.spring.mvc.controller.search.DnarSearchController.results(DnarSearchController.java:97)
         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
         at java.lang.reflect.Method.invoke(Method.java:597)
         at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
         at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
         at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
         at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
         at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
         at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
         at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
         at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
         at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
         at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
         at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
         at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
         at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
         at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
         at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
         at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
         at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
         at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
         at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
         at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
         at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
         at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
         at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
         at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
         at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
         at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
         at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
         at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
         at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
         at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
         at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
         at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
         at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
         at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
         at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
         at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.IllegalArgumentException: Unable to resolve attribute [dnarId] against path
         at org.hibernate.ejb.criteria.path.AbstractPathImpl.unknownAttribute(AbstractPathImpl.java:118)
         at org.hibernate.ejb.criteria.path.AbstractPathImpl.locateAttribute(AbstractPathImpl.java:223)
         at org.hibernate.ejb.criteria.path.AbstractPathImpl.get(AbstractPathImpl.java:194)
         at au.com.wpcorp.sys.dnar.spring.manager.impl.SearchManagerImpl$3.toPredicate(SearchManagerImpl.java:141)
         at org.springframework.data.jpa.repository.support.SimpleJpaRepository.applySpecificationToCriteria(SimpleJpaRepository.java:480)
         at org.springframework.data.jpa.repository.support.SimpleJpaRepository.getQuery(SimpleJpaRepository.java:436)
         at org.springframework.data.jpa.repository.support.SimpleJpaRepository.getQuery(SimpleJpaRepository.java:421)
         at org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll(SimpleJpaRepository.java:303)
         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
         at java.lang.reflect.Method.invoke(Method.java:597)
         at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.executeMethodOn(RepositoryFactorySupport.java:334)
         at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.invoke(RepositoryFactorySupport.java:319)
         at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
         at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
         at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
         at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155)
         ... 49 more 
```

它似乎失败了，因为 Hibernate 找不到名为`dnarId`on的属性`WorkLocationSuburb`。我的问题是，如何在`WorkLocationSuburb`没有 Hibernate 抱怨其他问题的情况下添加这些信息？看来我需要一些代码，例如：

```
@Entity
@Table(name = "req_work_suburb", schema = SCHEMA)
public class WorkLocationSuburb {

  @Id
  @GeneratedValue(generator = "req_work_suburb_seq")
  @GenericGenerator(strategy="sequence", name="req_work_suburb_seq", parameters={@Parameter(name="sequence", value=SCHEMA+".req_work_suburb_seq")})
  @Column(name = "id", nullable = false)
  private Long id;

  @Column(name="suburb", length=255, nullable=false)
  private String suburb;

  @Column(name="dnar_id", nullable=false)  // column definition added here
  private Long dnarId;

  //remainder omitted
} 
```

有谁知道我怎样才能使上述附加列起作用？此列**必须**自动填充父级的`dnarId`.

谢谢，穆尔。

* * *

**更新了 JB Nizet 的建议**

我的代码现在是这样的：

**孩子**

```
@Entity
@Table(name = "req_work_suburb", schema = SCHEMA)
public class WorkLocationSuburb {

  @Id
  @GeneratedValue(generator = "req_work_suburb_seq")
  @GenericGenerator(strategy="sequence", name="req_work_suburb_seq", parameters={@Parameter(name="sequence", value=SCHEMA+".req_work_suburb_seq")})
  @Column(name = "id", nullable = false)
  private Long id;

  @Column(name="suburb", length=255, nullable=false)
  private String suburb;

  @ManyToOne
  @JoinColumn(name="dnar_id", nullable=false)
  private Dnar dnar;

  //remainder omitted
} 
```

**父母**

```
@Entity
@Table(name = "req_dnar", schema = SCHEMA)
@Inheritance(strategy = JOINED)
@DiscriminatorColumn(name = "form_type", discriminatorType = STRING, length = 64)
public abstract class Dnar {

  @Id
  @GeneratedValue(generator = "req_dnar_seq")
  @GenericGenerator(strategy = "sequence", name = "req_dnar_seq", parameters = { @Parameter(name = "sequence", value = SCHEMA + ".req_dnar_seq") })
  @Column(name = C_DNAR_ID, nullable = false)
  private Long dnarId;

  @Column(name = "original_id")
  private Long originalId;

  @OneToMany(cascade = ALL, fetch = EAGER, orphanRemoval=true, mappedBy="dnar")
  private Set<WorkLocationSuburb> workLocationSuburbs = new LinkedHashSet<WorkLocationSuburb>();

  @PostPersist
  void setChildRefs() {
    for (WorkLocationSuburb suburb : workLocationSuburbs) {
      suburb.setDnar(this);
    }
  }

  //remainder omitted
} 
```

当我尝试保存带有`Dnar`附件的`WorkLocationSuburb`文件时，我看到以下事件顺序：

1.  被`Dnar`插入到数据库中
2.  `@PostConstuct`被调用并`WorkLocationSuburb`获得对 parent 的引用`Dnar`。父母`Dnar`已正确分配了一个 ID。
3.  尝试插入子`WorkLocationSuburb`项，但导致以下异常：org.hibernate.exception.ConstraintViolationException: ORA-01400: cannot insert NULL into ("DNAR"."REQ_WORK_SUBURB"."DNAR_ID")`

我还在做什么不正确？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:48:54.790

您只需要使关联是双向的：

```
public class WorkLocationSuburb {
    @ManyToOne
    @JoinColumn
    private Dnar parentDnar;
    // ...
}

public class Dnar {
    @OneToMany(mappedBy = "parentDnar", ...)
    private Set<WorkLocationSuburb> suburbs;
    // ...
} 
```

请注意，在双向 OneToMany 关联中，关联的拥有方始终是多方（没有`mappedBy`属性的一方）。这意味着 Hibernate 将只考虑该`WorkLocationSuburb.parentDnar`字段来决定关联是否存在。因此，这意味着每次将郊区添加到 dnar 时，还必须设置郊区的 dnar 字段：

```
public void addSuburb(WorkLocationSuburb suburb) {
    this.suburbs.add(suburb);
    suburb.setParentDnar(this);
} 
```

同样，如果从 dnar 中删除郊区，则应将郊区的 parentDnar 设置为 null。

关于查询，您现在可以在`parentDnar`查询中使用该字段。请记住，JPA 查询始终对实体及其持久字段/属性起作用。永远不要在桌子和他们的列上。

# jquery - 另一个jquery scrollLeft中的元素

> ID：13509676
> 
> 赞同：0
> 
> 时间：2012-11-22T09:38:44.157
> 
> 标签：jquery

例如，我有以下代码

```
<div style="width: 100px; overflow: auto;" class="slide-container">
 long content here
</div>

$(".slide-container").scroll(function (e) {
 var scrollLeftValue = $(this).scrollLeft(); /* want get scroll left count */
}); 
```

当我向左滚动内容时，scrollLeftValue 始终为 0。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:07:55.387

`.scrollLeft(value)`获取匹配元素集中第一个元素的滚动条的当前水平位置。

默认情况下，当前值是`0`水平滚动位置。

考虑一下：http: [//jsbin.com/oqopes/1/edit](http://jsbin.com/oqopes/1/edit)

```
$("div.demo").scrollLeft(300);
       //-----------------^--------------this will scroll at 300px horizontal

 $("div.demo").scrollLeft();
       //-----------------^--------------none specified then scroll at 0 horiz 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:48:00.497

我认为你必须设置 white-space: nowrap 样式....像这样

```
<div style="width: 100px; overflow: auto; white-space:nowrap;" class="slide-container">
 long content here
</div> 
```

# sql - SQL - 字段分组和临时数据重组

> ID：13509678
> 
> 赞同：1
> 
> 时间：2012-11-22T09:38:50.987
> 
> 标签：sql, vb.net

我想先就我的标题道歉，因为我知道它在技术上可能不正确

我目前有一个包含多个表的数据库，其中 4 个与此示例相关。

```
FORMS
FIELDS
ENTRIES
VALUES 
```

以下是表格的简化版本

```
Create table Form_Master
(
form_id int identity primary key ,
form_name varchar(255) ,
form_description varchar(255),
form_create_date date ,
)

Create table Field_Master
(field_id int identity primary key,
form_ID int foreign key references Form_Master(form_id),
field_name varchar(255),
type_ID int
)

Create table Entry_Master
(
entry_id int identity primary key,
entry_date date,
form_id int foreign key references Form_Master(form_id),
)

Create table Value_Master
(
value_id int identity primary key,
value varchar(255),
field_id int foreign key references Field_Master(field_id),
entry_id int foreign key references Entry_Master(entry_id),
) 
```

这些表的目的是创建一种动态的方法来捕获和检索信息 - 表单是表，字段是列，条目是行，值是单元格

目前，当我从表单中检索信息时，我创建了一个临时表，其中包含 field_master 中的列，然后选择链接到表单的所有条目以及链接到这些条目的值，并将它们插入到我拥有的临时表中刚刚创建。

临时表的原因是将数据重组为有组织的格式并以`DataGridView`.

我的问题是性能之一，由于表单超过字段> 20或链接到表单的条目超过> 100，创建上述表格变得越来越慢

我的问题是：

有没有办法直接从field_master中选择上面提到的临时表格式的数据？

你认为我应该重新考虑我的数据库设计吗？

有没有更简单的方法来做我想做的事情？

任何输入将不胜感激，我确实知道如何使用 Google，但是在这种情况下，我不确定要寻找什么，所以即使是关键字也会很好。

# c# - 插入后如何处理实体框架记录对象？

> ID：13509688
> 
> 赞同：2
> 
> 时间：2012-11-22T09:39:22.250
> 
> 标签：c#, .net, entity-framework, garbage-collection, idisposable

我将大量记录插入到实体框架数据库中，运行后不再需要它们`.SaveChanges();`。此外，我实际上希望尽快释放内存（以创建新记录）。我没有保留任何链接到旧记录对象的变量，但 GC 似乎没有删除它们，所以，我认为是数据上下文或其他东西使它们保持活力。如何正确处理它们以让 GC 释放它们占用的内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:42:10.723

1.  这真的不是问题。让 GC 完成它的工作。

2.  *我认为，是数据上下文或其他东西让它们保持活力。*

正确的。基本的解决方案是尽可能快地处理上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:44:04.900

您是否尝试过在“使用”语句中创建上下文？

```
using(var context = new MyContext())
{
    // Do work here .....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:44:12.163

[`SaveChanges()`](http://msdn.microsoft.com/en-us/library/bb336792.aspx)不释放资源，它只是将更改提交到数据库。

要释放资源，您需要调用[`Dispose()`](http://msdn.microsoft.com/en-us/library/bb738763.aspx)对象上下文的方法。可以通过[调用`.Dispose()`](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)方法或将代码放入[`using`语句](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)中显式完成：

```
using(var ctx = new EntityModel())
{
    // do the inserts
    ctx.SaveChanges();
} 
```

此外，[如果连接是由 Entity Framework 打开的](http://msdn.microsoft.com/en-us/library/bb896325.aspx)[`ObjectContext.Dispose()`](http://msdn.microsoft.com/en-us/library/bb738763.aspx)，则方法会关闭连接，否则您可能会用完连接......

这是一个类似的问题：[是否应将实体框架上下文放入 Using 语句中？](https://stackoverflow.com/questions/824330/should-entity-framework-context-be-put-into-using-statement)

# javascript - JS：实现自定义“您确定要离开此页面”模式对话框

> ID：13509690
> 
> 赞同：4
> 
> 时间：2012-11-22T09:39:25.243
> 
> 标签：javascript, html, modal-dialog

我知道这可能之前已经讨论过，但我想知道 Facebook 是如何成功实现此功能的 - 在[https://www.facebook.com/messages/new](https://www.facebook.com/messages/new)中：撰写消息然后尝试按下“返回”按钮时在浏览器中，我得到了 facebook 自己的自定义对话框，它验证我真的想离开页面。

我知道我可以使用`beforeunload`事件来调出本机对话框，但是如何创建自己的自定义对话框，例如 Facebook 的。

我认为一种方法可能是使用 jQuery 并在整个链接集上运行一个事件。

但它如何适用于其他一切（例如浏览器中的“后退”按钮）。

我认为这可能与 pushState 控制有关，或者 facebook 可能使用了一些客户端框架，当按下“返回”时，我实际上并没有卸载窗口。

无论如何，很乐意获得有关此问题的一些信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-21T23:41:56.543

它只是 HTML、CSS 和 JS。在撰写消息的情况下，实际上只是一个表单，设置您的`beforeunload`事件并检查是否已填写任何表单字段。如果是，请显示您的自定义 html。也许这可以帮助您入门：http: [//jsbin.com/ronuyo/1/](http://jsbin.com/ronuyo/1/)

# jquery - 关于焦点问题的jQuery CSS不透明度

> ID：13509697
> 
> 赞同：2
> 
> 时间：2012-11-22T09:39:47.477
> 
> 标签：jquery, html, css, focus, opacity

我有一个包含导航项的 div 以及一个文本输入（将用作搜索栏）。当用户将鼠标悬停在导航 div 上时，不透明度使用 CSS 从 0.6 变为 1，然后在用户将鼠标移开时再次返回。

如果无论用户是否将鼠标悬停在导航栏上，搜索输入都处于焦点位置，我想使用 CSS 或 jQuery 将不透明度保持为 1。我尝试使用一个简单的 if 函数（我对 jQuery 的了解不是很好）：

```
if ($("#navsearchbox").is(":focus")){
  $("#navbar").css('opacity', '1');
} 
```

这可能在第一次关注搜索输入时附加它的意义上起作用，但我想一旦用户将鼠标从导航 div 移开，CSS 可能会覆盖它？

有什么建议么？

编辑：通过使用 jQuery 来控制导航栏 div 的悬停不透明度，我几乎已经完成了这项工作，但是如何设置一个 jQuery 函数来检测导航栏搜索输入是否不在焦点上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T09:42:38.813

有一个 CSS 选择器`:focus`可以用来代替 jQuery：

```
#navsearchbox:focus #navbar
{
    opacity: 1;
} 
```

这消除了对任何 javascript 的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T09:41:36.820

你很接近，但试试这个：

```
$("#navsearchbox").focus(function(event){
  $("#navbar").css('opacity', '1');
}).blur(function(event){
  $("#navbar").css('opacity', '0.5');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:46:39.710

您还可以使用fadeTo() jquery 函数吗？

HTML

```
<input type="text" id="myField" value="Here is some">​ 
```

CSS

```
#myField {
    opacity:0.5;
}​ 
```

jQuery

```
$("#myField").focus(function(event){
    $(this).fadeTo('slow', 1);
}).blur(function(event){
    $(this).fadeTo('slow', 0.5);
});​ 
```

[工作jsfiddle](http://jsfiddle.net/4YMK7/)

更多信息在这里：[jQuery fadeTo()](http://api.jquery.com/fadeTo/)

# cordova - jquery移动对话框中的onload函数不起作用

> ID：13509701
> 
> 赞同：1
> 
> 时间：2012-11-22T09:40:10.160
> 
> 标签：cordova, jquery-mobile

嗨，我在 jquery mobile 工作。在其中我使用触发另一个 html 页面的对话框

```
$.mobile.changePage('mypopup.html',{transition:'pop',role : 'dialog', data: {'selQty':'5'}}); 
```

并且成功加载了对话框。

我的问题是我在 mypopup.html 的 body 标记中使用 onload 函数

```
<body onload="initialize()"> 
```

这是行不通的。我的代码中是否有任何问题，或者我需要遵循替代方式。提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T10:17:55.793

尝试添加这样的事件：

```
$('#pageId').bind('pageshow', function(){

}); 
```

pageId 是您的`<div data-role="page" id="pageId">`.

查看此页面了解更多活动：[jQuery Mobile 文档](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)

# c# - .NET MVC - 如何简单地隐藏/显示元素？

> ID：13509707
> 
> 赞同：0
> 
> 时间：2012-11-22T09:40:31.767
> 
> 标签：c#, .net, asp.net-mvc, progressive-enhancement

我可能完全看错了，我通常只用 jQuery 来做这件事，但渐进增强的话题引发了这个问题。

此刻我有：

```
<button data-bind="click: moveNext"><a href="#anchorTwo">Next</a></button>

<section id="anchorTwo">
</section> 
```

moveNext (Knockout.js) 将隐藏/显示此功能。

但是，使用 Progress Enhancement，这是不可能的。所以我想，将它作为一个 ActionLink 并通过它隐藏/显示该部分（我刚刚从 Web 窗体移动）。显然 ActionLink 必须有自己的 View/PartialView - 那么这甚至可以通过 MVC 实现吗？

从字面上看，我想要的只是隐藏/显示元素的代码隐藏。

# curl - 在 libcurl 中执行 SFTP/FTP 命令而不实际传输

> ID：13509709
> 
> 赞同：3
> 
> 时间：2012-11-22T09:40:33.577
> 
> 标签：curl, ftp, libcurl, sftp

是否可以在没有实际尝试文件传输的情况下在 libcurl 中执行 SFTP 命令。

我使用 CURLOPT_QUOTE 将命令设置为执行（实际上是文件删除），但是在执行操作后（并且成功执行，文件被删除） curl 正在尝试上传或下载文件（基于 CURLOPT_UPLOAD），所以我收到 CURLE_REMOTE_FILE_NOT_FOUND 错误错误代码。

到目前为止我尝试过的 - 不设置 URL 会导致“格式错误的 url 错误”，设置 CURLOPT_CONNECT_ONLY 也会导致引用不执行。有什么标准方法吗？

```
curl_global_init(CURL_GLOBAL_DEFAULT);

char temp[2000];
_snprintf(STRPARAM(temp),"%s://%s:%d/%s","sftp",m_url,m_port,a_ftpPath);
curl_easy_setopt(m_curl, CURLOPT_URL,temp);
_snprintf(STRPARAM(temp),"%s:%s",m_name,m_pass);
curl_easy_setopt(m_curl, CURLOPT_USERPWD, temp);
curl_easy_setopt(m_curl, CURLOPT_SSH_AUTH_TYPES, CURLSSH_AUTH_PASSWORD);

curl_easy_setopt(m_curl, CURLOPT_UPLOAD, 0L);
curl_easy_setopt(m_curl, CURLOPT_READFUNCTION, NULL);
curl_easy_setopt(m_curl, CURLOPT_NOBODY, 1L);
curl_easy_setopt(m_curl, CURLOPT_HEADER, 1L);

struct curl_slist *headerlist=NULL;
_snprintf(STRPARAM(temp),"rm /%s",a_ftpPath);
headerlist = curl_slist_append(headerlist, temp);
curl_easy_setopt(m_curl, CURLOPT_QUOTE, headerlist); 

m_res = curl_easy_perform(m_curl);

curl_easy_setopt(m_curl, CURLOPT_QUOTE, NULL); 
curl_easy_setopt(m_curl, CURLOPT_HEADER, 0L);
curl_easy_setopt(m_curl, CURLOPT_NOBODY, 0L);
curl_slist_free_all (headerlist);

curl_global_cleanup(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T15:25:46.973

[CURLOPT_NOBODY](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTNOBODY)是要求没有“正文”被传输的关键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T06:01:25.407

你可以试试[phpseclib，一个纯 PHP SFTP 实现](http://phpseclib.sourceforge.net/)：

```
<?php
include('Net/SFTP.php');

$sftp = new Net_SFTP('www.domain.tld');
if (!$sftp->login('username', 'password')) {
    exit('Login Failed');
}

$sftp->delete('filename.remote'); // doesn't delete directories
// recursive delete
$sftp->delete('dirname.remote', true); // deletes a directory and all its contents
?> 
```

# selenium - Selenium Webdriver：Webelement 上的 sendkeys 总是重置

> ID：13509711
> 
> 赞同：1
> 
> 时间：2012-11-22T09:40:36.837
> 
> 标签：selenium, selenium-webdriver

我有一个“输入”-WebElement，它有一个“onkeyup”AJAX 调用。（这是一个订单金额字段）

我想检查错误消息，检查输入的金额与 Java 中的 Selenium Webdriver 的实际库存。

但是，我认为由于“onkeyup”，输入字段总是在 Webdriver 的 sendkeys 之后重置回默认值“1”。我尝试了清除和不清除，还尝试在清除后检查该字段是否为空。

尽管有“onkeyup”，知道如何防止字段值重置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:00:18.323

我在这里找到了解决方案：

[https://groups.google.com/forum/?fromgroups=#!topic/webdriver/UiV08YgUxSI](https://groups.google.com/forum/?fromgroups=#!topic/webdriver/UiV08YgUxSI)

对我来说 Keys.BACK_SPACE 成功了

不适用于 WebElement.clear() 并且没有 clear() 或 BACK_SPACE 也无法使用。

# javascript - Python web 客户端运行 javascript 并获取文件下载

> ID：13509718
> 
> 赞同：1
> 
> 时间：2012-11-22T09:41:11.830
> 
> 标签：javascript, python, html

我正在尝试制作一个从网站下载文件的python脚本，但我无法找到解决方案：

```
<form name="dl" id="dl" action="/subtitle/download" method="post">
    <button class="Positive" id="downloadButton" onclick="DownloadSubtitle(this)" type="submit">
        Download English Subtitle
    </button>
    <input name="mac" id="mac" type="hidden" value="QvGN39b5EsEDobZfxpItT7XDYN2b4yBreI8TJIBfpdyi5SFknjIDx-DuLi9J51RZ0">
</form> 
```

供参考：[http ://subscene.com/subtitles/the-big-bang-theory-sixth-season/english/649386](http://subscene.com/subtitles/the-big-bang-theory-sixth-season/english/649386)

我希望能够下载字幕文件。我无法找到如何从此类 javascript 函数中获取结果，我认为如果我从该函数中获取数据，并使用它和 mac 我会得到文件。我错了吗？

*目前使用urllib2打开页面，使用HTMLParser解析并获取结果。

# android - 刷新/更新活动

> ID：13509732
> 
> 赞同：3
> 
> 时间：2012-11-22T09:41:43.990
> 
> 标签：android, android-activity

我需要刷新我的活动。我有一堆问题正在重新评分，这些问题建议我完成当前活动并重新开始当前活动。或者再次为每个小部件提供价值。为避免过渡，我使用了此代码

```
Intent intent = getIntent();
overridePendingTransition(0, 0);
intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
this.finish();

overridePendingTransition(0, 0);
startActivity(intent); 
```

但就我而言，在我的活动中，我有四个选项卡，我需要刷新所有四个选项卡。

关于同样的问题还有一些问题 1）使用上面的代码，如果我在其他屏幕上，当上面的代码运行时我会回到这个屏幕。

2) 活动顺序受到干扰。

3）维护选定的选项卡也将是问题的一部分

即使我尝试单独刷新每个选项卡，我的一个选项卡也有 webview。如何刷新它，因为除非有视图，否则无法调用 webview.loadData()，因为我不在该选项卡上，所以不会有视图。

解决这个问题的理想方法是什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:06:38.243

这在一定程度上取决于您的用例。您可以再次 setContentView() 以每次膨胀布局。如果您只是显示一个列表，那么您可以只调用适配器来显示该列表。您必须对 TabActivity 中的每个片段执行此操作。

要重新加载 WebView，我只需再次调用[loadUrl()](http://developer.android.com/reference/android/webkit/WebView.html#loadUrl%28java.lang.String%29)。

至于记住选定的选项卡，您必须[存储它](https://stackoverflow.com/questions/3583405/get-index-of-selected-tab-in-tabhost)，然后在[TabHost](http://developer.android.com/reference/android/widget/TabHost.html)中设置当前选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:14:37.773

问题并不复杂，但我想要优化的解决方案。最后我采取了第二种方式，即刷新每个组件。这种方法克服了干扰活动顺序的问题。对于网络视图，我仍在使用`webView.loadData(...)`.

总的来说，我已经分别处理了每个选项卡。如果我包含我的整个代码，那么它会变得笨拙，但仍然试图合并尽可能多的重要功能。

在我的活动类中，当我需要刷新我的活动时，我调用了这个方法。

```
private void onRefrash()
{   
    refreshCurrentActivity();

    int selectedTab = getActionBar().getSelectedNavigationIndex();
    switch (selectedTab)
    {
    case TAB1:
        fragment1.update();
        break;
    case TAB2:
        fragment2.update();
        break;
    case TAB3:
        fragment3.update();
        break;
    }       
Toast.makeText(this, getString(R.string.msg_case_updates_received), Toast.LENGTH_LONG).show();  
    }                       
} 
```

每个片段都被较早地初始化，并且为我正在更新相应 Web 视图的每个选项卡调用 update 方法。

# c++ - wchar_t 在一般编程中有什么用？

> ID：13509733
> 
> 赞同：49
> 
> 时间：2012-11-22T09:41:47.927
> 
> 标签：c++

今天我在学习一些 C++ 基础知识并开始了解`wchar_t`. 我无法弄清楚，为什么我们实际上需要这种数据类型，以及如何使用它？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-22T10:00:19.773

`wchar_t`用于以*固定宽度*、*多字节*编码表示文本；因为`wchar_t`通常大小为 2 个字节，所以它可以用来表示任何 2 字节编码的文本。它还可用于以*可变宽度*多字节编码表示文本，其中最常见的是 UTF-16。

在大小为 4 字节的平台上，`wchar_t`它可用于表示使用 UCS-4 (Unicode) 的任何文本，但由于在大多数平台上它只有 2 个字节，它只能以可变宽度编码（通常为 UTF-16）表示 Unicode . `char`与可变宽度编码一起使用更为常见，例如 UTF-8 或 GB 18030。

唯一广泛使用的现代操作系统`wchar_t`是 Windows；这是因为 Windows 在扩展超过 U+FFFF 之前采用了 Unicode，因此固定宽度的 2 字节编码 (UCS-2) 似乎是明智的。现在 UCS-2 不足以表示整个 Unicode，因此 Windows 使用 UTF-16，仍然使用`wchar_t`2 字节代码单元。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-22T09:49:58.030

`wchar_t`是一个宽字符。它用于表示比常规字符需要更多内存来表示它们的字符`char`。例如，它广泛用于 Windows API。

但是， a 的大小`wchar_t`取决于实现，并不保证大于`char`. 如果您需要支持大于 8 位的特定形式的字符格式，您可能需要转向`char32_t`并且`char16_t`分别保证为 32 位和 16 位。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-01-04T06:39:29.627

`wchar_t`当您需要存储代码大于 255 的字符时使用（它的值大于`char`可以存储的值）。

`char`可以取 256 个不同的值，对应于 ISO 拉丁表中的条目。另一方面，宽字符可以接受超过 65536 个与 Unicode 值相对应的值。这是一个最近的国际标准，它允许对几乎所有语言和常用符号的字符进行编码。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-22T10:00:14.430

**wchar_t**数据类型用于显示`wide characters that will occupy 16 bits`. 此数据类型占用“2 或 4”字节。

`wchar_t`当使用像日语这样的国际语言时，通常会使用数据类型。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-10-25T15:54:49.777

我知道他们中的大多数人都回答了这个问题，但是当我也在学习 C++ 基础知识并开始了解`wchar_t`时，我想告诉你我在搜索后了解的内容。

1.  `wchar_t`当您需要存储超过 ASCII 255 的字符时使用，因为这些字符的大小比我们的字符类型 'char' 大。因此，需要更多的内存。

    例如：

    ```
     wchar_t var = L"Привет мир\n"; // hello world in russian 
    ```

2.  它通常具有大于 8 位字符的大小。

3.  Windows 操作系统大量使用它。

4.  它通常在涉及外语时使用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-22T09:55:47.493

wchar_t 类型用于扩展字符集的字符。它是与 wstring 一起使用的其他用途之一，它是一个可以包含扩展字符集的单个字符的字符串，而不是可以包含大小为 char 的单个字符的字符串，或者使用多个字符来表示单个符号（如 utf8 ）。

wchar_t 大小取决于语言环境，按照标准，它可以表示语言环境支持的最大扩展字符集的所有成员。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-24T21:02:00.500

`wchar_t`[在[basic.fundamental]/p5](http://basic.fundamental#5)中的 C++ 语言中指定为：

> Type是一种独特的类型，其值可以表示支持的语言环境 ( [[locale]](https://timsong-cpp.github.io/cppwp/n3337/locale) ) 中`wchar_t`指定的最大扩展字符集的所有成员的不同代码。

换句话说，`wchar_t`它是一种数据类型，它可以处理包含来自*任何*语言的字符的文本，而无需担心字符编码。

[在基本多语言平面](https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane)之上支持 Unicode 的平台上，`wchar_t`通常是 4 个字节（Linux、BSD、macOS）。

`wchar_t`由于[历史原因](https://en.wikipedia.org/wiki/Unicode_in_Microsoft_Windows)，仅在 Windows 上为 2 个字节并使用 UTF-16LE 编码（Windows 最初仅支持 UCS2）。

在实践中，“1 `wchar_t`= 1 个字符”的概念变得更加复杂，因为 Unicode 支持组合字符和字素（由代码点序列表示的字符）。

# ios - xcodebuild PLATFORM_NAME 总是 == iphoneos

> ID：13509734
> 
> 赞同：7
> 
> 时间：2012-11-22T09:41:50.993
> 
> 标签：ios, xcodebuild

我正在尝试使用**iphonesimulator**作为 SDK 从命令行构建 Xcode 项目。这是命令行：

```
xcodebuild -scheme SchemeName -configuration Debug -sdk iphonesimulator PLATFORM_NAME=iphonesimulator clean build 
```

但是，当我在 Xcode 中添加构建后操作时，例如：

```
echo "PLATFORM_NAME: ${PLATFORM_NAME}" 
```

它总是输出“PLATFORM_NAME: **iphoneos** ”而不是 iphonesimulator。

这是一个错误，还是我的构建配置有问题？谢谢

# javascript - Javascript - 以编程方式创建桌面链接

> ID：13509736
> 
> 赞同：12
> 
> 时间：2012-11-22T09:41:58.940
> 
> 标签：javascript

有没有办法以编程方式为我的网页创建桌面链接？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-22T10:10:11.960

不是来自 Javascript，但有一个技巧可以让用户这样做。它更像是一种**交互设计**技术而不是编程技术，但我会写它，也许有人在谷歌上搜索这个问题并发现它很有用。

在您的页面上制作一个图标，并在其下方添加文字。然后要求用户将此图标拖到他们的桌面上。该图标应嵌入到具有指向您网站`<a>`的属性的锚标记中。`href`图标下的文字应与`<title>`您页面的标签相同。当用户将锚链接从页面拖到文件夹、桌面或书签栏时，浏览器会制作一个图标。浏览器分配此快捷方式或链接的文本通常是`<title>`页面的文本。请记住，图标应该设置为元素的背景，这样浏览器就不会保存图像而是创建新链接。**如果此图标**与您网站的图标相同，那就更好了。

为了演示这种技术，这里有一些代码：

```
<p>You can make a shortcut to www.mysite.com by dragging this icon to your desktop or bookmark bar: </p>
<a href="https://www.example.com">
  <div id="icon" style="background-image:url('favicon.png');width:32px;height:32px;"></div>
  <div id="title">www.example.com</div>
</a> 
```

**就像一个原生应用程序：**

在 Chrome 中，用户可以转到*菜单 > 更多工具 > 创建应用程序快捷方式...*并为您的网站创建一个看起来像应用程序的无边界快捷方式。类似的事情可以在 Android、iOS 和 Android 上的 Firefox 中完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T09:44:57.617

**这对于 JavaScript 等浏览器脚本是不可能的**。这是一项安全功能。我相信您会理解为什么人们不希望网页能够访问您的本地文件系统。

想象一下，我们不会淹没在弹出窗口中，而是淹没在由垃圾邮件/诈骗网页创建的文件中。我并不是说您的网站是垃圾邮件或诈骗网站，只是想把它放在眼里:)

考虑到用户可能使用不同的浏览器，您可以很容易地为您的用户创建一种关于如何创建快捷方式或将您的页面添加到他们的书签的教程，但是如果您涵盖主要浏览器，Chrome、Firefox 和 IE，我相信您的用户按照您的指示不会有任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T09:44:11.700

来自 JavaScript，在网页上运行？

不。

# mysql - MySQL查询最低价格

> ID：13509739
> 
> 赞同：-1
> 
> 时间：2012-11-22T09:42:07.050
> 
> 标签：mysql

当它显示在网页上时，我们得到了包含不同产品的表格，我想首先显示最低价格而不是 <> 0 并联合到价格 = 0，然后使用 ASC 订单加入最高价格。我试图用很多查询来做到这一点。但是可以在一个查询中完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:46:37.170

为了获得最低价格，您可以使用它，

```
select itemcode, price from item where price>0 order by price asc limit 1 
```

记录最低，最高价格，将“ASC”更改为“DESC”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:57:04.210

你可以试试这个

```
 select top * (price) from table
 where price>=0
 order by price 
```

# flash - 在 unloadMovie / removeMovieclip 之后 setInterval 仍然触发事件

> ID：13509751
> 
> 赞同：1
> 
> 时间：2012-11-22T09:42:39.937
> 
> 标签：flash, actionscript-2

我制作了一个能够从导航树加载不同的movieclip 的movieclip 浏览器。我注意到，即使我卸载甚至删除了 Movieclip，任何包含间隔 (setInterval()) 的电影都会继续播放。

鉴于我无法控制加载的影片剪辑：我怎样才能完全删除包括间隔在内的影片剪辑？

作为一种解决方法，我制作了这个函数来尝试消除所有运行间隔，但这不是它应该完成的方式（或者是吗？）。虽然它似乎运作良好......

```
var LastCleared=-1;
ClearAllIntervals = function(){
//You MUST clear the intervals or they will not be deleted. Every setInterval returns a higher number.
    Highest = setInterval(function(){},100); //Get highest intervalnumber
    i=Highest;
    while(i>LastCleared){
        trace("***************clearing interval:"+i);
        clearInterval(i--);
    }
    LastCleared=Highest;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:28:35.120

LastCleared/Highest 将始终触发，因为您永远不会清除它。

还有你的 ClearAllIntervals() 函数的范围是什么？是否有可能正在创建一个不记得 LastCleared 先前值的新实例？

请注意，我无法找到任何记录 setInterval 返回序列号的文档，正如您所认为的那样。但是，由于 setInterval 不“属于”任何人，因此您不能覆盖它来捕获那些间隔 id。

最后，我认为更高版本的播放器中的 AS3 具有从内存中释放加载的电影的功能，并且它当然具有沙盒功能，可以防止加载的 MC 将自己附加到加载的 MC 中的任何内容。

# css - 将 Photoshop 中设置的字母跟踪值转换为 CSS 中的等效字母间距

> ID：13509752
> 
> 赞同：11
> 
> 时间：2012-11-22T09:42:42.933
> 
> 标签：css, fonts, photoshop, units-of-measurement, letter-spacing

我目前正在从 PSD 构建网站。大多数字体的字母跟踪为-25（`<- AV->`：我猜这是字母间距的符号？）。

我如何在 CSS 中获得相同的效果？我知道该属性是`letter-spacing: X`，但它不需要百分比，-25px 或 pts 将是一个巨大的数字！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-09-15T02:30:48.770

在 Photoshop 中，字母间距称为字母跟踪，特别是每个文本字母之间的间距。问题是 Photoshop 字母跟踪不会将 1:1 转换为 CSS 中的字母间距。

不过，计算从 Photoshop 到 CSS 的转换非常容易。

# 将 Photoshop 字母跟踪转换为 CSS 字母间距的公式

## `em`公式

```
 X / 1000 = Y

X is the value of the letter-tracking in Photoshop
Y is the value in "em" to use in CSS 
```

### 例子

考虑以下示例：Photoshop 的字母跟踪值为 200..

```
200 / 1000 = 0.2 
```

结果是CSS 中的**0.2em**。

## `px`公式

如果您更喜欢使用“px”值，则公式为

```
 X * S / 1000 = P

X is equal to the letter-tracking value in Photoshop
S is the font-size in pixels
P is the resulted value in "px" to use in CSS 
```

### 例子

考虑以下示例：Photoshop 的字母跟踪值为 200，字体大小值为 10。

```
200 * 10 / 1000 = 2 
```

结果是CSS 中的**2px**。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-22T09:47:14.170

您可以使用`em`尺寸而不是`px`，从而调整相对于字体大小的间距（因此 Photoshop 的 25% 大约是`.25em`）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-22T11:00:54.737

在这种情况下，无单位数字通常意味着印刷单位是该`em`单位的一小部分。它通常被称为“单位”。该单位的值取决于字体，并表示为 UPM（每 em 单位）值。常见的 UPM 值为 1,000，但 Microsoft 字体有 2,048，并且还会出现其他值。（这个问题在[UPM value of 1000 set in stone? 一文中有详细描述？](http://www.typophile.com/node/30913)）

假设 UPM 值为 1,000，-25 将映射到 -0.025em。设置`letter-spacing: -0.025em`往往会产生相当小的影响：较长的文本行会缩短大约一个“i”。使用 CSS 获得的效果不应与 PhotoShop 中的相同；PhotoShop 的渲染机制与浏览器不同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-22T10:03:17.710

如果您的问题只是单位转换，您可以使用`em`而不是`px`

虽然`em`允许十进制数字，但它不会改变渲染精度。`0.5px`或同等精度不会在浏览器上显示 - 它将变为 0 或 1px。仅仅因为屏幕不能显示半个像素，它充其量只能通过抗锯齿来近似。

对于较小的字体，抗锯齿可能看起来比间距更差。另一种选择是查找默认具有所需间距的网络字体。这样，您将获得与您想要的相似的结果，但可能意味着更改字体。

CSS 间距根本不如 Photoshop 准确。一个原因是 Photoshop 也可以渲染打印 - 使用屏幕/像素分辨率，您必须忍受像素精度。尽管从理论上讲，字母间距在缩放等方面变得更加准确是可能的，但我不知道任何实际可以以这种方式工作的实现。

如果正确的字母间距对您来说真的很重要，您可以尝试使用 SIFR 以比浏览器的能力更准确地呈现字体间距 - 他们可能能够使用更改抗锯齿。显然，这只有在字母间距是一个大问题时才有意义。

# php - Doctrine 2 多对多关系与连接表中的附加列

> ID：13509757
> 
> 赞同：7
> 
> 时间：2012-11-22T09:43:12.917
> 
> 标签：php, symfony, doctrine

所以，我一直在玩转学说，并在一些基本项目中使用它，但我决定回去深入研究它可以做什么。

我现在决定切换到 symfony 2 作为我选择的框架，并且正在研究学说 2 可以更深入地做些什么。

我一直试图弄清楚的一件事是教义中的多对多关系。我开始建立一个食谱系统，并且正在研究食谱和成分之间的关​​系，这给了我 3 个实体，食谱、食谱成分和成分。我不能使用直接多对多关系的原因是因为我想在连接表中为每种成分存储两个额外的列（单位和数量）。

我目前遇到的问题是实体保持正常，但未插入连接表中的 recipe_id。我已经尝试了我能想到的一切，并通过每个线程和网站寻找答案。我敢肯定，我错过了一些完全显而易见的事情。请帮忙，以下是我到目前为止的代码：

```
<?php
namespace Recipe\RecipeBundle\Entity;
use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;
/**
 * @ORM\Entity
 * @ORM\Table(name="recipe")
 * @ORM\HasLifecycleCallbacks()
 */
class Recipe{

/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @ORM\OneToMany(targetEntity="RecipeIngredient", mappedBy="recipe", cascade=       {"persist"})
 */
protected $ingredients;
/**
 * @ORM\Column(type="string")
 * @var string $title
 *
 */
protected $title;
/**
 * Constructor
 */
public function __construct()
{
    $this->ingredients = new \Doctrine\Common\Collections\ArrayCollection();
}

/**
 * Get id
 *
 * @return integer
 */
public function getId()
{
    return $this->id;
}

/**
 * Add ingredients
 *
 * @param \Recipe\RecipeBundle\Entity\RecipeIngredient $ingredients
 * @return Recipe
 */
public function addIngredient(\Recipe\RecipeBundle\Entity\RecipeIngredient $ingredients)
{
    $ingredients->setRecipe($this);
    $this->ingredients[] = $ingredients;

    return $this;
}

/**
 * Remove ingredients
 *
 * @param \Recipe\RecipeBundle\Entity\RecipeIngredient $ingredients
 */
public function removeIngredient(\Recipe\RecipeBundle\Entity\RecipeIngredient $ingredients)
{
    $this->ingredients->removeElement($ingredients);
}

/**
 * Get ingredients
 *
 * @return \Doctrine\Common\Collections\Collection
 */
public function getIngredients()
{
    return $this->ingredients;
}

/**
 * Set title
 *
 * @param string $title
 * @return Recipe
 */
public function setTitle($title)
{
    $this->title = $title;

    return $this;
}

/**
 * Get title
 *
 * @return string
 */
public function getTitle()
{
    return $this->title;
}
} 
```

和配方成分

```
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @ORM\ManyToOne(targetEntity="Recipe", inversedBy="ingredients")
 * */
protected $recipe;

/**
 * @ORM\ManyToOne(targetEntity="Ingredient", inversedBy="ingredients" , cascade={"persist"})
 * */
protected $ingredient;

/**
 * @ORM\Column(type="string")
 * @var string  $quantity
 *
 */
protected $quantity;

/**
 * @ORM\Column(type="string")
 * @var string $unit
 *
 */
protected $unit;

/**
 * Get id
 *
 * @return integer
 */
public function getId()
{
    return $this->id;
}

/**
 * Set quantity
 *
 * @param string $quantity
 * @return RecipeIngredient
 */
public function setQuantity($quantity)
{
    $this->quantity = $quantity;

    return $this;
}

/**
 * Get quantity
 *
 * @return string
 */
public function getQuantity()
{
    return $this->quantity;
}

/**
 * Set unit
 *
 * @param string $unit
 * @return RecipeIngredient
 */
public function setUnit($unit)
{
    $this->unit = $unit;

    return $this;
}

/**
 * Get unit
 *
 * @return string
 */
public function getUnit()
{
    return $this->unit;
}

/**
 * Set recipe
 *
 * @param \Recipe\RecipeBundle\Entity\Recipe $recipe
 * @return RecipeIngredient
 */
public function setRecipe(\Recipe\RecipeBundle\Entity\Recipe $recipe = null)
{
    $this->recipe = $recipe;

    return $this;
}

/**
 * Get recipe
 *
 * @return \Recipe\RecipeBundle\Entity\Recipe
 */
public function getRecipe()
{
    return $this->recipe;
}

/**
 * Set ingredient
 *
 * @param \Recipe\RecipeBundle\Entity\Ingredient $ingredient
 * @return RecipeIngredient
 */
public function setIngredient(\Recipe\RecipeBundle\Entity\Ingredient $ingredient = null)
{
    $this->ingredient = $ingredient;

    return $this;
}

/**
 * Get ingredient
 *
 * @return \Recipe\RecipeBundle\Entity\Ingredient
 */
public function getIngredient()
{
    return $this->ingredient;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-17T12:53:30.810

你的基本想法是正确的。如果你想有一个多对多关系，但你需要在连接表中添加额外的字段，那么要走的路正是你所描述的：使用一个具有 2 个多对一关系和一些额外字段的新实体。

不幸的是，您没有提供您的控制器代码，因为很可能您的问题就在那里。

基本上，如果您执行以下操作：

```
$ri = new RecipeIngredient;
$ri->setIngredient($i);
$ri->setRecipe($r);
$ri->setQuantity(1);
$em->persist($ri);
$em->flush(); 
```

您应该始终在您的数据库表中获得正确的记录，同时正确填写 recipe_id 和 ingredients_id。

检查您的代码以下也应该有效，尽管我个人认为这对错误更敏感：

```
$ri = new RecipeIngredient;
$ri->setIngredient($i);
$ri->setQuantity(1);
// here we assume that Recipe->addIngredient also does the setRecipe() for us and 
// that the cascade field is set correctly to cascade the persist on $ri
$r->addIngredient($ri);
$em->flush(); 
```

为了进一步阅读，我会建议有关此主题的其他主题，例如：[Doctrine2: Best way to handle many-to-many with extra columns in reference table](https://stackoverflow.com/questions/3542243/doctrine2-best-way-to-handle-many-to-many-with-extra-columns-in-reference-table)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T11:13:11.433

我不确定这是否是一个解决方案，但它很容易尝试，并且可能会有所帮助。当我创建这种关系时，我会编写另一个注释 **@ORM\JoinColumn**，如下例所示：

我们有一个实体 A、一个实体 B 和一个代表关系的类 AB，并添加了一些其他字段，就像你的情况一样。

我的关系如下：

```
use Doctrine\ORM\Mapping as ORM;

/**
 *  
 *
 * @ORM\Table(name="a_rel_b")
 * @ORM\Entity
 */
class AB
{

    /**
     * @var integer
     *  @ORM\Id
     * @ORM\ManyToOne(targetEntity="A", inversedBy="b")
     * @ORM\JoinColumn(name="a_id", referencedColumnName="id")  
     **/

    private $a;

    /**
     * @var integer
     *  @ORM\Id
     * @ORM\ManyToOne(targetEntity="B", inversedBy="a")
     * @ORM\JoinColumn(name="b_id", referencedColumnName="id")
     **/
    private $b;
// ... 
```

**name**表示关系表中的字段名称，而**referencedColumnName**是被引用实体表中id 字段的名称（即b_id 是a_rel_b 中引用表B 中列id 的列）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T11:22:49.257

你不能，因为它不再是一种关系[根据定义，它是两个原始实体的集合的笛卡尔积的子集]。

您需要一个中间实体，引用两者`Recipe`并`Ingredient`- 调用它`RecipeElement`，`RecipeEntry`或者添加您想要的字段。

或者，您可以将地图添加到您的地图中，您可以`Recipe`在其中保存每个保存的属性，`Ingredient`如果没有重复，则易于维护。

如需进一步阅读，[请查看这个热门问题](https://stackoverflow.com/questions/3542243/doctrine2-best-way-to-handle-many-to-many-with-extra-columns-in-reference-table)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T16:14:05.093

如果我正确理解了这个模型，那么配方的构造及其相关的配方成分是并发的。如果 receipeIngredient->setRecipe() 被调用，在你坚持之前你可能没有 id 并且没有 id 默认 null 将放置在 recipeIngredient->recipe 字段中。这通常使用 cascade: "persist" （在您的示例中不存在于配方字段中，但您可以在控制器中显式处理它：

```
/** 
  * Creates a new Recipe entity.
  *
  */
public function createAction(Request $request)
{
  $em = $this->getDoctrine()->getManager();
  $form = $this->createForm(new RecipeType());  
  $form->bind($request);

  if ($form->isValid()){
    $data = $form->getData();
    $recipeId = $data->getId();
    $recipeIngredients=$data->getIngredients();
    $recipe=$em->getRepository('reciperecipeBundle:Recipe')
               ->findOneById($RecipeId);
    if (null === $Recipe)
      {$Recipe=new Recipe();}  
    foreach ($recipeIngredients->toArray() as $k => $i){
      $recipeIngredient=$em->getRepository('reciperecipeBundle:recipeIngredient')
                           ->findOneById($i->getId());
      if (null === $recipeIngredient)
        {$recipeIngrediente=new RecipeIngredient();}  
      $recipe->addIngredient($i);

      // Next line *might* be handled by cascade: "persist"        
      $em->persist($recipeIngredient);
    }  
    $em->persist($Recipe);
    $em->flush();
    return $this->redirect($this->generateUrl('Recipe', array()));
  }   

  return $this->render('reciperecipeBundle:Recipe:new.html.twig'
                      ,array('form'   => $form->createView()));  
} 
```

# vb.net - 在文本框内显示 HTML 内容

> ID：13509760
> 
> 赞同：1
> 
> 时间：2012-11-22T09:43:21.870
> 
> 标签：vb.net, visual-studio-2010

我正在使用以下代码从 URL 获取我的原始 HTML 字符串并将其显示在（丰富的）文本框表单中：

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Me.TransparencyKey = Me.BackColor
    Dim client As WebClient = New WebClient()
    RichTextBox1.Text = client.DownloadString("http://myurl.com/raw.php")
End Sub 
```

问题是，HTML 字符串没有被转换，我可以在文本框文本中看到 HTML 标签，我的意思是没有`Hello <strong>World</strong>`转换成“Hello **World** ”。

我知道我可以使用 WebBrowser 对象，但我想将其背景颜色从白色设置为透明，据我所知这是不允许的。我不想使用 WebBrowser 的另一个原因是链接，因为当下载的字符串有一些`<a href="...">...</a>`标签时，它会被转换，但是当我希望它使用默认浏览器打开时，而不是在框中进行典型的位置更改。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:47:29.017

[TextBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox.aspx)无法呈现 HTML 。您需要的是一个修改后的处理 HTML 的[RichTextBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.aspx)控件。[这](http://www.codeproject.com/Articles/12172/An-extended-RichTextBox-to-save-and-load-quot-HTML)至少可以帮助您入门。

然后是[适用于 Windows.Forms 的 HtmlTextbox](http://winformhtmltextbox.codeplex.com/)控件，它可能适合您的需求。

# web - 将喜欢按钮连接到 Facebook 粉丝页面页面

> ID：13509761
> 
> 赞同：1
> 
> 时间：2012-11-22T09:43:26.223
> 
> 标签：web, facebook-like

如何将网站上的“点赞”按钮与我的新 Facebook 公司粉丝页面联系起来？是否可以避免使用两个不同的类似按钮（一个在网站上，一个在 facebook 网站上）？

我网站上的“赞”按钮已经有大约 73 个赞。我希望他们与新的 facebook 网站合并。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:45:49.190

就像每个 URL 一样。如果用户喜欢您的网站，并不意味着她喜欢您的页面，反之亦然。所以FB不会让你“迁移”喜欢。

# sql - 像外键一样，如何使用 oracle 引用同一个表中的另一个列值来获取值？

> ID：13509763
> 
> 赞同：2
> 
> 时间：2012-11-22T09:43:32.373
> 
> 标签：sql, oracle

> **可能重复：**
> [如何在 SQL 中对同一表的列强制执行外键约束](https://stackoverflow.com/questions/8768118/how-to-enforce-a-constraint-of-foreign-key-on-columns-of-same-table-in-sql)

表格1

```
Column1 Column2  Column3 
 1        value  1
 2        value  1
 3        value  2 
```

在同一个表中，第 1 列是主键，但第 3 列的值必须来自第 1 列。如何创建这样的表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:53:21.327

可能你正在寻找`self referencing table`

```
create TABLE MyTable
(
   Column1 NUMBER,
   Column2 varchar2(30),
   Column3 NUMBER,
   PRIMARY KEY(column1),
   CONSTRAINT fk_column1_2
    FOREIGN KEY (column3)
    REFERENCES MyTable (column1)

); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T09:57:17.503

如果您的表已经存在，那么您需要运行几个 ddl 语句

```
CREATE TABLE TABLE_1 
    ( 
     column1 NUMBER (4)  NOT NULL , 
     column2 VARCHAR2(20)  NOT NULL , 
     column3 NUMBER (4) 
    ) 
;

ALTER TABLE TABLE_1 
    ADD CONSTRAINT TABLE_1_PK PRIMARY KEY ( column1) ;

ALTER TABLE TABLE_1 
    ADD CONSTRAINT TABLE_1_TABLE_1_FK FOREIGN KEY 
    ( 

     column3
    ) 
    REFERENCES TABLE_1 
    ( 
     column1
    ) 
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:57:18.377

您可以使用 CHECK Constraint 执行此操作：

```
CREATE TABLE TEST (
 a number,
 b number,
 CONSTRAINT CKAEQUALB CHECK (a = b)
); 
```

# android - 调试android应用程序时出现ClassNotFoundException

> ID：13509764
> 
> 赞同：4
> 
> 时间：2012-11-22T09:43:37.630
> 
> 标签：android, eclipse

当我尝试在 Eclipse 上调试我的应用程序时，我得到了 ClassNotFoundException。我在家用电脑上使用安卓版本 4.1.1 的华硕 Transformer Pad TF300T。在我的工作计算机上做同样的事情，但使用带有 android 版本 3.2 的三星 Galaxy 10.1 一切正常。这是我收到的消息：

```
11-22 09:15:14.313: E/AndroidRuntime(2609): FATAL EXCEPTION: main
11-22 09:15:14.313: E/AndroidRuntime(2609): java.lang.RuntimeException: Unable to get  
       provider com.company.bill.contentprovider.BillProvider:  
       java.lang.ClassNotFoundException: com.company.bill.contentprovider.BillProvider 
```

名称已更改以保护无辜者；）
我猜测我的环境存在一些问题，但我无法弄清楚原因。在我的 Assus 上，我打开了开发选项、USB 调试、保持清醒并允许未知来源。

我已经尝试在 Eclipse 中打开 ClassNotFound 的断点，但它并没有改变任何东西。我也尝试过以管理员身份运行 eclipse，但没有帮助。

我得到了 Eclipse Juno 和 Windows 7 64 位。

编辑：
清单文件

```
 <application  
             android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" android:theme="@android:style/Theme.Light" android:testOnly="false" android:debuggable="true">  
        <activity android:name=".LoginActivity" 
            android:label="@string/app_name" android:screenOrientation="landscape" android:exported="true">  
            <intent-filter>  
                <action android:name="android.intent.action.MAIN" />  
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:48:20.630

您是否将活动声明添加到清单文件中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:18:19.290

我能够自己修复它。
我使用 Android SDK Manager 下载了 Android Support Library 并修复了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:22:21.980

试试这个方法...

1.  右键单击您的项目并转到属性。
2.  转到java构建路径..//在左侧的第5个位置
3.  转到订单和导出选项卡。
4.  在您选择的 jar 文件上检查（勾选标记）。并单击确定。
5.  现在，清理您的项目并运行。

# c# - 显示消息框错误

> ID：13509768
> 
> 赞同：0
> 
> 时间：2012-11-22T09:43:47.050
> 
> 标签：c#, google-maps, monodevelop, messagebox, itemizedoverlay

我正在为 Android 使用 MonoDevelop，并且想要实现一个消息框。

我目前正在 MapsAndLocationDemo 中尝试此代码。

这是我的代码：

```
 public void createMessageBox (string stringQuestion)
    {
        var builder = new AlertDialog.Builder(this); 
        builder.SetTitle ("Test");
        builder.SetIcon (Resource.Drawable.Icon);
        builder.SetMessage (stringQuestion);

        builder.SetPositiveButton ("Yes", (sender, e) => { 
            Toast.MakeText (this, "You clicked positive button", ToastLength.Short).Show ();
        });

        builder.SetNegativeButton ("No", (sender, e) => { 
            Toast.MakeText (this, "You clicked negative button", ToastLength.Short).Show ();
        });

        builder.SetNeutralButton ("Maybe", (sender, e) => { 
            Toast.MakeText(this, "You clicked neutral button", ToastLength.Short).Show ();
        });

        var dialog = builder.Create ();
        dialog.Show ();
    } 
```

当从主“OnCreate”函数调用时，此代码工作正常。但是，我想从基本“ItemizedOverlay”的“Overlay”中调用此代码。

我收到以下错误：

> 无法通过嵌套类型“MapsAndLocationDemo.MapWithOverlayActivity.MapItemizedOverlay”访问外部类型“MapsAndLocationDemo.MapWithOverlayActivity”的非静态成员

我怎样才能让它工作？还是有更好的方法来显示消息框？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:10:32.353

需要做的就是使函数成为静态的。

# sql - 如何在 Rails 控制台中测试添加索引的性能？

> ID：13509769
> 
> 赞同：2
> 
> 时间：2012-11-22T09:43:54.183
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, performance, postgresql

我想添加索引来提高我的应用程序性能。

我想测量添加索引的性能。

例如我有下表：

```
create_table "classifications", :force => true do |t|
  t.integer  "app_id"
  t.integer  "user_id"
  t.integer  "topic_id"
  t.string   "targit_type"
  t.integer  "targit_id"
  t.datetime "created_at"
  t.datetime "updated_at"
end 
```

我考虑在这里添加三个索引：

```
# Classification
add_index :classifications, :app_id, name: "index_classifications_on_app_id"
add_index :classifications, :user_id, name: "index_classifications_on_user_id"
add_index :classifications, [:target_id, :targit_type], name: "index_classifications_on_targit_id_and_targit_type" 
```

所以我想衡量这种变化的表现。

最好的方法是如何做到这一点？我应该在 Rails 控制台中这样做吗？

```
>> Agreement.find_by_user_id_and_review_id(User.last.id, Review.last.id)                                                                              
  User Load (14.2ms)  SELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT 1
  Review Load (4.5ms)  SELECT "reviews".* FROM "reviews" ORDER BY "reviews"."id" DESC LIMIT 1
  Agreement Load (2.2ms)  SELECT "agreements".* FROM "agreements" WHERE "agreements"."user_id" = 2064 AND "agreements"."review_id" = 1557 LIMIT 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:52:09.593

一种在该表上查找查询并在创建索引之前和之后测量时间的可能性。

PostgreSQL 提供了一些关于表和索引的统计信息（[9.1 文档](http://www.postgresql.org/docs/9.1/static/monitoring-stats.html)）。
我喜欢使用 pg_stat_user_indexes 查看有关索引的所有统计信息。
尝试查看它，我认为您会在那里找到非常有用的信息。
您还应该检查 pg_stat_user_tables 以检查在表上运行全表扫描的次数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:44:28.367

使用[`EXPLAIN (BUFFERS, ANALYZE)`](http://www.postgresql.org/docs/current/static/sql-explain.html)or 在旧版本中，plain `EXPLAIN ANALYZE`.

这不仅会为您提供查询时间，还会告诉您正在使用哪些索引。

您还应该使用`pg_stat_user_indexes`sufleR 指出的。

# mysql - 检查字段中是否存在字符

> ID：13509778
> 
> 赞同：0
> 
> 时间：2012-11-22T09:44:41.610
> 
> 标签：mysql

我想从我的数字表中选择索引中除了 + 之外没有任何字符的数字表。
例如：

*   +991234567 没问题

*   98+4587889不行

*   14asdasda54866666 不行

我应该如何写我的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:26:25.397

这是带有正则表达式的查询

```
SELECT 
  number
FROM 
  Table1
WHERE 
  number NOT REGEXP '^\\+{0,1}(0|1|2|3|4|5|6|7|8|9)*$' 
```

[SQL小提琴](http://sqlfiddle.com/#!2/66f92/1/0)

# makefile - 如何告诉 `make` 到 `patch` 一个现有文件以避免循环依赖错误？

> ID：13509781
> 
> 赞同：2
> 
> 时间：2012-11-22T09:44:56.303
> 
> 标签：makefile, patch

例如：

```
# patched foo.c depends on original foo.c and couple of my edits in foo.dif
foo.c: foo.c foo.dif
  patch foo.c foo.dif 
```

我想避免文件名和目录混乱，只需在原地应用编辑并准备好由原始源代码树提供的原始makefile（它非常复杂且对文件名和目录敏感）促进重建。

* * *

@AUZKamath，我的编辑包含在`foo.dif`. 这是为了在最终用户系统上的现有源代码树上部署我的补丁。我做错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T17:45:57.153

您可以使用所谓的“哨兵”文件来表明补丁已经被应用。

`foo.c`：

```
#include <stdio.h>

int main() {
    printf("hi!\n");
} 
```

`foo.diff`：

```
--- foo.c
+++ foo.c
@@ -1,5 +1,5 @@
 #include <stdio.h>

 int main() {
-    printf("hi!\n");
+    printf("goodbye.\n");
 } 
```

`Makefile`：

```
foo: foo.c

foo.c: foo.c.patched

foo.c.patched: foo.diff
    if [ -e $@ ]; then patch -R foo.c $@; fi
    patch foo.c $<
    cp foo.diff $@ 
```

`foo`取决于`foo.c`和`foo.c`取决于`foo.c.patched`，这取决于补丁文件。所以 before`foo`被构建，`foo.c.patched`如果它不存在或者`foo.diff`是新的，将被构建。应用补丁的规则`foo.c.patched`，然后保存它的副本。

所以：

*   如果您尚未应用补丁，它将自动应用
*   如果你修改`foo.c`，它将被重建
*   如果您修改补丁，构建系统将在必要时恢复以前应用的补丁，然后应用新补丁

您可以编辑或者`foo.c`，`foo.diff`只要您在编辑过程中不产生冲突，构建系统将处理其余部分。

# php - 导出空格之间的所有字符串

> ID：13509788
> 
> 赞同：1
> 
> 时间：2012-11-22T09:45:13.373
> 
> 标签：php

如何`'Hi my Name is Mahdi'`像这样将所有字符串导出到数组中：`$arr=array('Hi','my','Name','is','Mahdi');`使用 UTF8

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T09:47:05.043

尝试这个：

```
$string = "Hi my name is mahdi";

$arr = explode(" ",$string);

print_r($arr); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T09:46:44.653

这里有类似问题的各种答案，但你想要`$arr = explode(' ', $string);`

如果您查看[**explode()**](http://uk1.php.net/manual/en/function.explode.php)文档，您会发现它需要参数；分割字符串的分隔符（在本例中为空格：）`' '`，以及要分割的字符串。

您可以`hello,my,name,is,Maccath`使用逗号分隔其他字符串`explode(',', 'hello,my,name,is,Maccath')`

# infinispan - JBoss 7 + Infinispan 和事务

> ID：13509794
> 
> 赞同：1
> 
> 时间：2012-11-22T09:45:47.897
> 
> 标签：infinispan

我正在使用 JBoss As 7.1.1 Final。我已经使用事务模式“FULL_XA”配置了一个复制缓存。

我将缓存用作内存数据库。缓存中的条目由应用程序操作（添加/更新/删除）。我面临这样一种情况，即 JTA 事务回滚不会恢复先前在缓存中添加的条目。Infinispan 文档指定了为缓存配置的事务管理器。我相信在 JBoss 应用服务器上，infinispan 应该能够自动选择正确的事务管理器。此外，infinispan 1.2 XSD 没有提供关于我们应该如何为缓存配置事务管理器的任何细节。我们真的需要在这里配置一个事务管理器吗？如果不是，那么缓存添加在事务回滚后未回滚的可能原因是什么。

一旦相应的事务回滚，infinispan 是否提供删除缓存中先前添加的条目的能力？这本质上与持久数据存储（如 RDBMS）提供的原子性保证相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T18:45:08.137

在 Infinispan 论坛上得到相同的问题（和答案）：[https ://community.jboss.org/message/778149#778149](https://community.jboss.org/message/778149#778149)

实际上，Infinispan 在事务提交之前不会向缓存写入任何内容，因此没有任何内容可以回滚 - 如果缓存确实是事务性的，则默认情况下不是。

[您可以通过元素](http://docs.jboss.org/infinispan/5.1/configdocs/urn_infinispan_config_5.1/complexType/configuration.transaction.html)`transactionMode`的属性启用事务。还有一个用于自定义事务管理器查找的属性 ( )，但正如您猜测的那样，默认值应该适用于 AS7。[`transaction`](http://docs.jboss.org/infinispan/5.1/configdocs/urn_infinispan_config_5.1/complexType/configuration.transaction.html)`transactionManagerLookupClass`

# vim - 如何在vim中找到未映射的控制键？

> ID：13509796
> 
> 赞同：8
> 
> 时间：2012-11-22T09:45:51.390
> 
> 标签：vim

我想做类似的事情

`map <C-k> :e#<CR>`

在我的`.vimrc`.

但是，我最近发现它`<C-k>`用于有向图。

**如何在 vim 中获取未映射的控制键列表？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:09:49.540

Vim has many commands, so it can be a challenge to find a (memorable and short) key sequence for mappings.

My approach is to use the recommended `<Leader>` prefix for things I do not use frequently, but for essential stuff a mapping with `Ctrl` is useful, indeed.

Learn how the commands are represented in the help (e.g. `CTRL-O` in normal mode, `i_CTRL-X_CTRL-N` for insert mode), think of a good mapping candidate, then try to look it up via `:help CTRL-...`) If there are no matches, you can make sure that the mapping is free via `:nmap C-...`; if there is a match (the nice thing is that this also covers plugins that supply documentation), you can read the description, have at least discovered a new Vim command, and can then decide whether you need it (then retry with a different mapping candidate), or whether you override the command.

(Note that you can also `:noremap` built-in commands to other keys, but be aware that this makes you increasingly helpless in vanilla Vim installations or other application's vi-emulation modes.)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-08T18:32:52.270

I just akc'd the documentation directory for vim 7.4 debian/ubuntu package to find used control keys.

the command I used was

```
ack ctrl- | perl -ne 'm/(CTRL-.?)/g; print $1."\n";' | sort| uniq 
```

The output is below

```
CTRL-^
CTRL-<
CTRL-_
CTRL--
CTRL-;
CTRL-?
CTRL-(
CTRL-[
CTRL-]
CTRL-{
CTRL-@
CTRL-\
CTRL-6
CTRL-a
CTRL-A
CTRL-B
CTRL-C
CTRL-D
CTRL-E
CTRL-F
CTRL-G
CTRL-H
CTRL-I
CTRL-J
CTRL-K
CTRL-L
CTRL-M
CTRL-N
CTRL-O
CTRL-P
CTRL-Q
CTRL-R
CTRL-s
CTRL-S
CTRL-T
CTRL-U
CTRL-V
CTRL-W
CTRL-x
CTRL-X
CTRL-Y
CTRL-Z 
```

Basically no free ctrl keys . . . Yay! :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T10:04:19.113

# html - 选择性地停止文本装饰：在链接标签的子标签上加下划线

> ID：13509798
> 
> 赞同：7
> 
> 时间：2012-11-22T09:46:00.603
> 
> 标签：html, css

有谁知道是否可以防止在标签的子标签上加下划线，同时为标签的其余内容加下划线？

这是一个示例-您可以在[JSFiddle](http://jsfiddle.net/andfinally/ygXy6/2/)上看到它。我已经尝试了我能想到的一切，但文本下划线继续应用于链接内的所有文本。我在 Chrome 上查看，但我确信这适用于所有浏览器。

```
a {
    font-size: 32px;           
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
}

a div {
    color: pink;
}

a:hover div,
a:active div,
a:focus div {
    text-decoration: none !important;
}​

<a href="http://news.bbc.co.uk">
<div class="inner">I don't want this bit underlined on hover. What's the big deal?</div>
This bit should be underlined on hover. Underlining here is fine. I have no objections to underlinining in this bit.
</a>​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T09:53:44.723

阅读这个类似的答案及其链接以获取更多信息：[删除 :hover on :after elemets](https://stackoverflow.com/questions/10122213/remove-hover-on-after-elemets/10122632#10122632)

[http://jsfiddle.net/thirtydot/ygXy6/4/](http://jsfiddle.net/thirtydot/ygXy6/4/)

**CSS：**

```
a {
    font-size: 32px;           
    text-decoration: none;
}

a:hover span {
    text-decoration: underline;
} 
```

**HTML：**

```
<a href="http://news.bbc.co.uk">
    <div class="inner">I don't want this bit underlined on hover. What's the big deal?</div>
    <span>This bit should be underlined on hover. Underlining here is fine. I have no objections to underlinining in this bit.</span>
</a>​ 
```

# qt - 如何获取存储在 .qrc Qt Resorce 文件中的文件列表？

> ID：13509799
> 
> 赞同：41
> 
> 时间：2012-11-22T09:46:03.380
> 
> 标签：qt, embedded-resource

我对 Qt 很陌生。在我的程序中，我在 .qrc 资源文件中添加了一些图标文件。

我们如何在程序中列出存储在 qrc 中的文件？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-11-22T09:49:59.380

这是应该执行此操作的示例代码：

```
QDirIterator it(":", QDirIterator::Subdirectories);
while (it.hasNext()) {
    qDebug() << it.next();
} 
```

文档链接： http: [//doc.qt.io/qt-5/qdiriterator.html](http://doc.qt.io/qt-5/qdiriterator.html)

# sql - SQL Server 语句的语法不正确？

> ID：13509801
> 
> 赞同：0
> 
> 时间：2012-11-22T09:46:07.993
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试写这样的声明：

```
SELECT  
    TBL_CS_LINKS.LINK_ID,
    TBL_CS_LINKS.LINK_NAME,
    TBL_CS_LINKS.LINK_URL, 
    ( SELECT COUNT(*) 
        FROM TBL_CS_TEMP_CLICK 
        WHERE TBL_CS_TEMP_CLICK.LINK_ID = 1)
FROM TBL_CS_LINKS
join right TBL_CS_TEMP_CLICK 
    on TBL_CS_LINKS.LINK_ID = TBL_CS_TEMP_CLICK.LINK_ID
WHERE 
    (CHARINDEX('s', TBL_CS_LINKS.LINK_URL) > 0) OR  
    (CHARINDEX('s', TBL_CS_LINKS.LINK_NAME) > 0) 
order by   TBL_CS_LINKS.LINK_NAME 
```

它给了我一个错误：

> *消息 156，级别 15，状态 1，第 4 行
> 关键字“right”附近的语法不正确。*

可能是什么问题呢 ？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T09:48:11.280

您的关键字顺序错误。

它是

```
right join
left join 
```

或者

```
right outer join
left outer join 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T09:47:56.007

您错误地使用了正确的关键字。请检查下面的正确使用它

```
SELECT  TBL_CS_LINKS.LINK_ID,
        TBL_CS_LINKS.LINK_NAME,
        TBL_CS_LINKS.LINK_URL, 
        (SELECT COUNT(*) FROM TBL_CS_TEMP_CLICK WHERE TBL_CS_TEMP_CLICK.LINK_ID = 1)
FROM TBL_CS_LINKS
right join TBL_CS_TEMP_CLICK 
on TBL_CS_LINKS.LINK_ID = TBL_CS_TEMP_CLICK.LINK_ID

WHERE  (CHARINDEX('s', TBL_CS_LINKS.LINK_URL) > 0) OR  
       (CHARINDEX('s', TBL_CS_LINKS.LINK_NAME) > 0) 
order by   TBL_CS_LINKS.LINK_NAME 
```

# c# - 远程服务器返回错误：（401）未经授权（尝试访问存储库svn时）

> ID：13509805
> 
> 赞同：1
> 
> 时间：2012-11-22T09:46:33.053
> 
> 标签：c#, asp.net, svn

我想使用我的 svn 存储库中的文件，如下所示：

```
 public List <XElement> TableReqDAL (string file)
     {

         XDocument xml = XDocument.Load ("http://source:8080/svn/DataWarehouse/MEX/trunk/TSO/Mappings/" + file + ".xml");
        (...)

     } 
```

我收到此错误：

远程服务器返回错误：(401) Unauthorized。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:06:14.407

看看这个线程，

[XMLDocument.Load(url) 通过代理](https://stackoverflow.com/questions/124932/xmldocument-loadurl-through-a-proxy)

您需要先进行身份验证，然后才能访问资源 - 尝试在浏览器中浏览 URL，您将看到一个用户名\密码对话框 - 您需要以编程方式执行此操作。

# perl - Perl Sub::Override 的命名问题

> ID：13509813
> 
> 赞同：3
> 
> 时间：2012-11-22T09:46:52.527
> 
> 标签：perl, unit-testing

我在测试期间使用模块[Sub::Override](http://search.cpan.org/perldoc?Sub%3a%3aOverride)来模拟子例程。我实际上正在测试一个名为 sub_a 的子例程。sub_a 正在调用另一个子程序 sub_b 来做一些工作。sub_b 实际上是通过 ssh 连接执行一些我想在测试模式下模拟的命令。所以我使用 sub::override 来模拟 sub_b。

```
sub_a{
 ...
 sub_b(arg1, arg2)
} 
```

在我的测试代码中，我像这样覆盖它

```
my $override_sshCommand = override_sub( 'package::filename::sub_b', sub ($$) { return "success"; }, undef ); 
```

在上面的代码中，如果 sub_b 和 sub_a 在同一个类中，则覆盖成功。否则覆盖不起作用。从 sub_a 调用时，我可以通过使用 sub_b 的完全限定名称来解决此问题

```
sub_a{
 ...
 package::filename::sub_b(arg1, arg2);
} 
```

上面的代码修复了问题，覆盖成功。但我不想这样做，因为我不拥有该代码，而且它看起来也很丑陋。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T09:58:56.067

我认为`sub_b`是由包含`sub_a`?

您正在更改名称`package_of_sub_b::sub_b`所指的 sub。

您不会更改名称`package_of_sub_a::sub_b`所指的子项。

如果您正在解析第二个名称，那么您需要覆盖`sub_b`包含`sub_a`.

```
override_sub( 'package_of_sub_a::sub_b', ... ); 
```

# java - Java：如何获得字符的形状（不是轮廓）

> ID：13509821
> 
> 赞同：0
> 
> 时间：2012-11-22T09:47:07.393
> 
> 标签：java, graphics, shape, glyph

有没有办法使用Java获得表示字符的“形状”。

我知道 GlyphVector 类的 getOutling()。但它会返回角色的轮廓。

我需要的不是轮廓，而是描绘角色的单线形状。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:16:08.577

前段时间我也遇到过类似的[问题](https://stackoverflow.com/questions/9043947)。因为字符仅由那里的区域（轮廓）定义，所以您可以使用细字体并获取轮廓并将其用作形状。

# java - 使用 Java 从 Filename 获取 filePath

> ID：13509822
> 
> 赞同：15
> 
> 时间：2012-11-22T09:47:11.427
> 
> 标签：java, file, filepath

如果我知道文件名，是否有一种简单的方法来获取文件路径？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-22T09:49:11.760

您可以使用以下`Path`API：

```
Path p = Paths.get(yourFileNameUri);
Path folder = p.getParent(); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-22T09:49:20.127

查看[java.io.File 类](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)中的方法：

```
File file = new File("yourfileName");
String path = file.getAbsolutePath(); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-22T09:51:24.713

我不确定我是否完全理解你，但如果你想获得绝对文件路径，只要你知道相对文件名，你总是可以这样做：

```
System.out.println("File path: " + new File("Your file name").getAbsolutePath()); 
```

File 类还有几个您可能会觉得有用的方法。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-07-13T05:11:32.623

使用“文件”类获取目录的正确解决方案 - 文件的“路径”：

```
String path = new File("C:\\Temp\\your directory\\yourfile.txt").getParent(); 
```

这将返回：

```
path = "C:\\Temp\\your directory" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-27T16:43:23.903

您可以使用：

```
FileSystems.getDefault().getPath(new String()).toAbsolutePath(); 
```

或者

```
FileSystems.getDefault().getPath(new String("./")).toAbsolutePath().getParent() 
```

这将为您提供根文件夹路径，而无需使用文件名。然后，您可以深入到您想去的地方。

例子：`/src/main/java...`

# sql - sql-xml：选择节点集合

> ID：13509828
> 
> 赞同：2
> 
> 时间：2012-11-22T09:47:32.943
> 
> 标签：sql, xml, sql-server-2008-r2

我在 SQL Server 2008 R2 中有一个表，它有一个 xml 列。

这是其中的 xml 文档的示例：

```
<ROOT>
  <SITE_CHAR>
    <SITE_NAME>ScrivaniaEle</SITE_NAME>
    <SITE_RESPONSIBLE>database</SITE_RESPONSIBLE>
    <SITE_IGBP>URB</SITE_IGBP>
    <SITE_LAT>42.42716</SITE_LAT>
    <SITE_LON>12.09358</SITE_LON>
    <ELEVATION>323</ELEVATION>
  </SITE_CHAR>
  <SPP_O>
    <VALUE>BRNA</VALUE>
    <SPP_DATE>20090409</SPP_DATE>
  </SPP_O>
  <SPP_O>
    <VALUE>HEAN3</VALUE>
    <SPP_DATE>20090409</SPP_DATE>
  </SPP_O>
  <SPP_O>
    <VALUE>TRIN3   </VALUE>
    <SPP_DATE>20091111</SPP_DATE>
  </SPP_O>
  <SPP_U>
    <VALUE>HEAN3</VALUE>
    <SPP_DATE>20090409</SPP_DATE>
  </SPP_U>
  <SPP_U>
    <VALUE>TRIN3   </VALUE>
    <SPP_DATE>20091111</SPP_DATE>
  </SPP_U>
  <LAI>
    <VALUE>0.35863933908505</VALUE>
    <LAI_DATE>20080319</LAI_DATE>
    <LAI_COMMENT>"number of samples: 14"</LAI_COMMENT>
    <LAI_TECHNIQUE>"ACUPAR"</LAI_TECHNIQUE>
  </LAI>
</ROOT> 
```

我想知道是否有办法只选择第一个子节点并且只选择一次；也就是说，我想检索值`SITE_CHAR, SPP_O, LAI`等等，一次，独立于子节点的值和内部属性。

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:03:33.777

尝试这样的事情：

```
SELECT 
    NodeName = XmlRoot.value('local-name(.)', 'varchar(50)')
FROM
    dbo.YourTable
CROSS APPLY 
    XmlContent.nodes('/ROOT/*') AS Tbl(XmlRoot) 
```

[有关完整示例，请参阅此 SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/5cdf9/1)。

# java - 没有编译器错误/警告不捕获/抛出异常

> ID：13509829
> 
> 赞同：7
> 
> 时间：2012-11-22T09:47:35.607
> 
> 标签：java, android, sqlexception

我不明白为什么编译器没有警告我不要捕获或抛出`SQLException`. 情况如下：

我已经定义了这个接口：

```
public interface GenericDatabaseManager {
    public void createTables(DataBase model) throws SQLException;
} 
```

然后我创建了这个实现给定接口的类：

```
public class SqliteHelper extends SQLiteOpenHelper implements
        GenericDatabaseManager {

    @Override
    public void createTables(DataBase model) throws SQLException {
        // Code that throws SQLException
    } 
```

最后我从这里调用这个 SqliteHelper.createTables() ：

```
public class DatabaseManager extends CoreModule {
    private boolean createUpdateDB(final String dbString, final String appId) {
        // Previous code...

        if (oldVer == -1) {
            dbCoreModel.addModel(dbModel);
            dbCoreModel.getManager().createTables(dbModel);
            return true;
        }

        // More code...
    }

} 
```

`dbCoreModel.getManager()`返回一个`GenericDatabaseManager`实例。但是编译器在线显示没有错误`dbCoreModel.getManager().createTables(dbModel);`，尽管这一行抛出一个`SQLException`.

有谁知道为什么会这样？提前致谢。

**编辑**： about`SQLException`不需要被抓住，因为它是一个`RuntimeException`. [这不是真的](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/SQLException.html)。这是一个例子：

```
import java.sql.SQLException;

interface Interface {
    public void throwsSQLException() throws SQLException;
}

class Test implements Interface {

    @Override
    public void throwsSQLException() throws SQLException {
        throw new SQLException();
    }
}

public class Main {

    public static void main(String[] args) {
        Interface i = new Test();
        i.throwsSQLException();
        System.out.println("Finished");
    }

} 
```

`i.throwsSQLException();`在这种情况下，编译器会显示错误。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-22T09:54:19.543

[`android.database.SQLException`](http://developer.android.com/reference/android/database/SQLException.html)是运行时异常。

In java it is not necessary to catch or declare throws for runtime exceptions. Read a detailed description about [`RuntimeExceptions`](http://docs.oracle.com/javase/6/docs/api/java/lang/RuntimeException.html) in java [**here**](http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html)

# iphone - 可以使用 popViewControllerAnimated 传递数据吗？

> ID：13509832
> 
> 赞同：11
> 
> 时间：2012-11-22T09:47:51.923
> 
> 标签：iphone, objective-c, ios, xcode

我遇到了一个有趣的问题，我有主 ViewController，让我们用导航控制器称他为 MainVC，我正在从他执行 performSegueWithIdentifier 到我的第二个 ViewController，让我们称他为 SecVC。因此，当我尝试执行 popViewControllerAnimated 时，我想将一些数据从 SecVC 传递到 MainVc .. 我知道我可以使用 appDelegate Param 或单例类来做到这一点，但我的问题是：我可以用更优雅的解决方案来做到这一点吗？就像我使用 prepareForSegue 并使用本地参数..

谢谢...

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-22T10:01:46.320

最好的方法是使用委托。

***//SecVCDelegate.h***

```
#import <Foundation/Foundation.h>

@protocol SecVSDelegate <NSObject>

@optional
- (void)secVCDidDismisWithData:(NSObject*)data;
@end 
```

***//SecVC.h***

```
#import <UIKit/UIKit.h>
#import "SecVSDelegate.h"

@interface SecVC : UIViewController

/** Returns the delegate */
@property (nonatomic, assign)   id<SecVSDelegate> delegate;

@end 
```

***//SecVC.M***

```
...

- (void) dealloc
{
...
delegate = nil
...
} 
```

每当你 popViewControllerAnimated，在它之后（或之前）你这样做

```
if(_delegate && [_delegate respondsToSelector:@selector(secVCDidDismisWithData:)])
{
[_delegate secVCDidDismisWithData:myDataObject];
} 
```

在 MainVC 中你必须确定你实现了委托函数 ***//MainVC.m***

```
- (void)secVCDidDismisWithData
{
//do whatever you want with the data
} 
```

为避免任何警告，您必须告诉 MainVC 类实现委托，如下所示：

***//MainVC.h***

```
#import "SecVCDelegate.h"
...
@interface MainVC : UIViewController <SecVCDelegate>
...
secVCInstance.delegate = self;
[self.navigationController pushViewController:secVCInstance]; 
... 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-12-06T13:27:26.310

虽然我同意最好的选择是使用**Delegate**，但如果有人正在寻找不同的东西，他可以使用**NSNotificationCenter**作为替代方案。

在MainVC 的**viewDidLoad**中：

```
- (void)viewDidLoad
{

    [super viewDidLoad];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(recvData:)
                                             name:@"SecVCPopped"
                                           object:nil];
} 
```

并在 MainVC.m 中添加方法**recvData**

```
- (void) recvData:(NSNotification *) notification
{

    NSDictionary* userInfo = notification.userInfo;
    int messageTotal = [[userInfo objectForKey:@"total"] intValue];
    NSLog (@"Successfully received data from notification! %i", messageTotal);
} 
```

现在在 SecVC 中，在弹出之前，添加这一行

```
NSMutableDictionary* userInfo = [NSMutableDictionary dictionary];
[userInfo setObject:[NSNumber numberWithInt:messageTotal] forKey:@"total"];

NSNotificationCenter* nc = [NSNotificationCenter defaultCenter];
[nc postNotificationName:@"SecVCPopped" object:self userInfo:userInfo]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T09:55:31.197

我会通过以下方式之一来做，但我不确定它是否足够优雅......

1.  在 SecVC 中，在调用之前添加一个`@property MainVC *mainVC;`Use`[self.mainVC setSomeValue:...];``[self.navigationController popViewControllerAnimated:...];`

2.  使用 [self.navigationController viewControllers]; 找出, 并在弹出的代码行之前`MainVC *mainVC`调用.`[mainVC setSomeValue:...];``ViewController`

这是你想要的吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-01T16:57:20.890

我只是在被关闭的视图中设置了一个协议（Swift 中的示例）：

```
 protocol ExampleTableViewControllerDismissDelegate {
    func didDismiss(withData: Any)
}

var delegate: SearchableTableViewControllerDismissDelegate? 
```

然后，当您像这样关闭/弹出视图时，您可以调用它

```
self.navigationController?.popViewController(animated: true)
delegate?.didDismiss(withData: Any) 
```

然后在被解除的视图（层次结构中的父级）中，我们可以符合委托，并在视图被解除后基本上获得带有数据的回调。

```
//MARK: ExampleTableViewControllerDismissDelegate

func didDismiss(withData: Any) {
    //do some funky stuff
} 
```

并且不要忘记使用订阅父视图中的委托

```
viewController.delegate = self 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-17T04:19:44.740

还有另一种在视图之间传递数据的方法，包括**popViewControllerAnimated**并且它使用全局 var 实例，因此如果您在详细视图中修改该 Var 并在执行**popViewControllerAnimated**之后，您可以在 viewWillAppear 方法中调用新数据。

第一步是在 main.h 中声明 Global var

```
NSMutableArray * layerList; 
```

现在您必须在详细视图中调用它。

**第二视图.m**

```
extern NSString *layerList; 
```

**第二视图.h**

```
-(void)back{
    layerList = @"Value to send";
    [self.navigationController popViewControllerAnimated:YES];
} 
```

现在您可以在检测到弹出操作后使用主视图中的信息。

**第一视图.m**

```
extern NSString *layerList; 
```

**第一视图.h**

```
-(void)viewWillAppear:(BOOL)animated{
   NSLog(@"This is what I received: %@",layerList);
} 
```

# objective-c - 查找和替换 Xcode 项目中每个方法的左大括号

> ID：13509835
> 
> 赞同：1
> 
> 时间：2012-11-22T09:47:55.473
> 
> 标签：objective-c, xcode

我正在稍微改变我的编码风格，并想改变我在整个大型项目中使用的格式模式。

`{`在给定方法的实现中，我在方法名称的最后一个字符后放置一个左大括号。我想找到并用新行上的左大括号替换此模式的每个实例 - 即

```
- (void)myMethod:(id)aParameter 
{
    // Code
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:53:23.043

一种方法是使用代码格式化程序，例如[uncrustify](http://uncrustify.sourceforge.net)。当然，这将是比您的提议更大的变化。从长远来看，很高兴有一个程序为您完成工作。

# php - 使用 `equal` 比较使 ExtJS 过滤器`int` 类型

> ID：13509839
> 
> 赞同：4
> 
> 时间：2012-11-22T09:48:02.720
> 
> 标签：php, extjs, filter

我`ExtJS`在一个旧的（而不是我的）项目中使用，我必须调试它。
所以我在搜索表单中有这个代码：

```
var pm = Ext.getCmp('ddlFltrPM').getValue();
if(pm && pm > 0)    
filters.push({dataIndex: 'project_manager_id', type: 'string', value: pm}); 
```

这可行，但在 php 代码函数中，在 sql 查询中转换此过滤器，如下所示：（
`AND project_manager_id LIKE %...%`默认情况下转换函数），因为它是`string`搜索字段。

但我需要**完全**匹配。所以当我尝试这样的事情时：

```
var pm = Ext.getCmp('ddlFltrPM').getValue();
if(pm && pm > 0)    
filters.push({dataIndex: 'project_manager_id', type: 'int', comparison:'eq', value: pm}); 
```

..filter 不出现在 POST 中。我尝试了 and 的许多变体`type`，`comparison`但没有任何效果。

**那么如何将此过滤器字段更改为`int`比较`eq`？**

感谢您的建议。
斯坦尼斯拉夫。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T12:39:26.507

我解决了这个问题。但是逐步调试 ExtJS 代码很困难。所以代码：

```
var pm = Ext.getCmp('ddlFltrPM').getValue();
if(pm && pm > 0)    
filters.push({dataIndex: 'project_manager_id', type: 'int', value: {"eq":pm}}); 
```

# php - 当 PHP 验证出错时，字段不显示值

> ID：13509845
> 
> 赞同：0
> 
> 时间：2012-11-22T09:48:14.953
> 
> 标签：php

我在下面有这些编码用于注册表。但它将填写的字段重置为空并显示错误字段。我必须从头开始重新填写表格。我该如何解决这个问题。提前感谢您阅读本文并帮助我解决

```
if(isset($_POST['submit'])){

$domain=$_POST['domain'];
$fname=$_POST['fname'];
$sname=$_POST['sname'];
$tel=$_POST['tel'];
if($domain==""){
    $error="<h4>Enter Domain </h4>";    
}elseif($fname == ""){
    $error="<h4>Enter Firstname </h4>"; 
}elseif($sname == "")
{
    $error="<h4 >Enter Surname</h4>";   
}elseif($tel=="")
{
    $error="<h4 >Enter telephono no</h4>";  
}
else {

$sql11=mysql_query("INSERT INTO domain VALUES('','$domain','$fname','$sname','$tel')");
echo $sql;
$db->query($sql);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:03:48.943

```
<input type="text" name="domain" id="domain" value="<?php echo isset($domain) ? $domain : ''; ?>" /> 
```

这将起作用。

# c - 在文本文件中查找行的特定信息

> ID：13509847
> 
> 赞同：0
> 
> 时间：2012-11-22T09:48:19.687
> 
> 标签：c, file, import, lines

似乎无法在任何地方找到关于我如何从 .t​​xt 文件中的特定行查找信息的任何信息。就像这条线可能是曲棍球比赛的结果一样，这条线可能看起来像：

> 19.00 01.01.2010 团队 1 - 团队 2 5 - 10 2000
> 
> 20.00 02.20.2010 Team2 - Team3 7 - 11 3400
> 
> 19.00 03.30.2010 团队 1 - 团队 4 4 - 4 1000

等等 ...

所以，如果我只想从与 team3 和 team4 的比赛中得到结果？

这就是我目前所拥有的，但如果我想输入 2 - 2 并获取其中包含数字 2 的每一行。

谢谢

```
#include <stdio.h>
#include <string.h>

int main ( void ){
    char target [ 64 ];
    printf( "Enter a score:" );
    scanf("%s",&target );

    static const char filNavn[] = "text";
    FILE *fil = fopen( filNavn, "r" );
    if ( fil != NULL ){
        char line [ 64 ];

        while( fgets( line, sizeof line, fil ) != NULL ){

            if ( strstr( line, target ) != NULL ){
                printf("%s\n", line);
            }
        }
        fclose( fil );
    }
    else{
         perror( filNavn );
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:59:56.643

如果您非常确定文件中行的格式，那么您可以使用`sscanf`. 比如说

```
int score = atoi(target);
while( fgets( line, sizeof line, fil ) != NULL ){
int t1, t2, s1, s2;
sscanf(line, "Team%d vs Team%d %d-%d", &t1, &t2, &s1, &s2);
if (s1 == score || s2 == score)
    /* Do something here */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:04:39.217

我看到的一些错误：

1.  在`code-line 7`它应该是：

    ```
    /* Let's leave it easy, there are somethings you must 
       read about safety reading. */
    gets( target ); 
    ```

PD：如果你想使用它应该使用的语法，你在目标之前添加了一个＆符号（&）`&target[ 0 ]`，;

1.  在`code-line 12`您声明了一个新变量时，这样做不好，所以我建议您在声明目标字符串的地方声明它。

2.  在您说的示例中，您的数据保存在插槽中`42 characters`，因此以相同的大小进行扫描`code-line 12`。

    ```
    char line[ 43 ]. 
    ```

3.  以同样的方式，您的目标不应大于 line `code-line 5`。

    ```
    char target[ 43 ]. 
    ```

4.  关于`strstr()`函数，它以这种方式工作[Cplusplus strstr() 行为描述](http://www.cplusplus.com/reference/clibrary/cstring/strstr/)：

> *找到子字符串 ( strstr() )。返回指向 str1 中第一次出现 str2 的指针，如果 str2 不是 str1 的一部分，则返回空指针。*

# javascript - 当 JavaScript 被调用时输入文本被删除？

> ID：13509850
> 
> 赞同：0
> 
> 时间：2012-11-22T09:48:24.737
> 
> 标签：javascript

我使用以下内容更新递送邮政编码的纬度和经度。

代码运行良好，除非调用脚本时它会从输入框中删除邮政编码。

有人能告诉我这是为什么吗？

```
<script type="text/javascript">
//<![CDATA[
  var geo = new GClientGeocoder(); 
  function getAddress(search) {
    geo.getLocations(search, function (result)
      { 
        if (result.Status.code == G_GEO_SUCCESS) {
          var p = result.Placemark[0].Point.coordinates;
          var lat=p[1];
          var lng=p[0];
          var dcMessage = '<span style="color:#990000">Post Code Successfully GeoCoded</span>'
          var dcHiddenOutput = '<input type="hidden" name="lat" value="' +lat+ '"><input type="hidden" name="lng" value="' +lng+ '">';
          document.getElementById("ConfirmOrder").innerHTML += dcMessage;
          document.getElementById("UpdateGeo").innerHTML += dcHiddenOutput;
        } 
      }
    );
  }
  function theNext() {
    var addresses = document.getElementById("myInput").value;
      getAddress(addresses);
  }
//]]>
</script>

<form id="UpdateGeo" method="get" action="updateGeocode.asp">
<input id="myInput" name="PostCode" style="text-transform:uppercase" />&nbsp;
<input type="checkbox"  onClick="theNext()">&nbsp;
<input type="submit" value="Update Database">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:44:41.930

这是由 UpdateGeo innerHTML 修改引起的。每当您使用“innerHTML +=”语句时，当前的内部控件状态都会丢失，并将恢复到原始状态（例如，在 html 中静态声明的状态）。

您应该不是通过字符串，而是通过使用 control.appendChild() 来附加动态创建的元素，如下所示：

```
var container = document.getElementById('UpdateGeo');
var element = document.createElement('input');
element.setAttribute('type','hidden');
element.setAttribute('name','lat');
element.value = lat;
container.appendChild(element);

element = document.createElement('input');
element.setAttribute('type','hidden');
element.setAttribute('name','lng');
element.value = lng;
container.appendChild(element); 
```

代替

```
var dcHiddenOutput = '<input type="hidden" name="lat" value="' +lat+ '"><input type="hidden" name="lng" value="' +lng+ '">';
document.getElementById("UpdateGeo").innerHTML += dcHiddenOutput; 
```

# c# - 隐藏我的图标标签

> ID：13509855
> 
> 赞同：4
> 
> 时间：2012-11-22T09:48:41.903
> 
> 标签：c#, asp.net, css

我想要实现的是一旦用户输入了错误的数据，就会显示一个图像标签。

不推荐使用可见方法，因为我`lblMessage`也为其他目的服务。

我现在最大的问题是一旦用户更正了他们的输入字段，标签消息被禁用但图像仍然可见，只是因为我将 my 设置`lblMessage`为`null`.

有什么方法我可以使用，比如当有一些东西是`lblMessage`调用图像 CSS 但每当没有`lblMessage,`任何 CSS 被调用时？

```
if (!Utils.mtdIsBlank(Session["Message"]))
{
    lblMessage.Text = Session["Message"].ToString();
    Session["Message"] = null;
}
else
{
    lblMessage.Text = "";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:26:54.273

似乎您的问题是您不知道如何向 asp.net 控件添加/删除样式：您可以将 CssClass 用于 asp.net 控件（标签、面板...），如下所示：

```
lbl.CssClass = "new-class"; 
```

对于您的示例，这样的事情应该适合您：

```
if (!Utils.mtdIsBlank(Session["Message"]))
{
    //If is not blank no image
    lblMessage.Text = Session["Message"].ToString();
    Session["Message"] = null;
    lblMessage.CssClass = "no-img";
}
else
{
    //Show alert image
    lblMessage.Text = "";
    //Replace with-img with the css class you are using
    lblMessage.CssClass = "with-img";
} 
```

然后你需要添加一个css属性：

```
.no-img{
   background: none;
   //Anything else
} 
```

# facebook - 获取 Youtube 中用户的电子邮件地址

> ID：13509856
> 
> 赞同：0
> 
> 时间：2012-11-22T09:48:43.533
> 
> 标签：facebook, youtube, youtube-api, youtube-channels

我目前正在开发一项将 Youtube 帐户与 Facebook 帐户连接起来的服务。更具体地说，它会首先检查 Facebook 用户是否也有 Youtube 帐户，反之亦然，然后它会创建一些可视化。

问题是应用程序需要用户的电子邮件来签入这些 SNS 中的任何一个，因为用户名可能不同。

手头的问题是如何从他的频道获取 Youtube 用户的电子邮件帐户，以便搜索他是否也有 Facebook 帐户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:50:57.753

那也不能解决你的问题。我可以为 youtube 和 facebook 使用不同的电子邮件。检查一些用于 youtube 和 facebook 的 API，这些 API 可以让当前用户执行操作。

* * *

编辑：这里有一些链接，如果我们假设您想帮助用户将他们上传到 Facebook 的视频上传到他们的 YouTube 帐户。

[您可以访问通过此 URL https://graph.facebook.com/me/videos/uploaded?access_token=YOUR_TOKEN](https://graph.facebook.com/me/videos/uploaded?access_token=YOUR_TOKEN)上传的所有视频， 这将为您提供一个列表[`Videos`](https://developers.facebook.com/docs/reference/api/video/) （在 facebook [API 参考](https://developers.facebook.com/docs/reference/api/)中找到此信息）

然后您可以使用 YouTube API 将这些视频上传到 YouTube：[https ://developers.google.com/youtube/2.0/developers_guide_protocol_uploading_videos](https://developers.google.com/youtube/2.0/developers_guide_protocol_uploading_videos)

# c++ - 如何检测包含标头的位置

> ID：13509860
> 
> 赞同：4
> 
> 时间：2012-11-22T09:48:56.870
> 
> 标签：c++, c

是否可以以编程方式检测（并打印出）包含 C++ 标头的位置？

我有一个像这样的标题：

```
// DeprecatedHeader.h
__pragma( message ("DeprecatedHeader.h is deprecated - include NewHeader.h instead.") )
#include "NewHeader.h" 
```

如您所见，编译器是 MSVC，但我有宏要包装。欢迎使用 GCC，但如果不可能，我会在 Windows 上启用“技巧”。

但我正在寻找的是像这样的输出

```
"AnyOtherFile.cpp was including DeprecatedHeader.h, please include NewHeader.h instead." 
```

编辑：要清楚我为什么要这样做：编译器抛出的警告已经有很大帮助：代码没有损坏，但会促使人们更改包含。问题：它可能会责怪错误的“家伙”，因为您可以通过另一个标题拉入此标题。我的目标是责怪错误的标题，而不是编译单元。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:55:34.897

您可以使用选项运行编译器以生成预处理的源代码，而不是完全编译的（`gcc -E`或`CL.EXE /E`其他）。生成的代码将包括每个代码片段来自何处的标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:39:45.347

尽管我认为不值得追求这个功能，但这里有一个解决方案。

在每个头文件的顶部，在检查已弃用的头文件之后和包含其他文件之前，放置：

```
#undef INCLUDING_FILE
#define INCLUDING_FILE "file_name.h" 
```

这可以通过一个简单的 bash 脚本来完成，`.h`您可以在其中为每个文件编写此脚本，包括字符串中的文件名。

所以你的标题看起来像这样（使用 gcc）：

正常标题：

```
#undef INCLUDING_FILE
#define INCLUDING_FILE "normal.h"

#include "deprecated.h" 
```

已弃用的标头：

```
#ifdef INCLUDING_FILE
# pragma message "Internal bug: " INCLUDING_FILE " included " __FILE__ " which is deprecated"
#else
# pragma message "Note: you shouldn't included " __FILE__ " which is deprecated"
#endif

#undef INCLUDING_FILE
#define INCLUDING_FILE "normal.h"

#include "others.h" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:58:22.413

不确定确切的解决方案（可能`__FILE__`与其他类似的宏有关），但您可以尝试`#warning`将预处理器指令放入错误的头文件中。在编译期间，它会发出警告，通知您想要的任何内容。

# powershell - 获取 USB 端口名称和详细信息

> ID：13509861
> 
> 赞同：6
> 
> 时间：2012-11-22T09:49:02.447
> 
> 标签：powershell, usb

如何使用 Power Shell 脚本获取所有 USB 端口和端口名称等相关详细信息？

我试过了[`Win32_USBControllerDevice class`](https://docs.microsoft.com/en-us/windows/desktop/CIMWin32Prov/win32-usbcontrollerdevice)。但没有得到端口名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T10:22:14.560

```
gwmi Win32_USBControllerDevice |%{[wmi]($_.Dependent)} |select name,description,  deviceID, manufacturer | format-table -group by manufacturer 
```

## 一些解释

WMI 类`WIN32_USBControllerDevice`描述 USB 控制器 (The `Antecedent`) 与其逻辑设备`[CIM_LOGICALDEVICE]`(the `Dependent`)之间的连接

```
PS>gwmi Win32_USBControllerDevice |fl Antecedent,Dependent Antecedent : \\.\root\cimv2:Win32_USBController.DeviceID="PCI\\VEN_8086 &DEV_3A35&SUBSYS_02931028&REV_00\\3&172E68DD&0&E9" 依赖: \\.\root\cimv2:Win32_PnPEntity.DeviceID \ROOT_HUB\\4& 10B856B0&0"

```

现在您可以检查`win32_PnPEntity`以获取有关设备 ex 的更多信息：

```
gwmi Win32_PnPEntity -Filter "DeviceID='USBSTOR\\DISK&..'"

```

# c# - ASP Web 服务调用将被自动化

> ID：13509862
> 
> 赞同：1
> 
> 时间：2012-11-22T09:49:04.923
> 
> 标签：c#, asp.net, web-services

我有一个导入一些数据的 ASP Web 服务调用。

这通常由 Silverlight 客户端上的用户通过单击按钮来调用。

现在他们希望自动定期导入。

我知道我可以设置一个 Windows 服务来调用 Web 服务调用，但是还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:08:17.440

我只是通过两种方式制作了这样的应用程序：

1- Windows 控制台，它将作为批处理运行以调用 Web 服务 2- Windows 服务，正如您在问题中提到的那样

我注意到 web 服务比批处理文件更好，因为它更稳定

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-29T11:44:26.850

在silverlight Application 中创建DispatcherTimer 将webService 方法放在DispatcherTimer 对象的Tick 事件中。

请参阅此链接以获取 DispatcherTimeclass

[http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer%28VS.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer%28VS.95%29.aspx)

# silverlight - 如何使用silverlight mvvm中的按钮单击事件隐藏网格？

> ID：13509866
> 
> 赞同：0
> 
> 时间：2012-11-22T09:49:20.417
> 
> 标签：silverlight, mvvm

在我的项目（带有 MVVM 的 Silverlight5）中，我需要使用按钮单击事件隐藏网格。这里的按钮也位于网格中。无论如何要隐藏这个网格..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:08:38.123

您的视图模型应包含属性（例如，`IsGridVisible`）：

```
public bool IsGridVisible
{
   get {return _isGridVisible;}
   set {
          _isGridVisible = value;
          OnPropertyChanged("IsGridVisible");
       }
} 
```

然后，您可以绑定`Grid.Visibility`到您的`IsGridVisible`属性，想`BoolToVisibilityConverter`。

然后，您可以简单地在按钮的命令处理程序中切换状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:01:51.690

您可以使用网格的可见性属性。

```
grid.Visibility = Visibility.Collapsed; 
```

# php - 基于 PHP 的二十一点脚本 (ace)

> ID：13509869
> 
> 赞同：0
> 
> 时间：2012-11-22T09:49:32.040
> 
> 标签：php

我有个问题。我已经构建了这个 PHP 脚本，它工作得很好，除了 ace 不能正常工作。如果我抽到 5 A 5 5，它认为我有 26 等等。

有谁知道如何解决这个问题？评估手的功能：

```
function evaluateHand($hand) {

global $faces;
$value = 0;
foreach ($hand as $card) {

    $values = explode("|",$card);
    $value1= $values[0];

    if($value1=="Q" OR $value1=="J" OR $value1=="K"){
        $value = intval($value) + 10;
    }

    if ($value > 10 && $value1 == "A") {
        $value = intval($value) + 1;  // An ace can be 11 or 1
    }
    elseif($value < 12 && $value1 == "A"){
                   $value = intval($value) + 11;  // An ace can be 11 or 1
        }

     else {
        $value = intval($value) + intval($value1);
    }
}
return $value;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:55:00.683

对卡片列表进行排序，以便最后评估 A。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:56:01.603

为什么`global $faces;`？

要使您的代码正常工作，只需`asort($hand);`在函数顶部添加。这将对数组进行排序，将 A 放在最后。

编辑：你是对的。我已将函数更改为始终将 A 评估为最后。

```
function evaluateHand($hand) {
    global $faces;
    $value = 0;
    $aces = 0;
    foreach ($hand as $card) {
        $values = explode("|",$card);
        $value1= $values[0];

        if($value1 == "A") {
            $aces++; 
        }
        else {
            if($value1=="Q" OR $value1=="J" OR $value1=="K"){
                $value = intval($value) + 10;
            }
            else {
                $value = intval($value) + intval($value1);
            }
        }
    }

    while($aces > 0) {
        if($value > 10) {
            $value = intval($value) + 1;
        }
        elseif($value < 12){
               $value = intval($value) + 11;  // An ace can be 11 or 1
        }
        $aces--;
    }

    return $value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:56:55.893

正如您在其中一个评论中所说，单独的排序是行不通的，因为排序是这样的：0-9，然后是 A 到 Z，所以 Aces 仍然在其他数字之前被检查。

我修改了一些你的函数，所以它以这种方式工作得更好：

```
function evaluateHand($hand) {
        asort($hand);
        print_r($hand);

        $aces = 0;

        global $faces;

        $value = 0;
        foreach ($hand as $card) {

            $values = explode("|",$card);
            $value1= $values[0];

            if($value1=="Q" OR $value1=="J" OR $value1=="K"){
                $value = intval($value) + 10;
            } elseif($value1 == "A") {
                $aces++;
            } else {
                $value = intval($value) + intval($value1);
            }

        }

        if($aces > 0){
            for($a = 0; $a < $aces; $a++){
                if ($value > 10) {
                    $value = intval($value) + 1;  // An ace can be 11 or 1
                }elseif($value < 12){
                    $value = intval($value) + 11;  // An ace can be 11 or 1
                }
            }
        }

        return $value;
    } 
```

我所做的是创建一个 Aces 计数器（$aces = 0），当有一个 Ace 时，我们跳过总和，并增加计数器，在 foreach 循环之后，我们根据手牌的总值对所需的值求和，另一个循环基于我们在数组中的 ace。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T10:02:28.940

正如昆汀所说，最后处理 A。还要数一数手中有多少 A（以避免给一个 A 11 并在你有三个 A 时溢出，而不是计算 1+1+1）。将所有 ace 一起处理，将剩下的点数除以 ace 的数量。如果结果优于 11，则将 11 分配给一个，将 1 分配给其他。如果不是，则给所有 A。

# c# - 发送 SMTP 错误的电子邮件

> ID：13509873
> 
> 赞同：0
> 
> 时间：2012-11-22T09:49:39.730
> 
> 标签：c#, asp.net, email, smtp

我制作了一个网页，在其中尝试使用 SMTP 发送邮件。最初，在我给出硬代码的地方并没有给我一个错误。但是当我尝试从文本字段中获取值时（我也在使用多视图，因为我的页面上有标签），现在该`To`字段给了我一个错误。

我试图从以前发布的查询中解决我的错误，但仍然没有。

1.  [时间：2019-05-10 标签：c#asp.net转换为MailAddress](https://stackoverflow.com/questions/9582755/c-sharp-asp-net-convert-to-mailaddress)
2.  [http://forums.asp.net/t/1258190.aspx/1](http://forums.asp.net/t/1258190.aspx/1)
3.  [http://msdn.microsoft.com/en-us/library/system.net.mail.mailaddress.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.mailaddress.aspx)

我已经尝试了几乎所有东西，但我无法摆脱这个错误。

`Property or indexer 'System.Net.Mail.MailMessage.To' cannot be assigned to -- it is read only.`

我的前端代码是：

```
 <tr>
  <td class="style15"> RECEIVER </td>
  <td> <asp:TextBox ID="txtReceiver" runat="server" CssClass="Textbox1" Width="414px"></asp:TextBox>
  <asp:LinkButton ID="lbEdit5" runat="server" OnClick="lbEdit5_Click"> Edit </asp:LinkButton>
  </td>
  </tr>

  <tr>
  <td class="style15">
   TO MAIL
  </td>
  <td>
  <asp:TextBox ID="txtTo" runat="server" CssClass="Textbox1" Width="414px"></asp:TextBox>
  <asp:LinkButton ID="lbEdit6" runat="server" OnClick="lbEdit6_Click"> Edit
  </asp:LinkButton>
  <asp:RegularExpressionValidator ID="regexTo" runat="server" 
   ControlToValidate="txtTo" Display="Dynamic" ErrorMessage="Enter an E-Mail Address" 
   ValidationExpression="\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*"> </asp:RegularExpressionValidator>
  <asp:RequiredFieldValidator ID="reqMailTo" runat="server" 
  ControlToValidate="txtTo" ErrorMessage="Enter a Mailing Address"></asp:RequiredFieldValidator>
  </td>
  </tr> 
```

我的后端代码是：

```
 protected void btnSMail_Click(object sender, EventArgs e)
{
    string smtpadd = txtSMTP.Text;

    try
    {
        if (smtpadd != "" && smtpadd != null)
        {
            MailMessage mm = new MailMessage();
            SmtpClient sc = new SmtpClient(txtSMTP.Text);

            if (!fupAttach.HasFile)
            {
                FileStream fs = new FileStream("D:\\DEV\\New.xml", FileMode.Open, FileAccess.Read);
                Attachment attch = new Attachment(fs, "License Generation in XML", MediaTypeNames.Application.Octet);
                mm.Attachments.Add(attch);
            }

            //else
            //{
            //    FileStream fd = new FileStream();
            //}

            mm.From = new MailAddress(txtMailAdd.Text, txtFrom.Text);
            mm.Subject = txtSub.Text;
            mm.To = new MailAddress(txtTo.Text,txtReceiver.Text);
            //mm.To= new MailAddress(txtTo.Text);
            mm.Body = txtBody.Text;
            lblMailFail.Text = "Mail Successfully Sent";
        }

        else
        {
            lblMailFail.Text = "Enter an SMTP IP";
        }
    }

    catch (Exception blah)
    {
        lblMailFail.Text = blah.ToString();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:14:35.700

`MailMessage.To`是一个只读属性。它返回您添加到邮件中的 MailAdresses 列表。

要添加 MailAddress，您应该使用：

```
mm.To.Add(new MailAddress(txtTo.Text, txtReceiver.Text)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:52:54.240

试试这个：

```
mm.To.Add("testemail@domain.com"); 
```

# javascript - jQuery 移动活动指示器未在 android 中显示

> ID：13509877
> 
> 赞同：13
> 
> 时间：2012-11-22T09:50:02.197
> 
> 标签：javascript, android, cordova, jquery-mobile

我尝试在我的应用程序中显示活动指示器。我正在使用`activity.js`活动指示器。那个在浏览器和 iPhone 上运行良好，但在 Android 设备上不运行。

我不知道为什么指标在 android 设备中不起作用。

这是我的活动指示器示例代码：

```
function showIndicator() {
    console.log("inside show indicator");
    applyOverLay();
    var showIndicator = document.createElement("div");
    showIndicator.setAttribute("class", "activity-indicator");
    document.body.appendChild(showIndicator);
    $('.activity-indicator').activity({
        width: 5,
        space: 1,
        length: 3,
        color: '#fff'
    });
}

function applyOverLay() {
    var overlay = document.createElement("div");
    overlay.setAttribute("id", "overlayAttr");
    overlay.setAttribute("class", "overlay");
    document.body.appendChild(overlay);
}

function hideindicator() {
    $('.activity-indicator').activity(false);
    setTimeout(function() { $(".activity-indicator").empty().remove(); }, 0);
    setTimeout(function() { $(".overlay").empty().remove(); }, 0);
}

function loadhtmlpage() {   
    //location.href='#refillReminder';
    $.mobile.changePage("#refillReminder"); 
    showIndicator();
    hideindicator();
}

style.css:

.activity-indicator {
    padding: 10px;
    position: absolute;
    top: 50%;
    left: 45%;
    z-index: 1001;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T05:05:44.813

我已使用以下代码在 Android 上显示本机活动指示器..试试这个..它可能会有所帮助..

```
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {
    $(document).bind("ajaxSend", function() {
        navigator.notification.activityStart("App Name","Loading...");
     }).bind("ajaxStop", function() {
        navigator.notification.activityStop();
    }).bind("ajaxError", function() {
        navigator.notification.activityStop();
     });    

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-27T13:03:29.537

与桌面浏览器相比，Android 浏览器在使用 javascript 创建元素和设置样式时稍慢。因此，对于您的情况，指示器可能在加载 android 浏览器时需要一些时间，但由于我提到的问题，请求已经在这段时间内完成并且指示器没有机会出现，请尝试使用 css 样式，添加/删除类并尽可能避免使用 javascript 进行内联 css 样式。对于 Activity loader 尝试这样的事情：

[http://jsbin.com/oPIyuqUk/1/edit?html,css,js,输出](http://jsbin.com/oPIyuqUk/1/edit?html,css,js,output)

或在这里尝试 Jquery 移动加载器：

[http://demos.jquerymobile.com/1.2.1/docs/pages/loader.html](http://demos.jquerymobile.com/1.2.1/docs/pages/loader.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-22T14:45:02.877

您可以使用默认的 jquery 移动活动指示器作为后备，使用：

```
$.mobile.loading('hide'); //to hide the spinner
$.mobile.loading('show'); //to show the spinner 
```

该组件非常灵活，您可以使用主题或覆盖旋转 gif。

更多信息在这里[Jquery Mobile Loader](http://view.jquerymobile.com/1.3.2/dist/demos/widgets/loader/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-24T20:27:33.747

也许您应该尝试在 loadhtmlpage 方法中显示指示器，**并**在**#refillReminder jquery 页面中的****pageshow**方法中添加一个处理程序以将其关闭。

 ****我使用了 jQuery Mobile 默认指示器，您尝试在同一页面中显示，在像 ajax 调用这样的长操作之前，并将其隐藏在 always 处理程序中。

同样，您在以 0 超时显示它之后尝试将其隐藏起来似乎很奇怪。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-14T18:45:29.080

Androide设备很慢

也许尝试在这里优化您的代码：

[http://net.tutsplus.com/tutorials/javascript-ajax/10-ways-to-instantly-increase-your-jquery-performance/](http://net.tutsplus.com/tutorials/javascript-ajax/10-ways-to-instantly-increase-your-jquery-performance/)****

# mysql - 使用 MySQL 和 Capistrano 进行数据库部署

> ID：13509878
> 
> 赞同：0
> 
> 时间：2012-11-22T09:50:06.227
> 
> 标签：mysql, deployment, version-control, capistrano, liquibase

我已经设置了 Capistrano，现在使用它来部署到登台和实时服务器，这对我的 devt 工作流程来说是一个很大的改进。我现在想知道的是如何最好地处理数据库部署。我有一个看起来不错的 Liquibase，但我不完全确定最好的方法是什么。我应该将数据从实时同步到登台和开发服务器，以便它们是实时站点的正确克隆吗？此外，架构更改通常会是版本化并部署到登台/直播的事物类型吗？任何关于最佳实践和你们所做的事情的指示将不胜感激。我应该补充一点，我主要使用 MySQL 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:03:19.180

Liquibase 并不是真正设计用于将生产数据库与开发环境“同步”。相反，它旨在跟踪对开发环境的所有更改，以便可以在生产中忠实地复制它们。

话虽如此，liquibase 确实包含一些强大的工具，用于提取和比较数据库。但是，此功能旨在支持初始化新项目或发现可以添加到现有项目中的缺失“变更集”，以便“同步”两个数据库。

发现 liquibase 的最佳方法是尝试一下。出于您的目的，您将查看命令行实现。（如果您想在 Capistrano 中嵌入 liquibase，那么您只需要 liquibase jar 和与您的数据库关联的 JDBC jar。）

附言

下面是一个在 liquibase 中比较两个数据库的例子：

*   [使用 liquibase 比较数据库并生成 sql 脚本](https://stackoverflow.com/questions/8397488/comparing-databases-and-genrating-sql-script-using-liquibase/8408334#8408334)

# iphone - iPhone5模拟器中的谷歌地图

> ID：13509879
> 
> 赞同：1
> 
> 时间：2012-11-22T09:50:10.860
> 
> 标签：iphone, google-maps, touch, sencha-touch-2

我遇到了谷歌地图的问题..我正在使用带有cordova lib的Xcode 4.5..我开发了一个运行良好的应用程序..但我有一个谷歌地图的问题，即它在谷歌浏览器，野生动物园中也能很好地工作，但它在 iPhone5 模拟器中不起作用.. 看看代码。

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=true"></script>
Layout:'fit',// also tried vbox,card,hbox
{
xtype:'map',
useCurrentLocation:true,
}, 
```

如果有人知道，请告诉我出了什么问题。

# html - 如何将 html 单选按钮垂直对齐到它的标签？

> ID：13509883
> 
> 赞同：106
> 
> 时间：2012-11-22T09:50:18.393
> 
> 标签：html, css, forms, xhtml, radio-button

我有一个带有单选按钮的表单，它们与它们的标签在同一行。然而，单选按钮并未与其标签垂直对齐，如下面的屏幕截图所示。

![单选按钮。](../Images/a8528b1e7436b093d44b348fe5ab4e6c.png)

如何将单选按钮与其标签垂直对齐？

**编辑：**

这是html代码：

```
<input checked="checked" type="radio" name="user_level" id="rd1" value="1"/>
<label for="rd1">radio 1</label><br/>
<input type="radio" name="user_level" id="rd2" value="2"/>
<label for="rd2">radio 2</label><br/>
<input type="radio" name="user_level" id="rd3" value="3"/>
<label for="rd3">radio 3</label><br/> 
```

和CSS代码：

```
label{
    padding:5px;
    color:#222;
    font-family:corbel,sans-serif;
    font-size: 14px;
    margin: 10px;
} 
```

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2013-02-07T22:22:34.440

尝试这个：

```
input[type="radio"] {
  margin-top: -1px;
  vertical-align: middle;
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-22T13:52:55.430

我知道我选择了 menuka devinda 的答案，但查看下面的评论我同意并试图提出更好的解决方案。我设法想出了这个，在我看来这是一个更优雅的解决方案：

```
input[type='radio'], label{   
    vertical-align: baseline;
    padding: 10px;
    margin: 10px;
 } 
```

感谢所有提供答案的人，您的答案并没有被忽视。如果您仍然有任何其他想法，请随时为这个问题添加您自己的答案。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-11-22T10:05:14.050

```
input {
    display: table-cell;
    vertical-align: middle
} 
```

为所有收音机上课。这将适用于 html 页面上的所有单选按钮。

[小提琴](http://jsfiddle.net/vusan/J5Tvn/)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-02-23T19:53:30.637

不妨在答案中添加一些弹性。

```
.Radio {
  display: inline-flex;
  align-items: center;
}

.Radio--large {
  font-size: 2rem;
}

.Radio-Input {
  margin: 0 0.5rem 0;
}
```

```
<div>
  <label class="Radio" for="sex-female">
    <input class="Radio-Input" type="radio" id="sex-female" name="sex" value="female" />
    Female
  </label>

  <label class="Radio" for="sex-male">
    <input class="Radio-Input" type="radio" id="sex-male" name="sex" value="male" />
    Male
  </label>
</div>

<div>
  <label class="Radio Radio--large" for="sex-female2">
    <input class="Radio-Input" type="radio" id="sex-female2" name="sex" value="female" />
    Female
  </label>

  <label class="Radio Radio--large" for="sex-male2">
    <input class="Radio-Input" type="radio" id="sex-male2" name="sex" value="male" />
    Male
  </label>
</div>
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-11-22T10:02:38.180

尝试添加`vertical-align:top`到 CSS

```
label{
    padding:5px;
    color:#222;
    font-family:corbel,sans-serif;
    font-size: 14px;
    margin: 10px;
    vertical-align:top;
}​ 
```

测试：http: [//jsfiddle.net/muthkum/heAWP/](http://jsfiddle.net/muthkum/heAWP/)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-11-22T10:06:21.090

你可以这样做：

```
input {
    vertical-align:middle;
}

label{
    color:#222;
    font-family:corbel,sans-serif;
    font-size: 14px;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-06-19T13:14:03.170

我喜欢将输入放在标签内（额外的好处：现在您不需要`for`标签上的属性），然后放入`vertical-align: middle`输入。

```
label > input[type=radio] {
    vertical-align: middle;
    margin-top: -2px;
}

#d2 {  
    font-size: 30px;
}
```

```
<div>
	<label><input type="radio" name="radio" value="1">Good</label>
	<label><input type="radio" name="radio" value="2">Excellent</label>
<div>
<br>
<div id="d2">
	<label><input type="radio" name="radio2" value="1">Good</label>
	<label><input type="radio" name="radio2" value="2">Excellent</label>
<div>
```

（这`-2px margin-top`是一个品味问题。）

我真正喜欢的另一个选择是使用桌子。（握住你的音叉！这真的很棒！）这确实意味着你需要将`for`属性添加到所有标签中，并将`id`s 添加到输入中。对于多行文本内容较长的标签，我建议使用此选项。

```
<table><tr><td>
    <input id="radioOption" name="radioOption" type="radio" />
    </td><td>
    <label for="radioOption">                     
        Really good option
    </label>
</td></tr></table>
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-06-03T13:27:44.403

```
label, input {
    vertical-align: middle;
} 
```

我只是将框的垂直中点与父框的基线加上父框的一半 x 高度（en.wikipedia.org/wiki/X-height）对齐。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-11-22T09:58:23.400

像这样的东西应该工作

CSS：

```
input {
    float: left;
    clear: left;
    width: 50px;
    line-height: 20px;
}

label {
    float: left;
    vertical-align: middle;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-07-19T23:43:35.647

很多这些答案都说使用`vertical-align: middle;`，它使对齐接近但对我来说它仍然偏离了几个像素。我用来在标签和单选输入之间实现真正的 1 对 1 对齐的方法是这样的，其中`vertical-align: top;`：

```
label, label>input{
    font-size: 20px;
    display: inline-block;
    margin: 0;
    line-height: 28px;
    height: 28px;
    vertical-align: top;
}
```

```
<h1>How are you?</h1>
<fieldset>
	<legend>Your response:</legend>
	<label for="radChoiceGood">
		<input type="radio" id="radChoiceGood" name="radChoices" value="Good">Good
	</label>

	<label for="radChoiceExcellent">
		<input type="radio" id="radChoiceExcellent" name="radChoices" value="Excellent">Excellent
	</label>

	<label for="radChoiceOk">
		<input type="radio" id="radChoiceOk" name="radChoices" value="OK">OK
	</label>
</fieldset>
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-11-08T11:42:55.737

虽然我同意不应该将表格用于设计布局，这与普遍认为的相反，但它们确实通过了验证。即不推荐使用 table 标签。对齐单选按钮的最佳方法是使用垂直对齐中间 CSS 并在输入元素上调整边距。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2012-11-22T09:53:12.093

我认为，添加`display:inline-block`标签并给予它们`padding-top`可以解决这个问题。此外，只需`line-height`在标签上设置 也可以。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2012-11-22T10:00:31.233

有几种方法，我更喜欢使用 html 中的表格。您可以添加两个列三行表并放置单选按钮和标签。

```
<table border="0">

<tr>
  <td><input type="radio" name="sex" value="1"></td>
  <td>radio1</td>

</tr>
<tr>
  <td><input type="radio" name="sex" value="2"></td>
  <td>radio2</td>

</tr>
</table> 
```

# c# - Winform 问题转换值并显示它们

> ID：13509889
> 
> 赞同：1
> 
> 时间：2012-11-22T09:50:37.523
> 
> 标签：c#, winforms

对不起，我的标题有点模糊，但我想要做的可能需要一段来解释。

目前我正在尝试做的是：

*   从文本框中收集用户
*   将输入的值除以 2
*   在标签上显示这个新值

所以，为了获得用户价值，我这样做了：

```
 private void userLengthTextBox_TextChanged(object sender, EventArgs e)
    {
        _userLength = userLengthTextBox.Text;
    } 
```

这是作为一个字符串进来的。然后在一个新函数中，我将此字符串转换为单个字符串（需要它是一个浮点数），计算输入值的一半，然后将其存储在一个新的浮点数中。

像这样：

```
 _oldTlX = Convert.ToSingle(_userLength);
    _tlX = _oldTlX / 2; 
```

然后，当我按下按钮时，我试图让这个值显示在标签中：

```
 _valueLabel.Text = Convert.ToString(_tlX); 
```

但是，当我按下按钮时，值仍然为 0。不管我放什么。据我所知，我已将所需的值转换为所需的正确格式，但它仍然说我做错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:01:10.360

我建议您在内部使用 double ，然后使用格式字符串以适当的方式显示结果：

```
double _oldTlX;
if (!double.TryParse(_userLength, out _oldTlX)) return;
double _tlX = _oldTlX / 2;

_valueLabel.Text = string.Format("{0:f3}", _tlX); // 3 decimal positions 
```

您还可以在[MSDN](http://msdn.microsoft.com/en-us/library/s8s7t687%28v=vs.71%29.aspx)上查看如何格式化数字结果。

希望能帮助到你。

# javascript - 如何使用jquery获取gridview内标签的文本值

> ID：13509890
> 
> 赞同：1
> 
> 时间：2012-11-22T09:50:38.683
> 
> 标签：javascript, jquery, asp.net

我想获取标签的文本值。这个标签放在gridview中。然后我如何通过 Jquery 单击按钮获得它的值。该按钮也放置在gridview 内。

这是我的代码：

```
 <asp:GridView ID="gvCustomers" runat="server" AutoGenerateColumns="false">
                            <Columns>
                                <asp:TemplateField HeaderText="ID">
                                    <ItemTemplate>
                                        <asp:Label ID="lblBEid" Text='<%# Eval("BusinessEntityID") %>' runat="server" />
                                    </ItemTemplate>
                                </asp:TemplateField>
                                <asp:TemplateField HeaderText="Name">
                                    <ItemTemplate>
                                        <asp:Label ID="lblName" Text='<%# Eval("FirstName") %>' runat="server" />
                                    </ItemTemplate>
                                </asp:TemplateField>
                                <asp:TemplateField HeaderText="Modified Date">
                                    <ItemTemplate>
                                        <asp:Label ID="lblDate" Text='<%# Eval("ModifiedDate") %>' runat="server" />
                                        <asp:LinkButton ID="lnk" Text="Click Here" runat="server" OnClientClick="getValue();" />
                                    </ItemTemplate>
                                </asp:TemplateField>
                            </Columns>
                        </asp:GridView> 
```

请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:01:51.263

我想这个会起作用的。但它只是原始代码。我没有测试过。

```
 //LinkButton
<asp:LinkButton ID="lnk" Text="Click Here" runat="server" OnClientClick="getValue(this);" />

     //function
    <script type="text/javascript">
        function getValue(element){
            var tr = $(element).closest('tr');
            var ID = $(tr).find('span[id*="lblBEid"]').text();
            var Name = $(tr).find('span[id*="lblName"]').text();
            var Date = $(tr).find('span[id*="lblDate"]').text();
            alert(ID+','+Name+','+Date);
        }
    </script> 
```

如果您可以为每一行提供一个 css 类，那就更好了。喜欢：RowStyle-CssClass="grid-row"

然后我可以将我的代码更改为：

```
var tr = $(element).closest('.grid-row'); 
```

并且会更加稳定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:54:25.130

您需要**[RowDataBound](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)**事件，您可以在其中访问由 asp.net 创建的每一行。

**在后面的代码中**

```
protected void gvCustomers_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if ((e.Row.RowType == DataControlRowType.DataRow))
    {
       LinkButton lnk = (LinkButton) e.Row.FindControl("lnk");
       Label lblName= (Label) e.Row.FindControl("lblName");                      
       lnk.Attributes.Add("onclick", "getValue(" + lblName.ClientID + ");"
    }

 } 
```

**在 JavaScript 中**

```
function getValue(lblId)
{
     alert($(lblId).text());
} 
```

# java - ActiveMQ：如何在客户端设置死信策略？

> ID：13509898
> 
> 赞同：3
> 
> 时间：2012-11-22T09:51:08.670
> 
> 标签：java, jms, activemq

我正在实现未发送的消息处理，但有一个问题。死信策略可以在配置文件的服务器端设置（通过队列名称模式），但我的消息队列是动态创建的，并且它们的名称在配置阶段是未知的。所以我想知道是否可以从客户端设置死信策略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:59:34.973

这可能不是您想要的，但根据[this](http://activemq.apache.org/message-redelivery-and-dlq-handling.html)，您应该能够`>`在配置中使用通配符，`IndividualDeadLetterStrategy`以便每个队列都有自己的 DLQ。请参阅此部分：

> 如果您愿意，可以使用通配符应用此策略，以便所有队列都有自己的死信队列，如下例所示。

```
<broker...>
  <destinationPolicy>
    <policyMap>
      <policyEntries>
        <!-- Set the following policy on all queues using the '>' wildcard -->
        <policyEntry queue=">">
          <deadLetterStrategy>
            <!--
              Use the prefix 'DLQ.' for the destination name, and make
              the DLQ a queue rather than a topic
            -->
            <individualDeadLetterStrategy
              queuePrefix="DLQ." useQueueForQueueMessages="true" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-18T05:21:08.397

在此[链接](http://www.mulesoft.org/mule-activemq-integration-examples)中，您将找到如何配置它的示例，这是摘录：

```
<spring:bean id="AmqDeadLetterStrategy"
    class="org.apache.activemq.broker.region.policy.IndividualDeadLetterStrategy"
                     p:queuePrefix="DLQ." />

<spring:bean id="AmqDefaultPolicyEntry"
                     class="org.apache.activemq.broker.region.policy.PolicyEntry"
                     p:queue="jobs.*"
                     p:deadLetterStrategy-ref="AmqDeadLetterStrategy" /> 
```

# c# - 打开和关闭 WPF DataGrid 背景图像？

> ID：13509902
> 
> 赞同：5
> 
> 时间：2012-11-22T09:51:24.383
> 
> 标签：c#, .net, wpf, xaml

我有一个 DataGrid，当它为空时，我希望显示背景图像。当 DataGrid 被填充时，我希望图像消失，如果 DataGrid 再次被清除，它会重新出现。

这可以通过 XAML 或 C# 实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:07:51.637

如果您使用 MVVM 设计模式，则通常应避免使用代码隐藏。不过，在 XAML 中执行此操作相当简单：

将 Image 元素放在数据网格上（将两者放在一个 Grid 中，并将 Image 放在 DataGrid 的正下方），然后使用新转换器将 Image 的 Visibility 属性绑定到 DataGrid 的 Items.Count 属性：

```
<Grid>
    <Grid.Resources>
        <local:GridCountToVisibilityConverter x:Key="GridCountToVisibilityConverter"/>
    </Grid.Resources>
    <DataGrid x:Name="grid"/>
    <Image Source="image.jpg" Visibility="{Binding ElementName=grid, Path=Items.Count, Converter={StaticResource GridCountToVisibilityConverter}}" />
</Grid> 
```

转换器看起来像这样：

```
public class GridCountToVisibilityConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    { 
        var count = (int)value;
        return count == 0? Visibility.Visible : Visibility.Collapsed;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T09:56:17.450

```
if(myDataGridView.Rows.Count == 0) {

dataGrid.Background = new ImageBrush("exampleImage.png");

}

else {

// it is not empty 

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:54:50.030

我假设您正在使用 WPF，使用 Windows 表单会非常困难。

```
 System.Windows.Controls.DataGrid dataGrid = new System.Windows.Controls.DataGrid();

    public void Initialize()
    {
        dataGrid.Loaded += new System.Windows.RoutedEventHandler(dataGrid_Loaded);
        dataGrid.Unloaded += new System.Windows.RoutedEventHandler(dataGrid_Unloaded);

        // Show image right away.
        this.dataGrid_Unloaded(null, null);
    }

    void dataGrid_Unloaded(object sender, System.Windows.RoutedEventArgs e)
    {
        // Provide some image here.
        dataGrid.Background = new System.Windows.Media.ImageBrush();
    }

    void dataGrid_Loaded(object sender, System.Windows.RoutedEventArgs e)
    {
        dataGrid.Background = System.Windows.Media.Brushes.Gray;
    } 
```

# iphone - 使用 iPhone SDK 获取 HTML 页面的特定部分？

> ID：13509903
> 
> 赞同：0
> 
> 时间：2012-11-22T09:51:25.290
> 
> 标签：iphone, html, objective-c, ios, xcode

在我的应用程序中，我有一些网页的 URL，我想通过识别 html 标签从该 URL（其 html 页面）中仅获取特定的部分/部分。

例如，我想`<div id="content"> to </div>`按照 html 源代码获取部分。这样我就可以将其保存在另一个文件中。

**例如我的网址是**

**1)** [http://www.makepartsfast.com/2012/09/4337/more-3d-printing-in-metals-ex-one-introduces-the-m-flex-3d-printing-system/](http://www.makepartsfast.com/2012/09/4337/more-3d-printing-in-metals-ex-one-introduces-the-m-flex-3d-printing-system/)

**2)** [http://www.windpowerengineering.com/policy/new-study-shows-the-benefits-of-wind-energy-in-kansas/](http://www.windpowerengineering.com/policy/new-study-shows-the-benefits-of-wind-energy-in-kansas/)

**3)** [http://www.windpowerengineering.com/design/mechanical/bearings/podcast-for-windtech-2012-generator-maintenance/](http://www.windpowerengineering.com/design/mechanical/bearings/podcast-for-windtech-2012-generator-maintenance/)

所有这些 URL 都会打开文章 html 页面。但我只想显示**HTML 页面的主要内容**。

我也通过我的以下代码仅针对某些 URL 取得了成功。

**我的代码：**

```
NSString *originalString = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://www.windpowerengineering.com/uncategorized/how-superfinishing-boosts-component-reliability/"] encoding:NSUTF8StringEncoding error:nil];

NSScanner *scanner = [NSScanner scannerWithString:originalString];
    NSString *extractedString = nil;

    [scanner scanUpToString:@"<div id=\"content\">" intoString:nil];
    [scanner scanString:@"<div id=\"content\">" intoString:nil];

    [scanner scanUpToString:@"<div style=\"clear:both;\">" intoString:&extractedString];

    if (extractedString) 
    {
        // string was extracted
        NSLog(@"%@", extractedString);
    } 
```

但是不同的页面可能有多个 `<div style=\"clear:both;\">`标签。因此，当该方法遇到该标签时，它会显示我只显示该标签之前的内容。

**建议**现在，我想计算所有`<div>`标签并尝试从该 HTML 页面获取所有主要内容。但我很困惑这样做。

我该怎么做？

帮我！！

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T06:53:39.550

我使用了 AFFeedParsing 方法。因为所有文章都是提要。您可以在以下位置找到示例代码

1.  [可可控制](http://cocoacontrols.com)

# python - 在 excel 中打印 python 脚本输出

> ID：13509904
> 
> 赞同：0
> 
> 时间：2012-11-22T09:51:27.107
> 
> 标签：python

我想在 excelfile 中打印 python 脚本的输出。我尝试了这段代码，但它从选定的输入文件中读取每一行，然后将其写入一个名为 output.xls 的新 Excel 文件？谢谢你

```
 import xlwt
 from Tkinter import *            
 from tkFileDialog   import askopenfilename      

 def callback():
     filename = askopenfilename()
     wb = xlwt.Workbook()
     ws0 = wb.add_sheet('Sheet1')

     with open(filename, 'r') as f:
         for i, line in enumerate(f):
             ws0.write(i, 0, line.strip())
     wb.save('output.xls')

 errmsg = 'Error!'
 a = Button(text='click me', command=callback)
 a.pack()
 mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:15:39.680

```
import xlwt

x = (("a",1),("b",2),("c",3))

wb = xlwt.Workbook()
ws = wb.add_sheet("test")
for i, row in enumerate(x):
    for j, col in enumerate(row):
        ws.write(i, j, col)
wb.save("sample.xls") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:06:12.023

如果您的意思与您正在做的相反 - 例如，从 excel 文件中读取行，那么您可以使用它（根据您的代码将您生成的文件作为输入）

```
import xlrd

wb = xlrd.open_workbook('output.xls')
ws = wb.sheet_by_name('Sheet1')
for rowno in xrange(ws.nrows):
    print ws.row_values(rowno) 
```

# actionscript-3 - 在 Flash 中从另一个 apk 安装 apk

> ID：13509905
> 
> 赞同：0
> 
> 时间：2012-11-22T09:51:33.863
> 
> 标签：actionscript-3, air

是否可以在**AS3/AIR**中从已安装的文件中调用另一个 .apk 文件？

> 我有一个 apk（在 AIR 2.6 中开发），它会要求用户登录，只有当所有要求都正确输入时，用户才能访问或安装主游戏（这是另一个 apk）。我浏览过很多网站，但都没有得到满意的结果（尤其是 FLASH）。

如果我能获得有关我的主题的任何帮助或教程，那将是很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:14:42.450

简短的回答是否定的 - 您不能安装另一个 APK，但您始终可以将用户引导到另一个 APK 并要求他安装 - 用户需要允许安装不是来自 Play 商店。或者您可能在同一个 APK 中拥有所有内容，并在成功验证凭据后允许访问 - 无论哪种方式，您为什么想要这个？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-10T05:10:11.347

使用此 ANE [https://github.com/jakehilton/PackageManagerANE](https://github.com/jakehilton/PackageManagerANE)来执行此操作。您可以调用您的 .apk 在您的设备上开始安装过程。

# c# - 是否可以在 Monocross Apps 中播放 GIF 或 Flash 格式的图像？

> ID：13509907
> 
> 赞同：1
> 
> 时间：2012-11-22T09:51:41.070
> 
> 标签：c#, animation, monocross

我想将播放 gif 格式添加到我的 monocross 应用程序中。这样它就可以支持iphone android和windows phone，这可以做到吗，我该怎么做？

我是Monocross的新手请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:13:59.490

您可以使用 VideoView 在 Android 中播放动画 GIF 图像 - 因此通过扩展您也可以在 MonoDroid 和 MonoCross 中执行此操作。

您无法在 WindowsPhone 中开箱即用地解码和显示 GIF - 但您可以使用 nuget 的图像库之一。我不知道这些是否适用于动画 GIF - 我猜他们不会。

* * *

我的直觉是建议您不要**使用**动画 Gif - 抱歉，但它们是上世纪的技术，应该留在那里[http://www.lingscars.com/](http://www.lingscars.com/)！

相反，请考虑使用您自己的定格动画，使用短视频或查看在每个平台上本地编码动画（我已经看到一些在 jscript 中跨平台动画的尝试 - 例如[http://speckyboy.com/2012 /05/09/jcsml-a-new-cross-platform-animation-library/](http://speckyboy.com/2012/05/09/jcsml-a-new-cross-platform-animation-library/) - 看到 C# 版本也很酷！）

# openlayers - OpenLayers：不显示 WMS 图层

> ID：13509908
> 
> 赞同：3
> 
> 时间：2012-11-22T09:51:44.163
> 
> 标签：openlayers, wms

我正在尝试使用 OpenLayers 查看 WMS 图层，但没有显示任何内容。控制台中不显示任何错误消息。此外，当我尝试使用浏览器 (Firefox) 访问请求字符串时，地图显示得很好。这是代码。

```
<html>
<head><title>OpenLayers WMS test</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<script src="http://openlayers.org/api/OpenLayers.js"></script>
<script>
function init() {
var map = new OpenLayers.Map("maparea");
var wms = new OpenLayers.Layer.WMS("Maakuntakaava", "http://kartat.lounaispaikka.fi/wms/maakuntakaava",
            {'format':'png', 'layers':'mk_tiet', width:600, height:600,
            bbox:'224609.4426922916318290,6702129.8832325218245387,265885.8128110636025667,6720672.7353315912187099'},
            { projection: new OpenLayers.Projection("EPSG:3067"),
            units: "m",
            maxResolution: 1000,
            maxExtent: new OpenLayers.Bounds(224609.4426922916318290,6702129.8832325218245387,265885.8128110636025667,6720672.7353315912187099)});
map.addLayer(wms);
alert("Request string: " + wms.getFullRequestString());
}
</script>
</head>
<body onload="init()">
<h1>WMS test</h1>
<div id="maparea"></div>
</body>
</html> 
```

谁能告诉我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T11:20:18.900

地图已正确创建，但您尚未缩放到正确的位置，因此您看不到任何东西。使用 zoomToMaxExtent() 来适应视图：

```
map.addLayer(wms);
map.zoomToMaxExtent(); 
```

# android - 我无法访问 DATA 目录

> ID：13509911
> 
> 赞同：2
> 
> 时间：2012-11-22T09:51:54.067
> 
> 标签：android, eclipse

我手机的数据目录不会让我访问 adb shell，也不会访问 DDMS eclipse，我需要查看他内部的数据库，因为我可以修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:53:39.643

您需要 root 设备才能查看数据目录。您可以在模拟器中看到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:56:08.347

实际上你的设备是刷了usr操作系统镜像的，在usr镜像设备制造商已经限制了用户数据的文件访问权限，所以你不能在eclipse和shell下列出/data路径的这些内容。

如果您的设备是 Nexus 和兼容设备，您可以按照官方 flash 指南[url](http://source.android.com/source/building-devices.html) 到 flash 设备。

您可以“根”您的设备，在您的设备上搜索它，您将获得有关“如何根”的大量建议。

# web-services - 在 tomcat 上运行的网站与同一台机器但不同服务器上的另一个网站通信

> ID：13509916
> 
> 赞同：1
> 
> 时间：2012-11-22T09:52:08.113
> 
> 标签：web-services, tomcat, proxy, webserver, eclipse-virgo

我的机器上安装了两台服务器，Tomcat 和 Virgo（一个 OSGi 网络服务器），它们在不同的端口上运行。我需要一个部署在 Tomcat 上的网站来链接到部署在另一台服务器上的另一个网站（未映射到任何地址），我该怎么做？解析客户端服务器的IP地址？什么是正确的方法？谢谢。

**要求是：浏览一个应用程序的用户需要能够点击另一个应用程序的链接。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:20:16.860

来自@Martin：

```
var url='//'+document.domain+':8080/otherapp/'; 
```

# java - Scala/Jerkson：在 Json 中指定 Date 对象的格式

> ID：13509922
> 
> 赞同：3
> 
> 时间：2012-11-22T09:52:20.983
> 
> 标签：java, json, scala, datetime, jackson

我正在`Date`使用[Jerkson Json 库](https://github.com/codahale/jerkson)（[Jackson](http://wiki.fasterxml.com/JacksonHome)的包装器）对包含 a 的对象进行序列化：

```
import com.codahale.jerkson.Json
import java.util.Date

case class JTest(
    val dTest: Date
)

val jt = new JTest(new Date())
println(Json.generate(jt)) 
```

结果是：

```
{"dTest":1353576079168} 
```

**有什么办法可以指定格式或覆盖生成函数？**

我意识到 Json 没有正确的 Date 类型，因此输出（以毫秒为单位的 unix 时间）是“正确的”。我想将我的日期序列化为[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)（带时间/时区）格式的字符串：`2007-04-05T01:12:22+0100`，因为它易于解析且易于阅读。`Date`的 toString 吐出`Thu Nov 22 10:27:54 CET 2012`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:30:48.147

这里有两个问题。首先，ISO8601 日期的小问题——这些可以使用 SimpleDateFormat 来实现，例如

```
import java.text._
import java.util._
val d1 = new Date()
val sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ")
println(sdf.format(d1)) 
```

格式化程序将解析和格式化。请记住不要在线程之间共享它（而是始终在使用前在本地范围内创建一个实例），因为它不是线程安全的。

其次，更棘手的问题是在 Jerkson 中自动使用日期。这似乎是 Jerkson 不如 Lift-json 的一个特性。后者允许将自定义解析器/格式化程序代码插入解析层。杰克森没有，我想。

我们只是通过忽略它来绕过这个限制。我们喜欢 Jerkson 的优越性能，所以我们只使用 Long 和 String 进行日期传输，并分别处理解析。例如

```
case class JTest(val dTest: String) {
  lazy val dTestDate: Date = {
    val sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ")
    sdf.parse(dTest)
  }
} 
```

# if-statement - Google 电子表格 If 语句

> ID：13509924
> 
> 赞同：1
> 
> 时间：2012-11-22T09:52:31.653
> 
> 标签：if-statement, spreadsheet, google-sheets

我无法理解该`IF`声明。我想做的是（在php中）：

```
 if(isEmpty($cellA) && isNotEmpty($cellB){
        $cellA = CurrentDate;
    } 
```

我在电子表格中这样做的尝试是：

```
 =IF(ISBLANK($A3), IF(ISBLANK($B3),"",$A3 = NOW()) ,"") 
```

我收到一个错误`error: Circular dependency detected`

提前谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T10:14:18.027

如果您将该公式放入其中，`A3`或者`B3`因为该公式将引用包含该公式的单元格，则会出现循环依赖，这将永远递归地继续下去。想一个非常简单的例子——`=A1`单元格中的公式`A1`。当计算公式时，它看到它的值应该是`A1`（即当前单元格）的值。然后它`A1`在工作表上找到并尝试获取它的值，但正如我们刚刚看到的，公式是`=A1`，所以它会转到单元格`A1`（我们已经在哪里）再次尝试计算该值。此过程将使您陷入无限循环，而电子表格通过在注意到单元格引用自身时不计算任何内容来防止这种情况发生，而是警告您循环引用。

此外，由于您无法从公式中为任意单元格分配值，因此该`$A3 = NOW()`部分只是一个布尔评估，将返回`True`or `False`。一般语法（看​​起来像你有的）是`IF(<condition>, <value_if_true>, <value_if_false)`. 您在 PHP 中所做的实际上更适合 AppScript，这是一种内置于 Google Docs 中的 JavaScript 式编程语言。使用它，您将能够执行您查找的操作 - 否则，您将必须创建一个单独的列并在那里进行计算。希望有帮助:)

# mysql - 以随机顺序获取数据，除了提供的 3 个 id

> ID：13509925
> 
> 赞同：1
> 
> 时间：2012-11-22T09:52:34.303
> 
> 标签：mysql, random, random-access

可以说我有如下表格。

```
create table t1 (id INT, tempData varchar(25)); 
```

和数据为

```
insert into t1 values
(01, 'value 01'),
(02, 'value 02'),
(03, 'value 03'),
(04, 'value 04'),
(05, 'value 05'),
(06, 'value 06'),
(07, 'value 07'),
(08, 'value 08'),
(09, 'value 09'),
(10, 'value 10'),
(11, 'value 11'),
(12, 'value 12'); 
```

现在我想要的是创建一个查询以**获取以下格式的数据**

```
+++++++++++++++++
Id  + tempData
+++++++++++++++++
03  + value 03
09  + value 09
01  + value 01
// now random order except above three ids
04  + value 04
06  + value 06
.
.
.
+++++++++++++++++ 
```

我希望第一行为 03，然后是 09，然后是 01，然后是任何随机顺序。

关于如何完成这项工作的任何建议？

## [sqlfiddle 中的数据](http://sqlfiddle.com/#!2/d9e82/1)

* * *

## 编辑 1

我有巨大的数据库和订购我有大约 1200 个 id。所以我不能手动写这些。还有其他方法可以让我说数字`3,9,1`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:57:40.670

```
select * from t1 order by (id = 3) desc, (id = 1) desc, (id = 9) desc, rand(); 
```

另外，谢谢你的小提琴；很少有人问 SQL 问题知道它，或者懒得做一个。

**帖子编辑**：

架构：

```
create table t2 (prio INT PRIMARY KEY, t1_id INT);

insert into t2 values (3, 3), (2, 1), (1, 9); 
```

询问：

```
select t1.*
from t1
left join t2 on t1.id = t2.t1_id
order by t2.prio desc, rand(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:59:04.250

尝试这个：

```
ORDER BY 
  CASE id
    WHEN 3 THEN -3
    WHEN 9 THEN -2
    WHEN 1 THEN -1
    ELSE 0
  END, Rand(); 
```

**更新1：**试试这个：

```
SELECT t1.*
FROM t1
LEFT JOIN
(
    SELECT -1 sortorder, 3 ID
    UNION ALL
    SELECT -2, 9
    UNION ALL
    SELECT -3, 1
) t2 ON t1.ID = t2.ID
ORDER BY t2.sortorder DESC, Rand(); 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/d9e82/10)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:01:32.137

试试这个 ORDER BY -

```
SELECT
  *
FROM
  t1
ORDER BY
  CASE id WHEN 3 THEN -3 WHEN 9 THEN -2 WHEN 1 THEN -1 ELSE RAND() END 
```

* * *

```
CREATE TABLE t2(id INT PRIMARY KEY AUTO_INCREMENT, sort_id INT);
INSERT INTO t2 VALUES(NULL, 3),(NULL, 9),(NULL, 1);

SELECT t1.*, t2.* FROM t1
  LEFT JOIN t2
    ON t1.id = t2.sort_id
ORDER BY IFNULL(t2.id - 100000000, RAND()) 
```

...100000000 用于省略 MAX(id)。

# jquery-ui - 全年验证 jQuery datepicker dpDate

> ID：13509926
> 
> 赞同：0
> 
> 时间：2012-11-22T09:52:38.313
> 
> 标签：jquery-ui, jquery-ui-datepicker

我正在使用 jQuery datepicker 和 dpDate 插件来验证输入。当年份不是 4 位数时，我希望验证失败。（当有人使用键盘输入日期时，这似乎是可能的）。

dpDate 在 80-01-01（1980 年 1 月 1 日）返回 true。但它应该用户强制写成 1980-01-01

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:39:36.550

插件的名称是`jquery.ui.datepicker.validation.js`；`dpDate`是它定义的新验证方法之一。为了其他读者的利益，可以在以下位置找到它：

[http://keith-wood.name/uiDatepickerValidation.html](http://keith-wood.name/uiDatepickerValidation.html)

此方法仅使用`$.datepicker.parseDate`您指定的 dateFormat ——如果它不报告错误，则认为输入有效。由于`parseDate`允许缩写年份，因此插件也是如此。

相反，您可以使用正则表达式`/^\d{4}-\d{2}-\d{2}$/`；这个问题显示了如何添加`regex`验证方法。如果将它与该`dpDate`方法结合使用，它将检查它是否有 4 位数字，并且它也是一个有效的日期。

[jQuery validate：如何为正则表达式验证添加规则？](https://stackoverflow.com/questions/280759/jquery-validate-how-to-add-a-rule-for-regular-expression-validation)

我在我的应用程序中所做的有点不同。我根本不允许用户直接编辑日期字段。我设置了它`readonly`，但这仍然允许 datepicker 填写它。由于 datepicker 总是输入 4 位数的年份，我不必担心验证它。

# android - 在 Nexus 7 平板电脑中打开相机

> ID：13509935
> 
> 赞同：6
> 
> 时间：2012-11-22T09:53:01.703
> 
> 标签：android, nexus-7

我在android中开发了一个相机应用程序。它使用表面视图捕获图像。下面是我用来打开相机的代码

```
try {
            // attempt to get a Front Camera instance
            c = Camera.open(Camera.CameraInfo.CAMERA_FACING_FRONT);
        } catch (Exception e) {
            // TODO Auto-generated catch block
            System.out
                    .println("fail to connect to Front Camera");
        }
        if (c == null) {
            try {
                // attempt to get a Back Camera instance
                c = Camera.open(1);
            } catch (Exception e) {
                // TODO: handle exception
                System.out
                        .println("fail to connect to Camera   with      id   =   1");
            }
        }
        if (c == null) {
            try {
                // attempt to get a Back Camera instance
                c = Camera.open(0);
            } catch (Exception e) {
                // TODO: handle exception
                System.out
                        .println("fail to connect to Camera   with      id   =   0");
            }
        }
        if (c == null) {
            try {
                // attempt to get a Back Camera instance
                c = Camera.open();
            } catch (Exception e) {
                // TODO: handle exception
                System.out
                        .println("fail to connect to Back Camera");
                return c;
            } 
```

其中 c 是 Camera 的一个对象。

它在除 Nexus 7 平板电脑之外的其他手机上运行良好。在 Nexus 7 中，除了最后一个 ie 之外，代码在所有情况下都会引发异常`c = Camera.open();`，但对象仍然`c`是`null`.

这是堆栈跟踪

```
11-22 12:36:57.559 W/System.err(7621): java.lang.NullPointerException
11-22 12:36:57.559 W/System.err(7621): at 

com.MyPackage.OpenCamera.getFrontCameraInstance(OpenCamera.java:238)
11-22 12:36:57.559 W/System.err(7621): at 

com.MyPackage.OpenCamera.onCreate(OpenCamera.java:123)
11-22 12:36:57.559 W/System.err(7621): at 

android.app.Activity.performCreate(Activity.java:5104)
11-22 12:36:57.559 W/System.err(7621): at 

android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
11-22 12:36:57.559 W/System.err(7621): at 

android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
11-22 12:36:57.559 W/System.err(7621): at 

android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
11-22 12:36:57.559 W/System.err(7621): at 

android.app.ActivityThread.access$600(ActivityThread.java:141)
11-22 12:36:57.559 W/System.err(7621): at android.app.ActivityThread

$H.handleMessage(ActivityThread.java:1234)
11-22 12:36:57.559 W/System.err(7621): at 

android.os.Handler.dispatchMessage(Handler.java:99)
11-22 12:36:57.559 W/System.err(7621): at android.os.Looper.loop

(Looper.java:137)
11-22 12:36:57.559 W/System.err(7621): at android.app.ActivityThread.main

(ActivityThread.java:5039)
11-22 12:36:57.559 W/System.err(7621): at 

java.lang.reflect.Method.invokeNative(Native Method)
11-22 12:36:57.559 W/System.err(7621): at java.lang.reflect.Method.invoke

(Method.java:511)
11-22 12:36:57.559 W/System.err(7621): at 

com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run

(ZygoteInit.java:793)
11-22 12:36:57.559 W/System.err(7621): at 

com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
11-22 12:36:57.559 W/System.err(7621): at dalvik.system.NativeStart.main

(Native Method)
11-22 12:36:57.559 I/System.out(7621): Error in setting Parameter
11-22 12:36:57.609 I/ActivityManager(480): Displayed 
11-22 12:36:57.679 W/System.err(7621): at 

android.location.Geocoder.getFromLocation(Geocoder.java:136)
11-22 12:36:57.679 W/System.err(7621): at com.MyPackage.OpenCamera.

$MyTimmer$1.run(OpenCamera.java:336)
11-22 12:36:57.679 W/System.err(7621): java.lang.NullPointerException
11-22 12:36:57.679 W/System.err(7621): at com.MyPackage.OpenCamera.

$MyTimmer$1.run(OpenCamera.java:344) 
```

所以我不能用它来捕捉图像。有什么解决办法？？？

谢谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T20:34:34.423

在 Nexus 7 上使用以下代码时： int cameraId = CameraInfo.CAMERA_FACING_FRONT; cameraId 为 1，但是，如您所见，使用 1 作为参数会导致错误。我发现使用 0 而不是 1 有效，但每次使用后必须释放相机，所以我继续调用 Camera.open(cameraId).release(); 我意识到这很丑陋，但它似乎解决了 Nexus 7 的问题。

```
 int cameraId = -1;
    boolean errorFound = false;
    boolean hasFeatCamera = getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA);

    if (hasFeatCamera) {

            try{
                 cameraId = CameraInfo.CAMERA_FACING_BACK;
                 Camera.open(cameraId).release();
                }catch(Exception e){
                    Camera.open(0).release();
                }

    } else if(CameraInfo.CAMERA_FACING_FRONT>-1){

        try{
         cameraId = CameraInfo.CAMERA_FACING_FRONT;
         Camera.open(cameraId).release();
        }catch(Exception e){
            errorFound = true;

        }

        if(errorFound){
            try{
                Camera.open(0).release(); // Put in for Nexus 7 as  CameraInfo.CAMERA_FACING_FRONT= 1 but it only loads if the id is actually 0
                cameraId = 0;
            }catch(Exception e){
                cameraId = -1;
            }
        }
    }

    if(cameraId<0){
        Toast.makeText(this, "No camera found.",
                    Toast.LENGTH_LONG).show();
     } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-02T13:50:45.610

有点晚了，但也许它可以帮助某人。我遇到了完全相同的问题，无法让 Nexus 7 相机与提供给 getCamera(idx) 的任何索引一起工作。

我从 Playstore 安装了一个相机“Kamera Nexus 7”应用程序。重置/更新后我没有任何相机应用程序。这个应用程序有效，我用过一次后，我可以使用 Camera.getCamera(0);

所以也许这里的答案中没有包含一个额外的“解锁要求”？（在安装应用程序之前，它们对我不起作用）

# qt - 使用 QTest::mousePress 选择 QGraphicsItem

> ID：13509938
> 
> 赞同：2
> 
> 时间：2012-11-22T09:53:21.483
> 
> 标签：qt, unit-testing, qgraphicsview, qgraphicsitem, qtestlib

我想用 qgraphicsitem 做一些单元测试。下面是测试 qgraphicsitem 的简单代码。

```
QTest::mousePress(viewToTest->viewport(),Qt::LeftButton,Qt::NoModifier,viewToTest->mapFromScene(50,50));
    QGraphicsItem *item = viewToTest->itemAt(viewToTest->mapFromScene(50,50));
    TestEventLoop::loop(1000);
    QCOMPARE(item->isSelected(),true); 
```

当我运行代码时，测试通过了。但我没有看到围绕 qgraphicsitem 的选择矩形。问题是什么？

下面是完整的代码。

```
//MyItem implementation
#include "MyItem.h"
#include <QtCore/QDebug>
#include <QtGui/QGraphicsSceneMouseEvent>

MyItem::MyItem()
{
    setFlags(QGraphicsItem::ItemIsSelectable);

    contextMenu = new QMenu;
    testAction = new QAction(contextMenu);
    testAction->setText("Test action");
    contextMenu->addAction(testAction);
}

MyItem::~MyItem()
{

}

QRectF MyItem::boundingRect() const
{
    return QRectF(-5,-5,60,60);
}

void MyItem::paint( QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget /* = 0 */ )
{
    QPen itemPen;
    itemPen.setColor(Qt::black);
    itemPen.setWidth(2);
    painter->setPen(itemPen);
    painter->drawRect(QRectF(0,0,50,50));

    if(isSelected())
    {
        QPen selectedPen;
        selectedPen.setColor(Qt::red);
        selectedPen.setWidth(4);
        painter->setPen(selectedPen);
        painter->drawRect(QRectF(-4,-4,58,58));
    }
}

void MyItem::mousePressEvent( QGraphicsSceneMouseEvent *event )
{
    if(event->button() == Qt::RightButton)
    {
        contextMenu->move(event->screenPos());
        contextMenu->show();
    }
    else if(event->button() == Qt::LeftButton)
    {
        update();
    }
    else{}
    QGraphicsItem::mousePressEvent(event);
}

QPainterPath MyItem::shape() const
{
    QPainterPath path;
    path.addRect(boundingRect());
    return path;
} 

//MyView implementation

#include "MyView.h"
#include "TestEventLoop.h"

#include <QtGui/QMouseEvent>
#include <QtCore/QDebug>
#include <QtGui/QGraphicsItem>

MyView::MyView()
    : QGraphicsView()
{

}

MyView::~MyView()
{

}

void MyView::mousePressEvent(QMouseEvent *event)
{
    qDebug()<<"Mouse clicked to:"<<event->pos();
    QGraphicsView::mousePressEvent(event);
    TestEventLoop::loop(1000);
}

void MyView::mouseMoveEvent( QMouseEvent *event )
{
    qDebug()<<"Mouse moved to:"<<event->pos();
}

//GraphicsViewTester implementation
#include "GraphicsViewTester.h"
#include "MyView.h"
#include "TestEventLoop.h"

#include <QtGui/QGraphicsItem>

GraphicsViewTester::GraphicsViewTester(MyView *view)
{
    viewToTest = view;
}

GraphicsViewTester::~GraphicsViewTester()
{

}

void GraphicsViewTester::itemMouseClickTest()
{
    QTest::mousePress(viewToTest->viewport(),Qt::LeftButton,Qt::NoModifier,viewToTest->mapFromScene(50,50));
    QGraphicsItem *item = viewToTest->itemAt(viewToTest->mapFromScene(50,50));
    TestEventLoop::loop(1000);
    QCOMPARE(item->isSelected(),true);
}

//TestEventLoop implementation
#include "TestEventLoop.h"

TestEventLoop* TestEventLoop::instance = NULL;

TestEventLoop::TestEventLoop()
    : QEventLoop()
{

}

TestEventLoop::~TestEventLoop()
{

}

TestEventLoop* TestEventLoop::getInstance()
{
    if(instance == NULL)
    {
        instance = new TestEventLoop;
    }
    else{}
    return instance;
}

void TestEventLoop::loop(const int msecs)
{
    QTimer timer;
    connect(&timer,SIGNAL(timeout()),TestEventLoop::getInstance(),SLOT(quit()));
    timer.setSingleShot(true);
    timer.start(msecs);
    instance->exec();
}

//TestManager implementation
#include "TestManager.h"

#include "mainwindow.h"
#include "GraphicsViewTester.h"

TestManager::TestManager(void)
{
}

TestManager::~TestManager(void)
{
}

void TestManager::runTests()
{
    MainWindow mainWindow;
    GraphicsViewTester tester(mainWindow.sceneView());
    QTest::qExec(&tester);
}

//MainWindow implementation
#include "mainwindow.h"
#include <QtCore/QDebug>
#include <QtGui/QGraphicsScene>
#include <QtGui/QHBoxLayout>

#include "MyView.h"
#include "MyItem.h"

MainWindow::MainWindow(QWidget *parent, Qt::WFlags flags)
    : QMainWindow(parent, flags)
{
    ui.setupUi(this);
    QGraphicsScene *scene = new QGraphicsScene;
    scene->setSceneRect(0,0,ui.centralWidget->width(),ui.centralWidget->height());
    QHBoxLayout *layout = new QHBoxLayout;
    myView = new MyView;
    myView->setScene(scene);

    layout->addWidget(myView);
    ui.centralWidget->setLayout(layout);

    MyItem *myItem = new MyItem;
    myItem->setPos(0,0);
    scene->addItem(myItem);
}

MainWindow::~MainWindow()
{
    delete myView;
}

MyView* MainWindow::sceneView() const
{
    return myView;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:15:06.880

在 QTestLib 教程中，他们在[第 3 章](http://doc.qt.digia.com/qt/qtestlib-tutorial3.html)中说：

> QTestLib 具有一些测试图形用户界面的机制。QTestLib 不是模拟本地窗口系统事件，而是发送内部 Qt 事件。这意味着运行测试的机器上没有副作用。

缺少选择矩形可能是由此造成的。我遇到了由此引起的 QTableView 问题：双击无法正常工作，因为本机双击事件打开了单元格进行编辑，而测试事件没有。

# actionscript-3 - 从 flex 应用程序更改 Windows 键盘布局？

> ID：13509950
> 
> 赞同：0
> 
> 时间：2012-11-22T09:53:54.597
> 
> 标签：actionscript-3, apache-flex

我有 2 个文本输入。一个必须用 EN 写，另一个必须用 MN。是否有任何解决方案可以解决他们的焦点从 flex 应用程序更改 Windows 键盘布局（在编码中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:21:02.530

简短的回答：不！

flashplayer 在沙箱中运行您的应用程序。这意味着您的代码不会与操作系统进行任何交互。例外情况是：

*   如果在浏览器中运行，您可以编写 cookie
*   如果作为 Air 应用程序运行，如果用户同意，您可以写入文件

# paramiko - paramiko exec_command redirect to a file

> ID：13509955
> 
> 赞同：1
> 
> 时间：2012-11-22T09:54:14.957
> 
> 标签：paramiko

I want to capture the screenshot of a remote computer using paramiko. I am using the following code for that

```
import paramiko
ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect('10.93.80.63', username='root', password='bohica')
ssh.exec_command("xwd -display :0 -silent -root > myscreen.xwd")
ssh.close() 
```

The issue is that the file myscreen.xwd is created but the size is 0\. Could you please let me know how I can capture the screenshot.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:35:12.650

Resolved this issue. The issue was that xwd was not executable and was not in the standard path. Resolved this issue by moving xwd to the standard path.

# android - 通话结束后使用 BroadcastListener 从通话记录中获取通话时长

> ID：13509958
> 
> 赞同：2
> 
> 时间：2012-11-22T09:54:22.697
> 
> 标签：android, broadcastreceiver, telephonymanager, calllog

通话结束后，我需要尝试获取通话时长。我有一个广播监听器，它使用电话管理器跟踪电话状态，即“摘机”、“空闲”等等。使用此接收器，我可以了解拨出电话何时完成。通话完成后，我启动一项服务以获取最后一次通话的通话时长。但是，我得到的值是上一次调用的值，而不是刚刚完成的值。我想我什至在电话更新之前就从呼叫日志数据库中获取。因为如果我稍后调用相同的函数并获取值，它会给我正确的时间。我应该在启动服务之前以某种方式延迟吗？如果是，延迟多少以及延迟多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:39:41.200

我想出了怎么做。我确保从通话记录中获取的服务在通话结束后大约 2 秒启动。这样，我得到了正确的值，而不是之前的通话持续时间值，因为届时会更新通话记录。

# java - 哪个方法最终调用 JNI_OnLoad

> ID：13509961
> 
> 赞同：16
> 
> 时间：2012-11-22T09:54:27.070
> 
> 标签：java, java-native-interface

我试图弄清楚 JNI_OnLoad 是如何在内部调用的。我最终想通了下面的教程，但它并没有说明代码部分实际上将 JNI_OnLoad 作为内部函数调用。请帮助我找到显式调用 JNI_OnLoad 的链接函数。我观察到 System.loadLibrary 调用运行时再次调用类加载器。但是还是找不到原生链接。

我对 OnLoad.cpp (android/platform_frameworks_base/blob/master/services/jni/onload.cpp) 中的那个特别感兴趣

```
JNI_OnLoad

jint JNI_OnLoad(JavaVM *vm, void *reserved);

The VM calls JNI_OnLoad when the native library is loaded (for example, through 
System.loadLibrary). JNI_OnLoad must return the JNI version needed by the native library.
In order to use any of the new JNI functions, a native library must export a JNI_OnLoad function that returns JNI_VERSION_1_2\. If the native library does not export a JNI_OnLoad function, the VM assumes that the library only requires JNI version JNI_VERSION_1_1\. If the VM does not recognize the version number returned by JNI_OnLoad, the native library cannot be loaded. 
```

**编辑**：基于@Code Painters 响应的我的文件跟踪如下：

```
 System.loadLibrary("android_servers");
            |
            |The call System.loadLibrary(name) is effectively equivalent
            |  to the call
            |
            V
        Runtime.getRuntime().loadLibrary(name)
            |
            |public static Runtime getRuntime() {
            |        return currentRuntime;}
            |
            | // Here, also,Classloader.loadlibrary is called, 
            | but this is over-ridden (?)
            | by the Native function of Runtime.java below
            V
        /dalvik/vm/native/java_lang_Runtime.cpp (The jni native
        implementation of Runtime.java):
        /*
         * static String nativeLoad(String filename, ClassLoader loader)
         *
         * Load the specified full path as a dynamic library filled with
         * JNI-compatible methods. Returns null on success, or a failure
         * message on failure.
         */
        static void Dalvik_java_lang_Runtime_nativeLoad{
        //
        success = dvmLoadNativeCode(fileName, classLoader, &reason);
        } 
```

我现在明白**Runtime.loadlibrary 被 Dalvik_java_lang_Runtime_nativeLoad 本机函数重载，并且 Classloader.loadlibrary**没有被唤起。如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-27T08:36:58.587

对于 Android，您应该查看[dalvik/vm/Native.c](https://android.googlesource.com/platform/dalvik/+/eclair-release/vm/Native.c)，它定义了 JNI 接口。

最相关的功能是这个：

```
bool dvmLoadNativeCode(const char* pathName, Object* classLoader); 
```

这是图书馆所在的地方`dlopen()`。其中最有趣的部分是：

```
 vonLoad = dlsym(handle, "JNI_OnLoad");
    if (vonLoad == NULL) {
        LOGD("No JNI_OnLoad found in %s %p\n", pathName, classLoader);
    } else {
        /*
         * Call JNI_OnLoad.  We have to override the current class
         * loader, which will always be "null" since the stuff at the
         * top of the stack is around Runtime.loadLibrary().  (See
         * the comments in the JNI FindClass function.)
         */
        OnLoadFunc func = vonLoad;
        Object* prevOverride = self->classLoaderOverride;

        self->classLoaderOverride = classLoader;
        oldStatus = dvmChangeStatus(self, THREAD_NATIVE);
        LOGV("+++ calling JNI_OnLoad(%s)\n", pathName);
        version = (*func)(gDvm.vmList, NULL);
        dvmChangeStatus(self, oldStatus);
        self->classLoaderOverride = prevOverride; 
```

如您所见，简单地使用返回的指针进行`JNI_OnLoad`解析和调用。`dlsym()`这个代码部分的其余部分是检查返回的值`JNI_OnLoad`，没什么令人兴奋的。

I believe it should look pretty much the same for other VMs - so just grep for `dlopen()` and `dlsym()` - after all it's just plain shared library loading and symbol resolution.

**Edit:** Speaking of the exact file you mention, `Android.mk` in the same directory compiles and links this file into `libandroid_servers` shared library. Grepping around for this library name reveals [services/java/com/android/server/SystemServer.java](https://android.googlesource.com/platform/frameworks/base/+/android-4.2.2_r1/services/java/com/android/server/SystemServer.java).

What's relevant:

```
public static void main(String[] args) {
    // ...
    System.loadLibrary("android_servers");
    // ...
} 
```

So, the loading of library (and thus a call to `JNI_OnLoad()` in `onload.cpp`) is performed in the context of Android's *system service* startup. If you want to know more about how/when the system service loads, I recommend [this presentation](http://www.slideshare.net/opersys/understanding-the-android-system-server).

# javascript - 相对定位元素在为其父元素设置动画时消失

> ID：13509963
> 
> 赞同：1
> 
> 时间：2012-11-22T09:54:33.617
> 
> 标签：javascript, jquery, html, jquery-ui, browser

元素`#open`并`#close`在动画期间消失，而他们不应该这样做。

这是代码，在此框下是 jsfiddle。

```
/* CSS */
#web { width:700px; height:600px; background:#ce5a3e}
#dreta { width:200px; height:600px; background:#000; float:right; position:relative }
#open { position:absolute; top:0; left:-50px; display:none; color:#fff; }
#close { position:absolute; top:0; left:-50px; color:#fff; }

<!-- HTML -->
<div id="web">  
    <div id="dreta">
        <a id="close" href="#">Close</a>
        <a id="open" href="#">Open</a>
    </div>
</div>
// JAVASCRIPT
$("#close").click(function() {   

    $("#dreta").animate({width: 0}, {duration: 1000,easing: "easeOutQuint",complete: function() {

        $("#close").fadeOut();
        $("#open").fadeIn();

    } });

});

$("#open").click(function() {

    $("#dreta").animate({width: '200px'}, {duration: 1000, easing: "easeOutQuint", complete: function() {

        $("#close").fadeIn();
        $("#open").fadeOut();

    }});

}); 
```

* * *

我已经在各种浏览器中对其进行了测试，它们都使它消失了。

为什么会发生这种情况，我该如何解决？

**小提琴：http: [//jsfiddle.net/aaQhF/1/](http://jsfiddle.net/aaQhF/1/)**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T09:57:46.763

问题是 jQuery 设置了默认样式`overflow:hidden`

你只需要添加

```
$("#dreta").animate().css("overflow","visible"); 
```

删除该默认行为。

[http://jsfiddle.net/aaQhF/3/](http://jsfiddle.net/aaQhF/3/)

# javascript - 使下拉菜单显示从另一个按钮单击

> ID：13509965
> 
> 赞同：0
> 
> 时间：2012-11-22T09:54:46.673
> 
> 标签：javascript, jquery

如果我单击我的`a href`按钮，如何使下拉菜单显示？

```
<a href="#" onclick"makeIDCarsMenuShow()" >my button</a>
<select name="cars" id="cars">
<option value="volvo">Volvo</option>
<option value="saab">Saab</option>
<option value="fiat" selected="selected">Fiat</option>
<option value="audi">Audi</option>
</select>

<script>
  function makeIDCarsMenuShow(){
    $('#cars').trigger('click');
  }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:09:35.070

尝试这个

```
 <a href="#" onclick"return makeIDCarsMenuShow()" >my button</a>
 <select name="cars" id="cars">
   <option value="volvo">Volvo</option>
   <option value="saab">Saab</option>
   <option value="fiat" selected="selected">Fiat</option>
   <option value="audi">Audi</option>
 </select>

<script>
   function makeIDCarsMenuShow(){
    $('#cars').click();
    return false;
   }
</script> 
```

# javascript - Facebook 发布到新闻源不显示 FB 未定义

> ID：13509971
> 
> 赞同：0
> 
> 时间：2012-11-22T09:54:59.933
> 
> 标签：javascript, facebook, facebook-javascript-sdk, facebook-sharer

我试图发布到 facebook 新闻源，但弹出框不时出现。我认为这与回发或其他事情有关。这是发生了什么：用户再见并在弹出窗口中发送到 Payson（payson 是瑞典版的 Paypal），然后 payson 将用户发送回我的页面，仍然在弹出窗口中。这是一个运行的代码：

```
function postToFeed() {

try {
    FB.getLoginStatus(function (response) {
        if (response.status === 'connected') {

            var obj = {
                method: 'feed',
                link: 'link',
                picture: 'imagelink',
                name: 'title',
                caption: 'some text...',
                description: 'some text...',
                redirect_uri: 'url'
            };

            function callback(response) {
                document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
            }

            FB.ui(obj, callback);
        }
        else {
            alert("not connected")
        }
    });

} catch (e) {
    alert(e.Message)
}
 } 
```

现在发生的事情是我从我的 try catch 中得到了错误，它只是说**FB is not defined**。

如果我之后使用按钮运行此功能，它就可以正常工作。如果我从 payson 伪造回发，它也可以工作，但如果我在新窗口中进行，则不会。

我试图将 FB.init 函数放入我的函数中，但这没有帮助。

谢谢你的帮助！

**新代码**

这是在一个 .js 文件中

```
var isLoaded = false;
window.fbAsyncInit = function () {
FB.init({
    appId: '00000000', // App ID
    channelUrl: 'url', // Channel File
    status: true, // check login status
    cookie: true, // enable cookies to allow the server to access the session
    xfbml: true,  // parse XFBML
    oauth: true // enable OAuth
});

isLoaded = true;
 };

// Load the SDK Asynchronously
  (function (d) {
var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
if (d.getElementById(id)) { return; }
js = d.createElement('script'); js.id = id; js.async = true;
js.src = "//connect.facebook.net/en_US/all.js";
ref.parentNode.insertBefore(js, ref);
   } (document));

   (function (d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/sv_SE/all.js#xfbml=1&appId=503537396325197";
fjs.parentNode.insertBefore(js, fjs);
 } (document, 'script', 'facebook-jssdk'));

FB.init({ appId: "000", status: true, cookie: true });

   function postToFeed() {

    var obj = {
        display: 'iframe',
        method: 'feed',
        link: 'url',
        picture: 'url',
        name: 'text',
        caption: 'text',
        description: 'text',
        redirect_uri: 'url'
    };

    function callback(response) {
        document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
    }

    FB.ui(obj, callback);
   }

   function init() {
    FB.init({
    appId: '00000',
    status: true, // check login status
    cookie: true, // enable cookies to allow the server to access the session
    xfbml: true, // parse XFBML
    channelUrl: 'url', // custom channel
    oauth: true // enable OAuth
     });

    FB.getLoginStatus(function (response) {
    if (response.status == 'connected') {
        var user_id = response.authResponse.userID;
        var access_token = response.authResponse.accessToken
        var page_id = "00000"; //page id
        var fql_query = "SELECT uid FROM page_fan WHERE page_id =" + page_id + " and uid=" + user_id;
        var the_query = FB.Data.query(fql_query);

        the_query.wait(function (rows) {

            if (rows.length == 1 && rows[0].uid == user_id) {
                $("#container").show();
                $("#container_notlike").hide();
                $("#notloggedin").hide();

            }

            else {
                $("#container_notlike").show();
                $("#container").hide();
                $("#notloggedin").hide();

                login();
            }
        });
    } else {
        $("#container_notlike").hide();
        $("#container").hide();

        login();

    }
     });

     }

      init();

       // whenever the user logs in, we refresh the page
     FB.Event.subscribe('auth.login', function (response) {
     top.location.href = "url";
   });

    FB.Event.subscribe('auth.logout', function (response) {
      top.location.href = "url";
     });

      function login() {
     FB.login(function (response) {
        if (response.authResponse) {
        console.log('Logged in');
        } else {
        console.log('User cancelled login or did not fully authorize.');
        }
       }, { scope: 'email,user_likes,publish_actions' });
       }

    function likereload() {

    FB.Event.subscribe('edge.create', function (response) {

      top.location.href = "url"
       });

   }

    function getuserinfo() {

       FB.getLoginStatus(function (response) {
          if (response.authResponse) {

           FB.api('/me', function (response) {
            document.getElementById("txtfName").value = response.first_name;
            document.getElementById("txtlName").value = response.last_name;
            document.getElementById("txtemail").value = response.email;

            });

         }
      });

       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:14:33.040

“FB 未定义”表示您没有加载/初始化 JavaScript SDK。

> [https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)

有关如何使用 JavaScript SDK 的示例，请参阅“加载和初始化”，不要将任何内容放在自定义函数中。

此外，您不需要“getLoginStatus”，提要对话框也可以在没有用户登录的情况下工作，因此调用“getLoginStatus”是没有意义的，只是需要时间。我也会删除 try/catch 块，你不需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:59:18.907

我解决了问题，

```
window.setTimeout('postToFeed()', 3000); 
```

然后在我打开提要对话框之前，所有 facebook 代码都有时间加载

# ajax - 使用 POST 方法将 JSON 发送到 Google App 脚本

> ID：13509972
> 
> 赞同：1
> 
> 时间：2012-11-22T09:55:00.247
> 
> 标签：ajax, json, post, google-apps-script

正如标题所说，我想知道是否可以使用 POST 方法将某种 JSON 发送到谷歌应用脚​​本。发送 JSON 后，它将由 google 脚本处理。

到现在为止，我设法使用带有 3 个输入的标准 html 表单发送了一个发布请求（我遵循了本指南： http: [//mashe.hawksey.info/2011/10/google-spreadsheets-as-a-database-insert- with-apps-script-form-postget-submit-method/](http://mashe.hawksey.info/2011/10/google-spreadsheets-as-a-database-insert-with-apps-script-form-postget-submit-method/)）。现在我想转移到一个将一些 json 发送到谷歌脚本的 ajax 调用，但我不知道如何..

使用这样的 ajax 调用：

```
$.ajax({
  type: "POST",
  url: url,
  data: "someSortOfData",
  success: function(data){alert("ok")},
  error: function(message){alert("fail")}
}).done(function( msg ) {
  alert( "Data Saved: " + msg );
}); 
```

其中“someSortOfData”是我发送的实际数据（我尝试使用 json、简单文本、html 等）。每次我运行脚本时，调用都会不断进入“错误”函数，我不知道为什么。

正如我之前所说，使用标准的 html 表单提交数据是可行的，所以我认为 URL 没问题。我认为问题出在我发送的数据上。也许，服务器端，谷歌脚本不期望有任何与文本不同的东西？

这就是脚本（服务器端）的样子

```
function doPost(e) {
  var ss = SpreadsheetApp.openById(ScriptProperties.getProperty('active'));
  var sheet = ss.getSheetByName("DATA");
  var headers = sheet.getRange(1, 1, 1, sheet.getLastColumn()).getValues()[0];
  var nextRow = sheet.getLastRow(); // get next row
  var cell = sheet.getRange('a1');
  var col = 0;
  for (i in headers){
    val = e.parameter[headers[i]]; 
    cell.offset(nextRow, col).setValue(val);
    col++;
  }

  //return sent data
  var app = UiApp.createApplication();
  var panel = app.createVerticalPanel();
  for( p in e.parameters){
    panel.add(app.createLabel(p +" "+e.parameters[p]));
  }
  app.add(panel);
  return app;
} 
```

我可能也需要编辑这段代码，但首先我试图将正确的 json 发送到服务器..

我做错了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-29T23:17:26.240

正如评论中所指出的，这听起来确实可能像客户端跨域脚本问题。AJAX 调用的来源是关键 - 即使在生成输出时出现错误，GAS 通常也会给你 200，这应该是“成功”。

您可能会更改您的`"fail"`消息以`alert("fail:" + JSON.stringify(message))`获取更多调试信息，但在跨域脚本块的情况下，信息可能是稀疏的（例如，“无传输”）。也许 mhawksey 的修复是票，或者尝试使用 JQuery AJAX fxnality 的 JSONP 模式（请参阅[文档](http://api.jquery.com/jQuery.ajax/)，特别是`dataType`，或[此答案](https://stackoverflow.com/questions/2681466/jsonp-with-jquery)）。

# wordpress-theming - Wordpress 中连续的上一篇和下一篇文章链接

> ID：13509975
> 
> 赞同：2
> 
> 时间：2012-11-22T09:55:06.893
> 
> 标签：wordpress-theming, wordpress

我所拥有的是一个页面，它显示了一个类别的帖子，底部有一个上一个和下一个帖子链接。我遇到的问题是，当它到达最后一个时，我想循环回到起点。如果您在第一个帖子上，它会一直运行到最后，如果您在最后一个帖子上，它不会回到开头，如果您在最后一个帖子上，它只会显示最后一个帖子。

到目前为止，这是我的代码：

```
<?php 
$prev_post = get_adjacent_post( true, '', true );
$next_post = get_adjacent_post( true, '', false );
$prev_post_id = $prev_post->ID;
$next_post_id = $next_post->ID;
?>

<?php if ($prev_post_id == '') {
$query = new WP_Query( array ( 'orderby' => 'ASC', 'posts_per_page' => '1', 'cat=4' ));

  while($query->have_posts()):
       $query->the_post();
       $prev_post_id = $query->post->ID;
  endwhile;
} ?>
<?php if ($next_post_id == '') {
  $query2 = new WP_Query( array ( 'orderby' => 'DESC', 'posts_per_page' => '1', 'cat=4'    ));
  while($query2->have_posts()):
       $query2->the_post();
       $next_post_id = $query2->post->ID;
  endwhile;
} ?>

<a href="<?php echo get_permalink($prev_post_id); ?>" class="prev-footer-item">
  <div class="prev-inner">
    <h3 class="gamma"><?php echo get_the_title($prev_post_id ); ?></h3>
    <h4 class="delta"><?php the_field('subtitle', $prev_post_id ); ?></h4>
    <div class="footer-overlay"></div>
  </div>
 </a>
<a href="<?php echo get_permalink($next_post_id); ?>" class="next-footer-item">
  <div class="next-inner">
    <h3 class="gamma"><?php echo get_the_title($next_post_id); ?></h3>
    <h4 class="delta"><?php the_field('subtitle', $next_post_id); ?></h4>
    <div class="footer-overlay"></div>
  </div>
</a> 
```

我敢肯定，我很明显错过了一些东西，对吧？

更新：工作上一篇文章：

```
[request] => SELECT SQL_CALC_FOUND_ROWS  as1_posts.ID FROM as1_posts  WHERE 1=1  AND as1_posts.post_type = 'post' AND (as1_posts.post_status = 'publish' OR as1_posts.post_status = 'private')  ORDER BY as1_posts.post_date DESC LIMIT 0, 1 
```

不工作 下一篇文章：

```
[request] => SELECT SQL_CALC_FOUND_ROWS  as1_posts.ID FROM as1_posts  WHERE 1=1  AND as1_posts.post_type = 'post' AND (as1_posts.post_status = 'publish' OR as1_posts.post_status = 'private')  ORDER BY as1_posts.post_date DESC LIMIT 0, 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:42:48.273

我看不到任何对我跳出的东西，但是我已经在`if`你的两个循环中添加了一个语句（以防止错误），`wp_reset_postdata()`在每个循环之后添加，并且不再需要`$query`and `$query2`- 你可以只使用`$query`for 两个 if您不希望将查询结果用于除此之外的任何内容。

另一个想法 -如果 Post ID 不存在，您是否确定`get_adjacent_post()`返回？`''`可能是`null`，或者`'0'`例如。可能值得做`var_dump($next_post_id)`和检查。

**编辑**

我忘了提及，`get_adjacent_post()`假设`post_type`相邻帖子的 与您当前正在查看的帖子相同。不过，我不认为这是一个问题，正如您已经说过的那样，它可以反过来工作，但这是未来要记住的事情。

```
<?php
if($prev_post_id === '') :

    $query = new WP_Query(array('orderby' => 'ASC', 'posts_per_page' => '1', 'cat=4'));

    if($query->have_posts()) : while($query->have_posts()) :
        $query->the_post();
        $prev_post_id = get_the_ID();
        endwhile;
    endif;

    wp_reset_postdata();

endif;

if($next_post_id === '') :

    $query = new WP_Query(array('orderby' => 'DESC', 'posts_per_page' => '1', 'cat=4'));

    if($query->have_posts()) : while($query->have_posts()) :
            $query->the_post();
            $next_post_id = get_the_ID();
        endwhile;
    endif;

    wp_reset_postdata();

endif;
?> 
```

# ios - 打开相册动画

> ID：13509976
> 
> 赞同：3
> 
> 时间：2012-11-22T09:55:10.777
> 
> 标签：ios, animation

我只想问是否有人尝试过创建类似于在 iOS Photo 应用中打开相册的动画效果。

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:04:52.083

我猜你的意思是 iPad Photo 应用程序，因为在 iPhone 上它只是一个导航控制器和一个表格视图。

也许这里有更多信息：[https ://stackoverflow.com/a/6288992/1197572](https://stackoverflow.com/a/6288992/1197572)

# c# - 扩展方法不会在剃须刀中显示

> ID：13509977
> 
> 赞同：2
> 
> 时间：2012-11-22T09:55:14.240
> 
> 标签：c#, asp.net-mvc, web-config, extension-methods

我一直在关注这个教程，在过去的一个小时里我一直在努力完成这项工作，但我看不出我的错误在哪里，所以你去吧：我在项目文件中有一个扩展方法：

```
namespace TomApps.Toolbox.MVC.Security
{
    public static class HtmlExtention
    {
        public static MvcHtmlString GenerateSecureDataControls<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression)
        {
...
}} 
```

我把我的网络配置：

```
<system.web>
    <customErrors defaultRedirect="/Home/Index"
                    mode="On">
      <error statusCode="404" redirect="error" />
    </customErrors>
    <compilation debug="true" targetFramework="4.5" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
    <pages controlRenderingCompatibilityVersion="4.0">
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
        **<add namespace="TomApps.Toolbox.MVC.Security"/>**
      </namespaces>
      <controls>
        <add assembly="Ext.Net" namespace="Ext.Net" tagPrefix="ext" />
      </controls>
    </pages> 
```

然而，如果我不放

```
@using TomApps.Toolbox.MVC.Security 
```

在我看来，我不能使用它：

```
 @Html.GenerateSecureDataControls(model => model.RoleId) 
```

起初我以为我是因为我的名字有冲突，但我看到我输入了一个错误的扩展名:) 知道出了什么问题吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T09:57:41.730

它需要在`<system.web.webPages.razor>`.. 下，如下所示：

```
<system.web.webPages.razor>
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
        <namespaces>
            <add namespace="TomApps.Toolbox.MVC.Security"/>
        </namespaces>
    </pages>
</system.web.webPages.razor> 
```

# java - JBoss 中带有 EJB3 的 FTP 客户端

> ID：13509979
> 
> 赞同：0
> 
> 时间：2012-11-22T09:55:16.470
> 
> 标签：java, jboss, ejb

我有一个无状态会话 Bean（在 JBOSS 容器中），它使用 org.apache.commons.net.ftp.FTPClient 从远程 FTP 服务器下载文件。然后，它将文件临时存储在本地系统 tmp 目录 (java.io.tmpdir) 中，并主要通过使用 Hibernate 将其添加到数据库中来处理内容。

现在 EJB 规范确实告诉我不要使用 java.io.File、java.io.FileInputStream 等。基本上不做任何“直接”文件系统访问。

现在我应该如何完成我的任务？有没有人有提示，链接，示例？

先感谢您

最艺术

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:49:28.417

拥有自己的本地/远程 ftp 服务器来存储传入文件怎么样？然后您只需使用 FTPClient 而不是直接访问文件系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-03T14:24:40.830

您不应访问本地文件系统来存储您稍后将在应用程序中使用的任何数据。如果您的应用程序驻留在集群上，那么每个集群成员都无法访问本地存储的文件，这就是文档根本不建议使用 java.io 的原因。这是避免这种不一致的最简单方法。

但是，如果您只需要使用临时文件，您可以在 bean 的生命周期结束之前将其删除，那么您可以毫无顾虑地使用 java.io。关键是，不要在本地存储您以后想从您的应用程序访问的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:05:46.727

好的，发现我可以将模块重构为直接对下载流进行操作，而不是将其临时保存在文件系统中。

谢谢你的提示。。

# php - 在php中更改数组的索引

> ID：13509984
> 
> 赞同：4
> 
> 时间：2012-11-22T09:55:43.257
> 
> 标签：php, arrays

例如，我想更改数组的索引。我有一个数组

```
$a = array("a","e","i","o","u");
echo $a[0]; //output a 
```

这意味着这个数组有索引 (0,1,2,3,4)

现在我想从索引 100 而不是 0 开始我的数组

表示具有索引的数组 (100,200,300,400,500)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T09:58:04.117

如果你想以这种方式**声明**一个数组，你应该这样做：

```
$array = array(100 => 'a', 200 => 'b', 300 => 'c', 400 => 'd', 500 => 'e'); 
```

**请注意**，如果您以`$array`较短的方式 ( `$array[] = 'f'`) 添加新元素，则分配的键将为`501`.

如果**要将**常规数组索引转换*为基于数百个的*索引，可以这样做：

```
$temp = array();
foreach ($array as $key => $value) {
    $temp[(($key + 1) * 100)] = $value;
}
$array = $temp; 
```

但也许你真的不需要转换任何数组，而是以这种方式访问​​你当前的数组：

```
$i = $hundredBasedIndex / 100 - 1;
echo $array[$i];
// or directly
echo $array[($hundredBasedIndex / 100 - 1)]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T10:04:46.153

其他解决方案：

```
$a = array_combine(array(100, 200, 300, 400, 500), $a); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T09:59:45.753

您可以简单地定义一个起始索引并迭代交换索引的数组。像这样的东西-

```
$oldArray = array("a","e","i","o","u");  
$newArray = array();
$startIndex = 100;

foreach($oldArray AS $key => $value){
  $newArray[$startIndex] = $value;
  startIndex += 100;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T10:00:17.270

只需将键作为您想要的索引的关联数组。例如 ：

```
$myArray = array(100=>"a",200=>"e",300=>"i",400=>"o",500=>"u"); 
```

然后您将这些值称为：

```
echo $myArray[100] ; 
```

**注意：**不要放 `'100'=>"a"`代替`100=>"a"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T10:06:45.627

> $key = 数组(100, 200, 300, 400, 500);
> 
> $b = array_combine($key, $a);

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-22T09:57:55.350

只需以这种方式创建数组。

```
$myarray = array(
    100 => 'a',
    200 => 'b',
); 
```

如果您已经有一个具有该顺序的数组，并且想要将键乘以 100，则可以在循环中执行此操作（还有其他方法，但是...）：

```
$a = array('a', 'b', 'c', 'd', 'e');

$newarray = array();
foreach($a as $key => $value)
    $newarray[100*($key+1)] = $value; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-22T09:58:13.707

只需像这样更改您的数组：

```
$a = array(100 => "a", 200 => "e", 300 => "i", 400 => "o", 500 => "u"); 
```

# linker - 未找到链接 libruli.so 的 g++ 符号

> ID：13509985
> 
> 赞同：4
> 
> 时间：2012-11-22T09:55:44.693
> 
> 标签：linker, g++, shared-objects

对于我可以检查关于为什么找不到符号的任何想法非常有用。是的，找到so lib路径设置在/etc/ld.so.conf（http://www.nongnu.org/ruli/）

g++ --version g++ (GCC) 3.3.3 (SuSE Linux)

g++ -D_xx_ -I../se/yy/xx/business/ss/utility/asn -I/usr/local/include/mysql++ -I/usr/include/mysql -O0 -g3 -Wall -c -fmessage-长度=0 -MMD -MP - MF"se/yy/xx/business/ss/communication/ClientSocketThread.d" -MT"se/yy/xx/business/ss/communication/ClientSocketThread.d" -o"se/ yy/nn 是/business/ss/communication/ClientSocketThread.o" "../se/yy/xx/business/ss/communication/ClientSocketThread.cpp"

////

```
./se/yy/xx/business/ss/communication/ServerSocketThread.o ./se/yy/xx/business/ss/communication/SocketThread.o ./se/yy/xx/business/ss/communication/ThreadBase.o   -lpthread -lxml2 -lruli -loop -lasn1per -lasn1rt -lmysqlpp
./se/yy/xx/business/ss/communication/ClientSocketThread.o(.text+0xc17): In function `ClientSocketThread::Connect(char const*, char const*, int)':
../se/yy/xx/business/ss/communication/ClientSocketThread.cpp:152: undefined reference to `ruli_sync_query(char const*, char const*, int, long)'
./se/yy/xx/business/ss/communication/ClientSocketThread.o(.text+0xdb1):../se/yy/xx/business/ss/communication/ClientSocketThread.cpp:161: undefined reference to `ruli_sync_srv_code(ruli_sync_t const*)'
./se/yy/xx/business/ss/communication/ClientSocketThread.o(.text+0xf55):../se/yy/xx/business/ss/communication/ClientSocketThread.cpp:173: undefined reference to `ruli_sync_rcode(ruli_sync_t*)'
./se/yy/xx/business/ss/communication/ClientSocketThread.o(.text+0x1123):../se/yy/xx/business/ss/communication/ClientSocketThread.cpp:185: undefined reference to `ruli_sync_srv_list(ruli_sync_t*)'
./se/yy/xx/business/ss/communication/ClientSocketThread.o(.text+0x113a):../se/yy/xx/business/ss/communication/ClientSocketThread.cpp:186: undefined reference to `ruli_list_size(ruli_list_t const*)'
./se/yy/xx/business/ss/communication/ClientSocketThread.o(.text+0x14ad):../se/yy/xx/business/ss/communication/ClientSocketThread.cpp:204: undefined reference to `ruli_list_get(ruli_list_t const*, int)'
./se/yy/xx/business/ss/communication/ClientSocketThread.o(.text+0x14d5):../se/yy/xx/business/ss/communication/ClientSocketThread.cpp:206: undefined reference to `ruli_list_size(ruli_list_t const*)'
./se/yy/xx/business/ss/communication/ClientSocketThread.o(.text+0x150b):../se/yy/xx/business/ss/communication/ClientSocketThread.cpp:213: undefined reference to `ruli_dname_decode(char*, int, int*, char const*, int)'
./se/yy/xx/business/ss/communication/ClientSocketThread.o(.text+0x1753):../se/yy/xx/business/ss/communication/ClientSocketThread.cpp:225: undefined reference to `ruli_list_get(ruli_list_t const*, int)'
./se/yy/xx/business/ss/communication/ClientSocketThread.o(.text+0x176a):../se/yy/xx/business/ss/communication/ClientSocketThread.cpp:226: undefined reference to `ruli_addr_family(ruli_addr_t const*)'
./se/yy/xx/business/ss/communication/ClientSocketThread.o(.text+0x17a7):../se/yy/xx/business/ss/communication/ClientSocketThread.cpp:229: undefined reference to `ruli_in_snprint(char*, unsigned, _ruli_addr const*, int)'
collect2: ld returned 1 exit status
make: *** [SlisServer] Error 1

sudo ldd /usr/local/lib/libruli.so
        linux-gate.so.1 =>  (0xffffe000)
        liboop.so.4 => /usr/local/lib/liboop.so.4 (0x40025000)
        libdl.so.2 => /lib/libdl.so.2 (0x4002c000)
        libc.so.6 => /lib/tls/libc.so.6 (0x40030000)
        /lib/ld-linux.so.2 (0x80000000) 
```

据我所知，所有符号在 lib 中看起来都不错

```
 sudo readelf -Ws /usr/local/lib/libruli.so | grep ruli_sync
    65: 0000ee90   373 FUNC    GLOBAL DEFAULT   11 ruli_sync_smtp_query@@libruli4
   105: 0000eb90   103 FUNC    GLOBAL DEFAULT   11 ruli_sync_rcode@@libruli4
   126: 0000ed10   376 FUNC    GLOBAL DEFAULT   11 ruli_sync_http_query@@libruli4
   127: 0000eb20   103 FUNC    GLOBAL DEFAULT   11 ruli_sync_srv_list@@libruli4
   162: 0000ec00   103 FUNC    GLOBAL DEFAULT   11 ruli_sync_srv_code@@libruli4
   197: 0000f010   373 FUNC    GLOBAL DEFAULT   11 ruli_sync_query@@libruli4
   236: 0000ec70   158 FUNC    GLOBAL DEFAULT   11 ruli_sync_delete@@libruli4

 sudo readelf -Ws /usr/local/lib/libruli.so | grep ruli_list
    35: 00004c20    66 FUNC    GLOBAL DEFAULT   11 ruli_list_capacity@@libruli4
    63: 00004cf0   170 FUNC    GLOBAL DEFAULT   11 ruli_list_clean@@libruli4
    64: 00004ea0   217 FUNC    GLOBAL DEFAULT   11 ruli_list_dispose@@libruli4
    74: 000050b0    67 FUNC    GLOBAL DEFAULT   11 ruli_list_new@@libruli4
    75: 00004c70   127 FUNC    GLOBAL DEFAULT   11 ruli_list_size@@libruli4
    92: 0001201c     4 OBJECT  GLOBAL DEFAULT   14 ruli_list_malloc@@libruli4
    99: 00004b90   140 FUNC    GLOBAL DEFAULT   11 ruli_list_push@@libruli4
   100: 000048b0   271 FUNC    GLOBAL DEFAULT   11 ruli_list_shift_at@@libruli4
   104: 00012014     4 OBJECT  GLOBAL DEFAULT   14 ruli_list_free@@libruli4
   108: 00004da0   140 FUNC    GLOBAL DEFAULT   11 ruli_list_clean_trivial@@libruli4
   118: 00004820   131 FUNC    GLOBAL DEFAULT   11 ruli_list_top@@libruli4
   133: 00012018     4 OBJECT  GLOBAL DEFAULT   14 ruli_list_realloc@@libruli4
   134: 00004f80   150 FUNC    GLOBAL DEFAULT   11 ruli_list_dispose_trivial@@libruli4
   140: 00004790   133 FUNC    GLOBAL DEFAULT   11 ruli_list_pop@@libruli4
   156: 000044b0    23 FUNC    GLOBAL DEFAULT   11 ruli_list_errstr@@libruli4
   161: 000046e0   176 FUNC    GLOBAL DEFAULT   11 ruli_list_drop@@libruli4
   169: 00004e30   112 FUNC    GLOBAL DEFAULT   11 ruli_list_delete@@libruli4
   209: 00005020   142 FUNC    GLOBAL DEFAULT   11 ruli_list_new_cap@@libruli4
   220: 00004580   165 FUNC    GLOBAL DEFAULT   11 ruli_list_set@@libruli4
   222: 00004a70   274 FUNC    GLOBAL DEFAULT   11 ruli_list_insert_at@@libruli4
   232: 00004630   162 FUNC    GLOBAL DEFAULT   11 ruli_list_get@@libruli4
   235: 000044d0   161 FUNC    GLOBAL DEFAULT   11 ruli_list_prune@@libruli4

 sudo readelf -Ws /usr/local/lib/libruli.so | grep ruli_dname_decode
   229: 00006de0   256 FUNC    GLOBAL DEFAULT   11 ruli_dname_decode@@libruli4

 sudo readelf -Ws /usr/local/lib/libruli.so | grep ruli_in_snp
   165: 00005f00   125 FUNC    GLOBAL DEFAULT   11 ruli_in_snprint@@libruli4 
```

Har testat att lägga until en av funktionsanropen (cut/paste samma kod) i en av test funktionerna i ruli lib och det länkar utan problem mot samma lib。

```
gcc   -O2 -pipe -Wall -g -I../src -I/usr/local/oop/include -c srvsearch.c
gcc   -O2 -pipe -Wall -g -I../src -I/usr/local/oop/include -c parse_options.c
gcc   -O2 -pipe -Wall -g -I../src -I/usr/local/oop/include -c stdout_srv_list.c
gcc  -L../src -L/usr/local/oop/lib  -o srvsearch srvsearch.o parse_options.o stdout_srv_list.o  -lruli -loop
gcc   -O2 -pipe -Wall -g -I../src -I/usr/local/oop/include -c sync_srvsearch.c
gcc  -L../src -L/usr/local/oop/lib  -o sync_srvsearch sync_srvsearch.o parse_options.o stdout_srv_list.o  -lruli -loop
gcc   -O2 -pipe -Wall -g -I../src -I/usr/local/oop/include -c smtpsearch.c
gcc  -L../src -L/usr/local/oop/lib  -o smtpsearch smtpsearch.o parse_options.o stdout_srv_list.o  -lruli -loop
gcc   -O2 -pipe -Wall -g -I../src -I/usr/local/oop/include -c sync_smtpsearch.c
gcc  -L../src -L/usr/local/oop/lib  -o sync_smtpsearch sync_smtpsearch.o parse_options.o stdout_srv_list.o  -lruli -loop
gcc   -O2 -pipe -Wall -g -I../src -I/usr/local/oop/include -c sync_httpsearch.c
gcc  -L../src -L/usr/local/oop/lib  -o sync_httpsearch sync_httpsearch.o parse_options.o stdout_srv_list.o  -lruli -loop
gcc   -O2 -pipe -Wall -g -I../src -I/usr/local/oop/include -c httpsearch.c
gcc  -L../src -L/usr/local/oop/lib  -o httpsearch httpsearch.o parse_options.o stdout_srv_list.o  -lruli -loop
gcc   -O2 -pipe -Wall -g -I../src -I/usr/local/oop/include -c ruli-getaddrinfo.c
ruli-getaddrinfo.c: In function `main':
ruli-getaddrinfo.c:60: warning: `sync_query' might be used uninitialized in this function
gcc   -O2 -pipe -Wall -g -I../src -I/usr/local/oop/include -c addrprint.c
gcc  -L../src -L/usr/local/oop/lib  -o ruli-getaddrinfo ruli-getaddrinfo.o addrprint.o parse_options.o  -lruli -loop
gcc   -O2 -pipe -Wall -g -I../src -I/usr/local/oop/include -c getaddrinfo.c
gcc   -O2 -pipe -Wall -g -I../src -I/usr/local/oop/include -c run_getaddrinfo.c
gcc  -L../src -L/usr/local/oop/lib  -o getaddrinfo getaddrinfo.o run_getaddrinfo.o addrprint.o parse_options.o  -ldl 
```

非常适合任何提示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:11:20.187

中定义的符号`libruli.so`具有`extern "C"`链接。

您无法解析的符号具有`C++`链接（请注意链接器如何列出函数参数类型）。

正如chill 正确猜测的那样，这意味着附带的头球`libruli`没有适当的`C++`后卫。要解决此问题，请不要这样做（在 C++ 代码中）：

```
#include "libruli.h" 
```

改为这样做：

```
extern "C" {
#include "libruli.h"
} 
```

或者，修复`libruli.h`自身（并向其开发人员发送补丁）：

```
#ifdef __cplusplus
extern "C" {
#endif

... original content goes here ...

#ifdef __cplusplus
}
#endif 
```

# c# - Log4NET AdoNetAppender 连接字符串参考

> ID：13509988
> 
> 赞同：4
> 
> 时间：2012-11-22T09:55:53.957
> 
> 标签：c#, .net, web-config, log4net

我想使用 Log4NET 登录我的数据库并按照一些教程我看到我必须为 DAO 附加程序配置一个连接字符串。

我的 web.config 中已经有一个用于 DB 连接的连接字符串，所以我想知道是否可以引用它而不是设置一个新字符串。

我通常更改我的连接字符串以从开发数据库切换到生产数据库，因此共享相同的连接参数可能非常有用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T10:00:44.510

编辑：自从发布后，log4net 现在支持在配置中指定连接字符串**名称**。来自[https://issues.apache.org/jira/browse/LOG4NET-88](https://issues.apache.org/jira/browse/LOG4NET-88) -

> 这会向 AdoNetAppender 类添加一个新的“connectionStringName”属性（以及相应的 ConnectionStringName）属性。`<ConnectionStrings>`这是对 App.config 或 Web.config 文件部分中的连接字符串的引用。

[这个答案](https://stackoverflow.com/a/5078020/43846)中有一个例子。

如果您没有在该`<ConnectionStrings>`部分中定义连接字符串，那么您可以在运行时使用此类设置连接字符串：

`SetConnectionString`在配置 log4net 之后，您使用连接字符串调用。

但是，有几点我要注意：

Log4net 数据库附加程序不喜欢在没有连接字符串的情况下创建，并且会引发（内部）错误 - 在单元测试期间，我看到在给定假连接字符串时测试需要超过 10 秒。

```
public static class LogConfigurator
{
   public static void SetConnectionString(string connectionString)
   {
        Hierarchy logHierarchy = log4net.LogManager.GetRepository() as Hierarchy;

        if (logHierarchy == null)
        {
            throw new InvalidOperationException
               ("Can't set connection string as hierarchy is null.");
        }

        var appender = logHierarchy.GetAppenders()
                                   .OfType<AdoNetAppender>()
                                   .SingleOrDefault();

        if (appender == null)
        {
            throw new InvalidOperationException
              ("Can't locate a database appender");
        }

        appender.ConnectionString = connectionString;
        appender.ActivateOptions();
   }
} 
```

# android - 如何设置Android进度条的高度？

> ID：13509989
> 
> 赞同：84
> 
> 时间：2012-11-22T09:55:54.850
> 
> 标签：android, progress-bar, android-progressbar

我`activity_main.xml`在下面，如您所见，高度设置为 40 倾角。

在 MyEclipse 中，它如下所示：

![在此处输入图像描述](../Images/171a1f707cc71e453146ae36068a5280.png)

但是当我在手机上运行它时，它如下所示：

![在此处输入图像描述](../Images/935efb04d9c10e5ffdfc78033ff9cb92.png)

所以我的问题是为什么进度条的实际高度不是我设置的？如何增加进度条的高度？

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2014-12-04T18:14:08.547

我想最简单的解决方案是：

```
mProgressBar.setScaleY(3f); 
```

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2017-06-22T13:52:54.123

android:scaleY="8" 在你的 xml 文件中

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2012-11-22T10:02:08.160

从[本教程](https://a-renouard.developpez.com/tutoriels/android/custom-progress-seek-bar/)：

```
<style name="CustomProgressBarHorizontal" parent="android:Widget.ProgressBar.Horizontal">
      <item name="android:progressDrawable">@drawable/custom_progress_bar_horizontal</item>
      <item name="android:minHeight">10dip</item>
      <item name="android:maxHeight">20dip</item>
</style> 
```

然后只需将样式应用到您的进度条**或更好**，覆盖主题中的默认样式以自动设置应用程序的所有进度条的样式。

您在屏幕截图中看到的差异是因为手机/模拟器使用的是不同的 Android 版本（最新的是 ICS (Holo) 的主题，顶部是原始主题）。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-07-23T08:03:39.520

用这个

`style="@android:style/Widget.ProgressBar.Horizontal"`

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2013-12-03T19:41:00.553

如其他答案所述，您似乎正在将进度条的样式设置为使用 Holo.Light：

```
style="@android:style/Widget.Holo.Light.ProgressBar.Horizontal" 
```

如果这在您的手机上运行，​​它可能是 3.0+ 设备。但是，您的模拟器看起来像是使用“默认”进度条。

```
style="@android:style/Widget.ProgressBar.Horizontal" 
```

也许您在创建屏幕截图之间将样式更改为“默认”进度条？不幸的是，如果您的项目使用 Holo.Light 进度条，2.x 设备不会自动默认回到“默认”进度条。它只会崩溃。

如果您确实使用默认进度条，那么按照建议设置最大/最小高度就可以了。但是，如果您使用的是 Holo.Light（或 Holo）条，则设置最大/最小高度将不起作用。这是将最大/最小高度设置为 25 和 100 倾角的示例输出：

最大/最小设置为 25 倾角： ![25 倾角高度进度条](../Images/98948386200ce81c7316eff2784066d0.png)

最大/最小设置为 100 倾角： ![100 倾角高度进度条](../Images/57bc63420aaae607322bb9a429aa3ecd.png)

您可以看到底层可绘制对象 (progress_primary_holo_light.9.png) 没有像您预期的那样缩放。原因是 9-patch 边框仅缩放顶部和底部的几个像素：

![9补丁](../Images/316d2ede3c35ed87159782fc7d3fb0eb.png)

由单像素黑色边框（绿色箭头）包围的水平区域是当 Android 需要垂直调整 .png 大小时被拉伸的部分。两个红色箭头之间的区域不会垂直拉伸。

解决此问题的最佳解决方案是更改 9patch .png 以拉伸条而不是“画布区域”，然后创建自定义进度条 xml 以使用这些 9patch。此处类似描述：[https ://stackoverflow.com/a/18832349](https://stackoverflow.com/a/18832349)

这是我对非不确定 Holo.Light ProgressBar 的实现。您必须为不确定和 Holo ProgressBars 添加自己的 9 个补丁。理想情况下，我应该完全移除画布区域。相反，我离开了它，但将“条”区域设置为可拉伸的。 [https://github.com/tir38/ScalingHoloProgressBar](https://github.com/tir38/ScalingHoloProgressBar)

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2020-08-18T07:42:12.417

您可以使用**`LinearProgressIndicator`**Material Components Library 提供的属性和**`app:trackThickness`**属性：

```
<com.google.android.material.progressindicator.LinearProgressIndicator
    android:indeterminate="true"
    app:trackThickness="xxdp"
    ../> 
```

与`12dp`：

[![在此处输入图像描述](../Images/29a6c4d96f04c4bba625050fef26933d.png)](https://i.stack.imgur.com/Q2qK8.png)

与`4dp`：

[![在此处输入图像描述](../Images/ef45a6f4c22433c450adc304a036b727.png)](https://i.stack.imgur.com/0lVaD.png)

**注意：**它至少需要 version **`1.3.0-alpha04`**。

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2019-11-18T16:33:53.367

这里有很多赞成票的解决方案对我不起作用，即使是接受的答案。我通过设置 scaleY 解决了这个问题，但如果您需要太多高度，这不是一个好的解决方案，因为可绘制对象是像素化的。

**以编程方式：**

* * *

```
progressBar.setScaleY(2f); 
```

**XML 布局：**

* * *

```
android:scaleY="2" 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2012-11-22T09:57:02.303

```
<ProgressBar  
android:minHeight="20dip" 
android:maxHeight="20dip"/> 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2018-12-26T06:24:34.863

这是我用过的进度条。

```
<ProgressBar
     android:padding="@dimen/dimen_5"
     android:layout_below="@+id/txt_chklist_progress"
     android:id="@+id/pb_media_progress"
     style="@style/MyProgressBar"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:layout_gravity="center"
     android:progress="70"
     android:scaleY="5"
     android:max="100"
     android:progressBackgroundTint="@color/white"
     android:progressTint="@color/green_above_avg" /> 
```

这是我的风格标签

```
 <style name="MyProgressBar" parent="@style/Widget.AppCompat.ProgressBar.Horizontal">
    <item name="android:progressBackgroundTint">@color/white</item>
    <item name="android:progressTint">@color/green_above_avg</item>
</style> 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-11-22T10:08:57.727

值->styles.xml

```
<style name="tallerBarStyle" parent="@android:style/Widget.SeekBar">
    <item name="android:indeterminateOnly">false</item>
    <item name="android:progressDrawable">@android:drawable/progress_horizontal</item>
    <item name="android:indeterminateDrawable">@android:drawable/progress_horizontal</item>
    <item name="android:minHeight">8dip</item>
    <item name="android:maxHeight">20dip</item>
</style> 
```

然后在你的 ProgressBar 添加：

```
style="@style/tallerBarStyle" 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-06-25T10:12:50.647

您可以将进度条的样式设置为：

```
style="@android:style/Widget.ProgressBar.Horizontal" 
```

# sharepoint - 通过 Selenium webdriver 处理 Sharepoint 模式窗口

> ID：13509990
> 
> 赞同：2
> 
> 时间：2012-11-22T09:55:57.877
> 
> 标签：sharepoint, selenium, modal-dialog

我正在使用 Selenium webdriver 自动化共享点应用程序。

单击一个链接以将新项目添加到列表中时，它会打开窗口/框架（不确定），一种模态弹出窗口。执行脚本时，出现无法定位元素的错误。在下图中，当我使用 查找所有窗口句柄`driver.getwindowhandles()`时，它只提供 1 个窗口作为父窗口。而不是子窗口。相同的代码能够通过 selenium IDE 运行，但不能通过 JUnit。请帮助我如何处理这件事。

```
driver.findElement(By.xpath("//div[@id='zz9_V4QuickLaunchMenu']/div/ul/li[4]/a/span/span")).click();
driver.findElement(By.id("idHomePageNewLink")).click();
Thread.sleep(5000); 
```

**//此时给出错误，这是子弹出窗口上文本字段的 id。**

```
driver.findElement(By.id("ctl00_m_g_99918f84_a256_44b4_819e_982688a9f15c_ctl00_ctl05_ctl00_ctl00_ctl00_ctl04_ctl00_ctl00_UrlFieldUrl")).clear();        
driver.findElement(By.id("ctl00_m_g_99918f84_a256_44b4_819e_982688a9f15c_ctl00_ctl05_ctl00_ctl00_ctl00_ctl04_ctl00_ctl00_UrlFieldUrl")).sendKeys("http://efgh");
System.out.println("Done!!!!"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-22T11:41:07.313

我有一个类似的问题，我已经使用`SwitchTo().Frame`Selenium webdriver 提供的方法解决了。使用以下代码将焦点设置到 SharePoint 模式文件上传对话框：

```
driver.SwitchTo().Frame(driver.FindElement(By.ClassName("ms-dlgFrame"))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:21:15.290

在 SharePoint for New item 表单中，您无需切换窗口。由于 Selenium 将所有内容视为一页，并且自动检测代码。

说到重点，New Item 表单窗口在内部包含 IFrame，其中包含文本框/其他数据消耗对象。

请通过切换框架尝试。通常在新项目窗口中会有 2 个 IFrame 窗口...请检查新项目窗体窗口的 HTML 代码。

```
Driver.SwitchTo().Frame(1);
Console.WriteLine(Driver.Title); 
```

一切顺利......希望这会有所帮助:-)

# ios - 从 Restkit 获取错误描述

> ID：13509996
> 
> 赞同：1
> 
> 时间：2012-11-22T09:56:12.490
> 
> 标签：ios, restkit

当我的 Web 服务返回错误时，我想显示与响应一起发回的错误消息。我在 RestKit 中找不到任何方法。我尝试设置对象管理器的错误映射属性，并使用以下建议：

[来自服务器的 Restkit json 错误响应消息](https://stackoverflow.com/questions/9841203/restkit-json-error-response-msg-from-server)

但这对我不起作用。一方面，RKErrorMessage 似乎不再存在。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T09:58:27.267

试试这个用于 RestKit ~> 0.22.0

```
// Setup error mapping
RKObjectMapping *errorMapping = [RKObjectMapping mappingForClass:[RKErrorMessage class]];
[errorMapping addPropertyMapping: [RKAttributeMapping attributeMappingFromKeyPath:@"errorDescription" toKeyPath:@"errorMessage"]];
RKResponseDescriptor *errorResponseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:errorMapping
                                                                                             method:RKRequestMethodAny
                                                                                        pathPattern:nil
                                                                                            keyPath:nil
                                                                                        statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassClientError)];
[[RKObjectManager sharedManager] addResponseDescriptor:errorResponseDescriptor]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T00:39:16.530

在 v.20 中，您必须做两件事：

首先，导入 RKErrorMessage.h 文件：

> `#import <RestKit/RKErrorMessage.h>`

然后，将错误映射添加到您的 objectManager：

> ```
> RKObjectMapping *errorMapping = [RKObjectMapping mappingForClass:[RKErrorMessage class]];
>     [errorMapping addPropertyMapping:[RKAttributeMapping attributeMappingFromKeyPath:@"error" toKeyPath:@"errorMessage"]];
>     [objectManager addResponseDescriptor:[RKResponseDescriptor responseDescriptorWithMapping:errorMapping pathPattern:nil keyPath:@"error" statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassClientError)]]; 
> ```

# iphone - 我在 addViewController 中有 NSString 值，我想在 DetailsViewController 的 UILabel 中显示这个值

> ID：13509999
> 
> 赞同：0
> 
> 时间：2012-11-22T09:56:30.090
> 
> 标签：iphone, nsstring, uilabel

我是编程新手。任何帮助都将不胜感激。

它在 AddViewController 中。

```
NSLog(@"Am Currently at %@",locatedAt);

DetailsOfPeopleViewController *details=[DetailsOfPeopleViewController alloc];
   details.testAddressStr=[NSString stringWithFormat:@"%@",locatedAt]; 
```

`details.testAddressStr`在这里显示值，但它没有将此值传递给 DetailsViewController。

的值`locatedAt`显示在 AddViewController 中。当我尝试在 DetailsViewController 类的 UILabel 中显示此值时，它不会在标签中显示该值。

在 DetailsViewController.h 中：

```
NSString *testAddressStr;

@property(nonatomic,strong) NSString *testAddressStr;
@property(nonatomic,retain)IBOutlet UILabel *addressLabel; 
```

在 DetailsViewController.m 中：

```
 [addressLabel setText:testAddressStr]; 
```

我也在尝试这种方式：

```
addressLabel.text=[NSString stringWithFormat:@"%@",testAddressStr]; 
```

我并没有真正明白我犯错的地方......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T06:10:06.297

您可以使用[NSUserDefault发送数据](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)

**设定值**

```
NSUserDefaults * defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:[NSString stringWithFormat:@"%@",txtView.text]; forKey:@"testPersonNotesStr"];
[defaults synchronize]; 
```

**获取值**

```
testPersonNotesStr = [[NSUserDefaults standardUserDefaults] objectForKey:@"testPersonNotesStr"];
NSLog(@"PERSON NOTE is........ %@",testPersonNotesStr); 
```

**:)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:19:25.990

尝试更换

```
 [addressLabel setText:testAddressStr]; 
```

与以下

```
 [addressLabel setText:self.testAddressStr]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:02:38.257

问题是由于您分配了一个自动释放的变量。它在您将其显示在 detailView 上之前已发布。所以你需要保留它。或者您需要分配`testAddressStr`.

**只需替换这一行：**

```
details.testAddressStr=[NSString stringWithFormat:@"%@",locatedAt]; 
```

**和：**

```
details.testAddressStr = [[NSString stringWithFormat:@"%@",locatedAt] retain]; 
```

**或者**

```
details.testAddressStr = [[NSString alloc] initWithString:[NSString stringWithFormat:@"%@",locatedAt]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T10:04:54.107

保留你的字符串**`locatedAt`**，你已经初始化了它。像这样

```
[locatedAt retain]; 
```

享受编程

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T10:23:23.147

在 Objective-C 中没有“对象的范围”这样的东西。范围规则与对象的生命周期无关——保留计数就是一切。

您通常需要声明实例变量的所有权。请参阅 Objective-C 内存管理规则。使用保留属性，您的属性设置者声称拥有新价值的所有权并放弃旧价值的所有权。使用 assign 属性，周围的代码必须这样做，这在职责和关注点分离方面同样混乱。使用 assign 属性的原因是您无法保留该值（例如 BOOL 或 NSRect 等非对象类型），或者保留它会导致不必要的副作用。

顺便说一句，在 NSString 的情况下，正确的属性类型通常是副本。这样，如果有人传入 NSMutableString（这是有效的——它是一种 NSString），它就不会从你下面改变。