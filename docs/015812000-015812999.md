# StackOverflow 问答 15812000-15812999

# javascript - 带有 JSON 的 Javascript 对象

> ID：15812004
> 
> 赞同：0
> 
> 时间：2013-04-04T13:02:35.517
> 
> 标签：javascript, json

我确定这之前一定有人问过，但我找不到关于 SO 的示例。我有一个 JSON 字符串，它的开头是这样的：

```
{"model":"14","imgsize":"890","selection":{"SC":"BC","PC":"AC"},"changed":{"PC":"AC"}} 
```

需要在用户输入时更改字符串，以便“选择”记录用户单击的所有输入，而“更改”是用户单击的最后一件事。

所以我有一个函数可以从文本区域读取 JSON 字符串，根据用户选择的内容（节点和值）对其进行修改，然后将其写回文本区域进行调试。

```
function changeJSON(node, value) {
    json = JSON.parse($('#json').val());
    json.selection[node] = value;
    delete json.changed;
    json.changed = {node:value};
    $('#json').val(JSON.stringify(json));
} 
```

“选择”工作得很好，但“更改”更新了我传递的文字变量名称（在本例中为节点），即如果我用 changeJSON("BC","HC") 调用函数，则 JSON 字符串变为：

```
{"model":"14","imgsize":"890","selection":{"SC":"BC","PC":"AC","BC":"HC"},"changed":{"node":"HC"}} 
```

我了解 javascript 正在尝试做什么，但我希望更改的元素是我的变量包含的内容，即

```
,"changed":{"BC","HC"} 
```

并不是

```
,"changed":{"node","HC"} 
```

我很想有人告诉我我做错了什么！？

编辑

已解决 - 请参阅下面的昆汀解释，了解原因和我对必要代码更改的回答 - 希望对其他人有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:16:29.887

> 我不认为这是同一个问题，我的问题是为什么使用文字变量名而不是变量的内容

[引用](https://stackoverflow.com/questions/4199126/how-to-assign-variable-value-as-variable-name-in-a-hash)的问题解释了如何解决问题，但因为您要求解释。

变量名是 JavaScript 标识符。

对象文字语法中的属性名称也是 JavaScript 标识符（尽管您可以使用字符串文字代替）。

由于标识符不能同时是变量和属性名称，因此不能在对象字面量语法中使用变量作为属性名称。

如引用问题中所述，您必须创建对象，然后使用方括号表示法中的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:23:29.827

正如昆汀建议的那样，解决方案是首先创建对象，即

```
delete json.changed;
json.changed = {};
json.changed[node] = value; 
```

# android - Android - 没有标签的 Json - 解析

> ID：15812005
> 
> 赞同：-2
> 
> 时间：2013-04-04T13:02:37.587
> 
> 标签：android, json

如何从 URL 解析 json？下面是我没有标签的 json 结构。

```
[{"channelId":"0465CDBE","channelName":"ATV2"},{"channelId":"06E6923B1","channelName":"Phoenix"},{"channelId":"07B4FB7ed","channelName":"N24"},{"channelId":"115B73E39","channelName":"ORF2"}, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:06:57.880

只需获取`JSONArray`

```
JSONArray jArr = new JSONArray(jsonString);
for(int i=0;i<jArr.length;i++)
{
String jChannel = jArr.getJSONObject(i).getString("channelId");
 String jChannelName = jArr.getJSONObject(i).getString("channelName");

//you can now play with these variables or add to some list or do whatever you like.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:05:08.453

外部对象是一个 JSONArray，因此您可以使用“for”对其进行迭代。在您的 json 数组中，您有简单的 json 对象。您可以通过键解析它或迭代键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:07:52.970

您可以使用 json 对象并使用 getJSONArray 示例获取值：

```
testob = {"channelId":"07B4FB7ed","channelName":"N24"}, {"channelId":"115B73E39","channelName":"ORF2"},

JSONObject jsonObject = new JSONObject(testob);             
JSONArray dataArray = jsonObject.getJSONArray("data");              
JSONObject jsonProductData = dataArray.getJSONObject(0); 
```

# php - 不使用“together”的内连接关系

> ID：15812006
> 
> 赞同：0
> 
> 时间：2013-04-04T13:02:47.003
> 
> 标签：php, activerecord, yii

我正在尝试使用范围按类别过滤产品，我通过内部加入类别来做到这一点，问题是它只有在我一起打开时才有效，这会打乱分页

我记得这样做没有问题还尝试在 with() 定义中使用 'on'=> 而不是 'condition'=> ，工作原理几乎相同，但我认为后者在 db-wise 方面较慢

有任何想法吗？

附言。不幸的是，离开一个类别的产品不是一种选择

```
<?php

/**
 * ProductCategory model
 */
class ProductCategory extends CActiveRecord
{
    //...
    public function relations()
    {
        return array(
            //...
            'parent' => array(self::BELONGS_TO, 'ProductCategory', 'parentId'),
            'children' => array(self::HAS_MANY, 'ProductCategory', 'parentId'),
            //...
        );
    }
    //...
}

/**
 * Product model
 */
class Product extends CActiveRecord
{
    //...
    public function relations()
    {
        return array(
            //...
            'categoriesJunction' => array(self::HAS_MANY, 'ProductCategoriesProducts', 'productId'),
            'categories' => array(self::HAS_MANY, 'ProductCategory', array('categoryId'=>'id'), 'through'=>'categoriesJunction'),
            //...
        );
    }

    /**
     * Category scope
     * 
     * @param mixed Category ids the product must belong to (int or array of int)
     * @return \Product
     */
    public function category($category = null) {
        if ($category) {
            $category = ProductCategory::model()->resetScope()->with('children')->findByPk($category);

            if ($category) {
                $categories = array($category->id);

                if (is_array($category->children)) {
                    foreach ($category->children as $child) {
                        $categories[] = $child->id;
                    }
                }

                $this->getDbCriteria()->mergeWith(array(
                    'with' => array(
                        'categories' => array(
                            'on'=>'categories.id=' . implode(' or categories.id=', $categories),
                            'joinType' => 'inner join',
                            //'together'=>true,
                        ),
                    ),
                ));
            }
        }

        return $this;
    }
    //...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:40:39.963

更新：选择 => false 是要走的路

> D.Mill 4 月 5 日 9:33
> 
> > 我同意 aboce 的评论，这怎么搞乱分页？也许您正在寻找 'select'=>false （在您的条件数组的 'categories' 部分内）

毕竟我找到了一个适用于范围的非常简单的解决方案，只需将范围标准部分更改为

```
$this->getDbCriteria()->mergeWith(array(
    'with'=>array(
        'categories'=>array(
            'select'=>'false',
            'on'=>'categories.id=' . implode(' or categories.id=', $categories),
            'joinType'=>'inner join',
        ),
    ),
    'together'=>true,
)); 
```

# excel - Excel 日期计算

> ID：15812009
> 
> 赞同：-2
> 
> 时间：2013-04-04T13:02:53.567
> 
> 标签：excel, excel-2007, excel-formula, excel-2010

Excel以两种不同的方式计算日期。添加两个日期（甚至没有日期）时，它会显示序列日期。但是当我添加三个日期（奇数个日期）时，它会以正常日期显示。excel日期计算的工作原理...

![在此处输入图像描述](https://i.stack.imgur.com/Rkxy2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:35:48.320

Excel 中的日期存储为数字 - “1.000”的数值等于 01-Jan-1900 00:00 - 分数代表一天中的时间（例如 1/24 = 1 小时）

将单元格格式化为“日期”只会改变表示

![样本日期计算](https://i.stack.imgur.com/oXsft.jpg)

您通常不会“添加日期”，而是直接或使用 Excel 函数在日期中添加/减去天数（或其分数）。所以我无法想象上述计算在哪种情况下有意义。

减去 2 个日期以获得其间的天数确实有意义 - 不要忘记将结果的格式设置为“常规”，因为默认是保留日期格式，并加 1 以获得包含的天数两个转弯日期（例如`=DEnd-DStart+1`）

您可以通过使用自定义格式（如 [s]、[m]:ss、[h]:mm:ss 等）添加时间并以溢出的秒数、分钟数或小时数显示它们。

# windows-phone-7 - WP7 通过消息框从列表框中删除项目

> ID：15812013
> 
> 赞同：2
> 
> 时间：2013-04-04T13:02:55.700
> 
> 标签：windows-phone-7, listboxitems

需要一些帮助，当我单击 tap_event 时，我收到一个消息框删除或取消，该消息框有效，价格从总价中扣除，但之后它没有更新购物车，它在“ListBoxCart.Items.Remove(curr) 上崩溃， 提前致谢！

```
 private void listBoxCart_Tap(object sender, GestureEventArgs e)
    {
        if (MessageBox.Show("Are you sure!", "Delete", MessageBoxButton.OKCancel)
            == MessageBoxResult.OK)
        {

            foreach (Dvd curr in thisapp.ShoppingCart)
            {
                if (curr.Equals(listBoxCart.SelectedItem))
                {
                    listBoxCart.Items.Remove(curr);
                    listBoxCart.SelectedIndex = -1;
                    total -= Convert.ToDecimal(curr.price);

                    NavigationService.Navigate(new Uri("/ShoppingCart.xaml", UriKind.RelativeOrAbsolute));
                }

            }
            txtBoxTotal.Text = total.ToString();
            listBoxCart.ItemsSource = thisapp.ShoppingCart;
        }
        else
        {
            NavigationService.Navigate(new Uri("/ShoppingCart.xaml", UriKind.RelativeOrAbsolute));
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:10:45.713

当您`ItemsSource`为 ListBox 设置属性时，它会生成一个`read-only`集合并显示它们。您要做的是访问此只读集合并对其进行修改，但由于它是只读的，因此您不能这样做。

相反，您可以让您的集合实现`INotifyCollectionChanged`接口并在用户删除项目时引发集合更改事件，或者使用[ObservableCollection](http://msdn.microsoft.com/en-GB/library/ms668604.aspx)来存储您的项目。`ObservableCollection`为您实现`INotifyCollectionChanged`接口，以便您可以从中[删除项目](http://msdn.microsoft.com/en-GB/library/ms132413.aspx)，`ObservableCollection`并且更改将自动反映在列表框中。

ObservableCollection 也实现`INotifyPropertyChanged`，因此任何属性更新也将在 ListBox 中更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T09:57:47.150

我写了一篇文章（抱歉是法语，但你可以阅读 XAML）：[http ://www.peug.ne​​t/2012/05/17/contextmenu-dans-listbox-datatemplate/](http://www.peug.net/2012/05/17/contextmenu-dans-listbox-datatemplate/)

并在代码隐藏中：一个例子：

```
 private void MenuItem_Click(object sender, RoutedEventArgs e)
    {
        var menuItem = sender as MenuItem;
        var fe = VisualTreeHelper.GetParent(menuItem) as FrameworkElement;
        Dvd _fig = fe.DataContext as Dvd;
        thisapp.ShoppingCart.Remove(_fig);

        reloading();
    } 
```

# xml - 如何使用 XSLT 将 XML 文件的节点更改为另一个 XML 文件中的节点？

> ID：15812014
> 
> 赞同：0
> 
> 时间：2013-04-04T13:03:08.430
> 
> 标签：xml, xslt, xsd

一个 XML 文件有

```
<x1>
<x2>xyz</x2>
<x3>xy</x3>
<x4>z</x4>
<x5>123</x5>
</x1> 
```

另一个 XML 有

```
<?xml version="1.0" standalone="yes"?>
<DocumentElement>
  <c>
    <ID>1</ID>
    <XMLFieldName>UserDetails</XMLFieldName>
  </c>
  <c>
    <ID>2</ID>
    <XMLFieldName>UserName</XMLFieldName>
  </c>
  <c>
    <ID>3</ID>
    <XMLFieldName>FirstName</XMLFieldName>
  </c>
  <c>
    <ID>4</ID>
    <XMLFieldName>LastName</XMLFieldName>
  </c>
  <c>
    <ID>5</ID>
    <XMLFieldName>EmployeeID</XMLFieldName>
  </c>
</DocumentElement> 
```

我想得到结果 XML

```
<UserDetails>
<UserName>xyz</UserName>
<FirstName>xy</FirstName>
<LastName>z</LastName>
<EmployeeID>123</EmployeeID>
</UserDetails> 
```

更多信息：实际上第一个和第二个文件在 DB 表中作为 XML 数据类型。我只需要一个 XSLT 来获取第三个 XML 和 X1,x2.... 节点基于标签 ID。

提前谢谢..:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:41:09.197

这是一个与 XSLT 1.0 兼容的选项：

### 样式表

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="xml" version="1.0" encoding="utf-8" indent="yes"/>

  <!--
  Pass the name of the other XML file as a parameter to the transformation;
  x1.xml is used by default
  -->
  <xsl:param name="x1" select="'x1.xml'"/>

  <xsl:template match="/">
    <!-- Only apply the first <c> element -->
    <xsl:apply-templates
      select="DocumentElement/c[XMLFieldName = 'UserDetails']"/>
  </xsl:template>

  <xsl:template match="c[XMLFieldName = 'UserDetails']">
    <!-- Use the value of the XMLFieldName element as the element name -->
    <xsl:element name="{XMLFieldName}">
      <!-- Apply following <c> siblings -->
      <xsl:apply-templates select="following-sibling::c"/>
    </xsl:element>
  </xsl:template>

  <xsl:template match="c">
    <!-- Save the value of the ID child of current <c> element -->
    <xsl:variable name="id" select="ID"/>

    <xsl:element name="{XMLFieldName}">
      <!--
      Get the value of the element in x1.xml that has the same number in its
      element name as the value of the <ID> child of this <c> element
      -->
      <xsl:value-of
        select="document($x1)/*/*[substring-after(local-name(), 'x') = $id]"/>
    </xsl:element>
  </xsl:template>

</xsl:stylesheet> 
```

### 输入

```
<?xml version="1.0" standalone="yes"?>
<DocumentElement>
  <c>
    <ID>1</ID>
    <XMLFieldName>UserDetails</XMLFieldName>
  </c>
  <c>
    <ID>2</ID>
    <XMLFieldName>UserName</XMLFieldName>
  </c>
  <c>
    <ID>3</ID>
    <XMLFieldName>FirstName</XMLFieldName>
  </c>
  <c>
    <ID>4</ID>
    <XMLFieldName>LastName</XMLFieldName>
  </c>
  <c>
    <ID>5</ID>
    <XMLFieldName>EmployeeID</XMLFieldName>
  </c>
</DocumentElement> 
```

### x1.xml

```
<x1>
  <x2>xyz</x2>
  <x3>xy</x3>
  <x4>z</x4>
  <x5>123</x5>
</x1> 
```

### 输出

```
<?xml version="1.0" encoding="utf-8"?>
<UserDetails>
  <UserName>xyz</UserName>
  <FirstName>xy</FirstName>
  <LastName>z</LastName>
  <EmployeeID>123</EmployeeID>
</UserDetails> 
```

# c# - LINQ to Entities 无法识别该方法，并且该方法无法转换为存储表达式

> ID：15812018
> 
> 赞同：10
> 
> 时间：2013-04-04T13:03:13.070
> 
> 标签：c#, asp.net-mvc, entity-framework, linq-to-entities

我使用实体框架调用数据库中的某个日期。但我下面的代码给出了这个错误

**LINQ to Entities 无法识别方法“SchoolBreifcase.Compliance get_Item(Int32)”方法，并且该方法无法转换为存储表达式。**

这是我的完整代码

```
FinancialCompliance financialCompliance = new FinancialCompliance();
            List<Compliance> compliance = null;
            if (HttpContext.Current.User.IsInRole("SchoolAdmin"))
            {

                compliance = datamodel.Compliances.Where(u => u.UserId == userId).OrderBy(c => c.AddedDate).ToList();

            }
            if (HttpContext.Current.User.IsInRole("User"))
            {
                compliance = datamodel.Compliances.Where(u => u.VerifierId == userId || u.OwnerId == userId).OrderBy(c => c.AddedDate).ToList();
            }
            if (compliance != null)
            {
                for (int i = 1; i < compliance.Count; i++)
                {
                    financialCompliance = datamodel.FinancialCompliances.Where(f => f.ComplianceId == compliance[i].ComplianceId).SingleOrDefault();
                    if (compliance.Count == i)
                    {
                        return financialCompliance;
                    }
                }
            }
            return financialCompliance;
        } 
```

这一行给出了这个错误：

```
financialCompliance = datamodel.FinancialCompliances.Where(f => f.ComplianceId == compliance[i].ComplianceId).SingleOrDefault(); 
```

**无助于堆栈溢出答案** 我在此堆栈溢出站点中找到了一些答案

[LINQ to Entities 无法识别该方法](https://stackoverflow.com/questions/3554630/linq-to-entities-does-not-recognize-the-method)

等等。**但对我没有帮助。所以我问了这个问题。请不要因为已经问过而关闭这个问题**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T13:08:38.647

您需要创建一个变量来引用，`compliance[i].ComplianceId`然后再使用它。

```
for (int i = 1; i < compliance.Count; i++)
{
    var complianceId = compliance[i].ComplianceId;
    financialCompliance = datamodel.FinancialCompliances.Where(f => f.ComplianceId == complianceId ).SingleOrDefault();
    if (compliance.Count == i)
    {
        return financialCompliance;
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-04T13:07:08.747

这是关于`compliance[i].ComplianceId`. 首先创建一个变量：

```
var id = compliance[i].ComplianceId;

financialCompliance = datamodel.FinancialCompliances
                      .Where(f => f.ComplianceId == id).SingleOrDefault(); 
```

# sql - 在 SQL Server 的表中查找不同的组

> ID：15812022
> 
> 赞同：0
> 
> 时间：2013-04-04T13:03:26.537
> 
> 标签：sql, sql-server

我在 SQL Server 中有一个表，其中包含以下记录：

```
ID              Name
---------------------
1           CTSH
1           JPMC
1           CSFB
2           CSFB
2           JPMC
2           CTSH
3           CTSH
3           MSSB
4           CTSH
4           JPMC
4           CSFB
5           CTSH
5           MSSB 
```

我想根据名称找出所有不同的组。例如，ID 为 1 的所有名称与 ID 为 2 和 4 的名称完全相同。在这种情况下，我只想选择 ID 1 的所有记录。

这是我的最终输出的样子：

```
ID              Name
---------------------
1           CTSH
1           JPMC
1           CSFB
3           MSSB
3           CTSH 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:06:03.530

您只需要使用聚合`ID`每个名称`MIN()`

```
SELECT  MIN(ID) ID, Name
FROM    tableName
GROUP   BY Name 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/73c57/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:26:21.040

这相当复杂，因为您正在尝试匹配两组。这是解决此问题的一种方法，使用`full outer join`：

```
select *
from t
where t.id in (
    select distinct min(a.id) as idunique
    from (select t1.id, t2.id
          from (select t.*, count(*) over (partition by id) as NumNames
                from t
               ) t1 full outer join
               (select t.*, count(*) over (partition by id) as NumNames
                from t
               ) t2
               on t1.name = t2.name
          group by t1.id, t2.id
          having count(*) = t1.NumNames and count(*) = t2.NumNames
        ) a
    group by t2.id
  ) 
```

好的，这相当复杂。当所有名称都匹配并且匹配名称的数量是每个名称上的名称数量时，两个 id 具有 asme 名称集。这就是聚合/全外连接子查询的作用。结果是一组所有匹配的 id 对（包括身份）。

然后，使用与 的聚合从这些对中提取最小 id `min()`，这个 id 是为最终连接选择的一个，以获取与该集合对应的所有行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:15:34.007

通过简单地执行此操作，所有不同的名称将与分配给它的最小 ID 一起显示：

```
SELECT  DISTINCT Name , MIN(ID) ID
FROM    tableName
Group BY NAME 
```

# cakephp - 下拉菜单中的 Cakephp 分页？

> ID：15812027
> 
> 赞同：0
> 
> 时间：2013-04-04T13:03:42.323
> 
> 标签：cakephp, pagination, cakephp-2.0, form-helpers

我正在寻找一种方法来处理**下拉菜单中的分页选项。**

我希望我的用户使用我的过滤选项以相同的形式选择排序顺序，所以当他们点击“发送”时，分页顺序已经设置.orm

例如：

```
$this->Form->input('paginationorder',array(
        'label' => 'order',
        'options' => array(
           'sort:id/direction:desc' => 'New Items, desc',
           'sort:id/direction:asc' => 'New Items,asc',
            ),
        'div' => false                 
        )
    ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-05-18T10:48:26.623

```
 $(function() {
       $('#sort-properties').change(function() {   // replace the ID_OF_YOUR_SELECT_BOX with the id to your select box given by Cake
           var price = $(this).val();
           window.location = baseUrl + 'properties/property_view/'+price;
        });
    });

<?php

echo $this->Form->input('orderby', array(
    'id' => 'sort-properties',
    'options' => array(
        'sort:sale_rent_price/direction:asc' => 'Sort by Price Low to High',
        'sort:sale_rent_price/direction:desc' => 'Sort by Price High to Low',
        'sort:created/direction:asc' => 'Sort by Date Old to New',
        'sort:created/direction:desc' => 'Sort by Date New to Old'

    ),
    'label' => false,
    'empty' => 'Default Order'
));
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:50:46.957

I would change the values of the options to e.g. fieldname.desc, like :

```
$this->Form->input('paginationorder',array(
        'label' => 'order',
        'options' => array(
           'id.desc' => 'New Items, desc',
           'id.asc' => 'New Items,asc',
            ),
        'div' => false                 
        )
    ); 
```

Afterwards in the controller put the values to an array via the explode method:

```
$order = explode(".", $this->request->data['Model']['field']); 
```

then you can use the values in your find condition, like:

```
$result = $this->Model->find('all', array(
    'order' => array( $order[0] => $order[1] )
)); 
```

There is propably a more elegant way to make this, but this should work.

# codeigniter - codeigniter 无法识别某些验证

> ID：15812035
> 
> 赞同：0
> 
> 时间：2013-04-04T13:03:54.447
> 
> 标签：codeigniter, codeigniter-2

所以我有一个简单的注册表单，出于某种奇怪的原因，有些验证有效，有些无效。我为 conern 中的语言（即阿拉伯语）定义了一个单独的语言文件夹。它适用于用户名、密码和密码确认，但不适用于其他字段。出了什么问题？

```
 public function registration()
     {      
            $this->form_validation->set_rules('fullname', 'الاسم الكامل', 'isset | required | alpha');
            $this->form_validation->set_rules('username', 'اسم المستخدم', 'required');
            $this->form_validation->set_rules('password', 'كلمة السر', 'required');
            $this->form_validation->set_rules('passconf', 'إعادة كلمة السر', 'required');
            $this->form_validation->set_rules('email', 'الايميل', 'required |email');
            $this->form_validation->set_rules('city', 'المدينة', 'required');
            $this->form_validation->set_rules('userfile', 'صورة الملف الشخصي', 'upload_no_file_selected');

            if($this->form_validation->run() == FALSE)
            {
               $this->index();
            }
            else{
               $this->user_model->add_user();
               $this->thank();
            }

      } 
```

形式：

```
<html>
<head>
<title></title>
<meta http-equiv='Content-Type' content='text/html; charset=utf-8'>

</head>
<body dir="rtl">

<?php echo validation_errors(); ?>

<?php echo form_open_multipart('membership/registration'); ?>

<h5>الإسم الكامل</h5>
<input type="text" name="fullname" value="" size="80" />

<h5>اسم المستخدم</h5>
<input type="text" name="username" value="" size="50" />

<h5>كلمة السر</h5>
<input type="text" name="password" value="" size="50" />

<h5>إعادة كلمة السر</h5>
<input type="text" name="passconf" value="" size="50" />

<h5>الايميل</h5>
<input type="text" name="email" value="" size="50" />

<h5>المدينة</h5>
<select name="city">
  <option value="riyadh">الرياض</option>
  <option value="jeddah">جدة</option>
  <option value="dhahran">الظهران</option>
  <option value="mecca">مكة</option>
</select>

<h5>صورة الملف الشخصي</h5>
<input type="file" name="userfile" size="20" />
<br><br>

<div><input type="submit" value="Submit" /></div>

</form>

</body>
</html> 
```

感谢帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:19:57.260

删除验证规则之间的空格，如下所示：

```
$this->form_validation->set_rules('fullname', 'الاسم الكامل', 'isset|required|alpha'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:20:10.883

我找到了答案，哦，是不是很傻！只需删除验证规则之间的空格就可以了！所以例如

```
alpha|isset|required 
```

# android - 意图创建的空指针异常

> ID：15812036
> 
> 赞同：-4
> 
> 时间：2013-04-04T13:03:54.700
> 
> 标签：android, android-intent, nullpointerexception

我遇到了一个从未有过的错误：当我使用以下内容时

```
Intent intent = new Intent().setClass(this, Research.class); 
```

我有一个 NullPointerException ......但是 Research.class 不是 null 并且“这个”更近......但是 Research 类在不同的包中，有问题吗？不同的包装但相同的项目。

我的堆栈跟踪：

```
java.lang.NullPointerException 
at android.content.ContextWrapper.getPackageName(ContextWrapper.java:135) 
at android.content.ComponentName.<init>(ComponentName.java:75)  
at android.content.Intent.<init>(Intent.java:3491) 
at mypackage.Connect.disconnect(Connect.java:92), and line 92 is the one I posted. 
```

我已经很好地导入了意图所需的类，它在 manifest.xml 中声明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:05:53.207

尝试这个：

```
Intent intent = new Intent(this, Research.class); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:06:42.580

在您的活动中导入该包。

```
import com.anotherpackage.*; 
```

和

```
Intent intent = new Intent(YourCurrentActivity.this, Research.class);           
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T13:07:34.450

我有两个包

1.  `com.example.testapp`是我的`main Package`

在这我有`MainActivity`

2 - 我有另一个包名`com.example.main.util`

在这我有`testActivity`

* * *

所以在android清单中我添加如下：

```
<activity android:name="com.example.main.util.testActivity" > 
```

现在我必须打电话`testActivity`，`MainActivity`然后我写：

```
startActivity(new Intent(MainActivity.this, testActivity.class)); 
```

# c# - 在wpf中绘制垂直线

> ID：15812037
> 
> 赞同：2
> 
> 时间：2013-04-04T13:03:55.323
> 
> 标签：c#, wpf

我编写了以下代码用于在画布上生成线条

**XAML**

```
<Canvas HorizontalAlignment="Left" 
        x:Name="canvas1" Height="219" 
        Margin="10,10,0,0" Grid.Row="1" 
        VerticalAlignment="Top" Width="365"/> 
```

**C＃**

```
private void Draw()
{
    canvas1.Children.Clear();
    for (int i = 0; i < data.Length; i++)
    {
        data[i] = i;
        lines[i] = new Line()
        {
            X1 = leftMargin,
            Y1 = i * scale,
            X2 = i * scale,
            Y2 = i * scale,
            StrokeThickness = 2,
            Stroke = new SolidColorBrush(Colors.Black)
        };
        canvas1.Children.Add(lines[i]);
    }
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/XadEP.png)

但我想画线如下。如何旋转画布以实现所需的输出 ![在此处输入图像描述](https://i.stack.imgur.com/gJfrm.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:09:29.043

```
<Canvas.RenderTransform>
    <RotateTransform CenterX="110" CenterY="183" Angle="270" />
</Canvas.RenderTransform> 
```

或通过代码：

```
Canvas.RenderTransform = new RotateTransform(270, 109.5, 182.5); 
```

像这样的东西？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:12:00.913

如果要旋转画布，只需在其上应用变换即可：

```
<Canvas.RenderTransform>
  <RotateTransform CenterX="110" CenterY="183" Angle="270" />
</Canvas.RenderTransform> 
```

如果您想按照 John Willemse 的建议将您的代码更改为：

```
X1 = i * scale,
Y1 = bottomMargin,
X2 = i * scale,
Y2 = i * scale, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T14:10:08.257

x = 0 和 y = 0 是左上角（不是左下角），所以 y 就像上下

```
private void Draw()
{
    Line[] lines = new Line[100];
    int scale = 3;
    canvas1.Children.Clear();
    int yStart = 290;
    for (int i = 0; i < lines.Length; i++)
    {
        //data[i] = i;
        lines[i] = new Line()
        {
            X1 = i * scale,
            Y1 = yStart,
            X2 = i * scale,
            Y2 = 300 - (i * scale),
            StrokeThickness = 1,
            Stroke = new SolidColorBrush(Colors.Black)
        };
        canvas1.Children.Add(lines[i]);
    }
} 
```

# linux - 检查文件是否存在并等待 sh 脚本运行，直到找到文件

> ID：15812038
> 
> 赞同：1
> 
> 时间：2013-04-04T13:03:57.633
> 
> 标签：linux, bash

我正在使用有时非常慢的 linux 服务器。因此，当我添加一些要为我运行的作业时，我必须等待几个小时才能运行一个简单的计算。

我想知道我是否能够开始下一个分析，但让它等到上一个分析的输出出现。（第二次分析需要第一次分析输出）

我试图让 except 和其他选项工作，但仍然没有成功（在 stackoverflow 的上一个问题中找到 except 和其他选项）： `expect { 'output/analysis_file1.txt' }`

任何想法/提示都会受到赞赏，并将帮助我分配。

我唯一想要的是让第二个脚本等到第一个脚本的文本文件给出。

4个脚本：1。

```
#!/bin/bash
#$ -cwd
./script1.sh 

. ./script2.sh $repla

. ./script3.sh $replac 
```

2：

```
repla=''
for i in 'abcdefghijklmnopqrst'
do
   repla=`echo $i | sed 's/'abc'/'xyz'/g'`
   #echo $repla
done 
```

3：

```
replac=''
for j in $1
do
   replac=`echo $j | sed 's/'xyz'/'san'/g'`
   #echo $replac
done 
```

4：

```
replace=''
for h in $1
do
   replace=`echo $h | sed 's/'san'/'sander'/g'`
   #echo $replace
done 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T13:16:01.917

您可以使用以下核心进行一些修改

```
#!/bin/bash
while  [  ! -f FILE_NAME ]
  do
     sleep SOME_SECONDS
  done
echo "file found" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:25:29.123

而不是独立执行多个脚本，你应该创建一个`master script runner`这样的：

```
#!/bin/bash

# sanity checks & parse arguments

./script1
ret=$?
# check for return value of script1 using $ret variable

./script2
ret=$?
# check for return value of script2 using $ret variable

./script3
ret=$?
# check for return value of script3 using $ret variable

...
# do cleanup and reporting 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T14:29:38.467

`wait`如果您知道在后台运行的进程的 pid，则可以使用。Wait 也将返回它正在等待停止的进程的相同退出代码。

```
firstProcess &  # Running in background
firstPid=$!
otherProcess    # Concurrent with firstProcess
wait $firstPid  # Wait firstProcess finish
anotherProcess 
```

# ember.js - 如果所需的控制器由 {{render}} 助手初始化，则指定控制器之间的依赖关系

> ID：15812039
> 
> 赞同：1
> 
> 时间：2013-04-04T13:03:57.963
> 
> 标签：ember.js

我想知道是否有一种方法可以使用参数指定所需的控制器（无需重新初始化）`needs`，如果控制器已经由`{{render "'.' or '/' containing path"}}`助手初始化。

例如：

```
//tasks.hbs
{{render "tasks/create_task"}}

//tasks_controller.js
App.TasksController = Ember.Controller.extend({
  needs: 'tasksCreateTask',

  aMethod: function() {
    // The following code causes re-initialization of the 
    // App.TasksCreateTaskController, previously initialized by the render helper.
    this.get('controllers.tasksCreateTask');
  }
}); 
```

重新初始化的原因显然是 ember 控制器缓存中同一控制器的不同键：键`controllers:tasks.create_tasks`存在，但不存在`controllers:tasksCreateTasks`. 我认为这可能是一个错误。

请帮我摆脱重新初始化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:31:06.387

这不是错误。控制器的名称是`App.TasksCreateTaskController`，这意味着在`{{render}}`你需要做的时候使用它：

```
{{render "tasks.create_task"}} 
```

您使用的格式：

```
{{render "tasks/create_task"}} 
```

意味着您希望 Ember.js 呈现控制器`Tasks.CreateTaskController`（注意命名空间`Tasks`而不是`App`）。用于告诉 Ember.js 使用不同的`/`命名空间（我认为这不是你想要的）。

# java - 无法使用部署在 Heroku 上的 java 应用程序中的 svnkit 连接到 HTTPS svn 服务器

> ID：15812040
> 
> 赞同：3
> 
> 时间：2013-04-04T13:03:59.393
> 
> 标签：java, svn, heroku, svnkit

我正在使用 svnkit 来获取有关我们的 svn 存储库的一些信息。我使用了 svnkit 文档中提到的示例，当我在本地 Eclipse 中运行示例时，我能够获取详细信息。我们的存储库可通过 https 协议访问。

```
import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.http.*;
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.servlet.*;
import org.tmatesoft.svn.core.SVNDirEntry;
import org.tmatesoft.svn.core.SVNException;
import org.tmatesoft.svn.core.SVNNodeKind;  
import org.tmatesoft.svn.core.SVNURL;
import org.tmatesoft.svn.core.auth.ISVNAuthenticationManager; 
import org.tmatesoft.svn.core.internal.io.dav.DAVRepositoryFactory;
import org.tmatesoft.svn.core.internal.io.fs.FSRepositoryFactory;
import org.tmatesoft.svn.core.internal.io.svn.SVNRepositoryFactoryImpl;
import org.tmatesoft.svn.core.io.SVNRepository;
import org.tmatesoft.svn.core.io.SVNRepositoryFactory;
import org.tmatesoft.svn.core.wc.SVNWCUtil;

public class HelloWorld extends HttpServlet {
public static String abc="";

@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException {
    resp.getWriter().print("Hello from Java! The repository UUID is \n"+ abc);
}

public static void main(String[] args) throws Exception{
    Server server = new Server(Integer.valueOf(System.getenv("PORT")));
    ServletContextHandler context = new ServletContextHandler(ServletContextHandler.SESSIONS);
    context.setContextPath("/");
    server.setHandler(context);
    context.addServlet(new ServletHolder(new HelloWorld()),"/*");

    //If I use these set I am able to fetch the details from SVN.
//String url = "http://svn.svnkit.com/repos/svnkit/trunk/doc";
  //  String name = "anonymous";
    //String password = "anonymous";

    String url = "https://svn.ourComplanyRepo";
    String name = "username";
    String password = "password";
    long startRevision = 0;
    long endRevision = -1;
DAVRepositoryFactory.setup();
SVNRepository repository = null;
repository = SVNRepositoryFactory.create(SVNURL.parseURIEncoded(url));
ISVNAuthenticationManager authManager = SVNWCUtil.createDefaultAuthenticationManager(name, password);
    repository.setAuthenticationManager(authManager);
    SVNURL XYZ =  repository.getLocation();
    abc = repository.getRepositoryUUID(true); 
    server.start();
    server.join();      
}

} 
```

当我将代码部署到 heroku 时，我遇到了一个问题。当我检查 heroku 日志时，我发现了这个问题

```
 0m Exception in thread "main" org.tmatesoft.svn.core.SVNException: svn: E175002: connection refused by the server 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-04T17:44:17.370

[谷歌搜索错误会产生一些有希望的](https://www.google.com/search?q=org.tmatesoft.svn.core.SVNException%3A+svn%3A+E175002%3A+connection+refused+by+the+server)线索，尝试运行：

```
-Dsvnkit.http.sslProtocols="SSLv3" 
```

...正如[这里](http://issues.tmatesoft.com/issue/SVNKIT-176)建议的那样。

# windows - WWW::Mechanize 的随机错误：不支持协议方案“https”（未安装 LWP::Protocol::https）

> ID：15812041
> 
> 赞同：0
> 
> 时间：2013-04-04T13:04:06.640
> 
> 标签：windows, perl, www-mechanize, lwp-useragent

我正在与 WWW::Mechanize 合作，将网站上的产品目录添加到我们的数据库 (Ingram Micro) 中。一切都通过 SSL。

我收到如下随机错误：

`Protocol scheme 'https' is not supported (LWP::Protocol::https not installed)`

...但是，LWP::Protocol::https*已*安装。事实上，大部分时间一切正常。我唯一能想到的是，这与在 Windows 上使用线程有关（该进程将作业拆分为 25 个线程，以弥补 Ingram 网站交付每个页面所花费的长时间）。当我使用单线程时，我还没有看到错误（到目前为止）。

错误不会每次都发生，通常只发生在一个线程上，其余的可以在没有收到它的情况下工作。

然而，这真的很奇怪。我想知道这里是否有人以前见过这样的事情，或者是否有人知道为什么会发生这种情况。

谢谢，

弗朗西斯科

**编辑：**以防万一有人想知道，我在使用 MSVC10 构建的 Windows 7 x64 和 Perl 5.16.3 x64 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:05:36.100

模块不是线程安全的可能是一个问题。参见[这个 Perlmonks 讨论](http://www.perlmonks.org/?node_id=921497)，也关于 LWP 和 https。

该线程（呃...讨论）还提供了一些潜在的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:06:42.937

我使用的解决方案是在每个线程开始时*克隆 Mechanize 对象并**使用克隆版本*。但正如我所说，我使用的是`WWW::Mechanize`not plain `LWP`。

```
$mech = $mech->clone(); 
```

# windows - Windows 7 上的多播套接字

> ID：15812046
> 
> 赞同：2
> 
> 时间：2013-04-04T13:04:16.947
> 
> 标签：windows, delphi, sockets, multicast, freepascal

此代码在 Linux 和 Windows XP 上运行良好，但它总是无法在 Windows 7 64 位和 Windows Server 2008 上添加多播成员资格。

```
uses

  Classes, Sockets,
  {$IFDEF MSWINDOWS}
  Windows,
  Winsock,
  {$ELSE}
  BaseUnix,
  UnixType,
  {$ENDIF}
   Sysutils;

type
TIP_mreq = packed record
    imr_multiaddr: in_addr;     // IP multicast address of group
    imr_interface: in_addr;     // local IP address of interface
  end;

var
  ASock_Addr : SockAddr_In;
  FSocket    : LongInt;
  ipmreq     : TIP_mreq;
  MasterFD,
  TempFD     : TFDSet;
  TestInt    : Integer;
  Timeout    : TTimeVal;
begin
  FSocket := fpSocket(AF_INET, LongInt(SOCK_DGRAM), 0);
  if (FSocket > 0) then
  begin
    fpSetSockOpt(FSocket, SOL_SOCKET, SO_REUSEADDR, PChar('True'), Length('True'));
    FillByte(ASock_Addr, SizeOf(SockAddr_In), 0);
    ASock_Addr.sin_family      := AF_INET;
    ASock_Addr.sin_port        := HtoNS(15510);
    ASock_Addr.sin_addr.S_addr := INADDR_ANY;

    if (fpbind(FSocket, @ASock_Addr, SizeOf(SockAddr_In)) = 0) then
    begin
      FillByte(ipmreq, SizeOf(Tip_mreq),0);
      ipmreq.imr_multiaddr.s_addr := StrToNetAddr('224.126.126.126').s_addr;
      ipmreq.imr_interface.s_addr := StrToNetAddr('10.0.0.3').s_addr;
      fpSetsockOpt(FSocket, IPPROTO_IP, IP_ADD_MEMBERSHIP,  @ipmreq, SizeOf(ipmreq));
      {$IFDEF MSWINDOWS}
          FD_SET(FSocket, MasterFD);
      {$ELSE}
          fpFD_SET(FSocket, MasterFD);
      {$ENDIF} 
```

此代码中的 fpSetSockOpt 在 Windows 7 和 Server 2008 上将始终返回 -1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T13:35:42.173

我想到了。这是与这些操作系统相关的 Freepascal 问题。通过将 fpBind 和 fpSetSockOpt 更改为它们的 Winsock 调用（Bind 和 SetSockOpt），它确实可以在这些操作系统中工作。

# facebook - Facebook javascript sdk 必须使用活动访问令牌来查询有关当前用户的信息

> ID：15812050
> 
> 赞同：7
> 
> 时间：2013-04-04T13:04:23.023
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-access-token

在我的代码中，我有

```
FB.api('/me/friends', function(response) {
            if(response.data) {
                //TODO : what to do if no. of friends is more than 5000 (pagination by fb)
                friends_data=response.data;
                dijit.registry.byId("mainWidget_div").set_friends_data(friends_data);
            } else {
                alert("Error!");
            }

          }); 
```

这给出了一个错误。***但是***，如果我手动调用这个函数（在控制台上），没有错误

```
FB.api('/me/friends', function(response){r=response;});
//wait a while
r 
```

现在`r.data`是我的一群朋友。

我检查了网络面板，发现当我手动调用它时，访问令牌会自动插入到请求 url 中，当通过代码调用它时，访问令牌不会被插入。

我的应用程序中完整的 fb sdk 加载代码是这样的：

```
<script type="text/javascript">
      // You probably don't want to use globals, but this is just example code
      var fbAppId = "{{facebook_app_id}}";

      // This is boilerplate code that is used to initialize the Facebook
      // JS SDK.  You would normally set your App ID in this code.

      // Additional JS functions here
      window.fbAsyncInit = function() {
        FB.init({
          appId      : fbAppId,        // App ID
          status     : true,           // check login status
          cookie     : true,           // enable cookies to allow the server to access the session
          xfbml      : true            // parse page for xfbml or html5 social plugins like login button below
        });

        // Put additional init code here
        dojo.ready(function(){
          FB.api('/me/friends', function(response) {
            if(response.data) {
                //TODO : what to do if no. of friends is more than 5000 (pagination by fb)
                friends_data=response.data;
                dijit.registry.byId("mainWidget_div").set_friends_data(friends_data);
            } else {
                alert("Error!");
            }

          });
        });
      };
      // Load the SDK Asynchronously
      (function(d, s, id){
         var js, fjs = d.getElementsByTagName(s)[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement(s); js.id = id;
         js.src = "//connect.facebook.net/en_US/all.js";
         fjs.parentNode.insertBefore(js, fjs);
       }(document, 'script', 'facebook-jssdk'));

    </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-24T01:45:13.270

[Brent Baisley](https://stackoverflow.com/a/21977100/830988)的回答和[另一个问题](https://stackoverflow.com/a/3549043/830988)的回答帮助我找出了问题所在。

您不能在 FB.init() 之后立即调用 FB.init() 依赖方法，因为它是异步加载的。即使像 dojo.ready() 那样异步加载数据也无济于事。您必须将代码包装在 FB.getLoginStatus() 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-24T01:06:53.543

我的猜测是您正试图在 Facebook API 完全初始化之前获取朋友列表。您看到的错误是什么？

您正在注册 FB.api 调用以在 DOM 就绪 (dojo.ready) 上运行。这可能会导致它加载不同步，即使它全部包含在 fbAsyncInit 中。Friends API 调用本身不依赖于 DOM，所以我不会将它包装在 dojo 调用中。你没有在控制台中这样做，它正在工作。

我不是 javascript 专家。如果我做了一个可能不正确的猜测，那么发生这种情况的原因可能与 javascript 提升有关。

# gcc - 如何声明与 GCC 兼容的 __stdcall 调用约定函数指针

> ID：15812052
> 
> 赞同：4
> 
> 时间：2013-04-04T13:04:31.623
> 
> 标签：gcc, mingw, calling-convention

这适用于 MSVC（编译和链接）。

```
extern void (_TMDLLENTRY * _TMDLLENTRY tpsetunsol _((void (_TMDLLENTRY *)(char _TM_FAR *, long, long)))) _((char _TM_FAR *, long, long)); 
```

但是使用 GCC 编译是可以的，但是链接阶段会因为`undefined reference`指向这个而失败。该声明是否已经与 GCC 兼容，或者可能存在其他问题？

```
#define _TMDLLENTRY __stdcall
#define _TM_FAR 
```

`nm`MSVC 创建的目标文件的输出：

```
00000000 N .debug$S
00000000 N .debug$S
00000000 N .debug$S
00000000 N .debug$S
00000000 N .debug$T
00000000 i .drectve
00000000 r .rdata
00000000 r .rdata
00000000 r .rdata
00000000 t .text
00000000 t .text
00000000 t .text
         U @__security_check_cookie@4
00aa766f a @comp.id
00000001 a @feat.00
         U ___security_cookie
         U __imp__CloseClipboard@0
         U __imp__EmptyClipboard@0
         U __imp__GlobalAlloc@8
         U __imp__GlobalLock@4
         U __imp__GlobalUnlock@4
         U __imp__MessageBoxA@16
         U __imp__OpenClipboard@4
         U __imp__SetClipboardData@8
00000000 T _CheckBroadcast@0
00000000 T _Inittpsetunsol@0
         U _memcpy
         U _memset
         U _sprintf
         U _tpchkunsol@0
         U _tpsetunsol@4
00000000 T _vCSLMsgHandler@12 
```

`nm`MinGW 编译器的输出：

```
nm Release/broadc.o
00000000 b .bss
00000000 d .data
00000000 N .debug_abbrev
00000000 N .debug_aranges
00000000 N .debug_info
00000000 N .debug_line
00000000 N .debug_loc
00000000 r .eh_frame
00000000 r .rdata
00000000 t .text
00000104 T _CheckBroadcast@0
         U _CloseClipboard@0
         U _EmptyClipboard@0
         U _GlobalAlloc@8
         U _GlobalLock@4
         U _GlobalUnlock@4
0000010c T _Inittpsetunsol@0
         U _MessageBoxA@16
         U _OpenClipboard@4
         U _SetClipboardData@8
         U _sprintf
         U _tpchkunsol@0
         U _tpsetunsol
00000000 T _vCSLMsgHandler@12 
```

编辑：看`_tpsetunsol`符号很明显，MSVC 和 GCC 产生不同的符号。

GCC 产生：`U _tpsetunsol`和 MSVC：`U _tpsetunsol@4`

有没有办法让 GCC 产生与 MSVC 相同的符号？

Edit2：输出`nm wtuxws32.lib`（即`tpsetunsol`定义的位置）

```
WTUXWS32.dll:
00000000 i .idata$4
00000000 i .idata$5
00000000 t .text
00000000 I __imp__tpsetunsol@4
         U __IMPORT_DESCRIPTOR_WTUXWS32
00000000 T _tpsetunsol@4 
```

这不可能与GCC一起工作吗？谢谢。

# javascript - 此站点需要启用 JavaScript 和 Cookie - PYTHON

> ID：15812053
> 
> 赞同：0
> 
> 时间：2013-04-04T13:04:32.500
> 
> 标签：javascript, python, cookies

我有一个相对较小的爬虫，它通过 urllib2 读取带有线程的网站。现在我有一个问题，我必须阅读数以千计的网页，ID 向上。它适用于某些网站，但其他网站给我错误，例如“此网站需要启用 JavaScript 和 Cookies”。有谁知道如何以最简单的方式解决这个问题？并且不会减慢我的爬虫速度.....

谢谢...

# javascript - 我如何使用纯 java 脚本解析远程 html 页面

> ID：15812057
> 
> 赞同：3
> 
> 时间：2013-04-04T13:04:41.587
> 
> 标签：javascript, jquery, html, html-parsing

我需要解析远程 html 页面（例如：www.mywesite.com/home）如何获取该网站的 html 页面源以及如何解析该页面

那个html是这样的

```
 <html>
     <body>
        <div class="my-class1">
             <a href="home/link?id=1">hello</a>
        </div>

        <div class="my-class1">
             <a href="home/link?id=2">hey</a>
        </div>

        <div class="my-class1">
             <a href="home/link?id=3">bye</a>
        </div>
     </body>
 </html> 
```

我想输出为

```
 hello
 hey
 bye 
```

我没有使用任何服务器端技术（如 java、.net）我只想使用 java 脚本来实现这一点

是否可以使用纯 javaScript 或任何其他 jQuery 插件解析远程 html 页面

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:10:56.283

普通浏览器javascript无法从任何服务器访问远程页面的内容，除了自己的。

你可以：

1.  在您自己的服务器上有一个合作脚本来获取远程内容

2.  在远程服务器的配合下，您可以通过适当的 CORS ( [http://en.wikipedia.org/wiki/Cross-origin_resource_sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) ) 安排访问内容。

3.  再次与远程服务器合作，如果它通过 javascript 提供其内容，您可以通过创建内联脚本元素来访问它。“JSONP”就是这种方法的一个例子。

4.  如果您编写浏览器插件或插件 - 对于允许使用 javascript 编写此类内容的浏览器 - 那么您不会以同样的方式受浏览器安全模型的约束。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-04T13:17:05.650

假设`origin`固定等，这是我使用的方法：

```
// 获取html的body部分
txt = txt.substr( txt.indexOf('<body>')+6 );
txt = txt.substr(0, txt.indexof('</body>')-1);

// 将 body 粘贴到 div 中
var div = document.createElement('div');
div.innerHTML = txt;

// 从每个元素中提取文本内容（或更有趣的东西）
Array.prototype.slice(div.querySelectorAll('*')).forEach(function(el) {
   if( el.textContent ) console.log( el.textContent );
});

```

# selenium-ide - Selenium IDE [错误] 未找到元素 id=cmp_admin

> ID：15812059
> 
> 赞同：2
> 
> 时间：2013-04-04T13:04:41.747
> 
> 标签：selenium-ide

我正在使用 selenium IDE 1.9.0 来记录测试。请告诉我我没有做错什么以及如何解决问题。

这是我记录测试的步骤。1.我用用户名和密码登录网站 2.我导航到搜索会员页面输入会员姓名，点击姓名链接系统将我引导到会员资料页面。

脚本停在这一行：

```
ClickAndWait  id=cmp_admin 
```

我第一次播放脚本时它运行时没有任何错误。8小时后运行脚本，它提示我以下错误：

```
[error] Element id=cmp_admin not found 
```

我使用调试功能查看出了什么问题。以下是调试窗格中显示的消息：

```
[debug] modifySeparateTestWindowToDetectPageLoads: already polling this window: selenium1365079281311 
[debug] getCurrentWindow newPageLoaded = false 
[error] Element id=cmp_admin not found
[debug] commandError 
[debug] testComplete: failed=true 
```

这是 Selenium IDE 生成的 html 代码

```
<tr>
    <td>open</td>
    <td>/</td>
    <td></td>
</tr>
<tr>
    <td>click</td>
    <td>id=nd_home</td>
    <td></td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>id=cmp_admin</td>
    <td></td>
</tr>
<tr>
    <td>click</td>
    <td>id=quicksearch_anchor</td>
    <td></td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>css=img[alt=&quot;Member&quot;]</td>
    <td></td>
</tr>
<tr>
    <td>type</td>
    <td>id=search_name</td>
    <td>suzy</td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>link=Balagia, Suzy</td>
    <td></td>
</tr>
</tbody></table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T03:51:58.943

如果您在单击任何按钮或链接后单击任何按钮或链接需要一段时间来加载页面，如果页面未完全加载，则 selenium ide 找不到下一个元素的 ID 或名称。要解决此类问题，请使用`Pause , waitfortext, clickandwait`命令

我对代码进行了一些更改，请运行并让我知道它是否适合您。

```
<tr>
    <td>open</td>
    <td>/</td>
    <td></td>
</tr>
<tr>
    <td>click</td>
    <td>id=nd_home</td>
    <td></td>
</tr>
 <tr>
    <td>pause</td>
    <td>1500</td>
    <td></td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>id=cmp_admin</td>
    <td></td>
</tr>
<tr>
    <td>click</td>
    <td>id=quicksearch_anchor</td>
    <td></td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>css=img[alt=&quot;Member&quot;]</td>
    <td></td>
</tr>
<tr>
    <td>type</td>
    <td>id=search_name</td>
    <td>suzy</td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>link=Balagia, Suzy</td>
    <td></td>
</tr>
</tbody></table>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:15:48.007

这可能是几件事。首先，您在页面上寻找的元素 (id=cmp_admin) 是否仍称为 cmp_admin？从您的代码看来，您必须单击 id=nd_home，然后加载一个包含 cmp_admin 的页面。如果是这种情况，很可能页面尚未完成加载，因此该元素尚不存在。尝试在单击 nd_home 之间使用 waitfor 命令，如下所示：

点击 | id=nd_home |

waitForElementPresent | id=cmp_admin |

点击并等待 | id=cmp_admim |

您也可以尝试暂停，等待几秒钟，但我发现 waitfor 命令不那么脆弱，尤其是当您有大量 Ajax 请求或必须加载的元素时。

克伦达图

# c# - 在 sitecore 的新选项卡中打开的返 回 url 的保留类型应该是什么？

> ID：15812062
> 
> 赞同：2
> 
> 时间：2013-04-04T13:04:47.333
> 
> 标签：c#, .net, popup, sitecore, sitecore6

我正在使用 response.redirect 来保存 url，它在同一页面上打开链接，还有什么可以在新标签中打开链接？

```
public partial class DocumentLink : System.Web.UI.UserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if(!Page.IsPostBack)
        {
            try
            {
                Sitecore.Data.Fields.LinkField linkField = SitecoreItem.CurrentItem.Fields["DocumentLink"];
                Response.Redirect(GetUrl(linkField));
            }
            catch (Exception ex)
            {
                Sitecore.Diagnostics.Log.Error(ex.ToString(), this);
            }
        }
    }

    public string GetUrl(Sitecore.Data.Fields.LinkField LinkField)
    {
        try
        {
            string url = "";
            switch (LinkField.LinkType)
            {
                case "internal":
                case "external":
                case "mailto":
                case "anchor":
                case "javascript":
                    url = LinkField.Url;
                    break;
                case "media":
                    MediaItem media = new MediaItem(LinkField.TargetItem);
                    url = Sitecore.StringUtil.EnsurePrefix('/', MediaManager.GetMediaUrl(media));
                    break;
                case "":
                default:
                    break;
            }

            return url;
        }
        catch (Exception ex)
        {
            Sitecore.Diagnostics.Log.Error(ex.ToString(), this);
            throw;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:28:16.600

为什么需要重定向？您是否不在页面上呈现指向文档的链接？

如果是这样，我只需向链接添加一个 css 类并使用一些 jQuery 使所有这些链接在新窗口中打开。

[使用 jQuery 在新窗口中打开链接](http://befused.com/jquery/open-link-new-window)

```
$(document).ready(function(){
    $('.external-link').click(function(event){
        event.preventDefault();
        window.open(this.href);
    });
}); 
```

请注意，您不能强制链接在新选项卡中打开，这取决于用户是否希望新窗口在选项卡中打开的偏好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:44:58.297

您需要执行 javascript 代码才能打开一个新选项卡。这可以使用以下代码执行：

```
ClientScript.RegisterStartupScript(
    this.GetType(), 
    "newTab" + DateTime.Now.Ticks, 
    String.Format("<script>window.open('{0}');</script>", GetUrl(linkField))); 
```

在这里，您可以找到有关动态添加客户端脚本的更多信息[http://msdn.microsoft.com/en-us/library/ms178207.aspx](http://msdn.microsoft.com/en-us/library/ms178207.aspx)。

请记住，浏览器可能会阻止新窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T19:54:11.620

您可以使用 Sitecore 的链接 webcontrol 并将字段名称传递给它，Sitecore 将自动呈现您的 GenralLinkField 的所有属性

```
<sc:Link runat="server"  Field="DocumentLink"> 
```

# raphael - ScaleRaphael 中的多个画布 - 第二个画布中的圆圈出现在第一个

> ID：15812063
> 
> 赞同：2
> 
> 时间：2013-04-04T13:04:54.117
> 
> 标签：raphael

我刚开始使用 Raphael，但我不知道在 ScaleRaphael 中制作多个画布是正确的
（我在响应后使用它来制作网站 > 是否有替代方案？

多个 ScaleRaphael 画布：http: [//jsfiddle.net/karo/gMyP5/13/](http://jsfiddle.net/karo/gMyP5/13/)
或完整视图： http: [//jsfiddle.net/karo/gMyP5/13/embedded/result/](http://jsfiddle.net/karo/gMyP5/13/embedded/result/)
这里发生了一件奇怪的事情。
红色圆圈应该在第二个 div 中，但是如果您使用例如查看代码。萤火虫在全视图然后你看到两个 svgs 都在里面 为什么是这样？

你对我有什么想法吗？谢谢考尔

我的代码：HTML

```
<div id="wrapper">
<div id="paper"></div>
<br>
<div id="paper2"></div>
</div> 
```

JavaScript：

```
var paper = new ScaleRaphael("paper",200,200);
var circle = paper.circle(100, 100, 60).attr({fill:'red'});

var paper2 = new ScaleRaphael("paper2",200,200);
var circle2 = paper2.circle(50, 50, 30).attr({fill:'black'});

function resizePaper(){
  var win = $(this);
  paper.changeSize(win.width(), win.height(), true, false);
  paper2.changeSize(win.width(), win.height(), true, false);

}
resizePaper();
$(window).resize(resizePaper); 
```

CSS

```
#wrapper
{
    position:relative;
}
#paper {
    background-color: lightgray;
    width:100%;
    height:200px;
    position:relative!important;
}
#paper2
{
    background-color: orange;
    width:100%;
    height:100px;
    position:relative!important;
}
svg
{
    position:absolute!important;
    top:0;
    left:0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:13:45.800

ScaleRaphael 只支持一个画布。在代码中，您可以看到它重新引用了第一个现有的`svggroup`或`vmlgroup`元素。

你不需要 ScaleRaphael 来做你正在做的事情。由于版本 2 Raphael 已经包含[`Paper.setViewBox`](http://raphaeljs.com/reference.html#Paper.setViewBox)并且它总是包含[`Paper.setSize`](http://raphaeljs.com/reference.html#Paper.setSize)，它们已经一起做到了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:10:25.867

我发现了一个问题和一个解决方法它是如何工作的......看看这里：http: [//jsfiddle.net/karo/r4qvt/12/](http://jsfiddle.net/karo/r4qvt/12/)

我首先有纸 div，然后是红色 div

```
 <div id="paper"></div>
       <div id="red"></div>

   </div>
</div> 
```

如果我在制作paperGrey之前为div“red”和其中的矩形制作redpaper并“与”第一个div“交谈”。然后它工作

```
var redpaper = new ScaleRaphael("red",300,200);
redpaper.rect(0, 0, 250, 100).attr({fill:'red'});

var paperGrey = new ScaleRaphael("paper",400,200);
var circle = paperGrey.circle(40, 140, 60).attr({fill:'blue'}); 
```

如果我这样做，它就不起作用

```
var paperGrey = new ScaleRaphael("paper",400,200);
var circle = paperGrey.circle(40, 140, 60).attr({fill:'blue'});    

var redpaper = new ScaleRaphael("red",300,200);
redpaper.rect(0, 0, 250, 100).attr({fill:'red'}); 
```

...奇怪，但我找到了解决方案；）

# ios - iPhone模拟器中的僵尸进程？

> ID：15812064
> 
> 赞同：1
> 
> 时间：2013-04-04T13:04:54.420
> 
> 标签：ios, ios-simulator, zombie-process

我已经在应用程序上工作了一段时间，最近才开始注意到每次启动应用程序都会产生这些僵尸进程？我现在已经关闭了 Xcode 和模拟器，但它们仍然存在。是否有一些新的更好的方法可以在模拟器上测试您的应用程序来避免这种情况和/或为什么会发生这种情况？

```
ps aux
.
.
.
derek            2696   0.0  0.0        0      0   ??  Z     1:25PM   0:00.00 (Test App)
    derek           93243   0.0  0.0        0      0   ??  Z     9:00AM   0:00.00 (Test App)
    derek           89633   0.0  0.0        0      0   ??  Z    Wed07AM   0:00.00 (Another App)
    derek           87119   0.0  0.0        0      0   ??  Z    Tue03PM   0:00.00 (Another App)
    derek           86711   0.0  0.0        0      0   ??  Z    Tue01PM   0:00.00 (Another App)
    derek           86661   0.0  0.0        0      0   ??  Z    Tue01PM   0:00.00 (Another App)
    derek           86616   0.0  0.0        0      0   ??  Z    Tue12PM   0:00.00 (Another App)
    derek           86278   0.0  0.0        0      0   ??  Z    Tue10AM   0:00.00 (Another App)
    derek           83049   0.0  0.0        0      0   ??  Z    Mon03PM   0:00.00 (Another App)
    derek           83032   0.0  0.0        0      0   ??  Z    Mon03PM   0:00.00 (Another App)
    derek           82996   0.0  0.0        0      0   ??  Z    Mon03PM   0:00.00 (Another App)
    derek           82232   0.0  0.0        0      0   ??  Z    Mon03PM   0:00.00 (Another App)
    derek           82137   0.0  0.0        0      0   ??  Z    Mon03PM   0:00.00 (Another App)
    derek           82082   0.0  0.0        0      0   ??  Z    Mon03PM   0:00.00 (Another App)
    derek           82047   0.0  0.0        0      0   ??  Z    Mon03PM   0:00.00 (Another App)
    derek           81673   0.0  0.0        0      0   ??  Z    Mon03PM   0:00.00 (Another App)
    derek           81473   0.0  0.0        0      0   ??  Z    Mon03PM   0:00.00 (Another App)
    derek           76024   0.0  0.0        0      0   ??  Z    Mon12PM   0:00.00 (Another App)
    derek           72214   0.0  0.0        0      0   ??  Z    Mon10AM   0:00.00 (Another App)
    derek           70631   0.0  0.0        0      0   ??  Z    Mon09AM   0:00.00 (Another App)
    derek           70468   0.0  0.0        0      0   ??  Z    Mon09AM   0:00.00 (Another App)
    derek           70437   0.0  0.0        0      0   ??  Z    Mon09AM   0:00.00 (Another App)
    derek           68039   0.0  0.0        0      0   ??  Z    Mon08AM   0:00.00 (Another App)
    derek           67471   0.0  0.0        0      0   ??  Z    Mon08AM   0:00.00 (Another App)
    derek           67425   0.0  0.0        0      0   ??  Z    Mon08AM   0:00.00 (Another App)
    derek           67344   0.0  0.0        0      0   ??  Z    Mon08AM   0:00.00 (Another App)
    derek           67311   0.0  0.0        0      0   ??  Z    Mon08AM   0:00.00 (Another App)
    derek           67281   0.0  0.0        0      0   ??  Z    Mon08AM   0:00.00 (Another App)
    derek           67235   0.0  0.0        0      0   ??  Z    Mon08AM   0:00.00 (Another App)
.
.
.
. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T20:56:19.767

这是 Xcode 4.6.2 及更早版本中的错误。它已在昨天 (2013-06-13) 发布的 Xcode 4.6.3 中修复。今天早上，我刚刚在 WWDC 上与几位 Apple 工程师讨论了这个问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T14:11:40.433

只需编辑您的目标方案 - > 单击目标上 Xcode 中停止按钮旁边的右侧，选择编辑方案，然后转到诊断选项卡并取消选中“启用僵尸对象”选项。或者最终检查您的参数选项卡并确保没有启用 NSZombieEnabled 参数。应该这样做

# database - joomla 数据库方法

> ID：15812065
> 
> 赞同：3
> 
> 时间：2013-04-04T13:04:56.777
> 
> 标签：database, joomla, bind

在 Joomla 的情况下如何使用 mysqli`bind_param`

这个例子应该如何使用 joomla 数据库方法声明？

```
...
$statement->bind_param('s', $like);
$statement->execute(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T21:50:54.033

在 Joomla！3.1，PDO/Sqlite 和 PDO/Oracle 都支持prepared statements，其他的还没有实现。

鉴于使用“可准备”连接，它将以这种方式工作：

```
$db    = JFactory::getDbo();
$query = $db->getQuery(true);
$query->select('...')->where('...');

$query->bind(':s', $like);

$db->setQuery($query);

$records = $db->loadObjectList(); 
```

# python - 在python中随机选择

> ID：15812068
> 
> 赞同：2
> 
> 时间：2013-04-04T13:05:01.757
> 
> 标签：python, random

我是python新手，所以如果答案很明显，我很抱歉。

我正在尝试从 128 个数字中选择 10 个随机数。然后，如果此列表中存在某个数字，则打印（列表）或（单词）或其他内容。

我可以选择 10 个随机数并打印这些随机数，但如果此随机列表中存在一个数字，我将无法打印。

我通过以下方式挑选并打印 10 个随机数：

```
import random
list = random.sample(range(128), 10)
print list 
```

我正在尝试打印（某些东西），如果这种情况下的数字为 5，则以下列方式出现在此随机列表中：

```
import random
list = random.sample(range(128), 10)
if list == 5:
    print list 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:06:26.510

使用`in`运算符：`if 5 in list`

也是`list`类型的名称，所以我建议为变量使用另一个名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:09:58.727

你可以这样。

```
if 5 in list:
    print list 
```

# vhdl - HDL 合成抱怨灵敏度列表中缺少信号

> ID：15812071
> 
> 赞同：1
> 
> 时间：2013-04-04T13:05:07.970
> 
> 标签：vhdl, fpga, hdl, synthesis, myhdl

您好我有这个简单的 VHDL 过程（从 MyHDL 代码生成）：

```
DIGIPOT_CONTROLLER_CONNECTCLOCK: process (delayedClock) is
begin
    if to_boolean(clkEn) then
        if to_boolean(delayedClock) then
            scl_d <= '0';
        else
            scl_d <= 'Z';
        end if;
    else
        if to_boolean(sclIdleValue) then
            scl_d <= 'Z';
        else
            scl_d <= '0';
        end if;
    end if;
end process DIGIPOT_CONTROLLER_CONNECTCLOCK; 
```

原始 MyHDL 代码：

```
@always(delayedClock)
def connectClock():
    if(clkEn):
        if(delayedClock):
            scl_d.next = False
        else:
            scl_d.next = None
    else:
        if(sclIdleValue):
            scl_d.next = None
        else:
            scl_d.next = False 
```

在模拟中它工作得很好（ISIM 和 MyHDL 模拟器），但是当我尝试将它合成到 Spartan 6 中时，它会给出以下警告： clken 应该在进程的敏感列表中 sclidlevalue 应该在进程的敏感列表中

据我了解，它以某种方式推断出这个过程应该对 clkEn 和 sclIdleValue 信号敏感。但这当然不是我的本意。我希望它仅在延迟时钟更改其状态时更改输出，而不是在 clkEn 或 sclIdleValue 更改其各自状态时更改输出。

这是在 Spartan 6 架构中无法完成的事情吗？或者我应该以其他方式描述流程以实现我的预期行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:25:56.333

我终于弄清楚这是生成的 MyHDL 代码：

```
@always(delayedClock.posedge, reset.posedge)
def connectClock():
    if(reset == 1):
        delayedClock_int.next = True
    else:
        delayedClock_int.next = not delayedClock_int
        if(clkEn):
            if(delayedClock_int):
                scl_d.next = False
            else:
                scl_d.next = None
        else:
            if(sclIdleValue):
                scl_d.next = None
            else:
                scl_d.next = False 
```

和（生成的）VHDL：

```
DIGIPOT_CONTROLLER_CONNECTCLOCK: process (delayedClock, reset) is
begin
    if (reset = '1') then
        delayedClock_int <= '1';
    elsif rising_edge(delayedClock) then
        delayedClock_int <= to_std_logic((not to_boolean(delayedClock_int)));
        if to_boolean(clkEn) then
            if to_boolean(delayedClock_int) then
                scl_d <= '0';
            else
                scl_d <= 'Z';
            end if;
        else
            if to_boolean(sclIdleValue) then
                scl_d <= 'Z';
            else
                scl_d <= '0';
            end if;
        end if;
    end if;
end process DIGIPOT_CONTROLLER_CONNECTCLOCK; 
```

我必须将延迟时钟的频率设置为两倍（然后在我的 connectClock 过程中将其除以二），这样它会产生与原始过程相同的结果，并且可以在没有警告的情况下合成.. 逐步淘汰时钟的原因是 I2C 的 SCL波形如下图： ![在此处输入图像描述](https://i.stack.imgur.com/cXYEL.png)

# java - 无法解析属性休眠查询

> ID：15812074
> 
> 赞同：0
> 
> 时间：2013-04-04T13:05:10.527
> 
> 标签：java, hibernate, jpa

```
@Entity
@Table(name = "t_wday")
@IdClass(DayPk.class)
public class Day {
    @Id
    private Date id;
..
..
}

@Embeddable
public class DayPk {
    @Column(name = "idwday")
    private Date id;
...
... other key properties
...
}

@Entity
@Table(name = "t_assigned")
@IdClass(AssignedPk.class)
public class Assigned {
    @Id
    @ManyToOne
    private Day day;
...
...
}

@Embeddable
public class AssignedPk {
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumns({
            @JoinColumn(name = "t_wday_idwday", referencedColumnName = "idwday"),
            @JoinColumn(name = "t_user_iduser", referencedColumnName = "t_user_iduser")
    })
    private Day day;

...
... other key properties
...
} 
```

当我尝试创建查询时

```
getSession().createQuery("FROM Day as day WHERE day.user = :user YEAR(day.id) = :year") 
```

它有效但是当我尝试创建查询时

```
getSession().createQuery("FROM Assigned as assig WHERE YEAR(assig.day.id) = :year") 
```

我有一个例外

```
could not resolve property: day.id of: com.db.entity.Assigned ..... 
```

但是如果我将 DayPk 的归档 id 和实体 Day 中的归档重命名为 idwday 查询是有效的

有人请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:24:54.080

您应该`EmbeddedId`在您的`Entity`班级中使用来访问`PK`班级。

```
@Embeddable
public class DayPk {
    @Column(name = "idwday")
    private Date id;
...
... other key properties
...
}

@Entity
@Table(name = "t_wday")
public class Day {
    @EmbeddedId DayPk id;
..
}

@Embeddable
public class AssignedPk {
    private Day day;

...
... other key properties
...
}

@Entity
@Table(name = "t_assigned")
@IdClass(AssignedPk.class)
public class Assigned {
        @EmbeddedId AssignedPk id;
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumns({
            @JoinColumn(name = "t_wday_idwday", referencedColumnName = "idwday"),
            @JoinColumn(name = "t_user_iduser", referencedColumnName = "t_user_iduser")
    })
    private Day day;
...
...
} 
```

# google-analytics - 事件跟踪：来自 Firefox 的点击，Chrome 没有被记录，只有 MSIE

> ID：15812076
> 
> 赞同：0
> 
> 时间：2013-04-04T13:05:18.533
> 
> 标签：google-analytics

我正在使用事件跟踪来跟踪下载 PDF 文件的点击次数。它工作得很好，但它只注册来自 MSIE 的点击，而不是 Firefox、Chrome。我什至在点击注册之前提出了“时间延迟”建议，这是在这些论坛中建议的......仍然无法正常工作。

这是一个代码行：

```
<a href="http://pubs.usgs.gov/gip/146/pdf/gip_146_poster.pdf" onClick="_gaq.push(['_trackEvent', 'Cycle-Kids', 'English', 'PDF']);">PDF</a> 
```

这是一个有时间延迟的：

```
<a href="watercyclekids/download/watercycle-kids-german.pdf" onClick="var that=this;_gaq.push(['_trackEvent', 'Cycle-Kids', 'German', 'PDF']);setTimeout(function(){location.href=that.href;},800);return false;">PDF</a> 
```

# postgresql - 将 memcached 放在数据库或 Web 服务器实例上？

> ID：15812081
> 
> 赞同：2
> 
> 时间：2013-04-04T13:05:28.280
> 
> 标签：postgresql, nginx, memcached

对于我基于 Drupal 的站点，我有一个架构，其中包含 3 个实例，分别运行 nginx、postgresql 和 solr。我想安装 Memcached。我应该把它放在 nginx 或 postgresql 服务器上吗？性能影响是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T11:47:57.890

Memcached 对 CPU 的使用非常轻，因此它是一个很好的候选者来吞噬备用的 Web 服务器 RAM。此外，您将比其他层更多地扩展 Web 层，并且 Memcached 集群可以将这些 RAM 汇集到一个逻辑缓存中。

如果您在 DB 上有任何备用 RAM，那么让 DB 吞噬它几乎总是最好的性能。

TL;DR 让 DB 拥有所有的 RAM，并在 Web 层上托管 memcached。

来源：[http ://code.google.com/p/memcached/wiki/NewHardware](http://code.google.com/p/memcached/wiki/NewHardware)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T15:38:07.007

最好的办法是拥有一个单独的服务器（如果可以的话）。

否则，这取决于您的服务器 CPU 和内存利用率以及可用性要求。一般来说，我会避免在数据库服务器机器上运行任何额外的东西......因为数据库是系统的基础，并且必须可用并且性能良好。

如果您的 Solr 服务器没有高流量并且不使用太多内存，我会把它放在那里。众所周知，Memcached 服务器占用 CPU 很少。此外，您应该估计 memcached 实例需要多少内存......以确保它在服务器上足够。

# android - 飞行中的微调器。如何识别每个微调器？

> ID：15812084
> 
> 赞同：0
> 
> 时间：2013-04-04T13:05:33.543
> 
> 标签：android

我正在飞行中画一些旋转器。问题是，我如何知道我正在使用 onItemSelected。

例子：

```
 for (int i = 0; i <5; i + +) {
        sp = new Spinner (this);
        sp.setAdapter (un_adapter);
        sp.setOnItemSelectedListener (this);
    } 
```

我用的是什么微调器？

```
 public void onItemSelected (AdapterView <?> arg0, View view, int pos, long id) {
    //??????????????
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:12:03.740

您可以使用 setTag 和 getTag 来识别当前微调器。IE

```
 for (int i = 0; i <5; i + +) {
        sp = new Spinner (this);
        sp.setAdapter (un_adapter);
        sp.setTag(i.toString());
        sp.setOnItemSelectedListener (this);
    } 
```

并且可以得到它

```
public void onItemSelected(AdapterView<?> arg0, View v, int p,
                long arg3) {
                            arg0.getTag;
                           } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:31:29.817

有一种更简单的方法可以做到这一点。

创建一个微调器，为他添加一个 id。

```
Spinner spinner = new Spinner(context);
spinner.setId(R.id.defined); 
```

然后在 Values 文件夹中的 id.xml 文件中添加一个 id。像这样：

```
<item name="defined_0" type="id"/>
<item name="defined_1" type="id"/> 
```

为了您的目的，由defined_0 + 1 表示的id 与defined_1 相同会派上用场。因此，您可以在 for 循环中以编程方式添加 id

```
for (int i = 0; i <5; i + +) {
    sp = new Spinner (this);
    sp.setId(R.id.defined_0+i);
    sp.setAdapter (un_adapter);
    sp.setOnItemSelectedListener (this);
    } 
```

如果你这样说，id defined_1 将链接到微调器编号 2。=）

```
public void onItemSelected (AdapterView <?> arg0, View view, int pos, long id) {
    if (view.getID == R.id.defined_0){
       //whatever is supposed to happen if Spinner 1 is selected/used
    }
} 
```

# django - django 选择列表菜单 ajax

> ID：15812085
> 
> 赞同：0
> 
> 时间：2013-04-04T13:05:35.210
> 
> 标签：django, jquery

我有这个模型

```
CATEGORY_CHOICES = ((1, u'ADSL'),(2, u'HALO-ISDN'),(3, u'IMS') ..... )

class RequestType(models.Model):
    rCat = models.IntegerField(max_length=1, choices=CATEGORY_CHOICES, default=ADSL)
    rGroup = models.CharField(max_length=32, null=True, blank=True, default='N/A')
    rDesc = models.CharField(max_length=64, null=True, blank=True, default='N/A')
    rDate = models.DateTimeField(auto_now_add=True)
    active = models.BooleanField(default=True)

    def __unicode__(self):
        return '%s %s %s' `enter code here`% (self.rCat, self.rGroup, self.rDesc) 
```

我想做的是从中创建一个动态表单。

`rCat`用于创建类别，`rGroup`是对这些类别的更精细的改进。我需要的是一种在选择类别时创建下拉选择列表的方法`rCat` ，让您可以选择一个`Group`.

之后，我需要验证一个表单并创建一个新的数据库条目。

基本上，表单验证和数据库输入很简单，我遇到的问题是定义和创建一个动态过滤选择的 Ajax 函数。

有什么想法或建议吗？

# c# - GridViewRow 构造函数参数，它们到底是什么？

> ID：15812089
> 
> 赞同：3
> 
> 时间：2013-04-04T13:05:51.153
> 
> 标签：c#, asp.net, gridview, gridviewrow

我已经阅读了 msdn 的定义（见下文），这对我没有帮助。我正在动态地将 gridviewrows 添加到我的 gridview 中，并且不知道参数是什么。

```
public GridViewRow(
    int rowIndex,
    int dataItemIndex,
    DataControlRowType rowType,
    DataControlRowState rowState
) 
```

> **rowIndex 类型**：System.Int32 GridView 控件的 Rows 集合中的 GridViewRow 对象的索引。
> 
> **dataItemIndex 类型**：System.Int32 DataItem 在基础 DataSet 中的索引。
> 
> **rowType 类型**：System.Web.UI.WebControls.DataControlRowType DataControlRowType 枚举值之一。
> 
> **rowState 类型**：System.Web.UI.WebControls.DataControlRowState DataControlRowState 枚举值的按位组合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:30:51.333

```
 for example to add into gridview you can use datatable...

        public static DataTable TBCONRCVD;      

        FindRowNo = GoodsRcvdGridview.Items.Count;
        DataRow ROW = TBCONRCVD.NewRow();

        ROW["PRDCT_RCVD_PRDCT_CODE"] = TxtSearch.Text;
        ROW["PRDCT_RCVD_QTY"] = txtQty.Text.Trim();
        ROW["PRDCT_RCVD_COST"] = TXTUNITPRCE.Text.Trim();
        ROW["PRDCT_CRNT_SLNG_PRCE"] = SELL_PRCE.ToString();
        ROW["PRDCT_RCVD_VAT_CODE"] = TXTVATCODE.Text.Trim();
        ROW["PRDCT_RCVD_DISC"] = txtDscntPrcntge.Text;

        TBCONRCVD.Rows.Add(ROW);
        GoodsRcvdGridview.DataSource = TBCONRCVD;
        GoodsRcvdGridview.DataBind(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:33:38.860

这些参数（以及一般的构造函数）很少需要使用。它们用于创建 GridView，它是行，完全手动 - 考虑到此控件内置的强大数据绑定功能，这是非常不必要的。让我解释。

通常，您应该构造一个数据源（DataTable、一些自定义类的通用列表等），然后将该数据源分配给 GridView 并绑定它。这会自动执行设置 RowIndex 和 DataItemIndex 等操作。它还允许许多其他方便的功能（排序、分页、编辑/删除）。有关此默认功能的详细介绍，请参阅[GridView Web 服务器控件概述](http://msdn.microsoft.com/en-us/library/2s019wc0%28v=vs.100%29.aspx) 。

因此，我会说您应该将新行添加到您的数据源（无论可能是什么），然后将更新的数据源设置为您的 GridView 的 DataSource 属性，然后调用`GridView.DataBind()`. 您将拥有新行，并且不必手动创建 GridViewRow 对象。

但是，要回答您的问题：

*   `int rowIndex`：您正在创建的行将在 GridView 中占据的索引（位置）。
*   `int dataItemIndex`：此数据在您的基础数据源（DataTable 或通用列表或您使用的任何内容）中的索引。
*   `DataControlRowType rowType`：这是行的类型 - 包含数据的行、页眉、页脚等（[此处为完整列表](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datacontrolrowtype.aspx)）。
*   `DataControlRowState rowState`：该行的“状态”处于编辑模式、只读模式等（[此处为完整列表](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datacontrolrowstate.aspx)）。

# javascript - 如何将 window.location.href 中的网址作为参数传递

> ID：15812093
> 
> 赞同：1
> 
> 时间：2013-04-04T13:05:53.720
> 
> 标签：javascript, ajax, jquery

我正在使用**window.location.href**重定向一个页面，我在其中发送网站地址作为参数，例如，

```
var page_name='http://www.google.com';
window.location.href="edit-user-profile_2.php?uid="+userID+"&page_name="+page_name; 
```

当我执行脚本时，它会进入一个禁止页面。我正在附加快照。

![在此处输入图像描述](https://i.stack.imgur.com/h19sa.png)

我也尝试过***encodeURI(var)***，但它不起作用，java-script中有什么函数可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:08:03.173

`encodeURI`只对 URI 中不允许的字符进行编码，它不会触及 URI 中具有特殊含义的字符。改为使用`encodeURIComponent`。

…也就是说，屏幕截图中的 URL 中没有任何内容，看起来向它传递 URL 是有意义的。可能您正试图进行 XSS 攻击，而服务器正在成功地保护自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:09:56.810

如果您在将用户发送到页面时遇到`403 Forbidden`错误，则 Web 服务器可能无法读取页面本身。检查页面的权限`edit-user-profile_2.php`。

# java - Java 中的布尔值和 if/else 语句帮助

> ID：15812101
> 
> 赞同：0
> 
> 时间：2013-04-04T13:06:18.307
> 
> 标签：java

我试图让用户输入一个输入（显然是他们的姓名和年龄），如果他们小于 10 岁或大于 100 岁，我希望它回到开始并再次询问他们的年龄，直到条件已经满足，然后继续询问用户姓名。我知道该怎么做，一个布尔值。我不知道如何将其实现到我的 if/else 语句中。有人可以帮我吗？

```
public class Person {

    public static void main(final String[] args) {

        int age;
        String name;

        Scanner scan = new Scanner(System.in);

        System.out.println("Enter in your age.");
        age = scan.nextInt();

        if ((age >= 10) && (age < 18)) {
            System.out.println("So you're a kid, huh?");
        } else if (age < 10) {
            System.out.println("How old are you really?");
        } else if ((age >= 18) && (age <= 100)) {
            System.out.println("So you're an adult, huh?");
        } else if (age > 100) {
            System.out.println("How old are you really?");
        }

        @SuppressWarnings("resource")
        Scanner in = new Scanner(System.in);

        System.out.println("Enter in your name");
        name = in.nextLine();

        System.out.println("So you're " + age + " years old and your name is " + name + "?");

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:10:34.473

`while`在不满足条件时使用循环：

```
boolean conditionMet = false;
while(!conditionMet) {
    // ...
    else if (age >= 18 && age <= 100) {
        System.out.println("So you're an adult, huh?");
        conditionMet = true;     // the condition is met => exit the loop
    }
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:11:05.360

只需在您的第一次扫描和 if 语句周围放置一个 while 循环。

```
boolean validAge = false;
while (!validAge) {
    System.out.println("Enter in your age.");
    age = scan.nextInt();

    if ((age >= 10) && (age < 18)) {
        System.out.println("So you're a kid, huh?");
    } else if (age < 10) {
        System.out.println("How old are you really?");
    } else if ((age >= 18) && (age <= 100)) {
        System.out.println("So you're an adult, huh?");
        validAge = true;
    } else if (age > 100) {
        System.out.println("How old are you really?");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:10:06.633

你需要一个循环：

```
boolean ageIsCorrect = false;
while (!ageIsCorrect) {
    // ask age, if the age is correct, set ageIsCorrect to true
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T13:10:16.777

把它放在一个while循环中（年龄在你指定的标准之间）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T13:12:32.473

大致是这样的：

```
private static int  readAndCheck() {
    // read age and validate, upon failure return -1
}

public static void main(final String[] args) {

    int age = -1;
    while (age  == -1) { 
        age = readAndCheck();
    }

    System.out.println("So you're " + age + " years old and your name is " + name + "?");

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T13:13:06.593

您应该`while`循环执行此操作。我认为它比其他答案更容易和更好：

```
int age = 0;
while (age<10 || age>100){
    age = scan.nextInt();
}
string username = scan.next();
... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-04T13:13:15.700

由于您正在循环，因此将提示代码放入循环中。使用布尔值退出循环

```
boolean goodAnswer = false;
做
{
    System.out.println("请输入您的年龄。");
    ...
    if ((年龄 >= 10) && (年龄 100)
    {
    ... //不要设置goodAnswer，因为答案不好
    }
} 而 (!goodAnswer);
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-04T13:47:43.007

您的代码实际上需要更好地封装以检查年龄。

使用调用的方法`isValidAge(age)`返回 a `true`or`false`结果，然后您可以编写：

```
int age = 0;

while(!isValidAge(age)){

System.out.println("Please try again! Not a valid age (for an adult)");

... read in the age using scanner...
} 
```

一般来说， if else () 语句很混乱并且不能很好地扩展 - 维护方面它们并不总是最好的选择。

# bash - 如何创建包含“foo”的文件行的备份

> ID：15812107
> 
> 赞同：1
> 
> 时间：2013-04-04T13:06:29.243
> 
> 标签：bash, grep, find

基本上我有一个目录和子目录需要扫描以查找 .csv 文件。从那里我想将所有包含“foo”的行从找到的csv复制到新文件（与原始文件在同一目录中），但名称反映了它所在的文件。

到目前为止我有

```
find -type f -name "*.csv" | xargs egrep -i "foo" > foo.csv 
```

这会产生一个包含所有内容的备份文件 (foo.csv)，并且找到它的位置是数据的一部分。这两个我都不想要。

我想要的是：

例如，如果我有：

```
csv1.csv
csv2.csv 
```

并且它们都有包含“foo”的行，我希望将这些行复制到：

```
csv1_foo.csv
csv2_foo.csv 
```

除了原始文件中包含“foo”的整行之外，我没有在备份中输入任何额外内容。即我不想要备份数据中的原始文件名，这是我当前的代码所做的。

另外，我想我应该注意我使用的是 egrep，但我的示例没有使用正则表达式。当我将正则表达式应用于我的特定场景时，我将在搜索中使用它，因此在命名新文件时可能需要考虑到这一点。如果这看起来太难了，那么不考虑正则表达式的答案就可以了。

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:15:47.067

你可以试试这个：

```
$ find . -type f -exec grep -H foo '{}' \; | perl -ne '`echo $2 >> $1_foo` if /(.*):(.*)/' 
```

它用：

*   `find`遍历文件
*   `grep`打印`file path:line`元组（`-H`开关）
*   `perl`将这些行回显到输出文件（使用反斜杠，但可以做得更漂亮）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:09:39.153

你也可以试试：

```
find -type f -name "*.csv" -a ! -name "*_foo.csv" | while read f; do
   grep foo "$f" > "${f%.csv}_foo.csv"
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T14:39:30.843

试试这个，如果有帮助的话。

```
find -type f -name "*.csv" | xargs -I {} sh -c 'filen=`echo {} | sed 's/.csv//' | sed "s/.\///"` && egrep -i "foo" {} > ${filen}_foo.log' 
```

# jquery - 使用 Colorbox 用 ajax 替换模态内容

> ID：15812110
> 
> 赞同：0
> 
> 时间：2013-04-04T13:06:42.263
> 
> 标签：jquery, ajax, modal-dialog, colorbox

我有一系列按钮，每个按钮都会启动一个由“colorbox”驱动的灯箱。每个灯箱内部都有一个滑块，由‘RoyalSlider’驱动。所有滑块都在外部 html 文档中，每次触发模式时，colorbox 都会通过 ajax 加载它们。你可以在这里看到这个工作：http: [//j2designpartnership.com/ob3](http://j2designpartnership.com/ob3)

不幸的是，colorbox 没有在模式框之间切换的方法（如果它通过 ajax 拉取内容）。我正在尝试提出一个解决方案，该解决方案允许我从模式中的链接切换每个模式中的内容。目前，在 onComplete 回调（当模式完成加载时），我试图通过 AJAX 将新数据拉入幻灯片。

我的js如下：

```
$('a[rel="group"]').on('click', function(e) {

    e.preventDefault();

    $.colorbox({

        href: $(this).attr('href'),
        //other arguments
        onComplete: function(e) {

            $('#cboxLoadedContent').find('.royalSlider').royalSlider({
             //all of the arguments here
            }).data('royalSlider');

             $('a.nextSlide').on('click', function(e){
                e.preventDefault();

                var url = $(this).attr('href'); 

                $.ajax({
                    type: 'GET',
                    url: url,
                    dataType: 'html',
                    cache: true,
                    beforeSend: function() {
                        $('#cboxLoadedContent').empty();
                        $('#cboxLoadingGraphic').show();
                    },
                    complete: function() {
                        $('#cboxLoadingGraphic').hide();
                    },
                    success: function(data) {                  
                        $('#cboxLoadedContent').append(data);
                        $('#cboxLoadedContent').find('.royalSlider').royalSlider({same arguments as above}).data('royalSlider');
                    }
                });

            });
        }
    });
}); 
```

每个模态内部都有一个锚链接，如下所示：

下一张幻灯片

单击时，它会将新内容加载到模式中，但在该点之后的任何单击中，它都会直接加载到 href 或 html 页面。这是因为第一个模式正在运行回调，并寻找点击事件......但之后它不再寻找点击事件，因为 ajax 调用没有回调。有任何想法吗？

# c# - .Net Framework 3.5 和 4.0 之间的 BindingSource 行为变化

> ID：15812114
> 
> 赞同：2
> 
> 时间：2013-04-04T13:06:52.373
> 
> 标签：c#, .net, winforms, data-binding, bindingsource

我们正在将我们的应用程序从 .Net Framework 3.5 升级到 4.0，并且发现 BindingSource 的行为发生了变化。

编码：

```
bindingSource.DataSource = new Dictionary<int, int>( 0 ); 
```

在 .Net Framework 3.5 中不会发出 PositionChanged 事件。但是，当针对 .Net Framework 4.n 编译时，它确实会被触发。在 PositionChanged 事件中检查当前项目时，它包含字典本身。

这是 .Net Framework 4.n 中的错误吗？以下是一些突出显示该行为的测试：

```
[TestMethod]
public void FW40_WhenBindingToEmptyCollectionThenPositionChangedIsInvoked() {
    Dictionary<int, int> emptyCollection = new Dictionary<int, int>( 0 );

    BindingSource bindingSource = new BindingSource();
    object currentItem = null;

    bindingSource.PositionChanged += ( sender, e ) => {
        currentItem = ( (BindingSource)sender ).CurrencyManager.Current;
    };

    bindingSource.DataSource = emptyCollection;

    Assert.AreEqual<Type>( typeof( Dictionary<int, int> ), currentItem.GetType() );
}

[TestMethod]
public void FW35_WhenBindingToEmptyCollectionThenPositionChangedIsNotInvoked() {
    Dictionary<int, int> emptyCollection = new Dictionary<int, int>( 0 );

    BindingSource bindingSource = new BindingSource();
    object currentItem = null;
    bindingSource.PositionChanged += ( sender, e ) => {
        currentItem = ( (BindingSource)sender ).CurrencyManager.Current;
    };
    bindingSource.DataSource = emptyCollection;

    Assert.IsNull( currentItem );
}

[TestMethod]
public void FWAll_WhenBindingToNonEmptyCollectionThenPositionChangedIsInvokedAndCurrentItemIsKeyValuePair() {
    Dictionary<int, int> noneEmptyCollection = new Dictionary<int, int> { { 1, 1 } };

    BindingSource bindingSource = new BindingSource();
    object currentItem = null;
    bindingSource.PositionChanged += ( sender, e ) => {
        currentItem = ( (BindingSource)sender ).CurrencyManager.Current;
    };
    bindingSource.DataSource = noneEmptyCollection;

    Assert.AreEqual<Type>( typeof( KeyValuePair<int, int> ), currentItem.GetType() );
} 
```

# vba - VBA Excel 循环遍历一年中的所有日子

> ID：15812116
> 
> 赞同：3
> 
> 时间：2013-04-04T13:06:55.140
> 
> 标签：vba, excel

在 Excel VBA 中：

如何循环遍历给定日期范围内的所有日期？

'2013-01-01' 到 '2013-01-03' 应该给出：

```
2013-01-01
2013-01-02
2013-01-03 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T13:12:21.540

这至少应该向您展示如何开始您正在尝试做的事情：

```
 Sub test()

  Dim StartDate As Date
  Dim EndDate As Date
  Dim DateLooper As Date

  StartDate = #1/1/2013#
  EndDate = #12/31/2013#

  For DateLooper = StartDate To EndDate
     MsgBox (DateLooper)
  Next DateLooper

  End Sub 
```

# xml - Xpath 表达式

> ID：15812118
> 
> 赞同：5
> 
> 时间：2013-04-04T13:06:57.987
> 
> 标签：xml, xpath

我需要获取`<mathcolor>`元素值为 2 的元素`<colorvalue>`值。请更正下面给出的 Xpath 表达式：

**Xpath 表达式尝试：**

```
/colors/child::color/child::mathcolor[colorvalue='2'] 
```

**示例 XML：**

```
<?xml version="1.0"?>
<colors>
    <color>
        <mathcolor>#007dc5</mathcolor>
        <textcolor>C=100 M=40 Y=0 K=0</textcolor>
        <colorvalue>2</colorvalue>
    </color>
    <color>
        <mathcolor>#ed1b34</mathcolor>
        <textcolor>C=0 M=100 Y=85 K=0</textcolor>
        <colorvalue>3</colorvalue>
    </color>
</colors> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:18:20.363

差不多，试试这个：

```
/colors/child::color[colorvalue='2']/child::mathcolor/text() 
```

或更简单

```
/colors/color[colorvalue='2']/mathcolor/text() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-27T15:53:34.680

我更喜欢首先使用 //mathcolor 来定位您想要的实际元素。剩下的就是说，如果你继续向下结构，你会看到一个名为 colorvalue 的以下兄弟节点，其文本节点 = 2。

```
//mathcolor[./following-sibling::colorvalue[./text()='2']] 
```

# wpf - mahapps Metro tabcontrol 作为棱镜区域样式

> ID：15812121
> 
> 赞同：2
> 
> 时间：2013-04-04T13:07:11.697
> 
> 标签：wpf, prism, region, tabitem, mahapps.metro

我对 prism 和 mahapps.metro 库有疑问。我在我的 Shell 中将 TabControl 设置为我的区域，在这里我遇到了问题，因为每个 tabitem（模块）都没有对触发器做出反应，例如：Property="IsMouseOver"。标题具有相同的样式，我不知道如何强制它们正常工作。这是我的代码：

壳牌.xaml

```
 <Window.Resources>
    <Style BasedOn="{StaticResource {x:Type TabItem}}" TargetType="TabItem" x:Key="HeaderStyle">
        <Setter Property="Header"
            Value="{Binding RelativeSource={RelativeSource Self},
                Path=Content.DataContext.TabModel.Title}" />
    </Style>
</Window.Resources>

<TabControl Grid.Row="1" cal:RegionManager.RegionName="{x:Static inf:RegionNames.TabContainer}" Style="{StaticResource MetroTabControl}"/> 
```

和模块：

```
<TabItem x:Class="DataConverter.Modules.Export.Views.MenuView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" Style="{StaticResource {x:Type TabItem}}"
         Header="Export"
         IsSelected="{Binding Path=IsSelected}"> 
```

当我删除`Style="{StaticResource {x:Type TabItem}}"`我的 tabitem 看起来像标准控制。如何解决这个问题？

# web-services - 在哪里使用网络服务

> ID：15812122
> 
> 赞同：2
> 
> 时间：2013-04-04T13:07:11.857
> 
> 标签：web-services

我正在发现要在我的`asp.net`网站中使用的网络服务。我访问了很多关于为什么使用的网站`webservices`并阅读了很多文章，发现当你有一些经常使用的东西而不加载你的页面时，Web 服务是很好的。

我想知道`web services`使用的其他一些示例场景。我是否可以用于`web services`将订单发送到数据库，或者仅用于文本框自动完成，如谷歌等。

**注意：**我知道 Web 服务可以从移动、Web 或桌面应用程序中使用。但我的问题是我什么时候***在应用程序中***
***使用？`web service``ASP.Net`***

到目前为止阅读的一些文章

*   [代码复合体](http://www.codeproject.com/Articles/37727/Prepare-a-JSON-Web-Service-and-access-it-with-JQue#_rating)
*   [如何使用 Visual Studio.net 创建 Web 服务](http://www.vkinfotek.com/webservice/how-create-web-service-vs.aspx)
*   [w3school](http://www.w3schools.com/webservices/ws_example.asp)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:25:23.410

在大规模上，Web 服务基本上是编写的，当您想向其他用户公开您的数据库、代码时。

通过公开数据库，意味着假设您拥有给定地区所有制药公司的大量集合，将详细信息存储在数据库中，例如他们生产的药物、他们的政策等。现在，您希望人们使用它（可能是您的付费客户，或者只是免费访问任何人）。那你要做什么？显然，将工作连接字符串广播到您的数据库将是一个灾难性的举动。

因此，您要做的是在您的数据库之上创建一些方法，即 CRUDE 操作并在您的 WebService 中公开这些方法，即有人可以通过 URL 与这些方法交互并获取数据或发送数据或两者兼而有之。

WebServices 的最常见用途是当您希望您的特定语言构建（例如 ASP.NET）逻辑和数据可供不同平台上的人访问时。

比如移动设备。他们的前端是在花哨的框架中构建的，比如 Titanium，但他们通过使用 Microsoft 的 WCF-Rest 方法构建的 WebService 通过 Sql Server 获取数据。他们存储数据，通过 WebService 同步数据。

在一个典型的例子中，我们有一个非常大的购物网站，它是独立的，即我们是它的数据库、它的数据、它的用户的唯一用户。但是后来一个需求来了，某个Client想要对其进行建模并利用其现有的数据和逻辑，但是他们有JAVA平台。我们的整个系统建立在 ASP.NET 3.5 之上。那该怎么办。我们只是通过一个 ServiceLayer 暴露了我们的 BAL，并给它起了一个花哨的名字 ServiceBAL，从此过着幸福的生活（和获得）。

这些是 Web 服务的一些面向业务的用法。

其他简单的、单纯的 webService 用法，例如 textBox 自动完成、现有用户检查等等，相信您一定在侦察期间发现了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:13:25.553

Web 服务是可以在任何地方使用的可重用组件。例如，假设您正在构建订单处理系统，其中可以通过移动设备、网络等方式下订单。因此，与其为不同的应用程序或不同的平台创建不同的功能，不如创建订单处理系统的 web 服务，例如 placeOrder 或 takeOrder web服务并在不同的应用程序上使用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-17T17:20:31.547

Web 服务是**设备通过万维网进行通信**的手段。

无论您使用移动应用程序、搜索引擎还是企业系统，应用程序的用户部分（界面）都驻留在您的设备上。

数据，可能**还有业务规则**，存在于网络上的**其他服务器**上。**您的接口如何与服务器进行通信是 Web 服务的角色**。

# c# - 从字节缓冲区中提取数据包

> ID：15812123
> 
> 赞同：6
> 
> 时间：2013-04-04T13:07:15.780
> 
> 标签：c#, arrays, linq, list, extract

我有一个长度为 256 的缓冲区，它从蓝牙接收字节序列。我需要提取的实际数据包以 byte**开头和结尾**`126`。我想使用 LINQ 提取缓冲区中的最新数据包。

我现在正在做的是检查最后一个索引，`126`然后倒数直到我到达另一个`126`。也有一些陷阱，例如，**两个相邻的数据包**可能会导致两个字节`126`彼此相邻。

这是缓冲区的示例：

```
126 6 0 5 232 125 93 126 126 69 0
0 1 0 2 2 34 6 0 5 232 125
93 126 126 69 0 0 1 0 2 2 34
6 0 5 232 125 93 126 126 69 0 0
1 0 2 2 34 6 0 5 232 125 93
126 126 69 0 0

```

所以我掌握的信息是：

*   数据包以 126 字节值开始和结束
*   起始索引后的下一个字节的值为 69
*   126 结束字节之前的最后 3 个字节是我知道如何计算的整个数据包的 CRC，因此在提取数据包后，我可以检查这个 CRC 以查看我是否有正确的数据包

所以最后我想要一个包含正确数据包的数组或列表。例如：

```
126 69  0  0   1   0   2   2   34  6   0   5   232 125 93 126 
```

你能给我一个从缓冲区中提取这个数据包的快速解决方案吗？

这是我迄今为止尝试过的......它失败了，因为它不能真正返回我正在寻找的正确数据包：

```
var data = ((byte[])msg.Obj).ToList(); //data is the buffer 

byte del = 126; //delimeter or start/end byte
var lastIndex = data.LastIndexOf(del);
var startIndex = 0;
List<byte> tos = new List<byte>(); //a new list to store the result (packet)    

//try to figure out start index                            
if(data[lastIndex - 1] != del)
{
    for(int i = lastIndex; i > 0; i--)
    {
        if(data[i] == del)
        {
            startIndex = i;
        }
    }

    //add the result in another list
    for(int i = 0; i <= lastIndex - startIndex; i++)
    {
        tos.Add(data[i]);
    }

    string shit = string.Empty;

    foreach (var b in tos)
        shit += (int)b + ", ";

   //print result in  a textbox
    AddTextToLogTextView(shit + "\r\n");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:31:00.030

如果可以将以下两条规则应用于缓冲区，则使用 LINQ 可以在一行代码中完成：

*   缓冲区包含至少一个由给定分隔符包围的完整包。
*   每个数据包至少包含一个字节的数据。

这是代码：

```
var data = (byte[])msg.Obj;
byte delimiter = 126;

var packet = data.Reverse()
                 .SkipWhile(b => b != delimiter)
                 .SkipWhile(b => b == delimiter)
                 .TakeWhile(b => b != delimiter)
                 .Reverse(); 
```

（好吧，这不仅仅是一行，因为为了更好的可读性，我把它分成了多行。）

**编辑：**删除了对 Take(1) 的调用，因为它总是返回一个空序列。但是，结果不包含这种方式的分隔符。

* * *

以下是它的工作原理：

由于我们想找到最后一个数据包，我们可以反转数据：

```
var reversed = data.Reverse(); 
```

缓冲区可以以尚未完成的数据包结束。所以让我们跳过：

```
reversed = reversed.SkipWhile(b => b != delimiter); 
```

`reversed`现在要么为空，要么以`delimiter`. 由于我们假设缓冲区总是包含至少一个完整的数据包，我们已经可以为我们的结果获取下一个字节，因为我们知道它是分隔符：

```
var packet = reversed.Take(1); 
```

在序列中，我们现在可以跳过一个字节。如果我们找到的分隔符实际上是一个新数据包的开始，那么剩余的序列将以另一个分隔符开始，所以我们也必须跳过它：

```
reversed = reversed.Skip(1);
if (reversed.First() == delimiter)
{
    reversed.Skip(1);
} 
```

由于我们知道一个数据包不能为空，因为它包含一个 3 字节的 CRC，我们可以这样写：

```
reversed = reversed.SkipWhile(b => b == delimiter); 
```

现在实际数据如下：

```
packet = packet.Concat(reversed.TakeWhile(b => b != delimiter));
reversed = reversed.SkipWhile(b => b != delimiter); 
```

下一个字节是标记数据包开始的分隔符：

```
packet = packet.Concat(reversed.Take(1)); 
```

最后要做的是再次反转结果：

```
packet = packet.Reverse(); 
```

* * *

也许你想把它放到一个方法中：

```
public IEnumerable<byte> GetPacket(byte[] data, byte delimiter)
{
    yield return delimiter;

    foreach (byte value in data.Reverse()
                               .SkipWhile(b => b != delimiter)
                               .SkipWhile(b => b == delimiter)
                               .TakeWhile(b => b != delimiter))
    {
        yield return value;
    }

    yield return delimiter;
} 
```

您必须在此方法的返回值上调用 Reverse。

* * *

如果性能很重要，您可以在底层阵列上使用相同的算法。这样它会快大约 20 倍：

```
int end = data.Length - 1;
while (data[end] != delimiter)
    end--;

while (data[end] == delimiter)
    end--;

int start = end;
while (data[start] != delimiter)
    start--;

byte[] result = new byte[end - start + 2];  // +2 to include delimiters
Array.Copy(data, start, result, 0, result.Length); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T13:28:17.293

# 解决方案

我已经准备了三种可能的从输入缓冲区中获取最后一个数据包的解决方案：

**使用 LINQ**

```
public static byte[] GetLastPacketUsingLINQ(byte[] input, byte delimiter)
{
    var part = input.Reverse()
                    .SkipWhile(i => i != delimiter)
                    .SkipWhile(i => i == delimiter)
                    .TakeWhile(i => i != delimiter)
                    .Reverse();

    return (new byte[] { delimiter }).Concat(part).Concat(new byte[] { delimiter }).ToArray();
} 
```

**使用`string.Split`**

```
public static byte[] GetLastPacketUsingString(byte[] input, byte delimiter)
{
    var encoding = System.Text.Encoding.GetEncoding("iso-8859-1");
    string inputString = encoding.GetString(input);
    var parts = inputString.Split(new[] { (char)delimiter }, StringSplitOptions.RemoveEmptyEntries);

    return encoding.GetBytes((char)delimiter + parts[parts.Length - 2] + (char)delimiter);
} 
```

**使用`while`循环和索引器**

```
public static byte[] GetLastPacketUsingIndexers(byte[] input, byte delimiter)
{
    int end = input.Length - 1;
    while (input[end--] != delimiter) ;

    int start = end - 1;
    while (input[start--] != delimiter) ;

    var result = new byte[end - start];
    Array.Copy(input, start + 1, result, 0, result.Length);
    return result;
} 
```

# 表现

我还进行了一些非常简单的性能测试。结果如下：

```
LINQ version result:
126 69 0 0 1 0 2 2 34 6 0 5 232 125 93 126

String version result:
126 69 0 0 1 0 2 2 34 6 0 5 232 125 93 126

Indexers version result:
126 69 0 0 1 0 2 2 34 6 0 5 232 125 93 126

LINQ version time: 64ms (106111 ticks)
String version time: 2ms (3422 ticks)
Indexers version time: 1ms (2359 ticks) 
```

# 结论

如您所见，这里最简单的也是最好的。

您可能认为 LINQ 可以解决所有问题，但有时最好手动编写更简单的解决方案，而不是使用 LINQ 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T13:11:39.150

实际上有**多种方法**可以解决您的问题，最简单的想法是**检测双`126`(0x7e)**，与 CRC 等其他事情无关。

这个概念的基本实现是这样的

*   代码很简单

    ```
    var list=new List<byte[]>();
    int i=0, j=0;
    for(; i<data.Length; ++i)
        if(i>0&&0x7e==data[i]&&0x7e==data[i-1]) {
            list.Add(data.Skip(j).Take(i-j).ToArray());
            j=i;
        }
    list.Add(data.Skip(j).Take(i-j).ToArray()); 
    ```

基于我[在 C# 中对 Konami Code 的](https://stackoverflow.com/questions/469798/konami-code-in-c-sharp/10271975#10271975)旧答案，它甚至用于解决这个问题：[在 c# 中记录击键时键入特殊字符时显示双字符](https://stackoverflow.com/questions/15488682/double-characters-shown-when-typing-special-characters-while-logging-keystrokes/15720657#15720657)。

*   带有序列检测器的代码

    ```
    public partial class TestClass {
        public static void TestMethod() {
            var data=(
                new[] { 
                        126, 6, 0, 5, 232, 125, 93, 126, 
                        126, 69, 0, 0, 1, 0, 2, 2, 34, 6, 0, 5, 232, 125, 93, 126, 
                        126, 69, 0, 0, 1, 0, 2, 2, 34, 6, 0, 5, 232, 125, 93, 126, 
                        126, 69, 0, 0, 1, 0, 2, 2, 34, 6, 0, 5, 232, 125, 93, 126, 
                        126, 69, 0, 0 
                    }).Select(x => (byte)x).ToArray();

            var list=new List<List<byte>>();

            foreach(var x in data) {
                if(list.Count<1||SequenceCapturer.Captured((int)x))
                    list.Add(new List<byte>());

                list.Last().Add(x);
            }

            foreach(var byteList in list)
                Debug.Print("{0}", byteList.Select(x => x.ToString("x2")).Aggregate((a, b) => a+"\x20"+b));
        }
    }

    public class SequenceCapturer {
        public int Count {
            private set;
            get;
        }

        public int[] Sequence {
            set;
            get;
        }

        public bool Captures(int value) {
            for(var i=Sequence.Length; i-->0; ) {
                if(Sequence[i]!=value) {
                    if(0==i)
                        Count=0;

                    continue;
                }

                if(Count!=i)
                    continue;

                ++Count;
                break;
            }

            var x=Sequence.Length==Count;
            Count=x?0:Count;
            return x;
        }

        public SequenceCapturer(int[] newSequence) {
            Sequence=newSequence;
        }

        public SequenceCapturer()
            : this(new[] { 0x7e, 0x7e }) {
        }

        public static bool Captured(int value) {
            return Instance.Captures(value);
        }

        public static SequenceCapturer Instance=new SequenceCapturer();
    } 
    ```

或者，如果您想在 Linq 中完整地编写它，您可能想尝试以下方法。你甚至不需要使用`List`，`packetArray`直接给你一个字节数组。

s 旨在将`let`代码分成几行，否则它将是**一行中的极长语句**。如果您认为一条线是**最好的**，那么我会的。

*   代码`packetArray`

    ```
    var packetArray=(
        from sig in new[] { new byte[] { 0x7e, 0x7e } }
        let find=new Func<byte[], int, IEnumerable<byte>>((x, i) => x.Skip(i).Take(sig.Length))
        let isMatch=new Func<IEnumerable<byte>, bool>(sig.SequenceEqual)
        let filtered=data.Select((x, i) => 0==i||isMatch(find(data, i-1))?i:~0)
        let indices=filtered.Where(i => ~0!=i).Concat(new[] { data.Length }).ToArray()
        from index in Enumerable.Range(1, indices.Length-1)
        let skipped=indices[index-1]
        select data.Skip(skipped).Take(indices[index]-skipped).ToArray()).ToArray(); 
    ```

*   输出代码

    ```
    foreach(var byteArray in packetArray)
        Debug.Print("{0}", byteArray.Select(x => x.ToString("x2")).Aggregate((a, b) => a+"\x20"+b)); 
    ```

但是，即使在相同的解决方案概念中，也会有我之前提到的各种方法。我强烈建议不要涉及诸如 CRC 之类的附加条件，这可能会使事情变得更加复杂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T15:34:02.630

由于您正在寻找最后一个数据包，因此反转 byte[] 并查找第一个数据包要容易得多。您的两个数据包分隔符不仅仅是 126。它们是 126、69 的开头和 126、126 的结尾，除非数据包的结尾是收到的最后一个字节，这使得结尾分隔符为 126。

我建议使用与此类似的方法：

```
public static byte[] GetMessage(byte[] msg)
    {
        //Set delimiters
        byte delimit = 126;
        byte startDelimit = 69;

        //Reverse the msg so we can find the last packet
        List<byte> buf = msg.Reverse().ToList();

        //set indices to impossible values to check for failures
        int startIndex = -1;
        int endIndex = -1;
        //loop through the message
        for (int i = 0; i < buf.Count - 1; i++)
        {
            //find either a double 126, or 126 as the last byte (message just ended)
            if (buf[i] == delimit && (buf[i + 1] == delimit || i == 0))
            {
                if (i == 0)
                {
                    startIndex = i;
                    i++;
                }
                else
                {
                    startIndex = i + 1;
                    i += 2;
                }
                continue;
            }
            //Only process if we've found the start index
            if (startIndex != -1)
            {
                //check if the byte is 69 followed by 126
                if (buf[i] == startDelimit && buf[i + 1] == delimit)
                {
                    endIndex = i + 1;
                    break;
                }
            }
        }
        //make sure we've found a message
        if (!(startIndex == -1 || endIndex==-1))
        {
            //get the message and reverse it to be the original packet
            byte[] revRet = new byte[endIndex - startIndex];
            Array.Copy(buf.ToArray(), startIndex, revRet, 0, endIndex - startIndex);

            return revRet.Reverse().ToArray();
        }
        return new byte[1];
    } 
```

我不完全确定副本的索引是否完全正确，但这应该是它的要点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T02:13:21.077

由于您可能会收到不完整的数据，因此您必须存储最后一个不完整的缓冲区。

这是示例案例，首次接收：

```
126,   6, 0,   5,  232, 125, 93,  126, 126, 69,  0, 
0,   1,   0,   2,   2,   34,  6  , 0 ,  5 ,  232, 125, 
93,  126, 126, 69,  0,   0,   1 ,  0,   2,   2,   34, 
6,   0,   5,   232, 125, 93,  126, 126, 69,  0,   0 ,
1,   0,  2,   2,   34,  6,   0,   5,   232, 125, 93, 
126, 126, 69,  0,   0 
```

第二个流：

```
69,  0,   0 , 1,   0,  2,   2,   34,  6,   0, 126 
```

和代码：

```
 List<byte> lastBuf = new List<byte>();

    List<byte[]> Extract(byte[] data, byte delim)
    {
        List<byte[]> result = new List<byte[]>();

        for (int i = 0; i < data.Length; i++)
        {
            if (lastBuf.Count > 0)
            {
                if(data[i] == delim)
                {
                    result.Add(lastBuf.ToArray());
                    lastBuf.Clear();
                }
                else
                {
                    lastBuf.Add(data[i]);
                }
            }
            else 
            { 
                if(data[i] != 126)
                {
                    lastBuf.Add(data[i]);
                }
            }
        }

        return result;
    } 
```

结果 ：![数据结果](https://i.stack.imgur.com/Enyql.png)

# python - 如何在 Pyramid 的 HTTPNotFound 错误中包含链接？

> ID：15812127
> 
> 赞同：1
> 
> 时间：2013-04-04T13:07:28.787
> 
> 标签：python, http-status-code-404, pyramid, html-escape-characters

我网站的一部分是一个 wiki 引擎。当页面不存在时，我想提供一个自定义 404 错误页面，其中包含用于创建新页面的链接。此自定义 404 只能在失败的 wiki 页面视图的上下文中看到。

为了实现这个逻辑，我简单地返回（而不是引发）一个带有自定义消息的 HTTPNotFound() 对象，其中包含用于创建新页面的链接。不幸的是，链接被转义了。如何强制 html 链接显示为链接？

**编辑**：我找到了[Python Pyramid & Chameleon 模板语言转义 html的解决方案](https://stackoverflow.com/questions/5346295/python-pyramid-chameleon-templating-language-escapes-html)

```
class Literal:
    def __init__(self, s):
        self.s = s
    def __html__(self):
        return self.s 
```

Pyramid 中很可能已经存在这样的对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:14:28.243

Pyramid 中的 Not Found 视图接受与常规视图相同的谓词。

```
config.add_route('wiki', '/wiki/{page}')

@notfound_view_config()
def notfound_view(exc, request):
    """ Generic notfound view for the entire site."""
    return exc

@notfound_view_config(route_name='wiki')
def wiki_notfound_view(exc, request):
    """ Specific notfound for urls matching the wiki pattern."""
    return exc 
```

至于您的转义问题，那是特定于您的模板语言的。在 mako 中，您将使用`${ msg | n }`，在 jinja2 中，您将使用`{{ msg | safe }}`关闭字符串的自动转义。

# c# - 如何比较 POCO 类和数据库？

> ID：15812128
> 
> 赞同：2
> 
> 时间：2013-04-04T13:07:33.360
> 
> 标签：c#, entity-framework, entity-framework-4, smo, roslyn

我需要将我的`POCO`课程中的内容与我的数据库进行比较。我目前正在使用`Microsoft Roslyn`和`Microsoft.SqlServer.SMO`比较数据，在我看来，“大致”。它工作得很好，但我想知道是否有更好的方法来做到这一点。

今天我必须使用 Roslyn 编译文件，加载数据库信息并比较我想要的。

假设我有这个`POCO`文件：

```
[Table("XPTO", Schema="ASD")]
public class MyPoco 
{
    public int PropId {get; set;}
    public virtual Prop Prop {get; set;}
    public DateTime? MyDate {get; set;}
} 
```

我也有表格信息。我想看看我的`POCO`类（MyDate）中可以为空的内容在我的数据库中是否可以为空，反之亦然。我想看看我的数据库是否有一个`Foreign Key`to 表`Props`，以及它是否像我的`POCO`.

正如我所说，它今天已经工作了，我只是想重写代码以使用更有效的方式来维护。

EntityFramework 是否提供某种 API 或任何东西？

**系统信息**

```
SQL Server 2008 R2
Entity Framework 4.1
C# 4.0 
```

谢谢（）;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:01:21.590

如果我正确地阅读了您的问题-您是否希望某些 API在运行时从 EF/code-first 获取信息`relationshiops`和其他`metadata`信息？`DbContext`

到目前为止我见过的最好的——我们两个能做的最好的就是这个......

[如何以编程方式读取 EF DbContext 元数据？](https://stackoverflow.com/questions/15718301/how-i-can-read-ef-dbcontext-metadata-programmatically/15720297#15720297)

...看看这是否可以帮助您...

> 如果您碰巧掌握了一些新的重要信息，欢迎您在此处发帖（我们这样做的目的是为此类主题提供一站式问题）。

# c++ - 成员函数声明末尾的 C++ 和符号“&”

> ID：15812131
> 
> 赞同：7
> 
> 时间：2013-04-04T13:07:39.103
> 
> 标签：c++, c++11

很抱歉我找不到更好的标题。

`&`以下代码片段中最后一个 & 符号的含义：

```
A & A::operator=(A rhs) &
{
    swap(*this, rhs);
    return *this;
} 
```

根据答案，我想知道是否：

*   `operator=`它仅对或也可以应用于任何功能有意义
*   它是一个新的 C++11 特性，或者如果它已经存在于 C++98/03 中

如果您需要更多上下文，我在这里找到了这个语法：[https ://stackoverflow.com/a/12653520/951426](https://stackoverflow.com/a/12653520/951426)

有一个小解释，但我不明白。

编辑（我的问题的格式和简短回答）：

*   它不是特定于`operator=`
*   由于新的右值，它是一个新的 C++11 特性

# android - android：无法在 doInBackground 中未调用 Looper.prepare() 的线程内创建处理程序

> ID：15812137
> 
> 赞同：0
> 
> 时间：2013-04-04T13:08:03.320
> 
> 标签：android, android-asynctask, runtime-error

我想`EditText`在`ClickableSpan`.`AsynkTask`

我为此使用了下一个代码：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ...
        et = (EditText)findViewById(R.id.et);
        ...

        class makeLinksAsync extends AsyncTask<String, String, EditText> {

            private EditText buffer;

            protected EditText doInBackground(String... texts) {
            buffer = new EditText(context); // here is an error
                SpannableString spanStr = new SpannableString("word");
                ...
                buffer.append(spanStr);

                return buffer;
           }

           protected void onPostExecute(EditText linkedText) {
           ed.setText(linkedText.getText());
           }
     }
} 
```

当我在不同的模拟器和我自己的 Android2.3 设备上测试这段代码时，一切都很好，这段代码运行良好。但是在将 apk 上传到 GooglePlay 之后，我得到了一些崩溃报告，其中提到的行中有错误。日志报告是下一个：

```
java.lang.RuntimeException: An error occured while executing doInBackground()
...
Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
...
at lubart.apps.dictionary.DictionaryActivity$makeLinksAsync.doInBackground(DictionaryActivity.java:2233) // this line is mentioned in code 
```

另外我应该说，这个问题并非出现在所有设备中，一些用户报告说一切正常。

你能帮我解决这个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:15:15.710

您不应`EditText`在后台线程中操作 UI 组件（例如 ）。

只要确保你不与`EditText`你的`doInBackground`方法中的任何人交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:26:51.277

这是我的回答：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ...
    et = (EditText)findViewById(R.id.et);
    ...

    class makeLinksAsync extends AsyncTask<String, String, SpannableStringBuilder> {

        protected SpannableStringBuilder doInBackground(String... texts) {
            SpannableStringBuilder buffer = new SpannableStringBuilder()

            ...
            buffer.append("word").append(...)...;

            return buffer;
       }

       protected void onPostExecute(SpannableStringBuilder linkedText) {
            ed.setText(linkedText);
       }
    }
} 
```

# android - Logcat 错误。尝试更改 textview 值时出现问题

> ID：15812141
> 
> 赞同：0
> 
> 时间：2013-04-04T13:08:13.663
> 
> 标签：android, listview, android-activity, textview, logcat

可能是一个简单的错误，但 logcat 让我感到困惑。我刚刚将一个变量“名称”从一个列表视图传递给了这个活动，并希望将标题 textview 更改为该变量，使用...“detailedsocietyname”被用作 XML 文件中的 textview ID

```
final TextView changetitle = (TextView) findViewById(R.id.detailedsocietyname);
changetitle.setText(name); 
```

当那不起作用时，我尝试使用 toast 来测试它，而不是使用

```
Toast.makeText(getApplicationContext(), name, Toast.LENGTH_LONG).show(); 
```

The issue is that when the listview choice is chosen the app shuts down.... if all the code above is commented out, it works but the default screen title of 'example' is shown.

提前致谢，

完整代码

```
package com.apolloapps.ntusoc;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.widget.TextView;
import android.widget.Toast;

public class DetailedScreen extends Activity {

final TextView changetitle = (TextView) findViewById(R.id.detailedsocietyname);

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Show the Up button in the action bar.
    //getActionBar().setDisplayHomeAsUpEnabled(true);

    Intent in = getIntent();
    String name = in.getStringExtra(("name"));//gets name from intent

    Toast.makeText(getApplicationContext(), name, Toast.LENGTH_LONG).show();
    changetitle.setText(name);

    this.setContentView(R.layout.detailedscreen);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.detailedscreen, menu);
    return true;
}
} 
```

编辑：第一个活动意图代码

```
final String selected = (String) parent.getSelectedItem();
Intent i = new Intent(getApplicationContext(), DetailedScreen.class);
i.putExtra("name", selected);
startActivity (i); 
```

解决方案：使用

```
final String name = items[position]; 
```

代替

```
final String selected = (String) parent.getSelectedItem(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:12:54.983

试试这个：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
setContentView(R.layout.detailedscreen);  //set the layout here

final TextView changetitle = (TextView) findViewById(R.id.detailedsocietyname); //then get id of any view
    Intent in = getIntent();
    String name = in.getStringExtra("name");//gets name here and make sure in first activity you are not passing empty string 

    Toast.makeText(getApplicationContext(), name, Toast.LENGTH_LONG).show();
    changetitle.setText(name);
} 
```

**编辑**

如果在第一个活动中您传递了这样的字符串：

```
intent.putExtra("name", selected); 
```

然后像这样在第二个活动中得到它

```
name=in.getStringExtra("name"); 
```

您的 toast 消息是正确的，您可以通过显示如下简单文本来检查这一点：

```
 Toast.makeText(this,"Toast works fine " , 3000).show(); 
```

请参阅此[示例](http://developer.android.com/training/basics/firstapp/starting-activity.html)如何将字符串传递给另一个活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:13:58.093

重构你的 onCreate() 方法

```
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.detailedscreen);

    //your code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:22:29.690

*   首先，始终确保在调用 findViewById() 之前调用 setContentView()

您没有发布将字符串发送到此活动的代码，但我假设

-1。你发送的值是空的，-2。您不发送值 -3。StringExtra 名称在此和之前的活动中不同，即“名称”

# build - 为什么本地应用的构建时间会受网络影响？

> ID：15812148
> 
> 赞同：7
> 
> 时间：2013-04-04T13:08:30.087
> 
> 标签：build, xpages, lotus-notes

通过 WAN 在服务器上构建包含多个 JAR、Java 源和约 50 个 XP/CC 元素的 XPage 应用程序的构建时间大约需要几分钟。我已将应用程序复制到本地，构建时间降至〜 10 秒。

由于几天前本地应用程序的构建非常慢，大约 2-5 分钟。经过一些实验后，有一种解决方法：禁用位置文档中的 TCP 端口 - 它将构建时间缩短到几秒钟。即使它有效，它也无济于事 - 测试需要对用户进行身份验证，因此我需要将设计更改复制到远程或本地服务器 - 这意味着每次都更改位置（在线/离线）。

**2013 年 4 月 4 日更新：**我复制了当前位置文档并删除了主服务器和目录服务器。令我惊讶的是，有了这个位置，构建时间又回到了几秒钟——启用了 TCP 端口，因此可以进行复制。更令人惊讶的是，将主/目录服务器返回到新位置并没有重现问题 - 事实上它们不会影响性能。我知道，因为我已**重命名**当前位置文件，一切正常。据我了解，客户端配置中的“某物”与位置名称相关联。感谢西蒙的提示，我将进一步调查。

**问题仍然悬而未决：**我正在寻找一些（eclipse）偏好来控制这种行为 - 在构建本地应用程序期间与服务器进行意外通信。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T16:11:20.543

**解决方案：** Teamstudio CIAO 连接到设计师并检查设计元素的每次更新。对我来说似乎缺乏代码优化：它检查当前构建的设计元素（每一个，一个一个）是否应该在 CIAO 配置数据库中控制。

这解释了为什么通过重命名位置文档来解决问题。昨天，当性能问题再次出现时，我感到很失望。幸运的是，我记得当时 CIAO 对那个位置文件的设置。CIAO 使用`teamstudio.ini`DATA 目录中的文件来配置每个位置文档使用的 CIAO 配置数据库。寻找入口：

```
CIAOConfigDb[location name]=server name;CIAO\CIAOConfig.nsf 
```

对于连接到服务器（用于复制或本地服务器）的本地副本进行开发，请使用禁用 CIAO 的位置​​文档。

这仅适用于 property `ForceConfigLocation=0`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T16:45:37.387

不是解决方案（还没有！），但可能有助于调查。如果您稍后发布结果，我会进一步更新。

**调试说明。**

将以下内容添加到启动 Designer 客户端的快捷方式中。

```
-RPARAMS -console -debug -separateSysLogFiles -consoleLog 
```

启动设计器客户端。这也将打开 OSGi 控制台。

重现问题。虽然它仍在 OSGi 控制台中进行，但请键入以下内容：

```
dump threads 
```

重复此操作 3 次，每次转储完成之间的间隔时间很短。[完成后，在Heap Dump Analyzer](https://www.ibm.com/developerworks/community/groups/service/html/communityview?communityUuid=4544bafe-c7a2-455f-9d43-eb866ea60091)中打开三个堆转储（在 IBM_TECHNICAL_SUPPORT 文件夹中）。

它将通过所有三个转储向您展示哪些线程是一致的。查看这些并查找可能看起来是功能区域的包名称/调用。一旦你有了它，你就可以尝试为相关类添加调试。

**例如：**假设您注意到“com.ibm.designer.domino.ui.commons”。在线程中，您将编辑 rcpinstall.properties 文件。它将在：

```
<Notes Install>\Data\workspace\.config\rcpinstall.properties 
```

你会添加（从 FINE 开始，如果没有，然后是 FINEST）：

```
com.ibm.designer.domino.ui.commons.level=FINE 
```

现在，当您重新启动设计器客户端时，它将在该包的 workspace\logs 文件夹中生成调试输出。然后，您需要查看跟踪日志以查找延迟发生的时间，并查看它是否引用了相关的设计元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T14:05:31.283

其他开放的应用程序可能会同时构建（这看起来像是我的一个错误）。请务必关闭所有其他应用程序和基于服务器的副本。打开的应用程序的图标显示在应用程序列表中，即使您关闭并重新打开 Designer，它们也会保持打开状态。在 Designer 9 中右键单击应用程序并选择“关闭应用程序”。在 8.5 中，您需要使用 Package Exprorer 进行关闭。

另一个好方法是使用工作集。仅构建开放工作集中的应用程序 (AFAIK)。仅使用此一个应用程序（并且仅在此工作集中的应用程序）拥有一个工作集。

**更新 1**

如果这些没有帮助，我会删除/重命名*bookmark.nsf*、*Cache.NDK*和*desktop8.ndk*。然后只打开这个应用程序，看看会发生什么。

**更新 2**

检查是否没有引用的项目。右键单击应用程序并选择“项目属性”。从那里“项目参考”并确保没有选中任何复选框。

**更新 3**

根据您的更新，我将检查位置文档中以 $ 开头的项目名称。有时保存的 IP 地址等可能会导致此问题。所有这些项目都可以删除。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T11:11:21.640

如果可能（如果您还没有使用它）尝试使用版本 9 的 Domino 设计器（您不必使用 Domino 9 来执行此操作 - 它适用于 Domino 8.5.3）。

对于我们的项目，构建时间从几分钟缩短到几秒钟。我猜他们最终在 IBM 注意到构建过程过去大量依赖于与服务器的连接并对其进行了处理。使用新设计师您不必将事件复制到本地。您可以直接在本地服务器上工作。

# iphone - 警报在特定时间间隔内重复

> ID：15812150
> 
> 赞同：1
> 
> 时间：2013-04-04T13:08:37.493
> 
> 标签：iphone, ios, exception-handling, uilocalnotification

我知道这个问题问了好几次。即使我正在尝试以下代码：

[http://iphonesdkdev.blogspot.in/2010/04/local-push-notification-sample-code-os.html](http://iphonesdkdev.blogspot.in/2010/04/local-push-notification-sample-code-os.html)

我仍然无法在特定时间间隔播放警报。我有日期时间选择器。用户从该日期时间选择器中选择时间，其中包含从 1 分钟到 23 小时的时间。

在我的应用程序中，警报有效，但只有一次。我需要播放该警报，直到用户没有停止该计时器从打开到关闭的切换。

请帮我。任何想法和建议表示赞赏！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:21:19.787

你可以`RepeatInterval`为你的`localNotification`

```
[localNotification setRepeatInterval:NSMinuteCalendarUnit]; 
```

您可以根据自己设置其重复间隔，它会是分钟，小时，日，月，年。

# asp.net-mvc-4 - 创建自定义命令以在 Kendo UI Grid (MVC) 中扩展客户端详细信息模板

> ID：15812155
> 
> 赞同：0
> 
> 时间：2013-04-04T13:08:40.753
> 
> 标签：asp.net-mvc-4, kendo-ui, kendo-grid

我的网格中有一个嵌套网格，它工作得很好，但是客户端不喜欢使用左侧的箭头并要求添加一个按钮以显示子网格。

Kendo 网站上的示例显示了如何自动打开第一行，我只是想要一种从自定义控件扩展网格的方法，就像左侧选择器一样。

我已经让自定义命令正常工作，并且它执行示例代码，但我只需要一些有关使其适用于当前行所需的 javascript 的帮助。

```
columns.Command(command => 
            { 
                command.Edit().Text("Edit").UpdateText("Save"); 
                command.Destroy().Text("Del");
                command.Custom("Manage Brands").Click("showBrandsForAgency"); 
```

以及打开第一行的标准示例的js：

```
function showBrandsForAgency(e) {
    this.expandRow(this.tbody.find("tr.k-master-row").first());
} 
```

请通过给我扩展单击的行而不是第一行所需的 js 来帮助我？

*** 编辑 *** 修改了 Atanas Korchev 提供的解决方案，以使其仅在按钮而不是整行上工作。

我更喜欢使用函数 showBrandsForAgency 而不是自定义函数的解决方案，但这可以完成工作：

```
$(document).ready(function () {

    $("#grid").on("click", "a", function (e) {
        var grid = $("#grid").data("kendoGrid");
        var row = $(this).parent().parent();

        if (row.find(".k-icon").hasClass("k-minus")) {
            grid.collapseRow(row);
        } else {
            grid.expandRow(row);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T17:03:38.917

你可以尝试这样的事情：

```
$("#grid").on("click", "tr", function(e) {
  var grid = $("#grid").data("kendoGrid");

  if ($(this).find(".k-icon").hasClass("k-minus")) {
    grid.collapseRow(this);
  } else {
    grid.expandRow(this);
  }
}); 
```

当在函数上下文中使用 jQuery 时（可通过`this`关键字获得）是触发事件的 DOM 元素。在这种情况下`this`是单击的表行。

这是一个现场演示：http: [//jsbin.com/emufax/1/edit](http://jsbin.com/emufax/1/edit)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-25T12:12:13.563

相同的结果只是更简单、更快、更高效：

```
$("#grid").on("click", "tr", function () {
    $(this).find("td.k-hierarchy-cell .k-icon").click();
}); 
```

# ios - Desire2Learn：如何将文件附加到讨论中的新帖子？

> ID：15812157
> 
> 赞同：2
> 
> 时间：2013-04-04T13:08:41.743
> 
> 标签：ios, desire2learn

我可以使用以下提要在讨论中创建新帖子

```
Feed: host/d2l/api/le/(D2LVERSION: version)/(D2LID: orgUnitId)/discussions/forums/(D2LID: forumId)/topics/(D2LID: topicId)/posts/
Content-Type:"application/json"
http-Metohd:POST

 http-body:{
    "ParentPostId": null,
    "Subject": "IOS  Testing",
    "Message": {"Content": "ios Test meassage","Type": "Text"},
    "IsAnonymous": "false"
 } 
```

我怎样才能附上这个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T20:37:10.660

API 不提供将文件上传到现有讨论帖的方法。创建后，您[只能更新帖子的主题和消息组件](http://docs.valence.desire2learn.com/res/discuss.html#Discussions.UpdatePostData)。

要创建带有附件的新讨论帖子，请发送多部分帖子正文。正文的*第一*部分[应该是您的帖子数据](http://docs.valence.desire2learn.com/res/discuss.html#Discussions.CreatePostData)，如您的示例所示。后续部分可以包含[一个或多个附件的文件数据，](http://docs.valence.desire2learn.com/basic/fileupload.html#simple-uploads)并且应该遵循 RFC2388 多部分混合方法（因为第一部分是 JSON 数据，后续部分是二进制数据）。

# javascript - Javascript - 原型函数数组

> ID：15812167
> 
> 赞同：1
> 
> 时间：2013-04-04T13:09:11.647
> 
> 标签：javascript, jquery, html

我是一个 javascript 新手，所以到目前为止我写的代码很丑，有时是因为我缺乏经验，而且它与我习惯的语言有多么不同，所以我将在下面发布的代码有效，但我想知道我是否以正确的方式做这件事，或者它是否有效，但这是一种可怕的做法，或者有更好的方法。

基本上，我有一个在网格内移动的小家伙，他从服务器接收到一个动作，他可以​​在 8 个方向上移动（int）：0：向上，1：向上，2：向右...... 7：向上-剩下。

服务器将向他发送这个`0 <= action <= 7`值，他必须采取正确的行动......现在，而不是使用 switch-case 结构。我创建了一个函数 goUp()、goLeft() 等，并将它们加载到一个数组中，所以我有一个这样的方法：

```
var getActionFunction = actions[action];
actionFunction(); 
```

但是，要设置这一切的是：

1）创建构造函数：

```
function LittleDude(container) {
    this.element = container; //I will move a div around, i just save it in field here.
}

LittleDude.prototype.goUp() {
    //do go up
    this.element.animate(etc...);
}

LittleDude.prototype.actions = [LittleDude.prototype.goUp, LittleDude.prototype.goUpLeft, ...];
//In this array I can't use "this.goUp", because this points to the window object, as expected

LittleDude.prototype.doAction = function(action) {
    var actionFunction = this.actions[action];
    actionFunction(); //LOOK AT THIS LINE
} 
```

现在，如果您注意，最后一行将不起作用..因为：当我使用索引访问数组时，它会返回一个 LittleDude.prototype.goUp 例如...所以“this”关键字未定义..

goUp 有一个语句“this.element”...但是“this”没有定义，所以我必须这样写：

```
actionFunction.call(this); 
```

所以我的 doAction 看起来像这样：

```
LittleDude.prototype.doAction = function(action) {
    var actionFunction = this.actions[action];
    actionFunction.call(this); //NOW IT WORKS
} 
```

我需要知道这是否是骇人听闻的，或者我是否违反了某种“不要这样做”规则。或者也许可以用更好的方式编写。因为在我看来将它添加到原型中似乎有点奇怪，然后将它视为一个独立的函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:25:29.450

您正在尝试做的是可能的方法之一，但可以使其更简单。由于对象属性名称不是必需的字符串，因此您可以直接在原型上使用操作索引。你甚至不需要`doAction`功能。

```
LittleDude = function LittleDude(container) {
  this.container = container;
}

LittleDude.prototype[0] = LittleDude.prototype.goUp = function goUp() {
  console.log('goUp', this.container);
}

LittleDude.prototype[1] = LittleDude.prototype.goUpRight = function goUpRight() {
  console.log('goUpRight', this.container);
}

var littleDude = new LittleDude(123),
    action = 1;
littleDude[action](); // --> goUpRight 123
littleDude.goUp(); // --> goUp 123 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:20:25.467

> ```
> actionFunction.call(this); //NOW IT WORKS 
> ```
> 
> 我需要知道这是否是骇人听闻的，或者我是否违反了某种“不要这样做”规则。或者也许可以用更好的方式编写。

不， using[`.call()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)非常适合绑定[`this`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)- 这就是它的用途。

> 因为在我看来将它添加到原型中似乎有点奇怪，然后将它视为一个独立的函数。

如果您不直接使用它们，则不必在原型上定义它们:-) 但是，如果您这样做，您可能不会将函数本身存储在数组中，而是方法*名称*然后用[括号表示法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators)调用它们：

```
// or make that a local variable somewhere?
LittleDude.prototype.actions = ["goUp", "goUpLeft", …];

LittleDude.prototype.doAction = function(action) {
    var methodName = this.actions[action];
    this[methodName](); // calls the function in expected context as well
} 
```

# ios - iOS NSString - 根据语言环境创建大写

> ID：15812171
> 
> 赞同：0
> 
> 时间：2013-04-04T13:09:14.960
> 
> 标签：ios, nsstring, uppercase, nslocale

我的 iOS 应用程序有语言选择选项。
它是一个基于服务器的应用程序，从服务器接收所有要在应用程序中显示的字符串。
在其中一个视图中，我必须将文本转换为“大写”，因为我使用的是 NSString 的 upperCaseString 方法。这对英语很有用。但对于其他语言，如法语、汉语、俄语、德语等，它可能会产生问题。所以，我必须使用“uppercaseStringWithLocale”来提供适当的大写字符串。
我的问题是如何创建 NSLocate 并将其传递给基于语言名称的“upperCaseStringWithLocale”方法。我知道用户选择的应用程序的语言是什么。我可以根据语言名称创建语言环境对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:14:28.097

我认为您正在寻找：

```
NSString *theLocaleIdentifier = @"es_ES_PREEURO";
[[NSLocale alloc] initWithLocaleIdentifier:theLocaleIdentifier]; 
```

# jquery - jquery showhide 问题

> ID：15812176
> 
> 赞同：1
> 
> 时间：2013-04-04T13:09:28.953
> 
> 标签：jquery, show-hide

我有 2 个单选按钮，选择后将显示相关的下拉菜单并隐藏另一个。

问题是单击显示/隐藏效果很好，但是如果我单击“停车场”开始，则会出现“停车场”下拉菜单；然后选择“建筑物”，然后建筑物下拉菜单会取代它；但是，如果我再次单击“停车场”，则建筑物下拉菜单会保留并且不会被替换。

似乎只工作一次。

```
function hide(){
if(document.getElementById('buildings').checked) {
    $('#carParkDiv').removeClass('show').addClass('hidden');
    $('#buildingDiv').removeClass('hidden').addClass('show');
    $('input:radio[id="carparks"]').prop('checked', false);
}else if(document.getElementById('carparks').checked) {
  $('#carParkDiv').removeClass('hidden').addClass('show');
    $('#buildingDiv').removeClass('show').addClass('hidden');
    $('input:radio[id="buildings"]').attr('checked', false);
}
}

<input type="radio" name="whereto" id="buildings"  value="buildings" onchange="hide();"><label for="buildings">Buildings</label>
    <input type="radio" name="whereto" id="carparks"  value="carparks" onchange="hide();"><label for="carparks">Carparks</label><br>

    <div id="buildingDiv" class="hidden">
    <select id="buildingList" name="buildingList" onchange="addLocation();">
     <option>Buildings</option>
     <option value="B1">B1</option>
     <option value="B12">B12</option>
    </select> 
    </div>
    <div id="carParkDiv" class="hidden">
    <select id="carParkList" name="carParkList" onchange="addLocation();">
     <option>Car Parks</option>
     <option value="Visitor">Visitor</option>
     <option value="B">B</option>
     <option value="C">C</option>
     <option value="D">D</option>
    </select> 
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:24:15.780

试试这个，同时`onchange`从两个单选按钮中删除属性：

```
$('input:radio').change(function () {
    if ($('#buildings').is(':checked')) {
        $('#carParkDiv').removeClass('show').addClass('hidden');
        $('#buildingDiv').removeClass('hidden').addClass('show');
    } else if ($('#carparks').is(':checked')) {
        $('#carParkDiv').removeClass('hidden').addClass('show');
        $('#buildingDiv').removeClass('show').addClass('hidden');
    }
}); 
```

[**在这里演示**](http://jsfiddle.net/EJzaK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:55:49.103

您可以更简单地做到这一点：
只需将您的 DIV ID 修改为与您的输入值相似：

例如：

```
<input type="radio" name="whereto" id="carparks" value="carparks">
<div id="carparksDiv" class="hidden">...</div> 
```

`**[LIVE DEMO](http://jsbin.com/uyilus/1/edit)**`

```
$('[name=whereto]:input').change(function(){
  if(this.checked){
      $('#'+ this.value +'Div').show().siblings('.hidden').hide();
  } 
}); 
```

# c++ - ifstream --> ofstream c++

> ID：15812178
> 
> 赞同：0
> 
> 时间：2013-04-04T13:09:31.617
> 
> 标签：c++, ifstream, ofstream

我有一个获取 ifstream 变量的函数，但在某些情况下我必须写入这个文件。例如

```
main()
{
  ifstream dataFile("filename.txt");
  foo(dataFile);
}

void foo(ifstream &df)
{
  if(df.good()) {...}
  else {
     //here I need to write str into the "filename.txt"
     //but I don't know how to do it properly!
  }
} 
```

我可以想象，最简单的方法是从 df in foo() 中以某种方式获取文件的名称......但是如何？

想象一下：我不能使用 fstream。出于某种原因**，我只有 ifstream&**并且**不知道**文件名。例如，我从一些封闭的库函数中得到 ifstream&。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T13:21:01.800

使用 fstream 而不是 ifstream：

```
fstream dataFile("filename.txt",ios::in | ios::out | ios::app); 
```

有了这个，您可以读取和写入文件。

当然，通过引用而不是值传递您的 fstream 对象。fstream 是不可复制的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:13:22.797

不幸的是，鉴于您只有一个`ifstream`文件名而没有文件名的限制，没有可移植的方式写回该文件。

*可能*有解决此问题的非便携式方法。例如，一些 unix 实现可能会`fd`在对象上提供一个函数，您`filebuf`可以从`rdbuf`. `ifstream`Windows 可能提供也可能不提供类似的功能。

最后我要指出，听起来您可能在这里解决了错误的问题，您至少应该花一点时间来访问您的设计（以及为什么需要写入一个您不知道名称的文件）。

# python - 错误列表索引必须是整数，而不是列表。取一个数组的值将它们用作索引以从另一个数组中删除值

> ID：15812181
> 
> 赞同：0
> 
> 时间：2013-04-04T13:09:35.527
> 
> 标签：python, arrays, list

```
seen = []
dups = collections.defaultdict(list)
for i, item in enumerate(prules)
    for j, orig in enumerate(seen):
        if item == orig:
            dups[j].append(i)
            break
    else:
        seen.append(item)
deleteindex = [val for key,val in dups.iteritems() if seen[key] == '159']
for i in range(o,len(deleteindex)):
    n = deleteindex[i]
    del rulelines[n] 
```

以上是我的代码。

我想要做的是创建一个数组`deleteindex`，它接收任何带有`159`in 的项目的索引。

它确实获得了我想要的所有值，即所有具有该值的索引，`159`但是当我尝试从具有索引的不同数组中删除值时，它返回错误

> 列表索引必须是整数，而不是列表。

`prules`是我想要获取索引值的数组包含数字字符串
`rulelines`包含是一个字符串列表，我想使用从中获取的值`prules`并使用这些值作为索引来删除这些值`rulelines`

我哪里出错了？
我猜它的东西在

```
deleteindex = [val for key,val in dups.iteritems() if seen[key] == '159'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:01:48.813

你说的对。
错误是因为，在

```
deleteindex = [val for key,val in dups.iteritems() if seen[key] == '159'] 
```

`key`是一个`list`。照`dups`原样`defaultdict(list)`，该值将始终为 a `list`。
这可以通过以下方式验证：

```
...
print dict(dups.iteritems())  # adding this
deleteindex = [val for key,val in dups.iteritems() if seen[key] == '159']
... 
```

至于你的算法，试试这个，一个更容易理解的版本。

```
import random

prules = [random.randint(150,156) for i in range(30)]

def get_indexes(li):
    retval = {}
    for i, x in enumerate(li):
        if x not in retval:
            retval[x] = []
        retval[x].append(i)
    return retval               

dups = get_indexes(prules)
indexes = dups.get('156',[])
rulelines = [rulelines[i] for i in range(len(rulelines[:])) if i not in indexes] 
```

要获取索引，只需执行以下操作：

```
dups.get('156',[]) 
```

如果`dups['156']`存在，它将返回一个索引列表，否则返回一个空列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:02:15.117

你的直觉是对的。

```
deleteindex = [val for key,val in dups.iteritems() if seen[key] == '159'] 
```

这里每个都是您在上述循环中填充`val`的字典中的值之一。`dups`但是这些值是什么？那么，`dups = collections.defaultdict(list)`将表明这些值中的每一个都是一个`list`.

因此，由于您没有跟踪您的类型，此代码会中断：

```
n = deleteindex[i]  # n is a list
del rulelines[n]    # you can't index a list with a list 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-04T13:22:07.633

据我所知，`prules`是一个列表，或者至少是一个可以枚举的集合，在这种情况下，您可以将其转换[`set`](http://docs.python.org/3/library/stdtypes.html#set-types-set-frozenset)为您需要做的所有事情来删除重复项。

* * *

但是，如果不是这种情况（我无法确定，因为您没有提供那段代码），那么您可以以更好的方式处理整个事情：

```
seen = []
duplicate_indexes = []
for index, item in enumerate(prules):
    if item in seen:
        del rulelines[index]
    else:
        seen.append(item) 
```

* * *

从您更新的问题中，我认为您正在尝试做一些其他事情，而不是您的问题。我认为您正在尝试删除每个索引，如果是这种情况，则`rulelines`其中相应索引`prules`的值为：`'159'`

```
for ix, pr in enumerate(prules):
    if pr == '159':
        del rulelines[ix] 
```

# java - 如何将JFrame中的Jbuttons添加到arraylist？

> ID：15812185
> 
> 赞同：-1
> 
> 时间：2013-04-04T13:09:43.647
> 
> 标签：java, swing

我设计了一个由一些面板、标签和 60 个按钮组成的页面。我通过拖放使用摆动组件设计了它们。

现在我需要将所有 Jbuttons 放到 arraylist 我如何使用循环来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:16:39.047

这是在面板上查找按钮的示例 - 您可以尝试将其应用于您的案例（来自[这篇](https://stackoverflow.com/questions/3314183/how-to-access-controls-on-a-jpanel)文章）

```
 Component[] components = aPanel.getComponents();
    if(components != null)
    {
        int numComponents = components.length;
        for(int i = 0; i < numComponents; i++)
        {
            Component c = components[i];
            if(c != null)
            {
                if(c instanceof JButton)
                {
                   // Add button to your list
                }
            }
        }
    } 
```

# java - 在 NetBeans 中将 JFrame 设置为屏幕中心

> ID：15812191
> 
> 赞同：9
> 
> 时间：2013-04-04T13:09:55.607
> 
> 标签：java, swing, jframe, netbeans-7

我正在使用 NetBeans 开发一个 java swing 桌面应用程序，我想将 JFrame 设置为屏幕的中心。

从网上我知道我可以使用

```
setLocationRelativeTo(null); 
```

将框架设置为中心但我无法将代码插入 NetBeans IDE，因为`frame.pack()` 和`frame.setVisible()`都是 NetBeans 7 IDE 的生成代码，并且不允许在两种方法之间插入任何代码。

我需要获得以下内容：

```
frame.pack() 
setLocationRelativeTo(null);
frame.setVisible() 
```

关于如何解决问题的任何建议？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-23T15:26:40.570

属性 -> 代码 -> 签出生成中心

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-04-20T02:09:32.677

在框架的构造函数上，你有这个：

```
public frame() {     
   initComponents();
} 
```

您只需输入这一行：“this.setLocationRelativeTo(null);” 在“initComponents();”下

你会得到这个：

```
public frame() {     
   initComponents();
   this.setLocationRelativeTo(null);
} 
```

运行它，它的框架应该显示在屏幕的中心=）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-18T06:28:41.280

请按照以下简单步骤操作：

*   选择框架并转到属性。
*   单击代码部分，然后单击复选框生成中心。

就是这样。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-04T13:16:34.537

是`setVisible()`在生成的代码上吗？奇怪的。无论如何，您可以右键单击`JFrame`并`Navigator`选择`Properties`. 转到`Code`并选择它什么都不做。然后`initComponents()`在`JFrame`构造函数中手动插入代码。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-10T13:56:38.343

我不确定您是否得到了问题的答案，但 Wade Chandler 在 NetBeans 论坛上的以下链接中提供了解决方案。不幸的是，被回答的问题的发起者至少不耐烦地说，你必须克服一些焦虑才能得到答案。

[http://forums.netbeans.org/ptopic37419.html](http://forums.netbeans.org/ptopic37419.html)

Wade 展示了如何使 GUI 居中，以及您可以修改代码的哪些方面。

顺便说一句，如果您想将 GUI 放置在屏幕上的设定位置，那么您可以使用：

这也需要访问“属性”->“代码”窗口。1\. 确保选择框架（不是组件或外部！） 2\. 转到 JFrame 属性窗口中的代码选项卡。3\. 找到“表格尺寸政策”标签。4\. 在下拉列表中选择“生成调整大小代码”。5\. 点击旁边的“...”修改表格位置。6\. 另外，确保“生成大小”也被选中。

如果要将 GUI 放在屏幕的左上角，则使用默认的 [0,0] 作为表单位置。要在第一个 GUI 旁边放置第二个 GUI，请使用 [450,0]。在这种情况下，x 值已更改为 450，Y 值保持为 0。要将 GUI 向下移动屏幕，然后将 Y 值从 0 更改为 450。

最后，还有一个 NetBeans 错误 226740，在尝试使 GUI 的某些方面居中时可能会导致问题。它可能不会影响您，但了解它很有用。

问候

德里克

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-17T14:53:01.930

从@DerekMannering 发布的链接中：

> Netbeans 实际上会自行生成居中逻辑，而不是通过属性使用，因此您不会看到 setLocationRelativeTo 选项。转到属性窗口中的代码选项卡。在“代码”选项卡中找到“表单大小策略”标签。在下拉列表中选择“生成调整大小代码”。然后确保选中带有“生成中心”标签的属性。你也需要确保“生成大小”也被选中。应该是默认的，但无论如何你都应该检查。现在，这将最适合 JFrame 或 Frame 扩展。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-21T13:24:48.217

在 Netbeans Designer 区域中，选择您的 JFrame，转到代码。

在代码中，将表单大小策略更改为“生成调整大小代码”

然后选择生成中心选项。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-23T03:54:46.257

*   在构造函数中编写下面的代码将使您的 jframe 位于屏幕的中心

    ```
    public ProjectWork_jframe() {
    initComponents();

    Dimension screenSize,frameSize;
    int x,y;
    screenSize=Toolkit.getDefaultToolkit().getScreenSize();
    frameSize=getSize();
    x=(screenSize.width-frameSize.width)/2;
    y=(screenSize.height-frameSize.height)/2;
    setLocation(x, y);
    } 
    ```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-08T08:26:34.267

尝试....

```
public class_name{
     initComponents();
        setLocationRelativeTo(this);
} 
```

# ruby-on-rails - 我怎样才能加快这个正则表达式？

> ID：15812195
> 
> 赞同：3
> 
> 时间：2013-04-04T13:10:03.603
> 
> 标签：ruby-on-rails, ruby, regex

我在 Ruby 1.9.2p320 上使用 Rails 3.2.11。

我创建了一种`summarized()`方法来显示某些关键字出现在以文本字符串形式存储的一系列 1,000 到 15,000 个单词的文档中的位置。每个文档可以包含从 0 到 100 次的每个关键字。

我有：

```
ActiveRecord::Schema.define(:version => 20130404000559) do
  create_table "references", :force => true do |t|
    t.text     "source_text"
  end
end 
```

当我打电话`@reference.source_text.summarize(keywords)`时，以下方法非常慢，*即使只有一个`keyword`在`keywords`*：

```
class String
  def summarized(keywords)
    safe_text = Array.new
    result = String.new
    keywords.each do |keyword|
      safe_text << self.strip_tags.gsub(/\n|\r/, " ").gsub("  ", " ").scan(/\w*.{0,250}#{keyword}.{0,250}\w*/im)
    end    
    return safe_text.flatten.uniq
  end    
end 
```

我怎样才能加快速度？

**更新**：我现在正在研究`strip_tags` [可能至少是罪魁祸首之一](http://www.coffeepowered.net/2012/01/08/dont-use-strip_tags/)的可能性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T14:23:15.643

让我们从为什么它很慢开始。你的正则表达式是这样开始的：

```
/\w*.{0,250} 
```

现在让我们从最坏的情况开始（在你的情况下很常见）。没有关键字，您有 1000 个字符。如果您的关键字在这里，您的正则表达式将首先检查第一个单词，然后检查 250 个字符。没有。它将倒退到第 249 位。还是不行。250 次尝试后，将开始对`\w*`部件执行相同操作。你很幸运，单词很短。**它将对接下来的（至少）749 个字符执行相同的操作。**所以，在最坏的情况下，你会遍历你的字符串 250 次。[懒惰](http://www.regular-expressions.info/repeat.html)会解决问题，但是，我认为这不是您想要的行为（这`.{0,250}`是处理字符串的开头，不是吗？）。

现在，一个很酷的正则表达式工具是lookarounds。您可以在字符串中前进或后退以进行一些额外的检查。虽然它不会成为捕获字符串的一部分，但您可以在其中使用捕获组。
缺点？你不能有任意大小的 loobehind（该死的，正是你需要的）。所以它不会很有效，因为你不能确保你在开头有一个完整的单词，而且你也不能在字符串的前 250 个字符中匹配一个关键字。

所以，这是一个奇怪的解决方案：
- 在字符串的开头添加 250 个字符（空格？..），以确保我们可以在开头捕获单词。
- 使用此正则表达式（您可以考虑 m_x 所说的内容，并对所有关键字仅使用一次）：

```
/#{keyword}(?<=(.{250}))(.{0,250}\w*)/im 
```

然后对结果进行相当多的操作（通过添加捕获的组来重新组合字符串，删除作为添加的 250 个字符的一部分的最终字符，也许删除第一个单词以确保它是完整的......）它应该会更快.

**编辑（关于正则表达式的评论）：**

您可能想知道为什么将`(?<=(.{250}))`放在关键字之后。好吧，只是在您匹配关键字后进行捕获。这也意味着关键字也将成为捕获组的一部分，并且捕获组只会捕获关键字之前的 250-keyword.length 个字符（这不是什么大问题，您可以根据您的关键字，无论如何，我猜这不是什么大问题）。您也可以在关键字的第一个字符之后放置lookbehind，但这会很痛苦......好吧，我将在这里停止我的独白。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T13:19:16.537

这个怎么样 ？你只会扫描一次字符串。

```
/\w*.{0,250}#{keywords.join('|')}.{0,250}\w*/im 
```

附带说明一下，这种应用程序可能会受益于像[sunspot](http://sunspot.github.com/)这样的索引搜索引擎。

# windows - __declspec(dllimport) 的必要性

> ID：15812196
> 
> 赞同：3
> 
> 时间：2013-04-04T13:10:03.753
> 
> 标签：windows, winapi, linker

我在看这个：[Importing Function Calls Using __declspec(dllimport)](http://msdn.microsoft.com/en-US/library/zw3za17w.aspx)我不明白为什么真的需要 __declspec(dllimport)？为什么链接器不能在链接阶段将调用 func1 修补为调用 DWORD PTR __imp_func1（IAT 表地址），从而避免在源代码中单独声明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-22T06:28:56.530

修补指令的空间不足可能是一个原因，但不是主要原因。即使有足够的空间，链接器仍然不会修补它以获得更好的性能。原因是链接器不执行或修改编译器后端生成的代码，它只是用重定位信息修补位置。下面的例子不是很好的编码风格，但清楚地解释了这个问题。生成的指令`bar()`是`call dword[_imp__bar]`6 个字节长，即使链接器知道`bar()`最终图像中定义的知识，它也不会对其进行修补`call OffsetOfBar`，只需要 5 个字节。将代码生成延迟到链接时间（将/GL传递给cl.exe）可以解决这个问题，因为链接器会在链接时间调用编译器后端，后端会生成优化的`call`指令，因为它知道`call`目标在同一个模块中。

```
// main.c
// compile it with 'cl.exe /Zi /O2 main.c bar.c'

__declspec(dllimport) void bar();

int main() {
  bar();
}

// bar.c
void __declspec(noinline) bar() {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:46:24.550

引用 Raymond Chen： call func 的长度为 5 个字节，但 call dword ptr [_ *imp* _func] 的长度为 6 个字节。补丁不适合。一个字节太大了。在每条调用指令之后添加一个 nop（以防它碰巧被导入）听起来非常过分。

# security - SharePoint 和 SAML：是否有任何防范重放攻击的措施？

> ID：15812197
> 
> 赞同：2
> 
> 时间：2013-04-04T13:10:04.087
> 
> 标签：security, sharepoint, saml

SharePoint 使用 SAML 1.1 作为联合身份验证协议。用户将登录到受信任的身份提供者，并将 SAML 令牌发布到 SharePoint 站点，作为登录到 SharePoint 的一种方式。

我惊讶地发现 SAML 令牌的生命周期与用户的会话直接相关。默认情况下，这似乎是 10 小时，这似乎很慷慨。

如果我向 SharePoint 发出 SAML 令牌，有什么措施可以防止重放攻击？似乎这个令牌帖子在用户会话的整个生命周期内都是可重播的。我本来希望令牌的生命周期足够长以进行身份​​验证。有什么我遗漏的或者这是一个安全漏洞吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:17:23.843

SharePoint 中的会话生命周期将不等于 SAML 令牌生命周期，而是等于 SAML 令牌 ValidTo 属性（即绝对日期时间），因此重播将一直工作到该绝对时间。

![](https://puu.sh/2tMCK)

但不仅如此，SharePoint 还依赖于一个名为`LogonTokenCacheExpirationWindow`. 在我看来，它带来的困惑多于什么价值，但它就在那里，你必须明白会话的有效性将取决于它

在伪代码中，这就是 SharePoint 内部发生的情况

```
SessionToken Lifetime = SAML Token Lifetime (by default)
if (SessionToken Lifetime - LogonTokenCacheExpirationWindow < DateTime.UtcNow)
    Logout() 
```

在这里，您可以使用 LogonTokenExpirationWindow = 40 分钟和 SAML 令牌生命周期 1 小时来说明这一点。

![](https://puu.sh/2tMIu)

`LogonTokenCacheExpirationWindow`可以这样更改：

```
$sts = Get-SPSecurityTokenServiceConfig
$sts.LogonTokenCacheExpirationWindow = (New-TimeSpan -minutes 1)
$sts.Update() 
```

SAML 令牌生命周期（如果您使用 ADFS）可以这样更改：

```
Set-ADFSRelyingPartyTrust -TargetName "My SP2010" -TokenLifetime 5 
```

最后，值得注意的是，SharePoint 默认会发出持久性 cookie。因此，当您关闭浏览器并再次打开它时，它将使用该持久 cookie。您可以通过设置更改它

```
$sts = Get-SPSecurityTokenServiceConfig
$sts.UseSessionCookies = $true
$sts.Update()
iisreset 
```

# sql - sql regexp_like 检查键值对

> ID：15812198
> 
> 赞同：0
> 
> 时间：2013-04-04T13:10:04.957
> 
> 标签：sql, regex, sql-like

我想签入一个由键值对组成的给定字符串，例如`val1=value1;val2=value2;val3=val4=value4...`等。

现在我想检查哪个键没有实例 key 的值`val3`。这可以通过使用正则表达式来实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:14:35.410

是的，你可以用这个正则表达式做到这一点

```
(?<=;|^)\w+(?==;|=$) 
```

笔记：

环顾四周没有得到广泛支持，所以这可能不起作用！如果是这样，你可以使用这个正则表达式`(;|^)\w+=(;|$)`

# javascript - 如何使用外键将 JSON 连接在一起

> ID：15812199
> 
> 赞同：0
> 
> 时间：2013-04-04T13:10:05.640
> 
> 标签：javascript, json

我需要使用外键链接一些 JSON。例如，我有三个 JSON：

**JSON 1 - 用户**

```
{
   id: 23,
   name: "Agata"
} 
```

**JSON 2 - 幻灯片**

```
{
   title: "lalala",
   content: "lalalalalal",
   member: [
      {
        //here I would like to add json user  id: 23
      }
   ]
} 
```

**JSON 3 - 评论**

```
{
   title: "nanana",
   author: // here I would like to add json user id : 23
} 
```

你有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:12:53.373

我正在考虑您有三个包含每个 JSON 对象的变量，您可以这样做：

**JSON 1 - 用户**

```
var json1 = {
   id: 23,
   name: "Agata"
} 
```

**JSON 2 - 幻灯片**

```
var json2 = {
   title: "lalala",
   content: "lalalalalal",
   member: [
      json1
   ]
} 
```

**JSON 3 - 评论**

```
var json3 = {
   title: "nanana",
   author: json1
} 
```

# javascript - 以最优雅的方式显示弹窗

> ID：15812203
> 
> 赞同：178
> 
> 时间：2013-04-04T13:10:15.300
> 
> 标签：javascript, model-view-controller, angularjs, popup, show-hide

我有这个 AngularJS 应用程序。一切正常。

现在，当特定条件变为真时，我需要显示不同的弹出窗口，我想知道最好的方法是什么。

目前我正在评估两个选项，但我绝对愿意接受其他选项。

* * *

### 选项1

我可以为弹出窗口创建新的 HTML 元素，并直接从控制器附加到 DOM。

这将打破 MVC 设计模式。我对这个解决方案不满意。

* * *

### 选项 2

我总是可以在静态 HTML 文件中插入所有弹出窗口的代码。然后，使用`ngShow`，我可以只隐藏/显示正确的弹出窗口。

此选项不是真正可扩展的。

* * *

所以我很确定必须有更好的方法来实现我想要的。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-04-04T14:20:21.140

根据我迄今为止对 AngularJS 模态的经验，我认为最优雅的方法是提供一个专用服务，我们可以提供一个部分 (HTML) 模板以在模态中显示。

当我们考虑它时，模态是一种 AngularJS 路由，但只是显示在模态弹出窗口中。

AngularUI 引导项目 ( [http://angular-ui.github.com/bootstrap/](http://angular-ui.github.com/bootstrap/) ) 有一个出色的`$modal`服务（在 0.6.0 版本之前曾被称为 $dialog），它是一个服务的实现，可以将部分内容显示为模态弹出窗口。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-04-04T13:25:21.860

这很有趣，因为我自己也在学习 Angular，并且正在观看他们在 Youtube 上的频道中的一些视频。演讲者在此视频中提到了您的确切问题[https://www.youtube.com/watch?v=ZhfUv0spHCY#t=1681](https://www.youtube.com/watch?v=ZhfUv0spHCY#t=1681)在 28:30 分钟左右。

归根结底是将特定的代码放在服务而不是控制器中。

我的猜测是将新的弹出元素注入 DOM 并单独处理它们，而不是显示和隐藏相同的元素。这样你就可以有多个弹出窗口。

整个视频也很有趣:-)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-04-04T14:48:54.150

*   创建一个“弹出”指令并将其应用于弹出内容的容器
*   在指令中，将内容包装在绝对位置的 div 以及其下方的掩码 div 中。
*   可以根据需要从指令中移动 DOM 树中的 2 个 div。指令中的任何 UI 代码都可以，包括将弹出窗口定位在屏幕中心的代码。
*   创建布尔标志并将其绑定到控制器。此标志将控制可见性。
*   创建绑定到 OK / Cancel 函数等的范围变量。

编辑以添加高级示例（非功能性）

```
<div id='popup1-content' popup='showPopup1'>
  ....
  ....
</div>

<div id='popup2-content' popup='showPopup2'>
  ....
  ....
</div>

.directive('popup', function() {
  var p = {
      link : function(scope, iElement, iAttrs){
           //code to wrap the div (iElement) with a abs pos div (parentDiv)
          // code to add a mask layer div behind 
          // if the parent is already there, then skip adding it again.
         //use jquery ui to make it dragable etc.
          scope.watch(showPopup, function(newVal, oldVal){
               if(newVal === true){
                   $(parentDiv).show();
                 } 
              else{
                 $(parentDiv).hide();
                }
          });
      }

   }
  return p;
}); 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-02-13T07:20:32.047

请参阅 [http://adamalbrecht.com/2013/12/12/creating-a-simple-modal-dialog-directive-in-angular-js/](http://adamalbrecht.com/2013/12/12/creating-a-simple-modal-dialog-directive-in-angular-js/) 了解使用 Angular 进行模态对话且无需引导程序的简单方法

编辑：我一直在使用来自[http://likeastore.github.io/ngDialog](http://likeastore.github.io/ngDialog)的 ng-dialog，它很灵活，没有任何依赖关系。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-04-11T20:15:45.013

Angular-ui 带有对话框指令。使用它并将 templateurl 设置为您想要包含的任何页面。这是最优雅的方式，我也在我的项目中使用过它。您可以根据需要为对话框传递几个其他参数。

# jquery - -ms-perspective 在 Internet Explorer 10 中不起作用

> ID：15812204
> 
> 赞同：0
> 
> 时间：2013-04-04T13:10:15.650
> 
> 标签：jquery, css, firefox, internet-explorer-10, perspective

我正在尝试使用 'perspective:' 和 'transform: translateZ' css 属性来定位具有深度的 div。我让它在 Chrome 中工作，但在 IE10 或 Firefox20 中没有。[你可以在这里](http://www.girlguiding.org.uk/test/biggig/index.html)看到测试，在“谁来”菜单页面上......

包含的 div 具有 css 类 .scroller：

```
.scroller {  
    position: relative;  
    perspective: 150;  
    -webkit-perspective: 150;  
    -ms-perspective: 150;  
    -moz-perspective: 150;  
} 
```

而且，对于内部 div，使用 jQuery 设置 translateZ：

```
$(this).css('transform', 'translateZ(-' + ((1-$(this).css('opacity')) * 80) + 'px)');                           
$(this).css('-webkit-transform', 'translateZ(-' + ((1-$(this).css('opacity')) * 80) + 'px)');  
$(this).css('-ms-transform', 'translateZ(-' + ((1-$(this).css('opacity')) * 80) + 'px)');  
$(this).css('-moz-transform', 'translateZ(-' + ((1-$(this).css('opacity')) * 80) + 'px)'); 
```

但是，它不适用于 IE10 或 Firefox20。有什么我错过的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:12:13.600

> “不要在透视属性之前使用 Microsoft 供应商前缀 (“-ms-”)。在 Internet Explorer 10 及更高版本中支持无前缀。” - [MSDN。](http://msdn.microsoft.com/en-us/library/ie/hh772272%28v=vs.85%29.aspx)

# php - MySQL：使用父表完成缺失数据

> ID：15812209
> 
> 赞同：0
> 
> 时间：2013-04-04T13:10:23.140
> 
> 标签：php, mysql, database, database-design

假设我的数据库中有三个表，代表一个层次顺序：

`countries`, `states`, 和`cities`

每个城市与一个州相连，每个州与一个国家相连。这很容易在数据库中表示。

让我们进一步假设这些表中的每一个都包含一个字段`tax_rate`。在基本情况下，税率是在国家层面和`null`所有其他层面定义的。但是，它可以在以下任何级别上被覆盖。

当我查询一个城市节点时，我想得到它的税率。它可以在同一个节点内定义，但更有可能在任何下一个更高级别上定义。

**在 MySQL 或 PHP 级别上完成此任务的最有效方法是什么？**在我的实际应用中，不会只有一个这样的领域，而是会有很多领域。

下面是我的示例的简单数据库模式。当然它也会有外键定义。

```
CREATE TABLE `countries` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `tax_rate` float(4,2) DEFAULT NULL,
  `name` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`id`)
);

INSERT INTO `countries` (`id`, `tax_rate`, `name`)
VALUES
    (1,8.00,'Switzerland'),
    (2,16.00,'Germany');

CREATE TABLE `cities` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `state_id` int(11) DEFAULT NULL,
  `tax_rate` float(4,2) DEFAULT NULL,
  `name` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`id`)
)

NSERT INTO `cities` (`id`, `state_id`, `tax_rate`, `name`)
VALUES
    (1,1,NULL,'Bern'),
    (2,1,NULL,'Zollikofen'),
    (3,2,NULL,'Zurich'),
    (4,2,5.30,'Wettingen'),
    (5,2,NULL,'Winterthur'),
    (6,2,6.60,'Handligen'),
    (7,3,NULL,'Bayern-Town 1'),
    (8,3,NULL,'Bayern-Town 2'),
    (9,3,9.00,'Bayern-Town 3');

CREATE TABLE `states` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `country_id` int(11) DEFAULT NULL,
  `tax_rate` float(4,2) DEFAULT NULL,
  `name` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`id`)
);

INSERT INTO `states` (`id`, `country_id`, `tax_rate`, `name`)
VALUES
    (1,1,NULL,'Bern'),
    (2,1,9.00,'Zurich'),
    (3,2,NULL,'Bavaria'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:17:53.693

使用 COALESCE()。这就是它的用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:23:29.037

这可以在任一级别上处理：MySQL 或 PHP

我更喜欢 MySQL 方法：

```
select cities.name, COALESCE(cities.tax_rate,states.tax_rate,countries.tax_rate) from cities
join states on cities.state_id=states.id
join countries on states.country_id = countries.id 
```

如果不为 NULL，则返回城市的税率，否则返回州的税率。如果这也为空，它将返回该国家/地区的税率。

# android - ICS 的手机应用没有 CATEGORY.LAUNCHER

> ID：15812212
> 
> 赞同：1
> 
> 时间：2013-04-04T13:10:32.593
> 
> 标签：android, launcher

我正在检查 android Phone 应用程序代码。我注意到清单文件没有 CATEGORY.LAUNCHER 。没有它，它如何出现在启动器上？

# javascript - 如何反转 Flot 堆积条形图中的图例标签？

> ID：15812217
> 
> 赞同：3
> 
> 时间：2013-04-04T13:10:38.263
> 
> 标签：javascript, flot, reverse, legend

基本上它都在标题中。我将一个`json`对象传递给我的模板。这是使用python构建的方式：

```
series = []
tab = []
for i,l in reversed(list(enumerate(ts_g))):
    try:
        z = l[0].split(";")

        start_z = ts_g[0][0].split(';')[0]
        tmp_d = {
            'data': [
            [float(start_z), float(z[1])],
            ],
            'label': str(s.description),
            'color':str(s.color)
            }
        series.append(tmp_d)
        tab.append([z[0],z[1],s.description])

    except Exception:
        raise Exception("couldn't get data from vsoil data field\n")

return series, tab.reverse() 
```

所有值都是负数，所以我希望图例反向显示。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T13:33:53.623

使用`sorted: "reverse"`，如文档的[自定义图例](https://github.com/flot/flot/blob/master/API.md#customizing-the-legend)部分所述。请注意，这需要 Flot 0.8，它在技术上仍然是一个开发版本，尽管它将在接下来的一两周内取代 0.7 作为稳定版本。

# android - 动作栏空 指针异常

> ID：15812220
> 
> 赞同：1
> 
> 时间：2013-04-04T13:10:42.797
> 
> 标签：android

我是安卓新手。我的最低 API 级别需要为 7，以便我可以在我的 htc hero 上测试应用程序。我的目标 API 级别是 17。错误与操作栏有关。eclipse添加了一些代码，我想我需要它才能在最新的android版本上正确运行我的应用程序：

```
getActionBar().setDisplayHomeAsUpEnabled(true); 
```

`getActionBar()`在 API 7 上提供 NPE，但在 API 17 上不提供。如何在不删除代码的情况下解决这个问题（我可能需要现代 API 级别）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:36:25.747

我认为您的设备具有 android 版本 2.1，这就是您出错的原因。

只需将此[actionbarsherlock](http://actionbarsherlock.com/)库添加到您的项目中。

之后只需更改此行

```
ActionBar actionBar = getSupportActionBar();
actionBar.setDisplayHomeAsUpEnabled(true); 
```

检查本教程[链接](http://dj-android.blogspot.in/2013/02/android-adding-actionbar-navigation-tabs.html)和[链接](http://dj-android.blogspot.in/2013/02/android-adding-actionbar-navigation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:21:54.587

基本上，你需要遵循[这个](http://developer.android.com/training/basics/supporting-devices/platforms.html)。如果您需要一些好的例子，我认为[Android IO 应用程序](http://code.google.com/p/iosched/source/browse/#git%253Fstate%253Dclosed)源可能是一个很好的例子，说明如何在运行时开发注意外形、API 级别等（但是，对于完全陌生的 android 来说可能有点困难）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:30:59.593

任何 pre-honeycomb 版本都不支持操作栏，因此任何与操作栏相关的方法都不会被执行....但是在搜索之后我遇到了这个很棒的东西...

看看这个...

[您可以在链接](http://actionbarsherlock.com)中找到更多信息以及示例应用程序的屏幕截图

该库是 100% 开源的，可在[此处查看](http://github.com/JakeWharton/ActionBarSherlock)

从下面的问题...

[ActionBar pre Honeycomb](https://stackoverflow.com/questions/6646169/actionbar-pre-honeycomb)

# orchardcms - 安装了必应地图，但出现在每个页面上

> ID：15812223
> 
> 赞同：0
> 
> 时间：2013-04-04T13:10:54.443
> 
> 标签：orchardcms, orchardcms-1.6

我已将 bing 地图添加到我的果园项目中。然后我从我的“AsideSecond”小部件中显示它。我的 Q 是我添加了一个关于页面和一个博客页面。为什么必应地图出现在每一页上？主菜单、关于和博客页面。

如何将其设置为仅显示在一页上...例如关于页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:47:34.693

您需要使用`url(...)`层规则语法添加仅在您的关于页面上显示的小部件层。然后，您可以将小部件分配给该`AsideSecond`层上的区域。

请参阅[添加层](http://docs.orchardproject.net/Documentation/Managing-widgets#AddingaLayer)。

# entity-framework - EF5 和循环或多个级联路径，外键

> ID：15812227
> 
> 赞同：2
> 
> 时间：2013-04-04T13:11:07.560
> 
> 标签：entity-framework, many-to-many, code-first

我遇到了一个奇怪的问题，我已经知道为什么通常会发生此异常以及如何通过在其中一个属性中将 WillCascadeOnDelete 禁用为 False 来解决它。

但我的问题似乎是其他类型的，这是我的代码：

会员：

```
 public class Memeber
       {
      public int MemberID { get; set; }
      public virtual ICollection<Message> SentMessages { get; set; }
      public virtual ICollection<Message> RecievedMessages { get; set; }
       }

    public class Message
    {
      public long MessageID { get; set; }
      public int SenderMemberId{ get; set; }
      public virtual ICollection<Member> RecipientsMembers { get; set; }
      [ForeignKey("SenderMemberId")]
      public virtual Member SenderMember { get; set; }
    } 
```

这是映射：在消息配置中：

```
 this.HasRequired(c => c.SenderMember)
            .WithMany(c => c.SentMessages)
            .HasForeignKey(c => c.SenderMemberId)
            .WillCascadeOnDelete(false); 
```

在 MemberConfiguration 中：

```
 this.HasMany(c => c.RecievedMessages)
        .WithMany(c => c.RecipientsMembers)

        .Map(cm =>
        {
            cm.ToTable("MessageJoinMemeber");
            cm.MapLeftKey("MessageId");
            cm.MapRightKey("MemberId");

        }); 
```

如您所见，一条消息包含一个具有 ForeignKey SenderID 的发件人，一对多双向。成员有 2 个消息列表，一个作为接收者，一个作为发送者。我试图在其中一个关系（第一个）中禁用删除级联，但我仍然从 SQL 引擎中遇到同样的问题。我也尝试从消息部分定义关系，而不是从成员部分定义关系：

```
 this.HasMany(c => c.RecipientsMembers)
               .WithMany(c=> c.RecievedMessages)
               .Map ( cm =>
                {
                cm.ToTable("MessageJoinMemeber");
                cm.MapLeftKey("MessageId");
                cm.MapRightKey("MemberId");

                }); 
```

但总是我得到这个错误：

```
 System.Data.SqlClient.SqlException was unhandled by user code
  HResult=-2146232060
  Message=Introducing FOREIGN KEY constraint 'FK_dbo.MessageJoinMemeber_dbo.Messages_MemberId' on table 'MessageJoinMemeber' may cause cycles or multiple cascade paths. Specify ON DELETE NO ACTION or ON UPDATE NO ACTION, or modify other FOREIGN KEY constraints.
Could not create constraint. See previous errors.
  Source=.Net SqlClient Data Provider
  ErrorCode=-2146232060
  Class=16
  LineNumber=1
  Number=1785
  Procedure=""
  Server=KINGPC
  State=0
  StackTrace:
       at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
       at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
       at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:48:01.300

这应该可以正常工作（与您所拥有 的**相同）**

```
public class Member
{
    public int MemberID { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Message> SentMessages { get; set; }
    public virtual ICollection<Message> RecievedMessages { get; set; }
}
public class Message
{
    public long MessageID { get; set; }
    public int SenderMemberId { get; set; }
    public virtual ICollection<Member> RecipientsMembers { get; set; }
    [ForeignKey("SenderMemberId")]
    public virtual Member SenderMember { get; set; }
}
...
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
modelBuilder.Entity<Message>()
    .HasRequired(c => c.SenderMember)
    .WithMany(c => c.SentMessages)
    .HasForeignKey(c => c.SenderMemberId)
    .WillCascadeOnDelete(false);

modelBuilder.Entity<Member>()
    .HasMany(c => c.RecievedMessages)
    .WithMany(c => c.RecipientsMembers)
    .Map(cm =>
    {
        cm.ToTable("MessageJoinMemeber");
        cm.MapLeftKey("MessageId");
        cm.MapRightKey("MemberId");

    });
...
var member = new Member { Name = "sender1"  };
db.Messages.Add(new Message
{
    SenderMember = new Member { Name = "sender1" },
    RecipientsMembers = new List<Member> 
    {
        new Member { Name = "receiver1"  },
        new Member { Name = "receiver2"  },
        new Member { Name = "receiver3"  },
    }
});
db.SaveChanges(); 
```

...但是如果您仍然有问题，您可以手动创建连接表...

```
// public virtual ICollection<Message> RecievedMessages { get; set; }
public virtual ICollection<MessageJoinMember> Recieved { get; set; }
...
// public virtual ICollection<Member> RecipientsMembers { get; set; }
public virtual ICollection<MessageJoinMember> Recipients { get; set; }
...
public class MessageJoinMember
{
    public long MessageID { get; set; }
    public Message Message { get; set; }
    public int MemberID { get; set; }
    public Member Member { get; set; }
}
...
modelBuilder.Entity<Message>()
    .HasRequired(c => c.SenderMember)
    .WithMany(c => c.SentMessages)
    .HasForeignKey(c => c.SenderMemberId)
    .WillCascadeOnDelete(false);
modelBuilder.Entity<MessageJoinMember>()
    .HasKey(x => new { x.MessageID, x.MemberID });
modelBuilder.Entity<MessageJoinMember>()
    .HasRequired(x => x.Message)
    .WithMany(x => x.Recipients)
    .HasForeignKey(x => x.MessageID)
    .WillCascadeOnDelete(false);
modelBuilder.Entity<MessageJoinMember>()
    .HasRequired(x => x.Member)
    .WithMany(x => x.Recieved)
    .HasForeignKey(x => x.MemberID)
    .WillCascadeOnDelete(false);
// remove the implicit many-to-many here
...
var message = new Message { SenderMember = new Member { Name = "sender1" }, };
db.MessageJoinMembers.Add(new MessageJoinMember { Message = message, Member = new Member { Name = "receiver1" } });
db.MessageJoinMembers.Add(new MessageJoinMember { Message = message, Member = new Member { Name = "receiver2" } });
db.MessageJoinMembers.Add(new MessageJoinMember { Message = message, Member = new Member { Name = "receiver3" } });
db.Messages.Add(message);
db.SaveChanges(); 
```

# vim - 在vim中同时将多行的部分内容转换为新行

> ID：15812231
> 
> 赞同：1
> 
> 时间：2013-04-04T13:11:24.677
> 
> 标签：vim, newline, textblock, shift

我有一段代码，例如

```
 ...
    elseif a:flag ==# "replace" return "fg"
    elseif a:flag ==# "visual"  return "#b58900"
    elseif a:flag ==# "insert"  return "#268bd2"
    elseif a:flag ==# "normal"  return "#859900"
    elseif a:flag ==# "replace" return "#dc322f"
    elseif a:flag ==# "visual"  return 3
    elseif a:flag ==# "insert"  return 4
    elseif a:flag ==# "normal"  return 2
    elseif a:flag ==# "replace" return 1
    ... 
```

现在我想一次将所有行的语句`return`下方的部分移动。`ìf`这在vim中可能吗？我试过了`<C-v>I<CR><ESC>`。但这只会将第`return`一个移动到新行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:17:28.890

在命令模式下：

```
:%s/return/\r\t\treturn/gc 
```

省略尾随 gc 以避免确认。

# java - 我可以在主事务中打开新连接吗？

> ID：15812242
> 
> 赞同：0
> 
> 时间：2013-04-04T13:12:02.613
> 
> 标签：java, jdbc, connection

我在基于 Java JDBC 的事务中有以下场景（在 200 个基于用户的 Java Web 应用程序中）。

请指教以下方法是否正确：

1.  打开一个主要交易---
2.  产生一个值
3.  基于上述值，应该发生插入或更新（无论主事务失败，此插入都应该持续存在
4.  所以我打开原子事务（一个新的连接和一个执行和提交值的事务）
5.  关闭连接
6.  如果失败回滚步骤 5-1
7.  如果成功继续进行主要交易
8.  如果发生故障，则仅回滚 main 而不是 child，因为 child 已经提交。

我担心与我的方法相关的性能和其他问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T22:30:15.833

我认为您的交易表现将取决于许多因素，并且与您如何开发每一步完全相关。

例如，是否使用连接池，或者是否使用 PreparedStatement，或者是否使用存储过程等都会有所不同。

如果这对您有用，那么您的方法顺序似乎是正确的:)

如果您使用池、准备好的语句等，您可以评估与数据库相关的问题是否有帮助。

如果您需要优化您的应用程序，您可以使用 Profiler，这里有一些与 Profiler 相关的帖子。

[https://stackoverflow.com/questions/9101680/free-profiler-for-java](https://stackoverflow.com/questions/9101680/free-profiler-for-java)

问候。

# ios - 在IOS中如何读取Resouce bundle文件

> ID：15812246
> 
> 赞同：2
> 
> 时间：2013-04-04T13:12:06.637
> 
> 标签：ios

在对象 c 中，我们像这样读取捆绑资源： `pathName = [[NSBundle mainBundle] pathForResource:@"fileName" ofType:@"filetype"];`

然后 ：

`[NSString stringWithContentsOfFile:pathName encoding:NSUTF8StringEncoding error:nil]`

但现在我想读取`C++`文件中的资源内容，但不想要`objective-c`任何其他方式的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:21:37.063

您可以使用纯粹基于 C 的 CoreFoundation。查看[Accessing a Bundle's Contents](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFBundles/AccessingaBundlesContents/AccessingaBundlesContents.html#//apple_ref/doc/uid/10000123i-CH104-SW1)和[CFBundle 参考](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFBundleRef/Reference/reference.html#//apple_ref/c/tdef/CFBundleRef)。

# c# - 使用 Lucene.NET 3.0.3 获取 ConstantsScoreQuery 的所有条款

> ID：15812247
> 
> 赞同：0
> 
> 时间：2013-04-04T13:12:10.570
> 
> 标签：c#, extract, lucene.net, wildcard

我正在将 Lucene.Net v3.0.3 与 C# 一起使用，并且在从 ConstantScoreQuery 中检索所有术语时遇到问题。方法 ExtractTerms 似乎是未编码的。

目标是获取与通配符搜索匹配的所有术语（使用 QueryParser） 我尝试使用 WildcardTermEnum 类，但使用 erf* && poli* 之类的组合通配符搜索失败

我该如何解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:04:05.807

您的 WildcardQuery 被重写为`BooleanQuery`of `ConstantScoreQueries`，它实际上不是一个，`Query`而是一个过滤器。这就是为什么 ExtractTerms 不会为您提供任何东西的原因。

这是一种方法，虽然我同意这并不理想，但它是我能迅速提出的最好方法。这仅适用于前缀查询，如果您希望它与任何查询一起使用，则必须添加更多逻辑`MultiTermQueries`类型，则必须添加更多逻辑。

您必须在查询被重写**之前**执行此操作，否则它将不起作用。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Lucene.Net.Search;
using Lucene.Net.Index;
using Lucene.Net.Analysis.Standard;
using Lucene.Net.Documents;
using Lucene.Net.Search.Spans;
using Lucene.Net.Analysis;
using Lucene.Net.Store;
using System.IO;
using Lucene.Net.QueryParsers;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {

            RAMDirectory dir = new RAMDirectory();
            IndexWriter iw = new IndexWriter(dir, new StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_30), IndexWriter.MaxFieldLength.UNLIMITED);

            Document d = new Document();
            Field f = new Field("text", "This is some erfand erftyas poliot polioasd poliasdas data to test the wild card term enums. Lets see how it works out.", Field.Store.YES, Field.Index.ANALYZED);
            d.Add(f);

            iw.AddDocument(d);

            iw.Commit();
            IndexReader reader = iw.GetReader();
            QueryParser parser = new QueryParser(Lucene.Net.Util.Version.LUCENE_30, "text", new StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_30));            
            // parser.MultiTermRewriteMethod = MultiTermQuery.CONSTANT_SCORE_BOOLEAN_QUERY_REWRITE;

            Query q= parser.Parse("(poli* && erf*) && test* && (asd* || res*) && aterm");
            Query q2 = parser.Parse("poli*");

            //var rq = q.Rewrite(reader);
            //ISet<Term> terms = new HashSet<Term>();
            //rq.ExtractTerms(terms);

            List<PrefixQuery> prefixQueries = null;
            if (q is PrefixQuery)
            {
                prefixQueries = new List<PrefixQuery>();
                prefixQueries.Add(q as PrefixQuery);
            }
            else if(q is BooleanQuery)
            {
                prefixQueries = ExtractQueries(q as BooleanQuery);
            }

            foreach (var pq in prefixQueries)
            {
                WildcardTermEnum termEnum = new WildcardTermEnum(reader, new Term(pq.Prefix.Field, pq.Prefix.Text + "*"));

                if (termEnum.Term != null)
                    Console.WriteLine(termEnum.Term.Text);
                while (termEnum.Next())
                {
                    Console.WriteLine(termEnum.Term.Text);
                }
            }

            Console.ReadLine();
        }

        private static List<PrefixQuery>  ExtractQueries (BooleanQuery query)
        {
            List<PrefixQuery> queries = new List<PrefixQuery>();
            foreach (var q in query)
            {
                if (q.Query is BooleanQuery)
                {
                    queries.AddRange(ExtractQueries(q.Query as BooleanQuery));
                }
                else
                {
                    if (q.Query is PrefixQuery)
                    {
                        queries.Add(q.Query as PrefixQuery);
                    }
                }
            }
            return queries;
        }
    }
} 
```

# java - 使用 Javascript 和 jOuery 访问 JSON 响应时出错

> ID：15812253
> 
> 赞同：0
> 
> 时间：2013-04-04T13:12:20.807
> 
> 标签：java, javascript, ajax, json

我有一个返回 JSON 响应字符串的 Web 服务。当我尝试使用 $.ajax 函数在我的网页中访问该响应时，它总是会生成一个错误终止而没有任何响应..有人可以帮助我并告诉我下面的代码有什么问题..

```
function getdata() {

        alert("start");
       $.ajax({
        type: "POST",
        data: "{'value':'10'}",
        url: "http://localhost:8080/RESTExample/parameter_url",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {
                    alert("received "+data);
            },
        error: function (data) {
                    alert("error is "+data);
            }
});
        alert("end");
    } 
```

现在我得到了一个 URL，它在直接访问时提供 JSON 响应**

> “ [http://coenraets.org/apps/directory/services/getemployees.php](http://coenraets.org/apps/directory/services/getemployees.php) ”

**

我正在尝试在我的 JSP 页面中访问此数据

```
 <script language="javascript">

  $(document).ready(function()
   {
   $('#login').click(function(event){

    event.preventDefault();
    localStorage['serviceURL'] = "http://coenraets.org/apps/directory/services/getemployees.php";
    var serviceURL = localStorage['serviceURL'];
      alert("start");

        $.ajax({
    dataType: "jsonp",
    url: serviceURL,
    success :function SucceedFunc(data) {
            alert("success");
            console.log(data);
        },
    error : function(data, textStatus, errorThrown) {
    alert("error");
    console.log(data);
        }
}).done(function ( data ) {
  console.log(data);
});

    });
   });

</script>

<div class="main_div">

<div class="loginform">
<form>   
    <div class="login_btn">
    <input type="submit" class="login" value="Login" id="login"/>
    </div>
</form>
</div>
</div> 
```

这给出了一个错误......现在任何人都可以帮助我访问这些数据......PLS......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:31:47.103

```
$.ajax({
    dataType: "jsonp",
    url: serviceURL
}).done(function ( data ) {
  console.log(data);
}); 
```

试试这个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:07:47.693

简单来说：浏览器不允许来自域（例如something.com）的JavaScript 访问来自另一个域（例如something-different.com）的任何数据。这就是所谓的“同源策略”。

有一些方法可以规避这种情况。最简单的方法是使用前面提到的 jsonp，我引用 Nisanth Sojan 的话：

```
$.ajax({
    dataType: "jsonp",
    url: serviceURL
}).done(function ( data ) {
    console.log(data);
}); 
```

但是 jsonp 还有一些其他的限制，例如。你不能做任何发布请求。执行此操作的一般方法是在请求到达的服务器上支持 CORS（因为它是有风险的）。

来源和更多信息：[http ://webadvent.org/2011/cross-origin-ajax-with-cors-by-david-walsh](http://webadvent.org/2011/cross-origin-ajax-with-cors-by-david-walsh)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:21:11.063

你必须像[这个小提琴一样循环每个项目](http://jsfiddle.net/dyRmN/3/)

```
$.ajax({
   dataType:'jsonp',
   url:"http://coenraets.org/apps/directory/services/getemployees.php",
   success : function(data) {
        $(data.items).each(function(index, employee) {
            $('#employees').append($('<div />').text(employee.firstName));
        });
   }
 }); 
```

});

# emacs - 在组织模式下显示今天截止日期的任务

> ID：15812260
> 
> 赞同：1
> 
> 时间：2013-04-04T13:12:40.153
> 
> 标签：emacs, org-mode

我希望显示今天截止日期的任务，但找不到任何有用的东西。

当我根据任务类型实际写下它们时，我如何能够根据日期查看/安排任务和待办事项。

一个例子是：

```
* TOPIC :  SOMETHING SOMETHING SYSTEM
** TODO Get the documentation ready
   DEADLINE: <2013-04-04 Thu> 
```

每个主题和几个主题中有几个这样的 TODO。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T15:22:48.767

确保包含该项目的文件位于`org-agenda-files`.

您可以使用org-agenda-files将其添加到议程中`C-c [`并检查以确保它包含在内`C-h``v``RET`

# java - Java的DOM解析器打印相同的值

> ID：15812261
> 
> 赞同：1
> 
> 时间：2013-04-04T13:12:43.010
> 
> 标签：java, xml, dom

我有这个 xml 文件

```
<Cdtr>
    <Nm>DEF Electronics</Nm>
    <PstlAdr>
        <AdrLine>Corn Exchange 5th Floor</AdrLine>
        <AdrLine>Mark Lane 55</AdrLine>
        <AdrLine>EC3R7NE London</AdrLine>
        <AdrLine>GB</AdrLine>
    </PstlAdr>
</Cdtr> 
```

我正在尝试解析 xml，使用 Java 中的 dom 解析器获取叶标签名称（具有值）及其各自的值。以下是我为此使用的代码。

```
public class GetNodeValues {

  public static void main(String[] args) {

    try {

   String xmlFile = "C:/Users/Administrator/workspace/sample.xml";
   File file = new File(xmlFile);
   if(file.exists()){
   // Create a factory
   DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
   // Use the factory to create a builder
   DocumentBuilder builder = factory.newDocumentBuilder();
   Document doc = builder.parse(xmlFile);
   doc.getDocumentElement().normalize();
   // Get a list of all elements in the document
   NodeList list = doc.getElementsByTagName("*");
   System.out.println("XML Elements: ");

   for (int i=0; i<list.getLength(); i++) {
     // Get element
    Element element = (Element)list.item(i);
    String nodnam = element.getNodeName();
    NodeList nl = doc.getElementsByTagName(nodnam);
    Element ele = (Element) nl.item(0);
    if (ele.getChildNodes().getLength() > 0) // then it has text

          String val = ele.getChildNodes().item(0).getNodeValue();
          if (val.startsWith("\n")) {         //Discarding pseudo nodes
          }else {
        System.out.println("Node: "+nodnam+" | Val: "+val); //print node names and values
          }
         }
   }
}
else{
   System.out.print("File not found!");
}
}
catch (Exception e) {
  System.exit(1);
   }
  }
} 
```

我得到以下结果。

```
Node: AdrLine | Val: Corn Exchange 5th Floor
Node: AdrLine | Val: Corn Exchange 5th Floor
Node: AdrLine | Val: Corn Exchange 5th Floor
Node: AdrLine | Val: Corn Exchange 5th Floor 
```

请帮忙。我不明白为什么它重复标签值。预期的输出是

```
Node: AdrLine | Val: Corn Exchange 5th Floor
Node: AdrLine | Val: Mark Lane 55
Node: AdrLine | Val: EC3R7NE London
Node: AdrLine | Val: GB 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:17:02.413

在解析文档时，您使用`Document.getElementsByTagName(String tagname)`. 根据其 Javadoc，它**以文档顺序**`Element`返回文档中的所有 s 。由于您的结构有多个元素，并且由于您总是从该列表中选择第零个元素，因此它总是为您提供相同的元素。**`AddrLine`**

 **相反，您可能想编写如下内容：

```
for (int i = 0; i < list.getLength(); i++) {
    Element element = (Element) list.item(i);
    String nodnam = element.getNodeName();

    if (element.getChildNodes().getLength() > 0) // then it has text
    {
    // etc., etc. 
```

总而言之，当您已经拥有可用的元素时，不要尝试从文档中检索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-13T11:25:01.610

这是重新编译的程序以打印 xml 文档中的所有元素

```
 public static void main(String[] args) {

    try {

        String xmlFile = "staff.xml";
        File file = new File(xmlFile);
        if (file.exists()) {
            // Create a factory
            DocumentBuilderFactory factory = DocumentBuilderFactory
                    .newInstance();
            // Use the factory to create a builder
            DocumentBuilder builder = factory.newDocumentBuilder();
            Document doc = builder.parse(xmlFile);
            doc.getDocumentElement().normalize();
            // Get a list of all elements in the document
            NodeList list = doc.getElementsByTagName("*");

            for (int i = 0; i < list.getLength(); i++) {
                // Get element
                Element element = (Element) list.item(i);
                String nodnam = element.getNodeName();
                if (element.getChildNodes().getLength() > 0) {
                    String val = element.getChildNodes().item(0)
                            .getNodeValue();
                    if (!val.startsWith("\n"))
                        System.out.println(nodnam + "==" + val);
                }
            }
        } else {
            System.out.print("File not found!");
        }
    } catch (Exception e) {
        System.exit(1);
    }
} 
```

你去吧。它打印文件中的所有元素。**

# winapi - lstrcat 在 MASM 程序中无法正常工作

> ID：15812262
> 
> 赞同：1
> 
> 时间：2013-04-04T13:12:42.950
> 
> 标签：winapi, masm, masm32

我有一个基本的 C++ 程序。它的目标是显示特定文件夹中包含的文件名。C++ 代码如下：

```
#include <Windows.h>
#include <iostream>
#include <stdio.h>
#include <tchar.h>
#include <strsafe.h>

int                     _tmain(int ac, TCHAR **av)
{
    HANDLE              hFile;
    WIN32_FIND_DATA     findFileData;
    BOOL                retFindNextFile;
    TCHAR               FilePathPattern[] = TEXT("C:\\Users\\Bloodsucker94\\Desktop\\TestASM\\*.txt");

    if ((hFile = FindFirstFile(FilePathPattern, &findFileData)) == INVALID_HANDLE_VALUE)
        _tprintf(TEXT("FindFirstFile() failed with code %d\n"), GetLastError());
    else {
        _tprintf(TEXT("hFile=%d, addr=0x%08X\n"), hFile, &findFileData);
        do {
            TCHAR       beginPath[] = TEXT("C:\\Users\\Bloodsucker94\\Desktop\\TestASM\\");

            lstrcat(beginPath, findFileData.cFileName);
            _tprintf(TEXT("%s\n"), beginPath);
            //printf("%s\n", beginPath);
            retFindNextFile = FindNextFile(hFile, &findFileData);

        } while (retFindNextFile == TRUE);
    }
    getchar();
    return (EXIT_SUCCESS);
} 
```

我想使用 MASM 生成相同的程序：

```
.386
.model                          flat, stdcall
option                          casemap :none

include                         \masm32\include\windows.inc
include                         \masm32\include\kernel32.inc
include                         \masm32\include\masm32.inc
include                         \masm32\include\masm32rt.inc
includelib                      \masm32\lib\kernel32.lib
includelib                      \masm32\lib\masm32.lib
include                         \masm32\include\msvcrt.inc
includelib                      \masm32\lib\msvcrt.lib
includelib                      \masm32\lib\crtdll.lib

_tprintf PROTO C :VARARG

.data

FolderPath                      TCHAR                       "C:\Users\Bloodsucker94\Desktop\TestASM\*.txt", 0
BeginFolderPath                 TCHAR                       "C:\Users\Bloodsucker94\Desktop\TestASM\", 0
FileName                        TCHAR                       "ta_mere.txt", 0

LstrcatFailed                   BYTE                        "lstrcat failed", 0
FormatPrintString               BYTE                        "%s\n", 0

FindFirstFileError              BYTE                        "FindFirstFile() failed with code %d", 0
FindFirstFileSuccess            BYTE                        "First file found with success - hfile=%d", 0
PrintStructAddr                 BYTE                        "addr=Ox%08X", 0
PrintFileName                   BYTE                        "%s", 0

.data?

hFile                           HANDLE                      ?
findFileData                    WIN32_FIND_DATA             <>
retFindNextFile                 BOOL                        ?
ErrorCode                       DWORD                       ?
FinalFilePath                   LPTSTR                      ?

.code

start:

    ;--------------------------------------------------------

    invoke  FindFirstFile,      ADDR FolderPath,            \
                                ADDR findFileData

    mov     hFile,              eax

    .IF hFile == INVALID_HANDLE_VALUE
        invoke  GetLastError
        mov     ErrorCode,      eax
        printf("%d\n", ErrorCode)
        jmp                     _quit                                
    .ENDIF

    ;--------------------------------------------------------

_loop:
    invoke  lstrcat,            ADDR BeginFolderPath,
                                ADDR findFileData.cFileName

    mov     FinalFilePath,      eax

    .IF FinalFilePath == NULL
        invoke  MessageBox,     NULL,                       \
                                ADDR LstrcatFailed,         \
                                ADDR LstrcatFailed,         \
                                MB_OK 
    .endif      

    ;invoke crt_printf,         ADDR FormatPrintString,     \
    ;                           findFileData.cFileName

    invoke  MessageBox,         NULL,                       \
                                ADDR FinalFilePath,         \
                                ADDR FinalFilePath,         \
                                MB_OK 

    ;--------------------------------------------------------

    invoke  FindNextFile,       hFile,                      \
                                ADDR findFileData       

    .IF eax == NULL
        jmp                     _quit
    .ELSE
        jmp                     _loop                       
    .ENDIF

    ;--------------------------------------------------------

_quit:
    invoke  ExitProcess,        0

end start 
```

编译工作完美。lstrcat 函数也不会失败。但在执行时，消息框会显示字符串“-O@”。当我想使用 printf 而不是 _tprintf 打印时，我注意到 c++ 程序中的相同行为（因为打印 TCHAR Windows 类型不适用于 printf）。也许问题来自 MessageBox 函数，或者 TCHAR 类型不是好的类型。只有 c++ 程序有效。我迷路了。

有人可以帮助我吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:41:14.750

首先，您的调用`lstrcat`将覆盖`BeginFolderPath`. 因此，您拥有的值`FileName`肯定会被覆盖，并且如果文件名真的很长，则不知道该调用会破坏您的数据段的哪些部分。缓冲区溢出并不是`lstrcat`. [请参阅http://msdn.microsoft.com/en-us/library/windows/desktop/ms647487(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647487(v=vs.85).aspx)上的文档

您可以考虑在调试器中运行它并在调用`lstrcat`返回后查看内存。

此外，您正在为您的字符串混音`TCHAR`，`BYTE`这有点令人困惑。我不清楚您是否希望该程序使用 Unicode 或 ANSI 字符串。就目前所写的，无法判断。在这个程序中是`TCHAR`一个字节，还是一个字？如果是一个词，那么您需要调用`MessageBoxW`.

设置输出汇编列表文件的编译器开关并编译 C++ 程序对您很有指导意义。看一下生成的汇编代码。

# sql-server-2008 - 嵌套循环联接与内部联接有何不同？

> ID：15812263
> 
> 赞同：-1
> 
> 时间：2013-04-04T13:12:45.327
> 
> 标签：sql-server-2008

Nested Loop Join 在工作\伪代码方面与 Inner Join 有何不同，以及建议使用 Nested Loop Join 而不是 Inner Join 的要点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T13:23:25.853

它不是“代替”——一个*逻辑* `INNER JOIN`可以以多种*物理*方式处理——[嵌套循环](https://sqlserverfast.com/epr/nested-loops/)、[哈希匹配](https://sqlserverfast.com/epr/hash-match/)或[合并](https://sqlserverfast.com/epr/merge-join/)。还有第四种类型，[adaptive join](https://sqlserverfast.com/epr/adaptive-join/)，但这是一种欺骗……它实际上只是推迟在嵌套循环和哈希匹配之间进行选择。

当连接的一侧相对较小时，通常会选择嵌套循环连接。考虑将`Customers`表连接到`Orders`表 - 理想情况下，客户将下达大量订单，因此嵌套循环连接的工作方式（概念上），如果不平衡足够高，是从第一个客户开始，收集他们的订单，然后转移到下一个客户，收集他们的订单等。实际上，优化器将在计划编译时决定哪种物理操作最有意义，并且它会根据各种因素做出决定，例如两张表的基数、统计信息、硬件资源等。

（我将简要说明合并连接的工作方式类似于拉链，而哈希连接的工作方式类似于一组存储桶。但您可以在其他地方阅读这些内容以获取更多详细信息。）

*   [了解嵌套循环连接](https://docs.microsoft.com/en-us/previous-versions/sql/sql-server-2008/ms191318(v=sql.100)?redirectedfrom=MSDN)
*   [了解合并联接](https://docs.microsoft.com/en-us/previous-versions/sql/sql-server-2008/ms190967(v=sql.100)?redirectedfrom=MSDN)
*   [了解哈希联接](https://docs.microsoft.com/en-us/previous-versions/sql/sql-server-2008/ms189313(v=sql.100)?redirectedfrom=MSDN)

下一次，请搜索这些概念，当您在实现它们时遇到实际问题或了解为什么在特定情况下选择特定连接方法时，请来寻求编程帮助。这不是图书馆。:-)

# html - iOS 6.1.3 中 HTML Upload 中的 WebApp 错误 fakepath

> ID：15812264
> 
> 赞同：4
> 
> 时间：2013-04-04T13:12:45.663
> 
> 标签：html, ios, upload, mobile-safari, iphone-web-app

我对 iOS 中的新 fakepath 功能有疑问。所有文件都重命名为路径“C:\fakepath\image.jpg”。

在之前的 iOS 6 版本中，一切正常，文件的原始名称为“.../IMG_...”，但最近的一次更新似乎通过引入这个更严格的假路径来破坏某些东西。我认为问题如下，有人可以确认吗？：上传 .jpgs 仍然有效。上传 .pngs 不会。如果我确实从相机胶卷上传了 .png 文件（例如屏幕截图），则文件路径将替换为“C:\fakepath\image.jpg”，并且只是重命名为 .jpg 文件（内容似乎保持为 png）。我认为，在这种情况下，正确的 fakepath 应该是“C:\fakepath\image.png”。麻烦从这里开始。

这是移动 Safari 中的错误吗？或者是我的 HTML 代码有问题（使用了一些 GWT 魔法）。在我的设备上用纯 HTML 也试过了——同样的问题。我的手机是否“配置错误”？如果有人能在我实现一些服务器端魔法作为解决方法之前确认这个错误，我会很高兴。在互联网上找不到任何东西。

问候和感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-30T08:39:38.410

移动 safari 的配置通常不是问题，因为苹果没有为您提供很多选项来实际更改移动设备上的 safari 配置。它可能是一个有问题的 html 代码。尝试使用不同移动版 Safari 的模拟器。如果问题仅存在于 safari 的一个版本中，请尝试查看更新版本的文档，看看它们是否更改了 safari 如何解释 html5 中某些标签的方式，因此请尝试查看大部分内容并查看您的代码。如果仍然没有，您总是可以使用一些脚本来处理该特定错误。这可能是一个漫长的过程。所以，祝你好运。

# android - 从 url 加载大图像时出现 OutOfMemory 错误

> ID：15812265
> 
> 赞同：0
> 
> 时间：2013-04-04T13:12:46.010
> 
> 标签：android, lazy-loading

我正在使用此[链接](https://github.com/thest1/LazyList)中的延迟加载来从 url 设置图像，并且我有非常大的位图。在我的列表视图中有很多图像要加载，当我滚动列表视图 20-30 次时，它会出现内存不足的错误。如何，可以我解决了这个错误..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:27:07.397

内存不足错误

当使用可用平台资源无法满足内存请求时引发。这样的请求可以由正在运行的应用程序或由 VM 的内部功能发出。

所以你的镜像太大了，超出了虚拟机分配的内存。缩小图像或使用以下库。

您可以使用

1.  懒惰列表

2.  通用图像加载器

延迟列表是使用 url 从 sdcard 或 fomr 服务器延迟加载图像。这就像按需加载图像。

图像可以缓存到本地sd卡或手机内存。Url 被认为是关键。如果密钥存在于 sdcard 中，则显示来自 sd 卡的图像，否则通过从服务器下载显示图像并将其缓存到您选择的位置。可以设置缓存限制。您还可以选择自己的位置来缓存图像。缓存也可以清除。

而不是用户等待下载大图像然后显示惰性列表按需加载图像。由于图像区域缓存，您可以离线显示图像。

[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)。懒惰列表

在你的 getview

```
 imageLoader.DisplayImage(imageurl, imageview); 
```

ImageLoader 显示方法

```
public void DisplayImage(String url, ImageView imageView) //url and imageview as parameters
{
imageViews.put(imageView, url);
Bitmap bitmap=memoryCache.get(url);   //get image from cache using url as key
if(bitmap!=null)         //if image exists
    imageView.setImageBitmap(bitmap);  //dispaly iamge
 else   //downlaod image and dispaly. add to cache.
 {
    queuePhoto(url, imageView);
    imageView.setImageResource(stub_id);
 } 
```

惰性列表的替代方法是通用图像加载器

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。它基于惰性列表（工作原理相同）。但它还有很多其他配置。我更喜欢使用*Universal Image Loader*，因为它为您提供了更多配置选项。如果下载失败，您可以显示错误图像。可以显示带圆角的图像。可以缓存在磁盘或内存上。可以压缩图像。

在您的自定义适配器构造函数中

```
 File cacheDir = StorageUtils.getOwnCacheDirectory(a, "your folder");

  // Get singletone instance of ImageLoader
  imageLoader = ImageLoader.getInstance();
  // Create configuration for ImageLoader (all options are optional)
  ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(a)
      // You can pass your own memory cache implementation
     .discCache(new UnlimitedDiscCache(cacheDir)) // You can pass your own disc cache implementation
     .discCacheFileNameGenerator(new HashCodeFileNameGenerator())
     .enableLogging()
     .build();
   // Initialize ImageLoader with created configuration. Do it once.
   imageLoader.init(config);
   options = new DisplayImageOptions.Builder()
   .showStubImage(R.drawable.stub_id)//display stub image
   .cacheInMemory()
   .cacheOnDisc()
   .displayer(new RoundedBitmapDisplayer(20))
   .build(); 
```

在你的 getView()

```
 ImageView image=(ImageView)vi.findViewById(R.id.imageview); 
   imageLoader.displayImage(imageurl, image,options);//provide imageurl, imageview and options 
```

您可以配置其他选项以满足您的需求。

这就是作者要说的。（直接来自主题有用信息下的链接）

如果您在使用 Universal Image Loader 的应用程序中**经常遇到 OutOfMemoryError**，那么请尝试下一个（全部或多个）：

1.  减少配置中的线程池大小 (.threadPoolSize(...))。建议使用 1 - 5。在显示选项中使用 .bitmapConfig(Bitmap.Config.RGB_565)。RGB_565 中的位图消耗的内存是 ARGB_8888 中的 2 倍。

2.  在配置中使用 .memoryCache(new WeakMemoryCache()) 或在显示选项中完全禁用内存中的缓存（不要调用 .cacheInMemory()）。

3.  在显示选项中使用 .imageScaleType(ImageScaleType.IN_SAMPLE_INT)。或尝试 .imageScaleType(ImageScaleType.EXACTLY)。

4.  避免使用 RoundedBitmapDisplayer。它使用 ARGB_8888 配置创建新的位图对象，以便在工作期间显示。

除了延迟加载/通用图像加载器，您还可以使用**视图持有者来实现平滑滚动和性能。**

[http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:17:33.643

您需要确保在可能的情况下进行下采样，并且由于您使用的是 ListView，因此您还可能通过将图像缓存在内存或磁盘中来获得好处。

在此处阅读最佳实践：[高效显示位图](http://developer.android.com/training/displaying-bitmaps/index.html)

如果您正在寻找一种更简单的方法来实现最佳实践，请考虑使用帮助程序库来加载图像。这是一个不错的：[Android-Universal-ImageLoader](https://github.com/nostra13/Android-Universal-Image-Loader)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:17:08.483

发生此错误，因为图像很大。您可以通过下面提到的方法有效地处理它。

[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T13:17:24.993

检查此库以延迟加载[Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。该库为异步图像加载、缓存和显示提供了可重用的工具。它最初基于延迟加载项目，并且从那时起进行了大量的重构和改进。

# c++ - std::set 没有成员 emplace

> ID：15812276
> 
> 赞同：24
> 
> 时间：2013-04-04T13:13:19.937
> 
> 标签：c++, c++11, g++, libstdc++, g++-4.7

g++ 4.7.2 是否实现`std::set::emplace`了 C++11 标准所定义并[在此处](http://en.cppreference.com/w/cpp/container/set/emplace)记录的？

我写了以下小测试用例：

```
#include <set>
#include <string>

struct Foo
{
    std::string mBar;
    bool operator<(const Foo& rhs) const
    {
        return mBar < rhs.mBar;
    }
    Foo(const std::string bar) : mBar(bar) {};
};

typedef std::set<Foo> Foos;

int main()
{
    Foos foos;
    foos.emplace(std::string("Hello"));
} 
```

在 G++ 4.7.2 下，编译失败：

```
[john.dibling@somewhere hacks]$ g++ -o main.o -std=c++0x -c main.cpp
main.cpp: In function ‘int main()’:
main.cpp:19:10: error: ‘Foos’ has no member named ‘emplace’ 
```

也无法在[IDEOne](http://ideone.com/Dgteux)下编译，但它可以在 MSVC 2012 Update 1 下编译。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-04T13:55:31.727

[它没有在 gcc 4.7.2 中实现。](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=44436)

有一些解释：

> 只是澄清一下：这不是*疏忽*。我们在带有 std::pair 的 C++0x 标准草案中遇到了*令人讨厌的* 问题，这基本上使得在不破坏现有用户代码的情况下将 emplace_* 成员添加到 std::map、std::multimap 等是不可能的。因此，我们一直在等待，直到整个领域的事情都得到澄清。现在实际上可以在这些设施上工作。

您的代码可以使用 gcc 4.8.0 很好地编译，请参阅[LWS](http://liveworkspace.org/code/2ec5Ko$0)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T13:36:10.097

`emplace()`为 gcc 4.8.0 添加了关联容器`libstdc++`，在 gcc 4.7.2 下它不起作用。

# performance - 按下按钮在 Qt 中播放音频；有效率的

> ID：15812281
> 
> 赞同：2
> 
> 时间：2013-04-04T13:13:27.170
> 
> 标签：performance, qt, audio, phonon

我想在按钮按下时播放声音，我有一个工作代码。

```
Phonon::MediaObject *bulletPlay = new Phonon::MediaObject(this);
bulletPlay -> setCurrentSource(Phonon::MediaSource("newBullet3.wav"));
playOutput = new Phonon::AudioOutput(Phonon::MusicCategory, this);
Phonon::createPath(bulletPlay, playOutput);
bulletPlay->play(); 
```

但是在按钮按下时做所有这些事情会导致性能受损。我知道每次访问磁盘都是原因。（好吧..您可以说该文件无论如何都在内存中，因此每次按下按钮时都没有磁盘访问权限..缓冲区缓存等等..但是此代码严重损害了性能。）

所以我只是做的是

```
static  Phonon::MediaObject *bulletPlay;
static  Phonon::AudioOutput *playOutput;
static  Phonon::MediaSource *filePath; 
```

在我的课上。在构造函数中

```
bulletPlay = new Phonon::MediaObject(this);
filePath = new Phonon::MediaSource("newBullet3.wav");
bulletPlay -> setCurrentSource(*filePath);
playOutput = new Phonon::AudioOutput(Phonon::MusicCategory, this);
Phonon::createPath(bulletPlay, playOutput); 
```

并`bulletPlay->play();`按下按钮。

但它只在第一次播放声音。所以看来我每次使用时都必须设置当前资源`bulletPlay -> setCurrentSource(*filePath);`。那么我该怎么做呢？我不想每次都设置当前资源..我也无法测试应用程序进行性能测试，因为测试人员在客户端..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:43:44.407

您需要`slot`在类中创建一个单独的按钮触发按钮，而不是直接连接到`buttonPlay->play()`按钮。您看到的问题是`buttonPlay`对象正在使用的音频缓冲区是“最后”。所以你需要告诉它从头开始，这就是`bulletPlay -> setCurrentSource(*filePath);`为你做的事情。您不需要创建新资源，您应该能够告诉现有资源重用当前资源（但只需从头开始）。

# hl7 - 如何使用 HAPI TERSER 解析 HL7 中的多个 OBR 段

> ID：15812283
> 
> 赞同：7
> 
> 时间：2013-04-04T13:13:28.147
> 
> 标签：hl7, hapi

如何使用 terser 使用 HAPI 解析 HL7 中的多个 OBR 段

我有这样的示例 hl7 消息

```
MSH|^~\&|SENDERAPP|SENDERFAC|COVCDR|COVCDR|20130212221503||ORU^R01|1676326503009050|P|2.5
PID|1||MRN101||DOE^JOHN^A||20000101|M||W|1 Campus Martius^^Detroit^MI^48226||(313)227-7300||EN|S|||111-11-1111|||H
PV1|1|U| 12E^1211^01||||1689885733^ORANGE TEAM, OMNI|||Med||||Tra|||99999999^SMITH^KEVIN^^^^MD|I|000000000000|YY|P||||||||||||||||||||Ac|||20130224080500
ORC|RE|F78520223|000000000^LA||CM||||20130226020200||||  PICU|||^RESULT PERFORMED|||RES
OBR|1|F78520223|1305611705^LA|0101301^COMPLETE BLOOD COUNT^COMPLETE BLOOD COUNT|||20130226010600|20130226020200||2632||||20130226014200||333333^GEORGE, BOB|||||0001305611705|20130226020200|||F||^^^20130226043000^^EA~^^^^^EA
OBX|1|NM|0106550^WHITE BLOOD CELL COUNT^WHITE BLOOD CELL COUNT||7.9|10e9/L|4.3-11.0||||F|||20130226020200|34333^Kelly, Bacon^^00010033^MOLIS XE2|RES
OBX|2|NM|0104650^RBCx10e12^RBCx10e12||4.09|10e12/L|4.53-5.73|L|||F|||20130226020200|34333^Kelly, Bacon^^00010033^MOLIS XE2|RES
OBX|3|NM|0102150^HEMOGLOBIN^HEMOGLOBIN||12.9|g/dL|13.6-17.4|L|||F|||20130226020200|34333^Kelly, Bacon^^00010033^MOLIS XE2|RES
OBX|4|NM|0102100^HEMATOCRIT^HEMATOCRIT||37.5|%|40.7-50.8|L|||F|||20130226020200|34333^Kelly, Bacon^^00010033^MOLIS XE2|RES
OBX|5|NM|0103500^MEAN CORPUSCULAR VOLUME^MEAN CORPUSCULAR VOLUME||91.7|fL|81.6-96.8||||F|||20130226020200|34333^Kelly, Bacon^^00010033^MOLIS XE2|RES
NTE|1||Test performed at Tulsa 
```

我正在使用 `terser.get("/.OBX-3-1"));`访问 OBX 父段。如何使用 terser 访问子 OBX 段

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T15:40:57.530

OBX 嵌套在 OBSERVATION 组中（反过来，该组又嵌套在其他组中）。实际上，不是 OBX 段是可重复的，而是 OBSERVATION 组是可重复的。因此，您的简洁表达式将类似于`terser.get("/.OBSERVATION(i)/OBX-3-1");`，在您的情况下，我从 0 运行到 3。

欢呼基督徒

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-22T20:26:49.957

我认为你应该使用 terser.get(/OBX(repetition)-3-1)。例如，terser.get(/OBX(2)-3-1) 应该等于 0102150。记住重复从 0 开始，所以 OBX(2) 指的是 OBX|3|NM|0102150^HEMOGLOBIN^.. .

你可以在这里找到一些关于重复的更简洁的例子：

我已经写了几篇关于这个问题的帖子。你可以找到它们：

[http://ignaciosuay.com/how-to-use-hapi-terser-with-hl7/](http://ignaciosuay.com/how-to-use-hapi-terser-with-hl7/)

[http://ignaciosuay.com/how-to-set-repetitions-in-hl7-messages-using-hapi-terser/](http://ignaciosuay.com/how-to-set-repetitions-in-hl7-messages-using-hapi-terser/)

干杯伊格纳西奥

# batch-file - 批量列出文件夹和命名

> ID：15812284
> 
> 赞同：0
> 
> 时间：2013-04-04T13:13:32.277
> 
> 标签：batch-file, imagemagick, dos

我现在正试图用你的知识改进我的旧脚本

这是我的实际脚本

```
@echo off
SET DSESS=%CD:~22,6%
SET SSESS=P_S013
for /f %%i in ('dir /b /a-d %DSESS%_*.png') do (
convert %%i -resize 1500x1500 %%~ni.jpg
)

mkdir \\Nascfmj1\DOCNUM\partition\entier\%SSESS%\%DSESS%
move *.jpg \\Nascfmj1\DOCNUM\partition\entier\%SSESS%\%DSESS%

mkdir \\Nascfmj1\DOCNUM\partition\conservation\%SSESS%\%DSESS%
copy *.png \\Nascfmj1\DOCNUM\partition\conservation\%SSESS%\%DSESS%

copy *.pdf \\Nascfmj1\DOCNUM\partition\entier\%SSESS%

convert *0001.png -resize 1500x1500 %DSESS%_COUV.jpg
copy *_COUV.jpg \\Nascfmj1\DOCNUM\partition\pochette\%SSESS% 
```

* * *

正如你所见，没有什么奢侈的

我从运行脚本`I:\2013CAPTURE\b-p_98\P_1345` 在实际情况下，如果我更改命名脚本的 ciontaining 文件夹将无法识别正确的路径（`%CD:~22,6%`）

在`I:\2013CAPTURE\b-p_98\`有一个从`P_1000`实际开始的文件夹列表中，`P_1345` 我可以从中运行脚本`I:\2013CAPTURE\b-p_98\`并告诉批处理进入每个文件夹，通过使用文件夹名称命名 DSESS 继续执行脚本吗？另请注意，文件夹内的所有文件都以这种类型命名 ( `P_1000_0001.png`)

感谢您的宝贵帮助

担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:34:18.530

```
@ECHO OFF
SETLOCAL
::
:: These are YOUR relative-root (base of scanning tree)
:: and destination
:: No idea where SSESS appears from... :(
::
SET SSESS=P_5013

SET relroot=I:\2013CAPTURE\b-p_98
SET dest=\\Nascfmj1\DOCNUM\partition

::
:: These are MY directories used for testing
::
SET dest=C:\destdir\%ssess%
SET relroot=u:\b-p_98

SET entier=%dest%\entier\%SSESS%
SET conservation=%dest%\conservation\%SSESS%
SET pochette=%dest%\pochette\%SSESS%

::
:: This is for a test - creating dummy files
:: 3 directories, 3 ".png" files in each, 
::
FOR /L %%i IN (1000,1,1002) DO (
 MD %relroot%\p_%%i
 FOR /L %%f IN (2000,1,2002) DO (
   dir>%relroot%\p_%%i\p_%%i_%%f.png
 )
)

::
:: Routine proper - create pochette
::
MD %pochette%
FOR /f %%a IN ('dir /ad/b "%relroot%\P_????" ' ) DO (
 PUSHD "%relroot%\%%a"
 FOR /f %%i IN ('dir /b /a-d P_*.png ') DO (
  CALL :CONVERT %%i -resize 1500x1500 %%~ni.jpg
 )

 MD %entier%\%%a
 move *.jpg %entier%\%%a

 mkdir %conservation%\%%a
 copy *.png %conservation%\%%a

 copy *.pdf %entier%

 CALL :convert *0001.png -resize 1500x1500 %%a_COUV.jpg
 copy *_COUV.jpg %pochette%

 POPD

)

GOTO :eof

::
:: I don't have CONVERT.EXE...
::
:CONVERT
ECHO execute command: CONVERT %*
::
:: Two different situations:
:: either create DUMMY .PDF and .JPG
:: OR DUMMY _COUV
ECHO %*|FINDSTR /i "couv" >NUL
IF ERRORLEVEL 1 (
DIR >%4
DIR >%~n4.PDF
) ELSE (
DIR >%4
)
GOTO :eof 
```

这应该可以完成任务 - 好吧，如果没有，我几乎不会发布它，对吗？

我不知道 SSESS 来自哪里，所以我只是`SET`在文件的开头。

`relroot`设置为开始扫描`dest`的位置，以及将移动或复制文件的位置。我立即将它们重置为我的测试目录 - 我建议您设置一个类似的真实数据树进行测试。

然后计算`entier`,`conservation`和`pochette`目录。

然后我在我的测试区域创建了一些虚拟的“.png”文件和目录。

我注意到你没有`pochette`在你的日常生活中做，所以我做了一个。

然后是主例程 - 每个目录名匹配 P_???? 在目录`%relroot%`中依次分配给`%%a`，所以`%%a`替换`%DSESS%`

PUSHD 更改为所选目录名，您应该熟悉该`CONVERT`命令。我调用了一个子程序来模拟创建a`.jpg`并同时制作了a `.pdf`。

处理完`.png`s 后，创建 的子目录`entier`并将适当`.jpg`的 s 移至其中。`conservation`与s相同的故事`.pdf`被复制到`entier`目录中。

最后，`convert`再次调用例程以完成`*_couv.jpg`文件，然后可以将其移动到`pochette`

POPD 恢复原始目录，我们继续，直到所有目录都完成。

所以这个例程可以从任何地方运行——不管当前目录是什么。

很好的测试！

高温高压

# java - 分布式主机时 JGroup 3.2.7 不执行集群

> ID：15812288
> 
> 赞同：1
> 
> 时间：2013-04-04T13:13:41.040
> 
> 标签：java, protocols, multicast, jgroups

JGroup 版本：3.2.7-final

1.) 在同一台机器上的两个演示程序实例

`java -Djava.net.preferIPv4Stack=true org.jgroups.demos.Draw`

工作正常。

2.) 在同一子网中的两台不同机器上 - 演示程序

`java -Djava.net.preferIPv4Stack=true org.jgroups.demos.Draw`

也试过

`java -cp $CLASSPATH -Djava.net.preferIPv4Stack=true -Djgroups.udp.mcast_addr=239.192.0.1 -Djgroups.udp.mcast_port=45590 -Djgroups.udp.ip_ttl=32 org.jgroups.demos.Draw`

以上都没有工作。我看不到来自远程主机的任何传入请求。

但是当我在两台机器上尝试 java org.jgroups.tests.McastReceiverTest 和 java org.jgroups.tests.McastSenderTest 时似乎可以正常工作。

但是复制设置没有运气。

注意：我的一台集群机器是 32 位的，而另一台是 64 位的。

感谢您帮助解决此问题。

# java - 在 C++ 中嵌入 GWT？

> ID：15812299
> 
> 赞同：2
> 
> 时间：2013-04-04T13:14:00.790
> 
> 标签：java, c++, gwt, v8

我想用 java 编写代码，用 GWT 编译并通过 v8 将输出的 JavaScript 嵌入到 C++ 程序中。一切似乎都是合乎逻辑的，因此是可能的。我以前没有使用过 GWT，所以我不确定。也许有人知道这是否可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:34:21.213

您可以从 GWT 输出复制 JavaScript 代码，您只需使用编译器的“-style”标志将混淆类型设置为 PRETTY 或 DETAILED（以便更好地阅读）。您可以在此处阅读有关[GWT 中代码混淆的更多信息](https://developers.google.com/web-toolkit/doc/1.6/FAQ_DebuggingAndCompiling#Why_is_my_GWT-generated_JavaScript_gibberish?)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:31:56.183

当然你可以像其他人一样使用 GWT 来生成在 chrome 和 ff 插件等中运行的 js。

认为gwt核心只是一个编译器，它获取java代码并生成js。

你需要记住的：

首先是编译后，gwt 使用链接器将结果代码包装在特定于 js 执行方式的 .js 或 .html 文件中，因此您必须编写一个链接器（或修改现有的链接器）来传递js 代码以你需要的方式。

其次，gwt 对某些事情使用浏览器实现，所以也许您必须选择哪些排列更适合 v8，并可能调整一些实现。

# php - Yii - 在 GridView 单元格内渲染小部件

> ID：15812301
> 
> 赞同：2
> 
> 时间：2013-04-04T13:14:10.930
> 
> 标签：php, gridview, yii, widget

我想在 CGridView 单元格内呈现小部件。这怎么可能？

确切地说 - 我想在 CGridView 中呈现 TbProgress 小部件。我找不到任何解决方案，因此我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:15:20.913

在列定义中使用函数 as `value`。如果函数返回 html 使用`type`as `raw`，所以它不会被转义。函数将获取`$data`当前模型实例的参数。下面是一些简单的例子：

```
$this->widget('CGridView', [
     'dataProvider' => $dataProvider,
     'columns' => [
          [
                'name' => 'title',
                'type' => 'raw',
                'value' => function($data)
                {
                    return CHtml::link(MHtml::i18nGetValue($data, 'title'), ["page/update", "id" => $data->id]);
                },
          ],
.... 
```

# android - 停止按钮没有停止我的位置服务

> ID：15812302
> 
> 赞同：1
> 
> 时间：2013-04-04T13:14:17.470
> 
> 标签：android, service, gps, intervals, locationlistener

我正在尝试编写一个间隔运行的服务。并且每次运行时，它都应该检索手机的当前位置。就看起来我的间隔运行正常。但是一旦我按下开始按钮，我就不能再使用停止按钮来停止它了。我已经尝试过使用一个线程，但是那个总是给我错误。我也尝试过使用while循环，但不知何故我的应用程序崩溃了。无论如何，这是我现在的代码：

```
public class Location extends Service {

LocationManager locMan;
LocationListener myLocListener;
int intervalTime = 1000 * 30;
int minTime = 0;
float minDistance = 0;

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onCreate() {
    // TODO Auto-generated method stub
    final Handler handler = new Handler();
    final Runnable runnable = new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub

            locMan = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

            //check if GPS is on
            if (!locMan.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
                Toast.makeText(
                        getApplicationContext(),
                        "Failed to start Location service! Please turn you GPS on!",
                        Toast.LENGTH_LONG).show();
                stopSelf();
            } else if (locMan.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
                Toast.makeText(getApplicationContext(),
                        "Service Started",
                        Toast.LENGTH_SHORT).show();
                getLocation();
            }
        }

        private void getLocation() {
            // TODO Auto-generated method stub
            try {

                locMan = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

                //while GPS remains on, run this script.
                while (locMan.isProviderEnabled(LocationManager.GPS_PROVIDER)) {

                    myLocListener = new LocationListener() {

                        @Override
                        public void onStatusChanged(String provider,
                                int status, Bundle extras) {
                            // TODO Auto-generated method stub

                        }

                        @Override
                        public void onProviderEnabled(String provider) {
                            // TODO Auto-generated method stub

                        }

                        @Override
                        public void onProviderDisabled(String provider) {
                            // TODO Auto-generated method stub

                        }

                        @Override
                        public void onLocationChanged(
                                android.location.Location location) {
                            // TODO Auto-generated method stub
                            String loc = "Latitude is: "
                                    + location.getLatitude()
                                    + "Longitude is: "
                                    + location.getLongitude();

                            Toast.makeText(getApplicationContext(),
                                    loc,
                                    Toast.LENGTH_SHORT).show();
                        }
                    };

                    // Specify criteria for a gps provider and get the provider
                    Criteria criteria = new Criteria();
                    criteria.setPowerRequirement(Criteria.POWER_LOW);
                    criteria.setAccuracy(Criteria.ACCURACY_FINE);
                    criteria.setAltitudeRequired(false);
                    criteria.setBearingRequired(false);
                    criteria.setCostAllowed(true);
                    criteria.setSpeedRequired(false);

                    String BestProvider = locMan.getBestProvider(criteria,
                            false);

                    locMan.requestLocationUpdates(BestProvider,
                            minTime,
                            minDistance,
                            myLocListener);

                    Toast.makeText(getApplicationContext(),
                            "Location Retrieved",
                            Toast.LENGTH_SHORT).show();

                    handler.postDelayed(this, intervalTime);
                }
                stopSelf();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    };
    handler.postDelayed(runnable, intervalTime);
}

@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    if (myLocListener != null) {
        locMan.removeUpdates(myLocListener);
    }

    Toast.makeText(getApplicationContext(),
            "Service stopped",
            Toast.LENGTH_LONG).show();
    super.onDestroy();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:27:19.293

您在 Runnable 中运行 getLocation()，我猜您需要在您的可运行对象中添加一个新的处理程序，并在 onDestroy 中向该处理程序发送消息以停止位置侦听。

在 HandleMessage 内的可运行文件中，您可以停止侦听位置。

**[使用cwac-locpoll](https://github.com/commonsguy/cwac-locpoll)**库怎么样？它完全符合您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:13:44.577

为什么不让服务运行，并告诉 LocationManager 只在`intervalTime`s 通知你。换句话说，删除`stopSelf()`并设置`minTime`为`1000 * 30`.

# php - 没有BR的PHP新行

> ID：15812303
> 
> 赞同：0
> 
> 时间：2013-04-04T13:14:22.987
> 
> 标签：php

我试过四处寻找解决方案，但似乎找不到；

我有一个 mysql 代码，它从我的数据库中选择东西并回显它们，但我希望它们中的每一个都被回显到一个新行上，但源代码不能包含任何
或任何代表换行符事实的东西。

```
$custom_flash_texts = $db->query("SELECT * FROM external_texts");
    while($texts = $custom_flash_texts->fetch_assoc()) {
        echo $texts['skey'], '=', $texts['sval'];
        echo '/n/r';
    } 
```

并在页面上显示

```
handitem7=Water/r/nhanditem7=Food/r/nhanditem7=Water

It needs to display like this:
handitem7=Water
handitem7=Food

handitem7=Water 
```

我不知道:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T13:18:44.500

```
echo 'test'."\r\n"; 
```

\r\n 应该是**双**引号

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T13:15:54.417

```
\r\n 
```

试试看。它应该工作。想要制作 30 个字符 xD

- 编辑 -

每个操作系统都有不同的 ASCII 字符用于换行：

*   窗户=“\r\n”

*   Unix = "\n"

*   mac = "\r"

忘了说，用`"`代替`'`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T13:17:57.513

如果您在 HTML 中回显，则使用echo`"\r\n"`或使用 a 。`<br/>`

如果字符串用双引号括起来，PHP 将解释特殊字符的转义序列。在这种情况下：

```
\r  carriage return
\n  linefeed 
```

[您可以在此处](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double)了解更多信息。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-04T13:17:46.957

试试这个：

```
echo $texts['skey'], '=', $texts['sval']'<br>'; 
```

或者就像这样：

```
echo $texts['skey'], '=', $texts['sval'];  
echo '<br>'; 
```

# crystal-reports - 如何从主报表获取水晶报表参数到所有子报表？

> ID：15812320
> 
> 赞同：0
> 
> 时间：2013-04-04T13:14:56.017
> 
> 标签：crystal-reports, crystal-reports-2008

我想知道是否有一种简单的方法可以将主报告中的参数添加到所有子报告中？或者在子报表的公式字段中引用主报表的参数？

我可以手动选择每个子报表并添加一个具有相同名称的参数，然后执行“更改子报表链接”，但每个报表中可能会有 30 个子报表，并为所有子报表创建一个具有相同名称的参数并链接一段时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:19:23.420

您需要手动将每个子报告链接到“主”报告。您无需在每个子报告中显式创建参数字段 - CR 会在您选择字段时为您执行此操作。

# android - 在android上识别和操作图像中的对象

> ID：15812326
> 
> 赞同：1
> 
> 时间：2013-04-04T13:15:12.537
> 
> 标签：android, image-processing

我正在尝试开发一个视觉密码学 android 应用程序。这个想法是用户可以拍摄看起来像一个黑白点矩形的共享照片。然后，该应用程序应该能够在通过相机拍摄的照片中找到的第二张共享图像上叠加以揭示秘密。

我目前有一个应用程序可以拍照并能够在该图片之上覆盖第二个共享，但我无法判断该图片是否首先包含共享我如何识别和查找图像中共享的位置.

有没有办法为我的目的更改开源 qr 扫描仪，因为 QR 码和视觉密码共享看起来相似？

可以在此处找到视觉密码学共享的示例（由于没有声誉，我无法发布图像）：

[http://upload.wikimedia.org/wikipedia/commons/0/0e/Visual_crypto_animation_demo.gif](http://upload.wikimedia.org/wikipedia/commons/0/0e/Visual_crypto_animation_demo.gif)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:24:54.163

您可以使用[OpenCV](http://opencv.org/)进行图像处理。它有很多你想要的功能。

如果你打算在 android 中使用它，你可以使用 java 中的包装器：[JavaCV](https://code.google.com/p/javacv/)

# c++ - 核心 bada 接口是基于对 C++ 结构的不当使用而构建的吗？

> ID：15812331
> 
> 赞同：0
> 
> 时间：2013-04-04T13:15:24.827
> 
> 标签：c++, language-lawyer, bada

几年前，我浏览了刚刚发布的三星 BADA SDK 和相关资料，我被大量的“教程”和“指南”所震惊，这些“教程”和“指南”试图通过构建不良的示例来阐明语言和平台的各个基本方面C++ 语言级别的明显错误（即参见[http://mobileawards.ir/LinkClick.aspx?fileticket=zf9YxiDILVg=&tabid=937](http://mobileawards.ir/LinkClick.aspx?fileticket=zf9YxiDILVg=&tabid=937)的第 8 页和第 9 页- 三星发布的演示文稿，代码示例是原始的，我见过SDK中类似的地方）。但它相对较新，所以我认为他们会清理它。

最近对我提出了一些不能仅仅将其视为“错字”或“意外错误的代码示例”的事情：

[BADA IList 参考](http://dpimg.ospos.net/contents/apis/bada/bada-V1.0.0a2/framework/classOsp_1_1Base_1_1Collection_1_1IList.html#aecdf0e4a881794e3f42d900b52534d7)

> virtual result Osp::Base::Collection::IList::Add ( **const Object & obj** ) [pure virtual]
> 参数：
> [in] obj 要添加的对象
> 备注：
> **该方法执行浅拷贝。它只添加了指针；不是元素本身。**
> …………
> _
> 
> 虚拟**对象*** Osp::Base::Collection::IList::GetAt( int index ) [纯虚拟]

对我来说，从“经典 C++”的角度来看，这是一个明显的错误。在很多层面上都是错误的：

1.  它通过引用接受通用事物以存储在列表中。在备注中，有一个注释，它将不是通过复制，不是通过引用，而是通过指针存储。采用 by-ref 而不是指针可能只会迫使实现者执行一些强制转换/*/&s，但这是相对较小的问题

2.  接受的参考是**const**。项目访问器 GetAt() 实际上返回非常量对象！因此，该系列会自动为您解构一切。

3.  各种指南中有很多警告告诉您不要 Add() 基于堆栈或列表中的临时对象。他们明确地告诉您 Add() 仅基于堆的对象，由`new`..

4.  GetAt 实际上返回非常量**指针**，而不是引用！可能是为了能够返回一个魔术值作为错误（在 BADA 中没有异常处理..）。现在看一些关于列表处理的各种教程，观察所有那些散布在最令人惊讶的地方的 *s 和 &s，例如：

    ```
    MyObj* x = new MyObj();
    list.Add(*x);           // the '*' is at least mighly misleading.. 
    ```

    这后来导致了一些惊人的问题，比如[没有使用指针的三星 bada 开发，](https://stackoverflow.com/questions/7481968/samsung-bada-development-without-using-pointers)这表明这个可怜的人真的很困惑。但我开始跑题了。

以上是其中一个核心接口的片段，稍后将被各种核心集合实现和使用。实际上所有哈希/列表/等都有类似的 hm.. 约定。

对我来说，它看起来好像是由受过 Java 或 C# 培训的人设计的，并且对 C++ 语言知之甚少。Const 经常被滥用，引用也是如此。而且，我看不出**有任何理由***）

我在这里的判断错了吗？你知道为什么这些接口是这样设计的任何合理的解释吗？确切地说，我正在寻找以下解释：

*   为什么他们使用'const'，而它并不是真正的意思或保留？
*   为什么他们使用引用，而他们在没有使用的评论中说？

(*) 好吧，除了“引用不能为 NULL”的都市神话，这可能表明“添加”不能接受空指针。这仍然是一个疯狂的想法，因为添加元素需要您取消引用`Add(*ptr)`，因此很容易注意到引用当然可以是 NULL..

编辑/问题理由：

在迈克的即时和明确的评论之后，我试图尽可能多地删除“咆哮”，这很可能是因为我有时会遇到“纯粹主义者”的情绪。尽管如此，很难在没有听起来像抱怨的情况下提出错误。我不是一个bada开发者。我没有任何真正的理由来咆哮。我的问题不是修辞：我真的很想知道这种设计的原因。我不接受简单的“因为这个/那个开发者是坏的”。这是可能的，我想过，但我拒绝这样的推理，因为我不是无所不知的，因为，嗯，这是完全无法证明的。我问是因为这让我很困扰，我想知道原因。我希望一些经验丰富的 bada 开发人员会出现并指向我一些描述它的文章，我无法搜索到，或者会丢弃一些历史信息，实际上证明这是从 pre-std-C++ 借来的塞班。我不指望快速反应。我实际上认为这个问题会一直没有回应，因为地球上可能没有多少人可以提供这样的信息。然而，这并没有使这个问题成为反问，而且在我看来，这并没有使它成为非问题。当然，每个人都可以有不同的看法。如果是这样，它将被关闭。我实际上认为这个问题会一直没有回应，因为地球上可能没有多少人可以提供这样的信息。然而，这并没有使这个问题成为反问，而且在我看来，这并没有使它成为非问题。当然，每个人都可以有不同的看法。如果是这样，它将被关闭。我实际上认为这个问题会一直没有回应，因为地球上可能没有多少人可以提供这样的信息。然而，这并没有使这个问题成为反问，而且在我看来，这并没有使它成为非问题。当然，每个人都可以有不同的看法。如果是这样，它将被关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:30:48.033

是的。

这根本没有好的工程原因。C++ 的标准化是一个典型的 ISO 流程，开放且有据可查。有数以千计的公共文件可用，许多专家与社区密切相关。自从 1996 年将 STL 集成到标准 C++ 中以来，这种特殊的风格就被弃用了。

更糟糕的是，这些 Bada 集合没有向标准 C++ 添加功能，因此它们非常多余。

商业原因可能是所有优秀的三星工程师都在编写真实代码而不是 Bada。这是，我很抱歉如此苛刻，业余水平。

# php - 所选餐点必须向我显示正确的价格，但他向我显示错误调用非对象的成员函数 fetch_assoc()

> ID：15812338
> 
> 赞同：-1
> 
> 时间：2013-04-04T13:15:43.273
> 
> 标签：php, javascript, mysqli

我想要的是，当我选择一顿饭时，他会告诉我这顿饭和合适的价格。现在他向我展示了饭菜，但是当我选择其中一种饭菜时，出现了错误。

错误：在非对象上调用成员函数 fetch_assoc()

当我在 mwvp.php 中删除此代码时。然后您会看到存储在数据库中的所有价格。

您可以在此下方看到已删除的原始代码。

换餐.php

```
<?php
include ("connection.php");
?>
<!DOCTYPE html>
<html>
<head>
<title>Kantine</title>
<link rel="stylesheet" type="text/css" href="test.css">
<meta charset="utf-8">
<script src="js/jquery.min.js"></script>
   <script type="text/javascript">
        function getMeals(str) {
            $('#meal_data').text("");
            if (str == "select")
                return;
            $('#meal_data').load('mwvp.php?q='+str);
        }   
  </script>
</head>
<body>
<div id="container">
<div id="logo"></div>
<div id="header">
<h1>Change Meal</h1></div>
<div id="menu">
<a href="Addmeal.php"><img src="Addmeal.png"/></a>
</div>
<div id="content">
<?php
$result = mysqli_query($con,"SELECT meal, price FROM Meals ");
  echo '<select name="Meals"onchange="getMeals(this.value)"><option value="select">Choose Meal</option>';
while ($row = $result->fetch_assoc())  {
  echo "<option value=\""."\">" . $row['meal']."</option>\n";
  echo '<br />'; 
  }
  echo '</select>';
  echo '<ul id="meal_data">';
  echo '</ul>';

  mysqli_close($con);
?></div>
<div id="footer"></div></div>
</body>
</html> 
```

原始mwvp.php

```
<!DOCTYPE html>
<html>
<meta charset="utf-8">
<?php
$q = $_GET["q"];
include("connection.php");

$result = mysqli_query($con, "SELECT meal, price FROM meals WHERE meal = " .$q);

while  ($row = $result->fetch_assoc())  {
    echo '<input name="price" type="text" value="'.$row['price'].'" />';
   }
?>
</html> 
```

删除了 mwvp.php 中的代码

```
<!DOCTYPE html>
<html>
<meta charset="utf-8">
<?php
include("connection.php");

$result = mysqli_query($con, "SELECT meal, price FROM meals") 
while  ($row = $result->fetch_assoc())  {
    echo '<input name="price" type="text" value="'.$row['price'].'" />';
   }
?>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:28:57.390

mysqli_query 在出错的情况下返回 FALSE。您的 SQL 请求中似乎有错误。尝试改变

```
$result = mysqli_query($con, "SELECT meal, price FROM meals WHERE meal = " .$q); 
```

至

```
$result = mysqli_query($con, "SELECT meal, price FROM meals WHERE meal = '" . mysqli_real_escape_string($con, $q) . "'"); 
```

# java - 有没有办法为公共方法的子集生成 Javadoc？例如，通过将公共方法注释为“不是公共 API 的一部分”

> ID：15812349
> 
> 赞同：8
> 
> 时间：2013-04-04T13:16:10.887
> 
> 标签：java, api, javadoc, doclet

我知道如何为类/接口/包的子集生成 Javadoc。但是有没有办法只为公共方法的一个子集生成 Javadoc？

我更希望能够将方法（Javadoc 标记或注释）标记为属于某个 API 或不属于它的一部分。然后有一个工具，它只为指定的方法集生成 Javadoc - 形成 API 的方法。

在公共/私有/包访问方法之间的选择对于我的项目来说是不够的。公共方法可能属于或不属于公共 API，或者它可能属于 API 1，但不属于 API 2。本质上，我希望能够从我的公共方法的任意子集中选择 API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:54:45.987

如果您不依赖于 javadoc，您也可以尝试使用带有[条件部分的](http://www.doxygen.nl/manual/commands.html#cmdcond)[doxygen](http://www.doxygen.nl/index.html)：

```
public class SomeClass {
    /// @cond API1
    /**
     * This method can be called as part of API1 only.
     */
    public void method() { ... }
    /// @endcond

    /// @cond (API1 || API2)
    /**
     * This method can be called as part of API1 or API2.
     */
    public void method2() { ... }
    /// @endcond
} 
```

当您适当地对方法进行分组时，您还可以限制所需`@cond`语句的数量。

然后可以[`ENABLED_SECTIONS`](http://www.doxygen.nl/manual/config.html#cfg_enabled_sections)在创建文档时通过配置选项选择实际包含的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T13:30:21.977

如果您使用的是`javadoc`命令行工具，则可以通过将公共方法标记为`Deprecated`并使用该`-nodeprecated`选项来排除它们。但是如果你想要更复杂的东西，你必须自己实现它。

关于如何做到这一点的粗略想法：

1.  创建自定义注解@API1、@API2 等。
2.  使用这些注释对您的方法进行分类（即标记它们）
3.  编写一个自定义 Ant 任务，该任务读取配置参数（例如，从文件中），该参数告诉您要为哪个 API 生成 Javadoc。
4.  仍然在 Ant 任务中，循环通过注解的方法，并将所有不是所选 API 的 API 注解替换为 Deprecated 注解。这会将它们从 Javadoc 中排除。

恕我直言，这很麻烦。就像他们在评论中所说的那样，如果您有一个具有多个接口的类（我猜是针对不同的用户配置文件？），请考虑编写单独的接口。

# ios - CALayer 动画还原

> ID：15812350
> 
> 赞同：1
> 
> 时间：2013-04-04T13:16:11.543
> 
> 标签：ios, calayer, caanimation

我一直在尝试做`CALayer`动画。但是在动画之后它又恢复了。我找到了一些解决方案`removedOnCompleteion = YES`，`fill mode = kCAFillModesForwards`但没有一个对我有帮助。这是代码。需要一点帮助，谢谢。

```
 void(^ myblock)(NSDictionary *) = ^(NSDictionary *dict){

        NSMutableArray *arrOfPt=       [dict objectForKey:@"Path"];

        CGPoint p1 = [[arrOfPt objectAtIndex:0] CGPointValue];

        CGPoint cp1 = [[arrOfPt objectAtIndex:1] CGPointValue];

//        CGPoint cp1 = [[arrOfPt objectAtIndex:1] CGPointValue];
        CGPoint cp2 = [[arrOfPt objectAtIndex:2] CGPointValue];
        CGPoint p2 = [[arrOfPt objectAtIndex:3] CGPointValue];

        NSMutableArray *arrayTime =  [dict objectForKey:@"Time"];
        CGFloat time = [[arrayTime objectAtIndex:0] floatValue];

        pointerLayer.opacity = 1;
//        NSArray *oneObjPt = [NSArray arrayWithObjects:[arrOfPt objectAtIndex:0],[arrOfPt lastObject],nil];
        //         NSArray *oneObjTime = [NSArray arrayWithObjects:[arrayTime objectAtIndex:0],[arrayTime lastObject],nil];
//        NSArray *oneObjTime = [NSArray arrayWithObjects:[NSNumber numberWithFloat:0.0],[NSNumber numberWithFloat:1.0],nil];
        CAKeyframeAnimation *keyFrameAnimation = [CAKeyframeAnimation animationWithKeyPath:@"position"];

//        [keyFrameAnimation setCalculationMode:kCAAnimationPaced];
        keyFrameAnimation.duration = 1;
        keyFrameAnimation.removedOnCompletion = NO;
        [keyFrameAnimation setFillMode:kCAFillModeForwards];

        CGMutablePathRef fpath = CGPathCreateMutable();

        CGPathMoveToPoint(fpath, NULL, p1.x, p1.y);
        CGPathAddCurveToPoint(fpath, NULL, cp1.x, cp1.y, cp2.x, cp2.y, p2.x, p2.y);
        keyFrameAnimation.path = fpath;

        [pointerLayer addAnimation:keyFrameAnimation forKey:@"pos"];
        CGPoint newLoc = pointerLayer.position;// this is just to verify the layer's location 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:34:24.167

> 我找到了一些解决方案，例如 removedOnCompleteion = YES 和填充模式 = kCAFillModesForwards

这些不是解决方案。

> CGPoint newLoc = pointerLayer.position;

那不会有任何好处；添加动画实际上并不会改变位置。动画*稍后*发生。

我不完全确定你在追求什么，但它可能会帮助你阅读我对 Core Animation 的解释。动画只是一种幻觉；这是一个使用“表示层”玩的游戏。您*可以*将*实际*图层移动到动画之后的位置*，并*添加看起来会使其移动的动画。

我提供了一种公式化的方法来确保您的核心动画能够将您带到您想去的地方：

[http://www.aeth.com/iOSBook/ch17.html#_using_a_cabasicanimation](http://www.apeth.com/iOSBook/ch17.html#_using_a_cabasicanimation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:26:37.637

我似乎无法重新创建这个 - 我使用了一些测试数据：

```
CGPoint cp1 = CGPointMake(0, 0);
CGPoint cp2 = CGPointMake(100, 100);
CGPoint cp3 = CGPointMake(85, 150);
CGPoint cp4 = CGPointMake(50, 50);
CGFloat time = 2.0f;
CAKeyframeAnimation *keyFrameAnimation = [CAKeyframeAnimation animationWithKeyPath:@"position"];
keyFrameAnimation.duration = time;
keyFrameAnimation.removedOnCompletion = NO;
[keyFrameAnimation setFillMode:kCAFillModeForwards];

CGMutablePathRef fpath = CGPathCreateMutable();

CGPathMoveToPoint(fpath, NULL, cp1.x, cp1.y);
CGPathAddCurveToPoint(fpath, NULL, cp2.x, cp2.y, cp3.x, cp3.y, cp4.x, cp4.y);
keyFrameAnimation.path = fpath;
[testView.layer addAnimation:keyFrameAnimation forKey:@"pos"];
CFRelease(fpath); 
```

输出：

[http://glassofcocoa.com/code/AnimationTest.mp4](http://glassofcocoa.com/code/AnimationTest.mp4)

可能您在数组中的一个点可能是起始位置？

# java - 处理空值

> ID：15812351
> 
> 赞同：0
> 
> 时间：2013-04-04T13:16:11.573
> 
> 标签：java, jquery, ajax, jsp

我通过ajax调用从jsp向控制器发送数据，虽然它是对象数据（不是简单的字符串），所以有时它可能在发送之前没有初始化，所以我可能会得到**null 或 "null" 或 undefined**。

所以在控制器中我需要通过以下方式进行比较

```
if(request.getParameter("variableName")!=null && !request.getParameter("variableName").equals("null") && !request.getParameter("variableName").equals("undefined")) 
```

它看起来太脏了，处理这种情况最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:19:03.710

在您的 AJAX 调用中，在提交请求之前，请确保您发送非空值或空字符串（如果为空或未定义）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:24:37.293

您可以简化代码如下。

```
Object obj = request.getParameter("variableName");
if(obj != null && !obj.equals("null") && !obj.equals("undefined")) 
```

但更好的选择是在通过 ajax 将数据发送到控制器之前处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:25:21.807

第一步是避免重复操作，你应该将结果分配给一个变量。

`String result = request.getParameter("variableName");`

然后，您可以检查应用程序是否应该继续，而不是将逻辑锁定在某些 if 中。

```
if(result == null || "null".equals(result) || "undefined".equals(result)) {

   return; //or throw if required

} 
```

正如您可能经常验证的那样，您可以将代码提取到 RequestUtils 类中，该类可能具有静态方法 validateRequestParameter(request, "variableName")，如果有效则返回 true，否则返回 false。

# box-api - 如何使用 Box API 在 Windows 服务中获取 oAuth 的响应

> ID：15812355
> 
> 赞同：1
> 
> 时间：2013-04-04T13:16:24.317
> 
> 标签：box-api

我正在开发 Windows 服务，我需要在其中获取 box.com 的访问令牌。我正在传递重定向 URL 和其他参数。但响应正在重定向到重定向 URL。请帮我在 Windows 应用程序中处理这个问题。

问候， Pradeep

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:46:52.470

我认为问题在于您使用该`https`方案重定向到一个 URI，并且注册了 IE（或 Chrome 等）以处理对该方案的请求。您可以尝试为您的应用程序[注册一个自定义方案](http://msdn.microsoft.com/en-us/library/aa767914%28v=vs.85%29.aspx)（例如`pradeep`）。然后使用该方案创建重定向 URI，例如`pradeep:authorize`. 当浏览器重定向到 时`pradeep:authorize`，将使用该 URI 作为参数调用您的应用程序，以及查询字符串中的参数。

# javascript - JavaScript：通过字符串内容调用函数，不区分大小写？

> ID：15812356
> 
> 赞同：0
> 
> 时间：2013-04-04T13:16:29.120
> 
> 标签：javascript, function-calls

我正在调用这样的 JavaScript 函数：

```
window[className + 'Click'](); 
```

className var 包含一些其他字符串，最后，它调用 myClick() 或 whatEverClick() 之类的函数。没关系，但是有没有办法让第一部分不区分大小写？

示例：
classname = 不管 --> 调用 whatEverClick()
classname = whatEver --> 调用 whatEverClick()

那可能吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T13:18:46.693

你可能不应该，但你可以（不包括某些语言的特殊性）：

第 1 步：构建所有窗口属性的小写映射：

```
var map = {};
for (var key in window) map[key.toLowerCase()] = window[key]; 
```

第 2 步：调用您的函数：

```
map[className.toLowerCase()+'click'](); 
```

如果您想以 window 作为上下文 ( `this`) 调用它，请使用

```
map[className.toLowerCase()+'click'].call(window); 
```

[示范](http://jsbin.com/egevob/1/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T13:23:41.153

如果您绝对有必要在全局对象的上下文中执行，请使用此解决方案，否则我更喜欢解决方案 2（受**dystroy 的**回答启发）

**解决方案 1**

```
if(window[className+"Click"]){
    window[className+'Click']();
}else{
    for(var f in window){
        if(window.hasOwnProperty(f) && typeof window[f]=='function'){
            if(f.toLowerCase() === className.toLowerCase()+'click'){
                window[f]();
            }
        }
    }
} 
```

**解决方案 2**

```
//Create an Object and store all the references
var functions_hash = {}

for(var f in window){
    if(window.hasOwnProperty(f) && typeof window[f]=='function'){
        functions_hash[f.toLowerCase] = window[f]
    }
}

//execute using the hash later on
functions_hash[className.toLowerCase()+'click'] 
```

# ruby-on-rails - ruby on rails 的测试工具[测试每种方法的单元测试]

> ID：15812359
> 
> 赞同：0
> 
> 时间：2013-04-04T13:16:32.193
> 
> 标签：ruby-on-rails, unit-testing

我有一个实时数据，我必须在 ruby​​ on rails 中测试实时数据。请建议我最好的测试工具来测试实时数据。我正在使用 sunspot solr 搜索数据以及如何测试结果数据。请帮助我获得好的测试工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:24:01.213

所谓的**单元测试**不是实时使用的功能。它基于开发环境，其目的是检查一小段代码的行为。

如果这是您的意思，那么可以使用以下工具：

*   Test::Unit，来自 Ruby on Rails
*   Rspec - [http://rspec.info/](http://rspec.info/)

如果这不是您的意思，那么您需要更好地指定“测试实时数据”的含义。

# java - 循环中的 Java 音频文件。不像小程序。

> ID：15812366
> 
> 赞同：2
> 
> 时间：2013-04-04T13:16:54.483
> 
> 标签：java, loops

我对 Java 完全陌生。但我想给我的女朋友一个用 Java 写的小礼物。我拥有的程序本身并且它可以工作......但我想添加的是一个音频文件，只要程序正在运行，它就会自行循环。我浏览了很多东西，尝试了很多东西，但不知何故，我似乎犯了一个错误。是的，我知道有很多代码示例。它不是小程序。

那是下面的代码......它不应该是干净的代码，我只是希望我能以某种方式让它工作。如果有人可以提供帮助，我将不胜感激。

```
import java.io.BufferedInputStream;
import java.io.File;
import java.io.IOException;
import javax.sound.sampled.AudioFormat;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.Clip;
import javax.sound.sampled.DataLine;
import javax.sound.sampled.LineUnavailableException;
import javax.sound.sampled.UnsupportedAudioFileException;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author Shore
 */
public class audio {

            public static void main(String[] args) throws UnsupportedAudioFileException, IOException, LineUnavailableException  {
            File f = new File("C:\\Users\\Shore\\Documents\\NetBeansProjects\\Meli13\\src\\WW.wav");

            AudioInputStream audioInputStream = AudioSystem.getAudioInputStream(f);
            BufferedInputStream bufferedInputStream = new BufferedInputStream(audioInputStream);
            AudioFormat af = audioInputStream.getFormat();
            int size = (int) (af.getFrameSize() * audioInputStream.getFrameLength());
            byte[] audio = new byte[size];
            DataLine.Info info = new DataLine.Info(Clip.class, af, size);
            bufferedInputStream.read(audio, 0, size);
            Clip clip = (Clip) AudioSystem.getLine(info);
            clip.open(af, audio, 0, size);
            clip.start();

            }
} 
```

非常感谢。WW.wav 在同一个文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:48:33.180

真可爱！这像 cupid.stackoverflow.com 吗？;)

由于您完全是 Java 新手，请记住 API 文档对于理解特定类的作用非常有用。在这种情况下，您对 Clip 类感兴趣，可以在[此处](http://docs.oracle.com/javase/1.5.0/docs/api/javax/sound/sampled/Clip.html)访问其文档。

正如文档所述，您可以设置类，使其自动循环播放。你会这样做：

```
 ...
        Clip clip = (Clip) AudioSystem.getLine(info);
        clip.open(af, audio, 0, size);
        clip.loop(3); //Added this line
        clip.setLoopPoints(0, -1); //Added this line
        clip.start();
        ... 
```

`clip.loop(3)`告诉 Java 重复剪辑 3 次。如果要永远重复，请`Clip.LOOP_CONTINUOUSLY`用作参数。`clip.setLoopPoints(0,-1)`告诉java从它的最开始（0）到最后（由-1指定）重复它。这些是帧数，而不是绝对时间。因此，如果您想遍历文件的特定部分，则必须为此计算数学。但这是一个话题。

最后（也是最重要的），`Clip`开始一个新线程。这意味着如果您的应用程序在调用 后立即终止`clip.start()`，则`Clip`线程将被终止并且您不会真正听到任何声音，因为它会终止得太快。

我不确定您的应用程序是如何设置的，但在您提供的代码片段中，实际听到某些内容的唯一方法是在`Clip`线程运行时暂停主线程。你可以这样做：

```
while (clip.isRunning()) {
    Thread.sleep(1000);
} 
```

我希望这会有所帮助，并且您可以与这位女士得分。干杯。

# java - 需要看门狗类型的程序

> ID：15812367
> 
> 赞同：0
> 
> 时间：2013-04-04T13:16:58.500
> 
> 标签：java

我需要制作一个看门狗类型的程序，例如在执行过程中我的控制以任何方法进行 -

```
------some line--------
boolean b = goInThisBlock();
--------Some line--------- 
```

在极少数情况下，控件进入其中并需要很长时间才能出来。所以我想通过看门狗类型检查来避免这些情况。当控制进入方法时，开始计数，如果等待时间超过 2 分钟，则退出，意味着跳转到下一行。

那么我怎么能在java中实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:52:39.903

您需要分析您的应用程序。在整个程序上运行一个分析器，然后你可以看到你关心的函数占用的“运行时间”量（`goInThisBlock`需要是一个函数）。大多数情况下，您必须放大并查看`goInThisBlock`.

而不是使用计时器来查看函数是否花费超过 2 分钟，您将有机会知道函数花费超过 2 分钟的***原因和时间。***然后，您需要找到合适的解决方案。

您可以使用[此列表中的任何分析器](https://stackoverflow.com/a/14808/1122645)来实现此目的。

# android - 安卓拆分标签

> ID：15812373
> 
> 赞同：1
> 
> 时间：2013-04-04T13:17:07.780
> 
> 标签：android, regex, jsoup

在我的 jsoup 类中，我检索每个标签的文本，如下所示

```
 doc = Jsoup.parse(getxml,"", Parser.xmlParser());
    libelle = doc.select("belle"); 
```

导致 pin pin pin apple apple apple 34233 4433 314434

然后我把它分成

```
 libel = libelleCompte.text().toString().split(" "); 
```

原标签如下

```
<pretty>
<belle> pin pin pin</belle>
<belle>apple apple apple</belle>
<belle>34233</belle>
<belle>4433</belle>
<belle>314434</belle>
</pretty> 
```

结果应该是

针 针 针 苹果 苹果 苹果 34233 4433 314434

知道如何在每个标签之后拆分它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:21:12.500

***编辑：***

你不能用简单的正则表达式来做到这一点，尽管下面的代码可以帮助你：

```
 String testStr = "pin pin pin apple apple apple 34233 4433 314434";
    String[] splitedText = testStr.split("\\s+");
    ArrayList<String> tmpArray = new ArrayList<String>();
    int strCounter = 2;
    String tmpStr = "";

    for (int i = 0; i < splitedText.length; i++)
    {
        tmpStr += splitedText[i] + " ";
        if (strCounter == i)
        {
            tmpArray.add(tmpStr);
            tmpStr = "";
            strCounter += 3;
        }
    }

    // Test for result
    for (int i = 0; i < tmpArray.size(); i++)
        Log.w("Counter", i + " => " + tmpArray.get(i)); 
```

**结果：**

> 0 => pin pin pin
> 
> 1 => 苹果 苹果 苹果
> 
> 2 => 34233 4433 314434

**注意**：`\\s`相当于`[\\t\\n\\x0B\\f\\r]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:26:38.237

```
String str = "Hello How are you";
String arrayString[] = str.split("\\s+") 
```

请参阅以下链接：-

[如何在空格上拆分Java中的字符串？](https://stackoverflow.com/questions/13496437/how-to-split-string-in-java-on-whitespace)

# ruby-on-rails - 一次将多条记录插入模型

> ID：15812377
> 
> 赞同：1
> 
> 时间：2013-04-04T13:17:18.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, model, transactions

在将数据插入模型时，我正在寻找一些最佳实践，尤其是在要创建大量记录时，到目前为止，我正在检索一些 XML 并将其保存到模型中

```
doc = Nokogiri::XML.parse(open(url))
doc.xpath('//xmlns:feed/xmlns:entry[xmlns:title[node()]]').each do |s|

  cid = s.xpath("xmlns:id").text
  email = s.xpath("gd:email/@address").text
  name = s.xpath("xmlns:title").text

  data = Contact.new(
    :cid => cid,
    :email => email,
    :name => name)
  data.save
end 
```

现在这是一一插入记录，我认为这花费了太长时间。

我已经读过一种解决方案是使用事务或者我可以进行一次批量插入？我的问题是我将从哪一个中受益最多，我将如何重新格式化我已经拥有的每一个？在新设置中看到我当前设置的示例将使我受益，因为我将能够更多地理解它并实际从中学习

任何帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:49:55.590

其他人已经解决了这个问题，解决方案是使用 activerecord-import。请参阅[原始问题](https://stackoverflow.com/questions/8505263/how-to-implement-bulk-insert-in-rails-3l)...

使用[activerecord-import](https://github.com/zdennis/activerecord-import)的详细信息在它的[wiki上](https://github.com/zdennis/activerecord-import/wiki)

编辑：如果您不突出显示文本，显然链接按钮不会将链接复制为标题。

```
doc = Nokogiri::XML.parse(open(url))
data = []
doc.xpath('//xmlns:feed/xmlns:entry[xmlns:title[node()]]').each do |s|

  cid = s.xpath("xmlns:id").text
  email = s.xpath("gd:email/@address").text
  name = s.xpath("xmlns:title").text

  data << Contact.new(
    :cid => cid,
    :email => email,
    :name => name)
end
Contact.import data 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:18:22.247

您也可以尝试[`upsert`](https://github.com/seamusabshere/upsert)，这将允许您快速插入记录（在某些测试中，比 更快`activerecord-import`），而无需先将它们累积到内存中：

```
require 'upsert'
# [...]
doc = Nokogiri::XML.parse(open(url))
Upsert.batch(Contact.connection, Contact.table_name) do |upsert|
  doc.xpath('//xmlns:feed/xmlns:entry[xmlns:title[node()]]').each do |s|
    cid = s.xpath("xmlns:id").text
    email = s.xpath("gd:email/@address").text
    name = s.xpath("xmlns:title").text
    upsert.row(
      :cid => cid,
      :email => email,
      :name => name
    )
  end
end 
```

这适用于 MySQL、Postgres 和 SQLite3。

# r - 在R编程中计算数据框中列中的值

> ID：15812380
> 
> 赞同：2
> 
> 时间：2013-04-04T13:17:24.547
> 
> 标签：r

您好，我的数据如下所示：

```
Product Price Quantity Returns 
Fridge  $260  20       3 
Oven    $150  12       #N/A 
Iron    $100  #N/A     5 
Stove   $150  20       #N/A 
```

我希望 R 返回“#N/A”出现在“返回”列中的次数。

谢谢您的帮助。我是 R 新手，正在尝试自学。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T13:18:49.070

```
df$Returns[df$Returns == "#N/A"] <- NA
sum(is.na(df$Returns)) 
```

应该做的伎俩。`df$Returns`它首先检查是的哪些值`NA`。`sum` `TRUE`接下来我们使用 in被解释为`1`和`FALSE`as的事实`0`来获得 NA 的总数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:20:25.483

您可以申请`table`您的`Returns`专栏：

```
table(df$Returns) 
```

然后，您可以通过这种方式显示特定值：

```
tab <- table(df$Returns)
tab["#N/A"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T15:04:23.440

```
Returns<- subset(df, df$Returns=="#N/A")
nrow(Returns) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-13T12:21:14.463

将您的数据框存储在变量 `x`中，其第 4 列是`Returns`并且您想要计算`#NA`.

在 R 控制台上运行命令为：

```
table(is.na(x[,4])) 
```

并取值`TRUE`

# xslt - 在 XSLT 中使用 format-date() 方法时出现编译错误

> ID：15812382
> 
> 赞同：2
> 
> 时间：2013-04-04T13:17:26.417
> 
> 标签：xslt, compiler-errors, formatdatetime

我正在尝试使用 2.0 版的 XSLT 将 XML 转换为 CSV。但是在 XSLT 中使用 format-date 方法时出现编译错误。以下是错误：

> 检查表达式 'funcall(format-date, [variable-ref(dt/string), literal-expr([D01]/[M01]/[Y0001])])' 的类型时出错。
> 致命错误：“无法编译样式表”。

XSLT 代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"       xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:func="http://exslt.org/functions" xmlns:date="http://exslt.org/dates-and-times"
            extension-element-prefixes="date" date:doc="http://www.exslt.org/date">

<xsl:output method="text"/>

<xsl:template match="/">    
<xsl:variable name="dt" select="'2013-04-04'"/>
<xsl:value-of select="format-date($dt, '[D01]/[M01]/[Y0001]')" />  
<xsl:value-of select="format-date(current-date(), '[D01]/[M01]/[Y0001]')" />               

</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:13:07.093

您的变量 $dt 是一个字符串，而不是日期。您需要先使用 xs:date('2013-04-04') 将其转换为日期，然后才能对其进行格式化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:51:34.490

这对我有用（使用撒克逊）：

```
<xsl:variable name="dt">2013-04-04</xsl:variable> 
```

# html - html属性“opts”是什么意思？

> ID：15812387
> 
> 赞同：0
> 
> 时间：2013-04-04T13:17:32.117
> 
> 标签：html

我在 ajax 网站上找到了以下代码片段：

```
<a href="#" class="nav" opts="page:about;fadein:0;fadeout:0"> About </a> 
```

我以前从未见过这个属性`opts`。在谷歌上很难找到东西。
这是为了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:26:43.940

这不代表任何意思。它是非标准和无效的。大概它正在被页面中的 JavaScript 使用。

为 JavaScript 存储数据的标准方法是使用[`data-`属性](http://www.w3.org/TR/html5/dom.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T13:24:07.797

我对 Google 做了一些研究，似乎他们正在使用自定义文档类型声明或自定义 DTD。

[http://www.htmlhelp.com/tools/validator/customdtd.html](http://www.htmlhelp.com/tools/validator/customdtd.html)

# spring - Spring MVC：迁移到 JavaConfig 后的模糊 RequestMappings

> ID：15812391
> 
> 赞同：2
> 
> 时间：2013-04-04T13:17:40.143
> 
> 标签：spring, spring-mvc, annotations, ambiguous

从 XML 设置转移到 JavaConfig 设置后，我们的许多 RequestMappings 已经损坏，现在返回模棱两可的方法错误。我们的方法依赖于带有正则表达式的@PathVariable 来确定调用哪个。例如：

```
@RequestMapping(value={"/{id:\\d+}/boats"})
public String getBoatsById(@PathVariable("id") Long id, Model model,
HttpServletRequest request) throws Exception {...}

@RequestMapping(value={"/{id}/boats"})
public String getBoatsByName(@PathVariable("id") String id, Model model,
HttpServletRequest request) throws Exception {...} 
```

这可以正常工作，但使用新的 JavaConfig 设置与 XML 设置相比，它会因映射而出现模棱两可的错误。

JavaConfig 类开始如下：

```
@Configuration
@EnableWebMvc
@ComponentScan(basePackages = "com.example", excludeFilters = { @ComponentScan.Filter( Configuration.class ) })
public class WebConfig extends WebMvcConfigurationSupport 
```

它与使用 AnnotationMethodHandlerAdapter 的 XML 设置与现在使用推荐的 RequestMappingHandlerAdapter 的 JavaConfig 类有什么关系吗？有没有我缺少的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:00:02.163

刚刚浏览了源代码，`AnnotationMethodHandlerAdapter`使用了`RequestMappingInfo`不同于`RequestMappingHandlerAdapter`. 前者在检查相等性时忽略您指定的模式/路径，而后者尊重它。这就是为什么你有模棱两可的映射错误。不确定这是否是一个错误，可能最好问问 spring-contrib 邮件列表中的人。

**编辑**

更改映射可能是个好主意。`{name:reg_exp}`引入语法不是为了解决歧义。摘自官方文档：

> 有时您需要更精确地定义 URI 模板变量。考虑 URL“/spring-web/spring-web-3.0.5.jar”。您如何将其分解为多个部分？
> 
> @RequestMapping 注解支持在 URI 模板变量中使用正则表达式。语法是 {varName:regex} 其中第一部分定义变量名，第二部分定义正则表达式。例如：
> 
> ```
> @RequestMapping("/spring-web/{symbolicName:[az-]+}-{版本:\d\.\d\.\d}{extension:\.[az]+}")
> 公共无效句柄（@PathVariable 字符串版本，@PathVariable 字符串扩展）{
>     // ...
> 
>    }
> }
> 
> ```

您的处理程序方法从一开始就模棱两可，您只提供了一种解决歧义的黑客方法。

# jquery - 简单的 jquery 脚本单独工作但不能在我的 vbulletin 页面中工作

> ID：15812395
> 
> 赞同：0
> 
> 时间：2013-04-04T13:17:46.643
> 
> 标签：jquery, html, vbulletin

如果您能够帮助我，请提前感谢您，因为我真的无法找出问题所在。

我试图在鼠标悬停链接时显示图像。做了很多研究，找到了一个非常简单的 jquery 脚本来做到这一点。我在我的测试页面上实现了它，它运行良好： [http](http://hearthstonehelp.com/test.html) ://hearthstonehelp.com/test.html （请注意我在下面的示例中使用直接链接来简化测试）

```
<html>
<head>
  <script type="text/javascript" src="http://www.hearthstone.com/images/styles/gamingo/js/jquery.min.js"></script>
  <script type="text/javascript" src="http://www.hearthstone.com/images/styles/gamingo/js/tooltip_card.js"></script>
</head>

<body>
  <a href="http://eu.battle.net/hearthstone/static/images/cards/03.png" class="hearthstonecardimage" rel="http://eu.battle.net/hearthstone/static/images/cards/03.png">Fireball</a>
</body>

</html> 
```

现在，在我的 vbulletin 实例中实现完全相同的东西时：http: [//hearthstonehelp.com](http://hearthstonehelp.com)（尽管具有完全相同的代码，但它不显示图像）。

我的问题：可能是什么？我可以做什么样的测试来发现问题？我认为这可能与使用类似脚本的其他内容发生冲突，并且过度编写了我正在尝试实现的内容？

任何想法都会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:34:32.940

我去过[http://www.hearthstonehelp.com/showthread.php?463-Card-popup-previews](http://www.hearthstonehelp.com/showthread.php?463-Card-popup-previews)您尝试使用该脚本的地方。过了一会儿，我注意到图像实际上显示在你身体的右下角。（缩小最大然后悬停火球，如果你向下滚动你会看到它）。问题出在元素上`p`，它是css

如果我发现要更改的内容，我稍后会进行编辑。但至少现在你知道真正的问题是什么了。

编辑：这应该工作

在您的 tooltip_card.js 中将代码更改为

```
$("#hearthstonecardimage")
        .css("top",(e.pageY + 10) + "px")
        .css("left",(e.pageX + 10) + "px")
        .css("position", "absolute")
        .fadeIn("fast"); 
```

# ruby-on-rails - 使用 Rails 配置属性

> ID：15812397
> 
> 赞同：-1
> 
> 时间：2013-04-04T13:17:49.957
> 
> 标签：ruby-on-rails, layout, view, tags

通常，Rails 主应用程序视图/布局会省略`<html>`标签，重点是定义其中应该包含的内容，例如`<head>`and`<body>`标签。

我实际上想要做的是在`<html>`顶级标签内定义一个简单的属性，但我不知道在哪里写它。

*有小费吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:41:22.233

它`application.html.erb`在`views/layout`文件夹中可用

该文件默认包含在您的所有视图中。

# r - 从数据框中删除其列条目与另一个数据框的列条目重叠的行

> ID：15812398
> 
> 赞同：0
> 
> 时间：2013-04-04T13:17:50.830
> 
> 标签：r, dataframe, duplicate-removal

我有两个包含基因组数据的数据框，我需要删除数据框 1 中“特征”列中的条目等于数据框 2 行中“特征”列中的条目的所有行。

```
df1 <- data.frame(feature=c("ENSG419","ENSG1617","ENSG1629","ENSG16230"),distance=c(9833,2460,50538,51162),origin=c("e2","e2","e2","e2"))
df2 <- data.frame(feature=c("ENSG4939","ENSG1617","ENSG5844","ENSG10292"),distance=c(8441,8970,10320,139),origin=c("etoh","etoh","etoh","etoh"))

> df1
    feature distance origin
1   ENSG419     9833     e2
2  ENSG1617     2460     e2
3  ENSG1629    50538     e2
4 ENSG16230    51162     e2
> df2
    feature distance origin
1  ENSG4939     8441   etoh
2  ENSG1617     8970   etoh
3  ENSG5844    10320   etoh
4 ENSG10292      139   etoh 
```

我想得到这个：

```
 feature distance origin
1   ENSG419     9833     e2
2  ENSG1629    50538     e2
3 ENSG16230    51162     e2 
```

我试图通过将两个数据框绑定到一个新数据框并随后提取具有新数据框相同特征的行来删除重复的条目。现在我想从原始数据框 1 中删除所述行。

```
df_new <- rbind(df1,df2)
df_new[duplicated(df_new[,1]),] 
```

它不太奏效，无论如何，我相信有更好的解决方案。我会非常感谢任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:19:09.977

试试这个：

```
df1[!df1$feature %in% df2$feature, ] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T13:19:07.900

我将从两者中提取特征，对集合进行差异化，然后根据结果对第一个数据帧进行子集化。

```
only1 <- setdiff(df1$feature, df2$feature)
df_sel <- df1[df1$feature %in% only1] 
```

但我同意 Arun 的解决方案是 oneliner :)

# android - PowerManager.WakeLock 在手机进入待机 2 秒以上后不工作

> ID：15812403
> 
> 赞同：2
> 
> 时间：2013-04-04T13:18:04.160
> 
> 标签：android

我有一个服务（SkService）用于通过监控加速度计将我的 Nexus4（运行 Android 4.2.2）从待机状态唤醒，但是当手机进入待机状态 2 秒以上时它不起作用。它对我来说很好用以下2种情况： 1.按电源键后手机很快抖动。2.手机连接到我的笔记本电脑

我不知道为什么。如果有人可以帮助我，我将不胜感激！这里的关键代码是：

```
 public class SkService extends Service {
private ShakeDetector mShakeDetector;

@Override
public void onCreate() {
    mShakeDetector = new ShakeDetector(SkService.this);
    mShakeDetector.setOnShakeListener(new onShakeListener() {
        @Override
        public void onShake(String value) {
            Log.d(TAG, "Get onShake event with value:" + value);
            Locker.acquireCpuWakeLock(SkService.this);
            Locker.releaseWakeLock();
        }
    });
    mShakeDetector.registerListener();
}

@Override
public void onDestroy() {
    Log.d(TAG, "SkService on Destroy");
    mShakeDetector.unRegisterListener();
    super.onDestroy();
}

@Override
public IBinder onBind(Intent intent) {
    return null;
}
    } 
```

储物柜：

```
 public class Locker {

private static PowerManager.WakeLock sCpuWakeLock;

public static void acquireCpuWakeLock(Context context) {
    Log.d(TAG, "Acquiring cpu wake lock");
    if (sCpuWakeLock != null) {
        return;
    }
    PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
    KeyguardManager km = (KeyguardManager) context.getSystemService(Context.KEYGUARD_SERVICE);

    KeyguardManager.KeyguardLock kl = km.newKeyguardLock("SKUnlock KeyGuard");
    Log.d(TAG, "Disable keyguard...");
    kl.disableKeyguard();
    Log.d(TAG, "Keyguard disabled and unlock the screen...");

    sCpuWakeLock = pm.newWakeLock(PowerManager.SCREEN_BRIGHT_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP
            | PowerManager.ON_AFTER_RELEASE, "SKUnlock");

    sCpuWakeLock.acquire();
    Log.d(TAG, "WakeLock acqiured done");
}

public static void releaseWakeLock() {
    if (sCpuWakeLock == null)
        return;
    sCpuWakeLock.release();
    sCpuWakeLock = null;
    Log.d(TAG, "WakeLock released");
}
    } 
```

当它工作时，我得到了以下日志：

```
 04-04 20:23:34.013 D/com.skunlock(31730): Get onShake event with value:Shook 0 times:
    04-04 20:23:34.013 D/com.skunlock(31730): diffTime=64,speed=1588.15\. x=2.79, y=-3.25,z=15.27,dX=4.52,dY=4.21,Dirc=Left to Right,accuracy2
    04-04 20:23:34.013 D/com.skunlock(31730): Acquiring cpu wake lock
    04-04 20:23:34.013 D/com.skunlock(31730): Disable keyguard...
    04-04 20:23:34.013 D/com.skunlock(31730): Keyguard disabled and unlock the screen...
    04-04 20:23:34.013 I/PowerManagerService(  525): Waking up from sleep...
    04-04 20:23:34.023 D/com.skunlock(31730): WakeLock acqiured done
    04-04 20:23:34.023 D/com.skunlock(31730): WakeLock released
    04-04 20:23:34.023 I/WindowManager(  525): No lock screen!
    04-04 20:23:34.043 D/SurfaceFlinger(  158): Screen acquired, type=0 flinger=0x41634318
    04-04 20:23:34.043 D/hwcomposer(  158): hwc_blank: Doing Dpy=0, blank=0
    04-04 20:23:34.123 D/hwcomposer(  158): hwc_blank: Done Dpy=0, blank=0
    04-04 20:23:34.143 D/overlay (  158): Set pipe=RGB0 dpy=0; Set pipe=RGB1 dpy=0; Set pipe=VG0 dpy=0; Set pipe=VG1 dpy=0; 
```

但是当我的应用程序不起作用时，我只得到了我的应用程序打印的日志，没有任何系统日志（比如，没有锁屏）：

```
 04-04 20:23:34.333 D/com.skunlock(31730): Get onShake event with value:Shook 0 times:
    04-04 20:23:34.333 D/com.skunlock(31730): diffTime=64,speed=2482.65\. x=-1.73, y=-0.91,z=2.05,dX=2.22,dY=7.01,Dirc=Up to Down,accuracy2
    04-04 20:23:34.333 D/com.skunlock(31730): Acquiring cpu wake lock
    04-04 20:23:34.333 D/com.skunlock(31730): Disable keyguard...
    04-04 20:23:34.333 D/com.skunlock(31730): Keyguard disabled and unlock the screen...
    04-04 20:23:34.333 D/com.skunlock(31730): WakeLock acqiured done
    04-04 20:23:34.333 D/com.skunlock(31730): WakeLock released
    04-04 20:23:34.524 D/com.skunlock(31730): Get onShake event with value:Shook 0 times: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-19T18:37:37.693

考虑使用[WakefulBroadcastReceiver](https://developer.android.com/reference/android/support/v4/content/WakefulBroadcastReceiver.html)，它会为您创建和管理部分唤醒锁。

您仍然需要使用 Manifest 上的权限：

```
 <uses-permission android:name="android.permission.WAKE_LOCK" /> 
```

# c++ - gsoap，从旧版本迁移 - xml 响应名称和结构已更改

> ID：15812409
> 
> 赞同：1
> 
> 时间：2013-04-04T13:18:12.597
> 
> 标签：c++, web-services, soap, response, gsoap

我们有一个 cgi，我必须从旧的 gsoap 版本迁移到 gsoap 2.8.14。不幸的是，反应不一样。我在标题中添加了 //gsoap ns schema form: unqualified ，但这还不足以摆脱所有 ns 前缀。第二个可能也是主要问题是响应命名。进一步的 LoginResult 现在称为 loginResponse 中的结果和数据包。

来自旧 cgi 的回复：

```
<LoginResult>
    <successful>true</successful>
    <token>example</token>
</LoginResult> 
```

来自新 cgi 的回应

```
<ns:loginResponse>
    <result>
        <successful>true</successful>
        <token>example</token>
    </result>
</ns:loginResponse> 
```

我用 soapcpp2 -e -S auth.h 构建存根

auth.h 看起来像这样：

```
//gsoap ns service name: auth
//gsoap ns service style: rpc
//gsoap ns service encoding: encoded
//gsoap ns service port: http://domain.xy/cgi-bin/auth.cgi
//gsoap ns service namespace: urn:auth
//gsoap ns schema form: unqualified

typedef std::string xsd__string;

// array of strings containing all tags allowed for a specific user
class TagsArray
{
public:
    xsd__string *__ptr;
    int __size;
    TagsArray();
};

// getTags.... result struct
class TagsResult
{
public:
    bool successful;
    xsd__string errorMessage;
    TagsArray tags;
    TagsResult();
};

// login result struct
class LoginResult
{
public:
    bool successful;
    xsd__string token;  // also used as error message if successful == false
    LoginResult();
};

// verify result struct
class VerifyResult
{
public:
    bool successful;
    xsd__string newToken;   // also used as error message if successful == false
    VerifyResult();
};

// contains a valid auth method for a specific realm
class ns__AuthMethod
{
public:
    int id;
    xsd__string description;
};

// array of all allowed authmethods for a specific realm
class AuthMethodArray
{
public:
    ns__AuthMethod *__ptr;
    int __size;
};

// a login parameter, usually username, pin, token
class ns__LoginParameter
{
    xsd__string param;
    xsd__string value;
};

// array of all submitted login parameters, depending on the authmethod that is used
class LoginParameterArray
{
public:        
    ns__LoginParameter *__ptr;
    int __size;
};

// retrieve all possible authmethods for a specific realm
int ns__getAuthMethods(xsd__string realm, xsd__string user, AuthMethodArray &result);
// login and retrieve a valid token if succeeded
int ns__login(xsd__string realm, int authmethod, LoginParameterArray params, LoginResult &result);
// verify a existing token
int ns__verifyToken(xsd__string realm, xsd__string token, VerifyResult &result); 
```

任何的想法？谢谢。

----------------- 05.04.2013 --------------- 谢谢戴夫！

所做的更改：

*   Dave 建议的 ns__ 前缀
*   删除了构造函数
*   将布尔默认值设置为 false

    // 登录结果 struct class ns_ *LoginResult { public: bool success = false; xsd* _string 令牌；// 如果成功 == false 也用作错误消息

    };

结果现在看起来像这样：

```
 <ns:LoginResult>
     <successful>true</successful>
     <token>example</token>
  </ns:LoginResult>

int ns__login(xsd__string realm, int authmethod, LoginParameterArray params, ns__LoginResult &result); 
```

ns: 前缀由所有客户端（php、.net、c++(qt)）处理，没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:58:27.987

您需要更改 auth.h 中的 LoginResult 如下：

```
// login result struct
class ns__LoginResult
{
public:
    bool successful;
    xsd__string token;  // also used as error message if successful == false
    LoginResult();
}; 
```

也改变 ns_login( ) 方法如下：

```
int ns__login(xsd__string realm, int authmethod, LoginParameterArray params, ns__LoginResult &result); 
```

生成的响应将如下所示：

```
 <ns:LoginResult>
   <successful>false</successful>
   <token></token>
  </ns:LoginResult> 
```

希望将 LoginResult 移入“ns”命名空间不会对您造成太大问题。

# c# - WPF：文本框绑定到“。” 和 setter 调用

> ID：15812418
> 
> 赞同：1
> 
> 时间：2013-04-04T13:18:30.257
> 
> 标签：c#, wpf, data-binding, textbox, setter

我有一个简单的 WPF 应用程序。在后面的代码中，我有一个这样的 InputFile 属性。

```
 public string InputFile
    {
        get
        {
            return _inputFile;
        }
        set
        {
            _inputFile = value;
            OnPropertyChanged("InputFile");
        }
    } 
```

在 XAML 中，我有一个这样的 StackPanel：

```
 <StackPanel Orientation="Horizontal" DataContext="{Binding Path=InputFile}">
        <StackPanel.CommandBindings>
            <CommandBinding Command="Open" 
                CanExecute="OpenCanExecute"
                Executed="OpenExecuted" />
            <CommandBinding Command="Select" 
                CanExecute="SelectCanExecute"
                Executed="SelectExecuted" />
        </StackPanel.CommandBindings>
        <TextBox Text="{Binding Path=.}"></TextBox>
        <Button Command="Select">...</Button>
        <Button Command="Open">-></Button>
    </StackPanel> 
```

我需要将 stackpanel 数据上下文链接到 InputFile 以允许命令函数访问它。

问题：当 InputFile 更改时，TextBox 会更新，但如果我在 Textbox 中键入新值，则属性 InputFile 不会更新（不调用 setter 方法）。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:22:07.983

您可以尝试以下方法：

```
<TextBox Text="{Binding Path=., UpdateSourceTrigger=PropertyChanged}"></TextBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:32:12.803

您可以直接绑定到 TextBox。如果 InputFile 是字符串，那么绑定到 StackPanel 有什么意义？

```
<StackPanel Orientation="Horizontal">
    <TextBox Text="{Binding InputFile}"></TextBox>
</StackPanel> 
```

**编辑：**

您可以使用[FindAncestor](https://stackoverflow.com/a/1127964/667792 "查找祖先")绑定命令：

```
Command="{Binding RelativeSource={RelativeSource FindAncestor, 
AncestorType={x:Type Window}}, Path=DataContext.Select}" 
```

或者，您可以创建类似于此的自定义类型：

```
public class InputFileViewModel
{
  string File {get; set;}
  ICommant Select {get; set;}
} 
```

然后在 TextBox 中绑定到 File 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:43:19.860

如果您的命令是拥有这样的集合的主要原因`DataContext`，那么这个解决方案呢？

```
<StackPanel Orientation="Horizontal">
    <StackPanel.CommandBindings>
        <CommandBinding Command="Open" 
            CanExecute="OpenCanExecute"
            Executed="OpenExecuted" />
        <CommandBinding Command="Select" 
            CanExecute="SelectCanExecute"
            Executed="SelectExecuted" />
    </StackPanel.CommandBindings>
    <TextBox Text="{Binding InputFile}"></TextBox>
    <Button Command="Select" CommandParameter="{Binding InputFile}">...</Button>
    <Button Command="Open" CommandParameter="{Binding InputFile}">-></Button>
</StackPanel> 
```

如果一切都失败了，这应该总是有效的。这是一个令人讨厌的解决方法，但它应该可以完成工作：

```
<Grid x:Name="myGrid">
    StackPanel Orientation="Horizontal" DataContext="{Binding Path=InputFile}">
        <StackPanel.CommandBindings>
            <CommandBinding Command="Open" 
                CanExecute="OpenCanExecute"
                Executed="OpenExecuted" />
            <CommandBinding Command="Select" 
                CanExecute="SelectCanExecute"
                Executed="SelectExecuted" />
        </StackPanel.CommandBindings>
        <TextBox Text="{Binding ElementName=myGrid, Path=DataContext.InputFile}"></TextBox>
        <Button Command="Select">...</Button>
        <Button Command="Open">-></Button>
    </StackPanel>
</Grid> 
```

就像 Tomtom 已经写的那样，您可能需要`UpdateSourceTrigger`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T15:01:40.417

在您的绑定中，您可以将模式指定为两种方式。当文本框值从 UI 更改时，这将调用您的 setter。

```
<TextBox Text="{Binding Path=., Mode=TwoWay}"/> 
```

# datagrid - 如何加倍编辑 DataGridCell（或如何在编辑后编辑 DataGridCell）

> ID：15812420
> 
> 赞同：0
> 
> 时间：2013-04-04T13:18:32.333
> 
> 标签：datagrid, edit, datagridcell

实际情况我有`Datagrid`一些情况，`TemplateColumns`如果有人要编辑一个`DataGridCell`窗口，用户可以在其中进行更改，按下保存按钮后，我的窗口被释放，只有`DataGridCell`被选中，但如果他现在想要重新编辑，`DataGridCell`他必须先改变选择到另一个 DataGridCell

这是我的`DataGrid.BeginningEdit`

```
 private void _BeginningEdit(object sender, DataGridBeginningEditEventArgs e)
    {
        DataGrid dg = sender as DataGrid;
        var list = dg.CurrentCell.Item as IList;
        new DetailV() { Content = list[dg.CurrentCell.Column.DisplayIndex] }.ShowDialog();

        dg.CancelEdit();
    } 
```

我想也许我`DataGridCell`已经处于编辑模式但是因为我已经使用`CancelEdit()`结束所有编辑操作我错过了什么？

# excel - 在一个单元格的excel中结合两个IF条件

> ID：15812422
> 
> 赞同：0
> 
> 时间：2013-04-04T13:18:37.113
> 
> 标签：excel, excel-formula

我需要帮助在 Excel 中组合两个 IF 条件语句。两者都工作正常，只是当我尝试将它们结合起来时，我得到了错误。以下是条件：

=IF(AND(F19="否", NOT(OR(ISBLANK(B36),ISBLANK(B37),ISBLANK(D36),ISBLANK(D37),ISBLANK(B40),ISBLANK(D39),ISBLANK(F39), ISBLANK(D40),ISBLANK(F40),ISBLANK(B43),ISBLANK(B44),ISBLANK(B48),ISBLANK(B49),ISBLANK(B50),ISBLANK(B51),ISBLANK(B52)))),”节完成","部分不完整")

=IF(AND(F19="是", NOT(OR(ISBLANK(B36),ISBLANK(B37),ISBLANK(D36),ISBLANK(D37),ISBLANK(B40),ISBLANK(D39),ISBLANK(F39), ISBLANK(D40),ISBLANK(F40),ISBLANK(B43),ISBLANK(B44),ISBLANK(B48),ISBLANK(B49),ISBLANK(B50),ISBLANK(B51),ISBLANK(B52),ISBLANK(D43), ISBLANK(D44),ISBLANK(D45),ISBLANK(D46),ISBLANK(D47),ISBLANK(D48),))),"部分完成","部分不完整")

请帮我把它们结合起来。

在此先感谢，克里希纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:32:33.087

...我没有尝试使它更漂亮/更高效-我只是使用了您的原始公式，但这应该可以满足您的要求：

```
=IF(OR(AND(F19="No", NOT(OR(ISBLANK(B36),ISBLANK(B37),ISBLANK(D36),ISBLANK(D37),ISBLANK(B40),ISBLANK(D39),ISBLANK(F39),ISBLANK(D40),ISBLANK(F40),ISBLANK(B43),ISBLANK(B44),ISBLANK(B48),ISBLANK(B49),ISBLANK(B50),ISBLANK(B51),ISBLANK(B52)))),AND(F19="Yes", NOT(OR(ISBLANK(B36),ISBLANK(B37),ISBLANK(D36),ISBLANK(D37),ISBLANK(B40),ISBLANK(D39),ISBLANK(F39),ISBLANK(D40),ISBLANK(F40),ISBLANK(B43),ISBLANK(B44),ISBLANK(B48),ISBLANK(B49),ISBLANK(B50),ISBLANK(B51),ISBLANK(B52),ISBLANK(D43),ISBLANK(D44),ISBLANK(D45),ISBLANK(D46),ISBLANK(D47),ISBLANK(D48))))),"Section Complete","Section Incomplete") 
```

希望这能解决问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:38:04.653

您可以简单地替换第一个 No-IF 中的“部分不完整”，方法是将其替换为 Yes-IF。

```
=IF(AND(F19="No";NOT(OR(ISBLANK(B36);ISBLANK(B37);ISBLANK(D36);ISBLANK(D37);ISBLANK(B40);ISBLANK(D39);ISBLANK(F39);ISBLANK(D40);ISBLANK(F40);ISBLANK(B43);ISBLANK(B44);ISBLANK(B48);ISBLANK(B49);ISBLANK(B50);ISBLANK(B51);ISBLANK(B52))));"Section Complete";IF(AND(F19="Yes";NOT(OR(ISBLANK(B36);ISBLANK(B37);ISBLANK(D36);ISBLANK(D37);ISBLANK(B40);ISBLANK(D39);ISBLANK(F39);ISBLANK(D40);ISBLANK(F40);ISBLANK(B43);ISBLANK(B44);ISBLANK(B48);ISBLANK(B49);ISBLANK(B50);ISBLANK(B51);ISBLANK(B52);ISBLANK(D43);ISBLANK(D44);ISBLANK(D45);ISBLANK(D46);ISBLANK(D47);ISBLANK(D48);)));"Section Complete";"Section Incomplete")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:40:31.557

尝试使用一些 COUNTA 函数进行简化，如下所示：

`=IF(AND(COUNTA(B36,B37,D36,D37,B40,D39,F39,D40,F40,B43,B44,B48:B52)=16,OR(F19="No",AND(F19="Yes",COUNTA(D43:D48)=6))),"Section Complete","Section Incomplete")`

那应该结合两个公式而不重复

# php - PHP 文件生成的 Zip 文件

> ID：15812423
> 
> 赞同：1
> 
> 时间：2013-04-04T13:18:37.200
> 
> 标签：php, zip, ziparchive

在使用 zipArchive 压缩它们之前，我需要解析一系列 php 文件以输出 .PDF 和 .PNG 文件。我想做的是

```
$zip = new ZipArchive();
$zip->open($file, ZipArchive::OVERWRITE);

//If you access qr_gen.php on a browser it creates a QR PNG file.
$zip->addFile('qr_gen.php?criteria=1', 'alpha.png');
$zip->addFile('qr_gen.php?criteria=2', 'beta.png');
//If you access pdf_gen.php on a browser it creates a PDF file.
$zip->addFile('pdf_gen.php?criteria=A', 'instructions.pdf');

$zip->close();
header('Content-Type: application/zip');
header('Content-Length: ' . filesize($file));
header('Content-Disposition: attachment; filename="file.zip"');
readfile($file);
unlink($file); 
```

这显然是行不通的。我怎样才能实现我的目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T13:24:20.373

当您提供和 url 作为文件名时，以下行将不起作用：

```
$zip->addFile('qr_gen.php?criteria=1', 'alpha.png'); 
```

相反，您必须先下载 png 并将它们存储在本地。然后将它们添加到 zip 存档中。像这样：

```
file_put_contents('alpha.png', 
    file_get_contents('http://yourserver.com/qr_gen.php?criteria=1');

$zip->addFile('alpha.png'); 
```

您可以在文档页面找到更多信息[`ZipArchive::addFile()`](http://www.php.net/manual/en/ziparchive.addfile.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:28:58.307

您需要做的是首先在本地获取文件。如果您设置了 URL fopen 映射器，则可以（很容易地）使用 file_get_contents 来实现这一点，或者如果失败，则使用 cURL 调用。

这是一个示例方法：

```
$zip = new ZipArchive();
$zip->open("zipfile.zip",ZipArchive::OVERWRITE);
$URLs = array(
   "alpha.png" => "http://my.url/qr_gen.php?criteria=1",
   "beta.png" => "http://my.url/qr_gen.php?criteria=2",
   "instructions.pdf" => "http://my.url/pdf_gen.php?criteria=A");
foreach ($URLs as $file => $URL) {
  $f = @file_get_contents($URL);
  if (empty($f)) throw new Exception("File not found: ".$URL);
  $zip->addFromString($file, $f);
} 
```

然后，您的 zip 将以 $zip 的形式提供，以供进一步处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:27:33.227

首先，在浏览器中执行所有文件并将该内容（png.pdf）放入一个文件夹中，然后通过一个一个获取来创建它的 zip。

希望能帮助到你

# sql-server-2008 - 如何检查存储过程中的空值？

> ID：15812424
> 
> 赞同：0
> 
> 时间：2013-04-04T13:18:38.257
> 
> 标签：sql-server-2008, tsql, stored-procedures

如何检查存储过程中的值是否为空？如果它为空，则存储过程将返回“NULL”

```
CREATE PROCEDURE SP1
AS
Select
  MyTable.Col1,
  HisTable.Col2
From
  MyTable Left Join
  HisTable
GO 
```

在上面的例子中，我需要检查 Col2 是否为空，如果是，那么这个存储过程应该返回 NULL。截至目前我得到空值目前这是我返回的表的样子

```
Col1  Col2
Red    1
Blue
Green  0
Yello  0 
```

我希望 Col2 的值为 Blue 的 NULL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:20:08.930

`ON`你必须在子句上定义表之间的关系，

```
Select  MyTable.Col1,
        HisTable.Col2
From    MyTable 
        Left Join HisTable
            ON MyTable.LinkColumn = HisTable.LinkColumn 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:21:12.763

我找到了一个解决方案.... :) 关键是 NULLIF

```
Select  MyTable.Col1,
    NULLIF(HisTable.Col2, '')
From    MyTable 
    Left Join HisTable
        ON MyTable.LinkColumn = HisTable.LinkColumn 
```

# html - IE9 问题 - 使用 JQuery Mobile 更改输入标记的占位符属性

> ID：15812426
> 
> 赞同：1
> 
> 时间：2013-04-04T13:18:43.883
> 
> 标签：html, jquery-mobile, internet-explorer-9, placeholder, html-input

在输入标签中使用 HTML5 占位符属性时，它在 IE9 中显示良好，尽管有很多注释表明并非如此。

例如：

```
<input id="email_input" placeholder="E-mail address" type="text" /> 
```

这确实呈现占位符文本，即使在 IE9 中也是如此。

但是，我现在正在处理一个使用 JQuery Mobile 来应用客户端语言资源的项目。这发生在**pagebeforecreate**事件中。对于占位符文本，代码可能如下所示：

```
$(inputelem).attr("placeholder", resourceText); 
```

替换部分在 IE9 中有效。如果您使用开发工具检查输入标签，则该属性确实已更新。但浏览器中显示的文本保持不变。就好像浏览器渲染不“知道”它应该在修改占位符属性后刷新元素（相同的代码适用于 div:s、p:s 等）。

有没有一个技巧可以让它在 IE9 中工作，而不必诉诸占位符黑客（跨度覆盖等）？

# vba - 删除特定页面的所有制表位

> ID：15812428
> 
> 赞同：2
> 
> 时间：2013-04-04T13:18:44.787
> 
> 标签：vba, ms-word

我正在尝试在 VBA 的帮助下格式化 Word 文档。

如果我提供页码，它应该只清除该特定页面的所有制表位。

我有清除所有制表位的代码，但无法针对特定页面修改它。

```
ActiveDocument.Paragraphs.TabStops.ClearAll 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:59:14.780

试试这个：

```
Dim pnum As Integer
pnum = InputBox("Enter page number")
ActiveDocument.ActiveWindow.Panes(1).Pages(pnum).Rectangles(1).Range.Paragraphs.TabStops.ClearAll 
```

请记住，页面在文档中是一个相当随意的概念，因此通过页码识别您想要的内容可能并不容易。跨越多个页面的元素（如表格）也可能导致混淆。

# css - 尝试使用图像而不是文本创建下拉导航菜单，需要帮助链接

> ID：15812435
> 
> 赞同：0
> 
> 时间：2013-04-04T13:18:59.400
> 
> 标签：css, image, drop-down-menu, radio-button

我一直在尝试找到一种方法来为我的导航提供带有图像（不是文本）的下拉菜单，我似乎找到了解决方案，但现在我的问题是添加图像链接。我通过这篇文章用 CSS 完成了这一切：

[带图像的下拉选择](https://stackoverflow.com/questions/9508029/dropdown-select-with-images#)

我对 JavaScript 不是很熟悉，也许这样做会更容易，但我终于让它与上面的编码一起工作，我只是不知道如何添加链接。

这是我的CSS：

```
/* Drop-down styling */   

image-dropdown {
/*style the "box" in its minimzed state*/
border:0px solid black; 
width:192px; 
height:80px; 
overflow:hidden;
/*animate the dropdown collapsing*/
transition: height 0.1s;
}

#image-dropdown:hover {
/*when expanded, the dropdown will get native means of scrolling*/
height:350px; 
overflow-y:visible;
/*animate the dropdown expanding*/
transition: height 0.5s;
z-index: 100;
display: block;
position: relative;
}

#image-dropdown input {
/*hide the nasty default radio buttons!*/
position:absolute;
top:0;
left:0;
opacity:0;
}

#image-dropdown label[for=line1] {
/*style the labels to look like dropdown options*/
display:none; 
margin:2px; 
height:80px; 
opacity:0.2; 
background:url(nav_02.jpg);
z-index: 100;
}

label[for=line2]  {
display:none; 
margin:2px; 
height:50px; 
opacity:0.2;
background-image:url(subnav_02.jpg); 
z-index: 100;
} 

label[for=line3]   {
display:none; 
margin:2px; 
height:50px; 
opacity:0.2;
background-image:url(subnav_03.jpg);
z-index: 100;
}

label[for=line4]   {
display:none; 
margin:2px; 
height:50px; 
opacity:0.2;
background-image:url(subnav_06.jpg);  
}

label[for=line5]   {
display:none; 
margin:2px; 
height:50px; 
opacity:0.2;
background-image:url(subnav_08.jpg);
}

label[for=line6]   {
display:none; 
margin:2px; 
height:50px; 
opacity:0.2;
background-image:url(subnav_10.jpg);
}

#image-dropdown:hover label{
/*this is how labels render in the "expanded" state.
 we want to see only the selected radio button in the collapsed menu,
 and all of them when expanded*/
display:block;
opacity: 1; 
}

#image-dropdown input:checked + label {
/*tricky! labels immediately following a checked radio button
  (with our markup they are semantically related) should be fully opaque
  and visible even in the collapsed menu*/
opacity:1 !important; display:block;
} 
```

这是我的html：

```
<div id="image-dropdown"><input checked="checked"
id="line1" name="line-style" value="1"
type="radio" /><label for="line1"></label>
<input id="line2" name="line-style" value="2"
type="radio" /><label for="line2"></label><input
id="line3" name="line-style" value="3"
type="radio" /><label for="line3"></label><input
id="line4" name="line-style" value="4"
type="radio" /><label for="line4"></label><input
id="line5" name="line-style" value="5"
type="radio" /><label for="line5"></label><input
id="line6" name="line-style" value="6"
type="radio" /><label for="line6"></label><input
id="line7" name="line-style" value="7"
type="radio" /><label for="line7"></label></div> 
```

任何帮助将不胜感激，这几天我一直在搞砸......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:46:09.300

# ember.js - 将路由映射到显式路径不起作用

> ID：15812438
> 
> 赞同：0
> 
> 时间：2013-04-04T13:19:07.720
> 
> 标签：ember.js, ember-data

我正在定义一个资源，如此[处](http://emberjs.com/guides/routing/defining-your-routes/#toc_resources)所述：

```
App.Router.map(function () {
    this.resource('phones', { path: '/nodes/extensions/phones' }, function () {
        this.route('new');
    }); 
```

但这不起作用。查找`phones`执行请求`/phones`而不是使用配置的值`/nodes/extensions/phones`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:34:39.067

我不确定，但是通过您提供的链接下的第一个示例，路径似乎只决定了您在地址栏中键入的内容，而“电话”决定了寻址的路线。因此将“电话”更改为“nodes.extensions.phones”可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:40:48.710

这里`path`是浏览器地址栏中使用的路径，例如，用户将访问“ [http://yoursite.com/#/nodes/extensions/phones](http://yoursite.com/#/nodes/extensions/phones) ”以在您的站点上查看此页面。

相反，如果您想配置 Ember 应用程序访问以检索 json 的端点，例如“ [http://yoursite.com/api/nodes/extensions/phones](http://yoursite.com/api/nodes/extensions/phones) ”，则需要在您的 ember-data 适配器或模型的数据检索功能。

# python - 使用非英语语言对关键字和变量进行 Python 编程

> ID：15812446
> 
> 赞同：4
> 
> 时间：2013-04-04T13:19:27.433
> 
> 标签：python, programming-languages

我的最终目标是让懂乌尔都语而非英语的人能够在 Python 环境中编程。

乌尔都语从左到右书写。我想拥有所有 python 关键字的乌尔都语版本并使用乌尔都语字符来定义变量/函数/类名。

这个目标可能吗？如果是，那么需要做什么？

我已经看到标准库函数仍然是英文的一个问题。

**更新：** 是否*应该这样做*当然是一个非常有趣的辩论话题，我很想谈一谈。*然而，这真的可能吗？怎么做？*

我喜欢 Python，而且我认识很多聪明的人，他们可能永远学不会正确的英语，只有乌尔都语，因此有了这个想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:59:16.790

[中文 Python](http://www.chinesepython.org/)曾经允许程序员完全用中文编写源代码，包括翻译后的模块名、函数名和所有关键字。这是他们网站上的代码示例：

```
載入 系統               # import sys
文件名 = 系統.參數[1:]   # filenames = sys.argv[1:]

定義 修正行尾(文件):     # def fixline(file):
    內文 = 打開(文件).讀入()  # text = open(file).read()
    內文 = 內文.替換('\n\r','\n') # text = text.replace('\n\r', '\n')
    傳回 內文          # return text

取 文件 自 文件名:     # for file in filenames:
    寫 修正行尾(文件)  # print fixline(file) 
```

可悲的是，它不再是一个活跃的项目，但您可以获取源代码并找出它们更改的内容，以便为您自己的实现找到一个想法。（了解它们失败的原因也可以帮助您了解在使这样的系统成功时将面临哪些挑战）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:42:17.657

是的，有可能。但它需要你从源代码下载 Python，并更改源代码并编译它。如果我从关于同一主题的另一次讨论中没记错的话，只需更改语法并重新生成一些文件，除非您在执行元编程之类的高级工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-18T05:39:45.650

您可以使用[想法](https://aroberge.github.io/ideas/docs/html)项目来转换关键字，它有一个用于制作一种法语 Python的[示例。](https://aroberge.github.io/ideas/docs/html/_modules/ideas/examples/french.html)

它基于[python import-hook](https://docs.python.org/3/reference/import.html#import-hooks)，所以它在普通的 python3 中运行。

我使用这个项目用[希伯来语构建了一个 python](https://github.com/matan-h/hebrew-python)（它也使用了 python 内置函数，而不仅仅是关键字），它看起来更像一个普通的 python

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T14:56:46.607

你试过什么？Python 3 允许您对所有函数、类和变量名称使用 Unicode。检查一下，你只需要确保你的脚本使用 utf-8 ——这主要是你的编辑器的事。优雅地处理混合的 RTL/LTR 问题也是您编辑的问题。（该功能在[PEP 3131](http://www.python.org/dev/peps/pep-3131/)中讨论）

python 语言没有“方言”，即关键字的替代集。如果您对乌尔都语标识符不满意并且您决心拥有完全的乌尔都语体验，您可以编写一个预处理器，将乌尔都语“关键字”映射到相应的（英语）python 关键字。

将这种预处理器包装在交互式控制台周围并导入模块应该不会太难，以便它对用户透明地工作（并且无需从源代码重新编译 python）。如果您可以编程并想尝试这个大小，请查看 python 的[`code`](http://docs.python.org/2/library/code.html)模块。它旨在读取 python 源代码并将其发送到编译和执行。您只需介入并添加一个预处理步骤。

我会为关键字和内置插件使用预处理器。但实际上，为您选择的通用模块提供本地化包装器更加容易。让我们用一个包装器模块`RE.py`来演示，它包含所有*导出*的正则标识符`re`，但重命名为大写：

```
import re as _re
for name in _re.__all__:
    locals()[name.upper()] = _re.__dict__[name] 
```

就是这样！您现在可以导入此模块并使用它：

```
import RE
docs = RE.SUB(r"\bEnglish\b", r"Urdu", docs) 
```

使用乌尔都语单词而不是大写字母（当然您需要单独指定每个单词），然后您就可以使用了。正如你所说，这一切是否是一个好主意是一个不同的问题。

# sharepoint-2010 - 无法显示不同的数据库

> ID：15812447
> 
> 赞同：1
> 
> 时间：2013-04-04T13:19:32.603
> 
> 标签：sharepoint-2010, sql-server-2008-r2, business-intelligence, performancepoint

目标：
根据性能点仪表板应用程序中不同数据库的列表，选择一个名为 contoseRetailDW 的特定数据库。

问题：
服务器名称是正确的，但不幸的是没有显示不同数据库的列表。为了显示不同的数据库，我缺少什么

背景信息：
我正在使用基于 Windows 身份验证的管理员角色。我正在使用 SharePoint BI 企业版和 Windows Server。

![在此处输入图像描述](https://i.stack.imgur.com/COLYQ.png)

![在此处输入图像描述](https://i.stack.imgur.com/yHd0j.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T18:30:18.017

我看到您正在尝试在 PerformancePoint中[创建一个新的数据源。](http://technet.microsoft.com/en-us/library/ff191198%28v=office.14%29.aspx)

您在屏幕截图中选中的选项是“标准连接”。这样做的目的是使用 SSAS Multidementional 数据源。从您的其他屏幕截图来看，您似乎只是在尝试连接到数据库引擎，即表格数据源。

在 PerformancePoint 表格数据源中仅与过滤器和记分卡兼容。[这在题为“规划 PerformancePoint 数据源](http://technet.microsoft.com/en-us/library/ff928315%28v=office.14%29.aspx)”的 msdn 文章中进行了描述

# asp.net-mvc-3 - 下拉列表未选择预选值-mvc3

> ID：15812448
> 
> 赞同：1
> 
> 时间：2013-04-04T13:19:35.120
> 
> 标签：asp.net-mvc-3

我有一个奇怪的问题，MVC 下拉选择的值未在页面加载上预先选择。

我的模型是：

```
public class DocumentTypesViewModel
    {
        [Required(ErrorMessage = "DocumentType is required")]
        public int OHDocumentTypeId { get; set; }
        public string OHDocumentTypeDescription { get; set; }
    }

public class ClientAdvancedSearchViewModel
    {
        [Display(Name = "Name")]
        public string Name { get; set; }
        [Display(Name = "DocumentType")]
        public string DocumentTypeId { get; set; }
        public IEnumerable<SelectListItem> DocumentTypes { get; set; }
     } 
```

在我的控制器中，我正在像这样填充 ClientAdvancedSearchViewModel

```
[HttpGet]
    public ActionResult ClientAdvancedSearch()
    {

        ClientAdvancedSearchViewModel clientAdvancedSearchViewModel = iClientReferralRecordsRepository.GetDocumentMetadata();
       //DocumentTypes Dropdown
        var ddlDocumentTypes = iDocumentTypeRepository.GetDocumentTypes();
        clientAdvancedSearchViewModel.DocumentTypes = new SelectList(ddlDocumentTypes, "OHDocumentTypeId", "OHDocumentTypeDescription",clientAdvancedSearchViewModel.DocumentTypeId);
        return View(clientAdvancedSearchViewModel);
    } 
```

最后在视图中：

```
<td>
   <div class="editor-label">
      @Html.LabelFor(model => model.DocumentTypes)
    </div>
    <div class="editor-field">
       @Html.DropDownListFor(x => x.DocumentTypeId, Model.DocumentTypes, "Please Select", new { @id = "ddlDocumentType" })
     </div>
  </td> 
```

我相信下拉列表的名称相同是 x => x.DocumentTypeId，因为我认为，我的值没有预先选择。

这是为下拉菜单生成的 HTML 的 ViewSource

```
<select id="ddlDocumentType" name="DocumentTypeId">
<option value="">Please Select</option>
<option value="20">records</option>
<option value="21"> record1</option> 
```

..

如何重命名我的下拉列表名称或如何解决我的问题？

谢谢

更新：添加了错过的线路

```
ClientAdvancedSearchViewModel clientAdvancedSearchViewModel = iClientReferralRecordsRepository.GetDocumentMetadata(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:23:52.927

您视图上的代码是正确的。您忘记设置 的值`DocumentTypeId`。这是您发布的代码：

```
[HttpGet]
public ActionResult ClientAdvancedSearch()
{
   //DocumentTypes Dropdown
    var ddlDocumentTypes = iDocumentTypeRepository.GetDocumentTypes();
    clientAdvancedSearchViewModel.DocumentTypes = new SelectList(ddlDocumentTypes, "OHDocumentTypeId", "OHDocumentTypeDescription",clientAdvancedSearchViewModel.DocumentTypeId);
    return View(clientAdvancedSearchViewModel);
} 
```

你错过了这个：

```
clientAdvancedSearchViewModel.DocumentTypeId = some_value; 
```

另外，您是否打算使用`DocumentTypeId`as`int`而不是 a `string`？

**更新：** 您还可以检查是否设置了这样的 id：

```
@Html.DropDownListFor(x => x.DocumentTypeId, new SelectList(Model.DocumentTypes, "Id", "Value", Model.DocumentTypeId), new { @id = "ddlDocumentType" }) 
```

请注意，我将重载与`new SelectList`. 我不记得所有的重载，我一直都这样做，所以你可以检查我们的其他适合你需要的重载。

# iphone - 如何更改 UITableviewCell 宽度

> ID：15812451
> 
> 赞同：-1
> 
> 时间：2013-04-04T13:19:45.073
> 
> 标签：iphone, ios

我是 Iphone 开发的新手，我想创建一个包含不同宽度的单元格的表格视图，例如 iphone 联系人应用程序，当单击添加按钮时，表格视图出现具有不同的部分，并且单元格与第一部分和第二部分相比宽度不同。这样做的任何示例代码..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:33:08.737

不同的部分是带有 UITableViewStyleGrouped 的 tableview 的功能。不同宽度的单元格不是单独的单元格。每行都是一个表格视图单元。可以自定义每个单元格以查看您想要的任何内容。所以 1 个 tableviewcell 中可以有 3 个字段，例如 City、State 和 Zipcode。

Google 是您的示例代码的朋友。

Ĵ

# ruby-on-rails - Heroku rails 在资产预编译上部署错误

> ID：15812455
> 
> 赞同：-2
> 
> 时间：2013-04-04T13:20:01.117
> 
> 标签：ruby-on-rails, heroku, assets, precompile

尝试在 heroku 上部署 rails 应用程序时出现此错误

```
Running: rake assets:precompile
   rake aborted!
   getaddrinfo: Name or service not known
   /tmp/build_3bx0fu8vccj6s/vendor/bundle/ruby/1.9.1/gems/redis-3.0.2/lib/redis/connection/ruby.rb:112:in `getaddrinfo'
   /tmp/build_3bx0fu8vccj6s/vendor/bundle/ruby/1.9.1/gems/redis-3.0.2/lib/redis/connection/ruby.rb:112:in `connect'
   /tmp/build_3bx0fu8vccj6s/vendor/bundle/ruby/1.9.1/gems/redis-3.0.2/lib/redis/connection/ruby.rb:174:in `connect'
   /tmp/build_3bx0fu8vccj6s/vendor/bundle/ruby/1.9.1/gems/redis-3.0.2/lib/redis/client.rb:263:in `establish_connection'
   /tmp/build_3bx0fu8vccj6s/vendor/bundle/ruby/1.9.1/gems/redis-3.0.2/lib/redis/client.rb:69:in `connect'
   /tmp/build_3bx0fu8vccj6s/vendor/bundle/ruby/1.9.1/gems/redis-3.0.2/lib/redis/client.rb:282:in `ensure_connected'
   /tmp/build_3bx0fu8vccj6s/vendor/bundle/ruby/1.9.1/gems/redis-3.0.2/lib/redis/client.rb:173:in `block in process'
   /tmp/build_3bx0fu8vccj6s/vendor/bundle/ruby/1.9.1/gems/redis-3.0.2/lib/redis/client.rb:248:in `logging'
   /tmp/build_3bx0fu8vccj6s/vendor/bundle/ruby/1.9.1/gems/redis-3.0.2/lib/redis/client.rb:172:in `process' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:07:56.970

在 heroku 实验室中启用 User_env_compile

```
heroku labs:enable user-env-compile 
```

然后重新部署您的应用程序。更多信息请访问[https://devcenter.heroku.com/articles/labs-user-env-compile](https://devcenter.heroku.com/articles/labs-user-env-compile)

# video - 帧提取期间的ffmpeg视频扫描进度

> ID：15812463
> 
> 赞同：5
> 
> 时间：2013-04-04T13:20:13.610
> 
> 标签：video, ffmpeg, progress, ffprobe

`ffmpeg`我使用的[选择](http://ffmpeg.org/ffmpeg-filters.html#aselect_002c-select)过滤器扫描输入视频以提取某些帧。选择基于复杂的标准，无法预测提取帧的数量（我正在做场景检测，但这可能会有所不同——例如选择所有**I**帧等）。

我需要的是显示**扫描（解码）视频的百分比**（例如 10% 或 90%）。

* * *

我尝试了几种方法来解析控制台输出，就像人们在处理编码时通常所做的那样，但它对扫描进度没有帮助（例如[，ffmpeg 可以显示进度条吗？](https://stackoverflow.com/questions/747982/can-ffmpeg-show-a-progress-bar)或[ffmpeg 进度条 - PHP 中的编码百分比](https://stackoverflow.com/questions/11441517/ffmpeg-progress-bar-encoding-percentage-in-php)）

```
ffmpeg -progress sceneProgr.txt -i input.wmv -vsync passthrough -an -vf select='gt(scene\,0.2)',showinfo scene%%05d.png 
```

这产生的输出如下：

```
<..>    
frame=    0 fps=0.0 q=0.0 size=N/A time=00:00:00.00 bitrate=N/A    
n:0 pts:16550 pts_time:16.55 pos:4205325 fmt:rgb24 sar:0/1 s:640x480 i:P iskey:1 type:I checksum:95895BC9 plane_checksum:[95895BC9]
frame=    1 fps=0.7 q=0.0 size=N/A time=00:00:00.00 bitrate=N/A    
n:1 pts:24591 pts_time:24.591 pos:6685325 fmt:rgb24 sar:0/1 s:640x480 i:P iskey:0 type:P checksum:FF4CC015 plane_checksum:[FF4CC015]
'frame=...' and 'n:...' lines are repeated for each of the extracted frames. 
```

`frame=...`和行都`n:...`指**输出中的数字，**因此**不能**像人们通常这样做的那样用于计算进度（因为我无法预测会预先找到多少帧，此外，它们并没有均匀分布在输入视频）。

* * *

如果我指定`-progress progress.txt`参数，**progress.txt**文件如下：

```
frame=5
fps=1.2
stream_0_0_q=0.0
total_size=N/A
out_time_ms=43209833
out_time=00:00:43.209833
dup_frames=0
drop_frames=0
progress=continue

frame=6
fps=1.3
stream_0_0_q=0.0
total_size=N/A
out_time_ms=52252200
out_time=00:00:52.252200
dup_frames=0
drop_frames=0
progress=continue

frame=6
fps=1.2
stream_0_0_q=0.0
total_size=N/A
out_time_ms=52252200
out_time=00:00:52.252200
dup_frames=0
drop_frames=0
progress=continue 
```

新部分大约每秒写入一次，并且指**的是最后提取的帧**。参考输入视频中最后提取的帧的位置，这有点帮助`out_time`，因此我可以从中计算扫描进度

```
progress = out_time_ms/total_input_time 
```

但这**并不理想**，因为只有在提取出符合条件**的新帧时**才会更新它。`select`所以，如果我有很大一部分视频没有匹配的帧，那么在很长一段时间内进度都不会改变。

* * *

**总结**：

我正在寻找一种在使用[选择](http://ffmpeg.org/ffmpeg-filters.html#aselect_002c-select)过滤器时计算视频扫描进度的方法。

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:04:16.250

你在每一帧上得到什么，比如来自 ffprobe 的数据.....

```
[FRAME]
media_type=video
key_frame=1
pkt_pts=0
pkt_pts_time=0.000000
pkt_dts=0
pkt_dts_time=0.000000
pkt_duration=1
pkt_duration_time=0.040000
pkt_pos=44
width=800
height=542
pix_fmt=yuv420p
sample_aspect_ratio=1:1
pict_type=I
coded_picture_number=0
display_picture_number=0
interlaced_frame=0
top_field_first=0
repeat_pict=0
reference=3
[/FRAME] 
```

你在 BEGIN 得到什么

```
I/stderr  ( 7434): Input #0, image2, from '/storage/sdcard0/Pictures/me374658335.jpg':
I/stderr  ( 7434):   Duration: 00:00:00.04, start: 0.000000, bitrate: N/A
I/stderr  ( 7434):     Stream #0:0: Video: mjpeg, yuvj420p, 1296x972 [SAR 1:1 DAR 4:3], 25 fps, 25 tbr, 25 tbn, 25 tbc
I/stderr  ( 7434): Input #1, mov,mp4,m4a,3gp,3g2,mj2, from '/storage/sdcard0/PictureComment/1347139284144.3gp':
I/stderr  ( 7434):   Metadata:
I/stderr  ( 7434):     major_brand     : 3gp4
I/stderr  ( 7434):     minor_version   : 0
I/stderr  ( 7434):     compatible_brands: isom3gp4
I/stderr  ( 7434):     creation_time   : 2012-09-08 21:21:41
I/stderr  ( 7434):   Duration: 00:00:17.22, start: 0.000000, bitrate: 67 kb/s
I/stderr  ( 7434):     Stream #1:0(eng): Audio: aac (mp4a / 0x6134706D), 44100 Hz, mono, s16, 64 kb/s
I/stderr  ( 7434):     Metadata:
I/stderr  ( 7434):       creation_time   : 2012-09-08 21:21:41
I/stderr  ( 7434):       handler_name    : SoundHandle
I/stderr  ( 7434): [libx264 @ 0x5a070910] using SAR=1/1
I/stderr  ( 7434): [libx264 @ 0x5a070910] using cpu capabilities: ARMv6 NEON
I/stderr  ( 7434): [libx264 @ 0x5a070910] profile High, level 3.2 
```

您可以使用帧时间戳和持续时间来计算完成百分比吗？

# c++ - 在重载赋值运算符中调用构造函数？

> ID：15812469
> 
> 赞同：2
> 
> 时间：2013-04-04T13:20:28.233
> 
> 标签：c++, operator-overloading, copy-constructor

基本上，在其重载赋值运算符中调用类的构造函数是否可接受的编程实践/风格？如果不是，为什么不呢？

例子：

所以我有一个有 3 个数据成员的类，一个名为“value”的动态 int 数组，它保存一个大数字的数字，一个`int length`表示数字中的位数，&一个`int maxLength`表示数字的最大长度（大小动态数组）

这是我的带有参数 int 的构造函数：

```
bigInt::bigInt(const int &rhs){
    //turn num_ into a string 'num'
    stringstream ss;
    ss << num_;
    string num = ss.str();
    length = strlen(num.c_str());
    maxLength = (length - (length%16)) + 16;
    value = new int[maxLength];
    for(int i=1; i<=length; i++){
        value[i-1] = num.at(length-i) - '0';
    }
} 
```

这是我的重载赋值运算符，其中右侧是常规 int 此方法调用构造函数：

```
bigInt bigInt::operator=(const int &rhs){
    *this = bigInt(rhs);
    return *this;
} 
```

编辑：我想我应该用不同的措辞。我不是指 COPY 构造函数，而是具有非类实例参数的常规构造函数，以及 rhs 与 lys 类型不同的重载赋值运算符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:30:50.580

This is not an unreasonable way to implement your assignment operator, since it allows you to utilize existing code, and provides the strong guarantee as long as your copy assignment operator does.

Two points of note however: First, make sure that your copy constructor, copy assignment operator, and destructor are all implemented properly or you'll start having memory management problems. Second, the C++ language ALREADY provides a class with elements, a length, and a max length: It's called `std::vector` and if you change your code to use it, you don't need to write the copy constructor, copy assignment operator, and destructor at all, as they'll just behave properly!

Also, your assignment operator should return by reference (or if you really don't want chaining, `void`). Returning by value will someday cause a bug when a chained assignment doesn't work as expected.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:43:29.660

在赋值运算符的实现中调用复制构造函数并没有错（当然，除非复制构造函数本身是根据赋值来实现的）。实际上，这是一个常见的习惯用法：制作本地副本，然后将数据与当前实例交换。（当然，这假设您有一个专门的交换。仅 `std::swap`在赋值运算符中调用对象本身 *并不是*一个好主意。创建一个新实例，然后经常交换对象的各个组件。或者创建一个交换组件并调用它的自定义交换函数。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:24:09.567

反之更好。完全没问题。

但是，不要忘记在复制构造器中你必须重做你在构造器中所做的事情；即，初始化您在类中的任何变量，这在重载的赋值运算符函数中不是必需的。

# java - 搜索 Gray Log 2 API 或查询 ElasticSearch 的方法

> ID：15812470
> 
> 赞同：9
> 
> 时间：2013-04-04T13:20:28.823
> 
> 标签：java, .net, elasticsearch, graylog2

我有关于[Gray Log 2的问题](http://graylog2.org/)

在我为所有系统工作的公司中，向具有预定义流的灰色日志服务器报告异常。

我需要构建一个从不同流中检索数据的外部仪表板。我还没有找到任何用于此的 Gray Log 2 API。我读到有可能直接查询 Elastic Search。你能告诉我该怎么做，或者是否有任何 Gray Log 2 API。

我的仪表板将使用 JSF 或 .NET 编写，但仍不确定哪个最好使用。

对于这个问题的详细回答，我将不胜感激。链接也会有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-20T06:44:13.780

Graylog2 有一个非常清晰和完整的 Restful API，你可以用 Swagger 浏览/测试。

转到系统 -> 节点并从节点操作下拉菜单中选择“API 浏览器”。

默认情况下，您可以通过以下 url 访问它：[http://your.graylog2:12900/api-browser](http://your.graylog2:12900/api-browser)

希望这可以帮助 ！

# php - 在显示网页内容之前检查 Internet 连接

> ID：15812471
> 
> 赞同：0
> 
> 时间：2013-04-04T13:20:29.520
> 
> 标签：php, jquery, browser

在Web开发中，是否可以在客户端设备中进行带宽/互联网连接速度的测试，并在此测试的基础上过滤要显示的项目。

例如，如果用户的连接速度较低，是否可以避免显示社交媒体按钮？

我将 PHP 用于服务器，HTML/jquery 用于客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:29:31.637

您必须使用 javascript 来下载不同大小的文件，并且需要多长时间。然后根据需要多长时间，您可以以不同的方式处理事情。看看这里：[使用 javascript 的带宽实用程序](https://stackoverflow.com/questions/4547166/bandwidth-utility-using-javascript/4547184#4547184)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:29:35.670

没有简单的方法可以做到这一点。没有内置函数或任何东西。使用 PHP 和 JS 的组合有一些解决方法，但老实说，如果您的用户连接速度较慢，那么下载所有额外的 javascript 会更慢。您最好让您的网站尽可能紧凑。使用样式表，避免添加过多的图像等。

# c# - 为什么以下静态功能不起作用？

> ID：15812475
> 
> 赞同：0
> 
> 时间：2013-04-04T13:20:36.860
> 
> 标签：c#, .net, action, func

这是我的代码：

```
public static class s {

    public static int Dx(this int i, Action<int> act, Func<int, bool> con) {
        if (con(i)) act(i);
        return i;
    }
} 
```

稍后在我的代码中，我这样做：

```
int g = 22;
int false_con = g.Dx(j => j = 11, z => z != 22); // This is 22 which is fine.
int true_con = g.Dx(j => j = 11, z => z == 22);  //This is also 22 which should be 11 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-04T14:58:18.753

到目前为止给出的答案都不是实际的解释。

到目前为止给出的许多答案都表明发生这种情况是因为 int 是一种值类型。尝试在此程序中将所有`int`s替换为 s。`object`它是否开始按照原始海报所期望的方式工作？不，那么它与值类型与引用类型无关。

相反，它与*变量*的值有关，无论其类型如何。

Mahdi，您的期望是形式参数`j`成为形式参数的*别名*，而形式参数`i`又是局部变量的别名`g`，因此任何更改`j`都会导致更改，`g`因为它们是相同的变量。事实并非如此。`j`，`i`并且`g`是*相同值的副本，*但具有*不同的存储位置*，因此改变一个不会改变另一个。

您在 C# 中说“此形式参数是此变量的别名”的方式是使用`ref`or`out`关键字。所以这个程序会做你所期望的：

```
delegate void RefAction<T>(ref T t);
...
public static int Dx(ref int i, RefAction<int> act, Func<int, bool> con) 
{
    if (con(i)) 
        act(ref i);
    return i;
}
...
int g = 22;
int false_con = Dx(ref g, (ref int j) => { j = 11; }, z => z != 22); 
int true_con = Dx(ref g, (ref int j) => { j = 11; }, z => z == 22); 
```

“ref”关键字意味着`g`、`i`和`j`都是同一变量的不同名称。

正如 D Stanley 所说，这可能是一种糟糕的风格。与其在方法中更改变量，不如返回您希望将其更改为的值，并让调用者决定要更改的变量（如果有）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T13:24:28.933

您的代码路径不会因调用 而改变`Action`，因此程序*总是*返回`i`.

看起来您希望`g`在第一次调用后更改为 11，这是不正确的，因为g的*值*`j`被复制到然后复制到`i`而不是对 的*引用*，`g`这意味着 at 的值`g`不会因为您的操作而被修改。

一种选择是*返回*值而不是尝试*修改*它：

```
public static int Dx(this int i, Func<int, int> act, Func<int, bool> con) {
    if (con(i)) return act(i);
    return i;
}

int g = 22;
g = g.Dx(j => 11, z => z != 22); /* g is still 22 */ 
g = g.Dx(j => 11, z => z == 22);  /* g is now 11 */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T13:24:15.400

您的代码返回调用它的整数，因此两种情况都返回`g`which is `22`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T13:25:42.453

您正试图通过 更改 的值`g`，`Action<int> act`对吗？

它不起作用，因为整数是作为值传递的原始类型，而不是作为引用传递，所以你实际上并没有为 g 分配任何值。

# javascript - 。裹（）; 打破 prevent.Default();

> ID：15812477
> 
> 赞同：3
> 
> 时间：2013-04-04T13:20:39.000
> 
> 标签：javascript, jquery, preventdefault

我编写了一个自定义表单验证脚本，但由于某种原因，将`input[type=text]`元素包装在`<div class="inputWrapper" />`阻止我阻止`input[type=submit]`默认设置。

以下是相关代码：

`$("input[type=text]").wrap("<div class=\"inputWrapper\" />");`

正在打破：

```
$("input[type=submit]").click(function(event) {
    event.preventDefault();
}); 
```

为什么会这样？如果您需要更完整的脚本，请告诉我，我会发布整个内容。

好吧，所以出于某种原因，禁用那行代码允许`.preventDefault`工作`input[type=submit]`，但如果我只是使用

```
// wrap inputs

    $("input[type=text]").wrap("<div class=\"inputWrapper\" />");
    // validate on form submit
    $("input[type=submit]").click(function(event) {
        event.preventDefault();
    }); 
```

它工作正常。所以这是完整的脚本，是什么导致了这种奇怪？

```
 $(document).ready(function() {
        // wrap inputs
        $("input[type=text]").wrap("<div class=\"inputWrapper\" />");
        $("textarea").wrap("<div class=\"inputWrapper\" />");
        // validate text inputs on un-focus
        $("input[type=text].required").blur(function() {
            if ($(this).hasClass("error")) {
                // do nothing
            } else if ($(this).val() === "") {
                $(this).addClass("error");
                $(this).parent(".inputWrapper").append("<div class=\"errorPopup\">" + $(this).attr("placeholder") + "</div>");
            }
        });
        // validate textareas on un-focus
        $("textarea.required").blur(function() {
            if ($(this).hasClass("error")) {
                // do nothing
            } else if ($(this).val() === "") {
                $(this).addClass("error");
                $(this).parent(".inputWrapper").append("<div class=\"errorPopup\">" + $(this).attr("placeholder") + "</div>");
            }
        });

        // validate on form submit
        $("input[type=submit]").click(function(event) {
            event.preventDefault();
            // check fields

            $(this).parent("form").children("input.required").each(function() {
            // check textboxes

            if ($(this + "[type=text]")) {
                if (!$(this).val()) {
                    $(this).addClass("error");
            };
            };

            // end textboxes
    // check textareas
            $(this).parent("form").children("textarea.required").each(function() {
            if (!$(this).val()) {
                    $(this).addClass("error");
                };
            });

            // end textareas
        // check checkboxes and radio buttons
        if ($(this).is(":checkbox") || $(this).is(":radio")) {
                var inputName = $(this).attr("name");
                if (!$("input[name=" + inputName + "]").is(":checked")) {
                    var inputId = $(this).attr("id");
            $("label[for=" + inputId + "]").addClass("error");
                };
            };

            // end checkboxes and radio buttons
        });

        // end fields
        // submit form
        var errorCheck = $(this).parent("form").children(".error").length > 0;
            if (errorCheck == 0) {
                $(this).parent("form").submit();
            } else {
                alert("You didn't fill out one or more fields. Please review the form.");
                window.location = "#top";
            };
        // end submit form
    });
    // clear errors 
    $("input.required").each(function() {
        // clear textboxes
            if ($(this + "[type=text]")) {
                $(this).keypress(function() {
                    $(this).removeClass("error");
                    $(this).next(".errorPopup").remove();
                });
            };
        // end textboxes
        // clear textareas
            $("textarea.required").each(function() {
                $(this).keypress(function() {
                    $(this).removeClass("error");
                    $(this).next(".errorPopup").remove();
                });
            });
        // end textareas
        // check checkboxes and radio buttons
            if ($(this).is(":checkbox") || $(this).is(":radio")) {
                var inputName = $(this).attr("name");
                var labelFor = $(this).attr("id");
                $(this).click(function() {
                    $("input[name=" + inputName + "]").each(function() {
                        var labelFor = $(this).attr("id");
                        $("label[for=" + labelFor + "]").removeClass("error");
                    });
                });
            };
        // end checkboxes and radio buttons
    });
    // end clear textbox errors
}); 
```

好吧，我错了问题所在。它与我认为的行有关，但实际上`.error`在我包装输入后找到问题。

这就是问题所在：

```
var errorCheck = $(this).parent("form").children(".error").length > 0;`\ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:30:24.273

```
var errorCheck = $(this).parent("form").children(".error").length > 0; 
```

当您`.wrap`输入文本时，它们不再是表单的子项。采用`.find`

顺便说一句，`$(this + "selector")`是无效的。您可能想使用`$(this).is("selector")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:26:39.190

您将需要使用新的 DOM 元素维护某种引用。这将首先将其作为初始化的 DOM 元素放置在变量中（而不是像您所做的那样作为字符串），并且对于原始元素也是如此，原始元素将被放回以维护事件：

```
var $inputWrapper = $("<div class=\"inputWrapper\" />"),
    $inputText = $("input[type=text]");
$inputText.wrap("<div class=\"inputWrapper\" />"); 
```

然后您可以将元素替换回来。

# html - 如何更改在 Facebook 上共享的链接（带哈希）的描述

> ID：15812479
> 
> 赞同：0
> 
> 时间：2013-04-04T13:20:44.020
> 
> 标签：html, facebook, facebook-graph-api, facebook-javascript-sdk

我想分享页面的特定部分，所以我使用哈希链接，例如：`http://en.wikipedia.org/wiki/List_of_GMA_Network_radio_stations#References`

Facebook 使用链接的 id 解析`<p>`最接近元素的标签。

有没有办法告诉 Facebook 它应该使用什么作为描述？理想情况下，我想在个人基础上做到这一点。

**更新：**由于@Sturmeh 建议我可以通过 API 发布链接描述，因此我附上了不起作用的代码：

```
$statusUpdate = array(
  'link'      =>  $share_link,
  'message'   =>  $message,
  'description' => $description
);

//Post to Facebook
$facebook->api("/$user_id/feed", "post", $statusUpdate); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:50:38.097

[https://developers.facebook.com/docs/reference/api/link/](https://developers.facebook.com/docs/reference/api/link/)

```
description: A description of the link (appears beneath the link caption) 
```

REST API 不支持描述字段，您应该发布到用户的提要连接。（使用图形 API）

澄清：

根据[此页面](https://developers.facebook.com/docs/reference/rest/links.post/)，您应该；使用[Graph API](https://developers.facebook.com/docs/api)并将[Post 对象发布](https://developers.facebook.com/docs/reference/api/user)到[User 对象](https://developers.facebook.com/docs/reference/api/user)的 feed 连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:24:15.270

不，它不能通过“共享”功能或默认的“喜欢”按钮来完成，问题是：您从服务器端无法访问哈希链接。如果可以，您可以操纵`description`元标记以反映哈希链接。但是，正如我所说，您无法从 URL 访问哈希。因此，您唯一的选择（如果您想在您的网站上使用“喜欢”按钮）是实现一个`like`将调用 Graph API 的自定义按钮。

但据我了解，当用户在 Facebook 上“分享”该网址时，您需要不同的描述。不幸的是，鉴于当前对访问该哈希链接的服务器端语言的限制，这是不可能的。

# c# - Excel插件。缺少功能区 (XML)

> ID：15812483
> 
> 赞同：1
> 
> 时间：2013-04-04T13:20:57.333
> 
> 标签：c#, excel, vsto, excel-2007, add-in

我为 Visual Studio 2012 开发了 Excel 插件。使用项目 Excel 2010 插件。在项目中创建了一个 Ribbon (XML)：

```
[ComVisible(true)]
public class PricelistRibbon : Office.IRibbonExtensibility
{
    private Office.IRibbonUI _ribbon;

    public PricelistRibbon()
    {
    }

    public event EventHandler ClickButtonRibben;

    protected virtual void OnClickButtonRibben()
    {
        var handler = ClickButtonRibben;
        if (handler != null) handler(this, EventArgs.Empty);
    }

    #region IRibbonExtensibility Members

    public string GetCustomUI(string ribbonID)
    {
        return GetResourceText("ProcessingPricelist.PricelistRibbon.xml");
    }

    #endregion

    #region Ribbon Callbacks
    //Create callback methods here. For more information about adding callback methods, select the Ribbon XML item in Solution Explorer and then press F1

    public void Ribbon_Load(Office.IRibbonUI ribbonUI)
    {
        _ribbon = ribbonUI;
    }

    public void OnAction(Office.IRibbonControl control)
    {
        OnClickButtonRibben();
    }

    #endregion

    #region Helpers

    private static string GetResourceText(string resourceName)
    {
        Assembly asm = Assembly.GetExecutingAssembly();
        string[] resourceNames = asm.GetManifestResourceNames();
        for (int i = 0; i < resourceNames.Length; ++i)
        {
            if (string.Compare(resourceName, resourceNames[i], StringComparison.OrdinalIgnoreCase) == 0)
            {
                using (StreamReader resourceReader = new StreamReader(asm.GetManifestResourceStream(resourceNames[i])))
                {
                    if (resourceReader != null)
                    {
                        return resourceReader.ReadToEnd();
                    }
                }
            }
        }
        return null;
    }

    #endregion
} 
```

在 ThisAddIn 中使用如下功能区：

```
public partial class ThisAddIn
{
    private void ThisAddIn_Startup(object sender, EventArgs e)
    {
    }

    private void ThisAddIn_Shutdown(object sender, EventArgs e)
    {
    }

    protected override Microsoft.Office.Core.IRibbonExtensibility CreateRibbonExtensibilityObject()
    {
        var pricelistRibbon = new PricelistRibbon();
        pricelistRibbon.ClickButtonRibben += PricelistRibbonOnClickButtonRibben;
        return pricelistRibbon;
    }

    private void PricelistRibbonOnClickButtonRibben(object sender, EventArgs eventArgs)
    {
        var control = sender as Office.IRibbonControl;
        if (control == null) return;
        try
        {
            Application.ScreenUpdating = false;

            switch (control.Id)
            {
                case "customButton1":
                    CreateSpecification();
                    break;
                //..............
            }
        }
        catch (Exception throwedException)
        {
            MessageBox.Show(throwedException.Message, @"Ошибка", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
        finally
        {
            Application.ScreenUpdating = true;
        }
    }

    private void CreateSpecification()
    {
    }

    #region VSTO generated code

    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    private void InternalStartup()
    {
        Startup += ThisAddIn_Startup;
        Shutdown += ThisAddIn_Shutdown;
    }

    #endregion
} 
```

接下来我通过 ClickOnce 部署这个插件。已安装 MS Office 2007。已成功部署插件。在设置中，您可以看到 Excel 插件已安装，但在我的 TabControl 的磁带上不可见。如果我在磁带出现 TabControl 时创建了功能区（可视化设计器）而不是功能区（xml）。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T01:15:08.533

这可能是因为ribbon.xml 中使用的命名空间在Office 2010 和2007 功能区中不同。Office 2007 Ribbon.xml 需要命名空间，例如

```
<customUI onLoad="Ribbon_Load" xmlns="http://schemas.microsoft.com/office/2006/01/customui"> 
```

与 2010 年一样，您将不得不使用

```
<customUI onLoad="Ribbon_Load" xmlns="http://schemas.microsoft.com/office/2009/07/customui"> 
```

建议创建两个ribbon.xml 并在下面的代码中执行类似的操作

```
protected override Office.IRibbonExtensibility CreateRibbonExtensibilityObject()
{
       majorVersion = Globals.ThisAddIn.Application.Version.Split(new char[] { '.' })[0];
        if (majorVersion == 12) //office 2007
        {
             return new Ribbon2007();
        }
        else if (majorVersion >= 14) //office 2010
        {
            return new Ribbon2010();
        }

}

[ComVisible(true)]
public class Ribbon2007: Office.IRibbonExtensibility
{
    public string GetCustomUI(string ribbonID)
        {
                    var ribbonXml = GetResourceText("Ribbon2007.xml");                 

    }
}

[ComVisible(true)]
public class Ribbon2007: Office.IRibbonExtensibility
{
    public string GetCustomUI(string ribbonID)
        {
            var ribbonXml = GetResourceText("Ribbon2010.xml");                 

    }
} 
```

# spring - 带有 Spring 的 RestEasy 没有答案

> ID：15812495
> 
> 赞同：0
> 
> 时间：2013-04-04T13:21:20.360
> 
> 标签：spring, resteasy

我可以看到 FilterDispatcher 被调用（由调试器），但它似乎没有找到要调用的服务。我很难理解 RestEasy 是如何在 Spring 和 RestEasy 中定义的资源之间实际映射的。

主要故事：获取[http://my.local.no:8087/rest/typeaheads/h](http://my.local.no:8087/rest/typeaheads/h)仅呈现 404

*网页.xml*：

```
...
<context-param>
    <param-name>resteasy.servlet.mapping.prefix</param-name>
    <param-value>/rest</param-value>
</context-param>
<listener>
    <listener-class>org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<filter>
    <filter-name>restFilterDispatcher</filter-name>
    <filter-class>org.jboss.resteasy.plugins.server.servlet.FilterDispatcher</filter-class>
</filter>
<filter-mapping>
    <filter-name>restFilterDispatcher</filter-name>
    <url-pattern>/rest/*</url-pattern>
</filter-mapping>
... 
```

resteasy资源由bean设置：

```
@Configuration
@ComponentScan(basePackageClasses = TypeaheadsRestService.class)
public class SpringConfig {
} 
```

*TypeaheadsRestService.java*：

```
@Resource
@Path("/typeaheads")
public class TypeaheadsRestService {
    @GET
    @Path("/{search}")
    @Produces(MediaType.APPLICATION_JSON)
    public List<NameUrl> get(@PathParam("search") String search) {
        ...
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:36:39.717

RestEasy *SpringContextLoaderListener*似乎是缺少的部分。我从 RestEasy 示例中创建了一个精简的问题并使用它。但是对于我稍微复杂一些的应用程序，它不起作用。这可能是因为它覆盖了已弃用的*createContextLoader*方法。在 Spring 3中*ContextLoaderListener*是 ContextLoader 的一个*实例*。所以我重新实现它是这样的：

```
public class MyContextLoaderListener extends ContextLoaderListener {
    private SpringContextLoaderSupport springContextLoaderSupport = new SpringContextLoaderSupport();
    @Override
    protected void customizeContext(ServletContext servletContext, ConfigurableWebApplicationContext applicationContext) {
        super.customizeContext(servletContext, applicationContext);
        this.springContextLoaderSupport.customizeContext(servletContext, applicationContext);
    }
} 
```

我最初尝试在 bean 初始化中执行*customizeContext(...) 。*这在 RestEasy 2.2.1.GA 中有效，但在 2.3.4.FINAL 中无效。

# ios - 如何选择 UIImage 的一个区域，然后从中创建一个新区域？

> ID：15812496
> 
> 赞同：0
> 
> 时间：2013-04-04T13:21:21.817
> 
> 标签：ios, cocoa-touch, cocoa, core-graphics

有没有一种简单的方法可以选择 UIImage 实例的一个区域，然后从中创建一个新图像？我尝试使用平移手势识别器来获取用户选择的坐标。但是有了这个选项，现在有可见的反馈，我还必须转换坐标。是否有一个不错的插件或最佳实践来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:27:12.187

尝试这个：

```
 UIGraphicsBeginImageContext(self.view.bounds.size);
// retrieve the current graphics context
   CGContextRef context = UIGraphicsGetCurrentContext();
// render view into context
   [self.view.layer renderInContext:context];
// create image from context
   UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
   image=[self cropImage:image];
   UIGraphicsEndImageContext();

   - (UIImage *)cropImage:(UIImage *)oldImage {
       CGSize imageSize = oldImage.size;
       UIGraphicsBeginImageContextWithOptions(CGSizeMake( imageSize.width,imageSize.height - 150),NO,0.); //set your height and width
          [oldImage drawAtPoint:CGPointMake( 0, -80) blendMode:kCGBlendModeCopy alpha:1.];
          UIImage *croppedImage = UIGraphicsGetImageFromCurrentImageContext();
          UIGraphicsEndImageContext();
          return croppedImage;
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:28:42.307

像这样：

```
CGImageRef imageRef = CGImageCreateWithImageInRect([bigImage CGImage], cropRect);
UIImage *croppedImage = [UIImage imageWithCGImage:imageRef]; 
CGImageRelease(imageRef); 
```

# c# - 使用 Web API 上传和下载文件

> ID：15812501
> 
> 赞同：1
> 
> 时间：2013-04-04T13:21:35.643
> 
> 标签：c#, .net, rest, asp.net-web-api

我需要上传一个 File ，处理它，然后在同一个 POST 请求中下载处理后的文件。

我没有找到很多关于 Web API 的文档来满足我的要求，所以我根据网上找到的不同帖子提出了一个解决方案。

我的最终解决方案如下所示：

```
public HttpResponseMessage PostFile(string fileName)
{
    try
    {
        var task = Request.Content.ReadAsStreamAsync();
        task.Wait();
        var requestStream = task.Result;
        var tempFile = System.Web.HttpContext.Current.Server.MapPath(string.Format("~/App_Data/{0}", fileName));
        var steam = File.Create(tempFile);
        requestStream.CopyTo(steam);
        steam.Close();
        requestStream.Close();
        var modifiedStream = DoStuffToFile(tempFile);
        var response = new HttpResponseMessage();
        response.Content = new StreamContent(modifiedStream);
        response.StatusCode = HttpStatusCode.Created;
        return response;
    }
    catch
    {
        throw new HttpResponseException(HttpStatusCode.InternalServerError);
    }
} 
```

由于我没有Web API的经验，我想知道这段代码是否可以，或者我是否会遇到问题？

**编辑：**

该代码按预期工作。我只是不确定它是否会导致任何问题或副作用，因为我忘了做一些 Web API 可能会考虑的事情。或者我可以发布一个文件并在回复中发送另一个文件吗？

代码也被简化以保持紧凑（不检查重复文件，不清理旧文件等）

# java - 当超类默认构造函数具有“抛出”子句时，为什么我会收到未报告的异常？

> ID：15812503
> 
> 赞同：9
> 
> 时间：2013-04-04T13:21:40.407
> 
> 标签：java, exception

运行以下代码时出现未报告的异常

我的代码如下所示

```
class Super {    
  public Super() throws Exception {    
    System.out.println("Super Class");    
  }    
}

public class Sub extends Super {    
  public static void main(String[] args) throws Exception {    
    Sub s = new Sub();    
  }    
} 
```

得到以下错误： Sub.java:6: unreported exception java.lang.Exception in default constructor
public class Sub extends Super {
1 error

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T13:25:01.560

您尚未为 Sub 定义默认构造函数，并且 Super 正在报告已检查的异常。要修复它，请将此构造函数添加到 Sub：

```
public Sub() throws Exception {
    super();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T13:25:22.623

Eclipse 报告以下代码并拒绝编译代码。

> 默认构造函数无法处理隐式超级构造函数抛出的异常类型异常。必须定义显式构造函数

因此，您必须明确定义一个构造函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T13:27:07.137

所有类的默认构造函数默认调用超类默认构造函数。现在，当您的超类构造函数抛出异常时，当子类构造函数调用超类构造函数时，它需要处理或抛出异常。
现在在你的类中你没有提到任何构造函数，所以编译器将创建一个默认构造函数并调用 super()，因为 super() 抛出异常并且你的构造函数没有抛出/处理任何异常，它将无法编译。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-04T13:28:02.220

我同意Jalynn2。另一个解决方案是使 RuntimeException 异常，因为您没有在此构造函数中特别提出任何内容。

```
class Super {
  public Super() throws RuntimeException {    
    System.out.println("Super Class");    
  }
} 
```

# java - Java7 Double.toString() 返回 0.005 / java6 它是 0.0050

> ID：15812504
> 
> 赞同：23
> 
> 时间：2013-04-04T13:21:41.227
> 
> 标签：java, number-formatting

我正在从[JDK6 升级到 JDK7](http://www.oracle.com/technetwork/java/javase/compatibility-417013.html#incompatibilities)。以下代码演示显示了`Double.toString()`

```
public class StringDemo
{

    public static void main(String[] args)
    {
        System.out.println(Double.toString(.0005));
        System.out.println(Double.toString(.005)); //different string
        System.out.println(Double.toString(.05));
        System.out.println(Double.toString(.5));
    }
} 
```

JRE6

```
5.0E-4
0.0050
0.05
0.5 
```

JRE7

我正在寻找与上述更改相关的任何文档。兼容性页面不包括它。

```
5.0E-4
0.005   //changed.
0.05
0.5 
```

输出保存在许多参考文件中，并通过字符串比较进行比较-我需要修复比较，但很想知道有关此更改的更多详细信息。关于为什么这种变化会得到赏金的权威答案。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-04T13:30:02.750

这是 Java 1.3 到 1.6 中的一个错误（在 1.7 中解决）。

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4511638](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4511638) 错误报告[http://bugs.sun.com/view_bug.do?bug_id=4428022](http://bugs.sun.com/view_bug.do?bug_id=4428022)包含更多详细信息。已在 JDK 7 (b75) 中修复。

相关报告 - 引用自上面的链接。

*   向后移植：JDK-2181423 - System.out.println(0.001) 输出 0.0010
*   重复：JDK-5078240 - Double.toString(double) 在某些情况下添加尾随零
*   重复：JDK-6575880 - Float.toString(float) 添加尾随零
*   相关：JDK-6935102 - Regtest
    closed/sun/misc/FloatingDecimal/ToString.java 现在失败。
*   相关：JDK-4154042 - java.lang.FloatingDecimal 可以被消除

OpenJDK 7 修复此问题的更改位于：http: [//hg.openjdk.java.net/jdk7/tl/jdk/rev/f85aa3aedf41](http://hg.openjdk.java.net/jdk7/tl/jdk/rev/f85aa3aedf41)

# web-services - REST 服务 - 在浏览器中测试 PUT 方法

> ID：15812506
> 
> 赞同：6
> 
> 时间：2013-04-04T13:21:45.253
> 
> 标签：web-services, rest, put, form-parameter

我开发了 REST 服务。我可以通过浏览器或客户端应用程序测试 GET 方法。但是那些有 PUT 方法的人我不知道浏览器如何使用它们......

例如，在我插入 userId 后，我有一个打开灯的方法：

```
@PUT
@Path("/lampon")
@Produces({"application/json", "text/plain"})
@Consumes("multipart/form-data")
public boolean turnOnLamp(@FormParam("userId") String userId) throws Exception
{
    boolean response = new LampManager().turnOnLamp(userId);
    return response;
} 
```

在我的客户端应用程序中，我这样做了，它可以工作：

```
 String webPage = "http://localhost:8080/BliveServices/webresources/services.actuators/lampon";

    URL urlToRequest = new URL(webPage);

    //Authentication

    urlConnection = (HttpURLConnection) urlToRequest.openConnection();
    urlConnection.setReadTimeout(10000);
    urlConnection.setConnectTimeout(15000);
    urlConnection.setRequestMethod("PUT");
    urlConnection.setRequestProperty("Authorization", basicAuth);
    urlConnection.setRequestProperty("Content-type", "multipart/form-data");
    urlConnection.setRequestProperty("Accept", "application/json");
    urlConnection.setDoOutput(true);
    urlConnection.setDoInput(true);

    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("userId", "2"));

    (...) 
```

**但是如何通过浏览器发送 userId 呢？**

另一件事，我在构建项目时收到此消息：

```
SEVERE: Resource methods utilizing @FormParam and consuming "multipart/form-data" are no longer supported. See @FormDataParam. 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T13:41:46.360

如果你想用你的浏览器测试 REST-Webservice，你必须安装一个插件。

如果你使用谷歌浏览器，你可以安装 REST 控制台，我也使用这些插件来测试我的 Web 服务。

[https://chrome.google.com/webstore/detail/rest-console/cokgbflfommojglbmbpenpphppikmonn](https://chrome.google.com/webstore/detail/rest-console/cokgbflfommojglbmbpenpphppikmonn)

对于 Firefox 安装这些 REST-Client

[https://addons.mozilla.org/en-us/firefox/addon/restclient/](https://addons.mozilla.org/en-us/firefox/addon/restclient/)

REST 客户端也可用于 Safari [http://restclient.net/](http://restclient.net/)

对于 Opera，您可以查看 Simple REST-Client

[https://addons.opera.com/en/extensions/details/simple-rest-client/](https://addons.opera.com/en/extensions/details/simple-rest-client/)

### 对于你的第二个问题

请尝试使用值'application/x-www-form-urlencoded'

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T13:30:01.513

要从浏览器发出 put-request，您可以使用 jQuery 的`jQuery.ajax()`. ( [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/) )

例如：

```
$.ajax({
  url: "test-url",
  type: "PUT",
  data: {userid: 1}
}) 
```

将使用指定数据向 test-url 发送 put-request。

# c# - FirstOrDefault 是否返回对集合中项目或值的引用？

> ID：15812507
> 
> 赞同：15
> 
> 时间：2013-04-04T13:21:45.297
> 
> 标签：c#, linq

FirstOrDefault 是否返回对集合中项目的引用或项目的值？

```
var obj = myCollection.FirstOrDefault(x => x.Param == "match condition");  
if (obj != null)
{
    obj  = newObjectOfCollectionType; //if found, replace with the changed record
} 
```

这段代码会用新对象替换 myCollection 中的对象引用，还是对 myCollection 没有任何作用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2018-09-07T03:13:43.410

```
var obj = myCollection.FirstOrDefault(x => x.Param == "match condition");  
if (obj != null)
{
    obj  = newObjectOfCollectionType; --> this will not reflect in the collection
}

var obj = myCollection.FirstOrDefault(x => x.Param == "match condition");  
if (obj != null)
{
    obj.Property = newValue; --> this will reflect in your object in the original collection
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-09-29T11:28:20.883

它对收藏没有任何作用。您可以像这样更改集合：

```
int index = myCollection.FindIndex(x => x.Param == "match condition");  
if (index != -1)
{
    myCollection[index]  = newObjectOfCollectionType;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-04T13:22:56.577

它什么也不做；obj 是对对象的引用（如果集合是引用类型），而不是对象本身。
如果集合是原始类型，则 obj 将是集合中值的*副本*，并且，这再次意味着集合不会改变。

编辑：
要替换对象，这取决于您的集合的类型。
如果它是`IEnumerable<T>`，那么它不是可变的，您将无法更改它。
您拥有的最佳选择是创建一个新集合并对其进行修改，就像这样-

```
T [] array = myCollection.ToArray();
array[index] = newObject; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-04T13:23:52.310

它返回集合中的值。但是，就您而言，该值是参考。

它不返回位置。您的代码不会更改集合。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-04T13:25:09.440

如果序列是引用类型的序列，则返回引用。否则，返回值。

但是，无论如何，这一行：

```
obj  = newObjectOfCollectionType 
```

无论序列的项目类型如何，都对序列内容不做任何事情。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-19T14:15:13.837

在 Linq 方法的源代码中使用了迭代器，它返回集合`foreach`的元素。`IEnumerable`

```
foreach (TSource element in source) {
  if (predicate(element)) return element;
} 
```

C# 语言规范状态 (8.8.4)

> “迭代变量对应于一个只读局部变量，其范围延伸到嵌入式语句。”

那就是我们得到一个只读元素。对于 ref 类型，修饰符 readonly 允许更改对象的条件，但不允许更改对象的引用。

# blackberry - 自动调整对齐到屏幕大小

> ID：15812509
> 
> 赞同：1
> 
> 时间：2013-04-04T13:21:54.233
> 
> 标签：blackberry, alignment, vertical-alignment, screen-size

我正在开发一个 BlackBerry 应用程序，它有很多`ImageButtons`和. 在一种屏幕尺寸上看似完美的东西，在另一种屏幕尺寸上似乎一团糟。例如，与 整齐对齐的中心，在更大的屏幕上左/右对齐。覆盖屏幕宽度的图像在大屏幕上显得太小。是否有一些机制可以根据屏幕尺寸自动对齐和动态更改图像。有什么想法和文件可以在这方面有所帮助吗？`LabelFields``MessageBoxes``Vertical Field Managers``LabelFields`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:52:37.530

以下是使屏幕在几乎所有设备上看起来都不错的一些技巧：

1.  使用较少的图像。如果您必须使用图像，请为不同的屏幕尺寸使用至少 3-4 个。例如，如果您需要将图像作为屏幕标题，请使用宽度为 320px、480px 和 640px 的图像。根据屏幕宽度加载图像。

2.  不要使用像素测量。改为使用点测量。大多数设备在物理尺寸方面相似，但它们在像素密度方面存在巨大差异。使用它，您可以拥有一个在曲线 (320x240)、粗体 2 (480x360) 和粗体 4 (640x480) 上看起来完全相同的屏幕。如果您注意到，它们具有相同的纵横比和相似的物理尺寸。

3.  不要对职位进行硬编码。而是使用 FIELD_HCENTER 和 DRAW_HCENTER 等作为字段。

4.  不要使用像素高度固定的字体。改为使用定点高度。

5.  如果使用自定义字段，请确保它们可以根据设备和像素密度自动扩展。

# c# - C# windows 应用程序安装程序中的 CLR20r3 DirectoryNotFound

> ID：15812511
> 
> 赞同：1
> 
> 时间：2013-04-04T13:21:58.570
> 
> 标签：c#, visual-studio-2010, mscorlib

我用 Visual Studios 2010 开发了一个 C# windows 窗体应用程序。它有几个外部依赖项。当我从 VS 运行它时它工作正常，但在我制作安装程序并尝试运行它后启动失败。在VS创建的日志文件中，它给了我以下输出。所以基本上mscorlib.dll有问题；即使我安装了这个 dll 并被项目正确引用。

```
<ProblemSignatures>
    <EventType>CLR20r3</EventType>
    <Parameter0>learningplatform.exe</Parameter0>
    <Parameter1>1.0.0.0</Parameter1>
    <Parameter2>515d6cf4</Parameter2>
    <Parameter3>mscorlib</Parameter3>
    <Parameter4>4.0.0.0</Parameter4>
    <Parameter5>50484bd7</Parameter5>
    <Parameter6>3fda</Parameter6>
    <Parameter7>105</Parameter7>
    <Parameter8>System.IO.DirectoryNotFound</Parameter8>
</ProblemSignatures> 
```

注意：我在 64 位机器上使用 .Net 4.0，但 Visual Studios 版本是 32 位（x86 平台）。

# c++ - 指向基类的基本多态指针

> ID：15812517
> 
> 赞同：5
> 
> 时间：2013-04-04T13:22:08.817
> 
> 标签：c++, polymorphism

虽然我已经在 c++ 中工作了一段时间，但直到现在我才需要使用多态特性，而且我对它们非常感兴趣。

如果我有一个基类`ClassA`并且另一个`ClassB`派生自它，我知道我可以拥有`virtual`成员函数`ClassA`，当在 中实现时，即使该实例使用指针指向`ClassB`，也会在实例中调用。如果没有这个关键字，我认为在使用基类指针时基类实现会占上风，但要对从子类实例化的对象进行操作，这对我来说似乎是有问题的，如果实际上它自己实现了相同的函数在这种情况下有效地忽略了。`ClassB``ClassA``virtual``ClassB`

这是对多态行为的正确理解吗？

现在真正的问题是如何`ClassB`使用指向基类的指针来指代。我真的只能想到两种方法：

1.  在实例化时创建指针，使用返回基类指针的函数，同时实际为子类分配内存，使用子类的构造函数。（这样的创建函数有通用名称吗？）
2.  使用对象转换`static_cast`并将其分配给指向基类的指针。

这是生成指向子类对象的基类指针的两种主要技术吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T13:28:35.340

最简单的方法是简单地分配它，不需要强制转换：

```
ClassA *ptrA = new ClassB; 
```

你是正确的，你需要`virtual`关键字来启用多态行为。这是思考它的一种方法。C++ 对对象的静态类型进行操作。调用`ptrA->foo()`时，指针的类型是`ClassA*`。如果该函数未声明`virtual`，那么它将盲目地调用`ClassA`该函数的版本。没有其他选择。但如果`foo()`是`virtual`，它就知道停下来问：“等等，我到底是什么类型的人？” 这种情况下的答案是`ClassB`，所以它会调用`ClassB`'s 版本。

另请注意，您不需要指针来实现这一点。您将看到多态性的另一种常见方式是通过函数调用：

```
void bar(ClassA &aObj)
{
    aObj.foo();
}

// ...
ClassB bObj;
bar(bObj); 
```

# rest - “消息：安全错误。” 使用 WebClient 请求 Https Uri 或使用 SilverLight 客户端请求 HttpWebRequest

> ID：15812518
> 
> 赞同：2
> 
> 时间：2013-04-04T13:22:14.540
> 
> 标签：rest, silverlight-4.0, https, webclient, cross-domain-policy

我的 Silverlight 客户端和 REST Web 服务器（使用 ASP.NET 处理程序实现）都在同一个域中。HTTP 和 HTTPS 协议绑定都在 IIS 7.0 中配置

当使用 HTTPS 请求 URI 时，我得到错误”消息：“安全错误。”但是相同的 URI 在 HTTP 请求上工​​作得很好，没有任何错误

```
private void btnLoginWebRequest_Click(object sender, RoutedEventArgs e)
    {

       bool httpResult = WebRequest.RegisterPrefix("http://", WebRequestCreator.ClientHttp);
       bool httpsResult = WebRequest.RegisterPrefix("https://", WebRequestCreator.ClientHttp);

      this.Dispatcher.BeginInvoke(()=>
      {
        WebClient webClient = new WebClient();
        webClient.Headers["CustomHeader"] = String.Format("myHeaders={0}", "Value");
        webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(webClient_OpenReadCompleted);
        webClient.OpenReadAsync(new Uri(@"https://xxx.xx.xxx.xxx/MyRESTApi/UserGroups"));
       });
    }
void webClient_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
{
    if (e.Error == null)
    {
    }
} 
```

I Get a Error and e.Error 包含以下错误信息

```
{System.Security.SecurityException: Security error.
   at System.Net.Browser.ClientHttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at System.Net.WebClient.GetWebResponse(WebRequest request, IAsyncResult result)
   at System.Net.WebClient.OpenReadAsyncCallback(IAsyncResult result)}
    [System.Security.SecurityException]: {System.Security.SecurityException: Security error.
   at System.Net.Browser.ClientHttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at System.Net.WebClient.GetWebResponse(WebRequest request, IAsyncResult result)
   at System.Net.WebClient.OpenReadAsyncCallback(IAsyncResult result)}
    Data: {System.Collections.ListDictionaryInternal}
    InnerException: null
    Message: "Security error."
    StackTrace: "   at System.Net.Browser.ClientHttpWebRequest.EndGetResponse(IAsyncResult asyncResult)\r\n   at System.Net.WebClient.GetWebResponse(WebRequest request, IAsyncResult result)\r\n   at System.Net.WebClient.OpenReadAsyncCallback(IAsyncResult result)" 
```

crossdomain.xml 如下：-

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
    <site-control permitted-cross-domain-policies="all"/>
    <allow-access-from domain="*" secure="true"/>
    <allow-http-request-headers-from domain="*" headers="*" secure="true"/>
</cross-domain-policy> 
```

clientaccesspolicy.xml 如下：-

```
 <?xml version="1.0" encoding="utf-8"?>
    <access-policy>
         <cross-domain-access>
        <policy>
          <allow-from http-request-headers="*">      
            <domain uri="https://"/>
            <domain uri="http://"/>
          </allow-from>      
          <grant-to>      
            <resource path="/" include-subpaths="true"/>
          </grant-to>      
        </policy>
      </cross-domain-access>

</access-policy> 
```

我已经看到许多与堆栈溢出类似错误相关的线程，但无法通过这些线程中提供的任何解决方案解决此问题。我错过了什么吗？

# c++ - 在 Qt 的树视图中，项目未排序

> ID：15812521
> 
> 赞同：3
> 
> 时间：2013-04-04T13:22:37.173
> 
> 标签：c++, qt

[Qt 文档](http://qt-project.org/doc/qt-5.0/qtwidgets/itemviews-simpletreemodel.html)中有一个非常简单的树模型示例。我加了一行

```
view.setSortingEnabled(true); 
```

在`main.cpp`启用树视图排序。当我运行它时，我在标题中看到一个排序指示器。但是，无论我如何单击标题，项目都不会排序。有什么我忽略的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:37:55.043

在您的视图中使用[QSortFilterProxyModel 。](http://qt-project.org/doc/qt-4.8/qsortfilterproxymodel.html)
视图的`sortingEnabled`属性启用视图中的排序按钮。然而，实际的排序需要在模型的[sort()](http://qt-project.org/doc/qt-4.8/qabstractitemmodel.html#sort)方法中实现。
像这样使用 QSortFilterProxyModel：

```
QSortFilterProxyModel* pProxyModel = new QSortFilterProxyModel(pView);
pProxyModel->setSourceModel(pModel);
pView->setModel(pMdl);
pView->setSortingEnabled(true); 
```

# javascript - PhantomJs 保存谷歌图表的 API GeoChart 的 png 图像

> ID：15812524
> 
> 赞同：8
> 
> 时间：2013-04-04T13:22:45.443
> 
> 标签：javascript, google-visualization, phantomjs

我正在尝试将谷歌图表生成的图表保存为 png 图像。该代码适用于除 GeoChart 之外的所有图表。图像有时会出现，但通常只是空白。这是代码。

渲染.js

```
var system = require('system');
var page = require('webpage').create();
page.open('chart.html, function () {
    page.paperSize = { format: 'A4', orientation: 'landscape'};
    page.render(system.args[1]);
    phantom.exit();
}); 
```

图表.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>Chart Generation</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" /> 
<script type='text/javascript' src='https://www.google.com/jsapi'></script>
<script type='text/javascript'>
 google.load('visualization', '1', {'packages': ['geochart']});
 google.setOnLoadCallback(drawRegionsMap);

  function drawRegionsMap() {
    var data = google.visualization.arrayToDataTable([
      ['Country', 'Popularity'],
      ['Germany', 200],
      ['United States', 300],
      ['Brazil', 400],
      ['Canada', 500],
      ['France', 600],
      ['RU', 700]
    ]);
    var options = {
      width: 400,
      height: 200
    };
    var chart = new google.visualization
      .GeoChart(document.getElementById('chart_div'));
    chart.draw(data, options);
};
</script>
</head>
<body>
<div id="chart_div" style="width: 900px; height: 500px;"></div>
</body>
</html> 
```

终端中的 Usgae ：

```
phantomjs render.js chart.png 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T13:40:03.223

尝试延迟渲染：

```
page.open(address, function (status) {
   window.setTimeout(function () {
        page.render(output);
        phantom.exit();
    }, 1000);
}); 
```

这将延迟 1000 毫秒（1 秒），并且应该有足够的时间让您的图表正确加载。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-28T17:22:57.600

实际上，如果您在文本模式下使用带有标记的 GeoChart（而不是纬度/经度），则 1 秒的超时是远远不够的。更好的解决方案是围绕一个递归函数编写代码，该函数检查准备就绪事件是否由图表触发；在页面中执行此操作。评估：

```
function chartready() {
    console.log('Google.chart.ready');
}                       
var chart = new google.visualization.ChartWrapper(settings);    
chart.draw();
google.visualization.events.addListener(chart, 'ready', chartready); 
```

并确保您像在 HighCharts phantomjs 脚本中一样监控 console.log：

```
page.onConsoleMessage = function (msg) {
  /*
  * Ugly hack, but only way to get messages out of the 'page.evaluate()'
  * sandbox. If any, please contribute with improvements on this!
  */
  if (msg === 'Google.chart.ready') {
    window.ischartready = true;
  }
} 
```

然后继续调用 setTimeout 直到 window.ischartready 为真（或经过预定义的秒数而您放弃）。

```
timeoutTime=8000;//wait not longer than 8 seconds
interval = window.setInterval(function () {
    console.log('waiting');
    if (window.ischartready) {
        clearTimeout(timer);
        clearInterval(interval);
        page.render(whatever);
    }
}, 50);

// we have a timeoutTime second timeframe..
timer = window.setTimeout(function () {
    clearInterval(interval);
    exitCallback('ERROR: While rendering, there\'s is a timeout reached');
}, timeoutTime); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-10T04:13:58.483

系统不允许我对@Jeroen 的回答发表评论，所以根据他的回答，我会添加以下内容：

1-您需要在调用draw方法之前注册事件。[准备好的事件](https://developers.google.com/chart/interactive/docs/events#the-ready-event)

> 应该在调用 draw() 方法之前为这个事件添加一个监听器，否则这个事件可能会在监听器设置之前被触发并且你不会捕捉到它。

2-而不是使用 onConsoleMessage。我会使用 page.onCallback （ callBack[上的幻影](http://phantomjs.org/api/webpage/handler/on-callback.html)）。当然，在 chartready 函数上，我会调用 window.callPhantom

# javascript - JQuery如何根据选定的选项标签生成更多的表单字段

> ID：15812526
> 
> 赞同：1
> 
> 时间：2013-04-04T13:22:50.397
> 
> 标签：javascript, jquery, html, css

我正在构建一个 Web 表单，我希望能够允许用户从下拉菜单中选择一个选项，并且根据他们选择的值，将生成一个包含与该选项相关的更多字段的 div。我已经成功地为另一个项目实现了这个代码，只有一个选项。我回收了该项目的代码并对其进行了修改以适应多个选项，但到目前为止，我还没有成功运行一个工作产品。

这是我一直在使用的一些源代码来说明我的观点。

**jQuery 脚本**

```
 $(document).ready(function(){
            $("#more_info_bus").hide();
            $("#more_info_bus").attr("disabled", "disabled");
            $("#more_info_train").hide();
            $("#more_info_train").attr("disabled", "disabled");
            $("#more_info_tram").hide();
            $("#more_info_tram").attr("disabled", "disabled");

            $("#transport_type").change(function(){
                            var val = $(this).val;
                            $("#more_info_bus input").attr("enabled",(val=="Bus")?"":"enabled");
                            (val=="Bus")?$("#more_info_bus").show():$("#more_info_bus").hide();

                            $("#more_info_train input").attr("enabled",(val=="Train")?"":"enabled");
                            (val=="Train")?$("#more_info_train").show():$("#more_info_train").hide();

                            $("#more_info_tram input").attr("enabled",(val=="Tram")?"":"enabled");
                            (val=="Tram")?$("#more_info_tram").show():$("#more_info_tram").hide();
                    });

            }); 
```

**HTML 代码（缩短为两个 div，而不是所有选项，但你明白了**

```
 <label>Is the venue accessible by public transport via:</label> <br />
    <select name="transport_type" id="transport_type">
            <option disabled selected>Please select a transport type...</option>
            <option value="Bus">Bus</option>
            <option value="Train">Train</option>
            <option value="Tram">Tram</option>
            <option value="Taxi">Taxi</option>
            <option value="Other">Other</option>
    </select> <br /> <br />

    <!--HIDDEN DIVS THAT WILL APPEAR UPON SELECTION OF THE VALUES IN THE SELECT ABOVE -->

    <div id="more_info_bus">
            <label>Bus: Frequency of service</label>
                    <input type="text" name="bus_freq" value="<?php echo $results['bus_freq']; ?>"/><br />

            <label>Bus: route numbers(s)</label>
                    <input type="text" name="bus_routes" value="<?php echo $results['bus_routes'];?>"/> <br />

            <label>Bus: Distance from stop to venue (in meters)</label>
                    <input type="text" name="bus_dist" value="<?php echo $results['bus_dist'];?>"/> <br />

            <label>Bus: How accessible is the route from stop to venue?</label>
                    <textarea cols="50" rows="2" name="bus_access"><?php echo $results['bus_access'];?></textarea> <br />
    </div>

    <div id="more_info_train">
            <label>Train: Frequency of service</label>
                    <input type="text" name="train_freq" value="<?php echo $results['bus_freq']; ?>"/><br />

            <label>Train: route numbers(s)</label>
                    <input type="text" name="train_routes" value="<?php echo $results['bus_routes'];?>"/> <br />

            <label>Train: Distance from stop to venue (in meters)</label>
                    <input type="text" name="train_dist" value="<?php echo $results['bus_dist'];?>"/> <br />

            <label>Train: How accessible is the route from stop to venue?</label>
                    <textarea cols="50" rows="2" name="train_access"><?php echo $results['bus_access'];?></textarea> <br />
    </div> 
```

有谁知道为什么我的`div`部分保持隐藏？当用户选择每个 div 各自的值时，它们不会出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:27:06.177

```
var val = $(this).val; 
```

.val() 是一个函数，所以`typeof val === 'function'`现在。你必须使用：

```
var val = $(this).val(); 
```

# ant - 如何通过ant控制命令shell？

> ID：15812530
> 
> 赞同：0
> 
> 时间：2013-04-04T13:22:55.073
> 
> 标签：ant

目前我通过启动 GNUMake 相关任务的 exec 任务调用批处理脚本（__Make.bat）。

在我直接从命令行调用 build.xml 文件后，将调用批处理脚本，其中显示了新的命令 shell，并且在批处理脚本完成其操作之前，ant 执行已关闭。

基于批处理脚本的输出，即时调用 junit 结果任务来生成报告。

所以目前批处理脚本独立于ant shell。

您能否让我知道是否有任何选项可以控制批处理脚本，以便在完成操作后调用 junit 结果。

片段：

```
<!-- Macro to execute batch script from every testcase--> 
<macrodef name="executeTarget">
   <attribute name="option" default="NOT SET"/>
   <sequential>
     <exec dir="${baseLoc}/Temp/${ant.project.name}/${testDataZipFile}/MakeWare/BCU_MakeWare" executable="cmd" vmlauncher="true" os="Windows XP">
         <env key="WAHL" value="@{option}"/>
            <arg line="/c "/>
            <arg value="start __Make.bat"/>
     </exec>
   </sequential>
</macrodef> 
```

问候，

基兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:38:30.540

`/WAIT`将选项传递给`start`：

```
<arg value="start /WAIT __Make.bat"/> 
```

[启动命令：微软的文档](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/start.mspx)

# perl - 使用 Perl 从 zip 中获取目录结构

> ID：15812535
> 
> 赞同：-1
> 
> 时间：2013-04-04T13:23:09.707
> 
> 标签：perl, zip, archive

如何使用 perl 获取 zip 文件的目录结构[`Archive::Zip`](https://metacpan.org/module/Archive%3a%3aZip)？我尝试了不同的方法组合，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:28:45.293

你读过[文档](http://p3rl.org/Archive%3a%3aZip)吗？

```
$!/usr/bin/perl
use strict;
use warnings;
use feature 'say';

use Archive::Zip;

my $z = Archive::Zip::->new;
$z->read(shift);
say for $z->memberNames; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:40:26.347

我没有安装 Archive::Zip，自从我上次使用它已经很久很久了。

你熟悉面向对象的 Perl 吗？你没有具体说明你之前做了什么。我知道许多不熟悉面向对象 Perl 的人（不幸的是，绝大多数使用 Perl 的人）发现 Perl 的面向对象语法令人困惑。

要使用`Archive::Zip`，您需要创建一个`Archive::Zip`对象，该对象将包含您尝试通过[新](http://search.cpan.org/~adamk/Archive-Zip-1.30/lib/Archive/Zip.pm#Archive%3a%3aZip_Methods)构造函数读取的存档的所有信息。

```
my $zip = Archive::Zip->new( $archive_to_read );

# Always check to see if the object was created!
if ( not defined $zip ) {
    die qq(Could not open "$archive_to_read");
} 
```

这会将您的`$archive_to_read`Zip 文件作为类对象打开`$zip`。

现在，您可以使用[members 或 memberNames](http://search.cpan.org/~adamk/Archive-Zip-1.30/lib/Archive/Zip.pm#Zip_Archive_Accessors)方法获取存档的所有成员。将`members`返回*成员*列表，但这些是成员*对象*，而不仅仅是成员的名称。该`memberNames`方法将返回成员名称的列表。我不知道这是否包括目录。同样，您没有指定您尝试了什么，所以我不知道您是否尝试过这个并且没有得到您想要的。

```
#Returns a list of member objects
my @member_list = $zip->members;

#May do what you want. I don't know if dir names are included.
my @member_names = $zip->memberNames; 
```

如果`memberNames`不这样做，您可以获取*成员对象*列表并使用[成员操作](http://search.cpan.org/~adamk/Archive-Zip-1.30/lib/Archive/Zip.pm#MEMBER_OPERATIONS)从每个成员对象中提取信息：

```
for my $member ( @member_list ) {
    my $file_name = $member->FileName;
    print qq(File "$file_name" is in "$archive_to_read"\n);
} 
```

再说一次，我已经很久没有使用 了`Archive::Zip`，所以我不能保证这是否 100% 准确。如果您提供了更多关于您遇到问题的原因的信息，那会更容易。您了解使用的基础知识`Archive::Zip`吗？您是否使用了特定的方法，却没有得到您想要的信息？

我强烈推荐的一件事是，如果您不了解面向对象的 Perl，请学习它。Perl 包含[有关面向对象的 Perl 语法](http://perldoc.perl.org/perlootut.html)及其工作原理的教程。这是现在大多数现代 Perl 模块在 Perl 中工作的方式。

如果您确实了解面向对象的 Perl 语法，请记住[Data::Dumper](http://perldoc.perl.org/Data/Dumper.html)是您的朋友。它将帮助您了解您正在阅读的数据以及您正在查看的内容。您***永远不***应该使用此信息直接操作对象，但它会让您了解对象中存储的内容以及其中可能隐藏的其他对象类型。

再一次：Stackoverflow 上的人们想提供帮助，但不介意读者。我们需要确切地知道您遇到了什么问题。你甚至尝试过使用`Archive::Zip`吗？您是否了解面向对象 perl 语法的基本工作方式，如果不了解，这是否让您感到困惑？您是否尝试过该`members`方法并因为它没有产生您想要的结果而感到沮丧？我们知道的越多，我们能提供的帮助就越多。

您说您尝试使用`Archive::Zip`，但没有向我们展示您尝试了什么。下次，让我们知道您的代码是什么样的以及您遇到了什么问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T16:27:47.040

有一个称为`memberNames`返回zip 存档的*所有*成员的方法。提取所有目录成员很简单，因为它们以斜杠结尾。

这个程序演示

```
use strict;
use warnings;

use Archive::Zip;

my $file = 'myfile.zip';

my $z = Archive::Zip->new($file);
my @zipdirs = grep m|/$|, $z->memberNames;
print "$_\n" for @zipdirs; 
```

* * *

正如思南所说，检查`isDirectory`每个存档成员可能更正确。这可能会产生与上述相同的结果。

```
my @zipdirs = map $_->fileName, grep $_->isDirectory, $zip->members; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T16:31:22.290

```
my @dirs = grep $_->isDirectory, $zip->members; 
```

# python - 在 Python 的列表中保留重复项

> ID：15812547
> 
> 赞同：9
> 
> 时间：2013-04-04T13:23:38.757
> 
> 标签：python, duplicates

我知道这可能是一个简单的答案，但我无法弄清楚。Python中将重复项保存在列表中的最佳方法是什么：

```
x = [1,2,2,2,3,4,5,6,6,7] 
```

输出应该是：

```
[2,6] 
```

我找到了这个链接：[Find (and keep) duplicates of sublist in python](https://stackoverflow.com/questions/1723072/find-and-keep-duplicates-of-sublist-in-python)，但我对 Python 还是比较陌生，我不能让它为一个简单的列表工作。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-04T13:27:53.383

我会使用`collections.Counter`：

```
from collections import Counter
x = [1, 2, 2, 2, 3, 4, 5, 6, 6, 7]
counts = Counter(x)
output = [value for value, count in counts.items() if count > 1] 
```

这是另一个版本，它保留了第一次复制项目的顺序，它只假设传入的序列包含可散列的项目，并且它会回到何时`set`或被`yeild`引入该语言（无论何时）。

```
def keep_dupes(iterable):
    seen = set()
    dupes = set()
    for x in iterable:
        if x in seen and x not in dupes:
            yield x
            dupes.add(x)
        else:
            seen.add(x)

print list(keep_dupes([1,2,2,2,3,4,5,6,6,7])) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-04T13:27:45.607

如果列表已经排序，这是一种简短的方法：

```
x = [1,2,2,2,3,4,5,6,6,7]

from itertools import groupby
print [key for key,group in groupby(x) if len(list(group)) > 1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:34:08.390

保持简单：

```
array2 = []
aux = 0
aux2=0
for i in x:
    aux2 = i
    if(aux2==aux):
        array2.append(i)
    aux= i
list(set(array2)) 
```

那应该工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-06T12:45:07.870

效率不高，但只是为了获得输出，您可以尝试：

```
import numpy as np

def check_for_repeat(check_list):
    repeated_list = []

    for idx in range(len(check_list)):
        elem = check_list[idx]
        check_list[idx] = None

        if elem in temp_list:
            repeated_list.append(elem)

    repeated_list = np.array(repeated_list)

    return list(np.unique(repeated_list)) 
```

# iphone - xcode 4.5 app 无法在设备中运行 No such a file directory 错误

> ID：15812551
> 
> 赞同：0
> 
> 时间：2013-04-04T13:23:41.523
> 
> 标签：iphone, ios, objective-c, xcode

嗨，现在我正在开发带有 Restkit 框架的 ios 应用程序，它在模拟器中完美运行。但不在设备中运行（带有调试和发布）。它给出了以下错误

**无法启动“xxxxx.app”没有这样的文件或目录（/Users/threesea001/Library/Developer/Xcode/DerivedData/XXXXX/Build/products/Debug-iphoneos/XXXXX.app/XXXX）**

我也尝试重新启动 Xcode、Device、mac。还是没有修好。我试过清除 DerivedData 文件夹。

请帮助任何人。以上我试了5次以上

# android - ActionBar/ABS 的优势？

> ID：15812552
> 
> 赞同：0
> 
> 时间：2013-04-04T13:23:41.790
> 
> 标签：android, android-actionbar, actionbarsherlock

我一直在我的项目中使用 actionbarsherlock，因为它似乎是使用现有操作栏并使其与旧版本兼容的好方法。

然而，最近与我合作的一位开发人员认为该库过于严格，并制作了一个模仿操作栏的自定义视图。

它似乎确实比试图弄清楚如何使用该库要简单得多。此外，设置 actionbarsherlock 样式的方式似乎很混乱，因为您必须两次定义样式，此外，您还必须从 ABS 活动/片段扩展，当您还必须从 roboguice 活动等扩展时，这可能会很痛苦。

那么使用这个库的主要优点是什么？似乎创建自定义视图更简单、更容易且耗时更少

# java - 什么是覆盖 equals() 和 hashCode() 调用的 POJO？

> ID：15812554
> 
> 赞同：0
> 
> 时间：2013-04-04T13:23:49.610
> 
> 标签：java

[这个问题](https://stackoverflow.com/questions/1612334/difference-between-dto-vo-pojo-javabeans)解释了很多关于 Java 约定的内容（*我不确定他们如何称呼它*）。

我只是好奇，有没有为一个覆盖 equals() 和 hashCode() 方法的简单类（或 POJO）命名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:28:38.783

不，这种 POJO 没有具体名称 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:46:32.730

我将其命名为：**AGoodCandidateForHashTableContentPOJO** => Java 创建者可能已经想到了，但不，哈希码/等于概念没有特殊命名；）

# c# - 在 TreeView 中对 XmlData 进行排序

> ID：15812561
> 
> 赞同：1
> 
> 时间：2013-04-04T13:23:56.780
> 
> 标签：c#, wpf, treeview, xmldataprovider

我有一个 TreeView，我用来自 XmlDataProvider 的数据填充。这是我创造了自己的东西。我想对 TreeView 中的项目进行排序，但无法使其正常工作。因此，我为您制作了一个示例代码，您可以将其粘贴到您的 VS 中并进行测试，也许您可​​以看到代码有什么问题。

**XAML**

```
<Window x:Class="TreeViewSortingWithXmlDataProvider.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <HierarchicalDataTemplate DataType="Header" ItemsSource="{Binding XPath=Header|Group|Item}">
            <TextBlock Text="{Binding XPath=@Name}" Margin="3,0,0,0" />
        </HierarchicalDataTemplate>

        <HierarchicalDataTemplate DataType="Group" ItemsSource="{Binding XPath=Header|Group|Item}">
            <TextBlock Text="{Binding XPath=@Name, Mode=TwoWay}" Margin="3,0,0,0" />
        </HierarchicalDataTemplate>

        <DataTemplate DataType="Item">
            <TextBlock Text="{Binding XPath=@Name}" />
        </DataTemplate>

    </Window.Resources>
    <DockPanel >
        <Button DockPanel.Dock="Bottom" Content="click" Click="Button_Click" />
        <TreeView Name="myTreeView"/>
    </DockPanel>
</Window> 
```

**和 CodeBehind**

```
using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Xml.Linq;
using System.Xml;
using System.ComponentModel;

namespace TreeViewSortingWithXmlDataProvider
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            XmlDocument xmlDoc = new XmlDocument();
            XDocument xDoc = new XDocument(
                                    new XDeclaration("1.0", "utf-8", "yes"),
                                    new XComment("Test of sorting"),
                                    new XElement("Header", new XAttribute("Name", "Header")));

            XElement groupElementA = new XElement("Group", new XAttribute("Name", "A"));
            XElement groupElementB = new XElement("Group", new XAttribute("Name", "B"));

            XElement item1 = new XElement("Item", new XAttribute("Name", "TestItem1"), new XAttribute("sortPos", "0"));
            XElement item2 = new XElement("Item", new XAttribute("Name", "TestItem0"), new XAttribute("sortPos", "2"));
            XElement item3 = new XElement("Item", new XAttribute("Name", "TestItem3"), new XAttribute("sortPos", "1"));

            XElement item4 = new XElement("Item", new XAttribute("Name", "TestItem4"), new XAttribute("sortPos", "0"));
            XElement item5 = new XElement("Item", new XAttribute("Name", "TestItem5"), new XAttribute("sortPos", "2"));

            groupElementA.Add(item1);
            groupElementA.Add(item2);
            groupElementA.Add(item3);

            groupElementB.Add(item4);
            groupElementB.Add(item5);

            xDoc.Element("Header").Add(groupElementA);
            xDoc.Element("Header").Add(groupElementB);

            xmlDoc.LoadXml(xDoc.ToString());
            XmlDataProvider provider = new XmlDataProvider() { Document = xmlDoc, XPath = "Header" };
            this.myTreeView.SetBinding(TreeView.ItemsSourceProperty, new Binding() { Source = provider });
        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            this.myTreeView.Items.SortDescriptions.Clear();
            this.myTreeView.Items.SortDescriptions.Add(new SortDescription("@sortPos", ListSortDirection.Ascending));
        }
    }
} 
```

所以我想要发生的是，当我按下按钮时，TreeView 的排序应该改变并在之后排序，`sortPos`而不是与我将它们添加到 xml 的顺序相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:32:25.277

好的，多亏了[@Maverik](https://chat.stackoverflow.com/rooms/18165/wpf) ，我设法解决了这个问题（我将再次粘贴整个代码......）

**XAML**

```
<Window x:Class="TreeViewSortingWithXmlDataProvider.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:l="clr-namespace:TreeViewSortingWithXmlDataProvider"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <l:MyConverter x:Key="myConverter" />

        <HierarchicalDataTemplate DataType="Header" ItemsSource="{Binding XPath=Header|Group|Item}">
            <TextBlock Text="{Binding XPath=@Name}" Margin="3,0,0,0" />
        </HierarchicalDataTemplate>

        <HierarchicalDataTemplate DataType="Group" ItemsSource="{Binding XPath=Item, Converter={StaticResource myConverter}, ConverterParameter=sortPos}">
            <TextBlock Text="{Binding XPath=@Name, Mode=TwoWay}" Margin="3,0,0,0" />
            <HierarchicalDataTemplate.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding XPath=@Name}" />
                </DataTemplate>
            </HierarchicalDataTemplate.ItemTemplate>
        </HierarchicalDataTemplate>
    </Window.Resources>
    <DockPanel >
        <Button DockPanel.Dock="Bottom" Content="click" Click="Button_Click" />
        <TreeView Name="myTreeView"/>
    </DockPanel>
</Window> 
```

**和代码隐藏**（使用转换器）

```
using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Xml.Linq;
using System.Xml;
using System.ComponentModel;
using System.Globalization;

namespace TreeViewSortingWithXmlDataProvider
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            XmlDocument xmlDoc = new XmlDocument();
            XDocument xDoc = new XDocument(
                                    new XDeclaration("1.0", "utf-8", "yes"),
                                    new XComment("Test of sorting"),
                                    new XElement("Header", new XAttribute("Name", "Header")));

            XElement groupElementA = new XElement("Group", new XAttribute("Name", "A"));
            XElement groupElementB = new XElement("Group", new XAttribute("Name", "B"));

            XElement item1 = new XElement("Item", new XAttribute("Name", "TestItem1"), new XAttribute("sortPos", "3"));
            XElement item2 = new XElement("Item", new XAttribute("Name", "TestItem0"), new XAttribute("sortPos", "2"));
            XElement item3 = new XElement("Item", new XAttribute("Name", "TestItem3"), new XAttribute("sortPos", "1"));

            XElement item4 = new XElement("Item", new XAttribute("Name", "TestItem4"), new XAttribute("sortPos", "0"));
            XElement item5 = new XElement("Item", new XAttribute("Name", "TestItem5"), new XAttribute("sortPos", "2"));

            groupElementA.Add(item1);
            groupElementA.Add(item2);
            groupElementA.Add(item3);

            groupElementB.Add(item4);
            groupElementB.Add(item5);

            xDoc.Element("Header").Add(groupElementA);
            xDoc.Element("Header").Add(groupElementB);

            xmlDoc.LoadXml(xDoc.ToString());
            XmlDataProvider provider = new XmlDataProvider() { Document = xmlDoc, XPath = "Header" };
            this.myTreeView.SetBinding(TreeView.ItemsSourceProperty, new Binding() { Source = provider });
        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            this.myTreeView.Items.SortDescriptions.Clear();
            this.myTreeView.Items.SortDescriptions.Add(new SortDescription("@Name", ListSortDirection.Descending));
        }
    }

    public class MyConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            System.Collections.IList collection = value as System.Collections.IList;
            ListCollectionView view = new ListCollectionView(collection);
            SortDescription sort = new SortDescription(parameter.ToString(), ListSortDirection.Ascending);
            view.SortDescriptions.Add(sort);

            return view;
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return null;
        }
    }
} 
```

（对不起，这个相当长的例子，但更容易解释我所做的每一个改变）

如果您有其他解决方案，请添加！

# ios - UIAlertView 随机崩溃

> ID：15812567
> 
> 赞同：0
> 
> 时间：2013-04-04T13:24:04.993
> 
> 标签：ios, crash, uialertview

我遇到随机崩溃`UIAlertView`。崩溃并不总是发生，而且非常随机。任何帮助表示赞赏。

这是堆栈跟踪：

```
Thread 0 name:  Dispatch queue: com.apple.main-thread  
Thread 0 Crashed:  
0   libobjc.A.dylib                 0x398685b0 objc_msgSend + 16  
1   UIKit                           0x33b59c4c -[UIAlertView(Private) _buttonClicked:]  
2   UIKit                           0x33aed0c0 -[UIApplication sendAction:to:from:forEvent:]  
3   UIKit                           0x33aed072 -[UIApplication sendAction:toTarget:fromSender:forEvent:]  
4   UIKit                           0x33aed050 -[UIControl sendAction:to:forEvent:]  
5   UIKit                           0x33aec906 -[UIControl(Internal) _sendActionsForEvents:withEvent:]  
6   UIKit                           0x33aecdfc -[UIControl touchesEnded:withEvent:]  
7   UIKit                           0x33a155ec -[UIWindow _sendTouchesForEvent:]  
8   UIKit                           0x33a027fc -[UIApplication sendEvent:]  
9   UIKit                           0x33a02116 _UIApplicationHandleEvent  
10  GraphicsServices                0x356f25a0 _PurpleEventCallback  
11  GraphicsServices                0x356f21ce PurpleEventCallback  
12  CoreFoundation                  0x31bcf170 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__  
13  CoreFoundation                  0x31bcf112 __CFRunLoopDoSource1  
14  CoreFoundation                  0x31bcdf94 __CFRunLoopRun  
15  CoreFoundation                  0x31b40eb8 CFRunLoopRunSpecific  
16  CoreFoundation                  0x31b40d44 CFRunLoopRunInMode  
17  GraphicsServices                0x356f12e6 GSEventRunModal  
18  UIKit                           0x33a562fc UIApplicationMain 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:42:52.023

在按下按钮之前，您的代表可能正在清理。如果视图或启动警报的视图不再出现在屏幕上，就会发生这种情况（例如）。尝试打开 Zombie Objects（在 Edit Scheme -> Run -> Diagnostics 下）。如果向释放的对象发送消息，您将在调试控制台中收到消息。

![在此处输入图像描述](https://i.stack.imgur.com/CYfgW.png)

# c# - DataSet C# 中是否有等效的 RecordSet.bookmark

> ID：15812570
> 
> 赞同：2
> 
> 时间：2013-04-04T13:24:11.220
> 
> 标签：c#, vb6

我想在 C# 中迁移一个 vb6 代码，我的问题是：如果`RecordSet.bookmark`在 DataSet C# 中有一个等价物

等效的VB6代码： `pos = rsADO.Bookmark`

rsADO 是 ADODB.Recordset 类型

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T15:56:04.417

不可以。但是您可以通过其他方式获得相同的结果。

ADO 记录集是所谓的“光标”。他们有一个“当前记录”，以及将当前记录设置为表顶部、下一个、最后一个和先前记录的方法。

数据集（以及在 C# 中访问结构数据的大多数其他方式）不是游标。尤其是 DataSet，本质上是内存中的数组，因此 DataSet 中没有“当前记录”之类的东西，也没有 Bookmark 的等价物。

但是，您可以引用行对象并保存它。例如，类似：

```
DataRow row = myDataset.Tables[0].Rows[15]; 
```

这与持有 ADO 书签的效果相同。使用引用对该特定行进行操作。

# javascript - 打开后无法使用 JavaScript 操作选择标签

> ID：15812580
> 
> 赞同：0
> 
> 时间：2013-04-04T13:24:31.700
> 
> 标签：javascript, jquery, internet-explorer

`<select>`在使用 JavaScript 操作标签时，我遇到了 Internet Explorer 8 的奇怪行为。

假设我想向 a 添加一个`<option>`，`<select>`而不是在 jQuery 中我可以使用类似`$("select").prepend(myOption)`. 但是如果`<select>`元素是用 JavaScript 创建的*并且*用户已经打开了选择，这不起作用并且 Internet Explorer (8) 不会显示新选项。在 Firefox 中，这工作得很好。

一个例子：

```
<!doctype html>
<head>
    <meta charset="utf-8">
    <title>Test</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
    <script>
        function prependOption(select) {
            $("select").each(function(i, element) {
                var option = $('<option value="abc">xyz</option>');
                $(element).prepend(option);
            });
        }
        $(function() {
            var container = $("#container");
            container.append($("select.prototype").clone());
        });
    </script>   
</head>
<body>  
<input type="button" value="Click" onclick="prependOption(this)" /><br />
<div id="container">
    <select class="prototype">
        <option>Lorem ipsum</option>
    </select>
</div>
</body>
</html> 
```

当您打开页面时，您应该会看到两个选择框——一个是普通的，一个是使用 jQuery 创建的`clone()`。如果单击该按钮，则会向它们添加一个选项。现在，如果您单击并打开两个选择框并再次单击该按钮，则只会将新选项添加​​到第一个选择框。

知道如何解决这种错误行为吗？我需要向`<select>`使用 JavaScript 创建的选项添加选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:27:19.427

试试这个 ：

```
new Object($("select.prototype")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:55:51.473

解决方案是避免`clone()`- 显然它在 Internet Explorer 8 中无法正常工作。

```
var select = $('<select></select>');
select.append($("select.prototype option").clone());
container.append(select); 
```

因此，我没有克隆 `<select>`，而是创建了一个新的，并且只克隆了它的选项。

# java - JDialog 不会在“X”按钮单击时关闭

> ID：15812581
> 
> 赞同：-1
> 
> 时间：2013-04-04T13:24:32.053
> 
> 标签：java, swing, jdialog

我编写了一个具有一个主窗口和多个对话框的应用程序，但是当用户单击右上角的“X”按钮时，其中一个对话框不会关闭。对话框中有一个确定按钮可以正确关闭它，所以这不是一个大问题。谁能建议为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:28:27.260

也许你错过了这样一行： setDefaultCloseOperation(HIDE_ON_CLOSE); 在对话框类中？

# php - 如何下载 extjs4.1 中服务器给出的字节数据（pdf）响应

> ID：15812582
> 
> 赞同：1
> 
> 时间：2013-04-04T13:24:34.120
> 
> 标签：php, download, extjs4.1, tcpdf

我在面板中有一些字段。我正在使用 ajax 请求将用户条目发送到服务器。在服务器端，我使用 php根据用户输入的条目生成 pdf[使用**tcpdf ] 文件。**

下面是ajax请求的代码片段。

```
Ext.Ajax.request({
          url: 'tcpdf3.php',
          method : 'POST',

          params : {
                     fromDate : Ext.encode(Ext.getCmp('FromDate').value),
                     username : Ext.getCmp('uname').value
                   } 
          success : function(){
            // how to handle byte response giving by server . i.e want to download the pdf file(byte stream response) generated by server.
          }
          failure : function(){

          }
         }); 
```

携带用户条目的 ajax 请求将正确发送到服务器。而在服务器端，php 文件“tcpdf3.php”将给出字节串作为响应（即 pdf 文件），到目前为止一切正常。我发现很难处理服务器给出的字节流响应。即我想下载生成的 pdf 文件。
以下是服务器给出的响应。

![在此处输入图像描述](https://i.stack.imgur.com/EO36P.png)

有人可以帮我解决这个问题。

# jquery - 点击时切换尺寸 img

> ID：15812587
> 
> 赞同：1
> 
> 时间：2013-04-04T13:24:53.290
> 
> 标签：jquery

我有一个高度为 250 像素的**图像列表，带有类产品。**

如果我单击图像，它必须变为 500 像素。
如果我再次单击图像，它必须变回 250 像素。
如果我再次单击它必须变为 500 像素。

所以基本上我想在图像的高度之间切换。

是）我有的。

```
<script>
 $(document).ready(function(){

       $('.product').click(function()
       {

          $(this).css("cursor","pointer");
          $(this).animate({height: "500px"}, 'fast');
       });

     $('.product').dblclick(function()
       {

          $(this).css("cursor","pointer");
          $(this).animate({height: "250px"}, 'fast');
       });

   });
</script> 
```

这会使图像在单击时变大，在双击时变小。

但我想在图像为 500px 时执行双击操作。

**如果我单击另一张图片，所有500px的图像必须再次变为250，因此只有1张500px的图片；**

实现这一目标的最佳方法是什么？if else 语句，或者是否可以切换高度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:28:49.137

首先，`cursor: pointer`在你的 CSS 中设置样式！

然后为切换效果使用标志：

```
$(document).ready(function(){
   var flag = true;
   $('.product').click(function() {
       $(this).stop().animate({height: (flag ? "500px" : "250px") }, 'fast');
       flag = !flag;
   });
 }); 
```

[**小提琴**](http://jsfiddle.net/aNf2F/1/)

**编辑：**

对于多个图像，使用`data()`可能是一种更好的方法，我将介绍如何使具有相同类别的其他图像也变小。

```
$(document).ready(function(){
     $('.product').click(function () {
        $('.product').not(this).animate({height: "250px"}, 'fast');
        var $this = $(this),
            flag = !$this.data('flag');

        $this.stop().animate({height: (flag ? "500px" : "250px")}, 'fast')
             .data('flag', flag);
      });
}); 
```

[**小提琴**](http://jsfiddle.net/aNf2F/16/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:28:50.173

为 click 分配一个变量，为 unclick 分配一个 0，然后使用 .click 函数，如下所示：

```
$(document).ready(function(){
TriggerClick = 0;

$(".product").click(function(){
 if(TriggerClick==0){
     TriggerClick=1;
     $("div#test").animate({width:'100px'}, 500);
 }else{
     TriggerClick=0;
     $("div#test").animate({width:'300px'}, 500);
 };
 });
}); 
```

# c# - 如何在没有填充的情况下绘制字符串

> ID：15812588
> 
> 赞同：9
> 
> 时间：2013-04-04T13:24:53.980
> 
> 标签：c#, .net, gdi, ownerdrawn

我正在使用该`GraphicsPath.AddString()`功能，但它会在文本周围留出一点空间来绘制文本。知道如何在没有填充的情况下绘制字符串，只有文本的路径吗？

我的代码是这样的：

```
GraphicsPath gp = new GraphicsPath();

gp.AddString(text, font.FontFamily, (int)font.Style, font.Size,
    boundsRectangle, format);

g.DrawPath(pen, gp); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-09T14:39:03.713

正在发生的事情是它可能使用 Graphics.MeasureString() 的引擎盖下，来自文档：

> GDI+ 将少量（1/6 em）添加到显示的每个字符串的每一端。这个 1/6 em 允许 > 用于具有悬垂末端的字形（例如斜体“f”），并且还为 GDI+ 提供了少量 > 余地以帮助网格拟合扩展。
> 
> DrawString 的默认操作将不利于您显示相邻的运行：
> 
> 首先，默认的 StringFormat 在每个输出的每一端添加一个额外的 1/6 em；其次，当网格拟合宽度小于设计时，允许字符串收缩最多一个 em。为了避免这些问题：
> 
> 始终根据印刷 >StringFormat (GenericTypographic) 传递 MeasureString 和 DrawString 一个 StringFormat。将图形 TextRenderingHint 设置为 TextRenderingHintAntiAlias。这种渲染方法 > 使用抗锯齿和亚像素字形定位来避免网格拟合的需要，因此 > 本质上与分辨率无关。

所以看起来你应该能够使用正确的 StringFormat 来解决这个问题。

# php - Php，如何从数据库复制表并粘贴到另一个

> ID：15812590
> 
> 赞同：3
> 
> 时间：2013-04-04T13:24:54.433
> 
> 标签：php, sql, database

我需要从数据库 A 中检索一个表和他的所有字段，之后，我需要将此表粘贴到另一个数据库 B 上。

这些 2 个表在同一台服务器上，我需要从服务器 B 上的 PHP 脚本中执行此操作。

你有什么想法 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T13:28:42.050

使用以下 SQL：

```
CREATE TABLE db2.table LIKE db1.table;
INSERT INTO db2.table SELECT * FROM db1.table; 
```

如果您使用数据和结构复制整个表（如您所做的那样），您甚至可以将其简化为一个命令，如下所示：

```
CREATE TABLE db1.table
    AS (SELECT * FROM db2.table); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:28:50.157

使用各种 PHP 扩展：

```
*_query/execute('insert into table2 select * from table1'); 
```

插入所有选择值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:29:28.640

```
INSERT INTO destTable
SELECT Field1,Field2,Field3,... 
FROM srcTable
WHERE NOT EXISTS(SELECT * 
                 FROM destTable 
                 WHERE (srcTable.Field1=destTable.Field1 and
                       SrcTable.Field2=DestTable.Field2...etc.)
                 ) 
```

# f# - 记录类型推断

> ID：15812608
> 
> 赞同：8
> 
> 时间：2013-04-04T13:25:49.913
> 
> 标签：f#, type-inference

在以下代码片段中

```
type myrec1 = {x: int; y: int}
type myrec2 = {x: int; y: int; z: int}

let p1 = {x = 1; y = 1}  // Error. p1 compiler assumes p1 has the type myrec2

// It works with additional type specification
let p1: myrec1 = {x = 1; y = 1}
let p2: myrec2 = {x = 1; y = 1; z = 1} 
```

带有注释的行无法编译。由于某种原因，类型检查器无法确定 p1 的类型应该是 myrec1。是因为这种类型推断的情况根本无法解决，还是只是 F# 类型推断的限制？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T13:46:20.847

从[这里](http://msdn.microsoft.com/en-us/library/dd233184.aspx)：

> 最近声明的类型的标签优先于先前声明的类型的标签

所以如果你这样做：

```
type myrec2 = {x: int; y: int; z: int}
type myrec1 = {x: int; y: int}

let p1 = {x = 1; y = 1} 
```

那么它将起作用。

[为了您的阅读](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc335818923)乐趣（F# 3.0 规范）：

```
field-initializer : long-ident = expr 
```

**6.3.5 记录表达式**

在这种情况下，我们的字段初始化器不是单个标识符，因此它使用 14.1.9 中的“字段标签解析”。

> 每个 field-initializeri 的格式为 field-labeli = expri。每个字段标签都是一个长标识，它必须解析为唯一记录类型 R 中的字段 Fi，如下所示：
> 
> · 如果 field-labeli 是单个标识符 fld 并且已知初始类型是记录类型 R< *,...,* > 具有名称为 fld 的字段 Fi，则字段标签解析为 Fi。
> 
> · 如果 field-labeli 不是单个标识符或者如果初始类型是变量类型，则通过对 field-labeli 执行字段标签解析（参见第 14.1 节）来解析字段标签。此过程产生一组字段 FSeti。该集合的每个元素都有一个对应的记录类型，从而产生一组记录类型 RSeti。所有 RSeti 的交集必须产生单个记录类型 R，然后每个字段解析为 R 中的相应字段。

**14.1.9 字段标签解析**

我们的 long-ident 是一个 FieldLabel，所以它是使用 8.4.2 中描述的 FieldLabels 表查找的。

> 字段标签解析指定如何解析 { field1 = expr; 中的 field1 等标识符 ...字段N = expr }。字段标签解析通过以下步骤进行：
> 
> 1\. 在 Types 表和 FieldLabels 表（第 8.4.2 节）中查找所有可用类型中的所有字段。
> 
> 2\. 返回字段声明集。

**8.4.2 名称解析和记录字段标签**

如此处所述，FieldLabels 表用于成员名称解析 (14.1)。

> 对于记录类型，除非记录类型具有 RequireQualifiedAccess 属性，否则记录字段标签 field1 ... fieldN 将添加到当前名称解析环境的 FieldLabels 表中。FieldLabels 表中的记录字段标签在成员名称解析（第 14.1 节）中发挥特殊作用：可以从记录标签中推断出表达式的类型。例如：类型 R = { dx : int; dy: int } let fx = x.dx // x 被推断为类型 R 在本例中，查找 .dx 被解析为字段查找。

**14.1.4 表达式中** 的名称解析 这部分看起来有点模糊，但我认为它在这一点上使用了名称解析。如最后所述，如果有多个，则返回第一个项目。

> 给定输入 long-ident、环境 env 和后续类型参数 < *,...,* > 数量的可选计数 n，表达式中的名称解析计算包含 long-ident< *,..的解释的结果。 .,* > 作为值或其他表达式项的前缀，以及残差路径。表达式中的名称解析如何进行取决于 long-ident 是单个标识符还是由多个标识符组成。如果 long-ident 是单个标识符 ident：
> 
> 1\. 在 ExprItems 表中查找 ident。返回结果并清空其余部分。
> 
> 2\. 如果 ident 没有出现在 ExprItems 表中，则在 Types 表中查找它，如果可用，则使用与 n 匹配的通用 arity。返回此类型并清空其余部分。
> 
> 3\. 如果 ident 没有出现在 ExprItems 表或 Types 表中，则失败。
> 
> ...
> 
> 如果表达式包含歧义，表达式中的名称解析将返回该过程生成的第一个结果。

您感兴趣的部分是上面的最后一行：“返回过程生成的第一个结果”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T13:46:54.347

此行为是设计使然。我不能说这是 F# 类型推断的限制，还是一般类型推断算法的限制；如果您考虑一下，有两种选择：

1.  给定一个记录表达式`{x = 1; y = 1}`，将“x”和“y”字段与最后一个类型匹配以声明它们中的任何一个。这是最容易理解的，也是 F# 编译器实现记录类型推断的方式。

2.  尝试根据当前范围内类型的字段确定“最佳匹配”。（我想这就是你要问的。）

    但是，这种算法可能会导致其他问题；具体来说，对于记录表达式`{x = 1; y = 1}`，编译器无法判断您是否打算创建 type 的表达式`myrec1`，或者您是否打算创建表达式`myrec2`并且您忘记为该`z`字段分配值。

    另外，如果你声明了两个具有完全相同字段的类型，编译器应该怎么做？例如，如果您添加：

    ```
    type myrec3 = {x: int; y: int} 
    ```

换句话说，*没有免费的午餐*——你可以增加类型推断的“力量”，但它会降低你从编译器获得的错误诊断的准确性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-04T14:05:12.343

如果您想要具有类似名称字段的记录类型，区分它们的方法是：

```
let p1 = {myrec1.x = 1; y = 1} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T13:47:56.873

由于没有类型注释，编译器从标签推断记录类型，但第一种类型的标签与第二种标签的区别不够大，因此后者优先，p1 被推断为 myrec2 类型。使用不同的标签以避免类型注释并获得预期的类型推断行为：

```
type myrec1 = {x1: int; y: int}
type myrec2 = {x2: int; y: int; z: int}

let p1 = {x1 = 1; y = 1} 
```

# java - 聚类分析 - 找到聚类的中心

> ID：15812609
> 
> 赞同：0
> 
> 时间：2013-04-04T13:25:53.783
> 
> 标签：java, cluster-analysis

我已经创建了两种聚类算法：k-means 和 divisive，也许稍后我也会添加 aglomerative。我必须分析它们对高维数据的好坏程度，为此我必须计算到聚类中心的平均/总和距离。在 k-means 的情况下，很容易，我有质心，但是如何在分裂/凝聚算法中找到中心？当我在这里时：我目前已经实施了 Euclede、Manhattans 和 Pearsons 距离，还有我可以使用的更多距离度量吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T19:58:19.730

你可能想得到这本书：

*   距离百科全书，Michel Deza，Elena Deza，590 页。

它涵盖了您可以使用的许多备用距离函数。

大概有**几百个不同的距离**......

但是，您还需要研究您的评估方法——如果它是基于质心的，它将*偏向*于 k-means。所以这种比较很可能是**不公平**的。

此外，如果您使用人工数据，请确保您不会不公平地偏爱一种方法，因为该方法与您生成数据的方式相关（例如，如果您生成高斯聚类，它偏爱诸如 k-means 之类的方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:19:56.103

我的工作目标是分析这些集群，当它们必须从高维数据创建集群时。很难评估它们，而且结果不太可能完全公平，所以我将使用一个集群中记录之间的平均累积距离和来自不同集群的两条记录之间的最小距离。关于如何在分层聚类算法中找到聚类中心的方式 - 与 k-means 中使用的公式相同，用于在每次迭代后重新计算质心。

# image - 如何减少图像加载时间

> ID：15812611
> 
> 赞同：0
> 
> 时间：2013-04-04T13:26:06.680
> 
> 标签：image, tapestry

我正在使用挂毯为智能手机开发 Web 应用程序。我的索引页中有一个循环。我在该循环中放置了五个以上的图像。每个图像大小为 5KB。但是加载（每个图像）需要超过 150 毫秒。

有什么方法可以减少图像加载时间。请任何人帮助我。

代码：

索引.tml

```
<t:loop source="topRatedVideoDatas" value="videoItemProperty" index="currIndex" encoder="encoder">
<table width="100%" cellpadding="0" cellspacing="0">
<tr class="list">
<td>
<img src="${videoItemProperty.image}"  width="130" />
</td>
</tr>
</table>
</t:loop> 
```

索引.java

```
public List<ItemProperty> getTopRatedVideoDatas() {
        List<ItemProperty> videoItemProperties = null;
        try {
            final GetData getData = new HttpGetData();
            final String json = getData.getContent("http://localhost:8080/sample/getTopRatedItems" );
            final JSONObject object = new JSONObject(json);
            if(object.optString(Constants.CODE).equalsIgnoreCase(Constants.STATUS_CODE_1)) {
                videoItemProperties = new ArrayList<ItemProperty>();
                final String[] result = object.optString(Constants.ITEMS).split(Constants.COMMA);
                for(int innerIndex = 0; innerIndex < result.length; innerIndex++) {
                    videoItemProperties.add(itemProperties.get(innerIndex).getPropety().get(innerIndex));
                }
            }
        } catch(final Exception e) {

        }
        return videoItemProperties;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:13:01.223

见我上面的评论；我会建议

*   将组装视频数据的逻辑从页面代码中移到服务中
*   想出一个合理的方法来缓存视频数据结果，和/或在后台定期更新它

这将导致页面渲染速度更快；下一步是查看下载图像本身需要多长时间。

您可以查看重新缩放和压缩图像。您可以确保图像具有其内容的唯一 URL，以及远期过期标头（和/或 ETag），以确保浏览器下载它们一次且仅一次，并将它们保存在本地缓存中。

如果这还不够，你可以做更高级的技巧。您最初可以下载一个快速的低分辨率缩略图，然后在初始页面加载后将其（就地）替换为更高分辨率的缩略图（尽管在使用渐进式 JPEG 格式时您会获得一些好处。

但同样，从测量和目标开始，找出问题所在。FF 和 Chrome 都有很好的工具来获取这些信息。用那个。

# django - 如何自动找到几个字段的总和并将其保存在 DJANGO 的另一个字段中？

> ID：15812617
> 
> 赞同：0
> 
> 时间：2013-04-04T13:26:14.057
> 
> 标签：django, django-models, django-forms

```
class EmployeeRating(models.Model):
    rating_1 = models.IntegerField(default = 0)
    rating_2 = models.IntegerField(default = 0)
    rating_3 = models.IntegerField(default = 0)
    rating_4 = models.IntegerField(default = 0)
    rating_4 = models.IntegerField(default = 0)
    total = models.IntegerField(default = 0) 
```

使用模型表单获取值，自动将值分配给“总计”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:58:52.480

```
class EmployeeRatingForm(forms.ModelForm):
    class Meta:
        model = EmployeeRating

    def __init__(self, *args, **kwargs):
        super(EmployeeRatingForm, self).__init__(*args, **kwargs)
        self.fields['total'].widget = forms.HiddenInput()

    def save(self, commit=True):
        rating = super(EmployeeRatingForm, self).save(commit=False)
        rating1 = self.cleaned_data['rating_1']
        rating2 = self.cleaned_data['rating_2']
        rating3 = self.cleaned_data['rating_3']
        rating4 = self.cleaned_data['rating_4']

        rating.total = rating1 + rating2 + rating3 + rating4
        rating.save() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T15:20:51.507

### 1.不要重复自己

在模型中包含一个包含同一模型中其他一些字段的总数的字段似乎是个坏主意。更新一个而不是另一个太容易了，导致字段不一致。

所以我的建议是删除该`total`字段并在需要时计算它。

您可以向`EmployeeRating`模型中添加一个在 Python 中计算它的方法：

```
class EmployeeRating(models.Model):
    # ...

    @property
    def total_rating(self):
        return self.rating_1 + self.rating_2 + self.rating_3 + self.rating_4 
```

如果您需要查询总数，您可以使用[`extra()`](https://docs.djangoproject.com/en/1.5/ref/models/querysets/#django.db.models.query.QuerySet.extra)：

```
EmployeeRating.objects.extra(
    where = ['rating_1 + rating_2 + rating_3 + rating_4 > 10']) 
```

### 2.标准化！

这很尴尬的原因是您的模型没有[完全标准化](http://en.wikipedia.org/wiki/Database_normalization)。如果您有多个评分附加到一条`EmployeeRating`记录，实现它们的自然方法是有一个单独的表。如果这样做，您的模型将如下所示：

```
class EmployeeRating(models.Model):
    # ... other fields, e.g. foreign key to Employee model.

class Rating(models.Model):
    employee_rating = models.ForeignKey(EmployeeRating, related_name='ratings')
    rating = models.IntegerField()
    # ... other fields, e.g. who performed the evaluation, or when it was done. 
```

然后您可以[`annotate()`](https://docs.djangoproject.com/en/1.5/ref/models/querysets/#django.db.models.query.QuerySet.annotate)在需要获取总数时使用：

```
from django.db.models import Sum
EmployeeRating.objects.annotate(total_rating = Sum('ratings__rating')) 
```

# javascript - window.onresize 触发两次

> ID：15812618
> 
> 赞同：5
> 
> 时间：2013-04-04T13:26:14.863
> 
> 标签：javascript

我是 js 新手。请不要痛苦地踢。我有这个代码

```
 window.onresize=function() {alert(1);}; 
```

当我调整任何浏览器的窗口大小时，此功能会触发两次。为什么？以及如何重写该代码将触发一次的代码。

提前谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T13:37:21.850

您需要超时来捆绑调整大小事件。

```
var res;
window.onresize=function() {
    if (res){clearTimeout(res)};
    res = setTimeout(function(){console.log("resize triggered");},100);
}; 
```

[现场示例](http://jsfiddle.net/uFmAe/1/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-04T13:33:41.247

此事件将在不同的浏览器中触发多次（有些在您完成调整大小后，有些在期间）。

解决这个问题的一种方法是在事件触发后等待一段时间（比如半秒），看看是否有进一步的更新。如果没有，您可以继续发出警报。

例如

```
var resizeTimer;
window.onresize = function(){
    if (resizeTimer){
        clearTimeout(resizeTimer);
    } 
    resizeTimer = setTimeout(function(){
        alert(1);
        }, 500);
}; 
```

看到它在[这个小提琴](http://jsfiddle.net/pYxgq/)上工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-21T07:35:12.733

当用户调整大小时，防止函数多次“触发”相同的结果

```
var doc = document; //To access the dom only once
var cWidth = doc.body.clientWidth;
var newWidth = cWidth; //If you want a log to show at startup, change to: newWidth = 0
window.onresize = function (){
    newWidth = doc.body.clientWidth;
    if(cWidth != newWidth){
        cWidth = newWidth;
        console.log("clientWidth:", cWidth); //instead of alert(cWidth);
     };
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-09T00:48:17.523

我提出其他解决方案，因为我不喜欢超时，

```
 `var resized;
    window.onresize = function () {
        if(resized){
            resized = false;
        }
        else{
            resized = true;
            alert('resize');
        }
    };` 
```

# c# - 在 c# 中使用 OpenFileDialog 打开 txt 文件

> ID：15812622
> 
> 赞同：-2
> 
> 时间：2013-04-04T13:26:22.650
> 
> 标签：c#

我写下面的代码来打开txt文件

```
private void button1_Click(object sender, EventArgs e)
{
    try
    {
        OpenFileDialog reader = new OpenFileDialog();

        reader.Filter = "txt files (*.txt)|*.txt";
        // reader.Title = "";
        reader.ShowDialog();
        rtb1.LoadFile(reader.FileName);
    }
    catch(Exception ex)
    {
        MessageBox.Show(ex.Message);
    }
} 
```

但此代码给出以下错误：
**错误：**
文件格式无效

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T13:37:03.710

正如一些有用的评论中所建议的，错误来自：

```
rtb1.LoadFile(reader.FileName); 
```

`RichTextBox.LoadFile`需要一个 RTF 文件，而不是 .txt，然后你会得到一个[MSDN](http://msdn.microsoft.com/en-us/library/3f99sst7.aspx)`ArgumentException`解释的文件：

“正在加载的文件不是 RTF 文档。”

如果要加载 txt 文件，请使用以下命令：

```
rtb1.LoadFile(reader.FileName, RichTextBoxStreamType.PlainText) 
```

它应该可以工作。

# elasticsearch - Elasticsearch：带有返回意外结果的术语的分面查询

> ID：15812625
> 
> 赞同：1
> 
> 时间：2013-04-04T13:26:26.483
> 
> 标签：elasticsearch, faceted-search, facets

我正在尝试对存储在 ES 中的一些日志运行分面查询。日志看起来像

```
{"severity": "informational","message_hash_value": "00016B15", "user-agent": "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:15.0) Gecko/20100101 Firefox/15.0.1", "host": "192.168.8.225", "version": "1.0", "user": "User_1@test.co", "created_timestamp": "2013-03-01T15:34:00", "message": "User viewed contents", "inserted_timestamp": "2013-03-01T15:34:00"} 
```

我试图运行的查询是

```
curl -XGET 'http://127.0.0.1:9200/logs-*/logs/_search' 
-d {"from":0, "size":0, 
    "facets" : { 
         "user" : { 
            "terms" : {"field" : "user", "size" : 999999 } } } } 
```

请注意，日志中的字段`"user"`是电子邮件地址。现在的问题是[`terms-facet`](http://www.elasticsearch.org/guide/reference/api/search/facets/terms-facet/)我使用的搜索查询从用户字段返回一个术语列表，如下所示。

```
u'facets': {u'user': {u'_type': u'terms', u'total': 2004, u'terms': [{u'count': 1002,u'term': u'test.co'}, {u'count': 320, u'term': u'user_1'}, {u'count': 295,u'term': u'user_2'} 
```

请注意，该列表包含`term`

```
{u'count': 1002,u'term': u'test.co'} 
```

这是用户电子邮件地址的域名。为什么弹性搜索将域视为一个单独的术语？

运行查询以检查映射

```
curl -XGET 'http://127.0.0.1:9200/logs-*/_mapping?pretty=true' 
```

产生以下`"user"`领域

```
"user" : {
      "type" : "string"
    }, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:37:34.300

发生这种情况是因为 elasticsearch 的默认全局分析器在索引时标记了“@”（除了空格和标点符号之外）。您可以通过告诉 elasticsearch 不要在此字段上运行分析器来解决此问题，但您必须重新索引所有数据。

创建新索引

```
curl -XPUT 'http://localhost:9200/logs-new' 
```

在此新索引的映射中指定您不想分析“用户”字段

```
curl -XPUT 'http://localhost:9200/logs-new/logs/_mapping' -d '{
    "logs" : {
        "properties" : {
            "user" : {
                "type" : "string", 
                "index" : "not_analyzed"
            }
        }
    }
}' 
```

索引文档

```
curl -XPOST 'http://localhost:9200/logs-new/logs' -d '{
    "created_timestamp": "2013-03-01T15:34:00", 
    "host": "192.168.8.225", 
    "inserted_timestamp": "2013-03-01T15:34:00", 
    "message": "User viewed contents", 
    "message_hash_value": "00016B15", 
    "severity": "informational", 
    "user": "User_1@test.co", 
    "user-agent": "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:15.0) Gecko/20100101 Firefox/15.0.1", 
    "version": "1.0"
}' 
```

elasticsearch 方面现在将显示整个电子邮件地址

```
curl -XGET 'http://localhost:9200/logs-new/logs/_search?pretty' -d '{
    "from":0, 
    "size":0, 
    "facets" : { 
         "user" : { 
            "terms" : {
                "field" : "user", 
                "size" : 999999 
            }
        } 
    }
}' 
```

结果：

```
{
  "took" : 1,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "hits" : {
    "total" : 1,
    "max_score" : 1.0,
    "hits" : [ ]
  },
  "facets" : {
    "user" : {
      "_type" : "terms",
      "missing" : 0,
      "total" : 1,
      "other" : 0,
      "terms" : [ {
        "term" : "User_1@test.co",
        "count" : 1
      } ]
    }
  }
} 
```

参考：核心类型：[http:](http://www.elasticsearch.org/guide/reference/mapping/core-types/) //www.elasticsearch.org/guide/reference/mapping/core-types/ 使用新映射重新索引：[https ://groups.google.com/forum/?fromgroups#!topic/elasticsearch /tCaXgjfUFVU](https://groups.google.com/forum/?fromgroups#!topic/elasticsearch/tCaXgjfUFVU)

# composer-php - 私人作曲家存储库

> ID：15812630
> 
> 赞同：1
> 
> 时间：2013-04-04T13:26:40.760
> 
> 标签：composer-php, satis

我已经设置了具有以下布局的本地 SVN 存储库

```
trunk
  satis
    libraryA
      trunk
        src
        composer.json
      tags
      branches 
```

这符合文档。

我的满意配置如下所示：

```
{
"name": "My repo",
"homepage": "http://myrepo",
"repositories": [
    {
        "type": "vcs",
        "url": "https://myrepo/trunk/satis/libraryA"
    }
],
"require-all": true
} 
```

我选择了这个设置来避免必须为每个库分别创建一个 svn 存储库。

现在我收到以下错误：

```
[Composer\Repository\InvalidRepositoryException]
No valid composer.json was found in any branch or tag of https://myrepo/trunk/satis/libraryA, could not load a package from it. 
```

虽然我很确定 libraryA/trunk 中的 composer.json 是有效的（它通过了`composer validate`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:10:03.247

我自己找到了解决方案。虽然我不认为这是首选方法。

```
{
"name": "My repo",
"homepage": "http://myrepo",
"repositories": [
    {
        "type": "vcs",
        "url": "https://myrepo/trunk/"
        "branches-path" : "satis/libraryA"
    }
],
"require-all": true
} 
```

# android - 不要将项目集中在网格视图上

> ID：15812635
> 
> 赞同：1
> 
> 时间：2013-04-04T13:26:45.190
> 
> 标签：android, android-gridview, android-gridlayout

当我单击其中一个项目时，我有一个网格视图，它在此周围显示一个蓝色框 如何删除它

**不点击看起来像这样**

![在此处输入图像描述](https://i.stack.imgur.com/DgKBa.png)

**单击时显示这种蓝色框**

![在此处输入图像描述](https://i.stack.imgur.com/08jMu.png)

如何删除它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:33:30.680

尝试`android:listSelector="#00000000"`使用您的 gridview xml 文件。这将删除 gridview 的任何类型的背景。

# perl - 如何在 Shell 脚本中自动化 Job 以使用 Doxygen 生成 Latex 文件并键入命令 make pdf 以获取 pdf 文件？

> ID：15812636
> 
> 赞同：1
> 
> 时间：2013-04-04T13:26:46.323
> 
> 标签：perl, bash, latex, doxygen

在 Doxygen (Linux) 的帮助下，我成功获得了 PDF 格式的文件！
我的任务是使用 shell 脚本自动化整个过程

例如：

doxygen doxygenfile -> Gives Latex Files 然后我在latex 文件夹中输入Manually make pdf 来获取pdf 文件。

任何人都可以建议在 Shellscipt(Bash)/Perl 脚本的帮助下使这个过程自动化以直接获取 pdf 文件，而无需任何手动交互吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:00:34.760

我会建议像

```
doxygen -w latex header.tex doxygen.sty 
```

为您的 doxygen 命令（您可能需要查阅[手册](http://www.doxygen.nl/manual/doxygen_usage.html)以更好地使用 doxygen 命令），然后使用适当的命令用 latex 或 pdflatex 编译它（如果您使用`latex`命令，则需要将 dvi 转换为 pdf） . 所以原始的shell脚本看起来像

```
#!/bin/bash
#doxygen 
doxygen -w latex header.tex doxygen.sty myfile
#latex
pdflatex header.tex 
```

注意：确保您拥有所有合适的乳胶包。否则，您必须事先下载它们。

# emacs - emacs：我需要和解释 ditrack-list 变量

> ID：15812638
> 
> 赞同：1
> 
> 时间：2013-04-04T13:26:50.087
> 
> 标签：emacs, emacs23

在 emacs 的外壳中，我使用的是 ditrack-mode ( `M-x dirtrack-mode`)。我在`*Directory Tracking Log*`缓冲区中收到错误：

> 输入 `user@machine:~/modules/mydir> ' 无法匹配 `dirtrack-list'

为了解决它，我试图设置`dirtrack-list`变量以告诉 emacs 我的提示形式，但没有运气。这主要是因为我不理解这个变量的文档：

> 污垢列表的值是`("^emacs ^.\\{1,\\}@.\\{1,\\}:.+> " nil)`
> 
> 以任何方式设置时自动变为缓冲区本地。
> 
> 文档：目录跟踪列表。第一项是一个正则表达式，它描述了在提示中找到路径的位置。第二个是数字，要匹配的正则表达式组。可选的第三项是提示是否为多行。如果 nil 或省略，则假定提示位于一行。

谁能给我解释一下*第一*项，*第二*项和第三*项*是什么？如何告诉 emacs 提示的哪一部分是路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T05:18:45.903

您的`dirtrack-list`变量的值是一个列表：

```
("^emacs ^.\\{1,\\}@.\\{1,\\}:.+> " nil) 
```

该列表由两项组成：字符串和符号`nil`。根据文档，第一项是一个正则表达式，它与您的提示匹配以提取路径。

因此，假设您的 shell 提示符如下所示：

```
toni@host [/home/toni/stuff] > 
```

那么您希望正则表达式匹配包含`/home/toni/stuff`. 显然，默认的正则表达式 for`dirtrack-list`并没有这样做，所以你必须替换它。对于上面的示例，应该这样做：

```
"^[^@]*@[^ ]* \\[\\([^]]*\\)\\] > " 
```

在该正则表达式中，作为实际路径的部分由`"\\(...\\)"`组捕获。由于它是您的正则表达式中的第一个（也是唯一一个）组，因此您希望将数字作为变量`1`的第二项。`dirtrack-list`

为了使用您自己的正则表达式，例如示例中的正则表达式，请键入`M-x` `customize-variable` `RET` `dirtrack-list` `RET`. 然后将值编辑为：

```
("^[^@]*@[^ ]* \\[\\([^]]*\\)\\] > " 1) 
```

并将其设置为当前会话。当然，您必须使用与您的实际提示匹配的正则表达式，而不是我的示例中的那个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-24T06:12:30.810

托马斯的回答对我很有用，但在我输入双反斜杠之前，正则表达式不起作用。

对于像这样的提示：

`user@place:~/work$`

我将 ditrack-list 变量设置为

`("^[^:]+:\\([^\\$]+\\)\\$" 1)`

总是使用双反斜杠而不是单反斜杠。

[反斜杠必须输入为 \\。](https://www.emacswiki.org/emacs/RegularExpression)

编辑：感谢@phils 编辑原始问题并选择包含双反斜杠的答案。

下面是添加到我的 .emacs 文件中以启用 emacs 'dirtrack' 模式的代码段 - *shell*通过观察提示来监视当前目录的模式（假设 pwd 打印在提示中）。默认模式“shell-dirtrack”通过解析*cd、pushd*和*popd*的输入命令来跟踪。

我在此处添加它是因为该页面的某些读者可能正在追求该选项。

```
(require 'dirtrack) ;change the method used to determine the current directory in a shell
(add-hook 'shell-mode-hook
          (lambda ()
            (shell-dirtrack-mode 0) ;stop the usual shell-dirtrack mode
            (setq dirtrack-list '("^[^:]+:\\([^\\$#]+\\)[\\$#]" 1)) 
            (dirtrack-debug-mode) ;this shows any change in directory that dirtrack mode sees
            (dirtrack-mode))) ;enable the more powerful dirtrack mode

(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(dirtrack-list (quote ("^[^:]+:\\([^\\$#]+\\)[\\$#]" 1)))) 
```

您可以看到*ditrack-list*设置了两次。第一个是本地的 shell 模式钩子。第二个是在使用交互式 UI 命令**Mx customize-variable [RET]** *dirack-list* **[RET]**时自动插入的部分中全局。可能只需要一个。

**注意**：最终的正则表达式涵盖了两种提示情况：

`user@place:~/work$`

`user@place:~/work#`

**注意**：Emacs 有一个交互式函数**Mx re-builder**，它使得测试正确的正则表达式变得非常容易。

# c# - 我应该使用枚举、静态类、字典或结构来表示 C# 中的这些“标记的浮点数”吗？

> ID：15812640
> 
> 赞同：14
> 
> 时间：2013-04-04T13:26:50.887
> 
> 标签：c#, enums, structure

我有一个恒定的数据结构，它表示每个人类椎骨的相对高度，相对于总脊柱高度进行归一化。这是来自人体测量学研究等。

我在 Python 中将它实现为一个元组的元组，每个元组包含一个（字符串）名称和（双）值，如下所示：

```
vertebral_heights = (
("C7",  0.0000000),
("T1",  0.0391914),
("T2",  0.0785479),
("T3",  0.1183993),
("T4",  0.1590759),
("T5",  0.2009076),
("T6",  0.2442244),
("T7",  0.2893564),
("T8",  0.3366337),
("T9",  0.3863861),
("T10", 0.4389439),
("T11", 0.4946370),
("T12", 0.5537954),
("L1",  0.6167492),
("L2",  0.6838284),
("L3",  0.7553630),
("L4",  0.8316832),
("L5",  0.9131188),
("S1",  1.0000000)) 
```

我的第一个想法是创建一个字典，但这需要一个类用作容器。然后想到了枚举的想法，但我读过“枚举用于整数”，而且我有双打。然后是 Class 和 Struct，但到目前为止我完全糊涂了，而且我相信我目前对在 C# 中做这些事情的最佳实践的理解还不够。

我的预期用途是在应用程序模型（元素的数字部分）和用户模型（元素的命名的、与域相关的部分）之间建立一个“映射”。

有什么建议吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T13:37:10.310

这实际上取决于您希望如何访问这些值。

**常数**

如果您总是使用变量名，例如：

```
double x = C7; 
```

那么你可以使用一个充满常量的类，如下所示：

```
public class VertebralHeights
{
    public const double C7 = 0.0000000d;
} 
```

**字典**

但是，如果您想动态访问它们，例如：

```
string id = "C7";
double x = VertebralHeights[id]; 
```

那么你会更好地使用一个`Dictionary`你可以这样定义的：

```
Dictionary<string, double> VertebralHeights = new Dictionary<string, double>()
{
    { "C7", 0.0000000d },
    { "T1", 0.0391914d}
} 
```

* * *

**两全其美**。

如果您想要对值进行强类型和动态访问，您可以扩展上述任一方法...

对于**常量**（方法 1），添加一个接受字符串的函数：

```
public double GetValue(string s)
{
    switch(s)
    {
        case "C7": return C7;
        case "T7": return T7;
        //...and so on...
        default: return 0;//or an alternate default
    }
} 
```

（注意：你可以用反射来做到这一点，如果有一个庞大的列表会更容易，但不值得在这里获得额外的性能）

对于**Dictionary**方法（方法 2），您可以添加一组 getter：

```
public double C7 { get { return VertebralHeights["C7"]; } } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-04T13:52:34.693

这是我对此的看法 - 使用作为字典的单例类：

```
public class Vertebrae : Dictionary<string, double>
{
    private Vertebrae() : base() { }

    private static Vertebrae _heights = new Vertebrae() {
        { "C7", 0.0 },
        { "T1", 0.0391914 },
        { "T2", 0.0785479 },
    };

    public static Vertebrae Heights { get { return _heights; } }

    public static double C7 { get { return Heights["C7"]; } }
    public static double T1 { get { return Heights["T1"]; } }
    public static double T2 { get { return Heights["T2"]; } }

    public static IEnumerable<double> All
    {
        get
        {
            return new List<double>() { C7, T1, T2 };
        }
    }
} 
```

要通过字符串名称访问您的 Vertebrae，请执行以下操作：

```
double c7 = Vertebrae.Heights["C7"]; 
```

要通过符号名称访问您的椎骨，您可以：

```
double c7 = Vertebrae.C7; 
```

要枚举您的椎骨，您可以：

```
foreach (double v in Vertebrae.All) { /* ... */ } 
```

对于枚举器，您可以像在枚举器中一样初始化一个静态列表，但我不确定哪个会首先初始化，静态列表或静态字典...

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-04T14:37:36.180

将其作为一个枚举来执行，并预先编写黑盒管道代码。你不会后悔的！这是我要做的：

编写一个自定义属性，以便您可以将双精度值关联到每个枚举：

```
[AttributeUsage(AttributeTargets.Field, Inherited = false, AllowMultiple = false)]
internal sealed class VertebralHeightAsDoubleAttribute : Attribute
{
  public double HeightValue { get; private set; }

  public VertebralHeightAsDoubleAttribute(double heightValue_)
  {
    HeightValue = heightValue_;
  }
} 
```

一些让生活更轻松的扩展方法：

```
public static class VHAttribExtensions
{
  public static string ToNameString(this VertebralHeight target)
  {
    return Enum.GetName(typeof(VertebralHeight), target);
  }

  public static double ToHeightValue(this VertebralHeight target)
  {
    var fi = target.GetType().GetField(target.ToString());
    var attributes = (VertebralHeightAsDoubleAttribute[])fi.GetCustomAttributes(
      typeof(VertebralHeightAsDoubleAttribute), false);
    return attributes.Length > 0 ? attributes[0].HeightValue : double.NaN;
  }
} 
```

使用自定义属性定义您的枚举：

```
public enum VertebralHeight
{
  [VertebralHeightAsDouble(0.0000000)]
  C7,
  [VertebralHeightAsDouble(0.0391914)]
  T1,
  [VertebralHeightAsDouble(0.0785479)]
  T2,
  [VertebralHeightAsDouble(0.1183993)]
  T3,
  [VertebralHeightAsDouble(0.1590759)]
  T4,
  [VertebralHeightAsDouble(0.2009076)]
  T5,
  [VertebralHeightAsDouble(0.2442244)]
  T6,
  [VertebralHeightAsDouble(0.2893564)]
  T7,
  [VertebralHeightAsDouble(0.3366337)]
  T8,
  [VertebralHeightAsDouble(0.3863861)]
  T9,
  [VertebralHeightAsDouble(0.4389439)]
  T10,
  [VertebralHeightAsDouble(0.4946370)]
  T11,
  [VertebralHeightAsDouble(0.5537954)]
  T12,
  [VertebralHeightAsDouble(0.6167492)]
  L1,
  [VertebralHeightAsDouble(0.6838284)]
  L2,
  [VertebralHeightAsDouble(0.7553630)]
  L3,
  [VertebralHeightAsDouble(0.8316832)]
  L4,
  [VertebralHeightAsDouble(0.9131188)]
  L5,
  [VertebralHeightAsDouble(1.0000000)]
  S1
} 
```

测试它：

```
static void Main(string[] args)
{
  var list = Enum.GetValues(typeof(VertebralHeight)).OfType<VertebralHeight>();
  foreach (var vh in list)
  {
    Console.WriteLine("{0} : {1}", vh.ToNameString(), vh.ToHeightValue());
  }
  Console.ReadLine();
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-04T13:34:43.560

你可以创建一个类：

```
public static class VertebralHeights
{
    public const double C7 = 0.0000000;
    public const double T1 = 0.0391914;
    //...
} 
```

使用权：`double c7 = VertebralHeights.C7;`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-04T13:33:04.130

取决于您如何使用这些映射。`string`如果涉及任何按名称 ( ) 的查找，那么`Dictionary`是正确的选择。但是，如果您只需要这些数字具有友好的名称，我会选择类中的常量（也许是静态的）。

枚举字典中的键和值也很容易：

```
var dict = new Dictionary<string, double>();

foreach (var key in dict.Keys)
{

}

foreach (var value in dict.Values)
{

} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-04T13:53:30.503

要枚举它们，按字符串查找，按顺序排序，需要存储三条数据。您访问它们的方式会改变最好的存储方式。

1.  `List`包含名称和值的元组。
    *   这具有订购的主要优点。
    *   为了按名称获取特定项目，您需要一个 linq 查询来检索它。
2.  `Dictionary`具有名称的键，以及包含顺序和值的元组的值
    *   这具有按名称快速查找项目的主要优点
    *   为了以特定顺序获取所有项目，您需要一个 linq 查询来订购它们。
    *   如果您只想在没有特定顺序的情况下遍历所有项目，`Dictionary`则允许这样做。
3.  保留一本字典和一份值列表。- 有点乱，可能是过度优化。
4.  创建一个继承自上述实现之一的自定义集合，并提供隐藏实际实现的缺失功能。Linq 并没有那么慢，以至于对一个简短的列表感到担忧。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-04T13:54:44.667

您可以在泛型集合中使用简单的类。然后 LINQ 可以轻松地将值相互映射。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{

    class Vertebra {
        public string name { get; set; }
        public double height { get; set; }
    }

    class Program
    {
        static void Main(string[] args)
        {
            List<Vertebra> Vertebrae = new List<Vertebra>() {
                new Vertebra() {name = "C7", height = 0.0000000},
                new Vertebra() {name = "T1", height = 0.0391914}
                //etc
            };

            //find height by name:
            double H = Vertebrae.Single(v => v.name == "C7").height;

            //find name by height:
            string N = Vertebrae.Single(v => v.height == 0.0391914).name;

        }
    }

} 
```

# cocoa - 将 Core Data 与基于非文档的应用程序一起使用 - Cocoa

> ID：15812642
> 
> 赞同：0
> 
> 时间：2013-04-04T13:26:59.483
> 
> 标签：cocoa, core-data, nsarraycontroller

我曾使用基于文档的应用程序使用 Core Data。但是知道，我正在尝试构建一个类似于`Notes`Mac OS X 上的应用程序的应用程序。所以我创建了一个基于数据模型的非文档应用程序。我绑定值的方式与我以前的 Core Data 应用程序完全相同。

My`arrayController`设置为`Entity Mode`我的实体的名称，它`Prepares Contents`被检查并且它`ManagedObjectContext`被绑定到`File's Owner`'s `managedObjectContext`。这正是我在以前的应用程序中所做的。但是使用这些绑定，我有以下错误：

```
[<NSApplication 0x101a032c0> valueForUndefinedKey:]: this class is not key value coding-compliant for the key managedObjectContext.
(
0   CoreFoundation                      0x00007fff96525b06 __exceptionPreprocess + 198
1   libobjc.A.dylib                     0x00007fff915563f0 objc_exception_throw + 43
2   CoreFoundation                      0x00007fff965b9f49 -[NSException raise] + 9
3   Foundation                          0x00007fff91e518bc -      [NSObject(NSKeyValueCoding) valueForUndefinedKey:] + 238
4   Foundation                          0x00007fff91d99539 -  [NSObject(NSKeyValueCoding) valueForKey:] + 400
5   AppKit                              0x00007fff8f41a6fb -  [NSApplication(NSScripting) valueForKey:] + 514
6   Foundation                          0x00007fff91db9de8 -[NSObject(NSKeyValueCoding) valueForKeyPath:] + 341
7   AppKit                              0x00007fff8f6580d4 -[NSBinder valueForBinding:resolveMarkersToPlaceholders:] + 163
8   AppKit                              0x00007fff8f665a13 -[NSObjectParameterBinder _updateObject:observedController:observedKeyPath:context:] + 1046
9   AppKit                              0x00007fff8f64f6c9 -[NSObject(NSKeyValueBindingCreation) bind:toObject:withKeyPath:options:] + 641
10  AppKit                              0x00007fff8f4d80ca -[NSIBObjectData nibInstantiateWithOwner:topLevelObjects:] + 1012
11  AppKit                              0x00007fff8f4b714d loadNib + 317
12  AppKit                              0x00007fff8f4b6679 +[NSBundle(NSNibLoading) _loadNibFile:nameTable:withZone:ownerBundle:] + 219
13  AppKit                              0x00007fff8f4b64ae -[NSBundle(NSNibLoading) loadNibNamed:owner:topLevelObjects:] + 200
14  AppKit                              0x00007fff8f4b628e +[NSBundle(NSNibLoading) loadNibNamed:owner:] + 360
15  AppKit                              0x00007fff8f4b2a2f NSApplicationMain + 398
16  Secrets                             0x0000000100000ea2 main + 34
17  libdyld.dylib                       0x00007fff920927e1 start + 0
18  ???                                 0x0000000000000003 0x0 + 3
)
*** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<NSApplication 0x101a032c0> valueForUndefinedKey:]: this class is not key value coding-compliant for the key managedObjectContext.'
*** First throw call stack:
(
0   CoreFoundation                      0x00007fff96525b06 __exceptionPreprocess + 198
1   libobjc.A.dylib                     0x00007fff915563f0 objc_exception_throw + 43
2   CoreFoundation                      0x00007fff965b9f49 -[NSException raise] + 9
3   Foundation                          0x00007fff91e518bc -[NSObject(NSKeyValueCoding) valueForUndefinedKey:] + 238
4   Foundation                          0x00007fff91d99539 -[NSObject(NSKeyValueCoding) valueForKey:] + 400
5   AppKit                              0x00007fff8f41a6fb -[NSApplication(NSScripting) valueForKey:] + 514
6   Foundation                          0x00007fff91db9de8 -[NSObject(NSKeyValueCoding) valueForKeyPath:] + 341
7   AppKit                              0x00007fff8f6580d4 -[NSBinder valueForBinding:resolveMarkersToPlaceholders:] + 163
8   AppKit                              0x00007fff8f665a13 -[NSObjectParameterBinder _updateObject:observedController:observedKeyPath:context:] + 1046
9   AppKit                              0x00007fff8f64f6c9 -[NSObject(NSKeyValueBindingCreation) bind:toObject:withKeyPath:options:] + 641
10  AppKit                              0x00007fff8f4d80ca -[NSIBObjectData nibInstantiateWithOwner:topLevelObjects:] + 1012
11  AppKit                              0x00007fff8f4b714d loadNib + 317
12  AppKit                              0x00007fff8f4b6679 +[NSBundle(NSNibLoading) _loadNibFile:nameTable:withZone:ownerBundle:] + 219
13  AppKit                              0x00007fff8f4b64ae -[NSBundle(NSNibLoading) loadNibNamed:owner:topLevelObjects:] + 200
14  AppKit                              0x00007fff8f4b628e +[NSBundle(NSNibLoading) loadNibNamed:owner:] + 360
15  AppKit                              0x00007fff8f4b2a2f NSApplicationMain + 398
16  Secrets                             0x0000000100000ea2 main + 34
17  libdyld.dylib                       0x00007fff920927e1 start + 0
18  ???                                 0x0000000000000003 0x0 + 3
)
libc++abi.dylib: terminate called throwing an exception 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:44:25.550

```
this class is not key value coding-compliant for the key managedObjectContext 
```

这会告诉你到底出了什么问题。您将托管对象上下文绑定到文件所有者，但文件所有者显然没有托管对象上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T04:27:39.170

如果其他人发现这一点并像我一样寻找更彻底的答案，请查看 Apple Developer Documentation。此[常见问题解答](https://developer.apple.com/library/mac/documentation/cocoa/conceptual/coredata/Articles/cdFAQ.html)说明以下内容：

> 托管对象上下文的来源完全取决于应用程序。在使用 NSPersistentDocument 的基于 Cocoa 文档的应用程序中，持久文档通常会创建上下文，并让您通过 managedObjectContext 方法访问它。
> 
> 在单窗口应用程序中，如果您使用标准项目助​​手创建项目，应用程序委托（AppDelegate 类的实例）会再次创建上下文，并允许您通过 managedObjectContext 方法访问它。然而，在这种情况下，创建上下文（以及核心数据堆栈的其余部分）的代码是显式的。它是作为模板的一部分自动为您编写的。

# java - 调用构造函数时数据类型不正确

> ID：15812643
> 
> 赞同：2
> 
> 时间：2013-04-04T13:27:00.883
> 
> 标签：java

我正在尝试创建一个小型库存控制程序，其中每个 StockItem 有 5 个实例变量、一个 itemID、一个 itemDesc、一个价格、一个数量和一个 reOrderLevel。我已经在 StockItem 文件中设置了我的构造函数，并且在尝试创建一个测试器文件来测试我的所有方法时，我遇到了一个问题。当我尝试使用构造函数创建新的 StockItem 时，出现错误：

必需：String，String，Double，int，int 找到：String，String，String，String，String

我该如何解决这个错误？我不确定这是否是我的构造函数中的错误，或者我的测试器文件中的代码是否错误。

提前致谢。

这是我的构造函数代码：

```
public class StockItem {

String itemID;
String itemDesc;
Double price;
int quantity;
int reOrderLevel;
//declaring my instance variables    

public StockItem (String itemID, String itemDesc, Double price, int quantity, int reOrderLevel) {       
    this.itemID = itemID;
    this.itemDesc = itemDesc;
    this.price = price;
    this.quantity = quantity;
    this.reOrderLevel = reOrderLevel;
} 
```

到目前为止，这是我的测试器代码，试图创建一个项目：

```
public class StockItemTester {

public static void main (String[] args) {
    StockItem item1 = new StockItem ("ABC", "iPhone 5", " 500", "3", "10");      
}    

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T13:28:19.853

您必须根据构造函数签名传递类型：

```
StockItem item1 = new StockItem ("ABC", "iPhone 5",  500.0,  3,  10 );
                                 ^^^^^  ^^^^^^^^^^   ^^^^^   ^^^ ^^^
                                String    String     Double  int int
                                itemId   itemDesc    price   qty reorderlevel 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T13:28:44.007

`String`当您的构造函数需要不同的数据类型（如`int`s 和s）时，您将传入`double`s。

您需要更改构造函数，以便传入正确的数据类型：

```
new StockItem ("ABC", "iPhone 5", 500.0, 3, 10); // String, String, double, int, int 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T13:29:02.840

你需要这样做：

```
StockItem item1 = new StockItem ("ABC", "iPhone 5", 500, 3, 10); 
```

函数调用中引号中的任何值都被视为字符串。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-04T13:29:03.387

最后两个参数必须是 type `int`，而在此之前的一个参数必须是`double`根据您的类中的实例声明。

`StockItem item1 = new StockItem ("ABC", "iPhone 5", 500, 3, 10);`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-04T13:29:15.013

是的，您将 5 个字符串传递给需要 2 个字符串和 3 个数字的方法。

更改您的方法调用：

```
StockItem item1 = new StockItem ("ABC", "iPhone 5", " 500", "3", "10"); 
```

至：

```
StockItem item1 = new StockItem ("ABC", "iPhone 5", 500, 3, 10); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-04T13:29:16.707

您不应该在数字参数周围加上引号，即 500、3 和 10。引号意味着它们被视为`String`与 a`double`和两个`int`s 相对。

# asp.net - Handles 子句需要在包含类型或其基类型之一中定义的 WithEvents 变量

> ID：15812648
> 
> 赞同：4
> 
> 时间：2013-04-04T13:27:07.393
> 
> 标签：asp.net, vb.net

```
Protected Sub drp_usertype_SelectedIndexChanged(ByVal sender As Object, _
         ByVal e As System.EventArgs) Handles drp_usertype.SelectedIndexChanged

End Sub 
```

在 drp_usertype.SelectedINDexChanged 下出现错误

它是一个下拉列表

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T13:54:17.610

当您声明`drp_usertype`对象时，必须按以下方式完成：

```
Private WithEvents drp_usertype As DropDownList 
```

这对于

```
Private WithEvents drp_usertype As New DropDownList 
```

ETC...

该关键字允许控件使用语法将事件与其所有者`WithEvents`挂钩。`Handles`在设计器中添加组件时，它会自动为您生成它，但是当您自己创建它们时，`WithEvents`如果您打算对组件使用事件，则必须包括。

如果您不声明对象`WithEvents`，则必须以编程方式分配处理程序，因为它们在 C# 中使用`AddHandler`- 请参阅：[AddHandler](http://msdn.microsoft.com/en-us/library/6yyk8z93%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-23T17:06:04.763

如果没有使用名称“drp_usertype”定义的控件，也会引发此错误。

我通过将功能从一页复制到另一页并忘记在“句柄”关键字之后重命名控件而遇到了这个问题。

显然，这不是您的问题，但我想我会发布它以帮助其他任何遇到此错误的人。

# php - WooCommerce：从所有产品中排除最近的产品

> ID：15812660
> 
> 赞同：0
> 
> 时间：2013-04-04T13:27:29.583
> 
> 标签：php, wordpress, woocommerce, product

我想展示一些最近的产品，而不是所有其他没有最近的产品。

我知道可以通过使用“偏移”来处理 Wordpress 中的帖子，但我不知道如何处理 Woocommerce。

知道如何从所有产品中排除前 N 个产品吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:45:54.833

您可以通过修改查询`pre_get_posts`，然后简单地设置偏移量。

```
add_action( 'pre_get_posts', 'custom_pre_get_posts_query' );

function custom_pre_get_posts_query( $q ) {

    if ( ! $q->is_main_query() ) return;
    if ( ! $q->is_post_type_archive() ) return;

    if ( ! is_admin() ) {
        $q->set( 'offset', 5);
    }

    remove_action( 'pre_get_posts', 'custom_pre_get_posts_query' );

} 
```

（基于[此片段](http://docs.woothemes.com/document/exclude-a-category-from-the-shop-page/)）

# c++ - 使用基于范围的 for 迭代图的边缘

> ID：15812663
> 
> 赞同：12
> 
> 时间：2013-04-04T13:27:37.433
> 
> 标签：c++, graph, c++11, foreach, boost-graph

我将图表示为 a `std::vector<std::unordered_set<unsigned>> neighbors`，也就是说，顶点是整数，并且对于每个顶点，我们保留一组它的邻居。因此，要走所有边缘，我会做类似的事情

```
for (unsigned u = 0; u < neighbors.size(); ++u)
    for (unsigned v : neighbors[u])
        if (u <= v)
            std::cout << u << ' ' << v << std::endl; 
```

现在，我希望能够从

```
for (auto e: g.edges())
    std::cout << e.first << ' ' << e.second << std::endl; 
```

where`g`来自封装`neighbors`向量的类。

然而，我尝试的一切似乎都非常复杂，我能想到的最好的版本有 50 行，很难看出它是正确的。有没有一种简单的方法可以做到这一点？

这是我的丑陋版本：

```
#include <iostream>
#include <unordered_set>
#include <vector>
typedef unsigned Vertex;
class Graph {
public:
    typedef std::unordered_set<Vertex> Neighbors;
    std::size_t numVertices() const { return neighbors_.size(); }
    Graph(std::size_t n = 0) : neighbors_(n) { }
    void addEdge(Vertex u, Vertex v) {
        neighbors_[u].insert(v);
        neighbors_[v].insert(u);
    }
    class EdgeIter {
        friend Graph;
    public:
        bool operator!=(const EdgeIter& other) { return u_ != other.u_; }
        void operator++() {
            do {
                ++it_;
                while (it_ == it_end_) {
                    u_++;
                    if (u_ >= neighbors_.size())
                        break;
                    it_     = neighbors_[u_].cbegin();
                    it_end_ = neighbors_[u_].cend();
                }
            } while (u_ < neighbors_.size() && *it_ < u_);
        }
        std::pair<Vertex, Vertex> operator*() { return {u_, *it_}; }
    private:
        EdgeIter(const std::vector<std::unordered_set<Vertex> >& neighbors, size_t u)
            : u_(u), neighbors_(neighbors) {
            if (u < neighbors_.size()) {
                it_     = neighbors_[u_].cbegin();
                it_end_ = neighbors_[u_].cend();
                while (it_ == it_end_) {
                    u_++;
                    if (u_ >= neighbors_.size())
                        break;
                    it_     = neighbors_[u_].cbegin();
                    it_end_ = neighbors_[u_].cend();
                }
            }
        }
        Vertex u_;
        const std::vector<std::unordered_set<Vertex> >& neighbors_;
        std::unordered_set<Vertex>::const_iterator it_, it_end_;
    };
    EdgeIter edgesBegin() const { return EdgeIter(neighbors_, 0); }
    EdgeIter edgesEnd()   const { return EdgeIter(neighbors_, neighbors_.size()); }
    class Edges {
    public:
        Edges(const Graph& g) : g_(g) { }
        EdgeIter begin() const { return g_.edgesBegin(); }
        EdgeIter end  () const { return g_.edgesEnd();   }
    private:
        const Graph& g_;
    };
    Edges edges() { return Edges(*this); }
    std::vector<Neighbors> neighbors_;
};
int main() {
    Graph g(5);
    g.addEdge(1, 2);
    g.addEdge(2, 3);
    g.addEdge(1, 3);    
    for (unsigned u = 0; u < g.numVertices(); ++u)
        for (unsigned v : g.neighbors_[u])
            if (u <= v)
                std::cout << u << ' ' << v << std::endl;
    for (auto e: g.edges())
        std::cout << e.first << ' ' << e.second << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-05T08:06:13.190

我强烈建议使用[**Boost.Graph**](http://www.boost.org/libs/graph/)库进行此类计算。主要原因是**图是复杂的数据结构**，您可以在其上运行更**复杂的算法**。即使您自己手工制作的数据结构可以正常工作，它也可能无法高效运行（就空间/时间复杂度而言），并且可能不支持您的应用程序所需的算法。

作为该库的可访问性的一个指示：我之前没有使用 Boost.Graph 的经验，但是花了大约 30 分钟才想出以下 30 行完全重现您的示例的代码。

```
#include <iostream>
#include <iterator>
#include <boost/graph/adjacency_list.hpp>

typedef unsigned V;
typedef std::pair<V, V> E;

// store neighbors in a std::set, vertices in a std::vector
typedef boost::adjacency_list<boost::setS, boost::vecS> Graph;

int main()
{
   // construct the graph
   E e[] = { E(1,2), E(2,3), E(1,3) };
   Graph g(std::begin(e), std::end(e), 5);

   std::cout << "iterate over vertices, then over its neighbors\n";
   auto vs = boost::vertices(g);
   for (auto vit = vs.first; vit != vs.second; ++vit) {
       auto neighbors = boost::adjacent_vertices(*vit, g);
       for (auto nit = neighbors.first; nit != neighbors.second; ++nit)
           std::cout << *vit << ' ' << *nit << std::endl;
   }

   std::cout << "iterate directly over edges\n";
   auto es = boost::edges(g);
   for (auto eit = es.first; eit != es.second; ++eit) {
       std::cout << boost::source(*eit, g) << ' ' << boost::target(*eit, g) << std::endl;
   }
} 
```

[LiveWorksSpace](http://liveworkspace.org/code/4rLZzZ$12)上的输出

当然，因为`boost::edges`返回 a `std::pair`，您[不能](https://stackoverflow.com/questions/6167598/why-was-pair-range-access-removed-from-c11)在边缘上使用基于范围的 for ，但这只是您可以通过定义自己的开始/结束函数来尝试修复的语法糖。重要的是您可以直接迭代边缘。

请注意，该数据结构为您提供了[**定义明确的时间和空间复杂度**](http://www.boost.org/libs/graph/doc/using_adjacency_list.html)`boost_adjacency_list`的边和顶点操作。上面的代码只是在不知道您真正想要什么样的操作的情况下重现您的示例。更改底层容器允许您对您的应用程序进行适当的权衡。[](http://www.boost.org/libs/graph/doc/using_adjacency_list.html)

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T22:57:03.643

一次无耻插队的机会！我有一个项目[**linq-cpp**](https://github.com/timothy-shields/linq-cpp)用于将 .NET LINQ 功能引入 C++11，这是一个完美的例子，说明它真正闪耀的地方。

使用它，您可以编写如下函数：

```
TEnumerable<std::pair<int, int>> EnumerateEdges(std::vector<std::unordered_set<int>>& neighbors)
{
    return Enumerable::FromRange(neighbors)
        .SelectManyIndexed([](std::unordered_set<int>& bNodes, int aNode)
        {
            return Enumerable::FromRange(bNodes)
                .Select([=](int bNode){ return std::make_pair(aNode, bNode); });
        });
} 
```

然后像这样使用它：

```
EnumerateEdges(neighbors).ForEach([](std::pair<int, int> edge)
{
    /* your code */
}); 
```

或者可能是这样的：

```
auto edges = EnumerateEdges(neighbors).ToVector(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T22:44:39.773

我相信您对图表的内部表示`std::vector<std::unordered_set<Vertex>>`，是使代码难以编写/阅读的原因。也许另一种表示形式（例如`std::set<std::pair<Vertex, Vertex>>`）会使您的代码更简单。但是，很难说，因为我们不确切知道`Graph`.

**无论如何，正如Zeta**所指出的，在`EdgeIter::operator !=()`. 例如，下面的代码：

```
int main() {

    Graph g(5);
    g.addEdge(0, 1);
    g.addEdge(0, 2);

    auto i1 = g.edges().begin();
    auto i2 = i1;
    ++i2;
    std::cout << std::boolalpha;
    std::cout << (i1 != i2) << std::endl;
} 
```

输出`false`。因此，代码考虑到了这一点，`i1`并且`i2`当它们明显不同时并没有什么不同。

**更新：**

这可能很明显，但这是一个更简单的版本，它使用不同的图形表示。但是，我强调**这可能并不令人满意**，具体取决于您的要求`Graph`（我不知道）：

```
#include <set>
#include <stdexcept>
#include <iostream>

typedef unsigned Vertex;

class Graph {

public:

    typedef std::pair<Vertex, Vertex> Edge;
    typedef std::set<Edge> Edges;

    void addEdge(Vertex u, Vertex v) {
      edges_.insert({u, v});
    }

    const Edges& edges() { return edges_; }

private:

    Edges edges_;
};

int main() {

    Graph g;

    g.addEdge(1, 2);
    g.addEdge(2, 3);
    g.addEdge(1, 3);    

    for (auto e: g.edges())
        std::cout << e.first << ' ' << e.second << std::endl;
} 
```**

# php - 当我在 joomla 2.5 中清除缓存时出现警告消息

> ID：15812665
> 
> 赞同：0
> 
> 时间：2013-04-04T13:27:51.877
> 
> 标签：php, joomla2.5

任何人都有解决方案..

警告：在拥有大量项目的网站上，这可能会占用大量资源！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:34:29.923

可能是它在 joomla2.5 清除缓存警告中帮助你

[http://docs.joomla.org/Help25:Site_Maintenance_Purge_Expired_Cache](http://docs.joomla.org/Help25:Site_Maintenance_Purge_Expired_Cache)

[http://www.inmotionhosting.com/support/edu/joomla-25/caching/clear-cache](http://www.inmotionhosting.com/support/edu/joomla-25/caching/clear-cache)

[http://brian.teeman.net/joomla/774-upgrading-to-joomla-2-5-some-warnings](http://brian.teeman.net/joomla/774-upgrading-to-joomla-2-5-some-warnings)

阅读并尝试...

# android - 在android中删除文本时如何更改编辑框焦点

> ID：15812668
> 
> 赞同：0
> 
> 时间：2013-04-04T13:27:58.807
> 
> 标签：android, android-edittext

我有 3 个用于密码字段的 EditText。每个只能包含一个数字。我在输入密码时实现了请求焦点。但是，当我删除数字时，如何将焦点从一个 EditText 更改为另一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:50:51.887

这是使用带有一个密码的 edittext 的最佳实践。

```
et1 = (EditText) findViewById(R.id.code1);
et2 = (EditText) findViewById(R.id.code2);
et3 = (EditText) findViewById(R.id.code3);

et1.addTextChangedListener(new TextWatcher() {

            @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {

        }

        @Override
        public void afterTextChanged(Editable s) {
            if (s.length() == 1) {
                et2.requestFocus();
            }

        }
    });

    et2.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {
            if (s.length() == 1) {
                et3.requestFocus();
            } else if (s.length() == 0) {
                et2.clearFocus();
                et1.requestFocus();
            }
        }
    }); 
```

您必须以这种方式进行管理。

# java - Java 中从 12 小时制到 24 小时制的时间转换

> ID：15812671
> 
> 赞同：1
> 
> 时间：2013-04-04T13:28:04.803
> 
> 标签：java, datetime, syntax, datetime-conversion

我在以下格式的字符串中有时间。

```
"MM/dd/yyyy hh:mm AM/PM" 
```

我需要以`24:00`小时格式获取时间

前任：

```
String str = "04/30/2013 10:20PM" 
```

我需要时间`22:20`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:32:09.013

您必须使用 SimpleDateFormat 进行任何类型的日期时间转换。
你可以试试这个：

```
import java.text.SimpleDateFormat;
import java.util.Date;

public class DateConversion {
   public void convertDate() {
      try{
       SimpleDateFormat df = new SimpleDateFormat("HH:mm");
       SimpleDateFormat pf = new SimpleDateFormat("MM/dd/yyyy hh:mm a");
       Date date = pf.parse("10:20PM");
       System.out.println(pf.format(date) + " = " + df.format(date));
        }catch(Exception e){
        // Do your exception handling over here.
        }
   }
} 
```

我猜这将解决你的问题。
这将给出一个输出：`22:20`

如果有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T13:38:51.660

使用[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)将字符串转换为 Date 对象，然后对其进行格式化。

```
String str = "04/30/2013 10:20PM";
Date date = new SimpleDateFormat("MM/dd/yyyy hh:mma").parse(str);
String result = new SimpleDateFormat("HH:mm").format(date); 
```

有关类似问题，请参见[此处。](https://stackoverflow.com/questions/3504986/java-date-time-format)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T13:46:05.747

使用“HH”而不是“hh”例如：

```
Date dNow = new Date( );
SimpleDateFormat ft =   new SimpleDateFormat ("MM/dd/yyyy HH:mm ");
System.out.println("Current Date: " + ft.format(dNow)); 
```

[在此链接中，特别是在“简单 DateFormat 格式代码：”](http://www.tutorialspoint.com/java/java_date_time.htm)中，您可以找到：

```
Character   Description               Example

h           Hour in A.M./P.M. (1~12)    12
H           Hour in day (0~23)          22 
```

# javascript - 在 Chrome 上登录 Facebook 失败。没有对话框和 Javascript 未捕获的异常

> ID：15812672
> 
> 赞同：1
> 
> 时间：2013-04-04T13:28:06.533
> 
> 标签：javascript, facebook, google-chrome, facebook-javascript-sdk

我有这个用于登录 Facebook 的 javascript：

```
 window.fbAsyncInit = function() {
        FB.init({
          appId      : '{{ app_id }}', // App ID
          status     : true, // check login status
          cookie     : true, // enable cookies to allow the server to access the session
          xfbml      : true // parse XFBML
        });

        FB.getLoginStatus(function(response) {
            if (response.status === 'unknown') {
                FB.login({
                    scope: 'friends_birthday,manage_pages'
                });
            }else{
                // Check permissions
                FB.api('/me/permissions',function(response) {
                    if (!('friends_birthday' in response.data[0] && 'manage_pages' in response.data[0])){
                         // Permissions not OK
                         FB.ui({
                            method: 'permissions.request',
                            perms: 'friends_birthday,manage_pages'
                            },function(response) {
                         });
                    }
                });
            }
        });

        FB.Canvas.setAutoGrow();
      };

      // Load the SDK Asynchronously
      (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk')); 
```

[没有出现任何对话框，我在all.js](http://connect.facebook.net/en_US/all.js)的第 76 行收到一个未捕获异常（显然名为“h”）的 javascript 错误。

这发生在 Chrome 而不是 Safari 上。是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T02:30:34.820

我认为这是因为您的 FB.login 功能错误，这里有一个小修复/示例：

```
 FB.login(function(responseAuth) {
     if (!responseAuth.authResponse) {
         console.log('Something went wrong...');
         return false;
     }
 }, { scope: 'email' }); 
```

# sql - 如何优化这个查询？

> ID：15812674
> 
> 赞同：2
> 
> 时间：2013-04-04T13:28:09.823
> 
> 标签：sql, sql-server-2005

我在 SQL Server 2005 中有一个`sales`包含列的表。`ID,paymentType,price`

```
create table sales(id int IDENTITY(1,1),
                   paymentType varchar(2), 
                   price decimal(10,2) default(0)
                  ) 
```

有没有办法在一个查询中做到这一点？

```
SELECT SUM(price) as TE 
FROM sales 
WHERE paymentType = 'E' 

SELECT SUM(price) as TC 
FROM sales 
WHERE paymentType = 'C' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T13:31:04.040

您可以使用 GROUP BY 按 paymentType 对您的值进行分组，并获得两条记录“E”和“C”的总和

```
SELECT paymentType,SUM(price) 
FROM sales 
WHERE paymentType = 'E' or paymentType = 'C'
GROUP BY paymentType 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T13:29:35.060

你可以使用`SUM()`and`CASE()`来实现你想要的。

```
SELECT  SUM(CASE WHEN paymentType = 'E' THEN price ELSE 0 END) TE,
        SUM(CASE WHEN paymentType = 'C' THEN price ELSE 0 END) TC
FROM    TableName
WHERE   paymentType IN ('E','C') 
```

`WHERE`需要过滤特定的付款，而不是扫描整个表格。您还需要在列上添加索引`paymentType`以进一步提高性能。

# c++ - 将一个 boost 属性树插入另一个

> ID：15812676
> 
> 赞同：2
> 
> 时间：2013-04-04T13:28:14.243
> 
> 标签：c++, insert, copy, boost-propertytree, subtree

我想将一个子树从一个复制`ptree`到另一个。
即
源代码：

```
<abc>
<question>
--some-subtree--
</question>
</abc> 
```

并生成：

```
<def>
<Version>1</Version>
<QueueQuestion>
--same-subtree-as-above--
</QueueQuestion>
</def> 
```

做类似的事情：

```
ptree genReply(const ptree &pt)
{
ptree ret;
ret.put("def","");
ptree &subtree=ret.find("def")->second;
subtree.put("Version",1);
...
...
...
const Xml::ptree &q=pt.find("abc.Question")->second;
subtree.put_child("QueueQuestion",q);
...
...
return ret;
} 
```

但是，我遇到了分段错误`subtree.put_child("QueueQuestion",q);`

有人知道吗？

# lisp - 如何定义惰性 AND

> ID：15812679
> 
> 赞同：3
> 
> 时间：2013-04-04T13:28:22.250
> 
> 标签：lisp, common-lisp, lazy-evaluation

我定义了以下宏：

```
(defmacro ~lazy (expression)
  `(lambda ()
     ,@expression))

(defgeneric force~ (value)
  (:method (value)
    value)
  (:method ((value function))
    (funcall value)))

(defmacro ~~ (expression)
  `(~lazy (force~ ,expression))) 
```

[...]以下宏定义了一个名为“NAME”的通用函数，并定义了一些标准方法。这应该像“REDUCE”一样工作，并强制所有惰性值在途中返回一个惰性值，即使它曾经遇到一个惰性值，否则返回一个非惰性值（由以“~”开头和结尾的宏表示）。

```
(defmacro ~lazy-reduce~ (name reduce-fun (arg-var args-var)
                         &body methods)
  (let ((first (gensym "first")))
    `(defgeneric ,name (,arg-var ,args-var)
       ,@(append
          (if (not (member `(,arg-var (,args-var cons))
                           methods
                           :key #'car
                           :test #'equal))
              `((:method (,arg-var (,args-var cons))
                  (let ((,first (first ,args-var)))
                    (if (functionp ,first)
                        (~~ (,reduce-fun (force~ ,first)
                                         (force~
                                          (,name ,arg-var
                                                 (rest ,args-var)))))
                        (,name (,reduce-fun ,arg-var ,first)
                               (rest ,args-var)))))))
          (if (not (member `((,arg-var function)
                             ,args-var)
                           methods
                           :key #'car
                           :test #'equal))
              `((:method ((,arg-var function)
                          ,args-var)
                  (~~ (,name (force~ ,arg-var)
                             ,args-var))))))
       ,@(mapcar (lambda (method)
                   (cons :method method))
                 methods)))) 
```

现在我定义 ~_AND~ 像这样：

```
(~lazy-reduce~ ~_and~ and (val vals)
   (((val null)
     vals)
    nil)
   ((val (vals null))
    val)) 
```

打电话

```
(~_and~ t (list 2)) 
```

工作正常并返回'2'，正如预期的那样

```
(force~ ~_and~ t (list (~ 2))) 
```

只返回“T”。

我不知道为什么会这样，它使我无法简洁地定义“~FIND-IF”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:47:59.630

我发现了我的错误：~_AND~ 的第一种方法如下所示：

```
(:method (val (vals cons))
 (let ((first (first vals)))
   (if (functionp first)
       (~~ (and (force~ first)
                (force~ (~_and~ val (rest vals)))))
       (~_and~ (and val first)
               (rest vals))))) 
```

（这可以通过 MACROEXPAND-1 在给定的 ~_AND~ 定义上看到）

这意味着显示的调用被（大致）评估为

```
(and (force~ (~ 2))
     T) 
```

如所见，这将返回“T”。

# python - 如何告诉 bash 在 Python 脚本中专门转义通配符

> ID：15812682
> 
> 赞同：1
> 
> 时间：2013-04-04T13:28:37.220
> 
> 标签：python, bash, shell, wildcard

我有一个脚本。它需要参数，但我希望它在接收到字符串“ `*`”时自动完成到列表变量中的匹配字符串。

不幸的是，如果用户不使用反斜杠转义星号来转义通配符，这是不可能的：

```
foo.py ba\*  # Will expand to "bar" 
```

不这样做会导致 bash 将其扩展为工作目录中的文件，然后将其传递给我的脚本。

告诉 bash 不要自动扩展星号并将其传递给我的脚本需要什么。也许是安装脚本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T13:33:16.093

```
set -o noglob 
```

将阻止 bash 扩展`*`.

删除`set +o noglob`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T13:34:01.610

简单地这样称呼它以在 bash 中转义：

```
foo.py 'ba*' 
```

# loops - 用两个计数器循环

> ID：15812683
> 
> 赞同：1
> 
> 时间：2013-04-04T13:28:37.623
> 
> 标签：loops, sas

以下是一些 C 代码。我如何在 sas 中做同样的事情？

```
 For(i=30, j=1; i<=41, j<=12; i++, j++)
    (
    closure(i,j) /*calling function with input parameters I and j */
    ); 
```

我基本上想使用带有两个计数器 I 和 J 的循环来执行以下宏调用

```
%closure(30,201201);
%closure(31,201202);
%closure(32,201203);
%closure(33,201204);
%closure(34,201205);
%closure(35,201206);
%closure(36,201207);
%closure(37,201208);
%closure(38,201209);
%closure(39,201210);
%closure(40,201211);
%closure(41,201212); 
```

请注意，我不想使用嵌套循环。提示表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:39:47.043

在 SAS 中执行此操作取决于数据的结构方式。可以这样做：

```
%do i = 1 to 12;
  %closure(%eval(29+i),%eval(201200+i));
%end; 
```

这有点奇怪，但它应该可以正常工作。

您也可以在 %closure 宏中执行此操作。传递 i 然后确定宏内部其他参数的值，如果它们始终具有这种关系。如果它们总是有*某种*关系，但 2012 和 18 部分是可变的，那么您有几种选择：

**在此步骤之前将 2012 和 29 定义为宏变量，并在代码中将它们替换为此类。**

```
%let year=2012;
%let startrec=29;
%do i = 1 to 12;
  %closure(%eval(&startrec.+&i.),%eval(&year.00+&i.));
%end; 
```

**使用日期函数来确定 j 的值，如果它不总是 01-12。**

```
%closure(30,%sysfunc(intnx(month,'01JUN2011'd,&i.-1))) 
```

（您可能希望将结果格式化为 YYYYMM 格式，或者您可能也可以使用日期结果，具体取决于 %closure）

**在数据集中定义所有这些术语，并从数据集中调用宏。**

```
data to_call;
input i j;
datalines;
30 201201
31 201202
.... ; 
run;

proc sql;
 select cats('%closure(',i,',',j,')') into :calllist separated by ' ' from to_call;
quit;

&calllist. 
```

这是一种更“SAS”的做事方式，使流程数据驱动。当 i 和 j 参数作为数据元素存储在某处（例如，在控制表中，或从某些其他数据源派生）时最常用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:42:48.590

所以如果你想

*   %关闭​​（30,201201）；
*   %关闭​​（31,201202）；
*   %关闭​​（32,201203）；
*   %关闭​​（33,201204）；
*   %关闭​​（34,201205）；
*   %关闭​​（35,201206）；
*   %关闭​​（36,201207）；
*   %关闭​​（37,201208）；
*   %关闭​​（38,201209）；
*   %关闭​​（39,201210）；
*   %关闭​​（40,201211）；
*   %关闭​​（41,201212）；

那么您最好计算 J 的值并将其带到 201200 aur 附近。或者您应该以 201201 开始 j 循环并以 201212 结束它，只需执行

对于(i=30, j=201201; i<=41, j<=201212; i++, j++)

(

```
 closure(i,j) 
```

);

# sql - SQL Select 案例创造新价值

> ID：15812695
> 
> 赞同：0
> 
> 时间：2013-04-04T13:28:54.093
> 
> 标签：sql, select

大家好，我很抱歉，但我不知道我应该如何称呼这个问题。

我有一个包含信息的表，这些信息是从创建行到最后一次更新所用的时间，这些显示在以下列中：

```
CREATED
LAST_UPD 
```

它们之间的时间差显示在单独的列中，称为：

```
SOLVED_SEC 
```

（时间以秒为单位）

现在我想从这个表中收集一些数据，但是如果 CREATED （这是一个日期）在我们公司的营业时间之外，SOLVED_SEC 应该在我的

我们的营业时间存在于名为 KS_DRIFT.SYS_DATE_KS 的表中。

此表有一个名为：THIS_DATE_OPENING 的列。

我在想我可以这样计算新的求解时间：

```
THIS_DATE_OPENING-LAST_UPD 
```

但是我不太确定如何做到这一点

以下是我现在拥有的 SQL：

```
SELECT   
    TIDSPUNKT, LAST_UPD, AA.CREATED,
    TRUNC(AA.SOLVED_SEC/60/60,2) as LØST_TIME,
    //this is my attempt
    CASE 
        WHEN AA.CREATED >= CC.THIS_DATE_CLOSING 
          THEN LØST_TIME = (LAST_UPD-CC.THIS_DATE_OPENING) AS LØST_TIME 
    END,
    COUNT(CASE WHEN AA.LAST_UPD >= CC.THIS_DATE_CLOSING THEN 1 END) as AFTER_CLOSING,
    COUNT(CASE WHEN STATUS ='Færdig' THEN 1 END)as Completed_Callbacks
FROM     
    KS_DRIFT.NYK_SIEBEL_CALLBACK_AGENT_H_V AA 
INNER JOIN 
    KS_DRIFT.V_TEAM_DATO BB ON AA.TIDSPUNKT = BB.DATO 
RIGHT JOIN 
    KS_DRIFT.SYS_DATE_KS CC ON AA.TIDSPUNKT = CC.THIS_DATE
WHERE    
    AA.TIDSPUNKT BETWEEN '2012-04-01' AND '2013-04-04'
    AND AA.AFSLUTTET_AF = BB.INITIALER
GROUP BY 
    AA.TIDSPUNKT, LØST_SEKUNDER, LAST_UPD, AA.CREATED 
```

可悲的是，这不起作用。

我的问题是，如果 CREATED > THIS_DATE_CLOSED ，如何更改 SOLVED_SEC 的值？

如果您需要更多信息，请随时发表评论。

**更新**

我尝试了以下方法：

```
CASE WHEN (AA.CREATED >= CC.THIS_DATE_CLOSING) THEN (AA.LAST_UPD-CC.THIS_DATE_OPENING) END AS SOVLED_AFTER_OPENING 
```

但是我得到

```
"not a GROUP BY expression" 
```

**更新 2**

我的 SQL 语句现在看起来像这样：

```
 SELECT   TIDSPUNKT,
         AA.CREATED,
         LAST_UPD,
         AA.AGENTGRUPPE,
         TRUNC(AA.LØST_SEKUNDER/60/60,2) as LØST_TIME,
         'LØST_TIME' = CASE WHEN AA.CREATED >= CC.THIS_DATE_CLOSING THEN DATEDIFF(ss, CC.THIS_DATE_OPENING, LAST_UPD) END,
         COUNT(CASE WHEN AA.AGENTGRUPPE not in('Hovednumre','Privatcentre','Forsikring','Hotline','Stabe','Kunder','Erhverv','NykreditKunder','Servicecentret') THEN 1 END) as CALLBACKS_OUTSIDE_OF_KS,
         COUNT(CASE WHEN AA.CREATED >= CC.THIS_DATE_CLOSING THEN 1 END) as AFTER_CLOSING,
         COUNT(CASE WHEN STATUS ='Færdig' THEN 1 END)as Completed_Callbacks
FROM     KS_DRIFT.NYK_SIEBEL_CALLBACK_AGENT_H_V AA 
         INNER JOIN KS_DRIFT.V_TEAM_DATO BB ON AA.TIDSPUNKT = BB.DATO 
         RIGHT JOIN KS_DRIFT.SYS_DATE_KS CC ON AA.TIDSPUNKT = CC.THIS_DATE
WHERE    AA.TIDSPUNKT BETWEEN '2013-04-01' AND '2013-04-04'
AND      AA.AFSLUTTET_AF = BB.INITIALER
GROUP BY AA.TIDSPUNKT, LAST_UPD, AA.CREATED, AA.LØST_SEKUNDER, 
         AA.AFSLUTTET_AF, AA.AGENTGRUPPE 
```

但是我在预期的地方找不到 From 关键字

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:41:44.250

在尝试计算时间差异时，您需要使用 DATEDIFF 函数。

例如：

```
SELECT DATEDIFF(ss, THIS_DATE_OPENING, LAST_UPD); 
```

其中“ss”表示秒。第一个参数是您要计算的日期部分。比如几秒钟、几分钟或几天或其他什么。

您可以在此处找到文档[http://msdn.microsoft.com/en-us/library/aa258269(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa258269(v=sql.80).aspx)

如果我没有正确理解您的问题，请告诉我。

我也刚刚注意到您正在尝试这样做：

```
CASE WHEN AA.CREATED >= CC.THIS_DATE_CLOSING THEN LØST_TIME =(LAST_UPD-CC.THIS_DATE_OPENING) AS LØST_TIME END 
```

试试这个：

```
'L0ST_TIME' = CASE WHEN AA.CREATED >= CC.THIS_DATE_CLOSING THEN DATEDIFF(ss, CC.THIS_DATE_OPENING, LAST_UPD) END 
```

高温高压

# html - 来自外部网站（例如谷歌）时强制弹出

> ID：15812699
> 
> 赞同：0
> 
> 时间：2013-04-04T13:28:58.817
> 
> 标签：html, asp-classic, popup

我在英国西北部为一家餐厅指南工作，我们基本上有特色餐厅（每月支付订阅费用的餐厅）和非特色餐厅（获得基本免费列表的餐厅）。

我们希望在非特色餐厅上出现某种弹出窗口，但前提是它们来自外部站点，例如 Google。

所以步骤是：1）用户去谷歌并输入“无特色餐厅的名称” 2）我们公司提出了该餐厅的基本列表 3）用户点击链接，但随后弹出特色餐厅

但是，如果用户来自外部站点，我们只需要显示弹出窗口。因此，如果它们来自我们网站的内部，则不会显示弹出窗口。

我们在工作中使用 ASP，我认为它可能需要传递某种变量，或者可能与 cookie 有关，但我不是 ASP 方面的专家。

希望有人可以帮助解决这个问题:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:44:45.243

要查看用户来自哪里，您可以尝试：

```
<%=Request.ServerVariables("HTTP_Referer")%> 
```

这将包含引用 URL。如果您想在后续页面上使用它，您当然必须将其存储在 cookie 或会话变量中。

# php - php switch 案例为什么输入错误的url时我的默认页面不会触发

> ID：15812719
> 
> 赞同：1
> 
> 时间：2013-04-04T13:29:42.753
> 
> 标签：php, html

嗨，我正在处理页面切换代码，由于某种原因，默认页面似乎没有加载，有人可以帮忙吗？目前我可以输入一个随机 URL，但它只是显示找不到页面。

默认显示会触发 PHPMyAdmin 页面错误
，即`views/404.php`文件夹。
但它没有。我似乎可以理解为什么它没有。

```
<?php
//begin the webpage
//index page selector placed into an array for options for the user to select

//session started recording attributes
session_start();

error_reporting(0);

//including other view class and model class function to be used on this page
include 'views/viewClass.php';
include 'classes/modelClass.php';

class PageSelector {
    public function run() {
        //has the user decided which page to go to?
        //if not then we will direct him to the homepage
        if(!$_GET['page']) {
            $_GET['page'] = 'Home';
        }

        //extending a new model class
        $model = new Model;

        //get the page information
        $pageInfo = $model -> getPageInfo($_GET['page']);

        //select which page to include when the user clicks
        //on either register/home/my account/my bids/my sell/completed auctions/edit etc..etc..etc..
        switch($_GET['page']) {

            case 'Register':
                include 'views/register.php';
                $view = new HomeView($pageInfo, $model);
                break;

            case 'Home':
                include 'views/homeView.php';
                $view = new HomeView($pageInfo, $model);
                break;

            case 'My Account':
                include 'views/myaccount.php';
                $view = new myaccount($pageInfo, $model);
                break;

            case 'My Bids':
                include 'views/mybids.php';
                $view = new Mybids($pageInfo, $model);
                break;

            case 'My Sell':
                include 'views/mysell.php';
                $view = new mysell($pageInfo, $model);
                break;

            case 'Completed Auctions':
                include 'views/checkout.php';
                $view = new checkout($pageInfo, $model);
                break;

            case 'editProduct':
                include 'views/editProductView.php';
                $view = new EditProductView($pageInfo, $model);
                break;

            case 'addProduct':
                include 'views/addProductView.php';
                $view = new AddProductView($pageInfo, $model);
                break;

            case 'deleteProduct':
                include 'views/deleteProductView.php';
                $view = new DeleteProductView($pageInfo, $model);
            break;

            case 'deleteUser':
                include 'views/deleteUserView.php';
                $view = new DeleteUserView($pageInfo, $model);
            break;

            case 'search':
                include 'views/search.php';
                $view = new search($pageInfo, $model);
            break;   

            case 'product':
                include 'views/productView.php';
                $view = new ProductView($pageInfo, $model);
            break;

            default: 
                include 'views/404.php';
                $view = new error($pageInfo,$model);

        }
        echo $view -> displayPage();

    }    

}

$pageSelect = new PageSelector();
$pageSelect -> run();
//calls the selector to run after user has selected. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:51:05.327

I am going to assume that you are properly routing the 404s to this file. What is happening is that because the 404 doesn't have a $_GET['page'] your code is setting itself to be home and loading the home page.

Assuming this is the index.php file I would add a conditional to check for this and change the default to a case 404\. This is the new code in full.

```
<?php
//begin the webpage
//index page selector placed into an array for options for the user to select

//session started recording attributes
session_start();

error_reporting(0);

//including other view class and model class function to be used on this page
include 'views/viewClass.php';
include 'classes/modelClass.php';

class PageSelector {
    public function run() {
    //Check to make sure they are loading a legit page first
    if($_SERVER['PHP_SELF'] != 'index.php'){
        $_GET['page'] = '404';
    }
    //has the user decided which page to go to?
    //if not then we will direct him to the homepage
    if(!$_GET['page']) {
        $_GET['page'] = 'Home';
    }

    //extending a new model class
    $model = new Model;

    //get the page information
    $pageInfo = $model -> getPageInfo($_GET['page']);

    //select which page to include when the user clicks
    //on either register/home/my account/my bids/my sell/completed auctions/edit etc..etc..etc..
    switch($_GET['page']) {

        case 'Register':
            include 'views/register.php';
            $view = new HomeView($pageInfo, $model);
            break;

        case 'Home':
            include 'views/homeView.php';
            $view = new HomeView($pageInfo, $model);
            break;

        case 'My Account':
            include 'views/myaccount.php';
            $view = new myaccount($pageInfo, $model);
            break;

        case 'My Bids':
            include 'views/mybids.php';
            $view = new Mybids($pageInfo, $model);
            break;

        case 'My Sell':
            include 'views/mysell.php';
            $view = new mysell($pageInfo, $model);
            break;

        case 'Completed Auctions':
            include 'views/checkout.php';
            $view = new checkout($pageInfo, $model);
            break;

        case 'editProduct':
            include 'views/editProductView.php';
            $view = new EditProductView($pageInfo, $model);
            break;

        case 'addProduct':
            include 'views/addProductView.php';
            $view = new AddProductView($pageInfo, $model);
            break;

        case 'deleteProduct':
            include 'views/deleteProductView.php';
            $view = new DeleteProductView($pageInfo, $model);
        break;

        case 'deleteUser':
            include 'views/deleteUserView.php';
            $view = new DeleteUserView($pageInfo, $model);
        break;

        case 'search':
            include 'views/search.php';
            $view = new search($pageInfo, $model);
        break;   

        case 'product':
            include 'views/productView.php';
            $view = new ProductView($pageInfo, $model);
        break;

        case '404': 
            include 'views/404.php';
            $view = new error($pageInfo,$model);
        break;

        }
        echo $view -> displayPage();

    }    

}

$pageSelect = new PageSelector();
$pageSelect -> run();
//calls the selector to run after user has selected. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:39:17.063

尝试改变

```
if(!$_GET['page']) { 
```

至

```
if(!isset($_GET['page']) || $_GET['page'] == '') { 
```

# javascript - 检测伪类：来自javascript的无效

> ID：15812721
> 
> 赞同：12
> 
> 时间：2013-04-04T13:29:48.243
> 
> 标签：javascript, html, css, pseudo-class

有没有办法通过Javascript检测元素`:invalid`上伪类的“外观” ？`input`

换句话说，当`:invalid`伪类出现在`input`元素上时，如何触发一些Javascript代码运行？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-04T13:36:43.447

有一个可以触发的无效事件可以监听。

> 当可提交元素已被检查且不满足其约束时，将触发 invalid 事件。在提交其所有者表单之前或在调用元素或其所有者表单的 checkValidity() 之后检查可提交元素的有效性。

[https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/invalid](https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/invalid)

您还可以访问一些属性来检查元素的有效性，如果这更多是您所追求的。

> `.validity.valid`
> 
> 该元素满足所有约束验证，因此被认为是有效的。

[https://developer.mozilla.org/en-US/docs/DOM/ValidityState](https://developer.mozilla.org/en-US/docs/DOM/ValidityState)

编辑：自从我回答了这个问题后，我学到了一些东西......

这`.validity.valid`实际上是约束[Constraint Validation API](http://dev.w3.org/html5/spec-preview/constraints.html#the-constraint-validation-api)的一部分，并且对它的支持充其量只是[参差不齐，这太糟糕了（该 API 中有很多很棒的东西）。](http://caniuse.com/#feat=form-validation)

但是，似乎运行良好的是[`querySelectorAll(':invalid')`](https://developer.mozilla.org/en-US/docs/Web/API/Document.querySelectorAll)，它返回当前无效的所有表单元素的非活动 NodeList。您可以`addEventListener('change'`在表单元素上调用 ..etc 等，并在触发时查询有效性。

# java - 确定会话无效的用户

> ID：15812725
> 
> 赞同：1
> 
> 时间：2013-04-04T13:29:53.527
> 
> 标签：java, session, jakarta-ee, invalidation

使用 JBoss 5.1.0 GA。在我的应用程序的 web.xml 中，我定义了这样的会话无效超时：

```
<session-config>
    <session-timeout>5</session-timeout>
</session-config> 
```

我怎样才能找出哪个用户的会话无效？

我尝试使用 HttpSessionListener 拦截 sessionDestroyed 事件并使用

```
HttpServletRequest request = (HttpServletRequest)PolicyContext.getContext("javax.servlet.http.HttpServletRequest"); 
```

但本金始终为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:33:11.323

一种方法是在登录应用程序后为该用户创建用户名时将用户名存储在会话中。

```
HttpSession session = request.getSession(true);
session.setAttribute("USER_NAME", "xyz"); 
```

在使会话无效之前获取用户。

```
session.getAttribute("USER_NAME"); 
```

# java - JSF 上的动态字段

> ID：15812735
> 
> 赞同：0
> 
> 时间：2013-04-04T13:30:21.253
> 
> 标签：java, jsf, jsf-2, facelets, dynamic-forms

我需要在加载 jsf 页面之前执行 Web 服务（方法）调用。该调用将返回必须在我的 jsf 页面上显示的输入字段列表。用户可以填写表格，然后单击下一步，我需要将在表格中输入的值发送回另一个 Web 服务（方法）。我的方法是为 jsf 页面创建一个请求范围的 bean（由空白表单和对 bean 的绑定组成），并在我的表单方法的 setter 方法中执行 Web 服务调用并动态创建 UIInput 字段

```
//call web service
//Loop
    UIInput input = new HtmlInputText();
    //set unique Id
    form.getChildren().add(input);
//End Loop 
```

它确实创建了输入字段，但是如果我执行浏览器返回或刷新它会继续添加输入字段。很明显我的方法是错误的。
我还发现，当我尝试在提交操作上获取这些动态创建的输入字段的值时，例如

```
List<UIComponent> dynamicFields = form.getChildren();
 for(int i=0;i<form.getChildCount();i++){   
     if("javax.faces.Input".equals(componentFamily)){
        UIInput input = (UIInput)dynamicFields.get(i);
        System.out.println("Input Field: ID = "+input.getId() + " , Value="+ input.getValue());
      }
 } 
```

字段的 ID 打印正确，但值始终为空。显然做错了。

请让我知道我何时何地创建字段以及如何捕获这些值 PS Am 使用 JSF 2.0、Jdeveloper、Glassfish 和/或 Weblogic Server

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T00:18:02.967

根据您的问题，我无法确定您希望从您的网络服务中获得什么样的数据，以及您希望在什么样的组件中呈现它。我在下面的回答假设您将始终收到一个字符串列表，并且您将在文本框中显示它们。

一种可能的方法是调用您的 Web 服务并在 @PostConstruct 方法中获取数据，将此数据放入列表中，然后在数据表中呈现数据。代码如下。

豆：

```
@ManagedBean(name="bean")
@ViewScoped
public class YourBean implements Serializable {

private static final long serialVersionUID = 1L;

private List<String> values = new ArrayList<String>();

   //The method below @PostConstruct is called after the bean is instantiated
   @PostConstruct
   public void init(){
          //fetch data from source webservice, save it to  this.values
   }

   public void save(){
        for(String s: this.values)
            // send s to destination webservice
   }

   public List<String> getValues(){
         return this.values;
   }  

   public void setValues(List<String> values){
         this.values = values;
   }       

} 
```

XHTML 摘录：

```
<h:form>
     <h:dataTable value="#{bean.values}" var="s">
          <h:column>
                <h:inputText value="#{s}" />
          </h:column>
     </h:dataTable>
     <h:commandButton value="Save" action="#{bean.save}" />
</h:form> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T07:02:26.957

这个问题是因为你绑定的bean的范围如果它是@RequestScoped这意味着每次你刷新或调用页面时你将再次调用post constructor（@PostConstuct）方法，所以创建的工作再次，对于输入字段的空值，您应该将其添加到每个输入字段值表达式中以将值存储在其中。

```
 private String inputValue; //setter() getter()
    UIInput input = new HtmlInputText(); 

   @PostCostruct
   public void addInput()
     {
        // your previos create and add input fields to the form + setting value expression
        Application app = FacesContext.getCurrentInstance().getApplication();  
        input.setValueExpression("value",app.getExpressionFactory().createValueExpression(
                   FacesContext.getCurrentInstance().getELContext(), "#{bean.inputValue}", String.class));
     } 
```

如果您使用绑定，则正确答案不要使用请求范围使用会话范围，它将与您一起使用，并在检索值时获取不为空的数据。

# python - Python：函数 print() 中的语法无效

> ID：15812739
> 
> 赞同：4
> 
> 时间：2013-04-04T13:30:30.577
> 
> 标签：python, syntax, printing

我正在使用 Python 2.7。当我尝试将简单字符串打印到文件时，出现以下错误：

语法错误：无效的元组

检测元组时出现语法错误

最小的例子：

```
fly = open('workfile', 'w')
print('a', file=fly) 
```

通过工作写入同一个文件`fly.write('a')`就好了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T13:31:59.523

您在 Python 2 中使用 Python 3 语法。

在 Python 2 中，它是这样的：

```
print >> fly, 'a' 
```

但是，一个更好的主意是这样做：

```
from __future__ import print_function 
```

如果您使用的是 Python 2.6 或 2.7，它将启用 Python 3 语法。

另见：[http ://docs.python.org/2/library/functions.html#print](http://docs.python.org/2/library/functions.html#print)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:36:57.780

检查[文档](http://docs.python.org/2/library/functions.html#print)

> 注意 此函数通常不能作为内置函数使用，因为名称 print 被识别为 print 语句。要禁用该语句并使用 print() 函数，请在模块顶部使用此未来语句： from **future** import print_function

# javascript - 如何改进javascript

> ID：15812754
> 
> 赞同：-7
> 
> 时间：2013-04-04T13:31:06.910
> 
> 标签：javascript

一周前，我从 lynda Javascript 基本培训开始学习 Javascript。我了解最多的东西，但是当我想构建一些东西时，我卡住了，不知道该怎么做。我应该怎么做才能提高自己？谢谢你们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T13:34:19.470

![在此处输入图像描述](https://i.stack.imgur.com/EiZyY.jpg)

^(这是为了搞笑，一点也不冒犯)

互联网上有大量的 ECMAscript 教程，去吧。如果您对 ECMAscript 语法有任何疑问，请使用[MDN](https://developer.mozilla.org/de/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:34:48.470

您是否考虑过 W3Schools JavaScript 教程？它教你 JavaScript 还可以让你在他们的编辑器中尝试代码，所以你可以边做边编程。这些示例从底层主题到更高级的主题。该教程可以在这里找到：[W3 Schools JavaScript 教程](http://www.w3schools.com/js/default.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:35:04.943

请参阅我上周对类似问题的回答。在你问之前搜索:-)

[https://stackoverflow.com/questions/15637058/learn-web-apps-in-js/15638348#15638348](https://stackoverflow.com/questions/15637058/learn-web-apps-in-js/15638348#15638348)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T13:38:34.880

[codecademy.com](http://www.codecademy.com/)上的练习非常好，让我很有动力。

# java - 如何从 jar 文件中 @autowire 实现类？

> ID：15812760
> 
> 赞同：1
> 
> 时间：2013-04-04T13:31:23.033
> 
> 标签：java, spring, autowired

我有一个简单的类，想使用 @Autowired 从 numberHandler 对象触发方法。但是该对象为空。有任何想法吗？

```
@Component
public class Startup implements UncaughtExceptionHandler {

@Autowired
private MyHandler myHandler;

public static void main(String[] args) {

    startup = new Startup();
    startup(args);

}

public static void startup(String[] args) {

    startup = new Startup();

}
private void start() {
     ApplicationContext context = new ClassPathXmlApplicationContext("applicationContext.xml");
     myHandler.run(); //NULL
 } 
```

应用程序上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p"
   xmlns:util="http://www.springframework.org/schema/util"
   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.0.xsd">

<context:annotation-config />
<context:component-scan base-package="com.my.lookup"/> 
```

和实现类：

```
package com.my.lookup;

@Component
public class MyHandler implements Runnable {

private static Logger LOGGER = LoggerFactory.getLogger(MyHandler.class);

@Override
public void run() {

    // do something
} 
```

我是否必须使用 ClassPathXmlApplicationContext() 在主类中显式定义 applicationContext.xml，或者 Spring 是否可以在我的类路径中自动识别它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:42:23.470

问题是您正在实例化`Startup`不受 Spring 管理的类。您需要`Startup`从您的`ApplicationContext`. 如下更改您的主要方法应该可以...

```
public static void main(String[] args) {
    ApplicationContext context = new ClassPathXmlApplicationContext("applicationContext.xml");
    startup = context.getBean(Startup.class);
    startup.start();
}

private void start() {
    myHandler.run();
} 
```

# c++ - 未解析的外部符号 C++ Embedded

> ID：15812761
> 
> 赞同：0
> 
> 时间：2013-04-04T13:31:25.510
> 
> 标签：c++, linker, embedded, unresolved-external

我在这个问题上被困了几天，即使谷歌回复了很多，我也找不到我的问题的答案，这似乎是一个相当抽象的问题。

这是我在 H 中的代码：

```
struct DISPLAYLINE_t {
         char  *text;
         bool isWhite;
         void set(char *txt, bool iswhite){text = txt; isWhite = iswhite;};
};

struct DISPLAY {   
    static DISPLAYLINE_t line1,line2,line3,line4; 
    void clear(){//dostuff};
}; 
```

当我尝试从我的 Main 访问时：

```
DISPLAY::line1.set(string, FALSE); 
```

我收到以下错误：

> 错误 LNK2019：未解析的外部符号“公共：静态结构 DISPLAYLINE_t DISPLAY::line1”(?line1@DISPLAY@@2UDISPLAYLINE_t@@A) 在 WinMain 函数中引用

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:34:36.963

您必须在全局命名空间范围内为您的静态数据成员提供*定义*（至少对于您在代码中使用 odr 的那些）：

```
DISPLAYLINE_t DISPLAY::line1;
DISPLAYLINE_t DISPLAY::line2;
DISPLAYLINE_t DISPLAY::line3;
DISPLAYLINE_t DISPLAY::line4; 
```

[这个活生生的例子](http://liveworkspace.org/code/GmHGy%2482)展示了你应该如何修复你的程序。

# php - XMLRPC call error

> ID：15812766
> 
> 赞同：0
> 
> 时间：2013-04-04T13:31:32.710
> 
> 标签：php, xml-rpc, xmlrpclib, xmlrpcclient

I'm having problem during XMLRPC call. The code is following:

```
$msg = new xmlrpcmsg(
    "contact.search",
    array(
        //Set user id
        new xmlrpcval($tableID, "int"),
        new xmlrpcval(
        array(
            "email"=> new xmlrpcval($searchEmail, "string"),
        ),"struct"
    )
));

$response = $xmlrpc->send($msg);
var_dump($row);
var_dump($response); 
```

When call happens, I get following error message (var_dumped):

```
public 'val' => int 0
  public 'valtyp' => null
  public 'errno' => int 2
  public 'errstr' => string 'Invalid return payload: enable debugging to examine incoming payload xmlrpc element I8 cannot be child of VALUE' (length=111)
  public 'payload' => null
  public 'hdrs' => 
```

Value of `$tableID=3`.
Value of `$searchEmail="exampl@fooo.com"`

**What I'm doing wrong?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:54:10.657

任何有同样问题的人都应该在[这个](http://sourceforge.net/p/phpxmlrpc/bugs/86/)链接上下载 xmlrpc.inc 库的更新版本。

干杯!

# android - 保持对话框/活动始终在顶部

> ID：15812777
> 
> 赞同：3
> 
> 时间：2013-04-04T13:32:08.100
> 
> 标签：android, android-activity, dialog, android-widget

如何将对话框/活动保持在其他活动之上，无论用户是否在活动之间切换，它都应该一直处于活动状态。

![查看显示、隐藏按钮](https://i.stack.imgur.com/VbmwX.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:15:46.337

您可以使用相对布局作为父级，通过使用相对布局，您可以重叠其他布局。因此，您必须使用相对布局的两个子布局。在一个孩子中，您将弹出窗口，而在另一种布局中，您必须不断更改布局..

如果您希望跨多个活动进行此操作。您必须创建一个单独的布局并将其包含在所有活动中，并创建一个界面来处理弹出窗口中的按钮事件。

或者

您可以创建一个具有上述布局的基本活动，并将该活动扩展到您想要此布局的所有其他活动中。

问候， 尤维

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:24:44.007

Personnaly，我会做这样的事情：

1）创建一个从 DialogFragment 扩展的类：

```
 public class MyDialogFragment extends DialogFragment{
        public static final int DIALOG_TYPE1 = 1;

        public static MyDialogFragment newInstance(int dialogType) {
                MainDialogFragment frag = new MainDialogFragment();
                Bundle args = new Bundle();
                args.putInt("type", dialogType);
                frag.setArguments(args);
                return frag;
            }

        @Override
        public Dialog onCreateDialog(Bundle savedInstanceState) {
                super.onCreateDialog(savedInstanceState);
                int type = getArguments().getInt("type");
                Dialog result = null;
                switch (type) {
                case DIALOG_TYPE1:
                              result = new AlertDialog.Builder(getActivity())
                                 .setTitle("TITLE")
                                 .setMessage("MESSAGE")
                                 .setPositiveButton(android.R.string.ok, null)
                                 .create();
                              break;
                        default:
                              break;
                }
                return result;
         }
} 
```

2）然后在您的活动中：

```
DialogFragment dialog = MyDialogFragment.newInstance(MyDialogFragment.DIALOG_TYPE1);
dialog.show(getFragmentManager(), "DIALOG"); 
```

3）然后您将下一个活动可以获取并再次显示的对话框类型放入捆绑包中。

# python - Python列表理解 - 想要避免重复评估

> ID：15812779
> 
> 赞同：62
> 
> 时间：2013-04-04T13:32:08.370
> 
> 标签：python, list-comprehension, code-readability

我有一个列表理解，它近似于：

```
[f(x) for x in l if f(x)] 
```

其中 l 是一个列表， f(x) 是一个返回列表的昂贵函数。

我想避免对 f(x) 的每个非空出现两次评估 f(x)。有没有办法在列表理解中保存它的输出？

我可以删除最终条件，生成整个列表，然后修剪它，但这似乎很浪费。

**编辑**：

提出了两种基本方法：

内部生成器理解：

```
[y for y in (f(x) for x in l) if y] 
```

或记忆。

我认为对于上述问题，内部生成器理解是优雅的。实际上，我简化了问题以使其清楚，我真的想要：

```
[g(x, f(x)) for x in l if f(x)] 
```

对于这种更复杂的情况，我认为记忆化会产生更清晰的最终结果。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-04-04T13:35:32.507

```
[y for y in (f(x) for x in l) if y] 
```

会做。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-04T13:40:01.963

一个解决方案（如果你有重复的 x 值最好）是**记住**函数 f，即创建一个包装函数来保存调用函数的参数并保存它，而不是在询问相同的值时返回它.

一个非常简单的实现如下：

```
storage = {}
def memoized(value):
    if value not in storage:
        storage[value] = f(value)
    return storage[value]

[memoized(x) for x in l if memoized(x)] 
```

然后在列表理解中使用这个函数。这种方法在两种情况下有效，一种是理论的，一种是实际的。第一个是函数**f**应该是确定性的，即在给定相同输入的情况下返回相同的结果，另一个是对象**x**可以用作字典键。如果第一个无效，则应根据定义每次重新计算 f ，而如果第二个失败，则可以使用一些更健壮的方法。

你可以在网上找到很多 memoization 的实现，我认为新版本的 python 也包含了一些东西。

附带说明一下，永远不要使用小 L 作为变量名，这是一个坏习惯，因为它可能与某些终端上的 i 或 1 混淆。

编辑：

正如所评论的，使用生成器理解（以避免创建无用的重复临时对象）的可能解决方案将是以下表达式：

```
[g(x, fx) for x, fx in ((x,f(x)) for x in l) if fx] 
```

考虑到 f 的计算成本、原始列表中的重复次数和您所使用的内存，您需要权衡您的选择。记忆化在空间速度上进行了权衡，这意味着它会跟踪保存它的每个结果，因此如果您有大量列表，则在内存占用方面可能会变得昂贵。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-04T13:38:33.800

您应该使用 memoize 装饰器。这是一个有趣的[链接](http://code.activestate.com/recipes/578231-probably-the-fastest-memoization-decorator-in-the-/)。

* * *

使用链接中的记忆和您的“代码”：

```
def memoize(f):
    """ Memoization decorator for functions taking one or more arguments. """
    class memodict(dict):
        def __init__(self, f):
            self.f = f
        def __call__(self, *args):
            return self[args]
        def __missing__(self, key):
            ret = self[key] = self.f(*key)
            return ret
    return memodict(f)

@memoize
def f(x):
    # your code

[f(x) for x in l if f(x)] 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-04-27T15:26:54.400

开始`Python 3.8`，并引入[赋值表达式（PEP 572）](https://www.python.org/dev/peps/pep-0572/)（`:=`运算符），可以在列表推导中使用局部变量以避免调用两次相同的函数：

在我们的例子中，我们可以将 的求值命名`f(x)`为变量`y`，同时使用表达式的结果来过滤列表，也可以作为映射值：

```
[y for x in l if (y := f(x))] 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-04-04T13:34:54.367

```
[y for y in [f(x) for x in l] if y] 
```

对于您更新的问题，这可能很有用：

```
[g(x,y) for x in l for y in [f(x)] if y] 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-04-04T13:34:02.050

没有。没有（*干净*的）方法可以做到这一点。老式循环没有任何问题：

```
output = []
for x in l:
    result = f(x)
    if result: 
        output.append(result) 
```

如果你觉得这很难阅读，你总是可以将它包装在一个函数中。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2013-04-04T14:36:48.217

正如前面的答案所示，您可以使用双重理解或使用记忆。对于大小合理的问题，这是一个品味问题（我同意记忆化看起来更干净，因为它隐藏了优化）。但是，如果您正在检查一个非常大的列表，**则会有很大的不同：** Memoization 将存储您计算出的每一个值，并且会很快耗尽您的记忆。**带有生成器**的双重理解（圆括号，而不是方括号）仅存储您想要保留的内容。

要解决您的实际问题：

```
[g(x, f(x)) for x in series if f(x)] 
```

要计算最终值，您需要`x`和`f(x)`。没问题，像这样传递它们：

```
[g(x, y) for (x, y) in ( (x, f(x)) for x in series ) if y ] 
```

**同样：**这应该使用生成器（圆括号），而不是列表理解（方括号）。否则，您*将*在开始过滤结果之前构建整个列表。这是列表理解版本：

```
[g(x, y) for (x, y) in [ (x, f(x)) for x in series ] if y ] # DO NOT USE THIS 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-09-10T03:56:45.073

关于记忆有很多答案。Python 3 标准库现在有一个`lru_cache`，它是*最近使用的缓存*。这样你就可以：

```
from functools import lru_cache

@lru_cache()
def f(x):
    # function body here 
```

这样你的函数只会被调用一次。您还可以指定 的大小`lru_cache`，默认为 128。上面显示的 memoize 装饰器的问题是列表的大小可能会变得无法控制。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-04-04T13:44:40.337

您可以使用[记忆](http://en.wikipedia.org/wiki/Memoization)。这是一种技术，用于通过将每个计算值的结果保存在某处来避免进行两次相同的计算。我看到已经有一个使用 memoization 的答案，但我想提出一个通用的实现，使用 python 装饰器：

```
def memoize(func):
    def wrapper(*args):
        if args in wrapper.d:
            return wrapper.d[args]
        ret_val = func(*args)
        wrapper.d[args] = ret_val
        return ret_val
    wrapper.d = {}
    return wrapper

@memoize
def f(x):
... 
```

现在`f`是它自己的记忆版本。`@memoize`通过这个实现，您可以使用装饰器来记忆任何功能。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-09-15T19:26:33.717

用`map()`！！

```
comp = [x for x in map(f, l) if x] 
```

`f`是函数`f(X)`，`l`是列表

`map()`将返回`f(x)`列表中每个 x 的结果。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-04-04T14:17:01.427

这是我的解决方案：

```
filter(None, [f(x) for x in l]) 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2013-04-04T19:22:31.327

如何定义：

```
def truths(L):
    """Return the elements of L that test true"""
    return [x for x in L if x] 
```

所以，例如

```
> [wife.children for wife in henry8.wives]
[[Mary1], [Elizabeth1], [Edward6], [], [], []]

> truths(wife.children for wife in henry8.wives) 
[[Mary1], [Elizabeth1], [Edward6]] 
```

# javascript - 函数.jstree（）的js树错误

> ID：15812781
> 
> 赞同：8
> 
> 时间：2013-04-04T13:32:11.240
> 
> 标签：javascript, jquery, asp.net-mvc-4, jstree

我在 mvc4 中实现了一个 jstree，但是当我运行我的应用程序时，没有显示树视图。我尝试使用 Firebug 跟踪错误并发现以下错误：

```
"TypeError: $(...).jstree is not a function $("#divtree").jstree();" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T13:35:23.900

按照[https://github.com/vakata/jstree上的指南进行操作](https://github.com/vakata/jstree)

```
<script src="/path/to/jstree.min.js"></script>
<script>
    jQuery(function($) {
         ("#divtree").jstree();
    });
</script> 
```

# ios - Issue in NSURL in Objective C

> ID：15812783
> 
> 赞同：1
> 
> 时间：2013-04-04T13:32:12.147
> 
> 标签：ios, objective-c

I am trying to execute a async http request. but the call back log is not working. please analyze the code and suggest me the cause of this issue. I have seen the class examples in many places. But here i am calling it from a main function.

```
@interface HTTP : NSObject

@property (nonatomic,retain) NSMutableData *receivedData;

- (void) get : (NSString *) urlString;

@end

@implementation HTTP

@synthesize receivedData;

- (void)get: (NSString *)urlString {

NSLog ( @"GET: %@", urlString );

self.receivedData = [[NSMutableData alloc] init];

NSURLRequest *request = [[NSURLRequest alloc]
                         initWithURL: [NSURL    URLWithString:urlString]
                         cachePolicy:  NSURLRequestReloadIgnoringLocalCacheData
                         timeoutInterval: 10
                         ];

NSURLConnection *connection = [[NSURLConnection alloc]
                               initWithRequest:request
                               delegate:self
                               startImmediately:YES];

[connection start];

}

- (void)connection:(NSURLConnection*) connection didReceiveResponse:(NSURLResponse *)response
{
NSLog(@"Response recieved");
}

- (void)connection:(NSURLConnection*) connection didReceiveData:(NSData *)data
{
NSLog(@"Data recieved");    

NSString* responseString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

[receivedData appendData:responseString];

}

@end

int main(const int c , char *arg[]){

HTTP *http = [[HTTP alloc] init];

[http get:@"http://www.apple.com"];

return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T13:50:28.393

Your program does not have a "run loop", therefore it terminates immediately after

```
[http get:@"http://www.apple.com"]; 
```

has returned, before any delegate functions are called. (Note that `NSURLConnection` works asynchronously.)

If this is for a stand-alone OS X application, you could to the following:

```
int main(const int c , char *arg[]){

    HTTP *http = [[HTTP alloc] init];

    [http get:@"http://www.apple.com"];

    NSRunLoop *theRL = [NSRunLoop currentRunLoop];
    while (shouldKeepRunning && [theRL runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]]);

    return 0;
} 
```

where `shouldKeepRunning` is a (global) Boolean variable that is initially `YES`, and set to `NO` in

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    shouldKeepRunning = NO;
} 
```

and also in `connection:didFailWithError:`. Or you add a Boolean property `loading` to your `HTTP` class.

If this is for an iOS application or a OS X Cocoa application, then you already have a run loop and don't have to add your own.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:51:38.600

/* Till the application finishes loading, the main thread is kept alive so that the delegate methods are called. Hence the while loop below. */

```
while(!finished) {    
    [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
} 
```

* * *

Here is my working code.

```
@implementation HTTP
@synthesize receivedData,retStr,delegate;

- init {
    if ((self = [super init])) {
     receivedData = [[NSMutableData alloc] init];
    }
    return self;
}

- (void)get: (NSString *)urlString {

    NSLog ( @"GET: %@", urlString );

    self.receivedData = [[NSMutableData alloc] init];

    NSURLRequest *request = [[NSURLRequest alloc]
                             initWithURL: [NSURL URLWithString:urlString]
                             cachePolicy: NSURLRequestReloadIgnoringLocalCacheData
                             timeoutInterval: 10
                             ];

    NSURLConnection *connection = [[NSURLConnection alloc]
                                   initWithRequest:request
                                   delegate:self
                                   startImmediately:YES];

    while(!finished) {

        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
    }

    if(!connection) {
        NSLog(@"connection failed :(");
    } else {
        NSLog(@"connection succeeded  :)");
    }
}

 - (void)post:(NSString*)urlString: (NSString*)body: (NSObject*) sender {
    // POST
    NSMutableString* requestURL = [[NSMutableString alloc] init];
    [requestURL appendString:urlString];
    NSMutableString* requestBody = [[NSMutableString alloc] initWithString:body];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL: [NSURL URLWithString: [NSString stringWithString:requestURL]]];
    NSString* requestBodyString = [NSString stringWithString:requestBody];
    NSData *requestData = [NSData dataWithBytes: [requestBodyString UTF8String] length: [requestBodyString length]];

    [request setHTTPMethod: @"POST"];
    [request setValue:@"text/html; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody: requestData];
    NSURLConnection *postConn= [[NSURLConnection alloc] initWithRequest:request delegate:sender];

     /*
     Till the application finishes loading, the main thread is kept alive so that the delegate methods are called.
     Hence the while loop below.
     */
    while(!finished) {

        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];

    }

    if(!postConn) {
        NSLog(@"POST connection failed :(");
    } else {
        NSLog(@"POST connection succeeded  :)");

    }
   }    

// ====================
// Callbacks
// ====================

#pragma mark NSURLConnection delegate methods
- (NSURLRequest *)connection:(NSURLConnection *)connection
             willSendRequest:(NSURLRequest *)request
            redirectResponse:(NSURLResponse *)redirectResponse {

    NSLog(@"Connection received data, retain count");
    return request;
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    NSLog(@"Received response: %@", response);

    [receivedData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    NSLog(@"Received %lu bytes of data", [data length]); 

    [receivedData appendData:data];
    NSLog(@"Received data is now %lu bytes", [receivedData length]); 

}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    NSRunAlertPanel(@"Error",[NSString stringWithFormat:@"Could not connect to server.Following error occured:\n\n%@", error], nil, nil, nil);
    NSLog(@"Error receiving response: %@", error);

}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    // Once this method is invoked, "responseData" contains the complete result
    NSLog(@"Succeeded! Received %lu bytes of data", [receivedData length]); 

    NSString *dataStr=[[NSString alloc] initWithData:receivedData encoding:NSASCIIStringEncoding] ;

    retStr = [NSString stringWithString:dataStr];
        finished =TRUE;

//    [self returnDcString:dataStr];
   // NSLog(@"%@",dataStr);    

    if ([delegate respondsToSelector:@selector(didFinishDownload:)]) {
        NSLog(@"Calling the delegate"); 

        //NSString* dataAsString = [[[NSString alloc] initWithData:receivedData encoding:NSUTF8StringEncoding] autorelease];
//      [delegate performSelector:@selector(didFinishDownload:) withObject: dataStr];
    }

}
- (void)setDelegate:(id)val
{
    delegate = val;
}

- (id)delegate
{
    return delegate;

}

@end 
```

# iphone - iPhone 应用程序中的视频广告？

> ID：15812785
> 
> 赞同：-1
> 
> 时间：2013-04-04T13:32:16.023
> 
> 标签：iphone, ads

我听说视频广告的货币化在每印象 1 到 5 美分之间。我编写了一个每天启动大约 10 万次的应用程序。我想知道是否可以在我的 iPhone 应用程序中投放视频广告。你知道一家公司已经提供了 SDK 或开发人员可以集成到他们的应用程序中的东西吗？

您如何看待这个想法？

问候

斯蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:41:58.150

有几个广告提供商。我不知道他们支付的统计数据，但提供插页式视频广告是多个广告提供商所做的事情，并且每个都有自己的 SDK。

查看以下广告提供商：
AdMob
TapJoy
Flurry
Burstly
这些是最常用的广告提供商，每个都有自己的 SDK。小心使用过长的插页式广告 - 您现在每天有 10 万家初创公司，但如果您的用户发现他们每次启动应用程序时都必须观看视频广告，这个数字可能会下降！

# ruby-on-rails - 无法在 Rails_Admin 中更新用户并使用 belongs_to 进行建模：用户

> ID：15812788
> 
> 赞同：2
> 
> 时间：2013-04-04T13:32:20.727
> 
> 标签：ruby-on-rails, belongs-to, rails-admin

我有两种情况，但都解决了相同的结果。这两种情况都涉及尝试通过 Rails_admin 更新记录，两个模型都具有“belongs_to :user”关联。

场景 1：我需要更新属于用户的视频记录。如果我尝试更改分配此视频的用户，则 user_id 将始终更改为登录到 Rails_Admin 的管理员的 user_id。无论我尝试编辑的字段如何，user_id 都会更改为当前登录的管理员。

场景 2：我需要更新属于用户的个人资料记录上的信用金额。再一次，即使用户不可见，无论我更改哪个字段，user_id 都会更改为当前登录的管理员的 user_id。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T10:32:16.557

我有同样的问题，我通过改变我的能力来解决它，以避免能力重叠。这意味着，如果用户是管理员，那么他将不会为其他用户设置权限。

对我来说导致错误的重叠示例：

```
user ||= User.new # guest user (not logged in)

can :manage, Video, user: user
if user.admin?
  can :manage, Video
end 
```

这应该改为：

```
user ||= User.new # guest user (not logged in)

if user.admin?
  can :manage, Video
else
  can [:crud], Video, :user_id => user.id
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T08:16:02.497

Sounds like you have an issue with your cancan configuration.

check for lines like:

can :manage, Video, user: user

In that case, RailsAdmin will override any value for user_id to current_user.

# java - 更改通话期间的 Log4j 阈值

> ID：15812789
> 
> 赞同：0
> 
> 时间：2013-04-04T13:32:29.417
> 
> 标签：java, logging, log4j

我有一个带有多个记录器的 log4j，用于多线程应用程序的附加程序。在一种情况下，我将尝试连接到远程服务。如果连接失败，我会反复尝试。

我只希望 log4j 第一次使用它的原始配置。但是对于所有其他后续尝试，我想使用不那么冗长的配置。这不应更改可能在相同对象上运行的其他线程的日志记录配置。请注意，我无法提前知道在调用中使用了哪些记录器来连接到远程服务。

那么，有没有一种方法可以在一次调用期间全局更改日志记录而不改变其他并发线程的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:41:00.703

查看 API 的这一部分：

[http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/Logger.html](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/Logger.html)

您可以调用 setLevel(Level lev) 方法并进行一些更改。但是，我不能 100% 确定您不会影响其他线程，因为 Logger 通常基于一个类。

我认为您必须为每个用户会话获取一个 Logger 对象，但我不能 100% 确定它是否会导致堆问题。

也许控制代码的输出（例如，如果这是第一次尝试，则仅向日志发送一些消息）。

问候

# android - 使用 RoboGuice 在我的活动中注入类

> ID：15812792
> 
> 赞同：1
> 
> 时间：2013-04-04T13:32:34.080
> 
> 标签：android, roboguice

我是使用 roboguice 的新手，我很难在我的应用程序中配置注入。

说我有以下界面

```
public interface IAPICall{
         void doSomething();
} 
```

我的界面有两种不同的实现

```
public class MyApiCall implements IAPICall{
   public void doSomething(){
   }
}

 public class MyMockApicall implements IAPICall{
       public void doSomething(){
       }
    } 
```

现在我的要求是我想将接口注入到我的活动中。我如何配置注入哪个具体类。在测试期间我想注入我的模拟类，而在生产期间我想注入实际类。我该如何配置？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:05:59.717

在您的 guice 配置模块中：

```
public class GuiceConfigurationModule extends AbstractModule {
...
    @Override
protected void configure() {
        ...
        bind(IAPICall.class).to(MyApiCall.class);
        ...
    }
...
} 
```

在您的活动中：

```
@Inject
IAPICall someApiCall; 
```

在测试期间使用模拟接口的最佳方法是创建一个测试模块，其中绑定指向模型类。关于如何做到这一点，有一个关于 Robolectric 的教程。

[http://pivotal.github.com/robolectric/roboguice.html](http://pivotal.github.com/robolectric/roboguice.html)

要将您的模块添加到您的应用程序，请在 values ressources 文件夹中添加一个 roboguice.xml 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
  <resources> 
    <string-array name="roboguice_modules">
        <item>com.stackoverflow.test.GuiceConfigurationModule</item>
    </string-array>
  </resources> 
```

这在这里描述：

[http://code.google.com/p/roboguice/wiki/UpgradingTo20](http://code.google.com/p/roboguice/wiki/UpgradingTo20)

# json - Highchart基本线

> ID：15812803
> 
> 赞同：-1
> 
> 时间：2013-04-04T13:33:06.520
> 
> 标签：json, highcharts

根据我自己的[问题](https://stackoverflow.com/questions/15809850/highcharts-basic-line-with-json-for-multiple-y-axes) ，我尝试了一些东西，我的小提琴是[链接](http://jsfiddle.net/itsfromnaveen/vntfy)
但我想输出如下

![在此处输入图像描述](https://i.stack.imgur.com/mBaoP.png)

`i.e`x 轴包含月度报告

我的ajax代码是

```
 $.ajax({
        url: "/echo/json/",
        data: data,
        type: "POST",
        success: function(point) {

            var chartSeriesData = [];
            var chartCategory = [];

            $.each(point, function(i, item) {
                var series_name = item.resultDate;
                var series_data = item.y;
                var cagory = series_name;

                var series = {
                    name: series_name,
                    data: item.y
                };
                chartSeriesData.push(series);
                chartCategory.push(series_name);
            });
            var chartingOptions = {
                chart: {
                    renderTo: 'container',
                    defaultSeriesType: 'spline'
                },
                xAxis: {
                    categories: chartCategory
                },
                series: chartSeriesData
            };

            chartingOptions = $.extend({}, jugalsLib.getBasicChartOptions(), chartingOptions);
            chart = new Highcharts.Chart(chartingOptions);
        }
    }); 
```

感谢您....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:11:31.960

在您的解析器中，您创建了许多系列，因为您在点循环中初始化系列。所以你应该在点循环之前准备系列。然后将点添加到正确的系列（在这种情况下是第一个或第二个系列）。

# x++ - ax-2012-r2 中的 hrplimittablerelationship 表发生了什么变化？

> ID：15812805
> 
> 赞同：0
> 
> 时间：2013-04-04T13:33:09.127
> 
> 标签：x++, dynamics-ax-2012, axapta, dynamics-ax-2012-r2

关于如何从 AX 2009 替换以下代码的任何建议？

```
display amount mrpg_limit()
{
     return HRPLimitTableRelationship::find("Spending", emplTable_1.PartyId).LimitValue;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T20:30:45.873

HRPLimittableRelationship 表已移至多个表

*   HRP批准限制
*   HRPApprovedLimitAmount

如果您想了解有关更改过程的更多详细信息，请查看 msdn 上的数据升级脚本：http: [//msdn.microsoft.com/EN-US/library/jj737032.aspx](http://msdn.microsoft.com/EN-US/library/jj737032.aspx)

这篇 TechNet 文章描述了签名限制的实际创建，以防您需要它进行测试。 [http://technet.microsoft.com/en-us/library/hh271654.aspx](http://technet.microsoft.com/en-us/library/hh271654.aspx)

在获取您想要的信息的黑暗中进行拍摄，有一个名为**PurchReqDocument**的类，它具有一个静态方法consumptionLimitStatic ，您可以在其中提供工人**recid**和货币代码。

# sql - 跨行的 fk pk 关系

> ID：15812806
> 
> 赞同：0
> 
> 时间：2013-04-04T13:33:09.353
> 
> 标签：sql, primary-key, foreign-key-relationship, split

将单个表拆分为多个表时，外键指的是来自不同行的主键是否很常见？
例如
源表数据是

```
id1  id2 name1   name2
10   1   a10     b1
9    8   a11     b2
8    3   a12     b3
3    9   a14     b4
1    10  a15     b5 
```

所以当我创建主键表时

```
 create table pk_table (id1 integer primary key , name1 varchar2(20)) 
```

和外键表为

```
 create table fk_table (id2 integer, name2 varchar2(20) foreign key(id2) references pk_table(id1)) 
```

因此，当我按表拆分数据时：

pk_table 数据为：

```
id1 name1
10  a10
9   a11
8   a12
3   a14
1   a15 
```

外键数据是

```
id2  name2
1   b1
8   b2
3   b3
9   b4
10  b5 
```

那么你有没有看到我们没有 fk 在源表中引用同一行 pk 的情况？

**已编辑：**更新了表格数据以使其更有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:52:16.230

首先回答您提出的问题：

是的，当您将一个表拆分为两个（或更多）时，您会看到不同行中的数据。这就是事情的本来面目™。原始数据是表中的哪一行或新数据是表中的哪一行都没有关系。行号与您的数据**无关**，这只是它的显示方式。例如，您可以`pk_table`像这样创建新的：

```
id1 name1
1   a15
3   a14
8   a12
9   a11
10  a10 
```

它不会有任何区别。

其次，这涉及其他人试图告诉你的内容。您将原始表转换为两个辅助表的**方式不会**为您提供数据库。您为创建`fk_table`a) 提供的语法没有意义，并且 b) 将不起作用。

拆分表时需要做的是在 中创建一个新列，`fk_table`其中包含`pk_table`. 这个额外的列是告诉数据库哪个记录`fk_table`匹配哪个记录的链接`pk_table`。回到你原来的问题，这个链接就是为什么旧记录或新记录在哪一行上没有区别的原因。重要的是`fk_table`.

为了实际理解这一点，新表应该看起来更像这样：

pk_table -`id1`是主键：

```
id1 name1
10  a10
9   a11
8   a12
3   a14
1   a15 
```

fk_table -`id2`是主键，`fk_id1`是外键`pk_table`：

```
id2  name2 fk_id1
1   b1     10
8   b2     9
3   b3     8
9   b4     3
10  b5     1 
```

使用这种结构，您可以运行将每条`pk_table`记录正确链接到正确`fk_table`记录的查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:57:48.763

拆分表的方式不遵循规范化标准。源表中的字段之间没有（可见的）功能依赖关系。其次，您的表甚至不共享 PK-FK 关系。您的问题毫无意义，因为您使用 PK-FK 拆分表的假设是不正确的。

# algorithm - 点集的边界点

> ID：15812809
> 
> 赞同：3
> 
> 时间：2013-04-04T13:33:11.753
> 
> 标签：algorithm, image-processing, graphics

我有一组无序的二维点，是图像分割的结果。在位图中绘制在一起的点是一个连续区域。

我想知道它的（区域）边界中有哪些点。该区域可能是凹形的，所以这对我来说排除了[凸壳](http://en.wikipedia.org/wiki/Convex_hull_algorithms)。它也可能有“洞”（即内部和外部边界）。

有很多（> 10k）点。我坚持使用类似搜索的（非递归）填充填充，将边界点添加到向量。如果存在内部边界，这也会给我带来“分离”内部和外部边界点的问题。有更好的算法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:23:17.747

问题比看起来更复杂。下面的链接很好地描述了它，不幸的是没有算法。希望这会有帮助。
[http://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CEIQFjAB&url=http%3A%2F%2Fwww.geosensor.net%2Fpapers%2Fgalton06.GISCIENCE.ppt&ei=s4xdUf_BMqT- 4QSmrICADw&usg=AFQjCNHKBdBDxQt9G29_l2QW2yd-AxRXXQ&bvm=bv.44770516,d.bGE](http://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CEIQFjAB&url=http%3A%2F%2Fwww.geosensor.net%2Fpapers%2Fgalton06.GISCIENCE.ppt&ei=s4xdUf_BMqT-4QSmrICADw&usg=AFQjCNHKBdBDxQt9G29_l2QW2yd-AxRXXQ&bvm=bv.44770516,d.bGE)

# php - 如何使用 AJAX 显示联系表单的 PHP 结果？

> ID：15812812
> 
> 赞同：0
> 
> 时间：2013-04-04T13:33:26.693
> 
> 标签：php, html, ajax, load

我有一个简单的 html 联系表和发送电子邮件的 php 脚本。它工作得很好，但我希望结果（电子邮件已发送......）显示在同一页面中，而不更改页面。我怎样才能做到这一点？

HTML：

```
<form name="contact" action="includes/send.php" id="contact_form">

    <input type="text" placeholder="Name" name="name" /> <br />

    <input type="email" placeholder="Email Address" name="email" /> <br />

    <textarea name="message" placeholder="Message" rows="8"></textarea> <br />

    <input type="submit" name="submit" id="submit_btn" value="Send" /> 

</form> 
```

PHP：

```
<?php

$name = $_POST['name'];
$email = $_POST['email'];
$message = $_POST['message'];

$to = 'amar123syla@gmail.com';
$subject = 'Message from AMARSYLA.COM';
$message = 'FROM: '.$name.' Email: '.$email.'Message: '.$message;
$headers = 'From: amar123syla@gmail.com';

if (filter_var($email, FILTER_VALIDATE_EMAIL)) { // this line checks that we have a valid email address
    mail($to, $subject, $message) or die('Error sending Mail'); //This method sends the mail.
    echo "Your email was sent!"; // success message
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:38:02.440

```
jQuery.post('email.php', score, function(result) {
    jQuery('#textBlock').html(result);
}); 
```

类似的东西应该可以工作（在这种情况下，结果是你的 php 中的回声）

一种首选方法是将您的 php 结果编码为 json，这样您就可以在 Javascript 中对其进行更多控制。

```
jQuery.post('email.php', score, function(result) {
    if (result.result == true) {
        jQuery('#textBlock').html(result.text);
    }
}); 
```

在 email.php 中：

```
$result['result'] = true;
$result['text'] = 'Message has been sent';

header('Content-Type: application/json');
echo json_encode($result); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-04T13:38:28.127

在这里看看这是否有效：

```
<form name="contact" action="**submit to same page**" id="contact_form">

<input type="submit" name="submit" id="submit_btn" value="Send" /> 

</form> 
```

然后对于 php（与电子邮件表单在同一页面上）只需添加 if submit

```
<?php
if(isset($_POST['submit'])){

 run your email script, add javascript, etc.
echo "Your email was sent!"; // success message
}

  }
    ?> 
```

# java - SAX 使用多个 DefaultHandler 扩展

> ID：15812815
> 
> 赞同：3
> 
> 时间：2013-04-04T13:33:31.607
> 
> 标签：java, xml, xml-parsing, sax, saxparser

我遇到的问题是我想使用 SAX defaultHandler 类的扩展解析出 1 个 XML 文档。当只使用一个处理程序时，我可以解析出 XML 并将不同的标签分配给对象的属性（请参阅域和区域）。一旦我在域和区域对象中拥有这些，我想将它们添加到另一个具有域和区域列表的对象（GroupedFiles）中。我遇到的问题是使用 2 个处理程序解析 1 个文档。我的理论，虽然不是最好的编码实践，是解析文档两次，使用域处理程序运行一次，设置域，然后添加到分组文件，然后对区域执行相同的操作。这是代码，

```
GroupedFiles groupedFiles = new GroupedFiles();
ArrayList<Domain> domains = new ArrayList<Domain>();
ArrayList<Area> areas = new ArrayList<Area>();

//Create parser from factory
XMLReader parser = XMLReaderFactory.createXMLReader();

//Creates an input stream from the file "someFile.xml"
InputStream in = new FileInputStream(new File("someFile.xml"));
InputSource source = new InputSource(in);

//Create handler instances
DomainHandler domainHandler = new DomainHandler();
AreaHandler areaHandler = new AreaHandler();

//Parses out XML from a document using each handler, 
//adding it to an object with the correct properties then adds those
//to another object which features Lists of Domains, Areas, and Directories.
parser.setContentHandler(domainHandler);
parser.parse(source);
domains = domainHandler.getXML();
groupedFiles.setDomain(domains);

parser.setContentHandler(areaHandler);
parser.parse(source);
areas = areaHandler.getXML();
groupedFiles.setArea(areas); 
```

但是我做不到，它似乎挂断了第二个`parser.parse(source)`。如果我在运行后查看 groupedFiles 域已填充但区域未填充。有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T13:47:17.287

您不需要进行多次传递，您可以在解析过程中交换内容处理程序。`XMLReader`有一个`setContentHandler`方法，你可以调用它来传入一个新的处理程序。例如，您可以设置一个新的内容处理程序，如果`startElement`您识别出一个开始由不同处理程序覆盖的区域的标签，或者如果您将元素留在其中`endElement`并想要切换回以前的内容处理程序。

有关示例，请参阅此[JavaWorld 文章](http://www.javaworld.com/jw-08-2000/jw-0804-sax.html?page=7)或查看[此答案](https://stackoverflow.com/a/3409270/217324)。

# bash - 如何使用文本文件中的变量通过循环将命令通过 ssh 传递给 dd-wrt？

> ID：15812818
> 
> 赞同：1
> 
> 时间：2013-04-04T13:33:39.257
> 
> 标签：bash, ssh, expect, busybox, dd-wrt

到目前为止，我已经能够使用 ssh 创建一个小脚本，并结合期望将单个命令传递给我正在使用的 dd-wrt ​​路由器。现在这已经完成了，如果可能的话，我希望通过 ssh 登录多次传递相同的命令，而不是只从文本文件中传递一个命令。

完成此操作的另一种方法是创建一个循环并一遍又一遍地传递命令。我将不得不使用一个变量，因为文本文件中命令的数据发生了变化。

这是我到目前为止所拥有的

```
#!/bin/expect -f 
```

设置密码**密码**

```
 spawn ssh -l root x.x.x.x -p "command"
    expect "*password:*"
    send -- "$password\r"
    send -- "\r" 
```

从我所见，创建循环将是最简单的方法，但我可能错了。**请注意**，我要通过的“命令和变量”位于**单独的文本文件**中，并且它需要读取/获取每一行并将每一行插入循环中。除非有办法一次将它们全部发送出去。

```
#!/bin/expect -f 
```

设置密码**密码**

```
 spawn ssh -l root x.x.x.x -p "command Variable" <-- Command to be passed through
    expect "*password:*"
    send -- "$password\r"
    send -- "\r" 
```

每次在文本文件中都是相同的命令，只是变量发生了变化。

测试.txt

```
command xxxxxxx
command xxxxxxx
command xxxxxxx
command xxxxxxx 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:00:58.583

我认为你应该做这样的事情。

启动.sh

```
#!/bin/bash
 password="your_password"
 cat test.txt|while read line
 do
   for i in $line
     do
       ssh.exp $i $password
     done
 done 
```

ssh.exp

```
#!/usr/bin/expect
set command [lrange $argv 0 0] 
set password [lrange $argv 1 1] 
spawn ssh -l root x.x.x.x -p "$command"
expect "*password:*"
send -- "$password\r"
send -- "\r" 
```

并带有您的命令列表的 test.txt。每个在不同的行。

# php - PHP OWASP TOP 5 - 防止跨站脚本 (XSS) 列表项 4 和 5

> ID：15812821
> 
> 赞同：2
> 
> 时间：2013-04-04T13:33:44.303
> 
> 标签：php, xss, urlencode, html-entities, owasp

在[https://www.owasp.org/index.php/PHP_Top_5#How_to_Determine_if_you_are_Vulnerable_2](https://www.owasp.org/index.php/PHP_Top_5#How_to_Determine_if_you_are_Vulnerable_2)链接，标题 P2：跨站点脚本 > 如何防范它；在第 4 和第 5 项中写道：

1.  **第 4 项：**自由文本输入只有在使用 HTML 实体后才能安全地重新显示给用户
2.  **第 5 项：**通过 URL 发送回用户的变量必须使用 urlencode() 进行 URL 编码，但不推荐使用 GET 请求用于导航以外的任何用途

## 我的问题

### 第一季度

对于**第 4 项**，它明确表示*can only*但我记得我读过这`htmlspecialchars()`与`htmlentities()`. （关于 . 的优越性的示例源链接`htmlspecialchars`。请阅读*Pornel_*的评论：[在 PHP 站点中避免 xss 攻击的最佳实践是什么](https://stackoverflow.com/questions/71328/what-are-the-best-practices-for-avoiding-xss-attacks-in-a-php-site?rq=1)）所以我在输入 OWASP 后感到困惑。当我将 MySQL 用户输入的数据作为 html 打印到屏幕上时，我是否应该用我使用的`htmlspecialchars()`替换我 的。`htmlentities()`

### 第二季度

对于我的表单（添加文章、添加评论、向管理员发送电子邮件），我使用`Post - Redirect - Session Variables`流程。（我的解释对你来说可能很愚蠢，但我的意思是我不在`GET`流程的第三步使用。`GET`我使用`Session`变量而不是 。）所以我还需要`urlencode()`在`Session`变量的某个地方使用吗？（注意：即使你是，我也不知道HOW，那是我要研究的另一个话题，我暂时*只想学习yes或no以及为什么*我在我的文章中找不到这个问题的答案研究。当然，如果您也定义了 HOW 部分，我们将不胜感激）

提前
致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:07:58.673

专注于为什么你必须做这两点而不是如何做。如何始终只是关于您如何“可能”满足要求的提示。但是，如果您只是使用其他人告诉您的内容，您就有可能无法完全理解原因，因此会在不知不觉中重新引入安全风险。

4）此建议试图避免用户“突破”您的输入/文本区域字段。自己检查一下，如何在您的表格中做到这一点并采取行动。通常，文本输入可以用正确的引号分解：

$value = '\'/>警报("你好");'; 回声'

所以在这种情况下过滤双引号就足够了（如果我错了，请纠正我）。但是过滤所有你不需要的东西总是更好。首选白名单而不是黑名单过滤器。

5) 这试图避免您的 URL 格式错误。目前无法为您提供一个很好的攻击示例，但即使是格式错误的 url 也可能会使您的应用程序无法使用。

顺便说一句，典型的 PHP 会话 ID 只是纯文本和 URL 安全的。将它们存储在具有“仅 http”设置的 cookie 中会更好。除了会话 id 之外，您不需要任何东西来进行正常的会话处理。

所以，是的。使用您提到的这些技巧，但要了解它旨在防止的攻击，而不仅仅是使用它们，因为polep 也会告诉您。

# php - 管理员和用户从两个不同的表登录

> ID：15812824
> 
> 赞同：0
> 
> 时间：2013-04-04T13:34:00.680
> 
> 标签：php, mysql, database, login

我想知道是否有人可以帮助我 - 我已经成功创建了一个允许用户（学生）登录的登录系统。我的系统还需要管理员登录，管理员有权查看学生没有的页面。管理员和学生信息都来自两个不同的表。下面是我用于学生登录的代码（有两个不同的页面 - 用户和登录）。我对如何实现管理员登录感到困惑。感谢您的帮助！（管理员将使用“adminnum”和“adminpassword”登录。

***登录.php***

```
<?php

include "core/init.php";
include "includes/content.php";

if (empty($_POST) === false) {
$studentemail = $_POST ['studentemail'];
$studentpassword = $_POST ['studentpassword'];

if (empty($studentemail) === true || empty($studentpassword) === true) {
    $errors[] = "You need to enter an email address and password"; 
} else if (user_exists($studentemail) === false) {
    $errors[] = "We can't find that email address. Have you registered?";
} else {

    if (strlen($studentpassword) > 32) {
        $errors[] = 'Password too long';
        }

    $login = login($studentemail, $studentpassword);
    if ($login === false) {
        $errors[] = 'That email/password combination is incorrect';
    } else {
        $_SESSION['studentid'] = $login;
        header('Location: index.php');
        exit();
    }
}
} else {
$errors[] = 'No data received';
}
include "includes/overall/overall_header.php";
if (empty($errors) === false) {
?>
<h2> We tried to log you in, but...</h2>    

<?php
echo output_errors($errors);
}
?>
    <center><input id="submit" type="submit" value="Back" onclick="location.href='Login2.php'"></center>
<?php
include "includes/overall/overall_footerloggedout.php";
?> 
```

***用户.php***

```
<?php
function logged_in() {
return (isset($_SESSION['studentid'])) ? true : false;
}

function user_exists($studentemail) {
$studentemail = sanitize($studentemail);
$query = mysql_query("SELECT COUNT(`studentid`) FROM `student` WHERE `studentemail` 
         = '$studentemail'");
return (mysql_result($query, 0) == 1) ? true : false;
}

function studentid_from_student ($studentemail) {
$studentemail = sanitize($studentemail);
return mysql_result(mysql_query("SELECT `studentid` FROM `student` WHERE      `studentemail` = '$studentemail'"), 0, 'studentid');
}
`function login($studentemail, $studentpassword) {
$studentid = studentid_from_student($studentemail);

$studentemail = sanitize($studentemail);
$studentpassword = md5($studentpassword);

return (mysql_result(mysql_query("SELECT COUNT(`studentid`) FROM `student` WHERE   `studentemail` = '$studentemail' AND `studentpassword` = '$studentpassword'"), 0) == 1) ?   $studentid : false;

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:37:53.313

我建议改变你的逻辑，从两个不同的表中提取用户和管理员。仅将它们放在一个表中，但所有用户都应包含列`flag`，例如，其中 flag=1 是 ADMIN，flag=0 是 USER。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:45:35.253

我只能建议，因为我不是 php 编码器，但过去做过一些事情是在您的数据库中添加另一个字段，您将在其中为用户设置权限级别（普通成员为 0，管理员为 1）。完成之后，只需通过我几乎不知道的 php 编码将其添加到您的用户脚本中。希望能有所帮助。

# c# - 集成第三方 API 或服务的最佳设计模式

> ID：15812828
> 
> 赞同：4
> 
> 时间：2013-04-04T13:34:10.263
> 
> 标签：c#, asp.net, design-patterns, architecture

我正在将一些外部 API 集成到分层应用程序中。像通常的分层应用程序一样，它具有三层，我将这些 API 连接到业务层。“第三方 API 和服务”是指支付网关、邮政编码查询等。

目前，对于每个 api，我创建了一个服务契约接口，api 包装器将继承接口类。这个接口将被注入到业务类的构造函数中，ioc 容器将在应用程序的入口点解决这个问题。

我想将这些 api 层与业务层解耦，并使它们在其他项目中也可重用。我的问题是，有没有更好的方法或设计模式来集成外部服务。我非常感谢任何指向指南或代码片段的链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:45:19.883

如果您想为您的第三方 API 服务创建一个可插入的框架，您可能需要研究 MEF。这将使您能够创建一种更加不可知的服务供应类型，这意味着您可以从框架中换入/换出服务 - 这可能会使将当前和未来的外部服务集成到您的应用程序中变得更加容易，而无需产生大量的重构成本。

[http://msdn.microsoft.com/en-us/library/dd460648.aspx](http://msdn.microsoft.com/en-us/library/dd460648.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T10:56:32.210

对于每个第三方 API，我会创建一个接口并将其放入单独的项目中。然后我会为每个接口的实现创建一个新项目。

例如，您的项目结构可能看起来像

```
YourSolution
  ...
  -Company.Interfaces.ThridPartyAPi1
  -Company.Interfaces.ThridPartyAPi2
  -Company.Interfaces.ThridPartyAPi3

  -Company.Services.ThridPartyAPi1
  -Company.Services.ThridPartyAPi2
  -Company.Services.ThridPartyAPi3
  ... 
```

这将您的代码与 API 代码分离，并将 API 接口与 API 代码分离，这意味着它可以很容易地被模拟/存根以进行测试。

# android - 如何添加“google-play-services_lib”（google map V2）作为apk lib依赖

> ID：15812829
> 
> 赞同：0
> 
> 时间：2013-04-04T13:34:12.160
> 
> 标签：android, maven, google-play-services

我需要在我的 android 应用程序中使用 Google Maps Android API v2，我使用 maven 来处理我的依赖项和构建过程，

我确实按照本教程设置了 API V2 [https://developers.google.com/maps/documentation/android/start](https://developers.google.com/maps/documentation/android/start)

我的问题是如何将“google-play-services_lib”添加为我的项目的依赖项（如 apkLib）

山姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T07:05:05.087

使用[https://github.com/mosabua/maven-android-sdk-deployer](https://github.com/mosabua/maven-android-sdk-deployer)

并将以下依赖项添加到 pom

```
<dependency>
  <groupId>com.google.android.gms</groupId>
  <artifactId>google-play-services</artifactId>
  <version>5</version>
  <type>apklib</type>
</dependency>
<dependency>
  <groupId>com.google.android.gms</groupId>
  <artifactId>google-play-services</artifactId>
  <version>5</version>
  <type>jar</type>
</dependency> 
```

# c++ - forkpty() 和 execl() 对子进程的堆内存管理？

> ID：15812831
> 
> 赞同：0
> 
> 时间：2013-04-04T13:34:16.103
> 
> 标签：c++, linux, fork

我有一个正在 Linux 中开发的 C++ 应用程序。我正在分配一些动态内存并最终调用 forkpty()。子进程正在调用 execl()，我们知道，如果成功执行命令，则 execl() 永远不会返回。此外，正如我们所知，forkpty() 会复制所有父级的数据。因此，如果 child() 进程永远不会将控制权返回给我的应用程序以最终进行内存清理，是否可以肯定地说在从子进程调用 execl() 时没有分配任何动态内存更好？ ? 我不敢相信我在这里找不到这个……在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:38:14.107

分配的内存是过程映像的一部分；当您调用 时 `execl`，整个进程映像将被替换，其中的任何内存都会像其余部分一样“消失”，返回到操作系统，然后操作系统将在其他地方使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:39:29.303

所有“分叉”进程内存都作为一部分被释放`execl()`（如果调用成功）。

如果不是这种情况，整个常规 linux 系统都会出现大量内存泄漏，因为几乎不可能在不分配内存的情况下编写任何甚至有点复杂的东西，例如，如果`execl()`分配了 to 的参数，你不可能在调用之前释放它们`execl()`。

# android - 带标签的查找视图

> ID：15812844
> 
> 赞同：0
> 
> 时间：2013-04-04T13:34:42.990
> 
> 标签：android, layout, view

```
DragCar dCar = new DragCar();
dCar.poolId = car.pool_id;
dCar.postion=car.position;
dCar.railCarNumber = car.railcar_number;
dCar.status = car.status;
dCar.track = car.trackId;
dCar.type = car.type;
dCar.yard = car.yardId;
View view = new View(context);
view.setTag(dCar);
parent.addView(view);
View view = parent.findViewWithTag(dCar); 
```

findviewwithtag(dCar) 返回空值后查看。DragCar 是用于了解汽车的自定义类对象。

# java - SpringMVC：注解中的变量

> ID：15812847
> 
> 赞同：3
> 
> 时间：2013-04-04T13:34:47.660
> 
> 标签：java, spring, spring-mvc, dependency-injection, annotations

我定义了以下控制器：

```
@Controller
@RequestMapping("/test")
public class MyController extends AbstractController
{

    @Autowired
    public MyController(@Qualifier("anotherController") AnotherController anotherController))
    {
     ...
    }

} 
```

我想知道是否可以在 @Qualifier 注释中使用变量，以便我可以为不同的 .properties 文件注入不同的控制器，例如：

```
@Controller
@RequestMapping("/test")
public class MyController extends AbstractController
{

    @Autowired
    public MyController(@Qualifier("${awesomeController}") AnotherController anotherController))
    {
     ...
    }

} 
```

每当我尝试时，我都会得到：

```
org.springframework.beans.factory.NoSuchBeanDefinitionException: 
No matching bean of type [com.example.MyController] found for dependency: 
expected at least 1 bean which qualifies as autowire candidate for this 
dependency. Dependency annotations: 
{@org.springframework.beans.factory.annotation.Qualifier(value=${awesomeController}) 
```

我在 config.xml 文件中包含了以下 bean：

```
<bean id="propertyConfigurer"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:config/application.properties</value>
        </list>
    </property>
</bean> 
```

但是除非我在 xml 文件中明确声明 bean，否则 bean 不起作用。

我如何使用注释来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:41:22.180

首先，我认为让依赖注入依赖于配置属性是不好的做法。尝试执行此操作可能会走错方向。

但是要回答您的问题：访问 placeHolder 属性需要完成依赖注入。为了确保它是，您可以将访问该属性的代码放在带`@PostContruct`注释的方法中。

您将需要使用`getBean()`方法从 applicationContext 手动检索 bean。

```
@Value("${awesomeController}")
private String myControllerName;

@PostConstruct
public void init(){
   AnotherController myController = (AnotherController) appContext.getBean(myControllerName);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:17:53.950

我不确定你正在做的事情是否可行，但我可以建议一种稍微不同的方法，但前提是你使用的是 Spring 3.1+。您可以尝试使用 Spring Profiles。

定义您想要的不同控制器，每个配置文件一个：

```
<beans>
    <!-- Common bean definitions etc... -->

    <beans profile="a">
        <bean id="anotherController" class="...AnotherController" />
    </beans>

    <beans profile="b">
        <!-- Some other class/config here... -->
        <bean id="anotherController" class="...AnotherController"/>
    </beans>
</beans> 
```

您的控制器将丢失`@Qualifier`并变为：

```
@Autowired
public MyController(AnotherController anotherController) {
    ...
} 
```

然后在运行时，您可以通过使用系统属性激活相应的配置文件来指定要使用的控制器 bean，例如：

```
-Dspring.profiles.active="a" 
```

或者：

```
-Dspring.profiles.active="b" 
```

可以根据属性文件设置配置文件，但您可以从Spring 博客上的[这篇文章中找到有关 Spring 配置文件的更多信息。](http://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/)我希望这会有所帮助。

# php - [Unix/Mac OS][Apache][PHP] - 更改配置文件 (php.ini) 路径

> ID：15812853
> 
> 赞同：1
> 
> 时间：2013-04-04T13:35:02.100
> 
> 标签：php, macos, pdo, apache2, command-line-interface

我有两个 php.ini ：

*   /usr/local/php5/lib/php.ini 中的一位常客
*   一个用于我的 CLI /usr/lib/php.ini

常规的可以正常工作并加载我需要的所有扩展，而 CLI 拒绝加载一些扩展（例如 pdo.so）：

> 警告：PHP 启动：无法加载动态库 '/usr/lib/php/extensions/no-debug-non-zts-20100525/pdo.so' - dlopen(/usr/lib/php/extensions/no-debug- non-zts-20100525/pdo.so, 9): 在第 0 行的未知中找不到图像

我想更改我的 CLI 的配置文件 (php.ini) 路径以使其指向常规路径（然后解决扩展加载问题），但我找不到如何在 UNIX 系统上实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:38:26.220

使第二个成为第一个的符号链接。这是使用以下方法完成的：

```
ln -s [TARGET_FILE] [SYMLINK_NAME] 
```

如果您的非 CLI php.ini 是 /etc/php.cgi.ini 而您的 CLI php.ini 是 /etc/php.cli.ini，那么您会这样做`ln -s /etc/php.cgi.ini /etc/php.cli.ini`

# highcharts - 升级到 highcharts 3.0 导致条形图失真

> ID：15812860
> 
> 赞同：0
> 
> 时间：2013-04-04T13:35:22.647
> 
> 标签：highcharts

我刚刚升级到 highcharts 3.0，似乎遇到了一个问题，我现有的一个图表在升级之前工作正常，但现在有点坏了。

有时图表有时会正确显示，但在某些情况下会失真。请参阅下面的示例，任何帮助将不胜感激。

图表数据是使用 setData 动态写入的。

工作：http: [//i.imgur.com/CLDlezD.png](http://i.imgur.com/CLDlezD.png)

不工作：http: [//i.imgur.com/RLrWoMK.png](http://i.imgur.com/RLrWoMK.png)

中途：i.imgur.com/aXlACKZ.png

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:56:12.870

感谢 Sebastian 和 highcharts 的每个人，我刚刚升级到最新版本（3.0.1），看来这个问题已经解决了。:D

[http://www.highcharts.com/download](http://www.highcharts.com/download)

# php - 正则表达式混合贪婪和非贪婪？

> ID：15812863
> 
> 赞同：0
> 
> 时间：2013-04-04T13:35:31.453
> 
> 标签：php, regex

我有一个字符串，我试图在其中分解为易于处理的数据。对于这个例子，我想要**收入**和**共识**数据。

```
$digits = '[\$]?[\d]{1,3}(?:[\.][\d]{1,2})?';
$price = '(?:' . $digits . '(?:[\-])?' . $digits . '[\s]?(?:million|billion)?)';

$str = 'revenue of $31-34 billion, versus the consensus of $29.3 billion';
preg_match_all('/(?:revenue|consensus)(?:.*)' . $price . '/U', $str, $matches[]);
print_r($matches); 
```

回报：

```
Array (
    [0] => Array (
        [0] => Array (
            [0] => 'revenue of $31'
            [1] => 'consensus of $29'
        )
    )
) 
```

我所期待的：

```
Array (
    [0] => Array (
        [0] => Array (
            [0] => 'revenue of $31-34 billion'
            [1] => 'consensus of $29.3 billion'
        )
    )
) 
```

当我省略`U`修饰符时：

```
Array (
    [0] => Array (
        [0] => Array (
            [0] => 'revenue of $31-34 billion, versus the consensus of $29.3 billion'
        )
    )
) 
```

我不能`of`在 中用作明确的模式`revenue of $31-34 billion`，数据可能/可能不会使用它，因此我使用了`(?:.*)`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:40:01.230

```
preg_match_all('/(?:revenue|consensus)(?:.*?)' . $price . '/', $str, $matches[]);
                                           ^               ^ 
```

您可以通过添加 , 使一个特定的通配符非贪婪`?`，如`.*?`. 摆脱全局`/U`修饰符并将上面的通配符更改为非贪婪，离开`$digits`和`$price`独自一人。

```
Array
(
    [0] => Array
        (
            [0] => Array
                (
                    [0] => revenue of $31-34 billion
                    [1] => consensus of $29.3 billion
                )
        )
) 
```

# mysql - MySQL按重复排序在前

> ID：15812870
> 
> 赞同：4
> 
> 时间：2013-04-04T13:35:42.943
> 
> 标签：mysql, sql, select

我有一个问题，就我不是 mysql 专业人士而言

我有像这样的领域

```
 id    color
   1     red
   2     green
   3     yellow
   4     green
   5     green
   6     red 
```

我想按重复分组，首先是最常见的重复，所以应该这样选择：

```
 id    color
   2     green
   4     green
   5     green
   1     red
   6     red
   3     yellow 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T13:37:11.527

> *“......最常见的重复首先。”*

询问，

```
SELECT  a.*
FROM    TableName a
        INNER JOIN 
        (
            SELECT  Color, COUNT(*) totalCount
            FROM    TableName
            GROUP   BY Color
        ) b ON  a.Color = b.Color
ORDER   BY b.TotalCount DESC, a.ID ASC 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/f9938/2)

输出

```
╔════╦════════╗
║ ID ║ COLOR  ║
╠════╬════════╣
║  2 ║ green  ║
║  4 ║ green  ║
║  5 ║ green  ║
║  1 ║ red    ║
║  6 ║ red    ║
║  3 ║ yellow ║
╚════╩════════╝ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T13:39:51.473

```
SELECT ID, COLOR
FROM MYTABLE A
JOIN
(
SELECT COLOR, COUNT(*) CN
FROM MYTABLE
GROUP BY COLOR
) B
ON B.COLOR = A.COLOR
ORDER BY B.CN, A.ID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T13:53:17.533

这是查询：

```
SELECT B.* FROM
(
    SELECT color,COUNT(1) occurrences
    FROM colortable GROUP BY color
) A LEFT JOIN colortable B USING (color)
ORDER BY A.occurrences DESC,color; 
```

这是示例数据

```
mysql> use test
Database changed
mysql> DROP TABLE colortable;
Query OK, 0 rows affected (0.00 sec)

mysql> CREATE TABLE colortable
    -> (
    ->     id int not null auto_increment,
    ->     color varchar(20),
    ->     primary key (id)
    -> );
Query OK, 0 rows affected (0.05 sec)

mysql> INSERT INTO colortable (color) VALUES
    -> ('red'),('green'),('yellow'),
    -> ('green'),('green'),('red');
Query OK, 6 rows affected (0.00 sec)
Records: 6  Duplicates: 0  Warnings: 0

mysql> SELECT * from colortable;
+----+--------+
| id | color  |
+----+--------+
|  1 | red    |
|  2 | green  |
|  3 | yellow |
|  4 | green  |
|  5 | green  |
|  6 | red    |
+----+--------+
6 rows in set (0.00 sec)

mysql> 
```

这是查询的执行：

```
mysql>     SELECT B.* FROM
    ->     (
    ->         SELECT color,COUNT(1) occurrences
    ->         FROM colortable GROUP BY color
    ->     ) A LEFT JOIN colortable B USING (color)
    ->     ORDER BY A.occurrences DESC,color;
+------+--------+
| id   | color  |
+------+--------+
|    2 | green  |
|    4 | green  |
|    5 | green  |
|    6 | red    |
|    1 | red    |
|    3 | yellow |
+------+--------+
6 rows in set (0.00 sec)

mysql> 
```

试试看 ！！！

# javascript - 在ajax函数提交表单中找不到错误

> ID：15812871
> 
> 赞同：0
> 
> 时间：2013-04-04T13:35:45.470
> 
> 标签：javascript, jquery, forms, form-submit

我有这个功能，在**IE8 中只有**不`alert`触发并且`ajax`部分根本不运行。尽管`return false`. 为什么会这样？为什么它只发生在 IE8 中？

```
$(document).ready(function(){
    $('form[name="DownloadForm"]').submit(function(){
        var valCases = new Array()
        valCases.push(($('input[name="firstname"]').val()!="") ? true : false )
        valCases.push(($('input[name="lastname"]').val()!="") ? true : false )
        valCases.push(($('input[name="company"]').val()!="") ? true : false )
        valCases.push(($('input[name="email"]').val()!="") ? true : false )

        alert(valCases.indexOf(false)) //this alert doesn't fire!

        if (valCases.indexOf(false)==-1) {
            $.ajax({
                url: url,
                type: 'POST',
                data: $(this).serialize(),
                beforeSend: function(){
                    //before
                },
                success: function(data) {
                    //do something
                },
                error: function(data) {
                    //error
                }
            });
            return false;
      } else {
            $('.inl-table tr').each(function(index){
                if (index==valCases.indexOf(false)) {
                    $(this).next().children('th').css('color','red');
                }
            });
            return false;
      }
      return false;
    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:38:38.043

问题可能是，这个数组函数在 IE8 中不存在：

```
valCases.indexOf(false) 
```

当然，这不能解释丢失的警报:)
编辑：好的，我读错了你的代码。它解释了丢失的警报；）

你会在这个链接下找到一个 polyfill： [MDN - Array indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

由于您已经在使用 jQuery，因此您也可以在可用时使用`jQuery.inArray`它回退到本机`indexOf`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:39:08.567

用掉ajax函数吧：

```
var dd =$(this).serialize(); 
```

在阿贾克斯

```
data :dd, 
```

# java - 是否可以在 Java 中使用扩展类的 getter/setter

> ID：15812872
> 
> 赞同：3
> 
> 时间：2013-04-04T13:35:48.120
> 
> 标签：java

我有以下

```
public abstract class MyData
{
      private String sID;
      public void setsID(String sID) {
        this.sID= sID;
    }
       public String getsID() {
        return sID;
    }
} 
```

这个基类正在被其他 2 个类扩展

```
public class DataTypeOne extends MyData
{
       private String sName;
       public void setsName(String sName) {
        this.sName= sName;
        }
           public String getsName() {
            return sName;
        }
}

public class DataTypeTwo extends MyData
{
       private String sSummary;
       public void setsSummary(String sSummary) {
        this.sSummary= sSummary;
        }
           public String getsSummary() {
            return sSummary;
        }
} 
```

我正在初始化这个类如下

```
MyData oDataOne = new DataTypeOne();
MyData oDataTwo = new DataTypeTwo(); 
```

原因是我有一个工厂方法，它会根据类型（一个或两个）给我一个类

使用 oDataOne 和 oDataTwo，我可以`getsID()`从基类访问，但不能从相应类的 getter 和 setter 访问。

我怎样才能访问这些？一世

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:39:21.213

您无法访问不存在的方法。您向您的 Java 编译器承诺的`oDataOne`只是`oDataTwo`对象`MyData`。由于`MyData`该类没有特定于实现的方法，因此您不能要求 Java 调用这些方法（因为它认为它们不存在）。

如果要访问这些方法，则需要将对象强制转换为实际具有正确方法的类，或者可以将抽象方法存根添加到基类，这将告诉 Java 这些方法确实存在。

类型转换在短期内写起来更简单，但不太清楚，你可能会遇到更多麻烦：

```
((DataTypeOne) oDataOne).getsName();
((DataTypeTwo) oDataOne).getsSummary(); // Throws ClassCastException! 
```

添加抽象存根更健壮，但如果不是所有具体子类都应该实现所有抽象方法，则可能没有意义：

```
public abstract class MyData {
    public abstract void setsName(String name);
    public abstract String getsName();
    public abstract void setsSummary(String summary);
    public abstract String getsSummary();
}
public class DataTypeOne extends MyData {
    public String getsName() {
        // implement
    }
    public void setsName(String name) {
        // implement
    }

    // Still have to implement these!!!
    public String getsSummary() {
        // raise an exception or something if appropriate
    }
    public void setsSummary(String summary) {
        // raise an exception or something if appropriate
    }
}
// Same for DataTypeTwo 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T13:40:24.760

由于您将变量声明为 MyData，因此您只能访问 MyData 的方法。您可以通过将其转换为 DataTypeOne 或 DataTypeTwo 来访问子类方法：

```
 ((DataTypeOne)oDataOne).getsName() 
```

但是你需要确保它是 DataTypeOne 类型，否则你会得到一个`ClassCastException`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T13:42:44.270

```
MyData oDataOne = new DataTypeOne(); 
```

这说，你的`oDataOne`对象是类型`MyData`。即使它被创建为`DataTypeOne`，java 也只能确定它绝对是一个`MyData`实例。

如果您确定该`MyData`实例实际上也是一个`DataTypeOne`实例，则可以强制转换然后访问`DataTypeOne`方法+`MyData`方法。

确保对象属于特定类型测试：

```
if(oDataOne instanceOf DataTypeOne){
    ((DataTypeOne) oDataOne).getsName();  // this will return the Name if oDataOne is really of the type DataTypeOne
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T13:40:00.237

类型的对象`MyData`不知道是否有任何其他类扩展它，因此无法访问这些类的成员。

您必须将对象转换为特定类型才能访问特定成员。

如果你发现自己处于这种情况，你可以很确定你的设计是有缺陷的。如果您需要为每种类型的`MyData`扩展执行特定的操作，请添加一个方法，例如`specialAction()`到接口并隐藏其中的细节。这消除了找出您正在处理的子类的全部需要。

# android - 自定义列表视图中的异步 http 调用

> ID：15812874
> 
> 赞同：1
> 
> 时间：2013-04-04T13:35:52.783
> 
> 标签：android, android-asynctask

我对自定义列表视图中的异步 http 调用有疑问。如何在我的以下自定义 Listview 中调用异步调用并解析 json 以填充 Listview 。我的自定义列表视图包含来自图像和文本。

```
import java.util.ArrayList;

import android.annotation.SuppressLint;
import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.app.ListActivity;
import android.os.Bundle;
import android.os.StrictMode;
import android.view.Menu;
import android.view.View;
import android.widget.ListView;

public class ListActivityS extends ListActivity 
{

    private GetHttpCall getCall;

    String item[];
    int id[];

    ArrayList<Video> videos;

    @SuppressLint("NewApi")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);

        super.onCreate(savedInstanceState);

        //Crearte instance to http call
        getCall=new GetHttpCall();
        String response=null;
        try {
            response=getCall.connect();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        JSONParser _parser=new JSONParser();
        _parser.parseHttpJson(response);

        item = JSONParser.num_title;
        id=JSONParser.num_id;

        videos=new ArrayList<Video>();

         for(int i=0;i<item.length;i++)
         {
             Video vid=new Video();
             vid.setTitle(item[i]);
             vid.setId(id[i]);

             videos.add(vid);
         }

        getListView().setDividerHeight(2);

        getListView().setAdapter(new BindDataAdapter(this, videos));
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        Builder builder = new AlertDialog.Builder(this);
        builder.setMessage(item[position] + " is clicked.");
        builder.setPositiveButton("OK", null);
        builder.show();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_list, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:47:25.413

您在创建时开始获取 http 请求，这很糟糕。该请求应该在一个单独的线程中执行，例如在 asynctask 中。

*   在创建时，使用临时项（如进度项）初始化列表。
*   在 on create 中，启动一个异步任务， -- 在 asynctask 中，在 doBackground 中，执行请求 -- 在 asynctask 中，在 onPostExecute 中，删除临时项并添加您的项结果。

如果您需要，我可以提供一些代码，但是到处都有很多很好的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:48:12.733

参考[这个](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)和[这个](http://mobile.tutsplus.com/tutorials/android/build-a-twitter-search-app-fetch-parse-the-twitter-json-feed/).. 在那个教程中，他们将使用 AsyncTask 来获取 JSON 推文，解析它们，然后在 ListView 中显示它们。

thry 正在使用 AsyncTask 对用户搜索查询执行推文提要的获取、解析和显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:49:04.950

您需要使用`AsyncTask`下载要显示的数据，然后通过更新列表适配器来实际显示该信息，因此`ListView`

```
private GetStuff extends AsyncTask<Void, Void, Void>{

    @Override
    protected Void doInBackground(Param . . . params){
        //Do all you i/o stuff like downloading content here
        return null;
    }

    @Override
    protected void onPostExecute(){
        //update your list adapter here
    }
} 
```

如果需要，您可以[在此处阅读有关 AsyncTask 的更多信息](http://developer.android.com/reference/android/os/AsyncTask.html)。使用它来更新列表视图时的想法如下。

(1) 执行所有的 i/o 功能`doInBackground`。从 Jellybean 开始，这不是一个选择，而是一个要求。任何涉及 i/o 的东西都必须在后台。此外，在这里处理任何位图或其他内容也是一个好习惯，因为它可以避免阻塞 UI 线程。获取您的内容并在此处进行处理。

(2)更新`ListView`onPostExecute中的。一旦完成，在该`AsyncTask`结构`onPostExecute`中运行您在 UI 线程中包含的任何方法。`doInBackround`由于您必须`ListView`从 UI 线程更新，因此您用于更新适配器和通知数据集更改的方法必须在此处进行。

(3) 创建一个新任务并在您的活动中执行它。当您想要开始下载和更新过程时，您需要添加以下内容

```
GetStuff get = new GetStuff();
get.execute(); 
```

这实际上将启动任务运行。

`AsyncTask`就是这样，您可以根据您是否需要从不同的方法或任务本身传递事物来调整实现以满足您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T13:50:57.190

我建议您阅读 和 的基础`ListView`知识`AsyncTask`。

您的方法中有一些基本错误，例如

> 如何在以下自定义 Listview 中调用异步调用并解析 json 以填充 Listview

一个人不会`AsyncTask`从 a中调用一个`ListView`来填充`ListView`自身。最佳实践表明，您总是在用户生成的事件（如按钮点击）上调用 AsyncTask，当您获得响应时`PostExecute`，`AsyncTask`从那里启动 ListViewActivity！

这里有一些很好的教程：

*   [**在后台 AsyncTask 中加载 ListView**](http://android-er.blogspot.in/2010/07/load-listview-in-background-asynctask.html)
*   [**Android AsyncTask 示例**](http://samir-mangroliya.blogspot.in/p/android-asynctask-example.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T13:53:23.340

[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

称呼`new AsyncAction().execute(null, null, null);`

```
@Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        Builder builder = new AlertDialog.Builder(this);
        builder.setMessage(item[position] + " is clicked.");
        builder.setPositiveButton("OK", null);
        builder.show();
    }

private class AsyncAction extends AsyncTask<String, Void, String> {
        public boolean status = false;
        private ProgressDialog pd;

        @Override
        protected String doInBackground(String... arg0) {
            // TODO Auto-generated method stub
            try {

                status = true;

//Crearte instance to http call
        getCall=new GetHttpCall();
        String response=null;
        try {
            response=getCall.connect();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        JSONParser _parser=new JSONParser();
        _parser.parseHttpJson(response);

        item = JSONParser.num_title;
        id=JSONParser.num_id;

        videos=new ArrayList<Video>();

         for(int i=0;i<item.length;i++)
         {
             Video vid=new Video();
             vid.setTitle(item[i]);
             vid.setId(id[i]);

             videos.add(vid);
         }

        getListView().setDividerHeight(2);

            } catch (Exception e) {
                // TODO: handle exception
            }

            return null;
        }

        @Override
        protected void onPostExecute(String result) {

            pd.dismiss();

             getListView().setAdapter(new BindDataAdapter(this, videos));

        }

        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            pd = new ProgressDialog(listmessages.this);
            pd.setMessage("loading...");
            pd.setIndeterminate(true);
            pd.setCancelable(false);
            pd.show();
        }

    }

        }

    } 
```

# django - Django 从多个表中检索数据

> ID：15812876
> 
> 赞同：2
> 
> 时间：2013-04-04T13:36:05.040
> 
> 标签：django, orm

我有两个 MySQL 模型：

```
class registration(models.Model):
   name = models.CharField(max_length=30)
   email = models.EmailField()
   password = models.CharField(max_length=30)
   company = models.CharField(max_length=30)

class personal_details(models.Model):
   reg = models.ForeignKey(registration)
   job = models.CharField(max_length=30)
   experience = models.IntegerField(default=0) 
```

我想使用经验和公司作为关键字来过滤详细信息。我想从我的 HTML 页面中的两个表中获取并显示详细信息（姓名、电子邮件、公司、工作、经验）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T01:28:42.390

```
details = personal_details.objects.filter(experience=1, 
    reg__company="YourCompany").select_related()

{% for detail in details %}
    Name: {{ detail.reg.name }}
    Email: {{ detail.reg.email }}
    Company: {{ detail.reg.company }}
    Job: {{ detail.job }}
    Experience: {{ detail.experience }}<br/>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T17:35:58.480

如果没有对您的问题进行更深入的解释，就很难正确回答您的问题，但这里有：

一种选择：

```
# views.py
def mypage(request):

    details = Personal_details.objects.select_related().filter(experience=3)
    names = [d.reg.name for d in details]

    return render(request, 'mypage.html', {'names': names})

# html

<p>People with 3 experience:</p>
<ul>
    {% for name in names %}
        <li>{{ name }}</li>
    {% empty %}
        <li>Nobody has 3 experience!</li>
    {% endfor %}
</ul> 
```

另外一个选项：

```
# views.py
def mypage(request):

    details = Personal_details.objects.select_related().all()
    names = [d.reg.name for d in details]
    info = zip(details, names)

    return render(request, 'mypage.html', {'info': info})

#html

<ul>
    {% for detail, name in info %}
        {% if detail.experience == 0 %}
            <li>{{ name }} has 0 experience</li>
        %{ elif detail.experience == 1 %}
            <li>{{ name }} has 1 experience</li>
        # and so on and so forth....
        {% endif %}
    {% endfor %}
</ul> 
```

**请注意**我如何将您的模型（即类）名称大写。这是惯例，你应该遵守它。

所以这可能是也可能不是你希望做的，它可能不是最好的方法，但希望它能让你开始自己的解决方案。我建议阅读 Django[视图](https://docs.djangoproject.com/en/dev/intro/overview/#write-your-views)和[模板标签](https://docs.djangoproject.com/en/1.5/ref/templates/builtins/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T13:45:49.267

首先得到一个personal_details列表（经验等于9），如下所示：

```
p_details_list = personal_details.objects.filter(experience=9) 
```

之后你可以访问每个元素的`reg`属性，它会给你相应的`registration`对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T13:42:00.107

不确定您想要什么数据，但您可以通过`personal_details`两种方式从对象 ForeignKey 关系中提取数据。

通过反向关系`_set`，我只是在这里从臀部拍摄：

```
reg = registration.objects.get(pk=1)
print reg.personaldetails_set.job 
```

否则，通过正常的 FK 方式。

```
details = personal_details.objects.get(pk=1)
print details.reg.name 
```

# android - 致命异常但没有崩溃（Android）

> ID：15812879
> 
> 赞同：0
> 
> 时间：2013-04-04T13:36:19.410
> 
> 标签：android, exception

我得到了很多以下内容：

```
/AndroidRuntime(25329): FATAL EXCEPTION: Thread-1276

E/AndroidRuntime(25329): java.lang.NullPointerException 
```

但是在我得到这个异常的每个地方，我都对空值进行了适当的检查。另外，我得到了这些异常，但没有崩溃。那么，如果没有崩溃并且应用程序运行顺利，异常意味着什么。

代码：

```
if (jObject != null){
jObject.removelisteners();
jObject = null;
} 
```

谢谢。

# c# - 从表单c#中转义大括号输入

> ID：15812889
> 
> 赞同：3
> 
> 时间：2013-04-04T13:36:49.183
> 
> 标签：c#

我知道为了在 String.Format 中使用花括号，我必须使用双花括号，即“{{”和“}}”。我的问题是，如何使用来自表单的字符串进行这项工作？我试过了

```
str.Replace("{","{{");
str.Replace("}","}}"); 
```

但这似乎不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T13:39:04.737

String 是一个[不可变的类](http://msdn.microsoft.com/en-us/library/system.string.aspx#Immutability)。您必须将更正后的字符串重新分配回`str`

```
str = str.Replace("{","{{");
str = str.Replace("}","}}"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T13:38:51.843

`str.Replace`没有改变`str`。它返回一个新实例。

所以你可能想试试这个：

```
str = str.Replace(...); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T13:39:19.817

尝试 ：

```
 str = str.Replace("{","{{");
    str = str.Replace("}","}}"); 
```

# sql-server - 从单个表插入多个表，无效列名错误

> ID：15812890
> 
> 赞同：1
> 
> 时间：2013-04-04T13:36:49.967
> 
> 标签：sql-server, tsql, insert

我正在尝试执行以下操作，但收到“无效的列名 {column}”错误。有人可以帮我看看我的方式的错误吗？我们最近将一个事务表拆分为 2 个表，一个包含经常更新的报告列名称，另一个包含不变的事务。这让我试图将简单的插入 1 个表更改为复杂的插入 2 个具有唯一列的表。我试图这样做：

```
INSERT INTO dbo.ReportColumns
(
    FullName
    ,Type
    ,Classification
)
OUTPUT INSERTED.Date, INSERTED.Amount, INSERTED.Id INTO dbo.Transactions
SELECT
    [Date]
    ,Amount
    ,FullName
    ,Type
    ,Classification
FROM {multiple tables} 
```

“INSERTED.Date, INSERTED.Amount”是错误的来源，有或没有“INSERTED”。在前。

- - - - - - - - -更新 - - - - - - - - -

Aaron 是正确的，用插入来管理是不可能的，但我能够极大地改进插入的功能，并使用合并功能添加一些其他业务规则。我的最终解决方案类似于以下内容：

```
DECLARE @TransactionsTemp TABLE
(
    [Date] DATE NOT NULL,
    Amount MONEY NOT NULL,
    ReportColumnsId INT NOT NULL
)

MERGE INTO dbo.ReportColumns AS Trgt
USING ( SELECT
            {FK}
    ,[Date]
    ,Amount
    ,FullName
    ,Type
    ,Classification
FROM {multiple tables}) AS Src
ON Src.{FK} = Trgt.{FK} 
WHEN MATCHED THEN
    UPDATE SET 
    Trgt.FullName = Src.FullName,
    Trgt.Type= Src.Type,
    Trgt.Classification = Src.Classification
WHEN NOT MATCHED BY TARGET THEN
    INSERT
    (
        FullName,
        Type,
        Classification
    )
    VALUES
    (
        Src.FullName,
        Src.Type,
        Src.Classification
    )
OUTPUT Src.[Date], Src.Amount, INSERTED.Id INTO @TransactionsTemp;

MERGE INTO dbo.FinancialReport AS Trgt
USING (SELECT
      [Date] ,
          Amount ,
          ReportColumnsId
          FROM @TransactionsTemp) AS Src
ON Src.[Date] = Trgt.[Date] AND Src.ReportColumnsId = Trgt.ReportColumnsId
WHEN NOT MATCHED BY TARGET And Src.Amount <> 0 THEN
        INSERT
        (
            [Date],
            Amount,
            ReportColumnsId
        )
        VALUES
        (
            Src.[Date],
            Src.Amount,
            Src.ReportColumnsId
        )
WHEN MATCHED And Src.Amount <> 0 THEN
        UPDATE SET Trgt.Amount = Src.Amount
WHEN MATCHED And Src.Amount = 0 THEN
        DELETE; 
```

希望将来能帮助别人。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:41:17.423

`Output`子句将返回您要插入到表中的值，您需要多次插入，您可以尝试以下操作

```
declare @staging table (datecolumn date, amount decimal(18,2),
                       fullname varchar(50), type varchar(10), 
                       Classification varchar(255));

INSERT INTO @staging
SELECT
    [Date]
    ,Amount
    ,FullName
    ,Type
    ,Classification
FROM {multiple tables}

Declare @temp table (id int, fullname varchar(50), type varchar(10));
INSERT INTO dbo.ReportColumns
(        
    FullName
    ,Type
    ,Classification
)
OUTPUT INSERTED.id, INSERTED.fullname, INSERTED.type INTO @temp
SELECT
    FullName
    ,Type
    ,Classification
FROM @stage

INSERT into dbo.transacrions (id, date, amount)
select t.id, s.datecolumn, s.amount from @temp t
inner join @stage s on t.fullname = s.fullname and t.type = s.type 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:43:44.380

我相当肯定你需要有两个插入（或创建一个视图并使用一个而不是插入触发器）。您只能使用 OUTPUT 子句将变量或*实际插入的值*发送到另一个表。在插入过程中，您不能使用它将选择拆分为两个目标表。

如果您提供更多信息（例如如何拆分表格以及如何关联行），我们可能会提供更具体的答案。

# xcode - [__NSArrayM insertObject:atIndex:]: 对象不能为 nil

> ID：15812899
> 
> 赞同：0
> 
> 时间：2013-04-04T13:37:08.170
> 
> 标签：xcode, null, sigabrt

由于某种原因，我找不到我收到以下错误：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', 
reason: '*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil' 
```

因为我是 xCode 的新手，所以我需要一些帮助。应用程序在以下行中崩溃：

```
[self.window makeKeyAndVisible]; 
```

在 ASAppDelegate.m 文件中。

整个函数是这样的：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
// Override point for customization after application launch.

AS_MainViewController *MyrootViewController = [[AS_MainViewController alloc]
                        initWithNibName:@"AS_MainViewController" bundle: [NSBundle mainBundle]];

self.window.rootViewController = MyrootViewController;

self.window.backgroundColor = [UIColor whiteColor];

return YES;
} 
```

请你帮助我好吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:38:48.533

终于解决了错误。我开始了一个新的空项目，并从头开始完成所有工作。由于我也是从旧的复制粘贴，一步一步的我也每一步都在运行。应用程序运行没有问题。我完成了它，现在它运行了。我可以理解为什么以及这个错误是什么，但是在一个新项目（与旧项目具有相同的代码）中，问题不存在！

无论如何，谢谢你的帮助。

# java - 如何取消选中一个复选框？

> ID：15812904
> 
> 赞同：-1
> 
> 时间：2013-04-04T13:37:17.670
> 
> 标签：java, swing, jcheckbox

当我单击清除按钮时，我想取消选中一个复选框。下面的代码不起作用。

```
 jCheckBox1.setSelected(false);

        jCheckBox2.setSelected(false);

        jCheckBox3.setSelected(false);

        jCheckBox4.setSelected(false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:57:09.047

它工作并且没有问题，

例如：

```
final JCheckBoxcb1 = new JCheckBox("A");
final JCheckBoxcb2 = new JCheckBox("B");
JPanel panel = new JPanel();
JFrame frame = new JFrame("");
Button boton = new Button("Clear");
panel.add(boton);
panel.add(cb1);
panel.add(cb2);
frame.add(panel);
frame.add(panel);
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.setSize(500, 500);
frame.setVisible(true);
boton.addActionListener(new ActionListener() {
 public void actionPerformed(ActionEvent e) {
      cb1.setSelected(false);
      cb2.setSelected(false);
     }
  }); 
```

# asp.net-mvc-3 - 在实体框架中更新模型

> ID：15812905
> 
> 赞同：0
> 
> 时间：2013-04-04T13:37:18.460
> 
> 标签：asp.net-mvc-3, entity-framework

我正在尝试制作一个使用实体框架的 MVC 3 应用程序。我首先使用实体​​框架数据库。我制作了一个带有 2 个表的 Sql Server 数据库，然后我使用实体框架生成了模型、类。然后我添加了另外 2 列表中的一个。如何使用此列更新我的 MVC 模型？是否存在一种自动方式来执行此操作（我可以运行该命令以在我的模型中进行所有修改）？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:40:46.437

你在看设计器还是代码视图？您可以通过右键单击您的 EDMX 文件并选择来强制打开设计器`Open With -> ADO.NET Entity Data Model Designer`

右键单击 EDMX 设计器的设计器表面，然后单击`Update Model From Database...`

默认情况下会刷新所有实体，仅当您选择它们​​时才会添加新实体。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-04T15:53:40.680

选择您的 xxx.edmx 文件。CTRL + A 选择所有表，然后按 DELETE 删除它们。右键单击 UpdateModel，选择您的表、视图、存储过程并包含它们。CTRL + S 保存并自动生成模型部分类

# c++ - C++ - 以编程方式调用正确的函数参数

> ID：15812911
> 
> 赞同：-3
> 
> 时间：2013-04-04T13:37:37.530
> 
> 标签：c++

我有个问题。说我有这个代码：

```
int myfunc(int arg-a, int arg-b); 
int mywrapperfunc(obj a, obj b); 
```

mywrapperfunc 应该包装 myfunc。mywrapperfunc 丢弃第一个参数并采用第二个参数，它是一个数组。然后我使用数组项作为参数。但是假设我不知道 myfunc 需要多少个参数，也不知道数组类型的 object(b) 中有多少项。如何以正确数量的 args 以编程方式调用 myfunc？移交的 args 数量将与数组类型对象中的项目数相同。编辑： arg-a 和 arg-b 应该来自数组类型对象。我将对象拆分为 args。编辑：我试图用某种意义来包装 Cython，隐藏大多数后台工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:44:18.853

它被称为`reflection`，你不能用 c++ 做到这一点。为此，请使用其他语言，例如 java 或 c#。

# javascript - 如何在textarea中显示输入（名称+值）？

> ID：15812912
> 
> 赞同：0
> 
> 时间：2013-04-04T13:37:38.103
> 
> 标签：javascript, jquery, html

我正在处理这个项目，当同一表单中的一个输入值发生更改时，我需要更改 textarea 的值。

HTML：

```
<form id="form" action="" method="">
<textarea readonly class="overview"></textarea>
<input type="text" class="add" name="product1" />
<input type="text" class="add" name="product2" />
<input type="text" class="add" name="product3" />
<input type="text" class="add" name="product4" />
</form> 
```

允许客户更改 input.class。每当输入之一更改时，textarea-value 应该更改。

文本区域应显示如下：
3 x product1
1 x product3
4 x product4

有人有想法吗？

提前致谢，

乔尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:42:24.363

```
<textarea readonly class="overview" id="mytxtarea"></textarea>
   $("#product1").blur(function(){
   if($("#product1").val()!='')
     {
      $("#mytxtarea").val('test value');
     }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:53:04.733

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Test</title>

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $('#form .add').on('keyup', function(){
                console.log('test');
                var string1 = $('#form .product1').val() + ' x product1\n';
                var string2 = $('#form .product2').val() + ' x product2\n';
                var string3 = $('#form .product3').val() + ' x product3\n';
                var string4 = $('#form .product4').val() + ' x product4';

                $('#form textarea').val(string1 + string2 + string3 + string4);
            });
        });
    </script>
</head>
<body>
    <form id="form" action="" method="">
        <textarea readonly class="overview"></textarea>
        <input type="text" class="add product1" name="product1" />
        <input type="text" class="add product2" name="product2" />
        <input type="text" class="add product3" name="product3" />
        <input type="text" class="add product4" name="product4" />
    </form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:47:51.947

```
$('input').keyup(function () {
    var inputedValue = $(this).val();
    var name = $(this).attr('name');
    $(".overview").text(inputedValue+name);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T13:54:08.010

这将做你想要的......

```
$("input.add").keyup(function() {
    var msg = "";
    $("input.add").each( function() {
        if( $(this).val() ) {
            msg += $(this).val() + "x " + $(this).attr("name") + "\n";
        }
    });
    $("textarea.overview").text(msg)
}); 
```

我在这里与您的 HTML 一起使用：http: [//jsfiddle.net/XYXpp/](http://jsfiddle.net/XYXpp/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T13:56:44.560

```
 $(".add").keyup(function () {
 var app=""
 $(".add").each(function () {
       if( $(this).val() ) {
     var value=$(this).val();
     var name=$(this).attr('name');
     app +=value+"*"+name+ "\n" ;     
       }
 });
  $(".overview").text(app); 
```

});

看[这个](http://jsfiddle.net/JBjDN/3/)。

希望这会给你一些解决方案。

# c# - System.Collections.Generic.IEnumerable' 不包含 'ToList' 的任何定义

> ID：15812913
> 
> 赞同：94
> 
> 时间：2013-04-04T13:37:38.373
> 
> 标签：c#, asp.net-mvc-3

这是问题所在。我从 ViewPage 获得 IEnumerable ，当我尝试将它转换为 List 时，它向我显示如下错误：

> “ `System.Collections.Generic.IEnumerable<Pax_Detail>`”不包含“ToList”的定义，并且找不到接受“ `System.Collections.Generic.IEnumerable<Pax_Detail>`”类型的第一个参数的扩展方法“ToList”（您是否缺少 using 指令或程序集引用？）

这是我的控制器代码：

```
[HttpPost]
public ActionResult Edit_Booking(Booking model, IEnumerable<Pax_Detail> pax)
{
  List<Pax_Detail> paxList = new List<Pax_Detail>();
  paxList = pax.ToList(); //getting error here
  BookingDL.Update_Booking(model, paxList);
  return View();
} 
```

我在另一个控制器上应用了相同的逻辑。它工作正常。我不知道它有什么问题。我已经清理、重建项目并重新启动了我的笔记本电脑（尽管它是必需的）。

* * *

## 回答 #1

> 赞同：262
> 
> 时间：2013-04-04T13:39:37.383

您是否缺少 using 指令`System.Linq`？

[http://msdn.microsoft.com/en-us/library/bb342261.aspx](http://msdn.microsoft.com/en-us/library/bb342261.aspx)

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-04-04T13:40:07.917

您缺少对 System.Linq 的引用。

添加

```
using System.Linq 
```

访问当前代码文件上的 ToList() 函数。

* * *

提供一些关于为什么这是必要的信息，`Enumerable.ToList<TSource>`是一种扩展方法。扩展方法是在它所针对的原始类之外定义的。在这种情况下，扩展方法是在`System.Linq`命名空间上定义的。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-04T13:44:34.790

添加 LINQ 的替代方法是使用此代码：

```
List<Pax_Detail> paxList = new List<Pax_Detail>(pax); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-05-18T09:46:22.010

我缺少 System.Data.Entity dll 引用并且问题已解决

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-03T10:46:08.910

就我而言，我从另一个使用 Automapper 的项目中复制了一些代码——我花了很长时间才解决这个问题。只需将 automapper nuget 包添加到项目中。

# wordpress - 使用 htaccess 保护开发 Wordpress 站点

> ID：15812914
> 
> 赞同：0
> 
> 时间：2013-04-04T13:37:41.470
> 
> 标签：wordpress, apache, .htaccess

如何使用 htaccess 密码保护开发 Wordpress 网站免受搜索引擎和人类的侵害。

您还可以指定我需要将 .htaccess 文件保存在 wordpress 中的哪个文件夹以完成阻止它。

我尝试使用以下 htacess 文件，但仅登录主页显示后，其他页面不起作用。

```
SetEnvIf Host dev.test.com passreq
AuthType Basic
AuthName "restricted area"
AuthUserFile /home/user/dev.test.com/wp-content/themes/theme_name/.htpasswd
Require valid-user
Order allow,deny
allow from all
Deny from env=passreq
Satisfy any 
```

我究竟做错了什么？目前我将 .htaccess 文件保存在 *wp-content/theme/theme_name/.htaccess*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:44:07.160

您应该将您的文件放在您的 Webroot 中以完全使用密码保护它。将它放在 *wp-content/theme/theme_name 下只会保护从此目录提供的文件

# java - 如何禁用鼠标单击按钮操作事件？

> ID：15812915
> 
> 赞同：1
> 
> 时间：2013-04-04T13:37:50.447
> 
> 标签：java, swing, mouseevent, jbutton

有没有办法可以禁用鼠标单击？在面板中有不同的组件，对于某些按钮单击事件，我想禁用鼠标单击。我的意思是鼠标的点击对组件没有任何影响。我可以禁用该`setEnabled()`功能，但我不想那样做。

有什么办法可以禁用鼠标点击吗？

情况 ：

```
private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {  
       //..disable the mouse click on each component present inside the panel
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:31:51.667

您可以像这样创建一个按钮组：

```
public class SingleSelectionButtonGroup {

    private final List<JButton> buttons;

    public static SingleSelectionButtonGroup group(List<JButton> buttons) {
        return new SingleSelectionButtonGroup(buttons);
    }

    public static SingleSelectionButtonGroup group(JButton...buttons) {
        return new SingleSelectionButtonGroup(Arrays.asList(buttons));
    }

    private SingleSelectionButtonGroup(List<JButton> buttons) {
        this.buttons = new ArrayList<JButton>(buttons);
        setupListener();
    }

    private void setupListener() {
        ActionListener listener = new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                SingleSelectionButtonGroup.this.disableAllExcept((JButton) e.getSource());
            }
        };

        for (JButton button : buttons) {
            button.addActionListener(listener);
        }
    }

    private void disableAllExcept(JButton clickedButton) {
        for (JButton button : buttons) {
            if (!clickedButton.equals(button)) {
                button.setEnabled(false);
            }
        }
    }

} 
```

然后将它与要分组的按钮集合一起使用：

```
public class Application {

    public void run() {
        final JFrame frame = new JFrame("test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(new Dimension(400, 300));

        final JPanel pane = new JPanel();

        List<JButton> buttons = new ArrayList<JButton>();
        String[] texts = {"A", "B", "C"};

        for (String text : texts) {
            JButton button = new JButton(text);
            buttons.add(button);
            pane.add(button);
        }

        SingleSelectionButtonGroup.group(buttons);      
        frame.getContentPane().add(pane);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        new Application().run();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:58:15.957

您可以将扩展的 ActionListener 添加到所有按钮，如下所示：

```
public abstract class ExtendedActionListener implements ActionListener{

    private static boolean disabled = false;

    public static void setDisabled(boolean disabled){
        ExtendedActionListener.disabled  = disabled;
    }

    @Override
    public final void actionPerformed(ActionEvent e){

        if(disabled)
            return;

        doSomething;

    }
} 
```

现在只需通过调用方法禁用所有 ActionListeners `setDisabled(false)`。Button 的视觉行为根本没有改变，但是当您单击它时什么也没有发生。

如果视觉点击行为无关紧要，那么您可以删除 MouseListeners。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-07T07:17:14.267

**你应该使用你的听众的一个公共类，并有打开和关闭听众的静态方法**

```
public abstract class BaseMouseListener implements ActionListener{

private static boolean active = true;
public static void setActive(boolean active){
    BaseMouseListener.active = active;
}

protected abstract void doPerformAction(ActionEvent e);

@Override
public final void actionPerformed(ActionEvent e){
    if(active){
        doPerformAction(e);
    }
}
} 
```

**你的听众必须实现** `doPerformedAction()`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-04T13:44:29.320

添加空鼠标侦听器。这将“禁用”点击，因为它不会产生任何影响。

# java - 如何通过读取另一个文件并对其进行一些更改来写入文件

> ID：15812931
> 
> 赞同：-3
> 
> 时间：2013-04-04T13:38:30.223
> 
> 标签：java

嗨，我正在尝试读取文本文件，然后通过更改从第一个文件读取的数据中的某些字段，将读取的数据写入 Java 中的新文件。我被困在这里：我可以读取文件但选择性修改非常困难，我不明白如何修改文件中行的特定部分？文本文件为 details.txt，其内容如下：

彼得，纽约，2331.32

沃尔什，加利福尼亚州，3224.43

等等。现在，我想使用包含更新值的数组来修改双精度值，如下所示：

```
Double[] updatedValues = {33231.23,32344.34}; 
```

谁能告诉我如何通过从数组中读取值并将这些值写入新的文本文件来更新双精度值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:42:31.843

一种可能的方法是使用`String.split()`方法拆分行，组成新行，然后将其写入文件。例如：

```
String[] data = line.split(",");
data[2] = "" + updatedValues[i];
// now join array of data back and write it to the new file. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:58:44.350

您可以使用`String.split()`来执行此操作

这是伪代码：

```
Double[] updatedValues = {33231.23,32344.34}
While (read line from file !=null or empty)
{
String[] tokens= line.split(",");
tokens[2] = "" + updatedValues[i];
//now write the three values in the string array tokens to another file separated by some seperator
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:52:23.010

尝试

```
 double[] updatedValues = {33231.23,32344.34 .....
    Scanner sc = new Scanner(new File("file1"));
    PrintWriter pw = new PrintWriter(new File("file2"));
    for (int i = 0; sc.hasNextLine(); i++) {
        String l = sc.nextLine();
        l = l.substring(0, l.lastIndexOf(','));
        pw.printf("%s,%f%n", l, updatedValues[i]);
    }
    sc.close();
    pw.close(); 
```

请注意，updatedValues 长度应 >= 文件行数

# javascript - javascript对象都是一样的

> ID：15812932
> 
> 赞同：4
> 
> 时间：2013-04-04T13:38:32.303
> 
> 标签：javascript

下面的代码有什么区别

1）前两个构造函数是否相同，只是范围不同？

2）如果第三个对象实例化为对象，它们是否与前两个对象相同？

感谢您的帮助？

```
 function StaffMember(name){
        this.name = name;
        this.total = 0;
        this.discountPercent = function(){
            //do stuff
        };
    }

    StaffMember.prototype.calculateTax = function(){
    //work out tax

    }; 
```

或者

```
var StaffMember = function(name){
    this.name = name;
    this.discountPercent = function(){
            //do stuff
    };
}

StaffMember.prototype.calculateTax = function(){
//work out tax

}; 
```

或者

```
var StaffMember {
    name:"",
    discountPercent:function(){
            //do stuff
    },
    calculateTax : function(){
                     //work out tax

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:45:25.897

### 发生了什么

```
 function StaffMember(name){
        this.name = name;
        this.total = 0;
        this.discountPercent = function(){
            //do stuff
        };
    }

    StaffMember.prototype.calculateTax = function(){
    //work out tax

    }; 
```

这将创建一个构造函数并将另一个函数添加到其原型中。如果您随后调用`new StaffMember("bob")`它将创建一个对象，其本地属性名称设置为`bob`，本地属性总计设置为 0，本地函数 discountPercent 和静态函数 calculateTax

```
var StaffMember = function(name){
    this.name = name;
    this.discountPercent = function(){
            //do stuff
    };
}

StaffMember.prototype.calculateTax = function(){
//work out tax

}; 
```

除了没有总属性外，这与上述等价。请注意，到目前为止，您尚未创建我认为您正在尝试创建的此 StaffMember 对象的实例。你刚刚定义了一个函数并将另一个函数放在它的原型上

```
var StaffMember {
    name:"",
    discountPercent:function(){
            //do stuff
    },
    calculateTax : function(){
                     //work out tax

    }
} 
```

这是无效的语法，您需要`=`在 StaffMember 之后，否则这将创建一个具有 name、discountPercent 和 calculateTax 属性的对象。

这个对象实际上是存在的，因为你已经直接创建了它，对于你需要调用的其他对象`var something = new StaffMember()`。

### 差异

1 和 2 之间没有显着区别，除了在函数中定义这些东西的位置（第一个示例将被提升到当前函数范围的顶部，第二个示例直到代码中的那个点才会设置）。

一旦你调用了`new StaffMember()`，你正在创建的对象和你在第三个示例中直接创建的对象之间会有一些差异。

最重要的是原型对象将在对象之间共享，而不是每次创建新对象时都创建新对象。这并不是很重要，因为您只是在其中放置了一个函数，因此实际性能将是相同的，但它会节省一些内存，并且如果您在原型上放置一个像数组这样的对象，它的作用会有所不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T13:45:29.253

对于前 2 个函数，当您调用它们（构造函数）时，它们会创建对象。但是它们都共享原型中的功能`calculateTax`。最后一个已经是一个对象，一个具有数据和功能的对象文字。

```
function StaffMember(name){
        this.name = name;
        this.total = 0;
        this.discountPercent = function(){
            //do stuff
        };
}

StaffMember.prototype.calculateTax = function(){
    //work out tax
    console.log(this.total);
};

var objStaffMember = new StaffMember("User");
objStaffMember.total = 50;
objStaffMember.calculateTax(); 
```

尽管创建的对象将共享该函数`calculateTax`，但当实际调用该函数时，原型函数`this`内部的上下文`calculateTax`将是调用它的对象本身。即`objStaffMember`在上述情况下。

前 2 个函数的小区别是，因为第二个没有名称，它有一个赋值，它是一个没有名称的函数表达式，第一个是函数声明，有一个名称。

# symfony - 当我的响应是 JSON 时，我可以从 Symfony 的调试工具栏查看我的 MySql 查询吗？

> ID：15812937
> 
> 赞同：2
> 
> 时间：2013-04-04T13:38:38.733
> 
> 标签：symfony

当输出只是一个 JSON 响应时，调试工具栏不会出现。很高兴看到实际的查询是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:42:11.420

您可以搜索最新请求的页面并获取有关它的详细信息。只需访问以下链接，您就会在那里看到搜索表单。

```
http://yoursite.com/app_dev.php/_profiler/ 
```

# java - Java 失败并显示“无法为代码缓存保留足够的空间”

> ID：15812939
> 
> 赞同：6
> 
> 时间：2013-04-04T13:38:50.037
> 
> 标签：java, memory, crash

我有以下问题：

```
$ java -jar program.jar
Error occurred during initialization of VM
Could not reserve enough space for code cache 
```

系统看到的内存量似乎足够了：

```
$  free -m
             total       used       free     shared    buffers     cached
Mem:          5959        640       5318          0          0        390
-/+ buffers/cache:        249       5710
Swap:         4099          0       4099 
```

我尝试将堆设置降低到 16mb，但没有帮助：

```
$ java -Xmx16m -Xms16m -jar program.jar
Error occurred during initialization of VM
Could not reserve enough space for code cache 
```

有什么问题？我该如何调试呢？

**编辑：** 忘记包含版本 - 我使用 Sun Java 7u15，64 位。我实际上无法让它显示版本字符串，因为“java -version”失败并出现相同的错误。

此外，由于某种原因，如果我使用 OpenJDK 6u27，它会启动 - 但由于应用程序需要 java 7，它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T14:46:43.047

似乎我的 java 在[Gentoo Hardened Linux](http://www.gentoo.org/proj/en/hardened/)上运行，并且内核启用了[PaX 。](http://en.wikipedia.org/wiki/PaX)要禁用 pax 内存控制，我使用了以下命令：

```
paxctl -c -m /path/to/your/java/bin/java 
```

在那之后，一切都很顺利。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-04-29T02:29:33.677

您可以设置这些 sysctl 变量（在 BSD 中它位于 /etc/sysctl.conf 中）

```
security.pax.mprotect.enabled=0
security.pax.mprotect.global=0
security.pax.mprotect.ptrace=0 
```

比.... /etc/rc.d/sysctl restart 做“把戏”

# html - 如何将 css 样式应用到 iframe 内容中？

> ID：15812946
> 
> 赞同：6
> 
> 时间：2013-04-04T13:39:02.853
> 
> 标签：html, css, iframe

我正在尝试为 iframe 中的内容应用 CSS 样式，请查看此链接[http://jsfiddle.net/pPqGe/](http://jsfiddle.net/pPqGe/)

jQuery：

```
$(document).ready(function() {
    $('iframe').contents().find('h1').css('color','red');
}); 
```

HTML：

```
<iframe src="mysite" width="100%" height="100%" id="myframe"></iframe> 
```

对于 iframe 源，我使用了一个实时网站。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T13:56:12.757

有用。问题是没有H1，只有H2。查看此链接[http://jsfiddle.net/pPqGe/1545/](http://jsfiddle.net/pPqGe/1545/)。

HTML：

```
<iframe src='jsfiddle.net'></iframe> 
```

JavaScript：

```
$(document).ready(function() {
    $('iframe').contents().find('h2').css('color','red');
    $('iframe').contents().find('#header').css('opacity','.2');
}); 
```

# html - 没有高度的 div 下的 div

> ID：15812947
> 
> 赞同：0
> 
> 时间：2013-04-04T13:39:04.577
> 
> 标签：html, css

如果我有两个 div，并且在第一个 div 中有一些宽度为 100% 的图像标签，所以它适合屏幕

```
<div id="first"><img src="" width="100%"></div>
<div id="second">Some Text</div> 
```

我如何使它`#second`位于下面`#first`？`#first`默认情况下它应该可以工作，但是因为没有设置高度，`#second`所以被定位在同一个`#first`位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:41:24.203

浮动和/或给第一个自动高度可能会起作用：

```
#first { 
    float: left;
    overflow: hidden; /* or height: auto perhaps*/
}

#second {
    float: left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:53:45.750

它确实应该默认工作。

你要么

*   `inline-block`制作你的divs
*   将它们设置`position`为`absolute`
*   `float`将它们发送到`left`

很可能是第二种情况。将它们设置`position`为`static`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:19:30.643

编辑：太晚了，我打字时问题解决了:)

我们确实需要查看您的 CSS，但将您的值与这些值进行比较；如果它们设置为其他任何东西，那可能就是问题所在。

```
#first {
    display: block;
    float: none;
    position: relative; /* or possibly position: static; */
}

#second {
    display: block;
    float: none;
    position: relative; /* or possibly position: static; */
} 
```

图像呢？分配给它的任何 CSS 规则？这两个 div 周围是否有一个最大高度的 div？

# spring - Spring3.0+Hibernate4.0 pom.xml文件

> ID：15812950
> 
> 赞同：0
> 
> 时间：2013-04-04T13:39:08.800
> 
> 标签：spring, hibernate, maven, spring-mvc

我正在尝试使用 maven 构建一个 spring3.0 和 Hibernate4.0 项目。在我的 dao 文件夹中，我有这个 dao（数据抽象对象）的文件接口，但是找不到导入 org.hibernate.criterion.Criterion 导入..那里有一个错误说：“**无法解析导入org.hibernate** ”。可能是 pom.xml 文件没有正确填写吗？我在下面还有我的 pom.xml .. 感谢您的时间。

```
package com.henry.rep.dao;

import org.hibernate.criterion.Criterion;

import java.io.Serializable;
import java.util.List;

public interface AbstractDao<E, I extends Serializable> {

    E findById(I id);
    void saveOrUpdate(E e);
    void delete(E e);
    List<E> findByCriteria(Criterion criterion);
}

                       ** 
```

## ## 标题##POM.XML

**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.henry.rep</groupId>
    <artifactId>Spring3Hibernate4</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>war</packaging>

    <name>Spring3Hibernate4</name>

    <properties>
        <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>

        <org.springframework.version>3.2.1.RELEASE</org.springframework.version>
        <org.spring.security.version>3.1.2.RELEASE</org.spring.security.version>
        <org.slf4j.version>1.6.1</org.slf4j.version>

    </properties>

    <dependencies>
        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-web-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>
        </dependency>
        <!-- Add the following dependencies -->

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>javax.servlet-api</artifactId>
            <version>3.0.1</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.1.5.Final</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.2.0.Final</version>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.2</version>
        </dependency>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.9</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <!-- dependencies additions ends here.. -->

    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <compilerArguments>
                        <endorseddirs>${endorsed.dir}</endorseddirs>
                    </compilerArguments>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1.1</version>
                <configuration>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>2.1</version>
                <executions>
                    <execution>
                        <phase>validate</phase>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${endorsed.dir}</outputDirectory>
                            <silent>true</silent>
                            <artifactItems>
                                <artifactItem>
                                    <groupId>javax</groupId>
                                    <artifactId>javaee-endorsed-api</artifactId>
                                    <version>6.0</version>
                                    <type>jar</type>
                                </artifactItem>
                            </artifactItems>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:22:07.867

如果上述建议不起作用，您可能需要尝试将其添加到您的 pom.xml 文件中：

```
<repositories>
  <repository>
    <url>http://download.java.net/maven/2/</url>
    <id>hibernate-support</id>
    <layout>default</layout>
    <name>Repository for library Library[hibernate-support]</name>
  </repository>
</repositories> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:56:13.837

问题一定出在您的 IDE 上，因为您提供的示例编译良好。您是否尝试过从命令行构建`mvn compile`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:44:23.017

您是否尝试将其添加到您的 pom.xml 中：

```
<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-entitymanager</artifactId>
  <version>4.1.6.Final</version>
</dependency> 
```

希望这应该有所作为。

# java - Java 按钮工作异常

> ID：15812960
> 
> 赞同：0
> 
> 时间：2013-04-04T13:39:31.770
> 
> 标签：java, swing, button

我正在使用 Swing 在 Java 中构建 GUI。制作按钮并添加它的代码如下：

```
 //Create a button
    JButton exitButton = new JButton("Exit");
    exitButton.setSize(90, 40);
    exitButton.setLocation(800, 450);
    exitButton.setVisible(true);

    //Adding components
    window.getContentPane().add(exitButton); 
```

当我运行该应用程序时，该按钮出现在整个窗口中，有时会按预期显示，有时不会出现。这是某种 java 错误还是我的`sdk`. 如果您想知道它是什么类型的窗口，

```
//Create a window
JFrame window = new JFrame("First Window");
window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE)
window.setVisible(true);
window.setSize(1000, 550);
window.setLocation(150, 150); 
```

这一切都在 static void main 之内。顺便说一句，我如何获得关闭窗口的按钮`System.exit(0);`（我是初学者，这是我的第一个自写 GUI）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:42:27.330

你需要一个布局。请参阅[布局管理器的视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)。

也请[在这里查看我的教程。](http://easyjavatutorial.weebly.com/swing--awt.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:44:34.113

我得到了这个示例代码。这可能会有所帮助 简单的摆动按钮

```
package com.ack.gui.swing.simple;

import java.awt.*;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import javax.swing.*;

public class SimpleSwingButtons extends JFrame {
  public static void main( String[] argv ) {
    SimpleSwingButtons myExample = new SimpleSwingButtons( "Simple Swing Buttons" );
  }

  public SimpleSwingButtons( String title ) {
    super( title );
    setSize( 150, 150 );
    addWindowListener( new WindowAdapter() {
      public void windowClosing( WindowEvent we ) {
        dispose();
        System.exit( 0 );
      }
    } );
    init();
    setVisible( true );
  }

  private void init() {
    JPanel my_panel = new JPanel();
    my_panel.setLayout( new GridLayout( 3, 3 ) );
    for( int i = 1; i < 10; i++ ) {
      ImageIcon icon = new ImageIcon( i + ".gif" );
      JButton jb = new JButton( icon );
      jb.setToolTipText( i + ".gif" );
      my_panel.add( jb );
    }
    getContentPane().add( my_panel );
    my_panel.setBorder( BorderFactory.createEtchedBorder() );
  }
} 
```

礼貌[的 Java.happycodings](http://www.java.happycodings.com/Java_Swing/code38.html)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-04T13:44:09.057

您必须检查您的布局，如果您想为组件使用自定义位置，请将 Layout 设置为 null 并使用该`setBounds(x,y,weight,height)`方法。

```
JFrame window = new JFrame("First Window");
window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE)
window.setLayout(null);

JButton exitButton = new JButton("Exit");
exitButton.setBounds(15,45,150,30);//This is just an example
exitButton.setVisible(true); 
```

最好的祝福。

# ios - cocos3d/blender：将混合重新保存到 pod 的奇怪问题不提供输出

> ID：15812965
> 
> 赞同：2
> 
> 时间：2013-04-04T13:39:45.447
> 
> 标签：ios, blender, cocos3d

我使用搅拌机创建 3d 模型并使用 PVRGeoPODGUI 转换为 .pod 文件，并在我的 cocos3d 应用程序中使用它。

例如，我创建了 3d 平面、立方体等并保存为“A.blend”文件并导出为“A.dae”并最终转换为“A.pod”文件。当我在代码中使用这个“A.pod”文件时，它工作正常。

```
CC3PODResourceNode* podRezNode = [CC3PODResourceNode nodeWithName: @"A"];
podRezNode.resource = [IntroducingPODResource resourceFromFile: @"A.pod"];

podRezNode.shouldCullBackFaces = NO;
podRezNode.location = cc3v(0.0, -10.0, 0.0);
podRezNode.rotation = cc3v(0.0, 0.0, 0.0);
podRezNode.isTouchEnabled = YES;
[self addChild: podRezNode]; 
```

然后我尝试重新创建相同类型的混合文件并对其进行测试，所以我使用相同的“A.blend”文件，具有相同的位置、比例、缩小等，现在保存为“B.blend”文件。再次导出为“B.dae”并最终转换为“B.pod”文件。当我现在尝试在我的代码中使用它时，它没有在模拟器输出中查看任何模型，它是空白的。

```
CC3PODResourceNode* podRezNode = [CC3PODResourceNode nodeWithName: @"B"];
podRezNode.resource = [IntroducingPODResource resourceFromFile: @"B.pod"];

podRezNode.shouldCullBackFaces = NO;
podRezNode.location = cc3v(0.0, -10.0, 0.0);
podRezNode.rotation = cc3v(0.0, 0.0, 0.0);
podRezNode.isTouchEnabled = YES;
[self addChild: podRezNode]; 
```

这对我来说真的很奇怪，因为相同版本的混合（A.blend）和转换后的 pod（A.pod）工作正常，但重新保存的版本（B.blend 和 B.pod）根本不起作用。

有人可以指出我这里可能有什么问题吗？

# java - 了解 Android 联系人的架构

> ID：15812967
> 
> 赞同：18
> 
> 时间：2013-04-04T13:39:49.493
> 
> 标签：java, android, android-contacts

我正在开发一个需要知道何时添加/更新/删除联系人的 Android 应用程序。

所以我为此阅读了几篇文章。我了解每当联系人发生更改时，我们都可以通过内容观察者获得通知，但我们无法获取已添加/更新/删除的联系人。所以我已经阅读了官方 API 并准备了如何捕获特定联系人的设计。

所以我一开始的想法

1.  我们将存储所有联系人 ID、已删除标志和版本
2.  每当更改联系人时，我都会从 Android 系统获取我的表格的行数和行数。
3.  如果我的行数小于系统行数，则联系人已被删除。
4.  如果我的行数大于系统行数，则添加了一个联系人。
5.  如果不是这些情况，则其中一个联系人版本已更改。

我还了解到，如果联系人被用户删除，Android 不会删除该联系人，但它会将已删除标志设置为 0。所以在这些情况下，行数将是相同的。

如官方文档中所述，Android 还会多次更改联系人的行 ID。那么我们如何才能像查找 uri 一样唯一地识别它们，如果不是，那么我们也必须为此设置观察者。

所以我想知道以上是否正确？在添加联系人的情况下，是否会将其添加到游标的最后一行，这意味着如果我检查系统数据库的最后一行是否有联系人，它是否会给我添加的联系人。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-19T16:31:43.310

让我尽可能多地解释。基本上你的保单看起来不错，但实际上它比你想象的要复杂一些。

在 Android 上，*一个联系人*可以与多个[*原始*联系人](http://developer.android.com/reference/android/provider/ContactsContract.RawContacts.html)相关联，这些原始联系人可能由许多数据提供商提供，例如 Google、Facebook、Skype 等。例如，如果您本地联系人中的一位朋友也在使用 Skype，则在 中单独存在两个原始联系人[`ContactContracts.RawContacts`](http://developer.android.com/reference/android/provider/ContactsContract.RawContacts.html)，但它们会自动聚合并在您查询时显示为一个联系人[`ContactsContract.Contacts`](http://developer.android.com/reference/android/provider/ContactsContract.Contacts.html)。

这也是为什么很难唯一识别联系人的原因，因为[您可以随时拆分或加入他们](http://support.google.com/android/bin/answer.py?hl=en&answer=1688406)。`LOOKUP_KEY`在这种情况下不是很方便。

除 Google 之外的许多应用程序仅提供单向同步，*即*仅从服务到联系人，因此它们是只读的。在这种情况下，删除的标志将不会被使用，并且在它们的同步过程中被简单地删除。因此，您不能简单地依赖标志。

虽然没有一个很好的简单解决方案，但我想如果你观察一个特定的`RawContacts`，而不是，实现你想要的要容易得多`Contacts`。希望这有助于您的理解。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-25T19:55:21.660

我认为最好的做法是监控一个联系人何时聚合到另一个联系人并通过contactName而不是_ID或CONTACT_ID来识别它们。看看这个可能的联系人操作：

**插入**

无法显式创建联系人。当插入原始联系人时，提供者将首先尝试查找代表同一个人的联系人。如果找到，原始联系人的 CONTACT_ID 列将获取聚合联系人的 _ID。如果未找到匹配项，则提供程序会自动插入一个新联系人并将其 _ID 放入新插入的原始联系人的 CONTACT_ID 列中。

**更新**

只有某些联系人列是可修改的：TIMES_CONTACTED、LAST_TIME_CONTACTED、STARRED、CUSTOM_RINGTONE、SEND_TO_VOICEMAIL。更改联系人上的这些列中的任何一个也会更改所有组成原始联系人的列。

**删除**

删除联系人时要小心！删除聚合联系人会删除所有组成的原始联系人。相应的同步适配器会注意到它们各自的原始联系人的删除，并将它们从后端存储中删除。

**询问**

如果您需要阅读单个联系人，请考虑使用 CONTENT_LOOKUP_URI 而不是 CONTENT_URI。如果您需要通过电话号码查找联系人，请使用为此目的优化的 PhoneLookup.CONTENT_FILTER_URI。如果您需要按部分名称查找联系人，例如生成按您输入的过滤器建议，请使用 CONTENT_FILTER_URI URI。如果您需要通过某些数据元素（如电子邮件地址、昵称等）查找联系人，请对 ContactsContract.Data 表使用查询。结果将包含联系人 ID、姓名等。

* * *

但是，问题是您的联系人列表中可能有两个不是同一个人的“菲利普莫里斯”。

有关详细信息，请参阅Android 类文档的[这一部分](http://developer.android.com/reference/android/provider/ContactsContract.Contacts.html)。

# javascript - localStorage 返回 NaN（而不是数字，或者什么都没有）

> ID：15812977
> 
> 赞同：1
> 
> 时间：2013-04-04T13:40:12.523
> 
> 标签：javascript, html

我一直在努力`localStorage`工作，但仍然受到错误的困扰。我已经看到了几种使用本地存储的方法，并尝试了几种，但都没有按预期工作。

我最近的尝试是基于W3Schools 的[这个例子](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_webstorage_local_clickcount)，但它似乎也不起作用。

```
var difficulty = 0;
var highscore = 0; 

function retrieveLocalData() {
    if(typeof(Storage)!=="undefined") {
        if(localStorage.highscore) { highscore = parseInt(localStorage.highscore); }
        if(localStorage.difficulty) { difficulty = parseFloat(localStorage.difficulty); }
    }
}

function storeLocalData() {
    if(typeof(Storage)!=="undefined") {
        localStorage.highscore = highscore; 
        localStorage.difficulty = difficulty; 
    }
} 
```

我希望`storeLocalData()`检查是否支持 localStorage，如果支持，则将`highscore`and存储`difficulty`在`localStorage`. 我希望`retrieveLocalData()`检查是否支持 localStorage，检查是否`highscore`或`difficulty`分别已存储，如果是，则检索值，分别使用`parseInt`和将它们解析为 Int 或 Float `parseFloat`。

在测试期间，`highscore`输出为 NaN。

我的期望和假设不正确吗？我不确定为什么会发生这种行为。谢谢。

* * *

编辑1：

我删除了所有 localStorage 值，并在修改值之前或之后添加`console.log()`了`highscore`每个点的值。正如预期的那样，在输入之前`retrieveLocalData()`的值是 0，但是在退出之后`retrieveLocalData()`的值是 NaN。

编辑2：

我根据 apsillers 的建议更改了我的`if`声明。`if(!isNaN(parseInt(localStorage.highscore)))`代码现在工作正常:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:47:22.490

如果单独测试，您指定的代码可以正常工作。您可能正在做的是在`highscore`实际位置上犯了范围错误`undefined`，因此请尝试检查开发人员工具 (F12) 的资源选项卡 (chrome)，您可以在其中检查本地存储中的内容。如果那里的值不正确，那么您将需要检查您的`storeLocalData`函数，或者也可能是尚未存储任何内容的情况，或者如果您在调用您`retrieveLocalData`之前调用了您的`storeLocalData`之后，则存储了字面上的 NaN `undefined`（作为 NaN，由于parseFloat) 和 next 被保存（之后你会陷入循环，所以尝试在这种情况下将 NaN 更改为 0 和 0）。

# database - Haskell 将元素添加到现有列表

> ID：15812980
> 
> 赞同：0
> 
> 时间：2013-04-04T13:40:25.490
> 
> 标签：database, list, haskell

我想写的功能是让用户输入他们的名字和他们想成为粉丝的电影。

这是我正在使用的当前代码：

```
type Title = String
type Actor = String
type Cast = [Actor]
type Year = Int
type Fan = String
type Fans = [Fan]
type Period = (Year, Year)
type Film = (Title, Cast, Year, Fans)
type Database = [Film]

testDatabase :: Database
testDatabase = [("Casino Royale", ["Daniel Craig", "Eva Green", "Judi Dench"], 2006, ["Garry", "Dave", "Zoe", "Kevin", "Emma"]),
    ("Cowboys & Aliens", ["Harrison Ford", "Daniel Craig", "Olivia Wilde"], 2011, ["Bill", "Jo", "Garry", "Kevin", "Olga", "Liz"]),     
        ("Catch Me If You Can", ["Leonardo DiCaprio", "Tom Hanks"], 2002, ["Zoe", "Heidi", "Jo", "Emma", "Liz", "Sam", "Olga", "Kevin", "Tim"]),           
            ("Mamma Mia!", ["Meryl Streep", "Pierce Brosnan"], 2008, ["Kevin", "Jo", "Liz", "Amy", "Sam", "Zoe"])] 
```

使用它作为类型：

```
becomeFan :: String -> String -> [Film] -> [Film] 
```

例如，如果用户“鲍勃”想成为电影“妈妈咪呀！”的粉丝，我是否能够执行此任务？然后数据库将从以下位置更新粉丝列表：

```
["Kevin", "Jo", "Liz", "Amy", "Sam", "Zoe"] 
```

至：

```
["Bob", "Kevin", "Jo", "Liz", "Amy", "Sam", "Zoe"] 
```

提前感谢所有提供的答案！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T17:34:20.007

这是一个很好的例子，因为创建一个像你这样`Endo`的函数是在无状态语言中处理“状态”的好方法。让我们潜入水中。`a -> a``[Film] -> [Film]`

* * *

所以目标是创建一个类似`becomeFan "Joseph" "7 1/2" :: [Film] -> [Film]`“电影数据库更新功能”的功能。要执行此更新，您需要修改电影数据库以更新`"7 1/2"`要包含的电影的粉丝列表`"Joseph"`。我们假设每个用户的名字都是全局唯一的，并且多次编写这个函数。

现在让我们假设，如果这部电影不在我们的数据库中，则`becomeFan`不做任何事情，并且数据库不包含重复项。

首先，我们有直接递归版本。

```
becomeFan _ _ [] = [] -- empty film database
becomeFan name film (f@(title, cast, year, fans) : fs)
  | film == title = (title, cast, year, name:fans) : fs
  | otherwise     = f : becomeFan name film fs 
```

这只会遍历数据库中的电影列表，并在电影标题与我们正在尝试编辑的标题匹配时进行更新。请注意`@`- 语法，它允许我们将正在检查的电影“作为一个整体”进行检查，并且仍然解构它。

然而，这种方法的挑战是无数的——它只是非常复杂！我们有许多与我们实现的方式相关的基本假设，这些假设`becomeFan`可能与我们编写的其他函数不同步。幸运的是，Haskell*非常*擅长解决此类问题。

第一步是引入一些更强大的数据类型。

* * *

我们要做的是消除一些类型的同义词，并引入一些更强大的容器类型，特别是`Set`其行为类似于数学集合以及`Map`类似于字典或散列的行为。

```
import qualified Data.Set as Set
import qualified Data.Map as Map 
```

我们还为`Film`. 记录与元组同构（“功能等同于”），但具有对文档有用的命名字段，并且让我们使用更少的类型同义词。

```
type Name = String
type Year = Int
data Film = Film { title :: Title, cast :: Set Name, year :: Year, fans :: Set Name) 
```

通过使用 a`Map Title Film`来表示我们的数据库，我们还可以保证电影的唯一性（a`Map`将键`Title`设为零或一`Film`，我们不能有多个匹配项）。这里的缺点是我们可能会使`Title`in`Database`键与`Title`in`Film`类型本身不同步。

```
type Database = Map Title Film 
```

那么我们如何`becomeFan`在这个新系统中重写呢？

```
becomeFan name title = 
  Map.alter update title where
    update Nothing  = Nothing -- that title was not in our database
    update (Just f) = Just (f { fans = Set.insert name (fans f) }) 
```

现在我们主要依靠`Map.alter :: (Maybe v -> Maybe v) -> k -> Map k v -> Map k v`并`Set.insert :: a -> Set a -> Set a`完成繁重的工作并保持各种独特性约束。请注意，第一个参数`Map.alter`是一个函数`Maybe v -> Maybe v`，它允许我们处理丢失的电影（如果输入是`Nothing`）并决定从数据库中删除电影（如果我们返回`Nothing`）。

还值得注意的是，我们的内部函数`update :: Maybe Film -> Maybe Film`可以更容易地编写为`fmap (\f = f { fans = Set.insert name (fans f) })`将“纯”更新步骤提升`Maybe`为`Functor`.

* * *

我们能做得更好吗？当然可以，但这里会让人感到困惑。在大多数情况下，上一个答案可能是您最好的选择。但是，让我们继续前进吧。

我们可以使用[Control.Lens](http://hackage.haskell.org/package/lens)中的镜头来使我们访问`Map`、`Set`、`Film`甚至更容易。

为此，我们将导入模块

```
import Control.Lens 
```

并重写`Film`类型，以便库可以使用宏自动生成镜头。

```
data Film = Film { _title :: Title, _cast :: Set Name, _year :: Year, _fans :: Set Name }
$(makeLenses ''Film) 
```

我们所要做的就是在每个记录字段名称前加上一个下划线，并`Control.Lens.makeLenses`自动生成原始名称下的镜头。因此，在那条线之后，我们拥有`title :: Lens' Film Title`了我们想要的功能。

然后我们可以使用`Map`'`At`实例来创建我们的改变函数，和以前一样，但是写成一串镜头操作

```
becomeFan name film = over (at film) (fmap . over fans . Set.insert $ name) 
```

其中`over (at film)`泛化并替换`Map.alter`和`(fmap . over fans . Set.insert $ name)`替换了`update`我们之前定义的内部函数。

我们甚至可以构建一个强大的设置镜头，直接查看某个粉丝列表中某个粉丝的存在`Film`。

```
isFan :: Name -> String -> Setter' Database Bool
isFan name film = at film . mapped . fans . contains name 
```

这些方法起初相当令人讨厌，并且具有非常奇怪（但完全可检查）的类型，但是一旦您习惯了在该抽象级别上工作，它们就会变得非常好。它“读起来像英语”，感觉就像 XPath 的优秀部分。

```
becomeFan name film = isFan name film .~ True 
```

通过这种结构，我们甚至可以立即将整个过程升级到`State`monad。

```
flip execState initialDB $ do
  isFan "Joseph" "7 1/2"        .= True
  isFan "Steve"  "Citizen Kane" .= True
  -- oh, wait, nevermind
  isFan "Joseph" "7 1/2"        .= False 
```

不过，我们可以`Control.Monad.State.withState`使用任何定义来做同样的事情`becomeFan`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:38:43.643

这是另一种解决方法。

```
becomeFan :: Title -> Fan -> Database -> Database
becomeFan title newFan = map f where
    f film @ (title', cast, year, fans)
        | title == title' = --TODO
        | otherwise       = --TODO 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T14:13:31.283

由于我没有真正展示任何具体内容，因此我将提供一些一般性提示..

```
add :: String -> String -> Database -> Database
add name film db = (film, cast, year, name : fans) : filteredDb
  where (_, cast, year, fans) = get the movie
        filtered_db = remove the entry about ${film} from the db 
```

希望这足以让您入门，如果您有任何问题，请告诉我。

# ios - 方法调用的参数太多，预期为 1，有 2？（Xcode）

> ID：15812984
> 
> 赞同：0
> 
> 时间：2013-04-04T13:40:33.703
> 
> 标签：ios, objective-c, xcode, arguments

这个问题还有很多其他类似的问题，但缺乏答案，而且每个项目的答案都不一样。我有这个错误“方法调用的参数太多，预期为 1，有 2？” 但是在我使用的以前的数组上没有出现这个错误？这可能是代码的问题，但我不确定？我一直在寻找可能影响它的其他错误，但没有运气。下面是我的编码，

```
#import "MenuViewController.h"
#import "ECSlidingViewController.h"

@interface MenuViewController ()

@property (strong, nonatomic) NSArray *menu;
@property (strong, nonatomic) NSArray *section1;
@property (strong, nonatomic) NSArray *section2;
@property (strong, nonatomic) NSArray *section3;

@end

@implementation MenuViewController

@synthesize menu, section1, section2, section3;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;

    self.section1 = [NSArray arrayWithObjects:@"News Feed", @"Buy Shares", @"Sell Shares", nil];

    self.section2 = [NSArray arrayWithObjects:@"Finances", @"Current Holdings", @"Trading History", nil];

    ***self.section3 = [NSArray arrayWithObject:@"Leaderboard", nil];***

    self.menu = [NSArray arrayWithObjects:self.section1, self.section2, self.section3, nil];

    [self.slidingViewController setAnchorRightRevealAmount:200.0f];
    self.slidingViewController.underLeftWidthLayout = ECFullWidth;

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
#warning Potentially incomplete method implementation.
    // Return the number of sections.
    return [self.menu count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
#warning Incomplete method implementation.
    // Return the number of rows in the section.

    if (section == 0) {

        return [self.section1 count];

    } else if (section == 1) {

        return [self.section2 count];

    } else if (section == 2) {

        return  [self.section3 count];

    }

}

-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

    if (section == 0) {

        return @"Stock Market";

    } else if (section == 1) {

        return @"Portfolio";

    } else if (section == 2) {

        return  @"Options";

    }

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *cellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
    }

    if (indexPath.section == 0) {

        cell.textLabel.text = [NSString stringWithFormat:@"%@", [self.section1 objectAtIndex:indexPath.row]];

    } else if (indexPath.section == 1) {

        cell.textLabel.text = [NSString stringWithFormat:@"%@", [self.section2 objectAtIndex:indexPath.row]];
    } else if (indexPath.section == 2) {

        cell.textLabel.text = [NSString stringWithFormat:@"%@", [self.section3 objectAtIndex:indexPath.row]];
    }

    return cell;
}

/*
// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}
*/

/*
// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }   
    else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
    }   
}
*/

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];

     */

    UIViewController *newTopViewController;

    if (indexPath.section == 0) {

        NSString *identifier = [NSString stringWithFormat:@"%@", [self.section1 objectAtIndex:indexPath.row]];

        newTopViewController = [self.storyboard instantiateViewControllerWithIdentifier:identifier];

    } else if (indexPath.section == 1) {

        NSString *identifier = [NSString stringWithFormat:@"%@", [self.section2 objectAtIndex:indexPath.row]];

        newTopViewController = [self.storyboard instantiateViewControllerWithIdentifier:identifier];

    } else if (indexPath.section == 2) {

        NSString *identifier = [NSString stringWithFormat:@"%@", [self.section3 objectAtIndex:indexPath.row]];

        newTopViewController = [self.storyboard instantiateViewControllerWithIdentifier:identifier];

    }

    [self.slidingViewController anchorTopViewOffScreenTo:ECRight animations:nil onComplete:^{
        CGRect frame = self.slidingViewController.topViewController.view.frame;
        self.slidingViewController.topViewController = newTopViewController;
        self.slidingViewController.topViewController.view.frame = frame;
        [self.slidingViewController resetTopView];
    }];

}

@end 
```

任何帮助将非常感激。谢谢。错误出现在我放置“***”的位置

![截屏](https://i.stack.imgur.com/D9sBm.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T13:48:37.587

如果您指出哪条线路导致问题会很好，但我想我还是找到了它：

```
[NSArray arrayWithObject:@"Leaderboard", nil]; 
```

`arrayWithObject`只需要一个对象，而不是逗号分隔的对象数组。请改用以下内容：

```
[NSArray arrayWithObject: @"Leaderboard"]; 
```

或者，为了与周围的代码更加一致，使用

```
[NSArray arrayWithObjects: @"Leaderboard", nil]; 
```

# android - 如何使用邮件中的公共链接启动 iphone 和 android 应用程序

> ID：15812992
> 
> 赞同：-3
> 
> 时间：2013-04-04T13:40:51.417
> 
> 标签：android, ios

我有一个要求，我需要从邮件中的链接启动一个应用程序，该应用程序适用于 android 和 iphone

我尝试从邮件中的链接重定向到网页，然后我将打开基于 os 的应用程序，但这在 ios 中运行良好，而不是在 android 中。我附上了代码

```
$(document).ready(function() {

    if (navigator.userAgent.indexOf('iP') != -1) {

    setTimeout(function() {
        document.location = 'http://www.test.com';
    }, 300);

    self.location = "testapp://";
    } else if (navigator.userAgent.indexOf('Android') != -1) {

        document.location = 'http://www.test.com';     
    } else {
        alert('windows');
    }
}); 
```

任何想法......我在这个要求上打破了一个星期......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:42:47.347

至少在 android 上，您可以让您的应用程序监听并*提供*对某些 url 的反应。

因此，您可以设置一个 IntentFilter 来侦听，`http://yoururl.com/somestuff`并且每当单击该 url 时，都会向用户显示能够处理它的应用程序列表，其中包括您的应用程序，并且很可能是设备上加载的任何浏览器。不过，我没有针对 iOS 的指导，不确定是否有可能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:52:46.850

Android 解决方案：[在 Android 浏览器中创建一个链接来启动我的应用程序？](https://stackoverflow.com/questions/3469908/make-a-link-in-the-android-browser-start-up-my-app)（堆栈溢出）

iOS 解决方案：[iPhone 应用程序：我可以从网站中的链接打开应用程序吗？](https://stackoverflow.com/questions/2095638/iphone-apps-can-i-open-an-app-from-a-link-in-a-website)（堆栈溢出）

具有相同链接的解决方案？

您可以尝试提供相同的 url 方案（前缀） - 以前从未尝试过。否则，您需要链接到服务器并进行重定向。但这是一种不好的行为，因为这会先打开浏览器，然后再打开您的应用程序。

# php - 如何在我的搜索表单代码点火器中实现分页

> ID：15812999
> 
> 赞同：0
> 
> 时间：2013-04-04T13:41:11.263
> 
> 标签：php, forms, codeigniter, search, pagination

我的 codeigniter 项目中有一个搜索功能。

搜索使用连接在多个表中进行搜索。现在是我的问题：如何向该搜索表单添加分页，以便在一页上显示 5 个结果。

## 我的搜索功能

```
function searchresults()
{
    $match = $this->input->post('search');
    $data['query'] = $this->bedrijven_model->get_search($match);
    $this->load->view('views/header');
    $this->load->view('views/searchresults', $data);
    $this->load->view('views/footer');
    $data['query'] = $this->bedrijven_model->bedrijven_tags();
} 
```

## 我的搜索视图

```
<form name="input" action="searchresults" method="post">
<input type="search" placeholder="Zoeken..." name="search">

<input type="submit" value="Zoeken">
<input type="reset" value="Reset">
</form>

<br /><br />

<form method="link" action="<?php echo base_url('home/bedrijven')?>">
<input type="submit" value="Bedrijven">

</form> 
```

## 我试过的：

```
 function searchresults()
    {
        $match = $this->input->post('search');
        $data['query'] = $this->bedrijven_model->get_search($match);
        $this->load->library('pagination');
        $config['base_url'] = base_url();
        $config['total_rows'] = 10;
        $config['per_page'] = 5;
        $this->pagination->initialize($config); 
        $this->load->view('views/header');
        $this->load->view('views/searchresults', $data);
        $this->load->view('views/footer');
        $data['query'] = $this->bedrijven_model->bedrijven_tags();
    } 
```

在我看来：`echo $this->pagination->create_links();`

但它不起作用。

希望可以有人帮帮我 ：）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:24:40.227

首先，`$this`视图内部与控制器内部不同。（比较[这个问题](https://stackoverflow.com/questions/7283359/this-keyword-in-view-in-codeigniter)。）我会这样传递分页：

```
(Controller)
...
$data['pagination'] = $this->pagination->create_links();
...
$this->load->view('views/searchresults', $data);

(View)
<?php echo $pagination; ?> 
```

其次，请记住`pagination`库只是显示分页的助手。您必须自己调整数据库查询，例如

```
(Controller)
$skip_entries = $this->uri->segment(2); // or whatever segment it's for you
$this->bedrijven_model->get_search($match, $skip_entries);

(Model)
function get_search($search, $skip_entries)
{  
    ...
    $this->db->limit(5, $skip_entries);
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:03:21.643

想要切换到 JS 分页插件这里是链接 [http://www.datatables.net/] 如果您只想显示嵌套数据而没有任何争执，那么我认为这可能会有所帮助。