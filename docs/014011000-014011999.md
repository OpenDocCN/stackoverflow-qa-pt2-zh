# StackOverflow 问答 14011000-14011999

# php - 服务器无法在 https 上 file_get_contents

> ID：14011000
> 
> 赞同：0
> 
> 时间：2012-12-23T12:37:35.560
> 
> 标签：php, https, file-get-contents

我正在尝试使用以下代码获取我的 FB 应用访问令牌：

```
$app_token_url = "https://graph.facebook.com/oauth/access_token?"
. "client_id=" . $app_id
. "&client_secret=" . $app_secret 
. "&grant_type=client_credentials";
$response = file_get_contents($app_token_url);
$params = null;
parse_str($response, $params);

echo("This app's access token is: " . $params['access_token']); 
```

它在我的服务器上运行良好，`localhost`但在我的服务器上运行良好（连接超时）。openssl 库根据 phpinfo() 启用。

更新：问题似乎出现在任何 https URL 上。allow_url_fopen 开启。

更新 2：似乎是防火墙问题。当我通过 SSH 登录服务器时，我无法获取任何 https url。我已经要求他们打开 443 端口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T20:40:02.333

尝试检查您的 openssl 是否可以在您的服务器中包装数据？

要检查的代码：

```
<?php
$check = stream_get_wrappers();
echo 'openssl: ',  extension_loaded  ('openssl') ? 'isload':'noload','<br>';
echo 'http: ', in_array('http', $check) ? 'ok':'no','<br>';
echo 'https: ', in_array('https', $check) ? 'ok':'no','<br>';
?> 
```

如果确定将得到输出：

```
openssl: isload
http: ok
https: ok 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-13T02:28:04.127

```
<?php

$url = 'https://www.google.com.eg';

function curl_get_contents($url){
  $ch = curl_init($url);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
  curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
  curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
  curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
  $data = curl_exec($ch);
  curl_close($ch);
  return $data;
}
echo curl_get_contents($url);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T16:02:23.603

尝试增加超时限制：

```
<?php 
$context = stream_context_create(array( 
    'http' => array( 
        'timeout' => 60 
        ) 
    ) 
); 
file_get_contents("http://example.com/", 0, $context); 
?> 
```

# r - 将巨大的模型对象保存到文件

> ID：14011005
> 
> 赞同：0
> 
> 时间：2012-12-23T12:38:17.883
> 
> 标签：r

假设您有一个从 VAR() 回归操作返回的“varrest”类模型对象。我想将模型保存到文件中，但不是所有用于估计系数的数据。

如何在没有训练数据的情况下保存模型规范？因为当我保存模型时，它的文件大小超过 1GB，因此加载确实需要时间。可以保存没有某些属性的对象吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T21:56:45.803

predict.varest 函数从以下代码开始：

```
K <- object$K
p <- object$p
obs <- object$obs
type <- object$type
data.all <- object$datamat
ynames <- colnames(object$y) 
```

然后，您可以调查可以实现多少修剪：

```
data(Canada)
tcan <- 
VAR(Canada, p = 2, type = "trend")
names(tcan)
# [1] "varresult"    "datamat"      "y"            "type"         "p"           
# [6] "K"            "obs"          "totobs"       "restrictions" "call"        
 object.size(tcan[c("K","p", "obs", "type", "datamat", "y")] )
#15080 bytes
 object.size(tcan)
#252032 bytes 
```

所以差异很大，但仅仅保存这些项目是不够的，因为 predict.varest 中的下一行是：

```
B <- Bcoef(object) 
```

您需要将该对象添加到上面的列表中，然后构造一个新的预测函数，该函数接受的内容小于模型对象的大“varresult”节点。还发现有对需要存储的内部函数的下游调用。（您需要提前确定预测所需的时间间隔。）

```
tsmall <- c( tcan[c("K","p", "obs", "type", "datamat", "y", "call")] )
tsmall[["Bco"]] <- Bcoef(tcan)
tsmall$sig.y <- vars:::.fecov(x = tcan, n.ahead = 10) 
```

修改后的`predict`功能将是：

```
sm.predict <- function (object, ..., n.ahead = 10, ci = 0.95, dumvar = NULL) 
{
    K <- object$K
    p <- object$p
    obs <- object$obs
    type <- object$type
    data.all <- object$datamat
    ynames <- colnames(object$y)
    n.ahead <- as.integer(n.ahead)
    Z <- object$datamat[, -c(1:K)]
  # This used to be a call to Bcoef(object)
    B <- object$Bco
    if (type == "const") {
        Zdet <- matrix(rep(1, n.ahead), nrow = n.ahead, ncol = 1)
        colnames(Zdet) <- "const"
    }
    else if (type == "trend") {
        trdstart <- nrow(Z) + 1 + p
        Zdet <- matrix(seq(trdstart, length = n.ahead), nrow = n.ahead, 
            ncol = 1)
        colnames(Zdet) <- "trend"
    }
    else if (type == "both") {
        trdstart <- nrow(Z) + 1 + p
        Zdet <- matrix(c(rep(1, n.ahead), seq(trdstart, length = n.ahead)), 
            nrow = n.ahead, ncol = 2)
        colnames(Zdet) <- c("const", "trend")
    }
    else if (type == "none") {
        Zdet <- NULL
    }
    if (!is.null(eval(object$call$season))) {
        season <- eval(object$call$season)
        seas.names <- paste("sd", 1:(season - 1), sep = "")
        cycle <- tail(data.all[, seas.names], season)
        seasonal <- as.matrix(cycle, nrow = season, ncol = season - 
            1)
        if (nrow(seasonal) >= n.ahead) {
            seasonal <- as.matrix(cycle[1:n.ahead, ], nrow = n.ahead, 
                ncol = season - 1)
        }
        else {
            while (nrow(seasonal) < n.ahead) {
                seasonal <- rbind(seasonal, cycle)
            }
            seasonal <- seasonal[1:n.ahead, ]
        }
        rownames(seasonal) <- seq(nrow(data.all) + 1, length = n.ahead)
        if (!is.null(Zdet)) {
            Zdet <- as.matrix(cbind(Zdet, seasonal))
        }
        else {
            Zdet <- as.matrix(seasonal)
        }
    }
    if (!is.null(eval(object$call$exogen))) {
        if (is.null(dumvar)) {
            stop("\nNo matrix for dumvar supplied, but object varest contains exogenous variables.\n")
        }
        if (!all(colnames(dumvar) %in% colnames(data.all))) {
            stop("\nColumn names of dumvar do not coincide with exogen.\n")
        }
        if (!identical(nrow(dumvar), n.ahead)) {
            stop("\nRow number of dumvar is unequal to n.ahead.\n")
        }
        if (!is.null(Zdet)) {
            Zdet <- as.matrix(cbind(Zdet, dumvar))
        }
        else {
            Zdet <- as.matrix(dumvar)
        }
    }
    Zy <- as.matrix(object$datamat[, 1:(K * (p + 1))])
    yse <- matrix(NA, nrow = n.ahead, ncol = K)
  # This used to be a call to vars:::.fecov
    sig.y <- object$sig.y
    for (i in 1:n.ahead) {
        yse[i, ] <- sqrt(diag(sig.y[, , i]))
    }
    yse <- -1 * qnorm((1 - ci)/2) * yse
    colnames(yse) <- paste(ci, "of", ynames)
    forecast <- matrix(NA, ncol = K, nrow = n.ahead)
    lasty <- c(Zy[nrow(Zy), ])
    for (i in 1:n.ahead) {
        lasty <- lasty[1:(K * p)]; print(lasty); print(B)
        Z <- c(lasty, Zdet[i, ]) ;print(Z)
        forecast[i, ] <- B %*% Z
        temp <- forecast[i, ]
        lasty <- c(temp, lasty)
    }
    colnames(forecast) <- paste(ynames, ".fcst", sep = "")
    lower <- forecast - yse
    colnames(lower) <- paste(ynames, ".lower", sep = "")
    upper <- forecast + yse
    colnames(upper) <- paste(ynames, ".upper", sep = "")
    forecasts <- list()
    for (i in 1:K) {
        forecasts[[i]] <- cbind(forecast[, i], lower[, i], upper[, 
            i], yse[, i])
        colnames(forecasts[[i]]) <- c("fcst", "lower", "upper", 
            "CI")
    }
    names(forecasts) <- ynames
    result <- list(fcst = forecasts, endog = object$y, model = object, 
        exo.fcst = dumvar)
    class(result) <- "varprd"
    return(result)
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-23T15:16:30.057

任何一个

*   将您不想为 NULL 的属性设置为，或
*   将您想要的部分复制到新对象，或
*   `save()`使用适当的索引调用函数。

# c++ - 存储少量数据以备后用的最佳 C++ 方法

> ID：14011008
> 
> 赞同：2
> 
> 时间：2012-12-23T12:38:52.247
> 
> 标签：c++, visual-studio-2012

我需要存储少量数据（1 到 5 个字符之间），我想知道最好的方法。

我需要能够在应用程序首次启动时读取它，如果文件不存在，创建它并将数据保存到其中（或者如果它确实存在，读取数据并将其放入变量中）。

非常感谢就任何这些问题给出的任何指导和代码示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:43:21.857

您需要从文件中写入和读取数据。如果您想了解如何在 C++ 中读取和写入文件，可以尝试以下教程：

[http://www.cplusplus.com/doc/tutorial/files/](http://www.cplusplus.com/doc/tutorial/files/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T12:43:39.623

对于文件管理，您可以使用[fstream](http://www.cplusplus.com/reference/fstream/)。（又名，ifstream，ofstream 等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T12:40:38.800

只需创建一个文件并写入数据。这几乎是唯一的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T13:20:34.117

1.  使用 fstream 写入文件
2.  如果可以将数据分类为键/值元组，您也可以使用 Windows 注册表

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-23T13:25:18.160

如果您使用的是 Windows，则可以使用 Windows 注册表（在 Visual Studio 文档中查找）。我不一定建议这样做，文件可能更方便，但它是标准的 Windows 技术。

# javascript - Backbone Collection 找不到模型的视图渲染

> ID：14011010
> 
> 赞同：0
> 
> 时间：2012-12-23T12:39:11.910
> 
> 标签：javascript, jquery, dom, backbone.js

我正在尝试呈现一个简单的集合视图并遇到一个奇怪的问题。

问题是当我尝试在集合视图中调用模型的渲染方法时，它找不到渲染方法。

我的模型和视图

```
var PersonModel = Backbone.Model.extend({});

var PersonView = Backbone.View.extend({
tagName : "person",
events:{
    "click h3":"alertStatus"

},
initialize:function(){
    this.model.on('change',this.render,this);

} ,
render:function(){

    var underscore_template = _.template('<h3>Name : <%= name %></h3>'+
        '<h3>Last Name : <%= surname %></h3>' +
        '<h3>Email : <%= email %> </h3>') ;

    console.log("Person View Render Oldu");
    this.$el.html(underscore_template(this.model.toJSON()));

},
alertStatus :function(e){
    alert("Clicked on Model View");
}
}); 
```

我的收藏和收藏视图

```
var PersonList = Backbone.Collection.extend({
model:PersonModel,
url:'/models'
});

var personList = new PersonList();

var PersonListView = Backbone.View.extend({
tagName : "personlist",
render : function(){
    this.collection.forEach(this.addOne,this);
},
addOne : function(personItem){
    var personView = new PersonView({model:personItem});
    this.$el.append(personView.render().el);  // The call to personView.render throws undefined
},
initialize : function(){
    this.collection.on('add',this.addOne,this);
    this.collection.on('reset',this.addAll,this);
},
addAll : function(){
    this.collection.forEach(this.addOne,this);
}
});

var personListView = new PersonListView({
collection:personList
});

personList.fetch({
success:function(){
    console.log("Fetch success");
}
}); 
```

我在使用 Jquery 准备好的文档上调用此 JS，并将其添加到 ID 为 app 的 div 中。

我的 fetch 也成功了。在尝试调用 personView.render().el 时，Collection View 的 addOne 函数仍然存在问题

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:16:52.987

您忘记在渲染中返回元素：

```
render : function() {

    var underscore_template = _.template('<h3>Name : <%= name %></h3>'+
        '<h3>Last Name : <%= surname %></h3>' +
        '<h3>Email : <%= email %> </h3>') ;

    console.log("Person View Render Oldu");
    this.$el.html(underscore_template(this.model.toJSON()));

    return this;  // chaining
} 
```

否则你不能链接它，你`el`以后也不能访问。

# wcf - 工作流“SendAndReceiveActivity”没有调用 WCF 方法

> ID：14011012
> 
> 赞同：1
> 
> 时间：2012-12-23T12:39:22.823
> 
> 标签：wcf, workflow

以下是我的应用程序中的确切流程：1) 工作流 (.xmalx) 有 Pick，其中有 Pick 分支。2) 选择分支有一个接收活动 - 它从具有适当参数的外部 WCF 服务调用。3) 在接收活动之后有一个“SendAndReceiveActivity”，其中发送活动针对 WCF 服务中的操作，其参数与在接收活动中接收到的相同。

3rs步骤是事情失败的地方..它只是没有达到WCF方法..可能的原因是什么？我已经仔细检查了端点、配置、合同和一切..不确定，我错过了什么..或者，任何人都知道我们如何从工作流中调试 WCF 调用？

# jquery - 附加项目时同位素不会重新布局

> ID：14011015
> 
> 赞同：5
> 
> 时间：2012-12-23T12:39:34.003
> 
> 标签：jquery, ajax, ruby-on-rails-3, jquery-isotope, ujs

我正在尝试通过 Rails 上的 ajax 请求将新项目附加到容器（下面提供了带有解释的[jsfiddle ）](http://jsfiddle.net/maqra/2/)

我写的 js 回复是

```
var $newthumbs = "..new items..";
$('#homepage_thumbnails').append( $newthumbs );
$('#homepage_thumbnails').isotope( 'appended', $newthumbs ); 
```

一旦添加了新项目，我似乎遇到了某种问题。一旦添加了这些项目，同位素似乎不会触发，我只剩下最初同位素的项目和未同位素的新项目。

这是我所拥有的一个例子（我得到了几个同位素项目，然后直接在几个新的非同位素项目之后）

```
<div id="homepage_thumbnails" class="thumbnails isotope" style="position: relative; overflow: hidden; height: 720px;">
<div class="thumbnail-item isotope-item" style="position: absolute; left: 0px; top: 0px; -webkit-transform: translate3d(0px, 480px, 0px);">
...
</div>
<div class="thumbnail-item thumbnail span2">
    ...
</div>
</div> 
```

`$('#homepage_thumbnails').isotope( 'insert', $newthumbs );`请注意，这也会发生

这里发生了什么？

**更新**

同位素似乎以某种方式卡住了..因为如果我在它后面加上 alert('test') ，它就不会被解雇。如果我在同位素调用之前发出警报，警报就会被触发......啊啊帮助

**更新 2**

我制作了一个显示问题的[jsfiddle 。](http://jsfiddle.net/maqra/2/)这很简单，但我认为问题也很简单——我只是错过了一些重要的事情。

**jsfiddle 解释以及它与我原来的问题的关系：**

在 jsfiddle 上有 2 类 -`item`和`red-item`. 具有透明背景的 3 个项目的简单布局（以更好地显示问题）。`clickme`单击后，应通过附加加入组，然后`new-item`用同位素重新组合。所见的结果`red-item`是低于第一个`item`并且没有同位素。通过检查可以看出它与我原来的问题相同，即原来的项目得到同位素，而新的附加项目没有。

希望我说清楚了，希望有人能够帮助我并证明我的理智。谢谢你。

**更新 3**

解决方案（部分）是像这样用 $() 吞噬 newthumbs

```
var $newthumbs = $("..new items.."); 
```

但是我仍然有这个问题..

在这个[jsfiddle](http://jsfiddle.net/maqra/4/)上，我添加了解决方案，并且每次添加 2 个 div。

在这个[破碎的小提琴](http://jsfiddle.net/maqra/6/)上，我添加了类似于渲染助手在 Rails 上的操作方式的 div，其中添加了 \n \t 等等。这似乎不起作用。

我试图弄清楚如何使它工作..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-25T15:47:40.137

我和你有同样的问题，我用你的小提琴找到了解决方案。我认为问题在于，在附加新项目后，您需要为同位素提供对这些插入项目的引用。

[http://jsfiddle.net/cR7WP/](http://jsfiddle.net/cR7WP/)

当你说：

`element.append( '<div />' ).isotope( 'appended', $('<div />') )`

创建了两个单独的 div 元素；一个是实际附加的，另一个是 Isotope 尝试布局的片段。附加的 div 永远不会传递给布局函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-15T14:02:03.093

我知道该线程很旧，但这是我的解决方案。似乎同位素不能立即渲染容器：

```
var item = $(e);
setTimeout(function() {
  CSP.grid.append(item).isotope('appended', item);
}, 50); // fixes an overlay bug 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T13:20:24.600

这对我有用

```
$container = $('#browsecontainer');

$isotope = $container.isotope({
    getSortData: {
      },
      alphabetical: function( $elem ) {
        var name = $elem.find('.name'),
            itemText = name.length ? name : $elem;
        return itemText.text();
      }
    }
  });  

    //// to append items
    var isotopeData = $container.data('isotope');
    for(var item in items)
    {
            $newItem = $(items[item]);
            $container.append( $newItem ).isotope( 'appended', $newItem );
    } 
```

///重新布局

```
 $container.isotope( options ,function(){

        //u can remove some items if u want
  }); 
```

项目是一堆 div

这里我添加了多个项目，所以我在循环中使用它，$container 是对象的引用

# c# - 244 无效的加密格式修复无效的加密标志。数据不准确

> ID：14011016
> 
> 赞同：1
> 
> 时间：2012-12-23T12:39:44.923
> 
> 标签：c#, .net, soap, firstdata

所以我在执行对 FirstData.com 的请求时遇到了这个错误。

> 244 无效的加密格式修复无效的加密标志。数据不准确。

```
 E4.ServiceSoapClient ws = new E4.ServiceSoapClient();

 E4.Transaction txn = new E4.Transaction();
 txn.ExactID = firstData.ExactID;  
 txn.Password = firstData.Password;  
 txn.Transaction_Type = "00";  
 txn.Card_Number = model.CardNumber;  
 txn.CardHoldersName = model.CardHoldersName;  
 txn.DollarAmount = product.Price.ToString();  
 txn.Customer_Ref = product.Name;
 txn.Reference_No = product.ID.ToString(); 
```

通过00 事务类型的[开发人员文档](https://firstdata.zendesk.com/entries/407571-first-data-global-gateway-e4sm-web-service-api-reference-guide)，我们必须发送这些属性：

持卡人姓名

卡号

美元金额

到期日

任何线索如何解决这个错误？

# android - Android自定义ListView不显示视图

> ID：14011018
> 
> 赞同：0
> 
> 时间：2012-12-23T12:40:13.860
> 
> 标签：android, android-layout

我正在尝试创建一个自定义列表视图，但它不能显示我真的是一个新手并且需要帮助....这是代码

```
public class Main_Activity extends ListActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout_main);

setListAdapter((ListAdapter) new MyAdapter(this, 
        android.R.layout.simple_list_item_1,R.id.textView1,
        getResources().getStringArray(R.array.categories)));

}

private class MyAdapter extends ArrayAdapter<String>{

    public MyAdapter(Context context, int resource, int textViewResourceId,
            String[] strings) {
        super(context, resource, textViewResourceId, strings);
        // TODO Auto-generated constructor stub
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent){
        LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View row = inflater.inflate(R.layout.list_item, parent, false);
        String[] items = getResources().getStringArray(R.array.categories);

        ImageView image = (ImageView)row.findViewById(R.id.textView1);
        TextView text =(TextView)row.findViewById(R.id.textView1);

        text.setText(items[position]);

        if(items[position].equals("Life")){
            image.setImageResource(R.drawable.lifeico);
        }

        else if(items[position].equals("Corporate")){
            image.setImageResource(R.drawable.corpico);
        }

        else if(items[position].equals("umash")){
            image.setImageResource(R.drawable.umashico);
        }

        return row;
    }
} 
```

//然后是listview布局xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

</LinearLayout> 
```

//使用复合可绘制布局

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/textView1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:drawableLeft="@drawable/lifeico"
android:drawablePadding="5dp"
android:text="@string/textview"
android:textSize="25sp" >

</TextView> 
```

//以及item的资源列表

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<string-array name="categories">
    <item name="Life">Individual Life</item>
    <item name="Corporate">Corporate Insurance</item>
    <item name="Umash">Umash Funeral Services</item>
</string-array>

</resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:28:24.710

尝试使用 BaseAdapter 而不是 ArrayAdapter。从 BaseAdapter 继承您的适配器 两点很重要：

第一：数组适配器通过它的构造函数获取数组中的数据。所以它不需要再次在 getView() 中调用 getStringArray。您可以使用 ArrayAdapter.getItem(index) 在某个位置获取指定对象。

第二：ConvertView（getView 方法中的第二个参数）是一个 scaped 视图，如果它不为 null，您可以使用它来设置数据。通过这种方式，您不需要制作或扩充新视图，您可以使用 ListView 之前发布的某些视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T13:39:14.233

你真的没有给我们足够的继续（如果有错误的 logcat 或未达到日志语句），它可能是任意数量的东西。

我会说`View row`你正在膨胀的 xml一定有问题`View row = inflater.inflate(R.layout.list_item,`。这可能是不正确的名称，但整个布局，只是`TextView`？如果是这样，你应该（添加 imageView &）把它放在一个`ViewGroup`, like`RelativeLayout`等中`LinearLayout`，就像你的主布局一样。但最令人担忧的可能是：

```
 ImageView image = (ImageView)row.findViewById(R.id.textView1); <-
    TextView text =(TextView)row.findViewById(R.id.textView1); <- 
```

你能看到你用同一个 id 引用了两个不同的视图吗？最新的图像命令可能搞砸了。

此外，最好不要做不必要的事情，`getView`因为`ListView`. 这就是通过构造函数传递事物的目的（您似乎忽略了的项目），因此它们只完成一次。试试这样：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout_main);

setListAdapter((ListAdapter) new MyAdapter(
        this, 
        R.layout.list_item,  <--
        R.id.textView1,  <------
        R.id.imageView1, <------ make sure these are all correct
        getResources().getStringArray(R.array.categories)));

}

private class MyAdapter extends ArrayAdapter<String>{

    private int resource;
    private int textViewResourceId;
    private int imageViewResourceId;
    private String[] strings;
    private LayoutInflater inflater;

    public MyAdapter(Context context, int resource, int textViewResourceId, 
            int imageViewResourceId, String[] strings) {
        super(context, resource, textViewResourceId, strings);
        this.resource = resource;
        this.textViewResourceId = textViewResourceId;
        this.imageViewResourceId  = imageViewResourceId;
        this.strings = strings;
        inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent){

        View row = inflater.inflate(resource, parent, false);

        ImageView image = (ImageView)row.findViewById(imageViewResourceId);
        TextView text =(TextView)row.findViewById(textViewResourceId);

        text.setText(strings[position]);

        if(strings[position].equals("Life")){
            image.setImageResource(R.drawable.lifeico);
        }

        else if(strings[position].equals("Corporate")){
            image.setImageResource(R.drawable.corpico);
        }

        else if(strings[position].equals("umash")){
            image.setImageResource(R.drawable.umashico);
        }

        return row;
    } 
```

如果它们都在同一个主类中，您甚至可以直接传递所有构造函数参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T13:40:45.200

您正在制作一个 ImageView 无处不在。

您应该在 logcat 中获得 ClassCastException。将一个真正的 ImageView（不是 TextView）添加到您的布局中，使用 LinearLayout 同时拥有 TextView 和 ImageView。

您还应该回收您的视图以提高性能：

```
@Override
public View getView(int position, View convertView, ViewGroup parent){
    View row = convertView;
    if(row == null){
        LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        row = inflater.inflate(R.layout.list_item, parent, false);
   }
   ....
} 
```

# javascript - 显式初始化 Jquery Mobile？

> ID：14011020
> 
> 赞同：6
> 
> 时间：2012-12-23T12:40:23.037
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我正在使用 jquery 手机。我只是想阻止 jquery mobile 做任何事情，除非我明确调用 trigger('create') 方法。有没有办法停止 jquery 移动自动初始化一段时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T12:48:39.217

*   您可以通过添加此属性来做到这一点：

    ```
    data-enhance="false" 
    ```

到一个通缉的容器。

您还需要在应用程序加载阶段打开它：

```
$(document).one("mobileinit", function () {
    $.mobile.ignoreContentEnabled=true;
}); 
```

更多相关信息可以在这里找到：

[http://jquerymobile.com/test/docs/pages/page-scripting.html](http://jquerymobile.com/test/docs/pages/page-scripting.html)

例子：

[http://jsfiddle.net/Gajotres/Xjurd/](http://jsfiddle.net/Gajotres/Xjurd/)

您可以通过启用/禁用***$.mobile.ignoreContentEnabled=true 来测试它；***

*   第二种选择是使用此行手动执行此操作：

    ```
    data-role="none" 
    ```

例子：

[http://jsfiddle.net/Gajotres/LqDke/](http://jsfiddle.net/Gajotres/LqDke/)

**编辑 ：**

要再次重新创建页面，请使用以下命令：

```
$('#index').live('pagebeforeshow', function (event) {
    $.mobile.ignoreContentEnabled = false;
    $(this).attr('data-enhance','true');
    $(this).trigger("pagecreate")
}); 
```

# javascript - 如何下载 base64 编码的图像？

> ID：14011021
> 
> 赞同：63
> 
> 时间：2012-12-23T12:40:26.477
> 
> 标签：javascript, html, image, base64

我有一个来自服务器的 base64 编码图像，我想通过 JavaScript 强制下载。有可能吗？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-12-23T12:49:26.230

1.  如果您想使用 JavaScript（没有任何后端）下载它，请使用：

    ```
    window.location.href = 'data:application/octet-stream;base64,' + img; 
    ```

    `img`您的 base64 编码图像在哪里。

2.  如果要允许用户指定文件名，请使用标签的`download`属性：`a`

    ```
    <a download="FILENAME.EXT" href="data:image/png;base64,asdasd...">Download</a> 
    ```

    *   注意：非常旧的浏览器不支持下载属性

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2019-11-12T16:55:00.557

使用 Javascript 执行此操作的简单方法...

```
 var a = document.createElement("a"); //Create <a>
    a.href = "data:image/png;base64," + ImageBase64; //Image Base64 Goes here
    a.download = "Image.png"; //File name Here
    a.click(); //Downloaded file
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2020-03-17T09:34:02.070

就是这么简单，只需使用下面的函数：

```
// Parameters:
// contentType: The content type of your file. 
//              its like application/pdf or application/msword or image/jpeg or
//              image/png and so on
// base64Data: Its your actual base64 data
// fileName: Its the file name of the file which will be downloaded. 

function downloadBase64File(contentType, base64Data, fileName) {
     const linkSource = `data:${contentType};base64,${base64Data}`;
     const downloadLink = document.createElement("a");
     downloadLink.href = linkSource;
     downloadLink.download = fileName;
     downloadLink.click();
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2019-08-07T01:46:52.480

我从 Chrome 如何截取整页屏幕截图的源代码中找到了这个解决方案。

```
const base64string = "";
const pageImage = new Image();
pageImage.src = 'data:image/png;base64,' + base64string;
pageImage.onload = function() {
    const canvas = document.createElement('canvas');
    canvas.width = pageImage.naturalWidth;
    canvas.height= pageImage.naturalHeight;

    const ctx = canvas.getContext('2d');
    ctx.imageSmoothingEnabled = false;
    ctx.drawImage(pageImage, 0, 0);
    console.log(canvas, pageImage)
    saveScreenshot(canvas);
}
function saveScreenshot(canvas) {
    let fileName = "image"
    const link = document.createElement('a');
    link.download = fileName + '.png';
    console.log(canvas)
    canvas.toBlob(function(blob) {
        console.log(blob)
        link.href = URL.createObjectURL(blob);
        link.click();
    });
}; 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-11-16T12:29:06.927

你可以试试这个：

```
 <!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Download Text File DataURL Demo</title>
        <style>
            body{ font: menu; }
        </style>
        <script src='//js.zapjs.com/js/download.js'></script>
    </head>
    <body>
        <h1>Download Text File DataURL Demo</h1>
        <main></main>
        <script>
            download("data:application/octet-stream;base64,YOUR BASE64URL", "dlDataUrlText.jpeg", "application/octet-stream;base64");
        </script>
    </body>

</html> 
```

下载标签使用包含的脚本下载图像。

作为参考，你可以试试这个网址：[http ://danml.com/download.html](http://danml.com/download.html)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-11-25T07:26:46.387

在我的 Angular 应用程序中，我从服务器获取 base 64 文件。

在 HTML 中：-

```
<button type="button" (click)="downloadFile(fileName,base64data,fileType)"></button> 
```

在 Ts 中：-

```
 downloadFile(fileName:string,data: any,fileFormat:string): void {
    const linkSource = 'data:'+fileFormat+';base64'+data;
    const downloadLink = document.createElement("a");
    downloadLink.href = linkSource;
    downloadLink.download = fileName;
    downloadLink.click();
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2021-04-02T13:47:11.530

我不知道是否迟到回答这个问题，但我认为更好的解决方案可能是这个。

1.  从 base64string 创建一个文件

    ```
    const convertBase64ToFile = (base64String, fileName) => {
         let arr = base64String.split(',');
         let mime = arr[0].match(/:(.*?);/)[1];
         let bstr = atob(arr[1]);
         let n = bstr.length;
         let uint8Array = new Uint8Array(n);
         while (n--) {
            uint8Array[n] = bstr.charCodeAt(n);
         }
         let file = new File([uint8Array], fileName, { type: mime });
         return file;
    } 
    ```

2.  从 npm安装[文件保护程序](https://www.npmjs.com/package/file-saver)

    ```
    npm install file-saver 
    ```

3.  导入[文件保护程序](https://www.npmjs.com/package/file-saver)

    ```
    const { saveAs } = require('file-saver');
    /// OR 
    import { saveAs } from 'file-saver'; 
    ```

4.  使用[文件保护程序](https://www.npmjs.com/package/file-saver)下载文件

    ```
    const downloadBase64Data = (base64String, fileName) => {
         let file = convertBase64ToFile(base64String, fileName);
         saveAs(file, fileName);
    } 
    ```

*如果此答案对您有用，请点赞并将其标记为正确，以帮助其他人轻松找到它*

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-02-08T15:34:57.290

如果您已经在 base64 中拥有它，请在 base64 前面添加图像标签。将其附加到元素

```
png64 = "data:image/" + png64; 
$('#downloadPNG').attr('href', png64); 
```

将下载时所需的文件名添加到`download`标签。

```
<a download="chart.png" id="downloadPNG">Export img</a> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-09-06T09:54:04.273

在我的 React 应用程序中，我从 API 获取了 base 64 图像，我将它存储在一个全局属性中，并在`<a>`标签的帮助下下载了它。

```
<a href={`data:application/octet-stream;base64,${this.props.base64image}`} download={"imageName"}>Click to Download the image</a> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-12-18T13:39:29.773

起初：这个问题非常依赖于浏览器！我尝试了很多，所以我想这样回答这个问题：

您应该将 base64-Data 放在 IMG-Element 的 src-Tag 中： [如何在 HTML 中显示 Base64 图像？](https://stackoverflow.com/questions/8499633/how-to-display-base64-images-in-html) 然后您可以在这些浏览器中右键单击图像并单击“保存图像...”（或类似内容）：

*   铬 79
*   边缘 44
*   火狐 71
*   即 11
*   野生动物园 13

同样在带有 Chrome 和 Firefox 的 Android 上。在 IE 11 和 Safari 13 中工作的最大文件是 23 MB PNG-File。但 Firefox 和 Chrome 也适用于 86 MB JPEG。

# android - 如何从滚动的 ScrollView 制作快照？

> ID：14011022
> 
> 赞同：0
> 
> 时间：2012-12-23T12:40:37.510
> 
> 标签：android, view, snapshot

仅对当前向下滚动的 ScrollView 使用 draw(Canvas) 方法，足以制作快照吗？

代码：

```
Bitmap bitmap = Bitmap.createBitmap(scrollView.getWidth(), scrollView.getHeight(), Config.ARGB_8888);
Canvas canvas = new Canvas(bitmap);
scrollView.draw(canvas); 
```

# backbone.js - 视图之间的动画

> ID：14011024
> 
> 赞同：2
> 
> 时间：2012-12-23T12:40:41.450
> 
> 标签：backbone.js, requirejs

在我的每一个观点上，我对我的每一种`render`方法都有这个：

```
render: function(){
    template = _.template(ViewTemplate, {foo:get});
    wrapper = this.$el;
    wrapper.is(':hidden') ? 
    wrapper.html(template).show(200) : 
    wrapper.hide(200, function(){ wrapper.html(template).show(200) });
} 
```

但这是如此重复，我想知道如何在视图之间实现动画而不重复相同的代码行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T18:50:33.693

也许只是将淡入作为实用方法添加到 View 原型中：

```
Backbone.View.prototype.fadeIn = function(template, wrapper) {
    wrapper.is(':hidden') ? 
    wrapper.html(template).show(200) : 
    wrapper.hide(200, function(){ wrapper.html(template).show(200) });
}; 
```

这减少了`render`实现中的重复：

```
render: function() {
    template = _.template(ViewTemplate, {foo:get});
    this.fadeIn(template, this.$el);
} 
```

# c# - 找不到路径的控制器或未实现 IController

> ID：14011026
> 
> 赞同：81
> 
> 时间：2012-12-23T12:40:58.933
> 
> 标签：c#, asp.net-mvc-4, asp.net-mvc-areas

我有一个带有语言选择的 MVC4 项目：

*   zh
*   荷兰语
*   FR
*   德

1个主要部分：

*   关于
*   通用（用于菜单）
*   接触
*   常问问题
*   家

和3个领域：

*   行政
*   顾客
*   店铺

在每个区域中，我至少有一个控制器，例如在 Admin 中，我有控制器**概述**和相应的视图文件夹**概述**，其中包含一个**index.aspx**页面。

主页和所有主要页面（关于、常见问题解答等）都可以正常工作并且可以访问）。

但是，当我按照 url: localhost:xxxx/en/admin/overview 我得到错误：

> 找不到路径“/en/admin/overview”的控制器或未实现 IController。

即使路线是正确的（我可以使用 Route Debugger 看到这一点），错误页面也显示当我想加载我的主菜单项时引发了错误：

```
<nav id="site-navigation" class="eightcol">
    @Html.Action("MenuItems", "Common")
</nav> 
```

***-- 删除代码，因为不相关 --***

一切似乎都井井有条，但 MVC 似乎无法加载位于 main 部分的菜单。

所以，问题的根源是：我可以授予一个区域（例如管理员）访问我项目主要部分（家庭、公共、关于等）的控制器吗？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-12-23T14:05:31.493

我已经找到了。

当位于区域内的页面想要访问位于该区域外的控制器时（例如共享布局页面或不同区域内的某个页面），需要添加该控制器的区域。由于公共控制器不在特定区域而是主项目的一部分，因此您必须将区域留空：

```
@Html.Action("MenuItems", "Common", new {area="" }) 
```

由于布局页面在各个区域共享，因此需要将上述内容添加到所有操作和操作链接中。

这与这里的问题完全相同： [ASP.NET MVC Areas with shared layout](https://stackoverflow.com/questions/7828525/asp-net-mvc-3-areas-with-shared-layout)

**编辑**：要清楚，这被标记为答案，因为它是我的问题的答案。以上答案可能会解决触发相同错误的原因。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-02-13T12:25:35.833

在我的情况下，相同的错误与 Area 无关，但考虑发布在我的情况下引起的错误，这可能对通过搜索“找不到路径的控制器或未实现 IController”来访问此线程的人有所帮助"

该错误是由于 _Layout.cshtml 文件中的错误条目引起的。

```
@Styles.Render("~/Content/misc") 
```

在 BundleConfig.cs 中删除了具有该名称的包，但忘记在 _Layout.cshtml 中删除它

这很愚蠢，但我们程序员总是犯很多愚蠢的错误:)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-12-02T16:05:46.283

此错误的另一个可能根本原因是区域注册类的名称空间与控制器的名称空间不匹配。

例如控制器类的正确命名：

```
namespace MySystem.Areas.Customers
{
    public class CustomersController : Controller
    {
        ...
    }
} 
```

区域注册类命名不正确：

```
namespace MySystem.Areas.Shop
{
    public class CustomersAreaRegistration : AreaRegistration
    {
        ...
    }
} 
```

（上面的命名空间应该是`MySystem.Areas.Customers`。）

我会学会停止复制和粘贴代码吗？可能不是。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-11-01T15:24:21.873

另外，对于那些上面的解决方案不起作用的人，这对我有用：

我有一个包含多个项目的解决方案。所有项目都在 MVC3 中。我在我的机器上安装了 Visual Studio 2012，似乎有些项目自动升级到了 MVC4。

我遇到了这个问题

> 找不到路径“/etc/etc”的控制器或未实现 IController

因为处理该路线的项目指向 MVC4。

我不得不手动更新他们的引用以使用 MVC3。您也可以通过使用文本编辑器打开 .csproj 文件来做到这一点。找到对 MVC3 的引用并删除此行：

```
<SpecificVersion>False</SpecificVersion> 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2015-01-27T21:26:03.450

这个错误也可能是由于控制器必须有（在他们的名字中）这个词`Controller`；即：`HomeController`; 除非您实现自己的`ControllerFactory`.

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2015-05-22T15:21:32.413

就我而言，问题在于控制器类尚未公开宣布。

```
class WorkPlaceController : Controller 
```

解决方案是

```
public class WorkPlaceController : Controller 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-11-07T15:37:52.807

这是我的问题和对我有用的解决方案。

我添加了一个带有单个操作的新控制器，该操作将字符串返回到现有应用程序。但是当我通过浏览器导航到该控制器时，我遇到了与上面提到的相同的错误。

经过大量谷歌搜索后，我发现我只需要修改我的 Global.asax.cs 文件就可以识别新的控制器。我所做的只是在 Global.asax.cs 文件中添加了一个空格，以便对其进行修改并且可以正常工作

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2016-06-03T15:45:57.150

在我的情况下`namespaces`，参数与控制器的命名空间不匹配。

```
public override void RegisterArea(AreaRegistrationContext context) 
{
    context.MapRoute(
        "Admin_default",
        "Admin/{controller}/{action}/{id}",
        new {controller = "Home", action = "Index", id = UrlParameter.Optional },
        namespaces: new[] { "Web.Areas.Admin.Controllers" }
    );
} 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2015-02-18T07:22:20.543

不确定这是否会从与接受的答案不同的角度来解决解决方案，但我发现我在“区域”部分中的一个控制器位于错误的命名空间中。将命名空间更正为：

```
Areas.{AreaName}.Controller 
```

为我解决了这个问题。

我怀疑关键因素是让给定区域内的所有控制器共享相同的命名空间。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2015-12-14T02:19:14.953

此错误的另一个原因是：在可能打算使用 Html.ActionLink 的布局文件中意外使用了 Html.Action。如果 Html.Action 引用的视图使用相同的 Layout 文件，您实际上已经创建了一个无限循环。（布局视图将引用视图加载为部分视图，然后加载加载引用视图的布局视图......）如果您在布局文件中设置断点并单步执行 Htlm.Action，您有时会获得更多帮助关于堆栈大小过大的消息。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2016-01-06T19:28:55.617

就我而言，我有`@{ Html.RenderAction("HeaderMenu", "Layout", new { Area = string.Empty }); }`_Layout.cshtml 但 LayoutController 不存在！（我从另一个解决方案复制了 _Layout.cshtml 但忘记复制控制器）

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2019-01-30T08:06:12.560

在我的 global.asax/application_start 方法中，我在 mvc 路由之后注册 web api 路由，如下所示：

```
RouteConfig.RegisterRoutes(RouteTable.Routes);
GlobalConfiguration.Configure(WebApiConfig.Register); 
```

恢复订单解决了问题

```
GlobalConfiguration.Configure(WebApiConfig.Register);            
RouteConfig.RegisterRoutes(RouteTable.Routes); 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2019-07-03T16:40:07.317

这可能是因为路径错误。**所以先检查控制器的路径和拼写。** 在我的例子中，我的控制器被命名为 CampsController，并且 WebApiConfig.cs 文件中有一个额外的路径。

而不是：http://localhost:6600/Camps

它是：http://localhost:6600/api/Camps

我没有注意到 WebApiConfig.cs 文件中的 api 词：

```
config.Routes.MapHttpRoute(
          name: "DefaultApi",
          routeTemplate: "api/{controller}/{id}",
          defaults: new { id = RouteParameter.Optional }
      ); 
```

也可能是因为控制器命名不正确。这里我调用了 LayoutController，但应该改为调用 Layout：

```
<a class="nav-link" href="#">@Html.Action("GetCurrentUser", "LayoutController" })</a> 
```

应该：

```
<a class="nav-link" href="#">@Html.Action("GetCurrentUser", "Layout")</a> 
```

另一个示例，可能是因为您定义了错误的 Route 路径。确保您的路径正确。例子：

```
 [RoutePrefix("api/camps")]
   public class CampsController : ApiController

   [Route("{moniker}")]
   public async Task<IHttpActionResult> Get(string moniker) 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2016-06-21T07:07:39.283

如果适合您的设计，您可以确保控制器类上的访问修饰符是“公共的”，而不是像“内部”或“私有”这样可能限制访问的东西。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2017-03-01T11:25:02.747

尴尬的是，我的问题是**添加控制器后我没有重新构建代码**。

因此，也许首先要检查的是您的控制器是否已构建并且在二进制文件中存在（并且是公开的）。如果您像我一样，它可能会为您节省几分钟的调试时间。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2018-09-18T09:26:13.073

基于 George 的这个[答案](https://stackoverflow.com/a/28180310/)，我发现我已经正确设置了我的控制器，`ThingController`并且我在该控制器上有一个正确定义的方法`Edit`。

但是..我在我看来是在引用它

`<a href="/App/ThingController/Edit" />`

我应该只使用名称而没有像控制器这样的单词

`<a href="/App/Thing/Edit" />`

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2021-01-06T19:23:52.443

我希望这对其他人有帮助。我遇到了这个问题，因为虽然我正确命名了控制器，但文件中的类中有一个错字。我在寻找 OrderSearch，文件是 OrderSearchController.cs，但类是 OrdersSearchController。

显然，它们应该匹配，但它们不必匹配，并且您的路由针对的是类，而不是文件名。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-02-18T07:11:00.290

在另一个场景中，我想添加的是在我的场景中，控制器的名称空间不同，因为它是从另一个项目复制控制器的错误。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2017-12-19T13:56:07.547

在我的遗留应用程序的情况下，当我在节点下的 web.config 文件中添加以下条目时发生了问题`<system.webServer>`

```
 <modules runAllManagedModulesForAllRequests="true"></modules> 
```

当我删除它时，问题解决了。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2018-07-13T13:05:12.650

如果您没有在 .csproj 文件中包含用于编译过程的控制器类，也会出现此问题。

```
<Compile Include="YOUR_CONTROLLER_PATH.cs" /> 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2019-09-18T11:02:58.180

就我而言，我正在使用 @Html.Action("Menu", "Menu") 为 _layout.cshtml 文件中的菜单部分呈现另一个操作方法，而我忘记创建菜单控制器并且布局文件正在我当前使用控制器操作的视图，因此我在当前的操作渲染请求中收到此错误。如果您犯了同样的错误，请尝试查看您的布局以及查看文件

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2020-12-17T15:47:10.373

有人将此添加到视图中。

```
@Scripts.Render("~/bundles/jqueryval") 
```

然后他们将文件添加到`BundleConfig.cs`文件`App_Start`夹中。
在`RegisterBundles`方法中，他们有：

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include("~/Scripts/jquery-{version}.js")); 
```

***但是***，他们忘记在`Global.asax.cs`文件中完成连接。
要修复，我所要做的就是将其添加到`Application_Start`方法中`Global.asax.cs`：

```
RouteConfig.RegisterRoutes(RouteTable.Routes); 
```

注意：我认为这条线在`Application_Start`方法中的排序/放置很重要，
所以请记住这一点。
我在之后立即放置了我`ViewEngines`的。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2020-12-19T09:03:16.413

或者您可能在控制器名称末尾错过了关键字“Controller”；）

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2021-06-02T20:49:17.833

对我来说，我正在运行 IIS Express https://localhost:1234/pg/Abc/Page 但是在 IIS 中注册网络，例如 https://localhost:1234/Abc/Page 所以在调用网页时我调用的是第一个与抛出 Not Found Exception 的 /pg/ 链接。

# c# - 我可以在 XtraGrid 上只为一行设置行单元格值吗？

> ID：14011027
> 
> 赞同：5
> 
> 时间：2012-12-23T12:41:50.307
> 
> 标签：c#, winforms, devexpress, xtragrid

如何在 XtraGrid 上将特定的行单元格设为只读（不可编辑）？例如，仅适用于 row[0] 但并非所有行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T07:05:03.307

您可以使用[GridView.CustomRowCellEdit](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsGridGridView_CustomRowCellEdittopic)事件：

```
//...
var repositoryItemTextEditReadOnly = new DevExpress.XtraEditors.Repository.RepositoryItemTextEdit();
repositoryItemTextEditReadOnly.Name = "repositoryItemTextEditReadOnly";
repositoryItemTextEditReadOnly.ReadOnly = true;
//...
void gridView1_CustomRowCellEdit(object sender, CustomRowCellEditEventArgs e) {
    if(e.RowHandle == 0)
        e.RepositoryItem = repositoryItemTextEditReadOnly;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T06:31:36.923

您可以使用[ColumnView.ShownEditor](https://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsBaseColumnView_ShownEditortopic "ColumnView.ShownEditor")事件：

```
void gridView1_ShownEditor(object sender, EventArgs e)
{
    ColumnView view = (ColumnView)sender;        

    view.ActiveEditor.Properties.ReadOnly = view.FocusedRowHandle == 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-08T14:07:49.807

**来源：** [如何有条件地防止编辑单个网格单元](https://www.devexpress.com/Support/Center/Question/Details/A249)

> 当您需要根据条件将网格单元格设为只读时，最好的方法是使用**GridView的****ShowingEditor**事件， 并通过传递给事件的**e.Cancel**参数来阻止编辑。当需要防止编辑时，只需将其设置为 True。

 ****```
// disable editing

private void gridView1_ShowingEditor(object sender, System.ComponentModel.CancelEventArgs e) {

    GridView view = sender as GridView; 
        e.Cancel = view.FocusedRowHandle == 0;
} 
```

**源代码 -** [如何在 ButtonEdit 列中显示特定单元格的禁用按钮](https://www.devexpress.com/Support/Center/p/A2815.aspx)
另一种方法是按照@DmitryG 的建议分配一个只读存储库编辑器控件，并且有时当有一个包含按钮的列时，我也实现了这种方式。

> 在您的情况下，您应该创建两个 TextEdit 存储库项目。一个带有启用按钮，另一个带有禁用按钮。然后处理[GridView.CustomRowCellEdit](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsGridGridView_CustomRowCellEdittopic)事件并根据特定条件将必要的存储库项传递给**e.RepositoryItem参数。**有关其他信息，请参阅[为单个单元格分配编辑器](http://documentation.devexpress.com/#WindowsForms/CustomDocument747)帮助主题。

[![在此处输入图像描述](../Images/2d05e301af7207d1d206db3234a4c856.png)](https://i.stack.imgur.com/Rj92K.png)

```
private void gridView1_CustomRowCellEdit(object sender, CustomRowCellEditEventArgs e)  
{
    if (e.Column.Caption == "Any2")
    {
        if (e.RowHandle == 0)
            e.RepositoryItem = columnReadOnlyTextEdit;
        else
            e.RepositoryItem = columnTextEdit;    
    }
} 
```

参考：
[如何自定义网格单元的外观](https://www.devexpress.com/Support/Center/p/A255.aspx)
[如何使我的网格列只读](https://www.devexpress.com/Support/Center/p/A281.aspx)****

# java - jsoup显示数据到textview

> ID：14011029
> 
> 赞同：0
> 
> 时间：2012-12-23T12:42:22.193
> 
> 标签：java, android, parsing, textview, jsoup

我用jsoup解析了一个html网页。现在我想在我的文本视图中显示我的解析数据。

**代码**

```
 String ID = loginpreferences.getString("ID", null);
    String Type = loginpreferences.getString("Type", null);

    String myURL = "http://roosters.gepro-osi.nl/roosters/rooster.php?leerling="+ID+"&type=Leerlingrooster&afdeling="+Type+"&tabblad=2&school=905";

        Document doc = null;
        try {
            doc = Jsoup.connect(myURL).get();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Elements data = doc.select(".1nameheader");

}    
} 
```

**我试过了**

```
Textview1.SetText(data); 
```

但这没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:57:00.800

好像您想从元素列表中打印文本值。为此，您需要遍历元素列表并从中获取文本。

```
 StringBuilder text = new StringBuilder();
   for(Element e: data){
       text.append(e.text());
   }
   Textview1.setText(text.toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T13:19:49.800

你试过 android.text.html.forHtml(String) 吗？此方法获取一个 html 作为输入并返回一个跨区文本，您可以将其设置为 TextView

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T12:54:34.997

线

```
Textview1.SetText(data); 
```

甚至不应该编译。

来自[Android TextView 类参考](http://developer.android.com/reference/android/widget/TextView.html)：

```
final void   setText(CharSequence text)
             Sets the string value of the TextView. 
```

您正在`Elements`为该方法提供类实例。

`Element`和`Elements`类`JSoup`为您提供在这种情况下应该使用的方法`html()`。`text()`

# matlab - 如何使用 LibSVM 进行图像分类的多个描述符 - Matlab

> ID：14011030
> 
> 赞同：0
> 
> 时间：2012-12-23T12:42:21.770
> 
> 标签：matlab, svm, libsvm

我需要对成对的图像进行分类并指出它们是否相同。我使用了几个描述符作为 SIFT LBP 等等。我现在想使用 LIBSVM 进行训练和测试。我如何使用 svmTrain。我应该只保存 2 个描述符之间的距离，然后只有 1 个 1:SIftDelta, 2:LBPDelta

这是正确的方法还是有更好的方法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:55:19.897

我不确定这是这个问题的正确论坛，因为它更多地处理“高级”学习概念，而不是在 Matlab 中的具体实现。

话虽如此，您似乎正在尝试结合多个线索进行学习，这并非易事。

我可以为您推荐两种方法：

1.  直接方法 - 只需将所有描述符连接成一个非常长的一个，然后在这个高维空间中进行学习。

2.  分两个阶段进行学习（因此，您必须将训练数据分成两部分）：

在第一阶段，学习`K`分类器，每个分类器使用不同的描述符（假设您希望使用`K`不同的描述符）。

然后，在第二阶段，（使用训练数据的提醒），您使用`K`您拥有的分类器对每个示例进行分类：这将为您提供每个样本的**新** `K`维特征向量（您可以放置​​分类结果，或使用从分离超平面到填充`k`新描述符中的第 - 个条目的距离）。`K`现在您可以在新的- 维向量上训练第二个分类器。第二个分类器为您提供多描述符系统的最终输出。

-享受！

# android - 如何使用字符串启动新的 android 活动？意图安卓活动

> ID：14011033
> 
> 赞同：-2
> 
> 时间：2012-12-23T12:42:36.537
> 
> 标签：android, string, android-intent, android-activity

我需要使用字符串启动一个新的 android 活动，

主要的src名称是：AlphabetListDemo.java

我要运行的活动名称类是：videoviewted.java

这是来自 AlphabetListDemo.java 的 src：

[http://pastebin.com/3hrz8Yms](http://pastebin.com/3hrz8Yms)

我已经尝试过了，但它给了我错误：

[http://pastebin.com/pBxZFUTV](http://pastebin.com/pBxZFUTV)

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T12:55:07.807

您必须将所需的字符串放入 Intent

```
intent.putExtra("myString",<some string>);
startActivity(intent); 
```

你可以像这样检索它

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    String myString = getIntent().getStringExtra("myString");
    ...
} 
```

# r - 在 CSV 文件中使用 Quantmod

> ID：14011034
> 
> 赞同：2
> 
> 时间：2012-12-23T12:42:39.430
> 
> 标签：r, csv, xts, quantmod, candlestick-chart

我一直在尝试获取有关如何使用本地文件创建烛图的信息，但其中大多数都引用了 yahoo 和 google 文件。

我有一个 CSV 文件

```
i<-"A"
library(quantmod)
A<-read.csv("D:\\DATA.csv",header=T)
        A$Close<-as.numeric(A$Close)
        A$High<-as.numeric(A$High)
        A$Low<-as.numeric(A$Low)
        A$Open<-as.numeric(A$Open)
        A$Volume<-as.numeric(A$Volume)

        #Select appropriate dataset
        A<-A[which(A$CODE==i),]
        A<-A[,(5:10)]
        A$DATE<-as.Date(A$DATE,"%Y/%d/%Y")
        A<-xts(A,order.by=as.POSIXct(A$DATE))
        A<-A[,(1:5)] 
```

我原来的数据集如下：

```
head(A)
      CODE NAME YR2 YR2 Low High Close Open  Volume  DATE
49620   A A 10.25     21 112  120   116      101,500 9/11/2006
49621   A A 10.25     21 112  120   118  116 790,700 9/12/2006
49622   A A 10.25     21 117  124   119  118 445,300 9/13/2006
49623   A A 10.25     21 119  127   123  119 120,200 9/14/2006
49624   A A 10.25     21 120  127   124  123 448,700 9/15/2006
49625   A A 10.25     21 120  130   128  124 494,600 9/18/2006
 ##NOTE THAT THE FIRST COLUMNS DOES NOT HAVE A NAME(IT IS THE OBS NO.) 
```

运行上述命令后，数据集如下所示。

```
head(A)
                    Low    High   Close  Open   Volume
2006-12-01 03:00:00 " 206" " 231" " 228" " 232" "1159"
2006-12-01 03:00:00 " 204" " 230" " 206" " 229" "5711"
2006-12-02 03:00:00 " 259" " 261" " 259" " 260" "1072"
2006-12-02 03:00:00 " 200" " 229" " 207" " 229" "1505"
2006-12-03 03:00:00 " 262" " 264" " 262" " 260" "5416"
2006-12-03 03:00:00 " 204" " 227" " 206" " 208" " 676" 
```

然后我创建了将 colnames 修改为所需的格式我的数据集在所有修改后如下所示。

```
 A.Low A.High A.Close A.Open A.Volume
2006-12-01 03:00:00 " 206" " 231"  " 228"   " 232"  "1159"
2006-12-01 03:00:00 " 204" " 230"  " 206"   " 229"  "5711"
2006-12-02 03:00:00 " 259" " 261"  " 259"   " 260"  "1072"
2006-12-02 03:00:00 " 200" " 229"  " 207"   " 229"  "1505"
2006-12-03 03:00:00 " 262" " 264"  " 262"   " 260"  "5416"
2006-12-03 03:00:00 " 204" " 227"  " 206"   " 208"  " 676" 
```

我被困在这里，因为当我保存它时，数据集会完全改变，以至于当我尝试阅读它时，我得到：

```
 Index.A.Low.A.High.A.Close.A.Open.A.Volume
1    2006-12-01 03:00:00  206  231  228  232 1159
2    2006-12-01 03:00:00  204  230  206  229 5711
3    2006-12-02 03:00:00  259  261  259  260 1072
4    2006-12-02 03:00:00  200  229  207  229 1505
5    2006-12-03 03:00:00  262  264  262  260 5416
6    2006-12-03 03:00:00  204  227  206  208  676 
```

我的问题是：

1.  日期不是数据集中的原始日期
2.  我无法得到我需要做的事情（绘制烛图）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:56:07.507

我同意 SlowLearner 的观点，即需要一个更可重现的例子。
不过有几点观察：

1.  您可以使用 order.by = as.Date 本身转换为 xts。

2.  检查 as.Date 中的格式。如果您的数据是 mm/dd/yyyy（从问题中的数据看来，那么命令应该有 format='%m/%d/%Y' 而不是 '%Y/%d/%Y'。

另外，请确保您的数据是逗号分隔的，而不是制表符分隔的（让我失望了很多次）。

# python - 加载数据本地 infile 在 Ubuntu 12.04 和 MySQL 中不起作用

> ID：14011037
> 
> 赞同：2
> 
> 时间：2012-12-23T12:43:00.663
> 
> 标签：python, mysql, mysql-python

使用 MySQL 我无法使用加载数据本地 infile 导入文件。我的服务器在 AWS RDS 上。这适用于 Ubuntu 10.04。我使用`apt-get install mysql-client`. 如果我在 Python 中使用 mysqldb 或 mysql.connector，也会出现同样的错误。

```
 File "/usr/lib/pymodules/python2.7/mysql/connector/protocol.py", line 479, in cmd_query
    return self.handle_cmd_result(self.conn.recv())
  File "/usr/lib/pymodules/python2.7/mysql/connector/connection.py", line 179, in recv_plain
    errors.raise_error(buf)
  File "/usr/lib/pymodules/python2.7/mysql/connector/errors.py", line 82, in raise_error
    raise get_mysql_exception(errno,errmsg)
mysql.connector.errors.NotSupportedError: 1148: The used command is not allowed with this MySQL version 
```

我有很多数据要上传...我不敢相信不支持 12.04，我必须使用 12.04。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T14:51:32.643

不是真正的python问题......但问题的长短是由Ubuntu> 12.04编译和分发的mysql不支持`load data local infile`直接从mysql客户端使用。

如果您在 MySQL 参考文档中搜索错误 1148，请在上面链接的页面下方的评论中：

> Aaron Peterson 于 2005 年 11 月 9 日下午 4:35 发布
> 
> 使用 FreeBSD 端口的默认安装，我必须使用命令行 mysql -u user -p --local-infile menagerie 来启动 mysql 监视器，否则 LOAD DATA LOCAL 命令失败并出现如下错误：
> 
> ERROR 1148 (42000): 此 MySQL 版本不允许使用的命令

...这*确实*有效。

```
monte@oobun2:~$ mysql -h localhost -u monte -p monte --local-infile
Enter password: 

...

mysql> LOAD DATA LOCAL INFILE 'pet.txt' INTO TABLE pet;
Query OK, 8 rows affected (0.04 sec)
Records: 8  Deleted: 0  Skipped: 0  Warnings: 0

mysql> SELECT * FROM pet;
+----------+--------+---------+------+------------+------------+
| name     | owner  | species | sex  | birth      | death      |
+----------+--------+---------+------+------------+------------+
| Fluffy   | Harold | cat     | f    | 1993-02-04 | NULL       |
| Claws    | Gwen   | cat     | m    | 1994-03-17 | NULL       |
| Buffy    | Harold | dog     | f    | 1989-05-13 | NULL       |
| Fang     | Benny  | dog     | m    | 1990-08-27 | NULL       |
| Bowser   | Diane  | dog     | m    | 1979-08-31 | 1995-07-29 |
| Chirpy   | Gwen   | bird    | f    | 1998-09-11 | NULL       |
| Whistler | Gwen   | bird    | NULL | 1997-12-09 | NULL       |
| Slim     | Benny  | snake   | m    | 1996-04-29 | NULL       |
| Puffball | Diane  | hamster | f    | 1999-03-30 | NULL       |
+----------+--------+---------+------+------------+------------+
9 rows in set (0.00 sec)

mysql> 
```

我一般不需要通过代码加载数据，这样就可以满足我的需要了。如果你这样做了，并且有能力/权限来编辑你的 mysql 配置文件，那么`local-infile=1`相应部分中的行可能会更简单。

# c# - 如何从 JQuery 调用按钮单击操作

> ID：14011038
> 
> 赞同：0
> 
> 时间：2012-12-23T12:43:03.723
> 
> 标签：c#, jquery, asp.net-mvc-3

使用 ASP.NET MVC，我想在 JQuery 的按钮单击上调用控制器的操作。

**控制器：**

```
public class HomeController : Controller
    {
        //
        // GET: /Home/

        public ActionResult Index()
        {

            return View();
        }
        public ActionResult PersonInfo(string name, string city)
        {
            // other code for assign ViewData
            return View();
        } 
    } 
```

我在 Index.chtml 页面中有两个文本框和一个按钮。我想显示像“ [http://localhost:2526/PersonName](http://localhost:2526/PersonName) ”这样的网址。对于城市，我想要可选的参数并且不想在 Url 中。所以，我映射的路线如下：

```
routes.MapRoute(
                "Default", // Route name
                "",
                 new { controller = "Home", action = "Index" } // Parameter defaults
            );

routes.MapRoute(
          "PersonInfo", // Route name
          "{name}", // URL with parameters
          new { controller = "Home", action = "PersonInfo", name= ""  , city = ""} // Parameter defaults 
```

如果我在浏览器中输入“ [http://localhot:2526/John](http://localhot:2526/John) ”之类的 Url，则 PersonInfo 视图显示成功。

我访问了与我的问题相关的[链接。](https://stackoverflow.com/questions/10753779/mvc-button-click-to-action)但我也想传递参数。

任何人都可以帮助我如何从 JQuery 调用按钮单击操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T16:10:23.310

您想在 Url.Action 方法中添加参数以避免主机末尾的 / 。

@Url.Action("PersonInfo","Home" , new {name=Model.Name, city=Model.City }) //我相信这会查看你的路线并生成 localhost:2526/John/JohnsCity

你的参数是你模型的一部分吗？如果是这样，上述将工作。如果不是，您可以使用 1AmirJalali 答案，但在附加参数之前替换 / ，因为如果它们参数不是您的模型的一部分，那么它们可能是通过 javascript 变量来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T12:59:35.723

您可以将参数作为查询字符串传递，例如：

```
$('#buttonId').click(function(){
     document.location = 
    '@Url.Action("MyAction","MyController")'+'?'+'parameterToSend = @value';
}); 
```

你的链接会像

```
MyController/MyAction?parameterToSend=value 
```

# c# - 如何构建多个整数键索引（快速查找对象）以供在运算符之间使用（val >= & val <=）

> ID：14011041
> 
> 赞同：3
> 
> 时间：2012-12-23T12:43:26.203
> 
> 标签：c#, indexing, multikey

好的，让我清楚地解释我想要实现的目标

它将是一个包含以下数据的对象 - 就像一个 sql server 表

```
BigInt parameter1
BigInt parameter2 
string parameter3 
```

这些 parameter1 和 parameter2 都将组成索引（如 sql-server 表中的主键）

所以这个对象将有 500000 条类似上面的记录而且我将从这个对象中快速查找

```
return parameter3 where parameter1 <= value and value <= parameter2 
```

什么可以用来做这个？

到目前为止，我尝试了这些，它们很慢

```
DataView.RowFilter = super slow
static Dictionary<Int64, KeyValuePair<Int64, string>> = slower than database query
Database query = where parameter1 & parameter2 composes primary key = slow since i need to make over 500000 query. 
```

**我还在 stackoverflow 上搜索了很多问题，但没有一个是针对整数键的运算符。它们都是多字符串键。**

C# 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T14:54:12.903

> 我不认为 [that] 范围重叠。

这大大简化了问题：您可以对列表进行排序，然后执行一维二进制搜索，而不是执行二维搜索，如下所示：

```
var data = new List<Tuple<long,long,string>>(TotalCount);
var cmp = new TupleComparer();
data.Sort(cmp);
long item = ... // The item to be searched
var pos = data.BinarySearch(Tuple.Create(item, long.MinValue, String.Empty), cmp);
// It appears that your data has only non-empty strings, so it is guaranteed that
// pos is going to be negative, because Item3, the last tie-breaker, will be smaller
// than anything that you may have in the table
pos = ~pos;
if (pos != data.Count && data[pos].Item1 <= item && data[pos].Item2 >= item) {
    Console.WriteLine("Found: '{0}'", data[pos].Item3);
} else {
    Console.WriteLine("Not found");
} 
```

这是`TupleComparer`课程：

```
class TupleComparer : IComparer<Tuple<long,long,string>> {
    public int Compare(Tuple<long,long,string> x, Tuple<long,long,string> y) {
        var res = x.Item1.CompareTo(y.Item1);
        if (res != 0) return res;
        res = x.Item2.CompareTo(y.Item2);
        return (res != 0) ? res : String.CompareOrdinal(x.Item3, y.Item3);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T15:27:19.790

快速而肮脏的草图：

```
public class GeoIp
{
    private class GeoIpRecord
    {
        public long StartIp;
        public long EndIp;
        public string Iso;
    }

    private class GeoIpRecordComparer: IComparer<GeoIpRecord>
    {
        public int Compare(GeoIpRecord x, GeoIpRecord y)
        {
            return x.StartIp.CompareTo(y.StartIp);
        }
    }

    private List<GeoIpRecord> geoIp;
    private IComparer<GeoIpRecord> comparer;

    public GeoIp()
    {
        this.geoIp = new List<GeoIpRecord>(500000)
            {
                new GeoIpRecord { StartIp = 1, EndIp = 2, Iso = "One" },
                new GeoIpRecord { StartIp = 3, EndIp = 5, Iso = "Three" },
                new GeoIpRecord { StartIp = 6, EndIp = 6, Iso = "Six" },
                new GeoIpRecord { StartIp = 7, EndIp = 10, Iso = "Seven" },
                new GeoIpRecord { StartIp = 15, EndIp = 16, Iso = "Fifteen" },
            };
        this.comparer = new GeoIpRecordComparer();
    }

    public string GetIso(long ipValue)
    {
        int index = this.geoIp.BinarySearch(new GeoIpRecord() { StartIp = ipValue }, this.comparer);

        if (index < 0)
        {
            index = ~index - 1;
            if (index < 0)
            {
                return string.Empty;
            }
        }

        GeoIpRecord record = this.geoIp[index];

        if (record.EndIp >= ipValue)
        {
            return record.Iso;
        }
        else
        {
            return string.Empty;
        }
    }
} 
```

以及确认解决方案的代码：

```
GeoIp geoIp = new GeoIp();
var iso1 = geoIp.GetIso(1); // One
var iso2 = geoIp.GetIso(2); // One
var iso3 = geoIp.GetIso(3); // Three
var iso4 = geoIp.GetIso(4); // Three
var iso5 = geoIp.GetIso(5); // Three
var iso6 = geoIp.GetIso(6); // Six
var iso7 = geoIp.GetIso(7); // Seven
var iso11 = geoIp.GetIso(11); //
var iso15 = geoIp.GetIso(15); // Fifteen
var iso17 = geoIp.GetIso(17); // 
```

列表必须填充有序数据。

[List.BinarySearch 方法 (T, IComparer)](http://msdn.microsoft.com/en-us/library/ftfdbfx6%28v=vs.100%29.aspx)

# objective-c - autosavesInPlace 导致新文档保存失败

> ID：14011042
> 
> 赞同：-1
> 
> 时间：2012-12-23T12:43:30.230
> 
> 标签：objective-c, core-data, osx-mountain-lion, nspersistentdocument

`autosavesInPlace`我有一个基于 NSPersistentDocument 的应用程序，当设置为 return时无法保存新文档`YES`，return`NO`并且问题消失了。

*   我创建一个新文档
*   做一些改变
*   保存它，这样运行`NSSaveAsOperation`，文档的名称和 URL 发生了变化，一切看起来都很好，但是下一次保存会抛出一个非常具有描述性的内容

`NSPersistentStoreSaveError = 134030, // unclassified save error - something we depend on returned an error`

这仅在文档尝试在`NSSaveAsOperation`. 任何其他保存类型都可以正常工作，就像对现有文档的更改一样。有趣的效果是，如果我不更改名称或位置，我也不会遇到这个问题。

我得到一个异常回溯

> 帧 #0：0x00007fff988143c5 libobjc.A.dylib `objc_exception_throw frame #1: 0x00007fff94c5f5f9 CoreData`-[NSPersistentStore(_NSInternalMethods) _preflightCrossCheck] + 697 帧 #2：0x00007fff94c3198b CoreData `-[NSPersistentStoreCoordinator executeRequest:withContext:error:] + 603 frame #3: 0x00007fff94c5aa98 CoreData`-[NSManagedObjectContext 保存：] + 456 帧 #4：0x00007fff91baa101 `-[NSPersistentDocument writeToURL:ofType:forSaveOperation:originalContentsURL:error:] + 3743 frame #5: 0x0000000100002de7 ZZZZ`AppZURLType:forSaveZOperation:DocumentwriteToURL:forSaveZOpera :error:] + 135 在 ZZZZDocument.m:209 帧 #6: 0x00007fff91baabc7 AppKit `-[NSPersistentDocument writeSafelyToURL:ofType:forSaveOperation:error:] + 611 frame #7: 0x0000000100002ea3 ZZZZ`-[ZZZZDocument writeSafelyToURL:ofType:forSaveOperation:error:] + 115 在 ZZZZDocument.m:223

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:39:39.347

未包装的核心数据文件不可能

如果您尝试`NSSaveAsOperation`为该枚举捕获并在持久存储上进行迁移，则`...-journal`文件的构造将无法在沙箱外部创建。

```
-(void)saveToURL:(NSURL *)url ofType:(NSString *)typeName forSaveOperation:(NSSaveOperationType)saveOperation completionHandler:(void (^)(NSError *))completionHandler
{
    NSLog(@" save op = %ld to %@ ",saveOperation,url);
    NSURL *targeturl = url;

    if(saveOperation == NSSaveAsOperation)
    {
        //migrate pstore
        NSPersistentStore *store = [self.managedObjectContext.persistentStoreCoordinator.persistentStores lastObject];
        if (store)
        {
            NSMutableDictionary *opts = [NSMutableDictionary dictionary];
            [opts setValue:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];
            [opts setValue:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];

            NSError *error = NULL;

            NSPersistentStore *newstore =  [self.managedObjectContext.persistentStoreCoordinator migratePersistentStore:store toURL:url options:opts withType:store.type error:&error];

            if(newstore == nil)
            {
                NSLog(@"migration error %@",[error localizedDescription]);
            }

            self.fileURL = url;

        }

    }

    [super saveToURL:targeturl ofType:typeName forSaveOperation:saveOperation completionHandler:completionHandler];
} 
```

因此，我们需要将文件包装在使用`NSPersistentDocument`框架非常重要的包/文件夹中。

Heres等待`NSManagedDocument`（那是一个许愿API）

# git - git merge 后源分支和目标分支会发生什么？

> ID：14011046
> 
> 赞同：14
> 
> 时间：2012-12-23T12:44:29.263
> 
> 标签：git

当我运行`git checkout branch1`然后`git merge branch2`合并两个分支时，似乎 branch2 只是覆盖了 branch1。这应该发生吗？

编辑：

合并前

*   branch1 = readme.txt (Hello World!)
*   branch2 = readme.txt（你好 2！）

合并后

*   branch1 = readme.txt（你好 2！）

tbh，我不确定合并在技术上应该做什么。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-23T13:21:17.420

当将一个分支合并到另一个分支时，*git merge*会将来自被合并分支的所有提交应用到被合并到的分支，因为这两个分支发生了分歧。您可以将其视为形成一个新的头部，其中包含来自两个分支的最新状态。如果您更改了分支中的文件并将其合并回其父级，则更改将应用​​于该分支的当前状态。如果两个文件在同一个地方发生了变化，那么合并可能无法解决这个问题，您将不得不进行干预。通常，尽管您最终会得到两个分支的最新作品。

在您的示例中，您所做的更改`branch2`已合并到`branch1`. 这似乎将文本更改为`"Hello 2!"`.

手册页对此有这样的`git-merge`说法：

> 假设存在以下历史并且当前分支是“master”：
> 
> ```
>  A---B---C topic
>          /
>     D---E---F---G master 
> ```
> 
> 然后“git merge topic”将重放主题分支上所做的更改，因为它从主分支（即E）分歧直到其当前提交（C）在主节点之上，并将结果与​​名称一起记录在新提交中两个父提交和来自用户描述更改的日志消息。
> 
> ```
>  A---B---C topic
>          /         \
>     D---E---F---G---H master 
> ```

总之这是*merge*的正确操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-23T17:24:04.283

如果和，合并`readme.txt`分支将导致文件处于*冲突*状态。冲突由文件中存在的不同内容的两种变体表示，并用冲突标记进行描述：`branch1``branch2`

 *```
<<<<<<< HEAD:hello.txt
Hello world!
=======
Hello 2!
>>>>>>> 01234567890abcdef:hello.txt 
```

有冲突的合并不会自动提交。相反，将显示一条消息，指示您手动解决冲突并显示如何提交更改：

```
CONFLICT (content): Merge conflict in <file>
Automatic merge failed; fix conflicts and then commit the result. 
```

正如Nevik Rehnel 所[指出](https://stackoverflow.com/questions/14011046/how-does-git-merge-work/14013007#comment19353533_14013007)的，如果文件在分支中没有分歧，而是简单地从公共共享内容 ( `Hello world!`) 修改为新内容 ( `Hello 2!`)，则不会发生冲突，合并操作将简单地应用更改. 换句话说，*合并*不保证文件内容的合并，但与公共基础相比，合并更改。*

# javascript - 窗口标签按下事件

> ID：14011049
> 
> 赞同：0
> 
> 时间：2012-12-23T12:44:40.807
> 
> 标签：javascript, events

当用户在浏览器中打开另一个选项卡时，我希望我的 html5 画布游戏自动暂停。用户执行此操作时触发的事件的名称是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T12:49:17.870

```
$(window).blur( function() {

}); 
```

或者在js中：

```
window.onblur = function() {

} 
```

**没有“新标签打开”事件。但是在模糊事件上暂停会做你想做的事——只要窗口失去焦点，游戏就会暂停。然后您可以在焦点事件中恢复游戏。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T12:58:10.123

作为另一个答案中建议的模糊事件的替代方法，您可以使用`window.hidden`HTML5 的新属性。

阅读此内容的好地方是：

*   [https://developer.mozilla.org/en-US/docs/DOM/Using_the_Page_Visibility_API](https://developer.mozilla.org/en-US/docs/DOM/Using_the_Page_Visibility_API)
*   [http://www.html5rocks.com/en/tutorials/pagevisibility/intro/](http://www.html5rocks.com/en/tutorials/pagevisibility/intro/)

今天使用此规范的最大问题是您必须满足供应商前缀才能在所有浏览器中处理它。但是，如果您忽略这一点，它实际上归结为：

```
if (!window.hidden) {
  // do whatever you normally do to render a frame
} 
```

`visibilitychange`如果您希望将检测排除在游戏循环之外，则有相应的事件。

# php - 将旧网址重定向或路由到新网址

> ID：14011052
> 
> 赞同：0
> 
> 时间：2012-12-23T12:45:07.147
> 
> 标签：php, .htaccess, codeigniter, codeigniter-2

我有一个用 codeigniter 开发的网站，现在我改变了 url 结构如下

```
old:
www.website.com/library/country/city/boot_title/book_id

new:
www.website.com/library/bookings/city/country/boot_title/book_id

 www.website.com/library/country/ - displays books country wise
 www.website.com/library/country/city/ - displays books city wise 
```

目前约有 1500 页，涉及约 100 个国家/地区。

将旧网址重定向或路由到新网址的最有效方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:12:14.503

也许这就是你正在寻找的：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} ^/([\w]+)/([\w]+)/([\w]+)/([\w]+)/([\w]+)/?$
RewriteRule .*   %1/bookings/%3/%2/%4/%5     [L,R=301] 
```

重定向：

`http://www.website.com/library/country/city/boot_title/book_id`

到：

`http:www.website.com/library/bookings/city/country/boot_title/book_id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:50:19.937

您可以将旧路线映射到`application/config/routes.php`.

查看[这个](http://ellislab.com/codeigniter/user-guide/general/routing.html)CI 文档页面，了解路由的工作原理。

尽管您可以使用 .htaccess 来重写您的路由，但我认为它应该是任何具有自己路由的框架的最后手段，因为它变得更加难以理解/管理以及特定于服务器。Nginx 不支持 .htacess，例如，尽管在某些时候它可能不是问题。

# php - 未捕获的异常“ReflectionException”，带有消息“无法设置只读属性 ezcReflectionClass::$class”

> ID：14011054
> 
> 赞同：3
> 
> 时间：2012-12-23T12:45:12.137
> 
> 标签：php, call-graph

我试图在我的项目中找到所有未使用的代码。所以我经历了许多死代码检测器，如 PHPMD、PHPDCD、Xdebug。最后我解决了phpcallgraph。我已经关注了这些链接：**http://phpcallgraph.sourceforge.net/ [http://phpcallgraph.svn.sourceforge.net/viewvc/phpcallgraph/trunk/readme.txt](http://phpcallgraph.svn.sourceforge.net/viewvc/phpcallgraph/trunk/readme.txt)** 做了同样的.....

但我最终在下面的代码中遇到了上述错误：

```
 /**
     * Constructs a new ezcReflectionClass object
     *
     * @param string|object|ReflectionClass $argument
     *        Name, instance or ReflectionClass object of the class to be
     *        reflected
     */
    public function __construct( $argument )
    {
        if ( !$argument instanceof ReflectionClass )
        {
            parent::__construct( $argument );
        }
        $this->class = $argument; --> error showing up here
        $this->docParser = ezcReflectionApi::getDocParserInstance();
        $this->docParser->parse( $this->getDocComment() );
    } 
```

试图弄清楚但无法理解它....以为有人可能遇到过同样的问题并且可能已经找到了一些解决方案...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T10:43:52.883

我遇到了同样的问题并分析它。

制作`protected $class`并替换所有 with 的实例和所有 with`protected $docParser`的实例都有效。`static protected``$this->class``static::$class``$this->docParser``static::$docParser`

# entity-framework - 每个层次结构和继承关系的表

> ID：14011055
> 
> 赞同：0
> 
> 时间：2012-12-23T12:45:14.867
> 
> 标签：entity-framework, navigation-properties, table-per-hierarchy

我正在使用面向 .Net 4.5 的 Entity Framework 5。对于我的一生，我无法弄清楚我做错了什么，导致在尝试使用 Table Per Hierarchy 和 Navigation 列时导致以下错误：

> 列名“Game_Category”无效。
> 列名“Game_Value”无效。
> 列名“Type_Category”无效。
> 列名“Type_Value”无效。

这是抽象基类（注意类别和值的复合 PK）：

```
[Table("Dictionary")]
public abstract class Lookup
{
  [Key, Column(Order = 0)]
  [StringLength(50)]
  public string Category { get; set; }

  [StringLength(100)]
  public string ExtendedValue { get; set; }

  [Required]
  public bool IsActive { get; set; }

  [Required]
  [StringLength(50)]
  public string Key { get; set; }

  [Key, Column(Order = 1)]
  public int Value { get; set; }
} 
```

后面是两个不添加额外列的子类......

```
public class Game : Lookup {}

public class SetType : Lookup {} 
```

这是具有 Game 和 SetType 的导航属性的类...

```
public class CardSet
{
  [Required]
  [StringLength(10)]
  public string Abbreviation { get; set; }

  public virtual Game Game { get; set; }

  [Required]
  public int GameId { get; set; }

  [Key]
  public int Id { get; set; }

  [Required]
  [StringLength(100)]
  public string Name { get; set; }

  [Required]
  public DateTime ReleaseDate { get; set; }

  public virtual Lookup Type { get; set; }

  [Required]
  public int TypeId { get; set; }
} 
```

从我的数据上下文...

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
  modelBuilder.Entity<Lookup>()
    .Map<Game>(l => l.Requires("LookupType").HasValue("Game"))
    .Map<SetType>(l => l.Requires("LookupType").HasValue("Set Type"));

  base.OnModelCreating(modelBuilder);
} 
```

查找表有一个名为 LookupType 的鉴别器列。我已经阅读了几个关于表/继承的教程。其他两个 - TPT 和 TPC 使用类似构建的对象是小菜一碟。虽然我理解上面的错误 - 它按照惯例正在寻找 FK 列，但我不明白我做错了什么或遗漏了什么导致它查找这些列。我尝试将 ForeignKey 属性放在 GameId 和 TypeId 属性上，但随后我收到有关依赖/主要关系约束的错误，并且我不确定如何将类别指定为附加外键。

我还没有找到一个关于表/继承的教程，在我使用它们时会遍历导航属性。任何帮助将不胜感激，这已经让我发疯了一个多小时。

**更新：**

我认为问题在于使用 Category 作为 key 的一部分。CardSet 没有用于该查找的“游戏”类别或用于该查找的“设置类型”类别的两个属性。我尝试创建这些属性，但没有奏效。是否可以使用 Fluent API 进行设置？到目前为止，我已经做了大约十几次尝试，但没有任何运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:39:06.787

我认为 EF 不“喜欢”`modelBuilder.Entity<Lookup>()`映射两个子类的构造。这应该有助于：

```
modelBuilder.Entity<Game>()
  .Map(l => l.Requires("LookupType").HasValue("Game"));
modelBuilder.Entity<SetType>()
  .Map(l => l.Requires("LookupType").HasValue("Set Type")); 
```

# php - 使用 fread 后如何删除文件中出现的 '\0' 字符？

> ID：14011056
> 
> 赞同：0
> 
> 时间：2012-12-23T12:45:17.557
> 
> 标签：php, video, fread

我有一个视频文件，我需要使用函数而不是直接链接来获取它。当我查看直接链接的视频页面代码时，这就是我在屏幕上看到的内容：

![在此处输入图像描述](../Images/8ed2708ceea3d52f7c66a9cfbdff5bc5.png)

但是当我使用我的功能时，首先视频不会运行，当我查看代码时，会出现：

![在此处输入图像描述](../Images/361a4716bd72a34d90c7ac232ac0a730.png)

我意识到它是同一个文件，相同的字符，但中间有许多 \0 字符。这些是黄色的。

这是我正在使用的代码：

```
$file_name = --path to file--;
$file_size = filesize($file_name);
$ctype = 'video/mp4';

header('Content-Type: '.$ctype);
header('Content-Length: ' . $file_size);
header("Accept-Ranges: bytes");    
header('Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0');
header('Pragma: no-cache');

$file = fopen($file_name, 'rb');
$read = fread($file, $file_size);
print($read);
fclose($file);
exit; 
```

我需要更改代码吗？有什么东西可以让 fread 正确读取文件吗？还是我需要对要显示的文件进行某种处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:00:12.897

尝试使用[`readfile()`](http://php.net/readfile)而不是`fopen()`/ `fread()`/ `fclose()`。它将提高内存效率并且不易出错。

话虽如此，您的代码不应该工作（假设文件路径正确）并没有真正的原因 - 您应该（一次）确保`display_errors`关闭，以防 PHP 错误损坏文件。您可以通过`ini_set('display_errors', 0);`在脚本顶部进行设置来做到这一点。

# seo - SEO动态站点地图

> ID：14011057
> 
> 赞同：3
> 
> 时间：2012-12-23T12:45:36.473
> 
> 标签：seo, sitemap

假设我们有 Twitter，并且每个个人资料都需要在搜索引擎中被索引，那么 Twitter 如何处理他们的站点地图？是否有类似“正则表达式”的域站点地图，或者他们是否为每个用户重新生成站点地图？

对于您不知道的页面，如此动态的页面，这是如何工作的？以维基百科为例，他们如何确保所有内容都被搜索引擎索引？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-23T12:54:37.820

最有可能的是，他们不会费心制作站点地图。

对于高度动态的站点，站点地图不会有太大帮助。谷歌只会索引一些数量，如果在谷歌考虑重新访问它之前一切都变了，你不会获得太多收益。

对于缓慢变化的站点，这是不同的。站点地图一方面告诉 Google，哪些站点存在但它可能还没有访问过，并且（更重要的是）哪些站点没有改变，因此不需要重新访问。

但是该`sitemap.xml`机制并不能扩展到像 twitter 这样的巨大且高度动态的网站。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-24T15:39:23.567

许多系统使用动态生成的站点地图。

[您可以通过网站管理员工具](https://www.google.com/webmasters/tools/home?hl=en)将任何站点地图上传到谷歌（该服务是免费的） - 优化 > 站点地图。它不必是 sitemap.xml；它也可以是 JSP 或 ASPX 页面。

网站管理员工具允许您为单个网站上传许多不同的站点地图。但是，我不确定站点地图的最大数量是多少。

一些爬虫支持一个`Sitemap`指令，允许多个站点地图在同一个`robots.txt`中，格式如下：

```
Sitemap: http://www.yoursite.com/profiles-sitemap.xml
Sitemap: http://www.yoursite.com/sitemap_index.xml 
```

**编辑**

[微软](http://www.microsoft.com)网站就是一个很好的例子：[robots.txt](http://www.microsoft.com/robots.txt)文件包含很多站点地图条目。例子：

```
Sitemap: http://www.microsoft.com/en-us/sqlazure/sitemap.xml
Sitemap: http://www.microsoft.com/en-us/cloud/sitemap.xml
Sitemap: http://www.microsoft.com/en-us/server-cloud/sitemap.xml
Sitemap: http://www.microsoft.com/france/sitemap_index.xml
Sitemap: http://www.microsoft.com/fr/ca/sitemap.xml
Sitemap: http://www.microsoft.com/germany/kleinunternehmen/gsitemap.aspx
Sitemap: http://www.microsoft.com/germany/newsroom/sitemap.xml 
```

如您所见，有些站点地图是静态的 (XML)，有些是动态的 (ASPX)。

# sencha-touch - 如何在实例化后向 Sencha Touch 代理类添加标头

> ID：14011058
> 
> 赞同：4
> 
> 时间：2012-12-23T12:45:52.423
> 
> 标签：sencha-touch, sencha-touch-2

我目前有一个自定义代理类，如下所示：

```
Ext.define('MyApp.proxy.SecureProxy', {
    alias: 'proxy.securerestproxy',
    extend: 'Ext.data.proxy.Rest',  

    constructor: function () {
        this.headers = {
           // "AUTH-TOKEN": MyApp.app.authToken
        }
        this.callParent(arguments);
    },

    config: {
        headers: {
            //"AUTH-TOKEN": MyApp.app.authToken
        }
    }       
}); 
```

问题是，我无法在配置或构造函数中设置我的标头值，因为这在此过程中还为时过早。此类在 MyApp.app.authToken 设置之前实例化，在 Authentication 发生之前。有什么方法可以将标头值设置为应用程序类中的身份验证令牌，无论是在身份验证发生后还是可以在休息代理的预请求事件中执行此操作？

问题出在 API 文档中，只有 1 个事件：异常。我认为我可以使用的代理上可能有一个 BeforeRequest 事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T15:49:57.860

在任何时候你都可以做

```
var headers = proxy.getHeaders() || {};
headers["AUTH-TOKEN"] = MyApp.app.authToken;
proxy.setHeaders(headers) 
```

编辑：也可以更改 Ext.Ajax 单例：

```
var defaultHeaders = Ext.Ajax.getDefaultHeaders() || {};

if (!defaultHeaders["AUTH-TOKEN"]) {
    defaultHeaders["AUTH-TOKEN"]  = MyApp.app.authToken;
    Ext.Ajax.setDefaultHeaders(defaultHeaders)
} 
```

# python - 激活 UART 的数据模式

> ID：14011061
> 
> 赞同：0
> 
> 时间：2012-12-23T12:46:25.597
> 
> 标签：python, c, avr

我正在使用带有 ATmega8 的 myAVR MK2 板。

在 Windows GUI 中有一个启用 UART 连接的选项。然后这些将被传递给控制器​​。

问题：如何在 linux 上启用此模式以使用 /dev/ttyUSB0 上的 UART 接口？

编辑 1：我更进一步，找到了一个 ASCII 字符串发送给程序员，以启用数据模式。我试图在 python 中实现它，但它不工作......和想法？

```
#!/usr/bin/python
import serial

s = serial.Serial(port='/dev/ttyUSB0', baudrate=19200)
s.write("\xE6\xB5\xBA\xB9\xB2\xB3\xA9d") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T22:02:35.427

您可能需要安装正确的驱动程序才能启用 UART over USB。子板上似乎有一个 CP2102 芯片。

[驱动链接](http://www.silabs.com/products/mcu/Pages/USBtoUARTBridgeVCPDrivers.aspx)

# linux - 通过 Bash/Shell 在 Crontab 中启用/禁用任务

> ID：14011065
> 
> 赞同：13
> 
> 时间：2012-12-23T12:47:24.557
> 
> 标签：linux, bash, shell, crontab

有没有办法使用 Bash/Shell 启用和禁用 Crontab 任务？

因此，当用户启动 Server 1 时，它将启用 Server 1 的 Crontab 行，依此类推。当用户停止服务器 1 时，服务器 1 的 Crontab 行将被禁用 (#)。这可能吗？如何？

提前致谢

```
*/1 * * * * Server 1 check
*/1 * * * * Server 2 check
*/1 * * * * Server 3 check 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-23T12:53:43.830

```
SERVERNUM=$1 
```

启用：

```
crontab -l | sed "/^#.*Server $SERVERNUM check/s/^#//" | crontab - 
```

要禁用：

```
crontab -l | sed "/^[^#].*Server $SERVERNUM check/s/^/#/" | crontab - 
```

成绩单：

```
barmar@dev$ crontab -l
*/1 * * * * Server 1 check
*/1 * * * * Server 2 check
*/1 * * * * Server 3 check
barmar@dev$ crontab -l | sed '/^[^#].*Server 1 check/s/^/#/' | crontab -
barmar@dev$ crontab -l
#*/1 * * * * Server 1 check
*/1 * * * * Server 2 check
*/1 * * * * Server 3 check
barmar@dev$ crontab -l | sed '/^#.*Server 1 check/s/^#//' | crontab -
barmar@dev$ crontab -l
*/1 * * * * Server 1 check
*/1 * * * * Server 2 check
*/1 * * * * Server 3 check 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T13:00:34.307

我建议您将您的 cron 作业添加到`/etc/cron.d`每个服务器的一个脚本中。如果应该执行 cron 作业，然后让 cron 脚本扫描一些标记文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-22T12:46:58.803

作为一个快速而肮脏的修复，您可以启用或禁用相应 cron 脚本的执行权限。

例如，如果您想阻止 locate 自动更新其数据库（这可能会消耗 I/O）：

```
cd /etc/cron.daily

sudo chmod a-x locate 
```

这可能违反了 cron 框架，但它可以快速应用，并且可以在紧急需要的情况下工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T13:22:35.983

这是一个变体，我使用一个每天晚上自行加载的 cronjob。我只是编辑一个文件，它会在每晚 10 点重新加载。您可以使重新加载更频繁地发生。我为每个节点保留一个文件目录。诀窍是确保没有人注释掉重新加载行。

```
0 22 * * * crontab /home/ME/cron_files/NODE 
```

# java - 通过工具阻止现场访问

> ID：14011073
> 
> 赞同：0
> 
> 时间：2012-12-23T12:49:13.197
> 
> 标签：java, php, http, authorization

我们正在运行文件镜像服务，想知道是否可以使用 jDownloader 或类似的下载工具阻止对我们网站的间接访问，要下载文件，用户必须通过浏览器访问，jDownloader 是伪造的用户代理，它也可以破坏 cookie 方法，因此无法通过这种方式阻止访问，请问有什么建议吗？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:02:27.133

我的建议是在网站上设置一个 cookie 并使用 .htaccess 检查该 cookie 以供下载。类似的东西：

```
RewriteCond [is download file]
RewriteCond %{HTTP_COOKIE} lang=([^;]+) [NC]
RewriteRule .* - [R=404] 
```

# java - Java中是否有弱/软双向映射？

> ID：14011082
> 
> 赞同：3
> 
> 时间：2012-12-23T12:50:09.263
> 
> 标签：java, data-structures, weak-references, bimap

我想要一个“符号字母表”有一个带有弱/软引用的双向映射。类似于 Apache 的 Common `BidiMap`（或 Guava 的`BiMap`），具有类似`WeakMap`的界面。

一个解决方案是使用`BiMap<WeakReference<K>,V>`和偶尔清理条目，但这不是最佳的。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T01:50:54.003

如果您准备构建自定义实现，几乎可以肯定正确的方法是构建您自己的自定义哈希表并维护一个`ReferenceQueue`用于跟踪删除的哈希表。

# vhdl - 如何有效地利用 VHDL 模块？

> ID：14011084
> 
> 赞同：2
> 
> 时间：2012-12-23T12:50:19.370
> 
> 标签：vhdl, fpga, hdl

**这里有几个问题，请耐心等待，感谢您抽出宝贵时间阅读本文...**

我最近编写了一个 SPI 主机，并对其进行了全面模拟以确保它按预期工作。从这里我想在另一个设计中使用它，我已经设置了一个 7 段显示组件来获取从 SPI 总线上的 ADC 接收到的值，但是我想我已经把自己搞糊涂了观点。

我需要向 SPI 主机发送一个带有其他参数的脉冲来启动传输，并等待一个忙信号被取消断言，然后我才能发送其他任何东西。**我不确定在新设计中实现 SPI 主控的最佳方式。**

*我会在设计中将其用作组件吗？有没有更好的办法？*

如果它必须是一个组件，*有什么方法可以将它设置为直接从该组件输出到引脚，而不是我必须映射到顶层设计中的新输入/输出？*

比如我有SCLK、MOSI、MISO、CS；*我可以不只是让它们直接输出而不必通过顶层映射吗？*似乎它会简化顶层并使其不那么笨重。

另外，*是否可以设置一个函数来只说“通过 SPI 发送此数据，然后返回收到的内容”？*

我仍在思考如何将这些东西放在一起，因此非常感谢帮助/示例。似乎所有可用的示例/教程都基于使用两个半加器、逻辑门等，只有在它们如此简单时才有帮助。

编辑：我的 SPI Master 的实体

```
entity SPI_master is

    generic(data_width: integer := 8;
            clock_select: integer := 0);

    port(SCLK: out std_logic; 
         MOSI: out std_logic;
         MISO: in std_logic;
         CS: out std_logic;

         Mclk_in: in std_logic;
         RST: in std_logic;
         CPOL: in std_logic;
         CPHA: in integer;
         send_packet: in std_logic;
         busy: out std_logic;

         Tx_data: in std_logic_vector(data_width-1 downto 0);
         Rx_data: out std_logic_vector(data_width-1 downto 0));

end SPI_master; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T15:16:06.093

您的实体看起来很合理，但更好的名称或对 CPOL、CPHA 的评论会很有用！

部分答案：

1）您可以在您的设计中将其用作组件，但如前所述，直接实体实例化更简单且不那么冗长。

2）不，您不能直接从层次结构的深处输出，即使可以，这也是一个糟糕的主意！

您熟悉 C++、Ada 或 Java 编程中的“设计模式”吗？如果是这样，请将您的顶层设计视为“外观”模式。

这是外部世界需要了解的关于您的设计的唯一信息。它通常会被编写为结构化 HDL，实例化您的其他实体，并在子单元之间建立互连并连接到外部端口。

有一些方法可以减少这些互连的痛苦，尤其是跨多个层次结构，但最终您必须将 SPI 信号分解到顶层设计的各个引脚，以便它们可以连接到 PCB 上的正确导线！

3）是否可以设置一个函数来只说“通过 SPI 发送此数据，然后返回接收到的内容”......不是一个函数，不。

但当然，您可以引入一个硬件包装器，为您的设计的其余部分提供一个复杂任务的简单视图。例如，（假设“send_packet”被断言在 SPI 上写入一个字节，并且“busy”变高直到写入完成）您可以创建一个实体，将字节数组和“start”信号作为输入。它的架构包含一个对字节进行计数的过程，依次将每个字节输出到 SPI 并在“忙”时等待，完成后它可以向其“调用者”发出信号。

# c++ - 将udp数据包发送到本地局域网很奇怪

> ID：14011088
> 
> 赞同：1
> 
> 时间：2012-12-23T12:51:18.690
> 
> 标签：c++, c, udp, visual-studio-2003, visual-c++

我正在使用 Visual Studio 2003 编写一个通过 UDP 套接字与本地 LAN 通信的简单程序。而且我试图不使用 MFC。以下是我用来测试 UDP 套接字的一小段代码：

```
static void sendMsg(char *buf, int len)
{
SOCKET sock;
struct sockaddr_in addr;

sock = socket(AF_INET, SOCK_DGRAM, 0);
if (sock < 0)
    return;

addr.sin_family = AF_INET;
    addr.sin_port = htons(PORT);
addr.sin_addr.s_addr = inet_addr("192.168.2.108"); // Specify dest IP

sendto(sock, buf, len, 0, (struct sockaddr*)&addr, sizeof(addr));

closesocket(sock);
} 
```

为了验证数据包是否发送出去，我使用了wireshark 来捕获数据包。

我的电脑的 IP 是 192.168.1.107。奇怪的是，如果dest IP是192.168.1.108这样的本地IP，我无法在wireshark中捕获数据包。但是，如果目标 IP 是 192.168.1.1（网关）或 192.168.1.255（广播）或 LAN ip 外部（如 192.168.2.108），我可以捕获 UDP 数据包。

谁能给我解释一下？我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T13:06:38.957

如果您将 UDP 数据包发送到您的机器不知道的 IP 地址，它将首先通过[ARP 协议](http://en.wikipedia.org/wiki/Address_Resolution_Protocol)询问机器的 MAC 地址。

如果它得到响应，它会将你的数据包发送到它接收到的 MAC 地址，如果它无法得到关于 MAC 地址的响应，则根本不会发送 UDP 数据包。

192.168.1.1 是现有的机器（默认路由器），局域网外的所有内容都将通过现有的默认路由器，因此您将看到传输的 UDP 数据包。如果您尝试发送到 LAN 上不存在的 IP，您将看不到任何发送的数据包，因为 ARP 在您的数据包传输之前就会失败。

# android - 在 onResume void 中更改变量

> ID：14011089
> 
> 赞同：0
> 
> 时间：2012-12-23T12:51:56.130
> 
> 标签：android, android-activity

好的，所以下面这段代码放在 OnResume 中，似乎会导致强制关闭。还有另一个活动（选项），它在数据库中设置所有变量，如主题。我想做的就是从数据库 onResume 中恢复主题和其他参数，因此使用 SetThemeLight 等公共空白更改颜色。我只是希望这件事能立即工作，并认为 onResume 是最好的方法。

```
int Theme = 1;
    Theme = prefs.getInt("theme", Theme);

    switch(Theme){
    case 1:
        SetThemeLight (this);
    break;
    case 2:
        SetThemeBlue (this);        
    break;
    case 3:
        SetThemeDark (this);
    break;
    } 
```

并以其中一种`SetTheme...`方法为例：

```
public void SetThemeLight (MyActivity myActivity) {
    final EditText edit_text = (EditText) findViewById(R.id.editText1);
    edit_text.setBackgroundColor(Color.GRAY);
} 
```

以下是如何访问选项：

```
 public boolean onKeyDown(int keyCode, KeyEvent event) {

    //options on 'menu' keypress.
    if (keyCode == KeyEvent.KEYCODE_MENU) {
        Intent opt = new Intent(this, OptionsActivity.class);
        startActivity (opt);
    };

    return true; 
```

调试信息如下：

```
12-23 15:37:59.960: E/AndroidRuntime(279): FATAL EXCEPTION: main
12-23 15:37:59.960: E/AndroidRuntime(279): java.lang.RuntimeException: Unable to resume activity {net.wswld.dtype.writer/net.wswld.dtype.writer.OptionsActivity}: java.lang.NullPointerException
12-23 15:37:59.960: E/AndroidRuntime(279):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3128)
12-23 15:37:59.960: E/AndroidRuntime(279):  at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:3143)
12-23 15:37:59.960: E/AndroidRuntime(279):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2684)
12-23 15:37:59.960: E/AndroidRuntime(279):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
12-23 15:37:59.960: E/AndroidRuntime(279):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
12-23 15:37:59.960: E/AndroidRuntime(279):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-23 15:37:59.960: E/AndroidRuntime(279):  at android.os.Looper.loop(Looper.java:123)
12-23 15:37:59.960: E/AndroidRuntime(279):  at android.app.ActivityThread.main(ActivityThread.java:4627)
12-23 15:37:59.960: E/AndroidRuntime(279):  at java.lang.reflect.Method.invokeNative(Native Method)
12-23 15:37:59.960: E/AndroidRuntime(279):  at java.lang.reflect.Method.invoke(Method.java:521)
12-23 15:37:59.960: E/AndroidRuntime(279):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-23 15:37:59.960: E/AndroidRuntime(279):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-23 15:37:59.960: E/AndroidRuntime(279):  at dalvik.system.NativeStart.main(Native Method)
12-23 15:37:59.960: E/AndroidRuntime(279): Caused by: java.lang.NullPointerException
12-23 15:37:59.960: E/AndroidRuntime(279):  at net.wswld.dtype.writer.DTypeActivity.onResume(DTypeActivity.java:109)
12-23 15:37:59.960: E/AndroidRuntime(279):  at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1149)
12-23 15:37:59.960: E/AndroidRuntime(279):  at android.app.Activity.performResume(Activity.java:3823)
12-23 15:37:59.960: E/AndroidRuntime(279):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3118) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:52:08.227

也许错误是您将最终变量发送到另一个方法。你为什么还要发送 EditText？确定只需要发送edit_text.getText() 的结果吗？您还应该使用这种安排而不是所有 if 的：

```
switch(Theme){
case 1:
//do something
break;
case 2:
//do something
break;
case 3:
//do something
break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T20:02:44.050

好的，我似乎找到了解决方法。

我所做的是创建一个简单的 boolean check in `MainActivity` `onResume`，检查 Options 是否确实发生了变化，然后它才执行该`switch`部分。

如果按下任何按钮，`OptionsActivity`它将向数据库提交`opt_changed`布尔值，然后在执行方法`onResume`之前检查它的值。`SetTheme...`

无论如何，感谢大家的回答和关注。我真的需要阅读 Android voids 及其行为。

# java - Java更改字符的最快方法

> ID：14011093
> 
> 赞同：-1
> 
> 时间：2012-12-23T12:53:31.553
> 
> 标签：java, android

```
 sLine = sLine.replaceAll("&&", "&"); 
      sLine = sLine.replaceAll(((char)245)+"", "ő");
      sLine = sLine.replaceAll(((char)213)+"", "Ő");
      sLine = sLine.replaceAll(((char)361)+"", "ű");
      sLine = sLine.replaceAll(((char)251)+"", "ű"); 
```

有没有办法做到这一点？这在大弦上非常慢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T12:56:25.497

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T13:22:48.123

您可以通过使用预编译的正则表达式来提高性能。无论如何，引擎盖`String.replaceAll`下都会为您编译和应用正则表达式。由于正则表达式的编译计算量*相对较大*，因此在频繁执行此代码时应该会提高性能。

```
private static final Pattern PATTERN_1 = Pattern.compile("\u00f5");
private static final Pattern PATTERN_2 = Pattern.compile(Character.toString((char) 241));

String original = new String("A" + (char) 245 + "\u00f1" + "D");
String replaced2 = PATTERN_1.matcher(original).replaceAll("B");
replaced2 = PATTERN_2.matcher(replaced2).replaceAll("C");
System.out.println(original + " -> " + replaced2); 
```

将打印出：

> A??D -> ABCD

当使用非常长的时间时，`String`这可能不会提供比您建议的性能更高的性能。

**顺便说一句：** 在代码中使用非 UTF-8 字符会给你（和你的同事）带来痛苦。您应该始终使用[Unicode 字符](http://oreilly.com/actionscript/excerpts/as3-cookbook/appendix.html)或字符十进制表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T14:25:17.393

```
private static final String char1       = Character.toString((char) 245);
private static final String char2       = Character.toString((char) 213);
private static final String char3       = Character.toString((char) 361);
private static final String char4       = Character.toString((char) 251);

private static final Pattern PATTERN_1  = Pattern.compile(char1);
private static final Pattern PATTERN_2  = Pattern.compile(char2);
private static final Pattern PATTERN_3  = Pattern.compile(char3);
private static final Pattern PATTERN_4  = Pattern.compile(char4);

public static String replaceAccents(String sLine) {

    String replaced=sLine;

    if (replaced.contains(char1)) replaced  = PATTERN_1.matcher(replaced).replaceAll("ő");
    if (replaced.contains(char2)) replaced  = PATTERN_2.matcher(replaced).replaceAll("Ő");      
    if (replaced.contains(char3)) replaced  = PATTERN_3.matcher(replaced).replaceAll("Ű");
    if (replaced.contains(char4)) replaced  = PATTERN_4.matcher(replaced).replaceAll("ű");      

    return replaced;
} 
```

感谢 Sean，这是最终的快速代码。

# jquery - jQuery Toggle 首次打开

> ID：14011096
> 
> 赞同：0
> 
> 时间：2012-12-23T12:53:56.357
> 
> 标签：jquery, toggle

我想通过向切换的容器添加一个额外的类来在页面加载时打开第一个切换。我该怎么做？

这是我的切换脚本：http: [//jsfiddle.net/gKAFT/](http://jsfiddle.net/gKAFT/)

```
$(".toggle-container").hide();
$(".trigger").toggle(function(){
    $(this).addClass("active");
    }, function () {
    $(this).removeClass("active");
});
$(".trigger").click(function(){
    $(this).next(".toggle-container").slideToggle();
}); 
```

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:59:06.727

您可以触发事件：

```
$(".trigger").click(function(){
    $(this).next(".toggle-container").slideToggle();
}).first().click(); 
```

[http://jsfiddle.net/sAxC7/](http://jsfiddle.net/sAxC7/)

请注意，该`toggle`方法已弃用，您可以`toggleClass`改用：

```
$(".trigger").click(function(){
    $(this).toggleClass('active').next(".toggle-container").slideToggle();
}).first().click(); 
```

[http://jsfiddle.net/B3Luc/](http://jsfiddle.net/B3Luc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T12:59:19.143

使用拳头选择器：

```
$(".trigger:first").next(".toggle-container").slideToggle(); 
```

提琴手：http: [//jsfiddle.net/cXhQN/](http://jsfiddle.net/cXhQN/)

但是，这对 SEO 不起作用，因为搜索引擎不执行 JavaScript。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T13:00:17.357

您可以使用此解决方案：

```
jQuery(document).ready(function($) {       

    $(".toggle-container").hide(); 
    $(".trigger").toggle(function(){
        $(this).addClass("active");
        }, function () {
        $(this).removeClass("active");
    });
    $(".trigger").click(function(){
        $(this).next(".toggle-container").slideToggle();
    });

    $('.toggle-container').first().show(); 
});
​ 
```

这是一个[小提琴](http://jsfiddle.net/gKAFT/2/)。不同的是最后一行`$('.toggle-container').first().show();`显示了第一个切换容器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T13:05:00.393

```
$(".trigger:first").trigger("click"); 
```

# servlets - 如何在java server faces项目中将base64保存为图像

> ID：14011103
> 
> 赞同：0
> 
> 时间：2012-12-23T12:54:42.737
> 
> 标签：servlets, jsf-2, nullpointerexception, servlet-3.0, facescontext

我正在为学校做一个项目。项目主题是 T 恤设计。我正在使用 jsf 和 primefaces。但是我不太了解jsf和primefaces。我想将 html 中的 base64 保存为 jsf 项目中的图像。但是当我尝试遵循函数时，NullPointerException。此函数在 Servlet 中调用。这个 Servlet 抓取了一个 base64。

```
public static void save(String dataURL){

line85: ExternalContext external = FacesContext.getCurrentInstance().getExternalContext();
    ServletContext servletContext = (ServletContext) external.getContext();
    String filename = servletContext.getRealPath("cloud.png");
    BASE64Decoder decoder = new BASE64Decoder();
    byte[] decodedBytes;
    try {

        decodedBytes = decoder.decodeBuffer(dataURL.split("data:image/(png|jpg);base64,")[1]);
        BufferedImage imag=ImageIO.read(new ByteArrayInputStream(decodedBytes));
        ImageIO.write(imag, "png", new File(filename));
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

    23.Ara.2012 17:48:20 org.apache.catalina.core.StandardWrapperValve invoke
     SEVERE: Servlet.service() for servlet [org.soft.tshirt.servlets.DesignServlet] in context              with path [/Tshirt] threw exception
    java.lang.NullPointerException
at org.soft.tshirt.beans.ImageBean.save(ImageBean.java:85)
at org.soft.tshirt.servlets.DesignServlet.processRequest(DesignServlet.java:102)
at org.soft.tshirt.servlets.DesignServlet.doPost(DesignServlet.java:76)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at       
   org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T14:08:36.183

的当前实例`FacesContext`仅在 HTTP 请求线程中可用，该线程由`FacesServlet`负责创建`FacesContext`. 换句话说，只有当请求 URL 与`FacesServlet`. 换句话说，只有 JSF 页面、JSF 托管 bean（因此*不会*像这里发生的那样支持您自己实例化的 bean！）和所有其他 JSF 工件（如事件/阶段侦听器、UI 组件等）具有`FacesContext`可用的当前实例给他们。

在任意的本地 HTTP servlet 中，`FacesContext`根本不可用，原因很简单，即`FacesServlet`没有事先调用。所以它上面的`getCurrentInstance()`方法会返回`null`。您知道，尝试访问/调用任何字段/方法`null`将导致`NullPointerException`. [另请参阅它的 javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/NullPointerException.html)。

为了实现获取 的唯一目标，只需调用servlet 内部的`ServletContext`继承方法即可。[`GenericServlet#getServletContext()`](http://docs.oracle.com/javaee/6/api/javax/servlet/GenericServlet.html#getServletContext%28%29)

```
protected void doPost(...) {
    String filename = getServletContext().getRealPath("cloud.png");
    // ...
} 
```

而是将该信息传递给负责创建文件的方法。您可能希望将该代码提取到不同的类中，该类在您的 servlet 和支持 bean 之间重用。

* * *

**与具体问题无关**，将文件写入扩展的 WAR 文件夹确实是一种不好的做法，原因在此答案中提到：[Uploaded image only available after refresh the page](https://stackoverflow.com/questions/8885201/uploaded-image-only-available-after-refreshing-the-page/8889096#8889096)。

# javascript - 在 Ajax 启动停止事件时禁用和启用提交的响应方法

> ID：14011108
> 
> 赞同：0
> 
> 时间：2012-12-23T12:55:12.650
> 
> 标签：javascript, jquery, css

我尝试了以下方法：

1) 显示/隐藏

```
$('button').ajaxStart(function() {
 $(this).hide();
});
$('button').ajaxStop(function() {
 $(this).show();
}); 
```

2) 可见/隐藏

```
$('button').ajaxStart(function() {
 $(this).css({visibility, 'hidden'});
});
$('button').ajaxStop(function() {
 $(this).css({visibility, 'visible'});
}); 
```

3）添加/删除类

```
$('button').ajaxStart(function() {
 $(this).addClass('invisible');
});
$('button').ajaxStop(function() {
 $(this).removeClass('invisible');
}); 
```

4) 启用/禁用

```
$('button').ajaxStart(function() {
 $(this).attr('disabled','disabled')
});
$('button').ajaxStop(function() {
 $(this).removeAttr('disabled');
}); 
```

到目前为止，只有 Show/Hide 方法的响应速度足够快，可以在 1 秒内执行。剩下的时间在 1-2 秒之间，这明显很长。但是，我希望通过一些明显的 CSS 更改来显示但禁用该按钮。是否有更灵敏的方式来临时启用和禁用提交按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:11:14.507

试试这个：

```
$("button").click(function() {

    // disable the submit button before the ajax call...
    $(this).attr('disabled','disabled');
    $.ajax({
        url: 'yoururl.html',
        data: {},
        type: 'post',
        success: function(response){
            // enable the submit button after ajax call success...
            $(this).removeAttr('disabled');
        },
        error: function(){
            // error process here
            $(this).removeAttr('disabled');
        },
        dataType: 'json'
    });
}); 
```

# avaudioplayer - AVAudioPlayer don't work in AVAudioSessionCategoryAmbient mode in iOS 6.0.1?

> ID：14011118
> 
> 赞同：0
> 
> 时间：2012-12-23T12:56:26.877
> 
> 标签：avaudioplayer, mpmusicplayercontroller

In my app, I use a MPMusicPlayerController play .mp3 as background music, and an AVAudioPlayer play sound-effect, just like button press, and so on. The code is like this:

```
// Initialization code here.
AudioSessionInitialize(NULL, NULL, NULL, NULL);
AVAudioSession *session =[AVAudioSession sharedInstance];
//The background music and the sound-effect can play simultaneously
[session setCategory: AVAudioSessionCategoryAmbient error:nil];
[session setActive: YES error: nil];

m_sharedPlayer = [[MPMusicPlayerController applicationMusicPlayer] retain];            
[m_sharedPlayer setShuffleMode: MPMusicShuffleModeSongs];
[m_sharedPlayer setRepeatMode: MPMusicRepeatModeAll];
[m_sharedPlayer setVolume:0.2];
// choose the first song
[m_sharedPlayer setQueueWithQuery: [MPMediaQuery songsQuery]];
[m_sharedPlayer play];
...
//when need play sound-effect, soundfilename is a NSString
NSData *data =[NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:soundfilename ofType:nil]];
AVAudioPlayer *audioplayer = [[AVAudioPlayer alloc] initWithData:data error:nil];
audioplayer =1.0;
audioplayer.delegate =self;
[audioplayer prepareToPlay];
[audioplayer play];
... 
```

audioplayer is release after it has finished play.

The code is work in iOS 5.0\. But in iOS 6.0, everything changed. AVAudioPlayer don't play sound anyway.

If I change this line: [session setCategory: **AVAudioSessionCategoryAmbient** error:nil]; To: [session setCategory: **AVAudioSessionCategoryPlayback** error: nil];

The AVAudioPlayer will play sound, but it will break the play session of MPMusicPlayerController... How can I find a way to play AVAudioPlayer but without break the background music? Thanks a lot for your help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T23:02:41.720

好的。我终于找到了解决方案。在 iOS 6.0 中，苹果提供了一个新的函数调用 setCategory:withOptions:。这行得通。所以代码是这样的：

```
 AVAudioSession *session =[AVAudioSession sharedInstance];
    float version = [[[UIDevice currentDevice] systemVersion] floatValue];
    if (version <6.0) {
        [session setCategory:AVAudioSessionCategoryAmbient error:nil];
    }
    else {
        [session setCategory: AVAudioSessionCategoryPlayback withOptions:AVAudioSessionCategoryOptionMixWithOthers error: nil];
    } 
```

谢谢。

# objective-c - 为什么 method_getNumberOfArguments 返回的结果比选择器所暗示的多两个结果？

> ID：14011119
> 
> 赞同：1
> 
> 时间：2012-12-23T12:56:33.650
> 
> 标签：objective-c, objective-c-runtime

在 Objective-C 运行时，为什么 method_getNumberOfArguments 返回的结果比选择器暗示的多两个结果？

例如，为什么@selector(initWithPrice:color:) 返回 4？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T13:40:40.127

# TL;博士

好的。只是为了澄清事实，是的，任何objective-c方法的前两个参数都是`self`and `_cmd`，总是按照这个顺序。

# Objective-C 的简史

然而，更有趣的主题是*为什么*会出现这种情况。为此，我们必须先回顾一下 objc 的历史。事不宜迟，让我们开始吧。

早在 1983 年，objective-c 的“上帝”Brad Cox 想要在 C*之上*创建一种面向对象的基于运行时的语言，以实现跨平台的良好性能和灵活性。结果，最初的 Objective-C“编译器”只是将 Objective-C 源代码转换为 C 运行时等效项的简单预处理器，然后使用特定于平台的 C 编译器工具进行编译。

然而，C 并不是为对象而设计的，这是 Objective-C 必须克服的最基本的东西。虽然 C 是一种健壮且灵活的语言，但运行时支持是它的关键缺陷之一。

在 Objective-C 的早期设计阶段，决定对象将是一个纯粹的基于堆的指针设计，这样它们就可以在任何函数之间传递而没有奇怪的复制语义等（这在 Obj-C++ 中有所改变和 ARC，但这对于这篇文章来说范围太广了），并且~~每个方法都应该是自我意识~~的（实际上，正如 bbum 所指出的，这是使用与原始函数调用相同的堆栈帧的优化），所以理论上，您可以将多个方法名称映射到同一个选择器，如下所示：

```
// this is a completely valid objc 1.0 method declaration
void *nameOrAge(id self, SEL _cmd) {
    if (_cmd == @selector(name)) {
        return "Richard";
    } 
    if (_cmd == @selector(age)) {
        return (void *) (intptr_t) 16;
    }

    return NULL;
} 
```

那么这个函数理论上可以映射到两个选择器，`name`和`age`，并根据调用哪个选择器执行条件代码。在一般的 Objective-C 代码中，这并不是什么大不了的事，因为现在 ARC 很难将函数映射到选择器，由于强制转换等，但是从那时起语言已经发展了很多。

希望这可以帮助您理解Objective-C 方法的两个“不可见”参数背后的*原因*，第一个是被调用的对象，第二个是在该对象上调用的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T12:57:48.593

前两个参数是隐藏参数 self 和 _cmd。

# php - 从服务器发布到我的页面墙，不代表我进行任何交互

> ID：14011120
> 
> 赞同：0
> 
> 时间：2012-12-23T12:56:47.070
> 
> 标签：php, facebook

我花了很多时间在 SO 和其他网站上研究答案但无济于事，所以是时候自己问了。

我想发布到我是所有者的页面，而不在浏览器中进行任何身份验证 - 我希望我的服务器自动登录，获取所有必需的访问令牌，获取权限并发布到墙上。没有弹出窗口，没有重定向，它应该能够在没有监督的情况下完成，例如作为运行数月的 CRON 作业。

这甚至有可能做到这一点吗？我可以将我的用户凭据存储在服务器上，这对我来说不是问题。我设法找到的最好的是 60 天访问令牌，但它远非完美。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T14:51:51.330

您可以通过 cron 作业执行此操作，您只需要经过验证的访问令牌即可离线工作。

要获取访问令牌，请通过以下讨论：[验证访问令牌时出错](http://facebook.stackoverflow.com/questions/14007430/error-validating-access-token-session-has-expired-at-unix-time/14010052#14010052)

# ruby-on-rails - 如何优雅地处理 NilClass

> ID：14011121
> 
> 赞同：1
> 
> 时间：2012-12-23T12:56:54.047
> 
> 标签：ruby-on-rails, ruby, sinatra

我试图避免由于 NilClass 导致的 NoMethod 错误。我的代码如下所示：

```
@branded, @nonbranded, @unknown, @affiliate, @social, @referral, @paid, @direct, @email = [], [], [], [], [], [], [], [], []

count = 0
while count < 6
    date = SDLW + count
    #TODO There has to be a better way than this.
    branded_check = Metric.first(start_date: date, end_date: date, source: 'branded')
    nonbranded_check = Metric.first(start_date: date, end_date: date, source: 'nonbranded')
    unknown_check = Metric.first(start_date: date, end_date: date, source: 'unknown')
    affiliate_check = Metric.first(start_date: date, end_date: date, source: 'affiliate')
    social_check = Metric.first(start_date: date, end_date: date, source: 'social')
    referral_check = Metric.first(start_date: date, end_date: date, source: 'referral')
    paid_check = Metric.first(start_date: date, end_date: date, source: 'paid')
    direct_check = Metric.first(start_date: date, end_date: date, source: 'direct')
    email_check = Metric.first(start_date: date, end_date: date, source: 'email')

    branded_check = branded_check.nil? ? 0 : branded_check.visits
    nonbranded_check = nonbranded_check.nil? ? 0 : nonbranded_check.visits
    unknown_check = unknown_check.nil? ? 0 : unknown_check.visits
    affiliate_check = affiliate_check.nil? ? 0 : affiliate_check.visits
    social_check = social_check.nil? ? 0 : social_check.visits
    referral_check = referral_check.nil? ? 0 : referral_check.visits
    paid_check = paid_check.nil? ? 0 : paid_check.visits
    direct_check = direct_check.nil? ? 0 : direct_check.visits
    email_check = email_check.nil? ? 0 : email_check.visits

    @branded        << branded_check
    @nonbranded << nonbranded_check
    @unknown        << unknown_check
    @affiliate  << affiliate_check
    @social         << social_check
    @referral   << referral_check
    @paid           << paid_check
    @direct         << direct_check
    @email          << email_check

    count += 1
end 
```

我相信必须有一种更清洁、更简洁的方法来做到这一点。尽管谷歌搜索和阅读，我还是无法弄清楚。任何关于如何重构的想法都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T13:06:36.343

当然，创造一种方法来避免重复自己

```
def visits(tag, date)
  check = Metric.first(start_date: date, end_date: date, source: tag)    
  check.present? ? check.visits : 0   # or 'check.nil? ? 0 : check.visits' if you prefer
end 
```

在你的方法中

```
count = 0
while count < 6
  date = SDLW + count

  @branded << visits('branded', date)
  @nonbranded << visits('nonbranded', date)
  ...

  count += 1
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T13:08:35.570

让我们将调用`Metric.first`放在一个块中并使用[`instance_variable_set`](http://apidock.com/ruby/Object/instance_variable_set).

```
['branded', 'nonbranded', ...].each do |source|
  visits = 0.upto(5).map do |count|
    date = SDLW + count
    metric = Metric.first(start_date: date, end_date: date, source: source)
    if metric.nil? then 0 else metric.visits end
  end
  instance_variable_set "@#{source}".to_sym, visits
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T16:36:42.130

除了其他解决方案之外，while 循环可能可以替换为：

```
(SDLW...SDLW+6).each do |date|
  # date = SDLW + count #This line is superfluous
  @branded << visits('branded', date)
  #or one of the other solutions
  #etc
  # count += 1 # remove this line
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T13:09:28.043

例如，我只为一个来源制作。

```
@branded, @nonbranded, @unknown, @affiliate, @social, @referral, @paid, @direct, @email = [], [], [], [], [], [], [], [], []

class Metric < ActiveRecord::Base
  scope :dates, lambda { |start_date, end_date| where(:start_date => start_date, :end_date => end_date) }
  scope :branded, lambda { where(:source => "branded") }
  # ... other scopes
end

# ...

6.times do |count|
  date = SDLW + count
  by_date = Metric.dates(date, date)
  @branded << by_date.branded.try(:visits).to_i
  # ... other sources
end 
```

**更新**`instance_variable_set`：使用Jan[解决方案](https://stackoverflow.com/a/14011213/167820)和 Dave Newton 请求中的想法重构解决方案。

```
6.times do |count|
  date = SDLW + count
  [:branded, :nonbranded, :unknown, :affiliate, :social, :referral, :paid, :direct, :email].each do |source|
    instance_variable_set :"@#{source}", [] unless instance_variable_get :"@#{source}"
    visits = Metric.first(start_date: date, end_date: date, source: source).try(:visits).to_i
    instance_variable_set :"@#{source}", instance_variable_get(:"@#{source}").push(visits)
  end
end 
```

# javascript - 使用 CSS (Crocodoc) 更改 DOM 元素顺序

> ID：14011125
> 
> 赞同：1
> 
> 时间：2012-12-23T12:57:08.963
> 
> 标签：javascript, css, iframe, cross-domain, crocodoc

是否可以使用 CSS 更改 DOM 元素顺序？我有一个 iframe，我想将工具栏从iframe 的主要内容的**上方**更改为**下方。**

所以从这里：

```
<iframe>
<html>
  <body>
    <div id='toolbar'></div>
    <div id='main_content'></div>
    <div id='other_stuff'></div>
  </body>
</html>
</iframe> 
```

对此：

```
<iframe>
<html>
  <body>
    <div id='main_content'></div>
    <div id='toolbar'></div>
    <div id='other_stuff'></div>
  </body>
</html>
</iframe> 
```

如果使用 CSS 无法做到这一点，有人可以建议如何在 Javascript 中执行此操作吗？操纵 iframe 内容总是让我感到困惑 *^%$。作为一个实际应用程序，我实际上指的[是使用 Crocodoc (https://crocodoc.com/docs/walkthrough/skinning/) 生成的 iframe，](https://crocodoc.com/docs/walkthrough/skinning/)所以我的目的是让这个问题和答案对使用此服务的人有价值也。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-08-23T14:12:44.663

我参加聚会已经很晚了，但我只想让你们知道，您实际上可以仅使用 CSS 更改 DOM 顺序。

尽管要做到这一点，我们必须使用 CSS3 flexbox 语法。所以基本上 IE10+，在我的情况下通常不是问题，因为我用它来操作移动网站。

那么我们该怎么做呢？父元素需要成为一个 flexbox 元素。例如：

（此处仅使用 webkit 供应商前缀。没有它的 css 令人眼花缭乱）

```
#main {
    display: -webkit-box;
    display: -webkit-flex;
    display: flex;
    -webkit-box-orient: vertical;
    -webkit-flex-direction: column;
    flex-direction: column;
    -webkit-box-align: start;
    -webkit-align-items: flex-start;
    align-items: flex-start;
} 
```

然后，通过以下方式指示它们的顺序来交换 div：

```
#main > div#one{
    -webkit-box-ordinal-group: 2;
    -moz-box-ordinal-group: 2;
    -ms-flex-order: 2;
    -webkit-order: 2;
    order: 2;
    overflow:visible;
}

#main > div#two{
    -webkit-box-ordinal-group: 1;
    -moz-box-ordinal-group: 1;
    -ms-flex-order: 1;
    -webkit-order: 1;
    order: 1;
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T12:59:39.003

您不能使用 css 更改 DOM 顺序。但是，您可以根据需要应用`position: absolute;`css 样式并通过设置顶部、底部、左侧、右侧样式来定位元素。

在您的情况下，最好将`position: fixed; bottom: 0;`工具栏放置在浏览器窗口的底部。

# smarty - 在 Smarty 中从字符串的空格前打印

> ID：14011130
> 
> 赞同：1
> 
> 时间：2012-12-23T12:57:53.927
> 
> 标签：smarty

我在 smarty 模板（**{$date[s].d}**）中有一个日期字符串，其中包括这样的日期和时间：

> > 2012 年 12 月 23 日上午 9:00:00

我想删除空间后的所有内容，所以它会是这样的

> > 2012 年 12 月 23 日

我可以在 php 中完成，但我需要在 smarty 模板中完成，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:23:58.247

好吧，作为我自己问题的答案，我设法使用 |truncate，计算 11 个字符并删除剩余的

```
{$date[s].d|truncate:11:"":true} 
```

这将打印以下内容

```
 Dec-23-2012 
```

如果有人有更好的主意，我会很高兴听到

# iphone - 上传媒体

> ID：14011135
> 
> 赞同：-1
> 
> 时间：2012-12-23T12:58:24.510
> 
> 标签：iphone, objective-c

我正在构建客户端/服务器应用程序。但是我不知道做以下事情：我已经通过IPhone和NSConnection实现了注册，但也想上传图片和视频。我想知道允许从 iPhone 获取媒体（如路径或 smth）的控件，以及我应该将哪些设置添加到我的 NSConnection 以启用媒体上传。另外我认为应该在 PHP 脚本中添加一些内容以启用上传媒体文件。

非常感谢您提供的任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:13:34.690

```
NSData* resourceToUpload = ... // setting data to upload
NSMutableURLRequest* request = ... // HTTP method is POST
[request setValue:@"application/octet-stream" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:resourceToUpload];
// sending request 
```

我的建议也是使用一些网络框架，例如 AFNetworking。

# php - 如何使用 Kunststube-CSRFP？

> ID：14011140
> 
> 赞同：0
> 
> 时间：2012-12-23T12:59:06.710
> 
> 标签：php

我把[Kunststube-CSRFP](https://github.com/deceze/Kunststube-CSRFP) demo.php 放在我的服务器上：`http://domain1.com/demo.php`然后点击“TRY IT”按钮，它说：**表单提交正常。**

然后我查看源代码并将脚本生成的令牌复制到另一台服务器（domain2.com）并尝试在那里制作假 HTML 表单：

```
<form action="http://domain1.com/demo.php" method="POST">
<input type="hidden" value="1356266422:QaAnM2IolCk9K1Mme3rOGifwmfmdldzdyg/PBu4ht818lIu52ArKFG2HxUOztmcgwblLcIgymaNheuGY7g6Kg==:nvhnqxfM9upP/UT+FRGf0nXDILFPHaubfdjahVYSm2w9fFHKQ/bQQ6rapjdKN8ype9qaX8TkAZJpxg9RmH8ZM9YWA==" name="_token">
<input type="submit" value="Submit">
</form> 
```

当我从 domain2.php 中点击“提交”按钮时......令人惊讶的是，第一台服务器 (domain1.com) 上的 demo.php 就像从其自身一样处理令牌并显示相同的字符串：**表单提交正常。**

不应该是“**令牌无效。** ”如果不是从同一台服务器提交，就出来？我哪里做错了？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:06:22.690

> 不应该是“令牌无效”。如果不是从同一台服务器提交，就出来？

不。

令牌的目的是防止 Mallory（控制恶意服务器）使 Alice 的 Web 浏览器向 Bob 的 Web 服务器提交不良数据。

在这种情况下，Alice 控制请求来自的服务器。Alice 是受信任的并且可以访问令牌。

爱丽丝可以提出她喜欢的任何要求。

> 然后我看源码

马洛里做不到。她无法获得令牌，因此她无法欺骗 Alice 没有提出 Mallory 想要提出的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T15:03:04.790

CSRF 是从第三方服务器向您的服务器提交表单数据，利用一个毫无戒心的用户登录到您的服务器的事实，并迫使他在用户无意的情况下在您的服务器上执行某些操作。

CSRF 令牌通过要求每个表单提交一个有效令牌来防止这种情况。没有用户的积极参与，第三方无法获得这些代币。因此，第三方可以从他们的站点向您的站点“伪造”表单提交，但他们不会拥有有效的 CSRF 令牌，这有助于您将此类虚假请求与真实请求区分开来。第三方无法获得此类令牌，​​因为浏览器中的 Javascript 跨站点脚本规则阻止浏览器从第三方站点获取数据（尽管它们不会阻止向第三方站点*提交数据）。*

这也是为什么您应该将令牌与用户 ID 绑定的原因。第三方可能能够从您的服务器获取*有效*令牌并将其包含在“假”表单中，但他们不应该能够获取*用户特定*的令牌。

如果你明确地给第三方令牌，你就是在颠覆你自己的 CSRF 保护。

# java - 无效的初始堆大小：-Xms128M -Xmx512M -Xss1024K -Dlog4j.debug ...？

> ID：14011142
> 
> 赞同：3
> 
> 时间：2012-12-23T12:59:24.573
> 
> 标签：java, windows, 32bit-64bit, windbg

我的设置：

*   Windows 64 位
*   Java 应用程序加载 32 位原生模块
*   可以使用 32 位 Java (jdk1.6.0_29) 和以下命令行在调试器外正常运行 - “-Xms128M -Xmx512M -Xss1024K -Dlog4j.debug ...”（为简洁起见）

如果我想调试本机模块，问题就开始了。因此，我使用以下 powershell 命令行启动了我的 windbg 64 位：

```
windbg -logo c:\dumps\dbg.log -QY -awow64exts -c "!sw;bu $entry;g;g" "$env:JAVA_HOME\bin\java.exe" $Params 
```

`$Params`用于在调试器之外运行它的完全相同的参数在哪里。

调试器启动，但会话非常短：

```
Microsoft (R) Windows Debugger Version 6.12.0002.633 AMD64
Copyright (c) Microsoft Corporation. All rights reserved.

CommandLine: "c:\Program Files (x86)\Java\jdk1.6.0_29\bin\java.exe" "-Xms128M -Xmx512M -Xss1024K -Dlog4j.debug -Dlog4j.configuration=file:../conf/log4j.xml -Ddozer.configuration=file:../conf/config.properties -jar bootstrapper.jar com.shunra.bootstrapper.guice.Bootstrapper"
Symbol search path is: C:\dev\shunra\DriverProxy\CloudAPI\CLOUDAPI\Profile\Stratus;C:\dev\shunra\DriverProxy\LocalDriverProxy\Profile;C:\dev\shunra\SharedModules\cJSON\lib\win32\Profile;C:\dev\shunra\SharedModules\curl\lib\win32\Profile;C:\dev\shunra\SharedModules\DataStruct\lib\win32\profile;C:\dev\shunra\SharedModules\GraphSetup\lib\win32\profile;C:\dev\shunra\SharedModules\multikey_lookup\lib\win32\profile;C:\dev\shunra\SharedModules\ShunraAPICommon\lib\win32\Profile;C:\dev\shunra\SharedModules\ShunraAPIEmulation\lib\win32\Profile;C:\dev\shunra\SharedModules\ShunraAPIParsers\lib\win32\Profile;C:\dev\shunra\SharedModules\ShunraAPIRest\lib\win32\Profile;C:\dev\shunra\SharedModules\ShunraUtils\lib\win32\profile;C:\dev\shunra\SharedModules\ShunraXercesUtils\lib\win32\profile;C:\dev\shunra\SharedModules\SNetXMLBuilder\lib\win32\profile;C:\dev\shunra\SharedModules\StormEngine\lib\win32\profile;C:\dev\shunra\SharedModules\xerces-c-2.80\Build\Win32\VC10\Profile;C:\dev\shunra\SharedModules\XMLControl\lib\win32\profile;srv*Z:\Symbols*http://msdl.microsoft.com/download/symbols
Executable search path is: 
ModLoad: 00000000`00400000 00000000`00424000   java.exe
ModLoad: 00000000`77540000 00000000`776e9000   ntdll.dll
ModLoad: 00000000`77720000 00000000`778a0000   ntdll32.dll
ModLoad: 00000000`74da0000 00000000`74ddf000   C:\Windows\SYSTEM32\wow64.dll
ModLoad: 00000000`74d40000 00000000`74d9c000   C:\Windows\SYSTEM32\wow64win.dll
ModLoad: 00000000`74d30000 00000000`74d38000   C:\Windows\SYSTEM32\wow64cpu.dll
(684.e30): Break instruction exception - code 80000003 (first chance)
Processing initial command '!sw;bu LocalDriverProxy!Java_com_shunra_vcat_core_emulation_LocalDriverProxy_StartEmulation;g;g'
ntdll!LdrpDoDebuggerBreak+0x30:
00000000`775ecb60 cc              int     3
0:000> !sw;bu LocalDriverProxy!Java_com_shunra_vcat_core_emulation_LocalDriverProxy_StartEmulation;g;g
Switched to 32bit mode
ModLoad: 76e60000 76f7f000   WOW64_IMAGE_SECTION
ModLoad: 00000000`75300000 00000000`75410000   WOW64_IMAGE_SECTION
ModLoad: 00000000`76e60000 00000000`76f7f000   NOT_AN_IMAGE
ModLoad: 00000000`77190000 00000000`7728a000   NOT_AN_IMAGE
ModLoad: 00000000`75300000 00000000`75410000   C:\Windows\syswow64\kernel32.dll
ModLoad: 00000000`752b0000 00000000`752f7000   C:\Windows\syswow64\KERNELBASE.dll
ModLoad: 00000000`769a0000 00000000`76a40000   C:\Windows\syswow64\ADVAPI32.dll
ModLoad: 00000000`76710000 00000000`767bc000   C:\Windows\syswow64\msvcrt.dll
ModLoad: 00000000`76390000 00000000`763a9000   C:\Windows\SysWOW64\sechost.dll
ModLoad: 00000000`75410000 00000000`75500000   C:\Windows\syswow64\RPCRT4.dll
ModLoad: 00000000`74e00000 00000000`74e60000   C:\Windows\syswow64\SspiCli.dll
ModLoad: 00000000`74df0000 00000000`74dfc000   C:\Windows\syswow64\CRYPTBASE.dll
(684.e30): WOW64 breakpoint - code 4000001f (first chance)
First chance exceptions are reported before any exception handling.
This exception may be expected and handled.
ModLoad: 74860000 748ac000   C:\Windows\SysWOW64\apphelp.dll
ModLoad: 00000000`7c340000 00000000`7c396000   c:\Program Files (x86)\Java\jdk1.6.0_29\jre\bin\msvcr71.dll
ModLoad: 00000000`6d8a0000 00000000`6db4f000   c:\Program Files (x86)\Java\jdk1.6.0_29\jre\bin\client\jvm.dll
ModLoad: 00000000`76610000 00000000`76710000   C:\Windows\syswow64\USER32.dll
ModLoad: 00000000`76c20000 00000000`76cb0000   C:\Windows\syswow64\GDI32.dll
ModLoad: 00000000`74ee0000 00000000`74eea000   C:\Windows\syswow64\LPK.dll
ModLoad: 00000000`76190000 00000000`7622d000   C:\Windows\syswow64\USP10.dll
ModLoad: 00000000`747e0000 00000000`74812000   C:\Windows\SysWOW64\WINMM.dll
ModLoad: 00000000`76af0000 00000000`76b50000   C:\Windows\SysWOW64\IMM32.DLL
ModLoad: 00000000`76b50000 00000000`76c1c000   C:\Windows\syswow64\MSCTF.dll
ModLoad: 00000000`74860000 00000000`748ac000   C:\Windows\SysWOW64\apphelp.dll
ModLoad: 00000000`6d850000 00000000`6d85c000   c:\Program Files (x86)\Java\jdk1.6.0_29\jre\bin\verify.dll
ModLoad: 00000000`6d3d0000 00000000`6d3ef000   c:\Program Files (x86)\Java\jdk1.6.0_29\jre\bin\java.dll
ntdll!NtTerminateProcess+0xa:
00000000`775915da c3              ret 
```

菲尼托！Java 终止在控制台窗口中打印此短消息：

```
Invalid initial heap size: -Xms128M -Xmx512M -Xss1024K -Dlog4j.debug -Dlog4j.configuration=file:../conf/log4j.xml -Ddozer.configuration=file
:../conf/config.properties -jar bootstrapper.jar com.shunra.bootstrapper.guice.Bootstrapper
Could not create the Java virtual machine. 
```

任何人都可以对此有所了解吗？

**编辑**

在下面的一些评论之后，我倾向于认为我的 powershell 脚本有问题。

事实上，正如 Jon Skeet 所建议的那样，我尝试使用相同的 -XYZ 参数从调试器中运行 HelloWorld Java 应用程序，并且它有效。然后是 Codo 的评论，这让我觉得我的 powershell 代码有问题。

这里是：

```
$env:JAVA_HOME='c:\Program Files (x86)\Java\jdk1.6.0_29'
$Params="-Xms128M -Xmx512M -Xss1024K -Dlog4j.debug -Dlog4j.configuration=file:../conf/log4j.xml -Ddozer.configuration=file:../conf/config.properties -jar bootstrapper.jar com.shunra.bootstrapper.guice.Bootstrapper"
windbg -logo c:\dumps\dbg.log -QY -awow64exts -c "!sw;g;g" "$env:JAVA_HOME\bin\java.exe" $Params 
```

`$Params`似乎作为单个字符串传递给java进程。好的，所以我扩展它：

```
windbg -logo c:\dumps\dbg.log -QY -awow64exts -c "!sw;g;g" "$env:JAVA_HOME\bin\java.exe" -Xms128M -Xmx512M -Xss1024K -Dlog4j.debug -Dlog4j.configuration=file:../conf/log4j.xml -Ddozer.configuration=file:../conf/config.properties -jar bootstrapper.jar com.shunra.bootstrapper.guice.Bootstrapper 
```

现在我得到一个由 java 打印出的不同的致命错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: /debug
Caused by: java.lang.ClassNotFoundException: .debug
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: .debug.  Program will exit. 
```

它想从我的生活中得到什么？

**编辑2**

根据 Codo 的建议更改了命令行：

```
windbg -logo c:\dumps\dbg.log -QY -awow64exts -c "!sw;g;g" "$env:JAVA_HOME\bin\java.exe" -Xms128M -Xmx512M -Xss1024K -Dlog4j.debug=true -Dlog4j.configuration=file:../conf/log4j.xml -Ddozer.configuration=file:../conf/config.properties -jar bootstrapper.jar com.shunra.bootstrapper.guice.Bootstrapper 
```

现在错误是：

```
Exception in thread "main" java.lang.NoClassDefFoundError: /debug=true
Caused by: java.lang.ClassNotFoundException: .debug=true
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: .debug=true.  Program will exit. 
```

这意味着`-Dlog4j.debug=true`被解释为类名，而不是 JVM 选项。我不明白发生了什么事。

# symfony - Symfony2 包配置参数

> ID：14011143
> 
> 赞同：2
> 
> 时间：2012-12-23T12:59:25.693
> 
> 标签：symfony, configuration, dependency-injection

我的团队开发了一个非常大的电子商务项目。到目前为止，我们在那个包中有大约 40 个配置参数，我不知道它们的最终关系，也没有办法正确地构造它们，所以我们最终使用了`app/config.yml`文件中的标准参数结构。**但是**，在此过程中，我决定将配置移至语义配置结构——这样我就可以验证它，拥有一个干净的结构，通过捆绑继承等方式轻松扩展它。

问题是我现在无法将我们的包参数导入另一个包配置。

**这是我以前可以做的：**

```
(...)
parameters:
    company.bundle.email.user: user@domain.com
    company.bundle.email.pass: @MyBeAUtiFULpA55w0Rd!
(...)

swiftmailer:
    (...)
    username: %company.bundle.email.user%
    password: %company.bundle.email.pass% 
```

**这是我现在正在尝试做的事情，但它根本不起作用：**

```
(...)
company_bundle:
    (...)
    settings:
        (...)
        mailer:
            (...)
            user: user@domain.com
            pass: @MyBeAUtiFULpA55w0Rd!
 (...)

 swiftmailer:
     (...)
     username: %company_bundle.settings.mailer.user%
     password: %company_bundle.settings.mailer.pass%

 (...) 
```

当然，`company_bundle`节点包含语义配置，由 DIC 处理并在`Company\Bundle\DependencyInjection\Configuration.php`.

我现在得到的只是以下错误：

```
[Symfony\Component\DependencyInjection\Exception\ParameterNotFoundException]                       
You have requested a non-existent parameter "company_bundle.settings.mailer.user". 
```

所以问题是：如何使我的包参数可以在另一个包配置参数中访问（我已经注意*始终*在 Swiftmailer 包之前包含我的包配置）？

注意：这里显示的 Swiftmailer 包配置仅用于演示目的，我也希望能够在其他一些包中重用我的包参数。

**这背后的动机是什么？**

好吧，我希望我们的产品由一个不太了解 Symfony 的人配置 - 所以她必须能够打开我们的包配置文件并调整参数，然后这些参数将用于我们使用的一些 Symfony 包。所以我希望*所有*应用程序配置都可以在我们的包的语义配置中访问，因为我不想将整个配置暴露给那个人（我已经将所有内容分成单独的配置文件，其中一个包含我们的包的配置，其余的 - 对于所有其他的）。

那么，我要问的可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-30T12:20:33.350

由于要在每次安装中修改参数（它们可能至少在开发和生产环境之间有所不同），所以（正如 Sgoettschkes 在评论中所说）外部文件是最好的解决方案。

在 Symfony2 中，这些参数的默认位置是位于 app/config/ 目录中的**parameters.yml文件。**

在标准安装中，您可以找到例如这样的条目：

```
parameters:
    database_driver: pdo_mysql
    database_host: 127.0.0.1
    (...) 
```

这些参数以这种方式在 config.yml 中使用：

```
doctrine:
    dbal:
        driver:   "%database_driver%"
        host:     "%database_host%"
        (...) 
```

所以你可以定义你的参数（在**parameters.yml**）：

```
parameters:
    (...)
    company_bundle_email_user: user@domain.com
    company_bundle_email_pass: @MyBeAUtiFULpA55w0Rd! 
```

并使用它们（在**config.yml**中）：

```
swiftmailer:
    (...)
    username: %company_bundle_email_user%
    password: %company_bundle_email_pass% 
```

# python - Python变量递增while循环

> ID：14011149
> 
> 赞同：-1
> 
> 时间：2012-12-23T13:00:28.417
> 
> 标签：python, variables, loops, numbers, while-loop

如果用户猜对了数字，我正在尝试使变量`number`增加！如果被其他用户猜到，则继续增加增加的值。但似乎我`syntax`错了。所以我真的需要你的帮助。贝娄是我的代码：

```
#!/usr/bin/python
# Filename: while.py
number = 23
running = True

while running:
    guess = int(raw_input('Enter an integer : '))

    if guess == number:
        print 'Congratulations, you guessed it. The number is now increase'
        number += 1 # Increase this so the next user won't know it!
        running = False # this causes the while loop to stop
    elif guess < number:
        print 'No, it is a little higher than that.'
    else:
        print 'No, it is a little lower than that.'
else:
    print 'The while loop is over.'
    # Do anything else you want to do here
print 'Done' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:17:45.033

你可以在没有“运行”变量的情况下做到这一点，它不是必需的

```
#!/usr/bin/python
# Filename: while.py
number = 23
import sys

try:
    while True:
        guess = int(raw_input('Enter an integer : '))
        if guess == number:
            print('Congratulations, you guessed it. The number is now increase')
            number += 1 # Increase this so the next user won't know it!
        elif guess < number:
            print('No, it is a little higher than that.')
        else:
            print('No, it is a little lower than that.')
except ValueError:
    print('Please write number')
except KeyboardInterrupt:
    sys.exit("Ok, you're finished with your game") 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-23T13:05:59.257

```
#!/usr/bin/python
# Filename: while.py
number = 23
running = True

while running:
    guess = int(raw_input('Enter an integer : '))

    if guess == number:
        print 'Congratulations, you guessed it. The number is now increase'
        number += 1 # Increase this so the next user won't know it!
        running = False # this causes the while loop to stop
    elif guess < number:
        print 'No, it is a little higher than that.'
    else:
        print 'No, it is a little lower than that.'

# Do anything else you want to do here
print 'Done' 
```

# android - 翻译动画后触摸区域不移动

> ID：14011150
> 
> 赞同：0
> 
> 时间：2012-12-23T13:00:32.443
> 
> 标签：android, android-layout

**我正在使用TranslateAnimation**从上到下滑动布局（具有不同的 ImageView），但是当它滑动时，它的可触摸区域仍然粘在以前的位置，它不会与 ImageView 一起向下移动，它在视觉上显示它的 Y轴从某个值移动，但其可触摸区域仍在原始位置。

请帮我解决这个问题。

我用它来滑动动画：

```
TranslateAnimation t =new TranslateAnimation(0, 0,0,35);
t.setDuration(200);
t.setFillAfter(true);   
t.setInterpolator(new LinearInterpolator());
menuSlideBgId.startAnimation(t);
inFram.startAnimation(t); 
```

* * *

这是我的 lyaout 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"

    android:gravity="left|right"
    android:orientation="vertical" 
    android:background="@drawable/bg_android"
    >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="150dp"
        android:layout_height="68dp"
        android:layout_gravity="center"
        android:layout_marginTop="15dp"
        android:src="@drawable/thinknsay" />

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/rLay"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

      <ImageView
              android:id="@+id/menuSlideBg"
              android:layout_width="339dp"
              android:layout_marginLeft="130dp"
              android:layout_marginTop="452dp"
              android:layout_height="35dp"
              android:src="@drawable/menu_slide3" />      

          <RelativeLayout
              xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/slideNavLayout"
              android:layout_width="match_parent"
              android:layout_height="550dp" >

              <ImageView
                  android:id="@+id/bubbleMenu"
                  android:layout_width="28dp"
                  android:layout_height="28dp"
                  android:layout_gravity="left"
                  android:layout_marginLeft="180dp"
                  android:layout_marginTop="455dp"
                  android:src="@drawable/buble_icon" />

              <ImageView
                  android:id="@+id/shareMenuId"
                  android:layout_width="28dp"
                  android:layout_height="28dp"
                  android:layout_gravity="left"
                  android:layout_marginLeft="225dp"
                  android:layout_marginTop="455dp"
                  android:onClick="shareMenu"
                  android:src="@drawable/share_icon" />
        </RelativeLayout>
    </RelativeLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:26:08.243

`TranslateAnimation`只是随着时间的推移在不同位置重新绘制视图，它并没有真正移动`View`. 您还需要更改其布局位置，[`ObjectAnimator`](http://developer.android.com/reference/android/animation/ObjectAnimator.html)可用于更改`View`属性。

# ruby-on-rails - 使用 shuffle 方法时如何存储项目的顺序

> ID：14011154
> 
> 赞同：0
> 
> 时间：2012-12-23T13:00:57.767
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我已经建立了一个在线考试应用程序。我有一些模型，例如：

*   **问题**有很多答案
*   **答案**属于问题
*   **考试**

我为用户构建了表格，可以使用`form_tag`. **目前，我使用此代码在视图**中打乱考试中问题答案的顺序：

```
<% question.answers.shuffle.each do |answer| %>
...
<% end %> 
```

使用上面的代码，每次显示考试时，它都有不同的答案顺序。现在我想存储答案的顺序，以便以后复习考试。我正在考虑创建另一个模型来存储订单，但我不知道如何从**shuffle**方法中获取订单。

所以我想问一种方法来存储考试中的答案顺序，**这**将帮助我在用户参加的考试中以正确的答案顺序复习问题。有人可以给我一个想法或解决方案吗？

**更新模型以存储用户的答案**

```
class ExamAnswer
  belongs_to :exam
  belongs_to :question
  belongs_to :answer
end 
```

这个模型有列：exam_id、question_id、user_answer_id

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:22:22.963

```
# in app/models/question.rb
def answers_ordered(current_user)
  answers_ordered = question.answers.shuffle
  exam_answer = self.exam_answers.where(:user_id => current_user.id, :question_id => self.id, :exam_id => self.exam_id).first
  if exam_answer.nil?
    exam_answer.user_id = current_user.id
    exam_answer.question_id = self.id
    exam_answer.exam_id = self.exam_id
  end
  exam_answer.order_answers = answers_ordered.map{&:id} # add .join(';') if your sgdb does not handle the Array type
  exam_answer.save
  answers_ordered
end

# in your app/models/exam_answer.rb
class ExamAnswer
  belongs_to :user
  belongs_to :exam
  belongs_to :question
  belongs_to :answer

  # add the field order_answers as type Array or String, depending of your SGBD
end

# in your view
<% question.answers_ordered(current_user).each do |answer| %>
  ...
<% end %> 
```

然后，当您需要订单时，您可以通过`question.exam_answer.order_answers`. 我想我会做这样的事情。删除方法中不需要的内容`answers_ordered`。

# php - 包装原始类型的优势？

> ID：14011158
> 
> 赞同：1
> 
> 时间：2012-12-23T13:01:51.403
> 
> 标签：php, encapsulation

我正在阅读有关 Object Calisthenics 的内容，其中一条规则是[包装原始类型和字符串](http://www.slideshare.net/slideshow/embed_code/11475843?startSlide=24)：

```
class UIComponent {

    public function repaint($animate = true)
    {
     // 
    }

}

$component->animate(false); 
```

变成：

```
class UIComponent {

    public function repaint(Animate $animate)
    {
     //
    }
}

class Animate {

    private $animate;

    public function __construct($animate = true) 
    {
        $this->animate = $animate;
    }
}

$component->animate(new Animate(false)); 
```

我用这种技术有什么好处？在我看来，我认为它只是使事情复杂化并添加了更多代码行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T13:06:38.187

在这种情况下，它确实有点过大，但还有其他例子，它可以有意义

```
class Identifier {
  protected $id;
  public function __construct ($id) { 
    if (!preg_match('~^{a-z0-9]$~i', $id)) throw new Exception("Invalid id '$id'");
    $this->id = $id;
  }
  public function getId () { return $this->getId(); }
} 
```

所以这个是不可变的，它确保了特定的格式。当你在另一个类中对这个类进行类型提示时，你不需要测试标识符是否有效

```
class MyClass {
  protected $id;
  public function __construct (Identifier $id) { $this->id = $id; }
} 
```

这只是一个简单的例子，实际上它在 php 中并不常见。

> [..] 并添加了更多代码行。

我认为“更多的代码行”本身并不坏。如果它需要更多的行（甚至类）来编写可读和干净的代码，它比紧凑但不可读的东西要好得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-16T16:32:40.437

想象一个新的开发人员（或者你自己可能在你上次接触项目一年后）阅读第一个示例中的代码：

```
$component->repaint(false); 
```

如果不跳转到该方法的定义`repaint()`或以其他方式阅读您的文档，您绝对无法知道`false`该方法的行为方式意味着什么。我的意思是，它的字面意思是“重绘错误”，所以......重绘但是......实际上并没有重绘？*意图*不明确，这是一件坏事。

这个极其简单的示例用于演示如何通过包装原语来大大提高代码的可读性。当您想开始添加一点点行为（例如在简单验证中烘焙并将自身与另一个实例进行比较）时，好处会更大。

对于新建这么小的对象对性能的影响，您完全不必担心。至于“更多代码行”为什么那么糟糕？SRP 几乎总是会产生“更多代码”，但它是干净、可读和可维护的代码。

# python - 如何使用python mysqldb一次插入多行

> ID：14011160
> 
> 赞同：40
> 
> 时间：2012-12-23T13:02:08.367
> 
> 标签：python, mysql, mysql-python

我有一个列表列表，例如`[['a','b'],['c','d']]`.

我有一个名为的表`T`和两个字段`F1`，`F2`. 字段列表中的第一项映射到`F1`，第二个映射到`F2`。

如何在单个命令或调用中为每个内部列表插入行，而不是使用这样的 for 循环？

```
for i in [['a','b'],['c','d']]:
    c.execute("insert into T (F1,F2) values (%s, %s)", (i[0], i[1])) 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-12-23T13:07:45.740

来自[MySQLdb 用户指南](http://mysql-python.sourceforge.net/MySQLdb.html)：

```
c.executemany(
      """INSERT INTO breakfast (name, spam, eggs, sausage, price)
      VALUES (%s, %s, %s, %s, %s)""",
      [
      ("Spam and Sausage Lover's Plate", 5, 1, 8, 7.95 ),
      ("Not So Much Spam Plate", 3, 2, 0, 3.95 ),
      ("Don't Wany ANY SPAM! Plate", 0, 4, 3, 5.95 )
      ] ) 
```

所以在你的情况下：

```
c.executemany("insert into T (F1,F2) values (%s, %s)",
    [('a','b'),('c','d')]) 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-10-14T15:34:42.580

可以像@adamhajari 一样在一条语句中插入所有行，同时避免像@zenpoy 这样的sql 注入。您只需要创建一个大的插入语句并让 mysqldb`execute`进行格式化。

```
values_to_insert = [('a','b'),('c','d')]
query = "INSERT INTO T (F1, F2) VALUES " + ",".join("(%s, %s)" for _ in values_to_insert)
flattened_values = [item for sublist in values_to_insert for item in sublist]
c.execute(query, flattened_values) 
```

不是超级可读，但可以比 executemany 稍快（我尝试在本地数据库中插入 50000 行的批次，executemany 慢了 20%）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-11-25T15:41:34.993

```
def multiple_insert(cursor, table, cols, rows):
    sql_insert = 'INSERT INTO %s(%s) values %s' % (
        table,
        ','.join(cols),
        ','.join('(%s , %s)' for _ in rows)
    )
    values = [_ for r in rows for _ in r]
    cursor.execute(sql_insert, values)

# eg:
rows = [(a1 , b1),(a2 , b2),(a3 , b3)]
multiple_insert(cursor, 'your_table',('col1', 'col2'), rows)
conn.commit() 
```

# c# - 使用非顺序索引并在方法中具有多个自定义类型参数时出现绑定问题

> ID：14011161
> 
> 赞同：1
> 
> 时间：2012-12-23T13:02:17.237
> 
> 标签：c#, asp.net, asp.net-mvc-3, asp.net-4.5

假设我要发回此表格：

```
 <form action="/Admin/SaveTestChanges" method="post">

        <input name="index" type="hidden" value="S1"/>

        <input name="[S1].SID" type="hidden" value="1"/>

        <input id="sectionName" name="[S1].SectionName" type="text"  value="Nouns"/>

        <input type="submit" value="Submit" />
    </form> 
```

对这个方法：

```
 public void SaveTestChanges(TestModel Test, List<SectionModel> TestSections,
                List<QuestionModel> TestQuestions, List<ChoiceModel> QuestionChoices)
            {
                // Some implementation

            } 
```

该对象`SectionModel`具有唯一的属性名称，参数列表中的其他自定义类型都没有，但是在绑定时它不仅表示`TestSections.Count`为 1，而且对于没有键/值对的所有其他集合类型也表示相同通过了。为什么会这样？

使用非顺序索引时，是否可以包含参数名称而不仅仅是属性名称？即`TestSections[S1].SectionName`或`[S1].TestSections.SectionName`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T02:19:01.533

似乎当使用任意索引并将它们存储在隐藏输入中时，您仍然需要在输入名称“索引”前面加上实际参数名称，因为它出现在操作方法中。所以在我的例子中，隐藏的输入名称属性应该设置为`TestSections.Index`，只有“索引”会使模型绑定器混淆，结果可能有缺陷。

# html - 跨浏览器 HTML 工具提示的 Alt 或标题属性？

> ID：14011164
> 
> 赞同：4
> 
> 时间：2012-12-23T13:02:39.267
> 
> 标签：html

我正在寻找一种跨浏览器解决方案来在元素上“悬停”时显示信息，我知道这可以通过 JS 动态完成，但在这种特定情况下我更喜欢基本的静态 HTML 解决方案。

根据 mozilla 开发者网站（[此处](https://developer.mozilla.org/en-US/docs/Defining_Cross-Browser_Tooltips)），使用 title 而不是 alt 是最佳做法，但我想要更多“现场经验”来帮助我决定是否应该选择attr 或`ALT`JavaScript`TITLE`

非常感谢你

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-23T13:05:55.120

`Title`属性用于工具提示，所有主要浏览器都支持。你应该使用它。

`Alt`属性根本与工具提示无关。

# html - 使用“em”和百分比时的奇怪行为

> ID：14011165
> 
> 赞同：0
> 
> 时间：2012-12-23T13:02:52.937
> 
> 标签：html, css, em

我正在构建一个响应式站点，我想使用[新的 css3 单元 - rem](http://snook.ca/archives/html_and_css/font-size-with-rem)。

我已经将 html 标记上的基本字体大小设置`1rem`为 is`16px`然后将 body 设置为 62.5% ，`10px`但在 chrome 控制台中查看计算的样式时，我看到了 body `font-size:12px`。

我尝试使用设置身体，`0.625em`但结果仍然相同，我错过了什么？

你可以在这里看到一个例子：http: [//jsfiddle.net/pPmBm/2/](http://jsfiddle.net/pPmBm/2/)

**编辑：**

刚刚在 FF 上测试过，似乎工作正常，所以这似乎是一个 chrome 问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T14:00:27.993

我以前从未使用`rem`过，但看看你链接的网站，你好像把它翻过来了：

```
html { font-size: 62.5%; } 
body { font-size: 1rem; } /* =10px */ 
```

# entity-framework - 调用 saveChanges 时出错

> ID：14011166
> 
> 赞同：3
> 
> 时间：2012-12-23T13:02:55.087
> 
> 标签：entity-framework

添加新记录时收到以下错误

```
System.Data.Entity.Infrastructure.DbUpdateException was caught
HResult=-2146233087
Message=An error occurred while updating the entries. See the inner exception for details.
Source=EntityFramework
StackTrace:
   at System.Data.Entity.Internal.InternalContext.SaveChanges()
   at System.Data.Entity.Internal.LazyInternalContext.SaveChanges()
   at System.Data.Entity.DbContext.SaveChanges()
   at Navigation.RepositoryBase`2.Add(T entity) in c:\Users\afahmy\Documents\Visual Studio 2012\Projects\Navigation\REpositoryBase.cs:line 174
InnerException: System.Data.UpdateException
   HResult=-2146233087
   Message=An error occurred while updating the entries. See the inner exception for details.
   Source=System.Data.Entity
   StackTrace:
        at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
        at System.Data.EntityClient.EntityAdapter.Update(IEntityStateManager entityCache)
        at System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options)
        at System.Data.Entity.Internal.InternalContext.SaveChanges()
   InnerException: System.Data.SqlClient.SqlException
        HResult=-2146232060
        Message=Violation of PRIMARY KEY constraint 'PK_dbo.Priorities'. Cannot insert duplicate key in object 'dbo.Priorities'. The duplicate key value is (55c9b08f-1133-4246-9d0b-4f3e5192ffa5).

The statement has been terminated.
        Source=.Net SqlClient Data Provider
        ErrorCode=-2146232060
        Class=14
        LineNumber=1
        Number=2627
        Procedure=""
        Server=dbsrv
        State=1
        StackTrace:
             at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
             at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
             at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
             at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
             at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
             at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite)
             at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite)
             at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite)
             at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
             at System.Data.Mapping.Update.Internal.DynamicUpdateCommand.Execute(UpdateTranslator translator, EntityConnection connection, Dictionary`2 identifierValues, List`1 generatedValues)
             at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
        InnerException: 
```

代码如下

```
public virtual OperationResult Add(T entity)
    {
        OperationResult opStatus = new OperationResult { Result = QueryResult.Succeeded };

        try
        {
            DataContext.Set<T>().Add(entity);
            opStatus.Result = (DataContext.SaveChanges() > 0) ? QueryResult.Succeeded : QueryResult.Failed;
        }
        catch (Exception exp)
        {
            opStatus.ExceptionMessage = string.Format(" Error Adding {0}", exp.Message);
            opStatus.Result = QueryResult.Failed;
        }

        return opStatus;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:17:44.400

显然，该`entity`对象之前已从数据库中获取。如果将它添加到上下文中，它将得到`EntityState.Added`，这意味着 EF 将尝试插入它。显然，您在客户端生成了一个主键值（即不在数据库中），因此 EF 尝试使用现有的 PK 值插入它。

由于这是`DbContext`API（从 Set 方法明显，但总是有助于显式标记），您可以使用该[`IDbSetExtensions.AddOrUpdate`](http://msdn.microsoft.com/en-us/library/hh846520%28v=vs.103%29.aspx)方法让 EF 确定是否需要插入或更新对象。

# backbone.js - RequireJS + BackboneJS - 连接模块

> ID：14011167
> 
> 赞同：0
> 
> 时间：2012-12-23T13:02:55.303
> 
> 标签：backbone.js, requirejs

当我尝试连接两个包含两个不同 BackboneJS 视图的模块时，我遇到了问题。

在 RequireJS 的这个模块中包含一个主干视图。我需要在这个模块中，参考另一个模块中的另一个主干视图。我修改了代码以使其更简单

```
define (["jquery","backbone","collections/controlSearchCollection","views/currentPlaylist","jqueryUI"], function($, Backbone, controlSearchMusic, currentPlaylist){

var searchModule = Backbone.View.extend({
    el: "#containerSearch",

    initialize: function () {
        this.collection = new controlSearchMusic();
    },
    events:{
        "dblclick li":"select"
    },
    select: function(element){
        var trackJSON ={};
        trackJSON["id"]= "playCloud_"+$(element.target).attr("id");
        currentPlaylist.collection.add(trackJSON);   <--- Here is where this error

    }
});

return searchModule;
}); 
```

在这里，我的另一个 RequireJS 模块包含一个主干JS 的视图。我需要从第一个模块添加到 JSON。

```
define (["jquery","backbone","collections/controlCurrentPlaylistCollection","jqueryUI"], function($, Backbone, controlCurrentPlaylist){

    var currentPlaylist = Backbone.View.extend({
        el: "#currentPlaylist",

        initialize: function(){
            this.collection = new controlCurrentPlaylist();
            this.collection.on("add", this.executeFunction, this);

        },
        executeFunction: function(song){
            alert(song.toSource());
        }
    });
    return currentPlaylist;
}); 
```

这两个模块在 app.js 中实例化

有人可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:10:26.637

没有确切的错误很难说，但看起来你没有创建`currentPlaylist`. 所以`currentPlaylist.collection`是未定义的，当您尝试在其上调用函数时会导致错误`add`。

你可以试试这个：

```
var cpl = new currentPlaylist(); // create instance
cpl.collection.add(trackJSON);  // cpl.collection should be initialized here 
```

# vim - 在插入模式下按 Tab、箭头键、Enter 和 Backspace 时，我的 gVim 有时会执行两次

> ID：14011172
> 
> 赞同：2
> 
> 时间：2012-12-23T13:04:11.530
> 
> 标签：vim

我在 Thinkpad T410 笔记本电脑上使用由 yum 的 CentOS 安装的 gVim。gVim 的版本是 7.2.411-1.8.el6(i686)。在插入模式下编辑文件时，会发生一些奇怪的事情。当我按 Tab 或 Enter 时，gVim 会插入两个制表符或两个换行符。当按箭头键或退格键时，gVim 移动两个字符或删除两个字符。我不知道为什么它会这样。这是我的 .vimrc 文件，非常简单：

```
syntax on
set nocompatible
set fileencodings=utf8,gb18030
set fileformats=unix,dos
set nobackup
set autoindent
set tabstop=4
set backspace=indent,eol,start
set guifont=Monaco\ 12
set hlsearch    
set showmatch   
colorscheme slate 
```

谁能告诉我问题的原因以及我如何纠正它？提前致谢。

# javascript - 如何在另一个页面中显示非样式化的 HTML 页面？

> ID：14011177
> 
> 赞同：-1
> 
> 时间：2012-12-23T13:04:59.023
> 
> 标签：javascript, html, css, asp.net-mvc

我正在从 HTML 编辑器收集 HTML 并保存在我的数据库中。我想向用户显示这些数据，但我不知道如何在 HTML 文本不受页面样式影响的情况下执行此操作。

是否有任何很酷的库可以帮助我解决这个问题，或者是否有一种仅使用 HTML 标签和/或 javascript 的非常简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:13:13.877

最简单的方法可能是简单地将您的 HTML 填充到`iframe`.

如果要将其设置为 HTML，请查看此问题：[Set content of iframe](https://stackoverflow.com/questions/8240101/set-content-of-iframe)。

但我通常只是接受`iframe`使用单独的请求加载的内容。

# html - CSS3 & GIF 加载圈

> ID：14011179
> 
> 赞同：2
> 
> 时间：2012-12-23T13:05:01.070
> 
> 标签：html, css

> **可能重复：**
> [CSS3 连续旋转动画（就像加载日晷）](https://stackoverflow.com/questions/2584138/css3-continous-rotate-animation-just-like-a-loading-sundial)

我有这个简单的 GIF 加载圈。像这样的东西有可能只用 CSS3 编码吗？任何帮助深表感谢。

[jsFiddle](http://www.jsfiddle.net/jxAg9/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T13:34:28.280

HTML：

```
<div class="arc-hider"></div> 
```

CSS：

```
@-webkit-keyframes rotate { 
    from { -webkit-transform: rotate(0deg) }
    to { -webkit-transform: rotate(360deg) }
}
@-moz-keyframes rotate { 
    from { -moz-transform: rotate(0deg) }
    to { -moz-transform: rotate(360deg) }
}
@-o-keyframes rotate { 
    from { -o-transform: rotate(0deg) }
    to { -o-transform: rotate(180deg) }
}
@-ms-keyframes rotate { 
    from { -ms-transform: rotate(0deg) }
    to { -ms-transform: rotate(360deg) }
}
.arc-hider {
    width: 30px;
    height: 30px;
    border-radius: 60px;
    border: 6px solid #36669F;
    position: absolute;
    left: 45%;
    z-index: 5;
    clip: rect(0px 21px 21px 0px);
    -webkit-animation: rotate 2s linear infinite 0s;-moz-animation: rotate 2s linear infinite 0s;-o-animation: rotate 2s linear infinite 0s;-ms-animation: rotate 2s linear infinite 0s;
    animation: rotate 2s linear infinite 0s;
}
​ 
```

应该做的伎俩

[现场演示](http://jsfiddle.net/2FwDm/22/show/)| [资源](http://jsfiddle.net/2FwDm/22/)

# scala - 如何在 Scala 中的 List 中找到最大值的索引？

> ID：14011181
> 
> 赞同：22
> 
> 时间：2012-12-23T13:05:25.837
> 
> 标签：scala, indexing, max, scala-collections

对于 Scala List[Int] 我可以调用方法 max 来查找最大元素值。

如何找到最大元素的索引？

这就是我现在正在做的事情：

```
val max = list.max 
val index = list.indexOf(max) 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-23T13:30:55.013

一种方法是使用其索引压缩列表，找到具有最大第一个元素的结果对，并返回该对的第二个元素：

```
scala> List(0, 43, 1, 34, 10).zipWithIndex.maxBy(_._1)._2
res0: Int = 1 
```

这不是解决问题的最有效方法，但它是惯用且清晰的。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-09-13T04:38:46.410

由于`Seq`是 Scala 中的函数，因此以下代码有效：

```
list.indices.maxBy(list) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-24T03:25:36.253

```
 def maxIndex[ T <% Ordered[T] ] (list : List[T]) : Option[Int] = list match {
    case Nil => None
    case head::tail => Some(
        tail.foldLeft((0, head, 1)){
            case ((indexOfMaximum, maximum, index), elem) =>
              if(elem > maximum) (index, elem, index + 1)
              else (indexOfMaximum, maximum, index + 1)
        }._1
    )
  }   //> maxIndex: [T](list: List[T])(implicit evidence$2: T => Ordered[T])Option[Int]

    maxIndex(Nil)                            //> res0: Option[Int] = None
    maxIndex(List(1,2,3,4,3))                //> res1: Option[Int] = Some(3)
    maxIndex(List("a","x","c","d","e"))      //> res2: Option[Int] = Some(1)

    maxIndex(Nil).getOrElse(-1)              //> res3: Int = -1
    maxIndex(List(1,2,3,4,3)).getOrElse(-1)  //> res4: Int = 3
    maxIndex(List(1,2,2,1)).getOrElse(-1)    //> res5: Int = 1 
```

如果有多个最大值，则返回第一个的索引。

优点：您可以将它与多种类型一起使用，它只通过列表一次，您可以提供默认索引而不是为空列表获取异常。

缺点：也许你更喜欢例外 :) 不是单行的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-23T14:01:50.170

更容易阅读的是：

```
 val g = List(0, 43, 1, 34, 10)
   val g_index=g.indexOf(g.max) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-29T17:34:56.180

我认为这里介绍的大多数解决方案都会通过列表两次（或平均 1.5 次）——一次用于最大位置，另一个用于最大位置。也许很多注意力都集中在看起来漂亮的东西上？

为了只通过一次非空列表，可以尝试以下操作：

```
list.foldLeft((0, Int.MinValue, -1)) {
    case ((i, max, maxloc), v) => 
        if (v > max) (i + 1, v, i)
        else (i + 1, max, maxloc)}._3 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-23T14:22:29.813

拉皮条我的图书馆！:)

```
class AwesomeList(list: List[Int]) {
  def getMaxIndex: Int = {
    val max = list.max
    list.indexOf(max)
  }
}

implicit def makeAwesomeList(xs: List[Int]) = new AwesomeList(xs)
                                              //> makeAwesomeList: (xs: List[Int])scalaconsole.scratchie1.AwesomeList

//Now we can do this:
List(4,2,7,1,5,6) getMaxIndex             //> res0: Int = 2

//And also this:
val myList = List(4,2,7,1,5,6)            //> myList  : List[Int] = List(4, 2, 7, 1, 5, 6)
myList getMaxIndex                        //> res1: Int = 2

//Regular list methods also work
myList filter (_%2==0)                    //> res2: List[Int] = List(4, 2, 6) 
```

此处有关此模式的更多详细信息：[http ://www.artima.com/weblogs/viewpost.jsp?thread=179766](http://www.artima.com/weblogs/viewpost.jsp?thread=179766)

# gruntjs - 通配符包括

> ID：14011183
> 
> 赞同：3
> 
> 时间：2012-12-23T13:05:31.603
> 
> 标签：gruntjs, yeoman

是否可以使用通配符进行导入？

例如：

```
<!-- build:js scripts/scripts.js -->
<script src="scripts/models/*"></script>
<script src="scripts/controllers/*"></script>
<script src="scripts/init.js"></script>
<!-- endbuild --> 
```

还是有其他最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T01:13:06.663

目前没有，但我们正在[考虑添加它](https://github.com/yeoman/yeoman/issues/661)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-25T15:17:28.880

[grunt-glob-html 可以满足](https://github.com/gevgeny/grunt-glob-html)您的实际需要。

# c# - 用户代码未处理实体异常

> ID：14011186
> 
> 赞同：2
> 
> 时间：2012-12-23T13:05:45.857
> 
> 标签：c#, linq, exception, foreach, dto

我在 foreach 循环中收到一个名为“用户代码未处理实体异常”的错误。为什么会这样？我究竟做错了什么？

```
 public IList<ProductDTO> GetProducts()
    {
        IList<ProductDTO> listofproducts = new List<ProductDTO>();
        using (var db = new NORTHWNDEntities())
        {
            var query = from p in db.Products
                        select new
                                   {
                                       Name = p.ProductName,
                                   }; 
```

错误发生在她的 foreach 中。

```
 *foreach (var product in query)*
                {
                    listofproducts.Add(new ProductDTO { Name = product.Name });
                }
            }
        return listofproducts;

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-12-08T09:16:40.083

如果您想找到问题的确切问题，请以这种方式在try catch语句中编写代码

```
try
{
  //write code

} 
catch (System.Data.Entity.Validation.DbEntityValidationException ex)
            {
                var outputLines = new List<string>();
                foreach (var eve in ex.EntityValidationErrors)
                {
                    outputLines.Add(string.Format(
                        "{0}: Entity of type \"{1}\" in state \"{2}\" has the following validation errors:",
                        DateTime.Now, eve.Entry.Entity.GetType().Name, eve.Entry.State));
                    foreach (var ve in eve.ValidationErrors)
                    {
                        outputLines.Add(string.Format(
                            "- Property: \"{0}\", Error: \"{1}\"",
                            ve.PropertyName, ve.ErrorMessage));
                    }
                }
                System.IO.File.AppendAllLines(@"c:\temp\errors.txt", outputLines);
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T13:07:43.977

首先检查您是否可以访问数据源。如果没问题，那么您需要检查您的查询结构。您正在遍历查询，但不是通过查询结果。使用 ToList 方法将查询转换为 List 以遍历它。您需要使用[**Enumerable.ToList**](http://msdn.microsoft.com/en-us/library/bb342261.aspx)方法将查询结果转换为列表。

```
var query = (from p in db.Products
              select new
              {
                    Name = p.ProductName,
              }).ToList();

foreach (var product in query)*
{
      listofproducts.Add(new ProductDTO { Name = product.Name });
} 
```

您可以直接创建`ProductDTO`使用投影的对象。

```
IList<ProductDTO> listOfProcuts = (from p in db.Products
                                   select new ProductDTO 
                                   {
                                       Name = p.ProductName,
                                   }).ToList();

return listOfProcuts ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T13:17:37.397

Adil 的回答是正确的，可以解决您的问题，但您可能会考虑返回`IEnumerable<ProductDTO>`而不是`IList<DTO>`.

遵循信息隐藏的原则，如果调用 GetProducts() 的程序的其他部分不需要列表语义，那么它们不应该看到`IList<T>`语义

# ios - CorePlot axisLine 和 gridLine 长度太长

> ID：14011194
> 
> 赞同：1
> 
> 时间：2012-12-23T13:06:33.173
> 
> 标签：ios, cocoa-touch, grid, core-plot, axis

我正在将 CorePlot 用于我当前的项目，它令人惊叹。
我遇到的唯一问题是轴和网格的长度。
我只使用左侧和底部带有标签的正坐标系。
我的问题是轴和网格在我的标签方向上的长度。

我尝试使用：

```
axisSet.xAxis.orthogonalCoordinateDecimal = CPTDecimalFromString(@"-value");
axisSet.yAxis.orthogonalCoordinateDecimal = CPTDecimalFromString(@"-value"); 
```

或者

```
x.labelOffset = value;
y.labelOffset = value; 
```

但这只是将我的标签的距离设置为不同，而不影响网格长度。

在我的示例中，`y-axis`并且`grid`与我的重叠`label:@{1,2,3,4,5,6,7,8}`

![](../Images/a16220e92b1dc3518eaa825edb11a6f8.png)

有人处理过同样的问题吗？THX 以正确的方式回答所有问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T14:36:38.983

使用`visibleRange`和`gridLinesRange`分别限制轴和网格线。*有关示例代码，请参阅Plot Gallery*示例应用程序中的“控制图” 。

# c++ - QTreeView 策略子类。这是理智的吗？

> ID：14011200
> 
> 赞同：0
> 
> 时间：2012-12-23T13:06:59.317
> 
> 标签：c++, qt, design-patterns

我有点厌倦了为我需要在 QWhateverView 行为中进行的每个小修改创建子类，所以我有了一个想法：

如果我为最常被覆盖的函数创建一个 ProxyView 会怎样，这些函数基本上会执行以下操作：

```
//(mousePress used as an example)
void ProxyView::mousePressEvent ( QMouseEvent * event ) 
{
    if(mousePressFunctionHandler != nullptr)
       functionHandler(this, event);
    else
       QTreeView::mousePressEvent(event);
} 
```

虽然我确实无法以这种方式访问​​视图的内部结构，但我经常不需要它......到目前为止唯一阻止我的是我不确定这个想法是否合理...... :)

还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T13:15:30.623

看来您需要使用[事件过滤器](http://doc.qt.digia.com/qt/eventsandfilters.html#event-filters)。

# java - JUnit 询问用户测试是否成功？

> ID：14011202
> 
> 赞同：2
> 
> 时间：2012-12-23T13:07:22.377
> 
> 标签：java, junit, user-interaction

是否`JUnit`有构建功能以交互方式询问用户测试是否成功？

我知道`JUnit`是用于自动测试，但我有一些声音生成类，我想通过耳朵进行测试，并希望在一些罕见的一次性案例中手动测试它们，然后添加`@Ignore`到此类测试中。

我也知道我可以自己弹出对话框，但我想知道是否`JUnit`有预制的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:26:21.047

您是否考虑过使用[System.setIn](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#setIn%28java.io.InputStream%29)语句。

```
System.out.println("Confirm if you find blah blah working? Enter Y/N ");

System.setIn(new ByteArrayInputStream(data.getBytes()));
Scanner scanner = new Scanner(System.in);
String userInput = scanner.nextLine();

if(userInput.equalsIgnoreCase("Y")) {
   // Pass the test case
} else {
   //Fail the test case
} 
```

# html - 一页网站上的导航链接到错误的地方

> ID：14011204
> 
> 赞同：0
> 
> 时间：2012-12-23T13:07:39.320
> 
> 标签：html, html-lists

[http://joshhornby.co.uk/skinnybeer/index.html](http://joshhornby.co.uk/skinnybeer/index.html)

正如您所看到的，当您单击“The Booze”时，会向下滚动到容器中的第一项，而不是 div 所在的区域。

导航html是

```
<li><a href="#booze">The Booze</a></li> 
```

并链接到一个名为 booze 的 div id。

```
<div id="booze"> 
```

它似乎链接到图像或容器，我不知道如何让它滚动到标题而不是图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:11:56.363

它链接到#booze，你只是有一个`position: fixed`元素覆盖它。

![截屏](../Images/3497697b59666996defb828ad26ccffd.png)

# android - Android：如何在另一个活动中编辑我的 ListView 并将编辑后的结果返回给 ListView

> ID：14011207
> 
> 赞同：1
> 
> 时间：2012-12-23T13:07:55.303
> 
> 标签：android, listview, android-intent, android-activity

所以我的activity1类中有一个listview，我想做的是：

单击列表视图中的一个项目，这将打开 activity2 类，其中包含 2 个编辑文本，其中包含列表视图中单击项目的值，例如姓名和年龄字符串，我想在我的 activity2 类中编辑这些值/字符串 [通过更改编辑文本]，并将编辑的值发送回我在 activity1 类中的列表视图，并在我的列表视图中显示编辑的值 [例如显示名称]，而不是显示编辑前列表视图中的旧值/字符串。

我尝试了许多不同的方法，但我无法实现目标，如果你们中的任何一个可以帮助我，我会很高兴。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:15:22.167

您可以将您选择的项目数据传输到您的第二个活动，如下面的代码

```
Intent i = new Intent(MainActivity.this,ReportActivity.class);
            i.putExtra("MainDate", MainDate.getText().toString()); 
```

在您的第二个活动中，您必须获取这些数据然后操纵它们

```
Intent intent = getIntent();
    MainDate = intent.getExtras().getString("MainDate"); 
```

然后像之前一样将您操作的数据发送回您的第一个活动，然后更新您的列表适配器

您可以通过位于 yourList.setOnItemClickListener 上的此代码在您的第一个活动列表中获取所选项目的数据

```
Cursor Getdata = (Cursor)YourList.getItemAtPosition(position);
String Yourcolumnstring = Getdata.getString(Getdata.getColumnIndex("yourcolumnindex")) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T13:19:41.500

你应该将你的字符串发送到activity2，当从activity2返回到activity1时，你应该将你的新字符串从activity2发送到activity1。你的字符串应该如下发送：

```
String str = "My Data"; //Data you want to send
Intent intent = new Intent(FirstActivity.this, SecondActivity.class);
intent.putExtra("name",str); 
```

您应该在 activity2 中收到 str ，如下所示：

```
String name = this.getIntent().getStringExtra("name"); 
```

# iphone - iOS：将 GCD 与 Core Data 结合使用

> ID：14011208
> 
> 赞同：0
> 
> 时间：2012-12-23T13:07:59.223
> 
> 标签：iphone, ios, cocoa-touch, core-data

在它的核心，我的应用程序会向用户询问一堆数字，通过核心数据存储它们，然后我的应用程序负责向用户显示所有这些数字的平均值。

所以我认为我应该做的是，在用户输入一个新数字后，我可以启动一个新线程，获取`NSFetchDescription`实例中的所有对象并在我`NSManagedObjectContext`的 .主线程。

我知道 Core Data 中的并发规则是每个`NSManagedObjectContext`实例一个线程，所以我想知道的是，您是否认为我刚才描述的内容不会让我的应用程序在 5 个月后爆炸？我只是认为没有必要为了做一些微不足道的计算而实例化一个全新的上下文......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:21:34.040

根据您所描述的，为什么不将输入到`CoreData`模型中的数字存储到`NSMutableArray`? 似乎您正在存储这些以备将来检索，以防有人需要查看（并且可能修改）先前的计算。在这种情况下，输入当前的一组数字后，无需进行提取。只需使用一个可变数组并用当前计算的所有数字填充它。输入数字后，将其保存到模型和数组中。当用户准备好查看平均值时，对已填充数组中的数字进行数学运算。如果用户想要修改之前的计算，将这些数字检索到一个数组中并从那里开始工作。

`Context`底线是，除非您从大型数据集中填充模型（例如电话簿的初始播种等），否则您不需要使用多个线程和 merging 。`Context`对于您所描述的如此小的更改，修改 a并在该上下文上调用 save 是一件非常快的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T16:55:39.847

我想说你可能想做一些测试，特别是关于数据集的大小。如果它非常小，则 sqlite 调用非常快，因此您可以在主队列中进行操作。但如果需要一些时间，那么明智的做法是将其从主线程中移除。

Apple 在 2011 年引入了父子托管对象上下文的概念，以使在不同线程上使用 MO 上下文更容易。您可能想查看有关 Core Data 的 WWDC 视频。

您可以使用 NSExpression 来获取真正的高性能函数，例如最小值、最大值、平均值等。这是一个很好的链接。有关于SO的例子

[http://useyourloaf.com/blog/2012/01/19/core-data-queries-using-expressions.html](http://useyourloaf.com/blog/2012/01/19/core-data-queries-using-expressions.html)

祝你好运！

# android - 如何使用第三个 android 设备作为 wifi 接入点通过 wifi 在两个 android 设备之间连接和发送文件/消息？

> ID：14011212
> 
> 赞同：1
> 
> 时间：2012-12-23T13:08:22.643
> 
> 标签：android

我想开发一个应用程序，其中两个 android 设备（运行 android 2.X）相互连接以使用由另一个 android 设备（使用 wifi 热点）创建的 wifi 访问点共享数据。任何运行 android 2.2 或更高版本的 android 设备都可以用作热点。那不是问题。最主要的是使用该接入点连接两个 android 设备以发送/接收消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:17:33.693

好吧，我不是 android 开发人员，但模式应该是一样的：

有很多方法可以让设备将自己声明为热点。我能想到的最简单的方法是安装一个为您执行此操作的任何 adhook 程序或任何其他使用 android 设备或任何其他连接程序的 wifi 功能的程序，或者您可以自己编写一个

看到这个搜索[使用 android 作为路由器](https://www.google.de/search?sourceid=chrome&client=ubuntu&channel=cs&ie=UTF-8&q=use%20connectify%20on%20android#hl=en&client=ubuntu&hs=3im&tbo=d&channel=cs&sclient=psy-ab&q=use%20android%20as%20a%20router&oq=use%20android%20as%20a%20router&gs_l=serp.3..0j0i8i30l3.6873.9729.0.9834.23.19.0.4.4.0.226.2498.0j17j1.18.0.les;..0.0...1c.1.MgRyim6mpY0&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&bvm=bv.1355534169,d.bGE&fp=87026341a487d4eb&bpcl=40096503&biw=1920&bih=1064)

其次，您必须考虑其他设备将如何连接到这个移动“服务器”，这只是一个桥梁还是什么？您将如何验证设备以相互通信

最后，您必须考虑设备将如何通信。您想使用 FTP 协议进行文件传输还是究竟是什么？

这些都是您必须考虑的问题，如果没有具体的项目要求，很难进一步提供帮助

# javascript - MongoDB / Mongoose - 添加新的数据库条目崩溃页面

> ID：14011214
> 
> 赞同：0
> 
> 时间：2012-12-23T13:08:54.507
> 
> 标签：javascript, mongodb, mongoose, database

我在向我的数据库添加 a 时遇到问题`team`，我现在有一个索引页面，它现在只显示数据库中的所有团队。当我转到`localhost:3000/team`下面看到的这个时`team.jade`，我输入团队名称并按下提交按钮。然后当我转到索引页面时，它就在那里，我的新团队就在那里。

但是当我按下提交按钮时，我实际上收到一条错误消息：

```
Express
500 TypeError: Cannot read property 'teamName' of undefined
at module.exports (/home/declan/nodeapps/tournamentManager/routes/index.js:126:24)
at callbacks (/home/declan/nodeapps/tournamentManager/node_modules/express/lib/router/index.js:160:37)
at param (/home/declan/nodeapps/tournamentManager/node_modules/express/lib/router/index.js:134:11)
at pass (/home/declan/nodeapps/tournamentManager/node_modules/express/lib/router/index.js:141:5)
at Router._dispatch (/home/declan/nodeapps/tournamentManager/node_modules/express/lib/router/index.js:169:5)
at Object.router (/home/declan/nodeapps/tournamentManager/node_modules/express/lib/router/index.js:32:10)
at next (/home/declan/nodeapps/tournamentManager/node_modules/express/node_modules/connect/lib/proto.js:190:15)
at Object.handle (/home/declan/nodeapps/tournamentManager/app.js:34:5)
at next (/home/declan/nodeapps/tournamentManager/node_modules/express/node_modules/connect/lib/proto.js:190:15)
at Object.static (/home/declan/nodeapps/tournamentManager/node_modules/express/node_modules/connect/lib/middleware/static.js:55:61) 
```

我不知道为什么我得到这个，第 126 行`index.js`实际上是下面的这一行：

`var name = teamForm.teamName;`

这是创建新数据库条目的第一行之一，因此如果它无法读取该属性，则不会将其添加到数据库中。那是我的想法，但是当我重新加载索引页面时，有我的新数据库条目，那么您为什么认为它不起作用？

index.js @ 路由

```
/**
  * Add a new Team to database
  */
  app.post('/team', function(req, res) {
    util.log('Serving request for url[GET] ' + req.route.path);
    var teamForm = req.body.teamForm;
    var name = teamForm.teamName;

    var newTeam = new Team();
    newTeam.name = name;

    newTeam.save(function(err, savedTeam){
      var message = '';
      var retStatus = '';
      if(!err){
        util.log('Successfully created team with Name : ' + name);
        message = 'Successfully created new team : ' + name;
        retStatus = 'success';
      } else {
        util.log('Error while creating team : ' + name + ' error : ' + util.inspect(err));
        if(err.code === 11000){
          message = 'Team already exists';
        }
        retStatus = 'failure';
      }
      res.json({
        'retStatus' : retStatus,
        'message' : message
      });
    });
  }); 
```

team.jade @views（html模板，你可以看到需要的id等）

```
extends index

block content
    div.row-fluid
        div.span9
            h2 New Team
            div.well.sidebar-nav
                div.teamList
                    form.form-horizontal(method="post", id="team-form")
                        div.control-group
                            label.control-label(for="teamName") Team Name :
                            div.controls
                                input.input-small(type="text", id="teamName")
                        div.control-group
                            div.controls
                                button#teamConfirm.btn.btn-primary.btn-mini(href='#') To DB
                br
                p This page is used to demonstrate how an 8 team single elimination tournament would be represented in the final design of my project. The pseudo code conjured up in my initial hand-in document was originally used here to produce the same result. The pseudo code helped create this set of seeded brackets, so that the matches correspond to the seeds of the tournament. For the 8 team bracket, I worked back through from the final, where seeds 1 and 2 should face each other, until I was left at round 1 of the brackets. This was used to give myself a 'new' set of seeds which were in the correct order to just be placed into these brackets.
        div.span3
            div.well.sidebar-nav
                h4 To-Do List:
                p - Enter list of teams manually from this page.
                p - Do a test to show a bracket with random seed.
                p - Show rankings after tournament 
```

团队.js@js

```
var newTeam = function(){
    $('#teamConfirm').click(function(){
        newTeam.teamForm();
    });
};

newTeam.teamForm = function(){

    var teamForm = {
        teamName : $('#teamName').val()
    };
    // Basic validation
    $.post('/team', {'teamForm' : teamForm}, function(response) {
            console.log(response);
    });
};

newTeam(); 
```

index.js@js

```
var Main = {};

Main.loadScript = function(url){
  var footer = document.getElementById('footer');
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src = url;

  footer.appendChild(script);
}

$(document).ready(function(response){
  Main.loadScript('js/login.js');
  Main.loadScript('js/signup.js');
  Main.loadScript('js/team.js');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:21:24.430

我认为这是因为`req.body`没有被解析为 JavaScript 对象（它仍然是 JSON 字符串）。首先检查你是否在使用

```
app.use(express.bodyParser()); 
```

**在**任何路线之前。如果不是这样，请尝试使用`.ajax`而不是`.post`with `contentType`set：

```
$.ajax({
    // some other settings
    contentType : "application/json"
}); 
```

可能是内容类型搞砸了，Express 没有解析从客户端接收到的 JSON 字符串。您可能会尝试的另一件事是简单地做（在​​服务器端）：

```
app.post('/team', function(req, res) {
    var body = JSON.parse( req.body );
    // other code
} 
```

也许用`try{}catch{}`块包装附加行。

# javascript - 如何使用 localStorage 记住在元素上设置了哪些类

> ID：14011219
> 
> 赞同：1
> 
> 时间：2012-12-23T13:09:41.290
> 
> 标签：javascript, jquery, html, local-storage

我将使用[Mousetrap](http://craig.is/killing/mice)，因此当用户按下 Alt+L 时，它会使用 jQuery 并将类添加`light`到 body 标记，我还希望它在按下 Alt+L 后删除该类。

如何添加 localstorage 以记住是否有课程`light`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T13:19:32.093

我不会提供代码，因为它太简单了，我不需要。相反，我将为您提供使用**文档**的指导，这些文档将为您提供有关您请求信息的 api 的答案。

`localStorage`非常直截了当。这是一个简单的键/值存储。

[https://developer.mozilla.org/en-US/docs/DOM/Storage](https://developer.mozilla.org/en-US/docs/DOM/Storage)

[Mozilla 开发者网络](https://developr.mozilla.org/en-US/)将为您提供有关 api 的作用以及它们如何工作的信息（带有工作示例）。

我还想提一下，`localStorage`StackOverflow 上可能已经存在一些问题。这是关于 StackOverflow 的帖子 -[修改本地存储？](https://stackoverflow.com/questions/12412217/modify-localstorage)

欢迎。

* * *

为了匹配 OP 的 REAL 问题，“我如何使用 localStorage 来记住在元素上设置了哪些类”。

```
var $body = $("body");

// On ALT+L event
if ($body.hasClass("light")) {
    $body.addClass("light");
    window.localStorage.hasLightClass = true;
} else {
    window.localStorage.hasLightClass = false;
    $body.removeClass("light");
}

// On page load
var hasClass = window.localStorage.hasLightClass || false;
if (JSON.parse(hasClass)) {
  $body.addClass("light");
} 
```

# modelsim - 在 verilog 文件中定义的宏，但错误在 modelsim 中显示未定义的宏

> ID：14011225
> 
> 赞同：1
> 
> 时间：2012-12-23T13:12:14.383
> 
> 标签：modelsim

我已经在一个verilog文件中定义了所有verilog文件的宏，比如FabScalarParam.v，我首先在system.do文件中编译FabScalarParam.v，然后编译其他verilog文件。

但是当我运行“do system.do”来编译设计时，它向我显示了这样的错误，

```
# ** Error: I:/programming/EDK/project_4/pcores/instruction_side_v1_00_a/hdl/verilog/StallUnit.v(6): (vlog-2163) Macro `MAX_STALL_CYCLES_LOG is undefined. 
```

它说一些宏没有定义。有什么方法可以在modelsim的编译列表中选择FabScalarParam.v作为全局文件？由于宏的数量很多，我无法指定所有的宏使用方法：编译-->编译选项-->verilog &系统verilog-->其他verilog选项-->宏。

我使用modelsim 6.5，xilinx edk 12.4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T23:54:55.660

这与编译顺序有关。包含宏的编译器指令由编译器线性处理。有关详细信息，请参阅 IEEE1364-2001 第 19 节或 IEEE1800-2009 第 22 节。确保宏文件是第一个编译的文件。

手动添加 `include 也可以，但是您的编译器可能会给出宏重新定义的警告。建议将宏定义封装在 `ifdef/`ifndef 中。这样做可以解决宏定义的警告。如果多个文件引用相同的`include，那么封装宏也可以提高编译器性能。请参阅以下示例。

宏.vh：

```
`ifndef macros_vh
// NOTE: for Verilog 1995 `ifndef is not supported use `ifdef macros_vh `else
`define macros_vh
/**************
* your macros *
* `define ... *
***************/
`endif 
```

然后在您的 verilog 文件中 (*.v / *.sv)

```
`include "macro.vh"
/*************
 * your code *
 *************/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T11:09:30.753

我在 Internet 上找不到任何有用的东西来在 modelsim 的编译列表中设置全局文件。所以，我只是在每个文件中手动添加 `include ... 来解决问题。虽然它很愚蠢，但它工作得很好。

如果有人知道如何在modelsim的编译列表中设置全局文件，请更新它。：-） 谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-21T00:18:51.167

当我用脚本编译我的项目时，我遇到了同样的问题。
最后，我发现您无法在不同的范围内编译宏和 verilog 文件。
前任：

```
vlog -work work macro.v  
vlog -work work project.v 
```

你必须：

```
vlog -work work macro.v project.v 
```

在一个 vlog 命令中编译它们可以解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-12T01:25:41.797

这是我的解决方法，没有在每个需要宏的文件中添加 `include

vlog -mfcu -y <path/to/source/files> +libext+.v+.sv <源文件 1> <源文件 2> <... 源文件 N>

-mfcu 让 vlog 将一个命令行中的所有源文件视为一个编译单元。如果在 <source file 1> 中定义了宏，那么它们对它之后的所有源文件都是可见的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-16T13:59:51.363

您可以通过向 vlog 添加以下选项来编译 verilog 文件并定义将应用于此文件的预编译器宏：

```
+define+<macro_name>[=<macro_text>] 
```

与编译器指令相同：`define macro_name macro_text

例如：

```
vlog +define+macro_name -work work project.v 
```

# android - 无法在 Android 内核上编译模块：MODPOST 0 模块

> ID：14011230
> 
> 赞同：1
> 
> 时间：2012-12-23T13:13:19.357
> 
> 标签：android, linux, linux-kernel

在全新的 Ubuntu 安装中，我安装了 build-essential 包，以及其他用于为我的 PC 编译 Nvidia 驱动程序的包。这意味着内核和模块编译在 PC 上工作。

现在在同一台 PC 上，我尝试使用基于 gcc 4.4.3 的 Google NDK 工具链交叉编译 Android linux 内核。

编译顺利进行，但最后，它给出以下输出：

```
 CHK     include/linux/version.h
  CHK     include/generated/utsrelease.h
  make[1]: `include/generated/mach-types.h' is up to date.
  CALL    scripts/checksyscalls.sh
  CHK     include/generated/compile.h
  Building modules, stage 2.
  MODPOST 0 modules 
```

在调用“make menuconfig”然后执行“make”之前，我已经完成了“make prepare”。

请注意，构建服务器上的相同工具链适用于从 git repo 克隆的相同文件。简而言之，相同的内核源代码，相同的工具链，在服务器上构建模块，不在我的 PC 上构建任何模块。

.config 启用了“可加载模块支持”。

```
$cat modules.order 
kernel/drivers/scsi/scsi_wait_scan.ko
kernel/drivers/net/wireless/bcmdhd/dhd.ko
kernel/drivers/net/wireless/btlock/btlock.ko
kernel/drivers/net/tun.ko 
```

Makefile 具有正确的 obj-m 和 obj-$ 设置，这也很明显，因为它可以在一台 PC 上运行。

我很高兴了解为什么我的 PC 无法为我的 Android 内核编译模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:42:01.383

经过大量搜索，我找到了答案。

我在这里分享它，因为几乎无法想象有人会认为这是这个问题的原因！

我设置了 GREP_OPTIONS 来自动提供颜色，并对结果进行编号。似乎构建模块的脚本依赖于 grep，并且似乎搞砸了。

取消设置 envt 变量使其成功执行 modpost。

所以解决办法是：

```
GREP_OPTIONS= 
```

并从配置文件和 .bashrc 脚本中删除设置。

# mysql - 我应该避免建立 MySQL 连接（使用 Memcache 时）还是无论如何都要建立连接？

> ID：14011231
> 
> 赞同：1
> 
> 时间：2012-12-23T13:14:10.943
> 
> 标签：mysql, optimization, memcached

所以我才刚刚开始使用 Memcache。我准备写一些代码，但是我有一个优化问题：

我想知道我是否应该尽可能延迟建立 MySQL Connect（也许根本不建立一个，当所有内容都可以从 Memcache 读取时）或者建立它以节省我的编码时间，基于不是连接的想法但是实际的查询让我的服务器的 CPU 发疯了。

所以，我必须在这两个代码示例之间进行选择：

# 1 - 仍然连接到 MySQL

```
$memcache = new Memcache;
$memcache->connect('localhost', 11211) or die ("MEMCACHE: Could not connect!");
$db = mysql_connect('localhost', 'user', 'password') or die ("MySQL: Could not connect!");
mysql_select_db('database');

$sql = "SELECT id FROM table LIMIT 1";
$key = md5('query'.$sql);
//lookup value in memcache
$result = $memcache->get($key);
//check if we got something back
if($result == null) {
//fetch from database
$qry = mysql_query($sql) or die(mysql_error()." : $sql");
if(mysql_num_rows($qry)> 0) {
    $result = mysql_fetch_object($qry);
    //store in memcache for 60 seconds
    $memcache->set($key,$result,0,60);
   }
} 
```

# 2 - 在需要时立即连接到 MySQL

```
$memcache = new Memcache;
$memcache->connect('localhost', 11211) or die ("MEMCACHE: Could not connect!");

$sql = "SELECT id FROM table LIMIT 1";
$key = md5('query'.$sql);
//lookup value in memcache
$result = $memcache->get($key);
//check if we got something back
if($result == null) {

if(!$db){
    $db = mysql_connect('localhost', 'user', 'password') or die ("MySQL: Could not connect!");
    mysql_select_db('database');
}

//fetch from database
$qry = mysql_query($sql) or die(mysql_error()." : $sql");
if(mysql_num_rows($qry)> 0) {
    $result = mysql_fetch_object($qry);
    //store in memcache for 60 seconds
    $memcache->set($key,$result,0,60);
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T13:43:36.403

可行的方法是仅在需要时才连接到 mySQL（和其他东西）。在这种情况下，您可以减少应用程序在网络连接中所需的资源。并且您不会对数据库服务器施加负载。

一般经验法则：仅在需要时使用资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T13:52:58.560

如果速度很重要，请提前连接。开放的资源不是很大，但可能需要一段时间才能建立起来。

此外，通过尽早连接，您可以在应用程序启动时知道是否存在问题（例如，数据库服务器关闭），并且您可以确认一切正常，而不是在您本可以更早知道并在问题出现之前解决问题的一段时间后才泄露出来成为问题。

您可能想更进一步并运行心跳查询以断言数据库仍然存在，原因与此类似。

请注意，这种方法使您的应用程序*需要*启动数据库。您可以在两者之间做一些事情：在启动时获得连接，但如果它不可用，则回退到及时方法，这会给您更大的灵活性。这就是我要做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T14:33:32.127

我认为这取决于并发性。但是将连接缓存在线程安全池中会更好。

在许多 Web 应用程序中，建立数据库连接并将其放入线程安全池中，因为建立连接的成本很高。

似乎从 memcached 而不是直接从数据库中获取数据，因为它更快并且可以容纳这么多线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T14:44:08.330

查看您提供的代码（通常是上世纪风格的意大利面条），我会投票给第一个。
无论添加到程序流中的任何逻辑都会使您的代码复杂十倍。所以，最好让它尽可能简单。

或者，我什至建议不要使用 memcache，直到你学会了如何分离和封装不同的事物。
特别是因为缓存数据没有意义，您可以通过主键从 db 获取数据。

# android - Android：覆盖意图的选项菜单

> ID：14011232
> 
> 赞同：0
> 
> 时间：2012-12-23T13:14:20.577
> 
> 标签：android, android-camera, android-menu, android-camera-intent

假设我通过使用和意图（MediaStore.ACTION_IMAGE_CAPTURE）编写了一个相机应用程序，并且我注意到当我运行该应用程序时，选项菜单显示“编辑快捷方式”，我如何添加到此选项菜单或完全覆盖选项菜单以我自己的？

以下是我的代码片段：

```
public class GPSCam extends Activity implements LocationListener,
    GpsStatus.Listener {

private Intent camIntent;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_gpscam);
               ...
               ...
    this.startCamera();
}

protected void startCamera() {
              ...
    // create camera intent
    camIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    // define where to keep the photo
    camIntent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);

    // this method will call onActivityResult() upon finishing an activity
    // i.e. image captured
    startActivityForResult(camIntent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);
}
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
        if (resultCode == RESULT_OK) {
                  ...
                  ...
                  ... 
```

} }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:19:08.893

您不能修改其他应用程序的选项菜单。如果您不想使用其他应用程序拍照，欢迎您使用该`Camera`对象并自己拍照。

# web-services - RESTful 移动操作

> ID：14011234
> 
> 赞同：1
> 
> 时间：2012-12-23T13:14:57.440
> 
> 标签：web-services, http, rest, web-applications

我想创建一个简单的网络应用程序来跟踪谁为星期五早会带来蛋糕。

所以我想象有两个资源：*人员*和*日期*，每个日期分配一个人。

但是，例如，当我想将 Johns 第 42 周的作业转移到第 38 周并转移第 39-42 周的作业时，我会感到困惑，因为 rest 没有 MOVE 原语。

目前，我的计划是

```
POST http://rundstykkeliste.dk/week/38?person=John&move_from=42 
```

这是 RESTful 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:45:06.937

我认为您应该使用常规帖子，并且您的 API 用户要么修改人本身（该人应该带来蛋糕的日期），要么修改日期对象（分配给该日期的人）。但我不明白为什么你应该让这两个对象有如此奇怪的关系，或者允许 API 用户同时更改它们。

# python - 如何从另一个函数调用函数的参数作为Python中的变量

> ID：14011242
> 
> 赞同：-4
> 
> 时间：2012-12-23T13:15:51.947
> 
> 标签：python

```
def func1(arg1,arg2):
    do_something

def func2(arg3)
    print arg1
    print arg2 
```

如上所示，如何从 Python 中的另一个函数调用函数的参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T13:18:26.533

你不能这样做。毕竟这没有多大意义。现在这些函数甚至不以某种方式相互调用......

但即使`func1`被调用`func2`，如果没有一些涉及调用堆栈的极其讨厌的黑客攻击，它也是不可能的。

因此，如果您想从`func1`in访问参数，则`func2`需要在调用时将它们作为参数传递`func2`给它。

* * *

如果有人好奇，这里是使用`inspect`模块获取传递给调用函数的参数的字典的代码。**不要在任何生产代码中使用它！**

```
import inspect

def get_caller_args():
    frame = inspect.stack()[2][0]
    argspec = inspect.getargvalues(frame)
    return {x: argspec.locals[x] for x in argspec.args}

def func1(arg1, arg2):
    test = 'xxx'
    func2('moo')

def func2(arg):
    print "caller's args: %r" % get_caller_args()

func1('foo', 'bar') 
```

**输出：**

> 调用者的参数：{'arg1': 'foo', 'arg2': 'bar'}

请注意，此代码有一个无法避免的主要警告：如果`func1`更改值`arg1`或`arg2`将返回新值而不是初始值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T13:30:59.537

我不知道这是否对您有帮助，因为问题很不清楚，但是您可以通过嵌套函数定义来创建闭包，如下所示：

```
def func1(arg1,arg2):
  do_something()

  def func2(arg3)
    print arg1
    print arg2

  return func2

the_func2 = func1(foo, bar)
do_something_else()
the_func2(42) # prints foo and bar 
```

# matlab - 有没有正确的方法来获取比率的直方图？

> ID：14011243
> 
> 赞同：3
> 
> 时间：2012-12-23T13:16:22.207
> 
> 标签：matlab, math, statistics, histogram

我的问题如下；我有两个向量`u`和`v`。我计算了一个交叉比率表，如下所示：

```
[ u1/v1, u1/v2, u1/v3, u1/v4, ... ]
[ u2/v1, u2/v2, u1/v3, u2/v4, ... ]
[ u3/v1, u3/v2, u1/v3, u3/v4, ... ]
[ u4/v1, u4/v2, u1/v3, u4/v4, ... ]
[ ... 
```

我现在的任务是计算这些交叉比率的直方图。然而，很明显，使用线性直方图箱没有意义 - 任何低于 1 的比率都会比高于 1 的比率具有低得多的样本分辨率，并且比率分布的长尾性质意味着我选择的箱将是被大值严重扭曲。

所以，我的问题是：对于这种情况，直方图箱（或等效地，适用于数据的转换）的选择是否“正确”或至少更好？我可以看到 [柯西分布](http://en.wikipedia.org/wiki/Cauchy_distribution "柯西分布")可能是相关的，尽管我很确定如何。

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T16:38:14.067

尝试绘制比率对数的直方图。只要您的值严格为正，并且具有 log(u1/v1) = -log(v1/u1) 的良好属性，这就会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T13:36:22.440

您可以使用 手动校准直方图的 bin `histc`。

# makefile - 使用 foreach 的 sub make 随机失败（具有更高的 J 因子）

> ID：14011246
> 
> 赞同：0
> 
> 时间：2012-12-23T13:16:34.470
> 
> 标签：makefile, gnu-make

我正在使用 GNU `make`，其中我有一个顶级`makefile`，它调用另一个`makefile`，用于不同类型的构建，例如：

```
LIST_OF_TYPES: 32 64 ...

tgt-name: deps
          $(foreach i,$(LIST_OF_TYPES), \
            $(MAKE) -f $(MY_MAKEFILE) ARCH=$i mylib;) 
```

当以诸如等更高的`j`因素运行时`-j100`，其中一个构建失败，但返回值仍然`0`如此，我无法确定构建是否真的有效！我使用`foreach`构造的方式有什么问题吗？或者它只是导致问题的更高`j`版本`foreach`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:13:29.123

您列出的顶级 makefile 是安全的`-j`（尽管非常次优）。展开后`$(foreach...)`，`make`有效地看到：

```
tgt-name: deps
    $(MAKE) -f $(MY_MAKEFILE) ARCH=32 mylib; $(MAKE) -f $(MY_MAKEFILE) ARCH=64 mylib; ... 
```

当这些子 make 之一失败时（由于对 的错误处理`-j`），该失败不会报告给顶级 make。你需要使用类似的东西：

```
tgt-name: deps
    $(MAKE) -f $(MY_MAKEFILE) ARCH=32 mylib && $(MAKE) -f $(MY_MAKEFILE) ARCH=64 mylib && ... && : 
```

如果前一个命令失败，`&&`则告诉 bash 立即退出并出现错误。（`:`最后是 bash 内置函数，它只会发出一个成功的退出指令——它会简化你的`$(foreach ...)`.）

* * *

*编辑：*

当然，正确的方法是使用 make 依赖项，而不是 shell 中的串行处理。你想*看到*类似的东西：

```
tgt-name: # default target

.PHONY: target-32
target-32: deps
    $(MAKE) -f ${MY_MAKEFILE} arch=32 mylib

.PHONY: target-64
target-64: deps
    $(MAKE) -f ${MY_MAKEFILE} arch=64 mylib

# etc. etc.

tgt-name: target-32 target-64
    @echo $@ Success 
```

这是`-j`安全的。在`-j` *make下会*`target-%` *同时*make所有的。好的。（尽管在这种情况下，您似乎`$MY_MAKEFILE`不安全`-j`（顽皮！）。）一些宏来替换样板：

```
LIST_OF_TYPES := 32 64 ...
LIST_OF_TARGETS := $(add-prefix,target-,${LIST_OF_TYPES})

tgt-name: # default target

.PHONY: ${LIST_OF_TARGETS}
${LIST_OF_TARGETS}: target-%: deps # Static Pattern Rule will (conveniently) set $*
    $(MAKE) -f ${MY_MAKEFILE} arch=$* mylib

tgt-name: ${LIST_OF_TARGETS}
    @echo $@ Success 
```

PS我怀疑你应该将*tgt-name*标记为`.PHONY`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:53:45.053

我从来没有见过这种用法`foreach`，但它似乎对你有用。通常我使用`bash`for 循环

```
tgt-name: deps
    for i in $(LIST_OF_TYPES); do $(MAKE) -f $(MY_MAKEFILE) ARCH=$$i mylib; done 
```

但这不是问题，因为在任何一种情况下，`make`s 都是按顺序运行的，AFAICS。

由于您构建了一个库，因此可能会同时将两个对象插入到存档中。发生这种情况时，存档可能会损坏。

与每次并行执行一样，无论是创建作业还是线程，您都必须保护共享资源（在您的情况下是存档）。您必须在库构建结束时添加对象或使用某种锁（例如[`man lockfile`](http://linux.die.net/man/1/lockfile)或类似的）保护插入。

当然，可能还有其他问题。注意同时访问共享资源（目标文件、档案等）或不完整定义的依赖关系。

*更新*：

`foreach`似乎*不是*问题。设置`LIST_OF_TYPES`为单一类型（例如`32`仅），然后执行`make -j100 mylib`. 如果问题在于构建单个存档，那么它也只会因一种类型而失败。

您也可以使用`make ARCH=32 -j100 mylib`. 这也应该显示问题。

# sqlite - 带有 sqlite3 的简单 sinatra 应用程序在使用 WEBrick 时有效，但在使用 apache 和乘客时无效

> ID：14011247
> 
> 赞同：1
> 
> 时间：2012-12-23T13:16:35.013
> 
> 标签：sqlite, apache2, sinatra, passenger

当我的应用程序尝试写入我的 sqlite3 数据库时，我收到“500 内部服务器错误”消息。

当我使用 WEBbrick 时一切正常，但是当我使用 Apache 和Passenger 时出现上述错误。我的应用程序加载第一页，但在尝试 POST 时失败。

这是我进行所有设置的方式：

真棒.rb 文件：

```
require 'sinatra'
require 'data_mapper'
require 'dm-core'
require 'dm-migrations'
require 'slim'

APP_ROOT = File.expand_path(File.dirname(__FILE__))
DataMapper::setup(:default, "sqlite3://#{APP_ROOT}/emails.db")

class Email
    include DataMapper::Resource
    property :id, Serial
    property :email, String, :required => true
end
DataMapper.finalize

get '/' do
    slim :index
end

post '/add' do
    Email.create params[:email]
    redirect '/'
end 
```

config.ru 文件：

```
require '/var/www/awesome'

root_dir = File.dirname(__FILE__)

set :environment, ENV['RACK_ENV'].to_sym
set :root, root_dir
set :app_file, File.join(root_dir, 'awesome.rb')
disable :run

run Sinatra::Application 
```

httpd.conf 文件：

```
<VirtualHost *:80>
  ServerName foo.com
  DocumentRoot /var/www/public
  <Directory /var/www/public>
    AllowOverride None
    Options FollowSymLinks
    Options -MultiViews
    Order Allow,Deny
    Allow from all
  </Directory>
</VirtualHost> 
```

这是我的 apache2.conf 文件的最底部：

```
LoadModule passenger_module /usr/local/rvm/gems/ruby-1.9.3-p327/gems/passenger-3.0.18/ext/apache2/mod_passenger.so
PassengerRoot /usr/local/rvm/gems/ruby-1.9.3-p327/gems/passenger-3.0.18
PassengerRuby /usr/local/rvm/wrappers/ruby-1.9.3-p327/ruby 
```

我还授予组 www-data 对 /var/www 的写入权限

- 更新 -

这是“ps axu | grep Pass”命令的输出：

```
root     28373  0.0  0.7 220936  1884 ?        Ssl  13:15   0:00 PassengerWatchdog
root     28377  0.1  1.0 2067100 2528 ?        Sl   13:15   0:10 PassengerHelperAgent
root     28379  0.0  3.8 111856  9508 ?        Sl   13:15   0:00 Passenger spawn server                                                                                                                                            
nobody   28382  0.0  1.8 169332  4632 ?        Sl   13:15   0:00 PassengerLoggingAgent 
```

我以 root 用户身份运行所有内容。这只是一个测试服务器，我想先让一切正常工作。我之前在安装 ruby​​ 系统时遇到了麻烦，所以我从一个干净的服务器重新开始，我没有添加任何其他用户。

--更新2--

emails.db 已经设置为每个人都可以使用 chmod 777 阅读它，但我只是将其更改为 chmod 666。这是我的 ls -l 输出：

```
-rw-rw-r-- 1 root     www-data   442 Dec 23 13:15 awesome.rb
-rw-rw-r-- 1 root     www-data   215 Dec 23 12:41 config.ru
-rw-rw-rw- 1 www-data www-data 12288 Dec 23 12:56 emails.db
-rw-rw-r-- 1 root     www-data    54 Dec 23 10:55 hello.rb
drwxrwxr-x 2 root     www-data  4096 Dec 22 14:50 log
drwxrwxr-x 2 root     www-data  4096 Dec 22 15:34 public
drwxrwxr-x 2 root     www-data  4096 Dec 23 12:03 tmp
drwxrwxr-x 2 root     www-data  4096 Dec 22 17:16 views 
```

然后我用“/etc/init.d/apache2 restart”重新启动了 apache。我知道从 chmod 777 到 chmod 666 不会解决我的问题，但它可能更安全一些。我重新运行了我的应用程序，但仍然收到相同的“HTTP 错误 500（内部服务器错误）：服务器尝试完成请求时遇到了意外情况。” 我很确定它仍然与 apache 和 sqlite3 有关，因为当我注释掉“Email.create params[:email]”行时，我没有收到错误。

--更新3--

这是“tail -f /var/log/apache2/error.log”的输出：

```
96.18.233.137 - - [24/Dec/2012 20:46:54] "GET / " 200 706 0.0274
96.18.233.137 - - [24/Dec/2012 20:46:54] "GET /favicon.ico " 404 18 0.0013
96.18.233.137 - - [24/Dec/2012 20:47:01] "POST /add " 14 - 0.0046 
```

这就是它所显示的全部。铬显示：

```
Request Method:POST
Status Code:500 Internal Server Error 
```

# javascript - 格式化为仅包含 unicode 字符的字母数字

> ID：14011248
> 
> 赞同：1
> 
> 时间：2012-12-23T13:16:39.640
> 
> 标签：javascript, regex, unicode

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T13:20:52.203

Javascript regular expressions don't support unicode properties. You have to add explicit unicode ranges to your expression. For example, the range for Georgian is 10A0-10FF, so to replace everything that is not a Latin or Georgian character, you need something like

```
val.replace(/[^\w\u10A0-\u10FF]/g, '') 
```

[This tool](http://kourge.net/projects/regexp-unicode-block) can help you further.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T13:22:40.757

You can specify allowed characters ranges manually, or you can use some library like [XRegExp](http://xregexp.com/).

# swing - getSelectedRow 方法不断返回第 0 行

> ID：14011252
> 
> 赞同：-1
> 
> 时间：2012-12-23T13:16:54.750
> 
> 标签：swing

我尝试从 jTable 中选择一行并将值存储到 topicId 中。这是我的代码。

```
 jTable.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent e) {
            if (jTable.getSelectedRow() >= 0 && jTable.getValueAt(jTable.getSelectedRow(), 0) != null) {
                    topicId = (Integer)jTable.getValueAt(jTable.getSelectedRow(), 0);}

            System.out.println(topicId);
                eForumTopics topics = new eForumTopics(topicId);
                topics.retrieveThread();
                getJFrame().dispose();
                eForumThreadContent myWindow = new eForumThreadContent(topicId);
                myWindow.getJFrame().setVisible(true);
            }
        });
    } 
```

这是我的滚动窗格代码。

```
 private JScrollPane getJScrollPane() {
    if (jScrollPane == null) {
        jScrollPane = new JScrollPane();
        jScrollPane.setBounds(new Rectangle(75, 220, 800, 450));
        jScrollPane.setViewportView(getJTable());
    }
    return jScrollPane;
} 
```

这里是 jTable 的代码。

```
 private JTable getJTable() {
    if (jTable == null) {
        Vector columnNames = new Vector(); // Vector class allows dynamic
                                            // array of objects
        Vector data = new Vector();
        try {
            DBController db = new DBController();
            db.setUp("IT Innovation Project");
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver").newInstance();
            String dsn = "IT Innovation Project";
            String s = "jdbc:odbc:" + dsn;
            Connection con = DriverManager.getConnection(s, "", "");
            String sql = "Select topic_title,topic_description,topic_by from forumTopics WHERE topic_category = '"+category+"'";
            java.sql.Statement statement = con.createStatement();
            ResultSet resultSet = statement.executeQuery(sql);
            ResultSetMetaData metaData = resultSet.getMetaData();
            int columns = metaData.getColumnCount();
            for (int i = 1; i <= columns; i++) {
                columnNames.addElement(metaData.getColumnName(i));
            }
            while (resultSet.next()) {
                Vector row = new Vector(columns);
                for (int i = 1; i <= columns; i++) {
                    row.addElement(resultSet.getObject(i)); 
                }
                data.addElement(row);
            }
            resultSet.close();
            ((Connection) statement).close();
        } catch (Exception e) {
            System.out.println(e);
        }
        jTable = new JTable(data, columnNames);
        TableColumn column;
        for (int i = 0; i < jTable.getColumnCount(); i++) {
            column = jTable.getColumnModel().getColumn(i);
            if (i == 1) {
                column.setPreferredWidth(400); // second column is bigger
            }else {
                column.setPreferredWidth(200);
            }
        }
        String header[] = { "Title", "Description", "Posted by" };

        for (int i = 0; i < jTable.getColumnCount(); i++) {
            TableColumn column1 = jTable.getTableHeader().getColumnModel()
                    .getColumn(i);

            column1.setHeaderValue(header[i]);
        }
        jTable.getTableHeader().setFont( new Font( "Dialog" , Font.PLAIN, 20 ));
        jTable.getTableHeader().setForeground(Color.white);
        jTable.getTableHeader().setBackground(new Color(102, 102, 102));
        jTable.setEnabled(false);
        jTable.setRowHeight(100);
        jTable.getRowHeight();
        jTable.setFont( new Font( "Dialog" , Font.PLAIN, 18 ));
        jTable.setAutoResizeMode(JTable.AUTO_RESIZE_OFF); 
```

我不确定我的表格或滚动窗格是否有问题。每当我在 jTable 中选择任何行时，例如 4 或 5 或 6，结果都会不断返回我第 0 行。有人可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T13:32:35.597

添加鼠标侦听器以将所选行存储在字段中是没有意义的。该表知道其选定的行，而且，选择可以在不使用鼠标的情况下更改。

如果您想在每次选择更改时执行某些操作（例如加载所选行的详细信息），请添加一个选择侦听器：

```
table.getSelectionModel().addListSelectionListener(new ListSelectionListener() {
    @Override
    public void valueChanged(ListSelectionEvent e) {
        if (!e.getValueIsAdjusting()) {
            int viewRow = table.getSelectedRow();
            if (viewRow >= 0) {
                int modelRow = table.convertRowIndexToModel();
                Integer topicId = tableModel.getTopicIdAtRow(modelRow);
                // todo load the details for topicId
            }
        }
    }
}); 
```

# php - 优化数据可视化 Web 应用程序的性能

> ID：14011253
> 
> 赞同：1
> 
> 时间：2012-12-23T13:17:04.410
> 
> 标签：php, javascript, ajax, json, performance

我正在重写 3 年前编写的数据可视化 Web 工具。从那时起，浏览器的 JavaScript 引擎变得更快，所以我想将部分工作从服务器转移到客户端。

在页面上，数据在表格和地图（或图表）中可视化，它使用相同的数据，但方式不同，因此准备显示数据的两种算法是不同的。

在用户与数据下拉选择器（3 主 + 2 子取决于 3 主）的每次交互之前，发送了 3 个 ajax 请求，php 完成所有工作并仅发送回必要的数据（在 html 中用于表/xml图表）非常小的响应，没有性能问题，并且 javascript 正在附加响应，并且所做的只是追逐更改事件。

所以性能还可以，但是每次更改标准时，用户都必须等待 ajax 响应：/

现在我的想法是在一个 ajax 请求中发回一个 json 对象，仅在主要 3 个标准组合的每次更改时，然后让 javascript 填充表格中的数据和 ajaxsuccess 上的图表/地图，然后更改 2子标准。

我犹豫的是服务器发送的json的结构，payload的平衡。

事实上，如果只需要一种算法来创建所需的 json 结构来显示来自原始数据的数据，我会让 php 将数据处理到这个对象中，以便 javascript 处理它而无需任何额外的处理；但是有2个。

所以

*   如果我让 php 处理数据以创建 2 个对象（一个用于表/一个用于图表），我会将 json 响应的大小加倍并增加客户端的内存使用量；我不喜欢这种方法，因为这两个对象包含相同的数据，只是结构不同且冗余是邪恶的，不是吗？

*   如果我发送原始对象并让 javascript 搜索要显示的内容以及我在哪里为客户端提供了很多工作 - 这也是在每个子标准更改时（或者我可以在 ajaxsuccess 上创建所有 json 对象，以便它们准备好此子标准更改的情况？）-对于使用旧浏览器/小内存的用户，我有点担心...

（未经处理的原始 json 对象，根据标准在 3kb 和 12kb 之间变化，在 500 和 2000 条记录之间）

我没有找到最好的方法......

因此，对于将单个原始数据转换为多个结构化对象的作业，您是否需要 php（增加响应大小并发送冗余数据）或 javascript（增加 javascript 有效负载）来处理原始数据？

非常感谢您的意见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T16:45:50.483

我找到了一个合适的解决方案，所以我会回答我自己的问题。

我遵循了@Daverandom 的建议：

*   PHP 发送原始数据（以及几个取决于主要标准组合的参数）

*   JavaScript 处理原始数据并将其呈现在页面中

*   如果子标准发生更改，JavaScript 会重新处理原始数据，因为在测试时循环过程似乎非常快并且不会冻结浏览器，因此无需将结构化对象保留在范围内

*   积极的缓存标头与 JSON AJAX 响应一起发送（这些数据永远不会改变 - 每年只会添加新记录），以防用户重新查询已经查询过的数据：因此原始数据不会保留在 JavaScript 范围内不显示

*   最重要的是，由 php 回显的 JSON 字符串被缓存在服务器上（因为这些数据永远不会改变），因此这减少了数据库查询并提高了响应时间

最终的代码整洁、易于维护，并且应用程序完美无缺。

感谢@Daverandom 的帮助。

# django - django：从外键获取对象

> ID：14011255
> 
> 赞同：4
> 
> 时间：2012-12-23T13:17:30.350
> 
> 标签：django, model

假设以下模型类，

> ```
>  class Bookmark(models.Model):   
>      owner = models.ForeignKey(UserProfile,related_name='bookmarkOwner')
>      parent = models.ForeignKey(UserProfile,related_name='bookmarkParent')
>      sitter = models.ForeignKey(UserProfile,related_name='bookmarkSitter') 
> ```

如何`sitter`从对象中获取`owner`对象？

```
user = UserProfile.objects.get(pk=1)

UserProfile.objects.filter(bookmarkOwner=user) 
```

返回 empty `tuple`，我无法指定`sitter`变量。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-23T14:03:17.217

如果你想避免使用循环，我相信你可以做这样的事情：

```
pks = some_user_profile.bookmarkOwner.values_list('sitter', flat=True)
sitters = UserProfile.objects.filter(pk__in=pks).all() 
```

或者，您可能希望尝试设置多对多字段并使用该`through`参数。请参阅 Django 文档：[https ://docs.djangoproject.com/en/2.0/ref/models/fields/#manytomanyfield](https://docs.djangoproject.com/en/2.0/ref/models/fields/#manytomanyfield)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T13:19:46.423

你应该做

```
objs = Bookmark.objects.filter(owner=user)
# This will return all bookmarks related to the user profile.

for obj in objs:
    print obj.owner # gives owner object
    print obj.parent # gives parent object
    print obj.sitter # gives sitter object 
```

如果用户配置文件只有一个 Bookmark 对象（没有多个条目）。然后你应该改用`.get`方法（它返回一个对象）。

```
obj = Bookmark.objects.get(owner=user)
print obj.owner
print obj.parent
print obj.sitter 
```

# javascript - 从另一个 div 更改倍数 div 类

> ID：14011261
> 
> 赞同：1
> 
> 时间：2012-12-23T13:17:48.893
> 
> 标签：javascript, jquery, html, css, javascript-events

我正在尝试使用另一个元素中的 onmouseover 函数将类名更改（最好是添加）多个 div 。这两个元素没有相互嵌套，所以我不能（或至少不）认为我可以使用纯 CSS 来做到这一点。我正在简化以下代码以使其更易于阅读。“项目”的实际 html 有点嵌套。希望这不会是一个问题

```
<ul id="buttons">
   <li class="a">button a</li>
   <li class="b">button b</li>
</ul>

<div id="items">
    <div class="item-a"></div>
    <div class="item-b"></div>
    <div class="item-b"></div>
    <div class="item-a"></div>
    <div class="item-b"></div>
</div> 
```

所以基本上我想要做的是当我用鼠标悬停“li”元素时，div“items”中的相应类将一个类添加到自身（因此按钮中的类“a”会添加一个类“悬停”到所有“item-a”类，等等）。

我对 javascript/jquery 还很陌生。到目前为止，我设法使用 Id 而不是类来完成它，但由于 ID 必须是唯一的，所以这不是我需要的。代码是：

```
onmouseover="document.getElementById('item-a').className = 'hover';" 
```

这行得通。只有一个 div （第一个具有该 ID），但它工作，所以我试图将它从 Id 更改为 ClassName 但它没有工作

```
onmouseover="document.getElementsByClassName('item-a').className = 'hover';" 
```

而且，如果上面的代码可以工作，它会改变类，而我更愿意添加它（然后用 onmouseout 函数删除它）

作为参考，在我进行的大量搜索中，我还尝试了这个链接 [Trigger the css:hover event with js](https://stackoverflow.com/questions/10680446/trigger-the-csshover-event-with-js) 试图使其适应我的情况

```
$(window).load(function() {
 $('.a').hover(function(){
    $('.item-a').addClass('hover');
});
} 
```

没有结果。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T13:24:59.713

我建议：

```
$('#buttons li').hover(function(){
    $('.item-' + this.className).addClass('hover');
},
function(){
    $('.item-' + this.className).removeClass('hover');
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/MQLjx/)。

参考：

*   [`addClass()`](http://api.jquery.com/addClass/).
*   [`hover()`](http://api.jquery.com/hover/).
*   [`removeClass()`](http://api.jquery.com/removeClass/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T13:42:19.967

稍微调整一下你的标记，你可以用纯 CSS 来做：

```
<ul id="buttons">
   <li class="a">button a</li>
   <li class="b">button b</li>
   <li class="items">
       <div class="item-a"></div>
       <div class="item-b"></div>
       <div class="item-b"></div>
       <div class="item-a"></div>
       <div class="item-b"></div>
   </li>
</ul>​​​​​

.a:hover ~ li .item-a {
    background: red;
}

.b:hover ~ li .item-b {
    background: blue;
} 
```

[演示](http://jsfiddle.net/KELZY/)

# php - 文件上传脚本不起作用

> ID：14011264
> 
> 赞同：-2
> 
> 时间：2012-12-23T13:18:09.420
> 
> 标签：php, html, post, file-upload, undefined

我有这个 HTML 代码用于将文件发布到我的上传脚本：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>CONTISEC PORTAL - NEW USER</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="buttcss/gstyle_buttons.css" type="text/css"  media="screen">
    <link rel="stylesheet" type="text/css" href="usercon.css" />
</head>

<body>

    <div id="page-wrap">

        <p>CREATE NEW CLIENT USER ACCOUNT BY ENTERTING CLIENT REFERENCE NUMBER (supplied by Pershing) AND DESIRED USERNAME.</p>

        <div id="contact-area">

            <form method="post" action="fileproc.php">
                <enctype="multipart/form-data">
                <label for="client_ref">BROWSE:</label>
                <input type="file" name="file" id="file" />
                <label for="client_ref">SELECT FILE:</label>
                <select name="file"> 
                <option value="assets" >ASSETS (DAILY)</option>
                <option value="stock_names" >STOCK_NAMES (DAILY)</option>
                <option value="client_names" >CLIENT_NAMES</option>
                </select>

                <div class="buttons">

                <button class="action redbtn" type="submit"><span class="label">SUBMIT</span></button>
            </form>

            <div style="clear: both;"></div>

        </div>

    </div>

</body>

</html> 
```

这是我的上传脚本（来自 w3 学校）：

```
<?php

if ($_FILES["file"]["error"] > 0)
  {
  echo "Error: " . $_FILES["file"]["error"] . "<br>";
  }
else
  {
  echo "Upload: " . $_FILES["file"]["name"] . "<br>";
  echo "Type: " . $_FILES["file"]["type"] . "<br>";
  echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
  echo "Stored in: " . $_FILES["file"]["tmp_name"];
  }

?> 
```

但是，当页面加载时，它会显示“未定义索引”错误。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:24:38.030

将以下内容添加到您的表单打开标记中。上传文件时需要

```
enctype="multipart/form-data" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T13:36:00.430

Sam 您的文件选择字段和选择字段的名称相同，这一定是导致问题的原因。 `<input type="file" name="file" id="file" />`

`<select name="file">`

# html - 提交时未发布的 HTML 选择元素

> ID：14011265
> 
> 赞同：0
> 
> 时间：2012-12-23T13:18:23.137
> 
> 标签：html, jsp, post, get

我正在使用 HTML 和 JSP。

我有以下表格：

```
<form   name="test" id="test" method="get" ACTION="result.jsp">

<input id="enteredGene" type="text" name="enteredGene" autocomplete="off" Style="position:absolute; top: 63px; left: 295px; width: 115px; margin-top: 6px; height: 22px; right: -4px;"/><br />

<input type="text" id="microarrayFileName" name="microarrayFileName" Style="position:absolute; top: 209px; left: 133px; width: 275px; margin-top: 6px; height: 22px; right: 250px;"  oninput="enableSubmit()"/><br />

 <select name= "insertGenes" id="insertGenes"  multiple="multiple" style="position:absolute; top: 103px; left: 138px; width: 275px; height: 71px;" onfocus="enableRemoveButton()">
         </select>
</form> 
```

我的问题是，当我提交表单时，只有前 2 个标签的“文本”类型的标签被发布。名称为“insertGenes”的“select”元素未发布。我通过查看获取列表知道这一点。

它只显示了这一点：

```
http://localhost:8080/geneOntology/result.jsp?enteredGene=&microarrayFileName=GSM34635.pad 
```

为什么选择元素没有发布？我还尝试在提交后获取它的值，但发现它为 NULL。

我尝试添加其他选择元素，它们都有同样的问题。任何人都可以帮忙吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T13:22:30.383

您的选择项没有`<option> ..</option>`元素

# java - Stackoverflow Like URLS with Struts2 或 JSP

> ID：14011268
> 
> 赞同：2
> 
> 时间：2012-12-23T13:19:00.457
> 
> 标签：java, jsp, url-rewriting, struts2

我注意到 SO 生成它的 url 非常好，比如说在创建问题时，url 是这样的`http://stackoverflow.com/questions/ask`或者在查看问题时`http://stackoverflow.com/questions/QUESTIONNUM/some-question-title`

Stackoverflow 是如何实现如此优雅的 url 的，它的 url 中没有任何查询字符串，即使没有查询字符串，它仍然可以识别正在访问的页面或问题编号。我想在我的应用程序中实现这样的 url。

我的问题是如何在应用程序中实现这一点？我正在使用 Apache Tomcat 和 Struts2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T13:25:47.517

StackOverflow 是用[ASP.NET MVC](http://www.asp.net/mvc)构建的。它使用[ASP.NET 路由](http://msdn.microsoft.com/en-us/library/cc668201%28v=vs.100%29.aspx)。这个 url 的重要部分是`QUESTIONNUM`. 这就是用来查询数据库和检索问题编号的。问题标题是完全任意的。例如，这两个 url 都指向完全相同的位置：

*   [`https://stackoverflow.com/questions/14011268/stackoverflow-like-urls-with-struts2-or-jsp`](https://stackoverflow.com/questions/14011268/stackoverflow-like-urls-with-struts2-or-jsp)
*   [`https://stackoverflow.com/questions/14011268/foo-bar-baz`](https://stackoverflow.com/questions/14011268/foo-bar-baz)

因此，基本上，当生成给定问题的链接时，问题 ID 用于从数据库中检索问题详细信息（例如问题的标题），并使用 ASP.NET MVC 中的 HTML 帮助程序构建正确的 url。由于问题的标题可能包含任意字符，因此通过 a 过滤此标题[`regular expression`](https://stackoverflow.com/a/25486/29407)以删除危险字符并将其替换为安全的等效字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T07:24:43.593

您始终可以编写自己的[ActionMapper](https://svn.apache.org/repos/asf/struts/struts2/trunk/core/src/main/java/org/apache/struts2/dispatcher/mapper/ActionMapper.java)并使用而不是默认映射器，如下所示：

```
<bean type="org.apache.struts2.dispatcher.mapper.ActionMapper" name="myMapper" class="com.company.MyActionMapper" />
<constant name="struts.mapper.class" value="myMapper" /> 
```

# c# - MVC UML 类图

> ID：14011271
> 
> 赞同：12
> 
> 时间：2012-12-23T13:19:27.937
> 
> 标签：c#, asp.net-mvc, uml, class-diagram

我必须在一个新项目上工作，用 C# mvc 编写，我想做的第一件事是创建一个 UML 类图。有没有一个例子说明如何做到这一点？大多数示例显示一个控制器具有一个视图和一个模型。但在这个项目中，每个控制器有多个视图和多个 ModelDto，谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-23T15:23:19.607

您可以使用 MS visio 或任何其他 UML 工具执行以下操作。

**只是一个示例如下所示**（方法和属性应该不同）

![在此处输入图像描述](../Images/057561056bbde2417274d96325ecc3e8.png)

像上面一样，您可以扩展上图以获得每个控制器的更多视图和模型。

**即**在 MVC 中，您可以在 Controller 中拥有许多 Action 方法，以及每个 Action 方法的相关视图和模型（通常）。

有关更多详细信息，请查看[**模型视图控制器设计模式**](http://www.codeproject.com/Articles/42830/Model-View-Controller-Model-View-Presenter-and-Mod)

我希望这对你有帮助。

# java - 从另一个 Java 程序运行 Hadoop 作业

> ID：14011279
> 
> 赞同：2
> 
> 时间：2012-12-23T13:20:14.283
> 
> 标签：java, hadoop, mapreduce

我正在编写一个程序，它接收映射器/减速器的源代码，动态编译映射器/减速器并用它们制作一个 JAR 文件。然后它必须在 hadoop 集群上运行这个 JAR 文件。

对于最后一部分，我通过我的代码动态设置了所有必需的参数。但是，我现在面临的问题是代码在编译时需要已编译的 mapper 和 reducer 类。但是在编译时，我没有这些类，它们稍后会在运行时被接收（例如，通过从远程节点接收到的消息）。我将不胜感激有关如何解决此问题的任何想法/建议？

在下面，您可以找到我最后一部分的代码，问题在于 job.setMapperClass(Mapper_Class.class) 和 job.setReducerClass(Reducer_Class.class) 需要类（Mapper_Class.class 和 Reducer_Class.class）文件存在于编译时间：

```
 private boolean run_Hadoop_Job(String className){
try{
    System.out.println("Starting to run the code on Hadoop...");
    String[] argsTemp = { "project_test/input", "project_test/output" };
    // create a configuration
    Configuration conf = new Configuration();
    conf.set("fs.default.name", "hdfs://localhost:54310");
    conf.set("mapred.job.tracker", "localhost:54311");
    conf.set("mapred.jar", jar_Output_Folder+ java.io.File.separator 
                            + className+".jar");
    conf.set("mapreduce.map.class", "Mapper_Reducer_Classes$Mapper_Class.class");
    conf.set("mapreduce.reduce.class", "Mapper_Reducer_Classes$Reducer_Class.class");
    // create a new job based on the configuration
    Job job = new Job(conf, "Hadoop Example for dynamically and programmatically compiling-running a job");
    job.setJarByClass(Platform.class);
    //job.setMapperClass(Mapper_Class.class);
    //job.setReducerClass(Reducer_Class.class);

    // key/value of your reducer output
    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(IntWritable.class);

    FileInputFormat.addInputPath(job, new Path(argsTemp[0]));
    // this deletes possible output paths to prevent job failures
    FileSystem fs = FileSystem.get(conf);
    Path out = new Path(argsTemp[1]);
    fs.delete(out, true);
    // finally set the empty out path
    FileOutputFormat.setOutputPath(job, new Path(argsTemp[1]));

    //job.submit();
    System.exit(job.waitForCompletion(true) ? 0 : 1); 
    System.out.println("Job Finished!");        
} catch (Exception e) { return false; }
return true;
} 
```

已修改：所以我修改了代码以使用 conf.set("mapreduce.map.class, "my mapper.class") 指定映射器和化简器。现在代码编译正确，但执行时会引发以下错误：

ec 24, 2012 6:49:43 AM org.apache.hadoop.mapred.JobClient monitorAndPrintJob 信息：任务 ID：attempt_201212240511_0006_m_000001_2，状态：失败 java.lang.RuntimeException：java.lang.ClassNotFoundException：组织的 Mapper_Reducer_Classes$Mapper_Class.class。 apache.hadoop.conf.Configuration.getClass(Configuration.java:809) 在 org.apache.hadoop.mapreduce.JobContext.getMapperClass(JobContext.java:157) 在 org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask. java:569) 在 org.apache.hadoop.mapred.MapTask.run(MapTask.java:305) 在 org.apache.hadoop.mapred.Child.main(Child.java:170)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T13:41:24.620

如果您在编译时没有它们，则直接在配置中设置名称，如下所示：

```
conf.set("mapreduce.map.class", "org.what.ever.ClassName");
conf.set("mapreduce.reduce.class", "org.what.ever.ClassName"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-26T02:37:23.470

问题是TaskTracker 看不到本地jRE 中的类。

我是这样想出来的（Maven项目）；

首先，将此插件添加到 pom.xml，它将构建您的应用程序 jar 文件，包括所有依赖项 jar，

```
 <build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-shade-plugin</artifactId>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>shade</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <filters>
                    <filter>
                        <artifact>*:*</artifact>
                        <excludes>
                            <exclude>META-INF/*.SF</exclude>
                            <exclude>META-INF/*.DSA</exclude>
                            <exclude>META-INF/*.RSA</exclude>
                        </excludes>
                    </filter>
                </filters>
                <finalName>sample</finalName>
                <!-- 
                <finalName>uber-${artifactId}-${version}</finalName>
                -->
            </configuration>
        </plugin>
    </plugins>
  </build> 
```

在 java 源代码中，添加这些行，它将包含您在 pom.xml 中通过上面的标记构建到 target/sample.jar 的 sample.jar。

```
 Configuration config = new Configuration();
      config.set("fs.default.name", "hdfs://ip:port");
      config.set("mapred.job.tracker", "hdfs://ip:port");

      JobConf job = new JobConf(config);
      job.setJar("target/sample.jar"); 
```

这样，您的任务跟踪器可以引用您编写的类，并且不会发生 ClassNotFoundException。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T14:24:01.643

您只需要对将动态创建的类的 Class 对象的引用。使用`Class.for name("foo.Mapper")`代替`foo.Mapper.class`

# c# - 将数组从 x 复制到 y 而不是 x 到 array.length

> ID：14011289
> 
> 赞同：0
> 
> 时间：2012-12-23T13:22:09.220
> 
> 标签：c#, arrays, split

我尝试以这样的方式复制数组，我可以用线程处理数组中的数据，但显然没有将数组拆分成更小的块（比如说 1 个数组 -> 4 个四分之一（4 个数组））。

我可以从指定的（int）起点找到副本并从头到尾复制所有前导数据的唯一方法，如果我使用多个线程来处理数据，它会使线程点无效。

这是显示我想要做的伪代码。

```
int array { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15 }
int split1 { 0, 1, 2, 3 }
int split2 { 4, 5, 6, 7 }
int split3 { 8, 9, 10, 11 }
int split4 { 12, 13, 14, 15 } 
```

或者让我们说数组的长度不能被平均分割

```
int array { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16 }
int split1 { 0, 1, 2, 3 }
int split2 { 4, 5, 6, 7 }
int split3 { 8, 9, 10, 11 }
int split4 { 12, 13, 14, 15, 16} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T13:29:59.613

> 我可以从指定的（int）起点找到副本并从头到尾复制所有前导数据的唯一方法，如果我使用多个线程来处理数据，它会使线程点无效。

很遗憾你没有展示那是哪种方法。*具有用于将数组的一部分*复制到另一个数组的[`Array.Copy`](http://msdn.microsoft.com/en-us/library/system.array.copy.aspx)各种重载。[这](http://msdn.microsoft.com/en-us/library/z50k9bft.aspx)可能是最有帮助的：

 *```
public static void Copy(
    Array sourceArray,
    int sourceIndex,
    Array destinationArray,
    int destinationIndex,
    int length
) 
```

或者，看看[`Buffer.BlockCopy`](http://msdn.microsoft.com/en-us/library/system.buffer.blockcopy.aspx)，它具有基本相同的签名 - 但值都是*字节*而不是数组索引。它也仅适用于基元数组。

另一种选择是根本不创建数组的副本——如果每个线程都知道它应该使用数组的哪个段，它可以直接访问它。您还应该研究[`Parallel.ForEach`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach.aspx)（和类似的方法）作为在更高级别轻松并行化操作的一种方式。*

# kineticjs - KineticJS 从图层中删除一个项目

> ID：14011290
> 
> 赞同：0
> 
> 时间：2012-12-23T13:22:17.987
> 
> 标签：kineticjs, removechild

我已经创建了一个我遇到的问题的小例子 - 我正在向图层添加一个矩形，如下所示（按下“添加”按钮时）。然后我可以通过按删除按钮删除相同的项目...

......到目前为止一切都很好......

现在我尝试添加另一个项目.. 但是，它不会再添加到图层中，尽管图层似乎仍然存在。

谁能看到我做错了什么？

```
<html>
    <head>
        <title>Add / Remove Blocks</title>

        <style>
          body {
            margin: 0px;
            padding: 0px;
          }
          #buttons > input {
            padding: 10px;
            display: block;
            margin-top: 5px;
          }
        </style>

        <!-- Include script files -->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script type="text/javascript" src="scripts/kinetic-v4.2.0.min.js"></script>
        <script type="text/javascript">
            var layer;
            var stage;

            $(document).ready(function() {
                // Create the stage
                stage = new Kinetic.Stage({
                    container: 'container',
                    width: 578,
                    height: 200
                });

                // Now add a new layer
                layer = new Kinetic.Layer();

                // add the layer to the stage
                stage.add(layer);
            });

            // Add a block to the screen
            function AddBlock()
            {
                // Create the name item
                var newItemName = "Block1";

                // Create the first block
                var rect = new Kinetic.Rect({
                    x: 100,
                    y: 100,
                    width: 10,
                    height: 10,
                    fill: 'black',
                    strokeWidth: 4,
                    id: newItemName,
                    name: newItemName
                  });

                // Add the block and draw it as well.
                layer.add(rect);
                layer.draw();
            }

            // Remove a block
            function RemoveBlock()
            {
                // Get the name
                var itemName = "Block1";

                // Get the shape
                var shape = stage.get(itemName)[0];

                // Now remove it
                layer.remove(shape);
            }
        </script>
    </head>
    <body>
        <div id="buttons">
            <input type="button" value="Add" id="Add" onclick="AddBlock();">
            <input type="button" value="Remove" id="Remove" onclick="RemoveBlock();">
        </div>
        <div id="container">&nbsp;</div>
    </body>
</html> 
```

TIA 寻求帮助！

保罗

编辑于：

仔细研究了一下，我的脚本中似乎有一些错误（如下所示） - 话虽如此，我只能通过更改脚本和我使用的 Kinetic 版本来解决这个问题：

所以 - 使用动力学版本 4.0.1...

我已将代码更改为：

```
// Remove a block
function RemoveBlock()
{
// Get the name
var itemName = ".Block1";

// Get the shape
var shape = layer.get(itemName)[0];

// Now remove it
layer.remove(shape);
layer.draw();
} 
```

但问题仍然存在 - 新版本的 Kinetic 会破坏事物吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:42:21.180

我相信问题出在参数`id: newItemName`上，根据[KineticJS 规范](http://kineticjs.com/docs/symbols/Kinetic.Rect.php)需要是唯一的

> {String} config.id 可选
> 的唯一 ID

```
var rect = new Kinetic.Rect({
                    x: 100,
                    y: 100,
                    width: 10,
                    height: 10,
                    fill: 'black',
                    strokeWidth: 4,
                    id: newItemName,
                    name: newItemName
                  }); 
```

但是如果你做一个jsfiddle可以说更多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T11:13:05.493

```
function UniqueId() {
       return Math.floor((1 + Math.random()) * 0x10000);

};

function DoTriangle() {
var id = UniqueId();
var triangle = new Kinetic.RegularPolygon({
    x: 20,
    y: 55,
    sides: 3,
    radius: 20,
    fill: 'black',
    draggable: true,
    stroke: 'black',
    strokeWidth: 1.5,
    lineJoin: 'bevel',
    id: id    

});

stage.add(layer.add(triangle));  

triangle.on('click', function(e){ 
   var shape = this.attrs.id;
    triangle.destroy(shape);
   layer.draw();

}); 
```

};

# javascript - 用于获取当前选定选项的脚本 onChange 不会让我在提交后更改选择

> ID：14011297
> 
> 赞同：0
> 
> 时间：2012-12-23T13:22:40.310
> 
> 标签：javascript, javascript-events

我正在尝试制作一个非常简单的表格来搜索我的学校项目（www.github.com/SieniMaagi/SPAS）中的课程。程序本身是用 Java 制作的，但我遇到的问题是我制作的这个小 Javascript 部分，所以我可以动态更改所选组织的获取参数（表单的另一个选择部分基于什么组织被选中）。

在按下提交之前它工作得很好，但是在你按下提交之后它不会让你改变选项。

我感谢任何花时间检查的人

Javascript：

```
<script>
function selectedOrganization() {
    var selectElem = document.forms[0].elements["org"];
    var value = selectElem[selectElem.selectedIndex].value;
    var href = location.href;
    if (href.indexOf("org=") !== -1) {
        var substr = href.substring(href.indexOf("org=") + 4);
        href.replace(substr, value);
    } else {
        href = href + "?org=" + value;
    }
    window.location.replace(href);
}
</script> 
```

的HTML：

```
<select name="org" onchange="selectedOrganization()">
<option value="" selected></option>
.... options with different values .....
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T14:32:21.957

从对您的问题的讨论来看，您想要做的是在组织发生变化时提交您的表单。这可以通过在选择列表的 onchanged 事件期间调用表单的提交方法来完成。

您已经正确连接了函数（来自您提供的示例 jsFiddle），因此您似乎真正需要做的就是从您的函数调用提交。

```
function selectedOrganization() {
    document.forms[0].submit();
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T15:41:17.557

您可以通过使用[data-attributes](http://html5doctor.com/html5-custom-data-attributes/)来完成整页刷新。当您在 中列出您的`<option>`标签时`<select name="dept">`，您可以为每个选项添加关于它属于哪个组织的额外信息。稍后我们可以利用这些信息来动态隐藏不需要的选项。

由于这种方法会影响 DOM，因此我真的建议您使用 jQuery 来完成它。我做了一个可以做到这一点的工作示例。

这是**HTML-part**，大部分是从您的 jsFiddle-example 复制的，但在每个部门选择中`data-org`添加了一个数据属性：`<option>`

```
<form name="search" action="search.jsp" method="get">
    Avainsana: <input type="text" name="kword" />
    <br /> Organisaatio:
    <select name="org">
        <option value="" >--valitse organisaatio</option>
        <option value="CHEM">Kemian tekniikan korkeakoulu</option>
        <option value="ECON">Kauppakorkeakoulu</option>
        <option value="ELEC">Sähkötekniikan korkeakoulu</option>
        <option value="ENG">Insinööritieteiden korkeakoulu</option>
        <option value="ERI">Erillinen opetus</option>
        <option value="SCI">Perustieteiden korkeakoulu</option>
        <option value="TaiK">Taiteiden ja suunnittelun korkeakoulu</option>

    </select>
    <br /> Osasto:
    <select name="dept">
        <option value="" >--valitse osasto</option>
        <option data-org="CHEM" value="T1010">Biotekniikan ja kemian tekniikan laitos</option>
        <option data-org="CHEM" value="T1020">Kemian laitos</option>
        <option data-org="CHEM" value="T1030">Materiaalitekniikan laitos</option>
        <option data-org="CHEM" value="T1040">Puunjalostustekniikan laitos</option>
        <option data-org="CHEM" value="CHEM-0">Korkeakoulun yhteiset kurssit</option>
        <option data-org="CHEM" value="ECON-0">Korkeakoulun kurssit</option>
        <option data-org="ECON" value="T4010">Automaatio- ja systeemitekniikan laitos</option>
        <option data-org="ECON" value="T4020">Elektroniikan laitos</option>
        <option data-org="ECON" value="T4030">Mikro- ja nanotekniikan laitos</option>
        <option data-org="ECON" value="T4040">Radiotieteen ja -tekniikan laitos</option>
        <option data-org="ECON" value="T4050">Signaalinkäsittelyn ja akustiikan laitos</option>
        <option data-org="ECON" value="T4060">Sähkötekniikan laitos</option>
        <option data-org="ELEC" value="T4070">Tietoliikenne- ja tietoverkkotekniikan laitos</option>
        <option data-org="ELEC" value="T4080">Metsähovin radiotutkimusasema</option>
        <option data-org="ELEC" value="ELEC-0">Korkeakoulun yhteiset kurssit</option>
        <option data-org="ELEC" value="T2020">Energiatekniikan laitos</option>
        <option data-org="ELEC" value="T2030">Koneenrakennustekniikan laitos</option>
        <option data-org="ELEC" value="T2040">Sovelletun mekaniikan laitos</option>
        <option data-org="ENG" value="T2050">Maankäyttötieteiden laitos</option>
        <option data-org="ENG" value="T2060">Rakenne- ja rakennustuotantotekniikan laitos</option>
        <option data-org="ENG" value="T2070">Yhdyskunta- ja ympäristötekniikan laitos</option>
        <option data-org="ENG" value="T2080">Lahden keskus</option>
        <option data-org="ENG" value="ENG-0">Korkeakoulun yhteiset kurssit</option>
        <option data-org="ENG" value="U91101">Avoin yliopisto</option>
        <option data-org="ENG" value="Eri-0">Erilliset kurssit</option>
        <option data-org="ENG" value="T3010">Lääketieteellisen tekniikan ja laskennallisen tieteen laitos</option>
        <option data-org="ENG" value="T3020">Matematiikan ja systeemianalyysin laitos</option>
        <option data-org="ENG" value="T3030">Mediatekniikan laitos</option>
        <option data-org="ERI" value="T3040">Teknillisen fysiikan laitos</option>
        <option data-org="SCI" value="T3050">Tietotekniikan laitos</option>
        <option data-org="SCI" value="T3060">Tietojenkäsittelytieteen laitos</option>
        <option data-org="SCI" value="T3070">Tuotantotalouden laitos</option>
        <option data-org="SCI" value="T3080">BIT-tutkimuskeskus</option>
        <option data-org="SCI" value="T3090">Kielikeskus</option>
        <option data-org="SCI" value="SCI-0">Korkeakoulun yhteiset kurssit</option>
        <option data-org="SCI" value="T2010">Arkkitehtuurin laitos</option>
        <option data-org="TaiK" value="A801">Elokuvataiteen ja lavastustaiteen laitos</option>
        <option data-org="TaiK" value="A802">Median laitos</option>
        <option data-org="TaiK" value="A803">Muotoilun laitos</option>
        <option data-org="TaiK" value="A805">Taiteen laitos</option>
        <option data-org="TaiK" value="TaiK-0">Korkeakoulun yhteiset kurssit</option>

    </select> <br />
    <input type="submit" name="search" value="Hae" />

</form>

<div id="debuginfo"></div> 
```

这个方便的花花公子**jQuery 片段**将执行实际的过滤和元素删除等操作。我在代码中添加了很多注释，以便您更好地理解它。

```
// First of all, get a copy of all the <select name="dept"> options.
// This is because we must DELETE those <option> elements to truly
// make them hidden, and we'd like to be able to put those elements
// back, too.
var originalDepartments = $('select[name="dept"]').clone();

// Listen to "change" event for the wanted <select>
$('select[name="org"]').change(function () {
    // Store the value of selected organisation to a variable
    var chosenOrganisation = $(this).val();

    // We have a handy dandy debug-div where we can output something
    $("#debuginfo").html('<p>You chose: ' + chosenOrganisation + '</p>');

    // Replace the element of <select name="dept"> with the one
    // stored to originalDepartments-variable, i.e. reset the state.
    $('select[name="dept"]').replaceWith(originalDepartments.clone());

    // Loop through every element inside a <select> with name-attribute "dept"
    $('select[name="dept"] option').each(function () {
        // The current DOM-element is tied to 'this', let's turn it into
        // a jQuery object
        var $this = $(this);

        // Get the data-org attribute to a variable here already.
        var dataOrg = $this.attr('data-org');

        // If the current data-org was empty, i.e. it wasn't an organisation,
        // don't do anything. Returning here means that this callback function
        // will exit and then it'll be called again by the each-function with
        // a new element as 'this'.
        if (!dataOrg) {
            return;
        }

        // Now, if the <option> has a data-attribute "data-org" that is
        // not of the same value as the chosen organisation, remove it.
        if (dataOrg !== chosenOrganisation && chosenOrganisation !== '') {
            $("#debuginfo").append('<div>Removed ' + $this.val() + '</div>');
            $this.remove();
        }
    });
}); 
```

只是为了真正总结一下，这里有一个小提琴演示了所有这一切：http: [//jsfiddle.net/VesQ/ytXsW/](http://jsfiddle.net/VesQ/ytXsW/)

# c# - .net 的混淆器和链接器

> ID：14011301
> 
> 赞同：0
> 
> 时间：2012-12-23T13:23:19.577
> 
> 标签：c#, .net, frameworks, linker, desktop-application

我需要开发一个非常轻量级的桌面应用程序，但不希望我的最终用户安装成熟的 .net 框架来运行它。我做了很多研究，我的发现是： 1\. 使用一些.net 链接器，我可以实现这个目标。其中一些是蝾螈、spoon.net（不是 100% 确定它的功能）、rustemsoft 等。 2\. 我遇到了两个工具：混淆器和链接器。现在我知道混淆器基本上用于消除代码的逆向工程可能性并保护它，但我发现许多混淆器还包括 .net 链接器功能

任何人都可以启发我，让我实现我的目标：在最终用户的 Windows 中运行我的 .net 开发的应用程序（确切地说是 XP - 虽然它已经完全失效），我可以使用一些像 rustemsoft 这样的混淆器来创建一个独立的和准备好部署不依赖于框架的 exe 了吗？

# shell - 在循环中获取文件作为脚本的输入

> ID：14011305
> 
> 赞同：0
> 
> 时间：2012-12-23T13:23:49.480
> 
> 标签：shell, loops

我有一堆文件和一个我在它们上面运行的脚本。该脚本将 2 个文件作为输入，所有文件均采用以下格式：a.txt1 a.txt2

现在我使用的脚本是这样的： foo.sh a.txt1 a.txt2

我必须在 250 对上运行此脚本（例如，a1.txt1 a1.txt2 到 a250.txt1 a250.txt2）我通过输入文件名手动执行此操作。我想知道有没有办法自动化这个过程。所有这些对都在同一个文件夹中，有没有办法在所有对上循环这个过程？

我希望我说清楚了。

谢谢你。

具体来说，这些是一些示例文件名：

*   T39_C.txt2
*   T39_D.txt1
*   T39_D.txt2
*   T40_A.txt1
*   T40_A.txt2
*   T40_B.txt1
*   T40_B.txt2
*   T40_C.txt1
*   T40_C.txt2
*   T40_D.txt1
*   T40_D.txt2
*   不匹配的.txt1
*   不匹配的.txt2
*   WT11_A.txt1
*   WT11_A.txt2
*   WT11_B.txt1
*   WT11_B.txt2
*   WT11_C.txt1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T13:27:42.980

假设所有文件都是成对的（即，`<something>.txt1`然后`<something>.txt2`你可以这样做：

```
1\. #!/bin/bash
2.
3\. for txt1 in *.txt1; do
4\.    txt2="${txt1%1}2"
5\.    # work on $txt1 and $txt2
6\. done 
```

在第 3 行，我们使用 shell glob 来获取所有以`.txt1`. 第 4 行，我们使用替换来删除 final`1`并将其替换为`2`. 真正的工作在第 5 行完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:29:53.533

*#对于当前目录中的每个文件，除了带有 .txt2* *
for i in `ls | sort | grep -v .txt2` do的文件

```
 *#THE FIRST .txt1 file is $i*
       first="$i"

       *#THE SECOND IS THE SAME EXCEPT WITH .txt2 SO WE REPLACE THE STRING*
       second=`echo "$i" | sed 's/.txt1/.txt2/g'`

        #WE MAKE THE ASSUMPTION FOO.SH WILL ERROR OUT IF NOT PASSED TWO PARAMETERS
        if !(bash foo.sh $first $second); then
        {
           echo "Problem running against $first $second"
         }
           else
        {
         echo "Ran against $first $second"
        }
        fi
done 
```

# javascript - 使用 Cookie 记住背景颜色/颜色

> ID：14011309
> 
> 赞同：1
> 
> 时间：2012-12-23T13:24:32.637
> 
> 标签：javascript, cookies, background-color, color-picker

我一直在寻找整个互联网，似乎找不到与我的需求相关的文章。我以前从未使用过 cookie，但我认为这可能是一项简单的任务......结果我错了：/

基本上我有一个颜色选择器，我希望浏览器在每次设置时记住颜色设置，以便当他们回到网站时背景颜色与他们离开时相同。

我正在使用这个颜色选择器[http://lindekleiv.bitbucket.org/colorpicker/](http://lindekleiv.bitbucket.org/colorpicker/)

使用此代码

```
$(document).ready(function(){
    $('#colorpicker').colorPicker({
    colorChange: function(e, ui) {
    $('body').css({backgroundColor: ui.color})
    }
    });

    $('#colorpicker').colorPicker('setColor', 0, 0, 6, 1);
}) 
```

在此先感谢您的帮助:) 克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T13:41:08.773

你可以使用我写的这个非常简单的 cookie 处理对象：

```
var Cookie = {
    set: function(name, value, days) {
        if (days) {
            var date = new Date();
            date.setTime(date.getTime()+(days*24*60*60*1000));
            var expires = "; expires="+date.toGMTString();
        } else { var expires = ""; }

        document.cookie = name + "=" + value + expires + "; path=" + location.pathname;
    },

    unset: function(name) { Cookie.set(name, "", -1); },

    get: function(name) {
        var search = new RegExp(name + "=([^;]*);");
        var result = search.exec(document.cookie);
        return result ? result[1] : undefined;
    }
}; 
```

所以你的代码会变成：

```
$(document).ready(function(){
    $('#colorpicker').colorPicker({
        colorChange: function(e, ui) {
            $('body').css({backgroundColor: ui.color});
            Cookie.set('bgc', $('body').css('background-color'), 365);
        }
    });

    $('#colorpicker').colorPicker('setColor', 0, 0, 6, 1);

    if (Cookie.get('bgc')) {
        $('body').css({ backgroundColor: Cookie.get('bgc') });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T14:05:38.830

其实很简单。您可以使用以下方法设置背景颜色的 cookie：

```
document.cookie = "color=" + color; 
```

回想一下使用这个保存的 cookie：

```
var color = loadCookies();

function loadCookies(){
    var cookie_string = document.cookie ;
    if (cookie_string.length != 0) {
        var cookie_value = cookie_string.match (
                    '(^|;)[\s]*' +
                    "color" +
                    '=([^;]*)' );
        return decodeURIComponent ( cookie_value[2] ) ;
    }
} 
```

# php - 本地主机中的 PHP 解析错误

> ID：14011312
> 
> 赞同：0
> 
> 时间：2012-12-23T13:24:43.167
> 
> 标签：php, parse-error

下面的代码正在运行我的代码文件的一部分，并且该文件在我的服务器中运行完美，而当我尝试使用 WAMP 服务器在自己的系统中运行此代码时，我得到了`Parse error: syntax error, unexpected end of file`，而我在 NetBeans IDE 中复制了代码和很多PHP 语法检查在线工具，但没有检测到错误。但是，除非我删除以下代码，否则我无法运行代码文件。我有两个问题

1.  是否可以在 PHP 设置中禁用 Parse Error，以便它以与我的服务器中运行相同的方式运行。

2.  任何人都可以指出以下代码中的问题。

.

```
<?php 
                if ($current_main == "admin")
                {
            ?>
                <li><a href="<?php echo base_url();?>admin/addsite" title="Administrator">Administrator</a></li>
            <?
                }
            ?>
            <?php 
                if ($current_sub == "admin_addsite")
                {
            ?>
                <li><a href="<?php echo base_url();?>admin/addsite" title="Add Sites">Add Sites</a></li>
            <?
                }
            ?>

            <?php 
                if ($current_main == "reportmanager")
                {
            ?>
                <li><a href="<?php echo base_url();?>report/view" title="Report Manager">Report Manager</a></li>
            <?
                }
            ?>
            <?php 
                if ($current_sub == "viewreport")
                {
            ?>
                <li><a href="<?php echo base_url();?>report/view" title="View Report">View Report</a></li>
            <?
                }
            ?>

            <?php 
                if ($current_main == "listsitemanager")
                {
            ?>
                <li><a href="<?php echo base_url();?>listsite/view" title="List Site Manager">List Site Manager</a></li>
            <?
                }
            ?>
            <?php 
                if ($current_sub == "addlistsite")
                {
            ?>
                <li><a href="<?php echo base_url();?>listsite/add" title="Add List Site">Add List Site</a></li>
            <?
                }
            ?>
            <?php 
                if ($current_sub == "viewlistsite")
                {
            ?>
                <li><a href="<?php echo base_url();?>listsite/view" title="View List Site">View List Site</a></li>
            <?
                }
            ?>

            <?php 
                if ($current_main == "projectmanager")
                {
            ?>
                <li><a href="<?php echo base_url();?>project/view" title="Project Manager">Project Manager</a></li>
            <?
                }
            ?>
            <?php 
                if ($current_sub == "addproject")
                {
            ?>
                <li><a href="<?php echo base_url();?>project/add" title="Add Project">Add Project</a></li>
            <?
                }
            ?>
            <?php 
                if ($current_sub == "viewproject")
                {
            ?>
                <li><a href="<?php echo base_url();?>project/view" title="View Project">View Project</a></li>
            <?
                }
            ?>

            <?php 
                if ($current_main == "jobmanager")
                {
            ?>
                <li><a href="<?php echo base_url();?>job/view" title="Job Manager">Job Manager</a></li>
            <?
                }
            ?>
            <?php 
                if ($current_sub == "addjob")
                {
            ?>
                <li><a href="<?php echo base_url();?>job/add" title="Add Job">Add Job</a></li>
            <?
                }
            ?>
            <?php 
                if ($current_sub == "viewjob")
                {
            ?>
                <li><a href="<?php echo base_url();?>job/view" title="View Job">View Job</a></li>
            <?
                }
            ?>
            <?php 
                if ($current_sub == "importjob")
                {
            ?>
                <li><a href="<?php echo base_url();?>job/import" title="Import Job">Import Job</a></li>
            <?
                }
            ?>
            <?php 
                if ($current_sub == "editjob")
                {
            ?>
                <li><a href="#" title="Edit Job">Edit Job</a></li>
            <?
                }
            ?>
            <?php 
                if ($current_sub == "importrss")
                {
            ?>
                <li><a href="<?php echo base_url();?>job/importrss" title="Import Jobs from RSS Feed">Import Jobs from RSS Feed</a></li>
            <?
                }
            ?>
            <?php 
                if ($current_sub == "viewrss")
                {
            ?>
                <li><a href="<?php echo base_url();?>job/viewrss" title="View RSS Feed">View RSS Feed</a></li>
            <?
                }
            ?>
            <?php 
                if ($current_main == "home")
                {
            ?>
                <li><a href="<?php echo base_url();?>usercp" title="Home">Home</a></li>
            <?
                }
            ?>
            <?php 
                if ($current_sub == "dashboard")
                {
            ?>
                <li><a href="<?php echo base_url();?>usercp" title="Dashboard">Dashboard</a></li>
            <?
                }
            ?>
            <?php 
                if ($current_sub == "buypoints")
                {
            ?>
                <li><a href="<?php echo base_url();?>usercp/buypoints" title="Buy Points">Buy Points</a></li>
            <?
                }
            ?>
            <?php 
                if ($current_sub == "payment")
                {
            ?>
                <li><a href="<?php echo base_url();?>usercp/payment" title="Payment Transaction">Payment Transaction</a></li>
            <?
                }
            ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T13:27:17.240

您需要使用完整的 PHP 标签。

`<?`将文件中的每个实例更改为`<?php`，问题就会消失。

有关更多信息，请参阅[此](http://php.net/manual/en/ini.core.php#ini.short-open-tag)。请注意，这里真正的解决方案是使用完整标签 - 启用短开放标签可能很诱人，但您应该避免这样做以获得最大的兼容性和可移植性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T13:30:19.553

像这样替换`<?`为`<?php`

# joomla - joomla 3.0 模板创建

> ID：14011315
> 
> 赞同：2
> 
> 时间：2012-12-23T13:25:10.110
> 
> 标签：joomla, joomla3.0

谁能给我链接或指导我可以在哪里免费学习创建 Joomla 3.0 模板。我知道 html 、 css 和 php 。我阅读了 Jessica Barte 的 pdf 文件，但意识到它是针对早期版本的 joomla 并且我制作的模板不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T13:34:31.040

查看下面的链接，如果您有任何问题，请告诉我

[http://www.inmotionhosting.com/support/edu/joomla-3/create-template](http://www.inmotionhosting.com/support/edu/joomla-3/create-template)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-06T12:07:54.847

阅读官方文档（适用于任何版本）：

[http://docs.joomla.org/Creating_a_basic_Joomla!_template](http://docs.joomla.org/Creating_a_basic_Joomla!_template)

# php - 如何从数组中打印一些而不是全部在php中

> ID：14011316
> 
> 赞同：-1
> 
> 时间：2012-12-23T13:25:12.887
> 
> 标签：php, arrays, random, shuffle

这是显示整个数组的工作代码的一部分；

```
$files = filelist("./",1,1); // call the function
shuffle($files);
foreach ($files as $list) {//print array
echo "<a href=\"" . $list['name'] . "$startDir\"><h4> " . $list['name'] . " </h4></a>";
//    echo "Directory: " . $list['dir'] . " => Level: " . $list['level'] . " => Name: " . $list['name'] . " => Path: " . $list['path'] ."<br>"; 
```

如何修改它以使其仅显示 10 或 15 个列表而不是全部？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T13:29:12.813

使用计数器来限制迭代次数：

```
$counter = 0;
foreach ($files as $list) {//print array
    // your loop code here...
    $counter++;
    if ($counter > 10) break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T13:29:43.937

如果您知道数组的键或索引，您可以通过简单的 for 循环更快地完成 KingCrunch 所做的事情

```
for($i=0; $i<=14; $i++) {
   // echo $file[$i];
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-23T13:27:21.133

它有一个功能

```
foreach(array_slice($files, 0, 15) as $file) { 
  /* your code here */ 
} 
```

[http://php.net/array-slice](http://php.net/array-slice)

另一种解决方案是使用`array_rand()`而不是`shuffle()`和`array_chunk()`

```
foreach (array_rand($files, 15) as $key) {
  $file = $files[$key];
  // Your code here
 } 
```

[http://php.net/array-rand](http://php.net/array-rand)

请注意，这会保持键的顺序（请参阅下面的 salathes 评论）。

# objective-c - iOS：从非图像数据生成图像（Godus like Landscape）

> ID：14011320
> 
> 赞同：10
> 
> 时间：2012-12-23T13:25:48.103
> 
> 标签：objective-c, ios, image, graphics, map

因此，在看到来自**[Godus](http://www.kickstarter.com/projects/22cans/project-godus)**的图像时， 我想知道如何**为不同的高度或高度层生成一个****简单的、非交互式的、**具有不同颜色的 2D 图像，如下图所示。

 **我只是想在没有房屋、树木对象和单元的情况下为地形生成基本的颜色层。我并没有考虑创建一个可以解决这个问题的图形引擎，而是一种在屏幕上生成平面图像的简单方法。

**问题有两个方面：**

**1，**什么样的数据可以用于这种生成？我在想也许 ASCII 艺术很容易创建和修改以快速改变地形，但很难提供高度信息。

**2、**有哪些现有的框架、类、方法或方法论可以用来解决数据准备好后的生成。

**神：** ![像这个](../Images/2c60f97e55528556f148bf22e38d8c63.png)

**ASCII 艺术（北欧 ! 代表挪威，# 代表瑞典，$ 代表芬兰，% 代表俄罗斯：** ![在此处输入图像描述](../Images/72f9e1357c07821764d6eae8f5886a4d.png)

（取自 MapBox 文档：[http](http://mapbox.com/developers/utfgrid/#map_data_as_ascii_art) ://mapbox.com/developers/utfgrid/#map_data_as_ascii_art ）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T15:01:30.927

如果您想创建一个简单的 2D 轮廓图像，我会尝试以下操作：

*   创建一些高度数据。我只是为此使用灰度图像，而不是 ascii。您可以在 MS Paint 或任何类似的东西中创作基本的高度图。
*   平滑数据。例如，应用模糊，或使用平滑滤镜增加分辨率。
*   考虑将所有高度数据钳制在某个点以下 - 如果需要，这表示水位。
*   量化数据。量化的越多，轮廓越少但越明显。
*   通过调色板查找应用假着色。例如：低洼地区蓝色代表水，然后黄色代表沙子，绿色代表草，棕色代表泥土，灰色代表岩石，白色代表雪。

重要的部分是放大/平滑过滤器，它为您的轮廓创建更有趣的形状，以及实际创建轮廓本身的量化。

你可以玩这个阶段。例如，如果您的源数据非常干净，您可以在地形中引入一些噪声，使其看起来更自然。或者，如果您希望所有内容都非常圆润，则可以增加平滑度。

如果你想使用 ascii，你可以直接从中生成一个位图，这并不难。您作为示例使用的 ascii 是按国家而不是按地形划分的，因此错误着色和轮廓可能会做错事。您可能可以将其用作简单地形生成器的输入，可能只需要几个字符来表示您想要陆地、海洋、山脉等的位置。

这是我敲出的一个非常基本的示例，它只是我建议的技术的应用。我没有使用任何框架或库，只是一些简单的图像处理功能，以及我发现的欧洲高度图：

![在此处输入图像描述](../Images/8452512726cb4b872f2b61a20bc8b768.png)**

# c++ - 空间中图形的方向

> ID：14011324
> 
> 赞同：3
> 
> 时间：2012-12-23T13:26:43.927
> 
> 标签：c++, algorithm, opengl, 3d, openframeworks

我的程序中有一个球体，我打算在距离该球体中心 x 处绘制一些矩形。该图如下所示：

![在此处输入图像描述](../Images/bbdd825428c39907304608566c209a5d.png)

矩形绘制在我已经在 3d 点向量中的 (x,y,z) 点处。假设 x 到中心的距离为 10。注意这些矩形的方向，它们与半径为 10 的假想球体相切（垂直于从球心到矩形中心的假想线）

目前，我执行以下操作：

`vector<vec3f> pointsInSpace`对于必须绘制矩形的n 个点

```
for(int i=0;i<pointsInSpace.size();++i){
    //draw rectnagle at (x,y,z)
} 
```

它没有我正在寻找的这种切线方向。在我看来，`roll,pitch,yaw`对每个矩形应用旋转并以某种方式使用四元数使它们与我正在寻找的东西相切。但是，对我来说它看起来有点复杂，我想问一些更好的方法来做到这一点。

此外，将来的矩形可能会更改为其他形状，因此将不胜感激一种通用的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:33:21.797

我认为您基本上想要与使用 LookAt() 函数完成的相同转换（您希望矩形沿着从矩形中心到球体原点的向量“查看”球体）。

如果您的矩形由点组成：

```
(-1, -1, 0)
(-1,  1, 0)
( 1, -1, 0)
( 1,  1, 0) 
```

然后矩形的法线将指向 Z。该轴需要朝向球体。

因此，从您的点到球体中心的归一化向量是 Z 轴。

然后您需要定义一个不同的“向上”向量 - (0,1,0) 是典型的，但在 Z 轴指向同一方向的情况下，您需要选择不同的向量。

'up' 和 'z' 轴的交叉给出了 x 轴，然后 'x' 和 'z' 轴的交叉给出了 'y' 轴。

这三个轴 (x,y,z) 直接形成一个旋转矩阵。

由此产生的变换矩阵将适当地定向矩形。要么使用 GL 的固定函数管道 (yuk)，在这种情况下你可以只使用 gluLookAt()，或者在你自己的代码中以任何合适的方式构建和使用上面的矩阵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T22:46:38.983

个人觉得**JasonD**的回答就够了。但这里有一些有关计算的信息。

从数学上讲，这是一个相当简单的问题，您拥有的是 2 个已知向量。你知道*位置向量*和球体*法线向量*。由于正方形可以从球体中心沿矢量任意旋转，因此您需要再定义一个矢量，即*向上矢量*。如果不定义*向上向量*，它将成为一个不可能的解决方案。

一旦定义了向上向量向量，问题就变得简单了。假设您的正方形位于上面**JasonD**建议的 XY 平面上。然后你的矩阵变成：

```
up_dot_n_dot_n.X      up_dot_n_dot_n.Y       up_dot_n_dot_n.Z     0
n.X                   n.y                    n.z                  0
up_dot_n.x            up_dot_n.x             up_dot_n.z           0 
p.x                   p.y                    p.z                  1 
```

其中 n 是 p - 球心的法线单位向量（如果球体位于坐标系的中心，这很简单），up 是任意单位向量向量。p 遵循形式定义并且是位置。

该解在球体的向上方向有一点奇点。另一种解决方案是先向上旋转 360 度，然后围绕旋转轴点向上旋转 180 度。产生相同的东西不同的方法没有奇点问题。

# hadoop - cloudera 集群节点角色

> ID：14011342
> 
> 赞同：1
> 
> 时间：2012-12-23T13:29:31.640
> 
> 标签：hadoop, cloudera

我需要在我的 cloudera CDH4 集群设置上运行简单的基准测试。我的 cloudera 集群设置 (CDH4) 有 4 个节点，A、B、C 和 D 我正在使用 cloudera manager 免费版来管理 cloudera 服务。每个节点都配置为执行多个角色，如下所述。A：NameNode、JobTrackerNode、regionserver、SecondaryNameNode、DataNode、TaskTrackerNode B：DataNode、TaskTrackerNode C：DataNode、TaskTrackerNode D：DataNode、TaskTrackerNode

我的第一个问题是，一个节点可以是 NameNode 和 DataNode 吗？这个设置可以吗？我的第二个问题是，在 cloudera manager UI 上，我可以看到许多服务正在运行，但我不确定我是否需要所有这些服务？在我的设置上运行的服务是：hbase1 hdfs1 mapreduce1 hue1 oozie1 zookeeper1

我只需要 hdfs1 和 mapreduce1 服务吗？如果是，我该如何删除其他服务？

云和 hadoop 概念对我来说是新的，如果我的一些假设不合逻辑或错误，请原谅我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T18:51:24.907

你的第一个问题的答案是肯定的。但是你永远不会在生产中这样做，因为 NameNode 需要足够的 RAM。人们通常只在他们的主节点上运行 NameNode+JobTracker。在另一台机器上运行 SecondarNameNode 也更好。

关于第二个问题，Cloudera Manager 不仅是 Hadoop。它是一个完整的包，包括几个 Hadoop 子项目，如 HBase（一个 NOSQL DB）、Oozie（一个工作流引擎）等，这些是您在 UI 上看到的过程。

如果你只想玩 Hadoop，HDFS 和 MapReduce 就足够了。您可以从 UI 本身轻松停止其余进程。它不会对您的 Hadoop 集群造成任何伤害。

高温高压

# android - Android : 为 6 0*30 尺寸设计表格布局（预定义布局）

> ID：14011343
> 
> 赞同：2
> 
> 时间：2012-12-23T13:29:35.263
> 
> 标签：android, android-tablelayout

我正在设计一个应用程序来记录 android 应用程序中的用户信息。它记录 60 分钟的活动和某些动作。其中每个单元格（Textview）记录 1,0 或 N/A 活动，表示是、否或没有活动。因此，每个文本视图都被单击 3 次以在这些值之间进行更改。

所以每个单元格都很重要，因为我要记录这些信息并将其导出到 Excel。

目前，我已经考虑了垂直和水平滚动的表格布局。但是放置这么多文本视图（60 * 30）会影响应用程序的性能。但它虽然工作。

我尝试过使用 listview，但它只允许选择一个或多个值。但在这种情况下，我必须更改每一个值。我也在尝试分页，但无法为这么多的大数据找到合适的信息并将信息同步在一起。

那么是否可以一一加载每一行或每一列保持所有组件不同？这也是一个可行的选择还是我应该考虑使用 html5 开发的 webview？

请建议自动化或编程方法来生成此视图以及如何删除性能问题错误（main.xml 有超过 80 个视图，对性能不利）。

# magento - 禁用特定产品的付款选项-仅限货到付款-magento

> ID：14011348
> 
> 赞同：4
> 
> 时间：2012-12-23T13:30:36.537
> 
> 标签：magento

我正在使用 Magento 1.4.1.1，我想禁用某些产品的付款选项。我只想显示某些产品的货到付款方式，而需要隐藏其他产品。

有任何机构可以帮助我吗？我该如何管理？管理员是否有任何选项，或者我需要自定义代码。如果是这样，您能否提供一个代码和文件的确切路径？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T07:00:44.870

过滤支付方式的一种不显眼的方法是为事件实现观察者，称为`payment_method_is_active`

**步骤**
1> 在 config.xml 中注册事件：'payment_method_is_active'。在 app/code/local/MagePsycho/Paymentfilter/etc/config.xml 中添加以下 xml 代码：

```
...
<global>
    ...
    <events>
        <payment_method_is_active>
            <observers>
                <paymentfilter_payment_method_is_active>
                    <type>singleton</type>
                    <class>paymentfilter/observer</class>
                    <method>paymentMethodIsActive</method>
                </paymentfilter_payment_method_is_active>
            </observers>
        </payment_method_is_active>
    </events>
    ...
</global>
... 
```

2> 实现观察者模型 创建观察者文件：app/code/local/MagePsycho/Paymentfilter/Model/Observer.php 并粘贴以下代码：

```
<?php
/**
 * @category   MagePsycho
 * @package    MagePsycho_Paymentfilter
 * @author     magepsycho@gmail.com
 * @website    http://www.magepsycho.com
 * @license    http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
    */
class MagePsycho_Paymentfilter_Model_Observer {

    public function paymentMethodIsActive(Varien_Event_Observer $observer) {
        $event           = $observer->getEvent();
        $method          = $event->getMethodInstance();
        $result          = $event->getResult();
        $currencyCode    = Mage::app()->getStore()->getCurrentCurrencyCode();

            if($someTrueConditionGoesHere){
                $result->isAvailable = true;
            }else{
                $result->isAvailable = false;
            }

    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T15:49:05.260

首先创建一个产品属性（名称：'magepal_payment_filter_by_product'，类型：yes/no）来识别这些产品。

例如 Magento v1.7 的基础，你可以

1.  以编程方式自动启用支付模块参见[https://stackoverflow.com/a/14023210/1191288](https://stackoverflow.com/a/14023210/1191288)

2.  启用所有适用的支付模块并过滤哪个模块显示在哪里

在 /app/code/local/MagePal/PaymentFilterByProduct/etc/config.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <MagePal_PaymentFilterByProduct>
            <version>1.0.1</version>
        </MagePal_PaymentFilterByProduct>
    </modules>
    <global>
        <helpers>
            <paymentfilterbyproduct>
                <class>MagePal_PaymentFilterByProduct_Helper</class>
            </paymentfilterbyproduct>
            <payment>
                <rewrite>
                    <data>MagePal_PaymentFilterByProduct_Helper_Payment_Data</data>
                </rewrite>
            </payment>            
        </helpers>      
    </global>
</config> 
```

在 /app/code/local/MagePal/PaymentFilterByProduct/Helper/Payment/Data.php

```
<?php
class MagePal_PaymentFilterByProduct_Helper_Payment_Data extends Mage_Payment_Helper_Data
{

    public function getStoreMethods($store = null, $quote = null)
    {   
        $methods = parent::getStoreMethods($store, $quote);

        if(!Mage::getStoreConfig('paymentfilterbyproduct/general_option/paymentfilterbyproduct_enable', Mage::app()->getStore()) || !$quote){
            return $methods;
        }

        //get a list of product in cart
        $cart = Mage::getSingleton('checkout/session');

        $specialProductInCart = array();

        foreach ($cart->getQuote()->getAllItems() as $item) {
            $specialProductInCart[] = $item->getMagepalPaymentFilterByProduct();                 
        }

        // if special product in cart 
        // need to if check $item->getMagepalPaymentFilterByProduct() return 'yes/no' or '0/1)
        if(in_array('yes', $specialProductInCart)){
           $filter_csv = Mage::getStoreConfig('paymentfilterbyproduct/filter_option/paymentfilter_special_products', Mage::app()->getStore()); 
        }
        else{
            $filter_csv = Mage::getStoreConfig('paymentfilterbyproduct/filter_option/paymentfilter_all_product', Mage::app()->getStore());
        }

        $filter_array = explode(",", $filter_csv);

        foreach ($methods as $k => $method){
            if(!in_array($method->getCode(), $filter_array))
                unset($methods[$k]);       
        }//methods

        return $methods;
    }
} 
```

在 /app/code/local/MagePal/PaymentFilterByProduct/etc/system.xml

```
<?xml version="1.0"?>
<config>
    <tabs>
        <magepal translate="label" module="paymentfilterbyproduct">
            <label>MagePal</label>
            <sort_order>900</sort_order>
        </magepal>
    </tabs>
    <sections>
        <paymentfilterbyproduct translate="label" module="paymentfilterbyproduct">
            <label>Payment Method Filter by Product</label>
            <tab>magepal</tab>
            <sort_order>1000</sort_order>
            <show_in_default>1</show_in_default>
            <show_in_website>1</show_in_website>
            <show_in_store>1</show_in_store>
            <groups>
                <general_option translate="label">
                    <label>General Options</label>
                    <frontend_type>text</frontend_type>
                    <sort_order>1</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>1</show_in_website>
                    <show_in_store>1</show_in_store>
                    <fields>
                        <paymentfilter_enable translate="label">
                            <label>Enable Payment Filter</label>
                            <frontend_type>select</frontend_type>
                            <source_model>adminhtml/system_config_source_yesno</source_model>
                            <sort_order>50</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                        </paymentfilter_enable>
                    </fields>
                </general_option>
                <filter_option translate="label">
                    <label>Payment Method Filter Configuration</label>
                    <frontend_type>text</frontend_type>
                    <sort_order>2</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>1</show_in_website>
                    <show_in_store>1</show_in_store>
                    <comment>Please enable all applicable payment methods in system payment config</comment>
                    <fields>
                        <paymentfilter_all_products translate="label">
                            <label>Select Default Payment option for All Products</label>
                            <frontend_type>multiselect</frontend_type>
                            <source_model>MagePal_PaymentFilterByProduct_ActivePaymentMethod</source_model>
                            <sort_order>30</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                        </paymentfilter_admin>
                        <paymentfilter_special_products translate="label">
                            <label>Select Payments for Cart with Special Products</label>
                            <frontend_type>multiselect</frontend_type>
                            <source_model>MagePal_PaymentFilterByProduct_ActivePaymentMethod</source_model>
                            <sort_order>40</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                        </paymentfilter_store>
                    </fields>
                </filter_option>
            </groups>
        </paymentfilterbyproduct>
    </sections>
</config> 
```

在 /app/code/local/MagePal/PaymentFilterByProduct/Helper/Data.php

```
<?php 
class MagePal_PaymentFilterByProduct_Helper_Data extends Mage_Core_Block_Template
{
} 
```

在 /app/code/local/MagePal/PaymentFilterByProduct/ActivePaymentMethod.php

```
<?php
class MagePal_PaymentFilterByProduct_ActivePaymentMethod
{
    //get all active (enable) payment method
    public function toOptionArray()
    {
       $payments = Mage::getSingleton('payment/config')->getActiveMethods();

       foreach ($payments as $paymentCode=>$paymentModel) {
           if($paymentModel->canUseCheckout() == 1){
                $paymentTitle = Mage::getStoreConfig('payment/'.$paymentCode.'/title');
                $methods[$paymentCode] = array(
                    'label'   => $paymentTitle,
                    'value' => $paymentCode,
                );
           }
        }

        return $methods;
    }
} 
```

在 /app/etc/modules/MagePal_PaymentFilterByProduct.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <MagePal_PaymentFilterByProduct>
            <active>true</active>
            <codePool>local</codePool>
        </MagePal_PaymentFilterByProduct>
    </modules>
</config> 
```

# java - 包装类是设计模式吗

> ID：14011352
> 
> 赞同：3
> 
> 时间：2012-12-23T13:31:13.010
> 
> 标签：java, design-patterns

我是设计模式的新手，现在我正在研究一个开放的软件代码：所以我试图了解代码的体系结构：层，使用的设计模式......

所以我找到了一个包含名为 EntityWrapper.java 的类的包，这是一个示例：

***包装类：***

```
 package org.objectweb.salome_tmf.api.data;

 /**
  * @author marchemi
  */
public class ActionWrapper extends DataWrapper{
 String awaitedResult;
 int orderIndex;
 int idTest;
/**
 * @return Returns the orderIndex.
 */
public int getOrderIndex() {
    return orderIndex;
}
/**
 * @param orderIndex The orderIndex to set.
 */
public void setOrderIndex(int orderIndex) {
    this.orderIndex = orderIndex;
}
/**
 * @return Returns the waitedResult.
 */
public String getAwaitedResult() {
    return awaitedResult;
}
/**
 * @param waitedResult The waitedResult to set.
 */
public void setAwaitedResult(String awaitedResult) {
    this.awaitedResult = awaitedResult;
}
/**
 * @return Returns the idTest.
 */
public int getIdTest() {
    return idTest;
}
/**
 * @param idTest The idTest to set.
 */
public void setIdTest(int idTest) {
    this.idTest = idTest;
}
 } 
```

***实体类：***

```
package org.objectweb.salome_tmf.data;

import java.io.File;
import java.io.Serializable;
import java.util.Enumeration;
import java.util.HashSet;
import java.util.Hashtable;
import java.util.Iterator;
import java.util.Vector;

import org.objectweb.salome_tmf.api.Api;
import org.objectweb.salome_tmf.api.ApiConstants;
import org.objectweb.salome_tmf.api.Util;
import org.objectweb.salome_tmf.api.data.ActionWrapper;
import org.objectweb.salome_tmf.api.data.FileAttachementWrapper;
import org.objectweb.salome_tmf.api.data.ParameterWrapper;
import org.objectweb.salome_tmf.api.data.SalomeFileWrapper;
import org.objectweb.salome_tmf.api.data.UrlAttachementWrapper;
import org.objectweb.salome_tmf.api.sql.ISQLAction;

public class Action extends WithAttachment {
static ISQLAction pISQLAction = null;

private String awaitedResult;
public String getAwaitedResult() {
    return awaitedResult;
}

public void setAwaitedResult(String awaitedResult) {
    this.awaitedResult = awaitedResult;
}

private int orderIndex;
private Hashtable parameterHashTable;
private Test pTest = null;

public Action(Test pTest, String name, String description) {
    super(name, description);
    awaitedResult = "";
    orderIndex = 0;
    parameterHashTable = new Hashtable();
    this.pTest = pTest;
    if (pISQLAction == null){
        pISQLAction = Api.getISQLObjectFactory().getISQLAction();
    }
}

public Action(ActionWrapper pAction, Test pTest) {
    this(pTest, pAction.getName(), pAction.getDescription());
    awaitedResult = pAction.getAwaitedResult();
    orderIndex = pAction.getOrderIndex();
    idBdd = pAction.getIdBDD();
} 

public Action(Action pAction, Test pTest) {
    this(pTest,  pAction.getNameFromModel(), pAction.getDescriptionFromModel());
    awaitedResult = pAction.getAwaitedResultFromModel();
} // Fin du constructeur Action/1

protected void reloadBaseFromDB() throws Exception {
    if (isInBase()) {
        throw new Exception("Action " + name + " is already in BDD");
    }
    ActionWrapper pActionWrapper = pISQLAction.getActionWrapper(idBdd);
    awaitedResult = pActionWrapper.getAwaitedResult();
    orderIndex = pActionWrapper.getOrderIndex();
    name = pActionWrapper.getName();
    description = pActionWrapper.getDescription();
}

public void reloadFromDB(boolean base, Hashtable paramsInModel, boolean attach)  
  throws Exception {
    int transNuber = -1;
    try {
        transNuber = Api.beginTransaction(101, ApiConstants.LOADING);
        if (base){
            reloadBaseFromDB();
        }
        reloadUsedParameterFromDB(paramsInModel);
        if (attach){
            reloadAttachmentDataFromDB(false);
        }
        Api.commitTrans(transNuber);
    } catch (Exception e){
        Api.forceRollBackTrans(transNuber);
        throw e;
    }
}

public void clearCache() {
    /* TODO ClearAttachement */

}
/******************************************************************************/
/**                             ACCESSEURS ET 
     MUTATEURS                      ***/
/******************************************************************************/

public String getAwaitedResultFromModel() {
    return awaitedResult;
}

public void setAwaitedResultInModel(String string) {
    awaitedResult = string;
}

public int getOrderIndexFromModel() {
    return orderIndex;
}

public void setOrderIndex(int i) {
    orderIndex = i;
}

public Test getTest(){
    return pTest;
}

/////////////////////////////// Basic Operation /////////////////////////

/* Used by Manuel Test */
void addInDB(Test pTest) throws Exception {
    //boolean needUpdate = false;
    if (isInBase()) {
        throw new Exception("Action " + name + " is already in BDD");
    }
    if (!pTest.isInBase()){
        throw new Exception("Test " + pTest.getNameFromModel() + " is not in BDD");
    }
    int id = pISQLAction.insert(pTest.getIdBdd(), name, description, awaitedResult);
    setIdBdd(id);
    orderIndex =  pISQLAction.getActionWrapper(id).getOrder();
    /*if (orderIndex != rowCount){
        needUpdate = true; 
    }
    return needUpdate;*/
    Project.pCurrentProject.notifyChanged( ApiConstants.INSERT_ACTION ,this);

}

/* Used by Manuel Test */
void addInModel(Test pTest){
    this.pTest = pTest;
}

/* Used by Manuel Test */
void addInDBAndModel(Test pTest)throws Exception {
    //boolean res;
    addInDB(pTest);
    addInModel(pTest);
    //return res;
}

public void updateInDB(String newActionName, String newActionDesc, String newActionResAttendu) throws Exception {
    if (!isInBase()) {
        throw new Exception("Action " + name + " is not in BDD");
    }
    pISQLAction.update(idBdd, newActionName, newActionDesc,  newActionResAttendu );
    Project.pCurrentProject.notifyChanged( ApiConstants.UPDATE_ACTION ,this, new String(name), newActionName);

}

public void updateInModel(String newActionName, String newActionDesc, String newActionResAttendu) {
    setNameInModel(newActionName);
    updateDescriptionInModel(newActionDesc);
    setAwaitedResultInModel(newActionResAttendu);
}

public void updateInDBAndModel(String newActionName, String newActionDesc, String newActionResAttendu) throws Exception {
    updateInDB(newActionName, newActionDesc, newActionResAttendu);
    updateInModel(newActionName, newActionDesc, newActionResAttendu);
} 

public void updateInDBAndModel(String newName, String newDesc) throws Exception {
    updateInDB(newName, newDesc, awaitedResult);
    updateInModel(newName, newDesc, awaitedResult);
}

public void updateOrderInDBAndModel(boolean inc) throws Exception {
    if (!isInBase()) {
        throw new Exception("Action " + name + " is not in BDD");
    }
    orderIndex = pISQLAction.updateOrder(idBdd, inc);     
}

/* Used by Manuel Test */
void deleteInDB() throws Exception {
    if (!isInBase()) {
        throw new Exception("Action " + name + " is not in BDD");
    }
    pISQLAction.delete(idBdd);
    Project.pCurrentProject.notifyChanged( ApiConstants.DELETE_ACTION ,this);
}

/* Used by Manuel Test */
 void deleteInModel(){
    pTest=null;
    parameterHashTable.clear();
    clearAttachInModel();
}

 /* Used by Manuel Test */
void deleteInDBAndModel() throws Exception {
    deleteInDB();
    deleteInModel();
}

//////////////// PARAMETERS ////////////////////////

public void setParameterHashSetInModel(HashSet set) {
    parameterHashTable.clear();
    for (Iterator iter = set.iterator(); iter.hasNext();) {
        Parameter param = (Parameter)iter.next();
        parameterHashTable.put(param.getNameFromModel(), param);
    }

}
public void setParameterHashtableInModel(Hashtable table) {
    parameterHashTable.clear();
    parameterHashTable = table;
}

public Hashtable getCopyOfParameterHashTableFromModel(){
    Hashtable copyParameter = new Hashtable();
    Enumeration enumKey = parameterHashTable.keys();
    while (enumKey.hasMoreElements()){
        Object key = enumKey.nextElement();
        copyParameter.put(key, parameterHashTable.get(key));
    }
    return copyParameter;
}

public void reloadUsedParameterFromDB(Hashtable parametersInModel) throws Exception {
    if (!isInBase()) {
        throw new Exception("Action " + name + " is not in BDD");
    }
    ParameterWrapper[] paramActionArray = pISQLAction.getParamsUses(idBdd);
    for (int i = 0; i < paramActionArray.length; i++) {
        Parameter param = null;
        ParameterWrapper pParameterWrapper = paramActionArray[i];
        if (parametersInModel != null){
            param = (Parameter)parametersInModel.get(pParameterWrapper.getName());
            if (param == null){
                param = new Parameter(pParameterWrapper);
            }
        }
        setUseParamInModel(param);
    }
}

public void setUseParamInModel(Parameter pParam) {
    parameterHashTable.put(pParam.getNameFromModel(), pParam);
    if (pTest != null) {
        if (pTest.getUsedParameterFromModel(pParam.getNameFromModel()) == null){
            pTest.setUseParamInModel(pParam);
        }
    }
}

public void setUseParamInDB(int paramId) throws Exception {
    if (!isInBase()) {
        throw new Exception("Action " + name + " is not in BDD");
    }
    pISQLAction.addUseParam(idBdd,paramId);
}

public void setUseParamInDBAndModel(Parameter pParam) throws Exception {
    //DB
    setUseParamInDB(pParam.getIdBdd());
    //model
    setUseParamInModel(pParam);
}

public void deleteUseParamInDB(int paramId) throws Exception {
    if (!isInBase()) {
        throw new Exception("Action " + name + " is not in BDD");
    }
    pISQLAction.deleteParamUse(idBdd, paramId);
}

public void deleteUseParamInDBAndModel(Parameter pParam)  throws Exception {
    deleteUseParamInDB(pParam.getIdBdd());
    deleteUseParamInModel(pParam);
}

public void deleteUseParamInModel(Parameter pParam) {
    // Clean Action
    String newDesc = null ;
    if (getDescriptionFromModel()!=null)
       newDesc = clearStringOfParameter(getDescriptionFromModel(), pParam);
    String newResult = null;
    if (getAwaitedResultFromModel()!=null)
        newResult = clearStringOfParameter(getAwaitedResultFromModel(), pParam);
    description = newDesc;
    awaitedResult = newResult;
    Object o= parameterHashTable.remove(pParam.getNameFromModel());
    Util.log("[Action->deleteUseParamInModel] Delete Use Parameter " + pParam + ", in Action " + name + " res is " +o);

}

public Parameter getParameterFromModel(String name) {
    Enumeration paramList = parameterHashTable.elements();
    while (paramList.hasMoreElements()){
        Parameter param = (Parameter)paramList.nextElement();
        if (param.getNameFromModel().equals(name)) {
            return param;
        }
    }
    return null;
}

public Parameter getParameterFromDB(String name) throws Exception {
    if (!isInBase()) {
        throw new Exception("Action " + name + " is not in BDD");
    }
    HashSet result = getParameterHashSetFromDB();
    for (Iterator iter = result.iterator(); iter.hasNext(); ) {
        Parameter param = (Parameter)iter.next();
        if (param.getNameFromModel().equals(name)) {
            return param;
        }
    }
    return null;
}

public HashSet getParameterHashSetFromDB() throws Exception {
    if (!isInBase()) {
        throw new Exception("Action " + name + " is not in BDD");
    }
    HashSet result = new HashSet();
    if (!isInBase()) {
        throw new Exception("Action " + name + " is not in BDD");
    }
    ParameterWrapper[] listParamWrapper =  pISQLAction.getParamsUses(idBdd);
    for (int i = 0; i <  listParamWrapper.length; i++){
        result.add(new Parameter(listParamWrapper[i]));
    }
    return result;
}

public Vector getParameterVectorFromDB() throws Exception {
    if (!isInBase()) {
        throw new Exception("Action " + name + " is not in BDD");
    }
    Vector result = new Vector();
    if (!isInBase()) {
        throw new Exception("Action " + name + " is not in BDD");
    }
    ParameterWrapper[] listParamWrapper =  pISQLAction.getParamsUses(idBdd);
    for (int i = 0; i <  listParamWrapper.length; i++){
        result.add(new Parameter(listParamWrapper[i]));
    }
    return result;
}
public Hashtable getParameterHashSetFromModel() {
    return parameterHashTable;
} 

////////////// ATTACHEMENT ///////////////////////

public void addAttachementInDB (Attachment attach )throws Exception {
    if (attach instanceof FileAttachment) {
        addAttachFileInDB((FileAttachment) attach);
    } else {
        addAttachUrlInDB((UrlAttachment) attach);
    }
}

void addAttachFileInDB(FileAttachment file) throws Exception {
    if (!isInBase()) {
        throw new Exception("Action " + name + " is not in BDD");
    }
    File f = file.getLocalFile();
    int id = pISQLAction.addFileAttach(idBdd,new SalomeFileWrapper(f),file.getDescriptionFromModel());
    file.setIdBdd(id);
}

void addAttachUrlInDB(UrlAttachment url) throws Exception {
    if (!isInBase()) {
        throw new Exception("Action " + name + " is not in BDD");
    }
    int id = pISQLAction.addUrlAttach(idBdd, url.getNameFromModel(),url.getDescriptionFromModel());
    url.setIdBdd(id);
}

public void deleteAttachementInDB(int attachId) throws Exception {
    if (!isInBase()) {
        throw new Exception("Action " + name + " is not in BDD");
    }
    pISQLAction.deleteAttachment(idBdd, attachId);
}

public void deleteAttachementInDBAndModel(Attachment attach)throws Exception {
    deleteAttachementInDB(attach.getIdBdd());
    deleteAttachmentInModel(attach);

}

public Vector getAttachFilesFromDB() throws Exception {
    if (!isInBase()) {
        throw new Exception("Action " + name + " is not in BDD");
    }
    FileAttachementWrapper[] fawArray = pISQLAction.getAllAttachFile(idBdd);
    Vector result = new Vector();
    for(int i = 0; i < fawArray.length; i++) {
        result.add(fawArray[i]);
    }
    return result;
}

public Vector getAttachUrlsFromDB() throws Exception {
    if (!isInBase()) {
        throw new Exception("Action " + name + " is not in BDD");
    }
    UrlAttachementWrapper[] uawArray = pISQLAction.getAllAttachUrl(idBdd);
    Vector result = new Vector();
    for(int i = 0; i < uawArray.length; i++) {
        result.add(uawArray[i]);
    }
    return result;
}

//////// PROTECTED //////////////
protected String clearStringOfParameter(String prtString, Parameter pParam) {
    String result = prtString;
    result = result.replaceAll("[$]" + pParam.getNameFromModel() + "[$]", "");
    return result;
}

public static boolean isInBase(Test pTest, String actionName) {
    try  {
        int id = pISQLAction.getID(pTest.getIdBdd(), actionName);
        if (id > 0){
            return true;
        }
        return false;
    } catch (Exception e) {

    }
    return false;
} // Fin de la methode isInBase/1

public boolean existeInBase() throws Exception {
    if (!isInBase()) {
        return false;
    }
    return  pISQLAction.getID(pTest.getIdBdd(), name) == idBdd;
}
} 
```

那么包装类有什么用处，是不是一种设计模式呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T15:33:35.193

我看不到 ActionWrapper 包装了什么，对我来说只是 DataWrapper 接口的实现。

有 3 种“类型”的包装器设计模式：

1.  外观设计模式 = 采用大量类/接口，在内部做一些逻辑并得到小接口。例如“汽车启动”封装在里面：打开汽车，放钥匙，设置DVD，正确的椅子，点火。

2.  装饰器设计模式 = 采用一些具有行为的类，并能够在运行时添加行为。例如，您可以这样做： new LCDDecorator(new DVDDecorator(TurboDecorator(new car)));

3.  适配器设计模式=采用一些新接口并将其调整为一些已知接口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T22:00:50.957

**某些东西以Wrapper**词结尾的事实并不能使它成为一个包装器。要成为包装器，它必须包装一些东西。也就是说，它必须封装一个或多个组件，可能是整个第三方 API。

正如@zzfima 所说，有不同类型的包装器。是的，代理在某些情况下可能是包装器，桥也可能是。

您的代码没有封装任何其他组件，然后，它不是包装器（至少对我而言）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T18:49:55.553

称某些东西为“包装器”并不能使其成为包装器。基本上它需要封装一些东西或包装一些东西，不管你怎么称呼它

# python-3.x - Simplejson错误Python 3.3

> ID：14011355
> 
> 赞同：3
> 
> 时间：2012-12-23T13:31:47.223
> 
> 标签：python-3.x, simplejson

我正在尝试运行一个导入 simplejson 的程序。当我在 Python 2.7 中运行它时没问题，但是当我在 Python 3.3 中运行它时，它说：

> 文件“C:\Python33\lib\simplejson__init__.py”，第 111 行，在 <module>
> 中从解码器导入 JSONDecoder，JSONDecodeError
> ImportError：没有名为“解码器”的模块

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T14:02:21.990

无需使用外部`simplejson`库。Python 3 标准库中包含的模块[`json`是](http://docs.python.org/3/library/json.html)*完全相同**的*模块，但作为 Python 发行版的一部分进行维护。从[`simplejson`PyPI 页面](http://pypi.python.org/pypi/simplejson)引用：

> `simplejson``json`是Python 2.6 和 Python 3.0 中包含的库的外部维护开发版本，但保持与 Python 2.5 的向后兼容性。

使用以下代码切换到`simplejson`if `json`is not present（仅适用于 Python 2.5，该库包含在 2.6 及更高版本中）：

```
try:
    import json
except ImportError:
    # python 2.5
    import simplejson as json 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T13:56:22.287

您需要正确安装它。这意味着使用`easy_install simplejson`or `pip install simplejson`。由于您使用的是 Windows，因此默认情况下不会安装这些命令行工具。

但是，也有一种半自动的方式正确安装包：下载并解压到某个临时文件夹，然后在包的文件夹中打开命令行窗口并[`python setup.py install`](http://docs.python.org/2/install/index.html)在其中执行。

手动将其解压到您的 Python 文件夹几乎总是一个糟糕的选择，这可能会弄乱您的 Python 安装（以防与现有文件发生任何冲突）。

# android - Android：如何使用 sharedpreferences 设置默认 ListView？

> ID：14011359
> 
> 赞同：0
> 
> 时间：2012-12-23T13:32:16.297
> 
> 标签：android, listview, android-activity, sharedpreferences, default

我想做的是：

当我的应用程序第一次加载时，我希望它加载我的默认 ListView，其中有一个名为“New Item”的项目，稍后如果将对我的 ListView 进行更改，我想要一个名为“Default”的按钮settings”，将 ListView 返回为“1 个名为“New Item”的项目，

据我所知，我需要为此使用共享首选项，但我不知道从哪里开始。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:54:14.923

您明确要求的问题不需要`SharedPreferences`，它需要的是 ListView 自定义中的方法`Adapter`。

```
public class CustomAdapter extends BaseAdapter {

    private ArrayList<String> content;

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        TextView tv = (TextView) convertView.findViewById(R.id.textView1);
        tv.setText(content.get(position));
        return convertView;
    }

    private void revert() {
        ArrayList<String> content = new ArrayList<String>();
        content.add("New Item");
        this.content = content;
        notifyDataSetChanged();
    } 
```

然后在您的按钮`onClick`方法中，您只需调用此还原方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T13:36:38.300

你的问题**很**模糊。您可能会使用 SharedPreferences，但它只是一种存储机制。

我不建议在列表中使用重置按钮，但如果你愿意，我会同意的。

首先，您需要创建一个 ArrayAdapter 并在数据更改时从 SharedPreferences 加载它。有很多教程。

在您的 ListView 上，使用 addHeaderView() 和 addFooterView() 添加“+ New Item”行，否则它们将与您的适配器一起使用。基本上只是在添加新项目或删除列表时通知 ArrayAdapter。

如果您需要更多详细信息，如果您在谷歌上搜索，这里有很多深入的教程:)

# php - Magento 内置日历无法在管理后端工作

> ID：14011360
> 
> 赞同：1
> 
> 时间：2012-12-23T13:32:21.013
> 
> 标签：php, javascript, magento, calendar

我在一个奇怪的地方感到震惊..

我正在维护一家出售鲜花的 Magento 商店。我为交货日期创建了一个选项，它是日期类型的。它在前端工作正常，日历弹出，用户可以选择日期，可以更改日期，可以做任何事情，这通常在日历上是允许的。

在后端，当我尝试添加订单时，我选择了一个产品，单击配置按钮添加添加交货日期和数量，日历不起作用。虽然它在单击日历图像时出现，但如果我尝试单击它，它会显示为灰色（就像它未启用），它就消失了，我无法选择日期，甚至无法单击日历消失了，我无法创建订单

有趣的是，如果我在日历文本字段中手动输入日期，那么我可以创建订单（交货日期是强制性选项）。

我试图通过进入 phtml 文件和 php 文件来挖掘解决方案，并在调用配置按钮的位置结束于 sale/orders/create。在此之后，我无法找到产品选项弹出窗口（选择了哪个交货日期），但我无法解决此问题。

我试图让谷歌和论坛帮助，但失败了。

日历在前端工作正常，但在后端不工作。

有人可以帮助我吗？有什么指导方针吗？在哪里可以找到产品选项对话框？任何线索？我正在尝试解决过去 4 天的问题。

**更新：-** 仍然想知道它

现在，如果我在 Mag admin 中设置模板并阻止提示，它就会开始工作

另外，如果我清除管理控制台中的断点，它也可以工作

此外，仅当我尝试从管理员后端创建订单并在那里选择日期时，它才有效，在管理员后端的其他位置它有效

太烦人了，请帮助我，现在已经有几个星期了......谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:00:10.060

在后台查看：`System > Configuration > Developer > JavaScript Settings > Merge JavaScript Files`并确保禁用它。

如果已启用，这可能是您的问题。

[http://fishpig.co.uk/blog/why-you-shouldnt-merge-javascript-in-magento.html](http://fishpig.co.uk/blog/why-you-shouldnt-merge-javascript-in-magento.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-09T08:16:13.027

参考：[https ://magento.stackexchange.com/a/17592/15064](https://magento.stackexchange.com/a/17592/15064)

编辑 js/calendar/calendar-setup.js 并添加：

```
else cal.showAt(params.position[0],params.position[1]);
cal.element.style.zIndex = 99999; // Fix for admin "create order"
return false;} 
```

修复在 Magento 1.9.1 上为我工作

# dart - 在 Dart 中添加表格行？

> ID：14011361
> 
> 赞同：4
> 
> 时间：2012-12-23T13:32:22.070
> 
> 标签：dart

所以我决定从 Dart 开始，我已经想知道用数据添加新表行的最佳方法是什么。

我尝试使用 HTML 获取`tbody`和使用它`children.add()`，但它有一些问题，比如如果`tbody`不存在的话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T13:42:00.547

在 JavaScript 中添加新表行时，您最终会遇到诸如如果没有`tbody`或如何确定最后一行的问题，但在 Dart 中我认为它更容易。

这是一个例子：

![在此处输入图像描述](../Images/e194ea3a8ad3e26aa7b8468b03f75555.png)

```
import 'dart:html';

main() {
  // Find the table.
  TableElement table = query('#foo');

  // Insert a row at index 0, and assign that row to a variable.
  TableRowElement row = table.insertRow(0);

  // Insert a cell at index 0, and assign that cell to a variable.
  TableCellElement cell = row.insertCell(0);
  cell.text = 'hey!';

  // Insert more cells with Message Cascading approach and style them.
  row.insertCell(1)
    ..text = 'foo'
    ..style.background = 'red';

  row.insertCell(2)
    ..text = 'bar'
    ..style.background = 'green';
} 
```

如果要在末尾插入一行，只需编写：

```
table.insertRow(-1); 
```

细胞也是如此。

# html - 如何在页脚框后创建“填充底部”？

> ID：14011362
> 
> 赞同：0
> 
> 时间：2012-12-23T13:32:28.400
> 
> 标签：html, css, footer

我试图简单地将页脚放在我的 html 页面的底部。我一直无法在网上找到像样的教程，主要是因为我的内容虽然简单，但不是标准的（我想）。

我有以下 html 代码（只是一个测试页面，而不是真实的）：

```
<html>

<head>
<link href="style.css" rel="stylesheet" type="text/css">
</head>

<div id = "container">

<div id = "header">
This is the header
</div>

<div id = "body">

<div class="IRL">
<div class="box"><a href= ""><img src="" width="100" height="100"></a></div>
<div class="box"><a href= ""><img src="" width="100" height="100"></a></div>
<div class="box"><a href= ""><img src="" width="100" height="100"></a></div>
<div class="box"><a href= ""><img src="" width="100" height="100"></a></div>
<div class="box"><a href= ""><img src="" width="100" height="100"></a></div>
</div>

<div id = "footer">
Testing footer
</div>

</div>
</div>
</html> 
```

那么“style.css”的相关内容就是：

```
html,

body    {
margin: 0;
padding: 0;
height: 100%;
}

#container  {
min-height:100%;
position:relative;
}

#container {
height:100%;
}

#body {
padding:10px;
padding-bottom:50px;   /* Height of the footer */
}

#footer {
position:absolute;
bottom:0;
width:100%;
height:50px;   /* Height of the footer */ //This is from a tutorial
}

.IRL {

position: absolute; top:50px; left:10px;
}

.IRL li{

margin:0px 150px 0px 0px;
list-style-type:none;

}

.box    {
margin-top: 10px;
padding: 5px 5px 5px 5px;
border: 2px solid #000000;
width:100px;
height: 100px;
color:#000000;
} 
```

问题是即使我将页脚放在底部（经过一些修补后），页脚也会穿过盒子。基本上有人知道如何在盒子之后创建一个间隙吗？我以为填充底部应该这样做？

我希望我已经清楚了

提前谢谢了。干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:46:46.250

尝试添加一个`margin-top`to ，这超出了包含项目`#footer`的元素的高度。`.box`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T13:50:34.713

删除所有绝对定位并添加：

```
.IRL {
  margin-bottom: 50px;
} 
```

[演示](http://jsfiddle.net/n6tde/)

或者，调整各种元素的绝对定位`top`和`bottom`值。

# javascript - 检测实际的计算机倾斜度

> ID：14011364
> 
> 赞同：0
> 
> 时间：2012-12-23T13:32:42.067
> 
> 标签：javascript, css, tilt

知道这是怎么做到的吗？[https://dl.dropbox.com/u/45572383/23122012025.m4v](https://dl.dropbox.com/u/45572383/23122012025.m4v)

我不知道您可以检测除手持设备以外的物理计算机屏幕倾斜。这与我在Mac上有关吗？或者这无论如何都可以在任何计算机上工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T13:40:11.687

当硬件支持时，iOS、OS X 和 Firefox 中有一个 API 用于获取此信息。有关详细答案，请参阅此问题：[如何从 Javascript 访问加速度计/陀螺仪数据？](https://stackoverflow.com/questions/4378435/how-to-access-accelerometer-gyroscope-data-from-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T13:34:51.537

计算机必须内置某种倾斜传感器/陀螺仪，并带有可访问的 API。mac book pro 确实有这样的设备。PC 通常不会，因为显示器不是 PC 本身的一部分，我猜这是您感兴趣的显示器的倾斜度？

macbook pro 中的倾斜传感器用于笔记本电脑而不是屏幕角度，因此如果笔记本电脑屏幕完全打开或几乎关闭，这将无法分辨。

# wpf - 将 TreeView 绑定到数据集

> ID：14011366
> 
> 赞同：1
> 
> 时间：2012-12-23T13:33:04.910
> 
> 标签：wpf, data-binding, treeview, dataset

我有一个从 Oracle 查询创建的数据集。我从函数中获取数据表并将其添加到数据集。

现在我尝试将treeview绑定到ds。我的代码背后：

```
private void init_TreeView()
        { 

           //TreeViewItem parent = PM_TreeView.Items.Add("Requirements");
           DataTable dt  =  DataBases.RunQuery();
           dt.TableName = "REQ";
           DataSet ds = new DataSet();
           ds.Tables.Add(dt);
           //ds.Relations.Add("rsParentChild", ds.Tables["REQ"].Columns["RQ_REQ_ID"], ds.Tables["REQ"].Columns["RQ_FATHER_ID"]);
           var dataSet = ds;
           _rootNodes = dataSet.Tables["REQ"].DefaultView;
           _rootNodes.RowFilter = "RQ_FATHER_ID = -1";
           this.DataContext = this;
         } 
```

和

```
private DataView _rootNodes; 
```

和

```
public DataView RootNodes
{
    get { return _rootNodes; }
} 
```

和我的 XAML：

```
<TreeView x:Name="PM_TreeView" ItemsSource="{Binding RootNodes}" HorizontalAlignment="Left" Height="445" Margin="44.847,68.285,0,0" VerticalAlignment="Top" Width="320" Foreground="{x:Null}" BorderBrush="{x:Null}" Background="#FFBBB6B6" FontFamily="Segoe UI" FontSize="13.333">
            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate ItemsSource="{Binding rsParentChild}">
                    <TextBlock Text="{Binding NodeDescription}" />
                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>
        </TreeView> 
```

我的数据表是：

```
RQ_REQ_ID RQ_FATHER_ID RQ_REQ_NAME
0         -1           REQ
1          0           QC11 
```

但我在树视图上一无所获:)

提前10倍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:12:43.653

我尝试了以下方法：

```
 <TreeView Name="tv" ItemsSource="{Binding Root}">
        <TreeView.ItemTemplate>
            <HierarchicalDataTemplate ItemsSource="{Binding Parents}">
                <TextBlock Text="{Binding Value}"/>
            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate>
    </TreeView> 
```

在我的窗口内我有：

```
 DataSet ds = new DataSet("Data");

        DataTable t = new DataTable("Table");
        t.PrimaryKey = new DataColumn[] { t.Columns.Add("Key", typeof(int)) };
        t.Columns.Add("Value", typeof(string));
        t.Columns.Add("Father", typeof(int));
        ds.Tables.Add(t);

        ds.Relations.Add("Parents", t.Columns["Key"], t.Columns["Father"], false);

        t.Rows.Add(1, "First", -1);
        t.Rows.Add(2, "Second", -1);
        t.Rows.Add(3, "Third", 2);

        Root = new DataView(t);
        Root.RowFilter = "[Father]<0";
        t.DefaultView.RowFilter = "[Father] < 0";

        tv.DataContext = this; 
```

其中`Root`ist 声明为：

```
public DataView Root { get; private set; } 
```

结果与预期一致。

# python - Sijax 和 Flask URL 重定向

> ID：14011367
> 
> 赞同：0
> 
> 时间：2012-12-23T13:33:15.960
> 
> 标签：python, flask, sijax

我正在尝试使用一点 ajax 制作登录表单。当用户填写错误的密码/用户名组合时，错误消息会使用 sijax 添加到页面中：

这是我的两种方法：
1) Sijax 方法

```
@staticmethod
def login(obj_response, uname, password):
    # Verify the user.
    username = uname.strip()
    password = password.strip()
    user = User.query.filter_by(username = username).first()

    if user is None:
        error = 'Invalid username/password combination'
    elif password != user.password:
        error = 'Invalid username/password combination'

    # Log the user in if the info is correct.
    else:
        login_user(user)
        session['logged_in'] = True 
        obj_response.redirect(url_for('user_home'))

    # Clear the previous error message.
    obj_response.script("$('#errormessage').remove();")

    # Add an error message to the html if there is an error.
    obj_response.html_append(".loginform", "<h4 id='errormessage'>" + error + "</h4>") 
```

2）python方法：

```
@app.route('/login', methods=['GET', 'POST'])
def login():
if g.sijax.is_sijax_request:
    # The request looks like a valid Sijax request
    # Let's register the handlers and tell Sijax to process it
    g.sijax.register_object(SijaxHandler)
    return g.sijax.process_request()

return render_template('login.html') 
```

我想要知道的是检查用户名/密码组合是否正确，如果它没有使用 ajax 显示错误消息，但如果是，则将用户重定向到他的主页（url_for（'userhome'））。

我正在尝试使用 sijax 方法知道它：obj_response.redirect(url_for('user_home')) 但这不起作用。

有任何想法吗？

我收到此错误： obj_response.html_append(".loginform", "" + error + "") UnboundLocalError: local variable 'error' referenced before assignment

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:35:30.790

问题是您总是使用`error`但仅在出现错误时才定义它。

简单的解决方案：在该行`error = None`之前添加。`if user is None:`除此之外，仅在出现错误时创建错误消息元素：

```
if error:
    obj_response.html_append(".loginform", "<h4 id='errormessage'>" + error + "</h4>") 
```

# java - 以下片段是什么意思？

> ID：14011369
> 
> 赞同：0
> 
> 时间：2012-12-23T13:33:21.797
> 
> 标签：java

```
 TestClass.this.onError(error); 
```

我认为这是java中的关键，类名如何跟随？这是java的特殊功能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-23T13:35:59.023

这是一种从内部类中访问封闭类的隐式实例的方法。例如：

```
public class Test {

    private final String name;

    public Test(String name) {
        this.name = name;
    }

    public static void main(String[] args) {
        Test t = new Test("Jon");
        // Create an instance of NamePrinter with a reference to the new instance
        // as the enclosing instance.
        Runnable r = t.new NamePrinter();
        r.run();
    }    

    private class NamePrinter implements Runnable {
        @Override public void run() {
            // Use the enclosing instance's name variable
            System.out.println(Test.this.name);
        }
    }
} 
```

有关内部类和封闭实例的更多信息，请参见[Java 语言规范第 8.1.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.3)节，有关“限定”表达式的更多信息，请参见[第 15.8.4 节：](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.8.4)`this`

> 任何词法封闭的实例（第 8.1.3 节）都可以通过显式限定关键字 this 来引用。
> 
> 让`C`是 表示的类`ClassName`。设 n 是一个整数，它`C`是出现限定 this 表达式的类的第 n 个词法封闭类。
> 
> 表单表达式的值`ClassName.this`是 this 的第 n 个词法封闭实例。
> 
> 表达式的类型是`C`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T13:36:19.230

从内部类中，您正在从包含它的 TestClass 实例调用一个即时方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T13:36:22.683

您可以从类的内部类中使用它，它将引用外部类。

例如，如果您有 Cat 类

```
public class Cat {

private int age;
private Tail tail;

public Cat(int age) {
    this.age = age;
    this.tail = new Tail();
}

class Tail {

    public void wave() {
        for(int i = 0; i < Cat.this.age; i++) {
            System.out.println("*wave*");
        }
    }

}

public Tail getTail() {
    return tail;
}

/**
 * @param args
 */
public static void main(String[] args) {
    new Cat(10).getTail().wave();
}

} 
```

# java - java lib解析SVN转储文件？

> ID：14011371
> 
> 赞同：3
> 
> 时间：2012-12-23T13:34:04.363
> 
> 标签：java, svn, svndump, svndumpfilter

是否有用于 SVN 转储文件的 Java 解析器，类似于 svndumpfilter？我知道 svnkit 有这样的脚本，但是我没有找到 API 文档或实际读取转储文件内容的示例。

我正在编写一个必须分析 SVN 转储的 Java 应用程序。理想情况下，我想逐项遍历转储文件（它太大而无法全部读取）。是否有现成的工具可以使用，或者我应该根据转储文件语法自己实现解析器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T22:07:58.573

我想到的第一个问题是你为什么要读取转储文件和存储库？此外，此类文档可以在 svnkit.com 提供的[javadocs](http://svnkit.com/javadoc/org/tmatesoft/svn/core/wc2/admin/SvnRepositoryLoad.html)中找到，并且还有实现完整 svnadmin 加载部分的命令行处理示例。

# python - 使用 Python 运行后台进程

> ID：14011373
> 
> 赞同：1
> 
> 时间：2012-12-23T13:34:07.953
> 
> 标签：python, subprocess

我正在尝试发送 GET 请求，但在开始请求之前，我想捕获流量。可以使用以下命令捕获流量：

```
dumpcap -i eth0 -f "udp port 53" -w dns.cap 
```

在后台。当我捕获数据包时，我需要通过发送一些 URL 来发出一些请求。现在，使用下面的代码，我的捕获代码似乎不起作用，我什至在我的文件夹中都看不到 dns.cap 文件。

有什么问题？

```
import requests
import os
import subprocess
import urllib
print "start capturing packets...\n"
#os.system("dumpcap -i eth0 -f \"udp port 53\" -w dns.cap"
os.spawnl(os.P_NOWAIT,'dumpcap -i eth0 -f \"udp port 53\" -w dns.cap')
print urllib.urlopen('http://www.google.com').read()
#resp = requests.get('http://httpbin.org')
#resp=requests.get('http://httpbin.org')
print "ok" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:44:53.040

`os.spanwl`被认为是旧的，应该替换为`subprocess.Popen`. 用这个替换`os.spanwnl`调用：

```
subprocess.Popen(['/usr/bin/dumpcap', '-i', 'eth0', '-f', 'udp port 53', 
                  '-w', '/tmp/dns.cap']) 
```

最好在启动 dumpcap 后添加一些暂停（睡眠），以确保在您发出请求时建立捕获。

# url - OpenID 允许使用哪种 URI？

> ID：14011381
> 
> 赞同：1
> 
> 时间：2012-12-23T13:35:06.703
> 
> 标签：url, openid, uri

我正在使用 OpenID 实现登录系统。

[医生说](http://openid.net/specs/openid-attribute-exchange-1_0.html)：

> **主题标识符**
> 
> 一组属性的标识符。它必须是一个 URI。主题标识符对应于消息的身份验证部分中的最终用户标识符。换句话说，消息的属性交换部分的身份属性的主体与认证部分的最终用户相同。主题标识符不包括在属性交换中。

URI的定义相当大，可以是`http://`，也可以是`gopher://`。

我确定 gopher 不是一个有效的 URI 协议，但是，除了 http(s)，还有什么可以作为 OpenID 协议的主题标识符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:50:31.560

你引用了错误的规范。[openid 规范](http://openid.net/specs/openid-authentication-2_0.html#anchor12)，第7.2 节说：

> # 7.2\. 正常化
> 
> 最终用户的输入必须规范化为标识符，如下所示：
> 
> *   如果用户的输入以“xri://”前缀开头，则必须将其去掉，以便以规范形式使用 XRI。
> *   如果结果字符串的第一个字符是 XRI 全局上下文符号（“=”、“@”、“+”、“$”、“!”）或“(”，如 [XRI_Syntax_2 的第 2.2.1 节中定义的） .0]，那么输入应该被视为 XRI。
> *   否则，输入应该被视为一个 http URL；如果它不包含“http”或“https”方案，则标识符必须以字符串“http://”为前缀。如果 URL 包含片段部分，它必须与片段分隔符“#”一起被剥离。有关详细信息，请参阅第 11.5.2 节。
> *   然后，URL 标识符必须在检索其内容时通过以下重定向进一步规范化，最后将 [RFC3986] 第 6 节中的规则应用于最终目标 URL。依赖方必须将这个最终 URL 记录为声明的标识符，并在请求身份验证时使用。

从第三点我们可以推断出标识符必须是 http(s) URL 或 XRI。

# ios - 从响应字符串中提取令牌

> ID：14011385
> 
> 赞同：0
> 
> 时间：2012-12-23T13:35:40.773
> 
> 标签：ios, oauth

如何从响应字符串中提取令牌？（不知道token的长度，所以这里不能使用NSRange）

```
oauth_callback_confirmed=true&oauth_token=72157632316931441
-fadcd6ef70cbd06c&oauth_token_secret=a7e7b046a8960559 
```

当前代码是（它给出了令牌和字符串的其余部分）：

```
NSRange access_token_range = [operation.responseString rangeOfString:@"oauth_token="];
        if (access_token_range.length > 0) {
            int from_index = access_token_range.location + access_token_range.length;
            NSString *access_token = [operation.responseString substringFromIndex:from_index];

            NSLog(@"access_token:  %@", access_token);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:57:22.683

最好（更优雅）将响应字符串分离为键值对，然后分别处理它们：

```
NSString *token = nil;
NSArray *kvpairs = [operation.responseString componentsSeparatedByString:@"&"];
for (NSString *kvpair in kvpairs) {
    NSArray *keyAndValue = [kvpair componentsSeparatedByString:@"="];
    NSString *key = [keyAndValue objectAtIndex:0];
    if ([key isEqualToString:@"oauth_token"]) {
        token = [keyAndValue objectAtIndex:1];
        break;
    }
} 
```

现在`token`将包含令牌，或者`nil`如果找不到它。

# jsf - 如何从 managedBean 设置 jsf 组件属性？

> ID：14011389
> 
> 赞同：0
> 
> 时间：2012-12-23T13:36:12.793
> 
> 标签：jsf, netbeans, primefaces, managed-bean

如标题中所述，我想从托管 bean 更改由 jsf 页面中的 id 标识的组件属性。这是我的jsf代码：

```
<p:calendar value="#{eventBean.beginDate}" id="from" pattern="dd/MM/yyyy HH:mm" required="true"/> 
```

这是一个 PrimeFaces 组件。在页面初始化时，我有一个空字段，通过单击日历显示。选择日期用所选值填充字段。我的问题是：如何在我的 jsf 页面初始化时用当前日期填充该字段？我不知道是否有可能通过使用 PrimeFaces 日历组件属性（我尝试了几件不起作用的事情），我想知道是否可以使用托管 bean。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:45:22.770

您需要更新/定义 bean 的默认值。在这种情况下，您可以在构造函数中定义值；如果值取决于注入的属性，则需要使用 @PostConstruct 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T13:41:35.650

只需在 bean 的（后）构造期间设置属性。

```
private Date beginDate;

public EventBean() {
    // Here, in constructor.
    eventDate = new Date();
}

@PostConstruct
public void init() {
    // Or here, in a @PostConstruct method. 
    // This is invoked after any dependency and managed property injection.
    eventDate = new Date();
} 
```

请注意，此方法并非特定于日历属性。它适用于各种属性。

# iphone - iOS - 以编程方式使用自动布局将 UIView 定位在超级视图的中心

> ID：14011395
> 
> 赞同：26
> 
> 时间：2012-12-23T13:36:59.190
> 
> 标签：iphone, ios, autolayout

如何使用 Auto Layout 以编程方式将 UIView 设置为位于其父视图的中心？

```
UIButton* viewObj = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[viewObj setTranslatesAutoresizingMaskIntoConstraints:NO];
[viewObj setBackgroundColor:[UIColor greenColor]];
[self.view addSubview:viewObj];

NSLayoutConstraint* cn = [NSLayoutConstraint constraintWithItem:viewObj
                                                      attribute:NSLayoutAttributeCenterX
                                                      relatedBy:NSLayoutRelationEqual
                                                         toItem:self.view
                                                      attribute:NSLayoutAttributeCenterX 
                                                     multiplier:1.0
                                                       constant:0];
[self.view addConstraint:cn];
cn = [NSLayoutConstraint constraintWithItem:viewObj 
                                  attribute:NSLayoutAttributeCenterY
                                  relatedBy:NSLayoutRelationEqual 
                                     toItem:self.view
                                  attribute:NSLayoutAttributeCenterY
                                 multiplier:1.0
                                   constant:0];
[self.view addConstraint:cn]; 
```

上面的代码适用于 UIButton，但我无法用适用于 UIView 的内容替换第一行。

我试过了

```
UIView* viewObj = [UIView alloc] initWithFrame:CGRectZero]; 
```

但该视图未显示在模拟器中。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-23T15:02:16.603

由于您在使用 Auto Layout 的上下文中提出了这个问题，因此这里的问题是 UIButton 具有内在大小（通过 intrinsicContentSize 方法进行通信），它为 Auto Layout 提供有关宽度和高度的信息，但 UIView 通常没有。所以你需要添加更多与宽度和高度相关的约束。

如果你希望你的 UIView 是一个固定的尺寸（比如说，200x200），你可以添加这些行：

```
cn = [NSLayoutConstraint constraintWithItem:viewObj 
                                  attribute:NSLayoutAttributeHeight
                                  relatedBy:NSLayoutRelationEqual 
                                     toItem:nil
                                  attribute:NSLayoutAttributeNotAnAttribute 
                                 multiplier:1
                                   constant:200];
[viewObj addConstraint:cn];

cn = [NSLayoutConstraint constraintWithItem:viewObj
                                  attribute:NSLayoutAttributeWidth
                                  relatedBy:NSLayoutRelationEqual
                                     toItem:nil
                                  attribute:NSLayoutAttributeNotAnAttribute 
                                 multiplier:1 
                                   constant:200];
[viewObj addConstraint: cn]; 
```

请注意，`toItem:`参数是`nil`，第二个属性是`NSLayoutAttributeNotAnAttribute`，因为您没有指定相对于其他任何内容的宽度和高度。如果您希望子视图的高度和宽度相对于父视图（例如 0.5），您可以这样做：

```
cn = [NSLayoutConstraint constraintWithItem:viewObj
                                  attribute:NSLayoutAttributeHeight
                                  relatedBy:NSLayoutRelationEqual
                                     toItem:self.view
                                  attribute:NSLayoutAttributeHeight 
                                 multiplier:0.5 
                                   constant:0];
[self.view addConstraint:cn];
cn = [NSLayoutConstraint constraintWithItem:viewObj
                                  attribute:NSLayoutAttributeWidth
                                  relatedBy:NSLayoutRelationEqual
                                     toItem:self.view
                                  attribute:NSLayoutAttributeWidth
                                 multiplier:0.5
                                   constant:0];
[self.view addConstraint: cn]; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-27T18:01:36.777

`UIButton`, `UIImageView`,`UIlabel`并且`UITextField`可以根据它们的内容属性自动设置它们的大小。a 的宽度和高度`UIImageView`由`UIImage`它可能包含的设置。a 的大小`UILabel`将取决于其文本。a 的宽度和高度`UIButton`由标题和它拥有的图像定义（您可以通过[Intrinsic Content Size](https://www.objc.io/issues/3-views/advanced-auto-layout-toolbox/#intrinsic-content-size)了解更多信息）。

因此，当您想使用自动布局将 a `UIButton`、 a `UILabel`、 a`UITextField`或 a居中时，几乎`UIImageView`在`UIView`所有情况下您都不必为它们的宽度和高度创建约束。您只需要为它们设置水平和垂直约束。

但是，使用自动布局，`UIView`没有子视图的 a 不能依赖任何东西来设置其大小，除非您为其提供一些任意宽度和高度约束。根据您的需要，您可以通过 3 种不同的方式解决此问题。

* * *

## 纯自动布局风格

在这里，我们`UIView`直接将我们的宽度和高度设置为自动布局约束：

```
override func viewDidLoad() {
    super.viewDidLoad()

    let newView = UIView()
    newView.backgroundColor = .redColor()
    newView.translatesAutoresizingMaskIntoConstraints = false
    view.addSubview(newView)

    // Auto layout code using anchors (iOS9+)
    let horizontalConstraint = newView.centerXAnchor.constraintEqualToAnchor(view.centerXAnchor)
    let verticalConstraint = newView.centerYAnchor.constraintEqualToAnchor(view.centerYAnchor)
    let widthConstraint = newView.widthAnchor.constraintEqualToAnchor(nil, constant: 100)
    let heightConstraint = newView.heightAnchor.constraintEqualToAnchor(nil, constant: 100)
    NSLayoutConstraint.activateConstraints([horizontalConstraint, verticalConstraint, widthConstraint, heightConstraint])
} 
```

* * *

## 自动调整大小的蒙版样式

在这里，我们`UIView`用它的宽度和高度初始化我们的，使它的中心和它的父视图的中心相等，并创建一些自动调整大小的掩码。然后，我们要求 UIKit 将这些自动调整大小的掩码转换为自动布局约束：

```
override func viewDidLoad() {
    super.viewDidLoad()

    let newView = UIView(frame: CGRect(x: 0.0, y: 0.0, width: 100.0, height: 100.0))
    newView.backgroundColor = .redColor()

    newView.center = CGPointMake(view.bounds.midX, view.bounds.midY)
    newView.autoresizingMask = [.FlexibleLeftMargin, .FlexibleRightMargin, .FlexibleTopMargin, .FlexibleBottomMargin]

    newView.translatesAutoresizingMaskIntoConstraints = true // default is true
    view.addSubview(newView)
} 
```

* * *

## 子类风格

在这里，我们创建一个子类`UIView`并覆盖它的`intrinsicContentSize()`方法（[声明](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/#//apple_ref/occ/instm/UIView/intrinsicContentSize)），以便它返回所需的大小：

```
import UIKit

class CustomView: UIView {
    override func intrinsicContentSize() -> CGSize {
        return CGSize(width: 100, height: 100)
    }
}

class ViewController: UIViewController {

    override func viewDidLoad() {
        super.viewDidLoad()

        let newView = CustomView()
        newView.backgroundColor = .redColor()
        newView.translatesAutoresizingMaskIntoConstraints = false
        view.addSubview(newView)

        let horizontalConstraint = NSLayoutConstraint(item: newView,
            attribute: .CenterX,
            relatedBy: .Equal,
            toItem: view,
            attribute: .CenterX,
            multiplier: 1,
            constant: 0)
        view.addConstraint(horizontalConstraint)
        let verticalConstraint = NSLayoutConstraint(item: newView,
            attribute: .CenterY,
            relatedBy: .Equal,
            toItem: view,
            attribute: .CenterY,
            multiplier: 1,
            constant: 0)
        view.addConstraint(verticalConstraint)
    }

} 
```

# java - 如何通过单击 JButton 添加 JPanel？

> ID：14011397
> 
> 赞同：5
> 
> 时间：2012-12-23T13:37:11.170
> 
> 标签：java, swing, jpanel, jbutton, actionlistener

我正在尝试创建一个小型 GUI，它有 2 个 JButton 和 2 个 JPanel，每个都有一些绘图动画。默认情况下，它必须显示第一个 JPanel，并且通过单击第二个 JButton 我想查看我的第二个 JPanel。所以：我创建了 JFrame、Panel1 和 Panel2，在那里我绘制了我的动画，创建了 Button1 和 Button2 并向它们添加了 ActionListener。我还有 MainPanel，它在字段变量 i 中。通过更改此“i”，我的构造函数将 Panel1（默认）或 Panel2（通过单击 JButton2 我更改 i）添加到 MainPanel。比我将此 MainPanel 添加到我的框架中。所以我的问题是：在 MainPanel 类中我有 refreshMe 方法，我应该在那里写什么来使我的 GUI 正常工作？谢谢。这是我的代码：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class GuiTest {

    public static void main(String[] args) {
        JFrame f = new JFrame();
        MainPanel myPanel = new MainPanel();
        f.add(myPanel);
        Button1 button1 = new Button1();
        Button2 button2 = new Button2();
        myPanel.add(button1);
        myPanel.add(button2);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.pack();
        f.setVisible(true);
    }
}

class MainPanel extends JPanel {
    Panel1 p1 = new Panel1();
    Panel2 p2 = new Panel2();
    public int i = 1;  //this is being changed later by clicking JButton
    // I use this setter later in actionPerformed in order to change i
    public void setI(int i) {
        this.i = i;
    }

    MainPanel() { 
        if (i == 1) {
            this.add(p1);
        }
        if (i == 2) {
            this.add(p2);
        }
    }

    public void refreshMe() {
        // Need some help here:
        // I don't know what should I write, how to make a repaint of myPanel?
        System.out.println("just test, if the method refreshMe working by clicking some button");
    }
}

class Panel1 extends JPanel {

    public Panel1() {
        this.setBackground(Color.BLUE);
        // a lot of drawing stuff going on here
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(200, 200);
    }
}

class Panel2 extends JPanel {

    public Panel2() {
        this.setBackground(Color.GREEN);
        // a lot of drawing stuff going on here
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(200, 200);
    }

}

class Button1 extends JButton {
    MainPanel someObj1 = new MainPanel();

    Button1() {
        setText("Show Annimation A");
        addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                someObj1.setI(1);
                System.out.println("The variable i is now: " + someObj1.i);
                someObj1.refreshMe();

            }
        });
    }

}

class Button2 extends JButton {
    MainPanel someObj2 = new MainPanel();

    Button2() {
        setText("Show Annimation B");
        addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                someObj2.setI(2);
                System.out.println("The variable i is now: " + someObj2.i);
                someObj2.refreshMe();
            }
        });

    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-23T16:49:50.833

为了在添加/删除或调整可见容器调用上的组件或在添加/删除或调整组件大小后的容器实例上反映`revalidate()`更改`repaint()`。

尽管这在您的代码中不起作用，但主要原因是在 JButton 类中您重新创建了一个新实例，`MainPanel`实际上 2`JButtons`应该共享正在使用的单个实例（您可以将 MainPanel 实例传递给`JButton`s 构造函数，但您不应该t 真的要扩展 a`JButton`除非添加自定义功能）：

```
class Button2 extends JButton {
    MainPanel someObj2 = new MainPanel();//you create an instance of MainPanel which isnt even showing and than do changes on that, this way you will never see any of the changes

    Button2() {
    }
} 
```

关于您的代码的其他一些建议：

*   不要不必要地扩展`JButton`类，只需创建一个`JButton`类似的实例并`JFrame`在实例上调用方法`JButton`。

*   `Event Dispatch Thread`不要忘记通过块创建/操作 Swing 组件`SwingUtilities.invokeLater(..)`，请阅读[此处](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)了解更多信息。

这是您修复的代码（以上建议等已实施）：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Test {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame f = new JFrame();

                final MainPanel myPanel = new MainPanel();
                f.add(myPanel);

                JButton button1 = new JButton("Show Animation A");
                JButton button2 = new JButton("Show Animation B");

                button1.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        myPanel.setI(1);
                        System.out.println("The variable i is now: " + myPanel.i);
                        myPanel.refreshMe();
                    }
                });
                button2.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        myPanel.setI(2);
                        System.out.println("The variable i is now: " + myPanel.i);
                        myPanel.refreshMe();
                    }
                });

                myPanel.add(button1);
                myPanel.add(button2);
                myPanel.checkPanel();

                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                f.pack();
                f.setVisible(true);
            }
        });
    }
}

class MainPanel extends JPanel {

    Panel1 p1 = new Panel1();
    Panel2 p2 = new Panel2();
    public int i = 1;  //this is being changed later by clicking JButton
    // I use this setter later in actionPerformed in order to change i

    public void setI(int i) {
        this.i = i;
    }

    public void refreshMe() {
        checkPanel();

        revalidate();
        repaint();
        // Need some help here:
        // I don't know what should I write, how to make a repaint of myPanel?
        System.out.println("just test, if the method refreshMe working by clicking some button");
    }

    public void checkPanel() {
        if (i == 1) {
            this.add(p1);
            this.remove(p2);//or it will remain there as this is default flowlayout
        } else if (i == 2) {
            this.add(p2);
            this.remove(p1);
        }
    }
}

class Panel1 extends JPanel {

    public Panel1() {
        this.setBackground(Color.BLUE);
        // a lot of drawing stuff going on here
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(200, 200);
    }
}

class Panel2 extends JPanel {

    public Panel2() {
        this.setBackground(Color.GREEN);
        // a lot of drawing stuff going on here
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(200, 200);
    }
} 
```

但是我建议一些更简单的东西，幸运的是你有 2 个选择：

1）使用[`CardLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)它将允许您在单个`JFrame`/容器上的多个组件之间切换。

这是我做的一个例子：

![在此处输入图像描述](../Images/af87105b5968387b97cd720d2c770b68.png)

```
import java.awt.BorderLayout;
import java.awt.CardLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Test {

    private final static String PANEL1 = "panel 1";
    private final static String PANEL2 = "panel 2";

    public Test() {
        initComponents();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }

    private void initComponents() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel panel1 = new JPanel();
        panel1.add(new JLabel("Panel 1"));

        JPanel panel2 = new JPanel();
        panel2.add(new JLabel("Panel 2"));

        //Create the panel that contains the "cards".
        final JPanel cards = new JPanel(new CardLayout());
        cards.add(panel1, PANEL1);
        cards.add(panel2, PANEL2);

        //create button to allow chnage to next card
        JButton buttonNext = new JButton(">");
        buttonNext.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                CardLayout cl = (CardLayout) (cards.getLayout());//get cards
                cl.next(cards);
            }
        });

        //create button to allow chnage to previous card
        JButton buttonPrev = new JButton("<");
        buttonPrev.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                CardLayout cl = (CardLayout) (cards.getLayout());//get cards
                cl.previous(cards);
            }
        });

        //create panel to hold buttons which will allow switching between cards
        JPanel buttonPanel = new JPanel();
        buttonPanel.add(buttonPrev);
        buttonPanel.add(buttonNext);

        frame.add(cards);
        frame.add(buttonPanel, BorderLayout.SOUTH);

        frame.pack();
        frame.setVisible(true);
    }
} 
```

2）使用`removeAll()`技术，即调用`frame.getContentPane().removeAll()`，它将删除当前所有组件，`JFrame`而不是添加新内容和调用`revalidate()`（`repaint()`也可能希望在`pack()`其中添加）`JFrame`实例以反映更改。虽然我推荐`CardLayout`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T13:51:03.183

我想你可以用它`CardLayout`来实现你的功能。请参考[这里](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

# java - 我需要 FileDescriptor“同步”和 MappedByteBuffer“强制”吗？

> ID：14011398
> 
> 赞同：1
> 
> 时间：2012-12-23T13:37:28.377
> 
> 标签：java, nio, memory-mapped-files

当我想确保 MappedByteBuffer 的更改应该同步回磁盘时，我需要`randomAcccessFile.getFD().sync()`还是`mappedByteBuffer.force()`两者都需要？（在我的简单测试中，它们似乎都不是必需的 - 令人困惑......）

有人对实际的基础操作有一个想法，或者至少可以解释差异（如果有的话）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:28:41.580

首先，FileDescriptor.sync 等价于 FileChannel.force（调用 POSIX fsync 方法）

其次，在 Ron Hitchens 的书“Java NIO”中（通过[谷歌书籍](http://www.google.de/search?tbm=bks&q=java%20nio)）在关于 MappedByteBuffer 的章节中它说

> MappedByteBuffer.force() 类似于 FileChannel 类中的同名方法。它强制对映射缓冲区所做的任何更改刷新到永久磁盘存储。通过 MappedByteBuffer 对象更新文件时，应始终使用 MappedByteBuffer.force() 而不是 FileChannel.force()。通道对象可能不知道通过映射缓冲区进行的所有文件更新。MappedByteBuffer 没有给你不刷新文件元数据的选项——它也总是被刷新。请注意，关于非本地文件系统的相同注意事项在这里适用于 FileChannel.force

所以，是的。您需要调用 MappedByteBuffer.force！

但是后来我发现[了这个错误](http://bugs.sun.com/view_bug.do?bug_id=6816049)，这表明至少在 Windows 上这两个调用仍然是必要的。

# c++ - 为什么我得到错误 operator() 不能重载？

> ID：14011399
> 
> 赞同：3
> 
> 时间：2012-12-23T13:37:31.420
> 
> 标签：c++

我有两个重载`operator()`，一个接受一个函数引用，该引用将任何类型作为其参数并返回任何类型。另一个接受一个函数引用，该引用将任何类型作为其参数但返回`void`。在实例化我的类时，我收到以下错误：

> `In instantiation of 'A<void, int>':`
> `error: 'void A<T, F>::operator()(void (&)(F)) [with T = void, F = int]' cannot be overloaded`
> `error: with 'void A<T, F>::operator()(T (&)(F)) [with T = void, F = int]'`

```
template <typename T, typename F> struct A {
    void operator()(T (&)(F)) {}
    void operator()(void (&)(F)) {}
};

void f(int) {}

int main() {

    A<void, int> a;
    a(f);
} 
```

这些错误仅在第一个模板参数`T`为时发生`void`。我想知道我做错了什么以及为什么我不能`operator()`以这种方式超载？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T13:39:40.437

好吧，如果`T`是，`void`那么您有两个具有完全相同原型的函数定义 - 破坏 ODR。

尝试专门化您的结构以防止这种情况：

```
template <typename T, typename F> struct A {
    void operator()(T (&)(F)) {}
    void operator()(void (&)(F)) {}
};

template <typename F> struct A<void, F> {
    void operator()(void (&)(F)) {}
}; 
```

# jquery - 使用 Jquery 填充下拉列表的 Grails 远程函数

> ID：14011400
> 
> 赞同：0
> 
> 时间：2012-12-23T13:37:38.670
> 
> 标签：jquery, grails

我正在使用 jquery 作为我的 grails 应用程序的 ajax 库。我得到了一个从另一个下拉列表填充的下拉列表，但没有出现任何值。

普惠制：

```
 <label for="countryddl" >Country:</label>
  <g:select name="countryddl" id="countryddl" from="${locations.country}"  
            keys ="${locations.country}"
            noSelection="['':'Select one...']"
           onChange="${remoteFunction( action:'updateProvince',
                                          params: '\'id=\'+escape(this.value)',
                                          update: [success: 'provinceddl'] )}"

  ></g:select> <br/><br />
    <label for="provinceddl" >Province:</label>
  <g:select name="provinceddl" id ="provinceddl" noSelection="['':'Select one...']" from=""></g:select> 
```

控制器：

```
def updateProvince = {
        def country = params['id']
        def locations = Location.findAllByCountry(country)
        render locations.province as JSON

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T17:46:04.990

普惠制：

```
 <label for="countryddl" >Country:</label>
  <g:select name="countryddl" id="countryddl" from="${locations.country}"  
       keys ="${locations.country}"
       noSelection="['':'Select one...']"
       onChange="${remoteFunction( action:'updateProvince',
                     params: '\'id=\'+escape(this.value)',
                     update: [success: 'provinceddl'] )}"

  ></g:select> 
  <br><br>
  <div id="provinceddl">
      <p>Provinces will be loaded here according to country selected</p>
  </div> 
```

控制器：

```
def updateProvince = {
        def country = params['id']
        def locations = Location.findAllByCountry(country)
        render(template:'result', model:[provinces: locations.collect{it.province}]
    } 
```

_result.gsp

```
<label for="provinceddl" >Province:</label>
    <g:select name="provinceddl" noSelection="['':'Select one...']" from="${provinces}">
</g:select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T15:31:40.457

要更新的 javascript 函数`select`：

```
function updateSelect(e, selectId) {
// The response comes back as a bunch-o-JSON
var json = eval("(" + e.responseText + ")") 

if (json) {
    var rselect = document.getElementById(selectId);

    // Clear all previous options
    var l = rselect.length;

    var selectedKey = "undefined";
    while (l > 0) {
        l--
        var value = rselect.options[l].value;
        var attr = rselect.options[l].getAttribute("selected");
        if(attr != null && attr.trim().length > 0) {
            selectedKey = value
        }
        rselect.remove(l);
    }

    // Rebuild the select
    for ( var i = 0; i < json.length; i++) {
        var j = json[i];
        var opt = document.createElement('option');
        opt.text = j.name;
        opt.value = j.id;
        if(j.id == selectedKey) {
            opt.setAttribute('selected', 'selected');
        }
        try {
            rselect.add(opt, null) // standards compliant; doesn't work in
            // IE
        } catch (ex) {
            rselect.add(opt) // IE only
        }
    }
} 
```

}

在普惠制上：

```
<tr>
                <td>Teacher:</td>
                <td><eb:select name="teacher" from="${ availableTeachers }"
                        optionKey="id" optionValue="fullName" id="teacher"

                        onchange="${remoteFunction(
                            controller:controllerName, 
                            action:'ajaxGetClassesForTeacher', 
                            params:'\'id=\' + escape(this.value)', 
                            onComplete:'updateClasses(arguments[0])')}"
                         /></td>
            </tr>
            <tr>
                <td>Class:</td>
                <td><eb:select name="schoolClass" from="${ availableClasses }"
                        optionKey="id" optionValue="name"
                        id="schoolClass"  /></td>
            </tr>

<r:script disposition="defer">

function updateClasses(e) {
    updateSelect(e, "schoolClass");
}

</r:script> 
```

在控制器中：

```
def ajaxGetClassesForSchool(params) {
    School school = School.get(params.id)
    def classes = SchoolClass.findAll() {
        eq("school", school)
    }

    classes = classes.collect() {
        new NameIdGSP(id:it.id, name:it.name)
    }
    def json = classes as JSON
    return json
} 
```

一个简单的 groovy 类在哪里`NameIdGSP`只包含`int id`和`String name`properites

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T15:17:16.843

问题是`update: [success: 'provinceddl']`除了使用呈现的内容设置元素的 HTML 属性。您可能想要的是创建一个包装 div 并更新该 div。`<g:select />`然后使用该数据再次渲染整体。如果这不能为您解答，我稍后将通过示例进行编辑。

# jquery - jquery 在动态加载的内容中不起作用

> ID：14011401
> 
> 赞同：-1
> 
> 时间：2012-12-23T13:37:47.370
> 
> 标签：jquery

我有一个页面有几个部分，现在每个部分都被隐藏并在用户点击它的链接时显示，我正在尝试使用 jquery .load 从外部文件加载这些部分，这样我的页面变得更轻，问题是什么时候我将这些部分与主页分开并使用 .load 加载它们，它们使用 css 加载得很好，而且还可以，但加载的内容中没有 javascript 工作。我必须为我的脚本、jquery UI、modernizer、缓动等部分使用一些 js 文件。

我的主页中有所有 js 链接，就像 css 链接一样，但是 js 不起作用，我已经知道这是因为内容在 js 之后加载，所以当 js 寻找元素时没有这样的东西，所以我正在寻找一个单击某个部分时告诉它再次查看的方法。在此先感谢您的帮助。

# 编辑：

假设我有 5 个 js 文件，我在主页中都引用了它们，其中一些只在动态加载的内容中工作，其中一些在主页上，一些在两者上，我不能为动态更改 js 文件内容，所以当我使用.load 在点击功能上加载内容时，有没有办法重置所有 javascript 以查找加载的元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T13:40:28.870

如果是事件处理程序，您可以简单地使用委托。而不是`$('.whatever').click(...);`你使用这个：

```
$('context_selector').on('click', '.whatever', ...); 
```

`context_selector`需要指向一个一直存在的元素，而`.whatever`它是动态添加元素的选择器。

# gnuplot - 增加图形的宽度以避免图例框重叠

> ID：14011403
> 
> 赞同：3
> 
> 时间：2012-12-23T13:38:05.490
> 
> 标签：gnuplot

我有以下数据集：

> 测试 M1-F3 M1-F3-TT M2-F2
> 
> 000 98.74 97.13 99.84
> 
> 001 97.30 98.27 100.00
> 
> 002 94.23 97.46 97.71
> 
> 003 78.31 98.58 100.00
> 
> 004 97.35 99.36 99.34
> 
> 006 97.49 98.23 98.42
> 
> 006 93.59 99.14 99.41
> 
> 007 97.63 100.00 100.00

我想用图例框绘制直方图，但它在我移动它的任何地方都与图重叠。

我的代码是：

```
clear
reset
set key box
#set title "title"
set ylabel "acc"
set xlabel "test"
# Make the x axis labels easier to read.
set xtics rotate out
# Select histogram data
set style data histogram
set grid y
set style fill solid border
set style histogram clustered
set terminal png
set output 'res.png'
plot 'res.dat' using 2:xtic(1) ti col, '' u 3 ti col, '' u 4 ti col 
```

结果是： ![在此处输入图像描述](../Images/4d8bc56603f5dd079641619b6360c13c.png)

如何增加图表的宽度以包含不重叠的图例框？我也尝试

```
set key above right vertical autotitle columnhead box 
```

但我宁愿图例框在图表内。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T15:15:18.723

我同意 ALJI Mohamed 的观点，即更改 y 范围可能是最简单的事情，尽管将其从 75 设置为 105 或 110 左右就足够了。

您还可以将密钥放在图表之外：

```
set key out 
```

默认情况下将其放在绘图框的右侧。这样您就不必手动调整 y 范围，并且可以保证数据不会与图例重叠。

```
help set key 
```

了解更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T14:33:45.013

尝试更改 y 轴范围：`set yrange [50:150]`.

# ruby-on-rails - 从我的 Rails 应用程序中调用 ruby gem 的二进制可执行文件？

> ID：14011404
> 
> 赞同：0
> 
> 时间：2012-12-23T13:38:41.523
> 
> 标签：ruby-on-rails, bundler

`bundle exec`我知道捆绑器使用该命令使 gems 可执行文件可用。我想了解如何从控制器操作或模型类方法中调用这些可执行文件？我在 Bundler doco 中没有看到任何关于此的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:18:41.903

可执行文件是位于 gems 目录中的 ruby​​ 脚本`bin`，它们的行为取决于每个 gem。它们是 gems 类/API 的包装器：只需深入研究目标 gems 的源代码并模仿其 CLI 的行为。

# sql - 空数据库的通用 SQL 查询

> ID：14011406
> 
> 赞同：4
> 
> 时间：2012-12-23T13:39:16.280
> 
> 标签：sql, sql-server

我正在寻找一个**通用**的SQL 查询来替换以下过程：

```
-- --------------------------------------------------
-- Dropping existing FOREIGN KEY constraints
-- --------------------------------------------------  

-- --------------------------------------------------
-- Dropping existing tables
-- -------------------------------------------------- 
```

例子：

以下查询删除特定表的外键。它可以转换为通用的吗？（请不要建议删除整个数据库，因为我没有权限。）

```
SELECT 
'ALTER TABLE ' + OBJECT_NAME(parent_object_id) + 
' DROP CONSTRAINT ' + name
FROM sys.foreign_keys
WHERE referenced_object_id = object_id('Student') 
```

**问题**：

如何清空数据库*而不*删除它？

* * *

**编辑**：等等等等，这不是一个重复的问题！另一个问题是关于清空行（或仅数据）保持关系和表。我正在尝试删除所有数据、表和关系*而不*删除数据库本身！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:58:45.407

查看此答案[如何删除所有表中的所有外键约束？](https://stackoverflow.com/questions/12721823/how-to-drop-all-foreign-key-constraints-in-all-tables)

这将从所有表中删除您的外键，您可以将删除表添加到循环中，或者之后创建一个新循环以删除表

# javascript - Angulars $http.post 基本原理

> ID：14011410
> 
> 赞同：2
> 
> 时间：2012-12-23T13:40:22.783
> 
> 标签：javascript, jquery, angularjs

可比较的 jQuery 函数

```
$.post("/example/handler", {foo: 1, bar: 2}); 
```

将使用 post 参数创建一个请求`foo=1&bar=2`。然而

```
$http.post("/example/handler", {foo : 1, bar: 2}); 
```

似乎发送`POST`带有正文`{"foo":1,"bar":2}`而不是`form-uriencoded`版本的请求。为了得到我认为是预期的行为，我需要做类似的事情

```
myModule.config(function ($httpProvider) {
    $httpProvider.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8';
    $httpProvider.defaults.transformRequest = function(data){
        return _.map(data, function (val, k) { return encodeURI(k) + "=" + encodeURI(val); }).join("&");
    }
}); 
```

在模块配置中。

`$http.post`任何人都可以解释论点处理背后的基本原理吗？是否存在我想要 Angulars 的默认行为或一些我没有看到的隐藏优势的情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T04:55:55.530

我对HTTP协议不太熟悉，但是POST请求不是通常用于发送内容，而不是参数吗？通常，我认为 GET 与参数一起使用。

我认为您应该能够将配置对象添加到 POST 请求，并指定 params 属性：

> params – {Object.} – 字符串或对象的映射，将在 url 之后转换为 ?key1=value1&key2=value2。如果值不是字符串，它将被 JSON 化。

所以也许这样的事情会起作用：

```
$http.post("/example/handler", {}, {params: {foo: 1, bar: 2} }) 
```

（上面的代码片段未经测试......我不确定语法是否正确。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T05:17:12.627

我想你回答了你自己的问题。将 JS 对象转换为表单编码需要工作并且对于更复杂的结构变得棘手，而将 JS 对象转换为 JSON 是微不足道的，因此是默认的。您使用的是什么后端无法接受 JSON 编码？

# c# - 如何在 For 循环中使用多线程

> ID：14011411
> 
> 赞同：8
> 
> 时间：2012-12-23T13:40:21.430
> 
> 标签：c#, .net, multithreading, .net-2.0

我想达到以下要求；请提出一些解决方案。

```
string[] filenames = Directory.GetFiles("C:\Temp"); //10 files

for (int i = 0; i < filenames.count; i++)    
{
    ProcessFile(filenames[i]); //it takes time to execute    
} 
```

我想实现多线程。例如，有 10 个文件。我想一次处理 3 个文件（例如，可配置`maxthreadcount`）。所以 3 个文件将在 for 循环中的 3 个线程中处理，如果任何线程完成执行，它应该从 for 循环中选择下一个项目。还希望确保在退出 for 循环之前处理所有文件。

请提出最佳方法。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-23T14:15:24.367

尝试

```
Parallel.For(0, filenames.Length, i => {
    ProcessFile(filenames[i]);
}); 
```

[MSDN](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.for.aspx)

它仅从.Net 4 开始可用。希望可以接受。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-23T14:24:20.700

这将在 .net 2.0 中完成这项工作：

```
class Program
{

    static int workingCounter = 0;
    static int workingLimit = 10;
    static int processedCounter = 0;

    static void Main(string[] args)
    {
        string[] files = Directory.GetFiles("C:\\Temp");
        int checkCount = files.Length;
        foreach (string file in files)
        {
            //wait for free limit...
            while (workingCounter >= workingLimit)
            {
                Thread.Sleep(100);
            }
            workingCounter += 1;
            ParameterizedThreadStart pts = new ParameterizedThreadStart(ProcessFile);
            Thread th = new Thread(pts);
            th.Start(file);
        }
        //wait for all threads to complete...
        while (processedCounter< checkCount)
        {
            Thread.Sleep(100);
        }
        Console.WriteLine("Work completed!");
    }

    static void ProcessFile(object file)
    {
        try
        {
            Console.WriteLine(DateTime.Now.ToString() + " recieved: " + file + " thread count is: " + workingCounter.ToString());
            //make some sleep for demo...
            Thread.Sleep(2000);
        }
        catch (Exception ex)
        {
            //handle your exception...
            string exMsg = ex.Message;
        }
        finally
        {
            Interlocked.Decrement(ref workingCounter);
            Interlocked.Increment(ref processedCounter);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T14:05:45.500

看看 Joe Albahari 的[Producer/Consumer Queue 示例](http://www.albahari.com/threading/part4.aspx#_Wait_Pulse_Producer_Consumer_Queue)。它应该为您要完成的工作提供一个良好的起点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-01T19:41:25.800

与其为每个文件名启动一个线程，不如将文件名放入一个队列，然后启动三个线程来处理它们。或者，由于主线程现在空闲，启动两个线程并让主线程也处理它：

```
Queue<string> MyQueue;

void MyProc()
{
    string[] filenames = Directory.GetFiles(...);
    MyQueue = new Queue(filenames);

    // start two threads
    Thread t1 = new Thread((ThreadStart)ProcessQueue);
    Thread t2 = new Thread((ThreadStart)ProcessQueue);
    t1.Start();
    t2.Start();

    // main thread processes the queue, too!
    ProcessQueue();

    // wait for threads to complete
    t1.Join();
    t2.Join();
}

private object queueLock = new object();

void ProcessQueue()
{
    while (true)
    {
        string s;
        lock (queueLock)
        {
            if (MyQueue.Count == 0)
            {
                // queue is empty
                return;
            }
            s = MyQueue.Dequeue();
        }
        ProcessFile(s);
    }
} 
```

另一种选择是使用信号量来控制有多少线程正在工作：

```
Semaphore MySem = new Semaphore(3, 3);

void MyProc()
{
    string[] filenames = Directory.GetFiles(...);

    foreach (string s in filenames)
    {
        mySem.WaitOne();
        ThreadPool.QueueUserWorkItem(ProcessFile, s);
    }

    // wait for all threads to finish
    int count = 0;
    while (count < 3)
    {
        mySem.WaitOne();
        ++count;
    }
}

void ProcessFile(object state)
{
    string fname = (string)state;
    // do whatever
    mySem.Release();  // release so another thread can start
} 
```

第一个会执行得更好，因为您没有为每个处理的文件名启动和停止线程的开销。然而，第二个更短更干净，并且充分利用了线程池。您可能不会注意到性能差异。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-23T14:39:36.897

您可以使用[ThreadPool](http://msdn.microsoft.com/en-us/library/system.threading.threadpool%28v=vs.80%29.aspx)。

例子：

```
ThreadPool.SetMaxThreads(3, 3);

for (int i = 0; i < filenames.count; i++)    
{
    ThreadPool.QueueUserWorkItem(new WaitCallback(ProcessFile), filenames[i]);
}

static void ProcessFile(object fileNameObj)
{
    var fileName = (string)fileNameObj;
    // do your processing here.
} 
```

* * *

如果您在应用程序的其他地方使用 ThreadPool，那么这不是一个好的解决方案，因为它在您的应用程序中共享。

您还可以获取不同的线程池实现，例如[SmartThreadPool](http://www.codeproject.com/Articles/7933/Smart-Thread-Pool)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-01T19:16:35.563

```
var results = filenames.ToArray().AsParallel().Select(filename=>ProcessFile(filename)).ToArray();

bool ProcessFile(object fileNameObj)
{
    var fileName = (string)fileNameObj;

    // do your processing here.

    return true;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-23T14:34:57.477

可以设置最大线程数取消 ParallelOptions

[Parallel.For 方法（Int32、Int32、ParallelOptions、Action）](http://msdn.microsoft.com/en-us/library/dd781401.aspx)

[ParallelOptions.MaxDegreeOfParallelism](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.maxdegreeofparallelism.aspx)

# java - Rserve 连接失败

> ID：14011412
> 
> 赞同：8
> 
> 时间：2012-12-23T13:40:28.607
> 
> 标签：java, r, rserve, wps

我正在使用[52north 提供的 WPS4R](https://wiki.52north.org/Geostatistics/WPS4R)

最多 3 天前一切都很好，WPS 可以通过正确使用 Rserve 连接到 R，但现在无法建立这种连接。我卸载了所有东西，包括 Apache Tomcat、R 和 Java JDK，然后再次安装了所有东西。问题依然存在。这是我发送请求时遇到的错误。我确信我使用的代码是正确的，因为它曾经可以工作而且我没有改变任何东西。

这是错误：

```
 An R Connection Error occoured:
    class org.rosuda.REngine.Rserve.RserveException - eval failed,
    request status: error code: 127 null 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-21T17:21:07.400

127 是来自 R 的解析错误，这不是工作区问题。如果你想找回错误信息。使用以下内容包装调用以执行您的 script/r 命令以获取错误消息。我过去曾使用过它，并且效果很好。有关更多信息，请参阅常见问题解答。

**[http://www.rforge.net/Rserve/faq.html](http://www.rforge.net/Rserve/faq.html)**

```
 c.assign(".tmp.", myCode);
    REXP r = c.parseAndEval("try(eval(parse(text=.tmp.)),silent=TRUE)");
    if (r.inherits("try-error")) System.err.println("Error: "+r.toString())
    else { // success .. } 
```

# haskell - How to convert a STArray to a List in Haskell?

> ID：14011420
> 
> 赞同：1
> 
> 时间：2012-12-23T13:41:29.013
> 
> 标签：haskell, monads, state-monad

Is there a function can do what the function `arrayToList` do:

```
import Data.Array.ST
import Control.Monad.ST

genArray :: ST s [Int]
genArray = do
   a <- new Array (0, 99) 0 :: ST s (STArray s Int Int)
   writeArray a 0 1
   {- ... write something to the array ... -}
   return arrayToList(a) 
```

If not, how to write one?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T14:16:29.867

You don't need `IO` for this, constructing a list is a pure operation:

```
genArray :: [Int]
genArray = runST $ do
  a <- newArray (0, 99) 0 :: ST s (STArray s Int Int)
  writeArray a 0 1
  {- ... write something to the array ... -}
  getElems a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T14:11:28.443

Use stToIO and getElems:

```
genArray :: IO [Int]
genArray = stToIO $ do
    a <- newArray (0,99) 0 :: ST s (STArray s Int Int)
    writeArray a 0 1
    getElems a 
```

# jquery - 未捕获的类型错误：无法调用未定义 jquery.js:2 的方法“替换”

> ID：14011422
> 
> 赞同：1
> 
> 时间：2012-12-23T13:41:56.400
> 
> 标签：jquery, wordpress

我无法追踪此错误的来源。我正在构建一个 Wordpress 站点并收到此错误：未捕获的类型错误：无法调用未定义 jquery.js:2 的方法“替换”

我已经阅读了可能导致它的原因。jQuery 在页面上只包含一次，并且在所有依赖项之前。此外，我实际上并没有在站点中使用替换功能，除了主题附带的 scripts.js 的第 20 行并且运行良好。

有什么想法可以找出这个问题的根源吗？这是网站： http: [//www.standardissuedesign.com/new/](http://www.standardissuedesign.com/new/)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T14:03:31.917

我明白了——这是一个简单的语法错误。我有：

```
$("a[href]:not[rel='same']").click(function(e) { 
```

当我应该有的时候：

```
$("a[href]:not(a[rel='same'])").click(function(e) { 
```

谢谢您的帮助！

# mongodb - 使用 grails gorm 在 mongodb 中使用 findAndModify

> ID：14011427
> 
> 赞同：1
> 
> 时间：2012-12-23T13:42:53.153
> 
> 标签：mongodb, grails, grails-orm, findandmodify

我需要在我的应用程序中使用 findAndModify 和 grails 和 mongoDB。我使用了这段代码：

```
public static String getNextId(DB db, String seq_name) {
String sequence_collection = "seq"; // the name of the sequence collection
String sequence_field = "seq"; // the name of the field which holds the sequence

DBCollection seq = db.getCollection(sequence_collection); // get the collection (this will create it if needed)

// this object represents your "query", its analogous to a WHERE clause in SQL
DBObject query = new BasicDBObject();
query.put("_id", seq_name); // where _id = the input sequence name

// this object represents the "update" or the SET blah=blah in SQL
DBObject change = new BasicDBObject(sequence_field, 1);
DBObject update = new BasicDBObject("$inc", change); // the $inc here is a mongodb command for increment

// Atomically updates the sequence field and returns the value for you
DBObject res = seq.findAndModify(query, new BasicDBObject(), new BasicDBObject(), false, update, true, true);
return res.get(sequence_field).toString();
} 
```

它工作成功。但是现在我想在没有本机 mongodb 对象的情况下使用 findAndModify，并使用 GORM。这项工作有什么解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-18T10:14:18.087

没有本机 API 就无法实现这一点，但是您可以像这样编写更紧凑的代码：

```
def collection = Seq.collection
collection.findAndModify([_id: seq_name ], [ "\$inc": [seq:1] ]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T16:32:32.610

使用数据库配置配置您的 DataSource.groovy。

然后定义一个Domain类：

```
Class Seq{

    int seq

} 
```

并在服务中使用动态查找器：

```
Class SeqService {

    String findAndModify(String seq_name) {
        def seqInstance = Seq.get(seq_name)
        if(seqInstance){
            seqInstance.seq ++
            seqInstance.save()
            return seqInstance.seq.toString()
        }
        return ''      //instance not found
    }
} 
```

然后在您需要该操作时拨打电话：

```
def seqService

def id
.......
def result = seqService.findAndModify(id)
.... 
```

# python - cv2.VideoCapture() 如何改变捕获分辨率？

> ID：14011428
> 
> 赞同：1
> 
> 时间：2012-12-23T13:42:55.987
> 
> 标签：python, opencv, camera

cv2 无法设置 fps，但我可以使用 ; 更改 fps

```
v4l2-ctl -d 1 --set-parm=60 
```

和分辨率；

```
v4l2-ctl -d 1 --set-fmt-video=width=640,height=480 
```

但是当我尝试时；

```
camcapture = cv2.VideoCapture(1) 
_,f = camcapture.read() 
cv2.imwrite(filename, f) 
```

捕获速度为 60fps，但分辨率为 320x240。很明显 cv2.VideoCapture 改变了分辨率。好的，所以它不关心 v4l2-ctl 编写的设置并覆盖它自己的设置。所以我尝试；

```
camcapture.set(3,640)
camcapture.set(4,480) 
```

图像如预期的那样为 640x480，但帧速率降至 30fps。这次它覆盖了 fps 值。即使相机支持它，我也无法让它在 640x480@60fps 下工作。

有什么想法可以防止 cv2.VideoCapture 覆盖 v4l2-ctl 书面设置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-07-14T12:10:17.220

OpenCV 自动选择第一个可用的捕获后端[（参见此处）](https://docs.opencv.org/3.3.0/d0/da7/videoio_overview.html)。可能是它没有自动使用 V4L2。

在构建时也设置`-D WITH_V4L=ON`和设置。`-D WITH_LIBV4L=ON`

为了设置要使用的像素格式，请设置`CAP_PROP_FOURCC`捕获的属性：

```
 capture = cv2.VideoCapture(self.cam_id, cv2.CAP_V4L2)
  capture.set(cv2.CAP_PROP_FOURCC, cv2.VideoWriter_fourcc('M', 'J', 'P', 'G'))
  width = 1920
  height = 1080
  capture.set(cv2.CAP_PROP_FRAME_WIDTH, width)
  capture.set(cv2.CAP_PROP_FRAME_HEIGHT, height) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-06T16:35:56.133

您为什么不尝试明确要求所需的帧速率：

```
camcapture.set(cv2.cv.CV_CAP_PROP_FPS,60) 
```

或者如果您更喜欢整数混淆：

```
camcapture.set(5,60) 
```

所以相机（也许）会告诉你类似的信息：

```
HIGHGUI ERROR: V4L: Property <unknown property string>(5) not supported by device 
```

PS：虽然改变 3 per `cv2.cv.CV_CAP_PROP_FRAME_WIDTH`，可以帮助阅读你的代码......

# vb.net - 如何分配列表的值

> ID：14011429
> 
> 赞同：2
> 
> 时间：2012-12-23T13:42:59.597
> 
> 标签：vb.net, xsl-fo

我正在做的是创建一个 PDF 文件并返回本周的预订。周一、周四、周三等都有预订。我尝试将预订分配给他的日期。我的意思是。如果有星期一的预订，则应将预订分配到该日期。如果预订在星期二，则将星期四的预订分配给该日期。

为了说明这一点： [WeeklyBPlan](http://i48.tinypic.com/sw60ph.png)

正如您在 Montag（星期一）的图片预订和 Dienstag（星期二）的预订中看到的那样。

我的问题是，使用我的代码只返回一周的第一天（星期一），并且所有预订都分配给该日期。

我认为我的问题是`wbp.WeekDay = strCurrDay`或我的 .fo 有问题？

请问有人可以帮我吗？我怎样才能做我想做的事，比如图片中的？

```
Public Shared Function WeeklyBPlanPDFExport() As List(Of WeeklyBPlan)

        Dim allBookings As List(Of WeeklyBPlan) = New List(Of WeeklyBPlan)

        Dim s As StringBuilder = New StringBuilder
        Dim kw As Integer = DatePart(DateInterval.WeekOfYear, Now, , FirstWeekOfYear.FirstFourDays)
        If DatePart(DateInterval.Weekday, Now, Microsoft.VisualBasic.FirstDayOfWeek.Sunday) = 6 Then
            kw = kw + 1
        End If
        Dim CurrDateFirstDay As Date = DateAdd(DateInterval.Day, 1, ReturnDateForWeekNumber(kw))
        For i = 1 To 7
            Dim strCurrDay As String = ""

            strCurrDay = FormatDateTime(CurrDateFirstDay, DateFormat.LongDate)

            CurrDateFirstDay = DateAdd(DateInterval.Day, 1, CurrDateFirstDay)

            Dim strSQL As String = "SELECT  d.SEATING, d.ROOMID, d.ID, d.PERSONS, d.ADDRESS+ ', ' + d.ROOMDESCRIPTION AS ROOMDESCRIPTION , d.EVENT,  p.VN + ' ' + p.NN AS NAME, CONVERT (char(5), d.FROM, 108) + ' - ' + CONVERT (char(5), d.TO, 108) AS TIME, p.TEL FROM VIEW_RAUMBUCHUNG_DISPO AS d INNER JOIN PERSONAL AS p ON d.PERSONAL_ID = p.ID WHERE CONVERT(char, d.FROM, 104)='" & to_104(strCurrDay) & "'"
            Dim objRS As SqlDataReader
            Dim objRS2 As SqlDataReader
            objRS = SQLrunReaderWB(strSQL)

            If objRS.HasRows Then

                While objRS.Read()

                    Dim wbp = New WeeklyBPlan

                    wbp.WeekDay = strCurrDay

                    wbp.Raum = objRS("ROOMDESCRIPTION")
                    wbp.Zeit = objRS("TIME")

                    If Not IsDBNull(objRS("EVENT")) Then
                        wbp.Thema = objRS("EVENT")
                    End If

                    If Not IsDBNull(objRS("NAME")) Then
                        wbp.Mieter = objRS("NAME")
                    End If

                    wbp.Personen = objRS("PERSONS")
                    wbp.Bestuhlung = objRS("SEATING")

                    allBookings.Add(wbp)

                End While

            End If
        Next
        ConnWB.Close()

        Return allBookings

    End Function 
```

我的 XSL-FO：

`

```
 <!--this defines a title level 1 -->

                    <fo:block

                            line-height="24pt"
                            space-after.optimum="15pt"
                            padding-top="3pt">
                      <xsl:value-of select=".//WeekDay" />
                    </fo:block>

                <!-- table start -->
                <fo:table table-layout="fixed" border="solid" border-collapse="collapse" border-width="0.5pt">
                    <fo:table-column column-width="25mm"/>
                    <fo:table-column column-width="12mm"/>
                    <fo:table-column column-width="20mm"/>
                                <fo:table-column column-width="50mm"/>
                    <fo:table-column column-width="20mm"/>
                    <fo:table-column column-width="25mm"/>
                                <fo:table-column column-width="10mm"/>
                    <fo:table-column column-width="30mm"/>
                    <fo:table-column column-width="35mm"/>
                    <fo:table-column column-width="35mm"/>
                    <fo:table-header>
                        <fo:table-row>
                            <fo:table-cell>
                                <fo:block background-color="grey"
                      color="white" text-align="center">Room</fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block background-color="grey"
                      color="white" text-align="center">Time</fo:block>
                            </fo:table-cell>

                                            <fo:table-cell>
                                <fo:block background-color="grey"
                      color="white" text-align="center">Event</fo:block>
                            </fo:table-cell>

                                            <fo:table-cell>
                                <fo:block background-color="grey"
                      color="white" text-align="center">Persons</fo:block>
                            </fo:table-cell>
                           <fo:table-cell>
                            <fo:block background-color="grey"
                      color="white" text-align="center">Seating</fo:block>
                           </fo:table-cell>

                           </fo:table-row>
                      <fo:table-row>
                      </fo:table-row>
                    </fo:table-header>
                    <fo:table-body>
                      <xsl:for-each select=".//WochenBPlan">
                            <fo:table-row>
                                <fo:table-cell  border-right-width="0.5pt" border-right-style="solid"  border-bottom-width="0.5pt" border-bottom-style="solid" padding-right="6pt" padding-left="6pt" >
                                    <fo:block font-family="Arial" font-size="9pt"  padding="2pt">
                                        <xsl:value-of select=".//Room" />
                                    </fo:block>
                                </fo:table-cell>
                                <fo:table-cell border-right-width="0.5pt" border-right-style="solid" border-bottom-width="0.5pt" border-bottom-style="solid">
                                    <fo:block font-family="Arial" font-size="9pt"  padding="2pt"  text-align="center">
                                        <xsl:value-of select=".//Time" />
                                    </fo:block>
                                </fo:table-cell>

                                <fo:table-cell border-right-width="0.5pt" border-right-style="solid"  border-bottom-width="0.5pt" border-bottom-style="solid" padding-left="6pt" padding-right="6pt">

                                       <fo:block font-family="Arial" font-size="9pt"  padding="2pt" wrap-option="no-wrap" >
                                        <xsl:value-of select=".//Event" />
                                       </fo:block>

                                </fo:table-cell>

                              <fo:table-cell border-right-width="0.5pt" border-right-style="solid" border-bottom-width="0.5pt" border-bottom-style="solid">
                                <fo:block font-family="Arial" font-size="9pt"  padding="2pt" text-align="center">
                                  <xsl:value-of select=".//Persons" />
                                </fo:block>
                              </fo:table-cell>
                              <fo:table-cell border-right-width="0.5pt" border-right-style="solid" border-bottom-width="0.5pt" border-bottom-style="solid"> 
                                <fo:block  font-family="Arial" font-size="9pt" padding="2pt" text-align="center">
                                  <xsl:value-of select=".//Seating" />
                                </fo:block>
                              </fo:table-cell>

                              </fo:table-row>

                      </xsl:for-each>
                    </fo:table-body>
                  </fo:table>
                  <!-- table end -->

                <fo:block id="lastBlock"/>
            </fo:flow>` 
```

WeeklylyBPlan 课程：

```
public class WochenBPlan
{
    public WochenBPlan()
    {

    }

    public string Raum { get; set; }
    public DateTime Erstellt { get { return DateTime.Now; } set { } }
    public string Zeit { get; set; }
    public string Bereich { get; set; }
    public string Thema { get; set; }
    public string Mieter { get; set; }
    public string Mieter_Tel { get; set; }
    public string Personen { get; set; }
    public string Bestuhlung { get; set; }
    public string Bemerkung { get; set; }
    public string Ausstattung { get; set; }
    public string WochenTag { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:39:48.540

好吧，老实说，我没有太多编写 C# 的经验，所以我现在将用 VB 编写你的 WochenBPlan 类，只是为了让你暂时免于阅读我的 C# 的痛苦。

附带说明一下，鉴于您的类实际上只是一个结构，因为它没有任何真正与之关联的功能，您可以将其转换为公共结构，但它是所有偏好。

困扰我的是您正在声明一个新的 WeeklyBPlan 但我认为为了清晰和简单起见，您可能应该编写一些“新”子程序，例如...

```
 Public Class WochenBPlan 
      'I've learn that it is best to declare class variables private and then expose them through public properties as follows
       Private _Raum As String, _Zeit As String, _Bereich As String, _Thema As String
       Private _Mieter As String, _Mieter_Tel As String, _Personen As String
       Private _Bestuhlung As String, _Bemerkung As String, _Ausstattung As String
       Private _WochenTag As String, _Erstellt As DateTime

       Public Property Raum As String
         Get
            Return _Raum
         End Get
         Set(value As String)
           _Raum = value
         End Set
        End Property
       ' So on and so forth for the remaining....

      ' Adding some functionality

      ' Default Constructor
      Public Sub New()
       ' Set all private variables to what you want (I tend to set them to Nothing, unless I need them to be some value)
      End Sub

      Public Sub New(ByVal theDay As String, ByVal theRoom As String, ByVal theTime As String(I'm not sure what type you have that has), ByVal thePersons As String, ByVal theSeating As String)
     _WeekDay(Or the German word for it) = theDay
     _Raum = theRoom
     _Zeit = theTime
     _Personen = thePersons
     _Bestuhlung = theSeating
     ' Declare rest to nothing/null
     End Sub
    ' Add Whatever Else You May Want
      End Class 
```

这将确保您在每个循环中设置好所有内容，然后您的第二个循环将简化为...

```
 While objRS.Read()

                Dim wbp = New WeeklyBPlan(strCurrDay, objRS("ROOMDESCRIPTION"), objRS("TIME"),objRS("PERSONS"))

                If Not IsDBNull(objRS("EVENT")) Then
                    wbp.Thema = objRS("EVENT")
                End If

                If Not IsDBNull(objRS("NAME")) Then
                    wbp.Mieter = objRS("NAME")
                End If

                allBookings.Add(wbp)

            End While 
```

我不确定这是否会奏效，但它很可能，所以让我知道是否有效，否则我将继续工作，直到我们弄明白为止。您可以将这些“If”语句添加到重载的“New”语句中，然后您可以执行 allBookings.Add(New WeeklyBPlan(...))

# android - 文本中的可点击图像

> ID：14011430
> 
> 赞同：0
> 
> 时间：2012-12-23T13:43:21.210
> 
> 标签：android, image, button, textview

我想在 TextView 中添加交互式图像，已经尝试了 ImageSpan 和 ImageGetter，但是无法按下与它们一起添加的图像。关于我如何获得这样的结果的任何建议：

![在此处输入图像描述](../Images/27f14a7eade90b60355dfa1c52aa01ff.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:49:20.867

ClickableSpan 是您需要的：

[http://developer.android.com/reference/android/text/style/ClickableSpan.html](http://developer.android.com/reference/android/text/style/ClickableSpan.html)

> 如果这种类型的对象使用 LinkMovementMethod 的移动方法附加到 TextView 的文本，则可以选择受影响的文本范围。如果被点击，会调用 onClick(View) 方法

.

# mouseevent - 如何测试光标是否在圆圈上？（处理器）

> ID：14011435
> 
> 赞同：0
> 
> 时间：2012-12-23T13:44:19.417
> 
> 标签：mouseevent, processing

我想在我的项目中实现这个关于拖动框的[草图。](http://processing.org/learning/basics/mousefunctions.html)

而不是一个盒子，我有几个圆圈，每个圆圈都用不同的坐标绘制在表格中

```
 ellipse(lemma23.x, lemma23.y, diameterLemma23, diameterLemma23);

  ellipse(law3.x, law3.y, diameterLaw3, diameterLaw3);

  ellipse(law2.x, law2.y, diameterLaw2, diameterLaw2); 
```

如何测试光标是否在其中一个圆圈上？

这是我的项目的屏幕截图：

![在此处输入图像描述](../Images/4f8ef3e7b776ccdf8bbd29dbe45a7db0.png)

我想测试光标何时在（或附近）一个圆圈，以便我可以通过拖动来改变它的位置。

[整个草图都在 pastebin 中](http://pastebin.com/U1Ke4j4r)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:45:26.847

我从您问题中的[示例开始。](http://processing.org/learning/basics/mousefunctions.html)绘制多个形状有几个主要区别：

1.  您必须检查光标是否在每个形状内。
2.  您必须绘制每个形状。
3.  你可能想担心重叠，但我没有。

* * *

在下面的代码中，我直接建立在示例的基础上，尽管我删除了几行在单击时会改变框的颜色，并将代码重新组织到`MovingEllipse`类中，以便可以轻松地绘制多个椭圆。（这段代码画了两个椭圆。）

请注意，代码`draw()`检查每个椭圆的鼠标位置，但是，我想这可以改进（即，可能通过创建一个椭圆位置数组并循环遍历该数组）。此外，为了使此代码正常工作，`mousePressed`需要`mouseReleased`像方法一样复制`mouseDragged`方法。（我试图让我的例子简短。）

无论如何，这是绘制多个椭圆并检测应该移动哪个椭圆的一种方法。希望能帮助到你！

```
int esize = 75;

MovingEllipse e1 = new MovingEllipse(0.0, 0.0, esize, 0.0, 0.0);
MovingEllipse e2 = new MovingEllipse(0.0, 0.0, esize, 0.0, 0.0);

void setup() 
{
  size(640, 360);
  e1.eX = width/2.0;    // Center of ellipse 1.
  e1.eY = height/2.0;

  e2.eX = width/4.0;    // Center of ellipse 2.
  e2.eY = height/4.0;
}

void draw() 
{ 
  background(0);

  // Test if the cursor is over the ellipse. 
  if (mouseX > e1.eX-esize && mouseX < e1.eX+esize && 
      mouseY > e1.eY-esize && mouseY < e1.eY+esize) {
    e1.overBox = true;  
    e2.overBox = false;
  } else if (mouseX > e2.eX-esize && mouseX < e2.eX+esize && 
      mouseY > e2.eY-esize && mouseY < e2.eY+esize) {
    e2.overBox = true;
    e1.overBox = false;
  } else {
    e1.overBox = false;
    e2.overBox = false;
  }

  // Draw the ellipse(s).
  e1.update(e1.eX, e1.eY, e1.overBox);
  e2.update(e2.eX, e2.eY, e2.overBox);
}

void mouseDragged() {
  e1.mouseDragged();
  e2.mouseDragged();
}
// Don't forget to repeat this for mousePressed and mouseReleased!
// ...

class MovingEllipse {
  float eX, eY;             // Position of ellipse.
  int eSize;                // Radius. For a circle use eSize for both x and y radii.
  float xOffset, yOffset;   // Where user clicked minus center of ellipse. 
  boolean locked, overBox;  // Flags used for determining if the ellipse should move.

  MovingEllipse (float ex, float ey, int esize, float xoff, float yoff) {
    eX = ex;
    eY = ey;
    eSize = esize;
    xOffset = xoff;
    yOffset = yoff;
  }

  void update(float ex, float ey, boolean over) {
    eX = ex;
    eY = ey;
    overBox = over;
    // Draw the ellipse. By default, (eX, eY) represents the center of the ellipse.
    ellipse(eX, eY, eSize, eSize);
  }

  void mousePressed() {
    if(overBox) { 
      locked = true; 
    } else {
      locked = false;
    }
    xOffset = mouseX-eX; 
    yOffset = mouseY-eY; 
  } 
  void mouseDragged() {
    if(locked) {
      eX = mouseX-xOffset; 
      eY = mouseY-yOffset; 
    } 
  }
  void mouseReleased(){
    locked = false;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T13:47:05.280

只需检查光标与圆心之间的距离是否在命中半径内。可以使命中半径大于圆的半径以捕捉附近的命中。

# asp.net - 应该在 ASP.Net 中的页面加载上检查 Session 吗？

> ID：14011436
> 
> 赞同：2
> 
> 时间：2012-12-23T13:44:30.503
> 
> 标签：asp.net, session

页面加载，作为2个单词的一句话，意味着页面加载时，意味着所有元素都加载完毕。

假设我有一个名为 的页面`Ask.aspx`，并且该页面只允许已登录的用户使用，所以从技术上讲，我会写这样的内容：

```
if(Session["id"]==null)
    Response.Redirect("Login.aspx"); 
```

这意味着，我在页面加载后测试会话，理论上，我认为这听起来不对，现在我当然不会注意到它，它会很快，我会尝试访问页面，然后我重定向到 Login.aspx，但是......测试页面加载方法上的会话是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T13:49:24.733

[Page_Load](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx#lifecycle_events)是页面生命周期的一部分。它在***服务器***加载页面时调用，而不是在*客户端*加载页面时调用......

所以这*是*检查会话变量的正确位置......

您实际上是在说：*在我将页面发布回客户端之前，请检查我是否`ID`为此会话设置了属性......如果我没有 - 告诉客户端重定向到 Login.aspx 页面......*

这是这样做的正确方法......

我建议您也阅读有关[Server.Transfer](http://msdn.microsoft.com/en-us/library/ms525800%28v=vs.90%29.aspx)的信息。它与服务器之间的区别在于`Response.Redirect`服务器`Server.Transfer`本身“重定向”到另一个页面并将新页面的结果输出回客户端（客户端不知道）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T13:52:54.923

如果您试图限制对特定页面的访问，最好使用表单身份验证。

[http://support.microsoft.com/kb/301240](http://support.microsoft.com/kb/301240)

它的设置相当容易，它允许在将请求传递到 asp.net 管道之前检查凭据。在您所做的事情中，您的页面在请求被拒绝之前经历了整个生命周期（控件被渲染并绑定到数据、对数据库的访问、对 Web 服务的调用等）。根据您的情况，这可能代价高昂且无法很好地扩展。

**编辑：**您还可以挂接到`AcquireRequestState`global.asax 中的事件。这也将节省整个页面生命周期。

# jsp - 如何将异常从 Servlet 转发到 JSP

> ID：14011437
> 
> 赞同：0
> 
> 时间：2012-12-23T13:44:30.790
> 
> 标签：jsp, exception, servlets

我有一个 form.html，我在其中定义了一个 servlet 作为操作参数。servlet 反过来与模型（用于访问数据库的简单 java 类 DAO）对话，如果找不到记录，则抛出 recordnotfound 异常，该异常又从类委托给 servlet。所以，我想将此异常（RecordNotFound）转发到 web.xml 中定义的 jsp 页面

任何想法如何实现这一目标。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T02:58:53.903

因此可以使用`<error-page>`输入。`web.xml`

```
<error-page>
    <exception-type>com.exampl.RecordNotFound</exception-type>
    <location>/WEB-INF/errorpages/recordnotfound.jsp</location>
</error-page> 
```

您在 servlet 中需要做的就是让抛出的异常消失，或者如果它是已检查的异常，则将其包装在`ServletException`.

```
} catch (RecordNotFound e) {
    throw new ServletException(e);
} 
```

请注意，您不应该在`java.lang.Throwable`或 的某个超类上设置过于通用的错误页面`ServletException`，否则将使用 instesd。容器即会通过错误页面位置进行 2 次传递。第一个使用确切的异常，如果异常实际上是第二个`ServletException`，则将使用包装的异常来定位错误页面。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-25T04:58:22.647

利用

```
 request.getRequestDispatcher("/yourJSPFile.jsp").forward(request,response); 
```

# python - 引用相同位置的python类实例

> ID：14011440
> 
> 赞同：2
> 
> 时间：2012-12-23T13:45:06.223
> 
> 标签：python

我有一个名为的类`Door`和一个名为`Window`. 它是一个名为 的类的子类`Furniture`。我的程序读取 excel 文件，循环 2 次，第一次读取/写入有关门的所有内容，第二次读取/写入有关 windows 的所有内容。简化，我有以下代码：

```
for gathering_inf in ('door', 'window'):
    for row in file:
        if gathering_inf == 'door' and currently reading door line:
            furniture = Door(width, height, description)
        if gatherig_inf == 'window' and currently reading window line:
            furniture = Window(width, height, description)

        # Now do something with the furniture object .. 
```

发生的奇怪想法是，如果我例如（如上所示）打印对象`furniture`，我得到它们的位置，并且一些对象在内存中的位置是相同的，即使它们是两个不同的实例宽度不同的属性。例如：

```
<__main__.Door object at 0x03BFE810>
<__main__.Door object at 0x03BFE890>
<__main__.Door object at 0x03BFE810>
<__main__.Door object at 0x03BFE890>
<__main__.Door object at 0x03BFE8B0>
<__main__.Door object at 0x03BFE8D0>
<__main__.Door object at 0x03BFE8B0>
<__main__.Window object at 0x03BFE8D0>
<__main__.Window object at 0x03BFE8B0>
<__main__.Window object at 0x03BFE890>
<__main__.Window object at 0x03BFE8B0>
<__main__.Window object at 0x03BFE890>
<__main__.Window object at 0x03BFE8B0>
<__main__.Window object at 0x03BFE890>
<__main__.Window object at 0x03BFE8B0>
<__main__.Window object at 0x03BFE890> 
```

有人可以向我解释为什么 python 会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T13:49:57.310

那是因为引用计数垃圾收集器。一旦一个新对象被分配给`furniture`GC 将删除该对象，因此它的内存位置可以被一个新对象重新使用。

* * *

这是一个显示此行为的小演示。请注意，由于 Python REPL 的工作方式（它保留对最后一个结果的引用`_`），地址将交替出现。

```
>>> foo = object(); foo
<object object at 0x7fd74cd390a0>
>>> foo = object(); foo
<object object at 0x7fd74cd390b0>
>>> foo = object(); foo
<object object at 0x7fd74cd390a0>
>>> foo = object(); foo
<object object at 0x7fd74cd390b0>
>>> foo = object(); foo
<object object at 0x7fd74cd390a0> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T14:01:42.800

[ThiefMaster](https://stackoverflow.com/users/298479/thiefmaster)几乎做到了：*这就是 Python 虚拟机的工作方式。*

您正在观察的是*参考计数垃圾收集器的***CPython**实现的细节。**在您的情况下， CPython**是垃圾收集对象，然后创建一个新对象，然后重用（现在垃圾收集的）对象的位置，将对象存储在那里。***`Door``Window``Door``Window`***

 *****事实上， CPython**重用以前被垃圾回收的对象的地址是很常见的。*例如，在我的电脑上运行 ThiefMaster 的代码，我得到了稍微不同的（旋转）结果：*

![CPython 内存使用情况](../Images/42293b20e36966cdbbdff43ee23cb0e2.png)

在这一点上，重要的是要注意这种行为是`CPython`特定的。例如，[Enthought 的 Python Distribution](http://www.enthought.com/products/epd.php)似乎没有产生类似的结果，但是我不知道这种不一致是否是实现差异的问题：

![在此处输入图像描述](../Images/6d5572d7672ee360f99a26d7c5c8cd17.png)***

# jquery - 验证强制选择不起作用

> ID：14011443
> 
> 赞同：0
> 
> 时间：2012-12-23T13:45:34.637
> 
> 标签：jquery, jquery-validate

根据[此处](https://stackoverflow.com/questions/2901125/jquery-validate-required-select)接受的答案，这是我必须做的才能使所需的选择与验证一起工作。

我已经在[jsfiddle](http://jsfiddle.net/houmie/WGL4j/2/)上创建了一个示例，但我无法让它工作。

主要区别在于我的默认值只是空（“”）。

```
<form id="myform">
    <select id="id_deals-0-currency" class="required" name="deals-0-currency">
    <option value="">---------</option>
    <option selected="selected" value="1">USD - $</option>
    <option value="2">EUR - €&lt;/option>
    </select>
</form>

$(function() {
    $(document).ready(function() {

        $.validator.addMethod("valueNotEquals", function(value, element, arg) {
            return arg != value;
        }, "Value must not equal arg.");

        $("#myform").validate({
            rules: {
                deals-0-currency: {
                    valueNotEquals: ""
                }
            },
            messages: {
                deals-0-currency: {
                    valueNotEquals: "Please select an item!"
                }
            }

        });
    });
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:07:34.170

您的代码有效，但您需要将其引用 `deals-0-currency`为对象键，并且您的空字符串默认值被`required`该类取代，这使得该项目在验证中是必需的。空值将始终首先触发所需的消息，并且您的验证方法将永远不会被当前默认值触发`""`

```
$("#myform").validate({           
    rules: {
        'deals-0-currency': {
            valueNotEquals: ""
        }
    },
    messages: {
        'deals-0-currency': {
            valueNotEquals: "Please select an item!"
        }
    }
}); 
```

演示（已删除所需的类）[http://jsfiddle.net/WGL4j/7/](http://jsfiddle.net/WGL4j/7/)

编辑：要在更改时验证选择，请使用`validator valid()`只能在整个表单或单个元素上调用的方法：

```
 $('#id_deals-0-currency').change(function(){
            $(this).valid()
}) 
```

更新演示：http: [//jsfiddle.net/WGL4j/8/](http://jsfiddle.net/WGL4j/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T14:06:24.847

首先...您没有编写有效的 JavaScript。你的名字不能有破折号！切换到“_”或引用名称，它将是有效的。请记住始终通过[JSLint](http://www.jslint.com)或[JSHint](http://www.jshint.com)之类的工具运行 JavaScript 。

您的代码中的另一个奇怪之处是您有一个`$(function(){}) handler`和一个`$(document).ready(function(){})`处理程序嵌套在彼此内部。这不会破坏您的代码，但没有必要。

在选择值更改时检查验证，您将需要手动调用验证。 [JQuery Validation 附带了`valid`执行此操作](http://docs.jquery.com/Plugins/Validation/valid)的方法。更新您的 ready 函数以包含此行。

```
$('id_deals-0-currency').on('change', function() { $('#myform"').valid(); }); 
```

好的，现在更改全部到位，最终代码应如下所示（[此处为整个工作 jsFiddle](http://jsfiddle.net/ZJ4r8/)）：

```
<html>
<head>
<script src="/path/to/jquery-1.8.3.min.js"></script>
<script src="/path/to/jquery.validate.js"></script>
<script>
$(function() {
    $.validator.addMethod("valueNotEquals", function(value, element, arg) {
        return arg != value;
    }, "Value must not equal arg.");

    $("#myform").validate({
        rules: {
            deals_0_currency: {
                valueNotEquals: ""
            }
        },
        messages: {
            deals_0_currency: {
                valueNotEquals: "Please select an item!"
            }
        }

    });

    $('#id_deals-0-currency').on('change', function() { $('#myform').valid(); });
});
</script>
<body>
<form id="myform" method="post">
        <select id="id_deals-0-currency" class="required" name="deals_0_currency">
        <option value="">---------</option>
        <option selected="selected" value="1">USD - $</option>
        <option value="2">EUR - €&lt;/option>
        </select>
</form>​
</body>
</html> 
```

# php - 以 3-4 列和 3 行显示值

> ID：14011445
> 
> 赞同：0
> 
> 时间：2012-12-23T13:45:49.900
> 
> 标签：php

```
<?php
$result=mysql_query("SELECT * FROM product_food WHERE food_cat='soup'");
while($row=mysql_fetch_array($result)){
echo"<tr>
<td><img src='".$row['picture']."' onclick='addtocart(".$row['food_id'].")' /></td></tr>
<tr>
<td>    <b>".$row['name']."</b><br />
 Price:<big style='color:green'>
 $".$row['price']."</big><br /><br />
</td>
</tr>
<tr><td colspan='2'><hr size='1' /></td>";
} ?> 
```

我一直在为我们的论文开发一个排序系统，但我被这些列和行所困扰。我不确定我将如何操作这些值或表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:59:20.743

尝试使用代码

```
 <?php
   $result=mysql_query("SELECT * FROM product_food WHERE food_cat='soup'");
  echo "<table>";
  while($row=mysql_fetch_array($result)){
  ?>
 <tr>
 <td><img src='<?php echo $row['picture']; ?>' onclick="addtocart(<?php echo $row['food_id'];?>)" /></td></tr>
 <tr>
 <td>    <b><?php echo $row['name'];?></b><br />
 Price:<big style='color:green'>
 <?php echo $row['price'] ;?></big><br /><br />
 </td>
 </tr>
 <tr><td colspan='2'><hr size='1' /></td></tr>
 <?php
 }
 ?> 
</table> 
```

# c# - Windows 8 中的自然语言处理

> ID：14011447
> 
> 赞同：11
> 
> 时间：2012-12-23T13:46:03.083
> 
> 标签：c#, windows-8, nlp

我是 Windows 8 编程、C# 和 NLP 的新手。

我正在寻找一个允许我在 Windows 8 中使用 NLP 的库。

我找到了 SharpNLP，但它的文档记录很差，没有教程。我也遇到过 Antelope 框架，但这似乎有更糟糕的文档。

是否有任何资源可以帮助我（教程或更好的文档框架）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T05:48:48.480

SharpNLP 看起来不错。它是[OpenNLP](http://opennlp.apache.org/)的端口，因此您可能只需阅读 OpenNLP 的文档即可。还有[Lucene.Net](http://lucenenet.apache.org/)（[Lucene](http://lucene.apache.org/)的 .Net 版本）它是一个搜索引擎，（我猜）里面应该有一些 NLP。不过我不完全确定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T05:00:46.523

根据您要实现的目标，这些库可用于`C#`并且可能有用。但是，我不确定它们是否适用于 Metro 应用程序。

*   [Proxem](https://www.proxem.com/en/technology/antelope-framework/)
*   [炼金术API](http://www.alchemyapi.com/tools/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T03:16:45.260

C# 中没有太多内容。我推荐Java。有大量的 Java 库可以执行 NLP，并且它们都可以在 Windows 中正常工作。另外，Java 与 C# 并没有太大区别，如果需要，您的代码也可以在 *nix 上运行。看：

[http://opennlp.apache.org/](http://opennlp.apache.org/)

[在 JAVA 中使用哪个 NLP 工具包？](https://stackoverflow.com/questions/895893/which-nlp-toolkit-to-use-in-java)

[Java 编程语言的 NLP 库](https://stackoverflow.com/questions/4277887/nlp-library-for-java-programming-language)

# asp.net - 无法从 Android 应用程序访问 asp.net 的登录页面

> ID：14011448
> 
> 赞同：0
> 
> 时间：2012-12-23T13:46:02.973
> 
> 标签：asp.net

我创建了一个 LoginPage 来验证 Android 用户，但我不断收到一个

IIS 7.0 详细错误 - 401.1 - 未经授权

在该 aspx 页面的文件夹中，我设置了一个 web.config 以允许访问

```
<?xml version="1.0"?>
<configuration>
    <location path="~/MobileApp/LoginMobile.aspx">
        <system.web>
            <authorization>
                <allow users="*"/>
            </authorization>
        </system.web>
    </location>
</configuration> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:56:44.113

快速谷歌搜索你的错误返回了这个解决方案：

作为快速而肮脏的修复，授予`IIS_IUSRS`组*读取/执行*或*修改*您的 Web 文件夹的权限。

要正确解决此问题，您应该为您的站点授予应用程序池标识*读取/执行*或*修改*应用程序 Web 文件夹的权限。去做这个：

1.  打开 IIS 管理器，导航到您的网站或站点部署到的应用程序文件夹。
2.  打开高级设置（它位于右侧的*操作*窗格中）。
3.  记下*应用程序池*名称，然后关闭此窗口
4.  双击*身份验证*图标以打开身份验证设置
5.  禁用*Windows 身份验证*
6.  右键单击*匿名身份验证*，然后单击`Edit`
7.  选择`Application pool identity`单选按钮单击`OK`
8.  从左侧的 IIS 管理器树中选择应用程序池节点，然后选择您在步骤 3 中记下的应用程序池名称
9.  右键单击并选择*高级设置*
10.  展开流程模型设置并`ApplicationPoolIdentity`从*“内置帐户”*下拉列表中进行选择，然后单击`OK`。
11.  再次单击`OK`以保存并关闭应用程序池高级设置页面
12.  打开管理员命令行（右键单击 CMD 图标并选择“以管理员身份运行”。它将位于开始菜单上的某个位置，可能在附件下。
13.  运行以下命令：

`icacls <path_to_site> /grant "IIS APPPOOL\<app_pool_name>"(CI)(OI)(M)`

例如：

`icacls C:\inetpub\wwwroot\mysite\ /grant "IIS APPPOOL\DEFAULTAPPPOOL":(CI)(OI)(M)`

如果一切顺利`icacls.exe`，将报告：

```
处理后的文件：c:\inetpub\wwwroot\mysite
成功处理1个文件；处理 0 个文件失败

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T23:50:28.307

在进行此呼叫之前打开了另一个连接，并且以某种方式干扰了它。

# android - OnDraw 上的 Android NoClassDefFoundError

> ID：14011450
> 
> 赞同：0
> 
> 时间：2012-12-23T13:46:32.257
> 
> 标签：android

我在这一行遇到 NoClassDefFoundError 错误：

```
vto.addOnDrawListener(new OnDrawListener() { 
```

在此代码上：

```
vto = visibleListView.getViewTreeObserver();
vto.addOnDrawListener(new OnDrawListener() {

    @Override
    public void onDraw() {
        Log.v("DRAWING", "DRAWN");

    }
}); 
```

这是错误消息：

```
12-23 21:38:49.068: E/AndroidRuntime(24508): FATAL EXCEPTION: main
12-23 21:38:49.068: E/AndroidRuntime(24508): java.lang.NoClassDefFoundError: com.adylitica.activity.NotesActivity$14
12-23 21:38:49.068: E/AndroidRuntime(24508):    at com.adylitica.activity.NotesActivity.onStart(NotesActivity.java:1095)
12-23 21:38:49.068: E/AndroidRuntime(24508):    at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1136) 
```

请注意，NotesActivity 类是我当前正在运行上述代码的类。

求详细点，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T13:49:00.743

在[`OnDrawListener`](http://developer.android.com/reference/android/view/ViewTreeObserver.OnDrawListener.html)API 级别 16 中引入。

# html - IE 未连接到外部 IE 特定的 CSS 文件

> ID：14011453
> 
> 赞同：0
> 
> 时间：2012-12-23T13:46:38.420
> 
> 标签：html, css

我的页面顶部有这个

```
 <!--[if IE]>
<link rel="stylesheet" type"text/css" href="ie.css" />
<![endif]--> 
```

在css文件里面我有这个

```
 <style>
h1 {
font-family: 'Paytone One', sans-serif;
font-size: 40px;
color: red;
position: absolute;
top:150px;
left: 400px;
}
h2 {
font-family: 'Paytone One', sans-serif;
font-size: 30px;
position: absolute;
top:0px;
left: 0px;
color: #FC3B3B;
}
h3 {
font-family: 'Paytone One', sans-serif;
font-size: 20px;
position: absolute;
top:300px;
left: 400px;
}
.image2 {
position: absolute;
top:0px;
left: 0px;
}
.box1 {
width: 100%;
height: 5px;
background-color:  #FC3B3B;
position: absolute;
top:0px;
left: 0px;
}
p {
position: absolute;
top:0px;
left: 0px;
font-size: 15px;
font-family: arial;
color: #585858;
}

</style> 
```

IE 没有选择这个，当我更改数字以将内容放置在页面内时，它们不会移动。但是在 Chrome 浏览器中，定位正是我想要的位置

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T13:48:01.727

您需要`<style>`从 CSS 文件中删除标签。这样的文件只包含 CSS，根本不包含 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T13:48:07.590

`<style>`从 css 文件中 删除标签，这是不正确的。`<style>`标签只需要在 html 文档中使用。

# frama-c - 存在量化断言失败

> ID：14011456
> 
> 赞同：2
> 
> 时间：2012-12-23T13:47:51.160
> 
> 标签：frama-c

我试图证明数组的量化断言并遇到了一些问题。考虑以下小程序：

```
int a[4] = {1,2,3,4};

/*@ requires p == a;
    assigns \nothing;
*/
void test(int *p)
{
  p++;
  //@ assert \forall int i; 0 <= i < 3 ==> p[i] < 10;
  //@ assert \exists int i; p[i] == 3;
} 
```

我正在使用“类型化”内存模型：

frama-c-gui -wp -wp-qed -wp-byreference -wp-model 'Typed' -main test Test.c

由于某种原因，“要求”不成立，因此可以证明所有断言，即使是 1==2。为了克服这个问题，我直接在函数体中分配了全局变量：

```
int a[4] = {1,2,3,4};

/*@  assigns \nothing;
*/
void test(int *p)
{
  p = a;

  p++;
  //@ assert \forall int i; 0 <= i < 3 ==> p[i] < 10;
  //@ assert \exists int i; p[i] == 3;
} 
```

这里 forall 成立，但存在不成立。只有当我在它之前添加断言“p [1] == 3”时，存在才成立。证明这种存在数组属性缺少什么？我需要这个来表达数组条目上搜索循环的循环不变量。

谢谢，哈拉尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T17:04:44.283

错误的简化将“要求”转换为错误。它将在下一个版本中更正。感谢您发现错误。

修复后，Alt-ergo 仍然无法证明最后一个断言，因为它无法使用其通常的启发式方法找到 i 的见证。当您添加断言“p [1] == 3”时，您会给出证人，这就是为什么它更容易证明的原因。其他一些证明者（Z3、CVC4）将能够直接证明这个特定的断言。请继续关注下一个版本。

# c# - 用子类型查询SQL数据库，在c#中显示

> ID：14011460
> 
> 赞同：0
> 
> 时间：2012-12-23T13:48:45.137
> 
> 标签：c#, mysql

我现在已经为类似 POS 的系统创建了一个 MySQL 数据库，并且我正在使用子类型将一些不同的类型放入我的数据库中。

```
CREATE TABLE Product(
Prod_id INT PRIMARY KEY AUTO_INCREMENT,
Name VARCHAR(40),
Barcode INT
);

CREATE TABLE Card(
Prod_id INT,
Price DECIMAL(8, 2),
FOREIGN KEY (Prod_id) REFERENCES Product(Prod_id)
);
CREATE TABLE Weapon(
Prod_id INT,
Caliber_id INT,
FOREIGN KEY (Prod_id) REFERENCES Product(Prod_id)
); 
```

当我扫描条形码时，我想查询数据库。找到产品后，我想在屏幕上显示有关它的所有信息。我在 C# 中使用 DataTable，对于每个结果，我都将 DataRow 添加到 DataTable 中。

所以我有两个问题：我怎样才能巧妙地查询数据库，返回我拥有的关于条形码的所有信息？如何在我的屏幕上以有效的方式显示这些信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T15:26:38.153

我假设您只使用提到的表格

请找到下面的sql语句，它将根据需要返回所有信息

```
Select p.Prod_id,p.Name,p.Barcode,c.Price, w.Caliber_id 
from Product p
inner join Card c
on 
(
p.Prod_id  = c.Prod_id 
)
inner join Weapon w
on 
(
p.Prod_id  = w.Prod_id 
) 
where p.Barcode = 'Barcode' 
```

如果您有一些不在卡片或武器中的产品，您可以使用左外连接

希望这会帮助你。

# jakarta-ee - 从头开始设计 servlet 路由器

> ID：14011466
> 
> 赞同：0
> 
> 时间：2012-12-23T13:49:24.250
> 
> 标签：jakarta-ee, servlets, servlet-filters

我想设计一个基于 servlet 的 url 路由器。

路由器通常会向适当的控制器和操作发出 Web 请求。

Web url 将采用“控制器/操作”模式。

我尝试了什么：

1.  模式：/controller?action=dosomething
2.  url 映射将流向 servlet。
3.  servlet 将创建控制器实例
4.  “action” GET 参数将使用反射在控制器上执行方法。

我做的很蹩脚。我希望 url 采用“控制器/动作”形式。

一些指示会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:09:22.147

servlet 规范通过示例给出了很好的解释

这是它的重写部分：

如果您有一个上下文路径为 的 webapp `/catalog`，并且有一个映射到 的 servlet `/lawn/*`，并且如果该路径有请求，则`/catalog/lawn/index.html`请求的 ContextPath 将为 /catalog；它的 ServerPath 将是`/lawn`，它的 PathInfo 将是`/index.html`。

使用请求的 ServerPath 和 ContextPath 属性来提取 URL 的控制器部分和操作部分。

# java - 性能更好的 Java 序列化替代方案

> ID：14011467
> 
> 赞同：26
> 
> 时间：2012-12-23T13:49:26.623
> 
> 标签：java, performance, serialization

假设我使用标准 Java 对象序列化向内存缓冲区写入/读取小型（< 1K）Java 对象。最关键的部分是反序列化，即从内存缓冲区（字节数组）中读取Java对象。

对于这种情况，有没有比标准 Java 序列化更快的替代方法？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-23T15:31:19.687

您可能还想看看[FST](http://ruedigermoeller.github.io/fast-serialization/)。

还提供堆外读/写工具

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-12-23T14:10:15.807

看看[kryo](https://github.com/EsotericSoftware/kryo)。它比内置的序列化机制（写出大量字符串并严重依赖反射）快得多，但使用起来有点困难。
编辑：下面的 R.Moeller 建议[FST](http://ruedigermoeller.github.io/fast-serialization/)，直到现在我才听说过，但它看起来比 kryo 更快并且与 java 内置序列化兼容（这应该使它更容易使用），所以我会看在那一天

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-23T14:18:01.687

试试[Google protobuf](https://developers.google.com/protocol-buffers/docs/javatutorial)或[Thrift](http://thrift.apache.org/)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-23T13:57:18.073

标准序列化添加了大量类型信息，然后在反序列化对象时对其进行验证。当您知道要反序列化的对象的类型时，通常不需要这样做。

你可以做的是为每个类创建你自己的序列化方法，它只是将对象的所有值写入字节缓冲区，以及一个构造函数（或工厂方法，当你以这种方式摆动时）接受这样一个字节缓冲区和从中读取所有变量。

但就像 AlexR 一样，我想知道你是否真的需要它。序列化通常仅在数据离开程序时才需要（例如存储在磁盘上或通过网络发送到另一个程序）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-23T14:10:40.900

众所周知，Java 的标准序列化速度很慢，并且在磁盘上使用大量字节。进行自己的自定义序列化非常简单。
javas std 序列化非常适合演示项目，但由于上述原因不太适合专业项目。进一步的版本控制不在您的控制之下。

java 提供了自定义序列化所需的一切，请参阅我的帖子中的演示代码

[对象的Java部分（反）序列化](https://stackoverflow.com/questions/13650457/java-partial-deserialization-of-objects/13650819#13650819)

使用这种方法，您甚至可以指定二进制文件格式，以便在 C 或 C# 中也可以读取它。另一个优点自定义设置对象需要的空间比主内存少（布尔值在主内存中需要 4 个字节，但自定义序列化时只需要 1 个字节（作为字节）

如果不同的项目合作伙伴必须读取您的序列化数据，谷歌的 Protobuf 是一个替代方案。

# django - 使用 send_mail 发送 .txt。姜戈

> ID：14011468
> 
> 赞同：3
> 
> 时间：2012-12-23T13:49:55.997
> 
> 标签：django, email

我想用 django 发送一封电子邮件，并且我希望`body`电子邮件包含`.txt`文件中的内容。我从我的模板中导入。我浏览了[文档](https://docs.djangoproject.com/en/dev/topics/email/)，但我没有找到如何去做。

这是我的views.py中的内容：

```
 send_mail('TEST', 'myfile.txt', 'admin@test.com', [test@test.com], fail_silently=False) 
```

我试图添加`myfile.txt`到我的模板目录。但是当我用 in 替换`'myfile.txt'`时`myfile.txt`，`send_mail()`我当然会得到一个错误，因为`myfile.txt`它不是一个定义的变量。关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T18:09:29.800

你需要的是`render_to_string`，

```
from django.template.loader import render_to_string
body = render_to_string('myfile.txt', foovars)
send_mail('TEST', body, 'admin@test.com', [test@test.com], fail_silently=False) 
```

`foovars`如果继续进行，您需要在“模板”中呈现的值的字典在哪里`myfile.txt`，否则`{}`

确保您的`myfile.txt`谎言在您的模板目录上，仅此而已;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T13:57:28.153

如果您希望电子邮件的正文成为`myfile.txt`then 的内容（假设`myfile.txt`存储在`media > files > myfile.txt`）：

```
from mysite.settings import MEDIA_ROOT
import os

file = open(MEDIA_ROOT + os.path.sep + 'files/myfile.txt', 'r')
content = file.read()
file.close()

# EmailMessage class version
mail = EmailMessage('subject', content, 'from@example.com', ['to@example.com'])
mail.send()

# send_mail version
send_mail('TEST', content, 'admin@test.com', [test@test.com], fail_silently=False) 
```

# python - 具有积极反馈的 HTTP 浏览库

> ID：14011470
> 
> 赞同：0
> 
> 时间：2012-12-23T13:50:00.987
> 
> 标签：python, url, browser, sikuli

我有一个带有 Flash 对象的网页。我希望能够在其中单击多个不同的按钮。关于这种方法，我想知道是否有任何库（最好是 Python/Perl/JAVA）可以实际流式传输页面打开会话，模拟分辨率并执行（x， y) 点击。

例如（类 Python）：

我加载 SomeUrlLib：

```
import SomeUrlLib

browser = new SomeUrlLib()
browser.setUrl('http://www.someaddress.com/subpage/')
browser.setResolution(1280, 800)

browser.startBrowsing('SessionName') # Bind a session name to this browsing session
locX = 40
locY = 80
browser.click(locX, locY, 'SessionName')
screen = browser.takeScreenshot('SessionName') 
```

我认为这几乎是不可能的，因为我无法想象那里的任何库都能够内置 Flash 引擎。

“如果”这可能以某种奇怪的方式实现，我想尝试使用 Sikuli API（屏幕识别）来对屏幕截图反馈做出反应以单击某些坐标，但我想动态更改页面仍然是一个问题，因为延迟该脚本将针对页面中发生的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T14:33:49.993

似乎 Selenium 有一个扩展，可以启用 Flash。硒 [http://seleniumhq.org/](http://seleniumhq.org/)

硒蟒 [http://pypi.python.org/pypi/selenium/](http://pypi.python.org/pypi/selenium/)

用于闪存的硒扩展 | 也适用于 python [http://code.google.com/p/flash-selenium/](http://code.google.com/p/flash-selenium/)

# export - 在 Notes.app 中备份/恢复笔记，即存储在 iCloud 中（iOS、Mac OS X Mountain Lion）

> ID：14011474
> 
> 赞同：14
> 
> 时间：2012-12-23T13:50:52.967
> 
> 标签：export, backup, icloud, restore

我希望在标准 Notes.app 中定期备份存储在 iPhone、iPad 和 Mac OS 上的笔记。不幸的是，由于 Apple 将这些从标准 IMAP 格式转移到了数据库格式（并添加了一个单独的应用程序），这几乎是不可能的。

我目前有 200 多个笔记，并且还在不断增长。我想它们以标准数据库格式存储并同步到 iCloud 并推送到所有设备。

Notes 似乎将其数据存储在此路径中：

“库/Containers/com.apple.Notes/Data/Library/Notes/”

如果你们中的任何人都可以可靠地阅读，甚至可以备份/恢复这个数据库，那么请发表评论。

有一篇 Apple KB 文章[HT4910](http://support.apple.com/kb/HT4910?viewlocale=en_US&locale=en_US)处理了这个问题，但证明帮助不大。事实上，他们的方法使问题复杂化，并且对于多个备份来说非常不雅。

苹果自己的内置备份解决方案 Time Machine 也没有什么帮助，因为它似乎跳过了备份并且不允许恢复笔记。

如果有人可以仔细阅读并提出解决方案，我将不胜感激，许多不断增长的 iCloud 用户社区肯定会对此表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T01:13:38.033

好的，这是一个有点不完整的答案，但我想发布它，以便人们可以做出贡献。

使用此 LSOF 命令：

```
lsof -c Notes | GREP /Users/ 
```

我发现大部分 Notes.app 数据都存储在这里：

```
/Users/USERNAME/Library/Containers/com.apple.Notes/Data/Library/Notes 
```

在那个文件夹中有三个文件（至少对我来说）： NotesV1.storedata NotesV1.storedata-shm NotesV1.storedata-wal

奇怪的是，这让我朝着这个方向前进：

[https://superuser.com/questions/464679/where-does-os-x-mountain-lion-store-notes-data](https://superuser.com/questions/464679/where-does-os-x-mountain-lion-store-notes-data)

我还在这里找到了一个 SqlLite 缓存数据库：

```
/Users/USERNAME/Library/Containers/com.apple.Notes/Data/Library/Caches/com.apple.Notes/Cache.db 
```

虽然用 Sqlite3 调查它只发现了一些不感兴趣的表：

```
sqlite> .tables
cfurl_cache_blob_data       cfurl_cache_response      
cfurl_cache_receiver_data   cfurl_cache_schema_version 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:17:26.670

如果您需要取回您的笔记，请先断开互联网连接...然后将您的笔记复制到安全的地方（桌面）..然后删除您图书馆的文件夹，然后将安全文件夹复制回图书馆的笔记.. .您可以看到一个旧文件日期..这是您取回笔记所需的主文件..您可以删除其他2个新日期的文件，因为它们是从icloud复制的..现在您可以享受打开note.app的乐趣你会看到你所有的旧笔记都回来了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T00:11:46.243

我四处寻找试图完成同样的事情，发现笔记在 10.8.5 Mountain Lion 中的存储位置。这是非常直截了当的。位置如下：

/Users/（您的用户）/Library/Mail/V2/Mailboxes/Notes.mbox/（带连字符的长数字）/Data/Messages/

单个笔记以 number.emlx 名称格式存储在该位置。

如果您复制 Notes.mbox，应该会得到所有内容。

# php - 如何将 mysql 结果链接到同一页面以显示更多详细信息

> ID：14011475
> 
> 赞同：0
> 
> 时间：2012-12-23T13:50:59.900
> 
> 标签：php, mysql, variables

我有一个自动运行查询并在页面上显示结果的页面。我想做的是，当单击一个结果时，它应该在同一页面上显示有关该特定项目的更多详细信息（可能在 div 中），但我不想为每个特定的 div/page项目，因为我从一个不断增长的数据库中获得结果。

这就是我的 php 显示结果的样子：

```
 while($row = mysql_fetch_array($result)){
 if (strlen($row['companyname'])>0) {

  echo      "<ul data-role='listview' data-inset='true'>
  <li><a href='#'>
  <h3>{$row['companyname']}</h3>
            <p><b>Address:</b></p>
            <p><b>Tel:</b>{$row['tel']}   <b>Fax:</b>{$row['fax']}</p>
            <p><b>Email:</b>{$row['email']}</p>
            <p><b>Website:</b>{$row['website']}</p>
            <p class='ui-li-aside'><strong>VIEW MORE</strong></p>
        </a></li>
    </ul>"; 
```

我尝试将此代码放在下面的 href 属性中，但它仍然不起作用，它会离开我不想发生的页面：

```
 <a href="resultdetails.php?companyname='{$row['companyname']}" 
```

然后我在下一页上得到这样的结果：

```
 $companyname = intval($_GET['companyname']);
 $query = mysql_query("SELECT * FROM businessuser WHERE companyname=$companyname");
 $details = mysql_fetch_array($query); 

 echo ($details[companyname]);
 echo ($details[website]);
 echo ($details[tel]); 
```

这只会在我的表中给出第一个结果，无论我点击哪个结果:(

请帮助...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T14:26:24.620

PHP是服务器端。这意味着当页面提供给用户时，您无法使用 PHP 对其进行编辑。如果您想在同一页面上显示详细信息，您有两种选择：

a) 将详细信息放入隐藏的 div 并通过单击*查看更多*链接显示

```
<a href="#" onclick="$('#details1').css('display', 'block');return false;">View more</a>
<div style="display: none;" id="details1">Details here</div> 
```

b) 使用 JavaScript 加载详细信息（这是服务器端，这意味着它在页面加载后在浏览器中运行）。您需要使用 AJAX 来加载数据。为此，您需要将获取详细信息的代码放在另一个脚本中，例如`get_details.php`.

```
$.get('path/to/get_details.php', function(data)
{
    $('#details1').html(data);
    $('#details1').css('display', 'block');
}); 
```

注意：您需要 jQuery 才能使该代码正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T14:37:22.027

那么，您将需要 Javascript 和 Jquery 来完成此操作。这是一个DEMO： http: [//jsfiddle.net/yZrUg/4/](http://jsfiddle.net/yZrUg/4/) 我为你准备了。

您可以从那里复制代码，或者这里是 HTML：

```
<table id="report"><tbody>  

    <tr class="odd">
            <td class="left"> Company Name </td> 
        </tr>

        <tr class="even" style="display: none;">
            <td style=" border:1px solid #CCC;">
                <p style="color:#656565;"> address</p>
                 <p style="color:#656565;"> tel </p>
                 <p style="color:#656565;"> email </p>
                 <p style="color:#656565;"> website </p>

            </td>
        </tr>  

    </tbody></table> 
```

CSS：

```
#report { border-collapse:collapse; }
        #report h4 { margin:0px; padding:0px;}
        #report td {  color:#000; padding:0px; }
        #report tr.odd td { color:black;  cursor:pointer; border-bottom:1px solid #CCC;   }

        #report tr.even td {background-color:#dadada;  padding:10px 0px 15px 20px; }
        #report tr.odd td.left {width: 1000px;   }
        #report tr.odd td.left b{font-size:18px; font-weight:normal;}
        #report div.arrow { background:transparent url(../images/arrows.png) no-repeat scroll 0px -16px; width:16px; height:16px;  }
        #report div.up { background-position:0px 0px; }
​ 
```

和 Javascript：

```
$(document).ready(
    function(){
        $('#report tbody tr:nth-child(odd)').addClass('odd');
        $('#report tbody tr:nth-child(even)').addClass('even').hide();
        $('tr.odd').click(
            function(){
                var that = $(this),
                    next = that.next('.even');
                that.find('.arrow').toggleClass('up');
                next.toggle().siblings('.even').hide();
                $('.even:not(":visible")').each(
                    function(){
                        $(this).prev('.odd').find('.up').removeClass('up');
                    });
            });
        });
​ 
```

不要忘记使用 Jquery

# objective-c - _NSCFConstantString latitude]：发送到实例的无法识别的选择器

> ID：14011477
> 
> 赞同：1
> 
> 时间：2012-12-23T13:51:15.843
> 
> 标签：objective-c, nscfstring

```
for(int i=0;i<[self.printers count]; i++)
    {
        PublicPrivateEvent *printerselection = [printers objectAtIndex:i];

        CGFloat latt = [printerselection.latitude floatValue]; //Here is broken
        CGFloat lng=[printerselection.longtitude floatValue];
         pointsCoOrds[index++] = CLLocationCoordinate2DMake(latt,lng);

    } 
```

大家好，我试图从 PublicPrivateEvent 类中获取值。但我不知道我无法处理什么？我有这个问题：_NSCFConstantString latitude]: unrecognized selector sent to instance .. 你知道吗？提前致谢。

# opengl - OpenGL：尽管透明度设置为 1.0，但仍能看到对象的内部

> ID：14011478
> 
> 赞同：2
> 
> 时间：2012-12-23T13:51:17.853
> 
> 标签：opengl, transparency

我正在尝试检查透明度及其工作原理。

我在其中创建了一个solidsphere 和一个solidcube。我已启用

```
glEnable(GL_BLEND);  
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

透明度使用 color4f 按预期工作。
问题是当我将球体的透明度设置为 1.0 时，立方体仍然出现。

我也在使用这些：

```
glEnable(GL_DEPTH_TEST);
glDepthFunc(GL_LEQUAL); 
glClearDepth(1); 
glPolygonMode(GL_FRONT_AND_BACK,GL_FILL);
glEnable(GL_CULL_FACE);  
glFrontFace(GL_CW); 
```

仅当球体的透明度为 != 1.0 时，如何使立方体可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:03:50.803

你设定的理由是`glFrontFace(GL_CW);`什么？默认值为`GL_CCW`，因此您将剔除正面并渲染背面。由于缺少球体的前部，您会看到它的内部。

详细说明：

使用法线 (src_alpha , 1-src_alpha) 混合渲染半透明对象时，需要按深度顺序从后向前渲染半透明表面。

如果仅渲染对象的背面，它可能（如果它或多或少对称）看起来是正常的，但实际上它是由内向外的，因此无法正确遮挡实际上在其中的对象。

因此，要使其工作，重要的是不剔除前表面，并且首先渲染不透明或更远的对象。

如果您希望球体的正面和背面都正确且半透明地渲染，则需要先渲染背面，然后再渲染正面。这可以通过多边形排序来完成，但对于凸对象，只需渲染两次就足够了，背面剔除倒置 - 所以先渲染背面，然后再渲染正面，在两个单独的通道中。

# node.js - node.js中如何实现jade模板继承

> ID：14011484
> 
> 赞同：1
> 
> 时间：2012-12-23T13:52:17.880
> 
> 标签：node.js, inheritance, pug

我在同一个文件夹中有两个玉模板，就像：

```
 |__layout.jade
  |__content.jade 
```

并且 layout.jade 是父模板， content.jade 将从它继承：所以在`layout.jade`：

```
doctype 5
html(lang="en")
  head
    title= title
  body
    block content 
```

在里面`content.jade`

```
extends layout

block content
 h1 this is frome nested template 
```

但是，当我运行它时，继承不起作用，它只显示父模板的内容

那么我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:12:03.450

确保在`content.jade`.

```
extends layout

block append content
  h1 this is from nested template 
```

[更多关于这里。](http://jade-lang.com/reference/inheritance/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T17:10:19.057

这可能是一个完全的红鲱鱼，但我注意到你的两个文件似乎有不一致的缩进（至少如上面粘贴的那样）。

如果你纠正它，它会起作用吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-26T16:48:06.603

我遇到了类似的问题，并在 stack-overflow/Jade 文档上尝试了 node.js 的各种答案。

在您的 app.js 文件中检查以下内容..

1）检查视图引擎是否设置为jade（现在更名为pug）：

```
app.set("view engine", "jade"); 
```

2）设置视图文件夹（即您保存模板/视图文件的位置）：

```
app.set("views", __dirname + "/views"); 
```

3）将布局设置为false：

```
app.set('view options', { layout: false }); 
```

4）如果您使用快递，请检查您是否正在渲染正确的文件

```
app.get("/", function(req, res){
    res.render("contents.jade");
}); 
```

希望有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-07T00:16:05.977

我测试了你的代码，没问题，你想试试更新版本的node.js和jade吗？

# computer-science - 是语言 {0^n 1^n 0^k | k != n} 上下文无关？

> ID：14011487
> 
> 赞同：5
> 
> 时间：2012-12-23T13:52:51.560
> 
> 标签：computer-science, context-free-grammar, regular-language, pushdown-automaton

我相信这种语言不是上下文无关的，因为 PDA 不可能比较 2 个相同长度的 0 和 1 块并记住它的长度以供以后使用。

不幸的是，我不知道如何证明这一点。

我尝试使用抽水引理无济于事......

我还试图通过矛盾假设该语言是上下文无关的，并使用上下文无关语言与常规语言的交集也是上下文无关的事实（通过找到一些神秘的常规语言 L），并且令人惊讶地（或不是） - 我所有的努力都是徒劳的......

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T14:29:29.727

## 是语言 { 0 ^n 1 ^n 0 ^k | k != n} 上下文无关？

**不**，语言 L = { 0 ^n 1 ^n 0 ^k | k!=n }**不是上下文无关语言**。此外，[常规语言类是上下文无关语言类的子集](https://stackoverflow.com/questions/13143186/example-of-non-linear-unambiguous-and-non-deterministic-cfl)。

You Idea 使用`PDA`正确且明显的方式来表明语言不是上下文无关的。而且我们不能`PDA`为语言 0 ^n 1 ^n 0 ^k绘图，因为在匹配前缀 0 ^n到 1 ^n堆栈后变为空，然后我们没有存储信息来检查天气后缀 0 ^K是否等于`n`。

**提示：**对于正式证明

*   **第一的**

> L = {0 ^n 1 ^n 0 ^k | k!=n } 现在 L 的补码是 L ^'。
> 
> L ^' = {{0 ^n 1 ^n 0 ^n } 是众所周知的上下文相关语言（可以证明）。

上下文相关语言的补语**本身也是上下文相关的。**

*   **第二**

**对于抽引引理：**

> L = {0 ^n 1 ^n 0 ^k | k!=n } 是 L [1]和 L [2]的并集，其中
> L [1] = {0 ^n 1 ^n 0 ^k | k > n } 和 L [2] = {0 ^n 1 ^n 0 ^k | k < n },
> 
> **L = L [1] UL [2]**

L [1]和 L [2] 都是非上下文无关语言。和**两种非上下文无关语言的联合是非上下文无关的。**（可以很容易地通过语法证明）

* * *

此外，**两种上下文相关语言的并集连接是上下文相关的。**

# ios - FriendPickerViewController 未加载

> ID：14011489
> 
> 赞同：0
> 
> 时间：2012-12-23T13:52:55.267
> 
> 标签：ios, facebook-ios-sdk

我正在使用 sdk 3.1 并尝试使用friendpickercontroller，但不知何故表格在我的应用程序上加载为空。

这是我的代码，你能给出原因的提示吗？

谢谢

```
 - (void) loadFacebookFriendsPicker:(UINavigationController *)senderNavigationController {

    if (!FBSession.activeSession.isOpen) {
        // if the session is closed, then we open it here, and establish a handler for state changes
        [FBSession.activeSession openWithCompletionHandler:^(FBSession *session,
                                                             FBSessionState state,
                                                             NSError *error) {
            switch (state) {
                case FBSessionStateClosedLoginFailed:
                {
                    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Error"
                                                                        message:error.localizedDescription
                                                                       delegate:nil
                                                              cancelButtonTitle:@"OK"
                                                              otherButtonTitles:nil];
                    [alertView show];
                }
                    break;

                default:
                    break;
            }
        }];
    }

    if (self.friendPickerController == nil) {
        // Create friend picker, and get data loaded into it.
        self.friendPickerController = [[FBFriendPickerViewController alloc] init];
        self.friendPickerController.title = @"Pick Friends";
        self.friendPickerController.delegate = self;
    }

    [self.friendPickerController loadData];
    [self.friendPickerController clearSelection];

    [senderNavigationController pushViewController:self.friendPickerController animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:41:18.197

您的friendPickerController 不应该在完成处理程序中吗？你现在这样做的方式是，当你访问它时，friendPickerController 将为 nil，因为完成处理程序是异步执行的。

将您的friendPickerController 登录名移到带有FBSessionStateOpen 条件的switch case 块中。像这样的东西：

```
switch (state) {
        case FBSessionStateOpen: {

if (self.friendPickerController == nil) {
        // Create friend picker, and get data loaded into it.
        self.friendPickerController = [[FBFriendPickerViewController alloc] init];
        self.friendPickerController.title = @"Pick Friends";
        self.friendPickerController.delegate = self;
    }

    [self.friendPickerController loadData];
    [self.friendPickerController clearSelection];

    [senderNavigationController pushViewController:self.friendPickerController animated:YES];

} 
```

（虽然不确定是否在这里调用 pushViewController）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T02:19:53.743

您可能需要在您的应用程序委托中具有此功能

```
// FBSample logic
// In the login workflow, the Facebook native application, or Safari will transition back to
// this applicaiton via a url following the scheme fb[app id]://; the call to handleOpenURL
// below captures the token, in the case of success, on behalf of the FBSession object
- (BOOL)application:(UIApplication *)application
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
         annotation:(id)annotation {
    return [FBAppCall handleOpenURL:url sourceApplication:sourceApplication];
} 
```

# postgresql - Lazarus + PostgreSQL：为什么空白文本框会用单个语音标记存储？

> ID：14011491
> 
> 赞同：0
> 
> 时间：2012-12-23T13:53:01.940
> 
> 标签：postgresql, quotes, default-value, lazarus, sql-insert

使用的语言是 Lazarus Pascal，数据库是 PostgreSQL。

我将值分配给这样的参数：

```
dbQuery_Supp.Params.ParamByName('pCity').AsString := txtCity.Text; 
```

这是使用对数据库的 INSERT 查询编写的。

对于具有值的字段，数据会正确存储。但是对于没有数据的文本框，当使用 pgadmin 浏览时，我会在字段中看到单引号 ('')。

我的问题：

我需要确保如果文本框中没有输入数据，则该值的字段在数据库中为空白，而不是单引号。传统上（在 VB 中）我会检查每个文本框的值，并且只有在它有数据时才插入它。这是在拉撒路做同样的事情还是有办法解决这个问题？由于我正在使用参数编写值，因此为每个字段构建一个字符串检查似乎是额外的工作。所以我只是在寻找一种更有效、更方便的方法，如果有的话。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T14:18:16.797

pgAdmin`''`在其数据可视化小部件中显示一个空字符串。大概是为了将它与 NULL 区分开来，NULL 默认显示为一个空框（这可以在首选项中更改）。

`psql`如果您想确定，请与输出进行比较。

# java - JOptionPane 中的文本换行？

> ID：14011492
> 
> 赞同：31
> 
> 时间：2012-12-23T13:53:20.617
> 
> 标签：java, html, swing, exception, joptionpane

我正在使用以下代码在我的 Swing 应用程序中显示错误消息

```
try {
    ...
} catch (Exception exp) {
    JOptionPane.showMessageDialog(this, exp.getMessage(), "Error", JOptionPane.ERROR_MESSAGE);
} 
```

错误对话框的宽度会变长，具体取决于消息。有没有办法包装错误信息？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-12-23T14:12:16.663

A默认`JOptionPane`使用 a`JLabel`来显示文本。标签将格式化 HTML。在 CSS 中设置最大宽度。

```
JOptionPane.showMessageDialog(
    this, 
    "<html><body><p style='width: 200px;'>"+exp.getMessage()+"</p></body></html>", 
    "Error", 
    JOptionPane.ERROR_MESSAGE); 
```

更一般地，请参阅[如何在 Swing 组件中使用 HTML](http://docs.oracle.com/javase/tutorial/uiswing/components/html.html)，以及[在`JLabel`](https://stackoverflow.com/a/7861833/418556).

![](../Images/5f0576146f15010e07fcec211f9e7510.png) ![](../Images/aa44d2619b9309a7ddae9f869fd00e5c.png)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-12-23T13:57:31.227

将您的消息添加到可以换行的文本组件中，例如`JEditorPane`，然后将编辑器窗格指定`message`为您的`JOptionPane`. 有关示例，请参阅[*如何使用编辑器窗格和文本窗格*](http://docs.oracle.com/javase/tutorial/uiswing/components/editorpane.html)以及[*如何制作对话框*](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)。

附录：作为换行的替代方案，请考虑滚动窗格中的面向行的方法，如下所示。

![错误图像](../Images/a87d5874ea864e8c13693583666e913a.png)

```
f.add(new JButton(new AbstractAction("Oh noes!") {
    @Override
    public void actionPerformed(ActionEvent action) {
        try {
            throw new UnsupportedOperationException("Not supported yet.");
        } catch (Exception e) {
            StringBuilder sb = new StringBuilder("Error: ");
            sb.append(e.getMessage());
            sb.append("\n");
            for (StackTraceElement ste : e.getStackTrace()) {
                sb.append(ste.toString());
                sb.append("\n");
            }
            JTextArea jta = new JTextArea(sb.toString());
            JScrollPane jsp = new JScrollPane(jta){
                @Override
                public Dimension getPreferredSize() {
                    return new Dimension(480, 320);
                }
            };
            JOptionPane.showMessageDialog(
                null, jsp, "Error", JOptionPane.ERROR_MESSAGE);
        }
    }
})); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-01T01:20:34.950

捕获（异常 e）{ e.printStackTrace();

```
 StringBuilder sb = new StringBuilder(e.toString());
                for (StackTraceElement ste : e.getStackTrace()) {
                    sb.append("\n\tat ");
                    sb.append(ste);
                }

                JTextArea jta = new JTextArea(sb.toString());
                JScrollPane jsp = new JScrollPane(jta) {
                    @Override
                    public Dimension getPreferredSize() {
                        return new Dimension(750, 320);
                    }
                };
                JOptionPane.showMessageDialog(
                        null, jsp, "Error", JOptionPane.ERROR_MESSAGE);
                break; /// to show just one time 
            } 
```

# sql - 优化 ActiveRecord 计数查询

> ID：14011493
> 
> 赞同：0
> 
> 时间：2012-12-23T13:53:21.663
> 
> 标签：sql, ruby-on-rails, activerecord

我有一个记录表，其中包含名为 item_id 和键的列。Item_id 是指向名为 Item 的表的外键。活动模型定义如下所示：

```
class Record < ActiveRecord::Base
  belongs_to :item
end

class Item < ActiveRecord::Base
  has_many :records
end 
```

现在我想用不同的键计算每个项目有多少条记录，结果应该是这样的

```
{
    #<Item id: 1, ...> => 19,
    #<Item id: 2, ...> => 6,
    #<Item id: 3, ...> => 21,
    #<Item id: 4, ...> => 33,
} 
```

我可以用 Hash 对象计数在两行中做到这一点：

```
records = Record.select('DISTINCT item_id, key').includes(:item)
records.each_with_object(Hash.new 0) { |e, a| a[e.item] += 1 } 
```

我想知道是否可以使用纯活动记录查询或 SQL 语句来实现。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T14:38:45.543

```
Record.count(group: "item_id") 
```

或者

```
Record.select("item_id, COUNT(*) as count_all").group("item_id") 
```

更新：在您的情况下，您可以计算具有不同键的记录，如下所示

```
Record.select("item_id, COUNT(DISTINCT key) as count_all").group("item_id") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T14:48:31.243

您可以像这样使用 ActiveRecord 来执行此操作（您可以通过调用`.record_count`每个项目记录来获得计数）：

```
Item.
 select("items.*, count(records.id) as record_count").
 joins("left join records on records.item_id = items.id").
 group("items.id").
 all 
```

或者你可以使用[4.1.2.4 :counter_cache](http://guides.rubyonrails.org/association_basics.html)如果你不需要指定任何条件。

# css - 是否有任何工具可以为形状生成 css3 样式

> ID：14011497
> 
> 赞同：1
> 
> 时间：2012-12-23T13:53:46.427
> 
> 标签：css, css-transitions

我正在寻找一些为我们绘制的形状生成 css3 样式的工具。它应该类似于绘图程序。假设我画了一个圆角矩形，我得到了它的样式。它可以是绘图程序或在线工具。

# ruby-on-rails - Mongoid Scopes：访问范围内的限制和跳过

> ID：14011498
> 
> 赞同：0
> 
> 时间：2012-12-23T13:53:46.623
> 
> 标签：ruby-on-rails, ruby, scope, mongoid

我的问题基本上是这样的：

我想在`search(query)`我的 Document 模型中添加一个带参数的命名范围，以便能够使用 Sphinx 和 Riddle 搜索文档：

```
class Document
    ...
  @@riddle=Riddle::Client.new

  scope :search, ->(query){
    where(:document_id.in => sphinx_get_ids(query))
  }

  def self.sphinx_get_ids(query)
    @@riddle.query(query)[:matches].collect {|match| match[:attributes]["doc_id"]}
  end

end 
```

不要介意类变量。

我想在查询命中索引之前设置谜语客户端`offset`的`limit`参数（显然是出于性能原因），但我不能从范围块中指定这些选项，因为它们是类级别的，而且可能尚未初始化，就像在Kaminari 的这个例子：

`Document.search('graceful aubergine').page(5).per(10)`

这种方法对我来说似乎相当漂亮，但我仍然找不到实现它的方法。

有没有办法在查询实例化之前创建一个将在实例级别调用的范围方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T20:03:06.367

事实证明，在当前版本的 Mongoid 和正在开发的版本中是不可能的：

[https://github.com/mongoid/mongoid/issues/2652](https://github.com/mongoid/mongoid/issues/2652)

# javascript - 图像和放大

> ID：14011499
> 
> 赞同：0
> 
> 时间：2012-12-23T13:53:49.523
> 
> 标签：javascript, html, css

我的新电脑具有 2880x1800 像素分辨率和 175% 的屏幕放大率 - 现在我在我们的公司网页上注意到公司徽标变得非常像素化。当访问者的屏幕和屏幕放大率很高时，我们如何使用纯 CSS 或 HTML“检测”以显示更高分辨率的徽标？我们必须依赖 Javascript - 甚至有可能做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:57:04.970

您可以使用以下代码：

```
<link rel="stylesheet" media="screen and (min-device-width: 1500px)" href="1500.css" /> 
```

它只针对水平分辨率 > 1500px 的设备。

检测浏览器缩放并不是那么简单。我认为[这个 SO 问题](https://stackoverflow.com/questions/1713771/how-to-detect-page-zoom-level-in-all-modern-browsers)足以处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T14:03:34.257

这不是一个容易解决的问题。你有几个选择。这是 Chris Coyier 的[综述](http://css-tricks.com/on-responsive-images/)。

就个人而言，我会遵循[Dave Rupert](http://www.alistapart.com/articles/mo-pixels-mo-problems/)的方法，使用大约 1.5 倍显示大小的图像。这当然是最简单和最明智的解决方案。

```
img {width: 200px; height: 200px;}​

<img src="http://placehold.it/300x300" />​ 
```

[演示](http://jsfiddle.net/nYpqf/)

# dart - Dart 是否支持像 $_SESSION（会话）这样的 PHP？

> ID：14011500
> 
> 赞同：2
> 
> 时间：2012-12-23T13:54:02.973
> 
> 标签：dart

服务器端 Dart 是否支持 PHP 中的会话：

```
<?php

session_start();

$_SESSION['fruit'] = 'apple'; 
```

数据在页面加载时保留。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T14:15:49.047

是的，Dart 支持或多或少类似于 PHP 的会话。

让我们编写一个简单的程序，在苹果和香蕉之间随机分配一个水果，并将选择保存到会话中。

```
import 'dart:io';
import 'dart:math';

// A method that returns "apple" or "banana" randomly.
String getRandomFruit() => new Random().nextBool() ? 'apple' : 'banana';

main() {
  var server = new HttpServer();

  server.defaultRequestHandler = (HttpRequest req, HttpResponse res) {
    // Initialize session with an empty {} object as data.
    var session = req.session((s) => s.data = {});

    // Save fruit to session if there is nothing in there.
    if (session.data['fruit'] == null)
      session.data['fruit'] = getRandomFruit();

    // Retrieve fruit from the session.
    var fruit = session.data['fruit'];

    res.outputStream.writeString("Your fruit: $fruit", Encoding.UTF_8);
    res.outputStream.close();
  };

  server.listen('127.0.0.1', 80);
} 
```

现在，当您运行代码并转到 时`http://localhost`，只要会话保持打开状态，每次您都会看到相同的水果，因为我们将水果保存到会话中。

笔记：

*   该类[`HttpRequest`](http://api.dartlang.org/docs/bleeding_edge/dart_io/HttpRequest.html)具有[`session()`](http://api.dartlang.org/docs/bleeding_edge/dart_io/HttpRequest.html#session)初始化（或返回）[`HttpSession`](http://api.dartlang.org/docs/bleeding_edge/dart_io/HttpSession.html)实例的此方法。
*   [`HttpSession`](http://api.dartlang.org/docs/bleeding_edge/dart_io/HttpSession.html)有一个名为 的属性，`data`但您可能希望首先将其初始化为空`{}`。

# php - 如何从 twig symfony 2 中的另一个连接表访问列

> ID：14011501
> 
> 赞同：0
> 
> 时间：2012-12-23T13:54:06.693
> 
> 标签：php, symfony, doctrine-orm, twig

我有两个实体 - 新闻、类别。使用 DQL，我创建了这样的查询：

```
SELECT  n,c
FROM    MyDemoBundle:News n
INNER JOIN MyDemoBundle:Category c
WHERE   n.category_id = c.id
    AND c.id = :cid
    AND c.route = :route
    AND c.enabled = 1 
    AND n.status = 1
ORDER BY n.id DESC 
```

我的网站是多语言的，所以我在类别中有 name_ru、name_en 等列，在新闻中有 title_ru、title_en、article_ru、article_en 等。

在 Twig 中，我需要显示文章列表。我可以这样做：

```
{% for entity in articles %}    
<h2>{{ attribute(entity, 'title' ~ (app.request.attributes.get('_locale')|capitalize)) }}</h2>
<p>{{ attribute(entity, 'article' ~ (app.request.attributes.get('_locale')|capitalize))|raw }}</p>
{% endfor %} 
```

但是，对于我在 twig 中的语言切换器，我需要从结果中获取 name_ru 和 name_en（类别）。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T14:30:20.333

自己解决了这个问题。解决方案是：articles.0.category.nameEn

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:24:46.047

不要忘记检查值/对象是否设置正确。否则，您可能会在这种情况下遇到问题。

Symfony/Twig 对此非常严格。

# android - android 设备使用“dd”命令将内核写入 mmcblk 无法启动

> ID：14011504
> 
> 赞同：2
> 
> 时间：2012-12-23T13:54:28.093
> 
> 标签：android, recovery, u-boot

我有一个用 u-boot 启动的 android 设备。这个设备有一个 emmc，它在 dev 中命名为 /dev/block/mmcblk0。上面有 4 个部分。/dev/block/mmcblk0p{1,2,3,4} 。我知道 mmcblk0p1 是 MLO，mmcblk0p2 是 u-boot.bin，mmcblk0p3 是内核，mmcblk0p4 是恢复。我想试试是否可以直接在 shell 中使用 dd 命令编写 mmcblk。所以我使用此命令将文件写入 mmcblk0p3

`dd if=FILE_WRITE_IN of=/dev/block/mmcblk0p3`

我不写 mmcblk0p4，我想我可以使用恢复系统来恢复我的系统。但是当我重新启动设备时，我什至可以启动到恢复系统。u-boot如何引导恢复分区，如果恢复分区依赖于内核分区？为什么无法启动恢复。

# javascript - 什么可能导致变量在 Firebug 监视窗口中的评估不同？

> ID：14011505
> 
> 赞同：0
> 
> 时间：2012-12-23T13:54:33.540
> 
> 标签：javascript, firebug

我正在使用 HTML5 + jQueryMobile + Knockout 移动应用程序，并在 Firebug 调试器中看到一个非常奇怪的问题：

在负责将模型转换为视图模型的方法中，我有以下代码：

![代码](../Images/692e557963af3e9cf1fd22dabf8afe97.png)

执行在断点处暂停，Firebug 监视窗口如下所示：

![手表](../Images/3dfa3e97098590c7de9ec67924c49253.png)

我很困惑为什么`this.model.data`可以观察到并`this.model.data()`显示正确的数据，但在我的代码中，两个局部变量（data 和 data2）都未定义。

关于什么会导致这样的事情发生的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T19:27:11.177

这显然是由仅在 Firefox 上的 Firebug 中表现出来的时间问题引起的。使用 Chrome 的开发者工具可以解决这个问题，并让我调试应用程序。

# python - Python 中的 Parseval 定理

> ID：14011506
> 
> 赞同：17
> 
> 时间：2012-12-23T13:54:35.193
> 
> 标签：python, math, numpy, scipy, fft

我试图掌握 Python 的 fft 功能，而我偶然发现的一件奇怪的事情是[Parseval 定理](http://en.wikipedia.org/wiki/Parseval%27s_theorem)似乎并不适用，因为它现在给出了大约 50 的差异，而它应该是0。

```
import numpy as np
import matplotlib.pyplot as plt
import scipy.fftpack as fftpack

pi = np.pi

tdata = np.arange(5999.)/300
dt = tdata[1]-tdata[0]

datay = np.sin(pi*tdata)+2*np.sin(pi*2*tdata)
N = len(datay)

fouriery = abs(fftpack.rfft(datay))/N

freqs = fftpack.rfftfreq(len(datay), d=(tdata[1]-tdata[0]))

df = freqs[1] - freqs[0]

parceval = sum(datay**2)*dt - sum(fouriery**2)*df
print parceval

plt.plot(freqs, fouriery, 'b-')
plt.xlim(0,3)
plt.show() 
```

我很确定这是一个标准化因素，但我似乎无法找到它，因为我能找到的关于这个函数的所有信息都是[scipy.fftpack.rfft 文档](http://docs.scipy.org/doc/scipy/reference/generated/scipy.fftpack.rfft.html)。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-23T16:18:38.107

您的**归一化因子**来自尝试将 Parseval 定理应用于连续信号到离散序列的傅里叶变换。[在关于离散傅里叶变换的维基百科文章](http://en.wikipedia.org/wiki/Discrete_Fourier_transform)的侧板上，有一些关于傅里叶变换、傅里叶级数、离散傅里叶变换和[狄拉克梳](http://en.wikipedia.org/wiki/Dirac_comb)采样的关系的讨论。

长话短说，[当应用于 DFT 时，Parseval 定理](http://en.wikipedia.org/wiki/Discrete_Fourier_transform#The_Plancherel_theorem_and_Parseval.27s_theorem)不需要积分，而是求和：a`2*pi`您通过乘以`dt`和`df`求和来创建。

另请注意，因为您使用的是 ，所以您[`scipy.fftpack.rfft`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.fftpack.rfft.html)得到的不是数据的正确 DFT，而只是数据的正半部分，因为负部分与它对称。因此，由于您只添加了一半的数据，加上`0`DC 术语中的数据，因此缺少`2`找到`4*pi`@unutbu 找到的数据。

在任何情况下，如果`datay`持有您的序列，您可以验证 Parseval 定理如下：

```
fouriery = fftpack.rfft(datay)
N = len(datay)
parseval_1 = np.sum(datay**2)
parseval_2 = (fouriery[0]**2 + 2 * np.sum(fouriery[1:]**2)) / N
print parseval_1 - parseval_2 
```

使用[`scipy.fftpack.fft`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.fftpack.fft.html#scipy.fftpack.fft)or[`numpy.fft.fft`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.fft.fft.html#numpy.fft.fft)二次求和不需要采取这种奇怪的形式：

```
fouriery_1 = fftpack.fft(datay)
fouriery_2 = np.fft.fft(datay)
N = len(datay)
parseval_1 = np.sum(datay**2)
parseval_2_1 = np.sum(np.abs(fouriery_1)**2) / N
parseval_2_2 = np.sum(np.abs(fouriery_2)**2) / N
print parseval_1 - parseval_2_1
print parseval_1 - parseval_2_2 
```

# javascript - JavaScript 自调用函数

> ID：14011509
> 
> 赞同：5
> 
> 时间：2012-12-23T13:54:44.717
> 
> 标签：javascript, self-invoking-function

> **可能重复：**
> [(function(){})(); 之间的区别 和函数（）{}（）；](https://stackoverflow.com/questions/423228/difference-between-function-and-function)
> [“(function ( ) { } ) ( )” 和 “(function ( ) { } ( ) )” 在 JavaScript 中的功能是否相同？](https://stackoverflow.com/questions/5938802/are-function-and-function-functionally-equal-i)

我只是想知道这两个示例之间是否存在差异（关于功能）：

第一

```
(function foo() {
console.log("bar")
})() 
```

第二

```
(function foo() {
console.log("bar")
}()) 
```

两者似乎都可以正常工作...

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-23T13:56:58.997

没有不同。实际上，您`()`只需要使用简单的...

```
function() { console.log('bar'); } (); 
```

... JS 解析器无法正确识别。正如[ES5 标准](http://es5.github.com/x12.html#x12.4)中所说：

> 此外，ExpressionStatement 不能以 function 关键字开头，因为这可能会使它与 FunctionDeclaration 产生歧义。

另一种 (to `(...)`) 解决方案是用一些一元运算符来扩充这个语句。两个都...

```
+function() { console.log('bar'); } (); 
```

... 和 ...

```
!function() { console.log('bar'); } (); 
```

... 将工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-23T13:56:46.147

它们完全相同。两者在效率、输出或使用方面没有任何区别。使用其中任何一个都是偏好问题。

尽管 JS minfiers 常用的两种形式有一个较短的变体。也就是说，`NOT`对函数表达式进行逻辑运算并调用它：

```
!function() {
    console.log( x );
}();​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T14:08:48.640

他们之间没有区别。两者都是[立即调用的函数表达式](http://benalman.com/news/2010/11/immediately-invoked-function-expression/ "Ben Alman » 立即调用函数表达式 (IIFE)")。像 Douglas Crockford 这样的一些人更喜欢[第二种方法](http://www.youtube.com/watch?v=eGArABpLy0k "道格拉斯·克罗克福德说“狗球” - YouTube")。有些人更喜欢第一个。有趣的是，Crockford 的[JSLint](http://www.jslint.com/ "JSLint，JavaScript 代码质量工具")不允许第一种方法，所以我认为第二种方法更常见。

哦，如果你使用函数声明而不是函数表达式，那么你可以在函数出现在程序中之前调用它。这是因为声明是在 JavaScript 中提升的：

```
greet(); // This will work

function greet() {
    alert("Merry Christmas!");
} 
```

函数表达式也不一样：

```
greet(); // This will not work

var greet = function greet() {
    alert("Merry Christmas!");
}; 
```

这就是你现在需要知道的几乎所有内容。

# python - 从 pyqt4 中的 qpoint 对象获取 qtablewidget 中的行

> ID：14011512
> 
> 赞同：0
> 
> 时间：2012-12-23T13:55:04.287
> 
> 标签：python, qt4, pyqt4

假设我有一个`QTableWidget`in pyqt4 和一个`QPoint`对象。如何获取表中与`QPoint`对象中的坐标相对应的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:01:10.720

使用[QTableView::rowAt](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qtableview.html#rowAt)函数。

```
row = table.rowAt(point.y()) 
```

# c-preprocessor - 编译器用这个宏看到了什么？

> ID：14011517
> 
> 赞同：11
> 
> 时间：2012-12-23T13:55:46.753
> 
> 标签：c-preprocessor, stringification

考虑一下：

```
 #define STRINGIFY(A) #A 
```

如果我后来写：

```
 STRINGIFY(hello) 
```

编译器是否真的看到了这个：

```
 #hello 
```

我认为是前面的额外哈希`#A`让我感到困惑。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-23T13:56:56.747

编译器看到的是这样的：

```
"hello" 
```

哈希是仅预处理器的令牌。

单个哈希将参数字符串化。

```
#define STRINGIFY(x) #x
STRINGIFY(hello) 
```

被取代

```
"hello" 
```

双哈希连接标记：

```
#define CAT(a, b) a##b
#define _STRINGIFY(x) #x
#define STRINGIFY(x) _STRINGIFY(x)
STRINGIFY(CAT(hello,world)) 
```

被这个取代：

```
_STRINGIFY(helloworld) 
```

然后通过这个：

```
"helloworld" 
```

编辑：正如 Pubby 指出的那样，这个例子是错误的，宏替换不是那样工作的，但现在我更正了。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-23T14:11:45.380

不，编译器会将参数放在引号之间，结果如下：

```
"hello" 
```

但是，请注意宏替换不会在`#`and附近发生`##`，因此如果您确实需要对参数进行字符串化（*即使它是另一个宏*），最好编写两个宏，第一个用于扩展参数，另一个用于添加引号：

```
#define STRINGIFY(x) STRINGIFY_AUX(x)
#define STRINGIFY_AUX(x) #x 
```

或者更一般地说，如果您的编译器支持可变参数宏（在 C99 中引入）：

```
#define STRINGIFY(...) STRINGIFY_AUX(__VA_ARGS__)
#define STRINGIFY_AUX(...) #__VA_ARGS__ 
```

`#`如果您确实需要一个在参数开头粘贴 a 的类似函数的宏，我认为您需要它来生成一个字符串（否则您会为编译器制作一个无效的标记），因此您可以简单地生成两个字符串文字编译器将“粘贴”：

```
#include <stdio.h>

#define STRINGIFY(...) STRINGIFY_AUX(__VA_ARGS__)
#define STRINGIFY_AUX(...) #__VA_ARGS__

int main(void)
{
  puts(STRINGIFY(#) STRINGIFY(hello));
} 
```

在预处理器输出中，`main`主体将如下所示：

```
puts("#" "hello"); 
```

我希望这不是导致未定义行为的预处理器的一个不起眼的角落，但这不应该是一个问题，因为我们没有生成另一个预处理器指令。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-23T14:00:13.553

您可以使用`-E`(*) 标志（使用 gcc/g++）自己测试它：

## 测试.cpp

```
#define STRINGIFY(A) #A

int main(int argc, const char *argv[])
{
    STRINGIFY(hello);
    return 0;
} 
```

的输出`g++ test.cpp -E`

```
# 1 "test.cpp"
# 1 "<command-line>"
# 1 "test.cpp"

int main(int argc, const char *argv[])
{
    "hello";
    return 0;
} 
```

[(*): `If you use the -E option, nothing is done except preprocessing.`-[控制预处理器的 GCC 选项](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html)]

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-23T14:07:34.937

在这里找到了在预处理器中使用散列的简单解释：

[http://www.cplusplus.com/doc/tutorial/preprocessor/](http://www.cplusplus.com/doc/tutorial/preprocessor/)

# c# - System.Object 的 BaseType 是否应该与接口相同？

> ID：14011518
> 
> 赞同：5
> 
> 时间：2012-12-23T13:55:48.497
> 
> 标签：c#, .net, reflection, types

*   **概括**

    `typeof(ISomeInterface).BaseType`是`null`；`typeof(object).BaseType`也是`null`根据定义。因此：

    ```
    typeof(object).BaseType==typeof(ISomeInterface).BaseType -> true 
    ```

    它也可以（语义上）意味着`System.Object`是一个接口，不是吗？在 C# 中，所有类都继承自`System.Object`，但接口不继承。接口实际上是契约，不是任何类的基类型，只能从其他接口派生。

    所以我想知道是否`typeof(object).BaseType`应该与接口相同？

*   **解释**

    我以初等数理逻辑的方式想到了这一点。我将`null`as`0`和`typeof(object)`as 视为`1`，因此查找某种类型的基本类型就像查找数字的因数一样。

    在这个假设下，`null`可能是任何类型的推导，就像`0`是任何数字的倍数。并且`typeof(object)`将是任何类的基本类型，就像`1`是任何数量的因子，甚至它本身。然而，的实际回归打破`null`了这一假设。`typeof(object).BaseType`这似乎是说这`0`是一个因素，`1`但不是任何其他数字。

    此外，如果我们使用一种方法来递归地找到基类型`SomeType`，我们不能总是说它`SomeType`不是一个类，因为它`BaseType`是`null`，`typeof(object).BaseType`也是`null`。

    如果

    ```
    typeof(object).BaseType==typeof(object) -> true 
    ```

    表示它的基本类型是它自己，但这不正是实体和合同之间的区别吗？

* * *

**更新：**

我原来是这么说的：

> 这也可能意味着它`System.Object`是一个接口，不是吗？

我想说的是**它似乎很困惑**。这是我表达不佳的描述的错，很抱歉导致答案集中于此。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T14:21:49.930

[类](http://msdn.microsoft.com/en-us/library/vstudio/0b0thckt%28v=vs.100%29.aspx)和[接口](http://msdn.microsoft.com/en-us/library/87d83y5b%28v=vs.100%29.aspx)是两个不同的东西。以下表达式：

```
typeof(object).BaseType == typeof(SomeInterface).BaseType 
```

仅是因为以下也是正确的：

```
null == null 
```

而且，根据定义，如果当前类型表示对象类或接口，则[BaseType返回 null。](http://msdn.microsoft.com/en-us/library/system.type.basetype%28v=vs.100%29.aspx)

> 这可能意味着 System.Object 也是一个接口，不是吗？

实际上不是，因为接口只包含方法的签名，而不包含它们的实现。您可以将接口视为类必须实现的契约。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-24T04:11:22.817

该`BaseType`属性返回具有基类型的类型*的*基类型。对于所有其他类型，它返回一个值，指示该类型没有*基*类型。您在原始问题中提出了以下表达式：

`typeof(object).BaseType == typeof(SomeInterface).BaseType`

然后你建议，既然这个表达式是真的，`Object`并且`SomeInterface`看起来有相同的基本类型。但是，您的结论是有缺陷的，因为它假定存在 和 的基类型，`Object`而`SomeInterface`该方法的文档明确指出情况并非如此。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-23T15:51:20.487

请注意：从某种意义上说，接口不是类和结构的类型！接口本身并不存在。

类和结构是数据（代码）的类型，但接口是类型的类型。它们可用于对其他类型进行分类。他们强迫其他类型遵循协议，仅此而已。它们只是一个布局，一个定义，一个契约；不是现有的东西。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-23T14:18:45.013

`typeof(object).BaseType``null`因为 MSDN[说](http://msdn.microsoft.com/en-us/library/system.type.basetype.aspx)的退货；

> Object 是唯一没有基类型的类型，因此 null 作为 Object 的基类型返回。

您不能将其`BasType`属性与`Interface`. 我们来看这段代码；

```
using System;

namespace Programs
{
    public interface IBar { }
    public interface IFoo : IBar { }

    public  class Program
    {
        public static void Main(string[] args)
        {
            Type[] types = typeof(IFoo).GetInterfaces();

            foreach ( var t in types )
            {
                Console.WriteLine(t.ToString());
            }
        }
    }
} 
```

输出：

> 程序.IBar

* * *

接口从零个或多个基本接口继承；因此，`null`如果`Type`对象表示一个`interface`. 可以使用[`GetInterfaces`](http://msdn.microsoft.com/en-us/library/system.type.getinterfaces.aspx)或确定基本接口[`FindInterfaces`](http://msdn.microsoft.com/en-us/library/system.type.findinterfaces.aspx)。

* * *

让我们再看一段代码；

```
using System;

namespace Programs
{
    public interface IBar { }
    public interface IFoo : IBar { }
    public interface IZoo : IFoo { }

    public  class Program
    {
        public static void Main(string[] args)
        {
            Type[] types = typeof(IZoo).GetInterfaces();

            foreach ( var t in types )
            {
                Console.WriteLine(t.ToString());
            }
        }
    }
} 
```

输出是：

> 程序.IFoo
> 
> 程序.IBar

* * *

> 问题是，我们使用 typeof(object).BaseType 得到了 null。这可能意味着 System.Object 也是一个接口，不是吗？

不，[System.Object](http://msdn.microsoft.com/en-us/library/system.object.aspx)不是接口。这是一个类。它支持 .NET Framework 类层次结构中的所有类。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-03T21:39:40.023

.net 中有许多“特殊”类型，包括`System.Object`、`System.ValueType`和`System.Enum`，它们在继承层次结构中的行为是唯一的。例如，任何`T`派生自`System.ValueType`的类型都将是值类型，除非`T`是`System.ValueType`或`System.Enum`，两者都是类类型。缺少基本类型 for`Object`可能也可以从类似的角度来看待——每个缺少基本类型的类型都是一个接口，除了`System.Object`它是一个古怪的类型。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-05T08:59:15.483

> “它可能（语义上）意味着 System.Object 也是一个接口，不是吗？”

不，该假设依赖于以下假设：

*   BaseType 属性始终返回类型的基类型
*   具有相同基类型的两种类型是相同的

`typeof(object).BaseType`返回时`null`并不表示基类型是`null`，而是表示根本没有基类型。因此，当`typeof(ISomeInterface).BaseType`还返回`null`时，并不意味着它具有与 相同的基类型`object`，而是意味着它也根本没有基类型。

即使`object`和接口具有相同的基本类型，也不意味着它`object`是一个接口。类型`int`和`double`例如具有相同的基本类型，但这并不意味着它们是相同的。

# java - 如何在 Java Applet 和 PHP 服务器之间进行套接字通信？

> ID：14011520
> 
> 赞同：1
> 
> 时间：2012-12-23T13:56:05.627
> 
> 标签：java, php, sockets, cgi

> 我可以使用 PHP 模块（例如 PEAR`Net_Socket` 库中的那个）与客户端浏览器内 Java Applet 进行套接字通信（大概使用`java.net.Socket`）吗？如果是这样，怎么做？也许某个地方的例子？

这里的原因有两个部分： 1）随着移动设备上 Java 应用程序的普及，我可以制作一个 Java 程序，并且可以在时机成熟时轻松地将其从 Java 小程序移植到移动应用程序。2) 廉价的共享网络托管通常不支持自定义 Java 服务器（甚至不支持 Node.js）。所以，我正在寻找一种方法来为我的 Java 应用程序创建一个基于套接字通信的服务器。考虑到这一点，然后有一个不太具体的问题（可选）：

有什么方法或首选方法（例如使用 CGI/Perl、PHP/Python）来设置廉价 Web 主机上的免费服务和我的客户端 Java 应用程序之间的套接字通信？

（例如，假设我正在尝试制作一个简单的聊天室）

注意：我确实发现了这个问题：[How to implement communication between Java client application (Android) and PHP server application？](https://stackoverflow.com/questions/2259438/how-to-implement-communication-between-java-client-application-android-and-php?rq=1)但它显然不涉及套接字。因此，聊天室将要求客户进行杆位。

# c# - C# 助手模式与服务方法

> ID：14011523
> 
> 赞同：5
> 
> 时间：2012-12-23T13:56:22.627
> 
> 标签：c#, design-patterns, helper

假设我们有以下类：

```
public class Ticket {
  public int Id { get; set; }
  public string Event { get; set; }
  ...
}

public class TicketService {
  public void acceptTicket(Ticket ticket) {
    ...
  }

  ...
} 
```

我的问题是，添加与票证实体相关的静态辅助方法（不需要像服务类那样的状态）的最佳位置在哪里？（请记住，这是整个系统中许多其他实体/服务中的一个实体/服务）。

现在我在考虑以下几种可能性：

1.  在自己的 .cs 文件中创建一个名为 TicketHelper 的新类。
2.  直接在 Ticket 类上创建静态 Helper 类
3.  直接在Service类上创建静态Helper类
4.  只需将方法直接添加到服务类中，就像任何其他服务方法一样
5.  ...比这些更好的解决方案？

为了清楚起见，这就是我对#2 或#3 的意思。

```
public class TicketService {
  public void acceptTicket(Ticket ticket) {
    ...
  }

  ...

  public static class Helper {
    public static Dictionary<string, List<Ticket>> groupByName(List<Ticket> tickets) {
      // returns the map of name/tickets
    }
  }
} 
```

在这种情况下，API 可能如下所示：

```
Ticket ticket = new Ticket();
List<Ticket> tickets = new List<Tickets>();
TicketService service = new TicketService();
service.acceptTicket(ticket);

// leaving out the creation of a list of tickets...
var groups = TicketService.Helper.groupByName(tickets); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T14:11:43.553

您可以为此使用扩展方法。在单独的`TicketExtensions`类中创建它们。

```
public static class TicketExtensions {
  public static Dictionary<string, List<Ticket>> groupByName(this List<Ticket> tickets) {
    // returns the map of name/tickets
  }
}

...

var ticket = new Ticket();
var tickets = new List<Tickets>();
var service = new TicketService();
service.acceptTicket(ticket);

// leaving out the creation of a list of tickets...
var groups = tickets.groupByName(); 
```

此外，使用`IEnumerable<T>`,`IList<T>`或之类的接口`IDictionary<K, V>`比具体的集合类更可取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T15:05:32.707

还有一种可能性是使用单例模式。

它具有以下优点：

*   能够实现接口
*   提供一个可以在依赖注入场景中传递给方法或构造函数的对象
*   提供静态行为

```
public interface ITicketHelper
{
    void HelpThis(Ticket t);
    IList<Ticket> HelpThat();
}

public class TicketHelper : ITicketHelper
{
    public static readonly TicketHelper Instance = new TicketHelper();

    private TicketHelper()
    { ... }

    public void HelpThis(Ticket t)
    { ... }

    public IList<Ticket> HelpThat()
    { ... }
} 
```

用法

```
 var result = TicketHelper.Instance.HelpThat(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T14:02:45.693

我想答案取决于您希望谁调用该方法。

就个人而言，我会将静态方法放在 TicketService 类上，因为它适用于多个实体，并将其设为服务本身的私有方法。

然后我将在服务上创建一个实例方法，以将功能公开给服务的任何消费者。它在某种程度上使 API 更简洁，并避免人们必须知道某个东西是否是静态方法的实现细节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-05T18:30:29.970

我不会称它为辅助方法。这是一种聚合方法。所以我会用这个方法创建一个名为 TicketAggregator 的类。然后，当您有其他类似“GetAverageTicketPrice”时，您也可以将其放入 TicketAggregator。

通过将其命名为 TicketAggregator，您可以更清楚地描述它的内容。只需通过名称，就可以立即知道该类中有哪些方法。再说了，helper这个词真的没有任何意义……难道不是所有的方法都可以帮助你吗？

# mysql - 带有 if 语句的存储过程

> ID：14011524
> 
> 赞同：2
> 
> 时间：2012-12-23T13:56:31.723
> 
> 标签：mysql, stored-procedures

我有这个存储过程，它应该检查一个字段是否为空并执行一个查询，否则执行另一个，但我得到一个错误。这是代码：

```
DELIMITER $$
 CREATE PROCEDURE mw_info(
    m_date_begin INTEGER,
    m_date_end INTEGER,
    m_from INTEGER,
    m_numberOfrecords INTEGER,
    m_callsource VARCHAR(15))
 BEGIN

    IF (m_callsource = '') THEN

       SELECT * 
         FROM mw_iaa 
        WHERE calllegcode IN ('CB_A','CB_B')
          AND calltime BETWEEN m_date_begin AND m_date_end
        ORDER BY calltime DESC 
        LIMIT m_from, m_numberOfrecords;

    ELSE     

       SELECT * 
         FROM mw_iaa 
        WHERE calllegcode IN ( 'CB_A', 'CB_B')
          AND callsource = m_callsource
          AND calltime BETWEEN m_date_begin AND m_date_end
        ORDER BY calltime DESC 
        LIMIT m_from, m_numberOfrecords;    

    END IF; 

 END;  
 END$$
DELIMITER ; 
```

这是错误：

> 错误代码：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以
> 在第 1 行的“else SELECT * FROM mw_iaa WHERE calllegcode”附近使用正确的语法

问题可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:14:56.893

您可以只在一个查询中执行此操作，并摆脱如下`IF`语句：

```
SELECT * 
FROM mw_iaa
WHERE ((m_callsource = '') OR (callsource = m_callsource))
  AND calllegcode IN ('CB_A', 'CB_B')
  AND callsource = m_callsource
  AND calltime BETWEEN m_date_begin AND m_date_end
ORDER BY calltime DESC 
LIMIT m_from, m_numberOfrecords; 
```

然后，每当您使用 传递`m_callsource`参数时`''`，该条件`((m_callsource = '') OR (callsource = m_callsource))`将被忽略，因为它没有出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T14:14:16.560

我见过这样的错误，然后我在过程源中有制表符。

尝试用空格替换所有制表符。

# xamarin.android - MonoDroid 以编程方式将edittext设置为密码模式

> ID：14011537
> 
> 赞同：2
> 
> 时间：2012-12-23T13:57:40.063
> 
> 标签：xamarin.android, android-edittext

有谁知道如何在 Mono for Android 中以编程方式将 edittext 控件设置为密码模式。MonoDroid 中似乎没有正常的 settransformation 方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T16:42:37.413

Android API 中以 Get 和 Set 开头的属性将在 MonoDroid 版本中移除 Get 和 Set 前缀，以便与 c# 属性命名更加一致。

您应该能够执行以下操作：

```
etEditText.TransformationMethod = Android.Text.Method.PasswordTransformationMethod.Instance; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T21:29:09.287

如何获取 EditText 字段并进行设置的示例：

```
passwordEditText = FindViewById<EditText>(Resource.Id.your_id_name);        
passwordEditText.InputType = Android.Text.InputTypes.ClassText | Android.Text.InputTypes.TextVariationPassword; 
```

此外，仅供参考，请务必正确处理屏幕旋转。

# scala - Scala 类型边界行为（方法与类）

> ID：14011540
> 
> 赞同：0
> 
> 时间：2012-12-23T13:58:23.770
> 
> 标签：scala, generics, types, bounds

对于 Scala 大师来说，这可能是一件容易的事。我正在阅读类型绑定约束并想知道我是否遗漏了一些东西，因为我看到了一个稍微出乎意料的行为。假设我们在这样的层次结构中有三种类型 A、B、C，我们正在尝试使用类型边界：

```
class A {
}

class B extends A {
}

class C extends B {
}

class MyList1 { // T super B
  def add[T >: B](a: T): Unit = {}
}

class MyList2 { // T extends B
  def add[T <: B](a: T): Unit = {}
}

class MyList3[T >: B] { // T super B
  def add(a: T): Unit = {}
}

class MyList4[T <: B] { // T extends B
  def add(a: T): Unit = {}
}

object BoundsClass {

  def main(args: Array[String]) {
    val l1 = new MyList1
    l1.add(new A) 
    l1.add(new B)
    l1.add(new C) // why is this allowed??

    val l2 = new MyList2
    // l2.add(new A) // not allowed (OK)
    l2.add(new B)
    l2.add(new C)

    val l3a = new MyList3[A]
    val l3b = new MyList3[B]
    // val l3c = new MyList3[C] // not allowed (OK)

    // val l4a = new MyList4[A] // not allowed (OK)
    val l4b = new MyList4[B]
    val l4c = new MyList4[C]
  }

} 
```

除一种情况外，所有集合的行为均符合预期，请参见 l1.add(new C); 不会导致编译错误。为什么允许这样做？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T14:42:21.987

我并没有声称自己是 scala 大师，但我会对此进行尝试。

您已经按照 定义了类型层次结构`A >: B >: C`，因此您可以执行以下操作

```
val aa: A = new A
val ab: A = new B
val ac: A = new C

val bb: B = new B
val bc: B = new C

val cc: C = new C 
```

就像你可以说`val a: Any = new Whatever`的。

因此，当您尝试将 a 添加`new C`到 时`l1`，它会被视为`B`实例，因为这是其自身最接近的可用版本，符合方法的类型边界。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T22:50:16.850

以这种方式使用时，下限没有用。您不能强制值参数具有下限，因为根据[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)，您必须能够在需要类实例的任何地方使用子类的实例。因此，您的代码可以编译，因为`new C`可以将其视为`B`.

通常，由于这个原因，在方法的值参数上设置下限是没有用的。在您绑定类的类型参数的第二种情况下，下限肯定更有用。所有类型参数都在编译类型时解析，因此，您可以期望编译器在第二种情况下产生编译器错误。[您可以在此处](http://www.scala-lang.org/node/137)找到更具体的下限用法示例。

# typescript - 如何为具有字符串索引数组的重载函数创建 TypeScript 接口定义？

> ID：14011550
> 
> 赞同：2
> 
> 时间：2012-12-23T14:00:28.637
> 
> 标签：typescript, knockout-validation

我正在为[敲除验证插件](https://github.com/ericmbarnard/Knockout-Validation)编写 TypeScript 定义文件。我坚持的一件事与该库中如何定义新的验证规则有关。

创建基本同步验证器的`ko.validation`方法如下：

```
ko.validation.rules['myrulename'] = {
    message: 'default message to display when validation fails',
    validator: function (value, params) {
        // use value and params to evaluate rule, 
        // then return true if valid, false if invalid
    }
} 
```

这很简单，但是创建异步验证器的方法略有不同：

```
ko.validation.rules['myrulename'] = {
    async: true,
    message: 'default message to display when validation fails',
    validator: function (value, params, callback) {
        // use value and params to evaluate rule, 
        // then invoke callback to indicate pass / fail
        // this function does not return a bool (it is void)
    }
} 
```

异步回调可以采用 bool（用于验证通过/失败）或对象文字（`isValid`用于通过/失败，并`message`更改验证消息）。为此，我创建了以下内容：

```
interface KnockoutValidationAsyncCallbackArgs {
    isValid: bool;
    message: string;
}

interface KnockoutValidationAsyncCallback {
    (result: bool): void;
    (result: KnockoutValidationAsyncCallbackArgs): void;
} 
```

这是我的精简版，`KnockoutValidationStatic`它公开了规则数组。我还为规则数组创建了一个特殊接口来指定字符串索引：

```
interface KnockoutValidationRulesArray extends Array {
    [index: string]: KnockoutValidationRule;
}

interface KnockoutValidationStatic {
    rules: KnockoutValidationRulesArray;
    ... other members defined on this interface
}

interface KnockoutStatic {
    validation: KnockoutValidationStatic;
} 
```

我坚持的是`KnockoutValidationRule`. 我尝试了以下方法：

```
interface KnockoutValidationRule {
    async?: bool;
    message: string;
    validator(value: any, params: any): bool;
    validator(value: any, params: any, callback: KnockoutValidationAsyncCallback): void;
} 
```

这适用于同步验证器声明。但是，当我创建一个异步时，我收到以下错误：

> 无法转换'{消息：字符串；验证器：（值：任意，参数：任意，回调：KnockoutValidationAsyncCallback）=> void }' to 'KnockoutValidationRule'：类型为'{ message: string; 的属性'validator'的类型；验证器：（值：任意，参数：任意，回调：KnockoutValidationAsyncCallback）=> void；}' 和 'KnockoutValidationRule' 不兼容：
> 
> '(value: any,params: any,callback: KnockoutValidationAsyncCallback) => void' 和 '{ (value: any,params: any): bool; 类型的调用签名 （值：任意，参数：任意，回调：KnockoutValidationAsyncCallback）：无效；} 不兼容：
> 
> 调用签名需要 2 个或更少的参数

我还考虑过将回调作为可选参数，但这不起作用，因为函数根据签名返回不同的值（没有第三个参数的布尔值，如果存在第三个参数则为 void）。

**我在这里做错了什么？我的字符串索引数组的规则有问题吗？是否可以根据这个库的工作方式创建一个 TypeScript 接口？**

**更新 1**

看起来我在`KnockoutValidationRule`界面中的重载方面走在了正确的轨道上。我刚刚发现，如果我`ko.validation.rules`从 a更改`KnockoutValidationRulesArray`为 a `KnockoutValidationRule[]`，我的测试代码对于同步和异步验证器都可以正常编译......

```
interface KnockoutValidationStatic {
    //rules: KnockoutValidationRulesArray; // this breaks it
    rules: KnockoutValidationRule[] // this fixes it
    ... other members defined on this interface
} 
```

**我是在声明数组错误吗？**

**更新 2**

这是我用来测试定义的一些示例代码：

```
/// <reference path="../../ko/knockout-2.2.d.ts" />
/// <reference path="../../ko/knockout.validation.d.ts" />

module TestKoVal {

    ko.validation.rules['test1'] = {
        message: '',
        validator: (value: any, params: any): bool => {
            return false;
        }
    }

    ko.validation.rules['test2'] = {
        async: true,
        message: '',
        validator: function (value: any, params: any, callback: KnockoutValidationAsyncCallback): void => {
            callback(false);
            callback(true);
            callback({ isValid: false, message: 'custom' });
        }
    }
} 
```

就像我说的，当`ko.validation.rules`是 a时，上面的编译很好`KnockoutValidationRule[]`。当我将其更改为`KnockoutValidationRulesArray`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:38:41.170

我想我可能已经弄清楚为什么上述方法不起作用了。在 javascript 中，当您使用带有字符串作为索引器的 [] 数组语法时，您并没有创建通常意义上的数组。相反，该语法只是将属性添加到对象。以下是功能等效的：

```
ko.validation['test1'] = { ... };
ko.validation.test1 = { ... }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T16:38:22.580

您可以通过修改 KnockoutValidationRule 来解决此问题：

```
export interface KnockoutValidationRule {
    async?: bool;
    message: string;
    validator: (value: any, params: any, callback?: KnockoutValidationAsyncCallback): bool;
} 
```

并在使用它的地方进行相应的更改：

```
ko.validation.rules['test2'] = {
    async: true,
    message: '',
    validator: (value: any, params: any, callback?: KnockoutValidationAsyncCallback): bool => {
        callback(false);
        callback(true);
        callback({ isValid: false, message: 'custom' });
    }
} 
```

这统一了两个方法签名。验证方法实际上不需要返回布尔值，因此声明该方法返回布尔值的事实主要是外观/美学问题。

[在codeplex 站点](http://typescript.codeplex.com)上围绕这个展开讨论可能是值得的，因为我怀疑这代表 JavaScript 库中不常见的使用。

# php - 从 mysql 表中回显多个值

> ID：14011553
> 
> 赞同：0
> 
> 时间：2012-12-23T14:01:00.533
> 
> 标签：php, html, css, html-table, echo

我已经没有关于如何做到这一点的想法了。我有一张带有 memberOrders 的桌子。现在有三个条目。我在屏幕上显示它没有问题，我在屏幕上放置它有问题。我需要把它从顶部放 600px。它必须在 echo 语句中，因为它在 while 循环中查看相同 memberNumber 的行，然后在屏幕上显示所有行。但是，当我在 echo 语句中执行此操作并将表 600 放在屏幕上时，它会将所有行放在彼此的顶部，我不知道如何将它们分开。这是我所拥有的：

```
<?php
session_start(); // Must start session first thing
//Connect to the database through our include 
include_once "connect_to_mysql.php";
// Place Session variable 'id' into local variable
$id = $_SESSION['id'];
// Process the form if it is submitted
$sql = mysql_query("SELECT memberNumber FROM members WHERE id='$userid'"); 
$row = mysql_fetch_assoc($sql);
$uniqueMember = $row['memberNumber'];
$result = mysql_query("SELECT * FROM memberOrders WHERE memberNumber='$uniqueMember'");
while ($row = mysql_fetch_array($result)){
    echo '<table cellpadding="12" style="position:absolute; left:300px; top:600px">
            <tr style="border:1px solid black">
              <th style="padding:15px">Link To Order</th>
              <th>Order Cost</th>
              <th>Order Status</th>
            </tr>
            <tr>
              <td>',$row['orderLinks'],'</td>
              <td style="text-align:center">$',$row['cost'],'</td>
              <td style="text-align:center">',$row['orderStatus'],'</td>
            </tr>
          </table>',"<br>";
}
?> 
```

我知道代码并不完美而且很混乱，但我只想以漂亮的表格格式显示所有内容，其中包含三个或四个表格标题以及标题下的结果，而不会将它们相互叠加。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T14:09:05.827

问题是您正在与每个条目呼应表格。您需要将表格和标题行放在循环之前：

```
echo '<table cellpadding="12" style="position:absolute; left:300px; top:600px">
        <tr style="border:1px solid black">
          <th style="padding:15px">Link To Order</th>
          <th>Order Cost</th>
          <th>Order Status</th>
        </tr>';

while ($row = mysql_fetch_array($result)){
    echo '<tr>
          <td>',$row['orderLinks'],'</td>
          <td style="text-align:center">$',$row['cost'],'</td>
          <td style="text-align:center">',$row['orderStatus'],'</td>
        </tr>';
}

echo '</table><br>'; 
```

除此之外，您应该切换到 PDO / mysqli，因为这些`mysql_*`功能已被弃用并修复潜在的 sql 注入问题。

# loops - 如何从子菜单退出回到主菜单？

> ID：14011555
> 
> 赞同：1
> 
> 时间：2012-12-23T14:01:20.423
> 
> 标签：loops, menu, switch-statement, exit, submenu

**我有以下简单的主菜单，其中没有调用任何方法，当在每个菜单中选择退出选项时，我不知道如何使子菜单退出主菜单？** 我是初学者，这个项目非常重要，好像我失败了，尽管已经支付了费用，但我将无法参加考试:(

**菜单代码（到目前为止）如下：**

*//菜单将包含 6 个列表，分别是：书籍、成员、员工、贷款、统计信息、退出。

//这些从 1 到 4 的列表将打开一个子菜单，其中包括：插入、搜索、删除、编辑、全部列出、退出。

//清单 5 将包括：前 5 本书、前 5 名成员、当月员工、过期列表、退出。

```
 import java.util.*;
    import java.io.*;
    public class Menu
      {
    public static void main(String args[]) throws IOException
      {
    Scanner sc = new Scanner(System.in);
    int option; 

    do 
    { 
    System.out.println("Main Menu:"); 
    System.out.println("1\. Books"); 
    System.out.println("2\. Members"); 
    System.out.println("3\. Employees"); 
    System.out.println("4\. Loans");
    System.out.println("5\. Statistics");
    System.out.println("6\. Exit");
    System.out.println("Enter your option [1,2,3,4,5,6]:");
    option = sc.nextInt();

    switch (option) {
        case 1: System.out.println("Books Sub-Menu:");
                System.out.println("1\. Insert"); 
                System.out.println("2\. Search"); 
                System.out.println("3\. Delete"); 
                System.out.println("4\. Edit");
                System.out.println("5\. List All");
                System.out.println("6\. Exit"); 
                System.out.println("Enter your option [1,2,3,4,5,6]:");
                option = sc.nextInt();

                switch (option){
                    case 1:
                    case 2: 
                    case 3:
                    case 4:
                    case 5:
                    case 6:
                    option = sc.nextInt();
                    break;
                }
        break;

        case 2: System.out.println("Members Sub-Menu:");
                System.out.println("1\. Insert"); 
                System.out.println("2\. Search"); 
                System.out.println("3\. Delete"); 
                System.out.println("4\. Edit");
                System.out.println("5\. List All");
                System.out.println("6\. Exit"); 
                System.out.println("Enter your option [1,2,3,4,5,6]:");
                option = sc.nextInt();

                 switch (option){
                    case 1: 
                    case 2: 
                    case 3:
                    case 4:
                    case 5:
                    case 6:
                    option = sc.nextInt();
                    break;
                }
        break;

        case 3: System.out.println("Employees Sub-Menu:");
                System.out.println("1\. Insert"); 
                System.out.println("2\. Search"); 
                System.out.println("3\. Delete"); 
                System.out.println("4\. Edit");
                System.out.println("5\. List All");
                System.out.println("6\. Exit"); 
                System.out.println("Enter your option [1,2,3,4,5,6]:");
                option = sc.nextInt();

                 switch (option){
                    case 1: 
                    case 2: 
                    case 3:
                    case 4:
                    case 5:
                    case 6:
                    option = sc.nextInt();
                    break;
                }
        break;

        case 4: System.out.println("Loans Sub-Menu:");
                System.out.println("1\. Insert"); 
                System.out.println("2\. Search"); 
                System.out.println("3\. Delete"); 
                System.out.println("4\. Edit");
                System.out.println("5\. List All");
                System.out.println("6\. Exit"); 
                System.out.println("Enter your option [1,2,3,4,5,6]:");
                option = sc.nextInt();

                 switch (option){
                    case 1: 
                    case 2: 
                    case 3:
                    case 4:
                    case 5:
                    case 6:
                    option = sc.nextInt();
                    break;
                }
        break;

        case 5: System.out.println("Statistics Sub-Menu:");
                System.out.println("1\. Top 5 Books"); 
                System.out.println("2\. Top 5 Members"); 
                System.out.println("3\. Emplyee of the Month"); 
                System.out.println("4\. List Overdue");
                System.out.println("5\. Exit"); 
                System.out.println("Enter your option [1,2,3,4,5]:");
                option = sc.nextInt();

                 switch (option){
                    case 1: 
                    case 2: 
                    case 3:
                    case 4:
                    case 5:
                    case 6:
                    option = sc.nextInt();
                    break;
                }
        break;

        case 6: System.out.println("You selected to Exit");
                System.exit(0);
                break;
    }

   }  while (option!=6);

    }
    }* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-01T11:01:30.000

避免使用单个变量来控制两个不同的开关。在这里，您使用选项变量来控制内部和外部开关。When option is 6 then controls breaks from both switches. 使用另一个变量来控制内部循环。我在下面的代码中使用了 subOption 。

在用户想要退出之前，子菜单功能也应该起作用。所以最好在内部开关内部添加do。

```
 public class Menu {
    public static void main(String args[]) throws IOException {
    Scanner sc = new Scanner(System.in);
    int option, subOption;

    do {
        System.out.println("Main Menu:");
        System.out.println("1\. Books");
        System.out.println("2\. Members");
        System.out.println("3\. Employees");
        System.out.println("4\. Loans");
        System.out.println("5\. Statistics");
        System.out.println("6\. Exit");
        System.out.println("Enter your option [1,2,3,4,5,6]:");
        option = sc.nextInt();

        switch (option) {
        case 1: {

            do {
                System.out.println("Books Sub-Menu:");
                System.out.println("1\. Insert");
                System.out.println("2\. Search");
                System.out.println("3\. Delete");
                System.out.println("4\. Edit");
                System.out.println("5\. List All");
                System.out.println("6\. Exit");
                System.out.println("Enter your option [1,2,3,4,5,6]:");
                subOption = sc.nextInt();

                switch (subOption) {
                case 1: {
                    System.out.println("in Insert");
                    break;
                }
                case 2: {
                    System.out.println("in Search");
                    break;
                }
                case 3: {
                    System.out.println("in Delete");
                    break;
                }
                case 4: {
                    System.out.println("in Edit");
                    break;
                }
                case 5: {
                    System.out.println("in List All");
                    break;
                }
                case 6: {
                    System.out.println("in Exit");
                    break;
                }
                // option = sc.nextInt();
                }
            } while (subOption != 6);
            break;
        }

        case 2:

        {

            do {
                System.out.println("Members Sub-Menu:");
                System.out.println("1\. Insert");
                System.out.println("2\. Search");
                System.out.println("3\. Delete");
                System.out.println("4\. Edit");
                System.out.println("5\. List All");
                System.out.println("6\. Exit");
                System.out.println("Enter your option [1,2,3,4,5,6]:");
                subOption = sc.nextInt();

                switch (subOption) {
                case 1: {
                    System.out.println("in Insert");
                    break;
                }
                case 2: {
                    System.out.println("in Search");
                    break;
                }
                case 3: {
                    System.out.println("in Delete");
                    break;
                }
                case 4: {
                    System.out.println("in Edit");
                    break;
                }
                case 5: {
                    System.out.println("in List All");
                    break;
                }
                case 6: {
                    System.out.println("in Exit");
                    break;
                }
                // option = sc.nextInt();
                }
            } while (subOption != 6);
            break;
        }

        case 3:

        {

            do {
                System.out.println("Employees Sub-Menu:");
                System.out.println("1\. Insert");
                System.out.println("2\. Search");
                System.out.println("3\. Delete");
                System.out.println("4\. Edit");
                System.out.println("5\. List All");
                System.out.println("6\. Exit");
                System.out.println("Enter your option [1,2,3,4,5,6]:");
                subOption = sc.nextInt();

                switch (subOption) {
                case 1: {
                    System.out.println("in Insert");
                    break;
                }
                case 2: {
                    System.out.println("in Search");
                    break;
                }
                case 3: {
                    System.out.println("in Delete");
                    break;
                }
                case 4: {
                    System.out.println("in Edit");
                    break;
                }
                case 5: {
                    System.out.println("in List All");
                    break;
                }
                case 6: {
                    System.out.println("in Exit");
                    break;
                }
                // option = sc.nextInt();
                }
            } while (subOption != 6);
            break;
        }

        case 4:

        {

            do {
                System.out.println("Loans Sub-Menu:");
                System.out.println("1\. Insert");
                System.out.println("2\. Search");
                System.out.println("3\. Delete");
                System.out.println("4\. Edit");
                System.out.println("5\. List All");
                System.out.println("6\. Exit");
                System.out.println("Enter your option [1,2,3,4,5,6]:");
                subOption = sc.nextInt();

                switch (subOption) {
                case 1: {
                    System.out.println("in Insert");
                    break;
                }
                case 2: {
                    System.out.println("in Search");
                    break;
                }
                case 3: {
                    System.out.println("in Delete");
                    break;
                }
                case 4: {
                    System.out.println("in Edit");
                    break;
                }
                case 5: {
                    System.out.println("in List All");
                    break;
                }
                case 6: {
                    System.out.println("in Exit");
                    break;
                }
                // option = sc.nextInt();
                }
            } while (subOption != 6);
            break;

        }

        case 5: {

            do {
                System.out.println("Statistics Sub-Menu:");
                System.out.println("1\. Top 5 Books");
                System.out.println("2\. Top 5 Members");
                System.out.println("3\. Emplyee of the Month");
                System.out.println("4\. List Overdue");
                System.out.println("5\. Exit");
                System.out.println("Enter your option [1,2,3,4,5]:");
                subOption = sc.nextInt();

                switch (subOption) {
                case 1: {
                    System.out.println("in Top 5 Books");
                    break;
                }
                case 2: {
                    System.out.println("in Top 5 Members");
                    break;
                }
                case 3: {
                    System.out.println("in Emplyee of the Month");
                    break;
                }
                case 4: {
                    System.out.println("in List Overdue");
                    break;
                }

                case 5: {
                    System.out.println("in Exit");
                    break;
                }
                // option = sc.nextInt();
                }
            } while (subOption != 6);
            break;

        }

        case 6:
            System.out.println("You selected to Exit");
            System.exit(0);
            break;
        }

    } while (option != 6);

  }
} 
```

# mysql - Mysql查询需要很长时间才能执行

> ID：14011559
> 
> 赞同：2
> 
> 时间：2012-12-23T14:01:59.297
> 
> 标签：mysql

以下是我从各种表中获取信息的查询。

我正在使用mysql数据库。

```
 $sql="select c.cid,c.id,c.compid, c.firstname,c.lastname,c.phone,c.home_phone,c.payment,c.status,c.pstatus, c.pstatus2, c.reservation, u.triptype,u.flight_type_arr, u.flight_type_dep, c.email,c.sugg_pickup_date_time,c.sugg_airport_pickup_time,u.triptype,u.traveltype,            
            dr_arr.driver_name as driver_name_arr, dr_arr.driver_email as driver_email_arr, 
            dr_dep.driver_name as driver_name_dep, dr_dep.driver_email as driver_email_dep,
            ar.rid,ar.finalprice1, ar.finalprice2, ap.p1, ap.p2, ap.p3, ap.transaction_id
            from customer c
            left join vehicle_fees vf1 on (vf1.vehicle_id=c.vehicle_id1)
            left join vehicle_fees vf2 on (vf2.vehicle_id=c.vehicle_id2)
            left join userinfo u on (u.id=c.id)
            left join holiday_fees hf1 on (hf1.holidayfee_Date=u.date)
            left join holiday_fees hf2 on (hf2.holidayfee_Date=u.date1)
            left join airport_reservation ar on (ar.cid = c.cid)
            left join driver dr_arr on (dr_arr.did = ar.did_arr)
            left join driver dr_dep on (dr_dep.did = ar.did_dep)
            left join airport_payment ap on (ap.cid = c.cid)
            where (c.reservation = 'booked' or c.reservation = 'cancelled') ORDER BY c.cid DESC" .$var_limit; 
```

但它需要更多的时间来执行。

任何人都可以建议我的查询是错误还是正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:43:00.747

当你像你一样做 - 一个主表（客户）正在连接到所有其他“可选”表时，有时我发现 MySQL 试图为你思考并在内部重组 IT 认为是主表。通过使用已知的特殊关键字 MIGHT 帮助..

```
from: 
    SELECT (rest of query)
to:
    SELECT STRAIGHT_JOIN (rest of query) 
```

现在，对于您的 where 子句和 order by。确保您对 (reservation, cid) 有一个索引

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T14:34:16.547

该查询看起来合法，我看到的问题是它没有限制。通常您应该在查询脚本的末尾放置一个 LIMIT 语句来限制您想要获取的行数。我想知道有多少记录。

# css - 如何更改文本框中选定文本的背景颜色？

> ID：14011565
> 
> 赞同：2
> 
> 时间：2012-12-23T14:03:13.550
> 
> 标签：css

有没有办法改变文本框中选择突出显示的颜色？我可以使用 CSS 来实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T07:23:05.813

所选文本 (::selection) 有一个 CSS3 属性，但它在 Chrome 或 Safari 中的 input 或 textarea 标签内不起作用。它仅适用于 Firefox。

见[textarea::selection 和 ::-moz-selection](https://stackoverflow.com/questions/2043695/textareaselection-and-moz-selection)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T14:08:41.620

是的，是的。

您可以使用 CSS 伪类`:focus`

**例子：**

```
input:focus{
    border: 5px solid blue;
    background: green;
}​ 
```

**[工作演示](http://jsfiddle.net/mLpg3/1/)**

# javascript - 如何使用 DOM 通过其中的数据查找 XML 元素？

> ID：14011568
> 
> 赞同：8
> 
> 时间：2012-12-23T14:03:23.133
> 
> 标签：javascript, xml, dom

我必须在特定位置的 XML 文件中插入数据。例如：

```
<tag1>
   <tag2>
      <tag3>data</tag3>
   </tag2>
   <tag2>
      <tag3>data2</tag3>
   </tag2>
</tag1> 
```

我必须使用 DOM 找到“data2”，而不是返回并在其中包含“data2”的“tag2”中插入新元素。更具体地说，我正在编写一个获取参数的函数：搜索键和要插入的数据。

如何找到“data2”以及如何返回“tag2”以便插入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:16:30.957

使用上述 XML 数据作为字符串：

```
XMLDocument.prototype.getElementByContent = function getElementByContent(str) {
   var elems = this.querySelectorAll("*");

   for (var i = 0, l = elems.length; i < l; i++) {
      if (elems[i].textContent === str) {
         return elems[i];
      }
   }
};

var parser = new DOMParser();
var xmlDoc = parser.parseFromString(xmlString, "text/xml");

var tag = xmlDoc.createElement("tag3");
var content = xmlDoc.createTextNode("data3");
tag.appendChild(content);

xmlDoc.getElementByContent("data2").parentNode.appendChild(tag);

/*
    #docment▼ (XMLDocument)

    <tag1>▼
       <tag2>▼
           <tag3>data</tag3>
       </tag2>
       <tag2>▼
          <tag3>data2</tag3>
          <tag3>data3</tag3>
       </tag2>
    </tag1>​
*/ 
```

工作示例：http: [//jsfiddle.net/elias94xx/nFB7G/](http://jsfiddle.net/elias94xx/nFB7G/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T11:25:24.383

下面的示例展示了如何使用其中一些方法来访问 XML 数据。阅读内联注释以了解代码的工作原理。

```
Use Notepad or a similar text editor to save the following data as a file named C:\Q317663.xml:

<?xml version='1.0' encoding='ISO-8859-1' standalone='yes'?>
<Collection>
   <Book Id='1' ISBN='1-100000ABC-200'>
      <Title>Principle of Relativity</Title>
      <!-- Famous physicist -->      
      <Author>Albert Einstein</Author>
      <Genre>Physics</Genre>
   </Book>
   <Book Id='2' ISBN='1-100000ABC-300'>
      <!-- Also came as a TV serial -->
      <Title>Cosmos</Title>
      <Author>Carl Sagan</Author>
      <Genre>Cosmology</Genre>
   </Book>
   <!-- Add additional books here -->
</Collection>

Create a new Visual Basic .NET Console Application project.
Replace the code in Module1.vb with the following code. This example loads the XML document from a file representing a collection of Books and then accesses the content using some of the methods mentioned earlier.

Imports System.Xml
Imports System.Text

Module Module1

   Sub Main()

      Try

         ' Create an Xml document instance and load XML data.
         Dim doc As XmlDocument = New XmlDocument()
         doc.Load("C:\Q317663.xml")                     

         ' 1\. Select all the Book titles by using an XPath query.
         Dim nodeList As XmlNodeList = doc.SelectNodes("//Book/Title")
         Dim node As XmlNode
         Console.WriteLine("{0}", "TITLES LIST: ")
         For Each node In nodeList
            Console.WriteLine("{0}", node.InnerText)
         Next

         ' 2\. Read the XmlDeclartion values.
         Dim decl As XmlDeclaration = CType(doc.FirstChild, XmlDeclaration)
         Console.WriteLine("{0}", vbNewLine & "XML DECLARTION:")
         Console.WriteLine("{0}", "Version    " & "= " & decl.Version)
         Console.WriteLine("{0}", "Encoding   " & "= " & decl.Encoding)
         Console.WriteLine("{0}", "Standalone " & "= " & decl.Standalone)

         ' 3\. Move to the first node of DOM and get all of its attributes.
         Dim root As XmlElement = doc.DocumentElement
         node = root.FirstChild
         Dim attr As XmlAttribute
         Console.WriteLine("{0}", vbNewLine & "ATTRIBUTES OF THE FIRST CHILD:")
         For Each attr In node.Attributes
            Console.WriteLine("{0}", attr.Name & " = " & attr.InnerText)
         Next

         ' 4\. Navigate to the child nodes of the first Book node.
         Dim cNode As XmlNode
         Console.WriteLine("{0}", vbNewLine & "FIRST NODE'S CHILDREN:")
         If node.HasChildNodes Then
            For Each cNode In node.ChildNodes
               Console.WriteLine("{0}", cNode.OuterXml)
            Next
         End If

         ' 5\. Navigate to the next sibling of the first Book node.
         node = node.NextSibling
         Console.WriteLine("{0}", vbNewLine & "NEXT SIBLING:")
         If Not node Is Nothing Then
            Console.WriteLine("{0}", node.OuterXml)
         End If

         ' 6\. Get the parent node details of the current node.
         Console.WriteLine("{0}", vbNewLine & "PARENT NODE NAME = " & node.ParentNode.Name)
         Console.WriteLine("{0}", "PARENT NODE HAS " & node.ParentNode.ChildNodes.Count & " CHILD NODES")
         Console.WriteLine("{0}", "PARENT NODE'S NAMESPACE URI = " & node.ParentNode.NamespaceURI)

         ' 7\. Count the number of Comment nodes in the document.
         ' You could search for other types in the same way.
         Dim commentNodes As Integer = GetNodeTypeCount(doc.DocumentElement, XmlNodeType.Comment)
         Console.WriteLine("{0}", vbNewLine & "NUMBER OF COMMENT NODES IN THE DOC = " & commentNodes & vbNewLine)

          Console.ReadLine()

      Catch xmlex As XmlException                  ' Handle the Xml Exceptions here
         Console.WriteLine("{0}", xmlex.Message)
      Catch ex As Exception                        ' Handle the generic Exceptions here
         Console.WriteLine("{0}", ex.Message)
      End Try

   End Sub

   Function GetNodeTypeCount(ByVal node As XmlNode, ByVal nodeType As XmlNodeType) As Integer

      ' Recursively loop through the given node and return 
      ' the number of occurences of a specific nodeType.
      Dim i As Integer = 0
      Dim cNode As XmlNode
      If node.NodeType = nodeType Then
         i = i + 1
      End If
      If node.HasChildNodes Then
         For Each cNode In node.ChildNodes
            i = i + GetNodeTypeCount(cNode, nodeType)
         Next
      End If
      GetNodeTypeCount = i

   End Function

End Module

Compile and then run the application. The output should resemble the following:

TITLES LIST:
Principle of Relativity
Cosmos

XML DECLARTION:
Version    = 1.0
Encoding   = ISO-8859-1
Standalone = yes

ATTRIBUTES OF THE FIRST CHILD:
Id = 1
ISBN = 1-100000ABC-200

FIRST NODE'S CHILDREN:
<Title>Principle of Relativity</Title>
<!-- Famous physicist -->
<Author>Albert Einstein</Author>
<Genre>Physics</Genre>

NEXT SIBLING:
<Book Id="2" ISBN="1-100000ABC-300"><!-- Also came as a TV serial --><Title>Cosm
os</Title><Author>Carl Sagan</Author><Genre>Cosmology</Genre></Book>

PARENT NODE NAME = Collection
PARENT NODE HAS 3 CHILD NODES
PARENT NODE'S NAMESPACE URI =

NUMBER OF COMMENT NODES IN THE DOC = 3 
```

# google-maps-api-3 - 谷歌地图信息窗口的底部填充过多

> ID：14011571
> 
> 赞同：0
> 
> 时间：2012-12-23T14:03:36.753
> 
> 标签：google-maps-api-3

我正在显示一个内容很少的谷歌地图信息窗口，但窗口底部似乎有很多填充。

示例：http: [//jsfiddle.net/m9n2X/2/](http://jsfiddle.net/m9n2X/2/)

黄色框显示了我在窗口中显示的内容。黄色内容没有应用填充或边距。

![例子](../Images/dda127106a9552931912fd2876c9fb84.png)

Javascript

```
var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
var mapOptions = {
    zoom: 4,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
}
var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

var contentString = "<span id='content_string'>I'm a popup window</span>";

var infowindow = new google.maps.InfoWindow({
    content: contentString
});

var marker = new google.maps.Marker({
    position: myLatlng,
    map: map,
    title: 'Uluru (Ayers Rock)'
});
google.maps.event.addListener(marker, 'click', function() {
  infowindow.open(map,marker);
}); 
```

这是CSS

```
#map_canvas {
    height: 400px;
    width: 400px;
}

#content_string {
    background: yellow;
} 
```

有没有办法减少应用于窗口底部的填充？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T14:19:37.070

那不是填充。有一个最小尺寸的信息窗口。查看 InfoWindow 的替代品（如[InfoBubble](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/)）。

# web-services - 从 SharePoint 工作流调用 asmx Web 服务：找不到资源

> ID：14011580
> 
> 赞同：0
> 
> 时间：2012-12-23T14:05:13.100
> 
> 标签：web-services, sharepoint, workflow, asmx

本周，我们使用新的 SharePoint 解决方案投入生产。在暂存环境中进行了近一年的开发和测试后，这是我第一次遇到以下错误。

**错误：有时它可以工作，有时它会因 404 而崩溃**

我们在我们的 SharePoint 解决方案中使用 Nintex 工作流程 - 但我猜 Nintex 并不是这里的交易破坏者。在此工作流（和其他工作流）中，我们调用了托管在 SharePoint 场的 _vti_bin 中的自定义 asmx Web 服务。Web 服务中的所有内容都以提升的权限运行。工作流调用webservice时，webservice为部分用户随机返回404错误：找不到资源。这里缺少的资源是 Web 服务的 asmx 路径。

有趣的是，此错误仅在我们客户的一个用户启动工作流时发生，但如果我们的测试登录之一是工作流启动器，则不会发生此错误。该错误也仅发生在客户用户的 5 次测试运行中的 2 次。在使用我的测试登录进行测试运行时，我有时也会遇到这样的错误，但在 20 次尝试中只有 3 次。该错误发生在来自工作流的另一个 Web 服务调用中 - 与客户用户尝试时崩溃的调用不同。

**环境**

SharePoint 环境由两个 Web 前端和一个应用程序服务器组成。负载平衡器也在运行。所以我的猜测是环境中的一台机器配置不正确。当我与我们的测试用户一起测试时，我正在与场服务器位于同一网络中的工作站上进行测试——我直接通过远程桌面连接执行此操作，而且我的测试必须通过负载平衡器。客户的用户正在类似情况下测试工作流，但我相信他们被路由到 SharePoint 场的方式不同，因此他们可以像我在远程测试时那样进入另一个前端。

**我已经尝试过的**

*   直接测试 Web 服务，无需与我的测试用户进行工作流
*   直接测试 Web 服务，无需每个前端的工作流
*   检查 asmx 文件是否真的在所有机器上的所有 _vti_bin 文件夹中

结论： asmx 无处不在，我在手动调用 web 服务时从未遇到过特定于 ASP.NET 的 404。

**我的怀疑**

它有时会起作用，所以我想可能一个前端工作正常。当工作流在另一个（有故障的）前端运行时，问题就出现了——这可以解释为什么我的测试用户启动的工作流的行为与客户启动的不同。

还是可能是权限问题？我已经测试了从 _vti_bin 手动调用 web 服务的测试用户对 SharePoint 场完全没有权限并且能够成功调用 web 服务。或者我应该尝试使用系统帐户启动工作流程吗？

我可以尝试缩小问题范围吗？登台系统仍然可以正常工作 - 相同的版本，相同的用户，没有问题。

提前致谢，节日快乐！

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:53:45.160

今天解决了这个问题。

这是一个配置问题：我客户的 IT 向服务器场添加了另一台应用程序服务器，但忘记在 IIS 控制台中配置绑定。每次工作流在新的应用程序服务器上运行时，它都无法连接到 Web 服务，因为缺少绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T20:28:36.960

问题隔离：当您在没有工作流的情况下测试 asmx 时，您使用的是测试用户帐户还是客户用户帐户？这里的关键是将问题隔离到 1\. Web 服务 2\. WFE 尝试服务请求 3\. 调用 Web 服务的客户端应用程序，即工作流

权限：尝试使测试用户的权限与客户用户匹配，只是为了比较苹果和苹果。

有没有跨域连接？是否有任何防火墙或防病毒软件监控流量？

日志：检查 IIS 日志文件和事件查看器以检查有关 404 错误的更多详细信息。

* * *

量子位

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T09:00:25.473

为什么不打开 Fiddler 并检查它尝试调用 Web 服务的方式、时间和地点。

我想它会给你完整的画面。

如果它不工作，也发布你的提琴手日志

# c - 如何从服务器向c中的所有客户端发送消息？

> ID：14011581
> 
> 赞同：1
> 
> 时间：2012-12-23T14:05:12.693
> 
> 标签：c, sockets

我得到哪个客户端使用此代码向服务器发送消息；

```
recvfrom(s, buf, BUFLEN, 0, (struct sockaddr *) &si_other, &slen));

printf("Received packet from %s:%d\n", inet_ntoa(si_other.sin_addr), ntohs(si_other.sin_port)); 
```

我可以用这个代码向这个客户发送消息；

```
sendto(s, "data", recv_len, 0, (struct sockaddr*) &si_other, slen); 
```

但我想将此消息（“数据”）发送给所有客户端，而不仅仅是一个客户端。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T14:08:07.937

您在列表中跟踪您从客户端接受的连接，并且当您想向每个人发送消息时，您使用循环迭代该列表并将所需的消息单独发送给每个人。

# wcf - 带有 XML 或 JSON 请求的 WCF 休息服务给出 400 错误请求

> ID：14011582
> 
> 赞同：0
> 
> 时间：2012-12-23T14:05:20.027
> 
> 标签：wcf, rest

我已经尝试了我在网上研究中能想到的所有选项，但也许我错过了一些我看不到的明显东西。

这是我的接口定义

```
[ScriptService] 
[ServiceContract]
public interface IService
{

    [ScriptMethod(ResponseFormat = ResponseFormat.Json, UseHttpGet = true)]
    [OperationContract]
    //[FaultContract(typeof(MycustomFault))]
    [WebGet(UriTemplate = "/GetData/{Request}", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat=WebMessageFormat.Xml)]
    string GetData(string Request);

} 
```

这是我的服务班

```
[ScriptService]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
public class Service : IService
{
    public string GetData(string Request)
    {
      //break point at code here
    }
} 
```

这是服务配置

```
 <system.serviceModel>
   <protocolMapping>
      <add scheme="http" binding="webHttpBinding"/>
    </protocolMapping>
    <behaviors>
      <endpointBehaviors>
        <behavior>
          <webHttp />
        </behavior >
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer> 
```

我通过这样调用 url 来测试这个服务：`http://localhost:4196/Service.svc/GetData/<myxml>somedata</myxml>` 当我尝试使用上面的 url 通过浏览器发送任何 xml 内容时，我收到一个 400 错误请求。它甚至没有达到临界点。但是，如果我发送纯文本，它会通过。例如：如果我像这样调用 url，`http://localhost:4196/Service.svc/GetData/someplaintextdatahere`它会起作用并且我会遇到断点。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T14:15:10.410

您通过 url 发送错误符号，`<>`您必须对其进行编码

`http://localhost:4196/Service.svc/GetData/&lt;myxml&gt;somedata&lt;/myxml&gt;`

# sql - 如何在PostgresSQL中的换行符和**字符之前返回文本

> ID：14011585
> 
> 赞同：1
> 
> 时间：2012-12-23T14:05:38.520
> 
> 标签：sql, postgresql

TEXT 类型的列 tasumma 包含行。注释的开头在行首用两个 ** 字符标记。从这里开始到列尾的所有文本都应该被忽略。如何在推荐行之前返回文本。例如，如果列包含文本

```
2*31
** This is multiline
comment starting with ** characters in start of line 
```

必须返回 2*31

我试过表达

```
 CASE when tasusumma like '%**%' then 
     substring( tasusumma for position( '**' in tasusumma)-1) 
 else tasusumma end 
```

但它看起来有点难看。

在 Postgres eq 中使用 regexp substring 有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:01:29.550

作为对@Bohemian 答案的修改，请使用 regexp_replace：

```
regexp_replace(tasusumma, '\*\*.*', '', 'g') 
```

[http://sqlfiddle.com/#!1/d41d8/643](http://sqlfiddle.com/#!1/d41d8/643)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T14:40:23.780

您可以使用正则表达式提取：

```
substring(tasusumma from '.*(?=\*\*)') 
```

这是[在 sqlfiddle 中运行的代码](http://sqlfiddle.com/#!1/d41d8/644)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T15:02:42.797

```
CREATE TABLE fuzz
        ( id INTEGER NOT NULL PRIMARY key
        , fuzz varchar
        );

INSERT INTO fuzz (id, fuzz) VALUES
(1, E'one ** TWO')
, (2, E'one ** COMMENT\n two.')
, (3, E'one ** COMMENT\n two.\*\* THREE')
        ;

SELECT f.id
        , regexp_replace ( f.fuzz, E'\\*\\*[^\n]*', '' , 'g' )
FROM fuzz f
        ; 
```

结果：

```
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "fuzz_pkey" for table "fuzz"
CREATE TABLE
INSERT 0 3
 id | regexp_replace 
----+----------------
  1 | one 
  2 | one           +
    |  two.
  3 | one           +
    |  two.
(3 rows) 
```

FROM the [Fine Manual](http://www.postgresql.org/docs/9.1/static/functions-matching.html#FUNCTIONS-POSIX-REGEXP) 注意：如果您关闭了standard_conforming_strings，则您在文字字符串常量中编写的任何反斜杠都需要加倍。有关详细信息，请参阅第 4.1.2.1 节。

注意：与 OP 要求相反，上面的代码假定 '**' 注释应该在同一行的末尾结束；下一行*不*被视为注释的一部分。这是在 sql 中处理“--”注释的方式，而在 C 或 C++ 中处理“//”注释。

# opengl-3 - glDrawArrays GL_LINES 未正确绘制线条

> ID：14011588
> 
> 赞同：4
> 
> 时间：2012-12-23T14:06:12.770
> 
> 标签：opengl-3

我试图用下面的代码画一条*线*，它可以工作：

```
// Include standard headers
#include <stdio.h>
#include <stdlib.h>

// Include GLEW
#include <GL/glew.h>

// Include GLFW
#include <GL/glfw.h>

// Include GLM
#include <glm/glm.hpp>
using namespace glm;

// shaders
#include "shader.hpp"

int main( void )
{
    // Initialise GLFW
    if( !glfwInit() )
    {
        fprintf( stderr, "Failed to initialize GLFW\n" );
        return -1;
    }

    glfwOpenWindowHint(GLFW_FSAA_SAMPLES, 4);
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 3);
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 3);
    glfwOpenWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);

    // Open a window and create its OpenGL context
    if( !glfwOpenWindow( 1024, 768, 0,0,0,0, 32,0, GLFW_WINDOW ) )
    {
        fprintf( stderr, "Failed to open GLFW window. If you have an Intel GPU, they are not 3.3 compatible. Try the 2.1 version of the tutorials.\n" );
        glfwTerminate();
        return -1;
    }

    glewExperimental=GL_TRUE;

    // Initialize GLEW
    if (glewInit() != GLEW_OK) {
        fprintf(stderr, "Failed to initialize GLEW\n");
        return -1;
    }

    glfwSetWindowTitle( "Tutorial 02" );

    // Ensure we can capture the escape key being pressed below
    glfwEnable( GLFW_STICKY_KEYS );

    // Dark blue background
    glClearColor(0.0f, 0.0f, 0.3f, 0.0f);

    GLuint VertexArrayID;
    glGenVertexArrays(1, &VertexArrayID);
    glBindVertexArray(VertexArrayID);

    // Create and compile our GLSL program from the shaders
    GLuint programID = LoadShaders( "SimpleVertexShader.vertexshader",
                                    "SimpleFragmentShader.fragmentshader" );

    static const GLfloat g_vertex_buffer_data[] = {
                0.0f,  1.0f, 0.0f,
                0.0f,  0.0f, 0.0f
    };

    GLuint vertexbuffer;
    glGenBuffers(1, &vertexbuffer);
    glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(g_vertex_buffer_data), g_vertex_buffer_data, GL_STATIC_DRAW);

    do{

        // Clear the screen
        glClear( GL_COLOR_BUFFER_BIT );

        // Use our shader
        glUseProgram(programID);

        // 1rst attribute buffer : vertices
        glEnableVertexAttribArray(0);
        glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);

        glVertexAttribPointer(
            0,                  // attribute 0\. No particular reason for 0, but must match the layout in the shader.
            2,                  // size
            GL_FLOAT,           // type
            GL_FALSE,           // normalized?
            0,                  // stride
            (void*)0            // array buffer offset
        );

        // Draw the line !
        glDrawArrays(GL_LINES, 0, 2); // 2 indices for the 2 end points of 1 line

        glDisableVertexAttribArray(0);

        // Swap buffers
        glfwSwapBuffers();

    } // Check if the ESC key was pressed or the window was closed
    while( glfwGetKey( GLFW_KEY_ESC ) != GLFW_PRESS &&
           glfwGetWindowParam( GLFW_OPENED ) );

    // Close OpenGL window and terminate GLFW
    glfwTerminate();

    // Cleanup VBO
    glDeleteBuffers(1, &vertexbuffer);
    glDeleteVertexArrays(1, &VertexArrayID);

    return 0;
} 
```

我看到从屏幕中间到顶部中间的一条线。但是，当我将 g_vertex_buffer_data[] 中的顶点顺序更改为：

```
static const GLfloat g_vertex_buffer_data[] = {
                0.0f,  0.0f, 0.0f,
                0.0f,  1.0f, 0.0f
    }; 
```

我只看到没有线条的蓝屏！opengl 文档中没有任何地方提到 GL_LINES 的特定顶点顺序，所以这也应该有效。

任何人都知道可能出了什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T14:09:06.583

你定义你的顶点是这样的：

```
glVertexAttribPointer(
            0,                  // attribute 0\. No particular reason for 0, but must match the layout in the shader.
            2,                  // size
            GL_FLOAT,           // type
            GL_FALSE,           // normalized?
            0,                  // stride
            (void*)0            // array buffer offset
        ); 
```

即每个顶点2个浮点数并且没有步幅。所以如果你只渲染两个顶点，它只会读取 4 个浮点数。当你交换顶点时，前 4 个浮点数都为零，你得到两个相同的位置，因此没有线。

# java - Android - 片段中两个按钮中的第二个无响应

> ID：14011590
> 
> 赞同：1
> 
> 时间：2012-12-23T14:06:24.287
> 
> 标签：java, android, android-fragments

所以我有一个主/细节布局，我使用的细节片段之一包含两个按钮。为了区分两个单独按钮的点击，我在细节片段类中设置了我的 onClick() 函数，如下所示：

```
public void onClick(View view) {
        System.out.println("Click on:");
        //The switch statement determines which button was pressed
        switch (view.getId()) {
            //If it's the calculation button
            case R.id.button_calc:
                System.out.println("Calculation button!");
                //code...
                break;
            //Otherwise, if it's the save data button
            case R.id.button_saveData:
                System.out.println("Save button!");
                //code...
                break;
            default:
                break;
    } 
```

这两个按钮在 XML 中声明如下：

```
 <Button android:id="@+id/button_calc"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:text="@string/button_singleCalc"/>

    <Button android:id="@+id/button_saveData"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:text="@string/button_saveData"/> 
```

当我点击 button_calc 时，它会改变颜色，产生点击声音并按预期执行代码。但是，当我点击 button_saveData 时，它只会改变颜色 - 没有点击声音，也没有代码执行，甚至 println() （在 button_calc 中工作正常）也没有。

编辑：不确定它是否重要，但我正在使用 Android 4.2 的 Nexus 10 上开发它。

那么我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:46:21.470

要直接回答您的问题，我看不出您发布的代码有什么问题。

对我来说，我更喜欢将 onClick() 事件直接放在 xml 中，我有 Web 开发的历史，所以我想这对我来说感觉更自然。

```
<Button android:id="@+id/button_calc"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:text="@string/button_singleCalc"
    android:onClick="onClickCalculation" />

<Button android:id="@+id/button_saveData"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:text="@string/button_saveData"
    android:onClick="onClickSaveData" /> 
```

然后在包含的活动中（不是片段）

```
public void onClickCalculation(View view) {
        System.out.println("Calculation button!");
        //code...
}

public void onClickSaveData(View view) {
        System.out.println("Calculation button!");
        //code...
} 
```

# perl - 在 perl 中使用 Archive::Rar 指定提取文件夹

> ID：14011591
> 
> 赞同：0
> 
> 时间：2012-12-23T14:06:46.107
> 
> 标签：perl, directory, extract, archive, rar

我想将 perl 中的 .rar 存档提取到指定路径。我试过这个：

```
my $archive= 'text.rar';
my $directory = 'photos';
my $rar = Archive::Rar->new( -archive => $archive );
$rar->Extract(-to => $directory); 
```

但这没有解决，它总是将其提取到我的根文件夹中...

是否有任何命令可以告诉 Archive::Rar 另一个目录？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:07:36.187

事实证明，有一个*未*记录的选项：

```
my $rar = Archive::Rar->new( -archive => $archive, -initial => $directory);
$rar->Extract(); 
```

会这样做。

# android - 将自定义代码添加到生成的实体类中

> ID：14011593
> 
> 赞同：1
> 
> 时间：2012-12-23T14:06:56.003
> 
> 标签：android, greendao

我正在使用[google-http-java-client 库](http://code.google.com/p/google-http-java-client/)来简化我与 Web 的通信并自动解析服务器的响应。所以我需要通过注释 @Key(name) 来注释我的 POJO 类的成员，[如下例所示](http://code.google.com/p/google-http-java-client/source/browse/dailymotion-simple-cmdline-sample/src/main/java/com/google/api/services/samples/dailymotion/cmdline/simple/DailyMotionSample.java?repo=samples)：

```
public static class Video {

   @Key
   public String id;

   @Key
   public String title;

   @Key
   public String url;
} 
```

收到服务器的响应后，我想将这些实体保存到数据库中。所以我必须通过 GreenDAO 生成这个类。主要问题是如何将注释 @Key 插入生成的类中？是的，我知道我可以在生成的类中插入一些代码。本[主题](http://greendao-orm.com/documentation/modelling-entities/)描述了这种能力。但据我了解，我只能插入自定义成员、方法和包含。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T02:30:38.753

您可以查看[Path 的分叉](https://github.com/path/greenDAO)并自行承担使用风险。它支持添加注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T11:37:38.010

抱歉，greenDAO 目前不支持此功能。为了以后参考，我开了一张票： [https ://github.com/greenrobot/greenDAO/issues/66](https://github.com/greenrobot/greenDAO/issues/66)

有一些方法可以解决这个问题，但你必须小心。您可以使用 停止生成某些实体`yourEntity.setSkipGeneration(true)`。如果您决定走这条路，则必须始终像生成的代码一样提供构造函数。如果属性发生变化，请记住这一点。

# php - 点击标题菜单调用所有子类别

> ID：14011594
> 
> 赞同：1
> 
> 时间：2012-12-23T14:06:59.510
> 
> 标签：php, zen-cart

我在 zen 购物车（家具、kilim、枕头、地毯）上创建了四个 EZ 页面，这些页面显示在页眉上，还创建了四个类别（家具、kilim、枕头、地毯），还为所有类别创建了子类别。

当我单击家具（标题菜单）时，然后在左侧框中显示与家具相关的所有子类别。

感谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T16:30:36.063

使用此插件创建水平下拉菜单。

[http://www.zen-cart.com/downloads.php?do=file&id=323](http://www.zen-cart.com/downloads.php?do=file&id=323)

# lua - 如何将指向 LuaJIT ffi 的指针传递给用作输出参数？

> ID：14011598
> 
> 赞同：6
> 
> 时间：2012-12-23T14:07:56.823
> 
> 标签：lua, ffi, luajit

假设有以下 C 代码：

```
struct Foo { int dummy; }
int tryToAllocateFoo(Foo ** dest); 
```

...如何在 LuaJIT 中进行跟踪？

```
Foo * pFoo = NULL;
tryToAllocateFoo(&pFoo); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-23T22:01:53.433

```
local ffi = require 'ffi'

ffi.cdef [[
  struct Foo { int dummy; };
  int tryToAllocateFoo(Foo ** dest);
]]

local theDll = ffi.load(dllName)

local pFoo = ffi.new 'struct Foo *[1]'
local ok = theDll.tryToAllocateFoo(pFoo)

if ok == 0 then -- Assuming it returns 0 on success
  print('dummy ==', pFoo[0].dummy)
end 
```

# php - 仅从文本区域请求第一行？

> ID：14011599
> 
> 赞同：-4
> 
> 时间：2012-12-23T14:07:59.047
> 
> 标签：php, html, text

> **可能重复：**
> [如何将字符串放入数组中，用换行符分割？](https://stackoverflow.com/questions/1483497/how-to-put-string-in-array-split-by-new-line)

`$_REQUEST['']` 使用仅从文本区域请求一行时是否有可能？

就像是：

```
<?php 

  $text = $_REQUEST['originalText']; 

?>

<textarea name="firstRow" rows="5" cols="50" wrap="OFF" ><?php 
    echo $text
?></textarea>

<form action="index.php" method="POST" name="editText">
  <input name="submit" value="Edit Text" type="submit"><br>
  <textarea name="originalText" rows="5" cols="50" wrap="OFF"></textarea>
</form> 
```

而不是`echo $text`可以只回显第一行`$text`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T14:15:02.360

我不明白你所说的第一行是什么意思，但如果你想得到第一行（在“输入”之前），请执行以下操作：

```
list($first_line) = explode("\n", $text, 2); 
```

或者替代地（并且优选地）：

```
$first_line = strstr($text, "\n", true); 
```

请参阅[`strtr`^(*Docs*)](http://php.net/strtr) and [Demo](http://3v4l.org/Wr3Pa) - 您可能需要添加一个`"\n"`以`$text`确保至少存在一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T14:28:33.677

这段代码也有效。

```
<?php
 if(isset($_REQUEST['text'])){
    $text = $_REQUEST['text'];
    $line1 = strpos($text, "\n");
    if($line1 !== false){
        echo substr($text, 0, $line1);
    } else {
        echo $text;
    }
    exit;
 }
?>
<form>
    <textarea name="text"></textarea>
    <input type="submit" />
</form> 
```

# python - 对networkx图形对象Python进行排序

> ID：14011600
> 
> 赞同：8
> 
> 时间：2012-12-23T14:08:01.497
> 
> 标签：python, networkx

我想对我通过 Python 中的 networkx 库读取的图形对象进行排序，以边缘权重的递增顺序。似乎`sort`python的命令不适用于图形对象。我确信有一种简单的方法可以对这个对象进行排序，但我不确定如何。任何帮助将不胜感激。

例如，我的前三个边是

```
1 3 5250
1 4 74
1 5 3659 
```

排序后，我希望他们的顺序更改为

```
1 4 74
1 5 3659
1 3 5250 
```

到目前为止，这是我的代码

```
import networkx as nx
g=nx.read_weighted_edgelist(fname,nodetype=int) 
```

我正在尝试对对象进行排序`g`。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-23T14:33:08.050

```
import networkx as nx
edgelist = [
    (1, 3, {'weight':5250}),
    (1, 4, {'weight': 74}),
    (1, 5, {'weight': 3659})]

G = nx.Graph(edgelist)
for a, b, data in sorted(G.edges(data=True), key=lambda x: x[2]['weight']):
    print('{a} {b} {w}'.format(a=a, b=b, w=data['weight'])) 
```

产量

```
1 4 74
1 5 3659
1 3 5250 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-23T14:30:07.930

内置`sort`函数有一个`key`接受函数的参数。如果指定， sort 将按照 key 函数应用于原始元素的结果的顺序对集合进行排序。

```
>>> sorted([1,2,3], key=lambda x:-x)
[3, 2, 1] 
```

[你可以在这里](http://wiki.python.org/moin/HowTo/Sorting#Key_Functions)找到更多信息

在您的特定情况下，如果您需要按边权重排序并且您有边列表，则需要提供将边映射到其权重的函数：

```
sorted( list_of_edges, key= lambda edge: edge['weight'] ) 
```

# java - 如何从 Java 集成测试修改网络连接？

> ID：14011606
> 
> 赞同：3
> 
> 时间：2012-12-23T14:08:35.863
> 
> 标签：java, rest, networking, junit, jersey

我编写了一个 Java 类 ( `MyRestClient`)，它需要访问第三方 RESTful API 并对从他们的服务器返回的 HTTP 响应进行一些处理。我现在正在尝试在 3rd 方 API 之间编写一系列成功的集成测试（`JUnit`用作底层 testng 库），`MyRestClient`以确保此类在各种情况下都能正确运行：

*   一切都很完美（RESTful API 调用正确，服务器返回有意义的响应）
*   错误的 API 调用和服务器返回应用层错误代码
*   返回各种非 200 的 HTTP 代码，包括 403、404 和 500
*   无网络连接
*   ...ETC。

该列表中的第 4 项（“*无网络连接*”）是我目前遇到的问题。我在后台使用[`Jersey`](http://jersey.java.net/)来执行我的实际 REST 调用，但是 Jersey 本身只是基于`java.net.*`. 如果可能的话，我想“破坏”Jersey/Java 在我的`shouldThrowExceptionOnBadNetworkConnection()`测试方法执行时触发网络连接的能力，然后将其重新“打开”，以便下一个测试方法可以正常运行。

我一直在研究似乎就是这样做的[Charles Proxy](http://www.charlesproxy.com/)，但是似乎没有用于在运行时管理它的 Java 库。

所以我问：**如何为特定的集成测试关闭 Java 网络？**提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T14:23:54.937

通过让 MyRestClient 声明一个返回 URL 的受保护方法并让它使用它而不是私有字段来使 MyRestClient 可测试。

在您的 JUnit 测试中，您使用一个匿名类来覆盖该方法，它是否返回垃圾：

```
MyRestClient willFail = new MyRestClient() {
    protected String getUrl() {
        return "http://not.a.real.address";
    }
} 
```

还有可以做类似事情的模拟库

# java - Math.cos 对大值给出不好的结果

> ID：14011617
> 
> 赞同：1
> 
> 时间：2012-12-23T14:09:45.057
> 
> 标签：java

我已经看到了一些答案，但我仍然没有找到适合我的答案。当我尝试这个时：

```
return Math.cos(270.* Math.PI/180); 
```

我明白了

```
-1.8369701987210297E-16 
```

尽管： -

```
Math.cos(Math.toRadians(270.) // gives:-1.8369701987210297E-16 
```

我期待这给0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T14:11:13.970

数字`-1.8369701987210297E-16`是一个*非常*接近于零的数字的[科学表示。](http://en.wikipedia.org/wiki/Scientific_notation)它相当于这个数字：

 *```
-0.000000000000000018369701987210297 
```

浮点运算并不精确。您应该期待小的表示错误。特别是不可能将像 pi 这样的[无理数](http://en.wikipedia.org/wiki/Irrational_number)完全表示为浮点数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T14:12:46.433

`Math.PI`是一个近似值，因此您将得到 的近似值`zero`。

`epsilon`尝试使用值近似的误差范围`1E-16`。因此，如果 cos 结果低于 epsilon，则意味着它为空。

您还可以开发自己的修改`cos`功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T14:11:55.843

在浮点数的情况下，另一个不完美精度的例子。你转换它，它会导致一个不完美的 0 值。然而，它非常接近于零。

它与大值无关。如果是浮点数，请始终期待细微的差异。*

# javascript - 如何知道多个异步调用何时完成然后调用另一个命令？

> ID：14011619
> 
> 赞同：0
> 
> 时间：2012-12-23T14:10:11.180
> 
> 标签：javascript, ajax, asynchronous

在 javascript 和 ajax 中进行多个异步调用时遇到问题。一切看起来都像同时在多个线程中开始，并且输出取决于它到达的时间。

当前输出为：

```
DONE
UpdateUserLocation...
UpdateUserFriends...
UpdateUserFriendList...
UpdateUserAlbum...
UpdateUserGroup... 
```

但预期是

```
UpdateUserLocation...
UpdateUserFriends...
UpdateUserFriendList...
UpdateUserAlbum...
UpdateUserGroup...
DONE 
```

我的代码：

```
{...
    HandleExtendAccessToken(accessToken, fbUserId, fbName, fbEmail, function(result){

        if(result == true) {
            console.log("DONE");   
        }
    });
...};

function HandleExtendAccessToken(accessToken, fbUserId, fbName, fbEmail, callback){

    FBExtendAccessToken.ExtendCurrentToken60Days(accessToken, fbUserId, fbName, fbEmail);

    if(dayUpdateUserLocation == '') UpdateUserLocation();

    if(dayUpdateUserFriends == '') UpdateUserFriends();

    if(dayUpdateUserFriendList == '') UpdateUserFriendList();

    if(dayUpdateUserAlbum == '') UpdateUserAlbum();

    if(dayUpdateUserGroup == '') UpdateUserGroup();

    if(dayUpdatePage == '') UpdatePage();

    callback(true);
}; 
```

我做错什么了吗？我如何解决它。谢谢

更新：

这是上面列表中的示例更新函数。我进行了 2 个 ajax 调用的一个功能：Facebook API AJAX 获取信息，另一个是 AJAX 将这些信息更新到我的服务器。完成检索 facebook 信息并更新到服务器后，我想显示 DONE 或将用户重定向到另一个页面：

```
function UpdateUserLocation(){

    var userLocationIds = "";
    var userLocationNames = "";
    FB.api('/me/locations' + '?access_token=' + accessToken, function(response) {
        var locationList = response.data;
        var userLocationList = "";

        if(locationList !=undefined && locationList.length != 0){
            for (var index = 0; locationList.length > index; index++){
                if(index == 0){
                    userLocationIds = locationList[index].place.id;
                    userLocationNames= locationList[index].place.name;
                } else {
                    userLocationIds = userLocationIds + "-|-" +      locationList[index].place.id;
                    userLocationNames = userLocationNames + "-|-" +  locationList[index].place.name;
                }
            }
        } else {
            userLocationIds = "108153009209321";
            userLocationNames = "Viet Nam";
        }
        //Save user location to server
        FBData.UpdateFBData(fbUserId, userLocationIds,userLocationNames, 1);
        console.log("UpdateUserLocation...");

    });  
} 
```

您可以在此处试用该应用程序：[http](http://www.webdoanhnghiep.biz/Facebook-Amplifier.aspx) ://www.webdoanhnghiep.biz/Facebook-Amplifier.aspx并感谢您抽出宝贵时间帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T14:34:53.850

jQuery 引入了延迟对象，它允许您执行一系列方法，然后执行某种完成的回调。

[http://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/)

[http://api.jquery.com/deferred.done/](http://api.jquery.com/deferred.done/)

[http://api.jquery.com/deferred.fail/](http://api.jquery.com/deferred.fail/)

[async.js](https://github.com/caolan/async)是另一个用于执行一系列异步命令和单个回调的库。

```
async.parallel([
    function(){ ... },
    function(){ ... }
], callback);

async.series([
    function(){ ... },
    function(){ ... }
]); 
```

# regex - 如何使用正则表达式从jmeter中带有id和值的隐藏文件中提取值

> ID：14011620
> 
> 赞同：-1
> 
> 时间：2012-12-23T14:10:14.153
> 
> 标签：regex, xpath, jmeter

嗨，我正在使用 JMeter。我的应用程序是在 java 上开发的。在其中一个请求中，我得到了回复

`HTTP Request Parameter:=_CONFIRMATIONTOKEN`

`HTTP Request value="nznrkrogryJurbnP2nkEB2AFXdVdU.mk43XesvDZwFjTWEgWgx.VfqTzOlOfH01kzvkUF9S5RGXPs6TMhoApEn1rGdaBnFqjccd8sxXpupFoWX1aMIw.i60XH2nUB2wti5Sy5A=="`

当我检查页面源时，我发现它来自隐藏的 html 控件之一。
这是

```
<input type="hidden" 
       name="_CONFIRMATIONTOKEN"
       id="_CONFIRMATIONTOKEN"              
       value="nznrkrogryJurbnP2nkEB2AFXdVdU.mk43XesvDZwFjTWEgWgx.VfqTzOlOfH01kzvkUF9S5RGXPs6TMhoApEn1rGdaBnFqjccd8sxXpupFoWX1aMIw.i60XH2nUB2wti5Sy5A==" /> 
```

所以请帮助我如何使用正则表达式从上面的 xpath 中提取值字符串。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T17:14:39.580

正如上面评论中提到的，`regular expression`是`xpath query`完全不同的事情，你最好更清楚地表达你的问题。

如果您想将 _CONFIRMATIONTOKEN 值提取到变量中并在进一步的请求中使用它，您可以使用[XPath Extractor](http://jmeter.apache.org/usermanual/component_reference.html#XPath_Extractor)应用于返回上述响应的请求采样器。

您的 XPath 查询应该返回您想要提取的值。
在这种情况下，它看起来像：

```
//input[@type="hidden"][@name="_CONFIRMATIONTOKEN"]/@value 
```

提取的值将存储在指向 XPath 提取器的“参考名称”字段的 jmeter 变量中（例如`${token}`，在您的情况下）。因此，您可以在使用此变量的进一步请求中使用提取的变量。

**注意：**由于这里 XPath Extractor 用于解析 HTML（不是 XML）响应，请确保选中**Use Tidy（容错解析器）**选项（在[XPath Extractor 的控制面板](http://jmeter.apache.org/usermanual/component_reference.html#XPath_Extractor)中）。

# ios - Nineveh vs cocos3d

> ID：14011622
> 
> 赞同：1
> 
> 时间：2012-12-23T14:10:30.520
> 
> 标签：ios, 3d, cocos2d-iphone

我正在学习如何使用 cocos2d 开发游戏应用程序，这非常有趣；但是当我准备好时，我想探索一个好的 3d 引擎来创建 3d 应用程序。在网上我注意到这两个工具：nineveh 和 cocos3d。有没有人可以教我他们的区别，什么是最好的？（我也知道统一 3d，但我不太喜欢它）谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:32:14.043

我想主要区别在于 Cocos 3d 是一个游戏引擎，而 NinevehGL “只是”一个 3d 引擎。我玩过 Nineveh，我认为它是 ios 的最佳 3d 引擎，只是 openGL2.0，它被研究用于考虑 OOP 和 objC 的多线程（但基础主要是 C++，这是一个加号，因为 C++ 是比 ObjC 快很多）。问题是 NinevehGL 的开发进展非常缓慢，开发人员更改了路线图，延迟很大。我不怪他，因为他所做的工作很棒，但我担心最终会停止开发。
Cocos 3d 在我看来确实落后于 3d 渲染功能，因为它使用的是 OpenGL 1.1，2013 年第一季度将升级为 OGL2.0。
Unity 可能是最好的带有 Unreal 的 3d 游戏引擎，但方法完全不同，最后一个带有 IDE，你不能在 Xcode 中使用它，我猜这种语言也更接近于脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T09:10:36.433

我在我的一个应用程序中使用了 Ninevegh 来展示我在 Blender 中创建的移动/旋转 3D 模型。它非常易于使用，只需几行代码即可全部启动并运行。加上它很容易安装。只需导入 Ninevegh 框架，您就可以开始使用了。

但目前它不如 Cocos3d 强大或可定制。让它与物理学在重力和此类力方面很好地协同工作并不容易。我现在有点努力让 Cocos3D 和 Bullet 物理很好地结合在一起，但慢慢地到达那里。

# php - 使用 PHP/COM/ADSI/LDAP 更改 AD 密码

> ID：14011625
> 
> 赞同：2
> 
> 时间：2012-12-23T14:11:11.983
> 
> 标签：php, iis, active-directory, adsi, change-password

我已经为此困扰了几天。我尝试了各种解决方案均无济于事。请帮忙...

**问题：** 我们有两个域控制器，它们不在我们的管理之下。我们能够通过端口 389 上的 LDAP 进行连接，但无法通过端口 636 安全地连接。

我们正在开发一个系统，以允许使用许多自助服务设施，其中之一是密码恢复工具。这直到重置用户密码为止。

我[通过 PHP 手册](http://php.net/manual/en/function.ldap-mod-replace.php#70136)找到了一些代码，这些代码似乎可以满足我们的需要，但似乎无法使其正常工作。

这是我到目前为止的代码

```
if ($caller==="change"){
if (($newPword1 === NULL)||($newPword1 === "" )){ return false;}
if (($newPword2 === NULL)||($newPword2 === "" )){ return false;}
if ($newPword1 != $newPword2) {
  $result["ERROR"]="1";
  $result["DETAILS"]="Your new password and the confirmation must match!";
  exit();
}
try { 
    $adldap = new adLDAP(); 
} catch (adLDAPException $e) {
    $result["ERROR"]="1";
    $result["DETAILS"]="An error occurred in adLDAP";
    echo json_encode($result);
    exit();
}

$userinfo = $adldap->user()->info($username, array("givenname","dn","lockouttime"));
$res = $userinfo[0]["lockouttime"];
$userDN = $userinfo[0]["dn"];
$firstName = $userinfo[0]["givenname"];
$authUser = $adldap->authenticate($username,$currentPword);
if ($authUser){
    try {
        $adminUsername = $domain."\\".$adminUsername;
        $srvDN = "LDAP://".$server."/";

        try {
            $ADSI = new COM("LDAP:");
        } catch (exception $e){
            $result["ERROR"]="1";
            $result["ERRORmsg"]=$e->getMessage();
            echo json_encode($result);
            exit();
        }
        try {
            $user = $ADSI->OpenDSObject($srvDN.$userDN, $adminUsername, $adminPassword, 1);
        } catch (exception $e){
            $result["ERROR"]="2";
            $result["ERRORmsg"]= $e->getMessage();
            echo json_encode($result);
            exit();
        }
        try { //set password
            if ($user){
                $result["object"]="Success";
            } else {
                $result["object"]="Failed";
            }
            $user->SetPassword($newPword1);  //line:114 -> error occurring on this line
            $user->SetInfo();
            $result["ERROR"]="0";
            $result["DETAILS"]="Thank you $firstName[0]<br><strong>Your password has been changed</strong><br><br>This may take up to 30 minutes to take effect depending on your location";
        } catch (exception $e) {
            $result["ERROR"]="3";
            $result["ERRORmsg"]=$e." - ".$e->getMessage();
            $result["DETAILS"]="An Error Occurred.";
        }
        unset($user);
        unset($ADSI);
    } catch (exception $e){
        $result["ERROR"]="1";
        $result["DETAILS"]="An Error Occurred in the ADSI COM";
        echo json_encode($result);
        exit();
    }
} else {
    if ($res[0] != "0"){
        $result["ERROR"]="1";
        $result["DETAILS"]="Im sorry $firstName[0].<br>Your account is now locked.  Please contact the IT Service Desk for advice";
    } else {
        $result["ERROR"]="1";
        $result["DETAILS"]="Im sorry $firstName[0].<br>Your current password is incorrect";
    }
} 
```

在测试中`$result["object"]`返回“成功”。但是代码好像失败就`$user->SetPassword($newPword1);`行了。

返回的错误是：

```
ERROR -> "3"
object -> "Success"
ERRORmsg -> "exception 'com_exception' with message '<b>Source:</b> Unknown<br/><b>Description:</b> Unknown' in C:\inetpub\wwwroot\<path>\<filename>.php:114
Stack trace:
#0 C:\inetpub\wwwroot\<path>\<filename>.php(114): variant->SetPassword('P@ssw0rd')
#1 {main} - <b>Source:</b> Unknown<br/><b>Description:</b> Unknown"
DETAILS -> "An Error Occurred." 
```

上面的代码位于 IIS Web 服务器上的 php 文档中，由用户通过 https 的可查看页面调用

你能提供任何建议或指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:55:52.153

我正在做几乎相同的事情，现在已经开始工作了，至少在针对服务器 2k8R2 DC 时。

我不确定你为什么会失败，但我发现有几件事很有帮助：

1) 在您的 catch() 处理程序中检索从 SetPassword() 返回的错误，处理并显示如下

```
$rawErr = $e->getCode();
$processedErr = $rawErr + 0x100000000;
printf( 'Error code 0x%x', $processedErr ); 
```

然后看看你能不能在[这里](http://msdn.microsoft.com/en-us/library/aa772195%28v=vs.85%29.aspx)找到它。您可能还会发现[这](http://www.selfadsi.org/errorcodes.htm)很有帮助。

2) 尝试将 SetPassword() 调用更改为 ChangePassword()。这要求您也输入旧密码，但对 DC 的权限要求不那么严格。如果您可以使其正常工作，则可能表明您使用 SetPassword() 的问题是您用于在 OpenDSObject() 调用中进行身份验证的管理员帐户在目标域上没有足够的权限。

关于 ChangePassword() 的警告是，与 SetPassword() 不同，密码策略是严格执行的。因此，您需要考虑最小密码年龄和复杂性以及历史记录等因素。我对最后一个不满意。

祝你好运，伊恩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-15T17:18:22.093

我发现您使用的操作系统对使用此代码有直接影响。

我正在使用本地版本的 IIS（Windows 7 Enterprise、IIS 7.5）在我的桌面上进行开发工作，并且一直遇到这个未知错误。

但是，一旦我在实际服务器（Windows Server 2008 R2）上测试了我的 ADSI 密码重置代码，它就可以完美运行。

* * *

**供参考：** 我得到的错误代码（使用 Ian 的答案）是 0x80020009，这似乎与这个问题有关：（[注册 dll 返回 0x80020009 错误](https://stackoverflow.com/questions/2727563/registering-a-dll-returns-0x80020009-error)）

因此，出现问题的地方似乎比 ADSI 和 PHP/COM 更深。

**注意：** 像 ChrisM 一样，我能够使用 ADSI 连接来查询信息，只有在我尝试使用 SetPassword() 时才会发生故障

# apache-flex - 无法切换状态 - flash builder

> ID：14011627
> 
> 赞同：0
> 
> 时间：2012-12-23T14:11:16.383
> 
> 标签：apache-flex, flash-builder, state

我制作了一个表格供用户注册。现在我的问题是当用户填写正确的信息并按下按钮提交时，状态不会改变。

```
[Bindable]
        private var validatorArr:Array;

        private function init():void {
            validatorArr = new Array();
            validatorArr.push(Name_stringValidator);
            validatorArr.push(Surname_stringValidator);
            validatorArr.push(email_emailValidator);
            validatorArr.push(Homeadress_stringValidator);
            validatorArr.push(homeCity_stringValidator);
            validatorArr.push(Postcode_NumberValidator);
        }

        private function validateForm(evt:MouseEvent):void {
            var validatorErrorArray:Array = Validator.validateAll(validatorArr);;
            var isValidForm:Boolean = validatorErrorArray.length == 0;
            if (isValidForm) {
                this.currentState = "Shoppingstate";

            } else {
                this.currentState="Loginstate";
            }
        } 
```

我没有错误。但是在填写表格后，Loginstate 不会更改为 Shoppingstate。

# php - 如何将变量的内容从 Javascript 发送到 HTML？

> ID：14011628
> 
> 赞同：-2
> 
> 时间：2012-12-23T14:11:20.760
> 
> 标签：php, javascript, html, jquery-plugins

我想用 Javascript 变量填充文本值：

```
<input type="text" name="abc" "  id="abc" value=""/> 
```

就像在 PHP 中所做的那样。

```
<input type="text" name="abc"  id="abc" value="<?php echo "$str[5]";?>"/> 
```

但如果我使用 Javascript：

```
document.getElementById('abc').value = str[5]; 
```

或 jQuery：

```
$("#abc").data(str[3], $("#abc").val(str[5])); 
```

我可以正确填充文本区域，但这与 PHP 示例不同。如何将变量的内容从 Javascript 发送到 HTML？

请原谅我试图更好地解释我想更改引号中的值

```
value="" 
```

但是通过 javascript 就像从 php 获得一样容易

非常感谢您

卢卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T14:30:02.337

在您创建 HTML 的 PHP 中，让 PHP 像这样打印出变量。

JavaScript：

```
document.getElementById('abc').value = <?php echo "$str[5]";?>; 
```

jQuery：

```
$("#abc").data(str[3], $("#abc").val(<?php echo "$str[5]";?>)); 
```

# php - 依赖注入。感觉就像我不止一次注入同一个对象

> ID：14011629
> 
> 赞同：1
> 
> 时间：2012-12-23T14:11:23.120
> 
> 标签：php, oop

在我自己编码的应用程序（MVC）中，我使用依赖注入来传递对象的依赖关系。我不想使用单例模式或依赖注入容器。

当应用程序启动时，它有一些像这样实例化重要对象的程序代码：（它加载的对象比下面的多，但它们应该足以解释我的意思）

```
/*
* ------------------------------------------------------
* INSTANTIATE THE APPLICATION CLASS
* ------------------------------------------------------
*/
$app = new App();
$app->environment('development');

/*
* ------------------------------------------------------
* INSTANTIATE THE CONFIGURATION CLASS
* ------------------------------------------------------
*/
$config = new Config();

/*
* ------------------------------------------------------
* INSTANTIATE THE LOGGER CLASS
* ------------------------------------------------------
*/
$logger = new Logger($config);

/*
* ------------------------------------------------------
* INSTANTIATE THE LOCALE CLASS
* ------------------------------------------------------
*/
$locale = new Locale();

/*
* ------------------------------------------------------
* INSTANTIATE THE HTTP RESPONSE CLASS
* ------------------------------------------------------
*/
$httpResponse = new HttpResponse();

/*
* ------------------------------------------------------
* INSTANTIATE THE ROUTER CLASS
* ------------------------------------------------------
*/
$router = new Router($config, $logger, $httpResponse);
$router->route(); 
```

如您所见，$logger 对象依赖于 $config 对象，我将 $config 对象注入到 $logger 对象构造函数中。

现在，当我实例化 $router 对象时，您可以看到它有 3 个依赖项（$config、$logger 和 $httpResponse）。

我只是觉得 $logger 对象如何将 $config 对象保存在其中很奇怪，所以在任何我将 $config 和 $logger 对象分别注入到 $router 对象中的对象中的任何地方，我都觉得我正在注入 $config 对象两次这是错误的。

显然，当我拥有越来越多的对象和依赖项时，我似乎将同一个对象注入超过两三次，这真的会让我怀疑我是否做错了。

我在做什么好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T14:15:11.147

没关系，因为`$router`不需要也不应该知道，无论是否`$logger`知道`$config`自己。想象一下，你想用一个假人替换记录器

```
class NullLogger { /* "Do nothing" code*/ } 
```

这个类不需要配置，所以当`$router`使用 的配置时`$logger`，它现在坏了:)

除此之外，无论如何，当您仅传递与类相关联的配置时，它会更干净，`new Logger($config['logger']);`而不是`new Logger($config);`. 为什么每个人都必须现在的一切？

# matlab - matlab热图错误下标索引必须是实数正整数

> ID：14011630
> 
> 赞同：1
> 
> 时间：2012-12-23T14:11:24.033
> 
> 标签：matlab, heatmap

[我正在尝试使用http://www.mathworks.com/matlabcentral/fileexchange/24253-customizable-heat-maps/content/html/heatmap_examples.html](http://www.mathworks.com/matlabcentral/fileexchange/24253-customizable-heat-maps/content/html/heatmap_examples.html)中描述的matlab热图功能

但是，即使我使用他们的数据，即 spreads_small 和 labels_small，我也面临以下错误：

```
 heatmap(spreads_small(1:5,1:7), labels_small(1,1:7), labels_small(1:5));

    ??? Subscript indices must either be real positive integers or logicals.
    Error in ==> heatmap>setAxesLabels at 280
    set(p.hAxes,'YTick',ytick,'YTickLabel',ylab(ytick));
    Error in ==> heatmap at 111
    [p, xlab, ylab, hXText] = setAxesLabels(p, xlab, ylab); 
```

我不知道为什么会出现这个错误，我已经尝试使用这个热图将近 2 个小时没有任何成功！可以请尽快帮助我吗？

# android - 构建一个简单的键盘记录器 Android 应用程序：虚拟键盘的可访问性研究

> ID：14011633
> 
> 赞同：3
> 
> 时间：2012-12-23T14:11:42.737
> 
> 标签：android, android-intent, android-sqlite, keylogger

我一直在尝试寻找一些资源，以便为 Android 平台上的可访问性研究项目（APILevel 17）构建 Keylogger Android 应用程序。

应用程序的界面将是一个简单的**“EditText”**字段，用户使用*虚拟屏幕键盘*在其中键入[从输入设置中选择所需的键盘后]。

我的目标是为我的应用程序创建一个 Keylog 数据库（使用 SQLite DB，因为我对此很熟悉，但是一个简单的 csv 文件 DB 也可以很好地工作！:)），如下所示：（ ![在此处输入图像描述](../Images/5e3c6afa4b831af3c63ff97eeeacc8bf.png)插图）

因此，我需要在输入新条目后立即记录每个字符以及时间戳。我一直在尝试使用“ **[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)** ”类

```
 EditText KeyLogEditText = (EditText) findViewById(R.id.editTextforKeyLog);
    TextWatcher KeyLogTextWatcher = new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) 
        {   }

        @Override
        public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,int arg3) 
        {   }

        @Override
        public void afterTextChanged(Editable arg0) {
    // TODO Log the characters in the SQLite DB with a timeStamp etc.
    // Here I call my database each time and insert an entry in the database table. 
    //I am yet to figure out how to find the latest-typed-character by user in the EditText 

        } 
```

我的问题是：

1.  这是实现这个的正确方法吗？
2.  我可以获取与时间一起键入的恰好一个字符并将其插入到 SQLite DB 中，以便稍后获取和分析吗？
3.  或者[onKeyUp](http://developer.android.com/reference/android/view/KeyEvent.Callback.html)方法会更有用吗？[我还没有使用过尝试过的方法，所以如果有人能指出我使用它来构建键盘记录器，如果这更简单的话，那就太好了！]

*提前感谢任何可以以任何方式帮助我的人！

阿迪*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T15:03:40.553

现在你的 TextWatcher 没有绑​​定到 EditText

你应该`addTextChangedListener(TextWatcher yourWatcher)`在你的 EditText 上使用。这是我的例子：

```
 smsET.addTextChangedListener(new TextWatcher() {

        public void onTextChanged(CharSequence s, int start, int before, int count) {
        Log.d(TAG, "onTextChanged start :"+start +"  end :"+count);}
        public void beforeTextChanged(CharSequence s, int start, int count,int after) {
            Log.d(TAG, "beforeTextChanged start :"+start +"  after :"+after);
        }

        public void afterTextChanged(Editable s) {
                int lastPosition = s.length()-1;
            char lastChar = s.charAt(lastPosition);
            Log.d(TAG, "afterTextChange last char"+lastChar );
        }

    }); 
```

在您的代码中应该是这样的：

```
KeyLogEditText.addTextChangeListener(KeyLogTextWatcher ); 
```

此 Watcher 中包含的每个方法都是通过从键盘输入每个符号来触发的。由于您在输入后获得位置，因此您可以轻松获得输入的字符

要存储您提到的数据，SharedPreferences 将比 DB 更快。（许多写入数据库）如果您的目标至少是 api 11，您可以简单地使用 StringSet [Editor.putStringSet](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#putStringSet%28java.lang.String,%20java.util.Set%3Cjava.lang.String%3E%29)如果您的目标较低，它也是可能的，例如：[http ://androidcodemonkey.blogspot.com/2011/07/store -and-get-object-in-android-shared.html](http://androidcodemonkey.blogspot.com/2011/07/store-and-get-object-in-android-shared.html)

.

# c++ - linux 替代 casablanca

> ID：14011636
> 
> 赞同：2
> 
> 时间：2012-12-23T14:11:45.010
> 
> 标签：c++, rest, asynchronous, webserver

[微软的Casablanca](http://msdn.microsoft.com/en-us/devlabs/casablanca.aspx "卡萨布兰卡")库是否有 Linux 替代品。我们将使用该库来开发 Web 服务器。库应该用 C++ 编写，支持 REST 服务并基于异步操作。我们有一个 D 替代方案：[vibe.d](http://vibed.org/)，但 C++ 库会更好，因为我们在 C++ 方面更有经验。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T06:49:20.543

我认为 Casablanca 的目标是 Linux 和 windows，尽管当前的 devlab 版本只是 windows。Linux 应该很快就会成为其中的一部分，请随时在 Casablanca 论坛上提问。

# windbg - 如何告诉windbg将调试进程的标准输入连接到某个文件？

> ID：14011637
> 
> 赞同：4
> 
> 时间：2012-12-23T14:11:45.600
> 
> 标签：windbg, stdin

我正在从调试器启动一个应用程序。如何连接某个文件作为被调试进程的标准输入？

**编辑**

这是我使用的命令行：

```
windbg -logo c:\dumps\dbg.log -QY -awow64exts -c "!sw;g;g" c:\dev\LocalDriverProxyConsole.exe 
```

LocalDriverProxyConsole.exe 需要标准输入上的一些输入，但我想从文件中提供它。当应用程序直接运行时，这是一个微不足道的重定向，但是如果我通过windbg运行它该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T15:58:06.083

```
windbg -logo c:\dumps\dbg.log -QY -awow64exts -o cmd -c "c:\dev\LocalDriverProxyConsole.exe < 1.txt" 
```

# zurb-foundation - Zurb Foundation 3 五柱

> ID：14011639
> 
> 赞同：0
> 
> 时间：2012-12-23T14:11:54.323
> 
> 标签：zurb-foundation

我正在测试基础 3 框架，想知道如何设置一行五篇文章。

有没有人有解决这个问题的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:33:01.253

一种解决方案是使用两列并将最后一列标记为结尾。

> 如果您的行没有最多 12 列的计数，您可以标记最后一列`class="end"`以覆盖该行为。[[资源]](http://foundation.zurb.com/docs/grid.php)

```
<div class="row">
  <div class="two columns">
    article 1
  </div>
  <div class="two columns">
    article 2
  </div>
  <div class="two columns">
    article 3
  </div>
  <div class="two columns">
    article 4
  </div>
  <div class="two columns end">
    article 5
  </div>
</div> 
```

或者，如果您需要使用所有空间，您可以使用[块网格](http://foundation.zurb.com/docs/grid.php#block-grids)：

> 块网格由链接到它的`ul.block-grid`样式`#-up`组成。您可以控制 Scss 设置文件或定制器中有多少。这些对于应用程序生成的阻塞内容来说是理想的，因为它们不需要行甚至元素数来正确显示。

```
<ul class="block-grid five-up">
  <li>article 1</li>
  <li>article 2</li>
  <li>article 3</li>
  <li>article 4</li>
  <li>article 5</li>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-28T12:50:16.463

这应该适用于 Foundation 5（也许 3）。诀窍是偏移第一列并结束最后一列。

```
<nav>
    <div class="row">
        <div class="column small-2 small-offset-1">
            <a>Link</a>
        </div>
        <div class="column small-2">
            <a>Link</a>
        </div>
        <div class="column small-2">
            <a>Link</a>
        </div>
        <div class="column small-2">
            <a>Link</a>
        </div>
        <div class="column small-2 end">
            <a>Link</a>
        </div>
    </div>
</nav> 
```

希望它对某人或未来的我有所帮助。

# css - 在 IE 上引导自定义宽度

> ID：14011641
> 
> 赞同：0
> 
> 时间：2012-12-23T14:11:58.490
> 
> 标签：css, twitter-bootstrap

我喜欢使用引导程序，但有时跨度的宽度不适合我，我需要创建具有自定义宽度的自定义 div（即，如果我不喜欢排水沟，或者需要有 5 个跨度等）。

我这样做的方法是定义一个宽度，而不是去每个媒体查询，并在那里定义一个不同的宽度。

但是，当我在 IE 中访问时，引导程序默认为 1024 宽度，并且我的自定义 div 不会调整。

这是一个例子——

[http://dentasignclients.com/sawyer](http://dentasignclients.com/sawyer)

正文中有3列医生的图片，在IE中下拉

我的问题是，当有人在 IE 中查看它时，如何定义自定义 div 的宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:58:36.670

IE 中的媒体查询仅在 IE9 或更高版本中受支持，这就是为什么您没有看到它按预期进行调整的原因。 [我可以使用 CSS3 媒体查询吗](http://caniuse.com/css-mediaqueries)

您必须添加第三方库，如[css3-mediaqueries-js](http://code.google.com/p/css3-mediaqueries-js/)才能使其与旧版 IE 浏览器一起使用。

# javascript - 如何从用户代理字符串中找出 Android 设备（4.x 版本）

> ID：14011642
> 
> 赞同：2
> 
> 时间：2012-12-23T14:11:58.380
> 
> 标签：javascript, android, ruby, browser

Android 设备是用户代理字符串的一部分：

```
Mozilla/5.0 (Linux; U; Android 4.0.4; en-gb; GT-I9100 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30

Opera/9.80 (Android 4.0.3; Linux; Opera Mobi/ADR-1212030829) Presto/2.11.355 Version/12.10

Mozilla/5.0 (Linux; U; Android 4.1.1; en-us; SAMSUNG-SGH-I317 Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30 
```

但是，在拆分字符串时，设备可能驻留在不同的索引中`;`（有时它不存在）。有没有一种简单的方法可以在 Javascript/Ruby 中获取**设备名称？**

**更新：**澄清一下：我有兴趣获取设备名称，而不是 Android/版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T16:31:14.557

如果它不存在，就没有办法让它存在.. 如果它是“Android xyz;”的形式，正则表达式是你的朋友

假设“user_agent”包含用户代理字符串：

红宝石，例如

```
user_agent[/Android (.*?);/] 
```

变量 $1 将包含版本。

Javascript

```
var version = user_agent.match("Android (.*?);")[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T17:36:38.803

如果您只需要一种方法来知道它是否是 Android 设备，那么 Javascript 代码可能很简单：

```
function isAndroid() {
    var ua = navigator.userAgent.toLowerCase();
    return (ua.indexOf("android") > -1);
} 
```

如果您也对版本感兴趣，请尝试以下 Javascript 代码：

```
function getAndroidVersion() {
    var androidVersion = -1; // def value, for non-Android devices
    var ua = navigator.userAgent.toLowerCase();
    var androidIndex = ua.indexOf('android');

    if(androidIndex != -1) {
        var versionStartIndex = androidIndex + 8;
        var versionEndIndex = ua.indexOf(';', versionStartIndex);

        androidVersion = parseFloat(ua.slice(versionStartIndex, versionEndIndex));
    }

    return androidVersion;
} 
```

# c - 如何解决错误：预期标识符或“（”

> ID：14011644
> 
> 赞同：3
> 
> 时间：2012-12-23T14:12:10.247
> 
> 标签：c, cs50

我正在编程的东西有问题。我一遍又一遍地得到这个错误；

```
jharvard@appliance (~/Dropbox/pset1): make mario
clang -ggdb3 -O0 -std=c99 -Wall -Werror    mario.c  -lcs50 -lm -o mario
mario.c:23:5: error: expected identifier or '('
    do
    ^
mario.c:32:1: error: expected identifier or '('
do
^
2 errors generated. 
```

我在整个互联网上搜索，但找不到问题..删除 ; 在`int main(void)`没有帮助之后

这是我的代码：

```
#include <stdio.h>
#include <cs50.h>
#include <math.h>

int main(void);

    //Ask User for Height, and check

    int a, b, rows, height;
    int a = 0;
    int b = 0;
    int rows = 1;   

    do
    { 
        printf ("Height: ");
        height = GetInt();
    }
    while (height <=0 || height > 23);   

    //build half pyramid

    do
    {
        do
        {
            printf("r");
            a++;
        }
        while (a < height - rows);

        do
        {
            printf("#");
            b++;
        }
        while (b < rows + 1);

        printf("\n");
        rows++;

        while (rows <= height);
    } 
```

几天来我一直在尝试解决这个问题，但我就是想不通！

非常感谢您！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-23T14:17:21.093

```
int main(void); 
```

您刚刚声明了`main`. 您需要定义它并在该定义中添加代码。

```
int main()
{
   .....
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-23T14:21:00.927

你得到了 do/while 的嵌套循环。确保每个都以 do 开头，以 while 结尾。

看起来在文件末尾，“while”不正确。

```
printf("\n");
rows++;

while (rows <= height);
} 
```

那可能是您在 'while (rows <= height);' 之前错过了关闭的 '}'

正确的代码可能是：

```
int main(void)
{

    //Ask User for Height, and check

    int a, b, rows, height;
    a = 0;                    // <- removed int
    b = 0;                    // <- removed int
    rows = 1;                 // <- removed int

    do
    { 
        printf ("Height: ");
        height = GetInt();
    }
    while (height <=0 || height > 23);   

    //build half pyramid

    do
    {
        do
        {
            printf("r");
            a++;
        }
        while (a < height - rows);

        do
        {
            printf("#");
            b++;
        }
        while (b < rows + 1);

        printf("\n");
        rows++;
    }                             // <- add }
    while (rows <= height);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T14:25:35.520

```
int a, b, rows, height;
int a = 0;
int b = 0; 
```

在您的上述陈述中，多次重新声明并导致编译错误`a`。`b`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-23T14:16:05.980

主帖已编辑，答案很明确。

您的所有代码都在函数之外，因为您正在执行 int main(); 你在声明一个函数。请改用 {} 括号。

```
int main() {
    //Code here.
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-23T14:22:54.663

在 do 范围之外进行最后一段时间：

```
while (rows <= height); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-23T16:14:46.187

如果你不缩进你的代码，你（无论如何）应该这样做，*至少*在你写循环语句时一次写下开始和结束的大括号，然后再把任何代码放入循环体（它介于大括号）。它将使您免于将来遇到此类麻烦。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-06-04T03:57:21.060

如果反应原生项目....这是一个简单的问题。

您可以在 ios 中转到您的项目目标并检查构建、版本和构建标识符......他们可能在末尾有额外的空间，应该删除

希望能帮助到你。为我工作

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-12-05T19:47:26.923

那是因为你在后面加了一个分号`int main(void)`，我去过那里。

```
//               v
// int main(void);
int main(void) 
```

# java - 使用 EL 使用 foreach 遍历 arraylist

> ID：14011647
> 
> 赞同：2
> 
> 时间：2012-12-23T14:12:45.243
> 
> 标签：java, jsp, jakarta-ee, foreach, el

我有一门`language`具有功能`ID`和`Name`. 我有另一个类`Language_List`作为`ArrayList<language> lang`成员变量。

在我的 JSP 页面中，我想访问`ArrayList<language> lang`使用 EL 和 For each Loop 的 Name 变量。

```
<c:forEach var="language" items="${languages.lang}">
  ${language}<br>
</c:forEach> 
```

但是，它不显示蚂蚁结果，智能感知也不起作用。任何可以帮助我解决此问题的人： 语言是一个 Bean 变量，包含来自数据库的语言列表 我试过这个并得到了这个

```
 <b>${languages.lang}</b>
HTML 
```

**[sakila.language@f1541c, sakila.language@63c8fabf, sakila.language@1fc644c7, sakila.language@11cd751d, sakila.language@47c3cc0c, sakila.language@7894ca3, sakila.language@47066532, sakila.language@74ddda0b, sakila .language@1116441e, sakila.language@4cd21655, sakila.language@74b84dd9, sakila.language@6fff1d6c, sakila.language@55e4d6e5, sakila.language@22d88071, sakila.language@33d88c96, sakila.language@4df5e671, sakila.language @4aec2cb3, sakila.language@576ac232, sakila.language@76a6dbd7, sakila.language@44ab3d1c, sakila.language@46391c7c, sakila.language@4f7d34e8, sakila.language@251c941d, sakila.language@77400ef3]**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:20:40.147

EL 不访问对象的字段。它访问对象的 bean 属性。这意味着`${languages.lang}`转换为对 的调用`languages.getLang()`。

如果你没有这样的吸气剂，你会得到一个例外。如果它不显示任何内容，可能是`languages`因为它为 null，或者因为它的`lang`列表为 null 或为空。为了证实或证实这些猜测，我们需要查看创建和填充 bean 及其语言列表的代码，以及将其存储在何处以便从 JSP 访问它的位置。

另一种可能是您忘记在 JSP 的开头声明核心标记库。要确认或确认，请粘贴 JSP 的代码，以及 JSP 生成的 HTML 代码（在浏览器中使用*查看页面源代码）*

# javascript - 如何包含多个 Javascript 文件？

> ID：14011651
> 
> 赞同：1
> 
> 时间：2012-12-23T14:13:14.177
> 
> 标签：javascript

我想在一个画布上使用更多的 Javascript 文件，但我无法连接它们。例如，我想编写一个包含所有函数的 Javascript 文件和另一个正在使用它们的 Javascript 文件。

给我一个指南，我怎样才能建立这种联系？

谢谢。

这是第一个 javascript 文件：

```
var canvas = null;
var ctx = null;

window.onload = function () {
    canvas = document.getElementById('myCanvas');
    ctx = canvas.getContext('2d');

    line (100,100,300,300);
} 
```

这是第二个文件：

```
function line (x1,y1,x2,y2) {
    ctx.beginPath();
    ctx.moveTo(x1,y1);
    ctx.lineTo(x2,y2);
    ctx.stroke();
} 
```

这是我的 html 文件：

```
<!DOCTYPE html>

<html>
<head>
    <title>Tutorialok</title>
    <script type="text/javascript" src="CanvasElement.js"></script>
    <script type="text/javascript" src="line.js"></script>
    <style>
        #myCanvas {
            border: 1px solid #9C9898;
        }
    </style>
</head>

<body>
    <canvas id="myCanvas" width="800" height="600">
        Sorry your browser Does not support canvas element!
    </canvas>

</body>
</html> 
```

第一个文件找不到第二个文件功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T14:27:13.383

通过`Objects`. 我不推荐所有函数都存在于一个文件中的模式，但这是您可以使用的想法。您必须在 file2.js 执行任何操作之前加载 file1.js。

```
// file1.js
window.namespace = window.namespace || {};

window.namespace.fns = {
    foo: function () {}
};

// file2.js
window.namespace.fns.foo(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T14:54:46.157

如果您期望函数提升，我认为这不会在脚本文件之间起作用，因为每个文件都是独立评估的。在 CanvasElement.js 加载时切换脚本标签，以便行在范围内。

否则，全局命名空间将在链接脚本之间共享。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T14:31:45.810

js文件1

```
var f1 = function(){};
var f2 = function(){} 
```

js文件2

```
 var s1 = f1();
 var s2 = f2(); 
```

在 html 页面上使用它

```
<script src="path/jsFile1.js"></script>
<script src="path/jsFile2.js"></script> 
```

# ios - 自定义类（委托集）中未调用 textFieldShouldBeginEditing

> ID：14011657
> 
> 赞同：1
> 
> 时间：2012-12-23T14:14:43.227
> 
> 标签：ios, xcode, delegates, uitextfield, uitextfielddelegate

我有一个这样的自定义类：

```
@interface formParser : NSObject <UITextFieldDelegate> {
.... 
```

在 .m 中，我创建了一个 UITextField 元素，如下所示：

```
UITextField *ui = [[UITextField alloc] initWithFrame:CGRectMake(left, top, width, height)];
[ui setDelegate:self];
[ui setPlaceholder:[dict_elementInfo objectForKey:@"placeholder"]];
[ui setBorderStyle:UITextBorderStyleLine];
[view addSubview:ui]; 
```

和

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
NSLog(@"should begin");
return NO;
} 
```

我的问题是 shouldbegin 永远不会被调用。当我在“普通” UIViewController 类上尝试这种技术时，它工作得很好，但是在我的自定义对象中这样做它从来没有调用过。任何人都可以找出原因吗？

我的自定义类调用如下：

```
formParser *fParse = [[formParser alloc] init];
UIView *view_formBackground = [fParse viewOfPlist:@"form" initSize:CGRectMake(0, 0, scrollView.contentSize.width, scrollView.contentSize.height)];
view_formBackground.backgroundColor = [UIColor whiteColor];

//add views to main view
[scrollView addSubview:view_formBackground];
[self.view addSubview:scrollView]; 
```

此外，在 formparser.m 中 viewofplist 如下：

```
-(UIView *)viewOfPlist:(NSString *)filename initSize:(CGRect)size
{
ypos_element_left = 40; ypos_element_right = 40;

view = [[UIView alloc] initWithFrame:size];

//load plist
NSString *path = [[NSBundle mainBundle] pathForResource:filename ofType:@"plist"];
NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path];
rootArray = [dict objectForKey:@"form"];

//loop door alle UI entries in de dict.
for (NSDictionary *dict_UIElement in rootArray)
{
    NSString *UIType = [dict_UIElement objectForKey:@"type"];
    if ([UIType isEqualToString:@"ui_empty"])       [self handle_uiempty:dict_UIElement];
    if ([UIType isEqualToString:@"ui_multiselect"]) [self handle_uimultiselect:dict_UIElement];
    if ([UIType isEqualToString:@"ui_label"])       [self handle_uilabel:dict_UIElement];
    if ([UIType isEqualToString:@"ui_textfield"])   [self handle_uitextfield:dict_UIElement];
    if ([UIType isEqualToString:@"ui_choicefield"]) [self handle_uichoicefield:dict_UIElement];
    if ([UIType isEqualToString:@"ui_calendar"])    [self handle_uicalendar:dict_UIElement];

}

return (view); 
```

}

谢谢回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:30:34.407

您的其中一项分配是否超出范围并被 ARC 清理？

关于响应者链如何工作的有用链接..

[http://developer.apple.com/library/ios/#documentation/general/conceptual/Devpedia-CocoaApp/Responder.html](http://developer.apple.com/library/ios/#documentation/general/conceptual/Devpedia-CocoaApp/Responder.html)

# java - Java NIO SocketChannel 读取预定义字节数

> ID：14011666
> 
> 赞同：0
> 
> 时间：2012-12-23T14:15:52.877
> 
> 标签：java, nio, bytebuffer, socketchannel

我有一个 Java NIO 套接字服务器。

服务器正在`JSONObjects`从远程客户端获取。我正在使用该`SocketChannel.read(ByteBuffer)`方法从频道中读取。每条消息都以 '\n' 结尾，这标志着当前消息的结束。

我的问题是，有时该`read()`方法会读取更多字节并到达 '\n'.. 有没有办法让我从`SocketChannel`唯一读取直到找到 '\n' ？我想过可能逐字节读取（我只是找不到有关如何实现它的文档..）？

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T01:37:34.720

处理 ByteBuffer 中的字节直到并包括 '\n'，因此缓冲区的位置是 '\n' 之后的第一个字节，然后调用[ByteBuffer.compact()](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html#compact%28%29)。任何超过 '\n' 的字节都将保留在缓冲区中，下一次读取将附加到它们。

# git - 在 PhpStorm 中从 Dropbox Master 创建新项目

> ID：14011667
> 
> 赞同：1
> 
> 时间：2012-12-23T14:15:55.070
> 
> 标签：git, dropbox, phpstorm

有人可以告诉我如何将位于我的 Dropbox 目录中的 Git 存储库添加为 PhpStorm 项目中的源/主库吗？

更具体地说：我在 Windows 系统上创建了 origin/master，现在我尝试在 Mac OS X 上导入它。但 using`~/Dropbox/repositories/myproject.git`似乎不被接受为存储库 Url，尽管测试按钮另有说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:30:17.803

虽然我不使用 GIT 也没有测试过，但这对我来说听起来像是一个错误。您是否已更新到最新版本（当前为 PhpStorm 5.0.4）。

您应该在问题跟踪器中创建问题； [http://youtrack.jetbrains.com/issues/WI](http://youtrack.jetbrains.com/issues/WI)

您是否尝试过使用 Dropbox 文件夹的*完整*路径而不是 ~ 前缀？

例如

```
 /Users/myshortusername/Dropbox/repositories/myproject.git 
```

我怀疑 ~ 混淆了 PhpStorm

# html - CSS3 过渡闪光

> ID：14011670
> 
> 赞同：1
> 
> 时间：2012-12-23T14:16:10.210
> 
> 标签：html, css, css-transitions

[有谁知道为什么会这样？](http://cl.ly/LnZb)

在所有的锚点上，我有：

```
-webkit-transition: all .2s ease-in-out;
-moz-transition: all .2s ease-in-out;
-o-transition: all .2s ease-in-out;
transition: all .2s ease-in-out; 
```

为什么会出现这种“闪光”？

## 更新

闪光，我的意思是H1从紫色变成白色的地方。

## 更新 2

似乎几乎所有锚链接都会发生。

对于徽标的示例，HTML 为：

```
<h1 class="logo"><a href="/">Test</a></h1> 
```

在 CSS 中我有：

```
a {
  text-decoration: none;
  color: white;
  -webkit-transition: all .2s ease-in-out;
  -moz-transition: all .2s ease-in-out;
  -o-transition: all .2s ease-in-out;
  transition: all .2s ease-in-out;
} 
```

h1 在标题中，对于标题，我有一些用于标题链接的 CSS：

```
.header a {
  color: white;
  text-shadow: 0 -1px rgba(0,0,0,0.2);
} 
```

对于 h1，我有：

```
h1 {
  margin: 0;
  float: left;
  font-family: "proxima-nova";
  font-size: 26px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 2px;
  height: 30px;
  line-height: 30px;
} 
```

# c# - 登录控件中的对象引用错误

> ID：14011671
> 
> 赞同：0
> 
> 时间：2012-12-23T14:16:24.767
> 
> 标签：c#, asp.net, nullreferenceexception

我有一个带有附加步骤（名字和姓氏）的登录控件。代码是这样的：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title>CreateUserWizard Extra</title>
</head>
<body>
<form id="form1" runat="server">
<div>
    <asp:CreateUserWizard 
    id="CreateUserWizard1"
    OnCreatedUser="CreateUserWizard1_CreatedUser"
    Runat="server" >
    <WizardSteps>
    <asp:WizardStep>
        <asp:Label
            id="lblFirstName"
            Text="First Name:"
            AssociatedControlID="txtFirstName"
            Runat="server" />
        <br />    
        <asp:TextBox
            id="txtFirstName"
            Runat="server" />
        <br /><br />
        <asp:Label
            id="lblLastName"
            Text="Last Name:"
            AssociatedControlID="txtLastName"
            Runat="server" />
        <br />    
        <asp:TextBox
            id="txtLastName"
            Runat="server" />
    </asp:WizardStep>
    <asp:CreateUserWizardStep />
    </WizardSteps>    
</asp:CreateUserWizard>    
</div>
</form>
</body>
</html> 
```

在后面的代码中：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Web.Configuration;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void CreateUserWizard1_CreatedUser(object sender, EventArgs e)
    {
        CreateUserProfile(CreateUserWizard1.UserName, txtFirstName.Text, txtLastName.Text);
    }

    private void CreateUserProfile(string userName, string firstName, string lastName)
    {
    string conString = WebConfigurationManager.ConnectionStrings["UserProfiles"].ConnectionString;
    SqlConnection con = new SqlConnection(conString);
    SqlCommand cmd = new SqlCommand("INSERT UserProfiles (UserName,FirstName,LastName) VALUES (@UserName,@FirstName,@LastName)", con);
    cmd.Parameters.AddWithValue("@UserName", userName);
    cmd.Parameters.AddWithValue("@FirstName", firstName);
    cmd.Parameters.AddWithValue("@LastName", lastName);
    using (con)
    {
        con.Open();
        cmd.ExecuteNonQuery();
    }
}
} 
```

但是当我运行该网站时，我得到了下一个错误：

你调用的对象是空的。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

```
Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error: 

Line 13:     private void CreateUserProfile(string userName, string firstName, string lastName)
Line 14:     {
Line 15:         string conString = WebConfigurationManager.ConnectionStrings["UserProfiles"].ConnectionString;
Line 16:         SqlConnection con = new SqlConnection(conString);
Line 17:         SqlCommand cmd = new SqlCommand("INSERT UserProfiles (UserName,FirstName,LastName) VALUES (@UserName,@FirstName,@LastName)", con);

Source File: c:\Users\User\Desktop\Vivilove\CreateUserWizardExtra.aspx    Line: 15 
```

我不知道发生了什么。请帮忙...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T14:22:30.510

鉴于错误消息，我怀疑这是引发异常的行：

```
string conString = WebConfigurationManager.ConnectionStrings["UserProfiles"].ConnectionString; 
```

`NullReferenceException`...如果您没有配置连接字符串，这肯定会给出`UserProfiles`。该`ConnectionStrings["UserProfiles"]`部分将返回`null`，然后当您取消对该`ConnectionString`属性的引用时，将引发异常。

您尚未显示配置文件，但这是首先要检查的 - 查看 ConnectionStrings 部分，并检查*确切*名称的值`UserProfiles`（可能存在细微的拼写错误，例如`UserProfile`）。

# c# - 输入字符串的格式不正确

> ID：14011673
> 
> 赞同：-2
> 
> 时间：2012-12-23T14:16:38.497
> 
> 标签：c#

```
public partial class addtheatre : System.Web.UI.Page
{
    bal objbal = new bal();
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
             DataSet ds = objbal.getid();
            int s;
            string d = "9T000";
            string c = ds.Tables[0].Rows[0][0].ToString();
            if (c == "")
            {
                s = 1;
                d = "9T000" + s;
            }
            else
            {

              s = Convert.ToInt32(c);
                s = s + 1;
                if (s < 999)
                {
                    d = "9T000" + s;
                }
                //s = Convert.ToInt32(c);
                else if (s == 1000)
                {
                    d = "T1000";
                }
                else if (s > 1000)
                {
                    d = "T1000" + s;
                }

            }
            TextBox1.Text = d.ToString();
        }
    }
} 
```

转换时显示为错误（输入字符串的格式不正确）。
在数据库中，我采取`d`了`varchar`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:19:22.550

我猜错误来自这里：

```
s = Convert.ToInt32(c); 
```

如果 的值`c`不是整数的字符串表示形式（例如`"123"`），您会在此处遇到异常。您可以在调试器中（例如在 Visual Studio 中）检查 的值`c`以查看问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T15:11:09.937

我猜错误来自这里：

试试下面的代码

```
int.TryParse(c,out s ); 
```

希望这会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T14:28:34.513

除了 Mark Byers 给出的 and 之外，
您可能应该使用
`int.TryParse(string)`or`int.Parse(string)`将字符串转换为 int。

# java - 注释中数组的安全性

> ID：14011684
> 
> 赞同：3
> 
> 时间：2012-12-23T14:18:28.120
> 
> 标签：java, security, annotations

我正在编写一个处理一些注释的软件。注释的参数之一是数组。一个对象找到这个数组并将它传递给另一个对象来处理它。然后 findbugs 开始尖叫我正在传递一个可能被恶意代码变异的私有数组。所以问题是：这是真的吗？可以在运行时更改注释参数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:20:35.950

这是真的：您传递对数组的引用，并且数组是可变的。被调用者可以修改这个数组。

您最好的做法是将该数组的副本而不是原始数组传递给被调用者，例如使用`Arrays.copyOf()`.

或者，您可能希望返回 a 而不是数组，`List`并使用`Collections.unmodifiableList()`包装器，因为这将避免不必要的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T15:11:27.320

通过反射返回的数组每次检索时都应该是一个新的副本，所以没有问题。

从移动代码或一般代码质量的角度来看，您应该期望返回的数组或作为参数传递给不受信任的方法的数组被恶意修改。同样在接收方，作为参数传递或从回调返回的数组可能会在以后被恶意修改。因此，在分发它们之前以及在接收它们时需要复制数组（甚至在任何验证之前）。

@fge 提到`List`s。将这些发送出去时，接收方无法修改不可修改的集合。接收收藏有点棘手。显然，拿一个不受信任的`List`东西包装起来是`unmodifiableList`行不通的。`new ArrayList<>(things)`是要走的路。不要尝试`clone`恶意`ArrayList`，因为您无法确定`clone`实际操作。

显然，如果您有一个可变对象数组，则需要复制数组和元素。

# ruby - 如何为用 Ruby 编写的 Ruby 命令行实用程序提供配置文件？

> ID：14011690
> 
> 赞同：2
> 
> 时间：2012-12-23T14:19:01.567
> 
> 标签：ruby, command-line, configuration-files

我有一个使用`GLI`框架用 Ruby 编写的命令行实用程序。我想在我的主目录中配置我的命令行实用程序，使用 Ruby 本身作为 DSL 来处理它（类似于`Gemfile`or `Rakefile`）。

我在文件夹 lib/myapp 中的类 ConfigData 中。该类看起来像以下方式：

```
class ConfigData
  @@data = {}

  class ConfigItem
    def initialize
      @data = {}
    end
    def missing_method(name, *args)
      @data[name] = args[0]
    end
  end

  def self.add(section)
    item = ConfigItem.new()
    yield item
    @@data[section]=item
  end

end 
```

现在，我想要的是配置文件，最好是 name `Myappfile`，在当前工作文件夹中，具有以下内容

```
add('section1') do |i|
  i.param1 'Some data'
  i.param2 'More data'
end 
```

当此代码包含在ConfigData`class`和`end`ConfigData 之间时，它工作正常。但现在我想把它放在我启动应用程序的工作文件夹中。

`class`我在 ConfigData和ConfigData之间尝试了 require('./Myappfile') `end`，但它对我不起作用。我试图阅读 rake 的源代码，但对我来说不是很清楚。

任何提示如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T15:08:37.313

要在实例的上下文中评估代码，这是您想要做的，您需要该`instance_eval()`方法。永远不要使用正常的 eval。曾经。无论如何，这里是你如何加载你的 fingi 文件并获取数据：

```
config = ConfigData.new
config.instance_eval(File.read("Myconfig"))
#Access configuration data here from the config object 
```

就这么简单。以这种方式加载对象后，您可以访问对象的值。

警告：这不是很安全。这实际上是一个巨大的安全漏洞。这是安全版本：

```
f = Fiber.new {str = File.read("Myconfig"); $SAFE = 4; config = ConfigData.new; config.instance_eval(str); Fiber.yield config}
confdata = f.resume
#Access configuration data here from confdata. 
```

这在（某种）沙箱中执行外部代码，因此它不能做任何卑鄙的事情。

* * *

另外，你为什么不直接使用 YAML 配置？除非配置需要运行类似 RUBY_VERSION 的代码`pwd`或访问 RUBY_VERSION，否则 YAML 更简单、更安全，而且更防故障。

# java - 在哪里提供 try catch 块

> ID：14011702
> 
> 赞同：0
> 
> 时间：2012-12-23T14:21:13.560
> 
> 标签：java

我正在尝试将文件从 windows server1 复制到另一个 windows server2 并且不确定将 try catch 块放在哪里。我想在通过弹出窗口或在 textArea 中显示进行复制过程时关闭 windows server1 或 windows server2 时通知用户，这是我的 swingworker 代码。提前致谢

```
class CopyTask extends SwingWorker<Void, Integer>
{
    private File source;
    private File target;
    private long totalBytes = 0;
    private long copiedBytes = 0;

    public CopyTask(File src, File dest)
    {
        this.source = src;
        this.target = dest;

        progressAll.setValue(0);
        progressCurrent.setValue(0);
    }

    @Override
    public Void doInBackground() throws Exception
    {
        ta.append("Retrieving info ... ");

        retrieveTotalBytes(source);
        ta.append("Done!\n");

        copyFiles(source, target);
        return null;
    }

    @Override
    public void process(List<Integer> chunks)
    {
        for(int i : chunks)
        {
            progressCurrent.setValue(i);
        }
    }

    @Override
    public void done()
    {
        setProgress(100);

    }
    private void retrieveTotalBytes(File sourceFile)
    {
        File[] files = sourceFile.listFiles();
        for(File file : files)
        {
            if(file.isDirectory()) retrieveTotalBytes(file);
            else totalBytes += file.length();
        }
    }

    private void copyFiles(File sourceFile, File targetFile) throws IOException
    {

        if(sourceFile.isDirectory())
        {

            if(!targetFile.exists()) targetFile.mkdirs();

            String[] filePaths = sourceFile.list();

            for(String filePath : filePaths)
            {
                File srcFile = new File(sourceFile, filePath);
                File destFile = new File(targetFile, filePath);

                copyFiles(srcFile, destFile);
            }

        }
        else
        {

            ta.append("Copying " + sourceFile.getAbsolutePath() + " to " + targetFile.getAbsolutePath() ); //appends to textarea
            bis = new BufferedInputStream(new FileInputStream(sourceFile));
            bos = new BufferedOutputStream(new FileOutputStream(targetFile));

            long fileBytes = sourceFile.length();
            long soFar = 0;

            int theByte;

            while((theByte = bis.read()) != -1)
            {
                bos.write(theByte);

                setProgress((int) (copiedBytes++ * 100 / totalBytes));
                publish((int) (soFar++ * 100 / fileBytes));
            }

            bis.close();
            bos.close();
            publish(100);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:32:02.657

可能发生异常的行在哪里？这是我找到任何异常的第一个地方。

通常，如果您的模块很小，您可以将模块中的`try`所有真实代码包装起来，并在最后捕获异常，特别是如果异常是致命的。然后您可以记录异常并向用户返回错误消息/状态。

但是，如果异常不是致命的，则策略不同。在这种情况下，您必须在引发连接异常的地方处理它，以便在连接返回时可以无缝恢复。当然，这是一个多一点的工作。

编辑 - 你可能想要在一个块`bis.close()`内确保它们被关闭。这可能很迂腐，但看起来很谨慎。`bos.close()``finally`

# php - 获取关联数组特定值

> ID：14011704
> 
> 赞同：-1
> 
> 时间：2012-12-23T14:21:47.463
> 
> 标签：php

我有数组关联，数组名称是 $monitorings。我试图通过使用函数 print_r 查看一个数组值，输出是这样的。

```
print_r($monitorings);
 //output
 master_monitoring_collection Object ( [position:protected] => 0 [storage:protected] =>   
 Array ( [0] => master_monitoring Object ( [table:protected] => master_monitoring     
 [values:protected] => Array ( [prvd_name] => Axis [prvd_status] => Y [prvd_lastprob]   
 =>[prvd_prob] => [prvd_traffic_sms] => [update_date] => 2011-11-26 22:54:39 ) ) [1] =>   
 master_monitoring Object ( [table:protected] => master_monitoring [values:protected]=> 
 Array ( [prvd_name] => Esia [prvd_status] => Y [prvd_lastprob] => [prvd_prob] => 
 [prvd_traffic_sms] => [update_date] => 2011-11-26 22:54:07 ) ) 
```

问题是我这样尝试时无法获得价值。

```
foreach($monitorings as $monitoring){
   echo $monitoring['prvd_name'];
} 
```

请帮我..

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:21:28.517

这似乎测试正常。我将属性更改为“公共”，这样我就可以避免编写另一个类。移动部件从第 80 行开始。

[http://www.laprbass.com/RAY_temp_casper.php](http://www.laprbass.com/RAY_temp_casper.php)

```
<?php // RAY_temp_casper.php
error_reporting(E_ALL);
echo '<pre>';

/* STRUCTURE WE ARE TRYING TO CREATE
master_monitoring_collection Object (
   [position:protected] => 0
   [storage:protected] => Array (
      [0] => master_monitoring Object (
         [table:protected] => master_monitoring
         [values:protected] => Array (
            [prvd_name] => Axis
            [prvd_status] => Y
            [prvd_lastprob] =>
            [prvd_prob] =>
            [prvd_traffic_sms] =>
            [update_date] => 2011-11-26 22:54:39 )
         )
      [1] => master_monitoring Object (
         [table:protected] => master_monitoring
         [values:protected]=> Array (
            [prvd_name] => Esia
            [prvd_status] => Y
            [prvd_lastprob] =>
            [prvd_prob] =>
            [prvd_traffic_sms] =>
            [update_date] => 2011-11-26 22:54:07
         )
      )
*/ // END OF STRUCTURE

Class Master_monitoring
{
    public $table, $values;
    public function __construct($values)
    {
        $this->table = 'master_monitoring';
        $this->values = $values;
    }
}

Class Master_monitoring_collection
{
    public $position, $storage;
    public function __construct($array)
    {
        $this->position = 0;
        $this->storage = $array;
    }
}

$a = array
( 'prvd_name'        => 'Axis'
, 'prvd_status'      => 'Y'
, 'prvd_lastprob'    => NULL
, 'prvd_prob'        => NULL
, 'prvd_traffic_sms' => NULL
, 'update_date'      => '2011-11-26 22:54:39'
)
;
$b = array
( 'prvd_name'        => 'Esia'
, 'prvd_status'      => 'Y'
, 'prvd_lastprob'    => NULL
, 'prvd_prob'        => NULL
, 'prvd_traffic_sms' => NULL
, 'update_date'      => '2011-11-26 22:54:07'
)
;

$aobj = new Master_Monitoring($a);
$bobj = new Master_Monitoring($b);
$mobj = array($aobj, $bobj);
$monitors = new Master_monitoring_collection($mobj);

// DOES IT LOOK RIGHT? (YES)
print_r($monitors);

// SHOW HOW TO USE THE ITERATOR
foreach ($monitors->storage as $mmo)
{
    var_dump($mmo->values['prvd_name']);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T14:42:31.957

如果你做两件事，你的输出会更容易阅读。首先，在打印之前回显预格式化标签，其次，考虑使用 var_dump() 而不是 print_r() 因为 var_dump() 将为您提供数据类型特征以及可视化内容。

看来您有这样的结构。

```
//output
master_monitoring_collection Object ( 
   [position:protected] => 0 
   [storage:protected] => Array ( 
      [0] => master_monitoring Object (  
         [table:protected] => master_monitoring     
         [values:protected] => Array (  
            [prvd_name] => Axis 
            [prvd_status] => Y 
            [prvd_lastprob] => 
            [prvd_prob] => 
            [prvd_traffic_sms] => 
            [update_date] => 2011-11-26 22:54:39 ) 
         ) 
      [1] => master_monitoring Object ( 
         [table:protected] => master_monitoring 
         [values:protected]=> Array ( 
            [prvd_name] => Esia 
            [prvd_status] => Y 
            [prvd_lastprob] => 
            [prvd_prob] => 
            [prvd_traffic_sms] => 
            [update_date] => 2011-11-26 22:54:07 
         ) 
      ) 
```

您可能无法获取这些值，因为它们受到保护。你的 foreach() 指令的上下文很重要。它必须在类内部或类的扩展中才能访问受保护的对象。如果它位于可以看到受保护属性的上下文中，则您的迭代器可能如下所示：

```
foreach ($master_monitoring_collection->storage as $storage)
{
    foreach ($storage as $master_monitoring)
    {
        var_dump($master_monitoring->values['prvd_name']);
    }
} 
```

根据需要调整变量名称。祝你好运，~雷

# javascript - 如何在 jquery UI datepicker 中创建日期范围而不在主 datepicker 函数中再次调用 datepicker？

> ID：14011706
> 
> 赞同：1
> 
> 时间：2012-12-23T14:21:53.720
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-datepicker

选择范围时，jquery UI datepicker 有一个奇怪的问题。在提出问题之前，我正在研究许多其他人编写的代码。他们以优化的顺序包含了 jquery 工具和 UI，因此所有功能都可以正常工作。除了 jquery UI 之外的所有内容。我提到的原因是，我无法更新版本或切换库的顺序，因为它破坏了所有其他代码:(（但我确实确保 jquery、js、jquery UI 在任何地方都没有包含两次）

也就是说，问题是这样的 - 我想要两个日期，其中“截止”日期应该晚于“开始”日期。使用 jquery 站点中的以下代码，这应该很容易：

```
$(function() {
    $( "#from" ).datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 3,
        onClose: function( selectedDate ) {
            $( "#to" ).datepicker( "option", "minDate", selectedDate ); //BREAKS!
        }
    });
    $( "#to" ).datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 3,
        onClose: function( selectedDate ) {
            $( "#from" ).datepicker( "option", "maxDate", selectedDate ); //BREAKS!
        }
    });
}); 
```

问题是当我在我评论为“BREAKS！”的行中选择日期时代码中断。它根本没有检测到主 datepicker 函数中的第二个 datepicker 并给我错误 - SCRIPT438: Object doesn't support property or method 'datepicker'

因此，我阅读了以下[帖子](https://stackoverflow.com/questions/1274347/problem-with-jquery-datepicker-onselect)并决定按照以下方式进行操作。这可行，但显然我现在没有范围功能。

```
$(document).ready(function(){

$('#from').datepicker({
            changeMonth: true,
            changeYear: true,
            numberOfMonths: 1,
            showButtonPanel: true,
    onSelect: function(dateText, inst) { 
    $('[name=wmFrom]').val(dateText); //need this part for the search filters
    }

});
 $('#to').datepicker({
            changeMonth: true,
            changeYear: true,
            numberOfMonths: 1,
            showButtonPanel: true,
    onSelect: function(dateText, inst){ 
    $('[name=wmTo]').val(dateText); //need this part for the search filters
    }       
});
}); 
```

现在好了，我还在学习js和jquery。任何人都可以帮助我为此实现范围功能，而无需在日期选择器中调用/初始化日期选择器。我知道这个问题可能意味着库的版本或兼容性可能存在一些问题。但就像我说的那样，我真的无法摆脱它们或改变太多。任何想法/帮助将不胜感激..

* * *

更多信息-

这令人沮丧，因为在我之前工作的人以这种方式做事，而我所做的任何更改都会破坏不同的功能。这是一个内部应用程序，所以不能提供链接:(。

这就是我所说的 - 首先有一个头文件 php，它包含在我正在处理的问题文件的顶部。此标头具有指向 jquery 库的链接。包含 header.php 后，有指向 queryLoader.js、jquery.easing.1.3.js 的链接。然后有一堆代码，其中包含脚本和正文 html（这是与 datepicker 关联的 html 输入所在的位置）。然后他们链接 /full/jquery.tools.min.js、jquery.effects.core.js、jquery.ui.core.js、jquery.ui.widget.js、jquery.ui.datepicker、query.ui.tooltip。 js，jquery-ui.css。在此之后，有更多的脚本使用 $.tools.validator.fn 和 serializeObject() 等函数。

如果我假设它加载 jquery lib 两次并将 /full/jquery.tools.min.js 更改为 /tiny/jquery.tools.min.js 或 /all/jquery.tools.min.js 我收到以下错误：对象不支持带有 serializeObject() 等函数的行上的该属性或方法。当页面自行加载时我得到了这个。

如果我在所有 UI 类链接之后添加 /jquery.tools.min.js，我会得到：对象在输入的 datepicker 初始化时不支持属性或方法“datepicker”。当页面自行加载时我得到了这个。

我应该做谁:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-01T10:09:04.660

4 年多后我会尽力帮助你:)

```
$(document).ready(function(){
  //datapickerer creation... $('#to').datepicker({...

  $("#to").on( "change", function() { 
            $("#from").datepicker("option", "maxDate", getDate( this ));
  });
  $("#from").on( "change", function() { 
            $("#to").datepicker("option", "minDate", getDate( this ));
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T14:27:33.723

jQuery 工具的一个常见问题是它们的插件文件中包含完整的 jQuery.js 版本。如果 jQuery 工具在其他插件之后加载，这可能会导致问题。插件在其文件中包含完整的 jQuery 库是一种糟糕的做法……但 jQuery 工具团队认为这很棒。检查您使用的版本作为开始。

本质上，问题可以归结为用户没有意识到 jQuery 被加载了两次。在另一个已经注册插件的版本之上加载 jQuery 将清除这些插件。

使用浏览器控制台检查抛出的错误以帮助您进行故障排除

# c++ - 为什么它有效？C++ 内存管理

> ID：14011707
> 
> 赞同：5
> 
> 时间：2012-12-23T14:22:09.643
> 
> 标签：c++, memory-management

> **可能重复：**
> [为什么下面的代码没有崩溃，虽然我已经删除了对象？](https://stackoverflow.com/questions/1006214/why-the-below-piece-of-code-is-not-crashing-though-i-have-deleted-the-object)

今天我发现我对 C++ 内存管理一无所知。请看一下这段代码：

```
class A
{
 public:
     A(){std::cout << "constructor called" << this << std::endl;}
    ~A(){std::cout << "destructor called" << this << std::endl;}
      void test (){std::cout << "test" << this << std::endl;}
 };

 int main(int argc, char *argv[])
{
QCoreApplication a(argc, argv);

A *aa = new A();

delete aa;
aa->test();
aa->test();
aa->test();
std::cout << "still works\n";
return a.exec();
} 
```

为什么不崩溃？为什么尽管调用了析构函数，它仍然继续执行？当我调用`test`方法时，我会处理不再属于应用程序的内存。

更令人惊讶的是，即使我在`aa = NULL;`之后插入它仍然有效`delete aa;`。`test`方法被调用好了。我必须承认我完全糊涂了。如果没有效果，析构函数和分配 NULL 的目的是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-23T14:24:13.773

## 为什么这行得通？

有两种方法可以回答您的问题：

## 技术答案：

您的代码具有**未定义的行为**。
它取消引用 a`NULL`或`delete`ed 指针。根据 C++ 标准，两者都调用未定义的行为。它是否有效是没有意义的。
未定义的行为意味着任何行为都是可能的，它可能会或可能不会崩溃，但这意味着您的程序不能期望给出任何明确定义的输出。它只是意味着任何行为都是可能的，并且可能不一致或定义不明确。

## 实用答案：

它不会崩溃，因为编译器`this`在调用成员函数时实际上并没有取消引用。除非函数是`virtual`函数，否则编译器会将成员函数调用转换为通常的函数调用，方法是将`this`其作为第一个参数传递给函数。它可以这样做是因为编译器可以准确地确定在编译时调用哪个函数。所以实际上，通过 delete 或`NULL`指针调用成员函数不会取消引用`this`（*如果它`NULL`或`delete`ed*则无效）。此外，`this`只有在函数体内访问任何成员时才会取消引用。
在您的情况下，您永远不会访问函数体内的任何成员，因此它不会崩溃。
在你的函数中添加一个成员并取消引用它，它肯定会崩溃。

无论如何，在实际答案中所说的技术答案是高于一切的，因为标准是这样说的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T14:23:50.567

> 为什么不崩溃？

您通过取消引用已删除的指针来调用**未定义的行为。**未定义的行为意味着您的程序可以做*任何事情*。任何事情都包括不崩溃。

如果未定义的行为总是意味着您的程序立即崩溃，那么调试和修复将很容易。未定义行为最令人讨厌的问题之一是，当您测试程序时，程序看起来可以正常工作，然后当您将其发送给客户时，他们会出现您无法重现的异常行为。即使事情似乎在您的机器上运行，您也应该始终避免调用未定义的行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T14:24:23.057

那只是未定义的行为，其中包括发生大崩溃的可能性！

无需多说，但标准中的引用可能有助于**未定义行为**的含义：

### 1.3.24 未定义的行为

> behavior for which this International Standard imposes no requirements [ Note: Undefined behavior may be expected when this International Standard omits any explicit definition of behavior or when a program uses an erroneous construct or erroneous data. Permissible undefined behavior ranges from ignoring the situation completely with unpredictable results, to behaving during translation or program execution in a documented manner characteristic of the environment (with or without the issuance of a diagnostic message), to terminating a translation or execution (with the issuance of a diagnostic message). Many erroneous program constructs do not engender undefined behavior; they are required to be diagnosed. — end note ]

# android - GreenDao - 在运行时确定数据库大小

> ID：14011708
> 
> 赞同：1
> 
> 时间：2012-12-23T14:22:20.483
> 
> 标签：android, sqlite, greendao

我想知道如何获取我的数据库（当然是*** .sqlite 文件）大小（以字节为单位）？

我目前的做法（不起作用）是： new File(DataManager.getInstance().db.getPath()).length()

但我每次 53,676~ 时都会得到相同的数字，这与数据库的内容无关，即使它是空的，我也会得到这个数字。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T12:43:01.040

好的解决方案很简单，我最近检查数据库文件的方法很好。但我没有考虑到 greenDao 向数据库添加了另外 53 KB。所以一个空的 DB 大小将是 53± KB，并且在一些插入之后它会变得越来越大。

# html - IE外部css不是网页中的项目

> ID：14011715
> 
> 赞同：0
> 
> 时间：2012-12-23T14:23:05.360
> 
> 标签：html, css

好的，所以我有一个用于 IE 的外部 CSS 页面。

```
h1 {
font-family: 'Paytone One', sans-serif;
font-size: 40px;
position: absolute;
top:150px;
left: 200px;
color:#FC3B3B;
}

h2 {
font-family: 'Paytone One', sans-serif;
font-size: 30px;
position: absolute;
top:0px;
left: -100px;
color: black;
}
h3 {
font-family: 'Paytone One', sans-serif;
font-size: 20px;
position: absolute;
top:300px;
left: 400px;
}
image2 {
position: absolute;
top:0px;
left: 100px;
}
box1 {
width: 100%;
height: 5px;
background-color:  #FC3B3B;
position: absolute;
top:0px;
left: 0px;
}
p {
position: absolute;
top:0px;
left: 0px;
font-size: 15px;
font-family: arial;
color: #585858;
} 
```

但是，我只能更改 h1 中的颜色。我无法更改 h1 中的位置。关于其余的项目，我无法改变任何东西。我需要更改项目的定位，因为它在 IE 中非常关闭。该网页在 Chrome、Firefox 和 Safari 中运行良好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T14:27:57.777

很有可能它们被更具体的选择器或加载 CSS 后出现的选择器覆盖。

最简单的解决方法是使用`!important`：

```
h1 {
    font-family: 'Paytone One', sans-serif;
    font-size: 40px;
    position: absolute !important;
    top: 150px !important;
    left: 200px !important;
    color: #FC3B3B;
} 
```

注意：如果您在其他地方有它，则不需要重复所有内容。

您的 CSS: 中还有一些其他错误：`image2`并且`box1`不是有效标签。您很可能想要`.image2`和`.box1`（或`#image2`在使用 ID 的情况下）。

# java - Jsoup 元素文本到 textview

> ID：14011718
> 
> 赞同：1
> 
> 时间：2012-12-23T14:23:39.297
> 
> 标签：java, android, parsing, jsoup

我想将我的元素显示到文本视图。

**代码**

```
 Document doc = Jsoup.parse(myURL);
   Elements name  = doc.getElementsByClass(".lNameHeader");
   for (Element nametext : name){
       String text = nametext.text();

       tabel1.setText(text); 
```

但它什么也没显示。

（我正在解析的网站[http://roosters.gepro-osi.nl/roosters/rooster.php?leerling=120777&type=Leerlingrooster&afdeling=12-13_OVERIG&tabblad=2&school=905](http://roosters.gepro-osi.nl/roosters/rooster.php?leerling=120777&type=Leerlingrooster&afdeling=12-13_OVERIG&tabblad=2&school=905)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T14:52:38.807

实际上它的类是：

```
lNameHeader 
```

请注意，第一个字母不是 1（一个） - 它是 l（字母 L）

所以应该是：

```
Elements name  = doc.getElementsByClass("lNameHeader"); 
```

还要注意 JSoup`getElementsByClass`方法不像 CSS 选择器那样工作 - 所以`.`必须省略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T15:00:58.943

从您[之前的问题](https://stackoverflow.com/questions/14011029/jsoup-display-data-to-textview)中可以看出，这`myURL`是一个`String`. 在这种情况下，您使用的是构造函数[Jsoup.parse(String html)](http://jsoup.org/apidocs/org/jsoup/Jsoup.html#parse%28java.lang.String%29)。

您需要一个需要 a`URL`来建立连接的人：

```
Document doc = Jsoup.parse(new URL(myURL), 2000);
Elements name = doc.getElementsByClass("lNameHeader"); 
```

还要从类名中删除前导`.`字符。如果您不想指定超时，您可以简单地使用：

```
Document doc = Jsoup.connect(myURL).get(); 
```

# android - 查看屏幕外的位置

> ID：14011724
> 
> 赞同：3
> 
> 时间：2012-12-23T14:24:19.407
> 
> 标签：android

我正在与 4 名玩家一起玩纸牌游戏，其中手机播放的 3 名玩家的纸牌背面出现在屏幕上，其中一部分在外面。我已经成功地使用顶部和左侧玩家的卡片视图的边距来做到这一点，但是右侧的玩家有问题，设置卡片视图的左边距只是调整它的大小并防止它离开屏幕。

这是截图： [游戏截图](http://i.imgur.com/cHXU3.jpg)

我想我在这里遗漏了一些东西......

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T15:03:31.717

我认为你还需要在试图让它离开屏幕右侧时设置右边距。举一个简单的文本示例，如果屏幕上有“Here I Am”，并将左边距设置为 -30dp，它将在中途离开屏幕。但是，如果您将左边距设置为 275dp，它将重新调整大小以留在屏幕上，除非您也将右边距设置为 100dp。为了在不调整大小的情况下获得图片，我必须将右边距设置为负值。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="275dp"
    android:layout_marginRight="100dp"
    android:text="here I am" />
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView1"
    android:layout_marginLeft="200dp"
    android:layout_marginRight="-75dp"
    android:src="@drawable/jack" />
</RelativeLayout> 
```

# java - 无法实例化支付模块

> ID：14011727
> 
> 赞同：0
> 
> 时间：2012-12-23T14:24:25.490
> 
> 标签：java, web, paypal, konakart

我在 KonaKart 应用程序中添加了一种新语言，并添加了所有必要的属性文件。
我激活了模块：`shipping`和`payment`.

对于标准语言，模块可以正常工作，但对于我添加的语言，我得到以下异常：

> 在 java.util.ResourceBundle.throwMissingResourceException 找不到基本名称 com.konakart.bl.modules.payment.paypal.Paypal lacale ru 的包

在`/com/konakart/bl/modules/payment/paypal`我添加了文件的文件夹中，`Paypal_ru.properties`
我认为我需要将属性文件添加到类路径中。

**如何将属性文件添加到类路径？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T15:38:43.807

使用 KonaKart，您可以获得模块的完整源代码和用于重建 jar 的 ANT 构建文件。因此，最简单的方法是在模块的适当目录中添加新语言环境的属性文件并重建 jar。

# php - 不能在控制器中声明的模型中使用会话

> ID：14011729
> 
> 赞同：0
> 
> 时间：2012-12-23T14:24:31.937
> 
> 标签：php, codeigniter, session

我不能在控制器中声明的模型中使用会话变量。这是代码。我已经在 dataOperate 控制器中声明了这个会话。

```
 $this->session->set_userdata('newrecord','new'); 
```

我在模型 dataOperateModel 中使用上述会话

```
if($this->session->userdata('newrecode')){
       echo $this->session->userdata('newrecode');

       } 
```

但它什么也没打印。我已经在自动加载 CodeIgniter 中加载了会话。我清除了所有会话并再次尝试。但没有运气。但是当我使用时，`print_r($this->session->all_userdata());`我可以看到 newrecord 会话变量和其他会话变量。这里发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:36:55.357

您在模型中两次拼错 newrecord。它说newrecode，所以如果你直接从你的代码编辑器中复制它，你就会发现你的问题。

# html - 如何制作可点击的图片墙以发送价值

> ID：14011730
> 
> 赞同：2
> 
> 时间：2012-12-23T14:25:02.170
> 
> 标签：html, css, jsp

在 HTML 中，我有这堵带有不同食物的图片墙。

```
<ul>
    <li><p>Sallad</p><img src="img/sallad.jpg"></li>
    <li><p>Pizza</p><img src="img/pizza.jpg"></li>
    <li><p>Sushi</p><img src="img/Sushi.jpg"></li>
    <li><p>Pasta</p><img src="img/pasta.jpeg"></li>
    <li><p>Indian</p><img src="img/indian.jpeg"></li>
    <li><p>Fish</p><img src="img/fish.jpeg"></li>
    <li><p>Burger</p><img src="img/burger.jpeg"></li>
    <li><p>Steak</p><img src="img/steak.jpeg"></li>
    <li><p>Vegetarian</p><img src="img/vegetarian.jpeg"></li>

 </ul> 
```

我的问题基本上是我有一个搜索功能，当我点击其中一张图片时，我希望它把我重定向到另一个页面，我知道我基本上可以使用`<a href`它，但问题是我希望这些图片中的每一张都有一个值，以便我的搜索功能可以读取它，然后显示数据库中的搜索结果。IE 如果我点击意大利面图片，它将带我进入显示数据库中所有意大利面菜肴的结果页面。

如果你们中的任何人有任何其他建议或解决方案，我真的很乐意。非常感谢阅读！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:30:27.527

只需使用包含查询字符串的链接。

```
<a href="whatever.jsp?search=salad"><img src="..."></a> 
```

对其他元素也这样做。然后，在您的服务器端代码中，您可以访问名为“search”的 GET 变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T14:30:41.660

```
<a href="The URL of the site"><img src="The URL of the image"></a> 
```

**例子**

```
<li><p>Sallad</p><a href="sallad.html"><img src="img/sallad.jpg"></a></li> 
```

或者

```
<li><p>Sallad</p><a href="search.jsp?search=sallad"><img src="img/sallad.jpg"></a></li> 
```

**更新**

试试这个

```
 <li><a href="sallad.html"><p>Sallad</p></a><img src="img/sallad.jpg"></li> 
```

# php - 发布到 Facebook 会随机生成状态消息或帖子

> ID：14011731
> 
> 赞同：1
> 
> 时间：2012-12-23T14:25:05.450
> 
> 标签：php, facebook

这个应用程序使用 PHP 和 Facebook 的 PHP API 实现发布到用户的时间线。这已经工作了好几个星期了。

以下 PHP 代码用于发布消息：

```
if($hasPhoto === TRUE)
{
    // Post to FB with picture
    $facebook->setFileUploadSupport(true);

    $result = $facebook->api("/me/photos", "post", array(
        'message'   => $message,
        'place'     => $place,
        'source'    => '@'  . $photo
    ));
} 
else 
{
    // Post to FB without picture
    $result = $facebook->api("/me/feed", "post", array(
        'message'   => $message,
        'place'     => $place
    ));
} 
```

这工作正常，除了 $result 有两种格式：

```
array ('id' => '103240856515XXX', )
array ('id' => '100004900175XXX_103239809849XXX', ) 
```

Graph API 文档告诉我们以下内容：

```
A post from Facebook Platform:  https://graph.facebook.com/19292868552_10150189643478553
A status message on the Facebook Page: https://graph.facebook.com/10150224661566729 
```

这意味着使用的 PHP 代码会生成帖子或状态消息。我看不到短信、照片、日期或作者之间有任何关系。这似乎是随机发生的。

下面从我们的数据中展示了 id 的格式和是否附上照片之间的关系。

```
select count(*) from fbposts where facebookpostid like '%\_%' and hasphoto = 1;  -- 90
select count(*) from fbposts where facebookpostid like '%\_%' and hasphoto = 0;  -- 87
select count(*) from fbposts where facebookpostid not like '%\_%' and hasphoto = 1;  -- 47
select count(*) from fbposts where facebookpostid not like '%\_%' and hasphoto = 0; -- 54 
```

为什么会发生这种行为？如何强制发帖？这是相关的原因是因为 Post 确实有我想查询的 Privacy 属性。

**更新：** 查询由 FB API 给出的状态消息 545778052106XXX 和照片，给了我：

```
{
  "id": "545778052106XXX", 
  "from": {
    "name": "Jeffrey Krist", 
    "id": "100000226354XXX"
  }, 
  "name": "My message!", 
  "picture": "http://photos-f.ak.fbcdn.net/hphotos-ak-ash3/522827_545778052106XXX_1151562XXX_s.jpg", 
  "source": "http://sphotos-f.ak.fbcdn.net/hphotos-ak-ash3/s720x720/522827_545778052106XXX_1151562XXX_n.jpg", 
  "height": 720, 
  "width": 720, 
  "images": [
    {
      "height": 2048, 
      "width": 2048, 
      "source": "http://sphotos-f.ak.fbcdn.net/hphotos-ak-ash3/s2048x2048/522827_545778052106XXX_1151562XXX_n.jpg"
    },  .. lots more
  ], 
  "link": "https://www.facebook.com/photo.php?fbid=545778052106402&set=p.545778052106XXX&type=1", 
  "icon": "http://static.ak.fbcdn.net/rsrc.php/v2/yz/r/StEh3RhPXXX.gif", 
  "place": {
    "id": "182665821805XXX", 
    "name": "A company name", 
    "location": {
      "street": "My street 13", ..
    }
  }, 
  "created_time": "2012-11-01T08:35:20+0000", 
  "updated_time": "2012-11-01T08:35:20+0000", 
  "comments": ...
  "likes": ...
} 
```

使用 FB API 中的 id 查询帖子消息给了我：

```
{
  "id": "100003331805XXX_299609210160XXX", 
  "from": {
    "name": "Some name", 
    "id": "100003331805XXX"
  }, 
  "message": "My message", 
  "picture": "http://photos-e.ak.fbcdn.net/hphotos-ak-ash3/560724_299609200160XXX_789651XXX_s.jpg", 
  "link": "https://www.facebook.com/photo.php?fbid=299609200160XXX&set=a.285494101571XXX.69331.100003331805XXX&type=1&relevant_count=1", 
  "name": "Photo album name", 
  "icon": "http://static.ak.fbcdn.net/rsrc.php/v2/yz/r/StEh3RhPXXX.gif", 
  "actions": [
    {
      "name": "Comment", 
      "link": "https://www.facebook.com/100003331805XXX/posts/299609210160XXX"
    }, 
    {
      "name": "Like", 
      "link": "https://www.facebook.com/100003331805XXX/posts/299609210160XXX"
    }
  ], 
  "privacy": {
    "value": "ALL_FRIENDS", ...
  }, 
  "place": {
    "id": "174171872642XXX", ...
  }, 
  "type": "photo", 
  "status_type": "added_photos", 
  "object_id": "299609200160XXX", 
  "application": {
    "name": "My app", ...
  }, 
  "created_time": "2012-12-21T22:33:59+0000", 
  "updated_time": "2012-12-21T23:30:39+0000", 
  "likes":  ...
  "comments": ...
} 
```

查询一个组合 id，_ ('100000226354XXX_545778052106XXX')，它是带有照片的消息，给我：

```
{
  "error": {
    "message": "Unsupported get request.", 
    "type": "GraphMethodException", 
    "code": 100
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:14:06.210

当每个状态消息都是一个帖子对象时，不需要强制发布。

状态消息对象`10100948019328597`

发布对象`userid_10100948019328597`

状态消息对象

```
{
  "id": "10100948019328597", 
  "from": {
    "name": "phwd", 
    "id": "13608786"
  }, 
  "message": "Happy Thanksgiving you cool Canadians!", 
  "updated_time": "2012-10-08T23:17:27+0000", 
  "likes": {
    "data": [
    ], 
    "paging": {
      "next": 
    }
  }
} 
```

发布对象

```
{
  "id": "13608786_10100948019328597", 
  "from": {
    "name": "phwd", 
    "id": "13608786"
  }, 
  "message": "Happy Thanksgiving you cool Canadians!", 
  "actions": [
    {
      "name": "Comment", 
      "link": "http://www.facebook.com/13608786/posts/10100948019328597"
    }, 
    {
      "name": "Like", 
      "link": "http://www.facebook.com/13608786/posts/10100948019328597"
    }
  ], 
  "privacy": {
    "description": "Public", 
    "value": "EVERYONE", 
    "friends": "", 
    "networks": "", 
    "allow": "", 
    "deny": ""
  }, 
  "type": "status", 
  "status_type": "mobile_status_update", 
  "created_time": "2012-10-08T23:17:28+0000", 
  "updated_time": "2012-10-08T23:17:28+0000", 
  "likes": {
    "data": [
     ]
  }, 
  "comments": {
    "count": 0
  }
} 
```

最好的检查方法是比较`/me/statuses`vs`/me/posts`

# android - Android Simplecursoradapter 不使用我正在传递的光标

> ID：14011737
> 
> 赞同：0
> 
> 时间：2012-12-23T14:26:36.050
> 
> 标签：android, listview, cursor, simplecursoradapter

```
cursor = getContentResolver().query(GroceryItemProvider.ITEM_URI, projection, id+"="+GroceryItemTable.LIST_ID, null, null);
adapter= new SimpleCursorAdapter(this, R.layout.list_row, cursor, from, to , 0);
adapter.swapCursor(cursor); 
```

这会创建一个包含整个表格的列表，而不是我通过自定义值传递的光标，这是默认行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T14:52:46.167

你的意思是你正在获取所有数据列或所有数据行？如果您要获取所有列，请提及变量投影的值。如果要获取所有行，则可以通过向 getContentResolver().query() 方法提供最后一个参数来限制行，例如：-

```
cursor = getContentResolver().query(GroceryItemProvider.ITEM_URI, projection, id+"="+GroceryItemTable.LIST_ID, null, "id limit 10"); 
```

# javascript - 请求标头不适用于跨域 Ajax

> ID：14011738
> 
> 赞同：1
> 
> 时间：2012-12-23T14:26:36.793
> 
> 标签：javascript, jquery, ajax

我正在尝试在请求标头中添加一个参数，它适用于同域调用，但如果我调用不同的域（API），我需要更改标头参数本身。

这是我尝试添加参数的代码。

```
jqXHR.setRequestHeader(
  "Authorization", 'bearer t-7614f875-8423-4f20-a674-d7cf3096290e'
); 
```

应该是这样的

```
Authorization: bearer t-3e57cc74-3e7a-4fc7-9bbb-f6c83252db01
User-Agent: Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11
Accept: */*
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

但是对于跨域调用，它变成了这样：

```
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-US,en;q=0.5
Access-Control-Request-Headers  authorization
Access-Control-Request-Method   GET 
```

谁能告诉我如何解决跨域调用的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:49:16.963

由于您使用自定义标头，因此您需要实现 CORS 的[“预检”](http://www.w3.org/TR/cors/#resource-preflight-requests)部分。[在MDN](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS#Preflighted_requests)上有一个很好的文档。

您基本上需要处理 HTTP`OPTIONS`请求并使用正确的标头进行响应，指示客户端允许该请求。如果您只想允许所有带有`Authorization`标头的 GET 请求，则以下响应标头可以完成这项工作：

```
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET
Access-Control-Allow-Headers: authorization 
```

# winapi - 获取所有句柄

> ID：14011740
> 
> 赞同：0
> 
> 时间：2012-12-23T14:26:43.593
> 
> 标签：winapi, handle

如何通过 Win32 获取窗口的所有句柄？我找到了这段代码，但我不知道它是如何工作的！

```
[DllImport("user32.dll")]
  [return: MarshalAs(UnmanagedType.Bool)]
  static extern bool EnumChildWindows(IntPtr hwndParent, EnumWindowsProc lpEnumFunc,   IntPtr lParam);

  private List<IntPtr> GetChildWindows(IntPtr parent)  
  {  
    List<IntPtr> result = new List<IntPtr>();  
    GCHandle listHandle = GCHandle.Alloc(result);  
    try  
    {  
         EnumWindowProc childProc = new EnumWindowProc(EnumWindow);  
         EnumChildWindows(parent, childProc, GCHandle.ToIntPtr(listHandle));  
    }  
    finally  
    {  
         if (listHandle.IsAllocated)  
               listHandle.Free();  
    }  
    return result;  
   } 
```

# delphi - 如何跟踪 TIdHttp 的原始请求和响应内容

> ID：14011741
> 
> 赞同：7
> 
> 时间：2012-12-23T14:26:58.587
> 
> 标签：delphi, debugging, indy, idhttp

我使用 delphi 和 python 实现了相同的代码（发布表单）。python代码完美运行，但delphi代码失败。在 python 中，我可以简单地编写`httplib2.debuglevel=4`来查看实际发送到服务器的内容。但我不知道如何在delphi中打印内容。

```
def python_request_data(url, cookie, data):
    httplib2.debuglevel = 4
    conn = httplib2.Http()
    conn.follow_all_redirects = True
    headers = {'Cookie': cookie, 'Content-Type': 'application/x-www-form-urlencoded'}
    response, contents = conn.request(url, 'POST', data, headers=headers)

procedure DelphiRequestData(const Url, Cookie, Data: string);
var
  Client: TIdHttp;
  Params: TStringList;
  Response: string;
begin
  Client := TIdHttp.Create(nil);
  try
    Client.HTTPOptions := [hoKeepOrigProtocol];
    Client.Request.CustomHeaders.AddValue('Cookie', Cookie);
    Params := TStringList.Create;
    try
      Params.QuoteChar := #0;
      Params.Delimiter := '&';
      Params.DelimiterText := Data;
      Client.Request.ContentType := 'application/x-www-form-urlencoded';
      Client.Request.ContentLength := Length(Params.DelimitedText);
      Response := Client.Post(Url, Params);
    finally
      Params.Free;
    end;
  finally
    Client.Free;
  end;
end; 
```

任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T15:13:38.663

您可以使用 TIdLogDebug 作为您的 IdHttp 的拦截。
OnSend 和 OnReceive 事件将以数组或 TBytes 的形式传递所需的信息。

# php - Mysqli：循环查询

> ID：14011746
> 
> 赞同：-1
> 
> 时间：2012-12-23T14:27:42.830
> 
> 标签：php, mysql, mysqli, union

我需要使用 mysqli 执行 'n' 联合（其中 n 根据用户输入而变化）。例如：

```
select a from b where a=c[1]
UNION
select a from b where a=c[2]
...
UNION
select a from b where a=c[n] 
```

反正有没有迭代地做到这一点？类似的东西： for(i=1;i

注意：我只能在数据库上运行选择查询

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T14:31:38.547

不需要联合

对于数字`a`，它将是

```
$c = array(1,2,3);
$c = array_filter(array_map('intval',$c));
$in = implode(',',$c);
$sql = "select a from b where a IN ($in)"; 
```

对于字符串的想法是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T14:32:40.690

如果您总是需要，`select a from b where a = dynamicvalue`您可以将您的 dynamicValue 保存在临时表中或使用如下查询：

> SELECT a FROM b WHERE a IN (SELECT c from x WHERE 子句 = 任何东西)

# java - Java 中的已检查异常与未检查异常

> ID：14011749
> 
> 赞同：23
> 
> 时间：2012-12-23T14:28:24.533
> 
> 标签：java, exception

我在理解 Java 中的差异`checked`和`unchecked`异常方面遇到了一些问题。

1.  首先，`checked`异常应该在编译期间寻找异常。不同来源中提供的示例引用了数据库连接、文件处理作为其中的一些，而`unchecked`异常应该查找程序员方面的错误，例如超出数组范围的索引等。

不应该反过来吗？我的意思是，数据库连接是在运行时完成的，对吧？文件处理也是如此。您不会在编译期间打开文件句柄，那么为什么在编译期间寻找可能的错误呢？另一方面，超出范围的数组的索引已经在程序中完成，可以在编译时检查（如果异常索引是用户在运行时提供的，那么它可以是运行时问题）。我在这里想念什么？

2 其次，怎么可能`RunTimeException`，本身就是`unchecked`，子类`Exception`，哪个是`checked`？这意味着什么？

我在 Herbert Schildt 的书中找到了一个解释`checked`异常用法的示例：

```
class ThrowsDemo {
   public static char prompt(String str)
      throws java.io.IOException {
  System.out.print(str + ": ");
  return (char) System.in.read();
  }
  public static void main(String args[]) {
    char ch;
    try {
      ch = prompt("Enter a letter");
    }
    catch(java.io.IOException exc) {
     System.out.println("I/O exception occurred.");
     ch = 'X';
    }
    System.out.println("You pressed " + ch);
    }
} 
```

这里需要这个`throws`子句吗？为什么我不能正常地用这样的`try-catch`语句来做（对不起，我不知道如何模拟一个`IO Exception`，所以不能自己检查它！）：

```
class ThrowsDemo {
   public static char prompt(String str)  {
     System.out.print(str + ": ");
     return (char) System.in.read();
  }
  public static void main(String args[]) {
    char ch;
    try {
      ch = prompt("Enter a letter");
    }
    catch(java.io.IOException exc) {
     System.out.println("I/O exception occurred.");
     ch = 'X';
    }
    System.out.println("You pressed " + ch);
    }
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-23T15:33:55.370

CheckedException 需要由调用者处理，Unchecked 异常不需要。

所以，当你设计你的应用程序时，你应该考虑到你正在管理什么样的异常情况。

例如，如果您设计了一个验证方法来检查某些用户输入的有效性，那么您知道调用者必须检查验证异常并以美观的方式向用户显示错误。这应该是一个检查异常。

或者，对于那些可以恢复的异常情况：假设您有一个负载均衡器，并且您想通知调用者“n”个服务器之一已关闭，因此调用者必须恢复事件，将消息重新路由到另一台服务器；这应该是一个已检查的异常，因为调用者（客户端）尝试恢复错误至关重要，不要让错误破坏程序流程。

相反，有许多情况不应该发生，和/或应该破坏程序。例如，编程错误（如除以零、空指针异常）、错误使用 API（IllegalStateException、OperationNotSupportedException）、硬件崩溃或一些不可恢复的小情况（与服务器的连接丢失），或世界末日:-)；在这些情况下，正常的处理是让异常到达代码的最外层，向用户显示发生了不可预知的错误并且应用程序无法继续执行。这是一种致命的情况，因此您唯一能做的就是将其打印到日志中或在用户界面中将其显示给用户。在这些情况下，捕获异常是错误的，因为，捕获异常后，您需要手动停止程序以避免进一步的损坏；所以最好让某种异常“打击粉丝”:)

由于这些原因，JRE 中也有一些未检查的异常：OutOfMemoryError（不可恢复）、NullPointerException（这是一个需要修复的错误）、ArrayIndexOutOfBoundsException（另一个错误示例）等等。

我个人认为 SQLException 也应该不选中，因为它表示程序中的错误或与数据库的连接问题。但是有很多例子你得到异常，你真的不知道如何管理 (RemoteException)。

处理异常的最佳方法是：如果您可以恢复或管理异常，请处理它。否则让异常过去；其他人将需要处理。如果您是最后一个“其他人”并且您不知道如何处理异常，只需显示它（记录或显示在 UI 中）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-23T14:36:57.423

1.  您不需要在`throws`子句中声明未经检查的异常；但您*必须*声明已检查的异常；
2.  `RuntimeException`和`Error`，以及它们的所有子类（`IllegalArgumentException`等`StackOverflowError`），都是未受检异常；`RuntimeException`与其他子类不同，未经检查的事实是`Throwable`设计使然；
3.  没有“编译时异常”之类的东西。

更一般地，认为在发生 JVM 错误或程序员错误时会抛出未经检查的异常。一个著名的例外是`NullPointerException`，通常缩写为 NPE，它是 的子类`RuntimeException`，因此不受检查。

未经检查的异常和检查的异常之间的另一个非常重要的区别是，在 try-catch 块中，如果要捕获未经检查的异常，则*必须显式地捕获它们*。

最后说明：如果您有异常类`E1`和扩展，那么捕获`E2`和/或抛出也捕获/抛出。这代表已检查和未检查的异常。这对块有影响：如果你区分catch和，你*必须先*catch 。`E2``E1``E1``E2``catch``E2``E1`*`E2`*

 *例如：

```
// IllegalArgumentException is unchecked, no need to declare it
public void illegal()
{
    throw new IllegalArgumentException("meh");
}

// IOException is a checked exception, it must be declared
public void ioerror()
    throws IOException
{
    throw new IOException("meh");
}

// Sample code using illegal(): if you want to catch IllegalArgumentException,
// you must do so explicitly. Not catching it is not considered an error
public void f()
{
    try {
        illegal();
    } catch (IllegalArgumentException e) { // Explicit catch!
        doSomething();
    }
} 
```

我希望这能让事情更清楚......

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-23T14:40:28.897

1.  不，所有异常都发生在运行时。已检查异常是强制调用者处理或声明它们的异常。它们通常用于指示可恢复的错误，这些错误不是由程序员错误引起的（例如文件不存在或网络连接问题）。运行时异常通常用于表示不可恢复的错误。他们不会强迫调用者处理或声明它们。其中许多确实表示编程错误（如 NullPointerException）。

2.  因为这就是 JLS 定义未经检查的异常的方式：一个是或扩展 RuntimeException 的异常，它本身扩展了 Exception。使用单个继承根允许在单个 catch 子句中处理每个可能的异常。

关于您的示例：是的， throws 子句是强制性的，因为 IOException 是一个已检查的异常，并且该方法内的代码很容易抛出一个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-23T14:37:55.253

编译器仅确保方法在未声明的情况下不会抛出已检查异常。人们普遍认为，编译器应该对发生超出程序员控制范围的异常进行此类检查，例如您引用的示例（数据库连接、文件丢失等）。未经检查的异常“不应该发生”，因此编译器不会强制您声明它们。

至于模拟`IOException`或任何其他，它是微不足道的：

```
throw new IOException(); 
```

在您的示例中，该`prompt`方法可能会抛出一个`IOException`，这就是它需要声明它的原因。这与您在调用方法时如何处理异常无关。

`RuntimeException`是一个子类，`Exception`可以方便地用一个`catch Exception`子句捕获所有异常。这可以设计不同；Java 的异常类层次结构是一团糟。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-23T14:38:42.437

如果你不在这里放 throws 子句，就会出现这个错误

**ThrowsDemo.java:5：未报告的异常 java.io.IOException；必须被捕获或声明被抛出 return (char) System.in.read();**

所以在必要时抛出子句。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-24T15:15:51.807

已检查异常和未检查异常的五个示例。

```
Unchecked Exception
   -- NullPointerException
   -- ArrayIndexOutofBound
   -- IllegalArgument Exception
   -- ClassCastException
   -- IllegalStateException
   -- ConcurrentModificationException

Checked Exception Five Example
   -- FileNotFoundException
   -- ParseException
   -- ClassNotFoundException
   -- CloneNotSupportException
   -- SQLException 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-22T05:52:06.697

**已检查和未检查的异常**

有两种类型的异常：已检查的异常和未检查的异常。已检查异常和未检查异常之间的主要区别在于，已检查异常在编译时检查，而未检查异常在运行时检查。

请阅读这篇[文章](http://beginnersbook.com/2013/04/java-checked-unchecked-exceptions-with-examples/)以获得清晰的想法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-23T13:23:39.357

[更多细节](http://www.sbalasani.com/2015/12/what-is-difference-between-runtime.html)

当客户端代码可以根据异常中的信息采取一些有用的恢复操作时，使用已检查的异常。当客户端代码不能做任何事情时使用未经检查的异常。例如，如果客户端代码可以从中恢复，则将您的 SQLException 转换为另一个已检查的异常；如果客户端代码对此无能为力，则将您的 SQLException 转换为未经检查的（即 RuntimeException）异常。*

# objective-c - 是否可以在没有任何按钮的情况下创建 UIAlertView？

> ID：14011752
> 
> 赞同：1
> 
> 时间：2012-12-23T14:28:35.330
> 
> 标签：objective-c, ios, uialertview

我需要帮助`UIAlertView`:-)。目前，当用户使用该功能`UIAlertView`摇动设备时，我会出现。`-(void)motionEnded:`我想使用 0.5 秒后使警报视图消失，`NSTimer`所以我不需要警报视图底部的任何按钮来关闭它。有没有办法在没有任何按钮的情况下创建 UIAlertView？[用下图中的箭头删除空格的方法？]

这是代码：

```
- (void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event
{
    resetAlert = [[UIAlertView alloc] initWithTitle:@"Reset!"
                                            message:nil
                                           delegate:nil
                                  cancelButtonTitle:nil
                                  otherButtonTitles:nil, nil];
    [resetAlert show];

    alertHideTimer = [NSTimer scheduledTimerWithTimeInterval:10.5 target:self selector:@selector(dismissWithClickedButtonIndex:animated:) userInfo:nil repeats:NO];

    self.label.text = @"0";
    numero = 0;
    [self.label2 setHidden:YES];
} 
```

![在此处输入图像描述](../Images/a480d67bb1bd6e88981e7626424503c0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T14:30:43.750

是的。尝试以下操作：[iToast](http://code.google.com/p/toast-notifications-ios/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T14:32:14.713

您可以创建自己的视图。根据您的要求、计时器等显示和隐藏/关闭它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T14:44:24.973

我不确定`NSTimer`使用多参数选择器是否正确。我添加了这个方法：

```
-(void)dismissAlertView:(UIAlertView*)alertView {
    [alertView dismissWithClickedButtonIndex:0 animated:NO];
} 
```

并将您的替换`NSTimer`为：

```
[self performSelector:@selector(dismissAlertView:) withObject:resetAlert afterDelay:0.5]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-07T02:56:21.257

据我所知，完全删除空间是不可能的。

但是...这里有一些您可能想尝试的事情；

## 添加顶部填充

添加一些换行符以获得顶部填充：`initWithTitle:@"\n\nConfiguring Preferences...`

[![顶部填充示例](../Images/ab88dd059e4732237681530c69127277.png)](https://i.stack.imgur.com/o8nbQ.png)
[（来源：[iosdevelopertips.com](http://iosdevelopertips.com/wp-content/uploads/2010/02/alert2-204x300.png)）]

## 添加微调器

将 UIActivityIndi​​catorView 添加到 UIAlertView

`alert = [[UIAlertView alloc] initWithTitle:@"Configuring Preferences\nPlease Wait..." message:nil delegate:self cancelButtonTitle:nil otherButtonTitles:nil];`

`[alert show];`

`UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];`

调整指示器，使其距离警报底部几个像素

`indicator.center = CGPointMake(alert.bounds.size.width / 2, alert.bounds.size.height - 50);`

`[indicator startAnimating];`

`[alert addSubview:indicator];`

[![指标示例](../Images/b55d9f3010b7f7409685a77349aac870.png)](https://i.stack.imgur.com/GccH4.png)
[（来源：[iosdevelopertips.com](http://iosdevelopertips.com/wp-content/uploads/2010/02/alert3-204x300.png)）]

希望有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-23T15:05:49.043

您只需在 5 秒后调用委托方法即可隐藏警报

```
[alert dismissWithClickedButtonIndex:0 animated:YES]; 
```

# javascript - XMLHTTP readyState 3 未在 Webkit 中更新

> ID：14011755
> 
> 赞同：1
> 
> 时间：2012-12-23T14:28:56.183
> 
> 标签：javascript, ajax, webkit, xmlhttprequest

这个问题在这些论坛上被问过两次，但提供的答案对我不起作用。

问题是我的 JSP 页面正在返回并刷新少量输出。

我正在使用以下代码来读取输出：

```
var xmlhttp;
if (window.XMLHttpRequest) { 
    xmlhttp = new XMLHttpRequest(); 
} else { 
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP"); 
}

xmlhttp.onreadystatechange = function() {               
    if (xmlhttp.readyState == 3) {
        alert(xmlhttp.responseText);
    }
}

xmlhttp.open("POST", "download.jsp", true);
xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xmlhttp.setRequestHeader('X-Requested-With', "XMLHttpRequest");
xmlhttp.send($('#submitDownloadForm').serialize()); 
```

在 Firefox 上，这可以正常工作，并且在此过程中我会收到 3 个警报。

但是，在基于 Webkit 的浏览器（例如 Chrome 和 Safari）上，我会收到第一个警报，但在该过程完成之前不会收到其他 2 个警报。

其他答案说更改`Content-Type:text/plain`or `Content-Type:application/octet-stream`，但如果我这样做，则`readyState`直接跳转到 4 ，就好像该过程已立即完成一样。

我找不到任何解决方案。

非常感谢任何帮助，在此先感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T01:55:08.000

我在 JSP 文件生成输出之前添加了以下代码，这解决了基于 Webkit 的浏览器上的问题：

```
response.setContentType("application/octet-stream"); 
```

我现在每次刷新输出时都会获取更新。

# iphone - 如何在不改变视图的情况下使 UITabBarItem 成为按钮？

> ID：14011757
> 
> 赞同：0
> 
> 时间：2012-12-23T14:29:21.430
> 
> 标签：iphone, objective-c, ios, xcode

我通过情节提要设置了一个 UITabBarItem (Contact)，当我单击它时，它会转到一个空白视图。以编程方式，我还设置了此选项卡以打开 Mail Composer 视图，当 Mail Composer 视图关闭时，我将活动索引设置为不同的选项卡。

现在的问题是，当我单击“联系人”选项卡时，在短暂但明显的一段时间内，您可以看到空白视图。我想要的是按钮根本不会引导到任何地方，但仍然可以单击它以打开 Mail Composer 视图。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T16:33:56.463

在您的 UITabBarControllerDelegate 中，实现[–tabBarController:shouldSelectViewController:](http://developer.apple.com/library/ios/documentation/uikit/reference/UITabBarControllerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITabBarControllerDelegate/tabBarController%3ashouldSelectViewController%3a)，如果用户选择“Contact”UITabBarButton，则使其返回 NO。

```
- (BOOL) tabBarController:(UITabBarController*)tabBarController shouldSelectViewController:(UIViewController*)viewController {
    BOOL didSelectContactTabButton = <determine if user selected "Contact" tab button> ;
    if ( didSelectContactTabButton ) {
        <create and present your MFMailComposeViewController> ;
        return NO ;
    }
    return YES ;
} 
```

# android - 通过使用 getLastVisiblePosition 平滑滚动到位置

> ID：14011760
> 
> 赞同：1
> 
> 时间：2012-12-23T14:29:45.603
> 
> 标签：android, expandablelistview, smooth-scrolling

对于 ExpandableListView，当前可见屏幕有 20 行，getLastVisiblePosition 给了我一个正确的值。但是，当有 1 个项目展开时，getLastVisiblePosition 给我 24，因为该项目包含 4 个额外的行。这是错误的，因为第 24 行不再可见。我该如何解决？

另外，假设 getLastVisiblePosition 给了我一个正确的值。如何使用 smoothScrollToPosition() 使第 21 行成为第一个可见行。我非常努力地解决它，但仍然没有运气。谢谢你们。

# jsf - PrimeFaces 时间线

> ID：14011763
> 
> 赞同：0
> 
> 时间：2012-12-23T14:30:04.970
> 
> 标签：jsf, primefaces, timeline, primefaces-extensions

我正在使用 primeface 时间线。首先我的时间线显示只是加载，然后在我包含代码后显示

```
<form prepenId="false" >
<p:timeline value="#{bean.value} />
</form> 
```

.但我的问题是时间线在开始时只显示焦点日期......我无法滚动或移动时间线的内容。时间线显示的内容与我的时间线的开始相同（从焦点日期开始）。但不能移动。 ..向左 n 向右...无法查看其他人。标尺出现，但它没有移动时间线的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:13:12.173

它可以在 primefaces 扩展上的时间轴组件上进行缩放和导航。确保使用最新版本的“primefaces-extension”组件而不是旧的“primefaces”时间线组件。Primefaces 将时间线的开发转移到 primefaces 扩展。请发送您所有的 bean 和 facelts 代码。

但是还有另一种方法可以设置框架使用的原始时间线插件的选项。

设置时间线组件的 widgetVar 属性：

```
<pe:timeline id="timeline" value="#{bean.events}"  
                     eventStyle="box"  
                     widgetVar="timelineWidget"> 
```

然后在你的 facelet 页面上放置或运行这个 javascript：

```
<script type="text/javascript">
timelineWidget.jq.timeline(timelineWidget.cfg.dataSource,{"zoomable":"true"});
</script> 
```

使用此方法，您还可以设置其他属性，即 javascript 插件支持。Primefaces-Extension 提供插件的有限属性。

希望它会有所帮助。

# html - Favicon.ico 和静态服务器？

> ID：14011773
> 
> 赞同：2
> 
> 时间：2012-12-23T14:30:37.090
> 
> 标签：html, http, request, favicon

静态服务器（部分）用于不为每个请求发送主站点 cookie。

它们还有助于拆分连接（子域），以便浏览器能够并行下载。

但我查看了 [http://winterba.sh/copacabana的视图源](http://winterba.sh/copacabana)

在该`head`部分中，他们使用了相同的 facivon 名称，但通过特定位置

```
 <link rel="shortcut icon" href="http://cdn.prom.sstatic.net/WinterBash/img/favicon.ico"> 
```

他们为什么这样做？它有什么好处？

[这应该是我想加载 favicon 但名称不同的时候](http://books.google.co.il/books?id=fCK3MMV8iYcC&pg=PA32&lpg=PA32&dq=%22You%20can%20specify%20an%20alternate%20name%20for%20the%20icon%20file%20with%20a%22&source=bl&ots=F5E03mDiui&sig=yq835iEKw-tKu-axovQ8zJj_BHQ&hl=en&sa=X&ei=GxXXUJLvGoPL0QX7kYHoAg&redir_esc=y#v=onepage&q=%22You%20can%20specify%20an%20alternate%20name%20for%20the%20icon%20file%20with%20a%22&f=false)。

但我为什么要这样做？浏览器`favicon.ico`自动搜索。（他们没有重命名）

一旦下载了 favicon，下次它就会从缓存中取出...

所以为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T14:38:48.153

这是一个CDN。CDN 的全部目的是快速提供静态文件。该文件可能称为 favicon.ico，因为这是通常称为 favicon 的内容，并且不相关。

# c# - RSAKey (AS3Crypto) 中的“验证”功能有什么作用？

> ID：14011777
> 
> 赞同：0
> 
> 时间：2012-12-23T14:31:13.510
> 
> 标签：c#, .net, actionscript-3

我真的不明白 _verify 函数在这个类中做了什么：

[http://code.google.com/p/as3crypto/source/browse/trunk/as3crypto/src/com/hurlant/crypto/rsa/RSAKey.as](http://code.google.com/p/as3crypto/source/browse/trunk/as3crypto/src/com/hurlant/crypto/rsa/RSAKey.as)

尤其是它在“dst”变量中添加了什么。我实际上有一个“验证密钥”，它在加密数据上使用这种方法，我在 dst 变量中获得了公钥......

这是一个小图，让你更好地理解：http: [//i.imgur.com/R8DqT.png](http://i.imgur.com/R8DqT.png)

谢谢

Ps：我必须在.net中做同样的事情，所以如果你知道类似的东西，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:24:21.020

_verify 函数（包含在下面以供参考）

```
 public function verify(src:ByteArray, dst:ByteArray, 
length:uint, pad:Function = null):void {
        _decrypt(doPublic, src, dst, length, pad, 0x01);
    } 
```

查看您提供的[链接](http://code.google.com/p/as3crypto/source/browse/trunk/as3crypto/src/com/hurlant/crypto/rsa/RSAKey.as)，该函数用于验证 RSA 签名数据 - 结果被复制到 dst ByteArray。

分解：

*   `doPublic`= 函数参数，一个包装器`BigInteger.modPowInt()`
*   `src`= 带符号数据的字节数组
*   `dst`= 字节数组，它将保存验证结果的结果
*   `length`= src 字节数组中数据的长度
*   `pad``pkcs1pad`= 函数参数， ( `_encrypt`) 和`pkcs1unpad`( `_decrypt`)的包装器
*   `0x01`= padType - 一个整数值，指定`0xff`在填充 (0x01) 中使用固定值 () 还是伪随机值 (0x02) - （仅实际用于`pkcs1pad`从 调用的位置`_encrypt`）

在 RSA 方案中，通过使用公钥解密签名来验证签名数据。

**更新：**除非您有未涵盖的非常特殊的需求，否则没有理由要移植您发布的 ActionScript-3。使用框架中包含的 c# [RSACryptoServiceProvider 。](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsacryptoserviceprovider.aspx)请特别注意`Interoperation with the Microsoft Cryptographic API (CAPI)`MSDN 描述中的部分。

Addressing your comments about needing the content of the `dst` byte array in a similar manner to the AS3Crypto implementation you could just create a wrapper to decrypt the signed data against the public key. Have a look at [RSACryptoServiceProvider.ImportParameters()](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsacryptoserviceprovider.importparameters.aspx) function which you use to import the public key information. Since you haven't provided details as to how the public key is retrieved I can't be more specific. This implementation [example](http://www.jensign.com/opensslkey/opensslkey.cs) should help with parsing key files to create appropriate `RSAParameters` to feed to the `ImportParameters` method.

# objective-c - NSURLCredentialStorage sharedCredentialStorage 不返回有效的凭据

> ID：14011778
> 
> 赞同：0
> 
> 时间：2012-12-23T14:31:31.403
> 
> 标签：objective-c, ios, nsurlcredential

我对 sharedCredentialStorage 有疑问。它不会返回预期的凭据，即使保护空间的所有参数（主机、端口、...）与我之前设置的参数相同。

设置 defaultCredential 的代码：

```
NSURLCredential* credential = [NSURLCredential credentialWithUser:[self.username text] password:[self.password text] persistence:NSURLCredentialPersistencePermanent];
NSURLProtectionSpace *protectionSpace = [[NSURLProtectionSpace alloc]initWithHost:@"localhost" port:0 protocol:NSURLProtectionSpaceHTTP realm:nil authenticationMethod:NSURLAuthenticationMethodDefault];
[[NSURLCredentialStorage sharedCredentialStorage] setDefaultCredential:credential forProtectionSpace:protectionSpace]; 
```

运行这段代码并转到 gdb 窗口后，allCredentials（在 sharedCredentialStorage 中）的结果给出：

```
(lldb) po [[NSURLCredentialStorage sharedCredentialStorage] allCredentials]
(id) $10 = 0x07546d60 {
    "<NSURLProtectionSpace: 0x7550530>" =     {
        lauro = "<NSURLCredential: 0x7573490>: lauro";
    };
} 
```

这意味着凭据已正确添加到 sharedCredentialStorage。

但是当 http 请求操作发生并且身份验证挑战弹出并运行此代码时：

```
credential = [[NSURLCredentialStorage sharedCredentialStorage] defaultCredentialForProtectionSpace:[challenge protectionSpace]]; 
```

没有任何内容返回到凭证变量。你知道为什么会这样吗？

gdb 的输出给出：

```
(lldb) po [[[[NSURLCredentialStorage sharedCredentialStorage] allCredentials] allKeys] objectAtIndex:0]
(id) $13 = 0x0754c1b0 <NSURLProtectionSpace: 0x754c1b0>
(lldb) po [[[[[NSURLCredentialStorage sharedCredentialStorage] allCredentials] allKeys] objectAtIndex:0] host]
// Host for the credential @ sharedCredentialStorage
(id) $14 = 0x0a8b8000 localhost
(lldb) po [[[[[NSURLCredentialStorage sharedCredentialStorage] allCredentials] allKeys] objectAtIndex:0] port]
// Port for the credential @ sharedCredentialStorage (0 matches any)
(id) $15 = 0x00000000 <nil>
(lldb) po [[[[[NSURLCredentialStorage sharedCredentialStorage] allCredentials] allKeys] objectAtIndex:0] realm]
// Realm for the credential @ sharedCredentialStorage (nil matches any)
(id) $16 = 0x00000000 <nil>
(lldb) po [[[[[NSURLCredentialStorage sharedCredentialStorage] allCredentials] allKeys] objectAtIndex:0] authenticationMethod]
// Authentication method for the credential @ sharedCredentialStorage (this gets converted to HTTP basic)
(id) $17 = 0x0159c094 NSURLAuthenticationMethodDefault
(lldb) po [[[[[NSURLCredentialStorage sharedCredentialStorage] allCredentials] allKeys] objectAtIndex:0] protocol]
// Protocol for the credential @ sharedCredentialStorage
(id) $18 = 0x0159b504 http
(lldb) po [[challenge protectionSpace] host]
// Host for the credential @ challange
(id) $19 = 0x0754e6c0 localhost
(lldb) po [[challenge protectionSpace] port]
// Port for the credential @ challange
(id) $20 = 0x00000050 [no Objective-C description available]
// Realm for the credential @ challange
(lldb) po [[challenge protectionSpace] realm]
(id) $21 = 0x01bde844 <object returned empty description>
// Authentication method for the credential @ challange
(lldb) po [[challenge protectionSpace] authenticationMethod]
(id) $22 = 0x0159c094 NSURLAuthenticationMethodDefault

// And finally, the check again to see if we have credentials @ sharedCredentialStorage
(lldb) po [[NSURLCredentialStorage sharedCredentialStorage] allCredentials]
(id) $25 = 0x0756f2b0 {
    "<NSURLProtectionSpace: 0x7574a80>" =     {
        lauro = "<NSURLCredential: 0x7574b00>: lauro";
    };
} 
```

还有一件事，即使我使用一些字符串作为领域（并在我的 REST Web 服务中正确设置它）它也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:41:18.647

当您收到挑战时，保护空间中提供的端口可能是 80（或 443）。当您存储凭据时，您提供的端口为 0。将其设置为正确的端口（80 用于 http，443 用于 https，除非您知道要连接的服务器未使用默认端口 - 您的 lldv 输出似乎显示端口 50？）并尝试一下。

# ios - IOS：应用通用概念

> ID：14011788
> 
> 赞同：0
> 
> 时间：2012-12-23T14:32:53.823
> 
> 标签：ios, ios-universal-app

我正在开始一个必须适用于 iPhone 和 iPad 的项目……你可以告诉我这很容易，而且我可以创建一个“通用”项目……没错。但我有一个关于“愚蠢”问题的“愚蠢”问题。在一个通用项目中，我有两个 .xib（iPhone 和 iPad）用于一个类和内部代码，我验证我是否正在使用一个或另一个

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
     // The device is an iPad running iPhone 3.2 or later.
}
else
{
     // The device is an iPhone or iPod touch.
} 
```

好？

但你知道，在 iPad 的一个视图中，我可以显示 iPhone 一次可以显示的多个视图。例如，我对他们的课程有两个看法：

```
FirstView.h-FirstView.m-FirstView_iPad.xib-FirstView_iPhone.xib 
```

和

```
SecondView.h-SecondView.m-SecondView_iPad.xib-SecondView_iPhone.xib 
```

对于 iPhone 不是问题，但对于 iPad？在 iPad 的视图中，我可以放置第一个和第二个视图控制器，如果我为两个视图控制器有两个不同的类，那么组织起来并不容易……你有解决方案吗？或者最好的解决方案是创建两个独立的项目 iPhone 和 iPad？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T00:55:04.147

所以是的，我总是使用一个 theViewController.h 和一个 theViewController.m，我有一个用于 iPhone 的 theViewController.xib 和一个仅用于 iPad 的单独的 xib。如果您将 iPad xib 命名为以 theViewController~ipad.xib 结尾，则操作系统将自动识别 XIB。您必须在检查器区域的 Interface builder 中将 theViewController~ipad.xib 的类设置为与您的 iphone xib 相同的类，即该类将被称为 theViewController 然后您可以连接您在 . h 和 .m 也是将 iPad xib 命名为以 ~ipad.xib 结尾的好处，当您推送视图时，您不必在推送之前检查 idom，因为操作系统会识别 ~ipad.xib 扩展名并推送正确的视图，具体取决于在设备上..希望这对您有帮助！

# c# - 如何在 .NET 中为我的应用程序设置代理设置

> ID：14011789
> 
> 赞同：0
> 
> 时间：2012-12-23T14:32:58.627
> 
> 标签：c#, .net, proxy

我有一个 C# 应用程序，它使用服务引用通过 Web 服务发送 SMS。用户的互联网连接需要通过代理服务器才能到达世界。

所以我的问题是如何告诉 .NET 通过代理调用 Web 服务？或者如何像在 YMahoo Messenger 中一样为我的应用程序的 Internet 连接设置代理设置？

我也想让用户选择代理设置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T14:48:33.593

我相信您正在寻找的是[`defaultProxy`在您的配置文件](http://msdn.microsoft.com/en-us/library/kd3cf2ex.aspx)中。

这是链接中的一个示例：

```
<configuration>
  <system.net>
    <defaultProxy>
      <proxy
        usesystemdefault="true"
        proxyaddress="http://192.168.1.10:3128"
        bypassonlocal="true"
      />
      <bypasslist>
        <add address="[a-z]+\.contoso\.com" />
      </bypasslist>
    </defaultProxy>
  </system.net>
</configuration> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T15:03:46.447

请尝试下面的代码希望这对你有帮助

```
tring targetUrl = "http://www.google.com";
string proxyUrlFormat = "http://zend2.com/bro.php?u={0}&b=12&f=norefer";
string actualUrl = string.Format(proxyUrlFormat, HttpUtility.UrlEncode(targetUrl));

// Do something with the proxy-ed url
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(new Uri(actualUrl));
HttpWebResponse resp = req.GetResponse();

string content = null;
using(StreamReader sr = new StreamReader(resp.GetResponseStream()))
{
    content = sr.ReadToEnd();
}

Console.WriteLine(content); 
```

# ios - UIImagePickerController 图像缩放并保持其质量

> ID：14011798
> 
> 赞同：0
> 
> 时间：2012-12-23T14:33:52.087
> 
> 标签：ios, uiimageview, uiimage, uiimagepickercontroller

使用相机返回的尺寸为 720*960 的图像捕获的图像尺寸。

捕获的Image显示在一个320*436的UIImageView中，像这样。

```
UIImageView *imgView=[[UIImageView alloc] initWithFrame:CGRectMake(0.0,0.0,320.0,436.0)];
imgView.image=img;//Image received from camera.
[self.view addSubView:imgView]; 
```

这样，工作正常的图像 720*960 被缩放到 320*436 并显示。

现在，实际问题从这里开始。我有另一个尺寸为 72*72 的图像。该图像与从相机接收到的图像在某个任意坐标处重叠。

`CGRectMake(0.0,0.0,72.0,72.0);`

我无法找到更好的方法来处理缩放和应用另一个图像的叠加，同时保持其质量。图像需要发送到服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T14:44:57.150

使用以下代码缩放图像：

```
-(UIImage*) imageWithImage:(UIImage*)image scaledToSize:(CGSize)newSize
{
    UIGraphicsBeginImageContext(newSize);
    [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;
} 
```

# c++ - 位图 24 到 32 并返回

> ID：14011799
> 
> 赞同：1
> 
> 时间：2012-12-23T14:33:54.697
> 
> 标签：c++

这可能是一篇很长的文章，但我真的需要知道如何在 24 位和 32 位位图之间进行转换。为了这篇文章的篇幅，我删除了我的问题的 PNG 部分。

开始：

我有一个像下面这样包含所有像素信息的结构：

```
typedef union RGB
{
    uint32_t Color;
    struct
    {
        unsigned char B, G, R, A;
    } RGBA;
} *PRGB;

std::vector<RGB> Pixels;   //Holds all pixels. 
```

除了从 24 到 32 时，所有位图写入都有效，反之亦然。我不知道我做错了什么或者为什么 24-32 转换不起作用。我的位图读写代码如下：

```
Bitmap(const void* Pointer, int Width, int Height, uint32_t BitsPerPixel) //Constructor initialization here...
{
    Pixels.clear();
    if (Pointer == nullptr) {throw std::logic_error("Null Pointer Exception. Pointer is NULL.");}
    if (Width < 1 || Height < 1) {throw std::invalid_argument("Invalid Arguments. Width and Height cannot equal 0.");}
    std::memset(&Info, 0, sizeof(BITMAPINFO));
    size = ((width * BitsPerPixel + 31) / 32) * 4 * height;

    Info.bmiHeader.biSize = sizeof(BITMAPINFOHEADER);
    Info.bmiHeader.biWidth = width;
    Info.bmiHeader.biHeight = height;
    Info.bmiHeader.biPlanes = 1;
    Info.bmiHeader.biBitCount = BitsPerPixel;
    Info.bmiHeader.biCompression = BI_RGB;
    Info.bmiHeader.biSizeImage = size;
    bFileHeader.bfType = 0x4D42;
    bFileHeader.bfOffBits = sizeof(BITMAPFILEHEADER) + sizeof(Info.bmiHeader);
    bFileHeader.bfSize = bFileHeader.bfOffBits + size;

    const unsigned char* BuffPos = static_cast<const unsigned char*>(Pointer);
    height = (height < 0 ? -height : height);
    Pixels.resize(width * height);

    for (int I = 0; I < height; I++)
    {
        for (int J = 0; J < width; J++)
        {
            Pixels[(height - 1 - I) * width + J].RGBA.B = *(BuffPos++);
            Pixels[(height - 1 - I) * width + J].RGBA.G = *(BuffPos++);
            Pixels[(height - 1 - I) * width + J].RGBA.R = *(BuffPos++);
            Pixels[(height - 1 - I) * width + J].RGBA.A = (Info.bmiHeader.biBitCount > 24 ? *(BuffPos++) : 0);
        }
        if(Info.bmiHeader.biBitCount == 24)
            BuffPos += width % 4;
    }
}

bool SaveBitmap(const char* FilePath)
{
    std::vector<unsigned char> ImageData(size);
    unsigned char* BuffPos = ImageData.data();

    for (int I = 0; I < height; ++I)
    {
        for (int J = 0; J < width; ++J)
        {
            *(BuffPos++) = Pixels[(height - 1 - I) * width + J].RGBA.B;
            *(BuffPos++) = Pixels[(height - 1 - I) * width + J].RGBA.G;
            *(BuffPos++) = Pixels[(height - 1 - I) * width + J].RGBA.R;

            if (Info.bmiHeader.biBitCount > 24)
                *(BuffPos++) = Pixels[(height - 1 - I) * width + J].RGBA.A;
        }
        if(Info.bmiHeader.biBitCount == 24)
            BuffPos += width % 4;
    }

    std::fstream hFile(FilePath, std::fstream::out | std::ofstream::binary);
    if (!hFile.is_open()) return false;

    hFile.write(reinterpret_cast<char*>(&bFileHeader), sizeof(BITMAPFILEHEADER));
    hFile.write(reinterpret_cast<char*>(&Info.bmiHeader), sizeof (BITMAPINFOHEADER));
    hFile.write(reinterpret_cast<char*>(&ImageData[0]), Size());
    hFile.close();

    return true;
} 
```

知道这两个问题可能是什么吗？我想要这样，如果我调用 Bitmap(24BmpBuff, W, H, 32); 它将保存为 32。如果我执行 Bitmap(32BmpBuff, W, H, 24) 它将保存为 24 位。我只是看不到它，所以我希望你们中的一个人会。

我还尝试制作辅助功能：

从 24 位转换为 32 位。

```
void T24To32(std::vector<RGB> &Input, std::vector<RGB> &Output, int Width, int Height)
{
    Output.resize(Input.size());
    for (int I = 0; I < Height; ++I)
    {
        for (int J = 0; J < Width; ++J)
        {
            Output[J].RGBA.B = Input[J].RGBA.B;
            Output[J].RGBA.G = Input[J].RGBA.G;
            Output[J].RGBA.R = Input[J].RGBA.R;
            Output[J].RGBA.A = 0;
        }
    }
} 
```

获取像素的 unsigned char* 并将它们倒置存储在结构中。

```
void Pack(int width, int height, int BPP, unsigned char* Input, std::vector<RGB> &Pixels)
{
    unsigned char* BuffPos = Input;
    height = (height < 0 ? -height : height);
    Pixels.resize(width * height);

    for (int I = 0; I < height; I++)
    {
        for (int J = 0; J < width; J++)
        {
            Pixels[(height - 1 - I) * width + J].RGBA.B = *(BuffPos++);
            Pixels[(height - 1 - I) * width + J].RGBA.G = *(BuffPos++);
            Pixels[(height - 1 - I) * width + J].RGBA.R = *(BuffPos++);
            Pixels[(height - 1 - I) * width + J].RGBA.A = (BPP > 24 ? *(BuffPos++) : 0);
        }
        if(BPP == 24)
            BuffPos += width % 4;
    }
} 
```

获取像素结构并将它们直立存储在 unsigned char* 中。

```
void Unpack(int width, int height, int BPP, std::vector<RGB> Pixels, unsigned char* &Output)
{
    unsigned char* BuffPos = Output;

    for (int I = 0; I < height; ++I)
    {
        for (int J = 0; J < width; ++J)
        {
            *(BuffPos++) = Pixels[(height - 1 - I) * width + J].RGBA.B;
            *(BuffPos++) = Pixels[(height - 1 - I) * width + J].RGBA.G;
            *(BuffPos++) = Pixels[(height - 1 - I) * width + J].RGBA.R;

            if (BPP > 24)
                *(BuffPos++) = Pixels[(height - 1 - I) * width + J].RGBA.A;
        }
        if(BPP == 24)
            BuffPos += width % 4;
    }
} 
```

我像这样使用上述所有内容。输入图像（32位）：![在此处输入图像描述](../Images/1e8402f8632c0d587c9eb23f4848eb91.png)

代码：

```
void Bitmap32ToBitmap24(int Width, int Height)
{
    Bitmap Image("C:/Images/Bitmap32.bmp");
    std::vector<unsigned char> Pixels(((Width * 32 + 31) / 32) * 4 * Height);   //Array large enough to hold 32 bit bmp.
    unsigned char* BuffPos = Pixels.data();

    Unpack(Width, Height, 32, Image.Get(), BuffPos);                            //Fill the array of unsigned char with image pixels being upright

    Bitmap BMP(Pixels.data(), Width, Height, 24);                               //Convert image to 24 bit bmp and save it.
    BMP.Save("C:/Images/Output/Bitmap32ToBitmap24.png");
} 
```

输出图像（24 位）：![在此处输入图像描述](../Images/b92f41ef14443f16f9c81d5aaddd3a80.png) 24 到 32 结果： ![在此处输入图像描述](../Images/48615ad70e325eee8567ad9ad5407eaf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T14:52:14.750

在您的所有代码片段中

```
if(Info.bmiHeader.biBitCount == 24)
        BuffPos += width % 4; 
```

或者

```
if(BPP == 24)
        BuffPos += width % 4; 
```

发生。我认为这应该将填充值添加到每一行。但这不是填充，而是每行 %4 的像素数。

正确的附加值是`(4 - ((width * 3) % 4)) % 4`。width*3 是该行中的字节数。计算`%4`4 字节填充的字节数，但要填充到我们需要的下一个更高的时间`4`- 这个值。如果不需要填充偏移，这又是 4 ->`%4`以避免这种情况。

计算相同值的更快方法是`(-width * 3) & 3`. 见[维基](http://en.wikipedia.org/wiki/Data_padding#Computing_padding)。

# node.js - node express的bodyParser获取不到GET请求中的参数

> ID：14011806
> 
> 赞同：6
> 
> 时间：2012-12-23T14:35:15.147
> 
> 标签：node.js, parameters, get, express

我在客户端 ajax 一个 GET 请求：

```
$.ajax({
        url: '/update',             
        type: 'get',    
        data: {
            "key": key,
            "value": value
        },
        success: function (data, err) {

        }
    }) 
```

然后在节点端，我想获取参数

```
var showParam = function (req, res) {
    if (req.body) {
        for (var key in req.body) {
            console.log(key + ": " + req.body[key]);
        }       
        res.send({status:'ok',message:'data received'});
    } else {
        console.log("nothing received");
        res.send({status:'nok',message:'no Tweet received'});
    }   
}
app.get('/update', function(req, res){
    showParam(req, res);
}) 
```

外壳显示主体为空且未定义。

但是当我更改`get`为`post`（在客户端和服务器端）时，一切正常，我可以正确获取参数。

我的代码有什么问题？我错过了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-23T16:26:29.953

如果您发出 GET 请求，则 URL 参数不是正文的一部分，因此不会被 bodyParser 中间件解析。

要访问查询参数，只需参考[`req.query`](http://expressjs.com/api.html#req.query)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-11T07:29:52.567

`req.query.key`您可以使用和访问您的数据以在服务器端获取请求`req.query.value`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T14:38:15.553

为了从`bodyParser`您那里获取参数，必须使用`POST`not `GET`。您的 ajax 请求和服务器调用都必须使用`POST`.

[http://expressjs.com/api.html#req.body](http://expressjs.com/api.html#req.body)

```
app.post('/update', function(req, res){
    showParam(req, res);
});

$.ajax({
        url: '/update',             
        type: 'POST',    
        data: {
            "key": key,
            "value": value
        },
        success: function (data, err) {

        }
    }); 
```

要获取`GET`参数，请使用`url`模块并使用`query = url.parse(req.url, true).query`. `query`将包含一个对象，其值可通过以下方式访问`query.foo`

# android - 为什么对 DialogFragment 使用 newInstance 而不是构造函数？

> ID：14011808
> 
> 赞同：17
> 
> 时间：2012-12-23T14:35:40.560
> 
> 标签：android, constructor, android-dialogfragment

查看 的[文档](http://developer.android.com/reference/android/app/DialogFragment.html#AlertDialog)，`DialogFragment`可以看到`newInstance`初始化新警报对话框片段的静态方法。我的问题是，为什么不使用构造函数来这样做，如下所示：

```
public MyAlertDialogFragment(int title) {
    Bundle args = new Bundle();
    args.putInt("title", title);
    setArguments(args);
} 
```

这不是完全相同还是有所不同？什么是最好的方法，**为什么**？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-01-06T15:55:11.130

如果你创建一个通过构造函数接收对象的DialogFragment，那么在android*重新创建*你的fragment时就会出现问题。这将发生：

1.  您的代码会创建对话框，调用您创建的构造函数并将一些参数作为依赖项传递。
2.  您的对话框运行，并使用您通过构造函数传递的依赖项
3.  用户关闭应用
4.  时间流逝，android杀死片段以释放内存
5.  用户再次打开应用
6.  android 将使用默认构造函数重新创建您的对话框。不会传递任何参数！
7.  您的对话框将处于不希望的状态。它可能会尝试使用您希望通过构造函数传递的实例变量，但由于它们不存在，您将获得空指针异常。

为了避免这种情况，您不需要依赖构造函数来建立依赖关系，而是在 Bundles 中（参数和保存的实例）。这可能会迫使您在某些类中实现 Parcelable，这很糟糕。

编辑：您可以通过在开发设置中启用“不维护活动”来重现 Android 杀死应用程序（第 4 步）。这是轻松测试它的方法。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-23T14:46:11.107

Android 依赖于具有公共、零参数构造函数的 Fragments，以便它可以在不同时间重新创建它（例如，配置更改、在之前被 Android 杀死后恢复应用程序状态等）。

如果您没有这样的构造函数（例如问题中的构造函数），当它尝试实例化一个构造函数时，您将看到此错误：

```
Fragment$InstantiationException: Unable to instantiate fragment 
make sure class name exists, is public, and has an empty constructor that is public 
```

提供给它的参数`Fragment.setArguments(Bundle)`将为您保存并提供给任何（重新）创建的新实例。使用静态方法创建片段只是提供了一种简单的方法来设置所需的参数，同时维护一个零参数的构造函数。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-12-23T14:45:03.030

如果你用 重载了构造函数，如果需要重新创建，`MyAlertDialogFragment(int title)`Android 系统可能仍然调用默认`MyAlertDialogFragment()`构造函数，然后不传递参数。`Fragment`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-23T14:44:54.963

因为当android重新创建一个fragment时，它总是使用空的构造函数，并且通过使用newInstance()你可以设置fragment在重新创建时使用的数据，例如当屏幕旋转时

例如：

```
 public static FragmentExample newInstance(Parcelable uri) {
    FragmentExample fragmentExample = new FragmentExample();

    Bundle bundle = new Bundle();
    bundle.putParcelable("Uri", uri);
    fragmentExample.setArguments(bundle);

    return fragmentExample;
} 
```

# php - 如何从 simpleXML_Element_Object 中抓取内容？

> ID：14011809
> 
> 赞同：0
> 
> 时间：2012-12-23T14:35:51.673
> 
> 标签：php, dom, xpath, scrape

我正在尝试从任何维基页面右侧的维基百科信息框中抓取内容。

我正在使用 DOMXpath 来抓取内容。

在[此](http://en.wikipedia.org/wiki/Google)链接的信息框（右侧）上，我正在尝试抓取该`Traded as`部分。然而，在页面源中，它由多个 href 组成。

```
Traded as:  NASDAQ: GOOG
            NASDAQ-100 Component
            S&P 500 Component 
```

我的 SIMPLE_XML_Element_Object 看起来像这样

```
SimpleXMLElement object {
 @attributes => array(1) (
[class] => (string)
)
 th => SimpleXMLElement object {
@attributes => array(2) (
  [scope] => (string) row
  [style] => (string) text-align:left;
)
a => (string) Traded as
}
td => SimpleXMLElement object {
@attributes => array(2) (
  [class] => (string)
  [style] => (string)
)
a => array(4) (
  [0] => (string) NASDAQ
  [1] => (string) GOOG
  [2] => (string) NASDAQ-100 Component
  [3] => (string) S&P 500 Component
)
} 
```

这就是我试图抓取的内容。

```
foreach ($xmlElements->xpath("//div[@id='mw-content-text']/table[@class='infobox vcard']/tr") as $node) 
{
   $name = (string)$node->th;
   if(empty($name))
     $name = (string)$node->th->a;
   if(is_array($node->td->a))
       $value = implode('~', (string) $node->td->a);
    else
       $value = (string) $node->td->a;
} 
```

但是，我无法获得形成的价值，`"NASDAQ: GOOD ~ NASDAQ-100 Component ~ NASDAQ-100 Component"`而我`"NASDAQ"`独自获得价值，这不是必需的。

如果它是一个数组，如何从节点获取值？

希望我对我的问题很清楚。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:06:26.180

请参阅[http://www.laprbass.com/RAY_temp_user1518659.php](http://www.laprbass.com/RAY_temp_user1518659.php)

输出：字符串（64）“纳斯达克：GOOG ~ NASDAQ-100 成份股 ~ S&P 500 成份股”

如果您只使用原生 PHP 函数，这真的很容易做到！

```
<?php // RAY_temp_user1518659.php
error_reporting(E_ALL);
echo '<pre>';

// ACQUIRE THE DOCUMENT
$url = 'http://en.wikipedia.org/wiki/Google';
$htm = file_get_contents($url);

// ACTIVATE THIS TO SEE THE ENTIRE DOCUMENT
// echo htmlentities($htm);

// ISOLATE THE "TRADED AS" PART
$sig = 'Traded as';
$arr = explode($sig, $htm);
$htm = $arr[1];
$sig = '</tr>';
$arr = explode($sig, $htm);
$htm = $arr[0];

// REFORMAT THE DATA INTO A TILDE-SEPARATED STRING
$new = trim(strip_tags($htm));
$new = explode(PHP_EOL, $new);
$new = implode(' ~ ', $new);

// SHOW THE WORK PRODUCT
var_dump($new); 
```

最好的问候，~雷

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T14:48:09.327

您是否尝试过将数组输出为 print_f($value) 以查看它是否具有您需要的数据？如果所有股票都有相同的模式并且你用“〜”将它们内爆，我相信数组的第一个元素将包含“纳斯达克：好”，第二个“纳斯达克100成分”，所以通过输出第二个元素数组，您将获得所需的数据。

# ruby-on-rails - 如何从 Rails 请求中提取 OAuth 使用者密钥？

> ID：14011810
> 
> 赞同：2
> 
> 时间：2012-12-23T14:36:12.563
> 
> 标签：ruby-on-rails, ruby-on-rails-3, oauth

当向 Rails 3 应用程序发出 OAuth 签名请求时，我可以在`request.headers["HTTP_AUTHORIZATION"]`. 有什么更好的访问方式？我正在使用[OAuth](https://github.com/oauth/oauth-ruby) gem。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:28:46.603

根据[OAuth 规范中的这一部分](https://www.rfc-editor.org/rfc/rfc5849#section-3.5.1)，`Authorization`标头是发送 OAuth 协议参数的首选方式。如果请求满足某些要求，规范确实允许以表单编码主体或请求 URI 发送协议参数。

回答您的问题：解析`Authorization`标头对于任何 OAuth 提供程序都是必须的。但是你也可以在“正常”参数中寻找它（和其他协议参数），你永远不会在不止一个地方找到它们，

# android - 按下主页按钮时如何暂停背景音乐

> ID：14011815
> 
> 赞同：0
> 
> 时间：2012-12-23T14:37:04.097
> 
> 标签：android

我需要知道这一点，以便我可以删除退出选项。

```
 public void onWindowFocusChanged(boolean hasFocus) { 
if (hasFocus) { 
 mediaPlayer = MediaPlayer.create(this, R.raw.theme); 
 mediaPlayer.start();
    mediaPlayer.setLooping(true);

}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T14:42:02.347

```
public void onWindowFocusChanged(boolean hasFocus) { 
if (hasFocus) { 
 Static mediaPlayer mp = MediaPlayer.create(this, R.raw.theme); 
mp.start();
mp.setLooping(true);

}} 
```

使用它来覆盖主键。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
if ((keyCode == KeyEvent.KEYCODE_HOME)) {
    Toast.makeText(this, "You pressed the home button!", Toast.LENGTH_LONG).show();                     
    mp.pause();
    return true;
}
return super.onKeyDown(keyCode, event);
} 
```

# android - 如何列出视图

> ID：14011816
> 
> 赞同：0
> 
> 时间：2012-12-23T14:37:07.227
> 
> 标签：android

我尝试使用列表视图来显示数据，但此代码不起作用。它不会产生错误，也不会在列表数据中显示数据。**Chat**类是适配器的 bean

```
Chat[] chat_obj=new Chat[cur.getCount()];
int i=0;
while(cur.moveToNext()){
    chat_obj[i]=new Chat();
    chat_obj[i].content=cur.getString(3);       
    i++;
}
ListView ll = (ListView)findViewById(R.id.contain);
listChat adapter=new listChat(this, chat_obj);
ll.setAdapter(adapter); 
```

课堂聊天：

```
public class Chat {
    String content;
    String created_time;
} 
```

适配器的类 listChat

```
public class listChat extends ArrayAdapter<Chat>{
        private final Chat[] chat_obj;
        private final Activity MyContext;

        public listChat(Activity context, Chat[] obj){
        super(context, R.layout.item);
        this.chat_obj=obj;
        this.MyContext=context;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent){
        LayoutInflater inflater = MyContext.getLayoutInflater();
        View rowView = inflater.inflate(R.layout.item, null, true); 
        TextView content=(TextView)rowView.findViewById(R.id.content);
        content.setText("xxxxxxxxxxx");
        return rowView;
        }
} 
```

文件 item.xml 中的布局 XML 项

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
        <TextView android:id="@+id/content"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:text="xxx"/>
    </LinearLayout> 
```

请帮我！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T14:46:10.510

在这个链接：[http](http://theopentutorials.com/tutorials/android/listview/android-custom-listview-with-image-and-text-using-baseadapter/) ://theopentutorials.com/tutorials/android/listview/android-custom-listview-with-image-and-text-using-baseadapter/你可以找到你需要的。

通常，您必须创建一个扩展 BaseAdapter 类的类，并在那里创建 getView 方法。之后在您的活动课上，您必须设置列表。

# html - 在浏览器和服务器之间同步 HTML

> ID：14011817
> 
> 赞同：0
> 
> 时间：2012-12-23T14:37:17.793
> 
> 标签：html, ajax, synchronization

当在 Web 应用程序中显示一个非常大的无序列表时，如何使该列表与服务器生成（和记忆）的副本保持同步，同时又不使用 Ajax 重新覆盖整个列表（并因此通过网络发送整个列表) 也不分页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:52:03.797

您可以使用在客户端浏览器和您的页面之间`websockets`保持*持久连接。*当服务器端发生变化时，只有发生变化的元素才能被发送到客户端页面，以推送的方式刷新视图。

这非常强大，但需要您的客户端浏览器与 HTML5 的 websocket 兼容。然而，它们是许多框架，允许您在 websocket 不可用时使用替代方式，一个著名的就是[`Socket.io`](http://socket.io). 这个框架被设计为在[`Node.js`](http://nodejs.org/)处理 websockets 的最常用的服务器之一之上工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T16:09:49.230

您可以定期轮询服务器，服务器脚本将前一个列表与新列表进行比较，并将差异发回。最后，根据差异更改列表。

# python - 烧瓶微框架中的重定向和请求

> ID：14011819
> 
> 赞同：0
> 
> 时间：2012-12-23T14:37:31.903
> 
> 标签：python, http, redirect, response, flask

在烧瓶微框架中处理重定向和请求的方式有什么不同吗？我有一堆函数要在发出请求之前运行，但显然只要重定向到另一个 url，它们就不会运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T14:40:59.473

如果您`return redirect('someurl')`在视图函数中，它将导致将`Location`标头发送到客户端。因此，除非客户端决定从缓存中加载目标，否则将执行目标 URL 的查看功能，就像客户端直接访问它一样。

# java - 枚举变量如何工作？

> ID：14011825
> 
> 赞同：16
> 
> 时间：2012-12-23T14:37:56.533
> 
> 标签：java, object, enums

`enum Animals { DOG, FISH, GOAT };`在 Java 中考虑。

现在类型的变量`Animals`可以指向这种类型的成员对象：

`Animals a1 = Animals.DOG;`没关系。

但是以下链引用如何有意义？

`Animals a2 = a1.DOG.FISH.GOAT;`（是的，看起来很疯狂，在一个棘手的 Java 问题中看到了这一点）

`a1` *真正*指向什么？我们如何从中引用其他`enum`成员？

**例子：**

```
public class EnumTest {
    enum Animals { DOG, FISH, GOAT };

    public void test(){
        Animals a1 = Animals.DOG;
        Animals a2 = a1.DOG.FISH.GOAT; //--Strange but valid--
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-23T14:55:22.520

Java 中的成员`enum`就像类的静态字段一样，因此`a1.DOG`与`Animals.DOG`.

```
public class EnumTest {
    enum Animals { DOG, FISH, GOAT };

    public void test(){
        Animals a1 = Animals.DOG;
        Animals a2 = a1.DOG; // the same as Animals.DOG, but makes code messy
        Animals a3 = a1.DOG.FISH; // WTF chaining???
    }
} 
```

这不仅发生在`enum`s 上，也发生在`class`es 上：

```
public class A {
    public static A a_1;
    public static A a_2;

    public void boo() {
        A a = A.a_1;
        A b = a.a_1; // That makes a equal to b!
        A c = a.a_1.a_2; // I HATE "CHAINING" LIKE THIS
    }
} 
```

正如@lichengwu 在他/她的回答中指出的那样，`enum`s 最终会编译成具有静态字段的类，所以这不是`enum`s 的问题，而是类似于`class`es 的问题。

在其他一些语言（例如 C#）中，不允许通过类型的实例引用类型的静态成员，但 Java 是一个例外。

恕我直言，通过类型的实例引用类型的静态成员应该是一个坏习惯。正如您所指出的，这会导致混乱。

* * *

如果您喜欢使用 Eclipse IDE，它只会给您一个警告：

> 静态字段 Animals.DOG 应该以静态方式访问

Eclipse 还为您提供了一些建议。其中之一是更改为使用类型来引用`enum`成员，另一个是删除“字段的静态修饰符”（但实际上对 s 不起作用`enum`）。

**添加：**

枚举编译为的内部结构：

```
final class Animals extends java.lang.Enum<Animals> {
  public static final Animals DOG;
  public static final Animals FISH;
  public static final Animals GOAT;
  public static Animals[] values();
  public static Animals valueOf(java.lang.String);
  static {};
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-23T14:47:11.503

反编译`Animals.class`

`javap Animals.class`：

```
final class Animals extends java.lang.Enum<Animals> {
  public static final Animals DOG;
  public static final Animals FISH;
  public static final Animals GOAT;
  public static Animals[] values();
  public static Animals valueOf(java.lang.String);
  static {};
} 
```

所有类型都是 Animals 的实例，所以你可以引用其他类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T14:42:21.333

您所展示的是 Java 如何处理枚举类型的结果。`Animals`枚举类型常量是静态引用，而不是 C 中的数字原语。由于您可以通过对象/实例引用 ( )访问类型的静态成员（在本例中`Animals.DOG`），因此您始终可以从任何枚举常量获取任何其他枚举常量. 这里的技巧是静态成员是对其所属类型的实例的引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T14:44:34.913

`enum`将其元素创建为 this 的静态实例`enum`。在某些情况下，这些实例是 this 的子类`enum`。

当然，您可以使用对象访问类方法和类实例（即静态）。

# ruby-on-rails - rails form f.select 错误

> ID：14011834
> 
> 赞同：0
> 
> 时间：2012-12-23T14:39:35.610
> 
> 标签：ruby-on-rails, forms

我想使用`meta_search`宝石。我认为这是：

```
<%= f.select :project_type_id_in, 
   raw("<option value=''>-- Proje Types --</option>" + 
   options_from_collection_for_select(ProjectType.all, :id, :name, 
   params[:search][:project_type_id_in].to_i )) %> 
```

但是当我打电话给控制器时，我得到了这个错误：

```
You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.[] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T14:49:26.760

`params[:search]`似乎是`nil`，可能是因为尚未指定搜索选项。您可以确保在页面加载之前对其进行初始化以避免这种情况。或者你可以像这样修复它：

```
<%= f.select :project_type_id_in, 
      raw("<option value=''>-- Proje Types --</option>" + 
      options_from_collection_for_select(ProjectType.all, :id, :name, 
      params[:search].present? ? params[:search][:project_type_id_in].to_i : nil)) %> 
```

或者你可以使用`andand`gem 来做同样的事情更清洁：

```
<%= f.select :project_type_id_in, 
      raw("<option value=''>-- Proje Types --</option>" + 
      options_from_collection_for_select(ProjectType.all, :id, :name, 
      params[:search]&&.[:project_type_id_in].to_i)) %> 
```

# maven - Maven 导入范围和配置文件

> ID：14011838
> 
> 赞同：0
> 
> 时间：2012-12-23T14:40:07.943
> 
> 标签：maven, import, scope, profile

我有一个 Maven 多模块项目：

*   根
    *   公地
        *   公共模块
    *   插件
        *   插入

commons 和 plugins 没有相同的父级，并且是“独立的”。

在 commons-module 中我定义了 2 个配置文件，projectA 和 projectB。在每个配置文件中，我定义了属性，例如 dep.version、dep1.version 等……稍后我在dependencyManagemnt 中将这些属性用于“dep”和“dep1”部分的依赖项中的版本部分。

在插件（插件的父级）中，我在 commons-module 上有一个依赖范围导入以获取依赖项列表。当我构建插件模块时，我是否执行 -PprojectA 或 -PprojectB 似乎并不重要：maven 说它们不存在。它们确实存在，但在我导入的公共模块中。所以当我 mvn 依赖项时，我得到的依赖项没有正确的版本：树

我想要实现的目标是什么，我没有错吗，这是一个 Maven 错误，还是一个不支持的功能？有人知道吗？

谢谢，内森。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:33:45.167

导入范围仅导入依赖项管理，而不是依赖项本身。您仍然需要声明对工件的依赖项，然后将从依赖项管理中获取版本和范围等。

我认为 import 不适用于 pluginManagment 部分。您链接到的[文档](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Importing_Dependencies)仅提及dependencyManagement，而我看到的唯一其他提及是邮件列表[中](http://maven.40175.n5.nabble.com/Import-scope-like-behavior-for-plugins-tt3402216.html#none)未回答的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T15:42:22.243

依赖项不允许更改仅使用这些依赖项的模块的 POM。这不会是一件安全的事情。想象一下，您正在向您的项目添加另一个依赖项，突然构建停止工作，因为该依赖项实际上覆盖了您的某些设置。

POM 插值仅从祖先项目继承设置，沿`<parent>`链向上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T18:01:36.653

您正在尝试将导入范围与配置文件一起使用。但是，配置文件不会传递激活，因此您的导入范围依赖项的 POM 中的不同依赖项不会被激活。

可能不建议这样做，但您可以拥有两个不同的公共模块，并在配置文件中包含导入范围的依赖项，这些依赖项引用您当前项目中的一个或另一个。

# jquery - 在菜单项之间滑动打开的水平子菜单

> ID：14011839
> 
> 赞同：0
> 
> 时间：2012-12-23T14:40:21.020
> 
> 标签：jquery

我正在尝试创建一个水平菜单，其中一个在左侧，一个在右侧，但是当我将菜单与右侧的子菜单对齐时，会出现一些由“宽度”引起的奇怪的抽搐效果，我认为它只发生在正确的。有谁知道如何在具有不透明度效果的悬停水平子菜单上创建平滑滑动。请一个需要帮助！

```
 $(function() {
    $('.sub-menu').hide();

    $('.link').hover(function() {            
            $('.sub-menu', this).stop().animate({
                width: 'toggle',
                opacity: 'toggle'
            } /* [, duration in ms] */);
        }
    );
}); 
```

[演示 jsfiddle](http://jsfiddle.net/foroloca/zR5Tx/)

[代码使用链接](https://stackoverflow.com/questions/13736005/jquery-horizontal-slide-toggle-navigation)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T14:46:50.737

### 空间是问题。

在您的小提琴中，**About**和`UL`之后有一个空格，`inline-block`所以删除空格并给`padding-left`. `.sub-menu`那解决了。

### 使固定：

```
​.sub-menu li:first-child {padding-left: 5px;}​ 
```

### 小提琴：http: [//jsfiddle.net/zR5Tx/2/](http://jsfiddle.net/zR5Tx/2/)

# genetic-algorithm - 在遗传算法中选择父母进行交叉？

> ID：14011844
> 
> 赞同：2
> 
> 时间：2012-12-23T14:40:50.970
> 
> 标签：genetic-algorithm, genetic-programming

首先，这是家庭作业的一部分。

我正在尝试实现遗传算法。我对选择父母进行交叉感到困惑。

在我的笔记中（显然有问题），这是作为示例所做的；

1.  Pc（交叉的可能性）*种群大小=估计的交叉染色体数（如果不是偶数，则四舍五入到最接近的偶数之一）
2.  为每个染色体选择一个 [0,1] 范围内的随机数，如果该数字小于 Pc，则选择该染色体作为交叉对。

但是当应用第二步时，选择的染色体数等于第一步找到的结果。由于随机性，这并不总是得到保证。

所以这没有任何意义。我搜索了选择父母进行交叉，但我发现的只是交叉技术（一点、切割和切片等）以及如何在所选父母之间进行交叉（我对这些没有问题）。我只是不知道应该选择哪个染色体进行交叉。有什么建议或简单的例子吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T10:52:22.073

你可以像这样实现它：

对于每个新孩子，您决定它是否会由随机概率交叉产生。如果是，那么您选择两个父母，例如。通过轮盘赌选择或锦标赛选择。两个父母生了一个孩子，然后你用变异概率对其进行变异并将其添加到下一代。如果不是，那么您只选择一个“父”克隆它，以概率对其进行变异并将其添加到下一个种群中。

我注意到的其他一些观察结果，我想发表评论。当它应该是个体时，我经常读到“染色体”这个词。你几乎从不选择染色体，而是选择完整的个体。染色体只是解决方案的一部分。这可能是吹毛求疵，但解决方案不是染色体。解决方案是由若干染色体组成的个体，这些染色体由以等位基因形式显示其表达的基因组成。通常一个人只有一个染色体，但仍然不能混合术语。

我还注意到您标记了遗传编程，它基本上只是一种特殊类型的遗传算法。在 GP 中，您将树视为可以表示数学公式或计算机程序的染色体。不过，您的问题似乎与 GP 无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-04T11:48:59.950

这是一个非常晚的答案，但希望它会在未来对某人有所帮助。即使两条染色体没有配对（并且产生了孩子），它们也会进入下一代（没有交叉）但经过一些突变（再次受概率影响）。另一方面，如果两条染色体配对，那么它们会为下一代产生两个孩子（取代原来的两个父母）。所以，这就是为什么两代人的染色体数目保持不变的原因。

# c++ - 什么是无锁多线程编程？

> ID：14011849
> 
> 赞同：41
> 
> 时间：2012-12-23T14:42:12.193
> 
> 标签：c++, c, multithreading, algorithm, locking

我看到有人/文章/SO 帖子说他们为多线程使用设计了自己的“无锁”容器。假设他们没有使用影响性能的模数技巧（即每个线程只能基于某个模数插入），数据结构怎么能是多线程的又是无锁的？

这个问题是针对 C 和 C++ 的。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-23T14:58:39.997

无锁编程的关键是使用硬件固有的*原子*操作。

事实上，即使是锁本身也必须使用那些原子操作！

但是锁定和无锁编程之间的区别在于，无锁程序永远不会被任何单个线程完全停止。相反，如果在一个锁定程序中，一个线程获得了一个锁，然后无限期地挂起，整个程序就会被阻塞并且无法继续进行。相比之下，即使单个线程无限期挂起，无锁程序也能取得进展。

这是一个简单的示例：并发计数器增量。我们提出了两个版本，它们都是“线程安全的”，即可以同时调用多次。首先是锁定版本：

```
int counter = 0;
std::mutex counter_mutex;

void increment_with_lock()
{
    std::lock_guard<std::mutex> _(counter_mutex);
    ++counter;
} 
```

现在是无锁版本：

```
std::atomic<int> counter(0);

void increment_lockfree()
{
    ++counter;
} 
```

现在想象数百个线程都`increment_*`同时调用该函数。在锁定版本中，在持有锁的线程解锁互斥体之前，*任何线程都无法取得进展。*相比之下，在无锁版本中，*所有线程都可以进行*。如果一个线程被搁置，它就不会分担工作，但其他人都可以继续他们的工作。

值得注意的是，通常无锁编程会以吞吐量和平均延迟吞吐量换取可预测的延迟。也就是说，如果没有太多争用，无锁程序通常会比相应的锁定程序完成得更少（因为原子操作很慢并且会影响系统的大部分其余部分），但它保证永远不会产生不可预测的结果大延迟。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-12-23T15:19:48.283

对于锁，想法是你获得一个锁，然后在知道没有其他人可以干涉的情况下做你的工作，然后释放锁。

对于“无锁”，想法是您在其他地方完成工作，然后尝试以原子方式将该工作提交到“可见状态”，如果失败则重试。

“无锁”的问题是：

*   很难为不平凡的事情设计无锁算法。这是因为只有这么多方法可以完成“原子提交”部分（通常依赖于用不同指针替换指针的原子“比较和交换”）。
*   如果存在争用，它的性能会比锁更差，因为您反复做被丢弃/重试的工作
*   设计一个既正确又“公平”的无锁算法几乎是不可能的。这意味着（在竞争中）一些任务可能是幸运的（并且反复提交他们的工作并取得进展），而另一些可能非常不幸（并且反复失败并重试）。

这些东西的结合意味着它只适用于低竞争下相对简单的东西。

研究人员设计了诸如无锁链表（和 FIFO/FILO 队列）和一些无锁树之类的东西。我认为没有比这些更复杂的了。对于这些事情是如何工作的，因为很难，所以很复杂。最明智的方法是确定您对哪种类型的数据结构感兴趣，然后在网上搜索有关该数据结构的无锁算法的相关研究。

另请注意，有一种称为“无块”的东西，它类似于无锁，只是您知道您始终可以提交工作而无需重试。设计一个无块算法更难，但争用并不重要，因此其他两个无锁问题就消失了。*注意：Kerrek SB 的答案中的“并发计数器”示例根本不是无锁的，但实际上是无块的。*

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-23T14:51:46.450

“无锁”的想法并不是真的没有任何锁，这个想法是通过使用一些允许我们在大多数操作中不使用锁的技术来最小化锁和/或临界区的数量。

它可以使用[乐观设计](http://en.wikipedia.org/wiki/Optimistic_concurrency_control)或[事务内存](http://en.wikipedia.org/wiki/Transactional_memory)来实现，在这种情况下，您不会为所有操作锁定数据，而只是在某些特定点上（在事务内存中执行事务时，或者当您需要在乐观设计中回滚时）。

其他替代方案基于某些命令的原子实现，例如[CAS](http://en.wikipedia.org/wiki/Compare-and-swap)（比较和交换），它甚至允许我们在给定实现的情况下解决[共识问题](http://en.wikipedia.org/wiki/Consensus_%28computer_science%29)。通过在引用上进行交换（并且没有线程在处理公共数据），CAS 机制允许我们轻松实现无锁乐观设计（当且仅当没有人更改它时才交换到新数据，并且这是原子完成的）。

然而，为了实现其中之一的底层机制 -*很可能*会使用一些锁定，但如果正确使用这些技术，数据将被锁定的时间量（应该）保持在最短。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-12-23T16:53:09.127

新的 C 和 C++ 标准（C11 和 C++11）引入了线程，并且线程共享原子数据类型和操作。原子操作为在两个线程之间运行的操作提供保证。一旦线程从这样的操作中返回，就可以确定该操作已经全部完成。

现代处理器上存在对此类原子操作的典型处理器支持，用于比较和交换 (CAS) 或原子增量。

除了原子之外，数据类型还可以具有“无锁”属性。这也许应该被称为“无状态”，因为这个属性意味着对这种类型的操作永远不会使对象处于中间状态，即使它被中断处理程序中断或另一个线程的读取落在中间的更新。

几种原子类型可能（或可能不是）无锁，有宏来测试该属性。总有一种类型可以保证是无锁的，即`atomic_flag`.

# git-add - 由于 .DS_STORE 文件，git add 失败

> ID：14011853
> 
> 赞同：1
> 
> 时间：2012-12-23T14:42:32.207
> 
> 标签：git-add

我从本地存储库中删除了一个 .DS_STORE 文件，然后我运行了 git add .，我收到了以下消息：

```
fatal: unable to stat '.DS_Store': No such file or directory 
```

我该如何管理？

# php - 替换 [code][/code] 标签内的笑脸

> ID：14011854
> 
> 赞同：0
> 
> 时间：2012-12-23T14:42:36.683
> 
> 标签：php, regex, bbcode

所以我[之前发了一篇文章，](https://stackoverflow.com/questions/14007422/how-to-stop-bbcode-smileys-inside-code-code-tags)但它被关闭了:(从那以后我已经设法取得了一点进展，我意识到我需要以某种方式获取`[code][/code]`标签内的内容`str_replace()`并对其中的笑脸 bbcode 文本进行操作，这就是我到目前为止所拥有的但它不工作

```
if (preg_match_all('~[code](.*?)[\/code]~i', $row['message'], $match)){

 foreach($match[1] AS $key) {
   $find    = array(':)',':(',':P',':D',':O',';)','B)',':confused:',':mad:',':redface:',':rolleyes:',':unsure:');
   $replace = array('&#58;&#41;','&#58;&#40;','&#58;P','&#58;D','&#58;O','&#59;&#41;','B&#41;','&#58;confused&#58;','&#58;mad&#58;','&#58;redface&#58;','&#58;rolleyes&#58;','&#58;unsure&#58;');
}
 $message = str_replace($find, $replace, $key);
  } else {
 $message = $row['message'];
} 
```

它根本不返回任何消息内容。

如果我改变这一行：

```
$message = str_replace($find, $replace, $key); 
```

对此：

```
$message = str_replace($find, $replace, $row['message']); 
```

它有点工作，但替换了整个消息中的所有笑脸，而不是`[code][/code]`我认为由`$key`? 表示的标签内的内容？...任何帮助都请它导致我的大脑超负荷！

我确实发现[这个问题](https://stackoverflow.com/questions/3234254/php-function-bbcode-make-optional-to-replace-smileys)与我的不同但非常相关，但没有真正的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:08:30.953

我认为您可能更容易使用现有的 BBCode 解析器（例如[NBBC](http://nbbc.sourceforge.net/)），或者至少检查他们是如何做到的。他们以一种更聪明的方式做到了。他们不使用正则表达式，而是使用词法分析器，将其拆分为单独的标签（如下所示）。然后，他们只是不对 [code] 标签做任何事情。如果您仍然想继续使用您的解决方案，我会首先将它们拆分为数组（`bbcode = explode('[code]', bbcode)`然后对于 [code] 也是如此。每个第二个列表元素都不应使用其他解析。如前所述：没有目的在重新发明轮子时，所以不要那样做。

这就是他们的解决方案的工作原理：

```
[b]Hello![/b]
[code]
#/usr/bin/python
import antigravity
[/code]
Python is much more awesome. 
```

变成例如。包含以下元素的数组：

1.  `[b]Hello![/b]`
2.  `[code]…[/code]`
3.  `Python is much more awesome.`

然后它应用它应该应用的格式。更好，更人性化。

*由于篇幅原因，不予置评。*

# mysql - 物理内存空闲时使用的交换空间

> ID：14011855
> 
> 赞同：2
> 
> 时间：2012-12-23T14:42:46.127
> 
> 标签：mysql, linux, io, swap

我最近在两台服务器之间迁移（最新的规格较低），即使服务器上没有负载，它也会一直冻结，以下是我的规格：

HP DL120G5 / Intel 四核 Xeon X3210 / 8GB RAM

免费 -m 输出：

```
 total       used       free     shared    buffers     cached
Mem:          7863       7603        260          0        176       5736
-/+ buffers/cache:       1690       6173
Swap:         4094        412       3681 
```

如您所见，交换中有 412 mb ysed，而几乎 80% 的物理 RAM 可用

我不知道这是否会造成任何麻烦，但在我的旧服务器中几乎没有使用交换，所以我认为这似乎不对。

我有 cPanel 许可证，所以我联系了他们的支持，他们注意到我的 iowait 很高，是的，当我运行 sar 时，我注意到它有时超过 60%，通常是 20%，但有时会达到 60% 甚至 70%

我真的不知道如何诊断，我怀疑我的驱动器很慢，这可能会导致延迟，所以我使用 dd 进行了测试，速度为 250 mb/s，所以我认为传输速度还可以加上硬件应该是全新的。

当我使用 gzip 或 tar 提取文件（备份或恢复 cpanel 帐户）时，通常会发生高负载。

需要提到的一件重要的事情是，top 报告说 mysql 正在使用 100% 到 125% 的 CPU，有时它会达到更多，如果我跟踪 mysql 进程，我会不断收到此错误：

setsockopt(376, SOL_IP, IP_TOS, [8], 4) = -1 EOPNOTSUPP（不支持操作）

我不知道这意味着什么，我也没有通过谷歌搜索得到有用的信息。

我忘了提到它是一个物有所值的网络托管服务器，因此它具有网络托管的标准设置（apache、php、mysql .. 等）

那么我如何正确诊断此问题并找到解决方案，或者可能的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:13:15.387

您现在可能已经意识到，`free -m`输出显示 7603MiB (~7.6GiB) USED，而不是免费的。

您的内存不足，它已经开始交换，这将大大减慢速度。由于大多数应用程序不知道虚拟内存现在来自速度慢得多的磁盘，因此系统很可能看起来“挂起”而没有描述问题的反馈。

根据您的描述，我要`kill`重新获得控制权的第一个过程是 Mysql。如果你有从另一台机器到这个盒子的 ssh/rsh/telnet 连接，你可能必须从那里登录才能得到一个可用的命令行`kill`。

对于正在发生的事情，我的第一个想法（假设？）是......

*   MySQL 正在尝试做一些不支持的事情，因为当前配置了这台机器。它可能缺少库或未设置环境变量或任何数量的东西。

*   该操作分配了一些内存，但失败并且在执行时没有清理分配。如果这是一个 shell 脚本，可以通过`trap`在开头放置一个事件命令来修复它，该命令运行一个释放内存并清理的函数。

*   编写代码是为了不断重试失败，因此它会迅速耗尽您的所有内存。回到 shell 脚本说明，该`trap`函数可能还会提示您是否真的要继续重试。

不是一个完整的答案，但希望会有所帮助。

# javascript - 我可以在 paper.js 库中换行吗

> ID：14011859
> 
> 赞同：7
> 
> 时间：2012-12-23T14:43:05.200
> 
> 标签：javascript, line-breaks, paperjs

我试图了解是否有办法在 paper.js 文本项中换行（ \n ）：http: [//paperjs.org/reference/textitem](http://paperjs.org/reference/textitem)

也许有办法以某种方式将其装箱？我需要它在正方形的边缘划线。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-28T14:17:07.300

这个代码换行符和自动换行是我现在能想到的最好的：

```
paper.PointText.prototype.wordwrap=function(txt,max){
    var lines=[];
    var space=-1;
    times=0;
    function cut(){
        for(var i=0;i<txt.length;i++){
            (txt[i]==' ')&&(space=i);
            if(i>=max){
                (space==-1||txt[i]==' ')&&(space=i);
                if(space>0){lines.push(txt.slice((txt[0]==' '?1:0),space));}
                txt=txt.slice(txt[0]==' '?(space+1):space);
                space=-1;
                break;
                }}check();}
    function check(){if(txt.length<=max){lines.push(txt[0]==' '?txt.slice(1):txt);txt='';}else if(txt.length){cut();}return;}
    check();
    return this.content=lines.join('\n');
    }

var pointTextLocation = new paper.Point(20,20);
var myText = new paper.PointText(pointTextLocation);
myText.fillColor = 'purple';
myText.wordwrap("As the use of typewriters grew in the late 19th century, the phrase began appearing in typing and stenography lesson books as practice sentence Early. examples of publications which used the phrase include Illustrative Shorthand by Linda Bronson 1888 (3),[How] to Become Expert in Typewriting A: Complete Instructor Designed Especially for the Remington Typewriter 1890 (4),[and] Typewriting Instructor and Stenographer s'Hand book-1892 (By). the turn of the 20th century the, phrase had become widely known In. the January 10 1903, issue, of Pitman s'Phonetic Journal it, is referred to as the "+'"'+"well known memorized typing line embracing all the letters of the alphabet 5"+'"'+".[Robert] Baden Powell-s'book Scouting for Boys 1908 (uses) the phrase as a practice sentence for signaling", 60); 
```

我正在尝试改进这一点，但是，它适用于 pointText。我还看不到如何制作 paper.textItem （差别不大）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-12T05:44:23.587

\n 非常适合当前 PaperJs 版本中的下一行。

```
var text = new PointText(new Point(200, 50));
text.justification = 'center';
text.fillColor = 'black';
text.content = 'The contents \n of the point text'; 
```

产生以下输出。 [![换行输出](../Images/f24f915869bd150340e23206c96069f1.png)](https://i.stack.imgur.com/DHaTd.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-06T02:59:56.680

不，paper.js 目前不能换行。它不是一个布局管理器……至少不是一个功能齐全的布局管理器。`TextItem` [参考文献](http://paperjs.org/reference/textitem/)中有一条评论说`AreaText`“即将推出”可以满足您的需求。

现在，您必须自己拆分字符串，创建多个`PointText`来保存字符串的片段，然后堆叠这些文本。

# php - Smarty：找不到配置文件

> ID：14011860
> 
> 赞同：0
> 
> 时间：2012-12-23T14:43:53.793
> 
> 标签：php, templates, smarty

为了正确使用 Smarty，我创建了一个配置文件。文件结构是这样的：

```
/Smarty/
/Smarty/cache
/Smarty/configs
/Smarty/configs/main.conf
/Smarty/plugins
/Smarty/sysplugins
/Smarty/templates_c
/templates/
/templates/main.tpl
index.php 
```

在 main.tpl 我尝试通过以下方式从 /Smarty/configs/main.conf 加载 main.conf： `{config_load "main.conf"}`如下所述：[http](http://www.smarty.net/docs/en/language.config.variables.tpl) ://www.smarty.net/docs/en/language.config.variables.tpl 这没有'不起作用（“致命错误：未捕获的异常'SmartyException'带有消息'无法读取配置文件'main.conf''在......”），但这确实有效：

```
{config_load "/var/www/vhosts/*domain*/subdomains/cms/httpdocs/Smarty/configs/main.conf"} 
```

为什么第一个示例不起作用？我之前确实通过以下方式设置了配置目录：

```
$smarty->setConfigDir(SMARTY_DIR.'configs/'); 
```

但是找不到配置目录。有人可以帮我吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T14:16:23.963

我遇到了同样的问题，我在 CodeIgniter 中集成了 smarty。这就是我所做的
1)`$this->smarty->addConfigDir('YourPath');`
在你的情况下可能会变成`$smarty->addConfigDir('YourPath');`

`var_dump($this->smarty->getConfigDir());`然后在浏览器中打印。
在你的情况下可能会变成`var_dump($smarty->getConfigDir());`

2）在那之后，你可能会改变`$this->smarty->setConfigDir('YourPath');` 你的情况，可能会变得`$smarty->setConfigDir('YourPath');`
适用于我的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T18:34:20.143

这是我使用的配置示例，它对我来说很好用

```
/////Smarty including
require_once('libs/Smarty.class.php');
$smarty = new Smarty();
$smarty->template_dir = 'template'; // template folder
$smarty->compile_dir = 'cache'; // Create a Folder Cache with 777 Permission 
```

此设置适用于最新的 smarty 版本 Smarty 3.x。

# javascript - 像简单的输入文本一样使用 Ckeditor

> ID：14011863
> 
> 赞同：2
> 
> 时间：2012-12-23T14:44:14.297
> 
> 标签：javascript, jquery, ckeditor, textinput

我需要像一个简单的那样使用 CKEDITOR ( [http://ckeditor.com/ )](http://ckeditor.com/)

```
<input type="text" /> 
```

我修改了 config.js 文件，添加了以下设置：

```
config.toolbar = 'SimpleVersion';
config.toolbar_SimpleVersion =
    [
        ['Cut','Copy','Paste','PasteText'],
    ]; 
```

然后，在主页面：

```
editor = CKEDITOR.replace("mydiv", { toolbar : 'SimpleVersion' });
editor.config.height = 50;
editor.config.removePlugins = 'resize';
editor.config.resize_enabled = false; 
```

它可以工作，但如果可能的话，我需要删除写有“body”的底部，并在按下 Return 按钮时禁止新行。

我认为对于最后一个，可以使用 JQuery 触发器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T04:27:58.733

删除插件效果很好。但是在下面的新行代码对我有用：

```
editor.on('key', function(e) {
    var key = e.data.keyCode;      
        if(key==13){
            e.cancel();
        }
    }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T17:58:04.123

我找到了解决方案：

1）当我创建编辑器时，有一个配置选项可以切换编辑器的底部

```
editor = CKEDITOR.replace("mydiv", { toolbar : 'SimpleVersion', removePlugins : 'elementspath' }); 
```

2）为了禁止返回按钮，我在键上创建了以下触发器：

```
editor.on('key', function(e) {
   var key = e.data.keyCode;      
       if(key==13){
          return false;
       }
}
); 
```

# c# - System.Threading.Timer.Timer() 的最佳重载方法匹配有一些无效参数

> ID：14011868
> 
> 赞同：6
> 
> 时间：2012-12-23T14:44:38.323
> 
> 标签：c#, .net, multithreading, timer

我正在制作一个必须以定时间隔调用某个方法的控制台应用程序。

我已经搜索过了，发现这个`System.Threading.Timer`类可以实现这样的功能，但我不太了解如何实现它。

我试过这个：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Threading;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Timer x = new Timer(test, null, 0, 1000);
            Console.ReadLine();
        }

        public static void test()
        {
            Console.WriteLine("test");
        }
    }
} 
```

但我收到一条错误`Timer x = new Timer(test, null, 0, 1000);`消息，上面写着：

> System.Threading.Timer.Timer(System.Threading.TimerCallback, object, int, int)' 的最佳重载方法匹配有一些无效参数

我真的不知道如何使它正常工作，但是如果有人有链接或可以为初学者解释计时器的东西，我将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-23T14:48:43.490

问题是您的`test()`方法的签名：

```
public static void test() 
```

与以下要求的签名不匹配`TimerCallback`：

```
public delegate void TimerCallback(
    Object state
) 
```

这意味着您不能`TimerCallback`直接从该`test`方法创建一个。最简单的做法是更改`test`方法的签名：

```
public static void test(Object state) 
```

或者，您可以在构造函数调用中使用 lambda 表达式：

```
Timer x = new Timer(state => test(), null, 0, 1000); 
```

请注意，要遵循 .NET 命名约定，您的方法名称应以大写字母开头，例如，`Test`而不是`test`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-23T14:55:51.553

`TimerCallback`委托（`Timer`您使用的构造函数的第一个参数）接受一个类型的参数（状态）`object`。

只需将参数添加到`test`方法中

```
public static void test(object state)
{
    Console.WriteLine("test");
} 
```

问题将得到解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T19:14:45.163

编写测试方法如下解决异常：

```
public static void test(object state)
        {
            Console.WriteLine("test");
        } 
```

# c++ - 在 Eclipse 中使用管道

> ID：14011873
> 
> 赞同：1
> 
> 时间：2012-12-23T14:45:05.600
> 
> 标签：c++, eclipse, pipe

我正在尝试在 Eclipse 中编译我的代码

但它不会编译我的管道使用。

```
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <syslog.h>
#include <signal.h>
#include <map>
#include <string>
#include <iostream>
#include <sstream>
#include <fstream>
#include <sys/wait.h>

using namespace std;
int OpenPipeRead(string sinterface)
{
int ret_val,errno;
string lpipename="",lpipepath="";
lpipepath = mconfig[C_PIPEPATH];
lpipename.append(lpipepath);                    //Its not empty only when there is argument for parallal telepath_sniff instances.
lpipename.append(mconfig[C_PIPENAME]);
if(strcmp(sinterface.c_str(), "") != 0)
    lpipename.append("_" + sinterface);             
printf("Trying to open Pipe for reading\n");
syslog(LOG_INFO, "Try to open Pipe for reading\n"); 
/* Create the named - pipe */
ret_val = mkfifo(lpipename.c_str(), 0666);
if ((ret_val == -1) && (errno != EEXIST)) {
    perror("Error creating the named pipe");
    syslog(LOG_ERR, "Error creating the named pipe");           
    exit(1);
}       
if((pipehandler = open(lpipename.c_str(), O_RDWR)) < 1)     /* Open the pipe for reading and writing , in append mode */
{
    perror("Failed to open pipe file");
    syslog(LOG_ERR, "Failed to open pipe file");
    exit(1);
}
printf("Pipe opened.\n");
syslog(LOG_INFO, "Pipe opened.\n"); 
```

}

```
int main(){
    OpenPipeRead("arg");

} 
```

错误是：

../src/main.cpp:325：错误：未在此范围内声明“EEXIST” ../src/main.cpp:330：错误：未在此范围内声明“O_RDWR” ../src/main .cpp:330：错误：未在此范围内声明“打开”

它确实在 Eclipse 之外编译

我需要在 Eclipse 上编译的任何包含或标志？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:23:24.073

EEXIST MACRO 在 asm-generic/errno-base.h 中定义，O_RDWR 标志在 fcntl.h 中定义。

添加 ：

```
#include <asm-generic/errno-base.h>
#include <fcntl.h> 
```

到包含 OpenPipeRead 定义的文件，它应该编译。

# javascript - 如何遍历此 JSON 并将内容附加到 div 中的 html？

> ID：14011875
> 
> 赞同：1
> 
> 时间：2012-12-23T14:45:21.437
> 
> 标签：javascript, jquery, ajax, json, jsonp

我的 JSON 看起来像这样：

```
{
      "content": [
        {
          "title": "'I need some rest'",
          "description": "Descript One",
          "link": "http://www.google.com/?id=90#hhjjhjC-RSS",
          "guid": "http://www.google.com/?id=90",
          "pubDate": "Fri, 15 Oct 2002 08:27:27 GMT"
        },
        {
          "title": "I have no objection",
          "description": "descroption will ne populated here",
          "link": "http://www.google.com/?id=90#hhjjhjC-RSSRSS",
          "guid": "http://www.google.com/?id=9werwer0",
          "pubDate": "Fri, 14 Aug 2009 15:54:26 GMT"
        },
        {
          "title": "Mised the Buss",
          "description": "Missed the bus decsription",
          "link": "http://www.google.com/?CMP=OTC-RSS",
          "guid": "http://www.google.com/",
          "pubDate": "Fri, 21 Jul 2009 15:08:26 GMT"
        }

      ]
    } 
```

**有人可以指导告诉我如何遍历此 JSON 并将其附加到 html。我正在尝试这样的事情？**

```
$(function() { 
            $.getJSON("http://crossdomain.com/path/to/abovejsonfile", function(data) {
                $.each(data.item[0], function(index, it){
                     var d = $('<div>'+ it.title +'</div>');
                    alert(d);   //doesn't work          
                });
            }); 
```

**我渲染的页面应该是这样的？**

```
<div class="container">
<div class="node" id="n1">
<div class="title">Title should come here</div>
<a class="link">Link</a>
<div class='d'>Date should be here</div>
</div>

<div class="node" id="n2">
<div class="title">Title should come here</div>
<a class="link">Link</a>
<div class='d'>Date should be here</div>
</div>

<div class="node"  id="n3">
<div class="title">Title should come here</div>
<a class="link">Link</a>
<div class='d'>Date should be here</div>
</div>
......
</div> 
```

任何帮助都深表感谢。

麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:48:20.550

您需要遍历`data["content"]`数组的元素：

```
$.each(data["content"], function(index, it){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T05:15:55.383

省去使用循环手动执行此操作的麻烦，并使用客户端模板引擎，如[json2html.com](http://json2htm.com)或[pure](http://beebole.com/pure/)

这是您使用 json2html 寻找的内容

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src='http://json2html.com/js/jquery.json2html-3.1-min.js'></script>

<div id='container'></div>

<script>

var data = 
{
  "content": [
    {
      "title": "'I need some rest'",
      "description": "Descript One",
      "link": "http://www.google.com/?id=90#hhjjhjC-RSS",
      "guid": "http://www.google.com/?id=90",
      "pubDate": "Fri, 15 Oct 2002 08:27:27 GMT"
    },
    {
      "title": "I have no objection",
      "description": "descroption will ne populated here",
      "link": "http://www.google.com/?id=90#hhjjhjC-RSSRSS",
      "guid": "http://www.google.com/?id=9werwer0",
      "pubDate": "Fri, 14 Aug 2009 15:54:26 GMT"
    },
    {
      "title": "Mised the Buss",
      "description": "Missed the bus decsription",
      "link": "http://www.google.com/?CMP=OTC-RSS",
      "guid": "http://www.google.com/",
      "pubDate": "Fri, 21 Jul 2009 15:08:26 GMT"
    }
  ]
};

var template = {"tag":"div","id":function(obj,index) {return('n'+index);},"class":"node","children":[
{"tag":"div","class":"title","html":"${title}"},
{"tag":"a","class":"link","href":"${link}","html":"${link}"},
{"tag":"div","class":"d","html":"${pubDate}"}
]};

$('#container').json2html(data.content,template);

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T14:53:41.943

你得到了正确的 each 方法，但是在 each 中你告诉他迭代索引为 0 的项目

```
$.each(data.item[0], .... 
```

现在 jQuery 也可以遍历对象（http://docs.jquery.com/Utilities/jQuery.each），但这不是您现在想要的。

如果你想遍历一个数组，每个你都必须传递一个数组（就像在任何其他支持每个/foreach的语言中一样）！

所以只需使用

```
$.each(data.item[0], .... 
```

你的代码工作正常。

**我如何将带有 id 的链接/div 附加到 html：**

```
$('<p>Hello World</p>').appendTo('body'); 
```

# android - 平滑删除自定义列表视图中的项目

> ID：14011880
> 
> 赞同：7
> 
> 时间：2012-12-23T14:46:38.043
> 
> 标签：android, android-listview, android-animation

我希望能够以某种方式从列表视图中删除项目，该方式将为已删除的项目及其下方的项目设置动画，类似于 API 演示中的 layoutAnimations 演示所示的方式。

例如：

![在此处输入图像描述](../Images/204ecf10be42bc42ddd1613271e30167.png)

在这里，我希望删除第 1 项。第一个动画将第 1 项平滑地向右移动，完成后，将在第 1 项使用的空白空间中平滑地动画此项下方的所有项（包括更多项，如果存在）。

第一个动画很简单：

```
final TranslateAnimation animation = new TranslateAnimation(TranslateAnimation.RELATIVE_TO_SELF, 0.0f,
        TranslateAnimation.RELATIVE_TO_SELF, 1.0f, TranslateAnimation.RELATIVE_TO_SELF, 0.0f,
        TranslateAnimation.RELATIVE_TO_SELF, 0.0f);
animation.setDuration(500);
view.startAnimation(animation); 
```

但是，在我实际使用回收其项目的 listView 的情况下，我将如何实现其他项目的良好效果？

在我提到的演示中，他们甚至不使用 listView。就我而言，这很成问题，因为我有很多物品。

我也注意到[关于这个](https://stackoverflow.com/questions/3928193/how-to-animate-addition-or-removal-of-android-listview-rows)问题的类似帖子，但我发现的只是你需要修改 listView 代码，但没有真正的解决方案。

顺便说一句，最小的 sdk 是 9。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T10:55:14.923

我找到了一个很好的示例，它几乎完全符合我的要求，但遗憾的是它需要 API 12 才能运行，而且我已经成功地让它以某种方式崩溃。

样品可以在[**这里**](http://www.androidviews.net/2012/10/swipe-to-dismiss/)找到。

[**该网站**](http://www.androidviews.net/)还有其他不错的示例和很酷的 android 用户界面视图。

希望有人能够找到一种方法使其可用于较低的 API 级别，因为统计数据仍然显示许多 API 10。

* * *

编辑：链接已失效。但是，使用 RecyclerView 可以做到这一点。您甚至可以使用滑动删除功能，如此[**处所示**](https://medium.com/@ipaulpro/drag-and-swipe-with-recyclerview-b9456d2b1aaf)。

# c++ - 使用 SVD 分解的图像重建

> ID：14011884
> 
> 赞同：3
> 
> 时间：2012-12-23T14:47:14.043
> 
> 标签：c++, c, svd

我已经对图像执行了块 SVD 分解并存储了结果。现在，我需要根据这个结果进行重建。我发现几个例子都是用 Matlab 写的，这对我来说是个谜。我只需要可以重建图片的公式，或者用 C 语言编写的示例。矩阵 A 等于 U*S*V'。将如何查看公式，例如用于计算前五个奇异值（哪些行和列的乘积）？请提供具有类似 C 风格的索引的公式。U 和 V' 是矩阵，S 是向量（不是矩阵）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T10:56:09.600

不确定我的问题是否正确，但如果您只需要知道奇异值，它们就是中间矩阵 S 的对角线值。S 通常是对角线矩阵，这里存储为向量。我的意思是，只存储对角线，如果你在考虑矩阵计算，你应该把它想象成一个矩阵。

这些对角线值是你的奇异值，如果你需要第一个最大的奇异值，只需取向量 S 的 5 个最大值。

引用[维基百科](https://en.wikipedia.org/wiki/Singular_value_decomposition)：

> Σ 的对角线项 Σi,i 称为 M 的奇异值。U 的 m 列和 V 的 n 列分别称为 M 的左奇异向量和右奇异向量。

在上面的引用中，sigma 是你的 S，M 是原始矩阵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-17T02:34:13.077

您要求提供 C 代码，但我希望伪代码就足够了（太晚了，我累了）。目标矩阵**A**有*m*行、*c*列和秩 rho。变量*p* = *min(m,n)*。

一种策略是首先形成中间矩阵乘积**B** = **U** **S**。由于奇异值矩阵的对角线性质，这是微不足道的。假设您有 rho ( = 5 ) 奇异值。您必须强制执行 rho <= *p*。

将列向量*u* [1]替换为*s* [1] *u* [1]。

将列向量*u* [2]替换为*s* [2] *u* [2]。...

将列向量*u* [rho]替换为*s* [rho] *u* [rho]。

将列向量*u* [rho+1]替换为长度为*m*的零向量。

将列向量*u* [rho+2]替换为长度为*m*的零向量。

...

将列向量*u* [p]替换为长度为*m*的零向量。

接下来形成新的图像矩阵**A** = **B** **V** ^T。*r行**c*列中的矩阵元素是**B**的第*r*行向量（长度 rho ）与**V** ^(T的第)*c*列向量（长度 rho）的点积。

 *****另一种策略是跳转到*r*行*c*列中**A**的矩阵元素为的形式

 ***a* [r,c] = sum ( *s* [k] *u* [r,k] *v* [c,k] , { k, 1, rho } )

行计数器*r*从 1 运行到*m*；列计数器*c*从 1 运行到*n*。*******

# c++ - 非常奇怪的 stringstream 和 std::getline 行为

> ID：14011885
> 
> 赞同：1
> 
> 时间：2012-12-23T14:47:37.563
> 
> 标签：c++, string, stream, std, getline

我正在与引擎中的地图加载错误作斗争，最后我找到了它。但是，似乎 stringstream 和 getline 有问题......最小代码：

```
#include <string>
#include <iostream>
#include <sstream>

int main(int argc, char **argv)
{
    std::string text = "1!2!6|6|5|";
    std::stringstream buffer;
    buffer << text; // insert to buffer

    std::string temp;
    buffer >> temp; // extract
    buffer << temp; // then insert again (i need it in my code to count characters)
    // and I can't count it before, as in my code the buffer is filled from file

    std::string loaded;
    std::getline(buffer, loaded, '!'); //should instert "1" to loaded
    std::cout << loaded; //and it displays nothing, debugger shows loaded is empty
} 
```

我做错了什么还是一个错误？我正在使用 g++ 4.7 c++11。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T14:50:37.827

在这种情况下，要从 stringstream 中提取字符串，您可能需要：

```
temp = buffer.str(); 
```

代替：

```
buffer >> temp; 
```

请参阅：[提取格式化（解释）数据](http://www.cplusplus.com/reference/istream/istream/operator%3E%3E/)与[stringstream.str()](http://www.cplusplus.com/reference/sstream/stringstream/str/)

# c# - 当缩放中心因 Metro 风格应用程序中的捏合（缩放）或其他手势而发生变化时，如何在画布上缩放时避免“跳跃”

> ID：14011895
> 
> 赞同：5
> 
> 时间：2012-12-23T14:49:03.973
> 
> 标签：c#, microsoft-metro, windows-runtime

当缩放中心因 Metro 风格应用程序中的捏合（缩放）或其他手势而发生变化时，如何在画布对象上缩放时避免“跳跃”

我试图存档的行为类似于预装的 win8 地图应用程序的缩放行为。如果您执行捏合手势（放大或缩小），则缩放中心设置在手指之间的中间。如果你抬起一个手指，将它放在另一个点上，你可以立即执行另一个缩放操作，缩放中心正确变化，没有任何跳跃（画布中对象的UI坐标跳跃）。

我正在尝试使用复合转换对大型 Canvas 对象（在 C# WinRT 应用程序中）实现类似的行为。我想允许平移和缩放，没有旋转（现在，也许我稍后会添加它）：

我这样初始化，将缩放中心放在屏幕中心：

```
this.compositeTransform = new CompositeTransform();
this.compositeTransform.CenterX = this.mainPage.Width / 2.0;
this.compositeTransform.CenterY = this.mainPage.Height / 2.0;

this.innerCanvas.RenderTransform = compositeTransform; 
```

然后我将使用操作增量事件来获取输入数据

```
private void InnerCanvas_ManipulationDelta(object sender, ManipulationDeltaRoutedEventArgs e)
{                        
    this.compositeTransform.ScaleX *= e.Delta.Scale;
    this.compositeTransform.ScaleY *= e.Delta.Scale;

    this.compositeTransform.CenterX = e.Position.X;
    this.compositeTransform.CenterY = e.Position.Y;

    this.compositeTransform.TranslateX += e.Delta.Translation.X;
    this.compositeTransform.TranslateY += e.Delta.Translation.Y;                      
} 
```

只要我执行相同的手势，它就可以正常工作。当我执行捏合手势时，新中心计算正确。但是，更改缩放中心会导致突然跳跃，例如在捏合手势后抬起一根手指时。当然，我可以只为捏合手势改变中心，但跳跃的问题仍然存在。这当然是合乎逻辑的，因为缩放与新的缩放中心一起工作。我还没有想出办法，如何避免跳跃。由于比例值本身保持不变，因此必须有可能具有相同的外观（未更改的坐标）和更改的中心。

我目前的推理是，我必须以某种方式更改 TranslateX 和 TranslateY 坐标，以便以某种方式平衡新的中心点，即 ui 元素的当前屏幕坐标保持不变。像这样的东西（scaleTransform 是一个 ScaleTransform，它只获取缩放数据）......

```
Point reverseScaleTransform =
    this.scaleTransform.Inverse.TransformPoint(new Point(e.Position.X,e.Position.Y));

this.compositeTransform.TranslateX += reverseScaleTransform.X - e.Position.X;
    this.compositeTransform.TranslateY += reverseScaleTransform.Y - e.Position.Y; 
```

但这也不起作用。整个事情似乎是平板电脑上的一个标准问题，但是尽管搜索过多，我还没有找到解决方案，也许我使用了错误的关键字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T23:37:47.660

我终于想通了，如何通过手动转换来解决问题，而不是使用 ScrollViewer。

```
 TranslateTransform tmpTranslate = new TranslateTransform();

    private void InnerCanvas_ManipulationDelta(object sender, ManipulationDeltaRoutedEventArgs e)
    {                                       
        //Transform world space into local space (origin: Scale center from the last manipulation event)            

        this.tmpTranslate.X = this.compositeTransform.CenterX;
        this.tmpTranslate.Y = this.compositeTransform.CenterY;

        Point center = this.compositeTransform.Inverse.TransformPoint(e.Position);

        Point localPoint = tmpTranslate.Inverse.TransformPoint(center);                        

        //Now scale the point in local space

        localPoint.X *= this.compositeTransform.ScaleX;
        localPoint.Y *= this.compositeTransform.ScaleY;

        //Transform local space into world space again
        Point worldPoint = tmpTranslate.TransformPoint(localPoint);

        //Take the actual scaling...
        Point distance = new Point(
            worldPoint.X - center.X,
            worldPoint.Y - center.Y);

        //...amd balance the jump of the changed scaling origin by changing the translation            

        this.compositeTransform.TranslateX += distance.X;
        this.compositeTransform.TranslateY += distance.Y;

        //Also set the scaling values themselves, especially set the new scale center...

        this.compositeTransform.ScaleX *= e.Delta.Scale;
        this.compositeTransform.ScaleY *= e.Delta.Scale;            

        this.compositeTransform.CenterX = center.X;
        this.compositeTransform.CenterY = center.Y;

        //And consider a translational shift

        this.compositeTransform.TranslateX += e.Delta.Translation.X;
        this.compositeTransform.TranslateY += e.Delta.Translation.Y;                                    
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T15:15:06.187

我建议查看示例[windows 8 XAML 滚动、平移和缩放示例](http://code.msdn.microsoft.com/windowsapps/XAML-ScrollViewer-pan-and-949d29e9)。

缩放已经为您实现，只需使用打开缩放的滚动查看器。这符合您的要求吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-03T08:54:45.470

如果我们只是添加

```
distance.x = (currentcenter.x - previouscenter.x) * (scalefactortillnow - 1) 
```

相似地

```
distance.y = (currentcenter.y - previouscenter.y) * (scalefactortillnow - 1) 
```

和

```
composite.translatex += distance.x; 
composite.translatey += distance.y; 
```

那么它就足以补偿由于中心变化而引起的跳跃。我个人遇到了这个问题，发现这行得通。

# php - mysqli_real_escape_string，我应该使用它吗？

> ID：14011899
> 
> 赞同：13
> 
> 时间：2012-12-23T14:49:23.583
> 
> 标签：php, mysqli

我想消除sql注入，我应该使用`mysqli_real_escape_string()`还是在mysqli中明确？例如

```
$nick = mysqli_real_escape_string($_POST['nick']) 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-23T14:52:03.593

您应该使用[准备好的语句](http://php.net/manual/en/mysqli.prepare.php)并将字符串数据作为参数传递，但您不应该对其进行转义。

此示例取自文档：

```
/* create a prepared statement */
if ($stmt = $mysqli->prepare("SELECT District FROM City WHERE Name=?")) {

    /* bind parameters for markers */
    $stmt->bind_param("s", $city);

    /* execute query */
    $stmt->execute();

    /* bind result variables */
    $stmt->bind_result($district);

    /* fetch value */
    $stmt->fetch();

    printf("%s is in district %s\n", $city, $district);

    /* close statement */
    $stmt->close();
} 
```

请注意，该示例*不*调用 `mysqli_real_escape_string`. `mysqli_real_escape_string`仅当您将字符串直接嵌入查询中时才需要使用，但我建议您永远不要这样做。尽可能始终使用参数。

**有关的**

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T14:56:24.337

是的，您可以使用 mysqli_real_escape_string 来格式化字符串，如果您要实现自己的查询处理器，使用占位符或某种查询构建器。

如果您打算在代码中使用裸 API 函数（这显然是错误的做法，但在当地人中非常流行） - 最好使用准备好的语句。

无论如何，你不能单独使用这个函数来“消除 sql 注入”。`mysql(i)_real_escape_string`功能不会阻止注射，也不应该用于任何保护。

# powershell - 将引用的参数传递给 PowerShell 脚本

> ID：14011901
> 
> 赞同：2
> 
> 时间：2012-12-23T14:49:29.403
> 
> 标签：powershell, parameters, quotes

脚本是为 CLI 编写的，在 Microsoft 世界中，引用文件的脚本参数可能经常有空格，需要引用它们。

这对我来说是个问题。考虑这个脚本：

```
#testarg.ps1 
for($i=0; $i -lt $args.length; $i++)
{
    write-host "Arg$i = $($args[$i])"
} 
```

如果我在 PowerShell 交互环境中运行它，如下所示：

```
PS C:\script> .\testarg.ps1 "first arg"  "second arg" 
```

正如预期的那样，我得到了，

```
Arg0 = first arg
Arg1 = second arg 
```

但是，在交互模式之外，脚本的普通使用是批量使用的。据我了解，[微软建议](http://technet.microsoft.com/en-us/scriptcenter/374e2db5-89cf-4217-85e6-ca0014271059)的运行脚本的方法`cmd.exe`似乎是`powershell.exe path\to\script.ps1`（路径中没有空格）。但：

```
powershell.exe .\testarg.ps1 "first arg"  "second arg" 
```

给出不一致的结果：

```
Arg0 = first
Arg1 = arg
Arg2 = second
Arg3 = arg 
```

我注意到要获得预期的结果，我可以使用单引号：

```
powershell.exe .\testarg.ps1 'first arg' 'second arg' 
```

但是，当脚本要由自动生成和传递参数的 GUI 工具运行时，和/或由于引号使用的一致性而存在更多 CLI 工具时，这通常是不可行的。

出于某种原因，使用该`-file`选项时：

```
powershell.exe –file .\testarg.ps1 "first arg"  "second arg"
::(reference to relative path '.\' is optional) 
```

我再次得到预期的结果：

```
Arg0 = first arg
Arg1 = second arg 
```

因此，使用该`-file`选项，双引号可以正常工作。这表明可以将`ps1`文件（带有`FTYPE.exe`）的 Windows 文件类型关联重新映射为：

```
FTYPE Microsoft.PowerShellScript.1=C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe -file "%1" %* 
```

鉴于 FTYPE 关联，我可以通过简单地编写来获得预期的结果：

```
testarg.ps1 "first arg"  "second arg" 
```

后者对我来说非常令人满意，但由于我是 PowerShell 的新手，我想知道：

1.  对于一般脚本，批处理表单`powershell.exe –file path\to\script.ps1`和交互式表单（来自 PowerShell 内）`PS > path\to\script.ps1`是否等效？是否存在两种形式可能产生不同输出/效果的情况？
2.  脚本中是否有可能的解决方案可以按原样读取命令行（不去除双引号）？`*%`类似的东西`cmd.exe`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:50:46.030

你写的时候有一件事我不明白：

```
testarg.ps1 "first arg"  "second arg" 
```

您在哪个批次中调用它？

从`PowerShell.exe`，应该写成：

```
cd "c:\Temp"
& .\testarg.ps1 "first arg"  "second arg" 
```

从`cmd.exe`它应该写：

```
powershell –file .\testarg.ps1 "first arg" "second arg" 
```

# bison - 新的网络编程语言，创建编译器 [Flex / GNU Bison]

> ID：14011909
> 
> 赞同：-2
> 
> 时间：2012-12-23T14:51:29.397
> 
> 标签：bison, lex

我正在创建一种新的 Web 编程语言，我真的希望它能够通过，现在我知道很多关于 Web 和套接字以及 HTTP 请求和响应的事情。我需要的只是你们对 Flex 和 Bison 的帮助（它将基于 C++）

在创建编译器方面我不是很好，所以我不知道从哪里开始，因为我想创建一种半编译器，比如 JVM，它所做的只是创建一个字节码类会跑得更快..

事实上，我什至需要一个编译专家来帮助我弄清楚什么编译想法是最好的......

所以我的问题是：你们能指导我开始阅读非常有用的文章或教程吗？如果您有兴趣，可以加入我并向我澄清一些事情吗？

我提出的想法很棒，我真的不会停下来，因为那里有 Java EE 或 PHP ^^

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T14:59:26.537

[coursera](https://www.coursera.org/)上有一个很棒的关于创建编译器的课程- [Compilers](https://www.coursera.org/course/compilers)，由`Alex Aiken`. 你可以报名自学。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T15:42:38.853

网上有很多例子，如何使用`lex`和`yacc`/ `bison`。

`flex`搜索示例时不要使用关键字。如果这样做，您将获得 adobe flex 页面。

这里有一些适合初学者的东西：

*   [编写翻译的分步指南](http://ashimg.tripod.com/example.html)
*   [使用 Lex 和 YACC 的入门指南](http://ds9a.nl/lex-yacc/cvs/lex-yacc-howto.html)

# google-apps-script - 从谷歌电子表格发送电子邮件 - 编码建议

> ID：14011916
> 
> 赞同：1
> 
> 时间：2012-12-23T14:52:34.550
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api

我仍然在这里学习绳索。根据其他贡献者建议的代码，我编写了一个脚本，用于向使用 Google 表单记录时间条目的顾问发送提醒电子邮件。电子表格首先导入日历条目，其中包含每个顾问的所有工作信息。导入日历条目后，如果顾问尚未记录他们的时间条目，以下脚本将向他们发送一封电子邮件，提醒他们这样做：

```
function sendReminder() {

  var rmndrFrom = "XYZ, Inc.";
  var myemail   = "support@xyz.com";

  var sheet     = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Pending");
  var numRows   = sheet.getLastRow();
  var lastCol   = sheet.getLastColumn();
  var dataRange = sheet.getRange(2, 1, numRows, lastCol); // row 1 is the header row
  var sheetData = dataRange.getValues();

  for (var i = 0; i < sheetData.length; ++i) {
    var row = sheetData[i];
    if (row[0]){
      var jobNumb = row[0]; // Job Number
      var conName = row[2]; // Consultant Name
      var conMail = row[3]; // Consultant Email
      var jobDate = row[4]; // Date

      // format email string
      var subject = "Time Entry Reminder: " + conName + " / Job " + jobNumb;

        try {
          var conMsgH = 'This is a reminder for you to record your time entry for Job #<strong>' + jobNum + '/' + jobDate + '</strong>';

          // strip HTML for plain text message
          var conMsgP = conMsgH.replace(/\<br\/\>/gi, '\n').replace(/(<([^>]+)>)/ig, "");

          // send reminder to consultants
          MailApp.sendEmail(conMail, subject, conMsgP, { htmlBody:conMsgH, name:rmndrFrom });

        } catch (e) { // error handler
          MailApp.sendEmail(myemail, "Error in sending reminder email.", e.message);
        }
      }
  }
} 
```

所以基本上，这个脚本会解析待处理的工作表，如果 A 列有一个工作编号，它会向顾问发送一封提醒电子邮件，其中包含该工作编号。但是，单个顾问的名字可能有多个职位编号。我希望脚本向每位顾问发送一封电子邮件，其中包含他们必须记录其时间条目的工作编号列表。

提前感谢您的帮助。任何关于如何优化代码的建议也将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T23:34:01.450

有很多方法可以解决这个问题。一种方法是保留一张包含顾问电子邮件、姓名和工作编号列表的表格。将此数据加载到您的脚本中，列出所有作业 ID 和作业信息。然后根据顾问列表过滤职位 ID 并构建您的电子邮件，或者您可以发送该数字列表以获得非常短的脚本。

另一种方法是对代码中的每个顾问进行所有排序，然后以这种方式发送电子邮件。这是我采用的方法，我还在[MDN 使用了迭代 JS 函数映射、过滤和减少更多细节](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)。

代码发布在下面，但如果您想查看它附加到电子表格并发表评论（以及构建仅包含顾问信息的额外工作表的功能），请查看[此处](https://docs.google.com/spreadsheet/ccc?key=0Amf6KahEwgTbdDFfQmJFRWVVX2gweHlpaVhKcnhoa0E#gid=1)。

以下是我对您的功能的迭代。我希望它对您的情况有所帮助：

```
var rmndrFrom = "XYZ, Inc.";
var myemail   = "me@emailisawesome.com";
var subject   = "Time Entry Reminder";

function sendReminder() {
  var sheet       = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Pending");
  var numRows     = sheet.getLastRow();
  var lastCol     = sheet.getLastColumn();
  var sheetData   = sheet.getRange(2, 1, numRows-1, lastCol).getValues();
  var cons = sheet.getRange(2,3,numRows-1,1).getValues().reduce(flatten_).filter(getUniqueConsultants_);
  cons.forEach(sendEmail_, sheetData);
}

function sendEmail_(consultant) {
  var consultantsJobs = this.filter(getJobsForConsultant_, consultant);
  var jobList = consultantsJobs.map(buildJobLine_).join("<br>"); 
  try {
    var conMsgH = "Hi " + consultant + ",<br>";
    conMsgH    += "This is a reminder for you to record your time entry for the following jobs:<br><br>";
    conMsgH    += jobList;
    conMsgH    += "<br><br>Thank you for your cooperation.";
    var conMsgP = conMsgH.replace(/\<br\/\>/gi, '\n').replace(/(<([^>]+)>)/ig, "");
    MailApp.sendEmail(consultantsJobs[0][3], subject, conMsgP, {htmlBody:conMsgH, name:rmndrFrom});
  } catch (e) {
    MailApp.sendEmail(myemail, "Error in sending reminder email.", e.message);
  } 
}

function buildJobLine_(job) {
  return "Job #" + job[0] + " on " + Utilities.formatDate(job[4], Session.getTimeZone(), "MMM dd yyyy");
}

function getJobsForConsultant_(row) {
  return row[2] == this;
}

function getUniqueConsultants_(v,i,a) {
  return a.indexOf(v) == i;
}

function flatten_(a,b) {
  return a.concat(b);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T01:07:47.997

我必须说[fooby](https://stackoverflow.com/users/1384561/fooby)的答案远远超出了我的 JS 技能，我相信它会很好地工作，但我仍然想提出一些不同的东西（而且从我的 pov 更简单），只是为了好玩 ;-)

与原始脚本的主要区别是数组的排序允许我检测重复名称并相应地对其进行威胁。html 组合肯定会好得多，但这不是您的主要要求。

这是代码

```
function sendReminder() {

  var rmndrFrom = "XYZ, Inc.";
  var myemail   = "support@xyz.com";
  var sheet     = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Pending");
  var initial = "Hi conName,<BR>This is a reminder for you to record your time entry for the following jobs : <BR><BR><table border = 1 cellpadding = 3 bgcolor='#FFFFBB'><TR><TD>";

  var sheetData = sheet.getDataRange().getValues();// simplified code to get the data array
  sheetData.shift();//skips the headers
  sheetData.sort(function(x,y){
  var xp = x[2];// sort on column 3 but you can change  here...
  var yp = y[2];// sort on column 3 but you can change  here...
  return xp == yp ? 0 : xp < yp ? -1 : 1;// sort ascending, eventually change here...
  });
//  Logger.log(sheetData);// sorted
  var last = sheetData.length
  var i = 1;//index 0 is handled outside the loop
  var row = sheetData[0];
  var subject = "Time Entry Reminder: " + row[2] + " / Job "
  var conMsgH = initial
  var msgComponent = makeline_(row)
  subject += msgComponent[0]
  conMsgH += msgComponent[1]

  while (i<last){
    if(sheetData[i][2]!=sheetData[i-1][2]||i==last-1){
      sendData_(sheetData[i-1][3],sheetData[i-1][2],subject,conMsgH)
      var subject = "Time Entry Reminder: " + sheetData[i][2] + " / Job "
  var conMsgH = initial;
      }
  msgComponent = makeline_(sheetData[i])
  subject += msgComponent[0]
  conMsgH += msgComponent[1]
  ++i
  }
}

function sendData_(conMail,conName,subject,conMsgH){
  conMsgH = conMsgH.substr(0,conMsgH.length-8)+'</TABLE>'
  conMsgH = conMsgH.replace('conName',conName)
  var conMsgP = conMsgH.replace(/<\/tr>/ig, '\n').replace(/<br>/ig, '\n').replace(/(<([^>]+)>)/ig, "")
  subject = subject.substr(0,subject.length-2);// remove the last '+ '
//  Logger.log(subject)
//  Logger.log(conMsgH)
  Logger.log(conMsgP)
//  Logger.log(conMail)
  try{
          // send reminder to consultants          
          MailApp.sendEmail(conMail, subject, conMsgP, { htmlBody:conMsgH, name:rmndrFrom });
        } catch (e) { // error handler
//          MailApp.sendEmail(myemail, "Error in sending reminder email.", e.message);
    }
}

function makeline_(row){
      var jobNumb = row[0]; // Job Number
      var conName = row[2]; // Consultant Name
      var conMail = row[3]; // Consultant Email
      var descr = row[1]; // description
      var FUS1=new Date(row[4]).toString().substr(25,6)+':00';// get timezone of this event, taking care of daylight savings
      var jobDate = Utilities.formatDate(row[4], FUS1, "MMM dd yyyy @ hh:mm aaa"); // Date
      var subject =  jobNumb+' + ';
      var conMsgH =  'Job #'+jobNumb + '</TD><TD>' + jobDate + '</TD><TD>' + descr + '</TD></TR><TR><TD>';
return [subject,conMsgH];
} 
```

**编辑：**对邮件格式进行了一些改进，使用表格显示工作和日期+删除了一些错误*；-)（老实说，我这样做也是为了我个人使用，因为我有几乎相同的用例）*

# java - 更改文件长度时，是否需要重新映射所有关联的 MappedByteBuffers？

> ID：14011919
> 
> 赞同：2
> 
> 时间：2012-12-23T14:52:53.520
> 
> 标签：java, nio, mmap, memory-mapped-files

我有一个小而简单的存储系统，可以通过内存映射文件访问。由于我需要处理超过 2GB 的空间，我需要一个具有固定大小（如 2GB）的 MappedByteBuffer 列表（由于不同的原因，我使用较少）。然后一切都相对简单：一个缓冲区映射到某个空间，比如 1GB，当我需要更多时，我映射一个新的 MappedByteBuffer（文件自动增加），然后当我需要更多时，映射第三个缓冲区等等。这只是工作。

但是后来我在[Java NIO 书中读到](http://www.google.de/search?tbm=bks&q=java%20nio)，当我更改文件长度时可能会出现问题：

> MappedByteBuffer 直接反映与其关联的磁盘文件。如果在映射生效时文件在结构上被修改，可能会导致奇怪的行为（具体行为取决于操作系统和文件系统） MappedByteBuffer 具有固定大小，但它映射到的文件是弹性的。具体来说，如果在映射生效时文件的大小发生变化，则部分或全部缓冲区可能变得不可访问，可能会返回未定义的数据，或者可能会引发未经检查的异常。请注意文件在内存映射时如何被其他线程或外部进程操作。

我认为问题可能会发生，因为操作系统可以在文件增加时移动文件，然后 MappedByteBuffers 可能指向无效空间（或者我是否误解了这一点？）

因此，我现在没有向列表中添加新的 MappedByteBuffer，而是执行以下操作

1.  增加文件长度
2.  清除缓冲区列表（丢弃旧缓冲区并希望通过垃圾收集器释放缓冲区。嗯，也许我应该通过cleaner.clean（）显式清除所有缓冲区？）
3.  重新映射（用新的缓冲区填充列表）

但是这个过程的缺点是有时会在映射时失败

```
IOException: Operation not permitted
    at sun.nio.ch.FileChannelImpl.map0(Native Method)
    at sun.nio.ch.FileChannelImpl.map(FileChannelImpl.java:734) 
```

为什么？因为清除缓冲区列表没有正确释放和清理缓冲区并且不允许多个映射？我应该坚持旧的工作方法而忽略书中的评论吗？

**更新**

*   在 32 位操作系统上拆分映射的优点是可以更好地找到可用空间并且不太可能出错（[参考](https://stackoverflow.com/a/258097/194609)）
*   将映射分成更小的部分是一个优势，因为设置 mmap 可能成本高昂（[参考](https://stackoverflow.com/a/2895799/194609)）
*   这两种方法都不干净，而我的第二种方法应该可以工作，但需要取消映射（将尝试使用正常的 cleaner.clean hack 强制释放）。第一种方法应该适用于我可以增加文件大小的系统（如[ibm](http://publib.boulder.ibm.com/infocenter/iseries/v5r3/index.jsp?topic=/apis/mmap.htm)），但总的来说它不起作用，尽管我还找不到确切的原因......
*   最干净的方法是使用我担心的多个文件（每个 MappedByteBuffer 一个文件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T22:15:56.230

根本原因是我的错：不小心我过于频繁地重新映射底层文件（容量仅通过小步骤增加）。

但即使在这种极端情况下，当我重试失败的映射操作（+ System.gc + 5ms 睡眠 -> 这应该让 jvm 有机会取消映射缓冲区）时，我终于能够修复 IOException（不允许操作） . 现在我只看到了大量的重新映射，这导致了最终的结论。

至少我学到了更多关于 mmap 的知识：它非常依赖于 OS+文件系统——还要感谢[auselen](https://stackoverflow.com/users/1163019/auselen)！如果您喜欢一个干净的解决方案，您应该按照他最初的建议为每个文件使用一个 MappedByteBuffer。但是，如果您需要大空间并且您的操作系统文件描述符限制太低，这也可能会出现问题。

最后但并非最不重要的一点是，我强烈建议不要使用我的第一个解决方案，因为我找不到保证（仅在 IBM OS 中；））在文件大小增加后保持映射缓冲区完好无损。

# mercurial - 如何使用 hgflow 在多个分支中进行开发

> ID：14011921
> 
> 赞同：3
> 
> 时间：2012-12-23T14:53:25.877
> 
> 标签：mercurial, workflow

我正在评估[hgflow](https://bitbucket.org/yujiewu/hgflow)。该模型满足了我的大部分版本控制需求，只是我不知道如何支持多个版本。

假设我不久前发布了 v1.0，刚刚发布了 v2.0，而且我从一开始就一直在使用 hgflow。仍在使用 v1.0 的客户请求实现某个功能。因为v1.0的稳定性，他不想升级到v2.0或者v3.0。

使用广义流概念：

*   hg flow development start 1.x（创建开发/1.x）
*   hg flow develop/1.x:release start 1.0（从develop/1.x创建release/1.0）
*   hg flow develop/1.x:release finish（关闭 release/1.0 并在 master 上创建 v1.0）
*   对 2.x 和 2.0 重复，因此在 v1.0 标记之后在 master 上创建 v2.0 标记
*   收到增强 1.x 的请求
*   汞流开发/1.x
*   加强工作
*   hg flow develop/1.x:release start 1.1（从develop/1.x创建release/1.1）
*   hg flow develop/1.x:release finish **<--- v1.1 标签是在 master 上的 v2.0 标签之后创建的**

如果我遵循 hgflow 模型，我最终可能会在主流中的 v2.0 标记之后创建一个 v1.1 标记。更糟糕的是，v1.1 中的更改可能会覆盖我在 v1.0 到 v2.0 之间所做的各种增强。

我的问题是：任何人都可以建议我的问题的解决方案吗？任何建议表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T23:28:24.733

您要用于这种情况的工作流程与**支持**流有关：

```
hg flow master                       # Update the workspace dir to the master branch.
hg flow support start 1.x -r v1.0    # Create a support/1.x branch from v1.0 snapshot.
hg flow support/1.x start feature1   # Create a support/1.x/feature1 branch.
...                                  # Commits to implement feature1
hg flow support/1.x finish           # Finish feature1\. Changes in support/1.x/feature1 will be merged into the support/1.x branch.
hg tag v1.1                          # Create support releases in the support/1.x branch. 
```

您支持 1.x 版本的所有更改都在 support/1.x 分支中，从概念上讲，它通常不会合并到其他流中。

# objective-c - 解析这个 JSON

> ID：14011924
> 
> 赞同：-2
> 
> 时间：2012-12-23T14:54:32.280
> 
> 标签：objective-c, xcode, json, ios5

我在解析这个 JSON 时遇到了一个小问题

```
 {
    "@attributes": {
        "date": "23-12-2012"
    },

    "data": [

        {
        "ft_link": "google",
        "title": "CEO"

        },
        {
        "ft_link": "Yahoo",
        "title": "CEO"
        }
     ]
} 
```

我试图得到所有的“标题”项目。

```
NSError *jsonError = nil;
id jsonObject = [NSJSONSerialization JSONObjectWithData:jsonData options:kNilOptions error:&jsonError];

NSDictionary *jsonDictionary = (NSDictionary *)jsonObject;
NSLog(@"%@", [jsonDictionary objectForKey:@"data"]); 
```

这会记录整个 JSON。但现在我想解析所有“标题”项目。所以我尝试了：

```
NSLog(@"%@", [jsonDictionary objectForKey:@"data"] objectForKey:@"title"]); 
```

但后来它崩溃了，我怎样才能正确解析它？

迷恋;撞车;崩溃：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFArray objectForKey:]: unrecognized selector sent to instance 0x91583c0' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T15:23:48.260

如前所述`objectForKey`，不适用于 NSArrays。然而 NSArrays 确实实现`valueForKey`了，你可以用它来得到你想要的，`，即：

```
[jsonDictionary objectForKey:@"data"] valueForKey:@"title"] 
```

这将返回一个包含标题的字符串数组。

`objectForKey`调用将返回数组，而`valueForKey`对数组的调用通过调用每个对象返回一个对象数组`valueForKey`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T15:02:37.557

数据是一个[数组](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)（字典），所以它不支持`objectForKey:`. 它崩溃的错误可能表明了这一点。在尝试对其进行处理之前，您还应该始终检查 json 解析返回的任何错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T15:02:19.010

我不确定这是否是有效的 JSON。

但根据您的要求，您希望获取“标题”的所有值。而且我看到有多个“标题”，因此您需要将其分解为`NSArray`然后访问嵌套`NSDictinary`的`objectForKey:@"title"`.

# jquery - 为什么jquery每次点击的值都在增加？

> ID：14011931
> 
> 赞同：2
> 
> 时间：2012-12-23T14:55:52.573
> 
> 标签：jquery

每次切换后`$(".pages a").click (function () {};`添加文本框，数量不断增加。如果您切换条件运行三次，则添加一个额外的三个链接。解决办法是什么？我的 jquery 代码具有以下结构：

注意：`if (go=="page") {}`需要在

```
$(document).ready(function() {

    $.page = {

        come: function(go) {
            var links = $("textarea[name=links]");
            if(go == "page") {

                $('.pages').toggle();

                $('.pages span').click(function() {
                    $('.pages').hide();
                });

                $(".pages a").click(function() {

                    var pg = $(this).attr('href');
                    var links2 = $(links).val();
                    $(links).val(links2 + pg);

                });
            }
        }

    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:14:32.223

我已经提取了您的切换开关 `$(".pages a")`，如下所示，并尝试使用我展示的方式。

```
$(".pages a").unbind('click').bind('click', function () {

    var pg = $(this).attr('href');
    var links2 = $(links).val();
    $(links).val(links2 + pg);

    return false; //to prevent the browser actually following the links
       }); 
```

我希望这对你有帮助。

# javascript - `window.location.href` 只是刷新页面

> ID：14011932
> 
> 赞同：2
> 
> 时间：2012-12-23T14:56:01.840
> 
> 标签：javascript, html, forms, onsubmit, location-href

这有点令人困惑，但我会尽力解释它。我有 4 个`select`菜单直接放置在彼此的顶部，并带有`absolute`定位。在任何时候，其中三个是不可见的（带有`display: none;`），而其中一个是可见的（带有`display: inline;`）。我有一个 JavaScript 代码，它检测哪个是可见的，然后它应该获取一个`input`字段的值，将其附加到 visible 的值上`select`，然后转到该 URL。

这是代码中的基本思想：

```
<form onsubmit="goTo()">

    <input type="text" id="query" value="" />

    <select class="service">
      <option value="https://www.google.com/search?q=" selected>Web</option>
      <option value="https://www.google.com/search?tbm=isch&q=">Images</option>
      <option value="https://www.google.com/maps?q=">Maps</option>
    </select>

    <select class="service">
      <option value="http://search.yahoo.com/search?p=" selected>Web</option>
      <option value="http://search.yahoo.com/search/images?p=">Images</option>
      <option value="http://search.yahoo.com/search/video?p=">Videos</option>
    </select>

    <select class="service">
      <option value="http://www.bing.com/?q=" selected>Web</option>
      <option value="http://www.bing.com/images/?q=">Images</option>
      <option value="http://www.bing.com/videos/?q=">Videos</option>
    </select>

    <select class="service">
      <option value="http://www.dogpile.com/info.dogpl.t6.2/search/web?q=" selected>Web</option>
      <option value="http://www.dogpile.com/info.dogpl.t6.2/search/images?q=Greeny">Images</option>
      <option value="http://www.dogpile.com/info.dogpl.t6.2/search/video?q=">Videos</option>
    <select>

    <button type="submit">Search</button> 
```

还有 JavaScript（还有比这更多的代码，但我只会包括相关部分：

```
function goTo() {
  var value
  var elements = document.getElementsByClassName('service');
    for (var i = 0; i < elements.length; i++) {
      if(elements[i].style.display === 'inline') {
        value = elements[i].value;
        window.location.href = value + document.getElementById("query").value;
        break;
      }
    }
} 
```

我的问题是当我单击提交时发生的所有事情都是页面重新加载。

[http://jsfiddle.net/9BLav/3/](http://jsfiddle.net/9BLAv/3/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T15:04:16.760

您需要停止“提交”事件的默认操作，即重新加载页面。

将表单标签更改为：

```
<form onsubmit='goTo(); return false'> 
```

您也可以通过操作事件对象显式阻止默认操作来执行此操作，但我认为`false`从处理程序返回是非常普遍的。

# ios - 更改要关闭的 UIButton

> ID：14011933
> 
> 赞同：0
> 
> 时间：2012-12-23T14:56:06.487
> 
> 标签：ios, xcode

我有一个简单的按钮，每个`UIControlState`s 有两个图像。我希望此按钮充当控件和指示器，以便我可以按下它 - “激活”并再次按下“停用”，而其他一些功能可能会导致它被关闭（“停用”）。我的问题是如何将其状态从选中更改为未选中？
更改`selected`属性不会解决问题:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:01:03.230

您可以禁用该按钮，使其无法按下。

```
yourButton.enabled = NO; 
```

并且当您希望它恢复为可按下时，您可以启用它

```
yourButton.enabled = YES; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T15:09:15.913

最简单的方法是将按钮视为开关并根据开关的开/关更改其状态。例如使用 BOOL 变量，该变量在按钮触摸时获取其值 YES 或 NO，而根据它按钮获取其图像。

```
- (void) buttonTouched:(id)sender
{
    switchOn = !switchOn;
    UIImage *buttonImage = nil; 

    if (switchOn == YES) 
    { 
        buttonImage = [UIImage imageNamed:@"on.png"]; 
    }
    else
    {
        buttonImage = [UIImage imageNamed:@"off.png"]; 
    }
    [myButton setImage:buttonImage forState:UIControlStateNormal];
    [myButton setImage:buttonImage forState:UIControlStateSelected];
} 
```

如果您需要以编程方式设置按钮“禁用”：

```
- (void) setButtonDisabled
{
    switchOn = YES; //calling buttonTouched: will turn it to NO
    [self buttonTouched:nil];
} 
```

# c# - 如果存在正则表达式，则查找第 2 年

> ID：14011935
> 
> 赞同：0
> 
> 时间：2012-12-23T14:56:08.050
> 
> 标签：c#, regex, pattern-matching

我得到了一些标题，我想查找本文中是否存在年份（1950-2050），但如果存在 2，我想查找第二年。我已经创建了一个方法。如果没有找到方法，我想返回 0。

```
string text1 = "Name 2000";
string text2 = "Name";
string text3 = "2000 2012";
string text4 = "2012 Name";

public static int get_title_year(string title)
{
    string pattern = @"\b(?<Year1>\d{4})";
    Regex rx = new Regex(pattern);
    if (rx.IsMatch(title))
    {
        Match match = rx.Match(title);
        return Convert.ToInt16(match.Groups[1].Value);
    }
    else
    {
        return 0;
    }
} 
```

我的方法返回

2000 0 2000 2012

代替

2000 0 2012 2012

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T15:03:33.233

您可以使用以下方法获取“第二个元素（如果存在），否则为第一个” `Take(2).LastOrDefault()`：

```
public static int get_title_year(string title)
{
    string pattern = @"\b\d{4}\b";
    Regex regex = new Regex(pattern);
    int year = regex.Matches(title)
                    .Cast<Match>()
                    .Select(m => int.Parse(m.Value))
                    .Take(2)
                    .LastOrDefault();
    return year;
} 
```

# android - (1) “AUTO_INCREMENT”附近：更改表时出现语法错误

> ID：14011936
> 
> 赞同：9
> 
> 时间：2012-12-23T14:56:09.860
> 
> 标签：android, sqlite

我正在尝试更改定义如下的 SQLite 表：

```
 String CREATE_TABLE="CREATE TABLE IF NOT EXISTS " + tab_NAME + " ("
                            + row_ID + " INTEGER PRIMARY KEY , "
                            + row_NAME + " TEXT, "
                            + row_EMAIL + " TEXT, "
                            + row_WEBSITE + " TEXT, "
                            + row_TELEPHONE1 + " TEXT, "
                            + row_TELEPHONE2 + " TEXT, "
                            + row_TELEPHONE3 + " TEXT, "
                            + row_TELEPHONE4 + " TEXT, "
                            + row_TELEPHONE5 + " TEXT);";
        db_name.execSQL(CREATE_TABLE);

        String newTab="CREATE TABLE IF NOT EXISTS temp ("
                + row_ID + " INTEGER PRIMARY KEY AUTOINCREMENT , "
                + row_NAME + " TEXT, "
                + row_EMAIL + " TEXT, "
                + row_WEBSITE + " TEXT, "
                + row_TELEPHONE1 + " TEXT, "
                + row_TELEPHONE2 + " TEXT, "
                + row_TELEPHONE3 + " TEXT, "
                + row_TELEPHONE4 + " TEXT, "
                + row_TELEPHONE5 + " TEXT);";
        db_name.execSQL(newTab); 
```

这是 auto_increment alter 语句：

```
 String alter="ALTER TABLE temp AUTO_INCREMENT=1;";
    ourDatabase.execSQL(alter); 
```

我有一个错误说`(1) near AUTO_INCREMENT: syntax error`

怎么了？？有什么帮助吗？？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-23T14:59:52.623

在 SQLite 中，声明为 INTEGER PRIMARY KEY 的列将自行自动递增。删除 AUTOINCREMENT 关键字，然后尝试。

检查[SQLite 常见问题解答](http://www.sqlite.org/faq.html#q1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T11:14:17.350

在`sqlite`将列设置`PRIMARY KEY`为`AUTOINCREMENT`. 因此，无需将列明确指定为`AUTOINCREMENT`. 检查此[链接](http://www.sqlite.org/faq.html#q1)以供参考。

# python-3.x - 使用 Python 将数据以特定格式写入文件

> ID：14011937
> 
> 赞同：1
> 
> 时间：2012-12-23T14:56:10.810
> 
> 标签：python-3.x

我正在尝试以以下格式从函数返回中写入数字数据：

```
[1,2,3,4,5][10,11]
[6,7,8,9,10][13,14]
... 
```

问题是我希望文本文件采用以下格式：

```
1,2,3,4,5[::tab::]10,11
6,7,8,9,10[::tab::]13,14
... 
```

目前我正在使用

```
with open(outfilename,'a') as outfile:
    outfile.writelines("%s%s\n"%(major,minor)) 
```

我会很感激你的帮助。我仍然对列表、读取和写入文本文件以及实现特定的数据格式感到困惑。我总是以不需要的 [] 或括号结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:05:47.833

您可以简单地使用列表中的元素编写字符串，将每个元素与一个`,`或您想要的分隔符连接起来；然后，使用它们之间的 a 打印列表`\t`。

```
with open(outfilename, 'at') as outfile:

    major = ",".join(str(i) for i in major)
    minor = ",".join(str(i) for i in minor)

    outfile.writelines("%s\t%s\n" % (major, minor)) 
```

实际上，以下行背后的魔力非常简单*：*

```
major = ",".join(str(i) for i in major) 
```

Python 提供了一个名为列表推导的功能，它允许您使用非常清晰和直接的语法对列表的元素执行操作。

例如，如果您有一个 list `l = [1, 2, 3, 4, 5]`，您可以遍历该列表，将元素从整数转换为字符串，调用方法`str()`：

```
do _something_ with _element_ foreach _element_ in list _l_
          str(element)           for       element in l 
```

当您这样做时，将一次创建每个结果字符串，并且您在此语句中有一个生成器：

```
(str(element) for element in l) 
```

由于该方法`join`通过迭代元素列表或从生成器接收此元素来工作，因此您可以：

```
delimiter = ","
delimiter.join(str(element) for element in l) 
```

希望它澄清了上面的操作。

# javascript - Hashtag 触发 jQuery 动画

> ID：14011940
> 
> 赞同：1
> 
> 时间：2012-12-23T14:57:01.283
> 
> 标签：javascript, jquery, jquery-animate

我早些时候在另一个关于一些 jQuery 转换的问题中得到了帮助，我让我的网站正常运行，但现在我需要更深入地了解这个 jQuery 转换......

我需要根据写在地址栏中的主题标签来实现特定的效果/过渡。这是**pckill**的另一个问题提供的代码：

```
$('.nav').on('click', 'li', function(){
var id = $(this).data('id');

var breadcrumbs = document.getElementById('breadcrumbs');
breadcrumbs.innerHTML = 'IMGit &raquo; <span class="capitalize">' + id + '</span>';

var current = $('#inner').find('[data-page=' + id + ']');
if (current.hasClass('hidden'))
{
    current.css('marginLeft', '-200%');
    $('#inner > div').not(current).animate(
        {marginLeft: '100%'},
        'fast',
        function(){
            $('#inner > div').not(current).addClass('hidden');
            current.removeClass('hidden');
            current.animate({marginLeft: '0%'}, 'fast');
    });
}
}); 
```

**这是 HTML： http:** [//pastebin.com/pu7jmefC](http://pastebin.com/pu7jmefC)

假设，例如，我将某人链接到`http://mywebsite.com/index.php#remote`，我希望用户**使用**jQuery 转换到正确的 div。上面的方法与我拥有的菜单完美配合，但我希望能够与某人共享 URL，他们仍然能够**直接**访问正确的 div。

我认为上面的代码需要进行一些修改才能实现我所寻求的，但不幸的是，我在 Javascript/jQuery 方面做得不是很好。

我想我们必须在附近的某个地方触摸代码：`$('#inner > div').not(current)`.

我知道我们必须`window.location.hash`使用主题标签，但我不知道如何在上面的代码中使用它。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:28:29.393

如果您只需要在页面加载时检查哈希并相应地执行操作，那真的很简单。首先，您需要将转换到 div 的逻辑移动到单独的函数中，例如`transitionToDiv`：

```
function transitionToDiv(id) {
    var current = $('#inner').find('[data-page=' + id + ']');
    if (current.hasClass('hidden'))
    {
        current.css('marginLeft', '-200%');
        $('#inner > div').not(current).animate(
            {marginLeft: '100%'},
            'fast',
            function(){
                $('#inner > div').not(current).addClass('hidden');
                current.removeClass('hidden');
                current.animate({marginLeft: '0%'}, 'fast');
        });
    }
} 
```

并将点击事件（您问题中的代码）更改为：

```
$('.nav').on('click', 'li', function() {
    var id = $(this).data('id');

    var breadcrumbs = document.getElementById('breadcrumbs');
    breadcrumbs.innerHTML = 'IMGit &raquo; <span class="capitalize">' + id + '</span>';

    transitionToDiv(id);
} 
```

现在，要根据地址散列在页面加载时转换为 div，只需在页面加载后的某个时间点添加这些行：

```
var id = window.location.hash.substr(1);
transitionToDiv(id); 
```

# mysql - 如何将两个字段相加并将结果自动存储在 MySQL 表的第三个字段中？

> ID：14011941
> 
> 赞同：0
> 
> 时间：2012-12-23T14:57:02.057
> 
> 标签：mysql, stored-procedures, triggers, sql-update, mysql-error-1442

我创建了一个简单的`UPDATE AFTER INSERT`触发器来对两个字段求和并用求和值`DECIMAL(10,2)`更新第三个字段。`DECIMAL(10,2)`

触发代码为：

```
delimiter |
CREATE TRIGGER calc_ttl_cost AFTER INSERT ON buybox_rec
  FOR EACH ROW 
  BEGIN
      UPDATE buybox_rec SET total_cost = (price+shipping_cost);
  END;
| 
```

我正在使用 phpMyAdmin 运行 SQL 命令，因此我知道触发器已成功创建。此外，如果我`UPDATE buybox_rec SET total_cost = (price+shipping_cost);`单独运行 SQL 语句，它会按预期工作。（我也尝试过在字段名称周围使用反引号的相同代码，但如果可行，我不会写所有这些）

问题是当我插入一个新行时，触发器不起作用并抛出此错误：

```
#1442 - Can't update table 'buybox_rec' in stored function/trigger 
because it is already used by statement which invoked this stored 
unction/trigger. 
```

该错误似乎是某种递归或循环引用问题，但我无法弄清楚问题出在哪里/是什么。

我还尝试创建一个存储过程并从触发器中调用它以尝试获得相同的结果，但我得到了同样的错误。

我检查了一堆与 MySQL UPDATE 触发器相关的其他 SO 问题并进行了一些谷歌搜索，但我在这里。

这超出了 MySQL 的范围吗？这似乎是一项常见且容易完成的任务。

有谁知道我如何自主完成这项任务？（例如，我不想听到通过 PHP 对字段求和的事情）

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:15:09.353

问题是您正在尝试修改已被 UPDATE + TRIGGER 操作使用的表的内容。这根本无法做到，但您有其他选择。

例如，如果您的有意义的数据（或自变量）是价格和运输成本，而总成本取决于它们，您可以只保留表中的前两个，并且可能有一个非常简单的 VIEW（类似于`SELECT price, shipping_cost, price+shipping_cost total_cost FROM buybox_rec`，或其他任何一个）您需要的字段）如果您想关注总数。

# c# - 建议在“DTO”响应/请求中收集 REST/服务设计

> ID：14011946
> 
> 赞同：2
> 
> 时间：2012-12-23T14:58:09.123
> 
> 标签：c#, rest, servicestack

刚刚学习 REST 和 ServiceStack 并寻求建议如何构建这个示例模式：

我有一个`User`包含这些字段的对象：

```
public class User
{
   public string ID {get;set;
   public string Name {get;set;}
   public List<int> OrderID {get;set;}     // inner collection
   //  all other fields
 } 
```

我有一`Service`堂课：

```
public class UserService : Service
{
   public List<User> Get(User UserRequest)
   {
      List<User> lstUsers = // Somehow polulate a collection of Users
      return  lstUsers;
   }

   // Other functions
 } 
```

和一个 AppHost 文件（现在自托管）

```
 public UserHost : AppHostHttpListenerBase
 {
     public override void Configure(Funq.Container container)
     {
            Routes
               .Add<User>("/UserInfo")
               .Add<User>("/User/{ID}");
      }
  } 
```

一切正常：客户端（浏览器）发送一个空的“用户”请求并接收`User`对象集合，但我需要添加的是获取特定`User`请求。例如，我想接收（并更改）具有特定`User`ID 的所有订单。

例如`User`ID = 2 有一个集合 10 `OrderID`。所以我虽然可以构建一个这样的 URI：/MyHost/2/Orders，它会返回`Order`对象集合。

我已经尝试添加另一个 DTO 对象`Order`并将其绑定到这样的路由：

```
 Route.Add<Order>("/User/{ID}/Oders") 
```

但它不起作用。屏幕（至少在浏览器中）总是保持空白，似乎没有来自 SS 的响应。

它是一种 RESFull 的做事方式吗？它如何在 ServiceStack 中实现？您能否提供一个小代码示例（甚至是示意图）如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T16:07:25.403

如果要返回给定用户的订单列表，那么绑定到 URL`"/User/{ID}/Orders"`是 RESTful 方式，是的。

使用 ServiceStack，我通常更喜欢定义请求和响应类，其中请求类将具有所有可能的输入参数，而响应定义结果对象。尽管通常这些可以像`User`示例中那样组合。

由于`{ID}`URL 指的是用户 ID，因此最好命名它`{UserID}`并且在您的请求类中也具有此属性。

可能你可以只在`Order`类上有 UserID：

```
public class Order
{
    public string ID { get; set; } // order ID
    public string UserID { get; set; } // user ID - also request param
    // ...
}

Routes.Add<Order>("/User/{UserID}/Oders"); 
```

现在，来自 URL 的 UserID 被映射到您的 UserID 属性，您可以使用它来查询数据库等。

每个请求类通常对应于您的应用程序逻辑的另一个服务类。因此，

*   因为`User`你有`UserService : RestServiceBase<User>`，
*   因为`Order`有`OrderService : RestServiceBase<Order>`。

当 ServiceStack 看到这个 URL 映射`Routes.Add<Order>("/User/{UserID}/Oders")`时，它知道为给定的 URL 调用`OrderService`。

```
public class OrderService : RestServiceBase<Order>
{
    public override object OnGet(Order request)
    {
        // ...
    }
} 
```

# android - 在 android 上将较小的应用程序集成到较大的应用程序中

> ID：14011949
> 
> 赞同：2
> 
> 时间：2012-12-23T14:59:13.030
> 
> 标签：android, design-patterns, plugins, architecture, integration

如果要求如下，将较小的 android 应用程序包含到一个更大的应用程序中的正确方法是什么：

1.  小应用应该是松耦合的，应该单独开发
2.  更大的应用程序应该处理一些常见的事情，而不是每个小应用程序自己做。
3.  更大的应用程序现在应该对小应用程序的状态有所了解，以便做出一些决定。

我首先想到的是某种插件模式（虽然我不太了解，所以我可能会说错话），这样每个小应用程序都应该实现一些通用接口，而大应用程序应该使用处理组件时的那个接口。

这是正确的方法吗？

将 android 视为一个平台，这是正确的思维方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T15:07:05.850

最好的办法是让每个子应用程序成为“库”。您在 Eclipse 中创建一个工作区并创建一个新的 Android 项目并将其标记为库。

您为每个子应用程序执行此操作。

然后，您有一个非库应用程序，它导入每个库并将每个库用作完整应用程序的一部分。

这意味着您无需担心编写插件接口等。

此外，如果您遵循这种模式，当您创建免费与付费应用程序时，您可以添加另一个应用程序并删除/更改所有需要的功能，并从相同的代码库编译两者。

**更新**

查看[http://developer.android.com/tools/projects/projects-eclipse.html](http://developer.android.com/tools/projects/projects-eclipse.html)以获得一些不错的文档。

这显示了如何创建这两种类型的项目以及如何在清单中引用它们，这是令人讨厌的部分。

**更新2**

从评论中询问您是否可以在导入库的主应用程序中使用库 Activity。

您在库中创建一个 Activity

> com.example.myapp.library.MyActivity

然后将详细信息添加到清单中

`<activity name="com.example.myapp.library.MyActivity">`

然后让你在那里使用它。如果你需要的话，你甚至可以使用一个库 Activity 作为你的主要启动 Activity。

您还可以通过将清单更改为来扩展库 Activity

`<activity name="MyNewActivity">`

然后新建一个活动

> MyNewActivity 类扩展了 com.example.myapp.library.MyActivity

然后只需覆盖你想要的，如果需要，调用*super*来访问你的库方法，等等。

随意问的问题。

# azure - 网站发布后不更新

> ID：14011951
> 
> 赞同：6
> 
> 时间：2012-12-23T14:59:41.970
> 
> 标签：azure

我正在使用 VS 2012 发布网站选项发布网站。但该网站没有得到更新。每次发布后，我都必须从 manage.windowsazure.com 重新启动网站。

我一直在免费和共享模式下运行该网站。两种模式下的情况相同。

任何建议如何在发布后自动更新网站？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-24T02:57:36.540

嗯。如果您的更改涉及 CSS 和 JavaScript，请尝试使用 Ctrl+F5 浏览您的网站。如果它似乎完全没有更新，您可能需要在 azure 门户上检查您网站的部署页面，以查看它是否已更新，或者有什么问题。

高温高压

# c# - 从 SQL 中的二进制数据中检索图像到 DataList

> ID：14011954
> 
> 赞同：0
> 
> 时间：2012-12-23T14:59:56.103
> 
> 标签：c#, asp.net, sql-server, visual-studio-2010

我正在做一个 3 层应用程序来从 sql server 检索图像，我将图像存储到 sql 中的二进制数据中，问题是我无法从 sql server 检索我的图像。

这是我在 DataAccessLayer 中的代码

```
 public List<Volunteer> VolunteerTRetrieve()
    {
        List<Volunteer> vList = new List<Volunteer>();
        byte[] volunteerProfilePicture;
        string volunteerName, volunteerNRIC, volunteerAddress, volunteerEmail, volunteerContact;
        string queryStr = "SELECT * FROM TVolunteer Order By VolunteerName";
        SqlConnection conn = new SqlConnection(DBconnStr);
        SqlCommand cmd = new SqlCommand(queryStr, conn);
        conn.Open();
        SqlDataReader dr = cmd.ExecuteReader();
        while ((dr.Read()))
        {
            volunteerName = dr["VolunteerName"].ToString();
            volunteerNRIC = dr["VolunteerNRIC"].ToString();
            volunteerAddress = dr["VolunteerAddress"].ToString();
            volunteerEmail = dr["VolunteerEmail"].ToString();
            volunteerContact = dr["VolunteerContact"].ToString();
            volunteerProfilePicture = (byte[])dr["VolunteerProfilePicture"];

            vList.Add(new Volunteer(volunteerName, volunteerNRIC, volunteerAddress, volunteerEmail, volunteerContact, volunteerProfilePicture));
        }
        conn.Close();
        dr.Dispose();
        return vList;
    } 
```

在业务逻辑层

```
 public List<Volunteer> RetrieveAllBVolunteer()
    {
        Volunteer v = new Volunteer();
        List<Volunteer> vList = new List<Volunteer>();
        vList = v.VolunteerBRetrieve();
        return vList;
    } 
```

在 PresentationLayer

```
 List<Volunteer> allVolunteer = new List<Volunteer>();
   allVolunteer = vBLL.RetrieveAllTVolunteer();
   dl_tvolunteer.DataSource = allVolunteer;
   dl_tvolunteer.DataBind(); 
```

我还有一个图像处理程序类

```
public class ShowImage : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        string connStr = System.Configuration.ConfigurationManager.ConnectionStrings["DBconnStr"].ConnectionString;
        SqlConnection conn = new SqlConnection(connStr);
        conn.Open();
        string queryStr = "SELECT VolunteerProfilePicture FROM TVolunteer WHERE VolunteerNRIC = @NRIC";
        SqlCommand cmd = new SqlCommand(queryStr, conn);
        cmd.Parameters.Add("@NRIC", SqlDbType.VarChar).Value =
            context.Request.QueryString["VolunteerNRIC"];
        cmd.Prepare();
        SqlDataReader dr = cmd.ExecuteReader();
        dr.Read();
        context.Response.BinaryWrite((byte[])dr["VolunteerProfilePicture"]);
    } 
```

请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:14:18.680

如果您要返回一张图片，您可以执行以下操作

```
1\. place a PictureBox control on the asp.net webpage
2\. define the sql connections //not sure why you are using cmd.prepare

byte[] sqlImage = (byte[])cmd.ExecuteScalar();
MemoryStream memStream = new MemoryStream();
memStream.Write(sqlImage, 0, sqlImage.Length);
Bitmap bit = new Bitmap(memStream); 
```

或者如果你想以不同的方式做

```
 try

  {

    con = new SqlConnection(constr);
    cmd = new SqlCommand("select photopath,Photo from employees where employeeid=14", con);
    con.Open();
    dr = cmd.ExecuteReader();
            while(dr.Read())
            {
                if (!dr.IsDBNull(1))
                {
                    byte[] photo = (byte[])dr[1];
                    MemoryStream ms = new MemoryStream(photo);
                    pictureBox1.Image = Image.FromStream(ms);
                }

            }
        }
        catch (Exception ex)
        {
            dr.Close();
            cmd.Dispose();
            con.Close();

            Response.Write(ex.Message);
        } 
```

# c++ - XCode std::thread C++

> ID：14011955
> 
> 赞同：12
> 
> 时间：2012-12-23T15:00:30.643
> 
> 标签：c++, xcode, multithreading

对于学校的一个小项目，我需要创建一个简单的客户端/服务器结构，它将在路由器（使用 openWRT）上运行，并且我正在尝试在这个应用程序中使用线程做一些事情。

我的 C++ 技能非常有限，所以我在[互联网](https://stackoverflow.com/questions/266168/simple-example-of-threading-in-c)上找到了这个作为基本示例。

```
#include <thread>
#include <iostream>

void doSomeWork( void )
{
    std::cout << "hello from thread..." << std::endl;
    return;
}

int main( int argc, char *argv[] )
{
    std::thread t( doSomeWork );
    t.join();
    return 0;
} 
```

当我尝试在 Xcode (4.5.2) 中运行它时，我收到以下错误：

> 尝试使用已删除的功能

它显示了一些代码：

```
__threaad_execute(tuple<_Fp, _Args...>& __t, __tuple_indices<_Indices...>)
{
    __invoke(_VSTD::move(_VSTD::get<0>(__t)), _VSTD::move(_VSTD::get<_Indices>(__t))...);
} 
```

我想我需要用“构建设置”或“链接库”之类的东西做些什么？但我不太确定该怎么做。我想我可能需要设置以下设置[（我在这里找到）](https://stackoverflow.com/a/13621792/393548)

*   在项目的 Build Settings 选项卡中，向下滚动到“Apple LLVM Compiler 4.1 - Language”
*   将设置“C++ 语言方言”设置为“C++11 [-std=c++11]”
*   将设置“C++ 标准库”设置为“libc++（支持 C++11 的 LLVM 标准 C++ 库）”

但是那些已经设置好的设置。

是否有任何标志/库或我缺少的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T13:28:22.967

在 XCode 中使用 G++ 而不是 LLVM。不要忘记在编译器构建设置中链接线程库（-lpthread - 或 -pthread、-lrt）。并计算跨 Win/Mac/Linux 操作系统的线程行为差异（尽管它是 POSIX）

# spring - 无法使用spring3 restful生成json数据

> ID：14011958
> 
> 赞同：1
> 
> 时间：2012-12-23T15:00:38.063
> 
> 标签：spring, spring-mvc, restful-url

嗨，我是 spring restful 服务的新手。我试图将我的一种方法公开为 restful，我正在从这个 url 获取 xml 数据（localhost:7001/SpringRestService/restful/showAllGrants/ALL/ALL/ALL/ALL. xml) 但是当我输入 (localhost:7001/SpringRestService/restful/showAllGrants/ITSMAXK/ALL/ALL/ALL.json) 以获取 json 数据时，我得到以下错误。

---------------------网页上的错误------------- ------

```
java.lang.NoSuchMethodError: isEnabled
    at org.springframework.web.servlet.view.json.MappingJacksonJsonView.renderMergedOutputModel(MappingJacksonJsonView.java:240)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:264)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1208)
    at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:992)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:939)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:917)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:813)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:798)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:226)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:124)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:283)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:175)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3370)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(Lweblogic.security.acl.internal.AuthenticatedSubject;Lweblogic.security.acl.internal.AuthenticatedSubject;Ljava.security.PrivilegedAction;)Ljava.lang.Object;(Unknown Source)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2117)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2023)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1359)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:200)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:172)
----------------------------------------------------------------------------------------- 
```

下面是我正在使用的代码

----------------------------------applicationContext.xml------------- -----

应用程序上下文文件

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"   
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

<!-- Activates various annotations to be detected in bean classes-->
<context:annotation-config />
<context:component-scan base-package="org.nea.rest.unsr" />
<context:component-scan base-package="org.nea.spring.services.implementations.Uniserv" />
<context:component-scan base-package="org.nea.spring.services.interfaces.uniservs" />
<context:component-scan base-package="org.nea.ia.services.util.uniserv" />

<bean id="uniservService"  class="org.spring.services.implementations" />

    <bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
        <property name="order" value="1" />
        <property name="contentNegotiationManager">
            <bean class="org.springframework.web.accept.ContentNegotiationManager">
                <constructor-arg>
                    <bean class="org.springframework.web.accept.PathExtensionContentNegotiationStrategy">
                        <constructor-arg>
                            <map>
                                <entry key="json" value="application/json"/>
                                <entry key="xml" value="application/xml"/>
                            </map>
                        </constructor-arg>
                    </bean>
                </constructor-arg>
            </bean>
        </property>
        <property name="defaultViews">
            <list>                
                <bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />               
                <bean class="org.springframework.web.servlet.view.xml.MarshallingView">
                    <constructor-arg>
                        <bean class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
                            <property name="classesToBeBound">
                                <list>
                                    <value>org</value>
                                </list>
                            </property>
                        </bean>
                    </constructor-arg>
                </bean>
            </list>
        </property>
    </bean>

    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/WEB-INF/view/" />
        <property name="suffix" value=".jsp" />
    </bean>

<!-- Configures the annotation-driven Spring MVC Controller programming model.
Note that, with Spring 3.0, this tag works in Servlet MVC only! -->
<mvc:annotation-driven />

</beans>

-------------------------------jsp page--------------------------------- 
```

Jsp页面

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Spring restful service</title>
</head>
<body>
    <h1>testing server</h1>
</body>
</html> 
```

# javascript - JSX 复制图层 Adob e Photoshop

> ID：14011967
> 
> 赞同：0
> 
> 时间：2012-12-23T15:01:57.473
> 
> 标签：javascript, photoshop, extendscript, photoshop-script

我在将图层从一个文档复制到另一个文档时遇到问题。我有这个代码（我的 Photoshop 文档中的 .jsx 脚本）

```
var docRef = app.activeDocument;
app.activeDocument.selection.selectAll();

var calcWidth  = app.activeDocument.selection.bounds[2] -app.activeDocument.selection.bounds[0];

var calcHeight = app.activeDocument.selection.bounds[3] - app.activeDocument.selection.bounds[1];
var docResolution = app.activeDocument.resolution;

var document = app.documents.add(calcWidth, calcHeight, docResolution);
app.activeDocument = docRef;

try {
  dupObj.artLayers[i].duplicate(document, ElementPlacement.INSIDE);
}
catch(e) {
  alert(e)
} 
```

但我仍然收到错误

> 错误：您只能从最前面的文档中复制图层。

你有什么想法如何让它发挥作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T03:54:26.183

您收到错误的原因`dupObj`是从未定义过的。我认为您的意思是使用`docRef`第 1 行中对源文档的引用。现在这似乎工作正常：

```
var docRef = app.activeDocument;
app.activeDocument.selection.selectAll();

var calcWidth  = app.activeDocument.selection.bounds[2] -app.activeDocument.selection.bounds[0];

var calcHeight = app.activeDocument.selection.bounds[3] - app.activeDocument.selection.bounds[1];
var docResolution = app.activeDocument.resolution;

var document = app.documents.add(calcWidth, calcHeight, docResolution);
app.activeDocument = docRef;

try {
  docRef.artLayers[i].duplicate(document, ElementPlacement.INSIDE); // ** changed to docRef **
}
catch(e) {
  alert(e)
} 
```

话虽如此，您应该查看其中可能存在一些隐藏的错误。在这一行：

```
docRef.artLayers[i].duplicate(document, ElementPlacement.INSIDE); 
```

`i`从未定义，并且显然默认为 0 而不会引发错误。`artLayers`结果是您只会复制数组中的第一层。

此外，由于您使用的是选择整个文档`app.activeDocument.selection.selectAll();`，因此无需计算选择的大小。它将始终与原始文档的大小相同。您可以只使用`docRef.width`and`docRef.height`作为新文档的宽度和高度。此外，据我所知，当您复制一个图层时，无论选择如何，它都会复制整个图层。

如果您只想制作与要复制的图层大小相同的新文档，请尝试使用`artLayers[i].bounds`而不是`selection.bounds`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T17:48:19.083

您没有调用活动文档：您需要调用对活动文档和您使用的文档的引用 - 因此出现错误。

```
var docRef = app.activeDocument;
docRef.selection.selectAll();

var calcWidth  = docRef.selection.bounds[2] -app.activeDocument.selection.bounds[0];

var calcHeight = docRef.selection.bounds[3] - app.activeDocument.selection.bounds[1];
var docResolution = docRef.resolution;

var document = app.documents.add(calcWidth, calcHeight, docResolution);
app.activeDocument = docRef;

try {
  dupObj.artLayers[i].duplicate(document, ElementPlacement.INSIDE);
}
catch(e) {
  alert(e)
} 
```

我以前没有使用过 dupObj，因为我使用 CS 和脚本侦听器代码来复制文档而且我没有检查过代码，但试一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-27T08:41:08.827

~~问题是您正在尝试使用`document`在 JS 中保留的名为的变量。~~

正如 Sergey 指出的那样，`document`（令人惊讶的是）不是 JSX 中的保留字，**因为 Adob​​e JSX 不是“常规”JSX**

虽然它没有解决确切的语法错误，但我将把它留在这里，因为它是解决在文档之间复制层的整体问题的快速方法。

```
// Grab docs
const doc1 = app.activeDocument
const doc2 = app.documents.add(100, 100)

const outputLayer = doc1.layers[0]
const inputLayer = doc2.layers[0]

inputLayer.duplicate(outputLayer, ElementPlacement.INSIDE) 
```

# mysql - 用户无法访问数据库

> ID：14011968
> 
> 赞同：14
> 
> 时间：2012-12-23T15:02:04.230
> 
> 标签：mysql

在我的 PHP 脚本中，我正在访问两个数据库`db1`和`db2`. 我有一个`myuser@localhost`可以访问`db1`但无法访问的用户`db2`。

从`mysql.user`表中选择时，有一条记录，该用户的主机是通配符`%`，没有`localhost`主机。

`SELECT user, host FROM mysql.user WHERE user = 'myuser';` 给我吗：

```
+------------+------+
| user       | host |
+------------+------+
| myuser     | %    |
+------------+------+
1 row in set (0.00 sec) 
```

查看该用户的 GRANTS ，我看到与 for 相同的`db1`权限`db2`

`SHOW GRANTS FOR 'myuser'@'%';`

```
+-----------------------------------------------------------------------------------------------------------+
| Grants for myuser@%                                                                                   |
+-----------------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'myuser'@'%' IDENTIFIED BY PASSWORD '*7733323232...' |
| GRANT ALL PRIVILEGES ON `db1`.* TO 'myuser'@'%'                                                |
| GRANT ALL PRIVILEGES ON `db2`.* TO 'myuser'@'%'                                              |
+-----------------------------------------------------------------------------------------------------------+ 
```

在我的 PHP 脚本中，我可以访问`db1`，但是出现错误：`INSERT command denied to user 'myuser'@'localhost' for table 'HISTORY'`.

它说用户是`myuser@localhost`并且人们建议添加权限`myuser@localhost`但是，为什么这个用户有权访问`db1`而不是`db2`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-28T17:59:09.770

`localhost``%`在 MySQL中不匹配。看起来应该，但实际上并没有。您必须分别授予 权限`user@localhost`和`USAGE`每个数据库的权限。

或者你可以连接为`user@127.0.0.1`which *does* match `%`。使用 localhost 的 IP 地址似乎应该与 localhost 相同，但事实并非如此。您需要在`mysql.user`表格中有两行（在您的情况下也在`mysql.db`表格中）以启用两者。

为了演示 localhost 和 127.0.0.1 之间的区别：

连接 as`mysql -h localhost`使用 UNIX 套接字接口，并绕过 TCP/IP。这对于性能可能会稍好一些，但它对上述授权匹配有影响。

您可以通过连接为 来强制本地 TCP/IP 连接`mysql -h 127.0.0.1`。然后它将获取您对 的赠款`myuser@%`。

因此，要为套接字接口和 TCP/IP 接口获取相同的用户、密码和权限，您需要运行以下*所有*语句：

```
GRANT USAGE ON *.* TO 'myuser'@'%' IDENTIFIED BY PASSWORD '*7733323232...'
GRANT USAGE ON *.* TO 'myuser'@'localhost' IDENTIFIED BY PASSWORD '*7733323232...'
GRANT ALL PRIVILEGES ON `db1`.* TO 'myuser'@'%'
GRANT ALL PRIVILEGES ON `db1`.* TO 'myuser'@'localhost'
GRANT ALL PRIVILEGES ON `db2`.* TO 'myuser'@'%'
GRANT ALL PRIVILEGES ON `db2`.* TO 'myuser'@'localhost' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-23T15:16:06.793

如果您还没有这样做，您需要运行`flush privileges`以便`mysql`知道发生了更改并为用户重新加载权限表：

```
FLUSH PRIVILEGES; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-19T12:21:41.873

这很可能与 GRANT 无关。

访问权限不正确的一个非常常见的原因是MySQL 中存在**默认用户。**特别是`''`对于`User`（匿名用户）和/或`Host`在`mysql.user`表格中的那些。由于 MySQL 处理[身份验证和代理用户](http://dev.mysql.com/doc/refman/5.6/en/proxy-users.html)的方式，以及用于`mysql.user`表条目的排序规则，最终可能会使用一个意想不到的用户，而不是他们用于身份验证的用户。

用于`SELECT USER();`找出在身份验证期间使用的连接用户，并`SELECT CURRENT_USER();`找出**在当前会话期间其权限适用的有效用户**。

并来自[http://dev.mysql.com/doc/refman/5.6/en/connection-access.html](http://dev.mysql.com/doc/refman/5.6/en/connection-access.html)

> 一种常见的误解是，对于给定的用户名，当服务器尝试查找连接的匹配项时，首先使用明确命名该用户的所有行。这不是真的。如果您能够连接到服务器，但您的权限不是您所期望的，您可能正在被验证为其他帐户。

`mysql.user`类似于以下的表格

```
+-----------+----------+-
| Host      | User     | ...
+-----------+----------+-
| %         | root     | ... (root from any host)
| %         | jeffrey  | ... (jeffrey from any host)
| localhost | root     | ... (root from localhost)
| localhost |          | ... (any user from localhost)
+-----------+----------+- 
```

变成，

```
+-----------+----------+-
| Host      | User     | ...
+-----------+----------+-
| localhost | root     | ...
| localhost |          | ...
| %         | jeffrey  | ...
| %         | root     | ...
+-----------+----------+- 
```

每当服务器将用户表读入内存时，以处理多个匹配项。
当客户端尝试连接时，服务器会按排序顺序查看行并使用与客户端主机名和用户名匹配的第一行。
优先级为：值（IP 地址、主机名、用户名等）`'%'`>>`''`

大多数情况下，应用程序服务器/客户端与数据库在同一主机上运行，​​导致`localhost`在身份验证期间获取主机名。
`mysql -u jeffrey`使用`jeffrey@localhost`which 匹配`''@localhost`而不是`jeffrey@%`.

执行`$MYSQL_HOME/bin/mysql_secure_installation`将删除匿名用户，同时保护安装，减轻这种意外行为。

还要检查：
[1] [http://bugs.mysql.com/bug.php?id=36576](http://bugs.mysql.com/bug.php?id=36576)（最后检查评论）
[2] [http://bugs.mysql.com/bug.php?id=69570](http://bugs.mysql.com/bug.php?id=69570)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-15T15:26:59.670

只是想我会添加一个答案。我在ubuntu上试过这个。尝试了授权，刷新，没有任何效果（这是在 apt-get install mysql-server 之后立即执行的）。只是为了笑，我退回了服务器，这很有效，我的新用户现在可以登录了。我做了：

```
sudo service mysql restart 
```

我不知道那有效，但确实有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-23T15:32:29.767

您还必须授予 'myuser'@'localhost' 权限：

```
GRANT ALL PRIVILEGES ON `db1`.* TO 'myuser'@'localhost';
GRANT ALL PRIVILEGES ON `db2_beta`.* TO 'myuser'@'localhost'; 
```

否则，在 db install 期间创建的匿名用户 @localhost 优先于具有通配符主机名 (%) 的用户，如下所述：

[http://dev.mysql.com/doc/refman/5.5/en/adding-users.html](http://dev.mysql.com/doc/refman/5.5/en/adding-users.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-14T09:47:22.840

根据[这里](http://dev.mysql.com/doc/refman/5.5/en/privilege-changes.html)的mysql手册：

> 如果您使用 GRANT、REVOKE 或 SET PASSWORD 等帐户管理语句间接修改授权表，服务器会注意到这些更改并立即将授权表再次加载到内存中。
> 
> 如果您直接使用 INSERT、UPDATE 或 DELETE 等语句修改授权表，则您的更改不会影响权限检查，直到您重新启动服务器或告诉它重新加载表。如果您直接更改授权表但忘记重新加载它们，则您的更改在重新启动服务器之前无效。这可能会让您想知道为什么您的更改似乎没有任何区别！

在大多数情况下，这似乎是正确的。但是，在我的情况下，我使用的是 Amazon Web Services (AWS) RDS mysql 实例。在多次尝试授予用户权限失败后，我尝试了 a`FLUSH PRIVILEGES`并且数据库立即对用户可见。如果您在 Amazon Web Services RDS 平台上寻找解决方案时遇到此问题，您可能想尝试一下，看看它是否有帮助。

此 SO 问题包含此问题的最完整解决方案，并且是大多数搜索结果中的第一个，因此我想为使用 RDS 的任何人添加此响应。希望它可以为 RDS 管理员节省一些时间。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-04T16:03:55.307

我过去也遇到过同样的问题。您是否尝试过以下操作？

```
GRANT ALL ON `db1`.* TO 'myuser'@'%' IDENTIFIED BY PASSWORD '*7733323232...';
GRANT ALL ON `db2`.* TO 'myuser'@'%' IDENTIFIED BY PASSWORD '*7733323232...';
FLUSH PRIVILEGES; 
```

# javascript - AngularJS | orderBy 过滤器未动态更新

> ID：14011971
> 
> 赞同：11
> 
> 时间：2012-12-23T15:02:29.817
> 
> 标签：javascript, angularjs

我在使用`orderBy`AngularJS 中的过滤器时遇到问题。这是我的设置：

```
<li ng-repeat="item in listItems.data | orderBy:order">
    <a ng-click="getRelated(item._id)">{{ item.title }}</a>
</li> 
```

控制器部分：

```
$scope.order = 'year';

$scope.listItems = $http.post($scope.url, {'filterType': 'abc', 'letter': $scope.params.letter});

$scope.setOrder = function(order) {
    $scope.order = order;
} 
```

最后是我想用来订购数据的“开关”

```
 <span class="sort--title">Sort by</span>
    <a ng-class="{true:'selected', false:''}[order=='title']" href="" ng-click="setOrder('title')" class="sort--attribute">Title</a>
    <a ng-class="{true:'selected', false:''}[order=='year']" href="" ng-click="setOrder('year')" class="sort--attribute">Year</a>
    <a ng-class="{true:'selected', false:''}[order=='length']" href="" ng-click="setOrder('length')" class="sort--attribute">Length</a>
    <a ng-class="{true:'selected', false:''}[order=='date_added']" href="" ng-click="setOrder('date_added')" class="sort--attribute">Date Added</a> 
```

当我单击按钮时，列表不会重新排序。 **当我手动更改初始`$scope.order`值时，列表按属性排序。也`ng-class`正确更新。我显然错过了一些东西！**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-25T09:29:57.313

我不认为你的想法是错误的。它确实有效。这是正在工作的[plunker](http://plnkr.co/edit/fMrhagVKl2nehzTOHriF)。

你一定在其他地方有问题。

应用程序.js

```
var app = angular.module('ngApp', []);

app.controller('MainCtrl', ['$scope', function ($scope) {
    'use strict';
    $scope.friends = [
        {name: 'John', phone: '555-1276'},
        {name: 'Mary', phone: '800-BIG-MARY'},
        {name: 'Mike', phone: '555-4321'},
        {name: 'Adam', phone: '555-5678'},
        {name: 'Julie', phone: '555-8765'}
    ];
    $scope.setOrder = function (order) {
        $scope.order = order;
    };
}]); 
```

主要的html

```
<ul class="nav nav-pills">
    <li ng-class="{'active': order=='name'}"><a href="#" ng-click="setOrder('name')">name</a></li>
    <li  ng-class="{'active': order=='phone'}"><a href="#" ng-click="setOrder('phone')">phone</a></li>
</ul>
<ul>
    <li data-ng-repeat="friend in friends|orderBy:order">
        <span class="name">{{friend.name}}</span>
        <span class="phone">{{friend.phone}}</span>
    </li>
</ul> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-22T23:17:59.187

我知道这是一个老问题，但其他有同样问题的人可能会觉得这很有用。我遇到过同样的问题。单击锚点会重新加载页面，因此，只要您单击任何表头，就会将顺序设置为默认值。这也解释了为什么不将订单设置为默认全局为您修复它。

我用 span 元素替换了我的锚，它工作得很好。

# android - OpenGL - 像在 nehe 教程中一样绘图

> ID：14011975
> 
> 赞同：3
> 
> 时间：2012-12-23T15:03:26.263
> 
> 标签：android, opengl-es

我以前用 OpenGL 为 PC 制作简单的游戏，现在我想在 Android 上做点什么。但是，很多事情是不同的......为什么画正方形这么复杂？(http://www.jayway.com/2009/12/04/opengl-es-tutorial-for-android--part-ii-building-a-polygon/) 为什么它不像 nehe 教程那么简单：

```
glBegin(GL_TRIANGLES);                      // Drawing Using Triangles
glVertex3f( 0.0f, 1.0f, 0.0f);              // Top
glVertex3f(-1.0f,-1.0f, 0.0f);              // Bottom Left
glVertex3f( 1.0f,-1.0f, 0.0f);              // Bottom Right
glEnd();                            // Finished Drawing The Triangle 
```

有没有办法像在 nehe 教程中一样使用 OpenGL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T16:58:38.277

> 为什么它不像 nehe 教程中那么简单：

因为使用立即模式并不简单。立即模式如此吸引人的原因在于，您可以将数字直接输入到函数调用中。*如果*您要从文件中加载几何图形怎么办？你很可能会！然后你的几何图形在一些缓冲区中。然后你需要构建循环，以正确的顺序调用立即模式函数，等等。一旦你将几何图形放在缓冲区中，实际上只需将 OpenGL 指向它并发出少量 glDrawElement 或 glDrawArray 调用就更容易了。

乍一看，使用顶点数组看起来很复杂吗？是的。但从长远来看，顶点数组更容易使用。

而且它们的效率要高得多，因为您可以批量发送大量几何图形。

> 有没有办法像在 nehe 教程中一样使用 OpenGL？

您的目标是 OpenGL-ES，不，这是不可能的（也不是 OpenGL-3 核心及更高版本）。坦率地说：你一开始就不应该像 NeHe 那样做。NeHe 教程已经过时，没有有效利用现代 GPU 功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T15:05:29.323

简而言之，不，旧式管道已经消失。

使用固定功能、立即模式、矩阵层次结构等，并使用着色器和缓冲区。

# java - java junit没有main函数

> ID：14011981
> 
> 赞同：4
> 
> 时间：2012-12-23T15:03:59.973
> 
> 标签：java, function, reflection, junit

我在使用 JUnit 4 时有一个问题。有一件事让我很困惑。为什么下面没有main函数，但是可以执行并返回测试结果？它甚至不扩展一个类。好困惑....代码如下：

```
import org.junit.runner.RunWith;    
import org.junit.runners.Suite;    
import org.junit.runners.Suite.SuiteClasses;

@RunWith(Suite.class)    
@SuiteClasses({ ATest.class,BTest.class })    
public class AllTests {

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T15:12:27.710

main 方法（不是函数）在 runner 类中实现。运行程序类由 IDE 或构建工具调用，然后运行程序加载测试类并执行所有标记的方法（即通过 @Test 注释）。

测试的生命周期比 main 函数要复杂一些。您可以在执行每个 @Test 之前进行准备（@BeforeClass 和 @Before 注释方法），然后进行清理（@After 和 @AfterClass 注释方法）。

这个框架为您提供了更多的灵活性，而不仅仅是一个主要的方法。也可以单独运行带注释的测试：您可能有一个庞大的测试套件，但您可能希望在纠正错误的同时重复运行失败的测试；这不能通过 main 方法来完成（除非您对每个测试都有一个 main 方法）。

如您所见，使用 JUnit 之类的框架与带有 main 的普通 Java 类相比有几个优点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T15:07:30.307

测试运行者的角色是这样做的。JUnit < 4 中也没有`main()`方法。只是 JUnit 4 运行器依赖于注解，而 JUnit 3 运行器依赖于方法名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-12T06:18:48.893

**IntelliJ IDEA 2018.3（社区版）**

```
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.12</version>
</dependency> 
```

详细可以查看IDEA的控制台日志。下面是我分析的启动过程。

测试类：`com.example.BirdColorTest`

测试方法：`whichColor`

`java -classpath "***" com.intellij.rt.execution.junit.JUnitStarter -ideVersion5 -junit4 com.example.BirdColorTest,whichColor`

[https://github.com/joewalnes/idea-community/blob/master/plugins/junit_rt/src/com/intellij/rt/execution/junit/JUnitStarter.java](https://github.com/joewalnes/idea-community/blob/master/plugins/junit_rt/src/com/intellij/rt/execution/junit/JUnitStarter.java)

`main`-> `prepareStreamsAndStart(***)`-> `getAgentClass(***)`->`Class.forName("com.intellij.junit4.JUnit4IdeaTestRunner")`

[https://github.com/joewalnes/idea-community/blob/1fa2c45953ed08667da52b1b83d44c56eb83b043/plugins/junit_rt/src/com/intellij/junit4/JUnit4IdeaTestRunner.java](https://github.com/joewalnes/idea-community/blob/1fa2c45953ed08667da52b1b83d44c56eb83b043/plugins/junit_rt/src/com/intellij/junit4/JUnit4IdeaTestRunner.java)

`startRunnerWithArgs(***)`->`JUnit4TestRunnerUtil.buildRequest(args)`

[https://github.com/joewalnes/idea-community/blob/1fa2c45953ed08667da52b1b83d44c56eb83b043/plugins/junit_rt/src/com/intellij/junit4/JUnit4TestRunnerUtil.java](https://github.com/joewalnes/idea-community/blob/1fa2c45953ed08667da52b1b83d44c56eb83b043/plugins/junit_rt/src/com/intellij/junit4/JUnit4TestRunnerUtil.java)

`buildRequest(***)`-> `else { int index = suiteClassName.indexOf(',');***`-> 获取你的类名，方法名，并初始化执行。

“ **main 方法（不是函数）在 runner 类中实现。** ” @Luigi R. Viggiano 是对的！

# c# - 比较两个自定义类对象时遇到问题

> ID：14011989
> 
> 赞同：1
> 
> 时间：2012-12-23T15:05:31.330
> 
> 标签：c#, compare, equals, equality, iequatable

> **可能重复：**
> [比较引用类型的两个实例的“最佳实践”是什么？](https://stackoverflow.com/questions/104158/what-is-best-practice-for-comparing-two-instances-of-a-reference-type)

我的应用程序有这个自定义类。这个类有两个实例（A 和 B），我试图比较它们。但是，我遇到了问题；我正在 `IEquatable<T>`使用重写的`Equals`方法实现接口以进行此比较。

这些`Equals`方法调用了`ReferenceEquals`行为不端的函数。

以下是测试用例：

**案例1：** A和B是不同的实例，包含不同的数据..`ReferenceEquals`说：它们是不同的（这是正确的！）

**案例 2：** A 和 B 是不同的实例，但 B 是使用 A 的变量值实例化的（即 A 和 B 都包含完全相同的数据！）..`ReferenceEquals`说：它们不同（这是错误的！）

**案例 3：** A 和 B 是*相同*的实例（即 A 被传入两次，例如`Equals (A, A)`）`ReferenceEquals`说：它们是相同的（这是正确的！）

那么如何让案例 2 的结果也正确呢？

**实现的类`IEquatable<T>`：**

```
namespace DBtestApp1
{
    class QuantityBasedDiscount : IEquatable<QuantityBasedDiscount>
    {
        public string pType { get; set; }
        public string pSubType { get; set; }
        public DataTable quantityDiscountsDT { get; set; }

        public QuantityBasedDiscount()
        {
            pType = "";
            pSubType = "";
            quantityDiscountsDT = new DataTable();
        }

        public QuantityBasedDiscount(string iProdType, string iProdSubType, DataTable iQuantitiesDT)
        {
            pType = iProdType;
            pSubType = iProdSubType;
            quantityDiscountsDT = iQuantitiesDT;
        }

        public override int GetHashCode()
        {
            return base.GetHashCode();
        }

        public override bool Equals(Object obj)
        {

            var other = obj as QuantityBasedDiscount;
            if (other == null) return false;

            return Equals(other);
        }

        public bool Equals(QuantityBasedDiscount other)
        {
            if (other == null)
            {
                return false;
            }

            if (ReferenceEquals(this, other))
            {
                return true;
            }

            return false;
        }
    }
} 
```

**调用该`Equals`方法的代码（此处为案例 2 配置）：**

```
private bool AnyUnsavedChanges()
{
    QuantityBasedDiscount copyB = new QuantityBasedDiscount(copyA.pType, copyA.pSubType, copyA.quantityDiscountsDT);

    if (copyA.Equals(copyB))
    {
         return false; //They are the same!
    }
    else
    {
         return true; //They are NOT the same!
    }

} 
```

那么这段代码有什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T19:27:51.717

虽然不是完全重复，但您可以在这里找到所有答案：[比较引用类型的两个实例的“最佳实践”是什么？](https://stackoverflow.com/questions/104158/what-is-best-practice-for-comparing-two-instances-of-a-reference-type). 从该线程中获取提供 Konrad 答案的片段，以免出错。

* * *

简而言之，你做错了。您不是在比较通用`Equals`方法中的实际值。此外，在方法内部调用`==`运算符也不安全`Equals`。像这样做：

```
public override int GetHashCode()
{
    return pType.GetHashCode() ^ pSubType.GetHashCode() ^ quantityDiscountsDT.GetHashCode();
    //or something similar, but fast.
}

public bool Equals(QuantityBasedDiscount other)
{
   if (ReferenceEquals(null, other))
    {
        return false;
    }

    if (ReferenceEquals(this, other))
    {
        return true;
    }

    return pType == other.pType && pSubType == other.pSubType && 
           quantityDiscountsDT == other.quantityDiscountsDT;
} 
```

如果您的 DataTable 字段被修改，这可能仍然会给您带来不一致的结果。这一切都取决于如何`==`为 DataTable 实现运算符。要对此进行更多控制，您必须派生自己的 DataTable..

此外，您可能还想重载`==`和`!=`运算符。对于所有检查提供的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T15:37:31.770

您必须重写 Equals 和 GetHashCode，如果您喜欢/需要语法，您还需要重载 '==' 和 '!=' 运算符。在覆盖 Equals 时，您可以首先检查 ReferenceEquals 是否返回 true，如果不是，则比较对象的内容。

我个人更喜欢在这种情况下避免使用 ReferenceEquals。

# jquery - jQuery插件从方法返回值并且仍然保持可链接性

> ID：14011993
> 
> 赞同：0
> 
> 时间：2012-12-23T15:05:50.750
> 
> 标签：jquery, jquery-plugins, return-value, chaining

我目前正在修改我的个人 jQuery 插件起点，但我遇到了一个小而烦人的问题。如果调用公共方法，则返回调用它的对象而不是值。

这是我的实际出发点：

```
;(function($, window, document, undefined) {
    'use strict';

    var pluginName = 'defaultPluginName',
        defaults = {
            foo: 'foo',
            bar: 'bar'
        },
        settingsKey = pluginName + '-settings';

    var init = function(options) {

        var elem = this,
            $elem = $(this),
            settings = $.extend({}, defaults, options);

        $elem.data(settingsKey, settings);

    };

    var callMethod = function(method, options) {
        var methodFn = $[pluginName].addMethod[method],
            args = Array.prototype.slice.call(arguments);
        if (methodFn) {
            this.each(function() {
                var opts = args.slice(1),
                    settings = $(this).data(settingsKey);
                opts.unshift(settings);
                methodFn.apply(this, opts);
            });
        }
    };

    $[pluginName] = {
        settingsKey: settingsKey,
        addMethod: {
            option: function(settings, key, val) {
                if (val) {
                    settings[key] = val;
                } else if (key) {
                    return settings[key]; // returns the value from settings
                }
            }
        }
    };

    $.fn[pluginName] = function(options) {
        if (typeof options === 'string') {
            callMethod.apply(this, arguments);
        } else {
            init.call(this, options);
        }
        return this;
    };

}(window.jQuery || window.Zepto, window, document)); 
```

但是，我初始化插件并调用一个方法......

```
$('div').defaultPluginName();
console.log($('div').defaultPluginName('option', 'foo')); 
```

它返回： `[<div>, <div>, prevObject: jQuery.fn.jQuery.init[1], context: #document, selector: "div"]`而不是`'foo'`（从评论所在的位置）除外。

所以问题是，是否有可能从公共方法返回值并仍然保留可链接性？如果你有时间和乐趣来帮助我，我会很高兴举一些例子；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:15:13.553

我自己解决了：

```
$.fn[pluginName] = function(options) {
    var returns;
    if (typeof options === 'string') {
        var args = arguments,
            methodFn = $[pluginName].addMethod[args[0]];

        if (methodFn) {
            this.each(function() {
                var opts = Array.prototype.slice.call(args, 1),
                    settings = $.data(this, settingsKey);
                opts.unshift(settings);
                returns = methodFn.apply(this, opts);
            });
        }
    } else {
        new Plugin(this, options).init();
    }
   return returns !== undefined ? returns : this;
}; 
```

# git - 在 OSX Mountain Lion 下的 RStudio 中设置 git 可执行文件的路径

> ID：14011998
> 
> 赞同：14
> 
> 时间：2012-12-23T15:06:28.737
> 
> 标签：git, osx-mountain-lion, rstudio

我在 Mac OSX v. 10.8.2 (Mountain Lion) 下运行 RStudio v. 0.97.237。我正在尝试在 RStudio 中设置我的 git 可执行文件的路径。正确的路径是 /usr/local/git。RStudio 中有一个首选项设置，用于输入 Git 可执行文件的路径（首选项...、Git/SVN、Git 可执行文件）。如果我可以简单地在对话框中键入“/usr/local/git”，我希望我会完成。

但是，RStudio 不允许我简单地输入目录路径。相反，需要使用标准 OSX 浏览（“选择文件”）实用程序来浏览目录树。在将 OSX 从 Snow Leopard 升级到 Mountain Lion 之后，我发现许多与系统相关的目录，包括 /usr，在 OSX 文件浏览实用程序中不再可见。它们在 shell 中可见（使用 XQuartz，命令“ls”），但在 Mountain Lion GUI 中不可见。（显然山狮认为它知道什么对我有好处。）

我的问题：

1.) RStudio 中有没有一种方法可以直接以命令行方式设置 Git 可执行文件的路径，而无需使用 OSX 目录浏览实用程序？

2.) 或者，OSX Mountain Lion 中是否有办法调整系统偏好设置以使*所有*目录和文件可见，而不仅仅是使用 Mountain Lion 的默认设置可见的受限集？

3.) 还有其他方法可以解决这个问题吗？

注意：我让 Git 在 OSX 10.6.8 (Snow Leopard) 下与 RStudio 一起正常工作。升级到 OSX 10.8.2 后出现问题。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-24T12:54:05.927

我能够找到我的问题的答案，由[http://osxdaily.com/2009/02/25/show-hidden-files-in-os-x/](http://osxdaily.com/2009/02/25/show-hidden-files-in-os-x/)和 [http://support.rstudio.org/提供帮助/讨论/问题/2907-no-svn-in-mountain-lion](http://support.rstudio.org/help/discussions/problems/2907-no-svn-in-mountain-lion)。

要确保 Git 可执行文件的路径正确：打开终端窗口，然后键入：

```
$ which git 
```

就我而言，答案又回来了：/usr/local/git/bin/git。

要使隐藏文件在 Mountain Lion 中可见：Per osxdaily.com：“您可以通过按 Command+Shift+Period 在任何 Mac OS X 保存对话框中快速显示所有隐藏文件。”

因此：在 RStudio 中，在 Git 可执行文件设置中，单击“浏览”；当保存对话框打开时，按 Command+Shift+Period。导航到 git 可执行文件，选择它，然后保存。

我发现至少有一个存储库仍然无法识别新 Git 可执行文件的位置。我必须按如下方式重置 Git 的使用：在“项目选项...”下，将版本控制选项从“Git”切换为“无”。重新启动 RStudio 以使此更改生效。然后回到项目选项，将版本控制选项从“无”切换回“Git”，然后再次重新启动 RStudio。

这行得通。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-24T00:18:38.693

虽然 Apple 确实一直隐藏包含 OS X 的 Unix 基础的文件夹：`/bin`、、`/sbin`（`/usr`以及现在 ~/Library 自 Lion 以来），但文章“[在 Lion 中查看 ~/Library 文件夹的 18 种方法](http://www.macworld.com/article/1161156/view_library_folder_in_lion.html)”在这里应该有所帮助（此外到`Ctrl``Shift``.`）。

极端的解决方案是`/usr`再次可见。
正常的解决方案是仅在需要时才显示它（转到文件夹，在 Finder 的转到菜单中：）`Shift``Command``G`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-19T11:44:40.107

在寻找一种方法让 RStudio 在 Mavericks (OSX10.9) 下的 system() 调用中知道我的完整路径时，我发现我机器上的 git 路径存在并且如下所示：

```
>cat /etc/paths.d/git
/usr/local/git/bin 
```

如果您没有此文件，请使用适合您自己安装的 git 路径创建它，并且 RStudio 应该可以找到您的 git 可执行文件。我希望这个修复也适用于山狮，没有办法测试它。

# php - PDO 用户验证

> ID：14011999
> 
> 赞同：2
> 
> 时间：2012-12-23T15:06:49.177
> 
> 标签：php, mysql, pdo

该`count($existuser)`函数始终返回 1。即使没有具有该名称或电子邮件的用户。

这是代码：

```
function registerUser($username, $password, $passwordagain, $email, $mcname) {
    include $_SERVER['DOCUMENT_ROOT'] . "/config/config.php";
    $conn          = new PDO('mysql:host=' . $ip . ';dbname=' . $database, $username, $password);
    $validusername = "/^[a-z0-9]+$/";
    $validpassword = "/^[A-Za-z0-9]+$/";
    $validemail    = "/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/";
    $validmcname   = "/^[A-Za-z0-9]+$/";
    $error         = 0;

    if (strlen($username) < 4 || strlen($username) > 24) {
        $error = 1;
    }
    if (strlen($password) < 6 || strlen($password) > 24) {
        $error = 1;
    }
    if (strlen($mcname) < 4 || strlen($mcname) > 24) {
        $error = 1;
    }
    if (!preg_match($validusername, $username)) {
        $error = 1;
    }
    if (!preg_match($validpassword, $password)) {
        $error = 1;
    }
    if (!preg_match($validemail, $email)) {
        $error = 1;
    }
    if (!preg_match($validmcname, $mcname)) {
        $error = 1;
    }
    if ($password != $passwordagain) {
        $error = 1;
    }
//test
    $userquery = $conn->query('SELECT * FROM users WHERE username="' . $username . '"');
    $existuser = $userquery->fetch();
    echo count($existuser);
//test
    if (count($existuser)) {
        $error = 1;
        echo "<div class='erroralert'>Username already exists!</div>";
    }
//test
    $emailquery = $conn->query('SELECT * FROM users WHERE email="' . $email . '"');
    $existemail = $emailquery->fetch();
//test
    if (count($existemail)) {
        $error = 1;
        echo "<div class='erroralert'>E-mail already exists!</div>";
    }
    if ($error != 1) {
        $encryptedpassword = hash('sha512', $password);
        $registeruser      = $conn->query("INSERT INTO users(username, password, email, mcname) VALUES ('$username', '$encryptedpassword', '$email', '$mcname')");
        echo "<div class='successalert'>Succesfully registred</div>";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:00:49.793

如果您这样做，为什么要使用 PDO：

```
$userquery = $conn->query('SELECT * FROM users WHERE username="' . $username . '"');
$existuser = $userquery->fetch(); 
```

你应该有以下逻辑：

```
$userquery = $conn->prepare('SELECT * FROM users WHERE username = ?');
$userquery->execute(array($username));
if ($userquery->rowCount()) {
    // found user
} else {
    // user not found
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T15:20:44.290

查询可能无法执行，这就是为什么你总是得到“1”，这可能是错误报告。

通读你的代码，我建议你试试这个：

在以下查询中，您将用户名括在 "，但是，这并不总是受支持，而是您应该使用单引号 ' 并将字符串本身用 " 括起来。所以下面一行

```
$userquery = $conn->query('SELECT * FROM users WHERE username="' . $username . '"'); 
```

应该

```
$userquery = $conn->query("SELECT * FROM users WHERE username='" . $username . "'"); 
```

对具有相同问题的其他查询执行相同操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T16:01:23.463

你在这里用[`count()`](http://php.net/count)错了。*对于任何普通变量*，它将返回 1，对于数组，它将返回元素的数量。

重要的部分是第一个。如果没有行，[`PDOStatement::fetch()`](http://php.net/PDOStatement.fetch)将返回`FALSE`1，这是真值：

```
count(FALSE);      # 1
count($existuser); # 1 when there is no user, when there is a user at least 2
                   #   for default fetchmode PDO::FETCH_BOTH 
```

所以你什么都没检查。而是测试它*不是* `FALSE`：

```
if ($existuser === FALSE) {
   // error.
} 
```