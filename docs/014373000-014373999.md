# StackOverflow 问答 14373000-14373999

# android - java.lang.NoClassDefFoundError: com.facebook.android.R$layout 使用 facebook sdk jar 时出错

> ID：14373004
> 
> 赞同：12
> 
> 时间：2013-01-17T05:58:39.203
> 
> 标签：android, facebook, jar

当我将项目链接到已复制到项目 lib 文件夹中的 facebookSDK jar 文件而不是将项目链接到工作区中的 facebookSDK 库项目时，出现**java.lang.NoClassDefFoundError: com.facebook.android.R$layout错误。**当我链接到工作区中的库项目时，它工作正常。

谁能告诉我如何解决这个问题。我正在为 android 使用 facebook sdk 3.0。提前致谢。

编辑：在生成带有警告的 jar 文件后，我的 logcat 中出现以下错误

```
01-17 12:42:04.790: E/AndroidRuntime(3073): FATAL EXCEPTION: main
01-17 12:42:04.790: E/AndroidRuntime(3073): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.games.game/com.facebook.LoginActivity}: android.content.res.Resources$NotFoundException: File 296108030489520 from xml type layout resource ID #0x7f030001
01-17 12:42:04.790: E/AndroidRuntime(3073):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1816)
01-17 12:42:04.790: E/AndroidRuntime(3073):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1837)
01-17 12:42:04.790: E/AndroidRuntime(3073):     at android.app.ActivityThread.access$1500(ActivityThread.java:132)
01-17 12:42:04.790: E/AndroidRuntime(3073):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1033)
01-17 12:42:04.790: E/AndroidRuntime(3073):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-17 12:42:04.790: E/AndroidRuntime(3073):     at android.os.Looper.loop(Looper.java:143)
01-17 12:42:04.790: E/AndroidRuntime(3073):     at android.app.ActivityThread.main(ActivityThread.java:4196)
01-17 12:42:04.790: E/AndroidRuntime(3073):     at java.lang.reflect.Method.invokeNative(Native Method)
01-17 12:42:04.790: E/AndroidRuntime(3073):     at java.lang.reflect.Method.invoke(Method.java:507)
01-17 12:42:04.790: E/AndroidRuntime(3073):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-17 12:42:04.790: E/AndroidRuntime(3073):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-17 12:42:04.790: E/AndroidRuntime(3073):     at dalvik.system.NativeStart.main(Native Method)
01-17 12:42:04.790: E/AndroidRuntime(3073): Caused by: android.content.res.Resources$NotFoundException: File 296108030489520 from xml type layout resource ID #0x7f030001
01-17 12:42:04.790: E/AndroidRuntime(3073):     at android.content.res.Resources.loadXmlResourceParser(Resources.java:1934)
01-17 12:42:04.790: E/AndroidRuntime(3073):     at android.content.res.Resources.loadXmlResourceParser(Resources.java:1889)
01-17 12:42:04.790: E/AndroidRuntime(3073):     at android.content.res.Resources.getLayout(Resources.java:740)
01-17 12:42:04.790: E/AndroidRuntime(3073):     at android.view.LayoutInflater.inflate(LayoutInflater.java:318)
01-17 12:42:04.790: E/AndroidRuntime(3073):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
01-17 12:42:04.790: E/AndroidRuntime(3073):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:224)
01-17 12:42:04.790: E/AndroidRuntime(3073):     at android.app.Activity.setContentView(Activity.java:1702)
01-17 12:42:04.790: E/AndroidRuntime(3073):     at com.facebook.LoginActivity.onCreate(LoginActivity.java:55)
01-17 12:42:04.790: E/AndroidRuntime(3073):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1093)
01-17 12:42:04.790: E/AndroidRuntime(3073):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1780)
01-17 12:42:04.790: E/AndroidRuntime(3073):     ... 11 more
01-17 12:42:04.790: E/AndroidRuntime(3073): Caused by: java.io.FileNotFoundException: 296108030489520
01-17 12:42:04.790: E/AndroidRuntime(3073):     at android.content.res.AssetManager.openXmlAssetNative(Native Method)
01-17 12:42:04.790: E/AndroidRuntime(3073):     at android.content.res.AssetManager.openXmlBlockAsset(AssetManager.java:524)
01-17 12:42:04.790: E/AndroidRuntime(3073):     at android.content.res.Resources.loadXmlResourceParser(Resources.java:1916)
01-17 12:42:04.790: E/AndroidRuntime(3073):     ... 20 more 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-06T07:59:46.357

这是因为 JAR 里面不包含 Facebook SDK Project 的资源文件夹。

有两种解决方案：

1.  将 Facebook SDK Project 添加为项目库。

2.  将文件 Facebook SDK JAR 复制到当前项目的文件夹库中**，并将所有资源从 Facebook SDK 项目复制到当前项目。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T06:09:22.447

这意味着您的 JAR 文件没有所有类文件。

**NoClassDefFoundError**仅在找不到java 类的**.class文件时出现。**

由于类文件不存在，您无法访问该类中的任何函数或变量。

为了解决这个问题，

n eclipse 导出 jar 文件时，它仅包含没有任何错误或警告的类。因此，要生成包含警告的所有类的 jar 文件，您需要选择**generate Jar with warnings**。

然后将此jar文件放在**libs**文件夹而不是**lib**文件夹中。

然后将此 jar 添加到您的构建路径中。

当您要导入资源时，

由于 Android 会自动使用 /res 文件夹下的资源文件生成 R 类，因此使用 R 类作为最终静态是不可能的。

在将导出到 jar 文件中的源代码中，不要使用 R 变量，因为它将在编译时替换为最终的静态内存地址。不要使用 R，而是使用下面的方法。

```
 public static int getResourseIdByName(String packageName, String className, String name) {
       Class r = null;
       int id = 0;
    try {
        r = Class.forName(packageName + ".R");

        Class[] classes = r.getClasses();
        Class desireClass = null;

        for (int i = 0; i < classes.length; i++) {
            if(classes[i].getName().split("\\$")[1].equals(className)) {
                desireClass = classes[i];

                break;
            }
        }

        if(desireClass != null)
            id = desireClass.getField(name).getInt(desireClass);
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (SecurityException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    } catch (NoSuchFieldException e) {
        e.printStackTrace();
    }

    return id;

    } 
```

例如，如果您有一个名为“main.xml”的布局，您可以通过调用方法获取它

```
int id = getResourceIdByName(context.getPackageName(), "layout", "main"); 
```

如果你有一个 id 为 "text1" 的字符串，你可以通过调用方法来获取它

```
int id = getResourceIdByName(context.getPackageName(), "string", "text1"); 
```

此方法在运行时为您提供资源 ID。它使用反射 api 在运行时获取 R 的状态。

因此，现在您可以通过使用此方法避免使用 R 变量和资源错误

将您的资源复制到目标项目。

最后运行你的项目。

# java - 如何使用 HttpURLConnection 或 HttpClient 库在 java 中进行 MERGE 调用？

> ID：14373007
> 
> 赞同：3
> 
> 时间：2013-01-17T05:58:52.840
> 
> 标签：java, jakarta-ee, httpurlconnection, apache-httpclient-4.x

我正在为我的 Web 应用程序使用第三方的 Web 服务。为了更新他们提供 MERGE 方法的实体（他们用于新实体的 POST 方法（它需要所有字段））所以我搜索了这个方法是否有任何示例提供但没有成功。有人可以告诉我如何实现这一目标。有人也可以告诉我如何使用 PATCH 方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-05-17T19:55:53.050

不支持`MERGE`and`PATCH`方法。`HttpURLConnection.setRequestMethod`

这是[文档](https://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setRequestMethod-java.lang.String-)：`HttpURLConnection.setRequestMethod`

> 设置 URL 请求的方法，其中之一： GET POST HEAD OPTIONS PUT DELETE TRACE 是合法的，受协议限制。默认方法是 GET。

您的第三方 Web 服务是 OData 服务吗？该`MERGE`方法是为 OData 发明的，在官方 HTTP 协议中不存在。以下是微软（OData 的发明者）的[相关文档：](https://docs.microsoft.com/en-us/openspecs/windows_protocols/ms-odata/59d5abd3-7b12-490a-a0e2-9d9324b91893)

> 本节的其余部分定义了在 OData 1.0 和 OData 2.0 协议中使用的自定义 HTTP MERGE 方法，以指定将通过使用合并语义完成更新...使用 MERGE 或 PATCH 的 HTTP 请求之间的唯一区别并且 PUT 是客户端意图...由于 MERGE 不是 HTTP 规范 [RFC2616] 中定义的动词之一，因此使用 MERGE 动词可能不会像 HTTP 规范中定义的方法那样无缝地流过网络中介。 .

作为一种解决方案，我建议在[OData 批处理请求](https://www.odata.org/documentation/odata-version-2-0/batch-processing/)中发送您的有效负载。这是一个特殊`POST`请求，其有效负载可以包含多个 HTTP 请求。您可以在有效负载中指定您的`MERGE`和`PATCH`请求`batch`。

# php - 如何按名称列出两个连接表信息（有些带有名称，有些可能为空）

> ID：14373008
> 
> 赞同：1
> 
> 时间：2013-01-17T05:59:01.233
> 
> 标签：php, mysql, sql, select

我有两张这样的桌子

```
Invoice   (invoice_no, invoice_date, customer_id, ...),  
Customers (customer_id, customer_name, ...) 
```

现在我要做的是列出按客户名称排序的发票。

```
SELECT b.customer_name, a.*
FROM Invoice a, Customers b
WHERE a.customer_id=b.customer_id
ORDER BY b.customer_name 
```

但是这个 sql 的问题是，如果有发票没有`customer_id`，我怎么能先列出这些发票，然后`customer_id`按`customer_name`asc 列出发票。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T06:00:39.707

改为使用`LEFT JOIN`。

“有点怪异。为什么有些发票没有客户？你发给谁？无论如何，这是查询。

```
SELECT  a.*, b.*  // SELECT only the columns you want
FROM    Invoice a
        LEFT JOIN Customers b
            ON a.customer_ID = b.customer_ID 
```

要全面了解联接，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:02:56.567

```
SELECT  
    a.*, 
    b.customer_name
FROM    Invoice a
LEFT JOIN Customers b ON a.customer_ID = b.customerID 
```

使用连接而不是 FROM tablea、tableb。因为这将从两个表中获取笛卡尔积，除非您使用 WHERE 限制它们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T06:04:47.033

用这个

```
 SELECT * FROM Invoice,customer where Invoice.customer_id=customer.customer_id ORDER BY IF(Invoice.customer_id is NULL , Invoice.customer_id, ~Invoice.customer_id) ASC 
```

# wordpress - 在 codeigniter 的 tinymce 编辑器中设置主题

> ID：14373015
> 
> 赞同：1
> 
> 时间：2013-01-17T05:59:44.373
> 
> 标签：wordpress, codeigniter, tinymce

我们如何像 wordperss 一样在 codeigniter 中配置 tinymce 编辑器。所有选项的主题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:37:34.130

看看这个非常简洁的教程：[http ://browse-tutorials.com/tutorial/integrating-wysiwyg-tinymce-codeigniter](http://browse-tutorials.com/tutorial/integrating-wysiwyg-tinymce-codeigniter)

# css - 在 div 中居中图像

> ID：14373017
> 
> 赞同：0
> 
> 时间：2013-01-17T05:59:46.807
> 
> 标签：css, html

大家好，我正在尝试将一些图像居中。他们一直向左浮动，我尝试过文本对齐，但它似乎不起作用。jsfiddle 在这里。[http://jsfiddle.net/E7Ydz/2/](http://jsfiddle.net/E7Ydz/2/) PS当我睡了一会儿，我可能会这样做，现在是伦敦的 5:56 :(

[HTML]

```
<div id="portfolio" style="height: 3020px;">

 <div id="project" class="cms design html-css " data-col="1" data-row="0" style="right: 0px; opacity: 1; top: 0px;">
    <div id="workEntry1" class="workEntry">

       <div id="thumbAttachment">
                    <div id="inThumb">
                    <img src="http://www.enjoythis.co.uk/wp-content/files_mf/work_thumbnail275.jpg">
        </div>

         <div id="blackCross"> <a href="http://www.enjoythis.co.uk/jane-stockdale/"><img src="http://www.enjoythis.co.uk/wp-content/themes/enjoyThis/images/thumb_transparency.png"></a></div>

          </div>

        <!--<div id="attachmentShadowThumb"></div>-->

        <div id="workTitle">
                </div>
            <div id="workTags">

            </div>
      </div>
    </div>

          <div id="project" class="design illustration html-css " data-col="2" data-row="0" style="right: 0px; opacity: 1; top: 0px;">
    <div id="workEntry2" class="workEntry">

       <div id="thumbAttachment">
                    <div id="inThumb">
                    <img src="http://www.enjoythis.co.uk/wp-content/files_mf/work_thumbnail2.jpg">
        </div>

         <div id="blackCross"> <a href="http://www.enjoythis.co.uk/street-child-world-cup-i-am-somebody/"><img src="http://www.enjoythis.co.uk/wp-content/themes/enjoyThis/images/thumb_transparency.png"></a></div>

          </div>

        <!--<div id="attachmentShadowThumb"></div>-->

        <div id="workTitle">
      </div>
            <div id="workTags">                 

            </div>
      </div>
    </div>
          <div id="project" class="app database design " data-col="0" data-row="1" style="right: 0px; opacity: 1; top: 0px;">
    <div id="workEntry3" class="workEntry">

       <div id="thumbAttachment">
                    <div id="inThumb">
                    <img src="http://www.enjoythis.co.uk/wp-content/files_mf/pgtips_thumb37.jpg">
        </div>

         <div id="blackCross"> <a href="http://www.enjoythis.co.uk/pg-tips-vs-january/"><img src="http://www.enjoythis.co.uk/wp-content/themes/enjoyThis/images/thumb_transparency.png"></a></div>

          </div>

        <!--<div id="attachmentShadowThumb"></div>-->

        <div id="workTitle">
        </div>
            <div id="workTags">

            </div>
      </div>
    </div> 
```

[CSS]

```
#project{
    float:left;
    position:relative;
    padding: 0px 0px 0px 2px;
    height:200px;
    width:309px;
    display: inline;
}

.workEntry{ 
    width:310px;
    overflow:hidden;
}

#thumbAttachment{
    float:left;
    width: 310px;
    height:200px;
    overflow: hidden;
}

#inThumb{
    float:left;
}

#blackCross{
    float:left;
    width: 310px;
    height:200px;
    margin-top:-200px;
    khtml-opacity:0;
    -moz-opacity:0;
    -ms-filter:"alpha(opacity=0)";
    filter:alpha(opacity=0);
    opacity:0;

}

#blackCross:visited{

    khtml-opacity:0;
    -moz-opacity:0;
    -ms-filter:"alpha(opacity=0)";
    filter:alpha(opacity=0);
    opacity:0;
}

#blackCross:hover{
    khtml-opacity:1;
    -moz-opacity:1;
    -ms-filter:"alpha(opacity=100)";
    filter:alpha(opacity=100);
    opacity:100;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T06:06:16.127

希望我能很好地理解你的问题。您应该使用`margin-left: auto;`and`margin-right: auto;`来制作一个`div`（或者更好的词，一个块位置元素）中心。

例如，您应该将您的 css 代码更改为：

```
#inThumb{
    margin-left: auto;
    margin-right: auto;
} 
```

看到这个jsFiddle：http: [//jsfiddle.net/E7Ydz/4/](http://jsfiddle.net/E7Ydz/4/)

# asp.net - signalR - 如何从客户端调用服务器方法 - 代码不起作用

> ID：14373021
> 
> 赞同：3
> 
> 时间：2013-01-17T06:00:19.917
> 
> 标签：asp.net, signalr

当我尝试从客户端调用服务器端的 SendNewOrderConfirmation 时，我得到

> “未定义”不是函数

在线 `chat.SendNewOrderConfirmation(data);` 有人知道为什么会这样吗？谢谢

在服务器端

```
public class DriverChat : Hub, IDisconnect
{

    public void Start(Driver d)
    {
     ...
     }
    public void SendNewOrderConfirmation(OrderDriverData data)
    {
        LogFile.LogResponseTime(data.orderId, data.driverId);
    }
} 
```

在客户端

```
 function begin(args) {

        try {
            //alert('begin');

            chat = $.connection.driverChat;

            chat.refresh = function () {
                ready++;
            };
            chat.disconnect = function () {
                alert('Server has disconnected');
            };
            $.connection.hub.start(function () {
                chat.start(args);
                ready++;
               // alert('signalR started');
            });
         } catch (e) {
            alert(e.message);
            return e.message;
        }
    }
    function confirmNewOrder(data) {
        try{
            alert('sending cofirmation');
            chat.SendNewOrderConfirmation(data);
            alert('confirmation sent');
        } catch (e) {
            alert(e);
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T13:37:56.213

根据您使用的 SignalR 版本，答案可能会有所不同。

首先，如果您使用的是 v1 Alpha 之前的版本，那么您的代码应该是；

```
chat.sendNewOrderConfirmation(data); 
```

注意小写`s`。

如果您使用的是 v1 Alpha 或更高版本，那么您的代码应该是；

```
chat.server.sendNewOrderConfirmation(data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:23:14.583

您必须注册集线器的 javascript 生成文件。将此添加到您的页面（或您的母版页）：

```
<script src="<%: ResolveUrl("~/signalr/hubs") %>"></script> 
```

# android - 可扩展列表视图不起作用

> ID：14373026
> 
> 赞同：0
> 
> 时间：2013-01-17T06:00:41.437
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我正在尝试做 Expandablelistview。但它没有扩大父视图..

这是我第一次尝试做 Expandablelistview。请帮我解决这个错误。

当我点击父级时，展开不起作用。怎么做。

下面是我的代码

```
 public class WorkDetailView extends Activity { 
private ListView listviewDialog;
private ExpandableListView detaillistView;

     public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.detaillistview);

     detaillistView = (ExpandableListView) findViewById(R.id.detailListview);
    detaillistView.setDividerHeight(1);
    metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    width = metrics.widthPixels;
    detaillistView.setIndicatorBounds(width - GetDipsFromPixel(40), width - GetDipsFromPixel(5));
    dataAdapter = new WorkDetailAdapter(WorkDetailView.this, sampleDetailsArray);
    detaillistView.setAdapter(dataAdapter);
    dataAdapter.notifyDataSetChanged();

      public int GetDipsFromPixel(float pixels)
    {
     // Get the screen's density scale
     final float scale = getResources().getDisplayMetrics().density;
     // Convert the dps to pixels, based on density scale
     return (int) (pixels * scale + 20f);
    }

         }

       public class WorkDetailAdapter extends BaseExpandableListAdapter {
    private LayoutInflater mInflater;
    private ArrayList<PatientSampleDetails> sampleDetailsArray; 

public WorkDetailAdapter(Activity activity, ArrayList<PatientSampleDetails> sampleDetailsArray) {
        this.sampleDetailsArray = sampleDetailsArray;
        this.activity = activity;
        mInflater = LayoutInflater.from(activity);      
    }

    public void setInflater(LayoutInflater mInflater) {
          this.minflater = mInflater;
         }
           static class ViewHolder {
    public ImageView imageView1;

    private TextView volumetext, textViewDateTime, textViewOrderNo;
    }

    @Override
    public Object getChild(int groupPosition, int childPosition) {
        return sampleDetailsArray.get(childPosition);
    }

    @Override
    public long getChildId(int groupPosition, int childPosition) {
        return childPosition;
    }

    @Override
    public View getChildView(int groupPosition, final int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {

        final ViewHolder holder = new ViewHolder(); 
         if (convertView == null) {
                convertView = mInflater.inflate(R.layout.detaillistrowview, null);

    }
                convertView.setTag(holder); 

            return convertView;
    }

    @Override
    public int getChildrenCount(int groupPosition) {
        return sampleDetailsArray.size();
    }

    @Override
    public int getGroupCount() {
        return sampleDetailsArray.size();
    }

    @Override
    public Object getGroup(int groupPosition) {
        return sampleDetailsArray.get(groupPosition);
    }

    @Override
    public long getGroupId(int groupPosition) {
        return groupPosition;
    }

    @Override
    public View getGroupView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {
        final ViewHolder holder = new ViewHolder(); 
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.getgroupviewdetail, null);
        }
            CheckBox  checkBoxGroup = (CheckBox)convertView.findViewById(R.id.checkBoxGroup);
            checkBoxGroup.setChecked(true);
            holder.textViewOrderNo = (TextView) convertView.findViewById(R.id.textViewOrderNo);

        return convertView;
    }

    @Override
    public boolean hasStableIds() {
        return false;
    }

    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
        Log.i("eeeeeeeeeee", "click");
        return true;
    }

    @Override
    public boolean areAllItemsEnabled()
    {
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:05:36.197

这里是 Exapndable listview 的[例子](http://www.dreamincode.net/forums/topic/270612-how-to-get-started-with-expandablelistview/).. 参考它。

试试这个[演示](http://www.dreamincode.net/forums/index.php?app=core&module=attach&section=attach&attach_id=28652&s=a5fc64500c422342c93165b0c38c2710)

# ios - ios-focusing make too long

> ID：14373028
> 
> 赞同：0
> 
> 时间：2013-01-17T06:00:42.460
> 
> 标签：ios, zbar

`ios`我用abd实现了扫描条码`zbar`：`ZBarReaderViewController`.但是当相机显示时，对焦很模糊，总是需要两秒钟的对焦才能变得清晰，为什么会出现这种情况？有什么设置可以使它更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T01:32:37.517

您可以使用闪光灯/手电筒设置来实现更好的对焦。坏/低光是自动对焦的一大敌人。将焦点设置为连续将有助于扫描。

请记住相机的最小焦距，在某个点它不会聚焦。

# neo4j - 使用 Logback.xml 播放 2.1 和 Neo4J WrappingNeoServer 错误

> ID：14373029
> 
> 赞同：10
> 
> 时间：2013-01-17T06:00:51.563
> 
> 标签：neo4j, slf4j, logback, playframework-2.1

我有一个嵌入式 neo4j 服务器，带有在 Play 2.0.1 应用程序中工作的管理控制台。我最近升级到与 DeadBolt 兼容的候选版本，发现应用程序不再运行。

要启动服务器，我正在执行以下操作：

```
 graphDb = (GraphDatabaseAPI) new GraphDatabaseFactory()
                .newEmbeddedDatabaseBuilder(CONF_DBMETA_LOCATION)
                .setConfig(ShellSettings.remote_shell_enabled, "true")
                .newGraphDatabase();
        ServerConfigurator config;
        config = new ServerConfigurator(graphDb);
        // let the server endpoint be on a custom port

        srv = new WrappingNeoServerBootstrapper(graphDb, config);
        srv.start(); 
```

不幸的是，我得到：

```
> java.lang.RuntimeException:
> org.neo4j.kernel.lifecycle.LifecycleException: Component
> 'org.neo4j.kernel.logging.LogbackService@4c043845' failed to
> initialize. Please see attached cause exception. 
```

我尝试从添加了 neo4j-server 的 Build.scala 中删除 slf4j 和 logback 依赖项，但无济于事。似乎 Neo4j 正在加载错误的 logback.xml。此外，如果我将 notTransitive() 添加到 neo4j-server 依赖项中，启动时的 logback.xml 警告就会消失。我想 Neo4j 特定的 logback.xml 嵌入在 jar 中并导致了问题。我看到的一种潜在解决方案是通过代码编写自定义配置，但我不确定如何执行此操作。有什么想法吗？作为参考，我在启动时收到这些错误：

```
>     22:11:05,124 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find
> resource [logback.groovy]
>     22:11:05,125 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find
> resource [logback-test.xml]
>     22:11:05,125 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource
> [logback.xml] at
> [jar:file:/Users/steve/Code/play-2.1-RC1/repository/local/play/play_2.10/2.1-RC1/jars/play_2.10.jar!/logback.xml]
>     22:11:05,126 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml]
> occurs multiple times on the classpath.
>     22:11:05,126 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml]
> occurs at
> [jar:file:/Users/steve/Code/play-2.1-RC1/framework/../repository/cache/org.neo4j.app/neo4j-server/jars/neo4j-server-1.9-SNAPSHOT.jar!/logback.xml]
>     22:11:05,126 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml]
> occurs at
> [jar:file:/Users/steve/Code/play-2.1-RC1/repository/local/play/play_2.10/2.1-RC1/jars/play_2.10.jar!/logback.xml]
>     22:11:05,139 |-INFO in ch.qos.logback.core.joran.spi.ConfigurationWatchList@733b8bc1 - URL
> [jar:file:/Users/steve/Code/play-2.1-RC1/repository/local/play/play_2.10/2.1-RC1/jars/play_2.10.jar!/logback.xml]
> is not of type file
>     22:11:05,265 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug
> attribute not set
>     22:11:05,614 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate
> appender of type [ch.qos.logback.core.ConsoleAppender]
>     22:11:05,625 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as
> [STDOUT]
>     22:11:05,657 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming
> default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for
> [encoder] property
>     22:11:05,707 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level
> of ROOT logger to ERROR
>     22:11:05,707 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching
> appender named [STDOUT] to Logger[ROOT]
>     22:11:05,707 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - End of
> configuration.
>     22:11:05,709 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@4a546701 - Registering
> current configuration as safe fallback point 
```

有关完整的例外情况，请参见下文：

```
> play.api.UnexpectedException: Unexpected exception[RuntimeException:
> org.neo4j.kernel.lifecycle.LifecycleException: Component
> 'org.neo4j.kernel.logging.LogbackService@4c043845' failed to
> initialize. Please see attached cause exception.]     at
> play.core.ReloadableApplication$$anonfun$get$1$$anonfun$1.apply(ApplicationProvider.scala:134)
> ~[play_2.10.jar:2.1-RC1]  at
> play.core.ReloadableApplication$$anonfun$get$1$$anonfun$1.apply(ApplicationProvider.scala:101)
> ~[play_2.10.jar:2.1-RC1]  at scala.Option.map(Option.scala:145)
> ~[scala-library.jar:na]   at
> play.core.ReloadableApplication$$anonfun$get$1.apply(ApplicationProvider.scala:101)
> ~[play_2.10.jar:2.1-RC1]  at
> play.core.ReloadableApplication$$anonfun$get$1.apply(ApplicationProvider.scala:99)
> ~[play_2.10.jar:2.1-RC1]  at
> scala.util.Either$RightProjection.flatMap(Either.scala:523)
> [scala-library.jar:na] Caused by: java.lang.RuntimeException:
> org.neo4j.kernel.lifecycle.LifecycleException: Component
> 'org.neo4j.kernel.logging.LogbackService@4c043845' failed to
> initialize. Please see attached cause exception.  at
> org.neo4j.kernel.InternalAbstractGraphDatabase.run(InternalAbstractGraphDatabase.java:258)
> ~[neo4j-kernel-1.9.M03.jar:na]    at
> org.neo4j.kernel.EmbeddedGraphDatabase.<init>(EmbeddedGraphDatabase.java:88)
> ~[neo4j-kernel-1.9.M03.jar:na]    at
> org.neo4j.graphdb.factory.GraphDatabaseFactory$1.newDatabase(GraphDatabaseFactory.java:83)
> ~[neo4j-kernel-1.9.M03.jar:1.9.M03]   at
> org.neo4j.graphdb.factory.GraphDatabaseBuilder.newGraphDatabase(GraphDatabaseBuilder.java:206)
> ~[neo4j-kernel-1.9.M03.jar:1.9.M03]   at
> EmbeddedGraphDB.initializeDatabase(EmbeddedGraphDB.java:70)
> ~[na:na]  at
> EmbeddedGraphDB.<init>(EmbeddedGraphDB.java:51)
> ~[na:na] Caused by: org.neo4j.kernel.lifecycle.LifecycleException:
> Component 'org.neo4j.kernel.logging.LogbackService@4c043845' failed to
> initialize. Please see attached cause exception.  at
> org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.init(LifeSupport.java:471)
> ~[neo4j-kernel-1.9.M03.jar:1.9.M03]   at
> org.neo4j.kernel.lifecycle.LifeSupport.init(LifeSupport.java:62)
> ~[neo4j-kernel-1.9.M03.jar:1.9.M03]   at
> org.neo4j.kernel.lifecycle.LifeSupport.start(LifeSupport.java:96)
> ~[neo4j-kernel-1.9.M03.jar:1.9.M03]   at
> org.neo4j.kernel.InternalAbstractGraphDatabase.run(InternalAbstractGraphDatabase.java:245)
> ~[neo4j-kernel-1.9.M03.jar:na]    at
> org.neo4j.kernel.EmbeddedGraphDatabase.<init>(EmbeddedGraphDatabase.java:88)
> ~[neo4j-kernel-1.9.M03.jar:na]    at
> org.neo4j.graphdb.factory.GraphDatabaseFactory$1.newDatabase(GraphDatabaseFactory.java:83)
> ~[neo4j-kernel-1.9.M03.jar:1.9.M03] Caused by:
> org.neo4j.kernel.lifecycle.LifecycleException: Component
> 'org.neo4j.kernel.logging.LogbackService$1@1955bd61' was successfully
> initialized, but failed to start. Please see attached cause exception.
>   at
> org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.start(LifeSupport.java:495)
> ~[neo4j-kernel-1.9.M03.jar:1.9.M03]   at
> org.neo4j.kernel.lifecycle.LifeSupport.start(LifeSupport.java:105)
> ~[neo4j-kernel-1.9.M03.jar:1.9.M03]   at
> org.neo4j.kernel.logging.LogbackService.init(LogbackService.java:106)
> ~[neo4j-kernel-1.9.M03.jar:1.9.M03]   at
> org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.init(LifeSupport.java:465)
> ~[neo4j-kernel-1.9.M03.jar:1.9.M03]   at
> org.neo4j.kernel.lifecycle.LifeSupport.init(LifeSupport.java:62)
> ~[neo4j-kernel-1.9.M03.jar:1.9.M03]   at
> org.neo4j.kernel.lifecycle.LifeSupport.start(LifeSupport.java:96)
> ~[neo4j-kernel-1.9.M03.jar:1.9.M03] Caused by:
> java.lang.NoSuchMethodError:
> org.codehaus.janino.ClassBodyEvaluator.setImplementedInterfaces([Ljava/lang/Class;)V
>   at
> ch.qos.logback.core.joran.conditional.PropertyEvalScriptBuilder.build(PropertyEvalScriptBuilder.java:48)
> ~[logback-core.jar:na]    at
> ch.qos.logback.core.joran.conditional.IfAction.begin(IfAction.java:67)
> ~[logback-core.jar:na]    at
> ch.qos.logback.core.joran.spi.Interpreter.callBeginAction(Interpreter.java:276)
> ~[logback-core.jar:na]    at
> ch.qos.logback.core.joran.spi.Interpreter.startElement(Interpreter.java:148)
> ~[logback-core.jar:na]    at
> ch.qos.logback.core.joran.spi.Interpreter.startElement(Interpreter.java:130)
> ~[logback-core.jar:na]    at
> ch.qos.logback.core.joran.spi.EventPlayer.play(EventPlayer.java:50)
> ~[logback-core.jar:na] 
```

**EDIT1 更多细节**

我从 play_2.10.jar 中删除了 logback.xml 文件，并且在播放应用程序启动时不再从 logback 中收到重复警告。

然后，我尝试将 neo4j logback.xml*和*play2.1 logback.xml 的内容作为 custom-logback.xml 放置在我的 play 项目的根目录中。与 Play.application().path() 相同的路径 也许这是 neo4j 拾取它的错误位置？

在查看依赖项时，我有一个 neo4j-server 需要的 janino。此外，我没有看到用于记录的 jar 中的任何冲突，但也许我遗漏了一些东西。这是我的“播放依赖项”的依赖层次结构：

[https://gist.github.com/4559389](https://gist.github.com/4559389)

我还尝试将 Play2.1 wiki 上列出的默认配置复制到 custom-logback.xml 中，但没有成功：

```
<configuration>

  <conversionRule conversionWord="coloredLevel" converterClass="play.api.Logger$ColoredLevel" />

  <appender name="FILE" class="ch.qos.logback.core.FileAppender">
     <file>${application.home}/logs/application.log</file>
     <encoder>
       <pattern>%date - [%level] - from %logger in %thread %n%message%n%xException%n</pattern>
     </encoder>
   </appender>

  <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
      <pattern>%coloredLevel %logger{15} - %message%n%xException{5}</pattern>
    </encoder>
  </appender>

  <logger name="play" level="INFO" />
  <logger name="application" level="INFO" />

  <root level="ERROR">
    <appender-ref ref="STDOUT" />
    <appender-ref ref="FILE" />
  </root>

</configuration> 
```

**编辑 2**

绝对似乎是 logback 依赖项的问题。Neo4j 依赖于 0.9.30，play 似乎依赖于 1.0.7。我猜当库被 ?janino? 加载时，这些版本之间存在 api 变化。它找不到合适的方法。仍然不确定如何在 logback.xml 中正确指定以在运行时选择正确的依赖项。 ![Play2.1RC1 Logback 依赖](../Images/8e58b6a927f49e9b3db446fc6dc72a87.png) ![Neo4j Logback 依赖](../Images/56b29fa98397106ed67fc20846092b22.png)

图表由 yed + sbt-dependency-graph 生成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T20:20:23.810

关于由于 Play 2.1 的较新版本的 logback 与 Neo4j 不兼容而引发的 Neo4j 生命周期异常。我遇到了这个问题，最后只是通过将它放在我的 Build.scala 的项目依赖项中，将 Play 的 logback 覆盖到旧的兼容版本：

```
"ch.qos.logback" % "logback-core" % "1.0.3" force(), // this should override the Play version
"ch.qos.logback" % "logback-classic" % "1.0.3" force(), 
```

为了更好地衡量，我还尝试通过设置 SBT 的`ivyXML`参数来排除任何 log4j 传递依赖项：

```
ivyXML :=
  <dependencies>
    <exclude module="log4j"/>
  </dependencies> 
```

这显然是一个脆弱的修复，但至少对于 Play 2.1-RC2，它似乎有效。*我在实际配置 Neo4j 的日志记录*时仍然遇到问题，所以我稍后会尝试更新这个答案。

**更新**：由于我是 Logback 的新手，我在使用 Play/Neo4j 配置它时遇到了一些困难。为了防止 Logback 出错并将我淹没在状态消息中，我需要`custom-logback.xml`在我的 Play 应用程序的 conf 目录中放置一个名为的文件。我认为 Neo4j 日志配置需要这个。我的包含以下内容：

```
<included>
    <logger name="eu.mypackage" level="info">
    </logger>

    <logger name="org.neo4j" level="warn">
    </logger>

    <root level="warn">
    </root>
</included> 
```

同样在我的 conf 目录中，我似乎需要一个名为`logback.properties`（在我的情况下）只包含这一行的文件：

```
CONSOLE_LEVEL=ERROR 
```

（Logback 专家，请随时纠正任何问题。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T06:59:06.517

您似乎遇到了两个不同的问题。一是Play提供了一个与Neo冲突的logback.xml文件。其次，您似乎在类路径上有两个版本的 logback，我猜这会导致 NoSuchMethodError 异常。如果您可以删除 Play logback.xml 文件并将该内容放入名为“/custom-logback.xml”的文件中（Neo 将通过我们的 logback 配置包含该文件），然后确保您只有一个版本的 Logback（或具体来说，Janino），这应该会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T16:58:57.967

最终我无法解决 Play 2.1、Neo4J 和 logback 之间的依赖问题。我确信它是一个简单快捷的修复，但我不确定如何在不明确修改任何一个包依赖项的情况下进行操作。相反，我暂时选择使用[Neo4J Java REST 绑定](https://github.com/neo4j/java-rest-binding/)来替换嵌入式服务器。运行良好，并且在本机 API 和 REST 包装器之间存在一些小问题。我将嵌入式服务器的依赖项留在了 Build.scala 中，并将嵌入式和 REST 服务从一个公共接口中分离出来，以便可以在运行时指定它们。我想理想情况下，这两者都应该是 Play 的插件......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-19T14:30:11.603

这听起来可能与上面的问题描述完全无关，但是：

我们的问题——我在 Mac 上，我在 Ubuntu 上的同事——原来是库依赖项被拉到 Play 的 /lib 目录中，而该目录不应该存在（无论出于何种原因），在我们的例子中是两个版本Janino - 2.5.10 和 2.6.1，删除旧版本解决了问题。

我的同事提到了一些关于用于标识这两个版本的命名约定的差异，这可能导致了问题。

总而言之；在某些情况下，请检查您的 /lib 目录中是否存在非必要或意外的库。

# javascript - 如何更改 ASP.NET 中的密码输入提示？

> ID：14373030
> 
> 赞同：0
> 
> 时间：2013-01-17T06:01:01.507
> 
> 标签：javascript, asp.net

如何在 ASP.NET 中更改密码输入提示的类型？我有一个用 JavaScript 编写的提示。当用户键入他的密码时，它显示为`****`。我可以在这里确定密码的长度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:17:56.083

如果您使用的是内置的 js 提示符，您可能会想要使用 jQuery 创建一个漂亮的、样式化的 div，它的功能类似于对话框。这里有一个 HTML 示例（您必须对其进行一些调整以使其全部与 ASP 一起使用，但这不会花费很长时间）： [http ://www.alessioatzeni.com/blog/login-box -modal-dialog-window-with-css-and-jquery/](http://www.alessioatzeni.com/blog/login-box-modal-dialog-window-with-css-and-jquery/)

一旦你有一个“提示”，实际上只是一个看起来像覆盖的 div，你可以把它贴在里面：

```
<asp:TextBox runat="server" TextMode="Password" MaxLength="20" /> 
```

# prolog - 如何将字符串转换为整数列表？

> ID：14373034
> 
> 赞同：0
> 
> 时间：2013-01-17T06:01:26.687
> 
> 标签：prolog, swi-prolog

我通过以下代码将 X = [[1,2,3,4,5,6],[6,5,4,3,2,1]|...] 写入文件：

```
?-tell('test.txt'),maplist(format('~d ~d ~d ~d ~d ~d ~n'),X),told.

$cat test.txt
1 2 3 4 5 6
6 5 4 3 1 1
... 
```

并使用以下代码恢复它：

```
?-open("test.txt",read,F),read_stream_to_codes(F,N),write(N),close(F).
N = [49, 50, 51, 52, 53, 54 ...] 
```

将 N 转换为 [[1,2,3,4,5,6],[6,5,4,3,2,1]...] 的最佳方法是什么？

真挚地！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:08:49.567

我会一次做一行：

```
:- use_module(library(dcg/basics)).

ints(L) --> blanks, (integer(I), ints(Is), {L = [I|Is]} ; {L = []}).

read_ints(F, L) :-
    open(F, read, S),
    file_ints(S, L),
    close(S).

file_ints(S, L) :-
    read_line_to_codes(S, Cs),
    (   Cs == end_of_file
    ->  L = []
    ;   phrase(ints(Is), Cs),
        file_ints(S, R),
        L = [Is|R]
    ). 
```

# c++ - 使用 CMake 为 Visual Studio 项目配置 txx 文件

> ID：14373035
> 
> 赞同：2
> 
> 时间：2013-01-17T06:01:45.097
> 
> 标签：c++, visual-studio-2008, compilation, cmake

我有一个包含 txx 文件和源文件的项目。我使用了以下 CMake 配置

> SET(Main Step6.cpp Step6main.cpp Step6RegionGrowing1.cpp Step6RegionGrowing2.cpp moc_Step6.cpp Step6RegionGrowing.txx) SET(MainH Step6.h)
> 
> add_executable(${PROJECT_NAME} ${Main} ${MainH} ) target_link_libraries(${PROJECT_NAME} ${ALL_LIBRARIES})

但是我的 sln 文件在标题中显示 txx 文件，并在编译时将其视为文本文件。我检查了一个 cpp 是否包含该 txx，当我输入某行只是为了输入一些错误，以便我可以检查该 txx 是否正在编译，它没有返回任何错误。现在我的问题是

1.  为什么 txx 不编译？
2.  当我尝试将其添加为源时，为什么它会出现在标题中？
3.  为什么 Visual Studio 将其视为文本文件？
4.  如何编译这个项目？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:24:33.613

我认为 CMake 查找文件扩展名以找出 C++ 源文件，并且不将*.txx*扩展名识别为 C++ 源文件扩展名之一。[CMake 文档](http://cmake.org/cmake/help/v2.8.8/cmake.html#prop_sf%3aLANGUAGE)描述了明确设置文件语言的方法。例如

```
set_source_files_properties(Step6RegionGrowing.txx PROPERTIES LANGUAGE CXX) 
```

希望能帮助到你！

# c# - Lambda 表达式，如 Sql where value 或 null

> ID：14373037
> 
> 赞同：0
> 
> 时间：2013-01-17T06:02:01.000
> 
> 标签：c#, .net, linq

我正在编写搜索我们正在构建的 MVC 应用程序的代码，问题是我想通过对象的各种属性进行搜索。在这种特殊情况下，这是我的预期行为：

*   如果两个参数都为 null 或为空，则全部返回。
*   如果任何参数具有值，请使用包含选择所有按该参数过滤的参数。

这就是我正在做的事情：

```
var model = _svc.GetList(q => q.Name == (string.IsNullOrEmpty(entity.Name) ? q.Name : entity.Name) &&
                              q.Description ==  (string.IsNullOrEmpty(entity.Description) ? q.Description : entity.Description)); 
```

如果两个字段都为 null 或为空，则返回所有元素，或者返回与**Name** AND/OR **Description**完全匹配的任何元素。

这里的事情是我希望它表现得像`Contains`.

我已经设法让这个在一个领域工作：

```
var model = _svc.GetList(q => (string.IsNullOrEmpty(entity.Name) || 
            q.Name.ToLower().Contains(entity.Name.ToLower()))).ToList(); 
```

但是当我添加描述字段时，它会抛出 NullReferenceException: Object reference not set to an instance of an object。

只是为了检查我已经尝试过，它也没有工作：

```
var model = (from q in _svc.GetList()
             where (string.IsNullOrEmpty(module.Name) ||
                 q.Name.ToLower().Contains(module.Name.ToLower()))
             select q).ToList();

model = (from q in model
         where (string.IsNullOrEmpty(module.Description) ||
             q.Description.ToLower().Contains(module.Description.ToLower()))
         select q).ToList(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:47:45.940

好吧，对于多可选标准搜索，您可以这样做（断言“模块”是您的“搜索类”）。

简单，并且（我认为）更具可读性。为模型的描述和实体属性添加空检查。

```
//take all elements
var model = _svc.GetList();

if (!string.IsNullOrEmpty(module.Description))
  model = model.Where(m => 
                     m.Description != null && 
                     m.Description.ToLower().Contains(module.Description.ToLower());

if (!string.IsNullOrEmpty(module.Name))
  model = model.Where(m => 
                     m.Name != null && 
                     m.Name.ToLower().Contains(module.Name.ToLower());

return module.ToList(); 
```

空值检查，因为`ToLower()`空值上的 a 会引发 NRE ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T06:41:58.580

这有点难看，但应该可以解决问题，因为条目为空，您将获得 null 引用`Description`。如果你正在做什么`Name`是任何线索，你可能正在做这样的事情`q.Description.ToLower().Contains(..)`而没有检查 q.Description 不为空

```
var model = _svc.GetList(q =>  
     (string.IsNullOrEmpty(entity.Name) || string.IsNullOrEmpty(q.Name) 
       || q.Name.ToLower().Contains(entity.Name.ToLower()))

 && (string.IsNullOrEmpty(entity. Description) || string.IsNullOrEmpty(q. Description) 
       || q.Description.ToLower().Contains(entity. Description.ToLower()))) 
```

# jquery - 无页不能与 Rails 3.2 一起工作

> ID：14373038
> 
> 赞同：0
> 
> 时间：2013-01-17T06:02:02.333
> 
> 标签：jquery, ruby-on-rails-3

我曾尝试使用 pageless 来实现但没有任何成功，并且演示似乎相当有限，无法让我深入了解在新 java 中使用 pageless。当我运行它并向下滚动时，会出现加载消息和 gif 但不会更新...

在 ApplicableIc.retrieve 中返回从此查询中找到的结果

```
 paginate(:page => params[:page], :per_page => 40, :conditions => [retrieve_cond,*values], 
    :order => "#{params[:order]}, qrisk, platform, submodule, feature, root_name, suite_name, case_name, ic_name") 
```

在控制器中

```
def current_objects
  if !params[:project_id].blank? && !params[:start_date].blank? && !params[:end_date].blank?
    @current_objects ||= ApplicableIc.retrieve(params.merge(:order => "root_name,suite_name,case_name,ic_name"))
    if !@current_objects.any?
      flash.now[:error] = "No Results for these parameters, please change your inputs"
    end
    @current_objects
  end
end 
```

在 html.haml 视图中

```
.container#applicable_ics 
  -if @applicable_ics
    %table
      %thead
        %tr
        %th= sortable "Executed Platforms"
        %th= sortable "Passed Platforms"
         ...
      %tbody=render :partial => "applicable_ics"
    = will_paginate(@applicable_ics)
    = pageless(250, "Loading next '#{@applicable_ics.per_page}' of  '#{@applicable_ics.total_entries}' rows", @applicable_ics.total_pages, "#{url_for params.except(:page).merge(:format => :js)}") 
```

应用助手

```
def pageless(distance, loaderMsg, total_pages, url=nil, container=nil)
  yell "comes here pageless"
  opts = {
  :distance => distance, 
  :totalPages => total_pages,
  :url        => url,
  :loaderMsg  => loaderMsg,
  :loaderImage => image_path("indicator.gif")
  }

  container && opts[:container] ||= container

  javascript_tag("$('#applicable_ics tbody').pageless(#{opts.to_json});")
end 
```

任何见解，指导或帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T15:31:18.627

一方面，您将“条件”和“顺序”键传递给分页构造函数。应该使用活动记录来查询它们。

改变

```
 paginate(:page => params[:page], :per_page => 40, :conditions => [retrieve_cond,*values], 
:order => "#{params[:order]}, qrisk, platform, submodule, feature, root_name, suite_name, case_name, ic_name") 
```

对此

```
YourModel.find(:all, :conditions => [retrieve_cond,*values]).paginate(:page => params[:page], :per_page => 40).order("#{params[:order]}, qrisk, platform, submodule, feature, root_name, suite_name, case_name, ic_name") 
```

# c# - 如何在水晶报表的单个部分中显示多个细节？

> ID：14373039
> 
> 赞同：0
> 
> 时间：2013-01-17T06:02:02.957
> 
> 标签：c#, crystal-reports, header

我正在处理水晶报告，但我遇到了一个问题。我正在显示 ID 的结果，它们的工作方式如下：

```
ID        Name         Date              Comments
1         A           '2012-01-01'      Comments 1 on the date
1         A           '2012-01-01'      Comments 2 on the same date 
```

现在，如果我想显示如下数据：

```
Details of the ABC Company
...............................................................................
ID        Name         Date              Comments
1          A          '2012-01-01'       aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
                                         bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
                                         ccccccccccccccccccccccccccccccccccccccccc

Details of DEF company
...............................................................................
ID        Name         Date              Comments
2          B          '2013-01-11'       rciwtyiabtbtaerynct
                                         hubytnituinmyuimyumiy
                                         jk jk jk jk jk jk jk uir 
```

如何做到这一点？我对为以下部分创建子报告最不感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:29:45.553

我想您主要关心的只是标题部分，上面写着“ABC 公司的详细信息”等。为此，您可以使用 GroupExpert(RightClick on Report-->Insert-->Group)，您可以将其与您的详细信息公司分组标题部分

对于分组，您可以参考[分组 1](http://www.c-sharpcorner.com/uploadfile/ea36c5/crystal-reports-grouping-pattern-1/)

在这里[分组 2](http://www.codeproject.com/Articles/142064/Step-by-Step-Creation-of-Crystal-Report-using-its)

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:19:51.980

您可以创建一个由 ID、名称和日期组合而成的公式。然后按该公式分组

如果可以有不同的行，那么只需将字段 ID、名称和日期和组放在组级别并在详细级别进行评论

如果不能使用不同的行，则将 hte 字段 ID、名称、日期和注释放入详细信息行并执行抑制公式，以便它们仅显示在组的第一个元素上（要找出的公式)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T12:09:57.313

在您的水晶报表中，右键单击详细信息部分并选择下面的插入部分，现在您有两个详细信息部分 a 和 bu 也可以添加多个详细信息部分和页眉。

# java - Android Connection/SocketTimeOutException 捕获但应用程序仍然崩溃

> ID：14373042
> 
> 赞同：0
> 
> 时间：2013-01-17T06:02:27.540
> 
> 标签：java, android, exception, timeout, httpresponse

基本上我试图让用户知道应用程序何时无法访问服务器/服务器，而他们的手机互联网/数据连接非常好。所以我在这里按照这篇文章设置了一个超时：[How to set HttpResponse timeout for Android in Java](https://stackoverflow.com/questions/693997/how-to-set-httpresponse-timeout-for-android-in-java/1565243#1565243)

它工作得很好，除非当异常被正确捕获时，应用程序仍然崩溃而不是显示 Toast 消息并返回到应用程序屏幕。注意*"Log.e("CONN TIMEOUT", e.toString());"* 在 logcat 中正确记录为：*“CONN TIMEOUT org.apache.http.conn.ConnectTimeoutException: Connect to /192.168.11.60:80 timed out”*

根据要求，完整的 logcat：[http://pastebin.com/rpe8iKRi](http://pastebin.com/rpe8iKRi)

```
 // Making HTTP request
    try {

        HttpParams httpParameters = new BasicHttpParams();
        // Set the timeout in milliseconds until a connection is established.
        // The default value is zero, that means the timeout is not used. 
        int timeoutConnection = 3000;
        HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
        // Set the default socket timeout (SO_TIMEOUT) 
        // in milliseconds which is the timeout for waiting for data.
        int timeoutSocket = 5000;
        HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (ConnectTimeoutException e) {
        Toast.makeText(getApplicationContext(), "Server timeout", Toast.LENGTH_LONG).show();
        Log.e("CONN TIMEOUT", e.toString());
    } catch (SocketTimeoutException e) {
        Toast.makeText(getApplicationContext(), "Server timeout", Toast.LENGTH_LONG).show();
        Log.e("SOCK TIMEOUT", e.toString());
    } catch (IOException e) {
        e.printStackTrace();
    } catch (Exception e) {
        Log.e("OTHER EXCEPTIONS", e.toString());
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T04:12:52.423

解决了。缺少在函数末尾*抛出异常 { 。*呵呵

感谢@Alin 的好提示。

# batch-processing - Hazelcast 中的批处理是如何完成的？

> ID：14373043
> 
> 赞同：1
> 
> 时间：2013-01-17T06:02:28.373
> 
> 标签：batch-processing, in-memory-database, hazelcast

我只是 Hazelcast 的初学者。我仍在学习它的基础知识。Hazelcast 中的批处理是如何进行的？有没有相关的架构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:00:45.300

请参阅 hazelcast ExecutorService 组件： [http ://www.hazelcast.com/docs/2.5/manual/single_html/#ExecutorService](http://www.hazelcast.com/docs/2.5/manual/single_html/#ExecutorService)

# xml - XQuery 同时获取和插入

> ID：14373044
> 
> 赞同：2
> 
> 时间：2013-01-17T06:02:31.183
> 
> 标签：xml, xpath, xquery, basex, xquery-update

我正在检索数据并将其插入另一个文件。但是插入的数据没有排序。以下是我想要实现的示例。

```
let $n := <N>
<n>Lemon</n>
<n>Chickoo</n>
<n>Banana</n>
<n>Orange</n>
<n>Pineapple</n>
<n>Apple</n>
<n>Lemon</n>
<n>Chickoo</n>
<n>Banana</n>
</N>

for $x in distinct-values($n/n)
order by $x 
return 
    insert node  <n>{$x}</n> into doc('fruits')/fruit 
```

的输出`fruits`如下 -

```
 <fruit>
            <n>Lemon</n>
            <n>Chickoo</n>
            <n>Banana</n>
            <n>Orange</n>
            <n>Pineapple</n>
            <n>Apple</n>
    </fruit> 
```

它没有被订购，虽然在检索时提到......！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:58:15.300

这是 BaseX 如何评估`order by`FLWOR 子句的一个错误，该子句现已记录在[GitHub 错误跟踪器上](https://github.com/BaseXdb/basex/issues/621)。该`return`子句在排序而不是后记之前被评估，因此以错误的顺序添加更新。

一种解决方法是在另一个 FLWOR 表达式中进行排序：

```
for $x in
  for $d in distinct-values($n/n)
  order by $d
  return $d
order by $x 
return 
    insert node <n>{$x}</n> into doc('fruits')/fruit 
```

另一个（可能更优雅）的解决方案是使用`insert nodes`，它只需要评估一次：

```
insert nodes
  for $x in distinct-values($n/n)
  order by $x 
  return <n>{$x}</n>
into doc('fruits')/fruit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:31:07.440

这对我来说就像一个错误。规范说：

如果多个节点由单个插入表达式插入，它们的顺序将保留源表达式的节点顺序。

这不是很清楚，但我认为这意味着您有权期望结果得到正确排序。

您使用的是什么 XQuery Update 实现？

# javascript - activemq 是如何工作的

> ID：14373046
> 
> 赞同：2
> 
> 时间：2013-01-17T06:02:31.253
> 
> 标签：javascript, ajax, servlets, activemq

我在 ActiveMQ 官方页面上阅读了它是如何工作的，但无法理解整个场景是如何进行请求和响应的。根据我现在的理解，如果我在服务器上有一个 serverlet，并且使用 amq.js 作为客户端的 JavaScript，那么

1.  JavaScript 向服务器发送轮询请求。
2.  服务器启动一个线程并检查要作为响应发送的数据。
3.  如果此时数据不可用，服务器将等待直到有任何数据。
4.  服务器在可用时发送数据，然后连接中断。
5.  客户端收到数据并再次发送轮询请求。

以这种方式，客户端请求被停在服务器上，直到接收到数据。

这种理解是否正确和可能？如果是，请求如何停放在服务器上？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:07:52.443

是的，你理解正确。但是由于请求将被保留 30 秒的限制，它会超时（默认）。

[使用Jetty Continuations](http://docs.codehaus.org/display/JETTY/Continuations)将请求停放在服务器上，因为 Jetty 是 ActiveMQ 中的 servlet 容器。

由于 ActiveMQ（java 端）可以设置异步侦听器，因此不需要为整个轮询阻塞线程。

# svn - 如何撤销当前使用 Tortoise svn 检出文件夹的用户的访问权限

> ID：14373048
> 
> 赞同：0
> 
> 时间：2013-01-17T06:02:42.917
> 
> 标签：svn, tortoisesvn

我在使用 VisualSVN 和乌龟时遇到问题。我们处理多个项目，我想将文件夹 FolderA 的访问权限授予用户 UserA，将文件夹 FolderB 的访问权限授予 UserB，但我犯了一个错误，将 FolderA 和 FolderB 都授予 UserA。之后，UserA 将签出 FolderB（不能访问）。当我从 UserA 撤消对 FolderB 的访问权限时，UserA 仍然有文件，但他无法在服务器中进行更改。当他从他的计算机中删除 FolderB 时，他不能提交更改，因为乌龟想从服务器上删除已删除的文件夹 FolderB（这是不允许的）。并且文件不得从服务器中删除，因为 UserB 需要它们。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:30:51.263

右键`UserA`单击`FolderB`他的工作副本，从 TortoiseSVN 上下文菜单中选择**“更新到修订版” 。**在更新对话框中，从**“更新深度”组合框中选择****“排除”**。然后点击**确定**按钮。

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:37:18.657

通过资源管理器（而不是 svn delete）很好地要求*用户 A删除他的工作副本，然后再次签**出 FolderA*。****

# ios - 如何通过滑动访客以编程方式切换视图控制器？

> ID：14373056
> 
> 赞同：0
> 
> 时间：2013-01-17T06:03:40.410
> 
> 标签：ios

我想将推送导航放入滑动中。

我想在滑动手势上调用这个方法。

```
- (IBAction)MakeADifferenceButtonPressed:(id)sender {
    MakeADifferenceViewController *makeADifferenceView = [[MakeADifferenceViewController alloc] initWithNibName:@"MakeADifferenceViewController"  bundle:nil];
    [self.navigationController pushViewController:makeADifferenceView animated:YES];
    [makeADifferenceView release];
} 
```

任何人请帮助我。我是 iphone 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T06:07:35.020

使用此代码在您当前的 UIView 中添加 UISwipeGestureRecognizerDirectionLeft

```
UISwipeGestureRecognizer *swipeleft = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(MakeADifferenceButtonPressed:)];
swipeleft.direction = UISwipeGestureRecognizerDirectionLeft;
[self.view addGestureRecognizer:swipeleft]; 
```

# ruby-on-rails - Rails中的render和yield有什么区别

> ID：14373057
> 
> 赞同：14
> 
> 时间：2013-01-17T06:03:48.663
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

`<%= render %>`有人可以解释“ ”和“ `<%= yield %>`with `<% content_for :partial do %>`/ ”之间的区别`<% end %>`吗？特别是从一个切换到另一个时路由如何变化，使用一个而不是另一个的好处，什么时候使用一个而不是另一个。[这](https://stackoverflow.com/questions/6299851/embedded-ruby-render-vs-yield)是我找到的最接近的解释，但对我来说还不够清楚。

我已经尝试了几天来解决这个问题，但似乎我尝试的每个配置要么接近，要么出错。

如果存在三个视图，`aaa`并且`bbb`和`ccc`，并且每个视图都有一个`index.html.erb`，但是`bbb`并且`ccc`有一个`_content.html.erb`部分（由下划线表示），你如何在使用or时完成获取`bbb`或`ccc`部分？`aaa``render``yield`

以下作品：

`aaa`的 index.html.erb ：

```
<div">
  <%= render 'bbb/content' %>
</div> 
```

和`bbb`_content.html/erb ：

```
<p>Content from bbb.</p> 
```

但这不是：

`aaa`的 index.html.erb ：

```
<div">
  <%= yield :container %>
</div> 
```

和`bbb`_content.html/erb ：

```
<% content_for :container do %>
  <p>Content from bbb.</p>   ### viewed in aaa
<% end> 
```

`ccc`s _content.html.erb 什么都没有，或者,`content_for`但我仍然没有得到`aaa`要填充内容的 index.html 。

如果我使用渲染，我可以明确地将内容放入其中。但我认为使用 的好处`yield :whatever`将允许我选择填充它的内容，并且一旦我更改它就无法让它填充任何内容从渲染到产量。我还必须更新路由文件吗？如果是这样，我该如何选择用哪一个来填充它？这是否意味着它在控制器中？需要采取行动吗？

虽然我也有这取决于最初路由到哪个文件，但就像我说的那样，我认为我需要了解两者之间的区别，然后才能开始使用部分文件来发挥我的优势。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T11:05:31.743

首先yield是ruby，render是rails。通常，对于内部内容根据操作/上下文而变化的应用程序使用通用布局。问题通常在于定义布局的结束位置和上下文特定模板的开始位置。[以HTML 标题标签](http://www.w3schools.com/tags/tag_title.asp)为例。假设您有一个名为 Cities 的应用程序。在大多数情况下，您希望页面标题始终为“城市”。但是，例如，如果您在阿姆斯特丹页面内，那么您希望将“阿姆斯特丹”作为您的页面标题。

```
# application.html.erb
<html>
  <head>
    <%= content_for?(:page_title) ? yield(:page_title) : "Cities" %>
    ......

# city/index.html.erb
<% content_for :page_title do %>
  <%= @city.name %> 
<% end %>

<div class="bla"... 
```

在 Rails 中，您通常在应用程序布局中定义应用程序标题。更改页面标题的一种策略是在特定城市模板中使用 content_for 并进行相应更改。

另一方面，渲染完成不同的渲染策略。直的。当您调用渲染时，它会渲染。content_for/yield 不会自动渲染，它存储在某个地方，然后在适当的地方填补缺失的地方。因此，与渲染相比，您可以将其视为“存储/搜索/替换”，后者只是简单的渲染。

使用其中一个的好的经验法则是：如果您正在编写的模板需要在每个上下文中呈现不同的信息，强烈考虑使用 content_for。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T11:39:23.810

# `yield`

Ruby 代码（Proc 类）并获取您的块并执行它应该执行的操作。与其他基于 Ruby 的相同方式相比，Yield 也[很快。](https://stackoverflow.com/questions/1410160/ruby-proccall-vs-yield)我假设（并且我只）在布局中使用它，因为它很快而且我会不经意地做 Rails 中的正常操作。`yield`也用于将内容传递到布局中的特定位置。我经常`<%= yield :head %>`在头部，就在头部标签上方，这样我就可以传递有时会出现的随机怪异。

## 常见用途：

*   主要用于布局
*   （如果您喜欢/倾向于在模型中这样做）作为真正的 Ruby Proc 语句。

# `render`

您向其传递参数的 Rails 代码，正如文档所说，“呈现将作为响应正文返回给浏览器的内容”。部分，动作，文本，文件...等。

## 常见用途：

用于视图和控制器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T06:17:43.083

当您的控制器方法退出时，它会呈现关联的文件。所以编辑控制器呈现edit.html.erb。如果未指定，则使用指定的布局或 application.html.erb。

在您的布局文件中，当您调用`yield`它时，它将填写您渲染中的信息。如果您`yield`使用参数调用，它将`content_for`在渲染文件中查找与该参数匹配的部分。我不完全确定，但我认为您不能`yield`从布局文件外部调用，而且我认为它不会填写任何信息，除了在渲染文件中找到的信息。

在布局文件或渲染文件中的任何位置，您都可以通过调用`render`部分名称减去下划线来渲染部分。

我希望这会有所帮助。

**编辑以回答评论中的问题：**

`yield`并`render`执行类似`yield`的功能，但只查看渲染文件，同时`render`指定要渲染的文件。此外，`render`输出整个文件，但`yield`带有参数可以只输出文件的一部分。

# c - 使用 for 循环从数组中删除对象

> ID：14373067
> 
> 赞同：-1
> 
> 时间：2013-01-17T06:04:47.390
> 
> 标签：c, arrays, algorithm

我发现了一些类似的代码（不仅仅是复制了奇怪的逻辑）：

```
for(int counter = 0 ; counter < array.length() ; counter ++ ) {
    array.removeObjectAtIndex(i);
    counter -- ;
} 
```

这是坏代码吗？假设没有原始方法可以清空整个数组，或者我们需要在删除每个元素后进行一些额外的清理，应该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T06:15:55.050

如果你从上到下，你就不需要了`counter--`，而且效率更高，因为它不必在每次`removeObjectAtIndex`调用时移动上面的数组元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T06:12:12.590

干扰循环体内的循环计数器绝不是一个好主意。

尽管不知道是什么`array`，但更好的方法是不断移除阵列头，直到阵列为空。

```
int length = array.length();
for(int counter = 0 ; counter < length ; counter++ )
{
    array.removeObjectAtIndex(0);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T08:04:22.397

嗯，首先要注意的是，在每个循环的末尾都有 a`counter++`和 a `counter--`。有效地相互抵消。

我怀疑初级程序员被教导 for 循环**需要**格式

```
for(int i=0;i<len;i++) {/*code*/} 
```

按照这个逻辑，由于在循环中每次通过时数组的长度都会移动 1，因此他也需要 counter 递减（为了不产生假结果）。

```
for(int c=0;c<a.length();c++){a.remove(i);c--;} 
```

如果您`c--`从此实现中删除，您将只删除一半的索引。计数器会随着长度的下降而上升，实际上是在中途相遇。

现在是一种不同的实现，感觉不那么僵硬

```
for(;array.length()>0;){array.removeObjectAtIndex(i);}
// also this
for(;array.length();array.removeObjectAtIndex(i)); 
```

* * *

提到的OP`.length()`可能效率低下，所以：

```
for(int len=array.length();len--;array.removeObjectAtIndex(i)); 
```

For's 非常强大，我个人发现它们在某些情况下被充分利用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T06:53:18.730

我同意 acraig5075 关于干扰循环体内的循环计数器的评论是坏习惯

我认为下面代码的自下而上方法可以正常工作

```
for(int counter = array.length - 1; counter >= 0; counter--)
{
      array.removeObjectAtIndex(counter);
} 
```

# java - Twitter：“此页面包含太多服务器重定向”错误

> ID：14373071
> 
> 赞同：0
> 
> 时间：2013-01-17T06:05:00.347
> 
> 标签：java, android, twitter

我正在尝试在 android 应用程序中使用 twitter 共享一些数据，所以在“Twitter 应用程序注册页面”中给出的重定向 url、应用程序等基本信息，一切正常，但在登录页面中提供用户名和密码后twitter 它不会重定向到下一页，而是收到“此页面包含太多服务器重定向”错误消息。

我的重定向网址如下所示`"https://www.example.com/"`。

有什么建议么？

```
public class constants {
public static final String CONSUMER_KEY = "key";
public static final String CONSUMER_SECRET= "secret";

public static final String REQUEST_URL = "http://api.twitter.com/oauth/request_token";
public static final String ACCESS_URL = "http://api.twitter.com/oauth/access_token";
public static final String AUTHORIZE_URL = "http://api.twitter.com/oauth/authorize";

public static final String OAUTH_CALLBACK_URL = "x-latify-oauth-twitter";
private static final String CALLBACK_SCHEME = null;
public static final Object OAUTH_CALLBACK_SCHEME = CALLBACK_SCHEME + "://callback"; 
```

}

主要活动

```
import java.util.Date;

import oauth.signpost.OAuth;
import oauth.signpost.commonshttp.CommonsHttpOAuthConsumer;
import oauth.signpost.commonshttp.CommonsHttpOAuthProvider;
 import android.os.Bundle;
import android.os.Handler;
 import android.preference.PreferenceManager;
   import android.provider.SyncStateContract.Constants;
 import android.app.Activity;
 import android.content.Intent;
 import android.content.SharedPreferences;
 import android.content.SharedPreferences.Editor;
 import android.util.Log;
 import android.view.Menu;
 import android.view.View;
 import android.widget.Button;
 import android.widget.TextView;
  import android.widget.Toast;

  public class MainActivity extends Activity {

private SharedPreferences prefs;
  private final Handler mTwitterHandler = new Handler();
  private TextView loginStatus;

    final Runnable mUpdateTwitterNotification = new Runnable() {
     public void run() {
        Toast.makeText(getBaseContext(), "Tweet sent !", Toast.LENGTH_LONG).show();
      }
  };

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    this.prefs = PreferenceManager.getDefaultSharedPreferences(this);

    loginStatus = (TextView)findViewById(R.id.ls);
    Button tweet = (Button) findViewById(R.id.tweet);
    Button clearCredentials = (Button) findViewById(R.id.cc);

      tweet.setOnClickListener(new View.OnClickListener() {

     * to the twitter login page. Once the user authenticated, he'll authorize the     Android     application to send
    * tweets on the users behalf.
    */
        public void onClick(View v) {
         if (TwitterUtils.isAuthenticated(prefs)) {
         sendTweet();
         } else {
    Intent i = new Intent(getApplicationContext(), PrepareRequestTokenActivity.class);
    i.putExtra("tweet_msg",getTweetMsg());
    startActivity(i);
         }
        }
    });

    clearCredentials.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
         clearCredentials();
         updateLoginStatus();
        }
    });
   }

  @Override
  protected void onResume() {
 super.onResume();
 updateLoginStatus();
  }

 public void updateLoginStatus() {
  loginStatus.setText("Logged into Twitter : " + TwitterUtils.isAuthenticated(prefs));
  }

 private String getTweetMsg() {
 return "Tweeting from Android App at " + new Date().toLocaleString();
  } 

 public void sendTweet() {
 Thread t = new Thread() {
  public void run() {

  try {
  TwitterUtils.sendTweet(prefs,getTweetMsg());
  mTwitterHandler.post(mUpdateTwitterNotification);
  } catch (Exception ex) {
   ex.printStackTrace();
  }
  }

 };
 t.start();
 }

 private void clearCredentials() {
 SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
 final Editor edit = prefs.edit();
 edit.remove(OAuth.OAUTH_TOKEN);
 edit.remove(OAuth.OAUTH_TOKEN_SECRET);
 edit.commit();
 }
 }

import oauth.signpost.OAuthConsumer;
import oauth.signpost.OAuthProvider;
 import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.os.AsyncTask;
 import android.util.Log;

public class OAuthRequestTokenTask extends AsyncTask<Void, Void, Void> {

    final String TAG = getClass().getName();
    private Context context;
    private OAuthProvider provider;
    private OAuthConsumer consumer;

    /**
    *
    * We pass the OAuth consumer and provider.
    *
    * @param context
    * Required to be able to start the intent to launch the browser.
    * @param provider
    * The OAuthProvider object
    * @param consumer
    * The OAuthConsumer object
    */
    public OAuthRequestTokenTask(Context context,OAuthConsumer consumer,OAuthProvider provider) {
    this.context = context;
    this.consumer = consumer;
    this.provider = provider;
    }

    /**
    *
    * Retrieve the OAuth Request Token and present a browser to the user to authorize the token.
    *
    */
    @Override
    protected Void doInBackground(Void... params) {

    try {
    Log.i(TAG, "Retrieving request token from Google servers");
    final String url = provider.retrieveRequestToken(consumer, constants.OAUTH_CALLBACK_URL);
    Log.i(TAG, "Popping a browser with the authorize URL : " + url);
    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url)).setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_FROM_BACKGROUND);
    context.startActivity(intent);
    } catch (Exception e) {
    Log.e(TAG, "Error during OAUth retrieve request token", e);
    }

    return null;
    }

    }

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.provider.SyncStateContract.Constants;
import android.util.Log;
import oauth.signpost.OAuth;
import oauth.signpost.OAuthConsumer;
import oauth.signpost.OAuthProvider;
import oauth.signpost.commonshttp.CommonsHttpOAuthConsumer;
import oauth.signpost.commonshttp.CommonsHttpOAuthProvider;

 public class PrepareRequestTokenActivity extends Activity {
final String TAG = getClass().getName();

private OAuthConsumer consumer;
private OAuthProvider provider;

public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
 try {
 this.consumer = new CommonsHttpOAuthConsumer(constants.CONSUMER_KEY,    constants.CONSUMER_SECRET);
 this.provider = new          CommonsHttpOAuthProvider(constants.REQUEST_URL,constants.ACCESS_URL,constants.AUTHORIZE_URL      );
 } catch (Exception e) {
 Log.e(TAG, "Error creating consumer / provider",e);
 }

    Log.i(TAG, "Starting task to retrieve request token.");
  new OAuthRequestTokenTask(this,consumer,provider).execute();
  }

  /**
  * Called when the OAuthRequestTokenTask finishes (user has authorized the request    token).
 * The callback URL will be intercepted here.
  */
 @Override
     public void onNewIntent(Intent intent) {
    super.onNewIntent(intent);
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
   final Uri uri = intent.getData();
    if (uri != null && uri.getScheme().equals(constants.OAUTH_CALLBACK_SCHEME)) {
   Log.i(TAG, "Callback received : " + uri);
    Log.i(TAG, "Retrieving Access Token");
    new RetrieveAccessTokenTask(this,consumer,provider,prefs).execute(uri);
     finish();  
     }
      }

          public class RetrieveAccessTokenTask extends AsyncTask<Uri, Void, Void> {

       private Context  context;
      private OAuthProvider provider;
      private OAuthConsumer consumer;
       private SharedPreferences prefs;

     public RetrieveAccessTokenTask(Context context, OAuthConsumer                   consumer,OAuthProvider provider, SharedPreferences prefs) {
   this.context = context;
     this.consumer = consumer;
    this.provider = provider;
     this.prefs=prefs;
        }

      /**
       * Retrieve the oauth_verifier, and store the oauth and oauth_token_secret
     * for future API calls.
       */
      protected Void doInBackground(Uri...params) {
        final Uri uri = params[0];
      final String oauth_verifier = uri.getQueryParameter(OAuth.OAUTH_VERIFIER);

             try {
       provider.retrieveAccessToken(consumer, oauth_verifier);

      final Editor edit = prefs.edit();
         edit.putString(OAuth.OAUTH_TOKEN, consumer.getToken());
       edit.putString(OAuth.OAUTH_TOKEN_SECRET, consumer.getTokenSecret());
     edit.commit();

     String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
     String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

     consumer.setTokenWithSecret(token, secret);
     context.startActivity(new Intent(context,MainActivity.class));

  executeAfterAccessTokenRetrieval();

   Log.i(TAG, "OAuth - Access Token Retrieved");

    } catch (Exception e) {
    Log.e(TAG, "OAuth - Access Token Retrieval Error", e);
     }

   return null;
      }

     private void executeAfterAccessTokenRetrieval() {
     String msg = getIntent().getExtras().getString("tweet_msg");
     try {
      TwitterUtils.sendTweet(prefs, msg);
        } catch (Exception e) {
     Log.e(TAG, "OAuth - Error sending to Twitter", e);
     }
     }
    } 
```

twitterUtils.java

```
import oauth.signpost.OAuth;
import twitter4j.Twitter;
 import twitter4j.TwitterException;
 import twitter4j.TwitterFactory;
 import twitter4j.http.AccessToken;
 import android.content.SharedPreferences;
 import android.provider.SyncStateContract.Constants;

  public class TwitterUtils {
public static boolean isAuthenticated(SharedPreferences prefs) {

 String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
 String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

 AccessToken a = new AccessToken(token,secret);
 Twitter twitter = new TwitterFactory().getInstance();
 twitter.setOAuthConsumer(constants.CONSUMER_KEY, constants.CONSUMER_SECRET);
 twitter.setOAuthAccessToken(a);

 try {
 twitter.getAccountSettings();
 return true;
 } catch (TwitterException e) {
 return false;
 }
 }

 public static void sendTweet(SharedPreferences prefs,String msg) throws Exception {
 String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
 String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

 AccessToken a = new AccessToken(token,secret);
 Twitter twitter = new TwitterFactory().getInstance();
 twitter.setOAuthConsumer(constants.CONSUMER_KEY, constants.CONSUMER_SECRET);
  twitter.setOAuthAccessToken(a);
    twitter.updateStatus(msg);
 }  
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:36:00.563

更改您的回拨 URL 并在回拨 URL 下方写下您的 URL。

```
public static final String CALLBACK_URL = "x-oauthflow-twitter://callback"; 
```

有关更多信息，请参见下面的链接。

[Android 中的 Twitter 集成](http://androidcodeexamples.blogspot.in/2011/12/how-to-integrate-twitter-in-android.html)

# emacs - 加载远程 Lisp 文件

> ID：14373072
> 
> 赞同：3
> 
> 时间：2013-01-17T06:05:04.527
> 
> 标签：emacs, common-lisp, slime, tramp

也许这是一个不寻常的情况，但我喜欢连接到运行 Clozure CL 的远程计算机并在那里编译一些文件，这些文件位于我的本地桌面上。

所以，我现在实现的是连接到我的远程 Lisp 盒子。我已经使用 Emacs 完成了它。因此，我在 .emacs 文件中添加了一些行：

```
(load (expand-file-name "~/quicklisp/slime-helper.el"))

(require 'slime)
(require 'tramp)
(setq tramp-default-method "ssh") 
```

它似乎工作正常。设置我的 ssh 隧道后

`ssh -L4005:127.0.0.1:4005 pi@192.168.0.100`

我在本地 emacs 中从 Clozure CL 获得了正常的 REPL。

此外，如果我想通过 Emacs 中的 ssh 从网络中的任何 PC 加载文件，我可以做到。但是，如果我尝试使用最近（在 Emacs 中）加载的文件来编译缓冲区，我总是会得到这个错误：

```
File "/ssh:ingmar@192.168.0.103:/home/ingmar/Dokumente/Lisp/util.lisp" does not exist.
   [Condition of type CCL::SIMPLE-FILE-ERROR]

Restarts:
 0: [RETRY-LOAD] Retry loading "/ssh:ingmar@192.168.0.103:/home/ingmar/Dokumente/Lisp/util.lisp"
 1: [SKIP-LOAD] Skip loading "/ssh:ingmar@192.168.0.103:/home/ingmar/Dokumente/Lisp/util.lisp"
 2: [LOAD-OTHER] Load other file instead of "/ssh:ingmar@192.168.0.103:/home/ingmar/Dokumente/Lisp/util.lisp"
 3: [RETRY] Retry SLIME REPL evaluation request.
 4: [*ABORT] Return to SLIME's top level.
 5: [ABORT-BREAK] Reset this thread
 --more--

Backtrace:
  0: (NIL #<Unknown Arguments>)
  1: (CCL::%LOAD "/ssh:ingmar@192.168.0.103:/home/ingmar/Dokumente/Lisp/util.lisp" NIL NIL :ERROR :DEFAULT NIL)
  2: (NIL #<Unknown Arguments>) 
```

如何告诉远程 Lisp 框在哪里可以找到文件？我也尝试在 REPL 中插入一个 load 语句`load ssh://...`，但结果相同。

有没有人有一些建议可以做什么，以便我可以在远程 Lisp 机器上编译本地文件？我认为这并不是什么新鲜事物，因为 Lisp 可以远程操作很长一段时间......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T11:06:06.993

对于您的特定情况，我建议您编译缓冲区（选择整个缓冲区`C-x` `h`，然后`C-c` `C-c`），而不是文件（`C-c` `C-k`）。

令人烦恼的是，这会改变缓冲区的点和标记。希望您不会一直编译整个缓冲区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T09:22:06.703

表单的`tramp`包名和文件名`/ssh:user@host:path...`是 Emacs 的特性，这就是它们在 Clozure 中不起作用的原因。

除非 Clozure 本身支持通过 ssh 加载代码（这不太可能），否则您将需要重新考虑您的策略。一种选择是在本地编辑文件并使用`rsync`ssh ssh 隧道轻松同步更改，以便 Clozure 可以看到最新文件。

# c# - 在同一 IIS 服务器上的两个 Web 应用程序之间共享会话

> ID：14373074
> 
> 赞同：0
> 
> 时间：2013-01-17T06:05:13.997
> 
> 标签：c#, asp.net-mvc, iis

我有一个用 MVC 2.0 开发的 Web 应用程序。我为此 Web 应用程序创建了一个动态数据网站。为了访问动态数据网站，用户被重定向到 MVC 应用程序的登录页面。

登录时，会为用户创建会话。我想在我的动态数据网站上访问此会话以检查用户的角色和用户名。如果用户具有管理员角色，则只允许用户访问动态数据网站。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:52:52.500

试试这个解决方案：

在您的第一个 Web 应用程序上（用户用于登录的应用程序）

```
 //create a method that will redirect to your web app 2
    public ActionResult RedirectToAnotherSite(string name, string role)
    {
        //specify the IP or url for your web app 2
        //pass the parameters
        var rawUrl = string.Format("http://localhost:8051?name={0}&role={1}", name, role);
        return Redirect(rawUrl);
    } 
```

在您的网络应用程序 2（动态）上打开文件 Global.asax 并添加以下代码

```
 void Application_BeginRequest(object sender, EventArgs e)
        {
            //get the passed parameters
            var req = ((HttpApplication)(sender)).Request;
            var name = req.QueryString["name"] ?? string.Empty;
            var role = req.QueryString["role"] ?? string.Empty;

            //check the role
            if (!role.Equals("admin"))
            {
                //return http access denied
                var res = ((HttpApplication)(sender)).Response;
                res.StatusCode = 401;
            }
        } 
```

# ios - com.facebook.sdk 错误 2 仅适用于 Ad Hoc Distribution

> ID：14373075
> 
> 赞同：1
> 
> 时间：2013-01-17T06:05:17.467
> 
> 标签：ios, objective-c, facebook

我们正在使用 Facebook SDK 3.1 。部署目标是iOS5.1。

应用程序在模拟器和设备（iPhone 5）上的调试模式下运行良好。用户可以发布到他/她自己的墙上。但是，当用户尝试使用 Ad Hoc Distribution 版本发布时，在点击确定后弹出错误消息 - com.facebook.sdk 错误：2 应用程序想代表您公开发布弹出窗口。

应用程序包 ID 在 Facebook 应用程序页面中设置，并与 iPhone 应用程序中的匹配。

我们是第一次请求发布权限，而不是先请求读取权限，然后再请求重新授权。由于它在调试模式下在模拟器和 iPhone 5 上运行良好，我们假设它应该在 Ad Hoc Distribution 版本中运行。

我们错过了什么吗？错误不断出现。

任何帮助表示赞赏！

aobs

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-17T12:52:53.147

所以我的问题是我没有在 facebook 设置中使用正确的标识符。Xcode 对每种构建类型使用不同的标识符。

# jsf-2 - p:fileDownload 不适用于 h:head

> ID：14373078
> 
> 赞同：0
> 
> 时间：2013-01-17T06:06:05.047
> 
> 标签：jsf-2, primefaces, download, facelets, head

我有一个`<p:download>`这样的：

```
<h:form id="form1">
    <p:commandButton id="downloadLink" value="Download" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop)"   
        icon="ui-icon-arrowthichk-s" actionListener="#{search.downloadActionListener}">   
        <p:fileDownload value="#{search.dwnloadFile}" />  
    </p:commandButton> 
</h:form> 
```

它不起作用。下载按钮只是重新加载页面并且不显示“*另存为*”对话框。在检查了每一件事之后，我知道如果我`<h:head>`从页面中删除标签，它就会开始工作。

我不能没有`<h:head>`PrimeFaces 的外观和所有 ajax 功能都依赖于它。

* * *

**更新**：生成的 HTML`<head>`是`<h:head>`这样的：

```
<head>
    <link href="/Project2.0/javax.faces.resource/themes/sam/theme.css.xhtml?ln=icefaces.ace" rel="stylesheet" type="text/css" />
    <link href="/Project2.0/rfRes/skinning.ecss.xhtml?db=eAG7mShzEgAFjAIg" rel="stylesheet" type="text/css" />
    <link href="/Project2.0/javax.faces.resource/primefaces.css.xhtml?ln=primefaces" rel="stylesheet" type="text/css" />
    <script src="/Project2.0/javax.faces.resource/jquery/jquery.js.xhtml?ln=primefaces" type="text/javascript"></script>
    <script src="/Project2.0/javax.faces.resource/primefaces.js.xhtml?ln=primefaces" type="text/javascript"></script>
    <link href="/Project2.0/javax.faces.resource/dock/dock.css.xhtml?ln=primefaces" rel="stylesheet" type="text/css" />
    <script src="/Project2.0/javax.faces.resource/dock/dock.js.xhtml?ln=primefaces" type="text/javascript"></script>
    <link href="/Project2.0/javax.faces.resource/layout/layout.css.xhtml?ln=primefaces" rel="stylesheet" type="text/css" />
    <script src="/Project2.0/javax.faces.resource/layout/layout.js.xhtml?ln=primefaces" type="text/javascript"></script>
    <script src="/Project2.0/javax.faces.resource/jsf.js.xhtml?ln=javax.faces" type="text/javascript"></script>
    <script src="/Project2.0/javax.faces.resource/icepush.js.xhtml?v=9261182" type="text/javascript"></script>
    <script src="/Project2.0/javax.faces.resource/bridge.js.xhtml?v=9261182" type="text/javascript"></script>
    <script type="text/javascript">document.documentElement.isHeadUpdateSuccessful=true;</script>
    <style type="text/css">.ice-blockui-overlay {position: absolute;background-color: white;z-index: 28000;opacity: 0.22;filter: alpha(opacity = 22);}.ice-status-indicator-overlay {position: absolute;background-color: white;z-index: 28000;opacity: 0.22;filter: alpha(opacity = 22);}</style>
    <script src="/Project2.0/javax.faces.resource/compat.js.xhtml" type="text/javascript"></script>
    <script src="/Project2.0/javax.faces.resource/icefaces-compat.js.xhtml" type="text/javascript"></script>
    <title>
        Project
    </title>
    <link href="../Styles/Site.css" rel="stylesheet" type="text/css" />
    <link href="../Styles/jquery-ui-1.8.6.custom.css" rel="stylesheet" type="text/css" />
</head> 
```

没有`<h:head>`它是这样的：

```
<head>
    <title>
        Project
    </title>
    <link href="../Styles/Site.css" rel="stylesheet" type="text/css" />
    <link href="../Styles/jquery-ui-1.8.6.custom.css" rel="stylesheet" type="text/css" />
</head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:25:38.927

的 HTML 输出`<h:head>`表明您正在将 PrimeFaces 与 ICEfaces 混合使用。您的具体问题的主要原因是来自 ICEfaces 的这个脚本：

```
<script src="/Project2.0/javax.faces.resource/icefaces-compat.js.xhtml" type="text/javascript"></script> 
```

[这基本上将每个非 ajax 提交按钮变成了 ajax 提交按钮](http://www.icesoft.org/wiki/display/ICE/Disabling+Ajax)。这也包括下载按钮。但是你不能用 ajax 下载文件。

完全删除 ICEfaces。你不需要它。[它基本上是 PrimeFaces 2.x 的克隆](http://blog.primefaces.org/?p=1692)。但如果您已经在使用 PrimeFaces 3.x，那么 ICEfaces 完全没有附加价值。也许这是之前对各种 JSF 组件库进行试验的遗留物。

### 也可以看看：

*   [类路径中的 ICEfaces 库可防止在文件下载时弹出“另存为”对话框](https://stackoverflow.com/questions/13420958/ice-faces-libary-in-classpath-prevents-saveas-dialog-from-popping-up/13422428#13422428)

* * *

**与具体问题无关**，HTML 输出还表明您在运行时类路径中也有 RichFaces。虽然理论上应该可以与 PrimeFaces 一起正常工作，但我不建议将它们混合使用。RichFaces 本质上没有 PrimeFaces 尚未提供的任何东西。

# silverlight - Silverlight 在应用程序清单中不包括名称以“.Resources”结尾的程序集

> ID：14373083
> 
> 赞同：1
> 
> 时间：2013-01-17T06:06:23.903
> 
> 标签：silverlight, manifest

我将 Silverlight 5 应用程序资源从应用程序转移到一个单独的程序集，我将其命名为 XYResources。

在我的应用程序停止工作后，我注意到 XYResources 程序集未包含在应用程序清单中，因此从 XAP 文件中丢失。

似乎任何以“.Resources”结尾的程序集名称都不包含在应用程序清单中，因此也不包含在 XAP 文件中。

当对缺失程序集的成员进行任何引用时，这会导致 FileNotFoundException。

回想起来，结束程序集名称 .Resources 可能是个坏主意，通过将其更改为 .AppResources 可以轻松解决问题。

有谁知道为什么会出现这个问题，或者它是一个不起眼的 VS2012/Silverlight 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:25:09.287

我在 wpf 中也发现了这个错误（从 vs2008 到 vs2012）并且只能通过将项目名称更改为不以资源结尾的名称来修复它......

# c# - 如何使用后面的 C# 代码获取 javascript 日期格式

> ID：14373084
> 
> 赞同：1
> 
> 时间：2013-01-17T06:06:24.563
> 
> 标签：c#, javascript, kendo-ui

我正在使用剑道日历，需要在日历中突出显示特定日期。根据剑道演示，要突出显示的日期是用 javascript 编写的，如下所示：

```
 dueDates= [
                           +new Date(today.getFullYear(), today.getMonth(), 8),
                           +new Date(today.getFullYear(), today.getMonth(), 12),
                           +new Date(today.getFullYear(), today.getMonth(), 24),
                           +new Date(today.getFullYear(), today.getMonth() + 1, 6),
                           +new Date(today.getFullYear(), today.getMonth() + 1, 7),
                           +new Date(today.getFullYear(), today.getMonth() + 1, 25),
                           +new Date(today.getFullYear(), today.getMonth() + 1, 27),
                           +new Date(today.getFullYear(), today.getMonth() - 1, 3),
                           +new Date(today.getFullYear(), today.getMonth() - 1, 5),
                           +new Date(today.getFullYear(), today.getMonth() - 2, 22),
                           +new Date(today.getFullYear(), today.getMonth() - 2, 27)
                        ]; 
```

DueDates 的值为：

```
[1357583400000,1357929000000,1358965800000,1360089000000,1360175400000,
1361730600000,1361903400000,1354473000000,1354645800000,1353522600000,1353954600000] 
```

我在后面的代码中有日期列表，需要转换为上述格式的日期。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:16:53.097

这个数字`1357583400000`看起来像`TotalMilliSeconds`来自`01-01-1970`（[Unix Epoch](http://en.wikipedia.org/wiki/Unix_time)）。将其转换回 .Net DateTime。你可以做：

```
DateTime dt = new DateTime(1970, 1, 1).AddMilliseconds(1357583400000); 
```

你会得到：`{07/01/2013 6:30:00 PM}`作为 DateTime

# asp.net - 表单身份验证可以限制任何路径吗？

> ID：14373085
> 
> 赞同：1
> 
> 时间：2013-01-17T06:06:33.977
> 
> 标签：asp.net, forms-authentication, webforms

我们的客户有一个虚拟文件服务器设置，其中包含他想要限制的一些 PDF。他认为他们会受到未登录用户的限制，但他们不知何故出现在谷歌搜索结果中。

所以我的问题是，如果我在他的网站上设置表单身份验证（他目前没有任何身份验证），我可以限制对我想要的任何目录的访问吗？例如，PDF 的路径在另一台服务器上，映射到“S”驱动器，如下所示：S:\Files\PDFs\

我可以在配置文件的某处列出此路径以将其限制为仅经过身份验证的用户吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:12:06.233

您可以将这种 web.config 放在 pdf 文件所在的文件夹中，这将不允许未经身份验证的用户访问您的文件

```
<location path="FolderNameAuthenticationNeed" allowOverride="true">
<system.web>

<authorization>
<deny users="?"/>

</authorization> </system.web>
</location> 
```

# android - 布局未调整到所有屏幕尺寸

> ID：14373089
> 
> 赞同：0
> 
> 时间：2013-01-17T06:06:55.197
> 
> 标签：android, layout, screen

我创建了一个安卓应用程序。它是根据屏幕尺寸320 * 480。但是当我使用具有不同屏幕尺寸设计的不同设备时，并不符合要求。我该如何解决这个问题。请建议如何创建适合所有屏幕尺寸的设计。我目前的布局是： -

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/bg"
android:orientation="vertical"
android:weightSum="2.0" >

<include
    android:id="@+id/mainScreenHeader"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="0.4"
    layout="@layout/main_screen_header" />

<include
    android:id="@+id/mainScreenListHeader"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="0.1"
    layout="@layout/main_screen_list_header" >
</include>

<ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1.0"
    android:cacheColorHint="#00000000"
    android:drawSelectorOnTop="false" />

<include
    android:id="@+id/mainScreenFilterClient"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_marginTop="10dp"
    android:layout_weight="0.2"
    layout="@layout/main_screen_filter_client" >
</include>

<include
    android:id="@+id/footer"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="0.2"

    layout="@layout/footer" >
</include> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:10:43.563

这是在 Android 上开发的挑战之一。有许多不同的 android 设备具有许多不同的显示特性。开发指南很好地概述了这个主题：

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

您可能想要做的是为不同的屏幕提供不同的布局。上面的链接讨论了这种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:15:53.320

首先，[此链接](http://developer.android.com/guide/practices/screens_support.html)将有助于了解如何支持多种熨平板尺寸。

最好将文件夹添加到 Android 项目中的资源文件夹以支持多种分辨率，例如：

布局-大

布局小

布局-xlarge

布局-正常端口-xhdpi-1280x800

# php - 从新的数据库条目中获取（近）实时数据

> ID：14373094
> 
> 赞同：0
> 
> 时间：2013-01-17T06:07:18.453
> 
> 标签：php, database, real-time, comet

在我设法构建了一个由测试实验室 SMSC 组成的 SMS 记录系统后，我目前回到了我的绘图板，该系统具有一个 PHP 脚本，用于将 SMSC 接收到的 SMS 插入/记录到 MySQL 服务器数据库中，该数据库具有下表格式（对不起，凌乱的线条）：

|-------------|-------------|---------|
| 信息 | 电话号码 | 消息 |
|-------------|-------------|---------|
| 1 | 12345 | 你好 |
| 2 | 38746 | 世界 |
| 3 | 16375 | 测试 |
| . | ..... | ... |
| . | ..... | ... |
| (自动生成器) | ..... | ... |
|--------------|-------------|----------|

现在我想将这个短信记录系统扩展到一个新的水平——它将能够**自动**将新收到的短信显示到我现有的网站（也是 PHP 的）；**代替**手动刷新网站，当访问者数量增加时，这会导致巨大的页面开销以及服务器的巨大负载。

当然，网络上已经进行了一些研究，表明 AJAX 与固定的 JS 间隔（比如 5~10 秒）配对可以解决问题，但是当内部没有很多新的传入 SMS 时，这会造成很多冗余那天。

除此之外，长轮询 AJAX 应该可以解决问题，但它会为设置的 Interval 消耗一个线程，这也会降低系统效率。

所以基本上，Comet 是其中一种选择，但不建议在 PHP 平台上实现。

因此，对于我目前在绘图板上的想法，是否有任何输入/想法/建议？

P/S：我真的必须去 node.js 吗？因为我不喜欢像 jQuery 这样的托管 JS，而是编写我自己的函数——如果它足够简单的话！=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:29:21.213

Node.js 几乎已成为实时框架的代名词，但也有其他技术的解决方案。对于 PHP 解决方案，您可以查看[Ratchet](http://socketo.me)。您可以在我正在策划的[实时网络技术指南](http://www.leggetter.co.uk/real-time-web-technologies-guide)中找到包含其他语言的更详细列表。

如果您宁愿卸载客户端和服务器之间的持久连接，那么您可以查看我为之工作的实时托管服务，例如[Pusher](http://pusher.com)。如果你要这样做，你可以：

## 将库添加到您的 HTML 并连接到 Pusher

```
<script src="http://js.pusher.com/1.12/pusher.min.js"></script>
<script>
  var pusher = new Pusher( 'YOUR_APP_KEY' );
  // Additional JavaScript - see below
</script> 
```

## 订阅短信频道

```
var smsChannel = pusher.subscribe( 'sms' ); 
```

## 为传入的 SMS 消息绑定到通道上的事件

```
smsChannel.bind( 'incoming', function(){} ); 
```

## 处理事件并根据需要更新您的应用

```
smsChannel.bind( 'incoming', function( smsData ) {
  var phoneNo = smsData[ 'PhoneNo' ];
  var msg = smsData[ 'Msg' ];
  // Update the UI as required.
} ); 
```

在更新数据库后，您需要在服务器上调用 Pusher。

## 包括 Pusher 库

```
// See: http://pusher.com/docs/server_libraries#php
require('Pusher.php'); 
```

## 处理对 PHP 脚本的请求

```
// I've had to guess a bit here. Hopefully you can convert this to something which meets your requirements/data structures 
$update = $_POST['sms_data'];

$query = sprintf("INSERT INTO updates (Phoneno, Msg) VALUES ('%s', '%s')",
  mysql_real_escape_string( $update['Phoneno'], $update['Msg'] ) );

$result = mysql_query($query);

if($result) {
  // trigger event
} 
```

## 触发事件

```
if( $result ) {
  // Use key, secret and id defined from config somewhere
  $pusher = new Pusher( PUSHER_APP_KEY, PUSHER_APP_SECRET, PUSHER_APP_ID);
  $data = array( 'Phoneno' => $update['Phoneno'], 'Msg' => $update['Msg'] );
  $pusher->trigger( 'sms', 'incoming', $data );
} 
```

尽管此示例使用 Pusher，但您将能够使用其他实时 Web 技术遵循类似的模式。

如果您想使用自托管选项，您需要管理由持久连接使用的资源，让服务器立即通知客户端新的 SMS。如果您使用托管服务，则无需担心这一点。

我还写了一篇关于使用 Pusher 和[Twilio](http://twilio.com)的教程，它的作用与您在此处尝试实现的非常相似。代码虽然在 Ruby 中。见： http: [//www.twilio.com/blog/2012/07/pusher-and-twilio-making-realtime-fuctionality-easy.html](http://www.twilio.com/blog/2012/07/pusher-and-twilio-making-realtime-fuctionality-easy.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:32:39.893

我试图了解问题并分析您想选择 AJAX 方法，但是如果新传入的消息没有到达太多，您害怕冗余，我可以建议的是：

将您的任务分为两部分，一项任务应检查是否有新消息到达。

如果第一个任务为真，则运行第二个刷新窗口的任务。

这样可以减少冗余。

谢谢

# c++ - 颜色类型 3 的 PNG 图像纹理格式

> ID：14373099
> 
> 赞同：1
> 
> 时间：2013-01-17T06:07:28.123
> 
> 标签：c++, opengl, png, textures, libpng

我有一个 128x128 尺寸的 PNG 图像。当我用 libpng 读取它的 IHDR 块时，它显示图像的颜色类型为 3。问题是我无法在任何地方找到这种颜色类型的纹理格式。我想用 OpenGL 绘制这个图像。但如果没有正确的纹理格式，图像颜色就不是它应该的样子。而且，如果可以提供任何参考资料，我将不胜感激。

我使用此方法为其他颜色类型设置纹理格式

```
inline void GetPNGtextureInfo (int color_type,GLuint *format)
{

switch (color_type)
{
    case PNG_COLOR_TYPE_GRAY:
        *format = GL_LUMINANCE;
        break;

    case PNG_COLOR_TYPE_GRAY_ALPHA:
        *format = GL_LUMINANCE_ALPHA;
        break;

    case PNG_COLOR_TYPE_RGB:
        *format = GL_RGB;
        break;

    case PNG_COLOR_TYPE_RGB_ALPHA:
        *format = GL_RGBA;
        break;

    default:
        break;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:41:13.240

调色板只是一个颜色数组，图像数据只是该数组的索引。

因此，如果要将图像转换为 RGB 图像，请为该格式的图像分配一个足够大的新缓冲区，并通过从源图像中获取像素的索引来填充它，使用该值索引调色板，然后存储您进入目标图像的 RGB 值。

您可能会发现一种支持调色板纹理的 GL 风格，并且可以直接加载它们，但如今硬件支持不太常见，您所做的只是将工作卸载到驱动程序，驱动程序将转换您的纹理到 24 位。

例如，OpenGL ES 通过该`glCompressedTexImage2D()`函数支持某些类型的调色板纹理，但这完全有可能只是给实现带来负担，将这些纹理转换为硬件可以处理的东西。

除非您有存储空间问题，否则我倾向于离线转换（即首先将您的图像保存为 24 位），但这两种方式在技术上并不困难。

# vb.net - 如何使用三个不同的键，例如 (Ctrl Shift O) 在 vb.net 中打开一个表单？

> ID：14373100
> 
> 赞同：2
> 
> 时间：2013-01-17T06:07:29.000
> 
> 标签：vb.net, keyboard-shortcuts

我需要使用三个不同的键，例如 ( `Ctrl`++ `Shift`)`F12`在 vb.net 中打开另一个表单。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:29:35.913

在 keydown 事件中，您可以访问这些键。例如，在这个处理程序中......

```
Private Sub keyDown(ByVal Sender As Object, ByVal e As KeyEventArgs) handles me.keydown 
```

...您可以使用布尔值 e.Alt、e.Control 和 e.Shift 来判断这些控制键是否按下。然后你可以做这样的事情：

```
Select case CInt(e.keycode)
  case Keys.F12
    if e.Control andalso e.Shift then frm.ShowDialog
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:13:55.463

定义这个[函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646301%28v=vs.85%29.aspx)：

```
Private Declare Function GetKeyState Lib "user32" (ByVal nVirtKey As IntPtr) As Short 
```

因此，您可以检查同时按下了哪些键：

```
'For example, keys "arrow up" and letter "W"
If GetKeyState(87) < 0 AndAlso GetKeyState(38) < 0 Then
     'Do something
End If 
```

您可以在 KeyDown 事件或 Timer 或任何东西中检查键。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T14:07:46.380

您可以使用 xpda 的答案中的关键事件来处理它，或者，*如果您已经有一个 MenuItem*来执行相同的操作，则可以设置 ToolStripMenuItem 的[ShortcutKeys](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripmenuitem.shortcutkeys.aspx)属性。

# mysql - magento 无法重新索引产品属性

> ID：14373105
> 
> 赞同：0
> 
> 时间：2013-01-17T06:07:55.957
> 
> 标签：mysql, magento, magento-1.7

当我从 Index Management 运行 Reindex 时，它会给出错误**“无法初始化索引器进程”。**

因此，基于以下文章 [http://jasonehmke.com/ecommerce/cannot-initialize-the-indexer-process-in-magento/](http://jasonehmke.com/ecommerce/cannot-initialize-the-indexer-process-in-magento/)

我跑了

```
php -f indexer.php reindexall 
```

这给出了以下输出：

```
Product Prices index was rebuilt successfully
Catalog URL Rewrites index was rebuilt successfully
Product Flat Data index was rebuilt successfully
Category Flat Data index was rebuilt successfully
Category Products index was rebuilt successfully
Catalog Search Index index was rebuilt successfully
Stock Status index was rebuilt successfully
Tag Aggregation Data index was rebuilt successfully

Product Attributes index process unknown error:

exception 'PDOException' with message 'SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '65-542-1-65' for key 'PRIMARY'' in /home/bizzosph/public_html/lib/Zend/Db/Statement/Pdo.php:228

Next exception 'Zend_Db_Statement_Exception' with message 'SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '65-542-1-65' for key 'PRIMARY'' in /home/bizzosph/public_html/lib/Zend/Db/Statement/Pdo.php:234 
```

知道如何解决这个问题吗？它没有告诉我哪个表有重复条目。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-19T20:37:56.977

*我敢肯定，自从发布此问题以来，您已经继续前进，但由于它有大约 2500 次浏览（在这里有这个答案会对我有所帮助），我将添加我找到的解决方案。 **这不需要截断任何数据库表甚至任何直接 SQL 查询**：*

昨晚，我遇到了同样的问题。我的错误与您的错误相同（除了涉及导致问题的产品和属性的数字）。如果您在管理员的“管理产品”部分重新保存该产品（无需更改，只需打开它进行编辑并单击保存），它将解决问题 - 但您很可能有更多产品会带来额外的类似错误。

就我而言，这不仅仅是一种产品的问题，还有数百种产品导致错误（每个保存的产品都会带来一个新产品）。而且并非所有属性都具有相同的属性（我在上次导入时更新了包含 4,000 多种产品的数据库中的多个属性）。

由于一切似乎实际上都正确地存在于数据库中（因为重新保存似乎正在修复它并将正确的数据提供给最终保存的产品），所以我有了一个想法。

为什么不导出所有 4k 产品，然后不加修改地重新导入相同的文件，看看是否可以清除它。

有效！

**tl;dr：如果您在需要重新保存多个产品时遇到此问题，请导出您的整个库存（或相关部分，如果您可以以有用的方式进行细分），然后重新导入相同的文件而不进行修改.**

我正在使用 Magento v 1.9.0.1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:10:23.767

首先尝试清理 Magento 缓存。如果不成功，运行[官方数据库修复工具](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/db-repair-tool)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T12:39:37.390

解决方案是运行以​​下 MySQL 查询：

```
TRUNCATE TABLE `catalog_product_flat_1`;
TRUNCATE TABLE `catalog_product_flat_2`;
TRUNCATE TABLE `catalog_product_flat_3`; 
```

# jquery - Jquery 提交表单并刷新页面

> ID：14373111
> 
> 赞同：1
> 
> 时间：2013-01-17T06:09:08.627
> 
> 标签：jquery, forms, jquery-ui, grails, jquery-ui-dialog

我遇到了 Jquery 的一些问题，这是我的 Jquery 代码：

```
<script>
  $(function() {
    var username = $( "#username" ),
      email = $( "#email" ),
      password = $( "#password" ),

      allFields = $( [] ).add( username ).add( email ).add( password ),
      tips = $( ".validateTips" );

    function updateTips( t ) {
      tips
        .text( t )
        .addClass( "ui-state-highlight" );
      setTimeout(function() {
        tips.removeClass( "ui-state-highlight", 1500 );
      }, 500 );
    }

    function checkLength( o, n, min, max ) {
      if ( o.val().length > max || o.val().length < min ) {
        o.addClass( "ui-state-error" );
        updateTips( "Length of " + n + " must be between " +
          min + " and " + max + "." );
        return false;
      } else {
        return true;
      }
    }

    function checkRegexp( o, regexp, n ) {
      if ( !( regexp.test( o.val() ) ) ) {
        o.addClass( "ui-state-error" );
        updateTips( n );
        return false;
      } else {
        return true;
      }
    }

    $("#success").dialog({
          autoOpen: false,
          height: 700,
          width: 500,
         modal: true,
         buttons: {
             "Okay": function() {
                 $( this ).dialog( "close" );
                location.reload();   
             }

         }
        });
    $( "#create1" ).dialog({
      autoOpen: false,
      height: 700,
      width: 500,
      modal: true,
      buttons: {
        "Create an account": function() {
          var bValid = true;
          allFields.removeClass( "ui-state-error" );

          bValid = bValid && checkLength( username, "username", 3, 16 );
          bValid = bValid && checkLength( email, "email", 6, 80 );
          bValid = bValid && checkLength( password, "password", 5, 16 );

          bValid = bValid && checkRegexp( username, /^[a-z]([0-9a-z_])+$/i, "Username may consist of a-z, 0-9, underscores, begin with a letter." );
          // From jquery.validate.js (by joern), contributed by Scott Gonzalez: http://projects.scottsplayground.com/email_address_validation/
          bValid = bValid && checkRegexp( email, /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i, "eg. ui@jquery.com" );
          bValid = bValid && checkRegexp( password, /^([0-9a-zA-Z])+$/, "Password field only allow : a-z 0-9" );

          if ( bValid ) {
              $( this ).dialog( "close" );
              $( "#success" ).dialog( "open" );
              $('#createUser').submit();

          }
        },
        Cancel: function() {
          $( this ).dialog( "close" );
        }

      }

    });

    $( "#create" ).button().click(function() {
        $( "#create1" ).dialog( "open" );
      });
  });
  </script> 
```

所以这里的问题是，我想在提交表单后提交表单并刷新。但是，表单在刷新之前就被提交了。我试过做 AJAX，但它不起作用。在提交表单后为什么我必须刷新之前是因为我在表格中有一个添加内容的列表，我必须刷新并向用户显示更新的列表。你们知道我该怎么做吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:16:36.247

问题有点令人困惑，因为如果您使用 ajax，则无需刷新页面...

无论如何，为什么不按下成功dailog`OK`按钮时提交表单，因为甚至create1对话框都在调用成功dailog ...这样您将获得成功对话框..成功后将提交表单，页面将刷新..

```
$("#success").dialog({
      autoOpen: false,
      height: 700,
      width: 500,
     modal: true,
     buttons: {
         "Okay": function() {
             $( this ).dialog( "close" );
            //location.reload();   
            $('#createUser').submit(); //here
         }

     }
    }); 
```

注意：在创建对话框中删除表单提交。

# ruby-on-rails - 使用 Trinidad Gem 设置公用文件夹

> ID：14373120
> 
> 赞同：0
> 
> 时间：2013-01-17T06:09:52.073
> 
> 标签：ruby-on-rails, jruby, trinidad-gem

我正在使用 trinidad gem 运行 rails 应用程序。我正在使用允许我将其与 Rack 处理程序一起使用的方法：

```
$ jruby -S rails s -p 80 
```

`public/`但是，每当我尝试访问 rails文件夹中的某些内容时，它都会给我一堆 404 错误。[自述](https://github.com/trinidad/trinidad)文件似乎建议我添加该选项`--public PUBLIC_DIR`，以便服务器知道将什么视为公用文件夹，但是当我将其添加到我的调用中时：

```
$ jruby -S rails s -p 80 --public /home/bdares/myproject/public 
```

它给了我这个错误：

```
OptionParser::InvalidOption: invalid option: --public 
```

我的视图和资产管道中的其他所有内容都得到了很好的服务，所以我想我可以将所有内容都放在一个资产文件夹中，但如果可能的话，我想把它做好。此外，似乎由于未正确提供公用文件夹，因此也找不到任何预编译的资产。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:47:41.397

不幸的是，机架处理程序实际上只是“存在”并且不支持所有内容......如果您需要配置默认值，我建议您使用“标准”模式（最好是`threadsafe!`）更改公用文件夹应该可以工作-尽管它可能会相对于您的根工作（也可以尝试主文件夹-我现在不确定发行版中有什么）您可以使用特立尼达的配置将子文件夹“符号链接”到公共（检查 wiki 的 README 中有一个示例）。

# ios - 将 NSString 解析为字节数组

> ID：14373121
> 
> 赞同：0
> 
> 时间：2013-01-17T06:09:54.653
> 
> 标签：ios, objective-c, macos

我需要将一个 NSString 解析为一个字节数组，并且在执行此操作时遇到了一些麻烦。我在方法中有一个填充字节数组并将其转换为可变字符串，然后我有一个方法需要将这些数字放回字节数组中。在 C# 中，它很简单：

```
do
{
    val = byte.Parse(str.Substring(i, 3));
    byteArr[j++] = val;
    i += 3;
} 
```

这是代码片段注意**我在 do 循环中尝试了很多不同的东西，所以现在那里一团糟：

```
-(NSData*) StrToByteArray: (NSString*)str 
{
    NSLog(@"StrToByteArray. String: %@", str);
    if([str length]==0)
       NSLog(@"Invailid String");
    int val;
    Byte byteArr[[str length]/3];
    int i = 0;
    int j = 0;
    NSRange range; 
    do {
       range = NSMakeRange(i, 3);
       val = (int)[str substringFromIndex:i];
       NSLog(@"StrToByteArray. VAR: %i", val);
       byteArr[j++] = val;
       NSLog(@"byteArr: %i",byteArr[i]);
       i+=3;
    }while(i<str.length);
    NSData* wrappedByteArr = [NSData dataWithBytes:&byteArr length: sizeof(byteArr)];
    return wrappedByteArr;
} 
```

这是制作填充字符串的循环：

```
for(int i = 0; i<=len;i++)
{
    val = byteArr[i];
    NSLog(@"byteArr to string original: %i", val);
    if(val<(Byte)10)
    {
        [tempStr appendString:(@"00")];
        [tempStr appendString:[NSString stringWithFormat:@"%d",val]];
    }
    else if(val<(Byte)100)
    {
        [tempStr appendString:(@"0")];
        [tempStr appendString:[NSString stringWithFormat:@"%d",val]];
    }
    else {

        [tempStr appendString:[NSString stringWithFormat:@"%d",val]];
    }

}
NSLog(@"string: %@", tempStr);
return tempStr; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:31:00.230

### 拿 2

现在我知道数据是什么样子以及您想如何解析它，我会这样处理它：

```
- (NSData *) parseStringToData:(NSString *) str
{
    if ([str length] % 3 != 0)
    {
        // raise an exception, because the string's length should be a multiple of 3.
    }

    NSMutableData *result = [NSMutableData dataWithLength:[str length] / 3];
    unsigned char *buffer = [result mutableBytes];

    for (NSUInteger i = 0; i < [result length]; i++)
    {
        NSString *byteString = [str substringWithRange:NSMakeRange(i * 3, 3)];
        buffer[i] = [byteString intValue];
    }

    return result;
} 
```

### 编辑：

您的填充方法也可以通过提供自动填充整数的正确格式说明符来简化。

```
for(int i = 0; i<=len;i++)
{
    val = byteArr[i];
    NSLog(@"byteArr to string original: %i", val);

    [tempStr appendFormat:@"%03d", val];
} 
```

# .net - MVC4 - 为什么我的 URL 重写阻止我访问自定义 AuthoriseAttribute 中的 ID

> ID：14373122
> 
> 赞同：0
> 
> 时间：2013-01-17T06:10:02.643
> 
> 标签：.net, url-rewriting, asp.net-mvc-4, custom-attributes

我目前正在 MVC4 中编写一个授权过滤器，它具有默认的 URL 重写

```
 routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    ); 
```

通过上面的路线，我有一个自定义的授权属性，它像这样开始

```
protected override bool AuthorizeCore(HttpContextBase httpContext)
{
    String Value = httpContext.Request["id"]; 
```

但是id没有通过。

当我把路线从上面移开时。

无论如何我可以在授权属性中拥有路线和ID吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:16:11.207

对于任何对我的解决方案感兴趣的人，我设法从 RequestContext 中的 RouteData 中获取了我需要的信息 -

```
 protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        String Value = httpContext.Request["id"];
        if(String.IsNullOrWhiteSpace(Value))
            Value = httpContext.Request.RequestContext.RouteData.Values["id"] as String; 
```

# jquery - 如何从具有完整 Html 页面的 responseText 中获取特定的 div 内容

> ID：14373123
> 
> 赞同：1
> 
> 时间：2013-01-17T06:10:06.083
> 
> 标签：jquery, html, ajax

我在 responseText 中获取整个 html 页面，我只想解析/过滤 responseText 以获取特定的 div 说测试和基础内容。我不想修改服务器端代码以在 `responseText`.

```
url: "Someurl",
datatype: "text/html",
success : function(responseText) 
{
    alert(responseText);
dat = $(data).filter("#test").html();
alert(dat);//getting null
$('#test').html(dat);

} 
```

`responseText`包含

100 条 HTML 行.... .... .... 更多 div 标签和其他标签 .... 100 条 HTML 行

我正在使用 jquery，我尝试过

```
$(responseText).filter("#test").html(); 
```

也用过 find

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:13:33.820

如果您在响应中只有 html 并且您的意图是使用唯一 ID 查明 DIV，那么它可能比我之前给出的示例更容易。

尝试这样的事情

```
var myHtml = $(responseText).find('#test').html();
//alert(myHtml); -- optional, just to verify 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T06:41:22.907

```
 Hi use below line it will work

         $(responseText).find("#test").html(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T06:46:36.497

您是否尝试过使用 find() ？

```
$(responseText).find('#test').html(); // to change the html 
```

或者

```
$(responseText).find('#test').text(); // to just get the content 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T06:46:54.123

它需要是 dataType 而不是 datatype：[http](http://api.jquery.com/jQuery.ajax/) ://api.jquery.com/jQuery.ajax/ 并将此方法的 dataType 设置为“html”，而不是“text/html”

```
 dataType = "html"; 
```

# c# - 使用 SQL Server 的应用程序中的 SqlException

> ID：14373126
> 
> 赞同：0
> 
> 时间：2013-01-17T06:10:24.123
> 
> 标签：c#, sql-server, exception-handling, ado.net

嘿，我刚开始学习使用后端作为 sql 在 C# 中制作应用程序。我设置了一些断点，以查看控件在执行`cntCeilInn.Open();` 不久后永远不会返回，输出窗口显示' `System.Data.SqlClient.SqlException`'发生在`System.Data.dll`

谷歌告诉我它没有超时或我无法理解的东西。请帮忙。

```
string strServerName="EXPRESSION";

using (SqlConnection cntCeilInn = new SqlConnection("Data Source=" + strServerName + ";" + "Integrated Security=YES"))
{
    SqlCommand cmdCeilInn= new SqlCommand("If exists ("+ "Select name "+ "from sys.database "+ "Where name=N'CeilInn1')"+ "DROP database CeilInn1;"+ "go"+ "create database CeilInn1;", cntCeilInn);
    cntCeilInn.Open();
    cmdCeilInn.ExecuteNonQuery();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:24:44.603

作为**connectionString**参数，您应该使用：

```
Data Source=yourServerName;Initial Catalog=yourDatabaseName;Integrated Security=True 
```

确保修改`youServerName`并`yourDatabaseName`使用适当的数据。

请注意，您忘记在 connectionString( **Initial Catalog** ) 中设置数据库名称，并且 Integrated Security 的值为**True**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:40:49.517

您的 sql 查询中几乎没有错误。

1.  这`sys.databases`不是`sys.database`

2.  `Go`和`Create`语法 之间没有空格

3.  您需要将 sql 语句放在单独的行中

4.  更不用说`connection string`像其他人所说的那样检查你的一次

试试这个

```
SqlCommand cmdCeilInn = new SqlCommand("If exists (" + "Select name " + "from sys.databases " + "Where name=N'Sample') DROP database Sample;" 
                      +Environment .NewLine+ "go " + Environment .NewLine 
                     +" create database Sample;", cntCeilInn); 
```

# iphone - 如何使用iphone编程在asp.net webservice中传递对象

> ID：14373127
> 
> 赞同：0
> 
> 时间：2013-01-17T06:10:35.337
> 
> 标签：iphone, asp.net, web-services

我在我的 iphone 应用程序中使用 asp.net webservices 我正在创建消息，例如

```
 -(NSString *)createChangePasswordMessage:(NSString *)oldPassword withNewPassword:(NSString *)newPassword withUserID:(int)integer{

 NSString *soapMessage=@"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
"<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n"
"<soap:Body>\n"
"<UserID>%i</UserID>\n"
"<OldPassword>%@</OldPassword>\n"
"<NewPassword>%@</NewPassword>\n"

"</soap:Body>\n"

"</soap:Envelope>";

soapMessage=[NSString stringWithFormat:soapMessage,integer,oldPassword,newPassword];

return soapMessage;

 } 
```

但现在我必须在以下网络服务中传递对象

```
 <xs:element name="UpdateSysUser">
   <xs:complexType>
   <xs:sequence>  
   <xs:element minOccurs="0" name="user" nillable="true" type="q9:SysUser"     xmlns:q9="http://schemas.datacontract.org/2004/07/MyPass.DAL.DataCtx"/>  
   </xs:sequence>
   </xs:complexType>
   </xs:element> 
```

所以我不知道如何为这个网络服务创建消息我创建了一个具有以下元素的类

```
 <xs:complexType name="SysUser">
       <xs:sequence>
       <xs:element minOccurs="0" name="AccStatus" nillable="true" type="xs:unsignedByte"/>
        <xs:element minOccurs="0" name="CityID" nillable="true" type="xs:long"/>
        <xs:element minOccurs="0" name="CountryID" nillable="true" type="xs:int"/>
        <xs:element minOccurs="0" name="Individuals" nillable="true"    type="tns:ArrayOfIndividual"/>
        <xs:element minOccurs="0" name="NickName" nillable="true" type="xs:string"/>
        <xs:element minOccurs="0" name="NickPrivacyID" nillable="true" type="xs:unsignedByte"/>
         <xs:element minOccurs="0" name="Password" nillable="true" type="xs:string"/> 
         <xs:element minOccurs="0" name="UserID" type="xs:long"/>
         <xs:element minOccurs="0" name="UserTypeID" type="xs:unsignedByte"/> 
```

请帮助我如何为上述网络服务创建消息，以便我可以从中传递 SysUser 对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:18:45.757

您需要序列化您的对象以适应 web 服务请求 SOAP 消息，这里是 SysUser。

```
// class definition of SysUser
[Serializable]
public class SysUser
{

    public string AccStatus;
// remining fields
} 
```

# google-apps-script - 用于从两个不同电子表格中删除行的 Google Apps 脚本

> ID：14373133
> 
> 赞同：0
> 
> 时间：2013-01-17T06:11:14.673
> 
> 标签：google-apps-script, google-sheets, google-apps

我进行了长时间的搜索，但找不到我要找的东西。也许有人在那里可以提供帮助？

我有两个 Google 电子表格，Spread1 和 Spread2。我只会参考两个电子表格的 sheet1。

我需要一个脚本来删除Spread1的B列中包含“Hello”的行，但前提是“Hello”出现在Spread2的B列中。

如果行被删除（如果相同的单词出现在两列中），那么我希望脚本返回到 Spread2 并删除 B 列中带有“Hello”的行。

因此，脚本运行后，“Hello”将不会出现在任一电子表格的 B 列中。

如果有人知道如何实现这一点，我将非常感激 - 您的宝贵帮助将不胜感激。

感谢您的关注！

编辑：

我有这个脚本删除Spread2中B列中包含“hello”的行：

```
function deleteRow() {
  var ss = SpreadsheetApp.openById("SPREADSHEET KEY"); 
  SpreadsheetApp.setActiveSpreadsheet(ss);
  var s = ss.getSheetByName('Sheet1'); // change to your own
  var values = s.getDataRange().getValues();
  for( var row = values.length -1; row >= 0; --row )
     if (values[row][1] == 'Hello')
      s.deleteRow(parseInt(row)+1);
}; 
```

但我只希望它在Spread1的B列中出现“Hello”时这样做。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:54:15.923

您可以在同一脚本中引用这两个电子表格，并逐步处理这两个数组

```
function deleteRow() {
      var ss = SpreadsheetApp.openById("SPREADSHEET KEY"); 
      SpreadsheetApp.setActiveSpreadsheet(ss);
      var s = ss.getSheetByName('Sheet1'); // change to your own
      var values = s.getDataRange().getValues();
      var ss1 = SpreadsheetApp.openById("SPREADSHEET KEY1"); 
      var s1 = ss1.getSheetByName('Sheet1'); 
      var values1 = s1.getDataRange().getValues();
            // assumes sheets have same number of rows and you wish to delete corresponding rows in each
      for( var row = values.length -1; row >= 0; --row )
         if (values[row][1] == 'Hello' || values1[row][1] == 'Hello')
          s.deleteRow(parseInt(row)+1);  // parseInt is not required
          s1.deleteRow(parseInt(row)+1);
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T03:11:17.663

为了简化这个解决方案，我使用[2D Array Library](https://sites.google.com/site/scriptsexamples/custom-methods/2d-arrays-library)，用于`ArrayLib.find()`. 您可以改为编写一个函数，循环遍历 sheet2 中的行以查找“Hello”。

```
function deleteRow() {
  // This assumes script is independent of either sheet
  var s1 = SpreadsheetApp.openById("SPREADSHEET KEY1").getSheetByName('Sheet1'); 
  var s2 = SpreadsheetApp.openById("SPREADSHEET KEY2").getSheetByName('Sheet1'); 

  var values1 = s1.getDataRange().getValues();
  var values2 = s2.getDataRange().getValues();

  // Check if "Hello" appears in column B of Spread2.
  if (ArrayLib.find(values2, 1, 'Hello') != -1) {
    // Yes it does, so delete rows containing "Hello" in column B of Spread1
    for( var row = values.length -1; row >= 0; --row )
       if (values1[row][1] == 'Hello')
        s1.deleteRow(parseInt(row)+1);
    }
  }
} 
```

`deleteRow()`您可以通过删除对 的调用，以数组形式修改 Spread1，然后调用`clearContent()`并将`setValues()`修改后的数组写回工作表来进一步优化这一点。这样，您将`n`服务调用替换为 2，并节省大量运行时间。

# internet-explorer - 我们可以在无头模式下使用 WATIR for IE 自动化功能测试用例吗？

> ID：14373134
> 
> 赞同：0
> 
> 时间：2013-01-17T06:11:19.003
> 
> 标签：internet-explorer, testing, automation, watir-webdriver

我想使用 watir-webdriver 自动化我的 Web 应用程序的一些工作流程。我正在使用 Ubuntu。我想自动化 IE 上的所有工作流程。由于我使用 ubuntu 作为我的平台，因此需要以无头模式运行它。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:03:05.877

我建议使用 VM 或单独的机器来测试 IE。如果您尝试在 Ubuntu 中运行 IE 测试，您很可能无法找到所需的 IEDriverServer。您也许可以使用 Wine 或其他解决方案，但我不知道对此有任何支持。

# jersey - @Ref 和 @QueryParam

> ID：14373135
> 
> 赞同：1
> 
> 时间：2013-01-17T06:11:22.237
> 
> 标签：jersey, jax-rs, java-ee-6

我在 GlassFish 中使用 Jersey 1.11.1，我试图返回一个具有 @QueryParam 的 URI。

例如，我希望返回的 URI 看起来像：

```
<bar>http://car.com/star?param=XYZ</bar> 
```

我有这样的基本@Ref：

```
@Ref(
    resource=Foo.class,
    style = Ref.Style.ABSOLUTE,
    bindings={}
)
@XmlElement
private URI bar; 
```

但是对于我的生活，我无法弄清楚是否有办法在其中添加查询参数。

如果有可能怎么办？如果不可能有任何建议来代替做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:08:13.370

看起来它还不受支持：http: [//java.net/jira/browse/JERSEY-688](http://java.net/jira/browse/JERSEY-688) [1](http://java.net/jira/browse/JERSEY-688)

```
The jersey-server-linking module lacks of support for query parameters.

Example:
@Ref(
   value="books?page=${instance.page - 1}",
   condition="${instance.page > 0}",
   style=Style.ABSOLUTE
)
@XmlElement
URI previous;

The ? will be encoded as %3F. So it is not possible to add any query parameters to links generated by the @Ref annotation. 
```

# php - 为什么在函数内部对 $this 的修改会传播到函数外部？

> ID：14373139
> 
> 赞同：0
> 
> 时间：2013-01-17T06:11:31.727
> 
> 标签：php, object

我对以下输出感到困惑

```
class A{
    public $v = 10;    
    function add($number){
        $this->v +=$number;
    }

}
$a = new A;
echo $a->v . "\n";
$a->add(5);
echo $a->v . "\n"; 
```

为什么第二行输出的是 15 而不是 10？我认为除非您通过引用传递，否则对函数内部值所做的更改不会传播到函数外部。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T06:13:49.127

您的评论“对函数内部值所做的更改不会在函数外部传播”适用于参数。可以“按值”或“按引用”传递，例如：

```
class A{
    public $v = 10;    
    function add($number){
        $number += $this->v;
    }

$b = 5;
$a->add($b);
echo $b; // Will still be 5; 
```

在上面的示例中，$b 只有在通过引用传递给函数时才会变为 15。

在您的情况下，您根本没有修改参数。您也没有修改局部变量。

您正在修改`v`对象的属性。`$this`是一个特殊变量，它是函数的局部变量，但*引用*了对象。您修改的实际变量不是`$this`，也不是参数，而是 的属性`$a`。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-17T06:14:20.017

但是你通过引用传递它。当您使用关键字`$this`时，您已经表明应该使用类属性。

# javascript - node-mysql 数组转义只返回第一个元素？

> ID：14373143
> 
> 赞同：0
> 
> 时间：2013-01-17T06:12:10.790
> 
> 标签：javascript, node.js, node-mysql

我正在使用 node.js 编写一个 HTTP 服务器，用于与客户端交互并将它们发送的数据存储到 mysql 数据库中。我正在使用 node-mysql 模块与数据库进行交互。以下是我的代码片段：

```
mysql_conn.query('INSERT INTO systems VALUES ( ? )', [system.ClientID,
    system.Application, system['System Information']], function(err, result) {
    if (err) {
        cb(err, res);
    } else {
        resData = {Status : 'Success'};
        cb(null, res, resData);
    }
}); 
```

结果查询如下所示：

```
INSERT INTO systems VALUES ( 'ED1758FD-1ED7-4907-A4FF-BCA41830124A' ) 
```

我正在传递一个包含三个元素的数组，但查询中只显示一个。文档说：

> 数组变成列表，例如 ['a', 'b'] 变成 'a', 'b'

难道我做错了什么？我对javascript很陌生。如果有无知，请容忍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:56:14.870

如果你有 3 个变量，应该有 3 个？换句话说，您的 SQL 查询应该如下所示：`INSERT INTO systems VALUES ( ?, ?,? )` 如果您不确定顺序，并且想要指定顺序，您应该将查询更改为如下内容：`INSERT INTO systems(field1, field2, field3) VALUES ( ?, ?,? )`其中字段是 MySQL 表中的实际字段。

# ruby-on-rails - 无法创建新的 Rails 应用程序。Sqlite3 无法安装

> ID：14373145
> 
> 赞同：0
> 
> 时间：2013-01-17T06:12:29.910
> 
> 标签：ruby-on-rails, ruby, sqlite

错误信息：

```
Installing sqlite3 (1.3.7) with native extensions <br>
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.<br>

    /usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb 
checking for sqlite3.h... yes<br>
checking for sqlite3_libversion_number() in -lsqlite3... yes<br>
checking for rb_proc_arity()... yes<br>
checking for sqlite3_initialize()... yes<br>
checking for sqlite3_backup_init()... yes<br>
checking for sqlite3_column_database_name()... no<br>
checking for sqlite3_enable_load_extension()... yes<br>
checking for sqlite3_load_extension()... yes<br>
checking for sqlite3_open_v2()... yes<br>
checking for sqlite3_prepare_v2()... yes<br>
checking for sqlite3_int64 in sqlite3.h... yes<br>
checking for sqlite3_uint64 in sqlite3.h... yes<br>
creating Makefile<br>

make
compiling backup.c<br>
make: /robertmhirsch/bin/gcc.4.2: No such file or directory<br>
make: *** [backup.o] Error 1

Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.3-p194/gems/sqlite3-1.3.7 for inspection.<br>
Results logged to /usr/local/rvm/gems/ruby-1.9.3-p194/gems/sqlite3-1.3.7/ext/sqlite3/gem_make.out<br>
An error occured while installing sqlite3 (1.3.7), and Bundler cannot continue.<br>
Make sure that `gem install sqlite3 -v '1.3.7'` succeeds before bundling.<br> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:19:07.167

我认为您需要安装 GCC 或同等产品。您还没有提到您使用的是什么操作系统，如果是 Ubuntu，您可以通过以下方式安装必要的东西

```
sudo apt-get install build-essential 
```

对于 OSX，请参阅[http://cczona.com/blog/2012/07/fix-for-make-usrbingcc-4-2-no-such-file-or-directory/](http://cczona.com/blog/2012/07/fix-for-make-usrbingcc-4-2-no-such-file-or-directory/)

# javascript - 关闭活动元素失败

> ID：14373150
> 
> 赞同：2
> 
> 时间：2013-01-17T06:12:43.730
> 
> 标签：javascript, jquery

我正在尝试使用 JQuery 的 off 函数取消绑定到容器内元素的所有事件，但是它正在做一些奇怪的事情。

我的代码如下

```
<div id='container'>
<button id='test_btn'>Test</button>
<button id='live_btn_id1'>Action</button>
<button id='live_btn_id2'>Action</button>
</div>

$("#test_btn").on("click", function(){
$("#container").find("*").off();
});

$("#container").on('click', 'button[id^=live_btn]', function(event) { 
alert("hello");
}); 
```

结果是 test_btn 正确停止工作，但“操作”按钮继续工作。但是，如果我执行以下操作：

```
$("#container").off(); 
```

它按预期工作，但这也删除了我附加到容器的东西。这种奇怪的行为有原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:24:12.390

当您使用委托时，您将绑定到元素，而不是后代选择器。

因此，您调用`$("#container").on(...`并且绑定到`#container`，而不是`live_btn`。

`.off`on`live_btn`没有任何意义，因为没有任何东西与它们绑定。

一个可能的解决方案是命名点击事件：

```
$("#container").on('click.live', 'button[id^=live_btn]' ...
$("#container").off('click.live'); 
```

# etl - 映射变量的源限定符 SQL 覆盖错误

> ID：14373151
> 
> 赞同：0
> 
> 时间：2013-01-17T06:12:53.387
> 
> 标签：etl, informatica-powercenter, informatica

我正在使用日期/时间数据类型的映射变量和聚合 MAX 在我给出的源限定符 SQL 覆盖中 `select col1,col2 from tbl where col1>$$dt`

（col1 也是日期数据类型）

当我验证查询时，它给出了 Invalid Query 并且错误是 `[Microsoft][ODBC driver for Oracle][Oracle]ORA-00933 : SQL command not properly ended`

我也提取了类似 `select col1,col2 from tbl where to_char(col1,'DD-MM-YY')>to_char($$dt,'DD-MM-YY')` 但仍然相同的字符

如果我正在尝试数字列，我没有得到错误是什么，同样的事情它正在验证并执行增量提取。

任何有关相同的建议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:56:27.973

我在下面使用了类似的东西并且它有效。

col1 > (TO_DATE('$$dt','MM/DD/YYYY HH24:MI:SS')

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T02:32:45.710

我相信您不能在源限定符查询中使用映射参数/变量等（就像您正在尝试的那样）。

但是，您可以在外部构建完整的查询，并使用 $$SQ_QUERY 将其传入，从而有效地覆盖完整的 SQL 语句。

# jsf - 如何在 JSF 中以编程方式设置语言环境

> ID：14373153
> 
> 赞同：2
> 
> 时间：2013-01-17T06:13:03.503
> 
> 标签：jsf, jsf-2

我目前正在尝试以编程方式设置语言环境，但找不到好的解决方案。用例是我有另一个网站将数据发布到我的网站，它有一个语言环境参数，并且基于这个语言环境，我必须呈现我的页面。

我已经尝试在 preRenderView、构造函数和 PostConstruct 上设置语言环境，但似乎已经为时已晚。

有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T13:14:19.713

关键是您需要在`UIViewRoot#setLocale()`渲染视图之前设置语言环境。`<f:view locale="#{languageBean.currentLocale}">`仅在构建视图期间设置。因此，此后为了**仅**更改bean 属性而调用的任何基于请求的操作都不会产生任何影响。你真的需要手动调用`UIViewRoot#setLocale()`。

最简单的方法是在属性的设置器中执行该`UIViewRoot#setLocale()`工作。`currentLocale`Daniel 在您的问题评论中提供的链接的答案中提到的 bean 示例正是这样做的：[JSF 2.0 set locale entire session from browser and programmatically](https://stackoverflow.com/questions/5388426/jsf-2-0-set-locale-throughout-session-from-browser-and-programmatically)。这种方式不需要丑陋的 JS hack 来重新加载页面一次。

根据您自己的回答，还有另一个可能的问题：您的“接收器 bean”似乎是请求范围的，而不是它`#{languageBean}`本身。如果此 bean 是在视图的任何区域设置/语言相关方面（例如语言下拉列表、本地化文本等）**之后**第一次构造的，那么更改它们也为时已晚。您想将 bean 的构造移动到预渲染视图事件（例如，通过`<f:event listener>`）。另一种方法是仅在属性的*getter*中执行请求参数收集作业。`currentLocale`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:30:18.337

我已经通过使用纯 javascript 加载页面解决了这个问题。

在我的 PostConstruct 中，我从上下文的请求参数映射中读取参数。// 设置语言环境

```
try {
    languageBean.setCurrentLocale(LocaleUtils.toLocale(temp.getLocale()));
} catch (IllegalArgumentException | NullPointerException e) {
    languageBean.setCurrentLocale(Locale.JAPAN);
} 
```

然后使用纯 javascript 重新加载页面：

```
<script type="text/javascript">
    window.onload = function() {
        if (!window.location.hash) {
            window.location = window.location + '#loaded';
            window.location.reload();
        }
    }
</script> 
```

我在这里写了更详细的代码：http: [//czetsuya-tech.blogspot.com/2013/01/loading-locale-from-postget-parameter.html](http://czetsuya-tech.blogspot.com/2013/01/loading-locale-from-postget-parameter.html)

# ios - 带有其他手势的 ScrollView 中的 2 个手指平移 - iOS SDK

> ID：14373154
> 
> 赞同：2
> 
> 时间：2013-01-17T06:13:16.717
> 
> 标签：ios, objective-c, uiscrollview, uigesturerecognizer

我有一个主 UIView，其中包含一个滚动视图。我已经使用以下代码为 4 种类型的滑动为主视图设置了 UIGestureRecognizer：

```
UISwipeGestureRecognizer *swipeUpRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(upCommand)];
[swipeUpRecognizer setDirection:(UISwipeGestureRecognizerDirectionUp)];
[mainGameView addGestureRecognizer:swipeUpRecognizer];
... // Done 4 times for each direction 
```

当我禁用滚动视图上的滚动时，此代码效果很好（我可以在屏幕上的任何位置滑动，相关操作按预期执行）。但是，我想添加功能，以便如果我在滚动视图上触摸两根手指，我可以像滚动视图通常那样来回平移。我尝试向滚动视图添加手势识别器以检测两个手指何时平移：

```
- (void)viewDidLoad
{
    UIPanGestureRecognizer *panGestureRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(recognizePan)];
    panGestureRecognizer.minimumNumberOfTouches = 2;
    panGestureRecognizer.maximumNumberOfTouches = 2;
    [scrollView addGestureRecognizer:panGestureRecognizer];
}

- (void)recognizePan
{
    [gameScrollView setScrollEnabled:YES];
} 
```

我将其与以下方法结合使用，以在抬起手指后再次禁用滚动：

```
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
    [gameScrollView setScrollEnabled:NO];
} 
```

这种工作，但不是我想要的方式。当我在滚动视图上拖动两个手指时，滚动将设置为启用，但我不能使用这两个手指滚动。我首先需要抬起两根手指，然后才能用一根手指滚动（两根手指不起作用）。当我抬起可以滚动滚动视图的单根手指时，滚动被禁用，如`scrollViewDidEndDragging`.

显然，这种类型的滚动对用户来说不是很友好，但我似乎找不到设置滚动视图的方法，所以它只有在两根手指在滚动视图上拖动时才会滚动。感谢您提前提供任何帮助。

~ 17 岁的业余 iOS 开发者和手势新手

编辑：根据[这个问题](https://stackoverflow.com/questions/787212/scrolling-with-two-fingers-with-a-uiscrollview)的建议之一，我尝试实现 UISubView 的子类来覆盖默认的 touchesBegan 方法，但我无法让它工作。

自定义滚动视图.h：

```
@interface CustomScrollView : UIScrollView 
{
}

@end 
```

自定义滚动视图.m：

```
#import "CustomScrollView.h"

@implementation CustomScrollView

- (id)initWithFrame:(CGRect)frame 
{
  return [super initWithFrame:frame];
}

- (void) touchesBegan: (NSSet *) touches withEvent: (UIEvent *) event 
{   
  // What goes here so that The action it can be called from the ViewController.h
}

@end 
```

视图控制器.h：

```
#import <UIKit/UIKit.h>

@class CustomScrollView;

@interface ViewController : UIViewController <UIScrollViewDelegate>
{
  CustomScrollView *scrollView;
}

@end 
```

视图控制器.m：

```
- (void) touchesEnded: (NSSet *) touches withEvent: (UIEvent *) event 
{
  // What goes here?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-30T07:39:22.643

子类化 ScrollView 并实现以下方法：

```
- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer {
  if(gestureRecognizer.numberOfTouches != 2) {
    return NO;
  } else {
    return YES;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:57:48.737

我认为解决这个问题的起点是遵循 UIView 方法：

```
- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer 
```

调用此方法时，我们可以检查触摸位置、触摸次数等，然后决定使用哪个识别器。如果您创建 UIScrollView 子类并覆盖`gestureRecognizerShouldBegin`，您还可以控制 UIScrollView 的默认手势识别器（平移/缩放）。

当然，不需要使用 scrollEnabled 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T12:52:32.273

尝试继承 UIScrollView 并覆盖方法 touchesShouldBegin:withEvent:inContentView:。该文档指出以下内容：

> 被子类覆盖以自定义手指在显示内容中触摸时的默认行为。

```
- (BOOL)touchesShouldBegin:(NSSet *)touches withEvent:(UIEvent *)event inContentView:(UIView *)view 
```

因此，您可能能够检查您是否有不止一次触摸，并且只有返回一个真实值。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-17T16:09:07.113

尝试这个

```
 - (void)viewDidLoad
{  

    [super viewDidLoad];

    UISwipeGestureRecognizer *swipeUpRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(upCommand)];
    swipeUpRecognizer.delegate = self;
    [swipeUpRecognizer setDirection:(UISwipeGestureRecognizerDirectionUp)];
    [self.view addGestureRecognizer:swipeUpRecognizer];
    scrollView.delegate = scrollView;

    panGestureRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(recognizePan:)];
    panGestureRecognizer.minimumNumberOfTouches = 1;
    panGestureRecognizer.maximumNumberOfTouches = 1;
    [self.scrollView addGestureRecognizer:panGestureRecognizer];

}
-(void)upCommand
{
    NSLog(@"up");    
}
-(void)viewDidAppear:(BOOL)animated
{
    scrollView.contentSize = CGSizeMake(320, 600);
}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)recognizePan:(UIGestureRecognizer*)recognizer
{
    NSLog(@"pan");//Does nothing but catches the pan of scrollview so it doesnt scroll

}
//simultan recognition of pan and gesture
- (BOOL) gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
    return YES;
} 
```

泛识别器在 Scrollview 中捕获单指滑动，因此视图不会滚动，然后添加

shouldRecognizeSimultaneouslyWithGestureRecognizer

使得平移和手势都将被捕获。

就这样

编辑你必须添加

```
<UIGestureRecognizerDelegate> 
```

到你的 .h 文件

# database - 使用时区支持来构建 unix 时间戳

> ID：14373155
> 
> 赞同：1
> 
> 时间：2013-01-17T06:13:17.640
> 
> 标签：database, language-agnostic, time, timezone

我有一个表，其中每一行都有一个时间戳。时间戳是一个unix时间戳。我想使用这些数据做一些报告，这需要我按特定时间段对这些数据进行分组（现在，我们只说天：所以 86400 秒）。这可以通过设置时间戳来实现，即：

```
mysql> set time_zone='+00:00';
Query OK, 0 rows affected (0.00 sec)

mysql> select NOW(), FROM_UNIXTIME(FLOOR(UNIX_TIMESTAMP()/86400)*86400);
+---------------------+----------------------------------------------------+
| NOW()               | FROM_UNIXTIME(FLOOR(UNIX_TIMESTAMP()/86400)*86400) |
+---------------------+----------------------------------------------------+
| 2013-01-17 06:06:37 | 2013-01-17 00:00:00                                |
+---------------------+----------------------------------------------------+
1 row in set (0.01 sec) 
```

这使我可以进行以下数据汇总：

```
select FROM_UNIXTIME(FLOOR(timestamp/86400)*86400) groupts, count(some_id) from table group by groupts order by groupts; 
```

所有这一切都完美无缺，现在我想将数据与其他报告进行比较，其中我只有特定时区的数据，比如说它的 EST。

不幸的是（很明显），地板不再起作用了：

```
mysql> set time_zone='-05:00';
Query OK, 0 rows affected (0.00 sec)

mysql> select NOW(), FROM_UNIXTIME(FLOOR(UNIX_TIMESTAMP()/86400)*86400);
+---------------------+----------------------------------------------------+
| NOW()               | FROM_UNIXTIME(FLOOR(UNIX_TIMESTAMP()/86400)*86400) |
+---------------------+----------------------------------------------------+
| 2013-01-17 01:10:38 | 2013-01-16 19:00:00                                |
+---------------------+----------------------------------------------------+
1 row in set (0.00 sec) 
```

这最终让我想到了我的问题：有没有办法根据特定时区来确定时间戳？即，地板将确保该时区 00:00-23:59 的所有值最终都在特定组中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:50:23.913

您需要将时区偏移从 UTC 转换为秒；然后，您需要在除法和乘法之前从 Unix 时间戳中添加或减去该偏移量，然后再将其加回。

例如：

我们可以在时区 UTC-05:00（美国/东部，或美国/纽约）中建立日期 2012-01-17 的 UTC 值范围：

```
$ timestamp -Z -z -05:00 1358398800 1358485200
1358398800 = Thu Jan 17 00:00:00 2013 -05:00
1358485200 = Fri Jan 18 00:00:00 2013 -05:00
$ timestamp -Z -z 00:00 1358398800 1358485200
1358398800 = Thu Jan 17 05:00:00 2013 +00:00
1358485200 = Fri Jan 18 05:00:00 2013 +00:00
$ 
```

时区偏移距 UTC (5 * 3,600) 为 -18,000 秒，当然，一天有 86,400 秒。

然后我们可以证明`bc`计算应该是：

*   ((utc_time + tz_offset) / secs_per_day) * secs_per_day - tz_offset

例如，我们可以使用`bc`来进行计算：

```
$ bc
scale=0
a=1358398800
b=a+86400
c=-18000
d=86400
((a+c)/d)*d-c
1358398800
((b-1+c)/d)*d-c
1358398800
((b+c)/d)*d-c
1358485200
b
1358485200
quit
$ 
```

如您所见，美国/东部时区 2012-01-17 期间的时间都归入同一组（使用极端时间值演示）。

因此，只要您可以以秒为单位计算时区与 UTC 的偏移量，格林威治子午线以西的时区为负值，其以东的时区为正值，那么您就可以使用显示的计算。

```
SELECT NOW(), FROM_UNIXTIME(FLOOR((UNIX_TIMESTAMP() + (-18000))/86400)*86400 - (-18000)); 
```

概括：

```
FLOOR((timestamp + (offset_in_seconds))/86400)*86400 - (offset_in_seconds) 
```

其中 offset_in_seconds 可以是正数或负数。

# c# - 如何在使用代码合同时记录错误

> ID：14373156
> 
> 赞同：1
> 
> 时间：2013-01-17T06:13:19.177
> 
> 标签：c#, .net, code-contracts

我需要在我的应用程序中记录异常（即使在发布版本中）。我正在使用类的静态方法 Log(Exception ex)`CLog`来记录异常。我也在使用代码合同并同时使用静态和运行时检查。请考虑以下代码：

```
public void editCommit(CEmployee emp)
    {
        Contract.Requires<ArgumentNullException>(null != emp, "Null argument, Parameter name : emp");
        this.employee.Name = emp.Name;
        this.employee.Age = emp.Age;
    } 
```

现在如果我不纠正所有生成的警告，我如何记录`ArgumentNullException`运行时抛出的异常？我需要以相同的方法记录异常。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:46:46.107

合约异常的处理方式应与普通异常不同，因为合约应指定有关您的程序的事实，无论系统状态如何，该事实都应 100% 正确。如果合约失败，这意味着您几乎可以肯定您的代码中存在错误。Code Contracts 团队提供了另一种发现故障的方法，这在这种情况下可能很有用（请参阅手册中的第 7 节“运行时合同行为”）。

您有两个选择：您可以为*ContractFailedEvent*提供一个事件处理程序（在这种情况下我建议这样做），或者为 Contract Runtime 类提供一个完整的替代品（有关该类的更多详细信息，请参阅手册） .

事件处理程序应尽早注册：

```
static void Main(string[] args)
{
    InitialiseContractHandler();
    //...
}

public static void InitialiseContractHandler()
{
    Contract.ContractFailed += (sender, eventArgs) =>
    {
        eventArgs.SetHandled();
        eventArgs.SetUnwind();                  
        MyContractFailureLogger(eventArgs);
        Assert.Fail(eventArgs.Message);
    };
} 
```

我使用此模式的原因是，您还可以从*AssemblyInitializer*方法调用初始化方法以进行单元测试。

将失败设置为以这种方式处理将防止合约运行时本身引发异常，这就是我包含*Assert.Fail()*的原因- 毕竟，您仍然希望终止执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:18:57.367

在调用/任何上层函数中捕获异常？

编辑：示例

```
public void editCommit(CEmployee emp)
    {
        try
        {
           Contract.Requires<ArgumentNullException>(null != emp, "Null argument, Parameter name : emp");
           this.employee.Name = emp.Name;
           this.employee.Age = emp.Age;
         }
         catch( ArgumentNullException x )
         {
             System.Console.Error.WriteLine( "{0}: {1} @", typeof( x ).Name, x.Message );
             System.Console.Error.WriteLine( "{0}", x.StackTrace };
             //now throw the exception again so the caller can react to the error
             throw;
         }
    } 
```

当然，您可以使用任何其他库来记录您的错误，我更喜欢 log4net 。如果您编写交互式程序，请不要忘记通知用户操作失败:-)

# android - 不要在 Android TextView 中以缩写句点换行文本

> ID：14373157
> 
> 赞同：8
> 
> 时间：2013-01-17T06:13:31.060
> 
> 标签：android, textview, word-wrap

有没有办法控制 TextView 选择包装其文本的位置？我遇到的问题是它想在句点处换行 - 所以像“在美国和加拿大可用”这样的字符串可以在 U 和 S 之间的句点之后换行。有没有办法告诉 TextView 不要换行，除非有句号和空格，或者一些控制换行的编程方式？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-20T08:43:19.903

我最终编写了自己的算法来仅在空格上打破文本。我最初使用的是[Paint的](http://developer.android.com/reference/android/graphics/Paint.html)[breakText](http://developer.android.com/reference/android/graphics/Paint.html#breakText(java.lang.CharSequence,%20int,%20int,%20boolean,%20float,%20float[]))方法，但遇到了一些问题（实际上可能在这个版本的代码中得到解决，但没关系）。这不是我最好的代码块，它肯定可以清理一下，但它有效。由于我要覆盖[TextView](http://developer.android.com/reference/android/widget/TextView.html)，所以我只是从[onSizeChanged](http://developer.android.com/reference/android/view/View.html#onSizeChanged(int,%20int,%20int,%20int))方法调用它以确保有一个有效的宽度。

```
private static void breakManually(TextView tv, Editable editable)
{
    int width = tv.getWidth() - tv.getPaddingLeft() - tv.getPaddingRight();
    if(width == 0)
    {
        // Can't break with a width of 0.
        return false;
    }

    Paint p = tv.getPaint();
    float[] widths = new float[editable.length()];
    p.getTextWidths(editable.toString(), widths);
    float curWidth = 0.0f;
    int lastWSPos = -1;
    int strPos = 0;
    final char newLine = '\n';
    final String newLineStr = "\n";
    boolean reset = false;
    int insertCount = 0;

    //Traverse the string from the start position, adding each character's
    //width to the total until:
    //* A whitespace character is found.  In this case, mark the whitespace
    //position.  If the width goes over the max, this is where the newline
    //will be inserted.
    //* A newline character is found.  This resets the curWidth counter.
    //* curWidth > width.  Replace the whitespace with a newline and reset 
    //the counter.

    while(strPos < editable.length())
    {
        curWidth += widths[strPos];

        char curChar = editable.charAt(strPos);

        if(((int) curChar) == ((int) newLine))
        {
            reset = true;
        }
        else if(Character.isWhitespace(curChar))
        {
            lastWSPos = strPos;
        }
        else if(curWidth > width && lastWSPos >= 0)
        {
            editable.replace(lastWSPos, lastWSPos + 1, newLineStr);
            insertCount++;
            strPos = lastWSPos;
            lastWSPos = -1;
            reset = true;
        }

        if(reset)
        {
            curWidth = 0.0f;
            reset = false;
        }

        strPos++;
    }

    if(insertCount != 0)
    {
         tv.setText(editable);
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T06:20:07.697

有一个名为 WrapTogetherSpan 的 spannable。没有关于它的文档，但听起来里面的文本不应该换行。

# visual-studio - 有没有办法从 Visual Studio (C++) 解决方案创建 CMakelist.txt？

> ID：14373158
> 
> 赞同：0
> 
> 时间：2013-01-17T06:13:34.190
> 
> 标签：visual-studio, cmake

我知道可以从 cmake 项目创建 Visual Studio 解决方案。但我想知道是否有一个程序可以反过来（也就是从 Visual Studio 解决方案创建一个 CMakelist.txt）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:01:24.393

谷歌第一次点击“sln to cmakelist”：[vcproj2cmake](http://sourceforge.net/projects/vcproj2cmake/)

# javascript - LiveValidation 测试不起作用

> ID：14373164
> 
> 赞同：0
> 
> 时间：2013-01-17T06:14:19.430
> 
> 标签：javascript, html, validation

我下载了 LiveValidation 以查看它是否适用于我的网站，并且由于某种原因我的测试代码无法正常工作。有人可以帮忙吗？

```
 <html>
<head>
    <title>Test</title>
    <script type="text/javascript" src="livevalidation.js"></script>

</head>
<body>
      <form name="example_form" action="#" method="POST">
        <input style="width:50px;" name="name" type="text" />
        <script>
            var f1 = new LiveValidation('name');
            f1.add(Validate.Presence);

        </script>

        <button class="button gray" type="submit" name="submit">Submit</button>
    </form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:18:13.127

> 首先，通过将其 id 作为第一个参数传入，该字段被设置为 LiveValidation 对象。

您已传入“名称”，这是名称的值。你需要一个身份证。

IE

```
<input id="name" style="width:50px;" name="name" type="text" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-02T07:13:11.217

要将元素添加到 LiveValidation 对象 id 必须在字段中声明。这将使您的代码运行。

`<input style="width:50px;" name="name" id="someIdName" type="text" />`

然后按您指定的 ID 名称添加它的对象：

```
 <script>
        var f1 = new LiveValidation('someIdName');
        f1.add(Validate.Presence);

    </script> 
```

# ios - 使用 TabBar 代码错误在视图控制器之间传递数据

> ID：14373168
> 
> 赞同：-2
> 
> 时间：2013-01-17T06:14:38.173
> 
> 标签：ios, uitabbarcontroller

我正在尝试通过 tabBar 在两个视图控制器之间传递数据。

```
VC1 = search controller. 
```

使用字符串搜索，得到结果数组。
它位于选项卡 1。
它有一个导航控制器，VC1 是根。

`VC2 = Results controller.`

显示来自 VC1 的结果。
它位于选项卡 2。
它有一个导航控制器和 VC2 作为根。

（每个选项卡都有这个架构，Nav Controller = 然后一个 VC 作为根）。

我之前在为 segue 做准备时使用了协议和委托（很好但不使用标签）。

所以我现在有一个从 VC1 中的按钮（在 VC2 中加载结果）到选项卡栏的 segue。

我正在尝试使用 prepareForSegue 传递信息，然后在此方法中添加以下代码

（在确定正确的转场之后）。

但是应用程序崩溃了，我不确定我这样做是否正确。

```
ResultsIndexViewController* vc = [[ResultsIndexViewController alloc] init];
UITabBarController* tbc = [segue destinationViewController];
vc = (ResultsIndexViewController *)[[tbc customizableViewControllers] objectAtIndex:1];
vc.SearchDelegate=self;//crash here (normally works if using regular segue)
vc.resultsArray = _temporaryResultsArray;
vc.originalQuery=_queryArray; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T17:55:36.390

我最终没有使用此代码。相反，我使用标签栏创建的委托来获取信息。我在一个单独的问题中发布了这些步骤，我将在下面链接

# ember.js - 带有 Node.js 的 Ember 数据

> ID：14373169
> 
> 赞同：1
> 
> 时间：2013-01-17T06:14:40.627
> 
> 标签：ember.js, ember-data

这是两部分的问题 -

a) 在尝试配置 Ember-data 以从 Node.js 检索记录时，我们在检索嵌套对象时遇到了问题

假设我们有

```
Post = DS.Model.extend({
  title:DS.attr('string'),
  comments:DS.hasMany('Comment'),
  tags:DS.hasMany('Tag')
});

Tag = DS.Model.extend({
  tag:DS.attr('string'),
  posts:DS.hasMany('Post')
});

Comment = DS.Model.extend({
  post:DS.belongsTo('Post'),
  text:DS.attr('string')
}); 
```

post 的 URL 请求看起来像 'api/posts/:post_id?'

我们如何使评论 URL 看起来像“api/posts/:post_id/comments/:comment_id”？

b) 在多对多关系中，例如 tag<->post，标签的 url 应该看起来就像帖子的 url：'api/posts/:post_id?'

```
'api/tags/:tag_id?' 
```

笔记： '？' :xxx_id 之后表示 xxx_id 是可选的

# watir - 如何下载 Windows 的 Safari 证书？

> ID：14373170
> 
> 赞同：1
> 
> 时间：2013-01-17T06:14:41.677
> 
> 标签：watir

我正在尝试使用 Watir 自动化 Safari 浏览器。我创建了一个苹果帐户并验证了我的帐户。我正在遵循此链接上的说明：[http ://watirwebdriver.com/safari/](http://watirwebdriver.com/safari/)

但我无法创建 Safari 扩展程序。请帮助我。我可以登录到开发人员证书实用程序页面，但不能超出此范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:56:35.083

如果您能提供更多信息，请。我刚刚访问了您提供的 URL，并且能够让 Safari 与 Watir-WebDriver 一起工作。我确实必须执行以下操作，但不确定实际上是哪个步骤使其正常工作。

1.  关闭 Safari。
2.  重新加载 Safari 并重新下载我的证书。
3.  关闭 Safari。
4.  重新加载 Safari 并尝试重新添加扩展。
5.  扩展程序已经预加载并具有适当的证书。

# c++ - 如何在 Mac 和 Netbeans 中创建 Wt 项目

> ID：14373171
> 
> 赞同：0
> 
> 时间：2013-01-17T06:14:44.453
> 
> 标签：c++, macos, web, wt

我已经在我的 Mac 上成功构建并安装了[Wt](http://www.webtoolkit.eu/)，现在我需要构建示例应用程序并运行它。我无法在我的机器上找到所需的库。在示例文档中，它说要执行以下操作：

```
g++ -o hello hello.cc -lwthttp -lwt
$ ./hello --docroot . --http-address 0.0.0.0 --http-port 9090 
```

但我找不到 Include 和 libs 文件，因此我可以在 Netbeans 中添加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:02:37.780

After building Wt run this command in your Wt build dir.

`make install`

I guess it is missing in their tutorial [http://redmine.webtoolkit.eu/projects/wt/wiki/Installing_Wt_on_Mac_OS_X_Leopard](http://redmine.webtoolkit.eu/projects/wt/wiki/Installing_Wt_on_Mac_OS_X_Leopard)

Also to run hello.C you should use 'lboost_signals' flag as said here: [http://www.webtoolkit.eu/wt/src/hello](http://www.webtoolkit.eu/wt/src/hello)

`g++ -o hello hello.cpp -lwthttp -lwt -lboost_signals`

# android - 动画无法解析为类型

> ID：14373172
> 
> 赞同：1
> 
> 时间：2013-01-17T06:14:53.763
> 
> 标签：android, android-animation

我在写

```
Animation anIn; 
```

但动画错误，

```
Animation cannot be resolved to a type; 
```

我不想导入

```
android.view.animation; 
```

我想使用`nineoldandroids`图书馆。因此，将该库项目导入工作空间，然后右键单击我的项目、属性，然后在 Android 选项卡中对工作空间中的库的引用。现在我可以看到 com.nineoldandroids 的导入。但是还存在错误！

怎么了？如何将样本从 android 动画导入更改为`nineoldandroids`导入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T06:26:43.167

正如我在这里看到的：http: [//nineoldandroids.com/](http://nineoldandroids.com/)

只有动画包和动画，例如你必须导入和使用的视图，`ObjectAnimator`而不是`Animation`

可以下载nineoldandroid的源码，发现根本没有`Animation`class。

![在此处输入图像描述](../Images/711be22506c00873bf9be5d3953d0a12.png)

**更新**

Nineoldandroid 库用于支持带有新的（带有蜂窝（api11+））动画api（Animators）的旧设备。因此，要使用`Animation`api lvl 1 附带的类，您不需要使用 oldnineandroid，因为这些类已经在所有的 android 手机中。

如果你想使用新的 API，你只需要使用 Nineoldandroid。

链接了解=）：[http ://www.informit.com/articles/article.aspx?p=1755915](http://www.informit.com/articles/article.aspx?p=1755915)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T06:28:17.397

转到 Eclipse 中的“java 构建路径”并从那里使用添加 jar，也首先删除 android 库引用。

# android - 将数据库 .db 或 .sqlite 存储在 android 的资产中

> ID：14373179
> 
> 赞同：2
> 
> 时间：2013-01-17T06:15:38.320
> 
> 标签：android, android-sqlite

如何将 .db 或 .sqlite 保存在 assets 文件夹中。此时我正在这样做：

```
 @Override
    public void onCreate(SQLiteDatabase db) {
        mDatabase = db;

          SQLiteDatabase.openOrCreateDatabase("assets/"+DATABASE_NAME+".db", null);

        mDatabase.execSQL(FTS_TABLE_CREATE);

    } 
```

但 openOrCreateDatabase 给出错误。我尝试使用 .db 和 .sqlite 但错误是相同的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T06:17:56.450

您无法从资产中打开数据库——您需要先将其复制到本地存储。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T06:25:55.713

在这里，我给你完整的代码，如果你成功请回复

```
public class DataBaseHelper extends SQLiteOpenHelper{
private Context mycontext;

private String DB_PATH = "/data/data/gr.peos/databases/";
//private String DB_PATH = mycontext.getApplicationContext().getPackageName()+"/databases/";
private static String DB_NAME = "BLib.sqlite";//the extension may be .sqlite or .db
public SQLiteDatabase myDataBase;
/*private String DB_PATH = "/data/data/"
                            + mycontext.getApplicationContext().getPackageName()
                            + "/databases/";*/

public DataBaseHelper(Context context) throws IOException  {
    super(context,DB_NAME,null,1);
    this.mycontext=context;
    boolean dbexist = checkdatabase();
    if(dbexist)
    {
        //System.out.println("Database exists");
        opendatabase(); 
    }
    else
    {
        System.out.println("Database doesn't exist");
    createdatabase();
    }

}

public void createdatabase() throws IOException{
    boolean dbexist = checkdatabase();
    if(dbexist)
    {
        //System.out.println(" Database exists.");
    }
    else{
        this.getReadableDatabase();
    try{
            copydatabase();
        }
        catch(IOException e){
            throw new Error("Error copying database");
        }
    }
}
private boolean checkdatabase() {
    //SQLiteDatabase checkdb = null;
    boolean checkdb = false;
    try{
        String myPath = DB_PATH + DB_NAME;
        File dbfile = new File(myPath);
        //checkdb = SQLiteDatabase.openDatabase(myPath,null,SQLiteDatabase.OPEN_READWRITE);
        checkdb = dbfile.exists();
    }
    catch(SQLiteException e){
        System.out.println("Database doesn't exist");
    }

    return checkdb;
}
private void copydatabase() throws IOException {

    //Open your local db as the input stream
    InputStream myinput = mycontext.getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outfilename = DB_PATH + DB_NAME;

    //Open the empty db as the output stream
    OutputStream myoutput = new FileOutputStream("/data/data/gr.peos/databases/BLib.sqlite");

    // transfer byte to inputfile to outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myinput.read(buffer))>0)
    {
        myoutput.write(buffer,0,length);
    }

    //Close the streams
    myoutput.flush();
    myoutput.close();
    myinput.close();

}

public void opendatabase() throws SQLException
{
    //Open the database
    String mypath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(mypath, null, SQLiteDatabase.OPEN_READWRITE);

}

public synchronized void close(){
    if(myDataBase != null){
        myDataBase.close();
    }
    super.close();
} 
```

谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T06:22:52.503

您必须首先检查数据库文件夹中的数据库（什么都没有）

然后你必须将 .db 或 .sqlite 复制到 data/data/databases 文件夹，并且只有你可以打开数据库

这是我的示例代码：

```
public void createDataBase() throws IOException {
     boolean dbExist = checkDataBase();
     //boolean dbExist = false;
    if (dbExist) {
        // do nothing - database already exist
    } else {

        this.getReadableDatabase();
        try {
            copyDataBase();
        } catch (IOException e) {
            throw new Error("Error copying database");
        }
    }

}

// this method will check the existance of database
private boolean checkDataBase() {
    SQLiteDatabase checkDB = null;

    String myPath = DB_PATH + DB_NAME;
    try {
        checkDB = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY);
    } catch (Exception e) {

    }

    if (checkDB != null) {
        checkDB.close();
    }

    return checkDB != null ? true : false;
}

// copy the database file from asset folder to the DDMS database folder
private void copyDataBase() throws IOException {
    // Open your local db as the input stream
    InputStream myInput = _context.getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    // Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    // transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }
    // Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();
}

// open the database
public boolean openDataBase() throws SQLException {
    String mPath = DB_PATH + DB_NAME;
    // Log.v("mPath", mPath);
    db = SQLiteDatabase.openDatabase(mPath, null,
            SQLiteDatabase.CREATE_IF_NECESSARY);
    return db != null;
} 
```

# jquery - Json 到 javascript 对象

> ID：14373189
> 
> 赞同：-1
> 
> 时间：2013-01-17T06:16:48.863
> 
> 标签：jquery, json

`I need help to convert json to javascript object`就`allow me to access`这样 `"json.data.audience.infomation"`_`get the values in the json arrays?`

因为我想用里面的值来做“if else 比较”

这是我的 json 结构：

```
{
            "data": [
                     {
                         "id": "/en/chelsea_fc",
                         "topic": "Chelsea F.C.",
                         "audience": [
                             {
                                 "userid": "100003914111287",
                                 "information": [
                                     {
                                         "category": "Athlete",
                                         "source": "Didier Drogba"
                                     },
                                     {
                                         "category": "Athlete",
                                         "source": "Frank Lampard"
                                     },
                                     {
                                         "category": "Professional sports team",
                                         "source": "Chelsea Football Club"
                                     },
                                     {
                                         "category": "favorite_teams",
                                         "source": "Chelsea Football Club"
                                     }
                                 ]
                             },
                             {
                                 "userid": "100003914111287",
                                 "information": [
                                     {
                                         "category": "Athlete",
                                         "source": "Didier Drogba"
                                     },
                                     {
                                         "category": "Athlete",
                                         "source": "Frank Lampard"
                                     },
                                     {
                                         "category": "Professional sports team",
                                         "source": "Chelsea Football Club"
                                     },
                                     {
                                         "category": "favorite_teams",
                                         "source": "Chelsea Football Club"
                                     }
                                 ]
                             }
                         ],
                         "type": "/soccer/football_team"
                     },
                     {
                         "id": "/en/manchester_united_fc",
                         "topic": "Manchester United F.C.",
                         "audience": [
                             {
                                 "information": [
                                     {
                                         "category": "Athlete",
                                         "source": "Ryan Giggs"
                                     },
                                     {
                                         "category": "Professional sports team",
                                         "source": "Manchester United"
                                     },
                                     {
                                         "category": "favorite_teams",
                                         "source": "Manchester United"
                                     }
                                 ],
                                 "userid": "100003921730958"
                             }
                         ],
                         "type": "/soccer/football_team"
                     }
                 ]
             } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:18:32.203

你可以得到你想要的

```
json.data[0].audience.infomation 
```

请注意，另一个对象被包装在一个数组中。

这是一个*JavaScript*对象，而不是*Java*对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T06:18:53.270

使用 jquery 库的 $.parseJSON。解析后返回一个 JQuery 对象

[http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T06:18:40.007

要将 JSON 转换为 JavaScript，只需对其进行“评估”。我建议[阅读这个简短的教程。](http://www.json.org/js.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T06:49:36.333

您的 json 结构中有数组，因此您必须像这样访问它们：

```
 console.log(jsn.data[0].audience[0].information[0].category);

 output is: **Athlete** 
```

这将`log the category`

在

这是`first array item of information`

这是`first array item of audience`

这是`first array item of data`

小提琴：http: [//jsfiddle.net/JAUDn/](http://jsfiddle.net/JAUDn/)

# python - Django：在模板中访问多对多（反向）

> ID：14373193
> 
> 赞同：1
> 
> 时间：2013-01-17T06:17:09.667
> 
> 标签：python, django, many-to-many, thumbnails, reverse

跟进有关[反向多对多查找](https://stackoverflow.com/questions/9352662/how-to-use-the-reverse-of-a-django-manytomany-relationship)的帖子，我想知道我的项目/图片问题的最佳实践是什么：

我想注册多个项目，用户可以上传（但不是必需的）多个项目图片。

因此我定义了以下两个类：

```
from easy_thumbnails.fields import ThumbnailerImageField

class Project(models.Model):
    name = models.CharField(_('Title'), max_length=100,)
    user = models.ForeignKey(User, verbose_name=_('user'),)
    ...

class ProjectPicture(models.Model):
    project = models.ForeignKey('Project')
    picture = ThumbnailerImageField(_('Image'),
            upload_to='user/project_pictures/', null=True, blank=True,)

    def __unicode__(self):
        return u'%s\'s pictures' % (self.project.name) 
```

因此，对于每个用户，我都会在“仪表板”中显示他们的项目

```
projects = Project.objects.filter(user = logged_user) 
```

它返回带有名称等的项目列表。

现在我想在仪表板表中显示项目的图片。因此，我有两个问题正在寻求建议：

1）课程设置实际上是最好的方法吗？我拆分了如上所示的类，以允许用户在每个项目中上传多张图片。会有更好的方法吗？

2) 如果有图片，如何在模板中显示项目的第一张图片？我是否需要对与项目对应的每个 ProjectPicture 对象进行查询？或者是否有针对该问题的优雅 Django 解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T07:11:39.103

这不是多对多关系，您使用外键。这是正常的设置。要访问您可以使用的模板中的第一张图片`{{ project.projectpicture_set.all.0 }}`，它将生成额外的查询。为避免它使用[prefetch_related](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#prefetch-related)。

# mysql - 查询需要更多时间来执行

> ID：14373196
> 
> 赞同：1
> 
> 时间：2013-01-17T06:17:24.480
> 
> 标签：mysql, sql, performance

1.  查询大约需要 5 分钟到 20 分钟才能执行。
2.  因此，我们遇到了负载峰值。
3.  请帮我重写查询。
4.  还帮助我提高查询的性能。

询问：

```
SELECT DATE(create_time) as createDate, count(url_id) 
  FROM t_notification 
 WHERE domain_id = 185 
   AND type = 12 
   AND create_time >= '2012-12-15' 
GROUP BY createDate 
```

解释

```
explain select DATE(create_time) as createDate, count(url_id) from t_notification where domain_id = 185 and type = 12 and create_time >= '2012-12-15' group by createDate;
    +----+-------------+----------------+------+---------------------------------+----------+---------+-------+---------+----------------------------------------------+
    | id | select_type | table          | type | possible_keys                   | key      | key_len | ref   | rows    | Extra                                        |
    +----+-------------+----------------+------+---------------------------------+----------+---------+-------+---------+----------------------------------------------+
    |  1 | SIMPLE      | t_notification | ref  | FK_notification_domain,idx_test | idx_test | 5       | const | 9189516 | Using where; Using temporary; Using filesort |
    +----+-------------+----------------+------+---------------------------------+----------+---------+-------+---------+----------------------------------------------+
    1 row in set (0.29 sec)

mysql> show create table t_notification\G
*************************** 1\. row ***************************
       Table: t_notification
Create Table: CREATE TABLE `t_notification` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `type` int(11) DEFAULT NULL,
  `content` varchar(512) DEFAULT NULL,
  `create_time` date DEFAULT NULL,
  `domain_id` int(11) DEFAULT NULL,
  `url_id` int(11) DEFAULT NULL,
  `status` int(11) DEFAULT NULL,
  `targetrul_partnerurl_id` int(11) DEFAULT NULL,
  `week_entrances` int(11) DEFAULT NULL COMMENT 'for keyword and target_url',
  PRIMARY KEY (`id`),
  KEY `url_id` (`url_id`),
  KEY `targetrul_partnerurl_id` (`targetrul_partnerurl_id`),
  KEY `FK_notification_domain` (`domain_id`,`id`),
  KEY `idx_test` (`domain_id`,`status`,`type`,`create_time`)
) ENGINE=InnoDB AUTO_INCREMENT=50747991 DEFAULT CHARSET=utf8
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T06:43:57.560

来自[MySQl 文档](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)

> 假设您发出以下 SELECT 语句：mysql> SELECT * FROM tbl_name WHERE col1=val1 AND col2=val2;
> 
> 如果 col1 和 col2 上存在多列索引，则可以直接获取相应的行。如果 col1 和 col2 上存在单独的单列索引，优化器将尝试使用索引合并优化（请参阅第 8.3.1.4 节，“索引合并优化”），或者通过确定哪个索引找到更少的索引来尝试找到最严格的索引行并使用该索引来获取行。
> 
> 如果表有一个多列索引，优化器可以使用索引的任何最左边的前缀来查找行。例如，如果您在 (col1, col2, col3) 上有一个三列索引，则您在 (col1)、(col1, col2) 和 (col1, col2, col3) 上有索引搜索功能。

您没有关于 type 或 create_time 的可用索引。从键 idx_test 中删除状态或在 (type, create_time) 或 type 和 create_time 上分别创建新索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:43:56.580

**考虑在domain_id** 和**type**列上创建复合索引，因为它们直接在 where 子句中使用。它肯定会提高您的查询的性能。

# java - 如何将字符串日期转换为日期？

> ID：14373197
> 
> 赞同：-1
> 
> 时间：2013-01-17T06:17:31.220
> 
> 标签：java, string, date, date-format

我已经完成了以下代码：

```
String str = "2013-01-17 11:26";
DateFormat dateFormat = new SimpleDateFormat("yyyy-mm-dd hh:MM");
Date date = dateFormat.parse(str);
System.out.println("str :"+str);
System.out.println("Date :"+date); 
```

**输出**

```
str :21-01-2013 11:26 
Date :Sat Feb 21 11:01:00 IST 2015 
```

但有些不对劲。我希望与字符串日期相同。即 2013 年 1 月 21 日星期四 11:26:00 IST

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T06:19:55.893

您使用了错误的格式。`MM`为`month`,为 ,`mm`为`minutes`, 为`hours`使用`HH`. 参见[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)各种其他格式。

将格式更改为： -

```
DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm"); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-17T06:46:04.890

以下代码应该可以正常工作：

```
try{
String str = "2013-01-17 11:26";
DateFormat dateFormat = new SimpleDateFormat("yyyy-mm-dd hh:mm");
Date date = (Date)dateFormat.parse(str);
System.out.println("str :"+str);
System.out.println("Date :"+date);
}
catch(Exception e){
   e.getStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-17T12:47:10.883

仅使用 DateFormat 类：

```
ateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd hh:mm"); 
```

# c# - 如何将 .NET MVC 控件添加到 umbraco？

> ID：14373199
> 
> 赞同：2
> 
> 时间：2013-01-17T06:17:34.437
> 
> 标签：c#, .net, controls, umbraco

如何将 MVC 控件添加到 umbraco？

我知道在网络表单中，您将 aspx 文件复制到 umbraco 的 usercontrols 文件夹中，并将控件的 dll 文件复制到 umbraco 的 bin 文件夹中。

但我不知道如何为 MVC 控件执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:23:18.827

在解决方案资源管理器中转到控制器文件夹并右键单击它然后添加控制器并在其中编写您想要的代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T23:03:45.560

我建议阅读这些以了解 MVC 在 Umbraco 中的工作原理：

[http://shazwazza.com/post/native-mvc-support-in-umbraco-coming-very-soon/](http://shazwazza.com/post/native-mvc-support-in-umbraco-coming-very-soon/)

[http://umbraco.com/follow-us/blog-archive/2012/10/30/getting-started-with-mvc-in-umbraco-410.aspx](http://umbraco.com/follow-us/blog-archive/2012/10/30/getting-started-with-mvc-in-umbraco-410.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T15:56:49.453

我认为您的意思是以下两者之一：

**1\. 子动作**

阅读： http: [//our.umbraco.org/documentation/reference/Mvc/child-actions](http://our.umbraco.org/documentation/reference/Mvc/child-actions)

它的工作方式与 Mvc 中的子操作相同，只是您的控制器需要`SurfaceControllers`

**2\. 宏部分**

如果您需要的是一个简单的可重复使用的用户控件，那么您只需要使用部分。您可以在 Views/MacroPartials 中创建一个 .cshtml 文件，然后创建登录 /umbraco 并创建一个引用该部分的宏。

您可以使用 @Umbraco.RenderMacro("myMacro") 渲染它

# node.js - 刷新内容而不刷新页面

> ID：14373214
> 
> 赞同：1
> 
> 时间：2013-01-17T06:18:42.980
> 
> 标签：node.js, socket.io

您好，我已经使用 socket.io、expressjs 和 mongoose 开发了聊天应用程序，它运行良好。它会在几秒钟后刷新并从数据库中获取新客户端（如果存在）。问题是用户可以感觉到 div 正在刷新。而且还需要一些时间来响应。如何避免这种情况。这是我的代码 **这是我的服务器端代码**

```
 setInterval(function () {
  var allOnLine;
  allOnLine = io.sockets.clients();
   for (var client in allOnLine) {
    if (allOnLine[client].username == "undefined") {
    continue;
    } else {
    notifyAll(allOnLine[client].username);
    }
 }
 }, 50000); 
```

这是通知所有方法

```
function notifyAll(userName) {
      contactModel.find({'userId':userName}, (function (err, contactModel) {
         usernames = [];
         var contacts = contactModel;
         for (var a = 0; a < contacts.length; a++) {
            usernames[a] = contacts[a].contactId;
         }
         var allOnLine;
        allOnLine = io.sockets.clients();
        for (var client in allOnLine) {
            if (allOnLine[client].username == "undefined") {
                continue;
            } else {
                for (var i = 0; i < usernames.length; i++) {
                    if (allOnLine[client].username == usernames[i]) {
                        usernames[i] = usernames[i] + " -On";
                    }

        allOnLine[client].username);
                }

            }
        }
        io.sockets.to(userName).emit('updateusers', usernames);

        }));
    } 
```

**这是我的客户代码**

```
socket.on('updateusers', function(usernames) {
     jQuery('#usernames').html('');
     jQuery.each(usernames, function(key, value) {
        jQuery('#usernames').append('<div class="chatContact" id="chatLink" onclick="privateChat(\''+value+'\')">' );
}} 
```

任何帮助我也发布了这个问题但没有答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:10:12.143

您的问题是您删除了用户名中的所有内容，然后您写入了所有联系人。您最好从 $('#usernames') 中删除离线联系人，然后将在线联系人添加到该列表中。我编写了一些函数来向您展示其功能。我创建了在线联系人的 html 列表，还创建了一系列新的在线联系人。这是代码：

```
<div id="u">
  <div class="d" onclick="chat('asd1')">asd1</div>
  <div class="d" onclick="chat('asd12')">asd12</div>
  <div class="d" onclick="chat('asd13')">asd13</div>
  <div class="d" onclick="chat('asd142')">asd14</div>
</div> 
```

这里有 DOM 准备好后需要运行的 javascript：

```
var onlineUsernames = ["asd211","asd12","asd13","asd14"];
var usernamesContainerID = 'u';
var $usernamesContainer = $('#'+usernamesContainerID);
function extractUsernameFromAttr(onclickValue)
{
  return onclickValue.split("'")[1];
}
function buildExistingUsernames($userDivs)
{
    var existingUsernames = [];
  $userDivs.each(function(index,value){
    var username = extractUsernameFromAttr($userDivs[index].getAttribute('onclick'));
    existingUsernames.push(username);
  })
  return existingUsernames;
}
function removeUserFromList($user)
{
     document.getElementById(usernamesContainerID).removeChild($user);
}
function addUserToList(value)
{
    $('<div/>',{
         onclick:"chat('"+value+"')",
         class :'d',
         text:value
   }).appendTo($usernamesContainer); 
}

function deleteOfflineContacts(existingUsernames,usernames,$userDivs)
{
  $.each(existingUsernames,function(index,value)
  {
     if($.inArray(value,usernames)==-1)
     {
        removeUserFromList($userDivs[index]);
     }       
  })
}
function addOnlineContacts(existingUsernames,usernames)
{
 $.each(usernames,function(index,value)
  {
     if($.inArray(value,existingUsernames)==-1)
     {
        addUserToList(value);
     }         
  })

}
function update($userDivs)
{
  var existingUsernames = buildExistingUsernames($userDivs);
  deleteOfflineContacts(existingUsernames,onlineUsernames,$userDivs);
  addOnlineContacts(existingUsernames,onlineUsernames);  
}
var $userDivs = $usernamesContainer.children("div");
setTimeout(function()
{
   update($userDivs);
},3000); 
```

如果您需要它，这里是一个工作示例：http: [//jsfiddle.net/9gRyQ/2/](http://jsfiddle.net/9gRyQ/2/)

# php - 为什么我不能在 Dreamweaver CS6 中保存 PHP 表单变量绑定？

> ID：14373217
> 
> 赞同：0
> 
> 时间：2013-01-17T06:18:53.337
> 
> 标签：php, dreamweaver

我之前在 Adob​​e 的会员论坛上问过这个问题，但似乎很难得到任何回应。他们的网站今天太慢了，几乎无法使用。

我正在尝试将表单变量绑定添加到 PHP 文档，但每次打开菜单后，输入我的姓名并按 OK，它不会显示在我的 Bindings 框中。

这是发生的地方：

[![http://i.imgur.com/w2u5G.png](../Images/3601165c6b400ca371a38f1945339987.png)](https://i.imgur.com/w2u5G.png)

然后什么也没有发生：

[![http://i.imgur.com/MKYT6.png](../Images/700d642a5a0ea6fd71b49ed99ed6e398.png)](https://i.imgur.com/MKYT6.png)

谁能告诉我我在这里做错了什么？或者我还没有做什么？这看起来像一个错误吗？

不确定我是否足够详细地描述了这个问题。非常感谢任何回应。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:45:41.997

通过谷歌搜索通过网络搜索我偶然发现了 2010 年 adobe 论坛中的一个论坛条目

这是 url[表单变量没有出现在 Bindings 面板中](http://forums.adobe.com/thread/748495)

这可能包括许多其他不相关的问题

1.) 你的 wamp/xamp 服务器在吗？还是阿帕奇？

2.) 你要绑定的php文件有**`.php`**扩展名吗？

3.) 请按照以下步骤操作

> 在代码视图中的任意位置添加**`<?php ?>`**保存文档 确保将文档保存为扩展名为“.php”的文件 刷新 Desgin 视图（在实时视图上单击 2x） 查看 Bindings 选项卡，它应该与上面的示例 1 完全相同如果没有，请关闭文档并重新打开它

4.) 禁用 liveView

5.) 删除(_notes) 文件夹下的**“.mno”文件。**仅带有 .mno 扩展名的“无名称”文档就足够了。之后您将能够创建这些表单变量。

这些来自 lynda.com 的 php 和 cs5 教程

**尝试 URL 中提到的这些建议**

# activemq - 从多个订阅者仅将消息传递给一个消费者

> ID：14373218
> 
> 赞同：0
> 
> 时间：2013-01-17T06:18:54.110
> 
> 标签：activemq, message-queue

我正在寻找一种方法来实现这一目标。

假设我有 10 个节点订阅了同一个队列。其中一个发布消息。但我希望消息仅传递到所有连接的节点中的一个节点。

此外，该节点将决定是否需要更多节点来处理相同的事情，然后它将再次发布它并获得额外的帮助。

ActiveMQ 甚至有可能吗？如果不是，还有什么适合这个要求？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:10:19.650

这看起来像 ActiveMQ 队列的默认行为。只需将消息放在那里，一个连接的消费者就会得到它。

不要将它与发布/订阅，即主题混淆。如果您将多个订阅者连接到一个主题，那么所有人都会收到相同的消息。

# mysql - 如何有效地从大表中获取随机行？

> ID：14373220
> 
> 赞同：2
> 
> 时间：2013-01-17T06:19:02.890
> 
> 标签：mysql, sql

> **可能重复：**
> [如何在 MySQL 中选择随机行？](https://stackoverflow.com/questions/5104141/how-do-i-select-random-rows-in-mysql)

好的，所以我有一个存储游戏数据的表，它达到了 700 万行。

我需要一种有效的方法来选择随机行。

这是我到目前为止所尝试的：

```
SELECT `id` FROM `information` ORDER BY RAND() LIMIT 1; 
```

相当合乎逻辑的查询。运行需要*8 秒*。完全不能接受。

第二次尝试：

```
SELECT FLOOR(RAND()*COUNT(`id`)) INTO @target FROM `information`;
SELECT `id` FROM `information` LIMIT @target,1; 
```

由于第二个查询中的变量出现语法错误而失败。

第三次尝试：

```
SELECT `id` FROM (SELECT `id` FROM `information`) `a` ORDER BY RAND() LIMIT 1 
```

这里的想法是去除所有其他字段，因为它们是不必要的体积。它工作了一半，将时间缩短到 6 秒。不过还是太长了。

还有……我出去了。我想不出任何其他方式（但现在是凌晨 1 点......），所以任何建议都将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:23:46.587

你能先生成随机数吗？假设你只需要一排，

从信息中选择（范围内的随机数）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:29:01.530

如果您使用的是`INNODB`引擎，我之前读过的一篇文章建议最好先计算记录数，`COUNT(*)`因为引擎不会缓存表的计数，不像`MyISAM`，

```
DECLARE @count INT;
DECLARE @offset INT;

SET @count = (SELECT COUNT(*) FROM `information`);
SET @offset = CONVERT(FLOOR(RAND() * @count), SIGNED);

PREPARE mystatement FROM "SELECT `id` FROM `information` ORDER BY RAND() LIMIT ?, 1";
EXECUTE mystatement USING @offset;
DEALLOCATE PREPARE mystatement; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/90b1f/2)

*免责声明*：我使用的查询在 3m 记录上完全按照需要执行。我不知道它在 7m 记录上的表现如何。

# servicestack - 无标准休息的 ServiceStack 服务 + 整体混乱

> ID：14373231
> 
> 赞同：1
> 
> 时间：2013-01-17T06:19:59.293
> 
> 标签：servicestack

我真的很想将 servicestack 用于我需要编写的服务，但我遇到了一个心理障碍，我的思想围绕着它是如何工作的，更准确地说，我如何让它为我的意图和目的工作。我没有强大的asp背景，主要是后端，所以也许这就是心理障碍的原因。

我有一个遗留平台，我通过本机 c++ api 连接到该平台。我已将 cli 中的本机 api 扭曲为 .net 类库，这相当于将 Todo repo 注入样本中。

来回移动的数据在类库中作为值结构公开。例如帐户将被定义如下：

```
struct Account{
  int id;
  string name;
  string password;
  ...
} 
```

订单将是这样的：

```
struct Order{
  int orderId;
  int account;
  string comment;
  ...
} 
```

该库为与上述类似定义的各种不同对象公开了许多功能和操作。我想了解的是：

1）如何在容器中注册 api？更准确地说，我不明白 Register 方法如何知道它应该得到什么类型。在 todo 示例中，所有内容都在同一个程序集中定义，因此很难看到后端是如何注入的。

2）有没有办法在框架中管理后端的生命周期。我可以使它成为所有连接的单例吗？

3）我是否必须将我的结构包装在将字段映射到请求的类中。不清楚请求对象是如何定义的，似乎请求的内容应该是可以转换为操作的字段名/类型的 url 的字段。如果有一种方法不必包装，那么我该如何限制在 api 中公开哪些字段，哪些不公开。

4）我是否必须为每种数据类型创建一个服务，所以在上面的结构中，我必须为订单实现一项服务，为账户实现一项服务，有没有办法将它们组合成一个。我喜欢 ss 可以转换为通过 mq 进行通话，这会使组合服务在未来难以通过 mq 进行操作，这种方法有什么缺点。

5）最后，我想公开 api 中的操作，afaik 会违反其余合同。类似于：存档帐户，然后......这将是一个返回成功/失败状态的操作，没有更新/删除等。本质上，通过 http 请求驱动一些功能。这在 ss 中是否可能，如果可以，以这种方式使用它是否会对框架的操作产生任何破坏性后果...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:25:29.870

1) 要注册您的 API，您需要将内置 IoC 与 Funq 一起使用。

```
container.Register(c => new LegacyApiService())
       .ReusedWithin(ReuseScope.Container); 
```

Funq 能够在您的 API 服务中自动连接这些服务。看看[https://github.com/ServiceStack/ServiceStack/wiki/The-IoC-container](https://github.com/ServiceStack/ServiceStack/wiki/The-IoC-container)。

您还可以使用 TryResolve 方法解析任何可用容器。

2）您可以通过在注册时指定 ReuseScopes 来使用 Funq 控制对象的生命周期。你会想看看

```
ReuseScope.Container: Singleton scope 
// a instance is used per application lifetime 
```

3）您将需要为您的结构创建计划旧类（DTO）。这对于 ServiceStack 是必需的。您的所有 DTO 公共属性都将被序列化。您还可以选择使用 DataMemberAttribute 和 IgnoreDataMemberAttribute 来控制要序列化的公共属性。

4) 每个请求 DTO 都需要一个服务。但是，您可以将此代码保持在最低限度并调用集中式业务层。这是必要的，因为每个路由 + 动词都需要有不同的操作，因此每个 DTO 有一个服务类。

5) 您可以轻松定义更多路由，并且没有什么会迫使您遵守 REST 规则，您可以自由地实现您认为合适的 HTTP 动词。您可以轻松地在 GET 上创建专门的路由来执行归档等操作。这里没有使人衰弱的后果，只是可能会让您的 API 消费者感到困惑。只要确保每个人都清楚 API 如何与文档一起工作。

# actionscript-3 - Flex 柱形图叠加堆叠顺序

> ID：14373238
> 
> 赞同：1
> 
> 时间：2013-01-17T06:20:37.847
> 
> 标签：actionscript-3, apache-flex, charts, flex-charting, flex-charts

我在 flex 中有一个柱形图，它有很多列，用户可以选择按列顺序显示或叠加显示。根据用户屏幕，它使图表更具可读性。但是，然后我可以根据数据进行任何调用以更改叠加顺序。即最大的数据列在后面，被下一个最大的列覆盖，依此类推，直到最小的列位于顶部。当前默认行为一些小列被较大的列所掩盖，我不想更改 alpha 值来执行此操作。（首先感谢[flashharry！](http://forums.adobe.com/people/flashharry!)因为我在一些讨论论坛中看到这个[问题2-3 次，但在任何地方都没有回答）。](http://forums.adobe.com/message/257237)这在弹性柱形图中可能吗？？？

任何帮助将不胜感激。

提前致谢..

@Serge他

代码示例：- 在下面的代码中，最近两个月的利润小于费用，所以我们看不到该系列，因为它在费用系列之后。我希望更大的价值永远落后于较小的价值

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
                       xmlns:s="library://ns.adobe.com/flex/spark" 
                       xmlns:mx="library://ns.adobe.com/flex/mx">
    <fx:Script>
        <![CDATA[

            import mx.collections.ArrayCollection;
            [Bindable]
            public var expenses:ArrayCollection = new ArrayCollection([
                {Month:"Jan", Profit:2000, Expenses:1500},
                {Month:"Feb", Profit:1000, Expenses:200},
                {Month:"Mar", Profit:1100, Expenses:500},
                {Month:"Apr", Profit:1300, Expenses:900},
                {Month:"May", Profit:900, Expenses:1200},
                {Month:"June", Profit:1500, Expenses:2500}
            ]);

        ]]>
    </fx:Script>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <s:BorderContainer width="100%" height="100%" >
        <s:layout>
            <s:VerticalLayout horizontalAlign="center"/>
        </s:layout>
        <mx:ColumnChart id="myChart" width="65%"
                      dataProvider="{expenses}" 
                      showDataTips="true" 
                      type="overlaid"
                      >
            <mx:horizontalAxis>
                <mx:CategoryAxis 
                    dataProvider="{expenses}" 
                    categoryField="Month"
                    />
            </mx:horizontalAxis>
            <mx:series>
                <mx:ColumnSeries 
                    yField="Profit" 
                    displayName="Profit"
                    >
                    <mx:fill>
                        <s:SolidColor color="0x00ff00"/>
                    </mx:fill>
                    </mx:ColumnSeries>
                <mx:ColumnSeries 
                    yField="Expenses"
                    displayName="Expenses"
                    >
                    <mx:fill>
                        <s:SolidColor color="0xff0000"/>
                    </mx:fill>
                    </mx:ColumnSeries>
            </mx:series>
        </mx:ColumnChart>
        <mx:Legend dataProvider="{myChart}"/>
        <mx:DataGrid dataProvider="{expenses}" editable="true">
            <mx:columns>
                <mx:DataGridColumn dataField="Month" editable="true"/>
                <mx:DataGridColumn dataField="Profit" editable="true"/>
                <mx:DataGridColumn dataField="Expenses" editable="true"/>
            </mx:columns>
        </mx:DataGrid>
    </s:BorderContainer>
</s:Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T21:53:21.957

我研究了你的问题，深入初始化 ColumnChart 组件。有一个功能，即系列中的所有列都放置在单独的层中。因此，绿色列在顶部或红色。无法从系列中更改一列的父级...恐怕您必须覆盖组件的基本行为并将所有列放在同一个容器中并对它们的深度进行排序。我画了一个例子：

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" width="900" height="600">
    <fx:Script>
        <![CDATA[
            import mx.charts.series.items.ColumnSeriesItem;
            import mx.collections.ArrayCollection;

            [Bindable]
            public var expenses:ArrayCollection = new ArrayCollection([
                {Month:"Jan", Profit:200, Expenses:100, Expenses2:50},
                {Month:"Feb", Profit:1000, Expenses:2000, Expenses2:500},
                {Month:"Mar", Profit:1100, Expenses:500, Expenses2:100},
                {Month:"Apr", Profit:1300, Expenses:900, Expenses2:1000},
                {Month:"May", Profit:900, Expenses:1200, Expenses2:1000},
                {Month:"June", Profit:1000, Expenses:2000, Expenses2:1500}
            ]);

            private var items:Array = [];

            private function init():void
            {
                items = [];
                for (var i:int=0; i<myChart.series.length; i++)
                {
                    var series:ColumnSeries = myChart.series[i] as ColumnSeries;
                    for (var j:int=0; j<series.items.length; j++)
                    {
                        if (!items[j])
                            items[j] = [];

                        var item:ColumnSeriesItem = series.items[j] as ColumnSeriesItem;
                        items[j][i] = item;
                        series.parent.addChild(item.itemRenderer as DisplayObject);
                    }
                }
                sort();
            }

            private function sort():void
            {
                var h:Number = myChart.height - 50;
                for (var i:int=0; i<items.length; i++)
                {
                    var group:Array = items[i];
                    group.sort(sortFunction);
                    for (var j:int=0; j<group.length; j++)
                    {
                        var item:ColumnSeriesItem = group[j] as ColumnSeriesItem;
                        item.itemRenderer.parent.setChildIndex(item.itemRenderer as DisplayObject, group.length - j - 1);
                        item.min = NaN;
                        if (j > 0)
                            item.min = h - group[j-1].itemRenderer.height;
                    }
                }
            }

            private function sortFunction(item1:ColumnSeriesItem, item2:ColumnSeriesItem):int 
            {
                var yValue1:int = item1.item[Object(item1.element).yField];
                var yValue2:int = item2.item[Object(item2.element).yField];
                return (yValue1 < yValue2) ? -1 : (yValue1 > yValue2) ? 1 : 0;
            }
        ]]>
    </fx:Script>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <s:BorderContainer width="100%" height="100%" >
        <s:layout>
            <s:VerticalLayout horizontalAlign="center"/>
        </s:layout>
        <mx:ColumnChart id="myChart" width="65%"
                        dataProvider="{expenses}" 
                        showDataTips="true" 
                        type="overlaid"
                        updateComplete="init()"
                        >
            <mx:horizontalAxis>
                <mx:CategoryAxis 
                    dataProvider="{expenses}" 
                    categoryField="Month"
                    />
            </mx:horizontalAxis>
            <mx:series>
                <mx:ColumnSeries
                    yField="Profit" 
                    displayName="Profit"
                    >
                    <mx:fill>
                        <s:SolidColor color="0x00ff00"/>
                    </mx:fill>
                </mx:ColumnSeries>
                <mx:ColumnSeries 
                    yField="Expenses"
                    displayName="Expenses"
                    >
                    <mx:fill>
                        <s:SolidColor color="0xff0000"/>
                    </mx:fill>
                </mx:ColumnSeries>
                <mx:ColumnSeries 
                    yField="Expenses2"
                    displayName="Expenses2"
                    >
                    <mx:fill>
                        <s:SolidColor color="0xffff00"/>
                    </mx:fill>
                </mx:ColumnSeries>
            </mx:series>
        </mx:ColumnChart>
        <mx:Legend dataProvider="{myChart}"/>
        <mx:DataGrid dataProvider="{expenses}" editable="true">
            <mx:columns>
                <mx:DataGridColumn dataField="Month" editable="true"/>
                <mx:DataGridColumn dataField="Profit" editable="true"/>
                <mx:DataGridColumn dataField="Expenses" editable="true"/>
                <mx:DataGridColumn dataField="Expenses2" editable="true"/>
            </mx:columns>
        </mx:DataGrid>
    </s:BorderContainer>
</s:Application> 
```

# android - 仅从 url 播放视频一秒钟并在 android 上崩溃

> ID：14373240
> 
> 赞同：1
> 
> 时间：2013-01-17T06:20:45.370
> 
> 标签：android, android-webview

我有一个视频网址。当我尝试使用任何视图（videoView、MediaPlayer、WebView）播放视频时，它只会播放一秒钟并且总是崩溃。我检查了视频信息，它是

`Stream 0: Type: Video Codec: H264 - MPEG-4 AVC (part 10) (avc1) Resolution: 856x368 Frame rate: 23.976000 Decoded format: Planar 4:2:0 YUV`

`Stream 1 Type: Audio Code: MPEG AAC Audio (mp4a) Channels: Stereo Sample rate: 44100 Hz`

所以，请告诉我播放视频有什么问题，我卡在这里，尝试了很多搜索但没有成功。

# objective-c - setRegion:animated: 不改变区域

> ID：14373243
> 
> 赞同：0
> 
> 时间：2013-01-17T06:21:12.920
> 
> 标签：objective-c, ios6, mkmapview

我正在尝试使用以下代码获取用户位置并将其显示在 mapView 中`iOS6`：

```
- (void) locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations{
if (locations.count>0) {
    for (CLLocation *location in locations) {
        [locationList addObject:location];

        if (location != nil) {
            // Zoom to the current user location.
            MKCoordinateRegion userLocation =[mapView regionThatFits: MKCoordinateRegionMakeWithDistance(location.coordinate, 150.0, 150.0)];
            [mapView setRegion:userLocation animated:YES];
            NSLog(@"%f,%f", mapView.centerCoordinate.latitude,mapView.centerCoordinate.longitude);
            NSLog(@"%f,%f", mapView.region.span.latitudeDelta,mapView.region.span.longitudeDelta);
        }
    }
} 
```

}

但是位置更新后，`[mapView setRegion:userLocation animated:YES]`不会对区域进行任何更改`mapView`，但用户位置可以显示为蓝点。像这样的`NSLog`打印：

```
nan,nan
0.000000,360.000000 
```

这意味着没有任何改变。我检查了大多数与地图相关的问题，他们只是调用此方法并在地图中心获取位置显示。

我想知道为什么我怎样才能把用户位置放到地图中心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:43:11.323

您可以打开 MKMapView 跟踪模式

```
[mapView setTrackingMode:MKMapViewTrackingModeFollowsUser]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T03:09:48.647

你可以试试这个：

```
mMapView.showsUserLocation = YES; 
```

# java - Java 3d ColorCube 序列化错误

> ID：14373248
> 
> 赞同：0
> 
> 时间：2013-01-17T06:22:04.480
> 
> 标签：java, serialization, java-3d

尝试编写一个程序来创建 java 3d 对象（如球体、颜色立方体...）的二进制文件以供以后使用。但在这样做之前，我必须序列化对象，但我不能这样做，发生错误。

让我们看看程序----

以下类是创建 ColorCube 对象并写入二进制文件的主类

```
import com.sun.j3d.utils.geometry.ColorCube;
import java.io.*;

public class SerializeDemo {

   public static void main(String [] args) {

   DoSerialize e = new DoSerialize();
   e.cc = new ColorCube(1.4);

   try {
     FileOutputStream fileOut = new FileOutputStream("e://objectFile.txt");
     ObjectOutputStream out = new ObjectOutputStream(fileOut);

     try {

     out.writeObject(e);
     }catch(NotSerializableException i)
       {i.printStackTrace();}

     out.close();
     fileOut.close();
    }catch(IOException i)
    {i.printStackTrace();}
  }
} 
```

这是可序列化的类---

```
import com.sun.j3d.utils.geometry.ColorCube;

public class DoSerialize implements java.io.Serializable {
  public ColorCube cc;
} 
```

错误是----

```
java.io.NotSerializableException: com.sun.j3d.utils.geometry.ColorCube
  at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1180)
  at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
  at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
  at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
  at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
  at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
  at SerializeDemo.main(SerializeDemo.java:25)
BUILD SUCCESSFUL (total time: 2 seconds) 
```

那么如何克服这个问题呢？请帮忙。谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:15:40.337

不幸的是，您尝试序列化的对象没有实现可序列化接口，因此您无法通过标准 Java 方式对其进行序列化。

您必须手动序列化对象，在这种情况下，这意味着获取所有公共属性并将它们保存到文件中，然后以相同的顺序读取它，或者尝试使用反射来获取所有可访问的成员并找到 getter。

如果用于许多对象，第一种方式非常繁琐，第二种方式相对较慢。不幸的是，它们都不能保证它会正常工作。

# ruby-on-rails - Rspec 在 any_instance 上精确地模拟（n）次

> ID：14373250
> 
> 赞同：14
> 
> 时间：2013-01-17T06:22:17.407
> 
> 标签：ruby-on-rails, rspec, rspec-rails

我想在 rspec 测试中使用 Mocks。

```
klass.any_instance.should_receive(:save).exactly(2).times.and_return(true) 
```

但我收到一条错误消息，例如：

**'<#Object> 已收到消息“保存”，但 <#Object> 已收到消息“保存”**

临时我使用存根，但为了准确性想使用模拟

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-17T08:40:02.710

的[文档](https://www.relishapp.com/rspec/rspec-mocks/v/2-6/docs/message-expectations/expect-a-message-on-any-instance-of-a-class)是`any_instance.should_receive`：

```
Use any_instance.should_receive to set an expectation that one (and only one)
instance of a class receives a message before the example is completed. 
```

因此，您已指定只有一个对象应接收`save`两次调用，而不是 2 个对象应接收`save`一次调用。

如果您想计算不同实例完成的调用，则必须具有[创造性](https://stackoverflow.com/questions/9800992/how-to-say-any-instance-should-receive-any-number-of-times-in-rspec)，例如：

```
save_count = 0
klass.any_instance.stub(:save) { save_count+=1 }
# run test
save_count.should == 2 
```

# ruby - Ruby 有没有好的 openCL 包装器？

> ID：14373252
> 
> 赞同：14
> 
> 时间：2013-01-17T06:22:23.423
> 
> 标签：ruby, opencl, gpu

我知道：

[https://github.com/lsegal/barracuda](https://github.com/lsegal/barracuda)

自 01/11 以来未更新

和

[http://rubyforge.org/projects/ruby-opencl/](http://rubyforge.org/projects/ruby-opencl/)

自 03/10 以来没有更新。

这些项目死了吗？或者它们只是因为它们的功能而没有改变，而 OpenCL/Ruby 从那时起就没有改变。有人在使用这些项目吗？运气好的话？

如果没有，你能推荐另一个用于 Ruby 的 opencl gem 吗？或者这种电话通常是如何完成的？只需从 Ruby 调用原始 C？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-21T15:16:25.933

您可以尝试[opencl_ruby_ffi](http://rubygems.org/gems/opencl_ruby_ffi)，它是积极开发的（由我的一位同事）并且与 OpenCL 1.2 版配合得很好。OpenCL 2.0 也应该很快就会推出。

```
sudo gem install opencl_ruby_ffi 
```

[在 Khronos 论坛](https://www.khronos.org/message_boards/showthread.php/9340-OpenCL-Ruby-Bindings)中，您可以找到一个展示其工作原理的简单示例：

```
require 'opencl_ruby_ffi'

# select the first platform/device available
# improve it if you have multiple GPU on your machine
platform = OpenCL::platforms.first
device = platform.devices.first

# prepare the source of GPU kernel
# this is not Ruby but OpenCL C
source = <<EOF
__kernel void addition(  float2 alpha, __global const float *x, __global float *y) {\n\
  size_t ig = get_global_id(0);\n\
  y[ig] = (alpha.s0 + alpha.s1 + x[ig])*0.3333333333333333333f;\n\
}
EOF

# configure OpenCL environment, refer to OCL API if necessary
context = OpenCL::create_context(device)
queue = context.create_command_queue(device, :properties => OpenCL::CommandQueue::PROFILING_ENABLE)

# create and compile the OpenCL C source code
prog = context.create_program_with_source(source)
prog.build

# allocate CPU (=RAM) buffers and 
# fill the input one with random values
a_in = NArray.sfloat(65536).random(1.0)
a_out = NArray.sfloat(65536)

# allocate GPU buffers matching the CPU ones
b_in = context.create_buffer(a_in.size * a_in.element_size, :flags => OpenCL::Mem::COPY_HOST_PTR, :host_ptr => a_in)
b_out = context.create_buffer(a_out.size * a_out.element_size)

# create a constant pair of float
f = OpenCL::Float2::new(3.0,2.0)

# trigger the execution of kernel 'addition' on 128 cores
event = prog.addition(queue, [65536], f, b_in, b_out, 
                      :local_work_size => [128])
# #Or if you want to be more OpenCL like:
# k = prog.create_kernel("addition")
# k.set_arg(0, f)
# k.set_arg(1, b_in)
# k.set_arg(2, b_out)
# event = queue.enqueue_NDrange_kernel(k, [65536],:local_work_size => [128])

# tell OCL to transfer the content GPU buffer b_out 
# to the CPU memory (a_out), but only after `event` (= kernel execution)
# has completed
queue.enqueue_read_buffer(b_out, a_out, :event_wait_list => [event])

# wait for everything in the command queue to finish
queue.finish
# now a_out contains the result of the addition performed on the GPU

# add some cleanup here ...

# verify that the computation went well
diff = (a_in - a_out*3.0)
65536.times { |i|
  raise "Computation error #{i} : #{diff[i]+f.s0+f.s1}" if (diff[i]+f.s0+f.s1).abs > 0.00001
}
puts "Success!" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T22:43:21.347

您可能希望将任何您想要的 C 功能打包为 gem。这非常简单，通过这种方式，您可以将所有 c 逻辑包装在一个特定的命名空间中，您可以在其他项目中重用该命名空间。

[http://guides.rubygems.org/c-extensions/](http://guides.rubygems.org/c-extensions/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-03T11:20:15.613

如果你想用 GPU 做高速计算，Cumo / NArray 是一个不错的选择。Cumo 具有与 NArray 相同的接口。虽然它是 cuda 而不是 opencl。

[https://github.com/sonots/cumo](https://github.com/sonots/cumo)

# java - 一种“重启”JVM的方法

> ID：14373258
> 
> 赞同：1
> 
> 时间：2013-01-17T06:22:54.767
> 
> 标签：java, jvm, tools.jar

> **可能重复：**
> [有什么方法可以“重启”JVM？](https://stackoverflow.com/questions/259343/any-way-to-reboot-the-jvm)

我在我们的 JRE /lib/ext 文件夹中添加了 tools.jar，我需要在 windows 下重新启动 JVM。在不重新启动服务器的情况下可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:06:20.167

> 我在我们的 JRE /lib/ext 文件夹中添加了 tools.jar ...

这是个坏主意。如果您需要使用“tools.jar”中的内容，您应该安装 JDK，而不是破解 JRE 安装。

> ...我需要在 Windows 下重新启动 JVM。不重启服务器有可能吗？

嗯...

如果您问是否可以在不重新启动整个操作系统的情况下重新启动应用程序/服务器 JVM，当然可以！

如果您询问是否需要重新启动 JVM 以使其在“/lib/ext”中查看新内容，那么答案是肯定的。JVM 在启动时读取该目录，并且在运行时不会注意到那里写入的文件。

如果您询问 JVM 如何自行重启，请参阅链接的问题。

如果您询问如何从外部重新启动 JVM / 服务，答案是（可能）通过 Windows 服务控制 GUI ...取决于您使用的 Windows 版本。（这不是一个*编程*问题......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:26:40.327

服务器进程通常运行在 JVM 内的 Java Runtime 之上。即使您成功重新启动 JVM 或终止 Java 进程，也会导致服务器进程终止。

# c# - 控件属性和 FindControl 函数 C#

> ID：14373259
> 
> 赞同：1
> 
> 时间：2013-01-17T06:23:03.777
> 
> 标签：c#, asp.net, controls

我正在编写一个显示一些事件的日历。每天都有一个用于上午、下午和晚上事件的按钮，当有事件显示该按钮已启用并更改其颜色时。我在 html 表格中显示这些按钮，当有人更改显示的月份时，程序必须通过禁用所有按钮并将其颜色再次设置为白色来“清理”按钮。事情是我能够通过使用包含按钮的表格上的 FindControl 方法来启用它们：

```
string butControl = /* id of the button */
Button block = mainTable.FindControl(butControl) as Button;
block.BackColor = Color.Gray;
block.Enabled = true; 
```

它工作正常。在我的清理方法中，我不想调用所有按钮的名称，因为有 105 个，而是我使用了这种方法：

```
 private void CleanUp()
    {
        foreach (Control c in mainTable.Controls)
        {
            Button bot = c as Button;
            if (bot != null)
            {
                bot.BackColor = Color.White;
                bot.Enabled = false;
            }
        }
    } 
```

但这不会改变任何按钮的颜色或启用属性。我的问题是：表格的 Controls 属性中的控件是否与可以通过 FindControl 方法找到的控件相同？或者我在检索控件时做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T06:44:18.990

问题不是在迭代控件列表而不是层次结构吗？FindControl 使用层次结构。您可以按如下方式循环控制：

```
public IEnumerable<T> EnumerateRecursive<T>(Control root) where T : Control
{
    Stack<Control> st = new Stack<Control>();
    st.Push(root);

    while (st.Count > 0)
    {
        var control = st.Pop();
        if (control is T)
        {
            yield return (T)control;
        }

        foreach (Control child in control.Controls)
        {
            st.Push(child);
        }
    }
}

public void Cleanup() 
{
    foreach (Button bot in EnumerateRecursive<Button>(this.mainTable))
    {
        bot.BackColor = Color.White;
        bot.Enabled = false;
    }
} 
```

您也可以使用递归来实现它，但我通常更喜欢堆栈，因为它要快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:48:10.220

我假设您使用的是 ASP 表，因为那肯定行不通。您可以通过其他方式解决它，但如果使用一些 HTML 对您来说并不重要，我建议您将其重组为如下所示：

```
<form id="form1" runat="server">
    <asp:Panel ID="mainTable" runat="server">
        <table>
            <tr>
                <td>
                    <asp:Button ID="Button1" runat="server" Text="Button" />
                </td>
            </tr>
        </table>
    </asp:Panel>
</form> 
```

请注意，除了实际的按钮外，asp:Panel 中只使用了 html 控件。使用 ASP，您将不得不递归地寻找孩子。

**编辑：** 说到递归寻找孩子，Stefan 在我写完之前提出了确切的建议并提供了代码，我肯定会推荐他的方法；他显然没有我那么懒惰。

====================================

Stefan 的方法有一个小错误，即您无法在不知道类型的情况下显式进行类型转换，而且如果您使用泛型，您将无法知道类型，就像他一样。这是一个懒惰的改编，纯粹与按钮一起使用，就像您使用它一样。

**不要给出这个“答案”状态。这是对他人工作的腐败。**

```
public IEnumerable<Button> EnumerateRecursive(Control root)
{
    // Hook everything in Page.Controls
    Stack<Control> st = new Stack<Control>();
    st.Push(root);

    while (st.Count > 0)
    {
        var control = st.Pop();
        if (control is Button)
        {
            yield return (Button)control;
        }

        foreach (Control child in control.Controls)
        {
            st.Push(child);
        }
    }
}

public void Cleanup()
{
    foreach (Button bot in EnumerateRecursive(this.mainTable))
    {
        bot.BackColor = Color.White;
        bot.Enabled = false;
    }
} 
```

# android - setExposureCompensation 在三星 Galaxy s3 中不起作用

> ID：14373262
> 
> 赞同：1
> 
> 时间：2013-01-17T06:23:25.027
> 
> 标签：android, samsung-mobile

```
Parameters params = camera.getParameters();

params.setExposureCompensation(progress + camera.getParameters().getMinExposureCompensation());
camera.setParameters(params); 
```

我已经在三星 s3 中设置了 setExposureCom[ensation 值，但它不起作用，但是当我在其他移动 micromax 中测试此代码时，它的运行完美，请指导三星 Galaxy s3 有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T09:05:22.123

你应该检查的输出

```
camera.getParameters().getMinExposureCompensation() 
```

和

```
camera.getParameters().getMaxExposureCompensation() 
```

在设置之前确保您的设备实际支持不同的曝光补偿设置。

您应该将进度设置为：

```
camera.getParameters().getExposureCompensationStep() 
```

确保您设置了有效的曝光补偿。

# java - 在页面中心对齐段落

> ID：14373269
> 
> 赞同：26
> 
> 时间：2013-01-17T06:24:08.310
> 
> 标签：java, pdf, itext

我正在使用 itext 生成 pdf 文件。我想在页面中间对齐我的标题。目前我正在使用这样的

```
Paragraph preface = new Paragraph();  
for (int i = 0; i < 10; i++) {
    preface.add(new Paragraph(" "));
} 
```

它是正确的还是有其他最好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-01-17T08:16:37.770

使用[`Paragraph#setAlignment(int)`](http://developers.itextpdf.com/reference/com.itextpdf.text.Paragraph#31vl8eiucb)：

```
Paragraph preface = new Paragraph(); 
preface.setAlignment(Element.ALIGN_CENTER); 
```

查看接口中的`ALIGN_*`常量以[`Element`](http://developers.itextpdf.com/reference/com.itextpdf.text.Element)获取更多可能的值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-08-23T15:07:32.053

不确定这是否是旧版本，但对于 PdfWriter 这些方法不存在。相反，我使用了：

```
Paragraph p = new Paragraph("This too shall pass");
p.Alignment = Element.ALIGN_CENTER; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-03-08T06:29:09.727

```
 public static final String DEST = "results/tables/centered_text.pdf";

public static void main(String[] args) throws IOException, DocumentException {
    File file = new File(DEST);
    file.getParentFile().mkdirs();
    new CenteredTextInCell().createPdf(DEST);
}

public void createPdf(String dest) throws IOException, DocumentException {
    Document document = new Document();
    PdfWriter.getInstance(document, new FileOutputStream(dest));
    document.open();
    Font font = new Font(FontFamily.HELVETICA, 12, Font.BOLD);
    Paragraph para = new Paragraph("Test", font);
    para.setLeading(0, 1);
    PdfPTable table = new PdfPTable(1);
    table.setWidthPercentage(100);
    PdfPCell cell = new PdfPCell();
    cell.setMinimumHeight(50);
    cell.setVerticalAlignment(Element.ALIGN_MIDDLE);
    cell.addElement(para);
    table.addCell(cell);
    document.add(table);
    document.close();
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-05-28T06:21:40.517

如果您正在寻找 Itext7 的解决方案，那么您可以使用该方法`setTextAlignment(...)`。

例子：

```
Paragraph preface = new Paragraph();
// add text
preface.setTextAlignment(TextAlignment.CENTER); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-26T06:37:22.990

如果有人在寻找 .NET/C# 版本，下面是我实现 CENTER 对齐的方法。

我正在为 .NET/C# 使用 iText7 库，我使用以下方法实现了这一点：

```
Paragraph preface = new Paragraph();
preface.SetTextAlignment(iText.Layout.Properties.TextAlignment.CENTER); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-02T13:13:30.650

这对我有用（itext 5.0.5）：

```
Paragraph p3= new Paragraph("Hello" );
  p3.setAlignment(Element.ALIGN_CENTER); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-15T09:36:42.597

我已经为此搜索解决方案以将 PdfPCell 文本对齐到右侧和中心。修改和更改代码序列后，它就可以工作了。

此代码不适用于将文本对齐到中心。

```
 PdfPCell cell = new PdfPCell();
              cell.addElement(new Phrase("Testing Page");
              cell.setHorizontalAlignment(Element.ALIGN_CENTER);
              table.addCell(cell); 
```

用 this 修改代码后，它现在可以工作了。

```
 Paragraph p = new Paragraph("Testing Page");
              //Pass Paragraph object into PdfPCell 
              PdfPCell cell = new PdfPCell(p);
              cell.setHorizontalAlignment(Element.ALIGN_CENTER);
              table.addCell(cell); 
```

# vb.net - 我可以在 VS 2010 上安装 VB6 吗？

> ID：14373271
> 
> 赞同：0
> 
> 时间：2013-01-17T06:24:20.070
> 
> 标签：vb.net, visual-studio-2010

我已经在我的项目中使用了 Visual Studio 2010。现在我必须使用 Visual Basic 2006 旧版应用程序。我可以在我的系统上安装 VB 2006 企业版吗？这会影响 Visual Studio 2010 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:55:07.467

是的。Visual Studio 2010 和 Visual Studio 6 将愉快地并行安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:35:38.127

您可以在同一台计算机上运行多个版本的 Visual Studio。我目前安装了 VS2003、VS2005、VS2008 和 VS2010，并且正在使用它们。

您可能会遇到问题的地方是将旧的连接到 TFS 之类的事情。这可以做到，因为我将 VS2003 和 VS2008 连接到 TFS2010，但我的 VS2005 将无法工作，因为它出于某种原因对提供者发牢骚。

另一个需要注意的领域是 IIS。由于您已经安装了 VS2010，IIS 可能默认为 .Net 4.0，因此如果您开始部署 .Net 2.0 应用程序，那么如果不对应用程序池等进行一些调整，网站可能无法运行。

但是，如果您只是彼此独立地使用它们，那么您应该没问题。如果您真的很偏执，请考虑创建一个 VM 并在其上安装旧的 VS。

编辑

我从您编辑的帖子中看到您在谈论 VB6。这也可以与任何更高版本的 Visual Studio 一起安装。

# sql - 如果表 B 列数等于表 A，则从表 B 插入表 A？

> ID：14373281
> 
> 赞同：0
> 
> 时间：2013-01-17T06:25:51.817
> 
> 标签：sql, tsql

我有 10 列的表 A，而表 B 只有 3 列。我想将表 B 数据插入表 A，其余 7 个字段为空。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:48:22.413

如果您的表格列具有默认值，那么您必须使用：-

```
insert into tableA select col1,col2,col3,'','','','','','','' from tableB; 
```

用于在剩余的 7 列中插入空值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:33:09.723

```
Insert into tableA(col1, col2, col3) select col1, col2, col3 from tableB 
where col1=condition; 
```

在甲骨文中测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T06:27:22.010

利用

```
insert into table A(coulmn1,column2,coulmn3)  select * from B; 
```

# c# - xna + windows phone 游戏的在线排行榜

> ID：14373283
> 
> 赞同：0
> 
> 时间：2013-01-17T06:25:56.620
> 
> 标签：c#, windows-phone-7, xna, leaderboard

在我的 xna + WP7 游戏中，我有本地分数，正在寻找在线排行榜/API 来提交用户分数。任何链接或来源都会有所帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T06:43:18.183

mogade lib 提供了一个不错的界面。我什至将它移植到 Windows 8。稍后会给你一个链接（你可以在 github 上找到源代码）

甚至在我为我的游戏编写一行代码之前，我就发现了这篇文章 [http://briansolli.wordpress.com/2011/03/30/online-leaderboard-for-your-wp7-game/](http://briansolli.wordpress.com/2011/03/30/online-leaderboard-for-your-wp7-game/)

你可以在这里进行 mogade 代码 [https://github.com/mogade](https://github.com/mogade)

# r - 使用 ggplot 和 R 用多边形裁剪轮廓

> ID：14373284
> 
> 赞同：3
> 
> 时间：2013-01-17T06:25:57.630
> 
> 标签：r, map, ggplot2

我想创建一个轮廓，然后按多边形裁剪轮廓，只显示多边​​形内的轮廓。

**Shapefile 数据可以在[这里找到](https://www.dropbox.com/sh/ztvmibsslr9ocmc/YOtiwB8p9p)**

**CSV文件可以在[这里找到](https://www.dropbox.com/s/mg2bo4rcr6n3dks/temp.csv)**

我使用的代码如下：

```
library("ggplot2")
library("rgdal")
library("gpclib")
library("maptools")
require(sp) 

age2100 <- read.csv("temp.csv",header=TRUE, sep=",")
shape.dir <- "C:/Users/jdbaba/Documents/R working folder/shape" # use your directory name here

lon.shape <- readOGR(shape.dir, layer = "Export_Output_4")
str(lon.shape)

lon.df <- fortify(lon.shape, region = "Id")
p <- ggplot(lon.df, aes(x = long, y = lat, group = group)) +
    geom_polygon(colour = "black", fill = "grey80", size = 1) +
    theme() 

p <- p + geom_point(data=age2100,aes(x=age2100$x,y=age2100$y,group="z"),size=0.1)
p <- p + geom_density2d(colour="red")
p 
```

在这里，我创建了地图、点和轮廓。我不知道我使用的代码是否为变量 z 创建了轮廓。如果不正确，有人可以建议我吗？

我得到的示例输出如下：

![在此处输入图像描述](../Images/611ca70af17e26300391b06e88d4592a.png)

现在，我想在多边形内剪裁轮廓并隐藏多边形外的轮廓部分。

我想知道如何将标签添加到轮廓并控制轮廓间隔。

如果我的问题不清楚，请告诉我。

谢谢

贾巴巴

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:50:08.520

我无法准确复制您的地图。您提供的代码给了我一张带有两组等高线的地图——一组看起来像你的，另一组在该地区的南部重叠。我怀疑这是您`group`设置的人工制品。另外，我可以看到在我认为是湖的南部有一个岛屿。

![在此处输入图像描述](../Images/aec96864c69f3739b3c7a268972ce6da.png)

我喜欢清理我的 ggplot 内容并将其分割成小块，因为我经常在 ggplot 调用的早期部分发现某些内容会混淆后面部分的内容。以下是我将如何映射区域、绘制点，然后添加密度等高线：

```
map <- function(){
  geom_polygon(data=lon.df,aes(x=long,y=lat,group=piece),colour="black",fill="grey80",size=1)
}

points <- function(){
  geom_point(data=age2100,aes(x=x,y=y),size=0.1)
}

density <- function(){
  geom_density2d(data=age2100,aes(x=x,y=y),colour="red")
}

ggplot()+map() +points() +density() 
```

这给出了这个：

![在此处输入图像描述](../Images/96f8e63e22f34d8f00a341fe36dd6d6e.png)

现在这与您的轮廓看起来有很大不同，我不知道为什么。也许您的组参数是用相同的 z 对所有点进行分组？

无论如何，您似乎不想要密度图，而是想要您所在区域的 Z 值地图。这将需要克里金法或其他一些插值技术。暂时忘掉 ggplot，专注于数字。

首先，绘制由 z 值着色的点。你应该看到这个：

![在此处输入图像描述](../Images/6eef9e0e3a50b25a1606c38cfa662c95.png)

这至少可以让您很好地了解正确的轮廓会是什么样子。

无论如何，这是进入一个完整的教程..

# .net - CameraOverlay 去后台，ActiveRegion 前面是空白

> ID：14373285
> 
> 赞同：0
> 
> 时间：2013-01-17T06:26:02.263
> 
> 标签：.net, ios, xcode, xamarin.ios, monodevelop

我正在使用 RedLaser 和 MonoTouch 开发一个简单的条码扫描应用程序。我已经使用了提供的示例代码，并且能够将我的代码部署到 iphone 并且它可以很好地扫描条形码。

但是，相机视图未显示。活动区域为空白。请看下面的图片 ![在此处输入图像描述](../Images/19083e98b373b97289cbf51b797b0b65.png)

当我运行示例时，它工作正常。我猜这与连接视图和控制器有关

我的代码是这样的：

```
public partial class BarcodeScanModalController : CameraOverlayViewController
{
CAShapeLayer Rectanglelayer;
bool IsSilent;

public BarcodeScanModalController (IntPtr handle) : base (handle) 
{
}

public BarcodeScanModalController ()
{
}

internal void BeepOrVibrate ()
{
if (!IsSilent)
{
SystemSound.FromFile ("Sounds/beep.wav").PlayAlertSound ();
}
}

void setPortraitLayout ()
{
// Set portrait
ParentPicker.Orientation = UIImageOrientation.Up;
// Set the active scanning region for portrait mode
ParentPicker.ActiveRegion = new RectangleF (0, 100, 320, 250);
// Activate the new settings
ParentPicker.ResumeScanning ();
// Animate the UI changes
CGAffineTransform transform = CGAffineTransform.MakeRotation (0);
//this.View.Transform = transform;
UIView.BeginAnimations ("rotateToPortrait");
//UIView.SetAnimationDelegate = this;
UIView.SetAnimationCurve (UIViewAnimationCurve.Linear);
UIView.SetAnimationDuration (0.5f);

setActiveRegionRect ();
UIView.CommitAnimations (); // Animate!
}

CGPath newPathInRect (RectangleF rect)
{
CGPath path = new CGPath ();
path.AddRect (rect);
return path;
}
void setActiveRegionRect ()
{
Rectanglelayer.Frame = new RectangleF (    ParentPicker.ActiveRegion.X,
                                  ParentPicker.ActiveRegion.Y,
                                  ParentPicker.ActiveRegion.Width,
                                  ParentPicker.ActiveRegion.Height
);

CGPath path = newPathInRect (Rectanglelayer.Bounds);
Rectanglelayer.Path = path;
Rectanglelayer.SetNeedsLayout ();
} 
```

然后我像这样使用这个 OverlayController：

```
public void ScanItemsButtonPressed (object sender, EventArgs e)
{
  if (overlayController == null)
{
overlayController = new BarcodeScanModalController {  ModalTransitionStyle = UIModalTransitionStyle.FlipHorizontal};
}

if (overlayController.ParentPicker == null)
{
BarcodePickerController picker = new BarcodePickerController ();
picker.Overlay = overlayController;
picker.Delegate = new BarcodePickerDelegate (this);
picker.Orientation = UIImageOrientation.Up;
}
overlayController.ParentPicker.ScanUPCE = true;
overlayController.ParentPicker.ScanEAN8 = true;
overlayController.ParentPicker.ScanEAN13 = true;
// overlayController.ParentPicker.ScanSTICKY = false;
overlayController.ParentPicker.ScanQRCODE = false;
overlayController.ParentPicker.ScanCODE128 = true;
overlayController.ParentPicker.ScanCODE39 = true;
overlayController.ParentPicker.ScanITF = true;
// Data matrix decoding does not work very well so it is disabled for now
overlayController.ParentPicker.ScanDATAMATRIX = false;
// hide the status bar
UIApplication.SharedApplication.StatusBarHidden = true;

overlayController.Done += delegate {
DismissModalViewControllerAnimated (true);
} ;

this.PresentModalViewController (overlayController.ParentPicker, true);
} 
```

我正在使用 MonoTouch 6.0.8、RedLaser 3.4.0 和 XCode 4.5.2 任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T00:24:22.743

这似乎是一个相当简单的问题。

背景颜色和 ActiveRegion FillColor 是全色（不透明），因此它位于相机视图的顶部。我可以通过将扫描视图的背景设置为无颜色（默认）并将 ActiveRegion 设置为透明的内容来解决该问题，如下所示。

```
RectangleLayer.FillColor = UIColor.FromRGBA(1.0f, 0.0f, 0.0f, 0.2f).CGColor; 
```

# jquery - jQuery循环不起作用

> ID：14373286
> 
> 赞同：0
> 
> 时间：2013-01-17T06:26:05.000
> 
> 标签：jquery, jquery-cycle

在我的网站上`jquery.min.js` 并 `jquery.cycle.all.latest.js`正确加载。但图像不旋转[请参阅此链接](http://smsiland.com/a)。有什么问题请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:31:36.270

那是因为您`FB.getLoginStatus`在初始化之前调用...检查控制台...尝试先删除FB插件..

# svn - SVN 通知输出到文件/数据结构

> ID：14373289
> 
> 赞同：0
> 
> 时间：2013-01-17T06:26:27.277
> 
> 标签：svn

我正在使用 svnnotify 向利益相关者发送一封电子邮件，告知提交细节。我还想将有关这些提交的信息（文件添加、更新、修订号等）存储在文件或某些数据结构中，以便以后在部署期间用于生成报告。我用谷歌搜索，但找不到任何完全匹配的。任何人都可以建议他们是否采用了任何此类技术

# sql - 查询本周出生的人

> ID：14373290
> 
> 赞同：3
> 
> 时间：2013-01-17T06:26:30.627
> 
> 标签：sql, oracle

我正在尝试获取生日在这周内的记录，但我会`query`返回出生在这周之间的人`Tuesday and Monday`。我要的人之间出生`Monday and Sunday`。如何更改我的查询？

```
WHERE TO_CHAR(SYSDATE, 'WW') = TO_CHAR(BIRTHDAY_DATE, 'WW') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T06:48:30.220

星期一可能不是你一周的第一天。

在系统下，您可以通过以下方式获得 NLS_TERRITORY 值：

**显示参数 NLS_TERRITORY**

在**任何会话**下，您都可以这样设置

为当前会话设置它。

```
ALTER SESSION SET NLS_TERRITORY=slovenia
SELECT to_char(to_date('13.01.2013','DD.MM.YYYY'),'d') from dual;--SUNDAY 
```

**结果是 7。**

```
ALTER SESSION SET NLS_TERRITORY=america
select to_char(to_date('13.01.2013','DD.MM.YYYY'),'d') from dual--SUNDAY 
```

**结果为 1。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:45:22.333

谢谢回答我问题的人。我找到了解决方案。在这里，我创建了当前周的日期、月份的字符串：

```
DateTime sdate = DateTime.Now.AddDays(-1 * (int)DateTime.Now.DayOfWeek + 1);
        string findDay = "";
        for (int i = 0; i < 7; i++)
            findDay += (findDay.Length > 0 ? "," : "") + "'" + sdate.AddDays(i).Day.ToString("00") + "." + sdate.AddDays(i).Month.ToString("00") + "'"; 
```

和 sql：

```
WHERE TO_CHAR(BIRTHDAY_DATE, 'DD.MM') IN (" + findDay + ") 
```

'WW' 就像 elrado 所说的那样工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T06:47:47.923

请试试这个，

```
WHERE BIRTHDAY_DATE between sysdate - (TO_CHAR(SYSDATE, 'WW')) + 1 AND sysdate - (TO_CHAR(SYSDATE, 'WW')) + 7 
```

# android - 在 Android 中集成 Aweber？

> ID：14373291
> 
> 赞同：2
> 
> 时间：2013-01-17T06:26:31.003
> 
> 标签：android, aweber

如何**在android中集成Aweber**，我研究了很多，但没有源代码，所以请帮忙，应该不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:10:46.437

AWeber 目前没有现成的 Android 客户端库。您可以通过以下几种方式解决此问题：

一种可能性是实现您自己的 API 代码。AWeber 的 API 通过标准 HTTPS 使用基于 REST 的资源，并使用 oAuth 1.0a 进行身份验证。应该有可用于 Android 开发的库来满足您的需求——我知道已经有成功的“自制”Java、.Net 和第三方完成的其他集成，所以我不明白为什么 Android 应该有任何不同.

在这种情况下，我建议使用官方 Python 或 PHP 库作为如何实现代码的示例。特别是 PHP 库将所有​​ oAuth 代码“一目了然”，因此有助于深入了解身份验证的工作原理。

另一个有趣的可能性是尝试使用 AWeber Python 模块以及一些声称允许开发人员在 Android 上使用 Python 的开源项目。我个人觉得这种可能性很有趣，但我没有空闲时间尝试一下。

虽然 AWeber 目前不提供对 Android 本身的支持，但 API 团队在此处详细记录了身份验证过程：

[https://labs.aweber.com/docs/authentication](https://labs.aweber.com/docs/authentication)

如果您决定走自己的图书馆之路，该参考资料可能会对您有所帮助。

如果您的库遇到任何问题，请务必通过 api@aweber.com 联系 API 支持团队 - 虽然他们目前可能不直接支持 Android，但他们通常可以帮助您根据自己的库调试自己的库见服务器端。

# asp.net - mozila如何避免提示用户名和密码

> ID：14373293
> 
> 赞同：1
> 
> 时间：2013-01-17T06:26:32.393
> 
> 标签：asp.net, iis-7.5

嗨，我是 Web 应用程序的新手。我已经在 IIS7.5 中部署了 asp.net Web 应用程序。设置 windows 身份验证模式。如果我在 IE 中浏览网站，网站不会询问用户名和密码，但如果我在 Mozilla 中浏览它会提示用户名和密码。

有什么办法可以避免提示用户名和密码？

# javascript - 隐藏 android 键盘不起作用

> ID：14373300
> 
> 赞同：1
> 
> 时间：2013-01-17T06:26:49.287
> 
> 标签：javascript, android, html, cordova, android-softkeyboard

我正在构建一个`Html5`+ `PhoneGap`for的应用程序`Android`。

我希望当函数调用 Android 键盘时**隐藏**。

我试图通过以下方式做到这一点：

```
function HideKeyboard() {
        alert('HideKeyboard');
        plugins.SoftKeyBoard.hide(function () {
              alert('s');
            }, function () {
             alert('f');
           });
        } 
```

它不起作用！还有另一种方法吗？

出现警报“HideKeyboard”，但未出现其他消息

这是我的插件：

```
 <plugin name="SoftKeyBoard" value="com.phonegap.plugins.SoftKeyboard.SoftKeyBoard" /> 
```

*谢谢 ..*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:36:29.157

你是否：

1.  在`/src/org/apache/cordova/plugins`其中创建`SoftKeyBoard.java`
2.  将插件定义添加到`/res/xml/plugins.xml`：

    ```
    <plugin name="SoftKeyBoard"
           value="org.apache.cordova.plugins.SoftKeyBoard" /> 
    ```

3.  添加`softkeyboard.js`到`/assets/www/js`

4.  `head`在`index.html`对 的引用中添加`softkeyboard.js`：

    ```
    <script type="text/javascript"
         charset="utf-8"
             src="js/softkeyboard.js"></script> 
    ```

5.  最后在设备上调用以下命令：

    ```
    window.cordova.plugins.SoftKeyBoard.hide(function () {
      // WooHoo!
    },function () {
      // BooHoo!
    }); 
    ```

到目前为止，我只能看到您已经完成了第 2 步和第 5 步。

**更新**它似乎是一个命名空间问题，我也更新以反映这一点。很高兴它奏效了。

# android - OnItemClickListener 不适用于 ListView

> ID：14373302
> 
> 赞同：0
> 
> 时间：2013-01-17T06:26:59.457
> 
> 标签：android, android-listview, textview, onclicklistener

这是相关代码：

```
super.onCreate(savedInstanceState);
          this.requestWindowFeature(Window.FEATURE_NO_TITLE);                   

          // storing string resources into Array
          String[] menulist = getResources().getStringArray(R.array.menulist);      

          // Binding resources Array to ListAdapter
          this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, R.id.label, menulist));

          ListView lv = getListView();

          // listening to single list item on click
          lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

                // selected item
                String selected = ((TextView) view).getText().toString();

                Toast toast=Toast.makeText(getApplicationContext(), selected, Toast.LENGTH_SHORT);//This is where the error shows  
                toast.show();

                // Launching new Activity on selecting single List Item
                /*Intent i = new Intent(getApplicationContext(), SingleListItem.class);
                // sending data to new activity
                i.putExtra("product", product);
                startActivity(i);*/

            }
          }); 
```

这是 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<!--  Single List Item Design -->
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/label"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/listgradient" 
        android:clickable="true"      
        android:padding="10dip"
        android:textSize="16dip"
        android:textStyle="bold" >
</TextView> 
```

我保留了`clickable`属性`true`。但是`Toast`没有显示。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T06:32:03.670

我认为你的错误在这里：

```
 String selected = ((TextView) view).getText().toString(); 
```

您应该使用变量“位置”来获取列表数据的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T06:35:36.087

试试这个：

```
String selected = ((TextView) view.findViewById(R.id.your_textView_item_id)).getText().toString(); 
```

# iphone - 使用 openGL 捕获屏幕截图

> ID：14373306
> 
> 赞同：4
> 
> 时间：2013-01-17T06:27:37.820
> 
> 标签：iphone, opengl-es

> **可能重复：**
> [我想在使用 opengl 运行任何游戏时捕获屏幕](https://stackoverflow.com/questions/14372292/i-want-capture-screen-when-any-game-is-running-with-opengl)

我正在使用 OpenGL 开发动作游戏。
当用户播放最佳镜头时，我想捕捉它们并上传到社交网络。
我使用了很多代码，但没有成功。一些代码在：

[OpenGL ES 查看快照](http://developer.apple.com/library/ios/#qa/qa1704/_index.html)

```
 NSInteger myDataLength = 480 * 320 * 4;

        // allocate array and read pixels into it.
        GLubyte *buffer = (GLubyte *) malloc(myDataLength);
        glReadPixels(0, 0, 480, 320, GL_RGBA, GL_UNSIGNED_BYTE, buffer);

        // gl renders "upside down" so swap top to bottom into new array.
        // there's gotta be a better way, but this works.
        GLubyte *buffer2 = (GLubyte *) malloc(myDataLength);
        for(int y = 0; y < 320; y++)
        {
            for(int x = 0; x < 480 * 4; x++)
            {
                buffer2[(319 - y) * 480 * 4 + x] = buffer[y * 4 * 480 + x];
            }
        }

        // make data provider with data.
        CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, buffer2, myDataLength, NULL);

        // prep the ingredients
        int bitsPerComponent = 8;
        int bitsPerPixel = 32;
        int bytesPerRow = 4 * 480;
        CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
        CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault;
        CGColorRenderingIntent renderingIntent = kCGRenderingIntentDefault;

        // make the cgimage
        CGImageRef imageRef = CGImageCreate(480, 320, bitsPerComponent, bitsPerPixel, bytesPerRow, colorSpaceRef, bitmapInfo, provider, NULL, NO,   renderingIntent);
UIImage *image = [UIImage imageWithCGImage:imageRef]; 
```

*其他代码是：*

```
CGRect screenRect = [[UIScreen mainScreen] bounds];
UIGraphicsBeginImageContextWithOptions(screenRect.size, NO, 0.0);
[glview.parent.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

但所有代码在模拟器中生成图像而不是在设备中（仅限黑白图像）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:40:43.153

这个问题已经在这里回答了。这就是我相信你正在寻找的东西

[如何从 EAGLView 获取 UIImage？](https://stackoverflow.com/questions/1352864/how-to-get-uiimage-from-eaglview/1945733)

# regex - 正则表达式的区别： (\w+)? 和 (\w*)

> ID：14373310
> 
> 赞同：27
> 
> 时间：2013-01-17T06:28:06.443
> 
> 标签：regex, difference

`(\w+)?`正则表达式和正则表达式之间有什么区别`(\w*)`吗？

看起来一样，不是吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-17T06:37:31.140

`(\w+)?`并且`(\w*)`都匹配相同（0..+inf 单词字符）

但是，有一点不同：

在第一种情况下，如果这部分正则表达式匹配`""`，则不存在捕获组。在第二种情况下，它是空的。在某些语言中，前者表现为一段`null`时间，后者应始终是`""`。

例如，在 Javascript 中，

```
/(\w*)/.exec("")  // ["", ""]
/(\w+)?/.exec("") // ["", undefined] 
```

在 PHP ( `preg_match`) 中，在前一种情况下，匹配数组中根本不存在相应的键：http: [//3v4l.org/DB6p3#v430](http://3v4l.org/DB6p3#v430)

# html - 如何将图像放入框内并垂直对齐

> ID：14373322
> 
> 赞同：4
> 
> 时间：2013-01-17T06:28:59.797
> 
> 标签：html, css

我需要允许用户上传他们想要的任何像素，但他们的个人资料图片将超过 100x100。图片将包含在 SQUARE 框中。但问题是，当我上传 100x100 或类似尺寸的文件时，它的效果与预期的一样好。但是，当我上传像素为 640x360 或任何类似（或宽屏）像素的图像时，图像会很好地缩放到框内，但是它不是垂直对齐的。我希望垂直对齐位于中间，那么我该怎么做呢？

CSS：

```
#imgbox {
  height:100px;
  width:100px;
  overflow:hidden;
  border:solid 1px #000;
  margin-left:10px;
  margin-top:10px;
}
#imgbox img {
  width:100%;

  position:relative;
  //I want the vertical align of the image to be in the center
} 
```

这里：http: [//jsfiddle.net/ZdW9h/1/](http://jsfiddle.net/ZdW9h/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T06:38:03.367

如果您`line-height`在容器 div 上设置了 a ，则可以`vertical-align`在图像上使用来定位它。此外，您应该使用`max-width`and`max-height`确保图像始终包含在框中（假设这是您想要的）。

[http://jsfiddle.net/ZdW9h/7/](http://jsfiddle.net/ZdW9h/7/)

这是更新的 CSS：

```
#imgbox {
    height:100px;
    width:100px;
    line-height: 100px;
    overflow:hidden;
    border:solid 1px #000;
    margin-left:10px;
    margin-top:10px;
}
#imgbox img {
    max-width:100%;
    max-height: 100%;
    vertical-align: middle;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T06:40:22.983

几件事-

为您的元素使用一个类`imgbox`，ID 用于选择给定文档中的单个元素。

其次，我建议使用一个带有 background-image 属性的 div，这样你可以相对定位它。

**HTML**

```
<div class="imgbox" style="background-image: url(http://plants.montara.com/ListPages/FamPages/showpix/ranunculaS/aqufor_a.JPEG)"></div>
<div class="imgbox" style="background-image: url(http://pictures.inspirationfeed.netdna-cdn.com/wp-content/uploads/2010/06/Evolution_by_will_yen-500x500.png)"></div> 
```

**CSS**

```
.imgbox {
    height: 100px;
    width: 100px;
    overflow: hidden;
    border: solid 1px #000;
    margin-left: 10px;
    margin-top: 10px;
    background-repeat: no-repeat;
    background-position: center;
    background-size: contain;
} 
```

**[JSFiddle](http://jsfiddle.net/Xm62n/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T06:31:56.383

只需将`width`and`height`属性设置`img`为 100：http: [//jsfiddle.net/ZdW9h/4/](http://jsfiddle.net/ZdW9h/4/)

不过，以这种方式调整图像大小通常不是最好的主意。如果您可以使用某种图像库（如 GD）调整图像大小，我建议您先这样做。它也会为您节省一些服务器空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T06:35:02.033

这件事应该可以解决您的问题：

```
 #imgbox img {
  width:100px;
  height: 100px;
  position:relative;    
} 
```

如果您正在寻找其他东西，请告诉我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T06:35:50.813

你可以试试 ：

```
#imgbox { display:table-cell; } 
```

# java - 如何获取 String[][] 数组的长度

> ID：14373325
> 
> 赞同：-2
> 
> 时间：2013-01-17T06:29:17.603
> 
> 标签：java, android, string, multidimensional-array

我有一个`String[][]`类型数组，像这样，

```
static final String arrChildelements[][] = {
    { "1", "2", "3"..... },
    { "A", "B", "C"..... },
    { "X", "Y", "Z"..... } }; 
```

这里的行数是固定的，即 3。现在我想将此数组存储在其他一些相同类型的数组中。到目前为止我所做的是，

```
 for (int i = 0; i < 3; i++) {
        for (int j = 0; j < secondColumnLength; j++) { 
           //Here I have no idea that how to get the number of elements for the column
            arrChild[i][j] = arrChildelements[i][j];
        }
    } 
```

到目前为止，我只能记住这个方法来遍历`String[][]`数组。虽然我很想知道是否还有其他好的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:32:08.900

`arrChildelements.length`是行
`arrChildelements[i].length`数是第 i 行的列数。

对于更多维度，它会一直这样工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T06:33:38.940

```
arrChildElements.length = length of first dimension
arrChildElements[].length = length of second dimension 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T06:33:55.710

而不是迭代数组的每个成员，而是使用`System.arraycopy()`：

```
System.arraycopy(arrChildElements, 0, arrChild, 0, arrChildElements.length); 
```

此外，如果您必须遍历每个值，那么`arrChildElements.length`是您的外循环值，并且`arrChildElements[i].length`是您的内循环值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T06:33:32.143

```
for (int i = 0; i < arrChildelements.length; i++) {
    for (int j = 0; j < arrChildelements[i].length; j++) { 
        arrChild[i][j] = arrChildelements[i][j];
    }
} 
```

# java - android中的自定义警报框

> ID：14373329
> 
> 赞同：0
> 
> 时间：2013-01-17T06:29:43.373
> 
> 标签：java, android, android-alertdialog

下面的类在文件 Test.java 中，我想从公共类 Test 的函数中调用它。现在我不知道如何访问该功能以显示`alertdialog`. 我的意思是如何`onCreateDialog(Bundle savedInstanceState)`从另一种方法访问下面的类？

[下面的代码是从这个源](http://developer.android.com/guide/topics/ui/dialogs.html)复制的

```
 class MyCustomDialog extends DialogFragment{
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        // Get the layout inflater
        LayoutInflater inflater = getActivity().getLayoutInflater();

        // Inflate and set the layout for the dialog
        // Pass null as the parent view because its going in the dialog layout
        builder.setView(inflater.inflate(R.layout.notification_list_layout, null))
        // Add action buttons
               .setPositiveButton("ok", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       // sign in the user ...
                   }
               })
               .setNegativeButton("cancel", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       MyCustomDialog.this.getDialog().cancel();
                   }
               });      
        return builder.create();
    }

} 
```

我想要这样的东西 ![在此处输入图像描述](../Images/a5cabd7f888eaa9844ae627334acaeda.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T11:14:00.913

```
MyCustomDialog custDialog = new MyCustomDialog();
custDialog.show(custDialog.getFragmentManager(), "Info"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:52:14.033

我认为这应该有效`MyCustomDialog custDialog = new MyCustomDialog(); custDialog.show(manager, tag)`

# c# - 使用 EF Code First 和 Linq 查询数据库

> ID：14373334
> 
> 赞同：0
> 
> 时间：2013-01-17T06:30:18.117
> 
> 标签：c#, linq, entity-framework, asp.net-mvc-4, ef-code-first

我花了很多时间，不知道如何使这个查询工作。我正在制作一个小时的操作类型模块，用户可以在其中选择如下内容：

```
Monday open from 8am to 11am closed from 11am to 1pm and open from 1pm to 5pm 
```

这是完全动态的，用户可以选择他们想要打开和关闭的次数（动态生成的表单输入）

为此，我做了几节课（我不知道这是否是一种正确的方法，因为我已经使用 asp.net mvc、C# 和 EF 大约一周了。任何建议将不胜感激)

```
public class HoursOfOperation
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }
    public IQueryable<CompanyHour> Monday { get; set; }
    public IQueryable<CompanyHour> Tuesday { get; set; }
    public IQueryable<CompanyHour> Wednesday { get; set; }
    public IQueryable<CompanyHour> Thursday { get; set; }
    public IQueryable<CompanyHour> Friday { get; set; }
    public IQueryable<CompanyHour> Saturday { get; set; }
    public IQueryable<CompanyHour> Sunday { get; set; }

    //Navigation Property
    public CompanyInformation Company { get; set; }

} 
```

和

```
public class CompanyHour
{
    public int id { get; set; }
    public Status Status { get; set; }
    public string From { get; set; }
    public string To { get; set; }
}

public enum Status
{
    Closed,
    Open,
    ByAppointmentsOnly
} 
```

为了完整起见，这里是我的 companyInformation 类

```
public class CompanyInformation
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int id { get; set; }

    //[Required]
    [DisplayName("Company Name:")]
    public string companyName { get; set; }

    [DisplayName("Website Address:")]
    [Url(ErrorMessage="The Website field is not a valid fully-qualified http, https, or ftp URL. (Example: http://www.website.com)")]
    public string website { get; set; }
    public string contactTitle { get; set; }

    //[Required]
    [DisplayName("Contact First Name:")]
    public string contactFirstName { get; set; }
    //[Required]
    [DisplayName("Contact Last Name:")]
    public string contactLastName { get; set; }

    //[Required]
    [Phone]
    [DisplayName("Phone Number:")]
    public string contactPhoneNumber { get; set; }

    [DisplayName("Address Display?")]
    public bool displayAddress { get; set; }
    [DisplayName("Phone Number?")]
    public bool displayPhoneNumber { get; set; }

    //[Required]
    [DisplayName("Address 1:")]
    public string address1 { get; set; } 
    [DisplayName("Address 2:")]
    public string address2 { get; set; }

    //[Required]
    [DisplayName("City:")]
    public string city { get; set; }

    //[Required]
    [DisplayName("State:")]
    public string state { get; set; }

    //[Required]
    [DisplayName("Zip/Postal Code:")]
    public string zipCode { get; set; }

    [DisplayName("Search Engine?")]
    public bool allowSearchEngines { get; set; }

    //navigation Properties
    public virtual ICollection<UserProfile> CompanyUsers { get; set; }
    public virtual ICollection<HoursOfOperation> CompanyHours { get; set; }

} 
```

原因是，我在 hoursofoperation 类中对星期一、星期二进行了硬编码是为了让 mvc 轻松映射动态生成的字段（这部分有效！！！:)）

现在我想查询数据库并创建一个小时的操作模型以发送回视图（在获取时），以便我可以带回保存的信息。但是，我不知道该怎么做。我正在发回一个 HoursOfOperation 课程。

我目前的查询：

```
var model = company.CompanyHours.Where(e => e.Company.id == company.id); 
```

只返回一个只有 id（正确 id）的 HoursOfOperation 模型，所有 companyHours 实体都为空。

谁能帮我提出正确的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:33:19.717

我认为你需要这样做利用`InClude`方法来获取子实体

```
context.Companies
             .Include("CompanyHours")
             .Where(e => e.Company.id == company.id) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T02:44:56.053

好的，所以我终于解决了这个问题，但我这样做的方式是将我的模型完全重组为更好和正确的设计。

# android - 在 Android 中通话暂停时播放音乐/广告

> ID：14373340
> 
> 赞同：0
> 
> 时间：2013-01-17T06:30:41.237
> 
> 标签：android, call

当您将呼叫者置于保持状态时。应用程序应在后台向接收者播放音乐/一些自定义消息，直到通话保持。一旦呼叫变为活动状态，则应停止该音乐/自定义消息。是否有任何 API 可以这样做？

如果是这样，请让我知道一些步骤来推进它。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T06:32:15.797

Android 不允许您在通话期间修改传出音频流。即使呼叫处于保持状态，它仍被视为正在进行的呼叫。您能做的最好的事情就是通过扬声器播放您想要播放的任何内容，并希望麦克风能够接收到它。

# visual-studio-2010 - SVN 结构、项目和建议协助

> ID：14373352
> 
> 赞同：1
> 
> 时间：2013-01-17T06:31:19.293
> 
> 标签：visual-studio-2010, version-control, tortoisesvn, projects-and-solutions, visualsvn

***我已经阅读了太多关于 SO 的帖子，我现在处于分析瘫痪状态！***

我使用 Visual Studio 2010，我有许多小项目，其中许多参考库/共享项目。

如果我对共享代码进行更改，我真的不介意必须检查/重新构建依赖项目......我会尽快安排 TeamCity 来协助解决这个问题，但目前，我只是修改代码下次我做一个项目的时候。许多项目是“一次编写后忘记”，因此它们永远不需要更新。

该团队目前非常小（我！），但预计今年年初会有新的开发人员，但它仍然是一个非常小的内部团队，如果这有什么不同的话，项目周期会很快。

目前我在磁盘上有一个非常扁平的文件夹结构，所以我的所有`sln`文件都在磁盘上的“开发”文件夹中。然后每个 VS 项目都有一个文件夹。这使共享变得非常简单，并且还为我留下了一个`packages`用于`nuget`.

我即将将所有内容导入 SVN (VisualSVN)，我想开始添加诸如`database scripts`、`docs`、`UAT tests`等之类的内容。

*   我是否保持我的扁平结构并在根级别有一个主干/分支/标签？
*   我是否将结构扩展到`an SVN folder-per-solution` 然后拥有`trunk/src`并`trunk/docs`管理诸如`nuget packages`with之类的东西`svn:eternals`？
*   我是否混合了这个并`an SVN folder-per-solution`在`docs`VS 解决方案中使用了？

注意：我正在使用 SVN，因此我可以引入一些 Java 开发，但以单一方式管理源代码。我们还将与希望将 docs/sql sripts 等放入其中的 DB 团队共享。我打算为 DB 和 Java 分别建立一个单独的存储库——但希望它们每个都有一个“相似”的文件夹结构。

NOTE2：我有一些 SVN 用户经验，但没有管理员经验。新开发者完全没有经验（他们来自 AS/400 背景），所以解决方案越简单越好！我已经看过了`repo per project and svn:extenals`，虽然它是一个很好的解决方案，但它需要我一直管理和维护（以及我自己的工作！哈哈）

非常感谢那些“去过那里，做过那件事-GTTS”的人的任何建议。

* * *

好的，我现在有以下本地解决方案结构：

我所有的 sln/suo 文件都在同一个文件夹中。
我所有的项目文件夹/文件都是子文件夹

这使得共享项目很容易......但看起来很乱而且很难找到任何东西:(

我应该使用 svn:externals 来管理“参考”项目，以便我可以分支/标记它们吗？
我应该只引用构建的 DLL - 以及随之而来的所有管理吗？
我应该让 VS2010 管理我的文件夹，而不关心我有很多“nuget”文件夹等吗？

现在非常非常困惑......任何体面的答案？:(

* * *

注意：将尽快将 TeamCity（或类似的东西）添加到组合中以提供 CI 功能。对 CI 的任何严肃（和免费）建议也表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:12:01.357

这是我在工作和个人项目中使用的结构：

SVN结构：

*   根
    *   共享代码
    *   产品A
        *   树干
            *   branch_of_shared_code
            *   产品A项目
            *   产品解决方案
        *   分支机构
            *   分支1
                *   branch_of_shared_code
                *   产品A项目
                *   产品解决方案
        *   标签
            *   ...
    *   产品B
        *   ...

定期（何时完全取决于您的需要）来自共享代码主分支的所有更改都合并到共享代码的产品分支中。对共享代码的更改要么在产品的分支中进行然后合并回来，要么在主分支中然后合并到产品中。

产品来源内容：

构建完整包所需的一切都被视为源。例如，如果您有数据库脚本 - 它们是源的一部分。测试 - 也是。对于文档，我通常在解决方案中添加一个单独的项目，其中包含用于构建文档的所有源并在输出目录中生成结果。然后，创建安装程序的项目会将其包含到生成的分发包中。

规划：

这可能是有争议的，但我更喜欢将任务列表存储在源旁边并将它们分支/合并在一起。如果任务在分支中完成，则在合并之前不会在主干中完成。更一般的规划可能适合也可能不适合在源旁边存储。

在磁盘上：

首先，我相信以这样一种方式使用存储库，即可以不存储每个产品的工作副本，而是按需检查它们。当然，为每次更改检查/删除工作副本是不切实际的，因此我为我目前经常工作的每个产品都有一个目录，在其中我检查我正在处理的分支（主干和其他一些）。如果您不期望它们很快开发，则无需检查其余产品。

# android - sql lite如何将文件作为android中的数据库工作

> ID：14373354
> 
> 赞同：1
> 
> 时间：2013-01-17T06:31:28.153
> 
> 标签：android, database, sqlite

我想知道当您在 android 上处理数据库时 sqllite 究竟是如何工作的。我知道它会将所有内容都写入带有 .db 扩展名的文件中。但它如何读取或写入一个特定的表？它是获取整个文件还是仅获取相关部分，以及它是如何执行这些操作的？有人可以建议我一些链接吗？我尝试了谷歌，但我找到的链接只是解释了如何编写查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:38:09.300

为此，您必须阅读数据库的基础知识。所有数据库框架在工作方面几乎相同，因此您必须研究数据库的基础知识（任何）。这里有一些你可以喜欢的相关信息

```
What does a database actually do to find out what matches a select statement? 
```

坦率地说，这是一个蛮力的问题。简单地说，它会读取数据库中的每个候选记录并将表达式与字段匹配。所以，如果你有“select * from table where name = 'fred'”，它实际上会遍历每条记录，获取“name”字段，并将其与“fred”进行比较。

现在，如果“table.name”字段被索引，那么数据库将（可能但不一定）首先使用索引来定位候选记录以应用实际过滤器。

这减少了将表达式应用到的候选记录的数量，否则它只会执行我们所说的“表扫描”，即读取每一行。

但从根本上说，它定位候选记录的方式与应用实际过滤器表达式的方式是分开的，显然，可以进行一些巧妙的优化。

```
How does a database interpret a join differently to a query with several "where key1 = key2" statements? 
```

好吧，连接用于创建一个新的“伪表”，在其上应用过滤器。因此，您有过滤条件和连接条件。连接条件用于构建此“伪表”，然后对其应用过滤器。现在，在解释连接时，这又是与过滤器相同的问题——蛮力比较和索引读取以构建“伪表”的子集。

```
How does the database store all its memory? 
```

良好数据库的关键之一是它如何管理其 I/O 缓冲区。但它基本上将 RAM 块与磁盘块匹配。使用现代虚拟内存管理器，更简单的数据库几乎可以依赖 VM 作为其内存缓冲区管理器。高端 DB'S 自己做这一切。

```
How are indexes stored? 
```

B+Trees 通常，你应该查一下。这是一种已经存在多年的直接技术。它的好处与大多数平衡树共享：对节点的一致访问，加上所有叶节点都是链接的，因此您可以轻松地按键顺序从一个节点遍历到另一个节点。因此，使用索引，可以将行视为针对数据库中的特定字段“排序”，并且数据库可以利用该信息来优化它。这与使用哈希表作为索引不同，后者只能让您快速获取特定记录。在 B-Tree 中，您不仅可以快速获取特定记录，还可以快速获取排序列表中的某个点。

在数据库中存储和索引行的实际机制非常简单易懂。游戏正在管理缓冲区，并将 SQL 转换为有效的查询路径，以利用这些基本的存储习惯。

然后，在存储惯用语之上还有整个多用户、锁定、日志记录和事务复杂性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:16:42.367

Android 上的 SQLite 操作与任何其他平台上的 SQLite 操作没有任何不同。

非常简短地回答您的问题：SQLite 文件被分成固定大小的页面。每个数据库对象（表、索引等）占用一定数量的页面。如果对象需要增长（比如将新行插入表中），它可以从空闲页面列表中分配更多新页面，或者通过增加数据库文件的大小来分配更多新页面。如果行被删除或对象被丢弃，回收的空闲空间进入空闲页列表。在任何操作期​​间，SQLite 引擎都会尝试不获取整个文件，但它会维护页面缓存以获得更高的性能。

[您可以在SQLite 网站](http://sqlite.org)上找到更详细的解释，特别是关于[SQLite 数据库文件格式](http://www.sqlite.org/fileformat2.html)的解释。

# actionscript-3 - AS3 - 为输入选择一个标签

> ID：14373356
> 
> 赞同：0
> 
> 时间：2013-01-17T06:31:36.613
> 
> 标签：actionscript-3, label

我在用户单击按钮时弹出的图像中有一个标签。

我希望标签已经被“选择”用于键盘输入。当前的实现要求用户在开始键入键盘输入之前单击标签区域内部。

有什么方法可以将标签设置为“选中”并准备好输入，而无需用户单击其中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:00:14.713

将焦点设置在标签字段上：

```
stage.focus = labelField; 
```

您的标签必须是`input`type`mouseEnabled`并且`selectable`设置为`true`.

# r - GGPlot geom_text 着色与构面

> ID：14373357
> 
> 赞同：5
> 
> 时间：2013-01-17T06:31:37.597
> 
> 标签：r, ggplot2

希望这里的某个人能够帮助我解决我正在尝试解决的 ggplot 脚本遇到的问题。该脚本将多次使用不同的数据，因此需要相对灵活。我几乎在我想要的地方得到了它，但是我遇到了一个我无法解决的问题。

该脚本适用于一个折线图，其右侧边距中的每条线都有标签。有时图形是多面的，有时不是。

我遇到的问题是，如果随着时间的推移没有显着变化，我想将右边距中的标签颜色编码为黑色，如果有正变化，则为绿色，如果有负变化，则为红色。当我只有一个方面时，我有一个脚本可以执行此操作，但是一旦我在图中有多个方面，标签的颜色编码就会出现以下错误

```
 Error: Incompatible lengths for set aesthetics: 
```

下面是具有多方面数据的脚本。问题似乎在于我在 geom_text 行中指定颜色的方式。如果我删除脚本中 geom_text 行中的颜色调用，那么我会在正确的位置打印属性，只是没有着色。我真的在这个方面不知所措。这是我在这里的第一篇文章，所以如果我的帖子做错了什么，请告诉我。

具有多个方面（不起作用）

```
 require(ggplot2)
require(grid)
require(zoo)
require(reshape)
require(reshape2)
require(directlabels)

time.data<-structure(list(Attribute = structure(c(1L, 1L, 2L, 2L, 3L, 3L, 
                                                  4L, 4L, 5L, 5L, 6L, 6L), .Label = c("Taste 1", "Taste 2", "Taste 3", 
                                                                                      "Use 1", "Use 2", "Use 3"), class = "factor"), Attribute.Category = structure(c(2L, 
                                                                                                                                                                      2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = c("Nutritional/Usage", 
                                                                                                                                                                                                                              "Taste/Quality"), class = "factor"), Attribute.Order = c(1L, 
                                                                                                                                                                                                                                                                                       1L, 2L, 2L, 3L, 3L, 4L, 4L, 5L, 5L, 6L, 6L), Category.Order = c(1L, 
                                                                                                                                                                                                                                                                                                                                                       1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L), Color = structure(c(1L, 
                                                                                                                                                                                                                                                                                                                                                                                                                        1L, 2L, 2L, 3L, 3L, 4L, 4L, 5L, 5L, 6L, 6L), .Label = c("#084594", 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "#2171B5", "#4292C6", "#6A51A3", "#807DBA", "#9E9AC8"), class = "factor"), 
                          value = c(75L, 78L, 90L, 95L, 82L, 80L, 43L, 40L, 25L, 31L, 
                                    84L, 84L), Date2 = structure(c(2L, 1L, 2L, 1L, 2L, 1L, 2L, 
                                                                   1L, 2L, 1L, 2L, 1L), .Label = c("1/1/2013", "9/1/2012"), class = "factor")), .Names = c("Attribute", 
                                                                                                                                                           "Attribute.Category", "Attribute.Order", "Category.Order", "Color", 
                                                                                                                                                           "value", "Date2"), class = "data.frame", row.names = c(NA, -12L
                                                                                                                                                           ))

label.data<-structure(list(7:12, Attribute = structure(1:6, .Label = c("Taste 1", 
                                                                       "Taste 2", "Taste 3", "Use 1", "Use 2", "Use 3"), class = "factor"), 
                           Attribute.Category = structure(c(2L, 2L, 2L, 1L, 1L, 1L), .Label = c("Nutritional/Usage", 
                                                                                                "Taste/Quality"), class = "factor"), Attribute.Order = 1:6, 
                           Category.Order = c(1L, 1L, 1L, 2L, 2L, 2L), Color = structure(1:6, .Label = c("#084594", 
                                                                                                         "#2171B5", "#4292C6", "#6A51A3", "#807DBA", "#9E9AC8"), class = "factor"), 
                           Significance = structure(c(2L, 3L, 1L, 1L, 3L, 2L), .Label = c("neg", 
                                                                                          "neu", "pos"), class = "factor"), variable = structure(c(1L, 
                                                                                                                                                   1L, 1L, 1L, 1L, 1L), .Label = "1/1/2013", class = "factor"), 
                           value = c(78L, 95L, 80L, 40L, 31L, 84L), Date2 = structure(c(1L, 
                                                                                        1L, 1L, 1L, 1L, 1L), .Label = "2013-01-01", class = "factor"), 
                           label.color = structure(c(1L, 2L, 3L, 3L, 2L, 1L), .Label = c("black", 
                                                                                         "forestgreen", "red"), class = "factor")), .Names = c("", 
                                                                                                                                               "Attribute", "Attribute.Category", "Attribute.Order", "Category.Order", 
                                                                                                                                               "Color", "Significance", "variable", "value", "Date2", "label.color"
                                                                                         ), class = "data.frame", row.names = c(NA, -6L))

color.palette<-as.character(unique(time.data$Color))

time.data$Date2<-as.Date(time.data$Date2,format="%m/%d/%Y")

plot<-ggplot()+
  geom_line(data=time.data,aes(as.numeric(time.data$Date2),time.data$value,group=time.data$Attribute,color=time.data$Color),size=1)+
  geom_text(data=label.data,aes(x=Inf, y=label.data$value, label=paste("  ",label.data$Attribute)),
            color=label.data$label.color,
            size=4,vjust=0, hjust=0,na.rm=T)+
  facet_grid(Attribute.Category~.,space="free")+
  theme_bw()+
  scale_x_continuous(breaks=as.numeric(unique(time.data$Date2)),labels=format(unique(time.data$Date2),format = "%b %Y"))+
  theme(strip.background=element_blank(),
        strip.text.y=element_blank(),
        legend.text=element_blank(),
        legend.title=element_blank(),
        plot.margin=unit(c(1,5,1,1),"cm"),
        legend.position="none")+
  scale_colour_manual(values=color.palette)

gt3 <- ggplot_gtable(ggplot_build(plot))
gt3$layout$clip[gt3$layout$name == "panel"] <- "off"
grid.draw(gt3) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T23:29:59.170

一些问题：

在您的审美声明中，您不应该将数据列引用为`time.data$Date2`，而应引用为`Date2`。该`data`参数指定在哪里查找该信息（对于给定的层，这些信息都需要在同一个 data.frame 中，但是，当您利用时，可以逐层改变）。

在`geom_text`通话中，`color`不在`aes`通话中；如果要将其映射到 data.frame 中的数据，则必须将其包含在`aes`调用中。这会在修复第一部分后引发不同的错误，因为它无法找到`label.color`任何地方，因为它不知道往里看`label.data`。

修复这些，然后`scale_colour_manual`抱怨有 9 种颜色，而您只提供了 6 种颜色。那是因为行中有 6 种颜色，文本中有 3 种颜色。由于您将这些指定为实际颜色名称，因此您可以使用`scale_colour_identity`.

把这一切放在一起：

```
plot <- ggplot()+
  geom_line(data=time.data, aes(as.numeric(Date2), value, 
                                group=Attribute, color=Color), 
            size=1)+
  geom_text(data=label.data, aes(x=Inf, y=value, 
                                 label=paste("  ",Attribute),
                                 color=label.color),
            size=4,vjust=0, hjust=0)+
  facet_grid(Attribute.Category~.,space="free") +
  scale_x_continuous(breaks=as.numeric(unique(time.data$Date2)),
                     labels=format(unique(time.data$Date2),format = "%b %Y")) +
  scale_colour_identity() +
  theme_bw()+
  theme(strip.background=element_blank(),
        strip.text.y=element_blank(),
        legend.text=element_blank(),
        legend.title=element_blank(),
        plot.margin=unit(c(1,5,1,1),"cm"),
        legend.position="none")
gt3 <- ggplot_gtable(ggplot_build(plot))
gt3$layout$clip[gt3$layout$name == "panel"] <- "off"
grid.draw(gt3) 
```

![在此处输入图像描述](../Images/378beb4be5f03d65d9b26f663c08e8e9.png)

要了解您可以减少多少示例，这更接近于最小化：

```
time.data <- 
structure(list(Attribute = structure(c(1L, 1L, 2L, 2L, 3L, 3L, 
4L, 4L), .Label = c("Taste 1", "Taste 2", "Use 1", "Use 2"), class = "factor"), 
    Attribute.Category = structure(c(2L, 2L, 2L, 2L, 1L, 1L, 
    1L, 1L), .Label = c("Nutritional/Usage", "Taste/Quality"), class = "factor"), 
    Color = c("#084594", "#084594", "#2171B5", "#2171B5", "#6A51A3", 
    "#6A51A3", "#807DBA", "#807DBA"), value = c(75L, 78L, 90L, 
    95L, 43L, 40L, 25L, 31L), Date2 = structure(c(15584, 15706, 
    15584, 15706, 15584, 15706, 15584, 15706), class = "Date")), .Names = c("Attribute", 
"Attribute.Category", "Color", "value", "Date2"), row.names = c(NA, 
-8L), class = "data.frame")

label.data <- 
structure(list(value = c(78L, 95L, 40L, 31L), Attribute = structure(1:4, .Label = c("Taste 1", 
"Taste 2", "Use 1", "Use 2"), class = "factor"), label.color = c("black", 
"forestgreen", "red", "forestgreen"), Attribute.Category = structure(c(2L, 
2L, 1L, 1L), .Label = c("Nutritional/Usage", "Taste/Quality"), class = "factor"), 
    Date2 = structure(c(15706, 15706, 15706, 15706), class = "Date")), .Names = c("value", 
"Attribute", "label.color", "Attribute.Category", "Date2"), row.names = c(NA, 
-4L), class = "data.frame")

ggplot() +
  geom_line(data = time.data, 
            aes(x=Date2, y=value, group=Attribute, colour=Color)) +
  geom_text(data = label.data,
            aes(x=Date2, y=value, label=Attribute, colour=label.color),
            hjust = 1) +
  facet_grid(Attribute.Category~.) +
  scale_colour_identity() 
```

![在此处输入图像描述](../Images/3f92874f52bf8490af634465981cdcc6.png)

主题内容（以及使标签在绘图之外可见）与问题无关，从 Date 到 numeric 的 x 轴转换也与处理具有`Inf`. 我还将数据修剪为只需要的列，并将分类变量减少到只有两个类别。

# javascript - javascript中的平滑div宽度变化

> ID：14373359
> 
> 赞同：3
> 
> 时间：2013-01-17T06:31:50.467
> 
> 标签：javascript, animation

我有一个简单的函数，它增加了一个 div 的宽度，但它做起来并不顺利，有点“判断力”。

我正在使用请求动画帧在 Chrome 上执行此操作.. 我决定不对数字进行四舍五入，这样我就可以获得十进制宽度增量.. 但我根本无法让它变得平滑我想知道如何改进我的方法。

这是我的功能：

```
function test(data){

var start = parseInt(data.start);
var length = parseInt(data.length); //total length in minutes to complete
var dif = (new Date().getTime() / 1000) - start; //start holds seconds since epoch
var minutes = dif / 60; //convert seconds past into minutes past
var percentage = (minutes/length) * 100;

if(percentage > 100){ percentage = 100; }

    if( percentage != 100 ){
        document.getElementById('r').style.width = percentage+'%';
        document.getElementById('rt').innerHTML = Math.round(percentage)+'%';
    } else if (percentage == 100 ){
        document.getElementById('r').style.width = percentage+'%';
        document.getElementById('rt').innerHTML = 'COMPLETED';
    }
} 
```

我的函数是这样调用的：

```
window.requestAnimFrame = (function(){
  return  window.requestAnimationFrame       || 
          window.webkitRequestAnimationFrame || 
          window.mozRequestAnimationFrame    || 
          window.oRequestAnimationFrame      || 
          window.msRequestAnimationFrame     || 
          function( callback,  element){
            window.setTimeout(callback, 200 / 100);
          };
})();

function Update(){
    requestAnimFrame( Update ); 
    test();
} 
```

JSFIddle：http: [//jsfiddle.net/RmXr9/7/](http://jsfiddle.net/RmXr9/7/)

关于提高 div 宽度递增平滑度的方法有什么建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T06:52:47.690

尝试使用 css 过渡。您可以获得更流畅的动画，但需要您以不同的方式构建代码。CSS转换属性的一个例子是：

```
transition:300ms linear; 
```

那么你改变的任何属性（例如宽度）都会向它进行平滑的线性 300 毫秒过渡。

因此，进行平滑的宽度更改就像设置过渡然后在 javascript 中执行以下操作一样简单：

```
div.style.width="400px"; 
```

这是我模拟的一个简单示例：

[http://jsfiddle.net/nTMsC/1/](http://jsfiddle.net/nTMsC/1/)

这是一个很好的教程，可以帮助您入门： [http ://www.css3.info/preview/css3-transitions/](http://www.css3.info/preview/css3-transitions/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T06:42:47.167

对我来说，“抖动”动画的最大原因之一一直是帧速率。如果您的帧速率太慢，显然动画会“颤抖”。但是如果浏览器处理的速度太快，浏览器就会感到困惑，你会得到一种不同的“判断”。

我建议帧速率在 13 到 30 毫秒之间。JQuery 应该使用 13 毫秒，但我发现这有时还是太快了。我一般从 16 毫秒开始，然后从那里开始实验。

关键是要确保您对它进行计时，以便一帧在前一帧完成时或之后开始。这将取决于您处理的代码。我注意到您在开始处理当前帧之前调用了下一帧，因此您可能仍在备份。也许尝试：

```
function Update(){
    test();
    requestAnimFrame( Update ); 
} 
```

您的后备函数的帧速率为`200 / 100`2 毫秒。您的浏览器极不可能在 2 毫秒内完成动画，因此它很可能会被备份。`requestAnimationFrame`使用 16 毫秒的最大帧速率。

**更新**：

根据您的 jsfiddle，您遇到的问题是，虽然您经常计算百分比，但百分比的变化非常小，并且它们不会转化为 div 宽度的变化。这个[http://jsfiddle.net/RmXr9/13/](http://jsfiddle.net/RmXr9/13/)应该演示百分比的变化，并显示实际宽度的相应变化。因此，尽管您经常进行计算（可能每秒 6​​0 次），但实际的视觉变化仅每 16 帧左右发生一次。因此，您的实际帧速率仅为每秒约 4 帧，这会产生“抖动”动画。恐怕你唯一的选择是让动画运行得更快（也许通过减少你的`length`变量），或者让 div 更长（或两者兼而有之）。

*顺便说一句，我注意到你没有办法在最后停止动画，我也把它添加到了 jsfiddle 中。*

# c# - 合并列表的优先排序

> ID：14373368
> 
> 赞同：0
> 
> 时间：2013-01-17T06:32:33.700
> 
> 标签：c#, generics, sorting

我有两个相同类型的对象列表。

一个列表来自系统管理员，另一个来自查看页面的用户。

在某些时候必须合并这些列表以便查看，并且`position`列表排序的值很可能具有冲突的值。

有没有办法合并这两个列表，当找到相同的位置值时，给管理列表提供较低（因此更好）的位置？

例子

```
class info
{
  int position;
  string title;
}

List<info> adminInfo = new List<info> 
{
  new info() {position = 0, title = "adminOne"}
  new info() {position = 4, title = "adminThree"}
  new info() {position = 3, title = "adminTwo"}
}

List<info> userInfo = new List<info> 
{
  new info() {position = 0, title = "userOne"}
  new info() {position = 3, title = "userTwo"}
}

List<info> PreferentiallySortedList(List<info> adminList, List<info> userList)
{
  //Some kind of magic here
}

//Looping through PreferentiallySortedList and displaying 
//the title of each item should return the following:

"adminOne"
"userOne"
"adminTwo"
"userTwo"
"adminThree" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:49:35.793

最简单的方法（代码方面）是将 LINQ 与 Union 一起使用，并创建一个新的匿名类，其中包含优先级和`info`.

像这样的东西（可能有语法错误）

```
return adminList
   .Select(info => new {Priority = 0, Info = info})
   .Union(userList.Select(info => new {Priority = 1, Info = info}))
   .SortBy(u => u.Info.position)
   .ThenBy(u => u.Priority)
   .Select(u => u.Info)
   .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:39:49.057

如果每个`info`仅出现在其中一个列表中，您可以不使用匿名对象来执行此操作。联合列表，按 排序`position`，然后按元素是否包含在 中`adminList`：

```
List<info> PreferentiallySortedList(List<info> adminList, List<info> userList)
{
    return adminList.Union(userList)
                    .OrderBy(u => u.position)
                    .ThenBy(u => !adminList.Contains(u))
                    .ToList();
} 
```

根据列表的大小，可能需要考虑性能。

# selenium - IE 在测试套件执行时不断地最大化和最小化

> ID：14373371
> 
> 赞同：1
> 
> 时间：2013-01-17T06:32:45.463
> 
> 标签：selenium, internet-explorer-8, automation, webdriver, selenium-webdriver

我正在使用
Selenium 独立服务器 - 2.25.0
IE - 8.0.7601.17514（64 位版本）
IEDriverServer.exe - 2.28.0（64 位）
操作系统 - Windows 7 专业
Java - SDK7

我正在使用下面的代码来启动 IE 并运行一个简单的测试。

```
 WebDriver driver = null;
    DesiredCapabilities ieCapabilities = null;
    ieCapabilities = DesiredCapabilities.internetExplorer();
    if (ieCapabilities != null) {
        driver = new InternetExplorerDriver(ieCapabilities);
    }
    driver.get("http://www.yebhi.com/");
    // driver.findElement(By.id("anchSighin")).click();

    driver.findElement(By.xpath("//div/ul/li/a/div/span")).click();
    driver.findElement(By.xpath("//div[80]/a")).click();
    driver.findElement(By.xpath("//div[4]/div/div[2]/div/div[4]/a"))
            .click();
    Thread.sleep(5000);
    driver.findElement(By.xpath("//div[5]/div[4]/div/div[4]/a")).click();
    driver.switchTo().frame(2);
    driver.findElement(By.id("txtMoblogin")).clear();
    driver.findElement(By.id("txtMoblogin")).sendKeys("ghfghghf");
    driver.findElement(By.id("txtMobPass")).clear();
    driver.findElement(By.id("txtMobPass")).sendKeys("hfghgh");
    Thread.sleep(5000);
    driver.findElement(By.id("btnLogin")).click(); 
```

通过使用上面的代码，我能够启动并运行测试，但是有一个问题。
实际问题是`the browser is continuously maximizing and minimizing until the test suite get finished.`

我在这个问题上挣扎了一个多星期。我不知道天气这是否是一个错误。如果这是一个错误，请解决我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:51:59.880

IE 驱动程序正在调整 IE 窗口的大小，因为您正在截屏。它的 WebDriver，截图，顾名思义，是整页的。但是，为了在不滚动的情况下截取整个页面（这会破坏绝对定位的元素），您必须能够在 IE 中呈现整个页面。使整页呈现的唯一方法是调整 IE 窗口的大小，以便整页可见而无需滚动。因此，IE 驱动程序会自动调整屏幕截图 API 调用的大小，然后将窗口恢复到调用前的状态。

# c# - 使用 RSACryptoServiceProvider 对来自服务器的哈希进行签名，然后从客户端验证哈希

> ID：14373373
> 
> 赞同：1
> 
> 时间：2013-01-17T06:32:46.807
> 
> 标签：c#, .net, rsa

嗨，我一直在寻找整个互联网，但我找不到解决我的签名和验证问题的方法。首先，我想确保在理解发生的事情时我走在正确的轨道上，所以请纠正我。签名的第一件事是服务器首先创建两个密钥，一个是公共的，一个是私有的。然后服务器将数据文本、公钥、然后散列和加密（使用它的私钥）数据文本放在文件上。服务器将文件发送给客户端，客户端开始通过获取文件中的公钥来验证数据，并使用它来解密加密的数据。最后，客户端对文本数据使用哈希算法（与服务器相同），并将其与解密的数据进行比较。

如果这没问题，那么我不明白为什么我的代码不起作用：

服务器：

```
string name = textBox1.Text;
string GUID = textBox2.Text;
string startDate = textBox3.Text;
string EndDate = textBox4.Text;
string macAddress = GetMacAddress();
FileStream fs = File.Create(@"cert.txt");
RSACryptoServiceProvider RSA = new RSACryptoServiceProvider();
UnicodeEncoding ByteConverter = new UnicodeEncoding();
StreamWriter write = new StreamWriter(fs);
write.Write(name + "\r\n");
write.Write(GUID + "\r\n");
write.Write(startDate + "\r\n");
write.Write(EndDate + "\r\n");
write.Write(macAddress + "\r\n");
string pkey = RSA.ToXmlString(false);
write.Write(pkey + "\r\n");
SHA1Managed Sha = new SHA1Managed();
string info = name + GUID + startDate + EndDate + macAddress;
byte [] hashed = Sha.ComputeHash(Encoding.UTF8.GetBytes(info));
byte []signature = RSA.SignData(hashed,CryptoConfig.MapNameToOID("SHA1"));
write.Write(Convert.ToBase64String(signature));
textBox5.Text = Convert.ToBase64String(hashed);
write.Close();
fs.Close(); 
```

客户：

```
FileStream fsSource = new FileStream(@"cert.txt", FileMode.Open,              FileAccess.Read);
StreamReader reader = new StreamReader(fsSource);
string name = reader.ReadLine();
string GUID = reader.ReadLine();
string startDate = reader.ReadLine();
string EndDate = reader.ReadLine();
string macAddress = reader.ReadLine();
string pkey = reader.ReadLine();
string signed = reader.ReadLine();
RSACryptoServiceProvider RSA = new RSACryptoServiceProvider();
RSA.FromXmlString(pkey);
string info = name + GUID + startDate + EndDate + macAddress;
SHA1Managed Sha = new SHA1Managed();
byte[] checkinghash = Sha.ComputeHash(Encoding.UTF8.GetBytes(info));
if (RSA.VerifyHash(checkinghash, CryptoConfig.MapNameToOID("SHA1"), Encoding.UTF8.GetBytes(signed)))
{
    Console.WriteLine("verfied");
}
else
{
    Console.WriteLine("denied");
}
Console.WriteLine();
//Console.WriteLine(signed);
Console.ReadKey(); 
```

这总是会产生拒绝，因为我不确定我是否丢失了公钥或者这是错误的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T06:51:02.257

您的问题是您在服务器端使用 SignData

```
byte []signature = RSA.SignData(hashed,CryptoConfig.MapNameToOID("SHA1")); 
```

但是在您的客户端上，您使用 VerifyHash

```
if (RSA.VerifyHash(checkinghash, CryptoConfig.MapNameToOID("SHA1"), Encoding.UTF8.GetBytes(signed))) 
```

在您的服务器上您必须使用 SignHash

```
byte []signature = RSA.SignHash(hashed,CryptoConfig.MapNameToOID("SHA1")); 
```

而且你必须改变 if 像下面

```
if (RSA.VerifyHash(checkinghash, CryptoConfig.MapNameToOID("SHA1"),Convert.FromBase64String(signed))) 
```

# hadoop - 如何在 hive 中自动加载数据

> ID：14373375
> 
> 赞同：6
> 
> 时间：2013-01-17T06:33:07.627
> 
> 标签：hadoop, load, hive

最近我想将日志文件加载到 hive 表中，我想要一个可以从某个目录读取数据并将它们自动加载到 hive 中的工具。这个目录可能包含很多子目录，例如某个目录是'/log'，子目录是'/log/20130115','/log/20130116','/log/201301017'。是否有一些ETL工具可以实现这样的功能：一旦新数据存储在某个目录中，该工具可以自动检测该数据并将其加载到hive表中。有没有这样的工具，我必须自己写脚本吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T07:06:57.677

您可以使用 Hive 外部表轻松完成此操作并按天对表进行分区。例如，这样创建您的表：

```
create external table mytable(...) 
partitioned by (day string) 
location '/user/hive/warehouse/mytable'; 
```

这实际上将在元存储中创建一个空表并使其指向`/user/hive/warehouse/mytable`.

然后您可以使用**key=value**格式将数据加载到此目录中，其中**key**是您的分区名称（此处为“day”），value 是您的分区的值。例如：

```
hadoop fs -put /log/20130115 /user/hive/warehouse/mytable/day=20130115 
```

一旦你的数据被加载到那里，它就在 HDFS 目录中，但是 Hive 元存储还不知道它属于表，所以你可以这样添加它：

```
alter table mytable add partition(day='20130115'); 
```

您应该一切顺利，元存储将使用您的新分区进行更新，您现在可以在该分区上查询您的表。

这对脚本来说应该是微不足道的，您可以创建一个每天运行一次的 cron 作业，它将按顺序执行这些命令并找到要使用该`date`命令加载的分区，例如连续执行此命令：

```
hadoop fs -test /log/`date +%Y%m%d` 
```

并检查是否`$?`等于 0 将告诉您文件是否在这里，如果是，您可以传输它并如上所述添加分区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T08:17:51.537

您可以使用 Hive 提供的 LOAD DATA 命令。它完全符合您的用例。在本地文件系统中指定一个目录并从中创建 Hive 表。

示例用法 - LOAD DATA LOCAL INPATH '/home/user/some-directory' OVERWRITE INTO TABLE 表

# android - 如何将 .db 文件与另一个 .apk android 附加

> ID：14373380
> 
> 赞同：0
> 
> 时间：2013-01-17T06:33:34.633
> 
> 标签：android, android-sqlite, android-assets

我正在制作字典，我有很多数据要加载。我希望我创建一个项目，首先将字典单词加载到数据库中，然后在我的第二个项目（即字典项目）中使用这个 .db 文件。

但我不知道如何获取 .db 文件并将其复制并粘贴到我的资产文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:42:26.473

好吧，你不能简单地将任何文件从一个私人存储复制到另一个。我想您可以使用不同的方式将其存档，例如：

1）通过第一个应用程序将您的`.db`文件复制到SD卡，然后通过第二个应用程序将其复制回私人存储。

2) 您可以使用[ContentProvider](https://developer.android.com/guide/topics/providers/content-providers.html)在 2 个不同的应用程序之间共享私有数据，而无需将其移动到 SD 卡上。

您无法直接访问不同应用程序的评估或任何其他数据文件夹。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:00:55.400

您可以使用 PackageManager.getResourcesForApplication() 方法从其他包中获取资源。您还可以在您的应用程序之间共享用户 ID，并使用共享证书对其进行签名。在这种情况下，您甚至可以共享代码库。+@Evos 的建议。

我认为共享用户 ID 是您的选择。

您可以在这篇文章和[这里](https://stackoverflow.com/questions/12716607/accessing-assets-of-other-android-app-on-jelly-bean)[找到示例和更多信息](https://stackoverflow.com/questions/11626359/share-drawables-between-applications)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T09:58:03.240

打开你以前的项目他们打开DDMS选项卡，然后继续路径数据--->数据---->你的项目---->数据库--->.db文件现在选择该文件并单击右上角这里的屏幕是一个将文件从设备拉到 PC 的按钮，因此单击该按钮，现在将出现一个文件对话框，选择保存文件的位置，现在可以....此操作会将您的 .db 文件保存在您选择的位置，现在您可以复制此文件并将此文件放在您的新项目资产文件夹中，然后使用它。

# html - 显示的列跨度：table-cell

> ID：14373387
> 
> 赞同：0
> 
> 时间：2013-01-17T06:33:56.567
> 
> 标签：html, css

是否可以像使用`display: table-cell`表一样跨列跨越元素？`<td>``colspan="100%"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:29:38.647

首先，请意识到doing`colspan = "100%"`实际上相当于`colspan = "100"`——浏览器只是让单元格跨越所有列，以防列数小于100。

在一般情况下，要获得一个跨越整个表格的单元格，请查看[`<caption>`](http://www.quackit.com/html_5/tags/html_caption_tag.cfm)，尽管它的用途比人们希望的要有限。

至于您的问题，如果不使用实际的 HTML 表格，您基本上无法实现您想要实现的目标。不过，StackOverflow 上还有[许多其他问题的答案提供了技巧。](https://stackoverflow.com/questions/2403990/html-colspan-in-css)

# c# - 如何使用 All() 函数

> ID：14373389
> 
> 赞同：1
> 
> 时间：2013-01-17T06:34:25.507
> 
> 标签：c#, .net, linq, generics

我的方法如下

```
IEnumerable<T> All(Func<T, bool> filter); 
```

如何在我们的函数中使用过滤器参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:46:06.417

```
var arr = new[] { 1, 2, 3, 4 };
Func<int, bool> func = i => i > 0; // makes sure all numbers are greater than 0
bool b = arr.All(func); // returns true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T06:38:10.997

就像是

```
listitems.All(l=> l.value == data); 
```

即它将作为参数传递的 lambda 表达式

**注意**：这里的 listitem 是集合 ...它是从实现 IEnumerable 的类创建的，即它的列表、数组，其他你可以在 msdn 上查看

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T06:39:55.563

从[文档](http://msdn.microsoft.com/en-us/library/bb549151.aspx)中，您可以看到 filter 应该是一个函数，它接受一个类型的参数`T`并返回一个`bool`.

所以我认为该`All`方法将该`filter`函数应用于集合的所有元素，并返回那些返回的元素`filter`，`true`或者类似的东西。

另一种选择是根据过滤器测试集合并仅在所有项目都与过滤器匹配时才返回 true 的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T06:47:50.160

有一个模型：

```
 class Person {

        public property Name {get; set;}
    } 
```

和一个像这样的集合：

```
 List<Person> personRepo; 
```

您可以过滤您的列表，例如：

```
 var searchResults = personRepo.All(p => p.Name == "Frank Borland") 
```

# ide - Sublime Text 2 和 ZF2 ...自动完成不起作用

> ID：14373390
> 
> 赞同：4
> 
> 时间：2013-01-17T06:34:26.420
> 
> 标签：ide, zend-framework2, sublimetext2

我安装了带有所有 php 依赖项的 sublime text 2。还有一个名为**sublimecodeintel**的完整代码包。没有 zf2 支持的自动代码完成。例如，当我开始写作时

```
\Zend\Form\... 
```

在每个步骤 CTRL+Space 不会给出**Form**的任何子类， 例如在此之后：

```
$testimonial = new \Application\Entity\Testimonial(); 
```

当我写这个时：

```
$testimonial-> 
```

CTRL+Space 显示一个列表，但**Testimonial** php 类中没有列出任何方法。

请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T14:26:31.883

如果 ZF2 文件夹不在项目文件夹之一中，您可能需要添加路径，或者您可以将 .codeintel/config 文件添加到项目根目录并添加：

```
{
    "PHP": {
        "php": '/usr/bin/php',
        "phpExtraPaths": ['path/to/ZF2'],
        "phpConfigFile": 'php.ini'
    }
} 
```

因此，请确保您正确设置了路径，并且它应该可以工作。自动完成的 SublimeCodeIntels 默认映射是：

*   Linux: **`shift`+ `ctrl`+`space`**
*   麦克：**`shift`+ `super`+`space`**
*   窗户：**`shift`+ `ctrl`+`space`**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T08:58:49.267

Sublime Text 2 不是 IDE，因此没有自动完成功能。您可以尝试安装[SublimeCodeIntel](https://github.com/Kronuz/SublimeCodeIntel)软件包，看看是否适合您。

或者，考虑一下[NetBeans](http://netbeans.org/features/php/)、[PHPStorm](http://www.jetbrains.com/phpstorm/)、[Zend Studio](http://www.zend.com/en/products/studio/)或[Eclipse/PDT](http://projects.eclipse.org/projects/tools.pdt)，它们都是了解如何使用 PHP 自动完成的 IDE。

# .net - 查找其他项目中特定 dll 的所有使用情况

> ID：14373391
> 
> 赞同：0
> 
> 时间：2013-01-17T06:34:44.000
> 
> 标签：.net, visual-studio

我是一个拥有 20 多名开发人员的团队的成员，每个开发人员都在一个单独的模块上工作（大约 10 个模块）。每个模块都有任何 DLL 并在我想要的其他项目中使用，当在项目搜索中使用此类在所有项目中自动搜索并显示结果时。

# prolog - 新手：无法跟踪表达式错误中的自由变量。序言编程

> ID：14373393
> 
> 赞同：0
> 
> 时间：2013-01-17T06:34:52.873
> 
> 标签：prolog, turbo-prolog

刚开始在 Prolog 中编程。我写了几个条款。

```
predicates
parent(symbol,symbol)
male(symbol)
female(symbol)
mother(symbol,symbol)
father(symbol,symbol)
brother(symbol,symbol)
sister(symbol,symbol)
uncle(symbol,symbol)
clauses
parent(arthur,fred).
parent(arthur,george).
parent(arthur,bill).
parent(arthur,percy).
parent(arthur,ginny).
parent(arthur,ron).
parent(arthur,charlie).

parent(molly,fred).
parent(molly,george).
parent(molly,bill).
parent(molly,percy).
parent(molly,ginny).
parent(molly,ron).
parent(molly,charlie).
parent(rowling,arthur).
parent(rowling,james).

parent(james,harry).
parent(lily,harry).

female(molly).
female(ginny).
female(lily).
female(rowling).

male(X) if not(female(X)).

brother(X,Y) if male(Y),X<>Y,brother(Y,X).
brother(X,Y) if X<>Y,parent(Z,X),parent(Z,Y),male(X).

mother(X,Y) if parent(X,Y),female(X).
father(X,Y) if parent(X,Y),male(X).
sister(X,Y) if parent(Z,X),parent(Z,Y),female(X),X<>Y.
uncle(X,Y) if parent(Z,Y),brother(X,Z). 
```

但是当我试图问问题时

```
brother(X,james) 
```

它在**X** <> Y 行的表达式中显示自由变量

```
brother(X,Y) if male(Y),X<>Y,brother(Y,X). 
```

我无法追踪代码有什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:15:29.283

也许你可以尝试简化规则

```
brother(X,Y) if male(Y),X<>Y,parent(Z,X),parent(Z,Y). 
```

但这行不通，因为 male/2 它仅以否定的方式定义。为了使它工作，我会添加：

```
person(X) :- parent(X,_) ; parent(_,X).
male(X) :- person(X), not(female(X)). 
```

现在男/1 能够产生积极的信息......

（注意：未经测试的代码）

**编辑**一个更好的方法，而不添加 person/1，可能是

```
/* Y is brother of X */
brother(X,Y) if parent(Z,X), parent(Z,Y), X<>Y, male(Y). 
```

# ruby-on-rails-3 - 随着时间在 Torquebox 中的流逝，没有消费者减少

> ID：14373394
> 
> 赞同：6
> 
> 时间：2013-01-17T06:34:54.383
> 
> 标签：ruby-on-rails-3, jboss7.x, jrubyonrails, torquebox

我有一个在扭矩箱上的轨道应用程序。我正在将处理器用于一些后台作业。我已经为那个处理器分配了 4 名工人。

```
queues:
  /queue/company:

messaging:
  /queue/company:
    CompanyWorker:
      concurrency: 4 
```

`CompanyWorker`正在打电话给其他一些网站。它可能会引发异常，但我已经被工人自己抓住了。但是当我注意到我的日志时，我发现没有。随着时间的推移，线程/工作人员的数量会减少。10-15 小时后，只有一个线程/处理器在工作。我如何阻止这种情况发生并让所有 4 个工作人员/处理器保持活力。

几个小时后，我只看到

```
22:29:40,945 INFO  [stdout] (Thread-124 (HornetQ-client-global-threads-1460048766)) 
```

只有线程 124 做它的工作，

几个小时后，我需要重新启动服务器以使所有 4 个处理器正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:30:02.443

确保您的所有处理器都已完成，即不会无限期挂起。还要确保你正在捕捉 Throwable，所以不会有任何被抛出的东西逃脱。

# php - 在php中添加日期和日期

> ID：14373396
> 
> 赞同：1
> 
> 时间：2013-01-17T06:35:04.490
> 
> 标签：php

在我的项目中，我必须从包裹的“购买日期”和包裹的“有效期”中获取包裹的到期日期。我从 php.net 获得了如下代码

```
<?php
$date = new DateTime('2000-01-01');
$date->add(new DateInterval('P10D'));
echo $date->format('Y-m-d') . "\n";
?> 
```

现在假设购买日期为 2013-01-17，有效期为 180 现在如果我使用 php.net 示例如下

```
<?php
$date = new DateTime('2013-01-17');
$date->add(new DateInterval('P180D'));
echo $date->format('Y-m-d') . "\n";
?> 
```

我会得到 2013-04-17 的输出吗？我需要像这样的输出

```
yyyy-mm-dd 
```

我无法在我的个人计算机上运行该程序，但我必须进行项目的编码，所以我在这里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T06:37:28.143

```
<?php
 $date = new DateTime('2013-01-17');
 $date->add(new DateInterval('P180D'));
 echo $date->format('Y-m-d') . "\n";
?>

//output
//2013-07-16   and it is in yyyy-mm-dd format 
```

工作示例[http://codepad.viper-7.com/gAtT2D](http://codepad.viper-7.com/gAtT2D)

如果您无法在 PC 中运行该程序，请使用在线调试器外壳。

# codeigniter - 查看相同的 user_id

> ID：14373400
> 
> 赞同：0
> 
> 时间：2013-01-17T06:35:39.790
> 
> 标签：codeigniter

```
//Anyone can help to create a view data with same id? it is a multiple viewing. 
```

这是我的控制器。我不知道适用于模型和视图

```
 function Get_Pitch($id){
            $this->load->model('users_model');

            $data['query'] = $id;

           $this->load->view('view_pitch', $data);  

        }

Example this is my url "http://localhost/SMS_System/home/sample/102" 
```

在我的数据库中是

```
id=1 name=erwin user_id=102
id=2 name=flores user_id=102
id=3 name=sample user_id=202 
```

如何查看相同的user_id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:37:16.177

首先，您提供的 URL 不起作用，您没有遵循 CI 的常规约定，因此它不知道在哪里查找。我假设您的控制器被称为示例然后您需要告诉应用程序您在该控制器中调用哪个函数，最后 URL 名称应该是小写所以我改变了它，所以你的 URL 应该是：

“http://localhost/SMS_System/home/sample/get_pitch/102”

您还需要从模型中获取数据，您加载了模型然后没有使用它。加载模型后的行从该模型调用一个函数，并将您从 url 获得的 id 传递给它。请注意 id 上的 if not isset，这可以确保如果有人在没有 id 段的情况下进入该页面，则不会从缺少参数的模型中抛出任何错误，它只会返回任何内容，这在视图中进行处理。

控制器：

```
function get_pitch($id){
   //the following line gets the id based on the segment it's in in the URL
   $id=$this->uri_segment(3);
   if(!isset($id))
   {
      $id = 0;
   }
   $this->load->model('users_model');
   $data['query'] = $this->users_model->getUserData($id);
   $this->load->view('view_pitch', $data); 
```

}

您的模型采用从控制器传递的 id 并使用它从数据库中检索数据。我通常创建我将作为空数组返回的数组并在视图中处理它，这样可以确保在查询失败时不会出错。然后数据在最后一行返回到控制器，并在您的加载视图调用中传递给视图。

模型：

```
function getUserData($id)
{
    $this->db->where('id',$id);
    $result = $this->db->get('users') //assuming the table is named users 
    $data = array(); //create empty array so we aren't returning nothing if the query fails
    if ($result->num_rows()==1) //only return data if we get only one result
    {
      $data = $result->result_array();
    }
    return $data;
} 
```

然后，您的视图将通过控制器从模型接收到数据并显示它（如果存在），如果数据不存在，则显示错误，说明用户不存在。看法：

```
if(isset($query['id']))
{
  echo $query['id']; //the variable is the array we created inside the $data variable in the controller.
  echo $query['name'];
  echo $query['user_id'];
} else {
  echo 'That user does not exist';
} 
```

# sharepoint - 基于 DVWP 中的下拉列表进行过滤

> ID：14373403
> 
> 赞同：2
> 
> 时间：2013-01-17T06:35:52.780
> 
> 标签：sharepoint, xslt, filter, dataviewwebpart

我创建了一个 DVWP 下拉列表，用于过滤我使用 DVWP 显示的列表。我已将年份列表设置为下拉 DVWP 数据源，在选择年份时，我想过滤列表 DVWP 以显示按年份过滤的项目。

下拉菜单：
`<select name="ID" size="1" onchange="document.location.href='http://server/site.aspx' + '?' + 'year' + '=' + this.options[selectedIndex].value">`。

我添加了一个 QueryString 参数，该参数`param1`将其值从此`Year`下拉列表以及 DVWP 列表中获取。在 DVWP 列表中，我添加了一个过滤条件，即：`Year equals [Param1]`. 注意：这里的年份是一个计算列，它从日期字段中获取年份。
我的问题是，即使下拉列表在选择一个值后被回发，它也不会被过滤。我在这方面做错了什么？我一直在为此绞尽脑汁，但无论我尝试什么，我都无法让它发挥作用。请帮忙。

```
<xsl:template name="dvt_1">
            <xsl:variable name="dvt_StyleName">Table</xsl:variable>
            <xsl:variable name="Rows" select="/dsQueryResponse/Rows/Row"/>
            <xsl:variable name="dvt_FieldNameNoAtSign" select="substring-after($dvt_filterfield, '@')" />
            <xsl:variable name="dvt_FilteredRowsText" select="$Rows[.=$dvt_filterval or ($dvt_filtertype='date' and substring-before($dvt_filterval,'T') = substring-before(.,'T'))]" />
            <xsl:variable name="dvt_FilteredRows" select="$Rows[normalize-space(*[name()=$dvt_filterfield])=$dvt_filterval or ($dvt_filtertype='date' and substring-before($dvt_filterval,'T') = substring-before(normalize-space(*[name()=$dvt_filterfield]),'T'))]" />
            <xsl:variable name="dvt_FilteredRowsAttr" select="$Rows[normalize-space(@*[name()=$dvt_FieldNameNoAtSign])=$dvt_filterval or ($dvt_filtertype='date' and substring-before($dvt_filterval,'T') = substring-before(normalize-space(@*[name()=$dvt_FieldNameNoAtSign]),'T'))]" />
            <xsl:variable name="dvt_RowCount">
                <xsl:choose>
                    <xsl:when test="$dvt_adhocfiltermode != 'query' and $dvt_filterfield">
                        <xsl:choose>
                            <xsl:when test="starts-with($dvt_filterfield, '@')"><xsl:value-of select="count($dvt_FilteredRowsAttr)" /></xsl:when>
                            <xsl:when test="$dvt_filterfield = '.'"><xsl:value-of select="count($dvt_FilteredRowsText)" /></xsl:when>
                            <xsl:otherwise><xsl:value-of select="count($dvt_FilteredRows)" /></xsl:otherwise>
                        </xsl:choose>
                    </xsl:when>
                    <xsl:otherwise><xsl:value-of select="count($Rows)" /></xsl:otherwise>
                </xsl:choose>
            </xsl:variable>
            <xsl:variable name="RowLimit" select="10" />
            <xsl:variable name="FirstRow" select="$dvt_firstrow" />
            <xsl:variable name="LastRow">
                <xsl:choose>
                    <xsl:when test="($FirstRow + $RowLimit - 1) &gt; $dvt_RowCount"><xsl:value-of select="$dvt_RowCount" /></xsl:when>
                    <xsl:otherwise><xsl:value-of select="$FirstRow + $RowLimit - 1" /></xsl:otherwise>
                </xsl:choose>
            </xsl:variable>
            <xsl:variable name="IsEmpty" select="$dvt_RowCount = 0 or $RowLimit = 0" />
            <xsl:variable name="dvt_IsEmpty" select="$dvt_RowCount = 0"/>
            <xsl:call-template name="dvt_1.toolbar">
                <xsl:with-param name="Rows" select="$Rows" />
            </xsl:call-template>
            <xsl:choose>
                <xsl:when test="$dvt_IsEmpty">
                    <xsl:call-template name="dvt_1.empty"/>
        </xsl:when> 
```

这是你要找的吗？

嗯，如果这有帮助，在我用来填充下拉列表的列表中，“年份”字段有一个内部名称`@Title`。会不会跟这个有关系？
`<xsl:template name="dvt_1.rowview"> <option> <xsl:value-of select="@Title" /> </option> </xsl:template>` . 但它也有`@Year`，所以不确定哪个是哪个。
`<td class="ms-vb"> <xsl:value-of select="@Year"/> </td>`
糟糕，很抱歉造成混淆。第二个`@Year`是我创建的计算列。
更新 2：您要求的代码：

```
<td class="ms-toolbar" nowrap="nowrap">
                                <xsl:call-template name="dvt.filterfield">
                                    <xsl:with-param name="fieldname">@Year</xsl:with-param>

                                    <xsl:with-param name="fieldtitle">Year</xsl:with-param>

                                    <xsl:with-param name="Rows" select="$Rows" />

                                    <xsl:with-param name="fieldtype">text</xsl:with-param>

                                </xsl:call-template> 
```

已经为这两个 dvwp 创建了这样的东西：
`<xsl:param name="ListID">{6889CA36-79AC-4FA8-9F0A-C013C944B3C5}</xsl:param> <xsl:param name="Param1" />`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:19:17.970

我刚刚注意到（感谢我的一位同事）`Year`计算列是一个字符串。因此，对于 2013 年，它将其存储为 2,013，因此我无法正确过滤 DVWP。我使用`=TEXT(([columnname], "yyyy")`而不是`YEAR([colname])`一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:41:40.423

如果您的参数名称被称为`param1`，那么我相信您的下拉列表将需要将一个名为“param1”的查询字符串参数传递到 URL 而不是“年份”。您可以尝试将选择标签修改为这样吗？：

```
<select name="ID" size="1"
  onchange="document.location.href='http://server/site.aspx?param1=' 
  + this.options[selectedIndex].value"> 
```

# ios - 从 iPad 设备打开日历的示例代码

> ID：14373407
> 
> 赞同：0
> 
> 时间：2013-01-17T06:36:04.117
> 
> 标签：ios, calendar, xcode4.5

我是 iOS 编程新手。我的要求是从设备打开日历以在日历中添加事件。你能告诉我如何进行吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:52:31.450

看看事件工具包。它允许使用日历[http://developer.apple.com/iphone/library/documentation/DataManagement/Conceptual/EventKitProgGuide/Introduction/Introduction.html](http://developer.apple.com/iphone/library/documentation/DataManagement/Conceptual/EventKitProgGuide/Introduction/Introduction.html)

# python - python gtk 保存 gtksourceview

> ID：14373409
> 
> 赞同：0
> 
> 时间：2013-01-17T06:36:10.610
> 
> 标签：python, gtk, save, gtktextview

我正在使用 Python 中的 GTK。我注意到另存为很容易，但由于某种原因，我不能只保存文件。我以为我会设置它以检查它是否已保存然后保存，但由于某种原因，它会一遍又一遍地重新启动函数，而不会保存文件名的值。杀死我的是这感觉像是一个初学者的错误。不知何故，我忘记在函数运行后保留该值。我希望这是有道理的。

```
def SaveFile(filename):
    chooser = gtk.FileChooserDialog("Save File...", None,
                                    gtk.FILE_CHOOSER_ACTION_SAVE,
                                    (gtk.STOCK_CANCEL, gtk.RESPONSE_CANCEL, 
                                     gtk.STOCK_SAVE, gtk.RESPONSE_OK))

    filename = chooser.get_filename()
    if filename == None:
        response = chooser.run()
        if response == gtk.RESPONSE_OK:
            filename = chooser.get_filename()
            chooser.destroy()
            wbuffer = textview.get_buffer()
            text = wbuffer.get_text(wbuffer.get_start_iter(), wbuffer.get_end_iter())
            openfile = open(filename,"w")
            openfile.write(text)
            openfile.close()
            print filename, "this is the first part"
            return filename
        else:
            chooser.destroy()
    elif filename != None:
        wbuffer = textview.get_buffer()
        text = wbuffer.get_text(wbuffer.get_start_iter(), wbuffer.get_end_iter())
        openfile = open(filename,"w")
        openfile.write(text)
        openfile.close()
        print filename, "made it this far"
        return filename
    else:
        chooser.destroy()
        return filename 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:22:55.003

据我所知，您不会在两次通话之间以任何方式保留您的文件名。您调用`filename = chooser.get_filename()`一个新创建的 FileChooseDialog - 这将始终返回`None`。

由于我对您的程序的体系结构不了解更多，我可以建议使用全局变量来保存文件名，例如：

```
filename = None

def SaveFile(filename):
    global filename
    if filename == None:
        chooser = gtk.FileChooserDialog("Save File...", None,
                                    gtk.FILE_CHOOSER_ACTION_SAVE,
                                    (gtk.STOCK_CANCEL, gtk.RESPONSE_CANCEL, 
                                     gtk.STOCK_SAVE, gtk.RESPONSE_OK))
        response = chooser.run()
        if response == gtk.RESPONSE_OK:
            filename = chooser.get_filename()
            chooser.destroy()
            wbuffer = textview.get_buffer()
            text = wbuffer.get_text(wbuffer.get_start_iter(), wbuffer.get_end_iter())
            openfile = open(filename,"w")
            openfile.write(text)
            openfile.close()
            print filename, "this is the first part"
            return filename
        else:
            chooser.destroy()
    elif filename != None:
        wbuffer = textview.get_buffer()
        text = wbuffer.get_text(wbuffer.get_start_iter(), wbuffer.get_end_iter())
        openfile = open(filename,"w")
        openfile.write(text)
        openfile.close()
        print filename, "made it this far"
        return filename
    else:
        chooser.destroy()
        return filename 
```

但是请记住，更改全局变量总是很危险的，也许您可​​以想出更好的方法。如果你把你的方法放到一个类中，你可以`filename`为这个类创建一个属性，例如，`self._filename`。

另一句话：永远不要重复代码。在`if`-branch 和`elif`-branch 中，您调用

```
 wbuffer = textview.get_buffer()
        text = wbuffer.get_text(wbuffer.get_start_iter(), wbuffer.get_end_iter())
        openfile = open(filename,"w")
        openfile.write(text)
        openfile.close() 
```

把它放到一个单独的方法中。我保证如果你改变你的文件编写，你会忘记改变这个代码片段的第二次出现。

# email-attachments - 带有 uuencode 的 Mailx 未在 Suse Linux 上发送具有正确电子邮件正文的多个附件

> ID：14373410
> 
> 赞同：0
> 
> 时间：2013-01-17T06:36:27.677
> 
> 标签：email-attachments, suse, mailx, uuencode

下面这段特定的代码在 AIX 上正常工作

```
( echo "mailbody";
  uuencode a.txt 'arenamed.txt';
  uuencode ab.txt 'abrenamed.txt';
  uuencode abc.txt 'abcrenamed.txt';
  uuencode abcd.txt 'abcdrenamed.txt'; ) | mailx -s "$subject" $emailaddress; 
```

但在 Linux 上，任何出现的 uuencode 都会在 Outlook 2010 上查看的电子邮件正文中打印 begin 644 个块。

```
begin 644 abc.txt
5:F%H<V1L:G-A"F%S9&MJ87-J9#L*
`
end 
```

我已经尝试过，首先使用 echo 的不同变体（ echo $body ; uuencode filename filenamechanged ），然后使用 uuencode ，反之亦然，但这没有帮助。我会使用“mail -a”，但我想重命名通过电子邮件发送的文件，所以，正在查看 uuencode。

除了在这里使用 sendmail/mutt 之外还有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-10T05:24:42.840

这是有效的

```
(echo "Subject: $Mail_Subject";
echo "To:$Mail_List";
echo $Mail_Body;
uuencode $LOG_DIR/FileName1 'AttachmentDisplayName1';
uuencode $LOG_DIR/FileName2 'AttachmentDisplayName2') | sendmail -t $Mail_List 
```

希望这可以帮助任何正在寻找此类问题的人。

# php - craigslist 如何获取位置

> ID：14373412
> 
> 赞同：0
> 
> 时间：2013-01-17T06:36:35.640
> 
> 标签：php, javascript, location, craigslist

> **可能重复：**
> [免费的地理定位 geoip，它们可行吗？](https://stackoverflow.com/questions/2497965/free-geolocation-geoip-are-they-viable)

我想找到最精确的方法来跟踪访问者的位置。我注意到 craigslist 可以准确地获取用户的位置，而不需要用户的任何输入。谁能告诉我他们在做什么来跟踪用户？我希望我的网络程序和他们的一样准确。

注意：（我一直在使用 JavaScript / PHP。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:26:46.997

Mybe你想用这个

```
<script type="text/javascript" src="http://j.maxmind.com/app/geoip.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:50:48.913

他们几乎肯定在使用 GeoIP 数据库或某种网络服务。提供这些服务的最著名的公司可能是[MaxMind](http://www.maxmind.com/en/geolocation_landing)。

上次我检查时，MaxMind 提供了他们数据库的免费和不太准确的版本，还有其他提供商也提供免费数据库（我个人无法保证）。有[关于这些免费替代品的讨论](https://stackoverflow.com/questions/2497965/free-geolocation-geoip-are-they-viable)。

PHP 有[一个模块](http://php.net/manual/en/book.geoip.php)，可以与 MaxMind 提供的 GeoIP 数据库一起使用。

# sql - SQL Server 中的作业历史记录

> ID：14373413
> 
> 赞同：3
> 
> 时间：2013-01-17T06:36:41.847
> 
> 标签：sql, sql-server, tsql, reporting-services, sql-job

我正在尝试解决有关过去几天 SQL Server 作业历史记录的一些问题，但没有成功。我喜欢在日志文件查看器中显示作业历史数据。我运行查询并获取数据，但我对如何知道哪个步骤属于在特定时间运行的作业感到困惑。假设我们每小时运行一个作业并且它有 4 个步骤，所以当每个作业运行时，它将在 sysjobhistory 中插入 5 条记录以成功运行现在我担心哪些步骤属于在特定时间运行的哪个作业。如果我想创建一个，如何在深入报告中显示它。

```
SELECT sysjobhistory.server,
         sysjobs.name
         AS
         job_name,
         CASE sysjobhistory.run_status
           WHEN 0 THEN 'Failed'
           WHEN 1 THEN 'Succeeded'
           ELSE '???'
         END
         AS
         run_status,
         Isnull(Substring(CONVERT(VARCHAR(8), run_date), 1, 4) + '-' +
                       Substring(CONVERT(VARCHAR
                                 (8), run_date), 5, 2) + '-' +
                Substring(CONVERT(VARCHAR(
                          8), run_date), 7, 2), '')
         AS
         [Run DATE],
         Isnull(Substring(CONVERT(VARCHAR(7), run_time+1000000), 2, 2) + ':'
                 +
                       Substring(CONVERT(VARCHAR(7), run_time+1000000), 4, 2
                        )
                +
                ':' +
                Substring(CONVERT(VARCHAR(7), run_time+1000000), 6, 2), '')
         AS
         [Run TIME],
         Isnull(Substring(CONVERT(VARCHAR(7), run_duration+1000000), 2, 2) +
                 ':' +
                       Substring(CONVERT(VARCHAR(7), run_duration+1000000),
                       4,
                       2)
                + ':' +
                Substring(CONVERT(VARCHAR(7), run_duration+1000000), 6, 2),
         ''
         ) AS
         [Duration],
         sysjobhistory.step_id,
         sysjobhistory.step_name,
         sysjobhistory.MESSAGE
  FROM   msdb.dbo.sysjobhistory
         INNER JOIN msdb.dbo.sysjobs
           ON msdb.dbo.sysjobhistory.job_id = msdb.dbo.sysjobs.job_id

  ORDER  BY instance_id DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:08:24.073

你可以试试这个查询。它基于 step_id = 0 创建一个临时作业表，为每条记录分配一个唯一标识符。然后它使用运行时间和持续时间连接回作业历史表。因此，一个作业的所有步骤都将具有相同的 RUN_INSTANCE 值。

```
-- create a temporary table of instances when a job was initiated
declare @JOBS table
(
    RUN_INSTANCE uniqueidentifier, 
    job_id uniqueidentifier,
    name sysname,
    run_status int, 
    run_date int, 
    run_time int, 
    run_duration int
);

-- insert one record for each instanced job and assign it a unique identifier
insert into @JOBS
    select 
        RUN_INSTANCE = NewID(), 
        h.job_id, 
        j.name, 
        h.run_status, 
        h.run_date, 
        h.run_time, 
        h.run_duration
    from msdb.dbo.sysjobhistory h
        join msdb.dbo.sysjobs j on j.job_id = h.job_id
    where step_id = 0

-- query the jobs history
select 
    h.server,
    j.RUN_INSTANCE, 
    j.name, 
    h.step_id, 
    h.run_date, 
    h.run_time, 
    run_status = 
        case h.run_status
            when 0 then 'failed'
            when 1 then 'succeeded'
            when 2 then 'retry'
            when 3 then 'canceled'
            when 4 then 'in progress'
            else '???'
        end,
    h.message
from @JOBS j
    join msdb.dbo.sysjobhistory h on 
        h.job_id = j.job_id
        and convert(varchar(20),h.run_date) + convert(varchar(20),h.run_time) 
           between convert(varchar(20),j.run_date) + convert(varchar(20),j.run_time) 
           and convert(varchar(20),j.run_date) + convert(varchar(20),j.run_time + j.run_duration) 
order by j.RUN_INSTANCE, h.step_id 
```

# sql - 将pivot sql结果放入temptable的方法

> ID：14373414
> 
> 赞同：0
> 
> 时间：2013-01-17T06:36:52.637
> 
> 标签：sql, sql-server, pivot, pivot-table

在 sql server 上工作。写一个关键 sql，下面是我的**表和关键 sql 语法**。我的问题是未能将这个关键值放入 Temp 表中。

```
-----------------Table-1-------------
CREATE TABLE Table1 (ColId INT,ColName VARCHAR(10))
INSERT INTO Table1 VALUES(1, 'Country')
INSERT INTO Table1 VALUES(2, 'MONTH')
INSERT INTO Table1 VALUES(3, 'Day')

----------------Table-2----------------------------

CREATE TABLE Table2 (tID INT,ColID INT,Txt VARCHAR(10))

INSERT INTO Table2 VALUES (1,1, 'US')
INSERT INTO Table2 VALUES (1,2, 'July')
INSERT INTO Table2 VALUES (1,3, '4')
INSERT INTO Table2 VALUES (2,1, 'US')
INSERT INTO Table2 VALUES (2,2, 'Sep')
INSERT INTO Table2 VALUES (2,3, '11')
INSERT INTO Table2 VALUES (3,1, 'US')
INSERT INTO Table2 VALUES (3,2, 'Dec')
INSERT INTO Table2 VALUES (3,3, '25')

--------------
----------------Pivotal sql----------------------------

DECLARE @query NVARCHAR(4000)
DECLARE @cols NVARCHAR(2000)

SELECT  @cols = STUFF(( SELECT DISTINCT TOP 100 PERCENT
                                '],[' + t2.ColName
                        FROM    Table1 AS t2
                        ORDER BY '],[' + t2.ColName
                        FOR XML PATH('')
                      ), 1, 2, '') + ']'                    

SET @query = N'SELECT tID, '+
@cols +'
FROM
(SELECT  t2.tID
      , t1.ColName
      , t2.Txt 
FROM    Table1 AS t1
        JOIN Table2 AS t2 ON t1.ColId = t2.ColID) p
PIVOT
(
MAX([Txt])
FOR ColName IN
( '+
@cols +' )
) AS pvt
ORDER BY tID;'
EXECUTE(@query) 
```

执行下面的命令后，想将此值用于其余工作，所以我需要将此命令结果值放入临时表中

```
 EXECUTE(@query) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:50:30.403

尝试这个 ：

```
Declare @Sample table
(
 tID int,
 Country VARCHAR(10),
 Day int ,
 MONTH  VARCHAR(10)
)

Insert into @Sample 
EXECUTE(@query)

select * from @Sample 
```

以同样的方式，您可以创建一个`temp table`代替`table variable`并将其插入其中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:58:24.440

如果您能够通过使用 EXECUTE(@Querys) 来完成其余的程序，那么您可以做类似的事情

```
Declare @TabName Varchar(40)

Select @TabName='##'+Replace(CAST(NEWID() as Varchar(40)),'-','')

DECLARE @query NVARCHAR(4000)
DECLARE @cols NVARCHAR(2000)

SELECT  @cols = STUFF(( SELECT DISTINCT TOP 100 PERCENT
                                '],[' + t2.ColName
                        FROM    Table1 AS t2
                        ORDER BY '],[' + t2.ColName
                        FOR XML PATH('')
                      ), 1, 2, '') + ']'                    

SET @query = N'SELECT tID, '+
@cols +' into ' +@TabName + '
FROM
(SELECT  t2.tID
      , t1.ColName
      , t2.Txt 
FROM    Table1 AS t1
        JOIN Table2 AS t2 ON t1.ColId = t2.ColID) p
PIVOT
(
MAX([Txt])
FOR ColName IN
( '+
@cols +' )
) AS pvt
ORDER BY tID;'

Print @Query
EXECUTE(@query)

Select @query = 'Select * from ' + @Tabname
EXECUTE(@query)

Select @query = 'Drop Table ' + @Tabname
EXECUTE(@query) 
```

如果您不想这样做，您可以使用“硬”##temptable，但您将无法在多用户环境中使用此保存。

# html - HTML/CSS：将第二个背景图像与页面右下角对齐

> ID：14373416
> 
> 赞同：4
> 
> 时间：2013-01-17T06:36:57.147
> 
> 标签：html, css, background, alignment

*好吧，我多年来*一直在尝试解决这个问题。我尝试了许多不同的解决方案，但发现自己再次面临同样的问题，我真的很想向社区寻求解决这个问题的*最佳方法。*

*我想在我的页面背景上有两个图像：1 作为 xy 平铺的“纹理”，另一个图像将拥抱整个*页面的右下角，无论页面高度如何。因此，页面将如下所示：

![在此处输入图像描述](../Images/f59d10066e63e6139ac0d006d7dff614.png)

这不是通过我的 CSS 中的背景 img() 完成的，而是在页脚附近使用图像完成的，如下所示：

```
<style>
.specialImage{
  position: absolute;
  bottom:0;
  right:0;
  z-index:-99; /* or higher/lower depending on other elements */
}
</style>
<img src="/static/assets/img/stain.png" class="specialImage" /> 
```

这样做的问题是，如果页面比屏幕长，就会发生这种情况：

![在此处输入图像描述](../Images/a907b6cde018ebc526e5bf02b72121e1.png)

不好。将位置更改为“固定”会导致它产生“粘性”效果，这是我不想要的。所以这条路走不通。

路线2：CSS后台解决方案。不幸的是，这段代码不起作用：

```
body {
  color: #333333;
  background: 
    url("/static/assets/img/fabric_1.png"),
    url("/static/assets/img/stain.png");

  background-repeat: repeat,
    no-repeat;

  background-position: 0 0,
  right bottom;
} 
```

所以，我尝试了这个：

```
 html{
     background:
     url("/static/assets/img/fabric_1.png");
     background-repeat: repeat;
     background-position: 0 0;
   }

   body {
     background:
       url("/static/assets/img/stain.png");

     background-repeat:
                no-repeat;

     background-position:
                right bottom;

   } 
```

对于长页面，哪个**有效！万岁！**但是，当我回到短页面时，现在它看起来像这样：

![在此处输入图像描述](../Images/7311e40cbb0f518f9b867452e2656123.png)

*王八蛋！*

那么这里的解决方案是什么？粘性页脚？最小高度？包装纸？到目前为止，我尝试过的解决方案都没有在*这两种*情况下产生所需的行为。

StackOverflow前辈，我该怎么办？

谢谢！，R

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:44:57.113

据我了解，您想将背景图像粘贴到底部和右侧？所以解决方案是：

```
body { background: url("/static/assets/img/stain.png") right bottom no-repeat; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:16:33.643

嗯，使用 css3 你可以使用多个背景。你能试试这个吗？

```
html{
     background: url("/static/assets/img/fabric_1.png"), url("/static/assets/img/stain.png");
     background-repeat: repeat, no-repeat;
     background-position: 0 0, right bottom;
   }

   body {
     color: #333333;
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-02T14:56:41.250

遇到同样的问题，我的解决方案涉及将 html 元素设置为具有 100% 的最小高度和自动高度：

```
body, html {
width:100%;
height:auto;
min-height:100%;
margin: 0px;
padding: 0px;
}

body {
background-image: url(../images/bkgrnd-footer.jpg);
background-repeat: no-repeat;
background-position: bottom left;
} 
```

较短的页面被强制到查看窗口高度，较长的页面获取自动高度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T11:10:03.610

您始终可以将 body 的高度设置为 100%，然后它应该可以工作。

澄清一下：然后你可以在 html 元素和 body 元素中有一个背景图像，就像你已经尝试过的那样：

```
html {
height: 100%;
background: url(html.png) bottom right no-repeat;
padding: 0;
margin: 0;
}

body {
padding: 0;
margin: 0;
height: 100%;
background: url(body.png) bottom right no-repeat;
} 
```

只是测试了一点，它似乎在 IE10 的 Internet Explorer 5 怪癖模式下不起作用，但我真的希望这对你来说不会破坏交易，因为你似乎没有使用奇怪的遗留产品。

紫色方块是 html-background-image，红色是 body-background-image。

![紫色方块是 html-background-image，红色是 body-background-image。](../Images/6f17183b61f01e4a88a42d73de789c01.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-16T16:40:30.690

感谢您的发表。我遇到了同样的问题。我通过将背景图像添加到我的内容设置为 100% 宽度的容器 div 来解决它。容器在我的页脚之前关闭，但如果您需要将图像放在页面底部，您也可以尝试将其放在页脚之外。我只希望我的内容位于内容的右下角。

这是我的 div 结构：

```
<html>                    Background image
<body>                    Padding
<div id="outerWrapper">   Background applied outside content
<div id="borderWrapper">  Contains content
<div id="contentWrap">    Sets up container positioning for child elements 
```

# java - 如何使用 Gson 动态处理 json 响应数组/对象

> ID：14373417
> 
> 赞同：14
> 
> 时间：2013-01-17T06:37:02.577
> 
> 标签：java, android, gson

我面临一个问题，有时Json响应返回一个对象数组，有时是对象本身，我们如何在响应类中动态处理。在当前的 eg :results 有时会得到一个对象数组

```
 "\"results\": " +
            "[{" + 
```

有时反对自己

```
 "\"results\": " +
            "{" + 
```

例如：

我们该如何处理呢？

```
Gson gson = new Gson();
    SearchResponse response=new SearchResponse();
    response= gson.fromJson("{" +
            "\"completed_in\": 0.047," +
            "\"max_id\": 291771567376039936," +
            "\"max_id_str\": \"291771567376039936\"," +
            "\"next_page\": \"?page=2&max_id=291771567376039936&q=javacodegeeks\"," +
            "\"page\": 1," +
            "\"query\": \"javacodegeeks\"," +
            "\"refresh_url\": \"?since_id=291771567376039936&q=javacodegeeks\"," +
            "\"results\": " +
            "{" +
            "\"created_at\": \"Thu, 17 Jan 2013 04:58:57 +0000\"," +
            "\"from_user\": \"hkokko\"," +
            "\"from_user_id\": 24726686," +
            "\"from_user_id_str\": \"24726686\"," +
            " \"from_user_name\": \"Hannu Kokko\"," +
            " \"geo\": null," +
            "\"id\": 291771567376039936," +
            "\"id_str\": \"291771567376039936\"," +
            "\"iso_language_code\": \"en\"," +
            " \"metadata\": {" +
            "\"result_type\": \"recent\"}," +
            "\"profile_image_url\": \"hjh\"," +
            "\"profile_image_url_https\": \"kkj\"," +
            "\"source\": \"&lt;a href=&quot;hj;\"," +
            "\"text\": \"Continuous Deployment: Are You Afraid It Might Work? jh\"," +
            "\"to_user\": null," +
            "\"to_user_id\": 0," +
            "\"to_user_id_str\": \"0\"," +
            "\"to_user_name\": null" +
            " }," +
            "\"results_per_page\": 15," +
            "\"since_id\": 0," +
            "\"since_id_str\": \"0\"" +
            "}", SearchResponse.class);
    System.out.println(response.toString()); 
```

请协助...

任何人都可以通过使用不同的罐子来实现这一目标提出任何建议吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-19T06:57:29.143

我找到了一个解决方案，我想分享这个..代码将自动转换..如果例外响应是响应类中的arraylist..然后如果对象响应然后添加到arraylist，否则如果arraylist需要相同的列表。我们需要钩子在它调用 fromJson 之前更改响应。

```
public class ArrayAdapter<T> extends TypeAdapter<List<T>> {
    private Class<T> adapterclass;

    public ArrayAdapter(Class<T> adapterclass) {

        this.adapterclass = adapterclass;
    }

    public List<T> read(JsonReader reader) throws IOException {

        List<T> list = new ArrayList<T>();

        Gson gson = new Gson();

        if (reader.peek() == JsonToken.BEGIN_OBJECT) {

            T inning = (T) gson.fromJson(reader, adapterclass);
            list.add(inning);

        } else if (reader.peek() == JsonToken.BEGIN_ARRAY) {

            reader.beginArray();
            while (reader.hasNext()) {
                T inning = (T) gson.fromJson(reader, adapterclass);
                list.add(inning);
            }
            reader.endArray();

        } else {
            reader.skipValue();
        }

        return list;
    }

    public void write(JsonWriter writer, List<T> value) throws IOException {

    }

}

public class ArrayAdapterFactory implements TypeAdapterFactory {

  @SuppressWarnings({ "unchecked" })
  @Override
  public <T> TypeAdapter<T> create(final Gson gson, final TypeToken<T> type) {

      ArrayAdapter typeAdapter = null;
      try {
          if (type.getRawType() == List.class)
          {

              typeAdapter = new ArrayAdapter(
                      (Class) ((ParameterizedType) type.getType())
                              .getActualTypeArguments()[0]);
          }
      } catch (Exception e) {
          e.printStackTrace();
      }

      return typeAdapter;
} 
```

然后打电话

```
 Gson gson = new GsonBuilder().registerTypeAdapterFactory(new ArrayAdapterFactory()).create();
 SearchResponse response;
 esponse= gson.fromJson("your json string", SearchResponse.class) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T14:53:57.670

您需要编写一个自定义的反序列化器来检查`results`JSON 中的类型，然后采取相应的行动。

你的 POJO 将包含一个数组`results`，如果你传入的 JSON 只有一个对象，你需要修复它。一种方法是修改 JSON 然后反序列化它：

```
class SearchResponseDeserializer implements JsonDeserializer<SearchResponse> {
  public SearchResponse deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context)
      throws JsonParseException {

    if (json.getAsJsonObject().get("results").isJsonObject()) {
      //modify JSON: change results to be an array
      // ...
    }

    return new Gson().fromJson(json, SearchResults.class);

  }
} 
```

或者，当然是修复服务器。它应该总是返回一个数组以避免这个问题。

# facebook - Facebook 确定 OG 图片但不显示

> ID：14373418
> 
> 赞同：0
> 
> 时间：2013-01-17T06:37:12.900
> 
> 标签：facebook, facebook-opengraph

我想知道为什么 Facebook 可以确定 OG 图像但不会显示它。

尝试`http://www.afdesta.net/profile/1539/4/`使用[Facebook 调试工具进行调试](https://developers.facebook.com/tools/debug/og/object)

该[图像存在](http://www.afdesta.net/static/plugins!12afdesta!12avatars!12users!121539!121539_200x.jpg/)，Facebook 可以确定但不会显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-16T12:31:44.993

尝试更改不带空格的图像名称。也许你的图片网址现在有点像...... www.ejemlo.com/IMAGES/image one.jpg

并且将是... www.ejemlo.com/IMAGES/image_one.jpg

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:50:45.797

一个原因很可能是 Facebook 对分配给`og:image`元标签的 URL 进行了转义和编码。所以我们必须有一个干净的 url，其中没有特殊字符。

现在我更改了 url 格式，问题就消失了。

# php - 如何从 json 响应（facebook 响应）中仅获取特定的变量值

> ID：14373421
> 
> 赞同：0
> 
> 时间：2013-01-17T06:37:18.620
> 
> 标签：php, facebook-graph-api

我只想要生成的输出中的特定值（比如“名称”）。我使用此代码 `var_dump($request_object_details);`生成以下输出。

我得到什么输出： -

```
array(6) { ["id"]=> string(26) "514484461930096_1446926141"   ["application"]=> array(2) { ["name"]=> string(18) "Pocket Financetest" ["id"]=> string(15) "270339389736782" } ["to"]=> array(2) { ["name"]=> string(12) "Prince Singh" ["id"]=> string(10) "1446926141" } ["from"]=> array(2) { ["name"]=> string(14) "Ashutosh Singh" ["id"]=> string(15) "100003645579131" } ["message"]=> string(16) "My Great Request" ["created_time"]=> string(24) "2013-01-17T03:45:36+0000" } 
```

我使用下面的代码来获得上面的输出：

```
 <?php
        require_once('phps/fbsdk/src/facebook.php');
        $config = array
        (
          'appId' => '270339389736782',
          'secret' => '667e1795cc1f308f312d49d6b1c17cb8',
        );
        $facebook = new Facebook($config);
        //get the request ids from the query parameter
         $request_ids = explode(',', $_REQUEST['request_ids']);

         //build the full_request_id from request_id and user_id
          function build_full_request_id($request_id, $user_id) {
          return $request_id . '_' . $user_id;
         }  

         //for each request_id, build the full_request_id and delete request
     foreach ($request_ids as $request_id)
      {
         $uid = $facebook->getUser();

         $full_request_id = build_full_request_id($request_id, $uid); 
        $request_object_details = $facebook->api("/$full_request_id");
        var_dump($request_object_details);//This is giving me the output

        try {
         $delete_success = $facebook->api("/$full_request_id",'DELETE');
         if ($delete_success) {
            echo "Successfully deleted " . $full_request_id;}
         else {
           echo "Delete failed".$full_request_id;}
        }
        catch (FacebookApiException $e) {
        echo "error=".$e;}
        }
     ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:50:48.840

您的问题尚不清楚，但我仍在为您发布某种代码。

使用[json_decode](http://php.net/manual/en/function.json-decode.php)

这样做：它将返回对象

```
$obj = json_decode($request_object_details);
$result= $obj->id; 
```

或者

您可以使用`json_decode`并将其转换为数组：

```
$request_object_details = $facebook->api("/$full_request_id");
$result=json_decode($request_object_details, true); 
```

第二个参数会将解码后的 json 字符串变成一个关联数组。

现在您可以直接使用：

```
echo $result['id'];
echo $result['application']; 
```

等等...

希望它会帮助你。

# java - 如何更新 SDK 工具

> ID：14373423
> 
> 赞同：2
> 
> 时间：2013-01-17T06:37:18.813
> 
> 标签：java, android, eclipse, sdk

今天，我更新了eclipse。现在当它重新启动时，它在附件中给了我一条错误消息

![在此处输入图像描述](../Images/5e04f8f3ce6606e0814b78dc14123d4e.png)

当我单击“Open SDK Manager”时，它没有显示任何工具升级！它在下图中

![在此处输入图像描述](../Images/5e078736585189005be9bd70aea5f2d4.png)

我应该怎么办？我无法运行遇到此问题的应用程序，因为运行它们时会出现以下错误

```
[2013-01-17 12:03:24 - Dex Loader] SecurityException: Unable to find field for dex.jar 
```

请帮忙！我怎样才能更新这个？我怎样才能摆脱这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:09:27.430

在 SDK 包管理器中，尝试选择包菜单 -> 重新加载。然后您应该会看到 Android SDK Tools rev21 可用并且可以更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:26:24.833

您需要将您的 Android SDK 安装更新到 21 版本。在 Eclipse 中，使用 Window -> Android SDK Manager，并更新您的 Android SDK 安装。重启 eclipse 后错误信息会消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T07:50:27.513

打开 Eclipse 并转到“帮助”菜单中的“检查更新”。安装最新软件后，再次尝试打开 Android SDK 工具。如果这不起作用，请删除您的 android-sdk 工具并再次从 Eclipse 下载 SDK 工具（“帮助”菜单中的“安装新软件”）

# nsmutablearray - nsstring 到 nsmutable 数组

> ID：14373424
> 
> 赞同：2
> 
> 时间：2013-01-17T06:37:23.230
> 
> 标签：nsmutablearray

我正在制作一个应用程序，我想在其中访问联系人的名字并将它们存储到 nsmutable 数组中，以便我可以获取该数组的值`array[0]`并`array[i-1]`在表格视图中打印它们。这是我的代码：

```
CFErrorRef error = NULL;

ABAddressBookRef addressBook = ABAddressBookCreateWithOptions(NULL, &error);

if (addressBook != nil)
{
    contacts_Image_List=[[NSMutableArray alloc]init];
    NSLog(@"Succesful.");

    NSArray *allContacts = (__bridge_transfer NSArray *)ABAddressBookCopyArrayOfAllPeople(addressBook);

    NSUInteger i = 0;
    for (i = 0; i < [allContacts count]; i++)
    {
Person *person = [[Person alloc] init];

        ABRecordRef contactPerson = (__bridge ABRecordRef)allContacts[i];

        NSString *firstName = (__bridge_transfer NSString *)ABRecordCopyValue(contactPerson, kABPersonFirstNameProperty);
        NSString *lastName =  (__bridge_transfer NSString *)ABRecordCopyValue(contactPerson, kABPersonLastNameProperty);
        NSString *fullName = [NSString stringWithFormat:@"%@ %@", firstName, lastName];

        person.firstName = firstName;
        person.lastName = lastName;
        person.fullName = fullName;

       // person.userThumb[i]=firstName;

       //[person.userThumb[i] addObject:@"firstName"];

       //above line gives null

        NSLog(@"%@",person.userThumb[i]); 
```

我的可变数组在`Person.h`课堂上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T02:18:59.843

在每次迭代中只做：

```
[person.yourMutableArray addObject:fullName] 
```

只要确保您的 MutableArray 已经被分配，并且您只分配一次。

# javascript - JQuery 或 Javascript 输入 IP 地址掩码

> ID：14373425
> 
> 赞同：2
> 
> 时间：2013-01-17T06:37:27.863
> 
> 标签：javascript, jquery

我根据stackoverflow问题使用了jquery masked input plugin

[更改 IP 地址的输入框](https://stackoverflow.com/questions/12304612/input-box-for-changing-ip-address/12304730#comment19988112_12304730)

但它对我不起作用。

我用过`$("input").mask("9?99.9?99.9?99.9?99", {placeholder:" "});`

我在上一个问题中找到了这个演示（[http://jsfiddle.net/3F2gM/3/ ），但它没有用](http://jsfiddle.net/3F2gM/3/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-05-31T17:11:02.470

它以这种方式对我有用：

首先，我在 html 中添加了 jquery-mask：

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.10/jquery.mask.js"></script> 
```

然后我输入了类 .ip_address 的文本字段：

```
<label>ip:</label> <input class="ip_address" type="text" name="ip"> 
```

最后：

```
$('.ip_address').mask('0ZZ.0ZZ.0ZZ.0ZZ', { translation: { 'Z': { pattern: /[0-9]/, optional: true } } }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-29T19:17:24.913

这可能会对您有所帮助：-
我有 4 个输入字段，每个边框都被隐藏了。只有输入字段的父级有边框，这将使它看起来像一个单一的文本框。之后，使用**maxLength**允许用户仅输入 3 个字符，一旦用户达到最大长度，则关注下一个字段。
代码如下： -[链接](https://jsfiddle.net/5uLo9tjg/)

**HTML**

```
<div>    
<input type="text" maxlength="3" class="onlythree" />.    
<input type="text" maxlength="3" class="onlythree" />.    
<input type="text" maxlength="3" class="onlythree" />.    
<input type="text" maxlength="3" class="onlythree" />    
</div> 
```

**CSS**

```
.onlythree{    
width: 50px;    
border: 0;    
}    
div{    
border: 1px solid gray;    
display: inline-block;    
} 
```

**JS**

```
$(".onlythree").keyup(function () {    
if (this.value.length == this.maxLength) {    
$(this).next('.onlythree').focus();    
}    
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-26T17:11:08.170

实际上，我需要与您需要的类似的东西，我所做的就是联系[Jquery Mask Plugin](http://igorescobar.github.io/jQuery-Mask-Plugin/)的作者 Igor Escobar 。还没有一个完整的内置方法可以做到这一点，所以他指导我选择一个可以完成的选项，在这里我分享结果：。

**HTML**

```
<input type="text" id="networkSectionIpAddress" class="ip_address" > 
```

**Javascript：**

```
var options =  { 
            onKeyPress: function(cep, event, currentField, options){
//            console.log('An key was pressed!:', cep, ' event: ', event,'currentField: ', currentField, ' options: ', options);
                if(cep){
                  var ipArray = cep.split(".");
                  var lastValue = ipArray[ipArray.length-1];
                  if(lastValue != "" && parseInt(lastValue) > 255){
                      ipArray[ipArray.length-1] =  '255';
                      var resultingValue = ipArray.join(".");
                      currentField.attr('value',resultingValue);
                  }
            }             
        }};

        $('.ip_address').mask("000.000.000.000", options); 
```

我希望这些信息对那些使用这个很棒的 JQuery Mask 插件的人有所帮助:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-12T07:37:23.937

我以不同的方式解决了这个问题。在上面的例子中，唯一的变化是最后一个八位字节，我改变了一切，因为为了快速调试可以输入大于255的数字。另外，通过firebug查看时，该值是在输入中设置的，显示的文本是与用户输入的相同。

HTML

```
<input type="text" name="vpn_ip" class="mask-ipv4" value=""> 
```

Java 脚本

```
var options =  { 
    onChange: function(cep, event, currentField, options){
        if(cep){
            var ipArray = cep.split(".");
            for (i in ipArray){
                if(ipArray[i] != "" && parseInt(ipArray[i]) > 255){
                    ipArray[i] =  '255';
                }
            }
            var resultingValue = ipArray.join(".");
            $(currentField).val(resultingValue);
        }
    }
};

$('.mask-ipv4').mask("000.000.000.000", options); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-24T19:34:47.063

Joel Valdivia 的答案不能确保 ip 数组中的每个项目 <= 255，而 will824 的答案不允许项目的 < 3 位数字。

这是一个完整的示例，基于他们满足这两个标准的答案。

```
var options =  { 
    onKeyPress: function(text, event, currentField, options){
                    if (text){
                        var ipArray = text.split(".");
                        var lastValue = ipArray[ipArray.length-1];
                        if(lastValue != "" && parseInt(lastValue) > 255){
                            ipArray[ipArray.length-1] = '255';
                            var resultingValue = ipArray.join(".");
                            currentField.text(resultingValue).val(resultingValue);
                        }
                    }             
                },
    translation: {
            'Z': {
                pattern: /[0-9]/, optional: true
            }
    }
};

$(".ipaddr").mask("0ZZ.0ZZ.0ZZ.0ZZ", options); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-17T10:41:58.630

它适用于我的情况。

```
var ip_options = { 
    translation: { 'Z': { pattern: /[0-9]/, optional: true } },
    onKeyPress: function(cep, event, currentField, options) {
        if(cep) {
            var ipArray = cep.split(".");
            for (i in ipArray){
                if(ipArray[i] != "" && parseInt(ipArray[i]) > 255){
                    ipArray[i] =  '255';
                }
            }
            var resultingValue = ipArray.join(".");
            $(currentField).val(resultingValue);
        }
    }
};

$('.ip_address').mask("0ZZ.0ZZ.0ZZ.0ZZ", ip_options); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-12T05:40:17.103

```
function getChar(event) {
    if (event.which == null) {
        if (event.keyCode < 32) return null;
        return String.fromCharCode(event.keyCode)
    }

    if (event.which != 0 && event.charCode != 0) {
        if (event.which < 32) return null; 
        return String.fromCharCode(event.which); 
    }
    return null; 
}

function maskIP(e){
    let key = getChar(e);

    if((!((key >= 0 && key <= 9) || key == '.'))  || this.value.length >= 15) e.preventDefault();
    if (this.value.indexOf('.') == -1){
        if (this.value.length >= 3 && key != '.') {
            e.preventDefault();    
        }
    }
    else{
        if(this.value.lastIndexOf('.') == this.value.length - 1 && key == '.') {
            e.preventDefault(); 
        }
        if ((this.value.length - this.value.lastIndexOf('.') > 3 && key != '.') || (key == '.' && this.value.split(".").length - 1 >= 3)) {
            e.preventDefault();    
        }
    }
}

serch = document.getElementById("#id of your element"); //can use others
serch.addEventListener('keypress', maskIP); 
```

# c# - 在 WPF 中使用 DataBinding 创建动态控件

> ID：14373430
> 
> 赞同：0
> 
> 时间：2013-01-17T06:37:42.107
> 
> 标签：c#, wpf, data-binding

我有一个对象，我将其作为属性传递给我的用户控件。然后循环遍历对象属性并在运行时根据订单日在不同的选项卡中创建控件。请仔细阅读附图以更好地理解。

它工作正常，但这是 WINFORM 类型，是否有可能在运行时使用 WPF 绑定、依赖属性或类似的东西创建控件。

![在此处输入图像描述](../Images/51dff19cc3cf598c9d033a4fd6dd605e.png)

![在此处输入图像描述](../Images/af844e5d01b9b2290c995d7a92496e9a.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:05:30.020

> 是否有可能在运行时使用 WPF 绑定创建控件

对的，这是可能的。这就是数据模板的用途。基本规则是：不要创建*控件*，创建*数据*并显示模板，它定义了数据应该如何表示：

```
public class ComponentViewModel : ViewModel /* ViewModel is a basic implementation of INotifyPropertyChanged interface */
{
    public ComponentViewModel()
    {
        this.Items = new ObservableCollection<ItemViewModel>
        {
            new ItemViewModel { IsActive = true, DateTime = DateTime.Now, Name = "Lemons" },
            new ItemViewModel { IsActive = true, DateTime = DateTime.Now, Name = "Melons" },
            new ItemViewModel { IsActive = true, DateTime = DateTime.Now, Name = "Apples" },
        };
    }

    public ObservableCollection<ItemViewModel> Items { get; private set; }
}

public class ItemViewModel : ViewModel
{
    public bool IsActive
    {
        get { return isActive; }
        set
        {
            if (isActive != value)
            {
                isActive = value;
                OnPropertyChanged("IsActive");
            }
        }
    }
    private bool isActive;

    public string Name
    {
        get { return name; }
        set
        {
            if (name != value)
            {
                name = value;
                OnPropertyChanged("Name");
            }
        }
    }
    private string name;

    public DateTime DateTime
    {
        get { return dateTime; }
        set
        {
            if (dateTime != value)
            {
                dateTime = value;
                OnPropertyChanged("DateTime");
            }
        }
    }
    private DateTime dateTime;
} 
```

代码隐藏：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = new ComponentViewModel();
    }
} 
```

XAML：

```
 <CheckBox Grid.Column="0" IsChecked="{Binding IsActive}" Content="{Binding Name}"/>
                <TextBox Grid.Column="1" Text="{Binding DateTime}"/>
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

# html - 没有顶级域名的 HTML5 输入类型电子邮件如何工作

> ID：14373433
> 
> 赞同：17
> 
> 时间：2013-01-17T06:37:53.360
> 
> 标签：html

即使顶级域名不存在，html5 中的 input type = email 标签也有效

```
<form action = "yourPage" method = "get">
    <input type =  'email' name ="emailName" >
    <input type = 'submit'>
</form> 
```

例如：如果我们输入

```
foo@bar 
```

代替

```
foo@bar.com 
```

表格将被提交。谁能解释它为什么会这样。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-17T06:42:26.223

因为`bar`是一个有效的主机名，它是`foo@bar`一个有效的电子邮件地址。

Chrome 不会检查地址或主机是否*实际在使用中*，只会检查语义是否正确。

有关有效电子邮件地址的示例，请参阅[http://en.wikipedia.org/wiki/Email_address#Domain_part](http://en.wikipedia.org/wiki/Email_address#Domain_part)。

# mysql - 自定义列的多个值

> ID：14373438
> 
> 赞同：2
> 
> 时间：2013-01-17T06:38:18.627
> 
> 标签：mysql, sql

我想每个 ID 有 2 个`Custom_Column`值。我怎样才能做到这一点？

示例表：

```
ID
1
2
3 
```

示例查询：

```
SELECT id, (id*2) as Custom_Value, (id*4) as Custom_Value FROM numbers 
```

回复：

```
ID    Custom_Value
1     2
1     4
2     4
2     8
3     6
3     12 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T06:40:59.843

采用`UNION`

```
SELECT ID, (ID*2) as CustomVal FROM tableNAme
UNION ALL
SELECT ID, (ID*4) as CustomVal FROM tableNAme
ORDER BY ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/53413/3)

# java - 检查大型机 FTP 服务器上的路径是否为文件或文件夹。

> ID：14373439
> 
> 赞同：4
> 
> 时间：2013-01-17T06:38:26.800
> 
> 标签：java, file, filesystems, mainframe

我有一个 Java 代码，可以将文件从大型机上的 FTP 传输到我的本地系统。问题是如何判断给定路径是文件还是文件夹？我不能使用扩展检查，因为我不知道可能的扩展是什么。以下代码也总是返回 false ，

```
 fileSystem.isFile("fileName"); 
```

作为大型机文件系统，路径由`.`而不是分隔`/`，因此最后的检查`.`也不起作用。

我再次使用从输入路径流式传输数据到输出位置

```
url="connection url of the mainframe"
bufferedInputStream = new BufferedInputStream(url.getInputStream()); 
```

当我在源路径中有文件时，它将文件的内容写入目标，当源路径有目录时，它将目录中文件的名称和其他属性写入目标。

源是目录时的示例输出是

```
Name    VV.MM   Created       Changed          Size  Init    Mod    Id
QQQQ    01.00  2009/12/18   2009/12/18 12:15    18    18     0    XXXX 
RRRR    01.00  2009/12/18   2009/12/18 12:16     19     19    0  XXXXX 
```

如何确定源路径是文件还是文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T05:18:51.683

我没有答案，但听起来你正在访问 Zos。对于那些对Zos一无所知的人

*   Zos**没有****目录**_
***   他所说的目录可能是 PDS（请参阅[Dataset](http://en.wikipedia.org/wiki/Data_set_%28IBM_mainframe%29)中的 PDS ）。对于那些不是来自大型机背景的人，可以将其视为一种存档（即 jar、Tar、zip 等）。这不是一个完全准确的描述，PDS 有一些限制并且使用 jar 文件没有，但 jar 文件是 PC 中最接近的类比，*NIX 世界我能想到的。

    *   您如何检测它们 - 不确定，可能有您可以访问的文件属性** 

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:08:43.510

我找到了一种方法来确定大型机上的路径是文件还是 PDS（类比是目录）。我使用`org.apache.hadoop.fs.ftp.FTPFileSystem`了库，下面的代码片段可以通过返回文件列表来工作。

```
FTPFile[] files = ftp.listFiles(); 
```

循环`files`并检查`file1.isFile()`就足够了。再次记住在使用列出文件之前更改到当前工作目录 `ftp.cwd(inputPath);`

有关大型机文件系统的说明，请参阅 Bruce Martin 的回答和随后的评论。.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T06:44:43.410

您没有说明您使用的是什么版本的 java，或者您是否正在使用主机文件系统的特殊库。

您可以改用[java.io.File#isDirectory()](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#isDirectory%28%29)吗？**

# sed - 如何在 sed 中使用贪婪方法替换文本？

> ID：14373441
> 
> 赞同：2
> 
> 时间：2013-01-17T06:38:36.803
> 
> 标签：sed, greedy

我正在解析一个包含一些 html 标记并更改为 Latex 标记的文件。

猫文字

```
 <Text>A &lt;strong&gt;ASDFF&lt;/strong&gt; is a &lt;em&gt;cerebrovafdfasfscular&lt;/em&gt; condifasdftion caufadfsed fasdfby tfdashe l
 ocfsdafalised &lt;span style="text-decoration: underline;"&gt;ballooning&lt;/span&gt; or difdaslation of an arfdatery in thdfe bfdasrai
 n. Smadfsall aasdneurysms may dadisplay fdasno ofadsbvious sdfasigns (&lt;span style="text-decoration: underline;"&gt;&lt;em&gt;&lt;str
 ong&gt;asymptomatic&lt;/strong&gt;&lt;/em&gt;&lt;/span&gt;) bfdasut lfdsaarger afdasneurysms maydas besda asfdsasociated widfth sdsfudd 
```

```
 sed -e 's|&lt;strong&gt;\(.*\)&lt;/strong&gt;|\\textbf{\1}|g' test 
```

猫出去

```
 <Text>A \textbf{ASDFF&lt;/strong&gt; is a &lt;em&gt;cerebrovafdfasfscular&lt;/em&gt;    condifasdftion caufadfsed fasdfby tfdashe locfsda
    falised &lt;span style="text-decoration: underline;"&gt;ballooning&lt;/span&gt; or    difdaslation of an arfdatery in thdfe bfdasrain. Sma
      dfsall aasdneurysms may dadisplay fdasno ofadsbvious sdfasigns (&lt;span style="text-decoration: underline;"&gt;&lt;em&gt;&lt;strong&gt
      ;asymptomatic}&lt;/em&gt;&lt;/span&gt;) bfdasut lfdsaarger afdasneurysms maydas besda   asfdsasociated widfth sdsfudd 
```

当我观察 \textbf{ASDFF .........} 时，预期的输出应该是 \textbf{ASDFF}。如何获得预期的结果？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:23:36.100

您可能想改用 perl 正则表达式。

```
perl -pe  's|&lt;strong&gt;(.*?)&lt;/strong&gt;|\\textbf{\1}|g' 
```

您的问题与[non-greedy-regex-matching-in-sed](https://stackoverflow.com/questions/1103149/non-greedy-regex-matching-in-sed)类似。下次您可能希望简化您的案例以指出真正的问题。例如，不要只粘贴原始 html 代码，而是使用以下代码：

```
fooTEXT1barfooTEXT2bar 
```

**更新**

如果您只想要贪婪的方法，请忽略这一点。

# sql-server - Win7(x86) 中的 Rose2003 正向工程错误

> ID：14373442
> 
> 赞同：1
> 
> 时间：2013-01-17T06:38:40.683
> 
> 标签：sql-server, rational-rose

我的系统信息：Win7(x86) Rational Rose 2003 MS SQLServer 2008 R2

问题：当我使用rose“Foward Engineering Wizard”时，有一个问题：您的应用程序中发生了未处理的异常。如果单击继续，应用程序将忽略此错误并尝试继续。如果单击退出，应用程序将立即关闭。java.lang.UnsatisfiedLinkError：共享库路径中没有 %CommonProgramFiles%\System\ado\msado15。

尝试解决：我试图编辑我的系统路径，它也不起作用。在 Windows Xp 中，“Foward Engineering”没有问题。

问：Win7(x86)中如何使用“Foward Engineering Wizard”，如何解决？非常感谢 ！

# c# - 在 WPF 中绘制图形

> ID：14373446
> 
> 赞同：0
> 
> 时间：2013-01-17T06:38:59.863
> 
> 标签：c#, wpf, canvas

我正在构建一个应用程序，我必须在画布上绘制自己的图形。现在我正在这样做：

```
PathFigure figure = new PathFigure() { StartPoint = new Point(0, TurboHeight / turboSizeFactor * turboSchaufelFactor), IsClosed = true};
LineSegment seg = new LineSegment() { Point = new Point(turboWidth, TurboHeight / turboSizeFactor * turboSchaufelFactor) };
figure.Segments.Add(seg);
seg = new LineSegment(){Point=new Point(turboWidth*0.85, 0)};
figure.Segments.Add(seg);
seg = new LineSegment() { Point = new Point(turboWidth * 0.15, 0) };
figure.Segments.Add(seg);
PathGeometry geo = new PathGeometry();
geo.Figures.Add(figure);
Path path = new Path() { Data = geo, Stroke = Brushes.Black, StrokeThickness = 1, SnapsToDevicePixels = true, Fill = Brushes.LightGray};
CnvMain.Children.Add(path); 
```

这是这样做的方法还是有更简单的方法。我的意思是我正在为画布上的几行创建很多对象。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:57:30.290

在我看来，你并没有浪费太多。我唯一要做的就是不要将所有中间结果存储在您重用的变量中......例如：

```
PathFigure figure = new PathFigure() 
{ 
    StartPoint = new Point(0, TurboHeight / turboSizeFactor * turboSchaufelFactor),
    IsClosed = true
};

figure.Segments.Add(new LineSegment() { Point = new Point(turboWidth, TurboHeight / turboSizeFactor * turboSchaufelFactor) });
figure.Segments.Add(new LineSegment() { Point = new Point(turboWidth * 0.85, 0) });
figure.Segments.Add(new LineSegment() { Point = new Point(turboWidth * 0.15, 0) });

PathGeometry geo = new PathGeometry();
geo.Figures.Add(figure);

Path path = new Path() { Data = geo, Stroke = Brushes.Black, StrokeThickness = 1, SnapsToDevicePixels = true, Fill = Brushes.LightGray };

CnvMain.Children.Add(path); 
```

你当然可以把所有的东西放在一个方法中或者把点放在一个数组中，但是对于这样一个看起来很傻的小函数......如果你有更多的点，它可能是有意义的。

# mysql - 查询花费了太多时间。并且影响了性能

> ID：14373447
> 
> 赞同：0
> 
> 时间：2013-01-17T06:39:31.207
> 
> 标签：mysql, sql, query-performance

下面的查询大约需要 10 分钟到 1 小时才能执行。因此，我们经常遇到负载峰值。任何人都可以帮助以更优化的方式重写查询。

**询问：**

```
 select count(*) 
  from t_tab6 tab1 
  left join t_tab6_element_tab2 tab2 
     on tab2.tab6_id = tab1.id 
  left join t_tab3 tab3
    on tab1.create_tab3_id = tab3.id 
  left join t_tab4 tab4 
    on  tab2.element_id = tab4.id and tab2.element_type_id = 1 
  left join t_tab7 tab5 
    on  tab2.element_id = tab5.id and tab2.element_type_id = 2 
  where tab1.domain_id = 522 
```

**解释计划：**

```
 +----+-------------+-----------+--------+-------------------------+-------------------------+---------+----------------------------+--------+-------------+
    | id | select_type | table     | type   | possible_keys           | key                     | key_len | ref                        | rows   | Extra       |
    +----+-------------+-----------+--------+-------------------------+-------------------------+---------+----------------------------+--------+-------------+
    |  1 | SIMPLE      | tab1       | ref    | domain_id_tab6_type_cd | domain_id_tab6_type_cd | 4       | const                      | 243430 |             |
    |  1 | SIMPLE      | tab2       | ref    | FK_tab6                | FK_tab6                | 4       | comp1.tab1.id             |      2 |             |
    |  1 | SIMPLE      | tab3      | eq_ref | PRIMARY                 | PRIMARY                 | 4       | comp1.tab1.create_tab3_id |      1 | Using index |
    |  1 | SIMPLE      | tab4   | ref    | id                      | id                      | 4       | comp1.tab2.element_id     |      1 | Using index |
    |  1 | SIMPLE      | tab5 | ref    | id                      | id                      | 4       | comp1.tab2.element_id     |      1 | Using index |
    +----+-------------+-----------+--------+-------------------------+-------------------------+---------+----------------------------+--------+-------------+
    5 rows in set (0.45 sec) 
```

**表结构：**

```
 mysql> show create table t_tab6_element_tab2\G
    *************************** 1\. row ***************************
           Table: t_tab6_element_tab2
    Create Table: CREATE TABLE `t_tab6_element_tab2` (
      `id` int(255) NOT NULL AUTO_INCREMENT,
      `element_type_id` int(11) NOT NULL,
      `tab6_id` int(11) NOT NULL,
      `element_id` int(11) NOT NULL,
      `element_desc` varchar(500) DEFAULT NULL,
      PRIMARY KEY (`id`),
      KEY `FK_tab6` (`tab6_id`),
      KEY `element_type_id_element_id` (`element_type_id`,`element_id`)
    ) ENGINE=InnoDB AUTO_INCREMENT=45901159 DEFAULT CHARSET=utf8
    1 row in set (0.00 sec)

    mysql> show create table t_tab3\G
    *************************** 1\. row ***************************
           Table: t_tab3
    Create Table: CREATE TABLE `t_tab3` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
      `name` varchar(255) DEFAULT NULL,
      `password` varchar(255) DEFAULT NULL,
      `email` varchar(255) DEFAULT NULL,
      `is_admin` int(11) DEFAULT NULL,
      `phone` varchar(50) DEFAULT NULL,
      `company` varchar(255) DEFAULT NULL,
      `last_login` datetime DEFAULT NULL,
      `state` int(11) DEFAULT NULL,
      `validate_code` varchar(50) DEFAULT NULL,
      `has_login` smallint(6) DEFAULT NULL,
      PRIMARY KEY (`id`)
    ) ENGINE=InnoDB AUTO_INCREMENT=1304 DEFAULT CHARSET=utf8
    1 row in set (0.00 sec)

    mysql> show create table t_tab6\G
    *************************** 1\. row ***************************
           Table: t_tab6
    Create Table: CREATE TABLE `t_tab6` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
      `create_tab3_id` int(11) DEFAULT NULL,
      `tab6_create_date` date DEFAULT NULL,
      `tab6_type_cd` int(11) NOT NULL,
      `tab6_desc` varchar(512) NOT NULL,
      `IsGlobaltab6` int(2) DEFAULT NULL,
      `tab6_start_date` datetime NOT NULL,
      `tab6_end_date` datetime NOT NULL,
      `job_id` int(11) DEFAULT NULL,
      `domain_id` int(11) NOT NULL,
      PRIMARY KEY (`id`),
      KEY `tab6_tab3_FK` (`create_tab3_id`),
      KEY `domain_id_tab6_type_cd` (`domain_id`,`tab6_type_cd`)
    ) ENGINE=InnoDB AUTO_INCREMENT=8586007 DEFAULT CHARSET=utf8
    1 row in set (0.00 sec)

    mysql> show create table t_tab4\G
    *************************** 1\. row ***************************
           Table: t_tab4
    Create Table: CREATE TABLE `t_tab4` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
      `tab4_name` varchar(255) DEFAULT NULL,
      `tab4_value` varchar(255) DEFAULT NULL,
      `type` int(11) DEFAULT NULL,
      `description` varchar(2000) DEFAULT NULL,
      `own_domain_id` int(11) DEFAULT NULL,
      `rank_check` int(11) DEFAULT NULL,
      `rank1` int(11) DEFAULT NULL,
      `rank2` int(11) DEFAULT NULL,
      `rank3` int(11) DEFAULT NULL,
      `yesterday_entrances` int(11) DEFAULT NULL,
      `week_entrances` int(11) DEFAULT NULL,
      `current_ctr` float(16,4) DEFAULT NULL,
      `monthly_search_volume` int(11) DEFAULT NULL,
      `avg_monthly_search_volume` int(11) DEFAULT NULL,
      `traffic_increase` int(11) DEFAULT NULL,
      `rank_improvement` int(11) DEFAULT NULL,
      `rank_update_date` date DEFAULT NULL,
      `top_rank_tab5_id` int(11) DEFAULT NULL,
      `frequency` int(10) DEFAULT '1',
      `score` float DEFAULT NULL,
      `create_date` datetime DEFAULT NULL,
      `bing_rank1` int(10) DEFAULT NULL,
      `bing_rank2` int(10) DEFAULT NULL,
      `yesterday_bing_entrances` int(11) DEFAULT NULL,
      `bing_rank_improvement` int(11) DEFAULT NULL,
      KEY `id` (`id`),
      KEY `tab4_name` (`tab4_name`),
      KEY `own_domain_id` (`own_domain_id`,`rank_check`),
      KEY `rank_check` (`rank_check`)
    ) ENGINE=InnoDB AUTO_INCREMENT=670267018 DEFAULT CHARSET=utf8
    /*!50100 PARTITION BY RANGE (`rank_check`)
    (PARTITION p0 VALUES LESS THAN (0) ENGINE = InnoDB,
     PARTITION p1 VALUES LESS THAN (1) ENGINE = InnoDB,
     PARTITION p2 VALUES LESS THAN (2) ENGINE = InnoDB,
     PARTITION pEOW VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
    1 row in set (0.00 sec)

    mysql> show create table t_tab7\G
    *************************** 1\. row ***************************
           Table: t_tab7
    Create Table: CREATE TABLE `t_tab7` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
      `own_domain_id` int(11) DEFAULT NULL,
      `url` varchar(2000) NOT NULL,
      `create_date` datetime DEFAULT NULL,
      `friendly_name` varchar(255) DEFAULT NULL,
      `section_name_id` int(11) DEFAULT NULL,
      `type` int(11) DEFAULT NULL,
      `status` int(11) DEFAULT NULL,
      `week_entrances` int(11) DEFAULT NULL,
      `week_bounces` int(11) DEFAULT NULL,
      `canonical_url_id` int(11) DEFAULT NULL,
      KEY `id` (`id`),
      KEY `urlindex` (`url`(255)),
      KEY `own_domain_id_type_status` (`own_domain_id`,`type`,`status`),
      KEY `canonical_url_id` (`canonical_url_id`),
      KEY `type` (`type`,`status`)
    ) ENGINE=InnoDB AUTO_INCREMENT=237034388 DEFAULT CHARSET=utf8
    /*!50100 PARTITION BY RANGE (`type`)
    (PARTITION p0 VALUES LESS THAN (0) ENGINE = InnoDB,
     PARTITION p1 VALUES LESS THAN (1) ENGINE = InnoDB,
     PARTITION p2 VALUES LESS THAN (2) ENGINE = InnoDB,
     PARTITION pEOW VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
    1 row in set (0.01 sec) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:37:40.020

试试下面

```
select count(*) 
  from (Select id,create_tab3_id from tab6   where domain_id = 522) as  tab1 
  left join tab6_element_tab2 tab2 
     on tab2.tab1nt_id = tab1.id 
  left join t_tab3 tab3
    on tab1.create_tab3_id = tab3.id 
  left join t_tab4 tab4 
    on  tab2.element_id = tab4.id and tab2.element_type_id = 1 
  left join t_tab7 tab5 
    on  tab2.element_id = tab5.id and tab2.element_type_id = 2 
```

如果您仅使用 for count 并在 where 子句中添加域类型检查，请删除左连接 t_tab3 tab3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:59:38.177

在您的条件中使用的列上定义一个索引：

```
create index t_tab6_domain_id_index on t_tab6(domain_id); 
```

查询本身似乎很好。

# php - 代码总是打印不正确的用户名密码

> ID：14373448
> 
> 赞同：-1
> 
> 时间：2013-01-17T06:39:32.217
> 
> 标签：php, android, login

您好我正在使用以下代码检查用户名和密码是否正确以及 php 代码。

问题是即使我提供了正确的详细信息，它也总是提供不正确的用户名或密码。

```
String response = null;
try {
response = CustomHttpClient.executeHttpPost("http://192.168.3.27/abc/check.php", postParameters);  //Enetr Your remote PHP,ASP, Servlet file link
String res=response.toString();
// res = res.trim();
res= res.replaceAll("\\s+","");
//error.setText(res);
error.setText(res);
if(res.equals("1")){
    Intent myIntent = new Intent(LoginActivity.this, HomeActivity.class);           
startActivity(myIntent);

}
else
error.setText("Sorry!! Incorrect Username or Password"); 
```

这是我的 php 代码。

```
<?php
$un=$_POST['username'];
$pw=$_POST['password'];
//connect to the db
$user = ‘root’;
$pswd = ‘root’;
$db = ‘mylogin’;
$conn = mysql_connect(‘localhost’, $user, $pswd);
mysql_select_db($db, $conn);
//run the query to search for the username and password the match
$query = “SELECT * FROM userpass WHERE login_id = ‘$un’ AND login_pass = ‘$pw’”;
$result = mysql_query($query) or die(“Unable to verify user because : ” . mysql_error());
//this is where the actual verification happens
if(mysql_num_rows($result) > 0)

echo 1;  // for correct login response
else
echo 0; // for incorrect login response
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:49:12.200

发布值尝试这样

```
nameValuePairs.add(new BasicNameValuePair("username",_username));
nameValuePairs.add(new BasicNameValuePair("password",_pass));
try
{
   HttpClient httpclient = new DefaultHttpClient();
   HttpPost httppost = new HttpPost("your url");
   httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
   HttpResponse response = httpclient.execute(httppost); 
   HttpEntity entity = response.getEntity();
   is = entity.getContent();
 }
 catch(Exception e)
 {
   e.printStackTrace();
 } 
```

# c# - URL 在浏览器中有效，但无法从 Web 客户端或 Web 请求中获得响应

> ID：14373450
> 
> 赞同：2
> 
> 时间：2013-01-17T06:39:36.403
> 
> 标签：c#, winforms, httpwebrequest, webrequest, webresponse

我有一个关于服务器响应的问题。（返回 403 禁止）。

当我在浏览器中检查相同的 url 时，我可以看到该页面。

我已经编写了以下代码来获得响应。

我在本地 PC 上执行相同的代码，它工作正常。

```
 HttpWebRequest request = WebRequest.Create(RequestUrl) as HttpWebRequest;
                request.Method = "POST";
                request.CookieContainer = new CookieContainer();
                request.Timeout = 600000;
                request.Accept = "*/*";
                request.UserAgent = "Mozilla/5.0 (Windows NT 6.1; rv:18.0) Gecko/20100101 Firefox/18.0";

WebResponse response;
                try
                {
                    response = request.GetResponse();
                    string StatusDescription = ((HttpWebResponse)response).StatusDescription;

                    if (StatusDescription.ToLower() == "ok")
                    {
                        Stream dataStream = response.GetResponseStream();
                        //XmlDocument XmlResponse = new XmlDocument();
                        //XmlResponse.Load(dataStream);            
                        //XmlResponse.Save(Server.MapPath("~/XMLResponse.xml"));
                        StreamReader reader = new StreamReader(dataStream);
                        string responseFromServer = reader.ReadToEnd();
                        responseFromServer = responseFromServer.Replace("&nbsp;", "");
                        responseFromServer = responseFromServer.Replace("&", "&amp;");
                        reader.Close();
                        dataStream.Dispose();
                        response.Close();
                        responseFromServer = GetStringsBetweenTags(responseFromServer, "<head>", "</head>");
                        return responseFromServer;
                    }
                    else
                    {
                        //To Do : add code for notify error via email
                    }
                }
                catch (Exception ex)
                {                   
                    WebClient webclient = new WebClient();
                    using (StreamReader reader = new StreamReader(webclient.OpenRead(RequestUrl)))
                    {
                        string responseFromServer = reader.ReadToEnd();
                        responseFromServer = responseFromServer.Replace("&nbsp;", "");
                        responseFromServer = responseFromServer.Replace("&", "&amp;");
                        reader.Close();
                        webclient.Dispose();
                        responseFromServer = GetStringsBetweenTags(responseFromServer, "<head>", "</head>");
                        return responseFromServer;

                    }

                } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T10:14:36.440

下载提琴手 (http://www.fiddler2.com/fiddler2/)

然后导航到 URL 并查看标题。然后查看您的应用程序发送的标头。您*发布*到的 URL 显然阻止了某些请求。

# kendo-ui - 停止剑道网格刷新/更新轮图像

> ID：14373451
> 
> 赞同：0
> 
> 时间：2013-01-17T06:39:42.090
> 
> 标签：kendo-ui, kendo-grid

我有一个经常刷新的剑道网格，但是不断出现在网格上的更新轮（每次刷新时）看起来很烦人，我只想将其关闭，我该如何实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T06:58:05.947

尝试：

```
kendo.ui.progress($("#someElementId"), false) 
```

隐藏它。

# c++ - C++11 Android 指针向量 push_back 不适用于 libstdc++

> ID：14373452
> 
> 赞同：3
> 
> 时间：2013-01-17T06:39:45.690
> 
> 标签：c++, c++11, android-ndk, libstdc++

以下代码在使用 STLPort 时编译良好：

```
std::vector<Engine::Screen::IOverlay*> Overlays;
auto TestOverlay=new Engine::Screen::Overlay();
Overlays.push_back(TestOverlay); 
```

但是，当使用 libstdc++ 编译时，出于某种原因，它会尝试使用移动构造函数：

```
error : cannot bind 'Engine::Screen::IOverlay*' lvalue to 'Engine::Screen::IOverlay*&&' ...\android-ndk-r8\sources\cxx-stl\gnu-libstdc++\include\bits\move.h 
```

这是一个非常基本的示例，但是当使用 push_back 时，此问题会在所有本地指针的应用程序中发生。

move.h 中发生错误：

```
template<typename _Tp>
inline typename std::remove_reference<_Tp>::type&&
move(_Tp&& __t)
{ return __t; } 
```

示例 2（我写的另一个基本测试：）

```
class TestClass {};
auto TestInstance=new TestClass;
std::vector<TestClass*> TestVector;
TestVector.push_back(TestInstance); 
```

我用 ndk r8 编译： -std=c++11 -D__STDC_INT64__

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T07:00:48.080

编译器中似乎有两个错误。首先它错误地调用`push_back(T&&)`which 然后尝试移动对象，这是错误地实现的：

```
template<typename _Tp>
inline typename std::remove_reference<_Tp>::type&&
move(_Tp&& __t)
{ return __t; } 
```

它应该被实现为：

```
template<class _Tp> 
typename remove_reference<_Tp>::type&&
move(_Tp&& __t) noexcept //noexcept should be here!
{
  return static_cast<typename remove_reference<_Tp>::type&&>(__t);
} 
```

这意味着您的编译器在此上下文中显示了两个错误：

*   不正确的重载决议，因为它调用`push_back(T&&)`.
*   不正确的执行`std::move`

您使用的是哪个版本的编译器？

# c# - 如何区分浏览器的多个选项卡之间的会话

> ID：14373456
> 
> 赞同：3
> 
> 时间：2013-01-17T06:39:55.767
> 
> 标签：c#, asp.net, session

我找到了一些方法来区分浏览器的多个选项卡之间的会话。首先是关于 Cookiesless。其次是在打开新标签时使用 Javascript 处理 window.name。第三是使用隐藏字段来保持会话值。还有其他方法来区分会话吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T07:05:57.750

许多网站（包括我的 DNS 提供商和一些银行）所做的只是将会话标识符保存在 URL 参数中而不是 cookie 中，并让页面之间的各种获取方式将 id 传递到下一页。

这会导致会话仅在每个单独的选项卡打开时才存在，这意味着每个选项卡都有一个不使用 cookie 的唯一会话。

在 ASP.NET 中，使用存在于每个页面上的隐藏字段来持续传递恒定的会话标识符是一种很好且简单的方法。

如果您出于安全原因想要阻止人们使用浏览器后退按钮或浏览器历史记录，您可以做的另一件事是在每次导航发生时对标识符进行哈希处理。这是许多网上银行服务使用的方法。请注意，虽然非常安全，但这种方法可能会让用户感到沮丧。

# jquery - Keith wood Jquery Countdown 在剩余时间 5 秒之前显示警报消息？

> ID：14373458
> 
> 赞同：1
> 
> 时间：2013-01-17T06:40:04.433
> 
> 标签：jquery, countdowntimer

[http://jsfiddle.net/shadsaleem/XSceK/6/](http://jsfiddle.net/shadsaleem/XSceK/6/)

我想在剩余 5 秒时提醒一条消息。

我的主要目标是在他的时间结束之前向用户显示一条消息，他还有 5 秒。任何人都可以帮助我吗？

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>

<script type="text/javascript" src="http://keith-wood.name/js/jquery.countdown.js"></script>
<script type="text/javascript">

     $(function () {
       var austDay = new Date();

       $('#defaultCountdown').countdown({until:+10});

      });

</script>

<div id="defaultCountdown" align="center"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:25:56.643

是的，您可以将刻度传递给一个函数，该函数将检查剩余时间并发出警报

为简单起见，注释掉您的新日期。将倒计时设置为运行 10 秒，并为每个刻度设置一个 watch 方法。在该方法中，我们检查秒数是否 = 5，如果是警报。

```
//var austDay=new Date()
$('#defaultCountdown').countdown({until: 10, compact:true, onTick: warnUser});

function warnUser(periods) { 
   if ($.countdown.periodsToSeconds(periods) == 5) { 
      alert("Five seconds remaining!"); 
   } 
} 
```

[http://jsfiddle.net/XSceK/9/](http://jsfiddle.net/XSceK/9/)

插件网站有很多例子。[http://keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)。单击选项卡进行探索。

干杯。

# php - 在每天开始时自动创建表格行

> ID：14373459
> 
> 赞同：2
> 
> 时间：2013-01-17T06:40:10.663
> 
> 标签：php, mysql, phpmyadmin, mysqli, timestamp

我希望注册用户每天登录并输入一个数据（一个数字）。我希望每天将其作为行插入我的数据库表中。当用户输入数据时，我可以使用查询来实现这一点。现在，如果用户错过了一天，则不会执行查询，也不会创建特定的行。但是，即使用户错过了一天，我也希望使用默认值创建一行来代替数据。有没有办法在 Mysql 中通过时间戳或某些东西（如自动增量）来实现这一点。我是mysql的新手。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:50:12.697

这将是错误使用数据库。
数据库不像纸质表格。他们打算只存储实际数据，而所有遗漏的数据都必须在输出时进行计算。

在您的情况下，您不需要创建任何行。
但是在选择特定日期的数据时，只需使用左连接以填充错过的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-16T00:28:24.257

正如我在评论中所说，我发现这些答案太复杂了。所以我每天在我设定的时间使用 Cron 作业运行一个 PHP 文件。这个 PHP 文件包含必要的代码来检查当天没有输入数据的用户并代表他们添加默认数据。

简而言之，我用于上述问题的解决方案是“ **CRON JOB** ”。

再次感谢其他用户的输入。

# android - Android列表视图背景问题

> ID：14373462
> 
> 赞同：0
> 
> 时间：2013-01-17T06:40:22.997
> 
> 标签：android, listview

在 Android 上，我在列表视图中遇到问题，背景在选择时变黑，我没有使用任何背景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T06:43:08.750

在 Listview 标记的 xml 文件中添加以下属性。

```
 android:cacheColorHint="@android:color/transparent" 
```

# php - 引用下拉框

> ID：14373463
> 
> 赞同：0
> 
> 时间：2013-01-17T06:40:30.673
> 
> 标签：php, javascript, ajax

我有这个代码来验证这一点。

```
<script type="text/javascript"> <!-- alert("Testing"); --> </script> 
```

此代码现在在表单页面上创建一个弹出框。一切都按预期工作！现在我遇到的问题是引用下拉框。我认为下面的代码应该可以解决问题，但没有。

```
var element; var i=EG;
element=document.getElementById("client_country"); element.selectedIndex = i; 
```

但我似乎无法让它工作。我认为这是由于使用了框架，任何人都可以指出我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:55:50.847

```
var i = 'EG'; // string inside quotes
var element = document.getElementById("client_country");
element.value = i; // set the selected option

// selectedIndex retrieves the value
var selected_value = element.options[element.selectedIndex].value; 
```

这假设您的 HTML 类似于...

```
<select id="client_country">
    <option value="AG">value a</option>
    <option value="CG">value c</option>
    <option value="EG">value e</option>
</select> 
```

[JSFiddle](http://jsfiddle.net/sgrfsh/fwyQV/)上的工作演示。

# .htaccess - 通过不同文件夹中的.htaccess文件将abc.com重定向到opencart中的www.abc.com

> ID：14373464
> 
> 赞同：0
> 
> 时间：2013-01-17T06:40:31.837
> 
> 标签：.htaccess, redirect, opencart

我在两个文件夹中安装了opencart - 一个是根文件夹，即'public_html/'，一个是'public_html/test/'。两个 opencart 都包含 .htaccess 文件。

'public_html/' 文件夹中 opencart 的 .htaccess 文件包含以下重写规则：

```
RewriteBase /
RewriteRule sitemap.xml /new/index.php?route=feed/google_sitemap
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA]
RewriteCond %{HTTP_HOST} ^abcd\.co\.in
RewriteRule (.*) http://www.abcd.co.in/$1 [R=301,L] 
```

并且'public_html/test/'文件夹上opencart的.htaccess文件包含以下重写规则：

```
RewriteBase /test/
RewriteRule sitemap.xml /new/index.php?route=feed/google_sitemap
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

问题是当我打开域**http://abcd.co.in**时，它将重定向到**http://www.abcd.co.in**，但是当我打开**http://abcd.co.in/test**

> *它没有重定向*

我去**http://www.abcd.co.in/test**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:48:02.877

如果您点击网址

```
http://abcd.co.in/test/ 
```

如果`.htaccess`文件夹中有另一个文件，`public_html`则不考虑根文件夹中的文件。您应该以这种方式扩展：`.htaccess``public_html/test/``public_html/test/.htaccess`

```
RewriteBase /test/
RewriteRule sitemap.xml /new/index.php?route=feed/google_sitemap
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA]
RewriteCond %{HTTP_HOST} ^abcd\.co\.in/test/
RewriteRule (.*) http://www.abcd.co.in/test/$1 [R=301,L] 
```

这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:12:54.383

您的重定向规则未应用。也`.htaccess`应该限制在您关联的文件夹中，试试这个，我的头顶：

```
RewriteBase /test/
RewriteRule sitemap.xml /test/index.php?route=feed/google_sitemap
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^?]*) /test/index.php?_route_=$1 [L,QSA] 
```

# model-view-controller - Web api 中的 DelegatingHandler

> ID：14373465
> 
> 赞同：0
> 
> 时间：2013-01-17T06:40:33.517
> 
> 标签：model-view-controller, asp.net-web-api

我在进行 OAuth 身份验证的 web api 管道中自定义了 DelegatingHandler 的实现。

目前，我有 MVC Web 应用程序（普通 Web 控制器），这些控制器想从 Web api 控制器获取数据。它们都在同一个 MVC Web 应用程序项目下。

我应该在下面采取哪些方法？

1.  将普通 Web 控制器视为“httpclient”以获得正确的 Web api 请求。

    缺点：我觉得这有点尴尬（通过为指定的 web api 控制器指定完整的 url），因为它们在同一个 web 项目下，它会完成 IIS web 请求过程。

2.  在普通的 MVC web 控制器操作中，像普通的 .NET 类一样实例化 web api 控制器。

    缺点：我在 web api 上丢失了 web 身份验证管道过程。

谢谢

约翰娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:07:01.173

您可以在内存中托管 Web API ..

[http://pfelix.wordpress.com/2012/03/05/asp-net-web-api-in-memory-hosting/](http://pfelix.wordpress.com/2012/03/05/asp-net-web-api-in-memory-hosting/)

# sql - 两列之和之间的除法

> ID：14373466
> 
> 赞同：7
> 
> 时间：2013-01-17T06:40:35.993
> 
> 标签：sql, aggregate, division

我需要将两列的总和除以总数。两列都是十进制数据类型。这是我迄今为止所拥有的，但它不起作用。

```
SELECT total_salary / DistEnroll
FROM   dbo.vw_Salary
WHERE  DistEnroll = (
           SELECT DISTINCT(distenroll)
           FROM   dbo.vw_Salary
           WHERE  YEAR = '2012'
                  AND dist_name = 'Sch Dist'
       )
       AND total_salary = (
               SELECT SUM(total_salary)
               FROM   [vw_salary]
               WHERE  YEAR = '2012'
                      AND dist_name = 'Sch Dist'
           ) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T06:45:37.097

```
select 
       ( select sum(total_salary) 
        from [vw_salary] 
        where year = '2012'
        and dist_name = 'Sch Dist') --totalsal
       /
       (select count(distinct distenroll) 
        from dbo.vw_Salary
        where year = '2012'
        and dist_name = 'Sch Dist') -- DistEnroll 
```

或更好：

```
 select sum(total_salary)  /  count(distinct distenroll) 
        from [vw_salary] 
        where year = '2012' and 
              dist_name = 'Sch Dist' 
```

# java - 需要帮助调试电子邮件代码

> ID：14373468
> 
> 赞同：0
> 
> 时间：2013-01-17T06:40:44.010
> 
> 标签：java, android, debugging, email

我想知道是否有人可以帮助我进行调试。我目前正在使用以下代码：

[在不使用默认/内置应用程序的情况下使用 JavaMail API 在 Android 中发送电子邮件](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)

并按照指示使用了所有代码。输入我的电子邮件字段后，我无法收到要发送的电子邮件。我注意到 GMailSender.java 中有一段代码，其中似乎缺少一段代码。

```
}catch(Exception e){

} 
```

知道我已经调试了代码的所有其他部分，所以我添加了一个 Log.e。

```
}catch(Exception e){
    Log.e("GmailDebug", e.getMessage(), e); 
} 
```

结果，我注意到我得到了以下日志。

```
01-16 22:22:38.933: E/GmailDebug(4487): null
01-16 22:22:38.933: E/GmailDebug(4487): android.os.NetworkOnMainThreadException 
```

在事先注释掉这些行并系统地取消注释它们之后，我终于能够确定我没有得到任何日志，直到我取消注释该行

```
Transport.send(message); 
```

有人可以帮助我，并告诉我如何防止这些错误吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:46:05.317

发生这种情况是因为您正在主线程上执行网络操作，而这在 Android 3.0 及更高版本上是不允许的。即使它在服务中，服务也会在 UI 线程上运行，除非您专门在另一个线程中启动它们或在其中创建一个线程。

[您可以通过使用Thread](http://developer.android.com/reference/java/lang/Thread.html)或[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)在主 UI 线程之外的后台线程中运行任务来解决此问题。

# javascript - 将 SQL Server 表数据导出到 excel、文本文件等

> ID：14373469
> 
> 赞同：1
> 
> 时间：2013-01-17T06:40:46.647
> 
> 标签：javascript, jquery, vb.net

我想从数据库中导出表，当我们单击应该弹出一个包含不同选项（如 excel、文本文件等）的窗口的按钮时，可以取消按钮，用户可以使用单选按钮选择所需的选项，并且只要他们单击确定按钮，表应根据他们的要求导出。

```
Public Function GetExport()
Dim cmd2 As SqlCommand = New SqlCommand
Dim con = New SqlConnection
  ("server = PROG19-PC;database = paginate;Trusted_Connection = yes")
cmd2.Connection = con
con.Open()

Dim da As New SqlDataAdapter("select * from tblMemberDetails", con)
Dim dtMainSQLData As New System.Data.DataTable()
da.Fill(dtMainSQLData)
Dim dcCollection As DataColumnCollection = dtMainSQLData.Columns

' Export Data into EXCEL Sheet
Dim ExcelApp As New Microsoft.Office.Interop.Excel.ApplicationClass()
ExcelApp.Application.Workbooks.Add(Type.Missing)

' ExcelApp.Cells.CopyFromRecordset(objRS);
For i As Integer = 1 To dtMainSQLData.Rows.Count
    For j As Integer = 1 To dtMainSQLData.Columns.Count
        If i = 1 Then
            ExcelApp.Cells(i, j) = dcCollection(j - 1).ToString()
        Else
            ExcelApp.Cells(i, j) = dtMainSQLData.Rows(i - 1)(j - 1).ToString()
        End If
    Next
Next

ExcelApp.ActiveWorkbook.SaveCopyAs("C:\test.xls")
ExcelApp.ActiveWorkbook.Saved = True
ExcelApp.Quit()
MsgBox("Data Exported Successfully into Excel File") 
```

# javascript - 将数据分类到哈希图中

> ID：14373473
> 
> 赞同：0
> 
> 时间：2013-01-17T06:41:17.993
> 
> 标签：javascript, jquery

我有一个以下格式的 javascript 对象，我正在尝试对其进行分类

```
var inputFacetArray=[
  { category:
"Company"
,  name:
"nokia"
},  { category:
"Persons"
,  name:
"ben affleck"
},  { category:
"Persons"
,  name:
"daniel craig"
},  { category:
"Persons"
,  name:
"george clooney"
}] 
```

我正在尝试将其转换为输出格式

```
[{Persons:["george clooney", "daniel craig", "ben affleck"]}, {company:["nokia"]}] 
```

我的代码如下

```
var facetCategorizedArray=[];
for(var k=0; k<inputFacetArray.length; k++){
    var l={};
    inputFacetArray[k]["name"].push(l[inputFacetArray[k].category]);
    facetCategorizedArray.push(l);
} 
```

上面的代码不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:47:31.797

这对你有用吗？

```
var outputArray = {"Persons":[], "Company":[]};
for ( var counter = 0; counter < inputFacetArray.length; counter++ )
{
   outputArray.Persons.push( inputFacetArray[counter].category );
   outputArray.Company.push( inputFacetArray[counter].name );
} 
```

# javascript - JavaScript：从外部访问匿名函数内部的变量

> ID：14373475
> 
> 赞同：23
> 
> 时间：2013-01-17T06:41:35.543
> 
> 标签：javascript, scope, anonymous-function

假设我有这个匿名函数：

```
(function(window){

 var private = 'private msg';

 function sayit() {
   alert(private) // works
 }

 document.body.onclick = sayit; // works

})(window);

// private shouldn't be accessible here 
```

这是 JavaScript 的行为方式吗？

也就是说，没有办法`private`从该匿名函数之外的任何地方访问？

如果是这样，是否有可能找到某种黑客`private`从外部访问，让代码保持原样？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T06:45:44.520

是的，这就是 Javascript 让您拥有“私有”变量（隐藏在函数范围内）的方式。

不，没有黑客可用于访问变量，例如`private`无需重写代码。

在函数内定义的变量`var`只能从该函数内访问。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-17T07:02:18.100

好的。我知道了。

```
(function(window){
    var alert_original = window.alert;
    window.alert = function(data) {
        window.extracted = data;
        alert_original(data);
    };
})(window);

(function(window){
    var private = 'private msg';
    function sayit() {
    alert(private) // works
 }
 document.body.onclick = sayit; // works
})(window); 
```

单击正文后，您可以从`extracted`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T07:12:27.483

它们不打算作为“私有”变量；这就是闭包的工作方式。至少，你可以在 Perl 和 Python 中做同样的事情，可能还有很多其他带有闭包和词法作用域的语言。

像 Firebug 或 Chrome Inspector 这样的调试器仍然可以在任何时候向您显示整个堆栈（包括封闭变量），但除此之外并且在不更改原始代码的情况下，我认为您不走运。

也许如果你告诉我们你的实际问题...... :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T06:50:54.303

这就是拥有范围和私有变量的全部意义所在

任何一个

将私有值设置为全局变量？

或者

在外面声明变量

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-01-17T06:49:36.033

你必须做这样的事情：

```
var Test = (function(window){
 var private = 'private msg';
 var api = {};

 function sayit(){
   alert(private) // works
 }
 document.body.onclick = sayit; // works

api.sayit = sayit;
return api;
})(window);

Test.sayit(); //this would alert 'private msg' 
```

# c# - 查询添加两列的值

> ID：14373476
> 
> 赞同：3
> 
> 时间：2013-01-17T06:41:37.767
> 
> 标签：c#, .net, sql-server, tsql, ado.net

我有一个表`emp`，它有 3 列`EmpId, Name & Salary`：我更改了表格并创建了一个新列`NewSalary`。现在我想乘以`Salary`1.2（或任何其他值）并将结果存储在`NewSalary`. 什么是 Sql 查询？

我试过了

```
SqlCommand search1 = new SqlCommand("update emp set NewSalary = Salary * 1.2", con);                

SqlCommand search2 = new SqlCommand("select NewSalary, Salary, Salary *1.2 as NewSalary from emp", con); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:34:58.670

使用“转换”。这是一个提示。使用 SqlParameters 向 sql 发送参数。不像“+ textboxt.text +”。

```
SqlCommand search = new SqlCommand("select * from emp where EmpId=@emId",sqlconnection);
serach.Parameters.AddWithValue("@emId",Convert.ToInt32(TextBox1.Text)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:35:51.983

尝试这个。

> “从emp中选择NewSalary，Salary，Convert（float，Salary）* 1.2作为NewSalary”

# google-chrome-extension - 在 Chrome 扩展程序中创建新窗口并插入动态内容

> ID：14373478
> 
> 赞同：2
> 
> 时间：2013-01-17T06:41:45.030
> 
> 标签：google-chrome-extension

我在创建新窗口和从我的扩展程序中添加内容时遇到问题。由于我不能在不丢失对新窗口的引用的情况下从脚本调用 window.open，因此我不得不使用 chrome.windows.create。

基本上我想要的是：

```
var newWindow = window.open();
newWindow.document.writeln( 'hello world' ); 
```

要在我的 chrome 扩展中创建等效项，我正在尝试这个：

```
chrome.windows.create({ type: 'popup' } , function(newWindow) {
                newWindow.tabs[0].executeScript(null, { code: 'document.write("hello world");' })
            }); 
```

新窗口已创建，但我似乎无法访问新创建窗口的文档对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T07:01:57.120

# 代码中的问题

*   如果您创建一个没有任何 的新窗口`URL`，它将创建两个带有`chrome://newtab`和 的窗口`blank popup window`。
*   您必须使用带有正确参数的 chrome.tabs.executeScript，而不是`newWindow.tabs[0].executeScript`

# 工作版本

```
chrome.windows.create({
    type: 'popup',
    url: "https://www.google.co.in/"
}, function (newWindow) {
    console.log(newWindow);
    chrome.tabs.executeScript(newWindow.tabs[0].id, {
        code: 'document.write("hello world");'
    });
}); 
```

# database-design - 一般和特定数据的数据库结构

> ID：14373482
> 
> 赞同：0
> 
> 时间：2013-01-17T00:13:04.113
> 
> 标签：database-design

我正在尝试将数据库布局概念化，并且我有一个“理论”问题。我有一个系统，例如：

*   用户
*   图书

这些书不是唯一的，例如爱丽丝、鲍勃和卡尔都可以拥有一本《白鲸记》。此外，每个用户可以拥有许多书籍。这是一个简单的多对多关系，我非常了解。但是，我将在哪里存储有关 Alice 的特定白鲸记副本的信息？

我最终希望能够做到以下几点： - 找到所有拥有 Moby Dick 副本的用户 - 更改有关一本书的个人“实例”的信息：Alice 的 Moby Dick 副本被“借出” - 更改/添加一本书的信息（即每个人的副本）：将出版商信息添加到 Moby Dick。

我看不出如何有效地布置这一点。我可以有 1 个书籍表，1 个用户表，然后为 n 个用户提供 n 个表，每个表都包含有关他/她的收藏的信息。当我需要找到每一个有白鲸记的副本时，这似乎会很慢。任何的意见都将会有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:16:02.913

假设它是一个图书馆数据库，我将从以下设计开始。表：

1.  用户（借书的人）
2.  书籍（关于书籍、书名、作者等的基本信息……这个级别的信息是合乎逻辑的）
3.  书本（这个存储物理印刷书籍信息）
4.  用户图书借阅（谁借了哪本图书）

这种表结构允许，

1.  一本书可以有许多书本，并且每本书都可以被识别。
2.  一个用户可以拥有多本书

为了更好地理解这里是一些伪 SQL 代码。

> “查找所有拥有 Moby Dick 副本的用户”

```
SELECT users.user_name
  FROM users u, "user book loans" ubl, "book copies" bk, books b
 WHERE 1 = 1
   AND b.book_name = "Moby Dick"--find book
   AND b.book_id = bk.book_id--find copies of that book
   AND bk.book_copy_id = ubl.book_copy_id--find loan info for the book copy
   AND ubl.user_id = u.user_id--find user who borrowed the copy 
```

我认为上面的查询解释了表结构，您可以添加属性，如发布到书籍副本的日期，或有关书籍作者的信息，用户书籍贷款上的一些日期字段以跟踪使用的时期

# android - 在 Realtivelayout 中使用表格布局

> ID：14373487
> 
> 赞同：0
> 
> 时间：2013-01-17T06:42:43.307
> 
> 标签：android, android-layout, android-relativelayout, tablelayout

![在此处输入图像描述](../Images/a38d907cce76ea1df542696fc4302ff0.png)

我在获得以下布局时遇到了麻烦，有人可以帮助获得以下布局吗？总背景应该是白色的。感谢任何帮助

下面是我的xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/askabud" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:paddingLeft="5dp" >
    </LinearLayout>

    <EditText
        android:id="@+id/fbedittext"
        android:layout_width="250dp"
        android:layout_height="100dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/imageView1"
        android:layout_marginTop="33dp"
        android:ems="10"
        android:gravity="top"
        android:hint="@string/saysomething"
        android:lines="6"
        android:paddingRight="5dp"
        android:scrollHorizontally="true" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/fbcancel" />

    <ImageView
        android:id="@+id/imageView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/fbedittext"
        android:layout_toLeftOf="@+id/imageView2"
        android:src="@drawable/facebooks1" />

    <ImageView
        android:id="@+id/imageView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/fbedittext"
        android:layout_alignLeft="@+id/imageView3"
        android:layout_marginBottom="18dp"
        android:src="@drawable/people" />

</RelativeLayout> 
```

有人可以建议我如何获得用于编辑文本和下拉菜单的圆角。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T07:12:19.603

对于editext的圆角，您可以在drawables文件夹中定义一个roundcorner.xml，它说

```
<corners android:radius="14dp" /> 
```

然后在你的 xml 中提到这个作为编辑文本的背景。

```
android:background="@drawable/roundcorner" 
```

检查这个下拉[http://developer.android.com/guide/topics/ui/controls/spinner.html](http://developer.android.com/guide/topics/ui/controls/spinner.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:18:30.560

检查我在您的代码中所做的更改：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/ic_launcher" />

    <EditText
        android:id="@+id/fbedittext"
        android:layout_width="250dp"
        android:layout_height="140dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/imageView1"
        android:layout_marginTop="33dp"
        android:ems="10"
        android:gravity="top"
        android:hint="saysomething"
        android:lines="6"
        android:paddingRight="5dp"
        android:scrollHorizontally="true" />

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="130dp"
        android:layout_alignBaseline="@id/fbedittext"
        android:layout_alignParentRight="true"
        android:layout_marginRight="10dip"
        android:layout_toRightOf="@id/fbedittexts" >

        <ImageView
            android:id="@+id/imageView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:src="@drawable/ic_launcher" />

        <ImageView
            android:id="@+id/imageView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:src="@drawable/ic_launcher" />
    </RelativeLayout>

    <Spinner
        android:id="@+id/spinner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/fbedittext" />

</RelativeLayout> 
```

你不需要线性布局。您可以使用`android:layout_marginRight`右角的间距。对于下拉菜单，您可以使用[Spinner](http://developer.android.com/guide/topics/ui/controls/spinner.html)

# ios - 在 xcode 4.5 中使用断点

> ID：14373489
> 
> 赞同：0
> 
> 时间：2013-01-17T06:42:53.467
> 
> 标签：ios, xcode4.5

我按照[http://blog.manbolo.com/2012/01/23/xcode-tips-1-break-on-exceptions](http://blog.manbolo.com/2012/01/23/xcode-tips-1-break-on-exceptions)这个链接在我的应用程序中设置断点，但它仍然向我显示线程和进程，我找不到出现异常的确切代码行。我使用的是 xcode 4.5，而我的设备使用的是 ios5.0，请帮帮我。/Users/administrator/Desktop/Scr​​een Shot 2013-01-17 at 12.33.42 PM.png

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:42:51.117

在断点导航器底部点击+并选择异常断点。这将在崩溃的代码行暂停程序

# cocos2d-iphone - 使用 box2d 中的鼠标关节（无触摸）将动态主体移动到目标位置

> ID：14373491
> 
> 赞同：0
> 
> 时间：2013-01-17T06:43:11.313
> 
> 标签：cocos2d-iphone, box2d-iphone

我正在尝试使用鼠标关节将球（动态体）移动到目标位置。

我有一个投篮按钮，当我点击它时，我会调用这个方法来创建我的球。

```
-(void) addNewSpriteAtPosition:(CGPoint)p withAngle:(CGFloat)angle
{
    CCLOG(@"Add sprite %0.2f x %02.f",p.x,p.y);

    angle = 270-angle;
    sprite1 = [PhysicsSprite spriteWithTexture:spriteTexture_ rect:CGRectMake(0 ,0 ,22,22)];                        
    [self addChild:sprite1 z:0 tag:1111];
    [spritesToRemoveArray addObject:sprite1];
    sprite1.rotation = angle;
    sprite1.position = ccp( p.x, p.y);

    // Define the dynamic body.
    //Set up a 1m squared box in the physics world

    bodyDef.type = b2_dynamicBody;
    bodyDef.position.Set(p.x/PTM_RATIO, p.y/PTM_RATIO-1.0);
    bodyDef.userData = sprite1;
    _footballBody = world->CreateBody(&bodyDef);
    _footballBody->SetUserData(sprite1);
    // Define another box shape for our dynamic body.
    b2CircleShape dynamicBox;
    dynamicBox.m_radius = 0.35f;
    //dynamicBox.(.5f, .5f);//These are mid points for our 1m box

    // Define the dynamic body fixture.
    b2FixtureDef fixtureDef;
    fixtureDef.shape = &dynamicBox; 
    fixtureDef.density = 20.0f;
    fixtureDef.friction = 0.9f;
    fixtureDef.restitution = 0.6f;
    fixtureDef.userData = sprite1;
    fixtureDef.filter.groupIndex = -1;
    _footballFixture = _footballBody->CreateFixture(&fixtureDef);
    [sprite1 setPhysicsBody:_footballBody];

    float angle1 = CC_DEGREES_TO_RADIANS(angle);
    b2Vec2 vect = b2Vec2(cos(angle1)*120, sin(angle1)*120);
    b2Vec2 PointVector = _footballBody->GetPosition();
    _footballBody->ApplyLinearImpulse(vect,PointVector);

    b2Vec2 targetPos = b2Vec2(body1->GetPosition());
    //if (_footballFixture->TestPoint(_footballBody->GetPosition())) {
    NSLog(@"\n Target postion = <%f,%f>",targetPos.x,targetPos.y);
    NSLog(@"\n football position = <%f,%f>",_footballBody->GetPosition().x/32.0,_footballBody->GetPosition().y/32.0);

        b2MouseJointDef md;
        md.bodyA = _groundBody;
        md.bodyB = _footballBody;
        md.target = targetPos;
        md.collideConnected = true;
        md.maxForce = 1000.0f * _footballBody->GetMass();
//        md.dampingRatio = 0;
//        md.frequencyHz = 100;
        _mouseJoint = (b2MouseJoint *) world->CreateJoint(&md);
        _footballBody->SetAwake(true);
    //}

} 
```

实际上，当我这样做时，球应该移动到目标点，但在这里使用上述方法，球会漂浮在它创建的点，然后慢慢地移动到左边缘的右边缘。

我需要你的建议我该如何解决这个问题。

非常感谢任何人的帮助。

谢谢大家，

# jquery - 始终保持 jquery 中的第一个 div 块打开

> ID：14373494
> 
> 赞同：0
> 
> 时间：2013-01-17T06:43:18.847
> 
> 标签：jquery, toggle, accordion

**我对普通的jQuery**有一个令人困惑的问题。无论何时单击标题详细信息，我都需要使第**一个 div** ***detailsPane始终保持打开状态。***换句话说，无论单击哪个 div 的任何标题，div detailsPane 都应该始终保持打开状态。**但我希望其余的能够像切换一样单击打开和关闭。**

HTML 如下

```
 <div class="petStockAccordion">
            <div id="accordion">
            <!-- DETAILS -->
              <h2 class="current">
                <a href="#tab-details" class="tab_01">
                    details
                </a>
              </h2>
              <div class="pane detailsPane" style="display:block">
                    DIV 1
              </div>
            <!-- Ingredients -->    
              <h2>
                <a href="#tab-reviews" class="tab_02">
                    ingredients
                </a>
              </h2>
              <div class="pane">
                This needs further work.
              </div>
            <!-- Delivery -->   
              <h2>
                <a href="#tab-deliveryTab" class="tab_03">
                    delivery

                </a>
              </h2>
              <div class="pane">
                    Div3
              </div>
            <!-- Reviews -->    
              <h2>
                <a href="#tab-reviews" class="tab_04">
                    reviews

                </a>
              </h2>
              <div class="pane">
                DIV4

              </div>
            </div>
            </div> 
```

jquery部分在下面

```
 <script type="text/javascript">
            function initMenu() {
              $('.petStockAccordion #accordion .pane').hide();
              $('.petStockAccordion #accordion .detailsPane').show();
              $('#accordion h2 a').click(
                function() {         $(this).parent('h2').next('div').slideToggle('fast');    
                  }
                );
              }
            $(document).ready(function() {initMenu();}); 
            </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:56:17.163

这样做，使用“不”的方法。如果您单击第一个锚点，这将使“detailsPane”div 保持打开状态。

```
<script type="text/javascript">
function initMenu(){
    $('.petStockAccordion #accordion .pane').not('.detailsPane').hide();
    $('#accordion h2 a').click(function() {                          
          $(this).parent('h2').next('div.pane').not('.detailsPane').slideToggle('fast');    
     });
    $(document).ready(function(){ initMenu(); });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:57:29.553

你可以试试这个代码来解决它

```
function initMenu() {

              $('.petStockAccordion #accordion .pane').hide();
              $('.petStockAccordion #accordion .detailsPane').show();
              $('#accordion h2 a').click(
                function() {         $(this).parent('h2').next('div').slideToggle('fast');    
                           $('.petStockAccordion  #accordion .detailsPane').show(); 
                  }
                );
              }

            $(document).ready(function() {initMenu();}); 
```

这是工作中的[JS Fiddle](http://jsfiddle.net/gREnX/)

# audio - 来自麦克风 + 立体声混音的 DirectShow 声音捕捉

> ID：14373495
> 
> 赞同：4
> 
> 时间：2013-01-17T06:43:23.677
> 
> 标签：audio, filter, directshow, capture, microphone

我正在尝试编写一些代码来使用 DirectShow 过滤器捕获麦克风和立体声混音。首先，我尝试使用 Windows SDK 中的 GraphEdit 设置过滤器。我将捕获设备设置为麦克风和立体声混音，然后将两者的捕获引脚连接到 AVI 多路复用器的输入 01 和输入 02，然后将 AVI 输出引脚连接到文件写入器的输入引脚。当我运行图表时，我得到

> 此图无法播放。未指定的错误（返回代码：0x80004005）

我已经对这个错误进行了相当多的搜索，但似乎找不到答案。

如果我尝试将它们分别连接到每个 WAV Dest 过滤器，我会得到相同的错误。出于某种我无法理解的原因，它不会让我同时捕获两者。当我从麦克风中捕捉时，StereoMix 是否在模拟麦克风？

如果我尝试一次从他们那里捕获一个，它会起作用，但我需要同时从两者中捕获。如果我将麦克风设置为输出到扬声器，那么我可以同时录制它们，但这并没有真正帮助我，因为用户可以在扬声器中听到自己的声音，这真的会分散注意力。

我也尝试并成功使用 WASAPI 记录环回，但我需要一些向后兼容性，因为使用 WASAPI 记录环回仅适用于 Vista 或 Windows 7。

我已经调查过了`PortAudio`，`FFmpeg`但我不能让程序变得比现在更复杂。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:57:28.980

我做了一些进一步的研究。显然，这是一个非常棘手的情况。我没有找到有关 DirectShow 过滤器的答案。

某些计算机没有支持 StereoMix 的声卡。唯一适用于 Windows XP 的解决方案是使用 Windows DDK 创建一个虚拟音频驱动程序，将其设置为默认设备，将缓冲区传递给真正的音频设备（不妨碍音频输出）和我的应用程序。

同时，我可以使用 DirectShow 过滤器从麦克风捕获音频。

以下是 Microsoft 关于音频驱动程序的文档：http: [//msdn.microsoft.com/en-us/library/windows/hardware/ff537871%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff537871%28v=vs.85%29.aspx)

我对这些事情不是很精通。我希望这可以帮助任何有同样情况的人。如果有人有任何其他建议，请告诉我。

# django - django.middleware.csrf.get_token() 用法

> ID：14373496
> 
> 赞同：1
> 
> 时间：2013-01-17T06:43:28.610
> 
> 标签：django, django-csrf, csrf-protection

考虑以下场景：页面`{% csrf_token %}`以`<form>`. 稍后此表单的提交（包括隐藏的 csrf_token）使用 ajax（post）执行，无需重新加载页面。
在服务器端，据我所知，令牌应该被发送回客户端并替换其中的那个`<form>`，因为令牌可以根据其生命周期进行更新（顺便说一下，令牌何时重新生成？
）令牌并发送响应我正在考虑使用 django.middleware.csrf.get_token()，但在代码中它似乎只会返回从客户端发送的那个。
那么 get_token() 会返回最新的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:29:32.513

使用在您的 js 中检索您的 csrf 令牌

```
var csrf_token = $(this).data('csrf');  // $(this) refers to your form in your html 
```

然后：

```
$('#yoursubmitbutton').click(function() {
$.ajax({
            url: url,
            type: "POST",
            dataType: "json",
            data: { csrfmiddlewaretoken: csrf_token, other_data: other_data },
            success: function(data) {
                if (data['success']=='true') {
                    // Handles success
                } else {
                    // Handles failure failed.
                }

                // Any logic you want
            },
            error: function() {
                                   // Error handling
            }
        }) 
});  // click event 
```

# php - 如何使用网络浏览器检查我的 php 函数是否正确？

> ID：14373497
> 
> 赞同：0
> 
> 时间：2013-01-17T06:43:33.310
> 
> 标签：php

我刚刚启动了我的 HTTPREQUEST 应用程序，我正在尝试首先设置我的 php 文件。

我的`wamp/www/MenuBook/`文件夹上有这个插入功能：

```
<?php

// array for JSON response
$response = array();

// check for required fields
if (isset($_POST['table_ID']) && isset($_POST['MenuBook']) && isset($_POST['order_status'])&& isset($_POST['order_date'])&& isset($_POST['order_receipt'])) {

    $tableID = $_POST['table_ID'];
    $menuBook = $_POST['MenuBook'];
    $order_status = $_POST['order_status'];
    $order_date = $_POST['order_date'];
    $order_receipt = $_POST['order_receipt'];

    // inlude db connect class
    require_once __DIR__ . '/DBConnect.php';

    // connecting to db
    $db = new DB_CONNECT();

    // mysql inserting a new row
    $result = mysql_query("INSERT INTO orderdb(table_ID,MenuBook,order_status,order_date,order_receipt) VALUES('$table_ID', '$menuBook', '$order_status','$order_date','$order_receipt')");

    // check if row inserted or not
    if ($result) {
        // successfully inserted into database
        $response["success"] = 1;
        $response["message"] = "Order successfully created.";

        // echoing JSON response
        echo json_encode($response);
    } else {
        // failed to insert row
        $response["success"] = 0;
        $response["message"] = "Oops! An error occurred.";

        // echoing JSON response
        echo json_encode($response);
    }
} else {
    // required field is missing
    $response["success"] = 0;
    $response["message"] = "Required field(s) is missing";

    // echoing JSON response
    echo json_encode($response);
}
?> 
```

现在我想检查它是否会使用我的浏览器将数据插入数据库，如下所示：

`localhost/MenuBook/insertOrder.php?$table_ID=003&$MenuBook=01&$order_status=PENDING&$order_date=2013-01-17&$order_receipt=NO`

截至目前，它在浏览器中返回：

`{"success":0,"message":"Required field(s) is missing"}`

有什么想法可以尝试检查吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T06:49:47.003

这不会插入数据，因为：

1.  您在 URL（GET 方法）中传递变量，并在脚本中使用`$_POST`.
2.  此外，您甚至还没有正确传递 URL 中的变量，它必须是`table_ID`, `MenuBook`etc 而不是`$table_ID`, `$MenuBook`。

解决方案是用户`$_GET`或`$_REQUEST`在您的脚本中，或者如果可能的话，使用方法传递值`POST`（更好的选择）。

用于测试：如果您已经使用`$_GET`或`$_REQUEST`在您的脚本中，只需将生成的 URL 复制粘贴到浏览器中并进行测试运行。否则，如果已使用`POST`创建示例表单（如果您没有）并提交以进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T06:49:48.120

看起来问题出在 URL 中的“$”符号上。URL 变量不需要那些；你只是为了PHP。不带 $s 试试看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T06:50:30.727

最简单的做法是创建一个包含表单的 HTML 页面，其中包含所有正确的字段。确保将其提交到正确的路径，并且方法是 POST。

例如：

```
<html>
    <head></head>
    <body>
        <form action="http://localhost/MenuBook/insertOrder.php" method="POST">
            <input type="text" name="table_ID" />
            <input type="text" name="MenuBook" />
            <input type="text" name="order_status" />
            <input type="text" name="order_date" />
            <input type="text" name="order_receipt" />
            <input type="submit" />
        </form>
    </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T06:47:37.827

根据您选择的浏览器，肯定会有至少一个 REST 控制台插件/扩展，可以轻松测试 HTTP 请求（包括 POST 和任何其他*奇特*的方法）并查看它们的响应。

我使用[铬](https://chrome.google.com/webstore/detail/advanced-rest-client/hgmloofddffdnphfgcellkdfbfbjeloo)。其他喜欢[Firefox](https://addons.mozilla.org/en-us/firefox/addon/restclient/)。

`curl`是另一种选择，如果你*那样*摆动。

# javascript - disqus 在 chrome 中的 https 页面上不起作用。有什么修复吗？

> ID：14373498
> 
> 赞同：0
> 
> 时间：2013-01-17T06:43:41.640
> 
> 标签：javascript, google-chrome, pug, disqus

我有一个`https`嵌入页面，`disqus`用于评论发布的数据。问题是当页面被加载时`chrome`，它会阻止`disqus code`执行，因为它是从`http`主机提供的。具体来说：

```
script(type="text/javascript")
var disqus_shortname = 'postocks';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})(); 
```

所以 disqus 不会在 chrome 中加载。在 Firefox、Safari 中运行良好。

我厌倦了通过以下方式修复它：

1.  使 dsq.src 可以 `dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';`正常工作。
2.  我之前已经看到 jquery docs 部分使用了相同的内容。现在尝试了该页面，以便我可以参考代码。Disqus 似乎已被删除。

有什么修复方法可以让它在 https 页面上工作吗？此外，如果我在我的 https 主机上获得 embed.js 并提供服务，那会有所不同。请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T06:48:14.390

简单地说，使用 加载 Disqus 内容`https`，如此[处](http://help.disqus.com/customer/portal/articles/542119-can-disqus-be-loaded-via-https-)所述。

```
dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js'; 
```

# boto - Boto AWS CloudSearch 返回排名/分数

> ID：14373499
> 
> 赞同：0
> 
> 时间：2013-01-17T06:43:51.070
> 
> 标签：boto, amazon-cloudsearch

我正在使用 Boto 的 CloudSearch API 来查询 CloudSearch 索引。我看不到检索每个搜索结果的排名/分数的方法。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:18:44.407

将排名表达式的名称添加到 return_fields 参数：

```
import boto
conn = boto.connect_cloudsearch(key,secret)
domain = conn.create_domain('domain_name')
search_service = domain.get_search_service()

results = search_service.search(query, return_fields=['text_relevance','name_of_custom_rank_expression'])

for result in results:
    score = result['data']['name_of_custom_rank_expression'][0] 
```

# mysql - Rails：ActiveRecord 急切加载和 N+1 查询

> ID：14373500
> 
> 赞同：2
> 
> 时间：2013-01-17T06:43:53.243
> 
> 标签：mysql, ruby-on-rails, ruby, rails-activerecord

我正在使用 Rails 3.2.8，并且有模型

```
class Subject < ActiveRecord::Base
  has_and_belongs_to_many :users
end
class User < ActiveRecord::Base
  has_and_belongs_to_many :subjects
end 
```

在 SubjectsController 中，索引

```
@subjects = Subject.includes(:users).all 
```

我使用包含来进行急切加载，并且在视图文件中，我想通过以下方式显示主题的所有用户：

```
<%= subject.users.count if not subject.users.nil? %> 
```

问题是在显示用户数时我对每个主题都有 db hit，我认为这是**N+1**查询问题

我错过了什么或做错了什么？

顺便说一句：我正在使用 MySQL

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T06:54:15.717

该`count`方法总是生成 SQL COUNT 查询。由于您已经加载了所有条目，请尽量使用`length`以避免额外的查询：

```
<%= subject.users.length if not subject.users.nil? %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:17:08.547

```
<%= subject.users.count if not subject.users.nil? %> 
```

count总是做sql查询，不做任何缓存

长度和大小是彼此的别名，计数和长度之间的区别在于您可以将参数传递给计数，但长度或大小和计数不做任何缓存。

如下

```
[1,2,3].count{|x| x > 2}
result => 1 
```

所以使用以下任何语句

```
<%= subject.users.length if not subject.users.nil? %>

<%= subject.users.size if not subject.users.nil? %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T06:55:42.817

首先，`subject.users`返回一个永远不会为零的数组。其次，尝试`size`代替`count`. 所以代码可能是：

```
<%= subject.users.size if not subject.users.empty? %> 
```

# android - 如何使用 url 图像和文本在 android 中解析 XML 并在列表视图中将其框起来

> ID：14373506
> 
> 赞同：0
> 
> 时间：2013-01-17T06:44:17.207
> 
> 标签：android, listview, xml-parsing, imageview

任何人都可以告诉我如何解析一个具有图像 url 和两个文本的 XML 文件，我必须解析并在列表视图中显示它。任何人都可以向我展示编码，作为初学者，我想做这个任务。这不是静态的，而是动态的，其中我将拥有 url，我只需要从我的 android 应用程序中解析它并在列表视图中显示它。提前致谢。如果有人可以在这方面帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:49:02.173

取决于您使用的适配器类型。如果您使用的是内置适配器，它应该采用布局资源 ID。如果您正在构建自己的，请使用：

```
public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.call_list_view, null);
        }
            //initialize the view values here
  } 
```

# java - Spring MVC 中的小程序：ClassNotFound

> ID：14373509
> 
> 赞同：1
> 
> 时间：2013-01-17T06:44:25.877
> 
> 标签：java, spring-mvc, applet

通过从 jsp 页面运行小程序，由于 spring 安全性，映射得到更改。我已经使用 Spring MVC 创建了 Maven 项目。这是我的 Jsp 页面

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<HTML>
<HEAD>
<TITLE>Java applet example - Passing applet parameters to Java applets</TITLE>
</HEAD>
<BODY>
<object type="application/x-java-applet" height="300" width="550">
    <PARAM NAME="Downloadfile" VALUE="${Downloadfile}">
    <PARAM NAME="Tempstorage" VALUE="${Tempstorage}">
       <param name="archive" value="/webapps/pages/Applet.jar" />
      <param name="code" value="MainApplet8" />
</object>
</BODY>
</HTML> 
```

我已将 Applet.jar 放在：/src/webapps/pages/Applet.jar

这是我的 MainApplet.java 代码：

```
public class MainApplet8 extends Applet
{
     public void init()
     {
         String SourceUrl;
         final String DestinationPath = getParameter("Tempstorage");
         SourceUrl = getParameter("Downloadfile");
         System.out.println(SourceUrl + "," + DestinationPath);         
          File myFile = (File) AccessController.doPrivileged(new PrivilegedAction() {
              public Object run()
              {
                  return new File(DestinationPath);
              }
              });
          if (SourceUrl != null && DestinationPath != null) {
             try {               
                 URL url = new URL(SourceUrl);
                 URLConnection con = url.openConnection();
                 FileOutputStream ot = new FileOutputStream(myFile);
                 BufferedInputStream in = new BufferedInputStream(
                         con.getInputStream());
                 int n;
                 while ((n = in.read()) != -1) {
                     ot.write(n);
                 }
                 in.close();
                 ot.close();
             } catch (Exception e) {
                 JOptionPane.showMessageDialog(null,  "AA::::" + e.getMessage());
                 e.printStackTrace();
             }
             try {
                 System.out.println("Executing the application");                
                 Desktop.getDesktop().open(new File(DestinationPath));
                 int processExit = 0;             
             } catch (Exception e) {
                 JOptionPane.showMessageDialog(null,  "A::" + e.getMessage());
                 e.printStackTrace();
             }
         }
     }
} 
```

eclipse中的错误日志：

警告：org.springframework.web.servlet.PageNotFound - 在名为“appServlet”的 DispatcherServlet 中找不到带有 URI [/eSenseReengineering/tc-teacher/rs/MainApplet8] 的 HTTP 请求的映射

注意：我从以下方法重定向 Jsp 页面：

```
@RequestMapping(value = "rs/openFile", method = RequestMethod.GET)
public String openFile(@RequestParam(value = "path", required = true) String path, @RequestParam(value="objectName", required = true) String objectName,@RequestParam(value="objectType", required = true) String objectType, Model model, HttpServletRequest request) {
    String destinationPath = "D:/temp/"+objectName+"."+objectType;
    String hostURL = request.getRequestURL().toString();
    hostURL = hostURL.substring(0, hostURL.indexOf(Constants.contextName));
    String sourcePath = hostURL+ path;
    request.setAttribute("Downloadfile", sourcePath);
    request.setAttribute("Tempstorage",destinationPath);    
    return "test";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T06:39:24.387

在 test.jsp 文件中完成的修改：

```
<object type="application/x-java-applet" height="300" width="550">
    <PARAM NAME="Downloadfile" VALUE="http://127.0.0.1:9090/eSenseData/data/sample.doc">
    <PARAM NAME="Tempstorage" VALUE="${Tempstorage}">
    <param name="archive" value="<c:url value="/resources/lib/Applet.jar"/>"/> 
    <param name="code" value="MainApplet8" />
</object> 
```

以及 Applet.jar 的路径：/resources/lib/Applet.jar

# ruby-on-rails - 在 to_JSON rails 中包含 no.of 关联

> ID：14373514
> 
> 赞同：0
> 
> 时间：2013-01-17T06:44:51.053
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我在这样的 Rails 模型中有一个关系，主题有很多单位，单位有很多问题。所以在控制器中返回这样的响应

```
 @response = subject.as_json()
@response["units"] = subject.units.to_json() 
```

现在在此我想包括该主题的每个单元中可用问题的数量。

这样做

```
 @response["units"] = subject.units.to_json(:include => :questions) 
```

将给出包括该单元中所有问题的数组..但我只需要发送计数。

我实际上可以在单位控制器中编写一个方法来返回问题计数，但这对我来说不是很可行。所以，让我知道是否可以通过 :include 直接包含计数。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:56:52.703

问题是每次执行此操作时都要对问题表进行计数。

您应该研究`counter_cache`Rails 中的功能。由于每次收到此响应时都需要此值，因此将计数缓存在父级上`unit`而不是每次都运行计数是有意义的。

文档：[http ://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to-label-Options](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to-label-Options)

Railscast：[http ://railscasts.com/episodes/23-counter-cache-column](http://railscasts.com/episodes/23-counter-cache-column)

不久之后，如果您提高接受率，您将获得更多更好的答案。它非常低，只有 29%。

# networking - 创建具有 64 位前缀的 IPv6 子网

> ID：14373516
> 
> 赞同：1
> 
> 时间：2013-01-17T06:44:57.580
> 
> 标签：networking, ip, ipv6, subnet

我正在查看这个[IPv6 计算器](http://www.subnetonline.com/pages/subnet-calculators/ipv6-subnet-calculator.php)以了解 IPv6 子网的工作原理，但是有些东西我不明白。

我正在尝试使用地址创建一个子网：

```
2001:db8:8714:3a90:/64 
```

当我这样做时，它告诉我需要 1 位并且剩余 63 位，这是有道理的。但是，当我单击“计算子网”时，它告诉我：

> 错误：您没有足够的空间容纳这么多具有​​此前缀的子网级别。删除一些子网级别或增加前缀，然后重试。

这是我没有得到的部分。有了 64 位可用，对于子网来说应该绰绰有余，还是我错过了关于 IPv6 子网划分工作方式的一些东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T07:12:40.733

不，/64 是您可以使用的最大前缀。在那里你确实有 64 位的节点，但你不能创建任何进一步的子网。

这是因为 IPv6 要求无状态自动配置的地址（根据 RFC 4862）必须适合主机部分。并且由于这些地址在主机部分占用 64 位，如果进一步拆分 /64 将没有空间。

# java - Hadoop和hbase java客户端.. HbaseRPC问题

> ID：14373517
> 
> 赞同：0
> 
> 时间：2013-01-17T06:45:07.987
> 
> 标签：java, hbase

我正在尝试将数据插入 hbase。我正在从远程机器运行 java 程序。我已经提到了下面的代码。

```
try {
    Configuration conf = HBaseConfiguration.create();
    conf.clear();
    conf.set("hbase.zookeeper.quorum", "<HOST_IP>:2181");
    conf.set("hbase.zookeeper.property.clientPort", "2181");
    conf.set("hbase.zookeeper.dns.nameserver", "<HOST_IP>");
    conf.set("hbase.regionserver.port","60020");
    conf.set("hbase.master", "<HOST_IP>:9000");
    HTable table = new HTable(conf, "test");
    Put put = new Put(Bytes.toBytes("row5"));
    put.add(Bytes.toBytes("colfam1"), Bytes.toBytes("qual1"),
    Bytes.toBytes("val1"));
    put.add(Bytes.toBytes("colfam1"), Bytes.toBytes("qual2"),
    Bytes.toBytes("val2"));
    table.put(put);
} catch (MasterNotRunningException e) { 
    e.printStackTrace(); 
} catch (ZooKeeperConnectionException e) { 
    e.printStackTrace(); 
} catch (TableNotFoundException e) { 
    e.printStackTrace(); 
} catch (IOException e) { 
    e.printStackTrace();
} 
```

我收到以下错误

```
INFO ipc.HbaseRPC: Server at localhost/127.0.0.1:60020 could not be reached after 1 tries, giving up.
org.apache.hadoop.hbase.client.RetriesExhaustedException: Failed setting up proxy interface org.apache.hadoop.hbase.ipc.HRegionInterface to localhost/127.0.0.1:60020 after attempts=1
    at org.apache.hadoop.hbase.ipc.HBaseRPC.waitForProxy(HBaseRPC.java:355)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getHRegionConnection(HConnectionManager.java:1176)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getHRegionConnection(HConnectionManager.java:1195)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegionInMeta(HConnectionManager.java:898)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:797)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.relocateRegion(HConnectionManager.java:772)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegionInMeta(HConnectionManager.java:1002)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:801)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:766)
    at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:189)
    at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:163)
    at com.tcs.hbase.HbaseSample.insertData(HbaseSample.java:30)
    at com.tcs.hbase.HbaseSample.main(HbaseSample.java:82)
Caused by: java.net.ConnectException: Connection refused: no further information
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(Unknown Source)
    at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:206)
    at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:406)
    at org.apache.hadoop.hbase.ipc.HBaseClient$Connection.setupIOstreams(HBaseClient.java:328)
    at org.apache.hadoop.hbase.ipc.HBaseClient.getConnection(HBaseClient.java:883)
    at org.apache.hadoop.hbase.ipc.HBaseClient.call(HBaseClient.java:750)
    at org.apache.hadoop.hbase.ipc.HBaseRPC$Invoker.invoke(HBaseRPC.java:257)
    at $Proxy4.getProtocolVersion(Unknown Source)
    at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:419)
    at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:393)
    at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:444)
    at org.apache.hadoop.hbase.ipc.HBaseRPC.waitForProxy(HBaseRPC.java:349)
    ... 12 more 
```

当我在安装了 hbase 的机器上运行相同的代码时，它的工作正常。从日志中可以清楚地看出 rpc 正在解析为 localhost ip。我想知道如何将 rpc ip 配置为安装 hbase 的机器的 ip。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:37:10.703

此问题的根本原因在于您的 /etc/hosts 文件。如果你检查你的 /etc/hosts 文件，你会发现一个类似下面的条目（在我的例子中，mu 机器被命名为 domainnameyouwanttogive）

127.0.0.1 localhost 127.0.1.1 域名youwanttogive

# 以下行对于支持 IPv6 的主机是可取的

::1 ip6-localhost ip6-loopback fe00::0 ip6-localnet ff00::0 ip6-mcastprefix ff02::1 ip6-allnodes ff02::2 ip6-allrouters

根本原因是 domainnameyouwanttogive 解析为 127.0.1.1 这是不正确的，因为它应该解析为 127.0.0.1（或外部 IP）。由于我的外部 IP 是 192.168.58.10 我创建了以下 /etc/hosts 配置；

127.0.0.1 localhost 192.168.43.3 域名youwanttogive

# 以下行对于支持 IPv6 的主机是可取的

::1 ip6-localhost ip6-loopback fe00::0 ip6-localnet ff00::0 ip6-mcastprefix ff02::1 ip6-allnodes ff02::2 ip6-allrouters

这将确保您的 localhost 上的主机进程解析将正确完成，并且您可以在开发系统上正确启动 HBase 安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:59:58.827

检查您的 hbase/conf/regionserver 的 IP。把它作为你的本地主机。我想你不会得到这个错误。

还要确保在启动 HBASE 之前 HDFS 中的所有守护程序都已启动并正在运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T09:08:24.217

sudo pico /etc/hosts

如果您看到 127.0.1.1，请将其更改为 127.0.0.1 如果您看到您的外部 IP（wget [http://ipecho.net/plain](http://ipecho.net/plain) -O - -q ; echo），请将其更改为 127.0.0.1

通常，您只有一个输入 127.0.1.1 machineName，如果您将其替换为 127.0.0.1 HBase 工作（更改后您将拥有 127.0.0.1 localhost 和 127.0.0.1 machineName）

# git - 如何将未提交的更改从一个分支转移到另一个分支

> ID：14373521
> 
> 赞同：0
> 
> 时间：2013-01-17T06:45:40.087
> 
> 标签：git

我的 git status 显示以下内容，我想创建一个新分支并将这些未提交的更改转移到该分支..我该怎么做？

```
<prompt>git status
# Not currently on any branch.
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   DATA/code/inc/sirApi.h
#       modified:   DATA/code/src/pe/include/miloSession.h
#       modified:   DATA/code/src/pe/milo/miloProcessSmeReqMessages.c
#       modified:   DATA/SME/src/sac/sacApiRoam.c
#       modified:   DATA/SME/src/sac/sacInsideApi.h 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:56:54.523

试试这个：

```
git checkout -b newbranch
git add [your files]
git commit -m'Your message' 
```

如果要提交所有文件，可以运行

```
git checkout -b newbranch 
git commit -a -m'Your message' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:13:20.230

采用

```
git checkout -b <new-branch> <start-point> 
```

其中 new-branch 是您要创建的分支的名称，并将 sha1 指向您希望新分支开始的位置。既然你是分离的，我认为最好明确说明起点，这样你就可以确定你的分支从哪里开始。

# android - 未在 ListActivity 上调用 onListItemClick

> ID：14373527
> 
> 赞同：1
> 
> 时间：2013-01-17T06:46:01.730
> 
> 标签：android, android-imageview, listactivity

我有一个小应用程序，我正在尝试使用 ListActivity 显示 youtube 缩略图列表

```
public class ResultListActivity extends ListActivity {
.....

......
@Override
    protected void onCreate(Bundle savedInstanceState) {

loadData();

---
---

}

private void loadData(final String searchQuery) {
        AsyncTask<Object, Void, List<YouTubeVideos>> asyncTask = new AsyncTask<Object, Void, List<YouTubeVideos>>() {

.....

}

/** {@inheritDoc} */
    @Override  
    protected void onListItemClick(ListView l, View v, int pos, long id) {  
        super.onListItemClick(l, v, pos, id);

        Log.d("test","Inside onListItemClick");

} 
```

xml 看起来像这样

```
<ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true" >
    </ListView>

   <ImageView
    android:id="@+id/imageView1" 
    android:layout_height="wrap_content"
    android:layout_width="100dp" 
    android:focusable="false"
    android:focusableInTouchMode="false"
    >
</ImageView> 
```

适配器：

```
public class ResultViewAdapter extends BaseAdapter {

@Override
    public View getView(int position, View convertView, ViewGroup parent) {

ImageView imageView = (ImageView) row.findViewById(R.id.imageView1);

        imageView.setImageDrawable(torvideo.getDrawable());

        return row;
}

...

} 
```

我无法调用 onListItemClick。如果我犯了任何错误，你能告诉我吗？

更新 1/17

当我单击时没有任何反应，但我在日志中看到这些

01-18 04:09:32.030：W/Trace（973）：来自 nativeGetEnabledTags 的意外值：0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T06:59:57.963

在我的`ListView`我有一个可点击`TextView`和可点击的`ImageView`. `onListItemClick`对我不起作用，因为我在列表行中有多个可点击项目。所以我所做的是`onClickListener`在我`getView()`的适配器中实现。这是我的代码：

```
public class SimpleArrayAdapter extends ArrayAdapter<String>{

private LayoutInflater mInflater;
private String[] mStrings;
private TypedArray mIcons;
private int mViewResourceId;

public SimpleArrayAdapter(Context context, int textViewResourceId, String[] names, TypedArray icons) {
    super(context, textViewResourceId, names);
    // TODO Auto-generated constructor stub

    mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    mStrings = names;
    mIcons = icons;
    mViewResourceId = textViewResourceId;
}

public int getCount(){
    return mStrings.length;
}

public View getView(final int position, View convertView, ViewGroup parent){
    convertView = mInflater.inflate(mViewResourceId, null);

    ImageView iv = (ImageView)convertView.findViewById(R.id.option_icon);
    iv.setImageDrawable(mIcons.getDrawable(position));
    iv.setTag("colorChooserClicked");

    iv.setOnClickListener( new OnClickListener() {
        int pos = position;
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Log.v("text", "Image clicked, row %d"+pos);

        }
    });
    TextView tv = (TextView)convertView.findViewById(R.id.textview01);
    tv.setText(mStrings[position]);
    tv.setTag("textViewClicked");
    tv.setOnClickListener(new OnClickListener() {
        int textpos = position;
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Log.v("text", "Title clicked  %s"+mStrings[textpos]);
        }
    });
    return convertView;

}

} 
```

发生这种情况是因为我们有多个可点击项目，并且我们正在尝试使用`ListActivity`. 否则，另一种选择是为您扩展`Activity`课程`MainActivity`，然后再做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T06:56:32.387

对于 ListActivity 它的简单调用`setOnItemClickListener`

对应的代码如下

```
list.setOnItemClickListener(new OnItemClickListener() {

public void onItemClick(AdapterView<?> arg0,
                    View arg1, int position, long arg3)
{
   System.out.println("LIST ITEM POSITION "+position);
}
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T06:56:51.843

> 您的 baseadapter 的 imageview xml 添加此行

```
android:clickable="false"
android:focusable="false" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T06:51:07.320

```
ListView lv = getListView();
 lv.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> arg0, View view, int arg2,
                        long arg3) {
                     Log.d("test","Inside onListItemClick");
                }
            }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T07:00:53.727

您需要`row.setOnClickListener(new OnItemClickListener(position));`为 getView() 添加 ResultViewAdapter

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-18T16:20:36.107

如果您有一个名为 ListActivity 的类，请确保您从正确的 listActivity 扩展，因为在扩展时，您的 ListActivity 类和超类 ListActivity 都会出现

# c# - 如何扩课？

> ID：14373531
> 
> 赞同：0
> 
> 时间：2013-01-17T06:46:08.717
> 
> 标签：c#, oop, interface

我正在对提供数据的 API 进行更改。一些搜索需要有关作者的数据并获取`IAuthor`对象。API 有一个`IAuthor`接口和一个具体的实现类，`IAuthor`称为`Author`.

我需要添加一个布尔属性，`IsNovelist`这将改变一些但不是所有搜索的语义。

我听说过[开放/封闭原则](http://en.wikipedia.org/wiki/Open/closed_principle)，似乎更改`IAuthor`和/或`Author`类会违反这一点。那么如何进行这个简单的改变呢？

* * *

更新：

也许我专注于错误的课程。我不想向类添加*行为*`Author`（这只是将参数传递给 API 的一种方式）。所以`Decorated`作者不需要布尔标志，因为它是`isNovelist == true`隐含的。

`GetBooks`给定一个被标记为小说家的作者，我需要更改该方法的行为。所以更像这样的东西，但我的想法可能很不稳定，因为现在我正在改变（而不是扩展）这个`Books`类：

```
//Before
class Books 
{
   public Books[] GetBooks(IAuthor author){
       // Call data access GetBooks...
    }
}

//After
class Books 
{
   public Books[] GetBooks(IAuthor author){
       // To maintain pre-existing behaviour
       // call data access GetBooks with SQL param @isNovelist = false...
       // (or don't pass anything because the SQL param defaults to false)
    }

   public Books[] GetBooksForNovelist(IAuthor author){
       // To get new behaviour
       // call data access GetBooks with SQL param @isNovelist = true
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:55:06.817

解决方案 2：

```
class Program
{
    private static void Main(string[] args)
    {

        IAuthor author = new Novelist();
        author.Name = "Raj";

        // i guess u have check if author is a novelist
        // the simple way is by safe typecasting

        Novelist novelist = author as Novelist;

        if (novelist != null)
        {
            Console.WriteLine("Wohoo, i am a novelist");
        }
        else
        {
            Console.WriteLine("Damn,i cant write novel");
        }

    } 
```

解决方案 1：

```
public enum AuthourType
{
    Novelist,
    Other
}

public interface IAuthor
{
    string Name { get; set; }
    AuthourType Type { get; set; }

}

public class  Novelist : IAuthor
{
    public string Name { get; set; }
    public AuthourType Type { get; set; }
    // incase u dont want it to be set to other value
    /*        
    public AuthourType Type
    {
        get { return type; }
        set
        {
            if (value != AuthourType.Novelist)
            {
                throw new NotSupportedException("Type");
            }
            type = value;
        }
    }
    */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:21:50.010

这是使用装饰器模式的方法

```
interface IAuthor
{
    void someMethod();
}

class Author:IAuthor{

    public void someMethod(){
        //Implementation here
    }
}

//Class that will add the extra behavior.
class DecoratedAuthor : IAuthor
{
    IAuthor author;
    public bool isNovelist{get;set;}//Add the extra Behavior

    public DecoratedAuthor(IAuthor auth)
    {
        this.author = auth;
    }

    public void someMethod(){
        //Call the Author's version here
        author.someMethod();

        //check if he is a novelist
        isNovelist = true;
    }

}

public class program{
    public static void Main(string[] args)
    {
        IAuthor auth = new Author();
        DecoratedAuthor novAuth = new DecoratedAuthor(auth);

        DecoratedAuthor.someMethod();
        //see if he is a novelist
        Console.WriteLine(novAuth.isNovelist);

    }

} 
```

# php - 想计算表中的总行数

> ID：14373534
> 
> 赞同：-1
> 
> 时间：2013-01-17T06:46:35.003
> 
> 标签：php, html, jquery

我正在做敲除绑定以将值插入表中。如果表中的行数为 0，那么我必须显示一条警报消息。但为此，我需要计算显示数据的行数。

我的视图代码如下：

```
 <table class="table table-hover table-bordered datagrid" style="width: 355px;" id="remodellingTable">
       <thead>
         <tr>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Address</th>
            <th>City</th>
            <th>State</th>
         </tr>
       </thead>
       <tbody data-bind="foreach:items">
          <tr>
             <td data-bind="text:fname" id="tdfname"></td>
             <td data-bind="text:lname"></td>
             <td data-bind="text:addr"></td>
             <td data-bind="text:city"></td>
             <td data-bind="text:state"></td>
          </tr>
       </tbody>
    </table>
<button type="button" class="btn" id="nexttarget"> Next <i class="icon-arrow-right"></i></button> 
```

我用于此检查的 jquery 代码如下：

```
$('#nexttarget').live('click', function () 
{
     var rowcount = ('#remodellingTable > tbody > tr').length;
    if (rowcount > 0) 
    {
       $('#authorize').hide();
       $('#target').hide();
       $('#sideone').show();
    }
    else 
    {
       alert("There are no targets selected");
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T06:50:12.330

您忘记调用 jQuery，使用`$`：

```
var rowcount = $('#remodellingTable > tbody > tr').length; 
```

[http://jsfiddle.net/ENQrX/](http://jsfiddle.net/ENQrX/)

如果您不调用 jQuery，那么您只是在评估 string 的长度`'#remodellingTable > tbody > tr'`，这显然是无关紧要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T06:56:11.527

用这个

```
var rowcount = $('#remodellingTable > tbody > tr').length; 
```

代替 `var rowcount = ('#remodellingTable > tbody > tr').length;`

# android - Android MediaPlayer 音频会话 ID 指的是什么？

> ID：14373541
> 
> 赞同：8
> 
> 时间：2013-01-17T06:47:09.823
> 
> 标签：android, android-mediaplayer, android-resources

如标题所述，`MediaPlayer`对象*音频会话 ID*指的是什么？最初，我打算检索我正在播放`int`的音频资源的资源 ID 。`MediaPlayer`但我找不到一种方法。

然而，我偶然发现了这个方法[**getAudioSessionId()**](http://developer.android.com/reference/android/media/MediaPlayer.html#getAudioSessionId%28%29)并且我想知道这是否是我正在寻找的函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T17:14:28.990

android 系统跟踪当前正在播放或录制的声音（音频会话），其他服务可以通过引用它们的音频会话 ID 来连接它们。系统混音（扬声器发出的声音）的音频会话 ID 为 0。

系统混合音频会话 ID 0 现在已弃用，因此您必须使用`getAudioSessionId()`.

简而言之，除非您想构建可视化器，否则这不是您要寻找的。

编辑：另外，对于任何试图将`getAudioSessionID()`from`AudioRecord`与 a`Visualizer`或其他东西一起使用的人，这是行不通的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-30T15:33:59.330

来自[AudioManager.generateAudioSessionId](https://developer.android.com/reference/android/media/AudioManager.html#generateAudioSessionId())文档：

> 音频会话标识符是一组音频流（一个或多个混合在一起）的系统范围的唯一标识符。
> 
> 音频会话 ID 的主要用途是将音频效果与音频播放器相关联，例如 MediaPlayer 或 AudioTrack：共享相同音频会话 ID 的所有音频效果将应用于共享相同音频会话的播放器的混合音频内容。

来自[MediaPlayer.setAudioSessionId](https://developer.android.com/reference/android/media/MediaPlayer.html#setAudioSessionId(int))文档：

> ...如果在创建音频效果时提供了音频会话 ID，则此效果将仅应用于同一音频会话中媒体播放器的音频内容，而不应用于输出混音。创建后，MediaPlayer 实例会自动生成自己的音频会话 ID。但是，可以通过调用此方法强制此播放器成为现有音频会话的一部分。此方法必须在重载的 setDataSource 方法之一之前调用。

要生成新的音频会话 ID：

```
AudioManager audioManager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);
int audioSessionId = audioManager.generateAudioSessionId(); 
```

`AudioManager.generateAudioSessionId()`可以返回`AudioManager.ERROR`。

所以在分配给它之前检查它`MediaPlayer`：

```
if (audioSessionId != AudioManager.ERROR) {
    mediaPlayer.setAudioSessionId(audioSessionId);
} 
```

[还有](https://developer.android.com/reference/android/media/MediaPlayer.html#getAudioSessionId())：

> 请注意，只有在构建 MediaPlayer 时出现问题时，音频会话 ID 才为 0。

# bash - SED 删除除链接外的所有 HTML 标签

> ID：14373542
> 
> 赞同：0
> 
> 时间：2013-01-17T06:47:12.360
> 
> 标签：bash, sed

我想删除所有 html 标签但留下
EG `<a href="http://www.domain.com/">Link Title</a>`

到目前为止，这对我有用，只是它删除了该`</a>`部分。

```
sed -e 's/<[^">]*>//g' 
```

我想知道是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T07:05:21.517

基本上，您所写的内容会删除`<Stuff>`其中`Stuff`没有任何双引号的任何块。例如，如果有一个完全有效的 html 位，例如：

```
<a href='http://www.domain.com/'>Link Title</a> 
```

甚至是一些奇怪的 html，例如：

```
<a href=http://www.domain.com/>Link Title</a> 
```

它对你不起作用。

正则表达式被认为是处理 HTML 的一种非常糟糕的方式，除非您确切知道可以处理的所有变体范围。

所以先读读[这个观点](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)。

我可以提出类似的建议：

```
sed -e 's/<[^a>/!][^ >][^>]*>//g;s/<\/[^a>][^>]*>//g' 
```

# javascript - Javascript将函数分配给onclick

> ID：14373544
> 
> 赞同：0
> 
> 时间：2013-01-17T06:47:20.000
> 
> 标签：javascript, vbscript

```
 Set oNewRow = ProgramTable.insertRow(-1)
 oNewRow.onClick = GetRef("HighLight") 
```

ProgramTable 是一个表 ID，此函数将动态添加一行。

在第二行中，“HighLight”函数在点击时分配给新添加的行。（这一步不执行HighLight功能）

我想在 Javascript 中执行类似的任务。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:51:48.450

```
// oNewRow is the refrence to the newly added row
var oNewRow = ProgramTable.insertRow();

// assign the onclick function to the newly added row
oNewRow.onclick = function(){ GetRef("Highlight") }; 
```

我在考虑你知道插入行和 GetRef 函数内部的逻辑。上面的代码只解释了如何在一行中添加一个 onclick 函数。

# c++ - long type max 等于 int max error + math.h pow() 编译警告：隐式常量转换溢出

> ID：14373546
> 
> 赞同：0
> 
> 时间：2013-01-17T06:47:25.317
> 
> 标签：c++, types, g++, compiler-warnings, math.h

我正在使用 math.h 库，当我运行下面的代码时，我得到 g++ 编译错误，告诉我“警告：隐式常量转换中的溢出”多行。但是，如果我仍然运行可执行文件，它会为我提供合理的数字（尽管出于某种原因，Ints 和 longs 最大值返回相同）。但是如果我使用 cmath 库，所有带符号的数据类型都会给我负值，而无符号的都返回 0....

C++：

```
/* Calculating data type sizes directly */
/* Shorts - 2 bytes = 2*8(bits/byte) = 16 bits */
smallest_short = -(pow(2, 15));
largest_short = pow(2,15);               // LINE 141
us_smallest_short = 0;
us_largest_short = pow(2, 16);             // LINE 143

/* Ints - 4 bytes = 4*8(bits/byte) = 32 bits */
smallest_int = -(pow(2, 31));
largest_int = pow(2, 31);                  // LINE 147
us_smallest_int = 0
us_largest_int = pow(2, 32);                 // LINE 149

/* Long - 8 bytes = 8*8(bits/byte) = 64 bits */
smallest_long = -(pow(2, 63));
largest_long = pow(2, 63);                 // LINE 153
us_smallest_long = 0;
us_largest_long = pow(2, 64);                   // LINE 155 
```

g++ 编译错误：

```
datatypesexp.cpp: In function âint main()â:
datatypesexp.cpp:141: warning: overflow in implicit constant conversion
datatypesexp.cpp:143: warning: overflow in implicit constant conversion
datatypesexp.cpp:147: warning: overflow in implicit constant conversion
datatypesexp.cpp:149: warning: overflow in implicit constant conversion
datatypesexp.cpp:153: warning: overflow in implicit constant conversion
datatypesexp.cpp:155: warning: overflow in implicit constant conversion 
```

我应该坚持使用 math.h 吗？如何解决警告？

此外，如果我使用 math.h 运行 exec，忽略警告，我签名的“最大整数”和最大长整数都返回 2147483647。

虽然无符号，但它们都返回 4294967295。但多头应该返回更大的值......

我该如何补救？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:59:49.657

正值溢出，因为在刻度的那一侧有一个零可以容纳，让你少一个值。例如，`pow(2, 31)`是 2,147,483,648（在赋值之前表示为双精度数），但在这种情况下最大的有符号整数是 2,147,483,647。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:59:54.160

无符号 n 位变量可以容纳的最大值是 2^n-1，而不是 2^n。

# objective-c - 请在此处解决在 Objective C 中保留 NSString 对象的数量

> ID：14373549
> 
> 赞同：-2
> 
> 时间：2013-01-17T06:47:41.973
> 
> 标签：objective-c, memory-management, copy, retaincount

请解决这个问题。

```
NSString *S1 = @"abc";
//retain count of s1 ??

NSString *S2 = [S1 copy];
//retain count of s2 and s1 ??

NSString *S3 = [S2 copy];
//retain count of s3 and s2 ??

NSString *S4 = [S3 retain];
//retain count of s4 and s3 ??

NSString *S1 = @"xyz";
//retain count of s1, s2, s3 and s4 ?? 
```

不建议`retainCount`，因为我相信这并不能给出确切的结果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T17:52:41.560

> 不要建议retainCount，因为我相信这并不能给出确切的结果。

正确的。 `retainCount`没用。www.whentouseretaincount.com

您只能有效地将保留计数作为增量进行推理。

* * *

要回答您的问题，对于该代码，保留计数是一个常数，并且没有任何代码行实际上做任何事情。在该代码的末尾，S2、S3 和 S4 都将具有相同的值；都将指向同一个字符串（显然，S1 将指向不同的字符串）。

这是因为实现细节。您正在使用一个常量字符串。它实际上是一个单例。因此，永远不需要复制字符串（`copy`只是做`return self;`），而保留/释放/自动释放方法绝对什么都不做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T07:06:11.353

*感谢@KurtRevis 的澄清编辑*

当然，假设 ARC 已关闭，您可以自己进行测试。但是你可能不明白为什么你会得到这些结果。这是你应该得到的以及为什么。

```
NSString *S1 = @"abc";
//retain count of s1 ?? 
```

`S1`是一个常量字符串文字，只要您的应用程序正在运行，它就永远不会离开内存。所以保留计数有点无关紧要。

```
NSString *S2 = [S1 copy];
//retain count of s2 and s1 ?? 
```

`S1`不变。 `S2`是`S1`保留计数为 1 的副本，*没有 autorelease*。

```
NSString *S3 = [S2 copy];
//retain count of s3 and s2 ?? 
```

`S2`*在没有 autorelease*的情况下保持 1 不变。 `S3`是`S2`保留计数为 1 的副本，*没有 autorelease*。

```
NSString *S4 = [S3 retain];
//retain count of s4 and s3 ?? 
```

`S4`现在`S3`指向*同一个对象*。并且该对象现在的保留计数为 2，并具有自动释放功能。一旦触发自动释放，它将保留计数为 1，并且不会被释放。

```
NSString *S1 = @"xyz";
//retain count of s1, s2, s3 and s4 ?? 
```

`S1`用于指向的旧对象未更改，它是内存中的持久字符串。现在`S1`指向一个新字符串，该字符串的处理方式与以前`S1`指向的相同。

* * *

或者只是省点麻烦并使用ARC :)

# nlp - 如何在斯坦福 CoreNLP 中获取短语标签？

> ID：14373557
> 
> 赞同：3
> 
> 时间：2013-01-17T06:48:14.287
> 
> 标签：nlp, stanford-nlp, phrase, parse-tree

如果我想获取每个单词对应的短语标签，我该如何获取？

例如 ：

在这句话中，

> 我的狗也喜欢吃香肠。

我可以在斯坦福 NLP 中得到一个解析树，例如

```
(ROOT (S (NP (PRP$ My) (NN dog)) (ADVP (RB also)) (VP (VBZ likes) (NP (JJ eating) (NN sausage))) (. .))) 
```

在上述情况下，我想获得与每个单词对应的短语标签，例如

```
(My - NP), (dog - NP), (also - ADVP), (likes - VP), ... 
```

有什么方法可以简单地提取短语标签吗？

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:47:57.490

```
//I guess this is how you get your parse tree.
Tree tree = sentAnno.get(TreeAnnotation.class);

//The children of a Tree annotation is an array of trees.
Tree[] children = parent.children() 

//Check the label of any sub tree to see whether it is what you want (a phrase)
for (Tree child: children){
   if (child.value().equals("NP")){// set your rule of defining Phrase here
          List<Tree> leaves = child.getLeaves(); //leaves correspond to the tokens
          for (Tree leaf : leaves){ 
            List<Word> words = leaf.yieldWords();
            for (Word word: words)
                System.out.print(String.format("(%s - NP),",word.word()));
          }
   }
} 
```

该代码尚未经过全面测试，但我认为它大致可以满足您的需求。更重要的是我没有写任何关于递归访问子树的文章，但我相信你应该能够做到这一点。

# asp.net-mvc - ASP.Net MVC中的实时视频聊天+录音解决方案

> ID：14373558
> 
> 赞同：9
> 
> 时间：2013-01-17T06:48:16.967
> 
> 标签：asp.net-mvc, silverlight, video-streaming

我想在 ASP.NET MVC 中开发一个应用程序。这是详细的场景-

1.  如果“实时”视频聊天，应用程序应提供便利。不应该有任何延迟（延迟低于 4s 被接受，但由于这将是一次面试，所以完全不能接受超过 4s 的延迟。
2.  应用程序应同时录制视频并将流上传到 Azure Blob，以便稍后对其进行查看。

我面临的问题

1.  我尝试使用 Silverlight，但它捕获视频但不以 mp4 或 wmv 格式保存视频 + 音频。（我尝试使用 SocketCoder 的代码，但它抓取 jpeg 序列，当我也需要音频时，这也无济于事
2.  表达编码器很好，但编码需要很多时间，这会导致延迟，这是不可接受的。

请帮帮我。有没有其他技术可以用来实现这一点？Flex 和 ASP.NET MVC（.Net 框架）的灵活性如何。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T15:53:30.397

我会看看[WebRTC](https://sites.google.com/site/webrtc/home)。网站上写着：

> WebRTC 是一个免费的开放项目，它通过简单的 Javascript API 使 Web 浏览器具有实时通信 (RTC) 功能。WebRTC 组件已经过优化以最好地服务于这个目的。

我从来没有使用过这个，但也许你可以根据你的需要调整项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:25:58.720

您的延迟将取决于您要编码的分辨率（1080p 或其他）以及进行编码的机器的硬件。

FFMpeg 是一个很棒的工具，而且据我所知是最好的免费工具，考虑到功能的数量，这是令人难以置信的，虽然开发起来有点棘手。

您可能想看看这个，您的应用程序的核心可能会挂在本教程之上：

[https://www.virag.si/2012/11/streaming-live-webm-video-with-ffmpeg/](https://www.virag.si/2012/11/streaming-live-webm-video-with-ffmpeg/)

你也知道Skype有一个API

[http://dev.skype.com/desktop-api-reference#Reference](http://dev.skype.com/desktop-api-reference#Reference)

[http://dev.skype.com/skype-uri](http://dev.skype.com/skype-uri)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T18:34:37.693

看看 OpenTok。由于您使用的是 .Net，我可能会推荐我在 NuGet 上可用的库。

[http://www.tokbox.com/opentok/api](http://www.tokbox.com/opentok/api)

[https://github.com/khalidabuhakmeh/OpenTokApi](https://github.com/khalidabuhakmeh/OpenTokApi)

希望这可以帮助。

# ios - UITableViewCell，自定义内容不可见

> ID：14373566
> 
> 赞同：0
> 
> 时间：2013-01-17T06:49:04.537
> 
> 标签：ios, uitableview, invisible

当我将自定义控件添加到 UITableViewCell（通过将 UILabel 拖到情节提要中的表格单元格上）时，内容在运行时是不可见的。当我点击表格行（以选择它）时，内容会出现，但是是白色的。

**项目设置：（**总结：用一个 UITableView 和几行代码创建超极简的故事板项目来创建内容）：

新项目，单视图应用程序，Xcode 4.5.2，使用故事板。这将创建一个针对 iOS 6 的项目。

将表格视图控制器拖到情节提要上，这将创建一个视图、它包含的 UITableView 以及该表格内的默认 UITableViewCell。

将我的表格视图控制器设置为初始场景。

为 UITableViewCell 设置一个重用标识符字符串（在故事板编辑器中）。

创建一个新文件，UITableView 的子类，填写一些*最低限度*的库存数据以获取几行以填充“第 XX 行”数据文本。

运行项目。数据按预期出现，几行数据显示“第 0 行”、“第 1 行”等。**没有问题**。

现在，我将标签拖到故事板中的表格单元格上。我对属性没有任何改变。我留下标签文本只是用黑色字母说“标签”。

参见图片： http: [//www.codexlumen.com/issue/storyboard.png](http://www.codexlumen.com/issue/storyboard.png)

再次运行项目。

**我的期望：**我的表格行现在有“标签”出现在行中，以黑色文本显示。

**我实际看到**的：和以前完全一样。“标签”文本根本不会出现。

**现在，这是有趣的部分：**

仍在运行，我点击表格行以选择它。现在该行以蓝色突出显示，并且“标签”在我放置标签控件的位置*以白色显示。*

参见图片： http: [//www.codexlumen.com/issue/hilight.png](http://www.codexlumen.com/issue/hilight.png)

所以 UILabel 就在那里，它只是没有被绘制在非突出显示的行中......

不知道为什么。

其他一些评论：

*   我没有使用任何类型的自定义表格单元子类。
*   我没有向项目添加任何内容或采取任何上述未提及的步骤。
*   除了设置重用标识符字符串并将 UILabel 拖到单元格上之外，我没有更改情节提要的 UITableView 或 UITableViewCell 对象的属性
*   我尝试在我的 4s 和模拟器上运行（模拟器设置为各种设备/操作系统配置）
*   我尝试更改标签属性（黑色背景、绿色文本等）。没有效果。无论我设置什么属性，视觉行为都是*相同的（尽管如果我放大文本，“标签”会更大）*

这是 100% 的故事板。我没有在代码中创建 UI 对象。代码中对 UI 的唯一引用是填充表格单元格的代码，如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"MyCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    cell.textLabel.text = [NSString stringWithFormat:@"Line %i", indexPath.row];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:10:12.693

我看到了你的问题。您在使用自定义单元格时访问标准`UITableViewCell`（即）的属性。`cell.textLabel`只需杀死第 3 行即可查看差异。我建议您为所需的每个标签创建自己的网点，而不是使用标准网点。

# php - 代码重复表格标题：

> ID：14373570
> 
> 赞同：0
> 
> 时间：2013-01-17T06:49:20.160
> 
> 标签：php, mysql

我有一个将数据库中的数据写入 ms 文档的代码：它工作得很好，但它重复了这样的表格标题： 订阅者姓名 订阅者帐号 S 卡号 解码器号 联系人编号 安装日期 激活日期 计时器 0 。 . 订户姓名 订户帐号 S-卡号 解码器号 联系电话 安装日期 激活日期 Musajhujasasa 903343434342 2013 .. 订户姓名 订户帐户号 S-卡号 解码器编号 联系电话 安装日期 激活日期

但我希望它像这样显示 Subscriber's Name Subscriber's Account No. S-Card No. Decoder No. Contact No Date Installed Activation Date Timer 676737363743 Vc 67676 Dc456 07855625426 2013 。2013 穆萨 7878787878 Vc3454。Dc56 089898892 2013 2013 Musajhujasasa 87u8u78u8u Vc4565 Dc786 089887387 2013 2013 恐惧 S77878787879 Vc 45454 Dc5653 078563536 2013 2013

```
 <?php
   #this connects to my database
   include("db.inc.php"); 
   ?>
       <?php
     $query='SELECT  * 
    from clientinfo';
    $result = mysql_query($query,$con) or die (mysql_error($con));
        $fp = fopen("report.doc", 'w+'); 

    while($record = mysql_fetch_array($result)){
    $firstname = $record['firstname'];
        $refno = $record['refno'];
        $smartcard = $record['smartcard'];
        $decoderno = $record['decoderno'];
        $cell = $record['cell'];
        $date= $record['date'];
     #create word document starts here
    $str ="<table border=\"1\"><tr><td><b>Subscriber's Name</b></td><td>  <b>     Subscriber's      Account No.</b></td> <td><b>S-Card No.</b></td><td><b>Decoder     No.</b>    </td>
    <td><b>Contact No</b></td><td><b>Date Installed</b></td><td><b>Activation Date</b></td>
    </tr>
     </tr><tr><td>$firstname</td><td >$refno</td><td >$smartcard</td><td>$decoderno</td>
    <td>$cell</td><td >$date</td><td >..</td>
    </tr></table>";
       fwrite($fp, $str);  
     }
       fclose($fp);
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:51:15.820

它重复是因为标题在 while 循环内。

```
 <?php
   #this connects to my database
   include("db.inc.php"); 
   ?>
       <?php
     $query='SELECT  * 
    from clientinfo';
    $result = mysql_query($query,$con) or die (mysql_error($con));
        $fp = fopen("report.doc", 'w+'); 

$str ="<table border=\"1\"><tr><td><b>Subscriber's Name</b></td><td>  <b>     Subscriber's      Account No.</b></td> <td><b>S-Card No.</b></td><td><b>Decoder No.</b>    </td>";

while($record = mysql_fetch_array($result)){
    $firstname = $record['firstname'];
        $refno = $record['refno'];
        $smartcard = $record['smartcard'];
        $decoderno = $record['decoderno'];
        $cell = $record['cell'];
        $date= $record['date'];
     #create word document starts here
   $str.="
    <td><b>Contact No</b></td><td><b>Date Installed</b></td><td><b>Activation Date</b></td>
    </tr>
     </tr><tr><td>$firstname</td><td >$refno</td><td >$smartcard</td><td>$decoderno</td>
    <td>$cell</td><td >$date</td><td >..</td>
    </tr></table>";

fwrite($fp, $str);  
     }
       fclose($fp);
    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:02:57.560

你在循环中犯的错误，

```
 $str = "<table border=\"1\"><tr><td><b>Subscriber's Name</b></td><td>  <b>     Subscriber's      Account No.</b></td> <td><b>S-Card No.</b></td><td><b>Decoder     No.</b>    </td>
    <td><b>Contact No</b></td><td><b>Date Installed</b></td><td><b>Activation Date</b></td>
    </tr>
     </tr>";
   fwrite($fp, $str);  
    while($record = mysql_fetch_array($result)){
    $firstname = $record['firstname'];
        $refno = $record['refno'];
        $smartcard = $record['smartcard'];
        $decoderno = $record['decoderno'];
        $cell = $record['cell'];
        $date= $record['date'];
     #create word document starts here
    $str ="<tr><td>$firstname</td><td >$refno</td><td >$smartcard</td><td>$decoderno</td>
    <td>$cell</td><td >$date</td><td >..</td>
    </tr>";
    fwrite($fp, $str);  
     }
      $str = "</table>";
     fwrite($fp, $str);
     fclose($fp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T07:05:05.057

```
 <?php
   #this connects to my database
   include("db.inc.php"); 
   ?>
       <?php
     $query='SELECT  * 
    from clientinfo';
    $result = mysql_query($query,$con) or die (mysql_error($con));
        $fp = fopen("report.doc", 'w+'); 
     if(mysql_num_rows($result))
     {    

    $str ="<table border=\"1\"><tr><td><b>Subscriber's Name</b></td><td>  <b>     Subscriber's      Account No.</b></td> <td><b>S-Card No.</b></td><td><b>Decoder     No.</b>    </td>
    <td><b>Contact No</b></td><td><b>Date Installed</b></td><td><b>Activation Date</b></td></tr>";
    while($record = mysql_fetch_array($result)){
    $firstname = $record['firstname'];
        $refno = $record['refno'];
        $smartcard = $record['smartcard'];
        $decoderno = $record['decoderno'];
        $cell = $record['cell'];
        $date= $record['date'];
     #create word document starts here

     $str .= "<tr><td>$firstname</td><td >$refno</td><td >$smartcard</td><td>$decoderno</td>
    <td>$cell</td><td >$date</td><td >..</td>
    </tr>";

     }
     $str .= "</table>";
      fwrite($fp, $str);  
     }
       fclose($fp);
    ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T07:13:54.393

在您的代码中，您在 while 循环中创建表格和表格标题，因此它会重复。您必须将表格和表格标题的代码放在 while 循环之外。请尝试下面给出的代码。

```
 $str = "<table border=\"1\"><tr><td><b>Subscriber's Name</b></td><td>  <b>     Subscriber's Account No.</b></td> <td><b>S-Card No.</b></td><td><b>Decoder No.</b></td>
<td><b>Contact No</b></td><td><b>Date Installed</b></td><td><b>Activation Date</b></td>
</tr>";

 while($record = mysql_fetch_array($result)){
        $firstname = $record['firstname'];
        $refno = $record['refno'];
        $smartcard = $record['smartcard'];
        $decoderno = $record['decoderno'];
        $cell = $record['cell'];
        $date= $record['date'];

        #create word document starts here
        $str .=  "<tr><td>$firstname</td><td >$refno</td><td >$smartcard</td>  
        <td>$decoderno</td><td>$cell</td><td >$date</td><td >..</td></tr>";

     }
    $str .= "</table>";
    fwrite($fp, $str); 
```

谢谢

# iphone - iOS 应用提交：移除 iPad 支持

> ID：14373578
> 
> 赞同：1
> 
> 时间：2013-01-17T06:49:44.363
> 
> 标签：iphone, ipad

我在 App Store 中推出了一年的 iPhone 应用程序（不支持 iPad 布局的原生支持）。我的客户希望从 iPad 的 App Store 中删除该应用程序。

我知道它需要更新应用程序，但是如何更改我的 plist 以反映更改？

苹果允许这样的改变吗？正如我之前尝试过的，如果我添加硬件功能要求，它将无法通过 App Approval 流程。

**更新**：更准确地说，我的客户希望删除对那些没有消息（SMS）功能的设备的支持

**更新**：需要支持 iOS 4.3+（计划仅支持 iPhone 3GS、iPhone 4/4S、iPhone 5）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T03:33:44.880

最后的答案是：

一旦您在 App 提交中添加了 iPad 支持，就无法删除它。

您必须通过检查在应用程序启动期间阻止 iPad 中的访问`UIDevice.currentDevice.userInterfaceIdiom == UIUserInterfaceIdiomPad`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:57:56.383

每台 iPad 都支持 iOS5 消息，甚至是第一代 iPad。自 3GS 以来的每一部 iPhone 也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T08:17:42.747

唯一的方法是添加一些iPad 没有的**必需设备功能。**例如，如果您将**电话**或**短信**添加到**所需设备功能**，Apple 将自动使该应用程序仅适用于 iPhone。

有关更多设备功能，请参阅[https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html](https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)

我希望它有所帮助。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-17T06:58:42.990

您必须重新提交申请。如果您想从您的应用程序中删除 iPad 支持，请按照以下简单步骤操作：

1.  打开 Xcode
2.  单击您的项目名称（在您的左侧边栏上）
3.  点击目标
4.  将 iPhone 设置为设备

老实说，几年前，我从我的应用程序中删除了对 iPad 的支持，Apple 已经批准了我的更改。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-01-17T08:34:54.987

只需更改您的目标。将其设置为 iphone 设备

或者您可以像这样删除 ipad 支持：

```
-(BOOL) application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
     if (UIDevice.currentDevice.userInterfaceIdiom == UIUserInterfaceIdiomPad)
          return NO;

     return YES;
} 
```

# hbase - 在同一列限定符上应用多个过滤器

> ID：14373581
> 
> 赞同：2
> 
> 时间：2013-01-17T06:49:50.393
> 
> 标签：hbase, qualifiers

在我的项目中，我有一个条件，我必须`SingleColumnValue`在同一列限定符上应用两个过滤器。这两个过滤器用于检查列限定符是否包含值“A”或值“B”。但是，过滤器似乎不起作用。

```
FilterList filterList = new FilterList(Operator.MUST_PASS_ONE);

SingleColumnValueFilter filter2 = new SingleColumnValueFilter(Bytes.toBytes("data"),               Bytes.toBytes("type"),CompareOp.EQUAL,Bytes.toBytes("A"));
filter2.setFilterIfMissing(true);
filterList.addFilter(filter2);

SingleColumnValueFilter filter1 = new SingleColumnValueFilter(Bytes.toBytes("data"), Bytes.toBytes("type"), CompareOp.EQUAL,  Bytes.toBytes("B"));    filter1.setFilterIfMissing(true);
filterList.addFilter(filter1); 
```

这样做有什么错误吗？这可能吗，在同一个限定符上应用两个过滤器？是否有任何替代解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T06:52:01.720

解决上述问题的一个好方法是使用 RegexStringComparator。

创建具有所需匹配项的 RegexStringComparator 并将其与 SingleColumnValueFilter 一起使用。

# mysql - 如何为mysql中的特定表自动递增2

> ID：14373582
> 
> 赞同：4
> 
> 时间：2013-01-17T06:49:51.440
> 
> 标签：mysql

我有 2 个表 order_retailer 和 order_customer

他们都有自动递增的主键 order_id

为了在整个系统中保持订单 ID 唯一，我希望 order_retailer 的 ID 仅为偶数，而 order_customer 的 ID 为奇数。为此，我必须将自动增量的增量值设置为 2。是否可以在 mysql 中按表格方式设置它。

我不想要一个 php 解决方案。请让我知道是否有命令/查询将特定表的自动增量移位设置为 2。此外，我不想更改服务器变量 auto_increment_increment 或 auto_increment_offset 或任何其他服务器变量

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T07:06:15.193

您可以从另一个表中偏移一个表的自动增量字段，即一个表从 1 开始 ids，而另一个从 1000000 开始（或根据您的使用模式选择的其他值）。

```
CREATE TABLE table1 (id BIGINT UNSIGNED AUTO_INCREMENT);
CREATE TABLE table2 (id BIGINT UNSIGNED AUTO_INCREMENT) AUTO_INCREMENT = 1000000; 
```

您还可以根据需要选择自动增量列类型。BIGINT UNSIGNED 的范围是 0..18446744073709551615，应该涵盖大多数情况。

**或者**

尝试

```
SET @@auto_increment_increment=2;
SET @@auto_increment_offset=2; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-17T07:07:58.200

不，不可能明智地设置它。

Mysql 有 2 个变量`auto_increment_increment`，`auto_increment_offset` 默认情况下这两个变量的值都是 1。如果您更改任何值，它将产生全局影响。

为了解决您的问题，创建一个存储过程，该过程将根据需要具有均匀的 id。

请参阅此链接[http://dev.mysql.com/doc/refman/5.0/en/replication-options-master.html#sysvar_auto_increment_increment](http://dev.mysql.com/doc/refman/5.0/en/replication-options-master.html#sysvar_auto_increment_increment)

希望这可以帮助

# sql-server-2008 - 在选择命令中添加依赖于行数据的新行？

> ID：14373586
> 
> 赞同：1
> 
> 时间：2013-01-17T06:50:17.867
> 
> 标签：sql-server-2008, tsql

我的任务是：我有一个名为 Results(codeCompetition, Contestant, place) 的表。我需要进行选择以显示：参赛者，nr_points 其中 nr_points = 10 如果参赛者的位置是 1，nr_points = 8 为第二名，nr_points = 5 为第三名。

```
go
create view Loc1 as
select Rezultate.sportiv, sum(10) as puncte from Rezultate
where loc_ocupat = '1'
group by sportiv
go

go
create view Loc2 as
select Rezultate.sportiv, sum(8) as puncte from Rezultate
where loc_ocupat = '2'
group by sportiv
go

go
create view Loc3 as
select Rezultate.sportiv, sum(5) as puncte from Rezultate
where loc_ocupat = '3'
group by sportiv
go

-- create view
go
create view total_result as
select * from Loc1 union select * from Loc2 union select * from Loc3
go

-- sum of all the points from every competition that a contestant participated
select total_result.sportiv, SUM(total_result.puncte) as total_puncte from total_result
group by total_result.sportiv 
```

现在这段代码可以正常工作，但我不确定这是最简单的答案。T-SQL 中是否有多种选择的条件？（不创建新表、列）

我正在寻找类似的东西：

```
if(place == 1)    
  add(10_points)
if(place == 2)
  add(8_points)
.............. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:03:32.657

您可以使用[CASE](http://msdn.microsoft.com/en-us/library/ms181765.aspx)语句并使用以下一个 sql 查询：

```
select sportiv, 
SUM( CASE WHEN loc_ocupat = '1' THEN 10
          WHEN loc_ocupat = '2' THEN 8
          WHEN loc_ocupat = '3' THEN 5
     END
) as total_puncte 
from Rezultate
group by sportiv 
```

# android - 如果从 pushwoosh 收到推送，如何保存数据

> ID：14373594
> 
> 赞同：3
> 
> 时间：2013-01-17T06:50:39.920
> 
> 标签：android

您好我想显示一个推送通知的弹出窗口并将消息数据保存到本地数据库中。我已经集成了 Pushwoosh jar。我的代码是

```
onCreate : if(!prefrences.getString("push", "").equalsIgnoreCase(""))
                {
                    Log.w("already registered", "already registered");
                    Log.e("Token", prefrences.getString("push", ""));
                }
            else
                { 
                //*** Registers For Push Woosh Notifications*//*
                    PushGCMIntentService p=new PushGCMIntentService();
                    PushManager push=new PushManager(this, APP_ID, SENDER_ID);
                    push.onStartup(this);
                    checkMessage(getIntent());
                }
@Override
protected void onNewIntent(Intent intent)
    {
        super.onNewIntent(intent);
        Log.e("ON NEW INTENT", "called");
        setIntent(intent);
        checkMessage(intent);
        setIntent(new Intent());
    }
private void checkMessage(Intent intent) 
    {

        if (null != intent)
            {
                if (intent.hasExtra(PushManager.PUSH_RECEIVE_EVENT))
                    {

                        Log.e("push message is " ,  intent.getExtras().getString(PushManager.PUSH_RECEIVE_EVENT));

                    }
                else if (intent.hasExtra(PushManager.REGISTER_EVENT))
                    {
                        Log.e("register",""+PushManager.REGISTER_EVENT);

                        //Toast.makeText(getApplicationContext(), ""+intent.getExtras().getString(PushManager.REGISTER_EVENT), Toast.LENGTH_SHORT).show();
                         s=intent.getExtras().getString(PushManager.REGISTER_EVENT);
                        Log.e("push message" ,  intent.getExtras().getString(PushManager.REGISTER_EVENT));
                        SharedPreferences pref =getSharedPreferences("Push",MODE_PRIVATE);
                        Editor edit=pref.edit();
                        edit.putString("push", s);
                        edit.commit();
                        Log.e("push token - - - >" , pref.getString("push", "Novalue"));

                    }
                else if (intent.hasExtra(PushManager.UNREGISTER_EVENT))
                    {
                        Log.e("unregister","-------");

                    }
                else if (intent.hasExtra(PushManager.REGISTER_ERROR_EVENT))
                    {
                        Log.e("register error","----------");
                    }
                else if (intent.hasExtra(PushManager.UNREGISTER_ERROR_EVENT))
                    {
                        Log.e("unregister error","-----------");
                        //  Toast.makeText(getApplicationContext(), "DFGDHDSHshsh", Toast.LENGTH_LONG).show();
                    }
                resetIntentValues();
            }

    private void resetIntentValues()
{
    Intent mainAppIntent = getIntent();

    if (mainAppIntent.hasExtra(PushManager.PUSH_RECEIVE_EVENT))
    {
        mainAppIntent.putExtra(PushManager.PUSH_RECEIVE_EVENT, (String) null);
    }
    else if (mainAppIntent.hasExtra(PushManager.REGISTER_EVENT))
    {
        mainAppIntent.putExtra(PushManager.REGISTER_EVENT, (String) null);
    }
    else if (mainAppIntent.hasExtra(PushManager.UNREGISTER_EVENT))
    {
        mainAppIntent.putExtra(PushManager.UNREGISTER_EVENT, (String) null);
    }
    else if (mainAppIntent.hasExtra(PushManager.REGISTER_ERROR_EVENT))
    {
        mainAppIntent.putExtra(PushManager.REGISTER_ERROR_EVENT, (String) null);
    }
    else if (mainAppIntent.hasExtra(PushManager.UNREGISTER_ERROR_EVENT))
    {
        mainAppIntent.putExtra(PushManager.UNREGISTER_ERROR_EVENT, (String) null);
    }

    setIntent(mainAppIntent);
} 
```

Asa 我收到一条消息，然后必须触发“（intent.hasExtra（PushManager.PUSH_RECEIVE_EVENT））”，这样我才能弹出消息，但直到我单击通知栏中的通知才会发生。此外，如果一条消息包含一个 url，那么即使我单击通知栏中的通知，它也不会被触发。我的清单文件如下：

```
 <activity android:name=".SplashScreen"
            android:launchMode="singleTop"
            android:noHistory="true"
            android:screenOrientation="portrait"
            android:windowSoftInputMode="adjustPan|adjustResize" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <intent-filter>
                <action android:name="My_APP_PACAKGE_NAME.MESSAGE" />
<category android:name="android.intent.category.DEFAULT" />
            </intent-filter></activity>
<activity android:name="com.arellomobile.android.push.PushWebview" />
<activity android:name="com.arellomobile.android.push.MessageActivity" />
<activity android:name="com.arellomobile.android.push.PushHandlerActivity" />
<receiver android:name="com.google.android.gcm.GCMBroadcastReceiver"
          android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
<action android:name="com.google.android.c2dm.intent.REGISTRATION" />
<category android:name=" My_APP_PACAKGE_NAME " />
            </intent-filter>
        </receiver>
<service android:name="com.arellomobile.android.push.PushGCMIntentService" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
<permission
        android:name=" My_APP_PACAKGE_NAME.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />
<uses-permission android:name=" My_APP_PACAKGE_NAME.permission.C2D_MESSAGE" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" /> 
```

请帮忙。提前谢谢。

# wordpress - MediaElementJS setCurrentTime 仅在 chrome 中不起作用

> ID：14373596
> 
> 赞同：0
> 
> 时间：2013-01-17T06:50:46.090
> 
> 标签：wordpress, html5-video, mediaelement.js

我已经阅读了很多关于它的主题，但似乎没有任何问题可以解决我的问题。我已经安装了 mediaelementjs wordpress 插件，然后在我的页面上使用 [video] 短代码。我将视频设置为自动播放。现在我们已经通过链接在视频上放置了一些锚点，当用户点击这些链接时，视频支持跳转到那些时间。为此，我使用以下代码。

```
function SwitchEncore(me,hour, minute, second) {
//make a video timeshift.
jQuery('#tabHeading ul li').removeClass('selectedTab');
jQuery(me).addClass('selectedTab');

var myplayer = jQuery("#wp_mep_1");//.mediaelementplayer();
var thisplayer = myplayer[0];
var time =  (hour*60*60 ) + (minute*60) + (second*1);

thisplayer.player.pause();
thisplayer.player.setCurrentTime(time);
thisplayer.player.play();

} 
```

此代码适用于 Firefox 和 IE，但不适用于 Chrome。知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:31:04.100

你试过在玩之前运行 load() 吗？我发现这可以解决我遇到的一些问题

# ruby-on-rails - 如何打开已经创建的 Rails 应用程序？

> ID：14373600
> 
> 赞同：-5
> 
> 时间：2013-01-17T06:50:53.727
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

如何打开已经创建的 Rails 应用程序？您显然不会使用“rails new ...”，那么您将使用什么。我来自 C++ 背景，期待学习 Ruby on Rails。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:34:46.133

正如@prakash 所说，如果你想启动一个rails 应用程序，命令是

```
rails start 
```

然后将您的浏览器指向`http://localhost:3000`

以下是一些很好的资源供您开始

[使用 Rails 进行敏捷开发](http://pragprog.com/book/rails4/agile-web-development-with-rails)

[轨道广播](http://railscasts.com/)

[导轨导轨](http://guides.rubyonrails.org/getting_started.html)

欢迎来到 Rails :D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:36:10.530

请按照以下步骤操作：

1.  使用命令提示符控制台并导航到存储项目的文件夹，例如：`cd C:\My_ruby_programs\my_project`

2.  转到此文件夹并`my_project`使用以下命令在 INSIDE 内运行本地服务器以获取应用程序：`rails s`

3.  打开浏览器并输入`localhost:3000`. 3000 是使用 rails 时的默认端口

4.  就这些。如果要退出本地主机，请在命令 promt concole 中按此`CTRL +C`取消连接。

# c# - 从列表添加到数组

> ID：14373602
> 
> 赞同：-1
> 
> 时间：2013-01-17T06:50:55.187
> 
> 标签：c#, list

如何添加到

```
GroupAtributes = new GroupAttribute[]
{
    new GroupAttribute { value = groupName },
    new GroupAttribute { value = groupName },
    new GroupAttribute { value = groupName }
}; 
```

从`List<string> groupNames`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T06:58:22.927

通常，您不能添加到数组中。该数组被分配以容纳三个项目。如果要添加更多项目，则必须调整数组大小以容纳更多项目。查看[Array.Resize](http://msdn.microsoft.com/en-us/library/bb348051.aspx)了解更多信息。

但是为什么不直接用 a 替换那个数组`List<GroupAttributes>`呢？您可以将其构建为一个列表，然后如果您真的需要一个数组，您可以调用`ToArray`该列表。

这是做你想做的吗？

```
List<GroupAttribute> attrList = new List<GroupAttributes>();
// here, put a bunch of items into the list
// now, create an array from the list.
GroupAttribute[] attrArray = attrList.ToArray(); 
```

最后一条语句从列表中创建一个数组。

**编辑：**在我看来，也许你想要这样的东西：

```
var GroupAttributes = (from name in groupNames
                       select new GroupAttribute{value = name}).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:02:33.240

我会尝试使`ToArray`列表的方法起作用，或者您可以使用更经典的方法，例如（我没有尝试编译，因此可能需要调整）

```
GroupAtributes[] myArray = new GroupAttribute[groupNames.Count]

int i=0; 
foreach(var name in groupNames)
{
    myArray[i++] = new GroupAttribute { value = name };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T07:02:38.657

数组不是为“添加”而设计的，但如果您不希望列表过度分配内存（通常这是以牺牲速度为代价），它就有它的用途。

```
 public void Add<T>(ref T[] ar, List<T> list)
    {
        int oldlen = ar.Length;
        Array.Resize<T>(ref ar, oldlen + list.Count);
        for (int i = 0; i < list.Count; ++i)
        {
            ar[oldlen + i] = list[i];
        }
    } 
```

然后只需调用 Add(ref attrs, myAttrsList);

# c - 为什么 PsGetCurrentProcessId() 返回 null？

> ID：14373608
> 
> 赞同：2
> 
> 时间：2013-01-17T06:51:08.183
> 
> 标签：c, windows, kernel, windbg, pid

我遇到了一个奇怪的问题：

在“系统”进程的线程中，我调用`PsGetCurrentProcessId()`了 ，但得到了一个空值。

此外，我检查了线程的_CLIENT_ID，发现UniqueProcess 和UniqueThread 都为空。

我还检查了当前进程，即“系统”进程，发现它的UniqueProcessId 为4，这是正常的。

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-27T19:54:10.797

系统进程 ID 是一个非常好的“hack”，因此多个工具（例如 ProcExp、windbg）不必针对特殊情况的内核线程或空闲函数调度程序。

如果您是仅内核线程，则没有关联的进程（除非您攻击自己）。

# jquery - 如何在 jQuery 单击事件上调用服务器端函数

> ID：14373611
> 
> 赞同：0
> 
> 时间：2013-01-17T06:51:18.357
> 
> 标签：jquery, asp.net

我是 ASP.NET 的新手。我希望在客户端单击时调用服务器端事件/功能，而不刷新页面。我尝试了 ajax、__dopostback 等...但失败得很惨..可能是因为我对 ASP 的了解较少

任何人都可以帮我吗

$.ajax({

```
 type:"POST",
                               url:"projects.aspx/slides",
                               data: "{'value':''}",
                              contentType:"application/json;charset=utf-8",
                               dataType:"json",

                              //cache:false,
                               success:function(data){
                                   alert("OK");
                                  alert(data.d);
                               },
                               error:function(XMLHttpRequest,textStatus,errorThrown)
                               {
                                   alert(textStatus);
                               }

                           }); 
```

这是我的ajax代码..这有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:56:07.693

ASP.NET 运行服务器端。所以它不能调用服务器方法。您可以使用 AJAX 来获取数据，或者制作一个 REST Web 服务来操作您可以从 javascript 调用的服务器。可能值得研究的一件事是 SignalR。它非常易于使用，并且在服务器和完全为您设置的所有客户端之间进行持续对话。

我真的不能帮助你更多，因为你还没有真正问过问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:01:18.733

为什么不尝试在单独的 asp 页面中添加这些功能，然后如果您需要在当前 asp 页面中加载这些 html 响应，您可以尝试

```
$('.btn').bind('click',function(){

        $('.div_in_which_to_load_response').load('./webservices/your_functionality_page.asp'{"data1": dummy1});
                return false;  

            }); 
```

# c++ - 使用 C++11 时出现错误“错误：杂散字符”

> ID：14373612
> 
> 赞同：2
> 
> 时间：2013-01-17T06:51:25.307
> 
> 标签：c++, boost, c++11, g++, boost-thread

当我尝试在我的机器上编译以下简单的 C++11 代码时遇到了一个奇怪的问题：

```
#include <boost/thread/thread.hpp> 
```

它编译得很好，`g++ foo.cpp -o foo but chokes on g++ -c -std=c++11 foo.cpp -o foo`但出现以下错误：

```
In file included from /usr/local/lib/gcc/x86_64-apple-darwin11.4.0/4.7.1/../../../../include/c++/4.7.1/functional:56:0,
             from /usr/local/lib/gcc/x86_64-apple-darwin11.4.0/4.7.1/../../../../include/c++/4.7.1/memory:81,
             from /usr/local/include/boost/config/no_tr1/memory.hpp:21,
             from /usr/local/include/boost/smart_ptr/shared_ptr.hpp:27,
             from /usr/local/include/boost/shared_ptr.hpp:17,
             from /usr/local/include/boost/thread/pthread/thread_data.hpp:10,
             from /usr/local/include/boost/thread/thread.hpp:17,
             from foo.cpp:1:
./tuple:1:1: error: stray ‘\317’ in program
./tuple:1:1: error: stray ‘\372’ in program
./tuple:1:1: error: stray ‘\355’ in program
./tuple:1:1: error: stray ‘\376’ in program
... Additional lines omitted 
```

我不知所措。特别是因为我已经能够针对 C++11 编译其他程序而没有任何问题。有任何想法吗？

我正在运行[OS X v10.7.4](https://en.wikipedia.org/wiki/Mac_OS_X_Lion) (Lion) 和 GCC 4.7.1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T15:24:24.697

那是因为您在当前目录中有一个名为的文件，`tuple`而不是标准`tuple`头文件。可能是因为`-I.`编译行中的一些。

错误消息中的杂散字符只是文件的第一个字节，不在允许的字符集中，以八进制表示。

# python - Python/Pyramid：这个功能会让用户上传文件然后解析它们吗？

> ID：14373614
> 
> 赞同：0
> 
> 时间：2013-01-17T06:51:42.770
> 
> 标签：python, file-upload, pyramid

现在我有这个表格：

```
<form action="/store_stl_data" method="post" accept-charset="utf-8"
      enctype="multipart/form-data">

    <label for="stl">STL</label>
    <input id="stl" name="stl" type="file" value="" />

    <input type="submit" value="submit" />
</form> 
```

然后在我的`views.py`我有

```
@view_config(route_name='store_stl_data', renderer='templates/edit')

def store_stl_data(request):
    input_file=request.POST['stl'].file
    i1, i2 = itertools.tee(input_file)
    vertices = [map(float, line.split()[1:4])
                for line in i1
                if line.lstrip().startswith('vertex')]

    normals = [map(float, line.split()[2:5])
                for line in i2
                if line.lstrip().startswith('facet')]

        ...(parsing data)...
    return data 
```

下面的三行`def store_stl_data(request):`是我最不确定的。我从[本教程](http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/forms/file_uploads.html)中得到了它们。

我想要这样当人们上传文件时，整个`store_stl_data`函数运行并处理输入文件。

现在它给了我一个错误：

```
KeyError: "No key 'stl': Not a form request" 
```

这也是我的路线，在`__init__.py`：

```
from pyramid.config import Configurator
from sqlalchemy import engine_from_config

from .models import (
    DBSession,
    Base,
    )

def main(global_config, **settings):
    """ This function returns a Pyramid WSGI application.
    """
    engine = engine_from_config(settings, 'sqlalchemy.')
    DBSession.configure(bind=engine)
    Base.metadata.bind = engine
    config = Configurator(settings=settings)
    config.add_static_view('static', 'static', cache_max_age=3600)
    config.add_route('view_wiki', '/')
    config.add_route('view_page', '/{pagename}')
    config.add_route('add_page', '/add_page/{pagename}')
    config.add_route('edit_page', '/{pagename}/edit_page')
    config.scan()
    return config.make_wsgi_app() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:11:55.783

`.file`您从请求中获得的对象已经是一个打开的文件（类似）对象。

如果您仔细查看链接到的文档中的示例，它会使用上传的文件名创建一个*新*文件，并使用上传的文件将数据写入该新文件。`input_file`永远不会在该代码中打开，*只有`output_file`*是（注意那里的不同变量名称）。

您也不需要关闭文件对象，因此`with`不需要。您的代码可以简化为：

```
def store_stl_data(request):
    input_file=request.POST['stl'].file
    i1, i2 = itertools.tee(input_file)
    vertices = [map(float, line.split()[1:4])
                for line in i1
                if line.lstrip().startswith('vertex')]

    normals = [map(float, line.split()[2:5])
                for line in i2
                if line.lstrip().startswith('facet')] 
```

不过，我个人不会*为此*使用，您在构建顶点时`itertools.tee`将整个文件读入缓冲区。`tee`

相反，我会使用一个循环：

```
def store_stl_data(request):
    input_file=request.POST['stl'].file
    vertices, normals = [], []
    for line in input_file
        parts = line.split()
        if parts[0] == 'vertex':
            vertices.append(map(float, parts[1:4]))
        elif parts[0] == 'facet':
            normals.append(map(float, parts[2:5])) 
```

现在一次只在内存中保存一行（加上顶点和法线结构）。

*注意*：如果您收到`KeyError: No key '...': Not a form request`错误消息，则视图没有*收到*HTTP`POST`请求。请仔细检查您的表单方法设置为`"POST"`（大小写无关紧要）。

# javascript - 没有指示 jquery ajax 调用完成

> ID：14373619
> 
> 赞同：0
> 
> 时间：2013-01-17T06:52:12.060
> 
> 标签：javascript, jquery

我有以下ajax调用

```
function update_ledger_amount(id) {
    $.ajax({
        type: "POST",
        url: "/ledgeritems/UpdateAmount",
        data: "Id=" + id + "&Amount=" + $('#ledger_edit_amount_input_' + id).val(),
        success: function (str) {
            var result = str.split('|');
            alert(str);
            if (result[0] == 'success') {
                set_display_message('Item updated', 'success');
                load_ledger_month($('#BankAccountId').val(), $('#StartDate').val());
            }
            else {
                alert('bad');
                set_display_message(result[1], 'error');
            }
        },
        error: function (request, status, error) {
            alert(error);
        }
    });
} 
```

我遇到的问题是我没有收到有关成功或错误的警报。通过萤火虫观察流量，我可以看到响应很简单

```
success 
```

我相信问题可能与响应的内容类型有关，它显示为 text/javascript。我在想也许我需要做一些不同的事情来处理那种内容类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:59:48.030

在您的成功处理程序中放置一个 try catch 块。我想它在这条线上失败了

ar 结果 = str.split('|');

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:01:47.537

用作`dataType`json 并将响应作为 json 在您的控制器（php）中发送。您可以通过...`echo json_encode(array('success'=>'success'))`

**查询**

```
$.ajax({
    type: "POST",
    url: "/ledgeritems/UpdateAmount",
    data: "Id=" + id + "&Amount=" + $('#ledger_edit_amount_input_' + id).val(),
    dataType:'json',
    success: function (str) {
        alert(str.success);  //in mycase.. you can do your stuff here
        /*var result = str.split('|');
        alert(str);
        if (result[0] == 'success') {
            set_display_message('Item updated', 'success');
            load_ledger_month($('#BankAccountId').val(), $('#StartDate').val());
        }
        else {
            alert('bad');
            set_display_message(result[1], 'error');
        }*/
    },
    error: function (request, status, error) {
        alert(error);
    }
}); 
```

**PHP**

```
.....
echo json_encode(array('success'=>'success')); 
```

这会以 json 的形式发送成功，您可以`success`通过`ajax`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T07:06:33.557

您正在执行 POST ajax 而不是 GET。ajax 的数据部分应采用以下形式：

```
data: { name: "John", location: "Boston" } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T07:08:28.247

删除线

```
type = "POST", 
```

因为您想将参数附加到您的请求的 url。

从 jQuery 1.8 开始，不推荐使用 success、error 和 complete，而是使用 done、fail 和 allways。 [http://api.jquery.com/jQuery.ajax/#jqXHR](http://api.jquery.com/jQuery.ajax/#jqXHR)

POST 的语法如下：

```
data = {id:"something", Amount:"someval"}; 
```

# zurb-foundation - ZURB-Foundation自定义输入很慢

> ID：14373621
> 
> 赞同：1
> 
> 时间：2013-01-17T06:52:15.593
> 
> 标签：zurb-foundation

我试过使用 ZURB 基金会的自定义下拉菜单。It works when the number of options is small, but when I try to fit 250 countries in the list it freezes for multiple seconds when you choose an option.

我唯一的选择是使用标准选择输入吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:20:16.390

Foundation 的 refreshCustomSelect() 函数非常慢。作为一种解决方法，在创建自定义选择后，您可以使用以下代码：

```
$('#country').attr('data-customforms', 'disabled'); 
```

# visual-studio-2010 - 部署包中损坏的非 ASCII 文件名

> ID：14373622
> 
> 赞同：0
> 
> 时间：2013-01-17T06:52:17.377
> 
> 标签：visual-studio-2010, msdeploy

我使用“构建部署包”部署我的 VS2010 MVC3 项目。问题是一些文件的文件名中有国家（瑞典）字符 ÅÄÖ，而部署包将这些文件名弄错了。

例如，“Köpvillkor.pdf”变为“K+Âpvillkor.pdf”。该文件在解压缩的“PackageTmp”文件夹中具有正确的名称，但在“<projname>-<version>.zip”文件中，文件名被破坏，因此问题似乎在于压缩包的方式，即它从文件系统中获取一个 UTF-8 编码的文件名，但将其存储为 ASCII 或 WIN1252 或 zip 中的一些类似文件而不进行转换。

有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T20:12:57.383

如果您使用 IIS 导入部署包 zip 文件，文件名将被转换回正确的编码。

不幸的是，Winzip、7-zip 甚至 Windows Explorer Zip 扩展都不理解文件名编码，手动部署是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T11:30:39.600

我今天发现你可以取消选中“将部署包创建为 zip 文件”，然后手动压缩它。我使用 WinZip 手动压缩它，并且正确保留了非 ASCII 字符。

# javascript - 关闭当前标签

> ID：14373625
> 
> 赞同：34
> 
> 时间：2013-01-17T06:52:38.247
> 
> 标签：javascript, html, cross-browser

我的网页上有一个关闭链接。单击它时，我想使用它来关闭当前选项卡。我已经写了

```
<a href="#" onclick = "javascript:self.close();">close</a> 
```

上面的代码似乎在 Internet Explorer 中运行良好。但它不适用于 Mozilla Firefox 和 Google Chrome。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-17T06:56:59.727

您只能关闭自己创建的窗口/选项卡。也就是说，您不能以编程方式关闭用户创建的窗口/选项卡。

例如，如果您创建一个窗口，`window.open()`您可以使用 关闭它`window.close()`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-11-16T02:47:33.500

从 Chrome 46 开始，一个简单`onclick=window.close()`的方法就可以解决问题。如果打开了多个选项卡，这只会关闭选项卡，而不是整个浏览器。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-10-24T10:54:15.713

您可以使用以下 JavaScript。

```
window.open('','_self').close(); 
```

在 HTML 中，您可以使用以下代码

```
<a href="javascript:close_window();">close</a> 
```

我已经在 Chrome 61 和 IE11 中尝试过它工作正常。但这不适用于 Firefox 57。在 Firefox 中，我们只能关闭使用以下命令打开的窗口。

```
window.open() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-27T01:39:20.607

[从http://www.yournewdesigner.com/css-experiments/javascript-window-close-firefox.html](http://www.yournewdesigner.com/css-experiments/javascript-window-close-firefox.html)找到了适用于 Chrome 66 的单线器

> TLDR：诱使浏览器相信 JavaScirpt 打开了当前选项卡/窗口

```
window.open('', '_parent', '').close(); 
```

所以为了完整性

```
<input type="button" name="close" value="close" onclick="window.close();"> 
```

尽管还需要注意的是，读者可能希望将其放入一个功能中，以识别哪些浏览器需要这种技巧，因为 Firefox 59 不适用于上述功能。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-09-03T13:45:00.477

试试这个：

```
<script>
    var myWindow = window.open("ANYURL", "MyWindowName", "width=700,height=700");
    this.window.close();
</script> 
```

在某些情况下，这在 Google Chrome 50 中对我有用。不过，当放在 javascript 函数中时，它似乎不起作用。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-05-11T16:12:33.490

用这个：

```
window.open('', '_self'); 
```

这仅适用于 chrome；这是一个错误。它将在将来修复，因此请记住这一点，使用这个 hacky 解决方案。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2015-07-01T13:50:38.997

试试这个：

```
window.open('', '_self').close(); 
```

# performance - []byte(string) 有多贵？

> ID：14373634
> 
> 赞同：24
> 
> 时间：2013-01-17T06:53:32.740
> 
> 标签：performance, go, type-conversion

让我们转换`string`为`[]byte`：

```
func toBytes(s string) []byte {
  return []byte(s) // What happens here?
} 
```

这种铸造手术有多贵？是否执行复制？据我在 Go 规范中看到的：*字符串表现得像字节切片但不可变*，这至少应该涉及复制以确保后续切片操作不会修改我们的字符串`s`。反向对话会发生什么？对话是否`[]byte <-> string`涉及编码/解码，例如 utf8 <-> 符文？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-17T06:59:38.440

`[]byte(s)`不是强制转换而是[转换](http://golang.org/ref/spec#Conversions)。一些转换与强制转换相同，例如`uint(myIntvar)`，它只是重新解释到位的*位*。不幸的是，字符串到字节切片转换的情况并非如此。字节切片是可变的，字符串（准确地说是字符串值）不是。结果是正在制作的字符串的必要副本（内存分配+内容传输）。所以是的，在某些情况下它可能会很昂贵。

编辑：不执行编码转换。字符串（源）字节按原样复制到切片（目标）字节。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-17T12:57:56.373

转换复制字节，但它也为堆上的 []byte 分配空间。在将字符串反复转换为 []byte 的情况下，您可以通过重用 []byte 和使用 copy 命令来节省内存管理时间。（参见[http://golang.org/ref/spec#Appending_and_copying_slices](http://golang.org/ref/spec#Appending_and_copying_slices)以及关于使用字符串作为源的特殊情况。）

在转换和复制命令的两种情况下，复制本身都是一个直接字节的复制，它应该运行得非常快。我希望编译器能够生成某种 CPU 有效执行的重复移动指令。

反向转换，从字节切片中生成字符串，肯定涉及在堆上分配字符串。不变性属性迫使这一点。有时您可以通过使用 []byte 做尽可能多的工作然后在最后创建一个字符串来进行优化。bytes.Buffer 类型通常很有用。

现在追逐红鲱鱼，编码和 UTF-8 都不是问题。字符串和 []byte 都可以保存任意数据。副本不查看数据，它只是复制它。在说诸如字符串*旨在*包含 UTF-8 或*鼓励*使用 UTF-8 之类的内容时，请仔细选择单词。更准确的做法是简单地注意某些语言特性，例如 for 语句的范围子句，将字符串*解释*为 UTF-8。只需了解将字符串解释为 UTF-8 和不解释的内容。字符串中有非 UTF-8 并且需要按字节进行范围？没问题，只是不要使用范围子句。

```
s := "string"
for i := 0; i < len(s); i++ {
    b := s[i]
    // work with b
} 
```

这是惯用的 Go。它没有气馁，也没有违反任何意图。它只是逐字节迭代字符串，这有时正是您想要做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-02T05:28:29.100

作为对上述答案的补充，在最新的[go 语言规范](https://go.dev/ref/spec#Conversions)中，与数值类型之间的类型转换的特殊规则`string`声明如下：

> 特定规则适用于数字类型之间或字符串类型之间的（非常量）转换。这些转换可能会改变 x 的表示并产生运行时成本。所有其他转换仅更改类型，但不更改 x 的表示。

# asp.net - 在 ASP.NET 中对齐单选按钮列表？

> ID：14373635
> 
> 赞同：-2
> 
> 时间：2013-01-17T06:53:39.277
> 
> 标签：asp.net, vb.net, .net-3.5, radiobuttonlist

我有一个看起来像这样的 aspx.vb 代码片段！（我正在从 xml 配置文件中读取内容以创建单选按钮列表）

```
Dim tr As TableRow = New TableRow

Dim tcValue As TableCell = New TableCell

Dim RadioButtonList = New RadioButtonList

//After this I load all the items in radiobuttonlist

tcValue.Controls.Add(tdRadioButtonList)

tr.Cells.Add(tcValue) 
```

想象一下这个单选按钮列表有 6 个项目。我想创建 2 列，每列和单行中应包含 3 个单选按钮元素。我该如何实施呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:25:41.737

如果您如此热衷于制作自定义列表，为什么不制作一张表格并拥有类似的东西，拥有一个 RadioButtons 列表/数组而不是一个 RadioButtonList 对象：

（抱歉，除了在 Access 中拼凑一些东西外，我不使用 VB，所以你必须使用我的 C#，你应该能够很容易地解释它）

```
RadioButton[] items = getAllItems();

int i = 0;
Table table = new Table();
TableRow currentRow;

foreach(RadioButton item in items)
{
   if(i != 0)
      table.Rows.Add(currentRow);
   if(i++ % 2 == 0)
      currentRow = new TableRow();
   currentRow.Cells.Add(new TableCell()
      {
         Controls.Add(item)
      });
}

if(currentRow.Cells.Count != 0)
   table.Rows.Add(currentRow);

Page.Controls.Add(table); 
```

# ruby-on-rails - capistrano 和 assets:precompile 由于 rake 版本问题而无法正常工作

> ID：14373637
> 
> 赞同：3
> 
> 时间：2013-01-17T06:53:50.913
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rake, capistrano

我在 capistrano 部署中收到以下错误：

![在此处输入图像描述](../Images/19469b7c7b07981ebaea5717720963dd.png)

如果我从命令行运行该命令，我会得到以下信息：您已经激活了 rake 0.9.2，但您的 Gemfile 需要 rake 10.0.3。使用 bundle exec 可以解决这个问题。

从我的 Gemfile

```
gem 'rake', '10.0.3' 
```

当我查看 Gemfile.lock 时，我只看到三处提到 rake：

```
railties (3.1.10)
  rake (>= 0.8.7)
rake (10.0.3)
rake (= 10.0.3) 
```

这似乎将其修复为 10.0.3 应该没问题。

为什么我会得到这个，我该如何解决这个问题？如果我跑了会发生什么`gem uninstall rake`？Capistrano 在那之后还能工作吗？

提前谢谢

**编辑 1 个** 不同的 rake 版本：

```
root@curren:/data/sites/domain.com/apps/app-rails/current# rake -V
rake, version 0.9.2
root@curren:/data/sites/domain.com/apps/app-rails/current# bundle exec rake -V
rake, version 10.0.3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-28T23:39:33.483

对于第 3 章：

```
SSHKit.config.command_map[:rake] = "bundle exec rake" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T09:22:07.890

如果没有理由不更新 rake，您可以运行

```
bundle update rake 
```

这实际上会更新您的 Gemfile.lock 以使用最新版本的 rake

如果你想保持 rake 0.9.2 卸载最新的

```
gem uninstall rake
#result on my box
Select gem to uninstall:
 1\. rake-0.8.7
 2\. rake-10.0.1
 3\. rake-10.0.2
 4\. All versions 
```

[这篇 Yehuda Katz 博客文章解释了更多](http://yehudakatz.com/2011/05/30/gem-versioning-and-bundler-doing-it-right/)。

# c# - javascript验证和jQuery验证有什么区别？

> ID：14373645
> 
> 赞同：0
> 
> 时间：2013-01-17T06:55:28.927
> 
> 标签：c#, javascript, jquery, asp.net

当我对为用户输入创建的控件进行验证时，我可以同时使用 jscript 和 jQuery 来实现相同的验证。我真的很想知道使用 jQuery 和 javascript 进行验证有什么区别。而且我还想知道是否有任何具体的理由去解决任何类似性能问题的问题？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T06:57:01.930

jQuery**是**JavaScript。它只是你可以使用的一大堆其他人编写的函数。

Pro：函数已经写好了。

缺点：这是一大堆（对于一些大的价值）。

这同样适用于任何其他通用 JS 库（YUI、MooTools、PrototypeJS 等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T06:57:04.407

除了 jQuery 为您节省大量时间外，没有什么真正的区别，特别是如果您使用 jQuery Validation 插件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T06:59:18.793

jQuery 是一个相当大的**Javascript 库**。如果你不需要使用它，那就不要使用它，因为它总是会让你有点膨胀。jQuery 很强大，但是如果你有一个 V8 并且只是用它来支撑你的自行车在两次骑行之间，你真的不需要它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T06:59:25.473

没有“JavaScript”验证或“jQuery”验证之类的东西——验证是一个*概念*。

jQuery 的性能总是比 vanilla JavaScript 低，因为它在内部有额外的函数调用，但它可以通过更容易编写来节省你的时间。

无论如何，如果您只在客户端（使用 jQuery 或 JavaScript）进行验证，那就太糟糕了！您还需要在服务器端进行验证。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T07:03:21.750

java-script 和 jQuery 验证之间没有区别。在 jQuery 中，您可以使用适用于许多场景的插件。
验证是您可以在客户端检查您的值的一种方式。指在浏览器上。

在许多情况下，用户可以从他们的浏览器中禁用 java-script。
因此，请始终尝试在两端进行验证。客户端和服务器端。

如果您使用的是 asp.net，那么您可以获得 asp.net 的自定义验证控件的好处。这是相同
[http://msdn.microsoft.com/en-us/library/f5db6z8k%28v=vs.71%29.aspx的链接](http://msdn.microsoft.com/en-us/library/f5db6z8k%28v=vs.71%29.aspx)

根据[维基](http://en.wikipedia.org/wiki/JQuery)：-`Query is a multi-browser JavaScript library designed to simplify the client-side scripting of HTML. It was released in January 2006 at BarCamp NYC by John Resig. It is currently developed by a team of developers led by Dave Methvin. Used by over 55% of the 10,000 most visited websites`

# nginx - 如何为 Amazon ec2 配置 nginx

> ID：14373647
> 
> 赞同：3
> 
> 时间：2013-01-17T06:55:31.413
> 
> 标签：nginx, amazon-ec2, uwsgi

我看到了 的示例配置`nginx`，其中大多数使用 example.com 作为`server_name`与ip/port 地址`uwsgi_pass`类似`unix:/var/www/run/blog.sock;`或结合使用的配置。但是在亚马逊 ec2 实例的情况下我应该使用什么，因为它有很长的公共名称，ip 是私有的，如果我重新启动我的实例，它会得到不同的公共名称和 ip。我有时需要关闭实例。我想将它配置为使用 uwsgi+django，但我完全是 web 区域和服务器的初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:16:03.100

该`server_name`指令在您希望在同一服务器上托管不同站点并根据“主机”标头字段以不同方式处理它们的情况下很有用（例如：mysite1.com => 一个 PHP 网站，mysite2.com => 一个 django 网站,...) 它实际上是一个虚拟服务器（另请参阅 [服务器指令]）[1](http://nginx.org/en/docs/http/ngx_http_core_module.html#server)。

从[这篇文章](http://nginx.org/en/docs/http/request_processing.html)：

> [...] nginx 仅测试请求的标头字段“主机”[针对 server_name 指令]，以确定应将请求路由到哪个服务器。如果它的值不匹配任何服务器名称，或者请求根本不包含这个头域，那么 nginx 会将请求路由到这个端口的默认服务器。

如果我明白了，你不会想要的。因此，您可以使用[下划线字符](http://nginx.org/en/docs/http/server_names.html#miscellaneous_names)（在**杂项名称**部分）。

当我不需要处理特定域时，我一般使用“localhost”。老实说，我找不到任何关于它的作用的解释。我刚刚找到了具有此值的示例，它似乎与下划线字符完全一样。

所以我会去

```
server_name _; 
```

或者

```
server_name localhost; 
```

# iphone - 使用 OpenCV 进行图像变形中的失真

> ID：14373651
> 
> 赞同：3
> 
> 时间：2013-01-17T06:55:39.367
> 
> 标签：iphone, image-processing, opencv, noise-reduction

我正在使用 OpenCV 2.4.3 创建一个用于图像变形的 iPhone 应用程序。我能够进行变形，但也引入了一些噪音/失真。我无法确定这种噪音的来源或如何消除它。如果有人遇到任何类似的问题或在图像处理方面有任何经验，请帮助我。我附上了一个示例输入/输出以供参考。提前致谢 ：）

![样本结果](../Images/709826775ea9fb3d751c8cfc32591cb6.png)

我真正需要的是这样的：

![变形要求](../Images/15baf72d607297d4a1712b64270a598f.png)

# android - 创建主页按钮菜单 (Android)

> ID：14373659
> 
> 赞同：2
> 
> 时间：2013-01-17T06:56:11.553
> 
> 标签：android, android-layout, gridview

我想为菜单创建带有 6 个按钮的主页布局

如何使用 girdview 或相对布局创建此列表？

我的问题是当旋转屏幕相对布局不起作用并且设计不好时

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:06:50.493

让您的主页看起来时尚。它总是建议使用两种布局作为

布局土地和布局。这样看起来会更好。无论是相对布局还是线性布局还是gridview都使用两种布局。它不是必需的，但为了寻找它的推荐

# javascript - 当我将 $resource query() 的结果分配给它时，为什么我的控制器属性“未定义”？

> ID：14373661
> 
> 赞同：0
> 
> 时间：2013-01-17T06:56:17.077
> 
> 标签：javascript, angularjs, javascript-framework

我有一个 JSON 数据结构：

```
 [
{
"title"  :"a1",
"id"     :"b1",
"name"   :"c1"
},
{
"title"  :"a2",
"id"     :"b2",
"name"   :"c2"
}
 ] 
```

我正在访问的是作为外部 JSON 并通过工厂方法解析的。我希望它将它分配给我的控制器中的 Javascript 变量。

```
 function Control($scope,data)

 {

 var e=data.query();   /* getting the external JSON data  */
 alert(e[0].title);    

} 
```

它说这`e[0]`是未定义的。有没有其他方法可以将它分配给 Javascript 变量然后遍历它？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:42:01.483

好的，所以 $resource 可能会像这样令人困惑......它会立即为您提供对返回对象的引用，但在异步 AJAX 调用返回之前不会更新对象......所以......

如果您将 data.query() 的返回值放在 $scope 的属性中，因为当您在视图中绑定它时它是 $watched，您会看到它更新。但是，如果您只是想提醒它，它会在值更新之前提醒它。再次因为 $resource 的异步方面。

否则，您可以按照@MarkRajcok 在他的回答中显示的方式获得价值。

这是使用 $resource query(); 方法的伪代码说明。

```
app.controller('FooCtrl', function($scope, $resource) {
     var Bar = $resource('/Bar/:id', {id: '@id'});

     // here, we get the result reference and stick it in the scope,
     // relying on a digest to update the value on our screen.
     $scope.data = Bar.query();

     //OR

     //here we already have a reference.
     var test = Bar.query(function() {
          //in here, test has been populated.
          $scope.data2 = test;
     });
     alert(test); //not populated here, yet.

     //OR

     Bar.query(function(x) {
          $scope.data3 = x;
     });
}); 
```

这一切都完成了，因此返回的对象可以具有预先实例化的函数，例如 $save() 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:48:30.670

@Marty 很可能是正确的。如果您使用 $resource 服务中的 query() 方法，它是异步的。这可能会做你想要的：

```
data.query( function( data ) {
  var e = data;
  alert(e[0].title);
}); 
```

# php - 如何使用 PHP 应用基于图像块不一致模式的 CSS 类？

> ID：14373676
> 
> 赞同：0
> 
> 时间：2013-01-17T06:57:20.350
> 
> 标签：php, wordpress, modulus

我一次显示一个星期的帖子，并且该特定周的每一天都将包含每个帖子的缩略图。提要的目标类似于下面的屏幕截图（括号表示一个帖子及其各自的帖子数。）

如您所见，我每天发布的帖子数量不均。我无法知道我将发布多少帖子。我希望能够应用一个 CSS 类（在下面的代码片段中，你会看到我将 CSS 类称为“margin”），这将在我的 CSS 中使用，因此我可以将边距应用于所有中心图像。

图表中的每一行最多有 3 张图像（即 3 列：左、中、右）；但是它可以有无限数量的行。我希望能够将此“边距”类应用于中间列中的所有帖子。

我开始编写代码是如何完成的，但我不知道如何将该类仅应用于所有中间职位。一位朋友告诉我使用模数，但不知道如何正确实现它。如果您需要任何进一步的说明，请告诉我。

**请查看我制作的图表截图，以帮助描述我想要实现的目标。我认为这将帮助您更好地理解这个问题：**

![邮政图](../Images/c74f96566bc77724837f8996eabf5466.png)

```
<section class="post-by-date">
<?php 
    $day_check = '';
    $today = get_the_date();
    $year = date('Y');
    $week = date('W');
    $news_query = new WP_Query('category_name=main&year=' . $year . '&w=' . $week);

    while ($news_query->have_posts()) : $news_query->the_post();
    $day = get_the_date('j');
    if ($day != $day_check) {
        echo "<h3>" . get_the_date() . "</h3>";
    }

    $post_count = $news_query->current_post;
    $found_posts = $news_query->found_posts;

    if ($post_count % 3 == 0) {
        $apply_css_margin = TRUE;

    }
    else {
        $apply_css_margin = FALSE;
    }

?>
<article id="post-<?php the_ID(); ?>" <?php if($apply_css_margin) { post_class('margin'); } else { post_class(); } ?>>
    <a href="<?php the_permalink(); ?>">
        <?php the_post_thumbnail('featured'); ?>
    </a>
</article>
<?php $day_check = $day; endwhile; ?>
</section> 
```

# scala - 斯卡拉 :1: 错误：';' 预期但 '(' 找到

> ID：14373681
> 
> 赞同：4
> 
> 时间：2013-01-17T06:57:25.527
> 
> 标签：scala

在 Scala 中编写简单的递归函数时，我不断收到此错误。我错过了什么？

```
scala> def count(n1:Int, n1:Int) : List[Int] = (n1 < n2) ? List() : List(n1, count((n1 - 1), n2))
<console>:1: error: ';' expected but '(' found.
   def count(n1:Int, n1:Int) : List[Int] = (n1 < n2) ? List() : List(n1, count((n1 - 1), n2)) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T07:04:32.463

在 Scala 中，三元运算符是`if`. 所以，`?`and`:`可以替换为通常的`if`和`else`关键字。

另外，在哪里`n2`定义？我会`count`这样猜测`def count(n1:Int, n2:Int) : List[Int] = ...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T12:14:03.270

这行得通！

`def count(n1:Int, n2:Int) : List[Int] = if (n1 < n2) List() else n1 :: count((n1 - 1), n2))`

更改`count(n1:Int, n1:Int)`为`count(n1:Int,n2)`其余的是添加一个`if else`子句而不是三元运算符。

执行此操作的类似代码是`def count(n1:Int, n2:Int) = (n1 to n2).reverse`

# java - Spring security vaadin 身份验证管理器 bean

> ID：14373682
> 
> 赞同：0
> 
> 时间：2013-01-17T06:57:26.273
> 
> 标签：java, spring-security, vaadin

我是 Vaadin 和 Spring 安全的新手。最近几天，我在谷歌上搜索如何将 Spring Security 集成到 vaadin 应用程序（而不是 servlet）中的正确示例，以便用户可以使用 LoginForm vaadin 组件进行身份验证。这是我在 onlogin 事件中使用的代码片段：

```
login = new LoginForm();
login.addListener(new LoginForm.LoginListener() {
    private static final long serialVersionUID = 1L;

    @Override
    public void onLogin(LoginEvent event) {
        if (event.getLoginParameter("username").isEmpty() || event.getLoginParameter("password").isEmpty()) {
            getWindow().showNotification("Please enter username and/or password", Notification.TYPE_ERROR_MESSAGE);
        } else {
            SpringContextHelper helper = new SpringContextHelper(getApplication());
            authenticationManager = (ProviderManager)helper.getBean("authenticationManager");

            try {
                UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(event.getLoginParameter("username"), event.getLoginParameter("password"));   
                Authentication authentication = authenticationManager.authenticate(token);
                SecurityContextHolder.getContext().setAuthentication(authentication);
                authentication.getDetails();
            } catch (Exception e) {
                getWindow().showNotification(e.getMessage(), Notification.TYPE_ERROR_MESSAGE);
            }
        }                   
    }
}); 
```

当我尝试使用我在 applicationContext.xml 文件中描述的凭据登录时，我在此行收到错误 Null Pointer 异常：

```
 authenticationManager = (ProviderManager)helper.getBean("authenticationManager"); 
```

我知道错误是由 getBean("authenticationManager"); 方法，因为它找不到**“**authenticationManager** ”** bean。问题是：在这种情况下， **“**authenticationManager ”** 是什么。**它是一个类还是 bean，它用特殊的方法实现了某种 Spring 安全框架接口。有没有人可以提供这样的bean的例子（类，pojo等）。正如我在互联网上的示例中找到的那样，我在 web.xml 中描述了侦听器和上下文参数。

**WEB.XML**

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath*:META-INF/applicationContext*.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener> 
```

此外，我还提供了一个 applicationContext.xml，其中我用普通的用户名和密码描述了身份验证管理器。

**应用上下文.XML**

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
  xmlns:beans="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
       http://www.springframework.org/schema/security
       http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<http>
   <intercept-url pattern="/**" access="ROLE_USER" />
   <form-login />
   <logout />
</http>

<authentication-manager alias="authenticationManager">
    <authentication-provider>
      <user-service>
        <user name="userrrr" password="passsssword" authorities="ROLE_USER, ROLE_ADMIN" />
        <user name="otheruser" password="otherpasss" authorities="ROLE_USER" />
      </user-service>
    </authentication-provider>
</authentication-manager> 
```

所以简而言之。有没有人可以为我提供一个工作 bean 示例，对于我来说，它可以验证 applicationContext.xml 文件中描述的普通用户名和密码。如果它有帮助，我正在使用 Vaadin 6、Maven、Hibernate、GlassFish 和 Sping security 3。我将非常感谢帮助，因为我在过去三天一直在处理这个问题。

网上有很多例子，但都是未完成的，不清楚的，使用 Vaadin 应用程序 servelts 或 jsp 登录表单（不是应用程序）和不同的技术。

我选择了官方 vaadin wiki [https://vaadin.com/wiki/-/wiki/Main/Spring%20Integration?p%255Fr%255Fp%255F185834411%255Ftitle=Spring%2520Integration](https://vaadin.com/wiki/-/wiki/Main/Spring%20Integration?p%255Fr%255Fp%255F185834411%255Ftitle=Spring%2520Integration)中描述的方式。但它太差了，描述的是 Spring 框架集成而不是安全性。

我发现另一个看起来很完美的示例[Spring Security + Vaadin：如何创建自定义非 JSP 登录表单？](https://stackoverflow.com/questions/11990617/spring-security-vaadin-how-to-create-custom-non-jsp-login-form). 但在那里我找不到关于 authenticationManager 的详细信息。

这里还有另一个很好的例子[https://vaadin.com/forum/-/message_boards/view_message/373038](https://vaadin.com/forum/-/message_boards/view_message/373038)。但它使用 HttpServletRequest 和 HttpServletResponse 来传递身份验证详细信息。我知道 vaadin 应用程序类可以使用 onRequestStart 和 onRequestEnd 方法实现 HttpServletRequestListener 接口，但是我如何将这些请求传递/使用到/使用 onLogin 事件。

所以亲爱的JAVA高手请帮助新手JAVA JEDI程序员选择正确的方式:)

**Spring 上下文帮助器类**

```
public class SpringContextHelper {  
    private ApplicationContext context;

    public SpringContextHelper(Application application) {
        ServletContext servletContext = ((WebApplicationContext) application.getContext()).getHttpSession().getServletContext();
        context = WebApplicationContextUtils.getRequiredWebApplicationContext(servletContext);
    }

    public Object getBean(final String beanRef) {
        return context.getBean(beanRef);
    }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:52:21.373

试试 org.springframework.security.authentication。**AuthenticationManager**接口而不是**ProviderManager**：

```
authenticationManager = (AuthenticationManager)helper.getBean("authenticationManager"); 
```

**编辑。**在您的配置文件中将 alias="authenticationManager" 替换为 id="authenticationManager"。

# javascript - 如何仅在完全加载时显示图像？

> ID：14373683
> 
> 赞同：7
> 
> 时间：2013-01-17T06:57:28.690
> 
> 标签：javascript, html

我的网页上有一个 img 标签。我给它一个 IP 摄像机的 url，它从那里获取图像并显示它们。我想在完全加载时显示图像。这样我就可以避免闪烁。我执行以下操作。

```
<img id="stream"
  width="1280" height="720" 
  alt="Press reload if no video displays" 
  border="0" style="cursor:crosshair; border:medium; border:thick" />

<button type="button" id="btnStartLive" onclick="onStartLiveBtnClick()">Start Live</button> 
```

javascript代码

```
function LoadImage()
{
  x = document.getElementById("stream");    
  x.src = "http://IP:PORT/jpg/image.jpg" + "?" + escape(new Date());
}

function onStartLiveBtnClick()
{       
  intervalID = setInterval(LoadImage, 0);
} 
```

在这段代码中。当图像很大时。加载需要一些时间。同时它开始显示加载的图像部分。我想显示完整图像并跳过加载部分谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-17T07:05:35.210

预加载图像并在图像加载完成后替换源`<img />`。

```
function LoadImage() {
    var img = new Image(),
        x = document.getElementById("stream");

    img.onload = function() {
        x.src = img.src;
    };

    img.src = "http://IP:PORT/jpg/image.jpg" + "?_=" + (+new Date());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T06:59:59.430

您可以使用该`complete`属性来检查图像是否已完成加载。但是，我认为您的代码还有其他问题，主要是您重复加载相同的图像。相反，您应该只加载一次，然后`complete`每隔一段时间检查属性。

像这样的东西应该工作：

```
function LoadImage()
{
  x = document.getElementById("stream");    
  x.src = "http://IP:PORT/jpg/image.jpg" + "?" + escape(new Date());
  x.style.visibility = 'hidden';
}

function CheckIsLoaded() {
  x = document.getElementById("stream");    
  if (x.complete) x.style.visibility = 'visible';
}

function onStartLiveBtnClick()
{       
  LoadImage();
  intervalID = setInterval(CheckIsLoaded, 0);
} 
```

# android - 如何在android中执行“消息应该在进入本机之前到达应用程序收件箱”？

> ID：14373687
> 
> 赞同：0
> 
> 时间：2013-01-17T06:57:47.717
> 
> 标签：android, android-intent, android-service, android-broadcast

我正在开发一个消息应用程序，其中传入的消息将存储在它自己的收件箱中。但它同时存储在本机消息收件箱和应用程序收件箱中。如何防止邮件在到达应用程序之前到达本机收件箱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:59:08.753

将消息添加到收件箱后，请调用`abortBroadcast()`BroadcastReceiver。确保您的接收者的优先级高于其他消息传递应用程序的优先级。

# ftpwebrequest - 使用 FtpWebRequest 下载文件时连接太多？，帮帮我

> ID：14373688
> 
> 赞同：1
> 
> 时间：2013-01-17T06:57:53.013
> 
> 标签：ftpwebrequest

我使用 FtpWebRequest 从服务器下载多个文件。但是当使用 reqFTP.Credentials 发送请求时，它创建了太多的连接。如何打开连接并归档很多，这是我的代码：

```
 reqFTP = (FtpWebRequest) FtpWebRequest.Create (Uri));
                        reqFTP.Method = WebRequestMethods.Ftp.DownloadFile;
                        reqFTP.UseBinary = true;
                        reqFTP.Credentials = new NetworkCredential (ftpUserID,  ftpPassword);
FtpWebResponse response = (FtpWebResponse) reqFTP.GetResponse (); 
```

每个文件必须 reqFTP.Credentials = new NetworkCredential(ftpUserID, ftpPassword) 一次，几千个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T02:41:14.633

关于 FtpWebRequest 的 MSDN 文档非常混乱，因为他们说应该重用 FTP 连接，但他们没有说明如何。他们不说如何的原因是因为您不需要做任何特别的事情。您只需创建下一个 FtpWebRequest，它将意识到这些是相同的凭据并使用相同的连接，只要在 FtpWebRequest 中设置了 IsKeepAlive 标志，默认情况下就是这种情况。

简短的回答是：您不需要做任何特别的事情来重用 ftp 连接。

但是您可以通过不创建新凭据而只创建一次然后为每个 FtpWebRequest 重用它们来稍微改进您的代码。

# mysql - 检查两列之间的输入值

> ID：14373692
> 
> 赞同：3
> 
> 时间：2013-01-17T06:58:08.427
> 
> 标签：mysql, sql, select

下面是我的数据库架构。

```
id   from  to    value
1    1     10    5
2    11    NULL  10   -- I have stored 'NULL' for any value GREATER THAN 11 
```

现在我必须选择和之间的`value`位置。`input like (4)``from``to`

我知道可以通过这个查询来实现。

```
SELECT *
FROM   TABLE
WHERE  4 BETWEEN `from` AND `to` 
```

但是如何选择价值`input`呢`15`？

```
SELECT *
FROM   TABLE
WHERE  15 BETWEEN `from` AND `to` 
```

在这种情况下，上面的查询将不起作用，因为`to`列有`null`.

**更新**

如果它可以有任何值，列`to`将包含。`null`

现在如果输入值为`15`，则查询应返回第二行，因为`15 is not between 1 and 10 in 1st row`and`15`大于 11 并且`to`value 可以是大于 11 的任何值。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T07:14:29.580

```
SELECT *
FROM   TABLE
WHERE  15 BETWEEN coalesce(`from`,15) AND coalesce(`to`,15); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:03:38.150

使用布尔组合

```
select *
    from table
    where (to is not null and 15 between from and to)
        or (to is null and 15 >= from) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T07:21:23.333

```
SELECT *
FROM   TABLE
WHERE  15 BETWEEN `from` AND IF_NULL(`to`,15) 
```

# c++ - QT Creator 无法解析一个非常简单的项目

> ID：14373697
> 
> 赞同：4
> 
> 时间：2013-01-17T06:58:30.423
> 
> 标签：c++, qt, qt-creator, project-files

我在 QT creator 中创建了一个非常简单的项目，*.pro 文件如下：

```
HEADERS += inc\1.h
SOURCES += src\1.cpp 
```

这是源代码：

```
// 1.h
const int C = 1;

// 1.cpp
#include "1.h"

int main() {
    return C;
} 
```

QT Creator 成功打开了这个“项目”，但无法解析它。F2 不适用于 C 常量，找不到 1.h 标头。

请查看描述问题的屏幕截图：

![显示项目结构的屏幕截图](../Images/eb559724652d506e75616754e0a861eb.png)

最奇怪的部分是完全相同的事情似乎在我的另一台安装了类似 QT SDK 5.0 的机器上工作！你能告诉我我哪里错了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T07:56:48.060

`HEADERS`应该列出你自己项目的头文件，就像`SOURCES`列出源文件一样。

如果要包含外部头文件，则应将其文件夹添加到`INCLUDEPATH`：

```
INCLUDEPATH += inc 
```

以下 .pro 文件在 Qt Creator 2.5.0、Qt 4.6.1 中完美运行：

```
QT       += core
QT       -= gui

TARGET = test
CONFIG   += console
CONFIG   -= app_bundle

TEMPLATE = app

SOURCES += \
    src/1.cpp

INCLUDEPATH += inc 
```

试试那个确切的 .pro 文件，给它 3 秒解析并告诉我它是否有效。

# html - 应用 AJAX 刷新用 HTML 和 Perl 设计的表格的内容

> ID：14373700
> 
> 赞同：-3
> 
> 时间：2013-01-17T06:58:40.530
> 
> 标签：html, ajax, perl

我在应用 AJAX 以刷新用 HTML 和 Perl 设计的表格的某些内容时遇到问题。

说，如果以下单元格 ***{R2,C3},{R3,C4},{R4,C(5-7)}, {R(7-10),C(8-11)}***的内容 需要每 10 秒刷新一次，对应的**PERL**代码应该是什么？

米莉感谢您分享您的知识和时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:04:12.870

1.  获取你想要的数据（你如何做这取决于它是如何存储的）。
2.  将其转换为 JSON（该[`JSON`模块](https://metacpan.org/module/JSON)有据可查）……假设您想使用 JSON，尽管这是一种常见的选择。
3.  输出一个`Content-Type: application/json`标头（您如何执行此操作取决于您与 Web 服务器交互的方法，Plack / a framework / mod_perl / raw CGI / etc 之间会有所不同）......同样的假设适用。
4.  输出 JSON 文本（同上）。

有一个[使用 FastCGI 的简单示例](https://github.com/dorward/simple-ajax-demo/blob/master/webroot/demo.pl)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:02:33.983

1.  您需要构建一个JS方法来从服务器端异步获取内容

2.  您需要一个服务器端模块（在本例中为珍珠）来生成该内容，相同的 . 您可以使用现有的 PERL 服务器端模块。

# c# - 使用 c# 使用 windows 窗体应用程序下载任何文件

> ID：14373701
> 
> 赞同：-1
> 
> 时间：2013-01-17T06:58:41.977
> 
> 标签：c#

我将尝试使用此代码下载文件。但文件大小为 0 KB。下载文件的正确和高效方式是什么。

```
private void DownloadFile()
{
    using (WebClient Client = new WebClient())
    {
        Client.DownloadFileAsync(
            new Uri("http://localhost/sn/userSelect.Designer.cs", UriKind.Absolute),
            @"C:\xampp\htdocs\sn\test1.txt");
        Client.Dispose();
    }
} 
```

任何人都可以给我在 C# 中通过 windows 窗体程序下载文件的方法。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:22:58.030

```
class Program
{
    private static WebClient wc = new WebClient();
    private static ManualResetEvent handle = new ManualResetEvent(true);
    private static void Main(string[] args)
    {

        wc.DownloadProgressChanged += WcOnDownloadProgressChanged;
        wc.DownloadFileCompleted += WcOnDownloadFileCompleted;
        wc.DownloadFileAsync(new Uri(@"http://www.nattyware.com/bin/pixie.exe"), @"C:\\pixie.exe");
        handle.WaitOne(); // wait for the async event to complete

    }

    private static void WcOnDownloadFileCompleted(object sender, AsyncCompletedEventArgs e)
    {
        if (!e.Cancelled && e.Error == null)
        {
            //async download completed successfully
        }
        handle.Set(); // in both the case let the void main() know that async event had finished so that i can quit
    }

    private static void WcOnDownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
    {
        // handle the progres in case of async
        //e.ProgressPercentage
    } 
```

# javascript - Editablegrid mysql绑定不更新

> ID：14373702
> 
> 赞同：0
> 
> 时间：2013-01-17T06:58:42.360
> 
> 标签：javascript, php, mysql, editablegrid

我正在将可编辑网格与 mysql 一起使用。它将数据绑定并显示到我的网格。但是，当我尝试编辑或更新网格时，它没有这样做。

下面是我的加载数据的一些代码，

```
$grid->addColumn('CertificateNo', 'CertificateNo', 'integer', NULL, false); 
$grid->addColumn('ID', 'ID', 'integer');
$grid->addColumn('QuizNo', 'Test No', 'integer');  
$grid->addColumn('Received', 'Received', 'boolean');  
$grid->addColumn('DateReceived', 'Date Received', 'datetime'); 
```

以下是更新脚本的代码：

```
 // Get all parameters provided by the javascript
$colname = $mysqli->real_escape_string(strip_tags($_POST['colname']));
$id = $mysqli->real_escape_string(strip_tags($_POST['id']));
$coltype = $mysqli->real_escape_string(strip_tags($_POST['coltype']));
$value = $mysqli->real_escape_string(strip_tags($_POST['newvalue']));
$tablename = $mysqli->real_escape_string(strip_tags($_POST['tablename']));
    / This very generic. So this script can be used to update several tables.
$return=false;
if ( $stmt = $mysqli->prepare("UPDATE ".$tablename." SET ".$colname." = ? WHERE id = ?")) {
    $stmt->bind_param("si",$value, $id);
    $return = $stmt->execute();
    $stmt->close(); 
```

下面是将值传递给我的 update.php 脚本的 javascript 部分。

```
 function updateCellValue(editableGrid, rowIndex, columnIndex, oldValue, newValue, row, onResponse)
{      
    $.ajax({
        url: 'update.php',
        type: 'POST',
        dataType: "html",
        data: {
            tablename : editableGrid.name,
            id: editableGrid.getRowId(rowIndex), 
            newvalue: editableGrid.getColumnType(columnIndex) == "boolean" ? (newValue ? 1 : 0) : newValue, 
            colname: editableGrid.getColumnName(columnIndex),
            coltype: editableGrid.getColumnType(columnIndex)            
        },
        success: function (response) 
        { 
            // reset old value if failed then highlight row
            var success = onResponse ? onResponse(response) : (response == "ok" || !isNaN(parseInt(response))); // by default, a sucessfull reponse can be "ok" or a database id 
            if (!success) editableGrid.setValueAt(rowIndex, columnIndex, oldValue);
            highlight(row.id, success ? "ok" : "error"); 
        },
        error: function(XMLHttpRequest, textStatus, exception) { alert("Ajax failure\n" + errortext); },
        async: true
    }); 
```

这个模板带有一个 javascript editablegrid-2.0.1。我注意到问题与主键有关。在可以从 www.editablegrid.net 找到的演示中，该表具有主键 ID，而我的具有 CertificateNo，但我的表中的 ID 不是主键。

所以我改变了

```
$grid->addColumn('ID', 'ID', 'integer', NULL, false); 
```

至

```
$grid->addColumn('CertificateNo', 'CertificateNo', 'integer', NULL, false); 
```

现在我无法更新网格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-08T12:42:17.340

我有同样的问题，你可以在 loaddata.php 中看到这段代码

```
$grid->addColumn('action', 'Action', 'html', NULL, false, 'id'); 
```

用“CertificateNo”替换最后一列的“id”，它会是这样的

```
$grid->addColumn('action', 'Action', 'html', NULL, false, 'CertificateNo'); 
```

然后重新加载您的页面以查看更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T00:27:54.323

update.php 使用 $_POST['id'] 也许您应该将其更改为 $_POST['CertificateNo'] 并将 id 作为另一列处理，因为它不再是主键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T14:28:34.000

I had the same problem. You have to change in js/demo.js in

```
function DatabaseGrid() 
{ 
    this.editableGrid = new EditableGrid("HERE!!! Chage to name of your sql table", {... 
```

and also rename your `CertificateNo` to "id" or make new before it, because the grid works with it on many places, so it's hard to change everywhere.

# razor - ServiceStack.Swagger 不适用于 ServiceStack.Razor

> ID：14373704
> 
> 赞同：2
> 
> 时间：2013-01-17T06:58:57.233
> 
> 标签：razor, servicestack, swagger

我已经玩了几个星期的 ServiceStack lib，似乎发现了一个问题。当我从 github 下载 Swagger-UI 的[示例项目](https://github.com/ServiceStack/ServiceStack.UseCases/tree/master/SwaggerHelloWorld)时，一切正常，直到我添加 RazorFormat 功能。然后，在尝试查看***localhost:50001/swagger-ui/index.html***（以前可以正常工作）时出现“未找到请求的处理程序”错误。

那么如何同时使用：招摇和剃刀？我试图将 index.html 重命名为 index.cshtml 以使 razor 引擎处理此文件。该页面正在运行，但没有 JS，也没有下载 CSS，所以它没有多大用处。

# php - 用于读取 RSS 提要的 php 脚本

> ID：14373705
> 
> 赞同：0
> 
> 时间：2013-01-17T06:58:57.683
> 
> 标签：php, rss, rss-reader

我遇到了 RSS 阅读器的问题。我从[Fivefilters](http://fivefilters.org)下载了一个 php 脚本来读取 RSS 内容。

由于下载脚本的旧版本，现在此脚本无法从 RSS 提要提供的链接中提取内容。我发现的其他 php 脚本是付费的。

你能建议任何想法/工具/脚本/方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:04:45.760

试试 SimplePie：[https ://github.com/simplepie/simplepie](https://github.com/simplepie/simplepie)

我不知道这是否能解决您的特定问题，但我有很好的经验。

# dart - dart 控制台应用程序中的 Ctrl+c

> ID：14373706
> 
> 赞同：8
> 
> 时间：2013-01-17T06:59:02.280
> 
> 标签：dart

有没有办法在飞镖控制台应用程序 中捕获`CTRL`+ ？`C`

例如，按`CTRL`+`C`从服务器向 Web 套接字客户端发送干净的“关闭”数据包，而不是仅仅粗暴地关闭套接字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:18:15.560

我已经进行了挖掘，我*认为*目前的答案是否定的。

您可以捕获标准输入，例如：

```
import 'dart:io';

void main() {
  stdin.onData = () => print(stdin.read());
} 
```

但这不响应`CTRL`+ `C`。

在其他地方，`process.dart`（`dart:io`库的一部分）定义了各种信号，例如 SIGQUIT 和`onExit()`回调，但这用于控制子进程而不是主进程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-01T09:51:18.320

现在可以使用

我在 Unified Diff 找到了以下测试代码[：tests/standalone/io/signals_test_script.dart](https://codereview.chromium.org/119093007/patch/120001/130013)

```
import "dart:io";

void main(args) {
  int usr1Count = int.parse(args[0]);
  int usr2Count = int.parse(args[1]);
  var sub1;
  var sub2;
  void check() {
    if (usr1Count < 0 || usr2Count < 0) exit(1);
    if (usr1Count == 0 && usr2Count == 0) {
      sub1.cancel();
      sub2.cancel();
    }
    print("ready");
  }
  sub1 = ProcessSignal.SIGUSR1.watch().listen((signal) {
    if (signal != ProcessSignal.SIGUSR1) exit(1);
    usr1Count--;
    check();
  });
  sub2 = ProcessSignal.SIGUSR2.watch().listen((signal) {
    if (signal != ProcessSignal.SIGUSR2) exit(1);
    usr2Count--;
    check();
  });
  check();
} 
```

希望这将很快发布。

另请参阅[如何在 Dart 中捕获当前的 SIGINT？](https://stackoverflow.com/questions/18448306)

# c - 为什么 printf 不起作用？在套接字编程中

> ID：14373715
> 
> 赞同：0
> 
> 时间：2013-01-17T06:59:46.587
> 
> 标签：c, sockets, printf

我编写了一个向服务器发送简单文本的程序。我只是打印`ftp >`到我的终端。但程序不会打印`ftp >`到终端。

我的操作系统是 OS X Mountain Lion。下面的代码片段供参考。

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <stdlib.h>
#include <unistd.h>
#include <netinet/in.h>
#include <string.h>

#define MAXLINE 1024
#define PORTNUM 3600
int main(int argc, char** argv)
{
    int sockfd;
    char buf[MAXLINE];
    char* prompt = "ftp> ";
    struct sockaddr_in serveraddr;
    socklen_t addrlen;

    sockfd = socket(AF_INET, SOCK_STREAM, 0);

    memset(&serveraddr, 0x00, sizeof(serveraddr));
    serveraddr.sin_family           =   AF_INET;
    serveraddr.sin_addr.s_addr      =   inet_addr("127.0.0.1");
    serveraddr.sin_port             =   htons(PORTNUM);

    addrlen = sizeof(serveraddr);

    if (connect(sockfd, (struct sockaddr_in*)&serveraddr, addrlen)== -1)
    {
        perror("connect error :");
        return 0;
    }

    while(1)
    {
        //write(STDOUT_FILENO, prompt, strlen(prompt));
        printf("ftp> ");
        read(STDIN_FILENO, buf, MAXLINE);
        if( write(sockfd, buf, MAXLINE) <= 0)
        {
            perror("write error");
            return 0;
        }
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T07:02:35.887

`printf()`使用缓冲 I/O。关键是`fflush(stdout);`在 your 之后调用`printf()`，这通常由`'\n'`格式字符串中的换行符 ( ) 触发。

# c# - 在 Entity Framework Code First 中避免循环依赖

> ID：14373720
> 
> 赞同：3
> 
> 时间：2013-01-17T06:59:55.177
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-5

假设我有两个实体：`Nationality`并且`Employee`关系为 1:n。

```
public class Employee
{
    public int Id { get; set; }
    // More Properties

    public virtual Nationality Nationality { get; set; }
}

public class Nationality
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

为了将 Code-First 与 Entity Framework 一起使用，我必须再添加一个属性：`Employees`这是我不希望的`Nationality`（它会创建循环依赖）：

```
public class Nationality
{
    public int Id { get; set; }
    public string Name { get; set; }

    // How to avoid this property
    public virtual List<Employee> Employees { get; set; }
} 
```

这样我就可以在配置类中配置关系1：n：

```
internal class EmployeeConfiguration : EntityTypeConfiguration<Employee>
{
    public EmployeeConfiguration()
    {
        HasKey(f => f.Id);

        HasRequired(e => e.Nationality)
          .WithMany(e => e.Employees)
          .Map(c => c.MapKey("NationalityId"));

        ToTable("Employees");
    }
} 
```

有没有其他方法可以避免循环依赖并消除类`Employees`外的属性`Nationality`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T07:07:54.960

使用`WithMany()`重载来配置映射。

```
internal class EmployeeConfiguration : EntityTypeConfiguration<Employee>
{
    public EmployeeConfiguration()
    {
        HasKey(f => f.Id);

        HasRequired(e => e.Nationality)
          .WithMany()
          .Map(c => c.MapKey("NationalityId"));

        ToTable("Employees");
    }
} 
```

# d3.js - 使用“selectAll”和“select”问题更改样式

> ID：14373722
> 
> 赞同：7
> 
> 时间：2013-01-17T06:59:59.253
> 
> 标签：d3.js

我正在尝试更改某些 svg 元素的样式。当我这样做时：

```
var circleSelected = d3.select("#circleid_2");
        circleSelected.style("fill", "purple");
        circleSelected.style("stroke-width", 5);
        circleSelected.style("stroke", "red"); 
```

圆圈正在改变它的风格。

但是，当我这样做时：

```
 var allCircles = d3.selectAll(".circle");
        allCircles.forEach(function (circle) {
            circle.style("fill", "green"); //function(d) { return getNodeColor(d); }
        }); 
```

它不适用于错误：Object [object SVGCircleElement] has no method 'style'

这是我的“圈子”声明（注意：它同时具有类和 id）：

```
node.append("circle")
            .attr("id", function (d) { return "circleid_" + d.id; })
            .attr("class", "circle")
            .attr("cx", function (d) { return 0; })
            .attr("cy", function (d) { return 0; })
            .attr("r", function (d) { return getNodeSize(d); })
            .style("fill", function (d) { return getNodeColor(d); })
            .style("stroke", function (d) { return getNodeStrokeColor(d); })
            .style("stroke-width", function (d) { return getNodeStrokeWidth(d); }); 
```

我在这里做错了什么？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T08:12:18.280

尝试：

```
d3.selectAll("circle").style("fill", "green"); 
```

或者：

```
allCircles.style("fill", "PaleGoldenRod"); 
```

**说明**：`d3.selectAll`将返回一个选择，可以使用此 API 中描述的功能对其进行操作：[https ://github.com/d3/d3/blob/master/API.md#selections-d3-selection](https://github.com/d3/d3/blob/master/API.md#selections-d3-selection)

但是，一旦您这样做`forEach`，每次返回的内部变量都`circle`将是一个实际的 DOM 元素 - 不再是选择，因此没有`style`附加函数。

# java - 如何获取SVN修订号然后传递给android

> ID：14373726
> 
> 赞同：1
> 
> 时间：2013-01-17T07:00:10.430
> 
> 标签：java, android, eclipse, svn

我正在尝试遵循以下文章：

[http://ballardhack.wordpress.com/2010/09/28/subversion-revision-in-android-app-version-with-eclipse/](http://ballardhack.wordpress.com/2010/09/28/subversion-revision-in-android-app-version-with-eclipse/)

但我迷失在下面的描述中：

> 将此保存到 .externalToolBuilders/AddSvnRevisionToVersion.launch （此文件夹，相对于项目空间的根目录，是 Eclipse 存储此类内容的默认位置；如果要将其添加到多个项目中，请使用完全限定名称，例如 com.example.AddSvnRevisionToVersion.launch，因为 Eclipse 使这些名称成为全局名称）

显然我不能用“。”创建一个文件夹。作为文件夹名称。那么上面的描述究竟是什么意思呢？

除此之外，当我们使用eclipse构建android应用程序时，任何人都有更好更简单的方法来掌握SVN修订号？我是 IDE 用户，所以使用命令行构建应用程序对我来说非常困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:07:09.910

我相信这个文件夹已经存在。它前面有一个“。” 这意味着它可能是隐藏的。

尝试使您的隐藏文件可见（说明会因您的操作系统而异）并搜索它。

# wpf - 从 WPF 中的自定义窗口继承

> ID：14373729
> 
> 赞同：4
> 
> 时间：2013-01-17T07:00:16.723
> 
> 标签：wpf, window

我在 WPF 中有一个自定义窗口，我想将其用作其他窗口的基本窗口。
当我试图继承它时，我在 XAML 中写道：

```
<my:MyWindow x:Class="NewWindow"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:my="clr-namespace:MyNamesapce;assembly=MyAssembly"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300"> 
```

在我写的 .cs 代码中：

```
namespace SomeOtherNamespace
{
    public partial class NewWindow: MyWindow
    {
        internal NewWindow(Control ctrl) : base(ctrl)
        {
            InitializeComponent();
            this.ResizeMode = System.Windows.ResizeMode.NoResize;
        }
    }
} 
```

但后来我得到了错误：

> 不能是 XAML 文件的根，因为它是使用 XAML 定义的。

我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T16:57:05.070

如果您要实现的目标是在每个窗口中设置`ResizeMode`为，则`NoResize`可以使用如下样式：

```
<Style TargetType="Window" x:Key="windowStyle">
    <Setter Property="ResizeMode" Value="NoResize" />
</Style> 
```

将此样式放入 ResourceDictionary 并使其成为窗口样式：

```
Style="{StaticResource windowStyle}" 
```

但是如果你想更进一步，你必须创建一个继承自 Window 的新类

```
public class MyWindow : Window
{
    public MyWindow()
    {
        this.ResizeMode = ResizeMode.NoResize;
    }
} 
```

现在你可以实例化一个新的`MyWindow`

```
<mn:MyWindow x:Class="Project.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mn="clr-namespace:MyControls"
        Height="300" Width="300">
</mn:MyWindow> 
```

请注意，将成为此新窗口“代码背后”的类需要从您的新`MyWindow`类继承，如下所示：

```
namespace Project
{
    public partial class Window1 : MyControls.MyWindow
    {
        public Window1()
        {
            InitializeComponent();
        }
    }
} 
```

# internationalization - Analysis Services 数据库在 MDX 查询中返回格式奇特的数字

> ID：14373730
> 
> 赞同：0
> 
> 时间：2013-01-17T07:00:20.367
> 
> 标签：internationalization, formatting, ssas

我有一个托管两个分析服务数据库的 SQL Server 2008 数据库服务器。从同一台机器上，我在 SSMS 中针对这两个数据库运行 MDX 查询（例如 SELECT { [Gender].[M], [Gender].[W] } on 0, { [Area].[Town].[ 3101000], [Area].[Town].[3152007] } on 1 FROM [Population] WHERE ([Time].[Years].[2005], [Population]) 一个查询返回一个由浮点数组成的表格式为 123,23 而另一个 DB 返回格式为 123.23 的浮点数

在 Visual Studio 中，两个项目的度量都定义为双精度值，在源数据库中，值取自 NUMERIC 列。

我从两个不同的关系数据库中填充了这两个数据库（但它们都共享相同的排序规则设置），并且用于部署 AS 数据库的 Visual Studio 解决方案也不同（对于第二个，我只是复制了我的第一个 vs 解决方案和基本上只删除了一些不必要的维度和立方体）。

我的问题是：要寻找哪些可能会导致 MDX 结果格式出现差异的嫌疑人？

*   我已经检查了似乎相同的源数据库的排序规则设置
*   我检查了 AS DB 中的语言设置，但没有找到任何合适的设置（我可能监督了什么）
*   我检查了两个解决方案中未设置的多维数据集中的 FormatString 属性

这里还有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:02:02.483

VS/BIDS 中多维数据集的“计算”选项卡中是否有任何内容？您可以在那里覆盖度量的格式字符串。

另外，您是否将连接字符串中的语言设置为 SSAS？这是可能的，并且客户端使用它来自动格式化用户区域设置中的数字。如果您在 SSMS 中运行它似乎不太可能，但我想我会问。

# java - 查询 Excel 工作表以获取 Java 中的数据子集

> ID：14373732
> 
> 赞同：1
> 
> 时间：2013-01-17T07:00:39.513
> 
> 标签：java, apache-poi

我目前正在使用 Apache POI 处理 Excel 工作表。现在我处于一个棘手的情况，我想要基于某些条件的数据子集。

从某种意义上说，我必须只获取满足某些条件的数据，本质上是一个选择查询。

```
select distinct(category) from #Sheet where id < 10 
```

我知道上面的事情在 C# 中是可能的，但是我如何使用 Apache POI 在 Java 中实现相同的目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:09:18.717

上次我使用 POI 时（大约 1 年前）没有查询 API。

但是，如果您的查询真的那么简单，您应该只扫描 Java 中的行并将类别添加到 a `Set<String>`（或者`Map<String,Integer>`如果您也想计算它们）。

# java - 无法解析 jaxb-xjc-2.2.5-2.jar 中的名称“xjc:globalJavaType”

> ID：14373733
> 
> 赞同：6
> 
> 时间：2013-01-17T07:00:40.110
> 
> 标签：java, maven, jaxb

Maven 项目，转移到另一台 PC 后出现错误。为什么？

```
[INFO] [jaxb2:generate {execution: default-cli}]
[INFO] ------------------------------------------------------------------------
[ERROR] FATAL ERROR
[INFO] ------------------------------------------------------------------------
[INFO] org.xml.sax.SAXParseException; systemId: jar:file:/.m2/repository/com/sun/xml/bind/jaxb-xjc/2.2.5-2/jaxb-xjc-2.2.5-2.jar!/com/sun/tools/xjc/reader/xmlschema/bindinfo/binding.xsd; lineNumber: 86; columnNumber: 48; src-resolve: Cannot resolve the name 'xjc:globalJavaType' to a(n) 'group' component.
[INFO] ------------------------------------------------------------------------
[INFO] Trace
java.lang.AssertionError: org.xml.sax.SAXParseException; systemId: jar:file:/.m2/repository/com/sun/xml/bind/jaxb-xjc/2.2.5-2/jaxb-xjc-2.2.5-2.jar!/com/sun/tools/xjc/reader/xmlschema/bindinfo/binding.xsd; lineNumber: 86; columnNumber: 48; src-resolve: Cannot resolve the name 'xjc:globalJavaType' to a(n) 'group' component.
    at com.sun.tools.xjc.SchemaCache.newValidator(SchemaCache.java:78)
    at com.sun.tools.xjc.reader.xmlschema.bindinfo.AnnotationParserFactoryImpl$1$1.startElement(AnnotationParserFactoryImpl.java:118)
    at com.sun.xml.xsom.impl.parser.state.NGCCRuntime.startElement(NGCCRuntime.java:253)
    ... 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-14T14:26:28.267

我有类似的问题。在我的情况下，本地 maven 存储库的路径包含西里尔符号。
我更改了我的 settings.xml 并将 <localRepository> 元素放在那里以仅使用拉丁符号指定新的存储库路径。这对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-28T17:24:21.330

我也有类似的问题。事实证明，Windows 用户主路径包含带重音的字符，导致错误。它是：c:\Users\Géza.m2 我们换成了其他用户，一切都很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-09T11:26:59.867

好吧，我找到了解决方案。（基于[http://docs.oracle.com/javase/7/docs/api/javax/xml/XMLConstants.html#ACCESS_EXTERNAL_SCHEMA](http://docs.oracle.com/javase/7/docs/api/javax/xml/XMLConstants.html#ACCESS_EXTERNAL_SCHEMA)）

在 /path/to/jdk1.8.0/jre/lib 下创建一个名为 jaxp.properties 的文件（如果它不存在），然后在其中写入以下行：

javax.xml.accessExternalSchema = all 就是这样。享受 JDK 8。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-24T17:37:56.990

# iphone - 如何根据 iOS 中的当前设备为单个类加载不同的 xib？

> ID：14373739
> 
> 赞同：2
> 
> 时间：2013-01-17T07:01:01.253
> 
> 标签：iphone, ios, ipad, uiviewcontroller, xib

我在视图控制器中有完整的代码。所以，我需要在 iPad、iPhone 和 iPod 中显示相同的输出。所以，我正在使用单视图控制器来处理数据。为此，我如何选择可能 ipod 或 ipad 取决于 iOS 中当前设备的不同 XIB？

我想要一个视图控制器和 2 个 XIB，而不是再创建一个视图控制器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:05:54.950

当您创建一个通用应用程序时，这非常简单，它本身会给代码检查设备类型并加载特定的 xib。

例如

```
 if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil] autorelease];
    } else {
        self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil] autorelease];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:05:23.617

`[UIDevice currentDevice]`将为您提供有关当前设备的详细信息。在 if 循环中使用它并为 iphone 或 i pad 选择 xib。

```
 if([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad) 
{
 load 1 xib 
} 
else 
{ 
load another 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T07:07:46.380

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
{
    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil] autorelease];
}
else
{
    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil] autorelease];
} 
```

# c# - 在 mvvm 中将异步/解除阻塞放在哪里？

> ID：14373742
> 
> 赞同：1
> 
> 时间：2013-01-17T07:01:17.847
> 
> 标签：c#, wpf, mvvm, asynchronous

许多命令/事件（除了少量纯对象更改之外的几乎所有内容）需要以非阻塞方式运行以阻止应用程序冻结。

解锁代码（Background Worker/Task/etc.）通常应该放在模型、视图模型还是视图中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:46:29.610

任务应该在 ViewModel 或 Model 中异步启动，当然不是在 View 中。

我会将其作为与上下文相关的决定。某些事物的异步计算是否是业务逻辑的内在特征，在业务逻辑中具有复杂的相互依赖关系？然后将“解锁代码”放入模型中。然后，您需要实现相应的事件以在任务完成时通知您的 ViewModel，或者更一般地说，您的模型已更改（作为旁注：在模型上实现 INotifyPropertyChanged 在这里是完全合法的）。

如果你想保持你的模型没有异步的东西，从 ViewModel 启动它。但是，当您异步修改模型时，您必须非常小心，以免遇到问题。我会锁定它。

顺便说一句：看看任务并行库。你可以为这样的命令编写一个 Execute() 方法：

```
System.Threading.Tasks.Task.Factory.StartNew(() =>
{                
   return expensiveTaskResults();
}).ContinueWith(t =>
{
   if (t.IsFaulted) HandleError(t);                
   Result = t.Result;
} 
```

很好很简单。

这可能会提供更多信息：[SO Thread](https://stackoverflow.com/questions/13989684/busyindicator-allows-to-fire-relaycommand-twice "所以线程")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:14:25.507

据我所知，您也可以在命令和视图模型中使用异步工具（Backworker、Thread/Task ..），但不能在模型中使用。看看这篇[文章](http://www.codeproject.com/Articles/123183/Asynchronus-MVVM-Stop-the-Dreaded-Dead-GUI-Problem)
MVVM 中很少涉及事件，尤其是在实现业务逻辑时，因为除非您使用事件到命令工具，否则它们不能与 ViewModel 有直接关系。

# w3c - 我在哪里可以找到有关 W3C 做出决定背后原因的信息？

> ID：14373748
> 
> 赞同：2
> 
> 时间：2013-01-17T07:01:53.710
> 
> 标签：w3c

我`:contains()`在 Selenium 测试中广泛使用选择器。W3C 规范已将其删除。

我想了解原因，但找不到解释此决定背后原因的文档。看过[W3org](http://www.w3.org/TR/selectors/ "w3org")（伪类最后出现在[这个](http://www.w3.org/TR/2001/CR-css3-selectors-20011113/#content-selectors)版本中）并搜索了谷歌。

我在哪里可以找到有关对 W3C 规范进行此类更改的原因的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:09:25.930

您可能可以在 W3C 邮件列表中找到原因：

[https://www.google.com/search?q=site%3Ahttp%3A%2F%2Flists.w3.org%2F+css+contains](https://www.google.com/search?q=site%3Ahttp%3A%2F%2Flists.w3.org%2F+css+contains)

有很多关于它的讨论。根据[这篇文章](http://lists.w3.org/Archives/Public/www-style/2012Apr/0724.html)，除其他外，它可能与性能问题有关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T07:22:05.140

`:contains()`被删除是因为他们想出了另一个主意。CSS4 允许您使用 .[更改](http://dev.w3.org/csswg/selectors4/#subject)整个选择器的主题`!`。

因此，如果您想查找文档中包含页脚的所有表格：

```
!table > tfoot { ... } 
```

这将执行与使用 相同的查找`table > tfoot`，但实际受影响的元素将是`table`s，而不是`tfoot`s。

我不知道他们做出改变的确切原因，但我可以猜到：这对我来说更容易阅读！而且因为你不能嵌套它或将它与`:not()`或其他类似的暴行结合起来，浏览器供应商很容易有效地实施。

# javascript - 以更高的分辨率居中页面布局

> ID：14373751
> 
> 赞同：2
> 
> 时间：2013-01-17T07:02:07.467
> 
> 标签：javascript, html, css, layout

我正在一个有一些大图像等显示的网站上工作。在我的屏幕上，分辨率为 1024 x 768，它完全适合屏幕，从左到右。

然而，在我的客户的屏幕上，他的分辨率更大，他认为屏幕的右侧部分是空白的，并希望我将布局居中而不是左对齐。（我的左边距设置为 0。）

如果我只是增加左边距，它将导致水平滚动条出现在像我这样的较低分辨率上。

有什么方法可以解决所有分辨率的问题吗？或者我是否必须求助于使用 javascript 来检测屏幕分辨率，如果分辨率大于某个值，则增加左边距？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T07:04:29.503

```
#wrapper { margin: 0 auto; width: 960px; } 
```

这将使 id="wrapper" 的元素水平居中，因此如果您的所有内容都在该元素内，则您的页面将居中

基本上，如果您应用 margin-left: auto; 和边距：自动；对于块元素，它将水平居中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T07:07:02.200

围绕你想要居中的所有元素创建一个容器元素，并给它一个 id，`id="container"`然后添加一个**css**选择器以使其居中。

```
#container {
  margin: auto
} 
```

# java - 更新前选择是一种好方法，反之亦然？

> ID：14373752
> 
> 赞同：0
> 
> 时间：2013-01-17T07:02:13.413
> 
> 标签：java, sql, sql-server, jakarta-ee, jdbc

我正在使用普通 JDBC 连接开发应用程序。该应用程序是使用 Java-Java EE SpringsMVC 3.0 和 SQL Server 08 作为数据库开发的。我需要根据非主键列更新表。

现在，在更新表格之前，我们必须决定更新表格的方法，因为表格可能包含大量数据。更新查询将批量执行，我们需要以不占用系统资源的方式设计应用程序。
现在，我们必须在这两种方法之间做出选择，
**1\. 在更新之前选择数据**或
**2\. 更新数据然后选择缺失的数据。**

1.  更新前选择数据只有在失败机会最大的情况下才有用，即如果执行批量 100 查询更新，并且其中只有 20 行更新成功，则应采取这种方法
2.  只有当故障记录少得多时，更新数据然后检查丢失的数据才是有益的。通过这种方法，可以避免一个数据库选择调用，即在批量更新之后，可以获取更新记录的计数，并且当且仅当存在与查询不匹配的计数时才应该执行选择查询。

我们完全不了解生产环境中的系统，但我们想要应对所有可能性并想要一个更快的系统。我需要您的意见，因为这是更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:52:59.977

由于成功更新或更快选择的机会为 50:50，因此很难从提到的当前场景中判断出来。您可能需要一种模糊逻辑方法，在一段时间内获得成功更新次数的持续反馈，然后根据该数据决定是在选择之前进行更新还是在更新之前进行选择。

# google-apps-script - 使用谷歌文档查看器禁用打开新标签选项

> ID：14373756
> 
> 赞同：0
> 
> 时间：2013-01-17T07:02:30.747
> 
> 标签：google-apps-script, google-docs, google-docs-api

使用谷歌文档查看器禁用打开新标签选项 ![在此处输入图像描述](../Images/7c04ae923bcf08c0834b31b5088f1301.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T14:15:20.107

该小部件不受脚本控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-24T08:32:32.080

您需要在 iframe 中添加 sandbox = "allow-scripts allow-same-origin allow-top-navigation" 然后该按钮将不起作用。

# iphone - 网速慢时应用程序崩溃

> ID：14373762
> 
> 赞同：0
> 
> 时间：2013-01-17T07:03:05.693
> 
> 标签：iphone, ios, crash, reachability, internet-connection

每当出现连接问题、2G 连接速度慢等情况时，我的应用程序都会崩溃并显示以下日志：

![在此处输入图像描述](../Images/674aa3040abba806a64105033607a033.png)

我可以从日志中得到的是，它`sendSynchronousRequest`在`NSURLConnection`. 我怎么知道到底是什么问题，我该如何解决？我已经使用了 Apple 提供的 Reachability 方法，但同时返回`YES`了 Internet 可访问性和主机可访问性。只是互联网连接速度很慢。在快速连接 (Wifi) 上，它运行良好。

**编辑：**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
[window setFrame:[[UIScreen mainScreen] bounds]];
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
//singleton
u=[[U5 alloc]init];
m_tUSyncPersistableConfig  = [[USyncPersistableConfig alloc] init] ;    
    m_commonObj = [[CommonClass alloc] init] ;
u.m_tUSyncPersistableConfig=m_tUSyncPersistableConfig;
    u.commonObj = m_commonObj;

 //register for push notifications
   [[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound)];

 //load persisting data : from sqlite database
[u loadPreferences:m_tUSyncPersistableConfig];

window.rootViewController = tabBarController;

[window makeKeyAndVisible];

  if (![[NSUserDefaults standardUserDefaults] boolForKey:@"HasLaunchedOnce"]) {
       //first launch//setting some values
  }else {
        //not first launch
}

    if (![[NSUserDefaults standardUserDefaults] boolForKey:@"HasLaunchedOnce"] || [u.m_tUSyncPersistableConfig.mUserName isEqualToString:@""] || !u.m_tUSyncPersistableConfig.mUserName)
{
    // This is the first launch ever
    //present login page

}
else
{
    // app already launched
  [[u commonObj] performSelectorInBackground:@selector(getAccountInfo) withObject:nil];
}

return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:48:12.197

在后台线程中运行同步请求通常很好。

但是崩溃报告显示同步请求正在主线程上运行。因此，至少有一个位置您没有在后台线程中运行它。在主线程上，它将阻塞 UI，iOS 看门狗进程会注意到这一点并在启动时终止应用程序。

因此，请确保您永远不会在主线程上使用同步请求！

你说你正在这样做，但也许你做错了。显示实际调用连接方法的代码。如果您对崩溃报告进行符号化，它还将在线程 0 堆栈跟踪的第 8 帧到第 10 帧中显示这些位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:49:26.017

我强烈建议不要使用同步 NSURLConnection 网络请求。Apple 不推荐它，并且被认为是糟糕的设计。我建议转向异步请求——它可能会回避您的问题，并且您可以使用 NSURLConnection 委托方法处理错误。

# objective-c - 使用可可自动生成邮件

> ID：14373763
> 
> 赞同：0
> 
> 时间：2013-01-17T07:03:12.330
> 
> 标签：objective-c, cocoa

由于我是可可新手，所以我无法清楚地理解这段代码。那么有人可以解释一下这段代码吗？提前致谢

```
NSString *emailString = [NSString stringWithFormat:@"\
                     tell application \"Mail\"\n\
                     set newMessage to make new outgoing message with properties {subject:\"%@\", content:\"%@\" & return} \n\
                     tell newMessage\n\
                     set visible to false\n\
                     set sender to \"%@\"\n\
                     make new to recipient at end of to recipients with properties {name:\"%@\", address:\"%@\"}\n\
                     tell content\n\
                     ",subject, bodyText, @"McAlarm alert", @"McAlarm User", toAddress ]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:30:34.093

SBSendMail 是在可可中发送电子邮件的最佳方式

[SBS发送邮件](https://developer.apple.com/library/mac/#samplecode/SBSendEmail/Introduction/Intro.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:16:08.867

这是一个用 nsstring 编写的 appleScript，稍后将执行它来创建包含消息、正文等的新邮件。

如果你想发送邮件，你还有另一种方法，不仅是通过 AS（苹果脚本）。

几年前，它被认为是完成一些自动化任务的好方法。现在，即使是苹果也拒绝接受任何使用 applescript 的应用程序。

因此，由于沙盒，在可可应用程序中，切勿将 applescript 用于任何目的。

编辑：

```
- (void)sendEmailWithMail:(NSString *) senderAddress Address:(NSString *) toAddress Subject:(NSString *) subject Body:(NSString *) bodyText {
    NSString *mailtoAddress = [[NSString stringWithFormat:@"mailto:%@?Subject=%@&body=%@",toAddress,subject,bodyText] stringByReplacingOccurrencesOfString:@" " withString:@"%20"];
    [[NSWorkspace sharedWorkspace] openURL:[NSURL URLWithString:mailtoAddress]];
} 
```

阅读此[链接](http://www.paullynch.org/blog/?p=61)

# java - Primefaces 根据自动完成的选择填充其他列值

> ID：14373765
> 
> 赞同：1
> 
> 时间：2013-01-17T07:03:20.380
> 
> 标签：java, jsf-2, autocomplete, primefaces

我正在使用 Primefaces AutoComplete，并且正在使用 Hibernate 从数据库中获取记录。

当我输入文本时，我可以从数据库中选择值。我想要实现的是，当我在输入字符时选择一个名称时，我希望 jsf 页面中的其他列被填充。例如，当我选择员工姓名“SMITH”时，我想要员工编号、部门填写 SMITH 的员工编号和部门。

我在 jsf 页面中有以下内容。

```
<p:autoComplete value="#{myMB.selectedEmployee}"
                            id="basicPojo" minQueryLength="3" 
                            completeMethod="#{myMB.complete}" var="p"
                            itemLabel="#{p.empName}" 
                             converter="#{myconverter}"
                            forceSelection="true"  > 

<h:outputLabel value="Emp Number" />
                        <h:outputText value="#{p.employeeNumber}" />

<h:outputLabel value="Department" />
                        <h:outputText value="#{p.employeeDepartment}" />
                    </p:autoComplete> 
```

当我选择一个名称时，其他字段不会显示。

这可能是什么原因？我怎样才能达到预期的效果？

非常感谢任何帮助。

**编辑 1**

```
<p:dialog header="Create New Request" style="font-weight:bold"
                    widgetVar="requestNewDialog" resizable="false" 
        id="newDlg"             
    showEffect="fade" hideEffect="fade" appendToBody="true"
        modal="true" position="center top" width="850" height="450">
                    <h:panelGrid columns="2" cellspacing="2">
                        <h:outputText value="New Employee No:" />
                        <h:outputText value="" />
                    </h:panelGrid>
                    <p:separator />
                    <p:panelGrid columns="6">    
                        <h:outputLabel value="Employee # " for="emp" />
                        <p:autoComplete value="#
                       {myMB.selectedEmployee}"
               id="basicPojo" minQueryLength="3" 
               completeMethod="#{myMB.complete}" var="p"
               itemLabel="#{p.longName}" 
                       converter="#{employeeNameConverter}"
               forceSelection="true"  >
               <p:ajax event="itemSelect" update="num" 
                       listener="#{myMB.handleSelect}"  />      
            <h:outputLabel value="Name" for="name" />
            <h:outputText value="#{p.employeeNumber}" />
            </p:autoComplete>                       

        <h:outputLabel id="num" value="Department" for="dept" />
        <p:inputText id="dept" value="#{p.employeeNumber}" >
                        </p:inputText>
          </p:panelGrid>
     <p:separator />
         </p:dialog> 
```

**ManagedBean**完成方法

```
public List<Employee> complete(String query) {
        List<Employee> suggestions;
        suggestions = new ArrayList<Employee>();
        try {

            EmployeeQueryData q = new EmployeeQueryData ();             
            getService().getEmployee(q,query);              
            employee = q.getResult();    
            for (Employee p : employee) {
                if (p.getEmpName().toLowerCase().contains(query)); 
                    suggestions.add(p);    //               
            }
        } catch (Exception e) {             
        }    
        return suggestions;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T08:00:37.420

采用`<p:ajax event="itemSelect"...`

```
<p:autoComplete>...
    <p:ajax event="itemSelect" update="someOtherFieldId someOtherFieldId2" />
</p:autoComplete> 
```

# java - for 循环和 while 循环总是可以互换的

> ID：14373768
> 
> 赞同：9
> 
> 时间：2013-01-17T07:03:26.463
> 
> 标签：java

我理解一个根据情况比另一个具有某些优势的概念，但是它们在每种情况下都可以互换吗？我的教科书写道

```
for (init; test; step) {
    statements; 
} 
```

等同于

```
init; 
while (test) { 
    statements; 
    step; 
} 
```

我将如何在 for 循环中重写以下程序？如果我将以下程序重新编写为 for 循环表单，我将无法设置 init 和测试的值。

```
import acm.program.*;

public class DigitSum extends ConsoleProgram{  
public void run() {
     println("this program sums the digits in an integer");
     int n = readInt("enter a positive number: ");
     int dsum = 0;
     while ( n > 0) {
       dsum += n % 10;
       n /=10;
     }
    }
   } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T07:05:58.037

```
int dsum = 0;
for(int n = readInt("enter a positive number: "); n > 0; n /=10) {
   dsum += n % 10;
 } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T07:09:50.597

由于我无法阻止自己写这篇文章，所以我会指出它。

你的 for 循环： -

```
for (init; test; step) {
    statements; 
} 
```

与您发布的 while 循环不同。for 循环的`init`将在循环之外不可见，而在您的 while 循环中，它将是可见的。所以，这只是在循环的`init`一部分中声明的变量的范围。`for`它就在循环内部。

所以，这是你的 for 循环的确切转换： -

```
{
    init; 
    while (test) { 
        statements; 
        step; 
    }
} 
```

至于你具体案例的转换，我想你已经得到了答案。

* * *

好吧，通过上面的解释，你的 while 循环的确切转换与上面的版本有点不同`@Eric's`，会是这样的： -

```
int dsum = 0;
int n = 0;
for(n = readInt("enter a positive number: "); n > 0; n /=10) {
    dsum += n % 10;
} 
```

请注意，这对答案的修改很少`@Eric's`，因为它在 for 循环之外声明了循环变量`n`。这只是从我给出的解释中得出的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-10T00:55:56.280

除了在初始化程序中声明的变量范围之外，还有另一个时候 a`for`会表现出不同的行为，那就是存在 a `continue`：

```
for (init; test; update) {
    if(sometest) { continue; }
    statements; 
} 
```

不等于***_***

```
init; 
while (test) { 
    if(sometest) { continue; }
    statements; 
    update; 
} 
```

因为在`while`循环中`continue`它会跳过`update`，而`for`循环不会。

为了通过最明显的示例来展示这一点，请考虑以下两个循环（感谢@Cruncher）：

```
// terminates
for(int xa=0; xa<10; xa++) { continue; }

// loops forever
int xa=0;
while(xa<10) { continue; xa++; } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T07:11:46.533

+1，好问题

两者之间的区别主要是眼睛糖果。在一种情况下，一个人可能只是比另一个人读得更好。对于您的示例，以下是单行代码中的 for 循环等效项。然而，在这种情况下，while 循环读起来更容易。

```
public void run() {
  println("this program sums the digits in an integer");
  for (n = readInt("enter a positive number: "), dsum=0; n > 0; dsum+=n%10, n/=10);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T07:12:52.853

是的，除了以下两点：

1.  “For”让您在其中声明和初始化您的条件（= 变量，顺便说一句 - 多个变量！），然后在您离开“For”循环时自动清理它。
    而对于“While”，您必须自己进行初始化——在“While”之外进行清理——只有当你离开声明变量（用于条件）的可见性时。

2.  "For" 具有方便的语法（以及之后的所有清理），用于迭代集合和数组。

你的代码我会这样重写：

```
import acm.program.*;

public class DigitSum extends ConsoleProgram{  
public void run() {
     println("this program sums the digits in an integer");
     for(int n = readInt("enter a positive number: "), dsum = 0; n > 0; n /=10) {
         dsum += n % 10;
     }
    }
   } 
```

不要忘记 -**在 init 中，您可以为多个变量放置声明/初始化**。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T07:07:04.213

这应该有效。用这个替换你的`while`循环。只需将初始化部分留空即可。

```
 for(;n>0;n=n/10)
    {
        dsum+=n%10;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-17T07:10:02.960

反正你有什么困难

```
int n = readInt("enter a positive number: ");
for(n;n>0;n=n/10)
{dsum+=n%10;
} 
```

# redis - 超出 Redis 连接/缓冲区大小限制

> ID：14373769
> 
> 赞同：6
> 
> 时间：2013-01-17T07:03:28.043
> 
> 标签：redis

在对我们的应用服务器进行压力测试时，我们从 Redis 中得到了以下异常：

> ServiceStack.Redis.RedisException: **could not connect to redis Instance at redis-host:6379 ---> System.Net.Sockets.SocketException: 由于系统缺少足够的缓冲区空间或队列，无法对套接字执行操作已满 redis-host:6379** 在 System.Net.Sockets.Socket.Connect(IPAddress[] 地址，Int32 端口) 在 System.Net.Sockets.Socket.Connect(String host, Int32 端口) 在 ServiceStack.Redis.RedisNativeClient.Connect() --- 结束内部异常堆栈跟踪 --- 在 ServiceStack.Redis.RedisNativeClient.AssertConnectedSocket() 在 ServiceStack.Redis.RedisNativeClient.SendCommand(Byte[][] cmdWithBinaryArgs) 在 ServiceStack.Redis.RedisNativeClient 的 ServiceStack.Redis.RedisNativeClient.Connect() .SendExpectData(Byte[][] cmdWithBinaryArgs) at ServiceStack.Redis.RedisClient.GetValueFromHash(String hashId, String key) at ServiceStack.Redis.Generic.RedisTypedClient `1.GetValueFromHash[TKey](IRedisHash`2 hash, TKey key)

redis主机端口似乎有连接限制超出。知道如何通过 Redis.conf 或服务器配置来增加此阈值吗？我们在 Ubuntu 服务器上托管了 Redis 实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T16:37:03.050

我能够复制使用 ServiceStack 超出缓冲区大小限制的相同问题。执行压力测试的代码在这里 - 运行 20 个应用程序实例至少 20 分钟。[https://github.com/ServiceStack/ServiceStack.Redis/commit/b01582f9c873f375794c04d46aad400590ca5bf3](https://github.com/ServiceStack/ServiceStack.Redis/commit/b01582f9c873f375794c04d46aad400590ca5bf3)

您可能会看到的第一个错误是“无法连接到 redis 实例”，如 [Redis 无法在繁忙负载中连接](https://stackoverflow.com/questions/17213870/redis-unable-to-connect-in-busy-load)所描述的那样，但是如果您展开内部异常，您会看到“无法对套接字执行操作，因为系统缺乏足够的缓冲区空间或因为队列已满”

我的问题发生在 Window7 上，但不是 Window Server 2008 rc。所以我开始看看这是否是操作系统问题。在 ServiceStack 向 Demis 发送电子邮件后，得出的结论是 ServiceStack 正确关闭了套接字。查看操作系统，通过设置 TcpTimeWaitDelay 和 MaxUserPort 解决了问题。

更多参考。TcpTimeWaitDelay 为 45 秒

和 MaxUserPort [http://mashijie.blogspot.com/2009/05/change-default-setting-of-tcp-ports.html](http://mashijie.blogspot.com/2009/05/change-default-setting-of-tcp-ports.html)

我将端口范围调整为 1025-64511

# java - 使用 Java 中的 cuda 设备内核？

> ID：14373771
> 
> 赞同：1
> 
> 时间：2013-01-17T07:03:33.157
> 
> 标签：java, jcuda

我正在使用带有 Jcuda 库的 Java 来访问 CUDA.. 我能够运行一个简单的应用程序（如 vectorAdd）.. 但是，我的内核代码说变得非常大.. 有没有办法在内核中使用**设备**功能.cu 文件？我知道如果我使用 CUDA C 是可能的，但是使用 Java 会出错？谁能帮忙

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-12T18:12:09.477

我认为你得到的错误很可能是 CUDA_ERROR_NOT_FOUND。请检查您是否在`__device__`函数前添加了“extern C”。否则，它不会在符号表中找到。

# php - 如何在 wordpress 中获取元描述值

> ID：14373774
> 
> 赞同：0
> 
> 时间：2013-01-17T07:03:45.610
> 
> 标签：php

我想要 wordpress 中 header.php 文件中当前执行页面的元描述。

Wordpress 函数“get_post_meta”对此没有用。它只返回自定义元标记。

谁能帮我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:06:05.443

我冒昧地假设您正在动态生成元描述标签。如果是这种情况，这应该可以满足您的需求...

```
<?php
    echo get_post_meta($post->ID, 'description', true);
?> 
```

另一方面，如果那不是您正在做的事情……该方法将行不通。

# java - 多次读取和写入多语言属性文件时出现 PermGen 错误

> ID：14373775
> 
> 赞同：0
> 
> 时间：2013-01-17T07:04:05.560
> 
> 标签：java, spring, hibernate

```
Exception in thread "ContainerBackgroundProcessor[StandardEngine[Catalina]]" java.lang.OutOfMemoryError: PermGen space
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2904)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1173)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1681)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at org.apache.catalina.util.CustomObjectInputStream.resolveClass(CustomObjectInputStream.java:76)
    at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1574)
    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1495)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1731)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1946)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1870)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
    at java.util.ArrayList.readObject(ArrayList.java:593)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:969)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1848)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
    at org.apache.catalina.session.StandardSession.readObject(StandardSession.java:1595)
    at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:1060) 
```

当我对属性文件进行多次运行时读写操作时，我每次在我的 Web 应用程序中都会遇到这个错误，例如 15 次。

我已经完成了像增加tomcat内存空间这样的解决方案。但它根本不起作用。我想要最好的解决方案而不是增加空间。我为tomcat分配了大约1024 kb的内存空间。此解决方案不起作用 `-XX:MaxPermSize=SIZE`

* * *

我想要解决方案，比如如何阻止 JVM 在 PerGen 堆中存储字符串文字。我认为它会避免这种类型的错误。

# android - 当 su 到 ssh 会话中的另一个用户时，Android 常规用户登录会丢失组信息

> ID：14373777
> 
> 赞同：5
> 
> 时间：2013-01-17T07:04:23.073
> 
> 标签：android, ssh, su

我在做什么：

*   我已经在手机上构建了 GNU emacs 以供本机使用。
*   我在手机上以守护程序模式运行 emacs，因此我随时使用 emacsclient 连接到它，以继续处理常规文件、运行进程等。
*   从手机终端登录时，我目前是用户 10157，一切正常：

    $标识

    uid=10157(10157) gid=10157(10157) 组=10157(10157),1015(1015),1023(1023),1028(1028),3003(3003)

*   当我通过 ssh 从 PC 连接到手机时（我在手机上使用 DigiSSHd），它以普通用户 10282 的身份登录，一切正常：

    $标识

    uid=10282 gid=10282 组=1015(1015),1023(1023),1028(1028),3003(3003)

Emacs 运行良好等。但是，这样我无法通过 emacsclient 连接到在用户 10157 下运行的 emacs 进程。这是可取的，因为我不想启动两个 emacs 进程，因为我想继续使用我在用户 10157 下的 emacs 中打开。

所以： `$ su - 10157`

很好，我可以运行 emacs 等。但是，我无法访问网络。

```
$ ping -c1 google.com
You must have internet permissions to use ping.  Aborting.
$ id

uid=10157(10157) gid=10157(10157) groups=10157(10157) 
```

因此，除了其他组之外，我不再属于访问 Internet 所必需的组 3003。

为什么这个组信息会被删除，我该如何解决这个问题，所以当我在 ssh 下 su 作为这个用户时，我可以继续访问网络？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T19:30:28.037

当我运行命令时：

```
busybox --list 
```

我没有在列表中看到 su 。

```
su --help 
```

在帮助文本中显示 Superuser.apk。这意味着**su**由超级用户应用程序提供。

我按照您描述的步骤操作，我可以作为另一个用户使用，并且仍然拥有互联网权限，如下所示。

![终端](../Images/e19f2473df5b8929f40eed939c93cddd.png)

![在此处输入图像描述](../Images/26b5f94901e14e0d462f48fea5b3ba07.png)

我安装了以下应用程序。

*   BusyBox v1.18.5-Stericson
*   超级用户 v3.0.7
*   终端模拟器 v1.0.45
*   SSHDroid v1.9.6

*建议*：我认为问题出在您设备上的 su 上。你可以试试这个。 [https://play.google.com/store/apps/details?id=com.noshufou.android.su](https://play.google.com/store/apps/details?id=com.noshufou.android.su)

如果我只使用 adb shell 而不运行 SSHDroid，我仍然可以作为另一个具有 Internet 权限的用户。

![在此处输入图像描述](../Images/d6a902d994c6ecbd7f2dd16bda7e199b.png)

注意：BusyBox id 命令并不总是显示组信息。

![在此处输入图像描述](../Images/592c6d3f7504b930882db83b70924d4c.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T14:35:40.817

According to the standard man page for `su` (from a linux box)

> When - is used, it must be specified as the last su option. The other forms (-l and --login) do not have this restriction.

Based on that, try

```
$ su 10157 - 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T09:31:19.957

我可能在这里遗漏了一些东西，因为这似乎太明显了，但为什么不只是 'sudo -u 10157' 你的 emacs 程序呢？

您仍然可以访问网络，并且您的 emacs 将正常工作。还是我错过了一些重要的事情？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T16:04:38.730

权限不是可以通过继承的环境变量`su -`。

此外，gid 是[硬编码](https://github.com/cgjones/android-system-core/blob/master/include/private/android_filesystem_config.h)的，它们与每个 APP uid 的关联在安装后无法更改。

**10157**应该是**DigiSSHd应用程序的 uid，因此您可以在更改**[AndroidManifest.xml](https://github.com/ezh/android-component-DigiSSHD/blob/master/AndroidManifest.xml)以要求适当的[权限](http://developer.android.com/reference/android/Manifest.permission.html)后尝试重建它。

你可以[在这里](http://programming4.us/mobile/1290.aspx)和[这里](https://developer.android.com/training/articles/security-tips.html#RequestingPermissions)找到有用的东西。

**BusyBox**也应如此（参见[此处](https://code.google.com/p/busybox-android/source/browse/trunk/app/Free/AndroidManifest.xml)）。

但是，您可以通过此类应用程序启用 NETWORK 访问来打开一些安全漏洞。

# c# - 找不到类型或命名空间“实用程序”

> ID：14373783
> 
> 赞同：3
> 
> 时间：2013-01-17T07:04:39.780
> 
> 标签：c#, .net

我有错误。请帮帮我。

> 找不到类型或命名空间名称“Utilities”（您是否缺少 using 指令或程序集引用？）

我用命名空间 Utililties 创建了一个类。

```
namespace Utilities
{
    public class DatabaseManager
    {
        public string commandText;
        OdbcCommand cmd = new OdbcCommand();
        OdbcTransaction _tran = null;

        public DatabaseManager(String dbConn) {
            OdbcConnection  _conn = new OdbcConnection(dbConn);
            cmd = _conn.CreateCommand();
            _conn.Open();
        }

        public void setParameter(string name, OdbcType type, object value)
        {
            cmd.Parameters.Add(name, type).Value = value;
        }
    }
} 
```

该类工作正常，但在从另一个项目中使用时我也遇到了同样的问题。我想知道发生了什么以及如何解决这个问题。

```
using System;
using System.Data;
using System.Collections.Generic;
using System.Linq;
using System.Data.Odbc;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Drawing;
using Utilities;     // This line have error highlighted in red color 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:07:05.990

您需要使用[using namespace 指令](http://msdn.microsoft.com/en-us/library/aa664766%28v=vs.71%29.aspx)来导入命名空间中的类型，您正在访问类的另一个项目（网站）将具有不同的命名空间。确保通过[添加](http://msdn.microsoft.com/en-us/library/wkze6zky%28v=vs.80%29.aspx)具有 Utilities 命名空间的 dll 的引用来导入。如果包含程序集可用，下面给出的语句将在 Utilities 中导入类型。

```
using Utilities; 
```

**编辑：**如果您在网站内的命名空间实用程序中有类型，那么您尝试将它们放入 app_code 文件夹并在访问它们之前构建网站。

# android - 如何在 Android 中将 Json 数据加载到 WebView？

> ID：14373784
> 
> 赞同：3
> 
> 时间：2013-01-17T07:04:40.390
> 
> 标签：android, json, android-webview

我正在尝试解析 HTML 格式的 JSON 数据。我不明白如何实现它。

我的 JsonObject 如下图所示：

```
{"Content":
{
"PageContent":"<table cellpadding=\"1\" cellspacing=\"0\">\r\n\t<tr><td colspan=\"2\" style=\"font-weight:bold; font-style:italic; font-size:24px; color:Red; text-decoration:blink;\">Contact Us</td></table>"
}
} 
```

我想将`i.e. menuPageContent`HTML 格式的 jsonobject 加载到 WebView。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T07:33:17.103

希望您知道[如何在 Android 中实现 JSON 解析](https://stackoverflow.com/search?q=how%20to%20implement%20JSON%20Parsing%20in%20Android)？

不过，这里有一种`menuPageContent`从上面的 json 获取的方法：

```
String myJSONData = "place your data here";
JSONObject objJSON = new JSONObject(myJSONData);
JSONObject subObj = objJSON.getJSONObject("MenuContent");
String webData = subObj.getString("menuPageContent");

myWebView.loadData(webData, "text/html; charset=UTF-8", null); 
```

阅读有关[WebView](http://developer.android.com/reference/android/webkit/WebView.html)的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:27:39.360

此链接将对您有所帮助

[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

webview有加载数据，你可以使用它

```
Gson gson = new Gson();
MyModel model = gson.fromJson("YOUR JSON DATA HERE", MyModel.class);
webView.loadData(model.menuPageContent, "text/html; charset=UTF-8", null); 
```

# linux - Linux cmd 在 jar 中搜索类文件，而不考虑 jar 路径

> ID：14373788
> 
> 赞同：53
> 
> 时间：2013-01-17T07:05:03.010
> 
> 标签：linux, command

我想在许多 jar 文件中搜索特定的类文件，而不给出每个 jar 文件的位置。

这可以通过一个简单的命令实现吗？

我试过这个命令：

```
grep Hello.class *.jar 
```

哪个没有返回包含该类的 jar 列表。然后我运行命令：

```
grep Hello.class /full/path/of/jar/file/*.jar 
```

哪个确实返回了相关的 jar 文件。有没有更好的办法？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-01-17T08:21:20.367

你在哪里的jar文件？是否有模式可以找到它们的位置？

### 1.它们都在一个目录中吗？

例如，`foo/a/a.jar`and`foo/b/b.jar`都在文件夹下`foo/`，在这种情况下，您可以使用`find`with `grep`：

```
find foo/ -name "*.jar" | xargs grep Hello.class 
```

当然，至少你可以在根目录下搜索它们`/`，但它会很慢。

正如@loganaayahee 所说，您也可以使用 command `locate`。`locate`使用索引搜索文件，这样会更快。但命令应该是：

```
locate "*.jar" | xargs grep Hello.class 
```

由于您要搜索 jar 文件的内容。

### 2\. 路径是否存储在环境变量中？

通常，Java 会将查找 jar 文件的路径存储在类似的环境变量中`CLASS_PATH`，我不知道这是否是您想要的。但是如果你的变量是这样的: `CLASS_PATH=/lib:/usr/lib:/bin`，它使用 a`:`来分隔路径，那么你可以使用这个命令来搜索类：

```
for P in `echo $CLASS_PATH | sed 's/:/ /g'`; do grep Hello.calss $P/*.jar; done 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-10-09T01:37:56.360

大多数解决方案都是直接使用`grep`命令查找类。但是，它不会给你类的包名。此外，如果 jar 被压缩，`grep`将无法正常工作。

此解决方案使用`jar`命令列出文件的内容和`grep`您要查找的类。

它将打印出**带有包名的类**以及**jar 文件名**。

```
find . -type f -name '*.jar' -print0 |  xargs -0 -I '{}' sh -c 'jar tf {} | grep Hello.class &&  echo {}' 
```

您还可以使用您的包名称进行搜索，如下所示：

```
find . -type f -name '*.jar' -print0 |  xargs -0 -I '{}' sh -c 'jar tf {} | grep com/mypackage/Hello.class &&  echo {}' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-12T08:37:12.617

只需转到包含 jar 的目录并插入以下命令：

```
find *.jar | xargs grep className.class 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-17T11:15:07.907

```
 locate *.jar | grep Hello.class.jar 
```

定位命令搜索特定文件的所有路径并显示文件的完整路径。

例子

```
locate *.jar | grep classic.jar

/opt/ltsp/i386/usr/share/firefox/chrome/classic.jar

/opt/ltsp/i386/usr/share/thunderbird/chrome/classic.jar

/root/.wine/drive_c/windows/gecko/0.1.0/wine_gecko/chrome/classic.jar

/usr/lib/firefox-3.0.14/chrome/classic.jar

/usr/lib/firefox-3.5.2/chrome/classic.jar

/usr/lib/xulrunner-1.9.1.2/chrome/classic.jar

/usr/share/firefox/chrome/classic.jar

/usr/share/thunderbird/chrome/classic.jar 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-22T18:39:55.220

**Linux，在许多 jar 中查找类文件的演练。**

转到包含下面的 jar 的目录。

```
eric@dev /home/el/kafka_2.10-0.8.1.1/libs $ ls
blah.txt                             metrics-core-2.2.0.jar
jopt-simple-3.2.jar                  scala-library-2.10.1.jar
kafka_2.10-0.8.1.1-sources.jar       zkclient-0.3.jar
kafka_2.10-0.8.1.1-sources.jar.asc   zookeeper-3.3.4.jar
log4j-1.2.15.jar 
```

我正在寻找为 Producer 类提供的 jar。

了解 for 循环的工作原理：

```
eric@dev /home/el/kafka_2.10-0.8.1.1/libs $ for i in `seq 1 3`; do
> echo $i
> done
1
2
3 
```

了解为什么 find 这有效：

```
eric@dev /home/el/kafka_2.10-0.8.1.1/libs $ find . -name "*.jar"
./slf4j-api-1.7.2.jar
./zookeeper-3.3.4.jar
./kafka_2.10-0.8.1.1-javadoc.jar
./slf4j-1.7.7/osgi-over-slf4j-1.7.7-sources.jar 
```

您可以将下面的所有罐子泵入 for 循环：

```
eric@dev /home/el/kafka_2.10-0.8.1.1/libs $ for i in `find . -name "*.jar"`; do
> echo $i
> done

./slf4j-api-1.7.2.jar
./zookeeper-3.3.4.jar
./kafka_2.10-0.8.1.1-javadoc.jar
./kafka_2.10-0.8.1.1-sources.jar 
```

**现在我们可以对每一个进行操作：**

在每个罐子上做一个`jar tf`并将其塞进 blah.txt 中：

```
for i in `find . -name "*.jar"`; do echo $i; jar tf $i; done > blah.txt 
```

检查 blah.txt，它是所有 jar 中所有类的列表。您可以在该文件中搜索您想要的类，然后查找它之前的 jar，那就是您想要的那个。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-06T04:24:34.670

我已经使用了这个小片段。可能会更慢，但每次都有效。

```
for i in 'find . -type f -name "*.jar"'; do
    jar tvf $i | grep "com.foo.bar.MyClass.clss";
    if [ $? -eq 0 ]; then echo $i; fi;
done 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-06-11T09:48:24.437

使用 deepgrep 和 deepfind。在基于 debian 的系统上，您可以通过以下方式安装它们：

```
sudo apt-get install strigi-utils 
```

这两个命令也搜索嵌套档案。在您的情况下，命令如下所示：

```
find . -name "*.jar" | xargs -I {} deepfind {} | grep Hello.class 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-05-11T10:04:01.967

```
eric@dev /home/el/kafka_2.10-0.8.1.1/libs $ for i in `find . -name "*.jar"`; do
> echo $i
> done

./slf4j-api-1.7.2.jar
./zookeeper-3.3.4.jar
./kafka_2.10-0.8.1.1-javadoc.jar
./kafka_2.10-0.8.1.1-sources.jar 
```

# javascript - 初始化变量时查询 OR 运算符

> ID：14373795
> 
> 赞同：0
> 
> 时间：2013-01-17T07:05:28.647
> 
> 标签：javascript, initialization

让我们假设 modulex 和 moduley 都没有声明。
现在考虑两种情况：

`var modulex = modulesx || {};`// 这行代码工作正常

`moduley = moduley || {};`// 但是这段代码会抛出错误，说模块是未定义的。

同样，

`var modulex = moduley || {};`// 这也会抛出错误，说模块未定义。

请详细说明这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:09:53.993

您不能使用未在“=”左侧声明的变量或作为函数参数。引用未初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:10:12.570

在 JavaScript 中，变量声明是[提升](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)的。这段代码：

```
var a = a || {}; 
```

实际上是这样解释的：

```
var a;
a = a || {}; 
```

在你的第二个例子中，`moduley`只是没有定义，这正是你的错误所说的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T07:11:05.073

由于您的“模块”在使用之前未定义，javascript 编译器会将其称为“未定义”

# android - 如何将文件复制到/data？

> ID：14373799
> 
> 赞同：0
> 
> 时间：2013-01-17T07:05:36.253
> 
> 标签：android

我使用 T2Q210 版本和 android 4 系统。

我尝试将可执行文件 lcd 复制到 sd 卡中，然后复制到 /data 中。但是android中没有复制命令。我试试mv。但它提示设备链接错误。

我尝试 cat lcd > /data/。数据中有lcd，但是file lcd Execute失败。

我的问题是：

1.  如何复制/data中的文件？

2.  我的 lcd 文件 des 是否在 cat 时损坏？

3.  android可以执行我交叉编译的linux可执行文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T06:10:15.653

除非您的设备已植根，否则您没有 /data 文件夹的写入权限。但是我发现我在运行 android 4.3 的三星 S4 上具有**/data/local/tmp的写访问权限。**

所以请尝试：

```
adb -d push your_exe /data/local/tmp

adb -d shell

/data/local/tmp/your_exe 
```

# jquery - IE 提交表单两次

> ID：14373800
> 
> 赞同：5
> 
> 时间：2013-01-17T07:05:37.220
> 
> 标签：jquery, html, double-submit-problem

我在 IE 中遇到了这个问题，有时我的表单提交了两次。我知道单击按钮两次的问题，这不是问题。但就我而言，我只点击一次。我检查了数据库中的记录，有两条记录。

```
<input type="button" value="Approve" name="btn_approve" id="btn_approve">
<input type="button" value="Reject"  name="btn_reject" id="btn_reject">

<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script> 
<script type="text/javascript" src="js/jquery-ui-1.8.20.custom.min.js"></script> 
<script>
$(document).ready(function () {
    $("#btn_approve").click(function () {
        // some validation before submitting the form

        $("#my_form").submit();
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T08:09:27.747

阻止按钮的默认行为：

```
<input type="button" value="Approve" name="btn_approve" id="btn_approve">
<input type="button" value="Reject"  name="btn_reject" id="btn_reject">

<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script> 
<script type="text/javascript" src="js/jquery-ui-1.8.20.custom.min.js"></script> 
<script>
$(document).ready(function () {
    $("#btn_approve").click(function (e) {
        e.preventDefault();
        // some validation before submitting the form

        $("#my_form").submit();
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T07:09:14.553

假设它`#btn_approve`实际上是一个*内部*的提交按钮`#my_form`，您正在通过触发表单提交，`.submit`并且浏览器也在正常提交它。改成：

```
$("#btn_approve").on('click', function (e) {
   $("#my_form").trigger('submit');

   e.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-02T14:58:53.217

我有同样的问题。当我将记录保存到数据库时，我会为其打上时间戳。因此，如果为特定的唯一用户提交了一条记录，在 2 秒内，我只是忽略了重复项。这样我就不需要在客户端检查浏览器类型和兼容性，只需在服务器端分别处理浏览器的问题。

```
 '' Count the number of submissions, for the user, within the 2 seconds.
        objRS.open "select count(*) as C FROM [ADS].[dbo].[VIP_USERS] where userid = '" & Trim(Request("USERID")) & "' and datediff(ss, created, GETDATE()) <= 2", Application("sConn") 
```

# excel - 从 CSV 复制到访问时，避免数字被截断

> ID：14373802
> 
> 赞同：3
> 
> 时间：2013-01-17T07:05:43.073
> 
> 标签：excel, ms-access, csv

我正在使用此代码从 csv 文件复制数据以访问表：

```
str = "insert into tablex (field1, field2, field3) 
select field1, field2, field3
from
 [Text; 
FMT=Delimited; 
HDR=YES; 
CharacterSet=437; 
DATABASE=" & ThisWorkbook.Path & "\data-for-tool-refresh].csvtable.csv;" 
```

但是在粘贴数据后，某些列会被截断，即十进制值会被删除。我已经检查了访问表中的数据类型，它设置为“double”，但值仍然被截断，例如：15.12345 变为 15

有人可以建议我一种方法来获取这些值而不会被截断

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:18:21.173

将外部数据准确导入 Access 的最佳方法是描述外部文件。

这可以通过导入规范（导入向导中的高级选项卡）来完成，宏或 VBA 可以引用该规范。

如果您需要坚持使用 ODBC 文本驱动程序，就像您的问题一样，您需要一个 schema.ini。 [http://office.microsoft.com/en-us/access-help/initializing-the-text-data-source-driver-HP001032166.aspx?CTT=1](http://office.microsoft.com/en-us/access-help/initializing-the-text-data-source-driver-HP001032166.aspx?CTT=1)解释了这一点。一个很大的缺点是规范链接到文件名。

# node.js - 如何在.ejs文件中获取Expreejs的req和res对象

> ID：14373809
> 
> 赞同：8
> 
> 时间：2013-01-17T07:06:07.220
> 
> 标签：node.js, titanium-mobile, express, ejs

我正在尝试将 Express js 与 .ejs 视图一起使用。

我想在任何事件上将我的页面重定向到另一个页面，比如“onCancelEvent”

根据 Express js 文档，我可以使用 res.redirect("/home");

但我无法在我的 ejs 文件中获取 res 对象。

谁能告诉我如何访问 .ejs 文件中的 req 和 res 对象

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T11:13:45.120

### 简答

如果您想访问 EJS 模板中的“req/res”，您可以将 req/res 对象传递给控制器​​函数中的 res.render()（此请求特定的中间件）：

```
res.render(viewName, { req : req, res : res /* other models */}; 
```

或者在一些服务所有请求（包括这个）的中间件中设置 res.locals：

```
res.locals.req = req;
res.locals.res = res; 
```

然后您将能够访问 EJS 中的“req/res”：

```
<% res.redirect("http://www.stackoverflow.com"); %> 
```

### 进一步讨论

但是，你真的要在视图模板中使用 res 来重定向吗？

如果事件向服务器端发起一些请求，它应该在视图之前通过控制器。因此，您必须能够检测到条件并在控制器内发送重定向。

如果事件仅发生在客户端（浏览器端）而不向服务器发送请求，则可以通过客户端 javascript 完成重定向：

```
window.location = "http://www.stackoverflow.com"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-27T23:09:49.293

在我看来：你没有。

最好在调用之前创建确定需要在某些中间件中重定向的逻辑`res.render()`

我的论点是您的 EJS 文件应包含尽可能少的逻辑。循环和条件是可以的，只要它们是有限的。但是所有其他逻辑都应该放在中间件中。

```
function myFn( req, res, next) {
  // Redirect if something has happened
  if (something) {
    res.redirect('someurl');
  }
  // Otherwise move on to the next middleware
  next();
} 
```

或者：

```
function myFn( req, res, next) {
  var options = {
    // Fill this in with your needed options
  };

  // Redirect if something has happened
  if (something) {
    res.redirect('someurl');
  } else {
    // Otherwise render the page
    res.render('myPage', options);
  }
} 
```

# android - 可展开的列表视图未显示

> ID：14373811
> 
> 赞同：3
> 
> 时间：2013-01-17T07:06:12.950
> 
> 标签：android, expandablelistview

代码可以正常工作，没有任何错误或警告，但未显示可扩展列表，这是代码

```
public class MainActivity extends Activity implements  ExpandableListView.OnChildClickListener{
    ArrayList<List> childitems;
    ArrayList groupitems;
    ExpandableListView list;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        setContentView(R.layout.activity_main);
        list=(ExpandableListView)findViewById(R.id.list);
        list.setOnChildClickListener(this);
        addGroupItems();
        addChildItems();
        LayoutInflater inflater=(LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        ExpandableListAdapterImpl adapter=new ExpandableListAdapterImpl(inflater, this, groupitems, childitems);
        list.setAdapter(adapter);
        super.onCreate(savedInstanceState);
    }

    private void addChildItems() {
        ArrayList childlist;
        try {
            childitems=new ArrayList<List>();
            childlist=new ArrayList();
            childlist.add("Pragnani");
            childlist.add("Kinnera");
            childlist.add("Good");
            childitems.add(childlist);

            childlist=new ArrayList();
            childlist.add("Bannu");
            childlist.add("Kinnera");
            childlist.add("Good");
            childitems.add(childlist);

        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    private void addGroupItems() {
        try {
            groupitems=new ArrayList();
            groupitems.add("My Details 1");
            groupitems.add("My Details 2");
        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    @Override
    public boolean onChildClick(ExpandableListView parent, View v, int groupPosition, int childPosition, long id) {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

这是activity_main.xml

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        tools:context=".MainActivity" >

        <ExpandableListView
             android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/list"
             >

        </ExpandableListView>

    </RelativeLayout> 
```

可扩展的列表视图适配器实现

```
public class ExpandableListAdapterImpl extends BaseExpandableListAdapter
{
    LayoutInflater inflatter;
    Context context;
    ArrayList groupitems;
    ArrayList<List> childitems;

    ExpandableListAdapterImpl(LayoutInflater inflater,Activity activity,ArrayList groupitems,ArrayList<List> childitems)
    {
        super();
        this.inflatter=inflater;
        context=activity;
        this.groupitems=groupitems;
        this.childitems=childitems;
    }
    @Override
    public Object getChild(int groupPosition, int childPosition) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getChildId(int groupPosition, int childPosition) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
        ArrayList childtemp=(ArrayList) childitems.get(groupPosition);
        try {
            if(convertView==null)
            {
                convertView=inflatter.inflate(R.layout.childrow, null);
            }
            Button button=(Button)convertView.findViewById(R.id.button1);
            button.setText(childtemp.get(groupPosition).toString());

        } catch (Exception e) {
            e.printStackTrace();
        }
        return convertView;
    }

    @Override
    public int getChildrenCount(int groupPosition) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public Object getGroup(int groupPosition) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public int getGroupCount() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public long getGroupId(int groupPosition) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
    try {
        if(convertView==null)
        {
            convertView=inflatter.inflate(R.layout.grouprow, null);
        }
        CheckedTextView view=(CheckedTextView) convertView.findViewById(R.id.textView1);
        view.setText(groupitems.get(groupPosition).toString());
        view.setChecked(isExpanded);

    } catch (Exception e) {
        e.printStackTrace();
    }
        return convertView;
    }

    @Override
    public boolean hasStableIds() {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

这是 grouprow.xml

```
<CheckedTextView xmlns:tools="http://schemas.android.com/tools"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="60dp"
    android:layout_marginLeft="5dp"
    android:drawableRight="@drawable/plusminus"
    android:gravity="center_vertical"
    android:padding="10dp"
    android:text="@string/hello_world"
    android:textColor="#FFFFFF"
    android:textSelectHandleLeft="@string/hello_world"
    android:textSize="14sp"
    android:textStyle="bold" /> 
```

子行.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:background="@drawable/playersdetails"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="" />

</LinearLayout> 
```

我想知道我在哪里想念...在此先感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T08:59:24.247

是的...... Pragnani 我做到了............

在 ExpandableListAdapterImpl 修改您的代码：对于儿童计数

```
 @Override
public int getChildrenCount(int groupPosition) {
    return ((ArrayList<String>) childitems.get(groupPosition)).size();
} 
```

对于组数：

```
@Override
public int getGroupCount() {
    // TODO Auto-generated method stub
    return groupitems.size();
} 
```

这肯定会奏效......

# ios - numberOfRowsInSection 和 cellForRowAtIndexPath 的 2 个问题

> ID：14373816
> 
> 赞同：0
> 
> 时间：2013-01-17T07:06:21.187
> 
> 标签：ios, uitableview, nsmutablearray

我在 viewcontrolller.m 中设置了一个 NSMutableArray

```
barcodeArray = [[NSMutableArray alloc] init]; 
```

在 viewcontroller.h 中是这样的：

```
@interface SecondViewController : UIViewController <UITableViewDelegate, UITableViewDataSource> {

    NSString *string;
    NSString *barcode;
    NSArray *array;
    NSMutableArray *barcodeArray;

} 
```

比我添加这样的对象：

```
if ([barcodeArray indexOfObject:barcode] != NSNotFound) {
    NSLog(@"%@",barcode);
    NSLog(@"object zit er al in");

}
else {
    [barcodeArray addObject:barcode];
    [_tableView reloadData];
    NSLog(@"%@",barcodeArray);
    NSLog(@"object zit er nog niet in");

} 
```

当我设置 numberOfRowsInSection 返回 [barcodeArray count]; 未调用函数 cellForRowAtIndexPath。就像barcodeArray 计数为空一样。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    return [barcodeArray count];

} 
```

当我将 numberofRowsinSection 设置为返回 1 时；只是为了测试..我得到一个带有（null）的单元格：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSLog(@"aangeroepen");
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    // Set up the cell...

        cell.textLabel.text = [NSString stringWithFormat:@"%@",[barcodeArray objectAtIndex:indexPath.row]];
NSLog(@"%@", cell.textLabel.text);

    return cell;
} 
```

这是我的日志：

```
2013-01-17 07:57:04.139 Scanner[21865:c07] (
    123456
)   **// NSMutableArray when i add the barcode**
2013-01-17 07:57:04.140 Scanner[21865:c07] object zit er nog niet in
2013-01-17 07:57:05.485 Scanner[21865:c07] viewdidload
2013-01-17 07:57:05.488 Scanner[21865:c07] aangeroepen
2013-01-17 07:57:05.489 Scanner[21865:c07] (null) **// NSMutableArray in cell.textLabel.text** 
```

编辑：

```
 cell.textLabel.text = [NSString stringWithFormat:@"%@",[barcodeArray objectAtIndex:indexPath.row]];
NSLog(@"celltext:%@", cell.textLabel.text);
    NSLog(@"barcodearray%@", [barcodeArray objectAtIndex:indexPath.row]);
    NSLog(@"objectatindex:0:%@", [barcodeArray objectAtIndex:0]);
    NSLog(@"indexpath.row:%d", indexPath.row);

Log:

2013-01-17 08:27:28.838 Scanner[21978:c07] celltext:(null)
2013-01-17 08:27:28.839 Scanner[21978:c07] barcodearray(null)
2013-01-17 08:27:28.839 Scanner[21978:c07] objectatindex:0:(null)
2013-01-17 08:27:28.839 Scanner[21978:c07] indexpath.row:0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:14:21.930

我有一种非常强烈的感觉，即您`barcodeArray`的方法中只有 if/else 语句的本地范围。我认为您需要保留`barcodeArray`, 因为它在您的其他方法中为空。

你能`NSLog(@"%d", [barcodeArray count]);`在你的`numberOfRowsInSection`委托方法中做一个并显示打印的内容吗？这将有助于确认您分配和保留数组的方式是否存在问题。如果那是问题......那么在你的头文件中，你会写，

`@property (strong, nonatomic) NSMutableArray* barcodeArray;`在你的实现文件中，你会写``@synthesize barcodeArray = _barcodeArray;`

然后，你会这样做，`self.barcodeArray = [NSMutableArray alloc] init];`

在你使用的任何地方`barcodeArray`，在它之前添加 self 。通过保留对象（使用头文件中的属性...retain = strong），您现在可以访问整个类。`cellForRowAtIndexPath`在你的and`numberOfRows`方法中它不应该再为空了。

编辑：

在你的代码中，你正在做

```
[barcodeArray addObject:barcode]; 
```

这应该是

```
[self.barcodeArray addObject:barcode]; 
```

您的代码中不应该有任何地方`barcodeArray`——您应该只有`self.barcodeArray`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:13:56.270

条形码为 nil 。在条形码中设置一些东西，即；`barCode = @"11225544";`并尝试。

# iphone - 通用应用加载不同的视图

> ID：14373821
> 
> 赞同：0
> 
> 时间：2013-01-17T07:06:46.897
> 
> 标签：iphone, ios, ipad, ios6, ios-universal-app

尝试为每个视图制作具有两组不同的 .h .m 和 .xib 文件的现有应用程序。现在对于单个视图，我只使用一个 .h & .m 文件和两个 .xib 文件。例如。ViewController.h, ViewController.m, ViewController~iphone.xib, ViewController~ipad.xib

问题：在编译时，我的代码中的文件出现错误，我没有为 iphone 和 ipad 设置它们的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:09:24.333

转到 Project -> Targets -> Build Settings -> Targeted Device Family 。将其设置为 iPhone/iPad。

享受编程！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:09:23.257

更好的解决方案是为现有类添加目标设备

# android - 清除通知栏

> ID：14373824
> 
> 赞同：1
> 
> 时间：2013-01-17T07:06:54.430
> 
> 标签：android, android-notifications

我想清除设备中存在的所有通知，以及来自其他应用程序的通知。

我尝试使用：

```
mNotificationManager = (NotificationManager) getSystemService(TestActivity.NOTIFICATION_SERVICE);
    mNotificationManager.cancelAll(); 
```

但没有好处。而在我发送通知的另一个测试中，此代码有效。

是否不允许删除其他应用程序的通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:09:41.903

您不能取消来自其他应用程序的通知 - 这样做是为了防止恶意应用程序隐藏其他应用程序。

# javascript - 如何在下一页（同一页）加载时获取隐藏值？

> ID：14373831
> 
> 赞同：1
> 
> 时间：2013-01-17T07:07:11.653
> 
> 标签：javascript, html

这是我的 HTML 代码

```
<input type="hidden" name="hdnAssignto" id="hdnAssignto" />
<table align="center" width="90%">
  <tr>
    <td>Assign to 
     <select name="Assign_to" id="assign_to" onchange="newQueryAssignTo(this.value)">
        <option value="tom">Tom</option>
        <option value="jay">Jay</option>
        <option value="jack">Jack</option>         
     </select></td>    
  </tr>
</table> 
```

Javascript代码

```
<script type="text/javascript">
      alert(document.getElementById('hdnAssignto').value);
      var selAssignTo = document.getElementById('assign_to');
    selAssignTo.value = document.getElementById('hdnAssignto');
function newQueryAssignTo(userName)
{
    document.getElementById('hdnAssignto').value = userName;    
}
</script> 
```

我想永久设置下拉值。第一次如果我选择“Jay”，我会将这个值存储到隐藏字段中，下次页面加载时它想从这个隐藏字段中获取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:14:51.343

您可以使用 javascript 在 cookie 中设置和获取值。

```
function setCookie(c_name,value,exdays)
{
var exdate=new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
document.cookie=c_name + "=" + c_value;
}

function getCookie(c_name)
{
var i,x,y,ARRcookies=document.cookie.split(";");
for (i=0;i<ARRcookies.length;i++)
{
x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
x=x.replace(/^\s+|\s+$/g,"");
if (x==c_name)
{
return unescape(y);
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:47:37.627

本地存储甚至比 cookie 更容易——它就像一个对象/数组一样工作。例如：

```
function newQueryAssignTo(userName)
{
    if(! localStorage["userName"]){
        localStorage["userName"] = userName;
    }

    document.getElementById('hdnAssignto').value = localStorage["userName"];    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T07:35:27.847

试试这个为你的选择：即使在刷新页面后你也会得到选择的值

```
 <html>
            <head>
                <title></title>
            <script src="http://code.jquery.com/jquery-1.9.0.min.js"></script>
                <script>
            $(function() {
                if (localStorage.getItem('form_frame')) {
                    $("#form_frame option").eq(localStorage.getItem('form_frame')).prop('selected', true);
                }

                $("#form_frame").on('change', function() {
                    localStorage.setItem('form_frame', $('option:selected', this).index());
                });
            });
                </script>
            </head>
            <body>
            <select id="form_frame" name="frame" onchange="getData(this);"/>
               <option value="data1" selected="selected">Data 1</option>
               <option value="data2">Data 2</option>
            </select>

            </body>
            </html> 
```

# wpf - 表达式混合初学者

> ID：14373834
> 
> 赞同：2
> 
> 时间：2013-01-17T07:07:23.493
> 
> 标签：wpf, silverlight, windows-phone-7, xaml, expression-blend

我是表情混合的新手。我在谷歌上搜索了很多次，以获得一些针对初学者的表情混合教程。但是我没有得到任何初学者可以理解EB基础知识的简单教程。我真的需要研究它，以便为正在开发的 Windows Phone 应用程序制作更好的 UI。

谁能建议我一些初学者的表情混合教程链接。?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:36:18.320

表达式混合用于自定义控件、创建矢量图像以及动画。您可以在您的试管中找到有关所有内容的文章。例如，[这个](http://www.youtube.com/watch?v=fbNQOzFl1u8)剪辑可以告诉你关于初学者级别的控制模板编辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T12:03:48.693

我会推荐这个：

[http://www.microsoft.com/design/toolbox/school/](http://www.microsoft.com/design/toolbox/school/)

来自 MS 的精彩课程。

# javascript - 如何从java脚本调用dll

> ID：14373837
> 
> 赞同：0
> 
> 时间：2013-01-17T07:07:34.133
> 
> 标签：javascript, activex

任何人都可以帮我如何从javascript调用dll函数。使用 activexobject 时出现错误“自动化服务器无法创建对象”。这是我的代码

```
var jMyAcctId = document.all.RefNum.value;
var jMyAcctType = document.all.TrxType.value;
var NewObject = new ActiveXObject("HDMFCDV.cdv");
if (NewObject.IsValidID(jMyAcctId,jMyAcctType) == true)
{
    document.all.RefNumError.innerText = "";
    CnvUp(sel);
    document.all.CustFName.disabled = false;
    document.all.CustFName.focus();
} 
```

提前坦纳克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:56:07.453

Your JavaScript code is good. I suspect the problem is with the HDMFCDV.cdv ActiveX - either they way you implemented it or they way you registered it.

I'm not familiar with HDMFCDV object. Is that a proprietary object you implemented? Here are few tips to troubleshoot:

1.  Make sure your object is registered (did you run regsrv32?)
2.  Verify HDMFCDF.cdv is in the registry: HKCR\HDMFCDF.cdv
3.  Make sure there is a CLSID
4.  Make sure the class ID is in the registry, and that it points to the DLL implementing your object. HKCR\CLSID{your-guide}\InprocServer32 (REG_SZ)
5.  A very common lookout: have you implemented IObjectSafety. Without this interface, and without this interface returning that it is safe for untrusted caller, IE will refuse to instantiate this object

# asp.net-mvc - ASP.NET MVC - 从下拉列表中获取选定的值作为模型

> ID：14373838
> 
> 赞同：2
> 
> 时间：2013-01-17T07:07:37.067
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-viewmodel

我想知道是否有办法从下拉列表选择中弹出模型。例如：

我的视图绑定到模型 Employee 并且 Employee 类有一个属性“Department”，它是另一个具有自己属性的类：

我的员工*视图模型*：

```
public class Employee
{
public string EmployeeName{get;set;}
public Department EmployeeDepartment{get;set;}
public List<Department> AvailableDepartments {get;set;}
} 
```

部门型号：

```
public class Department
{
public string Code{get;set}
public string Name{get;set;}
public string Description{get;set;}
} 
```

在我输入员工详细信息的视图中，我使用下拉菜单让用户选择员工部门。

```
@Html.DropDownListFor(
m => m.EmployeeDepartment, 
new SelectList(@Model.AvailableDepartments , "Code", "Name")
) 
```

当我提交表单时，我在控制器处获得了一个“员工类”的实例，但显然 EmployeeDepartment 属性将为空。

我知道，如果我添加一个字符串属性“EmployeeDepartmentCode”并将其映射到下拉列表，它将起作用。但是有什么方法可以填充 Department 模型属性而不是使用字符串属性？- 因为此视图模型也用于显示员工部门名称的网格中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:16:56.750

好吧，如果您的`EmployeeDepartment`类型如下所示：

```
public class EmployeeDepartment {
  public int ID { get; set; }
  // + other properties
} 
```

然后，您可以将剃刀代码更改为：

```
@Html.DropDownListFor(
  m => m.EmployeeDepartment.ID, 
  new SelectList(@Model.AvailableDepartments , "Code", "Name")
) 
```

`EmployeeDepartment`然后，当您再次收到模型时，模型将包含一个带有 ID 集的非空值。

但是，我认为您是在问是否可以让模型绑定器自动从数据库中获取其余记录并填写其余数据？如果是这样，这是一个更复杂的问题 - 但您可以轻松地在控制器中修补它。

# c# - 递归自连接

> ID：14373843
> 
> 赞同：2
> 
> 时间：2013-01-17T07:07:50.700
> 
> 标签：c#, linq-to-sql

我有如下表。我需要为提供的用户 ID 获取所有经理 ID。

```
userid managerid
10     1
9      10
6      9
2      6
4      1 
```

如果我将 2 传递给我的方法，我需要得到 1、10、9 和 6。我编写了以下查询，它将仅返回第一级父级。即它只会返回 6 和 9。

```
public List<int?> mymethod (int userId){

return (from e in mycontext.EmployeeManagers
                     join e1 in m_context.EmployeeManagers
                        on e.UserId equals e1.ManagerId
                    where e1.UserId == userId
                     select e1.ManagerId).AsQueryable().ToList()
} 
```

如何修改查询以返回所有经理雇佣关系？

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:19:58.720

您不能在 sinqle LINQ 表达式中执行此操作。您必须循环运行它。

更好的选择是在数据库中执行此操作，然后将结果返回给 LINQ。

看：

*   [Linq 中的分层数据 - 选项和性能](https://stackoverflow.com/questions/202912/hierarchical-data-in-linq-options-and-performance)
*   [从自引用数据库表中填充递归数据结构](https://stackoverflow.com/questions/1976325/fill-a-recursive-data-structure-from-a-self-referential-database-table)
*   [Linq-to-Sql：递归获取孩子](https://stackoverflow.com/questions/535436/linq-to-sql-recursively-get-children)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:49:40.933

我会简单地运行一个像这样的短循环（抱歉大写无效，从头开始编码）：

```
public List<Int> GetAllManagers(int userID)
{
  var result = new List<int>();
  int index = 0;
  result.add(userID); // start with user (it will be removed later)
  while (index < result.count)
  {
    var moreData = from e in mycontext.EmployeeManagers
                    where e.UserId == result[index];
                     select e.ManagerId;
    foreach (int id in moreData)
      if (result.indexOf(id)==-1)
        result.add(id);
    index++;
  }
  result.delete(0);
  return result;
} 
```

或递归地

```
private void AddUniqueIds (List<int> elements, ref List<int> list)
{
  foreach (int id in elements)
    if (list.indexOf(id)==-1)
      list.add(id);
}
public List<int> GetAllManagers(int userID)
{
  var result = new List<int>();
  var moreData = from e in mycontext.EmployeeManagers
                 where e.UserId == result[index];
                 select e.ManagerId;

  foreach (int id in moreData)
    AddUniqueIds(result, GetAllManagers(id));

  return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T07:22:14.957

你需要使用不同的模式。

让我们看看你得到你的查询。

```
var query = myContext.EmployeeManagers 
```

然后，你可以`join`随心所欲

```
for(int = 0; i < 5; i++)
{
    query = query.Join( ... ..., i, ... ); // Can't recall all
                                           // the parameters right now.
} 
```

然后执行它：

```
var result = query.ToList(); 
```

# java - 使用Maven修改tomcat部署的启动脚本

> ID：14373846
> 
> 赞同：0
> 
> 时间：2013-01-17T07:07:58.173
> 
> 标签：java, maven, tomcat, catalina, java-opts

我正在使用一个分析工具，它在我启动 Tomcat 时加载，应用程序 war 文件放置在 webapps 目录中。因此，一旦我运行启动，我的课程就会被检测到，并且一切正常。

但为此，我将生成的war文件作为maven安装的一部分（它下载tomcat并在其中部署war文件），并将其放置在我手动下载的另一个tomcat中。然后我需要在 catalin.bat 文件中进行一些编辑，将 JAVA_OPTS 属性设置为 javaagent 以便它在启动时启动。

我想做的是，设置工具并将其与 maven 集成，以便在全新安装时，对类进行检测并且分析工具开始运行。我相信我们可以在 pom.xml 中做一些配置更改来实现这一点？在这方面的任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:30:55.150

这只是您需要的一部分，但是您应该以不同的方式配置您的 tomcat - 也许这可以充分简化您的任务，以便您可以自己解决其余的问题：

您不需要更新`catalina.bat`- 而是在同一目录中创建一个名为的文件`setenv.bat`：它不包含在 tomcat 中，但如果它在那里，它将在 tomcat 的启动/关闭过程中被考虑在内。

关于启动/关闭：您在此文件中设置的 JAVA_OPTS 将用于启动和关闭（当 tomcat 关闭时会启动一个 java 进程，运行一段时间）。如果您有大量内存需求，分配 JMX 端口等，这些将适用于两个进程，因此可能会发生冲突。您宁愿设置 CATALINA_OPTS - 这仅用于启动 tomcat，而不是用于关闭它。

所以，setenv.bat 的典型内容是

```
SET CATALINA_OPTS="-DyourSettings -DwhateverYouLike" 
```

而且，顺便说一句，这同样适用`setenv.sh`于其他平台

# c# - 媒体结束后如何在windows窗体上显示倒计时

> ID：14373849
> 
> 赞同：0
> 
> 时间：2013-01-17T07:08:02.743
> 
> 标签：c#

我正在使用 listBox 在表单上使用 axWindowsMediaPlayer 播放媒体文件，在该表单中，下一个媒体在我使用了计时器的时间间隔后播放。现在我想在屏幕上显示该时间间隔的倒数计时器。如何做this..plz help.我如何在媒体端使用计时器的代码是：

```
 System.Timers.Timer _timer = new System.Timers.Timer();
    object _locker = new object();
     Player.PlayStateChange += Player_PlayStateChange;

        _timer.Elapsed += _timer_Elapsed;
        _timer.Interval = 3000;
    void _timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {

        _timer.Stop();
        lock (_locker)
        {
            this.Invoke((MethodInvoker)delegate
        {
            if (listBox2.SelectedIndex + 1 < listBox2.Items.Count)
            {

                listBox2.SelectedItem = listBox2.Items[listBox2.SelectedIndex + 1];
            }
        });
        }
    }

    void Player_PlayStateChange(object sender, AxWMPLib._WMPOCXEvents_PlayStateChangeEvent e)
    {
        if ((WMPLib.WMPPlayState)e.newState == WMPLib.WMPPlayState.wmppsMediaEnded)
        {
               _timer.Start();

        }
        else if ((WMPLib.WMPPlayState)e.newState == WMPLib.WMPPlayState.wmppsReady)
        {

                Player.Ctlcontrols.play();

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:13:14.997

只需在 _timer_Elapsed() 中放入一个计数器

```
private int m_counter=0; 
```

将每个媒体设为 0（让我们在媒体开始后说）

并创建一个标签来显示 counter.ToString()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:13:44.973

```
 private  int totalwaittime = 5;
    private  int counter = 0;
    private static void OnTimer(object sender, ElapsedEventArgs elapsedEventArgs)
    {
        counter++;
        Label1.text = String.Format("Time Left : {0}", totalwaittime - counter);
        if (totalwaittime - counter == 0)
        {
            timer.Enabled = false;
            //play next file
        }
    }

    void Player_PlayStateChange(object sender, AxWMPLib._WMPOCXEvents_PlayStateChangeEvent e)
    {
        if ((WMPLib.WMPPlayState)e.newState == WMPLib.WMPPlayState.wmppsMediaEnded)
        {
            counter = 0;
            timer.Enabled = true;

        }
        else if ((WMPLib.WMPPlayState)e.newState == WMPLib.WMPPlayState.wmppsReady)
        {

            Player.Ctlcontrols.play();

        }
    } 
```

# ios - 我想知道为什么我在iOS中无法读取声音字体文件

> ID：14373850
> 
> 赞同：-1
> 
> 时间：2013-01-17T07:08:10.543
> 
> 标签：ios, jsf-2

代码是：

```
NSString *presetURLPath = [[NSBundle mainBundle] pathForResource:@"FluidR3_GM" ofType:@"SF2"];
NSLog(@"Path: %@",presetURLPath); 
```

该`.sf2`文件在我的项目中退出，但输出为： `Path: null.`

什么原因？？谁能解释一下！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:18:31.693

1.  检查您是否正确编写了名称和扩展名，包括大小写 - 设备上的路径区分大小写。
2.  检查此文件是否已添加到“复制资源”构建阶段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:30:09.317

尝试这个

```
NSString *resources = [[NSBundle mainBundle] resourcePath];
NSURL *audioPath = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/%@",resources,@"FluidR3_GM.SF2"]]; 
```

你需要通过`NSURL`

# selenium - 通过 Selenium java 中的链接定位 webelement

> ID：14373855
> 
> 赞同：0
> 
> 时间：2013-01-17T07:08:37.360
> 
> 标签：selenium

如何对某个链接旁边的 Selenium WebElement 进行本地化？

我有这种源代码

```
 <a href="/url.com" >
Link text
 </a>
<ul>
<li class="dir">THIS LIST ELEMENT I WANT TO LOCATE
  <ul>
    <li> 
```

如果网址在定位中不是必需的，请随时告诉我更好的方法！我没有计算元素的运气，因为它们的数量会根据鼠标移动而变化。我使用 Selenium Java。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:17:52.990

使用 xpath 可以定位。

```
"//a[text()='Link text']/following-sibling::ul/li[@class='dir']" 
```

我假设 a 和 ul 标签是兄弟姐妹。如果这些不是兄弟姐妹，那么您也可以通过稍微修改上面的 xpath 来实现。

```
"//a[text()='Link text']/../following-sibling::ul/li[@class='dir']" 
```

# android - 如何使按钮像菜单一样？

> ID：14373856
> 
> 赞同：0
> 
> 时间：2013-01-17T07:08:38.783
> 
> 标签：android, android-button, android-menu

我正在开发一个应该在 800x480 平板电脑上运行的简单应用程序。当前：
[][][][]
[][][][]
OOO

这些都是按钮，它们按预期工作。但是，我需要将菜单项添加到底部按钮。单击时，应弹出菜单项。

- 我可以创建一个菜单并将其放在屏幕底部以替换这些按钮吗？如果是这样，你能举个例子吗，因为我找不到。

-或者，我可以向这些按钮添加菜单项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:18:48.077

如果我以正确的方式理解您，您想要的是一个 OptionsMenu。我以后可以给你举个例子，我不在家。但是现在，看看这个例子。如果您遵循此操作，则不需要底部的那些按钮。

[http://www.edumobile.org/android/android-beginner-tutorials/options-menu/](http://android-er.blogspot.de/2012/03/example-of-using-popupmenu.html)

如果不清楚，请告诉我，晚上我试着给你举个例子……

## 编辑

对于自定义菜单，您可以使用 PopUpMenu。我暂时没有尝试过，但我认为这是一个很好的解决方案

[http://android-er.blogspot.de/2012/03/example-of-using-popupmenu.html](http://android-er.blogspot.de/2012/03/example-of-using-popupmenu.html)

# java - 将 java 代码转换为 android 应用程序

> ID：14373857
> 
> 赞同：0
> 
> 时间：2013-01-17T07:08:41.353
> 
> 标签：java, android

我在 Indivo 服务器中有一个用于 oAuth 登录的 java 代码。当我从终端运行它时它运行良好。现在，我想将它转换为 Android 应用程序，做几乎相同的事情。为了将此原始 Java 代码转换为正在运行的 Android 应用程序，我需要进行哪些必要的更改？

当我复制相同的代码并导入必要的包时，它会在类定义和主声明中出现错误。它说“主要方法不能声明为静态”。

这是java代码：

公共类 ChromeTest {

```
 private Map<String, Object> options = null;
                private String recordId = null;
                private String recordId_second = null;
                private String appId = "chrome@apps.indivo.org";
                private String problemApp = "problems@apps.indivo.org";
                private Properties properties = null;
                private String sessionToken = null;
                private String sessionTokenSecret = null;
                private String sessionToken_second = null;
                private String sessionTokenSecret_second = null;
                private String pagingOrderingQuery = null;
                private String extrnlRandom = null;

                private XPath xpath = null;

                private DatatypeFactory dtf = null;
                private XMLGregorianCalendar gregCal = null;

                private String demographicsDoc =
            "<Demographics xmlns=\"Demographics\">"
            + "<dateOfBirth>2009-11-02T00:40:30+00:00</dateOfBirth>"
            + "</Demographics>";

                private String contactDoc =
            "<Contact  xmlns=\"Contact\">"
            + "<name><fullname>nameForTestDocument</fullname><givenName/><familyName/></name>"
            + "<email type=\"work\">nathan.finstein@childrens.harvard.edu</email>"
            + "<address type=\"home\"><streetAddress>1 one way</streetAddress>"
            + "<postalCode>12345</postalCode>"
            + "<locality>ames</locality>"
            + "<region>Colorado</region>"
            + "<country>USA</country></address>"
            + "<location type=\"home\"><latitude>90</latitude><longitude>90</longitude></location>"
            + "</Contact>";

                String testDocExtrnl = "<Testing123>strictly for testing - external from chrome</Testing123>";
                String testDocStatus = "<Testing123>strictly for testing Status from chrome</Testing123>";
                String testDocRelate_A = "<Testing123>strictly for testing Relate from chrome A</Testing123>";
                String testDocRelate_B = "<Testing123>strictly for testing Relate from chrome B</Testing123>";
                String testDocAppSpecific = "<Testing123>strictly for testing - app specific from chrome</Testing123>";
                String testDocAppSpecificR = "<Testing123>strictly for testing - app specific record specific from chrome</Testing123>";
                String testDoc = "<Testing123>strictly for testing - chrome created no externalID</Testing123>";
                //String testDocRplc = "<Testing123>strictly for testing - replaced by Chrome</Testing123>";
                String testDocEstablished = "<Testing123>strictly for testing - Have Chrome try to delete later</Testing123>";
                String testDocToDelete = "<Testing123>strictly for testing - Chrome should be able to delete this if done soon</Testing123>";
                String testDocToReplace = "<Testing123>strictly for testing - Chrome will replace this version</Testing123>";
                String testDocReplacement = "<Testing123>strictly for testing - Chrome will use this to replace the other</Testing123>";
                String testDocToShare = "<Testing123>share this</Testing123>";

                String allergyDoc =
            "<Allergy xmlns=\"http://indivo.org/vocab/xml/documents#\">\n" +
            "  <dateDiagnosed>2009-05-16</dateDiagnosed>\n" +
            "  <diagnosedBy>Children's Hospital Boston</diagnosedBy>\n" +
            "  <allergen>\n" +
            "    <type type=\"http://codes.indivo.org/codes/allergentypes/\" value=\"drugs\">Drugs</type>\n" +
            "    <name type=\"http://codes.indivo.org/codes/allergens/\" value=\"penicillin\">Penicillin</name>\n" +
            "  </allergen>\n\n" +
            "  <reaction>blue rash</reaction>\n" +
            "  <specifics>this only happens on weekends</specifics>\n" +
            "</Allergy>";

                String medicationDoc =
            "<Medication xmlns=\"http://indivo.org/vocab/xml/documents#\">" +
              "<dateStarted>2009-02-05</dateStarted>" +
              "<name type=\"http://indivo.org/codes/meds#\" abbrev=\"c2i\" value=\"cox2-inhibitor\">COX2 Inhibitor</name>" +
              "<brandName type=\"http://indivo.org/codes/meds#\" abbrev=\"vioxx\" value=\"Vioxx\">Vioxx</brandName>" +
              "<dose><value>3</value><unit type=\"http://indivo.org/codes/units#\" value=\"pills\" abbrev=\"p\">pills</unit></dose>" +
              "<route type=\"http://indivo.org/codes/routes#\" value=\"PO\">By Mouth</route>" +
              "<strength><value>100</value><unit type=\"http://indivo.org/codes/units#\" value=\"mg\" abbrev=\"mg\">milligram</unit></strength>" +
              "<frequency type=\"http://indivo.org/codes/frequency#\" value=\"daily\">daily</frequency>" +
              "</Medication>";

                /**
                 * @param args the command line arguments
                 */
                public static void main(String[] args) throws
                IndivoClientException, IOException, XPathExpressionException, javax.xml.datatype.DatatypeConfigurationException{
                    // TODO code application logic here
                    ChromeTest instance = new ChromeTest();

                    Properties props = new Properties();
                    instance.properties = props;

                    instance.xpath = XPathFactory.newInstance().newXPath();
                    instance.extrnlRandom = Integer.toString(new Random().nextInt(1000000));

                    instance.dtf = DatatypeFactory.newInstance();

                    instance.doTest();
                }

                private void reportKnownError(Exception ice) {
                    String errId = Integer.toString(new Random().nextInt(1000000));
                    System.err.println("\n\nerror id: " + errId);

                    ice.printStackTrace();
                    System.err.println("==============================================\n");
                    System.out.println("Known exception thrown, stack trace in error stream, see: " + errId + "\n");

                }

                private void doTest() throws IndivoClientException, XPathExpressionException, UnsupportedEncodingException {
                    Rest chrome = new Rest("chrome", "chrome", "http://localhost:8080", null);
                    String accountId = "johnsmith@example.org";
                    String username = "jsmith";
                    String password = "password.example";

                    String accountId_second = "johnsmith@example.org";
                    String username_second = "jsmith";
                    String password_second = "password.example";

                    recordId = "781a64e7-fc04-4bbc-8804-7480b0b337dc";
                    recordId_second = "781a64e7-fc04-4bbc-8804-7480b0b337dc";

                    String str = "username="+ username+ "&password="+password ;
                    System.out.println("testing -- oauth_internal_session_createPOST");
                    Map<String,String> testResultForm  =(Map<String,String>) chrome.oauth_internal_session_createPOST(str, options);
                    System.out.println("oauth_internal_session_createPOST  once");
                    System.out.println(Utils.printForm(testResultForm) + "\n\n");
                    sessionToken = testResultForm.get("oauth_token");
                    sessionTokenSecret = testResultForm.get("oauth_token_secret");
                    String str1 = "username="+ username_second+ "&password="+password_second ;

                    testResultForm  =(Map<String,String>)chrome.oauth_internal_session_createPOST(str1, options);

                    System.out.println(Utils.printForm(testResultForm) + "\n\n");
                    sessionToken_second = testResultForm.get("oauth_token");
                    sessionTokenSecret_second = testResultForm.get("oauth_token_secret");

                    Document testResultDoc = null;
                    System.out.println("testing -- records_X_documents_X_versions_GET");

                    System.out.println("testing -- records_X_documents_GET");
                    String xmlDateTime = null;
                    gregCal = dtf.newXMLGregorianCalendar(new GregorianCalendar());
                    xmlDateTime = gregCal.toXMLFormat();

                    String hba1cDoc = "<HBA1C xmlns=\"http://indivo.org/vocab#\" value=\"6.3\""
                        + " unit=\"mg/dL\" datetime=\"" + xmlDateTime + "\" />"; 
                    System.out.println("testing -- records_X_documents_POST");
                    testResultDoc = (Document) chrome.records_X_documents_POST(
                            recordId, sessionToken, sessionTokenSecret, hba1cDoc, "application/xml", options);
                    System.out.println(Utils.domToString(testResultDoc) + "\n\n");
                    System.out.println("\n--------------------------------------\n\n");
                    System.out.println("testing -- records_X_documents_POST");
                    testResultDoc = (Document) chrome.records_X_documents_POST(
                            recordId, sessionToken, sessionTokenSecret,
                            hba1cDoc.replace("\"6.3\"", "\"7.4\""), "application/xml", options);
                    System.out.println(Utils.domToString(testResultDoc) + "\n\n");
                    System.out.println("\n--------------------------------------\n\n");

                    testResultDoc = (Document) chrome.records_X_documents_POST(recordId, sessionToken, sessionTokenSecret,
                            medicationDoc,  "application/xml", options);

                    System.out.println("testing -- records_X_reports_minimal_X_GET");
                    testResultDoc = (Document) chrome.records_X_reports_minimal_X_GET(
                            pagingOrderingQuery, recordId, "medications", sessionToken, sessionTokenSecret, options);
                    System.out.println(Utils.domToString(testResultDoc) + "\n\n");
                    System.out.println("\n==================================================\n\n");

                    System.out.println("testing -- accounts_XGET");
                    testResultDoc = (Document) chrome.accounts_XGET(accountId, sessionToken, sessionTokenSecret, options);
                    System.out.println(Utils.domToString(testResultDoc) + "\n\n");
                    System.out.println("\n==================================================\n\n");

                    System.out.println("testing -- accounts_X_infoSetPOST");
                    testResultDoc = (Document) chrome.accounts_X_infoSetPOST(
                            "new full_name nathan.finstein@childrens.harvard.edu", accountId, sessionToken, sessionTokenSecret, options);
                    System.out.println(Utils.domToString(testResultDoc) + "\n\n");
                    System.out.println("\n==================================================\n\n");

                    System.out.println("testing -- accounts_X_authsystems_password_setUsernamePOST");
                    testResultDoc = (Document) chrome.accounts_X_authsystems_password_setUsernamePOST(username + "_new", accountId, sessionToken, sessionTokenSecret, options);
                    System.out.println(Utils.domToString(testResultDoc) + "\n\n");
                    System.out.println("\n------------------------------------------------\n\n");

                    // now set it back right away so we don't break anything
                    System.out.println("testing -- accounts_X_authsystems_password_setUsernamePOST");
                    testResultDoc = (Document) chrome.accounts_X_authsystems_password_setUsernamePOST(username, accountId, sessionToken, sessionTokenSecret, options);
                    System.out.println(Utils.domToString(testResultDoc) + "\n\n");
                    System.out.println("\n------------------------------------------------\n\n");

                    String str2 = "username="+ username+ "&password="+password ;
                    testResultForm  =(Map<String,String>)chrome.oauth_internal_session_createPOST(str2, options);
                    System.out.println("oauth_internal_session_createPOST  twice");
                    System.out.println(Utils.printForm(testResultForm) + "\n\n");
                    sessionToken = testResultForm.get("oauth_token");
                    sessionTokenSecret = testResultForm.get("oauth_token_secret");
                    System.out.println("\n==================================================\n\n");

                    System.out.println("testing -- accounts_X_authsystems_password_changePOST");
                    testResultDoc = (Document) chrome.accounts_X_authsystems_password_changePOST(password, 
                            password + "_new", accountId, sessionToken, options);
                    System.out.println(Utils.domToString(testResultDoc) + "\n\n");
                    System.out.println("\n--------------------------------------------------\n\n");

                    // now change it right back
                    System.out.println("testing -- accounts_X_authsystems_password_changePOST");
                    testResultDoc = (Document) chrome.accounts_X_authsystems_password_changePOST(password + "_new", password, accountId, sessionToken, options);
                    System.out.println(Utils.domToString(testResultDoc) + "\n\n");
                    System.out.println("\n==================================================\n\n");

                    // now set it back to what it was
                    System.out.println("testing -- accounts_X_authsystems_password_setUsernamePOST");
                    try {
                    System.out.println("testing -- records_X_apps_XDELETE");
                    testResultDoc = (Document) chrome.records_X_apps_XDELETE(
                            recordId_second, problemApp, sessionToken_second, sessionTokenSecret_second, options);
                    System.out.println(Utils.domToString(testResultDoc) + "\n\n");
                    System.out.println("\n==================================================\n\n");
                    } catch (IndivoClientException ice) {
                        reportKnownError(ice);
                    }

                    if (false) {  // skip for now, test with OAuth dance
                    System.out.println("testing -- oauth_internal_request_tokens_X_claimPOST");
                    testResultDoc = (Document) chrome.oauth_internal_request_tokens_X_claimPOST("requestToken", sessionToken, sessionTokenSecret, options);
                    System.out.println(Utils.domToString(testResultDoc) + "\n\n");
                    System.out.println("\n==================================================\n\n");

                    System.out.println("testing -- oauth_internal_request_tokens_X_infoGET");
                    testResultDoc = (Document) chrome.oauth_internal_request_tokens_X_infoGET("requestToken", sessionToken, sessionTokenSecret, options);
                    System.out.println(Utils.domToString(testResultDoc) + "\n\n");
                    System.out.println("\n==================================================\n\n");

                    System.out.println("testing -- oauth_internal_request_tokens_X_approvePOST");
                    testResultForm = (Map<String,String>) chrome.oauth_internal_request_tokens_X_approvePOST(recordId, "requestToken",
                            sessionToken, sessionTokenSecret, options);
                    System.out.println(Utils.printForm(testResultForm) + "\n\n");
                    System.out.println("\n==================================================\n\n");

                    System.out.println("testing -- oauth_internal_surlVerifyGET");
                    testResultDoc = (Document) chrome.oauth_internal_surlVerifyGET("/widgets/WidgetName?param1=foo&param2=bar&surl_timestamp=<TIMESTAMP>&surl_token=<TOKEN>&surl_sig=<SIGNATURE>", sessionToken, sessionTokenSecret, options);
                    System.out.println(Utils.domToString(testResultDoc) + "\n\n");
                    System.out.println("\n==================================================\n\n");
                    }
                }   

                private List<String> listAllDocs(String recId, Rest chrome)
                        throws IndivoClientException, XPathExpressionException {
                    List<String> retVal = new ArrayList<String>();

                    Document docsDoc = (Document) chrome.records_X_documents_GET(pagingOrderingQuery, recordId, sessionToken, sessionTokenSecret, options);

                    NodeList allDocs = (NodeList) xpath.evaluate("/Documents/Document/@id", docsDoc, XPathConstants.NODESET);
                    System.out.println("allDocs.getLength(): " + allDocs.getLength());

                    for (int ii = 0; ii < allDocs.getLength(); ii++) {
                        String idStr = ((Attr)allDocs.item(ii)).getValue();
                        retVal.add(idStr);
                    }
                    return retVal;
                }

                private void shareAllDocs(String recId, List<String> docsList, String carenetId, Rest chrome)
                        throws IndivoClientException {

                    for (int ii = 0; ii < docsList.size(); ii++) {
                        String idStr = docsList.get(ii);
                        System.out.println("idStr: " + idStr);

                        System.out.println("testing -- records_X_documents_X_carenets_XPUT");
                        Document resltDoc = (Document) chrome.records_X_documents_X_carenets_XPUT(
                                recordId, idStr, carenetId, sessionToken, sessionTokenSecret, options);
                        System.out.println("sharing -- record:" + recordId + " doc:" + idStr + "   " + Utils.domToString(resltDoc) + "\n\n");
                    }

                    System.out.println("\n+===================++++++++++++++++++\n\n");
                }
            }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T07:12:11.233

首先，您需要一个 Android 组件来启动您的类 - 它可以是 Activity、Service 或 Application。

其次，您需要使用您的代码启动一个线程，因为网络调用不能在 UI 线程上执行。

[从这里](http://developer.android.com/guide/components/fundamentals.html)开始 android 开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:13:19.640

您应该为您的 java 代码创建库项目，然后将其用于 Android 应用程序并阅读[http://developer.android.com/](http://developer.android.com/)以使用 Android。

# c - 当将数据报发送到无法到达的目的地时，sendto() 对 IPv4 和 IPv6 有不同的行为

> ID：14373858
> 
> 赞同：2
> 
> 时间：2013-01-17T07:08:42.230
> 
> 标签：c, sockets, network-programming, udp

当我使用`sendto()`将数据报发送到不存在的目的地时，我发现 IPv4 和 IPv6 的结果不同。

*   IPv4：它只返回一个正值。

*   IPv6：返回`-1`并`errno`设置为`ENETUNREACH`

有谁知道为什么会这样？

# 这是我的代码：

```
int main (int argc, char *argv[])
{
    // Usage: program [version]
    int version = argc == 1 ? 4 : atoi(argv[1]);

    int fd = socket (AF_INET6, SOCK_DGRAM, IPPROTO_UDP);
    if (fd == -1)
        ErrAndExit ("socket");

    if (version == 4) // use ipv4
    {
        struct sockaddr_in srv_addr;
        memset (&srv_addr, 0, sizeof(srv_addr));
        srv_addr.sin_family = AF_INET;
        srv_addr.sin_port = htons (11111);
        if (inet_pton (AF_INET, "192.168.0.200", &srv_addr.sin_addr) != 1)
            ErrAndExit ("inet_pton");

        socklen_t len = sizeof(srv_addr);
        puts("going to sendto...");
        ssize_t res = sendto (fd, "hello", 6, 0, (struct sockaddr*) &srv_addr, len);
        if (res == -1)
            ErrAndExit("sendto");

        printf ("done with res: %ld\n", res);
    }
    else // use ipv6
    {
        struct sockaddr_in6 srv_addr;
        memset (&srv_addr, 0, sizeof(srv_addr));
        srv_addr.sin6_family = AF_INET6;
        srv_addr.sin6_port = htons (11111);
        if (inet_pton (AF_INET6, "2002::148:249", &srv_addr.sin6_addr) != 1)
            ErrAndExit ("inet_pton");

        socklen_t len = sizeof(srv_addr);
        puts("going to sendto...");
        ssize_t res = sendto (fd, "hello", 6, 0, (struct sockaddr*) &srv_addr, len);
        if (res == -1)
            ErrAndExit("sendto");

        printf ("done with res: %ld\n", res);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:13:01.737

令人惊讶的是 IPv6 可以给您一个错误，而不是 IPv4 不能。*IPv4 通常只向连接*的UDP 套接字传递错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-28T21:01:07.917

`srv_addr.sin6_scope`当值不正确时，这发生在我身上。

有关在其他问题中使用 sin6_scope ID 的更多信息： [在 IPv4 客户端/服务器应用程序中添加对 IPv6 的支持 - sin6_flowinfo 和 sin6_scope_id 字段？](https://stackoverflow.com/questions/8256671/adding-support-for-ipv6-in-ipv4-client-server-apps-sin6-flowinfo-and-sin6-scop)

# django - django 1.4.3 文件结构？如何访问图像？

> ID：14373859
> 
> 赞同：1
> 
> 时间：2013-01-17T07:08:47.487
> 
> 标签：django, django-templates, django-models

我正在使用 django 1.4.3 版本，我无法设置媒体路径以便我可以访问我的图像。我在谷歌中搜索过，但没有任何东西可以帮助我解决这个问题。我的项目结构如下

1.  印度创业公司
    *   印度应用
        *   管理员.py
        *   模型.py
        *   视图.py
        *   模板/
            *   索引.html
            *   h.html
        *   媒体/
            *   abc.jpg
    *   印度创业公司
        *   设置.py
        *   网址.py

**现在在models.py中我正在使用如下的图像字段**

```
pic=models.ImageField(upload_to="media/") 
```

上面的那个不起作用，我如何将图像保存或上传到“indianapp”文件夹中的媒体文件夹，以及如何在 html 文件中显示相同的图像？

**设置文件**

```
MEDIA_ROOT = os.path.join(SITE_ROOT, 'media')
MEDIA_URL = '/media/' 
```

**添加了 view.py**

**视图.py**

```
def singlepost(request, year, month, slug2):
posts, pagedata = init() 
img=posts.get
post = posts.get(date_created__year=year,
                        date_created__month=int(month),
                        slug=slug2,)
pagedata.update({'post': post})
return render_to_response('singlepost.html', pagedata) 
```

所以我试图通过 post.pic 获取图像

```
<img src="{{post.pic}}"> 
```

但不工作

# php - php倒计时，让div每天改变宽度

> ID：14373860
> 
> 赞同：0
> 
> 时间：2013-01-17T07:09:04.380
> 
> 标签：php, html, width, countdown

嘿，我已经倒计时了，但我想要的是一个在一天后改变宽度的 div。假设有 150 天回到某一天，那么我希望 div 的宽度为 150px。这是可能的吗？我在网上到处搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:21:14.470

这很简单。存储开始日期并`div`通过计算与现在的差异进行更新。每 150 天重新存储开始日期。这是一些伪代码

```
var start=17/01/2013 //stored date
func countDifference(){
return differenceIs=now()-start+1;
}
func setWidth(){
div.width=countDifference();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:30:17.680

对于纯粹的 php 方法，您可以根据天数为 div 分配一个类，但是您需要为每个可能的宽度指定一个 css 样式。

最好通过javascript来做——Sugar的答案包含一个基本方法。您还可以使用 jQuery 中的 css 方法来更改 css 宽度属性。 [http://api.jquery.com/css/](http://api.jquery.com/css/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T08:45:42.107

你可以做一件事，如下所示..

```
 <div id="test"  style='background-color:red;color:white;display:block;width:150px;'>asdasdsdasda</div>
  <script>
      $(document).ready(function(e){
         var today = new Date();
         var startday  = new Date('01/15/2013');
         var width = 150;
         var diff = DateDiff(new Date(today),new Date(startday));
         diff = parseInt(diff);
         var val  = parseInt(parseInt(diff) / parseInt(width));

        if( val >= 1 ){
                diff = parseInt(parseIn(diff) - parseInt(width * val));
         }
         var now_width = width - diff;

         $('#test').css('width' , parseInt(now_width));   

         function DateDiff(date1, date2) {

                 var datediff = date1.getTime() - date2.getTime(); 
                 return (datediff / (24*60*60*1000));
          }

        });
      </script> 
```

请检查下面给出的网址

[JsFiddle 示例](http://jsfiddle.net/R7JnU/1/)

我希望它对你有帮助。谢谢

# android - Android 中的当月 Facebook 好友生日

> ID：14373862
> 
> 赞同：2
> 
> 时间：2013-01-17T07:09:05.350
> 
> 标签：android, facebook, facebook-graph-api, facebook-fql, facebook-android-sdk

我正在编写一个应用程序，其中我正在使用*Hackbook 示例代码获取 Facebook***好友**列表，但现在我想获取**当前月份生日的 Facebook 好友**列表，以获取我正在使用此代码的所有好友列表：

 ***```
 public static void requestFriends(FacebookRequest facebookRequest) {
    Log.d(LOG_TAG, "requestFriends(" + ")");
    String query = "select name, birthday, uid, pic_square from user where uid in (select uid2 from friend where uid1=me()) order by birthday_date";
    Bundle params = new Bundle();
    params.putString("method", "fql.query");
    params.putString("query", query);
    FacebookUtility.asyncRunner.request(null, params, new FacebookRequestListener(FacebookRequestListener.FRIENDS, facebookRequest));
} 
```

我仍然使用下面的代码来获取*当月生日的朋友*列表：

```
 Calendar c = Calendar.getInstance(); 
    int month = c.get(Calendar.MONTH)+ 1;

    String query = "select name, birthday, uid, pic_square from user where uid in " +
    "(select uid2 from friend where uid1=me())AND birthday_date >= '" + month + "/01' AND birthday_date <= '" + month + "/31' ORDER BY birthday_date ASC"; 
```

但我没有得到任何记录，我在哪里失踪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:54:32.463

您可以做的是使用您正在使用的语言计算以下值并在您的 FQL 中使用它们：

```
1st's day of the current month (17),
Today's month of the year (01)
End date day of the current month (31) 
```

确保分别使用 dd 和 MM 格式化日期和月份（如果是个位数，则用零填充）。然后您的 FQL 将如下所示：

```
SELECT name, birthday_date
  FROM user 
  WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me())
  AND strlen(birthday_date) != 0
  AND (
       substr(birthday_date, 0, 2) = '01'
       AND substr(birthday_date, 3, 5) >= '01'
       AND substr(birthday_date, 3, 5) < '31'
  ) 
  ORDER BY birthday_date 
```

然后，这将返回生日在 1 月 1 日到 1 月 31 日之间的朋友。

**更新：** 计算当前月份和当前月份的最后日期：

```
Calendar cal=Calendar.getInstance();
int currentmonth=cal.get(Calendar.MONTH)+1

public static Date getLastDateOfMonth(int year, int month) {
   Calendar calendar = new GregorianCalendar(year, month, Calendar.DAY_OF_MONTH);
   calendar.set(Calendar.DAY_OF_MONTH, calendar.getActualMaximum(Calendar.DAY_OF_MONTH));
   return calendar.getTime();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:03:33.193

使用此查询以升序获取当前月份的 facebook 好友。

**`SELECT name, birthday, uid, pic_square FROM user WHERE uid in (SELECT uid2 FROM friend WHERE uid1=me())AND birthday_date >= '01/01/2013' AND birthday_date <= '31/01/2013' ORDER BY birthday_date`*****

# android - 如何将sqlite数据库直接存储在sdcard上

> ID：14373863
> 
> 赞同：20
> 
> 时间：2013-01-17T07:09:08.860
> 
> 标签：android, sqlite, android-sqlite

我想在 sdcard 而不是默认路径中创建我的 sqlite 数据库...我想从 sdcard 访问我的所有数据我也使用了这个代码：

```
 private static class OpenHelper extends SQLiteOpenHelper {

    OpenHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        SQLiteDatabase.openOrCreateDatabase("/sdcard/"+DATABASE_NAME,null);

    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL("CREATE TABLE "
                + TABLE_NAME
                + " (id INTEGER PRIMARY KEY, name TEXT, number TEXT, skypeId TEXT, address TEXT, image BLOB)");
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
        onCreate(db);
    }
} 
```

**问题：**

> 当我在默认路径中看到数据库文件时，我可以看到所有数据和表，但是当我看到在 sd 卡中创建的数据库文件时，它不显示任何数据，而只显示数据库文件

**在构造函数**中，它只在 sdcard 中创建文件，但在默认路径中它做得很好.....如何将所有 Sqlitedata 存储在 sdcard 上以供进一步访问？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-17T07:15:53.583

我创建了我的数据库

```
 public DatabaseHelper(final Context context) {
    super(context, Environment.getExternalStorageDirectory()
            + File.separator + FILE_DIR
            + File.separator + DATABASE_NAME, null, DATABASE_VERSION);
} 
```

并且没有进一步的问题。我猜你对 super() 的调用也应该引用 sdcard。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T07:17:14.233

您在`super()`通话中提供的姓名不完整。尝试使用：

```
OpenHelper(Context context) {
    super(context, "/sdcard/"+DATABASE_NAME, null, DATABASE_VERSION);
    SQLiteDatabase.openOrCreateDatabase("/sdcard/"+DATABASE_NAME,null);

} 
```

除此之外，您应该*始终*使用`Environment.getExternalStoreDirectory()`获取外部存储的路径，并且您还应该在尝试使用之前检查外部存储的状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-11T06:47:50.903

```
public DataBaseHelper(final Context context) {

    super(context, Environment.getExternalStorageDirectory()
    + File.separator+ MYDATABASE_NAME, null, MYDATABASE_VERSION);
}

**Also Add permission in android Manifest
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />** 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-28T11:06:57.133

只需在构造函数中给出路径；

```
 DatabaseHelper(Context context) {
    super(context, Environment.getExternalStorageDirectory()
            + File.separator + "/DataBase/" + File.separator
            + DB_NAME, null, DB_VERSION);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-08T21:40:28.773

从 Android 6.0（API 级别 23）开始，用户在应用运行时授予应用权限，而不是在安装应用时。这种方法简化了应用程序安装过程，因为用户在安装或更新应用程序时不需要授予权限。

要在运行时获取权限，您必须请求用户。您可以通过以下方式做到这一点。

第一次请求权限。

```
String[] permissions = {Manifest.permission.WRITE_EXTERNAL_STORAGE};
        requestPermissions(permissions, WRITE_REQUEST_CODE); 
```

然后你可以检查结果

```
@Override
public void onRequestPermissionsResult(int requestCode, String permissions[], int[] grantResults) {
    switch (requestCode) {
       case WRITE_REQUEST_CODE:
         if(grantResults[0] == PackageManager.PERMISSION_GRANTED){
           //Permission granted.
           //Continue with writing files...
         }
       else{
           //Permission denied.
         }
        break;
    }
} 
```

这是很好的学习源[requesting-runtime-permissions-in-android-marshmallow/](https://blog.xamarin.com/requesting-runtime-permissions-in-android-marshmallow/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-14T02:36:31.757

不推荐使用[Environment.getExternalStorageDirectory()](https://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory())方法，

> 此方法在 API 级别 29 中已弃用。为了提高用户隐私，不建议直接访问共享/外部存储设备。当应用程序以 Build.VERSION_CODES.Q 为目标时，从此方法返回的路径不再可供应用程序直接访问。通过迁移到 Context#getExternalFilesDir(String)、MediaStore 或 Intent#ACTION_OPEN_DOCUMENT 等替代方案，应用程序可以继续访问存储在共享/外部存储上的内容。

现在我们必须使用[getExternalFilesDir()](https://developer.android.com/reference/android/content/Context.html#getExternalFilesDir(java.lang.String))，这是一个例子：

```
public class MyDataBaseHelper extends SQLiteOpenHelper {

    //Constructor
    MyDataBaseHelper(Context context) {
    super(context, context.getExternalFilesDir()
            + File.separator + "/Database/" + File.separator
            + DATABASE_QUESTION, null, DATABASE_VERSION);
    }
   ...
   ...
} 
```

# ruby-on-rails - 控制器的创建操作中的构建方法正在创建给错误的用户

> ID：14373864
> 
> 赞同：0
> 
> 时间：2013-01-17T07:09:09.110
> 
> 标签：ruby-on-rails

我正在尝试为特定的“审查请求”创建一个“审查”，但是我现在设置它的方式，当我选择“提供审查”按钮时，它会为随机审查请求创建一个审查。这是我的reviews_controller：

```
class ReviewsController < ApplicationController

  def create
    @review = current_user.reviews.build(params[:review_request_id])
    if @review.save
      flash[:success] = "Review Created"
      redirect_to review_path(@review)
    else 
      flash[:error] = "Review Offer Sent"
      redirect_to root_url
    end
  end

  def show
    @review_request = ReviewRequest.find(params[:id])
  end
end 
```

这是带有链接到创建操作的部分部分：

```
 <span class="offer_review">
    <%= link_to "Offer A Review", reviews_path(:review_request_id), :method => :post  %>
  </span> 
```

我有

```
belongs_to :review_request 
```

在 models/review.rb 文件中和

```
belongs_to :user 
```

在 review_request.rb 文件中。

这是审查请求控制器中的索引操作。带有链接的部分在索引视图中。可能是问题的一部分？

```
 def index
    @review_requests = ReviewRequest.paginate(page: params[:page])
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T01:09:53.270

这里实际上有两个问题。我解决了第一个问题（评论不是使用 review_request_id 创建的）：

```
@review_request = current_user.review_requests.build(params[:review_request]) 
```

在 review_requests_controller 中，并且：

```
<%= link_to "Offer A Review", reviews_path(:review_request_id => review_request), :method => :post  %> 
```

在视图中。

在发布这个问题之前我实际上已经解决了这个问题（并恢复到上面的代码），因为重定向到 Review#show 控制器也是错误的，并且即使创建了评论也会显示错误的 review_request 信息正确。（这样做是因为将 reviews/1 设为 review_request_id，而不是 review_id）

这是我让它正常工作的代码：

```
@review = Review.find(params[:id])
@review_request = ReviewRequest.find(@review.review_request_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:08:34.557

尝试对 'params[:review_request_id]' 使用 'puts' 语句并检查您得到的值。似乎问题出在表单字段的定义中。

# java - 如何检查 Eclipse 插件的性能

> ID：14373866
> 
> 赞同：2
> 
> 时间：2013-01-17T07:09:16.553
> 
> 标签：java, eclipse, performance, plugins, eclipse-plugin

我是 Eclipse 插件开发的新手。

我一直在修改我们团队中使用的插件，我不想添加新的瓶颈。

此外，我要集成到的 Eclipse 需要花费太多时间来安装插件。关于如何确定原因的任何建议？

所以我想知道一些关于

*   如何检查插件的性能 - 任何可用的工具。（如 java 中的 jprofiler 或任何其他性能分析工具）
*   如何使用一些工具检查我的插件代码中的瓶颈。

是否有一个文档告诉插件开发该做什么和不该做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T09:21:50.763

首先，测量一切，因为你永远不应该仅仅通过猜测性能瓶颈来尝试优化。我推荐[将 Yourkit](http://www.yourkit.com/overview/index.jsp)用于所有 Java 代码（Eclipse 插件以及纯 Java 代码）。

第二个重要的事情：如果你的功能需要的时间比眨眼时间还长，那就让它[在 Eclipse 中工作](http://www.eclipse.org/articles/Article-Concurrency/jobs-api.html)，这样它就可以在后台运行。如果它不会阻止用户工作，那么运行几秒钟就可以了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T10:22:42.997

检查插件的性能与任何普通的 java 程序没有太大区别。它以类似的方式工作。例如看[这个问题](https://stackoverflow.com/q/1580091/207764)。

安装时间长；这似乎是底层程序 P2 的问题，而不是您的插件的问题。在安装插件时，您的清单会被读取，有关您的扩展的一些信息会保存在 Eclipse 中。实际插件被复制。检查依赖项。除非你有一个非常大的插件，否则这些东西似乎不应该花那么长时间？也许您正在将插件安装到已经有很多插件的环境中？尝试下载一个干净的Eclipse，你有同样的问题吗？

确保您没有将插件设置为在用户启动 Eclipse 时自动启动。这是导致用户混乱和普遍减速的不良行为。该插件应该在用户真正想要使用它时启动，而不是一秒钟之前。

我对[这个问题](https://stackoverflow.com/a/12139224/207764)的回答也可能有助于插件的一般设计。

# python - 在 matplotlib 中显示所有数据集的固定宽度条

> ID：14373884
> 
> 赞同：4
> 
> 时间：2013-01-17T07:10:54.370
> 
> 标签：python, matplotlib

我有以下数据集。我需要为 1,2 或全部绘制条形图。当我为单个数据项绘制图表时（例如：`xdata=[0]`和`ydata=[1000]`, `xlabels=['first']`，条形图将占据整个绘图区域。如何我将条宽限制为 0.45？

```
ydata=[1000,250,3000,500,3200,4000,2000]
xlabels=['first','sec','third','fourth','fifth','sixth','seventh']

barwidth = 0.45

import matplotlib.pyplot as plt

def create_bar_plot(entries):
    assert entries > 0    
    xdata = range(entries)
    xlabels=xlabels[:entries]
    xdata=xdata[:entries]
    ydata=ydata[:entries]        
    figure = plt.figure(figsize = (12,6), facecolor = "white")
    ax = figure.add_subplot(1,1,1)
    plt.grid(True)
    if xdata and ydata:
        ax.bar(xdata, ydata, width=barwidth,align='center',color='blue')
        ax.set_xlabel('categories',color='black')
        ax.set_ylabel('duration in  minutes',color='black')
        ax.set_title('duration plot created ')
        ax.set_xticks(xdata)
        ax.set_xticklabels(xlabels)
        figure.autofmt_xdate(rotation=30)
        plt.show() 
```

当我尝试

```
create_bar_plot(5) 
```

我得到了这个数字 ![http://i.stack.imgur.com/nhHEM.jpg](../Images/df80f5e2ccd183ca75e74676451f5e6a.png)

但是当我打电话

```
create_bar_plot(1) 
```

我得到这个胖棒

![http://i.stack.imgur.com/e0IJi.jpg](../Images/7f48c6403398cea55a4b088bfd636e9c.png)

那么，如何使绘图以固定宽度显示每个条形？似乎`width=barwidth`in`bar()`不能像我预期的那样工作.. 很可能我错过了一些东西..

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:29:31.220

它们实际上是相同的条形宽度，只是您的 x 轴刻度不同。看：

```
>>> create_bar_plot(5)
>>> plt.gca().get_xbound()
(-1.0, 5.0)
>>> create_bar_plot(1)
>>> plt.gca().get_xbound()
(-0.30000000000000004, 0.30000000000000004)
>>> ax = plt.gca()
>>> ax.set_xbound(-1.0 ,5.0)
>>> plt.show() 
```

![1](../Images/f0652f3e8c33cd5a23b388226de53d97.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:33:23.083

条的宽度仍然相同，为 0.45，但 x 轴的范围缩小了，因为数据较少。您可以手动设置 xlim() 以使两个轴具有相同的宽度，然后条形也将具有相同的宽度。

所以：

```
 ax.set_xlim(-1,len(xlabels)) 
```

它不再使条居中，因此您可能需要根据您所追求的最终结果进行进一步调整。

# java - XML 节点和子节点

> ID：14373891
> 
> 赞同：2
> 
> 时间：2013-01-17T07:11:18.643
> 
> 标签：java, xml

```
header = new LinkedHashMap<String,Object>();
Element headerElement = (Element)doc.getElementsByTagName( "Header").item(0);
NodeList elementList = headerElement.getElementsByTagName( "*" );
for( int index =0; index < elementList.getLength(); index++ ){
    Node element = elementList.item(index);
    System.out.println( element.getChildNodes().item(0).getTextContent() ); // Statement A          
    System.out.println( element.getTextContent()); // Statement B 
```

Statement A 和 Statement B 都打印相同的输出。

这是什么意思，每个节点都是自己的子节点？

输入 XML 是

```
<Header>
    <tag1>1</tag1>
    <tag2>2</tag2>
    <tag3>3</tag3>
    <tag4>4</tag4>
</Header> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T07:18:29.353

从 的[文档中`Node.getTextContent()`](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Node.html#getTextContent%28%29)，对于节点类型`ELEMENT_NODE`：

> 每个子节点的 textContent 属性值的串联，不包括 COMMENT_NODE 和 PROCESSING_INSTRUCTION_NODE 节点。如果节点没有子节点，则这是空字符串。

而对于文本节点，该方法的返回值只是`nodeValue`，即节点的文本。

所以是的 - 在具有单个子节点（文本节点）的元素上调用它*会给*您与直接在该文本节点上调用它相同的结果。但在其他情况下，您会得到不同的结果。例如，如果您有这样的元素：

```
<tag>1<break />2</tag> 
```

会有两个子文本节点和一个子元素节点，结果将是“1 2”（或者可能是“12”；我不确定在这种串联中间距是如何工作的，但你可以检查一下）。

这不是一个节点“包含自己”的问题——这只是这个方法做什么的定义问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:20:46.683

`getTextContent()`return 返回此节点***及其后代***的文本内容。

at 执行的语句 A`tag1`返回下面的文本节点 ( `1`)

在同一位置执行的语句 B 获取`tag1`（具有一个文本节点的列表）的子节点，选择第一个（唯一的）文本节点并显示其文本值。

在这种情况下，它们是同一件事。

# javascript - 用coffeescript和jquery获取json数据对象

> ID：14373892
> 
> 赞同：0
> 
> 时间：2013-01-17T07:11:28.623
> 
> 标签：javascript, jquery, json, coffeescript

在咖啡脚本中，我使用它来加载一个 json 文件

```
 $.ajax 'json/data.json',
        success  : (res, status, xhr, data) ->
            console.log("yea "+data)
        error    : (xhr, status, err) ->
            console.log("nah "+err)
        complete : (xhr, status) ->
            console.log("comp") 
```

文件加载但数据出现未定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:18:36.987

成功需要不同的参数集：

```
success
Type: Function( Object data, String textStatus, jqXHR jqXHR ) 
```

试试这个：

```
$.ajax 'json/data.json',
        success  : (data, status, xhr) ->
            console.log("yea "+data)
        error    : (xhr, status, err) ->
            console.log("nah "+err)
        complete : (xhr, status) ->
            console.log("comp") 
```

# c - C 语言：在声明数组时出现分段错误

> ID：14373899
> 
> 赞同：3
> 
> 时间：2013-01-17T07:12:12.927
> 
> 标签：c, arrays, segmentation-fault, structure

这是场景：我正在声明一个数组，但还没有**在程序中的任何地方使用它**。如果我声明它的长度为 100 或更少，它工作正常。对于更大的长度，它会给出分段错误。我无法理解这种行为。

ATL_RAM_BUFFER_L3 an_unknown_array[128]；

其中 ATL_RAM_BUFFER_L3 是一个将近 72KB 的结构。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T07:19:32.580

您正在耗尽通常是有限资源的堆栈，在您的情况下不足以容纳您的阵列占用的大约九兆字节。

有几种可能的解决方案。如果您只需要一个副本，您可以在函数外部声明它（或在函数内声明为静态） - 这通常会将其远离堆栈并将其放入存储空间较少的区域。

或者，您可以动态分配它，并确保正确管理它。

您还可以根据环境配置更大的堆栈大小。

* * *

例如，以下`bash`脚本将计算出您可以在（默认）环境中的堆栈上分配多少数据：

```
((sz = 0))
((delta = 1000000))
while [[ ${delta} -gt 0 ]]; do
    while true; do
        sleep 1
        ((sz += delta))
        printf "Trying ${sz} ... "
        rm -f qq.c
        echo "#include <stdio.h>" >>qq.c
        echo "int main (void) {" >>qq.c
        echo "    char buff[${sz}];" >>qq.c
        echo "    puts (\"hello\");" >>qq.c
        echo "    return 0;" >>qq.c
        echo "}" >>qq.c
        gcc -o qq qq.c
        trap 'echo "segfault!"' CHLD
        rm -f flagfile
        ( bash -c './qq >flagfile 2>/dev/null' ) >/dev/null 2>&1
        if [[ "$(cat flagfile)" == "hello" ]]; then
            echo "okay"
        else
            echo "crashed"
            ((sz -= delta))
            break
            fi
    done
    ((delta = delta / 10))
done 
```

它通过构建以下形式的 C 程序来工作：

```
#include <stdio.h>
int main (void) {
    char buff[XYZZY];
    puts ("hello");
    return 0;
} 
```

where`XYZZY`逐渐更改以查看程序因堆栈空间不足而首先崩溃的位置。我的环境（CygWin）中的输出是这样的：

```
Trying 1000000 ... okay
Trying 2000000 ... okay
Trying 3000000 ... crashed
Trying 2100000 ... crashed
Trying 2010000 ... okay
Trying 2020000 ... okay
Trying 2030000 ... okay
Trying 2040000 ... okay
Trying 2050000 ... okay
Trying 2060000 ... okay
Trying 2070000 ... okay
Trying 2080000 ... crashed
Trying 2071000 ... crashed
Trying 2070100 ... crashed
Trying 2070010 ... okay
Trying 2070020 ... okay
Trying 2070030 ... okay
Trying 2070040 ... okay
Trying 2070050 ... okay
Trying 2070060 ... okay
Trying 2070070 ... crashed
Trying 2070061 ... okay
Trying 2070062 ... okay
Trying 2070063 ... okay
Trying 2070064 ... okay
Trying 2070065 ... crashed 
```

这意味着 2 兆字节是关于它最大的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:31:26.873

局部变量的内存在运行时分配/释放。它们是在堆栈上创建的，每个线程/进程都有一个有限的堆栈。堆栈的大小很大程度上取决于编译器和操作系统。它因一个系统而异。在 Unix/Linux 类型的系统中，当堆栈溢出发生时，程序将通过分段错误。有关此主题的更多详细信息，请查看[此文档](http://www.cs.nyu.edu/exact/core/doc/stackOverflow.txt)。

另一方面，全局变量的内存是在程序加载到内存时分配的。如果它们未初始化，则在 BSS 部分分配内存，如果将它们初始化为某个值，则在数据部分分配内存。通常，这些部分比进程的堆栈有更多的空间。因此，通常建议全局声明大型变量/对象，如您的，以避免此问题。

# android - 自定义警报对话框中的自定义列表视图崩溃

> ID：14373902
> 
> 赞同：0
> 
> 时间：2013-01-17T07:12:25.673
> 
> 标签：android, android-listview, android-alertdialog

我的问题是什么？我正在尝试在对话中创建一个自定义适配器。我不明白错误的原因是什么。

**创建对话框：**

```
 protected Dialog onCreateDialog(int id) {
    AlertDialog.Builder adb = new AlertDialog.Builder(this);
    adb.setTitle("Choose contact");

    view = (LinearLayout) getLayoutInflater().inflate(R.layout.dialog, null);
    adb.setView(view);

    deditText = (EditText) view.findViewById(R.id.deditText);
    deditText.addTextChangedListener(this);
    dlvNames = (ListView) view.findViewById(R.id.dlvCheck);

    Cursor cursor = getContentResolver().query(
            ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
            new String[] { Phone._ID, Phone.DISPLAY_NAME, Phone.NUMBER },
            null, null, null);

      startManagingCursor(cursor);

     while (cursor.moveToNext()) {
         ID=i;
         CID=Long.valueOf(cursor.getString(0));
         NAME=cursor.getString(1);
         PHONE=cursor.getString(2);

         Contact_List.add(new Contact(ID,CID,NAME,PHONE));

      i++;
     }

    contactAdapter = new ContactAdapter(this,Contact_List );
    //crashes here
    dlvNames.setAdapter(contactAdapter);

    dialog = adb.create();
    return dialog;
} 
```

**创建自定义适配器：**

```
 public class ContactAdapter extends ArrayAdapter<Contact> {

private final Activity context;
ArrayList<Contact> Contact_List;
LayoutInflater lInflater;

static class ViewHolder {
      public TextView tvName;
      public TextView tvPhone;

    }
public ContactAdapter(Activity context, ArrayList<Contact> Contact_List) {

    super(context, R.layout.item, Contact_List);
    this.context = context;
    this.Contact_List = Contact_List;
}

 public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder holder;
    View view = convertView;

    if (view == null) {
        LayoutInflater inflater = context.getLayoutInflater();

      //view = lInflater.inflate(R.layout.item, parent, false);

        view = inflater.inflate(R.layout.item, null, true);

      holder = new ViewHolder();
      holder.tvName = (TextView) view.findViewById(R.id.tvName);
      holder.tvPhone = (TextView) view.findViewById(R.id.tvPhone);
      convertView.setTag(holder);
    } else {
        holder = (ViewHolder) view.getTag();
    }

    Contact c = getContact(position);

    holder.tvName.setText(c.name);
    holder.tvPhone.setText(c.phone);

    return view;
}
  Contact getContact(int position) {
        return ((Contact) getItem(position));
      }
} 
```

**日志猫：**

```
 01-17 06:40:31.801: E/AndroidRuntime(1263): FATAL EXCEPTION: main
    01-17 06:40:31.801: E/AndroidRuntime(1263): java.lang.NullPointerException
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at com.example.testreadcontacts.ContactAdapter.getView(ContactAdapter.java:50)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.widget.AbsListView.obtainView(AbsListView.java:2271)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.widget.ListView.onMeasure(ListView.java:1156)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.view.View.measure(View.java:15172)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.view.View.measure(View.java:15172)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.view.View.measure(View.java:15172)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.view.View.measure(View.java:15172)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.view.View.measure(View.java:15172)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.view.View.measure(View.java:15172)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.view.View.measure(View.java:15172)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2148)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.view.View.measure(View.java:15172)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1850)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1102)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1275)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1000)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4214)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.view.Choreographer.doCallbacks(Choreographer.java:555)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.view.Choreographer.doFrame(Choreographer.java:525)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.os.Handler.handleCallback(Handler.java:615)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.os.Handler.dispatchMessage(Handler.java:92)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.os.Looper.loop(Looper.java:137)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at android.app.ActivityThread.main(ActivityThread.java:4745)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at java.lang.reflect.Method.invokeNative(Native Method)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at java.lang.reflect.Method.invoke(Method.java:511)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
    01-17 06:40:31.801: E/AndroidRuntime(1263):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:17:14.393

```
 convertView.setTag(holder); 
```

这是在检查 null 的块内。如果您点击这一行，则该变量被保证为空。您希望它改为 view.setTag 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:15:01.587

我的猜测是联系人可能为空，请尝试：

```
Contact c = getContact(position);
if(c != null) {
   holder.tvName.setText(c.name);
   holder.tvPhone.setText(c.phone);
} 
```

# php - 如何将多列输出作为一列并找到该列的顶部

> ID：14373911
> 
> 赞同：1
> 
> 时间：2013-01-17T07:13:08.877
> 
> 标签：php, mysql, sql, database

我陷入了一个场景，我选择了表格中每一列的平均值。现在我想找到这些列中的前三列。

这是我的查询：

```
SELECT AVG( `adventure` ) , AVG( `beach` ) , AVG( `culture` ) , AVG( `festival` ) , AVG( `food` ) , AVG( `fun` ) , AVG( `biking` ) , AVG( `ski` ) , AVG( `surf` ) , AVG( `family` ) , AVG( `couple` ) , AVG( `single` ) , AVG( `backpacker` )
FROM `ratings`
WHERE `reference_id`=4595 
```

此查询返回我每列的平均值。但我只想选择前 3 个平均值。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T07:22:58.263

我想你需要先规范化你的表，但这里有一个适合你需要的查询，

顺便说一下，它返回两列，计算平均值的列的名称和平均值的结果。

```
SELECT  Category, avgVal
FROM
    (
        SELECT  'adventure' AS Category, AVG(`adventure`) AS avgVal FROM `ratings` WHERE `reference_id`=4595
        UNION
        SELECT  'beach' AS Category, AVG(`beach`)  AS avgVal FROM `ratings` WHERE `reference_id`=4595
        UNION
        SELECT  'culture' AS Category, AVG(`culture`)  AS avgVal FROM `ratings` WHERE `reference_id`=4595 
        UNION
        SELECT  'festival' AS Category, AVG(`festival`)  AS avgVal FROM `ratings` WHERE `reference_id`=4595 
        UNION
        SELECT  'food' AS Category, AVG(`food`)  AS avgVal FROM `ratings` WHERE `reference_id`=4595
        UNION
        SELECT  'fun' AS Category, AVG(`fun`)  AS avgVal FROM `ratings` WHERE `reference_id`=4595 
        UNION
        SELECT  'biking' AS Category, AVG(`biking`)  AS avgVal FROM `ratings` WHERE `reference_id`=4595 
        UNION
        SELECT  'ski' AS Category, AVG(`ski`)  AS avgVal FROM `ratings` WHERE `reference_id`=4595 
        UNION
        SELECT  'surf' AS Category, AVG(`surf`)  AS avgVal FROM `ratings` WHERE `reference_id`=4595 
        UNION
        SELECT  'family' AS Category, AVG(`family`)  AS avgVal FROM `ratings` WHERE `reference_id`=4595 
        UNION
        SELECT  'couple' AS Category, AVG(`couple`)  AS avgVal FROM `ratings` WHERE `reference_id`=4595 
        UNION
        SELECT  'single' AS Category, AVG(`single`)  AS avgVal FROM `ratings` WHERE `reference_id`=4595 
        UNION
        SELECT  'backpacker' AS Category, AVG(`backpacker`)  AS avgVal FROM `ratings` WHERE `reference_id`=4595 
    ) s
ORDER BY avgVal DESC
LIMIT 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:24:32.180

您将需要在此处使用子查询

```
 SELECT AVG( `adventure` ) 
       ,AVG( `beach` )
       ,AVG( `culture` )
       , AVG( `festival` )
       , AVG( `food` )
       , AVG( `fun` )
       , AVG( `biking` )
       , AVG( `ski` )
       , AVG( `surf` )
       , AVG( `family` )
       , AVG( `couple` )
       , AVG( `single` )
       , AVG( `backpacker` ) 
FROM ( SELECT adventure,beach,culture,festival,food,fun,biking,ski,surf,family,couple,single,backpacker
       FROM `ratings`
       WHERE `reference_id`=4595 
       LIMIT 0,3
) DerivedTable 
```

希望这可以帮助。谢谢

# .net - BinaryReader.ReadByte() 没有超时

> ID：14373912
> 
> 赞同：0
> 
> 时间：2013-01-17T07:13:08.953
> 
> 标签：.net, windows-phone-7, stream, binaryreader, request-cancelling

我有一个互联网流，我正在从中创建阅读器

```
var reader = new BinaryReader(stream); 
```

之后我正在读取字节以搜索“同步字”

```
if (reader.ReadByte() != magic[i++]) 
```

但有时我有一个问题`ReadByte()`。我预计如果阅读器无法从流中读取字节，它会抛出异常，但不会抛出任何东西。（服务器没有关闭，只是不提供字节）。

所以我的问题是-如何使这种方法超时？我可以将 TPL 与 CancellationToken 一起使用，但不明白如何在需要时取消方法 ReadByte。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T11:39:03.730

鉴于我们现在知道这是来自 a `TcpClient`，我建议[`TcpClient.ReceiveTimeout`](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.receivetimeout.aspx)在请求流之前设置。这应该使读取调用适当地超时。

（另一方面，我认为`TcpClient`WP7 上没有，所以我不确定你是如何使用它的......）

# php - 实用地使用预定义的图像预设打印图像

> ID：14373913
> 
> 赞同：1
> 
> 时间：2013-01-17T07:13:08.610
> 
> 标签：php, image, drupal, drupal-7, drupal-theming

我只需要在 Drupal 7 中通过 php 打印出一张图像。我已经有 3 个预设，缩略图，中型和大型。有谁知道我需要打印出来的确切代码，因为我似乎无法解决？

据我所知，在 Drupal 6 中是这样的：

```
<img src="<?php print 'sites/default/files/imagecache/**thumbnail**/' . $node->field_image_cache['0']['filepath']; ?>" /> 
```

我将非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:34:11.977

使用[theme_image_formatter](http://api.drupal.org/api/drupal/modules!image!image.field.inc/function/theme_image_formatter/7)。

例如

```
print theme("image_formatter", array(
    'image_style' => 'thumbnail',
    'item' => array(
        'uri' => 'sites/default/files/image.jpg',
        'alt' => t(""),
        'title' => t(""),
        'attributes' => array(),
    ),
)); 
```

# ios - iOS 的 UITableView

> ID：14373922
> 
> 赞同：0
> 
> 时间：2013-01-17T07:13:29.760
> 
> 标签：ios, xcode4, tableview

我对 Objective-C 很陌生。我只是搜索并尝试了解`UITableView`.

我已经创建了这个`UITableView`。而不是`"a"`在所有行中，我希望它按顺序排列`"a b c d..."`，如果我增加它应该滚动的行数。它不滚动，所以这是我的代码。

```
#import "ViewController.h"
@interface ViewController ()
@end
@implementation ViewController
- (void)viewDidLoad
{
    CGRect frame = self.view.frame;
    UITableView *tableView = [[UITableView alloc] initWithFrame:frame  style:UITableViewStylePlain];
    tableView.separatorStyle = UITableViewCellSeparatorStyleSingleLine;
    tableView.backgroundColor = [UIColor cyanColor];
    tableView.delegate = self;
    tableView.dataSource = self;
    [self.view addSubview:tableView];
    [super viewDidLoad];
}
- (void)viewDidUnload
{
[super viewDidUnload];
}
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return 20;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cellIDent"];
    cell.textLabel.text = @"a";
    return cell;
}
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T13:37:18.823

在 IB 中设置表视图代表，或者如果您以编程方式创建，则在 viewDidLoad 中以一个数组动态或静态填充它。在 NumberOfRowsInsection 方法中给出数组计数并在适当的位置重新加载表视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:23:09.337

检查本教程，我相信它会帮助你

[UItableView 指南](http://www.iosdevnotes.com/2011/10/uitableview-tutorial/)

对于滚动，您不需要自己做任何事情，因为单元格的数量增加超过提供的大小，它会自动变为可滚动并确保在`UITableView`属性检查器中启用滚动，检查图像

![在此处输入图像描述](../Images/80bb685bf2d8b4c4c9475ae63f411a2e.png)

快乐编码

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T07:25:04.017

在你的 cellForRowAtIndexPath 中：添加这些行

```
char ch = 'a' + indexPath.row;
cell.textLabel.text = [NSString stringWithFormat:@"%c" , ch]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T07:48:42.487

使用下面的代码......在全球范围内定义Alphabetarr然后在代码中使用它......

```
- (void)viewDidLoad
{
    alphabetarr = [[NSArray alloc] initWithObjects:@"a",@"b",@"c",@"d",@"e",@"f",@"g",@"h",@"i",@"j",@"k",@"l",@"m",@"n",@"o",@"p",@"q",@"r",@"s",@"t",@"u",@"v",@"w",@"x",@"y",@"z", nil];

    CGRect frame = self.view.frame;
    UITableView *tableview = [[UITableView alloc] initWithFrame:frame];
    tableview.backgroundColor = [UIColor cyanColor];
    tableview.separatorColor = [UIColor blackColor];
    tableview.delegate = self;
    tableview.dataSource = self;
    [self.view addSubview:tableview];
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [alphabetarr count];
}
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 30.0 ;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell!=nil) {
        cell = nil;
    }
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }

        cell.textLabel.text = [alphabetarr objectAtIndex:indexPath.row];

    return cell;
} 
```

# c - C中指针的类型转换

> ID：14373924
> 
> 赞同：21
> 
> 时间：2013-01-17T07:13:40.230
> 
> 标签：c, pointers, casting

我知道指向一种类型的指针可能会转换为另一种类型的指针。我有三个问题：

1.  类型转换指针时应该记住什么？
2.  结果指针中可能出现哪些异常/错误？
3.  避免异常/错误的最佳实践是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-17T08:43:09.707

一个写得好的程序通常不会使用太多的指针类型转换。例如，可能需要对*malloc*使用 ptr 类型转换（已声明`(void *)malloc(...)`），但在 C 中甚至没有必要（虽然一些编译器可能会抱怨）。

```
 int *p = malloc(sizeof(int)); // no need of (int *)malloc(...) 
```

但是在系统应用程序中，有时您想使用技巧来执行二进制或特定操作 - 而 C，一种接近机器结构的语言，很方便。例如，假设您要分析*double*的二进制结构（遵循 IEEE 754 实现），并且使用二进制元素更简单，您可以声明

```
 typedef unsigned char byte;
  double d = 0.9;
  byte *p = (byte *)&d;
  int i;
  for (i=0 ; i<sizeof(double) ; i++) { ... work with b ... } 
```

你也可以使用*union*，这是一个例子。

更复杂的利用可能是[C++ 多态性](http://www.cplusplus.com/doc/tutorial/polymorphism/)的模拟，这需要将“类”（结构）层次结构存储在某处以记住什么是什么，并执行指针类型转换以拥有例如父“类”指针变量有时指向派生类（另请参阅 C++ 链接）

```
 CRectangle rect;
  CPolygon *p = (CPolygon *)&rect;
  p->whatami = POLY_RECTANGLE; // a way to simulate polymorphism ...
  process_poly ( p ); 
```

但在这种情况下，也许直接使用C++会更好！

指针类型转换应*谨慎*用于作为程序分析一部分的*确定情况 - 在开发开始之前。*

**指针类型转换的潜在危险**

*   在不需要时使用它们 - 这容易出错并使程序复杂化
*   指向可能导致访问溢出、错误结果的不同大小的对象...
*   指向两个不同结构的指针，例如`s1 *p = (s1 *)&s2;`：依赖它们的大小和对齐方式可能会导致错误

（但公平地说，一个熟练的 C 程序员不会犯上述错误......）

**最佳实践**

*   仅在您确实需要它们时才使用它们，并很好地评论解释为什么需要它们的部分
*   知道你在做什么 - 再次，一个熟练的程序员可能会使用大量的指针类型转换而不会失败，即不要尝试查看，它可能在这样的系统/版本/操作系统上工作，并且可能在另一个系统/版​​本/操作系统上不起作用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T07:22:58.183

在纯 C 中，您可以将任何指针类型转换为任何其他指针类型。如果您将指针转换为不兼容类型或从不兼容类型转换，并且错误地写入内存，您可能会从应用程序中获得分段错误或意外结果。

以下是转换结构指针的示例代码：

```
struct Entity { 
  int type;
}

struct DetailedEntity1 {
  int type;
  short val1;
}

struct DetailedEntity2 {
  int type;
  long val;
  long val2;
}

// random code:
struct Entity* ent = (struct Entity*)ptr;

//bad:
struct DetailedEntity1* ent1 = (struct DetailedEntity1*)ent;
int a = ent->val; // may be an error here, invalid read
ent->val = 117; // possible invali write

//OK:
if (ent->type == DETAILED_ENTITY_1) {
  ((struct DetailedEntity1*)ent)->val1;
} else if (ent->type == DETAILED_ENTITY_2) {
  ((struct DetailedEntity2*)ent)->val2;
} 
```

至于函数指针 - 您应该始终使用完全符合声明的函数。否则你可能会得到意想不到的结果或段错误。

从指针转换为指针（结构与否）时，您必须确保内存以完全相同的方式[对齐。](http://en.wikipedia.org/wiki/Data_structure_alignment)在转换整个结构时，确保它的最佳方法是在开始时使用相同变量的相同顺序，并且仅在“公共标头”之后区分结构。另请记住，内存对齐方式可能因机器而异，因此您不能仅将结构指针作为字节数组发送并作为字节数组接收。您可能会遇到意外的行为，甚至是段错误。

将较小的变量指针转换为较大的变量指针时，必须非常小心。考虑这段代码：

```
char* ptr = malloc (16);
ptr++;
uint64_t* uintPtr = ptr; // may cause an error, memory is not properly aligned 
```

而且，您应该遵循[严格的别名规则。](https://stackoverflow.com/questions/4163126/c-dereferencing-type-punned-pointer-will-break-strict-aliasing-rules-warnin)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T08:28:02.830

你可能需要看一下...由 Steve Summit 维护**[的 C-faq](http://c-faq.com/)**（它曾经发布在新闻组中，这意味着它被当时许多最优秀的程序员阅读和更新，有时是语言本身）。

还有一个**[精简版](http://www.faqs.org/faqs/by-newsgroup/comp/comp.lang.c.html)**，可能更可口，但仍然非常、非常、非常、非常有用。我相信，如果你使用 C，阅读整个删节是强制性的。

# php - 用户定义的函数在 php 中不起作用

> ID：14373926
> 
> 赞同：-1
> 
> 时间：2013-01-17T07:13:51.517
> 
> 标签：php, function, pdo, unique-id

我在调用我的`rand_id()`函数时遇到问题。这是代码

```
<?php 
try

{

$config=array(
'DB_USERNAME'=>'root',
'DB_PASSWORD'=>'');

$conn=new PDO('mysql:host=localhost;dbname=scc',$config['DB_USERNAME'],$config['DB_PASSWORD']); 
$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

echo rand_id(); 

}

catch(Exception $e)
{
echo 'error: '.$e->getMessage();
}

function rand_id()
{

$id=rand(100,103);          //i have record with id ='100'
$results=$conn->query("select id from student_personal_info where id='".$id."'");

if($results->rowCount()>0)
{   
rand_id();
}
else
{
return "this is unique id";
}
}
?> 
```

但是如果我删除该功能并检查此代码工作正常但现在我在检查数据库后无法生成唯一的 id 消息......请帮助......

这是删除功能后的另一个代码

```
<?php 

try
{
$config=array(
'DB_USERNAME'=>'root',
'DB_PASSWORD'=>'');

$conn=new PDO('mysql:host=localhost;dbname=scc',$config['DB_USERNAME'],$config['DB_PASSWORD']); 
$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$id=rand(100,103);          //i have record with id ='100'
$results=$conn->query("select id from student_personal_info where id='".$id."'");

if($results->rowCount()>0)
{   
echo  "generate again";
}
else
{
echo  "this is unique id";
}
}
catch(Exception $e)
{
echo 'error: '.$e->getMessage();
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:15:58.247

您的数据库对象`$conn`超出了`rand_id()`函数的范围。您可以将其作为参数传递：

```
function rand_id($conn)
{
    // ...
} 
```

或者使用以下`global`方法：

```
function rand_id()
{
    global $conn;
    // $conn is now accessible
} 
```

[有关手册上的变量范围的](http://php.net/manual/en/language.variables.scope.php)更多信息。

* * *

为了将来的调试，记得检查你的错误日志。在这种情况下，你应该有类似的东西：

> 致命错误：在...中的非对象上调用成员函数 query()

# ruby - 在 Ruby 1.9.3 中与 /\S\W/ 和 /\W\S/ 的输出混淆

> ID：14373933
> 
> 赞同：2
> 
> 时间：2013-01-17T07:14:04.060
> 
> 标签：ruby, regex, ruby-1.9.3

我刚刚熟悉`\W`and `\S`。现在我正在玩，看看他们是如何表现的，并相应地尝试了以下内容：

```
> s="abd12 de 5t6"
=> "abd12 de 5t6"  #understood
> /\W/ =~ s
=> 5               #understood
> /\W\S/ =~ s
=> 5               #Confusion(A)             
> /\S\W/ =~ s
=> 4               #Confusion(B) 
> /\S/ =~ s  
=> 0               #understood
> 
```

逻辑运行的内容`Part-A`并将`Part-B`输出作为`5`和`4`。只是想在那里澄清我的概念。In`Part-A` `5`表示 a`non-word character`但那也不是`a non- white space charater`。

我只是想知道如何`IRB`对待这样的陈述`confusion - A and B`？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:25:19.700

当你`\W\S`在你的正则表达式中时，你基本上是在说：“在字符串中找到一个匹配，其中一个字符是一个非单词字符，**后跟**一个非空格字符。”

在`Confusion A`第一个非单词字符中是第一个空格（在索引 5 处）。紧随其后的下一个字符`d`是非空格字符。这是一场比赛，因此返回 5，因为那是比赛开始的索引。

同样，对于`\S\W`第一个非空格字符是`a`，但后面`b`是单词字符，所以匹配还不起作用。一旦它到达`2`（位置 4），它匹配一个非空格字符，然后是一个非单词字符的空格。

# c++ - 迭代器循环与索引循环

> ID：14373934
> 
> 赞同：138
> 
> 时间：2013-01-17T07:14:07.960
> 
> 标签：c++, loops, c++11, indexing, iterator

> **可能重复：**
> [为什么使用迭代器而不是数组索引？](https://stackoverflow.com/questions/131241/why-use-iterators-instead-of-array-indices)

我正在回顾我对 C++ 的了解，并且偶然发现了迭代器。我想知道的一件事是是什么让它们如此特别，我想知道为什么会这样：

```
using namespace std;

vector<int> myIntVector;
vector<int>::iterator myIntVectorIterator;

// Add some elements to myIntVector
myIntVector.push_back(1);
myIntVector.push_back(4);
myIntVector.push_back(8);

for(myIntVectorIterator = myIntVector.begin(); 
        myIntVectorIterator != myIntVector.end();
        myIntVectorIterator++)
{
    cout<<*myIntVectorIterator<<" ";
    //Should output 1 4 8
} 
```

比这更好：

```
using namespace std;

vector<int> myIntVector;
// Add some elements to myIntVector
myIntVector.push_back(1);
myIntVector.push_back(4);
myIntVector.push_back(8);

for(int y=0; y<myIntVector.size(); y++)
{
    cout<<myIntVector[y]<<" ";
    //Should output 1 4 8
} 
```

是的，我知道我不应该使用 std 命名空间。我刚刚从 cprogramming 网站上拿了这个例子。那么你能告诉我为什么后者更糟吗？有什么大的区别？

* * *

## 回答 #1

> 赞同：220
> 
> 时间：2013-01-17T08:04:27.000

迭代器的特殊之处在于它们提供了[算法和容器](https://stackoverflow.com/a/11948413/819272)之间的粘合剂。对于通用代码，建议使用 STL 算法（例如`find`、`sort`、`remove`）`copy`等的组合来执行您对数据结构（ 、 等）的计算`vector`，`list`并`map`为该算法提供迭代器进入你的容器。

您的特定示例可以编写为`for_each`算法和`vector`容器的组合（请参见下面的选项 3），但它只是迭代 std::vector 的四种不同方法中的一种：

**1）基于索引的迭代**

```
for (std::size_t i = 0; i != v.size(); ++i) {
    // access element as v[i]

    // any code including continue, break, return
} 
```

*优点*：熟悉 C 风格代码的任何人都熟悉，可以使用不同的步幅进行循环（例如`i += 2`）。

*缺点*：仅适用于顺序随机访问容器（`vector`, `array`, `deque`），不适用于`list`,`forward_list`或关联容器。循环控制也有点冗长（初始化、检查、增量）。人们需要了解 C++ 中基于 0 的索引。

**2）基于迭代器的迭代**

```
for (auto it = v.begin(); it != v.end(); ++it) {
    // if the current index is needed:
    auto i = std::distance(v.begin(), it); 

    // access element as *it

    // any code including continue, break, return
} 
```

*优点*：更通用，适用于所有容器（即使是新的无序关联容器，也可以使用不同的步幅（例如`std::advance(it, 2)`）；

*缺点*：需要额外的工作来获取当前元素的索引（对于 list 或 forward_list 可能是 O(N)）。同样，循环控制有点冗长（初始化、检查、增量）。

**3) STL for_each 算法 + lambda**

```
std::for_each(v.begin(), v.end(), [](T const& elem) {
     // if the current index is needed:
     auto i = &elem - &v[0];

     // cannot continue, break or return out of the loop
}); 
```

*优点*：与 2 相同）加上循环控制的少量减少（无检查和增量），这可以大大降低您的错误率（错误的初始化、检查或增量、一个错误）。

*缺点*：与显式迭代器循环相同，加上循环中流量控制的可能性有限（不能使用 continue、break 或 return），并且没有用于不同步幅的选项（除非您使用重载的迭代器适配器`operator++`）。

**4) range-for 循环**

```
for (auto& elem: v) {
     // if the current index is needed:
     auto i = &elem - &v[0];

    // any code including continue, break, return
} 
```

*优点*：非常紧凑的回路控制，直接访问当前元素。

*缺点*：获取索引的额外语句。不能使用不同的步幅。

**用什么？**

对于迭代的特定示例`std::vector`：如果您确实需要索引（例如访问上一个或下一个元素，在循环内打印/记录索引等），或者您需要一个不同于 1 的步幅，那么我会明确地选择索引循环，否则我会选择 range-for 循环。

对于通用容器上的通用算法，我会选择显式迭代器循环，除非代码在循环内不包含流控制并且需要步长 1，在这种情况下，我会选择 STL `for_each`+ lambda。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-17T07:35:39.943

使用向量迭代器并没有提供任何真正的优势。语法更丑陋，打字时间更长，更难阅读。

使用迭代器对向量进行迭代不是更快也不是更安全（实际上，如果在迭代期间使用迭代器调整向量的大小会给你带来很大的麻烦）。

当您稍后更改容器类型时，拥有一个通用循环的想法在实际情况下也大多是无稽之谈。不幸的是，没有严格类型推断的严格类型语言的阴暗面（不过现在使用 C++11 更好一些）是您需要在每一步中说明所有内容的类型。如果您稍后改变主意，您仍然需要四处走动并改变一切。此外，不同的容器有非常不同的权衡，改变容器类型并不是经常发生的事情。

如果可能的话，应该保持迭代的唯一情况是在编写模板代码时，但这（我希望你）不是最常见的情况。

显式索引循环中存在的唯一问题是`size`返回无符号值（C++ 的设计错误），并且有符号和无符号之间的比较是危险且令人惊讶的，因此最好避免。如果您使用启用了警告的体面编译器，则应该对此进行诊断。

请注意，解决方案不是使用无符号作为索引，因为无符号值之间的算术显然也是不合逻辑的（它是模算术，并且`x-1`可能大于`x`）。相反，您应该在使用它之前将大小转换为整数。仅当您正在处理 16 位 C++ 实现（ [16 位是在 size 中具有无符号值的原因）时，使用无符号大小和索引（非常注意您编写的每个表达式）](https://stackoverflow.com/questions/10168079/why-is-size-t-unsigned)**可能**是有意义的。

作为 unsigned size 可能引入的典型错误，请考虑：

```
void drawPolyline(const std::vector<P2d>& points)
{
    for (int i=0; i<points.size()-1; i++)
        drawLine(points[i], points[i+1]);
} 
```

此处存在错误，因为如果您传递一个空`points`向量，则该值`points.size()-1`将是一个巨大的正数，从而使您循环进入段错误。一个可行的解决方案可能是

```
for (int i=1; i<points.size(); i++)
    drawLine(points[i - 1], points[i]); 
```

但我个人更喜欢总是删除`unsinged`-ness with `int(v.size())`。

PS：如果您真的不想自己思考其中的含义，而只是希望专家告诉您，那么请考虑很多世界公认的 C++ 专家同意并表达了关于[无符号值是一个坏主意的观点，除了位操作](https://www.youtube.com/watch?v=Puio5dly9N8&t=2560)。

在迭代到倒数第二个的情况下发现使用迭代器的丑陋留给读者作为练习。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-17T07:18:47.637

**迭代器使您的代码更通用。**
每个标准库容器都提供一个迭代器，因此如果您将来更改容器类，则循环不会受到影响。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-17T07:31:32.653

迭代器是首选`operator[]`。C++11 提供`std::begin()`,`std::end()`函数。

由于您的代码使用 just `std::vector`，我不能说这两个代码有很大差异，但是，`operator []`可能无法按您的意愿运行。例如，如果您使用地图，`operator[]`如果未找到将插入一个元素。

此外，通过使用`iterator`您的代码在容器之间变得更加可移植。如果您使用迭代器，您可以自由地将容器从`std::vector`to`std::list`或其他容器切换而不会发生太大变化，这样的规则不适用于`operator[]`.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-17T07:17:50.543

它总是取决于你需要什么。

`operator[]`当您**需要**直接访问向量中的元素时（当您需要索引向量中的特定元素时），您应该使用。在迭代器上使用它并没有错。但是，您必须自己决定哪个（`operator[]`或迭代器）最适合您的需求。

使用迭代器可以让您切换到其他容器类型，而无需对代码进行太多更改。换句话说，使用迭代器将使您的代码更加通用，并且不依赖于特定类型的容器。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-17T09:36:01.197

通过根据迭代器编写客户端代码，您可以完全抽象出容器。

考虑这段代码：

```
class ExpressionParser // some generic arbitrary expression parser
{
public:
    template<typename It>
    void parse(It begin, const It end)
    {
        using namespace std;
        using namespace std::placeholders;
        for_each(begin, end, 
            bind(&ExpressionParser::process_next, this, _1);
    }
    // process next char in a stream (defined elsewhere)
    void process_next(char c);
}; 
```

客户端代码：

```
ExpressionParser p;

std::string expression("SUM(A) FOR A in [1, 2, 3, 4]");
p.parse(expression.begin(), expression.end());

std::istringstream file("expression.txt");
p.parse(std::istringstream<char>(file), std::istringstream<char>());

char expr[] = "[12a^2 + 13a - 5] with a=108";
p.parse(std::begin(expr), std::end(expr)); 
```

编辑：考虑您的原始代码示例，使用以下代码实现：

```
using namespace std;

vector<int> myIntVector;
// Add some elements to myIntVector
myIntVector.push_back(1);
myIntVector.push_back(4);
myIntVector.push_back(8);

copy(myIntVector.begin(), myIntVector.end(), 
    std::ostream_iterator<int>(cout, " ")); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-17T07:18:41.387

迭代器的好处是，稍后如果您想将向量切换到另一个 STD 容器。然后 forloop 仍然可以工作。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-01-17T07:18:26.673

这是速度的问题。使用迭代器可以更快地访问元素。这里回答了一个类似的问题：

[用 vector::iterator 或 at() 迭代 STL 向量有什么更快的方法？](https://stackoverflow.com/questions/776624/whats-faster-iterating-an-stl-vector-with-vectoriterator-or-with-at)

编辑：访问速度因每个 cpu 和编译器而异

# php - 邮件发送但它在 php 中为空

> ID：14373935
> 
> 赞同：0
> 
> 时间：2013-01-17T07:14:12.980
> 
> 标签：php

我想发送邮件并且邮件要发送，但问题是邮箱中的邮件是空的。我的代码有什么问题？

```
$afile = $_FILES['myFile'];

//Getting info about above taken file
$fileatttype = $afile['type'];
$fileattname = $afile['name'];
$filesize=$afile['size'];
if($fileatttype=="application/octet-stream" or $fileatttype=="text/plain" or $fileatttype=="application/msword" or $fileatttype=="application/pdf") 
{
 $otherData="**********************Personal Details*********************\n

Position Applied For :$Position\n
First Name :$First\n
Last Name:$LastName\n
Date Of Birth :$DD-$MM-$yy\n
Correspondence Address :$Caddress1 $Caddress2 $Caddress2\n
Permanent Address :$Paddress1 $Paddress2 $Paddress2\n
Contact No(HOME):$Home\n
Mobile :$Mobile\n
E-Mail :$EMail\n
**********************Education*********************\n

Quallification :$Quallification\n
OtherCourse:$OtherCourse\n
**********************Previous Working Details*********************\n

Company Name-$WCompany1\n
Title-$WTitle1\n
CTC-$WCTC1\n
Reasons of Leaving-$WReason1\n
Company Name-$WCompany2\n
Title-$WTitle2\n
CTC-$WCTC2\n
Reasons of Leaving-$WReason2\n
Company Name-$WCompany3\n
Title-$WTitle3\n
CTC-$WCTC3\n
Reasons of Leaving-$WReason3\n
Company Name-$WCompany4\n
Title-$WTitle4\n
CTC-$WCTC4\n
Reasons of Leaving-$WReason4\n

Current CTC:$CCTC\n 
Expected CTC:$ECTC\n
Notice Period Required :$NoticePeriod\n
Total no of years experience :$TotalExperience Years\n
Current Location :$Clocation\n
Preferred Location:$Plocation\n
Resume:$Resume\n
**********************Family Details*********************\n
Father / Guardian Name :$Fname\n
Father / Spouse: Occupation:$Focc\n
Kids:$Kids\n
Age of Kids:$AOK\n
"; 
 $to="renu_activa@yahoo.co.in";
 $from=$_POST['First'];
 $subject=$Position;
 $headers = "From: $First";
 if($filesize>0)
    {
    $file = fopen($afile['tmp_name'],'rb');
    $data = fread($file,$afile['size']);
    fclose( $file );
    }
//Making a random number to use afterwards with help of current time
$semi_rand = md5( time() );

//Defining the type of email as Mime email
$mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";

//Appending to headers, telling that its multipart message with text and attachment
$headers .= "\nMIME-Version: 1.0\n" .
"Content-Type: multipart/mixed;\n" .
" boundary=\"{$mime_boundary}\"";

//The text part of message in variable $otherData with other details
$message = "This is a multi-part message in MIME format.\n\n" .
"--{$mime_boundary}\n" .
"Content-Type: text/plain; charset=\"iso-8859-1\"\n" .
"Content-Transfer-Encoding: 7bit\n\n" .
$otherData . "\n\n";
//Encoding all the data read from file to "base64" the standard for email attachments
$data = chunk_split(base64_encode($data));

//Appending the file data to the email including the file name etc
$message .= "--{$mime_boundary}\n" .
"Content-Type: {$fileatttype};\n" .
" name=\"{$fileattname}\"\n" .
"Content-Disposition: attachment;\n" .
" filename=\"{$fileattname}\"\n" .
"Content-Transfer-Encoding: base64\n\n" .
$data . "\n\n" .
"--{$mime_boundary}--\n";
$sentmail=mail($to, $subject, $message, $headers);
if($sentmail)
{
header('location: career-with-us.php');
}
else
{
 echo "Mail Not Send Successfully....";
}
}
else
{
 echo "Wrong format: Please upload only PDF/DOC/DOCX/TXT file format...";
} 
```

我不明白为什么它的空文本框值和文件附件都没有显示在邮件中。它完全是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:20:48.727

您为电子邮件正文定义了一个新变量。

```
$mess = 'Please check it';
$messa = '*****... 
```

我假设你的意思是

```
$mess = 'Please check it';
$mess .= '*****... 
```

# android - 自定义 pinpad 组件的问题

> ID：14373940
> 
> 赞同：1
> 
> 时间：2013-01-17T07:14:37.810
> 
> 标签：android, custom-controls

我创建了一个自定义引脚焊盘组件。组件由原生编辑文本组成。我的自定义组件工作正常。我的问题是当我在页面末尾有这个组件并且当我尝试输入值时，虚拟键盘出现但我的组件被隐藏了。

注意：我在清单中使用了 android:windowSoftInputMode="adjustPan" ，当我单独使用编辑文本组件时，同样的事情工作正常

# java - 使用 Gradient Drawable 在点击 ListView 项目时更改颜色

> ID：14373941
> 
> 赞同：1
> 
> 时间：2013-01-17T07:14:41.447
> 
> 标签：java, android, listview, drawable

我可以使用显示正确输出的自定义适配器设置列表视图。每个列表项也具有渐变样式，请参见下面的 drawable.xml 如何在点击其中任何一个时将项目背景更改为其他渐变。我可以为每个项目设置不同的渐变吗？

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
 android:shape="rectangle">
<gradient 
android:startColor="#FFFAFAFA" 
android:centerColor="#FFFFFFFF" 
android:endColor="#FFFAFAFA" 
android:angle="90"/>
</shape> 
```

我的文件...

activity_main.xml....主 xml 文件

MainActivity.java....主要活动

Item.java.... 项目选择器方法

ItemAdaptor.... 自定义适配器

list_item.xml .....项目（textView）样式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:26:07.637

试试这样。。

在drawable中添加这个

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">
<!-- Selector style for listrow -->

    <item
     android:state_selected="false"
        android:state_pressed="false"
        android:drawable="@drawable/gradient_bg" />

    <item android:state_pressed="true"
        android:drawable="@drawable/gradient_bg_hover" />

    <item android:state_selected="true"
     android:state_pressed="false"
        android:drawable="@drawable/gradient_bg_hover" />
</selector> 
```

添加布局

```
<ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:divider="#FFFFFF"
        android:dividerHeight="1dp"
        android:listSelector="@drawable/list_selector" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:19:30.180

我在点击时得到了颜色变化

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
...
android:background="@drawable/listitem_states" > 
```

使用 res/values/listitem_states.xml：

```
<?xml version="1.0" encoding="utf-8"?> 
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item
    android:state_selected="true"
   android:drawable="@color/listitem_active_color" ></item>
<item
    android:state_pressed="true"
   android:drawable="@color/listitem_active_color" ></item>
<item 
    android:drawable="@color/listitem_bg_color" /> 
</selector> 
```

我想你可以很容易地适应渐变。

# maven - Maven 站点 + 搜索功能

> ID：14373950
> 
> 赞同：6
> 
> 时间：2013-01-17T07:15:41.653
> 
> 标签：maven, full-text-search, maven-site-plugin

最近在我们的组织中，我们决定使用 maven 站点插件，并在 maven 生成的站点中维护有关我们项目的所有文档。但是我还没有找到任何添加搜索功能的方法，我唯一遇到的一些皮肤提供与谷歌搜索引擎的集成，但我不能使用它，因为我们在我们自己的网络中运行并且没有机会从外部使其“可索引”。

所以，我的问题是是否有人可以为此提出下降解决方案？我考虑开发一种 maven 插件，它可以运行 lucene 并自行索引所有内容，然后提供一个 API 以在站点内使用此搜索，但我希望我不需要重新发明轮子 :) 所以任何建议都会欢迎来到这里

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-25T13:20:41.027

我们正在使用[constellio](http://constellio.com/)按计划索引已发布的站点。到目前为止效果很好。

我提出了[http://jira.codehaus.org/browse/MSKINS-88](http://jira.codehaus.org/browse/MSKINS-88)以涵盖向我们用于构建 maven 站点的[流体皮肤添加通用搜索表单。](http://maven.apache.org/skins/maven-fluido-skin/index.html)希望这会有所进展，我们可以将搜索表单纳入文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T07:31:44.767

只是一个想法，您可以尝试使用基于 JavaScript 的全文搜索引擎，例如[http://jssindex.sourceforge.net/](http://jssindex.sourceforge.net/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-05T17:33:38.353

我知道这是一个老问题，但是完成您想要的事情的一种非常简单（并且公认丑陋）的方法是简单地生成包含站点内容的 PDF 并让您的用户在 PDF 上进行搜索。与在生成的站点上搜索相比的优势在于，任何 PDF 阅读器都可以搜索整个文档。

```
mvn pdf:pdf 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T13:39:40.103

Maven site plugin approach is not widely used. So there is nothing specific for indexing yet. You should look at non-maven tools.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T07:58:51.227

如果您无法使用 Google Site Search，则您依赖于本地搜索实施。因此，您要么需要在站点构建期间构建索引（并使其作为站点的一部分可用），要么在浏览器中同时进行索引和搜索。

除了看起来有些过时的 JSSindex 之外，还有基于 jQuery的[http://www.tipue.com/search/ 。](http://www.tipue.com/search/)

# python - Python导入错误未定义符号：执行我的脚本时的Py_InitModule4

> ID：14373951
> 
> 赞同：2
> 
> 时间：2013-01-17T07:15:50.757
> 
> 标签：python, python-extensions

我正在研究python的C扩展，这个扩展C模块将进行远程过程调用（RPC）来访问网络服务。这个 C 模块将对 RPC 的结果（收集的信息）应用 Py_BuildValue 方法，并使用 PyList_Append 方法将其附加到列表中。最后，此列表对象返回到调用 Python 脚本。我们正在将此 C 模块转换为共享 .so 文件的形式以与 Python 一起使用。

为了解决一些内存泄漏问题，我修改了代码，而不是将 RPC 结果上的 Py_BuildValue 直接附加到列表中，而是将此 Py_BuildValue 结果分配给 PyObject 变量并将该变量附加到列表中。将变量附加到列表后，使用 Py_DECREF 减少此 PyObject 变量的引用计数。在此更改之后，当我在一台机器上执行 Python 脚本时，出现以下错误。

ImportError：/usr/local/support/iadrpcmodule.so：未定义符号：Py_InitModule4

但是我没有在我只使用 Py_InitModule3 的 C 模块中使用变量“Py_InitModule4”。

我使用 python 2.4 编译代码并在 64 位 linux 机器上执行它。

再次有趣的部分是当我重新启动机器时问题消失了..!!。
当我在另一台机器上尝试时，我没有遇到这个问题。

我看到根据 PEP0353 (http://www.python.org/dev/peps/pep-0353/)，在 Python 2.5 的情况下，64 位机器的名称发生了变化，并防止加载假定为 32 的扩展模块位大小类型转换为具有 64 位大小类型的解释器，Py_InitModule4 被重命名为 Py_InitModule4_64。

出现此类问题的原因可能是什么以及如何在重新启动机器时解决？那是因为我的代码更改以解决内存泄漏问题，我是否需要进行任何代码更改来解决此“导入错误”？由于我没有在我的代码中使用 Py_InitModule4，我如何将其重命名为 Py_InitModule4_64 以使用 64 位机器？

我应用了一些修复的先前代码类似于以下内容

```
PyList_Append(outlist,      
              Py_BuildValue(
                    "ss#" "iiiiiiiii" "iiiii" "iiiiiiiiiiiiiiiii" "IIIIIIII",   
                     name,                
                     ref_counter,           
                     type,      
                     local,     
                     proto,                    
                     state)                      
                );    
return Py_BuildValue("O", outlist); 
```

我将代码更改如下，以解决一些内存泄漏问题。

```
PyObject *hostResult = Py_BuildValue(
                    "ss#" "iiiiiiiii" "iiiii" "iiiiiiiiiiiiiiiii" "IIIIIIII",                    
                    name,                    
                    ref_counter,  
                    type,  
                    local,                      
                    proto,   
                    state);                    
PyList_Append(outlist,
              hostResult);   
Py_DECREF(hostResult);   
PyObject * arglist = Py_BuildValue("O", outlist);    
Py_DECREF(outlist);    
return arglist; 
```

还有另一个初始化模块的函数如下我们使用 Py_InitModule3

```
PyMODINIT_FUNC initdrpc(void)
{
    PyObject * m;

    drpc_ClientType.tp_new = PyType_GenericNew;    
    drpc_ClientType.tp_dealloc = (destructor)Client_dealloc;
    if (PyType_Ready(&drpc_ClientType) < 0) {
        return;
    }

    m = Py_InitModule3("drpc", dRpcMethods, module_doc);
    }
}; 
```

此代码使用 Python 2.4 编译，可在任何 64 位机器上运行。执行机器可能同时具有 Python 2.4 和 Python 2.5。

我的问题是为了防止将扩展模块加载到 Python 2.5，即使我们没有使用它，我是否需要在这个模块中明确定义和重命名“Py_InitModule4”？如下所示

```
#if SIZEOF_**strong text**SIZE_T != SIZEOF_INT
/* On a 64-bit system, rename the Py_InitModule4 so that 2.4
   modules cannot get loaded into a 2.5 interpreter */
#define Py_InitModule4 Py_InitModule4_64
#endif 
```

# android - 如何在Android上强制关闭应用程序，例如系统关闭

> ID：14373956
> 
> 赞同：3
> 
> 时间：2013-01-17T07:16:04.847
> 
> 标签：android, forceclose

我想强制关闭我的应用程序作为 Android 系统。
如在系统上选择下面的步骤。

```
"Setting" -> "Apps" -> "my app name" -> "Force stop" 
```

我想通过代码实现相同的行为。
我该怎么做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-17T07:17:54.100

您可以编写下面的代码行来终止您的 App 进程。这是当您单击强制停止时代码运行的内容

> 设置 --> 管理应用程序

```
android.os.Process.killProcess(android.os.Process.myPid()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T07:18:59.817

您可以使用[http://developer.android.com/reference/android/os/Process.html](http://developer.android.com/reference/android/os/Process.html)来终止您的应用程序进程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T07:22:20.057

是的，您可能必须`public static final void killProcess (int pid)` 使用给定的 PID 调用 Kill 进程。请注意，尽管此 API 允许我们根据其 PID 请求终止任何进程，但内核仍会对您实际能够终止的 PID 施加标准限制。通常这意味着仅运行调用者的包/应用程序的进程以及该应用程序创建的任何其他进程；共享一个公共 UID 的包也将能够杀死彼此的进程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-13T14:58:03.083

有强制关闭，也有强制关闭。killProcess 在大多数情况下都会起到作用，但在某些情况下它还不够（例如广播消息）。

要彻底彻底终止应用程序，只需将以下方法添加到您的活动并调用它。这实际上做了什么将留给读者作为练习。:)

```
@SuppressWarnings("null")
public void crash() {
    Object o = null;
    o.hashCode();
} 
```

超级脏，是的。但是如果，例如，你真的需要模拟一个力关闭（就像我做的那样）。

# routing - 距离矢量路由中的交换

> ID：14373958
> 
> 赞同：3
> 
> 时间：2013-01-17T07:16:12.253
> 
> 标签：routing, hyperlink, routes, router

由 4 个路由器 A、B、C 和 D 组成的网络布置如下。都使用距离矢量路由。

`A----B----C----D`

无穷大的值为 8。

最初路由器 A 关闭，所有路由器都相应地调整了它们的路由表。现在，它又回来了。路由器A表需要多少次交换才能稳定。假设所有路由器在同一时刻交换消息。

给出了以下解决方案：

```
Start        inf     inf    inf
1 Exchange    1      inf    inf
2 Exchange    1       2     inf
3 Exchange    1       3      3
4 Exchange    1       3      3 
```

答案 = 4

**但我认为 B 可以将其整个路由表共享给 A，因为它也具有到 C 和 D 的跳数。因此，这只能在 1 次交换中完成。**

需要澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:19:11.513

是的，B 可以将其表发送给 A，但所有其他节点都需要获取到 A 的新距离。

我认为它是这样的：

1) B 发送 A 表和新的 B->A = 1 (< inf)

2) B 发送 C (B->A = 1)，所以 new C->A = 2 (< inf)

3) C 发送 D (C->A = 2)，所以 new D->A = 3 (< inf)

4) D 发送 C (D->A = 3)，但 C->A = 2 < 4 = D->A + 1，所以 C->A 保持 2

提供的表格看起来不对，我认为应该是：（假设我对列含义的假设是正确的）

```
 B->A    C->A   D->A
Start        inf     inf    inf
1 Exchange    1      inf    inf
2 Exchange    1       2     inf
3 Exchange    1       2      3
4 Exchange    1       2      3 
```

# java - 如何使用 Java 1.7 在 OSX 上运行 FlashBuilder 4.7

> ID：14373963
> 
> 赞同：3
> 
> 时间：2013-01-17T07:16:41.210
> 
> 标签：java, ios, macos, flash-builder

FlashBuilder 4.7 非常酷，而且 ios 集成现在更好了，因为它可以自动安装在设备上并通过 USB 进行调试。您现在还可以针对 AIR 设备模拟器（这是 FB 附带的标准设备）或 XCode 附带的 iOS 模拟器进行调试。然后，如果您正在与工人一起玩，由于使用了更花哨的工具，多线程现在变得更加容易和无缝。ETC...

但是，FlashBuilder 4.7 仅支持 JDK 1.6。它似乎工作正常，直到我尝试在设备上运行我的移动应用程序。从我的系统中删除 JDK 1.7 不是一种选择，因为我正在编写 java 和 flex 代码。我花了几个小时才弄清楚这一点。希望它可以节省别人一些时间。欢迎任何其他补充意见/提示

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T07:16:41.210

如前所述，为 ios 编译不适用于 JDK1.7。因此，如果您有一个 mac，并且您安装了 JDK1.7，那么您可能想要创建一个小 shell 脚本。我的位于：
/Applications/Adobe Flash Builder 4.7/run.sh
包含：

```
export JAVA_HOME="/System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home/"
/Applications/Adobe\ Flash\ Builder\ 4.7/Adobe\ Flash\ Builder\ 4.7.app/Contents/MacOS/Adobe\ Flash\ Builder\ 4.7 
```

现在，你可能想从你的扩展坞启动它，因为从终端运行它有点麻烦，所以启动 Automator 并创建新的应用程序。称它为 FB4.7 或任何你喜欢的。接下来，在左上角的搜索字段中，搜索 shell script。在“运行 shell 脚本”下的右窗格中，输入以下内容：

```
/Applications/Adobe\ Flash\ Builder\ 4.7/run.sh 
```

对，现在将应用程序保存在 /Applications 下，然后像其他应用程序一样将其拖到您的 Dock 中。

您可能还想使用 AIR3.5 运行它。我在使用 FB4.7 附带的标准 AIR sdk 通过 USB 调试 ios 时遇到了一些问题，因此在终端中，（注意我不使用 finder 作为 finder 替换文件夹的全部内容）执行以下操作：

```
cd /Applications/Adobe\ Flash\ Builder\ 4.7/sdks/
cp -rv 4.6.0 4.6.0-Air3.5 
cp -rv ~/Downloads/air3-5_p4_sdk_asc2_mac_111912/* ./4.6.0-Air3.5/
# you might need to use appropriate path of wherever you put air3.5 after you copied / downloaded it 
```

如果 FB 处于打开状态，您可能还需要退出并且：

```
cd /Applications/Adobe\ Flash\ Builder\ 4.7/eclipse/plugins/com.adobe.flash.compiler_4.7.0.349722/
mv AIRSDK AIRSDK.old 
cp -rv /Applications/Adobe\ Flash\ Builder\ 4.7/sdks/4.6.0-Air3.5 ./AIRSDK 
```

我还发现，为了使调试工作，您可能必须去 iTunes 并手动弹出除您正在调试的设备之外的所有设备，当然

哦，是的，为了让它在 IOS 模拟器上工作，我还必须去 xcode 并安装 ios sdk5.0。还没有真正研究过如何使用更新的 ios sdk 运行。每次运行模拟器时都会弹出一个烦人的弹出窗口，我必须选择我的 sdk 版本，但现在必须这样做

快乐编码

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-20T12:15:45.660

我知道这个问题已经很老了，但我最近遇到了这个问题，我花了一些时间才找到一个可行的解决方案。

我在我的 mac 上使用*Flash Builder 4.7*和 2 个 java JDK 文件夹：

*   爪哇*JDK 1.8.0*。这是 Eclipse / Android Studio 的所有其他安装使用的默认 JDK ..
*   爪哇*JDK 1.6.0*。这只是 JDK 库文件夹。

您必须指向*Flash Builder 4.7.ini*文件中的 1.6.0 JRE。您可以在 Flash Builder 应用程序的 Contents 文件夹中找到该文件：

```
.../Adobe Flash Builder 4.7.app/Contents/MacOS/Adobe Flash Builder.ini 
```

在该文件中，使用 -vm 选项指定 JRE 1.6.0 的 bin 文件夹的路径。我认为 -vm 选项需要在 -vmargs 选项之前出现。我完整的 .ini 文件如下所示：

```
-startup
../../../eclipse/plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
../../../eclipse/plugins/org.eclipse.equinox.launcher.cocoa.macosx.x86_64_1.1.100.v20110502
--launcher.defaultAction
openFile
-showsplash
../../../assets/fb_splash_premium.png
-nl
en_US
-vm
/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin
-vmargs
-Xms2048m
-Xmx4096m
-XX:MaxPermSize=256m
-XX:PermSize=64m
-Xdock:name=Flash Builder
-Xdock:icon=../Resources/fb_app.icns
-XstartOnFirstThread
-Dorg.eclipse.swt.internal.carbon.smallFonts
-Declipse.product=com.adobe.flexbuilder.standalone.producte36
-Declipse.application=com.adobe.flexbuilder.standalone.FlashBuilderApplication
-Dfile.encoding=UTF-8 
```

启动新工作区时，您可能希望在工作区的首选项中调整配置的 JRE。我不知道这一步是否必要。

Flash Builder > 首选项 > Java > 已安装的 JRE > 添加..

```
1\. Select MacOS X VM as JRE Type
2\. Enter the path to the JRE 
```

[输入 JRE 路径的屏幕截图](https://i.stack.imgur.com/q4tkb.png)

```
3\. Select the new JRE: 
```

* * *

克里斯托建议的答案对我不起作用。Flash Builder 继续使用我最新的 java jdk (1.8.0) 启动，导致启动错误。

* * *

我还尝试了 adobe 在 2016 年给出的解决方案：http: [//blogs.adobe.com/flashplayer/2016/09/running-adobe-flash-builder-on-mac-with-java-78.html#sthash.sqbeFw8g .dpbs](http://blogs.adobe.com/flashplayer/2016/09/running-adobe-flash-builder-on-mac-with-java-78.html#sthash.sqbeFw8g.dpbs)

使用 adobe 的解决方案，您确实可以启动使用 jdk8 的 Flash Builder 4.7，但是一旦您尝试将预构建的库用于您的弹性项目之一，您就会遇到构建错误。

# sql-server - 选择按 ID 分组的逗号分隔列表

> ID：14373967
> 
> 赞同：4
> 
> 时间：2013-01-17T07:16:48.670
> 
> 标签：sql-server, tsql

我有以下表格：

```
EntryTag
---------
EntryID
TagID 
```

示例 putput（EntryID、TagID）：

```
1 2
1 4
1 5
2 3
2 4
2 5
etc... 
```

和

```
Tags
----
TagID
Name 
```

示例输出：

```
1 peas
2 corn
3 carrots
...etc. 
```

我想恢复每个条目的标签列表，但作为标签用逗号分隔的一行。

例如我想看到这个：

```
EntryID     TagsCommaDelimited
-------     ------------------
1           corn, peas, carrots
2           barley, oats
...and so on 
```

所以我需要列出每个 EntryID 及其对应的逗号分隔标签列表。

我从如下所示的内容表中选择：

```
Content
--------
ID   -(which is in essence the EntryID, they didn't make it consistent)
Description
..etc. 
```

这是我尝试过的，但我的语法没有运气：

```
declare @tagsCommaDelimited varchar (200) 
set @tagsCommaDelimited = '';

With AllEntryTags_CTE(Name, EntryID )
as
(
    select Tags .Name,
           entryTags.EntryID 
    from  EntryTag entryTags
    join Tags on tags.Id = entryTags.TagID
    group by entryTags.EntryID, tags.Name, entryTags.TagID 
),

TagsByEntryCommaDelimited_CTE( EntryID, CommaDelimitedTags)
as
(
    select  distinct allTags.EntryID,
            (select @tagsCommaDelimited from ( select @tagsCommaDelimited = coalesce (case when @tagsCommaDelimited = '' then allTags.Name
                                                                                      else @tagsCommaDelimited + ',' + allTags.Name end ,'') as CommaDelimitedTags
    from  AllEntryTags_CTE allTags  
)

select EntryID, CommaDelimitedTags from TagsByEntryCommaDelimited_CTE 
```

- - - - - - - - - - - - - -更新 - - - - - - - - - - - ------------

现在我和 gotgn 一起去测试

我现在遇到的问题是，我试图在我的最终选择语句中使用最后一个 CTE 来获取以逗号分隔的标签名称列表。但它说我的语法不正确：

```
;WITH CommaDelimitedTagIDs AS
(
    SELECT DISTINCT EntryID,
    (SELECT SUBSTRING((SELECT ',' + CAST(TagID AS NVARCHAR(10)) 
                       FROM EntryTag AS T1 WHERE T1.EntryID=T2.EntryID 
                       ORDER BY TagID 
                       FOR XML PATH('')),2,200)) AS commaDelimitedTagIDs
    FROM EntryTag T2 
),

CommaDelimittedTagNames_CTE (EntryID, CommaDelimitedTagNames) as
( 
    SELECT EntryID, (SELECT SUBSTRING((SELECT ',' + Name 
                     FROM Tags 
                     WHERE commaDelimitedTagIDs LIKE '%'+CAST(ID AS NVARCHAR(5))+'%'  
                     ORDER BY ID FOR XML PATH('')),2,200) AS CSV) 
    FROM CommaDelimitedTagIDs
)

--select EntryID, CommaDelimitedTagNames from CommaDelimittedTagNames_CTE

SELECT  Title,
        [Description],
        DateSyndicated,
        DateUpdated,
        1, 
        CAST([Text] AS NVARCHAR(MAX)),
        Author,
        (select CommaDelimitedTagNames from CommaDelimittedTagNames_CTE) as tagNamesCommaDelimited 
 FROM Content
 Join CommaDelimittedTagNames_CTE tags on tags.EntryID = Content.ID
 group by ID, Title, [Description], 
          DateSyndicated, DateUpdated, 
          CAST(subtextContent.[Text] AS NVARCHAR(MAX)), Author 
```

也试过这种方式，没有运气

```
 Select
    ....other fields
    (select CommaDelimitedTagNames from CommaDelimittedTagNames_CTE tagNames 
     join subContent on subContent.ID = tagNames.EntryID) as tags 
  FROM Content as subContent 
```

好的，我想您不能加入，我不得不将其更改为 Where。不知道为什么，但这现在有效：

```
 Select
    ....other fields
    (select CommaDelimitedTagNames from CommaDelimittedTagNames_CTE tagNames 
     where Content.ID = tagNames.EntryID) as tags 
  FROM Content 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T07:49:53.653

```
select ET1.EntryID,
       (
       select ', '+T.Name
       from Tags as T
         inner join EntryTag as ET2
           on T.TagID = ET2.TagID
       where ET1.EntryID = ET2.EntryID
       for xml path(''), type
       ).value('substring(text()[1], 3)', 'varchar(max)') as TagsCommaDelimited
from EntryTag as ET1
group by ET1.EntryID 
```

**剖析查询**

主查询执行 a `group by`，因此每个`EntryID`.

该列`TagsCommaDelimited`是使用相关子查询创建的。

在 SQL Server[`for xml path`](http://msdn.microsoft.com/en-us/library/ms190922.aspx)中用于创建查询结果的 XML 表示。您可以通过使用列别名和参数来很好地控制 XML 的创建方式`path`和`root`。

相关子查询中的连接值`', '+T.Name`将没有列名和空参数来`for xml path('')`创建完全没有任何标签的 xml。只会返回一个文本值。

当您添加[`type`](http://msdn.microsoft.com/en-us/library/ms190025.aspx)到`for xml`查询时，数据类型将为`XML`.

要从 XML 中获取值，您应该使用该[`value()`](http://msdn.microsoft.com/en-us/library/ms178030.aspx)方法。你可以转换成一个字符串，但是如果你这样做了，例如你会`&amp;`在任何你使用过的地方进入字符串`&`。

函数中的第一个参数`value()`是用于获取所需值的 xQuery 表达式。用于`text()`指定您只需要当前元素的值。`[1]`告诉 SQL Server 你想要找到第一个文本节点（你这里只有一个），但它仍然是必要的。

查询创建的字符串在`for xml`字符串开头有一个额外的逗号和一个空格，需要删除。在这里，我使用 XQuery 函数[`substring`](http://msdn.microsoft.com/en-us/library/ms178063.aspx)来获取除前两个字符之外的所有内容。

第二个参数`value()`指定应返回的数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:20:38.027

```
DECLARE @TableOne TABLE
(
    EntryID INT,
    TagID INT
)

DECLARE @TableTwo TABLE
(
    TagID INT,
    Name NVARCHAR(100)
)

INSERT INTO @TableOne (EntryID,TagID)
VALUES  (1,2)
       ,(1,4)
       ,(1,5)
       ,(2,3)
       ,(2,4)
       ,(2,1)

INSERT INTO @TableTwo (TagID,Name)
VALUES  (1,'Daniel')
       ,(2,'Samuel')
       ,(3,'Petkov')
       ,(4,'Ivan')
       ,(5,'Jack')

/* 
    In this CTE we are going to format the values int the folowing way:

    1   2,4,5
    2   1,3,4

    Or for eaech EntryIDs, we will have all its TagIDs 

*/
;WITH CTE AS
(
    SELECT DISTINCT EntryID
          ,(SELECT SUBSTRING((SELECT ',' + CAST(TagID AS NVARCHAR(10)) FROM @TableOne AS T1 WHERE T1.EntryID=T2.EntryID ORDER BY TagID FOR XML PATH('')),2,200)) AS CSVTags
    FROM @TableOne T2

)
/*
    Here we are replacing the EntryIDs with their names from the @TableTwo:
*/
SELECT EntryID
      ,(SELECT SUBSTRING((SELECT ',' + Name FROM @TableTwo WHERE CSVTags LIKE '%'+CAST(TagID AS NVARCHAR(5))+'%' ORDER BY TagID FOR XML PATH('')),2,200) AS CSV) 
FROM CTE 
```

# asp.net - 从 google drive api 获取数据

> ID：14373974
> 
> 赞同：1
> 
> 时间：2013-01-17T07:17:45.377
> 
> 标签：asp.net, api, google-drive-api

我想访问 google drive api 方法。我有这个访问令牌。我正在使用 c#.net。我基本上想为用户创建自定义 api 方法，以便他们可以将访问令牌传递给一个方法来调用它。所以我想知道它是否可能，如果可能的话，我能得到一个例子。

我在谷歌上搜索了很多，发现了一个“Dr.Edit”示例应用程序。它使用许多方法来检索数据，但它使用 driveservice 对象作为每个方法中的参数。该对象由其内部的 acccesstoken 组成，但我没有找到任何仅通过 accesstoken 获取数据的方法。

您的任何帮助将不胜感激。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T21:59:46.743

请查看 C# 示例，了解如何[获取授权凭据](https://developers.google.com/drive/credentials)。

# ruby - 云代工上传错误

> ID：14373981
> 
> 赞同：0
> 
> 时间：2013-01-17T07:18:26.313
> 
> 标签：ruby, cloud-foundry, vmc

得到以下错误`vmc push`

```
Errno::EINVAL: Invalid argument - C:/DOCUME~1/lihengxu/LOCALS~1/Temp/.vmc_blog_files/E:
C:/Ruby187/lib/ruby/1.8/fileutils.rb:243:in `mkdir'
C:/Ruby187/lib/ruby/1.8/fileutils.rb:243:in `fu_mkdir'
C:/Ruby187/lib/ruby/1.8/fileutils.rb:217:in `mkdir_p'
C:/Ruby187/lib/ruby/1.8/fileutils.rb:215:in `reverse_each'
C:/Ruby187/lib/ruby/1.8/fileutils.rb:215:in `mkdir_p'
C:/Ruby187/lib/ruby/1.8/fileutils.rb:201:in `each'
C:/Ruby187/lib/ruby/1.8/fileutils.rb:201:in `mkdir_p'
cfoundry-0.4.19/lib/cfoundry/zip.rb:27:in `unpack'
rubyzip-0.9.9/lib/zip/zip_entry_set.rb:35:in `each'
rubyzip-0.9.9/lib/zip/zip_entry_set.rb:35:in `each'
rubyzip-0.9.9/lib/zip/zip_central_directory.rb:109:in `each'
rubyzip-0.9.9/lib/zip/zip_file.rb:132:in `foreach'
rubyzip-0.9.9/lib/zip/zip_file.rb:90:in `open'
rubyzip-0.9.9/lib/zip/zip_file.rb:131:in `foreach'
cfoundry-0.4.19/lib/cfoundry/zip.rb:24:in `unpack'
cfoundry-0.4.19/lib/cfoundry/upload_helpers.rb:58:in `prepare_package'
cfoundry-0.4.19/lib/cfoundry/upload_helpers.rb:42:in `upload'
vmc-0.4.7/lib/vmc/cli/app/push.rb:119:in `upload_app'
interact-0.5.1/lib/interact/progress.rb:98:in `with_progress'
vmc-0.4.7/lib/vmc/cli/app/push.rb:118:in `upload_app'
vmc-0.4.7/lib/vmc/cli/app/push.rb:100:in `setup_new_app'
vmc-0.4.7/lib/vmc/cli/app/push.rb:82:in `push'
mothership-0.3.5/lib/mothership/base.rb:61:in `send'
mothership-0.3.5/lib/mothership/base.rb:61:in `run'
mothership-0.3.5/lib/mothership/command.rb:68:in `invoke'
manifests-vmc-plugin-0.4.19/lib/manifests-vmc-plugin/plugin.rb:113:in `call'
manifests-vmc-plugin-0.4.19/lib/manifests-vmc-plugin/plugin.rb:113
mothership-0.3.5/lib/mothership/callbacks.rb:74:in `with_filters'
manifests-vmc-plugin-0.4.19/lib/manifests-vmc-plugin/plugin.rb:112
mothership-0.3.5/lib/mothership/command.rb:78:in `instance_exec'
mothership-0.3.5/lib/mothership/command.rb:78:in `invoke'
mothership-0.3.5/lib/mothership/command.rb:82:in `instance_exec'
mothership-0.3.5/lib/mothership/command.rb:82:in `invoke'
mothership-0.3.5/lib/mothership/base.rb:50:in `execute'
vmc-0.4.7/lib/vmc/cli.rb:106:in `execute'
mothership-0.3.5/lib/mothership.rb:45:in `start'
vmc-0.4.7/bin/vmc:11
C:/Ruby187/bin/vmc:23:in `load'
C:/Ruby187/bin/vmc:23 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:51:38.933

请试试

```
gem install vmc --pre 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:35:40.843

其他 vmc 命令是否有效？

您可以尝试在 Ruby 1.9 上运行它吗？

# mysql - 查询 MySQL Geometry 数据类型列中的数据

> ID：14373982
> 
> 赞同：1
> 
> 时间：2013-01-17T07:18:28.547
> 
> 标签：mysql, geometry, gis, shapefile

我有一个表，它将多边形存储在我使用 ogr2ogr 通过 shapefile 加载的 GEOMETRY 数据类型列中。这是创建语句：

```
CREATE TABLE IF NOT EXISTS `sunzones` (
  `OGR_FID` int(11) NOT NULL AUTO_INCREMENT,
  `polygon` geometry NOT NULL,
  UNIQUE KEY `OGR_FID` (`OGR_FID`),
  SPATIAL KEY `polygon` (`polygon`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=105 ; 
```

这是一个示例记录：

```
POLYGON((449455.354522821 2447255.57758461,449700.419971925 2447132.08575524,449970.797988416 2447012.08302579,450331.302189915 2446845.08750142,450720.557402377 2446631.12366577,451001.686314893 2446471.65633497,451351.253709065 2446236.2071619,451621.320850174 2445889.34918971,451822.94912776 2445643.44939179,451970.329536186 2445268.16443891,451900.90187755 2444641.13680345,451762.850153972 2443964.1640728,451483.986510987 2443208.22160261,451201.806260121 2442650.10616671,451020.687327243 2442095.95148262,450839.505763005 2441544.78980207,450683.636511575 2441015.10597334,450538.454805135 2440413.89081544,450433.333155727 2440035.55620047,450360.648999258 2439678.70563045,450288.151292623 2439419.31682052,450118.029551282 2439008.99974342,449901.03211162 2438634.67295293,449702.407549484 2438469.26337817,449341.345080443 2438239.89817619,449070.656839706 2438139.47157292,448886.71805136 2438143.99566917,448634.339635752 2438227.50240038,448385.707435195 2438433.96784289,448234.638650137 2438747.88628722,448145.380437968 2439372.19635416,448095.562049752 2439852.04892374,447984.553987549 2440439.87931978,447808.669818343 2441024.70524153,447592.724965448 2441364.09711298,447275.840595988 2441754.49255107,447067.208249397 2442148.36776757,446617.319564483 2442841.67896542,446426.750106166 2443289.53943803,446257.992375297 2443841.82345023,446157.983746886 2444530.46142231,446014.475379242 2445071.69774818,445881.655839275 2445515.48887139,445748.650167696 2445843.84709753,445669.894930651 2446244.64998972,445684.828488262 2446608.40816774,445779.199887883 2446997.59260231,445887.760935538 2447234.8818733,446155.073525621 2447526.07468538,446451.07445614 2447654.87106738,446714.451262744 2447697.24267349,446959.766023142 2447696.15327556,447233.893916706 2447670.07230515,447450.271461094 2447633.52082824,448020.090403634 2447559.36967915,448377.094925486 2447485.7971982,448943.225936908 2447365.18349843,449455.354522821 2447255.57758461)) 
```

使用以下方式查询：

```
SELECT ASTEXT( POLYGON ) FROM  `sunzones`; 
```

我有一个特定的纬度和经度，我想知道哪些记录具有包含该纬度/经度的多边形，所以我尝试了这个查询：

```
SELECT * FROM sunzones WHERE MBRWithin(GeomFromText('Point(21.3069 -157.8583)'), polygon); 
```

但这不会返回任何记录。我什至尝试将 lat/lng 转换为 UTM 坐标，但此查询也不返回任何记录：

```
SELECT * FROM sunzones WHERE MBRWithin(GeomFromText('Point(2447696.15327556 447233.893916706)'), polygon); 
```

我的查询有问题吗？

顺便说一句，我正在使用 MySQL 5.6。另外，我也尝试过 ST_CONTAINS() 和 CONTAINS()。

*请注意，查询中的坐标不一定位于我在上面发布的单个示例多边形内。形状都在夏威夷，所以我的纬度/经度只是檀香山的坐标。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T00:50:20.490

After spending way too long messing with this, I came up with the right syntax for the query:

```
SELECT * FROM sunzones WHERE MBRWITHIN( POINT( 863575.082797506, 2137306.79465704 ) , polygon ) 
```

The important things to note here are that the coordinates are reversed (longitude/latitude, not latitude/longitude), and unlike most examples posted, I didn't have to use GeomFromText() to declare the Point.

# ios - 需要解释 vDSP_zcoher()

> ID：14373997
> 
> 赞同：1
> 
> 时间：2013-01-17T07:19:40.833
> 
> 标签：ios, signal-processing, core-audio, accelerate-framework, vdsp

我目前正在处理原始音频数据并比较我遇到的两条信号[vDSP_zcoher()](https://developer.apple.com/library/mac/documentation/Accelerate/Reference/vDSPRef/Reference/reference.html#//apple_ref/doc/uid/TP40009464-CH15-BBCHJHJI)我对此有几个问题：

1.  为什么输出是一个复杂的数组而不是真实的。例如，我期望一个真正的数组，就像相关性的输出一样。**更新：**文档中似乎是错误的，D 是真实的。
2.  参数 A、B 和 C 是否在累积使用[vDSP_zaspec](https://developer.apple.com/library/mac/documentation/Accelerate/Reference/vDSPRef/Reference/reference.html#//apple_ref/doc/uid/TP40009464-CH15-BBCEFJEJ) (A,B) 和[vDSP_zcspec](https://developer.apple.com/library/mac/documentation/Accelerate/Reference/vDSPRef/Reference/reference.html#//apple_ref/doc/uid/TP40009464-CH15-BBCGCDCF) (C) 创建的自频谱和交叉频谱？
3.  我是否正确，结果应该表明信号有多相似？

该功能的一般解释也很受欢迎！

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:08:14.283

1.  D 是实数，不复数。将 __vDSP_D 描述为“复杂输出向量”的文档是错误的。显示声明“float *__vDSP_D”的文档是正确的。

2.  D 不是输入，因此它通常不包含`vDSP_zaspec`or的输出`vDSP_zcspec`。

否则，我无法谈论如何使用这些函数，抱歉，我没有信号处理理论的背景。

# java - JProgressBar 动态更改条形颜色

> ID：14373999
> 
> 赞同：5
> 
> 时间：2013-01-17T07:19:49.377
> 
> 标签：java, swing, jprogressbar, nimbus, uimanager

我正在使用`JProgressBar`组件以及 Nimbus UI 默认值。问题是当我想手动更改每个进度条的条颜色时，我`BasicProgressBarUI`通过设置`JProgressBar.setUI()`功能使用。这会带来更多麻烦，因为我只想更改条形颜色，而且似乎我失去了 jprogressbar 的默认外观（边框，背景色消失）。

所以我可以`UIDefaults`在代码初始化时设置 Nimbus ProgressBar。有用。

但我想动态更改每个进度条的颜色。

有没有其他方法可以改变 Bar 颜色`JProgressBar`？

```
public class ProgressGenerator extends JFrame {

    protected int minValue = 0;
    protected int maxValue = 100;
    protected int counter = 0;
    protected JProgressBar progressBar;

    public ProgressGenerator() {
        super("JProgressBar Demo");
        setSize(300, 100);

        try {
            UIManager.setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel");
        } catch (ClassNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (InstantiationException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IllegalAccessException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (UnsupportedLookAndFeelException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        progressBar = new JProgressBar();
        progressBar.setMinimum(minValue);
        progressBar.setMaximum(maxValue);
        progressBar.setStringPainted(true);

        progressBar.setForeground(Color.GREEN);

        JButton start = new JButton("Start");
        start.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                Thread runner = new Thread() {
                    public void run() {
                        counter = minValue;
                        while (counter <= maxValue) {
                            Runnable runme = new Runnable() {
                                public void run() {
                                    progressBar.setValue(counter);
                                }
                            };
                            SwingUtilities.invokeLater(runme);
                            counter++;
                            try {
                                Thread.sleep(100);
                            } catch (Exception ex) {
                            }
                        }
                    }
                };
                runner.start();
            }
        });
        getContentPane().add(progressBar, BorderLayout.CENTER);
        getContentPane().add(start, BorderLayout.WEST);
        WindowListener wndCloser = new WindowAdapter() {
            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        };
        addWindowListener(wndCloser);
        setVisible(true);
    }

    public static void main(String[] args) {
        new ProgressGenerator();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T14:23:47.207

+1 为 Kelopatra 获得第一。

这是我做的一个例子：

JProgressBar 颜色最初通过以下方式设置：

```
UIDefaults defaults = new UIDefaults();
defaults.put("ProgressBar[Enabled].foregroundPainter", new MyPainter(Color.GREEN));
defaults.put("ProgressBar[Enabled+Finished].foregroundPainter", new MyPainter(Color.GREEN));

progressBar.putClientProperty("Nimbus.Overrides.InheritDefaults", Boolean.TRUE);
progressBar.putClientProperty("Nimbus.Overrides", defaults); 
```

在 50% 的进度下，颜色将变为红色：

```
if (progressBar.getValue() == 50) {//change color on 50%
   UIDefaults defaults = new UIDefaults();
   defaults.put("ProgressBar[Enabled].foregroundPainter", new MyPainter(Color.RED));
   defaults.put("ProgressBar[Enabled+Finished].foregroundPainter", new MyPainter(Color.RED));
   progressBar.putClientProperty("Nimbus.Overrides.InheritDefaults", Boolean.TRUE);
   progressBar.putClientProperty("Nimbus.Overrides", defaults);                          
} 
```

测试.java：

![在此处输入图像描述](../Images/674e2ef7a309f1d371db086d9513b137.png)

![在此处输入图像描述](../Images/9cc101c33c18fefe0053545e9dcdce9b.png)

```
import java.awt.Color;
import java.awt.Graphics2D;
import java.awt.event.*;
import java.beans.*;
import javax.swing.*;

public class Test {

    public static void createAndShowGUI() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);

        final JProgressBar progressBar = new JProgressBar();
        progressBar.setStringPainted(true);
        progressBar.setValue(0);
        progressBar.setBorderPainted(false);

        JButton startButton = new JButton("Start");

        startButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                UIDefaults defaults = new UIDefaults();
                defaults.put("ProgressBar[Enabled].foregroundPainter", new MyPainter(Color.GREEN));
                defaults.put("ProgressBar[Enabled+Finished].foregroundPainter", new MyPainter(Color.GREEN));

                progressBar.putClientProperty("Nimbus.Overrides.InheritDefaults", Boolean.TRUE);
                progressBar.putClientProperty("Nimbus.Overrides", defaults);

                SwingWorker worker = new SwingWorker() {
                    int current = 0, lengthOfTask = 100;

                    @Override
                    public Void doInBackground() {
                        while (current <= lengthOfTask && !isCancelled()) {

                            try { // dummy task
                                Thread.sleep(50);
                            } catch (InterruptedException ie) {
                            }

                            setProgress(100 * current / lengthOfTask);
                            current++;
                        }
                        return null;
                    }
                };
                worker.addPropertyChangeListener(new PropertyChangeListener() {
                    @Override
                    public void propertyChange(PropertyChangeEvent pce) {

                        String strPropertyName = pce.getPropertyName();
                        if ("progress".equals(strPropertyName)) {
                            int progress = (Integer) pce.getNewValue();
                            progressBar.setValue(progress);

                            if (progressBar.getValue() == 50) {//change color on 50%
                                UIDefaults defaults = new UIDefaults();
                                defaults.put("ProgressBar[Enabled].foregroundPainter", new MyPainter(Color.RED));
                                defaults.put("ProgressBar[Enabled+Finished].foregroundPainter", new MyPainter(Color.RED));

                                progressBar.putClientProperty("Nimbus.Overrides.InheritDefaults", Boolean.TRUE);
                                progressBar.putClientProperty("Nimbus.Overrides", defaults);
                            }

                        }
                    }
                });
                worker.execute();
            }
        });

        JPanel holder = new JPanel();
        holder.add(progressBar);
        holder.add(startButton);

        frame.add(holder);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel");
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                    ex.printStackTrace();
                }
                createAndShowGUI();
            }
        });
    }
}

class MyPainter implements Painter<JProgressBar> {

    private final Color color;

    public MyPainter(Color c1) {
        this.color = c1;
    }
    @Override
    public void paint(Graphics2D gd, JProgressBar t, int width, int height) {
        gd.setColor(color);
        gd.fillRect(0, 0, width, height);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T14:21:57.477

Nimbus 支持每个组件的皮肤，例如已在其他 QA 中回答。应用于 JProgressBar “栏”，这意味着使用自定义foregroundPainter 配置实例，例如：

```
progressBar = new JProgressBar();

UIDefaults defaults = new UIDefaults();
Painter painter = new MyPainter(Color.GREEN);
defaults.put("ProgressBar[Enabled].foregroundPainter", painter);
defaults.put("ProgressBar[Enabled+Finished].foregroundPainter", painter);

progressBar.putClientProperty("Nimbus.Overrides.InheritDefaults", Boolean.TRUE);
progressBar.putClientProperty("Nimbus.Overrides", defaults); 
```

最小（丑陋）的画家将是这样的：

```
public static class MyPainter extends AbstractRegionPainter {

    private Color fillColor;
    public MyPainter(Color color) {
        // as a slight visual improvement, make the color transparent
        // to at least see the background gradient
        // the default progressBarPainter does it as well (plus a bit more)
        fillColor = new Color(
                color.getRed(), color.getGreen(), color.getBlue(), 156);
    }

    @Override
    protected void doPaint(Graphics2D g, JComponent c, int width,
            int height, Object[] extendedCacheKeys) {
        g.setColor(Color.GREEN);
        g.fillRect(0, 0, width, height);
    }

    @Override
    protected PaintContext getPaintContext() {
        return null;
    }

} 
```

为了使其视觉上令人愉悦，请查看 ProgressBarPainter：它是私有包，因此除了了解它如何实现其渐变/路径绘制并在自定义实现中执行相同操作外，您无能为力。