# StackOverflow 问答 15816000-15816999

# android - 在 Toast 中显示电话号码

> ID：15816000
> 
> 赞同：1
> 
> 时间：2013-04-04T15:55:55.997
> 
> 标签：android, arraylist, adapter, toast, android-dialogfragment

好的，我几乎所有东西都在工作。唯一的问题是，每当我单击通过对话框添加到列表视图中的新条目时，应用程序就会崩溃，而不是在 toast 中显示电话号码。我想要它做的如下（大多数步骤都正常工作）

1.  我通过模拟器上的菜单按钮进入对话框，然后单击对话框的菜单项。
2.  我输入姓名和电话号码（我用我的作为测试）
3.  它将数据作为联系人对象传递给 ArrayAdapter，ArrayAdapter 将添加到 MainActivity 中的 ListView。
4.  当我单击新条目时，它会获取联系人的姓名，然后在数据库中查找与该姓名关联的电话号码并将其显示在 toast 中。（该部分无法正常工作，导致上述崩溃）

AddContactFragment.java：

```
 package com.example.java2lab10_lefelhocz;

    import com.example.java2lab10_lefelhocz.R;

    import android.app.AlertDialog;
    import android.app.Dialog;
    import android.app.DialogFragment;
    import android.content.DialogInterface;
    import android.content.DialogInterface.OnClickListener;
    import android.os.Bundle;
    import android.view.LayoutInflater;
    import android.widget.*;

    public class AddContactFragment extends DialogFragment 
    {

    private EditText txtNameEdit;
    private EditText txtPhoneEdit;

    private LayoutInflater inflater;

    // called when the DialogFragment is created
    public Dialog onCreateDialog(Bundle savedInstanceState)
    {
    // create the dialog builder
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());     

    // Get the layout inflater object    
    inflater = getActivity().getLayoutInflater();      

    // Inflate and set the layout for the dialog     
    // Pass null as the parent view because its going in the dialog layout     
    builder.setView(inflater.inflate(R.layout.add_contact, null));
    builder.setTitle("Add a Contact");

    builder.setPositiveButton("Add", new OnClickListener(){

    @Override
    public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub
        txtNameEdit = (EditText)getDialog().findViewById(R.id.txtNameEdit);
        txtPhoneEdit =      (EditText)getDialog().findViewById(R.id.txtPhoneEdit);
        MainActivity ma = (MainActivity)getActivity();
        ma.addContact(txtNameEdit.getText().toString(),     txtPhoneEdit.getText().toString());

    }

    });

    builder.setNegativeButton("Cancel", new OnClickListener(){

    @Override
    public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub
        dialog.dismiss();
    }

    });
    return builder.create();
     }
    } 
```

联系方式.java：

```
 // Project:          Java2Lab10_Lefelhocz
       // File:         Contact.java
    // Date:            11/1/12
    // Description:     This class represents a contact

    package com.example.java2lab10_lefelhocz;  

    public class Contact 
    { 

        //private variables 
        private int _id; 
        private String _name; 
        private String _phone_number; 

        // Empty constructor 
        public Contact()
        { 

        } 
        // constructor 
         public Contact(int id, String name, String _phone_number)
        { 
         this._id = id; 
         this._name = name; 
         this._phone_number = _phone_number; 
         } 

         // constructor 
         public Contact(String name, String _phone_number)
         { 
         this._name = name; 
         this._phone_number = _phone_number; 
         } 
         // getting ID 
         public int getID()
         { 
         return this._id; 
         } 

        // setting id 
        public void setID(int id)
        { 
             this._id = id; 
        } 

        // getting name 
        public String getName()
        { 
            return this._name; 
        } 

        // setting name 
        public void setName(String name)
       { 
            this._name = name; 
       } 

      // getting phone number 
      public String getPhoneNumber()
      { 
    return this._phone_number; 
      } 

      // setting phone number 
      public void setPhoneNumber(String phone_number)
      { 
           this._phone_number = phone_number; 
       } 
         public String toString(){
     return _name;
         }
         } 
```

数据库处理程序.java

```
 // Project:            Java2Lab10_Lefelhocz
     // File:           DatabaseHandler.java
     // Date:           04/3/13
     // Description:        This class handles all database operations
     //                 Databases opened for write should be      closed.

    package com.example.java2lab10_lefelhocz;

    import java.util.ArrayList;
    import java.util.List;

    import com.example.java2lab10_lefelhocz.Contact;

    import android.content.ContentValues;
    import android.content.Context;
    import android.database.Cursor;
    import android.database.sqlite.SQLiteDatabase;
    import android.database.sqlite.SQLiteOpenHelper;

    // This class extends SQLiteOpenHelper and handles all database operations
    public class DatabaseHandler extends SQLiteOpenHelper 
    {
// All Static variables 
    // Database Version 
    private static final int DATABASE_VERSION = 1; 

    // Database Name 
    private static final String DATABASE_NAME = "contactsManager"; 

    // Contacts table name 
    private static final String TABLE_CONTACTS = "contacts"; 

    // Contacts Table Columns names 
    private static final String KEY_ID = "id"; 
    private static final String KEY_NAME = "name"; 
    private static final String KEY_PH_NO = "phone_number"; 

    // constructor
    public DatabaseHandler(Context context) 
    { 
    super(context, DATABASE_NAME, null, DATABASE_VERSION); 
    } 

    // Creating Tables 
    // Called when the database is created for the first time. 
    // This is where the creation of tables and the initial population of the tables         should happen.
    @Override
    public void onCreate(SQLiteDatabase db) 
    { 
    // SQLite Create syntax 
    //CREATE TABLE NameOfTable(Column1 Type, Column2 Type);

    String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
            + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
            + KEY_PH_NO + " TEXT" + ")"; 
    //                + KEY_PH_NO + " TEXT," + " UNIQUE (" + KEY_NAME + "))";
    db.execSQL(CREATE_CONTACTS_TABLE); 
    } 

    // Upgrading database 
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
    { 
    // Drop older table if existed 
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_CONTACTS); 

    // Create tables again 
    onCreate(db); 
    }

   // adds a new contact 
   public void addContact(Contact contact) 
   { 
    // get the database from the SQLiteHelper
    SQLiteDatabase db = this.getWritableDatabase(); 

    // This class is used to store a set of key/values that the ContentResolver can process. 
    ContentValues values = new ContentValues(); 
    values.put(KEY_NAME, contact.getName()); // Contact Name 
    values.put(KEY_PH_NO, contact.getPhoneNumber()); // Contact Phone Number 

    // Inserting Row 
    // SQLite Syntax 
    // INSERT INTO TableName(ColumnValue, ColumnValue)
    db.insert(TABLE_CONTACTS, null, values); 
    db.close(); // Closing database connection
    }

    // retrieve single contact by id
    public Contact getContact(int id) 
    { 
    // get the database from the SQLiteHelper
    SQLiteDatabase db = this.getReadableDatabase(); 

    // query the table and return a Cursor
    // SQLite Syntax
    // SELECT * FROM TableName WHERE Column=Value;
    Cursor cursor = db.query(TABLE_CONTACTS, new String[] { KEY_ID, 
            KEY_NAME, KEY_PH_NO }, KEY_ID + "=?", 
            new String[] { String.valueOf(id) }, null, null, null, null); 
    if (cursor != null) 
        cursor.moveToFirst(); 

    // Create a Contact object from the Cursor
    Contact contact = new Contact(Integer.parseInt(cursor.getString(0)), 
            cursor.getString(1), cursor.getString(2)); 

    // close the cursor
    cursor.close();

    // close the database
    db.close();

    // return contact 
    return contact; 
    } 

    public Contact getContact(String name) 
    { 
    // get the database from the SQLiteHelper
    SQLiteDatabase db = this.getReadableDatabase(); 

    // query the table and return a Cursor
    // SQLite Syntax
    // SELECT * FROM TableName WHERE Column=Value;
    Cursor cursor = db.query(TABLE_CONTACTS, new String[] { KEY_ID, 
            KEY_NAME, KEY_PH_NO }, KEY_NAME + "=?", 
            new String[] { name }, null, null, null, null); 
    if (cursor != null) 
        cursor.moveToFirst(); 

    // Create a Contact object from the Cursor
    Contact contact = new Contact(Integer.parseInt(cursor.getString(0)), 
            cursor.getString(1), cursor.getString(2)); 

    // close the cursor
    cursor.close();

    // close the database
    db.close();

    // return contact 
    return contact; 
    } 
    // return a List of All Contacts in table
    public List<Contact> getAllContacts() 
    { 
    List<Contact> contactList = new ArrayList<Contact>(); 
    // Select All Query 
    String selectQuery = "SELECT  * FROM " + TABLE_CONTACTS; 

    //       SQLiteDatabase db = this.getWritableDatabase(); 
    SQLiteDatabase db = this.getReadableDatabase();

    // execute a raw SQLite query
    Cursor cursor = db.rawQuery(selectQuery, null); 

    // looping through all rows and adding to list 
    if (cursor.moveToFirst()) 
    { 
       do 
       { 
           // create a new Contact object
           Contact contact = new Contact(); 
           // get the data from the cursor and assign it to the contact
           contact.setID(Integer.parseInt(cursor.getString(0))); 
           contact.setName(cursor.getString(1)); 
           contact.setPhoneNumber(cursor.getString(2)); 
           // Adding contact to list 
           contactList.add(contact); 
       } while (cursor.moveToNext()); 
    } 

    // close the cursor
    cursor.close();

    // return contact list 
    return contactList; 
    } 

    // return Count of all Contacts in table 
    public int getContactsCount() 
    { 
    String countQuery = "SELECT  * FROM " + TABLE_CONTACTS; 
    SQLiteDatabase db = this.getReadableDatabase(); 
    Cursor cursor = db.rawQuery(countQuery, null);  

    // return count 
    return cursor.getCount(); 
    }

    // Updating single contact 
    public int updateContact(Contact contact) 
    { 
    SQLiteDatabase db = this.getWritableDatabase(); 

    // This class is used to store a set of key/values that the ContentResolver can process. 
    ContentValues values = new ContentValues(); 
    values.put(KEY_NAME, contact.getName()); 
    values.put(KEY_PH_NO, contact.getPhoneNumber()); 

    // updating row 
    int n = db.update(TABLE_CONTACTS, values, KEY_ID + " = ?", 
            new String[] { String.valueOf(contact.getID()) }); 
    db.close();
    return n;

    } 

    // Deleting single contact 
    public void deleteContact(Contact contact) 
    { 
    SQLiteDatabase db = this.getWritableDatabase(); 
    db.delete(TABLE_CONTACTS, KEY_ID + " = ?", 
            new String[] { String.valueOf(contact.getID()) });  
    db.close(); // Closing database connection
    }

    // delete all the Contacts
    public void deleteAllContacts()
    {
    SQLiteDatabase db = this.getWritableDatabase();
    db.delete(TABLE_CONTACTS, null, null);
    db.close(); // Closing database connection
    }

    // returns a cursor with all the Contacts
    public Cursor getAllCursor() 
    { 
    // Select All Query 
    String selectQuery = "SELECT  * FROM " + TABLE_CONTACTS; 

    SQLiteDatabase db = this.getReadableDatabase();

    // execute a raw SQLite query
    Cursor cursor = db.rawQuery(selectQuery, null); 

    // return the Cursor
    return cursor; 
    } 
    } 
```

MainActivity.java：

```
 // Project:         Java2Lab10_Lefelhocz
    // File:            MainActivity.java
    // Date:            04/3/13
    // Description:     This class is the main activity for the application
    //                  Its purpose is to demonstrate the SQLiteHelper and to test
    //                  adding, deleting, updating and listing entries in   the database.

    package com.example.java2lab10_lefelhocz;

    import java.util.List;

    import android.os.Bundle;
    import android.app.Activity;
    import android.app.DialogFragment;
    import android.content.Context;
    import android.view.Menu;
    import android.view.MenuItem;
    import android.view.View;
    import android.widget.AdapterView;
    import android.widget.ArrayAdapter;
    import android.widget.ListView;
    import android.widget.TextView;
    import android.widget.Toast;

    public class MainActivity extends Activity implements  AdapterView.OnItemClickListener
    {
private DatabaseHandler dbh;
private ListView contactsListView ;
private ArrayAdapter<Contact> adapter ;
@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    contactsListView = (ListView) findViewById( R.id.contactsListView );

    dbh = new DatabaseHandler(this); 

    // delete all entries in Contacts table
    dbh.deleteAllContacts();
    // set the Activity to listen for the onItemClick event
    contactsListView.setOnItemClickListener(this);

    // create the ArrayAdapter
    adapter = createAdapter();

    // Set the ArrayAdapter as the ListView's adapter.
    contactsListView.setAdapter( adapter );

    // create the database handler object

}

protected ArrayAdapter<Contact> createAdapter() {
    // TODO Auto-generated method stub
    List<Contact> contacts = dbh.getAllContacts();
    ArrayAdapter<Contact> contactsAdapter = new ArrayAdapter<Contact> (this,android.R.layout.simple_list_item_1, contacts);

    return contactsAdapter;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

// this method displays the current list of Contacts
    public void displayContacts()
    {
    // create a list of Contacts
    List<Contact> contacts = dbh.getAllContacts();

    // create the string builder message
    StringBuilder message = new StringBuilder();

    // display headings
    message.append("Total: " + dbh.getContactsCount() + "\n");
    message.append(String.format("%-5s%-10s%-10s\n", "Id:", "Name:", "Phone:"));

    // Use list of contacts to build a StringBuffer that will be displayed in the   TextView
    for(Contact cn : contacts)
    {
        message.append(String.format("%-5s%-10s%-10s\n", cn.getID(), cn.getName(),         cn.getPhoneNumber()));
    }

    // display the StringBuilder with all the contacts

    }

    public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
    case R.id.menu_add_contact:
        DialogFragment myFragment = new AddContactFragment();
        myFragment.show(getFragmentManager(), "customDialog");

    default:
        return super.onOptionsItemSelected(item);
    }
    }
    public void addContact(String newName, String newPhone)
    {
    Contact c = new Contact(newName, newPhone);
    dbh.addContact(c);
     adapter.add(c);
    }

@Override
public void onItemClick(AdapterView<?> arg0, View view, int arg2, long arg3) {
    Context context = null;

    // TODO Auto-generated method stub
    Contact c1 = dbh.getContact(((TextView)view).getText().toString());
    Toast.makeText(context, "Phone Number: " + c1.getPhoneNumber(), Toast.LENGTH_LONG).show();
}

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:00:56.183

在这里 ：

```
Context context = null; //<<<< 
```

`context`在将其传递给`Toast.makeText`方法之前，您忘记使用当前 Activity 上下文进行初始化。将其初始化为：

```
Context context = MainActivity.this; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:05:00.927

看起来您正在调用上下文`makeToast`。`null`Android 文档说：

```
Context context = getApplicationContext();
CharSequence text = "Hello toast!";
int duration = Toast.LENGTH_SHORT;

Toast toast = Toast.makeText(context, text, duration);
toast.show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T16:10:53.207

```
Toast.makeText(context, "Phone Number: " + c1.getPhoneNumber(), Toast.LENGTH_LONG).show(); 
```

在这一行中，只需替换`context`with即可`getApplicationContext()`。问题是由于上下文被初始化为`null`.

# jquery - Colorbox parent.$.fn.colorbox.close 无法从释放的脚本中执行代码

> ID：15816001
> 
> 赞同：0
> 
> 时间：2013-04-04T15:55:57.550
> 
> 标签：jquery, vb.net, internet-explorer, colorbox

我有一些可以正常工作的逻辑，并在关闭颜色框之前检查是否有任何输入被修改。

使用 parent.$.fn.colorbox.close 函数关闭颜色框。发回服务器后，这不再适用于 Internet Explorer（9，但我猜 7 和 8 将是相同的。），我得到的错误是“无法从释放的脚本中执行代码”。

我相信这是因为 IE 假设 parent.window 现在已处置？反正有没有强制关闭彩盒框架？

在 Chrome 和 Firefox 中都可以正常工作。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T11:47:57.850

最后，我包含了一些仅用于 IE 的代码，它们以不同的方式关闭颜色框！

# c++ - C++中“+=”的含义和名称是什么？

> ID：15816002
> 
> 赞同：0
> 
> 时间：2013-04-04T15:55:58.360
> 
> 标签：c++, operators, compound-assignment

我对 C++ 相当陌生，我一直在阅读和编写一些自己的代码。我不时看到这些运营商，如果那是正确的词吗？

```
+= // Not sure what it means 
```

所以我的问题是：它们是什么意思/做什么，它们叫什么？

为了进一步参考，我想知道它们叫什么，以便我可以轻松查找它（例如，简单地搜索“+=”一无所获）。

编辑：对于其他不知道含义的人（或者在我的情况下知道这些名称），我发现这个维基百科链接对其他人来说可能会派上用场：[http ://en.wikipedia.org/wiki/Operators_in_C_and_C% 2B%2B](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T15:57:25.830

是的，这些是运营商。更具体地说，它们被称为复合赋值运算符。以下是它们的完整列表：

```
*= /= %= += -= >>= <<= &= ^= |= 
```

它们的定义如下：

> 表单表达式的行为`E1 op = E2`等价于只计算一次的`E1 = E1 op E2`除外。`E1`

所以`x += 5;`几乎是一样的`x = x + 5;`。

您可以将其视为修改添加。如果你只是这样做`x + 5`，表达式的结果就是你把和加`x`在一起得到的结果`5`，但`x`没有改变。如果你这样做`x += 5;`，`x`实际上它的价值增加了​​ 5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:57:10.517

它只是一个缩写： 当然`a+=2;` 意味着`a=a+2;` 尽可能多的运算符：您可以重载它以赋予它其他含义，实际上我们经常这样做是为了提供含义，例如在我们的类 SomeClass 中添加 int 意味着什么：

```
SomeClass s;
s+=1; //operator+=(SomeClass& s, int i){} is used here

class A{
public:
    A():i_(123){}
    ~A(){}
    int i(){return i_;}
    A const& operator+=(int i){
       std::cout<<"operator+=";
       this->i_=i_+i;
    }
private:
    int i_;
};

int main(int argc, char** argv) {

    A a1;
    a1+=3;
    std::cout<<a1.i();
    return OK;
} 
```

> 输出：运算符+=126

# json - 在 AS3 中，如何检查两个 JSON 对象是否相等？

> ID：15816008
> 
> 赞同：3
> 
> 时间：2013-04-04T15:56:11.277
> 
> 标签：json, actionscript-3

标题几乎说明了这一点。我有两个 JSON 对象，我想知道它们是否相等（具有所有相同的属性值）。

我可以将它们都字符串化，但我不确定两个相等的对象是否总是会产生相同的输出：

例如：

```
{
    "firstName": "John",
    "lastName": "Smith",
    "age": 25,
    "favoriteColors": ["blue", "green", "red"]
} 
```

与以下字符串不同：

```
{
    "age": 25,
    "lastName": "Smith",
    "firstName": "John",
    "favoriteColors": ["blue", "green", "red"]
} 
```

但作为对象，它们具有相同的属性。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T16:21:22.880

在 Flex SDK 中有一个方法。它在课堂`ObjectUtil`上。以下是来源的描述：

```
/**
     * Compares the Objects and returns an integer value 
     * indicating if the first item is less than greater than or equal to
     * the second item.
     * This method will recursively compare properties on nested objects and
     * will return as soon as a non-zero result is found.
     * By default this method will recurse to the deepest level of any property.
     * To change the depth for comparison specify a non-negative value for
     * the depth parameter.
     * @param   a   Object.
     * @param   b   Object.
     * @param   depth   Indicates how many levels should be 
     *   recursed when performing the comparison.
     *   Set this value to 0 for a shallow comparison of only the primitive 
     *   representation of each property.
     *   For example:
     *   var a:Object = {name:"Bob", info:[1,2,3]};
     *   var b:Object = {name:"Alice", info:[5,6,7]};
     *   var c:int = ObjectUtil.compare(a, b, 0);In the above example the complex properties of a and 
     *   b will be flattened by a call to toString()
     *   when doing the comparison.
     *   In this case the info property will be turned into a string
     *   when performing the comparison.
     * @return  Return 0 if a and b are null, NaN, or equal. 
     *   Return 1 if a is null or greater than b. 
     *   Return -1 if b is null or greater than a.
     * @langversion 3.0
     * @playerversion   Flash 9
     * @playerversion   AIR 1.1
     * @productversion  Flex 3
     */
    public static function compare (a:Object, b:Object, depth:int=-1) : int; 
```

如果您不想要整个 SDK，也许您可​​以获取此函数/类并使用该源。

您可以在[此处](http://opensource.adobe.com/svn/opensource/flex/sdk/trunk/frameworks/projects/framework/src/mx/utils/ObjectUtil.as)查看源代码。大部分工作都是在函数中完成的`internalCompare`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:41:26.427

*编辑：Barış 的答案是最好的选择，因为它已经过试验和测试。以防万一这对某人有用：*

鉴于 JSON 值仅限于一小组简单类型，因此应该可以相当轻松地通过属性进行递归。这些方面的内容适用于您的示例：

```
private function areEqual(a:Object, b:Object):Boolean {
    if (a === null || a is Number || a is Boolean || a is String) {
        // Compare primitive values.
        return a === b;
    } else {
        var p:*;
        for (p in a) {
            // Check if a and b have different values for p.
            if (!areEqual(a[p], b[p])) {
                return false;
            }
        }
        for (p in b) {
            // Check if b has a value which a does not.
            if (!a[p]) {
                return false;
            }
        }
        return true;
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T17:59:36.003

也许您可以将两个对象转换为字符串然后比较它们

```
function compareJSON(a:Object, b:Object):Boolean
{
  return JSON.stringify(a)===JSON.stringify(b);
} 
```

# mongodb - 具有排序顺序的 Mongo 查询以错误的顺序返回文档

> ID：15816011
> 
> 赞同：0
> 
> 时间：2013-04-04T15:56:27.827
> 
> 标签：mongodb

我有一个包含大约 600k 文档的 mongo 集合。我正在枚举集合，按_id 排序。但是，文档不会按该排序顺序返回。它们似乎根据 ObjectId 的时间戳部分正确排序，但不是根据 pid 字段。

这是我用来重现这个的 c# 代码：

```
var cursor = m_collection.FindAll().SetSortOrder(SortBy.Ascending("_id"));

ObjectId previous = ObjectId.Empty;

foreach (var document in cursor)
{
    var id = document[IdField].AsObjectId;

    Throw.Assert(id > previous, "Sort order is invalid!");
    previous = id;
} 
```

在某些时候，断言被触发。我可以看到新的 id 与前一个具有相同的时间戳，但 pid 较低。

我原以为使用 {"_id":1} 进行排序将使用 ObjectIds 的所有组件进行排序，而不仅仅是时间戳。

服务器对 ObjectId 使用的比较算法是否与 C# 客户端的 ObjectId.CompareTo 不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:32:30.030

MongoDB C# 的源代码`CompareTo`目前[在此处](https://github.com/mongodb/mongo-csharp-driver/blob/master/MongoDB.Bson/ObjectModel/ObjectId.cs#L410)。该代码将`ObjectId`一路的每个元素与 3 字节计数器进行比较。鉴于[ObjectId](http://docs.mongodb.org/manual/core/object-id/)的性质，其中包含：

*   一个 4 字节的值，表示自 Unix 纪元以来的秒数
*   一个 3 字节的机器标识符
*   一个 2 字节的进程 ID
*   和一个 3 字节的计数器，从一个随机值开始

超出时间戳进行排序是没有意义的。虽然`CompareTo`它是准确的并且会产生一致的结果，但可能无法以符合您期望的方式进行排序。

鉴于会有两个对象在相同的时间戳（4 字节值）创建的情况，那么`CompareTo`在 C# 中的工作方式下，结果会有一些差异。因此，执行您所做的断言会导致一些令人困惑的结果，不应将其用作检测乱序结果的方法。

大多数驱动程序在不存在时创建`_id`/值（包括 C# 驱动程序）。`ObjectId`除了时间戳之外，您真的没有什么可以排序的。

你可以这样做：

```
Throw.Assert(id.Timestamp > previous.Timestamp, "Sort order is invalid!"); 
```

# excel - 如何从 .cab 文件安装 mscomct2.ocx 文件（Excel 用户表单和 VBA）

> ID：15816014
> 
> 赞同：10
> 
> 时间：2013-04-04T15:56:32.717
> 
> 标签：excel, vba

我有一个带有使用日历控件的用户表单的 Excel 电子表格。它在我的机器上运行良好，但其他人无法使用它，因为他们缺少 mscomct2.ocx 文件。我找到了在哪里下载它 ( [http://support.microsoft.com/kb/297381](http://support.microsoft.com/kb/297381) )，但它作为 cab 文件出现，我不知道如何告诉其他人使用该文件。我的互联网搜索指向各种解决方案，从将其复制到 system32 文件到使用 regsrv32 注册它。我希望这里有人能给我外行的指示，因为我讨厌要求这些其他用户尝试五种不同的东西。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T16:27:01.613

你说得对，把这交给别人真的很痛苦，但如果你必须这样做，这就是你的做法。

1.  只需从 .cab 文件中提取 .ocx 文件（类似于 zip）
2.  复制到系统文件夹（*c:\windows\sysWOW64*用于 64 位系统和*c:\windows\system32*用于 32 位）
3.  通过命令提示符使用 regsvr32 注册文件（例如“ *regsvr32 c:\windows\sysWOW64\mscomct2.ocx* ”）

*参考*

*   [http://social.msdn.microsoft.com/Forums/en-US/sbappdev/thread/91cf3127-70fe-4726-8a27-31b8964430c5/](http://social.msdn.microsoft.com/Forums/en-US/sbappdev/thread/91cf3127-70fe-4726-8a27-31b8964430c5/)
*   [http://en.wikipedia.org/wiki/Cabinet_(file_format)](http://en.wikipedia.org/wiki/Cabinet_(file_format))

# permissions - 多个用户访问同一个 ipynb

> ID：15816016
> 
> 赞同：3
> 
> 时间：2013-04-04T15:56:37.840
> 
> 标签：permissions, ipython

我刚刚设置了一个 IPython (0.13.1) Notebook 服务器，以便在我的 Python 入门课程中使用它。服务器受密码保护，当前已启动并正在运行。

现在，我需要我的学生（大约 15 人）同时访问同一个 ipynb 文档，玩弄它并最终修改代码示例，同时确保任何人都覆盖了上传的 ipynb 文件版本。

我该如何设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:09:24.450

首先，看一下[使用 ipython notebook 进行教学](http://ivory.idyll.org/blog/teaching-with-ipynb-2.html)。尝试列出您要在此运行的应用程序类型。另一方面，可以使用一些云计算资源，例如在 Heroku 上。

# node.js - 打字稿冲突的变量名称

> ID：15816018
> 
> 赞同：1
> 
> 时间：2013-04-04T15:56:40.883
> 
> 标签：node.js, typescript, tsc

我正在尝试编译一些 Node.js Typescript 代码，但我遇到了两个名为`console`. 本质上，Node.js 有一个`console.trace()`方法，而普通的浏览器端 Javascript 没有。我在我的 Typescript 文件中引用了 node.d.ts，其他一切都很好。node.d.ts 声明`console`为变量，但 lib.d.ts 也是如此，这似乎覆盖了 Node.js 版本。将 --nolib 添加到编译器只会引发数百个关于未定义符号的错误。有没有办法在不编辑 lib.d.ts 的情况下解决这个问题？（或铸造控制台：`(<any>console).trace()`？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:18:51.650

您可以编辑 node.d.ts 定义以使其扩展控制台接口的现有 lib.d.ts 定义。

在你的 node.d.ts 替换`declare var console`为：

```
interface Console {
    log(...data: any[]): void;
    info(...data: any[]): void;
    error(...data: any[]): void;
    warn(...data: any[]): void;
    dir(obj: any): void;
    timeEnd(label: string): void;
    trace(label: string): void;
    assert(expression: any, ...message: string[]): void;
} 
```

现在您的 TypeScript 将在没有强制转换的情况下编译`any`

# javascript - 如何知道网页上正在使用什么 Javascript（行和文件）

> ID：15816019
> 
> 赞同：1
> 
> 时间：2013-04-04T15:56:42.630
> 
> 标签：javascript

是否可以（在 Chrome/FireFox 中）找出特定元素在网页上使用了哪个 Javascript 文件（希望是行号）？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:12:17.110

这个问题有点不清楚，但我可以向您展示如何在 Chrome 中查看特定元素以进行 JavaScript 交互：

![在此处输入图像描述](https://i.stack.imgur.com/QrVFQ.png)

然后，在你这样做之后，看着我们点击复选框：

![在此处输入图像描述](https://i.stack.imgur.com/FmAg8.png)

Chrome 的一些参考：[https ://developers.google.com/chrome-developer-tools/docs/overview](https://developers.google.com/chrome-developer-tools/docs/overview)

大多数其他浏览器以类似的方式工作。还有其他方法可以了解 JavaScript 代码如何与您的页面交互，但您需要给我一个更具体的场景来回答这个问题。

# vb.net - 如何将多个变量传递给 bw_ProgressChanged 函数

> ID：15816023
> 
> 赞同：0
> 
> 时间：2013-04-04T15:56:53.783
> 
> 标签：vb.net, function, variables

我有一个显示进度表的小型 VB.Net 程序。在该框中，我在文本框中显示进度条和完成百分比。这两个都可以通过一个整数得出，但现在我被要求在进度表单上放置一个“详细信息”文本框，该文本框会更新文本以显示工作的执行情况。

我的问题 - 我如何将百分比和文本详细信息传递给`ProgressChanged()`函数？我试过传递一个数组和一个对象，但我似乎无法正确处理。谢谢。

我正在调用这样的函数（来自`bw_DoWork()`函数） -

```
details = "Textbox details will go here"
progress = (100 / (UBound(servers) + 1)) * (i + 1)
bw.ReportProgress(progress) ' How do I also pass 'details'? 
```

这是它自己的功能 -

```
Private Sub bw_ProgressChanged(ByVal sender As Object, ByVal e As ProgressChangedEventArgs)

    Me.proProgress.Value = e.ProgressPercentage
    Me.txtProgress.Text = e.ProgressPercentage.ToString() & "% complete..."
    'Me.txtDetails.Text = Me.txtDetails.Text & IIf(Me.txtDetails.Text <> "", vbCrLf, "") & e.details ' How do I also pass 'details'?

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:03:39.150

最好的方法是创建您自己的自定义“状态”对象，其中包含您要传递给处理进度更改的所有数据。然后，您将其作为 userState 对象的一部分包含在您的调用中。

```
Public Class MyObjectState
    Public Message As String
    Public StatusState As String  
    Public Whatever as Integer
    Public Whosit as Decimal
End Class

...

Dim currentState as New MyObjectState()
currentState.Message = "blah blah blah"

bw.ReportProgress(progress, someMyObjectStateInstance)

...

Private Sub bw_ProgressChanged(ByVal sender As Object, ByVal e as ProgressChangedEventArgs) 
    Me.proProgress.Value = e.ProgressPercentage 

    Dim state as MyObjectState = CType(e.UserState, MyObjectState)
    'You can now use the state object with any of the instance information you need
    'At this point message would be "blah blah blah"

End Sub 
```

这基本上就像一个“快照”，所以我会让你的状态对象尽可能详细，但只传输你需要的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:04:47.433

[ReportProgress](http://msdn.microsoft.com/en-us/library/a3zbdb1t.aspx)事件有一个接受两个参数的重载。
第一个是您在 ProgressPercentage 属性中获得的百分比。
第二个是您从 ObjectState 属性中获取的对象

所以你可以像这样创建一个迷你类

```
Public Class bwObjectState
    Public String Details
End Class 
```

然后当你调用 ReportProgress

```
Dim data As new bwObjectState()
data.Details = "Textbox details will go here"
progress = (100 / (UBound(servers) + 1)) * (i + 1)
bw.ReportProgress(progress, data) 
```

如果您打算传递其他值，则类对象很有用，但如果您只需要传递一个字符串，您可以简单地将字符串分配给第二个参数

```
bw.ReportProgress(progress, "Textbox details will go here") 
```

当然，在 ProgressChanged 事件中，您需要将 ObjectState 对象转换回其原始类型

```
Dim data  as bwObjectState = CType(e.UserState, bwObjectState) 
```

或者干脆

```
Dim details  as String = CType(e.UserState, String) 
```

# php - 我将如何使用 php 生成随机 XML 文件？

> ID：15816024
> 
> 赞同：0
> 
> 时间：2013-04-04T15:56:55.093
> 
> 标签：php, xml

我正在尝试编写一个 php 来生成我之前编写的随机 XML 文件。由于此 php 代码生成 10-30 之间的随机数：

```
<?php
print rand() . "<br>";
//line 4 calls out a number between 10 and 30 inclusive
print rand(10,30);
?> 
```

我如何能够生成随机 XML 文件？

我是这方面的新手，如果这是一个愚蠢的问题，请道歉！

任何帮助将不胜感激！

山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:58:28.370

您可以将 xml 文件名存储在一个数组中，然后用来`array_rand()`随机选择一个

# jquery - http:// 站点脚本/jQuery 的实时预览

> ID：15816025
> 
> 赞同：0
> 
> 时间：2013-04-04T15:56:57.670
> 
> 标签：jquery, html, live, preview

我想在我的网站上放置另一个网站的实时预览作为我的投资组合。但我不知道是否存在任何脚本/jQuery。我什么也找不到。我自己的页面是 HTML5 的，用于实时预览的 iFrame 脚本运行得不是很好，因为我无法获得正确格式的 iFrame:(X+Y) 所以我的问题是：

是否有任何 jQuery 脚本允许我这样做，我在哪里可以找到它？如果站点离线，是否可以显示图像而不是 404 页面？

提前致谢。

# .net - 我可以以某种方式查看 FluentNHibernate 自动映射吗？

> ID：15816026
> 
> 赞同：1
> 
> 时间：2013-04-04T15:56:57.910
> 
> 标签：.net, fluent-nhibernate, fluent-nhibernate-mapping

我有一张桌子，我不确定是否正确映射。我尝试查看源代码，但无法轻松找到查看特定实体映射的方法。

有人可以指出这些存储在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T19:23:50.043

如果它们是自动映射，并且您想查看 xml 映射的外观，我通常通过通过 xml 导出映射来执行此操作，如下所示：

```
sessionFactory = Fluently.Configure(normalConfig)
                  .Mappings(m =>
                      m.FluentMappings
                      .AddFromAssemblyOf<OrderMap>()
                      .Conventions.AddFromAssemblyOf<PascalCaseColumnNameConvention>()
                      .ExportTo(@"C:\TFS\Fluent Mappings"))
                      .ProxyFactoryFactory("NHibernate.Bytecode.DefaultProxyFactoryFactory, NHibernate")
                  .BuildSessionFactory(); 
```

当然，重要的部分是：`.ExportTo(@"C:\TFS\Fluent Mappings"))`上面。

# asp.net-mvc-3 - SQL Compact Edition - 不允许访问数据库文件

> ID：15816029
> 
> 赞同：0
> 
> 时间：2013-04-04T15:57:07.917
> 
> 标签：asp.net-mvc-3, entity-framework, sql-server-ce

我正在使用 MVC 3.0 和实体框架从头开始创建博客站点。我正在为数据存储使用 SQL CE .sdf 文件。这存储在项目 App_Data 文件夹中。在本地，一切正常。不是问题。读取和处理 .sdf 文件时不会出错。但是，在使用 Web Deploy 发布到共享主机提供商后，尝试查看远程站点时出现以下错误：-

不允许访问数据库文件

我在网络配置中使用的连接字符串是：-

```
<connectionStrings>
<add name="DataAccess.BlogDbContext" connectionString="Data Source=DansMVCBlog.sdf" providerName="System.Data.SqlServerCe.4.0" />
</connectionStrings> 
```

我已经研究了这个问题并且遇到了问题。建议包括将 App_Data/DansMVCBlog.sdf 添加到连接字符串文件路径，而不仅仅是文件名。这不起作用，因为您被告知文件路径无效。在共享主机控制面板上，我已将 App_Data 文件夹的读/写权限设置为 true。另外，在我的 Global.asax 文件中，我禁用了 `Database.SetInitializer(new DataInitializer());

我在这里犯了一个小学生的错误吗？有没有人有什么建议？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T03:01:43.823

看起来 OP 可能已经解决了他们的问题，但在我的情况下，事实证明数据库文件已被我的源代码控制系统标记为只读。清除只读标志解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:08:30.937

您可能需要更新连接字符串

```
<connectionStrings>
  <add name="DataAccess.BlogDbContext" 
       connectionString="Data Source=|DataDirectory|DansMVCBlog.sdf"
       providerName="System.Data.SqlServerCe.4.0" />
</connectionStrings> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T18:18:50.167

谁知道解决这个问题的方法是什么。我只能说我在使用 web 部署发布时遇到问题，所以我改用 ftp。之后一切正常。

# php - Onsubmit 填充一个数组，然后显示数组中的内容

> ID：15816031
> 
> 赞同：1
> 
> 时间：2013-04-04T15:57:13.517
> 
> 标签：php, javascript, html

我正在尝试创建一个表单，该表单将存储哪些框已被签入数组。（1-1、1-2、1-3 等）。然后一个新页面将根据检查的内容显示或隐藏深度步骤。所以我现在正在尝试做一些更简单的事情，只需在提交时填充一个数组，然后打印数组中的值。到目前为止，我一直没有成功。我已经发布了我正在处理的 Javascript 和表单调用。我也有一个链接：http: [//jsfiddle.net/kNsW9/13/](http://jsfiddle.net/kNsW9/13/)

```
<form method="post" onsubmit="return checked_boxes(this.id);" >
<script>
var checked =[];

function checked_boxes(form)
{   
    var getInputs = form.getElementsByTagName("input");
    var inputCount = getInputs.length;

    for (var i = 0; i < inputCount; i++) {
        if (getInputs[i].type === "checkbox" && getInputs[i].checked) {
            checked.push(getInputs[i].value);
        }/*
        else if (getInputs[i].type === "checkbox" && getInputs[i].unchecked) {
            checked.pop(getInputs[i].value);
        }*/
    }
}

function print_checked()
{
    for(var i = 0; i < checked.length; i++)
    {
        document.write(checked[i]);
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:02:54.197

您正在将表单的 id 传递给 checked_boxes 函数；而不是表格本身。

稍后在checked_boxes 函数中，您假设传递的值是表单而不是表单ID（这是一个字符串）。String 没有 getElementsByTagName 函数。

要解决这个问题，您可以更改

```
<form method="post" onsubmit="return checked_boxes(this.id);" > 
```

到

```
<form method="post" onsubmit="return checked_boxes(this);" > 
```

# lua - 更新嵌套在组中的精灵

> ID：15816035
> 
> 赞同：0
> 
> 时间：2013-04-04T15:57:19.297
> 
> 标签：lua, coronasdk

如何更新或操作嵌套在多个组中的精灵？

我首先尝试使用精灵将“enterFrame”事件直接添加到所需的类（没有成功）

我的代码

```
local box = {}

-- PUBLIC FUNCTIONS

function box:new(  )

    local group = display.newGroup()

    local image = display.newImage("crate.png")

    group:insert(image)

    function group:update()
        image.rotation = image.rotation + 1
    end

    return group
end

return box 
```

其次，我想添加一个

```
Runtime:addEventListener("enterFrame", enterFrame) 
```

在我的场景中，然后遍历添加到场景中的组 ( `scene.view`) 并在那里调用自定义更新函数，将更新向前发送，直到它到达我的班级。但是我还没有找到检查组是否有更新方法的方法。现在我只是调用更新，即使该组没有它。

```
function enterFrame (event)
    local group = scene.view
    for i=1,group.numChildren do
        group[i]:update()
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:00:45.653

本地框 = {}

你可以试试这个简单的解决方案

```
-- PUBLIC FUNCTIONS

function box:new(  )

    local group = display.newGroup()

    local image = display.newImage("crate.png")

    group:insert(image)
    group.isThereUpdate = true
    // or group.isThereUpdate = false

    function group:update()
        image.rotation = image.rotation + 1
    end

    return group
end

return box

function enterFrame (event)
    local group = scene.view
    for i=1,group.numChildren do
        if group[i].isThereUpdate then
            group[i]:update()
        end
    end
end 
```

# java - 如何使用实例变量和方法定义一个类以使其在两个值之间交替，并对其进行修改

> ID：15816038
> 
> 赞同：-3
> 
> 时间：2013-04-04T15:57:42.807
> 
> 标签：java, function, methods, logic

我正在尝试定义一个可以用于棋盘游戏的类。我想我将使用访问方法（getTurn（））作为棋盘游戏类的参数。

游戏开始时，前两次应给出“BLACK”、“BLACK”，然后应在“WHITE”和“BLACK”之间交替。我的 startTurn() 方法返回这个。

游戏进行到一半，当前玩家（WLOG，说他的BLACK）移动后，我需要检查一些条件（如果下一个玩家没有移动可能），并根据它，我想改变顺序其中。

我需要定义的方法是（所以我们假设当前转弯是黑色的，现在继续下一个）

1）如果下一个玩家选择跳过他/她的回合，它应该再次给黑色，然后像以前一样在白色和黑色之间交替。

像这样：B-> B-> W -> B ->........ W -> B| -> B -> W -> B -> .....

或者如果当前玩家是白人，

像这样：B-> B-> W -> B ->........ B -> W| -> W -> B -> W -> .....

, 其中“|” 在 B 或 W 之后只是我用来解释我测试下一个玩家是否有可能移动（使用方法）的点的符号，如果没有，则像这样改变转弯。（我猜 reverseTurn() 方法可以做到这一点，这可能不会太难。）

2）如果下一个玩家选择移动对方的棋子，它应该先给黑（这样白棋可以移动一个黑棋），然后给黑（这样黑棋轮到他/她），然后在白棋和黑棋之间交替和以前一样。

像这样：B-> B-> W -> B ->........ W -> B| -> B -> B -> W -> B -> .....

或者如果当前玩家是白人，

像这样：B-> B-> W -> B ->........ B -> W| -> W-> W -> B -> W -> .....

, 其中“|” 在 B 或 W 之后只是我用来解释我测试下一个玩家是否有可能移动（使用方法）的点的符号，如果没有，则像这样改变转弯。

3）另一个问题是，如果我有上述两个问题的答案，我如何在我的棋盘游戏课程中使用它？我能想到的只是初始化TurnIndicator，并在构造函数中调用startTurn（），并在我将字符串作为转向参数传递时分配getTurn（），并在每次玩家移动时调用startTurn（）？这行得通吗？（因为我很不确定）

如果是这样，那我什么时候想更改订单呢？然后我应该有条件地调用该方法而不是 startTurn() 方法吗？

我已经被这个问题困扰了很长时间。特别是问题 2.. 任何建议将不胜感激。

以下是我迄今为止为 TurnIndicator 类所做的工作。

谢谢！！

```
public class TurnIndicator {
    private boolean _isWhite;
    private int _count = 0;
    private String _currentTurn;

    public void startTurn() {
        if(_count<3)
            _count++;

        if(_count == 1 || _count == 2) {
            _currentTurn = "BLACK";
        }
        else {
            _isWhite = !_isWhite;
            _currentTurn = _isWhite ? "WHITE" : "BLACK";
        }
    }

    public String getTurn() {
        return _currentTurn;
    }

    public void reverseTurn() {
        _currentTurn = _currentTurn == "WHITE" ? "BLACK" : "WHITE";
    }

    public String skipTurn() {
        ?
    }
    public String takeOthersTurn() {
            ?
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:48:24.027

> “游戏开始时，前两次应该给“BLACK”，“BLACK”，然后应该在“WHITE”和“BLACK”之间交替。”

在里面`startTurn()`为什么不只是这样做：

```
if(_count<3)  {
    _count++;
    _currentTurn = "BLACK";
} 
```

当我查看代码时（尽管有以下内容），您为什么不直接`reverseTurn()`设置方法`isWhite == !isWhite`然后调用`startTurn()`？

继续提问。

> 1）“如果下一个玩家选择跳过他/她的回合，......”

不要想“选择跳过他/她的回合”，想“选择不移动他/她的棋子”。因此逻辑仍然有效：playerNext 轮流（似乎）可能正在移动他/她的棋子、移动 playerFirst 的棋子或不移动任何棋子。

> 2）“如果下一个玩家选择移动其他玩家的棋子，它应该给黑色（这样白色可以移动黑色棋子），......”

真的吗？在我看来，它仍然是 WHITE，因为轮到 WHITE 了，无论哪个颜色块被移动。现在，我想你可能想要调用你的玩家： player1 和 player2（或 playerFirst 和 playerNext，就像我之前所做的那样）a）保持玩家和棋子颜色之间的概念差异，并且 b）不必去当试图解释逻辑时，将发生的事情分为两个定义

> 3）......这行得通吗？

把游戏想象成现实生活。`startTurn()`每次玩家移动时你都应该打电话吗？例如，在拼字游戏中，当玩家移动时，他们总是开始轮到吗？即，在查阅他们的心理词典之前，他们是否总是检查手中的牌和棋盘上的牌？如果对象在现实生活中这样做，那么它*应该*在面向对象的语言中工作（我假设是 java，尽管有 c++ 标签）。但是，唯一的方法就是尝试和观察。所有这一切都假设我没有将您的游戏规则解释为全错，导致上述内容在这种情况下毫无意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:04:22.887

我认为您在“TurnIndicator”中投入了太多逻辑。跳过回合只是“下一个回合”——当前玩家没有移动/下棋这一事实不会改变回合的顺序。

此外，您有两个变量指示轮到谁了。`_isWhite`和`_currentTurn`两者。更糟的是，你`reverseTurn`改变了一个而不改变另一个。我建议使用`bool`[假设您实际上意味着只有两个玩家]，如果您需要轮到谁的“字符串”，请调用一个返回它的函数：

```
 std::string playerColour() 
 { 
     if (_isWhite) return "WHITE"; 
     return "BLACK";
 } 
```

# ruby-on-rails-3 - rack-openid：identifier_url 在部署之间发生变化

> ID：15816048
> 
> 赞同：1
> 
> 时间：2013-04-04T15:58:04.713
> 
> 标签：ruby-on-rails-3, openid, google-openid

[我已经按照此处](http://blog.sethladd.com/2010/09/ruby-rails-openid-and-google.html)的说明在我们的 Rails 应用程序中实现了 OpenID 。它主要是有效的，但偶尔我会`identifier_url`从谷歌得到不同的回应。当 SessionsController 尝试为具有 "old" 的现有电子邮件地址插入新记录时，这会导致重复键错误`identifier_url`。我最终不得不删除现有条目，要求用户重新注册。

这`identifier_url`似乎是一个哈希，所以显然我的应用程序中的某些内容发生了变化，导致 Google 生成了一个新的哈希。当我重新部署我的应用程序时，它似乎偶尔会发生，可能是因为 Capistrano 正在清理会话/cookie 作为部署过程的一部分。

的创建过程是什么`identifier_url`，以及如何配置 OpenID 以一致地生成它们？

# c# - Web Api Request.CreateResponse HttpResponseMessage 没有智能感知 VS2012

> ID：15816049
> 
> 赞同：27
> 
> 时间：2013-04-04T15:58:09.480
> 
> 标签：c#, asp.net-mvc-4, visual-studio-2012, asp.net-web-api

出于某种原因，`Request.CreateResponse`现在在 VS2012 中为“红色”，当我将鼠标悬停在 IDE 的用法上时

> 无法解析符号“CreateResponse”

这是 ApiController 类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Web.Http;
using System.Web.Http.Filters;
using GOCApi.Attributes;
using GOCApi.Models;
using GOCApi.Models.Abstract;
using AttributeRouting;
using AttributeRouting.Web.Http;

namespace GOCApi.Controllers
{
    [RoutePrefix("Courses")]
    public class CoursesController : ApiController
    {
        private ICoursesRepository _coursesRepository { get; set; }

        public CoursesController(ICoursesRepository coursesRepository)
        {
            _coursesRepository = coursesRepository;
        }

        [GET("{id}")]
        public HttpResponseMessage Get(int id)
        {
            var course = _coursesRepository.GetSingle(id);
            if (course == null)
            return Request.CreateResponse(HttpStatusCode.NotFound, "Invalid ID");
            return Request.CreateResponse(HttpStatusCode.OK, course);
        }
    }
} 
```

当然，代码确实可以编译并且可以工作，只是在我的屏幕上看到所有的“红色”真的很烦人。此外，当我键入时，智能感知现在不起作用`Request.CreateResponse`。这也曾经奏效，但我开始为我的 API 开发其他部分，然后才回来构建控制器，所以我不知道发生了什么。

有什么想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-09-23T14:46:04.827

您需要添加对`System.Net.Http.Formatting.dll`. `CreateResponse`扩展方法在那里定义。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-06-06T19:13:24.130

因为这个扩展方法存在于 中`System.Net.Http`，你只需要将它包含在你的 usings 语句中。

```
using System.Net.Http; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-08-13T04:40:42.450

您可以使用

```
 HttpResponseMessage result = new HttpResponseMessage(HttpStatusCode.Gone) 
```

代替

```
 Request.CreateResponse(HttpStatusCode.Gone) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-01-19T11:11:40.687

这是因为你必须这样做：

```
namespace GOCApi.Controllers
{
    [RoutePrefix("Courses")]
    public class CoursesController : ApiController
    {
        private ICoursesRepository _coursesRepository { get; set; }

        public CoursesController(ICoursesRepository coursesRepository)
        {
            _coursesRepository = coursesRepository;
        }

        [GET("{id}")]
        public HttpResponseMessage Get(int id)
        {
            var course = _coursesRepository.GetSingle(id);
            if (course == null){
               return this.Request.CreateResponse(HttpStatusCode.NotFound, "Invalid ID");
            }
            return this.Request.CreateResponse(HttpStatusCode.OK, course);
        }
    }
} 
```

注意`this`.
就我而言，编译器现在得到了它。看到[这里的例子](https://stackoverflow.com/questions/10655350/returning-http-status-code-from-asp-net-mvc-4-web-api-controller#answer-11328266)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-05T11:19:12.273

添加`System.Web.Http`对项目的引用。然后加

```
Using System.Web 
```

到cs文件的顶部。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-01-16T14:36:29.050

这是 VB.NET 和 Request.CreateResponse 的一个已知问题。

有一个解决方法： [在 vb.net Webapi Projects 中缺少 request.CreateResponse](https://stackoverflow.com/questions/16509543/missing-request-createresponse-in-vb-net-webapi-projects/21164101#21164101)

# powershell - 使用 Select-String 遍历已排序的哈希表包括空行？

> ID：15816051
> 
> 赞同：1
> 
> 时间：2013-04-04T15:58:11.290
> 
> 标签：powershell, hashtable

我正在尝试使用从排序的哈希表中提取某些值`Select-String`。

这行得通，但为什么输出中有额外的空行？

```
cls

$fruits = @{"1" = "apple"; "2" = "lemon"; "3" = "orange"; "4" = "apricot"}

foreach ($fruit in $fruits.GetEnumerator() | Sort-Object Value) {
    $fruit.Value | Select-String -pattern "ap" -SimpleMatch
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:14:46.043

我认为你得到的是空值，因为对于每个项目，你都在做一个 Select-String，它有时会返回一个值，但在其他时候什么都没有——这些空值就是空行。

尝试使用 Where-Object 的类似方法：

```
$fruits.Values | Sort-Object | Where-Object { $_ -match "ap" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:56:48.310

我正在使用 PowerShell 3.0。

我做了两行代码

```
PS C:\> $fruits = @{"1" = "apple"; "2" = "lemon"; "3" = "orange"; "4" = "apricot"}
PS C:\> $fruits.Values -like 'ap*'
apricot
apple
PS C:\> 
```

**进一步调查**

似乎是当没有匹配时它返回NULL。

```
foreach($key in $fruits.Keys){(Select-String -Pattern 'ap' -SimpleMatch -InputObject $fruits[$key]) -eq $NULL} 
```

由于它没有重定向到变量，它只是将 NULL 打印到主机。这是我的假设（假设）。

奇怪……好问题。

# d3.js - D3 将节点滚动到视图中

> ID：15816055
> 
> 赞同：1
> 
> 时间：2013-04-04T15:58:22.160
> 
> 标签：d3.js

我正在使用 D3 树。类似于：[http](http://bl.ocks.org/mbostock/4063570) ://bl.ocks.org/mbostock/4063570 但是，这个特殊的图表比浏览器窗口大。

鉴于我确切地知道我想要揭示哪一个 JSON 元素。

我如何将该元素滚动到 svg 画布中的视图中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:05:14.960

实现这一点的最简单方法可能是将要出现的内容包装在`g`元素中并在翻译中使用过渡。

```
groupToShow.attr("transform", "translate(1000,1000)")
   .transition()
   .duration(1000)
   .attr("transform", "translate(0,0)"); 
```

根据需要调整翻译和持续时间的值。

# ssl - 来自 SSL 端点提供商的 Heroku 错误响应

> ID：15816056
> 
> 赞同：0
> 
> 时间：2013-04-04T15:58:25.120
> 
> 标签：ssl, heroku

早上好，

我正在尝试在 Heroku 上更新我的 SSL 证书，但不断收到错误消息：

```
!  Bad response from SSL Endpoint provider. Please try again later. 
```

我已经完成了多次创建捆绑包的步骤，但没有成功。据我所知，这可能意味着我的证书有问题，或者 Herokus 服务有问题。提到了 Heroku 提供的 SSL Doctor 工具，但 Github 存储库说要使用该工具包，但我无法找到有关该命令是什么或如何使用它的任何文档。

我考虑过删除我当前的 SSL 密钥，但我已经这样做了好几个星期了，我不希望 SSL 关闭那么久。

任何人都曾经历过这种情况，或者知道如何使用 SSL Doctor（或者 SSL Doctor 是否会提供帮助）。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:59:41.360

我遇到了同样的问题。事实证明——我使用 Heroku gem 来处理这些操作。我所要做的就是卸载 Heroku gem，然后从 Heroku 安装最新的工具带。这个问题最糟糕的部分是它默默地失败了。:(

# asp.net-mvc-4 - Bootstrap JavaScript 适用于 localhost 但不适用于 webhost

> ID：15816060
> 
> 赞同：1
> 
> 时间：2013-04-04T15:58:38.710
> 
> 标签：asp.net-mvc-4, twitter-bootstrap

我正在使用使用 Buget 安装的 Twitter Bootstrap 到 ASP.NET MVC 应用程序。然而，我惊讶地发现，我所有曾经在 localhost 上工作的引导 JavaScript，实际上在上传到我的网络托管服务提供商时仍然停止工作。

我对此完全感到困惑，我似乎无法弄清楚出了什么问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T16:33:38.470

一些依赖于 jQuery 的脚本在 jQuery 加载之前就被包含进来了。

*   bootstrap-dropdown.js 包含在 jQuery 之前
*   您在第 75 行的自定义 javascript 包含在 jQuery 之前

我建议搬家

```
<script src="/Scripts/bootstrap.js" type="text/javascript"></script>
<script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/bootstrap-dropdown.js"></script> 
```

以及在包含 jQuery 包之后，从第 75 行到页面底部的自定义 javascript。或者将您的 jQuery 捆绑包移动到您的`<head>`. 这是您的偏好 - 请参阅这个问题：[Jquery 代码应该放在页眉还是页脚？](https://stackoverflow.com/questions/2105327/should-jquery-code-go-in-header-or-footer)关于那个特定的问题......

您说它在您的本地机器上而不是在远程服务器上工作 - 如果确实如此，那么我最好的猜测是，这与捆绑/缩小的工作方式不同取决于您是处于调试还是发布模式的事实有关。

* * *

**更新** 基本上，在调试版本中，不会对您的脚本和 css 执行捆绑/缩小。您在捆绑包中引用的每个`<link>`and`<script>`都将包含在一个单独的文件中，不会对其应用任何转换。在发布版本中，捆绑包中的文件被连接到一个文件中，并对其应用缩小等转换。根据您的评论，为了在您的本地站点和已发布站点中获得调试行为，我看到了 3 个选项：

**1\. 在您的发布版本中，在您的 web.config 中将编译调试标志设置为 true。**

IE

```
<system.web>
    <compilation debug="true" />
    <!-- Lines removed for clarity. -->
</system.web> 
```

我不会特别推荐这个，因为您的发布版本通常不应该被标记为正在调试。但这是一个有用的设置，可以快速打开您的发布版本，以检查您的 javascript/css 在关闭时是否正常工作。

**2\. 在代码中，关闭捆绑表中的捆绑优化。**

```
public static void RegisterBundles(BundleCollection bundles)
{
    // other code...
    BundleTable.EnableOptimizations = false;
} 
```

**3\. 不要这样做。**

行为上的差异是设计使然，并且是有道理的 - 在您的本地机器上进行开发，您可以看到所有单独的脚本/css 文件并且以未缩小的形式，这使得调试更加容易。发布后，这些文件将被压缩为一个压缩文件，这将减少您网站的加载时间。

我个人推荐选项 3，并确保您的样式/脚本包含在正确的顺序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:21:05.643

在您的页面中，您有

```
 <link href="/Content/bootstrapcss" rel="stylesheet"/> 
```

...文件类型有问题，也许应该是

```
 <link href="/Content/bootstrap.css" rel="stylesheet"/> ? 
```

而且您的 Modernizr 文件存在路径问题，请检查路径是否正确且文件是否存在：

```
http://bipscore.com/Scripts/modernizr-1.7.min.js 
```

可能还有其他问题，但首先纠正这两个问题并没有什么坏处。

祝你好运！

# xslt - 我需要定义一个 xslt 来将几个元素与自定义 xsd 类型的分隔符组合起来

> ID：15816067
> 
> 赞同：1
> 
> 时间：2013-04-04T15:58:58.407
> 
> 标签：xslt, xslt-1.0, xslt-2.0, exslt

我有几个自定义类型，它们有 2、3 或 4 个孩子。因此，无论我得到这些孩子，我都需要将它们组合成一个元素，该元素是输出 XML 中的父标记本身。由于缺乏 xslt 的经验，我尝试过但无法做到。任何人都可以帮助。

我的输入 XML。

```
<PERSON>
  <ID>194</ID>
  <NAME>IKHAJA</NAME>
  <DETAILS>
     <NUMBER>100</NUMBER>
     <Description />
     <NUMBER01 />
     <NUMBER02>Test</NUMBER02>
  </DETAILS>
  <STATUS>
     <NUMBER>ACTIVE</NUMBER>
     <Description>ACTIVE</Description>
     <NUMBER01 />
     <NUMBER02>ACTIVE</NUMBER02>
  </STATUS>
  <employer>
     <ID>123456</ID>
     <FNAME>EMPLOYER F NAME</FNAME>
     <LNAME>EMPLOYER L NAME</LNAME>
  </employer>
  <PERSON_OFF>
     <TYPE>
         <NUMBER>41</NUMBER>
         <Description>AMPLIFIERS</Description>
         <NUMBER01>77</NUMBER01>
         <NUMBER02 />
     </TYPE>
     <REPORT>
         <NUMBER />
         <Description />
         <NUMBER01 />
         <NUMBER02 />
     </REPORT>
     <SERIAL>111</SERIAL>
     <ADDITIONAL_DESC>TEST</ADDITIONAL_DESC>
     <KEY>5</KEY>
     <CREATED_BY>Test Guy</CREATED_BY>
     <CREATED_ON>2013-03-13T10:03:00</CREATED_ON>
     <PERSON_OFF_ONE>
         <BULK>
            <NUMBER>98078</NUMBER>
            <Description>BULK</Description>
            <NUMBER01 />
            <NUMBER02>8563</NUMBER02>
         </BULK>
         <CHECKED>Y</CHECKED>
     </PERSON_OFF_ONE>
  </PERSON_OFF>
</PERSON> 
```

我的输出 XML 应该是这样的：

```
<PERSON>
   <ID>194</ID>
   <NAME>IKHAJA</NAME>
   <DETAILS>100;;;Test</DETAILS>
   <STATUS>ACTIVE;ACTIVE;;ACTIVE</STATUS>
   <employer>123456:EMPLOYER F NAME,EMPLOYER L NAME</employer>
   <PERSON_OFF>
       <TYPE>41;AMPLIFIERS;77;</TYPE>
       <REPORT>;;;</REPORT>
       <SERIAL>111</SERIAL>
       <ADDITIONAL_DESC>TEST</ADDITIONAL_DESC>
       <KEY>5</KEY>
       <CREATED_BY>Test Guy</CREATED_BY>
       <CREATED_ON>2013-03-13T10:03:00</CREATED_ON>
       <PERSON_OFF_ONE>
            <BULK>98078;BULK;;8563</BULK>
            <CHECKED>Y</CHECKED>
       </PERSON_OFF_ONE>
   </PERSON_OFF>
</PERSON> 
```

如果您在此处观察详细信息，状态，批量等是我的自定义类型，它们具有子节点 NUMBER、Description、NUMBER01、NUMBRER02。我需要将它们与分隔符“;”结合起来 如果它们为空或为空，我将拥有“;;;” 在我的目标列中，如报告字段中所示。

此外，我还有一些雇主类型的字段，例如带有孩子 ID、FNAME 和 LNAME 的雇主，我应该将它们组合为 ID：FNAME、LNAME，如雇主字段所示。

我想如果我知道处理一种自定义类型，我可以轻松处理其他类型。

你能帮忙吗？我已经花了一整天的时间，我需要尽快做这件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:29:31.910

请试一试：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>

  <xsl:template match="DETAILS | STATUS | TYPE | REPORT | BULK">
    <xsl:copy>
      <xsl:apply-templates select="*" mode="delimit" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="*[position() > 1]" mode="delimit">
    <xsl:value-of select="concat(';', .)"/>
  </xsl:template>

  <xsl:template match="employer">
    <xsl:copy>
      <xsl:apply-templates select="*" mode="idlist" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="ID" mode="idlist">
    <xsl:value-of select="concat(., ':')" />
  </xsl:template>

  <xsl:template match="*[not(self::ID)][position() > 1]" mode="idlist">
    <xsl:value-of select="concat(',', .)" />
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，结果是：

```
<PERSON>
  <ID>194</ID>
  <NAME>IKHAJA</NAME>
  <DETAILS>100;;;Test</DETAILS>
  <STATUS>ACTIVE;ACTIVE;;ACTIVE</STATUS>
  <employer>123456:EMPLOYER F NAME,EMPLOYER L NAME</employer>
  <PERSON_OFF>
    <TYPE>41;AMPLIFIERS;77;</TYPE>
    <REPORT>;;;</REPORT>
    <SERIAL>111</SERIAL>
    <ADDITIONAL_DESC>TEST</ADDITIONAL_DESC>
    <KEY>5</KEY>
    <CREATED_BY>Test Guy</CREATED_BY>
    <CREATED_ON>2013-03-13T10:03:00</CREATED_ON>
    <PERSON_OFF_ONE>
      <BULK>98078;BULK;;8563</BULK>
      <CHECKED>Y</CHECKED>
    </PERSON_OFF_ONE>
  </PERSON_OFF>
</PERSON> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T03:10:11.590

**OP 对 JLRishe 的回答的评论**：

> 如果我列出了我所有的自定义类型，它就可以工作，但是在这里我有很多属于我的自定义类型的字段。除了列出“详细信息|状态|类型|报告|批量”之类的所有内容之外，有没有办法合并这些字段。

**这很容易做到，因为所有这些可能有数百个父元素都有四个子元素之一**。

**对 JLRishe 的解决方案进行的小幅调整适用于无限数量的父名称：**

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>

  <xsl:template match="*[NUMBER|Description|NUMBER01|NUMBER02]">
            <xsl:copy>
              <xsl:apply-templates select="*" mode="delimit" />
            </xsl:copy>
  </xsl:template>

  <xsl:template match="*[position() > 1]" mode="delimit">
    <xsl:value-of select="concat(';', .)"/>
  </xsl:template>

  <xsl:template match="employer">
    <xsl:copy>
      <xsl:apply-templates select="*" mode="idlist" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="ID" mode="idlist">
    <xsl:value-of select="concat(., ':')" />
  </xsl:template>

  <xsl:template match="*[not(self::ID)][position() > 1]" mode="idlist">
    <xsl:value-of select="concat(',', .)" />
  </xsl:template>
</xsl:stylesheet> 
```

**如您所见，此转换根本没有提及任何父名称，例如 DETAILS、STATUS、TYPE、REPORT、BULK、...等**。

当应用于提供的 XML 文档时，会产生所需的正确结果：

```
<PERSON>
   <ID>194</ID>
   <NAME>IKHAJA</NAME>
   <DETAILS>100;;;Test</DETAILS>
   <STATUS>ACTIVE;ACTIVE;;ACTIVE</STATUS>
   <employer>123456:EMPLOYER F NAME,EMPLOYER L NAME</employer>
   <PERSON_OFF>
      <TYPE>41;AMPLIFIERS;77;</TYPE>
      <REPORT>;;;</REPORT>
      <SERIAL>111</SERIAL>
      <ADDITIONAL_DESC>TEST</ADDITIONAL_DESC>
      <KEY>5</KEY>
      <CREATED_BY>Test Guy</CREATED_BY>
      <CREATED_ON>2013-03-13T10:03:00</CREATED_ON>
      <PERSON_OFF_ONE>
         <BULK>98078;BULK;;8563</BULK>
         <CHECKED>Y</CHECKED>
      </PERSON_OFF_ONE>
   </PERSON_OFF>
</PERSON> 
```

# postgresql - 奇怪的 PG 错误 StatementInvalid

> ID：15816072
> 
> 赞同：0
> 
> 时间：2013-04-04T15:59:12.687
> 
> 标签：postgresql

我们在 PG 中遇到了异常。谷歌搜索没有任何结果。

我们代码中触发异常的行是：

```
 @user = User.new(params[:user]) 
```

所以我们认为是在我们的堆栈中的某个地方。我们正在使用 ActiveRecord 3.2.12

```
 ActiveRecord::StatementInvalid - PG::Error: : SELECT a.attname, format_type(a.atttypid, a.atttypmod),
    pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod
    FROM pg_attribute a LEFT JOIN pg_attrdef d
    ON a.attrelid = d.adrelid AND a.attnum = d.adnum
    WHERE a.attrelid = '"users"'::regclass
    AND a.attnum > 0 AND NOT a.attisdropped
    ORDER BY a.attnum
    :
  bundle/ruby/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/postgresql_adapter.rb:1153:in `async_exec'
    /bundle/ruby/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/postgresql_adapter.rb:1153:in `exec_no_cache' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:41:04.597

我怀疑 ActiveRecord。看看你的错误信息：

```
PG::Error: : SELECT 
```

“：：”之间的那个空位可能是您的 PostgreSQL 错误消息应该去的地方。

另外-您说它有时有效，而另一些则无效。这不是您对数据库的期望。确保 PostgreSQL 正在记录错误，然后你就可以确定了。

您可能正在查看诸如连接不足、网络问题或 Ruby 中的资源问题之类的问题。不幸的是，看起来 ActiveRecord 正在丢弃错误消息。

# r - R中的人口金字塔w投影

> ID：15816073
> 
> 赞同：5
> 
> 时间：2013-04-04T15:59:17.100
> 
> 标签：r, plot, visualization

我想在**R**中创建人口金字塔。我知道 StackOverflow 上有很多示例，但我想创建一个还包括人口预测的示例，即每个年龄组按性别划分的条形图和按性别和年龄组划分的行数用于预测。

你可以在这里看到一个例子：http: [//geographyblog.eu/wp/the-worlds-population-pyramid-is-changing-shape/](http://geographyblog.eu/wp/the-worlds-population-pyramid-is-changing-shape/)

![在此处输入图像描述](https://i.stack.imgur.com/BtF9k.gif)

如果有一些关于如何更好地说明这一点的建议（例如用平滑线），他们也很受欢迎，但我想指出当前情况和预测。示例数据可在联合国网站上找到：http: [//esa.un.org/wpp/population-pyramids/population-pyramids_absolute.htm](http://esa.un.org/wpp/population-pyramids/population-pyramids_absolute.htm)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-05-09T10:55:52.617

也许少一点的临时方法使用`ggplot2`and`geom_bar`和`geom_step`。

可以从`wpp2015`包中提取数据（或者`wpp2012`，`wpp2010`或者`wpp2008`如果您更喜欢旧版本）。

```
library("dplyr")
library("tidyr")
library("wpp2015")

#load data in wpp2015
data(popF)
data(popM)
data(popFprojMed)
data(popMprojMed)

#combine past and future female population
df0 <- popF %>% 
  left_join(popFprojMed) %>%
  mutate(gender = "female")

#combine past and future male population, add on female population
df1 <- popM %>% 
  left_join(popMprojMed) %>%
  mutate(gender = "male") %>%
  bind_rows(df0) %>%
  mutate(age = factor(age, levels = unique(age)))

#stack data for ggplot, filter World population and required years
df2 <- df1 %>%
  gather(key = year, value = pop, -country, -country_code, -age, -gender) %>%
  mutate(pop = pop/1e03) %>%
  filter(country == "World", year %in% c(1950, 2000, 2050, 2100))

#add extra rows and numeric age variable for geom_step used for 2100
df2 <- df2 %>% 
  mutate(ageno = as.numeric(age) - 0.5)

df2 <- df2 %>%
  bind_rows(df2 %>% filter(year==2100, age=="100+") %>% mutate(ageno = ageno + 1)) 

df2 
# Source: local data frame [170 x 7]
# 
#    country country_code    age gender  year       pop ageno
#     (fctr)        (int) (fctr)  (chr) (chr)     (dbl) (dbl)
# 1    World          900    0-4   male  1950 171.85124   0.5
# 2    World          900    5-9   male  1950 137.99242   1.5
# 3    World          900  10-14   male  1950 133.27428   2.5
# 4    World          900  15-19   male  1950 121.69274   3.5
# 5    World          900  20-24   male  1950 112.39438   4.5
# 6    World          900  25-29   male  1950  96.59408   5.5
# 7    World          900  30-34   male  1950  83.38595   6.5
# 8    World          900  35-39   male  1950  80.59671   7.5
# 9    World          900  40-44   male  1950  73.08263   8.5
# 10   World          900  45-49   male  1950  63.13648   9.5
# ..     ...          ...    ...    ...   ...       ...   ... 
```

使用标准`ggplot`功能，您可以获得类似的东西，从[这里](https://stackoverflow.com/a/36804394/513463)的答案改编：

[![在此处输入图像描述](https://i.stack.imgur.com/uutpt.png)](https://i.stack.imgur.com/uutpt.png)

```
library("ggplot2")
ggplot(data = df2, aes(x = age, y = pop, fill = year)) +
  #bars for all but 2100
  geom_bar(data = df2 %>% filter(gender == "female", year != 2100) %>% arrange(rev(year)),
           stat = "identity",
           position = "identity") +
  geom_bar(data = df2 %>% filter(gender == "male", year != 2100) %>% arrange(rev(year)),
           stat = "identity",
           position = "identity",
           mapping = aes(y = -pop)) +
  #steps for 2100
  geom_step(data =  df2 %>% filter(gender == "female", year == 2100), 
            aes(x = ageno)) +
  geom_step(data =  df2 %>% filter(gender == "male", year == 2100), 
            aes(x = ageno, y = -pop)) +
  coord_flip() +
  scale_y_continuous(labels = abs) 
```

注意：您需要这样做`arrange(rev(year))`，因为条形图是叠加层。

使用该`ggthemes`软件包，您可以非常接近最初的《经济学人》情节。

[![在此处输入图像描述](https://i.stack.imgur.com/jdjAJ.png)](https://i.stack.imgur.com/jdjAJ.png)

```
library("ggthemes") 
ggplot(data = df2, aes(x = age, y = pop, fill = year)) +
  #bars for all but 2100
  geom_bar(data = df2 %>% filter(gender == "female", year != 2100) %>% arrange(rev(year)),
           stat = "identity",
           position = "identity") +
  geom_bar(data = df2 %>% filter(gender == "male", year != 2100) %>% arrange(rev(year)),
           stat = "identity",
           position = "identity",
           mapping = aes(y = -pop)) +
  #steps for 2100
  geom_step(data =  df2 %>% filter(gender == "female", year == 2100), 
        aes(x = ageno), size = 1) +
  geom_step(data =  df2 %>% filter(gender == "male", year == 2100), 
        aes(x = ageno, y = -pop), size = 1) +
  coord_flip() +
  #extra style shazzaz
  scale_y_continuous(labels = abs, limits = c(-400, 400), breaks = seq(-400, 400, 100)) +
  geom_hline(yintercept = 0) +
  theme_economist(horizontal = FALSE) +
  scale_fill_economist() +
  labs(fill = "", x = "", y = "") 
```

（我相信你可以走得更近，但我现在已经停在这里了）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T07:21:11.683

您可以使用[此问题](https://stackoverflow.com/questions/14245361/population-pyramid-density-plot-in-r)的答案轻松制作一些东西（这里我使用了@timriffle 的答案以及我的答案）。
首先是一些数据（来自您提供的链接）：

```
wp <- structure(list(M.1990 = c(325814, 295272, 269351, 265163, 249651, 220027, 196523, 178295, 141789, 115097, 106579, 91763, 77150, 56845, 38053, 25716, 19442), M.2000 = c(319675, 317296, 317072, 290827, 262992, 256378, 241401, 212924, 188905, 169133, 131813, 103162, 90921, 72231, 53449, 32707, 25868), M.2010 = c(328759, 315119, 311456, 312831, 311077, 284258, 255596, 248575, 232217, 202633, 176241, 153494, 114194, 83129, 65266, 43761, 39223), F.1990 = c(308121, 281322, 257432, 254065, 238856, 211943, 188433, 170937, 138358, 112931, 106510, 93425, 82667, 67057, 47679, 37435, 36724), F.2000 = c(298455, 297012, 299757, 277706, 252924, 248127, 233583, 207518, 183646, 165444, 132307, 105429, 96681, 80227, 64956, 45832, 46413), F.2010 = c(307079, 293664, 290598, 293313, 295739, 273379, 247383, 241938, 226914, 201142, 176440, 156283, 121200, 92071, 77990, 56895, 66029)), .Names = c("M.1990", "M.2000", "M.2010", "F.1990", "F.2000", "F.2010"), row.names = c("0-4", "5-9", "10-14", "15-19", "20-24", "25-29", "30-34", "35-39", "40-44", "45-49", "50-54", "55-59", "60-64", "65-69", "70-74", "75-79", "80+"), class = "data.frame")

wp
      M.1990 M.2000 M.2010 F.1990 F.2000 F.2010
0-4   325814 319675 328759 308121 298455 307079
5-9   295272 317296 315119 281322 297012 293664
10-14 269351 317072 311456 257432 299757 290598
15-19 265163 290827 312831 254065 277706 293313
20-24 249651 262992 311077 238856 252924 295739
25-29 220027 256378 284258 211943 248127 273379
30-34 196523 241401 255596 188433 233583 247383
35-39 178295 212924 248575 170937 207518 241938
40-44 141789 188905 232217 138358 183646 226914
45-49 115097 169133 202633 112931 165444 201142
50-54 106579 131813 176241 106510 132307 176440
55-59  91763 103162 153494  93425 105429 156283
60-64  77150  90921 114194  82667  96681 121200
65-69  56845  72231  83129  67057  80227  92071
70-74  38053  53449  65266  47679  64956  77990
75-79  25716  32707  43761  37435  45832  56895
80+    19442  25868  39223  36724  46413  66029

xrange <- range(c(0,wp))
yrange <- range(c(0,nrow(wp))) 
```

然后是绘图部分（在两个面板中）：

```
par(mfcol=c(1,2))
par(mar=c(5,4,4,0))
plot(NA,type="n", main="Men", xlab="", ylab="", xaxs="i", 
     xlim=rev(xrange), ylim=yrange, axes=FALSE, yaxs="i")
rect(xrange[1],yrange[1],xrange[2],yrange[2], col="cadetblue")
abline(v=seq(0,xrange[2],by=1e5), col="white")
# All years with bars you want to represent filled 
# should be entered in reverse order
polygon(c(0,rep(wp$M.2000,each=2), 0), c(0,0,rep(1:nrow(wp),each=2)),
        col="lightblue",border="lightblue")
polygon(c(0,rep(wp$M.1990,each=2), 0), c(0,0,rep(1:nrow(wp),each=2)), 
        col="darkblue",border="darkblue")
# And those you want with just a border, afterwards:
polygon(c(0,rep(wp$M.2010,each=2), 0), c(0,0,rep(1:nrow(wp),each=2)), 
        col=NA,border="darkred",lwd=2)
axis(1, at=c(0,1e5,2e5,3e5), labels=format(c(0,1e5,2e5,3e5),scientific=FALSE))
axis(2, at=1:nrow(wp)-0.5,labels=row.names(wp),las=2)
box()

par(mar=c(5,0,4,4))
plot(NA,type="n", main="Women", xlab="", ylab="", xaxs="i", 
     xlim=xrange, ylim=yrange, axes=FALSE, yaxs="i")
rect(xrange[1],yrange[1],xrange[2],yrange[2], col="cadetblue")
abline(v=seq(0,xrange[2],by=1e5), col="white")
polygon(c(0,rep(wp$F.2000,each=2), 0), c(0,0,rep(1:nrow(wp),each=2)),
        col="lightblue",border="lightblue")
polygon(c(0,rep(wp$F.1990,each=2), 0), c(0,0,rep(1:nrow(wp),each=2)), 
        col="darkblue",border="darkblue")
polygon(c(0,rep(wp$F.2010,each=2), 0), c(0,0,rep(1:nrow(wp),each=2)), 
        col=NA,border="darkred",lwd=2)
axis(1, at=c(0,1e5,2e5,3e5), labels=format(c(0,1e5,2e5,3e5),scientific=FALSE))
axis(4, at=1:nrow(wp)-0.5,labels=row.names(wp),las=2)
box() 
```

![在此处输入图像描述](https://i.stack.imgur.com/JA5hd.png)

为了规避@Spacedman 在他的评论中强调的问题，您可以在某些年份使用 alpha。

```
library(scales)
[...]
polygon(c(0,rep(wp$M.1990,each=2), 0), c(0,0,rep(1:nrow(wp),each=2)), 
        col=alpha("darkblue",0.4),border="darkblue")
[...]
polygon(c(0,rep(wp$F.1990,each=2), 0), c(0,0,rep(1:nrow(wp),each=2)), 
        col=alpha("darkblue",0.4),border="darkblue")
[...] 
```

![在此处输入图像描述](https://i.stack.imgur.com/DyH2D.png)

# wpf - 无法绑定到扩展器上的 IsExpanded

> ID：15816079
> 
> 赞同：0
> 
> 时间：2013-04-04T15:59:39.133
> 
> 标签：wpf, binding, controls, expander, blacklight

Blacklight 是一组较旧的 WPF 控件和样式。代码可以在[这里](http://blacklight.codeplex.com)找到。它包含一个名为 AnimatedExpander 的控件，它并不是一个真正的扩展器，它只是实现了 HeaderedContentControl 并添加了一个 IsExpandedProperty dprop：

```
 public static readonly DependencyProperty IsExpandedProperty =
       DependencyProperty.Register("IsExpanded", typeof(bool), typeof(AnimatedExpander), new PropertyMetadata(true));

    public bool IsExpanded
    {
        get
        {
            if (this.expandToggleButton != null)
            {
                return this.expandToggleButton.IsChecked.Value;
            }

            return (bool)GetValue(IsExpandedProperty);
        }

        set
        {
            SetValue(IsExpandedProperty, value);
        }
    } 
```

我需要绑定到 IsExpanded 以便我可以坚持扩展器是否扩展。我很确定我的绑定设置正确，并且这个自定义依赖属性存在问题。如果我在 Snoop 中打开视图，并在扩展器上设置 IsExpanded=True，则绑定有效。但是，只需单击控件上的 expandToggleButton 只会扩展控件，它不会影响我的绑定。

```
 <controls:AnimatedExpander IsExpanded="{Binding SGGExpanderExpanded}" />

    private bool _sGGExpanderExpanded;
    public bool SGGExpanderExpanded
    {
        get { return _sGGExpanderExpanded; }
        set
        {
            if (_sGGExpanderExpanded != value)
            {
                _sGGExpanderExpanded = value;
                OnPropertyChanged("SGGExpanderExpanded");
            }
        }
    } 
```

当用户单击连接以展开控件的切换按钮时，如何绑定到更改的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:04:42.937

一个糟糕的解决方案：

我能够通过将事件附加到 ToggleButton 单击并查看“发送者”内容和 IsChecked 值来更新我的视图模型来完成这项工作。

# bash - 如何停止 bash 评估字符串

> ID：15816083
> 
> 赞同：0
> 
> 时间：2013-04-04T15:59:44.423
> 
> 标签：bash, shell

我在脚本中有以下块来验证挂载点是否为 tmpfs

```
if [ "$(stat -f -c '%T' $LOGDIR)" -ne 'tmpfs' ]
then
    echo "Log directory ($LOGDIR) must be tmpfs"
    exit 1
fi 
```

问题是，如果文件系统以 ext2/ext3 形式返回，那么 shell 会尝试对其进行评估，然后除以零。如何强制将其视为常规字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:01:08.677

不要使用`-ne`算术运算符，使用字符串运算符`!=`。

顺便说一句，`bash`你运行的是什么版本？我越来越`integer expression expected`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T16:03:27.967

用于`!=`字符串比较；`-ne`仅用于整数比较。（实际上，我很惊讶它尝试使用“ext2/ext3”进行算术运算，而不是简单地将整个字符串视为零值。）

# java - ByteBuffer.getInt() 是否阻塞？

> ID：15816084
> 
> 赞同：0
> 
> 时间：2013-04-04T15:59:48.130
> 
> 标签：java, c++, java-native-interface, blocking, bytebuffer

我愿意使用`ByteBuffer`JNI 和 C++ 的线程间通信。我在文档中找不到 ByteBuffer`getInt()`是否阻塞。那么，我是否需要执行以下操作：

```
if(byteBuffer.asIntBuffer().hasRemaining())
    byteBuffer.getInt();
Thread.sleep(1000); 
```

或者

```
byteBuffer.getInt(); 
```

会阻塞所以睡眠是不必要的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:01:46.593

根据[文档](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html#getInt%28%29)，如果缓冲区中没有至少四个字节，它将抛出`BufferUnderflowException`. 这表明它不会阻塞（就像“阻塞”这个词根本没有出现在其文档页面上一样）。

但请注意，您的`sleep`解决方案将不起作用，因为您是在`sleep`调用**之后进行**调用`getInt`，如果那里还没有足够的数据，这将已经引发异常。在调用*之前*，您需要确保缓冲区中至少有四个字节`getInt`。

# ruby - 使用 rakefile 和 rsync 部署 Jekyll

> ID：15816086
> 
> 赞同：0
> 
> 时间：2013-04-04T15:59:52.367
> 
> 标签：ruby, jekyll, rakefile

我在尝试使用 rakefile 部署 Jekyll 站点时遇到了麻烦。按照[此处](http://www.layouts-the.me/rake/2011/04/23/rake_tasks_for_jekyll/)的说明，我已经设置了 ssh 密钥，并且无需输入密码即可进入我的服务器，这样就可以了。但是，当我尝试运行测试同步（例如，rake deploy dry-run）时，我得到一个错误。我已将 rakefile.rb 添加到我的存储库中，但是当我尝试运行它时出现错误：

```
rake deploy:dryrun --trace
rake aborted!
Don't know how to build task 'deploy:dryrun'
/Users/Christopher/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/rake/task_manager.rb:49:in `[]'
/Users/Christopher/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/rake/application.rb:142:in `invoke_task'
/Users/Christopher/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/rake/application.rb:101:in `block (2 levels) in top_level'
/Users/Christopher/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/rake/application.rb:101:in `each'
/Users/Christopher/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/rake/application.rb:101:in `block in top_level'
/Users/Christopher/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/rake/application.rb:110:in `run_with_threads'
/Users/Christopher/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/rake/application.rb:95:in `top_level'
/Users/Christopher/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/rake/application.rb:73:in `block in run'
/Users/Christopher/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/rake/application.rb:160:in `standard_exception_handling'
/Users/Christopher/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/rake/application.rb:70:in `run'
/Users/Christopher/.rbenv/versions/2.0.0-p0/bin/rake:37:in `<main>' 
```

关于我做错了什么的任何想法？

# sql - SQL：将个人不同的诊断放入一个水平行

> ID：15816090
> 
> 赞同：4
> 
> 时间：2013-04-04T15:59:57.913
> 
> 标签：sql, sql-server, pivot

我将 Microsoft SQL Server 2008 用于心理健康组织。

我有一张表格，列出了所有客户及其诊断，但客户的每个诊断都在一个新行中。我希望它们都排在一行中，并与每个诊断的日期一起水平列出。有些人只有一个诊断，有些人有 20 个，有些人没有。

这是我的数据现在看起来如何的示例（只有少数客户，我们有数千个）： ![http://i.imgur.com/pBV4svz.png](https://i.imgur.com/pBV4svz.png)

这是我希望它结束​​的格式： ![http://i.imgur.com/8cM2iNa.png](https://i.imgur.com/8cM2iNa.png)

您可以提供的任何解决方案或正确方向的提示都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T16:13:37.500

为了获得结果，我将首先取消透视然后透视您的数据。unpivot将*获取*您的日期和诊断列并将它们转换为行。一旦数据成行，您就可以应用数据透视。

如果您有已知数量的值，则可以对查询进行硬编码，如下所示：

```
select *
from
(
  select person, [case#], age,
    col+'_'+cast(rn as varchar(10)) col,
    value
  from
  (
    select person, 
      [case#],
      age,
      diagnosis,
      convert(varchar(10), diagnosisdate, 101) diagnosisDate,
      row_number() over(partition by person, [case#]
                        order by DiagnosisDate) rn
    from yourtable
  ) d
  cross apply
  (
    values ('diagnosis', diagnosis), ('diagnosisDate', diagnosisDate)
  ) c (col, value)
) t
pivot
(
  max(value)
  for col in (diagnosis_1, diagnosisDate_1,
              diagnosis_2, diagnosisDate_2,
              diagnosis_3, diagnosisDate_3,
              diagnosis_4, diagnosisDate_4)

) piv; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/c87f0/7)。

我将假设您对每个病例​​都有未知数量的诊断值。如果是这种情况，那么您将需要使用动态 sql 来生成结果：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT  ',' + QUOTENAME(col+'_'+cast(rn as varchar(10))) 
                    from 
                    (
                      select row_number() over(partition by person, [case#]
                                                order by DiagnosisDate) rn
                      from yourtable
                    ) t
                    cross join 
                    (
                      select 'Diagnosis' col union all 
                      select 'DiagnosisDate'
                    ) c
                    group by col, rn
                    order by rn, col
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT person, 
                    [case#],
                    age,' + @cols + '  
             from
             (
                select person, [case#], age,
                  col+''_''+cast(rn as varchar(10)) col,
                  value
                from
                (
                  select person, 
                    [case#],
                    age,
                    diagnosis,
                    convert(varchar(10), diagnosisdate, 101) diagnosisDate,
                    row_number() over(partition by person, [case#]
                                      order by DiagnosisDate) rn
                  from yourtable
                ) d
                cross apply
                (
                  values (''diagnosis'', diagnosis), (''diagnosisDate'', diagnosisDate)
                ) c (col, value)
            ) t
            pivot 
            (
                max(value)
                for col in (' + @cols + ')
            ) p '

execute(@query); 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/c87f0/14)。两个查询都给出了结果：

```
| PERSON |  CASE# | AGE |   DIAGNOSIS_1 | DIAGNOSISDATE_1 |      DIAGNOSIS_2 | DIAGNOSISDATE_2 |        DIAGNOSIS_3 | DIAGNOSISDATE_3 |  DIAGNOSIS_4 | DIAGNOSISDATE_4 |
------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|   John |  13784 |  56 |    Depression |      03/13/2012 |     Brain Injury |      03/14/2012 | Spinal Cord Injury |      03/15/2012 | Hypertension |      03/16/2012 |
|   Kate |   2643 |  37 |       Bipolar |      03/11/2012 |     Hypertension |      03/12/2012 |             (null) |          (null) |       (null) |          (null) |
|  Kevin | 500934 |  25 | Down Syndrome |      03/18/2012 | Clinical Obesity |      03/19/2012 |             (null) |          (null) |       (null) |          (null) |
|   Pete | 803342 |  34 |  Schizophenia |      03/17/2012 |           (null) |          (null) |             (null) |          (null) |       (null) |          (null) | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:09:40.433

对于这种类型的旋转，我认为聚合/分组方法是可行的：

```
select d.case, d.person,
       max(case when seqnum = 1 then diagnosis end) as d1,
       max(case when seqnum = 1 then diagnosisdate end) as d1date,
       max(case when seqnum = 2 then diagnosis end) as d2,
       max(case when seqnum = 2 then diagnosisdate end) as d2date,
       . . . -- and so on, for as many groups that you want
from (select d.*, row_number() over (partition by case order by diagnosisdate) as seqnum
      from diagnoses d
     ) d
group by d.case, d.person 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T16:04:46.283

由于您正在处理敏感的医疗信息，因此不应将可识别信息（姓名年龄等）存储在与医疗信息相同的表中。此外，如果您将人员信息提取到其自己的表和具有 personID 外键的诊断表中，您可以建立所需的一对多关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T16:13:50.477

除非您使用动态 SQL，否则 PIVOT 运算符将无法在这里工作。我认为病人可以在任何日期进来。PIVOT 运算符使用有限且预定义的列数。您的选择是使用动态 SQL 来创建 PIVOT 表，或者使用 Excel 或 SSRS 等报告工具来生成数据透视报告。

我认为动态 SQL 选项在这里不实用，因为对于每个患者就诊日期，您最终可能会有数百列。

如果您仍然想探索动态 SQL 选项，请查看此处：

[https://www.simple-talk.com/blogs/2007/09/14/pivots-with-dynamic-columns-in-sql-server-2005/](https://www.simple-talk.com/blogs/2007/09/14/pivots-with-dynamic-columns-in-sql-server-2005/)

# msbuild - 是否有推荐的方法来使用 MSBuild 在 TeamCity 中配置针对多个框架的 NuGet 包？

> ID：15816094
> 
> 赞同：22
> 
> 时间：2013-04-04T16:00:11.600
> 
> 标签：msbuild, teamcity, nuget, .net-framework-version, multitargeting

我已经阅读了一些帖子（请参阅下面的参考资料），但尚未找到针对我的技术堆栈的最佳实践指南。

**目标：**通过 TeamCity 使用 MSBuild 和 NuGet，创建针对多个 .NET 框架的单个 NuGet 包。

**约束：**

1.  仅从 VCS 中提取代码一次。
2.  所有编译的程序集的版本应该相同。
3.  单个 .csproj（不是每个目标框架一个）。

我有两种方法：

1.  创建单个构建配置。它将包含三个构建步骤：编译 .NET 3.5、编译 .NET 4.0、使用 NuGet 打包。每个构建步骤都将取决于最后一步的成功。我在这种方法中看到的唯一真正问题（希望有一个我不知道的解决方案）是每个构建步骤都需要自己的一组构建参数（例如，system.TargetFrameworkVersion 和 system.OutputPath）来指定DLL 所在的唯一位置（例如 bin\release\v3.5 和 bin\release\v4.0），以便 NuGet 打包步骤能够根据 .nuspec 文件中的 Files 部分执行其操作。

2.  创建多个构建配置。每个上述构建步骤的一个构建配置。使用这种方法，很容易解决 TargetFrameworkVersion 和 OutputPath 构建参数问题，但我现在必须创建快照依赖项并在构建之间共享程序集版本号。它还占用了构建配置槽，这对我们来说是可以的（但不是最佳的），因为我们确实有企业许可证。

选项#1 似乎是显而易见的选择。选项#2 感觉很脏。

**所以我的两个问题是：**

1.  是否可以创建构建步骤独有的参数？
2.  有第三种更好的方法吗？

**参考：**

1.  [多框架 NuGet 构建，带有用于内部依赖管理的符号](https://stackoverflow.com/questions/12867495/multi-framework-nuget-build-with-symbols-for-internal-dependency-management)
2.  [Nuget - 用多个项目打包一个解决方案（针对多个框架）](https://stackoverflow.com/questions/7569685/nuget-packing-a-solution-with-multiple-projects-targeting-multiple-frameworks)
3.  [http://lostechies.com/joshuaflanagan/2011/06/23/tips-for-building-nuget-packages/](http://lostechies.com/joshuaflanagan/2011/06/23/tips-for-building-nuget-packages/)
4.  [http://msdn.microsoft.com/en-us/library/hh264223.aspx](http://msdn.microsoft.com/en-us/library/hh264223.aspx)
5.  [https://stackoverflow.com/a/1083362/607701](https://stackoverflow.com/a/1083362/607701)
6.  [http://confluence.jetbrains.com/display/TCD7/Configuring+Build+Parameters](http://confluence.jetbrains.com/display/TCD7/Configuring+Build+Parameters)
7.  [http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-17T17:45:39.220

**这是我的首选解决方案（选项 #1）：**

魔术依赖于一个不幸的解决方法。如果您愿意做出这种妥协，那么这个解决方案确实有效。如果不是，您可以关注[我在 JetBrains 的问题跟踪器上打开的问题](http://youtrack.jetbrains.com/issue/TW-27569)。

单个构建配置如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/JmOZE.png)

请注意前两个构建步骤的名称。实际上，它们分别明确命名为 .NET 3.5 和 4.0 的 TargetFrameworkVersion 值。

然后，在 Build Parameters 部分，我配置了以下参数：

![在此处输入图像描述](https://i.stack.imgur.com/K9Dlw.png)

最后，Nuget Pack 步骤根据我的 .nuspec 文件部分进行文件路径转换：

```
<files>
    <file src="bin\release\v3.5\*.*" target="lib\net35" />
    <file src="bin\release\v4.0\*.*" target="lib\net40" />
</files> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-17T18:04:51.433

**这是采用第二种方法的解决方案：**

该项目包含以下构建配置和模板：

![在此处输入图像描述](https://i.stack.imgur.com/zOiBG.png)

共享内部版本号生成器是链中的第一个内部版本。除了创建依赖构建将共享的构建号之外，它什么也不做。我正在使用 Nicholas Williams 的 TeamCity 引用插件[Shared Build Number](http://java.nicholaswilliams.net/TeamCityPlugins/introduction#SharedBuildNumber)。

以下是构建模板中值得注意的配置：

![在此处输入图像描述](https://i.stack.imgur.com/rpVwV.png)

请注意，内部版本号来自上述共享内部版本号生成器的内部版本 ID。因此，就我而言，该构建的 ID 为 14。还要注意工件路径中的变量 %TargetFrameworkVersion%。幸运的是，TeamCity 几乎在所有地方都支持变量插值。

为了使模板能够利用构建号，它必须对该构建配置具有快照依赖关系：

![在此处输入图像描述](https://i.stack.imgur.com/MMOnw.png)

最后（关于模板），构建参数几乎与我首选解决方案中的参数相同。但是，请注意附加的配置参数。这将被继承的构建配置覆盖：

![在此处输入图像描述](https://i.stack.imgur.com/OYixE.png)

然后，在依赖的构建中，您必须连接一个快照依赖项，以便构建号（从模板继承）通过对共享构建号构建配置的依赖来实际工作：

![在此处输入图像描述](https://i.stack.imgur.com/Acti9.png)

而且，当然，您需要设置实际的目标框架：

![在此处输入图像描述](https://i.stack.imgur.com/mZPpR.png)

配置了实际构建后，您现在可以配置 NuGet 包构建配置。您不需要附加到 VCS 根：

![在此处输入图像描述](https://i.stack.imgur.com/CC8uz.png)

但是您确实需要配置一堆依赖项（快照和工件）：

![在此处输入图像描述](https://i.stack.imgur.com/w9Wdf.png)

最后，你完成了。

# windows - 安装驱动程序的脚本

> ID：15816099
> 
> 赞同：2
> 
> 时间：2013-04-04T16:00:15.430
> 
> 标签：windows, installation, device-driver

Windows 7 中应该安装的设备驱动程序存在问题，并且制造商没有真正的设置。

所需文件在 CD 上。但是当设备连接时，设备管理器找不到驱动文件。手动搜索驱动程序文件时，一切正常。

我是 .Net 开发人员，现在我需要任何可用于在用户计算机上安装此驱动程序的批处理或应用程序或系统。

```
12.03.2013  20:09           163'384 Cam1394ab_proppage_x64.dll
12.03.2013  20:09             6'138 Cam1394ab_x64.cat
12.03.2013  20:09             9'934 Cam1394ab_x64.inf
12.03.2013  20:09           169'016 Cam1394ab_x64.sys
12.03.2013  20:09            13'477 CamDriver1394.cat
12.03.2013  20:09            19'491 CamDriver1394.inf
12.03.2013  20:09            42'496 CamDriver1394.sys
12.03.2013  20:09            19'588 CamDriver1394_u.inf
12.03.2013  20:09            45'568 CamDriver1394_x64.sys 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:10:14.943

PnpUtil 解决方案有效：

[如何使用 cat 文件安装驱动程序？](https://stackoverflow.com/questions/5631789/how-to-install-driver-with-a-cat-file)

![即插即用](https://i.stack.imgur.com/tta2r.jpg)

# asp.net-mvc - 部分控制器类的替代品

> ID：15816100
> 
> 赞同：3
> 
> 时间：2013-04-04T16:00:19.673
> 
> 标签：asp.net-mvc, asp.net-mvc-3, single-responsibility-principle

我已经转移到一个具有 的项目`public partial class AdminController`，还有 15 个其他类实现了这个部分类。我认为这样做是为了让项目可以通过路径访问许多`"/admin/{methodname}"`路径。

主要部分类处理所有 15 个类的构造函数，因此具有 13 个构造函数依赖项。

我不认为这很漂亮，但我不确定如何整理它，以便每个类都可以拥有它需要的依赖项，但保持所有路由`"/admin/{methodname}"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:08:32.993

考虑转换`/admin`为[MVC 区域](http://msdn.microsoft.com/en-us/library/ee671793%28v=vs.100%29.aspx)，并让不同的控制器处理该区域内的不同路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:35:31.280

我想说，将逻辑重构为更小的控制器，从而解决您过多的依赖问题并使用您自己的路由映射来处理路由问题。

你可以有一个 RouteDefinition 类，它包含一个元组（我之前说过 Hash，但我认为你需要两个以上的参数）

```
public static class RouteDefinitions
{
    const List<Tuple<string,string,string> AdminRoutes = new List<Tuple<string,string,string>> {
        Tuple.Create("fooroute", //route
                     "foocontroller", //corresponding controller
                     "fooaction"), //corresponding action
        Tuple.Create("barroute", "barcontroller","baraction")
    };

    public static void AddRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        foreach(var adminRoute in AdminRoutes)
            routes.MapRoute(adminRoute.Item1, string.Format("Admin/{0}", adminRoute.Item1) , new { controller = adminRoute.Item2, action = adminRoute.Item3 });
    }
} 
```

然后在你的`Application_Start()`称呼中

```
RouteDefinitions.AddRoutes(RouteTable.Routes); 
```

# java - .EXE 的 Java 应用程序 - Derby DB

> ID：15816101
> 
> 赞同：0
> 
> 时间：2013-04-04T16:00:20.103
> 
> 标签：java, distribution, derby, launch4j

我有一个 Java 应用程序（允许人们进入销售）。它连接到 Derby 数据库。该应用程序是使用 NetBeans IDE 开发的。我需要将此应用程序转换为 .exe 以进行分发。通常我会为此使用 Launch4j，但由于该应用程序已链接到 Derby DB，它仍然可以工作吗？如果没有，还有其他方法可以将应用程序转换为 .exe 文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:05:24.647

您的应用程序将像以前一样工作。您应该注意，“转换”到 .exe 并不是真正的转换，它只是提供了一种在 Windows 中执行 java 程序的便捷方式（很像可运行的 JAR 文件）。

如果您运行 Derby 服务器，它将以与以前相同的方式连接到该服务器。但是，如果您在嵌入式模式下运行 Derby，则应确保数据库文件位于文件系统中的正确路径（您不应将 Derby 文件存档在 .exe 中）

# java - 将下拉列表值从 jsp 传递到 spring 控制器

> ID：15816102
> 
> 赞同：0
> 
> 时间：2013-04-04T16:00:25.117
> 
> 标签：java, spring, jsp, spring-mvc

给定以下代码：

```
@Controller  
public class Foo  
{  
    public void foo(@RequestParam("dropDown") String value)  
    {
           ...
    }  
} 
```

和一个jsp：

```
<div>   
    <form action="/foo">  
      <select id="dropDown">
            <option value="bar">bar</option>

     </select>
    </form>   
</div> 
```

如何将在`dropDown`id 中选择的值传回我的 Spring 控制器？就目前而言，当我尝试执行此操作时，我得到了无效的请求参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T03:30:31.213

```
<div>   
    <form action="/foo">  
      <select name="dropDown">
            <option value="bar">bar</option>

     </select>
    </form>   
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:24:16.547

您是否在控制器中设置了 @RequestMapping 注释，以便将提交的表单返回到正确的方法？在这种情况下，您需要：

```
@RequestMapping(method = RequestMethod.POST) 
```

你的`foo()`方法，我想。

有关详细信息，请参阅[http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch16s11.html](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch16s11.html)。

# sql - 子查询中的变量未接收变量值

> ID：15816103
> 
> 赞同：0
> 
> 时间：2013-04-04T16:00:29.287
> 
> 标签：sql, sql-server, tsql

我以前从未尝试将变量值传递给子查询，而且我似乎做错了。我没有收到任何错误，但也没有得到任何结果，而如果我将 startdate、enddate 和角色的值硬编码到子查询中，它会正确运行。

================编辑=======================

我的错，我发布了我正在玩的早期测试脚本，它确实充满了错误，对此感到抱歉。这是我正在使用的完整代码：

```
DECLARE @Role varchar,
    @StartDate datetime,
    @Enddate datetime;

SET     @Role = 'Volunteer';
SET     @StartDate = DATEADD(d, -100, getdate());
SET     @Enddate = getdate();

SELECT rolename, Category, [1] as [1 Day],[2] as [2 Days],[3] as [3 Days],[4] as [4 Days],[5] as [5 Days],[6] as [6 Days],[7] as [7 Days]  FROM
(SELECT    CriminalHistoryID, vps.RoleName, 'Rec2PreClr' as Category,
        DATEDIFF(d, chc.ReceiveDate, chc.PreClrDate) as DaysDif
  FROM  dbo.v_PersonStatus vps
              INNER JOIN dbo.CriminalHistoryCheck chc
                    ON vps.PersonID = chc.PersonID
  WHERE chc.ReceiveDate BETWEEN @StartDate AND @Enddate AND vps.rolename = @Role and DATEDIFF(d, chc.ReceiveDate, chc.PreClrDate) BETWEEN 0 and 7
  UNION
  SELECT      CriminalHistoryID, vps.RoleName, 'PreClr2Clr' as Category,
              DATEDIFF(d, chc.PreClrDate, chc.FinalDate) as DaysDif
  FROM  dbo.v_PersonStatus vps
              INNER JOIN dbo.CriminalHistoryCheck chc
                    ON vps.PersonID = chc.PersonID
  WHERE chc.ReceiveDate BETWEEN @StartDate AND @Enddate AND vps.rolename = @Role AND DATEDIFF(d, chc.PreClrDate, chc.FinalDate) BETWEEN 0 and 7
  UNION
  SELECT      CriminalHistoryID, vps.RoleName, 'Rec2Clr' as Category,
              DATEDIFF(d, chc.ReceiveDate, FinalDate) as DaysDif
  FROM  dbo.v_PersonStatus vps
              INNER JOIN dbo.CriminalHistoryCheck chc
                    ON vps.PersonID = chc.PersonID
  WHERE chc.ReceiveDate BETWEEN @StartDate AND @Enddate AND vps.rolename = @Role AND DATEDIFF(d, chc.ReceiveDate, FinalDate) BETWEEN 0 and 7
  ) UNIONqry
PIVOT
(count(CriminalHistoryID) for DaysDif in ([1],[2],[3],[4],[5],[6],[7])) pvt
Order by RoleName, Category 
```

@Startdate、@Enddate 和 @Role 的值似乎没有进入子查询。我是否需要做一些事情来告诉潜艇在盒子外面看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:06:48.680

两个问题：

1.  您没有为 volStatus 赋值
2.  它应该是`@volstatus`而不是`@ volstatus`- 没有空间

所以，改变：

```
WHERE chc.ReceiveDate BETWEEN @StartDate AND @Enddate AND vps.rolename = @ VolStatus and DATEDIFF(d, chc.ReceiveDate, chc.PreClrDate) BETWEEN 0 and 7 
```

至：

```
WHERE chc.ReceiveDate BETWEEN @StartDate AND @Enddate AND vps.rolename = @VolStatus and DATEDIFF(d, chc.ReceiveDate, chc.PreClrDate) BETWEEN 0 and 7 
```

# ruby-on-rails - Neo4j & Neography - 在哈希/openstruct 对象中获取密码查询结果

> ID：15816109
> 
> 赞同：3
> 
> 时间：2013-04-04T16:00:35.560
> 
> 标签：ruby-on-rails, neo4j, neography

我正在使用令人敬畏的neography gem，并且在将Cypher查询的结果转换为结构化对象（OpenStruct.new ...）时遇到了一个小问题

我不知道如何从列和数据查询结果中创建哈希或 OpenStruct，它们是

```
{"columns"=>["p.pd_challenge_id", "p.author_id"], "data"=>[["158", "88"], ["158", "90"], ["158", "99"], ["158", "95"], ["158", "97"]]} 
```

我无法从中创建可用的哈希。.我尝试了几件事，包括

```
["data"].map{|x|{ "challenge_id" => x[1],"author_id"=>x[0]}}.to_json 
```

结果是

```
{{"challenge_id":158, "author_id":88}, {"challenge_id":158, "author_id":90}, {"challenge_id":158, "author_id":99}}    etc..   (to which I simply cannot convert to a hash or openstruct) 
```

我正在寻找的是存储在结构对象中的类似以下内容，因此脚手架视图可以未经修改地读取它：

```
{:challenge_id=>158, :author_id=>88}
{:challenge_id=>158, :author_id=>90}
{:challenge_id=>158, :author_id=>99} 
```

**我的观点会寻找 object.challenge_id**

现在，我在使用 .map 方法时尝试在“challenge_id”上使用 to_sym 无济于事。

我试图在 ["data"] 上散列 [@mydata] 也不起作用

有没有一种简单的方法可以将所有这些数据放入结构化对象（OpenStruct.new ..）中，以便我的表单可以像读取活动记录查询的结果一样简单地读取它？我可以用 neo.get_node_properties 做到这一点，但似乎无法正常工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T16:38:43.573

假设您有两个节点，具有名称和标题。

```
cypher = "start n = node(1,2) return n.name as name, n.title as title"
results = @neo.execute_query(cypher)
{"columns"=>["name", "title"], "data"=>[["Marc", "awesome"], ["Tom", "chief"]]} 
```

然后你得到你的结果并这样做：

```
array_of_hashes = results["data"].map {|row| Hash[*results["columns"].zip(row).flatten] } 
```

这会给你留下：

`[{"name"=>"Marc", "title"=>"awesome"}, {"name"=>"Tom", "title"=>"chief"}]`

你可以停在这里或者...

`objects = array_of_hashes.map{|m| OpenStruct.new(m)}`

`[#<OpenStruct name="Marc", title="awesome">, #<OpenStruct name="Tom", title="chief">]`

然后您可以访问

`objects.first.name` => “马克”

# python - 使 assertEqual 在以特定字符串开头的 RuntimeErrors 上不会失败

> ID：15816114
> 
> 赞同：0
> 
> 时间：2013-04-04T16:00:49.887
> 
> 标签：python, unit-testing

我正在使用 Python 编写单元测试`assertEqual`：

```
def test_SetOwner(self, owner):
   self.objectid.SetOwner(owner)
   self.assertEqual(self.objectid.GetOwner(), owner) 
```

这在大多数情况下都有效，但在某些特定情况下，`RuntimeError`以`Could not execute...`. 但是，这应该不会触发单元测试套件中的错误。

有没有一种方法可以以某种方式使`assertEqual`以该特定字符串开头的 RuntimeErrors 不失败，同时仍捕获所有其他 RuntimeErrors？或者有没有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:22:44.193

您可以使用`try/except`块来执行此操作，并分别检查这两种情况。

```
def test_SetOwner(self, owner):
    self.objectid.SetOwner(owner)
    try:
        owner_prime = self.objectid.GetOwner()
    except RuntimeError as e:
        self.assertTrue(e.args[0].startswith("Could not execute"))
    else:
        self.assertEqual(owner, owner_prime) 
```

但正如我在上面的评论中提到的，这看起来不是一个很好的单元测试。例如，如果`GetOwner()`在某个时候引入了一个错误，因此它总是引发“无法执行”`RuntimeError`怎么办？这几乎肯定不是所期望的行为，但您的测试将继续通过。

# c# - 调用通用扩展方法而不指定尽可能多的类型

> ID：15816115
> 
> 赞同：5
> 
> 时间：2013-04-04T16:00:50.340
> 
> 标签：c#, lambda, extension-methods

这是我用于测试类型扩展方法的类的片段：

```
class Something
{
  [StringLength(100, MinimumLength = 1, ErrorMessage = "Must have between 1 and 100 characters")]
  public string SomePublicString { get; set; }
} 
```

我有以下扩展方法：

```
public static class TypeExtensions
{
  public static TAttributeType GetCustomAttribute<T, TAttributeType, TProperty>(this T value, Expression<Func<T, TProperty>> propertyLambda, bool inherit = false)
  {
    var type = typeof(T);
    var member = (MemberExpression)propertyLambda.Body;
    var propertyInfo = (PropertyInfo)member.Member;
    var customAttributes = propertyInfo.GetCustomAttributes(typeof(TAttributeType), inherit);

    return customAttributes.OfType<TAttributeType>().FirstOrDefault();
  }
} 
```

**单元测试中的用法：**

```
1:  var something = new Something();
2:  var actual = something.GetCustomAttribute<Something, StringLengthAttribute, string>(x => x.SomePublicString);

3:  actual.MinimumLength.Should().Be(1);
4:  actual.MaximumLength.Should().Be(100);
5:  actual.ErrorMessage.Should().Be("Must have between 1 and 100 characters"); 
```

这将返回一个通过测试（使用 FluentAssertions）。

但是，我想在第 2 行中对 GetCustomAttribute() 的方法调用如下：

```
var actual = something.GetCustomAttribute<StringLengthAttribute>(x => x.SomePublicString); 
```

这可能吗？我错过了什么吗？也许我正在喝咖啡因崩溃。:(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T16:05:15.750

不，您要么必须指定*所有*类型参数，要么都不指定。没有“部分”类型推断。

但是，有时您可以摆脱这种情况的一种方法是使用一个具有单个类型参数的泛型方法，该方法返回泛型类的实例，然后对其使用类型推断来完成其余的工作 - 反之亦然。在这种情况下，实际上最好将获取的属性与其他属性分开：

```
something.GetPropertyAttributes(x => x.SomePublicString)
         .FirstAttribute<StringLengthAttribute>(); 
```

这里第一个方法调用推断`T`和`TProperty`- 并且只返回一个`IEnumerable<Attribute>`并且`FirstAttribute`只会执行`OfType`/`FirstOrDefault`调用。（您甚至可以决定不需要`FirstAttribute`，因为调用`OfType`和您`FirstOrDefault`自己非常简单。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T16:01:46.953

不可能推断出某些类型参数，但不是全部，不。

您可以：

1.  指定所有通用参数。

2.  确保可以推断出所有通用参数。（并不总是可能的，或者允许推理所需的妥协可能是不可取的。）

3.  将方法分解为多种方法，一种方法推断通用参数，一种方法不推断。

# xslt - 如何根据您在层次结构中的位置在 XML 中查找元素

> ID：15816116
> 
> 赞同：0
> 
> 时间：2013-04-04T16:00:50.643
> 
> 标签：xslt

我有一个相当复杂的 XML 结构，但在一小部分中，我有一个以下结构中的输入/输出时间列表以及它可能包含的潜在数据：

```
<EventSummary>
   <Name>In/Out times</Name>
   <Entries>
      <Entry>
         <Name>In</Name>
         <Time>4/1/2013 10:45</Time>
         <Value>1</Value>
      </Entry>
      <Entry>
         <Name>In</Name>
         <Time>4/1/2013 10:55</Time>
         <Value>1</Value>
      </Entry>
      <Entry>
         <Name>Out</Name>
         <Time>4/1/2013 11:30</Time>
         <Value>0</Value>
      </Entry>
      <Entry>
         <Name>In</Name>
         <Time>4/1/2013 11:35</Time>
         <Value>1</Value>
      </Entry>
   </Entries>
</EventSummary> 
```

所以这些条目保证是按时间顺序排列的，但我需要协调一个 In 时间和下一个 Out 时间。因此，在上面的示例中，请注意我们有一个 In 时间，然后是另一个 In tim，然后是 Out 时间，然后是 In 时间。我需要最终产品的样子，在这种情况下是这样的：

```
<Table>
  <Row>
    <Cell>
      <Text>4/1/2013 10:45</Text>
    </Cell>
    <Cell>
      <Text>4/1/2013 11:30</Text>
    </Cell>
  </Row>
  <Row>
    <Cell>
      <Text>4/1/2013 11:35</Text>
    </Cell>
  </Row>
</Table> 
```

基本上我需要为每个输入/输出对设置一行。所以我需要找到第一个 In，然后跳过所有下一个 In，直到第一个 Out，然后如果在 Out 之后找到另一个 In，则开始一个新行......等等。

我只是不知道如何在循环访问条目时从寻找 In 或 Out 切换。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:22:03.100

这应该这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="/">
    <Table>
      <xsl:apply-templates
        select="EventSummary/Entries
                   /Entry[Name = 'In' and 
                          (not(preceding-sibling::Entry) or
                            preceding-sibling::Entry[1]/Name = 'Out')]" />
    </Table>
  </xsl:template>

  <xsl:template match="Entry[Name = 'In']">
    <Row>
      <xsl:apply-templates
        select="Time |
                following-sibling::Entry[Name = 'Out'][1]/Time" />
    </Row>
  </xsl:template>

  <xsl:template match="Time">
    <Cell>
      <Text>
        <xsl:value-of select="." />
      </Text>
    </Cell>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，结果是：

```
<Table>
  <Row>
    <Cell>
      <Text>4/1/2013 10:45</Text>
    </Cell>
    <Cell>
      <Text>4/1/2013 11:30</Text>
    </Cell>
  </Row>
  <Row>
    <Cell>
      <Text>4/1/2013 11:35</Text>
    </Cell>
  </Row>
</Table> 
```

# neo4j - Neo4j 增量备份策略

> ID：15816117
> 
> 赞同：2
> 
> 时间：2013-04-04T16:00:52.853
> 
> 标签：neo4j

从谷歌组重新发布。我们目前保留 7 个备份文件夹，一周中每天一个。每天午夜，cron 作业会刷新给定日期的备份文件夹内容，并以完整备份和增量备份（每分钟执行一次）重新开始。有问题的是一个用例，其中服务器可能在超过一天边界时关闭，在这种情况下，不会清除第二天的备份文件夹内容。行为是增量备份只是针对旧的陈旧数据运行 - 看似没有问题。我对备份文档的阅读表明，在增量期间应用的事务是基于生产数据的应计事务，这与应用事务的备份集（即我们的陈旧数据）完全分离。

那么，在执行 SOD 之后的第一次增量备份之前，我们可以做哪些可靠的测试来查看我们指向的文件夹中是否包含陈旧数据？有一些明显的东西，比如日志文件日期等，但我想我会发布这个，看看是否有明确的方法来检测埋在我们可以依赖的备份文件夹数据中的某个日期戳。

谢谢，埃里克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:21:49.317

解决此问题的一种方法是将每周备份目录中文件的修改/创建时间戳`neostore`与前一天的时间戳进行比较。此文件保证始终存在于完整的 Neo4j 备份中，因此检查起来应该是安全的。如果当天的时间戳早于前一天，那么显然您有一个过时的备份，您可以采取适当的措施。

一种在类 unix 操作系统上比较时间戳的方法，您可以在此处找到：[https ://superuser.com/questions/138270/compare-file-timestamp-in-bash](https://superuser.com/questions/138270/compare-file-timestamp-in-bash)

希望有帮助。

# php - PHP HTML Tidy：缓冲区的大小限制

> ID：15816119
> 
> 赞同：6
> 
> 时间：2013-04-04T16:00:59.177
> 
> 标签：php, htmltidy

我正在尝试使用作为 PHP ( [http://www.php.net/manual/en/book.tidy.php](http://www.php.net/manual/en/book.tidy.php) ) 一部分的 HTML Tidy 实现来重新格式化一大块 HTML。我遇到了一个问题，其中 Tidy 将输出截断超过某个点（大约 8K）。

当我创建一个大约 10K 长的字符串并将其交给 tidy_repair_string 时，如下所示：

```
$output = tidy_repair_string($output, array( 
    'indent' => true, // enforce indentation 
    'hide-comments' => true, // Remove the comments 
    'wrap' => 100, // Break each line after 100 chars 
    'output-html' => true, // Output as HTML 
    'char-encoding' => $encoding // The input/output encoding 
), $encoding); 
```

我在 8,070 个字符后删除了所有内容。如果我用 10 个字符填充字符串的开头，那么末尾正好有 10 个字符。
**有没有办法改变 tidy_repair_string 的缓冲区大小，使其更大？**

查看[http://www.php.net/manual/en/tidy.getconfig.php](http://www.php.net/manual/en/tidy.getconfig.php)似乎没有配置选项，Google 非常无用/我的 Google-fu 让我失望了，而且没有大量有关此的文档。任何帮助将不胜感激！

**编辑：**我在 Windows 7 上使用 xampp-portable-lite-win32-1.8.1-VC9。即使我将 php.ini 更改为使用 memory_limit = 900M，问题仍然存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:43:40.933

好吧，我可以想到这可能会失败的几个原因。

1.  你已经超出了你的内存限制，不仅仅是这个函数调用，而是将变量加载到内存和你正在做的任何预处理。要对此进行测试，您可以尝试将 php.ini 中的内存限制增加到非常高的值，或者您可以使用 memory_get_usage()。在创建对象之前运行一次，然后在创建对象后再次运行，并获取两个结果之间的差异。（[如何在 PHP 中查找对象使用的内存？（sizeof）](https://stackoverflow.com/questions/1075419/how-to-find-memory-used-by-an-object-in-php-sizeof)）

2.  PHP tidy 在 Linux 的 tidy 程序的一个版本上进行引导。我知道不久前，该程序一次限制为 4096 个字符（[http://www.autoitscript.com/forum/topic/129973-tidy-4096-char-limit/](http://www.autoitscript.com/forum/topic/129973-tidy-4096-char-limit/)），但看起来好像该错误已被修复。不过，我建议只是测试该理论的方法是回显您的 10K 字符串（这需要一分钟），然后直接通过 bash 的 tidy 程序运行。我决定自己测试这个理论：

    来自 BASH `echo $(python -c 'print 20000*"a"') > test_file`，. 因为一个 char 是 1 个字节，这个命令应该为我们创建一个 20K 的文件。显然，这不会通过 tidy 进行验证，但它是一些不错的垃圾文本，我可以扔给程序。现在`sudo apt-get install tidy`用`tidy < test_file`. 对我来说，这不会失败，但也许试一试。如果它没有失败，那么它不是特定于引导的 bash tidy 程序。

    *现在我们已经消除了 php.ini 和实际的 bash tidy 程序作为问题。

3.  然后我尝试重新创建您的错误。

    我开始使用上面的注释，解析文件而不是字符串。

    ```
    <?PHP
    $output = tidy_repair_file("test_file");

    print strlen($output);
    ?> 
    ```

    对于 tidy_repair_file strlen，我得到了 20111（其中额外的 111 个字符来自整齐的格式。没有截断。然后我尝试将它读入活动内存并将其解析为字符串。

    ```
    <?PHP
    $data = readfile("test_file"); //read a 20K file into active memeory

    $encoding = "ascii"; //I just set my encoding to 'ascii' because I like it...

    $output = tidy_repair_string($data, array(
    'indent' => true, // enforce indentation
    'hide-comments' => true, // Remove the comments
    'wrap' => 100, // Break each line after 100 chars
    'output-html' => true, // Output as HTML
    'char-encoding' => $encoding // The input/output encoding
    ), $encoding);

    print strlen($output);
    ?> 
    ```

我显然在这里做错了，因为我的垃圾文件回显给我，然后是“132”，这是一个基本的 HTML 文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
  <head>
    <title></title>
  </head>
  <body>
    20001
  </body>
</html> 
```

虽然我做错了，但这个输出确实告诉我我正在解析一个没有截断的 20K 文件。

还值得注意的是，我`php test.php`在提示符下使用并通过 Web 浏览器运行它都尝试了此代码。我得到相同的结果。没有截断。我还值得注意的是，我是在 Ubuntu Server 而非 Windows IIS 上运行它的。

尝试将变量输出到文件，然后对它运行 tidy_repair_file()。显然，这个解决方案是不可持续的，也不会扩展，但它会告诉你它是否是原始字符串的问题。

此外，尝试在您的 tidy 调用之前和之后在 $output 上运行 strlen() - 确保您的字符串是 10K 字符串，然后才能达到 tidy ......就像一个健全性检查。

祝你好运，我希望这会有所帮助！

# java - 创建随机密码给出不兼容类型错误

> ID：15816121
> 
> 赞同：-1
> 
> 时间：2013-04-04T16:01:11.683
> 
> 标签：java, incompatibletypeerror

到目前为止，这是我的编码。我正在制作一个程序来帮助为用户随机创建密码。我在制作随机字母时遇到问题。我想到了一种方法，但它给了我一个不兼容的错误，我尝试了：

```
chars[] letters= "abecdefghijklmnopqrstuvwxyz".toCharArray(); 
```

这是我目前的代码。

```
import java.util.Random;
import java.util.Scanner;

public class Password
{
  public static void main(String [] args)
  {
    char letters;
    Scanner in = new Scanner (System.in);
    System.out.println("Please choose from the following menu options:");
    System.out.println("[1] Lowercase Letters");
    System.out.println("[2] Lowercase & Uppercase Letters");
    System.out.println("[3] Lowercase, Uppercase, and Numbers");
    System.out.println("[4] Lowercase, Uppercase, Numbers and Punctuation");
    System.out.println("[5] Quit");
    System.out.println ("Enter Selection:");
    int selection = in.nextInt();
    System.out.println("Password Length (1-14):");
    int length = in.nextInt();
    if (selection == 1)
      letters = "abcdefghisjklmnopqrstuvwxyz".toCharArray();
    Stringbuilder sb = new StringBuilder(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:03:44.867

toCharArray 返回 char[] 并且 letters 只是 char

# iphone - 如何知道 NSMutableArray 是否包含对象？

> ID：15816124
> 
> 赞同：1
> 
> 时间：2013-04-04T16:01:21.873
> 
> 标签：iphone, nsmutablearray, nspredicate

我有一个 NSMutableArray Paths ，其中包含许多 Path 对象。

我会知道路径中是否有特定路径。

我试过：

```
if([paths containsObject:aPath]) {
    return YES;
} 
```

但它不起作用。

所以，我也尝试了 Predicates ：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF contains %@", path];
NSArray *filteredArray = [self.paths filteredArrayUsingPredicate:predicate]; 
```

但我有一个错误，控制台说我路径不是一个集合。

编辑 ：

我的路径数组是：

```
2013-04-04 20:57:36.465 numbs[42781:617] paths (
    "PATH: (\n    2,\n    2,\n    2,\n    5,\n    5,\n    6,\n    5,\n    4\n)",
    "PATH: (\n    2,\n    2,\n    2,\n    5,\n    5,\n    6,\n    4,\n    5\n)",
    "PATH: (\n    2,\n    2,\n    2,\n    5,\n    5,\n    4,\n    5,\n    6\n)",
    "PATH: (\n    2,\n    2,\n    2,\n    5,\n    5,\n    4,\n    6,\n    5\n)"
) 
```

路径是：

```
PATH: (
    2,
    2,
    2,
    5,
    5,
    5,
    6,
    5,
    4
) 
```

编辑 2：

我添加了 Path.m

```
- (BOOL)isEqual:(id)other
{
    return ([other isKindOfClass:[Path class]] &&
            [[other arrayOfNode] isEqual:self.arrayOfNode] &&
            [other somme] == self.somme &&
            [[other result] isEqual:self.result] &&
            [[other resultString] isEqual:self.resultString] &&
            [[other wayArray] isEqual:self.wayArray]);
}

- (NSUInteger) hash;
{
    return somme ^ [resultString hash] ^ [wayArray hash] ^ [arrayOfNode hash] ^ [result hash];
} 
```

在我的控制器中：

```
 if([paths containsObject:aPath]) {
        return YES;
    } 
```

但是这种方法也行不通。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T19:31:41.080

1.  你的第一直觉是对的，使用`containsObject:`

    ```
    if([paths containsObject:aPath]) {
        return YES;
    } 
    ```

2.  但是，这对您不起作用，因为您使用的是自定义子类并且尚未实现（我假设）`isEqual:`。我不知道路径属性，因此您将比较路径包含的任何实例变量。

    ```
    - (BOOL)isEqual:(id)other
    {
        return ([other isKindOfClass:[Path class]] &&
            // TODO: instance variable checks like... 
            // [[other ivar] isEqual:_ivar] && 
            // [[other ivar2] isEqual:_ivar2]                 
    } 
    ```

3.  最后，根据文档，如果您实施，`isEqual:`您还必须实施`hash`

    ```
    - (NSUInteger)hash
    {
        return [_ivar hash] ^ [_ivar2 hash];
    } 
    ```

有关更多信息，请参阅[实现平等和散列](http://www.mikeash.com/pyblog/friday-qa-2010-06-18-implementing-equality-and-hashing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:14:35.737

***已编辑（关于 04013 帖子中的新信息***）****

 ***如果我是你，我会尝试这样的事情：

```
Path *_path = ...; // you object you'd like to find
NSArray *_pathsArray = ...; // the array with lots of Path objects;

if ([[_pathsArray filteredArrayUsingPredicate:[NSPredicate predicateWithBlock:^BOOL(id evaluatedObject, NSDictionary *bindings) {
    return ([evaluatedObject isEqual:_path]); // ... or whatever how you'd like to compare them
}]] count] > 0) {
    // it contains your _path object
} else {
    // it doesn't contain you _path object
} 
```

* * *

**或者**

```
Path *_path = ...; // you object you'd like to find
NSArray *_pathsArray = ...; // the array with lots of Path objects;

__block BOOL _isInsideTheArray = FALSE;
[_pathsArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    *stop = _isInsideTheArray = ([obj isEqual:_path]); // ... or whatever how you'd like to compare them
}];

if (_isInsideTheArray) {
    // it contains your _path object
} else {
    // it doesn't contain you _path object
} 
```***

# breeze - 让 koGrid 与 Breeze 和 Durandal HotTowel 模板一起工作

> ID：15816127
> 
> 赞同：1
> 
> 时间：2013-04-04T16:01:26.503
> 
> 标签：breeze, durandal, hottowel, kogrid, q

我有一个包含我试图绑定到我的视图模型的 koGrid 的 Durandal 小部件（热毛巾模板）。

我对这些技术很陌生，包括异步延迟和承诺，所以请原谅我对这些问题的无知！

视图模型从 datacontext 类中获取数据，该类仅返回 Breeze 实体管理器查询的结果（返回 Q 承诺）：

```
 var manager = new breeze.EntityManager({ dataService: dataService });
 return manager.executeQuery(query)
            .then(function (data) {
                return data.results;
            })
            .fail(queryFailed); 
```

在我的小部件的构造函数中，我有：

```
var vm = function(element, settings) {
    var self = this;
    this.settings = settings;
    this.myData = ko.observableArray([]);

    this.viewAttached = viewAttached;       

    queryDataContext.executeQuery('Customer', 'good').then(function(ents) {

    var Item = function(id, name, maincontacttelephone) {
        this.ID = id;
        this.Name = name;
        this.MainContactTelephone = maincontacttelephone;
    };

    for (var i = 0; i < ents.length; i++) {
        self.myData.push(new Item(ents[i].ID(), ents[i].Name(), ents[i].MainContactTelephone()));
    }

    self.gridOptions = { data: self.myData };

    });
};
return vm;

function viewAttached(view) {
    $(window).trigger('resize');
    return true;
} 
```

数据在“ents”变量中返回，被推入 observableArray myData，这应该可以工作......但是 koGrid 文件中出现错误：

```
 /***********************************************
* FILE: ..\src\bindingHandlers\ko-grid.js
***********************************************/
ko.bindingHandlers['koGrid'] = (function () {
    return {
        'init': function (element, valueAccessor, allBindingsAccessor, viewModel,      bindingContext) {
            var options = valueAccessor(); 
```

valueAccessor() 未定义，这会阻止网格工作。

现在，如果我将执行远程查询的代码更改为：

```
$.when(queryDataContext.executeQuery('Customer', 'good')).then(function(ents) { 
```

（使用 jQuery 承诺时），它出于某种原因工作。但是，ents 变量的类型为“makePromise”，我不确定如何解决。

据我了解，这是 Breeze 无论如何都会返回的 Q 承诺，如果我使用

Q.when(queryDataContext.executeQuery('Customer', 'good')).then(function(ents) {

然后 ents 包含数据，但我又回到了 koGrid 未定义的问题。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T17:43:21.727

**编辑：**哎呀，只是看到你不是在谈论 Kendo Grid，我的错......但无论如何你都可以尝试，这正是我在尝试使 KendoGrid 工作时遇到的错误，所以你永远不会知道！试试看，不花钱：）

=====

您使用的是哪个版本的 JQuery？Kendo UI 控件仅在官方上与 JQuery 1.7.2 兼容。因此，如果您使用的是 JQuery 的最新分支 1.9，它不再工作，因为它依赖于 JQuery 1.9.x 中已弃用的一些功能。

几周前我在使用 Kendo UI Grid 控件时遇到了同样的问题，但有一个解决方案。

您必须在 JQuery 标准插件旁边包含 JQuery.Migrate 插件。JQuery.Migrate 恢复了已弃用的函数，以允许您使用无法与最新版本的 JQuery 一起使用的东西。

您可以在此处获取最新版本的 JQuery.Migrate：http: [//blog.jquery.com/2013/02/16/jquery-migrate-1-1-1-released/](http://blog.jquery.com/2013/02/16/jquery-migrate-1-1-1-released/)

希望它能解决你的问题:)

# iphone - 如何在 UIPageViewController 上放置 UIScrollView

> ID：15816130
> 
> 赞同：0
> 
> 时间：2013-04-04T16:01:28.373
> 
> 标签：iphone, ios, objective-c, xcode, storyboard

我`UIPageViewController`在我的情节提要中使用 ，`viewControllers`并`UITextField`在`UIPageViewController`.

但是当你点击 时`UITextField`，键盘会弹出来`UITextField`，所以你基本上看**不到**。`UITextField`

我已经有一个使用这个的类，`UIScrollView`但我不能将它拖放`ScrollView`到`PageViewController`我的故事板中。

有没有其他选择可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:05:35.970

这不是 UIPageViewController 的工作方式。您不能在情节提要中对 UIPageViewController 进行任何设计！它的视图纯粹是为了显示它的孩子的视图。您必须有一个 UIViewController，您可以`setViewControllers:...`在数据源调用 ( `pageViewController:viewControllerAfterViewController:`) 中提供给 UIPageViewController 。UIViewController 的视图就是你想要设计的。

这是一些代码：

[http://www.aeth.com/iOSBook/ch19.html#_page_view_controller](http://www.apeth.com/iOSBook/ch19.html#_page_view_controller)

还从基于页面的应用程序模板创建一个新项目。它向您展示了该怎么做。

至于将 UITextField 滚动到键盘之外的部分，这是一个标准问题，Stack Overflow 上已经有很多答案。例如，请参阅我的答案：

[https://stackoverflow.com/a/15802546/341994](https://stackoverflow.com/a/15802546/341994)

# sql-server-2008-r2 - SSRS 2008 R2 如何在打开报告时摆脱对话框

> ID：15816131
> 
> 赞同：0
> 
> 时间：2013-04-04T16:01:35.233
> 
> 标签：sql-server-2008-r2, ssrs-2008

我可以打开并查看报告并查看数据没有问题，但我正在运行 sql server 2008 R2 Reporting Services，它提示用户输入登录 ID 和密码。我将报告放在与数据库不同的服务器上，因此这可能是问题的一部分。我一直在谷歌上寻找迄今为止没有成功的解决方案。任何帮助将不胜感激。

有谁知道如何摆脱对话框，提示要求输入用户名和密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:06:27.763

如果您在 Internet Explorer 中遇到此错误，您需要检查如何在**Internet 选项 -> 安全设置中设置****用户身份验证**：

 **![在此处输入图像描述](https://i.stack.imgur.com/oYcZH.png)

如果它设置为`Automatic logon with current user name and password`您不应该被提示。

显然这里有安全方面的考虑！

这是一个有用的链接：[输入凭据](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/878c6a48-892b-4c98-b0b4-3de55ab4f83a)。

另外，请确保您的**数据源**未设置为`Connect using Credentials supplied by the user running the report`：

![在此处输入图像描述](https://i.stack.imgur.com/5DypM.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T01:51:58.183

您声明您正在使用 Windows 窗体应用程序中的 ReportViewer 控件来呈现报告。此外，用户可以选择登录 SSRS 报告管理器直接查看报告。

在这种情况下，我的建议是在 SSRS 中使用自定义安全性。如果您有时间实施身份验证，那么您的表单应用程序和 ssrs 管理器都可以使用您的新身份验证过程。

[SSRS 2008 R2 自定义安全示例](http://msftrsprodsamples.codeplex.com/wikipage?title=SS2008R2!Security%20Extension%20Sample&referringTitle=Home)

[Ian Preston](https://stackoverflow.com/users/1228274/ian-preston)已经说明了其他选项。您要么要求用户使用 Windows 帐户登录，要么让他们不受限制地访问您的报告。**

# html - 浏览器忽略相对路径的协议

> ID：15816132
> 
> 赞同：0
> 
> 时间：2013-04-04T16:01:35.680
> 
> 标签：html, https

抱歉，如果以前出现过这种情况 - 我找不到任何东西来支持我目前似乎正在经历的事情。

我倾向于使用 /art/img.png 和 /scripts/my.php 之类的 URL 来加载内容，无论是通过 AJAX 还是标准标签。

但是，我刚刚注意到，如果我加载[https://dummy.com/](https://dummy.com/)并且该页面包含指向 /myajax.php 的相对链接，它正在加载[http://dummy.com/myajax.php](http://dummy.com/myajax.php) - 我可以'不知道这是否是预期的行为？

如果有帮助，这似乎只发生在 XMLHTTPRequests 上，我在 Chrome 和 Safari 中看到过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:05:41.050

这不是预期的行为。

很可能是：

1.  您正在使用的某些 Ajax 抽象层中的错误。（例如，它可能会将相对 URI 转换为绝对 URI，`location.host`而不是让浏览器处理它）
2.  使用`<base>`元素的结果（它告诉浏览器计算相对于不同基础 URI 的 URI）

# jquery-mobile - jQuery Mobile：CSS 确实响应浏览器调整大小但不响应设备

> ID：15816138
> 
> 赞同：0
> 
> 时间：2013-04-04T16:01:56.530
> 
> 标签：jquery-mobile, responsive-design

我已经阅读了很多关于 stackoverflow 的这些问题，并且知道这是一个反复出现的问题。大多数人通常缺少`<meta name="viewport" content="height=device-height, width=device-width, minimum-scale=1>`标签。这不是我的情况。我正在用phonegap和jquery mobile制作一个应用程序......

这是我的 css 文件，断点如下。

```
/* independent of size */

.ui-bar {
    height: 20em;
}

.ui-grid-a.ui-block-b {
    width: 66%;
}

/* small screen */
@media all and (max-width: 62em) { 
    .responsive.ui-grid-b.ui-block-a, .responsive.ui-grid-b.ui-block-b, .responsive.ui-grid-b.ui-block-c, {
        padding: 0;
        border: 0;
        float: none;
        min-height: 1px;
    }

    .responsive.ui-grid-b > :nth-child(n) { width: 100% }
    .responsive.ui-grid-d > :nth-child(n) { width: 100%; margin-bottom: 2em }
}

/* big screen  */
@media all and (min-width: 63em) {

    .responsive.ui-grid-b.ui-block-a, .responsive.ui-grid-b.ui-block-b, .responsive.ui-grid-b.ui-block-c, {
        padding: 0;
        border: 0;
        float: none;
        min-height: 1px;
    }

    .responsive.ui-grid-b > :nth-child(n) { width: 33% }

    .responsive.ui-grid-d .ui-block-a { width: 19.95% }
    .responsive.ui-grid-d .ui-block-b { width: 59.95% }
    .responsive.ui-grid-d .ui-block-c { width: 9.95% }
    .responsive.ui-grid-d .ui-block-d { width: 9.95% }

        .responsive.ui-grid-d .ui-block-c .desc-body {
            float: right;
        }

        .responsive.ui-grid-d .ui-block-d .desc-body {
            float: right;
        }

        .responsive.ui-grid-d .ui-block-c h3 {
             text-align: right;
        }

        .responsive.ui-grid-d .ui-block-d h3 {
             text-align: right;
        }
} 
```

我的响应类的所有元素都应该响应这些更改。现在，当我运行 html 文件时，它可以在我的浏览器上运行，但是在模拟器或 iPhone 设备上运行时，页面不显示我的 css。为什么会这样？

这是我的html的头：

```
 <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="height=device-height, width=device-width, minimum-scale=1, maximum-scale=1.0"/>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <title>
    </title>
    <link rel="stylesheet" href="css/jquery.mobile-1.3.0.min.css" />
    <link rel="stylesheet" href="css/responsive.css"/>  <!-- my css file -->
    <script src="js/jquery-1.9.1.min.js">
        </script>
    <script src="js/jquery.mobile-1.3.0.min.js">
        </script>
    <script type="text/javascript" src="cordova-2.5.0.js">
        </script>
  </head> 
```

以及不在设备上呈现的元素示例。

```
 <div class="ui-grid-d responsive">         <!-- here goes responisive -->

                <div class="ui-block-a">
                    <h3>Date</h3>
                    <hr>
                    <div class="desc-body">Some text...</div>
                </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:50:50.003

我在另一个帖子中询问后发现了问题。问题是我的 css 文件未包含在要呈现的第一页中（即 index.html），如果样式表未包含在第一页中，它也不会包含在其他页面中。希望这对其他人有帮助..

# objective-c - sed 正则表达式从方法声明中提取选择器（Obj-C）

> ID：15816144
> 
> 赞同：3
> 
> 时间：2013-04-04T16:02:20.237
> 
> 标签：objective-c, macos, command-line, sed

我正在将 Objective-C 方法声明转换为其[selector](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Selector.html#//apple_ref/doc/uid/TP40008195-CH48-SW1)，即删除此方法的参数名称和类型`NSString`：

`- (void)getCString:(char *)buffer maxLength:(NSUInteger)maxLength`

要得到

`getCString:maxLength:`

所以我发现正则表达式`\w*?\:`将提取我需要的内容（在[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)等在线正则表达式检查器中工作正常）但我无法`sed`（在 OS X 上）工作使用正则表达式来提取签名。

从各种 sed 片段/示例页面中，我得到这样的印象，这样的东西应该可以工作，除了它没有（也不是我尝试过的 ~250 种变体......）：

```
 cat test.m | sed '/\w*?\:/p' 
```

任何`sed`巫师都可以伸出援助之手吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T20:57:55.147

您正在尝试提取方法**选择器**，而不是方法签名。方法签名包括返回类型和参数类型。方法选择器仅包含关键字和冒号。

您可以使用非标准`-E`标志告诉 sed 使用 POSIX 扩展正则表达式。

这可能会做你想要的：

```
sed -E -n '/^[-+]/{
    s/^.[[:blank:]]*(\([^)]*\))?[[:blank:]]*//
    s/[[:blank:]]*[;{][[:blank:]]*$//
    s/:[^:]*([[:blank:]]|$)/:/g
    p
}' test.m 
```

对于初学者来说，这是一个相当复杂的 sed 命令，所以让我们分解一下。

1.  该`-E`标志在 Mac OS X 等 FreeBSD 衍生产品上启用扩展正则表达式。

2.  该`-n`标志告诉 sed 不要自动打印每个输入行。

3.  `/^[-+]/``-`选择以 a （对于实例方法）或 a `+`（对于类方法）开头的每一行。

4.  `{`开始一组 sed 命令，这些命令都将在每个选定的行上执行。该组在匹配结束`}`。

5.  `s/^.[[:blank:]]*(\([^)]*\))?[[:blank:]]*//`删除`-`or `+`，后跟任意数量的空格，然后是方法的返回类型，然后是任意数量的空格。它通过匹配 a`(`后跟任意数量的非`)`字符后跟 a来删除返回类型`)`。请注意，返回类型实际上是可选的；声明的方法`- foo:(int)x;`完全有效（并且具有默认返回类型`id`）。另请注意，如果您的方法的返回类型是显式函数指针或块，例如 ，则此正则表达式将无法正常工作`- (void (^)(void))getBlock;`，因为您无法使用正则表达式处理嵌套括号。

6.  `s/[[:blank:]]*[;{][[:blank:]]*$//`从行尾删除`;`or`{`和任何周围的空格。这对于使下一个命令正常工作很重要。

7.  `s/:[^:]*([[:blank:]]|$)/:/g`匹配一个冒号，后跟尽可能多的非`:`字符，后跟空格或行尾，并仅用冒号替换匹配项。尾随`g`标志告诉 sed 为该行中的每个匹配项执行此操作。此命令删除参数类型和名称。请注意，此命令将正确处理嵌套括号，这与删除返回类型的命令不同。另请注意，参数类型也是可选的；`- foo:bar`是一种采用一个参数的方法（其类型默认为`id`）。

例子：

```
:; echo '- (void)getCString:(char *)buffer maxLength:(NSUInteger)maxLength' | sed -E -n '/^[-+]/{
    s/^.[[:blank:]]*(\([^)]*\))?[[:blank:]]*//
    s/[[:blank:]]*[;{][[:blank:]]*$//
    s/:[^:]*([[:blank:]]|$)/:/g
    p
}'
getCString:maxLength: 
```

请注意，此 sed 命令也适用于没有参数的方法，例如`- (void)save;`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:51:28.763

[尝试使用perl](/questions/tagged/perl "显示标记为“perl”的问题")执行此操作：

```
$ echo '- (void)getCString:(char *)buffer maxLength:(NSUInteger)maxLength ' |
perl -lne '/^\s*-\s*\(\w+\)\s*(\w+:)\([^\)]+\)\w+\s+(\w+:)/ && print $1, $2'
getCString:maxLength: 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T19:44:23.583

这是一个至少适用于示例的 sed 版本（它有点作弊，从末尾拉出 maxLength）：

```
echo "- (void)getCString:(char *)buffer maxLength:(NSUInteger)maxLength" \
| sed -ne '/[[:alnum:]]:/{;s/^[^)]*)\s*\([^:]*:\).*)\([[:alnum:]]*\)$/\1\2:/;p}'
getCString:maxLength: 
```

这个拉 maxLength: 从中间：

```
 echo "- (void)getCString:(char *)buffer maxLength:(NSUInteger)maxLength" \
| sed -ne '/[[:alnum:]]:/{;s/^[^)]*)\s*\([^:]*:\)[^)]*\s*\S*\s*\([^:]*:\).*/\1\2/;p}'
getCString:maxLength: 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T21:19:34.090

```
$ awk -F'[() ]' '{print $4 $8}' file
getCString:maxLength:

$ cat file
- (void)getCString:(char *)buffer maxLength:(NSUInteger)maxLength 
```

# jquery - jquery菜单脚本上的故障动画

> ID：15816147
> 
> 赞同：0
> 
> 时间：2013-04-04T16:02:29.540
> 
> 标签：jquery, html, css, jquery-animate, mouseleave

所以我在页面顶部有一个菜单按钮，它使用 css:hover 做了一个小悬停动画。

```
$('.menu_button').click(function () {
                $(this).animate({
                    top: '-=50'
                }, 250);
                $('nav').delay(250).animate({
                    top: '+=50'
                }, 250);
                $('nav').mouseleave(function () {
                    $(this).delay(750).animate({
                        top: '-=50'
                    }, 250);
                    $('.menu_button').delay(1000).animate({
                        top: '+=50'
                    }, 250);
                });
            }); 
```

点击菜单按钮向上滑动，菜单像小提琴一样向下滑动。在 mouseleave 上，动画在 750 毫秒后以相反的方式继续。

但是，如果您播放大约 2 或 3 次，菜单按钮会比原来的位置滑得更多。有时它会从顶部消失。不能说为什么以及何时发生这种情况。当我没有单击 div 内部顶部的正上方时，我可以复制故障。

有什么想法或建议有什么问题吗？

**小提琴：http:** [//jsfiddle.net/dennym/c5D22/](http://jsfiddle.net/dennym/c5D22/)

问候丹尼姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:28:08.803

将导航动画移动到匿名回调函数中，并将`top`属性设置为以 px 为单位的绝对值：

```
$('.menu_button').click(function () {
    $(this).animate({
        top: '-50px'
    }, 250, function () {
        $('nav').animate({
            top: '50px'
        }, 250);
    });
});

$('nav').mouseleave(function () {
    $(this).delay(750).animate({
        top: '-50px'
    }, 250);
    $('.menu_button').delay(1000).animate({
        top: '-10px'
    }, 250);
}); 
```

工作示例：http: [//jsfiddle.net/c5D22/4/](http://jsfiddle.net/c5D22/4/)

# asp.net - ASP.Net DetailsView DropDownList 数据未在数据库中更新

> ID：15816149
> 
> 赞同：0
> 
> 时间：2013-04-04T16:02:31.450
> 
> 标签：asp.net, vb.net, updating, html-select

在 ASP.Net Web 表单上，有几个 TextBoxes 和 2 DropDownLists。这些 DropDownLists 之一未按预期工作。如果用户更改 DropDownList 中显示的值，则更改的值不会保存回数据库。用户可以使用相同的 DropDownList 将数据插入数据库而不会出现任何问题。当前更改该值的唯一方法是删除该行数据并使用 DropDownList 中的新值重新插入它。

将数据保存回数据库后，对另一个 DropDownList 和表单上的所有其他控件的所有更改都将保存，“类”DropDownList 除外。你能看一下我们的编码并找出我们出错的地方吗？

这是工作 DropDownList 的标记：

```
 <asp:TemplateField HeaderText="Student:" SortExpression="StudentID">
                    <EditItemTemplate>

                        <asp:DropDownList 
                            ID="DropDownListStudent" 
                            Runat="server"
                            DataSourceID="SqlDataSourceStudents"
                            DataTextField = "StudentName"
                            DataValueField="ID"
                            SelectedValue='<%# Bind("StudentID") %>'
                            ForeColor="Blue">
                        </asp:DropDownList>

                        <asp:RequiredFieldValidator ID="RequiredFieldValidatorEditStudent" runat="server" ControlToValidate="DropDownListStudent" 
                            ErrorMessage="Please select a Student here." Font-Bold="True" Font-Italic="True" ForeColor="Red" 
                            SetFocusOnError="True" Display="Dynamic">
                        </asp:RequiredFieldValidator>

                    </EditItemTemplate>

                    <InsertItemTemplate>

                        <asp:DropDownList 
                            ID="DropDownListStudent" 
                            Runat="server"
                            DataSourceID="SqlDataSourceStudents"
                            DataTextField = "StudentName"
                            DataValueField="ID"
                            SelectedValue='<%# Bind("StudentID") %>'
                            ForeColor="Blue">
                        </asp:DropDownList>

                        <asp:RequiredFieldValidator ID="RequiredFieldValidatorInsertStudent" runat="server" ControlToValidate="DropDownListStudent" 
                            ErrorMessage="Please select a Student here." Font-Bold="True" Font-Italic="True" ForeColor="Red" 
                            SetFocusOnError="True" Display="Dynamic">

                        </asp:RequiredFieldValidator>
                     </InsertItemTemplate>

                    <ItemTemplate>

                        <asp:DropDownList 
                            ID="DropDownListStudent" 
                            Runat="server"
                            DataSourceID="SqlDataSourceStudents"
                            DataTextField = "StudentName"
                            DataValueField="ID"
                            SelectedValue='<%# Bind("StudentID") %>'
                            Enabled="false"
                            ForeColor="Blue"
                            Font-Bold="true"> 
                        </asp:DropDownList>

                     </ItemTemplate>
                </asp:TemplateField> 
```

这是不工作的 DropDownList 的标记：

```
 <asp:TemplateField HeaderText="Class:" SortExpression="ClassID">
                    <EditItemTemplate>

                        <asp:DropDownList 
                            ID="DropDownListClassEdit" 
                            Runat="server"
                            DataSourceID="SqlDataSourceClasses"
                            DataTextField = "ClassName"
                            DataValueField="ID"
                            SelectedValue='<%# Bind("ClassID") %>'
                            ForeColor="Blue">
                        </asp:DropDownList>

                        <asp:RequiredFieldValidator ID="RequiredFieldValidatorEditClass" runat="server" ControlToValidate="DropDownListClassEdit" 
                            ErrorMessage="Please select a Class here." Font-Bold="True" Font-Italic="True" ForeColor="Red" 
                            SetFocusOnError="True" Display="Dynamic">
                        </asp:RequiredFieldValidator>

                    </EditItemTemplate>

                    <InsertItemTemplate>

                        <asp:DropDownList 
                            ID="DropDownListClassInsert" 
                            Runat="server"
                            DataSourceID="SqlDataSourceClasses"
                            DataTextField = "ClassName"
                            DataValueField="ID"
                            SelectedValue='<%# Bind("ClassID") %>'
                            AppendDataBoundItems="True"
                            ForeColor="Blue"
                            OnDataBinding="DropDownListClassInsert_DataBinding">
                        </asp:DropDownList>

                        <asp:RequiredFieldValidator ID="RequiredFieldValidatorInsertClass" runat="server" ControlToValidate="DropDownListClassInsert" 
                            ErrorMessage="Please select a Class here." Font-Bold="True" Font-Italic="True" ForeColor="Red" 
                            SetFocusOnError="True" Display="Dynamic">
                        </asp:RequiredFieldValidator>
                     </InsertItemTemplate>

                    <ItemTemplate>

                        <asp:DropDownList 
                            ID="DropDownListClass" 
                            Runat="server"
                            DataSourceID="SqlDataSourceClasses"
                            DataTextField = "ClassName"
                            DataValueField="ID"
                            SelectedValue='<%# Bind("ClassID") %>'
                            Enabled="false"
                            ForeColor="Blue"
                            Font-Bold="true"> 
                        </asp:DropDownList>

                     </ItemTemplate>
                </asp:TemplateField> 
```

这是工作 DropDownList 的数据源：

```
<asp:SqlDataSource 
    ID="SqlDataSourceStudents" 
    runat="server" 

    ConnectionString="<%$ ConnectionStrings:Knowledge Academy %>" 

    SelectCommand=
        "SELECT NULL AS ID, NULL AS StudentName 
   UNION SELECT ID, Surname + ', ' + Forename AS StudentName 
    FROM Students
ORDER BY 2">
</asp:SqlDataSource> 
```

这是不工作的 DropDownList 的数据源：

```
<asp:SqlDataSource 
    ID="SqlDataSourceClasses" 
    runat="server" 

    ConnectionString="<%$ ConnectionStrings:Knowledge Academy %>" 

    SelectCommand=
        "SELECT NULL AS ID, NULL AS ClassName, NULL AS Grade
   UNION SELECT ID, ClassName + ' *** Grade: ' + Grade AS ClassName, Grade 
           FROM Classes
       ORDER BY 2, 3">
</asp:SqlDataSource> 
```

*** 更新 ***

我找到了原因。我发现很难将数据库表字段名称放在不属于链接字段的 DataKeyNames 中。我在那里有这样的ClassID：

```
<asp:DetailsView 
            ID="DetailsView" 
            runat="server" 
            AutoGenerateRows="False" 
            Height="50px" 
            Width="207px" 
            DataSourceID="SqlDataSourceDetails"
            DataKeyNames="ID,ClassID"
            OnItemCommand="DetailsViewDetails_ItemCommand"> 
```

我将其更改为：

```
<asp:DetailsView 
            ID="DetailsView" 
            runat="server" 
            AutoGenerateRows="False" 
            Height="50px" 
            Width="207px" 
            DataSourceID="SqlDataSourceDetails"
            DataKeyNames="ID"
            OnItemCommand="DetailsViewDetails_ItemCommand"> 
```

问题消失了！

# c# - 将 Crystal Reports XI 升级到 2011

> ID：15816161
> 
> 赞同：1
> 
> 时间：2013-04-04T16:03:16.613
> 
> 标签：c#, winforms, crystal-reports

我正在努力将我们的 Crystal Reports 版本从 Crystal Reports XI 升级到 Crystal Reports 2011。我们有一个 C# windows 窗体应用程序，我们目前正在使用 Visual Studio 2010。我已经安装了适用于 Visual Studio 2010 的 Crystal Reports。这更新了我的参考资料. 我已经为 .net 框架 4.0 安装了 Crystal Reports 运行时引擎（我尝试了 32 位和 64 位）。

在我们的应用程序中，我们使用报表查看表单运行报表，该表单为水晶查看器提供路径和连接信息：

```
var crReportDocument = new CrystalDecisions.CrystalReports.Engine.ReportDocument();
crReportDocument.Load(reportPath);
ReportUtilities.ApplyConnectionInfo(crReportDocument, _useReportServer);
crystalReportViewer1.ReportSource = crReportDocument;
crystalReportViewer1.Zoom(1); 
```

当我们当前使用 Crystal Reports XI 发布应用程序时，我们可以将先决条件设置为“从与我的应用程序相同的位置下载先决条件”。唯一的先决条件是 .net 4 框架和水晶报表运行时。我已将 32 位运行时 msi 和 64 位运行时 msi 移动到我要发布到的同一位置。如果我尝试使用这些设置进行发布，我会收到以下错误消息：

> 1.  先决条件的安装位置未设置为“组件供应商的网站”，并且无法找到“SAP Crystal Reports Runtime Engine for .NET Framework”项中的“Crystal Reports for .NET Framework 4.0\CRRuntime_64bit_13_0_5.msi”文件磁盘。有关详细信息，请参阅帮助。
>     
>     
> 2.  先决条件的安装位置未设置为“组件供应商的网站”，并且无法找到“SAP Crystal Reports Runtime Engine for .NET Framework”项中的“Crystal Reports for .NET Framework 4.0\CRRuntime_32bit_13_0_5.msi”文件磁盘。有关详细信息，请参阅帮助。
>     
>     
> 3.  无法发布，因为项目未能构建。

如果我将先决条件设置更改为“从组件供应商的网站下载先决条件”。我能够发布。

在一台测试机器上，我首先运行 Crystal Reports Runtime（之前在这台机器上安装了 .Net Framework），然后为我们的应用程序运行 setup.exe。setup.exe 无法安装并提供此错误消息

> 无法安装或运行应用程序。该应用程序要求首先将程序集 CrystalDecisions.Enterprise.InfoStore 版本 10.5.3700.0 安装在全局程序集缓存 (GAC) 中。请联系您的系统管理员。

我们以前从未在 GAC 中安装此文件。

**我是否缺少完成升级的步骤？**

**此外，如果我在我们的应用程序中以这种方法使用 Crystal Reports，我是否需要对 Crystal Reports 查看器（我已经看到下载）做任何事情，或者只有当我们在应用程序之外运行它时才需要这样做？**

# javascript - 如何将交替类添加到缩略图的动态提要？

> ID：15816162
> 
> 赞同：0
> 
> 时间：2013-04-04T16:03:16.767
> 
> 标签：javascript, jquery, youtube, rss, frontend

我通过两个名为 jYoutube 和 jGFeed 的插件将 youtube 用户的视频频道的提要带到页面上。

jGFeed： http: [//archive.plugins.jquery.com/project/jgfeed](http://archive.plugins.jquery.com/project/jgfeed)
jYoutube：http: [//archive.plugins.jquery.com/project/jyoutube](http://archive.plugins.jquery.com/project/jyoutube)

我被困在为什么这不起作用......我认为这就像一个简单的 if/else 语句一样简单，但它不起作用。

```
jQuery(document).ready(function($) {     
            $.jGFeed('http://gdata.youtube.com/feeds/base/users/POTATOwillEATyou/uploads?alt=rss&v=2&orderby=published&client=ytapi-youtube-profile',
            function(feeds){
                // Check for errors
                if(!feeds){
                    // there was an error
                    return false;
                }
                var html = '';

                // do whatever you want with feeds here
                for(var i=0; i<feeds.entries.length; i++){
                    var entry = feeds.entries[i];

                //My attempt at alternating classes:
                if((i%2) == 0)
                    {
                        console.log('hello')
                        $(".thethumb").addClass("even");
                    }
                else
                    {
                        console.log('NOPE')
                        $(".thethumb").addClass("odd");
                    }
                //End of my attempt

                   html += '<a rel="vidbox" class="thethumb" target="_blank" href="' + entry.link + '" title="' + entry.title + '"><img src="' + $.jYoutube(entry.link, 'small') + '" class="thumb left"></a>';
                }
                $('#you_tube_feed').html(html);
            }, 25);
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:09:54.893

您的问题是您正在更改 ALL 的类`.thethumb`，并且在您运行该代码时它们不存在（它们在您的 html 字符串中）

```
for(var i=0; i<feeds.entries.length; i++)
{
    var entry = feeds.entries[i];

    var $new = $('<a rel="vidbox" class="thethumb" target="_blank" href="' + entry.link + '" title="' + entry.title + '"><img src="' + $.jYoutube(entry.link, 'small') + '" class="thumb left"></a>');

    if((i%2) == 0)
    {
        $new.addClass("even");
    }
    else
    {
        $new.addClass("odd");
    }

    $('#you_tube_feed').append($new);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:15:48.250

由于您使用的是 JQuery，因此它更加简单。. . 首先添加所有缩略图，然后返回使用`:even`and`:odd`选择器一次性添加所有类：

```
$('.thethumb:even').addClass('odd');
$('.thethumb:odd').addClass('even'); 
```

您会注意到，与选择器相比，类是切换的。. . 那是因为 JQuery 选择器是从 0 开始的，所以“0”、“2”、“4”等项实际上是选择中的第 1、2、5 等项。

# facebook - 使用 IOS6 设置在两个帐户之间切换

> ID：15816164
> 
> 赞同：1
> 
> 时间：2013-04-04T16:03:20.590
> 
> 标签：facebook, ios6

过去两天我一直在尝试为我的应用连接多个帐户，但没有成功。

我读到 Facebook SDK 可能存在无法正确清除缓存令牌的问题。我使用的是 3.1.1 版。

这是怎么回事。

从全新安装：

*   连接到帐户 1。
*   启动游戏并成功登录。一切都很好。
*   关闭游戏
*   转到设置并更改为帐户 2。
*   启动游戏，登录失败。

我收到来自 openActiveSessionWithReadPermissions 的错误代码：**FBSessionStateClosedLoginFailed** 即使我在 Facebook 要求我允许访问我的信息时按下 OK 按钮，返回的授权变量也会说 NO。

不幸的是，我所做的研究给我带来了多种失败的解决方案。我尝试使用此功能重新同步：

```
- (void)fbResync
{
    ACAccountStore *accountStore;
    ACAccountType *accountTypeFB;
    if ((accountStore = [[ACAccountStore alloc] init]) && (accountTypeFB = [accountStore     accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook] ) )
    {

    NSArray *fbAccounts = [accountStore accountsWithAccountType:accountTypeFB];
    id account;
    if (fbAccounts && [fbAccounts count] > 0 && (account = [fbAccounts objectAtIndex:0]))
    {

        [accountStore renewCredentialsForAccount:account completion:^(ACAccountCredentialRenewResult renewResult, NSError *error)
        {
            //we don't actually need to inspect renewResult or error.
            if (error){

            }
        }];
    }
} 
```

fbAccounts 总是返回一个空数组。所以我不能真正重新同步。

我还尝试在我的状态开关中清除 facebook 令牌

```
case FBSessionStateClosed:
case FBSessionStateClosedLoginFailed:
{
     [FBSession.activeSession close];
     [FBSession.activeSession closeAndClearTokenInformation];
     // Clear out the Facebook instance

     [self.facebook logout];
     self.facebook.accessToken = nil;
     self.facebook.expirationDate = nil                                       

}break; 
```

无论我做什么，似乎我都无法完全摆脱我的 facebook 令牌。我发现的唯一方法是重置 IPAD 的设置，这不是解决方案。

有人有更多我可以尝试的选择吗？

谢谢！

我知道的门票：

*   [在 iOS6 上切换设备上的 FB 帐户时 Facebook 授权失败](https://stackoverflow.com/questions/12838118/facebook-authorization-fails-on-ios6-when-switching-fb-account-on-device)
*   [Facebook SDK 3.1 - 验证访问令牌时出错](https://stackoverflow.com/questions/12601191/facebook-sdk-3-1-error-validating-access-token)

# sql - 如何从每个重复条目中仅求一个值

> ID：15816167
> 
> 赞同：0
> 
> 时间：2013-04-04T16:03:34.140
> 
> 标签：sql

我正在尝试对一堆值求和，但有一个包含重复条目的表。使用 distinct 和 sum with group by 最终将所有值相加，而不是每个 UserID 中仅一个值。

```
UserID | Value
1      | 200
1      | 200
1      | 200
2      | 500 
2      | 500 
2      | 500 
3      | 800
3      | 800
4      | 200
4      | 200 
```

我希望输出是这样的：

```
NumberOfUsers | Total
4             | 1700 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T16:05:08.630

先做你的`DISTINCT`，然后`SUM`：

```
SELECT Count(UserID) AS NumberOfUsers, SUM(Value) AS Total
FROM
  (SELECT DISTINCT UserID, Value
   FROM Table
  ) AS subqry 
```

SQLFiddle 示例[在这里](http://sqlfiddle.com/#!9/64748/3)。

# jquery - 计算输入中选择的图像数量

> ID：15816171
> 
> 赞同：0
> 
> 时间：2013-04-04T16:03:39.617
> 
> 标签：jquery, html, ruby-on-rails-3.2

我想`[number].times {}`在我的控制器`new`功能中使用 rails 方法来上传多个图像。但是，我需要确定在视图的输入框中选择了多少图像。如何输出图像输入中选择的图像数量并替换`[number]`为该输出，以便准确构建正确数量的图像对象？

# c++ - 是否存在带有“C++11”表达式的有效 C++11 程序？

> ID：15816175
> 
> 赞同：16
> 
> 时间：2013-04-04T16:04:04.853
> 
> 标签：c++, c++11

编程语言 C++ 的名称来源于父语言 C 和 ++ 运算符（可以说应该是 ++C），因此，该表达式`C++`可能自然地出现在 C++ 程序中。我想知道您是否可以使用 2011 标准（*不带扩展名）编写一个有效的 C++ 程序，并且包含*`C++11` *不在引号内和预处理后*的表达式（注意：编辑了要求，另见答案）。

`C++98`显然，如果您可以使用表达式or编写 2011 标准之前的 C++ 程序`C++03`，那么答案是肯定的。但我不认为这是可能的（虽然我真的不知道）。那么，可以用 C++11 的新军械库来完成吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T23:32:01.773

**如果**我们要求字符`C++11`在*任何文字之外，则在预处理之后不*- 因为在翻译阶段 7 三个标记将是`identifier`,`++`和`integer-literal`

前两个标记是 a `postfix-expression`，后一个是 a `primary`。

可以按顺序包含这两个非终结符的文法没有减少，因此任何包含的程序`C++11`都将无法进行语法分析。

*但是*，如果您不认为字符文字是字符串，那么答案是**肯定**的，因为您可以将它包含在宽字符文字中：

```
int main()
{
    wchar_t x = L'C++11';
} 
```

它不使用预处理器或字符串文字，并且该构造需要由标准支持：

> 包含多个 c 字符的宽字符文字的值是实现定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T23:14:23.043

> 那么，可以用 C++11 的新军械库来完成吗？

不。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T09:51:30.777

定义“有效的 C++ 程序”。

C++ 标准将“格式良好的 C++ 程序”定义为“根据语法规则、可诊断语义规则和单一定义规则构造的 C++ 程序”。这为 C++ 程序格式不正确的可能性敞开了大门。（C 明确具有符合但不严格符合的程序的概念，例如，使用特定编译器的扩展。）

如果您认为使用扩展是有效的，那么您可以实现`C++11`在某些情况下允许的 C++ 编译器。

# oracle - 通过 FTP 发送时 ORA-24247

> ID：15816179
> 
> 赞同：0
> 
> 时间：2013-04-04T16:04:11.697
> 
> 标签：oracle, ftp, ora-24247

几天来我一直在尝试解决这个问题，但我总是一遍又一遍地遇到同样的错误。我是用户 Oracle SQL Developer 版本 3.2.20.09，我想使用此代码通过 FTP 发送文件

```
 CREATE OR REPLACE 
PROCEDURE subirFTP(dirServer VARCHAR2, port VARCHAR2, usr VARCHAR2, pass VARCHAR2, dirRemitente VARCHAR2, dirDestinatario VARCHAR2, nombreArchivo VARCHAR2)
IS
  l_conn  UTL_TCP.connection;
BEGIN
  l_conn := ftp.login(dirServer,port,usr,pass);
  ftp.binary(p_conn => l_conn);
  ftp.put(p_conn => l_conn,
          p_from_dir => dirRemitente,
          p_from_file => nombreArchivo,
          p_to_file => dirDestinatario);
  ftp.logout(l_conn);
END subirFTP;

Informe de error:
ORA-24247: acceso de red denegado por la lista de control de acceso (ACL)
ORA-06512: en "SYS.UTL_TCP", línea 17
ORA-06512: en "SYS.UTL_TCP", línea 267
ORA-06512: en "WORKFLOW.FTP", línea 76
ORA-06512: en "WORKFLOW.SUBIRFTP", línea 5
ORA-06512: en línea 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:26:51.417

由于 ACL（访问控制列表）限制，此错误将在 11g 上出现。您需要将权限授予您的“WORKFLOW”用户以与 FTP 服务器通信。

您可以在

```
select * from dba_network_acls 
```

您的 dba 可以通过以下方式授予访问权限：

```
begin
  dbms_network_acl_admin.create_acl(acl => 'ftp.xml',
                                    description => 'Enables FTP',
                                    principal => 'WORKFLOW', 
                                    is_grant => true,
                                    privilege => 'connect');
end;
/
begin
  dbms_network_acl_admin.assign_acl(acl => 'ftp.xml',
                                    host => 'yourhost.com',
                                    lower_port => ftp port);
end;
/
commit; 
```

有关更多信息，请参阅[文档](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_networkacl_adm.htm)。

# ios - 从 Collection View Xcode 中删除 Collection View Cell

> ID：15816182
> 
> 赞同：1
> 
> 时间：2013-04-04T16:04:16.430
> 
> 标签：ios, objective-c, xcode, uicollectionview

我在 Xcode 4.6 中有一个带有集合视图的应用程序。我为每个集合视图单元格添加了一个删除按钮，以便为用户提供删除单元格的选项。

尽管我意识到集合视图类似于表格视图（并且我知道如何从表格视图中删除单元格），但删除对象在集合视图中的工作方式似乎有所不同。我查看了集合视图的类参考，但作为 iOS 新手，我无法将他们建议的代码应用到我的项目中。该文档显示了以下用于删除单元格的建议代码：

```
[self.collectionView performBatchUpdates:^{
NSArray* itemPaths = [self.collectionView indexPathsForSelectedItems];

// Delete the items from the data source.
[self deleteItemsFromDataSourceAtIndexPaths:itemPaths];

// Now delete the items from the collection view.
[self.collectionView deleteItemsAtIndexPaths:tempArray];
}   completion:nil]; 
```

所以我在我的按钮操作方法中添加了这段代码。在它说“临时数组”的地方，我替换了集合视图用作其数据源的数组来确定要显示的单元格的数量。但我对“deleteItemsFromDataSourceAtIndexPaths：”是什么感到困惑。这是委托方法吗？编译器警告它未声明。我不知道从这里去哪里。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:13:13.450

> 在它说“临时数组”的地方，我替换了集合视图用作其数据源的数组来确定要显示的单元格的数量。

这是您的第一个问题：该数组很可能不包含 NSIndexPath 的实例，而这正是该方法所期望的。您可能想要的是传入`itemPaths`数组，这将使集合视图从字面上删除“所有选定行的索引路径”。

> “deleteItemsFromDataSourceAtIndexPaths：”是。这是委托方法吗？

不，那是伪代码。Apple 认为没有必要讨论如何在循环中从数组中删除对象，我也没有。您必须自己实现该方法，或者希望 NSIndexPath 不会起作用，并`-removeObjectsInArray:`使用正确更新您的数据源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T17:58:24.067

[此处提供了清晰的样品](https://stackoverflow.com/questions/16080322/remove-an-item-from-a-uicollectionview)。首先从数据源中删除，然后从视图中删除那些 indexPath。2步操作，应按相同顺序进行。

# c++ - FFMPEG 音频解码：从短采样缓冲区到浮点采样缓冲区的高效转换

> ID：15816183
> 
> 赞同：0
> 
> 时间：2013-04-04T16:04:17.617
> 
> 标签：c++, ffmpeg, type-conversion, audio-processing

我正在使用 FFMPEG`avcodec_decode_audio`解码各种类型的音频输入文件。生成的样本是 SHORT 类型。

这些样本由另一个库处理，该库需要 FLOAT 输入格式的样本。最后，为了播放（在 Android 上），我需要再次将 FLOAT 样本转换回 SHORT：

```
short* inputSamples = ...;
float* tmpBuffer = new float[nrInputSamples];
for (int i=0; i<nrInputSamples; i++)
  tmpBuffer[i] = inputSamples[i]/32767.0f;

//process audio here

for (int i=0; i<nrInputSamples; i++)
  inputSamples[i] = tmpBuffer[i]*32767.0f; 
```

有没有更有效的方法来做到这一点（例如强制 ffmpeg 将音频解码为 FLOAT 样本）？

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:11:07.373

使用 ffmpeg 库中包含的 'swresample' 库，它适用于此类情况。您可以在他们的代码存储库中找到有关如何执行此操作的示例。

# ember.js - Ember.js 命名空间问题

> ID：15816185
> 
> 赞同：2
> 
> 时间：2013-04-04T16:04:23.700
> 
> 标签：ember.js, javascript-namespaces

我有一个我一直在开发的 Ember.js 应用程序，它运行良好。我现在正在尝试集成一个名为 JsSIP 的 SIP over Websockets 库。我的 Ember 应用程序和单独的概念验证 SIP 应用程序都可以独立运行；但是，一旦我将两者集成在一起，我就会开始在 SIP 库中看到奇怪的错误。我终于把事情缩小到这是两个 API 之间的命名空间问题

我已经看到了至少一个关于 Ember.js 和其他执行任何类型 DOM 操作的库（例如 JQuery Mobile）之间命名空间冲突的其他 SO 问题。据我所知，我使用的 SIP 库对 DOM 的实际操作很少。我已经看到了一些使用 RequireJS 的建议，虽然我真的不想模块化我的客户端，甚至不知道它是否会解决命名空间冲突。将东西包装在 Ember.Namespace 中会有帮助吗？

我创建了一个超级简单的[JSFiddle](http://jsfiddle.net/jfend/NV6pW/21/ "Ember JsSIP JSFiddle")来演示核心问题。非常感谢任何关于我如何解决这两个库之间的问题的建议。这是 Fiddle 中包含的基本代码：

```
// JsSIP code
try
{
    var configuration = {
      'uri':         "example@sip2sip.info",
      'password':    "password",
      'trace_sip':   true,
      'ws_servers':  "ws://example.com"
};
    myPhone = new JsSIP.UA(configuration);
    myPhone.start();
}
catch(e)
{
    console.log(e.message);
}

// Ember code
window.App = Ember.Application.create(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:59:13.890

JsSIP.UA 的构造是将 ws_servers 转换为一个数组并用 迭代它`for(element in array)`，这会在 Ember.js 制作的 Array 原型的扩展中跳闸。您可以使用以下代码禁用它，以便您的 SIP 库开箱即用（在包含 Ember 脚本之前添加它）：

```
window.Ember = {};
Ember.EXTEND_PROTOTYPES = false; 
```

不过，这会对您的 Ember 应用程序产生很大影响。阅读此文档页面以了解更多信息：[http ://emberjs.com/guides/configuring-ember/disabling-prototype-extensions/](http://emberjs.com/guides/configuring-ember/disabling-prototype-extensions/)

# c# - C#，图表，对数刻度如何将x轴设置为底部？

> ID：15816187
> 
> 赞同：0
> 
> 时间：2013-04-04T16:04:34.003
> 
> 标签：c#, charts

我在 C# 的 VS2010 上有 .NET CHART

如何将 x 轴移动到 Y 轴的底部。见附件。

![需要将 x 轴移至 0.0001 的图表](https://i.stack.imgur.com/CIzzr.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:10:32.777

我认为你应该能够做这种事情：

```
_chart.ChartAreas["YourChartArea"].AxisY.Crossing = 0.0001; 
```

（可能是`AxisX.Crossing`你需要设置；我总是把那些搞混了！）

它适用于非对数刻度，但我不完全确定它适用于对数 Y 轴。

# xml - 如何删除文本内容中的固定 XML 标签？

> ID：15816188
> 
> 赞同：-1
> 
> 时间：2013-04-04T16:04:38.160
> 
> 标签：xml, regex, word

我有包含内容的 xml 文件：

```
Hello
<Images>
<URL>google</URL>
</Images>
<Reviews>
Good
</Reviews>
everybody,

<Images>
<URL>bing</URL>
</Images>
<Reviews>
Good
</Reviews>
I am Nguyen 
```

输出：

```
Hello everybody, I am Nguyen 
```

如何删除 和 之间的`<Images>`内容`</Reviews>`。

上面的示例数据很小。实际上，我有一个大数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:25:41.020

您可以用`(?:\s*<(Images|Reviews)>.+?</\1>\s*)+`一个空格替换。如果您使用的 regex 风格不支持 dot-all（表示*所有*字符的点，包括换行符），您将不得不使它更复杂一点：`(?:\s*<(Images|Reviews)>(?:.|\s)+?\</\1>\s*)+`在 JavaScript 中工作。

# javascript - 向节点添加和删除事件

> ID：15816190
> 
> 赞同：0
> 
> 时间：2013-04-04T16:04:44.003
> 
> 标签：javascript

我有一个包含一些事件侦听器的 js 文件。我想动态加载和卸载这个文件。我的想法是创建一个元素说`file1`，在文件中我将有事件监听器，如`file1.addEventListener(..)`. 当我想卸载这个文件时，我会简单地做`document.removeChild(file1)`. 问题是我应该在哪个节点创建事件？

编辑：更多细节

文件 1

```
document.addEventListener('abc',function () {alert("abc")});
document.addEventListener('xyz',function () {alert("xyz")}); 
```

以上是我所指的文件的非常简单的示例。事件`abc`和`xyz`在文档节点上的其他位置生成，但我可以控制应该生成这些事件的节点。

现在我说两个按钮`load file1`和`unload file1`。加载 file1 时，如果发生事件`abc`或`xyz`发生，我将看到相应的操作。当 file1 被卸载时，这些动作将不会发生。

# wordpress - Wordpress 在文本下显示简码

> ID：15816195
> 
> 赞同：1
> 
> 时间：2013-04-04T16:04:53.527
> 
> 标签：wordpress, shortcode

我创建了用于增加文本大小的简码，并且效果很好，它总是显示在文本内容的顶部，没有，我把简码放在编辑器的文本下面，但总是放在顶部和不尊重我在可视化编辑器中放置的位置等，我将标签作为 p 或 br 放置相同，总是放在顶部

我的代码：

```
<?php
/*---------------------------------------------------------------------------------------------
* Theme Shortcode - Resize
* Version 1.0
* Description: TFW Resizer Text
---------------------------------------------------------------------------------------------*/
$oplinks='<div style="clear:both;float:right;"><h3 style="text-align: right;"><span style="font-size: large;"><span style="color: #ff9900;"><span style="color: #000000;"><strong>Font Size</strong></span> <span style="color: #0000ff;">» </span><span style="color: #ff6600;"><a id="plustext" onclick="resizeText(1)" href="javascript:void(0);"><span style="color: #bf1616;">Large</span></a> | <a id="minustext" onclick="resizeText(-1)" href="javascript:void(0);"><span style="color: #bf1616;">Small</span></a></div><br/>';

function theme_tfw_sizer()
{
global $oplinks;
echo '<script type="text/javascript">
function resizeText(multiplier) {
if (document.body.style.fontSize == "") {
document.body.style.fontSize = "1.0em";
}
document.body.style.fontSize = parseFloat(document.body.style.fontSize) + (multiplier * 0.2) + "em";
}
</script>';
echo $oplinks;
}
add_shortcode('tfw_sizer','theme_tfw_sizer');
?> 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:11:44.597

您`echo`用于从简码中输出代码。该[文档](http://codex.wordpress.org/Shortcode_API#Overview)指出，您应该`return`使用一个包含所需输出的字符串，以便它出现在正确的位置。

# packages - 安装软件包（用于傻瓜）

> ID：15816196
> 
> 赞同：0
> 
> 时间：2013-04-04T16:04:58.717
> 
> 标签：packages, easy-install

我知道这里有很多关于安装 python 包的信息，但我对 python 还是很陌生，我认为我需要更多“傻瓜”级别的帮助。

我试图安装openpyxl，据我所知我需要easy_install，据我所知，我需要setuptools。我尝试运行此处提供的代码[https://pypi.python.org/pypi/setuptools](https://pypi.python.org/pypi/setuptools)应该下载并安装 setuptools （并且根据某些站点，easy_install 也是如此？） - 它运行成功，但 help(modules) 没有'不显示 setuptools 或 easy_install 作为模块，我不知道安装了什么，什么没有，或者我应该如何安装它！

从本质上讲，我很困惑，很沮丧，真的需要有人告诉我（用白痴的话）我应该做什么。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T04:38:59.190

我们都从某个地方开始，我两周前在那里。

我假设您使用的是 Python2。我相信Python3 推荐使用[Distribute](https://pypi.python.org/pypi/distribute/0.6.45)和[Pip](https://pypi.python.org/pypi/pip/1.3.1)（我将使用它作为示例）。我还将假设您在 Windows 上。

首先，python需要注册到Path。要检查这是否已自动完成，请打开命令提示符（开始 -> 程序 -> 附件），然后键入“python”，然后输入。如果它返回版本号等，请略过。如果它抛出错误，则需要将 Python 添加到 Path。

**将 Python 添加到路径**

要将 Python 添加到 Windows 计算机上的路径，请转到：控制面板 -> 系统 -> 高级设置 -> 环境设置 -> 系统变量

向下滚动以选择路径，然后单击编辑。将整行复制到文本文档，并使用“;”添加 Python.exe（和脚本文件夹）的安装目录 作为不同目录之间的分隔符。将此复制回路径并保存。（另外关闭命令提示符窗口以重置它。）

对于我的 Windows 7 机器，我添加了：

```
;C:\Python33;C:\Python33\scripts; 
```

编辑此文件时要小心。如果您不确定是否要更改它，有很多视频详细描述了这一点。

**安装模块**（例如 setup_tools）

在 Path 文件中注册 Python 后，下载 setup_tools 并将其解压缩到 Python 安装目录中名为“modules”的文件夹中。我使用 ExtractNow 来解压缩，因为它会自动解压缩两次（根据需要）。

再次打开命令提示符窗口，并通过键入指示它更改目录

```
cd [directory for module you want to install] 
```

在我的电脑上，这将是

```
cd C:\Python33\modules\distribute-0.6.40 
```

同样，我使用分发，而不是 setup_tools，因为这听起来像是 Python2 所需要的。只需使用适当的目录。按回车键更改目录。

输入此内容并显示已更改的目录后，请键入：

```
python setup.py install 
```

这表示您要使用程序python来使用指定文件夹中的setup.py文件来安装模块。这应该是成功的，并且会写很多行代码。

如果你想安装其他模块，你会以类似的方式安装它们。Python 会自动使用您计算机上的 setup_tools 来完成每次安装。

使用它们进行编码时，请记住在脚本的开头导入：

```
import [module] 
```

快乐编程！

# c# - 向 EF 4.1 添加记录不会反映在列表框中

> ID：15816204
> 
> 赞同：1
> 
> 时间：2013-04-04T16:05:12.630
> 
> 标签：c#, wpf, entity-framework

我有一个首先使用 EF 4.1 模型构建的数据绑定列表框。所以我所有的课程都是为我建造的。因为我有三个控件来反映从外键回溯的表数据。this.lstBox2.ItemSource = entityContext.TableObject2.ToList() 将返回每条记录。不是 MD 显示的记录受外键约束的限制。

```
TableObject2 class2 = new TableObject2();
class2.value1 = 0;
class2.value2 = "new location";

using (TKOEntities entityContext = new TKOEntities())
{
                entityContext.TableObject2.AddObject(class2);
                entityContext.SaveChanges();
                this.lstBox2.ItemsSource = null;
} 
```

SaveChanges 确实将数据更新到数据库中。但是控件没有刷新（this.lstBox2.Refresh() 不起作用）。如果我尝试将值设置为控件。我也得到了我们的 ItemControl.ItemSource 错误。如何为控件分配保存到实体上下文的更新值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:37:21.757

模型更改不会自动传播到视图模型或您的视图（我可以看到您没有 MVVM 视图模型？）

你通常需要`Bind`做`PropertyChanged`.

这是从设备上写的，非常粗糙和快速（我可能打错了一些东西等）......

```
<ListBox ItemsSource={Binding YourCollectionProperty} > 
```

在您的“视图模型”中（或者如果那是您的“控件”，我不建议这样做，则执行类似的操作`{Binding ElementName=_mywin, Path=YourCollectionProperty}`）将属性定义为...

```
public ObservableCollection<POCOItem> YourCollectionProperty 
{
get
{
     return _collection ?? (_collection = WrapModel());
}
set
{}} 
```

实施`IPropertyChanged interface` 当您的模型更新时...

```
_collection = null;
OnPropertyChanged("YourCollectionProperty"); 
```

`ObservableCollection`在这里没用（数组/列表也会做同样的事情——保持模型集合同步并不容易。

因此，如果您需要与您的模型密切相关 - 您可以使您的模型导航属性`ICollection`成为`ObservableCollection`（尽管有优点和缺点，但不涉及）。

例如看到这个[使用 EF Code-First 时是否需要实现 INotifyPropertyChanged？](https://stackoverflow.com/questions/6991396/do-i-need-to-implement-inotifypropertychanged-when-using-ef-code-first)

在这种情况下 - 当只是添加新项目时 - 应该会自动转到您的 ListBox。

如果您刷新集合 - 然后执行上述操作（为集合属性设置 PropertyChanged）

`Item Properties are not automatically updated`- 除非您也在模型上实现 IPropertyChanged。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:34:48.930

代替：

```
this.lstBox2.ItemsSource = null; 
```

保存更改以重建列表后，尝试从 entityContext 获取数据：

```
this.lstBox2.ItemsSource = entityContext.TableObject2.ToList(); 
```

我敢肯定，您可以采用更好的方法，但是要快速将数据从数据库中取出并放入列表中，这应该可行。

也是一个快速代码位，您可以使用对象初始化器：

```
TableObject2 class2 = new TableObject2 { value1 = 0, value2 = "new location" }; 
```

# ruby - Chef Recipes - 在 ruby _block 中设置节点属性

> ID：15816208
> 
> 赞同：6
> 
> 时间：2013-04-04T16:05:23.297
> 
> 标签：ruby, scope, dsl, chef-infra

我有一个多节点 Web 服务的 Chef 配方，每个节点都需要获取其他节点的主机名和 IP，才能将其放入自己的本地配置中。

代码如下所示。问题是，当 node.set[][] 如图所示在 ruby​​_block 中进行分配时，当创建依赖它们的模板时，这些值是空的。如果我想创建那个模板，我必须把所有的 ruby​​_block 代码移到外面，并让它在配方中“松散”。这使得使用 Chefspec 等进行单元测试变得更加困难。

任何厨师大师都可以让我直截了当吗？像这样在 ruby​​_block 中做 node.set[] 是不可能的吗？[如果是这样，为什么在文档](http://docs.opscode.com/resource_ruby_block.html)中没有这样说？

```
$cm = { :name => "web", :hostname => "" , :ip_addr => "" }
$ca = { :name => "data", :hostname => "" , :ip_addr => "" }
$cg = { :name => "gateway", :hostname => "" , :ip_addr => "" }
$component_list = [$cm, $ca, $cg]

ruby_block "get host addresses" do
  block do
    for cmpnt in $component_list
       # do REST calls to external service to get cmpnt.hostname, ip_addr
       # .......
       node.set[cmpnt.name]['name'] = cmpnt.name
       node.set[cmpnt.name]['host'] = cmpnt.hostname
       node.set[cmpnt.name]['ip'] = cmpnt.ip_addr   
    end
  end
end

template "/etc/app/configuration/config.xml" do
  source "config.xml.erb"
  variables( :dataHost => node['data']['host'],
       :webHost =>  node['web']['host'],
       :gatewayHost =>  node['gateway']['host'] )
  action :create
end 
```

我还添加了

```
 subscribes  :create, "ruby_block[get host addresses]", :immediately 
```

到模板定义以确保 ruby​​_block 在模板创建之前运行。这并没有什么不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-14T22:13:59.980

我意识到这是一篇旧文章，但是为了将来参考，我刚刚遇到了[这个要点](https://gist.github.com/arangamani/4659646)，它给出了编译与收敛阶段中节点变量分配的一个很好的例子。要使要点适应您的示例，您需要将如下代码添加到您的`ruby_block`：

```
 template_r = run_context.resource_collection.find(:template => "/etc/app/configuration/config.xml")

       template_r.content node['data']['host']
       template_r.content node['web']['host']
       template_r.content node['gateway']['host'] 
```

对于 Chef 11，另请参阅[惰性属性评估](http://docs.opscode.com/resource_common.html#lazy-attribute-evaluation)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-28T14:17:31.700

问题似乎是模板资源定义中的属性值在实际调用任何资源之前被评估。即文件首先作为简单的 Ruby 执行，编译资源，并且仅调用资源操作。到那个时候，已经太晚了。在尝试将某些属性操作封装到资源中时，我遇到了同样的问题。它根本行不通。如果有人知道这个问题的解决方案，我将不胜感激。

编辑：

```
b = ruby_block...
...
end
b.run_action(:create) 
```

可能会成功。它立即调用资源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-20T23:13:24.487

对此最简单的答案是不使用 chef 属性并且不使用 ruby​​_block 来完成与 REST API 对话的工作。代码也可以移动到自定义资源以更好地重用：

```
unified_mode true
provides :my_resource

action :run do
  cm = { :name => "web", :hostname => "" , :ip_addr => "" }
  ca = { :name => "data", :hostname => "" , :ip_addr => "" }
  cg = { :name => "gateway", :hostname => "" , :ip_addr => "" }
  component_list = [cm, ca, cg]

  hash = {}

  for cmpnt in component_list
     # do REST calls to external service to get cmpnt.hostname, ip_addr
     # .......
     hash[cmpnt.name] = {}
     hash[cmpnt.name]['name'] = cmpnt.name
     hash[cmpnt.name]['host'] = cmpnt.hostname
     hash[cmpnt.name]['ip'] = cmpnt.ip_addr   
  end

  template "/etc/app/configuration/config.xml" do
    source "config.xml.erb"
    variables( :dataHost => hash['data']['host'],
       :webHost =>  hash['web']['host'],
       :gatewayHost =>  hash['gateway']['host'] )
    action :create
  end
end 
```

通过使用统一模式并移动到自定义资源中，它还可以更轻松地使用节点属性，而无需使用惰性 {} 或 ruby​​_blocks。它还允许在调用此代码之前进行厨师配置（例如在执行 REST 调用之前设置 resolv.conf 或其他网络要求），而不必考虑在配方上下文中编译/收敛两个传递问题。

也没有理由使用像 ruby​​_block 这样的资源来进行不会改变管理系统的纯 ruby​​ 处理。在这种情况下，ruby_block 访问 REST 服务纯粹是为了收集数据。这不需要放入 Chef 资源中。从问题中不清楚是否这样做是因为发问者虽然这是“最佳实践”（在这种情况下不是），或者是否正在将执行移动到编译时间以允许其他不属于首先触发的问题的厨师资源（在这种情况下，使用自定义资源比使用 ruby​​_block 更好的解决方案）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-20T15:10:03.130

这个问题已经有一段时间了，但如果有人还在寻找它，**懒惰的评估**是你的朋友：

```
template '/tmp/sql_file.sql' do
  source "sql_file.sql.erb"
  mode 0700
  variables lazy {

    # Create a new instance of MySQL library
    mysql_lib = Acx::MySQL.new(
      '127.0.0.1', 'root', node['mysql']['service']['pass']
    )
    password = node['mysql']['service']['support_admin']['ct_password']

    # It returns the encrypted password after evaluate it, to 
    # be used in template variables
    { admin_password:  mysql_lib.encrypted_password(password) }
  }
end 
```

[https://docs.chef.io/resource_common.html#lazy-evaluation](https://docs.chef.io/resource_common.html#lazy-evaluation)

# actionscript-3 - 有没有办法强制 Socket 通过 HTTP 加载跨域策略？

> ID：15816219
> 
> 赞同：0
> 
> 时间：2013-04-04T16:05:38.593
> 
> 标签：actionscript-3, flash, apache-flex

`"<policy-file-request/>\0"`当连接到远程服务器时，Socket 尝试通过发送到端口 843 然后到目标端口来加载跨域策略。但是，我正在使用的一些服务器的跨域策略仅位于 /crossdomain.xml 通过 HTTP 端口 80 提供服务。

有没有办法强制 Socket 通过 HTTP 加载跨域策略？

我知道 URLLoader 将使用 HTTP 跨域策略，但它不太适合我的需要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:56:42.390

看起来答案是否定的。来自[Adob​​e](http://www.adobe.com/devnet/flashplayer/articles/fplayer9-10_security.html)：

> **说明：**通过 HTTP 提供的策略文件可能不再用于授权与该服务器的套接字连接。相反，必须通过套接字策略文件授权连接。套接字策略文件是一个套接字连接，用于向 Flash Player 发送包含该策略的 XML。

# jsf - JSF 中的 Bean 方法执行优先级

> ID：15816224
> 
> 赞同：0
> 
> 时间：2013-04-04T16:05:57.027
> 
> 标签：jsf, render

我有一个表格可以从列表中选择一个代理。支持 bean 决定是否应该呈现列表并填充单选按钮的项目：

```
<h:selectOneRadio rendered="#{myBean.shoudRender}" value="#{myBean.selectedAgent}" id="agents">
    <f:selectItems value="#{myBean.allAgents}" />
</h:selectOneRadio> 
```

100% 确定`myBean.getShouldRender()`会在**之前** `myBean.getAllAgents`执行吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:10:14.447

是的，它会。将`UIComponent#encodeAll()`检查是否`isRendered()`返回`true`，然后再继续对其自身及其子项进行编码。

另一方面，这表明您在`<f:selectItems>`. 否则，您根本不会担心它返回的情况，`null`并且从来没有首先问过这个问题。getter 方法是执行业务逻辑的错误位置。您应该在 (post)constructor 或 (action)listener 方法中执行此操作。getter 应该只返回已经准备好的值。

因此，这是错误的：

```
public boolean isShouldRender() {
    boolean shouldRender = // Some business logic...
    // ...

    return shouldRender;
}

public List<Agent> getAllAgents() {
    List<Agent> allAgents = // Some business logic...
    // ...

    return allAgents ;
} 
```

相反，你应该这样做

```
// Have properties which you initialize during an event.
private boolean shouldRender;
private List<Agent> allAgents;

public void someEventMethod() { // E.g. postconstruct, action, ajax behavior, value change, etc.
    shouldRender = // Some business logic.
    allAgents = // Some business logic.
}

// Keep the getters untouched!
public boolean isShouldRender() {
    return shouldRender;
}

public List<Agent> getAllAgents() {
    return allAgents;
} 
```

### 也可以看看：

*   [为什么 JSF 多次调用 getter](https://stackoverflow.com/questions/2090033/why-jsf-calls-getters-multiple-times/2090062#2090062)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:09:39.193

我使用基于 JSF 的称为 XPages 的技术工作。

在我的世界里，至少渲染会首先被评估。所以我想你会没事的。

# javascript - JavaScript 部门问题

> ID：15816225
> 
> 赞同：0
> 
> 时间：2013-04-04T16:06:06.030
> 
> 标签：javascript

我有一个 JavaScript 长除法程序，它提示用户输入除数和被除数以及小数位数以给出结果。

在 JavaScript 中，当我划分以下内容时，我得到了结果：

```
60.30 / 5 = 12.059999999999999 
```

但使用计算器我得到：

```
12.06 
```

JavaScript有问题吗？

如果我`toFixed`在这种情况下使用它，但如果数字如下：

```
603.00000 / 55 = 10.96364 
```

计算器的结果是：

```
10.963636363636363636363636363636 
```

我知道`toFixed`对数字进行四舍五入，但四舍五入导致第二个示例的答案不正确。

# asp.net - IIS Express 上的密码恢复

> ID：15816226
> 
> 赞同：0
> 
> 时间：2013-04-04T16:06:06.597
> 
> 标签：asp.net, iis, password-recovery

我正在使用 ASP.NET 成员资格提供程序。[我想在这里](http://msdn.microsoft.com/en-us/library/ms178335%28v=vs.80%29.aspx)设置密码恢复。我正在使用 Visual Studio 2012 中默认的 IIS Express。但看起来 IIS Express 不支持 SMTP，因为它在[这里](https://stackoverflow.com/questions/4795978/setting-smtp-on-iis-express)得到了回答。

那么我有哪些选择来设置密码恢复呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T00:03:52.990

我发现没有安装任何东西的一种解决方案是使用 gmail。正如这里讨论的那样[http://forums.asp.net/t/1124257.aspx/1](http://forums.asp.net/t/1124257.aspx/1) 到目前为止，它对于开发目的来说工作得很好。

所以从那个帖子。

这是 web 配置中的邮件设置应该是这样的：

```
<system.net>
     <mailSettings>
       <smtp deliveryMethod="Network" from="username@gmail.com">
         <network defaultCredentials="false" host="smtp.gmail.com" port="587" userName=username" password="xxxxxxxxxxxx" />
       </smtp>
     </mailSettings>
   </system.net> 
```

aspx 页面：

```
<asp:PasswordRecovery ID="PasswordRecovery1" runat="server" 
        onsendingmail="PasswordRecovery1_SendingMail">
     </asp:PasswordRecovery> 
```

后面的代码（C#）：

```
 protected void PasswordRecovery1_SendingMail(object sender, MailMessageEventArgs e)
     {
         MailMessage mm = new MailMessage();

        mm.From = e.Message.From;

        mm.Subject = e.Message.Subject.ToString();

        mm.To.Add(e.Message.To[0]);

        mm.Body = e.Message.Body;
         SmtpClient smtp = new SmtpClient(); 
        smtp.EnableSsl = true;

        smtp.Send(mm);
         e.Cancel = true; 
    } 
```

# java - 返回扩展类

> ID：15816229
> 
> 赞同：0
> 
> 时间：2013-04-04T16:06:16.687
> 
> 标签：java, minecraft, bukkit

我不确定这是否真的有意义（我有点困惑自己）但我想做的是创建一个迷你游戏插件，我试图让它在地图之间循环，我创建了一个扩展 BaseGame 的新类我将插件实例、世界名称和 xml 文件名传递给超类 BaseGame，然后 basegame 类解析来自 xml 文件和设置变量的信息。我在扩展 BaseGame 的类中有一些方法，因为大多数地图都有不同的游戏类型，所以我需要为不同的事件做不同的事情，例如在 TDM 上我需要阻止玩家打破这个，所以我想在侦听器中执行此操作

```
@EventHandler
public void blockDestroy(BlockBreakEvent event) {
    plugin.mapCycler.getCurrentWorld().onBreakEvent(event);
} 
```

我面临的问题是从 MapCycler 类返回当前世界，因为所有地图类都有不同的方法，我需要一种方法以通用方法返回地图类，该方法可以返回扩展 BaseGame 的所有地图类，但我仍然需要能够访问扩展 BaseGame 的类中的方法。

如果您需要更多说明，请告诉我。

谢谢

编辑1：

在 BaseGame 类中，将在所有扩展 BaseGame 的 World 类中使用通用方法，例如，这些方法将在所有扩展 BaseGame 的类中使用

```
 public String getMapName() {
    return xmlFileReader.getMapName();
}

public String getMapObjective() {
    return xmlFileReader.getMapObjective();
}
    public void resetInventory(Player player) {
    player.getInventory().clear();
    player.getInventory().setArmorContents(null);
    player.setHealth(20);
    player.setFlying(false);
    player.setGameMode(GameMode.SURVIVAL);
    player.setFoodLevel(20);
} 
```

并且在扩展 BaseGame 类的类中，它将具有与世界相关的独特方法，例如

```
public void blueWin() {
    Bukkit.getServer().broadcastMessage(Messages.colorize("Blue win - nice message in update"));
    for(String player : blueTeamList) {
        Player blue = Bukkit.getServer().getPlayer(player);
        resetInventory(blue);
        Packet206SetScoreboardObjective packet = new Packet206SetScoreboardObjective(plugin.relicWorld.sb.getObjective(plugin.relicWorld.name), 1);//Create Scoreboard create packet
        sendPacket(blue, packet);
        String loc = DatabaseManager.getLastLoc("SELECT * FROM ag_users WHERE user = \'" + blue.getName() + "\'");
        blue.teleport(LocationManager.stringToLoc(loc));
        Bukkit.getServer().dispatchCommand(Bukkit.getServer().getConsoleSender(), "eco give " + blue.getName() + " 250");   
    }
    for(String player : redTeamList) {
        Player red = Bukkit.getServer().getPlayer(player);
        resetInventory(red);
        Packet206SetScoreboardObjective packet = new Packet206SetScoreboardObjective(plugin.relicWorld.sb.getObjective(plugin.relicWorld.name), 1);//Create Scoreboard create packet
        sendPacket(red, packet);
        String loc = DatabaseManager.getLastLoc("SELECT * FROM ag_users WHERE user = \'" + red.getName() + "\'");
        red.teleport(LocationManager.stringToLoc(loc));
        Bukkit.getServer().dispatchCommand(Bukkit.getServer().getConsoleSender(), "eco give " + red.getName() + " 50"); 
    }
    Bukkit.unloadWorld(getWorld(), false);
    resetAll();
} 
```

因为它是世界上独一无二的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:21:11.047

他们的关键是你需要为你的世界对象定义一个统一的接口。然后您可以调用相同的方法（在基类/接口中定义）并通过多态性每个子类可以做出不同的反应

```
interface World{
    public void onBreakEvent(BlockBreakEvent e);
}

class World1 extends BaseGame implements World{
    public void onBreakEvent(BlockBreakEvent e) {
        System.out.println("Breaking from world 1")
    }
}

class World2 extends BaseGame implements World{
    public void onBreakEvent(BlockBreakEvent  e) {
        System.out.println("Breaking from world 2")
    }
} 
```

现在当你调用它时`plugin.mapCycler.getCurrentWorld()`应该返回一个`World`对象，也就是说，它实现了`World`接口。每个对象可以做出不同的反应，但由于它们都共享接口，因此可以将它们视为相同。

```
plugin.mapCycler.getCurrentWorld().onBreakEvent(event); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:12:12.830

我认为您必须将返回类型定义为超类。然后你的方法可以返回任何从这个超类派生的类。

**这在 java**中称为协变返回类型。几个例子：[sample1](https://blogs.oracle.com/sundararajan/entry/covariant_return_types_in_java)，[sample2](https://stackoverflow.com/questions/6137189/java-covariant-return-type)

这是一个示例代码：

```
class A {
    int x = 1;
}

class B extends A {
    int x = 2;
}

class Base {    
    A getObject() {
        System.out.println("Base");
        return new B();
    }
}

public class CovariantReturn extends Base {

    B getObject() {
        System.out.println("CovariantReturn");
        return new B(); 
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        Base test = new CovariantReturn();
        System.out.println(test.getObject() instanceof B);
        System.out.println(test.getObject().x);
    }
} 
```

# encoding - 在遗传算法实现中取消编码

> ID：15816232
> 
> 赞同：1
> 
> 时间：2013-04-04T16:06:29.053
> 
> 标签：encoding, genetic-algorithm

我想知道遗传算法中的编码是否真的有必要，我的意思是说我有一个程序应该实现一个 GA 来猜测用户输入的单词。

我没有看到将染色体作为二进制字符串的意义，我宁愿将它作为一个字母字符串，并对字符串进行变异并相应地对其进行杂交。

这种做法是非正统的吗？它真的会影响结果，还是违反遗传算法的定义？

我确实理解不同类型的编码是可能的。但这不是我所关心的。请保持您的答案特定于猜测与用户输入的字符串相似的字符串的程序目标。

**这不是关于编码选择的问题，而是我是否可以放弃与这个问题目标相关的整个编码场景。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T20:51:34.503

尽管不正统，但您的方法将是**完全有效**的。然而，交叉和突变功能可能需要调整。事实上，今天有许多这样的非标准实现（编码），包括字母、字母数字、十进制等。

根据您的具体情况，如果您不对字母染色体进行编码，则与使用身份图以字母方式对其进行编码相同；现在，对于字母编码，正常的交叉功能应该是有效的，尽管突变可能必须是这样才能在突变位点生成随机字母表（如果有的话）。

**由于所涉及的操作的简单性和速度**，通常遵循 GA 中的二进制编码。例如，对于您的情况，考虑到整数/布尔选项，字符串/字符比较通常需要更长的时间来执行。

# c# - 即使构建代码以尝试保持 Tx 缓冲区已满，也会发生串行端口欠载。

> ID：15816233
> 
> 赞同：0
> 
> 时间：2013-04-04T16:06:29.143
> 
> 标签：c#, serial-port

好的，这是交易。我正在使用串行端口来调制 LED 灯阵列（使阵列可调光）。问题是阵列周期性闪烁，每 2-4 秒快速闪烁一次。

我使用 System.Timer 每 10 毫秒检查一次 Tx 缓冲区状态。如果缓冲区没有最少数量的未决字符，则例程会添加更多字符。从理论上讲，缓冲区永远不会用完字符，但确实如此，也就是 LED 阵列闪烁。我检测并计算这些事件，所以我知道正在发生欠载。此外，我测量了重新填充缓冲区所需的时间，有时需要超过 1000 毫秒才能添加更多字符。TxBuffer 大小设置为 4096，我想要的缓冲区计数是 2000。对于我的一生，我不明白为什么串行端口阻塞长达一秒钟，而理论上它根本不应该阻塞......

设置代码：

```
charsSent = 0;
myPort.PortName = commPort;
myPort.Encoding = new UTF8Encoding ();
myPort.BaudRate = 19200;
myPort.DataBits = 8;
myPort.Parity = Parity.None;
myPort.StopBits = StopBits.One;
myPort.Handshake = Handshake.None;
myPort.DtrEnable = false;
myPort.RtsEnable = false;
myPort.ReadTimeout = 500;   // SerialPort.InfiniteTimeout;
myPort.WriteTimeout = 500;  // SerialPort.InfiniteTimeout;

myPort.ReadBufferSize = 4096;
myPort.WriteBufferSize = 4096;

myPort.Open (); 
```

定时器代码：

```
myPort.BreakState = false;
int txBufferCount = myPort.BytesToWrite;
if (txBufferCount == 0)
    ++underRuns;
// refill the xmit buffer if needed...
int bytesNeeded = (txBufferCount > MaxTxLoadCount) ? 0 : MaxTxLoadCount - txBufferCount;
DateTime start = DateTime.Now;
while (bytesNeeded > 0)
{
    myPort.Write (charbuf, 0, 5);
    charsSent += 5;
    bytesNeeded -= 5;
}
if (DateTime.Now - start > maxWriteTime)
    maxWriteTime = DateTime.Now - start; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:24:18.803

对于我的使用，我找到了一种解决方法。基本上，我允许我的计时器服务路由的两个实例在任何时候都存在。此外，我用锁保护缓冲区重新填充代码，以便当一个实例位于锁定部分内（并且被牛屎阻塞写入阻止）时，另一个实例被锁定在锁定部分之外。

最终结果是，一旦被写阻塞的实例解除阻塞并退出锁定部分，另一个实例就会进入锁定并重新填充缓冲区。Net net LED 可能仍在闪烁（具体取决于驱动程序何时解除阻塞（UART 的 Txbuffer = 空，与 UART 的 TxShiftRegister = 空）。

只是现在你看不到他们这样做，所以结束它对我有用......

干杯，

基思

# php - Session_destroy 以管理员身份注销我，无法删除它

> ID：15816235
> 
> 赞同：0
> 
> 时间：2013-04-04T16:06:37.250
> 
> 标签：php, drupal

所以这是一个泡菜。我正在编辑一个 Drupal 站点，但我不小心把 session_destroy 放在了没有启动的地方。现在每次我想修复这个 Drupal 时都会让我退出，因为当我尝试保存更改时它会破坏会话（即执行页面）。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:56:21.527

好的，这就是我为摆脱这种混乱所做的事情：我转到另一个页面并执行了一个删除原始损坏的 php 文件的 sql 查询。问题解决了。

# regex - 单词/字符的选择性正则表达式

> ID：15816236
> 
> 赞同：2
> 
> 时间：2013-04-04T16:06:40.823
> 
> 标签：regex, r

我想替换`Date`字符串中单词的所有大小写，除非它是`Date()`（即 Date 后跟括号）。这是一个字符串示例以及我最初尝试的示例：

```
x <- c("frDate", "Date()", "Date", "Sys.Date()")
gsub("Date", paste("Date:", Sys.Date()), x) 
```

**我得到什么：**

```
> gsub("Date", paste("Date:", Sys.Date()), x)
[1] "frDate: 2013-04-04"     "Date: 2013-04-04()"     "Date: 2013-04-04"      
[4] "Sys.Date: 2013-04-04()" 
```

**我想要什么：**

```
> gsub("Date", paste("Date:", Sys.Date()), x)
[1] "frDate: 2013-04-04"     "Date()"     "Date: 2013-04-04"      
[4] "Sys.Date()" 
```

我想也许我可以从我[之前](https://stackoverflow.com/questions/13372438/regex-eliminate-all-punctuation-except)关于此事的问题中学习：

```
gsub("(?=[^Date\\(\\)[^Date]])", paste("Date:", Sys.Date()), x) 
```

不太好。

*如果有人有更好的标题以使此解决方案更通用，请更改它，以便 R 正则表达式用户具有可搜索的处理异常的方法。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T16:13:04.023

只需在您的模式中添加一个与左括号匹配的否定前瞻断言。（您还必须设置`perl=TRUE`才能获得此功能。）

```
gsub("Date(?!\\()", paste("Date:", Sys.Date()), x, perl=TRUE)
[1] "frDate: 2013-04-04" "Date()"             "Date: 2013-04-04"  
[4] "Sys.Date()" 
```

这个名字听起来很吓人，我怀疑类似`#@!$%^&*`的符号字符串会吓跑人们，但实际上并没有那么复杂：只需键入`(?!...)`，替换`...`为您希望导致整个正则表达式**不**匹配的任何模式。在这里，我们希望任何`Date`以不匹配开头但随后继续不匹配的字符串，所以（因为它是一个特殊字符而`(`转义）我们写.`(``(?!\\))`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T16:08:35.420

`gsub('Date$', paste('Date:', Sys.Date()), x)` 为你工作？

```
# [1] "frDate: 2013-04-04" "Date()" "Date: 2013-04-04"   "Sys.Date()" 
```

`$`正则表达式中的运算符表示行尾。这样，仅匹配`x`最后的值。`Date`如果您遇到的情况`blah blah Date blah`是您也想匹配正则表达式，那么它会变得更加复杂。

您还可以匹配`Date`后跟以下内容以外的任何内容`(`：

```
gsub('Date(?!\\()', paste('Date:', Sys.Date()), x, perl=TRUE) 
```

其中将`?`以下标记为可选，而`!`是一种否定。

# lytebox - Lytebox 关闭/下一个/上一个按钮不显示

> ID：15816238
> 
> 赞同：0
> 
> 时间：2013-04-04T16:06:43.350
> 
> 标签：lytebox

我刚下载了lytebox。一切似乎都在工作，除了一个功能。关闭/下一个/上一个按钮未显示。它们仍然有效，只是我看不到它们。我已将图像文件夹移动到与 lytebox.css 和 lytebox.js 相同的目录，将它们移动到另一个目录，将图像移动到与 .css/.js 相同的目录中，但似乎没有任何东西可以正确显示它们。我没有编辑任何代码。是否有任何常见原因导致它们无法正常显示？我查看了 lytebox 常见问题解答，但那里的建议没有帮助。如果需要，我可以显示代码，它只是超长的，所以我不想占用太多空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T19:18:30.063

I had the same problem and sorted it by doing this url('../images/close_black.png')

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:17:26.720

所有图像的路径都应该位于 lytebox.css 中。搜索图像名称的代码，您将看到它们。然后重新定位图像或编辑 css 文件。

# c# - 打开 Web 浏览器时以编程方式提供凭据（用于 CRM 登录）

> ID：15816249
> 
> 赞同：2
> 
> 时间：2013-04-04T16:07:11.727
> 
> 标签：c#, browser, dynamics-crm-2011, credentials

我有一个 C# WPF 应用程序，可以在某些事件或按钮单击时打开 CRM 2011 中的特定联系人或其他站点。由于我不能总是使用 Windows 凭据登录 Webbrowser（因为用户也可以使用 IFD 从外部使用其他帐户访问网络），用户必须在每次关闭所有浏览器 Windows 时提供他的凭据。几次后这很烦人

我尝试使用 ProcessStartInfo 类

```
ProcessStartInfo proc = new...
proc.UserName = credentials.UserName;
proc.Password= credentials.Password;
Process.Start(proc); 
```

等等，但这只会引发关于无效数据的异常......接下来我尝试将登录数据放在 URL 中，`user:pass@crmsite`但这也不起作用（如果可能的话，我也不希望使用这种方法）。我什至尝试将带有登录数据的 cookie 注入 IE，但我不是很成功。

有没有办法以编程方式向浏览器提供凭据，以便您自动登录到 CRM？

**更新**：增加会话超时或类似的东西将不起作用，因为我们正在使用[IFD](http://msdn.microsoft.com/en-us/library/cc151054.aspx)进行 CRM。没有使用 Windows 凭据自动登录。

用户甚至不必首先输入他的凭据。所有数据都应从我的应用程序中提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:53:29.820

您可以增加会话超时。看看这篇文章：

[http://social.technet.microsoft.com/wiki/contents/articles/7681.setting-the-adfs-timeout-for-crm-2011-internet-facing-deployments-ifd.aspx](http://social.technet.microsoft.com/wiki/contents/articles/7681.setting-the-adfs-timeout-for-crm-2011-internet-facing-deployments-ifd.aspx)

# asp.net - 通过 URL 访问 SSRS 报告时如何传递凭据

> ID：15816251
> 
> 赞同：5
> 
> 时间：2013-04-04T16:07:20.347
> 
> 标签：asp.net, reporting-services, ssrs-2008, ssrs-2008-r2

我正在尝试使用如下 URL 访问 SSRS 报告

```
http://MyServerIP/ReportServer?/FolderName/ReportName&Param1=ParamValue&rs:Command=Render&rs:Format=HTML4.0&rc:Toolbar=false 
```

当我尝试访问 Url 上方时，系统会要求我提供网络凭据，然后我会在浏览器窗口中呈现 SSRS 报告的所有页面。

现在我想在我的 webApp 内的弹出窗口中显示这些内容。为此，我尝试发出 jquery 请求并获取内容，但这样做我得到 401 未经授权的错误。所以我想知道是否有办法在 jquery ajax get 请求中发送凭据。

作为一个转机，我尝试使用下面的 C# 代码来检索数据，但它也没有帮助并给出相同的 401 错误

```
WebClient client = new WebClient();
client.Credentials = new NetworkCredential("username", "password", "domain");
divContents.InnerText = client.DownloadString(my report path); 
```

我正在使用 SSRS 2008 R2，我的要求是在弹出窗口中显示报告的所有页面。因此，欢迎所有指向这个方向的指针。

最后添加一点，我的 Web 应用程序和报告可能驻留在同一个域中，也可能不驻留在同一个域中。

谢谢，拉维

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:13:08.533

我会尝试什么：

*   创建一个新页面。在 C# 端，使用`ReportExecution2005`Web 服务将报表呈现为 HTML。然后将结果泵出到窗口。

*   在您的弹出窗口中，通过 Ajax 调用新的 C# 页面（以获取 HTML）并将输出注入您的 jQuery 窗口，或者将页面本身作为单独的浏览器窗口弹出。

如果您需要，我可以提供一些示例代码。

ETA：我发现了一条可能有价值的信息：

这是来自[HTML 设备设置页面](http://msdn.microsoft.com/en-us/library/ms155395.aspx)（强调我的）：

> 工具栏
> 
> 指示是显示还是隐藏工具栏。**此参数的默认值为 true。**如果此参数的值为 false，则忽略所有剩余选项（文档映射除外）。如果省略此参数，则工具栏会自动显示支持它的呈现格式。
> 
> 当您使用 URL 访问呈现报表时，呈现报表查看器工具栏。工具栏不是通过 SOAP API 呈现的。但是，工具栏设备信息设置会影响使用 SOAP Render 方法时报告的显示方式。**如果在使用 SOAP 呈现为 HTML 时此参数的值为 true，则仅呈现报表的第一部分。如果值为 false，则整个 HTML 报告将呈现为单个 HTML 页面**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-20T16:39:20.207

您在查询字符串中传递这样的凭据：

> dsu:**数据源**名称=**用户名**&dsp:**数据源**名称=**密码**

**将粗体**元素替换为报告中的值，例如：

```
http://MyServerIP/ReportServer?/FolderName/ReportName&Param1=ParamValue&rs:Command=Render&rs:Format=HTML4.0&rc:Toolbar=false&dsu:Data=reportreader&dsp:Data=password1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-29T08:39:53.593

如果您希望允许公共访问安全报告而不要求提供凭据，则可以使用报告查看器控件。

1.  创建一个新`.aspx`页面并`ReportViewer`像这样使用控件：

    ```
    <rsweb:ReportViewer ID="MainReportViewer" runat="server" BackColor="White" 
        Font-Names="Verdana" Font-Size="8pt" InteractiveDeviceInfos=" (Collection)" 
        ProcessingMode="Remote" ShowBackButton="False" ShowFindControls="False" 
        ShowPageNavigationControls="False" SizeToReportContent="True" 
        ToolBarItemBorderColor="White" ToolBarItemHoverBackColor="White" 
        WaitMessageFont-Names="Verdana" WaitMessageFont-Size="14pt" Width="100%">
            <ServerReport ReportServerUrl="" />
    </rsweb:ReportViewer> 
    ```

2.  下面的代码可以在您的`.aspx`页面的代码隐藏中使用，以在您的报告查看器中配置报告服务器、用户名和密码，[etc..]

    ```
    protected void Page_Init(Object sender, EventArgs e)
    {
        string UserName = ConfigurationManager.AppSettings["SsrsUserName"];
        string Password = ConfigurationManager.AppSettings["SsrsPassword"];
        string Domain = ConfigurationManager.AppSettings["SsrsDomain"];
        string ReportServerRoot = ConfigurationManager.AppSettings["SsrsServerRoot"];
        string ReportServerPath = ConfigurationManager.AppSettings["SsrsReportServerPath"];
        MainReportViewer.ProcessingMode = ProcessingMode.Remote;
        IReportServerCredentials irsc = new CustomReportCredentials(UserName, Password, Domain);
        MainReportViewer.ServerReport.ReportServerCredentials = irsc;
        MainReportViewer.ServerReport.ReportServerUrl = new Uri(ReportServerRoot);
        MainReportViewer.ServerReport.ReportPath = ReportServerPath + "YourReportFileName";
    } 
    ```

# java - 为什么这个基本的客户端-服务器程序不传递数据？

> ID：15816258
> 
> 赞同：0
> 
> 时间：2013-04-04T16:07:56.667
> 
> 标签：java, sockets, client-server, bufferedreader, printstream

我正在关注网络上的 Java Trail。用作示例的三个 KnockKnock 类（客户端、服务器和协议）在我将它们复制/粘贴到 Eclipse 中时按预期工作。但是，我真正想做的是消除协议类，让服务器回显给客户端，无论我在控制台中键入什么内容。我尝试主要通过注释掉对协议类的引用来修改服务器程序，但不知何故，我最终破坏了程序。

我太新了，以至于我对出了什么问题一无所知，而且我在电子书和网站上搜索的答案越多，我就越困惑。我所发现的是，我对 IO 流的真正工作原理几乎一无所知。我按顺序粘贴了以下所有三个类：服务器、客户端、协议。问题出在哪里以及为什么会出现问题：

服务器：

```
import java.net.*;
import java.io.*;

public class KnockKnockServer {
    public static void main(String[] args) throws IOException {

        ServerSocket serverSocket = null;
        try {
            serverSocket = new ServerSocket(4444);
        } catch (IOException e) {
            System.err.println("Could not listen on port: 4444.");
            System.exit(1);
        }

        Socket clientSocket = null;
        try {
            clientSocket = serverSocket.accept();
            System.out.println("Client Accepted");
        } catch (IOException e) {
            System.err.println("Accept failed.");
            System.exit(1);
        }

        PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);
        BufferedReader in = new BufferedReader(
                new InputStreamReader(
                clientSocket.getInputStream()));
        String inputLine, outputLine;
        //KnockKnockProtocol kkp = new KnockKnockProtocol();

        //outputLine = kkp.processInput(null);
        //out.println(outputLine);

        while ((inputLine = in.readLine()) != null) {
             //outputLine = kkp.processInput(inputLine);
             //out.println(outputLine);
            out.println(inputLine);
             if (inputLine.equals("Bye."))
                break;
        }
        out.close();
        in.close();
        clientSocket.close();
        serverSocket.close();
    }
} 
```

客户：

```
import java.io.*;
import java.net.*;

public class KnockKnockClient {
    public static void main(String[] args) throws IOException {

        Socket kkSocket = null;
        PrintWriter out = null;
        BufferedReader in = null;

        try {
            kkSocket = new Socket("localhost", 4444);
            out = new PrintWriter(kkSocket.getOutputStream(), true);
            in = new BufferedReader(new InputStreamReader(kkSocket.getInputStream()));
        } catch (UnknownHostException e) {
            System.err.println("Don't know about host: taranis.");
            System.exit(1);
        } catch (IOException e) {
            System.err.println("Couldn't get I/O for the connection to: taranis.");
            System.exit(1);
        }

        BufferedReader stdIn = new BufferedReader(new InputStreamReader(System.in));
        String fromServer;
        String fromUser;

        while ((fromServer = in.readLine()) != null) {
            System.out.println("Server: " + fromServer);
            if (fromServer.equals("Bye."))
                break;

            fromUser = stdIn.readLine();
        if (fromUser != null) {
                System.out.println("Client: " + fromUser);
                out.println(fromUser);
        }
        }

        out.close();
        in.close();
        stdIn.close();
        kkSocket.close();
    }
} 
```

协议：

```
import java.net.*;
import java.io.*;

public class KnockKnockProtocol {
    private static final int WAITING = 0;
    private static final int SENTKNOCKKNOCK = 1;
    private static final int SENTCLUE = 2;
    private static final int ANOTHER = 3;

    private static final int NUMJOKES = 5;

    private int state = WAITING;
    private int currentJoke = 0;

    private String[] clues = { "Turnip", "Little Old Lady", "Atch", "Who", "Who" };
    private String[] answers = { "Turnip the heat, it's cold in here!",
                                 "I didn't know you could yodel!",
                                 "Bless you!",
                                 "Is there an owl in here?",
                                 "Is there an echo in here?" };

    public String processInput(String theInput) {
        String theOutput = null;

        if (state == WAITING) {
            theOutput = "Knock! Knock!";
            state = SENTKNOCKKNOCK;
        } else if (state == SENTKNOCKKNOCK) {
            if (theInput.equalsIgnoreCase("Who's there?")) {
                theOutput = clues[currentJoke];
                state = SENTCLUE;
            } else {
                theOutput = "You're supposed to say \"Who's there?\"! " +
                "Try again. Knock! Knock!";
            }
        } else if (state == SENTCLUE) {
            if (theInput.equalsIgnoreCase(clues[currentJoke] + " who?")) {
                theOutput = answers[currentJoke] + " Want another? (y/n)";
                state = ANOTHER;
            } else {
                theOutput = "You're supposed to say \"" + 
                clues[currentJoke] + 
                " who?\"" + 
                "! Try again. Knock! Knock!";
                state = SENTKNOCKKNOCK;
            }
        } else if (state == ANOTHER) {
            if (theInput.equalsIgnoreCase("y")) {
                theOutput = "Knock! Knock!";
                if (currentJoke == (NUMJOKES - 1))
                    currentJoke = 0;
                else
                    currentJoke++;
                state = SENTKNOCKKNOCK;
            } else {
                theOutput = "Bye.";
                state = WAITING;
            }
        }
        return theOutput;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:24:24.087

我认为您的问题只是两个应用程序都在等待：当 KKServer 启动时，它等待客户端，然后等待客户端“说”某事，客户端等待服务器说某事，然后等待用户输入

# android - 检查 Android 处理程序是否有回调

> ID：15816262
> 
> 赞同：9
> 
> 时间：2013-04-04T16:08:03.367
> 
> 标签：android, handler, runnable

我有一些设置计时器的代码，但是如果用户在使用计时器时设置了计时器，我需要删除运行计时器的可运行文件并重新启动它。但是，当不存在可运行的处理程序回调并且调用此代码时，它会使我的应用程序崩溃。所以我需要检查处理程序是否正在运行，如果是，则结束它并重新启动它，但是查看文档和其他 Stackoverflow 问题，我看不出这是否可能。

这是我的代码，我已经评论了只有在存在可运行的处理程序时才应该执行的代码：

```
 submitTimer.setOnClickListener(new View.OnClickListener(){

        public void onClick(View v) {
            String s = timer.getText().toString();
            if(!s.equals(""))
            {
//I NEED TO CHECK A RUNNABLE HANDLER EXISTS AND IF SO THEN RUN THIS CODE, IF NOT IGNORE THIS CODE
            Map.handler.removeCallbacks(Map.getRunnable());
            Map.runnable.run();
//I NEED TO CHECK A RUNNABLE HANDLER EXISTS AND IF SO THEN RUN THIS CODE, IF NOT IGNORE THIS CODE
            int l = Integer.parseInt(s);
            Map.timerinmins = l;
            timer.setHint("Current Timer is "+Map.timerinmins);
            timer.setText("");
            Toast.makeText(Preferences.this, "Timer is set!", Toast.LENGTH_SHORT).show();
            }

            else
            {

                Toast.makeText(Preferences.this, "No value was entered", Toast.LENGTH_SHORT).show();
            }
    }

}); 
```

谁能帮我找出检查处理程序当前状态的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T16:36:13.860

如果您愿意，您可以在第一次放入回调时发送一条空消息，然后在处理程序中检查该消息。此空消息可能表示存在回调。然后可以类似地使用稍后删除该消息来查看回调是否仍然存在。没有像这样的相关情况，但认为我至少会尝试分享一个可能性。

```
...
Map.handler.sendEmptyMessage(CALLBACK_PRESENT_INTEGER);
...
if(Map.handler.hasMessages(CALLBACK_PRESENT_INTEGER)
...
Map.handler.removeMessage(CALLBACK_PRESENT_INTEGER);
... 
```

这可能并不理想，但如果您可以从使用回调的位置访问处理程序，则可能是一个潜在的解决方案。不确定是否有直接的方法可以找到。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-01T23:50:01.180

参考[Jay Snayder](https://stackoverflow.com/users/2137578)的回复：

由于在某些情况下`Map.handler.hasMessages(CALLBACK_PRESENT_INTEGER)`即使`Map.handler.sendEmptyMessage(CALLBACK_PRESENT_INTEGER)`已调用（也发生在我身上）返回 false，使用布尔值来确定处理程序是否具有回调可能更安全。
因此，代码逻辑非常简单，如下所示：

```
...

boolean callbackPresent = false;

...

if(!callbackPresent) {

    // do what you have to do in case the handler doesn't have callbacks

    // right before adding a callback to the handler, call:
    callbackPresent = true;

} else {

    // do what you have to do in case the handler has callbacks

    // right before removing the callbacks from the handler, call:
    callbackPresent = false;
}

... 
```

我在一个应用程序中使用这个解决方案，它运行良好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-01T08:10:26.090

[`Handler`](https://developer.android.com/reference/android/os/Handler.html)类有一个方法

```
boolean hasCallbacks(@NonNull Runnable runnable) 
```

`runnable`检查消息队列中是否有任何待处理的带有回调的消息。
它从 SDK 16 开始就存在，但在 SDK 29 之前它是隐藏的。

[`HandlerCompat`](https://developer.android.com/reference/androidx/core/os/HandlerCompat)类具有适用于 SDK 16+ 的此方法的兼容版本：

```
boolean hasCallbacks(handler, runnable) 
```

# javascript - excanvas drawimage 在 IE8 上不起作用

> ID：15816263
> 
> 赞同：2
> 
> 时间：2013-04-04T16:08:05.213
> 
> 标签：javascript, canvas, internet-explorer-8, html5-canvas, excanvas

嗨，我已经设法让 excanvas 在 IE8 中用于简单的示例，但是我无法在 IE8 中制作包含 drawimage 的以下画布示例。有没有人有excanvas和drawimage的经验。谢谢你的帮助...

```
var foo = document.getElementById("foo");
var canvas = document.createElement('canvas');` 
```

`canvas.setAttribute("width", 300);
canvas.setAttribute("height", 300);
foo.appendChild(canvas);
canvas= G_vmlCanvasManager.initElement(canvas);
var ctx = canvas.getContext('2d');
ctx.save();
ctx.clearRect( 0, 0, canvas.width, canvas.height );
ctx.translate( canvas.width/2 , canvas.height/2 );
ctx.drawImage( image, -165, -160 );
ctx.rotate( 100 * Math.PI / 180);
ctx.drawImage( image2, -13, -121.5 );
ctx.restore();`

```
image1.src = 'img.png';
image2.src = 'img2.png'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-24T15:37:15.520

使用测试用例隔离drawImage：

```
<!DOCTYPE html>
<html>
<head>
<title>Overflow Test</title>
<style>
body {
  text-align: center
}
</style>
<!--[if IE]><script src="https://cdnjs.cloudflare.com/ajax/libs/flot/0.8.3/excanvas.js"></script><![endif]-->
<script>
window.onload = function() {
  var ctx = document.getElementById('c').getContext('2d');
  var img = document.images[0];
  ctx.rotate(Math.PI / 8);
  ctx.drawImage(img, 50, 50);
  img.style.display = 'none';
};
</script>
</head>
<body>

<img src="http://opera.com/favicon.ico">

<canvas id="c" width="200" height="200"></canvas>

</body>
</html>
```

**参考**

[Explorer Canvas 测试用例：drawimage.html](https://github.com/jonessieka/explorercanvas/blob/master/testcases/drawimage.html)

# ruby-on-rails - Ember.js：如何在没有请求的情况下获取我的 current_user 信息

> ID：15816267
> 
> 赞同：1
> 
> 时间：2013-04-04T16:08:09.467
> 
> 标签：ruby-on-rails, ember.js

我是 ember.js 的初学者，我不知道最好的方法：

我的应用程序设计了 gem，它是一个服务器端 mvc 应用程序，直到您登录。然后它是单页。所以我所有的余烬代码都在“内部”布局中声明。在这种布局中，显然，我也有我的`current_user.name`方法。我想使用这些信息，而不是通过 http 请求来获取它。我认为如果有办法将它放在我的 applicationController 中......那将是完美的！有任何想法吗？或者，也许我试图做错事？

谢谢，

马可

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:19:26.273

您可以将 current_user 的 json 嵌入主体上的 data-current-user 属性中。

```
<body data-current-user="<%= current_user.to_json %>"> 
```

通过这种方式，您可以检查它们是否经过身份验证，并且无需 HTTP 调用即可获取它们的属性。

Ryan Bats 对此进行了详细介绍：[http ://railscasts.com/episodes/324-passing-data-to-javascript](http://railscasts.com/episodes/324-passing-data-to-javascript)

# python - 替换子列表中的单词

> ID：15816269
> 
> 赞同：0
> 
> 时间：2013-04-04T16:08:26.647
> 
> 标签：python, parsing, replace, sublist

我对 python 不是很有经验我有一个解析树列表结构，其中包含一个列表，其中包含子列表中的子列表等等。我需要用*RARE*替换树中的一些单词。我写了一个递归程序，可以让我找到单词并确定它们是否满足替换条件。我被困在如何在原始文件中实际替换它们。

```
import json
s_tring=json.loads(open("tree.example").readline())
def word_find(s_tring):
    for item in s_tring:
        #check if end of tree, always with character "."
        if "." in item[0]:
            break
        else:
            #words only appear in sublists of length 2
            #some of those are lists of strings ['a','b'] (word is 'b')
            #others are list with sublists ['a',['b','c']] (word is 'c')
            if len(item)==2 and type(item)==list:
                if type(item[1]) == list:
                    word-to_evaluate = item[1][1]
                    #need to replace it in tree.example if condition met
                else:
                    word_to_evaluate = item[1]
                    #need to replace it in tree.example if condition met
            else:
                #recursive call to continue drilling down the tree
                if len(item)==3:
                    word_find(item)
    return

word_find(s_tring) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:29:29.533

您根本没有写入文件。您应该重新打开文件进行写入（或打开另一个文件）。你可以这样做：

```
with codecs.open('result_file.json', 'w', 'utf-8') as output_file:
    output_file.write(json.dumps(your_data)) 
```

你也应该关闭你用 open() 打开的文件描述符

```
fd = open(filename, filemode)
# do your stuff to fd
fd.close() 
```

这个（python2.5+）的替代语法是

```
with open(filename, 'r') as fd:
    lines = fd.readlines() # or anything else to do with fd 
```

还有一件事——你只用 .readline() 方法读了一行。

# javascript - 在幻灯片上向下跳跃的图像

> ID：15816274
> 
> 赞同：2
> 
> 时间：2013-04-04T16:08:34.857
> 
> 标签：javascript, jquery, css, slideshow

我遇到了幻灯片的问题（这个问题几乎与这个[简单的 jQuery 幻灯片图像向下移动一瞬间](https://stackoverflow.com/questions/14968715/simple-jquery-slideshow-image-moving-downwards-for-a-split-second)但它对我不起作用）。问题在于`next()`通话。我试图制作一种睡眠功能，但我无法在那里调用它。

这是我的代码：

**CSS：**

```
.slidePromo { 
    margin-top: 20px;
    margin-bottom: 20px;
    position: relative; 
    width: 700px; 
    height: 300px; 
    padding: 10px; 
    box-shadow: 0 0 20px rgba(0,0,0,0.4); 
    overflow: hidden;
}

.slideshow > div { 
    position: absolute; 
    top: 0px; 
    left: 0px; 
    right: 0px; 
    bottom: 0px; 
    overflow: auto;
} 
```

**HTML：**

```
<div id="slidePromo" class="slidePromo">
    <div><img src="./promos/banner.jpg"></div>
    <div><img src="./promos/next.jpg"></div>
    <div><img src="./promos/splash.jpg"></div>
</div> 
```

**jQuery**

```
function slider(id, fade, timer) {
    $("#" + id + " > div:gt(0)").hide();
    setInterval(function() { 
    $('#' + id + ' > div:first')
        .fadeOut(fade)
        .next()
        .fadeIn(fade)
        .end()
        .appendTo("#" + id);
    },  timer);
} 
```

任何的想法？谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:13:45.787

试试这个：

```
setInterval(function() { 
$('#slideshow > div:first')
.fadeOut(100,function(){
    $(this).next().fadeIn(1000).end().appendTo('#slideshow');
});
},  3000); 
```

在淡出上使用回调函数，它会等到它完全消失后再附加另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:22:52.237

可能是因为在 css 中你有类`slideShow`，但你的包装器有类`slidePromo`。这个css块甚至不适用于smth。更改类 - 它可以在没有 jquery 更改的情况下工作。

PS jquery 代码很糟糕。试试这个：

```
function slider(id, fade, timer) {
    var holder = $('#' + id);
    holder.find(" > div:gt(0)").hide();
    setInterval(function() { 
    holder.find(' > div:first')
        .fadeOut(fade)
        .next()
        .fadeIn(fade)
        .end()
        .appendTo(holder);
    },  timer);
} 
```

这是小升级。

# cloud-foundry - vmc 应用程序捕获输出

> ID：15816276
> 
> 赞同：1
> 
> 时间：2013-04-04T16:08:38.360
> 
> 标签：cloud-foundry, vmc

我需要捕获`vmc apps`or`vmc apps --full`命令的输出，以便可以分析捕获的信息并在我们的系统中使用。

如果我们执行命令，我们会得到如下内容：

```
foo                 stopped   1 x 512M   java7     none                              
peter               stopped   1 x 512M   java7     none 
```

这是我们需要的，因为它包含各种有用的信息；状态，实例计数等。

问题是，一旦我们开始重定向输出（错误流仍然为空），我们得到的唯一结果是：

```
foo
peter 
```

所以一些非常重要的信息不知何故丢失了。

虽然我们可以在控制台中看到相关信息，但我们无法捕捉到这些信息。有人可以解释发生了什么，或许可以为我们的难题提供解决方案吗？

Peter Veentjer Cloudsoft

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:25:54.103

使用可用于查询 Cloud Foundry 实例的 API 之一不是更好吗？

# google-chrome - 在单个页面中使用两个标头时，Chrome v26 中的 jQuery Mobile 标头元素位置不正确

> ID：15816277
> 
> 赞同：2
> 
> 时间：2013-04-04T16:08:40.457
> 
> 标签：google-chrome, jquery-mobile

我的 jQuery-Mobile 站点出现布局问题，该问题仅在将 Google Chrome 更新到版本 26 后才开始出现。我页面的基本布局如下：两个窗格，“desktopSideBar”和“desktopContentPane”，每个都包含自己的标题。

```
<div data-role="page" data-theme="b" position="fixed">
    <div id="desktopSideBar">
        <div id="mobile_navigation_content">
            <div class="ui-bar-a ui-header" data-position="inline" id="navigationHeader">
                <a class="ui-btn-left" data-icon="back" data-iconpos="notext" data-inline="true" data-mini="true" data-role="button" data-theme="b"></a>
                <h4>First Header</h4>
            </div>
        </div>
    </div>
    <div id="desktopContentPane">
        <div class="ui-bar-a ui-header" data-position="inline" id="contentToolbar">
            <a class="ui-btn-left" data-icon="arrow-l" data-inline="true" data-mini="true" data-role="button" data-theme="b">Hide</a>
            <h4>Second header</h4>
            <a class="ui-btn-right" data-icon="gear" data-iconpos="notext" data-inline="true" data-mini="true" data-role="button" data-theme="b"></a>
        </div>
    </div>
</div> 
```

显然，这种类型的东西并没有完全内置到 jQM 框架中，所以我必须添加一些 JavaScript 代码来正确定位和调整窗格及其标题的大小。

[这个小提琴显示了我的页面的简化版本。](http://jsfiddle.net/aUk9R/7/)

问题出在右侧的标题中，标题的标题和最右边的按钮堆叠在其左侧。在 Firefox 或 IE 中打开小提琴将显示所需的布局。

奇怪的是，Chrome 似乎仍然知道元素*应该*在哪里。单击带有齿轮图标的按钮将立即使其向右移动，如果您右键单击标题并选择“检查元素”，则可以通过取消选中并选中某些 css 样式来使整个标题栏自行修复`<div class="ui-header">`标签上。

我首先要寻找的是，任何想法在 Chrome v.26 中可能发生的变化可能会导致这种情况，因为这将帮助我找到问题的根源。

我也不介意有人真的知道问题的根源是什么，因为目前我的解决方法是将其添加到调整大小的代码中：

```
setTimeout(function () {
    $("#contentToolbar").removeClass("ui-header").find("h4").css("text-align", "left");
    setTimeout(function () {
        $("#contentToolbar").addClass("ui-header").find("h4").css("text-align", "center");
    }, 5);
}, 500); 
```

...当元素重新定位时会导致明显的闪烁。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:30:46.590

根据您的评论，这里有一个关于 ui-grid 的示例。

> 注意：在 Chrome 版本 26.0.1410.43 上测试。

**[工作演示](http://jsfiddle.net/Palestinian/Phmjc/)**

```
<div class="ui-grid-a">
 <div class="ui-block-a">
  <div data-role=header data-theme=b>
   <a href=# data-role=button data-icon=back data-iconpos=notext>g</a>
   <h6>header</h6>
   <a href=# data-role=button data-icon=gear data-iconpos=notext>g</a>
  </div>
  <div data-role=content>contents</div>
</div>

<div class="ui-block-b">
 <div data-role=header data-theme=e>
  <a href=# data-role=button data-icon=arrow-l data-iconpos=notext>g</a>
  <h6>header</h6>
  <a href=# data-role=button data-icon=star data-iconpos=notext>g</a>
 </div>
 <div data-role=content>contents</div>  
 </div>
</div> 
```

CSS

```
.ui-block-b {
 width: 25% !important;
 height: 100% !important;
}
.ui-block-a {
 width: 75% !important;
 height: 100% !important;
 border-right: solid 1px #ff0000 !important;
} 
```

# windows - 依次运行多个批处理命令

> ID：15816278
> 
> 赞同：0
> 
> 时间：2013-04-04T16:08:40.830
> 
> 标签：windows, batch-file

当我将此批处理文件命令作为单个批处理文件运行时，第二个命令不会运行。但是，当我将它们作为单个批处理文件命令运行时，它们可以正常工作。

```
"C:\Program Files\Mozilla Firefox\firefox.exe" -P "america" -no-remote http://hakikahost.com/error.html
"nircmd.exe" win hide process "firefox.exe" 
```

尝试创建 1 个单个批处理文件，该文件使用两个批处理文件调用，`call`现在已像这样分别分隔批处理文件命令

```
call test.bat
call hide.bat 
```

其中`test.bat`包含第一个命令并 `hide.bat`包含第二个命令，但它仍然没有工作。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:28:20.457

`firefox.exe`在您关闭窗口之前，它可能永远不会返回。尝试使用`start`启动应用程序，应用程序启动`start`后将立即返回。

```
start "" "C:\Program Files\Mozilla Firefox\firefox.exe" -P "america" -no-remote http://hakikahost.com/error.html
start "" "nircmd.exe" win hide process "firefox.exe" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:29:10.107

第一个命令，`"C:\Program Files\Mozilla Firefox\firefox.exe"`直到 Fx 会话结束才返回（即你退出它）

然后没有 Fx 可执行文件，因此第二个命令无法隐藏不存在的进程。

尝试

```
START "" "C:\Program Files\Mozilla Firefox\firefox.exe" -P "america" -no-remote http://hakikahost.com error.html
"nircmd.exe" win hide process "firefox.exe" 
```

唯一的区别是`START ""`在 Firefox 调用之前。请注意，空引号字符串是`required`- 如果愿意，您可以在引号之间输入一个字符串 - 这将成为窗口标题。

# r - 根据ggplot中的方向绘制两种不同颜色的箭头

> ID：15816279
> 
> 赞同：1
> 
> 时间：2013-04-04T16:08:43.090
> 
> 标签：r, ggplot2

我想根据方向改变箭头的颜色。我想在情节中插入箭头，但目前它们都是黑色的。我想要从左到右的绿色箭头和从右到左的红色箭头。那可能吗？

这是我的“短”代码：

```
library(ggplot2)

name = c("Name1","Name2", "Name1", "Name2")
time = c("1", "3","4","2")
value = c(5.1, 4.8, 4.1, 6.3)
data <- data.frame(name, time, value) 

p <- ggplot(data, aes(x=value, y=name)) +
  geom_point(aes(colour=time), shape=16, size=6) +
  geom_path(aes(group=name), arrow=arrow(length=unit(0.15,"cm")), colour="black", size=1) 
print(p) 
```

提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:19:18.140

看起来`n`可以用作箭头方向的代理，所以：

```
p +  geom_path(aes(group=n), arrow=arrow(length=unit(0.15,"cm")), colour=c("red","green")[factor(n)], size=1) 
```

但是，更一般地说，我想你会想要这样的东西：

```
p +  geom_path(aes(group=n), arrow=arrow(length=unit(0.15,"cm")), colour=c("red","black","green")[(sign(tapply(v,n,diff))+2)[n]], size=1) 
```

是`v`用来作为一个因素而不是一个数值？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:28:39.083

您可以将新列添加到我命名为的数据中`direction`。它是针对library中的每个`name`使用函数级别计算的。变量可以有两个值或取决于特定级别（正或负）的第一个值和第二个值之间的差异。`ddply``plyr``direction``TRUE``FALSE``value``name`

```
library(plyr)
data<-ddply(data,.(name),transform,direction=((value[1]-value[2])>0))
data
   name time value direction
1 Name1    1   5.1      TRUE
2 Name1    4   4.1      TRUE
3 Name2    3   4.8     FALSE
4 Name2    2   6.3     FALSE 
```

使用这个新变量来设置颜色`geom_path()`。

```
ggplot(data, aes(x=value, y=name)) +
  geom_point(aes(colour=time), shape=16, size=6) +
  geom_path(aes(group=name), arrow=arrow(length=unit(0.15,"cm")), size=1,color=c("red","blue")[factor(data$direction)]) 
```

# android - Eclipse 和 Android SL GridLayout 不能一起工作 - “android.support.v7.widget.GridLayout 无法实例化”

> ID：15816283
> 
> 赞同：2
> 
> 时间：2013-04-04T16:09:00.603
> 
> 标签：android, eclipse, android-support-library, android-gridlayout

我是 Android 开发的新手，所以这可能是一个简单的问题。抱歉，如果是的话-我花了很多时间搜索，但找不到任何有用的东西。

我正在尝试在我的项目中使用 GridLayout，但最好使用 Android 支持库，这样我就可以针对较低版本的 API。当我将 GridLayout 拖到图形布局设计器中时，会弹出一条消息，询问我需要一个用于 14 之前的 API 版本的兼容性库，并询问我是否要安装这个库。我点击“安装”并让 Eclipse 完成它的工作，但 Eclipse 图形布局设计器中出现错误 `The following classes could not be instantiated: - android.support.v7.widget.GridLayout See the Error Log ( Window > Show View) for more details.`：（[截图](http://oi50.tinypic.com/14b448o.jpg)）

从错误日志中， `android.support.v7.widget.GridLayout failed to instantiate.` [这是堆栈跟踪](http://pastebin.com/A563yhH1)

我对这个错误的搜索出现了[这个 SO thread](https://stackoverflow.com/questions/10773981/eclipse-giving-an-error-of-android-support-v7-widget-gridlayout-failed-to-instan)，这似乎很有希望；我检查了我的 Java、Eclipse 和 ADT 版本，但似乎都是最新的（Java 7 update 17、Eclipse Juno 版本、ADT 21.1）。随着更新检查的结束，我查看了那个 SO 用户如何设置他的项目：gridlayout 的库项目，主项目中对该库的项目引用，以及复制到主项目库中的 gridlayout jar文件夹。在 Eclipse “安装兼容性库”消息之后，已经为我创建了一个 gridlayout 库项目，但尚未设置项目引用并且尚未复制 gridlayout jar。我做了这两件事，但 GridLayout 仍然无法实例化。

我继续搜索，发现[另一个 SO 线程](https://stackoverflow.com/questions/12468606/intellij-and-android-support-v7-widget-gridlayout)。尽管该线程没有使用 Eclipse，但我尝试将答案转换为 Eclipse 等价物，这与上面的线程给出的大致相同。（将 gridlayout jar 复制到项目的 libs 文件夹，从 gridlayout 创建一个库项目，并从主项目中添加对该库项目的项目引用。）我还验证了 gridlayout jar 位于主项目的构建路径上。（[截图](http://oi49.tinypic.com/w8xmiu.jpg)）

我还尝试按照相关的[Styling Android blogpost](http://blog.stylingandroid.com/archives/1395)中的说明进行操作，但情况更糟：当我尝试将 GridLayout 拖到我的项目中时，它会引发两个错误，一个`RelativeLayoutRule.onDropped() failed: java.lang.NullPointerException`with [this stack trace](http://pastebin.com/f96Fatcp)和一个`Initializing project state`with [this stack trace](http://pastebin.com/JqmakyeA)。基于“初始化项目状态”堆栈跟踪中提到的 IOException，我推测问题可能是我的 Android SDK 安装位置：`%APPDATA%\Local\Android`. 我终于尝试卸载 SDK 并重新安装它，`%PROGRAMFILES%\Android`但没有任何运气。

我真的不知道从这里去哪里。如果有人能给我一个正确方向的指示，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T05:42:17.017

尝试：File->Import->Existing Android code into workspace 指定 android-sdk-[platform]/extras/android/support/v7/gridlayout

您需要将 GridLayout 项目作为 Android 库项目导入才能正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:33:19.627

我的意思是清除您的构建路径...

试试这个：

右键单击您的项目-> 属性-> java 构建路径-> 顺序并导出其中勾选所有选项

# sql-server - 在另一台计算机上部署我的 Visual Studio 项目时出错

> ID：15816289
> 
> 赞同：0
> 
> 时间：2013-04-04T16:09:11.380
> 
> 标签：sql-server, visual-studio-2010, installation, database-connection

我有一个已部署的可视化项目 2010 连接到 sql，并且我已将其安装在另一台计算机上，但数据库无法连接到最终项目。我想将它安装在将连接到数据库的其他计算机上。我认为我的连接有问题：

```
 Dim con As SqlConnection = New SqlConnection("Data Source=localhost;Integrated Security=SSPI;" & _
                                               "Initial Catalog=enrollment") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:15:45.667

理想情况下，应用程序应该有一种用户友好的方式来指定连接设置，这将使从不同位置进行连接变得更加容易，并使您的应用程序更便携。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:32:56.610

我认为这里的这个[例子](http://www.codeproject.com/Tips/446121/Adding-connection-string-during-installation)会对你有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T16:12:58.573

[此链接](http://msdn.microsoft.com/en-us/library/ms171886%28v=vs.80%29.aspx)提供的信息将为您提供如何在 VS 中管理连接字符串的好主意。您的 SqlConnection 对象的问题是您的数据源仍列为“localhost”。您需要将其更改为指向数据库的位置。

# css - 下拉仅适用于怪癖模式

> ID：15816290
> 
> 赞同：-2
> 
> 时间：2013-04-04T16:09:19.223
> 
> 标签：css, internet-explorer, quirks-mode

我有一个下拉菜单，它似乎只在 IE9 及更低版本处于怪癖模式时才有效。我没有宣布任何高度。如果声明了宽度，则将其设置为 100% 或自动。

在标准模式下，菜单会出现，但只有最顶部是可见的，因为它被其父容器截断。

**HTML**

```
<div id="secondary-nav" class="nav" role="toolbar" aria-label="User Tools">
    <div class="wrapper">
        <ul class="group">
            <li><a href="">1</a></li>

            <li><a href="">2</a></li>

            <li><a href="">3</a></li>

            <li><a href="">4</a></li>

            <li><a href="">4</a></li>

            <li><a href="">5</a></li>
        </ul>
    </div><!-- /.wrapper -->
</div><!-- /#secondary-nav -->

<div id="page-top" class="group">
    <div class="wrapper">
        <div id="branding" class="hgroup group">
            <h1 class="logo"><a href="/">Logo</a></h1>
        </div>

        <div id="menu-button"></div>

        <div id="global-nav" class="nav" role="navigation" aria-label="Main Site Navigation">
            <ul>
                <li><a href="">1</a></li>

                <li><a href="">2</a></li>

                <li><a href="">3</a></li>

                <li><a href="">4</a></li>

                <li class="expand group">Log-in

                    <ul class="user-menu sub-nav group" role="menu" aria-label="User Menu">
                        <li class="user-login group">' . render(drupal_get_form('user_login_block')) . ' ' . fboauth_action_display('connect') . '</li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</div> 
```

**CSS**

```
/* Header 
-------------------------------------------------- */

#page-top {
    border-top:2px solid #32568F;
    color:#fff;
    width:100%;
    overflow:visible;
    z-index:9999;
    background: #000c2d;
    background: -moz-linear-gradient(top,  #000c2d 0%, #172842 10%, #172842 60%, #193154 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#000c2d), color-stop(10%,#172842), color-stop(60%,#172842), color-stop(100%,#193154));
    background: -webkit-linear-gradient(top,  #000c2d 0%,#172842 10%,#172842 60%,#193154 100%);
    background: -o-linear-gradient(top,  #000c2d 0%,#172842 10%,#172842 60%,#193154 100%);
    background: -ms-linear-gradient(top,  #000c2d 0%,#172842 10%,#172842 60%,#193154 100%);
    background: linear-gradient(to bottom,  #000c2d 0%,#172842 10%,#172842 60%,#193154 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#000c2d', endColorstr='#193154',GradientType=0 );
}

#page-top .wrapper, #secondary-nav .wrapper { /* Added for old theme consistency, remove! */
    max-width: 960px;
}

#branding {
    display:block;
    padding-top:.9em;
    margin-left: .5em;
    line-height:2em;
    vertical-align:middle;
    float: left;
}

#branding h1.logo, .footer-logo {
    display:inline-block;
    margin:0;
    margin-right: .15em;
    padding:0;
    width:24px;
    height:27px;
    float:left;
    text-indent:100%;
    overflow:hidden;
    background:url(../images/logo@2x.png) no-repeat left top;
    vertical-align:bottom;
    background-size: auto 100%;
}

#branding h1.logo a{
    display:block;
}

#branding p {
    display:block;
    font-family:'MuseoSlab','Times New Roman',serif;
    font-size:1.2em;
    font-weight:500;
    float:left;
    margin-left:.25em;
    padding:0;
    color: #fff;
    margin: 0;
    padding: 0;
}

#branding p a {
    color: #fff;
}

#branding p a:hover {
    color: #a1c336;
    text-decoration: none;
}

a.skip {
    position:absolute;
    left:-999em;
}

/* Primary Navigation
-------------------------------------------------- */

/* NEW HEADER! */

#global-header * {
    box-sizing:border-box;
    -moz-box-sizing: border-box;
}

html {
    font-size:100%;
}

body {
    margin:0 auto;
    font:1em/1 Helvetica,Arial,sans-serif;
    width:100%;
}

#global-header {
    width:100%;
}

.wrapper {
    margin:0 auto;
    padding: 0 1em;
    max-width:960px;
}

.nav ul {
    list-style:none;
}

.nav ul > li {
    display:block;
    float:left;
}

.nav li a {
    display:block;
}

[role=toolbar] {
    display:block;
    margin:0 auto;
    width:100%;
    background:url(grey_diagnol.png) repeat;
    overflow:hidden;
}

[role=toolbar] ul {
    display:block;
    margin:0 auto;
    font-size:.75em;
    float:right;
}

[role=toolbar] li {
    margin:.5em 0;
}

[role=toolbar] li:not(:last-child) {
    border-right:1px solid #436394;
}

[role=toolbar] li a {
    color:#436394;
    text-decoration:none;
    padding:.25em .72em;
}

[role=toolbar] li.citypicker a {
    display: inline-block;
    padding-left: 0;
}

[role=toolbar] a.ddlocation {
    padding-right: .25em;
}

a.choose-location {
    font-size: .5em;
    color: #efefef;
    text-transform: uppercase;
}

[role=toolbar] a:hover {
    color:#a1c336;
}

#page-top {
    border-top:2px solid #32568F;
    background-color:#172842;
    color:#fff;
    width:100%;
    overflow:visible;
    z-index: 9999;
}

.fixed {
    position: fixed;
    top: 0;
    box-shadow: 0px 1px 8px #222;
}

#branding {
    display:inline;
    float:left;
    padding-top:.9em;
    line-height:2em;
    vertical-align:middle;
}

#branding h1.logo {
    display:inline-block;
    margin:0;
    padding:0;
    width:124px;
    height:27px;
    float:left;
    text-indent:100%;
    overflow:hidden;
    background:url(logo.png) no-repeat left top;
    vertical-align:bottom;
}

#branding p {
    display:block;
    font-family:'MuseoSlab500',Georgia,'Times New Roman',serif;
    font-size:1.2em;
    font-weight:500;
    float:left;
    margin-left:.25em;
    padding:0;
    color: #fff;
}

#branding p a {
    color: #fff;
}

#branding p a:hover {
    color: #a1c336;
    text-decoration: none;
}

[role=navigation] ul {
    display:block;
    margin:0;
    padding:0;
    float:right;
}

[role=navigation] li {
    display:block;
    position:relative;
    margin-bottom:-5px;
    font-family:'MuseoSlab500',Georgia,'Times New Roman',serif;
    font-weight:500;
    font-size:1.2em;
    text-transform:lowercase;
}

[role=navigation] li:hover {
    background:#b4df5b;
    background:-moz-linear-gradient(top,#a1c336 0%,#88a13d 100%);
    background:-webkit-gradient(linear,left top,left bottom,color-stop(0%,#a1c336),color-stop(100%,#88a13d));
    background:-webkit-linear-gradient(top,#a1c336 0%,#88a13d 100%);
    background:-o-linear-gradient(top,#a1c336 0%,#88a13d 100%);
    background:-ms-linear-gradient(top,#a1c336 0%,#88a13d 100%);
    background:linear-gradient(to bottom,#a1c336 0%,#88a13d 100%);
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#a1c336',endColorstr='#88a13d',GradientType=0);
    box-shadow:0 1px 4px #000;
    text-shadow:1px 1px 1px #3D4427;
    color:#fff;
}

.expand-hover-js {
    background:#b4df5b;
    background:-moz-linear-gradient(top,#a1c336 0%,#88a13d 100%);
    background:-webkit-gradient(linear,left top,left bottom,color-stop(0%,#a1c336),color-stop(100%,#88a13d));
    background:-webkit-linear-gradient(top,#a1c336 0%,#88a13d 100%);
    background:-o-linear-gradient(top,#a1c336 0%,#88a13d 100%);
    background:-ms-linear-gradient(top,#a1c336 0%,#88a13d 100%);
    background:linear-gradient(to bottom,#a1c336 0%,#88a13d 100%);
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#a1c336',endColorstr='#88a13d',GradientType=0);
    box-shadow:0 1px 4px #000;
    text-shadow:1px 1px 1px #3D4427;
    color:#fff;
}

[role=navigation] a {
    color:#fff;
    text-decoration:none;
    padding:1em;
}

[role=navigation] li.expand a {
    vertical-align: bottom;
}
[role=navigation] .user-name {
    display: inline-block;
    position: relative;
    max-width: 16em;
    overflow: hidden;
    font:.64em Helvetica,Arial,sans-serif;
    color:#a2bf39;
    text-transform:uppercase;
    text-overflow: ellipsis;
    text-shadow:none;
    vertical-align: baseline;
}

[role=navigation] li:hover .user-name {
    color:#172842;
}

.user-name-hover-js {
    color:#172842 !important;
}

.message-count {
    display: block;
    position: absolute;
    top: 0;
    right: 0;
    box-shadow: 0px 1px 4px #222;
    border: 1px solid #172940;
    border-radius: 50px;
    padding: .25em .5em;
    background-color: #d52424;
    font: .62em Helvetica, Arial, sans-serif;
    font-weight: bold;
    color: white;
    cursor: default;
}

/*
.message-count:hover {
    background-color: red;
    border: 2px solid white;
    box-shadow: 0px 1px 4px white;
}
*/

[role=navigation] li ul.sub-nav {
    display:none;
    position:absolute;
    top:2.7em;
    left:-4em;
    width: auto;
    z-index: 9999;
    box-shadow:0 1px 8px rgba(23,40,66,.5);
    border-right:1px solid #172842;
    border-bottom:1px solid #172842;
    border-left:1px solid #172842;
    background-color:#ededf4;
    overflow: hidden;
}

.sub-nav li {
    float:none;
    display:block;
    font-size:14px;
    font-size:.82rem;
    font-family:Helvetica,Arial,sans-serif;
    font-weight:400;
    width: 100%;
    margin:0;
    text-shadow:none;
    position: relative;
}

.sub-nav li:hover {
    background:#a1c336;
    text-shadow:none;
    box-shadow:none;
}

.sub-nav li a {
    display: block;
    padding:.75em 1em;
    color:#172842;
    text-transform: none;
}

.sub-nav li a:hover {
    color:#fff;
}

.sub-nav li a.has-notify {
    display: block;
    padding-right: 0;
    float: left;
}

.sub-nav li .menu-notify {
    display: block;
    float: right;
    padding:1.5em .5em 0 .5em;
    font-size: .72em;
    color:#436394;
    width: auto;
}

.sub-nav li:hover .menu-notify {
    color: #fff;
}

.sub-nav .menu-notify a {
    display: inline;
    padding: 0;
    color:#436394;
}

.sub-nav .menu-notify a:hover {
    color:#436394;
    text-decoration: underline;
}

/* Login Forms */

.sub-nav li.user-login {
    padding: 1em;
    display: block;
}

.sub-nav li.user-login:hover,
[role=navigation] li ul.sub-nav li.user-login:hover{
    background-color: #ededf4 !important;
    background:#ededf4;
    filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
    filter: none;
    box-shadow: 0;
    text-shadow: 0;
}

.not-front #user-login-form, #user-login {
    margin-top: 1em;
}

#user-login {
    margin: 1em;
    display: block;
    overflow: hidden;
    padding: .5em;
}

.not-front #user-login-form input, #user-login input {
    padding: .5em;
    font-size: 1em;
    margin-bottom: .5em;
    display: block;
    width: 100%;
    box-sizing: border-box;
    -moz-box-sizing: border-box;
}

#user-login-form div, #user-login div {
    display: block;
}
.not-front #user-login-form label, #user-login label {
    color: #222;
    text-transform: none;
    display: block;
}
#user-login label {
    margin-top: 1em;
}
#user-login .description {
    font-size: .75em;
}

.not-front #user-login-form .item-list, #user-login .item-list {
    margin: .5em 0;
    display: block;
    overflow: hidden;
}
.not-front #user-login-form .item-list li, #user-login .item-list li {
    padding:0;
    font-size: .75em
}

.not-front #user-login-form .item-list a, #user-login .item-list a {
    padding: .5em 0 0 0;
}

.not-front #user-login-form .item-list a:hover, #user-login .item-list a:hover {
    background-color: #EDEDF4;
    color: #A2BF39;
}

.not-front #user-login-form input[type=submit], #user-login input[type=submit] {
    background:#a1c336;
    background:-moz-linear-gradient(top,#a1c336 0%,#88a13d 100%);
    background:-webkit-gradient(linear,left top,left bottom,color-stop(0%,#a1c336),color-stop(100%,#88a13d));
    background:-webkit-linear-gradient(top,#a1c336 0%,#88a13d 100%);
    background:-o-linear-gradient(top,#a1c336 0%,#88a13d 100%);
    background:-ms-linear-gradient(top,#a1c336 0%,#88a13d 100%);
    background:linear-gradient(to bottom,#a1c336 0%,#88a13d 100%);
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#a1c336',endColorstr='#88a13d',GradientType=0);
    font:14px MuseoSlab500,Georgia,Times New Roman,serif;
    text-shadow:1px 1px 2px #737863;
    color:#fff;
    padding:.5em 2em;
    box-shadow:1px 1px 3px 0 #737863;
    border:none;
    cursor:pointer;
    display: block;
    margin: .5em 0;
}

#user-login input {
    width: auto;
}

.not-front #user-login-form input[type=submit]:hover, #user-login input[type=submit]:hover {
    background: #b9d955;
    background: -moz-linear-gradient(top,  #b9d955 0%, #a0b858 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#b9d955), color-stop(100%,#a0b858));
    background: -webkit-linear-gradient(top,  #b9d955 0%,#a0b858 100%);
    background: -o-linear-gradient(top,  #b9d955 0%,#a0b858 100%);
    background: -ms-linear-gradient(top,  #b9d955 0%,#a0b858 100%);
    background: linear-gradient(to bottom,  #b9d955 0%,#a0b858 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#b9d955', endColorstr='#a0b858',GradientType=0 );
    text-shadow:1px 1px 2px #ccc;
    text-decoration: none;
}

.not-front a.facebook-action-connect {
    background: none !important;
    height: 21px;
    padding: 0 !important;
    width: 89px;
    display: block;
    float: none !important;
    margin-top: 1em !important;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:30:04.693

看起来问题出在使用溢出：隐藏它将隐藏这些标签中包含的所有内容，包括您的下拉菜单。

# c#-4.0 - Telerik DatePicker 在 MVC4 应用程序上，日期格式验证问题

> ID：15816293
> 
> 赞同：2
> 
> 时间：2013-04-04T16:09:25.817
> 
> 标签：c#-4.0, asp.net-mvc-4, telerik-mvc

我有这个模型：

```
public partial class Cita
{
            public DateTime dia1 { get; set; }
            public DateTime? dia2 { get; set; }
} 
```

我认为这是：

```
@model HCB.Azure.CP.UI.Areas.User.Controllers.AgendaController.Cita
@Html.Telerik().DatePicker().Name("dia2")
@Html.Telerik().DatePicker().Name("dayx") 
```

在我的 web.config 上有这个

```
<globalization uiCulture="es-CR" culture="es-ES"  /> 
```

如您所见，有 2 个 DatePickers，dia2 绑定到模型，dayX 不是，现在的问题是当在 dia2 中选择或键入格式为 dd/MM/yyyy 的日期时，例如 15/04/2013，它会变成红色，但是如果选择 04/15/2013 (MM/dd/yyyy) 它清除红色验证错误并变为有效。

我对 dayX 没有这个问题，它不受模型限制，而且，这个错误只发生在三星平板电脑或 iphone chrome 浏览器等某些设备上，它在我的开发人员机器上完美运行（windows 7）......

我不知道是什么原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-09T19:13:56.673

我相信通过 Telerik DatePicker UI 控件的 DateTime 的默认格式是 MM/dd/yyyy。您需要通过 format 方法告诉日期选择器不同的格式。

```
@Html.Telerik().DatePicker().Name("dia2").Format("{0: dd MM yyyy}") 
```

在将模型传递给视图之前，您还可以尝试在控制器中设置日期的格式

# github - Github 提交历史导航

> ID：15816294
> 
> 赞同：7
> 
> 时间：2013-04-04T16:09:37.277
> 
> 标签：github

有没有办法通过 github 上的提交历史向前和向后导航？

我想要类似于 Trac 的东西，如果我点击修订日志中的特定变更集，就会有 Next Change 和 Previous Change 的链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T08:59:47.150

GitHub 上的大多数页面都支持键盘快捷键。要查看快捷方式，只需按下`?`任何 GitHub 页面。

因此，如果您正在查看特定提交，您将看到几个可用的键盘快捷键（在 下`Browsing Commits`），包括：`p`for `parent commit`。因此，当您进行特定的提交时，按`p`，您将被带到上一个（父）提交。不幸的是，我没有看到导航到下一个（子）提交的快捷方式。

另请注意，所有提交页面在页面顶部附近都有指向父提交的链接（查找带有短 SHA 的 txt“1 parent”，这将是指向父提交的链接）。

# vb.net - 如何在vb中的某个Y轴值处停止调整表格大小

> ID：15816297
> 
> 赞同：0
> 
> 时间：2013-04-04T16:09:48.320
> 
> 标签：vb.net, winforms

这是我想做的伪代码

```
Private Sub frmSearch_Resize(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Resize
    If lvFileListSearch.Location.Y < 204 Then
        frmSearch.lockResizing() 'lockResizing() doesn't exist, I made it up to explain my point
    End If
End Sub 
```

基本上，当用户调整表单大小时，我想在我的列表视图的 Y 轴达到恒定值时锁定表单的大小调整能力。

我将如何锁定表格？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:13:11.247

一旦他们尝试调整 pas 204 的大小，您是否不希望他们能够调整到 204 以上的大小，或者您只想要一个最小值？如果你想要一个最低限度，你可以使用`form.minimumsize`.

[关联](http://msdn.microsoft.com/en-GB/library/system.windows.forms.form.minimumsize.aspx)

# windows - 在 Windows 中使用 OpenCV 2.4.4 和 FFmpeg

> ID：15816299
> 
> 赞同：7
> 
> 时间：2013-04-04T16:09:52.623
> 
> 标签：windows, opencv, ffmpeg, codec

我知道还有其他关于 OpenCV 中 FFmpeg 使用的问题，但其中大多数似乎已经过时了。

通过在 CMake 中打开 makefile，我可以验证我是否已打开`WITH_FFMPEG`标志。我的 OpenCV 构建的输出文件夹包含一个`bin`文件夹，其中是`Debug`和`Release`文件夹，每个文件夹都包含一个名为 .dll 文件的副本`opencv_ffmpeg244.dll`。当我创建 VideoWriter 并验证指向 .dll 的函数指针是否正确填充时，我可以进入 OpenCV 的源代码。这似乎很奏效。

如果我使用 CV_FOURCC_PROMPT 的 FOURCC 代码，以下编解码器**可以正常工作**：

*   微软视频 1
*   英特尔 IYUV 编解码器
*   罗技视频 (I420)
*   Radius 的 Cinepak 编解码器
*   全帧（未压缩）

以下编解码器**无法正常工作**（即生成 0kb 视频文件）：

*   微软 RLE

如果我的理解是正确的，使用 FFMPEG 应该允许使用一大堆新的编解码器（x264、DIVX、XVID 等）对视频进行编码。但是，这些都没有出现在提示中。使用宏通过 FOURCC 代码手动设置它们`CV_FOURCC(...)`也不起作用。例如，使用 this:`CV_FOURCC('X','2','6','4')`会产生消息：

`Could not find encoder for codec id 28: Encoder not found`

并制作大小为 0kb 的视频文件。

使用这个：`CV_FOURCC('X','V','I','D')`不会产生错误消息，并制作一个不会在 Windows Media Player 或 VLC 中播放的 6kb 视频文件。

我尝试从 Xvid.org 手动下载 Xvid 编解码器。安装后，它出现在提示中的 VFW 选项下，并且编码正常工作。所以它接近解决方案，但如果我尝试直接设置FOURCC代码，它仍然像上面一样失败！我每次都必须从提示中选择它。FFmpeg 不应该包含一大堆编解码器吗？如果是这样，为什么我要手动下载编解码器而不是使用 FFmpeg 内置的编解码器？

我在这里想念什么？有没有办法检查 FFMPEG 是否“启用”？提示中唯一可用的编解码器似乎是 VFW 编解码器，而不是 FFMPEG 编解码器。已`.dll`构建并与可执行文件位于同一文件夹中，但似乎没有以任何方式使用它。

这里有很多相关的问题。希望找到了解 OpenCV 中 FFmpeg 实现的人，并了解所有这些部分如何组合在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T05:12:49.550

如何分别运行 ffmpeg 和您的应用程序并使用管道数据传输图像？

将视频输入 opencv 程序，

```
ffmpeg -i input.mp4 -vcodec mjpeg -f image2pipe -pix_fmt yuvj420p -r 10 -|program.exe 
```

和录音等

```
program.exe|ffmpeg -r 10 -vcodec mjpeg -f image2pipe -i - -vcodec h264 output.mp4 
```

program.exe 应该能够从标准输入读取连接的 jpeg 图像并将其写入标准输出，并且上述工作流程将起作用。这是一些从标准输入读取并显示视频的代码。

```
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/highgui/highgui.hpp>

using namespace cv;

#if defined(_MSC_VER) || defined(WIN32)  || defined(_WIN32) || defined(__WIN32__) \
    || defined(WIN64)    || defined(_WIN64) || defined(__WIN64__)
# include <io.h>
# include <fcntl.h>
# define SET_BINARY_MODE(handle) setmode(handle, O_BINARY)
#else
# define SET_BINARY_MODE(handle) ((void)0)
#endif

#define BUFSIZE 10240
int main ( int argc, char **argv )
{

    SET_BINARY_MODE(fileno(stdin));
    std::vector<char> data;
    bool skip=true;
    bool imgready=false;
    bool ff=false;
    int readbytes=-1;
    while (1)
    {   
        char ca[BUFSIZE];
        uchar c;
        if (readbytes!=0)
        {
            readbytes=read(fileno(stdin),ca,BUFSIZE);
            for(int i=0;i<readbytes;i++)
            {
                c=ca[i];
                if(ff && c==(uchar)0xd8)
                {
                    skip=false;
                    data.push_back((uchar)0xff);
                }
                if(ff && c==0xd9)
                {
                    imgready=true;
                    data.push_back((uchar)0xd9);
                    skip=true;
                }
                ff=c==0xff;
                if(!skip)
                {
                    data.push_back(c);
                }
                if(imgready)
                {
                    if(data.size()!=0)
                    {
                        cv::Mat data_mat(data);
                        cv::Mat frame(imdecode(data_mat,1));

                        imshow("frame",frame);
                        waitKey(1);
                    }else
                    {
                        printf("warning");
                    }
                    imgready=false;
                    skip=true;
                    data.clear();
                }
            }
        }
        else
        {
            throw std::string("zero byte read");
        }
    }
} 
```

写输出这样的东西应该可以工作。

```
void saveFramestdout(cv::Mat& frame,int compression)
{
    SET_BINARY_MODE(fileno(stdout));
    cv::Mat towrite;
    if(frame.type()==CV_8UC1)
    {
        cvtColor(frame,towrite,CV_GRAY2BGR);
    }else if(frame.type()==CV_32FC3)
    {
        double minVal, maxVal;
        minMaxLoc(frame, &minVal, &maxVal);
        frame.convertTo(towrite, CV_8U, 255.0/(maxVal - minVal), -minVal * 255.0/(maxVal - minVal));
    }
    else{
        towrite=frame;
    }
    std::vector<uchar> buffer;
    std::vector<int> param(2);
    param[0]=CV_IMWRITE_JPEG_QUALITY;
    param[1]=compression;//default(95) 0-100
    imencode(".jpg",towrite,buffer,param);
    uchar* a = &buffer[0];
    ::write(fileno(stdout),a,buffer.size());
} 
```

上面的问题是jpegs的多重编码/解码，可以通过与libjpeg-turbo链接部分解决。或者可以去弄清楚如何直接从 ffmpeg 和 opencv 传递原始数据。就我而言，这是完全可以接受的，因为大部分开销都在编码或视频处理中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T21:39:06.957

## 部分路在那里

我使用了 CV_FOURCC('x','2','6','4') 虽然它选择了正确的编解码器，但我的默认设置是错误的，我不确定如何正确设置它们。

```
[libx264 @ 0x7f9f0b022600] broken ffmpeg default settings detected 
```

相关c++源

```
VideoCapture cap(argv[1]); // open file
if(!cap.isOpened()) { // check if we succeeded
    cout << "failed to open file " << argv[1] << endl;
    return -1;
}
Mat raw;
VideoWriter out(argv[2], CV_FOURCC('x','2','6','4'), fpsOut, size, true );
for(;;) {
    bool bSuccess = cap.read(raw); // get a new frame from camera
    if (!bSuccess) {
        cout << "finished reading file" << endl;
        break;
    }
    out << raw;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-22T11:25:12.643

您的设置失败，因为 ffmpeg 为您创建了 XVID 编解码器但无法操作它。因此，您会得到无效文件。

幸运的是 XVID 编解码器已在 VfW 中注册，因此您只需删除 opencv_ffmpeg*.dll 库即可禁用它。一旦不使用ffmpeg，您的fourcc“xvid”将通过VfW机制触发正确的编解码器。

# iphone - 在 UITextView 中画线

> ID：15816300
> 
> 赞同：1
> 
> 时间：2013-04-04T16:09:52.933
> 
> 标签：iphone, objective-c, uitextview

我想在我的 UITextView 中画线。经过一番研究，我发现了这一点：

[UITextView 格线背景但线高错误](https://stackoverflow.com/questions/5375350/uitextview-ruled-line-background-but-wrong-line-height/5453189#5453189)

我在我的代码中试过，drawRect被调用但没有画线。有人可以帮我吗？

```
#import "FacebookViewController.h"
#import <QuartzCore/QuartzCore.h>

@interface MyViewController (){
UITextView *text;
}

@end

@implementation MyViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Do any additionnal customisation
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view from its nib.
text.contentMode = UIViewContentModeRedraw;
//TextView init
text = [[UITextView alloc]initWithFrame:CGRectMake(0,44,320,380)];
[self.view addSubview:text];
text.delegate = self;
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

- (void)drawRect:(CGRect)rect {
NSLog(@"TEST");
//Get the current drawing context
CGContextRef context = UIGraphicsGetCurrentContext();
//Set the line color and width
CGContextSetStrokeColorWithColor(context, [UIColor redColor].CGColor);
CGContextSetLineWidth(context, 1.0f);
//Start a new Path
CGContextBeginPath(context);

//Find the number of lines in our textView + add a bit more height to draw lines in the empty part of the view
NSUInteger numberOfLines = (text.contentSize.height + text.bounds.size.height) / text.font.leading;

//Set the line offset from the baseline. (I'm sure there's a concrete way to calculate this.)
CGFloat baselineOffset = 6.0f;

//iterate over numberOfLines and draw each line
for (int x = 0; x < numberOfLines; x++) {
    //0.5f offset lines up line with pixel boundary
    CGContextMoveToPoint(context, text.bounds.origin.x, text.font.leading*x + 0.5f + baselineOffset);
    CGContextAddLineToPoint(context, text.bounds.size.width, text.font.leading*x + 0.5f + baselineOffset);
}

CGContextClosePath(context);
CGContextStrokePath(context);
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
[text setNeedsDisplay];
}

@end 
```

可能是一个愚蠢的错误，但我找不到

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:28:08.607

当我看着你的代码时，一切都很好。也许有颜色的东西？可能与背景颜色相同或类似的东西。

可能是您忘记设置内容模式：

```
- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        self.contentMode = UIViewContentModeRedraw;
    }
    return self;
} 
```

**编辑：**

我想我知道：你展示后忘记设置`[myTextView setNeedsDisplay];`了。[在这里阅读](https://stackoverflow.com/questions/10818319/when-do-i-need-to-call-setneedsdisplay-in-ios)

**编辑：**

首先你创建你的视图：

```
 t = [[[MyTextView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 200)] autorelease];
 [self.view addSubview:t];
 t.delegate = self; 
```

使您的视图控制器实现`UITextViewDelegate`，然后

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    [t setNeedsDisplay];
} 
```

这应该工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T12:30:05.983

我有同样的问题..因为我认为你不是 UITextView 的子类

由于 UIViewController 没有实现这个方法，只有 UITextView 实现了

所以只需子类化它..你的代码就可以了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T16:25:27.660

是否有可能您绘制成功但被匹配的背景颜色遮挡？我注意到您选择的颜色的 alpha 非常小。如果只是为了排除这种情况，请更改：

```
CGContextSetStrokeColorWithColor(context, [UIColor colorWithWhite:0.5f alpha:0.15f].CGColor); 
```

到

```
CGContextSetStrokeColorWithColor(context, [UIColor redColor].CGColor); 
```

# c++builder - 找不到类 TLargeintField

> ID：15816304
> 
> 赞同：0
> 
> 时间：2013-04-04T16:09:54.950
> 
> 标签：c++builder, unidac, uniquery

我正在使用 C++ Builder 2009。

我一直在为我的一个项目做一些国际工作。我已将查询组件升级为 UniQuery 组件，并将所有数据库连接升级到 UniDAC。现在，当我运行我的程序时，某些表单会在创建表单时抛出一些异常。

```
Project X.exe raised exception class EClassNotFound with message 'Class TLargeintField not found'. 
```

在网上做了一些阅读，一些建议是删除查询组件中的所有字段并阅读它们，我这样做了，仍然得到相同的消息。我很好奇我是否做错了什么，或者我是否需要添加对 VCL 的引用？[http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/DB_TLargeintField.html](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/DB_TLargeintField.html)

**附加信息：**

以下是错误消息的屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/f31qz.jpg)

根据错误消息，我觉得我可能正确引用了头文件，但没有正确引用 lib 文件。

我相信 VCL 的头文件会在：

```
C:\Program Files (x86)\CodeGear\RAD Studio\6.0\include\vcl 
```

我尝试将以下内容添加到 lib 路径中，但仍然找不到该类：

```
C:\Program Files (x86)\CodeGear\RAD Studio\6.0\lib
C:\Program Files (x86)\CodeGear\RAD Studio\6.0\lib\release
C:\Program Files (x86)\CodeGear\RAD Studio\6.0\lib\psdk 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T20:59:28.660

如果我没记错的话`TLargeIntFile`，例如，DAC 希望为计算值提供字段，但是在添加要查询的字段时，它们会被创建为普通整数。

就我而言，我只是修改了 .dfm 表单文件并手动更改了字段类型：

```
object QMinutes: TLargeintField 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:28:17.593

我找到了问题的根本原因。此特定问题与 korzh 翻译工具有关，在该工具中，您对表单进行更改后，需要刷新语言文件。这个过程多次运行编译器，据我所知，为每个文件更新不同的 dfm。当我的区域设置设置为意大利（意大利）时，出现此消息，并且看起来引用了旧的 dfm。刷新语言后，看起来我的其他尝试（删除然后将字段读取到 UniQuery 组件）解决了这个问题......

# android - 在android中使用jsoup解析HTML

> ID：15816306
> 
> 赞同：0
> 
> 时间：2013-04-04T16:09:59.567
> 
> 标签：android, html, xml-parsing, jsoup

我在android中解析jsoup html有问题。我有这个html：

`<div class="bd-start-time">13:05<a name="channel-2-hour-12"></a></div>`

我得到了所有具有 div 类 bd-start-time 的元素。我只想获得带有`<a name="channel-2-hour-12"></a>`and的元素`<div class="bd-start-time">`。我敢肯定，这是一个简单的技巧，但我找不到解决方案。感谢帮助。

**编辑：**

因为我的问题不够清楚，我试着再解释一下。有很多 `<div class="bd-start-time">`。我只想得到这个孩子的 div `<a name="channel-2-hour-12"></a>`。然后从那些 div 中获取 time `13:05`。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-01T21:13:21.327

这个问题对我来说并不完全清楚。

也许你想用。元素 child() 方法和 ownText()

```
Element divElement = doc.select(".bd-start-time").first();
Element aElement = divElement.child(0);
String time = divElement.ownText(); 
```

# html - 居中布局，一侧为背景图案-另一侧为纯色

> ID：15816312
> 
> 赞同：0
> 
> 时间：2013-04-04T16:10:30.980
> 
> 标签：html, css, layout

我的问题非常接近这个问题：

[两个固定宽度的全高列，无缝过渡到空白空间](https://stackoverflow.com/questions/8903785/two-fixed-width-full-height-columns-with-seamless-transition-to-blank-space)

*除了*我想在左侧使用 bg 图案并让右侧成为无缝颜色。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:19:40.540

添加具有`repeat`（或`repeat-y`）值的背景属性：

```
 #navigation {
    display: table-cell;
    width: 200px;
    background: #fff url(http://placedog.com/400/300) scroll repeat-y top left;
  } 
```

`url`应该指向服务器上背景图像的位置。

工作示例：http: [//jsbin.com/amunuz/21/edit](http://jsbin.com/amunuz/21/edit)

# annotations - 使用 Titanium 进行注释的指南针

> ID：15816318
> 
> 赞同：1
> 
> 时间：2013-04-04T16:10:49.273
> 
> 标签：annotations, location, titanium, compass-geolocation, heading

我正在尝试构建一个指南针，指向地图上带有 Titanium 的注释。我已经成功地用 Titanium 中的指南针功能构建了一个普通的指南针。

我无法从该位置使指南针指向正确的方向。有没有人有脚本或示例有效？

```
 if (Titanium.Geolocation.hasCompass){

    var transform = Ti.UI.create2DMatrix();

    // Settings
    Titanium.Geolocation.showCalibration = true;
    Titanium.Geolocation.headingFilter = 0;

    Ti.Geolocation.getCurrentHeading(function(e){

        if (e.error){
            Titanium.API.info("error: " + e.error);
            return;
        }

        var animationNorth = Titanium.UI.createAnimation({
            transform   : transform.rotate(e.heading.trueHeading),
            duration    : 50
        });

        // Rotate image to north
        compassNorth.animate(animationNorth);

        headingLabel.setText('geo - current heading: ' + e.heading.trueHeading);
    });

    Titanium.Geolocation.addEventListener('heading', function(e){

        if (e.error){
            Titanium.API.info("error: " + e.error);
            return;
        }

        var animationNorth = Titanium.UI.createAnimation({
            transform   : transform.rotate(e.heading.trueHeading),
            duration    : 50
        });

        // Rotate image to north
        compassNorth.animate(animationNorth);

        headingLabel.setText('geo - current heading: ' + e.heading.trueHeading);
    });

} else {
    headingLabel.setText("No Compass on device");
} 
```

# asp.net-mvc - asp.net mvc 4.0 用什么来进行 JSON 序列化？

> ID：15816319
> 
> 赞同：2
> 
> 时间：2013-04-04T16:10:52.787
> 
> 标签：asp.net-mvc, json.net

我正在使用 asp.net mvc 4。查看一些教程，我创建了自己的 JsonResult 类，继承自 OOB JsonResult 类以使用 Json.Net。下面是我的班级的样子。

```
public class JsonNetResult : JsonResult
{
    private readonly object _data;

    public JsonNetResult(object data)
    {
        if (data == null)
        {
            throw new ArgumentNullException("data");
        }

        _data = data;
    }

    public override void ExecuteResult(ControllerContext context)
    {
        if (context == null)
        {
            throw new ArgumentNullException("context");
        }

        var response = context.HttpContext.Response;
        response.ContentType = "application/json";
        var writer = new JsonTextWriter(response.Output);
        var serializer = JsonSerializer.Create(new JsonSerializerSettings());
        serializer.Serialize(writer, _data);
        writer.Flush();
    }
} 
```

我想问的是

1.  是否需要此类，或者 .net 在内部使用 Json.Net 来序列化对象。
2.  我也可以直接将序列化模型绑定到视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:17:35.250

对于 Web API，MS 团队使用了 Newtonsoft 库；Scott Hanselman 在我参加的一次会议上宣称它非常优越。

不幸的是，他们没有将它烘焙到 MVC4 中（希望他们有），所以你必须按照你正在做的事情来放入你自己的实现：

[http://james.newtonking.com/archive/2008/10/16/asp-net-mvc-and-json-net.aspx](http://james.newtonking.com/archive/2008/10/16/asp-net-mvc-and-json-net.aspx)

# jquery - 窗口调整大小时隐藏的响应菜单

> ID：15816323
> 
> 赞同：2
> 
> 时间：2013-04-04T16:11:07.147
> 
> 标签：jquery, menu

我在这里有一个 jsfiddle - [http://jsfiddle.net/2r3Ap/](http://jsfiddle.net/2r3Ap/)

和这里的演示 - [http://www.ttmt.org.uk/forum/](http://www.ttmt.org.uk/forum/)

这是一个简单的响应式菜单。调整窗口大小时，水平菜单将移动到垂直菜单并隐藏。然后红色按钮控制导航菜单上下滚动。当窗口被调整得更大时，水平菜单应该再次显示。

周围有很多这样的东西，我认为重建起来很容易。

我的问题是：

如果窗口变小了，垂直菜单用按钮打开和关闭，然后窗口变大，导航将保持隐藏状态。

我需要在打开或关闭垂直菜单时将窗口大小调整为更大时出现水平菜单。

```
 <!DOCTYPE html>
    <html>
      <meta charset="UTF-8">
      <meta name="description" content="">
      <meta name="keywords" content="">
      <meta name="robots" content="">
      <title>Title of the document</title>

      <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

      <style type="text/css">

        *{
          margin:0;
          padding:0;
        }
        header{
          max-width:600px;
          margin:0 auto;
          background:#aaa;
          overflow:auto;
          padding:30px 50px 0 50px;
          border-left:10px solid #fff;
          border-right:10px solid #fff;
        }
        button{
          width:30px;
          height:30px;
          background:red;
          display:none;
          border:none;
        }
        nav{
          margin:10px 0 0 0;
        }
        nav li{
          display:inline;
        }
        nav li a{
          float:left;
          display:inline-block;
          padding:5px;
          background:yellow;
          margin:0 5px 0 0 ;
        }
        nav li a:hover{
          background:#fff;
        }

        @media only screen and (max-width:400px){

          button{
            display:block;

          }
          nav{
            display:none;
          }
          nav li{
            display:block;
          }
          nav li a{
            float:none;
            display:block;
            padding:5px;
            background:yellow;
            margin:0 5px 0 0 ;
          }

        }
      </style>

      </head>

    <body>

      <div id="wrap">

        <header>
          <button></button>
          <nav>

            <ul>
              <li><a href="">One</a></li>
              <li><a href="">Two</a></li>
              <li><a href="">Three</a></li>
              <li><a href="">Four</a></li>

            </ul>
          </nav>  

        </header>  

      </div><!-- #wrap -->

      <script>

        $(function(){
          $('button').click(function(){
            $('nav').slideToggle();
          })
        })

      </script>

    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:29:21.660

问题是它不知道当屏幕足够大时它应该显示导航栏。只需添加`display: block`到`nav`媒体查询之外的样式。

```
nav{
    margin:10px 0 0 0;
    display: block;
} 
```

## [jsFiddle](http://jsfiddle.net/2r3Ap/1/)

通常：您在媒体查询中定义的任何内容都应该在其之外具有“默认”值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T16:35:40.057

@jimjimmy1995 有最简单的解决方案，但另一种方法是使用 jQuery 的***[`.resize()`](http://api.jquery.com/resize)***方法：

```
$(function ()
{
    var $window = $(window),
        $nav = $('nav'),
        $button = $('button');

    $button.on('click', function ()
    {
        $nav.slideToggle();
    });

    $window.on('resize', function ()
    {
        if ($window.width() > 400)
        {
            $nav.show();
        }
    });
}); 
```

***[请参阅工作 jsFiddle 演示](http://jsfiddle.net/2r3Ap/2/)***

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-02T19:38:04.620

另一种资源消耗较少的方法是在`slideToggle`方法上使用回调函数。回调函数会说，“当动画结束时，移除内联`display`属性并为元素添加一个类。”

新的调用`slideToggle`将如下所示：

```
$(function(){
  $('button').click(function(){
    $('nav').slideToggle(400, function(){
      $('nav').toggleClass('mobile-down').css('display', '');
    });
  });
}); 
```

和CSS：

```
.mobile-down {
  display: block;   
} 
```

这是一个[修改过的小提琴](http://jsfiddle.net/chrisfargen/Jk8V4/)。

为了进一步解释，我在找到这个之前刚刚完成了一个[自我回答的问题。](https://stackoverflow.com/questions/16345957)

# c# - 从 C# WPF 的列表中将标签插入弹出控制器？

> ID：15816325
> 
> 赞同：0
> 
> 时间：2013-04-04T16:11:10.083
> 
> 标签：c#, wpf, list, xaml, popup

如果我在 XAML 中定义了一个简单`Popup control`的，并且在我的 C# 代码中定义了一个标签列表，我该如何将列表中的标签添加到我的`Popup`via XAML 代码中？

我已经四处寻找了一段时间，但还没有完全找到我要找的东西，我知道你们中的一些人/女孩会从经验中知道这一点。

添加示例。

这是 XAML：

```
<Popup PlacementTarget="{Binding ElementName=AITokenizerRTB}" Margin="40,10,0,13" Name="termsPopup" HorizontalAlignment="Left"
    VerticalAlignment="Top" Width="194" Height="105" IsOpen="True"> 
```

这是 C# 的`List`：

```
term term1 = new term();
term1.name = "One";

term term2 = new term();
term2.name = "Two";

term term3 = new term();
term3.name = "Three";

term term4 = new term();
term4.name = "Four";

term term5 = new term();
term5.name = "Five";

term term6 = new term();
term6.name = "Six";

list.Add(term1);
list.Add(term2);
list.Add(term3);
list.Add(term4);
list.Add(term5);
list.Add(term6); 
```

我想添加标签，上面写着：

> 一
> 
> 二
> 
> 三
> 
> 四
> 
> 五
> 
> 六

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:10:36.407

试试这个：

C＃

```
ObservableCollection<term> _myList = new ObservableCollection<term>();
public ObservableCollection<term> MyList{get{return _myList;}} 
```

XAML

```
 <Popup Name="popup" IsOpen="True">
        <ItemsControl Name="myContainer" ItemsSource="{Binding Path=MyList}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Label Content="{Binding Path=name}"/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </Popup> 
```

每当您向其中添加内容时，`MyList`它都会显示在`Popup`.

我希望这有帮助

# java - 测量JAVA中部分代码所用的CPU时间

> ID：15816327
> 
> 赞同：2
> 
> 时间：2013-04-04T16:11:16.387
> 
> 标签：java, time, cpu, elapsed

我目前正在尝试测量我在 java 中的一部分代码的实际经过的 cpu 时间。我读到了你必须使用的 CPU 时间

```
cpuTime = ManagementFactory.getThreadMXBean().getCurrentThreadCpuTime(); 
```

但实际上，当我尝试在那段代码中测量它时，当经过的时间等于零时会引发错误......（在我看来，以纳秒精度来说这是不可能的）。while 循环可以很大也可以很小（大约 10 条指令）。

```
long startTime = ManagementFactory.getThreadMXBean()
                        .getCurrentThreadCpuTime();
// reset with seed solution for each neighborRule and
// each pivoting rule
t.setCurrentBestSolution(seedSolution);
while (t.chooseNextImprovingNeighborSolution(pivotingRule,
                        neighborRule));                 
long endTime = ManagementFactory.getThreadMXBean()
                    .getCurrentThreadCpuTime();
if (endTime - startTime == 0) {
    System.err.println(pivotingRule + ":" + neighborRule);
    System.err.println("END TIME:" + endTime);
    System.err.println("START TIME:" + startTime);
                } 
```

任何的想法 ？我没有正确使用 CPUThread 部分吗？我应该使用外部 Java 基准测试器吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:14:55.343

> 我应该使用外部 Java 基准测试器吗？

是的，请这样做。[Jprofiler](http://www.ej-technologies.com/products/jprofiler/overview.html)在其他有用的指标中测量实际经过的时间。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-04T16:14:47.247

`System`和类的方法`Runtime`会对你有所帮助。看看：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html) [http://docs.oracle.com/javase/1.5.0/docs/api/java/lang /运行时.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html)

例如：您可以使用：`System.currentTimeMillis();`返回程序之前和之后的时间（以毫秒为单位）！（在`main`方法的开头或结尾！）

# ruby-on-rails - Gem::Installer::ExtensionBuildError: 错误: 无法构建 gem 原生扩展

> ID：15816331
> 
> 赞同：2
> 
> 时间：2013-04-04T16:11:29.390
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems

提供一些背景知识 - 我刚刚从 GitHub 下载了一个 Git Repo，用于一个朋友应用程序，我正在尝试从我的 Mac（'rails s'）启动它。但是，在运行“捆绑安装”时，我遇到了以下错误 // 见下文 // 。似乎“pg”（postgreSQL）gem 有某种晦涩的安装错误。任何帮助，将不胜感激！

### 我试过这个命令无济于事：

$gem install pg -- --with-pg-config= /usr/bin/pg_config/

### 这是错误日志：

```
Installing pg (0.15.0) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb 
checking for pg_config... yes
Using config values from /usr/bin/pg_config
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... yes
checking for PQconnectionUsedPassword()... yes
checking for PQisthreadsafe()... yes
checking for PQprepare()... yes
checking for PQexecParams()... yes
checking for PQescapeString()... yes
checking for PQescapeStringConn()... yes
checking for PQescapeLiteral()... yes
checking for PQescapeIdentifier()... yes
checking for PQgetCancel()... yes
checking for lo_create()... yes
checking for pg_encoding_to_char()... yes
checking for pg_char_to_encoding()... yes
checking for PQsetClientEncoding()... yes
checking for PQlibVersion()... yes
checking for PQping()... yes
checking for PQsetSingleRowMode()... no
checking for rb_encdb_alias()... yes
checking for rb_enc_alias()... no
checking for rb_thread_call_without_gvl()... yes
checking for rb_thread_call_with_gvl()... yes
checking for rb_thread_fd_select()... yes
checking for rb_w32_wrap_io_handle()... no
checking for PGRES_COPY_BOTH in libpq-fe.h... no
checking for PGRES_SINGLE_TUPLE in libpq-fe.h... no
checking for struct pgNotify.extra in libpq-fe.h... yes
checking for unistd.h... yes
checking for ruby/st.h... yes
creating extconf.h
creating Makefile

make
compiling gvl_wrappers.c
compiling pg.c
pg.c: In function ‘Init_pg_ext’:
pg.c:384: error: ‘PQPING_OK’ undeclared (first use in this function)
pg.c:384: error: (Each undeclared identifier is reported only once
pg.c:384: error: for each function it appears in.)
pg.c:386: error: ‘PQPING_REJECT’ undeclared (first use in this function)
pg.c:388: error: ‘PQPING_NO_RESPONSE’ undeclared (first use in this function)
pg.c:390: error: ‘PQPING_NO_ATTEMPT’ undeclared (first use in this function)
make: *** [pg.o] Error 1

Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.3-p194/gems/pg-0.15.0 for inspection.
Results logged to /usr/local/rvm/gems/ruby-1.9.3-p194/gems/pg-0.15.0/ext/gem_make.out
An error occured while installing pg (0.15.0), and Bundler cannot continue.
Make sure that `gem install pg -v '0.15.0'` succeeds before bundling. 
```

### 宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'pg'
gem 'json'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

gem 'devise'

gem 'rails-backbone'

gem 'nokogiri'
# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T07:45:19.350

在 Debian 系统上，您必须安装 libpq-dev 软件包才能在带有 'pg' gem 的远程服务器上使用 postgres。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:57:25.110

看起来你没有安装 postgresql。尝试使用[postgres 应用程序](http://postgresapp.com/)，因为您使用的是 mac。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-16T17:35:52.620

安装

```
http://postgresapp.com/ 
```

然后

```
PATH="/Applications/Postgres.app/Contents/MacOS/bin:$PATH" 
```

然后

```
bundle install 
```

# mysql - 在mysql中按计数分组

> ID：15816339
> 
> 赞同：-7
> 
> 时间：2013-04-04T16:12:00.187
> 
> 标签：mysql

我有 2 桌员工和办公室。员工表包含列 (emp_id,office_id,firstname,lastname,startdate) 办公室表包含列 (office_id,office_name,country)

我想查询：所有有办事处的国家，以及那个国家的员工人数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:17:53.653

```
SELECT count(e.emp_id), o.county 
FROM office AS o 
INNER JOIN employee AS e 
ON e.office_id = o.office_id; 
```

您可能不得不在推特上发布一点，但这是一个起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:20:15.183

这将为您提供按国家/地区划分的员工人数。

```
SELECT o.country,
       COUNT(*)
  FROM office o
    INNER JOIN employee e ON e.office_id = o.office_id
  GROUP BY o.country 
```

# asp.net-mvc-3 - OnCascadeDelete 和实体框架

> ID：15816341
> 
> 赞同：1
> 
> 时间：2013-04-04T16:12:08.970
> 
> 标签：asp.net-mvc-3, entity-framework, entity-framework-4, entity-framework-4.1

我有一个公司模型：

```
public class Company
{
    public int Id { get; set; }

    ...

    public virtual ICollection<Useraccount> Useraccounts { get; set; }
} 
```

和一个用户帐户模型：

```
public class Useraccount
{
    public int Id { get; set; }

    ...

    public virtual ICollection<Company> Companies { get; set; }
} 
```

所以它是 am:n 连接：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();            

        modelBuilder.Entity<Company>()
            .HasMany(c => c.Useraccounts).WithMany(i => i.Companies)
            .Map(t => t.MapLeftKey("CompanyId")
                .MapRightKey("UseraccountId")
                .ToTable("UseraccountCompany"));            
    } 
```

但是，初始化数据库时会引发异常。

和

```
modelBuilder.Conventions.Remove<OneToManyCascadeDeleteConvention>(); 
```

初始化工作。

我想保持级联删除，但我不知道如何管理它。我还想保留两个虚拟财产，以便我可以访问公司的用户帐户和用户帐户的公司。

顺便说一句，例外是：

> 在表“UseraccountCompany”上引入 FOREIGN KEY 约束“Company_Useraccounts_Target”可能会导致循环或多个级联路径。指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束。无法创建约束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:33:13.170

这应该有效（您可能尚未在模型中发布一些相关位 - 流畅的配置）。

> 当您有一些“自我引用”实体（直接或间接）时，通常会出现这种情况 - 但我在这里看不到，这是典型的多对多。

但是如果问题仍然存在，您总是可以自己实现连接表——对级联有更多的控制——这通常可以解决问题（如果可能的话）。

我讨厌重新输入:) -**这几乎是确切的问题 - 手动完成多对多**（第 2 部分）。

[EF5 和循环或多个级联路径，外键](https://stackoverflow.com/questions/15812227/ef5-and-cycles-or-multiple-cascade-paths-foreign-key/15814567#15814567)

看看它是否有帮助。

# php - 我想插入和更新特定项目 ID 的数量

> ID：15816345
> 
> 赞同：1
> 
> 时间：2013-04-04T16:12:24.290
> 
> 标签：php, javascript, jquery, mysql, codeigniter

如果商品id已经存在，数量应该加上传入数量，否则如果id不存在插入id和数量

我的表：

```
if  
item_id=array(24,25);

quantity=array(10,2); 
```

这将被插入到表中：

```
else if 

item_id=array(22,23);
quantity=array(2,4); 
```

数量必须添加到现有项目

**auto_id | item_id | 数量**

```
 1        22         12   
 2        23         3 
```

这是一个数组类型的项目 ID 和数量。对不起我的英语，谢谢，

```
foreach($item_id as $row => $id){

        $items_id = $id;
            foreach($quantity as $row => $id2){
            $qty = $id2;
                $values[] = array(
                        array("item_id" => $items_id,
                        "quantity" => $qty));
                $sql = $this->db->query("SELECT ip_id FROM my_table WHERE item_id = '".$items_id."'");      
                if($sql->num_rows() > 0){

                    $this->db->query("UPDATE my_table SET quantity=quantity+'".$qty."' WHERE item_id='".$items_id."'");
                }else{    
                    $this->db->insert_batch('my_table',$values);
                }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:15:05.000

跳过所有这些代码并使用一个简单的[`ON DUPLICATE KEY ...`](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)构造：

```
INSERT INTO yourtable (id, quantity) VALUES ($id, $quantity)
ON DUPLICATE KEY UPDATE quantity=quantity+VALUES(quantity) 
```

# python - 在 xml 文档中挑出标签？

> ID：15816347
> 
> 赞同：1
> 
> 时间：2013-04-04T16:12:27.257
> 
> 标签：python, xml, gdata

我有一个我认为是相当简单的问题。

我从 gdata 中检索了一个文件，这个文件：[https ://gdata.youtube.com/feeds/api/videos/Ej4_G-E1cAM/comments](https://gdata.youtube.com/feeds/api/videos/Ej4_G-E1cAM/comments)

我试图挑出之间的文本

```
"< author >HERE< /author >" 
```

标签，所以我会留下一个只包含用户名的输出。python甚至是解决这个问题的最好方法还是我应该使用另一种语言？从早上 8:00（4 小时）开始，我就一直在谷歌上搜索，但我还没有找到任何东西来完成这样一个看似简单的任务。

最好的问候， - 米奇鲍威尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:18:45.897

你在那里有一个原子提要，所以我会用它[`feedparser`](http://pythonhosted.org/feedparser/)来处理它：

```
import feedparser

result = feedparser.parse('https://gdata.youtube.com/feeds/api/videos/Ej4_G-E1cAM/comments')
for entry in result.entries:
    print entry.author 
```

这打印：

```
FreebieFM
micromicros
FreebieFM
Sarah Grimstone
FreebieFM
# etc. 
```

Feedparser 是一个外部库，但易于安装。如果您只能使用标准库，则可以使用[`ElementTree`API](http://docs.python.org/2/library/xml.etree.elementtree.html)，但要解析 Atom 提要，您需要在解析器中包含 HTML 实体，并且您必须处理命名空间（不是`ElementTree`的强项）：

```
from urllib2 import urlopen
from xml.etree import ElementTree

response = urlopen('https://gdata.youtube.com/feeds/api/videos/Ej4_G-E1cAM/comments')
tree = ElementTree.parse(response)

nsmap = {'a': 'http://www.w3.org/2005/Atom'}
for author in tree.findall('.//a:author/a:name', namespaces=nsmap):
    print author.text 
```

`nsmap`字典允许将前缀`ElementTree`转换`a:`为这些元素的正确命名空间。

# filter - Drupal 7 查看多个上下文过滤器

> ID：15816351
> 
> 赞同：1
> 
> 时间：2013-04-04T16:12:35.280
> 
> 标签：filter, drupal-7, views, organic-groups

我正在使用有机组运行 Drupal 7。我克隆了“OG 所有用户组内容”视图，向它添加了一个实体引用，以用作我的一种内容类型中的字段。我的问题是：

**如何使用额外的上下文过滤器（内容类型），以便可以将参数添加到实体引用字段？**

输入内容类型名称不起作用：例如 1/article。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:55:25.520

所以我得到了答案：

[https://drupal.stackexchange.com/questions/53861/how-to-show-nodes-of-a-content-type-using-contextual-filters-as-filters](https://drupal.stackexchange.com/questions/53861/how-to-show-nodes-of-a-content-type-using-contextual-filters-as-filters)

但是，根据上下文添加“内容类型”通常需要节点 ID；使用 PHP 代码，您可以简单地添加：

```
return TRUE; 
```

这将允许您输入内容类型名称（物理名称；即 OpenLayers Location 字段名为 Location，但物理路径为 ol_locator_location）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-05T00:27:12.723

在高级链接中编辑视图时，可以看到“上下文过滤器”；在那里你可以添加你添加到内容类型的字段。

# linux - 套接字因 EOF 失败和连接重置之间的区别

> ID：15816352
> 
> 赞同：3
> 
> 时间：2013-04-04T16:12:38.137
> 
> 标签：linux, sockets, networking

为了测试网络应用程序，我编写了一个 asio 端口“代理”：它在套接字上侦听应用程序客户端活动，并将所有传入的数据包发送到另一个套接字，由应用程序服务器侦听，然后返回。

现在，当应用程序或服务器由于各种原因断开连接时，“代理”通常会收到 EOF，但有时它会收到“连接重置”。

因此，问题是：套接字何时因“连接重置”错误而失败？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T16:51:35.497

当本地端尝试向远程端发送数据并且远程端以`RST`设置了标志（而不是`ACK`）的数据包应答时，TCP 连接被“重置”。这几乎总是会发生，因为远程端不知道任何与远程和本地地址以及远程和本地端口号匹配的 TCP 连接。可能的原因包括：

*   远端已重启
*   路径中某处的状态跟踪防火墙已重新启动/更改/添加/删除
*   负载均衡器错误地将 TCP 连接定向到与它应该去的节点不同的节点。
*   远程 IP 地址已易手（新所有者对属于旧所有者的 TCP 连接一无所知）。
*   远端认为 TCP 连接已经关闭（但不知何故，本地端不同意）。

请注意，如果远程端以`SYN`数据包响应 TCP 连接中的初始 ( ) 数据`RST`包，则视为“连接被拒绝”而不是“对等连接重置”。

# jquery - 外部触发 FullCalendar 的“dayClick”方法？

> ID：15816353
> 
> 赞同：8
> 
> 时间：2013-04-04T16:12:40.507
> 
> 标签：jquery, fullcalendar

我正在使用 Arshaw 的 FullCalendar，并且希望在页面加载后模拟用户单击单元格。我正在尝试这样做，因此我可能会转到一个 URL，例如，`/Calendar/AddEvent`日历将自动打开一个对话框，其中包含我的添加事件表单。

进行以下设置：（[此处为小提琴](http://jsfiddle.net/vb56M/)）

**HTML**

```
<div>
    <div id="calendar" data-year="2013" data-month="04" ></div>
</div> 
```

**jQuery**

```
$('#calendar').fullCalendar({
        firstDay: 1,
        selectable: true,
        dayClick: function (start, allDay, jsEvent, view) {
                    alert('You clicked me!');
        }
    }); 
```

默认情况下，今天的单元格具有`.fc-today`我尝试通过执行以下操作来利用的类：

```
$('.fc-today').trigger('click'); 
```

这似乎不起作用。无论如何我可以做类似的事情

```
$('#calendar').fullCalendar('dayClick', date) 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-10T03:16:55.633

我在我的用例中也遇到了这个问题，这是我在挖掘完整日历源代码后发现的对我有用的方法。您需要手动创建一个`mousedown`和`mouseup`事件（技术上`mouseup`是可选的，但您可以使用它来重置 的“单击”状态`td`），其中包含您要“单击”的元素的 X 和 Y 位置的坐标。参数也很重要`which`，需要将其设置为`1`才能[通过`isPrimaryMouseButton`检查](https://github.com/fullcalendar/fullcalendar/blob/3a464732a77eac8999875525549d19be0c423d5f/src/util.js#L294)。

考虑到这一点，代码看起来像这样（注意我更改了`$('#click')`使用`mousedown`事件，以便它只运行一次）：

```
$('#click').on('mousedown', function () { 
    var today = $('td.fc-today');
    var down = new $.Event("mousedown");
    var up = new $.Event("mouseup");
    down.which = up.which = 1;
    down.pageX = up.pageX = today.offset().left;
    down.pageY = up.pageY = today.offset().top;
    today.trigger(down);
    today.trigger(up); //this is optional if you just want the dayClick event, but running this allows you to reset the 'clicked' state of the <td>
}); 
```

这是一个工作小提琴：http: [//jsfiddle.net/vyxte25r/](http://jsfiddle.net/vyxte25r/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:15:08.100

您可以在类中使用jquery`trigger`事件：`div``td``fc-today`

```
 $('td.fc-today div').trigger('click'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-20T21:15:13.707

修改凯文的答案对我有用。我需要让 dayClick 事件可以通过键盘访问。使用 dayRender 方法将事件监听器添加到每个单元格允许我们轻松处理每一天的 dayClick 事件。以下是我的实现方式：

```
dayRender: function(date, cell) {
  // Allow keyboard to access and interact with calendar days
  $(cell).attr("tabindex", "0").on("keydown", function(e) {
    if (e.which === 32 || e.which === 13) {
      var day = $(this);
      var down = new $.Event("mousedown");
      var up = new $.Event("mouseup");
      var eventParams = { which: 1, pageX: day.offset().left, pageY: day.offset().top };

      day.trigger($.extend(true, {}, down, eventParams));
      day.trigger($.extend(true, {}, up, eventParams));
    }
  });
} 
```

相关文档：[https ://fullcalendar.io/docs/display/dayRender/](https://fullcalendar.io/docs/display/dayRender/)

# microsoft-metro - LOB Windows 商店应用程序质量和崩溃报告

> ID：15816354
> 
> 赞同：1
> 
> 时间：2013-04-04T16:12:41.213
> 
> 标签：microsoft-metro, windows-store-apps

我正在使用 LOB windows store 应用程序，它不会去商店，它将由公司员工使用。我的问题，当应用程序崩溃时，有什么方法可以报告吗？，类似于应用程序发布到商店时的应用程序仪表板。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:09:54.920

您可以使用 3rd 方库来获取有关崩溃和异常的日志。我用过[MarkedUp](https://markedup.com/)。另一种方法是创建自己的 Web 服务，将崩溃日志发送到某个数据库。

# google-oauth - C# Oauth2 检索验证码

> ID：15816358
> 
> 赞同：0
> 
> 时间：2013-04-04T16:12:53.207
> 
> 标签：google-oauth

我一直在研究 Oauth2 的过程。我正在编写一个 C# win 表单应用程序。我试图弄清楚是否有办法发出 http 请求来获取授权代码，而不是弹出网络浏览器并要求“授予访问权限”。如果必须这样做，我想知道如何将该代码传递给程序？由于我使用的是 C# 表单应用程序，因此我不确定如何将其传递给控制台。

```
 public static IAuthorizationState getState(NativeApplicationClient arg)
{
    IAuthorizationState state = new AuthorizationState(new[] {AnalyticsService.Scopes.Analytics.GetStringValue()});
    state.Callback = new Uri(NativeApplicationClient.OutOfBandCallbackUrl);
    Uri authUri = arg.RequestUserAuthorization(state);
    Process.Start(authUri.ToString());
    Console.Write("  Authorization Code: ");
    string authCode = Console.ReadLine();
    Console.WriteLine();
    return arg.ProcessUserAuthorization(authCode, state);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:02:17.113

您可以从您的应用程序调用浏览器控件。一旦您的用户成功登录 Google 并从该浏览器控件授权您的应用程序，请从您的浏览器控件所在页面的标题中解析授权代码。

看这里：

[https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2#OAuth2_Installed_Applications_Flow](https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2#OAuth2_Installed_Applications_Flow)

> 如果您将redirect_uri 设置为urn:ietf:wg:oauth:2.0:oob，Google 的授权服务器将向浏览器返回一个页面，如下所示。然后，您的应用程序可以从页面标题中提取授权代码。

小心地准确解析代码的描述方式。然后继续关闭浏览器控件并执行您需要执行的操作。

# login - 使用 Facebook Oauth 登录的用户可以获得哪些数据？

> ID：15816359
> 
> 赞同：5
> 
> 时间：2013-04-04T16:12:54.887
> 
> 标签：login, oauth, single-sign-on, facebook-login

我目前正在使用 OpenID 来允许用户使用 Google 作为提供商登录到我的网站。我正在考虑允许用户也使用 Facebook 登录。当用户使用 Google OpenID 登录时，Google 会向我的网站发送有关该用户的以下数据：

*   全名
*   名
*   姓
*   ID
*   性别
*   语言
*   电子邮件地址

我进行了一些快速搜索，但找不到 Facebook 将通过 Oauth 登录提供的属性列表。facebook 默认提供哪些数据，您可以要求哪些额外数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T16:17:57.750

这是我在访问[https://graph.facebook.com/me](https://graph.facebook.com/me)时得到的列表：

*   ID
*   姓名
*   名
*   姓
*   关联
*   用户名
*   关于
*   工作
*   教育
*   性别
*   电子邮件
*   时区
*   语言环境
*   已验证
*   更新时间

如果您查看[https://developer.facebook.com](https://developer.facebook.com)，他们有一堆工具可以让您四处寻找和测试 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T19:48:03.250

查看 Facebook Graph Explorer 工具：[https ://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)

默认情况下，此工具可让您使用默认权限查询 Facebook 图表。

有一个标有“获取访问令牌”的按钮，您可以选择为每个可能的 Facebook 权限组合生成访问令牌。然后，您可以使用任何一组权限查询图表并查看可用的数据。

# macos - 向 Dreamweaver CS5.5 添加 LESS 扩展

> ID：15816369
> 
> 赞同：2
> 
> 时间：2013-04-04T16:13:07.937
> 
> 标签：macos, less, dreamweaver

昨天工作给了我一个新的 Macbook Pro，我很难让 Dreamweaver CS5.5 处理我的 LESS 文件。起初，我收到一个错误，说它无法打开文件类型，所以我访问了 Adob​​e 帮助区域和用户论坛，找到了关于编辑 Extensions.txt 和 MMDocumentTypes.xml 的解决方案。所以现在我可以从本地文件侧面板打开文件，但不能从文件 -> 打开。尽管它被列为样式表扩展，但代码提示和着色不起作用。一个奇怪的转折是，现在如果我对这些文件进行编辑，DW 仍然会打开 LESS 文件而不会出错。任何人都知道如何让这个完全运作？

以下是我在研究中发现并尽我所能遵循的几篇文章：

[http://help.adobe.com/en_US/dreamweaver/cs/extend/WS5b3ccc516d4fbf351e63e3d117f53d6108-7fda.html](http://help.adobe.com/en_US/dreamweaver/cs/extend/WS5b3ccc516d4fbf351e63e3d117f53d6108-7fda.html)

[http://helpx.adobe.com/dreamweaver/kb/change-add-recognized-file-extensions.html](http://helpx.adobe.com/dreamweaver/kb/change-add-recognized-file-extensions.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T12:03:52.537

从我今天的尝试来看，现在对我来说有点道理。我让它在 CS5 上工作。首先，您应该显示计算机上的所有文件。Spotlight (OS X) 让查找这些文件的所有实例变得超级容易。找到它后， CMD + R 将显示文件所在的父文件夹。

“Extensions.txt”处理 DW 是否可以从模式窗口/程序菜单打开文件。该文件位于 2 个位置，您应该使用“文本编辑”或其他基本编辑程序进行编辑：

*   USERS/library/Application Support/Adobe/Deamweaver CS5/en_US/Configuration/Extensions.txt
*   应用程序/Dreamweaver/配置/Extensions.txt

为此，您只需要声明一个新类型：

1.  作为“所有文档”列表的一部分，您需要添加 SCSS、LESS 扩展
2.  作为“样式表”列表的一部分，您需要添加 SCSS、LESS 扩展

`CSS,SCSS,LESS:Style Sheets`

您需要编辑的第二个文件位于 CS6 中的“DocumentTypes”文件夹下，我相信该文件夹已移至：USERS/library/Application Support/Adobe/Deamweaver CS5/en_US/Configuration/

但是，在 CS5 中，我在 Applications/Dreamweaver/Configuration/ 中找到了这个文件夹，如果你编辑“MMDocumentTypes.xml”这个文件，它应该解释你之前在“Extensions.txt”中定义的那些扩展应该如何表现。（再次，使用基本的文本编辑器）。

我想在第 140 行左右的某个地方，您会看到以下内容：

```
<documenttype id="CSS" internaltype="Text" winfileextension="css" macfileextension="css" file="Default.css" writebyteordermark="false" mimetype="text/css" > 
```

从这里添加“scss,less”到“winfileextension”和“macfileextension”。因为您使用的是 Mac，所以您可能希望确保在 'macfileextension' 属性中填写它。

结果应如下所示：

```
<documenttype id="CSS" internaltype="Text" winfileextension="css,scss,less" macfileextension="css,scss,less" file="Default.css" writebyteordermark="false" mimetype="text/css" > 
```

干杯!

# iframe - 在 Iframe 中加载 Mvc 4 视图时出现问题？不在 IFrame 中显示模型属性

> ID：15816372
> 
> 赞同：0
> 
> 时间：2013-04-04T16:13:12.913
> 
> 标签：iframe, asp.net-mvc-4, mime-types, mime-message

我有以下要求。需要在IFrame中显示Mime消息的html Body

**看法**

```
<iframe id="myIframe1" src="http://localhost:23245/Home/GetMimeMessageContent?FilePath=D \MimeFiles/htmlBody-small1.eml&PartName=HtmlBody" style="width:600px;height:600px;" > 
```

**控制器**

```
public ActionResult GetMimeMessageContent(string filePath,string partName)
    {
        var mimeModel = BuildMimeModel(filePath, partName);
        MimeHeaderModel mimeHeadermodel = new MimeHeaderModel();
        mimeHeadermodel.FromAddress = mimeHeadermodel.ToAddress = mimeHeadermodel.Subject = string.Empty;
        mimeModel.MimeHeader = mimeHeadermodel;
        return View("MailDetailsView", mimeModel.MimeBody.HtmlBody);
    } 
```

它没有在 Iframe 中显示 HtmlBody。但它调用控制器。我不知道我错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:28:43.270

不确定您是否使用 jquery，但是：

```
$(function() {
var $frame = $('<iframe style="width:200px; height:100px;">');
$('body').html( $frame );
setTimeout( function() {

            $.ajax(
               url="/Home/GetMimeMessageType/small1.eml/HtmlBody",
               type:'GET',
               success: function(data){
                  var doc = $frame[0].contentWindow.document;
          var $body = $('body',doc);
          $body.html(data);
               }
            );

},1 );
 }); 
```

我没有测试上面的代码，但这应该可以正常工作。需要注意的几点：

您将需要创建一个自定义路由以将其映射到您的控制器： http: [//msdn.microsoft.com/en-us/library/cc668201 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/cc668201(v=vs.100).aspx)

您还需要将 javascript $('body').html() 更改为作为占位符的 div 的 ID

你也会注意到我没有路径，如果这永远不会改变，你应该将路径添加到你的代码中，或者你可以使用 formcollection 并将 jquery ajax 更改为帖子，并在那里设置变量和值。

然后，您的内容将出现在 iframe 中。

忘记整个 html.renderaction，这个解决方案给你更多的范围

# java - 无法获得正确的字体字符宽度

> ID：15816376
> 
> 赞同：1
> 
> 时间：2013-04-04T16:13:18.943
> 
> 标签：java, fonts, java-2d

这是一种将 awt 字体字符作为缓冲图像返回的方法：

```
private BufferedImage getCharImage(char ch) {
    BufferedImage sizeImage = new BufferedImage(1, 1, BufferedImage.TYPE_INT_ARGB);
    Graphics2D sizeGraphics = (Graphics2D) sizeImage.getGraphics();
    if (antiAlias) {
        sizeGraphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    }

    FontMetrics fontMetrics = sizeGraphics.getFontMetrics(font);
    int charwidth = fontMetrics.charWidth(ch);
    if (charwidth <= 0) {
        charwidth = 1;
    }

    int charheight = fontMetrics.getHeight();
    if (charheight <= 0) {
        charheight = fontSize;
    }

    BufferedImage charImage = new BufferedImage(charwidth, charheight, BufferedImage.TYPE_INT_ARGB);
    Graphics2D charGraphics = (Graphics2D) charImage.getGraphics();

    if (antiAlias) {
        charGraphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    }

    charGraphics.setFont(font);
    charGraphics.setColor(Color.WHITE);
    charGraphics.drawString(String.valueOf(ch), 0, fontMetrics.getAscent());

    return charImage;
} 
```

问题是我得到不正确的宽度，并且字符不适合装箱缓冲图像。如果我像这样创建缓冲图像，`new BufferedImage(charwidth + 10, charheight, BufferedImage.TYPE_INT_ARGB);`则字符将适合图像（这意味着我得到错误的字体宽度）。**为什么我面临这个问题，我该如何解决？**我正在使用 arialbi.ttf（粗体，斜体）。

这就是字体呈现的方式 ![在此处输入图像描述](https://i.stack.imgur.com/4ekbv.png)

**编辑：**

这就是我定义字体变量的方式：

```
 font = Font.createFont(Font.TRUETYPE_FONT, inputStream);
    font = font.deriveFont(fontSize); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T17:11:00.060

我认为这是因为提前，或者`charWidth()`与字体定义的字符的实际宽度没有太大关系。

[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/awt/FontMetrics.html#charWidth%28char%29)用于`FontMetrics.charWidth(char ch)`：

> 前进是从角色基线上最左边的点到最右边的点的距离

像 Chancery Italic 中的“g”这样的字符，位于基线下方，延伸到最小值 x 的左侧。或相同字体的“s”在最大 x 的右侧延伸到基线上方。在更直的字体中，如 Arial Regular，前进（基线宽度）恰好非常接近字符的实际宽度。

除了添加任意填充之外，我不确定一个好的解决方案。

另请参阅：[http ://docs.oracle.com/javase/tutorial/2d/text/measuringtext.html](http://docs.oracle.com/javase/tutorial/2d/text/measuringtext.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-10T11:21:28.837

我相信这是获得字符串的确切宽度所需要的：

```
FontMetrics fontMetricesForLabel = graphics.getFontMetrics();
double width = fontMetricesForLabel.getStringBounds(label, graphics).getWidth(); 
```

# jquery - 无法使用 jQuery 向元素添加类，有人可以帮忙吗？

> ID：15816381
> 
> 赞同：0
> 
> 时间：2013-04-04T16:13:36.377
> 
> 标签：jquery, addclass

出于某种原因，我似乎无法使用 jQuery 向我的“li”标签添加一个类，我之前做过这个，但我已经坚持了一个多小时，看不到我做错了什么！？

任何人都可以看到其中的错误吗？任何帮助将不胜感激，谢谢！:)

```
<nav>
    <ul id="tabs">
        <li><a href="#">Home</a></li>
        <li><a href="#">About</a></li>
    </ul>
</nav>

<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
        $('#tabs li:first').addClass('active');
        });
    });
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:14:47.137

您有多余的右括号：

```
$(document).ready(function(){
    $('#tabs li:first').addClass('active');
    }); // <-- Remove this
}); // <-- or this 
```

# css - 试图理解 css3 语法

> ID：15816382
> 
> 赞同：-1
> 
> 时间：2013-04-04T16:13:37.287
> 
> 标签：css, syntax, css-selectors

msub > *:first-child:after, msub > * + *:before { ... }

这是我试图理解的 css 文件中的代码片段。

msub 是元素。

*   > 这，大于，适用于 msub 的直接子元素
*   对这种类型的所有元素执行此操作
*   :first-child 对 msub 的所有第一个孩子执行此操作

他们为什么要做第一个孩子的**>**和第一个孩子**的 :first-** child ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:16:34.337

`>`表示“所有孩子”而不是“第一个孩子”。

`:first-child`表示“其父级的第一个子级”而不是“前一个组合器之前的选择器的第一个子级”

```
<msub>
    <a>
        <b></b>
    </a>
    <c></c>
</msub> 
```

`msub *:first-child`会选择`a`and`b`因为他们都是他们父母的第一个孩子并且都是`msub`.

`msub > *`会选择`a`并且`c`因为他们都是`msub`

`msub > *:first-child`只选择`a`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:18:36.037

`msub`- 元素
`>`- 目标父元素的直接子元素（不是子元素的子元素）
`*`- 获取所有子元素
`:first-child`- 仅获取第一个子元素

CSS 通过选择器向后工作，因此：

从作为 parent 的直接后代的所有元素中获取第一个子元素`msub`。

# ssis - SSIS：控制流与数据流中的数据挖掘查询

> ID：15816387
> 
> 赞同：0
> 
> 时间：2013-04-04T16:13:50.320
> 
> 标签：ssis

为什么你会选择一个而不是另一个？两者之间有（主要）区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:11:45.163

[此处](http://msdn.microsoft.com/en-us/library/ms403377%28v=sql.105%29.aspx)的BOL 页面对此给出了最佳答案。

# c++ - 将基于自定义模板的迭代器类的对象转换为 const_iterator

> ID：15816391
> 
> 赞同：4
> 
> 时间：2013-04-04T16:13:55.027
> 
> 标签：c++, templates, copy-constructor, const-iterator, listiterator

我正在大学学习 OOP 课程（C++ 是基础语言）。我的任务是实现自己的链表模板容器类。我几乎完全做到了，但遇到了问题。众所周知，STL 提供`iterator`和`const_iterator`类用于通过列表进行迭代。它们的实现几乎相同，主要区别在于迭代器的方法返回引用，而 const_iterator 的方法——常量引用。我遵循[https://stackoverflow.com/a/3582733/2108548](https://stackoverflow.com/a/3582733/2108548)并创建了单独的模板类`ListIterator`。然后我用`typedef`classes`Iterator`和`ConstIterator`class声明`List`。

我得到了这样的东西：

```
template<typename T>
class ListNode
{
public:
    ListNode(T *node_value = nullptr, ListNode *node_prev = nullptr, ListNode *node_next = nullptr):
        value(node_value), prev(node_prev), next(node_next) { }

    T *value;
    ListNode *prev, *next;
};

template<typename T>
class ListIterator
{
    typedef ListNode<T> Node;

public:
    ListIterator();
    ListIterator(Node *node);
    ListIterator(ListIterator const &other);
    ListIterator &operator++();
// ...
    Node *i;
};

template<typename T>
class List: public Container
{
    typedef ListIterator<T> Iterator;
    typedef ListIterator<T const> ConstIterator;
// ...
    Iterator begin() const
    {
        return Iterator(m_first->next);
    }
    ConstIterator const_begin() const
    {
        return ConstIterator(begin());
    }
// ...
}; 
```

在我决定制作 "copy-constructor" `Iterator`->之前，一切都很好`ConstIterator`。所以我需要构造函数方法来获取`ListIterator<T>`（`T`数据类名称在哪里）并创建新的对象类型`ListIterator<T const>`。但实际上`ConstIterator`的构造函数是`T const`作为模板参数获取的，所以我需要删除`const`构造函数的参数。我找到了执行此操作的标题`type_traits`。所以我写了“复制构造函数”： typedef typename std::remove_cv::type NoConstT; ListIterator(ListIterator const &other);

但它不起作用！请求 const_begin() 后出现此错误：

```
List<int> list1;
list1 << 1 << 2 << 3;
int i = *list1.const_begin(); 

error: 'ListIterator<T>::ListIterator(const ListIterator<typename std::remove_cv<_Tp>::type>&) [with T = int; typename std::remove_cv<_Tp>::type = int]' cannot be overloaded with 'ListIterator<T>::ListIterator(const ListIterator<T>&) [with T = int; ListIterator<T> = ListIterator<int>]' 
```

但这还不是全部。为了实现我的目标，我也必须转换`ListNode<T>`为`ListNode<T const>`。但是我还有一个问题：每个列表节点都包含指向前一个和下一个节点的指针，如果我尝试在节点的构造函数中初始化它们，我将得到递归。当然，我可以创建函数来处理通过迭代将所有`ListNode<T>`节点转换为。`ListNode<T const>`但我不喜欢这个解决方案：它有巨大的开销！

我问了我的老师这个问题。他愣了几分钟没看懂，等他明白了才说：“初级！” ——“但我坚持了 3-4 个小时！” — “如果是这样，请丢弃 const 迭代器并在没有它们的情况下完成列表容器。我需要时间来理解您的代码”（正如您所见，我的代码在我看来非常简单）。据我了解，他不知道这个问题的答案。但我真的很想知道怎么做！我怎么解决这个问题？

*抱歉有很多错误——我不是以英语为母语的人。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:03:47.780

您确实可以使用`<type_traits>`，只是不像您描述的那样。一种方法是始终从相同类型声明构造函数，并`enable_if`仅在模板参数确实不是常量时有条件地从非常量声明一个构造函数。并且 node 应该总是非常量，你可以用`remove_const`.

```
#include <type_traits>

template<typename T>
class ListNode
{
   //...   
};

template<typename T>
class ListIterator
{
    typedef ListNode<typename std::remove_const<T>::type> Node;

public:
    ListIterator() {}
    ListIterator(Node*) {}
    ListIterator(ListIterator const&) {}
    template <typename U>
    ListIterator(ListIterator<U> const&, typename std::enable_if<!std::is_const<U>()>::type* = nullptr) {}
};

template<typename T>
class List
{
public:
    typedef ListIterator<T> Iterator;
    typedef ListIterator<T const> ConstIterator;
// ...
    Iterator begin()
    {
        return Iterator(/*...*/);
    }
    ConstIterator const_begin() const
    {
        return ConstIterator(/*...*/);
    }
// ...
};

int main() {
    List<int> list;
    List<int>::ConstIterator ci = list.const_begin(); 
    List<int>::Iterator i = list.begin(); 
    ci = i; // works fine as expected
    i = ci; // fails as expected
    i = i;  // works fine as expected
    ci = ci;  // works fine as expected
    return 0;
} 
```

# angular-ui-bootstrap - 如何使用 Angular-UI 引导字体？

> ID：15816395
> 
> 赞同：1
> 
> 时间：2013-04-04T16:14:00.127
> 
> 标签：angular-ui-bootstrap

我正在尝试开始使用 Angular UI 引导程序。

我有这个例子正在运行，但我不知道从这里去哪里。文档或示例的方式并不多。

twitter Bootstrap 的文档说 typehead 具有诸如 minLength 之类的选项。例如，我该如何设置？我如何将它连接到控制器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:01:19.903

好的，单元测试文件有一个例子。

```
 <input type="text" ng-model="selected" typehead="state for state in states" typeahead-min-length='3' > 
```

# java - groovy/java 检查列表交叉点和组合元素

> ID：15816396
> 
> 赞同：0
> 
> 时间：2013-04-04T16:14:00.883
> 
> 标签：java, list, groovy, intersection

我有一个清单：

```
def a = [[14, 17, 12, 5], [14, 17, 12, 8, 3], [5, 2], [9]] 
```

我需要检查交叉点，如果两个列表相交，请将它们组合起来。

结果应如下所示：

```
def b = [[14, 17, 12, 5, 8, 3, 2], [9]] 
```

（即 14 在第一个子列表中，它也在第二个子列表中，以此类推……）如何解决此任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:27:12.500

您可以在 Groovy 中执行以下操作：

```
def a = [[14, 17, 12, 5], [14, 17, 12, 8, 3], [5, 2], [9]]

def rslt = a.inject( [ ] ) { c, n ->
  for( cc in c ) {
    if( n.find { it in cc } != null ) {
      cc.addAll( n )
      cc = cc.unique()
      return c
    }
  }
  c << n
}

assert rslt == [[14, 17, 12, 5, 8, 3, 2], [9]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:43:48.310

这是另一个在列表上使用 Groovy 的一些“启发”方法的示例

```
def a = [[14, 17, 12, 5], [14, 17, 12, 8, 3], [5, 2], [9]]

def res = a.inject([]){ acc,val ->
    def isect =  acc.find{ val.intersect(it)}?.with{ it.addAll(val - it) }
    !isect ? acc << val : acc
}

assert res.containsAll([[14, 17, 12, 5, 8, 3, 2], [9]]) 
```

# javascript - 选择项目时，AngularJS选择框选项消失

> ID：15816400
> 
> 赞同：26
> 
> 时间：2013-04-04T16:14:08.293
> 
> 标签：javascript, angularjs

我使用 Angularjs 创建了一个绑定到模型的选择框。选择框选项正确加载，但只要选择任何单个选项，所有选项都会从选择框中消失。发生这种情况的原因是什么？如何防止我的选择消失？

演示问题的 Plunker 链接：http: [//plnkr.co/edit/DolBIN](http://plnkr.co/edit/DolBIN)

HTML

```
<html xmlns="http://www.w3.org/1999/xhtml"  ng-app>
  <head>
      <title>Angular Test Prjoect - Home</title>
      <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.5/angular.min.js"></script>
      <script type="text/javascript" src="Clinic.js"></script>
  </head>
  <body>
        <div ng-controller="ClinicCtrl">
          <select  ng-options="item as item.start + '-' + item.end + ':' + item.patient.name for item in appointments" ng-model="appointments">
          </select>
        </div>
  </body>
</html> 
```

JavaScript

```
function ClinicCtrl($scope) {
    $scope.appointments = [
        { start: "900", end: "930", provider: "1", patient: {name:"Allen",dob:"8/12/1977"} },
        { start: "1000", end: "1045", provider: "1", patient: { name: "Allen", dob: "8/12/1971"} },
        { start: "1030", end: "1100", provider: "2", patient: { name: "David", dob: "11/22/1973"} },
        { start: "1100", end: "1145", provider: "2", patient: { name: "Francine", dob: "3/18/1987"} },
        { start: "1230", end: "1530", provider: "3", patient: { name: "George", dob: "4/5/1997"} },
        { start: "1300", end: "1500", provider: "3", patient: { name: "Kirkman", dob: "6/28/1970"} }
    ];
} 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-04T16:24:24.140

问题是，一旦选择了一个项目`ng-model`，您的 select 元素上的 就会覆盖`$scope.appointments`数组。`ng-model`为您的值使用不同的范围属性。

这是一个更新的 plunker：[http ://plnkr.co/edit/EAExby](http://plnkr.co/edit/EAExby)

对模板的更改将是：

```
<div ng-controller="ClinicCtrl">
  <select
    ng-options="item as item.start + '-' + item.end + ':' + item.patient.name for item in appointments"
    ng-model="selectedAppointment"
  ></select>
  {{selectedAppointment}} <!-- log out the value just to show it's working -->
</div> 
```

# pug - 从 Scalatra 中的 Jade 模板访问 Flash 地图

> ID：15816405
> 
> 赞同：0
> 
> 时间：2013-04-04T16:14:36.683
> 
> 标签：pug, scalatra, scalate

我正在使用 Scalatra 创建应用程序，并且正在使用 Scalate/Jade 进行模板化。我尝试为我的应用程序添加 Flash 支持。我混入`FlashMapSupport`了我的 Servlet，我可以访问`flash`帮助程序。无论如何，如果我试图从布局中获取它，我会收到以下错误：

```
[error] /home/ytaras/projects/scala/scalatra-shopping-cart/target/scala-2.10/src_managed/main/scalate/templates/layouts/default_jade.scala:27: not found: value flash
[error]                         flash.get("alert").foreach
[error]                         ^
[error] one error found 
```

为了避免这种情况，我能做的最好的事情是使用向下转换来呈现上下文：

```
 - context.asInstanceOf[org.scalatra.scalate.ScalatraRenderContext].flash.get("alert").foreach
    - alert =>
    .alert
      .button(type="button" class="close" data-dismiss="alert") &times;
      = alert 
```

无论如何，这绝对不是最漂亮的解决方案。我可以做些什么来解决它，或者这是 Scalate/Jade 代码中的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:08:55.797

我刚刚使用 Jade 完成了一个非常简单的 Scalatra 应用程序，它似乎按照文档工作。

编辑：我一直在使用在早期版本的 Scalatra 中生成的应用程序。

在 Scalatra 2.2.0 中，我们在 g8 框架中添加了预编译的 Scalate 模板，以在默认情况下提高生产速度。那里有一个错误`project/build.scala`，导致闪存上下文丢失。

将此添加到您的`project/build.scala`：[https ://gist.github.com/anonymous/ff40cdde1a1105970f50#file-build-scala-L37-L39](https://gist.github.com/anonymous/ff40cdde1a1105970f50#file-build-scala-L37-L39)

我们将立即修复 g8 模板。抱歉，添麻烦了。

# python - 在 Python cProfile 中，调用计数和原始调用计数有什么区别？

> ID：15816415
> 
> 赞同：16
> 
> 时间：2013-04-04T16:14:59.707
> 
> 标签：python, profiling

当我使用 显示分析数据`pstats`时，第一列是每个函数的调用次数。

但是，当我对数据进行排序时，我可以在和键之间`calls`进行选择。文档说，并且是*呼叫计数*，什么时候是*原始呼叫计数*。排序依据还是相同？有什么不同？`ncalls``pcalls``calls``ncalls`*`pcalls`*`calls``ncalls``pcalls`**

 *** * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-04T16:21:30.897

[http://docs.python.org/2/library/profile.html#module-cProfile](http://docs.python.org/2/library/profile.html#module-cProfile)

> 我们将原语定义为表示调用不是通过递归引起的。
> 
> ...当函数不递归时，这两个值是相同的

`calls`按或排序`ncalls`是一样的。

* * *

> 当第一列有两个数字时（例如 43/3），则后者为原始调用次数，前者为实际调用次数。注意，当函数不递归时，这两个值是一样的，只打印单个图：

```
In [43]: def a(i):
   ....:     if i == 0:
   ....:         return
   ....:     a(i-1)
   ....:

In [54]: %prun a(0)
  ncalls  tottime  percall  cumtime  percall filename:lineno(function)
       1    0.000    0.000    0.000    0.000 <ipython-input-43-25b7f3d268b8>:1(a)

In [55]: %prun a(1)
  ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     2/1    0.000    0.000    0.000    0.000 <ipython-input-43-25b7f3d268b8>:1(a)

In [56]: %prun a(3)
  ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     4/1    0.000    0.000    0.000    0.000 <ipython-input-43-25b7f3d268b8>:1(a) 
```**

# python - 了解 Python 路径变量、模块安装/导入和版本管理

> ID：15816425
> 
> 赞同：1
> 
> 时间：2013-04-04T16:15:30.983
> 
> 标签：python, macos, module, path

我正在学习Python，对Unix、路径管理等的了解非常有限。我的目标是使用带有几个模块的Python2.5.x。Python2.7 的原生安装可以看到我所有的模块。本机2.5不能。此外，我已经从 Python.org 安装了 2.5.4 的二进制文件。我正在使用安装了命令行工具的最新版本的 Xcode (4.6)，以及 m OS X (10.8.3)

当我构建[PIL 库](http://www.pythonware.com/products/pil/index.htm)的 Python 2.5 构建（即。`python setup.py -build_ext -i; python setup.py install`）时，*最初*，这没有问题，除了本机 2.5 安装根本无法访问它，而是 2.7！所以，在安装 2.5.4 之后，我再次尝试构建 PIL，希望它会遵循更新后的路径变量。唉，2.5.4 想要使用 GCC 4.0.1，因此无法完成构建。

通过将模块从它们所在的位置符号链接到我需要它们所在的位置（或者在[pygame](http://www.pygame.org/)的情况下，只需复制整个目录，因为由于某种原因，符号链接不起作用），我可以获得我当前的安装以加载它们。但是我知道这一定是错误的方法，而且我只是不明白如何安装某些东西

`Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/site-packages`

应该可以访问其他版本。

**TLDR：**

正是这种让事情协同工作的无助感令人沮丧。这*应该* 如何工作？如果我无法控制哪些 Python 版本可以访问哪些模块，那么二进制安装程序甚至设置脚本的意义何在？如果有人能指出我在安装模块和 python 加载它们时发生的事情的简明解释，我将非常感激，这样我就可以学会自己诊断这些问题。

* * *

*这是我能想到的所有我认为可能有用的信息。*

`$which python`返回`Python 2.5.4`

`$python print sys.path`使用`Python 2.5.4 / GCC 4.0.1`和返回：

```
'',
'/Library/Frameworks/Python.framework/Versions/2.5/lib/python25.zip'
'/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5'
'/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/plat-darwin'
'/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/plat-mac'
'/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/plat-mac/lib-scriptpackages'
'/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/lib-tk'
'/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/lib-dynload'
'/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site-packages' 
```

`$python2.5 print sys.path`使用`Python 2.5.4 / GCC 4.0.1`和返回与上面相同

`$python2.7 print sys.path`使用`Python 2.7.2 / GCC 4.2.1`和返回：

```
'',
'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip'
'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7'
'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin'
'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac'
'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages'
'/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python'
'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk'
'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old'
'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload'
'/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/PyObjC'
'/Library/Python/2.7/site-packages'
'/Library/Python/2.7/site-packages/PIL' 
```

# jquery - 获取 jQuery 动画 div 的实际高度并将此高度获取到另一个动画 div

> ID：15816428
> 
> 赞同：0
> 
> 时间：2013-04-04T16:15:39.663
> 
> 标签：jquery, jquery-animate

我想获得动画 div (A) 的实际高度并将其提供给另一个动画 div (B)。div A 没有从 CSS 获得的高度，高度是从填充生成的。div B 有一个 CSS 高度，但我想制作动画以获得与 div A 相同的高度。

这就是我所做的，但不起作用：

```
$('#A').data(this, "inHeight", $(this).height()).animate({
    'padding-top' : 30
});
$('#B').animate({
    'height': div.data("inHeight")
}); 

$('#A').data(this, "outHeight", $(this).height()).animate({
    'padding-top' : 90
});
$('#B').animate({
    'height': div.data("outHeight")
}); 
```

谢谢你的帮助！

* * *

测试：http: [//jsfiddle.net/A2bNm/](http://jsfiddle.net/A2bNm/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:22:26.833

您可以使用[jQuery.outerHeight()](http://api.jquery.com/outerHeight/)

> 描述：获取匹配元素集中第一个元素的当前计算高度，包括填充、边框和可选的边距。如果在一组空元素上调用，则返回值的整数（不带“px”）表示形式或 null。

所以你可以试试这个：

```
$('#A').outerHeight(bool-include-margin);//get the div height 
```

# php - 如何使 codeigniter 网站多语言阿拉伯语和法语

> ID：15816436
> 
> 赞同：0
> 
> 时间：2013-04-04T16:15:54.667
> 
> 标签：php, codeigniter, multilingual

我已经研究了好几个小时，但我找不到一个清晰、有效的方法来解决我的问题。

我有 2 个阿拉伯语和法语模板（页眉 + 内容 + 页脚）。对于每种语言，我的控制器中有不同的页面和不同的功能。如何制作多语种网站？

传递我的链接`?lang=fr`或`?lang=ar`不损害我的链接，类似于：`localhost/site/controleur/method/id`

Ps：我正在使用 mysql db 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:56:48.897

是的，您可以创建一个单独的`lang`文件夹（针对每种语言），其中包含具有相似键的文件，但值（文本）将根据语言类型而定。然后根据标识符的请求包含该特定语言文件（文件夹）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:54:36.597

为什么不根据语言为控制器使用[子文件夹？](http://ellislab.com/codeigniter/user-guide/general/controllers.html#subfolders)

```
controllers/ar/my_controller.php
controllers/fr/my_controller.php

http://www.example.com/fr/home
http://www.example.com/ar/home 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:04:07.457

为什么您的网站需要不同的页面？IMO，您需要根据语言切换模板或加载不同的控制器

以防万一，如果你刚刚开始你的项目，你可能会发现[Bonfire](http://cibonfire.com/)更适合这个。它以更简单的方式支持模板化和国际化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T17:18:04.920

Codeigniter 已经提供了多语言工具，它的国际化支持，

您只需要一个控制器、语言文件和视图。

根据选择的语言，您的控制器将加载相应的语言文件，视图文件将显示语言文件中编写的模板。

您的语言文件将如下所示

```
$lang['language_key'] = "The actual message to be shown"; 
```

您的控制器，siteLang 的值可以从 url 中检索，或者您可以将其作为 cookie 存储在浏览器中。

```
function home(){ 
    $this->lang->load('home', $this->siteLang);   
} 
```

您的视图看起来像这样，通过这个，language_key 的值将显示在该控制器上。

```
<?php echo $this->lang->line('language_key'); ?> 
```

一些关键点，例如 lang 文件的命名法等，您可以在以下链接 [http://ellislab.com/codeigniter/user-guide/libraries/language.html找到更多相关信息](http://ellislab.com/codeigniter/user-guide/libraries/language.html)

# internet-explorer - IE 版本低于 9 的不带 javascript 的 nth-child(3n+1) 的替代方案

> ID：15816442
> 
> 赞同：1
> 
> 时间：2013-04-04T16:16:42.463
> 
> 标签：internet-explorer, css, css-selectors

我有一个要求，我为第 1、第 4、第 7 等 div 元素制作 margin-left:0 。我用过这段代码：

```
div:nth-child(3n+1) {
        margin-left: 0;
    } 
```

但这在 9 以下的 IE 版本中不起作用。虽然我可以使用 javascript 修复它，但我需要一些使用 css 的解决方案。我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:20:47.903

您无法`:nth-child()`使用 CSS 选择器模拟复杂的公式，除非您单独为每个元素重复硬编码选择器，这无论如何都会浪费时间，因此您最好使用 JavaScript（例如，为这些元素添加一个类，然后选择那堂课）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:25:07.840

如果不使用 javascript，最简单的方法是使用所需的 CSS 向相关 div 添加一个类。

HTML

```
<div class='my_class'>Hello World</div> 
```

CSS

```
.`my_class{margin-left: 0;}` 
```

# c# - 将虚拟文件拖入 Microsoft Office Communicator 2007

> ID：15816448
> 
> 赞同：2
> 
> 时间：2013-04-04T16:17:02.487
> 
> 标签：c#, .net, drag-and-drop, office-communicator

我一直在尝试制作一个应用程序，该应用程序允许我将文件拖到 Microsoft Office Communicator 中的 IM 对话窗口中，但没有成功。我实现/尝试了这两篇关于创建用于拖动的虚拟文件的文章：

1.  [将虚拟文件传输到 Windows 资源管理器](http://www.codeproject.com/Articles/23139/Transferring-Virtual-Files-to-Windows-Explorer-in)
2.  [.NET 的开发人员友好的虚拟文件实现改进！](http://blogs.msdn.com/b/delay/archive/2009/11/04/creating-something-from-nothing-asynchronously-developer-friendly-virtual-file-implementation-for-net-improved.aspx)

当我拖入 Windows 资源管理器时，这两个都很好用，但是如果我拖入 IM 窗口，它看起来会起作用，即它显示要传输的文件和大小等......但是当一个人接受它时，它只是挂在那里，直到它失败并显示类似以下的消息：

> 无法将“Alphabet.txt”发送到姓氏、名字。这可能是由于防火墙限制或网络问题。请再试一次。如果您需要进一步的帮助，请联系您的系统管理员。

![在此处输入图像描述](https://i.stack.imgur.com/pScwp.png)

如果我首先将文件拖到 Windows 资源管理器中，然后从资源管理器拖到 IM 窗口中，它工作正常。有人对这里可能发生的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:16:23.790

事实证明，Microsoft Communicator 需要 FileName 和 FileDrop 数据格式。如果您提供这些，那么它将起作用。

# jquery - 查询移动元素（选择控件）的数量不加起来

> ID：15816449
> 
> 赞同：0
> 
> 时间：2013-04-04T16:17:05.717
> 
> 标签：jquery, html, jquery-mobile

当按他们的类遍历我的 jQuery 移动页面上的所有表单元素时，我看到许多没有 ID 的额外元素。这不是几个控件的主要问题，但是页面上有很多选择，大概有很多浪费的代码，循环内的代码无缘无故地运行。

例如，一个带有单个选择控件的 jQuery 移动页面，如下所示：

```
<select name="myName" id="myId" class="myClass"/></select> 
```

...和一个看起来像这样的 javascript 循环：

```
for(g=0;g<$('.myClass').length;g++){
  alert(g + " - " + $('.myClass')[g].id);
} 
```

...产生两个警报：

*   0 -
*   1 - 我的身份证

任何人都知道为什么有两个元素，为什么第一个元素没有 ID？除了原来的“标准”控件之外，它似乎与 jQuery Mobile 创建了一个新的精美控件有关。

如果是这种情况，我可以为我的选择器使用什么，以便我只选择实际可见的选择控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:20:43.930

像这样循环它们：

```
$("select.myClass").each(function() {
    console.log($(this).attr("id"));
}); 
```

这将输出带有类的每个元素的 ID`myClass`

演示：http: [//jsfiddle.net/ypWss/2/](http://jsfiddle.net/ypWss/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:46:58.500

简单的方法，使用`$.each()`.

**[演示](http://jsfiddle.net/Palestinian/y79JW/)**

```
// Find all selects with .myClass
var list = $(document).find('select.myClass');

// Read the result
$.each(list, function () {
 console.log($(this).attr('name')+' : '+$(this).attr('id'));
}); 
```

* * *

您可以将它们推入一个数组。

**[演示](http://jsfiddle.net/Palestinian/vkkxW/)**

```
// Create an Array
var selects = [];

// Find all selects with .myClass
var list = $(document).find('select.myClass');

// Push id of each select
if (list.length > 0) {
 $.each(list, function () {
  selects.push({
   'id': $(this).attr('id')
  });
 });
}

// Read the array
$.each(selects, function (i, v) {
 console.log(v.id);
}); 
```

# android - 将字符串从一个活动传递到另一个活动活动

> ID：15816454
> 
> 赞同：-1
> 
> 时间：2013-04-04T16:17:32.860
> 
> 标签：android

我正在寻找实现以下功能的最佳方法：

*   我有一个在应用程序启动时启动的主 Activity。此活动中的一项是名为“其他制造商”的 TextView。
*   当用户选择此 TextView 时，OnClickListener 会启动另一个活动，允许用户在我的数据库中搜索可用的制造商。
*   一旦用户选择了制造商，应用程序应将用户返回到主 Activity，并在 TextView 中显示相应的制造商。

我得到了一切工作，但我被困在如何将选定的制造商传递回主活动并填写 TextView。我到处搜索，但主要找到了如何将价值从一项活动传递到一项新活动的示例。

**我需要的是如何将一个活动中的值传递给先前打开的活动并将该值写入 TextView。**

我应该使用片段吗？

如果您可以与我分享一个示例或指出一些示例，我将不胜感激。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:50:17.427

> 我需要的是如何将一个活动中的值传递给先前打开的活动并将该值写入 TextView。

您需要进行两项常规更改才能执行此操作：

1.  在主 Activity 中，使用 覆盖[`onActivityResult()`](https://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)并启动第二个 Activity [`startActivityForResult()`](https://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)。
2.  在第二个 Activity 中，[`setResult()`](https://developer.android.com/reference/android/app/Activity.html#setResult%28int%29)在用户选择制造商后调用。

简要说明：

*   `startActivityForResult()`启动一个活动，但告诉当前活动期待某种类型的结果。
*   `setResult()`将子 Activity 的结果传递回其父 Activity。
*   `onActivityResult()`收到结果。

本[教程](http://www.vogella.com/articles/AndroidIntent/article.html#usingintents_sub)有代码示例和更详细的解释。

* * *

写完所有这些后，您也许可以使用 AutoCompleteTextView 并将其链接到您的数据库，而不是使用单独的 Activity。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:20:59.223

您可以使用`Bundle`an`Intent`或`SharedPreferences` `Bundle`and`Intent`具有允许您存储和检索所需实例的`getString`and方法。`putString``String`

# qooxdoo - qooxdoo：向网格布局添加工具栏？

> ID：15816455
> 
> 赞同：1
> 
> 时间：2013-04-04T16:17:35.403
> 
> 标签：qooxdoo

如何将工具栏添加到网格布局？

```
var container = new qx.ui.container.Composite();
var layout = new qx.ui.layout.Grid(2,2);
container.setLayout(layout);
var w1 = new qx.ui.core.Widget();

var toolbar = new qx.ui.toolbar.ToolBar();
var btn_status = new qx.ui.toolbar.Button("I am a button");
toolbar.add(btn_status);

container.add(w1, {row: 0, column: 0});
// w1.add(toolbar); // <----
container.set({backgroundColor : "white"});
this.getRoot().add(container, {edge: 0}); 
```

如果我取消注释唯一的注释行，则布局将为空白，不会提示错误。

我错过了什么 ？我正在努力`qx.Desktop`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:23:10.650

不需要中间小部件 ( `var w1 = new qx.ui.core.Widget();`)。其实`qx.ui.core.Widget`不是容器，它没有`add()`方法。Javascript 控制台上可能显示错误。

您可以将工具栏直接添加到合成中。

```
container.add(toolbar, {row: 0, column: 0}); 
```

# .net - 两个项目的 ClickOnce 部署，每个项目都有自己的配置文件

> ID：15816459
> 
> 赞同：2
> 
> 时间：2013-04-04T16:17:56.597
> 
> 标签：.net, visual-studio-2010, clickonce, app-config, configuration-files

我正在使用 VS 2010 SP1。

我有两个项目：

*   POS（WPF 应用程序）
*   同步（控制台应用程序）
*   Lib（类库）

我添加了 Sync 和 lib 程序集作为对 POS 项目的引用。在运行时，POS 应用程序使用 Diagnostics.Process.Start() 运行 Sync 应用程序。

在开发过程中，一切都按预期完美运行，但是在使用 ClickOnce 发布 POS 应用程序时，我发现**POS.exe.config.deploy**已发布并且**Sync.exe.deploy**已发布，但问题是**Sync.exe.config.deploy**未发布。

我去了解决方案资源管理器并将**Build Action**更改为**None/Content**和**Copy 以将输出目录**更改为**Copy If Newer/Do not Copy**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T00:26:27.483

您如何让 ClickOnce 部署包含 Sync.exe？您必须有对 exe 的链接引用，对吗？

对于 C/O，Sync.exe 是一个辅助程序集，它不知道配置文件。您需要将配置文件的引用添加到 POS 项目。为此，请确保首先构建 Sync.exe，构建它，然后在 \bin\Release 文件夹中添加对配置文件的引用。您可以尝试将其作为链接参考添加到 POS 项目中，以便每次都将其拾取。如果这不起作用，您可能只需将其复制到 POS 项目并直接包含它。

# php - 在数组中保持正确的顺序

> ID：15816461
> 
> 赞同：0
> 
> 时间：2013-04-04T16:18:03.440
> 
> 标签：php, arrays

我有`$array_one`以下数据：

```
Array
(
    [0] => stdClass Object
        (
            [postId] => 412812
            [shortcode] => 4sF9
         )
) 
```

有很多具有更多键的数据。

现在的问题是时不时地`array_one`改变它的顺序。例如，它会在没有新数据的情况下对键`7`进行键控并将其他所有内容向下推。`0`

我想做的是在数组中显示所有内容，但是在更改顺序时不要更改其顺序，因此我的帖子显示将具有静态帖子顺序。

我尝试使用以下逻辑创建另一个数组：

1.  声明一个名为 的新空数组`$array_two`。
2.  创建一个检查是否`array_two`所有内容都为`array_one`（已使用：）的函数`in_array()`。第一次，它不是，因为`array_two`最初是空的。
3.  下一步是，如果`array_one`没有所有内容，`array_two`则将所有内容从`array_one`to复制`array_two`并显示`array_two`（使用：）`array_push()`。
4.  此时，`array_two`将与 相同`array_one`。

我有其他条件说，如果不是所有的帖子`array_one`都不相同，`array_two`那么只能从中获取一个独特的帖子`array_one`并将其放入`array_two`其他所有内容中保持不变`array_two`。

现在的问题是，在`array_two`保存了所有内容之后`array_one`，它以 empty 重新开始`array_two`。

我只是想不出任何声明`array_two`只会运行一次的地方。换句话说，我怎样才能做到这一点，所以每次页面刷新时它都不会重新开始。

**已编辑：** array_one 正在通过更改其顺序的 API 获取数据，并且正在使用的方法是`json_decode($result)`

我希望我现在已经说清楚了。

# configuration - wso2 身份服务器 - 删除后重新添加自注册

> ID：15816464
> 
> 赞同：1
> 
> 时间：2013-04-04T16:18:16.673
> 
> 标签：configuration, wso2, wso2is

在设置新的 WSO2 Identity Server 4.1.0 时，我被要求禁用自注册。我按照[wso2 身份服务器中的步骤操作 - 用户自我注册](https://stackoverflow.com/questions/11429196/wso2-identity-server-user-self-registration)，效果很好。不过，我现在需要将自我注册添加回系统。

我添加了以下功能存储库：[http](http://dist.wso2.org/p2/carbon/releases/4.0.3) : //dist.wso2.org/p2/carbon/releases/4.0.3（这似乎是正确的）并尝试添加“身份自我注册功能”v4.0.3（已删除的版本）回到系统中。我收到一个对话框，指出“在安装功能之前必须审查并接受以下许可证。” 没有列出许可证。当我按下 Next 时，它什么也没做。Back & Cancel 都可以正常工作，但我无法继续。

我什至尝试关闭系统并从 zip 分发中复制功能并重新启动它。这似乎没有向系统重新注册它们。

从 zip 中复制回来的功能是以下位置下的所有内容：

```
repository/components/features/org.wso2.carbon.identity.self.registration_4.0.3
repository/components/features/org.wso2.carbon.identity.self.registration.server_4.0.1
repository/components/features/org.wso2.carbon.identity.self.registration.ui_4.0.3 
```

任何有关重新启用此功能的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:30:28.780

仍然不确定为什么许可证接受对话没有显示这可能是一个错误。无论如何，我已经设法重新添加了该功能。对于那些在我之后尝试执行此操作的人，这里是所涉及的步骤。

1.  停止服务
2.  备份（为了安全起见）
3.  将以下结构从全新解压缩复制到安装中的相应位置
    *   存储库/组件/功能/org.wso2.carbon.identity.self.registration_4.0.3
    *   存储库/组件/功能/org.wso2.carbon.identity.self.registration.server_4.0.1
    *   存储库/组件/功能/org.wso2.carbon.identity.self.registration.ui_4.0.3
4.  将 repository/components/artifacts.xml 中的工件大小计数增加 3 并向其中添加以下内容

    ```
    <artifact classifier='org.eclipse.update.feature' id='org.wso2.carbon.identity.self.registration' version='4.0.3'>
      <properties size='1'>
        <property name='download.size' value='836'/>
      </properties>
      <repositoryProperties size='1'>
        <property name='artifact.folder' value='true'/>
      </repositoryProperties>
    </artifact>
    <artifact classifier='org.eclipse.update.feature' id='org.wso2.carbon.identity.self.registration.ui' version='4.0.3'>
      <properties size='1'>
        <property name='download.size' value='940'/>
      </properties>
      <repositoryProperties size='1'>
        <property name='artifact.folder' value='true'/>
      </repositoryProperties>
    </artifact>
    <artifact classifier='org.eclipse.update.feature' id='org.wso2.carbon.identity.self.registration.server' version='4.0.1'>
      <properties size='1'>
        <property name='download.size' value='933'/>
      </properties>
      <repositoryProperties size='1'>
        <property name='artifact.folder' value='true'/>
      </repositoryProperties>
    </artifact> 
    ```

5.  将以下内容添加到 repository/components/configuration/org.eclipse.update/platform.xml

    ```
    <feature id="org.wso2.carbon.identity.self.registration.ui" url="features/org.wso2.carbon.identity.self.registration.ui_4.0.3/" version="4.0.3">
    </feature>
    <feature id="org.wso2.carbon.identity.self.registration.server" url="features/org.wso2.carbon.identity.self.registration.server_4.0.1/" version="4.0.1">
    </feature>
    <feature id="org.wso2.carbon.identity.self.registration" url="features/org.wso2.carbon.identity.self.registration_4.0.3/" version="4.0.3">
    </feature> 
    ```

6.  将以下内容添加到 repository/components/configuration/org.eclipse.equinox.simpleconfigurator/bundles.info

    ```
    org.wso2.carbon.identity.user.registration,4.0.1,plugins/org.wso2.carbon.identity.user.registration_4.0.1.jar,4,true
    org.wso2.carbon.identity.user.registration.stub,4.0.0,plugins/org.wso2.carbon.identity.user.registration.stub_4.0.0.jar,4,true
    org.wso2.carbon.identity.user.registration.ui,4.0.3,plugins/org.wso2.carbon.identity.user.registration.ui_4.0.3.jar,4,true 
    ```

7.  重新启动您的服务并验证注册链接是否显示在起始页面上，并且您可以创建一个新帐户。

# flyway - Flyway 有没有办法在同一个项目中通过 MAVEN 和 API 使用它

> ID：15816468
> 
> 赞同：0
> 
> 时间：2013-04-04T16:18:28.107
> 
> 标签：flyway

在我们的项目中，我想使用 flyway 框架进行数据库交付过程

知道

A）交付团队和应用程序没有相同的用户来访问数据库（交付团队使用允许创建/截断表的数据库登录）但应用程序没有这样做的权限
--> API 将仅用于检查版本
--> 交付团队将使用 maven 启动迁移过程

B）我们想使用特定的“迁移”表（不是 schema_version）

C）为了避免任何问题，我希望在 Maven 和 API 之间共享此设置（表的名称）

1）有没有办法共享一些设置（表名，jdbcUrl）在maven和API之间共享

2）API中是否有更简单的方法来检查数据库是否是最新的我使用类似的东西

if (flyway.info().pending().length > 0) System.out.println("数据库未打补丁")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:16:32.853

1) 是的。只需对它们进行相同的配置。属性名称相同。

2) 不，这是目前最简单的方法。

# ios - 我会不会漏水

> ID：15816472
> 
> 赞同：0
> 
> 时间：2013-04-04T16:18:43.717
> 
> 标签：ios, objective-c, memory-leaks

从 xcode执行操作时，我收到泄漏警告，`Analyze`警告如下图所示

![在此处输入图像描述](https://i.stack.imgur.com/lfbpW.png)

但是，如果我`Instrument`用来检查，我根本不会收到“泄漏”的警告。图片如下所示 ![在此处输入图像描述](https://i.stack.imgur.com/zKGLA.png)

问题：我会不会漏水。

常见的.m

```
void drawLinearGradient(CGContextRef context, CGRect rect, CGColorRef startColor, CGColorRef  endColor) {
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGFloat locations[] = { 0.0, 1.0 };

    NSArray *colors = [NSArray arrayWithObjects:(__bridge id)startColor, (__bridge id)endColor, nil];

    CGGradientRef gradient = CGGradientCreateWithColors(colorSpace, (__bridge CFArrayRef) colors, locations);

    CGPoint startPoint = CGPointMake(CGRectGetMidX(rect), CGRectGetMinY(rect));
    CGPoint endPoint = CGPointMake(CGRectGetMidX(rect), CGRectGetMaxY(rect));

    CGContextSaveGState(context);
    CGContextAddRect(context, rect);
    CGContextClip(context);
    CGContextDrawLinearGradient(context, gradient, startPoint, endPoint, 0);
    CGContextRestoreGState(context);
    CGGradientRelease(gradient);
    //CGColorSpaceRelease(colorSpace);--------> this will fix leaking

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:12:47.860

*   展开那个小三角形，Xcode 会显示导致泄漏的执行路径

*   是的，该代码正在泄漏色彩空间

*   分配图确实看起来像泄漏，但是对于色彩空间来说这是非常陡峭的，除非你要创建*很多*它们！

*   [快照分析](http://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using-heapshot-analysis-to-find-undesirable-memory-growth/)可能会有所帮助。

# xml - 将 Joomla 模块参数值传递到 XML 文件中

> ID：15816474
> 
> 赞同：1
> 
> 时间：2013-04-04T16:18:46.117
> 
> 标签：xml, flash, joomla, module

我正在尝试做一个 Flash 横幅模块，其中所有的图像、url 和文本都来自一个 xml 文件。我们想保留它们作为参数，所以我们在后端输入图像详细信息，它可以自动进入 XML，然后显示在 flash 横幅上。

请提供任何解决方案或指导来解决此问题。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:39:02.927

看看[http://docs.joomla.org/Generating_XML_output](http://docs.joomla.org/Generating_XML_output)。您很可能会调整它以与[http://docs.joomla.org/API15:JFile/write](http://docs.joomla.org/API15:JFile/write)一起使用来创建 XML 文件。

# python - 在 Python 中将 .csv 文件合并到每个唯一键（例如，人）的一行

> ID：15816475
> 
> 赞同：0
> 
> 时间：2013-04-04T16:18:49.740
> 
> 标签：python, csv

## 是）我有的

我有一个 .csv 文件，其中包含给定日期的员工及其轮班列表，如下所示：

```
Initials,Last,First,ShiftStart,ShiftEnd
BAB,Smith,Bob,10:00a,1:00p
JCJ,Jones,Jill,11:00a,3:00p
JIH,Hernandez,Jose,1:00p,4:00p
BAB,Smith,Bob,1:00p,3:00p
JIH,Hernandez,Jose,5:00p,9:00p
JCJ,Jones,Jill,3:00p,3:30p
JCJ,Jones,Jill,3:30p,5:00p
DJM,Martin,Dominique,8:00a,11:00a 
```

请注意一个人如何可以有多个班次，下一班次的开始时间可能与另一班次的结束时间相同，也可能不同，并且每个员工都由他们的姓名首字母标识为唯一标识符（适合用作关键。）

## 我想要的是

我想合并这个 .csv 文件，以便每个员工只有一行。如果该人有多个班次，则检查一个班次的结束时间是否与另一个班次的开始时间相同，然后合并这些班次，但如果不是，则添加两个新列 2ndShiftStart 和 2ndShiftEnd 并将该数据放在那里。

结果应如下所示：

```
Initials,Last,First,ShiftStart,ShiftEnd,2ndShiftStart,2ndShiftEnd
BAB,Smith,Bob,10:00a,3:00p,,
JCJ,Jones,Jill,11:00a,5:00p,,
JIH,Hernandez,Jose,1:00p,4:00p,5:00p,9:00p
DJM,Martin,Dominique,8:00a,11:00a,, 
```

例如，BAB 工作时间为上午 10 点至下午 1 点，然后是下午 1 点至下午 3 点，因此生成的 .csv 将他列为上午 10 点至下午 3 点工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:27:02.417

```
#!/usr/bin/env python
import sys
##Initials,Last,First,ShiftStart,ShiftEnd
s='''BAB,Smith,Bob,10:00a,1:00p
JCJ,Jones,Jill,11:00a,3:00p
JIH,Hernandez,Jose,1:00p,4:00p
BAB,Smith,Bob,1:00p,3:00p
JIH,Hernandez,Jose,5:00p,9:00p
JCJ,Jones,Jill,3:00p,3:30p
JCJ,Jones,Jill,3:30p,5:00p
DJM,Martin,Dominique,8:00a,11:00a'''

db = {}
for line in s.split('\n'):
     Initials,Last,First,ShiftStart,ShiftEnd = line.split(',')
     if Initials in db:
         db[Initials][2].append((ShiftStart,ShiftEnd))
     else:
         db[Initials] = (Last,First,[(ShiftStart,ShiftEnd)])
for Initials,v in db.iteritems():
    Last,First,shifts = v
    sys.stdout.write(Initials + ',')
    sys.stdout.write(Last + ',' + First)
    for shift in shifts:
        ShiftStart,ShiftEnd = shift
        sys.stdout.write(',' + ShiftStart + ',' + ShiftEnd)
    sys.stdout.write('\n') 
```

或者，你可以做一个非常面向对象的程序：

```
import sys
##Initials,Last,First,ShiftStart,ShiftEnd
s='''BAB,Smith,Bob,10:00a,1:00p
JCJ,Jones,Jill,11:00a,3:00p
JIH,Hernandez,Jose,1:00p,4:00p
BAB,Smith,Bob,1:00p,3:00p
JIH,Hernandez,Jose,5:00p,9:00p
JCJ,Jones,Jill,3:00p,3:30p
JCJ,Jones,Jill,3:30p,5:00p
DJM,Martin,Dominique,8:00a,11:00a'''

class Shift(object):
    def __init__(self,ShiftStart,ShiftEnd):
        self.ShiftStart,self.ShiftEnd = ShiftStart,ShiftEnd
    def __str__(self):
        return '%s,%s' % (ShiftStart,ShiftEnd)

class Person(object):
    def __eq__(self, p):
        if self.Initials != p.Initials:
            return False
        if p.Last is not None and self.Last != p.Last:
            return False
        if p.First is not None and self.First != p.First:
            return False
        return True
    def __init__(self,Initials,Last,First):
        self.Initials,self.Last,self.First = Initials,Last,First
        self.Shifts = []
    def __str__(self):
        return '%s,%s,%s' % (self.Initials,self.Last,self.First)

def AddShift(people, person, shift):
    try:
        person = people[people.index(person)]
    except ValueError:
        people.append(person)
    person.Shifts.append(shift)

people = []
for line in s.split('\n'):
     Initials,Last,First,ShiftStart,ShiftEnd = line.split(',')
     AddShift(people, Person(Initials,Last,First), Shift(ShiftStart,ShiftEnd))

for person in people:
    print '%s,%s' %(person, ','.join(map(str,person.Shifts))) 
```

# javascript - 缩小和优化 js 代码的技术，它们真的有效吗？

> ID：15816481
> 
> 赞同：0
> 
> 时间：2013-04-04T16:19:18.597
> 
> 标签：javascript, performance, optimization

我想知道以下任何技术是否会增加任何性能：

*   !!variable - 我在 jquery 及其插件中看到了这个 - 转换为 bool

*   null == 变量 - 如果您错过第二个等号，这可能很有用。但是SO中有人声称这是因为gzip优化

*   变量的缩小和缩小 - 关于这个我对 IE 感兴趣，它可以从变量的缩小中受益吗

哪些是真的，哪些是无用的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:20:38.350

是的，如果你不尝试自己做，而是使用像优秀[的谷歌的 Closure Compiler](https://developers.google.com/closure/compiler/)这样的缩小器，缩小可以构建更小的文件。

关于执行性能，增益并不明显，甚至可能是轻微的负数，这取决于它是如何完成的。但这不是目标：目标是节省带宽。

除非您有足够的信心可以做得比经过验证的那些提供的更好，否则没有理由自己编写一个缩小器。这不是一件容易的事。

现在，看看你的第一个特定技巧（两个第一个命题），它们对于缩小几乎没有用。

注意 JS 缩小是独立于 JS 引擎的，这里没有具体的 IE 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:21:55.293

缩小作品。主要目标是使生成的 JS 文件更小，以便页面在加载 js 资源时不会使用那么多带宽。诸如 Google 的 Closure Compiler 之类的缩小器可以通过执行诸如消除死代码之类的任务来走得更远，这可以进一步缩小代码。

**更新**

您的前两个示例并不真正适用于缩小，并且性能节省可以忽略不计。正如我之前提到的，Google 的 Closure Compiler 将执行死代码消除。但它还可以做的是执行函数和不断内联，这可能会为您提供一些性能优势，但据我所知，即使是最激进的优化也不会做更多的事情。也就是说，我不知道有任何缩小器可以将您的代码转换为性能更高的代码。我不知道 IE 会从中受益多少，但我想说的是，由于代码确实没有被积极地转换为性能更高的代码，因此不会产生太大的影响。也许变量的缩小意味着浏览器内的符号表中占用的内存更少，但我没有

# sql - 导出到不包含创建数据库的 .SQL 文件

> ID：15816482
> 
> 赞同：0
> 
> 时间：2013-04-04T16:19:21.970
> 
> 标签：sql, sql-server-2008-r2

有没有办法从我的数据库生成一个不包含 CREATE DATABASE 代码的 .sql 文件？

问候 T。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:20:52.563

是的，如果您启动生成脚本向导并在第一步询问您是否要编写整个数据库或特定对象的脚本，请选择特定对象选项，然后勾选所有框以选择所有对象。

生成的脚本将包括数据库中的所有数据库对象，但不包括数据库本身。

# ruby-on-rails - respond_to 上的 Rails 错误

> ID：15816486
> 
> 赞同：1
> 
> 时间：2013-04-04T16:19:29.690
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authentication, respond-to

我为学习 Rails 创建了一个简单的用户身份验证：

```
class UsersController < ApplicationController
   def new
     @user = User.new
   end

   def create
     respond_to do |format|
        if @user.save
           format.hmtl {redirect_to root_url}
        else
           format.hmtl {render 'new'}
        end
    end
 end 
```

如果我创建一个没有块 respond_to 和 format.html 的新用户一切正常（在数据库中我有创建的用户并且页面被重定向）。使用此代码，创建了用户，但我有以下错误（并且我没有重定向）：

```
Completed 500 Internal Server Error in 218ms

NameError (uninitialized constant Mime::HMTL):
   app/controllers/users_controller.rb:16:in `block in create'
   app/controllers/users_controller.rb:14:in `create' 
```

PS：我想要 respond_to 和 format 因为我想添加 format.json 方法

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:22:25.460

您有一个错字 - 更改`format.hmtl`为`format.html`

# c# - 引用和修改 Game1 是不好的做法吗？

> ID：15816488
> 
> 赞同：2
> 
> 时间：2013-04-04T16:19:33.480
> 
> 标签：c#, xna

我需要从不同的类更改多个 Game1 变量。我一直在这样做：

```
 public class Game1 : Microsoft.Xna.Framework.Game
    {
        public int test1;
        public int test2;
    }

    public class Player
    {
        public Player(Game1 game)
        {
            game.test1 = 5;
            game.test2 = 10;
        }
    } 
```

这是不好的做法，如果是这样，还有其他方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T16:21:39.070

> 这是不好的做法，如果是这样，还有其他方法吗？

是和不是。从另一种类型修改一种类型的状态通常是合适的。

话虽如此，使用两个公共领域来做到这一点是我认为不好的做法。至少，您应该将这些切换到属性。如果“test1”和“test2”是相关值，并且总是一起更改，则提供一个公共方法将适合设置这些值。

如图所示，使用公共字段的缺点是您无法验证值。任何人（包括`Player`）都完全有可能将您的字段设置为不适当的值。如果您要共享代码，还会存在版本控制问题（例如，更改为属性是 API 的重大更改）。

您希望其他类更改的任何状态（变量）都应始终以您的类可以控制的方式公开。属性或方法允许您执行此操作。即使现在不需要这样做，为未来设计也是一种更好的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T18:04:14.000

我很高兴你没有使用单例，或者制作所有东西`static`。

传递对“父”对象的引用是非常好的做法：使依赖关系清晰。

但是，我不建议在`Game1`任何地方简单地传递引用。由于游戏通常就其包含的对象而言相对较大/复杂，因此它可能使每个对象的依赖关系/预期访问不清楚（因为现在每个对象都可以触及游戏中的所有内容）。有时将对象逻辑拆分到父容器中会更有意义：

```
public class Game1
{
    public readonly PlayerData playerData;
    public readonly EnemyData enemyData;
    //...
} 
```

并通过这些容器更严格地控​​制访问。同样，这取决于您的范围/大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:59:03.837

根据您的要求，另一种选择可能是将这些变量作为静态对象存储在静态类中。然后可以从所有类访问它们，只要它们是同一项目的一部分。

例如：

```
public static class Helper
{
    public static int test1;
    public static int test2;
} 
```

用法：

```
public class Player
{
    public Player()
    {
        Helper.test1 = 5;
        Helper.test2 = 10;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T21:15:25.070

它违背了[信息隐藏](http://en.wikipedia.org/wiki/Information_hiding)，这是 OOP 的基本原则之一。一个类通常应该负责管理自己的状态，而不是委托，或者更糟的是，与其他人分担这个责任。这只是一个指导方针，应遵循适当的判断。

在摘要中，这是您要支付的罚款：

*   您在 Game1 和另一个类之间引入了一种双向绑定，而不是单向绑定。这使您的设计更难推理。
*   您正在与另一个班级分担这些领域的责任。这意味着您不能简单地查看 Game1 类来确定这些字段如何更改，而是查看任意数量的类。
*   每个将引用 Game1 的类也将能够更改这些变量。这意味着您拥有的类越多，就越难推断这些变量如何变化。
*   由于现在可以访问 Game1 的每个类都可以使用这些变量，因此删除它们或更改它们的类型变得非常困难，因为现在您还必须更改所有这些其他类。

OOP 就是将一个复杂的过程划分为不同的角色，这些角色可以很容易地在孤立的情况下进行推理。公共状态意味着共享状态，角色之间共享的越多，它们就越模糊。

在某些情况下，公共领域是有意义的。例如，一个简单的 3D Point 类可能如下所示：

```
class Point { public int X; public int Y; public int Z; } 
```

这没关系，因为该类没有任何内部逻辑；它只是一个容器，它只包含这三个密切相关的值。这种类的一个例子是 XNA 中的[Vector2 类](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.vector2_members.aspx)，它将其状态（X 和 Y）公开为公共字段。

# powershell - 嵌套集合上的选择对象

> ID：15816491
> 
> 赞同：20
> 
> 时间：2013-04-04T16:19:39.963
> 
> 标签：powershell, tfs

我正在编写一个 Powershell cmdlet 来列出 TFS 中的变更集。我成功查询 TFS 并获得了一组变更集，但希望返回仅包含几个属性的简化对象。我可以`Select-Object`像这样使用...

```
$changesets | Select-Object ChangeSetId, Owner, Comment 
```

我想添加的最后一个属性`Changes`是一个更改数组的属性。我也想简化这些对象。我正在尝试这个，但它没有返回我想要的......

```
$changesets | Select-Object `
    ChangeSetId,
    Owner,
    Comment,
    @{Name="Changes"; Expression={ $_.Changes | Select-Object ChangeType, ServerItem }} 
```

有没有办法处理嵌套集合`Select-Object`？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2016-03-02T12:37:58.207

您可以使用cmdlet`-ExpandProperty`的参数。`Select-Object`它将扩展集合并将所选属性从父对象添加到子对象：

```
$changesets | Select-Object ChangeSetId, Owner, Comment,
    @{Name="Changes"; Expression={ $_.Changes | Select-Object ChangeType, ServerItem }} |
Select-Object -Property * -ExcludeProperty Changes -ExpandProperty Changes 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-03-02T10:36:24.107

您的表达式语法不太正确，您需要在表达式和代码块之间使用等号 ("=")。

```
$changesets | Select-Object `
ChangeSetId,
Owner,
Comment,
@{Name="Changes"; Expression={ $_.Changes | Select-Object ChangeType, ServerItem }} 
```

如果您希望嵌套对象成为顶级元素，您也可以这样做......

```
$changesets | Select-Object `
ChangeSetId,
Owner,
Comment,
@{Name="ChangeType"; Expression={ $_.Changes.ChangeType}},
@{Name="ServerItem"; Expression={ $_.Changes.ServerItem }} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-04T17:39:11.377

我可能会为内部集合中的每个项目展开内部集合并输出一次。像这样的东西（未经测试）：

```
$changesets | foreach-object {
  $changeSetItem = $_
  $changeSetItem.Changes | foreach-object {
    $changeItem = $_
    new-object PSObject -property @{
      "ChangeSetId" = $changeSetItem.ChangeSetId
      "Owner" = $changeSetItem.Owner
      "Comment" = $changeSetItem.Comment
      "ChangeType" = $changeItem.ChangeType
      "ServerItem" = $changeItem.ServerItem
    }
  }
} 
```

账单

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-01-11T09:01:55.663

或者，将更改数组压缩为字符串：

```
$changesets = ConvertFrom-Json '[{"ChangeSetId":1,"Owner":"foo","Comment":"bar","Changes":[{"ChangeType":"la", "ServerItem":"some"}, {"ChangeType":"so", "ServerItem":"stuff"}]}, {"ChangeSetId":2, "Owner":"bar", "Comment":"baz", "Changes":[{"ChangeType":"ti", "ServerItem":"other"}, {"ChangeType":"doh", "ServerItem":"stuff"}]}]'
$changesets | % {`
    [pscustomobject]@{
    ChangeSetId = $_.ChangeSetId
    Owner       = $_.Owner
    Comment     = $_.Comment
    Changes     = ($_.Changes | Select @{Name = "foo"; Expression = {$_.ChangeType + ' ' + $_.ServerItem}} | Select -ExpandProperty foo) -join "; "
  }
} 
```

```
ChangeSetId Owner Comment Changes
----------- ----- ------- -------
          1 foo   bar     la some; so stuff
          2 bar   baz     ti other; doh stuff 
```

# java - 仅使用静态字段的 Java 注释

> ID：15816495
> 
> 赞同：0
> 
> 时间：2013-04-04T16:19:47.933
> 
> 标签：java, annotations

有没有办法在 Java 中定义注释，使其只能与静态字段一起使用？

在[这个](https://stackoverflow.com/questions/5778326/define-annotation-only-applicable-to-static-methods)SO question 中，有人问了几乎相同的问题，但是关于静态方法。字段也一样吗？自从提出这个问题以来的两年里，有什么变化吗？

此外，[这个](https://stackoverflow.com/questions/3422390/retrieve-only-static-fields-declared-in-java-class)问题的答案显示了一种我可以过滤掉静态变量的方法。但是，我希望我正在构建的代码可以被其他人使用，所以我不希望有人在非静态字段上使用注释，然后不让它为他们工作。我真的很希望能够在他们的 IDE 中给他们一个错误，让他们知道注释只能与静态字段一起使用。

# javascript - Q - Chaining Sync Promises 处理成功和失败

> ID：15816498
> 
> 赞同：1
> 
> 时间：2013-04-04T16:20:00.323
> 
> 标签：javascript, promise, q

这应该很简单，我希望..

我知道如何做基本的承诺链：

```
main = function() {
  returnsAPromise().then(function(data1) {
    return augmentsAndReturnsTheData(data1);
  }).then(function(data2) {
    doesSomethingMeaningfulWithTheData(data2);
  });
}; 
```

*但是，假设我想在最终处理可以同时处理成功和失败*的数据之前添加某种拦截器，例如：

```
promisePrinter = function(promise) {
  var bad, good;

  good = function(data) {
    console.log(['Success', data]);
    return data;
  };
  bad = function(data) {
    console.log(['Failure', data]);
    return data;
  };
  return promise.then(good, bad);
}; 
```

我如何将它包含在我的链中？尝试了几种不同的方法，但我似乎无法让`promisePrinter`fn 像我期望的那样被调用。

蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T07:28:38.623

如评论中所述，执行此操作的方法是`promisePrinter(main())`，或者`return promisePrinter(augmentsAndReturnsTheData(data1))`如果您想将其放在给定步骤中。在 Promise 原型上没有执行此操作的特殊方法，例如 for `then`or `catch`or `finally`，因为您在这里执行了一个非常独特的操作：

*   如果承诺履行（异步返回），则记录成功，然后`return`通过。
*   如果 promise 拒绝（异步抛出），则记录错误，然后`return`从该错误中恢复。（如果你想继续传递错​​误，你会重新抛出它。）

现有`finally`的是您想要的，但并不真正适合，因为它会向前传递错误（如 synchronous `finally`）并且不接受值或错误（如 synchronous `finally`）。

# javascript - 如何在javascript中获取元素的真实位置

> ID：15816503
> 
> 赞同：14
> 
> 时间：2013-04-04T16:20:16.983
> 
> 标签：javascript, dom

![在此处输入图像描述](https://i.stack.imgur.com/3NHnP.png)

我想在 javascript（或 jquery 短代码）中获得我的样式元素的真实 X 和 Y 位置。

```
var offset = obj.offset();
  ox=offset['left']; 
  oy=offset['top']; 

  px=parseInt(obj.css('padding-left')); // padding left
  py=parseInt(obj.css('padding-top')); // padding top
  bx=parseInt(obj.css('border-width') ); // stroke value
  ox=ox+px+bx;
  oy=oy+py+bx; 
```

但是这些代码有时不起作用..

当scool top 或scroll left 改变时我没有得到真正的位置:(

请帮我..

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-11-21T16:15:43.190

您不必使用偏移量。使用现代[`getBoundingClientRect`](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect)功能：

```
function getPosition( element ) {
    var rect = element.getBoundingClientRect();
    return {
        x: rect.left,
        y: rect.top
    };
} 
```

然后你可以像这样使用上面的函数：

```
var element = document.getElementById( 'myElement' );
var pos = getPosition( el );

// Alert position in X axis
alert( pos.x );

// Alert position in Y axis
alert( pos.y ); 
```

适用于所有浏览器

**编辑：**如果您想要元素相对于页面滚动的位置，只需添加`document.body.scrollTop`到 Y 位置和`document.body.scrollLeft`X 位置。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T18:55:55.070

```
 var offset = obj.offset();
      ox=offset['left']; = document.getElementById('Mypicture').offsetLeft;
      oy=offset['top'];  = document.getElementById('Mypicture').offsetTop;
    px=parseInt(obj.css('padding-left')); // padding left
    py=parseInt(obj.css('padding-top')); // padding top
    bx=parseInt(obj.css('border-width') ); // stroke value
    ox=ox+px+bx;
    oy=oy+py+bx;

//Two codes get equal value;  But Not Real clientX ClientY positions.. 
```

//我的html：

```
 <div id="container">
    <img id="Mypicture" src="myimage.jpg"  alt="The source image for paint"/>
    </div>

//My css :

  #Mypicture{
  margin:100px;
  padding:20px;
  border: 20px solid #cacaca;
  }

  #container {
  display:block;
  background:#ffaaff;
  width: 550px;
  padding:50px;
  margin-left:300px;
   } 
```

// 我想在 Document 上获取 Mypicture 的 realx 和 realY 值。// 所有代码都有效 Realx(ox) 返回真值 但 RealY(oy) 接近 10px 为假；

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-04T16:30:48.820

您需要元素相对于文档的偏移量。您必须记住，填充、边距和边框等样式会极大地影响偏移的结果。您可能想要计算偏移量或偏移量。

最后你需要检查你是否正在使用`box-sizing`，它将填充和边框推到内部（最常见的版本`box-sizing: border-box;`）；

```
document.getElementById('cloud').offsetLeft; //offsetTop 
```

只需使用其他样式（加/减）进行调试，直到获得真正的偏移量。我主要通过制作屏幕截图（或使用 OS X 选择性屏幕截图功能）来测试偏移是否正确，以查看是否使用其他样式正确计算了偏移（计算像素）。

这是一个小例子：

**CSS**

```
#cloud {
    height: 500px;
    width: 500px;
    margin: 20px auto;
    border: 1px dotted #CCC;
} 
```

**HTML**

```
<body>
    <div id="cloud">
        <div id="centerBox"></div>
    </div>
</body> 
```

**JavaScript**

```
'use strict';

console.log(document.getElementById('cloud').offsetLeft);
console.log(document.getElementById('cloud').offsetTop); 
```

***输出***

```
main.js: 1 >>> 372
main.js: 2 >>> 20 
```

有趣的是，您可以轻松测试是否`offsetLeft`因为`margin: 20px auto;`. 如果您调整窗口大小，它也会有不同的`offsetLeft`.

# hadoop - 猪拉丁问题

> ID：15816507
> 
> 赞同：0
> 
> 时间：2013-04-04T16:20:29.987
> 
> 标签：hadoop, apache-pig

请帮帮我..它真的很紧急..截止日期临近，我坚持了两周..打破了我的头，但没有结果。我是piglatin的新手。我有一个场景，我必须从 csv 文件中过滤数据。csv 在 hdfs 上，有两列。

```
grunt>> fl = load '/user/hduser/file.csv' USING PigStorage(',') AS (conv:chararray, clnt:chararray);
grunt>> dump f1;
("first~584544fddf~dssfdf","2001")
("first~4332990~fgdfs4s","2001")
("second~232434334~fgvfd4","1000")
("second~786765~dgbhgdf","1000)
("second~345643~gfdgd43","1000") 
```

我需要做的是我只需要提取第一个'〜'符号之前的第一个单词并将其与csv文件的第二列值连接起来。我还需要对返回的连接结果进行分组并计算此类相似行的数量，并创建一个新的 csv 文件作为输出，其中将再次有 2 列。第一列是连接值，第二列是行数。IE

```
("first 2001","2")
("second 1000","3") 
```

等等。

我已经在这里编写了代码，但它只是不起作用。我用过STRSPLIT。它正在拆分输入 csv 文件第一列的值。但我不知道如何提取第一个拆分值。代码如下：

```
convData = LOAD '/user/hduser/file.csv' USING PigStorage(',') AS (conv:chararray, clnt:chararray);

fil = FILTER convData BY conv != '"-1"'; --im using this to filter out the rows that has 1st column as "-1".

data = FOREACH fil GENERATE STRSPLIT($0, '~');

X = FOREACH data GENERATE CONCAT(data.$0,' ',convData.clnt);

Y = FOREACH X GROUP BY X;

Z = FOREACH Y GENERATE COUNT(Y);

var = FOREACH Z GENERATE CONCAT(Y,',',Z);

STORE var INTO '/user/hduser/output.csv' USING PigStorage(','); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:25:00.090

`STRSPLIT`返回一个元组，您可以使用编号语法访问其中的各个元素。这就是你需要的：

```
data = FOREACH fil GENERATE STRSPLIT($0, '~') AS a, clnt;
X = FOREACH data GENERATE CONCAT(a.$0,' ', clnt); 
```

# macos - 1\. git stash 2\. git pull origin master 3\. git stash 如何在单个命令上应用？

> ID：15816508
> 
> 赞同：1
> 
> 时间：2013-04-04T16:20:33.467
> 
> 标签：macos, git, command-line

我如何在 MacOSX 上的一个命令中做到这一点？

```
git stash
git pull origin master
git stash pop 
```

我已经尝试过`git stash && git pull origin mater && git stash apply`并且工作正常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T16:36:49.360

使用[git 别名](https://git.wiki.kernel.org/index.php/Aliases)。例如

```
[alias]
  spullsa = "!git stash && git pull origin mater && git stash apply" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T17:00:28.547

如果你想要比设置 git 别名更“官方”的东西，你可能会对[http://www.git-legit.org/](http://www.git-legit.org/)感兴趣。你在做什么类似于“git sync”。

# java - Java split() 由要拆分的字符串组成的字符串？

> ID：15816511
> 
> 赞同：3
> 
> 时间：2013-04-04T16:20:39.310
> 
> 标签：java, regex, string, split

当我编译并运行这段代码时：

```
class StringTest {
    public static void main(String[] args) {
        System.out.println("Begin Test");

        String letters = "AAAAAAA"
        String[] broken = letters.split("A");
        for(int i = 0; i < broken.length; i++)
            System.out.println("Item " + i + ": " + broken[i]);

        System.out.println("End Test");
    }
} 
```

控制台的输出是：

```
Begin Test
End Test 
```

谁能解释为什么这样`split()`工作？我在这里看到了一些类似这样的其他问题，但不完全理解为什么在拆分完全由您使用的字符组成的字符串时没有输出 for `regex`。为什么java以这种方式处理字符串？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T16:22:39.507

`String.split`丢弃尾随的空字符串。例如，`"foo,bar,,".split(",")`被拆分为`{"foo", "bar"}`. 您看到的是一个完全由分隔符组成的字符串，因此所有空拆分都是“尾随”并被丢弃。

如果您使用`letters.split("A", -1)`. 或者，除非您要求，否则[Guava's](https://github.com/google/guava) [`Splitter`](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/base/Splitter.html)不会这样做：`Splitter.on('A').split(letters)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:23:07.683

这是因为`"A"`在 split 方法中用作分隔符，并且由于您的字符串中除了分隔符之外没有任何其他文本，`"A"`因此在拆分后您将一无所有（结果数组中不返回空字符串）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T20:04:40.420

由于输入中的每个字符都是分隔符，因此找到的每个字符串都是空白的。默认情况下，找到的每个尾随空白都会被忽略，因此您会看到什么。

然而，`split()`有两种口味。该方法的[第二个版本`split()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)接受另一个`int`参数`limit`，它控制匹配的应用次数，以及忽略尾随空格的行为。

**如果`limit`参数为负，则保留尾随空格。**

如果您执行此代码：

```
String letters = "AAAAAAA";
String[] broken = letters.split("A", -1); // note the -1
System.out.println(Arrays.toString(broken)); 
```

你得到这个输出：

```
{"", "", "", "", "", "", ""} 
```

有关更多信息，请参阅[javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)，包括各种`limit`值如何影响行为的示例。

# c++ - 类型转换长指针问题

> ID：15816514
> 
> 赞同：1
> 
> 时间：2013-04-04T16:20:53.407
> 
> 标签：c++, c

```
 char *sBuffer=new char[20];
    char * sStringStart = sBuffer;

    long * plMsgStart = (long *) sBuffer;// what is this line doing

    long i=500;

    *plMsgStart = i // what is this line doing 
```

最后一行是在 char 数组中分配 500 吗？但是当我打印数组时，我得到垃圾值

大家好，下面是实际代码，我在将代码从 c++ 转换为 c# 时遇到它，下面的代码是 c++ 函数的一部分，现在为什么下面的函数给出垃圾值？

```
char *sBuffer=new char[20];
char * sStringStart = sBuffer;
BSTR bsMsgBody= SysAllocString(L"Helo");
sStringStart+=4;
long * plMsgStart = (long *) sBuffer;

long l=50;

*plMsgStart=l;

sprintf(sStringStart, "%S", bsMsgBody);

printf("%S",sBuffer); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T16:23:03.103

那是一个演员表。它说“我知道我在做什么，我想把`char*`它当作一个`long*`”。之后，它分配`i`给第一个元素（相当于`plMsgStart[0] = i;`.

根据 的大小`long`，您将覆盖`char`数组中的前 4 个或 8 个元素。打印它仍然是未定义的行为，因为`sBuffer`开始时没有以空值终止。

如果你做了

```
 char *sBuffer=new char[20](); 
```

然后尝试打印`sBuffer`（`long`覆盖后），您将看到 4（或 8）个字符对应于`500`.

视觉的

```
 char *sBuffer=new char[20];

 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 | | | | | | | | | | | | | | | | | | | | |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

 long * plMsgStart = (long *) sBuffer;

 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |       |       |       |       |       |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                 ^^^^^
    note this is still the same memory,
   but "seen through the eyes" of a long*

 *plMsgStart = 500;

 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |  500  |       |       |       |       |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T16:24:59.130

此代码创建一个名为 20 字节长的缓冲区`sBuffer`，然后在缓冲区的第一个字节中存储值为 500 的 long `n`，其中`n`是在系统上存储 a 所需的字节数`long`。

```
long * plMsgStart = (long *) sBuffer;// what is this line doing 
```

这一行告诉编译器你想`plMsgStart`成为与 相同的内存块`sBuffer`，但该块应该被视为存储`long`s。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T16:29:14.557

...我不知道如何使它更简单，但我会尝试：

```
char *sBuffer // sBuffer is a pointer to a character type

long * plMsgStart  // plMsgStart is a pointer to a long type

(long *) sBuffer;// this tells the compiler that I want my char pointer to be treated
                 // as a long pointer during this assignment. 
```

这使得它`plMsgStart`指向`sBuffer`。

```
*plMsgStart = i; // this is dereferencing the pointer, it says: 
                 // "at the current memory location" store the value i 
```

所以实际上，指向的*内存*被`sBuffer`设置`500`为 如果您尝试以char（或 char 数组）的形式访问，您很可能会得到垃圾。*这是不*进行[类型转换](https://stackoverflow.com/questions/7558837/what-exactly-is-a-type-cast-in-c-c#)的完美理由，因为编译器不应该抱怨你所做的任何事情，但你只是溢出了字符数组的第一个元素（取值高达 255）*`sBuffer`*`char`**

 **您将 500 存储到该内存中，即：

0000 0001 1111 0100 [2]如果以字节形式查看：

[00000001] [11110100] ==> [0x1][-0x12]（有符号）
或
[00000001] [11110100] ==> [0x1][0xF4]（无符号）

因此，当您尝试打印该“字符串”时，您会看到垃圾（或者如果您的系统上有一个“O” `char`）`unsigned`。**

# jquery - 选择 $(this) 中的元素 - jQuery

> ID：15816515
> 
> 赞同：0
> 
> 时间：2013-04-04T16:20:56.530
> 
> 标签：jquery, show-hide

我有一个 div 扩展 apwards 的动画，显示更多文本，但是我想显示一些隐藏的元素。我将如何选择这些？

执行扩展 div 的 Javascript：

```
$(".act-details").bind('mouseover mouseenter', function() {
    $(this).stop().animate({
        height : '160px',
        bottom : '180px'
    }, {
        queue : false,
        duration : 400,
        easing : 'swing'
    })
}); 
```

div 的 HTML：

```
<li>
    <img src="_img/featured/act_images/text.png"/>
    <p class="name"><? echo $act_data['act_name'];?></p>                        
    <div class="act-details">
        <p>Cardiff - United Kingdom</p>
        <p style="margin-bottom: 3px;">House/Progressive</p>
        <p class="details-ext">Text the sliding div reveals</p>
        <a href="#">View Act...</a>
    </div>
</li> 
```

act-details div 是扩展的，隐藏的文本是“details-ext”类我将如何在 javascript 中选择它，以便我可以根据需要取消隐藏和隐藏它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:22:41.617

```
$(this).children('.details-ext').toggle(); 
```

这应该适合你:)

**来源**

[jQuery API - .children()](http://api.jquery.com/children/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:24:55.833

试试这个

```
$('.details-ext' , this) 
```

`.details-txt`这将在 的上下文中搜索类`this`。

# ios - 释放目标 C 中的对象

> ID：15816520
> 
> 赞同：0
> 
> 时间：2013-04-04T16:21:12.857
> 
> 标签：ios, objective-c, memory-management

我只需要一些关于内存管理的帮助。我在屏幕上显示大约 500 帧。我的应用程序似乎在模拟器上运行良好，但在 iPad 上它在显示大约 450 帧后崩溃。问题似乎是由于内存不足。下面是我的代码的一部分。我是正确释放对象还是需要做更多的事情？

```
- (void)drawBufferWidth:(int)width height:(int)height pixels:(unsigned char*)pixels
{
     CGRect rect = CGRectInset(self.view.bounds, 0.0, 0.0);
     UIImageView *img = [[UIImageView alloc] initWithFrame:rect];
     CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
     CGContextRef gtx = CGBitmapContextCreate(pixels, width, height, BitsPerComponent, BytesPerRow, colorSpace, kCGImageAlphaPremultipliedLast);
     CGImageRef myimage = CGBitmapContextCreateImage(gtx); 
     img.image = [UIImage imageWithCGImage:myimage];

     CGContextRelease(gtx);
     CGImageRelease(myimage);
     CGColorSpaceRelease(colorSpace);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T16:27:20.240

此方法似乎正在泄漏`UIImageView`您在第二行创建的内容。你有一个`alloc`没有对应的`release`or `autorelease`。我说“出现”是因为我怀疑您没有包含所有方法（您没有向我们展示任何对您的 UIImageView 执行任何操作的代码......）。

您对各种 CGRef 的管理很好。

# c# - 解决后如何获取原始谷歌缩短网址

> ID：15816522
> 
> 赞同：2
> 
> 时间：2013-04-04T16:21:25.610
> 
> 标签：c#

所以我有一个谷歌缩短的网址，一旦我点击它并点击我的控制器，我希望能够在它得到解决之前看到原始的 goo.gl 网址是什么。我到底该怎么做？

我试过了`Request.UrlReferrer.AboluteUri`，`System.Web.HttpContext.Current.Request.Url.AbsoluteUri`但似乎都没有。它们都简单地返回解析的绝对 uri。对此的任何帮助将不胜感激。

这是缩短 URL 的示例 - [http://goo.gl/WSrJ6](http://goo.gl/WSrJ6)

然后，这会将用户（至少在测试中）带到 localhost:81/college/events/details/23

所以基本上，当我点击 Details Controller 时，如何取回原始缩短的 url？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:34:46.043

好的，这感觉更像是一种解决方法，但是......

我看不到任何方法可以从 goog.gl 服务中解析缩短的 url。但是，您可以向 goog.gl 发送一个 Web 请求，该请求仅使用`HEAD`HTTP 动词，使用缩短的 url。

然后，在对`HEAD`请求的响应中，`location`标头将是原始 url（因为它会发回重定向请求 301）。

[您可以使用此工具](http://web-sniffer.net/)查看响应。输入您的缩短网址，然后`HEAD`在发布前选择动词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:36:14.547

[https://developers.google.com/url-shortener/v1/getting_started](https://developers.google.com/url-shortener/v1/getting_started)

您使用以下 url 执行获取请求，并获得带有长 url 的 Json

[https://www.googleapis.com/urlshortener/v1/url?shortUrl=http://goo.gl/WSrJ6](https://www.googleapis.com/urlshortener/v1/url?shortUrl=http://goo.gl/WSrJ6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:04:23.967

任何正常配置的浏览器都会发送标头 HTTP_REFERER。

不简单的`Request.UrlReferrer`工作吗？或者，像`HttpContext.Current.Request.ServerVariables["HTTP_REFERER"]`or之类的东西`ServerVariables["HTTP_REFERER"]`？

这取决于您在哪里编码，但关键是从请求中获取标头。

HTTP_REFERER 应始终包含以前的（引用）url。我不明白为什么你会在那里得到解析的 url，除非它是第二次重定向（例如你的缩短器指向`http://server.com`并且你的网络服务器被配置为重定向丢失`www`到`http://www.server.com`）。

高温高压

弗朗西斯科

# iphone - 将 URL 重定向到 iphone 中的应用程序以获取linkedIn

> ID：15816529
> 
> 赞同：1
> 
> 时间：2013-04-04T16:21:44.637
> 
> 标签：iphone, objective-c, linkedin

我正在尝试使用 iPhone 授权 LinkedIn ..

我正在使用以下代码重定向 url

```
NSString *authUrl = [NSString stringWithFormat:@"https://www.linkedin.com/uas/oauth2/authorization?response_type=code&client_id=%@&scope=%@&state=%@&redirect_uri=%@" ,
                     API_KEY ,
                     @"r_fullprofile",
                     @"ASDKASIIWER23432KKQ",
                     @"http://www.myappname.com"
                     ];

[[UIApplication sharedApplication] openURL:[NSURL URLWithString: authUrl]]; 
```

在我的 Url 类型中，我添加了 URL Scheme as`http://`和 url identifier as

```
 www.myappname.com 
```

但是授权后，我不会从浏览器返回我的应用程序。

有什么想法我错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T10:59:37.607

我现在使用了差异方法，我在应用程序中使用了 webView 并且正在使用它。到目前为止工作完美。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.myWebView setDelegate:self];
    self.indicator = [[CustomActivityViewer alloc] initWithView:self.view];

    NSString *authUrl = [NSString stringWithFormat:@"https://www.linkedin.com/uas/oauth2/authorization?response_type=code&client_id=%@&scope=%@&state=%@&redirect_uri=%@" ,
                         API_KEY ,
                         @"r_fullprofile rw_nus r_emailaddress r_network w_messages",
                         SCOPE_CODE
                         REDIRECT_URI
                         ];
    authUrl = [authUrl stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    [self.myWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:authUrl]]];
}

-(void)webViewDidStartLoad:(UIWebView *)webView
{
    [self.indicator startAnimating];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    [self.indicator stopAnimating];
}
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
    [self.indicator stopAnimating];
}

- (BOOL) webView: (UIWebView *) webView shouldStartLoadWithRequest: (NSURLRequest *) request navigationType: (UIWebViewNavigationType) navigationType
{
    NSURL *url = request.URL;
    NSLog(@"%@", url.absoluteString);

    if ( [url.host isEqualToString:HOST])
    {
        URLParser *parser = [[URLParser alloc] initWithURLString:url.absoluteString];
        NSString *code = [parser valueForVariable:@"code"];

        if (code != nil)
        {
            NSString *authUrl = [NSString stringWithFormat:@"https://www.linkedin.com/uas/oauth2/accessToken?grant_type=authorization_code&code=%@&redirect_uri=%@&client_id=%@&client_secret=%@",
                                 code,
                                 REDIRECT_URI_OAUTH,
                                 API_KEY,
                                 SECRET_KEY];

            NSLog(@"%@" , authUrl);
            authUrl = [authUrl stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

           [Utilities responseFromURL:[NSURL URLWithString:authUrl] completionBlock:^(NSString *response, NSError *err)
            {
                if (err != nil)
                {
                    [Utilities errorDisplay];
                }
                else
                {
                    NSDictionary *results = [response JSONValue];
                    [defaults setObject:[results objectForKey:@"access_token"] forKey:@"access_token"];
                }
           }];
        }
    }
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T16:31:47.900

您将需要注册一个自定义 URL 方案，因为 iOS 和 OS X 无法在 URL 方案中重定向特定主机。

通常，您可以使用类似`x-myapp:`url 方案的东西。

此外，URL 标识符不是主机，而是描述 URL 方案的标识符，很像文件类型的 UTI 标识符描述特定文件类型。例如，您可以使用`com.myCompany.myApp.url`或类似的东西作为标识符。

`x-myapp:`如果您创建一个表单方案然后将其用作重定向 URL，您应该没问题。

提议的 Info.plist 中的一个示例是：

```
<dict>
    <key>CFBundleTypeRole</key>
    <string>Editor</string>
    <key>CFBundleURLName</key>
    <string>com.myCompany.myApp.url</string>
    <key>CFBundleURLSchemes</key>
    <array>
        <string>x-myapp</string>
    </array>
</dict> 
```

在`CFBundleURLName`Xcode GUI 中对应于`URL Identifier`.

# r - 在特定数据集上调用“write.table”时崩溃 R

> ID：15816532
> 
> 赞同：18
> 
> 时间：2013-04-04T16:21:52.833
> 
> 标签：r, crash, write.table

以下内容始终使我的 R 会话崩溃。
在两台机器上测试，Ubuntu 和 Mac OS X，两者的结果相似。

简要说明：
调用`write.table`具有所有 NA 的因子列的 data.frame。

原始数据集相当大，我设法隔离了有问题的列，然后创建了一个类似的向量，命名`PROBLEM_DATA`如下，这会导致同样的崩溃。

有趣的是，有时会`R`直接崩溃，有时它只是抛出以下错误：

```
Error in write.table(x, file, nrow(x), p, rnames, sep, eol, na, dec, as.integer(quote),  : 
  'getCharCE' must be called on a CHARSXP 
```

### 关于崩溃原因的任何想法还是应该将其作为错误提交？

违规数据和电话：

```
PROBLEM_DATA <- structure(114:116, .Label = c("String1", "String2", "String3", "String4", "String5", "String6", 
                   "String7", "String8", "String9", "String10", "String11", "String12", "String13", "String14", "String15"), class = "factor")

# This will cause a crash
write.table(PROBLEM_DATA, file=path.expand("~/test.csv"))

# This will also crash
write.table(PROBLEM_DATA, file=path.expand("~/test.csv"), fileEncoding="UTF-8") 
```

## 每台机器的会话信息

### 乌本图

```
R version 2.15.3 (2013-03-01)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8 LC_NUMERIC=C         LC_TIME=C            LC_COLLATE=C        
 [5] LC_MONETARY=C        LC_MESSAGES=C        LC_PAPER=C           LC_NAME=C           
 [9] LC_ADDRESS=C         LC_TELEPHONE=C       LC_MEASUREMENT=C     LC_IDENTIFICATION=C 

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] gdata_2.12.0     ggplot2_0.9.3    stringr_0.6.1    RMySQL_0.9-3     DBI_0.2-5       
[6] data.table_1.8.8

loaded via a namespace (and not attached):
 [1] MASS_7.3-23        RColorBrewer_1.0-5 colorspace_1.2-0   dichromat_1.2-4   
 [5] digest_0.5.2       grid_2.15.3        gtable_0.1.1       gtools_2.7.0      
 [9] labeling_0.1       munsell_0.4        plyr_1.7.1         proto_0.3-9.2     
[13] reshape2_1.2.1     scales_0.2.3       tools_2.15.3 
```

### Mac OS X

```
R version 2.15.3 (2013-03-01)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T21:08:58.250

这是一个很好的可重现错误，应该报告给 R-devel 或使用`bug.report()`. FWIW 开启

```
> sessionInfo()
R version 3.0.0 Patched (2013-04-03 r62485)
Platform: x86_64-unknown-linux-gnu (64-bit) 
```

如果在 Linux 上我用 CFLAGS="-g -O0" 配置 R，我可以

```
R -d gdb
(gdb) break Rf_error
(gdb) run 
```

然后在上面粘贴你的行并结束

```
> write.table(PROBLEM_DATA, file=path.expand("~/test.csv"))

Breakpoint 1, Rf_error (format=0x7ffff7a8f0f0 "'%s' must be called on a CHARSXP") at /home/mtmorgan/src/R-3-0-branch/src/main/errors.c:753
753     RCNTXT *c = R_GlobalContext;
(gdb) up 3
#3  0x00007ffff1b9bfb3 in EncodeElement2 (x=0x31ccf50, indx=113, quote=TRUE, qmethod=TRUE, buff=0x7fffffffbdc0, cdec=46 '.')
    at /home/mtmorgan/src/R-3-0-branch/src/library/utils/src/io.c:938
938     p0 = translateChar(STRING_ELT(x, indx));
(gdb) call Rf_PrintValue(x)
 [1] "String1"  "String2"  "String3"  "String4"  "String5"  "String6" 
 [7] "String7"  "String8"  "String9"  "String10" "String11" "String12"
[13] "String13" "String14" "String15"
(gdb) p indx
$1 = 113 
```

这表明 R 试图打印出因子名称的第 114 个元素——显然事情出错了，因为该因子的整数值超出了其级别的长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:20:04.277

不是答案，而是长评论：

```
PROBLEM_DATA <- structure(c(1:5,114:116), .Label = c("String1", "String2", "String3",'string4','str5','str6','str7'),class='factor')
Rgames> as.numeric(PROBLEM_DATA)
[1]   1   2   3   4   5 114 115 116
Rgames> as.numeric(as.character(PROBLEM_DATA))
[1] NA NA NA NA NA NA NA NA
Warning message:
NAs introduced by coercion 
Rgames> levels(PROBLEM_DATA)
[1] "String1" "String2" "String3" "string4" "str5"    "str6"    "str7"   
Rgames> write.table(PROBLEM_DATA, file=path.expand("~/ctest.csv"))
Error in write.table(x, file, nrow(x), p, rnames, sep, eol, na, dec, as.integer(quote),  : 
  'getCharCE' must be called on a CHARSXP 
```

`ctest.csv`包含：（就 Excel 而言，每一行都是一个单元格）

```
x
1 "String1"
2 "String2"
3 "String3"
4 "string4"
5 "str5"
6 
```

因此，当级别的基础编号存在“差距”时，您会看到事情变得糟糕。希望这为比我更了解因素的人提供线索。

# r - 如何正确转换时区

> ID：15816534
> 
> 赞同：2
> 
> 时间：2013-04-04T16:21:57.850
> 
> 标签：r, posixct

我正在使用[fasttime](http://www.rforge.net/fasttime/files/)包的`fastPOSIXct`功能，它可以非常有效地读取字符日期时间。我的问题是它只能读取以 GMT 表示的字符日期时间。

```
R) fastPOSIXct("2010-03-15 12:37:17.223",tz="GMT") #very fast
[1] "2010-03-15 12:31:16.223 GMT"
R) as.POSIXct("2010-03-15 12:37:17.223",tz="GMT") #very slow
[1] "2010-03-15 12:31:16.223 GMT" 
```

现在，假设我有一个日期时间以“美国/蒙特利尔”时区表示的文件，计划是加载它们（隐含地假装它们在 GMT 中）并随后修改时区属性而不更改基础值。

如果我使用此功能，请参阅另一篇文章：

```
forceTZ = function(x,tz){   
    return(as.POSIXct(as.numeric(x), origin=as.POSIXct("1970-01-01",tz=tz), tz=tz))
} 
```

我看到一个错误...

```
R) forceTZ(as.POSIXct("2010-03-15 12:37:17.223",tz="GMT"),"America/Montreal")
    [1] "2010-03-15 13:37:17.223 EDT" 
```

...因为我希望它是

```
R) as.POSIXct("2010-03-15 12:37:17.223",format="%Y-%m-%d %H:%M:%OS",tz="America/Montreal")
    [1] "2010-03-15 12:37:17.223 EDT" 
```

有解决方法吗？

编辑：我知道`lubridate::force_tz`但它太慢了（不再使用`fasttime::fastPOSIXct`）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T16:09:55.667

在这里要做的聪明的事情几乎可以肯定是编写可读、易于维护的代码，如果你的代码太慢，就会在问题上投入更多的硬件。

如果您迫切需要代码加速，那么您可以编写自定义时区调整函数。它不漂亮，所以如果你必须在多个时区之间转换，你最终会得到意大利面条代码。这是我从格林威治标准时间转换为蒙特利尔时间的具体情况的解决方案。

首先预先计算夏令时的日期列表。您需要将此扩展到 2010 年之前/2013 年之后，以适应您的数据集。我在这里找到了日期

[http://www.timeanddate.com/worldclock/timezone.html?n=165](http://www.timeanddate.com/worldclock/timezone.html?n=165)

```
montreal_tz_data <- cbind(
  start = fastPOSIXct(
    c("2010-03-14 07:00:00", "2011-03-13 07:00:00", "2012-03-11 07:00:00", "2013-03-10 07:00:00")
  ),
  end   = fastPOSIXct(
    c("2010-11-07 06:00:00", "2011-11-06 06:00:00", "2012-11-04 06:00:00", "2013-11-03 06:00:00")
  )
) 
```

对于速度，更改时区的功能将时间视为数字。

```
to_montreal_tz <- function(x)
{
  x <- as.numeric(x)
  is_dst <- logical(length(x))  #initialise as FALSE
  #Loop over DST periods in each year
  for(row in seq_len(nrow(montreal_tz_data)))
  {
    is_dst[x > montreal_tz_data[row, 1] & x < montreal_tz_data[row, 2]] <- TRUE
  }
  #Hard-coded numbers are 4/5 hours in seconds
  ans <- ifelse(is_dst, x + 14400, x + 18000)
  class(ans) <- c("POSIXct", "POSIXt")
  ans
} 
```

现在，比较时间：

```
#A million dates
ch <- rep("2010-03-15 12:37:17.223", 1e6)
#The easy way (no conversion of time zones afterwards)
system.time(as.POSIXct(ch, tz="America/Montreal"))
#   user  system elapsed 
#  28.96    0.05   29.00 

#A slight performance gain by specifying the format
system.time(as.POSIXct(ch, format = "%Y-%m-%d %H:%M:%S", tz="America/Montreal"))
#   user  system elapsed 
#  13.77    0.01   13.79 

#Using the fast functions
library(fasttime)
system.time(to_montreal_tz(fastPOSIXct(ch)))    
#    user  system elapsed 
#    0.51    0.02    0.53 
```

与所有优化技巧一样，您要么获得了 27 倍的加速（耶！），要么您节省了 13 秒的处理时间，但是当您的 DST 表在 2035 年用完时，由于一个晦涩的错误增加了 3 天的代码维护时间（嘘！）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T16:49:28.320

这是一个夏令时问题：[http ://www.timeanddate.com/time/dst/2010a.html](http://www.timeanddate.com/time/dst/2010a.html)

2010 年，它于 3 月 14 日在加拿大开始，但直到 3 月 28 日才在英国开始。

您可以使用`POSIXlt`对象直接修改时区：

```
lt <- as.POSIXlt(as.POSIXct("2010-03-15 12:37:17.223",tz="GMT"))
attr(lt,"tzone") <- "America/Montreal"
as.POSIXct(lt)
[1] "2010-03-15 12:37:17 EDT" 
```

或者您可以使用`format`转换为字符串并在调用中设置时区`as.POSIXct`. 因此，您可以修改`forceTZ`：

```
forceTZ <- function(x,tz)
{
  return(as.POSIXct(format(x),tz=tz))
}

forceTZ(as.POSIXct("2010-03-15 12:37:17.223",tz="GMT"),"America/Montreal")
[1] "2010-03-15 12:37:17 EDT" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T13:24:24.927

你能不能只添加适当的秒数来纠正与 GMT 的偏移量？

```
# Original problem
fastPOSIXct("2010-03-15 12:37:17.223",tz="America/Montreal")
# [1] "2010-03-15 08:37:17 EDT"

# Add 4 hours worth of seconds to the data. This should be very quick.
fastPOSIXct("2010-03-15 12:37:17.223",tz="America/Montreal") + 14400
# [1] "2010-03-15 12:37:17 EDT" 
```

# .net - 如何测试文件路径在vb.net中的哪个环境

> ID：15816535
> 
> 赞同：0
> 
> 时间：2013-04-04T16:21:58.330
> 
> 标签：.net, vb.net

我有 QAS、DEV 和 Prod 环境。我正在编写一个控制台应用程序。每台服务器的一个文件夹中都会有一些文本文件。我想获取这些文本文件并在控制台应用程序中执行一些处理，并在处理后将其移动到存档文件夹。为了做到这一点，我想测试文件来自哪个路径：

我想要一些类似的东西：

```
 If Environment.MachineName.ToLower.StartsWith(" ") Then
            env = "p"
        ElseIf Environment.MachineName.ToLower.StartsWith(" ") Then
            env = "q"
        Else
            env = "d"
        End If 
```

但我没有任何类似的模式......如何获得类似的功能......任何其他方式来做到这一点......比如检查每个的路径......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:25:05.507

正如 Steven 建议的那样，向 App.Config 添加一个设置：

```
<applicationSettings>
    <My.MySettings>
        <setting name="Environment" serializeAs="String">
            <value>DEV</value>
        </setting>
    </My.MySettings>
</applicationSettings> 
```

然后在您的代码中：

```
 If (My.Settings.Environment = "DEV") Then

    End If 
```

您只需修改每台机器上的 App.Config 文件，使其与正确的环境相对应。

# performance - cachegrind 是否提供内核模块的性能数据

> ID：15816537
> 
> 赞同：1
> 
> 时间：2013-04-04T16:22:01.567
> 
> 标签：performance, linux-kernel, x86, profiling, valgrind

我在基于 x86 的嵌入式盒子上面临性能问题。我已经在上面安装了 valgrind，但到目前为止，它看起来提供了应用程序的性能数据，但是如果我想检查内核驱动程序的性能数据，我该怎么做？

是否有任何工具可以帮助做到这一点，通过使用一些选项或任何东西重建内核..

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:43:52.730

看看[性能](https://perf.wiki.kernel.org/index.php/Main_Page)。显然，还有一些努力正在实施 callgrind[转换器](http://marc.info/?l=linux-kernel&m=136432531919016&w=2)。

# c++ - 我第二次使用 Cin.get() 不工作

> ID：15816540
> 
> 赞同：4
> 
> 时间：2013-04-04T16:22:12.757
> 
> 标签：c++, menu, cin

```
#include <iostream>
#include <strings.h>

using namespace std;

void encyclopedia()
{
int choice;
int choice2;

system("CLS");
cout << "Content Menu\n\n" 
     << "1\. Gore\n\n"
     << "2\. Wilson\n\n"
     << "3\. Costa\n\n"
     << "Selection: ";
cin >> choice;
if (choice == 1)
{
           system("CLS");
           cout << "Al Gore's Book Summary of:\n\n"
                << "1\. Introduction\n\n"
                << "2\. \n\n"
                << "3\. \n\n";
           cin >> choice2;
           if (choice2 == 1)
           {
                       system("CLS");
                      cout << "text here\n\n";
                      cout << "Press enter to continue\n";
                      cin.get();
                      encyclopedia();               
           }
           else if (choice2 == 2)
           {
                system("CLS");
                      cout << "text here\n\n";
                      cout << "Press enter to continue\n";
                      cin.get();
                      encyclopedia();               
           }
           else if (choice2 == 3)
           {
                system("CLS");
                      cout << "text here\n\n";
                      cout << "Press enter to continue\n";
                      cin.get();
                      encyclopedia();               
           }  
}
if (choice == 2)
{
           system("CLS");
           cout << "Wilson's Book Summary of:\n\n"
                << "1\. Introduction\n\n"
                << "2\. \n\n"
                << "3\. \n\n";
           cin >> choice2;
           if (choice2 == 1)
           {
                       system("CLS");
                      cout << "text here\n\n";
                      cout << "Press enter to continue\n";
                      cin.get();
                      encyclopedia();               
           }
           else if (choice2 == 2)
           {
                system("CLS");
                      cout << "text here\n\n";
                      cout << "Press enter to continue\n";
                      cin.get();
                      encyclopedia();               
           }
           else if (choice2 == 3)
           {
                system("CLS");
                      cout << "text here\n\n";
                      cout << "Press enter to continue\n";
                      cin.get();
                      encyclopedia();               
           }  
}
if (choice == 3)
{
           system("CLS");
           cout << "Rebeca Costa's Book Summary of:\n\n"
                << "1\. Introduction\n\n"
                << "2\. \n\n"
                << "3\. \n\n";
           cin >> choice;
           if (choice2 == 1)
           {
                       system("CLS");
                       cout << "text here\n\n";
                       cout << "Press enter to continue\n";
                       cin.get();
                       encyclopedia();               
           }
           else if (choice2 == 2)
           {
                       system("CLS");
                       cout << "text here\n\n";
                       cout << "Press enter to continue\n";
                       cin.get();
                       encyclopedia();               
           }
           else if (choice2 == 3)
           {
                      system("CLS");
                      cout << "text here\n\n";
                      cout << "Press enter to continue\n";
                      cin.get();
                      encyclopedia();               
           }  
}
}

int main()
{
cout << "2013 Written Task #2\n\nBy: Skye Leis\n\n";
cout << "Press enter to continue\n";
cin.get();
encyclopedia();   
} 
```

当我的第一个 cin.get() 工作时，我无法在 encyclopedia() 工作之前让 cin.get() 工作。当它运行时，第一个屏幕工作，然后内容菜单工作，子菜单工作，但在显示实际文本的部分上，它不会等待输入键，然后重新启动百科全书功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:36:37.730

`cin`适用于格式化输入。这意味着它会一直读下去，直到找到一个空格或一个新行。

问题是当你这样做

```
cin >> choice2; 
```

当您输入一个数字并按回车键时，`cin`将读取到一个`blank space`. 这意味着`newline`(from key `enter`) 仍然在那里。您`cin.get`将阅读该换行符并继续。

此外，如果我输入两个用空格分隔的数字，您的实现将采用第二个数字并将其用于任何下一个菜单输入。

为了确保在您继续下一个菜单项之前读取输入中留下的任何内容，您可以使用`getline()`

```
string garbage;
cin >> choice2;
getline(cin, garbage);  // The will take care of any extra inputs. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T12:25:35.417

它读取 last /n 并执行以下操作：

> cin.clear(); cin.get();

或者只写 cin.get(); 两次

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T16:28:36.163

会发生什么仍然有剩菜（endlines）所以你可能会在用户输入后得到一些其他不需要的字符，请尝试添加：

```
cin.ignore( numeric_limits <streamsize> ::max(), '\n' ); 
```

辛后

# c# - 使用 XMLReader 读取大型 XML 文档，将信息解析成一个类

> ID：15816541
> 
> 赞同：2
> 
> 时间：2013-04-04T16:22:17.237
> 
> 标签：c#, xml, linq, xmlreader

我一直在使用 XDocument 结合 LINQ to XML 来加载 xml 文件并填充我的类。

但是现在我的任务是确保我的程序可以处理所有大小的 XML 文档，这意味着我需要使用 XML Reader，而此时我无法控制 XMLReader 来填充我的类。

目前我有以下类要填充：

```
 public class DataRecord
  {
    private List<Fields> field = new List<Fields>();

    public string ID { get; set; }
    public string TotalLength { get; set; }

    public List<Fields> MyProperty
    {
      get { return field; }
      set { field = value; }
    }

  }

  internal class Fields
  {
    public string name { get; set; }
    public string startByte { get; set; }
    public string length { get; set; }
  }

} 
```

我一直在尝试切换语句以强制 xmlreader 提供来自我的数据以填充类。例如：

```
using (XmlReader reader = XmlReader.Create(filename))
  {
    while (reader.Read())
    {
      switch (reader.NodeType)
      {
        case XmlNodeType.Element:
          switch (reader.Name)
          {
            case "DataRecord":
              var dataaa = new dataclass.DataRecord();
              break;
          }
         break;
      }
    }
  } 
```

但正如我所说，这是一个例子，我已经搜索了很长时间来尝试找到答案，但我感到困惑。希望有人可以帮助我们解决我的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T12:02:07.157

您可以使用`XmlReader`在文档中移动，然后使用加载每个元素`XElement.`

这是一个简短的示例：

```
using System;
using System.Xml;
using System.Xml.Linq;

class Test
{
    static void Main()
    {
        using (var reader = XmlReader.Create("test.xml"))
        {
            while (reader.ReadToFollowing("foo"))
            {
                XElement element = XElement.Load(reader.ReadSubtree());
                Console.WriteLine("Title: {0}", element.Attribute("title").Value);
            }
        }
    }
} 
```

使用示例 XML：

```
<data>
  <foo title="x" /><foo title="y">asd</foo> <foo title="z" />
</data> 
```

（有点不一致只是为了表明它可以处理有内容的元素，它们之间没有空格的元素，以及它们之间有空格的元素。）

然后显然在循环中你会做任何你需要做的事情`XElement`- 如果你已经有办法从一个创建你的类的实例`XElement`，你可以调用它，使用对象，然后你就走了。

# scala - Scala中的类型不匹配Astyanax KeySerializer

> ID：15816542
> 
> 赞同：2
> 
> 时间：2013-04-04T16:22:21.593
> 
> 标签：scala, generics, astyanax

我正在尝试执行以下操作，但由于某种原因，由于 KeySerializer 的类型不匹配，我的代码无法编译。

```
implicit val keyspace = ConnectionPool.bigdataKeyspace
  implicit val CF_PAST = ColumnFamily.newColumnFamily(CF, LongSerializer.get, StringSerializer.get)

  def update(model: M) = {
    val batch = keyspace.prepareMutationBatch().setConsistencyLevel(ConnectionPool.CL_WRITE)
    val rk = model.rowkey
    try {

        batch.withRow(CF_PAST, rk)
        .putColumnIfNotNull(model.epoch, model.value, model.ttl)

      batch.execute
      Option(model)

    } catch {
      case e: Exception =>
        logger.warn("Unable to insert past model", e)
        None
    }
  } 
```

编译错误如下"

```
error: type mismatch;  found   
: com.netflix.astyanax.model.ColumnFamily[Long,String]  required: com.netflix.astyanax.model.ColumnFamily[Comparable[_ >: 
String with Long <: Comparable[_ >: String with Long <: 
Comparable[_ >: String with Long <: 
java.io.Serializable] with java.io.Serializable] with java.io.Serializable] with java.io.Serializable,String] Note: 
Long <: Comparable[_ >: String with Long <: Comparable[_ >: 
String with Long <: Comparable[_ >: String with Long <: 
java.io.Serializable] with java.io.Serializable] with java.io.Serializable] with java.io.Serializable, but Java-defined class ColumnFamily is invariant in type K. 
You may wish to investigate a wildcard type such as `_ <: 
Comparable[_ >: String with Long <: Comparable[_ >: 
String with Long <: Comparable[_ >: String with Long <: java.io.Serializable] with
 java.io.Serializable] with java.io.Serializable] with java.io.Serializable`. 
(SLS 3.2.10)
            batch.withRow(CF_PAST, rk) 
```

这似乎只发生在 Scala 中，KeySerializers 不是字符串，ColumnSerializers 其他类型似乎工作正常？有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:58:01.880

啊，我意识到 KeySerializer 对于这种情况是不正确的。我需要设置 ColumnSerializer：

```
 implicit val CF_PAST = ColumnFamily.newColumnFamily(CF, StringSerializer.get, LongSerializer.get) 
```

# google-drive-api - 集成 Google Docs - 身份验证和访问

> ID：15816547
> 
> 赞同：1
> 
> 时间：2013-04-04T16:22:31.023
> 
> 标签：google-drive-api

我对将 Google Docs 与我们的应用程序集成很感兴趣，并且好奇 API 是否会支持我们的用例。

我们的用户会在我们的网站上看到一个打开文档（以编程方式创建的文档）的链接。当他们单击该链接时，它会根据我们系统的权限以写入或只读模式打开 Google 文档（在另一个浏览器选项卡中）。最好用户根本不需要 Google 帐户。此外，在他们单击链接之前，我们希望显示该文档特定修订版本的完全静态 HTML 表示。聆听更改（从我们的后端）到文档以更新静态 html 或类似的内容也很不错。他们将无法创建新文档或删除文档。

总之：

*   控制文档创建/删除

*   控制文档共享（这里可以接受一些解决方法）

*   通过我们的服务进行身份验证以编辑/查看文档

*   通过 API 向文档添加注释

*   将文档转换为静态 HTML

自定义 Google Doc 编辑器以使其更适合我们创建的类型文档（电影脚本）可能会很好，但不是必需的，模板很有帮助，因此使用模板创建文档会很好。

如果可能，我们需要哪些 API、帐户类型等来完成上述操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:37:51.350

需要 Google 帐户才能与 Google Drive 和 Google Docs 交互。您可以做的是，点击后，授权访问用户的 Google Drive 帐户，将文档复制到他们的 Drive，然后将他们重定向到编辑新复制的文档。支持您的所有其他要求。

您可以使用[Google Drive SDK](https://developers.google.com/drive)完成这些操作。

# wordpress - htaccess 规则不起作用

> ID：15816550
> 
> 赞同：-1
> 
> 时间：2013-04-04T16:22:42.617
> 
> 标签：wordpress, .htaccess, http, mod-rewrite

我在上安装了[WordPress](http://en.wikipedia.org/wiki/WordPress)`www.marcou.it/wp`，我会将其设置为默认目录。因此，如果我键入`marcou.it`，浏览器必须向我显示 WordPress。

我已经制定了这些规则：

```
RewriteEngine On #Created by aruba. Do not touch this file!
#ATTENTION: Remove file index.(php|html|htm)
RewriteCond %{REQUEST_URI} !^/wp
RewriteRule ^(.*)$ wp/$1 [L] 
```

但是如果我继续`www.marcou.it`，我会得到这个返回：

> 未找到
> 
> 在此服务器上找不到请求的 URL /wp/index.htm。

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:39:20.417

如果要重定向不在`/wp/`子目录中的任何内容，可以使用以下内容直接重定向到此，然后在`index.htm`必要时删除。很可能被`index.htm`附加为默认文档。

```
RewriteEngine On
RewriteBase /
RewriteRule ^((?!wp/).*) wp/$1 [R]
RewriteRule ^wp/index.htm$ wp/ [R,L] 
```

您可以在此处测试这些规则（确保您的测试 url 包含“http://”）：http: [//htaccess.madewithlove.be/](http://htaccess.madewithlove.be/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:49:18.670

只需删除您在此问题上提到的所有代码，因为它不正确，然后在您的`.htaccess`文件中尝试这个：

```
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{REQUEST_URI} ^/wp/?
RewriteRule ^(.*) /$1 
```

* * *

现在试试这个：

```
Options +FollowSymlinks
RewriteEngine on

RewriteRule ^/? /wp
RewriteRule ^(.+)? /wp/$1 
```

如果这不起作用，请尝试删除`Options +FollowSymlinks`并再次检查！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T14:54:09.213

```
RewriteEngine On #created by aruba do not touch this file!
#ATTENTION: Remove file index.(php|html|htm)
RewriteCond %{REQUEST_URI} !^/wp
RewriteRule ^(.*)$ wp/ [L]

# BEGIN WordPress

# END WordPress 
```

# javascript - js 字计数器 - 刷新页面时计数器恢复到原始计数

> ID：15816554
> 
> 赞同：0
> 
> 时间：2013-04-04T16:22:54.353
> 
> 标签：javascript, forms, refresh, word

每当有人刷新我的页面或在页面上提交表单（并且出现错误）时，单词计数器就会恢复到原始字符数。我的表格中有一个针对特定领域的单词计数器。

因此，每当有人尝试填写我们的表单时，我们的验证都会告诉他们必须填写特定问题并且不允许他们提交表单。我意识到我可以通过删除它说 textarea 不能留空的地方来快速修复验证。但这不是我可以想象的解决方案。

这是我的代码：

```
 <script language="javascript" type="text/javascript">

function textCounter(field,cntfld,maxlimit) {
    var cntfield = document.getElementById(cntfld);
if (field.value.length > maxlimit)
    field.value = field.value.substring(0, maxlimit);
else
cntfield.innerHTML = maxlimit - field.value.length;
}

</script> 
```

其次是我的html

```
 <div>
    <textarea class="cf_inputbox required" rows="7" id="text_id"  title="title_test"  cols="50" name="text_id" onKeyDown="textCounter(this,'counter_length',200)"
onKeyUp="textCounter(this,'counter_length',200)"></textarea>
        <br/>
        <span id="counter_length">200</span> Left
  </div> 
```

我如何修改我的代码，以便如果刷新页面或提交表单（有错误 - 因此验证开始），单词计数器将保持在当前数字而不回到 200？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:56:32.543

您需要定义将在页面加载时执行的函数。像这样的东西：

```
<script>
     function onPageLoad() {
          var field = document.getElementById("text_id");
           textCounter(field,'counter_length',200)
       }
</script>
<body onload="onPageLoad()">
   <!-- your markup-->
</body> 
```

[**小提琴示例**](http://jsfiddle.net/vUkk6/2/)

# package - Debian APT - 一些问题

> ID：15816555
> 
> 赞同：0
> 
> 时间：2013-04-04T16:22:56.197
> 
> 标签：package, debian, apt

1.  如何检查当前安装了哪些软件包？
2.  如何找到所有未安装的软件包？
3.  是否可以卸载包和该包的所有文件（配置、临时文件等）？

我正在使用 Debian Squeeze 6.0.7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:27:16.367

1.  dpkg -l
2.  那么会有很多未安装的软件包..你为什么要这样做？顺便说一句，该命令`apt-cache pkgnames`将为您提供在您的 sources.list 配置中添加的存储库中所有可用软件包的列表
3.  apt-get remove 将删除已安装的软件包，但您通常会保留配置，这通常是所需的行为。

更多信息：[http ://www.cyberciti.biz/howto/question/linux/dpkg-cheat-sheet.php](http://www.cyberciti.biz/howto/question/linux/dpkg-cheat-sheet.php)

# ios - 从帐户中删除 Facebook 应用程序后的 Facebook 帖子

> ID：15816556
> 
> 赞同：0
> 
> 时间：2013-04-04T16:22:56.330
> 
> 标签：ios, facebook

我正在编写的 ios 应用程序中有一个 facebook 发布功能，并且一切都与登录和发布有关。

问题是，如果我从 facebook 帐户中删除 facebook 应用程序，然后尝试再次发布，我不会收到来自 facebook 的任何回复。

我实现了必要的委托`FBSessionDelegate`，`FBRequestDelegate`并将日志放入每个方法中，这样我就可以查看是否发生了好事或坏事。

同样，在删除 facebook 应用程序之前，一切都按预期工作（当然包括多次发布），并且确实调用了委托方法（我验证了每个方法确实在适当的场景中被调用）。

我在 SO 上看到了这篇[文章](https://stackoverflow.com/questions/10698061/ios-fbconnect-sessionvalid-after-delete-application-at-the-facebook-websit)，但它谈论的是有效会话，我认为这与这种情况无关，因为如果我不删除 facebook 应用程序，我可以轻松地重新发布

# python - 使用 del python 时停止更新列表

> ID：15816557
> 
> 赞同：0
> 
> 时间：2013-04-04T16:22:58.487
> 
> 标签：python, list

我有一个列表，我想从中删除某些元素，我创建了一个 for 循环，在这个 for 循环中放入了 del my list[i]

`prule`是一个字符串列表，其中包含从数字`0`到`159`其大小的字符串`11154`

```
def getind(li)
    ret = {}
    for i, x in enumerate(li):
        if x not in ret:
            ret[x] = []
        ret[x].append(i)
    return ret
dups = getind(prule)
for n in dups.get('159',[]):
    del rulelines[n] 
```

这样做一段时间后`list assignment index out of range`，我猜是因为列表已更新。有什么我可以使用的，所以在 for 循环完成之前它不会更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:35:07.697

正如我在[这里的回答中更正的那样](https://stackoverflow.com/a/15813458/1931274)

```
dups = getind(prules)
indexes = dups.get('156',[])
rulelines = [rulelines[i] for i in range(len(rulelines[:])) if i not in indexes] 
```

应该是解决您的问题的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:29:23.127

您应该向后浏览您的列表：

```
for x in range(subjectlength - 1, -1, -1):
    del my_list[x] 
```

# c#-4.0 - SslStream TcpClient - 从传输流接收到意外的 EOF 或 0 字节

> ID：15816559
> 
> 赞同：5
> 
> 时间：2013-04-04T16:23:04.447
> 
> 标签：c#-4.0, tcp, sslstream

我正在尝试通过 SslStream / Tcp 客户端连接到服务器。每次我这样做时都会收到一个异常说明：在 AuthenticateAsClient 行*的传输流中收到了意外的 EOF 或 0 字节。*

我已启用跟踪日志记录，并在日志中收到以下两个错误：

System.Net 信息：0 : [12260] SecureChannel#66702757::.ctor(hostname=xxx.xx.xx.xxx, #clientCertificates=0, encryptionPolicy=RequireEncryption)

System.Net 信息：0：[12260] SecureChannel#66702757 - 剩下 0 个客户端证书可供选择。

有人可以就如何解决这个问题给我任何建议吗？不知道为什么，但如果这有什么不同，它就会扔到外面。

```
try
{
    TcpClient client = new TcpClient(_host, _port);
    // _stream = client.GetStream();

    _stream = new SslStream(client.GetStream(), false, ValidateServerCertificate, null);
    _sslReader = new StreamReader(client.GetStream());

    try
    {
        _stream.AuthenticateAsClient(_host);
    }
    catch (AuthenticationException e)
    {
        client.Close();
        return;
    }

    HandleConnect();
}
catch (Exception e)
{
    _logger.Error(e.BuildExceptionInfo());
}

public bool ValidateServerCertificate(object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors)
{
    if (sslPolicyErrors == SslPolicyErrors.None || sslPolicyErrors == SslPolicyErrors.RemoteCertificateNameMismatch)
        return true;

    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-24T17:48:45.397

我的猜测是服务器需要客户端证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-16T20:00:43.357

更新到 Windows build 20H2 后，这发生在我身上。它曾经只使用：

```
ssl.AuthenticateAsClient(_host); 
```

`enabledSslProtocols`但是在将参数显式设置为后，我设法在不使用证书的情况下再次连接`SslProtocols.Default`：

```
ssl.AuthenticateAsClient(_host, null, SslProtocols.Default, false); 
```

# maven - 如果该原型在 Maven 存储库中但未在交互模式中列出，我可以使用 Maven 原型吗

> ID：15816561
> 
> 赞同：0
> 
> 时间：2013-04-04T16:23:09.683
> 
> 标签：maven

我有一些开源项目的工作原型，我可以安装它，然后在 mvn archetype:generate 使用本地目录时使用。我想分享它，以便任何人都可以在他/她的项目中使用它。项目已经在使用 OSS Sonatype 的 Maven 公共存储库中。Sonatype 将archetype 打包在jar 文件中并表示它的正常依赖关系，所以这是我的问题：当我以这种方式在OSS Sonatype 中使用传统的发布过程时，用户是否可以使用我的archetype：

```
mvn archetype:generate -DarchetypeGroupId=pl.bristleback -DarchetypeArtifactId=webapp-archetype 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:48:56.663

[使用替代目录](http://maven.apache.org/archetype/maven-archetype-plugin/examples/generate-alternative-catalog.html)的生成项目告诉我们

> 通过将 archetypeCatalog 属性定义为特定值，可以将替代目录用作内部目录，该特定值可以是以下值之一：
> 
> 1.  **`internal`**仅使用内部目录。
> 2.  **`local`**仅使用本地目录。
> 3.  **`remote`**使用 Maven 的远程目录。目前没有提供目录。
> 4.  **`file://path/to/archetype-catalog.xml`**使用特定的本地目录。当目录文件命名为`archetype-catalog.xml`时，可以省略。
> 5.  **`http://url/to/archetype-catalog.xml`**使用特定的远程目录。当目录文件命名为`archetype-catalog.xml`时，可以省略。

您可以尝试使用以下命令创建：-

```
mvn archetype:generate 
    -DarchetypeCatalog=http://path/to/your/sonartype 
    -DarchetypeGroupId=pl.bristleback 
    -DarchetypeArtifactId=webapp-archetype 
```

我希望这可能会有所帮助。

# ruby - 用相同的捕获和额外的字符串替换正则表达式捕获

> ID：15816562
> 
> 赞同：0
> 
> 时间：2013-04-04T16:23:10.137
> 
> 标签：ruby, regex

我正在尝试转义字符串中的某些字符。特别想转

`abc/def.ghi`进入`abc\/def\.ghi`

我尝试使用以下语法：

```
1.9.3p125 :076 > "abc/def.ghi".gsub(/([\/.])/, '\\\1')
 => "abc\\1def\\1ghi" 
```

唔。这表现得好像捕获替换不起作用。然而，当我尝试这个时：

```
1.9.3p125 :075 > "abc/def.ghi".gsub(/([\/.])/, '\1')
 => "abc/def.ghi" 
```

...我得到了替换工作，但是，当然，我的前缀不是其中的一部分。

做这样的事情的正确语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:29:53.623

这应该更容易

```
gsub(/(?=[.\/])/, "\\") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:34:46.683

如果您尝试准备一个字符串以用作正则表达式模式，请使用正确的工具：

```
Regexp.escape('abc/def.ghi')
=> "abc/def\\.ghi" 
```

然后，您可以使用生成的字符串来创建正则表达式：

```
/#{ Regexp.escape('abc/def.ghi') }/
=> /abc\/def\.ghi/ 
```

或者：

```
Regexp.new(Regexp.escape('abc/def.ghi'))
=> /abc\/def\.ghi/ 
```

从[文档](http://www.ruby-doc.org/core-2.0/Regexp.html#method-c-escape)：

> 转义任何在正则表达式中具有特殊含义的字符。返回一个新的转义字符串，如果没有转义字符，则返回 self。对于任何字符串， Regexp.new(Regexp.escape(str))=~str 将为真。

```
Regexp.escape('\*?{}.')   #=> \\\*\?\{\}\. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T16:45:55.983

您可以将块传递给`gsub`：

```
>> "abc/def.ghi".gsub(/([\/.])/) {|m| "\\#{m}"}
=> "abc\\/def\\.ghi" 
```

不像@sawa 的答案那么优雅，但如果您需要替换字符串来包含捕获的组/反向引用（而不是在前瞻之前插入替换），这是我能找到的让它工作的唯一方法。

# scala - sbt 为不同的测试类型打包单独的 jar

> ID：15816565
> 
> 赞同：1
> 
> 时间：2013-04-04T16:23:22.170
> 
> 标签：scala, sbt

我们刚刚升级到在我们的项目中使用 sbt 12.2。我想将我们的测试打包在单独的 jar 中，例如：project-unit.jar、project-integration.jar

我们当前的文件夹结构是：

```
src
 main
   ...
 test
   scala
     com.company.unit
     com.company.integration
     com.company.functional 
```

任何建议都非常感谢。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T21:38:16.813

我找到了一种方法来做到这一点：

1.  为适当的测试类型创建打包任务：

    ```
    val integrationPackaging = TaskKey[File]("package-integration") 
    ```

2.  将包设置添加到测试设置：

    ```
    lazy val integrationTestSettings = createTestSettings("integration", IntegrationTests) ++ createPackageSettings("integration", IntegrationTests, integrationPackaging)

    private def createPackageSettings(testType: String, testConfiguration: Configuration, packagingTaskKey: TaskKey[sbt.File]) = {
      inConfig(testConfiguration)(Defaults.testSettings) ++
        Defaults.packageTaskSettings(packagingTaskKey, mappings in (Test, packageBin)) ++
        (artifactName in packagingTaskKey := {(scalaversion, moduleId, artifact) => "%s_%s-%s-%s.jar" format (moduleId.name, scalaversion.binary, buildVersion, testType)}) ++
        (mappings in packagingTaskKey ~= { (ms: Seq[(File,String)]) =>
          ms.filter { case (file, path) =>{ !file.getName.endsWith(".class") || file.getAbsolutePath.contains(testType) }
          }
        })
    } 
    ```

注意在创建包设置中，我必须：

*   添加默认测试设置以确保继承所有测试设置
*   添加默认测试包任务设置（使用 Test packageBin 中的映射）
*   添加 artifactName （你想要的 jar 名称）
*   为包任务键添加特定的映射（在上面的步骤 1 中创建），这是它的关键，我必须定义一个过滤器，以确保仅具有包含 testType 的路径的文件（例如“集成”、“单元”或“功能”）被选择和资源文件（例如，不以“.class”结尾的文件）

# github - 比较 GitHub gist 及其分支

> ID：15816568
> 
> 赞同：3
> 
> 时间：2013-04-04T16:23:34.090
> 
> 标签：github, diff, gist

我在 GitHub 上找到了一个有趣的要点，尝试了一下，发现了一个错误。我注意到有几个要点的分支，所以我想知道他们中的任何一个是否修复了我发现的错误。我可以看到分叉列表，其中一些被标记为已修改，但我看不出如何区分分叉和原始分叉之间的区别。有没有办法查看差异？

例如，我找到了一个[马尔科夫文本生成器](https://gist.github.com/agiliq/131679)。我可以看到[forks 列表](https://gist.github.com/agiliq/131679/forks)，但每个都只显示当前版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T16:23:34.090

这并不难，但我花了一段时间才意识到我在看什么。fork 的修订包括原始的修订，因此您可以通过查看 gist 分叉后的任何修订来了解差异。

例如，Eckanakar 的 fork 有[几个修订版](https://gist.github.com/Eckankar/360212/revisions)，您可以看到其中的变化。

# c++ - MSI - 有条件地注册 DLL

> ID：15816573
> 
> 赞同：2
> 
> 时间：2013-04-04T16:23:44.077
> 
> 标签：c++, visual-studio-2010, windows-installer, atl

我正在开发一个 .NET 分析器（我的项目输出是一个 DLL）。我已经构建了 2 个 DLL（用 c++ 编写）：一个将由 x86 .NET 进程加载，另一个由 x64 进程加载。我想生成一个 MSI（针对 x86 模式）来检查操作系统是 64 位还是 32 位。然后注册正确的DLL，即：

```
 - Project output : - the_x64.DLL
                    - the_x86.DLL
 - A single MSI that targets x86 machines : contains the 2 DLLs
                    - if the OS is 64 bits then both of the DLLs are registered
                    - if the OS is 32 bits then only the x86 dll is registered 
```

那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T17:23:34.543

MSI 平台不支持混合 32/64 位安装程序。有一些黑客可以创建“混合”MSI，但它不受官方支持。Microsoft 推荐的方法是创建 2 个或更多 MSI（通用、32 位提供程序、64 位提供程序），然后使用引导程序（如 WiX Burn 或 InstallShield Suite Installers）为最终用户提供单一安装体验。

# excel - 将行复制到不同的列，行增加 21

> ID：15816576
> 
> 赞同：0
> 
> 时间：2013-04-04T16:23:52.490
> 
> 标签：excel, ms-office, vba

我想将我的数据从不同的行复制到其他列。例子。

```
B4 has to be copied to H129 ,
B25 to H130,
B46 to H131...and so on .. 
```

这里的行增加了 21 行。

如何在excel中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:28:46.903

转到 VBA 并：

```
Sub sdgfsa()

    Dim i As Integer
    Dim j As Integer

    j = 129
    For i = 4 To 1000 Step 21 'put the end number you want, the start is 4 like your example
        Plan1.Cells(j, 8).Value = Plan1.Cells(i, 2).Value 'Here, plan1 represents the sheet, 2 is B column, 8 is H column
        'or you can use KazJaw's Copy here
        j = j + 1 'j gets incremented
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:30:44.000

当您需要复制所有内容（即值和格式）时，请以这种方式进行：

```
Range("B4").Copy Range("H129") 
```

使用@Daniel 代码，您可能在循环中需要这样的东西

```
'...see Daniel answer for beginning
Plan1.Cells(i, 2).Copy Plan1.Cells(j, 8)
'... and so on 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T16:49:01.983

在单元格 H129 中输入以下公式：

```
=INDIRECT("b"&(ROW(H129)-129)*21+4) 
```

然后使用“向下填充”将此单元格中的公式复制到其下方的单元格中。

这是因为“H129”引用将在复制时更改为 H130、H131 等，因此 ROW() 函数将连续返回更高的数字。

**编辑：**

更正了公式以匹配相关示例。

# javascript - $.mobile.changePage 不加载 CSS

> ID：15816577
> 
> 赞同：0
> 
> 时间：2013-04-04T16:23:55.477
> 
> 标签：javascript, css, ajax, mobile

这是 ajax 的一个非常奇怪的情况。我有一个登录页面，它通过 ajax 调用主页，如下所示：

```
 // Function to call WCF  Service - Infrastructure       
    function CallService() {
        $.ajax({
            type: Type, //GET or POST or PUT or DELETE verb
            url: Url, // Location of the service
            data: Data, //Data sent to server
            contentType: ContentType, // content type sent to server
            dataType: DataType, //Expected data format from server
            processdata: ProcessData, //True or False
            success: function (msg) {//On Successfull service call
                ServiceSucceeded(msg);
            },
            error: ServiceFailed// When Service call fails
        });
    }

    function ServiceSucceeded(result) {

        if (DataType == "json") {
            var resultText = result;
            if (resultText.result == "True") {
                $.mobile.changePage("MainMenu.aspx",{ transition: "slideup" });
            }
            else {
                //Show Error Message
            }
        }
    } 
```

在每个页面中，我都引用了一个名为“general.js”的 js，其中包含以下代码：

```
function processMenu(menuOptions) {
var options = menuOptions.split('');
var currentOptions = '1234567'.split('')

for (i = 0; i < currentOptions.length; i++) {
    var index = (i + 1) + '';
    if (options.indexOf(index) < 0) {
        var op = $('#op' + currentOptions[i]);
        op.attr('disabled', true);
        op.addClass('btndisabled');
        $(op).live("click", function (event) {
            //do stuff
            event.preventDefault(); // Prevent default link behaviour
        });
    }
} 
```

}

此代码验证一些编号控件并启用名为“btndisabled”的 CSS（如果需要）

“btndisabled” CSS 是：

```
.btndisabled{    
    background-color: rgb(236,233,216);
    color: #CCC;
    font-style: normal;
} 
```

好的情况是，当我使用

```
$.mobile.changePage("MainMenu.aspx?",{ transition: "slideup" }); 
```

Login.aspx 内容更改为 MainMenu.aspx 内容和 js：

```
op.attr('disabled', true);
op.addClass('btndisabled');
$(op).live("click", function (event) {
    //do stuff
    event.preventDefault(); // Prevent default link behaviour
}); 
```

执行时，不应用 CSS，但执行“event.preventDefault”。我需要应用 CSS，但我不知道有什么问题。有任何想法吗？

**更新**

在回发和 ajax 调用中观察对象的行为，我意识到一些非常有趣的事情，但我不知道该怎么想。

*回发时*

![在此处输入图像描述](https://i.stack.imgur.com/DgUca.png)

查看 HTMLAnchorElement

*阿贾克斯*

![在此处输入图像描述](https://i.stack.imgur.com/J35T8.png)

如果 DOM 没有加载锚对象，怎么可能分配 event.preventDefault()？？？

这太疯狂了...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:29:04.937

您的答案可能在 jQuery Mobile 论坛上：

[http://forum.jquery.com/topic/mobile-css-gets-lost-after-using-ajax-to-update-content](http://forum.jquery.com/topic/mobile-css-gets-lost-after-using-ajax-to-update-content)

# matlab - Matlab 图的绘图编辑状态

> ID：15816579
> 
> 赞同：2
> 
> 时间：2013-04-04T16:24:01.197
> 
> 标签：matlab, figure

如何`plotedit`在函数中提取 Matlab 图形的状态？如果我想知道当前图形的缩放状态，我可以这样写：

```
zoomState =  get(zoom(gcf), 'Enable'); 
```

类似的语法 for`plotedit`不起作用，因为`plotedit(gcf)`切换`plotedit`状态而不返回任何内容。由于无法获取`plotedit`' 的当前状态，我不知道如何在我的函数完成后暂时将其设置为“关闭”并恢复其值。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:07:52.587

我刚刚收到了 MathWorks 关于这个问题的答复：

> 这是您可能想要使用的未记录功能：
> 
> ```
> ison = plotedit(gcf,'isactive') 
> ```
> 
> 这将告诉您 PLOTEDIT 是否处于活动状态。但是，由于这是未记录的，因此它可能会在将来的版本中更改或不起作用。

我认为这回答了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:38:15.900

如果你`open plotedit`在命令行输入，你会看到它实际上是一个 m 文件。当状态切换时，它会调用未记录的函数`activateuimode`来完成脏活。胡乱猜测，我`help getuimode`在命令行输入并返回消息

```
 This function is undocumented and will change in a future release 
```

所以函数存在。`activateuimode`据推测，使用与in相同的输入参数调用它`plotedit`会做你想要的。那是，

```
getuimode(myFigHandle, 'Standard.EditPlot') 
```

在我的系统上，`[]`如果不是处于编辑模式，它会返回，如果是，它会返回一个实例`uitools.uimode`。

但是请注意，这种方法可能有点狡猾 - 正如帮助所说，它可能会在未来的版本中改变。如果你打开`getuimode`，你会看到它自 2007 年以来一直是一样的，但据我了解，在 R2013 中对 UI 系统进行了大修，所以它可能在最近的版本中发生了变化（我正在运行 R2012a） .

# orbeon - 带有自定义持久层的 Orbeon 4.0

> ID：15816580
> 
> 赞同：0
> 
> 时间：2013-04-04T16:24:01.920
> 
> 标签：orbeon

我想设置我的自定义持久层以使用 Orbeon Form Designer 4.0。但我对 Designer 链接端的工具箱有疑问。如果我这样编辑，工具箱不会显示`properties-local.xml`：

```
<property as="xs:string" name="oxf.fr.persistence.provider.*.*.*"
          value="myDB"/>
<property as="xs:anyURI" name="oxf.fr.persistence.myDB.uri"
          value="http://127.0.0.1:8080/my-persistence"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:50:22.230

我怀疑你看到这个是因为 Orbeon Forms 在与你的持久层通信时遇到了一些麻烦。该工具箱显示[部分模板](http://wiki.orbeon.com/forms/doc/user-guide/form-builder-user-guide/section-templates)的条目，这些条目通常来自与`library`当前表单在同一应用程序中调用的特殊已发布表单。因此，要显示部分模板，它需要能够与持久层对话。

我建议您检查`orbeon.log`错误，并使用像[Charles](http://blog.orbeon.com/2013/04/let-charles-help-you-monitor-http.html)这样的工具来监控从 Orbeon Forms 到您自己的持久层的 HTTP 连接。

# javascript - TinyEditor - 从页面中删除实例

> ID：15816584
> 
> 赞同：0
> 
> 时间：2013-04-04T16:24:19.220
> 
> 标签：javascript, tinyeditor

我们使用这个[站点上](http://www.scriptiny.com/2010/02/javascript-wysiwyg-editor/)的 TinyEditor 脚本作为我们正在运行的仪表板的简单所见即所得编辑器。

如果不再需要此编辑器的实例，如何从页面中删除它？

谢谢

来源：
[http ://www.scriptiny.com/2010/02/javascript-wysiwyg-editor/](http://www.scriptiny.com/2010/02/javascript-wysiwyg-editor/)

# android - hashmap 在 simpleadapter 中工作，但在自定义数组适配器中不工作

> ID：15816590
> 
> 赞同：2
> 
> 时间：2013-04-04T16:24:36.593
> 
> 标签：android, listview, hashmap, lazy-loading, android-arrayadapter

下面代码的哈希图适用于 simpleadapter 数组，但不适用于自定义数组适配器。为什么？我该如何解决？请帮助。无法解决。尝试了一切。

我正在使用lazyLoading 类来加载图像。

```
public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                HashMap<String, String> o = (HashMap<String, String>) list.getItemAtPosition(position);
                Toast.makeText(CustomizedListView.this, "ID '" + o.get("KEY_TITLE") + "' was clicked.", Toast.LENGTH_SHORT).show(); 

            } 
```

上面显示的 onclick 崩溃的整个代码：

```
public class CustomizedListView extends Activity {
    // All static variables
    static final String URL = "https://itunes.apple.com/us/rss/topalbums/limit=20/json";
    // XML node keys
    static final String KEY_SONG = "song"; // parent node
    static final String KEY_ID = "id";
    static final String KEY_TITLE = "title";
    static final String KEY_ARTIST = "artist";
    static final String KEY_DURATION = "duration";
    static final String KEY_THUMB_URL = "thumb_url";

    ListView list;
    LazyAdapter adapter;

    HashMap<String, String> map;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

        JSONObject json = JSONfunctions.getJSONfromURL(URL);

        try {
            JSONObject arr2 = json.getJSONObject("feed");
            JSONArray arr = arr2.getJSONArray("entry");

            for (int i = 0; i < arr.length(); i++) {
                JSONObject e1 = arr.getJSONObject(i);

                JSONArray arr3 = e1.getJSONArray("im:image");

                JSONObject arr8 = e1.getJSONObject("im:name");

                JSONObject arr10 = e1.getJSONObject("im:artist");

                    JSONObject e12 = arr3.getJSONObject(0);

            // creating new HashMap
             map = new HashMap<String, String>();

            map.put(KEY_THUMB_URL,  e12.getString("label"));

            map.put(KEY_ARTIST, arr8.getString("label"));
            map.put(KEY_TITLE, arr10.getString("label"));
            // adding HashList to ArrayList
            songsList.add(map);
            }

        } catch (JSONException e) {
            // Log.e("log_tag", "Error parsing data "+e.toString());
            Toast.makeText(getBaseContext(),
                    "Network communication error!", 5).show();
        }

        list=(ListView)findViewById(R.id.list);

        // Getting adapter by passing xml data ArrayList
        adapter=new LazyAdapter(this, songsList);        
        list.setAdapter(adapter);

        // Click event for single list row
        list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                                HashMap<String, String> o= (HashMap<String, String>) list.getItemAtPosition(position);                  

                                Toast.makeText(CustomizedListView.this, "ID '" + o.get("title") + "' was clicked.", Toast.LENGTH_SHORT).show(); 

            }
        });     
    }   
} 
```

以下代码完美运行：

```
public class Main extends ListActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listplaceholder);

        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

        JSONObject json = JSONfunctions.getJSONfromURL("http://api.geonames.org/earthquakesJSON?north=44.1&south=-9.9&east=-22.4&west=55.2&username=demo");

        try{

            JSONArray  earthquakes = json.getJSONArray("earthquakes");

            for(int i=0;i<earthquakes.length();i++){                        
                HashMap<String, String> map = new HashMap<String, String>();    
                JSONObject e = earthquakes.getJSONObject(i);

                map.put("id",  String.valueOf(i));
                map.put("name", "Earthquake name:" + e.getString("eqid"));
                map.put("magnitude", "Magnitude: " +  e.getString("magnitude"));
                mylist.add(map);            
            }       
        }catch(JSONException e)        {
             Log.e("log_tag", "Error parsing data "+e.toString());
        }

        ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.main, 
                        new String[] { "name", "magnitude" }, 
                        new int[] { R.id.item_title, R.id.item_subtitle });

        setListAdapter(adapter);

        final ListView lv = getListView();
        lv.setTextFilterEnabled(true);  
        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
                @SuppressWarnings("unchecked")
                HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
                Toast.makeText(Main.this, "ID '" + o.get("id") + "' was clicked.", Toast.LENGTH_SHORT).show(); 

            }
        });
    }
} 
```

日志猫：

```
threadid=1: thread exiting with uncaught exception (group=0x40ab0228)
 FATAL EXCEPTION: main
 java.lang.ClassCastException: java.lang.Integer cannot be cast to java.util.HashMap
    at com.example.androidhive.CustomizedListView$1.onItemClick(CustomizedListView.java:94)
    at android.widget.AdapterView.performItemClick(AdapterView.java:292)
    at android.widget.AbsListView.performItemClick(AbsListView.java:1077)
    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2533)
    at android.widget.AbsListView$1.run(AbsListView.java:3198)
    at android.os.Handler.handleCallback(Handler.java:605)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:154)
    at android.app.ActivityThread.main(ActivityThread.java:4945)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method) 
```

LazyAdapter.java

```
public class LazyAdapter extends BaseAdapter {

    private Activity activity;
    private ArrayList<HashMap<String, String>> data=new ArrayList<HashMap<String, String>>();
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

   public static HashMap<String, String> song;

    public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.list_row, null);

        TextView title = (TextView)vi.findViewById(R.id.title); // title
        TextView artist = (TextView)vi.findViewById(R.id.artist); // artist name
        TextView duration = (TextView)vi.findViewById(R.id.duration); // duration
        ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

         song = new HashMap<String, String>();
        song = data.get(position);

        // Setting all values in listview
        title.setText(song.get(CustomizedListView.KEY_TITLE));
        artist.setText(song.get(CustomizedListView.KEY_ARTIST));
        duration.setText(song.get(CustomizedListView.KEY_DURATION));
        imageLoader.DisplayImage(song.get(CustomizedListView.KEY_THUMB_URL), thumb_image);
        return vi;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:31:27.070

在您的自定义适配器中，您正在返回位置而不是 Item

```
public Object getItem(int position) {
            return position;
        } 
```

试试用这个

```
 public Object getItem(int position) {
                return data.get(position);
            } 
```

这将解决您的问题

# hyperlink - 如何通过gmail将链接直接发送到本地服务器文件

> ID：15816592
> 
> 赞同：0
> 
> 时间：2013-04-04T16:24:39.320
> 
> 标签：hyperlink, shortcuts, afp

通常通过 gmail 我会收到一个指向公司服务器上文件位置的链接，即

afp://Client/Somename/Someothername/Bla/Bla/Bla/Hereisthefile.file 或 file:///Volumes/Client/Somename/Someothername/Bla/Bla/Bla/Hereisthefile.file

有时这个名称很长，以至于导航到该文件夹​​实际上需要一分钟。有没有一种方法，或者一个小部件或软件可以让我点击链接，剪切过去的链接，这样我就可以直接导航到路径？我知道 gmail直接在电子邮件中[禁止](http://productforums.google.com/forum/#!category-topic/gmail/composing-and-sending-messages/XRZYPhTazck)这样做，但也许有解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T23:37:02.257

在 OSX 中：

1.  三击整个路径以选择它（不仅仅是蓝色部分）
2.  按命令 c 复制链接
3.  单击桌面上的任意位置或确保切换到 Finder
4.  按命令 k
5.  将链接粘贴到服务器地址框中
6.  按 connect 或 enter 并到达文件夹目的地。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-25T20:33:13.373

Space Age Crystal 的建议适用于您的 afp（和 smb）链接，但不适用于文件链接。

对于文件链接，请替换最后三个步骤：

4.  按 Shift-Command-G：Shift-⌘-G
5.  将链接粘贴到转到文件夹框中
6.  按 Go（或按 Return 或 Enter 键）到达文件夹目的地。

# java - Java DOM如何检查XML中是否存在节点

> ID：15816593
> 
> 赞同：7
> 
> 时间：2013-04-04T16:24:42.410
> 
> 标签：java, xml, dom

这是我的xml文件

```
<?xml version="1.0" encoding="UTF-8"?>
<productlist>
<product>
<title>1</title>
<price>30</price>
</product>
<product>
<title>2</title>
<price>9</price>
</product>
<product>
<title>3</title>
</product>
</productlist> 
```

我需要做的是使用 Java DOM API 打印出 XML 文件中包含“价格”标签的所有内容。诸如此类的事情

```
title:1
price:30 
title:2 
price:9 
```

在 org.w3c.dom 文档中，我只找到 hasAttribute(String name) 方法来检查此元素是否具有属性，但我在文档中找不到像“hasTag(String name)”这样的方法。我找到这个网站[http://www.java-forums.org/xml/62136-check-whether-xml-tag-exists-while-parsing-xml-using-dom-java.html](http://www.java-forums.org/xml/62136-check-whether-xml-tag-exists-while-parsing-xml-using-dom-java.html)但不幸的是我无法打开地点。希望你能帮忙。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-04T16:27:38.700

只需调用[`getElementsByTagName`](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Element.html#getElementsByTagName%28java.lang.String%29)并查看返回的列表是否有任何节点（使用`NodeList.getLength()`）。

# wcf - Azure 服务总线中继偶发性故障异常

> ID：15816594
> 
> 赞同：7
> 
> 时间：2013-04-04T16:24:44.957
> 
> 标签：wcf, azure, azure-sdk-.net, azure-servicebusrelay, basichttprelaybinding

我们无法确定为什么 Azure **BasicHttpRelay**`FaultException`在没有任何详细信息的情况下偶尔会抛出异常。我们已启用 WCF 诊断跟踪，但可用的堆栈跟踪信息仍然相同。似乎 WCF 客户端通道在短时间内失败，然后很快返回。

我们确实缓存了 WCF 通道 ( *eg`CreateChannel`* )，但这是我们第一次遇到这种奇怪的行为。我们有其他 Azure 服务总线中继解决方案可以很好地使用这种方法。

### 错误信息：

> 处理请求时遇到错误。

### 堆栈跟踪：

```
   在 System.ServiceModel.Channels.ServiceChannel.HandleReply（ProxyOperationRuntime 操作，ProxyRpc& rpc）
   在 System.ServiceModel.Channels.ServiceChannel.Call（字符串操作，布尔单向，ProxyOperationRuntime 操作，Object[] 输入，Object[] 输出，TimeSpan 超时）
   在 System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime 操作)
   在 System.ServiceModel.Channels.ServiceChannelProxy.Invoke（IMessage 消息）

在 [0] 处重新抛出异常：
   在 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage（IMessage reqMsg，IMessage retMsg）
   在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke（MessageData& msgData，Int32 类型）
   在 [我们的 WCF 方法] ...

```

### FaultException - FaultCode 详细信息：

> **名称：** ServerErrorFault
> **命名空间：http:** [//schemas.microsoft.com/netservices/2009/05/servicebus/relay](http://schemas.microsoft.com/netservices/2009/05/servicebus/relay)
> **IsPredefinedFault：**假
> **IsReceiverFault：**假
> **IsSenderFault：**假

### 肥皂消息

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header />
  <s:Body>
    <s:Fault>
      <faultcode xmlns:a="http://schemas.microsoft.com/netservices/2009/05/servicebus/relay">a:ServerErrorFault</faultcode>
      <faultstring xml:lang="en-US">There was an error encountered while processing the request.</faultstring>
      <detail>
        <ServerErrorFault xmlns="http://schemas.microsoft.com/netservices/2009/05/servicebus/relay" xmlns:i="http://www.w3.org/2001/XMLSchema-instance" />
      </detail>
    </s:Fault>
  </s:Body>
</s:Envelope> 
```

通过调试，我们可以看到服务器正确响应了消息请求（*通过 IDispatchMessageInspector*），但客户端未能正确处理响应（*IClientMessageInspector 报告错误*）。*在客户端通道看似自我纠正*后，后续中继请求将成功。这些故障似乎是间歇性的，而不是负载驱动的。我们从未在 Azure 中继之外看到这些`FaultException`错误。`basicHttpBinding`

有没有人有什么建议？我们正在使用**Azure SDK 1.8**。

我尝试使用共享密钥配置新的**服务总线中继命名空间**`owner`，但仍然看到相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T17:42:30.333

与 MS 联系后 - 这个问题原来是中继或 SDK 的 MS 错误，特别是在使用[**Http Connectivity Mode**](http://msdn.microsoft.com/en-us/library/microsoft.servicebus.connectivitysettings.mode.aspx)时。此时，唯一的解决方法是确保[打开适当的传出 TCP 端口，](http://msdn.microsoft.com/en-us/library/windowsazure/ee706729.aspx)以确保与 Azure 中继的可靠连接。

**允许[传出 TCP 端口](http://msdn.microsoft.com/en-us/library/windowsazure/ee732535.aspx)：9350 - 9354**

MS 告诉我们，他们仍在努力解决根本原因。希望此解决方法对其他人有所帮助。我们的公司防火墙阻止了这些 TCP 端口，这迫使所有通信都通过端口 80，这必须触发此问题。积极的一面是，打开这些端口可以在启动侦听器时更快地连接到中继（*[AutoDetect](http://msdn.microsoft.com/en-us/library/microsoft.servicebus.connectivitysettings.mode.aspx)不必每次都检查 TCP 端口的可用性*）。

# java - 在一段时间后或在Java中自动到达指定时间时删除记录

> ID：15816595
> 
> 赞同：0
> 
> 时间：2013-04-04T16:24:47.887
> 
> 标签：java, mysql, websocket, real-time

我正在开发一个 Java Web 应用程序。场景描述如下：

*   许多用户提交他们的状态，他们也可以看到其他人的状态。它看起来像一种社交网络。

*   他们的状态有一段时间显示，在这段时间之后，他们在数据库中的状态将被删除。

*   在他们的状态被删除时，向所有用户发送通知以请求更新（已删除的状态必须实时消失！）

我尝试通过 Java Web 应用程序中的线程自动执行此操作。但是，我遇到了一些问题：

+可以这样管理数据库吗？我想过数据库事件，但是当一条记录被删除时，我不会被注意到。

+我正在使用 web socket 使应用程序实时工作。如果有人更新或更改了新状态，则可以使用 Web 套接字向所有用户发送更新通知。但是当更改来自数据库时，我不知道如何发送这样的通知。

你能给我一些想法吗？提前谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:29:59.627

您可以使用`DelayQueue`存储在指定延迟时删除的每个项目，当您删除项目时，删除数据库中的记录并向浏览器发送通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:17:28.810

以下是如何在 Java EE 6 应用程序中使用计时器服务的教程：

[http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:19:28.577

如果即使您的程序崩溃也需要删除状态，那么我建议您使用[石英](http://quartz-scheduler.org/)- 这样如果您的程序崩溃，那么石英将在您重新加载程序时更新数据库。如果您的程序不需要如此健壮，那么请改用 DelayQueue。

# .net - .NET CLR 和 CPU 架构依赖

> ID：15816601
> 
> 赞同：1
> 
> 时间：2013-04-04T16:25:02.100
> 
> 标签：.net, jvm, cross-platform, clr, virtual-machine

当代码在可以将字节码转换为体系结构特定指令的虚拟机上执行时，为什么针对不同的 CPU 体系结构（x86 和 ARM）有不同版本的 Windows（Windows 8 和 RT）？例如，Android 基于在 JVM 上执行的 Java，这就是为什么智能手机配备 ARM 和 Intel CPU 并完全兼容的原因。微软不这样做的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:32:18.653

> 当代码在可以将字节码转换为体系结构特定指令的虚拟机上执行时，为什么针对不同的 CPU 体系结构（x86 和 ARM）有不同版本的 Windows（Windows 8 和 RT）？

在 x86 版本的 Windows 8 上，并非所有代码都在虚拟机上执行。桌面模式应用程序作为完整的 x86 或 x64 进程运行。

话虽如此，我相信这里的部分目标是故意限制和更改这些设备上的 API，而不是提供全面支持。.NET 框架中有许多类型和方法是为“桌面”或“服务器”应用程序设计的。虽然（理论上）可以通过转换为本机指令来使这些工作，但整体架构不适合这些设备。

提供新的 API 和特定于 Windows 8（和 Windows Phone 8）的单独“框架”允许框架将自身限制为适当的 API - 在延迟（无同步方法）、功耗或其他类似问题方面适当。

话虽如此，可移植类库确实尝试在此处为大多数“纯”逻辑程序集搭建桥梁。使用 PCL，您可以编写可在 Windows 8（桌面和 RT、电话等）上使用的单个程序集。

# multithreading - 实体框架和 LINQ 的死锁

> ID：15816602
> 
> 赞同：7
> 
> 时间：2013-04-04T16:25:04.050
> 
> 标签：multithreading, linq, entity-framework, deadlock, typedescriptor

我有一个 asp.net/mvc 3/entity framework 4.1 Web 应用程序，它访问类库以获取查找表数据。当我第一次访问该网站并尝试同时加载两个不同的页面时，应用程序池会挂起。数据库中没有死锁或任何活动。我使用 windbg/vs2010 调试器来查找线程锁。两个线程锁定在`System.Component.TypeDescriptor`。

执行卡在`lookuptable.ToList` Code ：

```
 Using transaction As New TransactionScope(TransactionScopeOption.RequiresNew, 
            New TransactionOptions() With 
              {.IsolationLevel = IsolationLevel.ReadUncommitted})
            Using db As New Entity
              Dim lookuptable = From lk In db.LookUpTable Where lk.Id = pId Select lk
               returnValue = lookuptable.ToList
            End Using
    End Using 
```

并行堆栈图像：

[![](https://i.stack.imgur.com/bF4a2.png)](https://i.stack.imgur.com/bF4a2.png)

谢谢你的帮助

# scope - fortran 模块的范围

> ID：15816605
> 
> 赞同：1
> 
> 时间：2013-04-04T16:25:06.863
> 
> 标签：scope, fortran

我已经问过这个问题，但是这次我会尝试更清楚。我对 fortran 真的很陌生，所以请原谅任何语法错误，这是更多的伪代码。

```
module variables
   implicit none
   SAVE

   integer x
   integer y

 end module

subroutine init()

  use variables

  x = x + 2
  y = y + 1
endsubroutine 
```

那么我的主要程序将是

```
 program main
    use variables
    implicit none

    call init()

    call some_other_function()
  endprogram 
```

如果我包含我的模块，它们是否会在 some_other_function() 中保留它们的值，假设 some_other_function() 是一个巨大的模拟程序的抽象。我可以依靠我的初始化变量保持它们的值吗？

那是模块中的SAVE语句吗？

背景信息：我的 program1 被 program2 调用了很长时间。Program1 有一个巨大的 intilization 阶段，只需要发生一次。如果我在程序 2 调用程序 1 之前运行初始阶段，我可以依靠保存所有模块声明的变量吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:51:11.940

使用模块中的`SAVE`语句，模块变量的值会在程序运行期间保留。如果您在一个程序中初始化它们，主程序和其他程序将看到这些值。只要模块变量在范围内，它们就会被保留，因此由于您`use`是主程序中的示例模块，因此即使没有`SAVE`语句，它们的值也会在运行期间保留。原则上，如果一个模块只在某些过程中使用，而一条`SAVE`语句没有使用，编译器可以在调用链中没有任何过程时“忘记”这些值。可能许多或所有编译器实际上并没有重置这些值......确定模块是否超出范围将是额外的工作。

PS您的示例有一个错误，因为您从未初始化 x 和 y。你只改变他们的价值观。

# sql - 是否有在 MS Access 中创建动态、基于表单的查询的首选方法？

> ID：15816610
> 
> 赞同：3
> 
> 时间：2013-04-04T16:25:18.950
> 
> 标签：sql, database, ms-access, vba

关于我正在构建的数据库采用的方法的一般问题。我计划使用一些表单，允许 DB 业务用户输入条件，通过单选按钮等限制他们的搜索，然后根据他们的选择运行查询。

对于有一个或两个过滤器的简单查询，在查询设计视图中将数据字段的条件与相应的表单元素相关联似乎很容易，但是在处理嵌套时这种方法会失败（并且似乎很难阅读/编辑） if 语句（例如，如果 A 则为 x，如果 B 则为 y，如果 C 则为 z，否则为 q）。

我遇到了一篇文章，该文章描述了在数据库中创建一个单独的表，其中将存储查询名称和相应的 SQL 字符串，它们是在 VBA 中创建的，在 onClick 事件或某些基于表单的触发器之后运行。确定查询条件的逻辑都在VBA中，一旦代码执行，系统就会留下一条干净的SQL语句，存储在上述表中，然后用于执行查询。我相信每次访问/修改表单并请求查询时，表中的 SQL 字符串都会被覆盖。

由于这是我从事的第一个严肃的数据库，我正在寻找有关采取方法的一些指导。我刚才描述的是正确的还是处理这种情况的相当标准/常见的方法？有什么大问题吗？立即想到的一个问题是，如果两个数据库用户同时尝试使用不同的条件运行相同的查询，会发生什么？应该注意的是，我的用户群很小——可能只有 5 个用户会顺便访问数据库，用于临时报告等。

提前致谢！

[编辑：这是我所指的论坛帖子：单独表中的 SQL 字符串](http://www.access-programmers.co.uk/forums/showthread.php?t=119990&highlight=dynamic%20SQL)

编辑2：作为一个一般示例，假设我的数据库有一个如下表：

> ID......Sale_Date......类别
> 
> * * *
> 
> 1....... 2013 年 1 月 1 日............Foo
> 2....... 2013 年 1 月 3 日............酒吧
> 3...... .. 2013 年 1 月 1 日........酒吧
> 4........ 2013 年 1 月 7 日............酒吧

现在在我的表单上，我有文本框，用户可以在其中指定日期范围，这在查询中被过滤为

> 在 [Forms]![myFrm]![FromDate] 和 [Forms]![myFrm]![ToDate] 之间

效果很好。

至于类别，我希望有复选框或其他一些表单元素，用户可以在其中指定包含/排除的类别。这是我遇到问题的地方。我试过了：

> IIf([Forms]![myFrm]![Cat]=1,([tbl_data].[Category]) In ("Foo","Bar"),IIf([Forms]![myFrm]![Cat]= 2,"Foo","酒吧"))

... Cat=1 代表“全部”，2 和 3 分别代表 Foo 和 Bar。Access 给我一个错误，即查询太复杂，但如果我去掉嵌套的 if（因此忽略搜索这两个类别的选项），它就可以工作。

现在，显然这是一个大大简化的示例，但它让我开始思考如何处理表单驱动的查询，因为数据库的增长和更多的固定查询被加入。VBA 的想法是代码将运行，评估形成数据，然后将 SQL 构造为

> 选择...
> 从...
> 在哪里（“Foo”，“Bar”）

希望这有助于澄清一些事情。请原谅我的无知...随着我的发展，我仍在学习很多东西。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:58:06.007

关于你问题中的这一点......

*“如果两个数据库用户同时尝试使用不同的标准运行相同的查询会发生什么？”*

在多用户 Access 应用程序中，您应该将 db 拆分为前端和后端 db 文件。BE db 应该包含表、索引和关系。FE db 应该包括您的查询、表单、报告等（基本上是您的应用程序需要的除了表之外的所有内容）和到 BE 表的链接。

将 BE db 文件放在所有应用程序用户都可以访问的网络共享上。每个用户都应该收到自己的 FE 数据库副本。

在这种情况下，每个用户都可以创建和运行他们自己的自定义即席查询，而不会影响其他用户的查询。

如果需要将查询条件或整个 SQL 语句存储在某处，可以将它们存储在 FE 中的本地表中，也可以将它们存储在普通 BE 表中但包含一个字段，可能是用户 ID，以便每个用户的查询可以单独存储.

请注意，如果您决定为每个 FE 用户在本地存储，当您需要部署新的 FE 版本时，他们保存的设置可能会被丢弃。在这种情况下，更好的方法是为每个用户提供一个辅助数据库文件，他们可以在其中存储他们的自定义设置。然后，您可以在部署新的 FE 版本时保留它们的设置。

我发现很难掌握您问题的“大局”。但我认为您应该在拆分应用程序的上下文中考虑它。

对于一般的“搜索表单”建议，请参阅 Allen Browne 的详细示例中可以重复使用的内容：[搜索条件](http://allenbrowne.com/ser-62.html)

* * *

在我看来，您也许可以使用一种简单的方法。

为搜索结果创建一个单独的表单。基于包含您要显示的所有字段的查询的表单。如果您需要`WHERE`该查询中的子句，请将其限制为仅适用于所有搜索变体的条件......也许`Active = True`。如果您无法确定适用于所有搜索的任何条件，请不要包含`WHERE`子句。

然后在您的搜索表单中，根据“立即搜索”命令按钮的单击事件评估用户的搜索条件。建立一个`WHERE`没有单词的字符串`WHERE`并将其用作*WhereCondition*选项`DoCmd.OpenForm`。

```
If Not IsNull(Me.txtStartDate) Then
    strWhere = strWhere = " AND date_field >=" & _
        Format(Me.txtStartDate, "\#yyyy-m-d\#")
End If
If Not IsNull(Me.txtCategory) Then
    strWhere = strWhere = " AND category =" & Me.txtCategory
End If
If Len(strWhere) > 0 Then
    strWhere = Mid(strWhere, 6) ' discard leading " AND "
    DoCmd.OpenForm "frmSearchResults", WhereCondition:=strWhere
Else
    MsgBox "nothing to search for"
End If 
```

如果其中一个搜索条件是一组选项中的一个或多个项目，则将它们显示为多选列表框并循环遍历列表框的`.ItemsSelected`属性以构建一个字符串，例如`some_field IN ("a", "b", "z")`. 如果您对那篇文章有疑问，请发布一个新问题，我们可以解决它。

检查我之前链接的 Allen Browne 的示例。我记得，他使用了类似的技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T04:35:19.840

请记住，Access 已经是并且已经这样做了：如果您选择“按表单过滤”，它会弹出一个表单来帮助您为查询或表单构建过滤器，并帮助您自动构建报告。

因此，您需要确定您正在构建的内容与Access 提供的内容*不同*且*更好。*

通常，这意味着您将过滤报告，并且您将通过仅提供有限的选项来简化过滤。

您确实需要考虑第一个标准。鉴于您过滤查询和表单，并且您可以自动构建报告，也许您的用户只需要指向 MS Access 中已经存在的功能。

由于过滤报告是常见的请求，您可以使用现有代码：[OpenGate](http://www.opengatesw.net/products/Access-Report-Builder/Report-Builder-for-Access.htm)是商业报告生成器的一个示例：谷歌搜索并查看其他内容，包括您可以找到的免费和演示软件。

如果您确实想制作自己的过滤器构建器，这里有一些提示：

1）不要使用表单引用。如果我麻烦使用特殊的过滤器构建器，我会将实际数据值构建到 sql 中，从而避免您遇到的问题。当您不想要特殊的过滤器构建器表单的复杂性时，您可以使用对表单上的字段的引用。

2）您可以使用表格作为报告。只需将背景设置为白色，并使布局看起来像报告。这会给你一个可过滤的报告。它与报告的工作方式并不完全相同：有时这是一个优势。

3）大多数人不想玩他们的过滤器。他们想要一个特定的查询/报告设置并保存，然后他们每天/每周/每月/每年运行它。

4）如果用户想要提取一个特定的数据点，他们可能不需要让它看起来与更大报告中的单行完全一样。不要看中配置上的单选按钮：只需拉出不同版本的表单/查询/报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T03:32:48.010

对此有微软官方的回答：http: [//support.microsoft.com/kb/304302](http://support.microsoft.com/kb/304302)

基本上，它取决于您是否需要在查询中的第一个过滤条件之前只需要“where”这个词。后面的过滤条件，如果使用的话，都以单词“and”开头。从那里，您可以根据上面的 MS 知识库文章，使用 VBA 动态构建 SQL 查询字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T17:08:24.147

嗨，正如我所见，您可以使用链接表将数据与用户分开，这样您就不必担心多人同时使用数据库时会发生什么。

至于研究，我使用类似的东西。

```
Set MyDatabase = CurrentDb
strQuote = Chr$(34)
Set MyQuery = MyDatabase.QueryDefs("YourQuery")
I = 0

SQL_String = "SELECT T_Project.YourID, T_Project.Project_Title " & _
             "FROM (T_Project LEFT JOIN T_Groupe ON T_Project.Code_Group = T_Groupe.Code_Group) LEFT JOIN T__Contact ON T_Project.Code_Employee = T__Contact.Code_Contact "

If Not IsNull(Me.R_YourID) Then
    MyCriteria(I, 0) = " YourID "
    MyCriteria(I, 1) = Me.R_YourID
    MyCriteria(I, 2) = "="
    I = I + 1
End If

If Not IsNull(Me.R_Project_Title) Then
    MyCriteria(I, 0) = " Project_Title "
    MyCriteria(I, 1) = " " & strQuote & "*" & Me.R_Project_Title & "*" & strQuote
    MyCriteria(I, 2) = "like"
    I = I + 1
End If

If I <> 0 Then
    SQL_String = SQL_String & " Where " & MyCriteria(0, 0) & MyCriteria(0, 2) & MyCriteria(0, 1)
    j = 1
    Do While j <> I
        SQL_String = SQL_String & " and " & MyCriteria(j, 0) & MyCriteria(j, 2) & MyCriteria(j, 1)
        j = j + 1
    Loop
End If

MyQuery.SQL = SQL_String & " ORDER BY T_Project.YourID " 

Refresh
Forms![Menu_Principal]![List_Project].Requery 
```

希望这对你有帮助

# c# - 路径格式错误

> ID：15816611
> 
> 赞同：0
> 
> 时间：2013-04-04T16:25:20.643
> 
> 标签：c#, asp.net, url

我尝试使用以下内容访问本地主机上的目录，但错误提示不支持路径格式。

```
 string fileName=ImageName.ToString() + ".Jpeg";
    bmp.Save(System.IO.Path.Combine("localhost:59657/ProfileTenModified/setP/",  fileName), System.Drawing.Imaging.ImageFormat.Jpeg); 
```

有什么解决办法？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:31:36.547

.net 中的 IO 操作需要文件系统的绝对路径。不能对带有域名的文件或目录进行操作。所以正如 DJ KRAZE 所说，改为使用

```
Server.MapPath("~/ProfileTenModified/setP/" + fileName) 
```

# aop - .NET 的开源 AOP 库，没有拦截限制

> ID：15816612
> 
> 赞同：0
> 
> 时间：2013-04-04T16:25:25.147
> 
> 标签：aop

这个话题可能看起来已经讨论过了，但我还有一些话要说和问。

显而易见的问题是；我想知道我应该为 .NET 4.0 企业应用程序使用什么 AOP 库？根据帖子[What Aspect-Oriented Programming (AOP) library for .NET are still](https://stackoverflow.com/questions/3434183/what-aspect-oriented-programming-aop-libraries-for-net-are-still-actively-dev) active development ，应该选择 PostSharp 或 Spring.NET 或 Microsoft 的 Policy Injection Application Block。但是每一个都有问题。

1.  **PostSharp：**这是最好的，但不开放。我需要一个来源是开放的。
2.  **Spring.NET：**这太重了，并且有限制，比如它只能拦截那些非静态的类，必须是非密封的，属性和方法必须是虚拟的，等等......
3.  **Microsoft 的 Policy Injection Application Block：**根据 post [Policy Injection Application Block](http://msdn.microsoft.com/en-us/library/ff664572%28v=pandp.50%29.aspx)，这是一个遗留组件，现在可能不再被 MS 支持，因为它是通过 Unity 拦截机制实现的，因此它具有与 Spring.NET 相同的限制（[PostSharp 的替代品](http://www.postsharp.net/alternatives)）

我遇到了[面向方面编程的帖子：逐步学习并推出自己的实现！](http://www.codeproject.com/Articles/479302/Aspect-Oriented-Programming-learn-step-by-step-and). 我还没有使用它，但通读这篇文章让我知道它应该服务于我的目的。我想知道是否有人尝试过，是否建议这样做？

我还有一个问题要问；我已经将 Unity 用于 DI，这一切都很酷，但对于 AOP，unity 对我的目的来说不是一个好的选择，因此我肯定会选择其他一些工具/库（也许是我上面建议的那个！）。在同一个应用程序中有 Unity 和 AOP 的其他东西好不好，会有什么问题吗？

任何人都可以在这里帮助我吗？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:51:49.420

我认为一旦您排除 PostSharp 并且还想拦截静态代码，您会发现很少有好的选择。

您可能会检查的一些选项是 SheepAspect 和 Fody，它们都采用与 PostSharp（编译后编织）类似的方法。两者都非常好并且显示出前景，但与 PostSharp 相比相对年轻。

# java - 确定 invokeLater 中的进程何时完成

> ID：15816615
> 
> 赞同：0
> 
> 时间：2013-04-04T16:25:27.457
> 
> 标签：java, swing, swingutilities

我正在使用 invokeLater() 在 JTabbedPane 内的 JPanel 内的 JEditPane 中加载 html 页面。

我所有的方法都可以很好地加载 html。我遇到的问题是更新标签标题。

方法 setTitle() 和 setTabTitle() 工作，但是它们在 PageLoader 完成之前被执行。因此选项卡标题始终显示上一个 html 页面的标题。

有没有一种方法可以阻止方法 setTitle() 和 setTabTitle() 执行，直到稍后调用中的线程完成：

这是我正在查看的代码的一部分：

```
private void showPage(){
    // Load cursors
    Cursor cursor = viewer.getCursor();
    Cursor waitCursor = Cursor.getPredefinedCursor( Cursor.WAIT_CURSOR );
    viewer.setCursor( waitCursor );

    SwingUtilities.invokeLater( new PageLoader( viewer, url, cursor) );

    //Update tab title 
    setTitle();
    tabPanel.setTabTitle(this);

    //Update address bar
    addressTextField.setText(url.toString());

} 
```

谢谢你提供的所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:16:53.617

```
Determining when a process within invokeLater has completed 
```

*   可以通过`if (SwingUtilities.isEventDispatchThread()) {`from进行测试`util.Timer`

*   但是这个想法并不好，为什么寻找EDT的理由结束了，

*   EDT 在 Swing GUI 中重新绘制所有事件的那一刻并未结束，API 中实现了来自通知程序的内部进程

*   基本上你模拟[Workers Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)，使用[SwingWorker](https://stackoverflow.com/search?q=%5Bswing%5D%20swingworker)或[Runnable#Thread](https://stackoverflow.com/a/6060678/714968)（可见 Gui 的所有事件都必须包装到 invokeLater 中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:29:28.737

将`setTitle()`等放在代码的末尾`PageLoader.run()`。您可能需要将`this`一些额外的变量传递给它的构造函数，以便您可以访问标题。

# ios - 使用矢量设计 iOS 图标时，如何导出为各种尺寸？

> ID：15816619
> 
> 赞同：-1
> 
> 时间：2013-04-04T16:25:40.943
> 
> 标签：ios

有人告诉我用矢量设计 iOS 图标，这样你就可以很容易地缩放到所有不同的必要尺寸。所以我使用 Sketch 2（我也有 Illustrator 的副本）来创建一个应用程序图标，它完全由可以缩放到任何分辨率的矢量组成。

但是，我不确定如何将其导出到所有这些不同的分辨率。我从这里做什么？将其保存为 .SVG 并在 Illustrator 中执行某些操作？

如果有帮助，我为图标创建了一个 200x200 的圆角矩形底座，这是它的“大小”，但同样，因为它是矢量，它可以缩放到任何大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:46:24.290

不幸的是，iOS 不会在其 UIWebView 之外读取 SVG（如果这样做会非常酷）。只需将您的 svg 导出为您需要的所有尺寸的 png 或 jpg，然后在代码中为每个设备加载正确的。例如，对于 iPad 视网膜，如果图标必须为 35x35 点大，则您需要 70x70 jpg。

另一种更有效的方法是使用 Core Graphics 以编程方式绘制图标，因此您不必为每种尺寸加载不同的图标，并且您的图标在未来具有不同像素密度的设备中看起来不会有所不同。您可以手动完成，也可以使用名为 PaintCode 的应用程序来完成，价格昂贵（99 美元）但非常有用：您绘制并生成代码供您放入 drawrect 方法。

# tcp - 如何避免最大连接限制？

> ID：15816620
> 
> 赞同：-2
> 
> 时间：2013-04-04T16:25:49.337
> 
> 标签：tcp, connection, ip, limit

亲爱的 StackOverflow 成员，

我想知道，让我们用 Whatsapp 说......你一直连接到他们的服务器。（使用 TCP）假设最多有 65535 个连接/端口，他们如何避免这个限制？

看到这意味着一旦服务器达到 65535 一次，它将始终保持在该状态并且永远不会关闭，因为每个人的电话都只是保持连接状态。

我不确定你们是否理解我的问题，但如果您有任何问题，请随时提出。

亲切的问候，

雷内·罗森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:29:33.397

任何大型网站都不会依赖一台服务器。他们通常会使用负载平衡代理（商业或开源代理，如 ATS 或 HA 代理），并在其后面有多个服务器。这些代理具有扩展到更高连接的机制。

只要 4 元组是唯一的（source-ip、source-port、dest-ip、dest-port），只要其他资源（内存、cpu 等）可用，代理就可以处理连接。它们不会将流量限制为 64k 连接/端口。

# android - 在 onCreateView 期间安装事件监听器是否错误

> ID：15816629
> 
> 赞同：1
> 
> 时间：2013-04-04T16:26:09.370
> 
> 标签：android

我意识到，有时在此期间安装事件侦听器是`onCreateView`行不通的。例如，我以安装列表视图的点击监听器`ListFragment`为例

## 不工作

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    ListView listView = (ListView)v.findViewById(android.R.id.list);
    // Won't work?! Listener will not be triggered.
    listView.setOnItemClickListener(new ListViewOnItemClickListener()); 
    // Installing long click listener does work somehow... 
```

## 作品！

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    // Works!
    this.getListView().setOnItemClickListener(new ListViewOnItemClickListener()); 
```

我想知道，在 onCreateView 期间安装事件侦听器是否错误？因为我没有发现文档中提到了这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T20:15:37.210

我认为在onCreateView中设置监听器并没有错。您的代码可能还有其他问题。（需要更多细节来说明您的代码有什么问题。）

以下是 Android SDK 附带的示例代码。（内容片段.java）

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    mContentView = inflater.inflate(R.layout.content_welcome, null);
    final ImageView imageView = (ImageView) mContentView.findViewById(R.id.image);
    mContentView.setDrawingCacheEnabled(false);

    // Handle drag events when a list item is dragged into the view
    mContentView.setOnDragListener(new View.OnDragListener() {
        public boolean onDrag(View view, DragEvent event) {
            switch (event.getAction()) {
                case DragEvent.ACTION_DRAG_ENTERED:
                    view.setBackgroundColor(
                            getResources().getColor(R.color.drag_active_color));
                    break;

                case DragEvent.ACTION_DRAG_EXITED:
                    view.setBackgroundColor(Color.TRANSPARENT);
                    break;

                case DragEvent.ACTION_DRAG_STARTED:
                    return processDragStarted(event);

                case DragEvent.ACTION_DROP:
                    view.setBackgroundColor(Color.TRANSPARENT);
                    return processDrop(event, imageView);
            }
            return false;
        }
    });

    // Show/hide the system status bar when single-clicking a photo.
    mContentView.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
            if (mCurrentActionMode != null) {
              // If we're in an action mode, don't toggle the action bar
              return;
            }

            if (mSystemUiVisible) {
              setSystemUiVisible(false);
            } else {
              setSystemUiVisible(true);
            }
        }
    });

    // When long-pressing a photo, activate the action mode for selection, showing the
    // contextual action bar (CAB).
    mContentView.setOnLongClickListener(new View.OnLongClickListener() {
        public boolean onLongClick(View view) {
            if (mCurrentActionMode != null) {
                return false;
            }

            mCurrentActionMode = getActivity().startActionMode(
                    mContentSelectionActionModeCallback);
            view.setSelected(true);
            return true;
        }
    });

    return mContentView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-16T08:30:22.100

好吧，这取决于您的逻辑需要什么，如果您在事件侦听器逻辑中调用 getActivity() 那么它肯定应该在 onActivityCreated 方法中（即，如果您在加载某些内容时使用进度对话框，Toast 消息，AsyncTask 与 onPreExecute 中的一些逻辑和onPostExecute)，因为只有在 onActivityCreated 之后，您才能确定 getActivity() 不会返回 null，否则在 onCreateView 中设置事件侦听器可能没问题。上述逻辑也不要使用 onAttach(Activity activity) ，因为这里我们只能获取对activity的引用，这并不意味着持有fragment的activity已经完全创建并且可以正常工作，只有在onActivityCreated之后才能完全正常工作叫做

# c++ - 检测单击列表控件中的空白项

> ID：15816630
> 
> 赞同：0
> 
> 时间：2013-04-04T16:26:11.127
> 
> 标签：c++, mfc, listcontrol

在我的基于 mfc 对话框的应用程序中，有一个 CListCtrl。当用户单击列表控件中的空项目时，我需要禁用按钮。我使用 NM_CLICK 消息并实现了这一点。但是如果用户将鼠标拖出列表控制区域并释放鼠标，这将不起作用。我找到了 NM_CLICK 仅在接收到按钮向上消息时才会被调用的原因。是否有其他解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T06:24:05.587

> 但是如果用户将鼠标拖出列表控制区域并释放鼠标，这将不起作用。

这完全是设计使然，您不应该*希望*这些点击“计数”。这是用户在点击过程中改变主意的唯一方法。它是这样工作的：

*   开始单击列表框控件中的对象（或空白区域）
*   改变你的想法
*   在仍然按住鼠标按钮的同时（即在提交单击之前），将鼠标指针拖动到控件边界之外
*   想想：*哇！那是一个接近的电话！*

您会注意到，在 Windows 中，直到*释放*鼠标按钮（通常称为“MouseUp”）才会发生操作。如果不支持这一点，用户将无法提前退出操作，这是任何用户界面的关键特性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T02:15:45.700

有一些可行的选择。在父对话框中，MouseUp 处理函数可以用于此。

```
afx_msg void OnLButtonUp(UINT nFlags, CPoint point); 
```

使用point可以检查CListCtrl是否发生了鼠标释放。如果是，您只需禁用该按钮。

此外，WindowFromPoint 可以是另一种选择。

```
static CWnd* PASCAL WindowFromPoint(POINT point); 
```

比如一个 OnMouseMove，如果你使用这个函数，你可以检查窗口是否被鼠标指向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T06:12:28.500

实现一个 LVN_ITEMCHANGED 处理程序，并在该处理程序中，一旦[所选项目计数](http://msdn.microsoft.com/en-us/library/7sdaafak%28v=vs.80%29.aspx)为零，就禁用该按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T08:20:52.040

我找到了问题的解决方案。如果用户使用左键拖动鼠标，则可以处理一条消息，即[LVN_BEGINDRAG](http://msdn.microsoft.com/en-in/library/aa924485.aspx)。通过在 OnBeginDrag 函数中处理此消息，我更新了按钮状态。因此，一旦用户尝试拖动鼠标，按钮就会更新。代码如下：在标题中添加

`afx_msg void OnBeginDrag( NMHDR* pNMHDR, LRESULT *pResult );`

在实现中添加消息映射和相应的功能：

> BEGIN_MESSAGE_MAP( .. )
> 
> ON_NOTIFY（LVN_BEGINDRAG，IDC_LIST1，OnBeginDrag）
> 
> END_MESSAGE_MAP
> 
> OnBeginDrag( .... )
> 
> {
> 
> 更新按钮（）；
> 
> }

它解决了这个问题。谢谢大家的支持。

# hadoop - 从hadoop中的稀疏矩阵读取特定的行块

> ID：15816633
> 
> 赞同：0
> 
> 时间：2013-04-04T16:26:24.330
> 
> 标签：hadoop, matrix, mapreduce

我有一个矩阵存储如下

> rowid，columnid，值

我只想读取一大块行并将其发送到映射器。例如，id= 1,2,3,4 的行映射到映射器，5,6,7,8 到另一个映射器，... 可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:52:21.770

不，这可能是不可能的，除非你跳过一些严重的箍。这就是减少阶段的用途！将 rowid 设为您的 reduce 键（或基于它的一些计算……例如`(rowid-1)/4`），这些块将被发送到同一个 reducer。

# store - 从服务器下载和存储网页，在本地运行

> ID：15816634
> 
> 赞同：0
> 
> 时间：2013-04-04T16:26:24.763
> 
> 标签：store, webpage, local

我正在编写一个移动应用程序（HTML5/JavaScript），它有几个不需要服务器联系的功能。基本上我想从服务器下载所有页面并将它们保存在 HTML5 本地商店中。如果服务器可用，我将检查网页更新并下载。两个优点。“离线”和“自动”软件更新时的一些功能。问题： 1\. 可行吗？2\. 建立在什么“组件/功能”之上？

# c# - 使用 imageresizer 和 WicBuilder 时水印无法显示在图像上

> ID：15816636
> 
> 赞同：2
> 
> 时间：2013-04-04T16:26:34.583
> 
> 标签：c#, asp.net, imageresizer

我希望将[imageresizer](http://imageresizing.net/)用于图像和文本覆盖。

但是，当我同时使用 WicBuilder 插件和水印插件时，查询字符串中指定的水印不再显示。

在使用 WicBuilder 时，我在文档中看不到任何有关限制的内容。这是受支持的还是已知问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:45:03.567

在 V3.X 中，WicEncoder 和 WicDecoder 可以使用 Watermark，但不能使用 WicBuilder 或 FreeImageBuilder。WicBuilder 是一种替代的渲染管道，它牺牲了少量的质量和一些灵活性来换取速度的大幅提升。

# java - Android WifiManager - 到 HEX 或不到 HEX

> ID：15816637
> 
> 赞同：0
> 
> 时间：2013-04-04T16:26:40.587
> 
> 标签：java, android, wifi, wpa, wep

我正在尝试以编程方式使用 Android 连接到 wifi，但是当我以十六进制输入我的 WEP 密钥时 - Logcat 表示它太长了。当我尝试使用纯文本时 - 它表示它太短（并且永远不会连接）。当我在我构建的应用程序外部手动输入时（只需输入密码：superman），它就会连接！

附言

我正在尝试使用以下 StackOverflow 示例：

[如何以编程方式连接到 Android 中的特定 Wi-Fi 网络？](https://stackoverflow.com/questions/8818290/how-to-connect-to-a-specific-wifi-network-in-android-programmatically)

使用十六进制：

```
 String networkSSID = "ANDRE-PC_NETWORK";
    String networkPass = "73:75:70:65:72:6d:61:6e"; 
```

日志猫：

```
04-04 12:12:13.643: E/wpa_supplicant(594): Line 0: Too long WEP key 0 '"73:75:70:65:72:6d:61:6e"'.
04-04 12:12:13.643: E/WifiConfigStore(479): failed to set wep_key0: "73:75:70:65:72:6d:61:6e"
04-04 12:12:13.793: I/ActivityManager(479): Displayed com.nfc.linked/.Connect: +855ms
04-04 12:12:16.283: W/GAV2(3422): Thread[Service Reconnect,5,main]: Connection to service failed 1 
```

没有十六进制：

```
 String networkSSID = "ANDRE-PC_NETWORK";
  String networkPass = "superman"; 
```

日志猫：

```
04-04 12:23:10.913: E/wpa_supplicant(594): Line 0: Invalid WEP key length 8 - this network block will be ignored 
```

来源：

```
import java.util.List;

import android.app.Activity;    
import android.net.wifi.WifiConfiguration;
import android.net.wifi.WifiManager;
import android.os.Bundle;
import android.util.Log;
import android.content.Context; 

public class Connect extends Activity  {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.connect);
        String networkSSID = "ANDRE-PC_NETWORK";
        String networkPass = "superman";

        WifiConfiguration conf = new WifiConfiguration();
        conf.SSID = "\"" + networkSSID + "\"";   //ssid must be in quotes

        conf.wepKeys[0] = "\"" + networkPass + "\""; 
        conf.wepTxKeyIndex = 0;
        conf.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);
       conf.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP40); 

        conf.preSharedKey = "\""+ networkPass +"\"";

        conf.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);

        WifiManager wifiManager = (WifiManager)getSystemService(WIFI_SERVICE); 
        wifiManager.addNetwork(conf);

        List<WifiConfiguration> list = wifiManager.getConfiguredNetworks();
        for( WifiConfiguration i : list ) {
            if(i.SSID != null && i.SSID.equals("\"" + networkSSID + "\"")) {
                 wifiManager.disconnect();
                 wifiManager.enableNetwork(i.networkId, true);
                 wifiManager.reconnect();                

                 break;
            }           
         }

    }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:46:56.573

尝试：

```
String networkPass = "73757065726d616e"; 
```

# ruby - 将 RSpec 测试重构为在文件顶部只有一个要求（仅限 Ruby，无 Rails）

> ID：15816638
> 
> 赞同：0
> 
> 时间：2013-04-04T16:26:40.903
> 
> 标签：ruby, rspec, refactoring, tdd

我正在为我构建的 Ruby tic tac toe 游戏编写 RSpec 测试。测试在最初失败后通过了，所以这是一个好兆头。这是 computer_spec.rb 文件：

```
require 'computer'
require 'board'

describe "the computer selects the winning move as spot 3" do
  it "when spots 1 and 2 are chosen" do
    computer = Computer.new
    board = Board.new
    computer.winning_move(board, [1,2]).should eq(3)
  end
end 
```

现在，由于它是一个 computer_spec.rb 文件，它实际上应该只在该文件的顶部有***require 'computer' 。***我的意思是确定它有效，但我想变得非常擅长 RSpec，并以最好和最简洁的方式做事。

自然，Computer Class 在winning_move 方法中使用***board.rb***。wins_move 传递了两个参数，board 和 computer。BOARD 本身是一个散列（tile 是键，X 或 O 是值）。这是一些代码，但您可以在此处查看 board.rb：[https ://github.com/DavidPardy/ttt_v2/blob/master/lib/board.rb](https://github.com/DavidPardy/ttt_v2/blob/master/lib/board.rb)

我试图将哈希硬编码到computer_spec.rb，但不行。最常见的错误之一是“未初始化的常量板”，这是有道理的……我认为。

那么解决这个问题的最好方法是在这个文件的顶部只需要“计算机”吗？

任何意见表示赞赏，谢谢。

编辑：我刚刚使用了 spec_helper.rb，不知道为什么我从一开始就没有使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:32:57.240

一些选项：

*   将 Computer 和 Board 类定义放在一个文件中并包含该文件。

*   将板添加为自动加载的文件

*   添加 ActiveSupport::Dependencies.autoload_paths << "#{config.root}/somefolder"

# tsql - 唯一标识 SQL Server 2008 R2 及其数据库的实例

> ID：15816640
> 
> 赞同：1
> 
> 时间：2013-04-04T16:26:49.400
> 
> 标签：tsql, sql-server-2008-r2, instance, uniqueidentifier

我需要获取最佳值`GUID`，以唯一标识 SQL Server 2008 R2 的实例并唯一标识服务器上的特定数据库。

至于具体的数据库，我觉得可以用`[master].[Sys].[Master_files]`和column `file_guid`，但是不知道在哪里可以找到类似SQL Server 2008R2的实例的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:08:51.520

您可以使用`file_guid`主数据库的数据文件。对于给定的实例，它不太可能改变，因为它是一个 GUID，所以它是唯一的。

* * *

抱歉，忘记了。比 T-SQL 没有可访问的标识符（据我所知）。您可以创建自己的并将其存储在 master 某处的扩展属性中，或者使用注册表中某处的 xp_regread 。我假设您正在寻找某种许可证控制。如果这是正确的，那么注册表可能是您最好的选择。

# javascript - div id是通过添加vars构造的，现在想获取这个div的值

> ID：15816641
> 
> 赞同：0
> 
> 时间：2013-04-04T16:26:50.510
> 
> 标签：javascript, jquery, variables, html, text

这是一个学校项目，有点热或不热。用户获得 2 张图片放置在 div face1 或 div face2 中。他可以通过按左/右或 s/d 来选择他最喜欢的。

我在函数的 if 语句中遇到以下问题：我知道当按下代码为 37（左箭头）和 83（s 键）的键时，用户选择了“face1”。

当我在页面上显示“var w”时，它会正确显示**#face1**。现在当我在winnerid中的#face1周围添加引号时，它正确显示**“#face1”** 但是现在当想要获取div #face1中的文本时，它不会返回任何内容，尽管那里有一个数字

`<div id="face1"> 432 </div>`

```
$(document).keyup(function (e) {
  if (e.which == 37 || e.which == 83) {
  var w = '#face1';
  var winnerid ='"' + w + '"';
  var id= $(winnerid).text();
  $("h1 span").text(id);      

  }
  else if(e.which == 39 || e.which == 68) {
  $("h1 span").text("right");
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:29:11.627

您不想包含 jQuery 选择器的引号。只需使用：

```
var w = '#face1';
var id= $(w).text(); 
```

jQuery 函数 ( `$()`) 接受一个字符串（除其他外）作为选择器（除其他外）。所以简单地传递一个包含的字符串*变量*`#face1`是一样的：

```
var id = $('#face1').text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:29:02.483

不要在选择器中添加引号。

代替

```
var winnerid ='"' + w + '"';
var id= $(winnerid).text(); 
```

和

```
var id= $(w).text(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T16:29:04.070

您可以删除这两个语句的第二行

```
 var w = '#face1';
  var winnerid ='"' + w + '"';    < ----  Remove this 
  var id= $(winnerid).text(); 
```

到

```
var w = '#face1';
 var id= $(w).text(); 
```

# backbone.js - 主干视图层次结构/区域

> ID：15816644
> 
> 赞同：1
> 
> 时间：2013-04-04T16:26:56.583
> 
> 标签：backbone.js

我正在努力理解如何使用 Backbone 路由器和视图。我想要一个 URL，例如：`index.html#/products/list`首先调用通用视图以将基本页面脚手架插入 DOM，并显示全局徽标之类的项目。然后调用产品视图，该视图插入一些通用的“产品”DOM 元素。然后调用“列表”视图，其中显示产品列表。

如果我这样做：

```
var router =  Backbone.Router.extend({
      initialize : function() {
        new HeaderView({el:"#header"}).render();
      }, 
```

然后`initialize`仅在第一次加载页面时调用该例程。如果某些内容清除了标头，则导航回路由不会重新显示它，因为路由器已经存在，因此`initialize`不会再次调用。

我显然可以设置一个路由，例如：`"/products/list"/`调用一个函数，但是该函数需要负责绘制整个页面，这是需要在所有路由中重复的代码，并使整个事情“颠倒”。

我看过像 Marionette 这样的东西，但看起来它可能是一把大锤来破解坚果。

最后我可以完全放弃 Backbone.Router，并拥有一个大的全局视图，它通过解析 URL 将它自己的代理委托给子视图，但这也不正确！

有没有一种简单的方法来拥有这种“层次结构”的观点？

# performance - 如何防止 EF-Linq 为变量和常量生成不同的查询？

> ID：15816650
> 
> 赞同：0
> 
> 时间：2013-04-04T16:27:07.417
> 
> 标签：performance, linq, entity-framework, query-optimization

我有一个 Linq 查询，它使用硬整数值在大约一分钟（第一次）内返回 LinqPad。但是，当我将这些硬整数值转换为局部变量时，需要很长时间（超过 20 分钟）。

我的基本问题是：

*   为什么/如何不同的 SQL 查询会导致这么多延迟？
*   我可以防止这种不同的 SQL 查询吗？

在我试图解决这个问题时（见下文），我遇到了这些问题：

*   我该如何使用`DefaultQueryPlanCachingSetting`or `EnablePlanCaching`？
*   如何抑制/防止查询编译/优化？
*   如何验证我是否在使用 EF5？

[查询差异](https://stackoverflow.com/questions/5922207/ef-4-1-why-does-turning-a-constant-into-a-variable-result-in-extra-sub-query)似乎已经被注意到，并且在对该问题的回答中[解释了](https://stackoverflow.com/a/5923157)[*原因。*](https://stackoverflow.com/a/5923157)我也有这个查询差异，我看到一个额外的子 SELECT（和一些额外的 JOIN）。并且查询使用参数 ( `[Extent6].[SomeThingId] = @p__linq__0`) 而不是硬整数值 ( `4 = [Extent6].[SomeThingId]`)

但是，我不确定为什么这会是一个问题，以及如何防止它。（我知道在提供查询或数据库布局时答案*可能*会更容易，但是这种敏感材料，我的问题仍然是一样的......）

我假设问题出在使用参数时编译/执行计划中的一些“优化”。我正在尝试使用[此建议来打开 L2E 的自动编译](http://blogs.msdn.com/b/efdesign/archive/2011/06/30/auto-compiled-linq-queries-entity-framework-june-2011-ctp.aspx)：

```
 db.ContextOptions.DefaultQueryPlanCachingSetting = false;
 //(db as IObjectContextAdapter).ObjectContext.DefaultQueryPlanCachingSetting = false; 
```

我无法让它工作，所以我试图找出我是否可以使用也提到的 [ `ObjectQuery.EnablePlanCaching = false;`]，但我找不到在哪里/如何使用它。（我无法将我`IQueryable`的转换为`ObjectQuery`，也无法转换为我的上下文。）有人知道如何使用`DefaultQueryPlanCachingSetting`or`EnablePlanCaching`吗？

我尝试的另一件事是从常量值 Linq 中获取 SQL，并在其中引入一些 SQL 变量。这也很好，所以我尝试将它转换为一个存储过程，我可以从 EF 调用它。但是现在存储过程也需要很长时间才能运行。

我（也）想知道[我是否真的有 EntityFramework *5*](https://stackoverflow.com/questions/15816701/which-version-of-entity-framework-is-used-by-my-project)。（这是我第一个使用 Linq、EntityFramework 和 ASP.MVC 的项目。）但我已经把它变成了一个单独的问题。

**更新**：我更改了“常规”存储过程：

```
SELECT ... WHERE @Id  = [Extent6].[SomeThingId] ... 
```

进入带有动态 SQL 语句的存储过程：

```
@sql = 'SELECT ... WHERE ' + CAST(@Id AS VARCHAR) + ' = [Extent6].[SomeThingId] ...';
EXEC (@sql); 
```

使用这个“动态”存储过程，我确实得到了非常快速的结果。而且由于参数将是相当恒定的（它们可能会在每天一次和每周一次之间变化），我认为这种缺乏优化/缓存对于性能来说是可以的。（但是，我不喜欢将业务逻辑放在存储过程中。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T07:33:20.853

我发现了 Stuart Leeks 的这篇关于[Entity Framework 5 控制自动查询编译](http://blogs.msdn.com/b/stuartleeks/archive/2012/06/12/entity-framework-5-controlling-automatic-query-compilation.aspx)的帖子。它提到它`DefaultQueryPlanCachingSetting`没有通过 EF5 的候选发布，您需要改为`EnablePlanCaching`在 ObjectSets 上设置属性。它也有一个简单的例子和​​一个方便的扩展方法的建议。我将引用 Stuart Leeks 的示例，因为“常规” [MSDN](http://msdn.microsoft.com/en-us/library/bb738562.aspx)还没有提供一个。您可以查看他的博客以了解扩展方法。

```
ObjectQuery<Customer> customersNoCache = context.Customers;
customersNoCache.EnablePlanCaching = false;
var query1 = from customer in context.Customers
             where customer.Country == "UK"
             select customer; 
```

**编辑：**我实际上必须添加更多代码[才能从 a`DbSet`到`ObjectQuery`](https://stackoverflow.com/a/7214212/422877). 与前面的例子一致，`Customer`这看起来像：

```
ObjectContext lObjectContext = ((IObjectContextAdapter)this).ObjectContext;
ObjectQuery<Customer> lDocCatgNoCache = lObjectContext.CreateObjectSet<Customer>(); 
```

但是生成的 SQL 仍然包含参数优化。我的猜测是，它 `EnablePlanCaching`只会抑制从 Linq 生成 SQL 的缓存，甚至不考虑 SQL 端的缓存？

（不幸的是，我没有时间进一步研究/测试。我一起实现了“动态”存储过程，并完成了这个项目。）

# iphone - iOS AWS S3 实施教程

> ID：15816659
> 
> 赞同：5
> 
> 时间：2013-04-04T16:27:47.617
> 
> 标签：iphone, ios, amazon-web-services, amazon-s3

我希望在我的一个 iPhone 应用程序中实现 Amazon Web S3 服务，但我想知道是否有人知道我在哪里可以找到有关如何在 iPhone 上实现 SDK 的教程或一些示例代码。我会非常感谢你的帮助。

这篇文章的评论“[如何使用 AWS SDK for IOS？](https://stackoverflow.com/questions/7631634/how-to-use-the-aws-sdk-for-ios) ”没有显示我正在寻找的教程。

我正在寻找有关设备和 S3 之间如何工作的解释，以了解如何实施我的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T22:36:14.597

我帮助维护适用于 iOS 的 AWS 开发工具包。我鼓励您只[下载 SDK](https://aws.amazon.com/sdkforios/)。它包括几个涵盖 S3 的示例以及一些其他服务的示例。每个示例都包含一篇解释示例的文章。

您可能还想查看我们的[移动开发者博客](http://mobile.awsblog.com/)，其中包含一些与 SDK 更高级别功能相关的帖子。

如果这些资源都没有回答您的问题，我将不胜感激有关样本类型的反馈会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:30:34.513

看到[这个亚马逊页面](http://aws.amazon.com/articles/3002109349624271)——当我在你的位置时它帮助了我。

> ID：15816660
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# gerrit - 更改依赖关系图

> ID：15816662
> 
> 赞同：2
> 
> 时间：2013-04-04T16:27:58.270
> 
> 标签：gerrit

是否有任何外部工具或某种方式可以可视化 Gerrit 更改之间的依赖关系图？

在我们的工作流程中，我们经常希望从某个更改开始找到最新的更改/补丁集。由于我们并不总是从 master 分支开始工作，我们的依赖关系非常复杂，在 Gerrit 的 UI 中浏览依赖关系真的很不舒服。

生成具有依赖关系的图像会很好，其中节点将显示更改和补丁集的编号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-02T14:56:02.357

请观看此[https://bugs.chromium.org/p/gerrit/issues/detail?id=5012](https://bugs.chromium.org/p/gerrit/issues/detail?id=5012)，这是有关此缺失功能的当前票证。

我正试图找到一种方法让它在 gerrit 之外工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T18:51:46.610

目前没有其他可视化选项。[您可以在http://code.google.com/p/gerrit/issues/list](http://code.google.com/p/gerrit/issues/list)提交功能请求。请记住，始终欢迎对项目的贡献:)

# javascript - 什么是 jQuery 点击事件？

> ID：15816669
> 
> 赞同：0
> 
> 时间：2013-04-04T16:28:17.387
> 
> 标签：javascript, jquery, html, events, tap

问题是我应该模拟一个`tap`事件**而不**使用 jQuery 来调用它的处理程序。处理程序是这样附加的：

```
$(element).on("tap",".class", handler); 
```

我试过这样：

```
event1 = document.createEvent('MouseEvents');
event1.initMouseEvent('click', true, window, 1, 0, 0, 0, 0, false, false, false, 1, document.body.parentNode);
element.dispatchEvent(event1); 
```

等等（也适用于touchend）：

```
event2 = document.createEvent("TouchEvent");
event2.initEvent("touchstart", true, false);
element.dispatchEvent(event2); 
```

但它不起作用。

我不确定`tap`jQuery 事件的包装器内部是什么。

有人可以帮忙吗？非常感谢。

# javascript - 打开 Firebug 精简版

> ID：15816670
> 
> 赞同：3
> 
> 时间：2013-04-04T16:28:17.973
> 
> 标签：javascript, html, css, firebug, firebug-lite

我不知道为什么，但每次我尝试使用 firebug lite 时，让它出现都很痛苦。

我正在使用这个链接：

```
<script type="text/javascript" src="https://getfirebug.com/firebug-lite.js"></script> 
```

如果您不使用选项 startOpened - true，您应该如何让它出现？我在屏幕上看不到任何图标或任何东西。所以我通常使用：

```
<script type="text/javascript" src="https://getfirebug.com/firebug-lite.js#startOpened=true"></script> 
```

但是今天，即使这样也行不通...

它正在加载，我可以在常规检查元素的资源中看到 firebug-lite.js。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-24T13:39:12.407

也许您安装了真正的 Firebug，然后选项`disableWhenFirebugActive`（默认`true`）将禁用 FirebugLite（请参阅[https://getfirebug.com/firebuglite#Options](https://getfirebug.com/firebuglite#Options)）：

你可以试试：

```
https://getfirebug.com/firebug-lite.js#startOpened=true,disableWhenFirebugActive=false 
```

# c# - Roslyn CTP 中的密码提示

> ID：15816671
> 
> 赞同：0
> 
> 时间：2013-04-04T16:28:19.717
> 
> 标签：c#, lotus-notes, roslyn

我正在与 Roslyn CTP (VS2012) 合作，试图开发一些与我们供应商的 Lotus Notes 系统交互的程序，我遇到了一个小问题。这不是进步的杀手，但由于我正在了解 Roslyn 的工作方式，我想找出未来的答案。

初始化 Notes 会话时，我可以以纯文本形式输入密码作为 Initialize 方法的参数，也可以将其留空。下面是我正在使用的实际代码，其中一个占位符显示了可选的密码字符串。

```
#r "Interop.Domino.dll"
using Domino;
NotesSession session = new NotesSession();
session.Initialize([string pwd]); 
```

如果我将其留空，系统会提示我输入密码，就像我使用的是常规控制台一样。然而，罗斯林从不接受。我按 Enter 键，光标只上升了一行。

CTRL+Enter、Shift+Enter、ALT+Enter - 什么都没有。Esc 也不会中止密码尝试。它只是被卡住了，有一个沙漏。我根本无法与窗口交互，只需将其关闭或重置即可。如果我重置 Roslyn 执行引擎，那么 Notes ID 文件将被锁定，我必须重新启动才能再次对 Notes 执行*任何*操作。罗斯林有没有办法回应这样的提示？我真的不想每次都以纯文本形式输入我的密码。
这是实际的提示：

```
[1C2C:0005-172C] The ID file being used is: C:\[Path to ID]
[1C2C:0005-172C] Enter password (press the Esc key to abort): 
```

感谢所有回复的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T23:52:35.263

我很确定 IBM 会采取措施防止任何流氓进程试图监视或干扰密码提示。（他们对安全性非常认真。）我不知道这些步骤是什么，但这可能是导致您的问题的原因。

一种可能的解决方法（*对于作为开发人员的您，但不推荐用于生产*）可能是进入您的 Notes 客户端设置并启用一项功能，该功能允许其他进程使用您的身份而无需提示输入密码。这仅在您的 Notes 客户端正在运行时才有效，但如果您正在开发与 Notes 对话的应用程序，这对您来说可能不是什么大问题。

您还没有说您使用的是什么版本的 Notes，并且菜单选择和措辞已经更改了几次，所以我将仅提供 Notes 8.5 的步骤。

*   在文件菜单上选择安全，然后选择用户安全。
*   在“用户安全”对话框中，切换到“安全基础”选项卡。
*   选中标有“不要提示其他基于 Notes 的程序输入密码（降低安全性）”的复选框。

# java - FileInputStream 解组，但 HttpInputStream 不会在 Java 中

> ID：15816675
> 
> 赞同：0
> 
> 时间：2013-04-04T16:28:34.343
> 
> 标签：java

当我从磁盘读取文件时，我可以从文件中整理 XML，但是当我通过网络下载它时，我得到了这个错误。

```
[org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Premature end of file.]
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.createUnmarshalException 
```

我假设网络输入流包含附加信息或什么？

**作品**

```
InputStream inputStream = null;
try {
    inputStream = new FileInputStream(filePath);
} catch (FileNotFoundException e) {
    e.printStackTrace();
} 
```

**不工作**

```
InputStream inputStream = null;

    try {
        inputStream = new URL(url).openStream();
    } catch (MalformedURLException e) {
        e.printStackTrace();

        } catch (IOException e) {
            e.printStackTrace();
        }

BulkDataRecordType bulkDataRecordType = getObjectFromXml(inputStream); 
```

在另一个班级

```
public BulkDataRecordType getObjectFromXml(InputStream inputStream)
        {

            try {

                    JAXBContext jc = JAXBContext.newInstance(BulkDataRecordType.class);
                    Unmarshaller unmarshaller = jc.createUnmarshaller();
                    bulkDataRecordType = (BulkDataRecordType) unmarshaller.unmarshal(inputStream);

                } catch (JAXBException e1) {
                    e1.printStackTrace();
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:05:08.217

我首先检查字符串的校验和。一旦我对此发表评论，它就起作用了。我找到了一个创建两个新流的解决方案并且它有效。如果您有更好的解决方案，请告诉我。

```
public byte[] getCheckSumFromFile(InputStream inputStream)
    {
        MessageDigest md = null;

        try {
            md = MessageDigest.getInstance("MD5");
        } catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
            return null;
        }

        InputStream is = null;

        try {
          is = new DigestInputStream(inputStream, md);
        }
        finally {
              try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
                return null;
            }
        }

        return md.digest();
    } 
```

**从原始创建两个流**

```
ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();

        try {

            byte[] buffer = new byte[1024];
            int len;

            while ((len = inputStream.read(buffer)) > -1 ) {
                byteArrayOutputStream.write(buffer, 0, len);
            }
            byteArrayOutputStream.flush();
        } catch (IOException e1) {
            e1.printStackTrace();
        }

        inputStream = new ByteArrayInputStream(byteArrayOutputStream.toByteArray());

        // Get check sum of downloaded file
        byte[] fileCheckSum = getCheckSumFromFile(new ByteArrayInputStream(byteArrayOutputStream.toByteArray())); 
```

# ios - 如何在不点击标记的情况下在 iOS 谷歌地图中显示信息窗口？

> ID：15816684
> 
> 赞同：27
> 
> 时间：2013-04-04T16:29:01.077
> 
> 标签：ios, google-maps, infowindow, google-maps-sdk-ios

我是 iOS 开发的新手。这与 Google Maps iOS SDK 中的标记信息窗口有关。

我了解，我们可以使用 GMSMarkerOption 创建带有信息窗口的标记。

```
GMSMarkerOption *myLocationOption = [GMSMarkerOption alloc];
myLocationOption .title = @"My Location";
myLocationOption .snippet = @"Lat:...., Lang:....";

[mapView addMarkerOption:myLocationOption]; 
```

根据上面的代码，标记按预期显示在地图视图中。点击标记会在谷歌地图中显示“我的位置”信息窗口，这很好。

当用户转到自定义地图屏幕时，我们是否可以通过编程方式显示信息窗口？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-10-10T01:24:14.707

这在 Google Maps SDK 上有所改变，并且更容易理解：

```
GMSMarker *marker = [[GMSMarker alloc] init];
marker.position = coordinate;
marker.title = @"Location selected";
marker.snippet = @"Testing";
marker.map = mapView_;

//Show info window on map
[mapView_ setSelectedMarker:marker]; 
```

您现在使用**setSelectedMarker**方法来显示标记的信息窗口

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-04-04T17:31:17.863

```
GMSMarkerOptions *myLocationOptions = [GMSMarkerOptions options];
myLocationOptions.title = @"My Location";
myLocationOptions.snippet = @"Lat:...., Lang:....";

mapView.selectedMarker = [mapView addMarkerWithOptions:myLocationOptions]; 
```

（注意是选项，不是选项）

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-10-10T10:57:27.737

**斯威夫特 3.0**

```
func addMarker(_ location:CLLocation){
        var locationMarker: GMSMarker!
        if locationMarker != nil {
            locationMarker.map = nil
        }
        locationMarker = GMSMarker(position: location.coordinate)
        locationMarker.map = mapView
        locationMarker.appearAnimation = kGMSMarkerAnimationPop
        locationMarker.icon = GMSMarker.markerImage(with: UIColor.green)
        locationMarker.opacity = 0.85
        locationMarker.isFlat = true
        locationMarker.snippet = "My Location"
        mapView.selectedMarker=locationMarker

    } 
```

下面的行是答案

```
mapView.selectedMarker=locationMarker 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-10T00:24:59.877

**迅速 3**

`self.mapView.selectedMarker = marker`

在swift 3的情况下，可以打开`snipet`usint`selectedMarker`

如果您以类似于以下方式创建标记：

```
marker.position = CLLocationCoordinate2D(latitude: 34.1331168, longitude: -118.3550723)
marker.title = "My super place name"
marker.snippet = "Are you looking a place to play? This is your place! "
marker.appearAnimation = kGMSMarkerAnimationPop
marker.map = self.mapView 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-15T11:38:02.027

```
 // Below line will shows the infowindow for marker with out tapping on it
   [mapView setSelectedMarker:myLocationOptions]; // myLocationOptions is your desired GMSMarker to show Infowindow with out tapping . 
```

快乐编码:)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-03-25T11:56:39.180

mMapView.selectedMarker = 标记

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-11-27T13:53:13.830

GMSMarkerOptions 已弃用。使用它可以帮助我在不点击的情况下显示信息窗口-

```
func mapView(_ mapView: GMSMapView, idleAt position: GMSCameraPosition) {
    myMapView.selectedMarker = myGMSMarker
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-04-06T08:32:57.187

--> 无需点击标记即可显示多个信息窗口。您可以轻松自定义它。

因为我在 0..

```
 let dict = arrNearByPlacesArray.object(at: i) as? NSDictionary ?? [:]

        let lat = dict.object(forKey: "latitude") as? String ?? ""
         let long = dict.object(forKey: "longitude") as? String ?? ""
        let company_id = dict.object(forKey: "company_id") as? String ?? ""
        let totaljobs = dict.object(forKey: "totaljobs") as? String ?? ""

        let location = CLLocationCoordinate2D(latitude: Double(lat) ?? 0.0, longitude: Double(long) ?? 0.0)
        print("location: \(location)")
        let marker = GMSMarker()
        //marker.icon = UIImage(named: "maps")

        let viewData = Bundle.main.loadNibNamed("MarkerXibView", owner: self, options: nil)?.first as! MarkerXibView .      //UIView

        marker.iconView = viewData .      //UIView

        marker.position = location
        marker.accessibilityLabel  = company_id
        marker.map = vwGoogleMap 
```

}

# asp.net-mvc - 添加元数据属性类会破坏我的模型

> ID：15816686
> 
> 赞同：2
> 
> 时间：2013-04-04T16:29:02.853
> 
> 标签：asp.net-mvc

`enter code here`我是 MVC 的新手，我想尝试使用元数据类型属性进行验证。我的问题是，当我将属性添加到类时，当我调用 UpdateModel 方法时会出现异常。

```
 public class SpaceMetadata
    {
        [Required(ErrorMessage = "Name is required.")]
        [StringLength(22, ErrorMessage = "Name must be less than 23 characters.")]
        public string Spacename { get; set; }
    }

    [MetadataType(typeof(SpaceMetadata))]
    public partial class Space
    { } 
```

异常表示它无法更新模型。
我意识到我已经将输入验证为 false，但那是因为我允许将 html 输入到 textarea 中。不过这应该不是问题，对吧？我究竟做错了什么？

```
 [HttpPost]
    [ValidateInput(false)]
    public ActionResult SpaceCreate(FormCollection formValues)
    {
        var space = new Space();
        UpdateModel(space); 
```

# android - 如何从 Android 向网页发送简单的字符串

> ID：15816691
> 
> 赞同：0
> 
> 时间：2013-04-04T16:29:13.670
> 
> 标签：android, forms, web, comments, invoke

我有一个小问题。我想以某种方式从 android 应用程序调用网页中的按钮并将一些信息发送到此页面。这是我要与之交互的网页的一部分。

![--------](https://i.stack.imgur.com/xSFGs.png)

在此表格中，您可以写下您的姓名、电子邮件和评论。通过单击“Изпрати коментар”按钮（意思是“发送您的评论”），您可以在网页上发表评论。所以我想制作相同的功能，但来自一个 android 应用程序（将评论写入网页）。

你们中有人知道如何做到这一点吗？

先感谢您！

# java - 将标签之间的文本更改为大写 java

> ID：15816693
> 
> 赞同：0
> 
> 时间：2013-04-04T16:29:15.060
> 
> 标签：java, tags, case

我需要将标签之间的文本更改为字符串中的大写，然后使用更改后的字母打印整个字符串。所以

```
"asdasd <upcase>something</upcase> dfldkflskdf <upcase>stuff</upcase>skdlskd" would become: 
"asdasd SOMETHING dfldkflskdf STUFF skdlskd" 
```

到目前为止，我得到了这个，但它仅从标签的第一次出现中返回文本。

```
static String tags (String word)
    {
        String changed = word;

        while (changed.indexOf("<upcase>" ) >= 0)
                {
                changed = (changed.substring(changed.indexOf("<upcase>")+"<upcase>".length(),changed.indexOf("</upcase>")));
                }
        return changed.toUpperCase(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:00:20.853

首先，由于在大写标记之间可以有多个字符串，因此您需要返回一组字符串。我选择了一个列表。

其次，您需要使用 String indexOf(string, pos) 方法，这样您就不会失去您在 XML 字符串中的位置。

这是做你想做的事的一种方法。

```
public List<String> tags(String xml) {
    List<String> list = new ArrayList<String>();
    String startTag = "<upcase>";
    String endTag = "</upcase>";
    int sPos = xml.indexOf(startTag);
    while (sPos >= 0) {
        int ePos = xml.indexOf(endTag, sPos + startTag.length());
        if (ePos >= 0) {
            list.add(xml.substring(sPos + startTag.length(), ePos)
                    .toUpperCase());
        }
        sPos = xml.indexOf(startTag, ePos + endTag.length());
    }
    return list;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:41:24.863

好的，这是一个更新的版本：

```
public static String tags(String xml) {
    final String upcaseTagRegex = "<upcase>(.*?)</upcase>";
    String result = xml;
    Pattern pattern = Pattern.compile(upcaseTagRegex, Pattern.CASE_INSENSITIVE | Pattern.DOTALL);
    Matcher matcher = pattern.matcher(xml);

    while(matcher.find()) {
        result = result.replaceFirst(upcaseTagRegex, matcher.group(1).toUpperCase());
    }

    return result;
} 
```

# c# - 如何在允许良性 SQL 注入的同时防止恶意 SQL 注入攻击？

> ID：15816695
> 
> 赞同：5
> 
> 时间：2013-04-04T16:29:15.957
> 
> 标签：c#, sql-server, asp.net-mvc-4, sql-injection

我正在编写一个 ASP.NET MVC4 应用程序，该应用程序最终动态构建一个 SQL SELECT 语句，以便在以后存储和执行。动态 SQL 的结构由用户以用户友好的方式配置确定，具有标准复选框、下拉菜单和自由格式输入文本框。验证输入并使用参数化查询构建 SQL 字符串会很简单，除了我需要允许高级用户输入自定义 SQL 以直接注入到 SELECT 和 WHERE 子句中。那么我可以使用哪些技术来清理自定义 SQL 表达式或以其他方式防止来自聪明用户的不需要的输入？我可以轻松地解析可疑关键字的字符串并将插入/更新/删除/等列入黑名单，但有些事情告诉我这不会 100% 保护我。

我很高兴提供更多关于我在这里所做的事情的详细信息，但我不确定还有哪些其他细节会有所帮助，因为我觉得我的问题虽然可能不常见，但非常普遍。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T16:41:05.230

与其他视图相反，*可以*安全地执行此操作（只需查看[Data Explorer](https://data.stackexchange.com)）。以下是您可以做的四件事来实现它：

### 账户安全

Sql Server 将允许您限制用于连接到数据库的帐户的可用权限。仅授予读取权限，并且仅授予相应的表。然后有人可以注入恶意代码，直到他们脸色发青，但它会在编译步骤失败，因为他们没有足够的权限。这可能意味着使用与应用程序其他部分不同的连接字符串进行此访问。

请注意，这对 sql 代码有好处，但也有其他类型的注入。如果您在运行之前将页面上的查询（全部或部分）显示给用户，您还应该注意 javascript 注入攻击，例如跨站点脚本。

### 查询调控器

您还想防御拒绝服务攻击。Sql 数据库使这些即使是*偶然*的也很容易发生，只需构造一个低效的查询。为了对抗这种威胁，您应该查看 Sql Server 中的[查询](https://technet.microsoft.com/en-us/library/dd421653.aspx)调控器功能。请注意，调整这个人是很棘手的。

### 隔离

最安全的做法是还使用托管在专用服务器上的专用、经过净化的报告数据库。这确保了任何查询都不会影响生产，无论是在性能方面还是在服务器或帐户遭到破坏方面。sql server 中有一些功能，例如 SSIS，您可以使用这些功能自动从生产中填充您的报告数据库。

### 使用产品

关于安全性的一件事是，您*永远*不想发现自己正在构建自己的安全系统。创建看似有效、通过测试但存在细微缺陷的东西很容易，这些缺陷会导致后来的违规行为。您希望依靠供应商的产品作为核心竞争力，并可以提供支持和一定程度的赔偿。通常我在身份验证系统方面谈论这一点，但这条规则也适用于 sql 注入防御。

在这种情况下，可能值得查看 Stack Overflow 的[Data Explorer](https://data.stackexchange.com/)。这是一个允许不受信任的用户构建任意查询的工具。该项目是[开源](https://code.google.com/p/stack-exchange-data-explorer/)的，因此您可以亲眼看到他们为确保安全所做的工作，或者甚至只是分叉该项目供您自己使用。再次值得一提的是，该工具的安全性的很大一部分是它旨在用于专用的、经过清理的数据库，因此它不会免除您对其他项目的要求。

不过，当一切都说完了，我认为设置一些视图并通过报告服务提供访问权限的评论可能是您最好的选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T16:34:45.383

我认为您只能通过**不**提供指定 SQL 的直接方式来实现您所需要的。

然而，这不一定是个问题。基本上，您只需要一个 SQL 子集来定义表达式（在 SELECT 中计算出的 solumns）和谓词（在 WHERE 中进行过滤）。这可以用自制的解析器来处理，它有足够的能力来做所有需要的事情，然后将表达式“编译”成真正的 SQL 代码，而不是直接注入任何东西。

然后，这将验证语法并确保不会制造任何允许任何注入的构造。此外，它允许您正确地让代码生成器根据需要对您生成的查询进行参数化（例如，所有文字都可以通过代码生成器作为查询参数传入）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T16:48:09.260

我永远不会让用户对生产服务器运行自定义 SQL 语句。哪些坏人可以直接尝试在他们不应该读取/写入/修改的表上进行读取/写入/修改，或者其他坏人可以破坏弱帐户并针对您的服务器运行 SQL 语句。

如果您有根据 html 输入创建 sql 语句的预构建系统，那么您可以在后端生成脚本，这不会损害您的数据库。否则，如果用户想要一些非常自定义的东西，那么让他们上传他们的脚本，与您的 SQL 管理员一起审查它，并确保它“可以安全执行”并按计划运行它。

如果脚本被拒绝，那么让用户知道它，并解释他们的自定义脚本被拒绝的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T07:05:11.967

使用存储过程，因此来自任何用户的任何东西都将作为参数插入并且永远不会被执行。

# visual-studio - 我的项目使用哪个版本的实体框架？

> ID：15816701
> 
> 赞同：8
> 
> 时间：2013-04-04T16:29:27.923
> 
> 标签：visual-studio, entity-framework, version, entity-framework-5

我有一个使用实体框架的项目，但我不确定我使用的是哪个版本的 EF。根据[Microsoft 版本历史记录](http://msdn.microsoft.com/en-US/data/jj574253)， EF5 将自行安装：

> 如果您使用 Visual Studio 2012 中的实体框架设计器创建新模型，EF5 NuGet 包将安装到您的项目中，并且生成的代码将使用 EF5。

但是我没有创建项目的 EF 部分，而是从版本控制 (TFS) 中获得的。现在我不确定如何确定我是否有 EF5。

如果我右键单击项目的 References 文件夹并选择管理 NuGet 包，它会显示带有卸载按钮的 EF5，这意味着我有 EF5。

但是 References 文件夹中的 system.data.entity 在属性资源管理器中有一个运行时版本 v4.0.30319 和版本 4.0.0.0，这意味着 EF 4（根据[确定我正在使用的实体框架的版本？](https://stackoverflow.com/questions/3377821/entity-framework-how-can-i-tell-what-version-i-am-using)）。

我确实有这个`app.config`：

```
<section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" /> 
```

这在我的`web.config`：

```
<configSections>
  <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
</configSections>
<!--...-->
  <dependentAssembly>
    <assemblyIdentity name="EntityFramework" publicKeyToken="b77a5c561934e089" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-5.0.0.0" newVersion="5.0.0.0" />
  </dependentAssembly>
<!--...-->
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework> 
```

任何人都可以澄清这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:51:23.850

也许您的项目基于 .NET 4.0，在这种情况下，您有一个没有 .NET 4.5 功能的 EF5 版本：

[EntityFramework 5 使用 dll 版本 4.4.0\. 而不是 5.0](https://stackoverflow.com/questions/12368304/entityframework-5-use-dll-version-4-4-0-instead-5-0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T07:15:35.947

根据这个对[Entity Framework 5的](https://stackoverflow.com/questions/12539742/entity-framework-5-not-installing-correctly)[回答没有正确安装？](https://stackoverflow.com/a/12539749/422877)，应该只看，在我的例子中显示**运行时版本** v4.0.30319 但**版本**5.0.0.0。（所以我确实有 EF 5。）`EntityFramework.dll`

 ***** * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-01T09:13:09.633

转到项目的 packages.config 文件。

```
 <package id="EntityFramework" version="6.1.3" targetFramework="net45" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T18:26:40.527

我在 System.Data.Entity 上有相同的版本号。这来自 .Net 框架，而不是实体框架安装。您可以通过右键单击引用并选择**Find Code Dependent on Module**来查看应用程序的哪些部分正在使用它。除非代码访问元数据，主要是状态枚举和属性定义，否则通常不会有很多。下一个版本会将所有这些都带入 EntityFramework.dll - 请参阅[EFv6](http://entityframework.codeplex.com/wikipage?title=Updating%20Applications%20to%20use%20EF6)

顺便说一句，查看 System.Data.Entity 属性中的文件夹，v4.0.30319 位于 .NETFramework\v4.5

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-18T19:10:35.537

获取此类信息的最简单方法是安装[Microsoft ASP.NET MVC Diagnostics 5.2.3](https://www.nuget.org/packages/MvcDiagnostics/)

这只是为您的项目生成一个包含所有相关信息的网页。例如，您可以在该页面上搜索“实体”并立即查看版本信息。

这是一篇[文章](http://haacked.com/archive/2010/12/05/asp-net-mvc-diagnostics-using-nuget.aspx/)，展示了此诊断工具的一种用法。****

# c# - 如何在 Emgucv 中设置多通道矩阵的值

> ID：15816710
> 
> 赞同：2
> 
> 时间：2013-04-04T16:29:38.833
> 
> 标签：c#, opencv, emgucv

我没有找到任何解释如何使用具有多个通道的矩阵 im emgucv

```
var matrixa = new Matrix<float>(usablePoints.Count, 1, 2); 
```

我尝试了 Split() 函数，但它没有改变**matrixa的值**

```
var channels = matrixa.Split();
for (int i = 0; i < usablePoints.Count; ++i)
{
  channels[0][i, 0] = usablePoints[i].X;
  channels[1][i, 0] = usablePoints[i].Y;
} 
```

我错过了什么？我怎样才能操纵matrixa的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:52:15.207

如果您查看`matrixa.Data`，这将是`float[,]`第一个维度对应于行，第二个维度是合并到一个维度的列和通道。如果通道数为`N`，当前通道为`n`，当前列为`m`，则第二维的索引`j`为

```
j = m*N + n 
```

因此，对于您的示例：

```
for (int i = 0; i < usablePoints.Count; ++i)
{
  matrixa.Data[i, 0] = usablePoints[i].X;
  matrixa.Data[i, 1] = usablePoints[i].Y;
} 
```

应该管用。

一个更复杂的例子：假设我们有 3 个通道，5 列，并且想将第 2 行，第 4 列和第 3 通道的值设置为 1：

```
j = m*N + n = 3*3 + 2 = 11
=>
matrixa.Data[1, 11] = 1; 
```

# cocos2d-iphone - 粒子设计器如何将粒子的轨迹变成矩形？

> ID：15816711
> 
> 赞同：0
> 
> 时间：2013-04-04T16:29:41.340
> 
> 标签：cocos2d-iphone, cocos2d-x, particle-system

使用粒子设计器很容易生成粒子使其轨迹为圆形。我的问题是如何使轨迹成为矩形？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:04:56.403

如果您打算将单个粒子从矩形的一个角移动到另一个角，那么答案是：您不能。

但是，您可以移动粒子系统本身。如果系统生成没有速度/方向的粒子（即粒子保持原位），并且您自己以矩形方式移动足够多的粒子系统实例（即使用顺序 CCMoveTo），您可能能够实现您想要的。

# jquery - JavaScript 运行时错误：无法获取未定义或空引用的属性“歌剧”

> ID：15816712
> 
> 赞同：1
> 
> 时间：2013-04-04T16:29:44.597
> 
> 标签：jquery, jquery-plugins

如果我使用从javascript 文件`jquery-1.9.1.min.js`获取。`JavaScript runtime error: Unable to get property 'opera' of undefined or null reference``Jquery Isotope v1.5.19`

如果我使用`https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js`JQuery。它工作正常并且运行顺利。我都想使用最新的 jQuery。

有什么解决办法吗？

![在此处输入图像描述](https://i.stack.imgur.com/puMuH.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T11:10:19.787

如果您想继续使用旧的 jQuery API，您需要在 jquery.1.9.1.js 脚本之前加载 jquery-migrate 插件。

例如

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.1.1.js"></script> 
```

[jquery-migrate 下载和自述文件](https://github.com/jquery/jquery-migrate)

** 更新：

尝试使用 Jquery Isotope v1.5.25。它针对 Jquery 1.9 进行了更新，并且没有对 .browser 插件的引用。

[https://raw.github.com/desandro/isotope/master/jquery.isotope.js](https://raw.github.com/desandro/isotope/master/jquery.isotope.js)

# java - 比较两个 JComboBoxes 的值

> ID：15816714
> 
> 赞同：0
> 
> 时间：2013-04-04T16:29:56.077
> 
> 标签：java, string, swing, jcombobox, gridbaglayout

快速提问。我有两个 JComboBox 填充了从 2010 年到 2018 年的一串年份。一个组合框与“开始日期”标签相关联，一个组合框与“结束日期”标签相关联。我想确保在“结束日期”中选择的年份小于在“开始日期”中选择的年份。我已经查找了有关如何比较值的方法是组合框，但我只是找不到适合我的具体示例的方法。

这是一些代码：

```
String[] YEARS = {"Select a Year", "2010", "2011", "2012", "2013", "2014", 
    "2015", "2016", "2017", "2018",};

//Start Date
yearLong = new JComboBox(YEARS);
     c.fill = GridBagConstraints.HORIZONTAL;
     c.gridx = 3;
     c.gridy = 1;
     c.gridwidth = 1;
     yearLong.setSelectedItem(Integer.toString(year));
     pane.add(yearLong, c);
//End Date
         yearLong1 = new JComboBox(YEARS);
     c.fill = GridBagConstraints.HORIZONTAL;
     c.gridx = 3;
     c.gridy = 3;
     c.gridwidth = 1;
     pane.add(yearLong1, c); 
```

为了向你证明我已经尝试了一些东西，到目前为止我已经这样做了以进行错误检查：

```
 //Checks to see if the End Date precedes the Start Date
         } else if ((yearLong.getSelectedItem() > yearLong1.getSelectedItem())) {
             JOptionPane.showMessageDialog(null,  "Error 10: The End Date cannot precede the Start Date.",
             "Error!",
             JOptionPane.ERROR_MESSAGE);
             return;
         } 
```

但是，我不断收到一条错误消息，说 > 操作不能在那里使用。我知道 == 操作可以，所以我不确定我做错了什么？

像往常一样，感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:54:58.133

错误的原因是`getSelectedItem()`实际上返回`Object`没有`>`定义运算符。

由于您使用字符串填充了组合，因此在比较日期时应该将字符串转换为整数。你可以使用`Integer.parseInt()`方法。只需确保正确处理*“选择年份”*字符串即可。如果需要，您还可以使用整数填充组合框，它`Object`在其构造函数中接受数组。有关更多详细信息和示例，请参阅[如何使用组合框](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)。

# actionscript-3 - AS3 位图数据和 .as 文件

> ID：15816717
> 
> 赞同：0
> 
> 时间：2013-04-04T16:29:58.473
> 
> 标签：actionscript-3

我有 .fla 和 .as 文件。.fla：

```
import test ;
var b:test = new test();

var myBitmap:BitmapData = new BitmapData(150, 150, true, 0x80FF3300);
var test:BitmapData = new BitmapData(150, 150, false, 0xFF0000); 
var myImage:Bitmap = new Bitmap(test); 
addChild(myImage); 
```

并作为

```
package 

{
    import flash.display.*;

public dynamic class test extends flash.display.BitmapData
{
    public function test(arg1:int=621, arg2:int=427)
    {
        super(arg1, arg2);
        return;
    }
} 
```

}

但它不起作用，BitmapData 必须具有与加载 .as (test.as) 相同的名称，但我不知道该怎么做：|

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:55:58.287

如果您不想在 BitmapData 之上添加一些功能，为什么还要创建另一个类并扩展 BitmapBata 类，您可以直接使用它。

据我了解，您在屏幕上看不到任何内容，这很正常，因为您在舞台上添加了一个空白位图，即：它的 BitmapData 没有任何东西可以传递。

也许您需要将 Test 类链接到导入到您的 fla 中的图像，以便您可以在屏幕上看到一些东西。

# php - PHP XML 转数组函数

> ID：15816722
> 
> 赞同：0
> 
> 时间：2013-04-04T16:30:08.923
> 
> 标签：php, xml, xml-parsing, simplexml

嗨，伙计们，我正在尝试编写一个函数，该函数将使用 simplexml 将 xml 转换为数组。我知道那里已经编写了一些函数，但我需要自己编写。这个 xml 只是一个例子，可能是不同的格式，所以我需要这个函数与任何类型的 xml 结构一起使用，基本上遍历所有标签并循环遍历所有级别的所有标签并创建数组。

这是我的 xml 的样子

```
 <approval id='x34445454'>
       <p_data>
    <p_wide>3.5</p_wide>
    <p_hieight>2</p_hieight>
       </p_data>
     <bars></bars>
    <timer>
    <loc_time>
        <year>2013</year>
        <month>4</month>
        <day>2</day>
    </loc_time>
    <start>
        <year>2013</year>
        <month>04</month>
        <day>02</day>
    </start>
    <end>
        <year>2013</year>
        <month>04</month>
        <day>09</day>
    </end>
</timer>
<customer_data>
    <custid>8789</custid>
    <email>myemail@gmail.com</email>
    <description>Some item description</description>
    <optout>false</optout>
</customer_data>
<large>2</large>
<job name='ord1'>
    <guides></guides>

    <preview>
        <type>mytpe</type>
        <info_message></info_message>
        <label>both</label>
        <index>100</index>
        <imagebox>
            <data>703.448275862069</data>
            <height>11.068965517241</height>
            <shift>0</shift>
        </imagebox>
        <OK_Screen></OK_Screen>
    </preview_file>
    <preview_file>
        <type>mytpe3</type>
        <info_message></info_message>
        <label>sides</label>
        <index>100</index>
        <imagebox>
            <data>111.448275862069</data>
            <height>11.554</height>
            <shift>0</shift>
        </imagebox>
        <OK_Screen></OK_Screen>
    </preview>
</job>

<job name='ord1'>
    <guides></guides>

    <preview>
        <type>mytpe</type>
        <info_message></info_message>
        <label>both</label>
        <index>100</index>
        <imagebox>
            <data>703.448275862069</data>
            <height>11.068965517241</height>
            <shift>0</shift>
        </imagebox>
        <OK_Screen></OK_Screen>
    </preview_file>
    <preview_file>
        <type>mytpe3</type>
        <info_message></info_message>
        <label>sides</label>
        <index>100</index>
        <imagebox>
            <data>111.448275862069</data>
            <height>11.554</height>
            <shift>0</shift>
        </imagebox>
        <OK_Screen></OK_Screen>
    </preview>
</job> 
```

到目前为止 iv 写了这个函数

```
 function xmltest($xml) {
      $arr = array();

foreach($xml as $element) {
    $arr[$element->getName()]=array();
    foreach($element->attributes() as $key=>$value) {
        $arr[$element->getName()][$key]=(string)$value;
    }

    foreach($element as $key=>$value) {
       $arr[$element->getName()][$key]=array();

        if(!$value->children() && (!empty($value))) {
            $arr[$element->getName()][$key]=(string)$value;
        } 

    }

  }

  return $arr;

} 
```

这是返回

```
 Array
  (
[approval] => Array
    (
        [id] => x34445454
        [p_data] => Array
            (
            )

        [bars] => Array
            (
            )

        [timer] => Array
            (
            )

        [customer_data] => Array
            (
            )

        [large] => 2
        [job] => Array
            (
            )

    ) 
```

)

这很棒，但现在我需要不断循环并添加所有标签，直到没有更多标签为止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:36:17.027

这是我有时使用的一个功能：

```
public function xmlToArray( $xmlObject, $out = array () )
{
        foreach ( (array) $xmlObject as $index => $node )
            $out[$index] = ( is_object ( $node ) ) ? $this->xmlToArray( $node ) : $node;

        return $out;
} 
```

# css - 文本类型前后的 HTML 表单空间

> ID：15816723
> 
> 赞同：0
> 
> 时间：2013-04-04T16:30:12.430
> 
> 标签：css

这是我的代码：

```
You have
<form name="cd" style="display: inline;">
<input id="time" readonly="true" type="text" value='10:00' border="0" name="disp">
</form>
left... 
```

这就是正在发生的事情： ![在此处输入图像描述](https://i.stack.imgur.com/28DRA.png)

我想要做的是用“红十字”删除那些空间。
我已经尝试添加这个 CSS 代码：

```
form{
padding:0;
margin:0;
} 
```

但是没有成功...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:33:32.363

将所有内容放在同一行，从表单开始，请不要在表单标签上使用样式。

```
<form name="cd">    
    You have <input id="time" readonly="true" type="text" value='10:00' border="0" name="disp"> left...
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:34:28.133

您正在引用表单元素。而是尝试直接设置输入样式。

例如：

```
form input {padding:0;margin:0} 
```

# ruby - 使用 Apache 托管 Ruby gem

> ID：15816725
> 
> 赞同：2
> 
> 时间：2013-04-04T16:30:18.050
> 
> 标签：ruby, apache, gem, bundler

我无法弄清楚如何使用 Apache 托管我自己创建的 Ruby gem。我想知道是否有人可以帮助我找出问题所在。

这是我到目前为止所做的。我首先创建了自己的“hello world”gem（按照[这些说明](http://guides.rubygems.org/make-your-own-gem/)进行操作）：

```
$ bundle gem helloearth

$ cat lib/helloearth.rb
require "helloearth/version"

module Helloearth
  def self.hi
    puts "hello world"
  end
end

$ cat helloearth.gemspec 
# coding: utf-8
lib = File.expand_path('../lib', __FILE__)
$LOAD_PATH.unshift(lib) unless $LOAD_PATH.include?(lib)
require 'helloearth/version'

Gem::Specification.new do |spec|
  spec.name          = "helloearth"
  spec.version       = Helloearth::VERSION
  spec.authors       = ["Some Guy"]
  spec.email         = ["someguy@example.com"]
  spec.description   = %q{a gem description}
  spec.summary       = %q{a gem summary}
  spec.homepage      = "http://www.example.com"
  spec.license       = "MIT"

  spec.files         = `git ls-files`.split($/)
  spec.executables   = spec.files.grep(%r{^bin/}) { |f| File.basename(f) }
  spec.test_files    = spec.files.grep(%r{^(test|spec|features)/})
  spec.require_paths = ["lib"]

  spec.add_development_dependency "bundler", "~> 1.3"
  spec.add_development_dependency "rake"
end 
```

然后我构建了 gem，安装并运行它以验证它是否有效：

```
$ gem build helloearth.gemspec
  Successfully built RubyGem
  Name: helloearth
  Version: 0.0.1
  File: helloearth-0.0.1.gem

$ gem install ./helloearth-0.0.1.gem 
Successfully installed helloearth-0.0.1
1 gem installed
Installing ri documentation for helloearth-0.0.1...
Installing RDoc documentation for helloearth-0.0.1...

$ irb
1.9.3-p362 :001 > require 'helloearth'
 => true 
1.9.3-p362 :002 > Helloearth.hi
hello world
 => nil 
```

有用！现在我要卸载我的“hello world”gem（通过清空整个gemset），然后从服务器重新安装它：

```
$ rvm gemset empty currentgemset
Are you SURE you wish to remove the installed gems for gemset 'ruby-1.9.3-p362@currentgemset' (/home/joe/.rvm/gems/ruby-1.9.3-p362@currentgemset)?
(anything other than 'yes' will cancel) > yes 
```

我需要设置 Apache 来托管这个 gem。我按照[http://docs.rubygems.org/read/chapter/18#page81](http://docs.rubygems.org/read/chapter/18#page81)上的说明进行了此操作：

```
$ sudo mkdir /var/www/gems
$ sudo cp helloearth-0.0.1.gem /var/www/gems
$ rvmsudo gem generate_index -d /var/www/gems/
Warning: can not check `/etc/sudoers` for `secure_path`, falling back to call via `/usr/bin/env`, this breaks rules from `/etc/sudoers`. export rvmsudo_secure_path=1 to avoid the warning.Generating Marshal quick index gemspecs for 0 gems

Complete
Generated Marshal quick index gemspecs: 0.000s
Generating Marshal master index
Generated Marshal master index: 0.000s
Generating specs index
Generated specs index: 0.000s
Generating latest specs index
Generated latest specs index: 0.000s
Generating prerelease specs index
Generated prerelease specs index: 0.000s
Compressing indicies
Compressed indicies: 0.001s

$ ls /var/www/gems
helloearth-0.0.1.gem  Marshal.4.8.Z            specs.4.8
latest_specs.4.8      prerelease_specs.4.8     specs.4.8.gz
latest_specs.4.8.gz   prerelease_specs.4.8.gz
Marshal.4.8           quick 
```

Apache 现在托管 gem，我可以使用我的网络浏览器在 localhost/gems 成功访问这个目录。但是，我无法从 Apache 服务器安装我的 gem：

```
$ gem sources -a http://localhost/gems/
http://localhost/gems/ added to sources

$ gem sources
*** CURRENT SOURCES ***

http://rubygems.org/
http://localhost/gems/

cd ~ # leave the directory which holds the local copy of the gem to force use of the Apache server

$ gem install helloearth
ERROR:  Could not find a valid gem 'helloearth' (>= 0) in any repository
ERROR:  Possible alternatives: hello_bar, hello_ext, hellogr, helloh, hellolorem 
```

我还尝试添加 127.0.0.1/gems/ 和 0.0.0.0/gems/ 作为 gem 源，但都没有解决问题。有人告诉我将 --legacy 标志添加到对 $ gem generate_index 的调用中，但这也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:34:41.413

helloearth-0.0.1.gem 不在 gem generate_index 的正确位置。

如果您希望源为 /gems，则 .gem 文件需要位于 /var/www/gems/gems

gem generate_index -d 调用位于父目录 (BASEDIR) 上，.gem 文件位于 /gems 子目录中。

[http://docs.rubygems.org/read/chapter/18 “如何运行像 RubyForge 这样的 Gem 服务器？”](http://docs.rubygems.org/read/chapter/18 "如何运行像 RubyForge 这样的 Gem 服务器？")

# service - XCopy 适用于用户但不适用于服务

> ID：15816733
> 
> 赞同：0
> 
> 时间：2013-04-04T16:30:44.617
> 
> 标签：service

我让 TFS 运行自动构建。该解决方案运行一个 cmd 文件，该文件用完批处理文件，然后在最后执行并 xcopy 以将结果复制到我们的发布 PC。

如果我手动运行 cmd 文件，文件就会复制过来。如果我在自动构建中运行它，那么它会失败并显示拒绝访问无法创建目录错误（目录在那里）。

服务在其他 PC 上创建目录或类似的东西有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:42:21.130

已排序 - 需要将 PC 名称添加为远程计算机上的用户才能获得访问权限！

# java - 把我的java项目变成可执行文件

> ID：15816737
> 
> 赞同：1
> 
> 时间：2013-04-04T16:30:49.683
> 
> 标签：java, executable

我做了一个Java项目，我只是想把它变成一个可执行文件以获得反弹，我在这个网站上找到了一些与一些程序相关的答案。我尝试使用这些程序，但它们不起作用。请帮助我以最有效的方式将由四个类组成的 Java 项目转换为可执行文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:36:42.110

导出 -> 可运行的 jar，就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:33:10.763

在 Java 中，您创建一个可执行的 .jar 文件，而不是一个 exe。这是一个帮助解决此问题的[教程：](http://www.mkyong.com/java/how-to-make-an-executable-jar-file/)

# jquery - JQuery UI 对话框显示等待消息，直到处理 ajax 调用

> ID：15816740
> 
> 赞同：6
> 
> 时间：2013-04-04T16:30:57.507
> 
> 标签：jquery, jquery-ui, callback

我认为这一切都在标题中。当我开始这个时，我认为这将是一个 5 分钟的代码或谷歌搜索时的快速结果......但现在是三个小时我在这个：

只需显示一个对话框，其中包含“请稍候...”消息，而我正在执行 ajax 调用以检索一些 json 结果，然后显示“结果完成”。

```
$('#switchOff').live("click",function(){

   $('#dialog').dialog({
                modal:true,

               open: function(){
// I would like to call myAjax function
//From here ?
// While my dialog is showing the Wait message...
               },

                complete: function(){
//close the dialog when fished
                 $('#dialog').dialog('close');
                         },
   }); 

});

function ajaxCall() {
                //my ajax call
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T19:12:10.613

你不应该再使用`live`了。改为使用`.on`。您正在将对话框与 ajax 代码混合。这是我将如何做的一个例子。

[这是小提琴演示的链接](http://jsfiddle.net/oumichaelm/EjpD3/)

```
$('#switchOff').on("click",  ajaxCall);

$("#loading").dialog({
    hide: 'slide',
    show: 'slide',
    autoOpen: false
});

function ajaxCall() {
    $.ajax({
        url: '/echo/html/',
        data: { html: '<p>JSON result</p>' , delay: 3},
        method: 'post',
        beforeSend: function(){
           $("#loading").dialog('open').html("<p>Please Wait...</p>");
        },
        success: function(data) {
            $('#loading').html("<p>Result Complete...</p>");
            $('#ajaxResult').html(data);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:51:42.963

行

有了这个评论

```
 `As I described my problem, in fact I would like to first display the dialog: $("#myDialogBox").dialog();` 

And after call the ajax.. 
```

解决方案是：

从点击按钮`id="btn"`

```
$( "#btn_Deletepara" ).click(function() {
                $( "#JQUERY'sDialog" ).dialog( "open" );
//Now you Call the ajax
            }); 
```

或者

```
$( "#JQUERY'sDialog" ).dialog({

Add your script for call ajax 
```

# javascript - XSS 易受攻击的 Web 应用程序

> ID：15816746
> 
> 赞同：3
> 
> 时间：2013-04-04T16:31:09.227
> 
> 标签：javascript, html, web

任何人都知道任何支持本地存储的易受攻击的 Web 应用程序？例如 DVWA（该死的易受攻击的 Web 应用程序）

```
http://www.dvwa.co.uk/ 
```

谢谢你。

# jquery - 点击事件上的 Jquery slideUp 在 IE 7、8、9 中不起作用

> ID：15816749
> 
> 赞同：1
> 
> 时间：2013-04-04T16:31:14.350
> 
> 标签：jquery, html, css

我知道这个问题被问了 mnay 次，但我仍然无法解决它。如果您有任何想法，请告诉我。问题仅在 IE 中，单击按钮时根本不会滑动。

这是我的代码

JS：

```
$(document).ready(function($){
     $('#hide_cookie').click(function(e) {
      event.preventDefault()
      $('.cookie').slideUp('slow', function() {
        // Animation complete.
      });
    });
}); 
```

CSS：

```
.cookie {
    background: #47515c;
    text-align: center;
    color: #dadcde;
    max-height: 115px !important;
    zoom: 1;
}
.cookie span {
    font-size: 12px;
    font-weight: bold;
    text-transform: uppercase;
}
.cookie p {
    font-size: 11px;
    line-height: 14px;
}
.cookie .button {
    height: 37px;
}
.cookie .button a {
    color: #fff;
} 
```

HTML：

```
<div class="cookie">
    <div class="container_12">
        <span>Title</span>
        <p>content here</p>
    </div>
    <div class="button">
       <a href="#" id="hide_cookie" class="read-more">Hide me</a>
    </div>
</div> 
```

[小提琴](http://jsfiddle.net/x2r7U/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:35:09.623

您作为 click 事件参数传递`e`，然后调用`event`. 试试这个：

```
$(document).ready(function($){
     $('#hide_cookie').click(function(e) {
      e.preventDefault()
      $('.cookie').slideUp('slow', function() {
        // Animation complete.
      });
    });
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/x2r7U/5/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T16:36:33.243

两个问题：

'slaw' 不是要传递给的正确速度值`.slideUp()`，请尝试 'slow'

您的事件函数使用“e”作为事件参数，然后将其称为`event`

```
$(document).ready(function($){
     $('#hide_cookie').click(function(e) {
      e.preventDefault()
      $('.cookie').slideUp('slow', function() {
        // Animation complete.
      });
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T16:36:26.853

删除你的`event.preventDefault()`，因为在这种情况下它并不重要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T16:38:10.677

删除 event.preventDefault() :)

# c# - WPF中的图像数组

> ID：15816752
> 
> 赞同：0
> 
> 时间：2013-04-04T16:31:26.433
> 
> 标签：c#, wpf, arrays, image

如何将一些源代码放入`Array`名为 WPF 控件的源代码中`Image`？我找到了这个论坛，但是如何制作数组？

```
BitmapImage logo = new BitmapImage()
logo.BeginInit();
logo.UriSource = new Uri("pack://application:,,,/img/3.jpg");
logo.EndInit();

tmpimage.Source = logo; 
```

但我需要这样的东西：

```
Image[] img = new Image[3];
img[0].Source = new Uri("pack://application:,,,/img/3.jpg");
tmpimage.Source = img[0]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:35:51.577

```
Image[] images = new Image[3] { new Image(), new Image(), new Image() };
images[0].Source = new BitmapImage(new Uri("pack://application:,,,/img/3.jpg"));
images[1].Source = new BitmapImage... // etc... 
```

或者，使您的图像工厂成为一个函数并使用 LINQ：

```
Image CreateBitmap(string uri)
{ 
    return new Image() { Source = new BitmapImage(new Uri(uri)) };
}

Image[] GetImages()
{
    var imageUris = new[]
    {
        "pack://application:,,,/img/3.jpg", 
        "pack://application:,,,/img/elephant.jpg", 
        "pack://application:,,,/img/banana.jpg"
    };
    return imageUris.Select(CreateBitmap).ToArray();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-30T04:24:21.223

BitmapImage 的动态数组：

```
 BitmapImage[] iHab;

    BitmapImage CreateBitmap(string uri)
        { 
        return new BitmapImage(new Uri(uri));
        }

    BitmapImage[] GetImages()
        {
        string currDir = Directory.GetCurrentDirectory();
        string[] imageUris;

        //Get directory path of myData 
        string temp = currDir + "\\Media\\hcia\\";
        imageUris = Directory.GetFiles(temp, "habitation*.png");
        return imageUris.Select(CreateBitmap).ToArray();  
        }

    private void Rec_hab_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        iHab = GetImages();
        pointer.Source = iHab[7]; // the 7th image : can be manipulated with an i++
    } 
```

# php - 隐藏字段未收到用户的 Facebook 详细信息

> ID：15816759
> 
> 赞同：0
> 
> 时间：2013-04-04T16:31:45.700
> 
> 标签：php, javascript, facebook-graph-api, jquery-mobile, facebook-javascript-sdk

我正在使用 facebook javascript sdk 来获取登录用户的公共数据。我想要做的是将值绑定到表单中的隐藏字段，并在提交时获取将插入 MySQL 数据库的 php 文件中的值。但是当我提交表单时，没有值。这是为什么？如果我需要提供更多信息，请告诉我。当我登录时，我可以在网络应用程序上看到我的 Facebook 名称和个人资料图片。

```
//Hidden fields within form

<input type="hidden" name="hdnFacebookId" id="hdnFacebookId" value="">
<input type="hidden" name="hdnUsername" id="hdnUsername" value="">
<input type="hidden" name="hdnFirstName" id="hdnFirstName" value="">
<input type="hidden" name="hdnLastName" id="hdnLastName" value="">
<input type="hidden" name="hdnFacebookImg" id="hdnFacebookImg" value="">
<input type="hidden" name="hdnFacebookUrl" id="hdnFacebookUrl" value="">
<br/>
<input type="submit" id="submit" onclick="setValues()" data-theme="b" value="Submit" class="ui-btn-hidden" aria-disabled="false">

<script>
function updateUserInfo(response) {
 FB.api('/me', function(response) {
   document.getElementById('myFacebookImg').src = "https://graph.facebook.com/" + response.id + "/picture";
   document.getElementById('myFacebookName').innerHTML = response.name;

   function setValues(){
        document.postAJourneyForm.hdnFacebookId.value = response.id;
        document.postAJourneyForm.hdnUsername.value = response.username;
        document.postAJourneyForm.hdnFirstName.value = response.first_name;
        document.postAJourneyForm.hdnLastName.value = response.last_name;
        document.postAJourneyForm.hdnFacebookImg.value = "https://graph.facebook.com/" + response.id + "/picture";
        document.postAJourneyForm.hdnFacebookUrl.value = "http://graph.facebook.com/" + response.username;
        //document.forms["postAJourneyForm"].submit();
   }
 }); 
```

}

```
//php file that gets the data to post to database
//I check in the code if it is empty before I can execute the query
//but it is always empty
//get the facebook data
$hdnFacebookId = $_POST['hdnFacebookId'];
$hdnUsername = $_POST['hdnUsername'];
$hdnFirstName = $_POST['hdnFirstName'];
$hdnLastName = $_POST['hdnLastName'];
$hdnFacebookImg = $_POST['hdnFacebookImg'];
$hdnFacebookUrl = $_POST['hdnFacebookUrl'];

//Updated with JSON
<script>
function updateUserInfo(response) {
 FB.api('/me', function(response) {
   document.getElementById('myFacebookImg').src = "https://graph.facebook.com/" + response.id + "/picture";
   document.getElementById('myFacebookName').innerHTML = response.name;
   document.getElementById('facebookUrl').href = "https://www.facebook.com/" + response.username;

   var JSONObject = {
    "facebookId":response.id,
    "facebookName":response.username,
    "facebookFirstName":response.first_name,
    "facebookLastName":response.last_name
   };
   document.getElementById('hdnFacebookId').innerHTML = JSONObject.facebookId;
   document.getElementById('hdnUsername').innerHTML = JSONObject.facebookName;
   document.getElementById('hdnFirstName').innerHTML = JSONObject.facebookFirstName;
   document.getElementById('hdnLastName').innerHTML = JSONObject.facebookLastName;
   document.getElementById('hdnFacebookImg').innerHTML = JSONObject.facebookImage;
   document.getElementById('hdnFacebookUrl').innerHTML = JSONObject.facebookUrl;

 });
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:33:56.827

设置值。

```
$('#hdnFacebookId').val(response.id);
$('#hdnUsername').val(response.username);
$('#hdnFirstName').val(response.first_name);
$('#hdnLastName').val(response.last_name);
$('#hdnFacebookImg').val('https://graph.facebook.com/' + response.id + '/picture');
$('#hdnFacebookUrl').val('http://graph.facebook.com/' + response.username); 
```

# html - HTML5 验证器错误

> ID：15816762
> 
> 赞同：0
> 
> 时间：2013-04-04T16:31:51.327
> 
> 标签：html, canvas, html5-canvas, validation

我正在尝试通过 W3C 验证器验证 HTML5 页面，但我收到了一个我找不到相关信息的错误。有没有人有这个错误的经验以及如何克服它？

这是html元素：

```
 <canvas id="eventCanvas" name="eventCanvas" width="1000" height="500" draggable="true"> </canvas> 
```

这是来自验证器的错误：此时元素画布上不允许使用属性名称。[HTML5]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:33:21.717

这意味着画布不能有名称属性。

将您的代码更改为：

```
<canvas id="eventCanvas" width="1000" height="500" draggable="true"> </canvas> 
```

并且该错误应该消失。

# javascript - 这个数组定义究竟做了什么？

> ID：15816765
> 
> 赞同：0
> 
> 时间：2013-04-04T16:32:05.153
> 
> 标签：javascript, ruby

下面是一段我用 JavaScript 重写的 Ruby 代码。我知道它将数组打包为“8 位无符号（无符号字符）”，然后将其解包为“16 位无符号，VAX（小端）字节顺序”，但我尝试让它在 JavaScript 中工作有失败的。

我想知道是否`||=`对数组中的值有任何影响？

我还想知道打包和拆包如何影响数组中的值？它只会`0x01`变成`0x0100`?

```
@_tree_left ||= [
  0x01, 0x01, 0x03, 0x01, 0x05, 0x01, 0x07, 0x01, 0x0B, 0x01, 0x0D, 0x01,
  0xF9, 0x00, 0xFB, 0x00, 0xFD, 0x00, 0x00, 0x01
].pack('C*').unpack('v*') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:42:42.193

`||=`是一个经典的Ruby成语意思：

```
v = v || second_expression 
```

如果第一个表达式的计算结果为，`false`或者`nil`这意味着将执行第二个表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:38:59.240

`||=`只是以下的简写：

```
@_tree_left = @_tree_left || [ ... ].pack('C*').unpack('v*') 
```

第一次执行语句时，`@_tree_left`将为 nil，因此将为其分配右侧表达式的值。如果第二次执行，那么只要`@_tree_left`还剩下任何一种值，它就不会被改变。

看是否简化会更容易一些。

```
@a             # => nil
@a = @a || 123 # => 123
@a = @a || 456 # => 123, no change this time 
```

表达式的其余部分是存储和检索特定的二进制字符串。

它可以很容易地在 JavaScript 中复制。它只是组合数组中的每两个值。所以它是计算：

```
b[0] = a[0] + (a[1] << 8)
b[1] = a[2] + (a[3] << 8)
. . . 
```

# sql - 基本 SQL OrderBy 查询

> ID：15816766
> 
> 赞同：0
> 
> 时间：2013-04-04T16:32:05.407
> 
> 标签：sql

下面的查询工作正常，并根据我的需要返回正确的结果

```
select top 1 SID from vSTable where (ID in 
(select ID from Engine where Name='nnn' OR Name='mmm') 
and QuestionTypeID=1 and IsOfficial=1) order by vSTable.ITime desc; 
```

但是当我这样使用它时

```
declare @SVal as int

set @SVal = select top 1 SID 
            from vSTable 
            where (
              ID in 
                  (select ID from Engine where Name='nnn' OR Name='mmm') 
              and QuestionTypeID=1 
              and IsOfficial=1
            ) order by vSTable.ITime desc; 
```

我在 select stmt 附近收到错误的语法错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:36:09.860

将 select 语句括在括号中

```
declare @SVal as int

set @SVal = (select top 1 SID 
            from vSTable 
            where (
              ID in 
                  (select ID from Engine where Name='nnn' OR Name='mmm') 
              and QuestionTypeID=1 
              and IsOfficial=1
            ) order by vSTable.ITime desc); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:39:04.050

你的语法有点不对劲。这应该有效：

```
 select @SVal = (select top 1 SID from vSTable where (ID in 
  (select ID from Engine where Name='nnn' OR Name='mmm') 
  and QuestionTypeID=1 and IsOfficial=1) order by vSTable.ITime desc) 
```

请注意，您可以使用 SET 或 SELECT 进行该分配。

# c# - 从属 DLL 未复制到 Visual Studio 中的生成输出文件夹

> ID：15816769
> 
> 赞同：220
> 
> 时间：2013-04-04T16:32:10.227
> 
> 标签：c#, .net, visual-studio-2010, dll, reference

我有一个视觉工作室解决方案。我在解决方案中有很多项目。有一个主要项目作为启动并使用其他项目。有一个项目说“ProjectX”。它的引用被添加到主项目中。ProjectX 引用了另一个不属于解决方案的 .NET dll（比如 abc.dll）。

现在这个 abc.dll 应该被复制到主项目的 bin/debug 文件夹，但它没有被复制到那里。为什么它没有被复制，任何已知的原因？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2014-07-18T15:20:56.693

我发现如果 ProjectX 引用了 abc.dll 但没有直接使用 abc.dll 中定义的任何类型，那么 abc.dll 将不会被复制到主输出文件夹。（它将被复制到 ProjectX 输出文件夹中，以使其更加混乱。）

因此，如果您没有在 ProjectX 中的任何位置显式使用 abc.dll 中的任何类型，则在 ProjectX 中的某个文件中的某个位置放置一个虚拟声明。

```
AbcDll.AnyClass dummy006; // this will be enough to cause the DLL to be copied 
```

您不需要对每个类都这样做——只需一次就足以使 DLL 复制并且一切都按预期工作。

**附录：**请注意，这可能适用于调试模式，但不适用于发布。有关详细信息，请参阅@nvirth 的答案。

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2016-09-28T19:12:35.407

只是对祖格大王的回答的一个旁注。

我以这种方式添加了虚拟引用，它在调试模式下工作：

```
public class DummyClass
{
    private static void Dummy()
    {
        var dummy = typeof(AbcDll.AnyClass);
    }
} 
```

但是在发布模式下，依赖的 dll 仍然没有被复制。
然而，这有效：

```
public class DummyClass
{
    private static void Dummy()
    {
        Action<Type> noop = _ => {};
        var dummy = typeof(AbcDll.AnyClass);
        noop(dummy);
    }
} 
```

这个信息实际上花了我几个小时才弄清楚，所以我想我分享它。

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2013-04-04T16:35:41.777

是的，您需要设置`Copy Local`为`true`. 但是，**我很确定**您还需要从主项目中引用该程序集并将其设置`Copy Local`为`true`- 它不仅仅是从依赖程序集中复制的。

您可以`Copy Local`通过单击下面的程序集`References`并按 F4 来访问该属性。

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2017-09-25T12:42:07.603

当您将其设置为程序集属性时，它看起来很漂亮

```
[AttributeUsage(AttributeTargets.Assembly)]
public class ForceAssemblyReference: Attribute
{        
    public ForceAssemblyReference(Type forcedType)
    {
        //not sure if these two lines are required since 
        //the type is passed to constructor as parameter, 
        //thus effectively being used
        Action<Type> noop = _ => { };
        noop(forcedType);
    }
} 
```

用法将是：

```
[assembly: ForceAssemblyReference(typeof(AbcDll.AnyClass))] 
```

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2015-02-22T18:27:42.947

遇到同样的问题。背景信息：在构建之前，我在解决方案中添加了一个新的 Project X。项目 Y 依赖于项目 X，项目 A、B、C 依赖于项目 Y。

构建错误是无法找到项目 A、B、C、Y 和 X dll。

**根本原因是新创建的 Project X 以 .NET 4.5 为目标，而其余解决方案项目以 .NET 4.5.1 为目标。** 项目 X 没有构建，导致其他项目也没有构建。

**确保任何新添加的项目都以与解决方案的其余部分相同的 .NET 版本为目标。**

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2016-12-06T22:30:12.767

不确定这是否有帮助，但对我来说，很多时候我引用了一个 DLL（当然，它会自动将它添加到 bin 文件夹中）。但是，该 DLL 可能需要额外的 DLL（取决于我使用的函数）。我不想在我的项目中引用它们，因为它们只需要与我实际使用的 DLL 在同一个文件夹中结束。

我通过“添加现有文件”在 Visual Studio 中完成此操作。您应该能够将它添加到除 Add_data 文件夹之外的任何位置。我个人只是将它添加到根目录。

然后将该文件的属性更改为...

Build Action = None（将此设置为 Content 实际上会将“root”版本复制到根目录，以及 Bin 中的副本）。

复制到输出文件夹 = 如果较新则复制（基本上只有在丢失时才将其放入 BIN 文件夹，但之后不会这样做）

当我发布时..我添加的 DLL 仅存在于 BIN 文件夹中，而在发布位置（这是我想要的）中不存在。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2016-10-03T18:09:32.027

您还可以检查以确保您要查找的 DLL 不包含在 GAC 中。我相信如果构建机器上的 GAC 中已经存在这些文件，Visual Studio 会很聪明地不复制这些文件。

我最近遇到了这种情况，我一直在测试一个需要在 GAC 中存在程序集的 SSIS 包。我已经忘记了这一点，并想知道为什么这些 DLL 在构建过程中没有出现。

要检查 GAC 中的内容（来自 Visual Studio 开发人员命令提示符）：

```
gacutil -l 
```

或输出到文件以使其更易于阅读：

```
gacutil -l > output.txt
notepad.exe output.txt 
```

要移除装配体：

```
gacutil -u MyProjectAssemblyName 
```

*我还应该注意，一旦我从 GAC 中删除了文件，它们就会在构建后正确地输出到 \bin 目录中（即使对于未在根项目中直接引用的程序集）。这是在 Visual Studio 2013 Update 5 上。*

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-01-26T03:06:56.437

如果您右键单击引用的程序集，您将看到一个名为**Copy Local**的属性。如果 Copy Local 设置为 true，则程序集应包含在 bin 中。**但是**，Visual Studio 似乎存在问题，有时它不包含 bin 文件夹中引用的 dll ......这是对我有用的解决方法：

[![在此处输入图像描述](https://i.stack.imgur.com/yELFN.gif)](https://i.stack.imgur.com/yELFN.gif)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-11-19T11:28:36.057

确保您使用的依赖 DLL 的目标 .NET Framework 不高于项目应用程序的目标 .NET Framework。

您可以通过选择您的项目来检查这一点，然后按`ALT`+ `ENTER`，然后从左侧选择应用程序，然后选择项目的目标框架。

假设，依赖 DLL Target Framework = 4.0 和 Application DLL Target Framework = 3.5 然后将其更改为 4.0

谢谢！

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-06-27T16:22:35.177

就我而言，这是最愚蠢的事情，由我不同意的 TFS/VS 的默认行为引起。

由于添加 dll 作为对主项目的引用不起作用，我决定将其添加为“现有项目”，其中 Copy Local = Always。即使那样，该文件也不存在。

事实证明，即使文件存在于 VS 解决方案中并且所有内容都在本地和服务器上编译，VS/TFS 并没有实际添加文件到源代码管理。它根本不包含在“待定更改”中。我必须手动转到源代码管理资源管理器并明确单击“将项目添加到文件夹”图标。

愚蠢，因为我已经在 VS 中开发了 15 年。我以前遇到过这个，我只是不记得了，不知何故我错过了它，因为由于文件是常规引用，所有内容仍然编译，但是作为现有项目添加的文件没有被复制，因为它不存在源代码控制服务器。

我希望这可以节省一些时间，因为我为此失去了 2 天的生命。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-07-30T01:42:54.360

这是对 nvirth 示例的轻微调整

```
internal class DummyClass
{
    private static void Dummy()
    {
        Noop(typeof(AbcDll.AnyClass));
    }
    private static void Noop(Type _) { }
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-04-06T22:06:18.897

我会将它添加到 Postbuild 事件中，以将必要的库复制到输出目录。像 XCopy pathtolibraries targetdirectory 这样的东西

您可以在项目属性 -> 构建事件中找到它们。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-05-01T14:49:26.437

**TLDR；Visual Studio 2019 可能只需要重新启动。**

我在使用基于 Microsoft.NET.Sdk 项目的项目时遇到了这种情况。

```
<Project Sdk="Microsoft.NET.Sdk"> 
```

具体来说：

*   `Project1`: 目标`.netstandard2.1`
    *   `Microsoft.Extensions.Logging.Console`通过 Nuget引用
*   `Project2`: 目标`.netstandard2.1`
    *   `Project1`通过项目引用引用
*   `Project2Tests`: 目标`.netcoreapp3.1`
    *   `Project2`通过项目引用引用

在测试执行时，我收到了错误消息，指出`Microsoft.Extensions.Logging.Console`找不到，并且它确实**不在**输出目录中。

`Microsoft.Extensions.Logging.Console`我决定通过添加to来解决这个问题`Project2`，只是发现 Visual Studio 的 Nuget Manager 没有`Microsoft.Extensions.Logging.Console`列为安装在 中`Project1`，尽管它存在于`Project1.csproj`文件中。

简单地关闭并重新启动 Visual Studio 即可解决问题，无需添加额外的参考。也许这可以为某人节省 45 分钟的生产力损失 :-)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2019-07-31T00:32:54.190

问题：

在构建输出不包含引用的 DLL 的 NuGet 包 DLL (Newtonsoft.json.dll) 中遇到类似问题。但是编译很顺利。

使固定：

在文本编辑器中浏览您的项目，并在其中查找带有“私人”标签的引用。喜欢真或假。“私人”是“复制本地”的同义词。在操作的某个地方，MSBuild 正在寻找依赖项，它在其他地方找到您的依赖项并决定不复制它。

因此，请浏览每个 .csproj/.vbproj 文件并手动删除标签。重建，一切都在 Visual Studio 和 MSBuild 中工作。完成该工作后，您可以返回并将其更新到您认为需要的位置。

参考：

[https://www.paraesthesia.com/archive/2008/02/13/what-to-do-if-copy-local-works-in-vs-but.aspx/](https://www.paraesthesia.com/archive/2008/02/13/what-to-do-if-copy-local-works-in-vs-but.aspx/)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-06-07T08:34:36.203

**代码中不需要假人**
：

> 添加对可执行项目的引用

或/并确保可执行项目中的引用已`"Copy Local"`设置为`TRUE`（这是我的“*错误*”）似乎这*“覆盖”*了基础引用库项目中的设置......

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-07-10T14:48:47.243

VS2019 V16.6.3

对我来说，问题是不知何故，主 .proj 文件以这样的条目结束，其 DLL 没有被复制到父项目 bin 文件夹中的项目：

```
<ProjectReference Include="Project B.csproj">
  <Project>{blah blah}</Project>
  <Name>Project B</Name>
  <Private>True</Private>
</ProjectReference> 
```

我手动删除了该行`<Private>True</Private>`，然后将 DLL 复制到主项目的每个构建的主项目 bin 文件夹中。

如果您转到主项目的引用文件夹中的问题项目的引用，单击它并查看属性，有一个“复制本地”设置。私有标签等同于此设置，但出于某种原因，更改本地副本对 .proj 文件中的私有标签没有影响。

令人讨厌的是，我没有更改参考的副本本地值，不知道它是如何设置的，又浪费了一天时间来追踪 VS 的一个愚蠢问题。

感谢所有其他帮助我了解原因的答案。

高温高压

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-05-04T13:20:16.320

除了上面常见的之外，我还有一个多项目解决方案要发布。显然有些文件针对不同的框架。

所以我的解决方案：属性>特定版本（假）

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-10-13T07:50:14.033

将 DLL 作为现有项目添加到其中一个项目中，并且应该对其进行排序

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-04-20T06:29:37.260

您可以将主项目和 ProjectX 的构建输出路径设置为同一个文件夹，然后您可以在该文件夹中获取您需要的所有 dll。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-10-05T08:36:31.477

我有一个类似的问题，其中我作为内容包含在项目中的 DLL 和“始终复制”设置没有被复制到 bin 文件夹中。我通过在 app.config 中添加对 DLL 的dependentAssembly 引用解决了这个问题。

# ruby-on-rails - 从管理 Web 界面创建 Rails 迁移文件

> ID：15816770
> 
> 赞同：0
> 
> 时间：2013-04-04T16:32:13.013
> 
> 标签：ruby-on-rails, ruby, database-design, activerecord, rails-migrations

我正在寻找从 Web 界面管理 Rails 中动态模型的最佳方法；例如，假设我有一个产品模型，并且我希望能够从管理 Web 界面添加具有相关数据类型的新字段/列（例如，字符串类型的新字段“描述”）。我有两种可能的方法：

1.  从 Web 界面创建迁移文件：

    `rails generate migration table field:type`

    `rake db:migrate`

2.  在数据库本身中实现模型的定义。

最后一个解决方案似乎是重新发明轮子，维护起来更麻烦，但我想不出更好的解决方案，你会推荐什么？

我遇到了[这个](https://stackoverflow.com/questions/1582680/user-specified-dynamic-model-fields-in-rails)解决方案，尽管我担心事情过于简单和标准。

任何建议都会很棒，谢谢！！

# performance - 我们可以提高 COUNT、DISTINCT 和 LIKE 查询的性能吗？

> ID：15816771
> 
> 赞同：0
> 
> 时间：2013-04-04T16:32:16.730
> 
> 标签：performance, postgresql, count, distinct, sql-like

据我了解，当我们使用`COUNT`,`DISTINCT`或`LIKE %query%`（两边的通配符）关键字运行 SQL 查询时，无法使用索引，数据库必须进行全表扫描。

有什么方法可以提高这些查询的性能吗？

他们真的不能使用索引还是我们可以以某种方式解决这个问题？

如果我们只需要返回一列，我们可以进行仅索引扫描吗？例如：`select count(id) from MY_TABLE`: 可能在这种情况下，如果我们在“id”上有索引，我们可以进行仅索引扫描并避免命中整个表？

我的问题具有一般意义：如果我们必须使用上述运算符，您能给我一些性能指南吗？

更新至于我，我使用 PostgreSQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T00:55:13.547

使用 PostgreSQL，您可以为文本字符串创建 GIN pg_trgm 索引以使 LIKE '%foo%' 更快，但这需要插件和 PostgreSQL 9.1 或更高版本。

我怀疑 distinct 本身是否会使用索引。事实上，我尝试过，但无法使用它。您可以通过使用递归 CTE 将单个记录拉出（可以称为“稀疏扫描”）来强制使用索引。当从会计记录中提取个别年份时，我们会这样做。不过，这需要编写特殊查询，因此并不是一般情况。

由于 mvcc 规则，count(*) 永远无法使用索引。但是，您可以通过查看相应的系统目录来获得近似结果。

# ruby-on-rails - ActiveRecord 如何找出 NULL 字段

> ID：15816774
> 
> 赞同：1
> 
> 时间：2013-04-04T16:32:38.733
> 
> 标签：ruby-on-rails, activerecord, rails-activerecord

我如何过滤 NULL 字段

```
no_repeat = Events.where(:repeat => NULL) 
```

NULL 字不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:36:33.120

你可以这样做：

```
no_repeat = Events.where("repeat IS NULL")

no_repeat = Events.where("repeat = ?", nil)

no_repeat = Events.where(:repeat => nil)
no_repeat = Events.where(repeat: nil) 
```

# php - php将图像文件移动/复制到linux中的新目录/文件夹结构

> ID：15816780
> 
> 赞同：1
> 
> 时间：2013-04-04T16:33:00.793
> 
> 标签：php, file, filesystems

我有一个 php/mysql 网站，用户可以在其中创建列表并上传多个图像（每个图像大小为 3 个）。我犯了将图像存储在以下文件夹中的错误：

```
images/listings/listing_id/image-name.jpg
images/listings/listing_id/thumbs/image-name.jpg
images/listings/listing_id/large/image-name.jpg 
```

不幸的是，现在我遇到了子目录的最大数量为 30,000 并且我的代码中断的问题。

我现在想将我的文件夹结构更改为以下结构：

```
images/listings/yyyy/mm/dd/listing_id/image-name.jpg
images/listings/yyyy/mm/dd/listing_id/thumbs/image-name.jpg
images/listings/yyyy/mm/dd/listing_id/large/image-name.jpg 
```

我认为最好的方法是创建一个 php 脚本来循环“images/listings/”文件夹中的所有目录，并将每个图像复制到上面指定的新目录中。或每个'listing_id'文件夹，我需要使用mysql查找listing_id，并获取created_date，然后拆分日期以获得yyyy mm dd。

我完全迷失在创建php脚本中，是否可以重命名现有目录结构而不复制和删除旧图像，或者我需要复制旧图像，创建新目录，移动它们然后删除旧文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:41:11.913

只要您没有任何与 4 位数年份相同的列表 ID，您就应该能够在现有文件夹结构旁边创建新文件夹结构。

您似乎已经有了如何做的计划，您应该尝试实际编写一些代码。

提示：[`rename()`](http://www.php.net/manual/en/function.rename.php)与“移动”相同。除非您希望它花费 10 倍的时间，否则不要进行“复制和删除”。

最后，根据经验，如果可能，您应该尽量避免使用*任何*包含超过 1000 个条目的文件夹。如果有很多文件系统操作必须使用目录索引来处理这么大的文件夹，则可能会*大大*降低文件系统性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:56:43.907

您可以使用

```
$origin = "images/listings";
$final =  "images/final";

$start = strlen($origin) + 1;
$di = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($origin, RecursiveDirectoryIterator::SKIP_DOTS));
foreach ( $di as $file ) {
    if ($file->isFile()) {
        $mtime = $file->getMTime();
        $date = sprintf("%d/%d/%d", date("Y", $mtime), date("m", $mtime), date("d", $mtime));
        $new = sprintf("%s/%s/%s", $final, $date, substr($file, $start));
        $dir = dirname($new);
        is_dir($dir) or mkdir($dir, null, true);
        rename($file, $new);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-02T05:58:15.750

对于图像的移动，可以使用 php 的**rename()**函数。

例如

> `rename("../app/temp/natural.jpeg","../public/public_photo/natural.jpeg");`

上面给定的代码 natural.jpeg 来自文件夹**/aap/temp/**已移动到文件夹**/public/public_photo/**

# r - 访问 R 包中的“示例”子目录

> ID：15816781
> 
> 赞同：1
> 
> 时间：2013-04-04T16:33:05.013
> 
> 标签：r, package, subdirectory, cran

我使用了一个 CRAN 包，其中包含一个子目录“examples/”，其中包含一个文件“ex.txt”。如何访问此文件？

我试过了

```
require("XX")
read.table(paste(.path.package("XX"), "/examples/ex.txt", sep=""), header=TRUE, sep="\t") 
```

但随后找不到该文件。当我查看包的安装目录时，确实没有看到“examples/”子目录。但是，当我在包源上运行 R CMD check 和 R CMD INSTALL 时，我没有收到关于“examples/”子目录的警告。所以软件包安装没有问题，但省略了示例。为了访问“examples/”中的文件，我需要做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:29:31.600

起初我误读了你的问题，并认为你是包作者。问题是，正如您所注意到的，示例在安装时不会被复制。一个解决方案是包作者将文件夹放在 /inst/examples 而不是 /examples 中。由于您无法控制它，我们可以通过下载源代码然后使用它来创建解决方法。

```
# Downloads the source code for a package
# Extracts it to a temporary directory
downloadAndExtract <- function(package, tdir = tempdir()){
    down <- download.packages(package, destdir = tdir)
    targz <- down[,2]
    untar(targz, exdir = tdir)
    file.path(tdir, package)
}

path <- downloadAndExtract("XX")
filepath <- file.path(path, "examples", "ex.txt")
dat <- read.table(filepath, header = TRUE, sep = "\t") 
```

显然这并不理想，但是由于您在已安装的软件包中找不到该文件，因此我们需要采取某种解决方法...

# java - 我需要将一个文件夹中的可绘制对象重定向到另一个文件夹

> ID：15816782
> 
> 赞同：1
> 
> 时间：2013-04-04T16:33:09.783
> 
> 标签：java, android, drawable

我正在向我的启动器主题应用程序添加另一个主题。

这个特定的启动器与我所有其他启动器的图标位于不同的文件夹中。

目前我将它们放在我的 res/drawable-xhdpi 文件夹中

但是这个主题要求它们位于 /assets/theme/icon 文件夹中。

我可以在该文件夹中放置一个 xml 以重定向到我的 drawable-xhdpi 文件夹中的图像吗？

# indexeddb - 持久性寿命

> ID：15816784
> 
> 赞同：31
> 
> 时间：2013-04-04T16:33:16.630
> 
> 标签：indexeddb

我阅读了几篇关于 IndexdDB 的文章，但找不到有关持久数据生命周期的详细信息。我计划在用户完成后将其用于数据操作和上传会话。但如果发生以下情况会发生什么：

*   用户关闭浏览器选项卡
*   用户关闭浏览器
*   用户重新启动系统

此外，我通过基于 cookie 的身份验证来维护用户会话。如果用户注销并重新登录会发生什么？有没有办法在注销之前检索数据？

任何有关处理此问题的文档表示赞赏。我浏览了[规范](http://www.w3.org/TR/IndexedDB/)，但读起来并不好。

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-04T18:43:43.890

就像`localStorage`，所以它是跨会话的，这意味着重新启动浏览器或系统不会影响其中存储的内容。但是，用户可以像清除 cookie 一样清除它。所以它就像持久化 cookie，你从服务器端不信任它，你总是需要检查它的完整性。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-03-28T17:16:18.907

自 v52 和 Firefox 自 v55 以来，Chrome 和 Firefox 都提供了[持久存储。](https://developer.mozilla.org/en-US/docs/Web/API/StorageManager/persist)但是不能依赖其他浏览器的支持。您必须测试持久存储是否可用并做出相应反应。

```
if (navigator.storage && navigator.storage.persist) {
  navigator.storage.persist().then(persistent => {
    if (persistent) {
      console.log("Storage will not be cleared except by explicit user action");
    } else {
      console.warn("Storage may be cleared by the UA under storage pressure.");
    }
  });
} 
```

Chrome 需要获得许可才能使用此功能。`navigator.storage.persist()`如果满足以下任一条件，调用时将自动授予：

*   该网站已添加书签（并且用户拥有 5 个或更少的书签）
*   该网站具有很高的网站参与度
*   该网站已添加到移动设备的主屏幕
*   该站点已启用推送通知

此列表来自[概述 Chrome 实现的文章](https://developers.google.com/web/updates/2016/06/persistent-storage)，该文章会定期更新有关此主题的新信息。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-05T02:44:59.987

IndexedDB 数据属于[临时类型](https://developers.google.com/chrome/whitepapers/storage)。所以这些数据可以随时被清除。

这些数据大小/生命周期由非常新的[配额管理 API 管理](http://www.w3.org/TR/quota-api/)。

将来，IndexedDB 可能会使用持久性类型（不太可能也不是好主意）。

# c# - 为什么迭代 IQueryable 会为结果中的每个项目提供第一个值？

> ID：15816785
> 
> 赞同：8
> 
> 时间：2013-04-04T16:33:18.047
> 
> 标签：c#, .net, linq-to-sql

我有一段代码试图从数据库中查询一些简单的配置参数。但是，使用下面的代码，只要我枚举结果，我就会得到结果中每个项目的第一个值：

```
var db = new ConfigurationServiceDataContext("Server=vsdcs022.aridev.lcl;Database=ConfigurationService;Trusted_Connection=True;");

var parameters =
    from configContents in db.ConfigurationContents
    where
        configContents.ConfigurationContextsTable.ConfigurationContextName == contextName &&
        configContents.ConfigurationSectionTable.ConfigurationSectionName == sectionName
    select configContents;

// print stuff for debugging purposes:
foreach (var parameter in parameters)
{
    Console.WriteLine("key = '{0}', value = '{1}'", parameter.ConfigurationKey, parameter.ConfigurationValue);
}

return parameters.ToDictionary(parameter => parameter.ConfigurationKey, parameter => parameter.ConfigurationValue); 
```

如果我打印结果（在尝试将它们添加到新字典之前），我会得到如下信息：

```
key = 'key1', value = 'value1'
key = 'key1', value = 'value1'
key = 'key1', value = 'value1' 
```

但是如果我用匿名类型替换**选择行，它就可以正常工作：**

```
 select new { configContents.ConfigurationKey, configContents.ConfigurationValue }; 
```

使用这种匿名类型，我得到以下结果：

```
key = 'key1', value = 'value1'
key = 'key2', value = 'value2'
key = 'key3', value = 'value3' 
```

我已经研究了几个小时但无济于事，虽然我可以用匿名类型称它为好，但这真的让我很困扰。我已经看到很多例子表明我的第一个代码块应该可以正常工作。我确定我在做一些愚蠢的事情，我只是看不到它！

有任何想法吗？

以下是我从 DataContext 实现开始使用的模型的全部细节：

```
using System.Data.Linq;
using Ari.Core.ConfigurationService.LinqEntityClasses;

namespace Ari.Core.ConfigurationService
{
    class ConfigurationServiceDataContext : DataContext
    {
        public Table<ConfigurationContentsTable> ConfigurationContents;
        public Table<ConfigurationContextsTable> ConfigurationContexts;
        public Table<ConfigurationSectionsTable> ConfigurationSections;

        public ConfigurationServiceDataContext(string connectionString) : base(connectionString) {}
    }
} 
```

核心内容表由我的 ConfigurationContentsTable 实体类表示：

```
using System.Data.Linq;
using System.Data.Linq.Mapping;

namespace Ari.Core.ConfigurationService.LinqEntityClasses
{
    [Table(Name = "ConfigurationContents")]
    class ConfigurationContentsTable
    {
        private long _configurationContextId;
        private string _configurationKey;
        private string _configurationValue;
        private EntityRef<ConfigurationContextsTable> _configurationContextsTable;
        private EntityRef<ConfigurationSectionsTable> _configurationSectionsTable;

        public ConfigurationContentsTable()
        {
            _configurationContextsTable = new EntityRef<ConfigurationContextsTable>();
            _configurationSectionsTable = new EntityRef<ConfigurationSectionsTable>();
        }

        [Column(Storage = "_configurationContextId", DbType = "BigInt NOT NULL IDENTITY", IsPrimaryKey = true,
            IsDbGenerated = true)]
        public long ConfigurationContextId
        {
            get { return _configurationContextId; }
        }

        [Column(Storage = "_configurationKey")]
        public string ConfigurationKey
        {
            get { return _configurationKey; }
            set { _configurationKey = value; }
        }

        [Column(Storage = "_configurationValue")]
        public string ConfigurationValue
        {
            get { return _configurationValue; }
            set { _configurationValue = value; }
        }

        [Association(Storage = "_configurationContextsTable", OtherKey = "ConfigurationContextId")]
        public ConfigurationContextsTable ConfigurationContextsTable
        {
            get { return _configurationContextsTable.Entity; }
            set { _configurationContextsTable.Entity = value; }
        }

        [Association(Storage = "_configurationSectionsTable", OtherKey = "ConfigurationSectionId")]
        public ConfigurationSectionsTable ConfigurationSectionTable
        {
            get { return _configurationSectionsTable.Entity; }
            set { _configurationSectionsTable.Entity = value; }
        }
    }
} 
```

这两个关联的表非常简单，仅出于规范化目的而存在。它们表示如下：

```
using System.Data.Linq;
using System.Data.Linq.Mapping;

namespace Ari.Core.ConfigurationService.LinqEntityClasses
{
    [Table(Name = "ConfigurationContexts")]
    class ConfigurationContextsTable
    {
        private long _configurationContextId;
        private string _configurationContextName;
        private EntityRef<ConfigurationContentsTable> _configurationContentsTable;

        public ConfigurationContextsTable()
        {
            _configurationContentsTable = new EntityRef<ConfigurationContentsTable>();
        }

        [Column(Storage = "_configurationContextId", DbType = "BigInt NOT NULL IDENTITY", IsPrimaryKey = true,
            IsDbGenerated = true)]
        public long ConfigurationContextId
        {
            get { return _configurationContextId; }
        }

        [Column(Storage = "_configurationContextName")]
        public string ConfigurationContextName
        {
            get { return _configurationContextName; }
            set { _configurationContextName = value; }
        }

        [Association(Storage = "_configurationContentsTable", ThisKey = "ConfigurationContextId")]
        public ConfigurationContentsTable ConfigurationContentsTable
        {
            get { return _configurationContentsTable.Entity; }
            set { _configurationContentsTable.Entity = value; }
        }
    }
} 
```

最后：

```
using System.Data.Linq;
using System.Data.Linq.Mapping;

namespace Ari.Core.ConfigurationService.LinqEntityClasses
{
    [Table(Name = "ConfigurationSections")]
    class ConfigurationSectionsTable
    {
        private long _configurationSectionId;
        private string _configurationSectionName;
        private EntityRef<ConfigurationContentsTable> _configurationContentsTable;

        public ConfigurationSectionsTable()
        {
            _configurationContentsTable = new EntityRef<ConfigurationContentsTable>();
        }

        [Column(Storage = "_configurationSectionId", DbType = "BigInt NOT NULL IDENTITY", IsPrimaryKey = true,
            IsDbGenerated = true)]
        public long ConfigurationSectionId
        {
            get { return _configurationSectionId; }
        }

        [Column(Storage = "_configurationSectionName")]
        public string ConfigurationSectionName
        {
            get { return _configurationSectionName; }
            set { _configurationSectionName = value; }
        }

        [Association(Storage = "_configurationContentsTable", ThisKey = "ConfigurationSectionId")]
        public ConfigurationContentsTable ConfigurationContentsTable
        {
            get { return _configurationContentsTable.Entity; }
            set { _configurationContentsTable.Entity = value; }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:07:01.053

因此，在对我的代码进行更多挖掘和审查之后，我发现了两个问题，当它们被纠正时，会产生预期的结果。

首先，在我的 ConfigurationContentsTable 实体类中，我的 PK 字段被配置为查看`ConfigurationContextId`而不是`ConfigurationContentId`字段。当我解决这个问题时，当我预期三个结果时，我开始只得到一个结果。这使我查看了表关联/连接逻辑（请参阅下面的第二项）。更正了 ConfigurationContentsTable 中的代码片段：

```
[Column(Storage = "_configurationContentId", DbType = "BigInt NOT NULL IDENTITY", IsPrimaryKey = true, IsDbGenerated = true)]
public long ConfigurationContentId
{
    get { return _configurationContentId; }
} 
```

其次，对于所有具有属性的 EntityRef<>`[Association(Storage = ...]`属性，我将`ThisKey`和`OtherKey`属性颠倒了。一旦我将 ConfigurationContentsTable 更改为 use`ThisKey`并将 ConfigurationContextsTable 和 ConfigurationSectionsTable 更改为 use `OtherKey`，我开始看到预期的三个不同的结果。

更正了 ConfigurationContentsTable 的代码：

```
[Association(Storage = "_configurationContextsTable", ThisKey = "ConfigurationContextId")]
public ConfigurationContextsTable ConfigurationContextsTable
{
    get { return _configurationContextsTable.Entity; }
    set { _configurationContextsTable.Entity = value; }
}

[Association(Storage = "_configurationSectionsTable", ThisKey = "ConfigurationSectionId")]
public ConfigurationSectionsTable ConfigurationSectionsTable
{
    get { return _configurationSectionsTable.Entity; }
    set { _configurationSectionsTable.Entity = value; }
} 
```

更正了 ConfigurationContextsTable 的代码：

```
[Association(Storage = "_configurationContentsTable", OtherKey = "ConfigurationContextId")]
public ConfigurationContentsTable ConfigurationContentsTable
{
    get { return _configurationContentsTable.Entity; }
    set { _configurationContentsTable.Entity = value; }
} 
```

最后，更正了 ConfigurationSectionsTable 的代码：

```
[Association(Storage = "_configurationContentsTable", OtherKey = "ConfigurationSectionId")]
public ConfigurationContentsTable ConfigurationContentsTable
{
    get { return _configurationContentsTable.Entity; }
    set { _configurationContentsTable.Entity = value; }
} 
```

# android - Cocos2dx (version : cocos2d-2.1rc0-x-2.1.2) 没有制作libcocos2d.so、libbox2d.so、libcocosdenshion

> ID：15816787
> 
> 赞同：0
> 
> 时间：2013-04-04T16:33:24.263
> 
> 标签：android, windows, visual-studio-2010, cocos2d-x

我在 Windows 7、Visual Studio Ultimate 2010 上制作了一个示例项目，背景和声音循环播放。它在 VS 2010 中构建、编译和运行良好。

但是当我尝试为 Android 编译它时，它编译得很好，没有错误。但是当我在 Eclipse Juno 工作区中导入它时，我在 libs->armeabi 文件夹中只看到了 libgame.so。

与之前的版本不同，没有制作libcocos2d.so、libbox2d.so、libcocosdenshion.so。

> 静态 { System.loadLibrary("游戏"); }

应用程序运行良好，但我**听不到**Windows 版本中的声音？我想我需要添加 cocosdenshion 库，但它没有被制作。

我确实在 obj->local->armeabi 文件夹中看到了 libcocos2d.a、libbox2d.a、libcocosdenshion.a。有人可以告诉我如何解决这个问题，以便我能听到声音吗？

PS我认为这是共享库和静态库的问题。在以前的 cocos2dx 版本中，这些库是共享的，现在它们是静态的。

任何帮助，将不胜感激 。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:21:08.220

我通过重新编译解决了这个问题。

在新版本中我们不需要添加任何库 libcocos2d.so、libbox2d.so、libcocosdenshion.so

静态 { System.loadLibrary("游戏"); } 工作正常。

# javascript - for循环外的异步变量

> ID：15816789
> 
> 赞同：0
> 
> 时间：2013-04-04T16:33:33.583
> 
> 标签：javascript, ajax, variables, asynchronous, for-loop

我刚开始使用 AJAX，我试图在 for 循环中设置一个变量。然后我想稍后调用该变量并使用它的值。

当然这将是同步的，需要脚本停止执行以便在返回函数的新值之前运行循环。

我希望有人知道在 for 循环运行后从 for 循环中获取值的更好方法，然后直接在我的代码中使用它。

我宁愿不使用`setTimeout()`hack 来绕过这个问题（毕竟这是一个 hack）。

```
var getCount = function getCount(res) {
    count = { active: 0, closed: 0 }; //Variable defined here

    for(i=0; i<=res.length; i++) {
        if(res[i].status == 'active') {
            count.active ++;
        } else { count.closed ++; }
    }
    return count; //And returned here
};

getCount(result);

console.log(count); //Here's where I need the result of the for loop

//Currently this outputs the count object with both properties set to 0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:42:09.813

我不确定 AJAX 与您的问题有什么关系。

您没有将 getCount 函数的结果分配给 count 变量（除非您打算将 count 变量设置为全局变量，但在这种情况下，您需要在 getCount 函数定义之前定义它）。

更改此行：

```
getCount(result); 
```

对此：

```
var count = getCount(result); 
```

你应该没事的。:)

我还建议，在声明变量时，总是用 var 声明它们。在你的情况下：

```
var count = { active: 0, closed: 0}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:42:47.070

我不知道你为什么提到 AJAX，因为你的代码没有任何异步。从我在你的样本中看到的，我看不出所有的困难是什么。

只需将其用作任何其他功能。

```
function getCount(res) {
    var count = { active: 0, closed: 0 }; //Variable defined here

    for(i=0; i<=res.length; i++) {
        if(res[i].status == 'active') {
            count.active ++;
        } else { count.closed ++; }
    }
    return count; //And returned here
};

console.log(getCount(result)); //Here's where I need the result of the for loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T16:57:23.893

首先，你有一个额外的`=`标志，过度扩展了你的`for`循环。我不知道这是否能解决您的异步问题，但我会这样做：

```
// sample object
var result = [
  {status:"active"},
  {status:"not-active"},
  {status:"active"} 
];

// kick off the function to get the count object back
var counts = getCount(result);

console.log(counts);

function getCount(res) {
    var count = { active: 0, closed: 0 }; //Variable defined here, make sure you have var to keep it from going global scope

    for(i=0; i<res.length; i++) { //here you had a wrong "="
        if(res[i].status === 'active') {
            count.active ++;
        } else { count.closed ++; }
    }
    return count; //And returned here
} 
```

[这里](http://jsbin.com/ocajon/1/edit)的例子。

# php - php 更易读的 if 语句

> ID：15816793
> 
> 赞同：3
> 
> 时间：2013-04-04T16:33:43.220
> 
> 标签：php, if-statement

我只是想知道是否有更好的方法来解决我的情况：

我有 6 个独立变量要检查。但是，如果任何条件为真，则不应检查其他条件。通常我会写：

```
 if (cond1 ) { 
          statement 
    } else {
       if ( cond2 ) {
          statement      
       } else {
         if (cond3) {
             statement
         } else {
         ...    
         }
       }
    } 
```

你肯定会承认它看起来不太好，或者虽然它有效，但它不容易阅读。您是否知道编写此类 if 语句的任何其他方法，可能使用其他符号或函数（switch？while？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T16:35:08.527

是的，你可以

```
if (cond1 ) { 
    statement 
} elseif ( cond2 ) {
    statement
} elseif ( cond3 ) {
    statement
} 
```

查看[文档](http://php.net/manual/en/control-structures.elseif.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:44:11.120

[更时尚的方式：](http://php.net/manual/en/control-structures.elseif.php)

```
if(cond1):
    statement1
elseif(cond2):
    statement2
elseif(cond3):
    statement3
elseif(cond4):
    statement4
elseif(cond5):
    statement5
elseif(cond6):
    statement6
endif; 
```

* * *

这是你如何做到这一点`switch()`：

```
$a = 10;
$b = 100;

switch(true){
    case ($a > $b):
        echo 'a is bigger than b';break;
    case ($b > $a):
        echo 'b is bigger than a';break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T16:36:06.087

```
 if (cond1 ) { 
          statement 
    } else {
       if ( cond2 ) {
          statement      
       } else {
         if (cond3) {
             statement
         } else {
         ...    
         }
       }
    } 
```

改成：

```
if (Cond1){

}elseif (cond2){

}elseif (cond3){

} 
```

# c++ - 在 Makefile.am 的 _SOURCE 中分配 c 和 cpp 文件

> ID：15816794
> 
> 赞同：0
> 
> 时间：2013-04-04T16:33:48.940
> 
> 标签：c++, c, makefile, autotools

我的项目包含 c++ 文件和 c 文件，我想用 autotools 构建我的项目。

所以我创建了`Makefile.am`. 我想知道是否可以将`cpp`文件和`c`文件一起放入`_SOURCE`变量中

```
myprogram_SOURCES = \
  file1.c   \
  file2.c   \
  file3.cpp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T19:07:00.253

是的，您可以将 C 和 C++ 文件添加到`_SOURCES`.

# bash - Bash Grep 精确搜索

> ID：15816796
> 
> 赞同：1
> 
> 时间：2013-04-04T16:34:00.987
> 
> 标签：bash, search, grep

我试图在文件中找到一个确切的单词。这个词是 myServer ，我试图在其中找到它的文件内容是：

```
This is myServer and it is cool
This is myServer-test and it is cool 
```

这是我各种尝试的结果：

```
grep '^myServer$' test-file.txt
grep -Fx myServer test-file.txt

--> no results

grep -w myServer test-file.txt
grep -w myServer test-file.txt
grep '\<myServer\>' test-file.txt
grep '\bmyServer\b' test-file.txt
-->
This is myServer and it is cool
This is myServer-test and it is cool 
```

我在这里错过了一些开关吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:36:08.170

尝试 grep 与单词边界：

```
 grep '\<myServer\>' test-file.txt 
```

**编辑：**看起来您不想将连字符视为单词边界。为此目的使用这样的grep：

```
grep -E '\<myServer\>([^-]|$)'  test-file.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:36:46.783

您可以使用`\<`and`\>`来识别单词的开头和结尾。因此，例如给`\<myS`grep 将搜索以 . 开头的单词的行`myS`。

自然地，要搜索一个确切的词，你会这样搜索：

```
grep '\<myServer\>' test-file.txt 
```

* * *

在您的大多数尝试中，您都在做完全不相关的事情：

*   `^`并匹配*行*`$`的开头和结尾。
**   `-F`搜索多个固定字符串*   `-x`搜索匹配正则表达式的整行*

 *注意：你`-w`会正常工作。但是，您对“整个单词”的定义似乎与 POSIX 的想法不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T16:37:14.800

您可以使用`\b`which 表示单词边界：

```
rep '\bmyServer\b' test-file.txt 
```*

# android - 如何将字符串数组从一个 .java 传递到另一个 .java（从活动到 BaseAdapter）

> ID：15816797
> 
> 赞同：-3
> 
> 时间：2013-04-04T16:34:02.330
> 
> 标签：android, arrays

我整天都在阅读这个论坛，找不到解决我的问题的方法。我有**MyWorkActivity.java**和公共类 MyWorkActivity。里面是public void popuniListView()。我想用数据库中的项目填充字符串数组。

它看起来像这样：

```
public class MyWorkActivity extends Activity implements OnClickListener {
    .
    .
    .

 public void popuniListView ()
 {
        final String[] listaTipovaRada = new String[90]; 
```

我也有看起来像这样的**ListViewCustomAdapter.java ：**

```
public class ListViewCustomAdapter extends BaseAdapter 
{
  .
  .
  .
public View getView(int position, View convertView, ViewGroup parent) 
 {
  //Read values from array listaTipovaRada 
```

我需要从字符串数组 listaTipovaRada 中读取值。

我发现了一些将数组从一个 ACTIVITY 发送到另一个 ACTIVITY 的示例，但没有一个是关于将数组从 ACTIVITY 发送到 BASEADAPTER。

如何将字符串数组从一个.java 中的活动传递到第二个.java 中的baseadapter？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:44:17.030

简单来说，您还可以在 popuniListView() 方法之外定义您的字符串，使其成为静态访问。如果您在构造函数或 onCreate() 方法中对其进行初始化，您甚至可以将其保留为最终变量。除了将元素传递到已经提到的适配器之外。这取决于您项目的架构。

```
public class MyWorkActivity extends Activity implements OnClickListener 
{
    final static String[] listaTipovaRada;
    .
    .
 protected onCreate()
 {
    ...
    listaTipovaRada = new String{ ... , ... , ...
 }

 public void popuniListView ()
 {
        ... 
```

然后就可以通过类静态访问普通Java访问中的String了。如果这确实适合您的需求。

```
public class ListViewCustomAdapter extends BaseAdapter 
{
      .
      .
      .
    public View getView(int position, View convertView, ViewGroup parent) 
     {
       MyWorkActivity.listaTipovaRada[index] ... 
```

# java - 如何仅替换标记，没有子字符串？

> ID：15816800
> 
> 赞同：1
> 
> 时间：2013-04-04T16:34:27.307
> 
> 标签：java, regex, replace

我正在寻找一种仅替换完整标记而不是标记子串的方法，例如：

```
String test = "a | ab & c | a"; 
```

现在我想用其他任何东西替换“a”，但这应该只替换“a”，而不是“ab”。

```
test.replace("a", "1"); //would result: "1 | 1b & c | 1" 
```

我怎样才能只替换“完整的单词”？

顺便说一下，特殊字符“|”之间的标记替换 或“&”来自：

```
\\s*[|&][|&\\s]* 
```

这是我将它们分开的正则表达式。也许我可以再次使用这个正则表达式来替换？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T16:38:38.057

您可以使用带有单词边界 ( `\b`) 的正则表达式，它只会替换 "isolated" `a`s：

```
test.replaceAll("\\ba\\b", "1"); 
```

例子：

```
String test = "a | ab & c | a";
System.out.println(test.replaceAll("\\ba\\b", "1")); 
```

打印`1 | ab & c | 1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:37:03.067

怎么样`test.replaceFirst("a", "1");` ？

# c# - 对话框重新加载部分 - JQuery 不起作用（MVC 3）

> ID：15816803
> 
> 赞同：1
> 
> 时间：2013-04-04T16:34:33.007
> 
> 标签：c#, asp.net-mvc, json, asp.net-mvc-3, jquery

当我打开对话框时，一切正常，但是当我关闭对话框并尝试再次打开它时，我遇到了 JQuery 问题（动画、隐藏等）。可能**部分视图**一直都在工作，而当再次显示对话框时却没有意味着**局部视图**也是新的。如何解决？

这不起作用

```
<script type="text/javascript">
    $('#bladReje').hide();
    $('#bladRejeText').hide();
    $('#poprawnieReje').hide();
    $('#poprawnieRejeText').hide();
</script> 
```

部分的

```
 data.View 
```

AJAX

```
$.ajax({
            url: '@Url.Action("Reje", "Log")',
            dataType: "json",
            type: "POST",
            async: false,
            error: function () {
            },
            success: function (data) {
                if (data.Success) {

                    var el1 = $('<div><strong style="color: black">' + data.View + '</strong></div>');
                    $(el1).dialog(
                        {
                            modal: true,
                            title: '<div></div>',
                            minWidth: 340,
                            minHeight: 300,
                            buttons: {
                                'close': function () {
                                    $(this).dialog("destroy");
                                }
                            }
                        });
                }

            }
            });    
    }); 
```

这是我的**部分视图的示例**

```
<div id="bladReje" style="padding: 0px; width: 100%; margin: 0 auto; padding: 0 auto; text-align: left; 
font-family: arial; visibility:hidden;">
    <div id="bladRejeText" style="font-size: 16px; visibility:hidden;">
    </div>
</div>
@Html.TextBoxFor(m => m.Example, new { style = "width:220px" })
<input type="button" class="button" value="Zapisz" onclick="SaveRejestracja();" style="float: right; margin-right: 30px;"/>

<script type="text/javascript">
    $('#bladReje').hide();
    $('#bladRejeText').hide();
</script>

<script type="text/javascript">

    function SaveRejestracja() {
        var Example = $('#Example').val();

        $.ajax({
            url: '@Url.Action("Example", "ControllerExample")',
            dataType: "json",
            data: {
                Nick: Example
            },
            type: "POST",
            traditional: true,
            async: false,
            error: function () {
            },
            success: function (data) {
                if (data.Success) {
                    $('#bladReje').hide();
                    $('#bladReje').css({ visibility: "hidden" });
                    $('#bladRejeText').hide();
                    $('#bladRejeText').css({ visibility: "hidden" });
                }
                if (!data.Success) {
                    $('#bladReje').hide();
                    $('#bladReje').css({ visibility: "visible" });
                    $('#bladRejeText').hide();
                    $('#bladRejeText').css({ visibility: "visible" });
                }
            }
        });
    }

</script> 
```

这项工作只是第一次

```
<script type="text/javascript">
    $('#bladReje').hide();
    $('#bladRejeText').hide();
</script> 
```

# unit-testing - 在多模块项目中，maven 模块可以访问它所依赖的另一个模块的传递测试范围依赖项吗？

> ID：15816805
> 
> 赞同：10
> 
> 时间：2013-04-04T16:34:37.393
> 
> 标签：unit-testing, maven, dependencies, multi-module

我有一个多模块 Maven+Spring 项目。一些模块依赖于其他模块。

假设我们有一个名为的模块`services`，它依赖于名为的模块`persistence`。

服务模块：

*   在 Spring 级别，导入`persistence`上下文
*   在 Maven 级别，取决于`persistence`模块

该`persistence`模块定义了一些与......持久性相关的配置：数据源，JPA，事务......

它有一些用于测试数据库（JDBC 驱动程序、DBCP、H2）的依赖项，这些依赖项仅限于测试范围，因为当应用程序部署时，DataSource 将在容器（Tomcat）中定义并通过 JNDI 访问。

现在，我想在模块的 Maven 测试阶段访问`services`模块的测试范围（传递）依赖项`persistence`。

[Maven 手册（表 3.1）](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-project-dependencies.html)说，通常情况下，测试范围的依赖关系是不可传递的。

是否有可能在多模块项目的上下文中以某种方式获得它们？

如果不是什么是好的选择？（在父 pom 中定义测试依赖项？...）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-16T12:28:41.213

我确切地找到了它应该如何工作，即通过在另一个用作依赖项的模块中**生成一个测试 JAR ，这是一种工件，在我们的示例中是持久性模块：**

```
<build>
    <plugins>

            <!-- Generate test jar too -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <version>2.4</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>test-jar</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>

    </plugins>
</build> 
```

然后通过将此测试 jar 声明为另一个模块的测试范围依赖项，在我们的示例中为`services`模块：

```
<!-- Services module -->
<dependency>
    <groupId>${project.groupId}</groupId>
    <artifactId>services</artifactId>
    <version>${project.version}</version>
</dependency>
<dependency>
    <groupId>${project.groupId}</groupId>
    <artifactId>services</artifactId>
    <version>${project.version}</version>
    <type>test-jar</type>
    <scope>test</scope>
</dependency> 
```

请注意第二个依赖项与第一个依赖项相同，除了`type`设置为`test-jar`和`scope`设置为测试。

现在，您可以想象**在模块中编写的测试`service`可以访问模块的测试类`persistence`（**这**可行**），还可以访问持久性模块的测试范围依赖项。

但是，这是一个已知问题 ( [https://issues.apache.org/jira/browse/MNG-1378](https://issues.apache.org/jira/browse/MNG-1378) )，它不能以这种方式工作。它自 2005 年以来一直开放，所以我认为它不会在不久的将来修复……但谁知道呢。

我只需要复制两个模块上的测试范围依赖项，或者只是在父 pom 中定义它们...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T19:07:13.627

是*应该*的，但不是。它也发生在提供的范围内。此处记录的问题：[https ://issues.apache.org/jira/browse/MNG-5255](https://issues.apache.org/jira/browse/MNG-5255)

# ruby-on-rails - 在 Rails 上使用 Ajax 进行搜索

> ID：15816806
> 
> 赞同：0
> 
> 时间：2013-04-04T16:34:43.867
> 
> 标签：ruby-on-rails, ajax

`User.find(n)`使用字段（其中 n 是输入）和按钮获取数据库（在 rails 中）中的第 n 个用户并使用 Ajax 将其显示在页面上的最简单方法是什么？

```
<input id="search_input" type="text">
<button id="search_button">Search</button>
<div id="output> Output displayed here </div> 
```

我阅读了[W3Schools 上的 Ajax 教程，](http://www.w3schools.com/ajax/)其中创建了 XMLHttpRequest 对象，但这对于做如此简单的事情来说似乎太冗长了。rails有没有更简单的方法？

这是按下按钮时我必须调用的 Javascript 函数

```
function find_nth_user() {
var xmlhttp;
if (window.XMLHttpRequest)
  xmlhttp=new XMLHttpRequest();
  }
else
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("output").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","ajax_info.rb",true);
xmlhttp.send();
} 
```

然后在文件 ajax_info.rb （必须正确路由）中有 rails 代码。

我尝试在 Rails 上搜索 Ajax，但我发现的只是与 forms_for 相关的东西，我认为这些东西在这里不适用。我需要在按下按钮时执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:10:07.847

您不应该像这样处理准系统对象。jQuery/Prototype/Zepto 存在，所以你不必做这些事情。

观看有关使用 AJAX 搜索的 railscast：[http ://railscasts.com/episodes/240-search-sort-paginate-with-ajax](http://railscasts.com/episodes/240-search-sort-paginate-with-ajax)

# c++ - 将对象指针传递给函数

> ID：15816811
> 
> 赞同：0
> 
> 时间：2013-04-04T16:34:49.337
> 
> 标签：c++, list, pointers

我正在尝试将对象 obj 中包含的值传递给函数`addnode`，但我得到一个代码块错误，它无法`obj`从转换`mos*`为`mos`. 怎么可以重写来传递一个指向函数`addnode` 的指针代码如下所示。

```
#include <iostream>
#include <sstream>

using namespace std;

struct mos
{
    int x;
    float y;
    mos * next;
};

void addnode (mos);

int main()
{
    mos * obj = new (nothrow) mos;
    //Check for proper memory allocation.
    if (obj == NULL)
    {
        cout << "\nProblem assigning memory.\n";
    }
    else
    {
        cout << "\n Memory well allocated.\n Result is: " << obj;
    }

    addnode(obj);
    return 0;
}

void addnode (mos * head)
{
    //code that adds a node to the last node in the linked list.
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:35:57.947

您的函数声明和定义不匹配。如果要传递 a `mos*`，请将声明更改为：

```
void addnode(mos*); 
```

在编译器看到您的调用时`addnode`，它只看到了一个采用 a`mos`而不是 a的声明`mos*`。

# javascript - 使用 javascript 正则表达式删除所有脚本

> ID：15816815
> 
> 赞同：3
> 
> 时间：2013-04-04T16:34:53.723
> 
> 标签：javascript, regex

我正在尝试使用 javascript 中的正则表达式从以下类型的字符串中删除所有带有内容的脚本标签。但我仍然得到输出：

```
");</script> 
```

当它应该是一个空字符串时。

代码是：

```
var BG = '<script type="text/javascript">document.write("<script type=\"text\/javascript\" src=\"http:\/\/site;js=y;target=_blank;time="+ (window.emediate_time ? window.emediate_time : window.emediate_time = new Date().getTime()) +"1053997930;"><\/script>");</script><script type="text/javascript" src="some?cre=mu;js=y;target=_blank"></script>';

BG = BG.replace(/<\s*script.*?>.*?(<\s*\/script.*?>|$)/ig,''); 
```

你能告诉我什么是错的以及如何解决它。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T16:38:56.210

试试这个：

```
(/<.*?script.*?>.*?<\/.*?script.*?>/igm, '') 
```

或者

```
(/<script.*?>.*?<\/script>/igm, '') 
```

（你需要'm'开关来搜索多行）

# jasper-reports - Jasper 报告 - 打印特定页面

> ID：15816821
> 
> 赞同：0
> 
> 时间：2013-04-04T16:35:24.480
> 
> 标签：jasper-reports

我创建了一个有很多客户的主报告，每个客户可能有不同的页数。我只想将具有特定页数的客户导出为 PDF。

我能够在页脚中创建一个变量，该变量将给出每个客户拥有的页数，但我无法在给出“页码”的情况下导出为 PDF

这可能吗？请高手帮忙。

谢谢，杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:57:44.593

在 Jasper 中有一个名为**Print When Expression**的属性，我认为它会对您有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T07:28:35.383

它对我有用。添加 PrintWhenExpression 作为编译报告时要给出的布尔参数。

```
'<printWhenExpression><![CDATA[new Boolean($P{variable name})]]></printWhenExpression>' 
```

# jquery - 在动态表上显示隐藏行

> ID：15816822
> 
> 赞同：1
> 
> 时间：2013-04-04T16:35:26.390
> 
> 标签：jquery

```
<table> //big table
       <tr >
        <td></td><td></td><td></td><td></td>
       </tr>    

        <tr >
        <th colspan='4'>
                 <div> 
                       <table> //small table
                               <tr>
                                      <td></td> <td></td><td></td><td></td><td></td>
                               </tr>
                       </table>
                 </div>
            </th>   
       </tr>
</table> 
```

大动态表的每个偶数行内部都有一个表，用于解释有关该行之前的数据（奇数行）。我想最初隐藏所有偶数行（里面有一个表的行）。

在每个奇数行的单击事件上，我想隐藏/取消隐藏下一个偶数行（里面有一个表格）

```
this is my ajax calls

    $.get("invoice_ajax.php", 
    {"q": test},
    function(data) 
    {
    $('#balance').html = data; 
```

使用此代码，我试图滑动偶数行。

```
$('#balance').on("click","table",function(event) 
            {
                event.stopPropagation();
                var $target = $(event.target);
                if ( $target.closest("td").attr("colspan") > 1 ) 
                {
                    $target.slideUp();
                } 
                else 
                {
                    $target.closest("tr").next().find("div").slideToggle();
                }                    
            }); 
```

起初 Ajax 调用一切正常，每次点击显示或隐藏下一行，但在第二次调用奇数行的点击事件（显示和隐藏下一行）时，第三次调用（显示，隐藏，显示）在第四次调用（显示，隐藏，显示，隐藏），并且随着每次 ajax 调用而不断增加。

另外我不知道如何最初隐藏偶数行。

编辑：简而言之页面 - [http://pastebin.com/QtTxXnzX](http://pastebin.com/QtTxXnzX)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:48:55.503

> ...但是在第四次调用（显示，隐藏，显示，隐藏）之后第三次调用（显示，隐藏，显示）的奇数行（显示和隐藏下一行）的单击事件上的第二次 ajax 调用，并且它继续增加每次ajax调用。

这是因为您的`$('#balance').on("click", "table", ...)`事件处理程序在`dropBoxChanged`函数内，因此每次下拉框更改时都会调用。 [`.on()`](http://api.jquery.com/on/)用于您使用它的目的，但只需要调用一次。您的`balance`div 在 ajax 调用之间保留在页面上，因此对该元素的每次单击都将由`.on()`事件处理程序处理。

所以要修复它，将`.on()`代码块移到`dropBoxChanged`函数之外，它会正常工作（确保它在`$(document).ready(...)`函数内）。

此外，您必须`.slideUp`显示偶数行，但[表格行不支持动画](https://stackoverflow.com/questions/467336/jquery-how-to-use-slidedown-or-show-function-on-a-table-row)。 [`.toggle()`](http://api.jquery.com/toggle/)应该为您提供所需的东西，而不是`.slideUp`.

> 另外我不知道如何最初隐藏偶数行。

隐藏偶数行的两种方法：

1.  我建议将偶数行服务器端设置为已经设置为隐藏的类`class="hide"`（或不太受欢迎的内联选项`style="display:none"`）

2.  在你的ajax回调函数中使用jQuery，在你设置你的`balance`div内容然后调用类似的东西

```
$('#balance > table tr:nth-child(even)').hide(); 
```

# app-store - 用于查询我的应用程序、编辑我的应用程序和上传新应用程序的 iTunes App Store API

> ID：15816827
> 
> 赞同：3
> 
> 时间：2013-04-04T16:35:42.220
> 
> 标签：app-store

Apple 是否提供 Web 服务 API 来查询我在我的帐户下销售的 iOS 应用程序、编辑这些应用程序和上传新应用程序？如果是这样，有人可以提供链接吗？

我唯一能找到的是应用程序加载器工具，它允许通过文件对 IAP 进行批量创建操作。这个工具是否支持批量创建应用程序？此工具是否支持编辑现有 IAP？

[https://itunesconnect.apple.com/docs/UsingApplicationLoader.pdf](https://itunesconnect.apple.com/docs/UsingApplicationLoader.pdf)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T16:52:08.637

## 更新

[App Store Connect API](https://developer.apple.com/app-store-connect/api/)提供对一组有限的 App Store 连接功能的 API 访问。

* * *

## 旧答案

没有 Web 服务 API 可用于执行仅对您可用的私人操作。您必须登录 iTunes Connect 并在那里进行操作。

有一个用于访问公开信息的网络服务。 [它记录在这里](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)。

例如，有关 Yelp 应用程序的更多信息，您可以发送此请求：

> [https://itunes.apple.com/lookup?id=284910350](https://itunes.apple.com/lookup?id=284910350)

它将像这样返回 JSON：

```
{
  "resultCount": 1,
  "results": [
    {
      "kind": "software",
      "features": [
        "iosUniversal"
      ],
      "supportedDevices": [
        "all"
      ],
      "isGameCenterEnabled": false,
      "screenshotUrls": [
        "http://a1283.phobos.apple.com/us/r1000/084/Purple/v4/d7/10/4e/d7104e7c-69b9-c30e-fb74-dc9ad4907e5d/mzl.qhnhnswp.png",
        "http://a1583.phobos.apple.com/us/r1000/091/Purple/v4/f2/9e/1f/f29e1ff0-15ae-955b-9470-95e777e0d302/mzl.ehinvjli.png",
        "http://a232.phobos.apple.com/us/r1000/080/Purple/v4/fa/be/87/fabe8765-de35-ae10-6eba-4b77dee9579c/mzl.ypncttex.png",
        "http://a1190.phobos.apple.com/us/r1000/114/Purple2/v4/86/68/86/86688674-4540-b317-9e1f-fc2c8adede50/mzl.ekbdqwzg.png",
        "http://a296.phobos.apple.com/us/r1000/115/Purple2/v4/b6/ca/e1/b6cae1d2-5754-d092-c2c3-09dce16a5b86/mzl.xroiibzd.png"
      ],
      "ipadScreenshotUrls": [
        "http://a1855.phobos.apple.com/us/r1000/069/Purple2/v4/27/53/59/27535982-a8ab-752b-1352-14376dbd52fa/mzl.pzkmvqsc.1024x1024-65.jpg",
        "http://a1384.phobos.apple.com/us/r1000/120/Purple/v4/d8/61/72/d86172b0-c012-b520-aaea-0fe405af8220/mzl.ayvdvsyz.1024x1024-65.jpg",
        "http://a1714.phobos.apple.com/us/r1000/107/Purple/v4/d4/e6/54/d4e65417-151e-c358-cf46-67034eb1c809/mzl.cqcnsrnw.1024x1024-65.jpg",
        "http://a668.phobos.apple.com/us/r1000/115/Purple2/v4/9f/0f/0c/9f0f0c76-86cf-5af0-7d62-e57d05cdb7d9/mzl.gdkkhahb.1024x1024-65.jpg",
        "http://a886.phobos.apple.com/us/r1000/080/Purple2/v4/4e/2c/e8/4e2ce8be-f69d-2fd9-b79a-e9a689dd1ad6/mzl.vjffwbxj.1024x1024-65.jpg"
      ],
      "artworkUrl60": "http://a1154.phobos.apple.com/us/r1000/093/Purple2/v4/df/d2/d1/dfd2d173-7901-1c41-fcc3-ea953e698961/57.png",
      "artworkUrl512": "http://a1157.phobos.apple.com/us/r1000/108/Purple/v4/db/b7/fb/dbb7fb10-29a7-4771-e781-38fffee81c85/mzl.atjqxuth.png",
      "artistViewUrl": "https://itunes.apple.com/us/artist/yelp/id284910353?uo=4",
      "artistId": 284910353,
      "artistName": "Yelp",
      "price": 0,
      "version": "6.5.1",
      "description": "Looking for a burrito joint open now?  An Irish pub nearby?  A gas station you can drive to before your tank hits empty?  Yelp for your iPhone or iPad is here to help.  Use us to search for places to eat, shop, drink, relax and play then read reviews from an active community of locals in the know.   \n\nFEATURES:\n★ Search for businesses near you \n★ Tap quick links to find nearby bars, restaurants, cafes and more\n★ Narrow your searches by 'hood, distance, price, and what's open now\n★ Browse reviews to read what's great (and not so great) in your city\n★ Find great Deals offered by your favorite local businesses on iPhone\n★ Add tips, photos, and draft reviews for your favorite businesses\n★ Check-in and share on Facebook and Twitter\n★ Make reservations on OpenTable without leaving the Yelp app\n★ Look up addresses and phone numbers for thousands of businesses, then call or map them from your iPhone or iPad\n★ Yelp does augmented reality with Monocle. Overlay business information onto the world around you.",
      "currency": "USD",
      "genres": [
        "Travel",
        "Navigation"
      ],
      "genreIds": [
        "6003",
        "6010"
      ],
      "releaseDate": "2008-07-11T07:00:00Z",
      "sellerName": "Yelp, Inc.",
      "bundleId": "com.yelp.yelpiphone",
      "trackId": 284910350,
      "trackName": "Yelp",
      "primaryGenreName": "Travel",
      "primaryGenreId": 6003,
      "releaseNotes": "New in 6.5.1:\nJust to show how much we love our Yelpers, we're knocking out two big feature requests with this release:\n☆ Apparently 300 characters per Tip wasn't enough for you to fully express yourself. We dig that. This release gives you 200 more.\n☆ From the \"More Reviews\" list on iPhone, pull down to expose a review search box. Now you can skip the other stuff and find out exactly what people think about the \"carne asada burrito\" at that new Mexican spot down the street.\n\nNew in 6.5:\n☆ We gave our iPad business page a whole lot of love. It's now more streamline and clear, with more emphasis on business photos. In addition, we're now showing Yelp Deals and our new \"Explore the Menu\" feature.\n☆ Yelp search just got more social: Now you can see which friends are checked in to businesses directly from your search results.\n☆ Getting to a restaurant just after closing is a major bummer. Now we'll indicate if a business will be closing soon or is just about to open.\n☆ We also got in a TON of bug fixes and enhancements: showing your review first in the reviews list, supporting updated reviews on iPad, swipe-able photos on the business page, and huge speed improvements on iPhone5!",
      "formattedPrice": "Free",
      "wrapperType": "software",
      "trackCensoredName": "Yelp",
      "languageCodesISO2A": [
        "SV",
        "TR",
        "NB",
        "DA",
        "DE",
        "EN",
        "ES",
        "FI",
        "FR",
        "IT",
        "NL",
        "PL"
      ],
      "fileSizeBytes": "18176675",
      "contentAdvisoryRating": "12+",
      "averageUserRatingForCurrentVersion": 3.5,
      "userRatingCountForCurrentVersion": 74,
      "artworkUrl100": "http://a1157.phobos.apple.com/us/r1000/108/Purple/v4/db/b7/fb/dbb7fb10-29a7-4771-e781-38fffee81c85/mzl.atjqxuth.png",
      "trackViewUrl": "https://itunes.apple.com/us/app/yelp/id284910350?mt=8&uo=4",
      "trackContentRating": "12+",
      "averageUserRating": 3.5,
      "userRatingCount": 170887
    }
  ]
} 
```

# vba - 匹配两个excel工作表上的列并复制数据

> ID：15816829
> 
> 赞同：0
> 
> 时间：2013-04-04T16:35:53.523
> 
> 标签：vba, excel, excel-2007

我在同一个 excel 文件中有两个数据表： Sheet1 作为“数据”，有 7 列： ![在此处输入图像描述](https://i.stack.imgur.com/UaeJZ.jpg)

第二张表是“主要”，有 5 列： ![在此处输入图像描述](https://i.stack.imgur.com/oEkWC.jpg)

匹配两个文件的同一列是“名称”。我想要一个与两个工作表上的名称匹配的 VBA 代码，并通过匹配两个工作表上的列名来将数据从 proc1 - Proc4 从工作表“Main”复制到工作表“数据”。

我在堆栈溢出中搜索了类似的问题，这是我找到的代码（稍作修改）：

```
Sub CopyData()

Dim shtImport As Worksheet
Dim shtMain As Worksheet
Set shtImport = ThisWorkbook.Sheets("Data")
Set shtMain = ThisWorkbook.Sheets("Main")

    Dim CopyColumn As Long
    Dim CopyRow As Long
    Dim LastColumn As Long

    '- for each column in row 1 of import sheet
    For CopyColumn = 1 To shtImport.Cells(1, shtImport.Columns.Count).End(xlToRight).Column
    '- check what the last column is with data in column
    LastRowOfColumn = shtImport.Cells(shtImport.Columns.Count, CopyColumn).End(xlToRight).Column
    'if last column was larger than one then we will loop through rows and copy
    If LastColumn > 1 Then
    For CopyRow = 1 To LastColumn
    '- note we are copying to the corresponding cell address, this can be modified.
    shtMain.Cells(CopyRow, CopyColumn).value = shtImport.Cells(CopyRow, CopyColumn).value
    Next CopyRow
    End If
    Next CopyColumn

    End Sub 
```

这不是我想要的工作方式。有人可以帮我解决这个问题。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:33:09.217

试试这个代码：

```
Sub CopyData()

Dim shtImport As Worksheet
Dim shtMain As Worksheet
Set shtImport = ThisWorkbook.Sheets("Data")
Set shtMain = ThisWorkbook.Sheets("Main")

'From Main to Data
Dim rngImpTitles As Range
Set rngImpTitles = shtImport.Rows(1)
Dim rngImpNames As Range
Set rngImpNames = shtImport.Columns(1)

Dim CopyColumn As Long
Dim CopyRow As Long
Dim foundRow As Long
Dim foundCol As Long

On Error Resume Next
'for each column in row 1 of import sheet
For CopyColumn = 2 To shtMain.Cells(1, shtMain.Columns.Count).End(xlToLeft).Column
    foundCol = rngImpTitles.Find(shtMain.Cells(1, CopyColumn).Value2).Column
    If Err.Number <> 0 Then
        MsgBox "Not such a col title in importsheet for " & vbNewLine & _
                        shtMain.Cells(1, CopyColumn)
        Err.Clear
        GoTo skip_title
    End If

    For CopyRow = 2 To shtMain.Cells(shtMain.Rows.Count, 1).End(xlUp).Row
        foundRow = rngImpNames.Find(shtMain.Cells(CopyRow, 1)).Row
        If Err.Number <> 0 Then
            MsgBox "Not such a row name in importsheet for " & vbNewLine & _
                        shtMain.Cells(CopyRow, 1)
            Err.Clear
            GoTo skip_row
        End If

            If Len(shtMain.Cells(CopyRow, CopyColumn)) <> 0 Then
                    shtMain.Cells(CopyRow, CopyColumn).Copy shtImport.Cells(foundRow, foundCol)
            End If

skip_row:
    Next CopyRow
skip_title:
Next CopyColumn

End Sub 
```

# c# - 指定的强制转换无效 - 位值在存储过程中为 NULL

> ID：15816830
> 
> 赞同：1
> 
> 时间：2013-04-04T16:35:53.757
> 
> 标签：c#, sql-server-2008

我使用存储过程中的数据，该过程返回两列：Paid 和 New

它们都包含位值。因此，它返回 0 或 1，但一些测试数据返回 NULL。

```
Paid  New
 1     1
 0     0
 1    NULL 
```

结果我收到了这个错误

```
Specified cast is not valid 
```

我将如何在 c# 中解决这个问题，或者在存储过程本身中更好地解决这个问题，以便存储过程只返回 0 或 1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:41:44.107

```
SELECT Paid, ISNULL(New, 0) 
```

这将在“新”列中返回 0 而不是 NULL。这是存储过程中的修复。

至于 C# 修复，您可以将可空位转换为可空布尔（布尔？）：

```
(bool?)sqlValue 
```

# c# - 将 ibm mq 客户端连接到较低版本的问题

> ID：15816837
> 
> 赞同：1
> 
> 时间：2013-04-04T16:36:07.977
> 
> 标签：c#, .net, websphere, ibm-mq

我正在通过 .net 使用 7x（7.5 mq 客户端 amqmdnet.dll）并使用`MQPutMessageOptions`and `MQGetMessageOptions`，此代码适用于 mq 7.5 ibm 客户端，但是

[IBM 链接](http://www-01.ibm.com/support/docview.wss?uid=swg21312967)

说 7x mq 客户端将向后兼容 6x，当我尝试连接时，我收到此错误（在 windows 7 64 位操作系统中）。

```
System.TypeInitializationException: The type initializer for 'IBM.WMQ.MQQueueManager' threw an exception. ---> System.TypeInitializationException: The type initializer for 'IBM.WMQ.CommonServices' threw an exception. ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at IBM.WMQ.CommonServices..cctor()
   --- End of inner exception stack trace ---
   at IBM.WMQ.CommonServices.TraceEnabled()
   at IBM.WMQ.MQBase..ctor()
   at IBM.WMQ.Nmqi.NmqiEnvironment..ctor(NmqiPropertyHandler nmqiPropertyHandler)
   at IBM.WMQ.Nmqi.NmqiFactory.GetInstance(NmqiPropertyHandler properties)
   at IBM.WMQ.MQQueueManager..cctor() 
```

引发上述错误的行是：

```
MQQueueManager  mqQMgr = new MQQueueManager("My queue manager" , "my channel name" ,"my connection name"); 
```

PS：上面具有相同参数的行在 7.5 mq 客户端中工作正常，但在 6x 时失败（例如：安装 6.0.2.5 mq 客户端，我已经完成了“典型”安装（完全安装 6x mq 客户端）。

知道如何使它与 6.0.2.5 一起使用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T16:54:47.817

是的，那个链接是正确的。如果您安装了 MQ v7.5 客户端，则链接的含义是，您将能够使用在远程机器上运行的 MQ v6.0 队列管理器。但是您正在尝试的似乎有所不同。您似乎已经使用 MQ v7.5 客户端编译了应用程序，但尝试在 MQ v6.0.x 客户端上运行它。这行不通。

# java - 图片加载非法参数异常错误

> ID：15816842
> 
> 赞同：0
> 
> 时间：2013-04-04T16:36:16.027
> 
> 标签：java, illegalargumentexception, image-loading

我目前正在编写游戏并尝试从`ImageLoader`类中加载和图像，但我一直收到此错误：

```
Exception in thread "main" java.lang.IllegalArgumentException: input == null!
at javax.imageio.ImageIO.read(ImageIO.java:1338)
at game.ImageLoader.getImage(ImageLoader.java:24)
at game.TestPanel.<init>(TestPanel.java:38)
at game.TestApplication.main(TestApplication.java:26) 
```

这是调用该类的类的代码`ImageLoader`，但我的 catch 块上也收到错误：

```
 public TestPanel ()
        {
        try
        {
            ClassLoader myLoader = this.getClass().getClassLoader();
            ImageLoader loader = new ImageLoader();
            backdrop = loader.getImage("resources/Asteroid.jpg");
            ImageLoader test = new ImageLoader();
            ship = test.getImage("resources/Alien-Ship.png");
            InputStream pointStream = myLoader.getResourceAsStream("resources/path_1.txt");
            Scanner s = new Scanner (pointStream);
            objectPath = new PathPoints(s);
            squid = objectPath.getStart();

        }
        catch (IOException e)
        {
            System.out.println ("Could not load: " + e);
        }
        addMouseListener(this);
    } 
```

这是我的`ImageLoader`课程的代码：

```
 import java.awt.Image;
    import java.io.IOException;
    import java.io.InputStream;
    import java.util.Scanner;

    import javax.imageio.ImageIO;

    public class ImageLoader {

    public Image loadedImage;

        public ImageLoader(){

        }

        public Image getImage(String s){
        try
                {
                    ClassLoader myLoader = this.getClass().getClassLoader();
                    InputStream imageStream = myLoader.getResourceAsStream(s);
                    loadedImage = ImageIO.read(imageStream);
                }
                catch (IOException e)
                {
                    System.out.println ("Could not load: " + e);
                }

                return loadedImage;
         }

        } 
```

为什么它会抛出 null！，我试图改变 to 的路径，`resources/Asteroid.jpg`但`/resources/Asteroid.jpg`它什么也没改变。

`resources`与我的类路径有关，因为它是我存储图像和点资源的包。由于我无法上传树的图像，因此如下所示：

项目 - MyGame

套餐：

play - 包含所有类文件和代码

资源 - 包含所有图像和文档

# riak - 您可以在 Riak 中的重复字段上创建二级索引吗？

> ID：15816845
> 
> 赞同：2
> 
> 时间：2013-04-04T16:36:20.203
> 
> 标签：riak

考虑一个 JSON 对象，例如：

```
{
  name: 'ben',
  employer: 'The Sherwin-Williams Company',
  emails: ['ben@gmail.com', 'ben@sherwin-williams.com']
} 
```

在 MongoDB 中，您可以索引 emails 字段，以便您可以找到任何带有“ben@gmail.com”的对象作为电子邮件。这在 Riak 中可能吗？我无法通过阅读[文档](http://docs.basho.com/riak/latest/tutorials/querying/Secondary-Indexes/)来判断。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T23:42:14.610

你当然可以，但你必须手动输入索引条目。

这是 Ruby 中的一个示例：

```
require 'riak'

client = Riak::Client.new(:protocol => "pbc", :host => "127.0.0.1", :pb_port => 10047, :http_port => 10048)

ben = client['people'].get_or_new('ben')

ben.data = { :name => "ben", 
             :employer => "The Sherwin-Williams Company",
             :emails => ['ben@gmail.com', 'ben@sherwin-williams.com'] }

ben.indexes['email_bin'] << "ben@gmail.com"
ben.indexes['email_bin'] << "ben@sherwin-williams.com"

ben.store 
```

现在您可以通过 ruby​​ 库或通过您的网络浏览器在以下位置查找它`http://127.0.0.1:10018/buckets/people/index/email_bin/ben@gmail.com`

在我的系统上返回： `{"keys":["ben"]}`

我知道 Java 和 Ruby Riak 库支持添加/编辑索引条目，但我将不得不检查其他库并回复您。

# c++ - 数据未插入sqlite表c ++

> ID：15816846
> 
> 赞同：1
> 
> 时间：2013-04-04T16:36:23.923
> 
> 标签：c++, c, database, sqlite

我正在尝试将映射的键和值的内容保存到数据库表中。.dbo 文件已创建，但表中没有任何内容。它不会创建表，但不会退出。我想知道我的代码有什么问题。

```
void names_table( std::map<std::string, unsigned int> &names ){
std::string sql; 
std::string str1;
std::string str2;
std::string str3;

sqlite3_stmt *stmt;
const char *file_names = create_db_file( ); /* default to temp db */
sqlite3 *db;
sqlite3_initialize( );

int rc = sqlite3_open_v2( file_names, &db, SQLITE_OPEN_READWRITE | SQLITE_OPEN_CREATE, NULL);
if ( rc != SQLITE_OK) {
    sqlite3_close( db );
    cout << "Error: Database cannot open!" << endl;
    exit( EXIT_FAILURE);
}
sql = "CREATE TABLE IF NOT EXISTS names_table (offset INTEGER PRIMARY KEY, stname TEXT);";
sqlite3_prepare_v2(db, sql.c_str(), sql.size(), &stmt, NULL);
if (sqlite3_step(stmt) != SQLITE_DONE) cout << "Didn't Create Table!" << endl;

for (auto pm = names.begin(); pm != names.end(); pm++) {
    str2 = "'" + pm->first + "'";
    char tmp[15];
    sprintf(tmp,"%u",pm->second);
    str3 = tmp;
    str1 = (((("INSERT INTO  names_table VALUES(" + str3) + ", ") + str2) + ");");
    std::cout << str1 << std::endl;
    sql = (char *)str1.c_str();
    // stmt = NULL;
    rc = sqlite3_prepare_v2(db, sql.c_str(), sql.size(), &stmt, NULL);
    if ( rc != SQLITE_OK) {
        sqlite3_close(db);
        cout << "Error: Data cannot be inserted!" << endl;
        exit ( EXIT_FAILURE);
    }
}
sqlite3_close( db ); 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:53:57.407

`INSERT INTO names_table VALUES(ramsar, 8329)`- 我希望您知道 SQL 中的字符串文字需要用引号引起来。试试这个：`INSERT INTO names_table VALUES('ramsar', 8329)`。

**编辑：**实际上，你的代码永远不会做你想做的事，因为你甚至没有调用[`sqlite3_step`](http://www.sqlite.org/c3ref/step.html)after [`sqlite3_prepare_v2`](http://www.sqlite.org/c3ref/prepare.html)，这意味着你只是在编译你的 SQL 语句，但从不评估它。你从哪里找到这个不好的例子？请参阅[此处](https://stackoverflow.com/a/10856183/1174378)和[此处](https://stackoverflow.com/a/11451953/1174378)有关如何正确使用 SQLite C++ 接口的体面示例。

PS：停止`sprintf`在 C++ 中乱搞。你有`std::stringstream`它。

# r - 图像 ds3.js 热图

> ID：15816849
> 
> 赞同：0
> 
> 时间：2013-04-04T16:36:29.860
> 
> 标签：r, d3.js

我无法确定您是否可以使用 DS3 或 R 创建可以映射到图标列表的热图。[特别想使用像这些http://goo.gl/Yt8CG](http://goo.gl/Yt8CG)这样的小人物图标，然后在它们上显示活动的集中度。我对 DS3.js 和 R 的数据可视化相当陌生，所以我可能没有做正确的 google-fu。[如果有人可以给我看一个例子，或者让我知道你是否可以对图标进行着色，而不仅仅是像http://bl.ocks.org/mbostock/4063318](http://bl.ocks.org/mbostock/4063318)这样动态生成的块，请提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:10:45.503

基本方法与绘制普通热图没有什么不同（请参见[此处](https://stackoverflow.com/questions/12925266/drawing-heatmap-with-d3)的示例）。唯一的区别是，您不是附加矩形，而是为要使用的图形附加一个容器。

是否能够调整阴影取决于图形本身——如果它是位图，那你就不走运了。例如，如果它是 SVG，您可以简单地选择该 SVG 内的路径并设置填充颜色，就像在普通热图中设置矩形一样。

# css - 删除 Firefox 工具栏按钮和下拉标记之间的间隙

> ID：15816857
> 
> 赞同：1
> 
> 时间：2013-04-04T16:36:43.170
> 
> 标签：css, firefox, button, xul, toolbar

我有一个在我的 Firefox 扩展程序中完美运行`toolbarbutton`的类型`menu-button`，但是它的样式并不像我想要的那样安静。

按钮图像和下拉标记箭头之间有一个轮廓间隙（红色箭头显示了我所指的轮廓间隙 - 轮廓是问题的一部分 - 您还可以看到 AdBlock Plus 按钮，它没有有这个问题）。

![红色箭头显示轮廓间隙](https://i.stack.imgur.com/Cb8nR.png)

此外，当您将鼠标悬停在图像/按钮上时，会出现阴影灰色背景。

![将鼠标悬停在按钮上时显示阴影灰色背景](https://i.stack.imgur.com/zy0Lv.png)

我想消除差距（AdBlock Plus 用他们的工具栏按钮管理这个，但我还没有弄清楚如何）并删除阴影（我有为按钮定义的悬停图像应该足以表明你在点击区）。

任何人都可以给我任何指示吗？这似乎与以下两个类有关：`toolbarbutton-1`和`chromeclass-toolbar-additional`

谢谢，

调频

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:50:15.013

差距是因为类型是“菜单按钮”，而ADP按钮类型是“菜单”。间隙样式取决于您使用的主题。

图像问题，如何设置图像？就我而言，它可以很好地设置

```
button.style.listStyleImage =  'url("chrome://referrercontrol/skin/icon24.png");' 
```

# translation - Eigen::Affine3f 中的变换

> ID：15816859
> 
> 赞同：0
> 
> 时间：2013-04-04T16:36:46.577
> 
> 标签：translation, transformation, linear-algebra, eigen

我对 Eigen 库不太熟悉，我被困在这段代码中

```
motor1_to_motor2 =
          Translation3f(BigApeLeg::distanceJoint1ToJoint3(),0,0)
        * AngleAxisf(M_PI_2, Vector3f::UnitX())
        * AngleAxisf(M_PI_2, Vector3f::UnitY()); 
```

motor1_to_motor2 是 Eigen::Affine3f Big::ApeLeg::distance... 必须返回一个浮点数

但我的问题是什么是 Translation3f，什么是 AngleAxisf。他们在做什么？他们返回什么？

我熟悉一些基本的转换。如果有人可以给我任何指示，我将不胜感激？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:18:53.690

顾名思义，[Translation3f](http://eigen.tuxfamily.org/dox-devel/classEigen_1_1Translation.html)表示使用浮点数的 3D 翻译。AngleAxisf 表示围绕给定轴的给定角度的 3D 旋转。两者都是类构造函数，而不是函数。

因此，motor1_to_motor2 是一个仿射变换，它先绕 Y 旋转，然后绕 X 旋转，最后沿 X 轴平移。

这个[文档](http://eigen.tuxfamily.org/dox-devel/group__TutorialGeometry.html)应该很好地介绍了 Eigen 中的空间变换。

# symfony - 为什么我在请求服务时收到错误的对象

> ID：15816866
> 
> 赞同：0
> 
> 时间：2013-04-04T16:36:59.393
> 
> 标签：symfony, service, dependency-injection

我正在定义一个新的身份验证提供程序，并且我需要访问密码编码器工厂，因此我将我的提供程序定义为一项服务并要求注入编码器。这是我的服务定义：

```
services:
    wsse.security.authentication.provider:
        class:  Fdi\CliperestBundle\Security\Authentication\Provider\WsseProvider
        arguments: [@security.encoder_factory,'', %kernel.cache_dir%/security/nonces] 
```

所以我期待我的提供者构造函数会得到一个类型的对象`Symfony\Component\Security\Core\Encoder\EncoderFactory`。但我得到了一个`Symfony\Component\Security\Core\User\ChainUserProvider`代替！

有谁知道我为什么要得到这个对象以及我能做些什么来得到 EncoderFactory 呢？顺便说一句，我正在使用 FOSUserBundle，不知道它是否与此有关

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:00:09.863

OK, I found the answer. Since this service is defined as an authentication provider, the first argument to the constructor has to be and user provider which is inserted by the security component. Changing the order of the arguments did the trick:

```
services:
    wsse.security.authentication.provider:
        class:  Fdi\CliperestBundle\Security\Authentication\Provider\WsseProvider
        arguments: ['', %kernel.cache_dir%/security/nonces, @security.encoder_factory] 
```

# css - 我的样式表已转换为单行

> ID：15816871
> 
> 赞同：-1
> 
> 时间：2013-04-04T16:37:07.097
> 
> 标签：css, stylesheet

我不知道发生了什么，但基本上我的 1000 行 CSS 样式表已经变成了单行样式表。

问题：

1）为什么会发生？

2）我可以做些什么来恢复它，因为我没有任何最近的备份。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:43:11.053

一定是因为您正在使用的程序¿？在某处有一个 CSS 压缩器...

根据很多事情，您可以获得原始的 CSS 文件。

如果不能，请尝试美化压缩的。在这里，您有一些在线工具可以做到这一点。

*   [http://cssbeautify.com/](http://cssbeautify.com/)
*   [http://procssor.com/](http://procssor.com/)
*   [http://www.codebeautifier.com/](http://www.codebeautifier.com/)

# jasper-reports - Jasper / ireports中文本的日期格式部分

> ID：15816874
> 
> 赞同：15
> 
> 时间：2013-04-04T16:37:16.560
> 
> 标签：jasper-reports, ireport

如何格式化日期字段（数据库字段）在 Jasper / iReports（4.5.1）中显示文本的一部分

通过报告中的文本字段显示...（请使用 Groovy）

“该日期的小计：” + $F(DEPOSIT_DATE)

我已经尝试过`(new SimpleDateFormat("MM/dd/yyyy")).parse($F{DEPOSIT_DATE})`，我收到错误消息：

```
net.sf.jasperreports.engine.fill.JRExpressionEvalException: 
Error evaluating expression : Source text : (new SimpleDateFormat("MM/dd/yyyy")).parse($F{BANK_DATE}) 
```

我想在我的报告中显示如下...

该日期的小计：MM/DD/YYYY - 格式...

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-04T17:07:17.710

试试这个：

```
new SimpleDateFormat("MM/dd/yyyy").format($F{BANK_DATE}) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-06-01T10:37:26.577

我同意 Mateusz，带有**模式的****textField**比 new SimpleDateFormat("someFormat").format("jasperField") 更快。当您处理大量报告时，这一点很重要。这是我的例子

 **```
<textField pattern="MM/dd/yyyy" isBlankWhenNull="true">
...
    <textFieldExpression class="java.util.Date"><![CDATA[$F{certIssueDate}]]></textFieldExpression>
</textField> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-11T15:32:37.843

看来，您尝试解析而不是格式化（如上所述）。

您还可以在文本字段属性选项卡中使用 Pattern 来漂亮地打印日期，或者手动更改 jrxml 中的模式：

```
<textField pattern="MM/dd/yyyy">
  <!-- here comes other generated data-->
  <textFieldExpression><![CDATA[$F{BANK_DATE}]]></textFieldExpression>
</textField> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-14T20:15:24.097

如果日期字段是字符串值，请说：`"2014-11-20"`

```
<field name="dateField" class="java.lang.String"/> 
```

那么你可以这样做

```
<variable name="THE_DATE" class="java.util.Date">
<variableExpression>
<![CDATA[new java.text.SimpleDateFormat("yyyy-mm-dd").parse($F{dateField})]]>
</variableExpression>
</variable>

<textField pattern="dd/MM/yyyy" isBlankWhenNull="true">
    <reportElement x="0" y="0" width="88" height="20" uuid="47b41787-a8fd-44ea-bf96-7e5484e477fb"/>
    <textElement textAlignment="Left" verticalAlignment="Middle"/>
    <textFieldExpression><![CDATA[ $V{THE_DATE} ]]></textFieldExpression>
</textField> 
```

您可以通过右键单击字段 -> 单击字段模式 -> 选择日期 -> 选择日期模式来设置模式

你也可以这样做

```
<textField isBlankWhenNull="true">
    <reportElement x="0" y="0" width="88" height="20" uuid="47b41787-a8fd-44ea-bf96-7e5484e477fb"/>
    <textElement textAlignment="Left" verticalAlignment="Middle"/>
    <textFieldExpression class="java.util.Date"><![CDATA[ new java.text.SimpleDateFormat("dd/MM/yyyy").format(new java.text.SimpleDateFormat("yyyy-mm-dd").parse($F{dateField})) ]]></textFieldExpression>
</textField> 
```

但是，如果 DateField 是类型，`Date` 那么执行以下操作就可以了。

```
<field name="dateField" class="java.util.Date"/>
<textField pattern="dd/MM/yyyy" isBlankWhenNull="true">
        <reportElement x="0" y="0" width="88" height="20" uuid="47b41787-a8fd-44ea-bf96-7e5484e477fb"/>
        <textElement textAlignment="Left" verticalAlignment="Middle"/>
        <textFieldExpression><![CDATA[ $F{dateField} ]]></textFieldExpression>
</textField> 
```**

# java - 回文编码

> ID：15816878
> 
> 赞同：0
> 
> 时间：2013-04-04T16:37:28.660
> 
> 标签：java, palindrome

我正在尝试使用一种方法在java中创建一个回文测试器。这就是我到目前为止所拥有的。它是如此接近，我只是无法弄清楚为什么它不会说它是回文并将其反转。

```
System.out.println("Fun with Palindromes!!");

    Scanner in = new Scanner(System.in);
    System.out.println("Enter the potential palindrome (or enter exit to quit): ");
    String x = in.nextLine();

    while(!x.equals("exit"))
    {
        String t = x.toLowerCase();
        String u = CleanUpString(t);
        Boolean wordCheck = checkPalindrome(u);
        int wordCount = x.length();

        String rev = "";

        for(int i = 0; i <x.length(); i++)
        {
            rev = x.charAt(i)+rev;
        }
        if(wordCheck == true)
        {
            System.out.println("The orginal string\"" + u + "\" contains" + wordCount + "characters." );
            System.out.println("The converted string\"" + rev + "\"is a palindrome");
        }
        else if(wordCheck == false)
        {
            System.out.println("The string \"" + u + "\" contains " + wordCount + " characters");
            System.out.println("\"" + rev + "\" is not a palindrome");
        }
    System.out.println("\nEnter the potential palindrome, or enter exit to quit: ");
    x = in.nextLine();

    }
}   
    public static String CleanUpString(String words)
    {
        words = words.replace(".","");
        words = words.replace("," ,"");
        words = words.replace(":","");
        words = words.replace("!","");
        return words;

    }   

    public static boolean checkPalindrome(String baseball)
    {
        String rev = "";
        for(int i = 0; i<baseball.length()-1; i++)
            {
                rev = baseball.charAt(i) + rev;

            }
        if(rev.equals(baseball))
            return true;
        else
            return false;

    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T19:23:20.493

这是我用来确定字符串是否为回文字符串的代码：

```
private static boolean checkPalindrome(String str){
    if (str == null) 
        return false;
    int len  = str.length();
    for (int i=0;i<len/2 ; i++){
        if (str.charAt(i) != str.charAt(len - i - 1)){
            return false;
            }
    }       
    return true;
} 
```

对于反转字符串，您可以简单地使用：

```
String reverse = new StringBuffer(string).reverse().toString(); 
```

希望这些可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-24T23:29:55.643

为此使用[StringUtils](http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html)

```
import org.apache.commons.lang.StringUtils;

boolean isPalindrome(String word) {
    return StringUtils.reverse(word).equals(word);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-18T23:16:22.833

这是另一种选择

```
public class PalindromeTester {
    public static void main(String[] args) {

try {

    String s = args[0];
    int i = args[0].length()-1;
    int i2 = args[0].length();
    char [] chrs = new char[i2];

    for ( int i3 = i; i3 > -1; i3-- ) {
        chrs[i2-i3-1] = (s.charAt(i3) );
        }

        String s2 = String.valueOf(chrs);

        if ( s2.equals(s) ) {
            System.out.println( s + " is a palindrome!");
        } else { 
            System.out.println( s + " is not a palindrome");
        }

    } catch ( ArrayIndexOutOfBoundsException e ) {
        System.out.println("Please enter at least one letter or digit!");
    }

}
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-27T14:31:16.693

我是这样做的：

```
public class palindromeTWO 
{
    public static void main(String[] args)
    {
        Scanner scan = new Scanner(System.in);
        int right = 0;
        int left = 1;

        System.out.println("Please enter a word: ");
        String word = scan.next();

        int word_length = word.length();

        while(word.charAt(right) == word.charAt(word_length - left) && left < (word_length / 2))
        {
            left++;
            right++;
        }

        if(word.charAt(right) == word.charAt(word_length - left))
        {
            System.out.println("'" + word + "'" + " is a palindrome!");
        }
        else
            {
                System.out.println("'" + word + "'" + " is NOT a palindrome.");
            }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-08T19:32:53.093

**使用递归的第一个实现 -**

```
import java.util.ArrayList;
import java.util.stream.Collectors;

public class PalindromeManager {
private static String str = "ehcache";
private static ArrayList<String> list = new ArrayList<>();

public static void main(String[] args) {
    test(str);

    String output = list.stream().collect(Collectors.joining());

    System.out.println(output);

    if (output.equals(str)) {
        System.out.println("it was palindrome");
    } else {
        System.out.println("Nope! it wasn't");
    }
}

private static void test(String str) {
    if (str.length() <= 0) {
        return;
    }

    String lastChar = "" + str.charAt(str.length() - 1);
    list.add(lastChar);
    test(str.substring(0, str.length() - 1));

  }
} 
```

**使用迭代的第二次实现 -**

```
public class PalindromeManager2 {
private static String str = "ehcache";

public static void main(String[] args) {

    int startIndex = 0;
    int lastIndex = str.length() - 1;

    boolean result = true;

    while (true) {

        if (startIndex >= lastIndex) {
            break;
        }

        char first = str.charAt(startIndex);
        char last = str.charAt(lastIndex);

        /*if (first == ' ') {
            startIndex++;
            continue;
        }

        if (last == ' ') {
            lastIndex--;
            continue;
        }*/

        if (first != last) {
            result = false;
            break;
        }

        startIndex++;
        lastIndex--;

    }

    if (result) {
        System.out.println("Yes! It was");
    } else {
        System.out.println("Nope! it wasn't");
    }
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-31T18:17:39.647

在 checkPalindrome 方法中，将 for 循环的条件从 更改`i<baseball.length()-1`为`i<baseball.length()`。

# c++ - QScrollArea 获取滚动或总偏移量

> ID：15816879
> 
> 赞同：4
> 
> 时间：2013-04-04T16:37:29.897
> 
> 标签：c++, python, qt, pyqt

QScrollArea 是否有办法找出它滚动了多少？我是否需要对所有 scollContensBy() 调用做一些统计？
我需要获取鼠标相对于 QScrollArea 内图像标签的位置。我只能获得相对于当前视图的位置，而不是整个图像。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T16:46:21.263

[QAbstractScrollArea](http://qt-project.org/doc/qt-4.8/qabstractscrollarea.html)提供了访问其滚动条（`horizontalScrollBar()`和`verticalScrollBar()`）的方法。一旦你有了那个指针，你就可以访问[QScrollBar](http://qt-project.org/doc/qt-4.8/qscrollbar.html)和[QAbstractSlider](http://qt-project.org/doc/qt-4.8/qabstractslider.html)提供的所有方法和信号，包括`value()`和`valueChanged()`。

# sql - 尝试计算多批货物的手头数量和手头价值

> ID：15816881
> 
> 赞同：0
> 
> 时间：2013-04-04T16:37:33.023
> 
> 标签：sql, sql-server

我有这个查询，我有一个收购表（传入）和发票表（传出）我试图通过采用 AVG dbo.tblAcqDetail.AcqPrice * QtyOnHand 来计算手头的价值，这被认为是传入 - 传出。当我在 Acquisitions 表中添加对同一项目具有不同成本的行项目时，AVG 没有分组并显示下面的两个行项目示例。装运方适用于多个行项目...

```
Product  QtyIn  QtyOut   On_Hand   AVGPrice   Value_OnHand 
Screws     100      30        70    25.0000      1750.0000 
Nuts        50      10        40    40.0000      1600.0000 
Nuts       100      10        90    50.0000      4500.0000 
Bolts      100      20        80    100.000      8000.0000 
```

.

```
SELECT DISTINCT
        dbo.tblProduct.Product ,
        SUM(DISTINCT dbo.tblAcqDetail.AcqQuantity) AS QtyIN ,
        SUM(DISTINCT dbo.tblInvoiceDetail.InvQuantity) AS QtyOut ,
        SUM(DISTINCT dbo.tblAcqDetail.AcqQuantity)
        - SUM(DISTINCT dbo.tblInvoiceDetail.InvQuantity) AS On_Hand ,
        dbo.tblAcqDetail.AcqPrice ,
        dbo.tblAcqDetail.AcqPrice
        * ( SUM(DISTINCT dbo.tblAcqDetail.AcqQuantity)
            - SUM(DISTINCT dbo.tblInvoiceDetail.InvQuantity) ) AS Value_Hand
FROM    dbo.tblAcq
        INNER JOIN dbo.tblAcqDetail ON dbo.tblAcq.acqID = dbo.tblAcqDetail.AcqID
        INNER JOIN dbo.tblProduct ON dbo.tblAcqDetail.ProductID = dbo.tblProduct.ProductID
        INNER JOIN dbo.tblInvoiceDetail ON dbo.tblProduct.ProductID = dbo.tblInvoiceDetail.ProductID
        INNER JOIN dbo.tblInvoice ON dbo.tblInvoiceDetail.InvoiceID = dbo.tblInvoice.InvoiceID
GROUP BY dbo.tblProduct.Product ,
        dbo.tblAcqDetail.AcqPrice 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:15:45.577

Basing on PinnyM's answer, you don't need `DISTINCT`, I re-write your query as following using table alias:

```
 SELECT
        P.Product ,
        SUM( AcD.AcqQuantity) AS QtyIN ,
        SUM( InD.InvQuantity) AS QtyOut ,
        SUM( AcD.AcqQuantity)
        - SUM( InD.InvQuantity) AS On_Hand ,
        AcD.AcqPrice ,
        AcD.AcqPrice
        * ( SUM(AcD.AcqQuantity)
            - SUM( InD.InvQuantity) ) AS Value_Hand
FROM    dbo.tblAcq Ac
        INNER JOIN dbo.tblAcqDetail  AcD ON Ac.acqID = AcD.AcqID
        INNER JOIN dbo.tblProduct P ON AcD.ProductID = P.ProductID
        INNER JOIN dbo.tblInvoiceDetail InD  ON P.ProductID = InD.ProductID
        INNER JOIN dbo.tblInvoice Inv ON InD.InvoiceID = Inv.InvoiceID
GROUP BY P.Product ,
         AcD.AcqPrice 
```

By reading this query, I don't understand why you need table `dbo.tblInvoice`, it is not part of aggregation.

**The reason you still see different product is because you group by two columns `P.Product, AcD.AcqPrice`, not only Product**, in your return result you can see their combination is unique.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:44:34.040

为了在数学上准确，您不应该使用`SUM(DISTINCT fieldname)`，而应该使用`SUM(fieldname)`。否则，它将消除恰好具有相同数量的条目。

就此而言，您也不应该`DISTINCT`在查询开始时使用，`GROUP BY`已经处理了它。

如果您认为您的 JOIN 返回了重复的行（如果您操作正确，则不应该这样做），请`DISTINCT`在尝试聚合之前将它们包装在子查询中。

例如，消除重复项的子查询可以这样编写：

```
SELECT
    Product ,
    SUM(AcqQuantity) AS QtyIN ,
    SUM(InvQuantity) AS QtyOut ,
    SUM(AcqQuantity)
    - SUM(InvQuantity) AS On_Hand ,
    AcqPrice ,
    AcqPrice
    * ( SUM(AcqQuantity)
        - SUM(InvQuantity) ) AS Value_Hand
FROM (SELECT DISTINCT
          dbo.tblProduct.Product ,
          dbo.tblAcqDetail.AcqQuantity,
          dbo.tblInvoiceDetail.InvQuantity,
          dbo.tblAcqDetail.AcqPrice
      FROM
          dbo.tblAcqDetail
          INNER JOIN dbo.tblProduct ON dbo.tblAcqDetail.ProductID = dbo.tblProduct.ProductID
          INNER JOIN dbo.tblInvoiceDetail ON dbo.tblProduct.ProductID = dbo.tblInvoiceDetail.ProductID
          INNER JOIN dbo.tblInvoice ON dbo.tblInvoiceDetail.InvoiceID = dbo.tblInvoice.InvoiceID ) productInfo
GROUP BY Product, AcqPrice 
```

# php - 使用 cURL 将 POST 数据发送到 API

> ID：15816882
> 
> 赞同：0
> 
> 时间：2013-04-04T16:37:37.070
> 
> 标签：php, curl

我可以使用以下表格发送短信

```
<form action="http://myserviceprovider/myname/server.php" method="post"> 
 <input  type="hidden" value="MyUsername" name="user" />   
 <input  type="hidden" value="MyPassword" name="pass" />           
 <input  type="hidden" value="MyKey" name="sid" />    
 <input  type="hidden" value="12345678" name="sms[0][0]" /> 
 <input  type="hidden" value="MyFrist SMS Text" name="sms[0][1]" />
 <input  type="hidden" value="97654321" name="sms[1][0]" />                    
 <input  type="hidden" value="MySecond SMS Text" name="sms[1][1]" />
 <input type="submit" />
</form> 
```

现在我正在尝试使用 PHP cURL 发送短信。我创建了一个包含手机号码和消息的数组：

```
$sms =array(
           array("0" => "12345678", "1" => "MyFrist SMS Text"),
           array("0" => "97654321", "1" => "MySecond SMS Text")
      ); 
```

问题是我无法弄清楚如何使用以下方法准确发送包括用户名、密码和 Mykey 在内的值

```
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
curl_setopt($ch, CURLOPT_POSTFIELDS,http_build_query($post));
curl_exec($ch); 
```

你能告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:51:35.933

据我了解，您希望使用 cURL 发布到 FORM URL，而不是使用该站点。您需要发送其他表单字段以及短信信息，即您需要将您的用户名、密码、Sid 传递给表单 url。

示例脚本可能如下所示：

```
<?php
define('SMS_SERVICE_URL', 'http://myserviceprovider/myname/server.php');
define('USERNAME', 'YOUR_USERNAME_HERE');
define('PASSWORD', 'YOUR_PASSWORD_HERE');
define('KEY', 'YOUR_KEY/SID_HERE');

$sms =array(
           array("0" => "12345678", "1" => "MyFrist SMS Text"),
           array("0" => "97654321", "1" => "MySecond SMS Text")
);

$post = array(
        'user' => USERNAME,
        'pass' => PASSWORD,
        'sid'  => KEY,
        'sms'  => $sms,
);

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, SMS_SERVICE_URL);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($post));

curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$result = curl_exec ($ch);

curl_close ($ch);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:41:12.690

要使用 curl 将数据作为 POST 发送，您需要通过设置`CURLOPT_POST`为 true 来告诉 curl 您想要发布。然后你需要传递你的数据 - 将它放入数组`array('user'=>'<USERNAME>', ....);`中并将这个数组传递给 curl 使用`CURLOPT_POSTFIELDS`。

# excel - EXCEL VBA，插入空白行和移动单元格

> ID：15816883
> 
> 赞同：10
> 
> 时间：2013-04-04T16:37:37.190
> 
> 标签：excel, vba

我无法输入整个空白行。我正在尝试移动 A-AD 列（Z 之后的四列）。

目前，单元格 AO 有内容。单元格 O-AD 为空白。但是我正在运行一个宏来将数据放在当前数据的右侧（O 列）。

我可以使用插入一行

```
dfind1.Offset(1).EntireRow.Insert shift:=xlDown 
```

但它似乎只是从 AO 向下移动。我已经设法使用 for 循环降低 O-AD

```
dfind1 as Range
For d = 1 To 15
    dfind1.Offset(2, (d + 14)).Insert shift:=xlDown
Next d 
```

有没有办法降低 30 个单元格 VS 15 个单元格？同样，我想将 15 移到右侧的单元格。目前我有另一个 for 循环设置。

至于其余的代码，如下所示。基本上合并两个excel表的基础是在A列中找到匹配项。我已经标记了问题区域。其余代码大部分都有效。

```
Sub combiner()

    Dim c As Range, d As Long, cfind As Range, x, y, zed, dest As Range, cfind1 As Range, dfind As Range, _
    dfind1 As Range, crow, x_temp, y_temp

    On Error Resume Next
    Worksheets("sheet3").Cells.Clear
    With Worksheets("sheet1")
    .UsedRange.Copy Worksheets("sheet3").Range("a1")
    End With

    With Worksheets("sheet2")
    For Each c In Range(.Range("a3"), .Range("a3").End(xlDown))
    x = c.Value
    y = c.Next

    Set cfind = .Cells.Find(what:=y, lookat:=xlWhole)
    .Range(cfind.Offset(0, -1), cfind.End(xlToRight)).Copy

        With Worksheets("sheet3")
            Set dfind1 = .Cells.Find(what:=x, lookat:=xlWhole)
            If dfind1 Is Nothing Then GoTo copyrev

            '**************************************************************
            '**************************************************************
            'This is the problem Area
            'I'm basically having trouble inserting a blank row
            dfind1.Offset(1).EntireRow.Insert shift:=xlDown

            For d = 1 To 15
                dfind1.Offset(1).Insert shift:=xlToRight
            Next d

            For d = 1 To 15
                dfind1.Offset(2, (d + 14)).Insert shift:=xlDown
            Next d
            '**************************************************************
            '**************************************************************

        End With 'sheet3
        GoTo nextstep

    copyrev:
        With Worksheets("sheet3")
            x_temp = .Cells(Rows.Count, "A").End(xlUp).Row
            y_temp = .Cells(Rows.Count, "P").End(xlUp).Row
            If y_temp > x_temp Then GoTo lr_ed
            lMaxRows = x_temp
            GoTo lrcont
    lr_ed:
            lMaxRows = y_temp
    lrcont:
            .Range(("P" & lMaxRows + 1)).PasteSpecial
            Worksheets("sheet2").Range(cfind.Offset(0, -1), cfind.Offset(0, 0)).Copy
            .Range(("A" & lMaxRows + 1)).PasteSpecial
        End With 'sheet3

    nextstep:
    Next

    lngLast = Range("A" & Rows.Count).End(xlUp).Row

    With Worksheets("Sheet3").Sort
        .SortFields.Clear
        .SortFields.Add Key:=Range("A1:A2" & lngLast), SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
        .SetRange Range("B3:Z" & lngLast)
        .Header = xlYes
        .MatchCase = False
        .Orientation = xlTopToBottom
        .SortMethod = xlPinYin
        .Apply
    End With

    End With  'sheet2
        Application.CutCopyMode = False
End Sub 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-04T18:01:16.697

如果您只想将所有内容向下移动，则可以使用：

```
Rows(1).Insert shift:=xlShiftDown 
```

与转移一切类似：

```
Columns(1).Insert shift:=xlShiftRight 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-06T23:08:46.713

```
Sub Addrisk()

Dim rActive As Range
Dim Count_Id_Column as long

Set rActive = ActiveCell

Application.ScreenUpdating = False

with thisworkbook.sheets(1) 'change to "sheetname" or sheetindex
    for i = 1 to .range("A1045783").end(xlup).row
        if 'something'  = 'something' then
            .range("A" & i).EntireRow.Copy 'add thisworkbook.sheets(index_of_sheet) if you copy from another sheet
            .range("A" & i).entirerow.insert shift:= xldown 'insert and shift down, can also use xlup
            .range("A" & i + 1).EntireRow.paste 'paste is all, all other defs are less.
            'change I to move on to next row (will get + 1 end of iteration)
            i = i + 1
        end if

            On Error Resume Next
                .SpecialCells(xlCellTypeConstants).ClearContents
            On Error GoTo 0

        End With
    next i
End With

Application.CutCopyMode = False
Application.ScreenUpdating = True 're-enable screen updates

End Sub 
```

# python - Python for 循环遍历列表

> ID：15816884
> 
> 赞同：1
> 
> 时间：2013-04-04T16:37:38.150
> 
> 标签：python, for-loop

如果我输入`"apple Pie is Yummy"`我想要：`['Pie','Yummy'] ['apple','is']`

我得到：`[] ['apple', 'Pie', 'is', 'Yummy']`。

如果我输入`"Apple Pie is Yummy"`我想要：`['Apple','Pie','Yummy'] ['is']`

我得到：`['Apple', 'Pie', 'is', 'Yummy'] []`

它的行为就像我的条件运算符在 for 循环的第一次迭代期间只读取一次，然后额外的迭代不会评估条件。

```
str = input("Please enter a sentence: ")

chunks = str.split()

# create tuple for use with startswith string method
AtoZ = ('A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z')

# create empty lists to hold data
list1 = []
list2 = []

for tidbit in chunks:
    list1.append(tidbit) if (str.startswith(AtoZ)) else list2.append(tidbit)

print(list1)
print(list2) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:39:36.717

您正在测试错误的变量；你想检查`tidbit`，而不是`str`：

```
list1.append(tidbit) if (tidbit.startswith(AtoZ)) else list2.append(tidbit) 
```

我会改为使用 Python 自己的`str.isupper()`测试来测试 的第一个字符`tidbit`：

```
list1.append(tidbit) if tidbit[0].isupper() else list2.append(tidbit) 
```

接下来，只需使用列表推导式创建两个列表，因为使用条件表达式的副作用非常可怕：

```
list1 = [tidbit for tidbit in chunks if tidbit[0].isupper()]
list2 = [tidbit for tidbit in chunks if not tidbit[0].isupper()] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:57:16.270

```
chunks = raw_input("Enter a sentence: ").split()
list1 = [chunk for chunk in chunks if chunk[0].isupper()]
list2 = [chunk for chunk in chunks if chunk not in list1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T16:43:29.857

你可以`str.isupper()`在这里使用：

```
def solve(strs):

    dic={"cap":[],"small":[]}

    for x in strs.split():
        if x[0].isupper():
            dic["cap"].append(x)
        else:    
            dic["small"].append(x)

    return dic["small"],dic["cap"]

In [5]: solve("apple Pie is Yummy")
Out[5]: (['apple', 'is'], ['Pie', 'Yummy'])

In [6]: solve("Apple Pie is Yummy")
Out[6]: (['is'], ['Apple', 'Pie', 'Yummy']) 
```

**帮助（str.upper）**：

```
In [7]: str.isupper?
Type:       method_descriptor
String Form:<method 'isupper' of 'str' objects>
Namespace:  Python builtin
Docstring:
S.isupper() -> bool

Return True if all cased characters in S are uppercase and there is
at least one cased character in S, False otherwise. 
```

# html - 在父 DIV 中将两个 div 并排放置

> ID：15816886
> 
> 赞同：0
> 
> 时间：2013-04-04T16:37:43.490
> 
> 标签：html, css, positioning

我在另外两个父 DIV 中有两个 DIV。我要做的是将“时钟”DIV 对齐到“面板”DIV 的左侧，将“sd”DIV 对齐到“面板”DIV 的中心。

现在显示的内容： ![我现在看到的](https://i.stack.imgur.com/Sx4qu.png)

我想要做什么： ![想要的图像](https://i.stack.imgur.com/IHfsn.png)

我的 HTML 看起来像：

```
<div id="weather">
    <div id="panel">
        <div class="clocks">
        </div>
        <div id="sd">
            <script type="text/javascript" src="http://www.weathers.com"></script>
        </div>
    </div>
    <p class="slide"><a href="#" class="btn-slide">Weather</a></p>
</div> 
```

我的 CSS 看起来像：

```
#weather {
    margin: 0 auto;
    padding: 0;
    width: 990px;
    font: 75%/120% Arial, Helvetica, sans-serif;
    top: 0;
    position: absolute;
    z-index: 999999999;
    left: 0%;
    margin-left: 0px;
}
#panel {
    background: url('weatherBack.png') no-repeat;
    height: 195px;
    width: 990px;
    display: none;
    text-align: center;
    margin: 0 auto;
    line-height: 195px;
}
#sd {
    margin: 0 auto;
    padding: 0;
    width: 175px;
}
.slide {
    margin: 0;
    padding: 0;
    border-top: solid 4px #422410;
    background: url(btn.png) no-repeat center top;
}
.btn-slide {
    background: url(white-arrow.gif) no-repeat right -50px;
    text-align: center;
    width: 144px;
    height: 31px;
    padding: 10px 10px 0 0;
    margin: 0 auto;
    display: block;
    font: bold 120%/100% Arial, Helvetica, sans-serif;
    color: #fff;
    text-decoration: none;
}
.active {
    background-position: right 12px;
}
.learn {
    z-index: 9999999999999;
    position: absolute;
    top: 85px;
    right: 3px;
}
.box-cnt {
    padding: 10px;
    padding-bottom: 2px;
    background-color: #1FAAEB;
    zoom: 1;
    filter: alpha(opacity=80);
    opacity: 0.8;
}

.clocks {
    width: 209px;
    height: 131px;
    position: relative;
    top: 0;
    left: 151;
    background: url('css/images/clockbg.png') no-repeat 0 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:41:52.317

在时钟和天气面板上尝试`float`值为 的属性：`left`

```
.clocks {
    width: 209px;
    height: 131px;
    position: relative;
    float: left;
    background: url('css/images/clockbg.png') no-repeat 0 0;
}

#sd {
    margin: 0 auto;
    padding: 0;
    width: 175px;
    position: relative;
    float: left;
} 
```

这是一个有效的 JSFiddle 链接：http: [//jsfiddle.net/cYFfT/](http://jsfiddle.net/cYFfT/)

如果您想在它们之间留出更多空间，只需在 SD 面板上设置左边距，如本次更新：http: [//jsfiddle.net/cYFfT/1/](http://jsfiddle.net/cYFfT/1/)

# jax-ws - Axis2 JAXWS 服务 xs:date XMLGregorianCalendar

> ID：15816888
> 
> 赞同：1
> 
> 时间：2013-04-04T16:37:58.473
> 
> 标签：jax-ws, axis2

我正在使用带有 JAX-WS RI 2.2.3 的axis2-1.6.2。

我正在使用 WSDL 生成骨架、存根和模型类。以下是 WSDL 的代码片段。

```
<xs:complexType name="dailyBooking">
<xs:sequence>
<xs:element minOccurs="0" name="day" qualified="true" type="xs:date" />
<xs:element minOccurs="0" name="noOfBookings" type="xs:int" />
</xs:sequence>
</xs:complexType> 
```

它生成以下类

```
public class DailyBooking {

    protected Integer noOfBookings;
    @XmlSchemaType(name = "date")
    protected XMLGregorianCalendar day; 
```

我想生成 java.util.Date 而不是 XMLGregorianCalendar。怎么可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T05:08:01.310

实现此目的的快速而肮脏的方法是在您的 xsd 中指定一个注释，该注释将指示 JAXB 要转换哪些类型以及如何转换它们。尝试这个：

1.  将 JAXB 命名空间添加到 xsd 文件（或者如果您的类型定义嵌入到 wsdl 中，则添加 wsdl 本身部分）

    ```
    xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" 
    jaxb:version="2.0" 
    ```

2.  添加以下注释元素作为元素的子`<schema/>`元素或在 xsd 文件中

    ```
     <xs:annotation>
          <xs:appinfo>
              <jaxb:globalBindings mapSimpleTypeDef="false" choiceContentProperty="true">
                 <jaxb:javaType name="java.util.Date" xmlType="xs:date"
                       parseMethod="javax.xml.bind.DatatypeConverter.parseDate"
                       printMethod="javax.xml.bind.DatatypeConverter.printDate"/>
                  </jaxb:globalBindings>
          </xs:appinfo>
       </xs:annotation> 
    ```

几点注意事项：

1.  该`javaType`元素指定您希望转换为的 java 数据类型和

2.  `xmlType`指定它在您的架构定义中的相应出现。

3.  使用`globalBindings`意味着该 xml 类型的所有出现都将受制于您指定的自定义

# vb.net - .compute 函数使用单选按钮

> ID：15816894
> 
> 赞同：0
> 
> 时间：2013-04-04T16:38:24.737
> 
> 标签：vb.net, radio-button

我正在使用计算模块代码为 CSC3047 的考试平均值的代码，如下所示：

```
avgObject = gradeTable.Compute("avg(exam)", "module_ID = CSC3047") 
```

但是，我想计算平均考试结果，其中模块 ID 等于从具有模块列表的单选按钮中选择的值。

像这样的东西：

```
avgObject = gradeTable.Compute("avg(exam)", "module_ID = radioList.selectedValue") 
```

我知道这是错误的，但我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:42:59.650

```
Dim condition As String = "module_ID=" + radioList.SelectedItem.Value.ToString()   
avgObject = gradeTable.Compute("avg(exam)", condition) 
```

希望对你有帮助

# prolog - 转置矩阵的方阵解释

> ID：15816895
> 
> 赞同：0
> 
> 时间：2013-04-04T16:38:29.657
> 
> 标签：prolog

我有这个代码，序言代码。它的目的是获得给定方阵的转置矩阵。有人可以向我解释这段代码一步一步做了什么吗？

```
trans([], []).
trans([F|Fs], Ts) :-
    trans(F, [F|Fs], Ts).

trans([], _, []).
trans([_|Rs], Ms, [Ts|Tss]) :-
        lists_firsts_rests(Ms, Ts, Ms1),
        trans(Rs, Ms1, Tss).

lists_firsts_rests([], [], []).
lists_firsts_rests([[F|Os]|Rest], [F|Fs], [Os|Oss]) :-
        lists_firsts_rests(Rest, Fs, Oss). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:30:01.360

关键是真正的理解`lists_firsts_rests/3`，鲍里斯的话是正确的。让我们通过跟踪运行它：

```
?- trace.
[trace]  ?- lists_firsts_rests([[a,b,c],[d,e,f],[g,h,i]], X, Y).

   Call: (6) lists_firsts_rests([[a, b, c], [d, e, f], [g, h, i]], _G1914, _G1915) ? creep
   Call: (7) lists_firsts_rests([[d, e, f], [g, h, i]], _G2030, _G2033) ? creep
   Call: (8) lists_firsts_rests([[g, h, i]], _G2036, _G2039) ? creep
   Call: (9) lists_firsts_rests([], _G2042, _G2045) ? creep
   Exit: (9) lists_firsts_rests([], [], []) ? creep
   Exit: (8) lists_firsts_rests([[g, h, i]], [g], [[h, i]]) ? creep
   Exit: (7) lists_firsts_rests([[d, e, f], [g, h, i]], [d, g], [[e, f], [h, i]]) ? creep
   Exit: (6) lists_firsts_rests([[a, b, c], [d, e, f], [g, h, i]], [a, d, g], [[b, c], [e, f], [h, i]]) ? creep
X = [a, d, g],
Y = [[b, c], [e, f], [h, i]]. 
```

所以你可以看到这里发生的事情`lists_firsts_rests/3`就是剥离每个参数列表中的第一个项目并将它们返回到他们自己的列表中，以及另一个包含所有其余部分的列表。这里的效果是，当它看到 时`[[a,b,c],[d,e,f],[g,h,i]]`，它真正看到的是`[[a|X],[d|Y],[g|Z]]`，它返回了两个东西，列表`[a,d,g]`和`[X,Y,Z]`。

`trans/3`只是一个经典的 Prolog 归纳循环。`lists_firsts_rests/3`它在矩阵上折叠。应该清楚这将如何产生转置矩阵，因为在跟踪中它清楚地将 3x3 矩阵转换为长度为 3 的向量和 2x3 矩阵“余数”。

`trans/2`是另一种经典的 Prolog 模式，它设置了递归`trans/3`并开始循环。这里更经典的命名策略是调用`trans/2` `transpose/2`and `trans/3` `transpose_loop/3`，因为它们确实是这样。

希望这可以帮助。

# javascript - 具有特定功能的警报框

> ID：15816901
> 
> 赞同：0
> 
> 时间：2013-04-04T16:38:54.637
> 
> 标签：javascript, jquery

当我第一次离开标签时，我收到了一个 JS 警报框。但想将它作为 Windows 警报 - 基于我的代码的任何想法。也应该有一个确定和取消按钮 - 确定 > 下一个选项卡取消 > 相同的选项卡

```
$(document).ready(function () {
    B.initB();
var 3firstTimeMsg = true;
var 4FirstTimeMsg = true;
$(".3a-tab").click(function(){
    if(3firstTimeMsg == true)
        {
            alert("If you leave this page, any information you've entered will be lost.");
            3firstTimeMsg = false;
        }   
    });
    $(".3b-tab").click(function(){
    if(4FirstTimeMsg == true)
    {
        alert("If you leave this page, any information you've entered will be lost.");
        4FirstTimeMsg = false;
    }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:40:43.287

那可能是一个确认框：

```
if(3firstTimeMsg == true) {
    3firstTimeMsg = confirm("If you leave this page, any information you've entered will be lost.");
} 
```

[**小提琴**](http://jsfiddle.net/EUyPe/1/)

# django - Django 动态更改表单上的所需属性

> ID：15816904
> 
> 赞同：2
> 
> 时间：2013-04-04T16:39:02.083
> 
> 标签：django, forms, dynamic

我想动态更改表单字段上的必需属性。这样做的原因是因为用户可以选择“与以前的用户相同的地址”是/否。

如果是，那么它会隐藏前端的字段，我希望在验证/处理模型表单时使默认需要的字段不需要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T17:28:16.120

以下是对这个主题的一个很好的讨论：[Django 中的动态表单要求](https://stackoverflow.com/questions/2229427/dynamic-form-requirements-in-django?rq=1)。

如果您只想做一些非常简单的事情，我可以想到两种非常基本的方法：

1.  将该字段设置为不需要，并使用自定义清理函数来检查它在应该存在时是否存在。（如果您希望在字段标题后出现星号，只需使用一些简单的 javascript。）
2.  有两种不同的表单——一种带有必填字段，另一种没有——并使用 javascript 显示正确的表单。

对于您的要求，第一个解决方案显然要简单得多，但是如果您想做一些更复杂的事情，您可能更喜欢第二个选项。

# android - 何时执行自定义视图的初始滚动

> ID：15816906
> 
> 赞同：2
> 
> 时间：2013-04-04T16:39:06.607
> 
> 标签：android

我有一个自定义视图，其中 id 在完成充气时喜欢做一些滚动。问题在于，似乎在那一点上（`onFinishInflate()`）关于视图本身及其子项的不同 x 和 y 位置的计算还没有准备好给我正确的值，例如，当那明显错误时它给我 0。我什么时候可以得到正确的计算？

# scala - 如何返回达到基本案例的次数

> ID：15816910
> 
> 赞同：0
> 
> 时间：2013-04-04T16:39:22.010
> 
> 标签：scala

刚开始学习函数式编程，但我无法理解它。这就是我目前拥有的，我知道它为什么不起作用（因为 comb 是不可变的），但我似乎无法思考如何做我想做的事。

```
 def countChange(money: Int, coins: List[Int]): Int = {
    def rCountChange(money: Int, coins: List[Int], comb: Int): Int = {
      if (money >= coins(0)) rCountChange(money - coins(0), coins, comb)
      if (money == 0) comb + 1 //base case sequence found
      if (coins.isEmpty) comb //base case sequence not found
      rCountChange(money, coins tail, comb)
    }
    rCountChange(money, coins, 0)

  } 
```

我想过让一个数组成为一个数组，然后将其附加到它上面并对结果进行 .length 处理，但这似乎只是一种使用可变 var 的噱头方式。

如果我用 println("combination found") 替换 comb + 1 它会打印找到的正确数量的基本案例，所以我很确定它正确地遍历了所有可能性。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:18:36.050

为了提供一些背景知识，这个问题是针对 Odersky 在 Coursera 上的课程中的一项作业。我碰巧有通过他的测试的解决方案，并且想在不放弃完整实现的情况下给你一个提示。截至目前，Vlad 和 alex23 的答案都没有通过测试。

关键是在两个方向上递归：硬币方面和金钱方面（你在正确的轨道上），直到你遇到基本情况。除非达到基本案例，否则每个案例都应返回其重复次数的总和，而不仅仅是一个或另一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:46:35.967

您在`else`'s 的末尾缺少 ' `if`s，或者您可以使用`return`.

因为它是函数在遇到案例后会继续评估并且不会按照您的预期返回。在没有`return`关键字的情况下，Scala 将最后一个表达式的结果视为函数的一部分作为返回值，在您的情况下，它总是`rCountChange(money, coins tail, comb)`导致无限递归。

这里：

```
def countChange(money: Int, coins: List[Int]): Int = {
  def rCountChange(money: Int, coins: List[Int], comb: Int): Int = {
    if (money >= coins(0)) rCountChange(money - coins(0), coins, comb) 
    else if (money == 0) comb + 1 //base case sequence found
    else if (coins.isEmpty) comb //base case sequence not found
    else rCountChange(money, coins tail, comb)
  }
  rCountChange(money, coins, 0)

} 
```

或者：

```
def countChange(money: Int, coins: List[Int]): Int = {
  def rCountChange(money: Int, coins: List[Int], comb: Int): Int = {
    if (money >= coins(0)) return rCountChange(money - coins(0), coins, comb) 
    if (money == 0) return comb + 1 //base case sequence found
    if (coins.isEmpty) return comb //base case sequence not found
    rCountChange(money, coins tail, comb)
  }
  rCountChange(money, coins, 0)

} 
```

# jquery - 点击时jQuery自动增加数字

> ID：15816915
> 
> 赞同：0
> 
> 时间：2013-04-04T16:39:37.833
> 
> 标签：jquery

我想使用 +1 来增加系统中的投票数，我的想法是每个用户加 1 我使用此代码：

```
<a onclick="increase_n(1)" href="#">Add 1</a> 

<script>
function increase_n(size)
{
var size_ini=15;
var size_increase=size_ini+(++size);
$(".content").css("font-size",""+size_increase+"px")
}
</script> 
```

我不知道当我去点击其他时间时如何自动增加数字，它的想法是在每次点击中增加数字，一次点击给 11 其他点击给 12 其他 13 等

问候 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:43:26.330

如果我理解，您希望每次单击时将字体大小增加 1。你可以做这样的事情：

```
<a onclick="increase_n()" href="#">Add 1</a> 

<script>
function increase_n()
{
 var currentSize = parseInt($(".content").css("font-size"),10);
 $(".content").css("font-size",++currentSize+"px");
 }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:45:39.760

```
var size = 15;

function increase_n(increment)
{
    size += increment;
    $(".content").css("font-size", size + "px");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T16:48:39.103

给你的锚一个 id 或类：

```
<a id="anchor" href="#">Add 1</a> 
```

然后使用jQuery来增加你的`font-size`：

```
$("#anchor").click(function(){
    var fs = $('#anchor').css('font-size');
    $(this).css('font-size', (parseInt(fs, 10) + 1) + 'px');
}); 
```

演示：http: [//jsfiddle.net/CEqty/](http://jsfiddle.net/CEqty/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T16:53:37.050

如果您想设置徽章显示过程，当您单击时它将徽章值增加到 1，请使用此

```
 var size_ini = 15;
    function increase_n(size) {
        var size_increase = size_ini++;
        alert(size_increase);
        $(".content").html("<span>" + size_increase + "</span>")
    } 
```

你的 HTML 应该是这样的：

```
<a onclick="increase_n(1)" href="#">Add 1</a>
    <div class="content">

    </div> 
```

**在这里演示**

[http://jsfiddle.net/2LkYK/](http://jsfiddle.net/2LkYK/)

# java - 读取我从服务器 Java 发送的对象

> ID：15816916
> 
> 赞同：0
> 
> 时间：2013-04-04T16:39:40.793
> 
> 标签：java, sockets

您好我正在尝试将一个对象发送到服务器，然后在服务器收到它之后，从服务器获取相同的对象并将其作为字符串读取到客户端输出中。我最初发送的消息似乎有效，而之后的一切都没有，这是我的代码：

```
import java.io.*;
import java.net.*;

public class GUGLi {
    static Socket socket = null;
    static ObjectOutputStream out = null;
    static ObjectInputStream in = null;
    String host = "host";

       public static void main(String[] args) throws IOException {

    try {
        OpenPort();
        InfoSent();
        ReadInfo();

        String line;
        while ((line = in.toString()) != null) {
            System.out.println(line);
        }

    } catch (UnknownHostException e) {
        System.err.println("Don't know about host: " + "host");
        System.exit(1);
    } catch (IOException e) {
        System.err.println("Couldn't get I/O for "
                + "the connection to: " + "host");
        System.exit(1);
    in.close();
    socket.close();
    out.close();
     }
    }
public static void OpenPort() throws UnknownHostException, IOException{
        socket = new Socket ("host", 7879);
    }
public static void InfoSent()throws IOException {
            Student info = new Student (22, "Guglielmo", "Male",
                    "email", "#");
           out = new ObjectOutputStream(socket.getOutputStream());  
           out.writeObject(info);
           System.out.println("Sent: " + info);
           out.flush();
           }
 public static void ReadInfo()throws IOException {
         in = new ObjectInputStream(socket.getInputStream());

}
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T23:20:16.557

`line = in.toString()`不读行。它将 a`InputStream`转换为其字符串表示形式。您需要调用读取方法。如果您希望阅读您需要的行`BufferedInputStream.readLine()`。但是，如果您在同一个套接字上读取对象，则不能混合流/读取器类型，因此您应该在另一端读取`readUTF()`和写入。`writeUTF()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:10:55.557

您遇到的第一个问题是您没有像@EJP 所说的那样调用阅读方法，因此请参阅他的答案以了解更多详细信息。

编辑：我已删除有关无法在您的`InputStream`. 我认为您`socket`没有连接到另一个客户端是错误的，因为我认为它`String host = "host"`会连接到环回地址，并且我没有看到任何代码将数据发送回您的`InputStream`.

我建议你阅读一些教程来清除它。我建议您[有关套接字的 Java 教程](http://docs.oracle.com/javase/tutorial/networking/sockets/)有一个强大的基础。它会解释你需要的一切。

# angularjs - AngularJS 过滤嵌套对象

> ID：15816920
> 
> 赞同：1
> 
> 时间：2013-04-04T16:39:48.813
> 
> 标签：angularjs, angularjs-ng-repeat

我有一个对象数组，其中包含对象数组：

```
var content = [
  { 
    name: 'Foo',
    sub: [{ name: 'Bar' }, { name: 'Foobar' }] 
  },
  ...
] 
```

和一个模板：

```
<input ng-model="search" />

<div ng-repeat="item in content | filter:search>
   {{item.name}}
   <div ng-repeat="key in item">
      {{key.name}}
   </div>
</div> 
```

现在，我使用`filter`过滤器来搜索字符串匹配，但它只适用于第一个`ng-repeat`指令。如何将第二个指令包含在搜索过滤器中？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:42:59.083

您可以简单地将第二个过滤器表达式应用于您的另一个`ng-repeat`

`<div ng-repeat="key in item | filter:secondFilterExpression">`

请参阅此处的文档[http://docs.angularjs.org/api/ng.filter:filter](http://docs.angularjs.org/api/ng.filter:filter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:37:52.223

好的，在将对象通过控制器传递给模板之前，我已经将对象“展平”为一个简单的集合，因此我不必担心第二个`ng-repeat`循环。输出是

```
[{ name : 'foo' }, { name : 'bar' }, { name : 'foobar' }] 
```

# ios - 锁定屏幕时音频队列（具有高采样率）将遭受音频上限

> ID：15816922
> 
> 赞同：0
> 
> 时间：2013-04-04T16:39:56.747
> 
> 标签：ios, background, audio-streaming, multitasking

伙计们：

今天，我正在调试我的流媒体网络广播应用程序。

我使用音频队列服务播放从 FFMPEG 解码的 PCM 缓冲区。

为了在锁定屏幕时保持播放行为，我做了以下两件事：

1)在info.plist中添加UIBackGroundMode

2）使用 AVAudioSession 设置“AVAudioSessionCategoryPlayback”

完成这些操作后，我在iPhone上运行该应用程序，当我按下屏幕锁定键进入睡眠模式时，它确实一直在播放声音

但是，声音变得不稳定，具有显着的音频上限。

我用不同的采样率测试了音频流（在屏幕锁定模式下）：

1）在32000，可以检测到音频上限

2）在 37500，音频帽太重，无法分辨音频声音

3）在41000，音频完全终止

有人知道这个问题会发生什么吗？

似乎iOS在切换到屏幕锁定模式时降低了处理音频队列数据的采样率？

我应该配置一些东西以在屏幕锁定时保持 iPhone 的采样率吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:30:12.490

我已经用 Fritz Menzer 和他以前的问题的启示解决了这个问题。

[屏幕锁定时iOS背景音频停止](https://stackoverflow.com/questions/11085007/ios-background-audio-stops-when-screen-is-locked?rq=1)

他用一个重要的总结回答了自己的问题：

“事实证明，如果它应该在屏幕关闭时运行，音频缓冲区的大小必须足够大”

因此，我通过在每个缓冲区处理周期增加发送到音频队列的数据包数量来调整我的代码（最初为 1，我将其调整为 16）。请看下面的代码：

```
 static OSStatus AqCreateAudioQueue(AQPlayerState *pAqData)
    {
        OSStatus result;
        bool isFormatVBR;

        result = AudioQueueNewOutput(&(pAqData->mDataFormat),
                                     HandleOutputBuffer,
                                     pAqData,
                                     CFRunLoopGetCurrent(),
                                     kCFRunLoopCommonModes,
                                     0,
                                     &(pAqData->mQueue));

        pAqData->bufferByteSize = AUDIO_BUFFER_SIZE;
        //pAqData->mNumPacketsToRead = 1; 
        //one packet in each buffer-handling cycle is not enough
        pAqData->mNumPacketsToRead = PACKETS_TO_READ;
        //I defined PACKETS_TO_READ as 16

        ...
    } 
```

调整后，我再次运行我的应用程序，它确实有效！锁定屏幕时音频声音稳定，没有任何音频间隙。

谢谢，弗里茨门泽！！

# single-page-application - HTTP 错误 403.14 - 禁止 Web 服务器配置为不列出此目录的内容

> ID：15816924
> 
> 赞同：9
> 
> 时间：2013-04-04T16:39:59.540
> 
> 标签：single-page-application, durandal, hottowel

在完成 Pluralsight 上的 John Papa 课程后——顺便说一句**，这太棒了！！！**)

我现在正在创建我的第一个 SPA。我来自桌面应用程序开发人员背景，如果这个问题是新手，请原谅！

当我加载 SPA 而不是看到启动屏幕然后是主屏幕时，我收到了以下错误消息：

HTTP 错误 403.14 - 禁止 Web 服务器配置为不列出此目录的内容。最可能的原因是：

> 未为请求的 URL 配置默认文档，并且未在服务器上启用目录浏览。

任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-10-28T08:40:42.993

1.打开IIS管理器。

2.通过右键单击“默认网站”并选择“添加应用程序”来添加网站。

3.输入任何名称作为别名类型并在物理路径中加载该网站，然后单击确定。

4.然后转到该加载网站的功能视图并双击“目录浏览”。

5.  单击“操作”工作空间并将“禁用”状态更改为“启用”状态。

6.然后刷新默认网站。

7.打开 Visual Studio 并转到该网站。它将要求重新加载，然后单击“是”。

8.它将在web.config文件中添加以下代码。

```
 <system.webServer>

    <directoryBrowse enabled="true" />

 </system.webServer> 
```

9.现在运行，看到错误会消失。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-08T18:26:19.143

转到控制面板--> 程序和功能--> 打开或关闭寡妇功能（在窗口的左侧）。

> Windows features 框会在此弹出：IIS --> WWW 服务 --> Common HTTP Request --> Directory Browsing (Enable this)。

单击确定。

在你的`web.config`文件中 - 添加这个，

```
<system.webServer>
  <defaultDocument enabled="true" />
</system.webServer> 
```

并保存。

它将开始工作。在遇到一些初始故障后，它对我有用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-01-28T09:43:57.117

我能够使用此站点的答案解决此问题：[https ://devstuffs.wordpress.com/2012/02/29/how-to-fix-http-error-403-14-forbidden-the-web-server -is-configured-to-not-list-the-contents-of-this-directory/](https://devstuffs.wordpress.com/2012/02/29/how-to-fix-http-error-403-14-forbidden-the-web-server-is-configured-to-not-list-the-contents-of-this-directory/)

> 当您在 IIS 7+ 上运行 MVC 2+ 时会发生此错误，这是因为 ASP.NET 4 未在 IIS 中注册。就我而言，我正在创建一个 MVC 3 项目并将其托管在 IIS 7.5 上。
> 
> 要修复它，请确保您已安装 MVC 2 或更高版本和 .Net Framework 4.0，然后以管理员身份运行命令提示符并键入以下行：
> 
> 32 位 (x86)
> 
> %windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -ir
> 
> 64 位 (x64)
> 
> %windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -ir

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-25T07:04:53.727

这也是出现此错误的原因之一。

新手程序员忘记提及起始页。右键单击要在应用程序运行时首先显示的任何表单，然后在下拉菜单中找到**设置为起始页。**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T15:34:08.780

编辑您的 web.config 并添加 customErrors 部分，以显示来自您的 Web 服务器的详细错误。使用模式=“关闭” [http://msdn.microsoft.com/en-us/library/h0hfz6fc%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/h0hfz6fc%28v=vs.71%29.aspx)

```
 <configuration>
        <system.web>
           <customErrors mode="Off">         
           </customErrors>
        </system.web>
      </configuration> 
```

另一种选择是尝试在单独的浏览器中运行 SPA，例如直接键入 url 的 Chrome，而不是在 Visual Studio 调试器中运行 SPA 应用程序。URL 应该类似于“localhost:13753”。检查开发服务器的端口号。它会有所不同。

然后按 F12 打开开发者工具。

按 Ctrl+R 刷新并查看网络选项卡。您通常可以找到有关错误及其原因的更多信息。

# c++ - C / C ++：将0分配给无符号长变量或将变量与自身异或是否更快？

> ID：15816925
> 
> 赞同：9
> 
> 时间：2013-04-04T16:40:01.030
> 
> 标签：c++, c, performance, variable-assignment, xor

我意识到差异可能可以忽略不计，但是在尝试将无符号长整数归零时哪个更有效？

```
unsigned long x;

...

x=0;

--OR--

x^=x; 
```

泰勒

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-04T16:42:38.710

如果你要实现一个编译器，你会怎么做？实际上，您会为两者选择最快的实现。由于两者是相等的，因此这种最快的实现对两者都是相同的。

换句话说，如果您启用优化，公元前 5000 年之后发布的任何编译器都将为两者生成相同的汇编`x = 0`代码`x ^= x`。这意味着它们同样快。

这不仅适用于赋值/异或，还适用于[乘法](https://stackoverflow.com/questions/10681375/which-is-better-option-to-use-for-dividing-an-integer-number-by-2)等算法。**表达您的意图并让编译器对其进行优化。**相信我，编译器比你更擅长优化。

换句话说，编写可读的代码并使用`x = 0;`.

* * *

哦，顺便说一句，按位异或一个未初始化的整数本身是未定义的行为，一个好的编译器应该优化整个事情。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-04T16:43:42.987

首先，如果变量没有被赋值，从技术上讲，它是“未定义的行为”，除了赋值之外的任何事情。

其次，在过去 15 到 20 年生产的处理器上，对它自身进行 XOR 不太可能更快，因为它需要额外的读取。很长一段时间以前它可能更快（由于是更短的代码），但实际上，我相信即使这样也是错误的。

编辑：我应该指出，在现代处理器中，异或寄存器可能会更快/更紧凑，使其为零。但是如果我们假设我们不知道是否`x`在寄存器中，那么我们也不应该让编译器更复杂地确定我们实际在做什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T18:23:44.153

为什么要推测编译器的作用？让我们试试吧！

下面是一些测试代码：

```
void fzero()
{
   unsigned long x;

   x = 0;
}

void fxor()
{
   unsigned long x;

   x ^= x;
}

int main()
{
   fzero();
   fxor();
} 
```

现在让我们看看生成的机器代码：

```
; 10   :    unsigned long x;
; 11   : 
; 12   :    x ^= x;
; 13   : }

00000   c2 00 00     ret     0

; 3    :    unsigned long x;
; 4    : 
; 5    :    x = 0;
; 6    : }

00000   c2 00 00     ret     0

PUBLIC  main
; Function compile flags: /Ogtpy
;   COMDAT main
_TEXT   SEGMENT
main    PROC                        ; COMDAT

; 18   :    fzero();
; 19   :    fxor();
; 20   : }

  00000 33 c0        xor     eax, eax
  00002 c3       ret     0
main    ENDP 
```

哦，看！它们的速度同样快，都正好是 0 ns。

# c - 位操作：清除位范围

> ID：15816927
> 
> 赞同：13
> 
> 时间：2013-04-04T16:40:04.123
> 
> 标签：c, bit-manipulation

我正在准备使用 Gayle Laakman McDowell 的文本“Cracking the Coding Interview”进行面试。在涉及位操作的部分中，提供了两个函数，但我不太明白它是如何工作的。

```
// To clear all bits from the most significant bit through i (inclusive), we do:
int clearMSBthroughI(int num, int i) {
    int mask = (1 << i) - 1;
    return num & mask;
}

// To clear all bits from i through 0 (inclusive), we do:
int clearBitsIthrough0(int num, int i) {
    int mask = ~(((1 << (i+1)) - 1);
    return num & mask;
} 
```

在第一个函数中，我`(1 << i)`当然知道做什么，但我不确定从这个值中减去 1 会如何影响位（即`(1 << i) - 1)`）。

我对第二个功能基本上有同样的困惑。减 1 有什么影响，特别是对位有什么影响`((1 << (i+1))`？据我了解，`((1 << (i+1))`结果是一个“on”位，向左移动 i+1 次——将其减去 1 有什么作用？

谢谢，我希望这很清楚！如果还有其他问题，请告诉我。

对于那些碰巧有我引用的文本的人，它在第 5 版的第 91 页。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-04T16:44:53.523

让我们假设`i= 5`

`(1 << i)`给你`0100000`1 放在第 6 位位置

`1`所以现在如果我们从中减去，那么我们得到`0011111`==> 只有第 5 位被设置为`1`，其他的被设置为`0`，这就是我们得到掩码的方式

结论：为了`i` 给`(1 << i) -1`你一个掩码，第`i`一个位设置为`1`，其他位设置为`0`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-04T16:53:20.693

对于第一个问题：

让我们说`i = 5`

```
(1 << i )    = 0010 0000 = 32 in base 10
(1 << i ) -1 = 0001 1111 = 31 
```

因此，`&`带有此掩码的 a 将最高有效位清除为 i，因为所有位位置上方（包括索引）`i`都将为 0，而任何下面的位都将为 1。

对于第二个问题：

再说一次`i = 5`

```
 (1 << (i + 1))      = 0100 0000 = 64 in base 10
  (1 << (i + 1)) - 1  = 0011 1111 = 63
~((1 << (i + 1)) - 1) = 1100 0000 = 192 
```

所以`&`带有这个掩码的 a 清除位到索引`i`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-04T16:51:26.873

**第一个功能：**

让我们举个`i=3`例子。`(1 << i)`将产生`1000`二进制。从中减去 1 会得到`0111`二进制（即 i 个 1）。与数字相加将清除除最后 i 位之外的所有位，就像函数描述中所说的那样。

**第二个功能：**

对于第二个功能，同样适用。如果`i=3`，那么`((i << (i+1)) - 1)`给我们`01111`。波浪号反转位，所以我们有`10000`. 这样做很重要，而不是仅仅`i`向左移动位，因为在我们的掩码之前可能有任意数量的有效位（所以`10000`可能是 8 位长，看起来像`11110000`。这就是波浪号得到的，只是为了清楚） . 然后，该数字与最终结果的掩码进行“与”运算

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-04T16:58:57.350

// 要清除从最高有效位到 i（包括）的所有位，我们这样做：

```
int clearMSBthroughI(int num, int i) {
    int mask = (1 << i) - 1;
    return num & mask;
}

Take the example of i = 3
1<<3 gives you 0x00001000 
(1<<3)-1 gives you 0x00000111
num & (1<<i)-1 will clear the bits from msb to i 
```

// 要清除从 i 到 0（含）的所有位，我们这样做：

```
int clearBitsIthrough0(int num, int i) {
    int mask = ~(((1 << (i+1)) - 1);
    return num & mask;
} 
```

i = 3 的相同示例为您提供

```
1 <<(3+1) =0x00010000
1 <<(3+1)-1 = 0x00001111
mask =~(1<<(3+1)-1) = 0x11110000
num & mask will cleaR the bits from 0 throuh i 
```

# java - Android中多边形内点的测试

> ID：15816928
> 
> 赞同：12
> 
> 时间：2013-04-04T16:40:07.300
> 
> 标签：java, android, polygon, point

前几天我在 Java 中做了一个类来计算 a`point(X,Y)`是否在多边形内。（`X`并且`Y`是`double`，因为将是地理坐标）。

我知道Java有类`Polygon`，但我不得不使用`Path2D`and `Point2D`，因为`Polygon`不允许`double`'s，只允许整数:(

一旦我完成了多边形`Path2D`，我就使用了方法`contains`（`Path2D`拥有它），我的问题就解决了。

但是现在，我想导入到安卓，问题就出在这里，因为`Path2D`需要导入：

```
import java.awt.geom.Path2D;
import java.awt.geom.Point2D; 
```

并且在Android中不存在awt，所以我不能使用。

那么，有没有类似`Path2D`had`contains`方法的类呢？还是我必须自己计算？

这是我在 Java 中使用的方法`Path2D`：

```
private void ConstructPolygon(Vector<Point2D> coodinates)
{       
    this.polygon.moveTo(coodinates.get(0).getX(), coodinates.get(0).getY());        

    //System.out.println(coodinates.get(0).getX() + "   " + coodinates.get(0).getY());
    //System.out.println("asda");

    for(int i = 1; i < this.num_points; i++)
    {
        //System.out.println(coodinates.get(i).getX() + "   " + coodinates.get(i).getY());
        this.polygon.lineTo(coodinates.get(i).getX(), coodinates.get(i).getY());
    }
    this.polygon.closePath();
}
public boolean InsideCity(Point2D punto)
{
    return this.polygon.contains(punto);                
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-04T16:46:02.047

您可以为此使用我的简单库：[https](https://github.com/snatik/polygon-contains-point) ://github.com/snatik/polygon-contains-point 。

准备多边形：

```
Polygon polygon = Polygon.Builder()
    .addVertex(new Point(1, 3))
    .addVertex(new Point(2, 8))
    .addVertex(new Point(5, 4))
    .addVertex(new Point(5, 9))
    .addVertex(new Point(7, 5))
    .addVertex(new Point(6, 1))
    .addVertex(new Point(3, 1))
    .build(); 
```

并检查该点是否在多边形内：

```
Point point = new Point(4.5f, 7);
boolean contains = polygon.contains(point); 
```

它适用于浮点类型和包含孔的多边形:)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-07-09T09:03:30.640

您可以使用 Google 地图 PolyUtil：

```
import com.google.maps.android.PolyUtil;

boolean inside = PolyUtil.containsLocation(new LatLng(...), poly, true); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-09-14T12:54:31.603

这是我在Android中的做法。它基于这个java程序（光线投射算法）： [https ://gis.stackexchange.com/questions/42879/check-if-lat-long-point-is-within-a-set-of-polygons-using -谷歌地图/46720#46720](https://gis.stackexchange.com/questions/42879/check-if-lat-long-point-is-within-a-set-of-polygons-using-google-maps/46720#46720)

```
 public boolean pointInPolygon(LatLng point, Polygon polygon) {
        // ray casting alogrithm http://rosettacode.org/wiki/Ray-casting_algorithm
        int crossings = 0;
        List<LatLng> path = polygon.getPoints();
        path.remove(path.size()-1); //remove the last point that is added automatically by getPoints()

        // for each edge
        for (int i=0; i < path.size(); i++) {
            LatLng a = path.get(i);
            int j = i + 1;
            //to close the last edge, you have to take the first point of your polygon
            if (j >= path.size()) {
                j = 0;
            }
            LatLng b = path.get(j);
            if (rayCrossesSegment(point, a, b)) {
                crossings++;
            }
        }

        // odd number of crossings?
        return (crossings % 2 == 1);
     }

    public boolean rayCrossesSegment(LatLng point, LatLng a,LatLng b) {
                // Ray Casting algorithm checks, for each segment, if the point is 1) to the left of the segment and 2) not above nor below the segment. If these two conditions are met, it returns true
                double px = point.longitude,
                py = point.latitude,
                ax = a.longitude,
                ay = a.latitude,
                bx = b.longitude,
                by = b.latitude;
            if (ay > by) {
                ax = b.longitude;
                ay = b.latitude;
                bx = a.longitude;
                by = a.latitude;
            }
            // alter longitude to cater for 180 degree crossings
            if (px < 0 || ax <0 || bx <0) { px += 360; ax+=360; bx+=360; }
            // if the point has the same latitude as a or b, increase slightly py
            if (py == ay || py == by) py += 0.00000001;

            // if the point is above, below or to the right of the segment, it returns false
            if ((py > by || py < ay) || (px > Math.max(ax, bx))){ 
                return false;
            }
            // if the point is not above, below or to the right and is to the left, return true
            else if (px < Math.min(ax, bx)){ 
                return true;
            }
            // if the two above conditions are not met, you have to compare the slope of segment [a,b] (the red one here) and segment [a,p] (the blue one here) to see if your point is to the left of segment [a,b] or not
            else {
                double red = (ax != bx) ? ((by - ay) / (bx - ax)) : Double.POSITIVE_INFINITY;
                double blue = (ax != px) ? ((py - ay) / (px - ax)) : Double.POSITIVE_INFINITY;
                return (blue >= red);
            }

     } 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-10T16:23:23.643

对不起@sromku 我问过自己（我从来没有用过这种东西）

如果有人有同样的问题，我就是这样解决的

```
Builder poly2 = new Polygon.Builder();
    for(int i = 0; i< xpoints.length;i++){
        poly2.addVertex(new Point(xpoints[i],ypoints[i]));
    }
    Polygon polygon2 = poly2.build(); 
```

# java - 在 GWT 中下载时使用 servlet 发送字符串

> ID：15816929
> 
> 赞同：1
> 
> 时间：2013-04-04T16:40:08.237
> 
> 标签：java, gwt, servlets, gxt, gwt-rpc

我正在使用 GWT

我尝试使用 Servlet 下载文件。

我`fileId`在客户端。

我已经准备好我的 servlet 来查找使用的文件`fileId`并将其发送回客户端。

但是在客户端。我不明白如何发送这个 id 并在服务器端检索它以使用它。

```
String fileId = "aValidId"
Window.open(GWT.getHostPageBaseURL() + "DownloadFileServlet", "", ""); 
```

任何人都可以帮我做到这一点。

如果这个问题是重复的，请给我一个链接（我找不到它）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:55:59.817

您可以简单地将参数附加到 servlet 路径，如下所示

```
String fileId = "aValidId"
Window.open(GWT.getHostPageBaseURL() +
                          "DownloadFileServlet?fileId ="+fileId , "", ""); 
```

并`servlet`获取如下参数：

```
String myParam = req.getParameter("myparam"); 
```

请通过以下链接进行编码和其他技术..

[http://perishablepress.com/how-to-write-valid-url-query-string-parameters/](http://perishablepress.com/how-to-write-valid-url-query-string-parameters/)

# ruby - sqllite 数据库中的关系没有添加外键

> ID：15816932
> 
> 赞同：0
> 
> 时间：2013-04-04T16:40:13.310
> 
> 标签：ruby, ruby-on-rails-3

我想创建从 Post 到 User 模型的关系。所以我创建：

```
class Post < ActiveRecord::Base
attr_accessible :text, :title, :image, :user_id
has_many :comments
belongs_to :user
mount_uploader :image, ImageUploader
end 
```

在 User.rb 中：

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable
  attr_accessible :email, :password, :password_confirmation, :remember_me
  has_many :posts
end 
```

然后我将文件添加到数据库迁移：

```
class AddUserIdToPost < ActiveRecord::Migration
  def change
    add_column :posts, :user_id, :integer
  end
end 
```

并通过 rake db:migration 进行迁移。

当我添加新帖子时，user_id（在数据库中）的值为空，但列存在。

Post_Controller 的一部分：

```
 def create
    @post = Post.new(params[:post])

    respond_to do |format|
      if @post.save
        format.html { redirect_to @post, notice: 'Post was successfully created.' }
        format.json { render json: @post, status: :created, location: @post }
      else
        format.html { render action: "new" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end 
```

我应该如何处理@post = Post.new(params[:post])？我觉得一切都很好...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:23:49.177

```
attr_accessible :text, :title, :image, :user_id 
```

或者，而不是 attr_accessible，只需执行以下操作：

```
attr_protected 
```

# windows-phone-7 - Dotfuscator 似乎不遵守重命名排除 RegEx

> ID：15816936
> 
> 赞同：1
> 
> 时间：2013-04-04T16:40:37.100
> 
> 标签：windows-phone-7, obfuscation, dotfuscator

我们决定使用 Dotfuscator 来混淆我们的代码。我们的应用程序是 Windows Phone 应用程序，我们使用的是 Dotfuscator Windows Phone Edition 版本 4.9.7000.29303。我们了解到 System.Reflection.ObfuscationAttribute 类在 Silverlight 中不可用，因此无法对某些需要排除的类型使用排除属性。我们现在计划在 dotfuscator 中使用 Rename>Exclude 选项卡并排除带有某些特定后缀的类型。在实施之前，我们创建了一个试验项目并对其进行了混淆测试。我们在测试中发现输出不符合执行规则。虽然预览窗口显示了预期的结果，但输出仍然包括那些应该被排除的类型。请参阅下面的 Dotfuscator 窗口的屏幕截图。箭头左侧的预览窗口正确显示了将从混淆中排除的阴影类型，但在箭头的右侧，相同的输出仍然混淆了这些类型。怎么了？ ![预览窗口显示正确的结果，但输出不正确](https://i.stack.imgur.com/ALwMa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T20:35:05.367

我不完全理解你想用正则表达式完成什么，但就使用属性来控制混淆而言，你可以包含一个库。

要包含的库通常位于

```
C:\Program Files(x86)\PreEmptive Solutions\Dotfuscator (version and edition)\Attributes\Windows Phone\PreEmptive.ObfuscationAttributes.dll 
```

这是一个关于如何从重命名中排除某些内容的示例：

```
[Obfuscation(Feature = "renaming", Exclude = true)]
public int Foo{get;set;} 
```

[您可以在此链接](http://www.preemptive.com/images/stories/dotfuscator_documentation/Dotfuscator/Declarative_Obfuscation_using_Custom_Attributes.html)中找到有关使用属性控制混淆的更多详细信息，并在[此处](http://www.preemptive.com/images/stories/dotfuscator_documentation/Dotfuscator/webframe.html)提供一般用户指南

如果您想改用正则表达式路线，您还可以查看创建[自定义规则](http://www.preemptive.com/images/stories/dotfuscator_documentation/Dotfuscator/Creating_Custom_Rules.html)的文档。您必须为我提供更多信息，以了解您要为我做什么才能提供帮助。鉴于您的屏幕截图，一切似乎都是我所期望的。

# php - PHP 使用东部时区的 CURRENT_TIMESTAMP

> ID：15816937
> 
> 赞同：0
> 
> 时间：2013-04-04T16:40:40.703
> 
> 标签：php, mysql, timezone

我有一个看起来像这样的查询：

```
$query = "INSERT INTO  `SmsServ`.`SmsReceived` (
    `Id` ,
    `Body` ,
    `DateReceived`
)
VALUES ( NULL , "Foo" , CURRENT_TIMESTAMP);" 
```

该查询的问题是我希望将东部时间作为时间戳。我试过打电话：

```
date_default_timezone_set("America/New_York"); 
```

在我的 php 脚本开始时，但这仍然给出了不正确的时间戳。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T16:52:46.567

您确实更改了 php 时区。所以尝试更改 mysql 时区（php 和 mysql 的默认时区彼此不同）：

mysql> SET GLOBAL time_zone = 'America/New_York';

mysql> SET SESSION time_zone = 'America/New_York';

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:45:03.043

`CURRENT_TIMESTAMP`在这种情况下不是由 PHP 生成的，而是由 MySQL 生成的。您的查询要求 MySQL 根据 MySQL 的服务器时间设置当前时间戳。因此，您需要将 MySQL 配置为使用东部时区，而不是 PHP。

您可能会考虑的一件事是仅将 GMT 用于数据库时间戳，并在应用程序中进行时区和夏令时转换。这样，您就不会在数据库中遇到混合区域时间戳的问题。当然，如果您认为在您的应用程序中不需要使用东部时区以外的任何时间，那么这对您来说可能并不重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T16:49:38.033

Mysql 不关心使用哪个时区..

根据[文档](http://dev.mysql.com/doc/refman/4.1/en/time-zone-support.html)，您可以设置要使用的时区....如果您使用的是 MySQL 4.1.3 或 +

```
SET GLOBAL time_zone = timezone

 or

SET time_zone = timezone 
```

注意：默认情况下不填充 TIMEZONE 设置。您需要在``mysql`database 下填充与时区相关的表。o只有在设置之后，您才能设置时区。

# perl - 将制表符分隔文件解析为数组

> ID：15816938
> 
> 赞同：0
> 
> 时间：2013-04-04T16:40:41.380
> 
> 标签：perl

我正在尝试以可以访问一行中每一列的方式将 CSV 读入数组。但是，当我运行以下代码以从每一行打印特定列时，它只输出空行。

```
#set command line arguments
my ($infi, $outdir, $idcol) = @ARGV;

#lead file of data to get annotations for
open FILE, "<", $infi or die "Can't read file '$infi' [$!]\n";
my @data;
foreach my $row (<FILE>){
    chomp $row;
    my @cells = split /\t/, $row;
    push @data, @cells;
}

#fetch genes
foreach (@data){
    print "@_[$idcol]\n";
#    print $geneadaptor->fetch_by_dbID($_[$idcol]);
} 
```

测试输入为

```
a       b       c
1       2       3
d       e       f
4       5       6 
```

我认为这里的问题不是加载文件，而是处理结果数组。我应该如何处理这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T16:45:11.707

首先，您需要`push @data, \@cells`，否则您会将所有字段连接到一个列表中。

然后你需要在第二个`for`循环中使用循环值。

```
foreach (@data){
    print $_->[$idcol], "\n";
} 
```

`@_`是与此处完全不同的变量，`$_`并且此处未填充。

您还应该考虑使用

```
while (my $row = <FILE>) { ... } 
```

阅读您的文件。它一次只读取一行，而`for`在迭代之前将整个文件读入行列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:11:12.027

我建议避免直接解析 CSV 文件并使用[Text::CSV](http://search.cpan.org/perldoc?Text%3a%3aCSV)模块。

```
use Text::CSV;
use Carp;

#set command line arguments
my ($infi, $outdir, $idcol) = @ARGV;

my $csv = Text::CSV->new({
  sep_char => "\t"
});

open(my $fh, "<:encoding(UTF-8)", $infi) || croak "can't open $infi: $!";

# Uncomment if you need to skip header line
# <$fh>;

while (<$fh>) {
    if ($csv->parse($_)) {
        my @columns = $csv->fields();
        print "$columns[0]\t$columns[1]\t$columns[2]\n";
    } else {
        my $err = $csv->error_input;
        print "Failed to parse line: $err";
    }
}
close $fh; 
```

# .net - 可以在 .NET 程序集中找到特定的字节数组吗？

> ID：15816941
> 
> 赞同：0
> 
> 时间：2013-04-04T16:40:50.493
> 
> 标签：.net, security, .net-assembly, cil, decompiling

某人反编译/反汇编/反映在发布模式下编译的 .NET 程序集以查找特定字节数组的内容有多容易？

实现一个依赖于特定密钥（作为字节数组存储在 C# 代码中）的安全机制是一个好主意吗？

我尝试了 .NET 反射器，但没有找到我自己的安全密钥，但我想知道这些信息是否“足够安全”。

有没有比集会更安全的地方来储存秘密？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:43:11.097

不要将机密存储在您不信任的人可以访问的 .Net 程序集中。反编译程序集是微不足道的，有许多工具可以做到这一点。很容易找出你放在那里的任何秘密

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T18:00:23.920

我同意其他人的观点，即从程序集中获取秘密字节数组很简单。

但是有一个更普遍的原则在起作用：如果您的安全性取决于某个密钥的保密性，那么您确实应该确保该密钥永远不会出现在可能受到威胁的计算机上。

如果您使用本机 C++ 和/或使用某种混淆或类似的东西，这并不重要。当某个密钥在您不信任的用户的计算机上时，您应该表现得好像该用户知道该密钥。

换句话说：此类密钥的唯一安全位置是在您控制且您信任其安全性的服务器上。

# php - Google Plus PHP API 与其他 API 文件冲突

> ID：15816943
> 
> 赞同：1
> 
> 时间：2013-04-04T16:41:04.210
> 
> 标签：php, api, include, google-plus, require-once

我有一个页面，它接受用户输入的字符串并将其用作许多搜索 API 的查询字符串。我的问题是我自己的 Google+ API 可以正常工作。我还可以让 YouTube 数据 API 自行运行。但是，当我将代码放在同一页面上时，两者都会中断。

我已将问题缩小到如果我 include() 或 require() google-api-php-client/src/contrib/ 目录中的任何其他 .php 文件，Google_PlusService.php 无法处理它。

如果我 include() 或 require() 任何其他 .php 文件，Google_YouTubeService.php 可以很好地应对。Google_PlusService.php 不能。

即使我不使用这些其他 API，只使用 include() 或 require()，它仍然会中断。

我正处于精神错乱的边缘，因此非常欢迎任何帮助。

```
<?php
/**
 * The main template file.
 *
 * This is the most generic template file in a WordPress theme
 * and one of the two required files for a theme (the other being style.css).
 * It is used to display a page when nothing more specific matches a query.
 * For example, it puts together the home page when no home.php file exists.
 *
 * Learn more: http://codex.wordpress.org/Template_Hierarchy
 *
 * @package WordPress
 * @subpackage Twenty_Twelve
 * @since Twenty Twelve 1.0
 */

get_header(); 

?>

    <script type='text/javascript'>
        function validateSearchTerm() {
            var name = $('input[name=brand_name]').val();
            var error = 0;

            if(name.length == 0)
            {
                document.getElementById('brand-name-empty').style.display = "block";
                error = 1;
            }       
            else {
                document.getElementById('brand-name-empty').style.display = "none";
            }   

            return error;
        }
    </script>

    <div id="primary" class="site-content">
        <div id="content" role="main">
            <div class="-input-block">
                <h2>BRAND</h2>
                <form id="one-brand" action="<?php echo $_SERVER['PHP_SELF']; ?>" onsubmit="return validateSearchTerm();" method="post">
                    <label for="brand_name">SEARCH FOR:</label>
                    <input class="brand_name" type="text" name="brand_name" value=""/>
                    <span id="brand-name-empty" style="display:none;">Please enter a search term.</span><br/>

                    <input class="brand_submit" type="submit" name="brand_submit" value="SEARCH"/>
                </form>
            </div>          

            <?php   

                function youtubeandgoogleplusSearch($searchstring) {

                    require_once("google-api-php-client/src/Google_Client.php");        
                    require_once("google-api-php-client/src/contrib/Google_YouTubeService.php");
                    require_once("google-api-php-client/src/contrib/Google_PlusService.php");
                    //IF I UNCOMMENT THE CALENDARSERVICE LINE AND COMMENT OUT THE PLUSSERVICE LINE THEN YOUTUBE WILL WORK OK. 
                    //IF I UNCOMMENT THE CALENDARSERVICE LINE AND COMMENT OUT THE YOUTUBESERVICE LINE THEN PLUSSERVICE WON'T WORK. 
                    //require_once("google-api-php-client/src/contrib/Google_CalendarService.php");

                    $DEVELOPER_KEY = '{MY API KEY}';

                    $client = new Google_Client();

                    $client->setApplicationName('{MY APPLICATION NAME}');
                    $client->setClientId('{MY CLIENT ID FOR A PROJECT WITH GOOGLE + AND YOUTUBE ENABLED}');
                    $client->setClientSecret('{MY CLIENT SECRET}');
                    $client->setRedirectUri('{MY REDIRECT URI}');

                    $client->setDeveloperKey($DEVELOPER_KEY);

                    $youtube = new Google_YoutubeService($client);

                    echo '<h2>YOUTUBE</h2>';
                    try {
                        $youtubeSearchResponse = $youtube->search->listSearch('id,snippet', array('q' => $searchstring, 'type' => 'channel', 'maxResults' => '10'));
                        $channels = '';
                        $count = 0;

                        foreach ($youtubeSearchResponse['items'] as $searchResult) {
                            $snippet = $searchResult['snippet'];

                            $valuename = $snippet['title'];
                            $valueid = $snippet['channelId'];
                            $valuelink = 'http://www.youtube.com/user/'.$valuename;

                            echo '<input class="youtube_account" type="radio" name="youtube_account" value="'.$valuelink.'"/>
                                <span><a href="'.$valuelink.'" target="blank">http://www.youtube.com/user/'.$valuename.'</a></span><br/>';

                        }
                    }
                    catch (Google_ServiceException $e) {
                        echo sprintf('<p>A service error occurred: <code>%s</code></p>', htmlspecialchars($e->getMessage()));
                    } 
                    catch (Google_Exception $e) {
                        echo sprintf('<p>An client error occurred: <code>%s</code></p>', htmlspecialchars($e->getMessage()));
                    }

                    $googleplus = new Google_PlusService($client);

                    echo '<h2>GOOGLE +</h2>';
                    try {
                        $googleplusSearchResponse = $googleplus->people->search($searchstring,array('maxResults' => 10));

                        foreach ($googleplusSearchResponse['items'] as $googleplusSearchResult) {                               
                            $googleplusValuename = $googleplusSearchResult['displayName'];
                            $googleplusValueid = $googleplusSearchResult['id'];
                            $googleplusValuelink =  $googleplusSearchResult['url'];

                            echo '<input class="googleplus_account" type="radio" name="googleplus_account" value="'.$googleplusValuelink.'"/>
                            <span><a href="'.$googleplusValuelink.'" target="blank">'.$googleplusValuelink.'</a></span><br/>';
                        }
                    }
                    catch (Google_ServiceException $e) {
                        echo sprintf('<p>A service error occurred: <code>%s</code></p>', htmlspecialchars($e->getMessage()));
                    } 
                    catch (Google_Exception $e) {
                        echo sprintf('<p>An client error occurred: <code>%s</code></p>', htmlspecialchars($e->getMessage()));
                    }

                }

                if($_POST['brand_submit']){

                    $name = $_POST['brand_name'];
                    $name = str_replace(' ', '%20', $name);
                    $site = $_POST['brand_site'];

                    echo '<form id="one-twitter" action="" onsubmit="" method="post">';

                    youtubeandgoogleplusSearch($name);

                    echo '</form>';
                }
                else{
                    //echo 'not set';
                }
            ?>

        </div><!-- #content -->
    </div><!-- #primary -->

<?php get_footer(); ?> 
```

更多信息：即使我删除了除了 require_once() 语句之外的所有内容，这将起作用：

```
function youtubeandgoogleplusSearch($searchstring) {
    require_once("google-api-php-client/src/Google_Client.php");
    require_once("google-api-php-client/src/contrib/Google_PlusService.php");
    //require_once("google-api-php-client/src/contrib/Google_YouTubeService.php");
    echo 'JUST TESTING';
} 
```

这不会：

```
function youtubeandgoogleplusSearch($searchstring) {
    require_once("google-api-php-client/src/Google_Client.php");
    require_once("google-api-php-client/src/contrib/Google_PlusService.php");
    require_once("google-api-php-client/src/contrib/Google_YouTubeService.php");
    echo 'JUST TESTING';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:40:41.007

因此，对于其他为此苦恼数小时的人来说，解决方案只是在 Google_PlusService.php 和 Google_YouTubeService.php 中存在重复的类名。

我想现在事后看来很明显，我只是认为我可以直接从谷歌下载的任何东西都不会那么愚蠢！

我的解决方案是用 Google_PlusService.php 中的 Google_GooglePlusActivitiesServiceResource 和 Google_YouTubeService.php 中的 Google_YoutubeActivitiesServiceResource 查找并替换 Google_ActivitiesServiceResource。

还有 Google_Activity 与 Google_PlusService.php 中的 Google_GooglePlusActivity 和 Google_YouTubeService.php 中的 Google_YoutubeActivity

祝大家编码愉快！

# java - 共享变量错误

> ID：15816945
> 
> 赞同：0
> 
> 时间：2013-04-04T16:41:05.100
> 
> 标签：java, variables, netbeans, shared

所以，我正在努力处理 Java（NetBeans）中的共享变量。我有一个带变量的类 - 让我们调用它`statlbl`。所以它是一个不可编辑的标签，它的内容被另一个类改变了。

这是缝...我完全不知道如何更改位于一个类中的标签，另一个类。

这是代码的提取：

```
//Print the ip address   
System.out.println("This server's IP Address: " + ipAddress); TS_Entity.statlbl.setText("This server's IP Address: "
    + ipAddress);
         try {
             Thread.sleep(1000L);
         } catch (Exception e) {
         } 
```

调试时，IDE 显示错误，描述为“无法从静态上下文引用非静态变量”

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:44:03.813

该错误意味着您的变量`statlbl`不是静态的。你要么需要一个类型的对象`TS_Entity`，比如说`entity`。你的命令将是

```
entity.statlbl.setText("This server's IP Address: " + ipAddress); 
```

要么，要么做`statlbl`一个静态变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:44:18.647

您没有 TS_Entity 类的对象。您需要创建它的一个实例：

```
TS_Entity tsEntity = new TS_Entity(); 
```

访问非静态字段。静态字段是类中的字段，而不是单个实例。对于其他所有字段，您都需要一个对象实例，`tsEntity`例如示例中的 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T16:46:47.790

`statlbl` 您使用的变量是非静态变量。`statlbl`但是您正试图从一个本身是 static 的方法中访问这个非静态变量。

这在java中是不可能的。您必须将`statlbl`变量声明为静态。

要从静态方法访问非静态字段，您需要像这样创建 Object 实例：

`TS_Entity en = new TS_Entity()`;

现在您可以`statlbl`使用此对象的 setter 方法更改 的值。

# python - 开发的 Ansible 模块可以包含或扩展 Ansible Core 模块吗？

> ID：15816952
> 
> 赞同：9
> 
> 时间：2013-04-04T16:41:31.247
> 
> 标签：python, ansible

我正在开发一个 Ansible 模块，它生成一个 url，从我的内部工件中获取（如 get_url）该 url 处的 tarball，然后提取它。我想知道是否有办法在我的模块中包含或扩展 get_url Ansible 核心模块。我不能在多个步骤中使用它，因为正在使用的 url 是从 git 哈希生成的，并且需要多步骤搜索。

如果没有办法，我可能会复制整个 get_url 模块并在我的模块中使用它，但我想避免这种情况。

我想做类似的事情：

`module_json_response = module.get_module('get_url').issue_command('url=http://myartifactory.com/my_artifact.tar.gz dest=/path/to/local/my_artifact.tar.gz');`

我对 Ansible 的理解是它上传正在使用的模块并执行它，包括另一个模块不受支持或没有记录。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T13:36:22.903

[在这里](https://groups.google.com/d/msg/ansible-project/7SByPqJxa7Q/YAopBmA-4_8J)引用 Michael DeHaan 的帖子：

> 一般来说，Ansible 允许通过“lib/ansible/module_common.py”共享代码，以使编写功能更容易。
> 
> 然而，它并不能让一个模块调用另一个模块，迄今为止，它还没有真正需要——这并不完全正确，我们曾经有这样的东西用于文件和复制，直到我们变得聪明和移动文件属性代码变成通用的:)
> 
> 似乎由于 url 访问足够频繁，我们可以在模块 common 中为 url 下载创建一个通用函数——如果我们修改 get_url 代码以也使用它，这样我们就不会重复自己。

他后来跟进：

> 您可以通过编写动作插件来访问模板的工作方式，但它比编写简单的客户端模块更复杂。
> 
> +1 将 get_url 代码移入通用，这已经出现了几次。

# jquery - ASP.NET 使用 JQuery 向 DataGrid 添加行

> ID：15816962
> 
> 赞同：0
> 
> 时间：2013-04-04T16:41:56.370
> 
> 标签：jquery, asp.net, datagrid

我正在尝试使用 JQuery 在 ASP.NET DataGrid 中的特定行之后添加新行。我已经在每一行之后添加了一个新行：

```
$('<tr class="sep"><td  colspan="13"></td></tr>').insertAfter('tr.fila'); 
```

但现在我想在某些特定行之后添加行，而不是在所有行之后。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:10:05.623

除非我们知道您需要定位的特定行的标准是什么，否则我们无法真正回答这个问题。

以下是一些可能对您有用的 jQuery 选择器：

[http://api.jquery.com/?s=nth](http://api.jquery.com/?s=nth)

如果它基于数据场景，您可以通过 DataBound 事件等向行/单元格添加一个类，并使用选择器定位该类。或者，如果它与其他行一样，您可以简单地在 jQuery 中完成。

# c++ - 如何创建控制台终端？

> ID：15816963
> 
> 赞同：1
> 
> 时间：2013-04-04T16:41:58.237
> 
> 标签：c++, user-interface, console, terminal, vt100

我可以从哪里开始为我的 C++ 程序创建控制台？

我需要一个最低限度的控制台来启动和管理控制台应用程序，我需要它的原因是因为我需要将所有内容打包到 1 个可执行文件中并创建和控制我的小环境。

使用“控制台”一词，我仅指运行我的程序的终端，仅此而已，**我不希望我的控制台与底层系统交互**，只关心我的控制台应用程序。

所以我的问题是：给定一个 C++ 应用程序或命令行解释器，创建一个能够与该应用程序接口并报告和管理通常输入（std::cout，特殊字符）的终端所需的专业知识是什么？比如铃声、用户输入的文本等等）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:29:19.397

我认为对于“一个答案”来说，这是一个太大的问题。

问题包含三个组成部分：

1.  从您的代码运行另一个应用程序。
2.  捕获所述应用程序的输出。
3.  在控制台类型窗口中显示输出。

我相信每种主要类型的平台至少有 1 和 2 明显不同，至少在 Windows、Symbian 和 Linux/Unix 类型的平台上是不同的。我相信，在很大程度上，Android 平台可以通过与 Linux 相同的方法来实现这一点。

第三部分，除了模拟 VT100 或 ANSI 终端的所有复杂性（这很重要，因为要解析和解释大量不同的转义码，但您可能只需实现六个左右开始）。

我希望，除了“特定于平台的代码”之外，这是一个需要几千行代码的项目，并且如果您知道从哪里开始（也就是说，您熟悉`fork(), execl()`Linux 中的 etc 或其他操作系统中的等价物） , 并且熟悉重定向 if `stdin`,`stderr`和`stdout`using`dup2()`和类似的功能, 再次保留操作系统特定的名称, 你可以在几周内得到大致工作的东西. 如果你不知道这些东西, 你将不得不学习如何使用这些功能首先。

当然，做终端仿真，比如“在这里画一行文字”，“在X行插入一个空行”，“从这个位置清屏”或者“清空剩余行”等等，都需要相当数量涵盖所有不同变体和选项的工作。特别是如果您希望在可变大小的显示器上执行此操作，而不是像支持原始 VT100 终端那样的“固定 80 列和 25 行”。而且我假设您已经编写了代码来在 OpenGL 或 OpenVG 中绘制基本文本（OpenVG 是否原生支持文本，或者您是否必须将其作为“绘制位图” - 我不记得它是如何工作的 - 我是不是在 Symbian Graphics 中处理文本的人之一，所以我从来没有真正关心过它是如何工作的）。

# javascript - 将姓名拆分为姓氏、名字、中间名首字母

> ID：15816969
> 
> 赞同：0
> 
> 时间：2013-04-04T16:42:10.077
> 
> 标签：javascript, regex

我有一个来自包含用户名的文本框的用户输入

输入可能如下所示：

```
var input = "Doe, John M"; 
```

但是，输入可能要复杂得多。像：

```
var input = "Doe Sr, John M" 
```

或者`"Doe, John M"`

或者`"Doe, John, M"`

甚至`"Doe Sr, John,M"`

我想做的是将姓氏（带有sr或jr）与名字分开，然后是中间名的首字母。

因此，这些字符串变为：

`var input = "Doe#John#M"`或`"Doe Sr#John#M"`或`"Doe#John#M"`

我试过这个正则表达式，

`input = input.replace(/\s*,\s*/g, '#');` 但这并没有考虑到最后一个中间名首字母。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T16:56:40.240

我确信这可能可以通过 RegEx 完成，但将字符串拆分为数组通常更快且更简单（IMO）。试试这个功能：

```
var parseName = function(s) {
  var last = s.split(',')[0];
  var first = s.split(',')[1].split(' ')[1];
  var mi = s[s.length-1];

  return {
    first: first,
    mi: mi,
    last: last
  };    
}; 
```

您将其称为仅传递名称，例如`parseName('Doe, John M')`，它返回一个带有`first`, `mi`,的对象`last`。我创建了一个[jsbin](http://jsbin.com/ofusik/1/)，您可以尝试测试您在问题中显示的名称格式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-26T06:11:28.077

`humanparser`在 npm 上结帐。

[https://www.npmjs.org/package/humanparser](https://www.npmjs.org/package/humanparser)

将人名字符串解析为称呼、名字、中间名、姓氏、后缀。

安装

```
npm install humanparser 
```

用法

```
var human = require('humanparser');

var fullName = 'Mr. William R. Jenkins, III'
    , attrs = human.parseName(fullName);

console.log(attrs);

//produces the following output

{ saluation: 'Mr.',
  firstName: 'William',
  suffix: 'III',
  lastName: 'Jenkins',
  middleName: 'R.',
  fullName: 'Mr. William R. Jenkins, III' } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T19:11:37.720

以下似乎符合您的要求

```
input = input.replace(/\s*,\s*|\s+(?=\S+$)/g, '#'); 
```

# webdriver - Watir webdriver contains_text 替换？

> ID：15816971
> 
> 赞同：0
> 
> 时间：2013-04-04T16:42:11.483
> 
> 标签：webdriver, watir, watir-webdriver

我在另一个论坛中发现，在 watir webdriver 中已弃用 contains_text 方法。如果我能找到准确显示 webdriver 支持哪些方法的文档，我会很高兴的。你可能会认为[http://watirwebdriver.com/](http://watirwebdriver.com/)会有这个。但是，嗯，没有。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T17:31:37.037

API 文档是寻找受支持方法的良好起点 - [http://rubydoc.info/gems/watir-webdriver/frames](http://rubydoc.info/gems/watir-webdriver/frames)。

对于`contains_text`，您应该只使用该`text`方法获取文本，然后使用 Ruby 的字符串比较方法。

您可以执行以下操作之一：

```
browser.text.include?(str)
browser.text =~ /regexp/ 
```

# php - 我的唯一索引是否已设置？

> ID：15816972
> 
> 赞同：-1
> 
> 时间：2013-04-04T16:42:14.090
> 
> 标签：php, mysql, phpmyadmin

我正在尝试使用以下方法设置由 2 个字段组成的复合唯一索引：

```
ALTER TABLE mytable ADD UNIQUE INDEX(location,duplicate_count) 
```

当我在 phpmyadmin 中检查索引时，我看到：

```
Keyname Type    Unique  Packed  Column  Cardinality Collation   Null    Comment
PRIMARY BTREE   Yes No  id  1   A   No  
location    BTREE   Yes No     location 1   A   Yes 
                               duplicate_count1 A   Yes 
```

所以看起来（如果我理解正确的话）有 1 个索引，一个名为 location 的复合索引，由 2 个字段（ location 和 duplicate_count ）组成。如果这是正确的，这就是我想要做的。我的解释似乎正确吗？

提前致谢，

账单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:56:11.177

你的解释是正确的。正如@MarcB 建议的那样，尝试两次插入相同的值。如果 phpmyadmin/mysql 控制台责怪你，那没关系。

# macos - 在 Mac 上自动通宵执行 R 脚本

> ID：15816975
> 
> 赞同：2
> 
> 时间：2013-04-04T16:42:33.790
> 
> 标签：macos, r, automation

我想在夜间自动执行一些 R 脚本，以便在我开始工作时获得最新数据。你们能告诉我该怎么做吗？通过 AppleScript 或 Automator？或其他工具？

理想情况下，我会得到一个看起来像这样的示例代码（AppleScript）

告诉 R.app 在每天 2:00 执行 example.r

谢谢你的帮助安德烈亚斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:54:00.073

您可以使用`cron`组合 with`Rscript`来执行此操作。

首先创建一个 R 脚本：

```
#! /usr/bin/env Rscript
print("Hello World!") 
```

并将其另存为`print_hw.R`. 然后在终端输入：

```
crontab -e 
```

并选择运行脚本的时间：

```
 0 0 * * * print_hw.R 
```

这将在每晚十二点运行脚本。这一切都是在`print_hw.R`可以执行（使用`chmod`）并且脚本位于您的`PATH`.

# c# - 异步任务配置中未引发异常

> ID：15816978
> 
> 赞同：1
> 
> 时间：2013-04-04T16:42:42.283
> 
> 标签：c#

我有以下方法

```
 public async Task<bool> Connect()
    {
        lock (_connectingLock)
        {
            if (_connecting)
                throw new IOException("Already connecting");
            _connecting = true;
        }

        try {
             await tcpClient.ConnectAsync(...); 
        }           
        catch (SocketException e)
        {
            return false;
        }
        finally
        {
            lock (_connectingLock)
            {
                _connecting = false;
            }
        }
    } 
```

现在，我希望连续调用会`Connect()`抛出 IOException，但它不会发生！

可能是什么原因？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T16:45:44.753

调用`Connect()`不能直接抛出异常。异步方法*不会*抛出异常。相反，它们将返回等待时将抛出的任务`IOException`。（即任务出错。）

如果这不是你想要的，你应该分开调用：

```
public Task<bool> Connect()
{
    // Eager validation of state...
    lock (_connectingLock)
    {
        if (_connecting)
            throw new IOException("Already connecting");
        _connecting = true;
    }
    return ConnectImpl();
}

private async Task<bool> ConnectImpl()
{
    try {
         await tcpClient.ConnectAsync(...); 
    }           
    catch (SocketException e)
    {
        return false;
    }
    finally
    {
        lock (_connectingLock)
        {
            _connecting = false;
        }
    }
} 
```

不过，目前尚不清楚在这种情况下这是否合适。急切地抛出类似的东西通常很好`ArgumentException`，但如果错误不代表调用代码本身的错误，我认为返回一个错误的任务是可以的。

# css - IE8 及更低版本宽度属性的 CSS hack

> ID：15816982
> 
> 赞同：3
> 
> 时间：2013-04-04T16:42:49.157
> 
> 标签：css, browser, internet-explorer-8, css-hack

我正在为 IE8 及以下版本尝试以下 CSS hack：

```
 .class {
        background-color: #BFBFBF;
        width: 1154px;
        width: 930px \9;
       } 
```

但是这个 CSS hack 也影响了 IE9。

您能否帮我将此宽度属性仅应用于 IE8 及以下版本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T17:44:52.407

其他答案是更好的答案 - 您应该使用条件评论。但是要回答您为什么您正在做的事情不起作用的问题，请尝试

```
width: 930px\9; 
```

没有空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:44:36.070

使用条件注释。

```
<!--[if IE 8]>
According to the conditional comment this is IE 8<br />
<![endif]--> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T16:45:32.793

虽然我完全建议不要使用特定于浏览器的 CSS，但最好的选择是使用条件注释。

```
<!--[if lte IE 8]><html class="ie8-"><![endif]-->

.ie8-.class {
    width: 930px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T17:19:07.197

与其求助于一堆黑客，我真的建议利用 javascript（请参阅[http://modernizr.com/](http://modernizr.com/)）将您的浏览器类型作为一个类放在 html 标记中。因此，您的页面在 IE8 中的标记将包括：

```
<html class="ie8">.... 
```

这样，您可以在样式表中引用特定于浏览器的类：

```
.class {
    background-color: #BFBFBF;
    width: 1154px;
}
.ie8 .class {width: 930px} 
```

# django - Dotcloud——分离主要和次要网络请求

> ID：15816985
> 
> 赞同：0
> 
> 时间：2013-04-04T16:43:00.250
> 
> 标签：django, http, webserver, dotcloud

我在 Dotcloud 上部署了一个 Web 应用程序，其中每个页面上的数据计算起来可能非常昂贵（很多秒）。我想通过返回缓存信息然后用一堆导致完整计算发生的 AJAX 请求访问服务器来尽可能快地加载初始页面。但我不希望这些 AJAX 请求阻塞其他用户的初始页面加载，所以我希望他们单独排队。

我认为应该为两个服务器使用相同的 Django 应用程序，特别是因为数据模型是共享的。所以`dotcloud.yml`文件有点像：

```
www:
  type: python
www-ajax:
  type: python
(...) 
```

但是如何将不同的 URL 路由到每类实例？另外，我已经阅读了有关 Gunicorn 的长请求。这些 AJAX 请求很长，但它们不依赖于外部资源，除了数据库。这是 Gunicorn 的情况吗？如果是这样，是否有一种简单的方法可以将其集成到配置中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:16:19.593

如果您按照您在示例`dotcloud.yml`文件中描述的方式进行设置，您将拥有两个不同的服务，具有两个不同的 url。因此，如果您想向 ajax 服务发送内容，则使用 ajax url，如果您想要常规的，则可以使用 www url。

要运行 gunicorn，您可以使用 python-worker 用户并为 python worker 分配一个 http 端口，然后在 http 端口上列出 gunicorn。需要注意的是，python-worker 前面没有像 python 服务那样的 nginx，所以 gunicorn 需要直接监听流量。

所以把它放在一起看起来像这样。

```
www:
  type: python
  approot: myapp
www-ajax:
  type: python-worker
  approot: myapp
  ports:
    www: tcp
  process: gunicorn -b 0.0.0.0:$PORT_WWW yourapp:app 
```

您的进程字符串很可能看起来不同，但您得到了图片。

你也不需要approot，只是把它放在那里作为例子。

# .net - WPF 性能，文本框严重滞后

> ID：15816986
> 
> 赞同：3
> 
> 时间：2013-04-04T16:43:06.407
> 
> 标签：.net, wpf, performance

最近几天，我们遇到了 WPF 性能的严重问题。当一个人在文本框中按住键时，会出现可怕的延迟。角色不会立即出现，但需要一些时间。

你有没有遇到过类似的问题？

非常感谢您的帮助， Ondrej

# sitecore - Sitecore 全局查找和替换路径？

> ID：15816991
> 
> 赞同：1
> 
> 时间：2013-04-04T16:43:24.723
> 
> 标签：sitecore

有没有办法全局替换已移动项目的路径？例如，如果我有一个位于 home/moldule/oldlocation 的模块并且我将它移动到 home/module/newlocation 但是，我知道 oldlocation 在 100 个地方使用，我基本上可以做一个查找替换吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:38:07.520

这取决于项目的引用方式。如果这 100 多个地方将其作为内部链接（在所见即所得编辑器中）或在参考字段（树列表、Droplink、Droptree 等）中引用，那么您无需查找和替换任何内容。使用这些类型的链接时，Sitecore 会存储项目的 GUID，因此当您移动目标项目时，路径会自动更新。

在某些情况下，您需要更新路径，例如使用基于非引用的字段类型（例如 Droplist）、输入到 WYSIWYG 编辑器中的外部链接或在演示组件的数据源字段中。在这些情况下，您可以使用[搜索和替换](http://marketplace.sitecore.net/en/Modules/Search_and_Replace.aspx)模块和/或[Sitecore Rocks](http://visualstudiogallery.msdn.microsoft.com/44a26c88-83a7-46f6-903c-5c59bcd3d35b)来处理搜索和替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:15:02.193

您可能想看看如何使用 Sitecore Rocks 搜索和替换功能。您可以细化字段和模板以使搜索真正有针对性。

这里有更多细节 [http://www.sitecore.net/unitedkingdom/Community/Technical-Blogs/Trevor-Campbell/Posts/2013/02/28-Days-of-Sitecore-Rocks-Hidden-Gems-Part- 2.aspx](http://www.sitecore.net/unitedkingdom/Community/Technical-Blogs/Trevor-Campbell/Posts/2013/02/28-Days-of-Sitecore-Rocks-Hidden-Gems-Part-2.aspx)

# ios - “Interface Builder 文件中的未知类项”

> ID：15816999
> 
> 赞同：1
> 
> 时间：2013-04-04T16:43:46.870
> 
> 标签：ios, ios6, segue, popover

我在 ViewController 中有到 6 到 7 个自由形式弹出窗口的 segue 连接。每次打开与两个类中的任何一个关联的自由格式窗口时，我都会在输出窗口中收到一条错误（或警告）消息，显示“ **Interface Builder 文件中的未知类项”。**这就是我得到的确切信息。我已经阅读了很多与这个未知类警告相关的主题。问题是我没有那个“项目”。与此警告消息关联的类的名称是**ItemViewController**和**UpdateViewController**. 即使 ViewController segue-connect 第二个，消息是相同的 - 未知类项。无论消息是错误还是警告指示，应用程序性能都不会受到影响。一切正常。无论如何，到目前为止我所做的如下。

1.  转到 TARGETS > Build Phases > Compile Sources 以确保列出所有类。
2.  有人建议我们将“-all_load -ObjC”插入其他链接器标志。我已经做到了。
3.  将 [item class] 添加到 appdelegate applicatoindidfinishlanching 方法...我不能，因为我什至没有“item”。

有人能弄清楚是什么导致了这个不危及生命的信息吗？

谢谢