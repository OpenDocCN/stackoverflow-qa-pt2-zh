# StackOverflow 问答 12960000-12960999

# java - 使用 Class 参数时不通过构造函数推断类型绑定？

> ID：12960002
> 
> 赞同：0
> 
> 时间：2012-10-18T17:07:10.050
> 
> 标签：java, generics, type-inference

试图理解为什么 Java 在使用 Class 参数传递类型信息时在推断类型和检查类型边界方面表现不同。

以这段代码为例：

```
public class TypeTest<T extends Number> {
    Class<T> type;

    TypeTest(Class<T> type) { this.type = type; }

    static <S extends Number> void sMethod(Class<S> type) {}

    <S extends Number>  void method(Class<S> type) {}

    public static void main(String[] args) throws InstantiationException, IllegalAccessException {
        // 1.
        TypeTest<Integer> obj = new TypeTest(Object.class);  // compiles, unchecked call and assignment warnings

        // 2.
        obj.method(Object.class); // compile-time error, S not within bound 

        TypeTest obj1 = new TypeTest(Object.class);  // compiles, unchecked call and assignment warnings

        // 3.
        obj1.method(Object.class); // compiles, unchecked call warning .             

        // 4.
        TypeTest.sMethod(Object.class); // compile time error, Object not within bounds

        // 5.
        new TypeTest<Object>(Object.class); // compile time error, Object not within bounds
    }

} 
```

使用静态方法（4.），我们不能传入任何不是数字的东西，这似乎是提供的边界最自然的行为。

但是，对于构造函数（1.、5.），我们必须明确指定类型参数才能获得与 4 相同的行为。否则，似乎 T 类型参数值不会从 Object.class 变量中自动推断出来。

构造函数和静态方法的这种差异来自哪里？

另一个我不完全理解的情况是 2\. 和 3 之间的区别。为什么相同的操作编译或不编译仅取决于 TypeTest 对象的构造方式，而类类型参数 T 与方法没有任何关系类型参数 S?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:36:02.930

只能推断为方法或构造函数声明的泛型类型。所以

```
<S> void method() {}
 ^ this can be inferred

<S> TypeTest() {}
 ^ this can be inferred 
```

构造泛型类时无法推断泛型类的泛型类型：

```
class TypeTest<T> {}
               ^ this must be specified explicitly when using "new TypeTest"
                 or in Java 7 you can explicitly specify the diamond operator 
```

正如其他人所提到的，当您不使用`new TypeTest()`任何尖括号时，您使用的是原始类型。原始类型的工作方式必须与泛型之前的工作方式相同，以保持与旧代码的兼容性。所以表达式`new TypeTest()`将具有类型`TypeTest`（原始类型），而不是`TypeTest<something>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:25:50.730

`new TypeTest(Object.class)`是原始类型的表达式`TypeTest`，这就是它的设计方式。所以当然，没有类型推断是因为**没有类型可以推断**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T17:25:53.147

当您省略泛型类型的类型参数时——也就是说，任何时候你键入时都`TypeTest`没有`<Something>`——Java 会忽略对*所有该类型的**所有*泛型检查。

 *有关详细信息，请参阅[http://docs.oracle.com/javase/tutorial/java/generics/rawTypes.html](http://docs.oracle.com/javase/tutorial/java/generics/rawTypes.html)。*

# math - CUDA 内核中未定义的除法 - 有什么想法吗？

> ID：12960005
> 
> 赞同：1
> 
> 时间：2012-10-18T17:07:30.330
> 
> 标签：math, cuda, divide-by-zero

刚才写CUDA内核的时候，有机会测试一下下面代码的结果：

```
unsigned char temp1 = 0x00;
unsigned char temp2 = 0x00;
unsigned char temp3 = temp1/temp2;

printf("%02X", temp3);` 
```

此代码打印“0xFF”。我对此感到非常困惑，有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T23:01:30.877

根据 C/C++ 标准，整数除以零的结果是未定义的。参见 C99 第 6.5.5 节，例如：

> / 运算符的结果是第一个操作数除以第二个操作数的商；% 运算符的结果是余数。在这两个操作中，如果第二个操作数的值为零，则行为未定义

在除以零的情况下，NVIDIA GPU 上的整数除法运算符返回所有位设置为 1 的结果。这可能是为了与 DirectX 兼容。这同样适用于除数为零的模运算符。当所有操作数都是文字常量时，您可能会观察到不同的结果，因为这些情况可能由编译器优化器在编译时处理。

**无论如何，CUDA 程序员绝对应该将这些结果视为实现工件，因为任何时候都不能以任何方式依赖未定义的行为。**

# python - python明确不传递可选参数

> ID：12960012
> 
> 赞同：3
> 
> 时间：2012-10-18T17:07:57.363
> 
> 标签：python, optional-parameters

想象以下场景：

```
class A:
    def __init__(self, arg1=3, arg2=5):
        pass

def createA(arg1=None, arg2=None):
    if arg1 is None:
        if arg2 is None:
            a = A()
        else:
            a = A(arg2=arg2)
    else:
        if arg2 is None:
            a = A(arg1=arg1)
        else:
            a = A(arg1=arg1, arg2=arg2)
    return a 
```

什么是实现此行为的最佳方法，请记住以下几点：

*   我不能/不想换课`A`
*   我不想将`A`构造函数参数的默认值显式添加到`createA`函数中？

例如，是否有任何值指示未传递的可选参数？就像是：

```
if arg1 is None:
    newArg1 = NotPassed
else:
    newArg1 = arg1

if arg2 is None:
    newArg2 = NotPassed
else:
    newArg2 = arg2
A(arg1=newArg1, arg2=newArg2) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T17:16:01.577

```
def create_A(arg1=None, arg2=None):
    kwargs = {}
    if arg1 is not None: kwargs['arg1'] = arg1
    if arg1 is not None: kwargs['arg2'] = arg2
    return A(**kwargs) 
```

甚至可能

```
def create_A(**kwargs):
    return A(**kwargs) 
```

# jsoup - jsoup 查询多重选择器

> ID：12960013
> 
> 赞同：12
> 
> 时间：2012-10-18T17:08:02.063
> 
> 标签：jsoup

我有以下html：

```
<div>
    <h1>
        <a>1</a>
    </h1>
    <h2>
        <a>2<a>
    </h2>
    <h3>
        <a>3</a>
    </h3>
</div> 
```

有没有比 div > h1 > a, div > h2 > a, div > h3 > a 更好的方法来选择所有锚点。我正在寻找类似 div > (h1,h2,h3) > a

谢谢， 中

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-05T01:16:20.340

有可能实现这一点：

```
div.select("h1,h2,h3").select("a"); 
```

或者，如果您只需要 div 内的锚点：

```
div.select("a"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-08T05:36:26.203

**您可以使用select("h1,h2,h3")**选择 h1,h2,h3 元素

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:15:25.973

是的，
你可以使用这样的东西

考虑 div 是你通过这样做得到的 Element 的对象

```
Element div = document.select("div").first();
Elements anchors = div.select("a");
for(Element e: anchors)
{
  System.out.println("Anchor Text "+e.text()+" HREF VALUE = "+e.attr("href"));
} 
```

这将打印 div 中的所有锚点以及它们包含的文本和 HREF 的值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-16T00:09:18.960

希望这可以帮助，

```
import java.io.File;
import java.io.IOException;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

public class testXML {

public static void main(String[] args) throws IOException {
    File input = new File("D:\\test.html");
    Document doc = Jsoup.parse(input, "UTF-8");
    Elements divTag = doc.select("div");
    for(Element value: divTag){
        System.out.println(value.text());
    }

    Elements divTagH = doc.select("div").select("h1,h2,h3");
    for(Element value: divTagH){
        System.out.println(value.text());
    }
} 
```

}

**输出：**

1 2 3 1 2 3**

# java - GeoPoint 中的空指针异常

> ID：12960018
> 
> 赞同：0
> 
> 时间：2012-10-18T17:08:10.533
> 
> 标签：java, android

下面的代码有什么问题。它在这一行（`location.setLatitude(latitude);`）上抛出空指针异常。我试图在应用程序启动后立即制作一个圆圈，这就是我从我的`onCreate`方法传递位置对象的原因。

```
private Location location;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);    

    locationListener = new GPSLocationListener();

    locationManager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER, 
            0, 
            0, 
            locationListener);
    mapView = (MapView) findViewById(R.id.mapView);
    listView = (ListView) findViewById(R.id.mylist);
    mapView.setStreetView(true);
    mapView.setBuiltInZoomControls(true);

    mapController = mapView.getController();
    mapController.setZoom(15);

    GeoPoint initialPoint = new GeoPoint( (int) (36.778261* 1E6), (int) (-119.417932 * 1E6));
    double latitude = initialPoint .getLatitudeE6() / 1E6;
    double longitude = initialPoint .getLongitudeE6() / 1E6;

    location.setLatitude(latitude);
    location.setLongitude(longitude);
    locationListener.onLocationChanged(location);
} 
```

下面是处理 LocationUpdate 的类。

```
private class GPSLocationListener implements LocationListener {

    MapOverlay mapOverlay;

    public GPSLocationListener(MapView mapView) {

    }

    @Override
    public void onLocationChanged(Location location) {
        if (location != null) {
            GeoPoint point = new GeoPoint(
                    (int) (location.getLatitude() * 1E6), 
                    (int) (location.getLongitude() * 1E6));

            mapController.animateTo(point);
            mapController.setZoom(15);

            if (mapOverlay == null) {
                mapOverlay = new MapOverlay(this,android.R.drawable.star_on);
                List<Overlay> listOfOverlays = mapView.getOverlays();
                listOfOverlays.add(mapOverlay);
            }
            mapOverlay.setPointToDraw(point);
            mapView.invalidate();
        }
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
} 
```

任何建议都会有很大帮助。

**更新：-**

做出改变后，我得到了

```
java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0 
```

下面是我进行更改的代码。

```
GeoPoint initialPoint = new GeoPoint( (int) (36.778261), (int) (-119.417932));
double latitude = initialPoint .getLatitudeE6() / 1E6;
double longitude = initialPoint .getLongitudeE6() / 1E6;

this.location = new Location("TechGeeky Randomly Initialized");
location.setLatitude(latitude);
location.setLongitude(longitude);
locationListener.onLocationChanged(location); 
```

我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:40:26.537

我认为您要做的不是从中获取最后一个已知位置，`LocationManager`而是从您自己定义的位置（例如随机位置）开始`onCreate()`。为此，只需创建一个新的[Location](http://developer.android.com/reference/android/location/Location.html)对象，如下所示：

```
this.location = new Location("TechGeeky Randomly Initialized"); 
```

在这些行之前执行此实例化以避免异常：

```
location.setLatitude(latitude);
location.setLongitude(longitude);
locationListener.onLocationChanged(location); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:23:22.777

使用此代码初始化位置对象：-

如果您想使用移动网络获取位置 将此代码放入 onCreate

```
Location location=null;  
location=locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER); 
```

如果您想使用 GPS 获取位置 将此代码放入 onCreate

```
location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T17:24:40.013

您已经实例化了位置对象。您在哪里创建对象到位置。请使用以下命令创建对象到位置：

```
location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER); 
```

或者

将位置对象作为参数传递给方法并检查空条件。

# python - 如何获取 2d dict python 中的所有键

> ID：12960019
> 
> 赞同：4
> 
> 时间：2012-10-18T17:08:11.150
> 
> 标签：python, dictionary

我有一本形式的字典：

```
d = {123:{2:1,3:1}, 124:{3:1}, 125:{2:1},126:{1:1}} 
```

所以，让我们看看 2nd degree key..

```
123--> 2,3
124--> 3
125--> 2
126--> 1 
```

所以唯一的二阶键的总数是：

```
1,2,3 
```

现在，我想将此字典修改为

```
 d = {123:{1:0,2:1,3:1}, 124:{1:0,2:0,3:1}, 125:{1:0,2:1,3:0},126:{1:1,2:0,3:0}} 
```

所以基本上在特定的 2d 字典中不存在所有 2 阶键。添加值为 0 的键。

这样做的pythonic方法是什么？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T17:12:21.880

```
keyset = set()
for k in d:
    keyset.update(d[k])

for k in d:
    for kk in keyset:
        d[k].setdefault(kk, 0) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T17:16:28.277

```
In [25]: d = {123:{2:1,3:1}, 124:{3:1}, 125:{2:1},126:{1:1}}

In [26]: se=set(y for x in d for y in d[x])

In [27]: for x in d:
    foo=se.difference(d[x])
    d[x].update(dict(zip(foo,[0]*len(foo))))
   ....:     
   ....:     

In [30]: d
Out[30]: 
{123: {1: 0, 2: 1, 3: 1},
 124: {1: 0, 2: 0, 3: 1},
 125: {1: 0, 2: 1, 3: 0},
 126: {1: 1, 2: 0, 3: 0}} 
```

这里使用设置差异来获取丢失的键，然后`update()`是字典：

```
In [39]: for x in d:
    foo=se.difference(d[x])
    print foo                # missing keys per dict
set([1])
set([1, 2])
set([1, 3])
set([2, 3]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T17:38:53.507

我喜欢 Ashwini Chaudhary 的解决方案。

我对其进行了编辑，以将评论中的所有建议与其他细微更改结合起来，以查看我更喜欢的方式：

***已编辑**（将 Steven Rumbalski 的建议纳入此答案）。*

```
all_second_keys = set(key for value in d.itervalues() for key in value)

for value in d.itervalues():
    value.update((key,0) for key in all_second_keys if key not in value) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T17:14:24.653

```
import operator

second_order_keys = reduce(operator.__or__,
                           (set(v.iterkeys()) for v in d.itervalues()))
for v in d.itervalues():
    for k in second_order_keys:
        v.setdefault(k, 0) 
```

或者，在 Python 3 中：

```
from functools import reduce
import operator

second_order_keys = reduce(operator.__or__,
                           (v.keys() for v in d.values()))
for v in d.values():
    for k in second_order_keys:
        v.setdefault(k, 0) 
```

# java - 防止在数组列表中重复给定数字

> ID：12960026
> 
> 赞同：0
> 
> 时间：2012-10-18T17:08:26.580
> 
> 标签：java, arraylist

假设您有一个包含 10 个索引的数组列表，其中仅包括数字 1、2 或 3。如果可能的话，我试图让这些打印而不连续重复相同的数字。

例如，arraylist 包括数字 {1,1,1,2,1,2,2,3,1,2} 我希望它打印为：{1,2,3,1,2,1,2 ,1,2,1}

对不起，如果这可以比我想做的简单得多。我对编程还是很陌生。

```
 int j;
    int k;
    for (j=0; j<p.size()-1;j++)
    {
        for(k =1; k<p.size()-1;k++)
        {      
            if(p.get(k)==p.get(j))
            {
    //       Person temp = p.get(j);
    //       p.remove(j);
    //       p.add(temp);
            }        
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:11:44.620

不仅如此..试试这个：

```
for (int i = 0; i < list.size() - 1; i++) {
    if (!list.get(i+1).equals(list.get(i)) {
        System.out.print (list.get(i));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:28:46.613

如果我对您的理解正确，您正在尝试打印数字而不连续打印相同的数字超过一次，如果可能的话。

这是一个最接近您要求的简单算法（首选升序，如果可能的话，避免连续两次重复相同的数字）它可能不涵盖所有假设，因为问题没有定义所有可能的情况：

1.  由于arraylist中的元素只能是1、2、3，所以先读取arraylist中的每个元素，数一数1、2、3各有多少个。
2.  使用变量来跟踪您打印的前一个数字（在开始时将其初始化为 3），循环直到所有计数器都为零：

    *   如果前一个数字是 3 并且 1 的计数 > 0：打印 1，将 1 保存到“前一个数字”，将计数器减 1。
    *   否则，如果计数 1 == 0，请尝试 2​​，然后尝试 3

    *   如果前一个数为 1 且 2 的计数 > 0：打印 2，将 2 保存到“前一个数”，将计数器减 2。

    *   否则，如果计数为 2 == 0，则尝试 3，然后尝试 1

    *   如果前一个数字是 2 并且 3 的计数 > 0：打印 3，将 3 保存到“前一个数字”，将计数器递减 3

    *   否则，如果计数 3 == 0，请尝试 1，然后尝试 2

# javascript - 通过javascript自动向页面上的每个DIV添加类（序列号）？

> ID：12960028
> 
> 赞同：2
> 
> 时间：2012-10-18T17:08:29.053
> 
> 标签：javascript, jquery, dom

我在我的 wordpress 安装上运行一个联系表单插件。一切正常，但我想多设计一点我的表格。要这样做，我必须以不同的方式设置一些 DIV（插件正在处理）的样式。问题是：所有 DIV 容器都没有 ID 或类！一切都由插件处理，我的 PHP 技能为零，所以我必须处理这个“裸”DIV ;-)

问题是：是否可以通过javascript向当前站点上的每个DIV添加序列号类？

到目前为止谢谢，我希望你明白我的意思（对不起那个糟糕的英语）！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T17:20:36.770

还有另一种方式，将回调传递给[`.attr` *^([docs])*](http://api.jquery.com/attr/)：

```
$('div').attr('class', function(i) {
    return 'someClass' + i;
}); 
```

尽管您也可以将其用于 ID，因为每个类都是唯一的。

**请注意**，您不必使用 ID 或类来选择元素，有许多[选择器](http://api.jquery.com/category/selectors)和[遍历](http://api.jquery.com/category/traversing/)方法可以用来获取对所需元素的引用。

* * *

为了防止覆盖现有的类，要么只选择没有类的元素，要么以某种方式将 s 的选择范围缩小`div`到你想要的那些：

```
$('div:not([class])') 
```

或使用[`.addClass` *^([docs])*](http://api.jquery.com/addClass/)而不是`.attr`：

```
$('div').addClass(function(i) {
    return 'someClass' + i;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:10:31.367

你需要这样的东西

**[现场演示](http://jsfiddle.net/rajaadil/Vztfm/)**

```
$('div').each(function(i, item){
    $(this).attr('class', "YourClass" + i); //You can replace i with some other variable if required and increment it.
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T17:11:11.920

你可以这样做：

```
var divs = document.getElementsByTagName("div");
var className = "myClass";
for( var i = 0, max = divs.length; i< max; i++ ){
 divs[i].setAttribute("class",className + i.toString());
} 
```

# android - 最小化应用程序的上传和下载速度

> ID：12960031
> 
> 赞同：1
> 
> 时间：2012-10-18T17:08:42.110
> 
> 标签：android, file-format

我有 android 库存应用程序。此时应用程序正在通过 https 与服务器通信。我已经启用了 gzip 并且它正在工作。当用户扫描条形码时，应用程序会将该代码和手机 ID 发送到服务器。我通过 XML 来完成。然后服务器响应 xml 女巫包含一些数据。就像每个仓库的数量是，价格，产品名称。然后用户确认金额，应用程序再次发送到服务器并回复消息（好的，或不好的）。

当库存通过 WiFi 时，这不是问题，速度好，延迟低。但是，当库存通过移动网络时，通信就会有延迟。我需要为通信创建二进制格式吗？而且 XML 数据有很大的开销（不需要的数据，如标签等）。还是有一些通信中数据量最小化的标准或最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:30:12.090

如果您主要关心减少有效负载的大小，那么您肯定希望查看与 XML 不同的格式。一种流行的选择是来自 Google的[protobuf 。](http://code.google.com/p/protobuf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:35:36.710

您无法从应用程序调整延迟。您可以使有效载荷更小以加快传输速度，仅此而已。查看 JSON。它比 XML 轻得多，几乎所有语言都原生支持它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T17:36:29.097

如果从客户端到服务器的请求太多，您可能会考虑更改服务器 API。例如，在获取库存时，您可以使用单独的 API 来获取产品类别，然后在获取类别后，发出单独的调用来获取每个类别的产品，每个产品都有一个 API 来获取详细信息。为了最大限度地减少请求数量，您可以创建一个 API，为您提供所有类别、每个类别下的所有产品以及这些产品的详细信息。这种方法将减少客户端和服务器之间的请求数量。

如果负载的大小真的很大，你可以尝试更轻量级的 JSON。

# iphone - 您如何比较 xCode 中的一系列浮点十进制数？

> ID：12960039
> 
> 赞同：0
> 
> 时间：2012-10-18T17:09:12.293
> 
> 标签：iphone, ios, xcode

此代码不起作用。有什么建议么？

```
float tempNum = 0.590000;
int temporary;
if (tempNum >= 0.590000 && tempNum <= 0.610000){
    temporary = 15;
}
// temporary yields zero 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:17:27.847

所以：

默认情况下 0.590000 是**DOUBLE**

所以`float tempNum = 0.59000`导致演员表。

为了证明这一点，请尝试：

```
float tempNum = 0.590000f;
int temporary;
if (tempNum >= 0.590000f && tempNum <= 0.610000f){
    temporary = 15;
} 
```

所以，请记住：

*aaa.aaa*是一个**DOUBLE**

*aaa.aaaf*是**浮动的**

# c++ - c++ 运行时库选项

> ID：12960042
> 
> 赞同：1
> 
> 时间：2012-10-18T17:09:20.437
> 
> 标签：c++, dll, runtime, static-libraries

运行时库 /MTd /MT 等是什么意思？

阅读[http://msdn.microsoft.com/en-us/library/2kzt1wy3(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/2kzt1wy3(v=vs.71).aspx)并没有说服我。

我必须使用一个第三方项目，它的所有“Release”都是“/MD”，所有“Debug”都是“/MDd”。我所有的项目（其他人使用，所以我无法更改）都有“/MT”和“/MTd”。

我必须将该第三方项目中的库作为输入添加到我的项目中。为了避免链接器错误，我更改了该项目中的设置以匹配我的项目。

我这样做了，但没有理解其中的含义。

**我的项目构建，似乎工作**（还没有使用很多功能），但来自原始项目的可执行文件将不再构建，有像这样的错误

```
error C1189: Please use the /MD switch for _AFXDLL builds   c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\include\afxver_.h 
```

所以......我不知道如何让一切正常，或者我的改变有什么影响。

我可以以某种方式结合 /MD 和 /MT 库吗？我必须做些什么才能使这两个项目都工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T17:15:43.340

该`/MD`标志隐含地定义了与 - plus 相同的信息，`/MT`指定您正在使用运行时库的 DLL 版本。

和标志基本上都说使用运行时库的多线程版本 - 不同之处在于`/MT`说使用基于 DLL 的版本，而在库中静态链接。`/MD``/MD``/MT`

所有带有额外标志的标志`d`都是调试版本——也就是说`/MDd`要使用基于 DLL 的多线程运行时库的调试版本。

您的问题中没有太多关于导致失败项目无法工作的原因的详细信息。如果您将所有内容切换为 use `/MD`，则需要将运行时 DLL 与您的项目一起包含，这可能是它们现在失败的原因。（以前，使用`/MT`，它们会静态链接到您的项目。）

附带说明 - [VS 2010 版本](http://msdn.microsoft.com/en-us/library/2kzt1wy3%28v=vs.100%29.aspx)中的标志文档更容易理解。即使标志的含义没有改变，该语言在后来的文档版本中也得到了极大的简化。查看 2010 年的说明而不是您链接的 VS 2003 文档可能会简化您的理解。

# java - 如何在网页中运行 java .class 文件？

> ID：12960044
> 
> 赞同：0
> 
> 时间：2012-10-18T17:09:20.000
> 
> 标签：java

我保存了以下内容：

```
import java.util.Map;

public class EnvMap {
public static void main (String[] args) {
    Map<String, String> env = System.getenv();
    for (String envName : env.keySet()) {
        System.out.format("%s=%s%n",
                          envName,
                          env.get(envName));
    }
  }
} 
```

作为 .java 文件，然后键入

```
javac EnvMap.java 
```

在 Windows 命令提示符下将其编译为 .class 文件。它编译没有错误。然后我输入

```
java EnvMap 
```

在 Windows 命令提示符下，脚本执行没有错误，并向我展示了我正在寻找的所有系统信息。

现在我很好奇如何让这个脚本在网页中运行。我试过类似的东西：

```
<html>
<body>
<APPLET CODE=EnvMap.class></APPLET>
</body>
</html> 
```

这没有用。

非常感谢任何提示。多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:13:52.233

首先，您的课程必须扩展`java.applet.Applet`课程。我建议您先查看一些文档...

[http://docs.oracle.com/javase/tutorial/deployment/applet/](http://docs.oracle.com/javase/tutorial/deployment/applet/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:35:05.327

*   如其他答案所述：
    1.  **服务器端：**，JSP/Servlet。
    2.  **客户端：**小程序或应用程序。使用[Java Web Start 启动](https://stackoverflow.com/tags/java-web-start/info)。
*   如果在客户端运行，则代码需要由您进行数字签名，并在出现提示时由用户信任。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T17:13:41.957

你的类必须扩展`Applet`类如下：

```
public class EnvMap extends Applet { //<--extends java.applet.Applet
    public void paint(Graphics g) {
        Map<String, String> env = System.getenv();
        for (String envName : env.keySet()) {
           System.out.format("%s=%s%n",
                      envName,
                      env.get(envName));
        }
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T17:11:36.140

您使用的是什么网络服务器？

您真正需要的是一个带有 Java/servlet 容器的服务器，它允许您在 Web 请求处理过程中执行 Java 代码。例如，Apache Tomcat。

（这是假设你想访问服务器上的环境变量。如果你想在客户端访问它们，好吧，我不太记得小程序的运行时环境是如何沙盒化的，所以你可能不走运。 )

# java - 关于如何使用 java 或 java 高级成像 API 导入/读取 tif/tiff 文件的教程

> ID：12960056
> 
> 赞同：0
> 
> 时间：2012-10-18T17:10:21.017
> 
> 标签：java, import, processing, tiff

我有一个包含许多目录和子目录的 tiff 图像。我想浏览这个 tiff 目录树并将图像导入二维数组，这样我就可以处理这个图像。我对java比较陌生，无法弄清楚如何做到这一点。有人会用教程和代码示例回答我的问题吗？

另外，有没有其他人发现 java API 文档很难找到、难以导航并且有些稀疏？我正在尝试将此作为我正在创建的处理草图的解决方法。有不同的解决方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:31:19.787

好吧，我什至不知道 tiff 可以有目录和子目录......但我会看看 java [File 类](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)作为起点，尝试从你的应用程序中查看这些目录。如果您可以看到它们，那么您可能也可以解析它们。

# ms-access - 表单和子表单之间的 MS Access 数据验证

> ID：12960057
> 
> 赞同：2
> 
> 时间：2012-10-18T17:10:21.857
> 
> 标签：ms-access, validation

我有一个跟踪发票的 MS Access 数据库。在我用来输入数据的表格中，我可以控制发票金额（例如 100 美元）的 [金额]。在该表格中，还有一个子表格用于跟踪部分发票（例如，50 美元的食品供应和 50 美元的清洁用品）。主窗体还有一个控件[Breakdown Total]，用于汇总子窗体中的细目数量。

我正在努力做到这一点，除非 [Amount] = [Breakdown Total]，否则您无法更改表单中的记录。由于两个表的结构，数据验证规则似乎并没有按照我想要的方式工作，因为它实际上只在您填写 [Amount] 控件时才有效，而不是在您随后更改细分时才有效。

我想建立一个事件来处理这个问题，但我不知道要使用什么事件——BeforeUpdate 不允许我离开不匹配的控件，这没有帮助——如果那是正确的怎么办?--而且 AfterUpdate 似乎不允许我要求将可疑记录保留在屏幕上。有人可以推荐我应该使用的活动吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:29:33.817

这是我最近在客户处实施的解决方案。不确定它是否正是您需要的，但实现了两个 ListBox，一个用于选择 Top-Category，另一个是 Column'ed 以显示 Top-Category 子项的 Cross-Tab 显示。

![在此处输入图像描述](../Images/147e76b6ac562f3ceb399e1b7d2e6724.png)

左侧列表框在 VBA 中以编程方式从访问视图加载信息，然后主体列表框由交叉表创建算法绑定。现在你的不一定要像我要求的那样复杂或详细。但是您可以在没有子表单的情况下完成此操作。

# python - 无法 grep 输出 python 程序，可能是 utf-16

> ID：12960059
> 
> 赞同：1
> 
> 时间：2012-10-18T17:10:26.420
> 
> 标签：python, grep, utf-16

我写了一个基本的python程序来解析android的resources.arsc。它打印出在文件中找到的所有字符串。字符串在每个字符之间有一个零值字节。这向我表明字符串存储在 utf-16 中。我不知道这是否正确，但 android 字符串是可本地化的，所以我认为是。我正在使用 string.decode('hex') 以人类可读的格式打印字符串。这是一个包含组成字符串的字节列表的示例：

```
>>> print ''.join(['00', '72', '00', '65', '00', '73', '00', '2f', '00', '64', '00', '72',    '00', '61', '00', '77', '00', '61', '00', '62', '00', '6c', '00', '65', '00', '2f', '00', '61', '00', '62', '00', '6f', '00', '75', '00', '74', '00', '2e', '00', '70', '00', '6e', '00', '67', '00', '00', '00']).decode('hex')
res/drawable/about.png 
```

问题是，当我将此程序通过管道传输到 grep 时，我无法 grep 读取任何字符串。如何将其打印到 shell 以便 grep 能够在其输出中匹配？谢谢！

（编辑）我确实打印了字符串，但在我的示例中，我认为最好同时显示“打印”版本和返回的版本。对困惑感到抱歉。在此示例中，无法 grep 的是“/res/drawable/about.png”。

（EDIT2）一个简单的演示：

```
11:33 AM ~/learning_python $ python -c "print ''.join(['00', '72', '00', '65', '00', '73', '00', '2f', '00', '64', '00', '72',    '00', '61', '00', '77', '00', '61', '00', '62', '00', '6c', '00', '65', '00', '2f', '00', '61', '00', '62', '00', '6f', '00', '75', '00', '74', '00', '2e', '00', '70', '00', '6e', '00', '67', '00', '00', '00']).decode('hex')"
res/drawable/about.png
11:33 AM ~/learning_python $ python -c "print ''.join(['00', '72', '00', '65', '00', '73', '00', '2f', '00', '64', '00', '72',    '00', '61', '00', '77', '00', '61', '00', '62', '00', '6c', '00', '65', '00', '2f', '00', '61', '00', '62', '00', '6f', '00', '75', '00', '74', '00', '2e', '00', '70', '00', '6e', '00', '67', '00', '00', '00']).decode('hex')" | grep about
11:33 AM ~/learning_python $ 
```

（EDIT3）另一个演示，我认为这证明数据是utf-16-be：

```
11:33 AM ~/learning_python $ python -c "print ''.join(['00', '72', '00', '65', '00', '73', '00', '2f', '00', '64', '00', '72',    '00', '61', '00', '77', '00', '61', '00', '62', '00', '6c', '00', '65', '00', '2f', '00', '61', '00', '62', '00', '6f', '00', '75', '00', '74', '00', '2e', '00', '70', '00', '6e', '00', '67', '00', '00', '00']).decode('hex')" > testfile
11:35 AM ~/learning_python $ iconv -f utf16be -t utf8 testfile
res/drawable/about.png
11:35 AM ~/learning_python $ iconv -f utf16be -t utf8 testfile | grep about
Binary file (standard input) matches
11:35 AM ~/learning_python $ iconv -f utf16be -t utf8 testfile | grep -a about
res/drawable/about.png 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:14:32.720

解码字符：

```
'\x00r\x00e\x00s'.decode('utf-16-be') # produces u'res' 
```

然后你可以打印出解码后的字符串：

```
$ python -c "print ''.join(['00', '72', '00', '65', '00', '73', '00', '2f', '00', '64', '00', '72',    '00', '61', '00', '77', '00', '61', '00', '62', '00', '6c', '00', '65', '00', '2f', '00', '61', '00', '62', '00', '6f', '00', '75', '00', '74', '00', '2e', '00', '70', '00', '6e', '00', '67', '00', '00', '00', '00']).decode('hex').decode('utf-16-be').rstrip('\0')" | grep about
res/drawable/about.png 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-17T12:57:23.487

使用[`ripgrep`实用程序](https://github.com/BurntSushi/ripgrep)而不是`grep`可以支持 UTF-16 文件的实用程序。

> ripgrep 支持以 UTF-8 以外的文本编码搜索文件，例如 UTF-16、latin-1、GBK、EUC-JP、Shift_JIS 等。（提供了一些对自动检测 UTF-16 的支持。其他文本编码必须用`-E`/专门指定`--encoding flag.`）。

示例语法：

```
rg sometext file 
```

# wcf - 如何使 ClientAccessPolicy.xml 的 WebHttpBehavior 停止窃取/劫持 IIS 的根目录？

> ID：12960060
> 
> 赞同：4
> 
> 时间：2012-10-18T17:10:28.423
> 
> 标签：wcf, silverlight, webhttpbinding, clientaccesspolicy.xml

我正在使用具有 net.tcp WCF 通信的 Silverlight 应用程序。我想在 ServiceHost 中自行托管 ClientAccessPolicy.xml，并且根据 Silverlight net.tcp 要求（TCP 端口 4502-4534 等），策略文件必须位于根端口 80 上。我的问题是，当我的 ServiceHost 运行时，它从 IIS 窃取端口 80 根，我的网页都没有工作。

创建策略端点的代码如下所示：

```
host.AddServiceEndpoint(typeof(IPolicyGetter), new WebHttpBinding(), "http://localhost/").Behaviors.Add(new WebHttpBehavior()); 
```

当 ServiceHost 运行时，我可以看到我的`http://127.0.0.1/ClientAccessPolicy.xml`，但端口 80 上的所有网站都停止工作 - 我看到由端点生成的标准 WCF“找不到端点”网页。当我关闭 ServiceHost 时，我可以看到我的网站，但 ClientAccessPolicy.xml 不见了。

我尝试使用端点 URI 的完整路径：

```
policyUri.Scheme = "http";
policyUri.Port = 80;
policyUri.Query = "ClientAccessPolicy.xml";
host.AddServiceEndpoint(typeof(IPolicyGetter), new WebHttpBinding(), policyUri.ToString()).Behaviors.Add(new WebHttpBehavior()); 
```

但这会引发参数异常。将策略移至子目录或其他端口将不起作用，因为 Silverlight 仅查看根 Web 目录上的端口 80。

显然，我可以将 ClientAccessPolicy.xml 复制到 Web 根目录并禁用策略端点。有没有办法关闭端点，以便它只劫持对 ClientAccessPolicy.xml 的调用，但不会窃取整个 IIS 端口 80？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:15:28.700

不，您不能让两个进程监听同一个 TCP/IP 端口。如果您的 ServiceHost 正在侦听端口 80，那么它将是唯一响应该端口上的连接的进程。

话虽如此，您可以让“主”进程在端口 80 上侦听并将连接重定向到“子”进程，但这超出了 ServiceHost 的范围和意图。

# drupal - 在每个页面上调用 drupal_find_theme_functions - 我们的主题注册表是否正在重建？

> ID：12960065
> 
> 赞同：2
> 
> 时间：2012-10-18T17:10:33.090
> 
> 标签：drupal, drupal-7, drupal-themes

我们的新 D7 站点运行非常缓慢，因此我使用 devel/xhprof 进行了一些分析，发现 D7在 theme.inc 的 drupal_find_theme_functions() 中执行了*数百万个 preg_grep 函数调用。*这发生在每次页面加载时。

据我了解，只有在重建主题注册表时才应调用 drupal_find_theme_functions 函数 - 我是否正确？

我确保“重建主题注册表”在开发中关闭，然后完全禁用开发。但是，在每次页面加载时，我仍然看到在 drupal_find_theme_functions 中对 preg_grep 的数百万个函数调用（我在 theme.inc 中添加了一段代码以记录调用函数的时间）。

我们使用的是基于 Omega 的主题，如果我们每次都在重建主题注册表，我看不到它是如何/为什么会发生的。与此同时，我们正在关闭尽可能多的贡献模块。任何帮助/建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:38:56.713

还要检查您的主题设置和 template.php，也许那里的主题重建触发器。

例如 Zen 主题有选项 ->

“在每个页面上重建主题注册表”

我不熟悉欧米茄，但检查任何方式

# jquery - 使用jQuery单击后保持css活动状态

> ID：12960068
> 
> 赞同：0
> 
> 时间：2012-10-18T17:10:45.023
> 
> 标签：jquery, css

我正在使用伪类，但无法弄清楚如何使用 jquery 与它们进行交互。我认为这就像为一个项目添加一个类，但如果你看看我的例子，我不知道该怎么做。我已经进行了一些搜索，也许我只是以错误的方式看待它。

当一个按钮（`<span>`）被点击时，它会使用 :active、:before、active::before 等来改变。

我希望该按钮在按下后保持单击状态。（直到另一个`<span>`被点击）

```
 .lbButton { background-color:#eaa33d; font-family: 'Open Sans', sans-serif; font-size:18px; text-decoration:none; color:#000; position:relative; padding:10px 20px; padding-right:50px; background-image: url('../images/nav_background1.png'); border-radius: 5px; box-shadow: inset 0px 1px 0px #ede8ba, 0px 5px 0px 0px #ab6c11, 0px 10px 5px #999; margin-left: 30px;cursor: pointer; }
    .lbButton:active {  top:3px;  box-shadow: inset 0px 1px 0px #ede8ba, 0px 2px 0px 0px #ab6c11, 0px 5px 3px #999; }
    .lbButton::before { background-color:#4e3108; background-image:url(http://heritageinncharlottesville.com/images/down_arrow.png); background-repeat:no-repeat; background-position:center center; content:""; width:20px; height:20px; position:absolute; right:15px; top:50%; margin-top:-9px; border-radius: 50%; box-shadow: inset 0px 1px 0px #19120f, 0px 1px 0px #827066; }
    .lbButton:active::before { top:50%; margin-top:-12px; box-shadow: inset 0px 1px 0px #827066, 0px 3px 0px #19120f, 0px 6px 3px #382e29; } 
```

使用 jQuery 的方法是什么？

[单击按钮，按钮看起来被按下。我想在鼠标释放后保持该状态 - 直到下一个被按下。](http://jsfiddle.net/stillb4llin/F4WBt/ "jsfiddle")

*注意：我在网上找到了这个按钮并复制了 css。我已将其修改为我的配色方案*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:12:57.740

使用 jQuery 切换类会更好地处理。活动伪类不适合这种类型的功能。

```
var spans = $('span.lbButton');

spans.on('click', function(){
    spans.removeClass('active');
    $(this).addClass('active');
}); 
```

给定前面的代码片段，将适当的样式定义应用于 class `active`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:16:12.747

由于您希望样式保持不变，`span`直到`span`单击另一个样式，所以我建议为该样式创建一个在活动时具有您想要的所有样式的类，然后在不活动`span`时为其创建一个默认类。`span`

我假设我们在这里有两个类，`active-span`并且`default-span`. 你似乎知道你的 css，所以你可以定义它们。

jQuery：

```
$('span').click(function() {
    $('span').removeClass('active-span');
    $(this).addClass('active-span');
});​ 
```

小提琴：http: [//jsfiddle.net/gromer/ZX7yg/](http://jsfiddle.net/gromer/ZX7yg/)

# c++ - glfwGetGLVersion 失败？

> ID：12960071
> 
> 赞同：1
> 
> 时间：2012-10-18T17:11:06.460
> 
> 标签：c++, opengl, glfw

在试图找出我使用的是什么类型的 OpenGL 版本时，我遵循了这里的建议：[link](https://stackoverflow.com/questions/9017023/cannot-deploy-glfw-3-2)

我有以下代码：

```
int major, minor, rev;
glfwGetGLVersion(&major, &minor, &rev);
fprintf(stderr, "OpenGL version recieved: %d.%d.%d", major, minor, rev); 
```

我得到以下输出：

```
OpenGL version recieved: 2130567168.6.0 
```

我认为这是某种初始化问题，所以我调整为以下内容：

```
int major=0, minor=0, rev=0;
glfwGetGLVersion(&major, &minor, &rev);
fprintf(stderr, "OpenGL version recieved: %d.%d.%d", major, minor, rev); 
```

并收到以下输出：

```
OpenGL version recieved: 0.0.0 
```

我一点也不知道我在这里做错了什么。有任何想法吗？

**解决了。我必须在 GLFW 启用 OpenGL 上下文之后放置版本查询。**

这是有道理的，但从学习者的角度来看有点愚蠢，因为上面链接的示例建议使用它来首先建立上下文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:15:28.457

尝试使用`glGetString(GL_VERSION)`：

```
const GLubyte *version = glGetString(GL_VERSION); 
```

# php - 爆炸字符串并删除多个条目

> ID：12960077
> 
> 赞同：0
> 
> 时间：2012-10-18T17:11:23.653
> 
> 标签：php

问题是，我想制作一个脚本，首先从表单中的 POST 数据中注册一个字符串，然后检查是否有多个条目。如果有的话，该条目将被删除，并且将继续执行新的唯一条目列表。

*   条目是 URL。一个 URL 列表，可能有多个条目。

    ```
    $sites=$_POST['sitelist'];

    $sites=explode("\n", $sites); 
    ```

`$_POST['sitelist']`来自提交的文本区域。现在我如何分离所有这些 URL 并检查 URL 是否再次出现然后删除它并继续使用新的 URL 列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T17:15:12.297

测试这个：

```
$sites=array_unique(explode("\n", $sites)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T17:15:17.327

`array_unique`过滤重复的数组，所以一旦你用换行符分割它，所有精确的重复都应该消失。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T17:16:21.233

使用`array_unique()`：

`$sites = array_unique($sites);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T17:44:07.457

```
$sites = preg_split('~\\s+~', trim($sites)); // Split by all consecutive spaces
// Uncomment next line for superficial URL validation
// $sites = preg_grep('~^https?://.+?/.*~i', $sites);
$sites = array_unique($sites); // Keep uniques 
```

这会按所有空格拆分 URL 列表*（URL 没有空格，空格包括行分隔符）*。不保留空行并具有可选的卫生设施。

# python - 如何指向django中的静态文件夹

> ID：12960079
> 
> 赞同：1
> 
> 时间：2012-10-18T17:11:26.130
> 
> 标签：python, django, static

我正在学习 django，我已经有一个有点愚蠢的问题。我无法指向我的静态文件夹，我尝试了所有组合，在 youtube 教程等中观看了人们这样做。

我的 settings.py 看起来像这样：

```
 STATIC_ROOT = '/home/peter/brewery/static/'
   TEMPLATE_DIRS = '/home/peter/brewery/mysite/templates/' 
```

其中 brewery/ 是包含 mysite/ 和 static/ 的文件夹，mysite/ 是由

```
 django-admin.py startproject 
```

settings.py 也存在于哪里......

似乎模板文件夹映射正确，因为页面使用正确的模板呈现，它只是无法访问 /static/css/ 文件夹中的 css。我在我的模板中显示了这样的 css 路径

```
 <link ...  href='/static/css/brewery.css' /> 
```

我也尝试在我的计算机上创建 href 绝对路径，但它不起作用。

我正在使用 django 1.3 并运行 django 提供的服务器（python manage.py runserver）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T17:58:11.480

1 - 在您的设置文件中，定义一个静态 url 和静态根，如下所示：

```
STATIC_URL = '/static/' 
```

2 - 设置`DEBUG = True`

3 - 确保您的`TEMPLATE_CONTEXT_PROCESSORS`变量包括`django.core.context_processors.static`.

4 - 在您的模板中引用它，例如...

```
<link ...  href='{{ STATIC_URL }}css/brewery.css' /> 
```

来源：[https ://docs.djangoproject.com/en/dev/howto/static-files/](https://docs.djangoproject.com/en/dev/howto/static-files/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:39:48.883

`STATIC_ROOT`不使用调试模式，但`staticfiles_urlpatterns()`提供来自所有不同应用程序的静态文件。将您的静态文件放入`static/`其中一个应用程序的目录中，或在您的设置中定义[STATICFILES_DIRS](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#staticfiles-dirs)并将站点的静态文件放在那里。

`STATIC_ROOT``STATICFILES_DIRS`只是从所有应用程序和调用时收集所有静态文件的位置：

```
python manage.py collectstatic 
```

并且只在生产环境中使用。

# nhibernate - 如何使用额外的标准进行流畅的 NHibernate ClassMap 连接

> ID：12960083
> 
> 赞同：1
> 
> 时间：2012-10-18T17:11:36.820
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我在尝试通过连接但使用额外标准将属性映射到另一个表时遇到问题。我下面的代码是针对我尝试加入的类，我基本上想通过加入 TestLog 表来加入 ServerEventLog 属性，但在测试日志表中定义的进程中搜索特定的消息类型 ID。

```
public class ExecutedTest
{
    public virtual int Id { get; set; }

    public virtual TestLog TestLog { get; set; }

    public virtual TestLog ServerEventLog { get; set; }
} 
```

然后测试日志类是我要映射到的类

```
public class TestLog
{
    public virtual int ID { get; set; }

    public virtual string Message { get; set; }

    public virtual int ExecutedTestId { get; set; }
} 
```

我可以使用下面的类映射让 SQL 生成类似下面的内容。

```
SELECT ...
FROM [ExecutedTest] executedte0_ 
inner join TestLog executedte0_1_ on
  executedte0_.Id=executedte0_1_.ExecutedTestId 
WHERE executedte0_.Id=?

public class ExecutedTestMap : ClassMap<ExecutedTest>
{
    public ExecutedTestMap()
    {
        Id(x => x.Id);
        References(x => x.TestLog).Column("LogId").Cascade.All();
        this.Join(
            "TestLog",
            x =>
                {
                    x.KeyColumn("ExecutedTestId");

                });
    }
} 
```

但是我无法解决的是如何通过连接条件生成如下所示的 sql（突出显示了我无法在注视位之间生成的位）。

```
SELECT ...
FROM [ExecutedTest] executedte0_ 
inner join TestLog executedte0_1_ on
  executedte0_.Id=executedte0_1_.ExecutedTestId
  **** and executedte0_1_.MessageTypeId = 9 ****
WHERE executedte0_.Id=? 
```

如果有人知道如何通过 ClassMap 实现这一点，我们将不胜感激。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:12:44.743

这不是 Join() 的目的。您可以将 Testlog 分为

```
public virtual EventLog ServerEventLog { get; set; }

public class TestLog
{
    public virtual int ID { get; set; }

    public virtual string Message { get; set; }
}

public class EventLog : TestLog { }

public class TestLogMap : ClassMap<TestLog>
{
    public TestLogMap()
    {
        Id(x => x.Id);

        Map(x => x.Message, "Message");
        DiscriminateSubclassesOnColumn("MessageTypeId", 1 /*MessageTypeId of TestLog*/);
    }
}

public class EventLogMap : ClassMap<EventLog>
{
    public EventLogMap()
    {
        DiscriminatorValue(9 /*MessageTypeId of EventLog*/);
    }
} 
```

或将 ServerEventLog 更改为 Collection

```
// in ExecutedTestMap
HasMany(x => x.ServerEventLogs)
    .KeyColumn("ExecutedTestId")
    .Where("ExecutedTestId")
    .KeyColumn("MessageTypeId = 9"); 
```

# php - 在 Windows 上使用系统函数的 PHP - 为什么错误不在正确的位置

> ID：12960084
> 
> 赞同：0
> 
> 时间：2012-10-18T17:11:38.367
> 
> 标签：php, mysql, windows

我在windows上使用PHP系统函数如下：

```
system("mysql --user=root --password=xxxx --host=127.0.0.1 --verbose <create.sql > out.txt 2>&1", $retVal); 
```

但是错误消息出现在文件的顶部。是否可以在有错误的相应 SQL 行之后显示错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:25:13.213

问题是 stdout 是缓冲的，而 stderr 并不意味着在这种情况下总是首先显示错误。如果您希望保留某种顺序，您将需要将系统调用包装在脚本中并在之后对其进行排序。[这里](http://www.unix.com/shell-programming-scripting/126488-preserve-output-order-when-redirecting-stdout-stderr.html)有一些解释。

# java - 在已部署的 Java EE 环境中进行自动化集成测试？

> ID：12960094
> 
> 赞同：2
> 
> 时间：2012-10-18T17:12:26.333
> 
> 标签：java, spring, unit-testing, jakarta-ee

我们的团队目前正在向部署在 Weblogic 上的现有 Java EE Web 应用程序引入自动化测试。我们在使用 JUnit 和 Mockito 进行单元测试方面取得了成功，当我们的应用程序由 Jenkins 构建和部署时，它们会自动运行。

集成测试更具挑战性，因为我们的应用程序依赖于 Java EE 容器提供的组件，例如 WorkManager。有几个 Spring bean 需要这些组件正确初始化。我们能够绕过它的一种方法是创建自定义应用程序上下文配置文件，该文件创建我们实际上并不需要测试但仍需要初始化 bean 的组件的模拟。这在某种程度上是一场维护噩梦，因为每个集成测试都需要它自己的配置，而且有些可能会非常复杂。

我们真正想要的是能够在运行集成测试时使用部署环境中使用的正常配置初始化整个应用程序。有没有办法在通过 Jenkins 或其他工具部署后自动执行集成测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:32:30.007

您可能需要检查[Arquillian](http://www.jboss.org/arquillian.html)，它可以在您的容器中运行测试。即使是远程的。

我说：

> 没有更多的嘲笑。没有更多的容器生命周期和部署麻烦。只是真实的测试！

# c++ - 复制（）将除最后一个元素之外的所有元素从向量复制到数组c ++

> ID：12960105
> 
> 赞同：1
> 
> 时间：2012-10-18T17:13:07.540
> 
> 标签：c++, arrays, vector, copy

我是 C++ 和一般编程的新手。随时留下关于我的代码的任何提示、提示或建议！

我正在尝试将我的双打从一个向量复制到一个数组。我使用 `copy()`它，它正在复制除最后一个之外的所有元素。所以数组中的最后一个元素与我使用复制之前完全相同。因此，当我尝试将数组中元素的总和相加时，我没有得到正确的总和。

这是我的代码：

```
vector<double> myVector; 
double myArray[4];
double myDouble = 0.0;

    ...//(add elements to vector)

    copy(&myVector[0], &myVector[4], myArray);

for(int i = 0; i < 4; i++)
{
    myDouble += myArray[i];
    if(i == 4)
        cout << "The sum of your values is " << fixed << setprecision(2) << myDouble << endl;
} 
```

谢谢！让我知道是否需要更具体。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T17:20:01.610

调用`std::copy()`复制四个元素。这似乎填满了你的数组。请注意，您的数组正好包含 4 个元素，最后一个有效索引是`3`. 您的向量`myVector`似乎至少包含 5 个元素：如果它包含少于 5 个元素，则表达式`myVector[4]`是非法的。也就是说，序列中的结束迭代器总是指序列最后一个值后面的元素，即序列是半开的：包括开始，结束是不包括的第一个元素。

也就是说，您可能想要这样复制：

```
std::copy(myVector.begin(), std::min(4, myVector.size()) + myVector.begin(), myArray); 
```

当然，要获得您实际使用的向量中元素的总和

```
double sum = std::accumulate(myVector.begin(), myVector.end(), 0.0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T17:17:44.773

以这种方式复制向量中的所有元素：

```
copy(myVector.begin(), myVector.end(), myArray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T17:20:49.347

你有这个代码：

```
copy(&myVector[0], &myVector[4], myArray); 
```

它复制了 4 个元素。现在您已经声明了目标数组：

```
double myArray[4]; 
```

所以数组有4个元素。

似乎您想复制*除最后一个元素之外的所有元素*，因此只复制 3 个元素：

```
copy(&myVector[0], &myVector[3], myArray); 
```

# android - 根据 AID，market-api 找不到姜饼上方的应用程序

> ID：12960106
> 
> 赞同：0
> 
> 时间：2012-10-18T17:13:12.060
> 
> 标签：android, google-play, android-market-filtering

我正在使用标准的市场 API 代码 - 在这里发布它没什么特别的。我有三种情况：

1.  AID = 3..... -> 显示应用程序，但仅当它们的目标低于 2.3
2.  无 AID -> 与 1 相同
3.  我的 AID (6...) -> HTTP 400

所以它似乎只适用于以“3”开头的 AID。但是我需要解决同样高于 2.3 的应用程序。有人有解决办法吗？（我肯定会给他赏金，因为我找不到任何信息。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T18:09:11.223

我找到了 setDeviceAndSDK 方法，但它根本没有帮助。还尝试使用修改后的值编译最新代码，但仍然相同。所以最后我用

```
https://play.google.com/store/apps/details?id=" + pkg + "&hl=en" 
```

抓取我需要的所有值。

# android - 可变小部件拨号

> ID：12960109
> 
> 赞同：1
> 
> 时间：2012-10-18T17:13:22.373
> 
> 标签：android, image, android-appwidget

到目前为止，我有：

```
public class Info extends Activity {

    int mAppWidgetId = AppWidgetManager.INVALID_APPWIDGET_ID;
    public Info() {
        super();
    }

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);

        setResult(RESULT_CANCELED);

        setContentView(R.layout.widget_activity_info);

        findViewById(R.id.save_button).setOnClickListener(mOnClickListener);

        Intent intent = getIntent();
        Bundle extras = intent.getExtras();
        if (extras != null) {
            mAppWidgetId = extras.getInt(
                    AppWidgetManager.EXTRA_APPWIDGET_ID, AppWidgetManager.INVALID_APPWIDGET_ID);
        }
    }

    View.OnClickListener mOnClickListener = new View.OnClickListener() {
        public void onClick(View v) {
            final Context context = Info.this;

            AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);

            RemoteViews views = new RemoteViews(context.getPackageName(),
                    R.layout.widget_activity);
                    appWidgetManager.updateAppWidget(mAppWidgetId, views);

            Intent resultValue = new Intent();
            resultValue.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, mAppWidgetId);
            setResult(RESULT_OK, resultValue);
            finish();
        }
    };

} 
```

基于此，我希望保存按钮成为默认图像，并制作另一个按钮，将 android:dial="@drawable/widgetdial" 更改为 android:dial="@drawable/widgetdial2"。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:07:49.393

好的，所以如果我理解正确，您希望在您的小部件配置活动 ( `Info`) 中有两个按钮。一个按钮将在小部件本身中切换图像（在`R.drawable.widgetdial`和之间`R.drawable.widgetdial2`）。另一个按钮将保存选择并退出`Info`活动。正确的？

当然，您需要在布局中为您的`Info`活动添加一个按钮。我在下面引用了这个`R.id.change_button`作为示例。

我已经对此进行了测试，并且可以正常工作。我在您的代码中添加了一些代码，并用注释标记了新代码：

```
public class Info extends Activity {

    //next three lines is new code
    private int drawableSrc;
    private TextView statusText;
    private Button changeButton;

    int mAppWidgetId = AppWidgetManager.INVALID_APPWIDGET_ID;
    public Info() {
        super();
    }

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);

        setResult(RESULT_CANCELED);

        setContentView(R.layout.widget_activity_info);

        findViewById(R.id.save_button).setOnClickListener(mOnClickListener);

        //next six lines is new code
        statusText = (TextView)findViewById(R.id.text);
        statusText.setText("Now showing widgetdial image");
        changeButton = (Button)findViewById(R.id.change_button);
        changeButton.setText("Change to widgetdial2 image");
        drawableSrc = R.drawable.widgetdial;
        changeButton.setOnClickListener(changeOnClickListener);

        Intent intent = getIntent();
        Bundle extras = intent.getExtras();
        if (extras != null) {
            mAppWidgetId = extras.getInt(
                    AppWidgetManager.EXTRA_APPWIDGET_ID, AppWidgetManager.INVALID_APPWIDGET_ID);
        }
    }

    View.OnClickListener mOnClickListener = new View.OnClickListener() {
        public void onClick(View v) {
            final Context context = Info.this;

            AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);

            RemoteViews views = new RemoteViews(context.getPackageName(),
                    R.layout.widget_activity);

            //next line is new code, needs to come before updateWidgetApp
            views.setImageViewResource(R.id.viewid, drawableSrc);

            appWidgetManager.updateAppWidget(mAppWidgetId, views);

            Intent resultValue = new Intent();
            resultValue.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, mAppWidgetId);
            setResult(RESULT_OK, resultValue);
            finish();
        }
    };

    //everything below this is new code
    View.OnClickListener changeOnClickListener = new View.OnClickListener() {
        public void onClick(View v) {
            if(drawableSrc == R.drawable.widgetdial) {
                drawableSrc = R.drawable.widgetdial2;
                statusText.setText("Now showing widgetdial2 image");
                changeButton.setText("Change to widgetdial image");
            }
            else {
                drawableSrc = R.drawable.widgetdial;
                statusText.setText("Now showing widgetdial image");
                changeButton.setText("Change to widgetdial2 image");
            }
        }
    };
} 
```

我已将您要更改的内容引用为`R.id.viewid`，但这当然只是一个示例 ID 引用。

根据您要确切更改的内容（小部件背景或小部件图像视图？），您可以在这里查看：[Other SO question](https://stackoverflow.com/questions/6333774/change-remoteview-imageview-background)

这是我用于`Info`活动的示例布局（您引用为的文件`R.id.widget_activity_info`）：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <TextView
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true" />
    <Button
        android:id="@+id/change_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_below="@id/text" />
    <Button
        android:id="@+id/save_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:text="Save"
        android:layout_below="@id/change_button" />
</RelativeLayout> 
```

如果它仍然对您不起作用，请查看[我为您上传的示例](https://www.dropbox.com/s/vn53vyqzx0tmg1f/example_workspace.zip)。zip 文件包含您可以导入到 eclipse 中的工作区。您可以在模拟器中运行它。

我希望这可以帮助你。

# search - 从城市获取电话号码和地址的服务

> ID：12960116
> 
> 赞同：1
> 
> 时间：2012-10-18T17:13:42.387
> 
> 标签：search

我必须为我们的网站创建城市页面，该页面需要列出该特定城市的一些随机电话号码和地址。是否有任何可用的服务可以帮助我完成此任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:17:21.297

有一个 WhitePage API 可用，但我不太了解他们的定价

[http://developer.whitepages.com/](http://developer.whitepages.com/)

# javascript - SetInterval 不刷新 Chrome 中的 HTML

> ID：12960117
> 
> 赞同：2
> 
> 时间：2012-10-18T17:13:46.537
> 
> 标签：javascript, google-chrome, timer, safari, setinterval

我正在尝试实现一个脚本，该脚本基本上从 30 秒倒计时到 0，并在 0 时重定向到主页。但是，我注意到我的脚本仅适用于 Firefox，但不适用于 Chrome 和 Safari。在这些浏览器上，计数器在 30 秒时仍然“卡住”——从不刷新 HTML，但重定向工作正常。不确定我是否做错了什么，或者 setInterval 是否不是这种事情的正确方法。

```
<script>
   var seconds = 31;
   var counter = setInterval("timer()", 1000);
   function timer() {
        seconds = seconds - 1;
        if (seconds < 0) {
            setTimeout("location.href='http://www.homepage.com';", 100);
            return;
        }
        updateTimer();
   }

   function updateTimer() {
         document.getElementById('timer').innerHTML = "Redirecting in " + " " + seconds + " " +  "seconds";
   }
  </script> 
```

提前致谢！

编辑：太奇怪了，我的代码（以及你所有的代码）都在 JSFiddle 上工作，但它只是在实际呈现页面时未能“重新绘制”HTMLinner。秒数变化很好（我将它们输出到控制台），只是没有呈现变化。

最终编辑：这个问题基本上是由无效的 CSS 引起的。我相信 - 计数器在照片上方运行，我将跨度设置为具有更高 z-index 和顶部和底部元素的相对定位。我不相信这对于不是块的东西是可以接受的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T17:24:16.317

这是一个工作示例：

```
(function() { // wrapper for locals
  var timer = document.getElementById("timer"),
    seconds = 5,
    counter = setInterval(function() {
      if (--seconds < 1) {
        clearInterval(counter);
        timer.innerHTML = "Redirecting now...";
        setTimeout(function() {
          location.href = 'http://www.homepage.com';
        }, 500);
      } else {
        timer.innerHTML = timer.innerHTML.replace(/\d+/, seconds);
      }
    }, 1000);
})();
```

```
<div id="timer">Redirecting in 5 seconds</div>
```

​ ​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-12T11:53:52.960

将您的函数更改为对我有用的变量：

```
<script>
   var seconds = 31;
   var counter = setInterval(timer, 1000);
   var timer = function() {
        seconds = seconds - 1;
        if (seconds < 0) {
            setTimeout("location.href='http://www.homepage.com';", 100);
            return;
        }
        updateTimer();
   }

   function updateTimer() {
         document.getElementById('timer').innerHTML = "Redirecting in " + " " + seconds + " " +  "seconds";
   }
  </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T17:21:50.187

这是一个定义函数更少的更简洁的实现（带有[demo](http://jsfiddle.net/hLJkK/)）：

```
<span id='timer'></span>
<script>
var seconds = 31;
setInterval(function() {
  seconds = seconds - 1;
  if (seconds < 0) {
    setTimeout(function() {document.getElementById('timer').innerHTML = "redirecting..."}, 100);
    return;
  }
  updateTimer();
}, 1000);

function updateTimer() {
  document.getElementById('timer').innerHTML = "Redirecting in " + + seconds + " seconds";
}
<script> 
```

当然，每个 JavaScript 程序员都应该有机会指出“eval 是邪恶的”，其中包括将字符串传递给 setInterval 和 setTimeout :)

# master-data-services - Master Data Services 实体错误

> ID：12960120
> 
> 赞同：0
> 
> 时间：2012-10-18T17:13:56.240
> 
> 标签：master-data-services

我开始使用 Master Data Services，但遇到了一些奇怪的事情。当我部署示例模型和实体并随后访问主数据管理器网站时，我在模型名称下左列的“系统管理”下看到实体的树结构。 ![在此处输入图像描述](../Images/e610d0848ca20f4eb2fc0a07bd1b6da0.png)

但是，当我创建自己的模型和实体（+属性）时，在左侧的模型下找不到实体。 ![我的 MDS 网站截图](../Images/0e9bb10bdddf8b9d320c466b1f31de1b.png) 我怎样才能解决这个问题？

我想这也是我在尝试通过 API 创建成员时收到“无效实体”错误消息的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:50:56.887

我能够解决这个问题，尽管我不确定是否真的有必要“修复”。创建实体时，如果将“启用显式层次结构和集合”设置为“是”，该实体也将放置在左侧树视图中。我不确定是否绝对有必要为至少一个实体这样做，但它确实对我的情况有所帮助。Microsoft 提到了以下内容 ( [http://technet.microsoft.com/en-us/library/ff487054.aspx](http://technet.microsoft.com/en-us/library/ff487054.aspx) )：

> 从启用显式层次结构和集合列表中，选择以下选项之一：
> 
> 否。如果您不需要为显式层次结构和集合启用实体，请选择此选项。如果需要，您可以稍后更改。
> 
> 是的。当您想要为显式层次结构和集合启用实体时选择此选项。在显式层次结构名称框中，键入名称。或者，选择强制层次结构（包括所有叶成员以使显式层次结构成为强制层次结构。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T06:11:54.230

“奇怪”的视图是模型视图，从左到右添加的实体将显示在“资源管理器”视图中（在资源管理器功能内部，也有一个资源管理器菜单）。

# perl - 在 perl 中停止 unix 命令执行的控制台输出

> ID：12960121
> 
> 赞同：-1
> 
> 时间：2012-10-18T17:14:00.920
> 
> 标签：perl, unix

我在 perl 中运行 unix 命令

```
$cmd="ls -l";
$result=`$cmd`;
print $log_file $result; 
```

但执行的输出也会打印在屏幕上。如何执行命令而不在屏幕上打印结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T17:16:36.803

标准输出流不会打印到屏幕上——它被捕获到`$result`. 但是还有第二个输出流，称为程序可以写入的标准错误流，默认情况下也会显示在屏幕上。许多程序使用此流进行日志记录，或（在 的情况下`ls`）用于编写错误消息。要另外捕获这一点，请使用

```
$cmd = "ls -l 2>&1"; 
```

要丢弃它，请使用

```
$cmd = "ls -l 2>/dev/null"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:16:59.843

我认为有一个错误。在 shell 中尝试：

```
perl -e 'my $x = `ls -l`;' 
```

这不会产生任何输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T18:39:58.213

它发生可能是因为`$log_file`以某种方式附加到`STDOUT`，复制到它，例如：

```
open(my $log_file, ">&STDOUT") 
```

# java - 匹配正则表达式中的任何字符？

> ID：12960123
> 
> 赞同：0
> 
> 时间：2012-10-18T17:14:16.807
> 
> 标签：java, regex

我有一个能够匹配评论的状态机。所以它可以处理：

```
/* /* */ */ 
```

但我陷入了跳过评论行内的内容。目前我的`comments-word`正则表达式看起来有些奇怪：

```
[0-9A-Za-zA-Z0-9\*\(\*\*\)\.\{\}\_\;\,\-\:" "\@]* 
```

是否有任何简单的正则表达式（在 java 中）匹配所有字符？字母和特殊字符？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:15:49.157

`.`如果要匹配任何字符，请使用(dot)。

[见这里：**点**](http://www.regular-expressions.info/dot.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:16:19.877

`.`匹配任何东西一次。 `.*`将匹配 0 个或多个任何内容，而`.+`将匹配一个或多个，具体取决于您的需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T17:16:34.447

`.`是匹配所有其他字符的字符，换行符可能除外（取决于是否[`DOTALL`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#DOTALL)启用）。

如果您想匹配除一两个特定字符之外的所有内容，请使用`[^...]`语法（例如`[^0-9a-fA-F]`避免匹配每个十六进制数字）。

在表达式后面添加一个点通常很有用`?`，以匹配尽可能少的字符（例如`.*?`or `.+?`）。否则，未终止的点表达式可能会匹配字符串的其余部分。

# php - 使用 PHP 回溯的 Levenshtein 距离

> ID：12960124
> 
> 赞同：10
> 
> 时间：2012-10-18T17:14:20.173
> 
> 标签：php, levenshtein-distance

我正在尝试使用 Levenshtein 距离算法在 PHP 中对齐字符串。问题是我的回溯代码在所有情况下都不能正常工作。例如，当第二个数组在开头插入行时。那么回溯只会在 i=0 时进行。

如何正确实现 Levenshtein 距离的回溯？

Levenshtein 距离，$s 和 $t 是字符串数组（行）

```
function match_rows($s, $t)
{
$m = count($s);
$n = count($t);

for($i = 0; $i <= $m; $i++) $d[$i][0] = $i;
for($j = 0; $j <= $n; $j++) $d[0][$j] = $j;

for($i = 1; $i <= $m; $i++)
{
    for($j = 1; $j <= $n; $j++)
    {
        if($s[$i-1] == $t[$j-1])
        {
            $d[$i][$j] = $d[$i-1][$j-1];
        }
        else
        {
            $d[$i][$j] = min($d[$i-1][$j], $d[$i][$j-1], $d[$i-1][$j-1]) + 1;
        }
    }
}

// backtrace
$i = $m;
$j = $n;
while($i > 0 && $j > 0)
{
    $min = min($d[$i-1][$j], $d[$i][$j-1], $d[$i-1][$j-1]);

    switch($min)
    {
        // equal or substitution
        case($d[$i-1][$j-1]):
            if($d[$i][$j] != $d[$i-1][$j-1])
            {
                // substitution
                $sub['i'][] = $i;
                $sub['j'][] = $j;
            }
            $i = $i - 1;
            $j = $j - 1;
            break;

        // insertion
        case($d[$i][$j-1]):
            $ins[] = $j;
            $j = $j - 1;
            break;

        // deletion
        case($d[$i-1][$j]):
            $del[] = $i;
            $i = $i - 1;
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:03:08.733

这不是挑剔，而是帮助您找到您想要的答案（并改进您的实施）。

您使用的算法是 Wagner-Fischer 算法，而不是 Levenshtein 算法。此外，Levenshtein 距离不用于对齐字符串。这是严格的距离测量。

有两种对齐方式：全局对齐和局部对齐。全局对齐用于最小化两个完整字符串之间的距离。示例：在“REACH”上全局对齐“RACE”，你会得到“RxACx”。x 是间隙。

一般来说，这是 Needleman-Wunsch 算法，它与 Wagner-Fischer 算法非常相似。局部对齐在长字符串中找到子字符串，并最小化短字符串和长字符串的子字符串之间的差异。

示例：在“UMBRELLA”上局部对齐“BELL”，然后在“BRELL”上对齐“BxELL”。这是 Smith-Waterman 算法，它再次与 Wagner-Fischer 算法非常相似。

我希望这有助于您更好地定义所需的确切对齐方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T21:34:06.567

我认为您的错误正是您*在问题中所说的*：您立即停止`i==0`，而不是一直到`i==0 && j==0`。只需替换此条件：

```
while($i > 0 && $j > 0) 
```

和

```
while ($i > 0 || $j > 0) 
```

你的解决方案已经完成了一半。棘手的一点是，如果`$i==0`, 那么`$i-1`在循环体中使用数组索引是不正确的。因此，您还必须将循环的主体更改为更像

```
while ($i || $j) {
    $min = $d[$i][$j];  // or INT_MAX or something
    if ($i && $j && $min > $d[$i-1][$j-1]) {
        $newi = $i-1;
        $newj = $j-1;
        $min = $d[$newi][$newj];
    }
    if ($i && $min > $d[$i-1][$j]) {
        $newi = $i-1;
        $newj = $j;
        $min = $d[$newi][$newj];
    }
    if ($j && $min > $d[$i][$j-1]) {
        $newi = $i;
        $newj = $j-1;
        $min = $d[$newi][$newj];
    }

    // What sort of transformation is this?
    if ($newi == $i && $newj == $j) {
        assert(false);  // should never happen
    } else if ($newi == $i) {
        // insertion
        $ins[] = $j;
    } else if ($newj == $j) {
        // deletion
        $del[] = $i;
    } else if ($d[$i][$j] != $d[$newi][$newj]) {
        // substitution
        $sub['i'][] = $i;
        $sub['j'][] = $j;
    } else {
        // identity
    }

    assert($newi >= 0); assert($newj >= 0);
    $i = $newi;
    $j = $newj;
} 
```

# php - 如何使网址混淆

> ID：12960127
> 
> 赞同：1
> 
> 时间：2012-10-18T17:14:24.817
> 
> 标签：php, .htaccess, wordpress

我想在 wordpress 中混淆图像和下载视频 url，以便访问者看不到图像和视频 url 的确切路径。我为此尝试了短 url 插件，但它不起作用。请让我知道我可以使用的 wordpress 中的任何插件，或者我可以使用 htaccess 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-11T04:08:34.493

混淆媒体 URL 不是没用的，它有它自己的目的。这是一个例子：

你有一个这样的画廊/图像：

```
http://example.com/images/gallery-001/img-001.jpg
http://example.com/images/gallery-001/img-002.jpg
http://example.com/images/gallery-001/img-003.jpg
and so on... 
```

混淆网址是防止典型的非技术观众猜测图像网址而不是在现场查看它们的好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:39:11.960

当然，混淆媒体 URL 是可能的，但它没有意义。如果您不希望人们看到实际来源，只需将文件下载到您自己的服务器上并替换链接即可。

# ruby-on-rails-3 - 如何在更新时锁定PostgreSQL中的某些行并让其他人阅读？

> ID：12960132
> 
> 赞同：1
> 
> 时间：2012-10-18T17:14:46.820
> 
> 标签：ruby-on-rails-3, postgresql, activerecord

我想更新表中的一些行，并且我想锁定它们以便其他进程不会同时更新它们。但我希望其他进程能够阅读它们。

我试图完成它的方式是这样的：

```
MyTable.where(mycolumn: "some value").lock(true).update_all(mycolumn: "other value") 
```

我认为这`lock(true)`是锁定选定的行（这是文档所说的），但我不知道它们是否可同时用于其他选择。所以我认为我应该强制使用“共享模式”。

我正在尝试这个：

```
MyTable.where(mycolumn: "some value").lock("LOCK IN SHARE MODE").update_all(mycolumn: "other value") 
```

但它引发了这个错误：

```
STATEMENT:  SELECT  "my_table".* FROM "my_table"  WHERE "my_table"."mycolumn" = $1 LIMIT 1 LOCK IN SHARE MODE
ERROR:  syntax error at or near "LOCK" at character 74 
```

它虽然适用于 SQLite。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:21:37.927

> 我想更新表中的一些行，并且我想锁定它们以便其他进程不会同时更新它们。但我希望其他进程能够阅读它们。

这是自动保证的。看起来您正在尝试解决不存在的问题:-)

在第一次更新完成之前，其他进程不会更新。

在 postgres 中，读取永远不会被写入阻塞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:42:56.293

我对 RoR 一无所知，但是对于 PostgreSQL，我认为您的错误消息中的 SQL 语句不起作用。PostgreSQL 中的锁通常通过以下方式完成： SELECT * from [YOUR_TABLE] where [CONDITION] FOR UPDATE

有关更多文档，请参阅此页面：[http ://www.postgresql.org/docs/9.2/static/explicit-locking.html](http://www.postgresql.org/docs/9.2/static/explicit-locking.html)

# java - 无法同时启动 Alfresco 和 Ephesoft 应用程序

> ID：12960136
> 
> 赞同：0
> 
> 时间：2012-10-18T17:14:59.517
> 
> 标签：java, tomcat, jvm, connection, alfresco

好的，所以我不得不在我们的服务器上安装另一个 Alfresco 实例（版本 4.1.1），因为我们之前的试用版已经过期，我们仍在等待获得许可证。以前我们在 8080 端口上安装了 Alfresco，在 8081 端口上安装了 Ephesoft，一切似乎都运行良好。

现在将这个新的 Alfresco 实例安装到端口 8082 后，我无法让它们同时启动。

在 Alfresco 的日志中，我收到以下错误：

```
16:59:54,123 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Starting 'sysAdmin' subsystem, ID: [sysAdmin, default]
16:59:54,170 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Startup of 'sysAdmin' subsystem, ID: [sysAdmin, default] complete
16:59:59,452 WARN  [org.alfresco.util.AbstractTriggerBean] Job ehCacheTracerJob is not active
17:00:01,936 INFO  [org.springframework.extensions.webscripts.TemplateProcessorRegistry] Registered template processor Repository Template Processor for extension ftl
17:00:01,952 INFO  [org.springframework.extensions.webscripts.ScriptProcessorRegistry] Registered script processor Repository Script Processor for extension js
17:00:05,780 INFO  [org.alfresco.repo.domain.schema.SchemaBootstrap] Schema managed by database dialect org.alfresco.repo.domain.hibernate.dialect.AlfrescoOracle9Dialect.
17:00:05,795 INFO  [org.alfresco.repo.domain.schema.SchemaBootstrap] Bypassing schema update checks.
17:00:06,030 DEBUG [org.alfresco.repo.module] preRegister called. Server=com.sun.jmx.mbeanserver.JmxMBeanServer@6e70c7, name=log4j:logger=org.alfresco.repo.module
17:00:06,030 DEBUG [org.alfresco.repo.module.ModuleComponentHelper] preRegister called. Server=com.sun.jmx.mbeanserver.JmxMBeanServer@6e70c7, name=log4j:logger=org.alfresco.repo.module.ModuleComponentHelper
17:00:06,280 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Starting 'Search' subsystem, ID: [Search, managed, solr]
17:00:06,358 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Startup of 'Search' subsystem, ID: [Search, managed, solr] complete
17:00:06,624 INFO  [org.alfresco.enterprise.repo.sync.SyncAdminServiceImpl] There is no key for cloud sync, cloud sync turned off
17:00:06,639 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Starting 'thirdparty' subsystem, ID: [thirdparty, default]
17:00:06,780 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Startup of 'thirdparty' subsystem, ID: [thirdparty, default] complete
17:00:06,780 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Starting 'OOoDirect' subsystem, ID: [OOoDirect, default]
17:00:06,811 WARN  [org.alfresco.util.AbstractTriggerBean] Job openOfficeConnectionTesterTrigger is not enabled
17:00:06,936 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Startup of 'OOoDirect' subsystem, ID: [OOoDirect, default] complete
17:00:06,936 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Starting 'OOoJodconverter' subsystem, ID: [OOoJodconverter, default]
17:00:07,545 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Startup of 'OOoJodconverter' subsystem, ID: [OOoJodconverter, default] complete
17:00:07,545 INFO  [org.alfresco.repo.admin.ConfigurationChecker] The Alfresco root data directory ('dir.root') is: C:\Alfresco\alf_data
17:00:07,561 INFO  [org.alfresco.repo.admin.patch.PatchExecuter] Checking for patches to apply ...
17:00:08,530 INFO  [org.alfresco.repo.admin.patch.PatchExecuter] No patches were required.
17:00:08,545 INFO  [org.alfresco.repo.module.ModuleServiceImpl] Found 2 module(s).
17:00:08,577 INFO  [org.alfresco.repo.module.ModuleServiceImpl] Starting module 'org_alfresco_module_wcmquickstart' version 1.0.
17:00:08,577 DEBUG [org.alfresco.repo.module.ModuleComponentHelper] Started module 'ModuleDetails[{module.version=1.0, module.description=Web Quick Start, module.id=org_alfresco_module_wcmquickstart, module.repo.version.max=999, module.title=Web Quick Start, module.repo.version.min=3.3, module.installState=INSTALLED, module.installDate=2012-10-09T21:04:56.752-04:00}]' including 0components.
17:00:08,592 INFO  [org.alfresco.repo.module.ModuleServiceImpl] Starting module 'org.alfresco.module.vti' version 1.2.
17:00:08,592 DEBUG [org.alfresco.repo.module.ModuleComponentHelper] Started module 'ModuleDetails[{module.version=1.2, module.description=Alfresco Vti Extension, module.id=org.alfresco.module.vti, module.repo.version.max=999, module.title=Vti, module.repo.version.min=0, module.installState=INSTALLED, module.installDate=2012-10-09T21:04:52.080-04:00}]' including 0components.
17:00:08,608 DEBUG [org.alfresco.repo.module.ModuleComponentHelper] Installed module found in distribution: org_alfresco_module_wcmquickstart
17:00:08,608 DEBUG [org.alfresco.repo.module.ModuleComponentHelper] Installed module found in distribution: org.alfresco.module.vti
17:00:08,608 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Starting 'fileServers' subsystem, ID: [fileServers, default]
17:00:08,874 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Starting 'Authentication' subsystem, ID: [Authentication, managed, ldap1]
17:00:09,374 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Startup of 'Authentication' subsystem, ID: [Authentication, managed, ldap1] complete
17:00:09,374 ERROR [org.alfresco.fileserver] No enabled CIFS authenticator found in authentication chain. CIFS Server disabled
17:00:09,389 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Startup of 'fileServers' subsystem, ID: [fileServers, default] complete
17:00:09,389 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Starting 'imap' subsystem, ID: [imap, default]
17:00:09,467 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Startup of 'imap' subsystem, ID: [imap, default] complete
17:00:09,467 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Starting 'email' subsystem, ID: [email, outbound]
17:00:09,499 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Startup of 'email' subsystem, ID: [email, outbound] complete
17:00:09,499 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Starting 'email' subsystem, ID: [email, inbound]
17:00:09,592 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Startup of 'email' subsystem, ID: [email, inbound] complete
17:00:09,592 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Starting 'googledocs' subsystem, ID: [googledocs, default]
17:00:09,624 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Startup of 'googledocs' subsystem, ID: [googledocs, default] complete
17:00:09,624 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Starting 'Subscriptions' subsystem, ID: [Subscriptions, default]
17:00:09,639 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Startup of 'Subscriptions' subsystem, ID: [Subscriptions, default] complete
17:00:09,639 INFO  [org.alfresco.repo.usage.UserUsageTrackingComponent] Disabled - clear non-missing user usages ...
17:00:09,639 INFO  [org.alfresco.repo.usage.UserUsageTrackingComponent] Found 0 users to clear
17:00:09,639 INFO  [org.alfresco.repo.usage.UserUsageTrackingComponent] ... cleared non-missing usages for 0 users
17:00:09,639 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Starting 'Synchronization' subsystem, ID: [Synchronization, default]
17:00:09,670 INFO  [org.alfresco.repo.security.sync.ChainingUserRegistrySynchronizer] Synchronizing users and groups with user registry 'ldap1'
17:00:09,686 INFO  [org.alfresco.repo.security.sync.ChainingUserRegistrySynchronizer] Retrieving groups changed since Sep 11, 2012 3:54:45 PM from user registry 'ldap1'
17:00:09,702 INFO  [org.alfresco.repo.security.sync.ChainingUserRegistrySynchronizer] ldap1 Group Analysis: Commencing batch of 0 entries
17:00:09,717 INFO  [org.alfresco.repo.security.sync.ChainingUserRegistrySynchronizer] ldap1 Group Analysis: Completed batch of 0 entries
17:00:09,717 INFO  [org.alfresco.repo.security.sync.ChainingUserRegistrySynchronizer] Retrieving users changed since Oct 9, 2012 2:39:10 PM from user registry 'ldap1'
17:00:09,717 INFO  [org.alfresco.repo.security.sync.ChainingUserRegistrySynchronizer] ldap1 User Creation and Association: Commencing batch of 0 entries
17:00:09,717 INFO  [org.alfresco.repo.security.sync.ChainingUserRegistrySynchronizer] ldap1 User Creation and Association: Completed batch of 0 entries
17:00:09,733 INFO  [org.alfresco.repo.security.sync.ChainingUserRegistrySynchronizer] Finished synchronizing users and groups with user registry 'ldap1'
17:00:09,733 INFO  [org.alfresco.repo.security.sync.ChainingUserRegistrySynchronizer] 0 user(s) and 0 group(s) processed
17:00:09,749 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Startup of 'Synchronization' subsystem, ID: [Synchronization, default] complete
17:00:09,780 INFO  [org.alfresco.service.descriptor.DescriptorService] Alfresco JVM - v1.6.0_33-b03; maximum heap size 682.688MB
17:00:09,858 INFO  [org.alfresco.service.descriptor.DescriptorService] Alfresco license: Mode ENTERPRISE granted to Trial User limited to 30 days expiring Sat Nov 17 00:00:00 EST 2012 (30 days remaining).
17:00:09,858 INFO  [org.alfresco.service.descriptor.DescriptorService] Alfresco started (Enterprise). Current version: 4.1.1 (159) schema 5,115\. Originally installed version: 4.1.1 (159) schema 5,115.
17:00:09,858 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Starting 'ActivitiesFeed' subsystem, ID: [ActivitiesFeed, default]
17:00:09,905 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Startup of 'ActivitiesFeed' subsystem, ID: [ActivitiesFeed, default] complete
17:00:09,905 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Starting 'Replication' subsystem, ID: [Replication, default]
17:00:09,920 INFO  [org.alfresco.repo.management.subsystems.ChildApplicationContextFactory] Startup of 'Replication' subsystem, ID: [Replication, default] complete
17:00:11,170 INFO  [org.alfresco.module.vti.VtiServer] Vti server started successfully on port: 7070
17:00:11,170 INFO  [org.alfresco.module.vti.VtiServer] Vti server SessionIdManagerWorkerName: jetty1
17:00:17,280 INFO  [org.springframework.extensions.webscripts.DeclarativeRegistry] Registered 515 Web Scripts (+0 failed), 798 URLs
17:00:17,280 INFO  [org.springframework.extensions.webscripts.DeclarativeRegistry] Registered 2 Package Description Documents (+0 failed) 
17:00:17,280 INFO  [org.springframework.extensions.webscripts.DeclarativeRegistry] Registered 1 Schema Description Documents (+0 failed) 
17:00:17,280 INFO  [org.springframework.extensions.webscripts.AbstractRuntimeContainer] Initialised Repository Web Script Container (in 4356.886ms)
17:00:17,280 INFO  [org.springframework.extensions.webscripts.TemplateProcessorRegistry] Registered template processor freemarker for extension ftl
17:00:17,296 INFO  [org.springframework.extensions.webscripts.ScriptProcessorRegistry] Registered script processor javascript for extension js
17:00:31,389 ERROR [org.quartz.core.JobRunShell] Job DEFAULT.org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean#1353154 threw an unhandled Exception: 
org.springframework.scheduling.quartz.JobMethodInvocationFailedException: Invocation of method 'run' on target class [class org.alfresco.module.org_alfresco_module_wcmquickstart.jobs.FeedbackProcessor] failed; nested exception is org.alfresco.repo.search.impl.lucene.LuceneQueryParserException: 09180002 
    at org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean$MethodInvokingJob.executeInternal(MethodInvokingJobDetailFactoryBean.java:273)
    at org.springframework.scheduling.quartz.QuartzJobBean.execute(QuartzJobBean.java:86)
    at org.quartz.core.JobRunShell.run(JobRunShell.java:216)
    at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:563)
Caused by: org.alfresco.repo.search.impl.lucene.LuceneQueryParserException: 09180002 
    at org.alfresco.repo.search.impl.solr.SolrQueryHTTPClient.executeQuery(SolrQueryHTTPClient.java:404)
    at org.alfresco.repo.search.impl.solr.SolrQueryLanguage.executeQuery(SolrQueryLanguage.java:49)
    at org.alfresco.repo.search.impl.solr.SolrSearchService.query(SolrSearchService.java:348)
    at org.alfresco.repo.search.impl.solr.SolrSearchService.query(SolrSearchService.java:152)
    at org.alfresco.repo.search.SearcherComponent.query(SearcherComponent.java:67)
    at org.alfresco.repo.search.AbstractSearcherComponent.query(AbstractSearcherComponent.java:53)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.alfresco.repo.management.subsystems.SubsystemProxyFactory$1.invoke(SubsystemProxyFactory.java:72)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy13.query(Unknown Source)
    at org.alfresco.module.org_alfresco_module_wcmquickstart.jobs.FeedbackProcessor$1$1.execute(FeedbackProcessor.java:92)
    at org.alfresco.repo.transaction.RetryingTransactionHelper.doInTransaction(RetryingTransactionHelper.java:388)
    at org.alfresco.repo.transaction.RetryingTransactionHelper.doInTransaction(RetryingTransactionHelper.java:259)
    at org.alfresco.module.org_alfresco_module_wcmquickstart.jobs.FeedbackProcessor$1.doWork(FeedbackProcessor.java:82)
    at org.alfresco.repo.security.authentication.AuthenticationUtil.runAs(AuthenticationUtil.java:516)
    at org.alfresco.module.org_alfresco_module_wcmquickstart.jobs.FeedbackProcessor.run(FeedbackProcessor.java:77)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.util.MethodInvoker.invoke(MethodInvoker.java:273)
    at org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean$MethodInvokingJob.executeInternal(MethodInvokingJobDetailFactoryBean.java:264)
    ... 3 more
Caused by: java.net.SocketException: Software caused connection abort: recv failed
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at com.sun.net.ssl.internal.ssl.InputRecord.readFully(InputRecord.java:293)
    at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:331)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:830)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:787)
    at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:75)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:237)
    at org.apache.commons.httpclient.HttpParser.readRawLine(HttpParser.java:78)
    at org.apache.commons.httpclient.HttpParser.readLine(HttpParser.java:106)
    at org.apache.commons.httpclient.HttpConnection.readLine(HttpConnection.java:1116)
    at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.readLine(MultiThreadedHttpConnectionManager.java:1413)
    at org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1973)
    at org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735)
    at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098)
    at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
    at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)
    at org.alfresco.repo.search.impl.solr.SolrQueryHTTPClient.executeQuery(SolrQueryHTTPClient.java:358)
    ... 28 more
17:00:31,389 ERROR [org.quartz.core.ErrorLogger] Job (DEFAULT.org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean#1353154 threw an exception.
org.quartz.SchedulerException: Job threw an unhandled exception. [See nested exception: org.springframework.scheduling.quartz.JobMethodInvocationFailedException: Invocation of method 'run' on target class [class org.alfresco.module.org_alfresco_module_wcmquickstart.jobs.FeedbackProcessor] failed; nested exception is org.alfresco.repo.search.impl.lucene.LuceneQueryParserException: 09180002 ]
    at org.quartz.core.JobRunShell.run(JobRunShell.java:227)
    at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:563)
Caused by: org.springframework.scheduling.quartz.JobMethodInvocationFailedException: Invocation of method 'run' on target class [class org.alfresco.module.org_alfresco_module_wcmquickstart.jobs.FeedbackProcessor] failed; nested exception is org.alfresco.repo.search.impl.lucene.LuceneQueryParserException: 09180002 
    at org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean$MethodInvokingJob.executeInternal(MethodInvokingJobDetailFactoryBean.java:273)
    at org.springframework.scheduling.quartz.QuartzJobBean.execute(QuartzJobBean.java:86)
    at org.quartz.core.JobRunShell.run(JobRunShell.java:216)
    ... 1 more
Caused by: org.alfresco.repo.search.impl.lucene.LuceneQueryParserException: 09180002 
    at org.alfresco.repo.search.impl.solr.SolrQueryHTTPClient.executeQuery(SolrQueryHTTPClient.java:404)
    at org.alfresco.repo.search.impl.solr.SolrQueryLanguage.executeQuery(SolrQueryLanguage.java:49)
    at org.alfresco.repo.search.impl.solr.SolrSearchService.query(SolrSearchService.java:348)
    at org.alfresco.repo.search.impl.solr.SolrSearchService.query(SolrSearchService.java:152)
    at org.alfresco.repo.search.SearcherComponent.query(SearcherComponent.java:67)
    at org.alfresco.repo.search.AbstractSearcherComponent.query(AbstractSearcherComponent.java:53)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.alfresco.repo.management.subsystems.SubsystemProxyFactory$1.invoke(SubsystemProxyFactory.java:72)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy13.query(Unknown Source)
    at org.alfresco.module.org_alfresco_module_wcmquickstart.jobs.FeedbackProcessor$1$1.execute(FeedbackProcessor.java:92)
    at org.alfresco.repo.transaction.RetryingTransactionHelper.doInTransaction(RetryingTransactionHelper.java:388)
    at org.alfresco.repo.transaction.RetryingTransactionHelper.doInTransaction(RetryingTransactionHelper.java:259)
    at org.alfresco.module.org_alfresco_module_wcmquickstart.jobs.FeedbackProcessor$1.doWork(FeedbackProcessor.java:82)
    at org.alfresco.repo.security.authentication.AuthenticationUtil.runAs(AuthenticationUtil.java:516)
    at org.alfresco.module.org_alfresco_module_wcmquickstart.jobs.FeedbackProcessor.run(FeedbackProcessor.java:77)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.util.MethodInvoker.invoke(MethodInvoker.java:273)
    at org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean$MethodInvokingJob.executeInternal(MethodInvokingJobDetailFactoryBean.java:264)
    ... 3 more
Caused by: java.net.SocketException: Software caused connection abort: recv failed
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at com.sun.net.ssl.internal.ssl.InputRecord.readFully(InputRecord.java:293)
    at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:331)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:830)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:787)
    at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:75)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:237)
    at org.apache.commons.httpclient.HttpParser.readRawLine(HttpParser.java:78)
    at org.apache.commons.httpclient.HttpParser.readLine(HttpParser.java:106)
    at org.apache.commons.httpclient.HttpConnection.readLine(HttpConnection.java:1116)
    at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.readLine(MultiThreadedHttpConnectionManager.java:1413)
    at org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1973)
    at org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735)
    at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098)
    at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
    at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)
    at org.alfresco.repo.search.impl.solr.SolrQueryHTTPClient.executeQuery(SolrQueryHTTPClient.java:358)
    ... 28 more 
```

我认为造成这种情况的部分是......

```
 Caused by: java.net.SocketException: Software caused connection abort: recv failed
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(SocketInputStream.java:129)
        at com.sun.net.ssl.internal.ssl.InputRecord.readFully(InputRecord.java:293)
        at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:331)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:830)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:787)
        at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:75)
        at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
        at java.io.BufferedInputStream.read(BufferedInputStream.java:237)
        at org.apache.commons.httpclient.HttpParser.readRawLine(HttpParser.java:78)
        at org.apache.commons.httpclient.HttpParser.readLine(HttpParser.java:106)
        at org.apache.commons.httpclient.HttpConnection.readLine(HttpConnection.java:1116)
        at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.readLine(MultiThreadedHttpConnectionManager.java:1413)
        at org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1973)
        at org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735)
        at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098)
        at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
        at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)
        at org.alfresco.repo.search.impl.solr.SolrQueryHTTPClient.executeQuery(SolrQueryHTTPClient.java:358)
        ... 28 more 
```

在 Ephesoft 终端中，我收到以下错误：

```
fatal transport error: connection refused: connect 
```

I have looked up both the errors online, but a lot of the issues seems to say turn off your firewall, and our firewall is already disabled. I don't know if it makes a difference, but the older version of Alfresco is still there, but I moved it to the C:\OldAlfresco directory. Does anyone know why everything was fine before but now the two applications cannot run concurrently?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:46:29.333

First of all, you don't need to re-instal Alfresco after a trial.

You can do the following:

*   follow the backup & restore procedure described [here](http://wiki.alfresco.com/wiki/Backup_and_Restore) . Just do the backup.
*   delete the stuff you've back-upped (delete the content store, delete the DB, create a new DB, delete the indexes, not whole alf_data)
*   just start Alfresco and you will have another 30 days.
*   when you get your license just restore if you really need the data

P.S.: if you don't need the data you can skip step 1

And if you really want to install multiple instances, follow this [guide](http://www.appnovation.com/how-setup-multiple-instances-alfresco-different-ports)

# module - Web2py - Cron 任务调试

> ID：12960138
> 
> 赞同：0
> 
> 时间：2012-10-18T17:15:02.873
> 
> 标签：module, cron, web2py

我最近更新到最新版本的 web2py (v2.1.1) 但即使在以前的版本中我仍然遇到这个问题。

我想运行一个 cron 作业。在我努力让 cron 正常工作的过程中，我遵循了本教程。看到它工作的东西真的很简单。但我一定做错了什么，因为我不确定这是否有效。

下面是我启动 web2py 后的终端。我想每分钟运行 3 个模块。最后一个模块来自上述教程。我还遵循了教程的 logging.conf 以便输出反映在下面：

```
2012-10-18 16:50:00,060 - web2py.cron - DEBUG - hard cron invocation
2012-10-18 16:50:00,060 - web2py.cron - DEBUG - WEB2PY CRON: Acquiring lock
2012-10-18 16:50:00,061 - web2py.cron - INFO - WEB2PY CRON (hard): ircmessage executing *applications/ircmessage/modules/get_messages.py in /home/web2py/src/web2py at 2012-10-18 16:50:00.061575
2012-10-18 16:50:00,062 - web2py.cron - INFO - WEB2PY CRON (hard): ircmessage executing **applications/ircmessage/modules/addline.py in /home/web2py/src/web2py at 2012-10-18 16:50:00.062092
2012-10-18 16:50:00,065 - web2py.cron - INFO - WEB2PY CRON (hard): ircmessage executing **applications/ircmessage/modules/background_updater.py in /home/web2py/src/web2py at 2012-10-18 16:50:00.065794
2012-10-18 16:50:00,069 - web2py.cron - DEBUG - WEB2PY CRON: Releasing cron lock
2012-10-18 16:50:00,934 - web2py.cron - DEBUG - WEB2PY CRON Call returned success:
>>> 
2012-10-18 16:50:00,938 - web2py.cron - DEBUG - WEB2PY CRON Call returned success:
>>> 
2012-10-18 16:50:00,963 - web2py.cron - DEBUG - WEB2PY CRON Call returned success: 
```

这是我的 crontab：

```
#crontab
0-59/1 * * * * root *applications/ircmessage/modules/get_messages.py
0-59/1 * * * * root **applications/ircmessage/modules/addline.py
0-59/1 * * * * root **applications/ircmessage/modules/background_updater.py 
```

快速浏览一下简单的 addline.py 模块：

```
#!/usr/bin/env python
# coding: utf8
from gluon import *
from gluon.debug import dbg

with open("text.txt", "a") as myfile:
    myfile.write("appended text")

dbg.set_trace() # stop here! ** 
```

** 请注意，我使用了 dbg.set_trace - 此跟踪不会出现在管理员的调试部分中。

自从更新到 web2py 的新版本后，我注意到 cron 任务不会在启动时自动运行（但是我可能误解了这一点？）。我像这样启动 web2py：

```
./web2py.py -i xxx.xxx.xx.xx -p 8000 -c /etc/ssl/certs/my_cert_file.crt -k /etc/ssl/certs/my_cert_key.key -a apassword --run-cron 
```

任何关于如何让最简单的 cron 任务工作的建议将不胜感激。还欢迎关于我如何调试 cron 是否实际被调用的建议。实际上，一般的建议会非常有益。

提前感谢您的时间和建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:56:54.180

由于 web2py 2.1.1 cron 默认是禁用的（因为我们希望鼓励使用调度程序）。您需要 -Y 选项来启用它。

# ios6 - iOS 6 用于回合制比赛的新 API - 接受和拒绝

> ID：12960139
> 
> 赞同：7
> 
> 时间：2012-10-18T17:15:06.273
> 
> 标签：ios6, game-center

iOS 6.0 为 GKTurnBasedMatch 类添加了几个新的实例方法。我不确定如何使用它们：

```
acceptInviteWithCompletionHandler
declineInviteWithCompletionHandler 
```

是否应该在收到回合制比赛邀请时使用它们？回合制比赛邀请通过 GKTurnBasedEventHandlerDelegate 协议方法：handleInviteFromGameCenter 接收。

```
- (void) handleInviteFromGameCenter:(NSArray *)playersToInvite 
```

handleInviteFromGameCenter 不提供用于接受或拒绝的 GKTurnBasedMatch 实例。因此，我不知道如何使用它们来响应邀请。

提供 GKTurnBasedMatch 实例的唯一方法是：

```
+ loadMatchesWithCompletionHandler
+ findMatchForRequest:withCompletionHandler 
```

我不确定为什么要对 loadMatchesWithCompletionHandler 的结果使用 acceptInviteWithCompletionHandler，因为它们是我已经参与的比赛。

我不确定为什么我会将它们中的任何一个与 findMatchForRequest:withCompletionHandler 一起使用，因为它被调用来查找匹配项。找到匹配后我应该接受吗？

<- 更新->

我发现了一种用于拒绝邀请与完成处理程序的用途。如果用户请求删除他们没有参加的比赛，我会调用 dedeclineInviteWithCompletionHandler。这样他们就不会被记录为退出比赛。

*当玩家尚未转弯时，他们的 GKTurnBasedParticipant.lastTurnDate 为空*

如果用户请求进行比赛（我已使用 loadMatchesWithCompletionHandler 在列表中显示）并且本地玩家没有在比赛中轮到，我在向玩家显示比赛之前调用acceptInviteWithCompletionHandler。我不确定这是否有必要，这似乎是正确的做法。

# .htaccess - htaccess：如果找不到页面，则重定向到子域

> ID：12960140
> 
> 赞同：0
> 
> 时间：2012-10-18T17:15:07.000
> 
> 标签：.htaccess, mod-rewrite, redirect, seo

这是我的问题的描述

我已经从这条路径移动了网站

[http://www.site.com/any-thing-here-workfine](http://www.site.com/any-thing-here-workfine)

像这样子域

[http://portal.site.com/any-thing-here-workfine](http://portal.site.com/any-thing-here-workfine)

但是到现在，谷歌有我以前的链接，所有这些链接都挂了

因此，如果此页面返回未找到，我现在正在努力将此向下链接从 www 移动到子域

**意思是**

我在谷歌的链接仍然

[http://www.site.com/any-thing-here-workfine](http://www.site.com/any-thing-here-workfine) 此页面未找到

所以我想将它 301 重定向到相同的 url 但喜欢 thia

[http://portal.site.com/any-thing-here-workfine](http://portal.site.com/any-thing-here-workfine)

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T22:53:18.483

这对于 mod_rewrite 来说非常简单

```
RewriteEngine On
RewriteCond %{HTTP_HOST} =www.site.com [NC]
RewriteRule ^/?(.*) http://portal.site.com/$1 [R=301] 
```

这将重定向所有内容。但是，如果您在 www.site.com 上发布了一些新内容并且您不希望这些内容被重定向怎么办？

如果您在 www.site.com 上只有静态内容，那么这很容易。只需为不存在的文件/文件夹添加“404”测试。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} =www.site.com [NC]
# 404 test -- file/folder exists?
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?(.*) http://portal.site.com/$1 [R=301] 
```

但是，如果您在 www.site.com 上有一些新的“虚拟” URL，它们与文件系统上的文件不直接对应，那么您将必须弄清楚如何从重定向规则中过滤掉它们（否则您会得到404 测试中的误报）。例如，*不应*重定向的 www.site.com 上的虚拟内容都以 /newsite/... 开头，然后您将得到如下结果：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} =www.site.com [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/?newsite/
RewriteRule ^/?(.*) http://portal.site.com/$1 [R=301] 
```

# serialization - JMSSerializerBundle。无法控制第三方元数据

> ID：12960141
> 
> 赞同：25
> 
> 时间：2012-10-18T17:15:07.410
> 
> 标签：serialization, symfony, symfony-2.1, symfony-2.0, jmsserializerbundle

我有两个实体希望使用 JMSSerializerBundle 进行序列化。`Music`实体有一个映射`exclusion_policy: NONE`文件。

该`Music`实体具有`User`来自的实体的字段`FOSUserBundle`。该`User`实体有一个映射文件，`exclusion_policy: ALL`其中有几个字段设置为`expose: true`，因此它们将被序列化。

问题是，该`User`字段已完全序列化。我是否更改`User`实体的映射文件都没关系。

这是它的外观：

```
#My/Bundle/Resources/config/serializer/Entity.Music.yml
xxx\xxx\Entity\Music:
    exclusion_policy: NONE

#My/Bundle/Resources/config/serializer/Entity.User.yml
xxx\xxx\Entity\User:
    exclusion_policy: ALL
    properties:
        id:
            expose: true
        username:
            expose: true
        username_canonical:
            exclude: true
        email:
            exclude: true
        email_canonical:
            exclude: true
        enabled:
            exclude: true
        salt:
            exclude: true
        password:
            exclude: true
        last_login:
            exclude: true
        confirmation_token:
            exclude: true
        password_requested_at:
            exclude: true
        groups:
            exclude: true
        locked:
            exclude: true
        expired:
            exclude: true
        expires_at:
            exclude: true
        roles:
            expose: true
        credentials_expired:
            exclude: true
        credentials_expired_at:
            exclude: true 
```

为什么它不引用它自己的映射文件？还是我在某个地方弄错了？

## 到目前为止我尝试了什么

我已阅读第三方元数据文档。它只是说在我的序列化程序服务中添加一个新目录。我已经这样做了，但是我必须扩展`FOS\UserBundle\Entity`类，并且它也无法访问我试图排除的父受保护字段。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-10-18T19:11:17.870

我打赌`xxx\xxx\Entity\User:`指的是您**自己的命名空间和类**。

如果是，那就是**错误**的做法。

规则必须应用于属性所在的类。

鉴于您在配置中公开的属性，我猜您正在使用`FOSUserBundle`.

因此，您必须将您的规则应用于`FOS\UserBundle\Model\User`.

然后，您需要添加一个`JMSSerializer`配置来指示给定命名空间的序列化器元数据所在的位置。

它应该看起来像：

```
jms_serializer:
  metadata:
    auto_detection: true
    directories:
      FOSUserBundle:
        namespace_prefix: "FOS\\UserBundle"
        path: "@YourUserBundle/Resources/config/serializer/fos" 
```

在`fos/`目录中你应该有 Model.User.yml

有类似的东西：

```
FOS\UserBundle\Model\User:
  exclusion_policy: ALL
  properties:
    id:
      expose: true
      groups: [list, details]
    username:
      expose: true
      groups: [details]
    email:
      expose: true
      groups: [me]
    roles:
      expose: true
      groups: [details] 
```

* * *

细节：

当通过元数据将规则应用于序列化器时，序列化器会查找在元数据中**定义**的类中**声明**的属性。

 **例子：

```
class Foo {
     protected $foo;
}

class Bar extends Foo {
     protected $bar;
} 
```

您的元数据将如下所示：

```
Foo:
  exclusion_policy: ALL
  properties:
      foo: 
          expose: true

Bar:
  exclusion_policy: ALL
  properties:
      bar: 
          expose: true 
```

**下面的例子不是正确的做法**

```
Bar:
  exclusion_policy: ALL
  properties:
      foo: 
          expose: true
      bar: 
          expose: true 
```

如果您这样做，则只会`bar`应用（并公开）属性上的规则。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T10:42:15.270

我有这个问题，我以错误的方式获取序列化程序。您需要`JMSSerializerBundle`并使用该服务进行配置才能生效。

所以而不是：

```
//In controller we can use $this instead of $container
$serializer = $this->get('jms_serializer'); //JMSSerializerBundle 
```

我用了：

```
$serializer = SerializerBuilder::create()->build(); //JMSSerializer 
```

使用第一种方式将加载您的配置。由于我使用的是`Propel`，我需要忽略所有`BaseObject`字段：

```
#app/config.yml
jms_serializer:
metadata:
    auto_detection: true
    directories:
        Propel:
            namespace_prefix: ""
            path: "@MySupporterBundle/Resources/config/serializer" 
```

请注意，`BaseObject`它没有命名空间，您需要以下软件包才能使其工作（元数据 1.2 之前的错误）：

```
 "jms/serializer": "0.12.*",
        "jms/serializer-bundle" : "0.12.*@dev",
        "jms/metadata" : "1.3.*", 
```

所以我做了这个文件：

```
#My/SupporterBundle/Resources/config/serializer/BaseObject.yml
BaseObject:
    exclusion_policy: ALL 
```

对于特定对象（在模型命名空间中），您需要文件（默认命名空间为 My/OtherBundle）：

> 我的/OtherBundle/Resources/config/serializer/Model.om.BaseClass.yml 我的/OtherBundle/Resources/config/serializer/Model.Class.yml

注意：创建新的序列化程序文件时需要清除缓存**

# java - java中没有新对象实例的新文件路径

> ID：12960165
> 
> 赞同：0
> 
> 时间：2012-10-18T17:16:29.430
> 
> 标签：java, file, path

是否可以在不创建新实例的情况下更改 java 中 File 类的文件路径？

```
File file = new File(System.getProperty("user.home")); <br>
System.out.println(file.getPath()); 
```

现在返回`C:\Users\username`
我想去父目录。我以为我可以使用这样的东西

```
file.setPath(file.getParent()); 
```

但我必须使用

```
file = new File(file.getParent()); 
```

还有什么其他方法可以达到同样的效果吗？或者也许我可以创建多个实例，将它们存储在一个数组中并同时使用两个对象（目录）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T17:17:36.643

显然你错过了[`File.getParentFile()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getParentFile%28%29)：

```
file = file.getParentFile(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T17:21:44.307

从[javadocs](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)：

> File 类的实例是不可变的；也就是说，一旦创建，由 File 对象表示的抽象路径名永远不会改变。

所以，不，您不能更改 File 实例。如果你想要一个不同的值，你必须实例化一个新的文件。

# java - Java VisualVM 中的 CPU 计时可以显示总的方法持续时间吗？

> ID：12960167
> 
> 赞同：0
> 
> 时间：2012-10-18T17:16:31.857
> 
> 标签：java, performance, profiling, cpu

我不确定 Java VisualVM 是否没有这样做，或者我没有使用正确的术语，或者没有看到菜单选项。

假设有人使用 3 种方法对应用程序进行了 CPU 配置文件。

```
time 0001: method A called
time 0002:   method B called
time 0004:   method B exits
time 0005:   method B called
time 0007:   method B exits
time 0008: method A exits
time 0009: method C called
time 0010:   method B called
time 0012:   method B exits
time 0013: method C exits 
```

我能看到的唯一视图显示：

```
method B duration 6
method A duration 2
method C duration 2 
```

但是应该能够翻转视角（这有标准名称吗？）以查看：

```
method A duration 7
method B duration 6
method C duration 4 
```

如何从 Java VisualVM 中获得第二个 CPU 计时视图？我没有看到该选项，还是没有？

我看到了这个：[Java VisualVM 中的总方法时间](https://stackoverflow.com/questions/1892038/total-method-time-in-java-visualvm)

但是我在调​​用堆栈中看不到来自我的任何对象的任何内容。我必须比较两个快照吗？这是令人难以置信的不明显......

# javascript - 少看 JS 文件

> ID：12960168
> 
> 赞同：0
> 
> 时间：2012-10-18T17:16:32.870
> 
> 标签：javascript, less, development-environment

是否可以在客户端更改 js 文件时重新加载它们，这可以在较少的监视模式功能中看到（在[此处输入链接描述](http://lesscss.org/)-> 监视模式）。

不幸的是，我不知道监视模式是如何工作的，以及为什么 JS 文件可能或不可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:21:56.243

我不知道你为什么不直接按 Ctrl+R 或 F5，但你可以`src`使用 jQuery 更新属性：

```
$('script').each(function () {
    $(this).attr('src', $(this).attr('src'));
}); 
```

这应该使他们重新加载。把它放在`setInterval`/中`requestAnimationFrame`。我希望这仅用于测试。

# iphone - 有没有办法通过 VPP 和通用 App Store 提供相同的应用程序？

> ID：12960172
> 
> 赞同：0
> 
> 时间：2012-10-18T17:16:48.183
> 
> 标签：iphone, ios, app-store, app-store-connect

场景如下：

A 公司有一个我正在为 B 公司定制的应用程序。B 公司希望最初在 B 公司和 B 公司产品的授权经销商中保持该应用程序的私有性。将来，B 公司可能希望在公共 App Store 中向公众提供该应用程序。

似乎“自定义 B2B”应用程序选项是作为开发人员的正确选择，然后通过 VPP 将应用程序分发给 B 公司，但我不清楚我必须做什么才能使该应用程序在一般情况下也可用需要时应用商店。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:20:10.217

之后您可以在 iTunes Connect 中更改 VPP 标志，然后它将公开可用。不仅适用于已注册的 VPP 客户。（并且 VPP 仍然是可能的，因为应用商店中的每个应用程序都可以通过 VPP 购买）。

部分：**权利和定价**
有一个名为**Custom B2B App**的复选框。

引用信息文本：

> 设置为自定义 B2B 应用程序的应用程序仅对您在 iTunes Connect 中指定的批量购买计划客户可用，并且仅在适用的地区可用（例如，美国批量购买计划客户必须使用美国 App Store 企业批量购买计划）。教育机构或一般 App Store 客户将无法使用自定义 B2B 应用程序。要了解更多关于 App Store Volume Purchase Program for Business 的信息，请访问[http://vpp.itunes.apple.com/faq](http://vpp.itunes.apple.com/faq)。要了解有关您的客户如何注册批量购买计划的更多信息，请访问[http://enroll.vpp.itunes.apple.com](http://enroll.vpp.itunes.apple.com)。

# jquery - jQuery获取div内滚动内容的高度

> ID：12960174
> 
> 赞同：-3
> 
> 时间：2012-10-18T17:16:53.480
> 
> 标签：jquery, css

> **可能重复：**
> [jquery：如何获取 div 全部内容的高度？](https://stackoverflow.com/questions/6853293/jquery-how-do-i-get-the-height-of-a-divs-full-content)

假设我有 600px 高的 div，它启用了滚动，并且我在其中有很多内容，所以它有滚动条。如何获得其中内容的高度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:20:09.640

它被称为**scrollHeight**。你需要给：

```
$(element).get(0).scrollHeight 
```

例如，要知道总页面的滚动高度，您可以使用：

```
$("body").get(0).scrollHeight 
```

# android - Android LVL：使用新账户的公钥上传新版本时出现 ERROR_NOT_MARKET_MANAGED

> ID：12960176
> 
> 赞同：0
> 
> 时间：2012-10-18T17:17:06.177
> 
> 标签：android, google-play, android-lvl

我们正在转移到另一个 Google Play 开发者帐户，所以我遇到了以下问题。转移到这个新帐户的 LVL 应用程序返回 LICENSE_ALLOW，直到我从我们的新 Google Play 帐户上传了一个带有新公钥的新版本。现在它返回 ERROR_NOT_MARKET_MANAGED。我希望这是因为 Google Play 尚未注册新上传的 apk（而在开发者控制台中我看到了一个新版本） - 根据[Android Market 不显示我的新版本](https://stackoverflow.com/questions/7976099)，但通常你只能上传一个 apk，甚至不发布，以摆脱此 ERROR_NOT_MARKET_MANAGED 错误。

欢迎任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:29:19.500

放松人们，大约之后。上传30分钟后，app终于开始回复LICENSE_ALLOW了！因此，如果您遇到同样的问题，请不要担心，请稍等片刻。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:13:11.310

我一直在处理同样的问题；我不确定它是否像“放松”一样安全:)

我正在调查的两个问题：

1）我认为 LVL 报告这是一个应用程序错误而不是违反许可证对我来说似乎是错误的。因此，请注意在您的政策中如何处理这一点，谷歌的示例代码暗示应用程序错误是开发人员错误，您应该修复或至少不惩罚用户。但是，如果您在生产版本中忽略这一点，它可能会为黑客提供一种通过将应用程序版本更改为 > 已发布版本来禁用您的许可的方法。（我不知道这个 hack 有多可行，但我已经在 CN 遇到过各种疯狂的 hack，所以这不会让我感到惊讶）

2) 正如其他一些线程所指出的，例如[Android“Not_Market_Managed”错误](https://stackoverflow.com/questions/3497280/android-not-market-managed-error)，这在发布新版本时会产生问题。我还不能通过将草稿 apk 保存到 gplay 来关闭它，所以如果我真的必须发布才能关闭它，那将是个坏消息，因为没有发布就无法测试它。

奇怪的是，我并不总是在新的开发版本中遇到这个错误。另一篇文章推测 LVL 有一些规则，比如你可以在不触发它的情况下对已发布的版本代码 +1。当我做了两个非常接近的释放时，我遇到了这个错误；也许他们是对的？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-25T06:56:18.097

> 但通常你只能上传一个apk，甚至不能发布

根据我的经验，要使 LVL 正常工作，您绝对*必须发布该应用程序*，即使它只有一个 alpha 版本。（即使文档说上传草稿就足够了——也许我不走运，这是一个暂时的故障）

考虑到@mvk 的第 2 点）

> 坏消息，因为没有发布就无法测试它。

这可以通过在没有*生产*版本的情况下发布应用程序来解决——这样应用程序不会公开，但您仍然可以测试所有与 Play 商店绑定的东西。

# sqlalchemy - backref上的sqlalchemy子字段order_by

> ID：12960181
> 
> 赞同：1
> 
> 时间：2012-10-18T17:17:23.657
> 
> 标签：sqlalchemy, sql-order-by, relationship, turbogears2

由于我改变了代码的重点，因此不再需要答案。（请参阅我在回答中的评论）发布答案以供将来参考...

如何从子字段排序的一对多反向引用中检索结果？我需要按索引排序的 gid 的所有东西。但是此时它们是随机检索的，即使它们是在 ms sql 服务器中排序的。

我在 TurboGears 2 datamodels.py 中有：

```
`class Parcel(DeclarativeBase):
    __tablename__ = 'GENERAL'
    __table_args__ =  ({'autoload': True})   

    gid = Column(Integer, primary_key=True)`
    somethings = relationship('Something', backref='Parcel')

 'class Something(DeclarativeBase):
    __tablename__ = 'SKETCH'
    __table_args__ =  ({'autoload': True})

    gid = Column(Integer, ForeignKey('GENERAL.gid'), primary_key=True)
    index = Column(Integer, primary_key=True) 
```

在 Turbogears root.py 中：

```
query = DBSession.query(Parcel)
query = query.options(joinedload('somethings')
query=session.filter(Parcel.gid==gid) 
```

返回 gid 无序的所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:31:15.833

`DBSession.query(Something).filter_by(gid=gid).order_by(Something.index).all()`

**编辑：** 当您使用关系时，`relationship()` [接受关键字参数来订购实例。`order_by`](http://docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html?highlight=relationship#sqlalchemy.orm.relationship)如果要指定反向的顺序，可以使用[`backref()`函数](http://docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html?highlight=relationship#sqlalchemy.orm.backref)代替 backref 关键字，并使用与`order_by`with 相同的关键字参数`relationship()`。

# iphone - iPhone iOS Core Data 我应该为我的实体子类化一个抽象实体吗？

> ID：12960188
> 
> 赞同：0
> 
> 时间：2012-10-18T17:17:44.383
> 
> 标签：iphone, objective-c, ios, core-data, nsmanagedobject

目前我的应用程序中有以下数据模型： Record 是一个带有时间戳、类型、名称的抽象实体。我有 3 种类型的实体，它们是 Record 的子类。我的 NSFetchedResultsControllers 提取 Record 对象，并在我的表视图中按类对它们进行排序：

```
Event1 has record as abstract parent, there will be 10000 such events
Event2 has record as abstract parent, there will be 100 such events
Event3 has record as abstract parent, there will be 100 such events 
```

事件 1 由系统生成，事件 2 和 3 由用户创建。

该系统的目的是在需要**所有数据时**更容易显示数据。

但是，我遇到了一个问题，我只想显示**部分数据**- 用户创建的事件并允许用户编辑它们。

**如果我当前的数据模型是一种仅过滤和显示用户事件的有效方法（核心数据必须仅将少数事件与系统生成的事件分开），我会徘徊。我应该让系统生成的事件成为一个单独的实体吗？**我是否应该担心这样的事情，或者核心数据是否已经足够优化，所以这样的事情并不重要？

下面是让我问这个问题的 NSFetchedResultsController：

```
 NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"date" ascending:NO];
            NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];

            [fetchRequest setSortDescriptors:sortDescriptors];

    //system-generated events do not have type defined, while user events do have a type
            NSPredicate* predicate  = [NSPredicate predicateWithFormat:@"SELF.type > %0"];
            [fetchRequest setPredicate:predicate];
//^What are the performnance implications of the above predicate?

            // Edit the section name key path and cache name if appropriate.
            // nil for section name key path means "no sections".
            NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"Master"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:00:03.793

亚历克斯，

如果您想要的只是用户事件，那么只需对该实体使用获取请求，而不是超类。

安德鲁

# common-lisp - 如何摆脱 common lisp 中的 funcall

> ID：12960190
> 
> 赞同：2
> 
> 时间：2012-10-18T17:17:53.480
> 
> 标签：common-lisp

根据这个文件：[http ://cl-cookbook.sourceforge.net/functions.html](http://cl-cookbook.sourceforge.net/functions.html)

```
(defun adder (n)
  (lambda (x) (+ x n)))
(funcall (adder 12) 1) 
```

我必须使用funcall来调用（adder 12），并且一遍又一遍地编写funcall是非常忽略的，有没有办法在scheme中编写类似的代码：

```
((adder 12) 1) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T17:52:44.707

没有。没有。

您还可以将其视为一项功能：它使函数对象的调用显式并提高了源代码的可理解性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:56:18.927

但是，你可以使用这样的东西（不知道你为什么会这样，但输入的字符数与 Scheme 中的相同）：

```
(set-macro-character
 #\[
 #'(lambda (stream char)
     (declare (ignore char))
     (set-syntax-from-char #\] #\;)
     (let ((forms (read-delimited-list #\] stream t)))
       (set-syntax-from-char #\] #\x)
       (append '(funcall) forms))))

(defun adder (n)
  #'(lambda (x) (+ x n)))

(format t "sum: ~s~&" [(adder 12) #x128]) ;; 308 
```

如果您遇到带有括号的变量名，这*可能会给您带来一些问题。*当然，使用它取决于您，请考虑自己警告。

# iphone - 是否有非标准高度的 iPhone 键盘？

> ID：12960194
> 
> 赞同：1
> 
> 时间：2012-10-18T17:18:32.733
> 
> 标签：iphone, ios, internationalization, keyboard, textinput

我需要测试我是否根据系统键盘的高度正确调整了某些内容的大小。我的印象是一些国际键盘可能更大，但我看过所有常见的嫌疑人（所有中国人、韩国人和日本人），它们的高度完全相同。

有人见过这样的键盘吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T10:47:41.787

以下是生成上述候选条的步骤：

1.  在设置 > 通用 > 键盘 > 键盘中，启用日文假名。
2.  切换回您的应用程序并点击文本字段。
3.  切换到日文假名并点击 [ABC]。
4.  现在点击一个字母键。应出现候选栏。

# c++ - 高级优先队列

> ID：12960197
> 
> 赞同：4
> 
> 时间：2012-10-18T17:18:42.917
> 
> 标签：c++, data-structures, filter, set, priority-queue

我正在寻找*C++*中优先级队列的实现。除了 STL*优先队列*中的基本功能外，它还需要以下方法：

1.  推送时可以删除所有相同的元素（由函数确定）（类似于集合）
2.  它可以过滤掉一些元素（由另一个函数确定）。

您对如何实施它有一些建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T17:29:21.653

您可以`std::set`用作没有重复的优先级队列。`top`可以通过 找到该元素`rbegin()`。渐近复杂度与二叉堆相同：`top`根据标准要求O(1) `rbegin`、 O(lg *n* )`push`和 O(lg *n* ) `pop`。不过，常数会更高。

至于过滤器，我建议您使用自定义方法（无论如何这是一个好主意）包装`std::set`一个类，该方法为您运行过滤谓词。`push`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T17:42:17.957

只需包装一个`priority_queue`：

```
#include <set>
#include <queue>

// Default predicate allows all objects through
template <typename T>
struct allow_any {
    bool operator()(T const&) const {
        return true;
    }
};

// F is a callable type for the filtering predicate -- either a
// function pointer, or a class having an operator()(T const&).
template <typename T, typename F = allow_any<T> >
class filtering_priority_queue {
public:
    explicit filtering_priority_queue(F f) : allow(f) {}

    void push(T x) {
        if (allow(x) && s.find(x) == s.end()) {
            q.push(x);
            s.insert(x);
        }
    }

    T const& top() const {
        return q.top();
    }

    void pop() {
        s.erase(top());
        q.pop();
    }

private:
    std::set<T> s;
    std::priority_queue<T> q;
    F allow;
}; 
```

# php - 使用数组来确定分数

> ID：12960200
> 
> 赞同：0
> 
> 时间：2012-10-18T17:18:59.453
> 
> 标签：php

基本上我想知道根据数组中定义的范围确定分数的最佳方法

我有一组介于 300 和 900 之间的值，每个值都有相应的百分位数范围。

我想创建一个函数，根据检查的值为您提供百分位数。传递给函数的值可能与数组中定义的值不匹配，但希望返回该值的最高百分位数。

例如在数组中会是这样的

```
'300'=>'10', '333'=>'11', '340' => '12'  .... '900'=>'100' 
```

如果我传入 335，则该函数应返回 11。不确定最简单的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:35:02.863

您可以轻松循环..但如果您不想这样做，那么您可以使用

```
$var = 335 ;
$array = array('300'=>'10', '333'=>'11', '340' => '12');
echo getPercentage($array,$var); 
```

输出

```
 11 
```

使用的功能

```
function getPercentage(array $a, $v) {
    if (array_key_exists($v, $a)) {
        return $a[$v];
    }
    $a[$v] = null;
    ksort($a);
    $pos = array_search($v, array_keys($a));
    $pos = array_slice($a, (($pos == 0) ? 1 : $pos - 1), 1);
    return reset($pos);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:25:06.547

如果数组是有序的，那就很简单了。如果您从底部开始（分数 = 300）然后向上直到您的分数大于数组分数，并且正确的百分位数是您在向上的过程中刚刚通过的百分位数。如果你从顶部开始，向下直到你的分数低于数组分数，正确的百分位数是你在向下的路上刚刚传递的那个。

根据分数从阵列的顶部或底部开始可能会给您带来轻微的性能提升。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T17:28:38.033

你可以这样做：

```
<?php

function get_percentile($val){
    $arr = array('300'=>'10', '333'=>'11', '340'=>'12'); 
    while(!$arr[$val]){
        $val--;
    }
    return $arr[$val];
}

echo get_percentile(335);

?> 
```

**输出：**
11

**[看看这个！](http://codepad.org/LGpSorAV)**

# facebook - 关于FB sharer.php脚本的官方公告

> ID：12960203
> 
> 赞同：2
> 
> 时间：2012-10-18T17:19:19.133
> 
> 标签：facebook, facebook-sharer

到处都是关于 Facebook sharer.php 脚本被弃用的喋喋不休，但 Facebook 没有关于它的官方消息。他们没有在他们的网站上记录这种共享方法，但它仍然有效并且被许多大型网站（YouTube、NY Times、Huffpo 等）使用。

新的共享 API (http://developers.facebook.com/docs/reference/dialogs/feed/) 的问题在于它迫使您为正在开发的每个站点打开一个 Facebook 应用程序，即使对于一个简单的通用站点也是如此分享，这似乎有点奇怪。

谁能帮我从 Facebook 上找到关于此的官方消息？继续使用 sharer.php 是否安全？两种分享方式有什么不同吗？我发现一篇博文说sharer.php分享的帖子只出现在你的墙上，没有出现在你的新闻源上，但我怀疑这只是用户的设置问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:50:29.993

该`sharer.php`端点在 2011 年的某个时候被正式弃用。所有宣布这一点的文档都已从 Facebook 文档中删除。对于新开发人员来说，这不是最好的情况，因为许多旧教程仍然将其显示为正确的路径。

我能找到的唯一官方词是 2012 年 4 月的这个错误报告：[https ://developers.facebook.com/bugs/252983554810810/](https://developers.facebook.com/bugs/252983554810810/)

继续使用是不安全的`sharer.php`。即使它今天有效，它也可能随时停止工作。

# c# - 大面积蓝牙 - 查找蓝牙设备型号

> ID：12960204
> 
> 赞同：2
> 
> 时间：2012-10-18T17:19:20.937
> 
> 标签：c#, android, ios, bluetooth

我想开始研究蓝牙，并以此设计网络，所以我有一个基本问题：

我可以在我的服务器中通过蓝牙应用程序找到手机型号吗？（发送该型号的申请）

# c# - 迭代范围太广

> ID：12960205
> 
> 赞同：1
> 
> 时间：2012-10-18T17:19:21.590
> 
> 标签：c#

> **可能重复：**
> [为什么不能在嵌套的局部范围内声明重复的变量名？](https://stackoverflow.com/questions/6156449/why-cant-a-duplicate-variable-name-be-declared-in-a-nested-local-scope)

我注意到以下代码没有编译。快速修复是将外部变量召回`thing`到其他东西，但后来我开始思考并意识到内部范围应该**在**`foreach`循环内结束。我肯定不能在它之外使用内部变量。

我不应该能够在`thing`循环之外重用名称吗？为什么？

```
String aggregate = String.Empty;
foreach (Thing thing in things)
  aggregate += thing.Value;

Thing thing = new Thing(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T17:21:04.103

> 我不应该能够在循环之外重用名称吗？为什么？

问题是最后一行中变量的范围向上扩展*了**……*它覆盖了整个块。所以问题实际上是你不能*为循环*`thing`声明变量，因为它与另一个已经在范围内的变量发生冲突。

 *从 C# 4 规范的第 8.5.1 节：

> 在*local-variable-declaration*中声明的局部变量的范围是发生声明的块。*在局部变量的局部变量声明*之前的文本位置引用局部变量是错误的。在局部变量的范围内，声明另一个同名的局部变量或常量是编译时错误。

最后一句话是您的代码违反的那句话。

只是使用不同的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:28:57.910

事实上，令人惊讶的是，变量的范围比您预期的要宽。试试这个代码。

```
String aggregate = String.Empty;
foreach (Thing thing in things)
  aggregate += thing.Value;
foreach (Thing thing in things)
  aggregate += thing.Value; 
```

它会编译得很好。但是，如果您`thing`像之前一样声明外部，则声明跨度为**outouts**。有时，它也会吸引我。:)*

# asp.net - VB.Net PayPal 集成说明

> ID：12960206
> 
> 赞同：0
> 
> 时间：2012-10-18T17:19:22.840
> 
> 标签：asp.net, vb.net, paypal, integration

我正在使用 vb.net 中的历史 PayPal 系统。我正在努力为用户支付的产品添加单个项目描述或名称。它使用 NVPSetExpressCheckout，当用户即将付款时，数据将显示在 PayPal 网站上。然而，我却遇到了不断的问题，我认为这一定是由于语法或我试图这样做的方式。

这是当前有效的代码：

```
 Dim ppSet As New NvpSetExpressCheckout()
        ppSet.Add(NvpSetExpressCheckout.Request._AMT, Decimal.Parse(litTotal.Text))
        ppSet.Add(NvpSetExpressCheckout.Request.CURRENCYCODE, "GBP")
        Dim basePath As String = Request.Url.AbsoluteUri.Replace(Request.Url.PathAndQuery, String.Empty) + Request.ApplicationPath
        ppSet.Add(NvpSetExpressCheckout.Request._RETURNURL, basePath & "paypal.aspx")
        ppSet.Add(NvpSetExpressCheckout.Request._CANCELURL, basePath & "cancel.aspx") 
```

然后我尝试使用许多方法添加描述，例如：

```
 ppSet.Add(NvpSetExpressCheckout.Request.L_DESC0, "First Item") 
```

但是，我只是收到如下错误：

> “L_DESC0”不是“Encore.PayPal.Nvp.NvpSetExpressCheckout.Request”的成员。

这个问题让我发疯，我找不到解决办法。包括 XML 在内的所有文档都表明这是正确的方法。我确实尝试只使用 DESC 字段，但是所有项目都只是显示为一个段落而不是单独的行。非常感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:48:30.720

找到了解决方案。这是由于没有提交 L_AMTn 请求，这基本上是项目金额。一旦这加起来就是它完美提交的总成本。

# php - 如何使用 PHP 函数过滤选择节点集？

> ID：12960211
> 
> 赞同：12
> 
> 时间：2012-10-18T17:19:26.000
> 
> 标签：php, xslt

我想知道是否以及如何使用 XSLT 处理器注册一个 PHP 用户空间函数，该处理器不仅能够获取节点数组，而且能够返回它？

现在 PHP 抱怨使用通用设置将数组转换为字符串：

```
function all_but_first(array $nodes) {        
    array_shift($nodes);
    shuffle($nodes);
    return $nodes;
};

$proc = new XSLTProcessor();
$proc->registerPHPFunctions();
$proc->importStylesheet($xslDoc);
$buffer = $proc->transformToXML($xmlDoc); 
```

例如，要转换的 XMLDocument ( `$xmlDoc`) 可以是：

```
<p>
   <name>Name-1</name>
   <name>Name-2</name>
   <name>Name-3</name>
   <name>Name-4</name>
</p> 
```

在样式表中它是这样调用的：

```
<xsl:template name="listing">
    <xsl:apply-templates select="php:function('all_but_first', /p/name)">
    </xsl:apply-templates>
</xsl:template> 
```

通知如下：

> 注意：数组到字符串的转换

我不明白为什么如果函数将数组作为输入也不能返回数组？

正如我所见，我也在尝试其他“函数”名称，`php:functionString`但到目前为止所有尝试过的（`php:functionArray`和`php:functionSet`）`php:functionList`都不起作用。

在 PHP 手册中，我可以返回另一个`DOMDocument`包含元素，但是这些元素不再来自原始文档。这对我来说没有多大意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-04T15:16:27.910

对我有用的是返回一个实例[`DOMDocumentFragment`](http://www.php.net/manual/en/class.domdocumentfragment.php)而不是数组。因此，为了在您的示例中进行尝试，我将您的输入保存为`foo.xml`. 然后我`foo.xslt`看起来像这样：

```
<xsl:stylesheet version="1.0" xmlns:xsl='http://www.w3.org/1999/XSL/Transform'
        xmlns:php="http://php.net/xsl">
    <xsl:template match="/">
        <xsl:call-template name="listing" />
    </xsl:template>
    <xsl:template match="name">
        <bar> <xsl:value-of select="text()" /> </bar>
    </xsl:template>
    <xsl:template name="listing">
        <foo>
            <xsl:for-each select="php:function('all_but_first', /p/name)">
                <xsl:apply-templates />
            </xsl:for-each>
        </foo>
    </xsl:template>
</xsl:stylesheet> 
```

（这主要只是您的示例，其中包含一个`xsl:stylesheet`包装器来调用它。）问题的真正核心是`foo.php`：

```
<?php

function all_but_first($nodes) {
    if (($nodes == null) || (count($nodes) == 0)) {
        return ''; // Not sure what the right "nothing" return value is
    }
    $returnValue = $nodes[0]->ownerDocument->createDocumentFragment();
    array_shift($nodes);
    shuffle($nodes);
    foreach ($nodes as $node) {
        $returnValue->appendChild($node);
    }
    return $returnValue;
};

$xslDoc = new SimpleXMLElement('./foo.xslt', 0, true);
$xmlDoc = new SimpleXMLElement('./foo.xml', 0, true);

$proc = new XSLTProcessor();
$proc->registerPHPFunctions();
$proc->importStylesheet($xslDoc);
$buffer = $proc->transformToXML($xmlDoc);
echo $buffer;

?> 
```

重要的部分是调用`ownerDocument->createDocumentFragment()`从函数返回的对象。

# python - 如何使 Django 管理 URL 只能被 localhost 访问？

> ID：12960212
> 
> 赞同：3
> 
> 时间：2012-10-18T17:19:27.987
> 
> 标签：python, django, apache, wsgi, django-wsgi

让 Django /admin/ url 只能被 localhost 访问的最简单方法是什么？

我想到的选项：

*   将管理站点从项目中分离出来（以某种方式）并作为不同的虚拟主机运行（在 Apache2 中）
*   在托管 (Apache2) Web 服务器前使用代理
*   以某种方式在 WSGI 中限制 Apache 中的 URL。

有标准方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-18T17:28:46.350

我去 apache 配置：

```
<Location /admin>
    Order Deny, Allow
    Deny from all
    Allow from 127.0.0.1
</Location> 
```

HTH。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T17:44:23.063

我会选择 Apache 配置 + 在前面运行代理 + 在 WSGI 中限制：

1.  当涉及动态内容生成时，我不喜欢 Apache 与 Web 客户端通信。由于它的执行模型，缓慢或断开连接的客户端可能会占用 Apache 进程。如果你前面有代理（我更喜欢 nginx，但即使是普通的 apache 也可以），代理会担心客户端，而 Apache 可以专注于新的动态内容请求。

2.  根据您的 Apache 配置，进程还可以占用大量内存并保持它，直到它达到 MaxRequests。如果您在 /admin 中有内存密集型代码（很多人都这样做），那么您最终可能会得到 Apache 进程，这些进程占用的内存比他们需要的多得多。如果您将 Apache 配置拆分为 /admin 和 /!admin ，您可以调整 apache 设置以拥有更多 /!admin 服务器，从而需要更小的潜在足迹。

3.  我是偏执的服务器设置。

    *   我想确保代理只将 /admin 发送到某个 Apache 端口。
    *   我想确保 Apache 仅在某些 apache 端口上接收 /admin，并且它来自代理（带有秘密标头）或来自 localhost。
    *   我想确保 WSGI 仅根据某些服务器/客户端条件运行 /admin 的东西。

# c# - 数据库未显示在 Visual Studio 中

> ID：12960213
> 
> 赞同：2
> 
> 时间：2012-10-18T17:19:29.563
> 
> 标签：c#, database, visual-studio-2010

我正在 Visual Studio 中使用 C# 开发应用程序。这是我的第一个 C# 应用程序，它将使用本地数据库，因此我不确定这是如何完成的。我一直在关注codeguru 的[这篇文章](http://www.codeguru.com/csharp/article.php/c19233/Introduction-to-Entity-Framework-Code-First.htm)。

我已经声明了我的实体，所有这些目前都只是继承自：

```
public class Reference
{
    /// <summary>
    /// ID of the reference.
    /// </summary>
    public int Id { get; set;  }

    /// <summary>
    /// Reference to the element in theTVDB.
    /// </summary>
    public int TheTVDBId { get; set; }

    /// <summary>
    /// Whether or not the reference has been marked as watched.
    /// </summary>
    public bool IsWatched { get; set; }
} 
```

我还声明了我的 DbContext 如下：

```
public class Library : DbContext
{
    /// <summary>
    /// Constructor using the base constructor.
    /// This constructor names the database "Library".
    /// </summary>
    public Library() : base("Library")
    {
    }

    /// <summary>
    /// Set of TVSeriesReferences stored in the database.
    /// </summary>
    public DbSet<TVSeriesReference> TVSeriesReferences { get; set; }

    /// <summary>
    /// Set of SeasonReferences stored in the database.
    /// </summary>
    public DbSet<SeasonReference> SeasonReferences { get; set; }

    /// <summary>
    /// Set of EpisodeReferences stored in the database.
    /// </summary>
    public DbSet<EpisodeReference> EpisodeReferences { get; set; }
} 
```

我正在尝试将实体存储在数据库中，执行以下操作：

```
Library db = new Library();

TVSeriesReference reference1 = new TVSeriesReference();
reference1.TheTVDBId = 1234;
reference1.IsWatched = true;
db.TVSeriesReferences.Add(reference1);

TVSeriesReference reference2 = new TVSeriesReference();
reference2.TheTVDBId = 8000;
db.TVSeriesReferences.Add(reference2);

int i = db.SaveChanges(); 
```

所有这些似乎都有效。至少，我没有收到任何错误，并且`i`每次运行都是 2。

问题是数据库（名为“库”）没有出现在任何地方。实际上，我什至没有那个“对象资源管理器”视图，而且我似乎找不到它。由于数据库没有显示，我不确定这是否有效以及我的数据是否实际存储。

有谁知道我做错了什么或者我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:58:51.660

我似乎已经解决了这个问题。

我做了以下事情：

1.  在服务器资源管理器中，我右键单击数据连接，选择“添加连接...”并创建一个 Microsoft SQL Server。我将服务器名称设置为`.\SQLEXPRESS`，将数据库名称设置为`Library`.
2.  然后我将以下内容添加到`app.config`：现在似乎可以工作了。

```
<connectionStrings>
    <add name="Library"
         providerName="System.Data.SqlClient"
         connectionString="Data Source=.\SQLEXPRESS;Database=Library;Trusted_Connection=true;" />
</connectionStrings> 
```

# android - 一款开发android/ios/bb/windows 8的软件

> ID：12960219
> 
> 赞同：0
> 
> 时间：2012-10-18T17:20:00.217
> 
> 标签：android, ios, windows, blackberry

我是移动开发的初学者。我想学习任何可以为 android/ios/bb/windows 8 创建应用程序的软件。有吗？请指导我。我更喜欢基于 Java 的软件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T17:24:25.483

唯一可以在所有设备上运行的应用程序（据说）是网络应用程序。这并不像某些人想象的那么真实，因为不同的浏览器处理事情的方式不同。我从不喜欢这个想法，因为我认为它在所有设备上提供了更差的用户体验。看看脸书。他们做了一个网络应用程序，每个人都讨厌它。因此，将其重做为本机应用程序（iOS 已经出局，Android 几乎就在那里）。

只需学习为平台开发所需的语言。适用于 Android 的 Java 5/6，适用于 BB 的 Java 1.4（我认为），适用于 iOS 的 Objective-C 和适用于 Windows Phone 8 的 .NET。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:45:10.757

您可能想查看[Xamarin](http://xamarin.com/)。

它允许您跨 iOS、Android 和 Windows 共享所有非 UI 代码。但是，您仍然需要学习如何在 iOS 上使用 Xcode，在 Android 上使用 ADT 等。我确实需要提到它是用 C# 而不是 Java 完成的，但它们非常相似，转换应该不会太难。

该站点提供[免费试用下载](http://xamarin.com/trial)。

*请注意，试用版仅允许您部署到模拟器，部署到您必须为完整版支付费用的设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T17:33:34.457

有这么多可用的工具，在谷歌搜索“跨平台移动开发框架”。我更喜欢Appcelerator 的**PhoneGap**和**Titanium 开发平台**

但是以上不是基于Java的。你需要学习网络技术。

检查这个：[http ://devlup.com/mobile/cross-platform-mobile-development-tools/2416/](http://devlup.com/mobile/cross-platform-mobile-development-tools/2416/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T17:28:36.237

你不会为所有这些找到一个好的解决方案。

*   对于 iOS，您需要使用[Xcode](http://en.wikipedia.org/wiki/Xcode)。
*   对于 Android，您可以将[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)与[ADT（Android 开发人员工具）](http://developer.android.com/tools/sdk/eclipse-adt.html)插件一起使用。
*   对于 Blackberry，您还可以将 Eclipse 与[BlackBerry](https://developer.blackberry.com/java/download/eclipse)插件一起使用。
*   我还没有进行任何 Windows Mobile 开发，但我想您将需要[Visual Studio](http://www.microsoft.com/visualstudio/eng/whats-new)以及[Windows Mobile SDK](http://msdn.microsoft.com/en-us/windowsmobile/bb264327)。

Android 和 Blackberry 都将基于 Java。Eclipse 是用 Java 编写的，尽管当您说您更喜欢基于 Java 的软件时，我认为您指的是应用程序。

# c++ - Big Endian 和 Little Endian 支持字节排序

> ID：12960226
> 
> 赞同：6
> 
> 时间：2012-10-18T17:20:17.143
> 
> 标签：c++, c, linux, visual-c++, endianness

我们需要支持 3 个硬件平台——Windows（小端）和 Linux Embedded（大端和小端）。我们的数据流依赖于它使用的机器，数据需要被分解成位域。

我想写一个宏（如果可能的话）来抽象出细节。在 Linux 上，我可以使用`bswap_16`/ `bswap_32`/`bswap_64`进行 Little Endian 转换。

但是，我在我的 Visual C++ 包含中找不到这个。

是否有适用于两个平台（Windows 和 Linux）的通用内置程序？

如果不是，那么我可以在 Visual C++ 中使用什么来进行字节交换（除了自己编写 - 希望内置一些机器优化）？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-18T17:23:38.057

在这两个平台上你都有

对于`short`（16位）：`htons()`和`ntohs()`

对于`long`（32位）：`htonl()`和`ntohl()`

缺少的`htonll()`和`ntohll()`for `long long`(64bit) 可以很容易地从这两个构建。例如，请参阅[此实现](https://stackoverflow.com/a/875505/694576)。

**更新-0：**

对于上面链接的示例 Simon Richter 在评论中提到，它不一定必须工作。这样做的原因是：编译器可能会在使用的联合中的某处引入额外的字节。为了解决这个问题，工会需要被打包。后者可能会导致性能损失。

因此，这是构建`*ll`功能的另一种故障安全方法：[https ://stackoverflow.com/a/955980/694576](https://stackoverflow.com/a/955980/694576)

**更新-0.1：**

从 bames53 的评论中，我倾向于得出结论，上面链接的第一个示例不应与 C++ 一起使用，而只能与 C 一起使用。

**更新 1：**

要`*ll`在 Linux 上实现功能的功能，[这种方法可能是“最好的”](https://stackoverflow.com/a/4410728/694576)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T17:23:54.283

[名称不同，但功能](http://msdn.microsoft.com/en-us/library/a3140177%28v=vs.80%29.aspx)相同。

编辑：存档链接-> [https://web.archive.org/web/20151207075029/http://msdn.microsoft.com/en-us/library/a3140177(v=vs.80).aspx](https://web.archive.org/web/20151207075029/http://msdn.microsoft.com/en-us/library/a3140177(v=vs.80).aspx)

_byteswap_uint64、_byteswap_ulong、_byteswap_ushort

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T21:24:20.820

如果您坚持处理字节性，htons 和 htonl（以及类似的宏）很好。

但是，最好通过以 ASCII 或类似格式输出数据来回避这个问题。它需要更多的空间，并且在网络上传输的速度更慢一些，但是简单和面向未来是值得的。

另一种选择是在数字上拆开你的 int 和 short's。所以你 & 0xff 并反复除以 256。这为所有架构提供了单一格式。但是 ASCII 仍然具有优势，因为它更易于调试。

# ios - 一次在屏幕上显示一堆 UiView 会不会很糟糕

> ID：12960227
> 
> 赞同：0
> 
> 时间：2012-10-18T17:20:24.757
> 
> 标签：ios, uiview, core-text, cgrect

所以我在 Core Text 中工作并制作了一个 CTFrame 并将其放在屏幕上。我还需要一种方法来移动框架并将其删除，而 CTFrame 似乎没有这样做。

我想将 CTFrame 放在 CGRect 中，但我不能，因为我需要一个 CGRect 显然没有的上下文。

我的问题是，将文本片段存储在屏幕上的几个 UIView 中会不会很糟糕？这样我就可以通过 UIView 本身完全控制移动和删除。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:22:19.967

您可以一次安全地在屏幕上显示数十个视图。这不是问题。

# spring - JMS/spring/AMQ 不异步处理消息的问题或混淆

> ID：12960232
> 
> 赞同：1
> 
> 时间：2012-10-18T17:20:31.780
> 
> 标签：spring, jms, activemq, jmstemplate

我们有一种情况，我们设置了一个组件来远程使用 Spring Batch 运行批处理作业。我们发送一条带有作业 xml 路径、名称、参数等的 JMS 消息，并在调用批处理客户端上等待来自服务器的响应。

服务器读取队列并调用适当的方法来运行作业并返回结果，我们的消息传递框架通过以下方式完成：

```
 this.jmsTemplate.send(queueName, messageCreator);
    this.LOGGER.debug("Message sent to '" + queueName + "'");

    try {
        final Destination replyTo = messageCreator.getReplyTo();
        final String correlationId = messageCreator.getMessageId();

        this.LOGGER.debug("Waiting for the response '" + correlationId + "' back on '" + replyTo + "' ...");
        final BytesMessage message = (BytesMessage) this.jmsTemplate.receiveSelected(replyTo, "JMSCorrelationID='"
                + correlationId + "'");
        this.LOGGER.debug("Response received"); 
```

理想情况下，我们希望能够调用两次 runJobSync 方法，并让两个作业同时运行。我们有一个单元测试，它做类似的事情，没有工作。我意识到这段代码不是很好，但是，这里是：

最终列表结果 = Collections.synchronizedList(new ArrayList());

```
 Thread thread1 = new Thread(new Runnable(){

        @Override
        public void run() {
            client.pingWithDelaySync(1000); 
            result.add(Thread.currentThread().getName());
        }

    }, "thread1");

    Thread thread2 = new Thread(new Runnable(){

        @Override
        public void run() {
            client.pingWithDelaySync(500);              
            result.add(Thread.currentThread().getName());
        }

    }, "thread2");

    thread1.start();
    Thread.sleep(250);
    thread2.start();

    thread1.join();
    thread2.join();

    Assert.assertEquals("both thread finished", 2, result.size());
    Assert.assertEquals("thread2 finished first", "thread2", result.get(0));
    Assert.assertEquals("thread1 finished second", "thread1", result.get(1)); 
```

当我们运行该测试时，线程 2 首先完成，因为它等待了 500 毫秒，而线程 1 等待了 1 秒：

```
Thread.sleep(delayInMs);
    return result; 
```

这很好用。当我们在野外运行两项远程作业时，一项需要大约 50 秒才能完成，另一项设计为立即失败并返回，这不会发生。

启动 50 秒作业，然后立即启动即时失败作业。客户端打印我们发送了一条消息，请求作业运行，服务器打印它收到了 50 秒的请求，但在处理第二条消息之前一直等到 50 秒的作业完成，即使我们使用了 ThreadPoolExecutor。

我们正在使用自动确认运行事务。

做一些远程调试，来自 AbstractPollingMessageListenerContainer 的 Consumer 没有显示未处理的消息（所以 consumer.receive() 显然只是一遍又一遍地返回 null ）。amq 代理的 webgui 显示 2 个入队，1 个双端队列，1 个已调度，1 个在调度队列中。这向我表明，有些东西正在阻止 AMQ 让消费者“拥有”第二条消息。（预取为 1000 btw）这显示为特定队列的唯一消费者。

在过去的几天里，我自己和其他一些开发人员一直在四处寻找，但几乎一无所获。任何建议，如果这是预期的行为，我们配置错误，或者在这里会被破坏。

远程调用的方法是否重要？目前，作业处理程序方法使用执行程序在不同的线程中运行作业并执行 future.get() （额外的线程是出于与日志记录相关的原因）。

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:38:53.567

not sure I follow completely, but off the top, you should try the following...

*   set the concurrentConsumers/maxConcurrentConsumers greater than the default (1) on the MessageListenerContainer
*   set the prefetch to 0 to better promote balancing messages between consumers, etc.

# php - 如何阻止某些php变量被使用

> ID：12960235
> 
> 赞同：0
> 
> 时间：2012-10-18T17:20:38.097
> 
> 标签：php, security, disabled-input

`$_REQUEST`当我多次告诉他们不要使用变量而是使用`$_POST`and时，与我一起工作的团队继续使用变量`$_GET`。我想知道是否有办法阻止这个变量，所以如果他们再次使用它，代码会给出致命错误。或者也许以某种方式弃用它。

例如，我可以放入`unset($_REQUEST);`包含文件的顶部，但我敢打赌他们可以找到它并禁用它，我需要能够在服务器端执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:04:17.307

我不确定任何官方方式，甚至`request_order` 并不意味着它将超级全局数组 REQUEST 留空。

您可以做的是拥有自己的小型扫描仪.. 在代码中查找 REQUEST ..（请注意，这只是一个实验）

```
ini_set("display_erros", "On");
error_reporting(E_ALL);
set_time_limit(0);

findUsage(__DIR__,'$_REQUEST'); 
```

输出示例

```
$_REQUEST Found in /public_html/www/stockoverflow/a.php Line 7 
$_REQUEST Found in /public_html/www/stockoverflow/c.php Line 3 
$_REQUEST Found in /public_html/www/stockoverflow/lib/phpThumb/demo/index.php Line 2 
$_REQUEST Found in /public_html/www/stockoverflow/lib/phpThumb/demo/phpThumb.demo.gallery.php Line 36 
$_REQUEST Found in /public_html/www/stockoverflow/lib/phpThumb/demo/phpThumb.demo.gallery.php Line 45 
$_REQUEST Found in /public_html/www/stockoverflow/lib/phpThumb/demo/phpThumb.demo.gallery.php Line 47 
$_REQUEST Found in /public_html/www/stockoverflow/lib/phpThumb/demo/phpThumb.demo.gallery.php Line 4 
```

使用的功能

```
function findUsage($projectDir,$find) {
    echo "<pre>";
    $di = new RecursiveIteratorIterator(new RecursiveDirectoryIterator(__DIR__, FilesystemIterator::SKIP_DOTS));
    foreach ( $di as $file ) {
        if (! $file->isFile() || $file->getExtension() != "php")
            continue;
        $n = 0;
        foreach ( file($file) as $line ) {
            $n ++;
            if (strpos($line, $find) !== false) {
                echo $find, " Found in $file Line $n \n";
                flush();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T17:24:22.543

如果您想这样做以使您的代码安全，您可以自己制作`$_Request`并且它是安全的（将其放入引导程序中）

```
$_REQUEST = array_merge($_GET, $_POST); 
```

# c - 解释 printf 中的求值顺序

> ID：12960241
> 
> 赞同：7
> 
> 时间：2012-10-18T17:21:06.283
> 
> 标签：c, printf

```
main()
{
    int i=5;
    printf("%d%d%d%d%d%d",i++,i--,++i,--i,i);
} 
```

输出是 45545，但我不知道它是如何工作的。有人说函数调用中的参数是从左到右压入堆栈的。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-18T17:22:33.677

函数参数的评估顺序未指定。

从 c99 标准：

> **6.5.2.2 函数调用**
> 
> 10/ 函数指示符、实际参数和实际参数中的子表达式的评估顺序未指定，但在实际调用之前有一个顺序点。

然而，这只是问题的一部分。另一件事（实际上更糟，因为它涉及未定义的行为）是：

> **6.5 表达式**
> 
> 2/ 在前一个和下一个序列点之间，对象的存储值最多只能通过表达式的评估修改一次。此外，应仅读取先验值以确定要存储的值。

在我们的例子中，所有参数评估仅在 2 个序列点之间：前`;`一个点和输入函数之前的点，但在所有参数都被评估之后。你最好不要写这样的代码。

C 标准在某些地方相当宽松，为编译器可能进行的优化留出了空间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-18T17:24:55.440

传递给函数的参数的顺序在标准中没有定义，而是由编译器使用的[调用约定决定的。](http://en.wikipedia.org/wiki/Calling_convention)我认为在您的情况下，使用[**cdecl**](http://en.wikipedia.org/wiki/X86_calling_conventions#cdecl)调用约定（许多 C 编译器用于 x86 架构），其中函数中的参数从右到左进行评估。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T17:56:20.263

此函数调用是未定义的行为：

```
printf("%d%d%d%d%d%d",i++,i--,++i,--i,i); 
```

在两个序列点之间多次修改对象是 C 中未定义的行为。

这也是未定义的行为，因为您有 6 个转换规范，但格式只有 5 个参数。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-18T17:25:37.187

两点：

*   函数参数以未指定的顺序进行评估。这允许编译器根据自己的喜好进行优化。
*   您的特定参数会调用未定义的行为。不允许`i`在序列点之前多次修改。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T17:23:47.380

参数的评估顺序`printf`未指定。除其他外，这取决于您使用的系统的调用约定。此外，这也是一种未定义的行为，因为您在`i`没有任何序列点的情况下进行了多次修改。顺便说一句，缺少一个论点。

# atk4 - 模型类中公共变量的未定义属性？

> ID：12960245
> 
> 赞同：0
> 
> 时间：2012-10-18T17:21:20.717
> 
> 标签：atk4

我对以下代码片段感到有些困惑，它只是在使用 addField() 将列添加到模型之前检查表中是否存在列。

然而奇怪的是，PHP error_log 警告我第一次使用公共变量时没有正确定义它：

```
/var/www/ocmal_db_svn/lib/Model/Conflicto.php:[Notice] Undefined property: Model_Conflicto::$entity_code, 
```

这就是 SQL 查询抛出错误的原因，因为没有表名的“SHOW columns FROM”是不完整的......

在类中定义一个公共变量应该初始化它，不是吗？还是有其他问题？任何人都可以在这里看到错误吗？我在看什么？（这是 PHP 5.3 顺便说一句）

```
class Model_Conflicto extends Model_Table {

      public $entity_code='conflicto';

        function init(){
             parent::init();

               if ($this->api->db->dsql()->expr("SHOW COLUMNS FROM `". $this->entity_code. "` LIKE 'lock_id'")->getOne()==null)
          error_log('OCMAL_DB: WARNING: table '.$this->entity_code.' does not have lock_id, which is kinda BAD !!!');
        else $this->addField('lock_id'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:14:52.377

这绝对不是您问题的完整答案，因为我真的不明白这一点，但是：

1）您应该使用 public $table='conflicto' 而不是 $entity_code 因为 $entity_code 已过时（但出于兼容性原因仍然可用）

2）我看不出有什么理由需要在将字段添加到模型之前检查表中是否存在字段。是否有人在没有通知的情况下简单地从数据库中删除字段并且不将其从模型中删除？如果是这种情况，那么您需要在项目管理中进行一些更改，而不是创建凌乱而缓慢的代码:) 您是否想象如果每次初始化此模型时您都将查询 SHOW 列，会给您的数据库带来多大的压力从表？！

# actionscript-3 - 是否有关于如何将文件从 flex 应用程序拖动到 Windows 资源管理器的教程？

> ID：12960246
> 
> 赞同：0
> 
> 时间：2012-10-18T17:21:21.157
> 
> 标签：actionscript-3, apache-flex, air, flash-builder4.5

我似乎找不到有关如何创建拖动事件的教程，该事件允许您将文件从 flex air 应用程序拖动到 Windows 资源管理器文件系统中。这可能吗？我有一个图标，我希望能够单击该图标并将其从我的空中应用程序信息中拖动到文件系统中，并在该位置创建一个文本文件，然后将其放入其中。有谁知道让我开始的教程或示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:01:06.490

如果您下载 tour de FLEX（它是空中应用程序中的一堆 flex 教程），我确实找到了一个正是我正在寻找的东西[http://www.adobe.com/devnet/flex/tourdeflex.html](http://www.adobe.com/devnet/flex/tourdeflex.html) 就是那个称为“拖放（2）”它关于将空中应用程序内的表单拖放到文件系统并返回非常有帮助！谢谢大家！

# c# - 我可以在不损失性能的情况下从异步套接字切换到 sslstream 吗？

> ID：12960248
> 
> 赞同：0
> 
> 时间：2012-10-18T17:21:28.997
> 
> 标签：c#, sockets, ssl

我的问题是关于持久连接的数量。（显然添加 SSL 加密时会有性能损失）。

目前我有使用异步套接字模型[http://msdn.microsoft.com/en-us/library/w89fhyex.aspx](http://msdn.microsoft.com/en-us/library/w89fhyex.aspx)的 C# 服务器和客户端应用程序。我选择这个模型是因为它似乎最适合性能并且服务器应用程序必须支持 5000 个持久套接字连接。

我现在必须保护正在发送的数据，我希望使用 SSL。我可以更改为 SSLStreams 并且仍然支持 5000 个持久连接吗？（我注意到 SSLStreams 具有异步方法......另外，我所做的阅读表明流不同但与套接字相同......）

需要注意的是，服务器不仅与其他 C# 设备通信，它还与 iOS 和 Android 通信。

无论如何在异步套接字模型之上分层 SSL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:31:35.723

如果您可以使用第三方组件，那么我们的 SecureBlackbox 产品的 SSL 组件非常适合您的任务：它们提供 SSL 层，可以插入绝对任何传输，无论是同步或异步套接字，甚至是信鸽邮件。并且整体功能列表比内置 SSL 要广泛得多。

# html - 使用 LESS 旋转文本

> ID：12960249
> 
> 赞同：1
> 
> 时间：2012-10-18T17:21:36.767
> 
> 标签：html, css, less

我正在尝试使用 LESS 来旋转文本

简单地说，我尝试了以下代码，但它不起作用。

```
.my-class {
    color: #ff0000;
    .rotate(90);
} 
```

这是我的 jsfiddle [http://jsfiddle.net/D2RLR/2750/](http://jsfiddle.net/D2RLR/2750/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T17:25:12.883

您是否尝试添加一个单位？（或*单位总裁先生*？）

```
.rotate(90deg) 
```

有关更多信息，请参阅[MDN 关于 CSS3 变换和旋转](https://developer.mozilla.org/en-US/docs/CSS/transform#rotate)。这就是 LESS.js 或 lessphp 将输出的内容

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-21T00:09:41.677

为了使用 LESS 使 css 旋转在包括 ie7 到 ie10 在内的所有浏览器上工作，我使用了这样的 mixin：

```
.rotate(@deg: 90) {
    /* Safari */
    -webkit-transform: rotate(@deg * 1deg);
    /* Firefox */
    -moz-transform: rotate(@deg * 1deg);
    /* IE10+ */
    transform: rotate(@deg * 1deg);
    /* Opera */
    -o-transform: rotate(@deg * 1deg);
    /* Internet Explorer */
    @IEdeg: round(@deg / 90, 0);
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=@IEdeg);
}

#divToRotate {
   .rotate(270);
} 
```

但是您将无法在 js fiddle 中运行它，因为这需要由 lessc 编译器或使用 less js 解析器进行编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-21T01:39:52.677

我建议使用 LESS 库：[LESS Elements](http://lesselements.com/)它有一个用于旋转的 mixin，它似乎适用于许多浏览器：

> .旋转（15度）；将项目顺时针旋转一定度数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T17:26:20.293

尝试这样的事情： -

```
.box_rotate {
 -moz-transform: rotate(7.5deg);  /* FF3.5+ */
   -o-transform: rotate(7.5deg);  /* Opera 10.5 */
-webkit-transform: rotate(7.5deg);  /* Saf3.1+, Chrome */
         filter:  progid:DXImageTransform.Microsoft.BasicImage(rotation=0.083);  /* IE6,IE7 */
     -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0.083)"; /* IE8 */
     } 
```

检查此链接：- [http://snook.ca/archives/html_and_css/css-text-rotation](http://snook.ca/archives/html_and_css/css-text-rotation)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T17:25:46.770

你可以简单地用纯 CSS 编写它，它可以在 LESS: 中工作`transform: rotate(90deg);`。

# opengl - 支持 OpenGL 的虚拟机

> ID：12960253
> 
> 赞同：1
> 
> 时间：2012-10-18T17:21:50.847
> 
> 标签：opengl, cloud, virtual-machine, glx

我们有一个想要在虚拟机上编译、自动构建和自动测试的应用程序。虚拟机“提供者”必须能够跨平台，因为我们需要在 Windows 和多个 Linux 发行版上同时执行此操作。我们的应用程序依赖于 OpenGL，并且需要相当新版本的 OpenGL 才能正常工作。

我们在 Oracles Virtual Box 方面拥有不错的经验，我们可以通过一些努力来执行上述操作，因为我们可以通过主机进行硬件加速。然而，它有一定的局限性，因为它对主机要求很高，而且它并不适合同时运行的许多虚拟机。

因此，理想的解决方案可能是 Amazon EC2 云计算，但在这里我们遇到了“常见”问题，即我们可能能够轻松启动并运行 Linux 发行版（例如 Ubuntu），但遇到了非常困难的问题一旦我们想开始安装一些 OpenGL 驱动程序以便能够编译和测试我们的应用程序。即使是台面驱动程序也无法启动并运行到可以运行 glxinfo 或 glxgears 的程度。

我们不能成为唯一面临这个问题的人，那么其他人怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-01-18T18:43:59.760

> 即使是台面驱动程序也无法启动并运行到可以运行 glxinfo 或 glxgears 的程度。

Mesa 应该始终能够回退到`swrast`or `llvmpipe`。然而，对于任何使用 GLX 工作的东西，您都需要一个 X 服务器。我建议不要使用基于 Kdrive 的服务器（如 Xvfb），而是使用带有`dummy`驱动程序的常规 Xorg 服务器。你必须为此写一个`xorg.conf`。

# jquery - 为什么我在 Internet Explorer 7.0 和 8.0 中遇到错误？

> ID：12960255
> 
> 赞同：1
> 
> 时间：2012-10-18T17:21:56.037
> 
> 标签：jquery, internet-explorer-8, internet-explorer-7, jquery-validate, jquery-1.7

我对我的字段使用自定义验证

```
<div class="control-group">
  <label class="control-label" for="region">Region*</label>
  <div class="controls">
    <input type="text" class="input-xlarge" id="region" name="region" minlength="1" maxlength="50" autocomplete="off">
  </div>
</div>

var regionsList = ["value1", "value2", ..., "value 80"];

$.validator.addMethod("validRegion", function (value, element, param) {
  return this.optional(element) || (param.indexOf(value) != -1); // ERROR IS HERE
}, "Please start to type and choose correct value");

$("#myform").validate({
  rules: {
    "region": {
      required: true,
      validRegion: regionsList
    },
 ... 
```

这行有什么问题（请查找带有注释 ERROR IS HERE 的行）？错误是`Object doesn't support this property or method`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T17:36:14.583

[`Array.indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)仅在 IE 9+ 上受支持。由于您已经在使用 jQuery，因此您可以使用[`$.inArray`](http://api.jquery.com/jQuery.inArray/)（如果支持，它将使用`Array.indexOf`）。

```
$.validator.addMethod("validRegion", function (value, element, param) {
  return this.optional(element) || ($.inArray(value, param) != -1);
}, "Please start to type and choose correct value"); 
```

# django - Django - 覆盖保存方法时检查旧值和新值之间的差异

> ID：12960258
> 
> 赞同：14
> 
> 时间：2012-10-18T17:22:05.397
> 
> 标签：django, orm, django-models, django-signals

谢谢你的时间。

我在 Django 1.4 上，我有以下代码：它是我`Quest`模型的覆盖保存方法。

```
@commit_on_success
def save(self, *args, **kwargs):
    from ib.quest.models.quest_status_update import QuestStatusUpdate
    created = not self.pk

    if not created:
        quest = Quest.objects.get(pk=self)
        # CHECK FOR SOME OLD VALUE
    super(Quest, self).save(*args, **kwargs) 
```

我找不到这样做的聪明方法。对我来说，为了找出旧的实例值而必须对我当前正在更新的对象进行新的查询似乎很愚蠢。

有一个更好的方法吗？

谢谢你们。

弗朗西斯科

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-10-17T18:25:15.750

您可以将旧值存储在 init 方法中：

```
def __init__(self, *args, **kwargs):
    super(MyModel, self).__init__(*args, **kwargs)
    self.old_my_field = self.my_field

def save(self, *args, **kwargs):
    print self.old_my_field
    print self.my_field 
```

您可能可以使用 deepcopy 或类似的东西来复制整个对象，以便以后在保存和删除方法中使用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-18T17:59:19.607

Django 不会缓存模型实例的旧值，因此您需要自己执行此操作或在保存之前执行另一个查询。

一种常见的模式是使用预保存信号（或将此代码直接放在您的 save() 方法中，就像您所做的那样）：

```
old_instance = MyModel.objects.get(pk=instance.pk)
# compare instance with old_instance, and maybe decide whether to continue 
```

如果您想保留旧值的缓存，那么您可能会在您的视图代码中这样做：

```
from copy import deepcopy
object = MyModel.objects.get(pk=some_value)
cache = deepcopy(object)

# Do something with object, and then compare with cache before saving 
```

[最近](https://groups.google.com/forum/?fromgroups=#!topic/django-developers/CVST-LdB-SE)也有关于 django-developers 的讨论，以及其他一些可能的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T18:27:33.893

I am checking the difference to old values using a django-reversion signal, but the same logic would apply to the save signals. The difference for me being that I want to save whether the field was saved or not.

```
@receiver(reversion.pre_revision_commit)
def it_worked(sender, **kwargs):
    currentVersion = kwargs.pop('versions')[0].field_dict
    fieldList = currentVersion.keys()
    fieldList.remove('id')
    commentDict = {}
    print fieldList
    try:
        pastVersion = reversion.get_for_object(kwargs.pop('instances')[0])[0].field_dict
    except IndexError:
        for field in fieldList:
            commentDict[field] = "Created"
        comment = commentDict
    except TypeError:
        for field in fieldList:
            commentDict[field] = "Deleted"
        comment = commentDict
    else:
        for field in fieldList:
            try:
                pastTest = pastVersion[field]
            except KeyError:
                commentDict[field] = "Created"
            else:       
                if currentVersion[field] != pastTest:
                    commentDict[field] = "Changed"
                else:
                    commentDict[field] = "Unchanged"
        comment = commentDict
    revision = kwargs.pop('revision')
    revision.comment = comment
    revision.save()
    kwargs['revision'] = revision
    sender.save_revision 
```

# java - 从 ArrayList Java 中的 HashMap 键中检索所有值

> ID：12960265
> 
> 赞同：51
> 
> 时间：2012-10-18T17:22:42.823
> 
> 标签：java, arraylist, hashmap

美好的一天，这让我现在有点困惑（大脑冻结！）并且似乎遗漏了一些东西。有一个我用 HashMap 填充的 ArrayList。现在我放入我的 HashMap 和 arraylist。

```
 Map.put(DATE, value1);
 Map.put(VALUE, value2);

 arraylist.put(Map); 
```

由于正在解析 JSON，因此数组列表的大小显着增加。现在我的问题是如何从数组列表中的两个映射键中获取值？我试过这个

```
 if(!list.isEmpty()){   // list is an ArrayList

            for(int k = 0; k < list.size(); k++){
                map = (HashMap)list.get(k);
            }

        }

        Log.d(TAG, "map size is" + map.size());

        String [] keys = new String[map.size()];
        String [] date_value = new String[map.size()];

        String [] value_values = new String[map.size()];

        int i = 0;
        Set entries = map.entrySet();
        Iterator iterator = entries.iterator();

        while(iterator.hasNext()){

            Map.Entry mapping = (Map.Entry)iterator.next();
            keys[i] = mapping.getKey().toString(); 
            date_value[i] = map.get(keys[i]);

            if(keys[i].equals(DATE)){
                date_value[i] = map.get(keys[i]);

            } else if(keys[i].equals(VALUE)){
                value_values[i] = map.get(keys[i]);
            }

                   i++;
                 } 
```

但我似乎无法获得所有的价值。Map 大小总是返回 2 的值，这只是元素。如何从 ArrayList 中的 Map 键中获取所有值？谢谢

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-10-18T17:26:01.950

当您已经有工作要做时，为什么还要重新发明轮子。`Map.keySet()`方法为您提供 Map 中所有键的 Set。

```
Map<String, Integer> map = new HashMap<String, Integer>();

for (String key: map.keySet()) {
    System.out.println("key : " + key);
    System.out.println("value : " + map.get(key));
} 
```

此外，您的第一个 for 循环对我来说看起来很奇怪：-

```
 for(int k = 0; k < list.size(); k++){
            map = (HashMap)list.get(k);
   } 
```

您正在迭代您的列表，并将每个元素分配给相同的`reference - map`，这将覆盖所有以前的值。您将拥有的只是列表中的最后一张地图。

**编辑**： -

`entrySet`如果您想要地图的键和值，也可以使用。那对你来说会更好：-

```
 Map<String, Integer> map = new HashMap<String, Integer>();

    for(Entry<String, Integer> entry: map.entrySet()) {
        System.out.println(entry.getKey());
        System.out.println(entry.getValue());
    } 
```

**PS** : -
你的代码对我来说看起来很混乱。我建议，把那段代码放在一边，再想想你的`design`时间。目前，就代码而言，很难理解它试图做什么。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2018-09-17T10:17:59.917

List 构造函数接受任何实现 Collection 接口的数据结构，用于构建列表。

要将哈希映射中的所有**键**获取到列表：

```
Map<String, Integer> map = new HashMap<String, Integer>();
List<String> keys = new ArrayList<>(map.keySet()); 
```

要将哈希映射中的所有**值获取到列表中：**

```
Map<String, Integer> map = new HashMap<String, Integer>();
List<Integer> values = new ArrayList<>(map.values()); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-18T17:38:52.480

试试这个方法...

我正在考虑type`HashMap`的**key**和**value**`String`，`HashMap<String,String>`

```
HashMap<String,String> hmap = new HashMap<String,String>();

hmap.put("key1","Val1");
hmap.put("key2","Val2");

ArrayList<String> arList = new ArrayList<String>();

for(Map.Entry<String,String> map : hmap.entrySet()){

     arList.add(map.getValue());

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T17:26:50.077

将 i++ 放在循环末尾的某处。

在上面的代码中，数组的 0 位置被覆盖，因为 i 在每个循环中都没有递增。

仅供参考：以下正在进行冗余搜索：

```
if(keys[i].equals(DATE)){                 
   date_value[i] = map.get(keys[i]);              
} else if(keys[i].equals(VALUE)){              
   value_values[i] = map.get(keys[i]);             
} 
```

用。。。来代替

```
if(keys[i].equals(DATE)){                 
   date_value[i] = mapping.getValue();
} else if(keys[i].equals(VALUE)){              
   value_values[i] = mapping.getValue()
} 
```

另一个问题是您正在使用`i`for`date_value`和`value_values`. 除非您打算在数组中包含空值，否则这是无效的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-19T18:33:22.657

这是非常古老的，但我偶然发现它试图找到一个不同问题的答案。

> 我的问题是如何从数组列表中的两个映射键中获取值？

```
for (String key : map.keyset()) {
  list.add(key + "|" + map.get(key));
} 
```

> 地图大小总是返回值 2，这只是元素

我想你可能会对`HashMap`. `HashMap`只允许地图中的**1 对 1**关系。

例如，如果您有：

```
String TAG_FOO = "FOO";
String TAG_BAR = "BAR"; 
```

并尝试做这样的事情：

```
ArrayList<String> bars = ArrayList<>("bar","Bar","bAr","baR");
HashMap<String,String> map = new HashMap<>();
for (String bar : bars) {
  map.put(TAG_BAR, bar);
} 
```

此代码最终将设置键条目`"BAR"`与列表中的最后一项相关联`bars`。

在您的示例中，您似乎对只有两个项目感到困惑，但您只记录了两个键，这使我相信您只是多次覆盖了每个键的字段。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-25T09:59:01.737

Java 8 解决方案，用于生成像“key1: value1,key2: value2”这样的字符串

```
private static String hashMapToString(HashMap<String, String> hashMap) {

    return hashMap.keySet().stream()
            .map((key) -> key + ": " + hashMap.get(key))
            .collect(Collectors.joining(","));

} 
```

并产生一个简单的列表收集作为列表

```
private static List<String> hashMapToList(HashMap<String, String> hashMap) {

    return hashMap.keySet().stream()
            .map((key) -> key + ": " + hashMap.get(key))
            .collect(Collectors.toList());

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-17T17:39:23.617

创建一个`ArrayList`类型`String`来保存地图的值。在其构造函数中调用`values()`Map 类的方法。

```
Map <String, Object> map;
List<Object> list = new ArrayList<Object>(map.values()); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-05T11:10:23.250

假设我有键数据类型为 KeyDataType 和值数据类型为 ValueDataType 的 Hashmap

```
HashMap<KeyDataType,ValueDataType> list; 
```

添加您需要的所有项目。现在您可以将所有 hashmap 键检索到列表中。

```
KeyDataType[] mKeys;
mKeys=list.keySet().toArray(new KeyDataType[list.size()]); 
```

所以，现在你得到了数组 mkeys[] 中的所有键

您现在可以通过调用检索任何值

```
 list.get(mkeys[position]); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-08-17T20:01:39.910

它具有从地图中查找所有值的方法：

```
Map<K, V> map=getMapObjectFromXyz();
Collection<V> vs= map.values(); 
```

迭代`vs`做一些操作

# php - PHP MySQL 发布表单

> ID：12960267
> 
> 赞同：0
> 
> 时间：2012-10-18T17:22:58.953
> 
> 标签：php, mysql, forms, insert

所以我整天都在为这个问题苦苦挣扎。我似乎无法在我的表中发布任何内容，我不知道为什么。

我已经构建了一个表单，其中包含为 _POST 传输的所有值。任何指针都会很棒。

```
elseif ($request == 'POST') {

include 'header_post.php'; include 'topmain.php';

$fname = $_POST['fname'];
$lname = $_POST['lname'];
$dlnum = $_POST['dlnum'];
$dob = $_POST['dob'];
$address = $_POST['address'];
$city = $_POST['city'];
$state = $_POST['state'];
$zip = $_POST['zip'];
$phone = $_POST['phone'];
$height = $_POST['height'];
$weight = $_POST['weight'];
$hair = $_POST['hair'];
$eyes = $_POST['eyes'];
$ethnicity = $_POST['ethnicity'];
}
$query3 = "insert into ".$db_prefix."customer_det (fname, lname, dlnum, dob, address, city, state, zip, phone, height, weight, hair, eyes, ethnicity) 
           values ('".$fname."', '".$lname."', '".$dlnum."', '".$dob."', '".$address."', '".$city."', '".$state."', 
           '".$zip."', '".$phone."', '".$height."', '".$weight."', '".$hair."', '".$eyes."', '".$ethnicity."')"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:35:07.080

在 PHP 中使用 MySQL 连接：

```
mysql_connect('DB_HOST','DB_USER','DB_PASS');
@mysql_select_db('DB_NAME');
$query='insert into ...';
mysql_query($query); 
```

但是您的查询容易出现 SQL 注入，建议您使用 MySQLi 扩展。

```
 $mysql = new mysqli('DB_HOST', 'DB_USER', 'DB_PASS', 'DB_NAME');
    $query = 'insert into customer_det (
        fname,
        lname,
        dlnum,
        .......
    ) values (?,?,?,....,?)';
    $statement = $mysql->prepare($query);
    $statement->bind_param('sss...', //How many ever fields are there, those many sssss. For Integer use i. s is for string fields. Example ssssisssi....
        $fname,
        $lname,
        $dlnum,
        .....);
    $statement->execute();
    $statement->close();
    $mysql->close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:25:10.513

您没有执行查询

采用`$result=mysql_query($query3);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T17:25:33.907

你应该使用`mysql_query`：

```
$query3 = mysql_query("insert.."); 
```

您还应该在之前添加它`$fname = $_POST['fname'];`以防止在页面加载时查询：

```
if(isset($_POST['fname'])){

 $fname = $_POST['fname'];
 ....
 $query3 = mysql_query("insert..");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T17:30:36.183

必须有一个查询调用。使用 mysql_query();

如上所述，使用存储在数据库中的用户输入文本的任何变量都应包含在 mysql_real_escape_string() 中以防止 SQL 注入。

# .net - 无法调试 Windows 服务 -“附加到进程”

> ID：12960268
> 
> 赞同：10
> 
> 时间：2012-10-18T17:23:02.783
> 
> 标签：.net, visual-studio-2010, windows-services

[Microsoft 说明说明以下内容](https://msdn.microsoft.com/en-us/library/7a50syb3.aspx)

> 在 Visual Studio 中，从“调试”菜单中选择“附加到进程”。
> 
> 出现“进程”对话框。
> 
> 单击显示系统进程。
> 
> 在可用进程部分中，单击您的服务的进程，然后单击附加。

但是，我没有看到“显示系统进程”。选项。我已尝试检查其他选项，但我的服务未显示在列表中。

![在此处输入图像描述](../Images/362dce0f4ca5989c9b082c740e117fc6.png)

是的，我已经安装并启动了服务，并且可以在服务管理器中看到它。

我也知道无法调试 onstart。但是，我有一个连续的循环运行。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-18T19:45:07.817

您必须执行以下操作：

1.  在 Visual Studio 管理员模式下打开您的解决方案。
2.  确保您的服务正在运行。
3.  打开“附加到进程窗口”
4.  确保选中两个复选框（所有用户，所有会话）。
5.  在列表中找到可执行文件的名称。

如果上述方法不起作用，您将需要提供一些有关您的设置的其他详细信息。:-)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-18T19:43:09.380

您可以在服务中的某个位置添加，例如在 OnStart 方法中此代码：

```
#if DEBUG
    System.Diagnostics.Debugger.Launch();
#endif 
```

在服务启动时，您将获得一个提示对话框来调试过程。不要忘记在 Debug 模式下构建并在生产中切换到 Release

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T17:50:18.907

实际上，要让程序获得机器上每个用户的进程列表，该程序必须具有管理权限。确保您使用相应的帐户启动 Visual Studio。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-16T06:43:24.437

确保*选择的代码类型*设置正确。您可以通过单击“附加到：”旁边的*[选择...]*按钮来管理它们。在您附加的图像中，您已将其设置为“自动：本机代码”。尝试一些其他设置。 **注意：**更改设置后按*[Refresh]*按钮以更新显示的进程列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-28T04:51:10.467

服务的名称可能与进程的名称不同。进程的名字大概就是服务exe文件的名字。您可以在任务管理器或 Windows 服务与项目中进行检查。（出现在“附加进程”窗口中的名称是进程的名称而不是服务的名称）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-23T20:17:33.227

默认情况下，未在您的帐户下运行的进程将被隐藏，这是服务默认运行的方式，除非您将它们设置为使用自定义用户运行。

确保选中所有用户的显示进程： [![在此处输入图像描述](../Images/27ad5daf9ec9d9dd8ac3af85f8ddd8b9.png)](https://i.stack.imgur.com/VFs5i.png)

# ruby-on-rails - 子域 + ActionView::Template::Error（缺少要链接的主机！）

> ID：12960270
> 
> 赞同：6
> 
> 时间：2012-10-18T17:23:11.990
> 
> 标签：ruby-on-rails, ruby

我已经解决了标题中描述的错误的众多解决方案。

`ActionView::Template::Error (Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true):`

但是，该项目还修改了 url_for 函数以使用子域，如以下 railscast 所示：

[http://railscasts.com/episodes/221-subdomains-in-rails-3](http://railscasts.com/episodes/221-subdomains-in-rails-3)

所以，这个错误的传统答案，例如在我的环境设置中设置变量似乎不是解决方案。

以下是一些其他提示：

*   这是一个全新的设置，我刚刚克隆了一个项目并安装了 ruby​​、rails、gems 等
*   我已经尝试过“rvm implode”并重新开始很多次
*   团队的其他成员通常在 Mac 上进行本地开发，而我在 Ubuntu 机器上进行远程开发。
*   我以 root 身份工作（这有关系吗？）

在 1889 毫秒内完成 500 内部服务器错误

ActionView::Template::Error (缺少要链接的主机！请提供 :host 参数，设置 default_url_options[:host]，或设置 :only_path 为 true): 1: %header.menu{:role => "banner" } 2: .col980 3: %h1 4: %a.logo{:href => root_url({:subdomain => false})} 5: -if current_user.premium? 6: %img{:alt => "Contently", :src => "/images/logo_beta_premium.png"}/ 7: -else app/helpers/url_helper.rb:16:in `url_for' app/views/shared/_logged_in_writer_nav.html.haml:4:in`_app_views_shared__logged_in_writer_nav_html_haml__656388632_107925510' app/views/layouts/ application.html.haml:35:in `block in _app_views_layouts_application_html_haml__193634629_107212530' app/helpers/application_helper.rb:15:in`html5_haml_tag' app/views/layouts/application.html.haml:2:in `_app_views_layouts_application_html_haml__193634629_107212530' app/controllers/application_controller.rb:18:in`error_generic'

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T20:53:50.307

问题是您使用的是 url 帮助程序，而没有提供用于应用程序的默认主机。的神奇之处`*_url`在于它返回路径*以及链接中的基本 url*。

例如，如果您的默认 url 主机是 example.com：

```
> link_to "All Blogs", root_url(:subdomain => false)
#=> <a href="http://example.com/">All Blogs</a> 
```

`config/environments/*.rb`您可以通过将以下行添加到您所在的环境配置文件的底部来在文件中设置默认主机。

```
config.before_initialize do                                                                                                                                                                                                       
  MyApp::Application.routes.default_url_options[:host] = 'myapp.com'
end 
```

**编辑：**

您可以通过使用完全避免此问题`*_path`

```
> link_to "All Blogs", root_path
#=> <a href="/">All Blogs</a> 
```

# spring - 导入的唯一约束未得到验证

> ID：12960272
> 
> 赞同：1
> 
> 时间：2012-10-18T17:23:16.693
> 
> 标签：spring, grails, constraints

我有一个 Spring Security User 类，它对用户名和电子邮件有一个唯一的约束。在一个命令类中，我使用“importFrom User”从这个类中导入了所有约束。除了唯一的约束之外，所有约束都按预期工作。

但是，在保存用户时，唯一约束得到验证并显示错误。但是，如果它们像所有其他约束一样在保存之前得到验证，那就太好了。

**更新**

我将此添加到控制器中：

```
user.errors.fieldErrors.each {
    command.errors.rejectValue(it.getField(), it.getCode())
} 
```

似乎是一个肮脏的解决方法，但它有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T19:05:31.073

好问题@Chris，您的解决方案是最好的，因为在域类和命令对象之间共享约束的目标是避免重复验证逻辑。

我将添加它以避免重复字段错误并处理域对象中的嵌套字段路径，可能需要类似以下内容。

```
def save(EntityCreateCommand cmd) {
    def entity = new Entity(cmd.properties)
    def someAssociation = new Something(cmd.properties)
    entity.someAssociation = someAssociation

    entity.validate()

    entity.errors.fieldErrors.each {
        def fieldName = it.field.split("\\.").last()
        def flattenedCodes = cmd.errors.getFieldErrors(fieldName).codes.flatten()
        if(cmd.hasProperty(fieldName) && (!flattenedCodes.contains(it.code))) {
            cmd.errors.rejectValue(fieldName, 
                "entityCreateCommand.${fieldName}.${it.code}")
        }
    }

    if(cmd.errors.hasErrors()) {
        error handling stuff...
    } else {
        business stuff...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:51:46.100

我之前遇到了唯一约束的问题，所以我在我的命令对象中创建了一个自定义验证器来测试它是否是唯一的：

命令对象：

```
class wateverCommand{
    ....
    String username

    static constraints = {
        username validator:{value, command ->
            if(value){
                 if(User.findByUsername(value){
                     return 'wateverCommand.username.unique'
                 }
            }
        }
    }
} 
```

在您的 messages.properties 中添加自定义错误消息：

```
wateverCommand.username.unique The username is taken, please pick a new username 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T21:57:52.187

我同意唯一约束似乎并不总是正确导入。因为我喜欢避免约束体中的混乱，所以我喜欢单线方法：

```
validator: {value, command ->  (User.findByUsername(value) ? false : true ) } 
```

然后在你的 message.properties 中它将是：

```
accountCommand.username.validator.error=That username already exists 
```

# ios - Simperium 共享通用数据集

> ID：12960274
> 
> 赞同：2
> 
> 时间：2012-10-18T17:23:22.653
> 
> 标签：ios, simperium

我有兴趣在 iOS6 上使用 Simperium 在多个用户之间共享一组通用数据，同时每个用户也拥有自己独特的数据。

这可能吗？

我正在考虑有 2 个数据集，一个连接到唯一的用户帐户，然后一个连接到一个通用的共享帐户.....

你怎么看 ！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:38:39.350

在 Simperium 的生产版本中，尚无法为多个用户提供通用数据。共享和协作目前正在测试中，其工作方式与设备同步大致相同。

# python - 在 python 子进程中保留 bash 重定向

> ID：12960276
> 
> 赞同：0
> 
> 时间：2012-10-18T17:23:34.133
> 
> 标签：python, redirect, subprocess

首先，我只能使用 python 2.4.4

我需要在 python 中编写一个进程控制器，它启动并且各种子进程监视它们如何影响环境。这些子进程中的每一个本身都是 python 脚本。

从 unix shell 执行时，命令行如下所示：

python myscript arg1 arg2 arg3 >output.log 2>err.log &

我对输入或输出不感兴趣，python不需要处理。python程序只需要知道1）每个进程的pid 2）每个进程是否在运行。

并且这些过程连续运行。

我曾尝试读取输出并再次将其发送出一个文件，但随后我遇到了 readline 不是异步的问题，对此有几个答案，其中许多都非常复杂。

如何制定保留 bash 重定向操作的 python 子进程调用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:34:28.533

如果我正确理解您的问题，听起来您在这里寻找的是能够启动脚本列表并将输出重定向到文件。在这种情况下，启动您的每个任务，如下所示：

```
task = subprocess.Popen(['python', 'myscript', 'arg1', 'arg2', 'arg3'],
    stdout=open('output.log', 'w'), stderr=open('err.log', 'w')) 
```

这样做意味着子进程的 stdout 和 stderr 被重定向到监视进程打开的文件，但监视进程不必参与复制数据。如果需要，您还可以重定向子流程标准输入。

请注意，您可能希望处理错误情况等，本示例未处理这些情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:38:18.877

您可以使用现有文件描述符作为 subprocess.Popen 的 stdout/stderr 参数。这应该等同于从 bash 重定向运行。该重定向是在 fork 之后使用 fdup(2) 实现的，并且输出不应触及您的程序。您也可以将 fopen('/dev/null') 作为文件描述符传递。

或者，您可以重定向控制器程序的 stdout/stderr 并将 None 作为 stdout/stderr 传递。孩子们应该在不通过 python 本身的情况下打印到您的控制器 stdout/stderr。这是因为子进程将继承控制器的标准输入/标准输出描述符，这些描述符在启动时由 bash 重定向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T18:58:04.430

子流程模块很好。

您也可以使用 os.fork() 在 *ix 上执行此操作，并使用 WNOHANG 定期执行 os.wait()。

# xml - XML。只是标签结束。这是什么？

> ID：12960282
> 
> 赞同：1
> 
> 时间：2012-10-18T17:23:54.923
> 
> 标签：xml, tags

如果我有这样的 XML 文件：

```
<?xml version='1.0' encoding='ISO-8859-1'?>
<data>
    <tag1>Some information</tag1>
    <tag2/>
</data> 
```

我们只有标签结尾（在这种情况下`tag2`）是否很常见？这告诉我们没有存储信息`tag2`或者这是 XML 文件上的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:28:49.313

单独拥有`</tag2>`，没有前面的开头`<tag2>`，是一个错误。

你可以有一个空`tag2`的，但它是这样写的： `<tag2 />`

# sql-server - 命令成功完成，但...未创建表

> ID：12960283
> 
> 赞同：6
> 
> 时间：2012-10-18T17:24:00.750
> 
> 标签：sql-server, ssms, sql-server-2008

[我使用 Visual Studio 的Database Publishing Wizard](http://weblogs.asp.net/jgalloway/archive/2006/12/29/tip-use-the-database-publishing-wizard-to-script-your-table-data.aspx)将我的数据库表和整个架构备份到 .sql 脚本中。

然后，我尝试在另一台 PC 上重新创建这些表，而不是在重新创建数据库之前，使用相同的名称和所有内容（使用我通过 SSMS 的`Script Database as)`.

然后，我使用 SSMS 打开该表 .sql 文件并执行它。

SSMS 报告：

> 命令成功完成

但是检查对象资源管理器会发现**没有创建任何表**。

为什么会这样？

我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-30T10:56:29.473

我刚刚使用 Visual Studio 的数据库发布向导也遇到了**完全相同的问题症状**，但原因/修复略有不同。

尽管 SQL Server Management Studio 说它已连接到正确的数据库（在功能区的下拉菜单中，以及窗口的状态栏中），但它实际上并没有连接到任何东西。

要识别和修复：

```
SELECT DB_NAME() AS DataBaseName 
```

如果你得到

```
master 
```

（或任何其他意外的数据库名称）作为结果，那么您连接到错误的数据库，应该从下拉列表中选择正确的数据库。这是你的问题的原因。

如果你得到

```
Command(s) completed successfully 
```

然后不知何故你根本没有连接 - 这发生在我身上。

要修复，请单击“更改连接”按钮断开连接并重新连接。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-18T17:28:01.320

检查您是否选择了数据库。大多数时候我们错误地在 Master db 中执行查询。

-- 如果此答案确实回答了您的问题，则标记为已回答

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-26T15:57:34.343

检查您是在运行“执行”还是在解析代码。那是一个深夜，我累了，一直运行查询创建表，成功，但没有新表。第二天，头脑清晰，我注意到我实际上并没有运行查询，我正在解析它。

# php - 在数据库列中搜索某些数字

> ID：12960284
> 
> 赞同：0
> 
> 时间：2012-10-18T17:24:04.330
> 
> 标签：php, mysql, admin

我需要一个查询来在数据库中搜索数据库同一列中列出的一组数字中的特定数字。

数据库`Access`将包含两列

第一列：页面名称

第二栏：访问

并且会设置类似：页面名称：Blog-Admin 访问权限：60,61,62,76,83,94

其中访问列中的数字是允许查看页面的等级。

在每个页面上，都会有一个查询来查找用户排名并将其存储在 $URank 变量中。

`Access`每个页面都在一个变量 ($PageName) 中命名，该变量将匹配数据库中的页面名称列

在此查询中，它需要在 Access 列中搜索该页面的用户排名（页面名称 = $PageName）

通过将其存储在数据库中，它将允许管理员随时修改谁可以访问哪些页面。

我只需要搜索数据库的查询，以确保用户排名有权访问该页面。

这可能很简单，不确定。

我习惯于诸如 mysql_query("select * from database where blahblah=viarable") 之类的查询...所以如果可以以这种格式回答，那就太好了。即使它是 mysqli 等价物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:37:54.773

编辑：好的，听起来您正在做的是在 Access 列中存储*一串允许的等级。***这是一个非常糟糕的主意**。它很难管理，并且需要在 PHP 中进行大量额外的工作。你应该做的是使用*两个*表，结构如下：

```
create table Pages (
    id int primary key auto_increment,
    name varchar(200)
);

create table Page_access (
    page_id int,
    rank int
); 
```

因此，您将在表中存储所有页面（仅此而已）的`Pages`列表。然后，将`Page_access`所有可能的页面 ID 组合（来自`Pages`表）和这些页面的接受用户排名添加到表中，因此`Page_access`可能类似于：

```
|page_id | rank |
|   1    |  60  |
|   1    |  61  |
|   1    |  62  |
|   2    |  70  |
|   2    |  71  | 
```

... 等等。这意味着您的表中可能会出现数百行 - 没关系！这是一个规范化的表，如果您索引列的性能将不会受到影响。

或者，如果你知道你总是会接受一个范围内的排名，你可以`Page_access`像这样构建你的表格：

```
create table Page_access (
    page_id int,
    min_rank int,
    max_rant int
); 
```

然后只需检查用户的排名是否在使用 SQL 的页面的最小和最大排名之间`between`。我希望这有助于组织您的表格，但我知道它仍然不能回答您最初的问题（如何编写 SQL 语句）。我建议确保你有一个好的表结构，然后在你尝试编写实际查询后提出另一个更具体的问题。

* * *

**原答案：**

假设您正在使用`mysqli`：

```
#connect to your database
$mysqli = new mysqli('localhost', $database_username, $database_password, 'Access');

#prepare and run the query
if($stmt = $mysqli->prepare('select URank from Access where URank = ?')) {
    $stmt->bind_param('i', $URank);
    $stmt->execute();
    $stmt->bind_result($exists);
    $stmt->fetch();

    if($exists) {
        #the URank was found in the table
    } else {
        #not found
    }
    $stmt->close();
} 
```

像这样的东西应该可以解决问题。我鼓励您在使用上面的示例之前阅读`mysqli`并[准备好声明。](http://www.php.net/manual/en/mysqli.prepare.php)在编写数据库查询时，您确实需要了解自己在做什么。

# c# - 管理工具停止在 APP_DATA 中创建 ASPNETDB

> ID：12960286
> 
> 赞同：1
> 
> 时间：2012-10-18T17:24:14.353
> 
> 标签：c#, asp.net, asp.net-membership, asp.net-roles

我有一个托管在 somee.com 上的数据库，我将它用于我的会员、角色和其他信息表。

不过，到现在为止，我只遇到了 ASP.NET Web 管理工具自动生成的 ASPNETDB.mdf 的小问题，所以我有时将其删除，让工具重新创建它，这样一些 Roles 问题将在网站。

昨天我没有设法删除它，因为Windows一直说它正在被其他应用程序使用，所以我只是打开了任务管理器并关闭了所有与SQL相关的任务。然后，我设法删除了 aspnetdb 文件，但该工具没有重新创建它！

今天我又试了一次，仍然没有生成 aspnetdb.mdf，而且任务管理器上也没有与 SQL 相关的任务:(

如果我可以在没有 aspnetdb.mdf 的情况下拥有角色和一切，就在 somee.com 数据库上，我会感谢你的解决方案。以下是一些 web.config 详细信息：

```
<connectionStrings>
  <add name="MembershipProviderDB" connectionString="workstation id=medinadb.mssql.example.com;packet size=4096;user id=user;pwd=password;data source=medinadb.mssql.example.com;persist security info=False;initial catalog=medinadb" providerName="System.Data.SqlClient"/>
</connectionStrings>

<membership defaultProvider="SqlProvider" userIsOnlineTimeWindow="15">
  <providers>
    <clear/>
    <add name="SqlProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="MembershipProviderDB" applicationName="AmedinaKom" enablePasswordRetrieval="false" enablePasswordReset="true" requiresUniqueEmail="true" passwordFormat="Hashed" minRequiredPasswordLength="5" minRequiredNonalphanumericCharacters="0"/>
  </providers>
</membership> 
```

我将 MembershipProviderDB 用于所有用途，尽管仍然需要 APP_DATA/aspnetdb.mdf：Z。

顺便说一句，似乎 aspnetdb.mdf 仅用于角色。对此不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:22:26.767

好吧，我终于修好了。我会写解决方案，以防其他人面临这个问题或将来会遇到这个问题：

1.  尝试从 Internet 添加一个 aspnetdb.mdf，看看您是否遇到错误 26 连接错误。
2.  在控制面板 -> 卸载中卸载已安装的 Microsoft SQL Server 实例。
3.  从 (http://www.microsoft.com/en-us/download/details.aspx?id=29062) 下载安装并选择适合您操作系统的版本。（我的是 x64）
4.  安装服务器实例。我的以前是 SQLExpress。
5.  现在进入管理工具，一切都和以前一样。

**原因**是通过任务管理器关闭服务器。不确定是哪一项任务对此负责，但是 - 最好的方法是在本地计算机上重新安装服务器实例。

我仍在寻找一种将所有内容都保存在托管数据库中的方法，但我并不在乎，因为这可能在网站的主机中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T12:58:17.803

aspnetdb 用于角色。如果您想像我一样在数据库服务器上拥有所有内容，请了解角色提供者（如成员资格提供者），它只是帮助我解决了所有问题。

# ruby-on-rails - 带有复选框的 Rails HABTM

> ID：12960289
> 
> 赞同：2
> 
> 时间：2012-10-18T17:24:18.437
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我有三个表格，帐户、活动和帐户活动。我想在广告系列编辑表单中为选定帐户设置复选框。

我有这样的 Campaign 模型：

```
class Campaign < ActiveRecord::Base
  has_and_belongs_to_many :accounts
  accepts_nested_attributes_for :accounts
end 
```

我想我不需要在 Account 上定义关系。

我的表格是：

```
= hidden_field_tag "campaign[accounts_ids][]", nil
  - Account.all.each do |account|
    %label.checkbox
      = check_box_tag "campaign[accounts_ids][]", account.id, @campaign.account_ids.include?(account.id),
      id: dom_id(account)
      = "#{account.name} - #{account.email}" 
```

但我收到了这个错误：

```
unknown attribute: accounts_ids 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:27:47.410

Ok, finally I got it, is not necessary to use has_many :through as many people recomends, this is the easiest setup possible i think to add checkboxes for select items on a HABTM (has and belongs to many, many has many) relationship.

To recapitulate I want to have checkboxes on campaig to select the accounts that campaign will use.

**First**, on the model for the form you want to add the checkboxes

```
class Campaign < ActiveRecord::Base
  has_many :mail_sequences, order: 'step'
  has_and_belongs_to_many :accounts
  accepts_nested_attributes_for :accounts
end 
```

**Second**, There's NO need to create the relationship on the other model (Account)

**Third**, On the form, this is haml, (this maybe could be optimized):

```
 = hidden_field_tag "campaign[account_ids][]", nil
  - Account.all.each do |account|
    %label.checkbox
      = check_box_tag "campaign[account_ids][]", account.id, @campaign.account_ids.include?(account.id),
      id: dom_id(account)
      = "#{account.name} - #{account.email}" 
```

# python - 带有 pymongo 安全插入的 Mongo Auth

> ID：12960293
> 
> 赞同：1
> 
> 时间：2012-10-18T17:24:33.380
> 
> 标签：python, mongodb, pymongo

我正在运行 Mongo 2.2.0，分片和复制，并且使用 python (pymongo 2.1.1) 有一些奇怪的行为。

注意事项：

> 在我尝试访问的每个数据库上都创建了具有正确权限的用户。
> 
> 以下是通过 mongo 路由器连接的。
> 
> MONGO_URI 是在部署早期设置的环境变量： $MONGO_URI = "mongodb://USER:PASSWORD@localhost:27017/DB"

我可以通过 mongo shell 很好地进行身份验证、读取和写入，我还可以启动 python 会话并且以下工作正常：

```
 >>> import pymongo
    >>> import os
    >>> c = pymongo.Connection(os.environ['MONGODB_URI'])
    >>> c.DB.COLL.insert(dict(a=2))
    >>> list(c.DB.COLL.find()) 
```

但是当我在插入时使用 safe=True 时：

```
 >>> import pymongo
    >>> import os
    >>> c = pymongo.Connection(os.environ['MONGODB_URI'])
    >>> c.DB.COLL.insert(dict(a=2), safe=True) 
```

我收到此错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "local/lib/python2.7/site-packages/pymongo/collection.py", line 312, in insert
    continue_on_error, self.__uuid_subtype), safe)
  File "local/lib/python2.7/site-packages/pymongo/connection.py", line 822, in    _send_message
    return self.__check_response_to_last_error(response)
  File "local/lib/python2.7/site-packages/pymongo/connection.py", line 759, in __check_response_to_last_error
    helpers._check_command_response(error, self.disconnect)
  File "local/lib/python2.7/site-packages/pymongo/helpers.py", line 128, in _check_command_response
    raise OperationFailure(msg % response["errmsg"])
pymongo.errors.OperationFailure: unauthorized 
```

我是否以错误的方式调用某些东西，或者在某处可能存在 auth 和安全的错误？我倾向于首先相信自己的错误，但如果我在插入语句中保持安全，我会得到正确的行为。

我研究了这些主题：

[Pymongo 在尝试访问远程服务器时给出 db 断言失败](https://stackoverflow.com/questions/6627611/pymongo-gives-db-assertion-failure-while-trying-to-access-remote-server) [Pymongo 安全插入的权限问题](https://stackoverflow.com/questions/5532185/pymongo-permissions-issue-for-safe-inserts) [OperationFailure：在 MongoEngine/PyMongo 中进行线程处理时出现数据库错误](https://stackoverflow.com/questions/9857898/operationfailure-database-error-when-threading-in-mongoengine-pymongo)

...但我还没有找到不需要我停用身份验证的答案。

编辑：我还在 googlegroup 上发布并得到了答案，这是 pymongo 中的一个错误。我升级到 2.3，一切正常。

[https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/UlbW4942xsw](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/UlbW4942xsw)

# sql-server - 如何使用 T-SQL 仅选择 B 列值不大于 A 列中下一个更大值的那些行？

> ID：12960299
> 
> 赞同：-3
> 
> 时间：2012-10-18T17:24:48.590
> 
> 标签：sql-server, tsql

```
A     B
1     2
1     1
1     3
1     4
3     3
3     4
4     5 
```

如何使用 T-SQL 仅选择 B 列值不大于 A 列中下一个更大值的那些行？

例如，如果上表是输入，则输出应如下所示；

```
A     B
1     2
1     1
3     3
4     5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:31:54.373

```
select t1.A, t1.B
  from tbl t1
 where t1.B < isnull((select min(t2.A)
                        from tbl t2
                       where t2.A > t1.A), t1.B+1) 
```

# phpmyadmin - phpMyAdmin 不显示添加的列

> ID：12960302
> 
> 赞同：6
> 
> 时间：2012-10-18T17:24:58.330
> 
> 标签：phpmyadmin

自从我得到 phpMyAdmin 3.5.2.2 以来，出现了一个奇怪的问题。当我向特定表添加新列时，它不会显示在概览中。这个问题只有一个表出现，其他都正常。在设置中找不到东西：/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T09:51:59.513

我也经历过这种情况。（XAMPP 1.8.1、PHP 5.4.7、PMA 3.5.2.2）。

*解决此问题的*丑陋方法：**

 *> 1.  将表导出为文本（SQL 转储）
> 2.  删除表
> 3.  恢复表（使用 SQL 转储备份）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-05T21:59:05.837

我发现这个问题的答案稍微不那么难看！您可以转到“操作”选项卡并将表复制到另一个数据库，然后您可以删除原始表并复制回来，或者只是切换代码。我将我的数据库连接全部设置为一个变量，因此更改代码对我个人来说非常容易。希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-22T09:55:31.667

数据库 phpmyadmin 用于存储隐藏哪些列，表应按哪一列排序等。表 pma_table_uiprefs (phpmyadmin.pma_table_uiprefs) 特别具有列：用户名；数据库名称；表名；和偏好。

我在该表中找到了与您的 db_name、user_name 和 table_name 匹配的行，并将其删除。这会将布局重置为显示所有列！

prefs 列是文本，如果您有一些空闲时间和精力，它的格式可能会被破译，但是删除该行很容易，然后您可以在 phpmyadmin 中再次调整布局，该行将在 phpmyadmin.pma_table_uiprefs 中重新创建。

执行此操作时，我以 root 身份进行了身份验证。*

# matlab - 给定一组数据，用 fft 提取可能的频率，怎么做？

> ID：12960306
> 
> 赞同：1
> 
> 时间：2012-10-18T17:25:10.093
> 
> 标签：matlab, fft, frequency-analysis

我对振动和使用 matalb fft 相当陌生。我得到了一组长度为 15000 的数据（一维数组）（不确定这是否相关），我试图弄清楚在这个数据中是否有任何波全部。我被指示可能使用 matlab fft。这是正确的方法吗？我期待看到什么？我真的不确定如何解释我会得到的任何结果。请让我知道你们的想法。谢谢，如果需要更多详细信息，我会提供。例子：

```
% Df=[array is given to me and it is of size 15000];
% t=[time used for the above array, and if it is of the same size, also provided to me]

N_0= length(t);

fs_0=length(Dfxz);

Y_0=fft(Dfxz,N_0);

k_0=-N_0/2:N_0/2-1;

%Find the phase angle
p_0 = (angle(Y_0));
R_0 = norm(Y_0);

ff_0 = (0:length(Y_0)-1)'/length(Y_0)*100;    % Frequency vector
FT_power1_0 = abs(Y_0);

plot(k_0*fs_0/N_0,fftshift(abs(Y_0))) 
```

我只看到频率 = 0 的 1 次窥视，但我确信有非零频率，我做错了什么？谢谢！PS：我也不知道如何选择采样频率？请提供任何提示（请记住，我不知道原始频率）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T22:12:28.630

试试我的版本。在我看来，您拥有在数据中找到频率峰值（如果存在）所需的所有信息。如果您所看到的只是零频率处的一个大峰值，那么您可能有一个巨大的 DC 偏移量，它淹没了所有其他数据。我在我的代码中加入了补救措施。.

```
x = randn(15000,1); %//This is the data you were given - I'll use noise for demonstration - replace x with your Df data

%//If youre getting a massive peak at zero that dwarfs everything else, you
%//probably have a large DC offset. Easily removed in the time domain using
%//the following ..
x = x-mean(x);

tAxis = linspace(3/15000,3,15000); %//You said you have this too - I'll make up something for demonstration - make sure you replace this with your t data
dt = diff(tAxis(1:2)); %//sample period from time axis
fs = 1/dt;%//sample rate from sample period

NFFT = numel(x); %//number of fft bins - change if you like
Y = abs(fft(x, NFFT)).^2; %power spectrum

%//Calculate frequency axis
df = fs/NFFT;
fAxis = 0:df:(fs-df);

%//Plot it all
figure; plot(fAxis(1:NFFT/2), Y(1:NFFT/2))
xlabel('Frequency in Hz')
ylabel('Power') 
```

[如果一切正常，您可以通过查看stackoverflow 上的另一个 FFT 答案来](https://stackoverflow.com/questions/9694297/matlab-fft-xaxis-limits-messing-up-and-fftshift/9699983#9699983)更深入地了解。

# windows-8 - Windows 应用商店应用程序能否编译为 x86 而不是 AnyCPU？

> ID：12960312
> 
> 赞同：1
> 
> 时间：2012-10-18T17:25:29.857
> 
> 标签：windows-8, x86, windows-runtime, windows-store-apps, anycpu

我有一些 .NET 代码正在考虑移植到 Windows 应用商店应用程序中。

这段代码做了一些不同的事情，其中​​一件事情依赖于编译为 x86 而不是 AnyCPU。

这会是个问题吗？Metro 应用程序能否编译为 x86 并仍可在 Windows 应用商店中分发？是否被编译为 x86 会阻止它在 Windows RT 中运行？我是否必须想出一个没有此功能子集的版本才能在 Windows RT 中运行？如果我可以将代码放入它自己的程序集中，我可以让 Windows RT 版本不使用它吗？（所以，主要的可执行文件是 AnyCPU，而这个程序集是 x86）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T18:20:35.673

> Metro 应用程序能否编译为 x86 并仍可在 Windows 应用商店中分发？

是的。但是，它只能用于 x86 安装。

> 是否被编译为 x86 会阻止它在 Windows RT 中运行？

由于 Windows RT 设计为仅在 ARM CPU 上运行，因此针对 x86 进行编译将使其无法在 Windows RT 上运行。

> 我是否必须想出一个没有此功能子集的版本才能在 Windows RT 中运行？如果我可以将代码放入它自己的程序集中，我可以让 Windows RT 版本不使用它吗？

您可以使用条件编译符号来包含/排除代码中需要的功能。[https://stackoverflow.com/a/6587823/61385](https://stackoverflow.com/a/6587823/61385)显示了如何执行此操作的示例。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T17:28:12.843

只需编译您需要的任何库，当您上传到应用商店时，只需上传您想要的库。检查您的 apppackages 文件夹并查找 .appxupload 文件。

# android - 使用相机预览填充的 SurfaceTexture 作为 Renderscript 输入分配在 Jelly Bean

> ID：12960317
> 
> 赞同：8
> 
> 时间：2012-10-18T17:25:44.847
> 
> 标签：android, android-camera, android-4.2-jelly-bean, renderscript

在 Jelly Bean 中，是否可以从相机预览填充的 SurfaceTexture 中创建 Renderscript 分配？我正在从 Android 源代码树中构建我的应用程序，所以我可以使用 @hide API，例如 Allocation.setSurfaceTexture()。但是我想避免使用 RS Graphics 已弃用的 API。[这里](https://stackoverflow.com/questions/9909039/using-surfacetexture-in-combination-with-renderscript)的类似问题没有得到完全回答，也不是 JB 特有的。

尝试以下代码时遇到以下问题：

*   进入 Renderscript 的数据始终为零
*   要重复调用 onFrameAvailable 回调，我必须 updateTexImage()，因为当我调用 Allocation.ioReceive() 时，它在第一次之后不再被回调，并且 logcat 中有一个“无效的 EGLDisplay”。然而我认为 ioReceive() 是要走的路——它在内部也是 updateTexImage()。
*   支持的分配类型包括 RGBA8888 但不包括 NV21（这是相机预览格式），RS 代码将如何处理以这种方式格式化的数据？

（我知道我正在使用的设备确实支持请求的 VGA 分辨率）。

```
public class SampleRSCPCActivity extends Activity implements SurfaceTexture.OnFrameAvailableListener {
final static int DO_KERNEL = 0;
private static final String TAG="SAMPLERSCP";
private static Camera mCamera;
private Camera.Parameters mParams;
private int mFrameWidth, mFrameHeight;
private static SurfaceTexture mST;
private RenderScript mRS;
private Allocation mInAllocation;
private Allocation mOutAllocation;
private ScriptC_mono mScript;

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    Log.i(TAG, "onCreate()");
    createGUI();
    createCamera();
    createRSEnvironment();
}

public void onPause() {
    Log.i(TAG, "onPause");
    mCamera.stopPreview();
    mCamera.release();
    mCamera = null;
    super.onPause();
}

private void createCamera() {
    mCamera = Camera.open();
    mParams = mCamera.getParameters();

    mFrameWidth = 640;
    mFrameHeight = 480;
    mParams.setPreviewSize(mFrameWidth, mFrameHeight);
    mParams.setPreviewFormat(ImageFormat.NV21);

    mCamera.setParameters(mParams);
}

private void createRSEnvironment () {
    mRS = RenderScript.create(this);
    mScript = new ScriptC_mono(mRS, getResources(), R.raw.mono);

    Type.Builder b = new Type.Builder(mRS, Element.U8(mRS));

    int usage = Allocation.USAGE_SCRIPT | Allocation.USAGE_IO_INPUT;
    mInAllocation = Allocation.createTyped(mRS, b.setX(mFrameWidth).setY(mFrameHeight).create(), usage);
    mOutAllocation = Allocation.createTyped(mRS, b.setX(mFrameWidth).setY(mFrameHeight).create());

    Log.i(TAG, "Getting SurfaceTexture from input Allocation");
    mST = mInAllocation.getSurfaceTexture();

    mST.setOnFrameAvailableListener(this);

    try {
      Log.i(TAG, "Setting SurfaceTexture for camera preview");
      mCamera.setPreviewTexture(mST);

      Log.i(TAG, "Starting preview");
      mCamera.startPreview();
      } catch (IOException e) {
      Log.e(TAG, "Oops, something got wrong with setting the camera preview texture");
    }
}

private void createGUI() {
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(R.layout.main);
}

private Handler handler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        if (msg.what == DO_KERNEL)
          Log.i(TAG, "Calling RS kernel");
          mST.updateTexImage();
          // mInAllocation.ioReceive();
          mScript.forEach_root(mInAllocation, mOutAllocation);

          Log.i(TAG, "Finishing RS");
          mRS.finish();
          Log.i(TAG, "Ok");
    }
};

public void onFrameAvailable(SurfaceTexture st) {
  Log.i(TAG, "onFrameAvailable callback");
  handler.sendEmptyMessage(DO_KERNEL);
} 
```

}

RS 代码相当简单，只是尝试检测非空数据：

```
void root(const uchar *v_in, uchar *v_out, uint32_t x, uint32_t y) {

if (*v_in != 0)
  rsDebug("input data non null !", *v_in);
*v_out = (x / 640) * 255; 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T13:39:57.773

跟进我自己的问题：

事实证明，从相机填充的 SurfaceTexture 读取 NV21 缓冲区是不可能的。我不得不修改 Android 源代码来进行实验（对于专家：获取 SurfaceTexture 的当前缓冲区，然后将其锁定以获得真正的缓冲区指针 - 我在 RS Driver 的 rsdAllocationIoReceive() 中完成了此操作）。这对于避免执行从相机到 RS 的缓冲区复制非常有用。

最新的 JB（MR1 版本）有一个名为 LivePreview 的测试应用程序，它对相机预览执行 RS 处理。但是，它使用应用程序分配的预览回调缓冲区，然后将其*复制*到输入分配。有趣的是，它使用新的 ScriptIntrinsicRgbToYuv 类进行颜色转换。大部分转换是手工编码的 Neon 组件，因此可能相当快。

甚至可能是 Nexus 10（具有 Mali 支持的 RS 驱动程序）在 GPU 上执行此操作，我很想亲手使用这个设备。（欢迎捐赠者 ;-) ！）

# php - 存储数组复选框值

> ID：12960318
> 
> 赞同：-1
> 
> 时间：2012-10-18T17:25:46.143
> 
> 标签：php

我有一张没有用户的桌子

```
$listuser = mysql_query('SELECT id,firstname,lastname,approve FROM user');
echo '<form action="" method="post">';
echo '<table>
          <tr><td>Name</td>
              <td>AdminApprove</td>
          </tr>';
while($row = mysql_fetch_assoc($listuser))
{
  $id = $row['id'];
  $firstname = $row['firstname'];
  $lastname  = $row['lastname'];
  echo '<tr>
           <td><input type="hidden" name="id[]" value ='.$id.'></td>
           <td>'.$firstname.''.$lastname.'</td>
            <td><input type="checkbox" name="approve[]"></td>
        </tr>';
}
echo '<tr><td><input type="submit" name="submit" value="submit"></td></tr>';
echo '</table></form>'; 
```

提交表格后

```
 $postedid = $_POST['id'];
   $approve = isset($_POST['approve']) ? 1 : 0;   
   $approvestudent = 'UPDATE user SET approve = '.$approve.' WHERE id = '.$postedid.'';
   $result_update = mysql_query($approvestudent); 
```

我想为每个学生一次批准一个或多个，并且批准的复选框值需要使用 0 或 1 存储到数据库中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:27:53.277

`$_POST['id']`是数组不是字符串或整数

您可以使用php`serialize()`函数将数组转换为字符串

```
 $postedid = $_POST['id'];
   $approve  = $_POST['approve']; 
```

应该

```
 $postedid = serialize($_POST['id']);
   $approve  = serialize($_POST['approve']); 
```

# ssis - 使用 SSIS 从存储过程中导出 XML 文件

> ID：12960324
> 
> 赞同：1
> 
> 时间：2012-10-18T17:25:52.440
> 
> 标签：ssis

有一个以 XML 作为输出的存储过程，它在 SSMS 中显示 xml 输出。我应该如何使用 SSIS 从这个存储过程生成一个 XML 文件到特定位置。我找到了一个链接，它建议使用 VB 和脚本任务来执行此操作。可以不使用脚本任务来完成吗？我还尝试了此链接中的以下步骤：

[如何从 SQL Server 导出到 XML](https://stackoverflow.com/questions/9233703/how-to-export-from-sql-server-to-xml/12959905#12959905)

包在执行 SQL 任务本身失败，并给出错误 [执行 SQL 任务] 错误：执行查询“EXEC USP_PMAXML”失败，出现以下错误：“找不到存储过程 'EXEC USP_PMAXML'。”。可能的失败原因：查询有问题，“ResultSet”属性设置不正确，参数设置不正确，或连接未正确建立。

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T18:23:06.447

A）您收到的错误表明它找不到存储过程。您将要验证

1.  存储过程存在
2.  访问存储过程的帐户对其具有执行权限
3.  存储过程存在于帐户的默认架构中，可能是 dbo。{我见过在用户模式下创建过程的问题`[domain\user].USP_PMAXML`}
4.  您正在使用的连接管理器指向正确的服务器和目录（数据库）。

B) 如果您想使用开箱即用的方法并避免编写脚本，请删除您的`Execute SQL Task`. 下面我展示了一个用于复制目的的执行 SQL 任务。它创建一个生成 XML 的存储过程。

![控制流](../Images/5f135e6266855897d5d3c0e2f5b98b0f.png)

1.  添加数据流任务。
2.  在数据流任务中，添加一个 OLE DB 源。
3.  将您的 OLE DB 源配置为使用连接管理器，并且我们验证的存储过程在步骤 1 中是正确的
4.  假设应该只生成一个文件，从 OLE DB 源中添加一个派生列转换，并在其中定义输出文件名，我假设它是`C:\ssisdata\so_xmlExtract.xml`. 我将进一步假设您将该列重命名为 FileName。您将使用的确切值是 "C:\ssisdata\so_xmlExtract.xml" 请注意斜杠加倍，因为我们必须转义`\`字符并用双引号括起来。

5.  此时，您已准备好使用导出列转换。示例[Export Varbinary(max) column with ssis](https://stackoverflow.com/questions/12712632/export-varbinarymax-column-with-ssis)和 [Using SSIS to extract an XML representation of table data to a file](https://stackoverflow.com/questions/9104123/using-ssis-to-extract-a-xml-representation-of-table-data-to-a-file)

![数据流](../Images/2efd70a98b5136a18d268e8a52cda48f.png)

# jquery - JSP中的Jquery错误

> ID：12960326
> 
> 赞同：1
> 
> 时间：2012-10-18T17:25:59.417
> 
> 标签：jquery, jsp

当我在 JSP 中放置以下 jQuery 代码时：

```
<script>
    $(document).bind("ready",function(){
        var recordPerPages=3;
        var currentPage=1;
        var trs=$("table tr");
        alert(trs);

        function create(pageNo){
            $("table").empty();
            var endRec=pageNo*recordPerPages;
            var stRec=endRec-recordPerPages;
            trs.each(function(indx){
                if((indx+1)>=stRec && indx<endRec){
                    $("table").append($(this))
                }
            })
        }
        create(currentPage)

        $("#prev").bind("click",function(){
            currentPage=currentPage-1
            create(currentPage)
        })

        $("#next").bind("click",function(){
            currentPage=currentPage+1
            create(currentPage)
        })
    })
</script> 
```

然后我收到以下错误：

```
editListContributions.jsp:38:29: Illegal token.
       if((indx+1)>= stRec && indx <  endRec){

                        ^ 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T17:32:57.333

如果您实际上使用的是 JSPX 而不是 JSP，就会发生这种情况。JSPX 是基于 XML 的。XML 中的所有[特殊字符，](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML)例如`<`,`&`和`>`（分别表示 XML 元素的开头、XML 实体的开头和 XML 元素的结尾）都需要转义为`&lt;`,`&amp;`和`&gt;`。

```
if((indx+1)&gt;= stRec &amp;&amp; indx &lt; endRec){ 
```

这种不可读的混乱的替代方法是将整个脚本放在一个`CDATA`块中。

```
<script>
    <![CDATA[
        ...
    ]]>
</script> 
```

然而，更好的是把 JS 代码放在你自己的`.js`文件中，你可以通过`<script src>`.

```
<script src="onload.js"></script> 
```

### 也可以看看：

*   [Mozilla 开发者网络 - 为 XHTML 编写 JavaScript](https://developer.mozilla.org/en-US/docs/Writing_JavaScript_for_XHTML)

# email - 电子邮件lua脚本正文内的for循环

> ID：12960328
> 
> 赞同：-1
> 
> 时间：2012-10-18T17:26:03.370
> 
> 标签：email, for-loop, lua

基本上，我有几个设备需要从中提取数据。当温度测量值低于或超过设定限制时，我会收到多封电子邮件。我希望有一个`for`循环将所有当前低于或超过限制的设备状态包含在一封电子邮件中。

```
body = for device_name, 1 do 
  device_name++ -- I get error here because unexpected symbol near 'for'
  "Device Name: " ..device_name.. "\nDevice Location: " ..device_location.. 
  "\n--------------------------------------------------------------" .. 
  "\nCurrent Temperature: " ..temperature.." F".. "\nTemperature Limit: ("..
  t_under_limit.. "-" ..t_over_limit.. " F)" .."\n\nCurrent Humidity Level: " .. 
  humidity .. "%".. "\nHumidity Limit: (" .. h_under_limit.. "-" ..h_over_limit.. "%)" 
  .. "\n\n-------Time Recorded at: " ..os.date().. "-------"})
end, -- end for 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:44:03.010

lua 中没有 variable++ 语法。你需要做

```
variable = variable + 1 
```

此外，您不能将一些 for 循环构造分配给变量。所以这个声明

```
body = for device_name, 1, ... 
```

无效。也许你的意思是……

```
local body = ""
for device_name = 1, 1
    device_name = device_name + 1
    body = body.. "my custom message stuff here"
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:38:16.273

如前所述，`++`Lua 中没有运算符。此外，`for`循环的语法与您编写的不同。

我想补充一点，之后使用`string.format`. 这是您的代码的增强版本，形式为 aa 函数，在输入中采用表设备参数，每个元素都是一个子表：

```
local report_model = [[
Device Name: %s
Device Location: %s
--------------------------------------------------------------
Current Temperature: %d °F
Temperature Limit: (%d-%d °F)
Current Humidity Level: %d %%
Humidity Limit: (%d-%d %%)

-------Time Recorded at: %s-------]]

function temp_report(devices)
  local report = {}
  for i=1,#devices do 
    local d = devices[i]
    report[i] = report_model:format(d.name, d.location,
      d.temperature, d.t_under_limit, d.t_over_limit,
      d.humidity, d.h_under_limit, d.h_over_limit,
      os.date())
   end
   return table.concat(report)
end 
```

# ruby-on-rails - 提交 ExtJS 表单到 Rails

> ID：12960329
> 
> 赞同：0
> 
> 时间：2012-10-18T17:26:09.217
> 
> 标签：ruby-on-rails, extjs, extjs4

当我需要将表单数据提交回 Rails 时，我遇到了麻烦。

使用默认的 html rails 更新页面时，我得到一个 params 变量，如下所示：

```
{"utf8"=>"V", "_method"=>"put", "authenticity_token"=>"+70K0Mrgy7LhwtW46Em7LgQnz10vqxOjfbldHAiB2MA=",
"pessoa"=>{"nome"=>"paulo2", "cpf"=>"1234", "data_nascimento(1i)"=>"2012", "data_nascimento(2i)"=>"6", "data_nascimento(3i)"=>"29"}, 
"commit"=>"Update Pessoa", "action"=>"update", "controller"=>"pessoas", "id"=>"1"} 
```

但是当从 ExtJs 提交时，我只得到这个：

```
{"nome"=>"paulo2", "cpf"=>"1234", "action"=>"update", "controller"=>"pessoas", "id"=>"1", "format"=>"json"} 
```

现在，这是加载记录的代码：

```
form.getForm().load({
    url: '/pessoas/1.json',
    method: 'get',
            ... 
```

这是我提交表单的代码：

```
var submitForm = function(){
    form.getForm().submit({
        url: '/pessoas/1.json',
        method: 'PUT'
    });
}; 
```

有一种特殊的方法可以将数据发送到 rails 还是我需要在 rails 中处理这些数据？

# c++ - 在对话框框架中的静态控件上使用 SS_BITMAP 样式

> ID：12960339
> 
> 赞同：-1
> 
> 时间：2012-10-18T17:27:33.607
> 
> 标签：c++, image, winapi, dialog, bmp

我正在尝试编写一个使用图像来显示旋转结果的老虎机 Win32 应用程序。我知道如何在正常的 LRESULT CALLBACK 框架上显示图像，但是在对话框上显示图像时我迷失了。谁能帮助我解释（深入）我将如何显示图像？对此，我真的非常感激。

我当前的对话框回调：

```
BOOL CALLBACK DlgProc(HWND hwnd, UINT message,WPARAM wParam, LPARAM lParam)
{
    switch(message)
    {
        case WM_INITDIALOG:         //dialog created
            g_hbmObject = LoadBitmap(GetModuleHandle(NULL), MAKEINTRESOURCE(IDB_OBJECT));
                                    //initialize slotmachine class
            Machine.Initialize(time(0));
            if(g_hbmObject == NULL) //test if object is loaded correctly
                std::cerr << "Could not load ball..";
        break;
        case WM_COMMAND:            //switch command
            switch(LOWORD(wParam))
            {
                case IDC_SPIN:      //slot machine spins
                                    //put spin function, decide what to display
                                    //do i put the display image command here? or where?
                break;
                case IDC_EXIT:      //exit button
                    DeleteObject(g_hbmObject);
                    EndDialog(hwnd, 0);
                break;
            }
        break;
        case WM_CLOSE:
        case WM_DESTROY:            //case program is exited
            DeleteObject(g_hbmObject);
            PostQuitMessage(0);
        break;
        default:
            return FALSE;
    }
    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:39:08.860

下面的代码注册了一个“REEL”窗口类：一个显示老虎机旋转卷轴的控件。您可以使用以下资源语句在对话框上创建它的多个实例：

```
CONTROL         "",IDC_REEL1,"REEL",0,14,50,40,40
CONTROL         "",IDC_REEL2,"REEL",0,70,50,40,40 
```

卷轴无休止地旋转，但您可以轻松添加私人消息来启动和停止它。

正如评论中所解释的，它需要一个位图来表示具有资源 ID 的卷轴`IDB_REEL`。

```
HBITMAP g_hbmpReel;

LRESULT CALLBACK ReelWndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    const int ReelTimerId = 5;

    switch (message)
    {
    case WM_CREATE:
        SetTimer(hWnd, ReelTimerId, 10, 0);
        break;
    case WM_DESTROY:
        KillTimer(hWnd, ReelTimerId);
        break;
    case WM_SIZE:
        SetWindowPos(hWnd, 0, 0, 0, 40, 40, SWP_NOACTIVATE | SWP_NOMOVE | SWP_NOREDRAW | SWP_NOZORDER);
        break;
    case WM_TIMER:
        if (wParam == ReelTimerId)
        {
            int offset = GetWindowLong(hWnd, 0);
            offset = (offset + 5) % 120;
            SetWindowLong(hWnd, 0, offset);
            InvalidateRect(hWnd, 0, FALSE);
        }
        break;
    case WM_PAINT:
        {
            PAINTSTRUCT ps;
            HDC hdc = BeginPaint(hWnd, &ps);
            HDC hdcReel = CreateCompatibleDC(hdc);
            HBITMAP hbmpOld = (HBITMAP)SelectObject(hdcReel, g_hbmpReel);
            int offset = GetWindowLong(hWnd, 0);
            BitBlt(hdc, 0, 0, 40, 40, hdcReel, 0, offset, SRCCOPY);
            SelectObject(hdcReel, hbmpOld);
            DeleteDC(hdcReel);
            EndPaint(hWnd, &ps);
        }
        break;
    default:
        return DefWindowProc(hWnd, message, wParam, lParam);
    }
    return 0;
}

ATOM RegisterReel(HINSTANCE hInstance)
{
    WNDCLASSEX wcex = {0};

    wcex.cbSize = sizeof(WNDCLASSEX);

    wcex.lpfnWndProc    = ReelWndProc;
    // Window data used to hold the position of the reel
    wcex.cbWndExtra     = sizeof(int);
    wcex.hInstance      = hInstance;
    wcex.hCursor        = LoadCursor(NULL, IDC_ARROW);
    wcex.hbrBackground  = (HBRUSH)(COLOR_WINDOW+1);
    wcex.lpszClassName  = L"REEL";

    // IDB_REEL is a 40x160 bitmap representing a reel with THREE 40x40 symbols.
    // The bottom 40x40 square should be the same as the topmost.
    g_hbmpReel = LoadBitmap(hInstance, MAKEINTRESOURCE(IDB_REEL));

    return RegisterClassEx(&wcex);
} 
```

# asp.net-mvc - 从 MVC 中的图库中选择图像

> ID：12960345
> 
> 赞同：0
> 
> 时间：2012-10-18T17:28:00.263
> 
> 标签：asp.net-mvc

我正在尝试允许用户选择图像并向其添加一些附加信息。

我有一个包含附加信息的对象 - 让我们保持简单并说出它的两个字符串 - 和一个图像

```
[Table("ImageInfo")]
public class ImageInfo
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int ImageInfoId { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }

    public Image Image { get; set; }
}

[Table("Image")]
public class Image
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int IamgeId { get; set; }
    public byte[] ImageBytes { get; set; }
} 
```

对于创建视图，我想向用户显示数据库中所有现有图像的两个文本字段和一个“画廊”类型布局。

我希望 iamge 画廊部分是一个局部视图，这样我也可以在其他地方重用它。

我无法弄清楚如何显示图像，也无法看到用户在控制器中选择了哪一个来链接它们。我对它进行成像将需要一些特定于视图的模型，但除此之外，我正在画一个空白。

有人可以指出我正确的方向吗？

附言。将 ImageInfo 和 Image 存储在单独的表中的原因是每个 Image 会有很多 ImageInfo。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:47:20.577

是的。你需要一些特定的视图模型。我们将其称为 ViewModel。它们是在视图中使用的简单 POCO 类。所以让我们为我们的场景创建 2 个。

```
public class AddUserImageViewModel
{
  public int UserId { set;get;}
  public List<ImageViewModel> AvailableImages { set;get;}
  public string Name { set;get;}
  public string Description { set;get;}  
  public int SelectedImageID { set;get;}
}    
public class ImageViewModel
{
  public int ID { set;get;}
  public string Name { set;get;}
  public string Description { set;get;}
  public string URL { set;get;}  
} 
```

现在在`GET`动作中，在我们的视图模型的对象上设置属性值

```
public ActionResult AddImage()
{
  var vm=new AddUserImageViewModel();
  vm.AvailableImages =repositary.GetAvailableImages();
  return View(vm);
} 
```

现在我们的视图将被强类型化到我们的视图模型中

```
@model AddUserImageViewModel
<h2>Add image to profile</h2>
@using(Html.Beginform())
{   
  @Html.HiddenFor(m=>m.SelectedImageID)
  <input type="submit" />
}
@{ Html.RenderPartial("AvailableImages",Model.AvailableImages);  } 
```

`AvailableImages`将是一个部分视图，它被强类型化为一个集合`ImageViewModel`

```
@model List<ImageViewModel>
@foreach(var item in Model)
{
  <img src=@item.URL" id=@item.ID" alt="@item.Name" class="imgItem" />
} 
```

添加一些 jquery 代码，以便当用户选择图像时，获取图像 id 并将其设置为表单中的 Hidden 变量（`SelectedImageID`），以便在发布表单时可用。

# themes - Plone 4.2 - 如何更改重氮主题中的徽标？

> ID：12960349
> 
> 赞同：2
> 
> 时间：2012-10-18T17:28:12.700
> 
> 标签：themes, plone, diazo, graphical-logo

我刚刚在 Plone 中安装了一个名为 Beyondskins.responsive 的主题。现在我想更改徽标，以便它使用我网站的徽标而不是默认的 Plone 徽标。我花了一个小时在谷歌上搜索这个问题，但我还没有找到解决方案。

我看过的地方之一是：http: [//pypi.python.org/pypi/plone.app.theming#modifying-the-theme](http://pypi.python.org/pypi/plone.app.theming#modifying-the-theme) 这个网站告诉我“您可以通过单击主题下方的修改主题来修改主题主题控制面板的主题选项卡。” 但是，我不知道如何找到他们所说的“主题控制面板”。当我以管理员身份登录后进入“站点设置”时，我看到一个名为“Diazo 主题”的选项和另一个名为“主题”的选项（只是有两个让我烦恼的事实......）但这些选项都没有“修改主题”选项。

我看过的另一个地方是：http: [//quintagroup.com/services/support/tutorials/index_html#plone-visual-design](http://quintagroup.com/services/support/tutorials/index_html#plone-visual-design) 这些人为大约 30 个不同主题中的每一个都有单独的教程（一个用于自定义 Estate 主题的教程，另一个自定义 Estate Classic 主题的教程，自定义 Coral 主题的另一个教程，等等...）我感兴趣的主题没有列出，但所有教程似乎都相似，他们首先解决的是如何更改徽标。例如，以下是更改 SkyCream 主题徽标的说明：http: [//quintagroup.com/services/support/tutorials/skycream/diazo/logo](http://quintagroup.com/services/support/tutorials/skycream/diazo/logo)

他们告诉我：“您可以通过 ZMI 用您的徽标替换此徽标。打开 portal_skins -> sunburst_images 文件夹，有 logo.png 图像。要设置您自己的徽标，请按自定义按钮。” 但是，我运行 Plone 4.2 的系统在此位置没有自定义按钮。也许这些教程是针对 Plone 4.1 的。

我开始觉得我可以从头开始编写自己的主题，而不是弄清楚 Plone 是如何工作的。请帮忙。

**更新：**好的，所以如果我访问：mysite:8080/manage_main，我会得到 Zope 根目录下的内容列表。从那里我点击我的克隆网站。从那里我点击“门户皮肤”。从那里我点击“Sunburst Images”。然后，我看到一个带有 logo.png 和 pb_close.png 链接的页面。然后我点击“logo.png”。在该页面的底部有一个名为“自定义”的按钮。我单击它，它会将我带到一个标题为“/myplonesite/portal_skins/custom/logo.png 的图像”的页面，并让我可以选择要上传的图像文件。所以我上传了我想用作我的标志的图像文件。然后我单击“保存更改”。现在，我的图像文件比原始的 Plone 徽标大。因此，在我完成上传后，它会在此页面上显示一个更大的徽标，即我的徽标。然后我去我的网站查看我的新徽标。然而，我看到的是原始的 Plone 标志，但这次它被炸得更大了！！！所以它没有更改为新的标志——它只是保留了相同的标志，但将尺寸信息用于更大的图像。我更喜欢直接处理 HTML/CSS，而不是通过 GUI 工作，但我无法弄清楚 html/css 文件存储在哪里——它们似乎被打包在 .egg 中文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T18:30:03.427

我将假设主题使用静态 HTML 文件（由 rules.xml 中的规则引用）来放置徽标，而不是通过使用规则来拉取 Plone 的标准徽标。在这种情况下，您只需编辑主题 HTML 文件（通常是 theme.html 或 index.html）和/或替换它引用的图像文件。

换句话说：如果您知道如何使用 HTML 和 CSS 来做到这一点，那么您就知道如何编辑主题。

附带说明：在 Plone 4.3 中，我们将附带一个内置的 Plone 主题编辑器，它应该使这变得更加容易。您将可以选择使用丰富的 HTML 编辑器制作新的、可在 Plone 中编辑的主题副本，您可以使用该编辑器轻松修改标记。

# java - java库代码在“正常”处理期间抛出和捕获大量异常是否正常？

> ID：12960350
> 
> 赞同：8
> 
> 时间：2012-10-18T17:28:14.617
> 
> 标签：java

作为一个实验，我决定在 Eclipse 调试器中启用以下断点：`Throwable [Include Subclasses]: caught and uncaught`. 然后我让我的代码（据我所知运行良好）在调试器下运行，当我的代码是据我所知，运行正常。

例如，这里只是我发现的一些引发异常的 Java 框架函数：`URLClassLoader.findClass`、`FileDirContext.lookup`和`WebappClassLoader.findClassInternal`.

这被认为是 Java 应用程序的正常行为吗？这是我应该研究的吗？据我所知，我的代码似乎运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:40:44.277

虽然以这种方式设计代码很糟糕（异常很慢，并且应该用于特殊情况），但 Bhesh Gurung 的评论是思考这个问题的正确方法。遵循你所依赖的代码规范，不要担心实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:45:26.947

类加载期间抛出的异常是 Java 历史早期的遗留物，当时类加载被设计为使用它们作为一种方式来传达某些类加载器无法找到类。它现在不被认为是一个好的模式，但它仍然存在并且可能永远不会改变，因为它是 API 的一部分。没什么好害怕的。

# azure - 从 Azure 1.6 升级到 1.7 的配置错误

> ID：12960361
> 
> 赞同：1
> 
> 时间：2012-10-18T17:29:05.520
> 
> 标签：azure

我正在尝试从 2010 和 1.6 迁移到 Visual Studio 2012 和 Azure 1.7。当我升级我的工作项目时，我现在遇到了一堆错误，例如：

> CloudServices58：无法加载名为“Antimalware”的导入模块。

这让我想到了 Microsoft.WindowsAzure.targets：

```
 <Target Name="PreValidateServiceModel">
    <ValidateServiceFiles
        AllowLegacyWebRoles="$(AllowLegacyWebRoles)"
        ServiceDefinitionFile="@(SourceServiceDefinition)"
        ServiceConfigurationFile="@(SourceServiceConfiguration)">
    </ValidateServiceFiles>
  </Target> 
```

在我的 cscfg 文件中出现这样的错误：

> 角色 MyProject.ProcessLogs 的设置“Microsoft.WindowsAzure.Plugins.Antimalware.ServiceLocation”在服务配置文件中指定，但未在服务定义文件中声明。

错误把我带到了这里：

```
<ConfigurationSettings>
  <...stuff.../>
  <Setting name="Microsoft.WindowsAzure.Plugins.Antimalware.ServiceLocation" value="" />
  <Setting name="Microsoft.WindowsAzure.Plugins.Antimalware.EnableAntimalware" value="" />
  <Setting name="Microsoft.WindowsAzure.Plugins.Antimalware.EnableRealtimeProtection" value="" />
  <Setting name="Microsoft.WindowsAzure.Plugins.Antimalware.EnableWeeklyScheduledScans" value="" />
  <Setting name="Microsoft.WindowsAzure.Plugins.Antimalware.DayForWeeklyScheduledScans" value="" />
  <Setting name="Microsoft.WindowsAzure.Plugins.Antimalware.TimeForWeeklyScheduledScans" value="" />
  <Setting name="Microsoft.WindowsAzure.Plugins.Antimalware.ExcludedExtensions" value="" />
  <Setting name="Microsoft.WindowsAzure.Plugins.Antimalware.ExcludedPaths" value="" />
  <Setting name="Microsoft.WindowsAzure.Plugins.Antimalware.ExcludedProcesses" value="" />
</ConfigurationSettings> 
```

我很迷茫，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:48:52.370

我只需要下载并安装这个：[http ://www.microsoft.com/en-us/download/details.aspx?id=29209](http://www.microsoft.com/en-us/download/details.aspx?id=29209)

# objective-c - 比较一个 NSString 的 NSArray 和另一个 NSString 的 NSArray

> ID：12960364
> 
> 赞同：3
> 
> 时间：2012-10-18T17:29:15.460
> 
> 标签：objective-c, cocoa, nsstring, nsarray

我有两个`NSArray`s，每个都包含`NSString`s。我需要测试两个数组是否相等。在这种情况下，相等并不意味着数组包含相同的对象，而是每个对象`isEqualToString`在比较其对应对象时返回 true。如果一个数组包含的项目多于另一个，或者项目的顺序不同，则数组也不相等。

我可以假设`isEqualToArray`不会在这里帮助我吗？

同样，我看不出有一种方法`NSSet`可以满足所有标准。

我如何测试这两个数组的相等性？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T17:34:54.197

状态的文档`isEqualToArray`：

> 如果两个数组都包含相同数量的对象并且每个数组中给定索引处的对象满足`isEqual:`测试，则它们具有相同的内容。

这似乎符合您的标准。

# opengl - 如何使用 OpenGL 将 2d 艺术分解为三角形

> ID：12960365
> 
> 赞同：5
> 
> 时间：2012-10-18T17:29:15.850
> 
> 标签：opengl, 2d, box2d, textures

我有将映射到 Box2d 骨架的 2d 角色艺术。例如，角色的手臂可能是 2 个物理矩形，在肘部处有一个关节连接。每个矩形都有自己对应的艺术精灵。下臂的艺术不会完全是矩形的。它可能是一个矩形 png 源，但在不一定绘制手臂的地方会有很多负空间。

我的问题是将二维艺术分解成三角形的最佳方法是什么？我是否应该将所有平面精灵视为由 2 个三角形组成的简单矩形，留下大量 alpha 空间？还是最好将形状分解成多个三角形并尝试匹配实际形状（可能带有三角形扇形）？每种方法可能有哪些优点/缺点？随着角色发生各种事情，我将更新纹理。

这是我正在谈论的内容的说明：

[![图像](../Images/772780b397aefd7083c0c93a6d589cff.png)](https://i.imgur.com/voRqC.png)

（红色方块是物理形状，蓝色线条是可能的三角形配置）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:43:10.853

较少的几何图形通常对性能更好（左起第 3 个）。

“精确”三角测量（左起第四个）对于高保真碰撞检测（激光反射闪亮的小行星？）很有用。

小心频繁的纹理更新。 `glTexSubImage2d()`是要走的路。

如果您的 GL 实现支持它，您可以[使用 PBO](http://www.songho.ca/opengl/gl_pbo.html)进行异步上传。

# java - 用Java方法从网站读取和组织数据

> ID：12960368
> 
> 赞同：0
> 
> 时间：2012-10-18T17:29:23.947
> 
> 标签：java, html, url, multidimensional-array

我的项目是为我的大学建立一个时间表制作器，学生可以在其中选择课程，并为他们建议可能的时间表。

第一步 IMO 是从[这里](https://dalonline.dal.ca/PROD/fysktime.P_DisplaySchedule?s_term=201310&s_subj=MGMT&format=1)获取大学时间表中的数据 ，然后将重要项目（称为 CRN 的课程标识符号、标题、部分、时间、房间等）放入某种形式的多维数组中，然后我可以使用它来处理数据并建立时间表。

我的问题是这样的：

使用[文档中描述的方法](http://docs.oracle.com/javase/tutorial/networking/urls/readingURL.html)来获取数据，然后将其转储到像 {ID, CRN, TITLE, TIME-DAYS, TIME-HOURS, ROOM} 这样的数组中是一种继续进行的好方法，还是我让事情变得不必要地复杂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:10:37.147

您可能需要一个库来解析 HTML。我建议jsoup：http: [//jsoup.org/](http://jsoup.org/)

他们有一本食谱可以帮助您入门：http: [//jsoup.org/cookbook/](http://jsoup.org/cookbook/)

他们网站上的一个简单示例，它从维基百科读取数据：

```
Document doc = Jsoup.connect("http://en.wikipedia.org/").get();
Elements newsHeadlines = doc.select("#mp-itn b a"); 
```

# scala - 为 scalacheck 函数获取 2 个隐式

> ID：12960370
> 
> 赞同：0
> 
> 时间：2012-10-18T17:29:48.830
> 
> 标签：scala, generics, implicit, scalacheck

我正在使用 scalacheck，现在正处于通用编程汤的中间。官方指南显示了这个例子：

```
def matrix[T](g: Gen[T]): Gen[Seq[Seq[T]]] = Gen.sized { size =>
  val side = scala.math.sqrt(size).asInstanceOf[Int]
  Gen.listOfN(side, Gen.listOfN(side, g))
} 
```

同时，对于我的测试，我需要一个 Array[Array[T]] 类型的矩阵。我尝试了以下功能：

```
def matrix[T](g: Gen[T]): Gen[Array[Array[T]]] = Gen.sized { size =>
  val side = scala.math.sqrt(size).asInstanceOf[Int]
  val g1 = Gen.containerOfN[Array, T](side, g)
  Gen.containerOfN[Array, Array[T]](side, g1)
} 
```

在这里，我遇到了麻烦。编译器说：

> 此行有多个标记 - 方法 containerOfN 的参数不足：（隐式 b：org.scalacheck.util.Buildable[T,Array]）org.scalacheck.Gen[Array[T]]。未指定值参数 b. - 找不到参数 b 的隐式值：org.scalacheck.util.Buildable[T,Array] - 找不到参数 b 的隐式值：org.scalacheck.util.Buildable[T,Array] - 方法的参数不足containerOfN: (隐式 b: org.scalacheck.util.Buildable[T,Array])org.scalacheck.Gen[Array[T]]。未指定值参数 b.

我知道这样的事情通常可以通过向函数添加隐式参数来解决，但是，我还没有完成这项工作。

我在构建泛型数组时通常会遇到这个错误，例如：

```
 def build[T](n:Int)(implicit m:ClassManifest[T]) = Array.ofDim[T](n) 
```

但是，恐怕我不完全了解正在发生的事情或为什么需要这样做。

有人可以解释**如何制作正确的矩阵函数**以及scalacheck**中的使用示例吗？**非常欢迎对有关使用隐式类清单构建序列的详细信息进行全面解释！

**编辑**

```
 import org.scalacheck.util.Buildable._
  def matrix[T](g: Gen[T])(implicit b: Buildable[T, Array]): Gen[Array[Array[T]]] = Gen.sized { size =>

    val side = scala.math.sqrt(size).asInstanceOf[Int]
    val g1 = Gen.containerOfN[Array, T](side, g)
    Gen.containerOfN[Array, Array[T]](side, g1)
  } 
```

还是不行。Buildable[Array[T],Array] 需要隐式...不知道如何得到这个，因为我只能添加 1 个隐式参数：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:43:42.903

您快到了。错误的重要部分是`could not find implicit value for parameter b: org.scalacheck.util.Buildable[T,Array]`

查看方法定义`containerOfN`

```
 def containerOfN[C[_],T](n: Int, g: Gen[T])(implicit b: Buildable[T,C]): Gen[C[T]] = ... 
```

所以，这是你缺少的论点。你需要一个类型为隐式的参数`Buildable[T,Array]`。一直到`Buildable`scalacheck 源代码中定义的 where ，我发现有一个对象 ( `org.scalacheck.util.Buildable`) 提供了`Buildable`为包括`Array`. 因此，您需要将其纳入范围。你可以这样做：

```
 import org.scalacheck.util.Buildable._
  def matrix[T](g: Gen[T]): Gen[Array[Array[T]]] = Gen.sized { size =>
    val bT = implicitly[Buildable[T, Array]]
    val bArrayT = implicitly[Buildable[Array[T], Array]]

    val side = scala.math.sqrt(size).asInstanceOf[Int]
    val g1 = Gen.containerOfN[Array, T](side, g)
    Gen.containerOfN[Array, Array[T]](side, g1)
  } 
```

或者

```
 import org.scalacheck.util.Buildable._
  def matrix[T](g: Gen[T])(implicit bT: Buildable[T, Array], bArrayT: Buildable[Array[T], Array]): Gen[Array[Array[T]]] = Gen.sized { size =>
    ...
  } 
```

您需要的特定隐含`org.scalacheck.util.Buildable`是：

```
implicit def buildableArray[T](implicit cm: ClassManifest[T]) = 
  new Buildable[T,Array] {
    def builder = mutable.ArrayBuilder.make[T]
  } 
```

# haskell - 类型族实例证明可能吗？

> ID：12960374
> 
> 赞同：7
> 
> 时间：2012-10-18T17:30:27.557
> 
> 标签：haskell, type-families, type-level-computation

首先，我从一些典型的类型级自然数开始。

```
{-# LANGUAGE KindSignatures #-}
{-# LANGUAGE DataKinds #-}
{-# LANGUAGE GADTs #-}
{-# LANGUAGE TypeFamilies #-}

data Nat = Z | S Nat

type family Plus (n :: Nat) (m :: Nat) :: Nat
type instance Plus Z m = m
type instance Plus (S n) m = S (Plus n m) 
```

所以我想创建一个表示 n 维网格的数据类型。（在[评估元胞自动机中发现的内容的概括是 comonadic](http://blog.sigfpe.com/2006/12/evaluating-cellular-automata-is.html)。）

```
data U (n :: Nat) x where
  Point     :: x                           -> U Z     x
  Dimension :: [U n x] -> U n x -> [U n x] -> U (S n) x 
```

这个想法是类型`U num x`是 s 的一`num`维网格的类型`x`，它“聚焦”在网格中的特定点上。

所以我想把它做成一个comonad，我注意到我可以做这个潜在有用的功能：

```
ufold :: (x -> U m r) -> U n x -> U (Plus n m) r
ufold f (Point x) = f x
ufold f (Dimension ls mid rs) =
  Dimension (map (ufold f) ls) (ufold f mid) (map (ufold f) rs) 
```

就这个组合器而言，我们现在可以实现一个“维度连接”，将 m 维网格的 n 维网格转换为 (n+m) 维网格。`cojoin`这在处理将产生网格的结果时会派上用场。

```
dimJoin :: U n (U m x) -> U (Plus n m) x
dimJoin = ufold id 
```

到目前为止，一切都很好。我还注意到该`Functor`实例可以用`ufold`.

```
instance Functor (U n) where
  fmap f = ufold (\x -> Point (f x)) 
```

但是，这会导致类型错误。

```
Couldn't match type `n' with `Plus n 'Z' 
```

但是如果我们制作一些复制意大利面，那么类型错误就会消失。

```
instance Functor (U n) where
  fmap f (Point x) = Point (f x)
  fmap f (Dimension ls mid rs) =
    Dimension (map (fmap f) ls) (fmap f mid) (map (fmap f) rs) 
```

好吧，我讨厌复制意大利面的味道，所以我的问题是这个。**我怎样才能告诉类型系统`Plus n Z`等于`n`**？问题是：您不能对会导致`dimJoin`产生类似类型错误的类型族实例进行更改。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T00:29:08.267

你需要的是一个很好的命题相等类型：

```
{-# LANGUAGE KindSignatures #-}
{-# LANGUAGE DataKinds #-}
{-# LANGUAGE PolyKinds #-}
{-# LANGUAGE GADTs #-}
{-# LANGUAGE TypeFamilies #-}
{-# LANGUAGE TypeOperators #-}

data Nat = Z | S Nat

type family Plus (n :: Nat) (m :: Nat) :: Nat
type instance Plus Z m = m
type instance Plus (S n) m = S (Plus n m)

data (:=) :: k -> k -> * where
  Refl :: a := a

data Natural (n :: Nat) where
  Zero :: Natural Z
  Suc  :: Natural n -> Natural (S n)

plusZero :: Natural n -> n := (n `Plus` Z)
plusZero Zero = Refl
plusZero (Suc n) | Refl <- plusZero n = Refl 
```

这允许您证明关于您的类型的任意事情，并通过在`Refl`.

一件烦人的事情是，我的`plusZero`证明需要对所讨论的自然进行归纳，默认情况下您将无法做到这一点（因为它在运行时不存在）。不过，用于生成`Natural`见证的类型类会很容易。

对于您的特定情况，另一种选择可能只是在您的类型定义中将参数反转为 plus，以便您`Z`在左侧获得它并自动减少。确保您的类型尽可能简单通常是一个很好的第一步，但是无论如何，对于更复杂的事情，您通常需要命题相等性。

# python - 创建 3D 验证码

> ID：12960377
> 
> 赞同：4
> 
> 时间：2012-10-18T17:30:48.423
> 
> 标签：python, captcha

> **可能重复：**
> [生成 3D 验证码 [图片]](https://stackoverflow.com/questions/1021721/generating-a-3d-captcha-pic)

谁能推荐一些免费的 C++/Python 库，我可以利用它来创建 3D 验证码？

也许类似于

[![](../Images/9b4980cbb7d585abe1249d0081e5fbe0.png)](https://i.stack.imgur.com/J8mJO.jpg)
[（来源：[fontforge.org](http://fontforge.org/fontforge-banner-420.jpeg)）]

# c# - 如何获取 Websphere MQ 连接状态以及如何重置连接：

> ID：12960379
> 
> 赞同：8
> 
> 时间：2012-10-18T17:30:56.677
> 
> 标签：c#, .net, websphere, ibm-mq, mq

1.）从.net客户端，我如何测试客户端是否连接到服务器（即可以发送和接收）是的，我可以在try块内发送消息并捕获随后的异常，但我希望一个更优雅的解决方案。

2) 如何打开、关闭和重新打开连接？在我尝试解决上面的问题 1 时，我发现如果我打开一个连接然后调用 connection.Close() 我无法从连接工厂获得另一个连接（参见下面的代码片段）。我收到错误消息 XMSCC0008

我正在使用一个非常标准的 vanilla MQ 配置。这是我的客户端的连接方式：

```
ISession session = MQAccess.GetSession(MQAccess.Connection);
IDestination destination = session.CreateTopic(SubTopicName);
Consumer = MQAccess.GetConsumer(session, destination);
Consumer.MessageListener = new MessageListener(HandleMQSubEvent);
MQAccess.Connection.Start(); 
```

其中 MQAccess 是一个小型实用程序类。

编辑问题以添加 MQAccess 代码：

```
public static class MQAccess
{
    public static readonly MQConfigurationSectionHandler ConfigSettings;
    public static readonly IConnectionFactory ConnectionFactory;

    private static readonly IConnection connection;
    public static IConnection Connection
    {
        get { return connection; }
    }

    static MQAccess()
    {
        ConfigSettings = (MQConfigurationSectionHandler)
            ConfigurationManager.GetSection("mq-configuration");

        XMSFactoryFactory factory = XMSFactoryFactory.GetInstance(XMSC.CT_WMQ);
        ConnectionFactory = factory.CreateConnectionFactory();
        ConnectionFactory.SetStringProperty(XMSC.WMQ_HOST_NAME, ConfigSettings.Hostname);
        ConnectionFactory.SetIntProperty(XMSC.WMQ_PORT, ConfigSettings.Port);
        ConnectionFactory.SetStringProperty(XMSC.WMQ_CHANNEL, ConfigSettings.Channel);

        if (ConfigSettings.QueueManager == string.Empty)
        {
            ConnectionFactory.SetStringProperty(XMSC.WMQ_QUEUE_MANAGER, "");
        }
        else
        {
            ConnectionFactory.SetStringProperty(XMSC.WMQ_QUEUE_MANAGER, ConfigSettings.QueueManager);
        }

        connection = GetConnection();
    }

    public static IConnection GetConnection()
    {
        return ConnectionFactory.CreateConnection();
    }

    public static ISession GetSession(IConnection connection)
    {
        return connection.CreateSession(false, AcknowledgeMode.AutoAcknowledge);
    }

    public static IMessageProducer GetProducer(ISession session, IDestination destination)
    {
        return session.CreateProducer(destination);
    }

    public static IMessageConsumer GetConsumer(ISession session, IDestination destination)
    {
        return session.CreateConsumer(destination);
    }

    public static void MQPub(string TopicURI, string message)
    {
        using (var session = GetSession(Connection))
        {
            using (var destination = session.CreateTopic(TopicURI))
            {
                using (var producer = GetProducer(session, destination))
                {
                    producer.Send(session.CreateTextMessage(message));
                }
            }
        }
    }

    public static void MQPub(string TopicURI, IEnumerable<string> messages)
    {
        using (var session = GetSession(Connection))
        {
            using (var destination = session.CreateTopic(TopicURI))
            {
                using (var producer = GetProducer(session, destination))
                {
                    foreach (var message in messages)
                    {
                        producer.Send(session.CreateTextMessage(message));
                    }
                }
            }
        }
    }
} 
```

编辑：将 MQAccess 类重命名为 MQClient。根据 T Rob 的建议将其设为实例类。断开连接方法仍然崩溃并出现上面列出的错误消息

```
public class MQClient : IDisposable
{
    public MQConfigurationSectionHandler ConfigSettings { get; private set; }
    public IConnectionFactory ConnectionFactory { get; private set; }

    public IConnection Connection { get; private set;  }

    public IMessageConsumer Consumer { get; private set; }
    public IMessageProducer Producer { get; private set; }
    // Save sessions as fields for disposing and future subscription functionality
    private ISession ProducerSession;
    private ISession ConsumerSession;
    public string SubTopicName { get; private set; }
    public string PubTopicName { get; private set; }
    public bool IsConnected { get; private set; }
    public event Action<Exception> ConnectionError;
    private Action<IMessage> IncomingMessageHandler;

    public MQClient(string subTopicName, string pubTopicName, Action<IMessage> incomingMessageHandler)
    {
        // Dont put connect logic in the constructor.  If we lose the connection we may need to connect again.
        SubTopicName = subTopicName;
        PubTopicName = pubTopicName;
        IncomingMessageHandler = incomingMessageHandler;
    }

    public string Connect()
    {
        IsConnected = false;
        string errorMsg = string.Empty;

        ConfigSettings = (MQConfigurationSectionHandler)
                ConfigurationManager.GetSection("mq-configuration");

        XMSFactoryFactory factory = XMSFactoryFactory.GetInstance(XMSC.CT_WMQ);
        ConnectionFactory = factory.CreateConnectionFactory();
        ConnectionFactory.SetStringProperty(XMSC.WMQ_HOST_NAME, ConfigSettings.Hostname);
        ConnectionFactory.SetIntProperty(XMSC.WMQ_PORT, ConfigSettings.Port);
        ConnectionFactory.SetStringProperty(XMSC.WMQ_CHANNEL, ConfigSettings.Channel);

        if (ConfigSettings.QueueManager == string.Empty)
            ConnectionFactory.SetStringProperty(XMSC.WMQ_QUEUE_MANAGER, "");
        else
            ConnectionFactory.SetStringProperty(XMSC.WMQ_QUEUE_MANAGER, ConfigSettings.QueueManager);

        Connection = ConnectionFactory.CreateConnection();

        if (!string.IsNullOrEmpty(PubTopicName))
        {
            ProducerSession = Connection.CreateSession(false, AcknowledgeMode.AutoAcknowledge);
            Producer = ProducerSession.CreateProducer(ProducerSession.CreateTopic(PubTopicName));
        }

        if (!string.IsNullOrEmpty(SubTopicName) && IncomingMessageHandler != null)
        {
            ConsumerSession = Connection.CreateSession(false, AcknowledgeMode.AutoAcknowledge);
            Consumer = ConsumerSession.CreateConsumer(ConsumerSession.CreateTopic(SubTopicName));
            Consumer.MessageListener = new MessageListener(IncomingMessageHandler);
        }

        try
        {
            Connection.Start();
            Connection.ExceptionListener = new ExceptionListener(ConnectionExceptionHandler);
            IsConnected = true;
        }
        catch (TypeInitializationException ex)
        {
            errorMsg = "A TypeInitializationException error occured while attempting to connect to MQ.  Check the Queue configuration in App.config. The error message is: " + ex.Message; 
        }
        catch (IllegalStateException ex)
        {
            errorMsg = "An IllegalStateException error occured while attempting to connect to MQ.  Check the Queue configuration in App.config. The error message is: " + ex.Message; 
        }

        return errorMsg;
    }

    public void Disconnect()
    {
        if (Producer != null)
        {
            Producer.Close();
            Producer.Dispose();
            Producer = null;
        }

        if (ProducerSession != null)
        {
            // Call Unsubscribe here if subscription is durable

            ProducerSession.Close();
            ProducerSession.Dispose();
            ProducerSession = null;
        }

        if (Connection != null)
        {
            Connection.Stop();

            //if (Connection.ExceptionListener != null)
            //    Connection.ExceptionListener = null;

            // Per Shashi............
            //if (Consumer.MessageListener != null)
            //    Consumer.MessageListener = null;

            Connection.Close();
            Connection.Dispose();
            Connection = null;
        }

        if (Consumer != null)
        {

            if (Consumer.MessageListener != null)
                Consumer.MessageListener = null;

            Consumer.Close();
            Consumer.Dispose();
            Consumer = null;
        }

        if (ConsumerSession != null)
        {
            // Call Unsubscribe here if subscription is durable
            ConsumerSession.Close();
            ConsumerSession.Dispose();
            ConsumerSession = null;
        }

        IsConnected = false;
    }

    public void Publish(string message)
    {
        Producer.Send(ProducerSession.CreateTextMessage(message));
    }

    public void Publish(string[] messages)
    {
        foreach (string msg in messages)
            Publish(msg);
    }

    public void ConnectionExceptionHandler(Exception ex)
    {
        Disconnect(); // Clean up

        if (ConnectionError != null)
            ConnectionError(ex);
    }

    #region IDisposable Members
    private bool disposed;

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    protected virtual void Dispose(bool disposing)
    {
        if (!this.disposed)
        {
            if (disposing)
                Disconnect();

            disposed = true;
        }
    }
    #endregion

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T02:50:56.483

问题在这里-->`where MQAccess is a small utility class.`

问题的第一部分询问如何判断连接是否处于活动状态。WebSphere MQ 的 XMS 类是针对非 Java 平台的 JMS 规范的实现。它们非常严格地遵循 JMS 规范，并且 JMS 规范没有与连接或会话等效的方法，`isConnected`因此 XMS 也没有。但是，所有 GET 和 PUT 活动都应该发生在 try/catch 块中，以便捕获 JMS 异常。*（您总是*从中打印`linkedException`，对吗？）当抛出 JMS 异常时，应用程序要么将其视为致命并终止，要么关闭除连接工厂之外的所有 JMS 对象，等待几秒钟，然后重新驱动连接顺序。

**根据问题中的新信息进行更新：**
感谢您发布 MQAccess 类。这为正在发生的事情提供了相当多的洞察力，尽管仍然没有任何代码显示根据问题的第 2 部分关闭和重新打开连接的位置。

但是，代码显示该类在构造类实例`MQAccess`时创建了一个私有实例，`ICONNECTION connection`然后将其公开公开为`MQAccess.GetConnection`. 当前发布的`MQAccess`类没有公共或私有类方法可以替换所持有的连接句柄，`connection`因此如果`MQAccess.Connection.Close()`曾经调用过，类中`IConnection`的该对象实例`MQAccess`将永远持有无效的连接句柄。一旦连接关闭，该实例`MQAccess`实际上就死了。您必须删除并重新实例化`MQAccess`才能获得新连接。

该类`MQAccess`确实公开了连接工厂，因此理论上可以`MQAccess.GetConnection`从类外部调用并获得一个有效的新`IConnection`对象，即使在关闭原始对象之后也是如此。但是，该实例将存在于`MQAccess`类范围之外，因此任何后续调用都`MQAccess`将引用其失效的实例变量`connection`，而不是在类之外创建的新连接实例。

如果您需要关闭并重新创建连接，您可以考虑从`MQAccess`. 一种技术含量较低的方法可能是为`MQAccess.Close()`连接编写一个方法，该方法将关闭现有连接然后立即调用`connection = GetConnection();`，以便私有`connection`变量始终保持有效的连接句柄。

如果这不能解决问题，请发布关闭并重新创建连接的代码。

顺便说一句，网络连接上的非事务会话为任何 JMS 提供者（包括 WMQ）打开了丢失或重复消息的可能性。这是你的本意吗？[我已经解释了为什么这](https://stackoverflow.com/questions/4741713/relationship-between-jms-connections-sessions-and-producers-consumers/4748080#4748080)是在另一个 SO 帖子中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T04:27:33.273

添加到 T.Rob 的评论。

问题 1：
希望您能获得`MQAccess`. 如果是，您可以在其中公开一个属性`MQAccess`，指示连接是否处于活动状态。如果您没有访问权限，那么您可能必须要求该类的作者添加此属性。您可以执行以下操作来设置/重置属性。

*1） createConnection*方法返回成功后设置属性。
2）为连接设置一个异常监听器。
3) 重置异常处理程序中的属性。如果是连接断开错误（XMSWMQ1107 和链接的异常可能有 MQRC 2009），请检查原因代码并重置属性。

问题 2
如果您能向我们展示您的身份`closing`和`reopening`关系，将会有所帮助。我关闭连接的建议是：
1）首先做一个connection.Stop()。
2）删除任何消息侦听器，基本上是做一个consumer.MessageListener = null。
3）然后做connection.Close（）。
4）做一个连接=空

**附加信息** 这是我用来测试的样本。

```
 private void OnException(Exception ex)
    {
        XMSException xmsex = (XMSException)ex;
        Console.WriteLine("Got exception");
        // Check the error code.
        if (xmsex.ErrorCode == "XMSWMQ1107")
        {
            Console.WriteLine("This is a connection broken error");
            stopProcessing = true; // This is a class member variable
        }
    } 
```

在创建连接的方法中，设置异常侦听器。

```
 // Create connection.
        connectionWMQ = cf.CreateConnection();
        connectionWMQ.ExceptionListener = new ExceptionListener(OnException); 
```

每当出现连接错误时，将调用异常侦听器并将 flag 设置为 true。

在不再需要对象时将其丢弃是一种很好的做法。有父子关系，消费者，生产者等是会话的孩子，而会话又是连接的孩子。因此，处置顺序可以是孩子优先，然后是父母。但是如果一个父母被处置，孩子也被自动处置。

# javascript - offsetLeft 值意外更改

> ID：12960381
> 
> 赞同：1
> 
> 时间：2012-10-18T17:31:22.040
> 
> 标签：javascript, dom, onload, offset, xpathnodeiterator

考虑以下代码段：

```
var iframe = document.createElement('iframe');
iframe.src = 'foobar.html';
document.body.appendChild(iframe);

iframe.onload = function () {
    var nodeIterator = iframe.contentDocument.createNodeIterator(
        iframe.contentDocument.body,
        NodeFilter.SHOW_ELEMENT,
        { acceptNode: function (node) {
            if (node.hasAttribute('id')) {
                return NodeFilter.FILTER_ACCEPT;
            } else {
                return NodeFilter.FILTER_SKIP;
            }
        }}, false),
    currentNode, someArray = [];

    while (currentNode = nodeIterator.nextNode()) {
        // Calculate offsetLeft
        someArray.push({
            id: currentNode.id,
            left: (function () {
                var a = currentNode, b = 0;
                while (a) {
                    b += a.offsetLeft;
                    a = a.offsetParent;
                }
                return b;
            }())
        });

        // On element click, log offsetLeft after calculating again
        currentNode.onclick = function (e) {
            e.stopPropagation();
            var a = this, b = 0;
            while (a) {
                b += a.offsetLeft;
                a = a.offsetParent;
            }
            console.log(b);
        };
    }
}; 
```

我遇到的问题是：对于某些元素，`offsetLeft`第二次计算时的计算不同。使用谷歌浏览器的检查器，我可以看到第二次计算`offsetLeft`总是准确的。

在节点迭代期间完成的`offsetLeft`计算对于某些元素是错误的，但始终如一（在页面刷新期间该值始终相同）。

我想知道是否有人对为什么会这样有任何见解。我一直在想，它`iframe.onload`实际上是在其元素`contentDocument`完全加载完成之前触发的，导致某些元素最初向左或向右更远。

# java - 在eclipse外运行jboss

> ID：12960390
> 
> 赞同：1
> 
> 时间：2012-10-18T17:32:10.717
> 
> 标签：java, eclipse, jboss

如何在 Eclipse 之外运行 JBOSS 5.x？我正在使用 Eclipse Juno 最新版本。自动化测试的要求之一是在外部运行 JBoss。有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:45:45.553

*   当你解压 jboss 时，你会发现一个名为 bin 的子文件夹，你应该在里面运行 run.bat :-)。
*   从 Eclipse 使用 ant 脚本创建一个战争并将其复制到 jboss 部署目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:40:08.673

下载 JBoss，安装并运行它。我不明白这个问题。 [http://www.jboss.org/jbossas](http://www.jboss.org/jbossas)

还是您的意思是众多子项目之一？

# vb.net - 一行代码会在执行下一行代码之前完成吗？

> ID：12960391
> 
> 赞同：0
> 
> 时间：2012-10-18T17:32:15.807
> 
> 标签：vb.net, visual-studio-2010

只要文件不存在，以下代码就会移动文件。如果是这样，它不会移动文件。

我的问题是关于`File.Move`. msgbox 什么时候显示？它会在文件完全移动后显示还是`File.Move`在行执行后立即显示。

根据文件大小，移动文件可能需要一段时间，因此我不希望在文件完全移动之前显示 msgbox。

有没有更好的方法来做到这一点？

```
 For Each foundFile As String In My.Computer.FileSystem.GetFiles("C:\Temp\", FileIO.SearchOption.SearchAllSubDirectories, "*.zip")
            Dim foundFileInfo As New System.IO.FileInfo(foundFile)

            If My.Computer.FileSystem.FileExists("C:\Transfer\" & foundFileInfo.Name) Then
                Msgbox("File already exists and will not moved!")
                Exit Sub
            Else
                File.Move(foundFile, "C:\Transfer\" & foundFileInfo.Name)
                Msgbox("File has been moved!")
            End If
        Next 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T17:35:52.723

根据[这个来源](http://msdn.microsoft.com/en-us/library/cc148994.aspx)，`File.Move`调用是同步的，这意味着您的 msgbox 将仅在文件移动后显示，而不管其大小。

为了完整起见，如果您不想阻止 UI，可以尝试以下操作：

```
' This must be placed outside your sub/function
Delegate Sub MoveDelegate(iSrc As String, iDest As String)

' This line and the following go inside your sub/function
Dim f As MoveDelegate = AddressOf File.Move

' Call File.Move asynchronously
f.BeginInvoke(
    foundFile, 
    "C:\Transfer\" & foundFile, 
    New AsyncCallback(Sub(r As IAsyncResult)
                          ' this code is executed when the move is complete
                          MsgBox("File has been moved!")
                      End Sub), Nothing) 
```

或者您可以探索新的[async / await](http://weblogs.asp.net/gunnarpeipman/archive/2010/10/30/what-is-visual-studio-async.aspx)指令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T17:35:58.190

File.Move 是一个同步操作，因此应用程序在移动完成之前不会执行下一行代码（您的消息框）。

正如您所指出的，如果文件很大（并且您正在跨驱动器移动），则在文件移动完成之前不会显示消息框。这可能会造成糟糕的用户体验，因为您的 GUI 在此期间似乎没有响应。

我建议花时间学习如何利用后台线程或 async/await 调用在后台执行操作。

MSDN上有一篇关于异步IO的好文章：http: [//msdn.microsoft.com/en-us/library/kztecsys.aspx](http://msdn.microsoft.com/en-us/library/kztecsys.aspx)

最后，您还可以使用 FileSystem 对象的[MoveFile](http://msdn.microsoft.com/en-us/library/fh3171xd%28v=vs.80%29.aspx)方法，如果您只是担心保持 UI 响应，它可以为您弹出文件移动 UI：

```
FileSystem.MoveFile(sourceFileName, destinationFileName, UIOption.AllDialogs) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T17:34:50.847

不幸的是，代码是逐行执行的，因此`Msgbox`只要文件已完全移动，就会弹出。

如果您想监控进度，[请访问此链接了解更多详情](http://visualbasic.about.com/od/usingvbnet/qt/prgsbar.htm)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-18T17:35:56.193

文件完全移动后，无论文件大小如何，都会显示消息框。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T17:37:18.120

除非方法是异步的，否则一行代码总是会在继续执行下一行之前完成执行。

请注意，如果文件移动很慢，并且它阻止您的程序是一件坏事，那么您可以在后台线程中使用例如[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx).

# wordpress - 仅可访问 WordPress 网站上的 Feed URL

> ID：12960393
> 
> 赞同：0
> 
> 时间：2012-10-18T17:32:30.997
> 
> 标签：wordpress

我想知道是否可以编写一个插件，它什么都不显示，只让访问者访问提要 url。管理员也应该可以访问管理页面。

这个想法的背景是我编写了一个自定义提要生成器并在 WordPress 站点中实现了它。由于该站点仅用于提要，因此我想让该站点对公众不可见，但提要输出除外。

我知道有[维护模式](http://wordpress.org/extend/plugins/search.php?q=maintenance+mode)和[仅限会员](http://wordpress.org/extend/plugins/search.php?q=members%20only)插件。问题是维护模式禁止提要访问，而仅限会员模式禁止一般访问者。

所以我想知道是否有一种简单的方法可以做到这一点。我想避免编辑 mod_rewrite 因为我打算尽可能将其作为插件。如果不使用 mod_rewrite 不现实，我会尝试编辑 mod_rewrite。

感谢您的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:59:39.137

所以，基本上你不希望主题渲染？`/categories`,`/tags`等呢`/archives`？

如果这就是您想要做的，您可以使用 style.css（除了主题信息注释块之外的空白）和 index.php 模板创建一个空白主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T10:33:09.290

如果您不想渲染任何内容，可以使用 template_redirect 挂钩轻松解决此问题。例如：

```
function stop_rendering() {
    exit;
}
add_action( 'template_redirect', 'stop_rendering'); 
```

# jpa - 创建实体并返回 ID

> ID：12960396
> 
> 赞同：0
> 
> 时间：2012-10-18T17:32:44.387
> 
> 标签：jpa, db2, jpa-2.0, auto-generate

使用 Open JPA 2.0，数据库为 DB2 9.7。我想创建一个实体，其中包括作为主键的 ID 和自动生成的身份列，在创建实体后我需要显示生成的 ID。为此，在持久化实体之后，我调用了 entity.getId()。在数据库中，我看到下面的查询正在执行

```
select ID from final table
     (INSERT INTO WEB.USER (NAME, LOCATION) VALUES (?, ?)) 
```

是否有任何替代/更好的方法来创建实体并返回生成的 ID？我想避免`"Select ID from final table"`，因为这预计会对性能产生影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:37:31.717

这就是您从 DB2 检索自动生成的 ID 的方式，对此您无能为力。其他数据库通常需要额外的 SQL 查询，因此使用 DB2 实际上更好，它会立即返回 ID。我认为没有更快的方法可以做到这一点。

查看[`OPENJPA-736`](https://issues.apache.org/jira/browse/OPENJPA-736)此优化的实施位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T19:19:34.643

我正在使用数据库序列 ( `@SequenceGenerator`) 来避免“从最终表中选择 ID”。这工作得很好，`@TableGenerator`也可以解决这个问题。

# regex - 仅查询整数 Rails 2.3

> ID：12960397
> 
> 赞同：0
> 
> 时间：2012-10-18T17:32:45.333
> 
> 标签：regex, postgresql, ruby-on-rails-2

我的环境是`Ruby 1.8.7-p358 with Rails 2.3.11`。我正在尝试查询所有`accounts`仅`first_name`包含数字的内容（它们都是 3 位整数，即 001、143、815 等）。我一直在尝试使用这个查询：

```
Account.find(:all, :conditions => ["first_name LIKE ?", "[^0-9][^0-9][^0-9]"]) 
```

我得到的回报是`=> []`。

如果我只使用相同的查询，`NOT LIKE`我会得到 all `accounts`，包括`first_name`整数。

我也尝试过使用：

```
Account.find(:all, :conditions => ["first_name REGEXP ?", "[^0-9][^0-9][^0-9]"]) 
```

但这只会给我：

```
ActiveRecord::StatementInvalid: PGError: ERROR:  syntax error at or near "REGEXP"
LINE 1: SELECT * FROM "accounts" WHERE (first_name REGEXP '[0-9][0-9...
                                               ^

: SELECT * FROM "accounts" WHERE (first_name REGEXP '[0-9][0-9][0-9]')  ORDER BY first_name ASC
  from /Users/kyle/.rvm/gems/ruby-1.8.7-p358@popcorn_recruiter_portal/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract_adapter.rb:227:in `log'
  from /Users/kyle/.rvm/gems/ruby-1.8.7-p358@popcorn_recruiter_portal/gems/activerecord-2.3.11/lib/active_record/connection_adapters/postgresql_adapter.rb:520:in `execute'
  from /Users/kyle/.rvm/gems/ruby-1.8.7-p358@popcorn_recruiter_portal/gems/activerecord-2.3.11/lib/active_record/connection_adapters/postgresql_adapter.rb:1002:in `select_raw'
  from /Users/kyle/.rvm/gems/ruby-1.8.7-p358@popcorn_recruiter_portal/gems/activerecord-2.3.11/lib/active_record/connection_adapters/postgresql_adapter.rb:989:in `select'
  from /Users/kyle/.rvm/gems/ruby-1.8.7-p358@popcorn_recruiter_portal/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract/database_statements.rb:7:in `select_all_without_query_cache'
      from /Users/kyle/.rvm/gems/ruby-1.8.7-p358@popcorn_recruiter_portal/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract/query_cache.rb:62:in `select_all'
  from /Users/kyle/.rvm/gems/ruby-1.8.7-p358@popcorn_recruiter_portal/gems/activerecord-2.3.11/lib/active_record/base.rb:665:in `find_by_sql'
  from /Users/kyle/.rvm/gems/ruby-1.8.7-p358@popcorn_recruiter_portal/gems/activerecord-2.3.11/lib/active_record/base.rb:1582:in `find_every'
  from /Users/kyle/.rvm/gems/ruby-1.8.7-p358@popcorn_recruiter_portal/gems/activerecord-2.3.11/lib/active_record/base.rb:619:in `find'
  from (irb):189
  from :0 
```

不允许使用正则表达式吗？我怎样才能找到每个等于三位数的整数`account`？`first_name`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:43:14.647

`like`运算符不计算正则表达式。相反，您可以同时使用`similar to`：

```
select '980' similar to '[0-9][0-9][0-9]';
 ?column? 
----------
 t 
```

或者`~`：

```
select '980' ~ '[0-9][0-9][0-9]';
 ?column? 
----------
 t
(1 row) 
```

# haskell - ghci：模块重新加载后将定义的值保留在范围内

> ID：12960405
> 
> 赞同：8
> 
> 时间：2012-10-18T17:33:21.787
> 
> 标签：haskell, ghci

我想知道重新加载模块时是否可以在 ghci 中保留分配的值？

例如，我在 ghci 中赋值：

```
ghci> let x = 1 
```

或者

```
ghci> x <- getLine 
```

进入`:r`重新加载现有模块后`x`不再在范围内。通常是否可以保持分配可用，例如在 Python 解释器中？（这个真的很方便……）

即使实际上 ghci 中的每一行都代表一个（单子）*绑定*到下一个函数的函数，我仍然想知道是否可以保持该状态。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T18:27:19.323

I'm not aware of any way of doing this.

The trouble is that you could have some variable bound to a value of a certain type, edit the source to remove that type, and hit reload. Now you have a variable of a type that no longer exists.

Still, you would think it shouldn't be too hard to detect that, and discard just the variables that don't make sense any more. (The really fun part is presumably when a type still exists but has a different number of fields now, or something like that...)

# javascript - 为什么 Chrome 会阻止我在我的网站上尝试刷卡？

> ID：12960410
> 
> 赞同：1
> 
> 时间：2012-10-18T17:33:58.750
> 
> 标签：javascript, jquery, ipad, google-chrome, swipe

我正在开发一个针对 iPad 2 的移动网站，可以在[这里](http://sandbox.xylot.net/concept1/)看到。

当您滑动红色背景时，它会在右侧显示蓝色背景，但由于未选择任何内容而重置。要选择内容，必须： (a) 将鼠标左键按住在侧边栏图标之一（A 到 E）上，然后向左拖动超过 72 像素（任何更少，它将重置，因为它可能已经意外滑动）；或 (b) 只需单击（或点击）侧边栏图标。

问题是，虽然 (b) 工作得很好，但 (a) 却不行。在 Chrome 中经过一小段距离（可能等于最小滑动距离设置）后，它显示“不允许”光标，并且释放鼠标左键后未注册“mouseup”事件。您可以自己在 Chrome 中测试上面的链接。

任何人都可以确定为什么会这样吗？相关的 JavaScript 可以在[这里](http://sandbox.xylot.net/concept1/js/main.js)看到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:42:27.647

当您`<a href="...">`在 Chrome 上拖动链接 ( ) 时，需要一段时间（即鼠标必须移动一定距离）才能开始拖动。拖动开始后，您可以将 URL 拖动到其他位置（例如，拖动到选项卡条以在新选项卡中打开它），但它会阻止您通过脚本自己使用拖动功能。

解决方案是添加`draggable="false"`以便 Chrome 不会表现出这种本机拖动行为：

```
<a href="..." draggable="false">...</a> 
```

# php - 什么是crossdomain.xml？

> ID：12960411
> 
> 赞同：0
> 
> 时间：2012-10-18T17:34:00.170
> 
> 标签：php, cakephp, logging, crossdomain.xml

我最近用`CakePHP`. 今天，当我查看日志时，我发现了这一行：

```
Error: [MissingControllerException] Controller class Crossdomain.xmlController could not be found. 
```

这意味着找不到此页面：

```
http://www.mywebsite.com/crossdomain.xml 
```

那个 XML 文件是什么？及其用法？我的网站上没有指向此文件的链接，因此用户不应访问此页面..（另外，我的页面上没有任何 SWF 媒体）

**注意**：我在子域上运行我的网站。

谢谢。

# html - 容器内的 div 宽度大于容器宽度

> ID：12960412
> 
> 赞同：0
> 
> 时间：2012-10-18T17:34:21.417
> 
> 标签：html, css

我们希望页面上的顶部栏与浏览器的宽度一样宽。问题是，它位于容器 div 内。如果你把它从容器中拉出来，我们可以将 div 扩展到 body 宽度，但是当它在容器内时，它只能扩展到容器的宽度。

有没有一种解决方案可以让我们将顶栏扩展到容器 div 之外。

```
<div id="container">
     <div id="topBar">
         <p>The Paragraph</p>
     </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T17:39:36.323

您可以定位`#topBar`绝对值而不使其相对于其直接父级

```
html, body {
    height: 2000px;
}

#container {
    width: 50%;
    margin: auto;
    height: 200px;
    background: beige;
}

#topBar {
    position: absolute;
    left: 0;
    background: #ccc;
    width: 100%;
} 
```

[**演示**](http://jsfiddle.net/g2DrW/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:40:32.573

另一种可能性是使用 position:absolute 将其从文档流中删除。但是，您需要知道 topBar 的高度，并且必须通过在其余内容上强制设置上边距以使其低于 topBar 来进行补偿。

例如，您可以这样做：

```
#topBar {
    position:absolute; /* fixed might also work, here */
    top:0; left:0;
    width:100%;
    height:50px;
} 
```

但你还必须有：

```
#container {
    margin-top:50px; /* or more */
} 
```

但是，如果您需要制作 #container`position:absolute`或`position:relative`.

# multithreading - 在线程中设置标签会导致 IllegalStateException

> ID：12960414
> 
> 赞同：1
> 
> 时间：2012-10-18T17:34:32.057
> 
> 标签：multithreading, blackberry, java-me, illegalstateexception

我有一个像这样的线程：

```
 startButton.setChangeListener(new FieldChangeListener() {
        public void fieldChanged(Field arg0, int arg1) {

                    Thread thread = new Thread(){
                        public void run() {
                            uploadFile();
                        }
                    };
                    thread.start();
                }
            //});

    }); 
```

该`uploadFile`方法包含`label_up_result.setText(result);`导致`IllegalStateException`.

`label_up_result`定义如下：`final LabelField label_up_result=new LabelField("", LabelField.FIELD_LEFT);`

可能是什么问题？我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T17:40:22.310

问题可能是您正在尝试从工作线程更新 UI。有两种方法。您可以在事件锁上同步：

```
synchronized(UiApplication.getUiApplication().getEventLock())) {
    label_up_result.setText(result);
} 
```

或者您可以创建一个`Runnable`在 UI 线程上执行：

```
UiApplication.getUiApplication().invokeLater(new Runnable() {
    public void run() {
        label_up_result.setText(result);
    }
}); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-18T17:39:32.507

我不了解黑莓，但通常您需要在 ui-thread 中执行 ui-actions。`SwingUtilities.invokeLater`在 JavaSE 中提供该功能，[http://www.java2s.com/Code/Java/Swing-JFC/Swinginvokelater.htm](http://www.java2s.com/Code/Java/Swing-JFC/Swinginvokelater.htm)

# .net - .NET MVC4 DropDownListFor 使用外键行为异常

> ID：12960416
> 
> 赞同：2
> 
> 时间：2012-10-18T17:34:36.410
> 
> 标签：.net, drop-down-menu

首先，我是 .NET MVC 的新手，尽管我之前使用过一般的 MVC 理念。我正在使用 .NET MVC4 和 CodeFirst，使用实体框架。

我正在尝试向“创建”视图添加一个简单的下拉列表，以允许用户选择与另一个模型相关的外键。

以下是相关代码：

从视图（PropertyProgram/Create）：

```
<div class="editor-field">
    @Html.DropDownListFor(model => model.Program.ID, new SelectList(ViewBag.Programs, "Id","Name"));
    @Html.ValidationMessageFor(model => model.Program.ID);
</div> 
```

从控制器（PropertyProgramController）：

```
public ActionResult Create()
{
    ViewBag.Programs = db.Programs;
    return View();
} 
```

来自模型（PropertyProgram）：

```
public class PropertyProgram
{
    public int Id { get; set; }
    public virtual Program Program { get; set; }
} 
```

视图正常工作，下拉列表中显示了正确的数据，但由于某种原因，在发布后，在数据库的 Program 表中创建了一个新行，其中除 ID 之外的所有内容均为空字段。对于创建的 PropertyProgram 行，预期的行为是将下拉列表中选择的 Program ID 放入数据库的 Program_ID 列中。知道为什么这不符合预期吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:38:22.157

当然，在我写完这个问题十分钟后，我就知道答案了！所以显然在实体框架中，只有一个虚拟链接是不够的，你还必须有一个指向表的 ID。我只是将这行代码添加到 PropertyProgram 模型中：

```
public int ProgramId { get; set; } 
```

添加后，我创建了一个迁移，然后我将下拉代码更改为：

```
@Html.DropDownListFor(model => model.ProgramId, new SelectList(ViewBag.Programs, "Id", "Name")); 
```

在此之后，一切正常！我不是 100% 确定为什么要解决这个问题，但确实如此。如果有人愿意解释原因，我将不胜感激。

# python - Jinja2 html 按钮：在不同页面上捕获 POST

> ID：12960424
> 
> 赞同：2
> 
> 时间：2012-10-18T17:35:03.900
> 
> 标签：python, google-app-engine, jinja2, google-api-python-client

我有一个使用 Jinja2 模板提供其 html 页面的 GAE 应用程序。

现在在我的主要 python 文件中，我有一个类 mainhandler，它有一个 GET 和一个 POST 方法。这一切都适用于欢迎屏幕，那里有一个按钮可以做某事。单击按钮时，将调用调用第二个页面的 POST 方法。

我找不到任何关于如何在第二页 result.html 上捕获按钮事件的信息。并使其在主 python 文件中进行方法。

所以：“我如何使用 result.html 上的 errorMail 和 toCalendar 按钮？

这是我的主文件：

```
# -*- coding: utf8 -*- 

import webapp2
from apiclient.discovery import build
from oauth2client.appengine import OAuth2Decorator

from format import formatFile

import jinja2
import os

jinja_environment = jinja2.Environment(
    loader=jinja2.FileSystemLoader(os.path.dirname(__file__)))

decorator = OAuth2Decorator(secret)

class MainHandler(webapp2.RequestHandler):
    @decorator.oauth_required
    def get(self):
        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render())

    #processes the file and shows the results
    def post(self):
        # Get the authorized Http object created by the decorator.
        http = decorator.http()

        service = build('calendar', 'v3', http=http,
           developerKey='secret')

        # Make a list of calendars
        calendar_list = service.calendarList().list().execute()

        totalList = formatFile(self.request.get('file'))

        template_values = {"totalList": totalList, "calendar_list": calendar_list}

        template = jinja_environment.get_template('result.html')
        self.response.out.write(template.render(template_values))

app = webapp2.WSGIApplication([('/', MainHandler)],
                              debug=True) 
```

这是页面 index.html：

```
<!DOCTYPE html>

<html>
  <head><title></title></head>
  <body>
    <form method="post">
    <div><label>Select file:</label</div>
    <input type="file" name="file">
    <br>
    <input type="submit" name="upload" value="Upload">
    </form>
  </body>
</html> 
```

这是页面result.html：

```
<html>
    <head>

    </head> 
    <body>
        <h3>De volgende data staat klaar voor je agenda:</h3>
        <table border="1" cellpadding="3">
            <tr>
                <th>Dag</th>
                <th>Datum</th>
                <th>Tijd</th>
                <th>Omschrijving</th>
            </tr>
                 {% for line in totalList %}
                <tr>
                    {% for item in line %}
                    <td>{{ item }}</td>
                    {% endfor %}
            </tr>        
            {% endfor %}
        </table>

        <br>
        <b>Selecteer de agende waar de diensten in geplaatst worden:</b>
        <br>
        <select>
            {% for calendar_list_entry in calendar_list['items'] %}
            <option value=>{{ calendar_list_entry['summary'] }}</option>
            {% endfor %}
        </select>
        <br>

        <form method="post">
            <input type="submit" name="toCalendar" value="In kalender plaatsen">
        </form>
        <br>
        <b>Uitvoer incorrect? Klik dan op onderstaande knop om foutmeldings-email te sturen.</b>
        <form method="post">
            <input type="submit" name="errorMail" value="Uitvoer incorrect!">
        </form>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:38:44.037

您不必接收按钮事件。您在帖子中收到表单数据（包括按钮），例如 self.request.get('file')

您可以在帖子中添加多个按钮。通过添加一个动作，每个表单都可以拥有自己的 post 处理程序：

index.html（结果发布到 /result1）：

```
<form action="/result1" method="post"> 
```

result.html（发布到 /result2 的结果）：

```
<form action="/result2" method="post">
    <input id="toCalender " type="submit" name="toCalendar" value="In kalender plaatsen">
    <br>
    <b>Uitvoer incorrect? Klik dan op onderstaande knop om foutmeldings-email te sturen.</b>
    <input id="errorMail" type="submit" name="errorMail" value="Uitvoer incorrect!">
</form> 
```

# iphone - 将垂直滚动手势传递给下面的 UITableView

> ID：12960427
> 
> 赞同：13
> 
> 时间：2012-10-18T17:35:06.927
> 
> 标签：iphone, objective-c, ios, uitableview, uigesturerecognizer

（为清楚起见进行了编辑）

我有一个 UITableView。最重要的是一个带有平移手势的 UIView。此 Pan 左右滑动以更改基础表。我使用平移手势的动作方法来移动表格。那工作正常。

但是，UIView 及其平移手势会干扰 UITableView 的上/下滚动。如何将向上/向下滚动发送到表格并保持左右视图区域？

```
 ---------------------------------------
 |                                     |
 |             ----------------------  |
 |             |                    |  |
 |             |                    |  |
 |             |                    |  |
 | UITableView |                    |  |
 |             |        UIView      |  |
 |             |          +         |  |
 |             |       PanGesture   |  |
 |             |                    |  |
 |             |                    |  |
 |             |                    |  |
 |             |                    |  |
 |             ----------------------  |
 |                                     |
 |                                     |
 --------------------------------------- 
```

Pan手势触发的方法是这样的

```
 -(void)move:(UIPanGestureRecognizer*)sender
 {
     CGPoint translatedPoint = [(UIPanGestureRecognizer*)sender translationInView:self.view];
     float xTest = fabsf(translatedPoint.x);
     float yTest = fabsf(translatedPoint.y);
     if ( xTest>yTest)
     {
         // Move table view left-right.. this works
     } else
     {
         // Send up-down scrolling gesture to table view????? How to?
     }
 } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T20:45:20.387

我刚刚解决了一个类似的问题，除了它是针对垂直平底锅而不是水平平底锅。我不能 100% 确定您的用例，所以这可能不是您想要的，但它可能会引导您朝着正确的方向前进。

我对 UIPanGestureRecognizer 进行了子类化，并实现了 touchesMoved 方法，并检查手势是否有较大的水平或垂直变化。下面是一个片段。信用属于不同的stackoverflow帖子，但我目前找不到链接。（第一次发帖，格式不好先见谅）

```
-(void)touchesMoved:(NSSet*) touches withEvent:(UIEvent *)event
{
[super touchesMoved:touches withEvent:event];
if(self.state == UIGestureRecognizerStateFailed) return;
CGPoint currentPoint = [[touches anyObject] locationInView:self.view];
CGPoint prevPoint = [[touches anyObject] previousLocationInView:self.view];
moveX += prevPoint.x - currentPoint.x;
moveY += prevPoint.y - currentPoint.y;
if(!drag) {
    if(abs(moveY) > abs(moveX))
        drag = YES;
    else
        self.state = UIGestureRecognizerStateFailed;
}
}

-(void)reset
{
[super reset];
drag = NO;
moveX = 0;
moveY = 0;
} 
```

在我的父视图控制器中，我相信在这种情况下是 UITableView，我还实现了以下内容。我认为在你的情况下，如果它是一个水平平底锅，你会想要返回 no。

```
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
if([gestureRecognizer isKindOfClass:[VerticalPanGestureRecognizer class]])
{
    return YES;
}
return NO;
} 
```

如果有任何不清楚的地方，请告诉我。

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T18:03:07.510

`UIGestureRecognizer`有一个属性可以防止已识别的手势将其事件转发到视图层次结构 - 听起来好像这对您来说是正确的选择。尝试一下并将其设置`NO`在您有问题的手势识别器上。

**`cancelsTouchesInView`**

一个布尔值，影响在识别手势时是否将触摸传递到视图。

```
@property(nonatomic) BOOL cancelsTouchesInView 
```

> 讨论
> 
> 当此属性为 YES（默认值）并且接收器识别其手势时，该手势的未决触摸不会传递到视图，并且先前传递的触摸会通过发送到视图的 touchesCancelled:withEvent: 消息取消。如果手势识别器无法识别其手势或者此属性的值为 NO，则视图将接收多点触控序列中的所有触摸。

在 iOS 3.2 及更高版本中可用。

来自[UIGestureRecognizer 参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T12:02:53.720

好的，答案是将pan添加到UITableView而不是UIView。我检查手势的位置是否在（现在隐藏在 xib 中）UIView 的边界内，如下所示：

```
 - (BOOL)gestureRecognizerShouldBegin:(UIPanGestureRecognizer *)gestureRecognizer
 {
     CGPoint translation = [gestureRecognizer locationInView:self.view];
     CGRect frame = self.slideTarget.frame;
     if (CGRectContainsPoint(frame, translation))
     {
         return YES;
     } else
     {
         return NO;
     }
 } 
```

繁荣。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T19:54:17.587

我了解您希望根据其方向（垂直 -> 滚动表，水平 -> 滚动 UIView）处理 UIView 中的手势。我读过 - 没有尝试 - 关于这个： UISwipeGestureRecognizer 有一个属性方向 - 来自文档：

```
The permitted direction of the swipe for this gesture recognizer. 
```

也许这可以帮助你？

编辑：哦，好吧，我没认出你在看 UIPanRecognizer（那里“滑动”太多）......当平移方向“足够垂直”时，也许你可以将手势传递给桌子，据报道由`translationInView:`..？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T21:00:53.333

在你的 Pan 手势的方法中这样写：

```
- (void)pan:(UIPanGestureRecognizer *)gesture
{
    CGPoint translatedPoint = [gesture translationInView:self.tableView];

    if (ABS(translatedPoint.y) > 10.0f) {
        self.tableView.bounds = CGRectMake(0, -translatedPoint.y, 320, 460);
    }
    if (ABS(translatedPoint.x) > 10.0f) {
        // swipe left/right code...
    }
} 
```

在这里，您可以通过更改其 bounds 属性来模仿表格视图的滚动。但是这段代码不会反弹表视图。此效果可以通过在平移手势开始时保存反弹属性状态，然后在手势结束时分配此属性来实现。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-02T10:50:09.453

我可以从您的要求中了解到，当您与另一个视图交互时，您需要滚动表格。所以视图层将如下所示：

UINavigationController-->view (导航控制器会有UITableViewController) UITableViewController (会有UiTableView)

最后

UIView（UINavigationController.view 子视图 UIView）

所以你希望如果你在 UIView 上进行平移（滚动），那么你的 TableView 将正确滚动。

所以你需要创建一个你需要的 UIView 的类（让我们假设 CustomView）。然后在您的 CustomView 类中实现以下方法。

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{
    UIView *hitView = [super hitTest:point withEvent:event];

    // If the hitView is THIS view, return the view that you want to     receive the touch instead:
    if (hitView == self) {
        return _tableView;
    }
    else if ([hitView isKindOfClass:[UIButton class]]) {
        return hitView;
    }
    return _tableView;
} 
```

如果您的 CustomView 也有按钮子视图。然后你也会得到它的选择。

请原谅我的错误解释，但我刚刚为我的问题找到了这个解决方案，我想与你分享。

如果您需要更多解释，请告诉我。我稍后会解释。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-23T09:38:15.400

实现`UIGestureReconizerDelegate`名为 的方法 `- gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`。

它`false`默认返回，实现它并返回`true.`

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return true;
} 
```

而且，不要忘记设置手势的`delegate`属性。

```
// Set the delegate of the panGesture. For example
self.panGestureReconizer.delegate = ... // 
```

* * *

[来自苹果文档](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIGestureRecognizerDelegate_Protocol/#//apple_ref/occ/intfm/UIGestureRecognizerDelegate/gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:)

`(BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer`

> 询问代理是否应允许两个手势识别器同时识别手势。
> 
> ### 返回值
> 
> YES 允许gestureRecognizer 和otherGestureRecognizer 同时识别他们的手势。默认实现返回 NO——不能同时识别两个手势。
> 
> ### 讨论
> 
> 当gestureRecognizer 或otherGestureRecognizer 对手势的识别会阻止其他手势识别器识别其手势时，将调用此方法。注意返回YES保证允许同时识别；另一方面，返回 NO 并不能保证防止同时识别，因为其他手势识别器的委托可能会返回 YES。

* * *

[阅读更多](https://stackoverflow.com/a/17615154/419348)

# c++ - *** 检测到 glibc *** free()：无效指针：

> ID：12960430
> 
> 赞同：2
> 
> 时间：2012-10-18T17:35:31.430
> 
> 标签：c++, glibc

对于上述 glibc 错误的原因，我完全感到困惑。我一定遗漏了一些明显的东西，但每次以下程序（由 4 个文件组成）退出时都会出现：

TankSim.h：

```
#ifndef TANKSIM_WDECAY_TANKSIM_H_
#define TANKSIM_WDECAY_TANKSIM_H_

#include <cstdlib>
#include <iostream>

#include "Parser.h"

int main();

#endif 
```

TankSim.cpp：

```
#include "TankSim.h"

using std::cout;
using std::endl;

int main()
{
     const Settings gGlobals = ParseConfig();

     return(0);
} 
```

解析器.h：

```
#ifndef TANKSIM_WDECAY_PARSER_H_
#define TANKSIM_WDECAY_PARSER_H_

#include <cstdlib>
#include <vector>
#include <fstream>
#include <sstream>
#include <iostream>

struct Settings {
  double speedlight;
  double refractiveindex;
  double absorptionchance;
  double pmtradius;
  double photspermetre;
  double tankradius;
  double tankheight;
  long unsigned int randomseed;
  double scatterangle;
  std::vector<double> entrypoint;
  std::vector<double> entrydrn;
};

Settings ParseConfig();

#endif 
```

解析器.cpp：

```
#include "Parser.h"

using std::string;
using std::vector;
using std::cout;
using std::endl;

Settings ParseConfig()
{
  Settings settings;

  std::ifstream configfile("settings.dat");

  string line;
  while(getline(configfile,line)){
    //Comments start with %
    if(line.find("%") != string::npos){
      cout << "Comment: " << line << endl;
      continue;
    }

    //Read in variable name.
    std::stringstream ss;
    ss << line;
    string varname;
    ss >> varname;
    string value = line.substr(varname.length()+1);
    cout << varname << "-" << value << endl;
  }
} 
```

由于我没有明确调用任何删除运算符，因此我不知道为什么会发生错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T17:39:10.327

很可能是缺少返回语句。

然后在您的主要方法中，`Settings`本地对象永远不会被初始化。然后它的作用域结束，其中向量的析构函数被调用，它们认为它们有一个指针（因为它们是用内存中的垃圾初始化的）并在它们的指针上调用 delete。

添加`-Wall`以启用所有警告将在将来告诉您这一点。

# vb.net - CRUDOperations.vb 中的这行代码有什么作用？

> ID：12960434
> 
> 赞同：0
> 
> 时间：2012-10-18T17:35:48.983
> 
> 标签：vb.net, sdk, dynamics-crm, dynamics-crm-2011

以下是 Microsoft Dynamics CRM 2011 SDK 中 CRUDOperations.vb 文件中的一些代码：

```
 ' Retrieve the account containing several of its attributes.
  Dim cols As New ColumnSet(New String() { "name", "address1_postalcode", "lastusedincampaign" })
  Dim retrievedAccount As Account = CType(_service.Retrieve("account", _accountId, cols), Account)
  Console.Write("retrieved, ")
  ' Update the postal code attribute.
  retrievedAccount.Address1_PostalCode = "98052"
  ' The address 2 postal code was set accidentally, so set it to null.
  retrievedAccount.Address2_PostalCode = Nothing 
```

现在，如果我理解正确，以下行：

```
 Dim retrievedAccount As Account = CType(_service.Retrieve("account", _accountId, cols), Account) 
```

好像真的什么都没做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T18:43:41.600

1.  它调用`_service.Retrieve("account", _accountId, cols)`
2.  它将返回值转换为 type `Account`。
3.  它将返回值存储在变量中`retrievedAccount`。

然后后面的几行修改了被引用的账户的属性`retrievedAccount`。

# sql-server - 与我熟悉的不同的 SELECT 语句

> ID：12960437
> 
> 赞同：2
> 
> 时间：2012-10-18T17:35:56.083
> 
> 标签：sql-server, sql-server-2008-r2

为什么这些语句有效 [am Using SQL2008 R2]

```
Select* FROM TableName   --UPDATE: this is not allowed in Oracle (10g) 
```

和

```
Select *From TableName  --UPDATE: this is allowed in Oracle (10g) 
```

现在这个

```
Select*From TableName   --UPDATE: this is not allowed in Oracle (10g) 
```

**更新：** SQL Server 中允许所有这三个

我是这样认识的`Select * From TableName`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T17:38:00.870

在这些情况下，不需要空格来识别语句的不同标记。

通常，编程语言解析器通过将文本分解为不同的标记来工作。在这种情况下，在 SQL Server 中，关键字搜索在“选择”处完成，因为您不能使用带有`*`. 被`*`放入下一个令牌。

你甚至可以这样做（看起来没有空间）。尽管可能很丑

```
select*from[master]..[spt_values]where[type]='p' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:51:29.843

您是在问它们有效的原因还是它们能够执行您需要的操作，即列出所有内容 - 字段、记录和命名数据库的数据 - 整个命名数据库结构？原因是 SQL 理解并记下它的关键字或它的内置命令，只要你正确拼写命令词，不管你把字符放在哪里*，它总是有效的，并且命令将被执行. 只要命令的语法和结构是完整的，例如当你有 SELECT (what(* )) FROM (where(tablename));时 SELECT 命令就完成了。

如果您愿意，您也可以添加 WHERE 命令，例如： SELECT (what(*)) FROM (where(tablename)) WHERE (condition); 每个内置命令或与 SQL 相关的关键字之间的空格无关紧要。

# eclipse - 可以从我自己的 Eclipse 插件以编程方式运行给定的 JUnit 测试吗？如何？

> ID：12960442
> 
> 赞同：0
> 
> 时间：2012-10-18T17:36:27.147
> 
> 标签：eclipse, junit, eclipse-plugin, junit4

> **可能重复：**
> [从其他 Eclipse 插件调用 JUnit](https://stackoverflow.com/questions/8064249/call-junit-from-other-eclipse-plugin)

我正在尝试从我自己的 Eclipse 插件以编程方式运行一组 JUnit4 测试。是否可以？如果是，如何？

请记住，我正在寻找的是让 Eclipse 显示通常的 TestsView，就像我手动对测试进行了标准运行一样（否则，我可能刚刚使用 JUnit 库类启动了标准运行）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T23:03:49.563

经过一番挖掘..

```
JUnitLaunchShortcut jUnitLaunchShortcut = new JUnitLaunchShortcut();
jUnitLaunchShortcut.launch(structuredSelection, "run"); 
```

# c# - 应用程序池回收的异常名称是什么？

> ID：12960450
> 
> 赞同：0
> 
> 时间：2012-10-18T17:37:04.570
> 
> 标签：c#, asp.net

当方法在应用程序池回收、应用程序域回收或 IIS 关闭时失败时，我需要进行一些自定义处理。是否有特定的异常类型？也许：ApplicationException？而不是使用泛型`Catch (exception ex)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:49:18.760

IIS 回收点之前的右侧是`Application_End`at global.asax

```
void Application_End(object sender, EventArgs e) 
{
} 
```

# php - php, mysql, "Else 在 while 语句之后

> ID：12960451
> 
> 赞同：0
> 
> 时间：2012-10-18T17:37:06.543
> 
> 标签：php, mysql, database, phpmyadmin, mysqli

我怎样才能写一个条件，如果没有找到该行然后做某事？

我的代码

```
$resultt = mysql_query("SELECT * FROM objednavky WHERE kdo = '$kdo' and kdy = '$the_rday'");
                        while ($roww = mysql_fetch_array($resultt)) {

                            echo "<form method='post' action=''>
                                  <label for='obb1'>Menu #1&emsp;</label>
                                  <input type='text' name='obb1' value='$roww[3]' size='4'><br>
                                  <label for='obb1'>Menu #2&emsp;</label>
                                  <input type='text' name='obb2' value='' size='4'><br>
                                  <label for='obb1'>Menu #3&emsp;</label>
                                  <input type='text' name='obb3' value='' size='4'><br>
                                  <input type='submit' value='objednat'></form>";

                        } 
```

我想继续这样

```
 ...} else {
echo " no match ";
} 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T17:38:23.680

在这种情况下，您可以使用`mysql_num_rows()`

```
$resultt = mysql_query("SELECT * FROM objednavky WHERE kdo = '$kdo' and kdy = '$the_rday'");

   if(mysql_num_rows($resultt)<1){
   echo "not found";
   }else{

     while(...)

       } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T17:38:00.777

这可以通过[mysql_num_rows()](http://php.net/manual/en/function.mysql-num-rows.php)

```
 if($resultt && mysql_num_rows($resultt)>1){

             while ($roww = mysql_fetch_array($resultt)) {

                        echo "<form method='post' action=''>
                              <label for='obb1'>Menu #1&emsp;</label>
                              <input type='text' name='obb1' value='$roww[3]' size='4'><br>
                              <label for='obb1'>Menu #2&emsp;</label>
                              <input type='text' name='obb2' value='' size='4'><br>
                              <label for='obb1'>Menu #3&emsp;</label>
                              <input type='text' name='obb3' value='' size='4'><br>
                              <input type='submit' value='objednat'></form>";

                    }}  else {
                         echo " no match ";
                       } 
```

但是`mysql_*`不推荐使用函数，所以使用`pdo`or`mysqli`代替

# c++ - 特定格式的字符串验证

> ID：12960453
> 
> 赞同：0
> 
> 时间：2012-10-18T17:37:11.233
> 
> 标签：c++, string, validation

我正在创建一个使用共享内存的简单国际象棋游戏。游戏中有两名玩家（黑，白），他们按照严格交替原则工作。我以回合制的方式从每个玩家那里获得输入并使用它们。我的问题是：我希望用户提供像 mov(a1,b2) 这样的输入。获得输入后首先：我想验证它是否格式正确，然后我想在函数中使用 a1,b2 值。这是我的代码的一部分：

```
 #include <sys/types.h>
#include <sys/ipc.h>
#include <sys/shm.h>
#include <stdio.h>
#include <iostream>
#include <string.h>
#include <sstream>
#include <algorithm>
#include <iterator>
#include <vector>
#include <stdlib.h>

#include <iostream>
using namespace std;

#define SHMSZ     27

int main() {
    int shmid;
    key_t key;
    char *shm;
    string cmd;
    int check =1;

    key = 111;

    /*
     * Locate the segment.
     */
    if ((shmid = shmget(key, SHMSZ, 0666)) < 0) {
        perror("shmget");
        return 0;
    }

    /*
     * Now we attach the segment to our data space.
     */
    if ((shm = (char*) shmat(shmid, NULL, 0)) == (char *) -1) {
        perror("shmat");
        return 0;
    }

    cout << *shm << endl;
    while(check)
    {
        if(*shm == '*') //checks if other player finished the game
        {
            cout<<"End of the game. Thank you for playing." <<endl;
            *shm ='*';
            exit(1);
        }
        while(*shm == 'B')
        {

            cout << "Enter a move" << endl;
            cin >> cmd;

            if(cmd=="eog") // Finish the game
            {   
                cout<<"End of the game. Thank you for playing." <<endl;
                *shm ='*';
                exit(1);
            }
            *shm = 'W';
        }
    }

    return 0;
} 
```

# css-selectors - 如何选择带有未附加到属性的文本的 css 元素？

> ID：12960454
> 
> 赞同：0
> 
> 时间：2012-10-18T17:37:14.843
> 
> 标签：css-selectors, selenium-webdriver

我目前正在使用 java 绑定在 Eclipse 上工作，并且正在自动化电子商务网站。我正在使用 Selenium 2 (Webdriver) 编写自动化脚本，但在尝试通过 css 获取特定元素时遇到问题。我的偏好是 css，因为 xpath 的性质不稳定（尤其是每周在我们的网站上实施的更改）。谁能帮助我？提前致谢。我需要单击两个按钮，它们都很相似。第一个是继续按钮：

```
<td class="content" style="vertical-align: bottom; ; background: url(http://g-ecx.images-amazon.com/images/G/01/digital/video/avod-1-5/dp-sprite-total._V156422041_.png) no-repeat -3px -153px; padding: 0px 4px 0px 11px;">       Yes, continue with my purchase     </td> 
```

第二个是取消按钮：

```
<td class="content" style="vertical-align: bottom; ; background: url(http://g-ecx.images-amazon.com/images/G/01/digital/video/avod-1-5/dp-sprite-total._V156422041_.png) no-repeat -3px -181px; padding: 0px 4px 0px 11px;"> Cancel </td> 
```

如您所见，它们都有相似的结构，但仅在文本上有所不同。现在我可以使用这个 -`css=td.content`

但这带来了两个元素并且脚本失败了。我需要做的是输入一些会使用文本的东西。预先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:39:56.457

CSS 选择器不能以这种方式工作。有一个叫做 : [contains](http://www.w3.org/TR/css3-selectors/#content-selectors) () 的东西，但它被删除了。您可以像这样为每个`td`元素添加第二个类：

```
<td class="content action_yes"...>
<td class="content action_no"...> 
```

然后你的 CSS 选择器看起来像这样（在 jQuery 中只是因为它很干净，这种方法是标准 CSS）

```
$('.action_yes')
$('.action_no') 
```

# php - 访问多维数组的不同部分

> ID：12960459
> 
> 赞同：-1
> 
> 时间：2012-10-18T17:37:40.467
> 
> 标签：php, arrays, multidimensional-array, foreach

我已经使用 md 数组组合了一个菜单，但是在正确打印子菜单项时遇到了问题。

我用它来构建菜单：

```
class Language {

public $langCode ;

function __construct($code)
{
    $this->langCode = $code ;
}

public function navigation()
{
    if($this->langCode == 'en')
    {
        $menu = array(
                      array('Home', ''),
                      array('Galleries', '',
                            array('Top ten hottest' => 'hottest.php'),
                            array('Top ten worst' => 'hottest.php'),
                           ),
                      array('Upload', 'upload.php'),
                      array('Login/register', ''),
                      array('Resources', '', 
                            array('News' => ''),
                            array('What\'s a mound?' => ''),
                            array('Legal' => ''),
                            array('Links' => ''),
                           ),
                      array('abc?', ''),
                     ) ;
    }
    return $menu ;
} 
```

}

我正在尝试使用以下方法构建菜单：

```
$mainMenu = $lng->navigation() ;

echo "<ul>\n" ;
foreach($mainMenu as $set) {
    $x = 0 ;
    echo "<li><a href='".$set[1]."'>".$set[0]."</a></li>\n" ;
    if($set[2])
    {
        foreach($set[2] as $label => $item) {
            echo $item ;
        }
    }
} 
```

但是我得到的只是 foreach 循环子菜单中的第一项，这对我来说没有意义，因为我可以通过 $set[2][0] 直接访问它（在我将键分配给数组）。

我需要做什么才能获得我想要的输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:43:08.847

您忘记将 set[2] 设为数组。现在你有 set[2] 和 set[3] 并且在你有 set[4] 和 set[5] 的资源上：

```
$menu = array(
                  array('Home', ''),
                  array('Galleries', '', array(
                        array('Top ten hottest' => 'hottest.php'),
                        array('Top ten worst' => 'hottest.php'),
                       )),
                  array('Upload', 'upload.php'),
                  array('Login/register', ''),
                  array('Resources', '', array(
                        array('News' => ''),
                        array('What\'s a mound?' => ''),
                        array('Legal' => ''),
                        array('Links' => ''),
                       )),
                  array('abc?', ''),
                 ) ; 
```

# android - 检测视图上的触摸事件坐标

> ID：12960460
> 
> 赞同：0
> 
> 时间：2012-10-18T17:37:46.677
> 
> 标签：android, user-interface

我有一个 ImageView，我想知道触摸事件相对于该 ImageView 的坐标。我尝试了 MotionEvent 的 getX() 和 getY() 方法，似乎没有用。另外我想知道y坐标值是负值还是正值，因为按照惯例，我们是从上到下测量的，所以它应该是负数。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T18:07:14.863

原点 (0,0) 位于左上角。getX() 和 getY() 返回相对于 View 的 x 和 y，getRawX() 和 getRawY() 返回相对于屏幕的 x 和 y。

# c# - 如何在构造函数中以及何时添加新项目时将焦点放在 listBox 上？

> ID：12960478
> 
> 赞同：-1
> 
> 时间：2012-10-18T17:38:23.570
> 
> 标签：c#

在构造函数中我做了：

```
if (listBox1.Items != null)
            {
                listBox1.Focus();
            } 
```

但是当我运行程序时，我无法在 listBox 中上下移动键盘，因为焦点位于表单中其他位置的按钮上。我需要在 listBox 上单击鼠标才能获得焦点。

我想要的另一个问题是，当用户向 listBox 添加新项目时，焦点将自动放在最后添加的项目上。对于这个问题，这是我向 listBox 添加新项目的代码：

```
private void KeysValuesUpdate()
        {
            using (var w = new StreamWriter(keywords_path_file))
            {
                crawlLocaly1 = new CrawlLocaly();
                crawlLocaly1.StartPosition = FormStartPosition.CenterParent;
                DialogResult dr = crawlLocaly1.ShowDialog(this);
                if (dr == DialogResult.OK)
                {
                    if (LocalyKeyWords.ContainsKey(mainUrl))
                    {
                        LocalyKeyWords[mainUrl].Clear();
                        LocalyKeyWords[mainUrl].Add(crawlLocaly1.getText());
                    }
                    else
                    {
                        LocalyKeyWords[mainUrl] = new List<string>();
                        LocalyKeyWords[mainUrl].Add(crawlLocaly1.getText());
                    }
                    Write(w);
                    ClearListBox();
                }
                if (dr == DialogResult.Cancel)
                {
                    Write(w);
                }
            }
        }

        private void ClearListBox()
        {
            data.Clear();
            listBox1.DataSource = null;
            string sb;
            foreach (KeyValuePair<string, List<string>> kvp in LocalyKeyWords)
            {
                for (int i = 0; i < kvp.Value.Count(); i++)
                {
                    sb = "Url: " + kvp.Key + " --- " + "Local KeyWord: " + kvp.Value[i] + Environment.NewLine;
                    data.Add(sb.ToString());
                }
            }
            listBox1.DataSource = data;
        } 
```

问题是为什么我不能在 listBox 项目的任何情况下设置焦点？

在构造函数的第一种情况下，我希望它位于列表中的最后一个项目上，并且每次我添加一个新项目时，焦点都将位于最后一个添加的项目上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:44:32.977

最有可能的*是*，正在选择该项目，您只是无法分辨，因为不同的控件具有焦点。有几种不同的方法可以解决这个问题，具体取决于应用程序的设计。

1.  对于问题的第一部分，您应该在*Page/Form Load 事件*中设置焦点，因为在构造函数级别控件处于初始化过程中。`ListView`每当显示表单时，将焦点设置为第一个。用户通常通过单击控件来设置焦点。但是，您也可以指定哪些控件以编程方式获得焦点。一种方法是将控件的选项卡索引设置为 0（最小值表示将具有初始焦点的控件）。第二种可能性是在表单的`Load`事件中使用以下代码行，或者在设置`Selected`属性后立即使用：

    ```
    listBox1.Select(); 
    ```

    此解决方案的问题在于，当用户将焦点设置到表单上的不同控件（例如文本框或按钮）时，所选项目将不再突出显示。

2.  对于问题的第二部分，选择 ListBox 中最后添加的项目，使用以下代码：

    ```
    listBox1.SelectedIndex = listBox1.Items.Count - 1;
    listBox1.SetFocus(); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:45:42.397

看起来你的`ClearListBox`方法实际上是一种`UpdateListBox`方法。

```
listBox1.DataSource = data; 

listBox1.SelectedIndex = <index of newitem>;
// or
listBox1.SelectedItem = "text of new item";

listBox1.SetFocus(); 
```

如果新项是最后一项，则其索引为`listBox1.Items.Count - 1`。

# jersey - 使用过滤器引导 Jersey 会导致 Swagger 失败

> ID：12960479
> 
> 赞同：4
> 
> 时间：2012-10-18T17:38:30.537
> 
> 标签：jersey, swagger

在我的应用程序中，`web.xml`我最初将 Jersey 配置如下：

```
<servlet>
    <servlet-name>jersey-servlet</servlet-name>
    <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <!-- swagger for REST API support
             codehaus for exception mappings so, for ex, POSTing malformed JSON  yields 400 bad request not 500 -->
        <param-value>com.jonarcher.rest;com.wordnik.swagger.jaxrs;org.codehaus.jackson.jaxrs</param-value>
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
        <param-value>true</param-value>
    </init-param>
    <init-param>
        <!-- Passed thru to Swagger -->
        <param-name>api.version</param-name>
        <param-value>2.0</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>jersey-servlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

这似乎工作得很好，我可以使用 swagger-ui 来浏览我的注释端点的文档。

但是，我想在我的应用程序中“嵌入”swagger UI，以便浏览文档的方式随之而来。`<url-pattern>`考虑到我的 Jersey servlet，我遇到了为 swagger-ui 提供静态内容的问题。显然，我可以将其更改为，例如，`/api/*`但这在我的情况下实际上是不可取的。

[我在这里](http://www.flamingpenguin.co.uk/blog/2010/09/02/serving-static-content-and-jersey/)读到，Jersey 可以配置为作为过滤器而不是 servlet 运行，然后您可以为要从 Jersey 处理中排除的 URL 指定一个参数：

```
<filter>
    <filter-name>jerseyFilter</filter-name>
    <filter-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</filter-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.WebPageContentRegex</param-name>
        <param-value>.*\.html</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>jerseyFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

这本身也很好用。但是当我把大摇大摆带入组合时，事情就开始出错了。具体来说，将`com.sun.jersey.config.property.packages`参数引入基于过滤器的配置，就像我在 servlet 配置中那样：

```
<filter>
    <filter-name>jerseyFilter</filter-name>
    <filter-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</filter-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.WebPageContentRegex</param-name>
        <param-value>.*\.html</param-value>
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.jonarcher.rest;com.wordnik.swagger.jaxrs;org.codehaus.jackson.jaxrs</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>jerseyFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

导致过滤器无法启动，并出现以下错误消息：

```
 SEVERE: The following errors and warnings have been detected with resource and/or provider classes:
  SEVERE: Missing dependency for method public javax.ws.rs.core.Response com.wordnik.swagger.jaxrs.ApiListingResourceJSON.getAllApis(javax.servlet.ServletConfig,com.sun.jersey.api.core.ResourceConfig,javax.ws.rs.core.HttpHeaders,javax.ws.rs.core.UriInfo) at parameter at index 0
  SEVERE: Method, public javax.ws.rs.core.Response com.wordnik.swagger.jaxrs.ApiListingResourceJSON.getAllApis(javax.servlet.ServletConfig,com.sun.jersey.api.core.ResourceConfig,javax.ws.rs.core.HttpHeaders,javax.ws.rs.core.UriInfo), annotated with GET of resource, class com.wordnik.swagger.jaxrs.ApiListingResourceJSON, is not recognized as valid resource method.
  SEVERE: Missing dependency for method public javax.ws.rs.core.Response com.wordnik.swagger.jaxrs.ApiListingResourceXML.getAllApis(javax.servlet.ServletConfig,com.sun.jersey.api.core.ResourceConfig,javax.ws.rs.core.HttpHeaders,javax.ws.rs.core.UriInfo) at parameter at index 0
  SEVERE: Method, public javax.ws.rs.core.Response com.wordnik.swagger.jaxrs.ApiListingResourceXML.getAllApis(javax.servlet.ServletConfig,com.sun.jersey.api.core.ResourceConfig,javax.ws.rs.core.HttpHeaders,javax.ws.rs.core.UriInfo), annotated with GET of resource, class com.wordnik.swagger.jaxrs.ApiListingResourceXML, is not recognized as valid resource method.
Oct 18, 2012 11:27:30 AM com.sun.jersey.spi.spring.container.servlet.SpringServlet initiate
SEVERE: Exception occurred when intialization
com.sun.jersey.spi.inject.Errors$ErrorMessagesException
    at com.sun.jersey.spi.inject.Errors.processErrorMessages(Errors.java:170)
    at com.sun.jersey.spi.inject.Errors.postProcess(Errors.java:136)
    at com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:199)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:765)
    at com.sun.jersey.spi.spring.container.servlet.SpringServlet.initiate(SpringServlet.java:117)
    at com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.initiate(ServletContainer.java:319)
    at com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:609)
    at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:210)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:374)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:727)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:295)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:422)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:115)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4071)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4725)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:675)
    at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:601)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:502)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1315)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1061)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

我被困在这一点上。任何人有任何建议/指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:08:38.887

不幸的是，这看起来像是一个招摇的限制。正如您在日志消息中看到的，问题在于将 ServletConfig 注入到 swagger 方法中。ServerConfig 仅在 Jersey 作为 servlet 运行时可用。为了使 swagger 也支持过滤器，他们必须修改他们的方法来注入 Jersey WebConfig 类（它是 FilterConfig 和 ServletConfig 的包装器）。

更新：我已提交拉取请求以在 Swagger 中解决此问题：[https ://github.com/wordnik/swagger-core/pull/64](https://github.com/wordnik/swagger-core/pull/64)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T03:11:11.577

我将审查拉取请求，但与此同时，这是我们解决此问题的方法。

1) 部署两个不同的 webapp，一个在 webapps/ROOT 下使用 swagger UI 代码，另一个在 webapps/api 下使用 api 本身。

2) 添加文件处理程序以使用默认 servlet，如下所示：

```
 <servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>/ui/*</url-pattern>
    <url-pattern>/ui/css/*</url-pattern>
    <url-pattern>/ui/lib/*.js</url-pattern>
    <url-pattern>/ui/images/*</url-pattern>
  </servlet-mapping> 
```

ui 文件位于名为“ui”的子文件夹下

# .net - 有没有办法解决 .NET 代码之外的程序集？

> ID：12960484
> 
> 赞同：0
> 
> 时间：2012-10-18T17:38:56.883
> 
> 标签：.net, installshield, gac

我有一个安装程序需要验证 GAC 中是否存在某些程序集。这些是我无法控制的第 3 方 DLL。

因为它在安装程序中，所以我不想让这个“检查器”用 .NET 编写，因为我试图避免托管自定义操作。我在考虑 InstallScript 或原始 Win32 API。

我知道一种使用文件 IO 函数来检查各种路径的程序集的方法，但是考虑到策略文件和重定向程序集版本的可能性，这似乎有些脆弱。

有没有办法安全地解析 .NET 代码之外的程序集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:12:28.343

您可以使用非托管代码中的[元数据接口](http://msdn.microsoft.com/en-us/library/ms233411.aspx)。请特别查看 IMetaDataDispenser/IMetaDataDispenserEx 和 IMetaDataAssemblyImport。

# c++ - 如何防止 Valgrind 为每个新线程启动嵌入式 gdbservers？

> ID：12960485
> 
> 赞同：6
> 
> 时间：2012-10-18T17:39:03.727
> 
> 标签：c++, multithreading, valgrind, memcheck

我在一个产生数千个其他线程的程序上运行 valgrind memcheck。

其他线程不会产生错误，我不在乎它们会发生什么。

然而，Valgrind 坚持每次产生新线程时都在 /tmp 中打开一个命名管道。这不仅浪费，而且实际上破坏了 valgrind。有时 valgrind 不会自行清理，然后具有相同 pid（稍后活动）的未来子代无法生成，因为 valgrind 无法创建具有正确名称的管道（它已经存在）。

我怎样才能阻止 Valgrind 制造所有这些管道！？！

编辑：我已经尝试过的标志：

--child-silent-after-fork=是

以及我已经排除的事情：

--track-children=no（默认值为 no）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T11:56:49.873

很抱歉回答我自己的问题。仅用于文档目的。

带着旗帜奔跑：

```
--vgdb=no 
```

这在手册页中没有正确记录，因为它没有告诉您它会在没有标志的情况下到处喷出管道，但这就是它这样做的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:39:01.090

如果可以，请调整您的初始程序，以便您可以使用命令行参数关闭线程生成。对结果运行 valgrind，删除线程生成。

# asp.net-mvc - 来自 ASP.NET MVC 中多个模型属性的 UI 元素

> ID：12960486
> 
> 赞同：0
> 
> 时间：2012-10-18T17:39:04.583
> 
> 标签：asp.net-mvc, partial-views

我一直在做一些搜索，发现这个[ASP.NET MVC 3 - Partial vs Display Template vs Editor Template](https://stackoverflow.com/questions/5037580/asp-net-mvc-3-partial-vs-display-template-vs-editor-template)但我仍然不清楚我应该为几个模型属性的“自定义 UI 控件”使用什么以及如何使用。

我有两个例子：

FistName MiddleInitial LastName 或电话分机

我想要某种我可以使用的可重复使用的 UI 控件/模板。

比如说，我有一个在创建和编辑视图中都使用的局部视图，称为 _ClientForm。在这个视图中，我的模型中有 Contact1 和 Contact2 以及相关属性。现在，我想为它们创建一个共同的外观并并排显示。此外，它们都具有 Phone/Ext 属性，我想要某种视觉控件，以便能够在我的模型中每次具有这两个属性时重新使用它。

我不清楚我应该使用什么以及我应该如何进行实施。

只是为了说明我的意思。

现在我有以下代码的部分视图

```
@using WebDemo.Helper
@model CardNumbers.Objects.Client
<fieldset>
    <legend>Client Info</legend>

    @Html.ValidationSummary(true)

    <input type="hidden" id="fntype" name="fntype">
    @Html.HiddenFor(model => model.Id)
    @Html.EditorFor(model => model.Number, EditorTemplate.TextBox)

    @Html.EditorFor(model => model.Name, EditorTemplate.TextBox)

    @Html.EditorFor(model => model.Address, EditorTemplate.EditBox)

    <div id="ContactsInfo">
        @*Contact 1*@
        <div id="Contact1">

            @Html.EditorFor(model => model.Contact1, EditorTemplate.TextBox)
            @Html.EditorFor(model => model.Email1, EditorTemplate.TextBox)
            @Html.EditorFor(model => model.Phone1, EditorTemplate.TextBox)
            @Html.EditorFor(model => model.Ext1, EditorTemplate.TextBox)

        </div>

        @*Contact2*@
        <div id="Contact2">

            @Html.EditorFor(model => model.Contact2, EditorTemplate.TextBox)

            @Html.EditorFor(model => model.Email2, EditorTemplate.TextBox)
            @Html.EditorFor(model => model.Phone2, EditorTemplate.TextBox)
            @Html.EditorFor(model => model.Ext2, EditorTemplate.TextBox)
        </div>
    </div>
    @*<div class="clear"></div>*@
    <div id="SaveCancel" class="float-right">
        <button type="Submit" id="btnSave">Save</button>
        <button type="reset" id="btnCancel">Cancel</button>
    </div>
</fieldset> 
```

[使用此处描述的技术http://dotnetspeak.com/index.php/2012/10/asp-net-mvc-template-and-knockout-js](http://dotnetspeak.com/index.php/2012/10/asp-net-mvc-template-and-knockout-js)已经对视图代码进行了一些简化

因此，如您所见，我有 2 个带有联系信息的 div，在每个 div 中我也有电话/分机，我想彼此靠近放置。

所以，我想我需要一些可重复使用的东西：联系信息和电话/分机。

我还向我的 Client 类展示了一些进一步的说明：使用 System;

```
using System.ComponentModel.DataAnnotations;
using System.ComponentModel;

using DataAnnotationsExtensions;
using System.ComponentModel.DataAnnotations.Schema;
using System.Collections.Generic;

namespace CardNumbers.Objects
{
    public class Client
    {
        //public Client()
        //{
        //    this.ClientOrders = new List<ClientOrder>();

        //    this.Reorders = new List<Reorder>();
        //}

        [Key]
        [Column("ClientId",TypeName = "int")]
        public virtual int Id { get; set; }
        [Required]
        [DisplayName("Client No")]
        [Column("client_no", TypeName = "smallint")]
        public virtual Int16 Number { get; set; }

        [Required]
        [Column("client_name", TypeName = "varchar")]
        [DisplayName("Client Name")]
        [MaxLength(30, ErrorMessage = "Client Name should not be longer than 30 characters" )]
        [MinLength(3, ErrorMessage = "Client Name is too short")]
        public virtual string Name { get; set; }

        [StringLength(100)]
        [DisplayName("First Contact")]
        [DisplayFormat(NullDisplayText = "")]
        [Column("Contact1",TypeName =  "varchar")]
        public virtual string Contact1 { get; set; }

        [Email]
        [StringLength(100)]
        [Column("c1_email", TypeName = "varchar")]
        public virtual string Email1 { get; set; }

        [DataType(DataType.PhoneNumber)]
        [Column("C1_Phone", TypeName = "varchar")]
        [StringLength(10)]
        [DisplayName("Phone")]
        public virtual string Phone1 { get; set; }

        [StringLength(5)]
        [Column("C1_Ext", TypeName = "varchar")]
        [DisplayName("Ext")]
        public virtual string Ext1 { get; set; }

        [StringLength(100)]
        [DisplayName("Second Contact")]
        [Column("Contact2", TypeName = "varchar")]
        public virtual string Contact2 { get; set; }

        [Email]
        [StringLength(100)]
        [Column("C2_Email", TypeName = "varchar")]
        public virtual string Email2 { get; set; }

        [DataType(DataType.PhoneNumber)]
        [StringLength(10)]
        [DisplayName("Phone")]
        [Column("C2_Phone", TypeName = "varchar")]
        public virtual string Phone2 { get; set; }

        [StringLength(5)]
        [DisplayName("Ext")]
        [Column("C2_Ext",TypeName = "varchar")]
        public virtual string Ext2 { get; set; }

        [DataType(DataType.MultilineText)]
        public virtual string Address { get; set; }

        [ForeignKey("EnteredByOperator")]
        public string EnteredBy { get; set; }

        [InverseProperty("ClientsEnteredBy")]
        public virtual Operator EnteredByOperator { get; set; }

        [ForeignKey("ModifiedByOperator")]
        public string ModifiedBy { get; set; }

        [InverseProperty("ClientsUpdatedBy")]
        public virtual Operator ModifiedByOperator { get; set; }

        [DataType(DataType.DateTime)]
        [DisplayName("Created on")]
        public DateTime EnteredOn { get; set; }

        [DataType(DataType.DateTime)]
        [DisplayName("Modified on")]
        public DateTime? ModifiedOn { get; set; }

        public virtual ICollection<ClientOrder> ClientOrders { get; set; }

        public virtual ICollection<Reorder> Reorders { get; set; }
    }
}` 
```

`

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:07:05.333

我会添加 2 个 EditorFor 模板。

*   编辑个人联系信息的一种
*   一个用于联系信息列表或用于包含两个联系信息的特殊视图模型。该模板将依次调用所有包含的联系人信息视图模型的编辑器，这些模型将呈现第一个模板。

**视图模型**

```
 public class ContactDetails
 {
    public string Name {get;set;]
    public string Email {get; set;}
 }
 public class ContactsInfo
 {
    public ContactDetails Contact1 {get; set; }
    public ContactDetails Contact2 {get; set; }
 }
 public class Client {
    public ContactsInfo ContactsInfo {get; set;}
 } 
```

**主视图**

```
 @model client
 ...other html....
 @Html.EditorFor(m => m.ContactsInfo)
 ...other html.... 
```

**编辑器模板 ContactsInfo.cshtml**

```
@model ContactsInfo
<div id="ContactsInfo">
    <div id="Contact1">
        @Html.EditorFor(m => m.Contact1)
    </div>
    <div id="Contact2">
        @Html.EditorFor(m => m.Contact2)
    </div>
</div> 
```

**编辑器模板 ContactDetails.cshtml**

```
 @model ContactDetails
   @Html.EditorFor(model => model.Contact1, EditorTemplate.TextBox)
   @Html.EditorFor(model => model.Email1, EditorTemplate.TextBox)
   @Html.EditorFor(model => model.Phone1, EditorTemplate.TextBox)
   @Html.EditorFor(model => model.Ext1, EditorTemplate.TextBox) 
```

# javascript - Ajax 跨域不工作

> ID：12960489
> 
> 赞同：0
> 
> 时间：2012-10-18T17:39:13.077
> 
> 标签：javascript, html, ajax

> **可能重复：**
> [Ajax 跨域调用](https://stackoverflow.com/questions/2558977/ajax-cross-domain-call)

在这里使用此代码..

```
 var URLs = new Array();
   var titulo = new Array();

   $.ajax({
     url: 'http://www.example.com.br',
     type: 'GET',                                                    
     success: function(res) {
       headline = $(res.responseText).text();                                                              
       URLs = headline.split(",LK");
       CriaVideos(URLs);                               
    }
   }); 

  function CriaVideos(URLs)
  {                           
   for(var i = 0; i <= 5; i++)
   {
    var aux = new Array();
    aux = URLs[i].split("#");

    titulo.push(aux[0]);
    titulo.push(aux[1]);
    Cria(titulo);
   }                   
  }                                           

 function Cria(titulo)
 {                                                                   
   document.write('<li><div id="frame_video"><a href="TelaVideoWind.php?nome='+       titulo[1]+ '&video=' + titulo[0] + '"><span class="frame_video_img"><img src="img/play.png" width="60px" height="40px" align="middle" style="position: absolute; margin-top: 55px; margin-left: 95px;"/><img src="http:/'+ titulo[0]+ '/i.ytimg.com/vi/hqdefault.jpg" width="250px" height="150px"/></span><span class="frame_video_desc"></span></a></div></li>');                          
 } 
```

它会在标题 document.write 中工作还是在函数之外使用但它不起作用！我想知道是否有人可以帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:46:50.213

正如 Felix Kling 提到的那样，大多数浏览器都不允许这样的跨域调用。有几种方法可以解决这个问题，比如[http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)，但这需要你要打的是我相信的 JSONP 服务。

或者，您可以在您使用的任何网络语言中使用代理页面。因此，您可以让 php 页面执行服务器到服务器请求，以获取您当前正在向其发送 ajax 请求的页面。然后，您的代理页面可以提供从其服务器到服务器调用到 ajax 调用的内容/响应。

# asp.net-mvc - 提交时文本框值变为空白

> ID：12960490
> 
> 赞同：1
> 
> 时间：2012-10-18T17:39:19.657
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我通过选择（ASP.Net MVC 2 Web Application）在 MVC2 中创建了一个应用程序。这提供了一些主页/关于控制器/模型/视图。

## 我还创建了一个具有索引名称的模型，如下所示...

```
namespace MvcApplication1.Models
{
    public class Index
    {
        [DataType(DataType.Text)]
        public String Name { get; set; }
    }
} 
```

## 以下是我的索引视图

```
<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Index
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <% using (Html.BeginForm()) 
        {%>
    <%:Html.TextBoxFor(x=> x.Name) %>
    <input type="submit" name="Click here" />
    <%} %>
</asp:Content> 
```

## 以下是我的控制器

```
[HttpPost]
public ActionResult Index(Index Model)
{
      ViewData["Message"] = "Welcome to ASP.NET MVC!";
      return View();
} 
```

## 问题

当我保持索引控制器如下所示。如果我点击提交按钮。这是清除 TextBox 控件。像下面

```
 public ActionResult Index()
    {
          ViewData["Message"] = "Welcome to ASP.NET MVC!";
          return View();
    } 
```

如果将模型作为参数合并到 Action 方法中，则不会清除 TextBox...

这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:51:01.200

MVC 不像 WebForms 那样维护回发之间的状态。

字段是从 ModelState 中的值重新填充的，这些值只有在模型绑定器在回发时看到它们时才会添加到那里（并且可能只有在存在验证错误的情况下？）。老实说，如果它不自动执行，我几乎会更喜欢。然而，如果你回发一个无效值（例如一个字符串到一个整数字段），你需要一个可以存储无效值的地方，以便它可以与验证错误一起重新填充。

除了该自动方法之外，您需要手动将模型传递回视图以进行填充

```
[HttpPost]
public ActionResult Index(Index Model)
{
  ViewData["Message"] = "Welcome to ASP.NET MVC!";
  return View(Model);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:19:16.710

您的控制器应该看起来像这样，以便用户输入在单击提交按钮后保留在视图中'

```
public ActionResult Index( )
{
    ViewData["Message"] = "Welcome to ASP.NET MVC!";
    var model = new Index();
    return View( model );
}

[HttpPost]
public ActionResult Index(Index model )
{

    return View(model);
} 
```

# javascript - 在 iframe 中使用 window.parent.myFunction 是否安全？

> ID：12960494
> 
> 赞同：3
> 
> 时间：2012-10-18T17:39:38.307
> 
> 标签：javascript, html

在 JavaScript 中，`<iframe>`我需要在父窗口中调用一个函数。两个窗口都来自同一个域。

使用安全`window.parent.myFunction();`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:18:49.440

# 简短的回答

是的，您可以`window.parent`在同一个域中使用。

WhatWG[规范第 6 章：加载网页](http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html)说：

*   `iframe.parent`存在
*   `iframe.parent`是`iframe`的父级 DOM 的代理
*   如果来源相同，则允许访问

# 真的很长很长的答案

我试图通过阅读规范向您展示如何得出这个结论，同时牢记：*从内部**访问的特征是什么？`parent``iframe`*

开始吧。这是一篇长文。

## 1.DOM属性`parent`

[WhatWG#dom-parent](http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#dom-parent)说`window.parent`：

> 浏览上下文*b*`Window`中 a 的对象的 parent IDL 属性必须返回父*浏览上下文*的对象，如果有的话（即如果*b*是子浏览上下文），或者浏览上下文*b*的对象本身，否则（即，如果它是顶级浏览上下文或分离的嵌套浏览上下文）。`Document`*`WindowProxy`**`WindowProxy`***

 ***`parent`是访问类似于父窗口的 DOM 的属性。然而：

*   什么是*浏览上下文*？
*   做什么`WindowProxy`？

让我们继续阅读。

## 2\. 浏览上下文

浏览上下文是`Document`向用户呈现对象的环境。

[WhatWG#Browsing 上下文](http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#windows)说：

> Web 浏览器中的选项卡或窗口通常包含浏览上下文，就像框架集中的 iframe 或框架一样。每个浏览上下文都有一个对应的 WindowProxy 对象。

## 3.窗口代理

窗口代理是代理`window`对象并实施例如安全约束的对象。对于一个`window`对象，可以有多个代理（例如`iframes`，来自两个不同域的两个代理访问同一个父级）。

[WhatWG#proxy-object](http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#the-windowproxy-object)说：

> WindowProxy 对象允许脚本就像每个浏览上下文都有一个 Window 对象一样，同时仍然为每个 Document 保留单独的 Window 对象。

## 4\. 安全

我们就快到了。继续阅读。

[WhatWG#security-nav](http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#security-nav)说：

> 如果以下条件之一为真，则允许浏览上下文 A 导航第二个浏览上下文 B：
> 
> *   A 的活动文档的来源与 B 的活动文档的来源相同，或者
> *   浏览上下文 A 是一个嵌套的具有顶级浏览上下文的浏览上下文，它的顶级浏览上下文是 B，或者
> *   浏览上下文 B 是辅助浏览上下文，并且允许 A 导航 B 的开启者浏览上下文，或
> *   浏览上下文 B 不是顶级浏览上下文，但存在 B 的祖先浏览上下文，其活动文档与 A 的活动文档具有相同的来源（实际上可能是 A 本身）。

## 5\. 扣减

如果两者都来自同一个域，可以从它的`iframe`访问函数吗？`parent`让我们推断。

1.  `parent`不是`window`父对象，而是一个`WindowProxy`.
2.  的*浏览上下文*可以`iframe`访问其父级，因为它们都具有相同的来源（参见上面的第一个安全条件）。

您会看到：如果您仔细阅读规范，您可以找到浏览器应该如何运行的答案。阅读规范是一项后天的技能。它需要耐心和准确。

然而：世界没有那么美好。有些浏览器没有按照它们应该的那样实现规范。*买者自负*。***

# c++ - 增加一个常量前向迭代器

> ID：12960501
> 
> 赞同：0
> 
> 时间：2012-10-18T17:40:10.750
> 
> 标签：c++, iterator

我有一个在参数中采用常量迭代器的函数，我想对该函数进行递归调用，但将我的迭代器加一（不修改迭代器本身）。

我找到的唯一解决方案是创建迭代器的副本，并预先增加该副本以最终将其作为函数调用的参数传递。

```
func(const FowardIterator & i, const container & c) {
  // lot of very smart code

  FowardIterator next = i;

  ++next;
  func(next, c);
} 
```

有没有更简单的方法来做到这一点，一种不涉及创建临时迭代器的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:46:51.400

迭代器的复制速度应该非常快，所以真的没有理由接受一个 by `const&`; 按值传递应该没问题，并且可以避免在函数体中显式复制迭代器。

也就是说，您还可以使用`std::next`复制迭代器并一步推进它：

```
func(std::next(i), c); 
```

# c# - 让我的文件长度持续

> ID：12960502
> 
> 赞同：0
> 
> 时间：2012-10-18T17:40:12.993
> 
> 标签：c#, winforms

在我的应用程序中，我打开 Tshark 进程并开始捕获，并从我的主窗体中更新我的 UI。我的类属性之一是我的文件是如何创建的（pcap 文件），在我的 UI 上，我正在更新这个文件长度。我的问题是，如果这个文件是新的，则长度保持为零，但如果我的文件是已经存在的文件，我的 UI 会显示我正在进行的长度（当然文件被覆盖，但我可以看到它在增长）。

```
 public class Tshark
    {
        #region members
        private Process _tsharkProcess = new Process();
        private int _numberOfPackets;
        private string _tshark;
        private List<string> _list;
        private ProcessStartInfo _process;
        private int _interfaceNumber;
        private string _pcapPath;
        private string _status;
        private double _bitsPerSecond;
        private double _packetsPerSecond;
        private decimal _packetLimitSize;
        private DateTime _lastTimestamp;
        private PacketDevice _device;
        private FileInfo _file;
        private bool _processRunning;

        public void startCapturing()
        {            
            ThreadStart tStarter = delegate { openAdapterForStatistics(_device); };
            Thread thread = new Thread(tStarter);
            thread.IsBackground = true;
            thread.Start();
            ProcessStartInfo tsharkStartInfo = new ProcessStartInfo();
            tsharkStartInfo.FileName = _tshark; 
            tsharkStartInfo.RedirectStandardOutput = true; 
            tsharkStartInfo.RedirectStandardError = true; 
            tsharkStartInfo.RedirectStandardInput = true; 
            tsharkStartInfo.UseShellExecute = false; 
            tsharkStartInfo.CreateNoWindow = true; 
            tsharkStartInfo.Arguments = string.Format(" -i " + _interfaceNumber + " -s " + _packetLimitSize + " -w " + _pcapPath);
            _tsharkProcess.StartInfo = tsharkStartInfo;
            _tsharkProcess.ErrorDataReceived += _cmdProcess_ErrorDataReceived;
            _tsharkProcess.OutputDataReceived += tshark_OutputDataReceived; 
            _tsharkProcess.EnableRaisingEvents = true; 
            _tsharkProcess.Start();
            _processRunning = true;
            _tsharkProcess.BeginOutputReadLine(); 
            _tsharkProcess.BeginErrorReadLine();
_tsharkProcess.WaitForExit(); 
        }

    public long getFileLength()
    {
        _file = new FileInfo(_pcapPath);
        string directoryName = _file.DirectoryName;
        DirectoryInfo directoryInfo = new DirectoryInfo(directoryName);
        FileInfo[] dirs = directoryInfo.GetFiles();
        _file = dirs.FirstOrDefault(f => f.Name.Equals(_file.Name));

        if (_file != null)
        {

            return _file.Length;
        }

        return 0;
    }

        public void refreshFile()
        {            
            if (_file != null)
            {
                _file.Refresh();
            }
        }
} 
```

从主窗体我通过计时器更新我的用户界面：

```
private void tmrUpdateLbl_Tick(object sender, EventArgs e)
{
    lblFileSizeTabSniffer2.Text = formatBytes(tshark.getFileLength());
    tshark.refreshFile();
} 
```

在调试器中，我可以看到如果文件是新文件，则 _file 始终为空，因此在 getFileLength() 方法中返回零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:48:39.283

您每次都需要获取完整的 FileInfo（即 in `getFileLength`）以获得最新的结果。将相关代码从`startCapturing`移至`getFileLength`.

# mongodb - 我不小心在 MongoDB 中命名了一个集合“stats”，现在无法重命名它

> ID：12960512
> 
> 赞同：15
> 
> 时间：2012-10-18T17:40:46.333
> 
> 标签：mongodb

哎呀。

我使用猫鼬，不小心创建了一个集合“统计信息”。直到几周后我才意识到这将成为一个问题，所以我现在需要重命名（而不仅仅是删除）集合......

但是，我的尝试遇到了一个可以预见的问题：

```
PRIMARY> db.stats.find();
Thu Oct 18 10:39:43 TypeError: db.stats.find is not a function (shell):1
PRIMARY> db.stats.renameCollection('statssnapshots');
Thu Oct 18 10:39:45 TypeError: db.stats.renameCollection is not a function (shell):1 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-18T17:51:25.037

尝试

```
db["stats"].find() 
```

和

```
db["stats"].renameCollection('statssnapshots'). 
```

你也可以做

```
db.getCollection("stats").find(). 
```

# ruby-on-rails - 在 Ruby on Rails 中使用 except 属性循环对象属性

> ID：12960514
> 
> 赞同：-1
> 
> 时间：2012-10-18T17:41:12.167
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, loops

我可以通过以下方式获取对象属性：

```
Class Object
 field :name
 field :email
 field :second_name
end 
```

有了这个循环：

```
<% @object.attributes.each do |attr_name| %>
....
<% end %> 
```

如果我有 3 个属性，我会得到 3 个属性。

我只想`attr_name`得到`name`和`email`属性

**我怎样才能在这个循环中丢弃或排除`field :second_name`**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:45:57.767

您可以像这样在循环中添加一个条件：

```
@object.attributes.each do |attr_name|
  unless attr_name.eql?('second_name')
    # Do stuff here
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T18:04:53.770

目前尚不清楚您包含或排除特定属性的标准是什么。

**如果你想要一个黑名单：**

```
(@object.attributes - [:second_name]).each{ ... }
# Alternatively:
@object.attributes.reject{ |n| n==:second_name }.each{ ... } 
```

**如果你想要一个白名单：**

```
(@object.attributes & [:name, :email, :socks]).each{ ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-20T19:43:43.390

黑名单：

```
exclude = [:a, :b, :c]
@object.attributes.reject { |k,v| only.include?(k.to_sym) } 
```

白名单：

```
only = [:a, :b, :c]
@object.attributes.select { |k,v| only.include?(k.to_sym) } 
```

# python - sklearn.mixture.DPGMM：意外结果

> ID：12960516
> 
> 赞同：6
> 
> 时间：2012-10-18T17:41:14.447
> 
> 标签：python, machine-learning, cluster-analysis, scikit-learn

我从 DPGMM 得到的结果不是我所期望的。例如：

```
>>> import sklearn.mixture
>>> sklearn.__version__
'0.12-git'
>>> data = [[1.1],[0.9],[1.0],[1.2],[1.0], [6.0],[6.1],[6.1]]
>>> m = sklearn.mixture.DPGMM(n_components=5, n_iter=1000, alpha=1)
>>> m.fit(data)
DPGMM(alpha=1, covariance_type='diag', init_params='wmc', min_covar=None,
   n_components=5, n_iter=1000, params='wmc',
   random_state=<mtrand.RandomState object at 0x108a3f168>, thresh=0.01,
   verbose=False)
>>> m.converged_
True
>>> m.weights_
array([ 0.2,  0.2,  0.2,  0.2,  0.2])
>>> m.means_
array([[ 0.62019109],
       [ 1.16867356],
       [ 0.55713292],
       [ 0.36860511],
       [ 0.17886128]]) 
```

我预计结果会更类似于香草 GMM；也就是说，两个高斯（大约值 1 和 6），权重不均匀（如 [0.625, 0.375]）。我预计“未使用”的高斯函数的权重接近于零。

我是否错误地使用了模型？

我也尝试过更改 alpha，但没有任何运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T15:03:14.933

与 sklearn 的 0.14.1 版本差别不大。我将使用以下代码打印 DPGMM 模型：

```
def pprint(model, data):
    idx = np.unique(model.predict(data))
    m_w_cov = [model.means_, model.weights_, model._get_covars()]
    flattened  = map(lambda x: np.array(x).flatten(), m_w_cov)
    filtered = map(lambda x: x[idx], flattened)
    print np.array(filtered) 
```

此函数过滤掉冗余（空）分量，即那些未用于预测的分量，并打印均值、权重和协变量。

如果使用 OP 问题的数据进行多次尝试，可以找到两种不同的结果：

```
>>> m = sklearn.mixture.DPGMM(n_components=5, n_iter=1000, alpha=1).fit(data)
>>> m.predict(data)
array([0, 0, 0, 0, 0, 1, 1, 1])
>>> pprint(m, data)
[[  0.62019109   1.16867356]
 [  0.10658447   0.19810279]
 [  1.08287064  12.43049771]] 
```

和

```
>>> m = sklearn.mixture.DPGMM(n_components=5, n_iter=1000, alpha=1).fit(data)
>>> m.predict(data)
array([1, 1, 1, 0, 1, 0, 0, 0])
>>> pprint(m, data)
[[  1.24122696   0.64252404]
 [  0.17157736   0.17416976]
 [ 11.51813929   1.07829109]] 
```

那么可以猜测，意外结果的原因在于一些中间结果（在我们的例子中为 1.2）在类之间迁移，并且方法无法推断出正确的模型参数。一个原因是集群参数 alpha 对于我们的集群来说太大了，每个集群只包含 3 个元素，我们可以通过减少这个参数来更好地尝试，`0.1`会得到更稳定的结果：

```
>>> m = sklearn.mixture.DPGMM(n_components=5, n_iter=1000, alpha=.1).fit(data)
>>> m.predict(data)
array([1, 1, 1, 1, 1, 0, 0, 0]) 
```

但根本原因在于 DPGMM 方法的随机性，在小簇的情况下，该方法无法推断模型结构。如果我们将观察结果扩展 4 次，情况会变得更好，并且方法的行为也更符合预期：

```
>>> m = sklearn.mixture.DPGMM(n_components=5, n_iter=1000, alpha=1).fit(data*4)
>>> pprint(m, data)
[[ 0.90400296  5.46990901]
 [ 0.11166431  0.24956023]
 [ 1.02250372  1.31278926]] 
```

总之，注意方法拟合参数，并意识到某些 ML 方法在小数据集或倾斜数据集的情况下效果不佳。

# opengl-es - 如何绕过 GL_MAX_TEXTURE_SIZE 进行图像处理

> ID：12960518
> 
> 赞同：4
> 
> 时间：2012-10-18T17:41:25.427
> 
> 标签：opengl-es, glsl, post-processing

我正在开发一个依赖于 OpenGL ES 2.0 的图像处理程序，因此它可以部署在大量设备上。在很多情况下，人们会使用小图像，这不会绕过纹理限制，但是对于每个方向都有数千像素的大图像，它可能无法在多个设备上渲染。

我的第一个想法是将图像分割成更小的方块并单独渲染每个方块，这适用于简单的程序，但对于需要基于相邻像素值进行渲染的任务，例如卷积或扭曲效果，这还不够。

Photoshop 如何通过在其应用程序中为许多效果添加 OpenGL 支持来保持其 300,000 x 300,000 尺寸的能力？

对大于 GL_MAX_TEXTURE_SIZE 的图像执行后处理任务的最有效方法是什么？

在发送图像进行处理之前，仅渲染到可视区域并重新缩放图像以进行缩放？但这需要我重新处理图像以进行简单的放大/缩小和平移图像。我看到这种方法的唯一问题是无法将图像导出为完整质量的图像，因此这种方法在用户尝试保存他们的工作之前效果很好。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-19T01:33:32.117

问题是opengl用于实时渲染而不适合图像处理，最好的选择是使用CPU程序及其所有好处（C / C ++，线程，无纹理限制，..）只考虑opengl的情况“帮助” CPU（如 NVIDIA CUDA）。

# python - python中使用鸭子打孔的不可变枚举

> ID：12960522
> 
> 赞同：0
> 
> 时间：2012-10-18T17:41:42.810
> 
> 标签：python

我正在尝试在 python 中创建一个枚举。我见过几种解决方案（@alec thomas 的第二个答案 [最](https://stackoverflow.com/questions/36932/whats-the-best-way-to-implement-an-enum-in-python)让我感兴趣），但我想让枚举不可变。我找到了一个不可变的[python 配方](http://code.activestate.com/recipes/413486-first-class-enums-in-python/)，但我想要一个类似 dict 的键/值关联。

我试图使用打鸭子来向类添加属性，`AttributeError`如果您尝试调用`fset`或`fdel`属性，则会抛出一个。

`fget`我在定义属性的功能时遇到了麻烦。这是我到目前为止的代码：

```
def enum(*sequential, **named):
    # Build property dict
    enums = dict(zip(sequential, range(len(sequential))), **named)

    # Define an errorhandler function
    def err_func(*args, **kwargs):
        raise AttributeError('Enumeration is immutable!')

    # Create a base type
    t = type('enum', (object,), {})

    # Add properties to class by duck-punching
    for attr, val in enums.iteritems():
        setattr(t, attr, property(lambda attr: enums[attr], err_func, err_func))

    # Return an instance of the new class
    return t()

e = enum('OK', 'CANCEL', 'QUIT')
print e
print e.OK
print e.CANCEL
print e.QUIT

# Immutable?
e.OK = 'ASDF'  # Does throw the correct exception
print e.OK 
```

输出是：

```
<__main__.enum object at 0x01FC8F70>
Traceback (most recent call last):
  File "enum.py", line 24, in <module>
    print e.OK
  File "enum.py", line 17, in <lambda>
    setattr(t, attr, property(lambda attr: enums[attr], err_func, err_func))
KeyError: <__main__.enum object at 0x01FC8F70> 
```

也许这不是创建枚举的最佳方式，但它很短，我想更多地探索整个打鸭/打猴子的概念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:00:34.220

您的直接问题是`getter`a作为唯一参数，而不是. 因此，您应该使用类似的东西。`property``self``attr``lambda self: val`

但是，这不起作用，因为`lambda`绑定了*name* `val`，它在迭代之间发生变化。所以你需要以某种方式包装它：

```
def getter(val):
    return lambda self: val

for attr, val in enums.iteritems():
    setattr(t, attr, property(getter(val), err_func, err_func)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:14:02.333

最终实现（感谢@nneonneo）。

*   检查重复的枚举键
*   检查枚举是否为空
*   不允许删除或修改枚举项

    ```
    def enum(*sequential, **named):
        # Check for duplicate keys
        names = list(sequential)
        names.extend(named.keys())
        if len(set(names)) != len(names):
            raise KeyError('Cannot create enumeration with duplicate keys!')

        # Build property dict
        enums = dict(zip(sequential, range(len(sequential))), **named)
        if not enums:
            raise KeyError('Cannot create empty enumeration')

        # Function to be called as fset/fdel
        def err_func(*args, **kwargs):
            raise AttributeError('Enumeration is immutable!')

        # function to be called as fget
        def getter(cls, val):
            return lambda cls: val

        # Create a base type
        t = type('enum', (object,), {})

        # Add properties to class by duck-punching
        for attr, val in enums.iteritems():
            setattr(t, attr, property(getter(t, val), err_func, err_func))

        # Return an instance of the new class
        return t() 
    ```

# iphone - 如何获取 Plist 数据并在 UITableView 中显示？

> ID：12960523
> 
> 赞同：0
> 
> 时间：2012-10-18T17:41:43.403
> 
> 标签：iphone, xcode, uitableview, plist

我在 plist 中有一些数据。首先我想获取 plist 数据，然后在 UITableview 中显示。我的 plist 序列是这样的

**根............字典**

**项目 0-9.......数组。**![在此处输入图像描述](../Images/ab0df44e22c0e7d101bf3e03df658be9.png)

在 ViewDidload 我的代码是这样的。

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"Movies" 
                                                 ofType:@"plist"];

NSDictionary *dic = [[NSDictionary alloc] initWithContentsOfFile:path]; 
```

这让我很困惑，如何将我的 Array 项传递给 UITableview。有人可以帮助我如何提前在 UITableview.Thanx 中显示所有这些数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:47:34.957

如果要获取 A 部分的数组：

```
NSArray *arrayForA = (NSArray *)[dic objectForKey:@"A"]; 
```

然后，您将拥有可以在 UITableView 中显示的项目数组。B 和 C 相同。

如果您想将它们显示为部分，那么我将构建一个数组数组。

如果您在实际制作和显示 UITableView 时需要帮助，请查看 Apple 的[Table View Programming Guide](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/AboutTableViewsiPhone/AboutTableViewsiPhone.html#//apple_ref/doc/uid/TP40007451)。

# javascript - 将 div 滑离页面的不同方法

> ID：12960526
> 
> 赞同：-1
> 
> 时间：2012-10-18T17:41:50.460
> 
> 标签：javascript, jquery

在过去的几个月里，我一直在页面边缘显示/隐藏一些东西，如下所示：

```
$('#myDiv').animate({ width: 'toggle' }, 1000); 
```

这工作得很好，它很好地将 div 滑离页面。

有关完整的实现，请参阅此处：http: [//jsfiddle.net/9Vmj7/](http://jsfiddle.net/9Vmj7/)

当您单击链接时，请注意文本如何挤压和挤压直到它离开屏幕？我需要一个不这样做的实现。

现在，我知道上面使用的代码`"width: 'toggle'"`实际上意味着它在 1000 毫秒内从 100% 宽度下降到 0% 宽度。

我正在寻找一种实际上不会缩小 div 的实现，而只是将 div 移出屏幕而没有任何视觉上的“时髦”。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:50:55.413

**更新**版本以跨浏览器正常工作：

```
$(function() {
    var toHide = $('#myBox').css('overflow', 'hidden').wrapInner('<div></div>'),
        toHideInner = toHide.children(), //the just created <div> element
        width = toHide.outerWidth(),
        i = 0;
    $('#button').click(function(e) {
        e.preventDefault();
        i++;
        toHideInner.stop(true).animate({
            marginRight: (i % 2) ? -width : 0
        }, 1000);
    });
}); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/9Vmj7/19/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:53:48.160

你能用jQueryUI吗

[这是一个使用 jQuery UI 和幻灯片的小提琴](http://jsfiddle.net/schapman/9Vmj7/13/)

```
$('#button').click(function(e) {

    e.preventDefault();

    if ($("#myBox").is(":visible")) {
        $('#myBox').hide("slide", { direction: "right" }, 1000);
    }
    else {
        $('#myBox').show("slide", { direction: "right" }, 1000);
    } 
```

});​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T17:55:11.950

如何使用这个：

**HTML：**

```
<div class="parent">
    <div id="myBox">
        I am bad and resize when I animate.
    </div>
</div>

<a href="" id="button">click me</a>​ 
```

**CSS：**

```
#spacer
{
    margin-top:50px;
}

div.parent{
    overflow: hidden;
}

div#myBox{
    float:right;
}
​ 
```

**JS：**

```
$('#button').toggle(function(e) {
    e.preventDefault();
    pxl = $('#myBox').width();
    $('#myBox').stop().animate({
        'margin-right': -pxl+'px'
    }, 1000);
}, function(e){
     e.preventDefault();
    $('#myBox').stop().animate({
        'margin-right': 0
    }, 1000);    
});​ 
```

[jsFiddle](http://jsfiddle.net/qolami/9Vmj7/11/)

# python - Python - 如何分割和加入音频？

> ID：12960535
> 
> 赞同：0
> 
> 时间：2012-10-18T17:42:22.197
> 
> 标签：python, audio, join, split

如果我在一个目录中有多个音频文件，我将如何编写一个脚本，从每个文件中获取 10 秒到 20 秒的音频并将这 10 秒的块连接到一个音频文件中？任何特定的包、扩展等会有所帮助吗？（我更喜欢通用文件类型的答案，但如果需要特定格式，让我们使用 mp3）

我更喜欢 python，但如果你有其他语言的简单解决方案，请告诉我。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:01:11.557

我使用 bash 脚本中的 mp3wrap 来连接 mp3。mp3wrap 包包含一个 mp3splt 可执行文件。

它不是 Python，但您可以从 Python 对它们进行子处理。它们似乎是用 C 语言编写的，基于快速 ldd。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T16:03:38.817

如果您更喜欢自己制作解决方案，也可以将 MP3 文件粘合在一起。它们仅由一系列帧组成，因此如果您将每个文件逐字节复制到唯一文件，它应该可以正常工作。对于音频提取，如果可以依赖外部程序，可以使用FFmpeg，`-t`和`-tt`选项，配合`-acodec copy`开关，保留原始数据。

# php - 使用 PHP 5 创建到 Paypal 服务器的 HTTPS 连接

> ID：12960539
> 
> 赞同：1
> 
> 时间：2012-10-18T17:42:33.947
> 
> 标签：php, https, http-headers, payflowpro

我正在尝试将 payflow pro 与现有网站集成。

PHP 没有 SDK，与 PHP 的集成需要使用 Payflow HTTPS 接口。开发指南（https://cms.paypal.com/cms_content/AU/en_AU/files/developer/PP_WPPPF_HTTPSInterface_Guide.pdf）说我需要编写代码来创建到 Paypal 服务器的 HTTPS 连接。我应该使用什么方法来执行此操作，以及在建立连接后如何提交 HTTPS 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:45:22.730

只需使用任何常规方法发出 HTTP 请求，例如 curl 或`file_get_contents`. 如果底层传输层支持 SSL 安全连接，则向`https://...`URL 发出请求将建立 SSL 安全连接；否则传输层将失败，说它无法建立 HTTPS 连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:48:19.990

我终于能够在这里找到一个例子： [https ://ppmts.custhelp.com/app/answers/detail/a_id/618](https://ppmts.custhelp.com/app/answers/detail/a_id/618)

```
<?
$submiturl = "https://pilot-payflowpro.paypal.com/transaction:443/";

$plist="USER=****&VENDOR=****&PARTNER=****&PWD=****&TENDER=C&" .
        "TRXTYPE=A&ACCT=5105105105105100&" .
        "EXPDATE=1209&STREET= 123 MainSt.&CVV2=123&AMT=1.00";

$request_id = date('YmdGis');
$user_agent = "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)";

// Here's your custom headers; adjust appropriately for your setup:
$headers[] = "Content-Type: text/namevalue";    // either text/namevalue or text/xml
$headers[] = "X-VPS-Timeout: 30";
$headers[] = "X-VPS-VIT-OS-Name: Linux";        // Name of your Operating System (OS)
$headers[] = "X-VPS-VIT-OS-Version: RHEL 4";    // OS Version
$headers[] = "X-VPS-VIT-Client-Type: PHP/cURL"; // Language you are using
$headers[] = "X-VPS-VIT-Client-Version: 0.01";  // For your info
$headers[] = "X-VPS-VIT-Client-Architecture: x86";  // For your info
$headers[] = "X-VPS-VIT-Integration-Product: MyApplication";  // For your info,  application name
$headers[] = "X-VPS-VIT-Integration-Version: 0.01"; // Application version
$headers[] = "X-VPS-Request-ID: " . $request_id;

$user_agent = "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $submiturl);
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_USERAGENT, $user_agent);
curl_setopt($ch, CURLOPT_HEADER, 1); // tells curl to include headers in response
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); // return into a variable
curl_setopt($ch, CURLOPT_TIMEOUT, 45); // times out after 45 secs
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); // this line makes it work under https
curl_setopt($ch, CURLOPT_POSTFIELDS, $plist); //adding POST data
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST,  2); //verifies ssl certificate
curl_setopt($ch, CURLOPT_FORBID_REUSE, TRUE); //forces closure of connection when done
curl_setopt($ch, CURLOPT_POST, 1); //data sent as POST

// $info = curl_getinfo($ch); //grabbing details of curl connection

$result = curl_exec($ch);
$headers = curl_getinfo($ch);
curl_close($ch);
echo $result;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T04:05:40.350

你有三个选择：

1) 如果您喜欢冒险，可以使用 OSCommerce PHP PayFlow SDK 作为起点：[https ://www.x.com/sites/default/files/OsC23PayPalPayFlow.zip](https://www.x.com/sites/default/files/OsC23PayPalPayFlow.zip)

2) 您可以通读 payflow 开发指南并进行自己的手工 API 调用： [https ://cms.paypal.com/cms_content/US/en_US/files/developer/PP_PayflowPro_Guide.pdf](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_PayflowPro_Guide.pdf)

3) 您可以试一试集成向导。我将为您自动生成代码：[https ://www.paypal-labs.com/integrationwizardccpayflow/main.php](https://www.paypal-labs.com/integrationwizardccpayflow/main.php)

# javascript - jQuery UI Datepicker中的滚动时间选择器？

> ID：12960542
> 
> 赞同：3
> 
> 时间：2012-10-18T17:42:49.037
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-datepicker, mobiscroll

我正在一个项目中大量使用 jQuery 的 UI Datepicker。但是，其中一个字段也需要时间，并且客户希望在原始日期选择器之外使用类似 iPhone 的时间选择器。（否则，我会使用它——http: [//trentrichardson.com/examples/timepicker/——](http://trentrichardson.com/examples/timepicker/)它很棒，但没有所需的视觉风格。）

我找到了这个插件——http: [//demo.mobiscroll.com/#demo=time&mode=mixed&display=inline&theme=jqm——](http://demo.mobiscroll.com/#demo=time&mode=mixed&display=inline&theme=jqm)我正在以某种方式将它与 jQuery UI 插件集成，将它放在日历表和除了从日期选择器推送的日期之外，以某种方式从这里发送数据。

这是我的日期选择器初始化代码：

```
<script type="text/javascript" src="/js/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="/js/jquery-ui-1.8.18.custom.min.js"></script>

function datepickerAdd() {
        $('input[name=valueTextField]').addClass('datepicker');

            $( ".datepicker" ).datepicker({
                defaultDate: "+1w",
                maxDate: "0d+",
                dateFormat: "m/d/yy"
                });

                $(function(){
                    $('#i').scroller({
                        preset: 'time',
                        theme: 'jqm',
                        display: 'inline',
                        mode: 'mixed'
                    });    
                });

            $('.datepicker').datepicker().bind('click keyup', function() {
                if ($('#ui-datepicker-div :last-child').is('table'))
                    $('#ui-datepicker-div').append('<input id="i" name="i" style="display:none" />');
            });
    } 
```

我当然可以包含其他脚本，我只是将我的 jquery 库放在那里，这样它们就不会相互混淆。

任何人都可以帮助或有一个简单的选择吗？如果它不是 mobiscroll，那也很好，只是允许您滚动或使用箭头移动时间的东西就可以了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:23:05.833

您的 mobiscroll 初始化位于错误的位置（尚未在 DOM 中。这是一个建议的解决方案：

```
function addTimePicker() {
    setTimeout(function() {
        if ($('#ui-datepicker-div :last-child').is('table'))
            $('<div id="mobiscroll"></div>').appendTo($('#ui-datepicker-div')).scroller({
                preset: 'time',
                theme: 'ios',
                display: 'inline'
            });
    }, 10); 
}

$('#test').datepicker({
    defaultDate: "+1w",
    maxDate: "0d+",
    dateFormat: "m/d/yy",
    onSelect: function(dateText) {
        alert('Time: ' + $.scroller.formatDate('hh:ii A', $('#mobiscroll').scroller('getDate')));
    },
    beforeShow: addTimePicker,
    onChangeMonthYear: addTimePicker // when changing month, mobiscroll must be re-initialized
}); 
```

虽然这似乎是一个混乱的解决方案，但我不会将 jquery UI timepicker 与 mobiscroll 混合使用。Mobiscroll 也有 datetimepicker，或者坚持为 jquery UI 建议的 datetimepicker。

# java - 是否有任何 JPA 实现（或更广泛的 Java ORM 实现）支持可更新游标

> ID：12960545
> 
> 赞同：1
> 
> 时间：2012-10-18T17:42:59.820
> 
> 标签：java, hibernate, orm, eclipselink, ibatis

我希望可用于 Java 的对象/关系映射 (ORM) 工具之一能够满足这些要求：

*   使用 JPA 或本机 SQL 查询来获取大量行并将它们作为**实体**对象返回。
*   在我对其进行更改后，允许通过行（实体）和当前实体的持久性进行迭代。

我想逐行执行复杂的批处理操作（实际上我正在将文件中的已知良好数据与数据库中的数据进行比较和协调）。如果它更简单，我会求助于使用 JDBC 并执行一些 SQL；但在这种情况下，我确实从直接从 bean 到数据库中受益。

在 SQL 中，我可以使用可更新游标来有效地实现我的目标。

作为参考，我正在嵌入式 Java H2 环境中测试所有这些。

## JPA 查询

我的第一次天真的尝试是调用[Query.getResultList()](http://docs.oracle.com/javaee/5/api/javax/persistence/Query.html#getResultList%28%29)，它可以很好地返回实体 bean，但它们是“断开的”。如果我打电话`persistenceUnitUtil.getIdentifier(myEntity)`，那么它会抱怨它不是实体类型。

## 休眠

然后我调查了支持[ScrollableResults](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/ScrollableResults.html)的 Hibernate 。该界面允许我按名称获取各个列值，但不能获取实体。

## EclipseLink

接下来是支持[ScrollableCursor](http://www.eclipse.org/eclipselink/api/2.4/org/eclipse/persistence/queries/ScrollableCursor.html)的 EclipseLink 。我对这个抱有很好的希望，将它用于：

```
Query query = entityManager.createQuery(jpaQuery);
query.setHint("eclipselink.cursor", true);
CursoredStream cursoredStream = (CursoredStream)query.getSingleResult(); 
```

不幸的是`cursoredStream.next();`，再次返回实体的“断开连接”版本。所以，我看不到写回实体的方法。

## 结论

我目前正在研究至少让实体的@Id 作为查询的一部分传回的方法（不幸的是，我想保持工具的灵活性，有时我将字符串作为键，有时将组合键对象）。这至少可以让我遍历行然后单独查找和持久化每个实体。

但是，我更希望有一个游标支持的迭代器，它可以为我获取一个与 JPA 连接的实体，并允许我对其进行更改并保留它。

如果这不是 ORM 工具之一的已知功能，我可能不得不放弃并求助于老式的 JDBC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:48:20.577

伪代码 (C#)

```
void Execute(ISession session, string filepath)
{
    int page = 0;
    int pagesize = 5000;
    int batchindex = int.MaxValue;
    List<Entity> batch = new List<Entity>();

    TextReader file = new StreamReader(filepath)

    string line;
    while ((line = file.ReadLine) != null)
    {
        if (batchindex > batch.Count)
        {
            session.Flush();
            session.Clear();
            batch = session.CreateCriteria<Entity>()
                .AddOrder(Order.Asc(<same order as in file>))
                .SetFirstResult(page * pagesize)
                .SetMaxResults(pagesize)
                .List<Entity>();
            page++;
            batchindex = 0;
        }
        if (database has more rows than the file
        while (!LineIsForEntity(batch[batchindex], line))
        {
            batchindex++;
            // same if (batchindex > batch.Count) as above
        }

        UpdateEntity(batch[batchindex], line);
    }
    session.Flush();
    session.Clear();
} 
```

根据数据类型和上下文，可能会有更好的代码。

更新：使用 C# 进行随机访问，这在使用 (N)Hibernate 时应该是有效的

```
const int pagesize = 2000;
var nextbatch = Enumerable.Repeat(0, pagesize)
    .Select(_ => file.ReadLine())
    .TakeWhile(line => line != null);

string[] batch;
while ((batch = nextbatch.ToArray()).Length > 0)
{
    // ignore results, we only want the entities in cache
    session.QueryOver<Entity>()
        .WhereRestrictionOn(e => e.Id).In(batch.Select(line => ExtractId(line)).ToList())
        .List();

    foreach(string line in batch)
    {
        Update(session.Get<Entity>(ExtractId(line)), line);
    }
    session.Flush();
    session.Clear();
} 
```

正如评论中所说，将 session 的使用替换为 entityManager 并将 C# 构造替换为 Java。如果实体是独立的，您甚至可以将 while 与多个线程、会话并行化。

# objective-c - 如何在 Objective-C 项目中使用纯 C 文件？

> ID：12960552
> 
> 赞同：1
> 
> 时间：2012-10-18T17:43:18.680
> 
> 标签：objective-c, c, cocoa-touch, cocoa

简单的问题：

我创建了一堆 C 帮助程序，并试图将它们包含在一个项目中。我曾认为类似以下的事情是可以的。

MyFuncs.h

```
typedef struct
{
    float n;
} MyStruct;

float Operation(MyStruct ms); 
```

MyFuncs.m

```
#import "MyFuncs.h"

float Operation(MyStruct ms)
{
    return ms.n * ms.n;
} 
```

但是，我收到链接器错误“架构 i386 的未定义符号”和“从 x 引用的操作（MyStruct）”

是否有其他方法需要设置头文件/实现 C 文件才能工作？

注意：这是针对使用 Xcode 4.5 的 iOS 项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T17:49:15.583

不，使用纯 C 没有问题。通常，源文件将被命名`*.c`而不是`*.m`，但重命名`*.c`为`*.m`不应导致错误。

但是，有一个线索：

> `Operation(MyStruct)`引用自`x`

如果链接器知道函数参数的类型，那是因为您是从 C++ 代码调用函数。您必须`extern "C" { ... }`按如下方式输入标题：

```
#ifdef __cplusplus
extern "C" {
#endif

typedef struct
{
    float n;
} MyStruct;

float Operation(MyStruct ms);

#ifdef __cplusplus
}
#endif 
```

如果您的项目中没有任何 C++（包括 Objective-C++`*.mm`文件），那么这不是您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:49:20.950

如果它是纯 c，那么“MyFuncs.c”而不是“MyFuncs.m”会更好。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-10-18T17:47:49.717

调用扩展名为 .mm 的实现文件，如 MyFuncs.mm。

# python - 有时 STATIC_URL 不起作用？

> ID：12960553
> 
> 赞同：0
> 
> 时间：2012-10-18T17:43:20.193
> 
> 标签：python, html, css, django, twitter-bootstrap

我正在尝试在 Django 中使用 Twitter Bootstrap。我已经让它大部分工作了。我有一个正确链接 CSS 的 profile.html 模板，但我有一个没有预先添加 STATIC_URL 的 user_timeline.html 模板。

user_timeline.html 确实扩展了具有 CSS 链接的 base.html。

在我的 profile.html 我得到

```
 <link href="/static//css/bootstrap.css" rel="stylesheet"> 
```

哪个有效，但在 user_timeline.html 我得到

```
<link href="css/bootstrap.css" rel="stylesheet"> 
```

任何想法为什么它没有正确地预先设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:20:20.593

我猜你的一些 django 视图没有使用[RequestContext](https://docs.djangoproject.com/en/dev/ref/templates/api/#django.template.RequestContext)。在这种情况下，模板中不使用上下文处理器。所以 STATIC_URL 对于这些模板是未定义的。

# java - Java boolean getter "is" vs "are"

> ID：12960554
> 
> 赞同：114
> 
> 时间：2012-10-18T17:43:24.560
> 
> 标签：java, naming-conventions, boolean

我知道 Java 中布尔 getter 的约定是包含前缀“is”。

```
isEnabled
isStoreOpen 
```

但是如果主语是复数呢？也就是说，如果我不想知道一家商店是否营业，而是想知道所有商店是否都营业，该怎么办？

`isStoresOpen()`在英语中没有意义。

我很想写像这样的吸气剂：

```
areStoresOpen
areDogsCute
areCatsFuzzy 
```

我认为这是有道理的，但其他人告诉我，我应该接受它并放弃主语动词协议并使用`isStoresOpen`, `isDogsCute`, `isCatsFuzzy`。

无论如何，对于在复数主题上操作的布尔吸气剂，我应该怎么做？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2014-03-14T06:47:18.583

拥有足够体面的英语并遵循 Java 标准怎么样：

`isEveryStoreOpen()`或者`isEachCatCute()`

当对正确的词有疑问时，我总是喜欢查询词库。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-10-18T17:47:48.940

我不记得这是出自哪本书，但本质是代码的阅读次数比编写次数要多得多。为了可读性而写。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2012-10-18T17:46:40.107

约定是在 getter 方法前面加上“is”而不是变量本身。

例如

```
private boolean enabled;

public boolean isEnabled() {
    return enabled;
} 
```

和

```
private boolean storesOpen;

public boolean isStoresOpen() {
    return storesOpen;
} 
```

* * *

> isStoresOpen() 在英语中没有意义。

它在语法上可能没有意义，但它遵循约定并且看起来足够可读。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-10-18T18:07:13.527

Java Bean 规范说要使用`get`getter，除非它是`boolean`then use `is`。`are`是非标准的，不会被任何期望标准 Bean 命名的东西识别。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2012-10-18T17:47:32.070

许多工具期望`is`或`get`不太可能识别`are`.

尝试改写它们，例如`getDogsAreFuzzy()`或`getStoresAreOpen()`或类似的东西，以获得更好的兼容性和约定。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-10-25T08:09:47.370

# 你用什么编码，**英语**还是**Java**？

当我阅读 Java 代码时，我希望事情是结构化的。布尔方法开头`is`是一个很好的结构。

```
return 0; 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-10-18T17:46:51.947

**-** 也`isEnabled()`可以写成`getEnabled()`.`Java naming conventions`

**-**遵循命名约定只是一个好习惯，在您使用`Java Beans`.

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-10-18T17:47:27.157

一般来说，我认为代码应该尽可能易于阅读，以便方法几乎可以作为一个段落来阅读（正如 所支持的那样`Clean Code`）。因此，我将尽可能轻松地命名为发音/阅读的方法，并遵循`are`. `get`使用现代 IDE，无需专门查找/即可轻松找到方法`is`。

然而，库马尔对豆类提出了一个很好的观点。很多工具只会寻找`get`/ `is`。在那种情况下，我可能会考虑两种方法。一种便于阅读，一种用于工具使用。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-10-18T19:12:29.290

在您的问题中，您明确询问了吸气剂。getter 返回有关您的类的一个实例的一些信息。例如，您有一个类`Store`。现在，`isStoreOpen`对于 getter 来说，这是一个非常好的方法名称。

接下来，您提到了一种检查所有商店是否都营业的方法。这个方法根本不是一个 getter，因为它不返回关于一个实例的信息，而是返回所有实例的信息。当然除非有类`Stores`。如果是这种情况，您应该重新考虑您的设计，因为 Java 已经有存储大量实例的方法，例如数组或集合，因此您不必编写额外的类。

如果不是这种情况，那么这个方法名称就很好了。另一种选择可能只是`allStoresOpen`没有“是”。

TL;DR：如果您要处理多个实例，则它不是吸气剂。如果是，你的设计很糟糕。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-04-11T13:38:49.710

老实说，我会说绝对忘记`are*`并坚持使用`is*`. 将 the`"is"`视为变量的含义，并尽可能取一个更好的名称。

我想说 isStoresOpen 听起来还不错，但是如果听起来更适合您，您可以制作 isStoresAreOpen 。

但我的总体想法是遵守约定。它对 getter 使用“get”，对布尔类型使用“is”。我个人认为使用“is”有时已经存在问题。是的 - 它在“if”条件下看起来确实不错，但有时我只是在编码时写“get”并检查下拉列表中我需要的变量并开始想知道什么是错的以及为什么我找不到它，然后我意识到它以“是”开头...

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-10-18T17:48:53.150

在面向对象的编程中，这应该很少发生，如果有的话，因为你应该是一个单独的类，有它自己的或`Store`方法。如果您有更高的类型，请考虑分解到您实际使用的更原子级别。一般来说，对象在最低级别不应该是复数。`Cat``isOpen()``isFuzzy()`

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-06-09T10:36:43.097

**这个 StoresOpen 中的isStoresOpen()**似乎是复数，

当您遵循 Java 命名约定和 Java Beans 标准时，它们为布尔值和其他类型预定义了前缀，因此您应该遵循 Java Beans 命名约定。

让我们来谈谈你的观点当你看到**storesOpen**在英语中，是的，它看起来像复数。再次深入观察那个词，

这里

**根据英语语法，**storesOpen是复数，****

 ****isStoresOpen**的结果不是复数，而是单数，或者您可以说它是编程约定的标量。

它的出来是布尔值，只是真或假

不像你的英语复数陈述**true's** or **false's**

**不是true**或**false**的数组，也不是**true**或**false**的集合

 **所以，在这里我们可以说，这里我们关心的是从该布尔 bean 方法返回的值，而不是赋予类属性以指向现实世界实体的名称。

更重要的一点是，每当在类中使用此类布尔属性并且任何框架中的预定义库使用这些属性时，使用前缀 ' **is** ' 的框架用于检索布尔值，

为什么意味着它并不比你更聪明，因为你知道复数/单数，多路复用器等英语语法......****

# python - 使用 win32com.client 模块在 Python 中将 .XLSX 转换为 .XLS

> ID：12960556
> 
> 赞同：3
> 
> 时间：2012-10-18T17:43:31.747
> 
> 标签：python, xls, xlsx, win32com

我正在尝试找到一种将许多文件从 .xlsx 转换为 .xls 的方法，并且一直在使用 win32com.client 模块尝试 Python：

> ```
> import win32com.client
> xl = win32com.client.Dispatch("Excel.Application")
> wb = xl.Workbooks.Open(r"C:\Users\Kathleen\Desktop\Exp 1_1\A 1-1-1c.xlsx")
> wb.SaveAs(r"C:\Users\Kathleen\Desktop\Exp 1_1\A 1-1-1c.xls", FileFormat = 56)
> wb.Close()
> xl.Quit() 
> ```

我没有错误消息，但转换后的文件未显示在我为其设置的文件夹中。不知道我做错了什么。

我有 Windows 7、64 位并已下载：Win32 上的 Python 2.7.3（默认，2012 年 4 月 10 日，23:24:47）[MSC v.1500 64 位（AMD64）]

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:49:06.793

我不确定出了什么问题，您的代码对我有用。我使用了一个示例文件并对其进行了测试，它可以工作。也许尝试在 SaveAs 命令之前和之后插入 print("Checking") 和 input() 以检查是否执行了另存为命令。

# c# - 如何对格式化字符串中的参数进行日期格式化

> ID：12960557
> 
> 赞同：1
> 
> 时间：2012-10-18T17:43:32.513
> 
> 标签：c#, silverlight, xaml, string-formatting

是否可以使用字符串格式`string.Format("stuff happened on {0}", date)`，但也可以使用日期格式格式化日期？

我当然可以使用`string.Format("stuff {0}", date.ToString("d"))`；但是，当我`StringFormat`在这样的 XAML 绑定中使用时，这不会发生：

```
<TextBlock Text={Binding SomeDate,StringFormat='{}stuff happened on {0}'} /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:43:32.513

这可以使用格式 item 的鲜为人知的[可选部分来实现](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)。这些是*对齐*和*formatString* in `index [,alignment] [:formatString]`。

因此，我可以使用以下方法回答我的问题：

```
<TextBlock Text={Binding SomeDate,StringFormat='{}stuff happened on {0,10:d}'} /> 
```

# solaris - OracleSolaris 如何

> ID：12960564
> 
> 赞同：0
> 
> 时间：2012-10-18T17:44:09.227
> 
> 标签：solaris, ntfs, sunstudio

所有，我刚刚在我的桌面上安装了 OracleSolaris 并且有两个问题：

1.  这是带有 Windows 7 的双引导系统。我需要做什么才能让这些系统相互看到？我搜索了“OpenSolaris ntfs mount”，但看起来人们提到的 2 个软件包已经死了：FSWpart 和 FSWfsmisc。是否有从 Windows 7 执行此操作的解决方案？Samba 不是一个选项，因为我需要在同一台机器上访问。

2.  我还下载了 SunStudio 最新版本，据此[，](http://docs.oracle.com/cd/E24457_01/html/E21988/gemyt.html#scrolltoc)我需要运行“solarisstudio.sh”。问题是存档中没有这样的文件。我该怎么办？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:26:37.793

1：使用 fat32 文件系统创建第三个分区。两个操作系统都将本机访问它。Solaris 没有可靠的 ntfs 支持（我知道），Windows 根本没有 ZFS 支持。

2：您下载了 tarball，而不是您正在查看的文档的打包版本。只需运行类似：

```
bunzip2 < SolarisStudio12.3-solaris-x86-bin.tar.bz2 | tar xf -
mv solarisstudio12.3 /opt
export PATH=$PATH:/opt/solarisstudio12.3/bin 
```

你就完成了。

# ruby-on-rails - Cygwin :: bcrypt-ruby - 错误：无法构建 gem 原生扩展

> ID：12960566
> 
> 赞同：2
> 
> 时间：2012-10-18T17:44:20.737
> 
> 标签：ruby-on-rails, installation, gem, cygwin, bcrypt-ruby

当我尝试安装 bcrypt-ruby gem 时，出现以下错误

我在 Windows 7 32 上有 Cygwin

```
$ gem install bcrypt-ruby
Building native extensions.  This could take a while...
ERROR:  Error installing bcrypt-ruby:
    ERROR: Failed to build gem native extension.

    /home/Bartek/.rvm/rubies/ruby-1.9.3-p194/bin/ruby.exe extconf.rb
creating Makefile

make
compiling bcrypt_ext.c
compiling crypt.c
compiling crypt_blowfish.c
compiling crypt_gensalt.c
compiling wrapper.c
In file included from wrapper.c:27:0:
/home/Bartek/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby/backward/util.h:2:2:     warnin                                  g: #warning use "ruby/util.h" instead of bare         "util.h"
linking shared-object bcrypt_ext.so
bcrypt_ext.o:bcrypt_ext.c:(.text+0x29): undefined reference to `_ruby_bcrypt'
collect2: ld returned 1 exit status
Makefile:207: recipe for target `bcrypt_ext.so' failed
make: *** [bcrypt_ext.so] Error 1

Gem files will remain installed in /home/Bartek/.rvm/gems/ruby-1.9.3-        p194@ckdatabase/gems/bc                                  rypt-ruby-3.0.1 for inspection.
Results logged to /home/Bartek/.rvm/gems/ruby-1.9.3-p194@ckdatabase/gems/bcrypt-ruby-    3.0.1/e                                  xt/mri/gem_make.out 
```

有人知道该怎么做吗？ **我什么都试过了。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T05:44:03.753

复制评论中的答案，以便从“未回答”过滤器中删除此问题：

> 如果我们让`rvm use system`一切正常

~ 每个[Bartek S的回答](https://stackoverflow.com/users/766633/bartek-s)

# sql - 将表名插入列

> ID：12960568
> 
> 赞同：1
> 
> 时间：2012-10-18T17:44:28.627
> 
> 标签：sql, sqlite

我有三张桌子。前两个表具有相似的数据，但它们来自不同的来源，并且它们的列数不同。我正在使用第三个表从其他两个表中收集数据。我想要第三个表中的一列，其中包含数据来自的表的名称。

示例：table_1 按以下顺序包含以下数据。

> （ID、data_1、data_2、data_3、data_4、data_5）

table_2 按以下顺序包含以下数据。

> （ID、data_3、data_1、data_5、data_2、data_4、data_6、data_7）

我从两个表中收集了我需要的数据，table_3 的列数与 table_1 的列数相同。

首先来自 table_1

```
INSERT INTO table_3
SELECT * FROM table_1 
```

然后从 table_2

```
INSERT INTO table_3
SELECT ID, data_1, data_2, data_3, data_4, data_5
FROM table_2 
```

这是有效的，我对此没有任何问题。我想在 table_3 中创建一个列，但是它包含从中获取数据的表的名称。我不知道该怎么做。我向 table_3 添加了另一列，因此它现在有一个 col_6，然后我认为我可以手动更新该列，但它不起作用。这是我尝试过的。

```
UPDATE table_3
SET col_6 = 'table_1'
WHERE table_3.col_1 = table_1.col_1

UPDATE table_3
SET col_6 = 'table_2'
WHERE table_3.col_1 = table_2.col_1 
```

对此的任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T17:47:29.810

AFAIK，无法自动执行此操作

但你可以这样做：

```
 insert into table_3
    select t.*, 'table_1'
    from table_1 
```

不过，我不确定您的更新语句中的 Column_1 是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:52:27.890

信用应该去user194076，但这里有一个更完整的答案：

首先来自 table_1

```
INSERT INTO table_3
SELECT *, 'table_1' FROM table_1 
```

然后从 table_2

```
INSERT INTO table_3
SELECT ID, data_1, data_2, data_3, data_4, data_5, 'table_2'
FROM table_2 
```

# php - MySQL批量插入通过PHP

> ID：12960569
> 
> 赞同：3
> 
> 时间：2012-10-18T17:44:29.593
> 
> 标签：php, mysql

在 PHP 中，我从 URI 中提取大量 JSON 数据，然后通过内置`json_decode`函数将其序列化为关联的 PHP 数组。

然后，我创建一个数组：

```
$inserts = array(); 
```

我遍历 JSON 关联数组，`$inserts`为 JSON 数组中的每个项目添加一个新的键/值对到我的数组中：

```
foreach($JSON_data as $key => $value) {     
    $inserts[] = "(".mysql_real_escape_string($value["prop1"]).","
                    .mysql_real_escape_string($value["prop2"]).","
                    .mysql_real_escape_string($value["prop3"]).")";
} 
```

然后，我只需通过内爆我已经准备好的插入来执行批量插入：

```
mysql_query("INSERT INTO `MyTable` (`col1`,`col2`,`col3`) VALUES ".implode(",",$inserts)); 
```

不管怎样，我发现`mysql_*`家庭不再建议使用。所以我想知道这种类型的模式应该如何使用准备好的语句来完成，或者使用新的接受的构造是什么？我的担忧是消除 SQL 注入，并在少于 10 个并发开放连接（最好是 1 个）的情况下尽快*更新MySQL。*此外，为了使事情尽可能简单和快速。

或者，如果有执行此类批量事务的新模式或首选方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T17:47:48.457

如果您使用准备好的语句，则可以`$JSON_data`使用 foreach 循环遍历数组并`INSERT`使用该数据块运行。

使用准备好的语句将减少构建查询的开销，只需在循环的每次迭代中将新数据发送到数据库。

```
$query = mysqli_prepare("INSERT INTO `MyTable` (`col1`,`col2`,`col3`)
    VALUES(?,?,?)");

foreach($JSON_data as $key => $value) {
    $query->bind_param('sss',$value["prop1"],$value["prop2"],$value["prop3"];
    $query->execute();
} 
```

请注意，第一个参数`bind_param()`告诉它您将绑定多少个值，以及每个值的类型。
`s`对应字符串数据，`i`对应整数数据，`d`对应双精度（浮点数），`b`对应二进制数据。

另一个警告，**不要**引用任何字符串数据，因为`s`数据类型告诉 mysql 期待一个字符串。如果你`?`在准备好的语句中引用，它会告诉你参数的数量是错误的。如果引用字符串，它将在 mysql 中被引用。

**编辑：**

如果您想使用相同的范例（在一个查询中插入多行），有很多方法可以做到。一种方法是创建一个类，该类将聚合`bind_param`调用并在执行查询时执行一个 bind_param。代码在[这里](http://www.php.net/manual/en/mysqli-stmt.bind-param.php#110363)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:48:08.310

使用[Mysqli](http://www.php.net/manual/en/book.mysqli.php)或[PDO](http://www.php.net/manual/en/ref.pdo-mysql.php)

以下是您将如何在 Mysqli 中使用准备好的语句

```
<?php

//Basic layout to using parametized queries in PHP to prevent Bobby-tables

$VARIABLE = "Some Data";

$mysqli = new mysqli("SERVER","USER","PASSWORD","DATABASE");

$query = $mysqli->prepare("SELECT COLUMN_LIST FROM TABLE WHERE COLUMN = ?");
$query->bind_param('s',$VARIABLE); //'s' for string, use i for int d for double
$query->execute();

//Get results
$query->bind_result($VARIABLE_NAMES_MATCHING_COLUMN_NAMES_GO_HERE);
$query->fetch();

echo $VARIABLE_LIST_MATCHING_COLUMN_LIST;

?> 
```

# java - 用于生成模型矩阵的 Java 库

> ID：12960572
> 
> 赞同：4
> 
> 时间：2012-10-18T17:44:38.020
> 
> 标签：java, machine-learning, formula, transformation, modeling

我正在寻找一个可以使用公式将输入数据转换为模型矩阵的 Java 库。该公式不是一个简单的算术方程，而是描述变量之间的相互作用，将分类变量映射到适当的数值范围，并在输入向量/矩阵上生成变换。

例如，R 具有以下`model.matrix`功能，它允许您通过描述高级变量之间的交互来转换输入数据`formula`。

## R中的简单示例

输入数据：

```
electric_usage,temperature,time_of_day
30,85,morning
35,80,evening 
```

公式：

```
electric_usage ~ temperature * time_of_day 
```

这是公式的简写：

```
electric_usage ~ temperature + time_of_day + (temperature : time_of_day) 
```

例如，在 R 中：

```
> model.matrix(
    electric_usage ~ temperature * time_of_day,
    data.frame(
        electric_usage=c(30,35),
        temperature=c(85,80),
        time_of_day=c("morning", "evening")
    )
  )

  (Intercept) temperature time_of_daymorning temperature:time_of_daymorning
           1          85                  1                             85
           1          80                  0                              0 
```

请参阅 R 文档： [http ://stat.ethz.ch/R-manual/R-patched/library/stats/html/model.matrix.html](http://stat.ethz.ch/R-manual/R-patched/library/stats/html/model.matrix.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T23:52:55.330

如果您正在寻找看起来像 Matlab 的 Java 版本，那么您可以简单地复制和粘贴它是不可能的......我怀疑是否有任何软件包可以采用您提到的公式。

不过，请查看[http://code.google.com/p/efficient-java-matrix-library/](http://code.google.com/p/efficient-java-matrix-library/)。乍一看，您的矩阵运算似乎非常简单，可以使用该库进行编程。

不过，您将需要通过代码创建矩阵，以便对其进行适当的构图。请参阅[http://code.google.com/p/efficient-java-matrix-library/wiki/MatrixInputOutput](http://code.google.com/p/efficient-java-matrix-library/wiki/MatrixInputOutput)以帮助如何制作或可视化以及总体思路。您应该阅读那里的 wiki。

# python - pandas read_csv index_col=None 不使用每行末尾的分隔符

> ID：12960574
> 
> 赞同：67
> 
> 时间：2012-10-18T17:44:44.100
> 
> 标签：python, pandas

我正在阅读“用于数据分析的 Python”一书，在“示例：2012 年联邦选举委员会数据库”部分将数据读取到 DataFrame 时遇到了麻烦。问题是其中一列数据总是被设置为索引列，即使 index_col 参数设置为 None。

这是数据的链接：[http](http://www.fec.gov/disclosurep/PDownload.do) ://www.fec.gov/disclosurep/PDownload.do 。

这是加载代码（为了节省检查时间，我设置了 nrows=10）：

```
import pandas as pd
fec = pd.read_csv('P00000001-ALL.csv',nrows=10,index_col=None) 
```

为了简短起见，我排除了数据列输出，但这是我的输出（请不要索引值）：

```
In [20]: fec

Out[20]:
<class 'pandas.core.frame.DataFrame'>
Index: 10 entries, C00410118 to C00410118
Data columns:
...
dtypes: float64(4), int64(3), object(11) 
```

这是本书的输出（同样不包括数据列）：

```
In [13]: fec = read_csv('P00000001-ALL.csv')
In [14]: fec
Out[14]:
<class 'pandas.core.frame.DataFrame'>
Int64Index: 1001731 entries, 0 to 1001730
...
dtypes: float64(1), int64(1), object(14) 
```

我输出中的索引值实际上是文件中的第一列数据，然后将所有其余数据向左移动一个。有谁知道如何防止这列数据被列为索引？我希望索引只是 +1 增加整数。

我对 python 和 pandas 还很陌生，所以对于给您带来的不便，我深表歉意。谢谢。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-10-18T18:19:30.690

## 快速回答

当您在每行末尾有分隔符时使用`index_col=False`而不是`index_col=None`关闭索引列推断并丢弃最后一列。

## 更多详情

查看数据后，每行末尾都有一个逗号。还有这句话（自创建这篇文章以来，文档已被编辑）：

> index_col：列号、列名或列号/名称列表，用作生成的 DataFrame 的索引（行标签）。默认情况下，它将不使用任何列对行进行编号，除非数据列比标题多一个，在这种情况下，第一列被视为索引。

从[文档](https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html#column-and-index-locations-and-names)中可以看出，pandas 认为您有 n 个标题和 n+1 个数据列，并将第一列视为索引。

* * *

编辑 2014 年 10 月 20 日 - 更多信息

我发现[了另一个有价值的条目](https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html#index-columns-and-trailing-delimiters)，专门关于尾随限制器以及如何简单地忽略它们：

> 如果文件的数据列数比列名数多，则第一列将用作 DataFrame 的行名： ...
> 
> 通常，您可以使用 index_col 选项实现此行为。
> 
> 当文件在每个数据行的末尾准备好分隔符时，会出现一些例外情况，这会使解析器感到困惑。要显式禁用索引列推断并丢弃最后一列，请传递 index_col=False: ...

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2017-06-09T15:29:41.560

回复：craigts 的回复，对于在 index_col 中使用 False 或 None 参数时遇到问题的任何人，例如在您试图摆脱范围索引的情况下，您可以改为使用整数来指定要使用的列作为索引。例如：

```
df = pd.read_csv('file.csv', index_col=0) 
```

以上将第一列设置为索引（而不是在我的“常见情况”中添加范围索引）。

# 更新

鉴于这个答案的受欢迎程度，我想我会添加一些上下文/演示：

```
# Setting up the dummy data
In [1]: df = pd.DataFrame({"A":[1, 2, 3], "B":[4, 5, 6]})

In [2]: df
Out[2]:
   A  B
0  1  4
1  2  5
2  3  6

In [3]: df.to_csv('file.csv', index=None)
File[3]:
A  B
1  4
2  5
3  6 
```

不使用 index_col 或使用 None/False 读取都将产生一个范围索引：

```
In [4]: pd.read_csv('file.csv')
Out[4]:
   A  B
0  1  4
1  2  5
2  3  6

# Note that this is the default behavior, so the same as In [4]
In [5]: pd.read_csv('file.csv', index_col=None)
Out[5]:
   A  B
0  1  4
1  2  5
2  3  6

In [6]: pd.read_csv('file.csv', index_col=False)
Out[6]:
   A  B
0  1  4
1  2  5
2  3  6 
```

但是，如果我们指定“A”（第 0 列）实际上是索引，我们可以避免范围索引：

```
In [7]: pd.read_csv('file.csv', index_col=0)
Out[7]:
   B
A
1  4
2  5
3  6 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-07T02:05:44.730

如果 pandas 将您的第一行视为标题，您可以使用 header = none ：

```
df = pd.read_csv ("csv-file.csv", header=None) 
```

这样，熊猫会将您的第一行视为任何行。

# javascript - 如何将对象数组传递给玉模板？

> ID：12960575
> 
> 赞同：4
> 
> 时间：2012-10-18T17:44:46.900
> 
> 标签：javascript, jquery, node.js, express, pug

我想将一组对象从 mongodb 传递给客户端...

这是对象

```
var objeto_img=
                            {
                                name:'name of the file',
                                image:'image.jpg url',
                                title:'title of the image',
                                caption:'descripcion of the image',
                                link:"#",
                            }; 
```

在某些配置文件中，有很多图像，所以是这样的对象数组

```
[var objeto_img=
                            {
                                name:'name of the file',
                                image:'image.jpg url',
                                title:'title of the image',
                                caption:'descripcion of the image',
                                link:"#",
                            },var objeto_img=
                            {
                                name:'name of the file',
                                image:'image.jpg url',
                                title:'title of the image',
                                caption:'descripcion of the image',
                                link:"#",
                            },var objeto_img=
                            {
                                name:'name of the file',
                                image:'image.jpg url',
                                title:'title of the image',
                                caption:'descripcion of the image',
                                link:"#",
                            };] 
```

这是服务器代码

```
res.render('index/perfil_publicacion_contenido',
    {
        datos:datosRecibidos
    }) 
```

datosRecibidos 是来自 mongodb 的对象数组

我试图在玉里面放一个变量

```
input(type='hidden',id='imagenes',value=datos.img) 
```

但是当我尝试获取对象时

```
var fotos=$('#imagenes1').val();
            for(foto in fotos)
            {
                console.log(fotos[foto].image)
                console.log(fotos[foto].name)
                console.log(fotos[foto].caption)
                console.log(fotos[foto].title)
            } 
```

控制台日志打印未定义

这是为什么？？？我怎样才能在客户端正确地从 db 获取信息？？？全部

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T21:02:42.910

如果我理解正确，您希望将对象数组序列化为`value`输入。试试这个：

```
- var jsonString = JSON.stringify(datos)
input(type='hidden',id='imagenes',value=jsonString) 
```

第一行应该将对象数组转换为字符串，然后可以将其放入输入的值中。

然后，当您读取该值时，您将不得不解析 JSON。

```
var fotos = $.parseJSON($('#imagenes1').val()); 
```

我假设您的使用`$`暗示您正在使用 jQuery。

**更新：解释**

如果您希望服务器内存中的对象可供浏览器中运行的 Javascript 使用，则必须将该对象“写入”到页面上。该过程正式称为序列化，而使用 Javascript 的方法是`JSON.stringify`. 一旦在`value`输入的页面上，它只是一个字符串。页面上的 Javascript 必须将该字符串转换为对象（或在本例中为对象数组）。这就是 JSON.parse 的用武之地。因为旧版浏览器没有 JSON.parse，您应该使用 jQuery.parseJSON 之类的 polyfill 来确保即使是旧版浏览器也能够将 String 转换为 Javascript 对象。

顺便说一句，如果您不需要专门的数据，`hidden` `input`但您认为这是最好的方法，让我建议另一种方法。如果您的目标是`var fotos`包含`datos`来自服务器的值，您可以直接在`<script>`页面上的标记中执行此操作。以下是在 Jade 中的操作方法：

```
script
  var fotos = #{JSON.stringify(datos)}; 
```

查看[这个](https://stackoverflow.com/questions/8437295/jade-template-how-to-pass-concrete-object-to-pages) 关于将对象传递到页面的问题。

# javascript - 在谷歌应用脚 本中为文本框输入动态添加掩码？

> ID：12960578
> 
> 赞同：0
> 
> 时间：2012-10-18T17:44:54.720
> 
> 标签：javascript, textbox, google-apps-script, maskedtextbox

如何在谷歌应用脚​​本的文本框输入中动态添加掩码？我有一个用于获取日期的文本框，但我希望脚本自己添加斜杠 (/)。

例如：用户输入“01022009”，脚本动态地给出结果“01/02/2009”。

但不是所有的数字都是由用户添加的。我想得到的行为是，在自动输入“01”之后，脚本会在之后添加斜杠，依此类推，所以最终结果将是“01/02/2009”。

我尝试了很多方法，但无法获得预期的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:30:27.160

如果您使用的是 UiApp，则无法做到这一点，因为`clientHandlers`受到限制并且无法做到这一点，并且`serverHandlers`只是在用户键入时缓慢有效地采取行动。

如果您使用 HtmlServices，可能会得到一些可以接受的工作，但我不确定你能否让它完美工作，因为 AFAIK 由于 Google Caja 清理，无法获得当前的插入符号位置您的客户端 javascript 代码。

无论如何，正如对您的问题的评论所建议的那样，在用户键入时更改输入非常烦人，我不会这样做。

# jquery - 根据视口宽度显示广告

> ID：12960584
> 
> 赞同：0
> 
> 时间：2012-10-18T17:45:24.193
> 
> 标签：jquery, viewport, web-deployment-project

我正在进行响应式设计，并且希望仅在视口宽度小于或等于 480 像素时才显示不同的广告。

我想这可以在 jquery 中完成。有人请帮忙

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:52:14.007

看看[CSS 媒体查询](http://www.w3.org/TR/css3-mediaqueries/)。

链接中的相关引用：

> 媒体查询由媒体类型和零个或多个检查特定媒体功能条件的表达式组成。可以在媒体查询中使用的媒体特征包括“宽度”、“高度”和“颜色”。通过使用媒体查询，可以为特定范围的输出设备定制演示文稿，而无需更改内容本身。

[请参阅浏览器支持。](http://caniuse.com/#feat=css-mediaqueries)

# html - looking for a good explanation on how html gets rendered and how css effects it

> ID：12960588
> 
> 赞同：0
> 
> 时间：2012-10-18T17:45:30.633
> 
> 标签：html, css

I am looking for a tutorial that explains how css/html gets rendered. I must be using the incorrect search terms. All i can find is tutorials like : This is a div....

I use CSS alot but would like a better understanding of how the page gets rendered. Understanding the flow so why i put things in certain order and how they are styled the behave differently.

for example: if i style

```
 .etype{
            width: 17px;
            height: 11px;
            display: inline-block;
            float: right;
            margin-top:5px;
        } 
```

i have to put the etype divs first for them to display after href

```
<li class="avail-items">
    <div class="etype edit-page"></div>
    <div class="etype view-page"></div>
    <span class="ptype"></span> 
    <a class="pages-manage" href="#"><?=$item->label?></a>
 </li> 
```

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:16:51.637

I personally like this explanation as it's very thorough:

[http://taligarsiel.com/Projects/howbrowserswork1.htm](http://taligarsiel.com/Projects/howbrowserswork1.htm)

# css - div中的中心元素

> ID：12960591
> 
> 赞同：0
> 
> 时间：2012-10-18T17:45:49.093
> 
> 标签：css, jquery-mobile

使用 居中元素是一个很好的约定`text-align: center`吗？为什么我不能使用相同的文本框居中`text-align: center`？

jsFiddles：[带按钮](http://jsfiddle.net/M9Mnz/8/)和 文本区域的[Div](http://jsfiddle.net/M9Mnz/14)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:48:02.537

当然这是一个很好的约定 - 这就是`text-align: center`为什么

[**演示**](http://jsfiddle.net/M9Mnz/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:49:09.127

将此添加到样式中：

```
text-align:center; 
```

[http://jsfiddle.net/M9Mnz/10/](http://jsfiddle.net/M9Mnz/10/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T18:13:33.463

要居中对齐文本区域，您必须将其样式设置为`display:block;`，因为 textareas 是内联元素。

[http://jsfiddle.net/M9Mnz/18/](http://jsfiddle.net/M9Mnz/18/)

# c++ - 尝试在 Blackberry Cascades QT 和 QML 中下载图像

> ID：12960592
> 
> 赞同：1
> 
> 时间：2012-10-18T17:45:51.403
> 
> 标签：c++, qt, download, qml, blackberry-10

我正在尝试下载 Blackberry Cascades、C++、QT 中的图像。

我基本上使用的是这样的代码：

```
void MyClass::download() {

    QUrl url(imagePath);
    QNetworkRequest request(url);
    Q_ASSERT(connect(networkAccessManager_, SIGNAL(finished(QNetworkReply *)), this, SLOT(saveImage(QNetworkReply *))));

    networkAccessManager_->get(request);

}

void MyClass::saveImage(QNetworkReply *) {
    QByteArray imageData = reply->readAll();

    if (reply->error() != QNetworkReply::NoError) {
        qDebug() << "an error occured downloading the image";
        return;
    }

    qDebug() << imageData;
    //... 
```

当我这样做时，imageData 只包含：“Ã¿Ã~Ã¿Ã，而不是我下载的图像的全部内容。

有人可以向我解释一下吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T10:48:49.617

它采用 QByteArray 形式，这就是它显示的原因。只需将它传递给 Image 对象的构造函数，如下所示：

```
Image image = Image(reply->readAll());
imageView->setImage(image); 
```

它应该工作。如果没有，Image 将太大而无法放入 ImageView。级联 ImageView 可以处理的图像的最大尺寸为 2048。因此您可能必须使用 ImageData 类将大图像复制到级联 ImageView 中。

[也尝试从这个url](http://cdn3.berryreview.com/wp-content/uploads/2012/05/blackberry-10-dev-alpha.jpg)加载图像 它适用于这个[url](http://cdn3.berryreview.com/wp-content/uploads/2012/05/blackberry-10-dev-alpha.jpg)而不使用 ImageData 类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:03:02.820

您可能想检查 QNetworkReply 是否将您重定向到实际图像。如果是，您将收到一个新的 QUrl，它将用于获取新请求。查看[QNetworkRequest::Attributes的文档](http://qt-project.org/doc/qt-4.8/qnetworkrequest.html#Attribute-enum)

```
void MyClass::saveImage(QNetworkReply *reply) {
    QUrl redirect = reply->attribute(QNetworkRequest::RedirectionTargetAttribute).toUrl();
    if( redirect.isValid() ) {
        QNetworkRequest request(redirect);
        networkAccessManager_->get(request);
    }
    else {
        QByteArray imageData = reply->readAll();

        if (reply->error() != QNetworkReply::NoError) {
            qDebug() << "an error occured downloading the image";
            return;
        }

        qDebug() << imageData;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T20:04:30.033

实际上我认为图像正在下载。我以为它只是下载了几个字节，但实际上它不仅仅是几个字节 - 这就是为什么在使用 qDebug 打印出来时没有显示结束引号的原因，（整个图像在一行上）。

# hibernate - 在使用 CriteriaBuilder 的休眠中，如何立即将条件添加到左连接而不是作为 where 条件的一部分？

> ID：12960593
> 
> 赞同：1
> 
> 时间：2012-10-18T17:45:52.370
> 
> 标签：hibernate, join, jpa-2.0, criteria-api

我希望条件生成器立即使用连接放置 AND 条件（下面的查询中的第一个左连接）。但是当我将条件放在谓词中时，它会将 if 添加到最终的 where 子句中。

我想要这样的输出：

```
    选择
            *
        从
            里程碑里程碑0_
        左外连接
            disc_user_milestone_watch userswatch1_
                在里程碑0_.id=userswatch1_.milestone_id AND userswatch1_.disc_user_id=2  
        左外连接
            disc_user discuser2_
                在 userswatch1_.disc_user_id=discuser2_.id 交叉
        加入
            竞选活动 3_ 交叉
        加入
            部门部门4_
        在哪里
            里程碑0_.campaign=campaign3_.id
            和里程碑0_.department=department4_.id；

```

但是在将条件放入谓词之后，我在最后的 where 子句中得到了 AND 条件。目前我是这样的：

```
    选择
            *
        从
            里程碑里程碑0_
        左外连接
            disc_user_milestone_watch userswatch1_
                在里程碑0_.id=userswatch1_.milestone_id   
        左外连接
            disc_user discuser2_
                在 userswatch1_.disc_user_id=discuser2_.id 交叉
        加入
            竞选活动 3_ 交叉
        加入
            部门部门4_
        在哪里
            里程碑0_.campaign=campaign3_.id
            和里程碑0_.department=department4_.id
            AND userswatch1_.disc_user_id=2;

```

有什么方法可以立即添加 AND 条件加入？

我当前的代码如下所示：

```
    EntityManager em = Milestone.entityManager();
    CriteriaBuilder criteriaBuilder = em.getCriteriaBuilder();
    CriteriaQuery criteriaQuery = criteriaBuilder.createQuery(UserMilestoneWatchStatus.class);

    根里程碑Root = criteriaQuery.from(Milestone.class);
    加入里程碑discUserJoin = landmarkRoot.join("usersWatching", JoinType.LEFT);

    // 这用于将里程碑表扩展到用户表
    表达式 userId = landmarkdiscUserJoin.get("id"); // ID
    int currUserId = Integer.parseInt(params.get("currUserId").toString());

    里程碑Root.alias("x");
    criteriaQuery.select(criteriaBuilder.construct(UserMilestoneWatchStatus.class，milestoneRoot，userId))；
    标准查询.distinct(true);

    列表谓词List = new ArrayList();
    predicatesList.add(criteriaBuilder.or(criteriaBuilder.equal(userId, currUserId), criteriaBuilder.isNull(userId)));

    criteriaQuery.where(criteriaBuilder.and(predicatesList.toArray(new Predicate[predicatesList.size()]))).orderBy(sort);

```

什么是立即添加 AND 条件以加入而不是在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:58:34.057

不，没有办法做到这一点。JPA 2.0 不支持使用 ON 子句连接。可能它将成为[JPA 2.1](http://jcp.org/en/jsr/detail?id=338)的一部分。

# javascript - 为什么动态调用（Ajax）时javascript会失败？

> ID：12960594
> 
> 赞同：0
> 
> 时间：2012-10-18T17:45:56.753
> 
> 标签：javascript, php, jquery, ajax, sorttable.js

[我一直是http://www.kryogenix.org/code/browser/sorttable/](http://www.kryogenix.org/code/browser/sorttable/)排序表 javascript 代码的忠实粉丝。它在很多层面上都有效。

也就是说，我最近遇到了一个问题，试图在通过 ajax 调用时让排序工作。我的主页上有一个 div 层，我正在使用 ajax 调用动态查询来动态填充页面。我在想这些结果可以使用上面的 javascript 文件进行排序。但是，事实并非如此，我不明白为什么它不起作用。

我已经通过在页面上放置相同的查询并在页面正常加载并且 sorttable.js 像魅力一样工作时填充它来验证代码在页面上的工作。

*如果有人能告诉我为什么像 javascript 这样的客户端语言在通过 ajax 调用时不起作用，我将不胜感激。我敢肯定这是假设的，但我更可能搞砸了。*

作为参考，这是我的 jquery / ajax

```
 <script type="text/javascript">
                $(document).ready(function(){
                $(".small_radio").click(function() {

                //check radio buildings for selected value
                var radBuild = $('input:radio[name=buildings]:checked').val();

                //check radio daterange for selected value
                var radDate = $('input:radio[name=daterange]:checked').val();

                //create array for multiple possibilites from checkbox users
                var chkUsers = [];
                //loop through checkboxes appending values to array
                $('#checkall :checked').each(function() {
                   chkUsers.push($(this).val());
                 });

                 //send the request
                $.ajax({
                    url: "/inventory/pick-print-results.php",
                    type: "post",
                    data: "buildings=" + radBuild + "&daterange=" + radDate + "&users[]=" + chkUsers,
                    // callback for success
                     success: function(data, textStatus) {
                         $(".loadonly").hide();
                         $(".ajax_stuff").html(data);  //no data here
                          //alert(data); //Data here
                      }, //end success else...
                      //if failsauce throw error
                      error: function() {
                          alert('Not OKay');
                         } //end error failsauce
                      }); //ends .ajax function
                   }); //end #checkall. click function
                }); // ends ready function
            </script> 
```

这是我通过 ajax 调用的 php 查询数据。

```
<?php $message.='
            <input type="hidden" value="'.$big_chunk_sql.'" id="displayed_sql" name="displayed_sql">
            <input type="hidden" value="'.$row_count.'" id="amount" name="amount">
             <input type="hidden" value="print" id="print" name="print">
            <table border="0" width="100%" class="sortable">
            <th class="admin">Location</th>
            <th class="admin">Pick For</th>
            <th class="admin">Requested Date</th>
            <th class="admin">Part Number</th>
            <th class="admin">Quantity</th>
            <th class="admin">Received Date</th>
            <th class="admin">Action</th>';
            while($data=mysql_fetch_array($big_chunk_query)) {

                //Deal with operator Name Don Ford = D Ford
                list($user_first,$user_last)=explode(' ',$data['description']);
                $user_first=strtoupper(substr($user_first,0,1));
                $user_last=ucfirst($user_last);
                $operator_name=$user_first.' ' . $user_last;

               if ($i%2 !=0)
                 $rowColor = 'tr2center';
                  else
                 $rowColor = 'tr1center';
                    $pendingdate= trim($data['received_date']);
                    $newpendingdate = date('m-d-Y',strtotime($pendingdate));
                    $message.= '<tr class="'.$rowColor.'">
                    <td>'. $data['location'].'</td>
                    <td>'.$operator_name.'</td>
                    <td>'.date("m-j-y, g:i a", strtotime($data['date_requested'])) .'</td>
                    <td>'.$data['part_number'] . '</td>
                    <td>'. $data['qty_requested'] . '</td>
                    <td>'. $newpendingdate . '</td><td> 
                    <a href="picking.php?radiopart='.urlencode($data['org_transaction_id']) .'">Mark Picked</a></td></tr>';
                    if($data['notes_to_picker']!='') { 
                    $message.= '<tr class="'.$rowColor.'" align="center"><td colspan="2">&nbsp;</td><td align="right"><b>notes:</b></td><td colspan="4">' . $data['notes_to_picker'].'</td></tr>';
                    }
                    $i++;
                }
                $message.= '</table>';
                echo $message;
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:05:28.687

如果您阅读您提供的链接中的文档，您的情况就是插件作者认为“高级”的情况。[http://www.kryogenix.org/code/browser/sorttable/#ajaxtables](http://www.kryogenix.org/code/browser/sorttable/#ajaxtables)

在您的成功回调中，您需要`sorttable.makeSortable($("#tableid")[0]);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:48:13.150

你传递的数据不正确使用这个

```
data: {"buildings":radBuild,"daterange":radDate,"users":JSON.stringify(chkUsers)} 
```

# php - 查询有很多结果行但是当我遍历这些行时，我只得到两个

> ID：12960596
> 
> 赞同：0
> 
> 时间：2012-10-18T17:45:58.063
> 
> 标签：php, mysql

我的网站提要 rss 是通过 php 生成的。

我用来从 mysql 检索帖子的查询是：

```
$query = "select * from articles where status = 0 
          order by date desc LIMIT 0, 20"; 
```

然后我执行此循环以生成 XML 提要：

```
$results = mysql_query($query,$connection) or die(mysql_error());
$num_results = mysql_num_rows($results);

for ($i=0; $i < $num_results; $i++) 
{ 
  $row = mysql_fetch_assoc($results); 
  $date = strtotime($row['date']);
  $artdate = date('D, d M Y H:i:s O', $date);

  $rssfeed .= '<item>';
  $rssfeed .= '<title>' . utf8_decode($row['title']) . '</title>';
  $rssfeed .= '<link>'. $siteurl.'/article.php?id='.$row['id'] . '</link>';
  $rssfeed .= '<description>' . utf8_decode($row['resource']) . '</description>';
  $rssfeed .= '<guid>'. $siteurl.'/article.php?id='.$row['id'] . '</guid>';
  $rssfeed .= '<pubDate>' . $artdate . '</pubDate>';
  $rssfeed .= '</item>';
} 
```

但是最终生成的 xml 只有最新的两个帖子。

思考时，查询时限制为 20 个。

有趣的是，如果我设置 LIMIT 0, 1 最终提要只有 1 个帖子，因为它应该是。但是，如果我将其提高到 20，它只有 2 个帖子，而且我在该查询上有两个以上的帖子。

请问这是怎么回事？

完整的php代码：

```
<?php

header("Content-Type: application/rss+xml; charset=ISO-8859-1");

$cat = $_GET['cat'];

include ('config.php');

    $sitequery = 'select * from settings;';
    $siteresult = mysql_query($sitequery,$connection) or die(mysql_error());

    //Create site settings variables        
    $siteinfo = mysql_fetch_array($siteresult);
    $sitetitle = $siteinfo['title'];
    $siteurl = $siteinfo['url'];
    $logo = $siteinfo['logourl'];
    $statcode = $siteinfo['statcode'];

    if($cat) {
     $query = "select * from categories where id = ".$cat;
     $results = mysql_query($query,$connection) or die(mysql_error());
     $info = mysql_fetch_assoc($results);
     $cattitle = htmlspecialchars($info['name']);

     $rssfeed = '<?xml version="1.0" encoding="ISO-8859-1"?>';
     $rssfeed .= '<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">';
     $rssfeed .= '<channel>';
     $rssfeed .= '<title>'.utf8_decode($cattitle).' - '.$sitetitle.'</title>';
     $rssfeed .= '<link>'.$siteurl.'</link>';
     $rssfeed .= '<description>'.$sitetitle.' RSS FEED</description>';
     $rssfeed .= '<language>pt-br</language>';
     $rssfeed .= '<copyright></copyright>';

    } else {
     $rssfeed = '<?xml version="1.0" encoding="ISO-8859-1"?>';
     $rssfeed .= '<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">';
     $rssfeed .= '<channel>';
     $rssfeed .= '<title>'.$sitetitle.'</title>';
     $rssfeed .= '<link>'.$siteurl.'</link>';
     $rssfeed .= '<description>'.$sitetitle.' RSS FEED</description>';
     $rssfeed .= '<language>pt-br</language>';
     $rssfeed .= '<copyright></copyright>';
    }

    if (!$cat){
     $query = "select * from articles where status = 0 
                 order by date desc LIMIT 0, 20";
    } else {
     $query = "select * from articles where status = 0 
              and categoryid = ".$cat." OR parentid =  ".$cat." 
              order by date desc LIMIT 0, 20";
    }

    $results = mysql_query($query,$connection) or die(mysql_error());
    $num_results = mysql_num_rows($results);

/*  for ($i=0; $i < $num_results; $i++) { 
        $row = mysql_fetch_assoc($results); */

 while ($row = mysql_fetch_assoc($results)) 
 {

  $date = strtotime($row['date']);
  $artdate = date('D, d M Y H:i:s O', $date);

  $rssfeed .= '<item>';
  $rssfeed .= '<title>' . utf8_decode($row['title']) . '</title>';
  $rssfeed .= '<link>'. $siteurl.'/article.php?id='.$row['id'] . '</link>';
  /*
     $rssfeed .= '<description>' . htmlspecialchars($row['body']) . 
                 '</description>'; */
  $rssfeed .= '<description>' . utf8_decode($row['resource']) . '</description>';
  $rssfeed .= '<guid>'. $siteurl.'/article.php?id='.$row['id'] . '</guid>';
  $rssfeed .= '<pubDate>' . $artdate . '</pubDate>';
  $rssfeed .= '</item>';
 }

  $rssfeed .= '</channel>';
  $rssfeed .= '</rss>';

  echo $rssfeed;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:48:54.817

这是因为

```
for ($i=0; $i < $num_results; $i++) { 
$row = mysql_fetch_assoc($results); 
```

这里`$row`只分配了一个结果，所以使用如下

```
while( $row = mysql_fetch_assoc($results)){
     $date = strtotime($row['date']);
     $artdate = date('D, d M Y H:i:s O', $date);

    $rssfeed .= '<item>';
    $rssfeed .= '<title>' . utf8_decode($row['title']) . '</title>';
    $rssfeed .= '<link>'. $siteurl.'/article.php?id='.$row['id'] . '</link>';
    $rssfeed .= '<description>' . utf8_decode($row['resource']) . '</description>';
    $rssfeed .= '<guid>'. $siteurl.'/article.php?id='.$row['id'] . '</guid>';
    $rssfeed .= '<pubDate>' . $artdate . '</pubDate>';
    $rssfeed .= '</item>';

  } 
```

也不`mysql_*`推荐使用该函数，使用`PDO`or`MYSQLi`代替

[这是很好的pdo教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

# php - 使用 smarty 获取数组中的值计数

> ID：12960598
> 
> 赞同：10
> 
> 时间：2012-10-18T17:46:18.060
> 
> 标签：php, smarty

我有一个名为的数组`$mydata`，如下所示：

```
Array
(
[0] => Array
    (
        [id] => 1282
         [type] =>2

        )

[1] => Array
    (
        [id] => 1281
        [type] =>1
        )

[2] => Array
    (
        [id] => 1266
          [type] =>2
    )

[3] => Array
    (
        [id] => 1265
        [type] =>3
    )
) 
```

我已将数组分配给 smarty`$smarty->assign("results", $mydata)`

现在，在模板中，我需要打印数组中每种“类型”的数量。谁能帮我做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-18T18:06:15.443

**PHP 5.3、5.4：**

从 Smarty 3 开始，您可以做到

```
{count($mydata)} 
```

你也可以在 Smarty 2 或 3 中使用管道：

```
{$mydata|count} 
```

要计算“类型”值，您必须在 PHP 或 Smarty 中遍历数组：

```
{$type_count = array()}
{foreach $mydata as $values}
    {$type = $values['type']}
    {if $type_count[$type]}
        {$type_count[$type] = $type_count[$type] + 1}
    {else}
        {$type_count[$type] = 1}
    {/if}
{/foreach}

Count of type 2: {$type_count[2]} 
```

**PHP 5.5+：**

在 PHP 5.5+ 和 Smarty 3 中，您可以使用新`array_column`功能：

```
{$type_count = array_count_values(array_column($mydata, 'type'))}
Count of type 2: {$type_count['2']} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-18T18:00:37.813

你试过这个吗？：

```
{$mydata|@count} 
```

其中 count 正在传递 php 函数 count()

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-29T11:27:19.923

您还可以使用：

```
{if $myarray|@count gt 0}...{/if} 
```

# c# - #if DEBUG 运行时

> ID：12960602
> 
> 赞同：39
> 
> 时间：2012-10-18T17:46:42.230
> 
> 标签：c#, .net

我的 C# 类中有这段代码。

```
#if DEBUG
        private const string BASE_URL = "http://www.a.com/";
#else
        private const string BASE_URL = "http://www.b.com//";
#endif 
```

我想问的是什么时候

```
#if DEBUG 
```

代码中的路径被执行？

是否被执行

1.  当我在 Visual Studio 中运行调试会话时？
2.  当我从调试文件夹手动运行有问题的 exe 或 dll 时？
3.  还有什么我忘了说的情况吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-18T17:49:05.270

`#if DEBUG`这是一个预处理器定义。

它在您定义 DEBUG 常量时编译。是的，它是 Debug Build Configuration 的默认设置。

**Visual Studio 2010 项目属性：** ![Visual Studio 2010 项目属性](../Images/9f13a2bcc4202c3d8b7f589d9f2d65f9.png)

如果`Define DEBUG constant`选中 VS 将编译：

```
private const string BASE_URL = "http://www.a.com/"; 
```

否则（未选中）VS 将编译：

```
private const string BASE_URL = "http://www.b.com//"; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-18T17:48:03.177

这是一个预处理器指令。DEBUG 部分中的代码是在您进行调试构建时编译的（更具体地说，是在定义 DEBUG 常量时）。即，如果您进行调试构建，BASE_URL 将指向 www.a.com。否则它将指向 www.b.com。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-10-19T15:38:28.303

VS 2017 实际上会感知活动配置，例如，如果选择了发布配置，则会将调试条件**变灰。**

[![在此处输入图像描述](../Images/d0d793650ee6834b255e99849fc1d0da.png)](https://i.stack.imgur.com/sjBDo.png)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-10-18T17:48:04.363

当您使用 DEBUG 指令进行编译时。因此，如果设置了，则只有第一行将是编译后的二进制文件的一部分，如果未设置，则第二行将是二进制文件的一部分。

在 VS 中编译调试配置时默认设置 DEBUG，但是您可以为任何配置手动设置它

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-18T17:50:48.773

那是一个“编译器指令”，这意味着它实际上将根据您输入的#if 在构建过程（或编译）中包含或排除代码。话虽如此，DEBUG 符号位于项目的属性中，并且在 Visual Studio 中通常会在“发布”版本中自动删除。

所以基本上，它不必在调试中运行的 Visual Studio 中，也不必在任何特定文件夹中，您的代码就是这样构建的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-18T17:49:37.267

如果您使用 DEBUG 配置进行编译，则 else 行之前的代码将被编译，而另一行则不会。如果您在任何其他配置中编译，则将编译第二行而第一行不会。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-11-08T16:41:42.790

转到“项目属性”-> 应用程序的构建选项卡。如果配置：活动（调试），则启用调试配置。下面的代码将打印到控制台。

```
#if DEBUG
    Console.WriteLine("in debug mode...");
#endif 
```

如果配置：活动（发布）则启用发布配置。下面的代码将打印到控制台。

```
#if RELEASE
    Console.WriteLine("in release mode...");
#endif 
```

如果您想在 DEBUG 和 RELEASE 模式之间切换，请使用工具菜单下方的“调试/发布/配置管理器”下拉菜单。抱歉，大多数开发人员都知道......但有时会被忽视并导致混淆为什么上面的代码是没有正确运行。

# objective-c - 在 CALayer 或 CGImage 上实现径向 alpha 渐变？

> ID：12960605
> 
> 赞同：3
> 
> 时间：2012-10-18T17:46:49.637
> 
> 标签：objective-c, ios, core-graphics, calayer, core-image

`CALayer`是否可以在、`CGImage`或上创建径向 alpha 渐变`CIImage`？如何以最简单、最快捷的方式实现这一点？

为了让您了解我正在尝试做什么，我想淡化使用`CIImage`裁剪过滤器裁剪的裁剪椭圆形图像的边缘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T19:53:07.293

我将通过以下方式生成适当的 alpha 通道：

1) 使用与您在图片上使用的相同的椭圆形。2）在您的 Alpha 通道上应用非常强（=大半径）的 CIGaussianBlur 过滤器，以使边缘平滑。

# c++ - 类方法在转换后丢失私有修饰符

> ID：12960609
> 
> 赞同：1
> 
> 时间：2012-10-18T17:47:01.280
> 
> 标签：c++

我需要设置回调，但我不想让它成为全局函数，我也不需要它公开，所以我把它设为私有。想知道，这是正确的方法。

```
class A // button object from window library. I wont change this class
{
public:
    typedef void (*fptr)();
    void set(fptr p)
    {
        p(); // here I call private static of B
    };
};
class B // my own class
{
private:
    static void prfn() {};
public:
    B()
    {
        A a;
        a.set(prfn);
    };
};
int main(){B b;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:52:21.557

这很好，因为您只需要在 B 类中访问具体（私有）函数。A 类不会关心访问说明符，唯一的约定是必须匹配函数指针定义的函数签名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:00:00.120

你的代码很好。它与以下标准习语没有什么不同：

```
class Foo
{
    int n;
public:
    int & the_int() { return n; }
}; 
```

通过公共功能公开私人成员是完全可以的。（这可能不是好的设计，但它是完全合法的。）您通过将私有成员用作其他不相关目的的函数参数来做同样的事情。请注意，只有您自己`class B`可以访问`B`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T17:51:13.007

首先你用`set`那个没介绍的`A`你想说`call`吗？第二为什么你应该使用另一个类来调用你自己类的某些函数（事件`public`或）？`private`你可以简单地说：

```
B() { prfn(); } 
```

好的，如果你想实现一个你想传递给另一个类的回调并且这个函数不应该被你的类的其他用户直接调用，那么你肯定做对了，你的函数应该是私有的！

# python - 使用 dateutil 解析日期时遇到问题

> ID：12960614
> 
> 赞同：12
> 
> 时间：2012-10-18T17:47:25.253
> 
> 标签：python, python-2.7, python-dateutil

我正在使用 python-dateutil 从字符串中解析日期：

```
import dateutil.parser
print dateutil.parser.parse('some null string', fuzzy=True).date()
2012-10-18
print dateutil.parser.parse('some 31 Oct 2012 string', fuzzy=True).date()
2012-10-31 
```

我期待的是`dateutil.parser.parse('some null string', fuzzy=True).date()`抛出一个异常，但它返回当前日期。如果在提供的字符串中找不到日期，有人可以告诉我如何避免获取当前日期吗？

提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-20T13:20:27.887

请参阅[dateutil docs](http://labix.org/python-dateutil#head-c0e81a473b647dfa787dc11e8c69557ec2c3ecd2)，特别是 parse 函数（强调我的）：

> 此外，还可以使用以下关键字参数：
> 
> **默认** 如果给定，这必须是一个日期时间实例。解析日期中缺少的任何字段都将从该实例中复制。*默认值为当前日期 00:00:00am*。
> 
> ...（剪断）...
> 
> **模糊** 如果模糊设置为真，字符串中的未知标记将被忽略。

鉴于您已设置`fuzzy`为`True`，不会抛出异常，因为它只会忽略所有未知标记。并且，由于`default`参数未通过，将返回当前日期。

所以解决方案是要么保持`fuzzy`设置为`False`，这样无效的格式字符串就会抛出异常；或检查返回的日期时间是否等于当前日期 00:00:00am，作为转换失败的指示。

# google-analytics - 分析多领域目标跟踪

> ID：12960620
> 
> 赞同：1
> 
> 时间：2012-10-18T17:47:35.190
> 
> 标签：google-analytics

您好，我需要帮助跟踪多个域上的 Google Analytics（分析）目标。这是场景：

```
step 1: website1.com
step 2: website2.com/register/register.php (with membership form)
step 3: website2.com/register/payment/signup.php (with Credit Card payment form) 
```

成功网址：website2.com/register/success.php

这是我的设置方式：

在网站 1 上：

```
 _gaq.push(['_setAccount', 'UA-#######-##']);
    _gaq.push(['_setAllowLinker', true]);
    _gaq.push(['_setAllowHash', false]);
    _gaq.push(['_trackPageview']); 
```

***我还在将用户发送到 website2.com 的链接上添加了 _link() 方法。

在网站 2（会员表格）上：

```
_gaq.push(['_setAccount', 'UA-#######-##']);
_gaq.push(['_setAllowLinker', true]);
_gaq.push(['_setAllowHash', false]);
_gaq.push(['_trackPageview', '/register-user']);
_gaq.push(['_trackPageLoadTime']);
_gaq.push(['_setDomainName', location.hostname]); 
```

我卡在 website2.com（支付页面）

我放什么代码，这样我就可以跟踪目标。我还需要对会员表格使用 _linkByPost() 方法吗？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:00:02.387

数组的第二个参数 `_trackPageview`设置 url。很可能您的两个页面点击都是作为`/register-user`而不是在 website2.com 上`/register/register.php`的。`/register/payment/signup.php`将该行更改为：

```
_gaq.push(['_trackPageview']); 
```

以下行重复了默认功能，可以删除：

```
_gaq.push(['_setDomainName', location.hostname]); 
```

以下行已[弃用](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration#_gat.GA_Tracker_._trackPageLoadTime)，可以删除。

```
_gaq.push(['_trackPageLoadTime']); 
```

# jquery - MVC3 Html.DisplayFor -- 是否可以让这个控件生成一个 ID？

> ID：12960623
> 
> 赞同：9
> 
> 时间：2012-10-18T17:47:41.277
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

我希望能够显示一些文本，但也可以通过 jQuery 修改文本。

```
<%= Html.DisplayFor(model => model.DeviceComponentName)%> 
```

如果我使用 EditorFor 而不是 DisplayFor，我会看到输入控件的 ID。不过，我不希望以这种方式编辑该值。因此，我将其设为 DisplayFor，但它不会为元素生成 ID 属性。

我是否应该将 DisplayFor 包装在 div 中并执行以下操作：

```
<div id="<%= ViewData.TemplateInfo.GetFullHtmlFieldName("DeviceComponentName") %>">
    <%= Html.DisplayFor(model => model.DeviceComponentName)%>
</div>

$('#DeviceComponentName').text('newValue'); 
```

还是有更清洁的方法来实现这一目标？

**更新：**有没有不依赖硬编码字符串的方法？与对象本身相关的东西，所以如果我的属性名称发生更改，我会收到编译错误？

另外，我正在使用此代码，但没有看到 ID 值出现：

```
<td class="editableValue">
    <%--Label should be editable, so it needs an ID, but only will be edited by jQuery so it can't be an EditorFor--%>
    <%= Html.DisplayFor(model => model.DeviceComponentName, new { id = "DeviceComponentName" })%>
    <button type="button" id="ComponentTreeButton" class="nestedDialogButton">...</button>
</td> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-18T18:07:25.660

为避免“魔术字符串”输入（以防您的模型属性发生更改），您可以使用扩展来执行此操作。它还使代码更简洁：

```
public static MvcHtmlString DisplayWithIdFor<TModel, TValue>(this HtmlHelper<TModel> helper, Expression<Func<TModel, TValue>> expression, string wrapperTag = "div")
{
    var id = helper.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldId(ExpressionHelper.GetExpressionText(expression));
    return MvcHtmlString.Create(string.Format("<{0} id=\"{1}\">{2}</{0}>", wrapperTag, id, helper.DisplayFor(expression)));
} 
```

然后像这样简单地使用它：

```
@Html.DisplayWithIdFor(x => x.Name) 
```

会产生

```
<div id="Name">Bill</div> 
```

或者，如果您希望将其包裹在跨度中：

```
@Html.DisplayWithIdFor(x => x.Name, "span") 
```

这将使：

```
<span id="Name">Bill</span> 
```

**非剃须刀**

对于非 Razor 语法，您只需像这样使用它：

```
<%= Html.DisplayWithIdFor(x => x.Name) %> 
```

和：

```
<%= Html.DisplayWithIdFor(x => x.Name, "span") %> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T17:53:33.327

你必须使用：

```
Html.DisplayFor(model => model.DeviceComponentName, new { @id = "DeviceComponentName"}) 
```

对于动态 id 和其他属性，我使用：

元数据类：

```
public class AdditionalHtml : Attribute, IMetadataAware
{
    public string Id { get; set; }

    public string Type { get; set; }

    public string CssClass { get; set; }

    public string PlaceHolder { get; set; }

    public string Style { get; set; }

    public string OnChange { get; set; }

    public int Rows { get; set; }

    public int MaxLength { get; set; }

    public bool ReadOnly { get; set; }

    public bool Disabled { get; set; }

    public Dictionary<string, object> OptionalAttributes ()
    {
        var options = new Dictionary<string, object>();

        if ( !string.IsNullOrWhiteSpace( Id ) )
            options.Add( "id", Id );

        if ( !string.IsNullOrWhiteSpace( Type ) )
            options.Add( "type", Type );

        if ( !string.IsNullOrWhiteSpace( CssClass ) )
            options.Add( "class", CssClass );

        if ( !string.IsNullOrWhiteSpace( PlaceHolder ) )
            options.Add( "placeholder", PlaceHolder );

        if ( !string.IsNullOrWhiteSpace( OnChange ) )
            options.Add( "onchange", OnChange );

        if ( !string.IsNullOrWhiteSpace( Style ) )
            options.Add( "style", Style );

        if ( Rows != 0 )
            options.Add( "rows", Rows );

        if ( MaxLength != 0 )
            options.Add( "maxlength", MaxLength );

        if ( ReadOnly )
            options.Add( "readonly", "readonly" );

        if ( Disabled )
            options.Add( "disabled", "disabled" );

        return options;
    } 
```

元数据提供者的类：

```
public class MetadataProvider : DataAnnotationsModelMetadataProvider
{
    protected override ModelMetadata CreateMetadata ( IEnumerable<Attribute> attributes, Type containerType, Func<object> modelAccessor, Type modelType, string propertyName )
    {
        var metadata = base.CreateMetadata( attributes, containerType, modelAccessor, modelType, propertyName );

        var additionalHtmlValues = attributes.OfType<AdditionalHtml>().FirstOrDefault();

        if ( additionalHtmlValues != null )
        {
            metadata.AdditionalValues.Add( "AdditionalHtml", additionalHtmlValues );
        }

        return metadata;
    }
} 
```

添加助手：

```
public static class HtmlAttributesHelper
{
    public static string GetHtmlAttribute<T> ( this T model, Expression<Func<T, object>> expression, string attribName )
    {
        string strDefault = String.Empty;
        MemberInfo member = null;

        switch ( expression.Body.NodeType )
        {
            case ExpressionType.Lambda:
            case ExpressionType.Convert:
                {
                    var body = expression.Body as UnaryExpression;
                    if ( body == null )
                        return strDefault;
                    var operand = body.Operand as MemberExpression;
                    if ( operand == null )
                        return strDefault;
                    member = operand.Member;
                    break;
                }
            case ExpressionType.MemberAccess:
                {
                    var body = expression.Body as MemberExpression;
                    if ( body == null )
                        return strDefault;
                    member = body.Member;
                    break;
                }
            default:
                {
                    return expression.Body.ToString() + " " + expression.Body.NodeType.ToString();
                }
        }

        if ( member == null )
            return strDefault;

        var attr = member.GetCustomAttributes( typeof( AdditionalHtml ), false );
        if ( attr.Length > 0 )
        {
            return ( attr [ 0 ] as AdditionalHtml ).OptionalAttributes() [ attribName.ToLower() ].ToString();
        }

        // Return Name of Property if AdditionalHtml.Id is empty
        return attribName == "Id" ? member.Name : strDefault;
    }

    public static string GetHtmlId<T> ( this T model, Expression<Func<T, object>> expression )
    {
        return model.GetHtmlAttribute( expression, "Id" );
    }
} 
```

在 Global.asax 中注册提供者：

```
protected void Application_Start ()
    {
        AreaRegistration.RegisterAllAreas();

        //....
        ModelMetadataProviders.Current = new MetadataProvider();
    } 
```

在您的模型中，您可以像这样使用 AdditionHtml：

```
[AdditionalHtml( Id = "OrderNo", CssClass = ShortTextStyle, Disabled = true )]
    public string OrderNo { get; set; } 
```

现在您可以将 sintax 用于 js（在视图中）：

```
$('#@Model.GetHtmlId( x => x.PropertyName)') 
```

在视图中，您可以使用：

```
@Html.DisplayFor( x => x.FormDate ) 
```

自动附加的 HTML 属性

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-13T15:17:01.827

只需在列上方添加一个 HiddenFor 即可。这将为您提供一个 ID 用于您需要的东西。很简单，并且可以帮助您通过 ID 获取该值。

```
<%= Html.HiddenFor(model => model.DeviceComponentName)%>
<%= Html.DisplayFor(model => model.DeviceComponentName)%> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-18T17:55:13.650

HtmlHelpers 具有允许您传入对象或字典的覆盖，以将属性添加到生成的 html 标记：

```
@Html.DisplayFor(model => model.DeviceComponentName, new { id = "myId" })

@Html.DisplayFor(model => model.DeviceComponentName, new Dictionary<string, object>() { { "id", "myId" } }) 
```

或者

```
@Html.DisplayFor(model => model.DeviceComponentName, new { id = ViewData.TemplateInfo.GetFullHtmlFieldName("DeviceComponentName") })

@Html.DisplayFor(model => model.DeviceComponentName, new Dictionary<string, object>() { { "id", ViewData.TemplateInfo.GetFullHtmlFieldName("DeviceComponentName" } }) 
```

**更新：**

在查看更新的代码并重新阅读问题后，这是我的建议 - 这与您的第一个想法相似。

```
<td class="editableValue" id="<%= ViewData.TemplateInfo.GetFullHtmlFieldName("DeviceComponentName") %>">
  <%= Html.DisplayFor(model => model.DeviceComponentName)%>
  <button type="button" id="ComponentTreeButton" class="nestedDialogButton">...</button>
</td> 
```

您不需要在 TD 中添加额外的 div，因为您可以直接通过 jQuery 修改 td 中的值。我相信以下应该做到这一点：

```
$('#DeviceComponentName').html('newValue'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-05T12:53:49.607

我们无法在剃刀中为 Displayfor() 控件创建 id。我们可以使用像 span 标签这样的 html 控件，而不是 Displayfor() 控件。其他明智的我们可以将 displayfor control 放在 span control 中。现在我们可以为 span 创建 id 了。这是我们必须做的..

例子`<span id="spanid">@Html.Displayfor(modelItem => item.id) </span>`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-15T15:24:12.490

这是能够添加 htmlAttributes 的 naspinski 解决方案。

```
 public static MvcHtmlString DisplayWithIdFor<TModel, TValue>(this HtmlHelper<TModel> helper, Expression<Func<TModel, TValue>> expression, object htmlAttributes, string wrapperTag = "div")
    {
        var id = helper.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldId(ExpressionHelper.GetExpressionText(expression));

        if (htmlAttributes != null)
        {
            var tag = new TagBuilder(wrapperTag);
            tag.MergeAttributes(HtmlHelper.AnonymousObjectToHtmlAttributes(htmlAttributes) as IDictionary<string, object>);
            tag.Attributes.Add("id", id);
            tag.SetInnerText(helper.DisplayFor(expression).ToHtmlString());

            return MvcHtmlString.Create(tag.ToString(TagRenderMode.Normal));
        }
        else
        {
            return MvcHtmlString.Create(string.Format("<{0} id=\"{1}\">{2}</{0}>", wrapperTag, id, helper.DisplayFor(expression)));
        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-12T23:10:44.460

对我来说最简单的解决方案是使用只读文本框。@Html.TextBoxFor(u => u.Visibilidade, new { disabled = "disabled" })

# android - 对象的虚线后边缘

> ID：12960627
> 
> 赞同：8
> 
> 时间：2012-10-18T17:47:51.247
> 
> 标签：android, opengl-es

在我的 Android 应用程序中，我需要显示一个 3D 对象（这没问题），但前边缘应该是实心的，后边缘应该是点状的。我需要在图片上有类似的东西。如何使用 OpenGL ES 1 或 2 实现它？

![](../Images/5fa20856391dc4e7c13f8018a4bcac35.png)

我已经尝试过 Tim 的想法（使用深度缓冲区）。它可以工作，但是在图片上有一些伪像，虚线（紫色）线与实线（红色）线重叠：

![在此处输入图像描述](../Images/2104c46eda85cdbfd3bba9a4db2b0efd.png) ![在此处输入图像描述](../Images/b44a7d58aa6bb8744fd1d73b20d543a2.png)

这是因为虚线（紫色（GL_GREATER））是在红线（GL_LEQUAL）之后绘制的。它有什么想法如何防止它？

谢谢大家的帮助。现在看起来很棒！ ![在此处输入图像描述](../Images/766f14911ce9289b7656d7bd3fe1adcb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:32:31.703

这是我将要做什么的粗略轮廓。您将需要一个网格用于对象本身，而另一个 GL_LINES 网格用于您要绘制的“边缘线”。

1.  将实体网格绘制到深度缓冲区中。
2.  使用标准着色器绘制“边缘网格”，以便获得实线，但将深度测试设置为 GL_LEQUAL（仅绘制比深度值更近的对象。
3.  使用 GL_GREATER 的深度测试再次绘制边缘网格。在这个过程中，使用点画着色器来获得虚线效果（下面将进一步解释）。

这可能会出现问题，具体取决于场景中的其他对象，因为在立方体被其他东西遮挡的情况下，您可能会绘制虚线，但这对您来说可能不是问题，或者您可以以某种方式剔除网格，如果它是模糊的。

对于点画着色器，您可以将线的一个顶点的 texcoord 设置为 0，将线的另一个端点设置为 1。然后在您的着色器中，您可以使用类似于*腾讯*建议的阶梯函数来拒绝片段以创建点画图案。

如果您想自己计算对象后面有哪些线，您也可以跳过深度缓冲区的混乱，尽管除了立方体之外可能需要做很多工作。

如果您想使用 OpenGLES 1 而不是 OpenGLES 2，请将点画着色器替换为点画图案的 1D 纹理，并用它来纹理背面线条。但是我不能 100% 确定你可以在 OpenGL 中对一条线进行纹理处理，所以这可能行不通。

# batch-file - 如何从批处理脚本将特殊字符写入文本文件

> ID：12960629
> 
> 赞同：0
> 
> 时间：2012-10-18T17:48:02.010
> 
> 标签：batch-file

我想从 MS DOS 脚本中将 '<'、'>' 之类的字符写入文本文件？

我该怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:51:02.680

在每个特殊字符前加一个克拉 (^)，例如：

```
ECHO ^> > YourFile.txt 
```

# javascript - Javascript 的日期范围过滤问题

> ID：12960635
> 
> 赞同：0
> 
> 时间：2012-10-18T17:48:21.670
> 
> 标签：javascript, jquery, datepicker, jquery-ui-datepicker

我想过滤两个文本框之间的日期，我的问题是当我在第二个框中选择日期时，它不包括我选择的日期。

文本框的代码

```
 <label for="from">From</label>

            <input type="text" id="from"  />

            <label for="to">To</label>

            <input type="text" id="to" /> 
```

对于脚本日期选择器

```
 //function for datepicker and date range
     $(function() {
    $( "#from" ).datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 1,
        onSelect: function( selectedDate ) {
            $( "#to" ).datepicker( "option", "minDate", selectedDate );
        }
    });
    $( "#to" ).datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 1,
        onSelect: function( selectedDate ) {
            $( "#from" ).datepicker( "option", "maxDate", selectedDate  );
        }
    });
  }); 
```

更新

```
 $from = new Date(Date.parse($("#from").datepicker('getDate')));
   $to = new Date(Date.parse($("#to").datepicker('getDate'))); 
```

这就是它的定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:00:22.210

您应该直接访问该值：

```
 if ($("#from").val()) {

     $filter.push({field: "DateEnrolled", operator: ">=", value: $("#from").val()});
 }

 if ($("#to").val()) {
     $filter.push({field: "DateEnrolled", operator: "<=", value: $("#to").val()});
 } 
```

# java - 我如何知道我的 GCM 消息是否足够小（< 4kb）可以发送？（如何获得字符串的大小？）

> ID：12960641
> 
> 赞同：5
> 
> 时间：2012-10-18T17:48:54.103
> 
> 标签：java, android, string, google-cloud-messaging

我想将数据直接嵌入到 GCM（谷歌云消息）中，以帮助我的应用程序跳过到我的服务器的往返行程。

谷歌表示，总数据负载需要在 4kb 以内。使用 [key,value] 对发送数据。假设我做了这样的事情：

```
 String key = "key";
 String data = "data";
 Message message = new Message.Builder().addData(key, data).build();
 sender.send(message, regId, 5); 
```

我怎么知道是否`String data`小于 4kb？据我所知，没有办法真正做一个`String.getSize()`或类似的事情。

如果好奇，请链接到文档：http: [//developer.android.com/training/cloudsync/gcm.html#embed](http://developer.android.com/training/cloudsync/gcm.html#embed)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T17:55:21.013

您可以使用以下内容获取字符串的字节：

```
String s = "some text here";
byte[] b = s.getBytes("UTF-8");
int bytes = b.length; 
```

确保您指定 的编码`String`，因为不同的编码可能会占用相同字符串的不同字节数。在上面的例子中，`UTF-8`被用作编码。

要将字节转换为 kB，只需除以`1024`.

编辑：[这是](https://stackoverflow.com/a/4385653/1069068)Geobits 评论中关于 Java 中不同编码的字节空间的一个很好而详细的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T17:51:21.883

```
int byteSize = data.length() * 2  // each char is 2 byte 
```

**更新**

```
int byteSize = data.getBytes("UTF-8").length // if you want to know the size in your desired encoding 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-19T06:34:37.020

我在本地运行了几个测试，似乎在应用程序端你可以发送一个包含大约 4020 字节的键 + 值对的包，然后你开始从 gcm 收到错误，而在服务器端它有点更多，关于4100 字节。鉴于此，为了安全起见，我们决定两边各使用 4,000 字节。

# java - 无法解决空异常错误

> ID：12960645
> 
> 赞同：-2
> 
> 时间：2012-10-18T17:49:08.233
> 
> 标签：java, exception, object, null

我正在创建一个面向对象的策划游戏。我已经设置了所有的类和方法，并以非面向对象的编程风格尝试了它们，它们都可以工作，但是现在因为我将它们设置为面向对象的风格，所以我得到了空指针错误。它告诉我错误发生在哪里，我试图弄清楚什么是空值或什么是错误的，但我无法弄清楚。我还尝试删除发生 null 的点，以便在类似的类型表达式中获得另一个 null 异常。所以我相信我调用方法等的语法错误，但不知道如何修复它，或者它是否是真正错误的原因。

如果您想直接跳转到第二个代码块，则会出现错误。

我知道我在这里发布了很多东西，所以如果您需要任何澄清，我很乐意提供帮助。主要焦点只是空错误，因此如果您看到其他一些错误，请忽略它，除非它妨碍解决空错误。

为了便于阅读，我将每个班级分开。

* * *

```
public class GameTester {

public static void main(String[] args) {

    MasterMind m = new MasterMind();
    m.playGame();
    }
} 
```

* * *

```
public class MasterMind 
{
private Master theMaster;
private Player thePlayer;

public void mastermind() {
    theMaster = new Master();
    thePlayer = new Player();
}

public void playGame() {
    System.out.println("WELCOME TO CODEBREAKER... Let's Play!\n");
    System.out.println("Guess a 4-letter code with letters A, B, C, and D\n");

    theMaster.createCode(); //heres where the null exception is said to occur

    while(true) {
        thePlayer.makeGuess(); //if i remove the call above this becomes null error
        int x = theMaster.totalCorrect(thePlayer.getGuess());
        if( x == 4) {
            System.out.println("\nGOT IT!!!\n");
        }
        else {
            System.out.printf("MISSED! %d out of 4\. TRY AGAIN... \n", x);
        }       
    }
 } 
```

* * *

```
 import java.util.Random;
  public class Master 
  {
  private char[] Code = new char[4];

public Master()
{

}

public void createCode()
{
     Random R = new Random();
        char[] setting ={'A', 'B', 'C', 'D'}; 
        int rx;

        for(int i=0; i<=3; i++)
        {
            rx = R.nextInt(4);
            Code[i] = setting[rx];
        }           
}

public int totalCorrect(char[] theGuess)
{
    int x =0;

    if(Code[0] == theGuess[0]) {
        x++;
    }   
    if(Code[1] == theGuess[1]) {
        x++;
    }
    if(Code[2] == theGuess[2]) {
        x++;
    }
    if(Code[3] == theGuess[3]) {
        x++;
    }

    return x;
}
} 
```

* * *

```
 import java.util.Scanner;
 public class Player { 

 private char[] Guess = new char[4];

public Player() {

}

public void makeGuess() {

    System.out.println("YOUR GUESS => ");
    Scanner input =new Scanner(System.in);
    String guess = input.next(); 
    char[] D = guess.toCharArray(); 

    for(int i=0; i<4; i++) {
        Guess[i] = D[i];
    }   
}

public char[] getGuess() {
        return Guess;
}   
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T17:49:55.987

您的构造函数应该是完全相同的类并且没有返回类型。否则它将被视为方法并且不会在对象实例化时执行，这会留下`theMaster`指向`null`.

```
 MasterMind () 
{
    theMaster = new Master();
    thePlayer = new Player();

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T17:53:43.993

在属性声明上使用 final 可以强制实例的生命周期，并且不需要构造函数：

```
public class MasterMind 
{
   private final Master theMaster = new Master();
   private final Player thePlayer = new Player(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T17:53:37.843

**-**首先，您应该有一个`constructor`带有 的**名称**`Class`和**带有 No** 的名称`return type`。

**-** A`method`可以与 the**同名**，`class`但**会有一个** `return type`.

**尝试这样的事情：**

```
MasterMind () 
{
    theMaster = new Master();
    thePlayer = new Player();

} 
```

# python - 使用 paramiko ssh 客户端的嵌套终端会话

> ID：12960647
> 
> 赞同：1
> 
> 时间：2012-10-18T17:49:09.997
> 
> 标签：python, bash, ssh, paramiko

当用户想要重新开始 ssh 新终端会话执行时如何正确处理情况`exec_command('bash')`。目前以这种方式执行此操作时，功能挂起。

# performance - 快速 8x8 位乘法程序集 pic18

> ID：12960652
> 
> 赞同：1
> 
> 时间：2012-10-18T17:49:28.280
> 
> 标签：performance, assembly, pic, pic18, 8-bit

我试图将两个 8 位数字相乘并将它们存储在 16 位位置以获得大于 255 的结果。完成此操作的最快方法是通过移位，我试图通过 rrcf 函数实现它并使用 bcf 清除不需要的进位。

这就是我想出的。我试图评论所有代码，以便您能够看到我的思考过程。总的来说，我对 PIC18 和 ASM 编程都很陌生。在（希望）提供帮助时请记住这一点。我需要放在一个比现在更好的位置，当我运行 MPLAB SIM 时，我得到的只是计数器递减......？

我认为这是由于乘法器的最后一位被反复测试，这将是零，因此每次都跳过我的加法指令。你能帮我创建一个循环以从 0-7 位逐步移动 BTFSC 吗？我认为这是问题所在，但我无法弄清楚代码。我基本上可以写 main 8 次，但我试图节省代码空间

```
 LIST P=18F4550
            #include <P18F4550.INC>

            ;equates
            counter equ 0x00 ;set counter
            multiplicand equ 0x01 ;set multiplicand
            multiplier equ 0x02 ;set multiplier
            resultHigh equ 0x03 ;set resultHigh
            resultLow equ 0x04 ;set resultLow

            ;test program

            movlw d'100' ;move literal d'100' to wreg
            movwf multiplicand ;set multiplicand
            movlw d'400'       ;move literal d'400'
            movlw multiplier   ;set multiplier
            movlw d'8'         ;counter
            movwf counter      ;set counter

            main:
            btfsc multiplier, 0          ;test LSB if 0,skip next if 0
            addwf multiplier, resultLow  ;add if 1 to resultLow
            bcf STATUS,C                 ;clear carry flag
            rlcf multiplier              ;rotate multiplier left
            bcf STATUS,C                 ;clear carry
            rlcf resultLow               ;rotate resultLow w/ carry
            rlcf resultHigh              ;rotate resultHigh 
                                                                  ;w/carry from resultLow

            decf counter                 ;dec counter
            goto main                    ;repeat for 8 bits
            end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:38:27.810

实际上 PIC18 asm 支持单 CPU 周期 8*8 无符号硬件乘法。

```
 MOVLW 100
   MOVWF multiplicand
   MOVLW 33
;multiply multiplicand with WREG 
   MULWF multiplicand
;product is stored in registers PRODH:PRODL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:29:38.410

这段代码有几个奇怪的地方：

1.  你从不使用`multiplicand`，那么你怎么可能乘以它呢？你写的时候是复制粘贴错误`addwf multiplier, resultLow`吗？按照所有逻辑`multiplicand`应该在哪里，除非你想计算一个数字的平方而不是两个数字的乘积。

2.  您测试 的最低有效位`multiplier`，这是有道理的，因为您需要检查它的位，但随后您`multiplier`向左移动，将该位永远变为 0。似乎不对。您应该进行右移或检查最高有效位。

3.  结果的移位发生在添加到它之后。假设您将 1 位数字而不是 8 位数字相乘，例如 1 乘 1，并且在乘积中期望 1。因此，您将结果加 1，然后将结果左移。仅此一项就为您提供了产品中的 2。这怎么可能是对的？颠倒 shift 和 add 的顺序怎么样？

4.  当达到 0 时，我看不到循环是如何结束的。`counter`虽然我不熟悉你的 CPU，但在我看来，你递减`counter`然后无条件跳回`main`. 是什么使它成为条件跳转？

以下伪代码显示了如何进行乘法运算：

```
multiplier = multiplier_value
multiplicand = multiplicand_value

counter = 8
resultLow = 0
resultHigh = 0

main:

carry = 0
shift left: carry <- resultLow <- carry
shift left: carry <- resultHigh <- carry

carry = 0 ; you don't need to zero it here, actually
shift left: carry <- multiplier <- carry

if carry = 0, goto no_add

carry = 0
resultLow = resultLow + multiplicand + carry
resultHigh = resultHigh + 0 + carry

no_add:

counter = counter - 1
if counter ≠ 0, goto main 
```

# dynamic - JSF 2 动态用户界面：包括从 2.1.7 到 2.1.9 不工作

> ID：12960653
> 
> 赞同：2
> 
> 时间：2012-10-18T17:49:27.963
> 
> 标签：dynamic, jsf-2, include, state, save

我有一个 JSF 2/CDI webapp，可以动态配置一些特定的管理页面。它使用 bean 来决定要包含哪个页面：

```
<ui:include src="#{myBean.myDynamicPath}"/> 
```

为了让它工作，我已经将我正在使用它的页面添加到 javax.faces.FULL_STATE_SAVING_VIEW_IDS 上下文参数中，并且在我将 JSF 库从 2.1.7 更新到 2.1.9 之前一切正常（并且它与最新的有同样的问题）。

当我尝试在页面上执行某些操作时，我得到一个很长的异常：

```
Oct 18, 2012 6:14:10 PM com.sun.faces.util.Util checkIdUniqueness
SEVERE: JSF1007: Duplicate component ID tabs:imagesListForm:imagesListDG:j_idt55 found in view.
Oct 18, 2012 6:14:10 PM com.sun.faces.util.Util checkIdUniqueness
SEVERE: +id: j_id1
    type: javax.faces.component.UIViewRoot@4478de9f
        +id: javax_faces_location_HEAD

        ... (all the view tree here) ...

Oct 18, 2012 6:14:10 PM com.sun.faces.application.view.FaceletViewHandlingStrategy handleRenderException
SEVERE: Error Rendering View[/admin/objects/edit.xhtml]
java.lang.IllegalStateException: Component ID tabs:imagesListForm:imagesListDG:j_idt55 has already been found in the view.
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:842)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:826)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:826)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:826)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:826)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:826)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:826)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:826)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:826)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:826)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:826)
    at com.sun.faces.application.view.FaceletFullStateManagementStrategy.saveView(FaceletFullStateManagementStrategy.java:686)
    at com.sun.faces.application.StateManagerImpl.saveView(StateManagerImpl.java:89)
    at javax.faces.application.StateManager.getViewState(StateManager.java:553)
    at com.sun.faces.context.PartialViewContextImpl.renderState(PartialViewContextImpl.java:417)
    at com.sun.faces.context.PartialViewContextImpl.processPartial(PartialViewContextImpl.java:300)
    at javax.faces.context.PartialViewContextWrapper.processPartial(PartialViewContextWrapper.java:183)
    at javax.faces.component.UIViewRoot.encodeChildren(UIViewRoot.java:981)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:409)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:124)
    at com.ocpsoft.pretty.faces.application.PrettyViewHandler.renderView(PrettyViewHandler.java:163)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:145)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at uk.co.novaware.core.cdi.scope.ConversationFilter.doFilter(ConversationFilter.java:36)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:137)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.jboss.solder.servlet.event.ServletEventBridgeFilter.doFilter(ServletEventBridgeFilter.java:74)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.jboss.solder.servlet.exception.CatchExceptionFilter.doFilter(CatchExceptionFilter.java:65)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at uk.co.novaware.core.cdi.scope.ConversationFilter.doFilter(ConversationFilter.java:36)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680) 
```

ui:include 的工作方式是否发生了变化？有人有什么想法让它再次工作吗？我需要更新 JSF 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:41:18.180

快速修复：尝试说明所有元素的 ID 值。并确保 ID 是唯一的。

您可以检查生成的 html 中生成的 ID，以确定导致问题的标签。

# objective-c - 处理铃声

> ID：12960657
> 
> 赞同：0
> 
> 时间：2012-10-18T17:49:39.717
> 
> 标签：objective-c, ios5, ios6

> **可能重复：**
> [如何以编程方式使铃声静音或更改 iOS5 上的铃声](https://stackoverflow.com/questions/9320725/how-to-programmatically-silence-the-ringer-or-change-the-ringer-tone-on-ios5)

是否可以通过代码打开/关闭铃声？

是否可以通过代码将铃声从一种铃声更改为另一种铃声？

如果是这样，有人可以提供某种参考吗？

# sql - 从具有相同表外键约束的表中删除

> ID：12960661
> 
> 赞同：4
> 
> 时间：2012-10-18T17:49:54.427
> 
> 标签：sql, foreign-keys, constraints, sql-delete

我正在尝试运行此 sql server 语句：

```
delete C from Company C, Company D where C.CompanyID > 1310 AND C.CompanyID != D.ParentID 
```

我收到以下 sql 错误：

> DELETE 语句与 SAME TABLE REFERENCE 约束“FK_Company_Company”冲突。冲突发生在数据库“DevelopmentDB”、表“dbo.Company”、列“ParentID”中。

我查了一下，没有 ParentID = CompanyID 的公司。我很好奇为什么我的删除语句没有过滤掉会导致这个约束被打破的公司。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T18:11:45.393

您是否使用类似的方法验证了尝试的结果，以确保您尝试删除的内容是您实际打算删除的内容？

```
select C.<field list> from Company C, Company D 
where C.CompanyID > 1310 AND C.CompanyID != D.ParentID 
```

您也可以使用子查询方法尝试删除语句。它可能更容易从逻辑上识别您正在运行的查询是您真正想要的。

但是，我始终建议使用 select first 进行测试以进行验证。

所以运行（*如果这是您的预期结果 - 如果不是，请修改*）：

```
Select <field list> FROM Company WHERE CompanyID > 1310 
AND CompanyID NOT IN 
    (SELECT ParentID FROM Company) 
```

在运行之前（*同样，这只是一个示例*）。：

```
DELETE Company WHERE CompanyID > 1310 
AND CompanyID NOT IN 
    (SELECT ParentID FROM Company) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-12T20:17:09.933

在我有一个包含列和数据的表的情况下，我遇到了这个错误（“DELETE 语句与 SAME TABLE REFERENCE 约束冲突......”）：

```
| RecordID | ParentRecordID | (other fields...) |
|----------|----------------|-------------------|
|        1 |           null |               ... |   
|        2 |              1 |               ... | 
```

当我的 DELETE 命令尝试在记录 2 之前删除记录 1 时出现错误。在`ParentRecordID`指向列的列上设置的同表外键约束`RecordID`阻止了删除：记录 2 指向无效在记录 1 不再存在时记录 1。

我通过首先删除具有非空`ParentRecordID`值的记录来解决该问题：

```
DELETE FROM myTable
WHERE ParentRecordID IS NOT null
  AND (other criteria...) 
```

然后我可以继续使用附加的 DELETE 语句删除剩余的记录：

```
DELETE FROM myTable
WHERE (other criteria...) 
```

# javascript - Phonegap App：将所有数据存储在一个对象中

> ID：12960663
> 
> 赞同：0
> 
> 时间：2012-10-18T17:50:04.017
> 
> 标签：javascript, arrays, object, cordova, size

我目前正在开发一个带有 phonegap 和 jquerymobile 的应用程序。该应用程序包含许多将显示给用户的数据。所有数据都存储在 phonegap 存储实现中。数据将在列表视图、详细视图和过滤列表视图等中对用户可见 - 到目前为止没问题，但我的问题来了：

由于 phonegap 存储方法的异步方式（这会导致关系数据出现问题）以及大部分数据（至少部分）用于所有视图的事实，我正在考虑将所有数据存储在一个大的 javascript 中对象，因此所有数据都在启动时加载，并且不需要许多数据库操作。

我认为该对象将包含大约 10 个 2-4 维哈希数组，其中最大。2000-3000 个条目。

这是可能的，还是会减慢应用程序的速度。我可以或应该使用另一种方法吗？

* * *

对埃里克的回答：

但我意识到我应该多解释一下：

将在对象中的数据由 3 个数组组成，其中包含许多实体，如实体{名称、标题、副标题、描述、创建日期、更新日期、小字符串、小字符串、小字符串}，所有其他数组主要包含关系标识符对于 3 个更大的阵列。

这些数组都不会被更改或操纵 - 唯一可能发生的事情是由于与服务器同步而对所有数据进行完全更改。

同样重要的是，所有数据都存储在本地，并且由于该应用程序是使用 jquery mobile 实现的，因此不会重新加载页面 - 如果应该显示其他内容，则需要加载所需的 html javascript 并插入页。

还是没有好主意？如果是，那就不是好主意 - 什么是更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:52:26.860

我猜这取决于您所说的“条目”是什么意思，但在我看来，这听起来像是潜在的巨大负载负担，然后是内存中不必要的非常大的对象。首先，我建议在某处将对象表示为字符串。该事物中的字符数表示您实际每页加载的字节数，因为我假设它不会采用永远不会更改且浏览器必须解析的一次性加载 js 文件的形式页面加载后的傻事。

我的直觉告诉我，无论如何，这都是错误的做法。如果您需要超过 2D 数组，这听起来可以很好地进入兆字节，这将增加整秒的加载时间，但更重要的是，听起来您正在尝试做一些只能部分缓解的事情你真正的问题，如果有的话，因为这只能帮助你减少初始查找而不是更新，这是客户端异步可能变得非常混乱的地方。此外，如果这些数据有增长的潜力，那么现在看来可以管理的东西，将来很容易毁掉你的应用程序。

避免过多 HTTP 请求的关键是始终将静态数据烘焙到页面中，如果经济实惠的话（例如，您单击第一个选择框中的内容以加载相关选择框中的内容）。并尽可能缓存 ajax 调用的结果。

客户端逻辑中的关键是要有一个一致的、可管理的 API 来获取服务器端数据，并且在服务器确认它确实发生之前，永远不会将任何内容表示为已更改或已完成。

# c# - 创建没有输出参数的重载函数 double.TryParse

> ID：12960666
> 
> 赞同：0
> 
> 时间：2012-10-18T17:50:17.860
> 
> 标签：c#, asp.net-4.0

我有一个程序需要测试是否可以将字符串转换为双精度值，但对转换后的双精度值没有用处。

我可以在自己的 NameSpace 中创建自己的 TryParse 方法，但我是否应该能够在没有输出参数的同一个命名空间中添加函数的重载形式？

```
namespace System
{
    using System;

    /// <summary>
    /// TODO: Update summary.
    /// </summary>
    public class Double
    {
        public bool TryParse(string value)
        {
            double outDouble;
            return Double.TryParse(value, out outDouble);
        }
    }

} 
```

我收到此错误：

```
Error   1   No overload for method 'TryParse' takes 2 arguments 
```

因为我的班级隐藏了真正的 Double 班级。

**更新：**

与此相同的错误：

```
namespace System
{   
    /// <summary>
    /// TODO: Update summary.
    /// </summary>
    public static class Double
    {
        public static bool TryParse(string value)
        {
            double outDouble;
            return global::System.Double.TryParse(value, out outDouble);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:56:43.167

我会创建一个[扩展方法](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)。由于您无法创建静态扩展方法（该`TryParse`方法是静态方法），因此您必须将其放在其他地方。我看到你的参数只是一个字符串，你可以添加一个扩展方法`string`，例如命名`IsDouble`。

```
namespace MyNamespace
{
    public static class StringExtensions
    {
        public static bool IsDouble(this string value)
        {
            double outDouble;
            return Double.TryParse(value, out outDouble);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:57:46.987

*这里的*问题是您用*自己*的. 这意味着当您尝试调用时，编译器正在查看您的类，这就是报告的错误。`System.Double` *`System.Double``System.Double.TryParse`*

 *您需要更改命名空间或类名。*

# c# - 在 C# 中使用 Stream.Readbyte 和 stream.Writebyte 进行读写

> ID：12960670
> 
> 赞同：0
> 
> 时间：2012-10-18T17:50:39.950
> 
> 标签：c#, stream

以下代码有什么问题？

```
 Stream inputstream = File.Open("e:\\read.txt", FileMode.Open);
        Stream writestream = File.Open("e:\\write.txt", FileMode.OpenOrCreate);

        do
        {
            writestream.WriteByte((byte)inputstream.ReadByte());
        }
        while (inputstream.ReadByte() != -1); 
```

read.txt 有“快速棕色狐狸跳过懒狗”。

而 write.txt 文件包含的内容很少，只是略读“teqikbonfxjme vrtelz o”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T17:52:00.293

您只写每隔一个字节，因为您在`while`支票中消耗了一个。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T17:53:55.883

您只写入奇数字节，因为在`where`条件下进行另一次读取时您正在跳过偶数字节。

以这种方式修改您的代码：

```
int byteRead;
while((byteRead = inputstream.ReadByte()) != -1)
   writestream.WriteByte((byte)byteRead); 
```

顺便说一句，您可以`File.Copy("e:\\read.txt", "e:\\write.txt")`改用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T17:52:28.200

试试这个：

```
while (inputstream.Position <= inputstream.Length)
{
    writestream.WriteByte((byte)inputstream.ReadByte());
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T17:56:13.477

该`inputstream.ReadByte()`方法使您的光标移动一个。

您需要读取一次字节，如果不是 -1 则写入。就像这样：

```
int read = inputstream.ReadByte();
while (read != -1)
{ 
    writestream.WriteByte((byte)read ); 
    read = inputstream.ReadByte();
} 
```

# arrays - VB.Net 使用字符串构造数组的名称以在函数中使用？

> ID：12960671
> 
> 赞同：2
> 
> 时间：2012-10-18T17:50:48.080
> 
> 标签：arrays, vb.net, .net-4.0

我有两组锯齿状数组，分别命名为 P1 到 P6 和 Z1 到 Z6，其内容是 P 数组中的水果和 Z 数组中的汽车。我还有一个函数可以从这些数组之一中获取值：

```
Public Function retL(ByVal L As Array)
    Dim maxL As Integer = L.GetUpperBound(0)
    Dim numL As Integer = randomizer(maxL)
    Dim resL As String = L.GetValue(numL - 1)
    Return resL
End Function 
```

L，在上面，由以下代码构成：

```
 Dim L As String = "P" & randomizer(6)
       or
 Dim L As String = "Z" & randomizer(6) 
```

所以，我的问题是这些都不起作用。因为 L 被构造为一个字符串，但随后被 retL 作为一个数组调用，所以它失败了。如果我尝试将 L 构造为一个数组开始，它会失败。如果我尝试将其称为字符串，则会失败。我对从这里开始的地方感到迷茫和困惑。显然我正在尝试做的事情是可能的，但我显然也错过了重要的一步，或者我没有掌握一些基本概念。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:58:07.187

你真正想要的是一个数组数组。代替：

```
Dim P1(n) As String
Dim P2(n) As String
'... 
Dim P6(n) As String
'...
Dim Z6(n) As String 
```

...其中'n'是数组的大小，你应该有更多这样的东西：

```
Dim P(5, n) As String
Dim Z(5, n) As String 
```

请注意，我使用了 5 而不是 6，因为在 VB.Net 中，数组是零索引的，而不是一索引的，并且下标是最后一项的索引，而不是项的数量。所以`Dim P(5, n) As String`给你一个二维字符串数组，第一维上有六个项目。

现在你的函数应该是这样的：

```
Public Function retL(ByVal L() As String) As String
    Return L(randomizer(L.Length)-1)
End Function 
```

您可以像这样从当前代码中调用该函数：

```
Dim result As String = retL(P(randomizer(6) - 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:17:55.683

这是一个做几件事的小测试类

```
Class TestRandomArrays
    Private L As String()
    Private randomizer As New Random()

    Public Sub InitializeArrayWithRandomLength()
        ' Creates an array of length between 0 and 5
        L = New String(randomizer.[Next](6) - 1) {}
    End Sub

    Public Sub FillArrayWithRandomText()
        For i As Integer = 0 To L.Length - 1
            L(i) = "P" & randomizer.[Next]()
        Next
    End Sub

    Public Function ReturnRandomArrayItem() As String
        Return L(randomizer.[Next](L.Length))
    End Function
End Class 
```

`array(index)`使用语法通过索引访问数组项。

该`Next`方法周围的括号是由于它`Next`是VB中的关键字。它们告诉 VB 编译器这`Next`是一个标识符而不是关键字。

`Random.Next(max)``0`返回和之间的整数`max-1`。

`New String(n) {}`定义了一个索引范围为`0..n`的数组，因此定义了一个长度为 的数组`n+1`。

这不是锯齿状阵列。锯齿状数组是数组的数组，即结果变量将（至少）具有二维。

# apache-flex - Flex 3：带有下划线文本的 ButtonBar 按钮

> ID：12960682
> 
> 赞同：0
> 
> 时间：2012-10-18T17:51:12.820
> 
> 标签：apache-flex, actionscript, buttonbar

我正在使用 Flex 3 构建一个带有多个选项的按钮栏。是否可以在我的按钮标签上加下划线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:59:03.863

只需设置按钮的 textDecoration 属性。

```
<s:Button width="15%" height="32%" label="myButton" click="myButton_clickHandler(event)" textDecoration="underline"/> 
```

也适用于按钮栏。

```
<s:ButtonBar textDecoration="underline">

</s:ButtonBar> 
```

# jquery - 在 IE9 中使用 AJAX 从 SOAP 响应中解析 XML 数据，无法获取子节点的值

> ID：12960683
> 
> 赞同：1
> 
> 时间：2012-10-18T17:51:16.917
> 
> 标签：jquery, xml, ajax, soap

我正在使用 AJAX 解析来自 Web 服务的 SOAP 响应，它在 Firefox 和 Chrome 中运行良好。但是，在 IE8 和 9 中，我无法访问“投票”节点下的子节点的值。

示例 xml：

```
<ns1:getvotesResponse>
<arg1/>
<arg2/>
<arg3/>
<locID>0371</locID>
<votes>
    <candidateone>131013</candidateone>
    <candidatetwo>8079</candidatetwo>
    <candidateonestart>632</candidateonestart>
    <candidatetwostart>53</candidatetwostart>
    <candidateonespeed>0.001</candidateonespeed>
    <candidatetwospeed>0.0005</candidateonespeed>
</votes>
</ns1:getvotesResponse> 
```

我已经尝试了各种代码来尝试从“投票”下的任何节点获取值，但 IE 根本不会显示它们。

示例：我在这里找到的回复之一说要使用这个：

```
var xmlText = $(envObj).find("soap\\:Envelope").find("soap\\:Body").find("getvotesResponse").find("votes").find("candidateone").text(); 
```

*   当我将 xmlText 的值打印到控制台时，它什么也不返回。

我也试过这个：

```
console.log(envObj.votes); 
```

*   它以一个长值返回所有子节点的值，如下所示：1310138079632530.0010.0005

我如何能够分别解析出子节点的每个值，以便我可以将它们作为参数传递？

# python - Python 和 Twisted：使用 message-id 制作 utf-8 html 邮件

> ID：12960687
> 
> 赞同：1
> 
> 时间：2012-10-18T17:51:24.490
> 
> 标签：python, smtp, twisted

我正在尝试使用 Twisted 向 Gmail 发送电子邮件，但遇到了一些奇怪的问题。

首先，[此](http://findingscience.com/python/twisted/2011/01/22/sending-email-with-python-twisted.html "这")方法适用于简单的纯文本消息。但是，当我尝试将此片段与[本文](http://www.askthepony.com/blog/2011/06/how-to-send-a-proper-unicode-encoded-email-using-python-2-7/ "本文")中的 cStringIO 数据一起使用时，我收到了没有标题的空消息，并且我的电子邮件作为收件人。

现在，我想，我忘记了一些简单的事情，但我什么都没有，今天试图找到答案。所以，我的问题的最终来源是：

```
from twisted.internet import defer
from twisted.mail import smtp, relaymanager
from twisted.internet import reactor
from cStringIO import StringIO

from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText
from email.header import Header
from email import Charset
from email.generator import Generator
from email.Utils import make_msgid

MXCALCULATOR = relaymanager.MXCalculator()

def getMailExchange(host):
    def cbMX(mxRecord):
        return str(mxRecord.name)
    return MXCALCULATOR.getMX(host).addCallback(cbMX)

def sendEmail(mailFrom, mailTo, msg, subject=""):
    def dosend(host):
        print "emailing %s (using host %s) from %s" % (mailTo, host, mailFrom)

        html = u'<html><body>You\'re registered. Now you should use site.</body></html>'
        text = u'You\'re registered. Now you should use site.'

        # Override python's weird assumption that utf-8 text should be encoded with
        # base64, and instead use quoted-printable (for both subject and body).  I
        # can't figure out a way to specify QP (quoted-printable) instead of base64 in
        # a way that doesn't modify global state. :-(
        Charset.add_charset('utf-8', Charset.QP, Charset.QP, 'utf-8')

        # This example is of an email with text and html alternatives.
        multipart = MIMEMultipart('alternative')

        # We need to use Header objects here instead of just assigning the strings in
        # order to get our headers properly encoded (with QP).
        # You may want to avoid this if your headers are already ASCII, just so people
        # can read the raw message without getting a headache.
        multipart['Subject'] = Header(subject.encode('utf-8'), 'UTF-8').encode()
        multipart['To'] = Header(mailTo.encode('utf-8'), 'UTF-8').encode()
        multipart['From'] = Header(mailFrom.encode('utf-8'), 'UTF-8').encode()
        multipart['Message-Id'] = Header(make_msgid('e_shop').encode('utf-8'), 'UTF-8').encode()

        # Attach the parts with the given encodings.
        htmlpart = MIMEText(html.encode('utf-8'), 'html', 'UTF-8')
        multipart.attach(htmlpart)
        textpart = MIMEText(text.encode('utf-8'), 'plain', 'UTF-8')
        multipart.attach(textpart)

        # And here we have to instantiate a Generator object to convert the multipart
        # object to a string (can't use multipart.as_string, because that escapes
        # "From" lines).

        io = StringIO()
        g = Generator(io, False) # second argument means "should I mangle From?"
        g.flatten(multipart)

        d = defer.Deferred()
        factory = smtp.ESMTPSenderFactory(None, None, mailFrom, mailTo, io, d,
                                          requireAuthentication=False,
                                          requireTransportSecurity=False)
        reactor.connectTCP(host, 25, factory)
        return d
    return getMailExchange(mailTo.split("@")[1]).addCallback(dosend)

d = sendEmail('admin@mysite.me', 'myemail@gmail.com', 'template filename', 'this is a test subject')
d.addCallback(lambda _: reactor.stop())

reactor.run() 
```

我应该改变什么才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-28T01:05:20.400

以下对我有用（减去 subs）它是一个多部分消息 - 也许你可以得到 message-id：

```
fn = "example.mp3"
multipart = MIMEMultipart('alternative')
multipart['Subject'] = 'Tutorate!'
multipart['To'] = 'Selfie'
multipart['From'] = 'Selfie'

text = "Hello, how are you, goodbye."
textpart = MIMEText(text)
multipart.attach(textpart)
htmlpart = MIMEText("<html>" + text + "</html>", 'html')
multipart.attach(htmlpart)

part = MIMEBase('audio', "mp3")
part.set_payload( open(fn,"rb").read() )
Encoders.encode_base64(part)
part.add_header('Content-Disposition', 'attachment; filename="%s"' % os.path.basename(fn))
multipart.attach(part)

io = StringIO.StringIO()
g = Generator(io, False)  # second argument means "should I mangle From?"
g.flatten(multipart)
v = io.getvalue()

class SMTPTutorialClient(smtp.ESMTPClient):
    mailFrom = "selfie@~"
    mailTo = "selfie@~"
    def getMailFrom(self):
        result = self.mailFrom
        self.mailFrom = None
        return result

    def getMailTo(self):
        return [self.mailTo]

    def getMailData(self):
        #print v
        return StringIO.StringIO(v)

    def sentMail(self, code, resp, numOk, addresses, log):
        print 'Sent', numOk, 'messages'

        from twisted.internet import reactor
        reactor.stop() 
```

# c++ - C 和 C++ 中的几个一元运算符

> ID：12960690
> 
> 赞同：0
> 
> 时间：2012-10-18T17:51:33.303
> 
> 标签：c++, c

使用像这样的表达式是否符合标准

```
int i = 1;
+-+-+i; 
```

以及如何确定 i 变量的符号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T17:53:46.030

是的。一元`+`并`-`从右到左关联，因此表达式被解析为

```
+(-(+(-(+i)))); 
```

这导致`1`.

请注意，这些可以重载，因此对于用户定义的类型，答案可能会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:56:51.697

您的运算符没有副作用，`+i`对 int 本身不做任何事情，并且您不使用临时生成的值，但删除`+`它什么都不做，并且您的`-(-i)`女巫等于`i`它自己。（`+`在代码中删除将转换运算符，我的意思是将其删除计算，因为它没有效果）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T17:53:28.647

`i`没有被修改（C：没有干预序列点|C++：以无序列的方式）所以它是合法的。您只是在为每个操作员创建一个新的临时对象。

一元`+`甚至什么都不做，所以你所拥有的只是两个否定，它们只是给出`1`那个表达式。变量`i`本身永远不会改变。

# spring - 带有 JSON 和 JSP 的 Spring MVC 控制器

> ID：12960693
> 
> 赞同：3
> 
> 时间：2012-10-18T17:51:39.297
> 
> 标签：spring, rest, spring-mvc

控制器中的相同方法能否同时用于 JSP 和其他 MIME 类型（如 XML 和 JSON）？

我知道以下在 Spring MVC 中解析视图的方法。

1.  返回`String`带有视图名称的 a 并将属性添加到`Model`or`ModelMap`
2.  返回`ModelAndView`带有视图名称和模型的 a
3.  返回`Object`带有`@ResponseBody`注释的

我在处理 JSP 时使用 1 或 2，当我想返回 JSON 或 XML 时使用 3。

我知道我可以使用两种方法并使用`@RequestMapping(headers="accept=application/xml")`or`@produces`注释来定义它们处理的 MIME 类型，但是是否可以只用一种方法来做到这一点？

控制器逻辑非常简单，映射两个返回相同精确模型的不同方法似乎是不必要的重复，或者这只是它的完成方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T08:49:36.427

是的，这在 Spring MVC 3.x 中是直截了当的......

您基本上只为普通的 JSP 页面视图编写控制器方法，然后`ContentNegotiatingViewResolver`在 Dispatcher servlet 配置中配置一个 bean，它查看请求的 mime 类型（或文件扩展名）并返回适当的输出类型。

请按照此处的说明进行操作：[Spring 3 MVC ContentNegotiatingViewResolver Example](http://www.mkyong.com/spring-mvc/spring-3-mvc-contentnegotiatingviewresolver-example/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-18T01:05:49.503

我最近有同样的要求，下面是我的代码。validateTicket 返回 jsp 名称， sendForgotPassword 邮件返回 json。我的春季版本是 4.0.0.RELEASE。当然，如果我需要返回复杂的 json，那么我肯定会注册 Jackson 转换器 - [http://docs.spring.io/spring/docs/4.0.x/javadoc-api/org/springframework/http/converter/json /MappingJackson2HttpMessageConverter.html](http://docs.spring.io/spring/docs/4.0.x/javadoc-api/org/springframework/http/converter/json/MappingJackson2HttpMessageConverter.html)

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd">

<context:component-scan base-package="foo.bar" />
<bean id="viewResolver"
    class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean>
</beans>

@Controller
@RequestMapping("/forgot-password")
public class ForgotPasswordController {

@RequestMapping(value="/reset-password", method = RequestMethod.GET)
public String validateTicket(@RequestParam String ticket, @RequestParam String emailAddress) {
    return "resetPassword";
}

@RequestMapping(value="/send-mail", method = RequestMethod.POST, produces="application/json")
public @ResponseBody String sendForgotPasswordMail(@RequestParam String emailAddress) throws LoginException {
    return "{\"success\":\"true\"}";
}
} 
```

# mysql - 将 mysql2 类型转换为数组并在 ruby 中对其进行排序

> ID：12960697
> 
> 赞同：5
> 
> 时间：2012-10-18T17:52:00.250
> 
> 标签：mysql, ruby-on-rails, ruby, arrays, ruby-on-rails-3

我的 ruby​​ 文件中有一个查询：

```
@mastertest = connection.execute("select code_ver,date from mastertest") 
```

我打印查询的结果如下：

```
@mastertest.each do |row|
  puts row[0] : row[1]
end 
```

这将打印所有`code_ver`看起来像这样的“日期”

```
2.0 : 2012/12/10
3.1 : 2012/11/03
2.5 : 2012/07/08
1.8 : 2012/12/11
2.5 : 2012/03/01 
```

现在我想根据我的 对这个数组进行排序`code_ver`，但问题是 ruby​​ 不认为这是一个数组，它说它是一些 mysql2 类型。

我该如何进一步进行？我想将这个东西转换为二维数组，或者我想根据`row[0]`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T18:36:47.793

你得到一个 MySQL 结果集对象，`@mastertest`结果集不是一个数组。

如果你正在使用`mysql2`，那么你应该有一个[`Mysql2::Result`](http://rubydoc.info/gems/mysql2/Mysql2/Result)，那就是`Enumerable`它有一个[`to_a`](https://ruby-doc.org/core/Enumerable.html#method-i-to_a)方法：

```
@mastertest.to_a.sort { ... } 
```

如果您使用的是`mysql`gem，那么您应该有 a[`Mysql::Result`](http://rubydoc.info/gems/mysql/Mysql/Result)并且您必须`@mastertest`手动转换为 Array：

```
a = [ ]
@mastertest.each { |r| a.push(...) }
a.sort { ... } 
```

或者您可以简单地让数据库进行排序：

```
@mastertest = connection.execute('select code_ver, date from mastertest order by code_ver') 
```

# msbuild - MsBuild 和 MsDeploy 问题

> ID：12960700
> 
> 赞同：3
> 
> 时间：2012-10-18T17:52:06.673
> 
> 标签：msbuild, publish, msdeploy

当我通过 gui(VS2010) 发布 Web 项目时（右键单击项目并选择发布菜单项，发布方法 - Web 部署） - 一切正常。

当我尝试通过命令行发布时出现问题：MSBUILD 或 MsDeploy。

使用 MSBuild 创建包而不发布（仅创建包）：

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSbuild.exe" Project.sln /p:DeployOnBuild=true /p:DeployTraget=MSDeployPublish /p:MSDeployPublishMethod=WMSVC /p:MSDeployServiceUrl=https://[ip]/msdeploy.axd /p:AllowUntrustedCertificate=true  /p:DeployIisAppPath=NlbTestSite /p:UserName=M\DeployUser /p:Password=qwerty 
```

使用 MsDeploy 我得到一个错误：ERROR_USER_UNAUTHORIZED

```
E:\Work\OutDir\MSDeploy\Package.deploy.cmd" /Y /M:"https://[ip]:8172/msdeploy.axd" /U:"M\DeployUser" /P:"qwerty" -allowUntrusted /A:Basic 
```

我的目标是使用其中一种方法自动化部署过程。

我想了解 Visual Studio 如何发布我的项目（带有什么参数的命令）？

**更新 19.10.2012 14:52**

当我添加`/p:UseMsDeployExe=true`时，`msdeploy.exe`执行，但没有复制任何内容。

执行命令：

```
C:\Program Files\IIS\Microsoft Web Deploy V3\msdeploy.exe -source:manifest='E:\[Path]\obj\Debug\Package\[Project].SourceManifest.xml' -dest:package='E:\[Path]\[Project]\obj\Debug\Package\[Project].zip',IncludeAcls='False' -verb:sync -disableLink:AppPoolExtension -disableLink:ContentExtension -disableLink:CertificateExtension -declareParam:name='IIS Web Application Name',kind='ProviderPath',scope='IisApp',match='^E:\\[Path]\\obj\\Debug\\Package\\PackageTmp$',defaultvalue='[SiteName]',tags='IisApp' -declareParam:name='IIS Web Application Name',kind='ProviderPath',scope='setAcl',match='^E:\\[Path]\\obj\\Debug\\Package\\PackageTmp$' -declareParam:name='Add write permission to App_Data Folder',kind='ProviderPath',scope='setAcl',match='^E:\\[Path]\\obj\\Debug\\Package\\PackageTmp\\App_Data$',description='Add write permission to App_Data folder',defaultvalue='{IIS Web Application Name}/App_Data',tags='Hidden' -declareParam:name='MainModelContainer-Web.config Connection String',kind='XmlFile',scope='E:\\[Path]\\OutDir\\temp\\Web\.config$',match="/configuration/connectionStrings/add[@name='MainModelContainer']/@connectionString",description='MainModelContainer Connection String used in web.config by the application to access the database.',defaultvalue='metadata=[ConnectionString]"',tags='SqlConnectionString' -declareParam:name='SimpleConnection-Web.config Connection String',kind='XmlFile',scope='E:\\[Path]\\OutDir\\temp\\Web\.config$',match="/configuration/connectionStrings/add[@name='SimpleConnection']/@connectionString",description='SimpleConnection Connection String used in web.config by the application to access the database.',defaultvalue='[ConnectionString]',tags='SqlConnectionString' -declareParam:name='ElmahDB-Web.config Connection String',kind='XmlFile',scope='E:\\[Path]\\OutDir\\temp\\Web\.config$',match="/configuration/connectionStrings/add[@name='ElmahDB']/@connectionString",description='ElmahDB Connection String used in web.config by the application to access the database.',defaultvalue='[ConnectionString]',tags='SqlConnectionString' -retryAttempts=2 
```

不传递任何参数，例如计算机名称、用户或密码。关于原因的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:13:15.727

问题解决了。[从http://root-project.org/work/net/automated-web-deployment-with-msbuild-and-msdeploy](http://root-project.org/work/net/automated-web-deployment-with-msbuild-and-msdeploy)得到一些想法

我将 msbuild 和 msdeploy 分开，并明确执行 msdeploy。这是模板：

```
msdeploy.exe
-source:package=’C:\SomeWebProject\obj\Release\Package\SomeWebProject.zip‘
-dest:auto,ComputerName=’https://TargetServer:8172/MsDeploy.axd?site=TargetWebSite‘,UserName=’Username‘,Password=’Password‘,IncludeAcls=’False’,AuthType=’Basic’
-verb:sync
-disableLink:AppPoolExtension
-disableLink:ContentExtension
-disableLink:CertificateExtension
-allowUntrusted
-retryAttempts=2
-setParam:’IIS Web Application Name’=’TargetWebSite/TargetWebApp‘ 
```

但是 msbuild 的问题仍然存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:15:10.387

在您的`pubxml`文件中，声明以下内容：

```
<PropertyGroup>
    <UseMsDeployExe>true</UseMsDeployExe>
</PropertyGroup> 
```

现在，当您部署时，您应该会`msdeploy.exe`在 publih 日志中看到对的调用。

但请注意，它实际上将直接调用 msdeploy.exe，而不是通过生成的`deploy.cmd`文件。

# javascript - 如何在 AngularJS 控制器中获取当前范围的 dom 元素？

> ID：12960701
> 
> 赞同：53
> 
> 时间：2012-10-18T17:52:07.970
> 
> 标签：javascript, jquery, dom, scope, angularjs

我有一个outerItems 列表。在每个outerItem 内，我都有一个innerItems 列表。它们是动态排序的。

当鼠标光标指向其中一个innerItems 时，我必须在该innerItem 元素的正上方显示弹出窗口。

弹出 div 是 body 的子项，因为我不想为每个 innerItems 单独弹出一个弹出窗口。

正如我所看到的那样——`ng-mouseover`我调用了将左/上属性设置为绝对定位弹出窗口的函数。因此，对于每个 innerItems，我想调用 jQuery`.offset()`方法，该方法从页面的左上角为我提供左/上值。

那么如何获取当前作用域元素的 jQuery 对象呢？或者，如果我选择了错误的方式

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-10-20T10:41:39.250

在控制器中：

```
function innerItem($scope, $element){
    var jQueryInnerItem = $($element); 
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-18T16:30:55.830

更好和正确的解决方案是有一个指令。范围是相同的，无论是在指令的控制器还是主控制器。用于`$element`做 DOM 操作。指令控制器中定义的方法可在主控制器中访问。

示例，查找子元素：

```
var app = angular.module('myapp', []);
app.directive("testDir", function () {
    function link(scope, element) { 

    }
    return {
        restrict: "AE", 
        link: link, 
        controller:function($scope,$element){
            $scope.name2 = 'this is second name';
            var barGridSection = $element.find('#barGridSection'); //helps to find the child element.
    }
    };
})

app.controller('mainController', function ($scope) {
$scope.name='this is first name'
}); 
```

# delphi - 来自字符串的枚举

> ID：12960702
> 
> 赞同：5
> 
> 时间：2012-10-18T17:52:09.683
> 
> 标签：delphi, delphi-2010

鉴于下面的声明，有没有办法从字符串值（例如'one'）中检索枚举值（例如jt_one）？

```
type
 TJOBTYPEENUM =(jt_one, jt_two, jt_three);

CONST JOBTYPEStrings : ARRAY [jt_one..jt_three] OF STRING =
     ('one','two','three'); 
```

还是我需要使用一组嵌套的 if 语句创建自己的函数？

注意：我不是在寻找字符串“jt_one”

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T17:55:41.427

```
function EnumFromString(const str: string): TJOBTYPEENUM;
begin
  for Result := low(Result) to high(Result) do 
    if JOBTYPEStrings[Result]=str then
      exit;
  raise Exception.CreateFmt('Enum %s not found', [str]);
end; 
```

在实际代码中，您希望使用自己的异常类。如果您想允许不区分大小写的匹配，请使用`SameText`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-18T17:55:34.100

```
function GetJobType(const S: string): TJOBTYPEENUM;
var
  i: integer;
begin
  for i := ord(low(TJOBTYPEENUM)) to ord(high(TJOBTYPEENUM)) do
    if JOBTYPEStrings[TJOBTYPEENUM(i)] = S then
      Exit(TJOBTYPEENUM(i));
  raise Exception.CreateFmt('Invalid job type: %s', [S]);
end; 
```

或者，更整洁，

```
function GetJobType(const S: string): TJOBTYPEENUM;
var
  i: TJOBTYPEENUM;
begin
  for i := low(TJOBTYPEENUM) to high(TJOBTYPEENUM) do
    if JOBTYPEStrings[i] = S then
      Exit(i);
  raise Exception.CreateFmt('Invalid job type: %s', [S]);
end; 
```

# mysql - 哪个 mysql join 更适合这个例子

> ID：12960708
> 
> 赞同：0
> 
> 时间：2012-10-18T17:52:23.450
> 
> 标签：mysql

我有 2 个表，表 a 和表 b，内容如下

```
**Table a**  :  **Id    date**
            830     2005-09-21
            830     2006-01-04
            830     2006-03-15
            930     2006-05-03
            930     2006-06-21

**Table b**  :  **Id    new_date**
            830   2005-09-21
            830   2006-09-21
            930   2007-09-21 
```

所需的输出表应如下所示

```
 **id      date          new_date**
            830     2005-09-21    2005-09-21
            830     2006-01-04
            830     2006-03-15
            830                   2006-09-21
            930     2006-05-03
            930     2006-06-21
            930                   2007-09-21 
```

我已经尝试过左连接和其他一些连接，但没有提到上面的输出。我应该使用哪个 mysql 连接？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:58:52.467

我建议您尝试将表 B 左连接到 A，将结果别名为 C，然后将 C 右连接回到 B。

像这样的东西：

`Select * from (Select A.id, A.date, B.new_date from A left join B on A.id = B.id and A.date = B.new_date) C right join B on C.id = B.id;`

# jquery - 如何获得所有父母，直到达到某个父母

> ID：12960713
> 
> 赞同：16
> 
> 时间：2012-10-18T17:52:41.820
> 
> 标签：jquery, traversal, jquery-traversing

我需要介于 和 的功能之间的`.closest()`东西`.parents()`。我正在将一些 CSS 应用于某个元素的所有父元素，直到某个父元素。现在我正在`while`循环，但似乎有更好的方法来做到这一点。

```
var goUp = $(".distant-child");
while(!goUp.hasClass("ancestor-to-stop-at")){
    goUp.css("height","100%");
    goUp = goUp.parent();
} 
```

我宁愿做这样的事情之一：

```
$(".distant-child").closest(".ancestor-to-stop-at").css("height","100%"); //won't work because .closest() only returns the top ancestor
$(".distant-child").parents(".ancestor-to-stop-at").css("height","100%"); //won't work because .parents() doesn't take this parameter and won't stop at the specified element. 
```

我怎样才能在没有`while`循环的情况下实现这一点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-18T17:54:08.920

你可以使用jquery[`parentsUntil()`](https://api.jquery.com/parentsUntil/)函数

```
$(".distant-child").parentsUntil(".ancestor-to-stop-at").css("height","100%"); 
```

# c# - 将现有的 Winform 更改为 wpf

> ID：12960715
> 
> 赞同：-4
> 
> 时间：2012-10-18T17:52:44.077
> 
> 标签：c#, wpf

有什么办法可以将我现有的 winform 应用程序更改为 WPF，我使用过 c#.net 和 SQL Server 2005，我是 WPF 的初学者，请在回答之前考虑一下。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T17:57:13.147

不——没有“自动”切换方式——你也不想这样做。

虽然可以以与 Windows 窗体非常相似的方式编写 WPF，但您通常不希望这样做。这真的违背了改变的目的。当您充分利用 Xaml 和数据绑定时，WPF 的优势就会真正发挥作用，而自动转换不会发生这种情况。

话虽如此，始终可以开始在 WPF 中编写一些新的用户界面，并且仍然可以在现有的 Windows 窗体项目中使用它们（通过`ElementHost`）。这允许*转换*到 WPF，而不必一次“转换”。

任何正确解耦的应用程序逻辑都可以从 Windows 窗体和 WPF 中使用，因此唯一需要更改的是应用程序中与用户界面相关联的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:56:13.493

这取决于您的项目结构，WPF 是关于 UI 的。如果您有一个分层的解决方案，您可以简单地将其 UI 从 WinForm 更改为 WPF，但是没有自动的方法可以做到这一点，您必须重写您的 UI。

# android - 使用访问令牌登录 Facebook

> ID：12960717
> 
> 赞同：2
> 
> 时间：2012-10-18T17:52:49.857
> 
> 标签：android, facebook, facebook-access-token

无论如何存储访问令牌以供以后使用？

IE：user1 登录到我的应用程序，然后使用 Facebook 登录 Dialog Auth
应用程序存储 facebook 访问令牌
user1 注销我的应用程序
user2 登录到我的应用程序，然后使用 Facebook Dialog Auth
登录 user2 注销我的应用程序
user1 重新登录我的应用程序应用程序并继续使用 facebook，访问令牌存储在第一次登录时存储？

===

我应该澄清一下......我正在尝试找出将多个 Facebook 帐户绑定到我的应用程序中。这样当不同的用户登录时，他们就可以访问各自的 Facebook 帐户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T17:56:26.973

访问令牌会随着时间的推移而过期。所以你应该在用户重新登录时检查它是否有效，并在遇到[**这里**](http://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)提到的方式时处理过期的访问令牌。

如果您希望使用 offline_access 延长到期日期，那很快就会消失。现在，您将不得不更新[此处](https://developers.facebook.com/roadmap/offline-access-removal/)提到的访问令牌。

**offline_access 权限已于 2012 年 12 月 5 日被弃用并删除**

# jsf - 试图理解 immediate="true" 在不应该的时候跳过输入

> ID：12960718
> 
> 赞同：26
> 
> 时间：2012-10-18T17:53:00.543
> 
> 标签：jsf, commandbutton, immediate-attribute

就在我以为我立刻明白了……*叹息*

考虑以下 JSF 页面：

```
<h:inputText value="#{testBean.text}" required="true" />
<h:commandButton actionListener="#{testBean.doFoo}" value="Do Foo" />
<h:commandButton immediate="true" actionListener="#{testBean.doBar}" value="Do Bar" /><br />
<h:outputText value="#{testBean.didSomething}" /> 
```

而这个支持bean：

```
public class TestBean {
   private String didSomething = "Nothing done yet";
   // + getter

public void doFoo() {
    didSomething = "Did foo!";        
}

public void doBar() {
    didSomething = "Did bar!";        
} 
```

从我读到的关于立即的所有内容中，我期望以下内容：

*   当尝试在没有为输入字段提供值的情况下执行 foo 时，该操作永远不会执行，因为在`processValidationsPhase`发生错误期间，导致在此阶段之后直接重新渲染页面并显示错误消息。的值`didSomething`保持不变。（这按预期工作）

*   当尝试在不为输入字段提供值的情况下执行 bar 时，`applyRequestValuesPhase`由于 immediate 属性，该操作将在 during 期间执行。变量`didSomething`已更改。（这按预期工作）

关于接下来会发生什么，[此描述](https://cwiki.apache.org/confluence/display/MYFACES/How+the+immediate+attribute+works)指出：

> “空返回值（作为操作方法的结果）导致处理正常继续，即验证非立即组件然后执行更新模型（如果没有发生验证错误）。对于返回 void 的操作侦听器方法，如果不需要正常流程，则有必要调用 facesContext.renderResponse();。”

由此我认为处理会继续正常进行（因为我的操作方法既不返回结果也不返回 force `renderResponse()`），从而导致相同的验证错误。唯一的区别是它发生*在*设置之后`didSomething`。**但是，这不会发生。**相反，感觉网站仍然跳过了所有剩余的阶段，没有触摸输入字段。它重新渲染而没有错误消息。

**有人可以向我解释我对它是如何工作的理解有问题吗？**

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-18T18:19:48.670

使用`immediate="true"`按钮，在应用请求值阶段确实会调用该操作，并跳过所有剩余阶段。这也是该属性的唯一要点：在应用请求值阶段立即处理（解码、验证、更新和调用）组件。

*无论如何，所有没有*的输入都会`immediate="true"`被忽略。只有确实有的输入`immediate="true"`也会被处理，但这也发生在应用请求值阶段。如果在应用请求值阶段已经发生了一切，为什么还要调用剩余的阶段？

在[Debug JSF 生命周期](http://balusc.blogspot.com/2006/09/debug-jsf-lifecycle.html)文章中，您可以找到以下摘要，该摘要应该启发何时（不）使用`immediate"true"`：

> ## 好的，我什么时候应该使用 immediate 属性？
> 
> 如果还不完全清楚，这里有一个总结，其中包含可能有益的真实世界使用示例：
> 
> *   如果`UIInput`仅在 (s) 中设置，则流程验证阶段将改为在应用请求值阶段进行。使用它来优先验证有`UIInput`问题的组件。当其中任何一个的验证/转换失败时，非即时组件将不会被验证/转换。
>     
>     
> *   如果`UICommand`仅设置，则任何组件都将跳过应用请求值阶段直到更新模型值阶段`UIInput`。使用它跳过表单的整个处理过程。例如“取消”或“返回”按钮。
>     
>     
> *   如果在`UIInput`和组件中都设置了，则对于没有设置此属性`UICommand`的任何组件，将跳过应用请求值阶段直到更新模型值阶段。`UIInput`使用它来跳过对某些字段的整个表单的处理（立即）。例如，登录表单中的“忘记密码”按钮带有必填但非即时的密码字段。

### 也可以看看：

*   [为什么将“立即”属性添加到 EditableValueHolders？](https://stackoverflow.com/questions/13071512)

# php - 使用 php 和 mysql 将图像更新到数据库中

> ID：12960727
> 
> 赞同：1
> 
> 时间：2012-10-18T17:53:38.903
> 
> 标签：php, mysql, html, css

我想不是通过插入而是通过更新（通过使用 UPDATE 查询）将图像存储在数据库中。

其他所有内容均已成功更新，但未存储图像。我正在使用中等 blob 数据类型来存储图像。

这是我的代码：

更新profile.php：

```
 <form id="form" method="post" action="update-profile-action.php"   enctype="multipart/form-data">
    <label for="Fname">First Name:</label> <input type="text" id="Fname" class="text"  value="<?php echo $firstname; ?>" name="Fname" /> <br /><br />
     <label for="Lname">Last Name:</label> <input type="text" id="Lname" class="text"    value="<?php echo $lastname; ?>" name="Lname" /><br /> <br />

<?php 
if ($_SESSION["type"]=="T")
{
?>        
    <label>Profile Image:</label> <input type="file" name="image" value="" /><br     />     <br />
     <label>Qualification:</label><textarea name="qualification" class="text"  id="qualification"><?php echo $qualification;?></textarea><br /><br />
    <label>Education & Teaching History:</label> <textarea name="briefintro"     class="text" id="intro"><?php echo $briefintro; ?></textarea><br /><br />
<?php
}
?>
    <input type="submit" class="mybutton" value="Update Profile" />

</form> 
```

更新配置文件action.php：

```
<?php include("../includes/config.php");?>
<?php
$Fname=$_POST["Fname"];
$Lname=$_POST["Lname"];
$image=$_POST["profileimg"];
$briefintro=$_POST["briefintro"];
$qualification=$_POST["qualification"];

$con=mysql_connect($dbserver,$dbusername,$dbpassword);
if (!$con) { die('Could not connect: ' . mysql_error()); }
mysql_select_db($dbname, $con);
$query=("UPDATE accounts SET firstname='".$Fname."' , lastname='".$Lname."' ,  profileimg='".$image."' ,  briefintro='".$briefintro."',    qualification='".$qualification."' WHERE id=".$_SESSION['id']);
$result = mysql_query($query);
header("Location: update-profile.php?status=3");
mysql_close($con);
?> 
```

我只复制了 update-profile.php 中的相关数据以使其更易于阅读:) 任何形式的帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:01:08.637

两个问题：

您没有文件输入标签的 id。您需要更改`<input type="file" name="image" value="" />`为`<input type="file" name="image" value="" id = "profileimage" />`

其次，您不是通过`$_POST`而是通过访问文件`$_FILES`。

# android - 如何下载使用 WordPress 下载监控插件重定向的真实文件？

> ID：12960734
> 
> 赞同：2
> 
> 时间：2012-10-18T17:53:51.733
> 
> 标签：android, wordpress, redirect, plugins, download

我正在做的是使用 Jsoup 来解析 WordPress 下载监视器 url 形式的下载 url。示例：http:// ****** .com/wp-content/plugins/download-monitor/download.php?id=11036 当您单击此链接时，它将打开一个新的下载页面，该页面使用 id 11036 下载真实的文件。

我的问题是如何绕过该下载监视器插件并获取真实的文件网址？

更新 1：这是用于重定向的 java 代码。

```
<script type="text/javascript">
console.log(location.href);
var hasAutoDonload = false;
var address;
if(location.href.indexOf("d3") > 0){
address = "http://d3.apknew.com/download.php" + window.location.href.replace("http://apknew.com/download-page","");
}else{
address = "http://d2.apknew.com/download.php" + window.location.href.replace("http://apknew.com/download-page","");
}
var hasTouch = 'ontouchstart' in window;
window.onload = function(){
if(!hasAutoDonload){
downloadFun();
}
}
function downloadFun(){
hasAutoDonload = true;
if(hasTouch){
window.location.href = address;
}else{
document.getElementById("downloadIframe").src = address;
}
}
function downloadFun1(){
window.open(address)
}
//http://d2.apknew.com/download.php?i=er59f9t&#038;n=QuickPic_2.0%20beta.apk&#038;d=2012-02
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:09:12.383

```
java.lang.CharSequence uri = "<your_url>";
java.net.URL url = new java.net.URL(uri.toString());
java.net.HttpURLConnection httpURLConnection = (java.net.HttpURLConnection) url.openConnection();
httpURLConnection.setInstanceFollowRedirects(false);
httpURLConnection.connect();
int responseCode = httpURLConnection.getResponseCode();
Log.i("Response Code", responseCode);
String header = httpURLConnection.getHeaderField("Location");
Log.i("Final URL", header); 
```

在这里，最终的 URL 存储在`header`. 确保在您提供的 URL 中包含协议。另外，我已经用 301 重定向测试了这个。不确定它是否适用于 javascript 或其他重定向。

# qt - 如何在 4.7.4 中编译，而 mingw32-make 在 4.8.1 中编译

> ID：12960738
> 
> 赞同：0
> 
> 时间：2012-10-18T17:54:00.870
> 
> 标签：qt

我已经下载了 QtSDK，它包含 4.7.4 和 4.8.1。我需要在 4.7.4 版本中为 QtDesigner 编译 qwt-plugin。

Mingw32-make 在我运行 4.7.4 控制台时在 4.8.1 中编译它。如何在 4.7.4 中编译？提前致谢

# java - 使用 apache ant 验证 Javsacsript 语法

> ID：12960739
> 
> 赞同：1
> 
> 时间：2012-10-18T17:54:02.130
> 
> 标签：java, javascript, ant, rhino

我的 Java Web 应用程序包含用于后端的 java 文件和用于前端的 javascript 文件。我有一个 ant 脚本，它编译 java 代码并创建和部署一个 war 文件（其中包含 js 文件和其他资产）。

此外，我希望 ant 脚本验证 js 的语法是否正确。如果有人不小心把js删掉了大括号或者分号，我希望ant脚本告诉我。

我使用的是 Java 7，所以 Rhino 已经在 jdk 中可用。

如果 Rhino 无法解析 javascript 文件，我将如何设置使用 Rhino 加载 javascript 文件并返回错误代码的 ant 任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:03:02.680

我在使用 WRO4J 整理和缩小我的 js 资源方面有很好的经验。

[http://code.google.com/p/wro4j/](http://code.google.com/p/wro4j/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:14:45.923

请检查[https://github.com/philmander/ant-jshint](https://github.com/philmander/ant-jshint)看起来很有希望使用 Apache Ant 自动化 JSHint。

检查[http://www.jshint.com/platforms/](http://www.jshint.com/platforms/)

# ruby-on-rails - 在 Active Record 中，如何找到 nil 嵌套模型

> ID：12960743
> 
> 赞同：0
> 
> 时间：2012-10-18T17:54:13.907
> 
> 标签：ruby-on-rails, activerecord

我有很多属于`Movie`like的照片`Movie.photos`。有些电影有照片，有些则没有。

如何轻松找到所有没有照片的电影？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:21:16.953

将此方法放入您的电影模型中

```
def self.no_photos
  Movie.all.reject{|movie| movie.photos}
end 
```

你可以这样使用它。

`movies_with_no_photos = Movie.no_photos`

# python - 正确使用 numpy.nditer？

> ID：12960744
> 
> 赞同：4
> 
> 时间：2012-10-18T17:54:19.243
> 
> 标签：python, numpy

[我正在尝试使用numpy.nditer](http://docs.scipy.org/doc/numpy/reference/generated/numpy.nditer.html)进行数组操作，但没有得到预期的结果。

我的代码是

```
import numpy as np
arr1 = - np.random.random((2,2))
arr2 = np.random.random((2,2))
arr = np.zeros((2,2))
it = np.nditer([arr1, arr2, arr], [], [['readonly'], ['readonly'], ['writeonly']])
for a1, a2, a in it:
    a = a1 if -a1 < a2 else a2
print arr
print it.operands[2] 
```

我在 和 中都得到了所有零结果`arr`，`it.operands[2]`但我期望来自`arr1`或的值`arr2`。`arr`在迭代中分配值的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T18:14:11.973

在 Python 中做`a =`只会重新绑定局部变量`a`；它不会影响`a`包含的内容。

随着`nditer`，迭代变量`a1`，`a2`和`a`实际上是 0-d 数组。因此，要更改`a`，请使用（有点奇怪）`a[()] =`语法：

```
for a1, a2, a in it:
    a[()] = a1 if -a1 < a2 else a2 
```

但请注意，您的整个代码可以通过使用大大简化`np.where`：

```
import numpy as np
arr1 = - np.random.random((2,2))
arr2 = np.random.random((2,2))
arr = np.where(-arr1 < arr2, arr1, arr2) 
```

# javascript - 用于两个可拖动 Jquery 的多点触控

> ID：12960745
> 
> 赞同：2
> 
> 时间：2012-10-18T17:54:29.013
> 
> 标签：javascript, jquery, web-applications, jquery-events, joystick

我有两个可用作操纵杆的可拖动对象。所以，我必须能够在每个操纵杆中获得一个事件。

我正在使用一个名为 touch-punch 的库，但它不是多点触控。我已经创建了自己的听众，但现在我不能拖动。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:54:44.683

对两个操纵杆使用一个事件。然后使用 event.changedTouches[0].pageX; 和 event.changedTouches[1].pageX; 获得第一次和第二次接触。

# ssh - 尝试 GitStack 后 SSH 访问被阻止

> ID：12960746
> 
> 赞同：0
> 
> 时间：2012-10-18T17:54:29.307
> 
> 标签：ssh, firewall, msysgit, gitstack

我正在使用 msysgit (Git-1.7.11-preview20120710.exe)。我在 Win8 上尝试[了 GitStack](http://gitstack.com/)，这是一个 git 服务器，在卸载它后，因为它没有成功，我被阻止访问端口 22 了。这是每次我尝试推送/克隆/等时 msysgit 向我抛出的内容。

```
Welcome to Git (version 1.7.11-preview20120710)
Run 'git help git' to display the help index.
Run 'git help ' to display help for specific commands.

Alain@ALAIN-PC /d/Sync/Web/Work/Current/10042012_Madmen
$ cd madmen-intellectuals/

Alain@ALAIN-PC /d/Sync/Web/Work/Current/10042012_Madmen/madmen-intellectuals (de
v)
$ git push -v
Pushing to git@barrelstrengthdesign.beanstalkapp.com:/madmen-intellectuals.git
ssh: connect to host barrelstrengthdesign.beanstalkapp.com port 22: Bad file num
ber
fatal: The remote end hung up unexpectedly

Alain@ALAIN-PC /d/Sync/Web/Work/Current/10042012_Madmen/madmen-intellectuals (de
v)
$ ssh -Tv github.com
OpenSSH_4.6p1, OpenSSL 0.9.8e 23 Feb 2007
debug1: Connecting to github.com [207.97.227.239] port 22.
debug1: connect to address 207.97.227.239 port 22: Attempt to connect timed out
without establishing a connection
ssh: connect to host github.com port 22: Bad file number 
```

这在安装 GitStack 之前没有发生。我真的没有做过任何其他事情，除了中间。有什么建议么 ？

**笔记：**

1.  在安装 GitStack 时，我没有选中“安装 msysgit”选项，因为我已经安装了它。但该应用程序并没有开箱即用。我想这就是原因。在那之后我立即卸载了它。

2.  我已经多次重新启动并禁用了我的防火墙。我检查了 Nmap 并说“已过滤”。

3.  **我已经看到[Git SSH error: "Connect to host: Bad file number"](https://stackoverflow.com/questions/7144811/git-ssh-error-connect-to-host-bad-file-number)，但这不是我正在寻找的解决方案。**我想回到以前的状态而没有错误。此外，我不仅使用 github。

4.  它在安装 GitStack 之前工作。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:20:58.327

GitStack 尚不支持 Windows 8，因为该系统尚未发布。
GitStack 在安装之前创建一个还原点。您应该尝试将计算机恢复到以前的状态。
还要确保仔细检查您的防火墙是否没有阻止端口 22。GitStack 不使用和修改端口 22。

# java - GWT 创建两个 Views 使用一个 Presenter

> ID：12960762
> 
> 赞同：2
> 
> 时间：2012-10-18T17:55:43.267
> 
> 标签：java, gwt, mvp, gwtp, gwt-platform

我想创建两个使用一个演示者的视图，可以吗？我知道我可以使用两个使用一个视图的演示者，但我正在寻找机会拥有两个使用一个演示者的相等视图。

我想要这样的东西

```
MyView1 extends BaseView implements SharedPresenter.MyView
MyView2 extends BaseView implements SharedPresenter.MyView 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T19:01:57.663

我为您找到了有关该主题的书签[讨论](https://groups.google.com/forum/?fromgroups=#!msg/gwt-platform/tHlpTRlQGtk/7CO064bD8E4J)-Philippe Beaudoin 几乎用“...我打算仅支持 (B) [1 View --> 1 Presenter]...”回答您的问题，但也建议使用`PresenterWidgets`.

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:45:48.347

我猜这个要求可能是针对不同用户代理（桌面/移动）的 2 个视图。

1.是的，您可以有 2 个视图共享同一个演示者。

2.您只需要在视图之外定义 Presenter 并在 viewImpl 中使用它。

**例子**

你有 AppviewMobile，AppviewDesktop。两者都可以有 Presenter{public String sayHello()}。

1.viewMobileImpl,viewDesktopImpl使用同一个presenter。

2.在视图之外定义Presenter，假设你有AppMyPresenter。

3.AppActivity会实现AppMyPresenter。

所以你有 2 个视图，1 个演示者，1 个活动..

# camera - 从 IP 摄像机抓取所有帧

> ID：12960770
> 
> 赞同：0
> 
> 时间：2012-10-18T17:56:22.260
> 
> 标签：camera, ip-camera, video-recording

我有一台索尼 IPELA snc-ch180 相机。这是一个网络摄像机。有没有办法可以将实时图像中的所有帧保存到我的硬盘上？

知道什么软件可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:59:03.290

是的你可以。您需要检查相机参考并找出支持的协议，其中一些可能是众所周知的（或者，您可以使用网络嗅探器对它们进行逆向工程）。然后您实现一个连接到相机并接收视频流的客户端。收到它后，您对其进行解析，将其解码为帧，必要时解压缩/重新压缩并保存到硬盘驱动器。

# javascript - JQuery：在 ajax 添加的表单元素上运行脚本

> ID：12960775
> 
> 赞同：0
> 
> 时间：2012-10-18T17:56:36.080
> 
> 标签：javascript, ruby-on-rails, ajax, jquery

我有一个表单元素，它根据 ajax 的请求被拉入。然后，我尝试对插入的文本框执行 ajax 请求，以在键入时查找位置。该代码适用于第一个文本框，但在插入第二个文本框时会失败。我试图让脚本在 ajax 完成后重新加载，但它仍然无法工作。帮助将不胜感激。

**Form.html.erb** - 设置 rails 嵌套表单并拉入部分

```
 <%= nested_form_for(@post, :html=> {:multipart => true, :class=> "new_blog_post", :id=> "new_blog_post"}) do |f| %>

  ...

  <fieldset>
   <%= render :partial => 'search_locations', :locals => { :f => f }  %>

  </fieldset>

  <p><%= f.link_to_add "Add a location", :locations %></p>

  ...

  <% end %> 
```

**partial.html.erb** - 在页面加载时拉入，然后在按下“添加位置”按钮时拉入

```
 <fieldset>
  <%= f.fields_for :locations do |m| %>    
        <%= m.text_field :name ,:class=>"localename", :placeholder=> "Name of the location", :autocomplete => "off" %>
        <%= m.text_field :longitude, :class => "long" %>
        <%= m.text_field :latitude, :class => "lat" %>
        <div class="latlong">
        <p class="help-block">Enter the name of the town or city visited in this blog entry.</p>
        </div>
        <%= m.link_to_remove "Remove this location" %>

   <% end %>
  </fieldset> 
```

**Javascript（位于表单底部）**

```
<script type="text/javascript">

    function locationchecker() {

    // Rails to multiply the script 20 times            
    <% (0..20).each do |i| %>

    // when the #search field changes
    $(".localename:eq(<%=i%>)").keyup(function() {

    // get the value of searchfield 
        var location<%=i%> = $(".localename:eq(<%=i%>)").val(); 

    //Take the value of the textbox and pull it from geocoder
    $.get('/locations/location?location='+location<%=i%>,this.value, function(searchone<%=i%>) {
    $(".latlong:eq(<%=i%>)").html(searchone<%=i%>);

     })
        // Upon complete run the script again
    .complete(function(searchone<%=i%>) { locationchecker });

    });

    <%end%>
}
       // load script on doc ready
$(document).ready(locationchecker);

</script> 
```

帮助会很棒！

提前致谢，

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:01:41.713

您应该使用`.on()`（[jQuery api doc](http://api.jquery.com/on/)）方法来附加您的 keyup 事件处理程序，如下所示：

```
$('#myForm').on('keyup','.localename',function() {
       // stuff here
       var location = $(this).val(); // this = element on which the event was triggered
}); 
```

# ms-access - 字段值更改时刷新查询驱动的组合框值？

> ID：12960776
> 
> 赞同：3
> 
> 时间：2012-10-18T17:56:37.330
> 
> 标签：ms-access

我在表单上有一个组合框，其中的值是根据单独字段中的值填充的。

为此，我创建了一个组合框并设置“行源”以运行 SQL 语句。

我遇到的问题是，如果字段中的数据发生变化，组合框的值不会更新。

如何获得重新运行查询的权限？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T19:11:28.413

查看此描述是否与您的情况相当接近。

我的表单有一个文本框`txtFoo`和一个组合框`cboBar`.

的行源属性`cboBar`是一个引用的查询`txtFoo`。我希望更新组合的内容以响应`txtFoo`. `cboBar`解决方案是从`txtFoo's`更新事件后重新查询。

```
Private Sub txtFoo_AfterUpdate()
    Me.cboBar.Requery
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-31T18:13:07.213

我过去曾遇到过 Requery 无法正常工作甚至挂起的问题。它不漂亮，但你可能想试试这个：

```
Me.cboBar.RowSource = ""
Me.cboDemoUnit.RowSource = "your SQL statement" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-23T18:04:18.720

这是我最近为做同样的事情所做的一个例子，这应该会有所帮助！它在更新后的子中。[动态组合框示例](http://i.stack.imgur.com/USb1i.png)

# c# - Metro/WinRT/Windows 8 是否可以从后面的代码中清除元素的绑定？

> ID：12960777
> 
> 赞同：5
> 
> 时间：2012-10-18T17:56:39.880
> 
> 标签：c#, windows-8, windows-runtime, microsoft-metro

我有一组项目需要`TextBox`在页面上填充一组 '。每次用户单击不同的项目时，我想从最后一个项目中删除旧绑定并为当前项目设置新绑定。如果我不这样做，`The object is immutable`则会引发 WinRT 异常。

此代码在选择第一个项目时有效，但在下一个项目选择时引发异常。

```
titleBinding.Source = selectedItem;
TitleBox.SetBinding(TextBox.ValueProperty, _titleBinding); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T01:26:02.777

您可以尝试调用 ClearValue。

```
TitleBox.ClearValue(TextBox.ValueProperty); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T22:12:25.693

我的解决方案是每次加载新项目时创建全新的绑定对象，然后调用`TitleBox.SetBinding(TextBox.ValueProperty, newBindingObject);`

`Binding`显然，在设置源并绑定到对象后，您无法取消绑定对象。

# extjs4 - Extjs4 组合和商店：当 queryMode=local 时删除过滤器？

> ID：12960778
> 
> 赞同：5
> 
> 时间：2012-10-18T17:56:41.033
> 
> 标签：extjs4, extjs, store

我很沮丧，因为每当我使用它来支持组合字段时，我的商店都会被过滤掉。有什么办法可以禁用它吗？

**情景**

我有一个商店，`data`上面有一个字段；实例化存储时加载的对象数组。我使用这家商店在我的应用程序的不同区域驱动一堆组合。不幸的是，我的组合在商店中应用了过滤器，导致使用同一商店的其他组合稍后仅显示过滤后的值，而不是整个列表。

**解决方法**

我愚蠢的解决方法是`combo.getStore().clearFilter()`在我完成组合后调用，但这会很快变老，并且可能会在某个地方引入错误，我敢肯定。

如果我`queryMode:'local'`从我的组合配置中删除，一切都很好，只是现在方便的提前输入功能不再起作用；我只是在下拉列表中显示了一个项目列表，我什至无法浏览我输入的匹配项目的字母。这比普通的 html`select`标签更糟糕！

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:04:10.760

您不能这样做，因为过滤不是应用于 .`combo`而是应用于`store`. 您可以尝试创建相同的多个实例`store`并使用它。虽然我不知道它是否会工作。

```
Ext.create('combo', {
      //other config
      store : Ext.create('my.store')
}); 
```

如果您将其`combo`设为不可编辑，它将起作用，因为那时无法应用过滤。但是，正如您所说，您需要提前输入功能，您需要创建`store`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:17:42.367

鉴于组合将在后备存储上添加过滤器，从而影响在我的应用程序中使用该存储的所有组合，我选择向组合类添加一个覆盖，以便在组合框被破坏。

```
Ext.define('MAP.override.Combo', {
    override : 'Ext.form.field.ComboBox',
    initComponent : function()
    {
        this.callParent(arguments);

        this.on('beforedestroy',function(combo){
            if(combo.leaveFilter === true) return;

            console.log('clearing filter on store');
            combo.getStore().clearFilter();
        });
    }
}); 
```

这有点小技巧，但我确实允许指示不清除过滤器的逃生舱口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T17:08:34.387

我发现处理此解决方案的最简单方法是将以下侦听器添加到组合中：

```
listeners: {
    beforequery: function(queryPlan){
        queryPlan.query = true;
    }
} 
```

默认情况下，queryPlan.query 是当前组合字段中用于过滤的文本。将其设置为 false 会取消查询，但将其设置为 true 允许查询在没有过滤值的情况下通过，因此将所有值保留在所有组合字段的下拉列表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-24T15:25:03.763

我对 ExtJS 4.2 和组合也有类似的问题。商店一直被过滤，但我不能使用 clearFilter() 因为在那之后组合是不可用的。我的解决方案是这个组合监听器：

```
listeners: {
  blur: function(combo) {
    if (combo.queryFilter) {
      combo.queryFilter.setValue('');
      combo.getStore().filter();
    }
  }
} 
```

# javascript - 使用正则表达式 (javascript) 解析 css3 选择器

> ID：12960784
> 
> 赞同：0
> 
> 时间：2012-10-18T17:56:51.370
> 
> 标签：javascript, regex, css-selectors

如果有人以前看过这个问题，请链接，也许我正在搜索错误的东西。除了解析 css 文件的结果外，我什么也得不到。基本上，我有一组选择器，比如

`[".thislink", "#myid"]`.

我希望传递任何格式为 css3 选择器的字符串选择器，例如：

`a.thislink:not(.ignore)[href^=http://]`

进入 .match 并将其拆分为选择器数组，理想情况下：

`[a, .thislink, :not(.ignore), [href^=http://]]`

我可以循环通过。然后，我将在任何 :not() 选择器上使用相同的细分来获得第二个“not”数组，我可以将其与我原来的单个选择器数组匹配。

我只需要标签、类、ID、attr 和 :not 选择器。我想，我可以弄清楚如何分解`[attr=val]`和`:not(selectorshere)`我自己。

PS：我知道在字符串选择器中匹配我的原始数组值很容易，但是，我*实际上*没有选择器*数组*。需要几段来解释我为什么要这样做，所以相信我，我做不到 =)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T23:14:21.887

万一你找不到足够的正则表达式，我可以建议一个 JavaScript 解析器生成器，比如[PEG.js](http://pegjs.majda.cz/) *。有一个[在线版本](http://pegjs.majda.cz/online)的 PEG.js，它允许您修改语法，然后在对结果满意后下载解析器。

[ * ] PEG -[解析表达式语法](http://en.wikipedia.org/wiki/Parsing_expression_grammar)

有关语法的帮助，您应该查阅~~[W3C 关于 CSS3 语法的工作草案](http://www.w3.org/TR/css3-syntax)~~ [W3C 关于 Selectors Level 3 的建议](http://www.w3.org/TR/css3-selectors/#w3cselgrammar)。

我花时间玩了一下，为单个选择器（元素/id/attr/class/pseudo）想出了一个简化的语法。你可能想在这里和那里重新审视它并改进它。

```
/*
 * PEG.js grammar
 */
start      = element? hash? (class / attr / pseudo)*
element    = '*' / ident

ident      = i:(nmstart) j:(nmchar*) {return i + j.join('');}
hash       = h:('#' ident) {return h.join('');}
class      = c:('.' ident) {return c.join('');}
attr       = a:('[' (b:[^\]]+ {return b.join('');}) ']') {return a.join('');}
pseudo     = p:(':' function) {return p.join('');}

nmstart    = [a-z] / nonascii
nmchar     = [a-z0-9-] / nonascii
function   = f:(ident '(' body ')') {return f.join('');}
body       = b:[^\)]+ {return b.join('');}

nonascii   = [\x80-\xff]
_          = [ \t\n\r]+ {return '';} 
```

# jquery - 循环遍历表 td 以将 jQuery 效果附加到每个 td

> ID：12960785
> 
> 赞同：0
> 
> 时间：2012-10-18T17:56:50.810
> 
> 标签：jquery, loops, html-table

我建了一个这样的表：

```
<table id="testTable">

   <tr>
    <td dir="ltr"><a href="#">array()</a></td>
    <td>انشاء مصفوفة</td>
    <td>530</td>
    <td><a class="example1" href="#">12.5</a></td>
    <td>12.5</td> 
    </tr>

<thead>
        <tr> 
        <th colspan="5" rowspan="3" class="slide1" >
       <pre class="prettyprint lang-php ">

$a=array("a"=>"Dog","b"=>"Cat","c"=>"Horse");
echo $a["b"];
//الناتج 
Cat 

//مثال اخر
$a=array("Dog","Cat","Horse");
print_r($a);
//الناتج
Array ( [0] => Dog [1] => Cat [2] => Horse ) 

       </pre>
        </th>
        </tr>
        </thead>

     <tr>

                        <td dir="ltr"><a href="">array_push()</a></td>
                        <td>اضافة عنصر او أكثر لنهاية المصفوفة</td>
                        <td>530</td>
                        <td class="example2">12.5</td></td>
                        <td>12.5</td>

     </tr>

<thead>
        <tr> 
        <th colspan="5" rowspan="3" class="slide1" >
       <pre class="prettyprint lang-php ">

$a=array("a"=>"Dog","b"=>"Cat","c"=>"Horse");
echo $a["b"];
//الناتج 
Cat 

//مثال اخر
$a=array("Dog","Cat","Horse");
print_r($a);
//الناتج
Array ( [0] => Dog [1] => Cat [2] => Horse ) 

       </pre>
        </th>
        </tr>
        </thead>

   <tr>
                        <td dir="ltr"><a href="">array_rand()</a></td>
                        <td>استخراج مفتاح عشوائى من المصفوفة</td>
                        <td>530</td>
                        <td class="example3">12.5</td></td>
                        <td>12.5</td>
   </tr>

<thead>
        <tr> 
        <th colspan="5" rowspan="3" class="slide1" >
       <pre class="prettyprint lang-php ">

$a=array("a"=>"Dog","b"=>"Cat","c"=>"Horse");
echo $a["b"];
//الناتج 
Cat 

//مثال اخر
$a=array("Dog","Cat","Horse");
print_r($a);
//الناتج
Array ( [0] => Dog [1] => Cat [2] => Horse ) 

       </pre>
        </th>
        </tr>
        </thead>

........and multiple like that.....

</table> 
```

我想通过js创建一个for循环来slideToggle与我点击`<thead>`的相同`<td>`，我尝试了这样的事情：

```
$(document).ready(function(){
    for (var i=1;i<=120;i++){
    $(".example" + i).click(function(){
      $(".slide" + i).slideToggle(500);
    })
  }
}); 
```

但什么也没发生。

如何通过每一个迭代这个效果，通过它的同一个 td 来滑动切换我点击的特定主题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:10:49.653

你正在艰难地做这件事。

```
$('table a').click(function() {
   $(this).parents('tr').next('tr').slideToggle(500);
}} 
```

jQuery 的美妙之处在于您可以使用 RELATIVE 选择器。`$(this)`将引用单击的元素。`parents('tr')`会给你那个元素的父`TR`标签。`next('tr')`将选择下一个`TR`标签。根本不需要处理凌乱的 ID。目标是有清晰的标记并让 jQuery 完成繁重的工作。

如果要定位具有特定类的链接，请使用：

```
$('table a.example') 
```

# java - 循环验证

> ID：12960786
> 
> 赞同：0
> 
> 时间：2012-10-18T17:56:52.883
> 
> 标签：java, validation, date, loops

我需要帮助找出一个完整的日期，然后验证它是一个真实的日期。

这就是我到目前为止所拥有的。

```
import java.util.Scanner;

public class numerology
{
     public static void main( String args[])
        {
            Scanner input = new Scanner(System.in);

            int month = 0;
            int date = 0;
            int year = 0;

            char slash = '/';

            int checker = 0; //a flag used to tell if the birthday enter is a validate one 0 = no 1 = yes

            System.out.println ("Enter birthday(mm/dd/yyyy): ");                                
                month = input.nextInt();
                slash = input.next().charAt(0);
                date = input.nextInt();                            
                slash = input.next().charAt(0);                                                 
                year = input.nextInt();

      while (checker == 0)
            {
                if ( month < 1 || month > 12)
                {
                    System.out.printf("Bad month: %d\n", month);
                    System.out.print("Re-enter birthday(mm/dd/yyyy): \n");                       
                       month = input.nextInt();
                       slash = input.next().charAt(0);
                       date = input.nextInt();
                       slash = input.next().charAt(0);
                       year = input.nextInt();

                }
                else
                if ( slash != '/')
                {
                    System.out.print ("Use forward slash");
                    System.out.print ("Re-enter birthday(mm/dd/yyyy): ");
                    month = input.nextInt();
                    slash = input.next().charAt(0);                   
                    date = input.nextInt();                                                
                    slash = input.next().charAt(0);
                    year = input.nextInt(); 
```

我得到了更多检查日期和年份的代码，但我现在的代码遇到了问题。

我目前的问题是检查“/”不起作用。

此外，当我运行此循环时，无法退出它（这是一个无限循环）。这显然是一个我在一个多星期的时间里仍然无法解决的问题。我一直在尝试找到一种方法来使用 Int“检查器”以某种方式变为 1，以便循环退出。然而，也没有运气弄清楚这一点。所以基本上我应该放弃这整个事情并重新开始吗？如果是这样，有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T01:43:49.597

您应该`checker = 1`在循环内设置某个位置，以便 while 循环中的条件变为 false 并且代码将退出

# python - BeautifulSoup、requests 和 lxml 的 Python 解码错误

> ID：12960790
> 
> 赞同：1
> 
> 时间：2012-10-18T17:57:14.210
> 
> 标签：python, beautifulsoup, lxml, decoding, python-requests

我正在尝试从流行的基于浏览器的游戏中提取一些数据，但遇到了一些解码错误：

```
import requests
from bs4 import BeautifulSoup

r = requests.get("http://www.neopets.com/")
p = BeautifulSoup(r.text) 
```

这会产生以下堆栈跟踪：

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "build/bdist.linux-x86_64/egg/bs4/__init__.py", line 172, in __init__

File "build/bdist.linux-x86_64/egg/bs4/__init__.py", line 185, in _feed

File "build/bdist.linux-x86_64/egg/bs4/builder/_lxml.py", line 195, in feed
File "parser.pxi", line 1187, in lxml.etree._FeedParser.close    (src/lxml/lxml.etree.c:87912)
File "parsertarget.pxi", line 130, in lxml.etree._TargetParserContext._handleParseResult (src/lxml/lxml.etree.c:97055)
File "lxml.etree.pyx", line 294, in lxml.etree._ExceptionContext._raise_if_stored (src/lxml/lxml.etree.c:8862)
File "saxparser.pxi", line 274, in lxml.etree._handleSaxCData (src/lxml/lxml.etree.c:93385)
UnicodeDecodeError: 'utf8' codec can't decode byte 0xb1 in position 476: invalid start byte 
```

执行以下操作：

```
print repr(r.text[476 - 10: 476 + 10]) 
```

产生：

```
u'ttp-equiv="X-UA-Comp' 
```

我真的不确定这里的问题是什么。任何帮助是极大的赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:04:15.533

`.text`响应返回一个解码的 unicode 值，但也许你应该让 BeautifulSoup 为你做解码：

```
p = BeautifulSoup(r.content, from_encoding=r.encoding) 
```

`r.content`返回未解码的原始字节串，并且`r.encoding`是从标头中检测到的编码。

# c# - 序列化列表 >

> ID：12960793
> 
> 赞同：6
> 
> 时间：2012-10-18T17:57:34.503
> 
> 标签：c#, .net, c#-4.0, serialization, .net-4.0

我有一个包含`List<Func<T>>`. 该类是可序列化的，并将通过 WCF 传输。现在，我遇到了 contains 的问题`List<Func<T>>`。我该怎么做才能使该列表也可序列化？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-18T17:59:20.307

你会如何期望 a`Func<T>`被序列化？它是一个指向函数的指针——这样的东西不能被序列化。

# iphone - iOS 6：关闭键盘快捷键

> ID：12960797
> 
> 赞同：1
> 
> 时间：2012-10-18T17:57:47.860
> 
> 标签：iphone, ios, ipad, core-text

有什么方法可以关闭 iOS 6 中特定文本字段/文本视图的键盘快捷键？我只想关闭我的应用程序的键盘快捷键，而不是 iOS 的“设置应用程序”。

我开始编写自己的文本编辑器来实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:34:30.090

您可以尝试使用其属性关闭文本字段或文本视图的`autocorrectionType`自动更正 - 如果其中包含快捷方式功能（这似乎很可能），那么它也应该被禁用。我很确定没有办法控制快捷方式系统本身。您可以考虑为其提交[增强请求](http://bugreport.apple.com)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:58:18.320

没有标准方法可以在应用程序级别关闭键盘快捷键（对于未越狱的 iOS）。`Core Text`为了实现这一点，我使用和`UITextInput`协议实现了自定义 TextView 。添加`@property`for `keyBoardShortCuts`, Override " `tokenizer`" getter 方法通过以下方式关闭快捷方式。

```
- (id <UITextInputTokenizer>)tokenizer {
    if(self.keyBoardShortCuts)
        return _tokenizer;
    else
        return nil;
} 
```

如果我们删除标记器，自定义视图中将没有键盘快捷键，即使从 iOS 设置中打开了快捷键。

注意：注意一件事，因为我们不依赖于分词器，现在，在这种情况下，使用 enumerateSubstringsInRange:range options:NSStringEnumerationByWords/Lines 块来找出单词或行的选择范围。

要尝试此操作，请在[EGOTextView](https://github.com/enormego/EGOTextView)项目中添加上述代码以关闭默认快捷方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T18:09:12.477

据我所知，如果你的 iphone 没有越狱，那么你不能为特定的应用程序关闭它。它更像是一个“主设置”，如果更改，更改将应用​​于 iOS 中的所有内容。

如果它越狱了，我知道你可以下载一些实用应用程序，让你以这种方式调整操作系统......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-27T20:07:45.527

设置 > 通用 > 快捷方式。有现成的和任何你可能已经设置的。它们适用于您的所有 iOS 设备，包括您的桌面 Mac。

# cucumber - 我可以在specflow（或小黄瓜）中逃脱管道吗

> ID：12960803
> 
> 赞同：40
> 
> 时间：2012-10-18T17:58:14.243
> 
> 标签：cucumber, specflow, gherkin

我有一个 specflow 步骤表，我希望将`|`（管道）字符作为内容的一部分。

例子：

```
Then the data should be
    | Field     | Value  |
    | SomeField | a|b|c  | 
```

但这不起作用。我怎样才能逃脱管道字符？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-10-18T18:01:46.393

呸。我不敢相信我没有早点找到这个。您可以使用反斜杠转义管道，但**specflow**语法荧光笔会被它弄糊涂。

```
Then the data should be
    | Field     | Value    |
    | SomeField | a\|b\|c  | 
```

# sql-server - 子串时间格式

> ID：12960805
> 
> 赞同：1
> 
> 时间：2012-10-18T17:58:21.057
> 
> 标签：sql-server, tsql, time, formatting, sql-server-2008-r2

目前我正在使用此脚本从列中提取时间：

```
 (RIGHT('0' + ltrim(RIGHT(convert(varchar,cast(SUBSTRING(A.DocSign, CHARINDEX('^', A.DocSign) +1, 19) as datetime), 100), 7)), 7)) 
```

这返回的是一个格式为上午 10:34 的时间 - 它还在此代码中将军用时间转换为标准时间，并将其附加到我从日期、姓氏等列中提取的其他项目中。我需要时间显示为 10:54:00 AM

所以基本上我需要在任何时间的末尾添加 :00 （总是零），并在零和即将到来的 AM 或 PM 之间添加一个空格。

我不太擅长格式化，所以我遇到了这个问题。有什么建议么？（我正在运行 SQL Server 2008 R2）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:01:25.710

在不尝试重写您的表达式的情况下，我只需将 ':00 '[填入](http://msdn.microsoft.com/en-us/library/ms188043.aspx)即可。

```
STUFF(
   (RIGHT('0' + ltrim(RIGHT(convert(varchar,cast(SUBSTRING(
    A.DocSign, CHARINDEX('^', A.DocSign) +1, 19) as datetime), 100), 7)), 7)),
6,0,':00 ') 
```

另一种方法是用嵌入的零替换`PM`/ `AM`，即

```
REPLACE(REPLACE(
   (RIGHT('0' + ltrim(RIGHT(convert(varchar,cast(SUBSTRING(
    A.DocSign, CHARINDEX('^', A.DocSign) +1, 19) as datetime), 100), 7)), 7)),
'PM', ':00 PM'),'AM', ':00 AM') 
```

# javascript - JavaScript 浏览器干扰

> ID：12960807
> 
> 赞同：0
> 
> 时间：2012-10-18T17:58:49.107
> 
> 标签：javascript, jquery, browser, error-handling

我有一个应用程序，它 99% 的时间都可以正常运行。这是一个相对简单的结帐系统——用户提交一个表单，它通过验证（所有字段都包含某些内容），然后触发支付处理器。支付处理器使用 API 处理订单并返回`error`或`success`响应，`error`返回消息，`success`将用户传递到包含订单信息的“谢谢”页面。

我们遇到的问题是，我们听到客户说，当它开始处理一条消息时（它应该）出现在叠加层中，然后就挂在那里。我编写了一个应该等待 25 秒的超时，然后将用户发送到`success`页面（减去任何成功信息），然后告诉他们有错误。然而，在少数情况下，这不会发生。

我已经在浏览器的挑战中对此进行了测试并且无法复制它，所以我想知道......

1.  如果浏览器上的工具栏或插件可能会阻止脚本正常运行。

2.  如果有某种方式我可以以编程方式检查这样的错误并推动用户继续前进。

这是供参考的代码：http: [//jsfiddle.net/XaP7z/](http://jsfiddle.net/XaP7z/)

我知道这是一个冗长且有些模糊的问题，但我正在抓住稻草，客户并不高兴（尽管这是一个 <1% 的问题）。

# android - android中的sqlite-表格填充不正确

> ID：12960808
> 
> 赞同：1
> 
> 时间：2012-10-18T17:58:50.173
> 
> 标签：android, sqlite

我有一个有线问题。我写了一个使用 sqlite 的代码。这是相关的行：

```
 private final String DB_NAME = "cus";
    private final String TABLE_NAME = "cus2";
    SQLiteDatabase customersDB2 = null;
    /** Called when the activity is first created. */
    private void mFillDbsTable(){
        try {
            customersDB2.execSQL("INSERT INTO " + TABLE_NAME + " Values ( 1, 'the ', 'ה- ');");
            customersDB2.execSQL("INSERT INTO " + TABLE_NAME + " Values ( 2, 'of ', 'של ');");
            customersDB2.execSQL("INSERT INTO " + TABLE_NAME + " Values ( 3, 'to ', 'אל ');");
            customersDB2.execSQL("INSERT INTO " + TABLE_NAME + " Values ( 4, 'and ', 'ו - ');");
            customersDB2.execSQL("INSERT INTO " + TABLE_NAME + " Values ( 5, 'a ', 'מופיע לפני שם עצם ביחיד ללא הא הידיעה ');");
            customersDB2.execSQL("INSERT INTO " + TABLE_NAME + " Values ( 6, 'in ', 'בתוך ');");
            customersDB2.execSQL("INSERT INTO " + TABLE_NAME + " Values ( 7, 'for ', 'עבור ');");
    ................
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_learn);
        try {
            customersDB2 =  this.openOrCreateDatabase(  DB_NAME, MODE_PRIVATE, null);
            customersDB2.execSQL("CREATE TABLE " +
                    TABLE_NAME +
                    " (Block INT," +
                    " Name VARCHAR, Street VARCHAR);");
            mFillDbsTable();
}catch (SQLiteException se ) {
            Log.e(getClass().getSimpleName(), "create/Open the database problem");
} 
```

现在，当我询问查询时：

```
 correctAnswer=oneTOfour.nextInt(4);
    Toast.makeText(this,"correctAnswerק"+correctAnswer,Toast.LENGTH_SHORT).show();
    correctAnswerTHE_ANSWER =(r.nextInt(1000)) + 1;
    Toast.makeText(this,"correctAnswerTHE_ANSWER"+correctAnswerTHE_ANSWER,Toast.LENGTH_SHORT).show();

      ArrayList<String> results = new ArrayList<String>();
    Cursor c = customersDB2.rawQuery("SELECT Name, Street  FROM "    +
            TABLE_NAME +
            " where Block = 66 ", null);

    if (c != null ) { //true

         Toast.makeText(this,"c.getColumnIndex(Name)" + c.getColumnIndex("Name"),Toast.LENGTH_SHORT).show(); //got 0!!
         if  (c.moveToFirst()) {   
            do {

                 name = c.getString(c.getColumnIndex("Name"));
                 street = c.getString(c.getColumnIndex("Street"));          
                 results.add(name + ", " + street );
            }while (c.moveToNext());
        }
    }

    else{
         Toast.makeText(this,"null2",Toast.LENGTH_SHORT).show();
    }

    question.setText(name);  //this is null 
```

}

**它没有达到第二个如果**

也许我第一次运行这个应用程序时只有 2 列。我试图打开其他项目，更改表的名称..没有任何工作。一些想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:11:28.920

```
"SELECT Name, Street  FROM " ... 
```

当您命名要选择的字段时，它会按该顺序返回它们，`Name` *第一*列或`0`.

如果您希望它们按照创建它们的顺序排列，请尝试`SELECT * FROM`。

问题是，它们的顺序有什么关系？你已经在使用`c.getColumnIndex()`了，所以他们的顺序没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:13:30.107

可能与您插入的 UTF 非标准字符有关。您应该尝试使用 ContentValues 插入，例如：

```
ContentValues row = new ContentValues();
row.put("Name", "blah");
row.put("Street", "your utf strings");
row.put("Block", 1);
long id = db.insert(TABLE_NAME, null, row); 
```

# asp.net-mvc - mvc c# return view() 不默认为正确的值

> ID：12960814
> 
> 赞同：1
> 
> 时间：2012-10-18T17:58:58.653
> 
> 标签：asp.net-mvc

我不确定我是否忽略了一些明显的东西。一旦我做一个 POST，我有以下内容（注意：我想要做的是用一些空值默认相同的视图，以便用户可以创建另一个条目）：

```
 [HttpPost]
    public ActionResult QkInsert(ProgInfo model)
    {

        if (ModelState.IsValid)
        {
            ProgService.InsertQuickEntry(model);

            model.Name = null;
            model.Address = null;
            model.Phone = null;            

            return view(model);

        }

         return view(model); 
```

奇怪的是，当我在 IsValid() 中查看模型的值时

```
 return view(model) 
```

我确实看到了空值。但是当它显示在视图上时，它不为空。与我第一次输入数据时的视图基本相同。任何的想法？我忽略了什么吗？

还要注意我是如何完成两次 return view(model) 的。有没有其他方法可以做到这一点，我只做一次而不重复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:19:56.927

这是因为 HTML 助手在绑定它们的值时首先查看 ModelState，然后才查看模型中的值。这是设计使然。

因此，如果您想在 POST 操作中更改模型的任何值，您需要首先将其从 ModelState 中删除：

```
[HttpPost]
public ActionResult QkInsert(ProgInfo model)
{
    if (ModelState.IsValid)
    {
        ProgService.InsertQuickEntry(model);

        ModelState.Remove("Name");
        ModelState.Remove("Address");
        ModelState.Remove("Phone");
        model.Name = null;
        model.Address = null;
        model.Phone = null;            

        return view(model);
    }

    ....
} 
```

现在视图将呈现修改后的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:02:55.037

如果模型无效，您将返回相同的模型，第二次返回。

第一个根本不需要，`return view(model)`因为它和第二个之间没有代码，所以无论如何它都会调用。即删除第一个返回，逻辑相同。

# ios - iOS GHUnit 和核心数据

> ID：12960816
> 
> 赞同：0
> 
> 时间：2012-10-18T17:59:02.367
> 
> 标签：ios, unit-testing, core-data, gh-unit

呃，

我最近将 CoreData 集成到我现有的 iOS 应用程序中。我以前有围绕一些域和网络功能编写的现有测试；现在需要对其进行改造以使用 CoreData（而不是存储在 userDefaults 中）。

我已经`GHUnitIOS.framework`包含在我的项目中。但是，我所有的测试都失败了，因为 TestAppDelegate 对 CoreData 的`managedObjectContext`. 供参考我所看到的：

`[GHUnitIOSAppDelegate managedObjectContext]: unrecognized selector sent to instance`

这是有道理的 - 测试应用程序委托没有 managedObjectContext 作为属性。我很想添加它，但由于我在使用框架时只能访问头文件，因此我无法真正根据需要对其进行修改。我可以下载 GHUnit 源代码并修改实现文件，但如果有其他选择，我宁愿不这样做。

*其他人是如何解决这个问题的？IE，如何修复我的测试以使用 GHUnit 支持 CoreData？*

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T23:06:58.500

我以前有这个问题。GHUnit 测试框架使用它自己的应用程序委托。因此，调用委托不会调用您在应用委托中编写的代码，并且其行为可能不稳定。

一般来说，您应该始终在不是您的应用程序委托的单例中处理调用您的 managedObjectContext(s)。最近我从 OCunit 切换到 GHUnit，不得不将所有这些功能抽象到一个不同的类中。这是一种痛苦，但值得。

# java - 4 个线程添加到一个 jlist

> ID：12960818
> 
> 赞同：1
> 
> 时间：2012-10-18T17:59:03.553
> 
> 标签：java, multithreading, swing, concurrency, event-dispatch-thread

在我的程序中，有 4 个线程同时将元素添加到 jlist 的模型中。由于更新或重绘太多，这会导致 jlist 闪烁、抛出异常甚至崩溃。

我试图拖延一些时间来解决我的问题，但我浪费了很多宝贵的时间。

我能做些什么？

这段代码模拟了我的问题：

```
new Thread(new Runnable() {
    @Override
    public void run() {
        for(int i=0; i<4; i++){
            new Thread(new Runnable() {
                @Override
                public void run() {
                    for(int o=0; o<2000; o++){
                        model.addElement("add");
                        try {
                            Thread.sleep(100);
                        } catch (InterruptedException ex) {
                            Logger.getLogger(NewJFrame.class.getName()).log(Level.SEVERE, null, ex);
                        }
                    }
                }
            }).start();
        }
   }
}).start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:29:27.673

model.addElement("add"); 应该是这样的：

```
SwingUtilities.invokeLater(new Runnable() {
    public void run() {
        listModel.addElement("add");
    }
}); 
```

这样，您可以确保元素是在 EDT 下添加的，而不是在某个随机线程中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:17:17.577

GUI 操作只能在事件调度线程上执行。即使您创建了许多线程，也要对它们进行非 GUI 工作，然后触发 actionCommand（或类似的东西）来操作 GUI 方面。

您将在 Java 文档中多次阅读此警告： **Swing 组件不是线程安全的**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T21:33:10.150

为了避免过多的刷新/重绘，您必须在后台线程中进行模型更新，并使用之前公开的技术将一次复制到 EDT 中的摇摆模型中。我建议不要使用 DefaultListModel，而是自定义处理 addAll()。

```
SwingUtilities.invokeLater(new Runnable() {
    public void run() {
        listModel.addAll( backgroundModel ); // only one fireDataChanged() fired
    }
}); 
```

# c++ - 在头文件中定义模板，在派生类的 cpp 文件中定义

> ID：12960820
> 
> 赞同：3
> 
> 时间：2012-10-18T17:59:10.947
> 
> 标签：c++

> **可能重复：**
> [为什么模板类的实现和声明应该在同一个头文件中？](https://stackoverflow.com/questions/3749099/why-should-the-implementation-and-the-declaration-of-a-template-class-be-in-the)

我正在尝试在头文件中定义模板，并在 cpp 文件中定义模板，并且模板应该在派生类中定义。所以这就是我得到的：

**头文件：**

```
#ifndef  ........
#define .....
 template <class mytypename>
 class abcBaseClass:public abcDerivedClass{
 public:
     mytypename getvalue(char*)
};
#endif 
```

**源文件：**

```
mytypename abcDerivedClass<mytypename>::getvalue(char* name){

} 
```

我只是想知道这是否是正确的做法？

这就是我想要实现的目标......我想拨打电话的最后一种方式是

```
double x = a->getvalue<double>(char) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T18:10:31.603

类似的问题已经在 SO 上被问过很多次了。

但无论如何...

首先，您犯了一些语法错误。

代替

```
#ifndef  ........
#define .....
 template <class typename>
 class abcBaseClass:public abcDerivedClass{
 public:
     typename getvalue(char*);
};
#endif 
```

它应该是这样的。

```
#ifndef  ........
#define .....
 template <typename T>
 class abcBaseClass:public abcDerivedClass{
 public:
     T getvalue(char*);
};
// Definition follow in this file!
// For reasons or work-arounds, read below.
#endif 
```

此外，模板声明和定义都应该放在同一个文件中。一个例外是当您将该模板实例化为模板定义所在的源文件中的某种类型时。

像这样的东西。

```
#include "this_template.h"

template <typename T>
// all sorts of definitions...

// Explicit instantiate this template!!!!
template class abcBaseClass<Your_Type_Goes_Here>; 
```

请注意，这种方法的一个根本缺陷是，您只能在程序的其他任何地方使用您在此源文件中显式实例化的类型。尝试使用其他类型实例化此模板将导致链接器抱怨无法找到匹配的定义。

如果您坚持模板是通用的并且在其他地方定义模板类。您可以将定义放入另一个头文件中，只需将其命名为`this_template_impl.h`并包含`this_template.h`在`this_template_impl.h`

然后，在你的源文件中，而不是`#include "this_template.h"`，你写`#include "this_template_impl.h`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:22:05.910

您可以将定义放在 .cpp 文件中，但这更麻烦，而且不是模板通常的完成方式。

您需要 .cpp 中的一些额外代码来说服编译器生成填充了必要模板参数的函数。一种方法是以某种方式使用该函数：

```
mytypename abcDerivedClass<mytypename>::getvalue(char* name){

}

void dummy()
{
    abcDerivedClass<double> temp;
    temp->getvalue(NULL);
} 
```

没有必要实际调用虚拟函数，只需将它放在那里（在模板定义之后）就足够了。

我确信还有另一种显式实例化模板的方法，但由于我不这样做，所以我永远记不得了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T18:05:16.313

不，这不是正确的方法：

应该这样做：

```
#ifndef  ........
#define .....
 template <class T>
 class abcBaseClass:public abcDerivedClass{
 public:
     T getvalue(char*)
};

#endif 
```

并在 .cpp 文件中： template T abcBaseClass::getvalue(char * ch){ }

您的代码不正确的原因是因为`typename`是 C++ 关键字。并且必须在编译过程中抛出错误

您还可以使用：

```
#ifndef  ........
#define .....
 template <typename T>
 class abcBaseClass:public abcDerivedClass{
 public:
     T getvalue(char*)
};
#endif 
```

在 C++ 文件中：

```
template<class T>
T abcBaseClass<T>::getvalue(char * ch){
} 
```

# ruby-on-rails - 我将在我的模型/视图/控制器中使用的方法/变量放在哪里？

> ID：12960831
> 
> 赞同：0
> 
> 时间：2012-10-18T17:59:55.583
> 
> 标签：ruby-on-rails

我有一个变量：site_name，对于不同的站点会有所不同，但我不确定把它放在哪里，以便所有模型/视图/控制器都可以访问？这个变量应该只在服务器启动时设置一次，然后在整个站点中使用？

```
site_name ||= ENV['SITE'] == 'SiteA' ? "Awesome Site" : "Cool Site" 
```

我会把这个放在哪里？在变量中？在一个方法？什么位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T19:39:10.307

通常你会把它放在`config/environment.rb`. 或者如果您需要根据自己的环境（生产、开发、测试）自定义变量，可以将其放在`config/environments/*.rb`. 这些文件在启动时是只读的，所以如果你改变了值，你需要重新启动你的 Rails 应用程序才能使它们生效。

另请注意，您应该将其格式化如下：

```
Myapp::Application.config.site_name = ENV['SITE'] == 'SiteA' ? 'Awesome Site' : 'Cool Site' 
```

然后在您的应用程序中访问它：

```
Myapp::Application.config.site_name 
```

# java - Linkedin - REST API 想要使用 java 1.2 共享网络更新不能使用 scribe 或其他库

> ID：12960834
> 
> 赞同：0
> 
> 时间：2012-10-18T18:00:02.817
> 
> 标签：java, rest, oauth, linkedin, scribe

我们正在尝试在我们的应用程序中实现linkedin，并且我们希望使用Rest API，以便我们可以使用OAuth令牌通过后端将网络更新共享到我们自己的linkedin帐户

JavaScript API 无法使用，因为它的令牌每 30 分钟过期一次，我们必须每次（如果超过 30 分钟）登录以共享网络更新。所以我们想使用 REST API 和 OAUTH 令牌与 java 共享网络更新

我们已经考虑过 Scribe 和 Spring Social（尽管到目前为止，spring social 的linkedin 模块仍处于候选版本中）但是要使用这些库，我们需要更高版本的 java，我们现在正在使用 java 1.2 和应用程序

有没有办法我们仍然可以使用 REST API 并进行 OAuth 调用以共享网络更新，或者是否有仍然支持 Java 1.2 的 OAuth 的 Java 库

任何帮助或方向将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:51:52.273

没有适用于 java 1.2 的 LinkedIn Api 的 OAuth 库，实际上我认为唯一适用于所有 LinkedIn 端点的库（由于某些极端情况编码问题）是 scribe。

大多数 scribe 代码与 1.2 兼容。唯一的问题是一些泛型 ( `Map<T,U>`) 和注释，**它们**`@Override`应该不难改变。

 **如果你有兴趣挖掘源代码并复制粘贴你需要的部分（scribe 是 MIT 许可的，所以你可以用它做几乎任何你想做的事情），签名过程的**核心就在**[这个 class](https://github.com/fernandezpablo85/scribe-java/blob/master/src/main/java/org/scribe/oauth/OAuth10aServiceImpl.java)上。

祝你好运。**

# activemq - 收到“Connection.start()”消息时在骆驼中重新启动activemq路由

> ID：12960835
> 
> 赞同：1
> 
> 时间：2012-10-18T18:00:18.843
> 
> 标签：activemq, apache-camel

我有一条 activemq 骆驼路线，它在某些时候停止接收消息并需要重新启动。我不确定如何以编程方式检测和解决这种情况。

我的路线如下所示：

`from("activemq:queue:Consumer.app.VirtualTopic.msg?messageConverter=#convertMsg")`

它都是在 Spring 中配置的，如下所示：

```
<!-- Configure the Message Bus Factory -->
<bean id="jmsFactory" class="com.local.messaging.activemq.SpringSslContextConnectionFactory">
  <property name="brokerURL" value="${jms.broker.url}" />
  <property name="sslContext" ref="sslContext" />
</bean>

<!-- Connect the Message Bus Factory to Camel.  The 'activemq' bean
     name is necessary for Camel to pick it up automatically -->
<bean id="activemq" class="org.apache.activemq.camel.component.ActiveMQComponent" depends-on="jmsFactory">
  <property name="usePooledConnection" value="true" />
  <property name="connectionFactory">
    <bean class="org.apache.activemq.pool.PooledConnectionFactory">
      <property name="maxConnections" value="20" />
      <property name="maximumActive" value="10" />
      <property name="connectionFactory" ref="jmsFactory" />
    </bean>
  </property>
</bean> 
```

最后，代理 URL 配置如下：

`jms.broker.url=failover://(ssl://amq1:61616,ssl://amq1:61616)`

这启动得很好，并且大部分时间都像冠军一样工作。不过，每隔一段时间，我就会在日志中看到这条消息：

`Received a message on a connection which is not yet started. Have you forgotten to call Connection.start()? Connection: ActiveMQConnection {<details>}`

我强烈怀疑这发生在消息总线重新启动后，但由于我无法直接访问消息总线，我不确定这一点。我不知道那很重要。

对我来说关键是：

1.  如何以编程方式检测这种情况？似乎没有引发任何异常或类似情况，我看到的唯一方法是解析日志文件。
2.  检测到后如何修复？我需要`start()`和`stop()`路线还是有更清洁的方法？

最后，确实看到了一些建议，这种情况应该由activemq处理，使用`failover`方案。如上所示，我正在使用`failover`，这仍然会发生。

# silverlight - silverlight DataGrid 中的复选框行为异常

> ID：12960837
> 
> 赞同：2
> 
> 时间：2012-10-18T18:00:23.427
> 
> 标签：silverlight, checkbox

我在*Silverlight 5 DataGrid*`checkbox`的`itemtemplate`列中使用。我面临一个奇怪的问题。当我选择多个然后上下滚动网格时，选择会转移到其他一些.*`checkbox``checkbox`*

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-29T10:12:10.093

我在我的代码中解决了这个问题。我在网格的 LoadingRow 和 UnloadingRow 事件中进行了处理。加载一行后，我们需要查找我们希望保持复选框选中或未选中的条件。但是一旦你设置了 IsChecked 属性，复选框的 Checked 或 UnChecked 事件就会被触发。在这种情况下，我们可以取消注册复选框的 Checked 和 UnChecked 事件（如果有），设置 IsChecked 属性。设置后，再次注册事件。

以下是您的帮助代码。

将 LoadingRow 和 UnloadingRow 事件添加到您的网格中。

... LoadingRow="DGUserList_RowLoadUnload" UnloadingRow="DGUserList_RowLoadUnload">

在文件后面的代码中：

```
 private void DGUserList_RowLoadUnload(object sender, DataGridRowEventArgs e)
    {
        DataGridRow row = e.Row;
        CheckBox cbox = (CheckBox)this.dgUserList.Columns[0].GetCellContent(row);
        this.UpdateHookedEventsForCheckBox(cbox, false);
        cbox.IsChecked = true; // Here put your condition for check/uncheck
        this.UpdateHookedEventsForCheckBox(cbox, true);
    }

    private void UpdateHookedEventsForCheckBox(CheckBox chkBox, bool register)
    {
        if (register)
        {
            chkBox.Checked += this.CheckBox_Checked;
            chkBox.Unchecked += this.CheckBox_Unchecked;
        }
        else
        {
            chkBox.Checked -= this.CheckBox_Checked;
            chkBox.Unchecked -= this.CheckBox_Unchecked;
        }
    } 
```

这样我就不必费心在我的 Checked 和 UnChecked 事件中放入一些 hake 代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T18:14:28.030

这是一种已知行为，因为 Silverlight 在 DataGrid 中重用其图形资源。[在此 Silverlight 线程](http://forums.silverlight.net/t/212375.aspx#501008)中有关于它的讨论。

似乎解决它的一种方法是对 IsSelected 属性进行数据绑定：

> 我当时的解决方案是在我的数据源中添加一个新属性：IsSelected，并将复选框绑定到该值。

[您在此线程中](http://forums.silverlight.net/t/68912.aspx/1)有更多附加信息，微软在其中回答：

> 这不是错误。当您在 DataGrid 中滚动时会发生相同的复选框用于新数据，因为 DataGrid 会回收视觉效果。当您的新数据具有不同的值时，检查将通过 Binding 更改，您将收到事件。要使此方案正常工作，您可以做的是收听当一行出现时引发的 LoadingRow。在那里，您可以调用 column.GetCellContents 来获取单元格的内容。这将为您提供 CheckBox，此时您可以附加到 CheckChanged。如果你这样做，你需要做类似的事情并听 UnloadingRow 以便在复选框被滚动到视图之外时分离事件处理程序。*

# typescript - 为什么 TypeScript 允许在没有警告的情况下从字符串转换为数字

> ID：12960841
> 
> 赞同：8
> 
> 时间：2012-10-18T18:00:39.297
> 
> 标签：typescript

在编写这个 TypeScript 代码时，我惊讶地发现 TypeScript 编译器在我从字符串转换为数字时没有警告我。

```
var a = new string[];
a.push('a')
a.push('b')
a.push('c')

var i:string;
for (i in a) {
    var c : number = a[i];  <---- Here a is string[] but I assign it to c which is number
    alert(c.toString())
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-18T18:21:59.307

简短的回答：`a[i]`是类型`any`，不是`string`。

长答案：`a`是类型`string[]`。在 TypeScript 中，由 a 索引的 type 对象的`T[]`值`number`是 type `T`，但通过 a 索引它们`string`会导致`any`. type 的值`any`可以自由转换为任何其他类型。

为什么？

当您按字符串索引数组时，编译器根本无法预测将要发生的事情，并且您会遇到`any`. 考虑：

```
// Elsewhere...
Array.prototype.danger = 35;

// Meanwhile, back at the ranch:
var a = [ 'z' ];

var i: string;
for (i in a) {
    var x = a[i]; // i = 'danger', a[i] = 35...
} 
```

如果您真的确信没有人会破坏您的对象，或者您正在从一组已知安全的字符串值中获取索引，那么您可以编写一个索引类型。在您按字符串索引的情况下，您最好使用对象而不是数组：

```
var a: {[s: string]: string; } = {};
a['hello'] = 'world';
var i:string;
for (i in a) {
    var c : number = a[i]; // Issues an error
} 
```

# java - 我的 Java Swing JPanel 在两台显示器上只能拉伸到一台显示器的大小

> ID：12960842
> 
> 赞同：1
> 
> 时间：2012-10-18T18:00:54.033
> 
> 标签：java, swing, jpanel, stretch, multiple-monitors

我的 JPanel 可以很好地在两个显示器之间伸展，但不会伸展到两个显示器的大小。它停在一台显示器的大小上。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:46:33.010

我发现 JPanels 默认会跨越多个显示器。我的软件运行的专有框架有一些东西阻止了它。

# c# - 将 C# (MSIL) 转换为本机 X86 代码？

> ID：12960847
> 
> 赞同：3
> 
> 时间：2012-10-18T18:01:10.713
> 
> 标签：c#, assembly, compilation, x86, cil

我首先想说我的目标是将 MSIL 转换为原生 X86 代码。我对我的程序集仍然需要安装 .net 框架感到满意。NGEN 不是我想要的，因为您仍然需要原始程序集。

我遇到了[ilasm](http://msdn.microsoft.com/en-us/library/496e4ekx.aspx)，我想知道这就是我想要的，这会成为纯汇编代码吗？

我看过其他项目，比如 mono（它不支持我的应用程序使用的一些关键功能）和 .net 链接器，但它们很简单，只是用 .net 框架制作了一个 EXE，这不是我想要的。

到目前为止，任何研究都提出了......你做不到。我真的不知道为什么 JIT 在加载 MSIL 程序集时会这样做。我有自己想要这个的理由，所以我想我的问题归结为这个。

1.  无论如何，我发布的链接有用吗？

2.  有什么东西可以把 MSIL 变成 x86 程序集吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T00:19:11.147

有各种可用的第三方代码保护包通过加密 IL 并使用仅在运行时解包的特殊引导加载程序将其打包来隐藏 IL。如果您担心代码的反汇编，这可能是一个选择，尽管大多数这些第三方软件包也已经被破解（不幸的是，有点不可避免。）假设这是您的基本目标，简单的混淆最终可能同样有效.

与“预抖动”IL 相关的主要挑战之一是您最终会在本机代码中包含固定地址引用。当本地代码被加载以在 CLR 下执行时，这些反过来需要“重新基于”。这意味着您需要的不仅仅是编译的逻辑；您还需要在加载代码时重新定位固定引用所需的所有引用上下文信息。它不仅仅是缓存代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T18:09:13.947

与大多数事情一样，第一个问题应该是为什么而不是如何。我假设您有一个特定的目标，如果您想自己生成本机代码（另外，为什么是 x86？为什么不也是 x64？）。这是 JIT 编译器的工作——仅在需要时在特定平台上编译优化的指令集，然后再执行。

我可以推荐尝试了解 CLR 如何工作以及 JIT 如何工作的最佳资源是查看[SSCLI——](http://www.microsoft.com/en-us/download/details.aspx?id=4917)基于 ECMA-335 规范的 CLR 实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T23:59:47.247

您是否考虑过不使用 C#？鉴于 C# 编译器的输出是 MSIL，如果这不是您想要的，那么在不同的平台上进行开发是有意义的。

或者，听起来 NGEN 执行您想要的操作，它只是不处理将整个事情放入可执行文件中。您可以分析生成的 NGEN 图像以确定需要做什么来完成此操作（请注意，NGENed 图像是文档中的 PE 文件）

[这是 NGEN 上的一个链接，](http://msdn.microsoft.com/en-us/magazine/cc163610.aspx)其中包含有关图像存储位置的信息：`C:\windows\assembly\NativeImages_CLR_Bit`例如`C:\windows\assembly\NativeImages_v2.0.50727_86`. 请注意，.NET 3.0 和 3.5 都是 2.0 的一部分。

# jquery - 通过ajax传递数据得到一个json文件

> ID：12960849
> 
> 赞同：1
> 
> 时间：2012-10-18T18:01:11.150
> 
> 标签：jquery, ajax, json

我正在处理一些代码，让用户在字段中输入邮政编码，如果它在用户单击发送时通过客户端验证，我希望脚本将邮政编码发送到地址并且后端开发人员已设置它up 以便它返回一个有效或无效的 json 文件。

问题是我现在得到的只是未定义的。

有人可以看到我做错了什么或提供一些建议或解决问题。我不太确定如何使用 console.log，这可能会对我有所帮助。谢谢。

```
jQuery.validator.addMethod("postalcode", function(postalcode, element) {
return this.optional(element) || postalcode.match(/(^\d{5}(-\d{4})?$)|   (^[ABCEGHJKLMNPRSTVXYabceghjklmnpstvxy]{1}\d{1}[A-Za-z]{1} ?\d{1}[A-Za-z]{1}\d{1})$/);
}, "Zip code not valid. Please try again.");

var myForm = $('#zipform');

myForm.validate({
  errorClass: "errormessage, intro-highlighted",
  onkeyup: false,
  highlight: function(element) {
        $(element).addClass('intro-highlighted');
    },
    unhighlight: function(element) {
        $(element).removeClass('intro-highlighted');
    },

  errorClass: 'error',
  validClass: 'valid',
  rules: {
    zipcode: { required: true, postalcode: true }
  },
  errorPlacement: function(error, element)
  {
    // Set positioning based on the elements position in the form
    var elem = $(element),
      corners = ['left center', 'right center'],
      flipIt = elem.parents('span.right').length > 0;

    // Check we have a valid error message
    if(!error.is(':empty')) {
      // Apply the tooltip only if it isn't valid
      elem.filter(':not(.valid)').qtip({
        overwrite: false,
        content: error,
        position: {
          my: 'top left',
          at: 'top left',
          target: $('#zipcode'),
          adjust: {
            y: -30
          }
        },

        show: {
          event: false,
          ready: true
        },
        hide: false,
      })

      // If we have a tooltip on this element already, just update its content
      .qtip('option', 'content.text', error);
    }

    // If the error is empty, remove the qTip
    else { elem.qtip('destroy'); }
  },
  success: $.noop, // Odd workaround for errorPlacement not firing!
})

$.ajax({
    url: "http://address/icantshow/json/checkZip.action?zipCode=" + zipcode + "?jsoncallback=?",
    type: "GET",
    async: false,
    dataType: "jsonp",
    /*data: {
        zipcode:$('#zipcode').val(),
        username: 'user',
        password: 'pass'
      },*/
    success: function(json) {
      console.log(typeof data);
      //console.log(jsondata);
       //$('.bar').css({display:'none'});
       //$('.loader').append(data);
    },
    error: function(e) {
      console.log(e.message);
    }
 }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:07:12.373

```
 //REPLACE
url: "http://address/icantshow/json/checkZip.action?zipCode=" + zipcode + "?jsoncallback=?",
//BY
    url: "http://address/icantshow/json/checkZip.action?zipCode=" + zipcode + "&jsoncallback=?",

//IN
success: function(json) {
      console.log(typeof data);
    },

//SHOULD BE
success: function(json) {
      console.log(json);
    }, 
```

# security - Joomla 被黑了。如何预防？

> ID：12960852
> 
> 赞同：5
> 
> 时间：2012-10-18T18:01:31.327
> 
> 标签：security, joomla, joomla3.0

好的，所以我的一个网站（在 joomla 上）像第六次一样被黑客入侵......

我不会告诉你任何故事。只有事实：

首先，我发现在模板索引文件中出现了一些外来代码：

```
<div id='hideMe'> <p>Every person knows the large quan...|...ur cure Viagra <a href="xxxxx">Viagra</a> </div><script type='text/javascript'>if(document.getElementById('hideMe') != null){document.getElementById('hideMe').style.visibility = 'hidden';document.getElementById('hideMe').style.display = 'none';}</script> 
```

然后我在 tmp 文件夹中找到了一个名为 asd.php 的文件

内容： http: [//www.codr.cc/bb027a](http://www.codr.cc/bb027a)

我试图解码并得到类似： http: [//www.codr.cc/97c183](http://www.codr.cc/97c183)

这怎么发生的？黑客如何获得创建文件的权限？所有文件夹的权限都是 755 和文件 - 644。

Joomla 没有任何不安全的模块、组件或模板。一切都是最新的。

我还应该做些什么来防止未来的黑客攻击？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T18:50:24.657

1.  **您的网站安装了非常旧的扩展程序：**这是被黑的 Joomla 网站背后的首要和最常见的原因。您应该始终使您的扩展程序保持最新，如果您使用的扩展程序不再受支持，请尝试寻找替代方案。如果没有，请让开发人员查看该扩展以确保它没有漏洞问题。
2.  **您使用的是旧版本的 Joomla：**我们知道很难让您的 Joomla 网站保持最新版本，尤其是如果您有很多扩展（组件、模块、插件），如果你升级 Joomla。但是你必须这样做，你不能永远继续使用过时的版本。
3.  **您对 .htacess 文件具有写入权限：**默认情况下，您的 .htaccess 文件对其具有写入权限，因为 Joomla 必须对其进行更新，尤其是在您使用 SEF 时。问题是这会使您的 .htaccess 容易受到旨在更改它的攻击。您应该始终将 .htaccess 权限设置为 444 (r–r–r–) 或 440 (r–r––)。
4.  **你对你的 *.php 文件有写权限：**网络服务器和世界都不应该对你的 Joomla *.php 文件有写权限。您应该确保所有 *.php 的权限都设置为 444。
5.  **允许用户上传脚本：**例如，如果一个组件接受图片，你应该确保只允许上传图片。用户应该不能上传脚本（例如 *.php 文件）
6.  **授予对公共目录的执行权限：**在这种情况下，公共目录是指用户能够将文件上传到的那些目录。想象一下有人将文件上传到您的上传目录之一（以某种方式）。如果该文件是脚本，并且该目录允许脚本运行，则个人可以轻松运行恶意脚本。公共（上传）目录都应该被赋予766的权限（所有者可以读、写和执行，其余的只能读和写）。
7.  **使用不显眼的扩展：**您应该始终使用许多人使用和测试过的扩展。使用极少数人使用的扩展程序不是一个好习惯，并且可能会使您的网站被黑客入侵（攻击者可以使用多种技术，例如 XSS、SQL 注入等……）。如果您觉得有必要使用这样的扩展程序，
8.  **让开发人员检查它的安全性。**向不受信任的开发人员提供凭据：您不应将您的网站凭据提供给不受信任的开发人员。而且，如果您真的需要，请在开发人员完成工作后更改您的所有密码。
9.  **将所有可能的权限授予数据库用户：**一旦您的 Joomla 网站设置完毕，数据库用户应该只插入行、更新行、删除行和创建表。他不应该 DROP 表或 DROP 数据库。确保只为 Joomla 数据库用户提供必要的权限。
10.  **确信您的网站不会被黑客入侵或没有人会入侵您的网站：**无论您的网站是小型慈善网站还是大型学校网站，您的网站都容易受到黑客攻击。许多黑客使用软件扫描互联网寻找有漏洞的网站并对其进行攻击，只是因为他们可以！始终认真对待您网站的安全性，不要认为如果您太小没有人会考虑入侵您的网站，或者如果您太大，您就足够安全，没有人可以入侵您的网站。

检查哪一个会影响您并纠正您所犯的错误。

# 更新

[安全清单/您已被黑客入侵或污损](http://docs.joomla.org/Security_Checklist/You_have_been_hacked_or_defaced)

[Joomla 安全](http://docs.joomla.org/Security)

[易受攻击的扩展列表](http://docs.joomla.org/Vulnerable_Extensions_List)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T18:04:13.570

它还没有第六次被黑客入侵。您已被数十个机器人入侵，并且您的系统已被安装后门。您删除感染，机器人将恢复它。

发生这种情况是因为您的软件已过时。它可能是一些插件甚至 joomla 它本身已经很老了。

如何防止这种情况？好吧，您可以查找系统强化指南，其中有很多。无论如何，您需要从头开始。完全重新安装 joomla 及其所有组件，焦土风格。确保新系统上的所有内容都是最新的。

如果您仍有问题，请 **聘请专业人士**。

# c# - c# 正则表达式捕获

> ID：12960858
> 
> 赞同：5
> 
> 时间：2012-10-18T18:01:46.177
> 
> 标签：c#, regex, capturecollection

我正在匹配一个包含可选组和非可选组混合的重复组。当我遍历捕获时，捕获集合总是折叠的，即它们不会为不匹配的项目插入空元素。

有没有办法保留捕获集合中的匹配顺序，以便将任何省略的可选项插入为空，从而确保捕获集合元素跨组对应？

为了澄清，假设我的重复（父）组匹配了三次，并且在三个匹配中的一个中，省略了一个可选的子组，但存在于其他两组中，我最终得到了子组的捕获集合比其他捕获集合少一个元素。我如何知道哪些父组省略了可选项目？

我想可以使用捕获集合项的 Index 属性并检查它是否在父组的范围内，但是如果非匹配项在捕获集合中返回 null 项会更容易。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T18:07:38.627

而不是`(pattern)?`使用`(pattern|)`，你应该得到你想要的......

# jstl - 检索和迭代一对多的最佳实践

> ID：12960860
> 
> 赞同：0
> 
> 时间：2012-10-18T18:01:50.180
> 
> 标签：jstl, javabeans

我正在尝试生成每个客户订单的网页报告，其中包含每个订单的行项目详细信息。所以它看起来像这样：

```
Customer 1  | Order 1  |     Item 1    |
            |          | == New Row == |
            |          |     Item 2    |                     
            |          | == New Row == |
            |          |     Item 3    |                     
            |          | == New Row == |
            | ====== New Row ========= |
            | Order 2  |     Item 1    |                     
            |          | == New Row == |
            |          |     Item 2    |                     
            |          | == New Row == |
            |          |     Item 3    |                     
            |          | == New Row == |
            | ====== New Row ========= |
            | Order 3  |     Item 1    |                     
            |          |     Item 2    |
== New Row ==============================                     
Customer 2  | Order 1  |     Item 1    |                     
            |          | == New Row == |
            |          |     Item 2    |                     
            |          | == New Row == |
            |          |     Item 3    |                     
            |          | == New Row == |
            |          |     Item 4    |                     
            |          | == New Row == |
            |          |     Item 5    |                     
            |          | == New Row == |
            | ====== New Row ========= |
            | Order 2  |     Item 1    |                     
            |          | == New Row == |
            |          |     Item 2    |                     
            |          | == New Row == |
            |          |     Item 3    |                     
== New Row ============================== 
```

获取数据的数组列表是否更好，如下所示：

```
1  | 1 |  1 |                     
1  | 1 |  2 |                     
1  | 1 |  3 |                     
1  | 2 |  1 |                     
1  | 2 |  2 |                     
1  | 2 |  3 |                     
1  | 3 |  1 |                     
1  | 3 |  2 |                     
2  | 1 |  1 |                     
2  | 1 |  2 |                     
2  | 1 |  3 |                     
2  | 1 |  4 |                     
2  | 1 |  5 |                     
2  | 2 |  1 |                     
2  | 2 |  2 |                     
2  | 2 |  3 | 
```

并传递 1 个 JavaBean 并使用 JSTL 确定嵌套如下：

```
 this is incomplete for brevity
  <table><tr><th>Customer No</th><th>Orders</th></tr>
  <c:forEach var="custOrderLineItem" items="${customerOrderLineItemList}">
  <c:set var="currentOrder" value="custOrderLineItem.orderId">
  <c:set var="currentCustomer" value="custOrderLineItem.customerId">

  <c:if test="${currentOrder != custOrderLineItem.orderId}">
      ==New Row==
  </c:if> 
```

还是使用嵌套的 JavaBeans 更好

```
Customer.setOrders<List>
Orders.setOrderDetails<List>
OrderDetails.setLineItem<List> 
```

然后像这样使用JSTL

```
 <c:forEach var="customer" items="${customerList}">
         <c:forEach var="order" items="${customer.orderList}">
             <c:forEach var="lineItem" items="${order.detailList}"> 
```

在花时间写完这篇文章后，我觉得第二种方法看起来更干净、更容易。但是第一种方法似乎有一个更简单的 SQL 查询。我没有使用 JPA，只是基本的 JDBC sql 调用。那么如何在没有 JPA 的情况下填充嵌套的 JavaBeans 呢？你会做这样的事情吗？

```
 List<Customer> custList = getCustomerList();
  ListIterator custListIter = custList.listIterator();
     while (custListIter.hasNext()) {
         customer = (Customer) custListIter.next();
         List<Order> orderList = getOrderList(customer.getId());
         ListIterator orderListIter = orderList.listIterator();
        while (orderListIter.hasNext()) {
                 order = (Order) orderListIter.next();
                 List orderDetailsList<OrderDetail> = getOrderDetailList(order.getId);
                 order.setOrderDetails(orderDetailsList);
                 orderListIter.set(order);
             }
         customer.setOrderList(orderList);
         custListIter.set(customer);
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:53:11.610

您可以简单地创建返回所有内容的 SQL 查询，并从结果集中构建对象图。使用映射来保持 ID 和相应对象之间的关联：

```
Map<Long, Customer> customersById = new HashMap<Long, Customer>();
Map<Long, Order> ordersById = new HashMap<Long, Order>();
Map<Long, Item> itemsById = new HashMap<Long, Item>();
while (rs.next()) {
    Long customerId = rs.getLong(1);
    Customer customer = customersById.get(customerId);
    if (customer == null) {
        customer = new Customer(customerId);
        // populate other fields of customer
        customersById.put(customerId, customer);
    }

    Long orderId = rs.getLong(5);
    Order order = ordersById.get(orderId);
    if (order == null) {
        order = new Order(orderId);
        customer.addOrder(order);
        // populate other fields of order
        ordersById.put(orderId, order);
    }

    // same for items

} 
```

在循环结束时，您拥有所有客户，每个客户都有他们的订单，每个客户都有他们的物品。

# iphone - iPhone iOS 使用 UIView animateWithDuration 块执行操作的正确方法是什么？

> ID：12960866
> 
> 赞同：2
> 
> 时间：2012-10-18T18:02:16.263
> 
> 标签：iphone, objective-c, ios, animation, uiview

**我正在徘徊什么是响应用户事件的“长”动作的正确方法。**例如，我有这张幻灯片来取消在 0.5 秒内自动离开屏幕的块。这`[self coreDataAction]`本身可能需要大约 0.3 秒。

我想确保一旦用户看到动画结束，动作就会完成（我不希望用户不小心导航到不同的控制器或关闭应用程序以为动作完成）。

**在这种情况下我应该把它放在哪里`[self coreDataAction];`？**在块之上、块内还是在完成块中？

```
//should I put it here?

 CGPoint slideToCancelCenter = slideToCancel.view.center;
    [UIView animateWithDuration:0.5 animations:^{
        self.goToSleepButton.center = slideToCancelCenter;
        [UIView setAnimationDuration:0.5];
        CGPoint sliderCenter = slideToCancel.view.center;
        sliderCenter.y += slideToCancel.view.bounds.size.height;
        slideToCancel.view.center = sliderCenter;

//should I put it here?        
// [self coreDataAction];
    } completion:^(BOOL finished) {
//should I put it here?
    } ]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:27:03.613

处理此问题的更好方法可能是在屏幕上为视图设置动画，然后`coreDataAction`在完成处理程序中启动。方法执行完成后，`coreDataAction`您可以调用方法为幻灯片设置动画以取消离屏视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:14:12.303

假设 [self coreDataAction] 在主线程上执行，我会说你应该把它放在第一行以确保在动画完成时方法是完整的。

# php - 从可拖动的 JQuery UI 获取数据并存储在数据库中

> ID：12960872
> 
> 赞同：0
> 
> 时间：2012-10-18T18:02:47.437
> 
> 标签：php, mysql, jquery-ui

这就是我想要做的：

当我的可拖动 div 被拖放到我的可拖放 div 上时，我想获取与它们关联的[数据，然后使用 PHP 将数据存储在 MySQL 数据库中。](http://api.jquery.com/data/)

请注意，将有多个可拖动的 div 将被拖放到一个可拖放的 div 上。

此外，数据不会立即存储；当所有 div 都被拖动时，它们将在单击按钮时存储。

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:48:10.260

您应该使用 jQuery 或其他 JS 工具/框架来向您的应用程序触发 AJAX 请求。构建一个获取数据的接口，例如 divId 和 userId 以及 positionId。请注意，您必须使用 userId 检查会话，因为如果您允许每个用户都这样做，应用程序的安全性会受到影响。您应该返回 JSON (json_encode FTW!) 以与您的 javascript 脚本进行通信。

**数据库：**

```
id, userId, divId, positionId
1, 1, 1, 2
1, 1, 2, 1 
```

**PHP：**

```
<?php
$positionId = $_GET['positionId'];
$divId      = $_GET['divId'];
$userId     = $_GET['userId']; // make sure that this userId is equal to your session

// init db
// check for existing entity (e.g. the div already exist for this user)
$db->query("INSERT INTO position SET userId = :userId, divId = :divId, positionId = :positionId");
// execute
json_encode(array('success' => true)); 
```

**JS：**

```
$.ajax({
    url: '/your_script.php',
    params: {
        userId: 1,
        positionId: 1,
        divId: 1
    },
    dataType: 'json',
    success: function(response) {
        if (response.success) {
            // display feedback
        }
    }
}); 
```

# java - 缩短 ImageIcon 的路径

> ID：12960880
> 
> 赞同：3
> 
> 时间：2012-10-18T18:03:13.677
> 
> 标签：java, image, user-interface, imageicon

在 Java 中创建 ImageIcon 时，有没有办法缩短文件的路径，而不是让`C:\Users\John\Documents\Images\image.gif`路径成为`image.gif`？

我尝试将图像放在与 Java 类相同的目录中，但它没有找到图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:16:39.043

`ImageIcon ii = new ImageIcon(Test.class.getResource("test.gif"));`

在这种情况下，Test.class 和 test.gif 位于同一位置。通常，您会像这样构造它：

*   src/com/mywebsite/Test.java
*   资源/com/mywebsite/test.gif

将 src 和 resources 都设置为源文件夹。然后在编译的时候，test.gif 会被输出到与Test.class 相同的位置。

# sql - 多次插入表时出错

> ID：12960885
> 
> 赞同：0
> 
> 时间：2012-10-18T18:03:42.757
> 
> 标签：sql, vb.net, oracle10g

我有一个 VB.NET 应用程序，作为这个函数的一部分，它写入一个 oracle 数据库。当我启动应用程序时，一次迭代的工作非常好，但是，当应用程序仍然打开时，如果我再次尝试写入数据库，我会收到以下错误。

```
 ORA-06550: line 1, column 7:
PLS-00306: wrong number or types of arguments in call to 'INSERTINTORACOSENT'
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored 
```

我在 Oracle SQL 中的过程是

```
create or replace
PROCEDURE     insertintoracosent(
    p_phone            IN RACOSENT.PHONE%TYPE,
    p_msg              IN RACOSENT.MESSAGE%TYPE)
IS
BEGIN
  INSERT INTO racosent
  VALUES (seq_sent.nextval, p_phone, p_msg, sysdate);
END; 
```

我的 VB.NET 代码是

```
 Sub orclSendSMS(ByRef cbManNum As String, ByRef cbManMsg As String)
    If orcl.State = ConnectionState.Closed Then orcl.Open()
    myCMD.Connection = orcl
    myCMD.CommandText = "insertintoracosent"
    myCMD.CommandType = CommandType.StoredProcedure
    Dim num As OracleParameter = New OracleParameter("p_phone", OracleDbType.Int64, ParameterDirection.Input)
    Dim msg As OracleParameter = New OracleParameter("p_msg", OracleDbType.Varchar2, ParameterDirection.Input)
    num.Value = Convert.ToInt64(cbManNum)
    msg.Value = cbManMsg
    myCMD.Parameters.Add(num)
    myCMD.Parameters.Add(msg)
    Try
        myCMD.ExecuteNonQuery()
    Catch ex As Exception
        MsgBox(ex.ToString)
        Exit Sub
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:49:35.043

看起来您可能没有重新初始化 myCMD？那么参数集合中的参数数量每次增加两个？

尝试做一个`myCMD.Parameters.Count`

# database - 数据库 Postgres - 无法加载数据库

> ID：12960886
> 
> 赞同：1
> 
> 时间：2012-10-18T18:03:48.483
> 
> 标签：database, postgresql

我刚来这地方。我整天都在与一个问题作斗争，我的朋友告诉我，检查这个网站并就我的问题提出一个话题。所以我在这里，厌倦了尝试和寻找结果。关于问题：我想通过 phpPgAdmin 在我的 postgres 服务器上启动数据库，但突然多亏了 php(?) 我不允许这样做。事情看起来像，在没有任何问题登录到 phppgadmin 之后，我正在创建一个数据库。创作总是很顺利，但问题就在那之后出现。我不能看到里面有什么，我什至不能点击数据库，因为数据库无法加载。它弹出一些疯狂的错误。错误看起来像这样：“错误加载 database.php?subject=database&server=127.0.0.1%3A5432%3Aallow&action=tree&database=postgres (500: Internal Server Error)”

[http://speedy.sh/Skp8j/postgres1.jpg](http://speedy.sh/Skp8j/postgres1.jpg) http://postimage.org/image/hc56f1qnb/full/

说真的，我已经厌倦了，我真的希望你们能帮助我。

关于达里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:51:16.453

这是来自 apache 的日志文件。试图从 php 获取日志文件，但据我所知，它不会生成任何日志文件。------nvm 已经 :)

# php - 使用 PHP die() 输出 UTF-8 编码的消息

> ID：12960887
> 
> 赞同：1
> 
> 时间：2012-10-18T18:03:49.963
> 
> 标签：php, utf-8

我不认为它会那么难找到 - 但我似乎无法 - 关于如何使用 PHP 输出 UTF-8 编码消息的资源。我正在制作一个法语管理门户，我想要法语 die() 消息。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:05:31.603

问题出在哪里？确保您的文档是用 UTF8 编写的，并且您正在发送适当的内容类型标头。

您的消息应该可以顺利通过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T18:05:39.653

```
die('Le médecin est dans la maison'); //ta da? 
```

演示：[http ://codepad.org/are2xZeA](http://codepad.org/are2xZeA)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T18:08:20.077

```
header('Content-Type: text/html; charset=utf-8');
// and/or
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

并在必要时与**utf8_encode()**结合使用。

# c++ - 递归增量澄清

> ID：12960888
> 
> 赞同：1
> 
> 时间：2012-10-18T18:03:54.217
> 
> 标签：c++

我有以下功能：

```
 int v[]={0,1,1,1};
      int f(int x)
      {
          if(x>=1)  return v[x]+f(x-1);
          else return 0; 
      } 
```

当我像这样在 main 中调用它时：`cout<<f(4);`它输出 '4' 但我希望是 '3' 有人可以澄清为什么我得到 '4' 而不是 '3' 吗？（我想我错过了什么）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T18:05:29.150

v[4] 未定义。它有 4 个元素，因此最大数组索引为 3。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T18:05:36.563

任何事情都可能发生，因为这是未定义的行为。**C++ 中的数组是从 0 开始的——它们从 0 开始，一直到元素数量—— 1**。

`4`是一个完全有效的答案，就像会`10`或`42`会一样。

`v`只有索引`0...3`，除此之外的都是 UB。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T18:06:15.507

v[4] 有 4 个元素，因此最大索引为 3。数组索引从 0 开始，由于您尚未初始化它，它将最大索引为 3，因为它目前有 4 个元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T18:11:34.703

的输出

```
 int v[]={0,1,1,1};
      int f(int x)
      {
          if(x>=1)  return v[x]+f(x-1);
          else return 0; 
      } 
```

调用时未定义，`cout << f(4)`因为它的值超出 x=3。这是不正确的。数组从 0 开始，对于您的数组，其范围是 0 -> 3（=4 个元素）。

要更正它，您必须调用`cout << f(3);`

还要检查范围：

像这样的简单检查`int f(x)`将为您提供正确的结果。

像这样的东西：

```
 #define checkRange(x,y) (((sizeof(x)/sizeof(x[0])) >= y)?true:false)

  int v[]={0,1,1,1};
  int f(int x)
  {
      if(!checkRange(v,x)){
          return 0+f(x-1);
      }
      if(x>=1)  return v[x]+f(x-1);
      else return 0; 
  } 
```

# solr - Solr / Solritas 3.6 /solr/browse 未找到问题

> ID：12960893
> 
> 赞同：0
> 
> 时间：2012-10-18T18:04:04.800
> 
> 标签：solr, solritas

我已经使用 Jetty 安装了一个 solr 实例，并且我尝试按照此处的说明安装[velocityResponseWriter](https://wiki.apache.org/solr/VelocityResponseWriter)我刚刚插入了缺少[Apache Solr Velocity](http://mvnrepository.com/artifact/org.apache.solr/solr-velocity/3.6.0)的 jar 库，当我通过控制台启动服务时，我收到了插件的消息加载正常。

但是当我尝试运行 solritas 时，出现以下错误：

HTTP 错误 404

访问 /solr/browse 时出现问题。原因：

```
NOT_FOUND 
```

由码头提供支持：//

有任何想法吗？

编辑：我一直在尝试通过 solr 4.0 做到这一点，这是 solritas 的文件配置部分

```
<requestHandler name="/browse" class="solr.SearchHandler">
 <lst name="defaults">
   <str name="echoParams">explicit</str>

   <!-- VelocityResponseWriter settings -->
   <str name="wt">velocity</str>
   <str name="v.template">browse</str>
   <str name="v.layout">layout</str>
   <str name="title">Solritas</str>

   <!-- Query settings -->
   <str name="defType">edismax</str>
   <str name="qf">
      text^0.5 features^1.0 name^1.2 sku^1.5 id^10.0 manu^1.1 cat^1.4
      title^10.0 description^5.0 keywords^5.0 author^2.0 resourcename^1.0
   </str>
   <str name="df">text</str>
   <str name="mm">100%</str>
   <str name="q.alt">*:*</str>
   <str name="rows">10</str>
   <str name="fl">*,score</str>

   <str name="mlt.qf">
     text^0.5 features^1.0 name^1.2 sku^1.5 id^10.0 manu^1.1 cat^1.4
     title^10.0 description^5.0 keywords^5.0 author^2.0 resourcename^1.0
   </str>
   <str name="mlt.fl">text,features,name,sku,id,manu,cat,title,description,keywords,author,resourcename</str>
   <int name="mlt.count">3</int>

   <!-- Faceting defaults -->
   <str name="facet">on</str>
   <str name="facet.field">cat</str>
   <str name="facet.field">manu_exact</str>
   <str name="facet.field">content_type</str>
   <str name="facet.field">author_s</str>
   <str name="facet.query">ipod</str>
   <str name="facet.query">GB</str>
   <str name="facet.mincount">1</str>
   <str name="facet.pivot">cat,inStock</str>
   <str name="facet.range.other">after</str>
   <str name="facet.range">price</str>
   <int name="f.price.facet.range.start">0</int>
   <int name="f.price.facet.range.end">600</int>
   <int name="f.price.facet.range.gap">50</int>
   <str name="facet.range">popularity</str>
   <int name="f.popularity.facet.range.start">0</int>
   <int name="f.popularity.facet.range.end">10</int>
   <int name="f.popularity.facet.range.gap">3</int>
   <str name="facet.range">manufacturedate_dt</str>
   <str name="f.manufacturedate_dt.facet.range.start">NOW/YEAR-10YEARS</str>
   <str name="f.manufacturedate_dt.facet.range.end">NOW</str>
   <str name="f.manufacturedate_dt.facet.range.gap">+1YEAR</str>
   <str name="f.manufacturedate_dt.facet.range.other">before</str>
   <str name="f.manufacturedate_dt.facet.range.other">after</str>

   <!-- Highlighting defaults -->
   <str name="hl">on</str>
   <str name="hl.fl">content features title name</str>
   <str name="hl.encoder">html</str>
   <str name="hl.simple.pre">&lt;b&gt;</str>
   <str name="hl.simple.post">&lt;/b&gt;</str>
   <str name="f.title.hl.fragsize">0</str>
   <str name="f.title.hl.alternateField">title</str>
   <str name="f.name.hl.fragsize">0</str>
   <str name="f.name.hl.alternateField">name</str>
   <str name="f.content.hl.snippets">3</str>
   <str name="f.content.hl.fragsize">200</str>
   <str name="f.content.hl.alternateField">content</str>
   <str name="f.content.hl.maxAlternateFieldLength">750</str>

   <!-- Spell checking defaults -->
   <str name="spellcheck">on</str>
   <str name="spellcheck.extendedResults">false</str>       
   <str name="spellcheck.count">5</str>
   <str name="spellcheck.alternativeTermCount">2</str>
   <str name="spellcheck.maxResultsForSuggest">5</str>       
   <str name="spellcheck.collate">true</str>
   <str name="spellcheck.collateExtendedResults">true</str>  
   <str name="spellcheck.maxCollationTries">5</str>
   <str name="spellcheck.maxCollations">3</str>           
 </lst>

 <!-- append spellchecking to our list of components -->
 <arr name="last-components">
   <str>spellcheck</str>
 </arr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T11:31:43.000

您的默认搜索字段等于 'text' : `<str name="df">text</str>`，您可能必须将其更改为您的字段之一。
检查启动 start.jar (Solr) 的命令行，以查看确切的错误。

# php - mail() 有效，而 mb_send_mail() 在多字节环境中无效

> ID：12960901
> 
> 赞同：0
> 
> 时间：2012-10-18T18:04:36.063
> 
> 标签：php, utf-8

最近，我们将环境转换为使用 UTF-8 编码。一切似乎都运行良好。页面以 UTF-8 正确提供，使用 PHP 的 mail() 函数发送的电子邮件也以（在我们的例子中）正确显示的法语字符发送。

今天早上，我开始用它们的多字节对应函数（例如 mb_strlen()、mb_send_mail()）替换非多字节字符串函数（例如 strlen()、mail()），它似乎按预期工作除 mb_send_mail() 以外的所有情况，其中法语字符显示为问号。奇怪的是，它们在使用 mail() 时显示正确。在这两种情况下，我还在电子邮件的标题中将字符集设置为 utf-8，并在我的电子邮件客户端中检查它确认它是按原样发送的。

我应该补充一点，我**没有**使用函数重载功能，因为我担心它会干扰我们正在使用的第三方扩展，这就是我选择手动替换函数的原因。

**编辑**

这些行在 php.ini 中被修改/添加：

```
default_charset = "utf-8"
mbstring.language=Neutral
mbstring.internal_encoding=utf-8
mbstring.http_input=UTF-8
mbstring.http_output=UTF-8
mbstring.encoding_translation=On 
```

我的 PHP 文件也都以 UTF-8 编码保存，没有 BOM。

调用 mb_send_mail() 函数时的代码如下所示：

```
$to = "person@email.com";
$subject = "Assigné";
$body = "La demande suivante vous a été assigné : "
$headers .= 'From: ' . $from . "\r\n";
$headers .= 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-Type: text/html; charset="utf-8"' . "\r\n";
$headers .= 'Content-Transfer-Encoding: quoted-printable' . "\r\n";

if (!(@mb_send_mail($to, $subject, $body, $headers))) {
//Error message
} 
```

正如我原来的帖子中所指出的，当使用 mb_send_mail() 函数时，我所有的锐角 (é) 字符，包括电子邮件的主题和 bosy，都显示为问号 (?)，但是当使用 mail() 函数时，它们会出现如预期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:41:22.817

`mail()`据我所知，保持它的功能更好。

`mb_send_mail()`其他人推荐它，请参阅 PHP 手册。

# google-chrome - 在 Chrome 扩展程序中读取和修改 HTTP GET 请求

> ID：12960902
> 
> 赞同：2
> 
> 时间：2012-10-18T18:04:36.760
> 
> 标签：google-chrome, google-chrome-extension, webrequest

我想在 Chrome 扩展程序中读取和修改（添加）HTTP 标头。我正在使用 chrome.webRequest API。但我仍然无法阅读它。这是我的代码。

```
chrome.webRequest.onBeforeSendHeaders.addListener(

    function(details) {
    details.requestHeaders.push({name:"dummyHeader",value:"1"});
    return {requestHeaders: details.requestHeaders};
    },

    {urls: ["<all_urls>"]},
    ["requestHeaders"]

); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T19:19:57.543

您需要将该`"blocking"`标志添加到 ExtraInfoSpec 列表中以暂停请求。`onBeforeSendHeaders`如果没有此标志，则忽略事件侦听器的返回值。

```
chrome.webRequest.onBeforeSendHeaders.addListener(
    function(details) {
        details.requestHeaders.push({name:"dummyHeader",value:"1"});
        return {requestHeaders: details.requestHeaders};
    },
    {urls: ["<all_urls>"]},
    ["requestHeaders", "blocking"]
                      //^^^^^^^^
); 
```

我建议更仔细地阅读文档，特别是[注册事件侦听](http://developer.chrome.com/extensions/webRequest.html#subscription)器部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T15:23:24.380

但是，对于以后阅读它的所有人来说，这不是 XmlHttpRequest 的解决方案。

不明显，但异步请求不能被阻塞。有关此问题的更多信息，您可以在[issiue 132731](http://code.google.com/p/chromium/issues/detail?id=132731)阅读 如果您需要更改 XmlHttpRequest 的请求标头，您必须使用[declarativeWebRequest](http://developer.chrome.com/trunk/extensions/declarativeWebRequest.html)

您可以在 Chrome Rest Client[后台页面](http://code.google.com/p/chrome-rest-client/source/browse/trunk/RestClient/war/extension/background.js)（declarativeRequest.setRules() 函数）中找到一个实现示例。

# python - webapp2 如何从响应头中删除 Cache-Control: no-cache？

> ID：12960904
> 
> 赞同：1
> 
> 时间：2012-10-18T18:04:42.397
> 
> 标签：python, google-app-engine, internet-explorer-8, blobstore, webapp2

我无法通过 HTTPS 提供 appengine blobstore，特别是使用 IE 8 和 IE 7 浏览器，因为浏览器不喜欢通过 https 提供可下载的内容。根据微软的一篇文章，这是因为**Cache-Control: no-cache**标头。

[http://blogs.msdn.com/b/ieinternals/archive/2009/10/02/internet-explorer-cannot-download-over-https-when-no-cache.aspx](http://blogs.msdn.com/b/ieinternals/archive/2009/10/02/internet-explorer-cannot-download-over-https-when-no-cache.aspx)

文章中提出的解决方案是从响应中删除 Cache-Control: no-cache 标头。但是，即使在我尝试将其设置为其他内容之后，webapp2 似乎也会自动添加此标头。

根据源代码，它似乎被添加到每个响应 [http://code.google.com/p/webapp-improved/source/browse/webapp2.py#362](http://code.google.com/p/webapp-improved/source/browse/webapp2.py#362)

```
def __init__(self, *args, **kwargs):
        """Constructs a response with the default settings."""
        super(Response, self).__init__(*args, **kwargs)
        self.headers['Cache-Control'] = 'no-cache' 
```

有没有办法覆盖这种行为？

这是我在构建响应时尝试做的事情，但是一旦呈现响应，'Cache-Control: no-cache' 仍然存在。

```
self.response.headers['Pragma'] = 'cache-control'
self.response.headers['Cache-Control'] = 'private'
self.response.cache_control.no_cache = None
self.response.cache_control.public = False
self.response.cache_control.max_age = 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:49:15.763

我不在下载处理程序本身中使用 webapp2。它看起来像这样：

```
class DynServe(blobstore_handlers.BlobstoreDownloadHandler):

    def get(self, resource):                                       

        (key, _, _) = resource.rpartition('.')
        blob_info = blobstore.BlobInfo.get(key)     
        self.send_blob(blob_info, save_as=True)    

app = webapp2.WSGIApplication(
                          [
                           ('/dynserve/([^/]+)?', DynServe),
                          ], debug=True)
def main():
    app.run() 
```

提供像这样的 pdf：/dynserve/{{ blob-key }}.pdf

# c - 单元测试过程 C 代码

> ID：12960905
> 
> 赞同：0
> 
> 时间：2012-10-18T18:04:47.640
> 
> 标签：c, unit-testing, embedded

我刚刚浏览了这个关于单元测试的[视频。](http://www.youtube.com/watch?v=wEhu57pih5w)它为单元测试面向对象的代码提供了很好的指导。是否有任何好的文档/书籍/技巧来编写可单元测试的程序`C`代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:12:55.297

这可以给你很多想法：[嵌入式 C 的测试驱动开发](http://pragprog.com/book/jgade/test-driven-development-for-embedded-c)。我真的很喜欢那个。不过，在我阅读它的时候，我已经积累了相当多的使用单元测试开发嵌入式系统的经验。

# django - Duplication check before saving the form data in Django

> ID：12960906
> 
> 赞同：2
> 
> 时间：2012-10-18T18:04:50.027
> 
> 标签：django, forms

I got a form as following:

```
class CourseAddForm(forms.ModelForm):
  """Add a new course"""
  name = forms.CharField(label=_("Course Name"), max_length=100)
  description = forms.Textarea()
  course_no = forms.CharField(label=_("course Number"), max_length=15)

  #Attach a form helper to this class
  helper = FormHelper()
  helper.form_id = "addcourse"
  helper.form_class = "course"

  #Add in a submit and reset button
  submit = Submit("Add", "Add New Record")
  helper.add_input(submit)
  reset = Reset("Reset", "Reset")
  helper.add_input(reset)

def clean(self):
  """ 
  Override the default clean method to check whether this course has been already inputted.
  """    
  cleaned_data = self.cleaned_data
  name = cleaned_data.get('name')
  hic = cleaned_data.get('course_no')

  try:
    course=Course.objects.get(name=name)
  except Course.DoesNotExist:
    course=None

  if course:
    msg = u"Course name: %s has already exist." % name
    self._errors['name'] = self.error_class([msg])
    del cleaned_data['name']
    return cleaned_data
  else:
    return self.cleaned_data

  class Meta:
    model = Course 
```

As you can see I overwrote the clean method to check whether this course has already existed in the database when the user is trying to add it. This works fine for me.

However, when I want to add the same check for the form for editing, the problem happened. Because it is editing, so the record with same course name has already exist in the DB. Thus, the same check would throw error the course name has already exist. But I need to check the duplication in order to avoid the user updating the course name to another already existed course name.

I am thinking of checking the value of the course name to see if it is changed. If it has been changed, than I can do the same check as above. If it has not been changed, I don't need to do the check. But I don't know how can I obtain the origin data for editing.

Does anyone know how to do this in Django?

My view looks as following:

```
@login_required
@csrf_protect
@never_cache
@custom_permission_required('records.change_course', 'course')
def edit_course(request,course_id):
  # See if the family exists:
try:
  course = Course.objects.get(id=course_id)
except Course.DoesNotExist:
  course = None

if course:
  if request.method == 'GET':
    form = CourseEditForm(instance=course)
    return render_to_response('records/add.html',
                            {'form': form},
                            context_instance=RequestContext(request)
                            )
  elif request.method == 'POST':
    form = CourseEditForm(request.POST, instance=course)
    if form.is_valid():
      form.save()
      return HttpResponseRedirect('/records/')
    # form is not valid: 
    else:
      error_message = "Please correct all values marked in red."
      return render_to_response('records/edit.html', 
                              {'form': form, 'error_message': error_message},
                              context_instance=RequestContext(request)
                              )      
else:
  error = "Course %s does not exist. Press the 'BACK' button on your browser." % (course)
  return HttpResponseRedirect(reverse('DigitalRecords.views.error', args=(error,))) 
```

Thank you.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T18:26:04.300

I think you should just set `unique=True` on the `Course.name` field and let the framework handle that validation for you.

**Update:**

Since `unique=True` is not the right answer for your case, you can check this way:

```
def clean(self):
    """ 
    Override the default clean method to check whether this course has
    been already inputted.
    """    
    cleaned_data = self.cleaned_data
    name = cleaned_data.get('name')

    matching_courses = Course.objects.filter(name=name)
    if self.instance:
        matching_courses = matching_courses.exclude(pk=self.instance.pk)
    if matching_courses.exists():
        msg = u"Course name: %s has already exist." % name
        raise ValidationError(msg)
    else:
        return self.cleaned_data

class Meta:
    model = Course 
```

As a side note, I've also changed your custom error handling to use a more standard `ValidationError`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T18:40:37.153

I believe excluding the current instance id from the results would solve the problem:

```
from django.db.models import Q
try:
    qs = Course.objects.filter(name=self.cleaned_data.get('name'))
    if self.instance.pk is not None:
        qs = qs.filter(~Q(pk=self.instance.pk))
    course = qs.get()
except Course.DoesNotExist:
    course = None 
```

However as dokkaebi pointed out, unique is really the better way to go with this, as this solution is vulnerable to race conditions. I'm not sure what your datamodel looks like but I suspect defining

```
class Meta:
    unique_together = ('department', 'name') 
```

should accomplish what you want.

# python - Python：替换字典中的所有值

> ID：12960907
> 
> 赞同：10
> 
> 时间：2012-10-18T18:04:52.337
> 
> 标签：python, dictionary

是否可以用整数 1 替换字典中的所有值，而不考虑值？

谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-18T18:08:05.140

当然，您可以执行以下操作：

```
d = {x: 1 for x in d} 
```

这将创建一个新字典，将（旧的）中的`d`每个键映射到.`d``1`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-18T18:17:26.953

您可以使用字典理解（正如其他人所说）创建一个具有与旧字典相同键的新字典，或者，如果您需要完成整个操作：

```
for k in d:
    d[k] = 1 
```

如果你真的很喜欢 1-liner，你可以使用`update`：

```
d.update( (k,1) for k in d ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T18:08:34.173

```
a = {1:2, 2:2,3:2}
a = {x:1 for (x,_) in a.iteritems()}
print a 
```

{1:1, 2:1, 3:1}

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-18T18:07:38.777

是的，这是可能的。遍历字典中的每个键并将相关值设置为 1。

# iphone - 数组始终为空

> ID：12960913
> 
> 赞同：0
> 
> 时间：2012-10-18T18:05:11.633
> 
> 标签：iphone, objective-c, xml

> **可能重复：**
> [NSMutableArray addObject 不工作](https://stackoverflow.com/questions/1827058/nsmutablearray-addobject-not-working)

我正在制作一个 iPhone 应用程序，到目前为止，我正在从我的服务器接收数据，使用该数据创建对象并用这些对象填充一个数组。

我的数据是 XML 格式的，它保存为一个字符串，该字符串被转换为一个`NSData`对象，如下所示：

```
NSMutableURLRequest *myRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"https://my.URL/data.php"]];
[myRequest setHTTPMethod:@"POST"];

NSURLResponse *response;
NSError *error = NULL;
NSData *myReturn = [NSURLConnection sendSynchronousRequest:myRequest returningResponse:&response error:&error];
NSString *returnString = [[NSString alloc] initWithData:myReturn encoding:NSASCIIStringEncoding];
 NSData *tempData = [return dataUsingEncoding:NSUTF8StringEncoding]; 
```

之后，我进行标准的 Objective-C XML 事件解析，但直到以下方法我才创建任何东西：

```
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if ([elementName isEqual:@"id"])
    {
        hailID = currentValue;
        return;
    }
    if ([elementName isEqual:@"timestamp"])
    {
        timeStamp = currentValue;
        return;
    }
    if ([elementName isEqual: @"lat"])
    {
        hailLat = currentValue;
        return;
    }
    if ([elementName isEqual:@"lng"])
    {
        hailLng = currentValue;
        return;
    }
    if ([elementName isEqual:@"address"])
    {
        address = currentValue;
        return;
    }
    if ([elementName isEqual:@"serviceType"])
    {
        serviceType = currentValue;
        return;
    }
    if ([elementName isEqual: @"hail"])
    {
        Hail *newHail = [[Hail alloc]init];
        newHail.hailID = hailID;
        newHail.hailLat = hailLat;
        newHail.hailLng = hailLng;
        newHail.address = address;
        newHail.timeStamp = timeStamp;
        newHail.serviceType = serviceType;
        [hails addObject:newHail];
        NSLog(@"%u", [hails count]);
        return;
    }

} 
```

`hails`在头文件中声明，它只是`NSMutableArray`一个容量为10000项的。该`Hail`对象是一个单独的类。总是返回 0 ，`NSLog`即使我知道 XML 代码本身是有效的，并且`hail`对象存在。

关于为什么`hails`数组总是为零的任何想法？

编辑：对不起，我忘了提到`hails`数组是在`-(void)viewDidLoad`方法中初始化的：

```
hails = [[NSMutableArray alloc]initWithCapacity:10000]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:13:55.310

你的冰雹总是零，因为你从来没有分配+初始化它。你甚至没有在你的代码中提到它的初始化

# javascript - 作为引用的实例化对象和属性

> ID：12960916
> 
> 赞同：5
> 
> 时间：2012-10-18T18:05:23.927
> 
> 标签：javascript

就在我以为我已经弄清楚了 JS 时，我被挂断了：

```
function Obj() {
    console.log('x: %s, o.x: %s', this.x++, this.o.x++);
}    
Obj.prototype.x = 1;
Obj.prototype.o = {x: 1}; 
```

预期的：

```
> new Obj
x: 1, o.x: 1
> new Obj
x: 1, o.x: 1
> new Obj
x: 1, o.x: 1 
```

实际的：

```
> new Obj
x: 1, o.x: 1
> new Obj
x: 1, o.x: 2
> new Obj
x: 1, o.x: 3 
```

因此，似乎如果原型属性是引用类型，那么它在所有实例之间共享，但如果它是非引用类型，那么它会为每个实例重新初始化；为了证实这个假设，我测试了其他一些类型，例如`string`（其行为类似于`number`）和`array`（其行为类似于`object`）。

我已经确定，如果我重新初始化 ctor 中的对象属性，我可以避免这个陷阱，如下所示：

```
function Obj() {
    this.o = {x: 1};
} 
```

这看起来真的很不正统（我需要手动重新初始化属性*，但前提是它们是参考对象*）。

任何人都可以阐明发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T18:21:28.077

这样想吧。无论值来自何处，您都将始终修改您正在操作的对象。

当您第一次这样做时：

```
this.x++; 
```

`x`它正在获取from的值，`Obj.prototype.x`因为没有`x`直接在`this`对象上的属性，但是`++`仍在对对象进行*操作*`this`，因此在该对象上设置了值。该值现在直接在实例上以供将来修改。*（`prototype.x`在直接属性为`delete`d 之前，一直被遮蔽。）*

但是，当您这样做时：

```
this.o.x++ 
```

对`this`对象的唯一操作是查找`o`. 由于在 上再次没有`o`属性`this`，您将获得对存储在的对象的引用`Obj.prototype.o`。此时，没有对`this`对象进行实际修改。

返回引用后，然后查找对象的属性`x`，`Obj.prototype.o`并对其进行修改。

所以它实际上是相当一致的。随着`this.o.x++`您对 进行了查找`this`，但没有突变。突变在引用的对象上。但是使用`this.x++`，您正在直接改变对象。

* * *

所以是的，除非您希望在从构造函数创建的所有实例之间共享引用类型，否则您应该将引用类型直接放在实例上，而不是放在`.prototype`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:48:25.247

我认为第一个答案有它的要点，但我从一个稍微不同的角度回答。

理解它的关键是关于分配给对象的对象行为。

如果没有实例属性，则查找回退到原型。总是。

但是，分配每次都会自动创建一个新的实例属性。如果您将按引用原型属性分配给新的实例属性，这并不重要，因为它们都只是指向同一事物的指针。如果您就地变异，也不会创建新的实例属性。

```
function Obj(){
    //this.refArr resolves to what's in the prototype and that's what we change
    this.refArr.push(1);

    //now copy sliceArray and assign a new but identical array
    this.sliceArray = this.sliceArray.slice(0);

    //no length increase would mean a new instance property is created
    //... and then the assigment took place.
    this.sliceArray.push(1);
    console.log( 'ref:'+this.refArr.length +', sliceArray:'+this.sliceArray.length);
}
Obj.prototype.refArr = [];
Obj.prototype.sliceArray = [];
new Obj; new Obj;
//ref:1, sliceArray:1
//ref:2, sliceArray:1 
```

这本质上就是你所做的事情的不同之处。`this.x = this.x + 1`创建一个新属性。由于您分配给一个属性，`this.constructor.prototype.o`因此没有创建新属性。如果您递增然后将 this.o 分配给 this.o 无论如何都没关系，因为原型和新属性版本只会指向同一个对象。

# java - 处理中的计数器数组

> ID：12960924
> 
> 赞同：1
> 
> 时间：2012-10-18T18:05:57.033
> 
> 标签：java, processing

我必须传递两个数组 1) 填充了 0-100 之间的 1000 个整数 2) 包含十个 bin 来对 1000 个数字进行排序。

如何创建计数器以将数字分类到十个箱中，例如 0-9、10-19、20-29、30-39、40-49,50-59 等到 90-99...

是否会使用 if/else 对它们进行排序？如果是这样，我如何将值添加到每个 bin 中？会是这样吗？

这是我到目前为止所拥有的：

```
 //initialize array of 1000 elements
          int[] numbers = new int[1000];
          int i = 0;
          //initialize array of 10 bins
          int[] bins = new int[10];

          void setup() {
              // Populate array with random number
              for (int i = 0; i < numbers.length; i++) {
                 numbers[i] = ceil(random(0,99));
              }

           }

           //function that sorts random numbers into bins
           void counter(int[] numbers, int[] bins) {

           } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T18:31:26.847

如果您想要`numbers`右边的每个数字，`bin`那么我将使用 10 个[ArrayLists](http://processing.org/reference/ArrayList.html)的数组作为`bins`.

```
int[] numbers = new int[1000];
ArrayList[] bins = new ArrayList[10];

void setup() {
    for(int i = 0; i<bins.length; i++) {
        bins[i] = new ArrayList();
    }

    for (int i = 0; i < numbers.length; i++) {
        numbers[i] = floor(random(0,100));
    }
}

void counter(int[] numbers, ArrayList[] bins) {
    for (int i = 0; i < numbers.length; i++) {
        bins[floor(float(numbers[i])/10.0)].add(numbers[i]);
    }
} 
```

然后你会得到一个 bin（例如，第一个 bin 由值为 0-9 的数字组成）：

```
int sizeBin = bins[0].size();
for(int i=0; i<sizeBin; i++) {
    println(bins[0].get(i));
} 
```

如果你想要一个 bin 中的数字计数，你可以得到它（再次以 bin 0-9 为例）

```
bins[0].size(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T18:14:47.063

a 能想到的最简单的方法是使用 for 循环循环遍历 numbers[]，然后使用一系列 if 语句来评估数字是否为 <= 9 、 <= 19 等

```
 void counter(int[] numbers, int[] bins){
    int count = 0;
    int length = numbers.length;
    for(int i = 0; i< length; i++){
       if(numbers[i] <= 9){

          bins[count] = numbers[i];
          count++;
       }
    //and the same for 10-19 etc...
} 
```

像这样的东西？不是很雄辩，但由于数组只有 1000 个元素，它应该足够了

# java - 有没有办法在 IntelliJ IDEA 中编译所有 JSP 文件？

> ID：12960926
> 
> 赞同：14
> 
> 时间：2012-10-18T18:06:08.060
> 
> 标签：java, jsp, intellij-idea

有没有办法启用项目中所有 JSP 文件的编译/验证？我正在做一个大的重构，并想确保我不会破坏任何 JSP 文件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T18:13:01.710

是的，在 IntelliJ IDEA 中是可能的：

![证实](../Images/f92a7bab027e2486c9408cdbf281d237.png)

# css - Twitter Bootstrap LESS css

> ID：12960931
> 
> 赞同：0
> 
> 时间：2012-10-18T18:06:21.960
> 
> 标签：css, twitter-bootstrap, less

我想知道为什么我不能使用 LESS 在 twitter bootstrap 中设置变量。我在 Rails 上使用 ruby​​，它有一个 bootstrap_and_overrides.css.less 文件。它有以下语句

```
 // Your custom LESS stylesheets goes here
    //
    // Since bootstrap was imported above you have access to its mixins which
    // you may use and inherit here
    //
    // If you'd like to override bootstrap's own variables, you can do so here as well
    // See http://twitter.github.com/bootstrap/less.html for their names and    documentation
    //
   // Example:
   // @linkColor: #ff0000; 
```

所以我的理解是我可以在这里设置我的变量。所以我设置

```
 @black: #333; 
```

然后尝试在我的 application.css 调用`@black`文件中使用它，但它不起作用？即不渲染`#333`。

我理解错了吗？我所有的变量和css样式都在引导程序和覆盖文件中吗？

任何建议表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-31T03:27:16.247

如果我理解正确，您正在修改您的`bootstrap_and_overrides.css.less`文件，但正在使用的是`application.css`文件。
如果是这样，当然不反映您所做的更改是很自然的。您必须先将`.less`文件编译为`.css`. 将更改反映到您的`.css`文件中。

尝试一下，通过客户端使用 LESS 并像这样设置您的环境：

例如，在你的`index.html`文件中，把

```
<link rel="stylesheet/less" type="text/css" href="application.less" /> 
```

在文档头中。在它下面添加

```
<script src="less.js" type="text/javascript"></script> 
```

[从这里](https://github.com/less/less.js/blob/master/dist/less-1.4.2.min.js)下载`less.js`文件。并将其放在您的根目录中，或者您当然可以自定义位置并在属性中创建必要的路径。`href`

完成上述操作后，您就可以修改`application.less`文件（而不是 application.css）了。您可以从`application.css`文件中复制现有的自定义样式。

`application.less`是您应该放置变量的地方。

您可以将`bootstrap_and_overrides.css.less`文件重命名为`application.less`并确保它是标题标签中链接到的文件。

有关 LESS CSS 的更多信息，请查看[wiki](https://github.com/less/less.js/wiki)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T23:54:19.510

如果您在客户端使用它，请按照[http://lesscss.org/#usage上的说明确保使用更新的 less。](http://lesscss.org/#usage)

或者

将更新后的 less 编译成 CSS，然后复制更新后的 CSS。这是可以进行编译的工具列表。[http://bootstrap.lesscss.ru/less.html#compiling](http://bootstrap.lesscss.ru/less.html#compiling)

有关如何组织引导修改的建议，请参阅 SO 问题 [Twitter Bootstrap Customization Best Practices](https://stackoverflow.com/questions/10451317/twitter-bootstrap-customization-best-practices)

顺便说一句，我不建议更改`@black`. 改变它会改变很多很多事情，包括一些你可能没想到的事情。

# c# - 我想创建两个日志文件 - 一个带有“DEBUG”另一个仅带有“INFO”日志

> ID：12960932
> 
> 赞同：1
> 
> 时间：2012-10-18T18:06:28.637
> 
> 标签：c#, .net, logging, log4net, log4net-configuration

我在这里有这个 log4net 配置：

```
 <log4net>
    <root>
      <level value="DEBUG" />
      <appender-ref ref="LogFileAppender" />
    </root>
    <appender name="LogFileAppender" type="log4net.Appender.RollingFileAppender">
      <param name="File" value="D:\logfolder\logfile.txt" />
      <param name="AppendToFile" value="true" />
      <rollingStyle value="Size" />
      <maxSizeRollBackups value="10" />
      <maximumFileSize value="20MB" />
      <staticLogFileName value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <param name="ConversionPattern" value="%-5p%d{yyyy-MM-dd hh:mm:ss} – %m%n" />
      </layout>
    </appender>
  </log4net> 
```

这运作良好，但我想创建另一个只有“INFO”输入的日志文件。是否可以登录两个不同的文件，而不更改我的 C# 代码中的任何内容，只需更改配置文件？
或者让问题简单化：我必须在我的配置文件中添加什么？

而且，我还有另一个问题：如果我选择“INFO”而不是“DEBUG”，我会得到 INFO + ERROR 日志。我可以以某种方式更改它，而不是获取错误日志，只是获取信息？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T18:11:32.430

您可以使用指定的过滤器配置第二个附加程序，并将其添加到您的根记录器。

```
<log4net>
    <root>
      <level value="DEBUG" />
      <appender-ref ref="LogFileAppender" />
      <appender-ref ref="AnotherLogFileAppender" />
    </root>
    <appender name="LogFileAppender" 
              type="log4net.Appender.RollingFileAppender">
      ...
    </appender>
    <appender name="AnotherLogFileAppender" 
              type="log4net.Appender.RollingFileAppender">
      <param name="File" value="D:\logfolder\anotherlogfile.txt" />
      <param name="AppendToFile" value="true" />
      <rollingStyle value="Size" />
      <maxSizeRollBackups value="10" />
      <maximumFileSize value="20MB" />
      <staticLogFileName value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <param name="ConversionPattern" 
               value="%-5p%d{yyyy-MM-dd hh:mm:ss} – %m%n" />
      </layout>
      <filter type="log4net.Filter.LevelRangeFilter">
                <param name="LevelMin" value="INFO"/>
                <param name="LevelMax" value="INFO"/>
      </filter>
    </appender>
  </log4net> 
```

还可以考虑使用新风格的 log4net 配置，而不是带有`param`标签的旧风格：

```
<log4net>
    <root>
      <level value="DEBUG" />      
      <appender-ref ref="LogFileAppender" />
      <appender-ref ref="AnotherLogFileAppender" />
    </root>
    <appender name="LogFileAppender"
          type="log4net.Appender.RollingFileAppender">
      <file value="D:\logfolder\logfile.txt"/>
      <appendToFile value="true"/>
      <rollingStyle value="Size"/>
      <maxSizeRollBackups value="10"/>
      <maximumFileSize value="20MB"/>
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%-5p%d{yyyy-MM-dd hh:mm:ss} – %m%n"/>
      </layout>
    </appender>
    <appender name="AnotherLogFileAppender" 
              type="log4net.Appender.RollingFileAppender">
      <file value="D:\logfolder\anotherlogfile.txt"/>
      <appendToFile value="true"/>
      <rollingStyle value="Size"/>
      <maxSizeRollBackups value="10"/>
      <maximumFileSize value="20MB"/>
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%-5p%d{yyyy-MM-dd hh:mm:ss} – %m%n"/>
      </layout>               
      <filter type="log4net.Filter.LevelMatchFilter">
        <levelToMatch value="INFO"/>
      </filter>
    </appender>
  </log4net> 
```

# ruby-on-rails-3 - 使用 Table_Builder 的 Ruby on Rails 日历月度更改不起作用

> ID：12960936
> 
> 赞同：0
> 
> 时间：2012-10-18T18:06:56.657
> 
> 标签：ruby-on-rails-3, web-applications

我正在尝试使用[table_builder](http://railscasts.com/episodes/213-calendars)将日历添加到我的 rails 应用程序。我的实现基于他们的自述文件和强烈推荐的[教程](http://railscasts.com/episodes/213-calendars)。

在初始加载时，日历运行良好。每个作业都显示在正确的日期。但是，当通过单击月份名称周围的“>”或“<”来更改月份时，虽然标题中的月份名称发生了变化，但日历本身并没有改变。这是我认为呈现日历的代码块：

```
 <div id="calendar">  
  <h2 id="month">  
    <%= link_to "<", :month => (@date.beginning_of_month-1).strftime("%Y-%m-01") %>  
    <%= h @date.strftime("%B %Y") %>  
    <%= link_to ">", :month => (@date.end_of_month+1).strftime("%Y-%m-01") %>  
  </h2>   
    <%= calendar_for(@assignments) do |calendar| %>
        <%= calendar.head('Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday') %>
        <% calendar.day(:day_method => :due_date) do |day, assignments| %>
            <%= day.day %>
            <ul>
                <% for assignment in assignments %>
                    <li>
                        <%= assignment.course.name %>: <%= link_to assignment.name, assignment_type_assignment_path(assignment.assignment_type, assignment)%>
                    </li>
                <% end %>
            </ul>
        <% end %>
    <% end %>
</div> 
```

@assignments 返回与给定用户关联的所有分配的完整列表。每个作业都作为属性到期日期，这是我们希望作业出现在日历中的日期。

这是控制器代码：

```
class HomeController < ApplicationController
    def index
        @user = @current_user
        @assignments = @user.assignments
        @date = params[:month] ? Date.parse(params[:month]) : Date.today
    end
end 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:20:45.430

您没有将当前传递`@date`给`calendar_for`助手，因此它只是默认呈现当前（或某个默认）月份。你需要`@date`像这样传入：

```
calendar_for(@assignments, :year => @date.year, :month => @date.month) do |calendar| 
```

# java - Google ProtocolBuffer 反序列化类型

> ID：12960942
> 
> 赞同：3
> 
> 时间：2012-10-18T18:07:10.610
> 
> 标签：java, protocol-buffers

我想知道如何检索从字节加载的 protobuf 的类型。

前任：

```
Worklist work = Worklist.newBuilder().build();
byte[] msg = work.toByteArray(); 
```

基本上我需要找到一种方法来检索 msg 类型并且应该打印 Worklist。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T18:09:27.713

Protobuf 消息本质上不是自我描述的。在解析字节*之前*，您需要知道消息类型。在您的情况下，关于解析字节数组 msg 的代码必须知道这些字节代表一个 Worklist，然后调用 Worklist 类中的解析实现。

但是，如[技术](https://developers.google.com/protocol-buffers/docs/techniques#self-description)中所述，您可以设计将其元数据作为有效负载的一部分提供的类。

[更新]

另一种方法 - 特别是当您使用 protobuf 创建用于发送/接收的消息时，是定义顶级消息类。所有发送/接收的消息都是这种类型。然后对于可能包含在此消息中的各种类型的内容（例如 WorkItem），使用 protobuf 扩展。我认为关于[扩展](https://developers.google.com/protocol-buffers/docs/proto#extensions)的文档比关于自我描述消息的文档要好一些。

双方都需要知道可用的扩展，但是一旦你解析了消息，你就可以动态地查询消息对象来查看哪些扩展（比如 WorkItem）已经被填充了。

# php - 基于父子关系重构数组

> ID：12960943
> 
> 赞同：1
> 
> 时间：2012-10-18T18:07:10.483
> 
> 标签：php, arrays, parent, relationship

我有以下数组结构：

```
Array
(
    [0] => Array
        (
            [id] => 83
            [parent_id] => 0
            [title] => Questionnaire one
        )

    [1] => Array
        (
            [id] => 84
            [parent_id] => 0
            [title] => Questionnaire two
        )

    [2] => Array
        (
            [id] => 85
            [parent_id] => 83
            [title] => Questionnaire three
        )

) 
```

我想重新构造数组，以便子项列在其父项下。例如：

```
Array
(
    [0] => Array
        (
            [id] => 83
            [parent_id] => 0
            [title] => Questionnaire one
        )

    [1] => Array
        (
            [id] => 85
            [parent_id] => 83
            [title] => Questionnaire three
        )

    [2] => Array
        (
            [id] => 84
            [parent_id] => 0
            [title] => Questionnaire two
        )
) 
```

我搜索了以前的问题，但发现它们都没有真正实现上述目标。

有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:32:44.430

你可以试试

```
$array = Array(
        "0" => Array("id" => 83,"parent_id" => 0,"title" => "Questionnaire one"),
        "1" => Array("id" => 84,"parent_id" => 0,"title" => "Questionnaire two"),
        "2" => Array("id" => 85,"parent_id" => 83,"title" => "Questionnaire three"));

$id = array_map(function ($item) {return $item["id"];}, $array);
$parent = array_filter($array, function ($item){return $item['parent_id'] == 0;});
$lists = array();

foreach ($parent as $value)
{
    $lists[] = $value ;
    $children = array_filter($array, function ($item) use($value) {return $item['parent_id'] == $value['id'];});
    foreach($children as $kids)
    {
        $lists[]  = $kids ;
    }
}

echo "<pre>";
print_r($lists); 
```

输出

```
Array
(
    [0] => Array
        (
            [id] => 83
            [parent_id] => 0
            [title] => Questionnaire one
        )

    [1] => Array
        (
            [id] => 85
            [parent_id] => 83
            [title] => Questionnaire three
        )

    [2] => Array
        (
            [id] => 84
            [parent_id] => 0
            [title] => Questionnaire two
        )

) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:16:07.047

您可以使用[uksort()](http://www.php.net/manual/en/function.uksort.php)。这是一个[DEMO](http://codepad.org/v1WBdlAe)。

```
function cmp($a, $b) {
  if ($stock[$a] != $stock[$b]) return $stock[$b] - $stock[$a];
  return strcmp($a, $b);
}

$a = array(5 => 'apple', 1 => 'banana', 6 => 'orange', 2 => 'kiwi');

uksort($a, "cmp");

foreach ($a as $key => $value) {
   echo "$key: $value\n";
} 
```

# service - 使用 Azure 服务总线中继时出现 504 网关超时

> ID：12960948
> 
> 赞同：5
> 
> 时间：2012-10-18T18:07:17.420
> 
> 标签：service, azure, timeout, gateway, bus

我正在使用 Windows Azure 服务总线中继来公开使用 **basicHttpRelayBinding**存在于本地的 WCF 服务。

对于每个请求，Web 服务将使用实体框架从 SQL 数据库中获取一些数据，然后将结果转换为 IEnumerable，最后将响应发送给客户端。

一切正常，我可以从托管在云中的 Web 和工作角色使用此 Web 服务，但每隔一段时间，我在等待服务响应时会收到 504 网关超时错误，通常这只发生在执行时间超过 30 - 40 秒的查询中。

一直在做一些研究，我发现这可能是由于充当网关/代理的服务器与链中上游的某些服务器之间的通信缓慢，但我不确定是否有任何方法可以增加超时值所以我们不会收到 504 错误。

任何帮助将非常感激。

# javascript - Javascript 动作顺序

> ID：12960953
> 
> 赞同：1
> 
> 时间：2012-10-18T18:07:29.807
> 
> 标签：javascript, jquery

说我有：

`<div id="name" class="button"></div>`

在 javacript 文件中，我为类按钮和 id 名称定义了单击操作，例如：

```
$("#name").click(function(event){
  alert("hi");
})

$(".button").click(function(event){
  alert("bye");
}) 
```

当我单击该 div 时，我会在“再见”警报之前收到“嗨”警报，因为“嗨”出现在“再见”上方吗？或者其他什么决定了首先发生什么？如果这两个函数在不同的文件中怎么办？那么首先包含哪个javascript文件（出现在更靠近html文件的顶部）是否重要？我认为 jQuery 与此无关，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T18:11:10.573

你是绝对正确的，它诚实地基于首先绑定的。在您的情况下，`"#name"`首先绑定的是那个，然后是`".button"`，所以这就是为什么它们最终以相同的顺序执行。它不是基于在页面上首先看到的，而是首先绑定的。绑定可能发生在函数中，因此在调用该函数之前不会发生（显然），但该函数可能在其他绑定之前声明 - 没有任何意义，它必须被调用。在不同的文件中也是如此。当文件被解析时，它们被执行。所以我之前所说的也适用于此 - 只要绑定按照解析内容的顺序执行（从 HTML 页面的顶部到底部），它们就会按照该顺序发生。我很确定发生这种情况的原因是因为 jQuery 将这些绑定存储在一个 FIFO 堆栈中——先进先出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:12:11.167

您`'hi'`首先看到警报，因为该事件首先被绑定。

因此，当事件根据它们绑定的顺序触发时..

# css - 有没有办法在 IE8 及以下版本中删除点击链接周围的边框？

> ID：12960954
> 
> 赞同：1
> 
> 时间：2012-10-18T18:07:35.390
> 
> 标签：css, internet-explorer

> **可能重复：**
> [如何在单击时删除“虚线边框”？](https://stackoverflow.com/questions/4374622/how-to-remove-the-dotted-border-on-clicking)

我知道这个问题已被多次问过，但尽管有假设的解决方案，但我仍然看到丑陋的边框，这些边框绕过了我添加到看起来很愚蠢的链接的任何填充。基本上我问的是在旧版本的 IE 中是否有解决方法，特别是 8 及以下版本。

我知道这会导致一些可访问性问题，但不会影响访问我网站的大多数用户。

任何帮助将不胜感激......我会发布我的 CSS，但我的文件在我的家用电脑上，我正在工作，对不起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:18:57.860

使用这个 CSS：

```
a:focus, a:active {
    outline:none;
    ie-dummy:expression(this.hideFocus = true);
    border: 0px none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:11:43.663

这应该回答你的问题：

[http://haslayout.net/css-tuts/Removing-Dotted-Border-on-Clicked-Links](http://haslayout.net/css-tuts/Removing-Dotted-Border-on-Clicked-Links)

# php - PHP/PEAR 邮件不作为文本消息发送

> ID：12960957
> 
> 赞同：1
> 
> 时间：2012-10-18T18:07:40.540
> 
> 标签：php, email, smtp, pear

我正在编写一个脚本，该脚本将通过电子邮件发送文本消息（即###@txt.att.net），而 PHP 的简单 mail() 函数不起作用。我可以通过这种方法很好地发送电子邮件，但是没有发送文本。我做了更多的研究，发现运营商经常在没有发件人的情况下阻止邮件，而使用 PEAR 和 SMTP 是一个更好的解决方案。

但是，以下代码可以发送电子邮件，但仍不能发送 AT&T 短信：

```
<?php
require_once "Mail.php";

$from = "XXX <XXX>";
$to = "XXX <XXX@txt.att.net>";
$subject = "Test email using PHP SMTP\r\n\r\n";
$body = "This is a test email message";

$host = "XXX";
$port = "26";
$username = "XXX";
$password = "XXX";

$headers = array (
'From' => $from,
'To' => $to,
'Subject' => $subject);

$smtp = Mail::factory('smtp',
array (
'host' => $host,
'port' => $port,
'auth' => true,
'username' => $username,
'password' => $password));

$mail = $smtp->send($to, $headers, $body);

if (PEAR::isError($mail)) {
  echo("<p>" . $mail->getMessage() . "</p>");
} else {
  echo("<p>Message successfully sent!</p>");
}

?> 
```

可能是标题格式不正确等问题？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:16:59.277

根据他们的示例，您不需要主题后的新行：

[http://pear.php.net/manual/en/package.mail.mail.send.php](http://pear.php.net/manual/en/package.mail.mail.send.php)

检查 AT&T 的响应，如果他们将您列入黑名单或者您没有有效的 rDNS 或其他原因，他们可能会拒绝它。

他们似乎在查看某些 IP 的 rDNS 记录时遇到了问题。

使用它它会告诉你所有你需要的信息。

[http://wordpress.org/extend/plugins/xmail-the-right-way](http://wordpress.org/extend/plugins/xmail-the-right-way)

在此处发布它的日志。

# javascript - javascript：在闭包范围内调用函数

> ID：12960963
> 
> 赞同：1
> 
> 时间：2012-10-18T18:08:10.903
> 
> 标签：javascript

有什么方法可以覆盖一个闭包，以便它完成原始闭包的部分功能？我知道没有简单的方法，但是有一些技巧吗？我愿意凌乱...

```
<html>
    <head>

        // I DON'T CONTROL THIS CODE!!!
        <script>
        ;(function() {

            function _dothing() {
                alert("_dothing");
            }

            function _doit() {
                _dothing();
                alert("_doit");
            }

            window.K = { doit : _doit };

        })();
        </script>
    </head>
<body>

    // I DO CONTROL THIS CODE
    <script>

        function mydoit() {
            alert("mydoit");
            _dothing();         <-- THIS FAILS, IS THERE ANY WAY TO SUCCEED? :(
        }

        window.K.doit = mydoit;
        window.K.doit();
    </script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:07:42.013

您可以尝试这样的事情（我知道这很讨厌，但是，正如其他人指出的那样，这似乎是唯一的方法）：

```
function mydoit() {
    alert("mydoit");
    _dothing();
}

var f = new Function(document.scripts[0].text.replace(/(}\)\(\);\s*)$/, "window._dothing = _dothing;\n$1"));
f();
window.K.doit = mydoit;
window.K.doit(); 
```

在 Firefox、Chrome 和 IE8 上测试。

注意：这是创建一个新的上下文，它与已经创建的不同。它只是调用 的副本`_dothing`，而不是原件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:14:50.977

我认为您可以使用 jQuery 获取脚本标签的内容，然后您可以使用`eval`查看此[问题](https://stackoverflow.com/questions/8403108/calling-eval-in-particular-context)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T18:18:13.340

当您将代码放入其中时：

```
(function() {

})(); 
```

它被称为自调用函数，并创建一个您无法访问的范围（就像无法在其他任何地方访问函数的范围......仅在其中） - 它在声明后立即运行。您可以调用的事实`window.K.doit`是因为代码**扩展**了**全局** `window`对象。由于您可以访问`window`任何地方，因此可以调用它，但只能使用`window.K.doit`or `K.doit`。这就是 jQuery 插件通常的定义方式——它们扩展全局`jQuery`对象而不直接暴露任何代码。Sooooo 不，除非您执行其他回答者建议的操作，否则您无法访问它 - 但使用时要小心`eval`，从技术上讲，可以插入任何脚本，您可以“假设”它是正确的/受信任的并对其进行评估。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-18T18:22:03.520

您必须从匿名/自执行函数中创建一个全局变量：本教程将向您展示如何： http: [//professionalaspnet.com/archive/2012/07/29/Make-Your-JavaScript-Better-With-Self -执行匿名函数.aspx](http://professionalaspnet.com/archive/2012/07/29/Make-Your-JavaScript-Better-With-Self-Executing-Anonymous-Functions.aspx)

# jquery - JQuery Sortable 奇怪的行为 connectWith div

> ID：12960964
> 
> 赞同：4
> 
> 时间：2012-10-18T18:08:12.120
> 
> 标签：jquery, html, jquery-ui-sortable, behavior, levels

我正在尝试连接多个级别中的多个框，并使用 JQuery Sortable 在级别之间对它们进行排序。问题是当我尝试将项目放入另一个级别时，我当前的解决方案有一个奇怪的行为。

有没有人知道一个好的解决方案来使用户和盒子之间的交互更加用户友好？

这是我的问题的一个示例： [jsfiddle 示例](http://jsfiddle.net/jqBy8/) 请尝试将项目放入黄色框中并对其进行排序。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T23:31:07.630

对于您的问题，我没有实际的答案，但是，对于这种行为，我可能有一个合乎逻辑的理由。由于您想在这种情况下对 1 级和 2 级项目进行排序，所有形状都意味着 1 级，而将东西放入黄色的则是 2 级，当您尝试将框放入黄色框时，两个轴上的限制都太小而无法区分该级别区别。这会导致因为您使用 x 和 y 轴作为参考，所以当您的光标位于外部元素的 x 和 y 轴的中间时，它会混淆。我建议您尝试选择轴：“y”。

# ios - 当用户取消使用 itms-services 协议安装的程序时是否发送通知

> ID：12960965
> 
> 赞同：3
> 
> 时间：2012-10-18T18:08:18.010
> 
> 标签：ios, distribution

我正在研究一种更新企业应用程序 OTA 的方法。当我检测到有新版本可用时，我正在应用程序内的我自己的服务器上打开一个指向我的应用程序副本的 URL。这很好用，除非我想让用户选择不更新应用程序，如果他们不想的话。我想知道的是，如果用户在打开 url 时弹出的对话框中按下取消，是否有任何类型的通知发送到 ios 应用程序。换句话说，我希望只有当用户取消更新请求时应用程序才能继续。

这是我正在执行以更新应用程序的代码。

```
NSURL *url = [NSURL URLWithString:@"itms-services://?action=download-manifest&url=http://www.mywebsite.com/myapp.plist"];
if (![[UIApplication sharedApplication] openURL:url]) {
    NSLog(@"%@%@",@"Failed to open url:",[url description]);
} 
```

我无法在苹果开发者文档中找到任何关于 itms 协议的信息。我能够通过呈现自定义 UIAlertView 来达到我想要的效果，询问用户他们是否想在打开 url 之前更新，但这有一个不幸的副作用，即如果他们想更新，提示用户两次，但仍然没有t 真正处理他们在第一次提示后取消更新的情况。

任何有关此事的帮助将不胜感激。

# android - 我的布局可以提高效率吗？

> ID：12960967
> 
> 赞同：0
> 
> 时间：2012-10-18T18:08:31.993
> 
> 标签：android, performance, android-layout

我有一个如下所示的布局。它被代码膨胀并添加到Horizo​​ntalScrollView，有时数百次，并导致内存问题。

我想知道是否可以采取任何措施来提高效率？最初我使用 LinearLayouts，用 RelativeLayout 代替它对滚动产生了巨大的影响。现在我想知道它是否可以进一步改进？

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="156dp"
    android:layout_height="254dp"
    android:paddingLeft="7dip"
    android:paddingRight="7dip">

    <FrameLayout android:id="@+id/button_frame"
    android:layout_width="156dp"
    android:layout_height="218dp">

    <ImageView android:id="@+id/button_bg"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/image_bg"
        />

        <ImageView android:id="@+id/button_image"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="bottom|right"
        />

        <TextView android:id="@+id/button_select"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginLeft="2dip"
        android:layout_marginRight="2dip"
        android:background="@drawable/btn_selector_bg_selected"
        />

        <TextView android:id="@+id/button_selected"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:layout_marginLeft="2dip"
        android:layout_marginRight="2dip"
        android:background="@drawable/title_bg_selected"/>

    </FrameLayout>

    <TextView
    android:id="@+id/button_title"
    android:layout_width="156dp"
    android:layout_height="36dp"
    android:textColor="#ffffff"
    android:singleLine="true"
    android:textSize="13sp"
    android:textStyle="bold"
    android:gravity="center_vertical|left"
    android:ellipsize="end"
    android:paddingLeft="30dip"
    android:paddingRight="5dip"
    android:layout_below="@id/button_frame"
    android:background="@drawable/title_bg"/>

</RelativeLayout> 
```

ImageView button_image 是使用 AQuery 图像缓存填充的，所以我不确定是否可以做更多的事情来改进图像的处理方式。但非常感谢任何有关改进的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:14:30.787

如果您可以使用 ListView 而不是 Horizo​​ntalScrollView，则可以创建一个使用 viewHolder 模式的数组适配器，该模式本质上允许您重用列表视图中每个项目的视图。看看这个了解更多细节：[http ://www.jmanzano.es/blog/?p=166](http://www.jmanzano.es/blog/?p=166)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:17:57.040

一般来说，在 Android 中优化布局的一个好方法是尽量减少容器之间的嵌套数量。嵌套布局容器越深，框架必须做的工作就越多，以测量、布局和处理视图层次结构的事件。

但我认为你可能问错了问题。

和不适用于您将它们用于的用途`HorizontalScrollView`。`VerticalScollView`它们旨在保持大部分静态布局，并在必要时允许它滚动，具体取决于它恰好运行的屏幕大小。

您想要一个用户可以滚动的大部分相同视图的重复列表。要使用的正确 Android 视图容器是`ListView`，或`AdapterView`.

ListView 只注意创建/膨胀必要的子视图以填充屏幕上的空间，并在用户滚动时重用它们。这解决了您遇到的内存问题。它通过要求您将它与`Adapter`一个对象配对来实现这一点，该对象包装正在显示的实际数据，并按需为给定数据项创建正确的视图。

由于您正在尝试进行水平滚动，因此您可能还会查看`Gallery`（现在在 Android 中已弃用）或更新的`ViewPager`类，它们都支持通过大量数据进行水平移动。

# java - 如何反转 TreeSet 实例中数据的顺序？

> ID：12960970
> 
> 赞同：1
> 
> 时间：2012-10-18T18:08:37.703
> 
> 标签：java, treeset

我有一个名为 Dictionary 的类，它是排序字符串的集合。该类是 TreeSet 类的扩展，这意味着它使用 Comparator 进行排序。我想有一个反向方法来反转数据集的顺序，但不幸的是这是不可能的，因为 TreeSet 在初始化后无法更改它的 Comparator 。作为一种解决方法，我尝试使用原始 Comparator 的反转版本创建一个新的 Dictionary 实例，但我想不出任何方法来指向`this`新对象。

这可能吗？也许是一个完全不同的解决方案？

```
public void reverse() {
    Dictionary reversed = new Dictionary(this, Collections.reverseOrder());
    this = reversed; // Obviously not working, but is pretty much what I want to do.
    reversed.storeOnFile("descending.txt");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T18:13:29.713

考虑`Dictionary`从您的反向方法返回新的。

```
public Dictionary reverse(){
    return new Dictionary(this, Collections.reverseOder());
} 
```

或者从方法中返回一个`List`或`Set`视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:13:50.047

将您的类从可变的转换为不可变的。这就是你现在正在做的事情：

```
Dictionary dic = new Dictionary();
dic.reverse(); 
```

这是你应该做的：

```
Dictionary forward = new Dictionary();
Dictionary reverse = forward.reverse(); 
```

一般来说，[不可变对象](http://en.wikipedia.org/wiki/Immutable_object)是首选。

# .htaccess - htaccess - 重定向查询字符串并将其从 URL 中删除

> ID：12960973
> 
> 赞同：3
> 
> 时间：2012-10-18T18:08:45.367
> 
> 标签：.htaccess, redirect

我搜索了很多关于 htaccess 的主题，但仍然没有成功。

当人们输入地址时，我想要：

```
http://domain.com/?q=filename1
http://domain.com/?q=filename2
... 
```

它将自动重定向到：

```
http://domain.com/download/filename1.html
http://domain.com/download/filename2.html
... 
```

我尝试：

```
RewriteEngine On
RewriteRule ^/?q=(.*)$ /download/$1.html [L,R=301] 
```

但它不起作用。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T18:17:16.197

使用它可能会有所帮助：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} q=(.*)
RewriteRule ^q(.*) /download/%1.html [L,R=301] 
```

**编辑：**

试试这个 ：）

```
RewriteEngine On
RewriteCond %{QUERY_STRING} q=(.*)
RewriteRule ^(.*) /download/%1.html? [L,R=301] 
```

通过使用`?`查询字符串将被删除；）

# matlab - 为什么 Matlab 可以将空矩阵与单例矩阵进行比较？

> ID：12960981
> 
> 赞同：9
> 
> 时间：2012-10-18T18:09:25.043
> 
> 标签：matlab, matrix, comparison

我只是好奇为什么 Matlab 可以将空矩阵与单例矩阵进行比较。尤其

`>> [] == [1]`

`ans =`

`[]`

它会这样做似乎很奇怪，我只是想知道它为什么会这样做。这也适用于其他比较操作（<=、<、>=、>、!=）。如果行或列的大小大于 1，则会出错。

谢谢！

编辑：我也相信他们为其他运算符执行此操作，例如加法、减法等。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T18:30:36.203

`[]``0x0`（空矩阵）被MATLAB视为大小的有效矩阵表示。从函数的文档中[`eq`](http://www.mathworks.com/help/matlab/ref/eq.html)，当您使用运算符`==`比较矩阵时会调用该函数，其行为如下：

> `A == B`比较 array 的每个元素与 array`A`的相应元素是否相等`B`，并返回一个数组，其中元素设置为逻辑`1`( `true`)，其中`A`和`B`相等，或逻辑`0`( `false`)，其中它们不相等。表达式的每个输入都可以是数组或标量值。
> 
> ...
> 
> 如果一个输入是标量而另一个是非标量数组，则标量输入被视为与非标量输入数组具有相同维度的数组。

在比较`[] == [1]`中，左操作数是非标量（`isscalar([])`返回`0`），而右操作数是标量。所以标量扩展规则适用，标量操作数被扩展为非标量操作数的维度（在这种情况下`0x0`），结果是一个空矩阵。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T18:28:00.980

来自[文档](http://www.mathworks.com/help/matlab/ref/relationaloperators.html)：如果一个操作数是标量而另一个是矩阵，则标量扩展为矩阵的大小。

这是标量“扩展”以匹配与之比较的矩阵的大小的（有点奇怪）一般情况。使用标量，另一个数组的大小可以是任何值。对于非标量数组比较，情况并非如此。

# dojo - dijit.Calendar 多月日历

> ID：12960983
> 
> 赞同：0
> 
> 时间：2012-10-18T18:09:33.473
> 
> 标签：dojo

有人有使用 dijit.Calendar 创建多月视图的示例吗？

类似于 YUI 的那个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:38:53.747

我最终使用了 jquery jcal 插件。

# php - 具有多个 INNER JOIN 的 MySQL ORDER BY

> ID：12960986
> 
> 赞同：3
> 
> 时间：2012-10-18T18:10:02.197
> 
> 标签：php, mysql

我似乎无法弄清楚如何在这个 MySQL 选择中排序。我希望你能帮助我。

**表格：**

类别

```
catId, catParentId, catDisplay
1      0            1
2      0            1
3      0            1
4      1            1
5      1            1 
```

类别翻译

```
transId, catId, catName, catDesc, langId
1        1      Title1   Desc1    1
2        2      Title2   Desc2    1
3        3      Title3   Desc3    1
4        4      Title4   Desc4    1
5        5      Title5   Desc5    1 
```

语

```
langId, langName, langCode
1       Danish    da
2       English   en 
```

**我的查询：**

```
SELECT `categories`.`catId`,
       `categories`.`catParentId`,
       `categories`.`catDisplay`,
       `categories_translation`.`catName`,
       `categories_translation`.`catDesc`,
       `language`.`langCode`
FROM   `categories`
INNER JOIN `categories_translation` ON `categories_translation`.`catId` = `categories`.`catId`
INNER JOIN `language` ON `language`.`langId` = `categories_translation`.`langId`
WHERE `language`.`langCode` = 'da' 
```

现在，我得到了我想要的东西，但是有没有办法将子类别排序给他们的父母，所以结果如下所示：

**期望的结果：**

```
catId | catParentId | catDisplay | catName | catDesc | langCode
1       0             1            Title1    Desc1     da
4       1             1            Title4    Desc4     da
5       1             1            Title5    Desc5     da
2       0             1            Title2    Desc2     da
3       0             1            Title3    Desc3     da 
```

我试过order by，但似乎可以得到我想要的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:27:18.930

Try the following:

```
ORDER BY
    CASE WHEN categories.catParentId = 0 THEN
        categories.catId
    ELSE 
        categories.catParentId
    END,
    CASE WHEN categories.catParentId = 0 THEN
        0
    ELSE
        categories.catId
    END 
```

For those that don't get the ordering it would be easier to think of the desired result as:

```
catId | catParentId | orderingCategory
1       0             1.0
4       1             1.4
5       1             1.5
2       0             2.0
3       0             3.0 
```

So it's a hierarchy of categories, OP wants to order the result so that each parent categories are followed by their child categories.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T18:18:41.743

你不能得到你喜欢的结果，因为它不可能。我看不到允许按您想要的方式订购的模式或 ID。

为什么标题 4、标题 5 先上？

我看不到逻辑。也许示例不完整，也许 CatName 和 CatDesc 的顺序是您需要的关键。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-18T18:14:13.020

```
ORDER BY catParentID, catID, ... 
```

# java - 在 Java 和 javascript 中保留高端 ASCII

> ID：12960987
> 
> 赞同：0
> 
> 时间：2012-10-18T18:10:15.470
> 
> 标签：java, javascript, ascii, urlencode, urldecode

我有一个应用程序，它接收来自 javascript/jsp 表单的用户输入并将其存储到 Oracle 数据库中。用户输入后即可检索信息。我总是看到，高位 ASCII 字符总是显示为垃圾。? 等等。我该如何解决？

我是否在 HTML、JAvascript 或后端处理它？