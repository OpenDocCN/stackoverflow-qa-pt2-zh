# StackOverflow 问答 12787000-12787999

# objective-c - 使用 Keycode 将字符串转换为数组

> ID：12787001
> 
> 赞同：0
> 
> 时间：2012-10-08T17:57:24.987
> 
> 标签：objective-c, keycode

今天我从一个简单的项目开始，它应该将字符串转换为带有键码的数组以模拟击键。我的问题是我不能使用 char 作为字典的 id 来将该 char 转换为键码。

```
//Declare a Dictionary
NSMutableDictionary *dictionary = [[NSMutableDictionary alloc] init];

//Add the Basic data for keycodes (i know that there are some missing)
[dictionary setObject:@"0x00" forKey:@"a"]; //a
[dictionary setObject:@"0x0B" forKey:@"b"]; // b
[dictionary setObject:@"0x08" forKey:@"c"]; //c
[dictionary setObject:@"0x02" forKey:@"d"]; // d
[dictionary setObject:@"0x0E" forKey:@"e"]; //e
[dictionary setObject:@"0x03" forKey:@"f"]; //f
[dictionary setObject:@"0x05" forKey:@"g"]; //g
[dictionary setObject:@"0x04" forKey:@"h"]; //h
[dictionary setObject:@"0x22" forKey:@"i"]; //i
[dictionary setObject:@"0x26" forKey:@"j"]; //j
[dictionary setObject:@"0x28" forKey:@"k"]; //k
[dictionary setObject:@"0x25" forKey:@"l"];//l
[dictionary setObject:@"0x2D" forKey:@"m"];//m
[dictionary setObject:@"0x2E" forKey:@"n"];//n
[dictionary setObject:@"0x1F" forKey:@"o"];//o
[dictionary setObject:@"0x23" forKey:@"p"];//p
[dictionary setObject:@"0x0C" forKey:@"q"];//q
[dictionary setObject:@"0x0F" forKey:@"r"];//r
[dictionary setObject:@"0x01" forKey:@"s"];//s
[dictionary setObject:@"0x11" forKey:@"t"];//t
[dictionary setObject:@"0x20" forKey:@"u"];//u
[dictionary setObject:@"0x09" forKey:@"v"];//v
[dictionary setObject:@"0x0D" forKey:@"w"];//w
[dictionary setObject:@"0x07" forKey:@"x"];//x
[dictionary setObject:@"0x10" forKey:@"y"];//y
[dictionary setObject:@"0x06" forKey:@"z"];//z

NSString *workwith = [_mess stringValue]; //Get String from Interface
long stringl = [workwith length]; //Get lenght of the String
int a = 0;
char text[stringl-1]; //make a array with the lenght of the string
while (a < stringl) { //fill this array with chars from the string
    text[a] = [workwith characterAtIndex:a];
    NSLog(@"%c",text[a]);
    a++;

}
char fmat[stringl-1]; //make a second char to fill it with keycodes
int dnehmen = 0;
while (dnehmen <= stringl-1) {
    fmat[dnehmen] = [dictionary objectForKey:@"%c",text[dnehmen]]; //stuck at this point 
```

}

在最后一行，我尝试使用第一个数组中的 char 作为字典的 id 来获取第二个数组的键码。我收到一个错误，我不能使用 char 作为 id，所以我需要一个是从 char 获取键码。（我在这个网站上阅读了一些帖子，但我并没有真正理解他们做了什么）谢谢你的回答蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:53:08.210

您报告的错误归结为：

```
fmat[dnehmen] = [dictionary objectForKey:@"%c",text[dnehmen]]; 
```

由于使用了相当晦涩的 C 逗号运算符， as`@"%c",text[dnehmen]`不返回对象而是返回`char`值 - 逗号通常是分隔符，但也是`+`仅返回其第二个参数的运算符（如等）。所以你得到一个关于字符的错误......

鉴于您已将`NSString`值用作键，您需要一个包含您的字符的字符串，并且您可能打算输入：

```
fmat[dnehmen] = [dictionary objectForKey:[NSString stringWithFormat:@"%c",text[dnehmen]]]; 
```

虽然这将解决您的第一个问题，但您现在有另一个问题，您的字典返回一个`NSString`包含四个字符的值，并且您的代码建议您在`char`编译器将其解释为十六进制文字时，希望使用这四个字符表示的字节 ( ) ...

此时，您可能会尝试通过将字符串解析为十六进制数来将其转换为字节值，但您不应该这样做。相反，首先要考虑将您需要的价值放入其中`NSDictionary`。在 an 中使用的任何键的对象都`NSDictionary`可以是*任何*[1] 类型的对象。您可能要考虑`NSNumber`对两者都使用对象。

希望这将使您在修复您的设计时走上正确的轨道。

[1]准确地说，*几乎*所有的，任何具有相等和散列方法的——在实践中，这就是一切的起源，`NSObject`所以现在不要担心这个迂腐的细节！

# javascript - js：正则表达式中的特殊字符

> ID：12787002
> 
> 赞同：2
> 
> 时间：2012-10-08T17:57:40.310
> 
> 标签：javascript, regex

在我的正则表达式中，我试图从字符串中删除所有“{”和“}”。使用打包器/最小化器脚本推送脚本会破坏它们。这就是为什么我想知道一种更好、更兼容的写作方式： `mystring.replace(/\{/g,"");`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:59:26.423

您可以只使用字符串而不是正则表达式。我不确定这是否“更好”，但它在缩小时不应该中断。如果您提供缩小的示例，我们可能会提供帮助。

```
mystring.replace("}", "").replace("{", ""); 
```

**编辑：**

如果大括号导致问题，也许这会起作用......

```
var reg = new RegExp("\\{|\\}", "g");
mystring.replace(reg, ""); 
```

控制台中的示例...

```
> var mystring = "test{foo}bar{baz}";
> var reg = new RegExp("\\{|\\}", "g");
> mystring.replace(reg, "");
 "testfoobarbaz" 
```

最后，您可以这样做：

如果一个正则表达式真的不适合你，这将取代所有`{`的 's 和`}`'s 考虑到性能，这可能是一个可怕的解决方案，但是......

```
mystring.split("}").join("").split("{").join(""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T18:03:42.063

你可以试试

```
mystring.replace(/\u007B/g,""); 
```

这使用 unicode 而不是实际符号，因此您的打包程序不会感到困惑。如果要在单个语句中替换多个字符，可以使用“或”管道：

```
mystring.replace(/\u007B|\u007D/g,""); 
```

`{`= `\u007B`
`}`=`\u007D`

有关更多 unicode 代码，请参阅：
[http ://www.unicode.org/charts/PDF/U0000.pdf](http://www.unicode.org/charts/PDF/U0000.pdf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T18:04:28.240

重新阅读问题后，听起来您发现了 minifier/packer 的错误。我的第一个建议是使用没有这些问题的更好的最小化器，但如果你坚持使用你正在使用的东西，你可以尝试在正则表达式中使用[unicode 转义序列：](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions#special-unicode-escape)

```
mystring.replace(/\u007b/g, ''); 
```

[`String.prototype.split`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)或者，您可以尝试[`Array.prototype.join`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)：

```
mystring.split('{').join(''); 
```

# php - PHP 包含和重定向

> ID：12787014
> 
> 赞同：0
> 
> 时间：2012-10-08T17:58:25.840
> 
> 标签：php, redirect, include

我一直在徘徊一段时间试图摆脱这个问题。

我有一个 php 软件，我想知道脚本在哪里执行。

例如

我有 /foo/bar/home.php 。在这种情况下，我想知道 /foo/bar 是我的根。但是，如果我有一个示例管理页面 /foo/bar/admin/index.php 在这种情况下我也希望有 /foo/bar 。或者

/foo/bar/foo/index.php -> /foo/bar/foo /foo/bar/foo/randomname/home.php -> /foo/bar/foo

我怎样才能做到这一点？

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:11:49.517

您可以访问`$_SERVER`超全局变量的属性。

```
echo $_SERVER['DOCUMENT_ROOT']; 
```

以下，如果位于“/foo/bar/foo/index.php”，将回显`/foo/bar/foo/`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:16:17.240

因为`/foo/bar`对我来说听起来不像是文件系统路径，所以我假设这是 URL 路径的第一部分。

应用程序如何知道此前缀应用于所有内容？它必须安装在某个地方，如果没有应用重写，文件系统路径布局和 url 路径布局在某种程度上匹配。这可能用于通过减去一些字符串来实际生成路径信息，但我怀疑它的用处。

我会选择在一个包含在任何地方的文件中定义一个常量“INSTALL_PATH”和/或“INSTALL_URL”，它知道它与基本 url 或文件路径的相对位置，并执行一个简单的字符串操作：

`define('INSTALL_PATH', basename(__DIR__); // go one level up`

# php - Adding new indexes to an array inside foreach

> ID：12787017
> 
> 赞同：1
> 
> 时间：2012-10-08T17:58:28.540
> 
> 标签：php, arrays, foreach

So, I have this:

```
$abc = array('a','b','c');
foreach ($abc as $k => &$a) {
    echo $a;
    if ($k == 1)
        $abc[] = 'd';
} 
```

Work's as expected, iterating through the foreach 4 times and giving me:

```
abcd 
```

But now, when I have this:

```
$myvar = $this->someModel->return_an_array_as_result(); // returns array([0] => array('a' => 'b'))

foreach ($myvar as $myvar_key => &$mv){
    $myvar[] = array('e' => 'f');
    var_dump($myvar);
    if ($myvar_key == 5) die;
} 
```

The foreach only runs once.

Any thoughts on how foreach works when resetting the internal pointer?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:13:25.413

我明白你的意思，你可以使用`ArrayObject`which 将允许追加到数组，而你仍然循环遍历数组

```
$myvar = new ArrayObject(array('a' => 'b'));
$x = 0;
foreach ( $myvar as $myvar_key => $mv ) {
    $myvar->append(array('e' => 'f'));
    if (($x >= 4))
        break;
    $x ++;
}
var_dump($myvar); 
```

输出

```
object(ArrayObject)[1]
  public 'a' => string 'b' (length=1)
    array
      'e' => string 'f' (length=1)
    array
      'e' => string 'f' (length=1)
    array
      'e' => string 'f' (length=1)
    array
      'e' => string 'f' (length=1)
    array
      'e' => string 'f' (length=1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:01:27.387

That's because `foreach` is actually working on a *copy* of the array. If you're planning on modifying the array while you're iterating over it, use a traditional `for` loop.

For more information, see the PHP docs on [`foreach`](http://fr2.php.net/manual/en/control-structures.foreach.php). Also, if you're looking to modify elements while iterating, you can [`&$reference`](http://fr2.php.net/manual/en/language.references.php) them (more information about this also found in the `foreach` docs).

# ruby - Is there any ruby library for usb hid interfaces?

> ID：12787020
> 
> 赞同：1
> 
> 时间：2012-10-08T17:58:50.993
> 
> 标签：ruby, rubygems, jruby, hid

I fear that there is no usb hid library, yet. Do anyone know good alternatives, which can be used together with ruby (e.g. jruby)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:18:51.593

[libusb 库](https://www.ruby-toolbox.com/search?q=libusb)的 ruby​​ 包装器不符合要求吗？

此外，这篇博文：[Working ruby​​ HID listener example](http://hewner.com/2006/10/04/working-ruby-hid-listener-example/)有一些与 USB 接口的代码示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:02:40.587

如果您准备坚持使用 JRuby，您可以尝试包装[javahidapi](http://code.google.com/p/javahidapi/source/browse/src/com/codeminders/hidapplet/HidApplet.java)。它使用 JNI 执行对[HIDAPI](http://www.signal11.us/oss/hidapi/)库的调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-24T18:27:41.683

我知道这是一个老问题，但我写了一个 gem 用于在 Linux 上读取 Ruby 中的 HID 控制器（它直接与 Linux 内核驱动程序一起工作）。

[https://rubygems.org/gems/ruby_hid](https://rubygems.org/gems/ruby_hid)

它现在也是相当实验性的，但它确实有效。

使用它，您可以在按钮或控制轴上设置观察者，它们在单独的线程上运行，由`start_listening`. 这可以在共享对象中设置一个值，您可以在代码中使用该值。

这是示例之一，它仅报告按钮按下：

```
require 'rubygems'
require 'ruby_hid'

device = RubyHid::Device.new(
  RubyHid::Device.list[0]
)

buttons = RubyHid::Button::EVENTS

buttons.each do |code, name|
  button = RubyHid::Button.find_by_name(name)
  button.add_event(
    eval "lambda { |val| puts \"#{name} pushed: \#{val}\" }"
  )
end

device.start_watching

loop do
  sleep 1
end 
```

# node.js - HTML5 video recording

> ID：12787023
> 
> 赞同：2
> 
> 时间：2012-10-08T17:59:20.817
> 
> 标签：node.js, html5-video, html5-canvas

I would like to create a simple video streaming app by using HTML5 features + Node.js on the server side (actually I am not sure this is possible...). Now I have some important questions:

*   Is it possible to record the local stream created by the navigator.getUserMedia() API? I read lots of articles but everywhere it is just used to define the source of a HTML5 video element.
*   Is it possible to send this stream through websockets? (socket.io, binaryjs,... ?). Otherwise I can only imagine sending frames to a canvas element, and I am not sure that is a good solution.
*   Is there any Node.js module that supports load balancing? It would be interesting to work with different node servers.

Thank you all in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T05:36:28.517

MediaStreamRecorder 是一个用于记录 getUserMedia() 流的 WebRTC API。它允许 Web 应用程序从实时音频/视频会话创建文件。

```
 <video autoplay></video>

    <script language="javascript" type="text/javascript">
    function onVideoFail(e) {
        console.log('webcam fail!', e);
      };

    function hasGetUserMedia() {
      // Note: Opera is unprefixed.
      return !!(navigator.getUserMedia || navigator.webkitGetUserMedia ||
                navigator.mozGetUserMedia || navigator.msGetUserMedia);
    }

    if (hasGetUserMedia()) {
      // Good to go!
    } else {
      alert('getUserMedia() is not supported in your browser');
    }

    window.URL = window.URL || window.webkitURL;
    navigator.getUserMedia  = navigator.getUserMedia || 
                             navigator.webkitGetUserMedia ||
                              navigator.mozGetUserMedia || 
                               navigator.msGetUserMedia;

    var video = document.querySelector('video');
    var streamRecorder;
    var webcamstream;

    if (navigator.getUserMedia) {
      navigator.getUserMedia({audio: true, video: true}, function(stream) {
        video.src = window.URL.createObjectURL(stream);
        webcamstream = stream;
    //  streamrecorder = webcamstream.record();
      }, onVideoFail);
    } else {
        alert ('failed');
    }

    function startRecording() {
        streamRecorder = webcamstream.record();
        setTimeout(stopRecording, 10000);
    }
    function stopRecording() {
        streamRecorder.getRecordedData(postVideoToServer);
    }
    function postVideoToServer(videoblob) {

        var data = {};
        data.video = videoblob;
        data.metadata = 'test metadata';
        data.action = "upload_video";
        jQuery.post("http://www.foundthru.co.uk/uploadvideo.php", data, onUploadSuccess);
    }
    function onUploadSuccess() {
        alert ('video uploaded');
    }

    </script>

    <div id="webcamcontrols">
        <button class="recordbutton" onclick="startRecording();">RECORD</button>
    </div> 
```

[http://www.w3.org/TR/mediastream-recording/](http://www.w3.org/TR/mediastream-recording/)

**更新：**

MediaElements 必须有新的方法来捕获流，看看下面的文章

[https://developers.google.com/web/updates/2016/10/capture-stream](https://developers.google.com/web/updates/2016/10/capture-stream)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T13:15:00.517

您可以使用[RecordRTC](https://github.com/muaz-khan/RecordRTC)录制视频。这里有一个[演示](https://www.webrtc-experiment.com/RecordRTC/)。

您可以使用“MediaSource”API 从视频元素中捕获预先录制的媒体；获取数组缓冲区 / blob / unit8Array 并使用 XMLHttpRequest 或其他方法上传该数组（块）。

您可以通过 WebSocket/Socet.io/Firebase/etc 发送这些“笨蛋”。无需使用 RTCWeb API 即可进行实时流式传输！！！！但是，有很多陷阱：一个巨大的类型数组。要传输的大数据。此外，这些 API 仅适用于 HTML5 视频元素。对 Chrome Canary 和 Firefox 的有限支持。

好消息是，MediaSource API 会在获得第一个块后立即播放视频。在播放视频之前，它不会等待整个视频/数据被下载。

# list - lisp 编程中的变量

> ID：12787027
> 
> 赞同：4
> 
> 时间：2012-10-08T17:59:48.647
> 
> 标签：list, functional-programming, lisp, common-lisp

我正在尝试编写一个函数让我们说 `A(n)`

应该有一个列表

`(the answer is n)`

n 是我键入时想要的列表中的任何整数 `(A 4)`

它应该显示 `(the answer is 4)`

我不确定如何考虑使用`setq and the list function`

但是如何构建它让我感到困惑我只是一个试图学习 lisp 的新手，任何我能阅读的想法或书籍我都会非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T18:06:17.893

```
(defun A (n) 
  (list 'the 'answer 'is n))
(A 4)
=> (the answer is 4) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T10:55:15.673

你问题的另一部分是读什么书。通常人们推荐阅读《[实用Common Lisp](http://www.gigamonkeys.com/book/)》，这是一本对Common Lisp进行友好且易于阅读的介绍的书。然后是 Cliki.net 上的“[入门](http://cliki.net/Getting%20Started)”文章。这应该足以开始使用该语言。

# android - Can't draw in Clock Callback in Kivy

> ID：12787029
> 
> 赞同：1
> 
> 时间：2012-10-08T17:59:55.233
> 
> 标签：android, python, kivy

I'm using the nifty Kivy framework to program a game for Android. I'm trying to create a clock callback to run a specified piece of code (used to draw) 60 times a second.

For some reason, anything I draw inside of a Kivy clock event doesn't get drawn to the screen. To eliminate all variables I could, I took this sample code:

```
import kivy
kivy.require('1.0.6')

from kivy.app import App
from kivy.uix.widget import Widget
from kivy.graphics import Color, Ellipse

class MyPaintWidget(Widget):
    def on_touch_down(self, touch):
        with self.canvas:
            Color(1, 1, 0)
            d = 30.
            Ellipse(pos=(touch.x - d/2, touch.y - d/2), size=(d, d))

class MyPaintApp(App):
    def build(self):
        return MyPaintWidget()

if __name__ == '__main__':
    MyPaintApp().run() 
```

This works fine - when I click on the screen it puts a yellow circle there. However, when I modify it like this:

```
import kivy
kivy.require('1.0.6')

from kivy.app import App
from kivy.uix.widget import Widget
from kivy.graphics import Color, Ellipse
from kivy.clock import Clock

class MyPaintWidget(Widget):
    def update(self, t):
        with self.canvas:
            Color(1, 1, 0)
            d = 30.
            Ellipse(pos=(200 - d/2, 200 - d/2), size=(d, d))

class MyPaintApp(App):
    def build(self):
        m = MyPaintWidget()
        Clock.schedule_interval(m.update, 1.)
        return m

if __name__ == '__main__':
    MyPaintApp().run() 
```

Nothing is ever drawn to the screen. Why? EDIT: I found out it only draws to the screen when I click it. Still not useful - I need to use this for a game's event loop! I am using Kivy 1.4.0 (the second most recent) and Ubuntu. This also doesn't work as intended on Android, either.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:40:20.687

我可以运行您的代码 - 我做了一些更改，因此您可以看到它确实每秒都被调用。它现在打印出 D 的值，该值每秒都在变化，黄色的大圆圈每秒都在增长。我希望这可以帮助你。

```
import kivy
kivy.require('1.0.6')

from kivy.app import App
from kivy.uix.widget import Widget
from kivy.graphics import Color, Ellipse
from kivy.clock import Clock

class MyPaintWidget(Widget):
    d = 10
    def update(self, t):
        print("D is", self.d)
        with self.canvas:
            Color(1, 1, 0)
            self.d = self.d + 1
            Ellipse(pos=(200 - self.d/2, 200 - self.d/2), size=(self.d, self.d))

class MyPaintApp(App):
    def build(self):
        m = MyPaintWidget()
        Clock.schedule_interval(m.update, 1.)
        return m

if __name__ == '__main__':
    MyPaintApp().run() 
```

# jquery - jQuery hover gets confused

> ID：12787031
> 
> 赞同：1
> 
> 时间：2012-10-08T17:59:59.073
> 
> 标签：jquery, hover, jquery-hover

Hoping someone might help me figure out the weird issue I'm having with jQuery. I have a fancy hover going on for the footer nav and it blinks whenever I hover off and then back on the subnav that hasn't finished it's transition. So here's what I got code-wise.

jQuery:

```
 if($('#ft_navi .nav').length > 0){
    $('#ft_navi .nav ul').css('display', 'none'); /* if user doesn't have JS enabled, it will show everything for the customer */

    $("#ft_navi .nav > li").hover(function() {
        $(this).find('ul').stop(true, true).show('slow');
    }, 
    function(){
        $(this).find('ul').stop(true, true).hide('slow');
    }); //end of hover
} /* end of footer */ 
```

Here's the HTML:

```
 <ul class="nav">
          <li class="">
             <a href="">Automotive</a>
             <ul>
                <li class=""><a href="">Overview</a></li>
                <li class=""><a href="">Credit</a></li>
             </ul>
          </li>
    </ul> 
```

So in detail what happens is that the hover/over off works just fine and dandy until someone gets quick with the mouse. If you hover off the top li and hover back onto the subnav before it finishes closing, the subnav blinks uncontrollably and doesn't stop. Without the stop functions and it just being like this:

```
 $(this).find('ul').show('slow'); 
```

...just makes it open and close rapidly.

Thanks for any tips!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:06:49.173

解决此问题的一种方法是在悬停时添加延迟：

[http://jsbin.com/obenec/1/](http://jsbin.com/obenec/1/)

```
if($('#ft_navi .nav').length > 0){
  $('#ft_navi .nav ul').css('display', 'none'); /* if user doesn't have JS enabled, it will show everything for the customer */

  $("#ft_navi .nav > li").hover(function() {
    $(this).find('ul').stop(true,true).delay(300).show('slow');
  }, 
  function(){
    $(this).find('ul').stop(true,true).delay(300).hide('slow');
  }); //end of hover
} /* end of footer */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:04:36.243

因为没有停止（如果元素已经动画则停止动画），它将绑定显示和隐藏您悬停在元素上的次数。[jQuery 停止](http://api.jquery.com/stop/)

# exception - Handling exceptions on cucumber scenarios

> ID：12787032
> 
> 赞同：2
> 
> 时间：2012-10-08T18:00:00.923
> 
> 标签：exception, cucumber

I'm suffering from selenium's awkward behavior for alert boxes [described here](http://code.google.com/p/selenium/issues/detail?id=3600). Until this is resolved I need to rescue from `Selenium::WebDriver::Error::UnhandledAlertError`.

This is easily done when I've created the step where the exception originates: I plop in a rescue block and it works fine.

But what if the step is an existing one that I want to rescue from, in this case, checking a checkbox? I can't do anything at this level--can I?--so I thought adding a tag to the scenario and an around hook like the following would work, but it doesn't:

```
Around('@handle_alert_boxes') do |scenario, block| do
  begin
    block.call
  rescue Selenium::WebDriver::Error::UnhandledAlertError
    puts "It's OK!"
  end
end 
```

I also tried cucumber's `@allow-rescue` tag, but it appears this only works when handling exceptions *external* to cucumber (like Rails) but not *internal* (like its driver--selenium).

Is there a way to handle this without creating a new step with a rescue block? That doesn't feel right and it will pollute my cucumber's vernacular.

# facebook - Is it possible to create a facebook event on the behalf of an application with Graph Api?

> ID：12787034
> 
> 赞同：0
> 
> 时间：2012-10-08T18:00:07.260
> 
> 标签：facebook, facebook-graph-api

Is it possible to create a facebook event on the behalf of an application? The idea is that the creator would be the facebook app and not a user, page, group...

According to the documentation this was possible in the old REST API but the graph api documentation doesn't seems to mention it.

Thx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:28:18.653

是的，这是可能的。请参阅描述如何将图形 API 用于 Facebook 事件的此文档：[https ://developers.facebook.com/docs/reference/api/event/](https://developers.facebook.com/docs/reference/api/event/)

# c++ - Why it is not a indefinite loop as loop counter in while is outside the range of integer variable?

> ID：12787043
> 
> 赞同：0
> 
> 时间：2012-10-08T18:00:30.613
> 
> 标签：c++, c, loops, while-loop

```
{
int i=1;
while(i<=32767)
{
printf("%d",i);
i=i+1;
}
} 
```

It seems a simple program to print 1 to 32767 ...but when i reaches 32767 ...on incrementing value by 1.....it tries to go to 32768 which falls outside the range of integer and goes to other side that is -32768 .....due to which condition becomes true as i<=32767 i.e. -32768.....So it should work as indefinite loop. My Dev C++ Compiler prints only 1 to 32767....its not working as indefinite loop. Anybody

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T18:02:03.997

Presumably the size of an integer on your platform is > 16 bits.

ISO/IEC 9899:201x states

> minimum value for an object of type int
> 
> INT_MIN -32767 // −(2^(15) − 1)

[http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)

In fact, most C compilers these days, on most platforms, will have larger integers than 16 bits.

In C, an integer is guaranteed to be *at least* 16 bits. It is dangerous and non-portable to make an assumption that it is a specific size. Always check.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T18:03:24.577

首先，您确定`int`您平台上的范围溢出`32767`吗？大多数现代平台使用 4 字节`int`，这意味着它的范围远大于`-32768..+32767`.

其次，有符号整数溢出会在 C 和 C++ 中产生未定义的行为。您期望`32767`变成`-32768`增量并且循环变得无限是完全没有根据的。该语言不保证这样的事情。您的程序可能会在发生溢出时简单地崩溃（某些编译器可以故意生成代码以确保程序在此类溢出时被中断）。

第三，一些现代编译器实现了所谓的*严格溢出语义*（GCC 就是一个例子）。由于有符号整数溢出会产生未定义的行为，因此编译器可以自由地以它认为合适的任何方式翻译代码。编译器可以将其转换为无条件无限循环。或者它可以将其转换为一些或多或少定义明确的终止循环。

# python - 将字符串作为变量而不是可执行代码片段粘贴到 IPython 中

> ID：12787045
> 
> 赞同：19
> 
> 时间：2012-10-08T18:00:44.440
> 
> 标签：python, copy-paste, ipython, magic-methods

我知道神奇的 IPython`%paste`命令，如果您要插入有效代码，它非常有用。现在我不想插入代码，我只想将复制缓冲区中的一些字符串存储为变量。有没有更简单的方法可以做到这一点，除了将字符串复制到某个单独的文本编辑器并先修改它？

像这样的东西会很好，但它们都不起作用：

```
strvar = %paste
strvar = """%paste""" 
```

PS 该字符串很长并且包含特殊字符等。所以简单的 ctrl-c 只会创建垃圾和错误消息。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-09T07:14:51.057

```
%paste strvar 
```

为您提供复制文本中的行列表。你可以做

```
strvar = '\n'.join(strvar) 
```

获取单个字符串中的文本。

# excel - Excel 宏循环遍历单元格，如果值为 True，则将数据输出到另一个工作表

> ID：12787054
> 
> 赞同：0
> 
> 时间：2012-10-08T18:01:36.980
> 
> 标签：excel, excel-2007, excel-formula, vba

我正在做一个项目，用户将通过“测试”列表并检查测试是通过还是失败。如果测试失败，他们会检查第二列中的“失败”框，并记录测试失败的原因。设置如下所示：

[工作表 1 - 顶部图像](http://imgur.com/a/5Akzj)

我需要编写一个宏，以便当用户完成“测试”并单击“生成报告”按钮时，它会在另一个工作表上编译失败测试的摘要和相关注释，例如：

[工作表 2 - 失败测试总结（下图）](http://imgur.com/a/5Akzj)

我有开发背景，但不熟悉 Excel 宏的语法。我已经做了一些挖掘，但我想我会先在这里问。本质上，我需要循环遍历“失败”列中的所有单元格。每次我点击“真”值时，将其右侧单元格中的注释内容和左侧测试两个单元格的名称输出到另一个工作表上。让我知道您将如何处理此问题以及您需要什么类型的功能 - 非常感谢您的帮助！

**更新：在这里回答：**

我创建了 3 个命名范围：测试、失败和注释。这很简单，只需选择测试列表（不包括标题）并在地址框中输入测试。已创建命名范围。对你的失败和笔记做同样的事情。然后，在第 2 页：

```
[A3]=INDEX(tests,MATCH(TRUE,fails,0))
[B3]=INDEX(notes,MATCH(TRUE,fails,0))
[A4]=IFERROR(INDEX(OFFSET(tests,MATCH(A3,tests,0),0),MATCH(TRUE,OFFSET(fails,MATCH(A3,tests,0),0),0)),"")
[B4]=IFERROR(INDEX(OFFSET(notes,MATCH(A3,tests,0),0),MATCH(TRUE,OFFSET(fails,MATCH(A3,tests,0),0),0)),"") 
```

（根据需要将 A4 和 B4 向下复制。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:06:36.913

为真值运行自动过滤器，然后将可见单元格复制到新工作表中。用于此的 VBA 代码将如下所示：

```
Sub AutoFilterAndCopy()
Dim shtNew As Worksheet, shtOrg As Worksheet

Set shtOrg = ActiveSheet
Set shtNew = Sheets.Add

With shtOrg.range("A1").CurrentRegion
    .AutoFilter Field:=3, Criteria1:="True"

    .Columns(1).SpecialCells(xlCellTypeVisible).Copy shtNew.Cells(2, 1)
    .Columns(4).SpecialCells(xlCellTypeVisible).Copy shtNew.Cells(2, 2)

    .AutoFilter
End With

End Sub 
```

**这里的解决方案：**

我创建了 3 个命名范围：测试、失败和注释。这很简单，只需选择测试列表（不包括标题）并在地址框中输入测试。已创建命名范围。对你的失败和笔记做同样的事情。然后，在第 2 页：

```
[A3]=INDEX(tests,MATCH(TRUE,fails,0))
[B3]=INDEX(notes,MATCH(TRUE,fails,0))
[A4]=IFERROR(INDEX(OFFSET(tests,MATCH(A3,tests,0),0),MATCH(TRUE,OFFSET(fails,MATCH(A3,tests,0),0),0)),"")
[B4]=IFERROR(INDEX(OFFSET(notes,MATCH(A3,tests,0),0),MATCH(TRUE,OFFSET(fails,MATCH(A3,tests,0),0),0)),"") 
```

（根据需要将 A4 和 B4 向下复制。）

# java - 动画中的随机种子

> ID：12787056
> 
> 赞同：1
> 
> 时间：2012-10-08T18:01:44.447
> 
> 标签：java, random, processing

我正在处理中制作动画。我有一些随机点随机移动然后形成一个实体。由于动画太慢，我正在考虑保存帧，然后将它们添加到电影中。

我需要运行相同的程序两次或更多次，所以我使用的是 Random 类而不是 Processing 的 random() 函数，但我不明白种子参数的含义。

我应该把什么作为种子？这种随机方法是否均匀分布？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:08:34.383

你把什么作为种子并不重要。实际上最好让它无参数，因为这样它每次都会选择不同的种子。如果您明确指定种子，您将收到随机行为......但每次运行时都会出现*相同的随机行为！*

这是因为随机数生成器实际上在逻辑上不是随机的。它们是伪随机的，因为它们是通过算法生成的。种子是该算法的一部分。基本上，该算法将在该范围内产生均匀分布的数字（事实上，即使是 PRNG 也经常被批评为不够随机*）*。

> PRNG 可以使用种子状态从任意起始状态开始。此后，当使用该状态初始化时，它将始终产生相同的序列。

[来自维基百科](http://en.wikipedia.org/wiki/Pseudorandom_number_generator)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T18:15:57.977

尝试

```
new Random(System.currentTimeMillis()); 
```

它几乎每次都会给你不同的种子。不知道够不够，但绝对比常数种子好。

虽然，当你做 new Random()

```
 public Random() { this(++seedUniquifier + System.nanoTime()); } 
```

这就是发生的事情，所以我建议你尝试一下，这对你更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T19:01:24.123

如果您查看[Random 类的 JavaDoc，](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html)您会发现您需要调用特定方法、nextInt()、nextFloat() 等来获得均匀或高斯分布。如果您希望您的结果是可重复的，您应该为种子使用一个常数值。否则，如果您希望每次运行时结果都不同，我同意时间是播种它的好方法。

# javascript - 随机左侧，顶部位置，jquery，javascript

> ID：12787059
> 
> 赞同：0
> 
> 时间：2012-10-08T18:02:17.180
> 
> 标签：javascript, jquery, html

我有一个 div 元素列表，它是可拖动的项目。

我需要做的是，所有元素，我将生成随机的顶部和左侧位置，这将在我的容器范围内，但我不知道该怎么做:)

容器div为：宽度：800px；高度：500px；

我的 js 现在是这样的：

```
var randomTopPos = Math.floor(Math.random() * (600 / 2));
var randomLeftPos = Math.floor(Math.random() * (5));

$(".t-shirt-design").css({
    'top' : randomTopPos,
    'left': randomLeftPos
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:16:28.987

鉴于您的容器 id`container`和您的可拖动 id 是`dragid`，您可以执行以下操作：

```
ctop = $('#container').offset().top;  // container top
cleft = $('#container').offset().left;// container left
cheight = $('#container').height();   // container height
cwidth = $('#container').width();     // container width

$(".t-shirt-design").each(function() {
   dragheight = $(this).height(); //your draggable height
   dragwidth  = $(this).width(); // your draggable width
   randomtop = ctop + Math.floor((Math.random()* (cheight - dragheight))+1);
   randomleft = cleft + Math.floor((Math.random()* (cwidth - dragwidth))+1);
   $(this).css({
     'top' : randomtop,
     'left': randomleft
   });
}); 
```

**更新**：
更新了代码以容纳几个`.t-shirt-design`元素

**更新2**：
你的html代码也有错误，一个html元素只能有一个id，你的容器html元素中有两个，如下：

```
<div id="tshirts-designs homepage"> 
```

只替换一个，正确的是：

```
<div id="homepage"> 
```

**更新3**：
查看您的页面，我调整了我的代码以更好地满足您的要求（您的可拖动元素具有不同的宽度和高度），因此请尝试我的更新代码，也可以更好地在`window.load`事件上执行此代码，而不是`.ready`，因为我们需要要加载的图像，因此 div 的高度和宽度是正确的，因此请替换以下行：

```
$(document).ready(function() { 
```

对于这个：

```
$(window).load(function() { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:11:10.313

```
var randomTopPos = Math.floor(Math.random() * (600 / 2));
var randomLeftPos = Math.floor(Math.random() * (5));

$(".t-shirt-design").css({
    'top' : Math.floor(Math.random() * $(this).parent().height() - itemHeight),
    'left': Math.floor(Math.random() * $(this).parent().width() - itemWidth) 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T18:14:03.893

看起来你在正确的道路上......

`Math.random()`正在生成 0 到 1 之间的数字。

您将这些数字乘以所需的范围，将范围更改为 0 范围。

然后将这些值分配为顶部/左侧位置。

一些考虑：

1.  元素的宽度和高度是多少？如果它们不同，您可能需要根据给定对象的宽度/高度生成每个位置。否则，将它们作为常数考虑。如果您有 50x50 像素的项目，则您的最大“顶部”为 450，最大“左侧”为 750，因此乘以 450 和 750 而不是 500 和 800。

2.  您将这些值应用于 CSS 类，如果您为每个项目分配了相同的类，则不会将它们随机化，而是将它们放在同一个位置。您可能希望执行以下操作：

    ```
    $(".t-shirt-design").each(function(e){
        // Generate random numbers
        e.css({
            'top' : randomTopPos,
            'left': randomLeftPos
        });
    }); 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T18:09:10.377

```
$(".t-shirt-design").each(function(){
   var $t = $(this);
   var randomTopPos = Math.floor(Math.random() * (containerHeight-$t.width()));
   var randomLeftPos = Math.floor(Math.random() * (containerWidth-$t.height()));
   $t.css({
      'top': randomTopPos,
      'left':randomLeftPos
   });
}); 
```

用它们的真实值替换`containerHeight`和。`containerWidth`确保物品在容器内并且有`position:relative;`

# ruby - 使用 watir-webdriver 导航到 URL 时出错

> ID：12787063
> 
> 赞同：0
> 
> 时间：2012-10-08T18:02:24.453
> 
> 标签：ruby, internet-explorer, cucumber, watir-webdriver

使用 IE8 和 Windows 7

我有以下红宝石代码：

```
new_browser = Watir::Browser.new :ie
my_url = "http://myworkingurl.mydomain.net/mypage.html"
new_browser.goto my_url 
```

当 Internet Explorer 窗口打开时，我得到以下模式弹出窗口：

```
A program on your computer has corrupted your default search provider
setting for Internet Explorer.

Internet Explorer has reset this setting to your original search provider,
<redacted>.

Internet Explorer will now open Search Settings, where you can change this
setting or install more search providers. 
```

由于这个意外的模态弹出窗口，引发以下异常：

```
Failed to navigate to http://myworkingurl.mydomain.net/mypage.html. This usually means that a call to the COM method IWebBrowser2::Navigate2() failed. 
```

我可以关闭模​​态窗口，它会开始工作，但几分钟后会出现同样的问题。如何永久解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T04:16:12.257

看起来您需要[Microsoft 的修补程序](http://support.microsoft.com/kb/2171141)。试试看。

# sql - 需要在同一列中获取具有 min(date) 和 max(date) 数据值的 id 的最小和最大日期

> ID：12787064
> 
> 赞同：0
> 
> 时间：2012-10-08T18:02:28.850
> 
> 标签：sql, sql-server-2008, pivot

鉴于此数据：

```
ID      FirstDate       LastDate       ItemId
12A     05-11-2011      05-11-2011        0
12A     12-19-2011      12-19-2011        3
12A     01-04-2012      01-04-2012        3
12A     01-19-2012      01-19-2012       12
64B     06-15-2010      06-15-2010        0
64B     08-19-2011      08-19-2011        3 
```

我想看看：

```
ID     FirstDate    FirstItemId     LastDate     LastItemId
12A    05-11-2011       0           01-19-2012       12
64B    06-15-2010       0           08-19-2011        3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:40:35.637

您可以使用窗口函数的组合来获得此结果：

```
select id,
  max(case when FirstRowNumber= 1 then firstdate end) firstdate,
  max(case when FirstRowNumber= 1 then itemid end) firstitemId,
  max(case when LastRowNumber= 1 then lastdate end) lastdate,
  max(case when LastRowNumber= 1 then itemid end) lastitemId
from 
(
  select id, firstdate, lastdate, itemid,
    row_number() over(partition by id order by firstdate) FirstRowNumber,
    row_number() over(partition by id order by lastdate desc) LastRowNumber
  from yourtable
) x
where FirstRowNumber= 1
  or LastRowNumber= 1
group by id 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/a26fd/30)。

此解决方案`row_number`以 ASC/DESC 日期顺序将 分配给记录。那么你只关心`row_number = 1`. 然后，我将聚合和`CASE`语句应用于值以获得正确的结果。

或者你可以使用一个非常丑陋的`UNPIVOT`解决`PIVOT`方案：

```
select *
from 
(
  select id,
    val,
    case when firstrownumber = 1 and col = 'firstdate'
          then 'firstdate'
        when firstrownumber = 1 and col = 'itemid'
          then 'firstitemid'
        when LastRowNumber = 1 and col = 'lastdate'
          then 'lastdate'
        when LastRowNumber = 1 and col = 'itemid'
          then 'lastitemid'
        else '' end col
  from
  (
    select id, 
      convert(varchar(10), firstdate, 120) firstdate, 
      convert(varchar(10), lastdate, 120) lastdate, 
      cast(itemid as varchar(10)) itemid,
      row_number() over(partition by id order by firstdate) FirstRowNumber,
      row_number() over(partition by id order by lastdate desc) LastRowNumber
    from yourtable
  ) x
  unpivot
  (
    val for col in (firstdate, lastdate, itemid)
  ) u
) x1
pivot
(
  max(val)
  for col in ([firstdate], [firstitemid], 
              [lastdate], [lastitemid])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/a26fd/39)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:18:22.657

在它的最基本形式中，您可能希望将[SQL`min`和`group by`](http://www.techonthenet.com/sql/min.php)功能结合起来：

```
select ID
    , min(FirstDate) as FirstDate
    , min(ItemId) as FirstItemId
    , max(LastDate) as LastDate
    , max(ItemId) as LastItemId
from MyTable
group by ID 
```

但是请注意，这将返回每列的绝对最小值和最大值，不一定是对应于 FirstDate 的 ItemId 等，除非数据恰好是这种方式。这是根据第一个/最后一个日期获取 ItemID 的一种可能替代方法：

```
-- Get ItemIDs that correspond to First/Last Dates
select ID
    , FirstDate
    , (select min(ItemID) from Mytable where ID = a.ID and FirstDate = a.FirstDate) as FirstItemID
    , LastDate
    , (select max(ItemID) from Mytable where ID = a.ID and LastDate = a.LastDate) as LastItemID
from (
    select ID
        , min(FirstDate) as FirstDate
        , max(LastDate) as LastDate
    from Mytable
    group by ID
) as a 
```

我发现相关子查询通常比窗口函数更快（并且可能更容易理解），但是您必须在您的环境中使用您的数据进行测试。

# c# - C# 防止 RichTextBox 滚动/跳到顶部

> ID：12787066
> 
> 赞同：3
> 
> 时间：2012-10-08T18:02:34.640
> 
> 标签：c#, scroll, richtextbox

看来，当使用 a 时，`System.Windows.Forms.RichTextBox`您可以使用`textbox.AppendText()`或`textbox.Text = ""`将文本添加到文本框。

`AppendText`将滚动到底部并且直接添加文本不会滚动，但是当用户将文本框聚焦时会跳转到顶部。

这是我的功能：

```
// Function to add a line to the textbox that gets called each time I want to add something
// console = textbox
public void addLine(String line)
{
    // Invoking since this function gets accessed by another thread
    console.Invoke((MethodInvoker)delegate
    {
        // Check if user wants the textbox to scroll
        if (Settings.Default.enableScrolling)
        {
            // Only normal inserting into textbox here with AppendText()
        }
        else
        {
            // This is the part that doesn't work
            // When adding text directly like this the textbox will jump to the top if the textbox is focused, which is pretty annoying
            Console.WriteLine(line);
            console.Text += "\r\n" + line;
        }
    });
} 
```

我还尝试过导入`user32.dll`和覆盖效果不佳的滚动功能。

有谁知道如何一劳永逸地停止滚动文本框？

它不应该到顶部，也不应该到底部，当然也不应该到当前选择，而应该停留在当前位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T19:15:15.180

```
 console.Text += "\r\n" + line; 
```

这并不像你认为的那样。它是一个*assignment*，它完全取代了 Text 属性。+= 运算符是方便的语法糖，但实际执行的代码是

```
 console.Text = console.Text + "\r\n" + line; 
```

RichTextBox 不努力将旧文本与新文本进行比较，以寻找可以将插入符号位置保持在同一位置的可能匹配项。因此，它会将插入符号移回文本的第一行。这反过来又导致它向后滚动。跳。

你肯定想避免这种代码，它非常昂贵。如果你努力格式化文本，你会失去格式。而是倾向于 AppendText() 方法来追加文本和 SelectionText 属性来插入文本（在更改 SelectionStart 属性之后）。不仅有速度的好处，而且也没有滚动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:10:43.987

在这之后：

```
 Console.WriteLine(line);
 console.Text += "\r\n" + line; 
```

只需添加这两行：

```
console.Select(console.Text.Length-1, 1);
console.ScrollToCaret(); 
```

快乐编码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-04T16:31:38.547

我必须实现类似的目标，所以我想分享...

什么时候：

*   以用户为中心：无滚动
*   用户不关注：滚动到底部

我接受了 Hans Passant 关于使用 AppendText() 和 SelectionStart 属性的建议。这是我的代码的样子：

```
int caretPosition = myTextBox.SelectionStart;

myTextBox.AppendText("The text being appended \r\n");

if (myTextBox.Focused)
{
    myTextBox.Select(caretPosition, 0);
    myTextBox.ScrollToCaret();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T18:49:00.877

Then, if I got you correctly, you should try this:

```
Console.WriteLine(line);
console.SelectionProtected = true;
console.Text += "\r\n" + line; 
```

When I try it, it works like you want it to.

# python - Thread 模块的 __init__ 中定义的变量如何重命名为 _Thread_

> ID：12787068
> 
> 赞同：0
> 
> 时间：2012-10-08T18:02:37.870
> 
> 标签：python, multithreading, name-mangling

我正在查看适用于 Windows 的 Active python 2.7.2 32 位上的`threading`module( ) 代码。`<Python Home>/lib/threading.py`在 的`__init__`函数中`class Thread`，定义了很多变量：

```
self.__target = target
self.__name = str(name or _newname())
self.__args = args
self.__kwargs = kwargs
self.__daemonic = self._set_daemon()
self.__ident = None
self.__started = Event()
self.__stopped = False
self.__block = Condition(Lock())
self.__initialized = True 
```

这是我调用以下`__init__`功能的方式`class Thread`：-

```
class ThreadWithReturnValue(Thread):
    def __init__(self, group=None, target=None, name=None,
                 args=(), kwargs={}, Verbose=None):

        Thread.__init__(self, group, target, name, args, kwargs, Verbose)
        self._return = None
        print 'in init: ', self._Thread__target 
```

我不明白该变量`self._Thread__target`没有在`__init__`函数的任何地方初始化`class Thread`。但是，如果我在自己的函数中打印此变量，则会显示from函数的`__init__`实际值。`self.__target``class Thread``__init__`

另外，我尝试编辑`threading`模块并将这一行作为`__init__`函数的最后一行`class Thread`：-

`print 'in init of Thread class in threading: ', self._Thread__target`

尽管如此，我仍然可以看到正在打印的值，并且解释器没有向我显示任何错误。所以，我试图找到任何可能进行重命名的函数。但是，找不到。

`__init__`函数中定义的所有其他变量都会发生这种情况`class Thread`。我想知道变量之类`self.__target`的重命名为`self._Thread__target`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:03:56.070

这被称为名称修改它是每次变量以 a 开头时发生的情况`__`

请参阅：[http](http://docs.python.org/release/1.5/tut/node67.html) ://docs.python.org/release/1.5/tut/node67.html 和[http://docs.python.org/reference/expressions.html#atom-identifiers](http://docs.python.org/reference/expressions.html#atom-identifiers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:05:34.307

它内置在 Python 中。从[文档中](http://docs.python.org/reference/expressions.html#atom-identifiers)：

> 当以文本形式出现在类定义中的标识符以两个或多个下划线字符开头并且不以两个或多个下划线结尾时，它被视为该类的私有名称。在为私有名称生成代码之前，私有名称会转换为更长的形式。转换在名称前面插入类名，删除前导下划线，并在类名前面插入一个下划线。例如，`__spam`出现在名为的类中的标识符`Ham`将转换为`_Ham__spam`.

# xslt - 科学数字格式

> ID：12787071
> 
> 赞同：1
> 
> 时间：2012-10-08T18:03:00.907
> 
> 标签：xslt

[从这里引用](https://stackoverflow.com/questions/4367737/formatting-scientific-number-representation-in-xsl)

我正在尝试找到一种使用 xslt 1.0 版格式化科学数字的方法。我尝试使用来自 stockoverflow 的示例作为参考，但我无法让它工作。任何帮助都是极好的！

谢谢！

编辑：我希望所有这些数字都具有相同的格式。

```
 <?xml version="1.0" encoding="utf-8"?>
    <?xml-stylesheet type="text/xsl" href="SNS.xslt"?>
    <Scientific_Numbers>
      <Section_1>
        <SN_1>1.0000234E-4</SN_1>
        <SN_1>1.0000353476E-4</SN_1>
      </Section_1>
      <Section_2>
        <SN_1>1.3400234E-4</SN_1>
        <SN_1>0.0000234E-2</SN_1>
      </Section_2>
      <Section_3>
        <SN_1>1.003453453400234E-2</SN_1>
        <SN_1>1.0234E+6</SN_1>
      </Section_3>
    </Scientific_Numbers>

    <?xml version="1.0" encoding="utf-8"?>

    <xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
    <html>
      <body>
        <h2>ScientificNumbers</h2>
        <xsl:apply-templates/>
      </body>
    </html>
    </xsl:template>

  <xsl:template match="Scientific_Numbers">
    <xsl:apply-templates select="SN_1"/>
    <br/>
  </xsl:template>

    <?xml version="1.0" encoding="utf-8"?>

    <xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
      <xsl:template match="/">
        <html>
          <body>
           <h2>Testing</h2>
           <xsl:apply-templates/>
          </body>
        </html>
      </xsl:template>

      <xsl:template match="Scientific_Numbers">
        <xsl:apply-templates select="SN_1"/>
        <br/>
      </xsl:template>

      <xsl:template match="SN_1[substring-after(.,'E')]">
        <xsl:variable name="vExponent" select="substring-after(.,'E')"/>
        <xsl:variable name="vMantissa" select="substring-before(.,'E')"/>
        <xsl:variable name="vFactor"              
                  select="substring('100000000000000000000000000000000000000000000',
                  1, substring($vExponent,2) + 1)"/>
    <xsl:choose>
      <xsl:when test="starts-with($vExponent,'-')">
        <xsl:value-of select="$vMantissa div $vFactor"/>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="$vMantissa * $vFactor"/>
      </xsl:otherwise>
    </xsl:choose>
      </xsl:template>
    </xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:29:51.183

XSLT 1.0 中没有以科学计数法输出数字的机制（事实上，即使在 XSLT 2.0 中也存在有限的功能）。您必须查看您的 XSLT 处理器支持哪种扩展机制。

# jquery-mobile - 如何关闭弹出对话框页面并从代码打开另一个？

> ID：12787072
> 
> 赞同：3
> 
> 时间：2012-10-08T18:03:06.397
> 
> 标签：jquery-mobile

我正在关闭一个弹出对话框，然后我正在打开另一个弹出窗口，例如：

```
$( "#iece" ).popup( "close" );
$( "#popupMatricula" ).popup( "open" ); 
```

我也尝试：

```
 $(function() {
            $( "#iece" ).bind({
               popupafterclose: function(event, ui) {                         
                    $( "#popupMatricula" ).popup( "open" );
               }
            });              
        }); 
```

但是#popupMatricula 永远不会打开。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T21:15:32.980

我已经看到，如果不直接使用链接打开弹出窗口，总是需要一些延迟......请参阅此工作示例

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
<head>
    <title>popup</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset= ISO-8859-5">
</head>
<body>

  <div data-role="page" id="myPage">
    <div data-role="content">
      <h1>Popup</h1>
      <div data-role="popup" id="popupBasic">
        <p>This is a completely basic popup, no options set.</p>
      </div>
      <div data-role="popup" id="popupMatricula">
        <p>This is the Matricula popup.</p>
      </div>
    </div>

    <script>
      $(document).bind('pageinit', function() {
        setTimeout(function(){
          $("#popupBasic").popup();
          $("#popupBasic").popup("open");
        }, 100);
        setTimeout(function(){
          $("#popupBasic").popup("close");
        }, 3000);
        setTimeout(function(){
          $("#popupMatricula").popup();
          $("#popupMatricula").popup("open");
        }, 3100);
      });
    </script>
  </div>

</body>
</html> 
```

**编辑**： Firefox 需要短暂的延迟，但对于 Chrome 和 Android 浏览器则不需要，因为@Jasper[在此处测试](https://stackoverflow.com/a/13773033/1545993)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-08T08:47:06.277

# 在较新版本的 JQM 中，它是固定的！

要打开一个弹出窗口，您需要先关闭任何打开的窗口，然后将另一个像这样的开口绑定到`popupafterclose`事件！

```
 $("#loading_popup").on("popupafterclose", function () {
            //any action you want like opening another popup
            onloadpopupOpen();

    }) 
```

快乐编码！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-22T14:29:24.410

在关闭上一个时打开另一个弹出窗口。我使用 popupafterclose 事件。

```
$(".selector").on("popupafterclose", function ()
{
        //any action you want like opening another popup
         setTimeout(function()
         {
            $('#popup').popup('open');
         }, 100);
}); 
```

基于泰丰解决方案

# javascript - 如何在我们的 Web 应用程序中创建我们自己的通知，例如 facebook

> ID：12787074
> 
> 赞同：1
> 
> 时间：2012-10-08T18:03:17.817
> 
> 标签：javascript, .net, web-applications

基本上，我正在使用 C# 在 .NET 中开发一个基于 Web 的项目，因此我需要为不同的用户集创建一个配置文件，并且还需要为他们分配不同的权限集，以便从数据库中编辑、查看和检索信息。因此，对于将要发生的每个特定事件（即精确地将一些数据写入数据库），我想向一组特定的用户发出通知，这些用户在登录时可以看到它。在这里，我的需要是请建议我如何为用户创建基本配置文件，因为用户数量仅限于我的应用程序，也是这个问题的核心部分，例如我如何制作类似于 Facebook 的通知栏（不完全是它的副本，只是一个简单的副本，可以帮助我为该特定用户配置文件提供通知）。

请随意感受并为我提供您的宝贵建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:12:33.017

您可以为此使用[SignalR](http://signalr.net/)。SignalR 是一个用于 .NET 的异步库，用于创建实时 Web 应用程序。

在这里你可以找到一个通知系统的例子：

[SignalR - 组通知](http://www.codeproject.com/Articles/404662/SignalR-Group-Notifications)

# jquery-plugins - MVC4 Web 应用 JQuery 插件

> ID：12787089
> 
> 赞同：0
> 
> 时间：2012-10-08T18:04:34.137
> 
> 标签：jquery-plugins

我有一个空的 ASP.Net MVC4 Web 应用程序，我想添加一个 jquery 表排序器。我已将下面的脚本添加到包含表格的视图中，但不确定我需要将引用放置在哪里对 jquery.tablesorter.pager.js 文件。

```
<script type="text/javascript">
$(document).ready(function() 
    {
        $("#mytable").tablesorter(); 
    }
); 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:56:34.203

只是为了提供一些反馈，我们最终选择了标准的 Jquery 移动列表。

# html - 为什么我的 margin-top 不起作用？

> ID：12787091
> 
> 赞同：0
> 
> 时间：2012-10-08T18:04:36.273
> 
> 标签：html, css

我有一个我正在尝试移动的图像列表，但它不起作用。

**HTML：**

```
<!DOCTYPE html>
<html>
    <head>
        <title>Title</title>
        <link rel="stylesheet" type="text/css" href="assets/css/style.css" />
    </head>
    <body>
       <div id="wrapper">
           <h1>Portfolio</h1>
           <img src="assets/img/PHOTOGRAOHY.png" alt="Photography" width="214" height="183">
           <img id="industrialDesignIMG" src="assets/img/ID.png" alt="Industrial Design" width="232" height="183">
           <img src="assets/img/GraphicDesign.png" alt="Graphic Design" width="233" height="196">
           <img src="assets/img/animation.png" alt="Animation" width="198" height="142">
       </div>
    </body>
</html>
​ 
```

**CSS：**

```
#industrialDesignIMG {
    border:1px #fff solid;
    display: inline-block;
    margin-top: 80px;
}
#wrapper {
    width:960px;
    margin:0 auto;
} 
```

我想要`#industrialDesignIMG`一个`margin-top`of `80px`，但要么什么都没有移动，要么所有`img`元素都移动。我能做些什么来让我的`margin-top`工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T18:12:40.210

它实际上*正在*应用中。只是因为图像都是内联元素，它们彼此内联，所以看起来它们都被向下移动了 80 像素，因为图像在底部对齐。

请参阅[没有上边距的](http://jsfiddle.net/roddy/y752p/)这个[JSFiddle](http://jsfiddle.net/roddy/D5CAD/)和带上边距的这个 JSFiddle 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T18:12:50.867

图像是内联元素。为了修复这个浮动每个图像向左，这将使它成为一个块元素：

[http://jsbin.com/ekojux/1/](http://jsbin.com/ekojux/1/)

```
img { float: left } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T18:12:33.133

采用：

```
padding-top: 80px; 
```

或者：

```
position: relative;
bottom: -80px; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T18:12:55.297

将所有图像浮动。

```
img {
    float: left;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T18:18:49.113

任何元素的默认定位都是静态的。因此，任何元素的排序/定位将取决于兄弟元素的位置。简单来说，只需将 CSS 添加`float: left`到图像标签并为您的特定图像分配边距。例子：

```
#wrapper img { float: left; } 
```

现在将边距添加到您的`#industrialImg`. 这会将您的标题移动到角落。只需`img`用新的`div`. 那应该行得通。

# excel - 如何在 Excel 中计算每个类别的唯一值

> ID：12787093
> 
> 赞同：7
> 
> 时间：2012-10-08T18:04:37.910
> 
> 标签：excel

我在这个网站和网上四处寻找这个问题的答案，但我还没有成功，所以我会在一个新线程中提问。

我需要能够使用公式（或多个公式）计算 Excel 中每个类别的特定文本的出现次数。最好这可以在不使用 VBA 的情况下完成，但如果有必要，我将尝试编写 VBA 命令。

这是我正在使用的内容：

```
Cat.    Word
A       doo
A       foo
A       foo
A       loo
B       loo
B       goo
B       loo
A       roo
A       lol
B       rar
C       goo
...      ... 
```

我想要一个公式来计算每个类别中每个单词的唯一出现次数。这些类别是已知的和有限的，并且包含在我的 Excel 工作表中的列表中，但是这些单词可以是任意数量并且是未知的。每个类别都可以包含其他类别的单词，最终结果应如下所示：

```
Cat.    Count of distinct ocurrences per category
A       5
B       3
C       1 
```

最后，我知道我可以对列表进行重复数据删除，但我想保持列表完整以用于存档目的，因此不需要重复数据删除的计数将是理想的。

这是我试图做的，但最终没有奏效：

```
=IF(A:A=C1,SUM(IF(FREQUENCY(MATCH(B1:B11,B1:B11,0),MATCH(B1:B11,B1:B11,0))>0,1))) 
```

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T18:12:08.340

试试这个“数组公式”

`=SUM(IF(FREQUENCY(IF(A$1:A$11=C1,IF(B$1:B$11<>"",MATCH(B$1:B$11,B$1:B$11,0))),ROW(B$1:B$11)-ROW(B$1)+1),1))`

确认`CTRL+SHIFT+ENTER`

其中 C1 是第一个要计算的类别。向下复制所有类别的公式

**解释**

该公式的基本思想是，第一个`IF`是“过滤器”，以确保您仅在 A 值 = C1 时查看 B 值，第二个`IF`过滤掉 B 中的空白，否则`MATCH`给出该值的第一个匹配项的位置在 B 中（因此为相同的值给出相同的数字）

的结果`IFs`是函数的第一部分`FREQUENCY`。中的“箱”`FREQUENCY`由**ROW-ROW+1**部分形成，它为您提供了一个从 1 到 n 的数字范围，这将涵盖`MATCH`可能给出的整个值范围。

现在我们只需要计算`IF`s 返回的不同数字的数量（因为这将等于 B 中不同值的数量作为您的标准），因此公式中的最后一个 1 分配给每个非零值`FREQUENCY`并将结果相加。

详细说明您的示例 where C1 = A 这部分

`=IF(A$1:A$11=C1,IF(B$1:B$11<>"",MATCH(B$1:B$11,B$1:B$11,0)))`

导致这个数组

`{1;2;2;4;FALSE;FALSE;FALSE;8;9;FALSE;FALSE}`

FALSE 值 where col A <> "A" 否则`MATCH`为每个值给出第一个匹配的位置的数字 - 注意 2 出现两次，因为 foo 出现两次，首先在第 2 行

该`ROW(B$1:B$11)-ROW(B$1)+1`部分为您提供了这个数组

`{1;2;3;4;5;6;7;8;9;10;11}`

所以现在公式看起来像这样

`=SUM(IF(FREQUENCY({1;2;2;4;FALSE;FALSE;FALSE;8;9;FALSE;FALSE},{1;2;3;4;5;6;7;8;9;10;11}),1))`

因此`FREQUENCY`将第一个数组中的值放入相关的“bins”中，公式现在解析为

`=SUM(IF({1;2;0;1;0;0;0;1;1;0;0;0},1))`

请注意，数组返回的`FREQUENCY`总和为 6（六行，值为“A”），但只有 5 个非零数字，表示标准“A”的五个不同值。

现在最后一个 IF 为每个非零值返回 1，`SUM`函数将它们相加得到 5

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T19:37:46.463

[就个人而言，我更喜欢使用Pivot Tables](http://office.microsoft.com/en-us/excel-help/pivottable-i-get-started-with-pivottable-reports-in-excel-2007-RZ010205886.aspx)来做到这一点。对于比偶尔的电子表格更大的任何东西，Microsoft Access 或其他数据库中的 SQL 查询赢得了比赛。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T20:36:24.747

我也一直在为此烦恼。我在这方面找到的最简单的解决方案是数据透视表和单个公式的组合。

1.  创建数据透视表
2.  放猫。在列标签中
3.  将 Word 放在行标签中
4.  把话语放在价值观中
5.  `B2`在具有范围和减法 1的单元格中使用计数公式`B5:B100000`（对于数据透视表下方的总计：

    `=COUNT(B5:B100000)-1`

这有多容易？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-19T06:20:27.487

简单的方法 - 只需在插入 Pivot 时选择数据模型选项，然后从值字段中选择不同的值选项。你完成了。

# c# - C# QuickSort 递归程序不排序

> ID：12787097
> 
> 赞同：0
> 
> 时间：2012-10-08T18:04:43.887
> 
> 标签：c#, wpf, arrays, collections, quicksort

我试图理解一个快速排序的例子。我随机生成 9 个数字并放在一个列表中。程序选择一个随机枢轴。基于枢轴，列表中的其他值被放置到左列表或右列表中。然后我使用左列表和右列表再次调用该方法。这就是我感到困惑的地方。它没有对 9 个数字进行完全排序。我究竟做错了什么？

这是我更新的代码。现在，如果一个枢轴数字与列表中的另一个数字相同，则返回时它不包含在排序列表中，例如未排序的 487878146，排序的 14678 我认为导致问题的代码是（如果（j ==枢轴）继续；）

```
public static List<int> QuickSort(List<int> arr)
    {
        Random random = new Random();
        int i, pivot;

        List<int> leftList = new List<int>();
        List<int> rightList = new List<int>();

        if (arr.Count > 1)
        {
            //pivot = random.Next(arr[0],arr[arr.Count - 1]);
            pivot = arr[random.Next(0, arr.Count - 1)];
                foreach(int j in arr)
                {
                    if (j == pivot) continue;
                    if (j <= pivot)
                        leftList.Add(j);
                    else
                        rightList.Add(j);
                }

            List<int> sortedLeft = QuickSort(leftList);
            List<int> sortedRight = QuickSort(rightList);

            List<int> tempList = new List<int>();
            tempList.AddRange(sortedLeft);
            tempList.Add(pivot);
            tempList.AddRange(sortedRight);

            //for (i = 1; i <= leftList.Count; i++)
            //    tempList.Add(leftList[i - 1]);
            //tempList.Add(pivot);
            //for (i = 1; i <= rightList.Count; i++)
            //    tempList.Add(rightList[i - 1]);

            return tempList;
        }
        return arr;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:08:29.200

您的快速排序返回排序列表，因此您需要合并它们而不是未排序的输入：

```
List<int> sortedLeft = QuickSort(leftList);
List<int> sortedRight QuickSort(rightList);

List<int> tempList = new List<int>();
tempList.AddRange(sortedLeft);
tempList.Add(pivot);
tempList.AddRange(sortedRight); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:30:14.420

除了 Lee 的回答之外，您还应该修改您的数据透视选择，因为您使用的随机数不必在数组中，然后将其插入到列表中。例如，您可以尝试这样的事情：

```
pivot = arr[random.Next(0,arr.Length - 1)]; 
```

# nosql - Redis 从 Set 中获取范围？

> ID：12787100
> 
> 赞同：3
> 
> 时间：2012-10-08T18:04:57.277
> 
> 标签：nosql, redis

在 Redis 中是否可以从 Set 中获取一系列项目？

我只注意到给你所有成员的 SMEMBERS。[http://redis.io/commands#set](http://redis.io/commands#set)

例如，如果我每次都必须在数百万个项目中使用 SMEMBERS，我只需要从索引 33,456 到 33,466 的 10 个。

每次我要求其中的 10 个时，SMEMBERS 都必须生成包含数百万个项目的完整列表。这不是性能杀手吗？还是因为 Redis 速度快而且可以这样使用，所以可以吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-20T05:42:22.223

你不能进入`range`集合，因为它是**无序**的，因此没有索引。[但是，您可以使用SMEMBERS](https://redis.io/commands/smembers)获取集合的所有成员

在 redis-cli

```
SMEMBERS my_set 
```

此外，[ZRange](http://redis.io/commands/zrange)可能会帮助您在 redis 中使用[Sorted Sets](http://redis.io/commands#sorted_set)

在 redis-cli

```
ZRANGE your_key 33455 33465 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T05:37:23.513

不，这是不可能的，因为 Set 数据类型中不存在索引的概念。事实上，`SMEMBERS`不保证您的具体订单；每次调用时，元素的顺序很可能是随机的。将 Set 视为事物的无序集合：如果您需要存储一堆共享相同内容的 id，但如果您需要实现分页，则绝对不是要使用的数据类型。也许您正在寻找[列表](http://redis.io/commands#list)或[排序集](http://redis.io/commands#sorted_set)？

我建议阅读以下内容以了解 redis 中可用的数据类型以及何时使用它们：

*   [数据类型文档](http://redis.io/topics/data-types)
*   [Redis 使用的底层数据结构是什么？](https://stackoverflow.com/q/9625246/1329367)

# entity-framework - SQL Server 计算列和 EF 模型优先

> ID：12787102
> 
> 赞同：1
> 
> 时间：2012-10-08T18:05:08.620
> 
> 标签：entity-framework, calculated-columns, ef-model-first

我正在使用模型优先方法使用 EF5。我设计了模型并执行了生成相应数据库的 SQL 脚本（使用“从模型生成数据库”）。

然后我不得不使用 UDF 来计算几个列值（这需要删除和重新添加列）。我在 SSMS 中完成了该操作，然后使用“从数据库更新模型...”来反映模型中的更改。

到目前为止，一切都很好。

但是从这一点开始，每次我从模型更新数据库时（如上所述），计算的列都会被“标准”列覆盖。

例如，以下是 EF 生成的 SQL 脚本的摘录：

```
-- Creating table 'ShipmentSet'
CREATE TABLE [dbo].[ShipmentSet] (
[Id] int IDENTITY(1,1) NOT NULL,
[Details] nvarchar(128)  NOT NULL,
[BarcodeValue] nvarchar(32)  NOT NULL,
[ExecutionDate] datetime  NOT NULL,
[RouteId] int  NOT NULL,
[IsLocationBarcodeRequired] bit  NOT NULL,
[IsPending] bit  NULL,
[LastAction] tinyint  NULL
);
GO 
```

最后两列是计算列，它们`StoreGeneratedPattern`在模型中定义为`Computed`.

有没有办法在模型中添加计算列公式？SQL 脚本删除表然后重新创建它们，因此“忽略”这些列是行不通的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:29:55.117

我从 Microsoft 的开发人员中心得到以下回复（请参阅[此处](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/c25bacda-6535-40ff-acfe-f0aa317228e2)的完整主题）

基本上答案是它不是一个错误，它根本不受支持：

> 您不能混合使用模型优先和数据库优先。手动修改数据库后，您将无法再使用从 EDMX 生成数据库。基于 UDF 的计算列信息存储在 SSDL 中，CSDL 对此一无所知，因此每次从 EDMX 文件生成数据库时，都会将特殊列生成为常规列。

So if you want to use computed columns and UDFs, Database-first is the only choice for you.

I can't say I'm satisfied with the answer, as it means EF Model-first is useless for the most of my projects, but that's just the way things are.

Any comments are welcome.

# ruby-on-rails - 如何知道 Rails 中模型属性的名称

> ID：12787105
> 
> 赞同：0
> 
> 时间：2012-10-08T18:05:20.157
> 
> 标签：ruby-on-rails, ruby-on-rails-3

给定以下示例代码：

```
@user = User.last
user.first_name.attr_name #this should return "first_name" 
```

Rails 中有类似“attr_name”方法的东西吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:20:34.890

你可以这样做（但也许问问自己为什么）：

```
user.attributes.key(user.first_name) 
```

...将`"first_name"`作为字符串返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:37:26.047

要列出模型的属性，您可以使用`column_names`.

例如，`User.column_names`返回类似：

> [“id”、“电子邮件”、“encrypted_pa​​ssword”、“reset_password_token”、“reset_password_sent_at”、“remember_created_at”、“sign_in_count”、“current_sign_in_at”、“last_sign_in_at”、“current_sign_in_ip”、“last_sign_in_ip”、“created_at”、“ updated_at”、“名称”、“confirmation_token”、“confirmed_at”、“confirmation_sent_at”、“account_id”、“account_primary”]

然后，您可以遍历此数组。例如，`User.column_name[1]`将返回`"email"`.

要查看每个属性的更多详细信息，只需使用`columns`. 的输出`User.columns`如下所示：

> [#< ActiveRecord::ConnectionAdapters::Mysql2Adapter::Column:0x007fd6942b1840 @name="id", @sql_type="int(11)", @null=false, @limit=4, @precision=nil, @scale= nil, @type=:integer, @default=nil, @primary=true, @coder=nil, @collat​​ion=nil>, #< ActiveRecord::ConnectionAdapters::Mysql2Adapter::Column:0x007fd694434348 @name="email", @sql_type="varchar(255)",...

要列出模型实例的属性，您可以采用 MrTheWalrus 的建议：`User.first.attributes`将返回第一个用户属性及其值的哈希值。

希望这会有所帮助。

# ruby - 在 Padrino 应用程序中调用子应用程序路由

> ID：12787106
> 
> 赞同：0
> 
> 时间：2012-10-08T18:05:29.470
> 
> 标签：ruby, sinatra, padrino

我想调用一个映射到给定 Padrino 应用程序中的子应用程序的路线。做这个的最好方式是什么？例如，假设我需要`/subapp/create`作为 running 的一部分调用`/mainapp/create`。我不想简单地链接到它，而是实际调用它并使用结果。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T03:10:40.770

你不能，因为rails render_controller 已经死了。

您可以使用“旧”iframe 解决方法。

您可以从其他应用调用链接，例如：

```
MainApp.url :backend, :index 
```

# python - 获取已编译函数对象的函数

> ID：12787108
> 
> 赞同：16
> 
> 时间：2012-10-08T18:05:49.587
> 
> 标签：python, python-3.x

Python 函数有一个代码对象`__code__`。

`sys.settrace`跟踪具有代码对象`frame`。`f_code`

对于那些作为函数的跟踪器调用，我如何获取函数对象（及其`__annotation__`成员）？

到目前为止，通过反复试验，我有：

```
if hasattr(frame.f_globals.get(frame.f_code.co_name),"__annotations__"): 
```

这似乎适用于函数，但不适用于类成员函数；更糟糕的是，它会将类成员函数与同名的顶级函数混淆。

（我在 Python 3.2.3 (Xubuntu) 上。我看到 Python 3.3`inspect`模块有一个[`signature`](http://docs.python.org/py3k/library/inspect.html#inspect.signature)函数；这会返回代码对象的注释还是它也需要一个函数对象？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T18:12:43.913

通过`inspect.getframeinfo`模块。我的意思是——在 Python 中没有直接的方法来做到这一点——大多数时候你可以在没有函数的情况下获得代码对象，它是通过帧内省。

Inspect 的 getframeinfo 函数确实会返回有关正在运行的帧的一些信息，然后您可以通过获取函数对象的名称来检索函数对象。

但这取决于实现并且有一些缺点：

```
>>> import inspect
>>> def a():
...   return inspect.currentframe()
... 

>>> inspect.getframeinfo(a())
Traceback(filename='<stdin>', lineno=2, function='a', code_context=None, index=None)
>>> b = inspect.getframeinfo(a())
>>> b.function
'a' 
```

另一种方法，但仍然依赖于实现，是使用 gc 模块（垃圾收集器）来获取对所述代码对象的引用。

```
>>> import gc
>>> from types import FunctionType
>>> def a(): pass
... 
>>> code = a.__code__

>>> [obj for  obj in  gc.get_referrers(code) if isinstance(obj, FunctionType)  ][0]
<function a at 0x7f1ef4484500>
>>> 
```

-- 这适用于 Python 3 - 对于 Python 2 应该替换`__code__`为`func_code`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-24T09:53:09.063

您可以检索函数对象作为模块或类的属性：

```
import inspect
import sys

def frame_to_func(frame):
    func_name = frame.f_code.co_name
    if "self" in frame.f_locals:
        return getattr(frame.f_locals["self"].__class__, func_name)
    else:
        return getattr(inspect.getmodule(frame), func_name)

def tracefunc(frame, event, arg):
    if event in ['call', 'return']:
        func_obj = frame_to_func(frame)
        print(f"{event} {frame.f_code.co_name} {func_obj.__annotations__}")

def add(x: int, y: int) -> int:
    return x+y

if __name__ == '__main__':
    sys.settrace(tracefunc)
    add(1, 2)
    sys.settrace(None) 
```

输出： `call add {'x': <class 'int'>, 'y': <class 'int'>, 'return': <class 'int'>}`

该解决方案的灵感来自这个[问题](https://stackoverflow.com/questions/54656758/get-function-object-from-stack-frame-object/61405016#61405016)。

# apache - 如何使用 mod_rewrite 指向特定目录？

> ID：12787112
> 
> 赞同：1
> 
> 时间：2012-10-08T18:05:58.083
> 
> 标签：apache, .htaccess, mod-rewrite

注意：我不能在我的服务器上使用 apache“virtualhosts”，但我可以使用 mod_rewrite。

我有两个指向同一个 IP 地址的域。

他们都去目录`/public_html/www/`。

制作域之一的“主”目录的最佳方法是什么`/public_html/www/somethingelse/`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:10:44.133

听起来像是一个共享托管计划：通常会为您提供域重定向工具，允许您将其他域指向主帐户下的现有路径：

域 1：/public_html/www

域 2：/public_html/www/domain2

域 3：/public_html/www/domain3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T06:58:29.600

在文档根目录的 htaccess 文件中添加以下内容：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} www.domain2.com [NC]
RewriteCond %{DOCUMENT_ROOT}/somethingelse%{REQUEST_URI} -d [OR]
RewriteCond %{DOCUMENT_ROOT}/somethingelse%{REQUEST_URI} -f
RewriteRule ^(.*)$ /somethingelse/$1 [L] 
```

# java - 在 Java EE 环境中添加 DateFormatProvider 或动态添加

> ID：12787113
> 
> 赞同：2
> 
> 时间：2012-10-08T18:06:04.990
> 
> 标签：java, localization

我需要一些特殊的自定义语言环境`DateFormatProviders`。我可以在运行时添加`DateFormatProvider`-implementation 而不`extension-jar`在or 中添加吗？`java.ext.dirs-path`

我们正在使用`Oracle Weblogic 10.3.x`和部署我们的应用程序作为 ear。Java EE 或 Weblogic 是否为此提供了一种机制？

# magento - Magento 模块影响报价的顺序

> ID：12787117
> 
> 赞同：0
> 
> 时间：2012-10-08T18:06:17.117
> 
> 标签：magento, checkout, cart

我有一个模块（不是我创建的），如果满足某些条件，它会获取报价并应用折扣。这本身就可以正常工作。购物车规则本身也可以正常工作。

但是，在应用内置 Magento 购物车（总价）规则之前，我需要自定义模块应用相关折扣。就目前而言，Magento 首先应用，然后是自定义应用，导致 Magento 折扣在不应该存在的情况下。

什么控制模块的顺序，因此我将如何指定不同的顺序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:17:36.423

Magento 具有`collectTotals`功能性（我相信这是复合模式的实现）。它的基本作用是按顺序处理每个指定的*Totals Collectors*并调用它的`collect()`方法。

您的模块的总收集器很可能在`SalesRule`一个（具有代码**折扣**）之后被调用。所以你需要做的：打开`config.xml`自定义折扣模块的配置文件，找到xpath *config/global/sales/quote/totals/[模块别名]*并添加（或更改如果存在）指令`<before>discount</before>`

这样，您就可以订购自定义模块的总收集器，以便在此之前应用折扣`SalesRule`。

# twitter-bootstrap - Bootstrap 2.1.1“可折叠”未在 IE 中首次打开

> ID：12787119
> 
> 赞同：7
> 
> 时间：2012-10-08T18:06:24.853
> 
> 标签：twitter-bootstrap

第一次单击以在 IE 7/8/9 中打开引导程序“可折叠”手风琴时，它不会打开。其他人遇到这个或可以弄清楚为什么？

谢谢

* * *

jsfiddle 演示：http: [//jsfiddle.net/pWU4n/7/](http://jsfiddle.net/pWU4n/7/)

```
<div class="accordion category-list-accordion">
    <div id="category-5" class="accordion-group" style="display: block; ">
        <div class="accordion-heading">
            <a class="accordion-toggle" data-toggle="collapse">
                CLICK ME TWICE THE FIRST TIME TO OPEN IN IE
            </a>
        </div>
        <div id="category-5-accordion" class="accordion-body collapse">
            <div class="accordion-inner span33">
                "Bootstrap was made to not only look and behave great in the latest desktop browsers (as well as IE7!)"
             </div>
        </div>
    </div>
</div> 
```

```
$(document).ready(function() {
    $("#category-5").click(function() {
        $("#category-5-accordion").collapse("toggle");
    });
}); 
```

`<head>`包括：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/js/bootstrap.min.js"></script>
<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/css/bootstrap-combined.min.css" rel="stylesheet"> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-08T18:44:06.040

这个问题与 IE 无关：这将发生在任何不支持**转换**的浏览器上（或者如果它被停用）。

那是因为**你需要先初始化插件**。如果不这样做，它会在第一次单击时初始化并切换折叠：默认初始化会切换折叠（[doc](http://twitter.github.com/bootstrap/javascript.html#collapse)），如果没有转换，折叠会连续切换两次而不会被看到。

这是你应该做的：

```
$("#category-5-accordion").collapse({toggle: false});
$("#category-5").click(function() {
    $("#category-5-accordion").collapse("toggle");
}); 
```

[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/pWU4n/8/)

# android - WebView：未调用 WebViewClient.onPageStarted 方法

> ID：12787120
> 
> 赞同：8
> 
> 时间：2012-10-08T18:06:28.213
> 
> 标签：android, android-widget

请帮我解决这个问题。我正在使用 webview。我面临两个问题：

1.  当 webview 加载新页面时。不调用 onPageStarted 方法，但调用 onPageFinished 方法。
2.  方法 :mWebView.canGoBack() 总是返回 false。

如果您知道原因或有任何建议，请帮助我。注意：我正在使用：服务器端（Web 端）的 Jquery Mobile。

这些是我的 Webview 客户端和 Webview 初始化源代码。

```
 private class MyWebViewClient extends WebViewClient{

    private static final String TAG = "MyWebViewClient";

    @Override
    public void onPageFinished(WebView view, String url) {
        super.onPageFinished(view, url);
        Log.v(TAG, "onPageFinished url: " + url);

    }

    @Override
    public void onLoadResource(WebView view, String url){
        Log.v(TAG, "onLoadResource url: " + url);
    }

    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        super.onPageStarted(view, url, favicon);
        Log.v(TAG, "onPageStarted url: " + url);

    }

    @Override
    public void onReceivedError(WebView view, int errorCode,
            String description, String failingUrl) {
        super.onReceivedError(view, errorCode, description, failingUrl);
        Log.v(TAG, "onReceivedError url: " + failingUrl);

    }

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        Log.v(TAG, "shouldOverrideUrlLoading : " + url);

        return false;
    }

} 
```

这是我的 webview 初始化：

```
 mWebView =  new WebView(getActivity());
        mWebView.setWebViewClient(new MyWebViewClient());
        WebSettings webSettings = mWebView.getSettings();
        webSettings.setJavaScriptEnabled(true);

        String link = getArguments().getString(PARAMETER_LINK);
        boolean deleteWVData = getArguments().getBoolean(PARAMETER_DELETE_DATA);
        if(deleteWVData)
            mWebView.clearCache(true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-06T12:13:48.027

我相信只有在加载**新**`onPageStarted`页面时才会调用。Egg 你在 index.html 上并导航到 contact.html

 **大多数移动框架（如 jquery mobile、ionic、angualar）将停留在 index.html 页面上并且只修改内容。因此，不会调用 onPageStarted，但会调用 onPageFinished

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-30T12:03:36.070

index.html#xxxxxxx index.html#aaaaaa

被 webview 认为是相同的，在这种情况下，onPageStarted 不会被调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-01T11:31:24.567

更新 webview 并检查。

当webview的当前版本是60.0.3112.107而手机中的版本是57.x.xxxx.xxx时，我遇到了这个问题**

# java - JTextPane 和水平线

> ID：12787121
> 
> 赞同：1
> 
> 时间：2012-10-08T18:06:30.400
> 
> 标签：java, swing, jtextpane

我将如何继续在 JTextPane 中创建水平线元素？只是一个可能由 View.paint(Graphics) 绘制的矩形，它覆盖了 JTextPane 的整个宽度，并且具有任意高度。我还需要能够动态删除这些元素。

我试图通过创建一个自定义编辑器工具包来解决这个问题，该工具包有一个自定义视图工厂，它为线元素返回一个“Horizo​​ntalLineView”......但我必须承认这一切都让我有点过头了！例如，如何为此 Horizo​​ntalLineView 创建元素？到目前为止，我只使用了 insertString() ......而且我在任何地方都没有看到“addElement”方法......任何指向正确方向的指针都会很棒。

我会偷偷问另一个问题：谁能推荐一本深入介绍 JEditorPane/JTextPane 的好书？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T09:23:57.870

或者当您需要“样式化 hr”时，您需要使用 div。

JEdi​​torPane 仅支持 HTML 2.1，html 2.1 中 hr 的属性是 noshade 和 size（不是样式）。

因此，对于更花哨的外观或 1px 大小的 hr，请使用此...

```
<div style=\"height: 1px; font-size:0; background:blue;\"></div> 
```

或者

```
<div style='height: 1px; font-size:0; background:blue;'></div> 
```

其中背景是 hr 颜色，高度是 hr 大小。font-size:0 属性很重要，否则 JEditor 窗格默认使用文本换行，这将覆盖 height 属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T18:18:03.250

如果 HTML 内容是可接受的，您可以执行以下操作：

```
JTextPane textPane = new JTextPane();
textPane.setContentType("text/html");
textPane.setText("<html>Some Text Above The Line<hr size=5>Some Text Below</html>"); 
```

# cuda - 使用共享内存计算 cuda 中像素的大小

> ID：12787122
> 
> 赞同：1
> 
> 时间：2012-10-08T18:06:31.700
> 
> 标签：cuda, shared-memory, sift

我正在做一个学校项目，我们在 cuda 中运行 sift 算法。我有一点要根据其邻居（A，B，C，D）的值来计算图像的每个像素（X）的幅度值：

```
 A
B  X  C
   D 
```

我设法通过使用全局内存来实现它，因为我可以轻松地从输入数组中获取我想要的值。

但是现在我想通过首先将输入数组放入共享内存来实现它，但是我很难让线程将正确的像素放在共享内存上。我必须考虑图像边界上的填充。

我知道我需要比要放入其中的图像部分更多的共享内存，以便包含填充，但我不知道我的线程块是否应该包含比共享内存空间更多或更少的线程以及如何指定什么读书。如果有人能给我一个关于如何思考这个问题的一般想法，我可以从那里得到它......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:25:48.357

我提供了一个通过灰度图像并应用 sobel 过滤器的代码：（Sobel 是一个类似于你的邻居（A，B，C，D）函数的过滤器）

```
#define QUANTUM_TYPE short
__global__ void sobel_gpu(QUANTUM_TYPE *img_out, QUANTUM_TYPE *img_in, int WIDTH, int HEIGHT){
    int x,y;
    x=blockDim.x*blockIdx.x+threadIdx.x;
    y=blockDim.y*blockIdx.y+threadIdx.y;
    QUANTUM_TYPE LUp,LCnt,LDw,RUp,RCnt,RDw;
    int pixel;

    if(x<WIDTH && y<HEIGHT){
        LUp = (x-1>=0 && y-1>=0)? img_in[(x-1)+(y-1)*WIDTH]:0;
        LCnt= (x-1>=0)? img_in[(x-1)+y*WIDTH]:0;
        LDw = (x-1>=0 && y+1<HEIGHT)? img_in[(x-1)+(y+1)*WIDTH]:0;
        RUp = (x+1<WIDTH && y-1>=0)? img_in[(x+1)+(y-1)*WIDTH]:0;
        RCnt= (x+1<WIDTH)? img_in[(x+1)+y*WIDTH]:0;
        RDw = (x+1<WIDTH && y+1<HEIGHT)? img_in[(x+1)+(y+1)*WIDTH]:0;
        pixel = -1*LUp  + 1*RUp +
                -2*LCnt + 2*RCnt +
                -1*LDw  + 1*RDw;
        pixel=(pixel<0)?0:pixel;
        pixel=(pixel>MAXRGB)?MAXRGB:pixel;
        img_out[x+y*WIDTH]=pixel;
    }
} 
```

该代码适用于全局内存并安全地处理边界。我的完整代码读取 BMP 图像并对其应用过滤器并将生成的 BMP 存储回磁盘。它可在[此处](http://lashgar.hourb.com/files/edge_detection.tar.gz)获得（集成了 CPU 和 GPU 实现，适用于 Linux 和 Windows）。

您可以通过一些工作将其转换为共享内存样式。首先，您应该决定给每个块分配多少任务。然后将任务分解为多个共享内存接收器/排水管。CUDA SDK 中的矩阵乘法示例为您提供了一个完美的想法。

# typescript - 跨多个文件的 TypeScript 内部模块

> ID：12787125
> 
> 赞同：5
> 
> 时间：2012-10-08T18:06:36.687
> 
> 标签：typescript

假设在 Animal.ts 中使用 TypeScript 进行以下类定义：

```
module Animals
{
    export class Animal { }    
} 
```

如果我想在单独的文件中创建一个 Dog 类，请在 Dog.ts 中使用以下代码：

```
module Animals
{
    export class Dog extends Animal { }
} 
```

当前范围内不存在名称“Animal”，这是我在类定义 Dog 中遇到的错误。

将以下行添加到 Dog.ts

```
/// <reference path="Animal.ts"/> 
```

修复了编译错误，但是如果两个类都在同一个模块中定义，为什么这是必要的？

换句话说，我希望模块声明跨越文件，每个类或接口定义在它们自己的文件中。这甚至是最佳实践吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T18:31:33.533

首先，如果你一次编译这两个文件

```
tsc Animal.ts Dog.ts 
```

一切都会好起来的。编译 Typescript 文件时，需要让编译器知道哪些文件实际上构成*了程序*。这可以通过使用源引用`///`或通过向编译器提供所有文件来完成。`java`这与其他语言（例如`CLASSPATH`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T18:11:15.767

/// 引用是必要的，因为编译器需要知道 Animal 以某种方式定义的位置。如果你不告诉它去哪里看，它就无法知道它在哪个源文件中。

我不确定这本身是否是最佳实践（需要更多地了解您的应用程序），但我几乎不认为这是一种反模式，所以我认为您可以随意这样做。TypeScript 中的模块特意是开放式的，以允许这种模式。

# c# - 用户报告数据网格中的错误 - 更多条目随机突出显示

> ID：12787127
> 
> 赞同：0
> 
> 时间：2012-10-08T18:06:37.910
> 
> 标签：c#, wpf, xaml, datagrid

我的应用程序的用户报告了应用程序中的数据网格问题：

有时，当他想选择一个条目时，会选择更多条目（虽然不是连续选择，他发送了一个屏幕截图） - 但是，我根本无法重现这一点。

这是我的数据网格的声明：

```
<DataGrid x:Name="mGlossaryGrid" ItemsSource="{Binding GlossaryItems}"   AutoGenerateColumns="False"
                                  HeadersVisibility="None" GridLinesVisibility="None" IsSynchronizedWithCurrentItem="True"
                          SelectionMode="Single" SelectionUnit="FullRow" IsReadOnly="True" KeyboardNavigation.DirectionalNavigation="Cycle"
                                  ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                                  SelectedCellsChanged="mGlossaryGrid_SelectedCellsChanged_1">

private void mGlossaryGrid_SelectedCellsChanged_1(object sender, SelectedCellsChangedEventArgs e)
    {
        try
        {
            var cell = e.AddedCells.First();
            mGlossaryGrid.ScrollIntoView(cell.Item);
        }
        catch
        {
        }
    } 
```

有谁知道是什么导致了这个错误？

谢谢你的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:57:55.360

作为一种猜测，我会假设它们被作为重复项进行相等性测试，因此由于存在数据（或参考？）相等性，因此它们被认为是相同的并被选中。检查所选数据的相似性并寻找趋势。

# c# - c# 和日历：如何选择一天（引发 SelectedDaysChanged 事件）

> ID：12787129
> 
> 赞同：0
> 
> 时间：2012-10-08T18:06:44.663
> 
> 标签：c#, calendar

我正在使用 .NEt 4.0 (C#) 并且我有一个日历控件。我有 SelecteddaysChanged 事件，但是当我在日历中单击某一天时，该事件没有上升，所以我认为 SelectedDays 属性确实没有改变。

我有日历的属性单一日期选择模式，但我尝试了其他选项但事件没有上升。

我希望当用户使用鼠标或键盘选择一天时，触发 SelectedDaysChanged 事件，因为我需要对数据库进行查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:51:57.570

好吧，问题是在命令的绑定中，我在视图模型中写错了属性命令。

谢谢。

# php - 如何使用 Network Solutions ssl 代理修复错误

> ID：12787142
> 
> 赞同：0
> 
> 时间：2012-10-08T18:07:22.070
> 
> 标签：php, javascript, http, ssl, joomla

我在使用代理 ssl 的网络解决方案方面遇到问题 我正在使用 Joomla 2.5 CMS [http://www.networksolutions.com/support/ssl-redirects/](http://www.networksolutions.com/support/ssl-redirects/) 在本文中他们有一些 JavaScript

```
<script language="javascript">
if (document.location.protocol != "https:")
{
document.location.href = "https://subdomain.yourdomain.com" + document.location.pathname;
};
</script> 
```

当我每次尝试使用此代码时，它只会强制您所在的页面转到 ssl，而不是所有指向其他页面的链接。所以它会停止页面。我想做的是强制某些页面超过 ssl。这是可能的还是我必须强制孔位超过 ssl。我知道我可以重写模板，以便它通过 ssl 调用所有内容，但看起来这将是更多的工作，那么它是值得的。任何输入都会很棒！谢谢你，贾斯汀

抱歉需要再指出一个想法，如果您转到上面的链接，它说因为网络解决方案使用代理 ssl，您无法使用 php 来检测它是否超过 ssl 女巫意味着当您在轨迹中启用强制 ssl 时面板孔位只是循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:10:12.030

您不需要使用该 JavaScript。只需链接到`https://subdomain.yourdomain.com/page-your-are-linking-to/`您想要 SSL 支持的任何时候。无论如何，这就是脚本正在做的事情。

# javascript - 启用/禁用输入

> ID：12787146
> 
> 赞同：0
> 
> 时间：2012-10-08T18:07:58.497
> 
> 标签：javascript, prototypejs

我正在尝试使用 启用和禁用单选按钮集`prototype`，具体取决于所选的另一组单选按钮。

对于前。第一组单选按钮，标记为“Wall Skins”，它们有 4 个选项 - 无 - 红色左 - 红色右 - 红色两者

第二组单选按钮，包含以下选项： - 无 - 左 - 右 - 两者

如果用户`None`从第一组中选择，在第二组中，除了`None`必须禁用之外的所有单选按钮。

如果用户`Left`从第一组中选择，在第二组中，除了`None`&之外的所有单选按钮都`Left`必须被禁用。

如果用户`Right`从第一组中选择，在第二组中，除了`None`&之外的所有单选按钮都`Right`必须被禁用。

如果用户`Both`从第一组中选择，在第二组中，除了`None`&之外的所有单选按钮都`Both`必须被禁用。

我编写了以下脚本来实现这一点，但这似乎并不完美，它只禁用了 2nd Set 中的单个单选按钮

```
$('options-skin-dd').select('input[type="radio"]').each(function(element) {
    element.observe('click', disableSkinInstall);
}); 
```

这`options-skins-dd`是包含第一组选项的容器。

```
function disableSkinInstall(event) {
        var element = Event.element(event);
        var rel = element.readAttribute('rel');
        $('options-skin-installation-labor-dd').select('input[type="radio"]').each(function(element) {
            element.enable();
        });

        if(rel.indexOf("none")!=-1) {
            $('options-skin-installation-dd').select('input[type="radio"]').each(function(element) {
                if(element.readAttribute('title')=="Right" || element.readAttribute('title')=="Both" || element.readAttribute('title')=="Left") {
                    element.disable();
                }
            });
        }
        if(rel.indexOf("-left")!=-1) {
            $('options-skin-installation-dd').select('input[type="radio"]').each(function(element) {
                if(element.readAttribute('title')=="Right" || element.readAttribute('title')=="Both") {
                    element.disable();
                }
            });
        } 
        if(rel.indexOf("-right")!=-1) {
            $('options-skin-installation-dd').select('input[type="radio"]').each(function(element) {
                if(element.readAttribute('title')=="Left" || element.readAttribute('title')=="Both") {
                    element.disable();
                }
            });
        } 
        if(rel.indexOf("-both")!=-1) {
            $('options-skin-installation-dd').select('input[type="radio"]').each(function(element) {

                if(element.readAttribute('title')=="Left" || element.readAttribute('title')=="Right") {
                    element.disable();
                }
            });
        }
    } 
```

我也尝试过使用`.select()`，但这似乎也不起作用。

请让我知道，这里出了什么问题。

# asp.net - 解压 zip 文件时出错

> ID：12787150
> 
> 赞同：0
> 
> 时间：2012-10-08T18:08:20.153
> 
> 标签：asp.net, wpf, windows, dll, dotnetzip

我在提取一些 Windows .xap 时遇到问题，它给了我下图中的错误显示..

![错误](../Images/0d65838bc5fc21123329ed7120bc3ef8.png)

我试图用新的 dotnetzip .dll 替换当前的 .dll ，但仍然面临同样的错误。有什么建议吗？

# c# - 将较小的图像放入较大的图像中。

> ID：12787153
> 
> 赞同：1
> 
> 时间：2012-10-08T18:08:42.253
> 
> 标签：c#, opencv, emgucv

我需要将较小的图像放在较大的图像中。较小的图片应该在较大的图片中居中。我正在使用 C# 和 OpenCV，有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-20T08:23:17.607

这对我有用

```
LargeImage.ROI = SearchArea; // a rectangle
SmallImage.CopyTo(LargeImage);
LargeImage.ROI = Rectangle.Empty; 
```

当然是 EmguCV

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-03T21:58:42.073

楼上的回答太好了！下面是一个在右下角添加水印的完整方法。

```
public static Image<Bgr,Byte> drawWaterMark(Image<Bgr, Byte> img, Image<Bgr, Byte> waterMark)
    {

        Rectangle rect;
        //rectangle should have the same ratio as the watermark
        if (img.Width / img.Height > waterMark.Width / waterMark.Height)
        {
            //resize based on width
            int width = img.Width / 10;
            int height = width * waterMark.Height / waterMark.Width;
            int left = img.Width - width;
            int top = img.Height - height;
            rect = new Rectangle(left, top, width, height);
        }
        else
        {
            //resize based on height
            int height = img.Height / 10;
            int width = height * waterMark.Width / waterMark.Height;
            int left = img.Width - width;
            int top = img.Height - height;
            rect = new Rectangle(left, top, width, height);
        }

        waterMark = waterMark.Resize(rect.Width, rect.Height, Emgu.CV.CvEnum.INTER.CV_INTER_AREA);
        img.ROI = rect;
        Image<Bgr, Byte> withWaterMark = img.Add(waterMark);
        withWaterMark.CopyTo(img);
        img.ROI = Rectangle.Empty;
        return img;
    } 
```

# asp.net - 简单的按钮动作

> ID：12787156
> 
> 赞同：1
> 
> 时间：2012-10-08T18:08:51.543
> 
> 标签：asp.net, .net, vb.net

我正在使用下面的代码来确定页面是否应该显示图像。该按钮有时“有效”，但有时需要单击 2 或 3 次才能显示图像。

我错过了什么吗？

```
 Private Sub btnViewAll_Click(sender As Object, e As System.EventArgs) Handles btnViewAll.Click
    If Session("fullPage") IsNot Nothing Then
        If CInt(Session("fullPage")) = 0 Then
            Session("fullPage") = 1
        Else
            Session("fullPage") = 0
        End If
    Else
        Session("fullPage") = 1
    End If
End Sub 
```

我在这里检查会话：

```
Protected Sub GridView1_RowDataBound(sender As Object, e As GridViewRowEventArgs) Handles gvFolders.RowDataBound

    If CInt(Session("fullPage")) = 1 Then
      ...load images....
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T18:17:22.233

我的猜测是你在引用它*之后设置你的 Session 变量。*

例如，如果您使用 Page_Load 中的变量，那么在第一次单击时，默认值将是`False`默认值（导致您不渲染图像）。Page_Load 事件完成后，click 事件处理程序将触发，将会话变量设置为`True`. 但是，由于 Page_Load 已经完成，直到再次调用 Page_Load（在第二次回发时）之后，您才能看到图像。

这只是当您没有密切关注页面生命周期时可能发生的事情的一个示例。由于我们看不到您的代码，因此无法确切知道发生逻辑错误的位置。

有关事件顺序的详细信息，请参阅[ASP.NET 页面生命周期。](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)

* * *

**编辑**
您可能需要将一些逻辑从 Page_Load 移动到[Page_LoadComplete](http://msdn.microsoft.com/en-us/library/system.web.ui.page.loadcomplete%28v=vs.100%29.aspx)事件。LoadComplete 通常是在处理完控件事件后进行数据绑定等的最佳位置。

*要在下面的评论中回答您的问题，会话处理实际上是在适当的位置。我看不到您在哪里打电话`GridView1.DataBind()`，但很可能是该代码不在正确的位置。将`DataBind`调用移至 LoadComplete 页面事件，您应该已设置好。*

# python - 如何在python中删除html标签中的文本？

> ID：12787157
> 
> 赞同：1
> 
> 时间：2012-10-08T18:08:54.523
> 
> 标签：python, html

> **可能重复：**
> [从python中的字符串中剥离html](https://stackoverflow.com/questions/753052/strip-html-from-strings-in-python)

在制作类似应用程序的小型浏览器时，我面临着拆分不同标签的问题。考虑字符串

```
<html> <h1> good morning </h1> welcome </html> 
```

我需要以下输出：['早上好'，'欢迎']

我怎么能在python中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T18:19:40.770

我会使用`xml.etree.ElementTree`：

```
def get_text(etree):
    for child in etree:
        if child.text:
           yield child.text
        if child.tail:
           yield child.tail

import xml.etree.ElementTree as ET
root = ET.fromstring('<html> <h1> good morning </h1> welcome </html>')
print list(get_text(root)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:10:50.773

您可以使用 pythons html / xml 解析器之一。

美丽的汤很受欢迎。lmxl 也很受欢迎。

以上是您也可以使用标准库的第三方包

[http://docs.python.org/library/xml.etree.elementtree.html](http://docs.python.org/library/xml.etree.elementtree.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T18:29:44.573

我会使用 python 库[`Beautiful Soup`](http://www.crummy.com/software/BeautifulSoup/)来实现你的目标。在它的帮助下，这只是几行：

```
from bs4 import BeautifulSoup
soup = BeautifulSoup('<html> <h1> good morning </h1> welcome </html>')
print [text for text in soup.stripped_strings] 
```

# xaml - Windows 8\. Metro 应用程序。XAML 异步绑定

> ID：12787158
> 
> 赞同：4
> 
> 时间：2012-10-08T18:08:55.267
> 
> 标签：xaml, binding, asynchronous, microsoft-metro

问题在于将长时间操作 getter 绑定到 UI 控件。例如，如果我有这样的属性：

```
public string ButtonText
{
    get
    {
        Task.Delay(3000).Wait();
        return _buttonText;
    }
    set
    {
        _buttonText = value;
    }
} 
```

并将其在 XAML 中绑定到 UI 控件，例如：`Content="{Binding ButtonText}"`UI 线程将被阻止。WPF 中有一个`Binding.IsAsync`属性允许在后台加载绑定的数据，但 Metro 框架中没有这样的属性。

有人对如何在 Metro 应用程序中进行异步绑定有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-08T21:29:08.227

微软故意改变了一堆这样的事情，以鼓励你不要在你的属性 getter/setter 中做那些需要你异步获取属性的事情。不阻塞 UI 线程的“新”方法是执行类似`await Task.Delay(3000)`而不是使用`Binding.IsAsync`. `await`阻止执行，但不阻止线程（正是你想要做的）。

`await`这是有关 .NET 4.5 上 C# 中的关键字的更多信息的页面。页面底部的示例很好地说明了您的代码应该是什么样子。

[http://msdn.microsoft.com/en-us/library/hh156528.aspx](http://msdn.microsoft.com/en-us/library/hh156528.aspx)

# windows - 什么是 AWT 开发的最佳 Eclipse 插件？

> ID：12787160
> 
> 赞同：1
> 
> 时间：2012-10-08T18:09:08.890
> 
> 标签：windows, eclipse, plugins, awt

我想使用 Eclipse 和 AWT 来利用 MS Windows 重量级 UI 组件。我需要尽快开发一个高级用户 UI。我对 Eclipse 很满意。任何人都可以推荐一些插件，这些插件将超越或至少与 Developer Studio 的开发能力相媲美，同时提供对 Windows 中可用的大量 UI 组件的访问权限？TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:44:05.320

AWT 不是要走的路。它不会让您访问许多更复杂的 Windows 控件。AWT 中可用的控件集基于 Java 支持的所有平台本机可用的控件，这不是一个非常丰富的集合。很长一段时间以来，AWT 没有太多的发展。您应该将其视为已弃用的框架。

对于 Java 桌面应用程序开发，有两个突出的框架：Swing 和 SWT。Swing 控件以 Java（非本机）呈现。SWT 控件在可用的地方是原生的，在不可用的地方呈现。

[SWT](http://www.eclipse.org/swt/)

有关表单构建器编辑器插件，请参阅[WindowBuilder](http://www.eclipse.org/windowbuilder/)。

# objective-c - 一次设置所有 UITextField 的样式，而不是在每个 ViewController 中设置样式？

> ID：12787162
> 
> 赞同：6
> 
> 时间：2012-10-08T18:09:12.553
> 
> 标签：objective-c, ios, uitextfield, uitextview

我正在尝试像这样设置所有文本字段的样式：

```
CGRect frameRect2 = _lastname_field.frame;
frameRect2.size.height = 30;

_lastname_field.font = [UIFont fontWithName:@"AppleGothic" size:15];
_lastname_field.frame = frameRect2;
_lastname_field.backgroundColor= [UIColor whiteColor];
_lastname_field.layer.cornerRadius = 5.0;
[_lastname_field.layer setBorderColor: [[UIColor grayColor] CGColor]];
[_lastname_field.layer setBorderWidth: 1.0];
_lastname_field.clipsToBounds = YES; 
```

那个领域看起来很棒。唯一的问题是，整个应用程序中有超过 50 个文本字段。有没有一种简单的方法可以以相同的方式为所有这些设置样式？其中一些甚至还没有被合成/命名。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-08T18:48:23.413

1）如果您**在代码**中创建文件，我将创建一个具有如下接口的工厂类：

```
@interface MyTextFieldFactory : NSObject
+ (UITextField*)createStyledTextField;
@end 
```

2）如果您**使用 Interface Builder**创建您的 TextFields ，您可以在 UITextField 上编写一个类别，该类别仅实现`awakeFromNib:`. 在那里你可以进行所有的定制。这不需要更改代码，也不需要更改 nib 文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T18:14:37.183

子类 UITextField 并在 initWithFrame 方法中添加您的自定义。在调用 super 的自定义类中添加 initWithCoder 方法并返回 [self initWithFrame:[self frame]]。然后在 Interface Builder 中为每个文本字段更改类。

它会是这样的：

```
// MyUITextField.h
@interface MyUITextField : UITextField {
    // Your IVars
}

@property (retain, readonly) float value;
@end

// MyUITextField.m
@implementation MyClass

- (id)initWithCoder:(NSCoder *)decoder {

    [super initWithCoder:decoder];
    return [self initWithFrame:[self frame]];
}

- (id)initWithFrame:(CGRect)frame {

    self = [super initWithFrame:frame];
    if (self) {
        // Your customization
    }
}

@end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T18:13:32.990

您应该能够对除图层内容之外的所有属性执行此操作...

在您的 AppDelegate 中添加一个类似...的方法

```
- (void)changeAppearances
{
    [[UITextField appearance] setFont:[UIFont fontWithName:@"AppleGothic" size:15]];
    [[UITextField appearance] setBackgroundColor:[UIColor whiteColor]];
} 
```

等等。

这将为您的应用程序中的所有 UITextField 实例设置外观。（只要您不在代码中覆盖它们）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T18:26:33.893

好的，如果外观不起作用，那么您的下一个最佳选择是编写一个类别来为您执行此操作。

子类化是可能的，但并不理想，因为有可能覆盖你不应该覆盖的东西（反之亦然）。

将文件添加到您的项目并选择类别类型并将类设置为 UITextField。

在类别中添加一个类似...的功能

```
- (void)configureTextFieldWithFrame:(CGRect)frame; 
```

然后在 .m 文件中，您可以...

```
- (void)configureTextFieldWithFrame:(CGRect)frame
{
    self.font = [UIFont fontWithName:@"AppleGothic" size:15];
    self.frame = frame;
    self.backgroundColor= [UIColor whiteColor];
    self.layer.cornerRadius = 5.0;
    [self.layer setBorderColor: [[UIColor grayColor] CGColor]];
    [self.layer setBorderWidth: 1.0];
    self.clipsToBounds = YES;
} 
```

然后你只需要`#import UITextField+Configure.h`（或任何你的类别被称为。

然后在您的代码中将您的代码替换为...

```
[_lastname_field configureTextFieldWithFrame:frameRect2]; 
```

这将运行您的类别功能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T18:36:04.537

我同意 Fogmeister 对在代码中创建的文本字段的看法。但是，如果您在 Storyboard 中布置文本字段，则该方法将不起作用（因为每个字段都明确定义了其属性）。但是有一种简单的方法可以奏效。

右键单击您的故事板并“打开为..”源代码。这将 SB 的 XML 表示置于编辑器窗口中。在那里，您可以使用编辑器（或复制到您选择的 XML 编辑器）全局（和/或有选择地）更改文本字段属性。

公平的警告，如果您在 SB 中引入错误导致项目无法编译，则可能会终止您的项目 - 所以要非常小心并确保您有 SB 的备份。但是，如果您在每次更改后进行检查，则此技术可以很好地工作。

搜索“ `<textField`”可以找到类似这样的内容：

```
<textField opaque="NO" clipsSubviews="YES" contentMode="scaleToFill" contentHorizontalAlignment="left" contentVerticalAlignment="center" borderStyle="roundedRect" placeholder="name" minimumFontSize="17" clearButtonMode="whileEditing" id="F9N-Tb-KTd">
                            <rect key="frame" x="176" y="301" width="472" height="31"/>
                            <autoresizingMask key="autoresizingMask" flexibleMaxX="YES" flexibleMaxY="YES"/>
                            <fontDescription key="fontDescription" type="system" pointSize="14"/>
                            <textInputTraits key="textInputTraits" autocapitalizationType="words" enablesReturnKeyAutomatically="YES"/>
                            <connections>
                                <action selector="changeName:" destination="4" eventType="editingDidEnd" id="bLg-iM-m8a"/>
                            </connections>
                        </textField> 
```

找到一个具有您喜欢的 fontDescription 属性的文本字段，以及一个不具有您喜欢的 fontDescription 属性的文本字段。然后将要更改的 fontDescription 属性替换为好的相应属性。请务必将您的更改限制在字体、大小和背景等内容上。不要更改 id、rect 或任何其他需要对文本字段唯一的内容。

我希望这对你有用，它对我来说是一种非常方便的技术，可以确保我所有的文本字段都有一致的排版。

（要恢复正常视图，“打开为...”界面生成器 - 故事板）

祝你好运！

# ruby - 这段代码中 row[/\w+/] 的目的是什么？

> ID：12787163
> 
> 赞同：1
> 
> 时间：2012-10-08T18:09:26.567
> 
> 标签：ruby, arrays, ruby-on-rails-3, map, block

`row[/\w+/]`在以下情况下，这条线到底在做什么？

```
fields = rows.shift.map{ |row| 
  row[/\w+/]
} 
```

我知道第一个值是从*rows*中删除的，它的值都被传递到块中并被从块返回的值替换。但是`[/\w+/]`对价值有什么影响？在这种情况下，每一行都是一个字母数字字符串数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T18:16:01.083

两个斜杠之间的任何内容都是[正则表达式](http://www.ruby-doc.org/core-1.9.3/Regexp.html)。在这种情况下，`\w`匹配任何单词字符（`A-Z`、和），并且`a-z`表示1 个或多个字符。因此，此代码将在给定字符串中找到第一次出现的单词并丢弃其余单词。`0-9``_``+`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T18:19:34.427

您可以[在此处](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-5B-5D)`[]`查看字符串索引运算符的工作原理。

例如，如果您传递一个数字 ( `row[5]`)，它会返回一个包含位置 5 的字符的子字符串（0 是第一个）。但是当使用正则表达式而不是数字时，它会返回与正则表达式匹配的第一个子字符串。

在这种特殊情况下，正则表达式匹配一个或多个单词字符 AZ、az、0-9 和 _

```
"abcd efg hij"[/w+/] #=> "abcd"
"abcd_efg hij"[/w+/] #=> "abcd_efg" 
```

# c++ - C++中类的排序向量

> ID：12787165
> 
> 赞同：2
> 
> 时间：2012-10-08T18:09:50.110
> 
> 标签：c++, class, sorting, vector

我在使用排序功能时遇到了一些问题......这是我的代码：

```
class Parola {
public:
    string s;
    int repetition;
    bool operator()(const Parola *x, const Parola *y) {
        return x->repetition > y->repetition;
    }
};

int main(int argc, char** argv) {
    ...
    vector<Parola> p;
    ...
    some insertions here
    ...
    sort(p.begin(), p.end(), Parola());
    ...
    return 0;
} 
```

为什么我不能在没有错误的情况下编译它？非常感谢！

PS：我只会向您展示超过五十个错误的前三行：

```
/usr/include/c++/4.2.1/bits/stl_algo.h: In function 'const _Tp& std::__median(const _Tp&, const _Tp&, const _Tp&, _Compare) [with _Tp = Parola, _Compare = Parola]':
/usr/include/c++/4.2.1/bits/stl_algo.h:2795:   instantiated from 'void std::__introsort_loop(_RandomAccessIterator, _RandomAccessIterator, _Size, _Compare) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<Parola*, std::vector<Parola, std::allocator<Parola> > >, _Size = long int, _Compare = Parola]'
/usr/include/c++/4.2.1/bits/stl_algo.h:2866:   instantiated from 'void std::sort(_RandomAccessIterator, _RandomAccessIterator, _Compare) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<Parola*, std::vector<Parola, std::allocator<Parola> > >, _Compare = Parola]' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T18:13:31.270

您的比较器采用指针，但向量包含`Parola`实例。你需要改变它。但最简单的方法是实现小于比较运算符。

```
class Parola {
public:
    string s;
    int repetition;
};

bool operator<(const Parola& x, const Parola& y) {
    return x.repetition < y.repetition;
} 
```

然后你可以`sort`在没有第三个参数的情况下调用：

```
sort(p.begin(), p.end()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T18:40:59.007

为 OP 提供一些可供选择的选项：（注意：并非详尽无遗）

# 选项 1：内部运算符 <()

```
class Parola {
public:
    string s;
    int repetition;
    bool operator<(const Parola& x) const  
    {
        return repetition < x.repetition;
    }
} 
```

使用默认的 std::less<> 模板调用。

```
sort(p.begin(), p.end()); 
```

# 选项 2：内部功能运算符（）（）：

```
class Parola {
public:
    string s;
    int repetition;
    bool operator()(const Parola& x, const Parola& y) const  
    {
        return x.repetition < y.repetition;
    }
} 
```

正如 dasblinken 指出的那样，用可选的比较对象调用，很奇怪，但有效：

```
std::sort(p.begin(), p.end(), Parola()); 
```

# 选项 3：外部运算符 <()

```
bool operator <(const Parola& x, const Parola& y)
{
    x.repetition < y.repetition;
} 
```

这与 (1) 一样，使用默认的 std::less<> 比较器，但要求外部运算符也是 Parola 类的朋友，以便在声明为私有数据成员时访问私有数据成员。其用法同（1）。

# 选项 4：外部函子

```
class CompareParola
{
public:
   bool operator ()(const Parola& x, const Parola& y) const
   {
      return x.repetition < right.repetition;
   }
}; 
```

并由以下人员使用：

```
std::sort(p.begin(), p.end(), CompareParola()); 
```

与 (3) 一样，如果访问的成员是私有的，CompareParola 类必须是 Parola 的好友：

# 选项 5：外部函数

```
bool ParolaLess(const Parola& x, const Parola& y)
{
    return x.repetition < y.repetition;
} 
```

与外部运算符或外部函数类类似，这也需要与对象类成为朋友才能访问私有成员。像这样调用：

```
std::sort(p.begin(), p.end(), ParolaLess); 
```

# 选项 6：静态类函数

```
class Parola {
public:
    string s;
    int repetition;

    static bool Less(const Parola& x, const Parola& y)  
    {
        return x.repetition < y.repetition;
    }
}; 
```

这通常未被充分利用，并且具有访问所有对象成员变量的非常好的属性，包括私有变量（显然，它是用类定义的）。您可以通过以下方式使用它：

```
std::sort(p.begin(), p.end(), Parola::Less) 
```

请注意，这与 (1) 和 (2) 一样，将所有内容都保留在类中。

在所有这些中，我更喜欢（1）它的简单性，（4）它的独立性，但每个人都有自己的品味。有时 (5) 或 (6) 真的会派上用场（我是 (6) 的个人粉丝）。

如果您能想到更多并让代表对其进行编辑，请根据需要进行更新。请尽量让它们至少有点用=P

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T18:17:08.110

您的直接问题是您的比较运算符没有传递`Parola const*`对象而是`Parola const&`对象：迭代器被取消引用以获取实际比较的值。

下一个问题是您可能不应该尝试将您的比较对象捆绑到您的实际对象中：比较对象的行为并不像一个`Parola`对象。您想要一个单独的比较器，然后将其用于`std::sort()`：

```
sturct ParolaCompare {
    bool operator()(Parola const& p0, Parola const& p1) const {
        // return something defining a strict weak order on Parola objects
    }
};
// ...
std::sort(v.begin(), v.end(), ParolaCompare()); 
```

或者，您可以定义一个适合`operator<()`您的`Parola`对象：

```
bool operator< (Parola const& p0, Parola const& p1) {
    // again, a strict weak order on Parola objects
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-08T18:14:53.347

使运算符采用 const 引用而不是指针。IE

```
bool operator()(const Parola &x, const Parola &y) { 
    return x.repetition > y.repetition; 
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-08T18:16:14.483

通常，当您有一个希望 STL 为您排序的对象时，无论是使用 sort 方法，还是将其放入 std::set 中，您都需要一个 operator< 方法。

因此，最好使其成为类的成员。该方法的签名应该类似于： bool operator<(const Parola& left, const Parola& right)

你如何实现它取决于你的类本身。

# ios - 如何为依赖于关系的自定义 Core Data 属性发布通知？

> ID：12787167
> 
> 赞同：1
> 
> 时间：2012-10-08T18:10:00.430
> 
> 标签：ios, macos, cocoa, core-data, cocoa-bindings

我有一个`Client`与 具有多对多关系`Invoice`的属性，称为`invoices`。现在我写了一个自定义的只读属性`latestInvoice`，我想在我的界面中观察它：

```
- (MyInvoice *)latestInvoice
{
  NSArray *invoices = [self valueForKey:@"invoices"];
  NSSortDescriptor *sortDescriptor = [NSSortDescriptor
    sortDescriptorWithKey:@"date" ascending:NO];

  return invoices.count
    ? [invoices sortedArrayUsingDescriptors:@[sortDescriptor]][0]
    : nil;
} 
```

我注册`Client`为以下观察员`invoices`：

```
- (void)dealloc
{
  [self removeObserver:self forKeyPath:@"invoices"];
}

- (void)registerObservers
{
  [self addObserver:self forKeyPath:@"invoices" options:
    (NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld)
    context:NULL];
}

- (void)awakeFromInsert
{
  [super awakeFromInsert];

  [self registerObservers];
}

- (void)awakeFromFetch
{
  [super awakeFromFetch];

  [self registerObservers];
} 
```

我手动发布更改通知：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object
  change:(NSDictionary *)change context:(void *)context
{
  if ([keyPath isEqualToString:@"invoices"])
  {
    [self willChangeValueForKey:@"latestInvoice"];
    [self didChangeValueForKey:@"latestInvoice"];
  }
} 
```

这是观察依赖关系的核心数据属性的正确/无错误/首选方式还是我滥用框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:16:16.447

注册`latestInvoice`为 的依赖[键](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/KeyValueObserving/Articles/KVODependentKeys.html)。`invoices`

```
+ (NSSet *)keyPathsForValuesAffectingLatestInvoice {
    return [NSSet setWithObjects:@"invoices", nil];
} 
```

# drupal-7 - Drupal 7：AJAX 表单更新问题

> ID：12787171
> 
> 赞同：-1
> 
> 时间：2012-10-08T18:10:39.213
> 
> 标签：drupal-7, drupal-modules, drupal-forms

我在表单挂钩中定义了以下元素：

```
$form['touchpointdivision'] = array(
    '#type' => 'select',
    '#title' => t('Division'),
    '#options' => $divisions,
    '#required' => TRUE,
    '#ajax' => array(
        'event' => 'change',
        'wrapper' => 'department-wrapper',
        'callback' => 'touchpoints_dept_callback',
        'method' => 'replace'
    )
);

$form['touchpointdepartment'] = array(
    '#type' => 'select',
    '#title' => t('Department'),
    '#prefix' => '<div id="department-wrapper">',
    '#suffix' => '</div>',
    '#options' => _get_departments($selected),
    '#required' => TRUE
); 
```

这是回调：

```
function touchpoints_dept_callback($form, $form_state){
    return $form('touchpointdepartment');
} 
```

当我在第一个下拉列表中更改项目时，出现以下错误：

“致命错误：函数名称必须是第 203 行 /cmi/sites/all/modules/touchpoints/touchpoints.module 中的字符串”

我在这份声明中遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:00:26.433

哇，愚蠢的错误。在回调中，字段名应该在括号中而不是括号中。所以：

```
function touchpoints_dept_callback($form, $form_state){
    return $form('touchpointdepartment');
} 
```

应该

```
function touchpoints_dept_callback($form, $form_state){
    return $form['touchpointdepartment'];
} 
```

# visual-studio-2010 - Vistual Studio 给了我编译错误：太少的参数来调用

> ID：12787172
> 
> 赞同：0
> 
> 时间：2012-10-08T18:10:43.173
> 
> 标签：visual-studio-2010, compilation, compiler-errors

出于某种原因，我收到错误：'dlist_init'：调用的参数太少。这是我的主要内容。我看不出我的 dlist_init 有什么问题，或者我在 main.dlist_init 中使用它会初始化双向链表。函数在main之后的数据文件中。

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
//#include "bool.h"
#include "Dlinklist.h"
#include "DlistElmt.h"
#include "Dlist.h"
#include "Dlistdata.h"

   /**************************************************************************************************/

int main ( int argc, char *argv[] )
{
    FILE *ifp, *ofp;
    //char outputFilename[] = argv[2];
    int *hour, *min;
    Dlist *list;
    float *temp;
    char line[15];

    if ( argc != 3 ) /* argc should be 3 for correct execution */
    {
        /* We print argv[0] assuming it is the program name */
        printf( "usage: %s filename", argv[0] );
    }
    else 
    {
        // We assume argv[1] is a filename to open
        ifp = fopen( argv[2], "r" );

        if (ifp == 0 ){

            printf("Could not open file\n");
        }

        else{

            ofp = fopen(argv[2], "w");

            dlist_init(list);

            while (fscanf(ifp, "%d:%d %f ", &hour, &min, &temp) != EOF) {
            //while( fgets(line, 100, ifp)){
                puts(line);
                fprintf(ofp, "%s", line);
                //if(sscanf("%d:%d %df", &hour, &min, &temp)==3){

                //}
            }

/**************************************************************************************************/

            /*while (fscanf(ifp, "%d:%d %df ", &hour, &min, &temp) != EOF) {
                 printf("the tempeture is  %df at %d:%d\n", temp, hour, min);
                fprintf(ofp, "the tempeture is  %df at %d:%d\n", temp, hour, min);*/
/**************************************************************************************************/

            }

fclose(ifp);
fclose(ofp);

        }

    getchar();
} 
```

这是我的函数文件：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
//#include "bool.h"
#include "Dlinklist.h"
#include "DlistElmt.h"
#include "Dlist.h"
#include "Dlistdata.h"

/**************************************************************************************************/

 void dlist_init(Dlist *list){

    list->size = 0;
    list->head = NULL;
    list->tail = NULL;

}

void dlist_destroy(Dlist *list){

    int *time;
    int *time2;
    float *temp;

    while (list->size > 0){
        dlist_remove(list, list->head);
    }

}

int dlist_ins_next(Dlist *list, DlistElmt *element, int *time, int *time2, float *temp1){

        DlistElmt *new_element;

        if (element == NULL && dlist_size(list) != 0)
            return -1;
        if ((new_element = (DlistElmt *)malloc(sizeof(DlistElmt))) == NULL)
            return -1;
        new_element->hour = time;
        new_element->min = time2;
        new_element->temp = temp1;
            if (dlist_size(list) == 0) {

            list->head = new_element;
            list->head->prev = NULL;
            list->head->next = NULL;
            list->tail = new_element;

        }

        else {

            new_element->next = element->next;
            new_element->prev = element;

            if(element->next == list->tail)
                list->tail = new_element;
            else
                element->next->prev = new_element;
        }

        element->next = new_element;
        list->size++;

        return 0;

    }

  int dlist_ins_prev(Dlist *list, DlistElmt *element, int *time, int *time2, float *temp1){

    DlistElmt *new_element;

    if (element == NULL && dlist_size(list) != 0)
        return -1;

    if ((new_element = (DlistElmt *)malloc(sizeof(DlistElmt))) == NULL)
        return -1;

    new_element->hour = time;
        new_element->min = time2;
        new_element->temp = temp1;

    if (dlist_size(list) == 0){

        list->head = new_element;
        list->head->prev = NULL;
        list->head->next=NULL;
        list->tail = new_element;

    }

    else{

        new_element->next = element;
        new_element->prev = element->prev;

        if(element == list->head)
            list->head = new_element;
        else
            element->prev->next = new_element;

        element->prev = new_element;

    }

    list->size++;

    return 0;
    }
 int dlist_remove(Dlist *list, DlistElmt *element){

    if (element == NULL || dlist_size(list) == 0)
        return -1;

    if (element == list->head) {

        list->head = element->next;

        if (list->head == NULL)
            list->tail = NULL;
        else
            element->next->prev = NULL;
    }

    else{

        element->prev->next = element->next;

        if (element == list->tail)
            list->tail = element->prev;
        else
            element->next->prev = element->prev;
    }

    free(element);

    list->size--;

    return 0;

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:26:05.703

假定函数原型是在您的头文件之一中声明的 - 它是否与您提供的声明相匹配？

# typescript - TypeScript 不应发出类型 ref

> ID：12787176
> 
> 赞同：2
> 
> 时间：2012-10-08T18:10:45.827
> 
> 标签：typescript

当我尝试运行我的 TypeScript 应用程序时，我不断收到此错误：

不应发出类型参考。
该命令`"tsc -target ES5 "app.ts" "test.ts""`以代码 1 退出。

这就是我所得到的。甚至不是它发生的那一行。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:17:36.120

“不应发出类型 ref”是编译器本身可能引发的内部错误。通常这是因为编译器无法从程序中的语法错误中正常恢复，但其他时候完全有效的程序可能会导致此错误。无论如何，每当您看到此错误时，它就是一个错误！请在[Codeplex](http://typescript.codeplex.com/WorkItem/Create)上提交错误，注意附上我们重现问题所需的任何相关文件。有关如何提交错误的信息，请参阅[项目指南。](http://typescript.codeplex.com/wikipage?title=Guidelines&referringTitle=Home)

# jquery - jQuery 选择器

> ID：12787183
> 
> 赞同：0
> 
> 时间：2012-10-08T18:11:21.960
> 
> 标签：jquery

-我正在学习 Jquery。我不明白`$('<td/>')`这段代码中的这个选择器：

```
$('<td/>').insertAfter($(this)).text(height).css('border', 'thin solid red'); 
```

- 谁能告诉我这是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T18:14:46.420

`$('<td/>')`创建一个带有 tag 的 DOM 元素`td`。

`insertAfter($(this))`在元素之后附加`this`元素。

`.text(height)`更改`td`标签中的文本。

最后，对元素`.css('border', 'thin solid red');`应用红色边框。`td`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:15:04.943

`$('<td/>')`创建一个新的空白`<td>`元素并将其包装在 jQuery 对象中。

这将是相同的，就好像您在纯 javascript 中创建了元素，然后使用`$('.selector')`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T18:25:34.267

让我们把它分解成它的组成部分，也许这会更有启发性：

```
$('<td/>') // this is initializing a new DOM Node. At this point, however, it's not actually connected to anything, it's just a DOM Node hanging out in the DOM and not attached to the document flow.

.insertAfter($(this)) // now, this is telling jQuery to take that TD element you just created, and insert it after whatever $(this) evaluates to... assuming this is inside, say, a click handler, it would evaluate to the object that triggered the click event, and attach the TD element after "this" element.

.text(height) // says, "set the .text of your TD element to whatever is in the height variable" ... you're basically plugging text inside your TD element.

.css('border', 'thin solid red') // is telling jQuery to modify the TD's style, adding a style for border that is thin, solid and red. 
```

请参阅我在 jsFiddle 上汇总的示例，以了解其工作原理。 [http://jsfiddle.net/mori57/xLJHx/](http://jsfiddle.net/mori57/xLJHx/)

（如果您尝试使用我链接到的 jsFiddle，应该会出现一个有趣的后续问题，但我不想在这里搅浑水）

# sql-server - 无法保存图表，“字符串或二进制数据将被截断”

> ID：12787189
> 
> 赞同：0
> 
> 时间：2012-10-08T18:11:48.120
> 
> 标签：sql-server

我在数据库中建立了一堆与外键的关系。保存了关系和约束。但是当我将它们添加到图表时，我收到错误：“字符串或二进制数据将被截断”。我最初使用图表工具添加了关系。当我无法保存它时，我尝试重新打开图表并创建一个新图表。在这两种情况下，我都无法保存图表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T18:16:41.533

删除所有图表，然后删除 sysdiagrams 表。下次您尝试添加图表时，它应该会提示您重新创建它。

我认为 SQL 2005 和 SQL 2008 之间存在不兼容，其中 2005 年的字段较小，因此如果您尝试添加 2008 年图表，您会遇到截断问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-02-01T18:12:26.517

我有同样的问题，上面的解决方案没有帮助。

为了解决这个问题，我使用 SQL Profiler 来捕获失败的语句。我手动运行以下语句（从 Profiler 获得）来获取错误：

```
--Note: I'm not including the full string of Definition here - it's 10200 characters long.  But, in my case, just a few characters was enough to reproduce the error.

exec dbo.[sp_creatediagram] @diagramname=N'Diagram_1'
                            ,@owner_id=1
                            ,@version=1
                            ,@definition=0xD0CF11E0A1B11AE1

/*Returned:
    Msg 8152, Level 16, State 10, Procedure sysdiagrams_InsertAudit, Line 5
    String or binary data would be truncated.
    The statement has been terminated.
*/ 
```

--我打开了以下跟踪选项。

```
DBCC TRACEON(460, -1);
GO

--Note, after turning on the above TRACE option, the sp_creatediagram statement will tell you where the issue occurred.

exec dbo.[sp_creatediagram] @diagramname=N'Diagram_2'
                            ,@owner_id=1
                            ,@version=1
                            ,@definition=0xD0CF11E0A1B11AE1

/*Returned:
    Msg 8152, Level 16, State 10, Procedure sysdiagrams_InsertAudit, Line 5
    String or binary data would be truncated.
    The statement has been terminated.
*/ 
```

就我而言，问题出在 sysdiagrams_InsertAudit 中，它将对图表的更改插入到 sysdiagrams_log 表中。要查看失败的语句，我运行：

`exec sp_helptext sysdiagrams_InsertAudit`

有问题的语句是“插入到 sysdiagrams_Log”。我将表 sysdiagrams_log 中定义列的类型/长度（该表在与图表相关的数据库中，它不是系统表，就像 sysdiagrams 一样）从 varbinary(1) 更改为 varbinary(max)。（这与 sysdiagrams 表中的类型/长度匹配）。

```
alter table sysdiagrams_log
    alter column definition varbinary(max) 
```

After this change, the sp_creatediagram statement worked. Note: If you use the SSMS designer to make the change, you may have to Disable the option in SSMS, "Prevent Saving Changes that require table recreate". This is found under, Tools, Options, Designers, Table and Database Designers.

Turn trace back off.

```
DBCC TRACEOFF(460, -1);
GO 
```

# linux - 使用 bash 替换文件中文本的正确方法

> ID：12787191
> 
> 赞同：1
> 
> 时间：2012-10-08T18:12:01.370
> 
> 标签：linux, bash, shell, grep, preg-replace

我有一个充满设置的配置文件。就像一堆设置。我想知道如何自动替换，例如：

我有`LF_ALERT_TO = ""`，我想添加一封电子邮件。

问题二：

我可以使用 opts 来获取电子邮件吗？例子：

```
./run --email e.mail@here.com 
```

我当前的代码布局：

```
wget http://www.configserver.com/free/csf.tgz
tar -zxvf csf.tgz
cd csf
./install.sh
(modifiy values in /etc/csf/csf.conf 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T18:24:46.780

如果我理解正确，您可以使用 sed 执行该任务，假设电子邮件存储在`$EMAILVAR`环境变量中：

```
sed -i -e "s/\\(LF_ALERT_TO[ \\t]*=[ \\t]*\"\\)[^\"]*\"/\\1$EMAILVAR\"/" config.txt 
```

在这里，我们告诉 sed 替换包含（按顺序）的字符串：

1.  `LF_ALERT_TO`
2.  一系列空格和/或制表符 ( `[ \t]*`)
3.  `=`
4.  另一个空格和/或制表符序列
5.  `"`
6.  `"`不是( `[^"]*`)的字符序列
7.  `"`

项目 1-5 放在反斜线括号之间。这形成了一个捕获组，因此它们匹配的内容存储在一个名为 的辅助“变量”`\1`中。

然后我们生成一个字符串，包括：

1.  `\1`， IE。与上述步骤 1-5 匹配的内容
2.  所需的电子邮件
3.  结束`"`（因为它没有被捕获）

我们使用`-i`命令中的标志来告诉 sed 就地编辑文件（即使用`config.txt`作为输入执行命令，然后将输出存储在同一文件的顶部）。

希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T18:28:46.510

如果你想`LF_ALERT_TO = "e.mail@here.com"`在你的 csf.conf

```
sed -i 's/LF_ALERT_TO = ""/LF_ALERT_TO = "e.mail@here.com"/g' csf.conf 
```

应该管用。

如果您想将电子邮件作为变量传递：

```
kent$  cat csf.conf
foo
LF_ALERT_TO = ""
foo
bar
whatever
kent$  em="e.mail@here.com" 

kent$  sed  "s/LF_ALERT_TO = \"\"/LF_ALERT_TO = \"$em\"/g" csf.conf 
foo
LF_ALERT_TO = "e.mail@here.com"
foo
bar
whatever 
```

和`sed -i "..." csf.conf will change the original file.`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T18:26:16.093

您需要在一个文件中替换吗？如果是这样，您可以考虑使用 vim。搜索/替换命令如下：

```
%s/LF_ALERT_TO = ""/LF_ALERT_TO = "email@email.com"/g 
```

如果您需要替换一堆文件，您可以考虑使用以下命令：

```
find path_to_find -iname "filemask" -exec sed -i 's/LF_ALERT_TO = ""/LF_ALERT_TO = "email@email.com/g" {} \; 
```

# unit-testing - 是否可以调整 clojure.test 的输出？

> ID：12787193
> 
> 赞同：7
> 
> 时间：2012-10-08T18:12:05.470
> 
> 标签：unit-testing, clojure

我有这个测试：

```
(ns opengltuts.core-test
  (:use clojure.test
        opengltuts.util)
  (:import (org.lwjgl.opengl
             GL11 GL12 GL13 GL14 GL15 GL20 GL21 GL30 GL31 GL32 GL33)))

(def gl-classes [GL11 GL12 GL13 GL14 GL15 GL20 GL21 GL30 GL31 GL32 GL33])

(deftest find-method-test
  (testing "find-method finds method in single class"
    (is (= (find-method "toString" Object)
           ["public java.lang.String java.lang.Object.toString()"])))
  (testing "find-method finds all methods in list of classes"
    (is (= (apply find-method "glShaderSource" gl-classes)
           (comment "Omitted a 'p' to trigger failure")
           ["ublic static void org.lwjgl.opengl.GL20.glShaderSource(int,java.nio.ByteBuffer)"
            "public static void org.lwjgl.opengl.GL20.glShaderSource(int,java.lang.CharSequence)"
            "public static void org.lwjgl.opengl.GL20.glShaderSource(int,java.lang.CharSequence[])"])))) 
```

现在我确保这失败了，我得到像

```
lein test opengltuts.core-test

FAIL in (find-method-test) (core_test.clj:14)
find-method finds all methods in list of classes
expected: (= (apply find-method "glShaderSource" gl-classes) ["ublic static void 
org.lwjgl.opengl.GL20.glShaderSource(int,java.nio.ByteBuffer)" "public static void 
org.lwjgl.opengl.GL20.glShaderSource(int,java.lang.CharSequence)" "public static void 
org.lwjgl.opengl.GL20.glShaderSource(int,java.lang.CharSequence[])"])
      actual: (not (= ("public static void org.lwjgl.opengl.GL20.glShaderSource(int,java.nio.ByteBuffer)" "public static void 
org.lwjgl.opengl.GL20.glShaderSource(int,java.lang.CharSequence)" "public static void 
org.lwjgl.opengl.GL20.glShaderSource(int,java.lang.CharSequence[])") ["ublic static void 
org.lwjgl.opengl.GL20.glShaderSource(int,java.nio.ByteBuffer)" "public static void 
org.lwjgl.opengl.GL20.glShaderSource(int,java.lang.CharSequence)" "public static void 
org.lwjgl.opengl.GL20.glShaderSource(int,java.lang.CharSequence[])"]))

Ran 1 tests containing 2 assertions.
1 failures, 0 errors.
Tests failed. 
```

我觉得这相当难以理解。而不是那样，我更喜欢输出如下：

```
<all that info stuff, like the name of the test>
Expected: [something]
Got: [something-else] 
```

事实上，我很难弄清楚我在与什么进行比较。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T01:25:58.733

`clojure.test`的报告可通过重新绑定`clojure.test/report`函数来配置。这在[命名空间的文档中](https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj)有所描述。您的函数将使用一系列事件映射调用，每个事件映射代表测试运行的某个阶段。[这里](https://github.com/clojure/clojure/blob/master/src/clj/clojure/test/junit.clj)`clojure.test`有一个在源代码中生成 JUnit 兼容输出的示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T18:21:46.247

Clojure 有几个流行的测试框架，clojure.test（您正在使用）很流行，尽管[Midje](https://github.com/marick/Midje)看起来它的输出更接近您正在寻找的内容。这是一个示例测试失败：

```
FAIL at (t_core.clj:13)
    Expected: "I am a test file fact"
      Actual: 3 
```

[https://github.com/marick/Midje/wiki/Migrating-from-clojure.test](https://github.com/marick/Midje/wiki/Migrating-from-clojure.test)

# javascript - HTTPRequest for XML - 仅在存在某个子子项时出现

> ID：12787195
> 
> 赞同：0
> 
> 时间：2012-10-08T18:12:08.357
> 
> 标签：javascript, html, xml

对，下面是一个简单的 javascript 请求，用于显示 XML 文档中的内容。

我有很多不同版本的 XML，它们都来自同一个地方，但有些结构略有不同，因此**KISCOURSE**标记内的某些元素没有**TITLE** - 当这种情况发生时，它会抛出我的编码结构并使其看起来错误。

有没有办法，如果在**KISCOURSE中找不到****TITLE**，则不要显示该**KISCOURSE**并移至下一个。

 ****以防万一，有关 XML 数据外观的示例，请参阅：[http ://universitycompare.com/wp-content/themes/blue-and-grey/XML/london_metropolitan_university.xml](http://universitycompare.com/wp-content/themes/blue-and-grey/XML/london_metropolitan_university.xml)

```
<script type="text/javascript">
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","http://universitycompare.com/wp-content/themes/blue-and-grey/XML/london_metropolitan_university.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 

var x=xmlDoc.getElementsByTagName("INSTITUTION");
for (i=0;i<x.length;i++)

var x=xmlDoc.getElementsByTagName("KISCOURSE");
for (i=0;i<x.length;i++)

  { 
  document.write("<div class='CourseArea'><h3 id='CourseTitle'>");

  // TITLE
  document.write(x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue);
  document.write("</h3>");
  document.write("<p class='ForP'>-&nbsp;&nbsp;");
  document.write(x[i].getElementsByTagName("MODE")[0].childNodes[0].nodeValue);     
  document.write("</p><div class='clear'></div>");

  // UCAS CODE
  document.write("<p id='ucascode'>");
  document.write("<b>UCAS CODE</b>&nbsp;&nbsp;&nbsp;");
  document.write(x[i].getElementsByTagName("UCASCOURSEID")[0].childNodes[0].nodeValue);
  document.write("</p>"); 

  // READ MORE LIGHTBOX
  document.write("<img src='<?php echo home_url(); ?>/wp-content/themes/blue-and-grey/images/info-icon.png' width='15' style='margin:0px 2px 0px -4px;' />");
  document.write("<a class='various' href='#ReadMore'>Read More</a>&nbsp;&nbsp;&nbsp;");

  // VISIT COURSE LINK
  document.write("<a class='courselink' href='");
  document.write(x[i].getElementsByTagName("CRSEURL")[0].childNodes[0].nodeValue);
  document.write("' target='_blank'>Visit course website</a>");
  document.write("</div>");

  }

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:04:46.547

如果缺少标题，您可以继续（跳到下一个循环迭代）：

```
var x=xmlDoc.getElementsByTagName("KISCOURSE");
for (i=0;i<x.length;i++)
{ 
  if(x.getElementsByTagName("TITLE").length == 0) continue; //this skips to the next.

  document.write("<div class='CourseArea'><h3 id='CourseTitle'>"); 
```****

# ios - UITabBarController 内的 UIView 未调用 viewDidLoad

> ID：12787198
> 
> 赞同：0
> 
> 时间：2012-10-08T18:12:34.503
> 
> 标签：ios, uiview, uitabbarcontroller, viewdidload

我有一个`UITabBarController`nib 文件。通常会预先添加 2 个标签栏项目。我通过将身份检查器中的一个和更改类名称拖到`UIViewController`我要加载的控制器上来添加第三个 tabBar 项目 - 比如说`abc`。当我运行我的程序时，除了 abc 之外，两个 viewController 都可以正常加载。显示的内容是在 IB 中设置的，我在 viewDidLoad 中编写的代码没有执行。我通过使用断点和 NSLog 语句来确认它。

但奇怪的是，当我尝试通过将它推入来单独加载这个笔尖时`UINavigationController`，它做得很好。

所以我的问题是当我尝试加载它时出了什么问题`UITabBarController`？为什么`viewDidLoad`不执行？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T22:13:49.670

我清除了整个产品，然后在重新启动 mac 后再次构建。现在一切正常。我的猜测可能是在构建时没有在缓存中进行新的更改，这是问题的根源。任何人都可以发表评论，说出他能想到的原因。我很想知道这一点；）

# scheme - 为什么方案找到用“定义”而不是“让”定义的变量

> ID：12787200
> 
> 赞同：2
> 
> 时间：2012-10-08T18:12:38.730
> 
> 标签：scheme, scope

所以这里有一个关于方案变量绑定的问题。假设我有以下功能：

```
(define undefinedTest (lambda (y) (list x y))) 
```

当在 Guile-Scheme 2.0.3 中运行时，这将警告 x 是一个未绑定的变量。如果我然后执行以下语句

```
> (let ((x 'something)) (undefinedTest 'else)) 
```

我会得到一个错误和调试它的选项。但是，如果我执行以下语句：

```
> (define x 'something)
> (undefinedTest 'else) 
```

我得到了（其他）的预期答案。为什么scheme在顶层定义时能够绑定x，但在let绑定时不能。这是因为当函数被定义时，它也是在顶层定义的，所以当scheme去搜索它最近的封闭环境时，let环境实际上并没有“封闭”，因为它仍然在“top-等级”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T18:46:01.347

Scheme 使用词法作用域，而不是动态作用域。所以sees 是从`x`该函数中词法可见的，在这种情况下，正如您已经注意到的那样，它是顶级范围。`undefinedTest``x`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:21:44.890

当`undefinedTest`被定义时，它包含了它被定义的环境；鉴于它是在顶层定义的，它只会“看到”它的形式参数`y`和全局环境 - 并且全局环境此时不包含`x`。之所以如此，是因为 Scheme 是词法范围的。

我在 Racket 中测试了问题中的代码，第一行因错误而失败：`expand: unbound identifier in module in: x`- 这意味着它甚至不是 Racket 解释的有效定义。

相同的示例适用于具有动态作用域的语言，Scheme 使用词法作用域（又名静态作用域）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T22:53:52.833

词法作用域是 Scheme 的核心特性。使用词法作用域，您总是可以分辨出哪些绑定对函数是可见的，因为它们是在定义函数时可见的绑定。相比之下，动态作用域倾向于产生难以预见且同样难以调试的意外。

# php - 使用 Passbook API 发送推送通知

> ID：12787206
> 
> 赞同：2
> 
> 时间：2012-10-08T18:12:57.067
> 
> 标签：php, json, apple-push-notifications, payload, passbook

我正在尝试使用 Passbook API 发送一些推送通知。我创建了以下发送到 APNS 服务器的 JSON 对象：

```
$payload = json_encode(array('aps' => array('alert' => 'Hello World!'))); 
```

但是，此消息没有到达。我一直在互联网上搜索如何在使用 Passbook 时执行此操作，但我找不到。当我发送这样的空有效负载时：

```
$payload = json_encode(new ArrayObject()); 
```

（更新）通知到达并且通行证得到更新。

那么，有谁知道我应该如何向 APNS 服务器发送自定义消息？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T14:45:42.433

Passbook 专门忽略了推送通知的有效负载。它会故意忽略它，因此如果错过推送通知，也不会错过更改。

Passbook 仅将通知用作一个信号，告诉它使用包含在推送通知签名的证书中的 PassIdentifier 更新通行证。

一旦它收到通知（同样，不管负载如何），它只会向 webserviceURL 发送一个 GET 请求，以获取与 DeviceID 和 serialNumber 关联的传递。如果之前请求更新，它还会添加一个查询参数 passUpdatedSince。如果这是第一次请求更新，则查询参数将不存在。

因此，总而言之，您实际上不应该通过推送通知将自定义 JSON 有效负载发送到 Passbook，这与您正在与自己的应用程序交谈的经典推送通知相反。

# c# - 如何在 MVC 4 中使用 HTML 锚点？

> ID：12787213
> 
> 赞同：2
> 
> 时间：2012-10-08T18:13:48.203
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

我有一个显示用户评论的网页。我默认页面显示最近的 10 个。在底部，当用户点击“显示更多”时，下方会出现另外 10 条评论。用户可以多次点击按钮，每次底部会多显示10条评论。问题是用户必须再次向下滚动。我想使用锚点来选择显示的最后一条评论。

在我看来，我有：

```
@{ int i = 1; }
@foreach (var item in Model) {
    <div class="Comment" id="Comment-@i">
        @Html.DisplayFor(modelItem => item.CommentText)
    </div>

    i++;
}

@{int numCommentsToDisplay = 10;}
@if (Session["numCommentsToDisplay"] != null) {
    numCommentsToDisplay = Convert.ToInt32(Session["numCommentsToDisplay"]); 
}

@Html.ActionLink("Show More", "Index", new { numCommentsToDisplay = numCommentsToDisplay + 10 }) 
```

我的控制器包含：

```
 public ActionResult Index(int numCommentsToDisplay = 10) {
     this.HttpContext.Session.Add("numCommentsToDisplay", numCommentsToDisplay.ToString());
     var latestComments = db.Comments.Take(numCommentsToDisplay).OrderByDescending(c => c.TimeStamp).ToList();

     return View(latestComments);
 } 
```

当用户第一次点击“显示更多”时，会显示20条评论，如何选择第11条评论？我已经设置了 ID 并手动导航到`http://localhost:49208/Comment?numCommentsToDisplay=20#Comment-11`了

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T19:59:18.590

我已经解决了我自己的问题哇！

我发现一个重载就`Html.ActionLink()`可以完成这项工作：

```
public static MvcHtmlString ActionLink(
    this HtmlHelper htmlHelper,
    string linkText,
    string actionName,
    string controllerName,
    string protocol,
    string hostName,
    string fragment,
    Object routeValues,
    Object htmlAttributes
) 
```

所以我将我的锚作为片段传递：

```
@Html.ActionLink("Show More", 
                 "Index", 
                 "Comment",
                 null,
                 null, 
                 String.Format("Comment-{0}", numCommentsToDisplay + 1),
                 new { numCommentsToDisplay = numCommentsToDisplay + 10},
                 null
                 ) 
```

我在这里找到了答案：[Include an anchor tag in an ASP.NET MVC Html.ActionLink](https://stackoverflow.com/questions/274586/including-an-anchor-tag-in-an-asp-net-mvc-html-actionlink)

谢谢大家的意见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:28:38.730

```
@Html.ActionLink(
        "Show More",                        
        "Index",                    
        new { numCommentsToDisplay = numCommentsToDisplay + 10 },          
        new { name = string.Format("Comment-{0}",numCommentsToDisplay) }      
    ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T18:30:11.470

我建议使用一些脚本客户端大小。

您正在使用 MVC4，我的建议是利用 WebApi。设置一个 api 控制器以返回分页评论并使用 Knockout.js 将结果呈现到页面中。

# templates - 自定义 tumblr 的新照片集布局

> ID：12787219
> 
> 赞同：0
> 
> 时间：2012-10-08T18:14:49.747
> 
> 标签：templates, layout, block, photo, tumblr

我正在尝试使用 tumblr 的自定义照片集布局。我在这里查看这篇文章以获取一些文档：[http ://staff.tumblr.com/post/7615038792/photoset-redux](http://staff.tumblr.com/post/7615038792/photoset-redux)

我试图弄清楚如何使用 js 数组块根据照片集中的图像数量创建新布局。老实说，我不完全确定这些功能应该如何工作，但如果有人可以提供一些答案或教程，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-25T12:30:43.007

[我在pastebin](http://pastebin.com/7Mee1spB)上找到了一些代码，这似乎是您在这里寻找的

我正在使用[在 Github Gists 上](https://gist.github.com/xles/6201497)发现的稍微混乱的代码（但提供了工作的 CSS/HTML） ，它将图像划分为行，

```
{block:Photoset}
    <script type="text/javascript">
        var layout = {JSPhotosetLayout};
        var photocount = 0;
        var photoclass = '', photos = [];
        for(var i=0;i<layout.length;i++) {
            switch(layout[i]) {
                case "1":
                    photoclass = 'col-lg-12';
                    break;
                case "2":
                    photoclass = 'col-lg-6';
                    break;
                case "3":
                    photoclass = 'col-lg-4';
                    break;
                case "4":
                    photoclass = 'col-lg-3';
                    break;
            }
            for(var j=0; j < parseInt(layout[i]); j++) {
                photos[photocount] = {
                    'class': photoclass,
                    rowsize: parseInt(layout[i])
                };
                photocount++;
            }
        }
        photocount = 0;
        var rowcount = 0;
    </script>

    {block:Photos}
        <script>
            if(rowcount == 0) {
                document.write('<div class="row">');
            }
        </script>

        <div id="photosetphoto" class="col-lg-3">
            <script>
                var photo = document.getElementById('photosetphoto');
                photo.className = photos[photocount].class;
                photo.removeAttribute('id');
                rowcount++;
            </script>
            <div class="thumbnail center">
                        {LinkOpenTag}
                <img src="{PhotoURL-1280}" alt="{PhotoAlt}" class="img-responsive">
                {block:Caption}
                    <div class="caption">
                        {Caption}
                    </div>
                {/block:Caption}
                        {LinkCloseTag}
            </div>
        </div>
        <script>
            if(rowcount == photos[photocount].rowsize) {
                document.write('</div>');
                rowcount = 0;
            }
            photocount++;                                        
        </script>
    {/block:Photos}
    {block:Caption}
        <div class="caption">{Caption}</div>
    {/block:Caption}
{/block:Photoset} 
```

然后只需要添加一点 Javascript 就可以将图像的大小调整为给照片集的总宽度的百分比

```
var photosetPics = document.querySelectorAll('div.col-lg-6 div.thumbnail img')
    for (i=0;i<photosetPics.length;i++) {
      var rowLength = photosetPics[i].parentNode.parentNode.parentNode.querySelectorAll('div div.thumbnail img').length;
      photosetPics[i].parentNode.parentNode.setAttribute('style','width:'+100/rowLength+'%')
} 
```

这实际上很丑陋，但它运行......显然可以使用上面描述不同“案例”的代码更优雅地完成，但老实说，我喜欢简单的 % 方法，并且可能会删除案例并坚持导航DOM 改为更改宽度。

最后，您需要使这些 div 内联（`display:inline-block`我测试时没有效果），

```
div.col-lg-12, div.col-lg-6, div.col-lg-4, div.col-lg-3 {
  float: left;
} 
```

使它成为一个社区维基，因为它不是我的代码，这显然是其他人构建的一个很好的资源 - 请贡献任何改进。

可能值得注意的是，这不会像 Tumblr 那样在仪表板上切断图像的高度（这适合我，但可能不是其他人正在寻找的）

# coffeescript - 退订页面更改

> ID：12787223
> 
> 赞同：1
> 
> 时间：2012-10-08T18:15:15.893
> 
> 标签：coffeescript, derbyjs

我正在开发一个 Derby 应用程序，但似乎无法弄清楚如何在页面休假时取消订阅。我一般都知道如何取消订阅，但挂起离开页面似乎是个问题。

我现有的代码看起来非常类似于：

```
get "/somePath", (page, model) ->
    someQueryHere = model.query("somecollection").someMotif()

    model.subscribe someQueryHere, (err, results) ->
        if err?
            ...
            return

        ...

    do page.render 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:21:46.463

你所说的“页面离开”到底是什么意思？当整个页面重新加载发生时，不需要取消订阅，socket.io 连接无论如何都会被终止。

另一方面，如果您想在客户端页面渲染上取消订阅模型，您可以尝试使用以下`render`事件之一：

```
app.on 'pre:render', ->
  model.unsubscribe someQueryHere 
```

请注意，渲染事件发生在路由执行之后，因此您应该注意不要取消订阅您刚刚订阅的查询/路径。

无论如何，更完整的示例将有助于更好地理解您的问题。

关于您的示例的另一个注意事项：`page.render()`应该在`subscribe`回调中调用。另外，为什么要使用`do page.render`而不是像这样简单地调用它：`page.render()`？

# visual-studio-2010 - VC10 unordered_set/map 移动构造函数错误？

> ID：12787229
> 
> 赞同：1
> 
> 时间：2012-10-08T18:15:26.887
> 
> 标签：visual-studio-2010, unordered-map, unordered-set, move-constructor

似乎 VC10 (Visual Studio 2010) 下 unordered_set/map 的移动构造函数在被调用后将右侧置于未定义状态，导致其他操作（如“插入”）惨遭失败。移动赋值运算符似乎工作正常。不过，正常的集合/映射似乎在所有情况下都表现正确。此外，在 VC11 (Visual Studio 2012) 下一切似乎都运行良好。

这是 VC10 下 _Hash 实现的错误还是我遗漏了什么？提前感谢您的任何投入！

```
#include <set>
#include <map>
#include <unordered_set>
#include <unordered_map>

std::set<int> si0;
std::unordered_set<int> usi0;

std::map<int, int> mii0;
std::unordered_map<int, int> umii0;

int _tmain(int argc, _TCHAR* argv[])
{
    si0.insert(0);
    si0.insert(1);
    si0.insert(2);
    std::set<int> si( std::move(si0) ); // fine!
    si0.insert(666);

    usi0.insert(0);
    usi0.insert(1);
    usi0.insert(2);
    //std::unordered_set<int> usi( std::move(usi0) ); // this seems to put usi0 to an undefined state, which makes 'insert' below cry!
    std::unordered_set<int> usi; usi = std::move(usi0); // this works!
    usi0.insert(666);

    mii0[0] = 0;
    mii0[1] = 1;
    mii0[2] = 2;
    std::map<int, int> mii( std::move(mii0) ); // fine!
    mii0[666] = 666;

    umii0[0] = 0;
    umii0[1] = 1;
    umii0[2] = 2;
    //std::unordered_map<int, int> umii( std::move(umii0) ); // this seems to put umii0 to an undefined state, which makes 'insert' below cry!
    std::unordered_map<int, int> umii; umii = std::move(umii0); // this works!
    umii0[666] = 666;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:06:58.747

好吧，在深入研究了VC10下的_Hash类实现，并与VC11的比较后，我注意到VC10下的_Hash类的移动构造函数从未初始化它的'_Max_bucket_size'成员，然后逻辑将这个未初始化的值交换为右侧（移动的 _Hash 实例），使右侧处于未初始化状态。

如果移动构造函数的右侧确实是一个临时对象，这很好，但我的逻辑依赖于移动构造函数来“重置”右侧对象，然后将重建右侧对象。

移动分配版本的工作原理是它需要以某种方式正确构造左侧对象（在这种情况下，默认构造，正确初始化'_Max_bucket_size'），并且当将其交换到右侧时，右侧不是处于糟糕的状态。然而，让右侧从左侧获取交换状态不符合移动赋值运算符的标准行为，它应该*重置*右侧，这不仅仅是纯粹的交换！

VC11 中的相应实现似乎已经纠正了该行为并符合标准。

# jquery - jquery css将输入大纲更改为无

> ID：12787231
> 
> 赞同：2
> 
> 时间：2012-10-08T18:15:36.590
> 
> 标签：jquery, html, forms, input, jquery-selectors

行。我知道你们中的一些人正在阅读这篇文章并且已经在问我为什么这么愚蠢以及为什么我不使用简单的 CSS 来做这件事。

```
input:focus { outline:none; } 
```

很简单......出于某种原因，wordpress 不允许这种更改发生 - 所以我正在恢复使用 jquery 来做这些肮脏的工作。

问题是我..我也不能让它工作....

[http://jsfiddle.net/h5KEm/](http://jsfiddle.net/h5KEm/)是 jsfiddle 上以下代码的链接：

```
<form action="" method="post">
<input id="optin" name="optin"><br />
<input type="submit" id="submit" name="submit" value="go">
</form>​

$('input[name=optin]').click(function() {
    $(this).css('outline', none');    
});​ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T18:17:48.927

只是一个错字（缺少引号）：

```
$('#optin').click(function() {
    $(this).css('outline', 'none');    
});​ 
```

请注意，我也将其替换`'input[name=optin]'`为，`'#optin'`因为当您拥有 id 时，使用 id 会更干净、更快捷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:26:17.237

也可以从点击事件改为焦点事件

```
$('input[name=optin]').focus(function() {
    $(this).css('outline', 'none');    
                }); 
```

# node.js - 在 Mocha 中测试异步抛出

> ID：12787235
> 
> 赞同：4
> 
> 时间：2012-10-08T18:15:58.707
> 
> 标签：node.js, mocha.js, chai

如果连接中断，我有一段代码会尝试重新连接到 Redis。如果无法重新建立连接，则会引发错误。我正在尝试测试引发错误的代码块，但我无法使用 mocha 和 chai 编写成功的测试。

我的测试如下所示：

```
 it('throws an error when a connection can\'t be established', function (done) {
        var c = redisClient.newClient();

        c.end();

        sinon.stub(redisClient, 'newClient', function () {
            return { connected: false };
        });
        redisClient.resetConnection(c, 2, 100, function (err) {
            done();
        });
        process.on('uncaughtException', function (err) {
            err.message.should.equal('Redis: unable to re-establish connection');
            done();
        });
    }); 
```

我试过使用 assert().throws 但在异步抛出发生之前失败了。出于同样的原因，try/catch 块也会失败。我的猜测是 mocha 捕获异常并重新抛出它，因为 uncaughtException 块确实得到了错误，但不是在 mocha 测试失败之前。有什么建议么？

编辑：

我曾尝试将调用包装在一个函数中：

```
var a = function() {redisClient.resetConnection(c, 2, 100, function () {
        done('Should not reach here');
    });
};
expect(a).to.throw(/unable to re-establish connect/); 
```

我得到以下信息：

```
✖ 1 of 5 tests failed:
1) RedisClient .resetConnection emits an error when a connection can't be established:
 expected [Function] to throw an error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T02:34:58.810

你在你的错误回调中调用'done()'，所以看起来你会断言你的错误。如果不是，请尝试将调用包装在另一个函数中：

```
var fn = function () {
    redisClient.resetConnection(c, 2, 100, function (err) { ...}

});

assert.throw(fn, /unable to re-establish connection/) 
```

# sql-server - SQL Server 文件格式

> ID：12787237
> 
> 赞同：0
> 
> 时间：2012-10-08T18:16:00.647
> 
> 标签：sql-server

我想问一下，如果我在一台电脑上创建了一个数据库，然后我想把它转移到另一台电脑上，那么那台电脑上是否也需要安装 SQL Server？或者我可以制作一个可以在任何 pc 上运行的 db 格式，如 exe 文件等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T18:20:20.717

不可以，Microsoft SQL Server 创建的文件只能由另一个（正在运行的）SQL Server 实例使用。但是，您可以将精简版的 SQL Server 引擎嵌入到您的 .exe 中

查看 Microsoft 网站以获取“SQL Server Express Edition”： http:
[//www.microsoft.com/sqlserver/en/us/editions/2012-editions/express.aspx](http://www.microsoft.com/sqlserver/en/us/editions/2012-editions/express.aspx)

或“精简版”： http:
[//www.microsoft.com/sqlserver/en/us/editions/2012-editions/compact.aspx](http://www.microsoft.com/sqlserver/en/us/editions/2012-editions/compact.aspx)

# numerical-methods - 二分法失去精度

> ID：12787238
> 
> 赞同：1
> 
> 时间：2012-10-08T18:16:06.207
> 
> 标签：numerical-methods, double-precision, bisection

我已经有一段时间没有出现在这个非常好的论坛上了。我正在学习数值分析课程，我被要求编写二分法，这是我的代码

```
/*
 * Bisection.cpp
 *
 *  Created on: 08/10/2012
 *  Author: BRabbit27
 *  École Polytechnique Fédérale de Lausanne - M.Sc. CSE
 */

#include <cmath>
#include <iostream>

using namespace std;

double functionA(double x) {
    return sin(2.0 * x) - 1.0 + x;
}

double functionB(double x) {
    return 2.0 * x / (1.0 + x / 1.5);
}

double bisectionMethod(double (*function)(double), double a, double b, double tolerance) {
    double x;
    double f;
    double error = tolerance + 1;
    int step = 0;
    double fa = (*function)(a);
    double fb = (*function)(b);
    //Check the conditions of a root in the given interval
    if (a < b) {
        if (fa * fb < 0) {
            while (error > tolerance) {
                step++;

                x = (a + b) / 2.0;
                f = (*function)(x);

                if (f == 0) {
                    cout << "Root found in x = " << x;
                    return x;
                } else if (f * fa > 0) {
                    a = x;
                } else if (f * fa < 0) {
                    b = x;
                }
                error = (b - a) / pow(2.0, (double) step + 1);
            }
            cout << "Root found in x = " << x;
            return x;
        } else {
            cout << "There not exist a root in that interval." << endl;
            return -1;
        }
    } else {
        cout << "Mandatory \"a < b\", verify." << endl;
        return -1;
    }
}

int main(int argc, char *argv[]){
    bisectionMethod(functionA, -3.0, 3.0, 10.0e-7);
} 
```

我唯一的问题是，当**x = 0.354492**时找到了根，而真正的根在**x=1/3**中，所以实际上我的双精度或容差不好。我不知道如何改进此代码以获得更好的结果。任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:33:06.100

[**真正的根*不是*x = 1/3！**](http://www.wolframalpha.com/input/?i=sin%282.0+*+x%29+%3D+1+-+x)它是 3.52288

> 罪（2.0 * x） - 1.0 + x = 0
> 
> 罪（2.0 * x）= 1 - x
> 
> 1 - 1/3 = 2/3
> 
> 罪（2/3）！= 2/3

* * *

你对宽容的定义让我觉得很奇怪。容忍度应该是`x`你愿意接受的范围吧？嗯，这很容易：`b - a > tolerance`。

```
double bisectionMethod(double (*function)(double), double a, double b, double tolerance) {
    if (a > b) {
        cout << "Mandatory \"a < b\", verify." << endl;
        return -1;
    }
    double fa = function(a);
    double fb = function(b);
    if (fa * fb > 0) {
        cout << "No change of sign - bijection not possible" << endl;
        return -1;
    }

    do {    
        double x = (a + b) / 2.0;
        double f = (*function)(x);

        if (f * fa > 0) {
            a = x;
        } else {
            b = x;
        }
    } while (b - a > tolerance);

    cout << "Root found in x = " << x;
    return x;
} 
```

# c - ANSI C: how can I include and then extract .exe file in my application (pack .exe into .exe)?

> ID：12787245
> 
> 赞同：2
> 
> 时间：2012-10-08T18:16:45.217
> 
> 标签：c, windows

I'm writing a program, which creates Windows service. So I need two .exe files - one for program, creating service and another for service itself. But I want to combine these two files into one. I have the following idea - open .exe file, which I want to pack (service application) in text editor and then copy its contents to some string. Then I need to create an empty .exe file in required directory and write the string to this file. But I suppose that's not a good idea. What is the best way to solve my problem?

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:47:04.803

For fun I wrote a "launcher" program that uses your method. It works, I tested it with zoomin.exe as the payload.

Once you've created the launcher executable, open both it and the payload file (zoomin.exe in my case) in [Notepad++](http://notepad-plus-plus.org/), and copy (using the Edit | Paste Special | Copy Binary Content and Paste Binary Content menu options).

You can find whereabouts in the launcher file the payload goes by searching in Notepad++ for "File Goes Here" and "End".

*Note, I do **not** recommend this in any way, it's fiddly, error-prone and can break easily with different compiler settings*. The way I have solved this in the past is, as already commented, to add the payload as a resource, which is much more maintainable.

```
#include <stdio.h>

#define SIZE_OF_ZOOMIN_EXE 11264
char buffer[SIZE_OF_ZOOMIN_EXE] = "File Goes Here";
char end_of_buffer[] = "End";

int main()
{
    FILE *fp = fopen("myzoomin.exe", "wb");
    fwrite(buffer, sizeof(buffer), 1, fp);
    fclose(fp);
    return 0;
} 
```

Here's an main() function for a self-installing service I wrote in C++ . In addition, the program allows the service to be run interactively.

```
int main( int argc, char *argv[] ) 
{ 
    SERVICE_TABLE_ENTRY   DispatchTable[] = 
    { 
        { SERVICE_NAME,      Eng3ServiceStart      }, 
        { NULL,              NULL          } 
    }; 

    try {
        if (argc >= 2) {
            if (argc >= 3)
                if (!(logfile = fopen(argv[2], "a")))
                    logfile = stdout;

            if (0 == _stricmp(argv[1], "install")) {
                DeleteEng3Service(); // ignore return value -- don't care if error
                return CreateEng3Service();
            }
            else if (0 == _stricmp(argv[1], "uninstall"))
                return DeleteEng3Service() ;

        } 

        // not installing or uninstalling, start the service,
        // passing it all the command-line arguments.
        if (!StartServiceCtrlDispatcher( DispatchTable ) ) {
            if (GetLastError() == ERROR_FAILED_SERVICE_CONTROLLER_CONNECT) {
                fprintf(logfile, "Failed to connect to service. Starting in console mode.\n");
                return svcmain(argc, argv);
            }
            throw sys_ex();
        }

    } catch (exception& ex ) {
        fprintf(logfile, ex.what());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T14:52:39.017

It should be possible to add binary data as a [resouce](http://msdn.microsoft.com/en-us/library/windows/desktop/ff468900%28v=vs.85%29.aspx) to a win32 executable.

Using the [win32 resource functions](http://msdn.microsoft.com/en-us/library/windows/desktop/ff468902%28v=vs.85%29.aspx) this should be feasible.

Googling brought up this: [http://www.codeproject.com/Articles/4221/Adding-and-extracting-binary-resources](http://www.codeproject.com/Articles/4221/Adding-and-extracting-binary-resources)

# r - 从列表中选择

> ID：12787246
> 
> 赞同：2
> 
> 时间：2012-10-08T18:17:02.377
> 
> 标签：r, list, selection

我正在对金融时间序列进行一些分析，并使用该函数`acf()`并将其应用于包含三种资产（VBLTX、FMAGX、SBUX）收益的矩阵列，如下所示：

```
ret.acf<-apply(ret.mat, 2, acf, plot=FALSE) 
```

现在，由于 acf 即使对于滞后 0 也会返回相关系数，所以我想消除所述滞后的结果。我做了：

```
ret.acf$VBLTX$acf[1]<-NA
ret.acf$FMAGX$acf[1]<-NA
ret.acf$SBUX$acf[1]<-NA 
```

有没有更简单的方法来做到这一点？类似的东西`ret.acf$ALL$acf[1]<-NA`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:47:17.090

另一种方法是使用`lapply`

```
set.seed(001) # generating some data.
ts1 <- ts(rnorm(48), start=1, end=48, frequency=1)
ts2 <- ts(rnorm(48), start=1, end=48, frequency=1)
ts3 <- ts(rnorm(48), start=1, end=48, frequency=1)

DF <- data.frame(ts1, ts2, ts3)

ACF <- apply(DF, 2, acf, plot=FALSE) 
lapply(ACF, function(x) replace(x$acf, x$acf[1], NA)) # which produces...
$ts1
, , 1

               [,1]
 [1,]            NA
 [2,]  0.0401834301
 [3,] -0.1866931442
 [4,] -0.1225960706
 [5,]  0.0959013348
 [6,] -0.2063631992
 [7,] -0.2094716551
 [8,] -0.0003712424
 [9,]  0.0498757174
[10,] -0.0704899925
[11,]  0.1237808090
[12,]  0.2161029368
[13,] -0.0286315310
[14,] -0.0159506012
[15,]  0.1319491720
[16,] -0.1252024533
[17,] -0.1513954171

$ts2
, , 1

              [,1]
 [1,]           NA
 [2,] -0.096231670
 [3,]  0.081568099
 [4,] -0.087374506
 [5,] -0.177902683
 [6,]  0.100911018
 [7,] -0.035838433
 [8,]  0.127940241
 [9,]  0.001778011
[10,]  0.108459764
[11,]  0.064023572
[12,] -0.219530394
[13,] -0.088579334
[14,]  0.044634396
[15,] -0.092443901
[16,]  0.109249684
[17,] -0.196140673

$ts3
, , 1

             [,1]
 [1,]          NA
 [2,] -0.14669482
 [3,]  0.37416707
 [4,]  0.11488186
 [5,]  0.17975602
 [6,]  0.03751673
 [7,] -0.04159624
 [8,]  0.13195658
 [9,] -0.29795151
[10,]  0.12091659
[11,] -0.25545587
[12,] -0.04727648
[13,] -0.02498085
[14,]  0.03857024
[15,] -0.02722294
[16,] -0.02330514
[17,]  0.08765119 
```

或者只是忽略 0 阶的自相关

```
lapply(ACF, '[', 1:16)

$ts1

Autocorrelations of series ‘newX[, i]’, by lag

     1      2      3      4      5      6      7      8      9     10     11     12     13     14     15     16 
 0.040 -0.187 -0.123  0.096 -0.206 -0.209  0.000  0.050 -0.070  0.124  0.216 -0.029 -0.016  0.132 -0.125 -0.151 

$ts2

Autocorrelations of series ‘newX[, i]’, by lag

     1      2      3      4      5      6      7      8      9     10     11     12     13     14     15     16 
-0.096  0.082 -0.087 -0.178  0.101 -0.036  0.128  0.002  0.108  0.064 -0.220 -0.089  0.045 -0.092  0.109 -0.196 

$ts3

Autocorrelations of series ‘newX[, i]’, by lag

     1      2      3      4      5      6      7      8      9     10     11     12     13     14     15     16 
-0.147  0.374  0.115  0.180  0.038 -0.042  0.132 -0.298  0.121 -0.255 -0.047 -0.025  0.039 -0.027 -0.023  0.088 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:20:55.117

您可以`for`通过元素循环来做到这一点：

```
for (col in names(ret.acf)) {
  ret.acf[[col]]$acf[1] <- NA
} 
```

# core-data - 3 UIViewControllers 中的核心数据

> ID：12787249
> 
> 赞同：0
> 
> 时间：2012-10-08T18:17:13.297
> 
> 标签：core-data, uiviewcontroller

这听起来像一个新手问题，但我有几个应用程序我坚持相同的概念。我有 3`UIViewController`秒：

*   第一个是根控制器`UITableView`（在另一个应用程序中是集合视图）
*   第二个是正常`UIViewController`的，在根控制器中显示所选项目的详细信息
*   第三个是编辑控制器，我想在其中编辑这个对象的内容，为此我重用了`AddViewController`我用来添加新对象的相同。

虽然，当我从 Edit Controller 返回到 Detail one 时，节省的费用很好，但 Detail 仍然显示旧数据。在我再次返回根目录之前，它不会更新数据。

我需要找到一种方法，以便在我从编辑视图热回时更新详细信息视图中的数据。这个问题在我现在正在处理的许多应用程序中都很麻烦。

任何解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:28:07.407

实现目标的最简单方法如下：在编辑控制器中，您需要对细节控制器说*“亲爱的细节控制器，我刚刚更新了内容，请刷新！”* .

怎么做？设置委托或通知（在这两种情况下，细节控制器都会响应或监听您的编辑控制器），然后对您感兴趣的数据执行新的新请求并更新界面。

PS我认为细节控制器不会更新，因为您已经在其`viewDidLoad`. 我错了吗？如果您提供一些代码，我们可以帮助您。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:05:45.497

好吧，这是根目录中 didselectrow 的代码

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    DetailnewViewController *detailViewController = [[DetailnewViewController alloc] initWithNibName:@"DetailnewViewController" bundle:nil];
    Card *selectedItem = (Card *)[[self fetchedResultsController] objectAtIndexPath:indexPath];
    detailViewController.itcard = selectedItem;
    detailViewController.managedObjectContext=self.managedObjectContext;
    detailViewController.view.backgroundColor=[UIColor orangeColor];
    [self.navigationController pushViewController:detailViewController animated:YES];
    [detailViewController release];
    [selectedItem release];

} 
```

这是 Detailnewviewcontroller 的代码&你是对的我正在执行 viewdidload 中的请求

```
- (void)viewDidLoad
{
    cardnumberlabel.text=itcard.CardNumber;
    namelabel.text=itcard.Name;
    phonelabel.text=itcard.phonenumber;
    websitelabel.text=itcard.site;
} 
```

感谢您的回复，我将尝试代表查看 c

# c# - 在 RichTextBox 的函数内部使用 IndexOf

> ID：12787253
> 
> 赞同：2
> 
> 时间：2012-10-08T18:17:26.300
> 
> 标签：c#, lua, indexof

我在试图找出我想要完成的逻辑时遇到了一些麻烦。我想做的是弄清楚如何使“事件”成为自动完成的项目，将其存储-稍后检查它是否存在或拼写错误。

我正在使用 C#。

这是流畅的解释：

功能：

```
function Test(Event)
end 
```

现在，我想做的是使用：

```
if(richTextBox1.Text.IndexOf("Event"))
{ 
    // Store item via Auto Complete Item
} 
```

一旦存储起来，我真的不知道如何获取函数的另一部分。比如，函数的内部有多大，直到它到达一个“结束”点。

比方说，这是一个函数的更大部分：

```
function Test(Event)
    local k = 0
    if k == 0 then
        Event:SetValue(k)
    end
end 
```

现在，当它位于“if”语句中时，我将如何获得“事件”？我使用“LastIndexOf”吗？

简而言之：

*   检查“事件”是否存在。
*   如果“事件”存在，则存储它。
*   一旦“事件”被存储，一旦最后一个“结束”被写入，我们就可以确保“函数”内部没有错误。

示例或书面文档将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:38:39.100

抱歉，我不确定下面的函数是做什么的，下面函数的第 2 行和第 3 行不需要在那里）。

```
function Test(Event)
    local k = 0
    if k == 0 then
        Event:SetValue(k)
    end
end 
```

但是，如果我理解正确并且您想要检索“事件”的值，您应该`return`这样使用..

```
function Test(Event)
    local k = 0
    if k == 0 then
        Event:SetValue(k)
    end
    return Event;
end 
```

但就像我说的那样，该函数将毫无用处，如下例所示：

```
local Event = "ham sandwich";
function Test(Event)
    local k = 0
    if k == 0 then
        Event = k
    end
    return Event;
end

print(Test(Event));
0 
```

这是因为，在您的函数中，k 始终为 0。

在写完很久之后，我又回到了这个问题上，我注意到我实际上并没有回答你的问题！

这是一个函数，它将存储 EVENT 并将 EVENT 传递给您以在最后一个“结束”之后使用。

```
local eventArray = {}; 
```

如果我们在此处将“eventArray”声明为本地（而不是在函数或代码块中），我们可以确信它可以在您的代码中的任何位置访问。

```
function GetEvent(event)
    eventArray = eventArray or {};
    if ( event == nil ) then
        return;
    else
        table.insert(eventArray, event);
        return event;
    end
end 
```

因为函数返回一个值，所以您可以从函数外部执行此操作：

```
local event1 = GetEvent(event); 
```

'event1' 现在将保存您的函数返回的值，当然，如果需要，该函数也会将其保存在表中以供以后使用。

如果您想存储事件，请确保您的表首先存在于函数的开头，即：eventArray = eventArray 或 {};

这可以防止意外删除表。

代码说'表等于它自己，但如果它不存在，它就等于一个表。如果您的表存在，那是无害的，因为它总是接受第一个真正的语句（在这种情况下是确实存在的“eventArray”）。

确保事件存在实际上很容易。如果 event 不可能有布尔值，你也可以使用： if ( not event ) then

我这么说是因为事件可能存在值为假。如果是这种情况并且您使用了 if ( not event )，那么它将认为该语句为 true，因为 event 的值为 false。这是因为 false 和 nil 不是一回事，不像某些语言。

请记住，假和“假”也不是一回事。第一个是一个布尔值（真或假），第二个只是一个文本字符串，上面写着“假”并且被视为任何其他字符串。

但为了安全起见，“if (event == nil)”通常是最好的。

使用 return 告诉函数就停在那里，因为继续没有意义。因此，如果事件不存在，该函数将提前结束。

休

# android - Android 从相机预览中解码位图

> ID：12787254
> 
> 赞同：3
> 
> 时间：2012-10-08T18:17:29.380
> 
> 标签：android, android-camera, bitmapfactory

我正在尝试从相机预览中获取位图图像，我将在执行人脸检测后对其进行一些处理并绘制一些叠加层。

看了一圈，发现onPreviewFrame取的字节数组不能直接解码成位图，需要用YuvImage转换成正确的像素格式，我就是这样做的：

```
@Override
public void onPreviewFrame(byte[] data, Camera camera)
{
    YuvImage temp = new YuvImage(data, camera.getParameters().getPreviewFormat(), camera.getParameters().getPictureSize().width, camera.getParameters().getPictureSize().height, null);

    ByteArrayOutputStream os = new ByteArrayOutputStream();
    temp.compressToJpeg(new Rect(0, 0, temp.getWidth(), temp.getHeight()), 80, os);

    Bitmap preview = BitmapFactory.decodeByteArray(os.toByteArray(), 0, os.toByteArray().length);

    /* DO SOMETHING WITH THE preview */

} 
```

问题是，“预览”对象不为空，但它显然不是有效的位图。在调试器上，我可以看到 mWidth 和 mHeight 都设置为 -1，这对我来说似乎是错误的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-15T05:56:09.490

> 在 API 级别 8 或更高级别上，您可以使用以下代码将图像非常快速地压缩为 JPEG。

```
public void onPreviewFrame(byte[] data, Camera arg1) {
    FileOutputStream outStream = null;
    try {
        YuvImage yuvimage = new YuvImage(data,ImageFormat.NV21,arg1.getParameters().getPreviewSize().width,arg1.getParameters().getPreviewSize().height,null);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        yuvimage.compressToJpeg(new Rect(0,0,arg1.getParameters().getPreviewSize().width,arg1.getParameters().getPreviewSize().height), 80, baos);

        outStream = new FileOutputStream(String.format("/sdcard/%d.jpg", System.currentTimeMillis()));  
        outStream.write(baos.toByteArray());
        outStream.close();

        Log.d(TAG, "onPreviewFrame - wrote bytes: " + data.length);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
    }
    Preview.this.invalidate();
} 
```

来自[https://code.google.com/p/android/issues/detail?id=823#c37](https://code.google.com/p/android/issues/detail?id=823#c37)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:13:45.103

这里有关于您的问题的详细信息： [https ://code.google.com/p/android/issues/detail?id=823](https://code.google.com/p/android/issues/detail?id=823)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-11T14:32:06.010

您正在使用`getPictureSize`而不是`getPreviewSize`:)

# ruby-on-rails - 将 abbr_month_names（和类似名称）与 I18n.l() 一起使用

> ID：12787258
> 
> 赞同：5
> 
> 时间：2012-10-08T18:17:37.413
> 
> 标签：ruby-on-rails, datetime, internationalization

我正在切换到rails，它有时会变得有点奇怪。安装 es.yml 文件后，我试图输出数据库的 DATETIME 列。如果我这样做：

```
= l(a.created_at, :format => :short) 
```

没关系。它以西班牙语格式打印一个不错的日期。但我对以这种方式使用**abbr_month_names感到困惑。**我已经尝试了很多不同的方式——相信我，我在这个问题上花了大约四个小时——但我找不到简单地输出月份名称的方法——让我们说“OCT.

我查看了很多关于 i18n 和日期格式的网站，但文章总是以 :format => :short 示例结尾，并且不关心显示日期的其他方式（好吧，有人还解释了如何使用 :long 格式...)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-22T13:05:07.710

德语语言环境的片段`de.yml`：

```
de:
  date:
    abbr_month_names:
    - 
    - Jan
    - Feb
    - Mär 
```

您可以通过 Rails 的翻译功能直接访问语言环境：

```
I18n.t :abbr_month_names, :scope => :date // returns ['', 'Jan', 'Feb', 'Mär'] 
```

因为`abbr_month_names`由多个条目（以连字符开头）组成，它将返回一个数组。例如，您可以通过以下方式获取当前的缩写月份：

```
(I18n.t :abbr_month_names, :scope => :date)[Time.now.month] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T18:33:54.703

您可以使用`a.created_at.strftime('%b')`此链接显示所有可能的日期时间部分：

[http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T00:44:57.807

在您的 YAML 文件中输入：

```
es:
  time:
    formats:
      abbr_month: "%b" 
```

然后在您看来，您应该可以使用它：

```
= l(a.created_at, :format => :abbr_month) 
```

取自这里： http: [//guides.rubyonrails.org/i18n.html#adding-date-time-formats](http://guides.rubyonrails.org/i18n.html#adding-date-time-formats)

# typescript - 引用构造函数

> ID：12787259
> 
> 赞同：18
> 
> 时间：2012-10-08T18:17:41.550
> 
> 标签：typescript

我想知道如何获得对类型构造函数的引用以将函数作为值传递。基本上，我想要一个泛型类型注册表，它允许通过调用泛型类型注册表实例的成员函数来创建实例。

例如：

```
class GeometryTypeInfo
{        
    constructor (public typeId: number, public typeName: string, public fnCtor: (...args: any[]) => IGeometry) {
    }
    createInstance(...args: any[]) : IGeometry { return this.fnCtor(args); }
    }
} 
```

之后：

```
class Point implements IGeometry {
    constructor(public x: number, public y: number) { }

    public static type_info = new GeometryTypeInfo(1, 'POINT', Point); // <- fails
    // also fails: 
    //    new GeometryTypeInfo(1, 'POINT', new Point);
    //    new GeometryTypeInfo(1, 'POINT', Point.prototype);
    //    new GeometryTypeInfo(1, 'POINT', Point.bind(this));
} 
```

任何人都知道是否可以引用类构造函数？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-08T18:27:13.507

您可以使用构造函数类型文字或带有构造签名的对象类型文字来描述构造函数的类型（通常参见语言规范的第 3.5 节）。要使用您的示例，以下内容应该有效：

```
interface IGeometry {
    x: number;
    y: number;
}

class GeometryTypeInfo
{        
    constructor (public typeId: number, public typeName: string, public fnCtor: new (...args: any[]) => IGeometry) {
    }
    createInstance(...args: any[]) : IGeometry { return new this.fnCtor(args); }
}

class Point implements IGeometry {
    constructor(public x: number, public y: number) { }

    public static type_info = new GeometryTypeInfo(1, 'POINT', Point);
} 
```

请注意 的构造函数参数列表中的构造函数类型文字`GeometryTypeInfo`，以及 的实现中的新调用`createInstance`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-06-30T19:40:11.327

`typeof YourClass`为您提供可用于类型注释的构造函数*类型。*

`YourClass`并且`this.constructor`是构造函数本身。所以，这段代码编译：

```
class A {}

const B : typeof A = A; 
```

`this.constructor`不被 TypeScript 识别为构造函数类型的值（这很有趣），所以在这种情况下，你需要使用一些作弊来强制转换它`any`

`new (<any> this.constructor)()`

而已。

# php - PHP 代码打印在加载的页面上

> ID：12787260
> 
> 赞同：0
> 
> 时间：2012-10-08T18:17:42.747
> 
> 标签：php

嗨，我最近重新安装了我的 Windows 并下载并安装了 xampp，但由于某种原因，当我尝试加载任何类型的 php 代码时，页面并没有加载到服务器上，而是打印在 HTML 页面上。这就是我的意思：

![在此处输入图像描述](../Images/234a5e114ee3e81431fc72fa12418458.png)

此图像来自加载页面的源代码。这是我正在使用的代码：

```
 <?php
        $a = "Maria";

        echo "We're going to Paris with $a";
        echo 'We\'re going to Paris with $a';      
    ?> 
```

我已经重新启动 xampp 3 次，它显示 apache 和 mysql 正在运行。谁能告诉我我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:27:34.893

1.  具有正确的文件扩展名
2.  配置 Web 服务器以识别 php。

# java - 具有巨大字符串响应的 Tomcat 性能

> ID：12787275
> 
> 赞同：1
> 
> 时间：2012-10-08T18:19:13.433
> 
> 标签：java, performance, spring, rest, scalability

我有一个 springRest Web 服务端点，它返回一个大小为 4MB 的字符串文本。当我们对此端点进行负载测试时，我们经常看到堆峰值并最终导致系统崩溃。我在想——当我们提出请求时，每个请求都由一个线程单独服务。我的假设是：因为字符串保存在全局静态变量中，所以每个线程获取 4MB 的副本，并且在大约 3000 个请求之后，堆全部被消耗并且系统崩溃，因为每个 4MB 的 3000 个线程大约是 12GB，因此系统内存不足。但这是我的假设。

我的问题：在处理请求的每个线程完成它的工作后，tomcat 不会回收内存吗？这与GC（垃圾收集）有关吗？在请求生命周期中 - 随着请求的到来，创建了一个线程（根据该请求）该线程是获取它自己的响应副本还是仅引用响应？如果将那个巨大的字符串响应复制到每个线程，那么这可能就是显示堆峰值的原因。当响应返回给客户端时，tomcat 如何回收该线程的资源？它什么时候做？是否在声明与 GC 相关的请求线程？

我观察到的另一个方面是：socketWrite0() 方法的延迟——这需要 70-95% 的响应时间。我认为这是一个瓶颈。那么在请求响应的流程中——谁写入套接字？线程？还是线程将响应交给tomcat，然后由tomcat编写？

如果你们中的任何一个可以给我一个提示或一个方面来看看将内存峰值与巨大的字符串响应联系起来，我真的很感激。多谢你们！

玫瑰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:32:59.520

如果您声明了一个静态最终字符串，则该变量应在线程之间共享。没有任何代码，几乎不可能说出发生了什么。

您是否尝试过使用[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)或[mat](http://www.eclipse.org/mat/)之类的分析工具？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T18:33:34.733

我假设你所做的是

```
response.getWriter().write(hugeString); 
```

如果这引起了问题，则应归咎于 tomcat，它可能从未想到过如此巨大的字符串。

您可以尝试将字符串切成更小的字符串，每次只写一个小字符串，例如

```
int N = hugeString.length();
int CHUNK = 8*1024;
for(int i=0; i<N; i+=CHUNK)
    int end = Math.min(i+CHUNK, N);
    writer.write( hugeString.substring(i, end) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T01:29:16.530

感谢大家给出的意见。这个问题非常神秘，因为它只有在系统受到多个用户的性能测试压力时才会出现。我们尝试对缓存客户端、缓存策略和缓存生存时间、连接超时进行不同的更改。

我们尝试改变算法。缓存更多数据以避免对遗留系统的昂贵调用。

我们尝试将数据结构从 JSONArray 更改为 String。

都没有帮助！！

最后我们发现是负载均衡器造成了问题。我们禁用了它，一切正常。

如果我有机会说一件事：企业系统的性能/可扩展性受到性能较差的组件的限制，因此请进行仔细的经验测试并在花时间找出正确的痛点后解决问题。不要跑来更改您的代码。

# php - 在PHP中将子数组项作为数组返回

> ID：12787276
> 
> 赞同：0
> 
> 时间：2012-10-08T18:19:16.287
> 
> 标签：php, arrays

我有以下 php 代码：

```
$menu_wood = array();
$menu_wood[] = array('link' => 'holz.php',
            'description' => 'Holzübersicht',
            'class' => isCurrentPage('holz.php')
            );
$menu_wood[] = array('link' => 'ahorn.php',
            'description' => 'Ahorn',
            'class' => isCurrentPage('ahorn.php')
            );
$menu_wood[] = array('link' => 'birke.php',
            'description' => 'Birke',
            'class' => isCurrentPage('birke.php')
            ); 
```

PHP 中是否有一个内置函数可以返回所有“链接”元素的数组，还是我需要编写自己的函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:21:24.417

我想您需要以这种方式使用自己的代码。

```
$myLinks = array();
foreach ($menu_wood as $menu)
    $myLinks[] = $menu['link']; 
```

如果你想写一个函数，你可以这样做：

```
function getPart($array, $arrIndex)
{
    $myLinks = array();
    foreach ($array as $single)
        $myLinks[] = $menu[$arrIndex];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:39:09.783

你`array_map`用来实现这个

```
$links = array_map(function($var){ return $var['link'];}, $menu_wood);
var_dump($links); 
```

输出

```
array
  0 => string 'holz.php' (length=8)
  1 => string 'ahorn.php' (length=9)
  2 => string 'birke.php' (length=9 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T18:22:41.783

你必须自己写，像这样：

```
foreach ($menu_wood as &$arr) {
   $links[] = $arr['link'];
}

var_dump($links); //will show all link values 
```

# java - Tomcat 7 ClassNotFoundException：org.apache.tomcat.JarScanner

> ID：12787277
> 
> 赞同：-3
> 
> 时间：2012-10-08T18:19:18.357
> 
> 标签：java, unix, tomcat, tomcat7

当我尝试启动我的应用程序时，我收到此错误。我已经验证 JarScanner 存在于 CATALINA_HOME 目录中，所以我不知道为什么它找不到它。有什么可能导致这个问题启动我的应用程序？

```
Oct 8, 2012 1:24:01 PM org.apache.catalina.core.ContainerBase addChildInternal
SEVERE: ContainerBase.addChild: start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/client]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:650)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1582)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NoClassDefFoundError: org/apache/tomcat/JarScanner
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:295)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.apache.catalina.core.StandardContext.getJarScanner(StandardContext.java:1025)
    at org.apache.catalina.startup.ContextConfig.processJarsForWebFragments(ContextConfig.java:1911)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1265)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more
Caused by: java.lang.ClassNotFoundException: org.apache.tomcat.JarScanner
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 33 more
Oct 8, 2012 1:24:01 PM org.apache.catalina.startup.HostConfig deployDescriptor
SEVERE: Error deploying configuration descriptor /software/sirsi/tomcat_sbox7/conf/Catalina/localhost/client.xml
java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/client]]
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:904)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:650)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1582)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Oct 8, 2012 1:24:01 PM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor /software/sirsi/tomcat_sbox7/conf/Catalina/localhost/custom.xml
Oct 8, 2012 1:24:01 PM org.apache.catalina.core.StandardContext setPath
WARNING: A context path must either be an empty string or start with a '/'. The path [custom] does not meet these criteria and has been changed to [/custom]
Oct 8, 2012 1:24:01 PM org.apache.catalina.startup.SetContextPropertiesRule begin
WARNING: [SetContextPropertiesRule]{Context} Setting property 'debug' to '0' did not find a matching property.
Oct 8, 2012 1:24:01 PM org.apache.catalina.core.ContainerBase addChildInternal
SEVERE: ContainerBase.addChild: start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/custom]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:650)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1582)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NoClassDefFoundError: org/apache/tomcat/util/scan/StandardJarScanner
    at org.apache.catalina.core.StandardContext.getJarScanner(StandardContext.java:1025)
    at org.apache.catalina.startup.ContextConfig.processJarsForWebFragments(ContextConfig.java:1911)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1265)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more
Oct 8, 2012 1:24:01 PM org.apache.catalina.startup.HostConfig deployDescriptor
SEVERE: Error deploying configuration descriptor /software/sirsi/tomcat_sbox7/conf/Catalina/localhost/custom.xml
java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/custom]]
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:904)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:650)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1582)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at     java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-08T18:30:47.670

jar 文件需要在类路径中（不在 CATALINA_HOME 中）。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-08T18:39:21.123

将您的 jar 放入您的 webapps 文件夹中，按照步骤操作

1.转到程序文件>Apache Software Foundation>Tomcat > Webapps。

1.  把你的罐子放在（你创建的目录）/WEB-INF /lib 目录中

然后在 localhost 上运行以执行它。

# ios - Xcode 4.5.1 中的 Tethered vs. Untethered

> ID：12787286
> 
> 赞同：2
> 
> 时间：2012-10-08T18:20:13.817
> 
> 标签：ios

我已经从[How to use device tokens in different ways in iphone? 中改编了这段代码？](https://stackoverflow.com/questions/1513580/how-to-use-device-tokens-in-different-ways-in-iphone)

```
- (void)sendProviderDeviceToken:(NSString *)tokenString {
NSString *udid = [[UIDevice currentDevice] uniqueIdentifier];

NSString *bundleID = [[NSBundle mainBundle] bundleIdentifier];
UIRemoteNotificationType type = [[UIApplication sharedApplication] enabledRemoteNotificationTypes];

NSString *data = [NSString stringWithFormat:@"udid=%@&token=%@&id=%@&type=%i", udid, tokenString, bundleID, type];
NSString *escapedData = [[data description] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

NSString *httpRequestURLString = [NSString stringWithFormat:@"http://%@/RegisterDevice.cgi?%@", kRegistrationURI, escapedData];
NSURL    *httpRequestURL       = [NSURL URLWithString:httpRequestURLString];
} 
```

并且当设备连接时代码可以正常工作，但是一旦我断开设备，它就会停止工作。

显然我缺少一些东西，但并不明显

这是我在这里的第一个问题。我希望我遵循正确的形式......

# android - Android：基于速度的 ViewPager 滚动

> ID：12787287
> 
> 赞同：44
> 
> 时间：2012-10-08T18:20:18.207
> 
> 标签：android, android-viewpager, gestures, onfling

ViewPager 现在滚动的方式是每个手势一个项目。无论是全屏快闪还是慢拖，对挥动手势的处理方式都是一样的；在最后一页只前进了一步。

是否有任何项目或示例可以添加基于速度的投掷，根据现有投掷的速度滚动多个项目（如果仍在进行中），如果投掷手势又宽又快，则进一步滚动？

如果没有从哪里开始这样的事情？

PS提供赏金。请不要参考 Gallery 或 Horizo​​ntalScrollView 的答案

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-19T23:54:33.730

这里的技术是扩展`ViewPager`和模仿寻呼机将在内部执行的大部分操作，并结合`Gallery`小部件的滚动逻辑。总体思路是监控投掷（以及速度和伴随的滚动），然后将它们作为假拖动事件提供给底层`ViewPager`. 如果您单独执行此操作，则将无法正常工作（您仍然只能获得一页滚动）。发生这种情况是因为假拖动在滚动有效的边界上实现了上限。您可以模拟扩展中的计算`ViewPager`并检测何时会发生这种情况，然后只需翻页并照常继续。使用假拖动的好处意味着您不必处理对齐页面或处理`ViewPager`.

我在动画演示示例中测试了以下代码，可从[http://developer.android.com/training/animation/screen-slide.html](http://developer.android.com/training/animation/screen-slide.html)下载，方法是将 ViewPager 替换`ScreenSlideActivity`为此`VelocityViewPager`（在布局`activity_screen_slide`和 Activity 中的字段中） ）。

```
/*
 * Copyright 2012 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and 
 * limitations under the License.
 * 
 * Author: Dororo @ StackOverflow
 * An extended ViewPager which implements multiple page flinging.
 * 
 */

package com.example.android.animationsdemo;

import android.content.Context;
import android.support.v4.view.ViewPager;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.GestureDetector;
import android.widget.Scroller;

public class VelocityViewPager extends ViewPager implements GestureDetector.OnGestureListener {

private GestureDetector mGestureDetector;
private FlingRunnable mFlingRunnable = new FlingRunnable();
private boolean mScrolling = false;

public VelocityViewPager(Context context) {
    super(context);
}

public VelocityViewPager(Context context, AttributeSet attrs) {
    super(context, attrs);
    mGestureDetector = new GestureDetector(context, this);
}

// We have to intercept this touch event else fakeDrag functions won't work as it will
// be in a real drag when we want to initialise the fake drag.
@Override
public boolean onInterceptTouchEvent(MotionEvent event) {
    return true;
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    // give all the events to the gesture detector. I'm returning true here so the viewpager doesn't
    // get any events at all, I'm sure you could adjust this to make that not true.
    mGestureDetector.onTouchEvent(event);
    return true;
}

@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velX, float velY) {
    mFlingRunnable.startUsingVelocity((int)velX);
    return false;
}

private void trackMotion(float distX) {

    // The following mimics the underlying calculations in ViewPager
    float scrollX = getScrollX() - distX;
    final int width = getWidth();
    final int widthWithMargin = width + this.getPageMargin();
    final float leftBound = Math.max(0, (this.getCurrentItem() - 1) * widthWithMargin);
    final float rightBound = Math.min(this.getCurrentItem() + 1, this.getAdapter().getCount() - 1) * widthWithMargin;

    if (scrollX < leftBound) {
        scrollX = leftBound;
        // Now we know that we've hit the bound, flip the page
        if (this.getCurrentItem() > 0) {
            this.setCurrentItem(this.getCurrentItem() - 1, false);
        }
    } 
    else if (scrollX > rightBound) {
        scrollX = rightBound;
        // Now we know that we've hit the bound, flip the page
        if (this.getCurrentItem() < (this.getAdapter().getCount() - 1) ) {
            this.setCurrentItem(this.getCurrentItem() + 1, false);
        }
    }

    // Do the fake dragging
    if (mScrolling) {
        this.fakeDragBy(distX);
    }
    else {
        this.beginFakeDrag();
        this.fakeDragBy(distX);
        mScrolling = true;
    }

}

private void endFlingMotion() {
    mScrolling = false;
    this.endFakeDrag();
}

// The fling runnable which moves the view pager and tracks decay
private class FlingRunnable implements Runnable {
    private Scroller mScroller; // use this to store the points which will be used to create the scroll
    private int mLastFlingX;

    private FlingRunnable() {
        mScroller = new Scroller(getContext());
    }

    public void startUsingVelocity(int initialVel) {
        if (initialVel == 0) {
            // there is no velocity to fling!
            return;
        }

        removeCallbacks(this); // stop pending flings

        int initialX = initialVel < 0 ? Integer.MAX_VALUE : 0;
        mLastFlingX = initialX;
        // setup the scroller to calulate the new x positions based on the initial velocity. Impose no cap on the min/max x values.
        mScroller.fling(initialX, 0, initialVel, 0, 0, Integer.MAX_VALUE, 0, Integer.MAX_VALUE);

        post(this);
    }

    private void endFling() {
        mScroller.forceFinished(true);
        endFlingMotion();
    }

    @Override
    public void run() {

        final Scroller scroller = mScroller;
        boolean animationNotFinished = scroller.computeScrollOffset();
        final int x = scroller.getCurrX();
        int delta = x - mLastFlingX;

        trackMotion(delta); 

        if (animationNotFinished) {
            mLastFlingX = x;
            post(this);
        }
        else {
            endFling();
        }

    }
}

@Override
public boolean onScroll(MotionEvent e1, MotionEvent e2, float distX, float distY) {
    trackMotion(-distX);
    return false;
}

    // Unused Gesture Detector functions below

@Override
public boolean onDown(MotionEvent event) {
    return false;
}

@Override
public void onLongPress(MotionEvent event) {
    // we don't want to do anything on a long press, though you should probably feed this to the page being long-pressed.
}

@Override
public void onShowPress(MotionEvent event) {
    // we don't want to show any visual feedback
}

@Override
public boolean onSingleTapUp(MotionEvent event) {
    // we don't want to snap to the next page on a tap so ignore this
    return false;
}

} 
```

这有一些小问题，可以很容易地解决，但我会留给你，即如果你滚动（拖动，而不是扔），你可能会在页面之间结束（你会想抓住ACTION_UP 事件）。此外，为了做到这一点，触摸事件被完全覆盖，因此您需要`ViewPager`在适当的情况下将相关事件提供给底层。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-12T15:10:03.990

另一种选择是从支持库复制整个`ViewPager`实现源代码并自定义`determineTargetPage(...)`方法。它负责确定在滑动手势上滚动到哪个页面。这种方法不是超级方便，但效果很好。见下面的实现代码：

```
private int determineTargetPage(int curPage, float pageOffset, int velocity, int dx) {
    int target;
    if (Math.abs(dx) > mFlingDistance && Math.abs(velocity) > mMinimumVelocity) {
        target = calculateFinalPage(curPage, velocity);
    } else {
        final float truncator = curPage >= mCurItem ? 0.4f : 0.6f;
        target = (int) (curPage + pageOffset + truncator);
    }
    if (mItems.size() > 0) {
        final ItemInfo first = mItems.get(0);
        final ItemInfo last = mItems.get(mItems.size() - 1);

        // Only let the user target pages we have items for
        target = Math.max(first.position, Math.min(target, last.position));
    }
    return target;
}

private int calculateFinalPage(int curPage, int velocity) {
    float distance = Math.abs(velocity) * MAX_SETTLE_DURATION / 1000f;
    float normalDistance = (float) Math.sqrt(distance / 2) * 25;
    int step = (int) - Math.signum(velocity);
    int width = getClientWidth();
    int page = curPage;
    for (int i = curPage; i >= 0 && i < mAdapter.getCount(); i += step) {
        float pageWidth = mAdapter.getPageWidth(i);
        float remainingDistance = normalDistance - pageWidth * width;
        if (remainingDistance >= 0) {
            normalDistance = remainingDistance;
        } else {
            page = i;
            break;
        }
    }
    return page;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-19T10:02:52.670

我发现比检查答案更好的实现，当我想停止滚动时，这个 ViewPager 的触摸表现更好 [https://github.com/Benjamin-Dobell/VelocityViewPager](https://github.com/Benjamin-Dobell/VelocityViewPager)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T10:30:45.063

ViewPager 是来自支持库的类。下载支持库源代码，在 onTouchEvent 方法中更改大约 10 行代码以添加所需的功能。

我在我的项目中使用修改后的支持库大约一年，因为有时我需要修改几行代码来做一些小改动或添加新方法，我不想复制组件源代码。我使用修改版的 Fragments 和 viewpager。

但是您会遇到一个问题：大约每 6 个月一次，如果您需要新功能，您必须将自定义支持库与新的官方版本合并。并且要小心更改，您不想破坏支持库类的兼容性。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-16T08:39:52.517

您可以覆盖 ScrollView 或 Horizo​​ntalScrollView 类，并添加该行为。Gallery 中有很多错误，据我所知，它自 api 级别 14 以来已被弃用。

# java - 如何使用 XMLHttpRequest.send(string) 中的信息

> ID：12787291
> 
> 赞同：4
> 
> 时间：2012-10-08T18:20:31.633
> 
> 标签：java, javascript, ajax

我正在发送一个 POST 请求，`.send()`其中包含`"id=jeff&command=test"`.

如何通过`HttpServletRequest`对象在 Java 中解析和使用这些值？

我尝试将内容类型更改为`text/html`and `application/x-www-form-urlencoded`。我的Java服务器是嵌入式码头顺便说一句。

```
var text = form.command.value;
var xmlhttp = new XMLHttpRequest();

    xmlhttp.onreadystatechange=function()
    {
          if (xmlhttp.readyState==4 && xmlhttp.status==200)
          {
            xmlhttp.responseText
          }
        }

    xmlhttp.open("POST", 'go', true);
    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xmlhttp.send("id=jeff&command=" + text); 
```

这是我的 Java 代码

```
public class GoHandler extends HttpServlet 
{
Commands c = Commands.getInstance();
@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws IOException
{
    BufferedReader reader = request.getReader();
    String str = "";
    while ((str = reader.readLine()) != null)
    {
        System.out.println(str);
    }

    String p = request.getParameter("id");
    String input = request.getParameter("command"); 
    System.out.print(p); 
```

这是我从浏览器发出请求时的输出

id=jeff&command=test （来自缓冲阅读器）

null （这是来自我的字符串 p 应该是 id）

这是 Chrome 的工具包的东西..

```
Request URL:http://localhost:8080/go
Request Method:POST
Status Code:200 OK
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Content-Length:20
Content-Type:application/xml
Host:localhost:8080
Origin:http://localhost:8080
Referer:http://localhost:8080/
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko)     Chrome/22.0.1229.79 Safari/537.4
Request Payload
id=jeff&command=test
Response Headersview source
Content-Length:66
Content-Type:application/json;charset=utf-8
Server:Jetty(8.1.7.v20120910) 
```

我的服务器回复

```
{"flavor":"You are in the goHandler"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-08T15:01:38.160

“这行得通。但是没有内置的方法来获取这些值吗？”

不要读取输入流来获取参数，因为一旦您读取输入流，您就会到达输入流的末尾，并且本机方法`getParameter()`不会重置输入流，这就是它返回 null 的原因。直接使用`getParameter()`来获取值。

使用`InputStream`或`getParameter()`不使用两者

```
@Override
protected void doPost(HttpServletRequest request,HttpServletResponse response)throws IOException
{`    `

String p=request.getParameter("id");
String input=request.getParameter("command");
System.out.println(p); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:30:10.913

您可以将其作为缓冲阅读器。这将给出完整的字符串。您可以手动解析它。如果你的分隔符是 "\n" 那么，

```
BufferedReader reader = request.getReader();
while ((str = reader.readLine()) != null)
  jb.append(str); 
```

编辑：

您可以尝试这些http标头中的一个/两个吗？！这是您更新的代码。

```
var text = form.command.value;
var xmlhttp = new XMLHttpRequest();

xmlhttp.onreadystatechange=function()
{
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
      {
        alert(xmlhttp.responseText);
      }
    }
var params = "id=jeff&command=" + encodeURIComponent(text);
xmlhttp.open("POST", "go", true);
xmlhttp.send(params); 
```

使用 encodeURIComponent() 将 URI 转换为有效的 ASCII。

更新了 JavsScript，因为默认内容类型是“application/x-www-form-urlencoded”，因此将其删除。现在尝试访问 servlet 中的所有参数。

# java - Java 运行并行程序

> ID：12787293
> 
> 赞同：1
> 
> 时间：2012-10-08T18:20:38.380
> 
> 标签：java, multithreading

我有一个要求，我不确定是否可以通过使用线程来满足。我有两个预定义的 100*100 矩阵，我想执行它们的乘法。我想要的是，不是简单的乘法，而是我想把它分成三个单独的程序，第一个程序将执行前 33 行的乘法，第二个程序将执行从 33 到 64 的行的乘法，第三个将执行第 64 到 100 行的乘法. 现在我想并行运行这些程序并收集它们的结果（即行的乘法），然后将这三个不同的结果连接到一个矩阵中。现在，我已经开发了三个这样的程序或类，但我无法找到任何方法来并行运行它们。在线程中，我读到我们无法确定哪个线程将首先执行，哪个线程将稍后执行。

谁能告诉我我可以使用哪种技术来解决我的问题？

我会非常感谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:26:17.360

Java 内置了这种东西。文档是[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executors.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executors.html)

创建每个对象，将其扔到线程池中，然后全部运行。

```
ExecutorService service = Executors.newFixedThreadPool(3);
service.submit(matrixMult1);
service.submit(matrixMult2); // the objects that do the work
service.submit(matrixMult3);

service.shutdown();
service.awaitTermination(1, TimeUnit.HOURS); 
```

这是基本大纲。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:26:22.187

对于这种情况，我会使用已经存在的库，例如 EJML ( [http://code.google.com/p/efficient-java-matrix-library/](http://code.google.com/p/efficient-java-matrix-library/) ) 或 la4j ( [http://la4j.org](http://la4j.org) )。图书馆很可能会更快地产生结果。您也可以改用更适合数学的其他语言，但我认为这超出了这个问题的范围。如果你坚持使用线程，因为这些都是并行运行的，无论谁先完成都无关紧要，你只需要确保它们都完成然后重新组装。

希望有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T18:36:45.047

[这](http://www.cs.rit.edu/~ark/pj.shtml)是我在大学中用于大多数并行 Java 项目的并行 Java 库。

它是由我的并行编程教授[Alan Kaminsky](http://www.cs.rit.edu/~ark/)编写的，他很棒（一些学生也为它做出了贡献）。

下载页面上需要注意的重要事项：使用部分、文档部分和系统要求（尤其是关于 java 5 的性能如何优于 java 6 或 7 的部分）。

一个好的起点可能是[`edu.rit.pj.test.Test13`](http://www.cs.rit.edu/~ark/pj/doc/edu/rit/pj/test/Test13.html)，它执行矩阵运算。

对这个实现非常重要的一个类是[`edu.rit.pj.Comm`](http://www.cs.rit.edu/~ark/pj/doc/edu/rit/pj/Comm.html)，它负责线程之间的大部分数据传递。确保您阅读了此类的文档，特别注意 和 部分`broadcast()`，`gather()`这应该是您首先将矩阵分发到节点，然后最终收集和组合结果的方式。

我知道，要吸收的东西很多。稍后我会尝试写一个例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-12T09:02:24.077

我不相信 100 x 100 非常大，并且在并行完成时您不会看到大幅加速，这将是预优化的经典示例，尤其是在您的操作系统很忙的情况下。

其次，你为什么要重新发明轮子？
`jblas` [http://mikiobraun.github.io/jblas/](http://mikiobraun.github.io/jblas/)被认为是最快`BLAS`的 java 库。
另外，如果您不发布代码，我们如何告诉您代码有什么问题？

但无论如何，我会向您推荐我为完成任务而给出的答案，这些任务依赖于使用*java 并发*api 的其他任务的输出：[Executing Dependent tasks in parallel in Java](https://stackoverflow.com/questions/10855045/executing-dependent-tasks-in-parallel-in-java/25800299#25800299)
请检查一下。
这将为您提供另一个以您描述的方式解决此问题的示例，但是我认为该方法会比使用 jblas 慢。

# php - 将循环数据存储在单独的变量中？

> ID：12787297
> 
> 赞同：-1
> 
> 时间：2012-10-08T18:21:17.933
> 
> 标签：php, html, wordpress, variables, foreach

我目前在我的`single.php`文件中使用以下内容来列出我的帖子所属的父类别和子类别：

```
foreach((get_the_category()) as $category) { 
    echo '<h1>'.$category->cat_name . '</h1>'; 
} 
```

所以这导致： `<h1>Events</h1><h1>News</h1>`

**但是，我想将每个`<h1>`值存储在一个单独的变量中。**

所以我的最终代码可能是：

```
$i1 = "<h1>Events</h1>"; 
$i2 = "<h1>News</h1>"; 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T18:24:37.220

您想使用“变量变量”：

```
$j = 1;
foreach((get_the_category()) as $category) { 
    $i{$j} = '<h1>' . $category->cat_name . '</h1>';
    $j++;
} 
```

但是，我只会使用一个数组：

```
$i = array();
foreach((get_the_category()) as $category) { 
    $i[] = '<h1>' . $category->cat_name . '</h1>'; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:23:58.750

您可以使用`array_map`将所有返回`cat_name`数组...您也可以使用 list 将它们分隔为 2 个不同的变量

```
# List Of Name form array
$categories = array_map(function($category){ return "<h1>" . $category->cat_name . "</h1>";}, get_the_category());

# List Name to diffrent varraibles 
list($i1,$i2) = $categories ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T18:27:03.547

你可以这样做：

```
$n = 0;
foreach((get_the_category()) as $category) { 
    $i{$n} = '<h1>'.$category->cat_name . '</h1>'; 
    $n++;
} 
```

[看看这本手册](http://php.net/manual/en/language.variables.variable.php)。不过这很奇怪，可能会使您的代码混乱（我不建议这样做。为什么不使用数组代替呢？

```
$categories = array();
$n = 0;
foreach((get_the_category()) as $category) { 
    $categories[$n] = '<h1>'.$category->cat_name . '</h1>';
    $n++;
} 
```

# ios - 限制 UIScrollView 中的可滚动区域

> ID：12787303
> 
> 赞同：1
> 
> 时间：2012-10-08T18:21:40.040
> 
> 标签：ios, uiscrollview

我试图限制 UIScrollView 的可滚动区域，但所有处理这个问题的主题都试图做一些我想做的事情。

基本上，我有一个长的水平滚动视图，它填充了屏幕的宽度。如果您将手指放在滚动视图的顶部，我只希望视图滚动，因此基本上只有受限的矩形区域会滚动视图。

问题是，滚动视图的子视图吞噬了所有的触摸，所以我无法检查用户的手指是否在受限框中。我知道解决方案一定很简单，但此时它正在回避我。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:24:46.437

A）只需在屏幕的下半部分放置一个透明视图（在滚动视图的顶部）

B) 使你的scrollView 的框架更小，但关闭剪辑( `.clipsToBounds = NO`)

C）......还有更多选择，）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:25:26.107

将您的 uiscrollview 缩放到您希望能够滚动的矩形。将`clipsToBounds`滚动视图设置为`NO`.

# android - 适用于 android 和 ios 的不同 Web 应用程序图标

> ID：12787306
> 
> 赞同：3
> 
> 时间：2012-10-08T18:21:57.153
> 
> 标签：android, html, ios, web-applications

据我所知，两个操作系统都支持 2 个元标记，即：

```
<link rel="apple-touch-icon" href="#"/>
<link rel="apple-touch-icon-precomposed" href="#"/> 
```

我想要 2 个不同的图标，一个用于 androids，一个用于 IOS 设备。除了使用复杂的移动检测脚本之外，还有什么方法可以实现这一点？我找不到任何，但也许只有其中一个支持的标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-17T18:52:46.153

这必须在服务器端完成。

有不同的解决方案，您可以用其中之一替换您的代码段。如果您使用 PHP，您必须将您的 html 文件的文件扩展名更改为 .php

## SSI

如果您的服务器支持 SSI（ServerSide Includes），您可以这样做：

```
<!--#if expr="$HTTP_USER_AGENT=/Android/" -->
<!--
<link rel="apple-touch-icon" href="androidimg"/>
<link rel="apple-touch-icon-precomposed" href="androidimg"/>
-->
<!--#else -->
<!--
<link rel="apple-touch-icon" href="altimg"/>
<link rel="apple-touch-icon-precomposed" href="altimg"/>
-->
<!--#endif --> 
```

## PHP

如果你使用 PHP

```
<?
$ua = $_SERVER['HTTP_USER_AGENT'];
if (preg_match(/'Android'/, $ua) : 
?>
    <link rel="apple-touch-icon" href="androidimg"/>
    <link rel="apple-touch-icon-precomposed" href="androidimg"/>
<? else: ?>
    <link rel="apple-touch-icon" href="altimg"/>
    <link rel="apple-touch-icon-precomposed" href="altimg"/>
<? endif; ?> 
```

# java - Java / C++的算法配置框架

> ID：12787307
> 
> 赞同：3
> 
> 时间：2012-10-08T18:22:17.057
> 
> 标签：java, c++, optimization

是否有开源算法配置（参数调整）框架，例如[SPOT](http://cran.r-project.org/web/packages/SPOT/index.html)、[ParamILS](http://www.cs.ubc.ca/labs/beta/Projects/ParamILS/)或[I-Race](http://iridia.ulb.ac.be/irace/)，直接用 Java 或 C++ 实现？我找不到一个。任何指针将不胜感激。

我知道 Matlab 和 R 更适合这种类型的统计分析，例如我可以[从 SPOT 调用可执行文件](http://www.google.se/url?sa=t&rct=j&q=&esrc=s&source=web&cd=9&cad=rja&ved=0CF8QFjAI&url=http://arxiv.org/pdf/1006.4645&ei=gBdzUIyJI6-Q4gTnrIHwBw&usg=AFQjCNGoV_MX4pGR8p0ZRO7PUSKc-Ic2Tg&sig2=rxLO8Ut2GzoAo--lQHJrkA)，但我想在我正在开发[的工具中提供一个轻量级且易于设置的替代方案。](https://github.com/feldob/InPUT)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-07T12:11:50.877

是的，最新版本的 SMAC 是用 Java 实现的：[http ://www.cs.ubc.ca/labs/beta/Projects/SMAC/](http://www.cs.ubc.ca/labs/beta/Projects/SMAC/)

SMAC 由 ParamILS 的开发者制作，并将基于序列模型的优化方法（例如 SPOT）推广到通用算法配置（允许离散值参数、多个实例等）。

# printing - 获取 lua 对象的地址

> ID：12787308
> 
> 赞同：7
> 
> 时间：2012-10-08T18:22:20.353
> 
> 标签：printing, lua

当你在 lua 中打印某些类型（例如函数和表）时，你会得到类型的名称和地址，如下所示：

```
> tab = {}
> print(tab)
table: 0xaddress 
```

我创建了一个简单的类，如下所示，我想类似地覆盖该`__tostring`方法。如何获取要打印的对象的地址？

这是我的课。我想`print(pair)`打印出来`Pair: 0xaddress`。显然这是一个微不足道的例子，但这个概念很有用：

```
Pair = {}
Pair.__index = Pair

function Pair.create()
 local p = {}
 setmetatable(p, Pair)
 p.x = 0
 p.y = 0
 return p
end

function Pair:getx()
 return self.x
end

function Pair:gety()
 return self.y
end

function Pair:sety(iny)
 self.y=iny   
end

function Pair:setx(inx)
 self.x=inx
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T19:08:13.373

这是一个很糟糕的方法：

```
Pair.__tostringx = function (p)
    Pair.__tostring = nil    
    local s = "Pair " .. tostring(p)                                                                                                                                                                                                    
    Pair.__tostring = Pair.__tostringx
    return s
end
Pair.__tostring = Pair.__tostringx    

> print(p)
Pair table: 0x7fe469c1f900 
```

你可以在里面做更多的字符串操作`Pair.__tostringx`来得到你想要的格式，例如，删除“table”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:53:59.163

我认为那个`__tostring()`打印`table: 0xaddress`实际上并没有在直接的 Lua 中实现。我环顾了一堆，但我能想到的唯一方法并不是你想的那样。我在 Pair 类中添加了一个名为 toString 的函数，它使用默认值`__tostring()`来获取普通字符串，然后取出“table”并放入“Pair”。

```
function Pair:toString()
    normalPrint = tostring(self)
    return ("Pair:" .. normalPrint:sub(7))
end

pair = Pair.create()
print(pair:toString()) 
```

然后你调用 Pair:toString() 来获得正确格式化的输出。在覆盖 __tostring 时不能这样做，因为您将很难访问 super 的 __tostring，并且如果您调用 Pair 的 __tostring，递归会发生堆栈溢出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-14T04:36:14.023

与您使用的语法不同，但有效：（但可以完善）

```
Pair = {}
Pair.address = string.gsub(tostring(Pair), "table:", "") --Gets the original address as a string.
local metas = {
    __tostring = function(tab)
        return "Pair:" .. tab.address
    end 
}
setmetatable(Pair, metas)
print(Pair) --Will print Pair: 0xaddress 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-03T15:24:41.840

您可以`__name`在 Lua 5.3 或更高版本中使用。

```
print(tostring(setmetatable({}, {__name = "Pair"}))) 
```

它打印：

```
Pair: 0x5575ef88cf50 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-10T16:22:50.520

```
local function f() end
local t = {}

print(f, t)
print(string.format("%p\t%p", f, t))

--[[
function: 0x8813c0  table: 0x881810
0x8813c0    0x881810
]] 
```

[在https://www.lua.org/demo.html](https://www.lua.org/demo.html)上测试。

# wcf - 部署后 WCF 4.0 绑定错误

> ID：12787312
> 
> 赞同：1
> 
> 时间：2012-10-08T18:22:51.273
> 
> 标签：wcf, c#-4.0

我从 VS10 中创建了一个 Web 服务引用——从一个 ASP.NET 网站和一个 WCF 4.0 自定义服务端点。当一切都在我的沙箱中运行/部署时，它工作正常，但是当我部署到单独的服务器时，我收到以下错误。

> System.ServiceModel.CommunicationException：接收时发生错误
> 
> [对http://mywcfservices.com:888/SvcLibrary.MyService.svc](http://mywcfservices.com:888/SvcLibrary.MyService.svc)的HTTP 响应 。
> 
> 这可能是由于服务端点绑定未使用 HTTP 协议。
> 
> 这也可能是由于服务器中止了 HTTP 请求上下文
> 
> （可能是由于服务关闭）。

这是VS10 在 ASP.NET 客户端网站中生成的**web.config 部分。**我还注意到它会生成 wsHttpBinding 绑定而不是 HttpBasicBinding 是我的问题吗？这不是 HTTPS 部署。

```
 <system.serviceModel>

<bindings>

<wsHttpBinding>

<binding name="WSHttpBinding_IXRMService" closeTimeout="00:01:00"

openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"

bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"

maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text"

textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">

<readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"

maxBytesPerRead="4096" maxNameTableCharCount="16384" />

<reliableSession ordered="true" inactivityTimeout="00:10:00"

enabled="false" />

<security mode="Message">

<transport clientCredentialType="Windows" proxyCredentialType="None"

realm="" />

<message clientCredentialType="Windows" negotiateServiceCredential="true"

algorithmSuite="Default" />

</security>

</binding>

</wsHttpBinding>

</bindings>

<client>

<endpoint address="http://mywcfservices.com:888/SvcLibrary.MyService.svc"

binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IXRMService"

contract="XRMService.IXRMService" name="WSHttpBinding_IXRMService">

<identity>

<dns value="localhost" />

</identity>

</endpoint>

</client>

</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:26:57.043

wsHttpBindings 不一定只是用于跨 Web 服务调用执行 HTTPS，因为 basicHttp 也可以这样做，而是 ide 默认为这个，因为 wsHttp 将比 basicHttp 更高级的选项，因为它实现了 WS-* 规范（尤其是围绕寻址、消息级安全等）。

你可以发送你的服务器端/服务端配置 xml 吗？这将是配置 WCF 本身的配置部分（<service> 标记内的内容）。这将有助于了解 IIS 不喜欢您的服务调用的原因。

# oracle - Oracle 报告 6i - Rep 3300

> ID：12787313
> 
> 赞同：0
> 
> 时间：2012-10-08T18:22:51.987
> 
> 标签：oracle, report, oraclereports

在批量打印报告时，我收到以下错误：**REP-3300 工具包中的致命错误 - UI-9 此功能超出上下文**。我的猜测是该报告太大了，因为它有 10512 页。

当报告在预览器中并且打印处于会话中时，会发生此错误，报告能够假脱机到最后一页，所以我知道问题不在于打印假脱机大小。我能够打印大约 3500 页，然后抛出错误。

我对打印报告的机器没有管理员权限。我知道 REPORT80 文件夹中的 TEMP 文件夹的大小受到限制，所以我假设我需要生成较小的批次然后打印。

我想知道是否有办法分部分打印这 10512 页，例如打印前 3000 页，然后打印接下来的 3000 ......直到 10512。oracle 6i 报告是否提供任何用于少量打印的机制。

我真正想要实现的是当用户进行处理时，报告被扔到屏幕上，我希望这是 3000 条记录，当他们关闭报告预览器时，我希望它在没有用户干预的情况下自动打印另外 3000 条记录。

# django - 在 Django 中删除时访问 post_delete 中的相关数据

> ID：12787316
> 
> 赞同：2
> 
> 时间：2012-10-08T18:23:08.243
> 
> 标签：django

当在 Django 中删除数据库对象时，会在数据库中的删除操作之前和之后调度 pre_delete 和 post_delete 信号。在我的项目中，我删除了具有相关对象的对象。

将回调连接到 post_delete 让我可以使用对象中的数据，即使该对象不再在数据库中。但是，据我所知，相关对象不会发生这种情况。

为了解决这个问题，我将回调连接到 pre_delete。这个回调修改了实例，在 post_delete 回调中添加了一些我需要的信息，但我想知道是否有更好的方法来做到这一点。

# python - Web2Py - 通过电子邮件验证上传的文件

> ID：12787317
> 
> 赞同：0
> 
> 时间：2012-10-08T18:23:08.857
> 
> 标签：python, web2py

web2py 专家。我要完成的任务如下：

- 允许浏览我网站的人通过表单将文件上传到我的网站（通过 crud.create() 实现） - 访问者无需建立帐户或登录即可上传文件 - 用户需要提供用于上传文件的电子邮件地址

- 基本上，用户上传文件后，该文件被保存在 escrow/limbo 中，并向用户发送验证/验证电子邮件

-一旦用户单击验证电子邮件中的链接，文件就会发布到页面上，并公开可供下载

这样做的最佳方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:01:28.467

在包含上传信息的表中，添加一个名为“validation_key”的新字符串字段。上传文件时，在其中插入 GUID 或相当长的字母数字字符串。将此密钥作为电子邮件中链接的一部分发送。当用户单击链接时，搜索密钥，如果找到，将数据库中匹配的“validation_key”设置为空。空的validation_key 表示已验证上传，您可以允许下载该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T22:05:35.083

最明显的是使用会话。将上传文件的名称保存在某个会话变量中。

使用 auth.verify_email(onaccept=...)

验证用户的电子邮件后，您的代码将被调用 - 然后您可以关联文件和用户：来自 session.variable 和 auth.user_id 的文件名
还设置任何权限

如果您希望用户有时间考虑并确认来自另一个比赛和另一个会话的注册，则在文件表中包含一个 user.email 字段：

```
db.define_table('gifts', 
Field('im', 'upload', requires=IS_EMPTY_OR(IS_IMAGE(maxsize=(200, 200))), autodelete=True, uploadfolder='static/gifts'),
Field('email', requires=IS_EMAIL()),
Field('notes','text', default='', writable=True),
Field('t0','datetime',default=request.now, readable=False, writable=False),
Field('t', 'datetime', default=request.now, update=request.now, writable=False),
Field('rating', 'integer', default=0, writable=False, readable=False),
Field('hidden', 'boolean', default=True, writable=False, readable=True),
) 
```

然后在 onaccept 的回调函数中包含匹配查询： `db(db.gifts.email==auth.user.email).update(hidden=False)`

在向用户提供适当的反馈之前最好选择任何隐藏文件（可能是他上传了几个文件直到确认时刻）

祝你好运

# asp.net-mvc - 注册多条路线

> ID：12787319
> 
> 赞同：0
> 
> 时间：2012-10-08T18:23:16.553
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我想为 mvc 注册多个路由，我需要的 Url 如下：

```
http://mysite.com/myapps/[action]/[id]
http://mysite.com/myapps/[parameter]/build/
http://mysite.com/myapps/[parameter]/build/MyType1/[action]/[id]
http://mysite.com/myapps/[parameter]/build/MyType2/[action]/[id]
http://mysite.com/myapps/[parameter]/build/MyType3/[action]/[id]
http://mysite.com/myapps/[parameter]/build/MyType4/[action]/[id]
http://mysite.com/myapps/[parameter]/build/MyTyp51/[action]/[id]
http://mysite.com/myapps/[parameter]/messages/[action]/[id]
http://mysite.com/myapps/[parameter]/users/[action]/[id]
http://mysite.com/account/[action]/[id]
http://mysite.com/help/[action]/[id]
http://mysite.com/videos/[action]/[id] 
```

我怎么能达到？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:31:15.063

您可以通过使用[RouteCollection](http://msdn.microsoft.com/en-us/library/system.web.routing.routecollection%28v=vs.100%29.aspx) (Route) 类中定义的[MapRoute](http://msdn.microsoft.com/en-us/library/dd470521%28v=vs.108%29.aspx)方法来实现这一点。

如果您打开**RouteConfig.cs**文件（位于`App_Start`文件夹下），您将看到该`RegisterRoutes()`方法。在此方法中，您将看到如下所示的默认路由：

```
routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

要添加您的自定义路线，您将添加如下内容：

```
// Make sure your custom routes are placed BEFORE the default route
routes.MapRoute(
    name: "MyRoute01",
    url: "myapps/{action}/{id}",
    defaults: new { controller = "myapps", action = "Index", id = UrlParameter.Optional}
);

routes.MapRoute(
   name: "MyRoute02",
   url: "myapps/{parameter}/build/{MyType}/{action}/{id}",
   defaults: new { controller = "myapps", action = "Index", parameter = "MyDefaultParamValue", MyType="MyType1", id = UrlParameter.Optional }
); 
```

上面的路线无非是对注册多条路线的“如何实现”的回应。换句话说，上面的示例只不过是帮助您入门的提示。

我们将无法在确切的路线上为您提供帮助，因为您没有向我们提供控制器和操作名称的详细信息，也没有指定 URL 模式的含义 - 即哪些类和方法（控制器和操作) 你想要自定义路由解析吗？

请记住，URL 最终会调用特定类（Controller）中的一个方法（Action）。因此，在您的自定义路由中，您可以创建任何您希望的 URL 模式，但您必须了解该路由必须指定一个控制器和一个您想要基于 URL 模式触发的操作。

如果上述信息对您来说是新闻，那么您最好阅读 MVC 路由系统的工作原理（就此而言，它不起作用）。

# mysql - 正则表达式用文件名中的下划线替换 %2B

> ID：12787322
> 
> 赞同：1
> 
> 时间：2012-10-08T18:23:33.070
> 
> 标签：mysql, regex, replace

我正在尝试将所有出现的`%2B`in 文件名替换为`_`.

例如：

前：`/wp-content/uploads/2012/10/Moreton%2Bwindow.jpg`

后：`/wp-content/uploads/2012/10/Moreton_window.jpg`

`%2B`between`/wp-content/uploads/2012/10/`和可能出现很多次`.jpg`。

这是我到目前为止所拥有的：

```
(?<=\/wp-content\/uploads\/2012\/10\/.)(%2B)(?=.\.jpg) 
```

替换为： `_`

但它不起作用。我将在 MySQL 中进行此替换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:30:57.837

我不相信 MySQL 支持基于正则表达式的字符串替换——而且我在文档中没有看到类似的东西——但是你可以写一个这样的表达式：

```
CASE WHEN path_plus_filename REGEXP '^/wp-content/uploads/2012/10/.*[.]jpg$'
     THEN REPLACE(path_plus_filename, '%2B', '_')
     ELSE path_plus_filename
 END 
```

它返回`path_plus_filename`，但用`%2B`if `_`（且仅当）整个事物匹配时替换 every `^/wp-content/uploads/2012/10/.*[.]jpg$`。

或者，如果你想要一个`UPDATE`语句而不是一个查询，你可以写：

```
UPDATE table_that_contains_path_plus_filename_column
   SET path_plus_filename = REPLACE(path_plus_filename, '%2B', '_')
 WHERE path_plus_filename REGEXP '^/wp-content/uploads/2012/10/.*[.]jpg$'
; 
```

* * *

**编辑添加：**顺便说一句，这既不是这里也不是那里，但是-您的正则表达式的问题是它需要`%2B`在前面`/wp-content/uploads/2012/10/`加上*正好*一个字符，后面*正好是*两个字符加上`jpg`。要在允许的字符数方面获得一定的灵活性，您需要使用`.*`(“零个或多个字符”) 或`.+`(“一个或多个字符”) 或`.{5,20}`(“五个到二十个字符”) 或诸如此类。

# javascript - 循环不会在给定值处停止

> ID：12787323
> 
> 赞同：0
> 
> 时间：2012-10-08T18:23:42.980
> 
> 标签：javascript

我试图创建一个滑动面板，它会用一个简单的 js 动画隐藏自己。这里是开发链接：[http](http://carportal.webpronto.it) ://carportal.webpronto.it 只需单击“隐藏面板”即可看到搜索选项卡向左移动。

问题如下：我试图给面板在到达左侧位置时停止的值：-25% 但面板继续他的傻瓜运行与无限。这是我使用的脚本：

```
<script type="text/javascript">
    var scrollSpeed = 50;
    var step = 1;
    var current = 0;
    var endposition = 25;   
    function closeBAR(){
        current -= step;  
        if (current == endposition){

            stop;

        }

        $('#colleft').css("left",current+"%"); 

    var init = setInterval("closeBAR()", scrollSpeed);

}
</script> 
```

我的脚本有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:26:07.200

更换你的线路

```
stop; 
```

和

```
clearInterval(init); 
```

结束位置也应该是负数：

```
var endposition = -25; 
```

[考虑使用像Slide](http://docs.jquery.com/UI/Effects/Slide)这样的jQuery UI 效果，它会让你的代码更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:26:12.370

你正在减少电流，所以，因为它从 0 开始，它最终会变成负数。-25 与 25 不同，因此您的“停止”测试失败

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T18:32:33.923

对您的代码进行“干”查看至少有以下问题：您的全局`current`变量永远不会达到 的值，`endposition`因为它在开始时使用 -1 的值初始化：`current -= step == -1`(0 - 1)。

# shell - C shell打印出当前的CPU时间？

> ID：12787324
> 
> 赞同：1
> 
> 时间：2012-10-08T18:23:46.567
> 
> 标签：shell, time, csh

简单的问题...我只想在脚本中的各个位置打印出 CPU 时间，以查看执行所需的时间。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:33:03.420

日期 +%s.%N

应该（没有测试）在秒点纳秒上打印出 Unix 时间（当然不是那么准确）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:34:59.113

从字面上回答你的问题，

您需要查阅系统手册页`ps`以查看必须传递哪些选项才能查看 CPU 时间。它可能会显示在默认视图之一中。然后你需要运行一个并行进程来执行你的`ps .... cmd.`, 在一个循环中，像`sleep 1`. 或者，您需要在后台运行您的 c-shell 启动进程，并在 cmd 末尾使用 '&' 字符，然后构造循环`ps ... ; sleep 1;`以查看状态。

但是.. 为什么不只是在脚本的每个部分之前和之后添加添加消息，即。

```
echo "P1 start : current time is `date`"
longrunningProcess1
echo "P1 end : current time is `date`"

echo "P2 start : current time is `date`"
longrunningProcess2
echo "P2 end : current time is `date`" 
```

IHTH

# jsf-2 - viewParam 事件出错

> ID：12787325
> 
> 赞同：0
> 
> 时间：2012-10-08T18:23:48.370
> 
> 标签：jsf-2, javabeans, facelets, viewparams

我创建了一个网页，它检查来自 URL 的视图参数，并调用 bean 的 init 方法来检索该用户。然后用该用户的信息填充该页面上的字段。

但是出了点问题。

我的 Facelets 页面：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>Tweetpage of #{userBean.getName()}</title>
    </h:head>
    <h:body>
        <f:metadata>
            <f:viewParam name="user" value="#{userBean.name}" />
            <f:event type="preRenderView" listener="#{userBean.init}" />
        </f:metadata>
        <h:commandButton value="Login" action="#{loginBean.login()}" id="login" />
        <div class="namebox">
            <label>User: #{userBean.name} </label> <br/>
            <br/>
        </div>
</h:body>
</html> 
```

和 UserBean.java：

```
package beans;

import ...

@Named
@RequestScoped
public class UserBean implements Serializable {
    private String userName;
    private String name;
    private String bio;
    private String web;
    private Collection<Tweet> tweets;
    private Collection<User> followers;
    private User user;
    @Inject
    private @Named(value = "kwetterService")
    KwetterService service;

    @PostConstruct
    public void init(ComponentSystemEvent event) throws AbortProcessingException {
        System.out.println(name);
        user = service.find(name);
        if (user != null)
        {
            name = user.getName();
            bio = user.getBio();
            web = user.getWeb();
            tweets = user.getTweets();
            followers = user.getFollowing();
        }
    }
} 
```

由于`System.out.println(name)`没有调用，我认为网页不会调用 init。如果我在没有 URL-adaptions ( `http://localhost:8080/KwetterJSF/`) 的情况下启动网页，我会收到以下错误消息：

> WELD-000049 无法在 beans.UserBean@3c836d3d 上调用 [method] @PostConstruct public beans.UserBean.init(ComponentSystemEvent)

如果我添加参数 ( `http://localhost:8080/KwetterJSF/index.xhtml?user=Sjaak`)，我会得到以下信息：

```
User: #{userBean.name} 
```

我对此不是很有经验，即使我自己研究了一下，我也无法弄清楚。有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:07:55.933

有2个问题。

* * *

首先，您正在`<f:event>`与`@PostConstruct`.

`@PostConstruct`只能是**不**带参数的方法。这就解释了例外。摆脱那个注释。当视图参数起作用时，无论如何它运行得太早了。

### 也可以看看：

*   [ViewParam 与 @ManagedProperty(value = "#{param.id}")](https://stackoverflow.com/questions/4888942/viewparam-vs-managedpropertyvalue-param-id/4889226#4889226)

* * *

其次，为了正确执行 JSF 页面，您需要确保出现在浏览器地址栏中的 URL 模式与`FacesServlet`注册在`/WEB-INF/web.xml`. 因此，如果是例如`*.jsf`，那么您需要确保通过`/page.jsf`URL 打开页面，而不是`/page.xhtml`. 如果您不这样做，JSF 标记/组件和 EL 表达式将不会被识别，因此将被视为“纯文本”。

然而，更好的是`FacesServlet`直接将`*.xhtml`. 这使您免于虚拟 URL 的头痛。

*   [JSF Facelets：有时我看到 URL 是 .jsf，有时是 .xhtml。为什么？](https://stackoverflow.com/questions/3008395/jsf-facelets-sometimes-i-see-the-url-is-jsf-and-sometimes-xhtml-why/3008504#3008504)

# ubuntu - 警告：远程主机标识已更改

> ID：12787330
> 
> 赞同：16
> 
> 时间：2012-10-08T18:23:59.623
> 
> 标签：ubuntu

我不断收到通常的“警告：远程主机标识已更改！

可能有人在做一些讨厌的事情！有人现在可能正在窃听您（中间​​人攻击）！也可能是刚刚更改了主机密钥。”尝试连接 ubuntu 时的消息。

我知道我做了什么来得到它，但现在我无法让它恢复原状。我之前遇到了 known_hosts 文件的问题，所以我像以前一样删除了它，然后尝试重新连接，以便重新制作文件。

现在我收到了这个错误，我没有 known_host 文件来编辑和删除坏密钥。我已经看到有关重置文件的代码以及所有这些，但是如果未创建文件怎么办？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-08T18:39:34.017

我假设这是尝试连接到远程主机时来自您的 ssh 客户端的消息。（您真的应该发布完整的错误消息并提供更多上下文。）在任何一种情况下，要消除错误，删除 known_hosts 文件中违规条目的最佳方法是运行：

```
ssh-keygen -R server.example.com 
```

# javascript - 如果某些子节点没有标签，如何更改子节点的 innerHTML？

> ID：12787336
> 
> 赞同：4
> 
> 时间：2012-10-08T18:24:28.310
> 
> 标签：javascript, html, innerhtml

这是我的问题示例

```
<div onclick="this.childNodes(0).innerHTML='0';">
1<b>2</b>3<b>4</b>5
</div> 
```

如您所见，标记了两个子节点（“ **2** ”和“ **4** ”），其他是简单的文本。问题是如何在不接触其他节点/文本的情况下更改 sertain div 容器中标记和未标记节点（文本）的 innerHTML？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T18:36:43.313

本质上，您将对文本节点（ 3 ）和其他（[fiddle](http://jsfiddle.net/yJfQh/)`data` ）使用(text) 属性：`nodeType``innerHTML`

```
<div onclick="this.childNodes[0][this.childNodes[0].nodeType === 3 ? 'data' : 'innerHTML'] = '0'">
1<b>2</b>3<b>4</b>5
</div>​ 
```

[编辑]当所有需要的只是对基本概念的简单解释时，我真的厌倦了每个提供*库*`data`作为解决方案的人，例如：文本节点和元素节点具有不同的内容属性，即：和`innerHTML`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:46:19.053

我写了一个名为[Linguigi](https://github.com/Prinzhorn/Linguigi)的库。这将像

```
new Linguigi(element).eachText(function(text) {
    if(this.parentNode.tagName === 'B') {
        return "BACON";
    }
}); 
```

它将 b-tags 中所有文本节点的文本转换为“BACON”。您将原始内容作为“文本”参数获取并可以对其进行转换。

[http://jsfiddle.net/Kz2jX/](http://jsfiddle.net/Kz2jX/)

顺便说一句：您应该摆脱内联事件处理（`onclick`属性）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T18:51:48.897

您可以递归地循环遍历每个节点，`nodeType`依次检查它们的属性，`nodeValue`如果节点是文本节点（用 表示`nodeType == 3`），则使用“0”更新属性。

假设你有这个**HTML**：

```
<div onclick="doReplace(this)">
    1<b>2</b>3<b>4</b>5
</div> 
```

然后，您可以编写一个递归调用自身的简单替换函数，如下所示：

```
window.doReplace = function (rootNode) {
    var children = rootNode.childNodes;
    for(var i = 0; i < children.length; i++) {
        var aChild = children[i];
        if(aChild.nodeType == 3) {
            aChild.nodeValue = '0';
        }
        else {
            doReplace(aChild);
        }
    }
} 
```

可以在这里找到一个工作小提琴：http: [//jsfiddle.net/p9YCn/1/](http://jsfiddle.net/p9YCn/1/)

# javascript - javascript中断并继续循环

> ID：12787340
> 
> 赞同：2
> 
> 时间：2012-10-08T18:24:51.677
> 
> 标签：javascript, jquery, animation, loops, break

如何在其中的“延迟”和“动画”运行时暂停/中断该循环，并在“动画”完成后从中断位置继续循环，以防止“i”变量被覆盖？或者也许还有其他方法可以防止在动画期间覆盖“i”变量？

```
for(i=0;i<inputs.length;i++){
    var now = inputs[i];
    var top = inputs[i].attr('top');
    if(!now.val()){
        if(dialog.css('display')=='none'){
            now.addClass('style');
            dialog.css('top',top).fadeIn(200);
        }
        else {
            dialog.delay(300).animate({"top": top}, 500, function(){
                now.addClass('style');
            });
        } 
    }
    else{
        now.removeClass('style');
    }
} 
```

我不能在延迟和动画之前添加类，因为我需要在动画完成后添加延迟类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T18:29:55.573

通过调用相同的函数直到所有元素动画完成。

```
var i = 0;

function animate() {
   if (inputs.length == i) {
      return;
   }
   var now = inputs[i];
   var top = inputs[i].attr('top');
   if (!now.val()) {
      if (dialog.css('display') == 'none') {
         now.addClass('style');
         dialog.css('top', top).fadeIn(200, function(){
            animate(); // recall it after fadein
         });
      } else {
         dialog.delay(300).animate({
            "top": top
         }, 500, function () {
            now.addClass('style');
            animate();// recall it after animate complete
         });
      }
   } else {
      now.removeClass('style');
   }

   i++;
}
animate(); 
```

# html - 如何在嵌套列表样式中分隔样式？

> ID：12787342
> 
> 赞同：14
> 
> 时间：2012-10-08T18:25:10.973
> 
> 标签：html, css, nested, html-lists, nested-lists

我有一个列表，列表中也有列表。
我在父列表上设置了样式，但是我想要父列表和子列表的不同样式，但是它们以某种方式混合在一起，我无法将它们分开。

HTML 文件：

```
<ul id="accountNavigation">
  <li><a href="#">Something</a></li>                    
  <li id="userNavigation">
    <img src="https://si0.twimg.com/profile_images/135460415/UAB_dragon_head_normal.png" alt=""/>
    <a href="#">Username</a>
    <div class="showme">
      <ul id="userNavigationSubMenu">
        <li>test</li>
        <li>test</li>
        <li>test</li>
        <li>test</li>
        <li>test</li>
        <li>test</li>
        <li>test</li>

      </ul>
    </div>
  </li>
</ul> 
```

CSS 文件：

```
body{background:#ff0000;}
#accountNavigation{ list-style: none;float: right;height: 44px;}
#accountNavigation li{ float: left;color: #fff;height: 44px;}
#accountNavigation li:hover{ background: #ddd;cursor: pointer;}
#accountNavigation li a{ text-decoration: none;color: #fff;line-height: 44px;font-weight: bold;font-size: 13px;height: 44px;padding: 15px 27px 0 14px;outline: none;}
#accountNavigation li img{ position: absolute;top: 12px;left: 10px;width: 22px;height: 22px;}
#userNavigation{position: relative;}
#userNavigation a {padding-left: 38px !important;}

#userNavigation{}
#userNavigation:hover{}
#userNavigation:hover .showme{display: inline;}
.showme
{
  display: none;
  width: 140px;
  height: 200px;
  background: #f5f5f5;
  margin: 0px auto;
  padding: 10px 5px 0px 5px;
  border: 1px solid #ddd;
  border-top: none;
  z-index: 10;
  position: absolute;
  right:0;
  top: auto;

}
#userNavigation ul { list-style: none;} 
```

这是[小提琴](http://jsfiddle.net/BDaTU/)。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-08T18:29:06.697

只需使用`>`直接/直接后代组合器和 an`id`来指定您要定位的`li`（或）元素：`ul`

```
#accountNavigation { /* outer ul element */
}

#accountNavigation > li { /* outer ul element's children li */
}

#accountNavigation > li > ul { /* first 'inner' ul element */
}

#accountNavigation > li > ul > li { /* first 'inner' ul element's li children */
} 
```

当然，您可以更通用并简单地使用：

```
ul { /* targets all ul elements */
    /* general styles */
}
ul li { /* targets all li elements within a ul */
    /* general styles */
}
ul li ul { /* targets all ul elements within an li element, itself within a ul */
    /* overrule general 'outer' styles */
}
ul li ul li { /* targets all li elements within a ul element,
                 within an li element, itself within a ul...and so on */
    /* overrule general 'outer' styles */
} 
```

使用一般方法：

```
<ul>
    <li>This should be green!</li>
    <li>This is also green...
        <ul>
            <li>But this is not, it's, um...blue!</li>
            <li>And so on...</li>
        </ul></li>
    <li>This is green too, just because.</li>
</ul> 
```

下面的 CSS 应该展示它的用法：

```
ul li {
    color: green; /* the 'general'/'default' settings */
    margin-left: 10%;
}

ul li ul li {
    color: blue; /* this overrides the 'general' color setting */
                 /* the margin is not overridden however */
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/c8ZmY/)。

参考：

*   [CSS 选择器（第 3 级），位于 W3.org](http://www.w3.org/TR/selectors/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T18:29:33.400

你试过 CSS 子选择器吗？

```
ul { /* parent list styles here */ }
ul > li > ul { /* child list styles here */ } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-10-29T22:01:45.893

此处给出的解决方案将起作用，但输入过多。由于选择器在 CSS3 中的工作方式，因此可能会被简化，...</p>

```
/* list styles */

/* ordered lists */
ol { list-style-type: decimal;}
ol ol { list-style-type: upper-alpha;}
ol ol ol {list-style-type: upper-roman;}
ol ol ol ol {list-style-type: lower-alpha;}
ol ol ol ol ol {list-style-type: lower-roman;}
ol ol ol ol ol ol {list-style-type: lower-greek;}

/* set colours here */
ol li { color: darkblue; }
ol ol li { color: orange; }
ol ol ol li { color: darkgoldenrod; }
ol ol ol ol li { color: green; }
ol ol ol ol ol li { color: blue; }
ol ol ol ol ol ol li  { color: indigo; }

/* unordered lists */
ul { list-style: disc outside ;}
ul ul { list-style: square outside ;}
ul ul ul {list-style: circle outside ;}
ul ul ul ul {list-style: disc outside ;}
ul ul ul ul ul {list-style: square outside ;}
ul ul ul ul ul ul {list-style: circle outside ;}

/* set colours here */
ul li { color: darkblue; }
ul ul li { color: orange; }
ul ul ul li { color: darkgoldenrod; }
ul ul ul ul li { color: green; }
ul ul ul ul ul li { color: blue; }
ul ul ul ul ul ul li { color: indigo; } 
```

在“ol”之间加上“li”——反之亦然——是多余的，可以省略。

此外，由于列表项将继承有序/无序列表的属性，第二个集合可以用“ul”代替。

```
/* unordered lists */
ul { 
   list-style-type: circle;
   color: red;
   }
ul ul { 
   list-style-type: disc;
   color: orange;
   }
ul ul ul {
   list-style-type: square;
   color: darkgoldenrod;
   } 
```

这是一个通用的答案，（因为这个问题很老了，我推测具体的用例已经解决了）。

ERRATUM：关于颜色值的错误。已更正。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T19:15:57.357

使用 `ul li ul li {...}`或

`ul li ul {....}`为子列表赋予不同的样式。如果您正在寻找带有子菜单的导航菜单。

[这](http://www.ourtuts.com/create-a-drop-down-navigation-menu-with-html5-and-css3/)是一个很好的例子。

它使用 CSS3。

# cakephp-1.3 - Cakephp 1.3 Deep HABTM 查找条件

> ID：12787349
> 
> 赞同：0
> 
> 时间：2012-10-08T18:25:45.433
> 
> 标签：cakephp-1.3

我有以下型号：
`Carrier`, `Store`, `Classification`.
情况如下：
`Carrier` **HABTM** `Store`和`Store` **HABTM** `Carrier`。
`Carrier`也有**很多** `Classification`。
在过去的 8 个小时左右，我一直在努力寻找所有的`Carriers`地方`Store.id = 152`。
我遇到麻烦的地方是，我希望生成的数组包含`Classification`来自`Carriers`. 我也想排序`Classifications`。
我已经尝试了很多东西。我所有的答案要么在`carriers`不`classifications`包含的情况下得到了正确的答案，要么在包含在内的情况下得到了**所有**的答案。 `carriers``classifications`
我已经尝试过可包含的，它似乎并没有限制结果，它似乎抓住了所有的运营商，如果他们不是正确的商店，他们就会把商店留空。
我试过加入，但我也无法成功地让它工作。
我可能做错了什么，但我一生都无法弄清楚。
**带代码**

```
class Carrier extends AppModel
{
    var $name = 'Carrier';
    var $actsAs = array('Containable');
    var $hasAndBelongsToMany = array('Rect','Store');
    var $belongsTo = array('Classification','Category');
}

class Store extends AppModel
{
    var $name = 'Store';
    var $hasAndBelongsToMany = array('Carrier');
    var $belongsTo = array('SparkPlug.User');
    var $actsAs = array('Containable');
}

class Classification extends AppModel
{
    var $name = 'Classification';
    var $actsAs = array('Containable');
    var $hasMany = 'Carrier';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:42:43.837

我发现的一种解决方案是创建 habtm 模型并通过使用 contains 和手动连接子句在其上设置条件。

型号代码如下：

`store.php`

```
<?
class Store extends AppModel {

    var $actsAs = array('Containable');
    var $hasMany = array('CarriersStore');
}
?> 
```

`carrier.php`

```
<?
class Carrier extends AppModel {

    var $actsAs = array('Containable');
    var $hasMany = array('CarriersStore');
}
?> 
```

`carriers_store.php`

```
<?
class CarriersStore extends AppModel {

    var $belongsTo = array('Store', 'Carrier');
    var $actsAs = array('Containable');

}
?> 
```

然后，在`carriers_controller.php`应用条件并获得 Store 和 Carrier 模型的复杂语法中是：

```
$carriers = $this->Carrier->find('all', array(
    'conditions' => array('CarrierStore.store_id' => 1),
    'contain' => array('CarriersStore' => array('Store')),
    'joins' => array(
        array(
            'table' => 'carriers_stores', 
            'alias' => 'CarrierStore', 
            'type' => 'INNER', 
            'conditions' => array('CarrierStore.carrier_id = Carrier.id')
        )

    )
)); 
```

我希望这有帮助。这个问题困扰了我很长时间，直到最近我才发现了这个解决方法。

# mysql - INSERT ... SELECT 到同一张表

> ID：12787351
> 
> 赞同：-1
> 
> 时间：2012-10-08T18:25:54.173
> 
> 标签：mysql

我有一个包含许多列的表。对于每一行，我想选择三列 ( `PAR_BOOK, PAR_PAGE, PAR_LINE`) 并将这三列的内容连接到新的第四列 (APN)。

因此，如果 PAR_BOOK=0108、PAR_PAGE=291 和 PAR_LINE=07，则 APN 应为 010829107

有道理？

但是，我不确定应该使用什么查询来执行此操作。我需要将结果存储回同一个表中，因为它最终需要以 csv 格式导出，以便与将要映射数据的程序一起使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T18:29:38.197

假设您的第四列已经在表中，您将使用以下更新查询：

```
UPDATE YourTable
SET APN = CONCAT(PAR_BOOK, PAR_PAGE, PAR_LINE) 
```

如果您的第四列还没有出现在表中，您应该`ALTER TABLE`在运行该语句之前先使用该语句添加它`UPDATE`：

```
ALTER TABLE YourTable
ADD APN VARCHAR(256) NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:28:46.217

插入同一张表`INSERT INTO ... SELECT ...`完全没有问题。MySQL 将选定的行保存在一个临时表中。

# android - Visual Studio 和手机开发

> ID：12787352
> 
> 赞同：3
> 
> 时间：2012-10-08T18:25:54.547
> 
> 标签：android, asp.net, mobile, visual-studio-2012

如果我想针对使用 HTML5、CSS 和 Javascript 客户端的手机（Android、Windows Phone 8 等），我会使用哪种 Visual Studio 2012 项目类型？

我认为是 ASP.Net，但我没有看到任何提到电话或 javascript 的进一步细分。好的，我不确定 ASP.Net 使用什么语言。

输出语言在 ASP.Net 中是否可配置？

javascript是如何实现的？

如果不是 ASP.Net，哪种项目类型针对 HTML5、CSS 和 Javascript 客户端，以便我可以针对手机开发？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T18:55:30.727

如果您正在学习 ASP.NET，那么最好的选择是从 MVC 开始，因为您可以利用新的[Mobile Project Template](http://www.asp.net/whitepapers/mvc4-release-notes)。

本教程将教您如何在 ASP.NET MVC 4 Web 应用程序中使用移动功能的基础知识：

[ASP.NET MVC 4 移动功能](http://www.asp.net/mvc/tutorials/mvc-4/aspnet-mvc-4-mobile-features)

jQuery 和 jQuery UI 库也包含在 ASP.NET MVC 4 中：

[新的 MVC4 项目模板](http://msdn.microsoft.com/en-us/vs11trainingcourse_aspnetmvc4_topic2.aspx)

我还建议您结合响应式网页设计 (RWD) 查看 CSS 媒体查询：

[响应式网页设计](http://www.codeproject.com/Articles/400502/Responsive-Web-Design)

最后但同样重要的是，看看 HTML5 Boilerplate 项目：

[开始使用 HTML5 样板](http://weblogs.asp.net/dwahlin/archive/2011/06/05/getting-started-using-html5-boilerplate.aspx)

上一个问题有一些很好的资源链接：

[如何将现有的 ASP.NET 网站转换为 HTML 5](https://stackoverflow.com/questions/5256171/how-to-convert-an-existing-asp-net-website-to-html-5/5557192#5557192)

# android - 使用 GCM、Urban Airship 发送推送通知

> ID：12787354
> 
> 赞同：1
> 
> 时间：2012-10-08T18:26:01.323
> 
> 标签：android, push-notification, urbanairship.com

我在 Google Console 中创建了一个示例项目。参考本网站的示例，[http://code.google.com/p/blog-samples/downloads/detail](http://code.google.com/p/blog-samples/downloads/detail?name=gcm_sample_update1.rar&can=2&q=#makechanges) ?name=gcm_sample_update1.rar&can=2&q=#makechanges我得到了我的注册 ID。现在我不知道下一步该做什么，如何在我的应用程序中实现推送通知。我想使用 Urban Airship 向我的应用发送推送。我在 Urban Airship 中创建了一个应用程序，通过提供包名称、通过 Google 控制台获得的 API 密钥。我需要向我的服务器发送 Apid 以获取消息。但我不知道如何获得 Apid。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:30:27.310

它在这里解释：http: [//developer.android.com/guide/google/gcm/gs.html](http://developer.android.com/guide/google/gcm/gs.html) 编写 Android 应用程序 您必须下载并添加 gcm 库。然后在清单中进行更改：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="xx"/> 
```

和

```
<permission android:name="my_app_package.permission.C2D_MESSAGE" android:protectionLevel="signature" />
<uses-permission android:name="my_app_package.permission.C2D_MESSAGE" /> 
```

在“my_app_package”中插入您的包名称。添加其他权限

```
<!-- App receives GCM messages. -->
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<!-- GCM connects to Google Services. -->
<uses-permission android:name="android.permission.INTERNET" /> 
<!-- GCM requires a Google account. -->
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<!-- Keeps the processor from sleeping when a message is received. -->
<uses-permission android:name="android.permission.WAKE_LOCK" /> 
```

接收者

```
<receiver android:name="com.google.android.gcm.GCMBroadcastReceiver"         android:permission="com.google.android.c2dm.permission.SEND" >
<intent-filter>
    <action android:name="com.google.android.c2dm.intent.RECEIVE" />
    <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
    <category android:name="my_app_package" />
</intent-filter>
</receiver> 
```

再次在“my_app_package”中写下你的包名。然后声明你的服务

```
<service android:name=".GCMIntentService" /> 
```

您必须创建一个名为 GCMIntentService 的类。这个类将处理推送通知。它应该如下所示：

```
class GCMIntentService extends  com.google.android.gcm.GCMBaseIntentService{
     public void onRegistered(Context context, String regId){}
     public void onUnregistered(Context context, String regId){}
     public void onError(Context context, String errorId){}
     public void onMessage(Context context, Intent intent){}
} 
```

在 onMessage() 中，您必须处理推送消息。您可以使用通知。

然后在您的起始活动中，您将不得不把这个

```
GCMRegistrar.checkDevice(this);
GCMRegistrar.checkManifest(this);
final String regId = GCMRegistrar.getRegistrationId(this);
if (regId.equals("")) {
  GCMRegistrar.register(this, SENDER_ID);
} else {
  Log.v(TAG, "Already registered");
} 
```

在 onCreate() 中。SENDER_ID 是包含您从谷歌控制台获得的所有数字的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:00:01.487

嗯.. 获取 APID 有 3 个步骤 1\. 运行应用程序 2\. 打开 logcat 3\. 找到 APID

注意第一次你可能会得到 APID(Android Push ID) null 所以再次运行它你会得到

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-18T14:10:50.000

如果你想使用`Urbanairship`你必须使用他们的 SDK 进行用户注册（看[这里](https://support.urbanairship.com/customer/portal/articles/1164142-can-i-create-register-an-apid-without-using-your-library-)），导致 UA 为每个设备创建一个新的 id，而不是在使用他们的 API 推送消息时使用谷歌注册 ID。

不知道他们为什么这样做，但它... =\

# css - 如何在 Eclipse 中链接 CSS 文件夹和图像文件夹？

> ID：12787357
> 
> 赞同：0
> 
> 时间：2012-10-08T18:26:06.747
> 
> 标签：css, eclipse

我在 Eclipse 中有一个这样的目录：

```
SimpleServletProject
     webontent
       >> images
           sep2.jpg
           etc.
       >> css
       >> MetaINF
       >> WebINF
            index.html
            login.html 
```

图像和 CSS 是保存图像和 CSS 文件的两个文件夹。在 CSS 文件夹中，我有一个 login.css 文件。

我想给出图像文件夹中图像的路径。CSS代码是：

```
background-image:url("/images/sep2.jpg"); 
```

路径应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:00:19.523

请尝试在您的 css 文件中执行以下操作。这应该适合你。

```
background-image: url("../images/sep2.jpg"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:29:25.097

尝试`background: url("/images/sep2.jpg");`改用。这应该为您的项目提供正确的路径。否则我们需要更多代码来识别问题

# ruby-on-rails - RoR 数据表从不加载数据？

> ID：12787358
> 
> 赞同：2
> 
> 时间：2012-10-08T18:26:09.883
> 
> 标签：ruby-on-rails, datatables

这是我第一次使用数据表。我希望能够在我的项目表中显示记录并按每个字段排序。我正在关注这个 RailCast 并使用了他们提供的代码。但是，我的页面加载没有错误，但实际记录从未加载到表中——它只是无限期地显示“正在处理...”。有什么想法会导致这种情况吗？我的一些代码：

view/projects/new.html.erb（我的应用程序的索引指向的位置，以及我希望显示表格的位置）

```
<table id="projects" class="display" data-source="<%= projects_url(format: "json") %>">
  <thead>
    <tr>
      <th>File</th>
      <th>Author</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table> 
```

项目.js.coffee

```
jQuery ->
  $("#projects").dataTable
    bProcessing: true
    bServerSide: true
    sAjaxSource: $('#projects').data('source')
    "aaSorting": [[ 0, "desc" ]] 
```

项目控制器

```
 # GET /projects/new
  # GET /projects/new.json
  def new
    @projects = Project.all
    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: ProjectsDatatable.new(view_context) }
    end
  end 
```

Projects_datatable.rb

```
class ProjectsDatatable
  delegate :params, :h, :link_to, :number_to_currency, to: :@view   
  def initialize(view)
    @view = view
  end

  def as_json(options = {})
    {
      sEcho: params[:sEcho].to_i,
      iTotalRecords: Project.count,
      iTotalDisplayRecords: Project.count,
      aaData: data
    }
  end

private

  def data
    projects.map do |proj|
      [
        h(proj.filename),
        h(proj.author)
      ]
    end
  end

  def projects
    @projects ||= fetch_projects
  end

  def fetch_projects
    projects = Project.order("#{sort_column} #{sort_direction}")
    projects = projects.page(page).per_page(per_page)
    if params[:sSearch].present?
      projects = projects.where("name like :search or category like :search", search: "%#{params[:sSearch]}%")
    end
    projects
  end

  def page
    params[:iDisplayStart].to_i/per_page + 1
  end

  def per_page
    params[:iDisplayLength].to_i > 0 ? params[:iDisplayLength].to_i : 10
  end

  def sort_column
    columns = %w[name category released_on price]
    columns[params[:iSortCol_0].to_i]
  end

  def sort_direction
    params[:sSortDir_0] == "desc" ? "desc" : "asc"
  end
end 
```

我的项目迁移：

```
class CreateProjects < ActiveRecord::Migration
  def change
    create_table :projects do |t|
      t.string :filename
      t.string :location
      t.string :author
    end
  end
end 
```

如果有人有任何意见，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T13:16:49.290

答案肯定有点晚了，但我可以在这些行中看到一些错误：

```
projects = projects.where("name like :search or category like :search", search: "%#{params[:sSearch]}%") 
```

和

```
columns = %w[name category released_on price] 
```

您必须用文件名、位置、作者替换这些字段。

```
iTotalDisplayRecords:  Project.count, 
```

也是错的，换成

```
iTotalDisplayRecords: projects.total_entries, 
```

确保你有 will_paginate

# .htaccess - 根据字符串值在 htaccess 中添加字符串

> ID：12787362
> 
> 赞同：1
> 
> 时间：2012-10-08T18:26:21.130
> 
> 标签：.htaccess

我想更改网址

从

[http://www.example.com/option=com_content&view=propertyshow&pid=47610](http://www.example.com/option=com_content&view=propertyshow&pid=47610)

至

[http://www.example.com/index.php?option=com_content&view=propertyshow&pid=47610](http://www.example.com/index.php?option=com_content&view=propertyshow&pid=47610)

我怎么能在 .htaccess 中做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:29:59.477

这应该做。

```
# Turn on URL rewriting
RewriteEngine On

# Installation directory
RewriteBase /

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL
RewriteRule ^(.*)$ index.php?$1 [PT,L] 
```

# php - Salesforce 创建记录但以 405 响应

> ID：12787366
> 
> 赞同：1
> 
> 时间：2012-10-08T18:26:38.633
> 
> 标签：php, wordpress, nginx, salesforce

我编写了一个通过 REST API 与 Salesforce 交互的 Wordpress 插件。它使用用户名/密码成功获取实例 URL 和身份验证令牌。

我可以分别使用 wp_remote_post 和 GET 和 POST 提交查询和创建对象。

然而，在创建对象时，虽然在 Salesforce 实例中成功创建，但我得到以下响应我的 POST：

> {"message":"HTTP 方法 'POST' 不允许。允许的是 HEAD,GET,PATCH,DELETE","errorCode":"METHOD_NOT_ALLOWED"}

使用来自这些请求的相同 json 正文内容，我可以毫无问题地通过 Salesforce Workbench 提交和创建。我得到一个如下所示的正确响应：

> {“id”：“003E000000OubjkIAB”，“成功”：真，“错误”：[]}

我发送的标头中是否有 Salesforce 仅部分不同意的内容？以下是使用 wp_remote_post 发送的其他一些参数 - [http://codex.wordpress.org/HTTP_API#Other_Arguments](http://codex.wordpress.org/HTTP_API#Other_Arguments)

这是调用它的php代码：

```
$connInfo['access_token'] = get_transient('npsf_access_token');
$connInfo['instance_url'] = get_transient('npsf_instance_url');
$url = $connInfo['instance_url'] . $service;

$sfResponse = wp_remote_post($url, array(
        'method' => $method,
        'timeout' => 5,
        'redirection' => 5,
        'httpversion' => 1.0,
        'blocking' => true,
        'headers' => array("Authorization" => "OAuth ". $connInfo['access_token'], "Content-type" => "application/json"),
        'body' => $content,
        'cookies' => array()
        )
    ); 
```

$content 在到达这一点之前正在通过 json_encode 进行编码。

**更新：** 它特定于 WP_Http_Curl 类发送的额外 CURL 选项之一。我还没有确定哪一个 Salesforce 存在问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T02:16:43.710

解决方案是在请求中禁用重定向。您将其设置为 5（默认值）——它需要设置为 0 才能正常工作。

初始请求有效，但 Salesforce 会发送一个`location`标头作为响应的一部分（新创建对象的 URL）。WordPress 认为它​​被告知该 URL 已移动，并且应在此新 URL 上重试。您看到的响应是对您刚刚创建的实际对象的第二次请求的结果。该 URL 显然不接受`POST`请求。

Salesforce 发送这样的标头有点奇怪，但在 WordPress 方面也[有一些讨论，](http://core.trac.wordpress.org/ticket/16889)即 WordPress 不应该遵循可以解决此问题`location`的非`301`/响应的标头。`302`

感谢您顺便发布这个。你的更新让我开始调试`WP_Http_Curl`，这让我意识到它实际上是在发出第二个 HTTP 请求。

# css - div中图像的垂直对齐

> ID：12787367
> 
> 赞同：0
> 
> 时间：2012-10-08T18:26:51.507
> 
> 标签：css, html, image

> **可能重复：**
> [垂直居中可变高度图像，同时保持最大宽度/高度](https://stackoverflow.com/questions/6282968/vertical-centering-variable-height-image-while-maintaining-max-width-height)

所以这里有一个问题，我有不固定大小的图像，我只知道高度或宽度必须是 200px。现在我想把这个图像放在固定大小为 200px x 200px 的 div 中，并垂直和水平居中。是否可以？

我搜索了很多问题，但没有一个回答我的问题，这对于解决所有问题应该是很困难的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T18:58:39.213

取自[这个答案](https://stackoverflow.com/questions/6282968/vertical-centering-variable-height-image-while-maintaining-max-width-height/6284195#6284195)的基本思想。不依赖[`display:table-cell;`](http://caniuse.com/#feat=css-table)IE7 不支持的内容。

## 代码（[演示](http://jsfiddle.net/Lsj64/)）

```
<div class="image-wrapper"><img src="http://example.com/image.png"></div> 
```

```
.image-wrapper {
    position:relative;
    width:200px;
    height:200px;
}
.image-wrapper img {
    position:absolute;
    top:0;
    bottom:0;
    left:0;
    right:0;
    margin:auto;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:40:38.570

您可以让它像表格单元格一样显示：

[http://jsbin.com/ijoved/1/](http://jsbin.com/ijoved/1/)

```
/* This is item wrapping each image */
.item { 
  height: 200px;
  width: 200px;
  display:table-cell;
  vertical-align:middle;
  text-align: center;
} 
```

# c# - C# 日期时间解析问题

> ID：12787368
> 
> 赞同：14
> 
> 时间：2012-10-08T18:26:53.180
> 
> 标签：c#, .net, datetime

尝试将日期/时间从字符串转换为 DateTime 时，我没有得到正确的值。

```
DateTime testDate = DateTime.ParseExact("2012-08-10T00:51:14.146Z", "yyyy-MM-ddTHH:mm:ss.fffZ",    CultureInfo.InvariantCulture, DateTimeStyles.AssumeUniversal); 
```

我的结果是 2012-08-09 8:51:14 PM。为什么会被抵消？我只是希望它具有相同的价值。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-08T18:34:33.373

您正在解析 UTC 日期，但 DateTime.Kind 是本地的。您应该使用 DateTimeStyles.AdjustToUniversal 解析以将 Kind 标记为 Utc。

```
 DateTime testDate = DateTime.ParseExact("2012-08-10T00:51:14.146Z", "yyyy-MM-ddTHH:mm:ss.fffZ", CultureInfo.InvariantCulture, DateTimeStyles.AssumeUniversal);

        Trace.WriteLine(testDate);  //  8/9/2012 8:51:14 PM
        Trace.WriteLine(testDate.ToString()); //  8/9/2012 8:51:14 PM
        Trace.WriteLine(testDate.ToUniversalTime()); //  8/10/2012 12:51:14 AM
        Trace.WriteLine(testDate.Kind); // Local

       testDate = DateTime.ParseExact("2012-08-10T00:51:14.146Z", "yyyy-MM-ddTHH:mm:ss.fffZ", CultureInfo.InvariantCulture, DateTimeStyles.AdjustToUniversal);

        Trace.WriteLine(testDate);//  8/10/2012 12:51:14 AM
        Trace.WriteLine(testDate.ToString());//  8/10/2012 12:51:14 AM
        Trace.WriteLine(testDate.ToUniversalTime());//  8/10/2012 12:51:14 AM
        Trace.WriteLine(testDate.Kind); // Utc 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T18:33:15.480

您应该使用[DateTimeStyles.AdjustToUniversal](http://msdn.microsoft.com/en-us/library/91hfhz89%28VS.100%29.aspx)。输入`DateTime`已经是通用的，并且 AdjustToUniversal 枚举选项会将输入转换为本地时间，尽管您会得到结果 Kind of `DateTimeKind.Unspecified`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T18:29:37.880

您的服务器时区是什么，如果您使用`AssumeUniversal`它将您的输入时间转换为 UTC 时间。

那时你可能在美国东部时间。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-05-13T14:11:07.790

知道这是多年后的答案，但今天遇到了这个问题，一旦我解决了我的问题，就想添加一些我在其他答案中没有看到的上下文。

回到 OPs 代码片段，它没有执行 OP 预期的将 UTC 时间字符串存储为 UTC`DateTime`的原因是因为`DateTimeStyles.AssumeUniversal`唯一指定输入字符串是 UTC 字符串。默认情况下，C# 会将`DateTime`'s 创建为`DateTimeKind.Local`. 在另一个答案中指出了这一点。这意味着时间从 UTC 转换为本地时间。

为确保您的最终结果是 UTC `DateTime`，您需要使用`DateTimeStyles`of `DateTimeStyles.AdjustToUniversal`。其他答案中也提到了这一点。但是，如果您的输入字符串没有明显的时区，则可能会假定它是本地的，然后从本地转换为 UTC。

幸运的是 DateTimeStyles 实际上是一个标志枚举，这意味着我们可以同时使用上述两个选项。例如：

```
DateTime testDate = DateTime.ParseExact("2012-08-10T00:51:14.146Z", "yyyy-MM-ddTHH:mm:ss.fffZ",    CultureInfo.InvariantCulture, DateTimeStyles.AdjustToUniversal | DateTimeStyles.AssumeUniversal); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-08T18:42:51.783

我只是建议您要使用`.AssumeLocal`而不是`.AssumeUniversal`.

你有一个未知时区的时间戳，如果你知道时间戳是指在你当地时区发生的事件，那么你应该告诉解析假设时间戳是你本地的（即在你的时区）。

通过使用`.AssumeUniversal`，您指示解析器将时间戳视为 UTC 时间戳，当您使用本地时区显示它时，它会自动偏移该数量。

**编辑：**

一件重要的事情：时间戳中[的大写“Z”](https://stackoverflow.com/q/833102/161052)表明它是 UTC 时间戳，这意味着您确实希望将其视为通用。如果要将其视为本地时间戳，则应从时间戳和相应的解析字符串中删除 Z。

参考：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx#KSpecifier](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx#KSpecifier)

# jquery - Jquery 鼠标悬停在 IE 中不起作用

> ID：12787373
> 
> 赞同：0
> 
> 时间：2012-10-08T18:27:15.870
> 
> 标签：jquery, internet-explorer, mouseover

当鼠标悬停时，我需要在另一个图像上显示和图像，这是一种菜单。这适用于 chrome 和 firefox。任何想法？来了

```
<div id="button1OverStyle" class="buttonOverStyle" onclick="changeFrame('main/main.html')" >
<img id="button1OverStyleImage" src="images/button_home.png" height="24" width="46" /> 
```

```
<script>      
  $('#button1OverStyle').hover(function(e) {
    showTittle('button1OverStyleImage');  });
  $('#button1OverStyle').mouseleave(function(e) {
    hideTittle('button1OverStyleImage');});
  $('#button2OverStyle').mouseover(function(e) {
    showTittle('button2OverStyleImage'); });
  $('#button2OverStyle').mouseleave(function(e) {
    hideTittle('button2OverStyleImage'); });      
</script> 
```

* * *

我找到了在哪里找到它。这就是问题所在

在这一行

```
<div id="button1OverStyle" class="buttonOverStyle" onclick="changeFrame('main/main.html')" >
            <img id="button1OverStyleImage" src="images/button_home.png" height="24" width="46" />
        </div> 
```

这是CSS

```
.buttonOverStyle{   position:absolute;  cursor:pointer;     z-index:1000;   height:24px;}  .buttonOverStyle img {   display:none;} 
```

问题是，如果图像不显示，Internet Explorer 无法识别 div，因此无法进行“mouseenter”或“mouseover”。

**任何想法？？？？？？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:30:15.997

尝试[`mouseenter`](http://api.jquery.com/mouseenter/)：

> mouseenter JavaScript 事件是 Internet Explorer 专有的。由于事件的通用性，jQuery 模拟了这个事件，因此无论浏览器如何都可以使用它。当鼠标指针进入元素时，该事件被发送到元素。任何 HTML 元素都可以接收此事件。

**HTML**

```
<div>test</div>​ 
```

**jQuery**

```
$("div").mouseenter(function(){
    $(this).css("color", "red");
});
$("div").mouseleave(function(){
    $(this).css("color", "blue");
}); 
```

**[例子](http://jsfiddle.net/fBM4j/)**

你也可以试试[`.hover()`](http://api.jquery.com/hover/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:10:50.323

解决方案！

我用 Css 做这一切，但不透明

```
.buttonOverStyle img {
-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=10)";
filter: alpha(opacity=10);
opacity: .1;}

.buttonOverStyle img:hover {
-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=90)";
filter: alpha(opacity=90);
opacity: .9;} 
```

这对我有用

# objective-c - iOS 中的 Sqlite 数据库似乎是从用户目录加载的，但文件与应用程序中的不同

> ID：12787377
> 
> 赞同：0
> 
> 时间：2012-10-08T18:27:28.180
> 
> 标签：objective-c, ios, sqlite

好的，所以在我的应用程序的初始加载时，我从一个 sqlite 数据库中读取。我使用此代码打开它：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"golfScores.sqlite"];

if(sqlite3_open([path UTF8String], &database) == SQLITE_OK){ 
```

我一直相信这会从应用程序目录而不是应用程序包打开数据库。添加、删除或更新记录时，应用程序内一切正常。我可以关闭应用程序并重新打开它，数据就会按原样显示。问题是，如果我用终端查看数据库，什么都没有改变。这是完全不同的。所以它必须在捆绑包中使用并保存到数据库中，对吗？如何让应用程序更新应用程序目录中的数据库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T18:43:00.597

您的代码对我来说看起来是正确的，听起来好像它工作得很好！您绝对没有访问您的应用程序包。捆绑包中的文件不应该由您的应用程序编辑，因为它会破坏代码签名。但是，可以使用 NSBundle 类来读取它们。

我猜想您使用终端查看的任何内容都与您的应用程序正在访问的数据库文件不同。

# php - 向 OpenCart 中的所有页面添加 javascript

> ID：12787378
> 
> 赞同：7
> 
> 时间：2012-10-08T18:27:33.330
> 
> 标签：php, javascript, opencart

我是 OpenCart 的新手，对 PHP 没有任何经验，所以我有一个问题。我想添加以下 JavaScript 来隐藏移动浏览器上的 url 栏

```
// When ready...
 window.addEventListener("load",function() {
 // Set a timeout...
 setTimeout(function(){
 // Hide the address bar!
 window.scrollTo(0, 1);
 }, 0);
}); 
```

但是，我找不到插入此代码的方法，因此此代码将在 OpenCart 的所有页面上执行。我应该把这段代码放在哪里？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-14T08:39:18.623

将脚本保存到文件中，例如“catalog/view/javascript/myscript.js”

然后加

```
$this->document->addScript('catalog/view/javascript/myscript.js'); 
```

在此行之前的某个位置到**目录/控制器/common/header.php ：**

```
$this->data['scripts'] = $this->document->getScripts(); 
```

您也可以使用普通的 html 标记将脚本内联到**catalog/view/theme/{theme name}/template/common/header.tpl 。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:36:14.200

查看[主题文档](http://www.opencart.com/index.php?route=documentation/documentation&path=77_43_44)，相信您要编辑以下文件：

```
catalog/view/theme/{your-theme}/template/common/header.tpl 
```

这些模板（页眉、页脚等）应出现在所有页面上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-01T08:16:31.573

如果你想要脚本到 OC 的所有页面，只需在 footer.tpl 或 footer.twig 中的页脚标记之前添加它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-01T06:12:59.623

要添加这样的脚本，只需转到管理面板 > 设计 > 主题编辑器 > 选择“common” > 页脚，然后在文件末尾（在 之后`</html>`）添加脚本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-03T17:28:33.190

您不需要经历这个麻烦，特别是如果您无法访问 FTP。您只需进入管理面板 > 设计 > 主题编辑器 > 并选择相应的部分来插入代码。如果是页脚，则只需选择 footer.twig。

添加代码后，单击保存，您将立即看到更改。如果直接将代码添加到 FTP 上的文件中，它将不起作用。

在 OpenCart 3 上试用和测试

# javascript - Jquery $(window).height() 函数不返回实际窗口高度

> ID：12787380
> 
> 赞同：24
> 
> 时间：2012-10-08T18:27:58.827
> 
> 标签：javascript, jquery, window, height

我有一个页面，当用户滚动到底部时，我需要动态加载 ajax 内容。问题是 JQuery 没有返回正确的窗口高度。我以前使用过这个函数，从未见过它失败，但由于某种原因，它会返回与文档高度相同的值。我在这里有测试页面：bangstyle.com/test-images

我已经编写了在页面加载时显示的警报，以及每当用户在顶部下方滚动 500 像素时显示：

```
function scroller() {

                        if($(window).scrollTop() > 500){

                        delay(function(){ //200ms wait
                                pagecounter++;
                                sideshow();
                                alert("window height: " + $(window).height() + " scrolltop: " + $(window).scrollTop() + " document height: " + $(document).height());

                                return false;
                            }, 200 );

                                    }
                            } 
```

我之前尝试过发布此内容，但我删除了它，因为我没有得到解决方案。我希望可以发布指向我的测试页面的链接。顺便说一句，我已经在 Mac Safari 和 Mac FF 上对此进行了测试。我在其他页面上运行了相同的代码，它工作正常。我觉得这个页面的 dom 中一定有什么东西导致 JS 失败，但不知道那会是什么。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-10-08T18:58:38.527

查看您的 HTML 源代码。第一行应该是`<!DOCTYPE html>`并且你有`<style>`标签。

因此，您的文档似乎在 Quirks 模式下运行，而 jQuery 无法计算正确的窗口尺寸。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T19:17:25.687

```
//works in chrome
$(window).bind('scroll', function(ev){

    //get the viewport height. i.e. this is the viewable browser window height
    var clientHeight = document.body.clientHeight,
        //height of the window/document. $(window).height() and $(document).height() also return this value.
        windowHeight = $(this).outerHeight(),
        //current top position of the window scroll. Seems this *only* works when bound inside of a scoll event.
        scrollY = $(this).scrollTop();

    if( windowHeight - clientHeight === scrollY ){
        console.log('bottom');
    }

}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T14:51:55.307

我有同样的问题。我发现了一些东西：

1）当您尝试在文档完成渲染之前获取实际高度时会出现问题；2）当您不使用正确的 DOCTYPE（如上所述）时，问题发生在谷歌浏览器中 3）即使在文档完全呈现后，它也总是发生在谷歌浏览器中。

对于 google chrome，我在这里找到了一种解决方法：[get-document-height-cross-browser](http://james.padolsey.com/javascript/get-document-height-cross-browser/) 我仅将此解决方案用于 google chrome，它解决了我的问题，我希望对仍然有问题的人有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-27T07:50:47.667

这是一个老问题，但我最近在 IE10 中无法获得正确的窗口高度几个像素。

我发现 IE10 默认应用 75% 的缩放，这会影响窗口和文档的测量。

因此，如果您得到错误的宽度或高度，请确保将缩放设置为 100%。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T18:58:16.140

环顾四周并偶然发现了这一点，不知道它是否有帮助，但值得提出。

[为什么 $(window).height() 这么错误？](https://stackoverflow.com/questions/10569301/why-is-window-height-so-wrong)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-13T02:54:04.070

由于 jquery（以及一般的 dom）在 quirksmode 中没有正确计算大小，因此有两种解决方案：

1.  在页面顶部添加 doctype html（如“正确”答案中所述），或
2.  如果第一个选项不是选项，请使用 window.innerHeight、window.innerWidth。

希望能帮助到你。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-27T22:57:47.890

我将脚本从页脚移到了页脚，这为我解决了问题。

# ios - iOS 人机界面指南：没有 Popover 的 iPad 上的选取器控制

> ID：12787382
> 
> 赞同：0
> 
> 时间：2012-10-08T18:28:13.423
> 
> 标签：ios, ipad, user-interface, uipickerview, hig

我计划使用嵌入在容器视图控制器中的几个选择器控件和分段控件（作为一种**控制面板**）来控制第二个子视图控制器的内容。但是，根据[Apple iOS Human Interface Guidelines](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/UIElementGuidelines/UIElementGuidelines.html#//apple_ref/doc/uid/TP40006556-CH13-SW23)，在 iPad 上，选择器可能不会出现在主屏幕中，而必须出现在弹出窗口中：

> 在 iPad 上，仅在弹出框内显示选择器。选择器不适合主屏幕。

这条规定有多严格？

在我的情况下，可以在主屏幕上使用选择器以提供所需的交互性吗？

![在此处输入图像描述](../Images/67f4e98f8a005c9f580af36b6fed0109.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T18:55:25.417

显然，您的问题的答案实际上取决于 Apple，而不是我们开发人员可能会想或说的任何事情。你的屏幕设计在我看来很合理，但问题在于苹果是否会批准。

最好询问是否有人在弹出框之外通过选择器批准了应用程序。

或者，您可以询问是否有人因为在弹出框外使用 Pickers 而被拒绝了应用程序。

苹果的规则和常识有高度的重叠，但它们唯一不同的地方就是苹果。询问他们，或者只是提交您的应用程序以供批准并查看。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T03:53:54.967

这是我关于选择器的经验。我批准了一个应用程序（比如 appAA），它在模式视图中使用选择器视图，三个选择器，一个接着一个。我有另一个应用程序（比如 appBB），它基本上复制了 appAA 的模态视图。由于我无法重现的功能问题，此应用程序被拒绝。我在解决中心首次亮相，然后审稿人再次以其他理由拒绝，说选择器没有出现在弹出窗口中！我想如果我希望 appBB 获得批准，我必须将选择器放入弹出框，因为评论提到过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T19:47:05.413

我认为答案很简单*，它让 UI 看起来有多丑？*

选择器的左/右边缘最初旨在与 iPhone 屏幕的边缘齐平（它被硬编码为 320px 宽，在横向模式下无法正常工作）。在 iPad 上，UIPopover 让它与框架齐平。在不使用 UIPopover 的情况下实现此效果的明显方法是绘制自己的框架，而不是在选取器之间留下平坦的灰色背景。

然而，*最简单*（更好看，IMO）的解决方案是获取选取器背景（作为 1px 宽的图像）并使用 UIImageView 将其拉伸到所有选取器后面，使它们看起来像连续条的一部分。记得检查视网膜和非视网膜版本。

# c++ - GNURADIO：让流标签通过多个块？

> ID：12787383
> 
> 赞同：1
> 
> 时间：2012-10-08T18:28:15.247
> 
> 标签：c++, stream, tags, gnuradio

我刚刚能够构建和安装我自己的信号块。我只是想制作一个转发数据的块，但以某个定义的长度添加标签。然后，在数据被调制后，我开发了一个块，应该将标签读回给我。当块彼此相邻时，它可以工作。

例如输入 --> B1 --> B2 --> B3 --> 输出

B1 每 50 个项目添加一个标签，B2 是一些调制器（在我的例子中是 BPSK），B3 是标签阅读器。除非 B3 在 B1 之后，否则它永远不会打印任何东西。

我可能做错了什么，我对流标签有错误的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-06-18T02:04:44.963

现在很可能已经解决了这个问题。另一个获得答案的地方是 gnuradio-discussion 邮件列表。但是，以防万一其他人发现这个问题，我可能会添加一些颜色，希望能有所帮助。

请记住，GnuRadio 在 2012 年的早期版本。问题没有指定 GR 版本。这些天它是 GR 3.8 和 3.9，除非我弄错了，否则 3.10 正在开发中。

作为 GnuRadio 游戏的新手，我对标签进行了一些挖掘，因为我想使用它们沿数据路径传递有关某些信号参数的信息。我的挖掘/实现是在 GR 3.9 中完成的。标签传播有 3 个主要策略：

1.  TPP_DONT - 没有传播
2.  TPP_ALL_TO_ALL - 来自所有输入的标签传播到所有输出（默认）
3.  TPP_ONE_TO_ONE - 标签形成第 n 个输入传播到第 n 个输出
4.  TPP_CUSTOM -（我知道，这听起来像是关于宗教裁判所的 Monty Python 短剧） - 它与 TPP_DONT 相同，这就是为什么我只说 3 个政策。然而，它向读者表明该块将以自己的方式处理它。因此，最好使用它，如果没有其他文档目的的话。

我猜当时使用的 GnuRadio 版本应用了 TPP_DONT 策略（如果它使用了策略）。因此，没有为您进行任何传播。

如今，除非您覆盖默认的 TPP_ALL_TO_ALL 策略，否则您应该将标签放在数据路径中。

[编辑：刚刚意识到它在https://wiki.gnuradio.org/index.php/Stream_Tags#Tag_Propagation](https://wiki.gnuradio.org/index.php/Stream_Tags#Tag_Propagation)的描述可能要好得多

# memcached - 多个 Memcache 实例彼此保持同步？

> ID：12787389
> 
> 赞同：1
> 
> 时间：2012-10-08T18:28:41.927
> 
> 标签：memcached

我将为我的 Application 启动并运行多个 Memcache 实例。

（意味着 Memcache-1 在 Server-A 上运行， Memcache-2 在 Server-B 上运行。

运行在不同服务器上的这些 Memcache 服务器的多个实例是否可能彼此同步？

**意味着如果在服务器 A 中运行的 Memcache-1 删除了一个密钥，我需要在服务器 B 中运行 Memcache-2 还需要删除该密钥**

有这方面经验的大神分享一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T22:45:02.777

您的 memcached 客户端应该将每个键散列到特定服务器（这应该由客户端在后台完成），因此 memcached 集群中始终只有一个键。话虽如此，memcached 服务器不知道存在任何其他 memcached 服务器。

# android - 尝试打开活动时出现 LogCat 致命错误

> ID：12787394
> 
> 赞同：0
> 
> 时间：2012-10-08T18:28:59.663
> 
> 标签：android, android-intent, android-activity, android-logcat

当我尝试在我的应用程序中打开一个活动时，它应该显示一些已保存的消息（我保存在同一应用程序的另一个活动中）它强制关闭并在 LogCat 中向我显示这些错误：

```
 10-08 18:22:17.243: E/AndroidRuntime(269): FATAL EXCEPTION: main
  10-08 18:22:17.243: E/AndroidRuntime(269): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.mensagem/com.example.mensagem.Mensagenssalvas}: java.lang.NullPointerException
  10-08 18:22:17.243: E/AndroidRuntime(269):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
  10-08 18:22:17.243: E/AndroidRuntime(269):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
  10-08 18:22:17.243: E/AndroidRuntime(269):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
  10-08 18:22:17.243: E/AndroidRuntime(269):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
  10-08 18:22:17.243: E/AndroidRuntime(269):    at android.os.Handler.dispatchMessage(Handler.java:99)
  10-08 18:22:17.243: E/AndroidRuntime(269):    at android.os.Looper.loop(Looper.java:123)
  10-08 18:22:17.243: E/AndroidRuntime(269):    at android.app.ActivityThread.main(ActivityThread.java:4627)
  10-08 18:22:17.243: E/AndroidRuntime(269):    at java.lang.reflect.Method.invokeNative(Native Method)
  10-08 18:22:17.243: E/AndroidRuntime(269):    at java.lang.reflect.Method.invoke(Method.java:521)
  10-08 18:22:17.243: E/AndroidRuntime(269):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
  10-08 18:22:17.243: E/AndroidRuntime(269):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
  10-08 18:22:17.243: E/AndroidRuntime(269):    at dalvik.system.NativeStart.main(Native Method)
  10-08 18:22:17.243: E/AndroidRuntime(269): Caused by: java.lang.NullPointerException
  10-08 18:22:17.243: E/AndroidRuntime(269):    at com.example.mensagem.Mensagenssalvas.Mensagens(Mensagenssalvas.java:41)
  10-08 18:22:17.243: E/AndroidRuntime(269):    at com.example.mensagem.Mensagenssalvas.onCreate(Mensagenssalvas.java:26)
  10-08 18:22:17.243: E/AndroidRuntime(269):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
  10-08 18:22:17.243: E/AndroidRuntime(269):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
  10-08 18:22:17.243: E/AndroidRuntime(269):    ... 11 more 
```

在我使用此[链接](https://stackoverflow.com/questions/12786417/how-to-delete-all-value-from-a-column-in-sqlite-with-a-single-click)中的代码之前它是正常的，但在我使用代码之后，我的数据库`column`现在没有在我尝试打开的活动中打开。（这是为了显示消息）。

信使萨瓦斯.java

```
 public class Mensagenssalvas extends Activity {

    public SQLiteDatabase db;

    ArrayList<String> list = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mensagenssalvas);
    db = openOrCreateDatabase("banco.db", Context.MODE_WORLD_WRITEABLE, null);

    Mensagens();
}

private void Mensagens() {
    // TODO Auto-generated method stub

    ListView user = (ListView) findViewById(R.id.lvMensagens);

    String[] campos = new String[] {"mensagemsalva", "mensagemenviada"};

    list = new ArrayList<String>();
    Cursor c = db.query( "mensagens", campos, null, null, null, null, null);
    c.moveToFirst();
    if(c.getCount() > 0) {
        while(true) {
           list.add(c.getString(c.getColumnIndex("mensagemsalva")).toString());
            if(!c.moveToNext()) break;
        }
    }

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, list);

    user.setAdapter(adapter);

   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:36:53.390

您需要检查 Mensagenssalvas.java 的第 41 行并找出导致 NullPointerException 的原因。

在许多情况下，您只是忘记初始化它。

修复：不要将你想使用的设置为 NULL，而是将其设置为 0 或“”，具体取决于它是什么类型。您需要设置为具有“EMPTY”或“ZERO”值但不为 NULL 的值。

# iphone - ios更改默认应用语言

> ID：12787396
> 
> 赞同：0
> 
> 时间：2012-10-08T18:29:07.243
> 
> 标签：iphone, ios, xcode, ipad

我已经发布了一个应用程序，并添加了一个包含本地化的新应用程序。我已经在 iTunes Connect 上添加了新语言，但在应用程序信息中我看不到该语言，我只能看到以前的默认语言！如何更改默认语言？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:35:01.860

这是如何：

*   在 iTunes Connect 中，转到管理应用程序
*   转到应用程序并单击标题“应用程序信息”中的编辑链接
*   下拉菜单默认语言包含已添加的所有语言。选择任何一个然后保存。
*   单击下一部分中的“查看详细信息”按钮。
*   在选择另一种语言中：选择您想要的语言。
*   在元数据和上传中还有一个删除按钮。去做吧。

[苹果](http://developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/8_AddingNewApps/AddingNewApps.html)说

选择默认语言

输入用于输入应用程序详细信息以在 App Store 上显示的主要语言。例如，如果您从菜单中选择法语，则您需要上传法语元数据和资产。因此，您以法语输入的元数据和资产将显示在全球所有 App Store 中，除非您指定单独的本地化。

您在此处选择的默认语言不会显示在 App Store 中的 Languages 下。您在二进制文件中设置 App Store 上显示的信息。

在我的观点中，我已经指出了元数据和上传。您是否正确上传了元数据和资产并删除了旧的？

# extjs4.1 - 使用 extjs 和 Sencha Architect 进行 Java EE 应用程序开发的最佳实践

> ID：12787402
> 
> 赞同：-1
> 
> 时间：2012-10-08T18:29:29.173
> 
> 标签：extjs4.1, sencha-architect

我是 extjs 的新手，也是 javascript 世界的新手。我已经在 jsp/servlet、JSF 等中开发了应用程序。我们计划使用 extjs 和 Sencha Architect 来为我们的应用程序开发 UI。作为新手，我有几个问题正在寻找答案

Q1。在版本控制方面，我们应该如何在多开发环境中使用 Sencha Architect。我们是否应该将 Architect 项目签入 svn 并要求每个开发人员在同一个项目上工作。

Q2。Sencha Architect 项目的结构应该是什么（基本上如何确保每个开发人员都在处理他/她的个人模块而不影响其他组件）。是否有任何最佳实践。

Q3。开发包含多个页面和导航的应用程序的最佳实践是什么。我们应该创建一个 html 文件（使用大量 javascript 来修改正文）还是应该有多个 html？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:20:16.930

1.  是的，它当然应该在源代码控制中。但是，您将希望开发人员特定的设置不在源代码管理中。

2.  最好的方法是创建一个带有菜单栏的应用程序“外壳”，并加载模块/插件并让它们在应用程序中注册，添加自己的菜单等。

3.  绝对是单页应用程序。安全性仍然保留在服务器上（例如在您的 REST API 中）。安全性与客户端无关，因为他们可以控制源代码。您应该只隐藏用户不应该使用的功能。

[如何将不同的视图加载到视口中？](https://stackoverflow.com/questions/11120226/load-different-views-into-viewport/11120496#11120496)

# boost - Debian Squeeze 中是否默认安装了 Boost 头文件库？

> ID：12787406
> 
> 赞同：1
> 
> 时间：2012-10-08T18:29:43.593
> 
> 标签：boost, debian

我最近在我的机器上安装了 Debian Squeeze，主要目标之一是 C++ 编程实践。我经常在我的项目中使用 Boost 库。在 OS-X 和 Windows 上，我必须在使用 Boost 头库之前手动安装它们。但是，关于 Linux，Boost 网站的首页[提到](http://www.boost.org/)

> 流行的 Linux 和 Unix 发行版（例如 Fedora、Debian 和 NetBSD）包括预构建的 Boost 包。

我主要使用头文件库，而不是我当前项目的预构建包。所以我的问题是：默认情况下，头库是在 Debian 上的任何地方安装的，还是我必须安装它们？我已经查看了 /usr/include ，它似乎没有任何 Boost 目录。我已经用谷歌搜索并查找了关于 SO 的相关讨论，但没有得到我的问题的明确答案。如果我必须安装头文件库，是否有一种“apt-get”方式来完成它，或者我只是解压缩并放置在一个方便的位置（/usr/local/include）？

其次，如果我需要手动放置 boost 头文件（比如在 /usr/local/include/ 中），头文件的版本是否应该与预安装的包匹配，以便与任何潜在的未来项目兼容，这些项目同时使用这两种二进制文件（libboost -*) 和头文件？

我对在 Linux 平台上编程相当陌生。虽然，我可以使用补丁和匹配（和谷歌搜索）使事情正常进行，但我正在寻找有关长期最佳实践的指导。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T22:49:31.857

说 GNU/Linux 发行版“包含”诸如 Boost 之类的包并不意味着它会自动安装，而是意味着该包*可以*使用系统的包管理工具进行安装。该软件包可能是为您的发行版量身定制的，因此它可以与操作系统的其余部分很好地集成，或者它可能与上游版本相同，其好处是它已经为您构建并且可以方便地从操作系统中安装。

有大量关于 Debian 的包管理工具的文档：

[http://wiki.debian.org/PackageManagement](http://wiki.debian.org/PackageManagement)

[http://www.debian.org/doc/manuals/debian-faq/ch-pkgtools.en.html](http://www.debian.org/doc/manuals/debian-faq/ch-pkgtools.en.html)

[http://www.debian.org/doc/manuals/debian-reference/ch02.en.html](http://www.debian.org/doc/manuals/debian-reference/ch02.en.html)

所以是的，你想`apt-get`（或与另一个 Debian 的工具等效）安装 Boost `/usr/include`，这将比手动安装它们容易得多。如果您以后决定手动安装 Boost，请将该安装与系统包完全分开，这样新版本的库和头文件就不会与系统包冲突。如果它是单用户机器，并且您不需要机器上的其他用户可以使用这些软件包，那么您可以将它们安装在您的主目录中，而不是`/usr/local/`（这需要超级用户访问权限，您应该尽可能少做可以作为 root 用户）

# android - 如何在 Android EditText 中使用过度输入？

> ID：12787415
> 
> 赞同：0
> 
> 时间：2012-10-08T18:30:02.987
> 
> 标签：android

我正在尝试在我的应用程序中使用 EditText 组件，以便用户可以更改固定大小的字符串值。

为了实现这一点，我想使用某种改写模式；我看过 InputFilters 但到目前为止还没有找到任何线索。

通过“过度输入”，我的意思是用输入的字符替换下一个字符。例如，如果我的 EditText 中有“hello”，我的光标在 'e' 和 'l' 之间，我输入 'w'，我会得到“hewlo”。

# sql - sql检索结果

> ID：12787422
> 
> 赞同：0
> 
> 时间：2012-10-08T18:30:24.457
> 
> 标签：sql, oracle

我有下面的订单表，我想在今天的日期和时间（美国 17:00）检索那些不在订单状态“已处理”和 cacel）状态“已取消”的记录。请帮我完成我的问题。

```
order id  ordername order_status  cancel_status  order_time           cancel_time 
==============================================================================================    
1         Iphone    processed     cancelled      10/08/2012 16:00:00  10/08/2012 16:00:00        
2         samsung   notprocessed  null           null                 null        
3         nokia     processed     cancelled      10/08/2012 16:00:00  10/08/2012 17:00:00    
4         motorola  notprocessed  null           null         null    
5         HTC       processed     null           10/08/2012 17:00:00  null 
```

我尝试了以下方式，但没有返回任何记录。请帮助我。

```
SELECT * 
FROM 
    order 
WHERE 
    to_char(order_time,'YYYYMMDD HH24:MI:SS')>To_char(sysdate,YYYYMMDD) || ' '|| '17:00:00' 
and to_char(cancel_time,'YYYYMMDD HH24:MI:SS')>To_char(sysdate,YYYYMMDD) || ' '|| '17:00:00' 
and order_time is null 
and cancel_time is null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:34:50.567

```
Select * from order 
where 
( to_char(order_time,'YYYYMMDD HH24:MI:SS')>To_char(sysdate,YYYYMMDD) || ' '|| '17:00:00' 
or order_time is null ) 
and ( to_char(cancel_time,'YYYYMMDD HH24:MI:SS')>To_char(sysdate,YYYYMMDD) || ' '|| '17:00:00' 
or cancel_time is null ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:35:16.617

```
select * 
from order o 
where o.order_status != 'processed' 
  and o.cancel_status = 'cancelled' 
  and o.order_time < (trunc(sysdate) + 17/24) 
  and o.cancel_time < (trunc(sysdate) + 17/24) 
```

# php - 使用 PHP 调整图像大小后仍然可以编写脚本吗？

> ID：12787427
> 
> 赞同：0
> 
> 时间：2012-10-08T18:30:55.080
> 
> 标签：php, image-processing, security

我想在我的网站上有一个上传系统，用户只能上传图片。这些图片将在上传时由 PHP 直接调整大小，因此不会存储原始图片。我还需要担心从恶意图像执行的 php 等脚本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T18:37:53.080

您仍然需要考虑以下攻击向量：

1.  上传的图像将在服务器上存储一段时间，如果您的应用程序中存在错误，可能会被用于作恶。

2.  作为图像上传的任何字节垃圾都可能会触发读取上传图像的调整大小代码中的错误，因此与此软件或库保持最新很重要。

除此之外，生成的图像应该被认为是安全的。

更新：

使用 PHP 上传图像总是会导致在某处创建临时文件，可能在共享主机上的其他所有人也在使用的未知“临时文件目录”位置。该文件有一个文件名，并且可能包含恶意内容。尽管文件名是随机生成的，但攻击者可能会猜到并尝试使用它。另一方面，除了不使用不安全的 include/require 语句之外，您无法保护自己免受这种内置 php 机制的影响，因为通常攻击需要 a) 在您的服务器上获取恶意代码并 b) 执行它。

反对它的步骤似乎很明显：为您的 php.ini 配置一个专用的上传目录。通过应用适当的权限和限制来保护它免受文件系统级别的代码执行。不要乱用随机名称生成。将此目录保留在 DOCUMENT_ROOT 之外。

第二种攻击可能是攻击者诱使您的代码读取未上传的非公开文件，以显示其内容。因此，在继续之前检查 $_FILES 中的文件名是否真的[是上传的文件](http://de3.php.net/is-uploaded-file)是一个很好的主意。

# json - 需要澄清 Dust js 数组

> ID：12787431
> 
> 赞同：0
> 
> 时间：2012-10-08T18:31:21.180
> 
> 标签：json, dust.js

我是灰尘模板的新手，知道这个问题的解决方案

我想遍历此视图上下文并仅获取亲戚和朋友数组的第一项。

```
{
  Relative: "ravi",
  friends: [
    { name: "Moe", age: 37 },
    { name: "Larry", age: 39 },
    { name: "Curly", age: 35 }
  ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:02:21.297

您可以使用`@eq`Dust 的 LinkedIn 分支中提供的帮助程序来完成。

```
{Relative}{~n}
{#friends}
  {@eq key=0 value="{$idx}" type="number"}
    {name} {age}
  {/eq}
{/friends} 
```

您仍然循环遍历整个数组，但如果数组索引 ( `$idx`) 为，则仅输出名称和年龄`0`。

# jquery - 使用 jQuery 解析数字/货币数据

> ID：12787433
> 
> 赞同：0
> 
> 时间：2012-10-08T18:31:23.643
> 
> 标签：jquery, regex

我有一个数据集，其货币价值如“2820 万美元”和“190 亿欧元”。对于格式化，我需要打开这个生成的内容：

```
<p>$28.2 mn</p> 
```

进入这个：

```
<p><span class="currency">$</span>28.2 <span class="denomination">mn</span></p> 
```

页面加载后，我需要使用 Javascript/jQuery 执行此操作。

数据在货币符号后可能有也可能没有空格。数字和面额之间可能有也可能没有空格。这些数字有时是整数，有时是十进制值。

我玩过一些正则表达式，但这超出了我的技能范围。如果有人有任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:29:00.600

我能够将 NullUserException 留下的正则表达式与提交的其他答案结合起来以提出解决方案：

```
$('p').html(function(i, c){
    var cur = $.trim( c );
    cur = cur.replace(/([^\d.,]+)\s*([\d.,]+)\s*([^\d.,]+)/g,
        '<span class="currency">$1</span> $2 <span class="denomination">$3</span>');
    return cur;
})​ 
```

[http://jsfiddle.net/Hje94/](http://jsfiddle.net/Hje94/)

# c - *x=i 和 x=&i 有什么区别

> ID：12787437
> 
> 赞同：0
> 
> 时间：2012-10-08T18:31:43.317
> 
> 标签：c, pointers

`*x=i`和 和有什么不一样`x=&i`？

代码：

```
int i=2;
int *x;

*x=i; //what is the difference between this...
x=&i; //...and this??

//Also, what happens when I do these? Not really important but curious.
x=i;
*x=*i; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T18:34:31.067

> `*x=i; //what is the difference between this...`

这会将 的值分配给`i`存储在指向的地址的整数`x`

> `x=&i; //...and this??`

这将分配到的`i`地址`x`。

请注意，在您的示例`x`中未分配，因此`*x=i`未定义的行为。

这是一个更好的说明：

```
int i = 2, j = 5;
printf("%d %d\n", i, j); // Prints 2 5
int *x = &j;
*x = i;
printf("%d %d\n", i, j); // Prints 2 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T18:36:32.180

`*x=i`将存储在 指向的内存位置中的值更改`x`为等于存储在 中的值`i`。

`x=&i`更改内存位置`x`指向`i`的内存位置。

`x=i`是错的。您很可能会遇到段错误。

`*x=*i`是错的。您不能取消引用`i`，因为`i`它不是指针。

`*x=&i`（实际上，更准确地说，`*x=(int)&i`）会将 的内存位置`i`作为整数存储在 指向的内存位置中`x`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T18:32:34.843

```
int i=2;
int *x;

*x=i; // x is not initialized, this is undefined behavior
x=&i; // this assigns the address of i to x 
```

和

```
*x=&i; // is invalid C. You cannot assign a pointer to an
       // integer without an explicit conversion. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T18:34:50.777

`*x=i;`取消引用指针`x`并分配`i`.

`x=&i`使指针`x`指向变量`i`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T18:35:24.567

`*x = i`更改存储在地址中的值，该地址存储在`x`. 在您的情况下，未经编辑，这将崩溃，因为该地址`x`可能是垃圾，可能是`NULL`. 你需要一个`malloc()`或`new`什么的。

`x = &i`改变存储的地址`x`，这样就是变量的地址`i`。在您的示例中，这是非常安全的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-08T18:35:32.950

好吧，当你说

```
*x = i 
```

你是说：使变量 x 指向值 i。当你说

```
x = &i 
```

您是说使地址 x 指向 i 的地址。而且我想您应该能够自己弄清楚其他人！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-08T18:37:39.380

`*x = i` 这实际上将 的值分配给`i`指向的内存位置`x`。

`x = &i` 这将变量的地址分配给`i`指针变量`x`。`x`应该是一个指针。

当你这样做时`x = i`，这会给你一个运行时错误，因为你试图错误地分配一个`2`不属于你的进程地址空间的地址（在这种情况下是）。要成功做到这一点，`i`还应该是一个指针，并且必须指向地址空间中的地址。

当你这样做时`*x = *i`，在你的情况下会再次给出错误。如果`i`是指针，则 指向的地址`x`将获得 指向的地址处的值`i`。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-08T18:37:55.470

`*x = i`将 2 分配给 x 指向的内存地址。请注意，这可能会崩溃，因为 x 尚未通过 malloc 或分配给缓冲区或堆栈变量的地址初始化为内存地址。

`x = &i`将指针分配给`x`变量的地址`i`。

`x = i`会将指针分配`x`给 的值`2`，这很可能指向无效的内存地址并且需要强制转换。

`*x = *i`将取决于 的当前值`x`。而且由于`i`不是指针，因此您无法取消引用它。

`*x = &i`会将 的地址写入`i`x 指向的内存地址，这取决于它前面的代码。如果您没有将 x 分配给有效地址，它可能会崩溃。

其中一些调用需要强制转换才能在语法上正确。

# magento - Magento：未随产品禁用的自定义“缺货”消息变为有货

> ID：12787441
> 
> 赞同：2
> 
> 时间：2012-10-08T18:32:16.030
> 
> 标签：magento, sap, product, inventory, stock

默认行为：当产品数量为 0 时 - 显示“缺货”消息。当产品有库存（由 SAP 更新库存）时，“缺货”消息会自动禁用。

Custom behavior: However, when a "custom out of stock" message is selected and the product becomes in stock, for whatever reason, the "custom out of stock" message is NOT disabled. 这必须在产品上明确完成。

--

寻找解决方案后，一种选择是购买/安装处理“缺货”产品的扩展程序，但有没有人在内部找到解决此问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:46:02.213

如果 qty>0，您需要在更新期间将 is_in_stock 标志设置为“1”。如果您的代码无法做到这一点，那么您需要选择所有库存大于零的产品并将它们设置为 is_in_stock=1。您可以将其作为独立脚本运行，而不会对编写模块并将该模块放在 cron 作业中进行性能劣势，该作业将在您的更新完成后加入。这是伪代码：

```
$stockCollection = Mage::getModel('cataloginventory/stock_item')->getCollection()->addFieldToFilter('qty', array('gteq' => 1));

foreach($stockCollection as $item) {
    $item->setIsInStock(1)->save();
} 
```

# php - wordpress 我自己的自定义字段

> ID：12787447
> 
> 赞同：0
> 
> 时间：2012-10-08T18:32:40.333
> 
> 标签：php, wordpress

我想在 WordPress 帖子中创建自定义字段。

我是一名开发人员，想创建自己的自定义字段。我不想使用我们安装 WordPress 时可用的默认自定义字段。事实上，我想添加单选按钮和一个复选框，我可以从中选择它们，正如您在我附加的图像中看到的那样。

我该怎么做？

![这是一个演示图像](../Images/b42573bd1e5f94a8585fd44f8357a6c1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:21:28.443

一切都将在functions.php 中完成。

您必须声明您的额外字段（元框）。本文将为您提供所有解释： http: [//www.farinspace.com/how-to-create-custom-wordpress-meta-box/](http://www.farinspace.com/how-to-create-custom-wordpress-meta-box/)

它应该为您提供添加元框所需的所有信息（另请参见：[http](http://codex.wordpress.org/Function_Reference/add_meta_box) ://codex.wordpress.org/Function_Reference/add_meta_box ）

# c# - HTML 敏捷包 - 删除不需要的标签而不删除内容？

> ID：12787449
> 
> 赞同：49
> 
> 时间：2012-10-08T18:32:47.710
> 
> 标签：c#, html-agility-pack

我在这里看到了一些相关的问题，但他们并没有完全谈论我面临的同一个问题。

我想使用[HTML Agility Pack](http://html-agility-pack.net/?z=codeplex)从我的 HTML 中删除不需要的标签，而不会丢失标签中的内容。

例如，在我的场景中，我想保留标签“ `b`”、“ `i`”和“ `u`”。

对于像这样的输入：

`<p>my paragraph <div>and my <b>div</b></div> are <i>italic</i> and <b>bold</b></p>`

生成的 HTML 应该是：

`my paragraph and my <b>div</b> are <i>italic</i> and <b>bold</b>`

我尝试使用`HtmlNode`'s`Remove`方法，但它也删除了我的内容。有什么建议么？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-10-11T10:00:24.593

我根据 Oded 的建议编写了一个算法。这里是。奇迹般有效。

`strong`它会删除除、`em`和`u`原始文本节点之外的所有标签。

```
internal static string RemoveUnwantedTags(string data)
{
    if(string.IsNullOrEmpty(data)) return string.Empty;

    var document = new HtmlDocument();
    document.LoadHtml(data);

    var acceptableTags = new String[] { "strong", "em", "u"};

    var nodes = new Queue<HtmlNode>(document.DocumentNode.SelectNodes("./*|./text()"));
    while(nodes.Count > 0)
    {
        var node = nodes.Dequeue();
        var parentNode = node.ParentNode;

        if(!acceptableTags.Contains(node.Name) && node.Name != "#text")
        {
            var childNodes = node.SelectNodes("./*|./text()");

            if (childNodes != null)
            {
                foreach (var child in childNodes)
                {
                    nodes.Enqueue(child);
                    parentNode.InsertBefore(child, node);
                }
            }

            parentNode.RemoveChild(node);

        }
    }

    return document.DocumentNode.InnerHtml;
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-02-03T12:23:47.223

## 如何从html字符串中递归删除给定的不需要的html标签列表

我接受了@mathias 的回答并改进了他的扩展方法，以便您可以提供一个标签列表以排除为`List<string>`（例如`{"a","p","hr"}`）。我还修复了逻辑，使其递归地正常工作：

```
public static string RemoveUnwantedHtmlTags(this string html, List<string> unwantedTags)
    {
        if (String.IsNullOrEmpty(html))
        {
            return html;
        }

        var document = new HtmlDocument();
        document.LoadHtml(html);

        HtmlNodeCollection tryGetNodes = document.DocumentNode.SelectNodes("./*|./text()");

        if (tryGetNodes == null || !tryGetNodes.Any())
        {
            return html;
        }

        var nodes = new Queue<HtmlNode>(tryGetNodes);

        while (nodes.Count > 0)
        {
            var node = nodes.Dequeue();
            var parentNode = node.ParentNode;

            var childNodes = node.SelectNodes("./*|./text()");

            if (childNodes != null)
            {
                foreach (var child in childNodes)
                {
                    nodes.Enqueue(child);                       
                }
            }

            if (unwantedTags.Any(tag => tag == node.Name))
            {               
                if (childNodes != null)
                {
                    foreach (var child in childNodes)
                    {
                        parentNode.InsertBefore(child, node);
                    }
                }

                parentNode.RemoveChild(node);

            }
        }

        return document.DocumentNode.InnerHtml;
    } 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-07-23T14:29:53.640

尝试以下方法，您可能会发现它比其他建议的解决方案更简洁：

```
public static int RemoveNodesButKeepChildren(this HtmlNode rootNode, string xPath)
{
    HtmlNodeCollection nodes = rootNode.SelectNodes(xPath);
    if (nodes == null)
        return 0;
    foreach (HtmlNode node in nodes)
        node.RemoveButKeepChildren();
    return nodes.Count;
}

public static void RemoveButKeepChildren(this HtmlNode node)
{
    foreach (HtmlNode child in node.ChildNodes)
        node.ParentNode.InsertBefore(child, node);
    node.Remove();
}

public static bool TestYourSpecificExample()
{
    string html = "<p>my paragraph <div>and my <b>div</b></div> are <i>italic</i> and <b>bold</b></p>";
    HtmlDocument document = new HtmlDocument();
    document.LoadHtml(html);
    document.DocumentNode.RemoveNodesButKeepChildren("//div");
    document.DocumentNode.RemoveNodesButKeepChildren("//p");
    return document.DocumentNode.InnerHtml == "my paragraph and my <b>div</b> are <i>italic</i> and <b>bold</b>";
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-08T18:34:37.313

在删除节点之前，获取其父节点及其`InnerText`，然后删除节点并将 重新分配`InnerText`给父节点。

```
var parent = node.ParentNode;
var innerText = parent.InnerText;
node.Remove();
parent.AppendChild(doc.CreateTextNode(innerText)); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-05-04T08:54:14.587

如果您不想使用 Html 敏捷包，但仍想删除不需要的 Html 标签，则可以按照以下说明进行操作。

```
public static string RemoveHtmlTags(string strHtml)
    {
        string strText = Regex.Replace(strHtml, "<(.|\n)*?>", String.Empty);
        strText = HttpUtility.HtmlDecode(strText);
        strText = Regex.Replace(strText, @"\s+", " ");
        return strText;
    } 
```

# python - Sqlalchemy：二级关系更新

> ID：12787452
> 
> 赞同：10
> 
> 时间：2012-10-08T18:33:01.017
> 
> 标签：python, postgresql, orm, sqlalchemy, relationship

我有两个表，比如 A 和 B。两者都有一个主键 ID。他们有一个多对多的关系，SEC。

```
SEC = Table('sec', Base.metadata,
    Column('a_id', Integer, ForeignKey('A.id'), primary_key=True, nullable=False),
    Column('b_id', Integer, ForeignKey('B.id'), primary_key=True, nullable=False)
)

class A():
   ...
   id = Column(Integer, primary_key=True) 
   ...
   rels = relationship(B, secondary=SEC)

class B():
   ...
   id = Column(Integer, primary_key=True) 
   ... 
```

让我们考虑这段代码。

```
a = A()
b1 = B()
b2 = B()
a.rels = [b1, b2]
...
#some place later
b3 = B()
a.rels = [b1, b3]  # errors sometimes 
```

有时，我在最后一行得到一个错误说

```
duplicate key value violates unique constraint a_b_pkey 
```

据我了解，我认为它试图再次将 (a.id, b.id) 添加到“sec”表中，从而导致唯一约束错误。就是这样吗？如果是这样，我该如何避免这种情况？如果没有，为什么我会出现这个错误？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-30T07:11:39.710

问题是您要确保创建的实例是唯一的。我们可以创建一个备用构造函数来检查现有未提交实例的缓存或在返回新实例之前查询数据库中现有已提交实例。

下面是这种方法的演示：

```
from sqlalchemy import Column, Integer, String, ForeignKey, Table
from sqlalchemy.engine import create_engine
from sqlalchemy.ext.declarative.api import declarative_base
from sqlalchemy.orm import sessionmaker, relationship

engine = create_engine('sqlite:///:memory:', echo=True)
Session = sessionmaker(engine)
Base = declarative_base(engine)

session = Session()

class Role(Base):
    __tablename__ = 'role'

    id = Column(Integer, primary_key=True)
    name = Column(String, nullable=False, unique=True)

    @classmethod
    def get_unique(cls, name):
        # get the session cache, creating it if necessary
        cache = session._unique_cache = getattr(session, '_unique_cache', {})
        # create a key for memoizing
        key = (cls, name)
        # check the cache first
        o = cache.get(key)
        if o is None:
            # check the database if it's not in the cache
            o = session.query(cls).filter_by(name=name).first()
            if o is None:
                # create a new one if it's not in the database
                o = cls(name=name)
                session.add(o)
            # update the cache
            cache[key] = o
        return o

Base.metadata.create_all()

# demonstrate cache check
r1 = Role.get_unique('admin')  # this is new
r2 = Role.get_unique('admin')  # from cache
session.commit()  # doesn't fail

# demonstrate database check
r1 = Role.get_unique('mod')  # this is new
session.commit()
session._unique_cache.clear()  # empty cache
r2 = Role.get_unique('mod')  # from database
session.commit()  # nop

# show final state
print session.query(Role).all()  # two unique instances from four create calls 
```

该`create_unique`方法的灵感[来自 SQLAlchemy wiki 中的示例](http://www.sqlalchemy.org/trac/wiki/UsageRecipes/UniqueObject)。这个版本不那么复杂，更倾向于简单而不是灵活性。我已经在生产系统中使用它，没有任何问题。

显然可以添加一些改进；这只是一个简单的例子。该`get_unique`方法可以从 a 继承`UniqueMixin`，用于任意数量的模型。可以实现更灵活的参数记忆。这也搁置了 Ants Aasma 提到的多线程插入冲突数据的问题；处理更复杂但应该是一个明显的扩展。我把它留给你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T21:46:23.707

您提到的错误确实是向 sec 表中插入了一个冲突的值。为确保它来自您认为的操作，而不是以前的更改，请打开 SQL 日志记录并在出错之前检查它尝试插入的值。

当覆盖多对多集合值时，SQLAlchemy 将集合的新内容与数据库中的状态进行比较，并相应地发出删除和插入语句。除非您在 SQLAlchemy 内部四处寻找，否则应该有两种方法可以遇到此错误。

首先是并发修改：进程 1 获取值 a.rels 并注意到它是空的，同时进程 2 也获取 a.rels，将其设置为 [b1, b2] 并提交刷新 (a,b1),(a, b2) 元组，进程 1 将 a.rels 设置为 [b1, b3] 注意到先前的内容是空的，并且当它尝试刷新 sec 元组 (a,b1) 时，它会收到重复键错误。在这种情况下，正确的操作通常是从顶部重试事务。在这种情况下，您可以使用可[序列化事务隔离](http://www.postgresql.org/docs/9.2/static/transaction-iso.html#XACT-SERIALIZABLE)来获取序列化错误，这与导致重复键错误的业务逻辑错误不同。

第二种情况发生在您通过将 rels 属性的加载策略设置为`noload`. 这可以在通过添加`lazy='noload'`参数定义关系时完成，或者在查询时调用`.options(noload(A.rels))`查询。SQLAlchemy 将假设 sec 表中没有有效的使用此策略加载的对象的匹配行。

# javascript - 将 JSON 数组添加到服务器端事件的返回

> ID：12787456
> 
> 赞同：2
> 
> 时间：2012-10-08T18:33:15.187
> 
> 标签：javascript, json, server-sent-events

目前我正在以 JSON 格式编写数据，一次一条消息，如下所示：

```
String[] arr = strLine.split(",");

   out.append("data: {\n");
   out.append("data: \"c1\": " + arr[0].toString()+ ",\n");
   out.append("data: \"c2\": " + arr[1].toString()+ ",\n" );
   out.append("data: }\n\n");
   out.flush(); 
```

但是，现在我只想在有 5 条这样的消息时才 out.flush 。那么，我该怎么做呢？创建 Json 消息？带有单独的数据：{ } 正文。如果我这样做，我如何在客户端使用 javascript 访问 c1、c2 对？还有什么选择。

PS：当我说 5 个值时，我的意思是 c1 和 c2 的 5 对值。

以及如何在客户端使用 javascript 访问值，如果我做这样的事情

```
out.append("data: [\n");
for(int j=0; j<5; j++) {
     String[] arr = strLine.split(",");
     if (j!=0) out.append(",\n");
     out.append("\{"c1\": " + arr[0].toString()+ ",\n");
     out.append(\"c2\": " + arr[1].toString()+"}" );
     out.flush();
  }
//HEY MR, LOOK BELOW ME
//HEY MR, LOOK BELOW ME
//HEY MR, LOOK BELOW ME
//HEY MR, LOOK BELOW ME
out.append("]\n"); <---- HEY RIGHT HERE 
//HEY MR, LOOK ABOVE ME
//HEY MR, LOOK ABOVE ME
//HEY MR, LOOK ABOVE ME
//HEY MR, LOOK ABOVE ME
out.flush(); 
```

按要求工作 JS 代码（在身体负载上调用 registerSSE() ）：

```
function registerSSE(){
  var source = new EventSource ('http://localhost:8080/SSE_Test1/ReadCsv');
  source.addEventListener('message', function(e) {
  var data = JSON.parse(e.data);
  console.log(data.timestamp, data.c1, data.c2, data.c3, data.c4);
} 
```

在 servlet 中，您只需要附加这一行：

```
response.setContentType("text/event-stream"); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T18:39:54.123

请不要手动生成/解析 JSON 字符串。在 Java 中，使用[org.json](http://www.json.org/java/index.html)，在 Javascript 中，使用`JSON.parse`and `JSON.stringify`。

MDN：[解析](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)和[字符串化](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)

要输出 5 对，您可以执行以下操作：

```
String[] arr = strLine.split(",");
JSONArray array = new JSONArray();
for(int i=0, j=0;i<arr.length;i+=2,j++){
   JSONObject dataObj = new JSONObject();
   dataObj.put("c1", arr[i]);
   dataObj.put("c2", arr[i+1]);
   array.put(j, dataObj);
   if ((j > 0) && (j % 5 ==0)) {
       out.append("data: " +array.toString() + "\n");
       out.flush();
       array = new JSONArray(); // start with a new one
   }
} 
```

要在客户端访问它，给定您的 EventSource `source`：

```
source.addEventListener('message', function(e) {
    var data = JSON.parse(e.data); // data is an array of {c1:...,c2:...} objects
    for (var i = 0; i < data.length; i++) { // it should be 5 in length
        console.log('c1 is: '+data[i].c1+' and c2 is '+data[i].c2);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:40:18.940

要在 JavaScript 中访问 JSON 字符串，只需执行以下操作：

```
var myJson = JSON.parse(myJsonString); 
```

# android - 未能找到 ContentProvider 的提供者信息

> ID：12787458
> 
> 赞同：1
> 
> 时间：2012-10-08T18:33:21.393
> 
> 标签：android, android-manifest, android-contentprovider

我看过一些类似的帖子，但我已经`ContentProvider`在我的`AndroidManifest`.

我有一个`ContentProvider`叫`MyContentProvider`.

并且`MyContentProvider`位于一个名为`MyProject`. 带包位置`personal.mobile.abc.angry.tiger.MyContentProvider`。

* * *

我`AndroidManifest`的这个项目看起来像这样（遗漏了不相关的信息）：

```
<application
    android:label=...
    android:icon=...
    android:theme=...>
    <provider
        android:name="personal.mobile.abc.angry.tiger.MyContentProvider"
        android:authorities="personal.mobile.abc.angry.tiger">
    </provider>
</application> 
```

* * *

林特一直这样说：

```
The <provider> personal.mobile.abc.angry.tiger.MyContentProvider is not registered in the manifest. 
```

* * *

Logcat 在尝试运行包含以下库的应用程序时会这样说`ContentProvider`：

```
Failed to find provider info for personal.mobile.abc.angry.tiger 
```

* * *

我究竟做错了什么？问题是什么？

如果您需要任何进一步的信息，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T19:40:20.260

您的`<provider>`元素需要在应用程序中，因为它是带有`ContentProvider`. 实现它的 Java 类`ContentProvider`恰好位于 Android 库项目中这一事实并没有改变托管应用程序是负责该提供程序的人这一事实。

最终——也许在 ADT 21 之后——您`<provider>`在库项目中的元素可以自动添加到您的应用程序项目中。现在，AFAIK，这个过程是手动的。

# ruby-on-rails - Access-Control-Allow-Origin 不适用于 Backbone json 请求，Nginx 设置“全开”，标头看起来不错

> ID：12787464
> 
> 赞同：3
> 
> 时间：2012-10-08T18:33:43.253
> 
> 标签：ruby-on-rails, nginx, cors, access-control

您好，我需要从 Backbone 向 API 发出 json 请求（我可以控制服务器端）。尽管响应标头看起来不错，但我一直在获取 Access-Control-Allow-Origin。

以下是 Nginx 设置：

```
location / {
     if ($request_method = 'OPTIONS') {
        add_header 'Access-Control-Allow-Origin' '*';
        add_header 'Access-Control-Allow-Credentials' 'true';
        add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS';
        add_header 'Access-Control-Allow-Headers' 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type';
        add_header 'Access-Control-Max-Age' 1728000;
        add_header 'Content-Type' 'text/plain charset=UTF-8';
        add_header 'Content-Length' 0;
        return 204;
     }
     if ($request_method = 'POST') {
        add_header 'Access-Control-Allow-Origin' '*';
        add_header 'Access-Control-Allow-Credentials' 'true';
        add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS';
        add_header 'Access-Control-Allow-Headers' 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type';
     }
     if ($request_method = 'GET') {
        add_header 'Access-Control-Allow-Origin' '*';
        add_header 'Access-Control-Allow-Credentials' 'true';
        add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS';
        add_header 'Access-Control-Allow-Headers' 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type';
     }
passenger_enabled on;
} 
```

这是来自控制台的请求/响应标头：

```
Request headers
DNT: 1
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/534.57.7 (KHTML, like Gecko) Version/5.1.7 Safari/534.57.7
Accept: */*;q=0.5, text/javascript, application/javascript, application/ecmascript, application/x-ecmascript
Referer: http://<address>/

Response Headers
Access-Control-Request-Method: *
X-Powered-By: Phusion Passenger (mod_rails/mod_rack) 3.0.14
Transfer-Encoding: Identity
Status: 200
Connection: keep-alive
X-Request-Id: 2917f130c8699182ee9cdc047c1926fe
X-UA-Compatible: IE=Edge,chrome=1
X-Runtime: 0.455212
Server: nginx/1.2.2 + Phusion Passenger 3.0.14 (mod_rails/mod_rack)
Etag: "346cee46bab7061e866fa064df95c845"
Content-Type: text/html; charset=utf-8
Access-Control-Allow-Origin: *
Cache-Control: max-age=0, private, must-revalidate
Set-Cookie: _y_app_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFRkkiJWE2Zjg3YWQ0NDFjZWNiM2VmNTg2ZDhiYmIyOGFlYmIwBjsAVEkiEF9jc3JmX3Rva2VuBjsARkkiMUxBSzFKTDJQWG1sa2dhbXRLM2ptQmxjenRkZEdJeVh1MDFhaUVuaXE1dFE9BjsARkkiCmZsYXNoBjsARm86JUFjdGlvbkRpc3BhdGNoOjpGbGFzaDo6Rmxhc2hIYXNoCToKQHVzZWRvOghTZXQGOgpAaGFzaHsAOgxAY2xvc2VkRjoNQGZsYXNoZXN7CDoLbm90aWNlMDoLZXJyb3JzMDoKZXJyb3IwOglAbm93MA%3D%3D--648ffcb1b2869f1da57773459307ca1ac5fb8bfb; path=/; HttpOnly
Access-Control-Allow-Headers: * 
```

*** 更新 ***

我目前正在使用[http://github.com/yaoweibin/nginx_cross_origin_module](http://github.com/yaoweibin/nginx_cross_origin_module)它允许我从控制台发出请求。

我已经按照上面 repo 中的说明设置了 nginx。

```
 cors on;
    cors_max_age     3600;
    cors_origin_list unbounded;
    cors_method_list GET HEAD PUT POST;
    cors_header_list unbounded;

    server {
     ## Server stuff.. 
     # passenger stuff
   } 
```

所以我可以这样做：

```
 var xhr = new XMLHttpRequest()
 xhr.open('GET', 'http://www.api.com/plots.json')
 xhr.send(); 
```

当我使用具有“http://www.api.com/plots.json”作为 url 的模型通过 Backbone 获取时，我得到相同的来源错误。

** 更新 **

所以我切换到 more_set_headers 并且现在可以执行 .fetch() ... 仍然无法进行 POST 或执行 collection.create();

这是最新的 Nginx 设置：

```
server {

              listen 80;
              server_name api.app.com;
              root /home/ubuntu/app/current/public;
              passenger_enabled on;

    location / {
        if ($request_method = 'OPTIONS') {
             more_set_headers 'Access-Control-Allow-Origin: *';
             more_set_headers "Access-Control-Allow-Methods: OPTIONS, GET, PUT, DELETE, POST";
             more_set_headers "Access-Control-Allow-Headers:  x-requested-with";
             more_set_headers "Access-Control-Max-Age: 1728000";
             more_set_headers 'Content-Type: text/plain; charset=UTF-8';
             more_set_headers 'application/json; charset=utf-8';
             return 200;
            }

          if ($request_method = 'POST') {
           more_set_headers "Access-Control-Allow-Origin: http://vidoai.com";
           more_set_headers "Access-Control-Allow-Methods: GET, POST, OPTIONS";
           more_set_headers 'Access-Control-Allow-Headers: DNT, X-Mx-ReqToken, Keep-Alive,  User-Agent, X-Requested-With, If-Modified-Since, Cache-Control, Content-Type';
           more_set_headers 'Content-Type: application/json, text/javascript,  */*';
         }

passenger_enabled on;
    }

        if ($request_method !~ ^(GET|HEAD|POST|PUT|DELETE)$ ) {
           return 444;  # block requests that Rails doesn't handle
          }

} 
```

我错过了什么？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T17:33:48.320

在这一行：

```
if ($request_method !~ ^(GET|HEAD|POST|PUT|DELETE)$ ) {} 
```

您也应该添加**`OPTIONS`**，因为这可能是 Backbone 将使用的，并且您也在您的位置定义了它。

# ios - Phonegap (Cordova) iOS 按钮点击

> ID：12787465
> 
> 赞同：0
> 
> 时间：2012-10-08T18:33:48.407
> 
> 标签：ios, cordova

我正在尝试为 iOS 创建一个非常简单的电话间隙应用程序。我正在使用查询手机。问题是，我无法在单击按钮时触发 javascript 事件。
我现在拥有的代码：

```
<!DOCTYPE html>
<html>
<head>
    <title>Title</title>
    <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1">
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="js/jquery.mobile-1.2.0.css" />
    <script type="text/javascript" charset="utf-8" src="cordova-1.8.1.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/jquery.mobile-1.2.0.min.js"></script>
    <script type="text/javascript">
        document.addEventListener("deviceready", onDeviceReady, false);

        function onDeviceReady() {
        }

        function showAlert() {
            navigator.notification.alert("Cordova is working");
        }

    </script>
</head>
<body>
    <div data-role="page" id="options" data-add-back-btn="true" data-back-btn-text="Atgal">
        <div data-role="header" data-position="fixed">
            <h1>Title</h1>
        </div>
        <div data-role="content">
            <h1>Alert</h1>
            <p><a href="#" onclick="showAlert(); return false;" data-role="button">Show alert</a></p>
        </div>
    </div>
</body>
</html> 
```

我尝试了多种解决方案来解决我的问题，但它们都不起作用。当在href中有带有#的按钮时，它不会在点击时改变颜色。当我添加网址时，它会改变颜色。但它从不调用javascript函数。另一个问题是，`document.addEventListener("deviceready", onDeviceReady, false);`这只适用于索引页面。如果我在重定向到另一个页面的初始页面中按下按钮，则永远不会调用 OnDeviceReady 函数。
有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:25:41.977

`onDeviceReady()`只调用一次（当设备（即 Cordova）准备好时）。`$(document).on('pageinit', '#pageid', function() { });`每次导航到页面时，您都希望触发一些东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T10:28:03.460

在body标签中你需要添加标签，javascript中的onBodyLoad()函数应该是这样的：

```
 function onBodyLoad()
    {       
      document.addEventListener("deviceready", onDeviceReady, false);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T16:50:22.237

我是一个完全没有电话间隙和查询手机的菜鸟，所以我犯了一个愚蠢的错误。问题是，当我单击按钮时，它不会加载整个页面，而只是加载正文部分。这意味着，它只使用第一页中的 javascript。那是我的问题。现在我已将所有 javascript 放入单独的文件（两个文件的所有 javascript）并且它可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T03:36:02.777

使用 jQuery 尝试以下操作：

```
<!DOCTYPE html>
<html>
<head>
    <title>Title</title>
    <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1">
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="js/jquery.mobile-1.2.0.css" />
    <script type="text/javascript" charset="utf-8" src="cordova-1.8.1.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/jquery.mobile-1.2.0.min.js"></script>
    <script type="text/javascript">
        document.addEventListener("deviceready", onDeviceReady, false);

        function onDeviceReady() {
        }

        function showAlert() {
            navigator.notification.alert("Cordova is working");
        }

        $(function() {
            $("#my_link").click(function() {
                showAlert();
            });
        });

    </script>
</head>
<body>
    <div data-role="page" id="options" data-add-back-btn="true" data-back-btn-text="Atgal">
        <div data-role="header" data-position="fixed">
            <h1>Title</h1>
        </div>
        <div data-role="content">
            <h1>Alert</h1>
            <p><a id="my_link" href="#" data-role="button">Show alert</a></p>
        </div>
    </div>
</body>
</html> 
```

希望这可以帮助。让我知道你的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-30T16:06:45.457

即使我为 md 按钮设置了更高的 z-index，它仍然不会点击 iOS。它在 Android 上运行良好。在我的情况下，我必须设置一个父容器`<md-subheader>`to z-index: -1; 然后它起作用了。

# ruby - 如何在另一个类中动态创建一个类并为其添加继承？

> ID：12787467
> 
> 赞同：1
> 
> 时间：2012-10-08T18:34:10.850
> 
> 标签：ruby

其他 SO 答案显示了如何创建具有继承的类，是的，但我也需要它成为另一个类的子类。

```
class Wall
  def initialize
    # i need a Brick class here with inheritance from Stone
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:36:45.363

尝试这样的事情：

```
class Stone

end

class Wall
    def initialize
        brick = Class.new Stone
        self.class.const_set :Brick, brick
    end
end

puts 'before initialize'
p Wall.constants
p Wall::Brick.ancestors rescue nil

puts 'after initialize'
Wall.new
p Wall.constants
p Wall::Brick.ancestors 
```

## 在此处查看[现场演示](http://cibox.org/slivu/stackoverflow?file=how-to-dynamically-create-a-class-inside-another-class-and-add-inheritance-to-it.rb&lang=ruby&run=true)

# python - matlab在python中的“置换”

> ID：12787475
> 
> 赞同：22
> 
> 时间：2012-10-08T18:34:38.167
> 
> 标签：python, matlab

我正在将一个程序从 matlab 翻译成 Python。

matlab代码使用permute方法：

```
B = PERMUTE(A,ORDER) rearranges the dimensions of A so that they
%   are in the order specified by the vector ORDER.  The array produced
%   has the same values as A but the order of the subscripts needed to 
%   access any particular element are rearranged as specified by ORDER.
%   For an N-D array A, numel(ORDER)>=ndims(A). All the elements of 
%   ORDER must be unique. 
```

Python/NumPy 中是否有等效方法？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-08T18:50:36.950

这被卷入到[`transpose`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.transpose.html)函数中`numpy.ndarray`。默认行为会颠倒顺序，但您可以提供自己的顺序列表。

# macos - 如何在 Mac 上安装 Java 3D

> ID：12787476
> 
> 赞同：1
> 
> 时间：2012-10-08T18:34:44.823
> 
> 标签：macos, 3d, installation, java

我正在我的大学学习计算机图形学课程。我无法使用 Java 创建 3D 图形，因为我没有正确安装它。我从 Oracle 下载了 Java 3D API。不包括安装程序。只是原始文件 j3dcore.jar、j3dutils.jar 和 vecmath.jar 以及一些自述文件。其中一个自述文件确实包含一个链接，其中包含安装说明。它说我必须“将 Java 3D 1.5.1 解压缩到 JDK 的“jre”目录中。” 我的 JDK 在哪里？我找到了我的 Java 文件夹 System > Library> Java > Extension 并将文件移到那里，因为我在网上阅读了一些其他内容。编码时我仍然在 Eclipse 中收到此错误消息：“访问限制：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:53:42.560

Java 3d 1.3 版已预装在 Mac OS X 中。您不需要安装任何东西。也许试着把事情恢复原状？

如果要升级到 Java 3D 1.5 版本，可以下载此安装程序：[http ://create.ife.no/vr/tools/j3d/java3d_1_5_2-macosx.pkg.zip](http://create.ife.no/vr/tools/j3d/java3d_1_5_2-macosx.pkg.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:45:41.830

首先，我会确保所有这些文件都具有正确的权限......基于“访问限制”错误，似乎问题可能与此有关。从它的外观上看，您将它们安装在正确的位置（无论如何，我的安装位置也是如此）

这就是我的样子： ![在此处输入图像描述](../Images/a72f64e1447f66eb155bec09eb9dbbef.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T18:54:46.260

打开终端，导航到您将 jar 移动到的目录，然后使用以下命令：

```
chmod +x *.jar 
```

+x 是文件权限，允许将文件作为程序执行；如果您尝试执行没有此权限集的文件，则会引发错误。Java 从技术上讲是一个字节码解释器，jar 文件被解释而不是运行，但是 java 在从 jar 加载类之前可能会手动检查文件权限，在这种情况下，它会在逻辑上失败，并出现类似于您报告的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-05T16:23:44.583

如果您使用的是 Eclipse，那么您只需下载 3d zip 文件。将罐子移动到您的项目中并右键单击它们。选择添加构建路径。引用的库中应该有 3 个新 jar。

# python - 在 Python 中执行获取请求

> ID：12787478
> 
> 赞同：2
> 
> 时间：2012-10-08T18:34:48.590
> 
> 标签：python, parsing, url, get

请告诉我为什么这些类似的代码列表会得到不同的结果。第一个（yandex.ru）获取请求页面，另一个获取站点主页（moyareklama.ru）

```
import urllib

base = "http://www.moyareklama.ru/single_ad_new.php?"
data = {"id":"201623465"}
url = base + urllib.urlencode(data)
print url
page = urllib.urlopen(url).read()
f = open ("1.html", "w")
f.write(page)
f.close()
print page

##base = "http://yandex.ru/yandsearch?"
##data = (("text","python"),("lr","192"))
##url = base + urllib.urlencode(data)
##print url
##page = urllib.urlopen(url).read()
##f = open ("1.html", "w")
##f.write(page)
##f.close()
##print page 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T04:58:50.820

很可能您使用 urllib.urlopen 和您的浏览器得到不同的原因是因为您的浏览器可以使用 javascript 和 meta/refresh 标签以及标准 HTTP 301/302 响应进行重定向。我很确定 urllib 模块只会被 HTTP 301/302 响应重定向。

# mysql - 主键选择需要的建议

> ID：12787479
> 
> 赞同：0
> 
> 时间：2012-10-08T18:34:48.880
> 
> 标签：mysql, sql, database, database-design, relational-database

我正在为即将成为我的社交网站版本的东西建立一个数据库。现在，我想存储朋友关系，有点像 facebook。我应该提到我正在为此使用 MySQL。

所以我正在考虑做这样的事情：

```
UserFriends
(
    UserFriendID SOME_DATA_TYPE NOT NULL AUTO_INCREMENT PRIMARY KEY,
    UserID BIGINT(20) UNSIGNED NOT NULL,
    FriendID BIGINT(20) UNSIGNED NOT NULL -- This is basically the same as UserID
)Engine=InnoDB; 
```

现在，我正在寻找某种类型的数据类型用于该表的主键，因为我预计会有大量记录，我想要某种类型的索引来加速任何类型的查找我可能会做的记录。比如朋友推荐功能等。

我愿意接受建议。在我看来，另一个更难管理的选择是为每个用户动态创建一个单独的表并将他们的朋友存储在其中，但是这对于代码管理来说是一场噩梦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:46:08.640

如果你做这样的事情

```
create table UserFriends
(
    UserFriendID SOME_DATA_TYPE NOT NULL AUTO_INCREMENT PRIMARY KEY,
    UserID BIGINT(20) UNSIGNED NOT NULL,
    FriendID BIGINT(20) UNSIGNED NOT NULL -- This is basically the same as UserID
) Engine=InnoDB; 
```

那么您最终可能会得到如下所示的数据。

```
UserFriendID  UserID  FriendID
--
1             100     201
2             100     201
3             201     100 
```

问题*应该*很明显。

如果您不需要知道谁与谁成为朋友，那么这样的事情会更有意义。（标准 SQL，不是 MySQL。）

```
create table UserFriends (
    UserID BIGINT(20) UNSIGNED NOT NULL,
    FriendID BIGINT(20) UNSIGNED NOT NULL,
    primary key (UserID, FriendID),
    check (UserID < FriendID),
    foreign key (UserID) references users (UserID),
    foreign key FriendID references users (UserID)
); 
```

主键约束保证单个“友谊”没有多个相同的行。check() 约束保证您没有两行，仅在 id 编号的顺序上有所不同，用于单个“友谊”。

但是因为 MySQL 不强制 check() 约束，所以您必须编写一个触发器来确保 UserID 小于 FriendID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:38:30.880

使用相同的模式`BIGINT(20)`

避免像瘟疫一样每个用户使用一张桌子:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T18:39:14.810

只需使用INT。有很多方法可以优化性能，选择不常见的主键数据类型不是其中之一。

不要为每个用户创建一个表。如果你真的有很多用户，你可以在以后知道瓶颈在哪里时，用一些分片键来分割它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T18:56:53.513

如果您期望有足够的记录来填充 INT 数据类型，那么 MySQL 不是正确的解决方案，尤其是对于推荐、多级朋友的朋友的朋友等。它可能更适合那里的图形数据库之一. Neo4j 是一个很好的例子，专为社交网络设计。[http://neo4j.org](http://neo4j.org)看看，可能是一个不错的选择。您不必摆脱 mysql，它很可能是一种混合方法。

# makefile - GNU-make 规则中的真正命令

> ID：12787482
> 
> 赞同：0
> 
> 时间：2012-10-08T18:34:52.410
> 
> 标签：makefile, gnu-make

我正在研究我实验室中其他人编写的 Makefile，我看到一个`true`在某些规则中调用的命令：

```
other_rule_A: YYY force_it
          ....
other_rule_B: XXX force_it
          ....

force_it:
          true 
```

这里的真实是什么意思？它是子shell运行的命令吗？如果我将其替换为 false 会发生什么？shell是否`true`调用了二进制文件？

作为参考，我在 Stackoverflow 中发现了另一个问题：[为什么 makefiles 有时将 'true' 作为构建脚本的一部分？](https://stackoverflow.com/questions/5239836/why-do-makefiles-sometimes-have-true-filename-as-part-of-the-build-script)，但我认为 command 与他们在该线程中涵盖的命令无关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:43:34.710

`true`是一个不执行任何操作并返回成功的命令（通常是可执行文件`/bin/true`，但通常也是内置的 shell）。如果您将其替换为`false`，则该`force_it:`规则将始终失败并因此在此时停止 make 过程。

`true`有这个动作和没有动作的规则之间的区别在于，`force_it:`如果没有动作，可能会有一些其他`force_it:`规则在 makefile 的其他地方添加了动作。有了一个`true`动作，你就知道不可能有其他动作——如果添加了另一个动作，你会得到一个 make 错误。

# java - 如何使用 gridbag 使我的 JFrame 的一半成为文本区域和另一半按钮？

> ID：12787483
> 
> 赞同：2
> 
> 时间：2012-10-08T18:34:57.870
> 
> 标签：java, user-interface, layout, layout-manager, gridbaglayout

我想制作一个 JFrame 来显示这样的 GUI：http: [//i.stack.imgur.com/2POFs.png](http://i.stack.imgur.com/2POFs.png) （我不允许嵌入图片）

空白空间是相同的 X 和 Y 尺寸，按钮是相同的 X 和 Y 尺寸，JTextArea 是框架的一半。

```
public static JFrame frame = new JFrame ("Launcher " + version);
public static GridBagConstraints c = new GridBagConstraints();
public static JTextArea news = new JTextArea();
public static JButton launchGame = new JButton("Launch Game");
public static JButton settings = new JButton("Settings");
public static JButton exitGame = new JButton("Exit");

public static void main(String[] args) 
{
    news.setEditable(false);
    news.setBounds(0, 0, (screenSize.width - 500) / 2,  screenSize.height - 400);
    news.append("                        NEWS:\n");
    news.setBorder(BorderFactory.createBevelBorder(BevelBorder.RAISED, Color.gray, Color.black));

    frame.setLayout(new GridBagLayout());
    frame.setBounds(300, 200, screenSize.width - 500,  screenSize.height - 400);
    c.fill = GridBagConstraints.VERTICAL;
    c.weighty = 0.5;
    c.gridx = 0;
    c.gridy = 0;
    c.gridheight = 3;
    frame.add(news, c);
    frame.setVisible(true);
    c.fill = GridBagConstraints.EAST;
    c.weightx = 0.5;
    c.gridx = 1;
    c.gridheight = 1;
    frame.add(launchGame, c);
    c.gridy = 1;
    frame.add(settings, c);
            c.gridy = 2;
    frame.add(exitGame, c);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:35:25.100

首先...

```
c.fill = GridBagConstraints.EAST; 
```

这不是我想你想做的。我认为填充应该至少`HORIZONTAL`

第二...

您可以`Insets`用来调整组件之间的空间，例如

![在此处输入图像描述](../Images/995afa8ef2792fd9b944bd19bd7e8c2e.png)

```
public class TestLayout {

    public static void main(String[] args) {    
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new FormPane());
                frame.setSize(500, 400);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    protected static class FormPane extends JPanel {

        private JTextArea news = new JTextArea();
        private JButton launchGame = new JButton("Launch Game");
        private JButton settings = new JButton("Settings");
        private JButton exitGame = new JButton("Exit");

        public FormPane() {
            setLayout(new GridBagLayout());

            news.setEditable(false);
            news.append("                        NEWS:\n");
            news.setBorder(BorderFactory.createBevelBorder(BevelBorder.RAISED, Color.gray, Color.black));

            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.fill = GridBagConstraints.BOTH;
            gbc.weighty = 1;
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.gridheight = GridBagConstraints.REMAINDER;
            gbc.weightx = 0.25;
            add(news, gbc);

            gbc.insets = new Insets(0, 50, 0, 50);
            gbc.gridheight = 1;
            gbc.gridx++;            
            add(launchGame, gbc);
            gbc.gridy = 1;
            add(settings, gbc);
            gbc.gridy = 2;
            add(exitGame, gbc);
        }
    }
} 
```

我也可能倾向于将按钮放置在自己的容器中（如 a `JPanel`），并可能使用 a`GridLayout`来布置它们，然后使用上述建议来放置文本区域和按钮容器。

这隔离了单独的布局需求，而不会使布局进一步复杂化......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T18:56:42.967

这是你想要的吗？我在您的按钮约束中添加/修改了以下内容：

```
 c.fill = GridBagConstraints.HORIZONTAL;
    c.insets = new Insets(0, 10, 0, 10); // 10 is the marginal 
```

这是完整的代码：

```
public static void main(String[] args)
{
    news.setEditable(false);
    news.append("                        NEWS:\n");
    news.setBorder(BorderFactory.createBevelBorder(BevelBorder.RAISED, Color.gray, Color.black));

    frame.setLayout(new GridBagLayout());
    c.fill = GridBagConstraints.VERTICAL;
    c.weighty = 0.5;
    c.gridx = 0;
    c.gridy = 0;
    c.gridheight = 3;
    frame.add(news, c);
    c.fill = GridBagConstraints.HORIZONTAL;
    c.insets = new Insets(10, 10, 10, 10); // 10 is the marginal
    c.weightx = 0.5;
    c.gridx = 1;
    c.gridheight = 1;
    frame.add(launchGame, c);
    c.gridy = 1;
    frame.add(settings, c);
    c.gridy = 2;
    frame.add(exitGame, c);

    frame.pack();
    frame.setVisible(true);
} 
```

这是一个类似的布局使用`BoxLayout`代替（我认为更容易使用）：

```
private static JComponent buildButtons() {
    for (JButton button : Arrays.asList(launchGame, settings, exitGame)) {
        button.setMaximumSize(new Dimension(Short.MAX_VALUE, Short.MAX_VALUE));
    }

    Box b = Box.createVerticalBox();
    b.add(Box.createVerticalStrut(10));
    b.add(launchGame);
    b.add(Box.createVerticalStrut(10));
    b.add(settings);
    b.add(Box.createVerticalStrut(10));
    b.add(exitGame);
    b.add(Box.createVerticalStrut(10));

    return b;
}

static JComponent buildUI() {
    Box b = Box.createHorizontalBox();
    b.add(news);
    b.add(Box.createHorizontalStrut(10));
    b.add(buildButtons());
    b.add(Box.createHorizontalStrut(10));

    return b;
}

public static void main(String[] args)
{
    news.setEditable(false);
    news.append("                        NEWS:\n");
    news.setBorder(BorderFactory.createBevelBorder(BevelBorder.RAISED, Color.gray, Color.black));

    frame.add(buildUI());
    frame.pack();
    frame.setVisible(true);
} 
```

# c# - 从 www 文件夹中读取文件的路径

> ID：12787486
> 
> 赞同：0
> 
> 时间：2012-10-08T18:35:05.700
> 
> 标签：c#, asp.net

我有一个二进制阅读器来读取文件

```
BinaryWriter bw2 = new BinaryWriter(File.Open(@"c:\test\test6.xml", FileMode.OpenOrCreate)); 
```

我设置的路径是 c:\test\test.xml 但是它需要从 www 文件夹托管站点读取文件，所以 www\test\test.xml 应该是 ~\test\test.xml 吗？没有把握。谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:38:12.557

查看 Server.MapPath() [http://msdn.microsoft.com/en-us/library/ms524632(v=VS.90).aspx](http://msdn.microsoft.com/en-us/library/ms524632(v=VS.90).aspx)

所以在你的情况下，你在这个之后：

```
using (BinaryWriter bw2 = new BinaryWriter(File.Open(Server.MapPath(@"~\test\test6.xml", FileMode.OpenOrCreate)))
{
    ...
} 
```

请注意，我添加了 using()，这是处理文件等昂贵资源的最佳实践。

当然，您确实应该将文件打开与对象创建分开，这样您就可以在代码中进行更好的诊断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:37:52.550

可能你需要这个功能： http: [//msdn.microsoft.com/en-us/library/ms524632 (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms524632(v=vs.90).aspx)

# c++ - 函数返回的结果比应有的小 1

> ID：12787490
> 
> 赞同：2
> 
> 时间：2012-10-08T18:35:23.290
> 
> 标签：c++, codeblocks

我正在尝试编写一个八进制到十进制转换的应用程序。

问题是返回值比应有的值小 1，例如：

> 输入：2426（十月）
> 
> 应该返回：1302（十二月）
> 
> 回报：1301（十二月）

有什么想法有什么问题吗？如果有人想知道，我正在使用最新的 Code::Blocks。

这是我的代码：

```
int oct2dec (int number) {
    int system  = 8;
    int length  = IntegerLength(number);
    int power   = length - 1;
    int result  = 0;
    int partial = 0;

    do {
        partial = part_nr(number);
        cout<<"czastka: "<<partial<<endl;
        result = result + (partial * pow(system,power));
        number = number - (partial * pow(10,power));
        power--;

    } while (number>0);
    return result; 
} 
```

part_nr 函数：

```
int part_nr(int number) {
    int multipler = 1;
    int result    = 0;
    do {
        int temp=number/multipler;
        if(temp<10) result = temp;
        multipler = multipler*10;
    } while (result == 0);
    return result;
} 
```

整数长度函数：

```
int IntegerLength(int value) {
   int divisor = 10;
   int length  = 1;
   while(value >= divisor)
   {
     value = (value - (value % divisor)) / divisor;
     length ++;
   }

   return length;
} 
```

（顺便说一句。我已经将变量从我的母语语言翻译成英语，所以如果你看到任何非英语变量这么说，我会更正它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:49:06.587

我认为您的算法只是在四舍五入方面存在问题。无论如何，这**不是**进行转换的方法：在输入的过程中，您只需读取数字并将其添加到当前值。如果还有另一个数字，则乘以 8 并重复。

在出路时，您将除以 10 的余数（模数）形成下一个数字。然后除以 10，当结果非零时重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:53:35.793

您可以比您尝试做的更容易做到这一点。例如：

```
unsigned int oct2dec(unsigned int oct) {
    int dec = 0, m = 1;

    while (oct > 0) {
        dec += m * (oct % 10);
        oct /= 10;
        m *= 8;
    }
    return dec;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T18:47:55.793

我已经测试了您的代码，它正在输出您声称的预期值。我遇到的唯一问题是四舍五入。我将**pow()**函数调用更改为**powf()**，然后将该函数的结果转换为整数。

这是我测试的代码（VS2010 C++ 项目）：

```
#include "stdafx.h"
#include <iostream>
#include <cmath>    
using namespace std;

int part_nr(int number) {
  int multipler = 1;
  int result    = 0;
  do {
    int temp=number/multipler;
    if(temp<10) result = temp;
    multipler = multipler*10;
  } while (result == 0);
  return result;
}

int IntegerLength(int value) {
   int divisor = 10;
   int length  = 1;
   while(value >= divisor)
   {
     value = (value - (value % divisor)) / divisor;
     length++;
   }
   return length;
}

int oct2dec (int number) {
  int system  = 8;
  int length  = IntegerLength(number);
  int power   = length - 1;
  int result  = 0;
  int partial = 0;

  do {
    partial = part_nr(number);
    cout<<"czastka: "<<partial<< endl;
    result = result + (partial * (int)powf(system,power));
    number = number - (partial * (int)powf(10,power));
    power--;

  } while (number>0);
  return result; 
}

int _tmain(int argc, _TCHAR* argv[])
{
  int res = oct2dec(2426);
  cout << "res is " << res << endl;
  getchar();
  return 0;
} 
```

# mod-rewrite - RewriteRule 从另一台主机加载图像？

> ID：12787495
> 
> 赞同：0
> 
> 时间：2012-10-08T18:35:40.073
> 
> 标签：mod-rewrite, apache2

在我们的开发服务器上，我们只有代码，为了节省空间，它们不包括图形内容。我以前有一些重写规则，可以根据扩展从实时站点加载所有图像，但它们突然停止工作，我似乎无法让它们再次工作。

如果我想获取所有以 .gif、.jpg 或 .png 结尾的文件，并让它们从另一个主机名/IP 地址中提取，那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T06:54:47.140

> 如果我想获取所有以 .gif、.jpg 或 .png 结尾的文件，并让它们从另一个主机名/IP 地址中提取，那么最好的方法是什么？

像这样的东西：

```
RewriteEngine On
RewriteRule ^(.*)\.(gif|png|jpe?g)$ http://other-host.com/$1.$2 [NC,L,R=301] 
```

如果您宁愿反向代理而不是重定向`R=301`，则可以替换为。`P`

# iphone - 从 Twitter api 显示表情符号？

> ID：12787496
> 
> 赞同：1
> 
> 时间：2012-10-08T18:35:48.717
> 
> 标签：iphone, objective-c, emoji

我有一个应用程序可以检索用户的流并将其放入 UITableView。但是，有些包含表情符号（iOS 中的那些小笑脸），它们只是作为我的 UILabel 中的框返回。

我已经做了一些研究，但我仍然无法弄清楚。是否需要更改文本类型？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:32:31.747

请根据我理解的部分更好地解释您的问题，请注意表情符号在 iPhone 中具有本机支持，因此任何应用程序都可以在文本框中显示表情符号，我建议您检查您用于将文本添加到uitableview 和正在显示的字符串中的**文本编码，您也可以查看此**[链接](https://stackoverflow.com/questions/7357006/iphone-emoji-unicode-encoding-utf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:01:49.023

使用 NSString drawinrect 代替 drawGlyphsForGlyphRange 来显示表情符号。

# bash - wget 并在一行中运行/删除 bash 脚本

> ID：12787501
> 
> 赞同：12
> 
> 时间：2012-10-08T18:36:26.867
> 
> 标签：bash, shell, wget

```
wget http://sitehere.com/install.sh -v -O install.sh; rm -rf install.sh 
```

下载正确后运行脚本然后将其删除？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-11-30T20:48:28.637

我喜欢将它通过管道传输到 sh. 无需在本地创建和删除文件。

`wget http://sitehere.com/install.sh -O - | sh`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-08T18:39:26.670

我认为您可能需要实际执行它：

```
wget http://sitehere.com/install.sh -v -O install.sh; ./install.sh; rm -rf install.sh 
```

另外，如果你想要更健壮一点，你可以使用`&&`to 分隔命令，它只会在前一个命令成功的情况下尝试执行下一个命令：

```
wget http://sitehere.com/install.sh -v -O install.sh && ./install.sh; rm -rf install.sh 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-21T04:53:27.030

我认为这是最好的方法：

```
wget -Nnv http://sitehere.com/install.sh && bash install.sh; rm -f install.sh 
```

分解：

*   `-N`或者`--timestamping`仅在服务器上较新的文件时才下载该文件
*   `-nv`或`--no-verbose`最小化输出，或`-q`/`--quiet`根本没有“ `wget`”输出
*   `&&`如果第一个命令成功，将只执行第二个命令
*   使用`bash`（或`sh`）执行脚本，假设它是一个脚本（或 shell 脚本）；没有必要`chmod +x`
*   `rm -f`（或`--force`）文件，无论发生什么（即使它不存在）
*   在这种情况下，不必使用`-O`选项 with 。`wget`除非您想使用不同的临时文件名，否则这是多余的`install.sh`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T18:42:51.917

您在第一个语句中下载并在最后一个语句中删除。您需要添加一行来执行文件，方法是添加：

```
./install.sh 
```

# c# - 如何将数据从richtextbox传输到另一个richtextbox WPF C#

> ID：12787513
> 
> 赞同：5
> 
> 时间：2012-10-08T18:37:38.677
> 
> 标签：c#, wpf

嗨，我在显示或将我的 Richtextbox 中的数据传输到其他 Richtextbox 时遇到问题...

```
richtextbox1.Document = richtextbox2.Document; //This will be the idea.. 
```

实际上我打算做的是，我想将我的数据从我的数据库传输到我的列表视图，它将显示为它是什么

```
SQLDataEHRemarks = myData["remarks"].ToString();// Here is my field from my database which is set as Memo
RichTextBox NewRichtextBox = new RichTextBox();// Now i created a new Richtextbox for me to take the data from SQLDataEHRemarks...
NewRichtextBox.Document.Blocks.Clear();// Clearing
TextRange tr2 = new TextRange(NewRichtextBox.Document.ContentStart, NewRichtextBox.Document.ContentEnd);// I found this code from other forum and helps me a lot by loading data from the database....
MemoryStream ms2 = GetMemoryStreamFromString(SQLDataEHRemarks);//This will Convert to String
tr2.Load(ms2, DataFormats.Rtf);//then Load the Data to my NewRichtextbox 
```

现在我想要做的是，我将把这些数据加载到我的 ListView.. 或其他控件，如文本块或文本框......

```
_EmpHistoryDataCollection.Add(new EmployeeHistoryObject{
EHTrackNum = tr2.ToString()  // The problem here is it will display only the first line of the paragraph.. not the whole paragraph
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T06:48:01.273

使用的`Text`属性`TextRange`代替`.ToString()`

获取`RichTextBox`字符串内容的方法：

```
public static string GetStringFromRichTextBox(RichTextBox richTextBox)
{
    TextRange textRange = new TextRange(richTextBox.Document.ContentStart, richTextBox.Document.ContentEnd);
    return textRange.Text;
} 
```

获取`RichTextBox`富文本内容的方法：

```
public static string GetRtfStringFromRichTextBox(RichTextBox richTextBox)
{
    TextRange textRange = new TextRange(richTextBox.Document.ContentStart, richTextBox.Document.ContentEnd);
    MemoryStream ms = new MemoryStream();
    textRange.Save(ms, DataFormats.Rtf);

    return Encoding.Default.GetString(ms.ToArray());
} 
```

**编辑：**`RichText`您可以通过执行以下操作将从 GetRtfStringFromRichTextBox() 返回的富文本放入另一个控件中：

```
FlowDocument fd = new FlowDocument();
MemoryStream ms = new MemoryStream(Encoding.ASCII.GetBytes(richTextString));
TextRange textRange = new TextRange(fd.ContentStart, fd.ContentEnd);
textRange.Load(ms, DataFormats.Rtf);
richTextBox.Document = fd; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-14T04:26:58.980

不会将 RichTextBox 的内容作为字符串获取如下（在 VB.Net 中）

```
Dim strText as string = MyRTB.text 
```

# javascript - 使用 Underscore.js（或纯 javascript）减少 javascript 数组

> ID：12787514
> 
> 赞同：2
> 
> 时间：2012-10-08T18:37:42.517
> 
> 标签：javascript, underscore.js

我在 Javascript 中有一系列类似于以下内容的项目：

```
var data =
[
{"id":"338b79f07dfe8b3877b3aa41a5bb8a58","date":"2000-10-05T13:21:30Z","value":  {"country":"United States"}},
{"id":"338b79f07dfe8b3877b3aa41a5bb983e","date":"2000-02-05T13:21:30Z","value":{"country":"Norway"}},
{"id":"338b79f07dfe8b3877b3aa41a5ddfefe","date":"2000-12-05T13:21:30Z","value":{"country":"Hungary"}},
{"id":"338b79f07dfe8b3877b3aa41a5fe29d7","date":"2000-05-05T13:21:30Z","value":{"country":"United States"}},
{"id":"b6ed02fb38d6506d7371c419751e8a14","date":"2000-05-05T18:15:30Z","value":{"country":"Germany"}},
{"id":"b6ed02fb38d6506d7371c419753e20b6","date":"2000-12-05T18:15:30Z","value":{"country":"Hungary"}},
{"id":"b6ed02fb38d6506d7371c419755f34ad","date":"2000-06-05T18:15:30Z","value":{"country":"United States"}},
{"id":"b6ed02fb38d6506d7371c419755f3e17","date":"2000-04-05T22:15:30Z","value":{"country":"Germany"}},
{"id":"338b79f07dfe8b3877b3aa41a506082f","date":"2000-07-05T22:15:30Z","value":{"country":"United Kingdom"}},
{"id":"9366afb036bf8b63c9f45379bbe29509","date":"2000-11-05T22:15:30Z","value":{"country":"United Kingdom"}}
]; 
```

我需要按日期查询（减少）数组。大于或小于预定日期，例如。当前日期。

我正在考虑使用下划线减少方法来做到这一点。任何人都可以提供我如何做到这一点的例子吗？

编辑：我尝试这样的事情：

```
var itemsByDate = _(items).reduce(function(memo, item) {
memo[item.date] = memo[item.date] || [];
memo[item.date].push(item);
return memo;
}, {});

console.log((JSON.stringify(itemsByDate["2000-11-05T22:15:30Z"])));​ 
```

但这会寻找精确匹配，并且可能无法正确处理日期，因为它们是字符串。

问候，

卡尔斯基

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:42:42.220

如果要过滤集合，可以这样做：

```
var reduced = data.filter(function(obj) {
    var date = +(new Date(obj.date));
    return date < someDate || date > someOtherDate
}); 
```

如果你想把它减少到一对集合，你可以这样做：

```
var now = Date.now();

var reduced = data.reduce(function(ret, obj) {
    var date = +(new Date(obj.date));
    if (date < now)
        ret.before.push(obj);
    else
        ret.onOrAfter.push(obj);
    return ret;
}, {before:[], onOrAfter:[]}); 
```

# postgresql - 如何将使用 postgresql 的 sinatra 应用程序部署到 appfog

> ID：12787522
> 
> 赞同：1
> 
> 时间：2012-10-08T18:38:12.470
> 
> 标签：postgresql, deployment, sinatra, appfog

我正在尝试将一个简单的 sinatra 应用程序部署到 appfog，数据库后端是 postgresql。

这是我想出的

```
require 'sinatra'
require 'data_mapper'

if ENV['VCAP_SERVICES']
  require 'json'
  services = JSON.parse(ENV['VCAP_SERVICES'])
  postgresql_key = services.keys.select { |svc| svc =~ /postgresql/i }.first
  postgresql = services[postgresql_key].first['credentials']
  postgresql_conn = "postgres://"+postgresql['user']+":"+postgresql['password']+ \
    "@"+postgresql['host']+":"+postgresql['port']+"/"+postgresql['name']
  DataMapper.setup(:default, postgresql_conn)
else
  DataMapper.setup(:default, "postgres://postgres:postgres@localhost:5432/todo_list")
end 
```

我的清单.yml

```
---
applications:
  .:
    name: supertasks
    framework:
      name: sinatra
      info:
        mem: 128M
        description: Sinatra Application
        exec: ruby web.rb
    infra: hp
    url: ${name}.${target-base}
    mem: 128M
    instances: 1
    services:
      postgresql-4aaf:
        type: postgresql 
```

我的 Gemfile 有以下代码

```
source :rubygems

gem 'sinatra'
gem 'thin'
gem "pg"
gem 'data_mapper'
gem 'dm-postgres-adapter'
gem 'json' 
```

尝试启动应用程序时出现以下错误

```
 Error: Application [supertasks] failed to start, logs information below.                                                                               

====> /logs/staging.log <====

# Logfile created on 2012-10-08 18:59:58 +0000 by logger.rb/25413
Adding json-1.7.5.gem to app...
Adding data_mapper-1.2.0.gem to app...
Adding dm-core-1.2.0.gem to app...
Adding addressable-2.2.8.gem to app...
Adding dm-aggregates-1.2.0.gem to app...
Adding dm-constraints-1.2.0.gem to app...
Adding dm-migrations-1.2.0.gem to app...
Adding dm-serializer-1.2.2.gem to app...
Adding fastercsv-1.5.5.gem to app...
Adding json_pure-1.7.5.gem to app...
Adding multi_json-1.3.6.gem to app...
Adding dm-timestamps-1.2.0.gem to app...
Adding dm-transactions-1.2.0.gem to app...
Adding dm-types-1.2.2.gem to app...
Adding bcrypt-ruby-3.0.1.gem to app...
Adding stringex-1.4.0.gem to app...
Adding uuidtools-2.1.3.gem to app...
Adding dm-validations-1.2.0.gem to app...
Adding dm-postgres-adapter-1.2.0.gem to app...
Adding dm-do-adapter-1.2.0.gem to app...
Adding data_objects-0.10.9.gem to app...
Adding do_postgres-0.10.9.gem to app...
Adding pg-0.14.1.gem to app...
Adding sinatra-1.3.3.gem to app...
Adding rack-1.4.1.gem to app...
Adding rack-protection-1.2.0.gem to app...
Adding tilt-1.3.3.gem to app...
Adding thin-1.5.0.gem to app...
Adding daemons-1.1.9.gem to app...
Adding eventmachine-1.0.0.gem to app...
Adding bundler-1.1.3.gem to app...
Adding cf-autoconfig-0.0.4.gem to app...
Adding cf-runtime-0.0.2.gem to app. server error occurr... 
```

有谁知道如何设置一个使用带有 appfog 的 postgresql 数据库的 sinatra 应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T22:33:06.677

我尝试自己在 af 上运行您的代码，它看起来是正确的。您是否已将数据库绑定到您的应用程序？要将“服务”绑定到 appfog 中的应用程序，您必须在 af cli 中执行以下步骤：

```
af bind-service <servicename> <appname> 
```

您还可以在应用程序的服务选项卡下的 console.appfog.com 上的 appfog 控制台中绑定数据库。

# javascript - 从对象列表中获取属性

> ID：12787524
> 
> 赞同：0
> 
> 时间：2012-10-08T18:38:25.803
> 
> 标签：javascript, jquery, backbone.js, underscore.js

通过使用`underscore`or`jQuery`我需要将`maximum id`对象列表中包含的值增加一。

javascript 对象是 a `Backbone.Collection`，它看起来像这样：

```
this.collection.models = [{attributes: {id: 1, ....}}, {}]; 
```

我编写了以下有效的代码，但我想知道是否有任何更改可以改进它。

谢谢。

```
getId: function () {
  return _.max(
          _.map(
           _.pluck(this.collection.models, 'attributes'), function (attributes) {
              return attributes.id;
    })) + 1;
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:16:33.017

_.max 接受回调迭代器函数：

```
var next = _.max(list, function(i) { return i.attributes.id; }).attributes.id + 1; 
```

我知道 lodash 库是这样，不知道下划线是这样。

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:46:25.957

[一种方法是使用比较器](http://backbonejs.org/#Collection-comparator)方法按 id 排序您的集合。

```
collection.comparator = function(model) {
    return model.id;
} 
```

当你设置它时，你的最后一个模型保证有 largets id。

```
collection.next = function(){
    return this.last().id + 1;
} 
```

在定义集合时定义这些可能会更好：

```
var Collection = Backbone.Collection.extend({
  comparator: function(model) {
    return model.id;
  },
  next: function(){
    return this.last().id + 1;
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T18:48:06.077

[***Live demo here***](http://livecoding.io/3854158)

How about this:

```
var result = _.chain(this.collection.models)
    .pluck('attributes')
    .max(function(value) {
        return value.id;
    })
    .value(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T19:24:30.113

简单的循环没有任何问题，集合中的这样的东西是完全可以接受的：

```
var max = 0;
for(var i = 0; i < this.models.length; ++i)
    max = this.models[i].id > max ? this.models[i].id : max;
return max + 1; 
```

如果你不得不使用下划线，或者像这样：

```
var max = 0;
this.each(function(m) {
    max = m.id > max ? m.id : max;
});
return max + 1; 
```

这两个都会进入集合内部，在集合之外触摸集合的`models`数组是不礼貌的。

仅仅因为你拥有所有的 jQuery 和 Underscore 机器并不意味着你必须在任何地方使用它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-08T18:54:28.973

```
var max = _.max(this.collection.pluck('id')) + 1; 
```

不要使用这个：

```
this.collection.models = [{attributes: {id: 1, ....}}, {}]; 
```

这是正确的方法：

```
this.collection.reset([{id: 1}, {id: 2}]) 
```

# c# - 使用后清除对象变量（池）c#

> ID：12787527
> 
> 赞同：0
> 
> 时间：2012-10-08T18:38:39.240
> 
> 标签：c#, reflection

我正在研究一种池算法，该算法采用分配的对象并将其回收分配以供以后使用。但是，回收对象的问题之一是：

```
 someObject obj = pool.alloc(); //gives me a new object if no previous allocations, If an allocation has been recycled, returns a previous allocation
 obj.someVariable = "foo";
 pool.recycle(obj); 
```

上面的代码将采用现有的分配并保存它，这样我就不必分配任何额外的内存，以防万一我有另一个 someObject。但是，以下会产生一个问题：

```
 someObject obj = pool.alloc(); //gives me the above allocation
 obj.otherVariable = "bar";
 obj.dump(); 
```

结果，我将得到以下结果：

```
 someVariable = foo
  otherVariable = bar 
```

上述方法产生了一个问题。如果我出于某种原因（或其他人）有一个不使用对象内部某些变量的算法，那么旧值可能会导致不必要的行为。我已经戳了一下，看看是否有某种方法可以再次调用默认构造函数（坏主意），而 C#（谢天谢地）似乎不允许你这样做。但是，我想知道是否有某种方法可以使用反射来做到这一点？此外，清除对象中的变量是否会破坏避免 malloc（新）的目的？换句话说，如果我花时间清除变量，性能增益会变得最小吗？我正在尝试自学汇集，因此非常感谢任何批评和建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:50:44.810

这是查看池化的一种方式：

只有当您重用一些复杂的设置工作时，池化才是真正需要的，您可以通过检索已经存在的对象来避免这些工作。例如，对象池最著名的应用之一是“数据库连接”的形式。

池化适用于数据库连接 (DBConns)，因为 1) DBConn 可以通过连接字符串轻松识别；2) 建立一个 DBConn 需要大量的工作和时间。简单的识别是通过匹配连接字符串来完成的——如果两个连接字符串相同，那么它们建立的连接也应该相同。此外，一旦有了连接字符串，查找服务器地址、打开套接字、进行身份验证和建立连接可能需要数百毫秒。这意味着池对于数据库连接很有效，因为当一个连接被释放时，它可以在下一次为相同的连接字符串请求连接时被重用。

.NET 运行时环境非常擅长快速分配对象并释放它们，因此您不会遇到内存问题。如果您只担心内存使用或分配速度，请不要；您无法通过自行清零内存来击败编译器的性能。但是，如果您的对象有一些复杂、冗长的设置，可以通过从池中检索现有对象来避免，您会发现一些好处。

池化的另一个很好的例子是电子游戏中的粒子系统。您必须创建数百个粒子，经历一个生命周期并被销毁，只有在旧粒子死亡后才能创建新粒子。一个典型的粒子系统将创建 X 个对象作为一个数组，并具有一个 Reset() 函数，该函数将一个死对象恢复为原始位置中新创建的粒子。这再次起作用的原因是因为可以轻松识别粒子，并且设置工作（为图形系统提供纹理，放置位置等）。

您的应用程序是否同时具有“微不足道的匹配识别”功能和可以避免的冗长设置过程？如果没有，只需每次都分配新的对象 - 我敢打赌你不会看到任何性能下降。

**编辑：**从性能的角度来看，让我们在这里看看：

重置变量 = O(N) 赋值语句；使用反射可以显着增加

实例化一个新对象 = 一次 malloc 调用，一次构造函数调用；复杂程度取决于构造函数代码和内存碎片。

使用反射来重置变量可以工作，但您必须提前知道分配的 O(N) 比您的 malloc 和构造函数更快。对于数据库连接，我知道条件满足；但这对您的游泳池来说是真的吗？

**编辑：**从您下面的评论中，您可能确实找到了适合合并的情况。如果是这种情况，我建议理想的方法是为`Reset()`您正在池化的任何类创建一个函数。尝试创建一个`IPoolable`定义函数的接口`Reset()`。然后，对于您汇集的每个类，定义`Reset()`函数，以便将所有关键变量清零。因为它可以编译，所以不会产生反射开销，并且您可以维护动态代码无法实现的特定于对象的优化。

对于池，将池类定义为`MyPool<IPoolable>`；然后，每当检索到以前回收的对象时，您都可以`Reset()` 在将其返回给调用者之前调用它。

# android - 为什么我的应用的 Google Play 页面不支持某些随机的 Android 设备？我已经检查了清单

> ID：12787529
> 
> 赞同：2
> 
> 时间：2012-10-08T18:38:46.917
> 
> 标签：android

我的应用程序设置为 API 级别 8+ 并支持从 Small 到 xlarge 的屏幕。大多数人可以毫无问题地从 Google Play 下载它，但我有报告说有些人不能，但我不知道为什么。显然，不支持运行 4.1.1 的 Nexus 7，运行 2.2 的 T-Mobile Comet 也是如此。

我已阅读开发人员清单，但看不出还有什么可能导致他们的设备出现问题。所需权限之一是否会导致他们无法下载该应用程序？还是我错过了其他东西？

以下是我的 Google Play 开发者页面的详细信息：

```
versionCode: 2
versionName: 1.0.5
Size: 10.0M
Localized to: default
Permissions: com.google.android.c2dm.permission.RECEIVE, android.permission.INTERNET, android.permission.GET_ACCOUNTS, android.permission.WAKE_LOCK, android.permission.VIBRATE, android.permission.INTERNET, android.permission.READ_EXTERNAL_STORAGE, android.permission.WRITE_EXTERNAL_STORAGE, android.permission.CAMERA, com.android.vending.BILLING, android.permission.ACCESS_NETWORK_STATE, com.streamified.streamified.permission.C2D_MESSAGE
Features: android.hardware.camera, android.hardware.camera.autofocus, android.hardware.touchscreen
No main expansion file
No expansion patch file
« less
API level: 8-16+
Supported screens: small-xlarge
OpenGL textures: all 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T18:47:58.310

您的问题表明您需要该`autofocus`功能，如下所示：

`android.hardware.camera.autofocus`

相机的[GSMArena](http://www.gsmarena.com/t_mobile_comet-3612.php)页面没有将 autufocus 列为功能之一，因此这可能是它不受支持的原因。甚至 Nexus 7 似乎也没有在[Google](http://www.google.com/nexus/#/7/specs)、[Asus](http://www.asus.com/Tablet/Nexus/Nexus_7/#specifications)和[GSMArena](http://www.gsmarena.com/asus_google_nexus_7-4850.php)页面上将自动对焦列为一项功能，而且我在我的页面上也看不到它，所以应该是相同的原因。

如果自动对焦对您来说不是一个完整的要求，请在清单中使用以下内容使其成为可选。

```
<uses-feature android:name="android.hardware.camera.autofocus" android:required="false" /> 
```

# c - 从 yyyymmdd 转换为日、月、日、年

> ID：12787530
> 
> 赞同：1
> 
> 时间：2012-10-08T18:38:50.250
> 
> 标签：c, date

> **可能重复：**
> [C程序查找给定日期的星期几](https://stackoverflow.com/questions/6054016/c-program-to-find-day-of-week-given-date)

我有一个日历文件，日期为“20121027T190000”，我需要将其转换为“1900 年 10 月 27 日，星期三”。是否有计算星期几的 C 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:47:49.327

Yes, the standard `localtime()` function converts from a `time_t` to a `struct tm` that includes the day of the week. To create a `time_t` value, you can use the `mktime()` function to convert from a `struct tm` to a `time_t` (you do not have to fill in the day of the week when using `mktime()`).

This might seem like a roundabout way to do this, but it's reasonably straightforward and uses standard library functions.

# c++ - 关于我的绘图项目的建议

> ID：12787532
> 
> 赞同：1
> 
> 时间：2012-10-08T18:38:57.397
> 
> 标签：c++, math, scripting, lua, graphing

我正在开发一个程序，该程序将每 (.1) 秒更新一次对象列表。程序完成更新列表后，程序将知道是否有任何对象在任何其他对象的一定距离内。每个对象在图上都有一个 X、Y 位置。每个对象都有一个称为“范围”的值。每个刻度 (.1s) 程序将使用距离公式计算是否有任何其他对象小于或等于正在处理的对象的范围。

例如，如果 A 点的范围为 4 并且在 (1,1) 处，而 B 点在 (1,2) 处，则距离公式将返回 ~1，这意味着 B 点在 A 点的范围内。计算看起来与此类似：

```
objects = { A = {X = 1,Y = 1,Range = 4}, B = {X = 1,Y = 2,Range = 3}, C = {X = 4,Y = 7,Range = 9} }

while(true) do
 for i,v in pairs(objects) do
   v:CheckDistance()
 end
wait()
end

-- Point:CheckDistance() calculates the distance of all other points from Point "self".
-- Returns true if a point is within range of the Point "self", otherwise false.
-- 
```

**问题**：该图可能包含超过 200 个点，每个点都会对存在的每个其他点进行数学运算。这将在每 0.1 秒的每个点上发生。我想这可能会减慢或在我使用的 3D 环境中产生延迟。

**问题**：这听起来像是执行此操作的最佳方式吗？您对如何更有效/更快地完成这项工作有什么想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T04:20:55.920

正如[Alex Feinamn](https://stackoverflow.com/questions/12787532/advice-on-my-graphing-project#comment17288000_12787532)所说：看起来你正在制作自己的碰撞检测器，尽管它是一个原始的。

但是，我不确定您是否在 2D 或 3D 平面上有点。您说每个对象“在图表上都有一个 X、Y 位置”，并进一步谈论“我正在使用的 3D 环境中的滞后”。

嗯，2D 和 3D 物理——以及 Lua——都是发达的领域，所以不乏优化。

# 空间树

[四叉树](http://en.wikipedia.org/wiki/Quadtree)（或3D的[八叉树](http://en.wikipedia.org/wiki/Octree)）是一种数据结构，将您的整个 2 世界表示为一个分为四个正方形的正方形，每个正方形又分为四个正方形，依此类推。 ![四叉树的一个例​​子](../Images/8d668fbe5ae737359c9b1ca5c188c970.png)

[您可以在这个方便的站点上](http://www.cs.utah.edu/%7Ecroberts/courses/cs7962/project/)自己试验一个交互式示例。

空间树通常为本地化点提供非常快速的访问。 ![在四叉树中搜索的示例](../Images/28ee3eb71988793765c2bd87f8455665.png)

圆圈代表特定粒子的相互作用半径。如您所见，很容易准确地找到需要遍历哪些分支。

在处理点云时，您需要确保两个点不共享相同的位置，或者您的树有一个最大的划分深度；否则，它将尝试无限地划分分支。

我不知道 Lua 中的任何八叉树实现，但制作一个非常容易。如果需要示例，请查找 Python 或 C 实现；不要在 C++**中**寻找一个，除非你能处理模板的疯狂。或者，您可以通过 Lua API 绑定或 FFI 库使用 C 或 C++ 实现（推荐，请参阅绑定部分）。

# LuaJIT

[LuaJIT](http://luajit.org/luajit.html)是一个定制的 Lua 5.1 解释器和即时编译器，它提供了显着的速度和存储优化，以及一个允许轻松高效地使用 C 函数和类型（例如整数）的 FFI 库。

使用 C 类型来表示您的点和空间树将显着提高性能。

```
local ffi = require"ffi"
ffi.cdef[[
    // gp = graphing project
    struct gp_point_s {
        double x, y;
        double range;
    };

    struct gp_quadtree_root_s {
        // This would be extensive
    };
    struct gp_quadtree_node_s {
        // 
    };
]]

gp_point_mt = {
    __add = function(a, b)
        return gp_point(a.x+b.x, a.y+b.y)
    end,
    __tostring = function(self)
        return self.x..", "..self.y
    end
    __index = {
        -- I couldn't think of anything you might need here!
        something = function(self) return self.range^27 end,
    },
}
gp_point = ffi.metatype("struct gp_point_s", gp_point_mt)

-- Now use gp_point at will

local p = gp_point(22.5, 5.4, 6)
print(p)
print(p+gp_point(1, 1, 0))
print(p:something()) 
```

LuaJIT 会将 gp_point 的任何运行时使用编译为本机程序集，在某些情况下意味着类似 C 的速度。

# Lua API 与 FFI

这是一个棘手的...

通过 Lua API 的调用无法正确优化，因为它们对 Lua 状态具有权威性。而通过 LuaJIT 的 FFI 对 C 函数的原始调用可以完全优化。

由您决定代码应如何互操作：

*   直接在脚本内（**Lua**，限制因素：动态语言只能在一定程度上进行优化）
*   脚本 -> 应用程序绑定（**Lua** -> **C/C++**，限制因素：Lua API）
*   脚本 -> 外部库（**Lua** -> **C**，限制因素：无，FFI 调用是 JIT 编译的）

# 三角洲时间

不是真正的优化，但它很重要。

如果您正在制作一个为用户交互而设计的应用程序，那么您不应该[修复您的时间步长](https://gamedev.stackexchange.com/questions/1589/fixed-time-step-vs-variable-time-step)；也就是说，您不能假设每次迭代都需要 0.1 秒。相反，您必须将所有时间相关操作乘以时间。

```
pos = pos+vel*delta
vel = vel+accel*delta
accel = accel+jerk*delta
-- and so on! 
```

然而，这是一个物理模拟；正如 Glenn Fiedler 所讨论的，物理学的固定时间步长和可变时间步长都存在明显的问题：

> ### 修正你的时间步长或爆炸
> 
> ...如果您在汽车模拟中对减震器有一系列非常严格的弹簧约束，那么 dt 的微小变化实际上会使模拟爆炸。...

如果您使用固定的时间步长，那么理论上每次模拟都应该以相同的方式运行。如果您使用可变时间步长，它将非常平滑但不可预测。建议问问你的教授。（这是一个大学项目，对吧？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:45:04.187

我不知道在您给定的情况下是否可能，但我肯定会使用事件而不是循环。这意味着跟踪一个点何时改变它的位置并对其做出反应。这更有效，因为它需要更少的处理并且比每 1 秒更快地刷新位置。如果您的积分浮动，您可能应该设置一些每次函数调用的上限，因为这样会经常调用这些**事件**。

# objective-c - iOS：重用 UITableViewCell 的 imageView 属性不尊重 contentMode 或 clipsToBounds

> ID：12787534
> 
> 赞同：0
> 
> 时间：2012-10-08T18:39:00.847
> 
> 标签：objective-c, ios, uitableview

> **可能重复：**
> [更改 UITableViewCell 的 imageView 的边界](https://stackoverflow.com/questions/3130804/changing-bounds-of-imageview-of-uitableviewcell)

我有一个自定义`UITableViewController`，并且在其中我动态地设置了一个`UITableViewCell`带有样式的样式`UITableViewCellStyleSubtitle`。一切都很好，除了当一个单元格被重新使用时，它的`imageView`属性不尊重我的`contentMode`或`clipsToBounds`设置。理想情况下，我希望内容遵循默认大小/形状（我认为是 40x40 正方形）。

还有其他帖子（下面的链接）建议对图像进行子类`UITableViewCell`化或重新调整图像大小以完全适合，但这两者都感觉像是解决方法，并且（恕我直言）鉴于我已经拉小（非方形），这会使我的代码过于复杂图片。

**建议子类化 UITableViewCell：** [改变 UITableViewCell 的 imageView 的边界](https://stackoverflow.com/questions/3130804/changing-bounds-of-imageview-of-uitableviewcell)

**建议调整所有图像的大小：** [UITableViewCell's imageView fit to 40x40](https://stackoverflow.com/questions/1055495/uitableviewcells-imageview-fit-to-40x40)

**示例代码：**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    static NSString *kCellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:kCellIdentifier];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:kCellIdentifier];
    }

    NSString *mainText = @"mainText";
    NSString *subtitle = @"subText";

    [[cell textLabel] setText:mainText];
    [[cell detailTextLabel] setText:subtitle];

    // get album cover
    UIImage *imageForCell = [album objectForKey:@"coverImage"];

    // this is the broken part - 
    // it works upon first load, but it is NOT applied when a cell is re-used/dequeued..
    // instead, the image is displayed un-scaled and un-square
    [[cell imageView] setAutoresizingMask:UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth];
    [[cell imageView] setContentMode:UIViewContentModeScaleAspectFill];
    [[cell imageView] setClipsToBounds:YES];

    if (imageForCell) {

        [[cell imageView] setImage:imageForCell];

    } else {

        /* code to retrieve custom image */
    }

    return cell;
} 
```

是什么赋予了？UITableViewCell 中是否有错误？或者这是出于某种设计原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:56:15.510

我很确定 Apple 声称在布局方面拥有 textLabel、detailTextLabel 和 imageView 的所有权，所以我认为您不能将此称为缺陷。

~~[`-tableView:willDisplayCell:forRowAtIndexPath:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3awillDisplayCell%3aforRowAtIndexPath%3a)是一个专门用于格式化单元格布局的 API。你应该有更好的运气在那里进行格式更改。~~

尽管文档暗示了什么，但没有奏效。

# php - 在 wordpress 插件中使用 PEAR XMLRPC2

> ID：12787540
> 
> 赞同：0
> 
> 时间：2012-10-08T18:39:23.060
> 
> 标签：php, wordpress, pear, xml-rpc

我正在尝试在插件函数中运行 PEAR XMLRPC 以进行一些验证。在我服务器上的一个文件夹中的独立应用程序中一切正常，但是一旦我将所有文件放入我的插件文件夹，则：

```
require_once 'XML/RPC2/Client.php'; 
```

不起作用。Client.php 文件返回错误：

```
Warning:  require_once(XML/RPC2/Exception.php) [<a href='function.require-once'>function.require-once</a>]: failed to open stream: 
```

所以我认为它与相对文件和非相对文件有关，但我似乎无法弄清楚为什么它在 wordpress 之外工作得很好。

如果我开始改变所有

```
require_once 'XML/RPC2... 
```

作为服务器上的绝对路径，错误开始消失，但我觉得我不应该改变 PEAR 和 XMLRPC 的源来做我需要的事情。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:46:40.150

您可以更新 PHP 包含路径：

```
set_include_path(get_include_path() . PATH_SEPARATOR . $pathToPearLibs);
require_once($pathToPearLibs . 'XML/RPC2/Client.php'); 
```

这将为 PHP 提供一个（正确的）位置来处理它尝试从错误的位置加载。

# visual-studio-2010 - 从 TFS 构建后事件运行失败的测试

> ID：12787542
> 
> 赞同：1
> 
> 时间：2012-10-08T18:39:32.487
> 
> 标签：visual-studio-2010, workflow-foundation-4, post-build-event, tfs-process-template

我们正在使用 TFS/VS 2010 运行在 TFS 控制器中安排的 Selenium 测试。构建和测试完成后，我想从该构建运行失败的测试。

目前，我正在通过使用 Windows 计划任务并执行一个批处理文件来执行此操作，该批处理文件调用一个 powershell 脚本，该脚本获取最新的构建版本（和失败的测试），然后执行它们（使用 mstest），最后将结果发布回构建。

我只是希望在没有 Windows 计划任务的情况下发生这种情况，这太善变了。我相信我需要编辑 ProcessTemplate.xaml 并添加一个事件（InvokeProcess）来实现这一点，我只是找不到太多。

提前致谢！

# c++ - 不同时间段的chrono？

> ID：12787544
> 
> 赞同：1
> 
> 时间：2012-10-08T18:39:40.063
> 
> 标签：c++, chrono

目前我`boost::rational<std::uint64>`用来跟踪我的应用程序。

基本上我有一个运行很长时间的时钟，并且会被不同时间分辨率的不同组件打勾，例如1/50s、1/30s、1001/30000s等......我想保持完美的精度，即没有浮点数。`boost::rational`为此目的效果很好，但是我认为为此使用它会更好`std::chrono::duration`。

我的问题是，我怎么能`std::chrono::duration`在这里使用？由于它使用编译时间段，我不太明白如何在需要保持精度的场景中使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T23:12:55.930

如果我理解您的问题，并且**如果**您在编译时知道所有不同的时间分辨率，那么以下内容将满足您的需求。您可以通过使用所有不同的时间分辨率来计算正确的刻度周期，`common_type`如下所示：

```
#include <cstdint>
#include <chrono>

struct clock
{
    typedef std::uint64_t                      rep;
    typedef std::common_type
    <
        std::chrono::duration<rep, std::ratio<1, 50>>,
        std::chrono::duration<rep, std::ratio<1, 30>>,
        std::chrono::duration<rep, std::ratio<1001, 30000>>
    >::type                                    duration;
    typedef duration::period                   period;
    typedef std::chrono::time_point<clock>     time_point;
    static const bool is_steady =              true;

    static time_point now()
    {
        // just as an example
        using namespace std::chrono;
        return time_point(duration_cast<duration>(steady_clock::now().time_since_epoch()));
    }
}; 
```

这将在编译时计算最大的刻度周期，它将准确地代表您指定的每个分辨率。例如，用这个时钟可以准确地表示：

*   1/50 有 600 个刻度。
*   1/30 有 1000 个刻度。
*   1001/30000 有 1001 个刻度。

下面的代码对此进行了练习，并使用[此处](http://home.roadrunner.com/~hinnant/bloomington/chrono_io.html)`clock`描述的“chrono_io”工具不仅打印出时钟滴答的运行时数量，还打印出时钟滴答的编译时间单位：

```
#include <iostream>
#include <thread>
#include "chrono_io"

int main()
{
    auto t0 = clock::now();
    std::this_thread::sleep_for(std::chrono::milliseconds(20));
    auto t1 = clock::now();
    std::cout << (t1-t0) << '\n';
} 
```

对我来说，这打印出来：

```
633 [1/30000]seconds 
```

含义：调用之间有 633 个时钟滴答`now()`，每个滴答的单位是 1/30000 秒。如果您不想受制于“chrono_io”，您可以使用`clock::period::num`和检查时钟的单位`clock::period::den`。

如果您的不同时间分辨率不是编译时信息，那么您当前的解决方案`boost::rational`可能是最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:52:31.953

您可以将周期设置为`1`并使用浮点类型`Rep`。

我*怀疑*你可以用 做同样的事情`boost::rational`，但你必须仔细观察`std::chrono`，我没有这样做。看`treat_as_floating_point`和`duration_values`。还要尝试通过“算术类型或模拟算术类型的类”来弄清楚标准的含义。

有人可能会合理地争辩说，如果`boost::rational`不模拟算术类型，那么它就没有做好它的工作。但这并不*一定*意味着它确实做到了`std::chrono::duration`预期的一切。

# r - R：使用一行作为行和的分组向量

> ID：12787547
> 
> 赞同：0
> 
> 时间：2012-10-08T18:40:00.093
> 
> 标签：r, dataframe, plyr, rowsum

如果我有一个数据集，如下所示：

```
Cohort Food1 Food2 Food 3 Food 4
--------------------------------
Group   1     1     2       3
 A      1     1     0       1
 B      0     0     1       0
 C      1     1     0       1
 D      0     0     0       1 
```

我想总结每一行，在那里我可以将食物组定义为不同的类别。所以我想使用 Group 行作为定义向量。

这意味着食物 1 和食物 2 在第 1 组中，食物 3 在第 2 组中，食物 4 在第 3 组中。

理想的输出类似于：

```
Cohort Group1 Group2 Group3
 A      2       0      1
 B      0       1      0
 C      2       0      1
 D      0       0      1 
```

我尝试使用这个基于 rowsum() 的函数但没有运气，我需要使用 ddply() 代替吗？

来自评论的示例数据：

```
dat <-
structure(list(species = c("group", "princeps", "bougainvillei", 
"hombroni", "lindsayi", "concretus", "galatea", "ellioti", "carolinae", 
"hydrocharis"), locust = c(1L, 0L, 0L, 1L, 0L, 0L, 0L, 0L, 0L, 
0L), grasshopper = c(1L, 0L, 0L, 1L, 0L, 0L, 1L, 0L, 1L, 0L), 
    snake = c(2L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 0L), fish = c(2L, 
    1L, 0L, 1L, 1L, 0L, 1L, 0L, 1L, 0L), frog = c(2L, 0L, 0L, 
    0L, 0L, 0L, 0L, 1L, 0L, 0L), toad = c(2L, 0L, 0L, 0L, 0L, 
    1L, 0L, 0L, 0L, 0L), fruit = c(3L, 0L, 0L, 0L, 0L, 1L, 1L, 
    0L, 0L, 0L), seed = c(3L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 
    0L)), .Names = c("species", "locust", "grasshopper", "snake", 
"fish", "frog", "toad", "fruit", "seed"), class = "data.frame", row.names = c(NA, 
-10L)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:11:13.233

很可能有更直接的方法，但您可以尝试以下方法：

1.  首先，创建数据副本减去第二个标题行。

    ```
    dat2 <- dat[-1, ] 
    ```

2.  `melt()`“reshape2”包中的等等`dcast()`不能很好地处理重复的列名，所以让我们让列名更“reshape2适当”。

    ```
    Seq <- ave(as.vector(unlist(dat[1, -1])), 
               as.vector(unlist(dat[1, -1])), 
               FUN = seq_along)
    names(dat2)[-1] <- paste("group", dat[1, 2:ncol(dat)], 
                             ".", Seq, sep = "") 
    ```

3.  `melt()`数据集

    ```
    m.dat2 <- melt(dat2, id.vars="species") 
    ```

4.  使用该`colsplit()`函数正确拆分列。

    ```
    m.dat2 <- cbind(m.dat2[-2], 
                    colsplit(m.dat2$variable, "\\.", 
                             c("group", "time")))
    head(m.dat2)
    #         species value  group time
    # 1      princeps     0 group1    1
    # 2 bougainvillei     0 group1    1
    # 3      hombroni     1 group1    1
    # 4      lindsayi     0 group1    1
    # 5     concretus     0 group1    1
    # 6       galatea     0 group1    1 
    ```

5.  照常`dcast()`进行

    ```
    dcast(m.dat2, species ~ group, sum)
    #         species group1 group2 group3
    # 1 bougainvillei      0      0      0
    # 2     carolinae      1      1      0
    # 3     concretus      0      2      2
    # 4       ellioti      0      1      0
    # 5       galatea      1      1      1
    # 6      hombroni      2      1      0
    # 7   hydrocharis      0      0      0
    # 8      lindsayi      0      1      0
    # 9      princeps      0      1      0 
    ```

**注意**：已编辑，因为原始答案不正确。

### 更新：基础 R 中的一种更简单的方法

如果您从转置数据开始，这个问题会*更容易解决。*

```
dat3 <- t(dat[-1, -1])
dat3 <- as.data.frame(dat3)
names(dat3) <- dat[[1]][-1]
t(do.call(rbind, lapply(split(dat3, as.numeric(dat[1, -1])), colSums)))
#               1 2 3
# princeps      0 1 0
# bougainvillei 0 0 0
# hombroni      2 1 0
# lindsayi      0 1 0
# concretus     0 2 2
# galatea       1 1 1
# ellioti       0 1 0
# carolinae     1 1 0
# hydrocharis   0 0 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:12:03.310

你可以很容易地使用基础 R 来做到这一点。这是一个例子。

首先，找出哪些动物属于哪个组：

```
groupings <- as.data.frame(table(as.numeric(dat[1,2:9]),names(dat)[2:9]))

attach(groupings)
grp1 <- groupings[Freq==1 & Var1==1,2]
grp2 <- groupings[Freq==1 & Var1==2,2]
grp3 <- groupings[Freq==1 & Var1==3,2]
detach(groupings) 
```

然后，使用组`rowSums()`在正确的列上执行操作。

```
dat <- cbind(dat,rowSums(dat[as.character(grp1)]))
dat <- cbind(dat,rowSums(dat[as.character(grp2)]))
dat <- cbind(dat,rowSums(dat[as.character(grp3)])) 
```

删除初始行和中间列：

```
dat <- dat[-1,-c(2:9)] 
```

然后，只需正确重命名即可：

```
row.names(dat) <- rm()
names(dat) <- c("species","group_1","group_2","group_3") 
```

你最终会得到：

```
 species group_1 group_2 group_3
bougainvillei       0       0       0
    carolinae       1       1       0
    concretus       0       2       2
      ellioti       0       1       0
      galatea       1       1       1
     hombroni       2       1       0
  hydrocharis       0       0       0
     lindsayi       0       1       0
     princeps       0       1       0 
```

已编辑：将排序顺序更改为字母顺序，就像其他答案一样。

# php - 如何在zend框架中将错误从模型传递到控制器

> ID：12787549
> 
> 赞同：3
> 
> 时间：2012-10-08T18:40:07.993
> 
> 标签：php, oop, zend-framework, design-patterns

我正在使用 zend 框架，这是我的模型和控制器方法的框架

```
Model Class methods :
_validateRegisterForm($postData)
{
//validating data using Zend_Filter_Input
//Returns instance of Zend_Filter_Input
}

//Return true/false
protected _isNumberAlreadyExists()
{
  // I dnt want to perform above validation using zend_validate_db_recordexists
  //since i dnt want to mix my dblogic with in buisness logic
}
register($postData)
{
  $input=$this->_validateRegisterForm($postData);

  if(!$input->isValid())
  {
   //What should it return to controller
  }
  if(!$this->_isNumberAlreadyExists($input->number))
  {
    //What should it return to controller
  }
}

controller class api

$this->_model->register($postData) 
```

我希望在以下条件下以相同的格式将错误返回给控制器类

```
 if(!$input->isValid())
  {
   //What should it return to controller
  }
  if(!$this->_isNumberAlreadyExists($input->number))
  {
    //What should it return to controller
  } 
```

我可以简单地从模型类返回 false 但为此我必须保存 zend_filter_Input 实例或错误消息（如果数字已经存在）。因此在这种情况下我必须创建另一个错误处理程序对象，它可以将错误消息转换为通用格式并让控制器获取那些错误

对我来说，它看起来不像是在 zend 框架中做事的正确方式。有人愿意帮助我将错误从模型传递到 zend 框架中的控制器，还是建议一些其他方法来处理 zend 框架中的错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T07:40:11.633

在我们开始之前有两个注意事项：

1.  首先，Model不是一个类，而是一个Layer。
2.  下面的代码不是 ZF 特定的

为了解决你的问题，你可以做

```
public function register()
{
    $this->assertThis($postData);
    $this->assertThat($postData);

    // do something with $postData
} 
```

方法`assertThis`和`assertThat`是您的验证方法，只是它们不会返回某些东西，而是会抛出适当的异常。[由于 register 是一个命令，它根本不应该返回任何东西。](http://martinfowler.com/bliki/CommandQuerySeparation.html)

在您的控制器中，您只需捕获异常并将它们转换为您的表示层可用的格式（这就是 C+V 是什么）

```
public function registerAction()
{
    try {
        $this->foo->register($this->getRequest()->whatever());
    } catch (ThisException $e) {
        // handle here
    } catch (ThatException $e) {
        // handle here
    }
} 
```

另一种选择是收集进行注册的对象内部的任何错误。然后，您当然必须返回并在该对象上提供一个方法来获取错误。因此，它为您的对象添加了杂乱无章的内容。

```
public function register()
{
    if ($something === false) {
        $this->errors = 'Something was false';
        return false;
    }

    // do something with $postData
} 
```

然后你的控制器会做

```
public function registerAction()
{
    if (false === $this->foo->register($this->whatever())) {
        $errors = $this->foo->getErrors();
        // do something with $errors
    }
} 
```

第三种选择是使用通知模式

> 一个对象，它在域层中收集有关错误和其他信息的信息并将其传达给表示。

有关深入解释，请参阅[http://martinfowler.com/eaaDev/Notification.html 。](http://martinfowler.com/eaaDev/Notification.html)

# android - 添加元素时活动不拉伸

> ID：12787550
> 
> 赞同：0
> 
> 时间：2012-10-08T18:40:11.530
> 
> 标签：android, layout

我将其他布局添加到我当前的布局中，如下所示：

```
LinearLayout parent = (LinearLayout)findViewById(R.id.average_layout_salaryListContainer);
            for (String month : mVacation.getMonthNameList()) {
                LinearLayout childElement = (LinearLayout) LayoutInflater.from(getApplicationContext()).inflate(R.layout.salary_list_element, null);
                TextView monthTextView = (TextView) childElement.findViewById(R.id.salary_list_element_textView_month);
                monthTextView.setText(month);
                parent.addView(childElement);
            } 
```

虽然我有很多月份（12 个月或更多），但一些添加的元素是不可见的，但我无法向下滚动。如何避免这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T18:43:52.103

你应该把你的主要布局放在一个`ScrollView`这样的地方，当东西变得太长时你可以向下滚动更多信息[在这里](http://developer.android.com/reference/android/widget/ScrollView.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T19:12:19.600

您应该将整个布局包装在`ScrollView`这样一种方式中，您的布局应该很好地适合并在必要时滚动。您应该在这里进一步查看：[ScrollView](http://developer.android.com/reference/android/widget/ScrollView.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T18:43:07.273

尝试用[ScrollView](http://developer.android.com/reference/android/widget/ScrollView.html)包装您的父 LinearLayout 视图。看看这篇文章： [Android - 如果页面不合适，如何设置页面滚动？](https://stackoverflow.com/questions/12272580/android-way-to-set-the-page-to-scroll-if-it-doesnt-fit)

# r - 使用 cbind 从两个向量创建数据框

> ID：12787551
> 
> 赞同：30
> 
> 时间：2012-10-08T18:40:16.023
> 
> 标签：r, dataframe

考虑以下 R 代码。

```
> x = cbind(c(10, 20), c("[]", "[]"), c("[[1,2]]","[[1,3]]"))
> x
     [,1] [,2] [,3]     
[1,] "10" "[]" "[[1,2]]"
[2,] "20" "[]" "[[1,3]]" 
```

相似地

```
> x = rbind(c(10, "[]", "[[1,2]]"), c(20, "[]", "[[1,3]]"))
> x
     [,1] [,2] [,3]     
[1,] "10" "[]" "[[1,2]]"
[2,] "20" "[]" "[[1,3]]" 
```

`10`现在，我不希望将整数`20`转换为字符串。在没有任何此类转换的情况下如何执行此操作？我当然也想知道为什么会发生这种转换。我查看了`cbind`帮助并尝试了谷歌搜索，但没有找到解决方案。我也相信在某些情况下。R 将字符串转换为因子，我也不希望这种情况发生，尽管它似乎没有在这里发生。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-08T18:49:37.930

向量和矩阵只能是单一类型，`cbind`并且`rbind`在向量上会给出矩阵。在这些情况下，数值将被提升为字符值，因为该类型将保存所有值。

（请注意，在您的`rbind`示例中，促销发生在`c`通话中：

```
> c(10, "[]", "[[1,2]]")
[1] "10"      "[]"      "[[1,2]]" 
```

如果你想要一个列可以是不同类型的矩形结构，你需要一个`data.frame`. 以下任何一项都可以满足您的需求：

```
> x = data.frame(v1=c(10, 20), v2=c("[]", "[]"), v3=c("[[1,2]]","[[1,3]]"))
> x
  v1 v2      v3
1 10 [] [[1,2]]
2 20 [] [[1,3]]
> str(x)
'data.frame':   2 obs. of  3 variables:
 $ v1: num  10 20
 $ v2: Factor w/ 1 level "[]": 1 1
 $ v3: Factor w/ 2 levels "[[1,2]]","[[1,3]]": 1 2 
```

或（专门使用 的`data.frame`版本`cbind`）

```
> x = cbind.data.frame(c(10, 20), c("[]", "[]"), c("[[1,2]]","[[1,3]]"))
> x
  c(10, 20) c("[]", "[]") c("[[1,2]]", "[[1,3]]")
1        10            []                 [[1,2]]
2        20            []                 [[1,3]]
> str(x)
'data.frame':   2 obs. of  3 variables:
 $ c(10, 20)              : num  10 20
 $ c("[]", "[]")          : Factor w/ 1 level "[]": 1 1
 $ c("[[1,2]]", "[[1,3]]"): Factor w/ 2 levels "[[1,2]]","[[1,3]]": 1 2 
```

或（使用`cbind`，但制作第一个 a`data.frame`以便它像 data.frames 一样组合）：

```
> x = cbind(data.frame(c(10, 20)), c("[]", "[]"), c("[[1,2]]","[[1,3]]"))
> x
  c.10..20\. c("[]", "[]") c("[[1,2]]", "[[1,3]]")
1        10            []                 [[1,2]]
2        20            []                 [[1,3]]
> str(x)
'data.frame':   2 obs. of  3 variables:
 $ c.10..20\.              : num  10 20
 $ c("[]", "[]")          : Factor w/ 1 level "[]": 1 1
 $ c("[[1,2]]", "[[1,3]]"): Factor w/ 2 levels "[[1,2]]","[[1,3]]": 1 2 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-08T18:45:08.490

使用`data.frame`而不是`cbind`应该有帮助

```
x <- data.frame(col1=c(10, 20), col2=c("[]", "[]"), col3=c("[[1,2]]","[[1,3]]"))
x
  col1 col2    col3
1   10   [] [[1,2]]
2   20   [] [[1,3]]

sapply(x, class) # looking into x to see the class of each element
     col1      col2      col3 
"numeric"  "factor"  "factor" 
```

如您所见， col1 中的元素`numeric`如您所愿。

`data.frame`可以有不同的变量`class`: `numeric`，但没有，一旦你将一个`factor`元素放入矩阵中，所有其他元素都将进入这个类，无论它们之前是什么类。`character``matrix``character`

# asp.net - 带有动态内容的 jQuery 模态对话框

> ID：12787562
> 
> 赞同：0
> 
> 时间：2012-10-08T18:41:13.217
> 
> 标签：asp.net, jquery-ui, treeview, modal-dialog

好的，在这里打我的头。似乎有很多关于这个的讨论，但我认为我需要更详细地分解它。我想创建一个带有允许一些用户交互（复选框）的树视图的模式对话框，然后当用户在对话框上单击“确定”时在主页上设置一个字段。不完全确定如何做到这一点。

我可以通过单击按钮打开对话框，没问题。

标记：

```
<input id="buttonBuildSelect" runat="server" value="Build Select" type="submit" onserverclick="buttonBuildSelect_ServerClick" />
<div id="dialog" title="Expression Builder">
    <p>
        <asp:CheckBox ID="checkBoxOverwrite" runat="server" Text="Overwrite Existing Statement" /></p>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:Panel ID="Panel1" runat="server" Style="border: 1px solid black; overflow: auto;
                height: 200px;">
                <asp:Label ID="labelExpressionType" runat="server" Text=""></asp:Label>
                <asp:TreeView ID="popupTreeView" runat="server" CssClass="treeview" ShowLines="true"
                    NodeStyle-CssClass="nodeStyle">
                </asp:TreeView>
            </asp:Panel>
        </ContentTemplate>
    </asp:UpdatePanel>
    <br />        
</div> 
```

脚本：

```
$(document).ready(function () {

    $(function () {
        $("input:submit").button();
        $("input:submit").click(function () {
            $("#dialog").dialog("open");
            return false;
        });
    });

    $(function () {
        $("#dialog").dialog(
            {
                autoOpen: false,
                modal: true,
                width: 400,
                height: 355,
                resizable: false,
                open: function () {
                    $(this).load("ExpressionBuilder.ascx");
                },
                options: { resizable: false },
                buttons: { "OK": function () {
                    return false
                },
                    Cancel: function () {
                        $(this).dialog("close")
                    }
                }
            }
        )
    });
}); 
```

但我不知道如何 1）单击按钮 2）从数据库加载树视图 3）打开对话框

我一直在研究两种方法，但都无法正常工作。

方法一：使用ajax。但是，我以什么格式返回数据以绑定到树视图以及如何从脚本绑定树视图。

方法二：将对话框的内容放在单独的用户控件中，然后设置对话框加载用户控件

采用哪种方法，然后需要一些帮助才能使该方法发挥作用...

谢谢

**编辑**

我正在构建一个查询生成器。用户从可用实体的下拉列表中选择实体。用户单击“构建选择语句”按钮。将出现一个对话框，其中包含选定实体的树视图作为实体中所有字段的父节点和子节点。用户检查他们希望包含在 select 语句中的每个字段，然后单击 OK。对话框关闭，“选择语句”文本框填充了格式化为实体数据源 ESQL 语句的选中字段（it.[field1]、it.[field2] 等...）

上面发布的代码打开了对话框，但没有内容（因为我没有绑定任何数据。我可以对数据进行硬编码，但我希望用户能够选择要使用的实体，这意味着数据源树视图的视图必须是动态的。现在，我无法让任何一种方法工作。没有错误，但也没有对话框（按钮单击什么都不做）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-09T18:27:14.577

解决方案：

在后面的代码中而不是在脚本中构建对话框。然后注册脚本。所以，我创建了一个方法：

```
''' <summary>
''' Open the jquery dialog
''' </summary>
''' <remarks></remarks>
Protected Sub OpenDialog()
    Dim sb As New StringBuilder()
    sb.Append("$(function() { ")
    sb.Append(" $('#dialog').dialog({")
    sb.Append("    modal: true,")
    sb.Append("    width: 400,")
    sb.Append("    height: 355,")
    sb.Append("    show: 'blind',")
    sb.Append("    hide: 'blind',")
    sb.Append("    resizable: false,")
    sb.Append("    buttons: { 'OK': function () {")
    sb.Append("        return false;")
    sb.Append("    },")
    sb.Append("        cancel: function () {")
    sb.Append("            $(this).dialog('close');")
    sb.Append("        },")
    sb.Append("    },")
    sb.Append(" });")
    sb.Append("});")
    Page.ClientScript.RegisterStartupScript(GetType(Page), "myscript", sb.ToString(), True)
End Sub 
```

# mysql - 不确定要使用哪种 MySQL 数据类型

> ID：12787564
> 
> 赞同：0
> 
> 时间：2012-10-08T18:41:39.523
> 
> 标签：mysql, database

一般来说，我有双重价值观。我将它们用作双精度值和字符串（在应用程序代码中）。我将它们作为 Double 存储在我的 MySQL 数据库中。

我遇到的问题是尾随 0。例如，我得到的值为 10.60。这个值被截断到 10.6，这对我来说不合适。我需要那个尾随的 0。

我还需要它不添加 0。例如，如果我得到 10.60，则不应将 0 加到 10.600。我不确定哪种数据类型适合我的需求。它需要存储为双精度值，但保留其尾随的 0，并且不要添加任何额外的 0。

谁能帮助我使用哪种数据类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:45:12.687

我会将双精度值仅存储在双精度/实数字段中，而不是 varchar 中，以免在转换过程中丢失任何精度。[`ROUND()`](http://dev.mysql.com/doc/refman/5.1/en/mathematical-functions.html#function_round)由于问题仅存在于应用程序代码中，因此在从数据库中检索时，我会将它们四舍五入到适当的小数位（使用函数）。

# javascript - jQuery DatePicker 设置时间和日期

> ID：12787569
> 
> 赞同：0
> 
> 时间：2012-10-08T18:42:10.677
> 
> 标签：javascript, jquery

您好，我被要求修改一些代码。我们得到了这样的东西：

```
$("#expiration_datepicker").datetimepicker( "option", "disabled", false ).attr('value', '');

$("#expiration_datepicker").datetimepicker(
    {
        dateFormat: 'mm-dd-yy',
        showOn: 'button',
        buttonImage: '../chassis/images/calendar.gif',
        buttonImageOnly: true,
        minDate: 0,
        maxDate: '+5Y',
        duration: '',
        <c:if test="${formIsReadonly or form.newsItemId == '-1'}">disabled: true,</c:if>
        constrainInput: false,
        timeFormat: 'hh:mm'
    }); 
```

看起来这是在设置日期选择器

如何将其设置为默认显示今天的日期和时间？像 dd-m-yy hh:mm

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T18:52:38.413

现在只需使用 setdate 和 new Date() 作为日期/时间

```
$(function() {
    $("#datepicker1").datetimepicker({  
        dateFormat: 'dd-m-yy'        
        // your options
    }).datetimepicker("setDate", new Date());
});​ 
```

[小提琴](http://jsfiddle.net/d1cqcw4c/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T18:46:34.787

检查 datepickers 文档以获取更多自定义。肯定有..

```
 $("#expiration_datepicker").datetimepicker( "option", "disabled", false ).attr('value', '');

    $("#expiration_datepicker").datetimepicker(
        {
            **dateFormat: 'dd-m-yy',** // date format goes here
            showOn: 'button',
            buttonImage: '../chassis/images/calendar.gif',
            buttonImageOnly: true,
            minDate: 0,
            maxDate: '+5Y',
            duration: '',
            <c:if test="${formIsReadonly or form.newsItemId == '-1'}">disabled: true,</c:if>
            constrainInput: false,
            timeFormat: 'hh:mm'  // time format here
        }); 
```

用法 ：

```
<script>
$('#expiration_datepicker').click(function(){
    ('#expiration_datepicker').datetimepicker('setDate', (new Date()) );
});
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T18:49:05.143

需要在 datetimepicker 调用之后添加 '.datepicker("setDate", "0")'。请参阅下面的代码。

```
 $("#expiration_datepicker").datetimepicker( "option", "disabled", false ).attr('value', ''); 
 $("#expiration_datepicker").datetimepicker(     {  
   dateFormat: 'dd-m-yy hh:mm', // format goes here. Check its documentation for more.         
  showOn: 'button',         
  buttonImage: '../chassis/images/calendar.gif',         
  buttonImageOnly: true,         
  minDate: 0,        
  maxDate: '+5Y',         
  duration: '',         
 <c:if test="${formIsReadonly or form.newsItemId == '-1'}">disabled: true,</c:if>          constrainInput: false,         
timeFormat: 'hh:mm'     }).datetimepicker("setDate", "0"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-01-05T13:38:57.313

以编程方式设置日期

```
 $('#inputID').datetimepicker("setDate", "05.01.2017 13:36"); 
```

# c# - 解压 PVRTC

> ID：12787572
> 
> 赞同：0
> 
> 时间：2012-10-08T18:42:31.690
> 
> 标签：c#, c++

## 任务

对于我自己的 OpenGL 框架，当平台不支持它时，我正在尝试解压缩 PVRTC 纹理。为此，我下载了[PVRTC-SDK](http://www.imgtec.com/powervr/insider/sdkdownloads/index.asp)并将 C++ 代码 1:1 转换为带有非托管代码的 C# 代码。

## 问题

简而言之：它不起作用，我不知道它的原因。我已经检查了两次代码，它似乎没问题，应该可以工作。~~有时我得到一个`AccessViolationException`，有时一个`LoaderLock`。~~`AccessViolationException`不再发生，我的代码的另一部分出现错误。PVRTC 的颜色仍然是错误的。它看起来很奇怪，基本的笔画是可见的，但颜色是错误的。

## 代码

由于代码很大，我上传了它：

[C#] [http://codeviewer.org/view/code:2a65](http://codeviewer.org/view/code:2a65)

[C++] [http://codeviewer.org/view/code:2a66](http://codeviewer.org/view/code:2a66)

也是 C# 方法的调用代码，大小实际上与预期值匹配（所以源数组的图像值是完全正确`width * height * 4bit`的，输出大小是`width * height * 4byte`（所以压缩图像的 8 倍大小）。

```
private static unsafe Image ConvertPVRTC_RGBA8888(Image source)
{
    Int32 mipmapCount = source.HasMipmaps ? Image.GetMipmapCount(source.Width, source.Height) : 1;
    // Create a array with bytes for the target format
    Byte[] bytes = new Byte[RGBA8.GetMipMappedSize(0, mipmapCount, source.Width, source.Height)];

    fixed (Byte* pTarget = bytes)
    {
        fixed (Byte* pSource = source.GetData())
        {
            Int32 sourceOffset = 0;
            Int32 targetOffset = 0;

            for (Int32 i = 0; i < mipmapCount; i++)
            {
                // Calculate offsets
                Int32 sourceSize = source.Format.GetMipMappedSize(i, 1, source.Width, source.Height);
                Int32 targetSize = RGBA8.GetMipMappedSize(i, 1, source.Width, source.Height);

                // Decompress mipmapLevel
                PVRTC.DecompressPVRTC(pSource + sourceOffset, pTarget + targetOffset, GetMipmapSize(source.Width, i), GetMipmapSize(source.Height, i), source.Format.BitsPerPixel == 2);

                // Calculate pointer offset
                sourceOffset += sourceSize;
                targetOffset += targetSize;
            }
        }
    }
    return new Image(bytes, ImageFormat.RGBA8, source.Width, source.Height, source.HasMipmaps, source.IsCubemap);
} 
```

## 想法

原始源代码不正确，或者我在翻译代码时遗漏了一些东西。无论如何，我需要一个解决方案并检查了两次源代码。

（如果有任何 C# 的源代码，我会使用它，但我找不到任何源代码）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:37:33.430

**分而治之**

在翻译代码的情况下，我建议增量测试代码。如果您可以为相同的代码段提供相同的数据（从最简单的方法开始），您就可以确定问题出在哪里。

**类型尺寸**

请注意，C# 中的 long 可能与 C++ 中的 long 不同。请注意，我没有查看您的代码以查看这是否是您的问题（工作量太大）。

**调用约定**

在 .NET 中调用不安全代码时，您可能必须指定调用方法（如何将参数推入堆栈和从堆栈中删除）。这些是我们在纯 .NET 解决方案中不必担心的事情，因为它们都是一样的。

# iphone - 使用 CABasicAnimation 动画圆的 endAngle

> ID：12787582
> 
> 赞同：2
> 
> 时间：2012-10-08T18:42:59.187
> 
> 标签：iphone, ios, core-animation, cabasicanimation

我有一些带有 drawrect 代码的 UIView 用于绘制饼图：

```
 - (void)drawRect:(CGRect)rect
    {
        CGRect parentViewBounds = self.bounds;
        CGFloat x = CGRectGetWidth(parentViewBounds)/2;
        CGFloat y = CGRectGetHeight(parentViewBounds)/2;

        // Get the graphics context and clear it
        CGContextRef ctx = UIGraphicsGetCurrentContext();
        CGContextClearRect(ctx, rect);

        // define line width
        CGContextSetLineWidth(ctx, 4.0);

        CGContextSetFillColor(ctx, CGColorGetComponents( [someColor CGColor]));
        CGContextMoveToPoint(ctx, x, y);
        CGContextAddArc(ctx, x, y, 100,  radians(270), radians(270), 0); // 27
        CGContextClosePath(ctx);
        CGContextFillPath(ctx);
} 
```

但是当我尝试在绘制后为“endAngle”属性设置动画时，它不起作用：

```
CABasicAnimation *theAnimation;
theAnimation=[CABasicAnimation animationWithKeyPath:@"endAngle"];
theAnimation.duration=1;
theAnimation.repeatCount=1;
theAnimation.autoreverses=NO;
theAnimation.fromValue=[NSNumber numberWithFloat:270];
theAnimation.toValue=[NSNumber numberWithFloat:60];
[[self.layer presentationLayer] addAnimation:theAnimation forKey:@"animateLayer"]; 
```

我在哪里犯错？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:58:04.807

如果你想制作动画，那么你应该考虑使用 Core Animation 进行绘图。它使动画更简单。

看看[这个关于使用 Core Animation 制作自定义动画饼图的精彩教程](http://blog.pixelingene.com/2012/02/animating-pie-slices-using-a-custom-calayer/)。我相信你可以修改它以获得你想要的。

如果它对您来说似乎很复杂，那么您可以看看我对[“画圆的一部分”的](https://stackoverflow.com/q/3729690/608157)[回答](https://stackoverflow.com/a/10651797/608157)，它通过画一个非常宽的圆笔画来绘制饼图形状。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:36:26.493

几件事。您不能使用 CAAnimation 来为您在 drawRect 方法中执行的绘图设置动画。

其次，如果您确实使用了 CAShapeLayer，您可以对安装在层中的路径进行动画更改，但您需要确保该路径对于动画中的所有步骤具有相同数量和类型的控制点。

CGPath arc 命令使用不同数量的控制点来绘制不同的角度。因此，您无法更改圆弧的角度并为其设置动画。

您需要做的是安装一条全长弧的路径，然后对形状图层的 strokeStart 和/或 strokeEnd 属性进行动画更改。这些属性会导致路径从图形中省略路径的第一部分/最后一部分。我敢说大卫链接到动画饼图的教程使用了这种技术。

# webkit - 如何在 C/C++ 中扩展 webkit

> ID：12787601
> 
> 赞同：0
> 
> 时间：2012-10-08T18:44:22.320
> 
> 标签：webkit, webkit-transform

我想学习如何通过向基于 webkit 的浏览器添加一些插件来扩展 JavaScript 功能。

我可以从哪里开始的任何链接或教程。

我查看了 [http://rvr.typepad.com/wind/2011/10/webkit-extending-javascript-1.html](http://rvr.typepad.com/wind/2011/10/webkit-extending-javascript-1.html)

但它使用 GTK+，我正在寻找 C/C++ 中的 webkit 增强功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:59:12.463

看来你有一些困惑...

当 Firefox 不是基于 Webkit 的时候，你为什么要标记这个“firefox-addon”和“firefox-addon-sdk”？（它使用[壁虎](http://en.wikipedia.org/wiki/Gecko_%28layout_engine%29)）。

此外，GTK+[是 C 接口上的 C++ 包装器到 GUI 工具包](http://en.wikipedia.org/wiki/GTK%2B)。（？）

如果你想要一些很好的机会来弄乱 WebKit，你可以[安装 Qt Creator](http://qt.digia.com/product/developer-tools/)并尝试他们的 WebKit 示例，其中包括插件以及一些更基本的集成：

[http://qt-project.org/doc/qt-4.8/examples-webkit.html](http://qt-project.org/doc/qt-4.8/examples-webkit.html)

如果您的目标是为现有的 Web 浏览器编写插件，您应该阅读 NPAPI/PPAPI：

[http://en.wikipedia.org/wiki/NPAPI](http://en.wikipedia.org/wiki/NPAPI)

# c++ - 旋转图像不起作用

> ID：12787602
> 
> 赞同：1
> 
> 时间：2012-10-08T18:44:37.033
> 
> 标签：c++, image-processing, openframeworks

我正在尝试使用 openFrameworks 旋转图像，但我遇到了问题。我的旋转图像是红色而不是原来的颜色。

```
void testApp::setup(){
image.loadImage("abe2.jpg");
rotatedImage.allocate(image.width, image.height, OF_IMAGE_COLOR);

imageCenterX = image.getWidth() / 2;
imageCenterY = image.getHeight() / 2;
w = image.getWidth();
h = image.getHeight();
int degrees = 180;
float radians = (degrees*(PI / 180));

for (int y = 0; y < h; y++) {
    for (int x = 0; x < w; x++) {
        int index = image.getPixelsRef().getPixelIndex(x, y);

        int newX = (cos(radians) * (x - imageCenterX) - sin(radians) * (y - imageCenterY) + imageCenterX);
        int newY = (sin(radians) * (x - imageCenterX) + cos(radians) * (y - imageCenterY) + imageCenterY);

        int newIndex = rotatedImage.getPixelsRef().getPixelIndex(newX, newY);

        rotatedImage.getPixelsRef()[newIndex] = image.getPixelsRef()[index];
    }
}
rotatedImage.update();
}

 void testApp::update(){
 }

void testApp::draw(){
image.draw(0,0);
rotatedImage.draw(0,400);
} 
```

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:15:32.460

如果您的图像具有三个颜色分量（红、绿、蓝），则需要转换所有这三个分量。以下应该可以解决问题：

```
rotatedImage.getPixelsRef()[newIndex] = image.getPixelsRef()[index];
rotatedImage.getPixelsRef()[newIndex+1] = image.getPixelsRef()[index+1];
rotatedImage.getPixelsRef()[newIndex+2] = image.getPixelsRef()[index+2]; 
```

# java - 用Java画吃豆子

> ID：12787603
> 
> 赞同：0
> 
> 时间：2012-10-08T18:44:40.957
> 
> 标签：java, graphics

你好，学校练习我需要创建一个游戏，我决定创建 Pacman。一切都很顺利，但我无法完成的一件事是画一个吃豆人和他的鬼魂。我画了椭圆形，但现在呢？我希望吃豆人的嘴在移动时也能打开和关闭。有人可以帮忙画这个吗？

低于我现在所拥有的：

```
package h04PacMan;

import java.awt.*;

public class DrawPacMan {

public void drawPacMan(Graphics g, int x, int y, Color color) {

    g.setColor(color); // set color
    g.fillOval(x, y, 50, 50); // paint
    g.setColor(Color.black);
    g.drawOval(x, y, 50, 50); // outline
    // mouth?

}

public void drawGhost(Graphics g, int x, int y, Color color) {

    g.setColor(color); // color
    // here goes shape

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:53:51.907

而不是使用`drawOval`and `fillOval`，您应该看看`drawArc`and `fillArc`。

请参阅[java.awt.Graphics](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics.html#drawArc%28int,%20int,%20int,%20int,%20int,%20int%29)。

关于嘴部的动画：鉴于 pacman 一直在移动，您可以将 pacman 的位置与正弦函数结合起来，以获得流畅的嘴部运动，如下所示：

```
angle = 20 * (Math.sin((x + y)*2*Math.PI/50) + 1); # alt. betw. 0 and 40
g.fillArc(x, y, 50, 50, angle/2, 360-angle); 
```

这样，吃豆人的嘴会在迷宫中移动一段他自己大小的距离时，会自动进行一次开合循环。（您可能需要稍微调整数字以适应您的设置。）

当然，你仍然需要一个线程来运行整个游戏，但是吃豆人嘴的动画也可以这样完成，不需要额外的线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:10:27.323

因此，这里有几件事需要您解决。

**1\. 绘制人物**

我只会在这里解决绘制 Pacman 的问题。

想想吃豆人游戏，吃豆人的角色有两种状态——闭嘴和张嘴（在每个基本方向上！）。这对于我们稍后为吃豆人制作动画时很重要，所以首先，让我们使用[图形库](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics.html)`fillArc`中的方法来建立我们的吃豆人形状。

张嘴吃豆人的例子：

```
 g.setColor(Color.yellow);
  g.fillArc(0,0,150,150,30,300); 
```

这将在窗口的左上角创建 pacman，pacman 的嘴朝向屏幕的右侧。fillArc 方法的最后两个参数控制这个开口——第 5 个参数是起始角度，第 6 个参数是整个弧的角度。您可以由此推断，起始角 0 是从圆弧中心到屏幕右侧的水平线。还要记住数学上的一个完整的圆是 360 度。

使用这些信息，尝试向上、向下和向左画出张开嘴的吃豆人。完成此操作后，填充整个弧线以画出 Pacman 的嘴巴。还要考虑图形库中可用于绘制鬼魂的其他方法！

**2\. 动画吃豆人**

对于这个任务，您可能想要实现某种 Thread 结构来为 Pacman 设置动画，这比您在此处演示的要复杂得多。由于我们不知道您的程序规范，而且您还没有演示任何与动画相关的代码，所以我不愿进一步说明这一点。但是，我将引导您访问有关此问题的一些链接：

*   有关一般概述，请查看[Java 教程 - 并发](http://docs.oracle.com/javase/tutorial/essential/concurrency/)。
*   如果你在这个项目中使用 Swing，你可能想为你的线程使用[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T19:10:23.947

我建议利用`Area`/ `Path2D`API。

看看[图形 2D](http://docs.oracle.com/javase/tutorial/2d/index.html)

您可以查看此[答案](https://stackoverflow.com/questions/12756434/using-double-buffering-kinda-ruin-my-applet-and-it-has-java-uses-or-overrides-a/12756524#12756524)中的示例代码作为示例

# list - 常用 lisp 函数中的表达式和算术运算

> ID：12787609
> 
> 赞同：3
> 
> 时间：2012-10-08T18:45:36.130
> 
> 标签：list, functional-programming, lisp, common-lisp

我正在尝试编写一个函数，使得任何整数 x 的 P(x) 都有一个包含三个元素的列表，即 n 的平方、立方和四次方，但我不知道如何组合起来一个函数，例如我有正方形、立方体和幂 4 函数，下面是我的函数

```
(defun p(x) (* x x))

(defun p(x) (* x x x))

(defun p(x) (expt x x) //thought i am not sure about this one 
```

如果我有一个 执行程序后的列表，有没有办法让我的结果（即 `function p(x)`）列表看起来像 ？正在考虑，但我不确定我该如何去做。有什么建议么？`(4 27 256)``( 2 3 4)``mapcar function`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T19:58:57.437

是的，`mapcar`可能是一种方法。

```
;; a simple solution.
(defun expt-list (n powers)
  (mapcar #'(lambda (x) (expt n x)) powers))

;; a bit more complex, so you  don't compute powers of the same 
;; base multiple times.
(defun expt-list-memoize (n powers)
  (let ((hash (make-hash-table)))
    (mapcar #'(lambda (x)
                (let ((y (gethash x hash)))
                  (if y y (setf (gethash x hash) (expt n x)))))
            powers))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:07:44.107

Common Lisp 中有一个奇怪的地方，人们必须认识到：如果你想通过一个符号来引用一个函数，你必须用 (function p) 或缩写 #'p 来引用它

给定

`(defun p(x) (* x x))`

你可以计算一个正方形列表

`CL-USER> (mapcar #'p (list 1 2 3 4))`

`(1 4 9 16)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T12:31:27.400

这里的要求有点模糊，但如果意图是，给定一个调用，例如`(expt-list 2 3 4)`返回一个提升到它自己权力的每个数字的列表，例如：

```
(expt-list 2 3 4)
=> (4 27 256) 
```

会是这样的：

```
(defun expt-list (&rest list-of-n)
  "return a list of each 'n' in LIST-OF-N raised to its own power"
  (loop for n in list-of-n collect (expt n n))) 
```

做这个把戏？

# c# - System.Array 不包含“拆分”的定义

> ID：12787610
> 
> 赞同：0
> 
> 时间：2012-10-08T18:45:37.233
> 
> 标签：c#, system.array

我正在尝试获取一个字符串并将其拆分。但是，每当我使用`fullName.Split`Visual Studio 时，都会说 System.Array 不包含 Split 的定义。

到目前为止，这是我的主要方法。

```
 public static void Main(string[] args)
    {
        string inValue;
        int noNames;
        string[] names = new string[100];
       // find number of names
        Console.WriteLine("Enter the number of names: ");
        inValue = Console.ReadLine();
        int.TryParse(inValue, out noNames);
        string[] fullName = new string[noNames];
        for (int i = 0; i < fullName.Length; i++)
        {
            string[] name = fullName.Split(' '); //error appears here
        }
    } 
```

奇怪的是，在此之前不久，我能够编写另一个使用 Split 方法的程序。该程序没有问题。我不确定我的代码是否有问题，或者 Visual Studio 是否有错误。谁能帮我解决这个错误？该程序不完整，如果这很重要的话。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T18:47:22.710

你需要在数组的元素上调用它，而不是数组本身。所以它会是：

`string[] name = fullName[i].Split(' ');`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T18:47:32.580

您正在尝试拆分数组，而不是字符串。不能使用特定字符（如字符串）以这种方式拆分数组

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-08T18:47:32.720

试试这个

```
public static void Main(string[] args)
    {
        string inValue;
        int noNames;
        string[] names = new string[100];
       // find number of names
        Console.WriteLine("Enter the number of names: ");
        inValue = Console.ReadLine();
        int.TryParse(inValue, out noNames);
        string[] fullName = new string[noNames];
        for (int i = 0; i < fullName.Length; i++)
        {
            string[] name = fullName[i].Split(' '); //error appears here
        }
    } 
```

# image - 来自外部链接的特色图片

> ID：12787612
> 
> 赞同：0
> 
> 时间：2012-10-08T18:45:53.287
> 
> 标签：image, wordpress

有没有办法让我在外部来源的“未来图像”部分将外部图像插入 Wordoress？我喜欢图像在主页上可见，但在帖子中不可见。主页上的图片需要链接到帖子。

Wordpress 不允许从外部链接插入图像作为特征图像（仅用于发布）。直到现在在网上找不到任何合适的解决方案。

帮助？干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:20:50.983

您可以将外部图像添加到 wordpress 帖子。当您单击特色图像时，它会打开一个模式框，其中包含三个选项卡，第二个选项卡可让您插入外部图像，即您可以放置​​媒体的外部 URL，然后有 wordpress 功能来获取特色图像。

所以你可以使用它。

```
get_post_thumbnail($post_id, $size, $attr); 
```

post_id（整数）（可选）帖子 ID。

默认值：帖子 ID

大小（字符串/数组）（可选）字符串关键字（缩略图、中、大或完整）或以像素为单位表示宽度和高度的 2 项数组，例如 array(32,32)。

默认值：“缩略图后”

attr (string/array) (可选) 查询字符串或属性数组。请参阅 wp_get_attachment_image。默认值：无

[http://codex.wordpress.org/Function_Reference/get_the_post_thumbnail](http://codex.wordpress.org/Function_Reference/get_the_post_thumbnail)

对于永久链接，您可以使用

```
the_permalink(); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-16T19:32:45.617

我已经在其他地方发布了这个，但是这个插件怎么样？

[http://epicplugins.com/external-url-link-to-featured-images/](http://epicplugins.com/external-url-link-to-featured-images/)

它允许您从外部 URL 添加特色图像。

还有一个 Chrome 扩展程序：[https](https://chrome.google.com/webstore/detail/post-to-wordpress/hhmhfcfbheceghfbfjgkjnlhooadpnej) ://chrome.google.com/webstore/detail/post-to-wordpress/hhmhfcfbheceghfbfjgkjnlhooadpnej做得非常好。

# ruby-on-rails-3.1 - 如何使用 Devise Gem 在 Ruby On Rails 中创建管理员？

> ID：12787615
> 
> 赞同：2
> 
> 时间：2012-10-08T18:46:08.250
> 
> 标签：ruby-on-rails-3.1, devise, rubygems

我正在开发一个 Rails 应用程序，并且正在使用一个名为 devise 的 gem 来管理我的用户。我创建了一个名为“Admin”的新用户，但不确定如何将应用程序上的用户从“User”更改为“Admin”。

在文档上它说：“下面的代码可用于向当前用户授予管理员身份。”

```
current_user.update_attribute :admin, true 
```

但是这个片段会去哪里呢？这是文档，管理员角色创建信息位于页面底部附近。 [https://github.com/plataformatec/devise/wiki/How-To%3A-Add-an-Admin-Role](https://github.com/plataformatec/devise/wiki/How-To%3A-Add-an-Admin-Role)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:46:31.580

您非常接近解决方案！没有什么比阅读文档更有趣了:-)

通过使用 wikipage 上提到的选项 2，您的应用程序中的用户将根据 admin 属性被分类为“常规”或“管理员”。wikipage 为您提供了向当前用户授予管理员角色的代码，并让您决定在哪里调用此代码。

很公平，因为用户如何成为管理员是特定于每个应用程序的，这取决于用户希望如何完成。

一种方法是在 GUI 中执行“授予当前用户管理权限”操作，该操作将调用代码。在这种情况下，代码将位于“users_controller.rb”文件中的“grant_current_user_admin_rights”方法中。当然，视图和路由也应该相应地修改。

`after_create`您可以从用户模型的回调中调用该代码，**确保所有用户都成为管理员**:-)

另一种方法是在控制台或通过数据库种子为特定用户设置管理标志。

我的一个项目的种子文件示例：

```
admin_user = User.new( :email => USER_EMAIL, :password => PASSWORD_STRING, :name => USER_NAME )
admin_user.admin = true
admin_user.save! 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-07T17:47:51.577

晚了 4 年，但当他问到哪里放时，这是对 OPs 问题的真正答案：

> current_user.update_attribute ：管理员，真

可以通过转到终端/命令提示符来解决。

输入

> 导轨 c

访问铁路终端。

然后去找你的用户，因为你可能是第一个它会是：

> 用户 = User.find(1)
> 
> user.update_attribute(:admin, true)

假设您遵循了文档选项 2 中的所有先前步骤，这会将您的用户设置为具有真正的 Admin 属性。

您可以通过以下方式验证这一点

> User.find(1) 并且它应该在大文本块的末尾说“admin：true”。

# java - 如何在 Java 中解析时间？

> ID：12787618
> 
> 赞同：3
> 
> 时间：2012-10-08T18:46:21.323
> 
> 标签：java, parsing, date, datetime, time

我想知道java是否带有一种内置的方法来解析像这样的时间/日期：

```
5m1w5d3h10m15s 
```

这是 5 个月 1 周 5 天 3 小时 10 分钟 15 秒。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-08T18:52:23.237

是的，它叫做[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)，你只需要定义你的模式。

由于您没有（自愿？）精确的年份，我添加了一个：

```
DateFormat df = new SimpleDateFormat("M'm'W'w'F'd'H'h'm'm's's'yyyy");
System.out.println(df.parse("5m1w5d3h10m15s"+"2012")); 
```

当然有一些可用的库（很多人重定向到 Joda，这比标准的和令人困惑的 java 库更好）但是你的问题是关于“如果 java 带有内置的方法来解析时间/日期”，答案是一个明确的是的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T18:50:08.863

您可能希望将其解析为一个时间段。而不是日期，除非您的输入看起来像“2012y10m8d”等。如果您尝试将一段时间表示为 java.util.Date，预计会遇到很多问题。相信我，我以前也走这条路。

而是考虑将 Joda 时间用于时间段。有关详细信息，请参阅此问题：[How do I parse a string like "-8y5d" to a Period object in joda time](https://stackoverflow.com/questions/11669255/how-do-i-parse-a-string-like-8y5d-to-a-period-object-in-joda-time)

[HumanTime](http://johannburkard.de/blog/programming/java/date-formatting-parsing-humans-humantime.html)看起来也很有趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T19:02:42.903

I would first reverse the string. Then, I would tokenize the string into 6 numeric, separate parts -- months, weeks, days, hours, minutes, seconds. I'd store each token in an array and treat each element separately: a[0] = seconds, a[1] = minutes, ... a[5] = months. That's the most intuitive way I can think of offhand since I can't recall any library that does this for you. And of course, you didn't specify what you mean by "parse."

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T18:51:07.960

我不知道那种具体的格式......但我建议你看看[这个](https://stackoverflow.com/questions/1257542/how-do-i-parse-a-standard-date-into-gmt)

另外，构建自己的解析器也不会太难......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T18:54:29.537

您可以参考这篇文章获取想法： [Java 日期格式 - 包括附加字符](https://stackoverflow.com/questions/2138085/java-date-format-including-additional-characters)

当然还有 SimpleDateFormat 类供参考。 [http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T18:56:57.163

Using SimpleDateFormatter class will help you convert your string into a date. Using Joda time PeriodFormatter will allow you convert/express a period instead of a date. Eg. you will be able to express and parse something like: `15m1w5d3h10m15s` too.

# php - 如何判断某人是否离开

> ID：12787622
> 
> 赞同：3
> 
> 时间：2012-10-08T18:46:40.893
> 
> 标签：php, mysql, ajax

我想知道如何检查是否有人离开了站点/页面并在他们离开后执行操作。我在这里阅读，我发现了这个：

> 不，没有。您能做的最好的事情是每 X 秒发送一个 AJAX 请求（也许只有当用户移动鼠标时）。如果服务器在 2X 秒内没有收到任何请求，则假设用户离开了。

这就是我之前的计划，但是如果服务器停止发送请求，你怎么能让服务器做一些事情（在我的情况下是从数据库中删除它们）？我能想到的一个例子是，当您在 Facebook 上访问该网站时，您如何告诉他们您在这里并且在线，这在聊天中将您标记为在线，但当您离开时，它会将您标记为离线。这怎么可能？

编辑：在使用 cron 作业一段时间后，我发现网络托管网站不喜欢经常运行 cron 作业以在您的网站上产生“现场”感觉。所以相反，我找到了 node.js，它的工作效率提高了 1000 倍，而且更简单。我建议任何有同样问题的人使用它，购买托管非常便宜，而且学习简单，如果你知道 Javascript，你可以构建它没问题。一定要知道异步是如何工作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:54:58.823

一种不常见的方法是定期运行一个 cron 作业来检查用户列表，如果他们已经不活动 X 分钟，则执行 XYZ。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:53:27.850

Facebook 通过 Jabber 服务使用 XMPP 协议与用户建立*持续*或*实时的*连接。然而，实施一个根本不是一件容易的事。正如评论中提到的，最简单的解决方案是让客户端每隔几秒钟向服务器发出一次 AJAX 请求，以便服务器可以检查用户是否仍在查看该站点。

您可能想查看[我的问题](https://stackoverflow.com/questions/8251150/expiring-custom-php-session-when-browser-closes)，这可能与您的问题有关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T18:55:03.810

我在开发过程中唯一记得的方法不是 100% 可靠的，因为许多因素实际上并且很可能导致它失败，甚至不能完全运行。直到并包括禁用 JavaScript 的人。这与今天的网站组合方式不太可能。但是人们可以选择将其关闭，然后恶意行为的人也倾向于将其关闭。

无论如何，我读过但从未投入太多股票的方法是`onunload()`事件。你绑在`<body>`标签之类的东西上。

例子：

```
<body onunload="myFunction()"> 
```

哪里`myFunction()`有一点 JavaScript 来做你想做的任何事情。

由于许多原因再次不是非常可靠，但我认为它是几乎所有客户端语言中最好的。

# view - Drag in View Controller Like Notification Center

> ID：12787624
> 
> 赞同：0
> 
> 时间：2012-10-08T18:46:50.077
> 
> 标签：view, controller, notifications, center, drag

I would like to be able to drag in a view controller that contains a webview just like the apple notification center does. If it is possible i would like to be able to drag in 4 view controllers from all four sides of the iPad screen, any help will be appreciated

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T20:03:42.583

你需要使用[Jquery](http://jquery.com/) + [Jquery UI Effects](http://jqueryui.com/) + [jquerymobile](http://jquerymobile.com/)

# wcf - WCF 4 RESTful with HTTPS GET, POST or PUT

> ID：12787628
> 
> 赞同：1
> 
> 时间：2012-10-08T18:47:08.703
> 
> 标签：wcf, rest, https

I'm desperately in need of a working example of a WCF 4 RESTful web service. Our SaaS ticketing system (zendesk.com) can communicate with an URL target using HTTP GET, POST or PUT. I have not done any web related work (only c# console apps) but have now been tasked to create a WCF 4 web service with the following requirements:

1.  Secured via HTTPS
2.  Secured via username / password
3.  Read and process the data from the SaaS system that is transmitted as application/x-www-form-urlencoded information, for example:

    ```
    http://somedomain/a/path?value=message+with+placeholders+evaluated 
    ```

My current code is as follows:

```
namespace WcfService2
{
    [ServiceContract]
    public interface IService1
    {
        [OperationContract]
        [WebInvoke]
        void ClearAlert(Stream input);
    }
}

namespace WcfService2
{
    public class Service1 : IService1
    {
        public void ClearAlert(Stream input)
        {
            StreamReader rawTicketData = new StreamReader(input);
            string ticketData = rawTicketData.ReadToEnd();
            rawTicketData.Dispose();
            //Do some work with ticketData
        }
    }
} 
```

The web.config file:

```
<services>
  <service behaviorConfiguration="MetaDataBehavior" name="WcfService2.Service1">
    <endpoint behaviorConfiguration="RestBehavior" binding="webHttpBinding" bindingConfiguration="" name="REST" contract="WcfService2.IService1" />
  </service>
</services>
<behaviors>
  <endpointBehaviors>
    <behavior name="RestBehavior">
      <webHttp />
    </behavior>
  </endpointBehaviors>
<behaviors> 
```

I am currently using only HTTP (not HTTPS) for development and testing hence the missing binding entry / entries for HTTPS as well as any entries for login purposes in the web.config, at least I assume that is what / where I need to add the needed configuration but again, I have no knowledge.

I would more than appreciate any help / assistance I can get in creating a web service with the three above described requirements.

Thanks to all!

William

# iphone - ios tableview crash as soon as search start

> ID：12787630
> 
> 赞同：0
> 
> 时间：2012-10-08T18:47:16.080
> 
> 标签：iphone, ios, uisearchdisplaycontroller

I want to use tableview + searchDisplay with two different source, that is, when user attempts to search on searchbar, it should searches from different an array, and display it.

The way I can do this is, distinguish source in table view delegate and treat different source when searchdisplay call table view delegate methods. So I did something like:

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
 {
   if(self.tableView == tableView){
     return [self.sourceArray objectAtIndex:section] count];
   }
   //search display
   return 5;

 }

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return self.tableView == tableView ? 3 : 1; 
} 
```

but once I attempted to search on search bar ( as soon as text changed ), it just crashed with index out of bounds. I tried to debug it but couldn't find what is really wrong.

```
2012-10-08 14:36:27.075 Apps[14496:907] *** Terminating app due to uncaught   exception 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 2 beyond bounds   [0 .. 1]'
*** First throw call stack:
(0x37b9b2a3 0x35eab97f 0x37ae5e8d 0x391f6221 0x38ea1fef 0x38e9cd09 0x38eb58f9 0x38eb54f9 0x2934773 0x38fd2ac5 0x38fca943 0x38fca8ff 0x38f5c48f 0x38f94235 0x38f93ac5 0x37aec037 0x355aed91 0x3710c1e5 0x372ded6b 0x372e0f03 0x372e0e1d 0x372e0cff 0x372d64dd 0x372e0c3d 0x372e094f 0x372e03df 0x372e0237 0x372e0115 0x370a97bd 0x370a9135 0x370a8d8f 0x370a8d51 0x370a8c83 0x37260d17 0x372dff2b 0x372dfe5d 0x3449d689 0x372d520b 0x344c35ef 0x38fcf041 0x38fceff9 0x2950f0d 0x38f9c151 0x38f9a049 0x292f711 0x38f998b7 0x38f983ad 0x294dc4f 0x38f97737 0x38e7f5f9 0x38e6c809 0x38e6c123 0x3801f5a3 0x3801f1d3 0x37b70173 0x37b70117 0x37b6ef99 0x37ae1ebd 0x37ae1d49 0x3801e2eb 0x38ec0301 0x6190d 0x593e8)
libc++abi.dylib: terminate called throwing an exception 
```

I'm not sure where this out of bound exception occur at, I'd appreciate any comment.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:48:22.647

你用过委托方法吗

*   (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar;
*   (void)searchBarTextDidEndEditing:(UISearchBar *)searchBar;
*   (void)searchBar:(UISearchBar *)searchBar1 textDidChange:(NSString *)searchText fbFriendList_table;
*   (void)searchBarCancelButtonClicked:(UISearchBar *)searchBar;
*   (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar;

# ruby - 如果数组仅包含空字符串，则它是一种更优雅的拒绝数组的方法

> ID：12787638
> 
> 赞同：4
> 
> 时间：2012-10-08T18:47:36.753
> 
> 标签：ruby, arrays, ruby-on-rails-3

我必须对（行）数组的（行）数组进行排序。（行）数组包含任意数量的字符串。如果（行）数组仅包含空字符串，我想将其从（行）数组中删除。

我目前正在这样做：

```
rows.each do |row|

  row.each_index do |i|

   if row[i].length > 0
    break 
   elsif i == row.count-1
    rows.delete(row)
   end

  end

end 
```

但是有没有更优雅的方法呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T20:22:38.470

稍微简洁一点：

```
rows.reject! { |row| row.all?(&:empty?) } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T18:56:46.700

在迭代时修改数组虽然不是一个好主意 - 您可能会发现您的代码会跳过某些元素或做一些奇怪的事情。我会做

```
rows.reject! {|row| row.all? {|row_element| row_element.empty?}} 
```

如果该块`row_element.empty?`对行中的所有元素评估为真，我们将拒绝该行。熟悉 Enumerable 中的所有方法非常值得，它们对于此类任务非常方便。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-30T07:34:30.623

使用导轨时：

```
! rows.any?(&:present?) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-08T19:09:08.397

您可以使用`compact.uniq`或`compact`。如果你的数组有`nil`值，compact 会产生一个空数组，所以你可以像这样检查：

```
row.compact.size == 0 
```

如果行包含空字符串“”，您可以像这样检查它：

```
row.compact.uniq.first.blank? and row.size == 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T20:03:09.073

```
 rows.select{|row| row.compact.count >0} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-07-05T00:49:12.123

这里：`rows.all?(&:blank?)`。

# c# - Excel 2003 bug at the 1st launch after creating file from c#

> ID：12787640
> 
> 赞同：0
> 
> 时间：2012-10-08T18:47:45.880
> 
> 标签：c#, office-interop, excel-2003

I am creating a new .xls file for the Microsoft Office 2003 from existing template in C# using .NET 4.0 and Excel Interop Object Library. My template already contains all needed data and various formulas so my task is just to change some cells which are used in formulas as parameters. I do this without any problem...

The problem appears when i try to open my new file: when the file is opened at 1st time addins of excel doesnt work and as the result all the formulas show me error messages like "#NAME". When i launch the file again - everything is ok...

This makes me angry....

Does anybody know where the problem could be? And what is the solution??

Thank you in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:01:35.820

你用Excel 2010打开吗？如果是这样，则 Excel 认为它带有宏并错误地显示它。

基本上，当单元格内的公式无法解释或未知时，会出现#Name 错误。

问题与公式的路径有关，我猜在第一次启动时它无法正确找到公式路径，因此在下一次启动时它会正确显示它们。

# javascript - 如何将一个大十进制数解析为只有 2 个小数位？

> ID：12787648
> 
> 赞同：-4
> 
> 时间：2012-10-08T18:48:26.587
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [浮点数是如何存储的？什么时候重要？](https://stackoverflow.com/questions/56947/how-is-floating-point-stored-when-does-it-matter)

这是一个包含 3 个选项和 2 个不同问题的示例。[http://jsfiddle.net/pEpFA/7/](http://jsfiddle.net/pEpFA/7/)

1.  选项 1 - 接地 / 正确显示。
2.  选项 2 - 表示/省略值中的“0”
3.  选项 3 - 过夜/`000000000000000`加到总数中。

我怎样才能让它正常工作？我希望结果像选项 1 一样显示。这是一个 JavaScript 错误吗？

# HTML

```
<label><input type="radio" name="print" class="option" data-number="25.72" /> UPS Ground </label>
<br>
<label><input type="radio" name="print" class="option" data-number="80.90" /> UPS Express </label>
<br>
<label><input type="radio" name="print" class="option" data-number="112.93" /> UPS Overnight </label>

<br><br>
Shipping
$<span id="ship_total"></span>

<br>
Final Total
$<span id="new_total"></span> 
```

# jQuery

```
$(document).ready(function() {
      $('label').click(function() {
         var total = 0;

          $('.option:checked').each(function() {
              total += Number($(this).data('number'));   
          });
              $('#ship_total').text(total);

                  //php echos the subtotal
                 var sub_total = 550.25;

                 var ship_total = ($("#ship_total").text());

                var final_total = parseFloat(sub_total) + parseFloat(ship_total);

        $('#new_total').text(final_total);
    });

    }); 
```

参见 jsfiddle 演示：http: [//jsfiddle.net/pEpFA/7/](http://jsfiddle.net/pEpFA/7/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:51:07.150

您是否尝试过以下方法

```
final_total.toFixed(Number); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T18:52:24.997

[http://jsfiddle.net/pEpFA/9/](http://jsfiddle.net/pEpFA/9/) （更新了所有值）

请注意上面小提琴中的以下几行：

```
 total = total.toFixed(2);
 ...
 final_total = final_total.toFixed(2); 
```

# python - 有效地查找 Python Array / List 中 N 个最大元素的索引

> ID：12787650
> 
> 赞同：22
> 
> 时间：2012-10-08T18:48:33.770
> 
> 标签：python, performance, numpy

如果这是一个重复的问题，我很抱歉，我查找了此信息但仍然找不到。

是否可以通过使用 N 个最大元素的索引以降序非常有效地排列一个 numpy 数组（或 python 列表）？

例如，数组：

```
a = array([4, 1, 0, 8, 5, 2]) 
```

按降序排列的最大元素的索引将给出（考虑到 N = 6，包括所有元素）：

8 --> 3

5 --> 4

4 --> 0

2 --> 5

1 --> 1

0 --> 2

```
result = [3, 4, 0, 5, 1, 2] 
```

我知道如何使用一种有点愚蠢的方法来实现它（比如对数组进行排序并搜索 N 个数字中的每一个作为它们的索引），但我想知道是否有任何有效的库，如瓶颈或 heapq，或者可能是一种 pythonic 方法来制作这非常快。我必须将它应用到几个数组中，每个数组有 300k 个元素，这就是性能成为问题的原因。

提前致谢！

**更新**

我阅读了答案并决定使用 300k 的随机整数对它们进行计时，结果如下：

**解决方案1：** `sorted(range(len(a)), key=lambda i:a[i])` **时间：** 230 ms

**解决方案2：** `heapq.nlargest(len(a), zip(a, itertools.count()))` **时间：** 396 ms

**解决方案3：** `heapq.nlargest(len(a), enumerate(a), key=operator.itemgetter(1))` **时间：** 864 ms

**解决方案4：** `def f(a,N): return np.argsort(a)[::-1][:N] (N = len(a))` **时间：104 ms**

非常感谢您提供快速且非常好的答案！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-08T18:58:31.097

你看过内置的 numpy`argsort`方法吗？：

[http://docs.scipy.org/doc/numpy/reference/generated/numpy.argsort.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.argsort.html)

我可以在我的机器上使用该方法在大约 29 毫秒内对具有 300,000 个随机浮点数的数组进行排序。

```
def f(a,N):
    return np.argsort(a)[::-1][:N] 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-08T18:52:38.200

```
L = [4, 1, 0, 8, 5, 2]
sorted(range(len(L)), key=lambda i:L[i]) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-08T18:52:58.320

你可以`heapq`很容易地做到这一点：

```
>>> heapq.nlargest(3, zip(a, itertools.count()))
[(8, 3), (5, 4), (4, 5)] 
```

元组是通过对第一个值排序，然后是第二个，等等`(value, index)`...这些离开）。

我正在使用`zip()`and `itertools.count()`as enumerate 给了我们错误的顺序，所以它们将按索引排序，而不是按值排序。或者，您也可以这样做`((value, index) for index, value in enumerate(a))`，但我觉得不太清楚。

另一种选择是给出一个键，做`heapq.nlargest(3, enumerate(a), key=operator.itemgetter(1))`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T05:36:35.273

使用 heapq 的另一种方法

```
heapq.nlargest(n, range(len(a)), key=a.__getitem__) 
```

`n<<len(a)`正如其他地方所评论的那样，除非 a 非常大并且因为排序是 Python 中相对较快的操作，否则它不会胜过排序。然而最终缓慢的 O(n) 总是会击败 O(n*log(n))

# jquery - jQuery下拉菜单实现

> ID：12787651
> 
> 赞同：0
> 
> 时间：2012-10-08T18:48:36.687
> 
> 标签：jquery, drop-down-menu

我试过实现： [http ://aext.net/2009/08/perfect-sign-in-dropdown-box-likes-twitter-with-jquery/](http://aext.net/2009/08/perfect-sign-in-dropdown-box-likes-twitter-with-jquery/)

效果很好，当您单击链接时它会显示，然后如果您再次单击它会隐藏它。如果您在文档打开时单击文档上的任何其他位置，它也会隐藏。

我试过在这个页面中实现：http: [//hevvo.eu/~dev/backtrack/index.php](http://hevvo.eu/~dev/backtrack/index.php)

但是，它仅在您单击它，然后单击该文档时才有效，如果您再次单击该链接则无效。我只是无法弄清楚我的代码有什么不同..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:57:36.803

一个区别是您没有`preventDefault()`在点击处理程序中调用事件对象。此外，您的触发链接具有类 menu-open 硬编码。

## 编辑

在 jQuery 中绑定事件处理程序时，该函数会自动传递一个事件对象，该对象具有您可以使用的各种属性和方法。调用其中一种方法`preventDefault()`并在触发该事件时停止浏览器执行其默认操作。你可以像这样调用这个方法：

```
$("a_selector").click(function(event) {

    //stop browser performing default action, e.g following a link
    event.preventDefault();

    //do your other stuff here
}); 
```

事件对象以任何 jQuery 事件处理方法传递给处理程序，例如`bind()`, `live()`,`delegate()`或`on()`（`on()`当然是首选方法，因为`live()`和`delegate()`现在已弃用）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T17:37:58.080

添加了这个修复它。

```
 $(".sign-in").mouseup(function() {
            return false
        }); 
```

感谢所有帮助过的人。

# ruby-on-rails - what will be output of given code

> ID：12787654
> 
> 赞同：2
> 
> 时间：2012-10-08T18:48:45.777
> 
> 标签：ruby-on-rails, ruby-on-rails-3

Given the following code:

```
 class Book
    attr_accessor :author
    attr_reader :title
    attr_writer :comments
    def initialize(author, title)
      @author = author
      @title = title
      @comments = []
    end
  end

  book = Book.new("Chuck Palahniuk", "Fight Club") 
```

Which of the following snippets of code are valid?

1."#{book.title} was written by #{book.author}."

2.book.comments << "#{book.title} was a good book"

book.comments.each { |comment| puts comment }

book.title = "Cooking Club"

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T19:19:19.517

答案是＃1 ...我如何获得我的巧克力？

```
#2 - There is no attr_accessor or attr_writer for comments
#3 - There is no attr_accessor or attr_reader for comments
#4 - There is no attr_accessor or attr_writer for title 
```

# ruby-on-rails-3 - 在 Rails 3 中使用 Audit 时，我得到“未初始化的常量 User::Audit”

> ID：12787656
> 
> 赞同：0
> 
> 时间：2012-10-08T18:48:49.277
> 
> 标签：ruby-on-rails-3, rails-3-upgrade, acts-as-audited

我在我的 Rails 2 应用程序中使用acts_as_audited 并且正在将其更新到 Rails 3。我已经更新了几个模型来调用`audited`而不是`acts_as_audited`并且这些模型似乎工作成功。但是，我现在正在更新我的应用程序的用户模型，当我尝试创建用户（从控制台或应用程序）时，我收到以下错误：

```
uninitialized constant User::Audit 
```

看起来相关的地方的追踪是：

```
activerecord (3.2.8) lib/active_record/inheritance.rb:111:in `compute_type'
activerecord (3.2.8) lib/active_record/reflection.rb:172:in `klass'
activerecord (3.2.8) lib/active_record/associations/collection_association.rb:148:in `transaction'
activerecord (3.2.8) lib/active_record/associations/collection_association.rb:431:in `create_record'
activerecord (3.2.8) lib/active_record/associations/collection_association.rb:119:in `create'
activerecord (3.2.8) lib/active_record/associations/collection_proxy.rb:46:in `create'
audited (3.0.0) lib/audited/auditor.rb:216:in `block in write_audit'
activesupport (3.2.8) lib/active_support/callbacks.rb:403:in `_run__3460157709255055264__audit__3867610640799995319__callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_audit_callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
audited (3.0.0) lib/audited/auditor.rb:216:in `write_audit'
audited (3.0.0) lib/audited/auditor.rb:198:in `audit_create' 
```

在我的控制器中创建问题的行只是说明：

```
if @editing_user.save 
```

我查看了已审核的 github 帐户的支持列表，但找不到任何适合我的问题的内容。我想我会在这里问一下是否有人遇到过类似的问题。我也在这里和谷歌搜索过这个特定问题的答案，但找不到任何相关的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:48:24.560

事实证明，我`has_many :audits`在 User 模型中，但没有任何其他模型。在我删除那个`has_many`电话后，一切正常。

# java - "Received fatal alert: bad_record_mac" when deploying to sonatype

> ID：12787657
> 
> 赞同：10
> 
> 时间：2012-10-08T18:48:50.713
> 
> 标签：java, maven, ssl, sonatype

I'm getting this stacktrace when trying to deploy to sonatype repository (*sometimes!*):

```
javax.net.ssl.SSLException: Received fatal alert: bad_record_mac
at sun.security.ssl.Alerts.getSSLException(Alerts.java:208)
at sun.security.ssl.Alerts.getSSLException(Alerts.java:154)
at sun.security.ssl.SSLSocketImpl.recvAlert(SSLSocketImpl.java:1977)
at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1093)
at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1328)
at sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:702)
at sun.security.ssl.AppOutputStream.write(AppOutputStream.java:122)
at org.apache.maven.wagon.providers.http.httpclient.impl.io.AbstractSessionOutputBuffer.flushBuffer(AbstractSessionOutputBuffer.java:131)
at org.apache.maven.wagon.providers.http.httpclient.impl.io.AbstractSessionOutputBuffer.write(AbstractSessionOutputBuffer.java:151)
at org.apache.maven.wagon.providers.http.httpclient.impl.io.ContentLengthOutputStream.write(ContentLengthOutputStream.java:114)
at org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon$RequestEntityImplementation.writeTo(AbstractHttpClientWagon.java:188)
at org.apache.maven.wagon.providers.http.httpclient.entity.HttpEntityWrapper.writeTo(HttpEntityWrapper.java:96)
at org.apache.maven.wagon.providers.http.httpclient.impl.client.EntityEnclosingRequestWrapper$EntityWrapper.writeTo(EntityEnclosingRequestWrapper.java:108)
at org.apache.maven.wagon.providers.http.httpclient.impl.entity.EntitySerializer.serialize(EntitySerializer.java:120)
at org.apache.maven.wagon.providers.http.httpclient.impl.AbstractHttpClientConnection.sendRequestEntity(AbstractHttpClientConnection.java:263)
at org.apache.maven.wagon.providers.http.httpclient.impl.conn.AbstractClientConnAdapter.sendRequestEntity(AbstractClientConnAdapter.java:227)
at org.apache.maven.wagon.providers.http.httpclient.protocol.HttpRequestExecutor.doSendRequest(HttpRequestExecutor.java:255)
at org.apache.maven.wagon.providers.http.httpclient.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:123)
at org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:645)
at org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:464)
at org.apache.maven.wagon.providers.http.httpclient.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
at org.apache.maven.wagon.providers.http.httpclient.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)
at org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.execute(AbstractHttpClientWagon.java:674)
at org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.put(AbstractHttpClientWagon.java:515) 
```

As suggested [here](https://support.sonatype.com/entries/22070546-deploy-fails-with-received-fatal-alert-bad-record-mac), I set this:

```
MAVEN_OPTS="-Dhttps.protocols=SSLv3 -Dforce.http.jre.executor=true" 
```

And it still doesn't help. I'm using:

```
$ java -version
java version "1.7.0_07"
OpenJDK Runtime Environment (IcedTea7 2.3.2) (7u7-2.3.2a-0ubuntu0.12.04.1)
OpenJDK 64-Bit Server VM (build 23.2-b09, mixed mode) 
```

Any ideas?

ps. I asked the same question at [jdk7-dev mailing list](http://mail.openjdk.java.net/pipermail/jdk7-dev/2012-October/002307.html), but didn't get any useful answer yet.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T23:08:03.607

如果 SSLv3 是问题，解决方案是降级到 Maven 3.0.3 并使用建议的 Maven 选项。

```
MAVEN_OPTS="-Dhttps.protocols=SSLv3 -Dforce.http.jre.executor=true" 
```

您尝试的 SSLv3 修复在 Maven 3.0.4 中不起作用。我已经提交了一个错误报告，描述了这里的原因：[Maven JIRA ticket MNG-5363](http://jira.codehaus.org/browse/MNG-5363)

经过一番搜索，我无法弄清楚 -Dforce.http.jre.executor=true 试图修复什么，所以我认为你不需要它，但建议它的人可能是有充分理由的。

我们部门几周前刚刚诊断出这些问题。如果您因为 SSLv3 而遇到错误，我希望它会更加一致，因为我已经注意到我们的服务器。也许有时在您的情况下会做出不同的 SSL 选择，但这似乎也很奇怪。

最后，在 3.0.3 中还有更多的 bug，我只是碰到了一个在 3.0.4 中修复的，所以要小心。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T13:00:51.563

我有 maven 多模块项目（jodd.org），由于这个错误，我无法在过去 5 小时内将所有工件上传到 Sonatype。我在 Windows 7 上使用 JDK-64b 7u7 和 7u9。

[这里](https://issues.sonatype.org/browse/NEXUS-5240)有人说这是JDK 7u7中的一个问题；但是，升级到 7u9 对我没有帮助。

最后，我能够使用 JDK 6 成功上传所有工件。

然而，由于这个错误是随机出现的，我不能 100% 确定这只是一个巧合，或者它在 JDK6 上确实工作得更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T08:49:35.653

此处记录了一种可能的解决方法：[https ://jira.codehaus.org/browse/MNG-5237](https://jira.codehaus.org/browse/MNG-5237)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T13:56:34.303

如果你可以测试一个可以帮助的修复:-)

见[https://jira.codehaus.org/browse/WAGON-383?focusedCommentId=317770&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-317770](https://jira.codehaus.org/browse/WAGON-383?focusedCommentId=317770&page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel#comment-317770)

谢谢 ！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T03:56:55.847

再试一次，自 2013 年 1 月 19 日起，Sonatype OSS 配置已经调整，这可能解决了这个问题。

参考：[https ://issues.sonatype.org/browse/OSSRH-5165](https://issues.sonatype.org/browse/OSSRH-5165)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-18T15:44:35.520

我在 Maven 3.0.5 中遇到了这个 SSL 错误，但是当我升级到 3.1.0 时，它似乎已修复。

# scala - 为什么在 Scala 中使用 def 和 val，反之亦然

> ID：12787670
> 
> 赞同：13
> 
> 时间：2012-10-08T18:50:02.210
> 
> 标签：scala

我知道这已经在其他帖子中讨论过，并且我了解使用`def`和之间的基本区别`val`。`def`用于定义方法和`val`不可变引用。通过提出这个问题，我试图完成的是了解是否还有更多内容`def`。可以和a互换使用`val`吗？

`def`最近我尝试了以下代码，如果我目前的理解足够，我无法说服自己：

```
scala> def i: Int = 3
i: Int

scala> i
res2: Int = 3 
```

所以我很好奇，这是否等同于`val i = 3`？

然后我尝试了这个：

```
scala> i()
<console>:9: error: Int does not take parameters
i() 
```

我这样做只是为了测试我对`def`. 现在我想知道，什么时候`i`是一个方法，为什么 Scala 抱怨“......不带参数”？

接下来我尝试了以下方法：

```
scala> def i(): Int = 3
i: ()Int

scala> i()
res4: Int = 3 
```

这次 Scala 似乎同意这`i`是一种方法。那么我可以使用`def`互换`val`来声明和初始化变量吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T18:55:11.703

两个都

```
def i = 3 
```

和

```
def i() = 3 
```

声明方法。唯一的区别是，第一个是没有参数列表的方法，第二个是一个空参数列表的方法。前者通常用于没有副作用的方法，后者用于有副作用的方法。如果值从不改变并且您想避免重新计算它，您应该使用 val 而不是 def。每次调用 def 时都会重新计算，而 val 只分配一次值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-09T07:39:34.313

`def``val`如您所知，定义一个方法，定义一个不可变值。

一个主要区别在于计算右侧的表达式的时间`=`。对于方法，每次调用该方法时都会对其进行评估。对于一个值，它会在您初始化该值时进行评估。看到不同：

```
scala> def i: Int = { println("Hello"); 3 }
i: Int

scala> i
Hello
res0: Int = 3

scala> i
Hello
res1: Int = 3

scala> val i: Int = { println("Hello"); 3 }
Hello
i: Int = 3

scala> i
res2: Int = 3 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-08T21:45:23.423

只是为了添加金的答案，您可以通过 val 覆盖 def。

```
// Entering paste mode (Ctrl+D to finish)

trait A {
  def i: Int
  def num: Long
}

class B extends A {
  val i = 7
  val num = 20L
}

// Exiting paste mode, now interpreting.

defined trait A
defined class B

scala> val b = new B
b: B = B@2d62bdd8

scala> b.i
res1: Int = 7

scala> b.num
res2: Long = 20 
```

# java - Java中类的动态创建

> ID：12787672
> 
> 赞同：4
> 
> 时间：2012-10-08T18:50:15.730
> 
> 标签：java, dynamic, reflection, xml-parsing

> **可能重复：**
> [在 Java 中动态创建类](https://stackoverflow.com/questions/3780963/dynamically-create-classes-in-java)

我对 Java 中的反射概念有疑问。

我正在尝试用 Java 创建一个 SAX XML 解析器。需要做的是我需要根据 XML 创建一个包含字段的新类，并在解析时使用该类。但是这种方法将非常特定于所选的 XML。

我正在思考的是，是否有任何方法可以编写适用于所有可能 XML 的 XML (SAX) 解析器？即，我需要动态创建一个包含在 XML 中的字段的类，并使用同一个类来解析 XML 文件。

我希望我能清楚地提出我的问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:06:27.430

我之前也遇到过类似的情况，但是我的 xml 解析器需要一些配置。我的方法是：a）解析引擎，b）配置。

配置部分围绕要通过属性传递的 XPath 表达式构建。这些是静态 XPath 表达式，如果输入 xml 消息发生更改，则需要更新。

解析引擎部分执行这些表达式来查询 xml 元素、属性等以填充 java 对象。

**编辑：**

例如，给定的 xml（简化，无命名空间）：

```
<msg>
    <something>
        <somenode>
            <version>1.0.0</version>
        </somenode>
    </something>
</msg> 
```

代码示例：（简化）

```
String myXpExpr = "//version/text()";  // make it .properties
Document xmlDocument = DocumentBulderFactory.newInstance().newDocumentBuilder().parse(xmlInputStream);
XPath xpXPath = XPathFactory.newInstance().newXPath();
XPathExpression expr = xpXPath.compile(myXpExpr);
resultObject = expr.evaluate(xmlDocument, returnTypeQName); 
```

这会给你“1.0.0”作为结果对象。

# javascript - 动态插入脚本标签而不调用函数

> ID：12787675
> 
> 赞同：0
> 
> 时间：2012-10-08T18:50:35.167
> 
> 标签：javascript, parsing, dynamic

我正在尝试动态插入以下内容：

```
var downloadJsOnLoad = function () {

    var shareThisOne = document.createElement('script');
    shareThisOne.text = 'var switchTo5x=true;';
    document.body.appendChild(shareThisOne);

    var shareThisTwo = document.createElement('script');
    shareThisTwo.src = 'http://w.sharethis.com/button/buttons.js';
    document.body.appendChild(shareThisTwo);

    var text = 'stLight.options({publisher: "a8cae9ce-ebee-4346-9891-a1bfb0aa7005"});';

    var shareThisThree = document.createElement('script');
    shareThisThree.innerHTML = text;
    document.body.appendChild(shareThisThree);

}

jQuery(window).load(function () {
    downloadJsOnLoad();
}); 
```

一切正常，但是当解析此 javascript 时出现错误，提示 stLight 未定义。我假设它将 stLight.options 方法视为可执行文件而不是纯字符串。我怎样才能解决这个问题以避免错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:25:03.053

用于`onload`确保 ShareThis 代码（即`stLight`变量）在使用时存在：

```
shareThisTwo.onload = function() {
    var text = 'stLight.options({publisher: "a8cae9ce-ebee-4346-9891-a1bfb0aa7005"});';

    var shareThisThree = document.createElement('script');
    shareThisThree.innerHTML = text;
    document.body.appendChild(shareThisThree);
}; 
```

也就是说，为什么不直接丢弃最后的元素创建呢？你只想执行代码。

```
shareThisTwo.onload = function() {
    stLight.options({publisher: "a8cae9ce-ebee-4346-9891-a1bfb0aa7005"});
}; 
```

# iphone - 通过 NSURLConnection 异步加载 TableView 图像

> ID：12787681
> 
> 赞同：0
> 
> 时间：2012-10-08T18:51:00.457
> 
> 标签：iphone, objective-c, ios

正如标题所暗示的，我正在尝试通过 NSURLConnection 异步加载 tableview 图像。这里的问题是，当我向下滚动时，我的 tableview 倾向于在 tableview 中为多个国家/地区加载相同的标志图像，然后在滚动时为多个国家/地区加载不同的标志图像（因为在多个国家/地区具有相同的标志图像）备份。我注意到，只有当我滚动得很慢时，我才能获得不同国家/地区的不同旗帜图像，但图像不正确。我不太确定目前的问题是什么。这是我的代码：

```
#import "ViewController.h"

@implementation ViewController
@synthesize tableView;
@synthesize countryNamesArray;
@synthesize receivedData; 
@synthesize flagImage;
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{   
    countryNamesArray=[[NSArray alloc] initWithObjects:@"India",@"USA",@"Antarctica",@"Brazil",@"Canada",@"China",@"France",@"Germany",@"Italy",@"Japan",@"Kenya",@"Malaysia",@"Mexico",@"South Africa",@"United Kingdom",@"Vietnam",nil];
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
}

-(NSInteger)tableView:(UITableView *)tableview numberOfRowsInSection:(NSInteger)section{
    return 16;
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    // This method is called when the server has determined that it
    // has enough information to create the NSURLResponse.

    // It can be called multiple times, for example in the case of a
    // redirect, so each time we reset the data.

    // receivedData is an instance variable declared elsewhere.
    [receivedData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    // Append the new data to receivedData.
    // receivedData is an instance variable declared elsewhere.
    [receivedData appendData:data];
}
- (void)connection:(NSURLConnection *)connection
  didFailWithError:(NSError *)error
{
    // release the connection, and the data object
    // receivedData is declared as a method instance elsewhere

    // inform the user
    NSLog(@"Connection failed! Error - %@ %@",
          [error localizedDescription],
          [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    // do something with the data
    // receivedData is declared as a method instance elsewhere
    NSLog(@"Succeeded! Received %d bytes of data",[receivedData length]);
    flagImage = [UIImage imageWithData: receivedData];
}

-(void)issueRequest:(NSString *)fullCountryImageURL{
    NSURLRequest *theRequest=[NSURLRequest requestWithURL:[NSURL URLWithString:fullCountryImageURL]
                                              cachePolicy:NSURLRequestUseProtocolCachePolicy
                                          timeoutInterval:60.0];
    // create the connection with the request
    // and start loading the data
    NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
    if (theConnection) {
        // Create the NSMutableData to hold the received data.
        // receivedData is an instance variable declared elsewhere.
        receivedData = [NSMutableData data];

    } 
    else {
        // Inform the user that the connection failed.
    }
}

-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *cellIdentifier = @"countryCell";
    UITableViewCell *cell=(UITableViewCell *) [self.tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell==nil){
        cell=[[UITableViewCell alloc] initWithStyle: UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
    }

    // Create the request.

    NSString *flagImageURLPartOne = @"http://www.flagimage.com/";
    NSString *countryNumber = [NSString stringWithFormat:@"%i", indexPath.row+1];
    NSString *flagImageURLPartTwo = @".png";
    NSString *fullCountryImageURL = [NSString stringWithFormat:@"%@%@%@", flagImageURLPartOne, countryNumber, flagImageURLPartTwo];

    [self issueRequest:fullCountryImageURL];

    cell.imageView.image = flagImage;
    cell.textLabel.text= [countryNamesArray objectAtIndex:indexPath.row];

    return cell;
}

-(void) tableView:(UITableView *) tableview didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
}

@end 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:01:36.547

不知何故，您必须`flagImage`通过数据结构将 与国家名称相关联。

看看在`tableView:cellForRowAtIndexPath:` 你异步触发图像请求中发生了什么，然后将电流分配给`flagImage`单元格的图像视图。但是`NSURLConnection`委托方法在未来某个不确定的时间触发，`flagImage`在那个时候重新分配。

您当前正在执行的操作`tableView:cellForRowAtIndexPath:`适用于同步`NSURLConnection`，但您会被异步委托回调绊倒。

# iphone - 不能从其他类调用实例方法

> ID：12787685
> 
> 赞同：2
> 
> 时间：2012-10-08T18:51:19.590
> 
> 标签：iphone, objective-c, ios, xcode

我希望你能帮助我解决 Objective-C 中的以下问题。我已经坐了两个小时了，但我不知道出了什么问题。

这是我的代码：

BMICalc.h:

```
#import <UIKit/UIKit.h>

@interface BMICalc : UIViewController <UIPickerViewDataSource, UIPickerViewDelegate>

@property (strong, nonatomic) NSMutableArray *bmiArray;

-(int)bmiRows;

@end 
```

BMICalc.m:

```
#import "BMICalc.h"

@implementation BMICalc

@synthesize bmiArray;

- (int) bmiRows
{
    if (!bmiArray)
    {
      bmiArray = [[NSMutableArray alloc] init];
    }
    return [bmiArray count];
}

@end 
```

现在我想在另一个名为 BMIDiaryController 的类中创建一个 BMICalc 对象：

BMIDiaryController.m:

```
#import "BMIDiaryController.h"
#import "BMICalc.h"

@interface BMIDiaryController ()

@end

@implementation BMIDiaryController

- (void)viewDidLoad
{
    [super viewDidLoad];

    BMICalc *bmiSender = [[BMICalc alloc] init];

    int bmiVariable = [bmiSender bmiRows];       
}

@end 
```

因此，当我启动程序时，我收到以下错误：“'BMICalc' 没有可见的@interface 声明选择器'bmiRows'

我不能用对象“bmiSender”（都是“BMICalc”类）调用方法“bmiRows”

我希望你能帮我解决这个问题。我搜索和搜索...我认为这只是一件小事，但我不会看到它...

谢谢和问候，

斯特凡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:45:26.750

尝试创建一个新项目。然后添加 BMICalc.m 和 BMICalc.h 文件。尝试实例化您的 BMICalc 对象并从 appDelegate 调用 bmiRows 方法来测试它。您的主项目中可能存在许多可能会干扰课程的错误。至少这样做会确认你没有疯，并且这段代码不是问题:)

# html - 虚线 CSS 边框截断为半点

> ID：12787686
> 
> 赞同：1
> 
> 时间：2012-10-08T18:51:20.923
> 
> 标签：html, css, wordpress, border

请参阅此处的虚线边框，这似乎只发生在 Firefox 中。一般来说，虚线边框在 chrome 中看起来很糟糕。

最后那个小点总是被切成两半！这真的很烦人。有什么修复吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T18:53:57.483

没有看到任何代码就很难说它是什么。但我敢打赌，这是因为你的容器是`overflow:hidden`；并且带有虚线边框的元素比它的容器宽。

# makefile - make 的同一目标的多个实例

> ID：12787689
> 
> 赞同：1
> 
> 时间：2012-10-08T18:51:47.883
> 
> 标签：makefile, gnu-make

我正在研究实验室中其他人编写的 Makefile，我看到以下内容：

```
include /path/to/Makefile.inc

TARGET_A: pre_req_1 pre_req_2
    cmd_1;
    cmd_2;
    ... 
```

当我查看时，`/path/to/Makefile.inc`我发现它还包含一个`TARGET_A` 具有**其他**先决条件和配方的目标。

这是正常的做法吗？（它会起作用吗？）会`make`分别对待这两个规则吗？我们可以安全地对首先考虑哪一个做出任何假设吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T20:04:02.380

这是一种危险的做法，因为很难知道应用了哪一个。

如果包含的文件内容在 Makefile 中，则“include”将起作用，并且在读取 Makefile 时将覆盖目标。因此，最后一个目标将被尊重，而第一个目标（在包含的文件中）将被忽略。

# networking - 像谷歌一样重负载的服务器进行负载平衡

> ID：12787691
> 
> 赞同：2
> 
> 时间：2012-10-08T18:51:51.070
> 
> 标签：networking, scalability, computer-science, load-balancing

下面的查询显示了大约 10 个属于 google.com 的 IP 地址。那么，这是否意味着只有 10 台服务器充当发送给 google 的任何查询的第一站？即使这些只用于负载均衡，它们如何处理数百万个请求？

```
托管 google.com
google.com 的地址为 74.125.228.32
google.com 的地址为 74.125.228.33
google.com 的地址为 74.125.228.34
google.com 的地址为 74.125.228.35
google.com 的地址为 74.125.228.36
google.com 的地址为 74.125.228.37
google.com 的地址为 74.125.228.38
google.com 的地址为 74.125.228.39
google.com 的地址为 74.125.228.40
google.com 的地址为 74.125.228.41
google.com 的地址为 74.125.228.46

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:32:24.773

看这个：

```
bash-3.2$ host google.com
google.com has address 212.188.10.114
google.com has address 212.188.10.88
google.com has address 212.188.10.98
google.com has address 212.188.10.84
google.com has address 212.188.10.93
google.com has address 212.188.10.108
google.com has address 212.188.10.99
google.com has address 212.188.10.123
google.com has address 212.188.10.109
google.com has address 212.188.10.104
google.com has address 212.188.10.119
google.com has address 212.188.10.94
google.com has address 212.188.10.118
google.com has address 212.188.10.89
google.com has address 212.188.10.103
google.com has address 212.188.10.113 
```

换句话说，来自不同国家的用户为“google.com”获得了不同的 IP。所以至少有更多的 IP 地址，而不仅仅是 10 个左右。

# jquery - jQuery动画第二次不起作用

> ID：12787694
> 
> 赞同：0
> 
> 时间：2012-10-08T18:52:14.573
> 
> 标签：jquery, html, jquery-animate

我有一个要制作动画的内容区域，但是动画仅在我第一次单击触发器时才起作用。在触发器的第二次单击时，动画反转。这是我的代码。

的HTML

```
<div class="drawer-content" id="signin">   
</div><!--End #signin--> 
```

jQuery

```
$(document).ready(function() {

    //We hide the panel
    $('.drawer-content').css('marginTop', '-140px' );

    //When the anchor is clicked the panel will slide up        
    $('.open-drawer').click(function(){ 
        $('.drawer-content').animate({marginTop: '0px',}, 1000 );

        //Append active class to anchor
        $(this).removeClass('open-drawer').addClass('active');

        //On click the active link will cause the panel to slide down
        $('.active').click(function() {
            $(this).removeClass('active').addClass('open-drawer');
            $('.drawer-content').animate({marginTop: '-140px',}, 1000 );
        });

    });

});//End DOM Load 
```

**编辑** 这里是那些询问的人的一个活生生的例子。谢谢！ [http://livecoding.io/3854307](http://livecoding.io/3854307)

评论应该使这一点不言自明。它第一次工作，但如果我尝试再次运行动画，框只是向下滑动，然后再次向上滑动。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:15:06.320

.slideToggle 会为您工作吗？描述：通过滑动显示或隐藏匹配的元素。

更新！

尝试用这个替换你的 jquery 代码。

```
 //We hide the panel
$('.drawer-content').hide();

//When the anchor is clicked the panel will slide up        
$('.open-drawer').click(function(){
    $('.drawer-content').slideToggle();

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:00:12.313

这取决于您的 html，但我期望“点击”在 .open-drawer 上注册，这会启动动画并将点击处理程序设置为 .active。

现在，如果 .active 是 .open-drawer 的父级（在 HTML 中），它会注意到相同的点击（因为它没有在 DOM 中向上冒泡），从而将动画附加到当前动画。

我的第一个建议是`event.stopPropagation()`在第一个事件处理程序中添加一个，看看会发生什么。

但如前所述，如果没有 HTML 或示例页面，就很难发现问题并进行调试。

（另见[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)）

# java - Java Swing：如何渲染具有不同线条样式的组合框？

> ID：12787696
> 
> 赞同：2
> 
> 时间：2012-10-08T18:52:19.490
> 
> 标签：java, swing, combobox, line

我想要一个 ComboBox 显示一些不同的线条样式，例如实线、点线、虚线等。

如何创建自定义渲染来完成此任务？

谢谢大家。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T21:24:13.090

这样做的好方法是使用 CustomRenderer。您可以使用预定义的图像或动态绘制线条笔触。以下是后一种选项的示例：

```
import java.awt.BasicStroke;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridBagLayout;
import java.awt.Stroke;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.ListCellRenderer;
import javax.swing.SwingUtilities;
import javax.swing.UnsupportedLookAndFeelException;

public class TestComboBox {

    private static enum LineType {

        PLAIN {
            @Override
            public Stroke getStroke() {
                return new BasicStroke(1.0f, BasicStroke.CAP_SQUARE, BasicStroke.JOIN_MITER, 1.0f, new float[] { 1.0f }, 1);
            }
        },
        DOTTED {
            @Override
            public Stroke getStroke() {
                return new BasicStroke(1.0f, BasicStroke.CAP_SQUARE, BasicStroke.JOIN_MITER, 1.0f, new float[] { 0.1f, 5.0f }, 1);
            }

        },
        DASHED {
            @Override
            public Stroke getStroke() {
                return new BasicStroke(1.0f, BasicStroke.CAP_SQUARE, BasicStroke.JOIN_MITER, 1.0f, new float[] { 3.0f, 3.0f }, 1);
            }

        };
        public abstract Stroke getStroke();
    }

    public class LineRenderer extends JPanel implements ListCellRenderer {
        private LineType value;

        @Override
        public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
            if (value instanceof LineType) {
                setLineType((LineType) value);
            } else {
                setLineType(null);
            }
            return this;
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g;
            if (value != null) {
                g2d.setStroke(value.getStroke());
                g.drawLine(0, getHeight() / 2, getWidth(), getHeight() / 2);
            }

        }

        private void setLineType(LineType value) {
            this.value = value;
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(50, 20);
        }

    }

    protected void initUI() {
        final JFrame frame = new JFrame(TestComboBox.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel(new GridBagLayout());
        final JComboBox comboBox = new JComboBox(LineType.values());
        comboBox.setRenderer(new LineRenderer());
        comboBox.setSelectedItem(null);
        comboBox.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                SwingUtilities.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        JOptionPane.showMessageDialog(comboBox, "You have selected " + comboBox.getSelectedItem());
                    }
                });
            }
        });
        panel.add(comboBox);
        frame.add(panel);
        frame.setSize(300, 100);
        frame.setVisible(true);
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestComboBox().initUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:45:05.867

看看我为自定义编辑器提供的这个[答案。](https://stackoverflow.com/a/12576340/931530)`JComboBox`在那个解决方案中，我扩展了`BasicComboBoxEditor`类，修改了编辑组件并在`setEditor()`.

同样，您可以根据需要扩展`BasicComboBoxRenderer`、修改渲染组件的边框，然后使用`setRenderer()`将它的新实例设置为您的`JComboBox`.

# spring - Spring：我想在jsp或控制器中获取资源的相对或完整路径

> ID：12787697
> 
> 赞同：0
> 
> 时间：2012-10-08T18:52:20.580
> 
> 标签：spring, resources, path, relative-path

我有一些用户上传的图片存储在“资源/图片”中，我想在 jsp 中显示，但总是错误的路径。我试过了

```
 request.getSession().getServletContext().getResource(filepath); 
```

但它返回：

```
jndi:/default-host/mvc/resources/pics/bec7838a-55dc-4f8e-86c1-fb9e9067909d.jpg 
```

我的资源在 servlet-context.xml 中配置

```
<mvc:resources mapping="/resources/**" location="/resources/" /> 
```

我的资源目录在：/webapp/resources

所以我的 /resources/pics/bec7838a-55dc-4f8e-86c1-fb9e9067909d.jpg 在 .../webapp/resources/pics/bec7838a-55dc-4f8e-86c1-fb9e9067909d.jpg

我不需要“jndi:/defaulf-host”。我知道我可以使用子字符串来制作它，但我认为 spring 框架应该提供一些函数来获取资源到路径或 URL。

我想在 jsp 或控制器中获取用户的资源路径

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T22:14:30.143

在你的jsp页面中使用

```
<img src="${pageContext.servletContext.contextPath}/resources/pics/${pictureName}"/> 
```

在您的控制器中，您在模型上放置了一个名为 pictureName 的 bean

```
model.addAttribute("pictureName", "picture.jpg") 
```

# asp.net-mvc - 共享视图错误“传递到字典的模型项的类型为 ...，但此字典需要 System.String 类型的模型项”

> ID：12787716
> 
> 赞同：2
> 
> 时间：2012-10-08T18:53:39.740
> 
> 标签：asp.net-mvc

我是 Asp.net mvc 4 开发的新手，我在 webforms 开发多年，现在我开始在 mvc 开发，我遇到了一些问题

在我的新项目中，我需要使用 MarkdownEditor，我已将其封装在 SharedView 中，以便在我的视图中重用它（例如在 Webforms 中创建 Web 用户控件）

使用 markdown 编辑器共享视图的代码是：

```
@model string

<div id="markdown-editor">
    <div class="wmd-panel">
        <div id="wmd-button-bar"></div>
            @Html.TextArea("m_wmdinput", @Model, new { @class="wmd-input" })
        </div>
    <div id="wmd-preview" class="wmd-panel wmd-preview"></div>
</div>
<script>
     ....
     .... 
```

这是我将其用作 Render.PartialView 的示例。

```
@model MyProject.Models.PostIt

@using (Html.BeginForm()) {

    <fieldset>
        <legend>PostIt</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.PublishingDate)
            @Html.EditorFor(model => model.PublishingDate)
            @Html.ValidationMessageFor(model => model.PublishingDate)
        </div>

        @Html.Partial("MarkdownEditor", @Model.Content)

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
} 
```

型号代码为：

```
public class PostIt
{
    public int ID { get; set; }
    public string Content { get; set; }
    public DateTime PublishingDate { get; set; }

    public PostIt()
    {
        ID = -1;
    }
} 
```

和控制器代码：

```
public ActionResult Edit(int? id)
{
    PostIt postIt = new PostIt();

    if (id.HasValue)
    {
        postIt = new PostItBLL().GetByID(id.Value);
        if (postIt == null)
        {
            return HttpNotFound();
        }
    }
    return View(postIt);
 }

 [HttpPost]
 public ActionResult Edit(PostIt postit)
 {
     if (ModelState.IsValid)
     {
         Save(postit);
         return RedirectToAction("Index");
     }
     return View(postit);
 }

 public ActionResult Index()
 {
     return View(db.PostIt.ToList());
 }

 private void Save(PostIt postIt)
 {
     if (postIt.ID < 0)
     {
         new PostItBLL().Add(postIt);
     }
     else
     {
         new PostItBLL().Update(postIt);
     }
 } 
```

页面加载正确，但是当我更改 som 值并单击保存按钮时，出现以下错误：

传入字典的模型项的类型为“MyProject.Models.PostIt”，但此字典需要“System.String”类型的模型项。

关于我正在犯的错误的任何线索？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:44:37.417

出现此问题的原因是 PostIt 模型上的 Content 属性为空。如果你给 Content 一个像 string.Empty 这样的默认值，问题就不会发生。你可以这样做：

```
@Html.Partial("MarkdownEditor", @Model.Content ?? string.Empty) 
```

如需解释，请阅读此问题的公认答案：[ASP.NET MVC, strong typed views, partial view parameters glitch](https://stackoverflow.com/q/1049027/426840)

# c# - 读取 sql 中的特定单元格，使用行 id 选择它

> ID：12787721
> 
> 赞同：1
> 
> 时间：2012-10-08T18:54:08.227
> 
> 标签：c#, asp.net, sql

我的 sql 数据库中有一个包含数据的表。在此表中，我有 id (int) 和两个两列名称（每个 nvarchar(50) ）。现在。说。在代码隐藏中使用 C#，我想将“nvarchar”之一放在一个字符串中。我希望使用浏览器 url 中的 id 来选择数据。

可以说，我的网址是“http://localhost:49530/Forum/Thread.aspx?id=4” 在我的表中，我有 ThreadID、主题和消息。因此，它需要将 ThreadID=4 的“Topic”中的数据写入预定义的变量中。

我希望在 page_load 后面的代码中做到这一点。最后在 aspx 页面上的标签中显示该数据。

我完全空白。（以及谷歌搜索的内容。已经用谷歌搜索了一整天）。

我现在已经使用给我的示例编写了一些代码。出了点问题。

```
SqlConnection conn_Kategori = new SqlConnection(WebConfigurationManager.ConnectionStrings["Computer_Klubben_CommunitySiteConnectionString"].ConnectionString);
int TraadVaelger = int.Parse(Request.QueryString["id"]);
string OutputToLabel;

    using (conn_Kategori)
    {
        conn_Kategori.Open();
        SqlCommand OverfoerTraadNavnet = new SqlCommand("SELECT KatNavn FROM KategoriTabel WERE Katnavn = @KatNavn", conn_Kategori);
        OverfoerTraadNavnet.CommandType = CommandType.Text;
        OverfoerTraadNavnet.Parameters.AddWithValue("@KatNavn", TraadVaelger);
        OverfoerTraadNavnet.ExecuteReader();
        OutputToLabel = OverfoerTraadNavnet.ExecuteReader().ToString();
        Stien.Text = OutputToLabel;
        conn_Kategori.Close();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:07:22.030

```
string OutputToLabel = string.Empty;

if(!string.IsNullOrEmpty(Request.QueryString["id"]))
{
    int ThreadID = 0;
    int.TryParse(Request.QueryString["id"], out ThreadID);
    if(ThreadID > 0)
    {
        string Sql = "SELECT Topic FROM <tablename> WHERE ThreadID = @ThreadID;";
        using (SqlConnection conn = new SqlConnection(connString))
        {
            SqlCommand cmd = new SqlCommand(Sql, conn);
            cmd.Parameters.Add("@ThreadID", ThreadID);
            try
            {
                conn.Open();
                OutputToLabel = cmd.ExecuteScalar().ToString();
            }
            catch (Exception ex)
            {
                Response.Write(ex.Message);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T21:27:58.897

而不是你的线路：

```
OverfoerTraadNavnet.ExecuteReader();
OutputToLabel = OverfoerTraadNavnet.ExecuteReader().ToString(); 
```

你可能会想要这样的东西：

```
SqlDataReader myReader = OverfoerTraadNavnet.ExecuteReader();
while (myReader.Read())
{
    OutputToLabel = Convert.ToString(myReader["KatNavn"]); // Substitute your "Amiga-Hardware" column name here
}
myReader.Close(); 
```

更多详细信息在[SqlCommand.ExecuteReader 文档](http://msdn.microsoft.com/en-us/library/9kcbe65k.aspx)中，例如[传递 CommandBehavor](http://msdn.microsoft.com/en-us/library/y6wy5a0f.aspx)以隐式关闭阅读器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T07:47:51.367

我得到了一些帮助....下面的代码成功了。:-)

```
SqlConnection conn_Kategori = new SqlConnection(WebConfigurationManager.ConnectionStrings["Computer_Klubben_CommunitySiteConnectionString"].ConnectionString);
    //int TraadVaelger = int.Parse(Request.QueryString["id"]);
    string OutputToLabel;
    int TraadVaelger;
    if (!int.TryParse(Request.QueryString["id"], out TraadVaelger))
    {
        //Errorhandling
        Response.Write("No id was givin");
    }

    using (conn_Kategori)
    {
        conn_Kategori.Open();
        SqlCommand OverfoerTraadNavnet = new SqlCommand("SELECT KatNavn FROM KategoriTabel WHERE KategoriID = @KategoriID", conn_Kategori);
        OverfoerTraadNavnet.CommandType = CommandType.Text;
        OverfoerTraadNavnet.Parameters.AddWithValue("@KategoriID", TraadVaelger);
        OutputToLabel = OverfoerTraadNavnet.ExecuteScalar().ToString();
        Stien.Text = OutputToLabel;
        conn_Kategori.Close();
    } 
```

# lua - timer.performWithDelay() - 第一次调用

> ID：12787723
> 
> 赞同：1
> 
> 时间：2012-10-08T18:54:21.693
> 
> 标签：lua, coronasdk

我对`timer.performWithDelay()`.

当我想每隔设定的时间循环一个函数时，我采用正常公式

```
timer.performWithDelay( delay, function, 0 ) 
```

该函数在第一次延迟值之后被调用，并且在每次延迟后再次调用。有什么方法可以循环相同的功能而不必第一次等待？

只是为了澄清：

执行 -> 延迟 -> 执行 -> 延迟 -> 执行 -> 延迟（等）

代替：

延迟 -> 执行 -> 延迟 -> 执行 -> 延迟 -> 执行（等）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T20:53:13.617

为什么不第一次显式调用它（将`function`关键字替换为`func`）：

```
timer.performWithDelay( delay, func, 0 )
func() 
```

# python - 在 App Engine 应用程序初始化时执行代码

> ID：12787730
> 
> 赞同：2
> 
> 时间：2012-10-08T18:55:01.127
> 
> 标签：python, google-app-engine, google-cloud-datastore

在 App Engine 上运行 Python Web 应用程序时，我们需要设置一些机制来在应用程序初始化之前（或期间）执行一些代码。这意味着，在最优方案中，我们需要运行的代码尽可能早地被执行。这样做的目的是让 App Engine remote_api 在访问**本地**数据存储区之前进行初始化，从而防止数据存储区访问冲突。

这是我们正在寻找的一个非常粗略的示例：

```
imports (including remote_api)

def some_initialization_function_or_similar (args):
    some_init_function_calls(...)

    setup_remote_api(...)

    access_datastore_the_first_time(...) 
```

请将此问题作为我们正在查看的场景的参考：[Using GAE remote api for debug from localhost - Connecting too late?](https://stackoverflow.com/questions/12588327/using-gae-remote-api-for-debugging-from-localhost-connecting-too-late)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T04:17:08.900

假设您有一个入口点（== app.yaml 中命名的脚本），您可以在导入之后但在调用 main() 函数之前调用所需的代码。这意味着它将仅在导入主脚本时运行，这仅在第一个请求（到达该入口点）时运行。

如果您有多个入口点，请尝试将其放在 appengine_config.py 中。这很早就加载了。

# c++ - 为什么将私有变量添加到类 [C++] 时出现错误

> ID：12787733
> 
> 赞同：0
> 
> 时间：2012-10-08T18:55:05.683
> 
> 标签：c++, oop, class

我有这个网格类，它分布在两个文件（mesh.h 和 mesh.cpp）上。现在它工作得很好，直到我向它添加了一个位置变量（Vector2d 类型）。当我添加变量时，它仍然正常运行，但是当我在其中一个函数中使用它时，它给了我一个错误，说我的一堆变量没有声明。让我告诉你我做了什么：

```
class Mesh{
  public:
  Mesh() {
     Rectangle;
     position = Vector2d(0,0);
  }

  Mesh(Vector2dVector Vertices) {
    Set(Vertices);
    position = Vector2d(0,0);
  };

  Vector2dVector GetVetices() { return vertices; };
  Vector2d SetPosition(Vector2d p) { position = p; }
  float GetVertexCount() { return vertexCount; };
  float GetTriangleCount() { return triangleCount; }

  void  Set(Vector2dVector Vertices){
    Triangulate::Process(Vertices,vertices);
    vertexCount = vertices.size();
    triangleCount = vertexCount/3;
  };

  void Render();
  static Mesh Circle();
  static Mesh Rectangle();
  static Mesh Triangle();

  private:
  Vector2dVector vertices;
  Vector2d position;
  int triangleCount;
  int vertexCount;
}; 
```

这运行正常，但是当我将它添加到文件 mesh.cpp 的函数渲染中时，它给了我一个错误

```
#include "mesh.h"

void Mesh::Render() {
 glBegin (GL_TRIANGLES); 
     for (int i=0; i<GetTriangleCount(); i++) {
         const Vector2d &p1 = vertices[i*3+0];
         const Vector2d &p2 = vertices[i*3+1];
         const Vector2d &p3 = vertices[i*3+2];
         glVertex2f(position.GetX() + p1.GetX(),position.GetY() + p1.GetY());
         glVertex2f(position.GetX() + p2.GetX(),position.GetY() + p2.GetY());
         glVertex2f(position.GetX() + p3.GetX(),position.GetY() + p3.GetY());
     }
 glEnd ();
} 
```

这是错误消息

```
In file included from main.cpp:3:
mesh.h: In constructor `Mesh::Mesh()':
mesh.h:5: error: no matching function for call to `Vector2d::Vector2d()'
triangulation.h:43: note: candidates are: Vector2d::Vector2d(const Vector2d&)
triangulation.h:46: note:                 Vector2d::Vector2d(float, float)
mesh.h: In constructor `Mesh::Mesh(Vector2dVector)':
mesh.h:10: error: no matching function for call to `Vector2d::Vector2d()' 
```

所以在我从函数中删除所有 position.Get.. 方法调用后，它仍然给了我同样的错误，尽管在我添加和删除之前它没有。我已经使用电脑工作了大约 4 年了，我从未见过我的电脑会这样。如果有人可以向我解释我做错了什么，那将非常有帮助。顺便说一句，我使用的是 DevC++ 版本 4.9.9.2，所以我认为它与此有关。

感谢阅读，抱歉太长了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T18:58:47.747

你有一个`Mesh::Mesh()`构造函数。编译器抱怨它不能为`Vector2d`类（`position`实例变量）调用适当的构造函数（没有参数）。您必须：

*   提供`Vector2d::Vector2d()`构造函数，或
*   使用来自 的适当参数调用现有`Vector2d`构造函数之一，如下所示：`position``Mesh::Mesh()`

    ```
    Mesh(): position(0, 0) {
    } 
    ```

    （我拿出来`Rectangle;`是因为这样写没有效果。你可能想用*调用*那个函数`Rectangle();`吗？）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T18:58:42.450

您必须在构造函数的初始化列表中初始化向量，而不是在构造函数主体中：

```
Mesh(): position(0,0) {
   Rectangle;
}

Mesh(Vector2dVector Vertices) : position(0,0) {
  Set(Vertices);
}; 
```

否则`position`将是默认构造的，这将失败，因为您没有定义默认构造函数。

# orchardcms - 在 Orchard 中自定义呈现列表时如何访问项目部件

> ID：12787735
> 
> 赞同：4
> 
> 时间：2012-10-08T18:55:16.663
> 
> 标签：orchardcms

我已经接管了 Orchard 中列表的呈现，以便能够创建自定义标记（我需要在列表的实际内容之前创建交互式导航）。这是我目前正在使用的代码：

@使用 Orchard.DisplayManagement.Shapes；

```
@{
    var list = Model.List;
    var items = list.Items;
    var count = items.Count;
    var listTag = Tag(list, "ul");
    listTag.AddCssClass("historia");
    var index = 0;
}

<div class="produtos">
    @foreach (var item in items)
    {
        var itemTag = Tag(item, "div");
        itemTag.AddCssClass("item-" + index);
        @itemTag.StartElement;
        <h3>
        @item.Title
        </h3>
        <p>@item.MyCustomTextField</p>
        @itemTag.EndElement;
        ++index;
    }
</div>

@Display(Model.List)

@Display(Model.Pager) 
```

它几乎可以工作...我无法访问列表项字段...我想获取标题并将其放在 h3 中，然后将自定义文本字段放在其后面的段落中...我'将使用 CSS 正确呈现此导航部分。在这个导航部分之后，我将调用标准列表呈现例程。

问题是@item.Title 产生一个空/空字符串。我想访问包含自定义文本字段的项目内容（没有双关语），该字段是整个帖子的摘录，将显示在“导航窗格”上。

Bertrand 通过博客文章向我们展示了如何做到这一点：

```
@using Orchard.ContentManagement;
@{
    IEnumerable<object> blogPosts =
        Model.ContentItems.ContentItems;
}
@if (blogPosts == null || blogPosts.Count() < 1) {
<p>@T("No posts.")</p>
}
else {
    <ul class="content-items">
    @foreach (dynamic post in blogPosts) {
        string title = post.Title;
        ContentItem item = post.ContentItem;
        <li class="content-item-summary">
            @Html.ItemDisplayLink(title, item)
        </li>
    }
    </ul>
} 
```

但它与标准列表的工作方式不同。

（另一个小问题：我可以/应该使用自定义包装器而不是覆盖此列表的整个布局吗？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T22:39:54.493

博客示例非常不同。在列表的情况下，您在 Items 中拥有的是形状，而不是内容项。现在这些形状通常（但不总是）具有对相应内容项的引用，通常在 ContentItem 属性下。因此，以获取标题为例，`item.ContentItem.TitlePart.Title`它会给你你想要的东西。

至于您的包装问题，我不知道您要做什么，所以我无法提供建议。如果您想保持列表呈现完整但用附加标记包围它，那么是的，这是一种方法。

# youtube-api - YouTube EDU 类别文件与实际类别不对应

> ID：12787741
> 
> 赞同：0
> 
> 时间：2012-10-08T18:55:32.610
> 
> 标签：youtube-api

我正在使用YouTube API 开发人员指南中所述的 YouTube EDU 类别文件[http://gdata.youtube.com/schemas/2007/educategories.cat 。](http://gdata.youtube.com/schemas/2007/educategories.cat)

文件中的类别编号似乎与实际类别不对应。例如，该文件包含：

```
 <atom:category term='326' label='Italian' xml:lang='en-US'>
    <yt:parentCategory term='49'/>
</atom:category> 
```

表明类别 326 应该是“意大利”。但是，如果我尝试使用[http://gdata.youtube.com/feeds/api/edu/courses?v=2&category=326](http://gdata.youtube.com/feeds/api/edu/courses?v=2&category=326)检索该类别的课程，那么我将获得计算机科学课程。以下是响应的摘录：

```
<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns='http://www.w3.org/2005/Atom' xmlns:media='http://search.yahoo.com/mrss/' xmlns:openSearch='http://a9.com/-/spec/opensearch/1.1/' xmlns:gd='http://schemas.google.com/g/2005' xmlns:yt='http://gdata.youtube.com/schemas/2007' gd:etag='W/&quot;C0cMR3YzfSp7I2A9WhJaF08.&quot;'>
<id>tag:youtube.com,2008:edu:course</id>
<updated>2012-10-08T18:31:26.885Z</updated>
<category scheme='http://schemas.google.com/g/2005#kind' term='http://gdata.youtube.com/schemas/2007#course'/>
<title>Courses for category 326</title>
<logo>http://www.youtube.com/img/pic_youtubelogo_123x63.gif</logo>
<link rel='http://schemas.google.com/g/2005#feed' type='application/atom+xml' href='http://gdata.youtube.com/feeds/api/edu/courses'/>
<link rel='http://schemas.google.com/g/2005#batch' type='application/atom+xml' href='http://gdata.youtube.com/feeds/api/edu/courses/batch'/>
<link rel='self' type='application/atom+xml' href='http://gdata.youtube.com/feeds/api/edu/courses?start-index=1&amp;max-results=25&amp;category=326'/>
<link rel='service' type='application/atomsvc+xml' href='http://gdata.youtube.com/feeds/api/edu/courses?alt=atom-service'/>
<author>
    <name>YouTube</name>
    <uri>http://www.youtube.com/</uri>
</author>
<generator version='2.1' uri='http://gdata.youtube.com'>YouTube data API</generator>
<openSearch:totalResults>12</openSearch:totalResults>
<openSearch:startIndex>1</openSearch:startIndex>
<openSearch:itemsPerPage>25</openSearch:itemsPerPage>
<entry>
    <id>tag:youtube.com,2008:edu:course:0DB77CB540B41DFF</id>
    <updated>2012-10-08T18:31:26.885Z</updated>
    <category scheme='http://schemas.google.com/g/2005#kind' term='http://gdata.youtube.com/schemas/2007#course'/>
    <category scheme='http://gdata.youtube.com/schemas/2007/educategories.cat' term='326'/>
    <title>CS606 Compiler Construction</title>
    <summary>Compiler Construction</summary>
    <link rel='lectures' href='http://gdata.youtube.com/feeds/api/edu/lectures?course=0DB77CB540B41DFF'/>
    <link rel='self' type='application/atom+xml' href='http://gdata.youtube.com/feeds/api/edu/courses/0DB77CB540B41DFF'/>
    <media:group>
        <media:thumbnail url='http://i.ytimg.com/vi/nVsUbG65TWY/default.jpg' height='90' width='120' yt:name='default'/>
        <media:thumbnail url='http://i.ytimg.com/vi/nVsUbG65TWY/hqdefault.jpg' height='360' width='480' yt:name='hqdefault'/>
    </media:group>
    <yt:playlistId>0DB77CB540B41DFF</yt:playlistId>
</entry> 
```

为什么我没有看到我指定的类别的正确课程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T22:30:36.723

This looks like a YouTube caching issue. If I refresh enough I'll see it switching between Italian and Computer Science. Would you mind filing a bug on here. [https://code.google.com/p/gdata-issues/issues/entry?template=YouTube%20(Defect%20Report](https://code.google.com/p/gdata-issues/issues/entry?template=YouTube%20(Defect%20Report))

I'll also report the issue to my contacts.

# objective-c - 使用带有 UIImageView 的 touchesEnded 时遇到问题

> ID：12787742
> 
> 赞同：1
> 
> 时间：2012-10-08T18:55:34.620
> 
> 标签：objective-c, ios, view, touch

我一直在尝试使用touchedBegan 和touchedEnded。我基本上只是想在我的视图中创建一个图像。然后能够在用户触摸图像时做一些事情。当我触摸图像时，它确实会执行我的 if 语句中的代码。知道我做错了什么吗？

viewDidload:

```
UIImage *image = [UIImage imageNamed:@"myimage1.png"];
imageView = [[UIImageView alloc] initWithImage:image];
imageView.frame = CGRectMake(0, 0, 320, 200);
[self.view addSubview:imageView];
imageViewsArray = [NSArray arrayWithObjects:imageView, nil]; 
```

接触结束：

```
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [touches anyObject];

    // do this on touch
    UIView *touchedView = [touch view];
    if ([imageViewsArray indexOfObject:touchedView] != NSNotFound) {
        // not not found means found!
        NSLog(@"Got Touch!");
    }
} 
```

我也尝试使用这个 if 语句：

```
if ([[touch view] isKindOfClass:[UIImageView class]]) {
        NSLog(@"Got Touch 2!");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:03:49.337

如果您想在点击图像视图时收到通知，我建议您使用更简单的方法，使用[`UITapGestureRecognizer`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITapGestureRecognizer_Class/Reference/Reference.html).

```
// After initializing and adding your UIImageView:
UITapGestureRecognizer *gr = [[UITapGestureRecognizer alloc] initWithTarget:self       
                               action:@selector(handleTap:)];
[imageView addGestureRecognizer:gr]; 
```

```
- (void)handleTap:(UITapGestureRecognizer *)gr {
    NSLog(@"Touched!");
} 
```

如果您想坚持使用`touchesEnded`，请尝试以下步骤：

*   检查您的`imageViews`数组是否`nil`不在`touchesEnded`.
*   记录`[touch view]`以查看哪个视图正在接收触摸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:56:50.353

就像 DrummerB 说的那样，我会推荐使用`UITapGestureRecognizer`。[在这里](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizers/GestureRecognizers.html#//apple_ref/doc/uid/TP40009541-CH6-SW1)查看官方文档以更好地了解它的工作原理，但主要是将手势识别器与将处理点击的视图相关联。在你的情况下，因为你正在处理一个`UIImageView`确保你打开默认情况下`userInteractionEnabled`设置为的属性：换句话说，imageView默认情况下不会接收事件。`NO``UIImageView`

# symfony1 - 验证上传的 XML 文件内容的表单

> ID：12787756
> 
> 赞同：0
> 
> 时间：2012-10-08T18:57:04.777
> 
> 标签：symfony1, symfony-1.4

我有一个上传 XML 文件的表单。提交表单后，我必须检查 XML 文件中一对标签的内容。如果标签的内容与预期的不同，则应在表单旁边显示错误。

我不知道如何组织这段代码，有什么帮助吗？

标签： 预验证, 后验证

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T21:29:31.330

您有几个地方可以执行此检查：

*   在创建表单的操作中
*   在使用自定义验证器的表单中
*   在模型类中（真的不推荐......）

我更喜欢自定义验证器，因为如果您必须在其他地方重新使用表单，您将不必重新实现检查 xml 的逻辑。

因此，在您的 sfForm 类中，将自定义验证器添加到您的文件小部件：

```
class MyForm extends sfForm
{
  public function configure()
  {
    // .. other widget / validator configuration

    $this->validatorSchema['file'] = new customXmlFileValidator(array(
      'required'  => true,
    )); 
```

在您的新验证器内部`/lib/validator/customXmlFileValidator.class.php`：

```
// you extend sfValidatorFile, so you keep the basic file validator
class customXmlFileValidator extends sfValidatorFile
{
  protected function configure($options = array(), $messages = array())
  {
    parent::configure($options, $messages);

    // define a custom message for the xml validation
    $this->addMessage('xml_invalid', 'The XML is not valid');
  }

  protected function doClean($value)
  {
    // it returns a sfValidatedFile object
    $value = parent::doClean($value);

    // load xml file
    $doc = new DOMDocument();
    $doc->load($this->getTempName());

    // do what ever you want with the dom to validate your xml
    $xpath = new DOMXPath($doc);
    $xpath->query('/my/xpath');

    // if validation failed, throw an error
    if (true !== $result)
    {
      throw new sfValidatorError($this, 'xml_invalid');
    }

    // otherwise return the sfValidatedFile object from the extended class
    return $value;
  }
} 
```

不要忘记清除缓存`php symfony cc`，应该没问题。

# java - 如何使用命令 update-alternatives --config java

> ID：12787757
> 
> 赞同：99
> 
> 时间：2012-10-08T18:57:04.717
> 
> 标签：java, debian

我正在 Linux Debian (Squeeze) 上安装 Apache Solr。我被指示安装 sun-java jdk 1st。然后被告知我应该使用该命令`sudo update-alternatives --config java`来确保特定的 java (sun-java) 是默认运行时。然而，当我运行这个命令时，我得到：

```
There are 3 choices for the alternative java (providing /usr/bin/java).

  Selection    Path                                      Priority   Status
------------------------------------------------------------
* 0            /usr/lib/jvm/java-6-openjdk/jre/bin/java   1061      auto mode
  1            /usr/bin/gij-4.4                           1044      manual mode
  2            /usr/lib/jvm/java-6-openjdk/jre/bin/java   1061      manual mode
  3            /usr/lib/jvm/java-6-sun/jre/bin/java       63        manual mode

Press enter to keep the current choice[*], or type selection number: 
```

那么我应该选择哪个数字将 sun-java 作为默认运行时？另外，自动和手动模式到底是什么意思？如果我选择上面的 3 并运行 update-alternative 命令，我会收到与上面相同的输出，除了 * 现在在 3 前面之外似乎没有任何变化，尽管它仍然读取手动模式。

有没有办法确认我所做的是正确的？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-08T19:00:08.787

如果您在选择选项后输入“java -version”，您会注意到一个很大的变化。因此，如果您运行`update-alternatives --config java`并选择 option `3`，您将使用*Sun*实现。
此外，关于`auto`vs `manual mode`，进行选择应该从`auto mode`本页中删除，[说明](http://linux.die.net/man/8/update-alternatives)：

> 使用该`--config`选项时，替代项将列出给定名称为主链接的链接组的所有选项。然后将提示您选择哪个选项用于链接组。进行更改后，链接组将不再位于 `auto mode`. 您将需要使用该`--auto`选项才能返回到自动状态。

我相信`auto mode`当你安装第一个/唯一的 JRE/JDK 时就设置好了。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2017-11-22T10:31:15.477

假设当时已经安装了 JDK `/opt/java/jdk1.8.0_144`：

1.  安装 javac 的替代品

    ```
    $ sudo update-alternatives --install /usr/bin/javac javac /opt/java/jdk1.8.0_144/bin/javac 1 
    ```

2.  检查/更新替代配置：

    ```
    $ sudo update-alternatives --config javac 
    ```

如果您只有一个替代方案，`javac`您将收到一条消息，否则请选择新 JDK 的选项。

要检查一切是否正确设置，然后：

```
$ which javac
/usr/bin/javac

$ ls -l /usr/bin/javac
lrwxrwxrwx 1 root root 23 Sep  4 17:10 /usr/bin/javac -> /etc/alternatives/javac

$ ls -l /etc/alternatives/javac
lrwxrwxrwx 1 root root 32 Sep  4 17:10 /etc/alternatives/javac -> /opt/java/jdk1.8.0_144/bin/javac 
```

最后

```
$ javac -version
javac 1.8.0_144 
```

根据需要对 java、keytool、jar 等重复此操作。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2015-10-05T17:39:13.940

`update-alternatives`在这种情况下是有问题的，因为它会强制您根据 JDK 更新所有元素。

为此，该软件包`java-common`包含一个名为`update-java-alternatives`.

使用它很简单。首先列出您机器上可用的 JDK 安装：

```
root@mylaptop:~# update-java-alternatives -l
java-1.7.0-openjdk-amd64 1071 /usr/lib/jvm/java-1.7.0-openjdk-amd64
java-1.8.0-openjdk-amd64 1069 /usr/lib/jvm/java-1.8.0-openjdk-amd64 
```

然后拿起一个：

```
root@mylaptop:~# update-java-alternatives -s java-1.7.0-openjdk-amd64 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2018-12-23T10:24:58.477

# 这就是我安装jdk的方式

```
#!/bin/bash
cd /opt/
sudo mkdir java
sudo tar -zxvf ~/Downloads/jdk-8u192-linux-x64.tar.gz
sudo ln -s  jdk1.8.0_192 current
for file in /opt/java/current/bin/*
do
   if [ -x $file ]
   then
      filename=`basename $file`
      sudo update-alternatives --install /usr/bin/$filename $filename $file 20000
      sudo update-alternatives --set $filename $file
      #echo $file $filename
   fi
done 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2020-02-24T14:21:37.810

我正在使用 Ubuntu 18.04 LTS。大多数时候，当我更改我的`java`版本时，我也想使用相同的`javac`版本。
我使用`update-alternatives`这种方式，而是使用`java_home`替代方法：

# 安装

**安装每个 java 版本`/opt/java/<version>`，例如**

```
~$ ll /opt/java/
total 24
drwxr-xr-x 6 root root 4096 jan. 22 21:14 ./
drwxr-xr-x 9 root root 4096 feb.  7 13:40 ../
drwxr-xr-x  8 stephanecodes stephanecodes 4096 jan.   8  2019 jdk-11.0.2/
drwxr-xr-x  7 stephanecodes stephanecodes 4096 dec.  15  2018 jdk1.8.0_201/ 
```

**配置备选方案**

```
~$ sudo update-alternatives --install /opt/java/current java_home /opt/java/jdk-11.0.2/ 100
~$ sudo update-alternatives --install /opt/java/current java_home /opt/java/jdk1.8.0_201 200 
```

**声明`JAVA_HOME`（在这种情况下，我为此使用全局初始化脚本）**

```
~$ sudo sh -c 'echo export JAVA_HOME=\"/opt/java/current\" >> environment.sh' 
```

注销或重新启动 Ubuntu（这将重新加载`/etc/profile.d/environment.sh`）

# 用法

**更改java版本**

选择您要使用的版本

```
~$ sudo update-alternatives --config java_home

There are 2 choices for the alternative java_home (providing /opt/java/current).

  Selection    Path                    Priority   Status
------------------------------------------------------------
  0            /opt/java/jdk-11.0.2     200       auto mode
  1            /opt/java/jdk-11.0.2     200       manual mode
* 2            /opt/java/jdk1.8.0_201   100       manual mode

Press <enter> to keep the current choice[*], or type selection number: 
```

**检查版本**

```
~$ java -version
openjdk version "11.0.2" 2019-01-15
OpenJDK Runtime Environment 18.9 (build 11.0.2+9)
OpenJDK 64-Bit Server VM 18.9 (build 11.0.2+9, mixed mode)

~$ javac -version
javac 11.0.2 
```

**小费**

将以下行添加到`~/.bash_aliases`文件：

```
alias change-java-version="sudo update-alternatives --config java_home && java -version && javac -version" 
```

现在使用`change-java-version`命令更改java版本

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-07-08T08:24:37.330

还有许多其他二进制文件需要链接，所以我认为最好尝试类似的东西并为除and之外的所有其他东西`sudo update-alternatives --all`选择正确的替代品。`java``javac`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-04-23T12:13:46.267

如果您想定期切换 jdk（或在发布后更新到新的 jdk），使用[sdkman](https://sdkman.io/)非常方便。

您也可以使用其他工具，例如 maven 和 sdkman。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-11-08T08:14:08.727

看看 [https://wiki.debian.org/JavaPackage](https://wiki.debian.org/JavaPackage) 在此页面的底部，使用 java-common 包中的命令描述了另一种方法

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-13T05:41:42.053

我的 AWS EC2 实例上安装了 2 个版本的 java；[java 8 & 11](https://computingforgeeks.com/how-to-install-java-11-openjdk-11-on-rhel-8/) 但 couponservice-0.0.1-SNAPSHOT.jar 文件需要 java 11 才能运行，因为这个 .jar 文件是使用 java 11 创建的。

[root@ip-172-31-94-132 ~]# **Alternatives --config java**

有 2 个程序提供“java”。

选择命令

*   1 java-1.8.0-openjdk.x86_64 (/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.302.b08-0.amzn2.0.1.x86_64/jre/bin/java)

*   2 /usr/java/jdk-11.0.12/bin/java

**输入以保留当前选择[+]，或输入选择编号**：2

[root@ip-172-31-94-132 ~]# **java -version**

java 版本 "11.0.12" 2021-07-20 LTS Java(TM) SE 运行时环境 18.9 (build 11.0.12+8-LTS-237) Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.12+ 8-LTS-237，混合模式）

现在您可以运行特定于

[root@ip-172-31-94-132 ~]# **java -jar couponservice-0.0.1-SNAPSHOT.jar**

参考：- [https://www.server-world.info/en/note?os=CentOS_7&p=jdk11&f=2](https://www.server-world.info/en/note?os=CentOS_7&p=jdk11&f=2)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-28T14:12:00.097

## 安装任何打开的 jdk 后，只需运行并选择所需的 jdk：

`sudo update-alternatives --config java`

[![命令行截图](../Images/6dac04adb45cf5e08c2480de391beeb3.png)](https://i.stack.imgur.com/taJiY.png)

# c# - 如何在没有 ClickOnce 的情况下自动更新应用程序？

> ID：12787761
> 
> 赞同：41
> 
> 时间：2012-10-08T18:57:15.993
> 
> 标签：c#, deployment

对于我正在从事的项目，我不允许使用[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)。我的老板希望程序看起来“真实”（使用安装程序等）。

我已经安装了[Visual Studio 2012](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2012) Professional，并且一直在使用[InstallShield](http://en.wikipedia.org/wiki/InstallShield)安装程序，它确实是很好的安装程序，但我不知道如何使应用程序“自动更新”（即，当它启动时） up，检查以确保它使用的是最新版本）。

我被要求对代码进行微小的更改——将加法转换为减法，我真的不希望人们必须卸载旧版本，然后每次我做一个小的时候都必须重新安装新版本像这样改变。

如何让应用程序检查更新并安装它们？或者这不可能（或不容易）？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-08T19:02:22.827

已经有很多关于这个的问题，所以我会向你推荐这些。

您要确保避免卸载需要的一件事是，您在每个版本上使用相同的**升级**代码，但更改**产品**代码。这些值位于 Installshield 项目属性中。

一些参考资料：

*   [自动更新 .NET 应用程序](https://stackoverflow.com/q/819647/161052)
*   [.NET 的自动更新库？](https://stackoverflow.com/q/691663/161052)
*   [WinForms 应用程序的自动更新](https://stackoverflow.com/q/139266/161052)
*   [建议一种自动更新我的 C# 程序的方法](https://stackoverflow.com/q/555118/161052)
*   [自动更新 Windows 应用程序](https://stackoverflow.com/q/4769615/161052)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-02T00:34:58.303

[我认为您应该在 codeplex.com http://autoupdater.codeplex.com/](http://autoupdater.codeplex.com/)上查看以下项目

此示例应用程序使用 C# 开发为项目名称为“AutoUpdater”的库。DLL “AutoUpdater”可用于 C# Windows 应用程序（WinForm 和 WPF）。

AutoUpdater 有一些特性：

1.  易于实施和使用。
2.  检查更新后应用程序自动重新运行。
3.  更新过程对用户透明。
4.  避免使用多线程下载阻塞主线程。
5.  能够升级系统以及自动更新程序。
6.  不同系统使用时不需要更改的代码，可以在库中编译。
7.  便于用户下载更新文件。

如何使用？

在您想要自动更新的程序中，您只需要在 Main 过程中调用 AutoUpdate 函数即可。自动更新功能将使用从网站/FTP 中的文件读取的版本来检查版本。如果程序版本低于读取的版本，则程序下载自动更新程序并启动它，函数返回 True，这意味着将运行自动更新并关闭当前程序。自动更新程序从要更新的程序接收几个参数并执行必要的自动更新，然后启动更新的系统。

```
 #region check and download new version program
  bool bSuccess = false;
  IAutoUpdater autoUpdater = new AutoUpdater();
  try
  {
      autoUpdater.Update();
      bSuccess = true;
  }
  catch (WebException exp)
  {
      MessageBox.Show("Can not find the specified resource");
  }
  catch (XmlException exp)
  {
      MessageBox.Show("Download the upgrade file error");
  }
  catch (NotSupportedException exp)
  {
      MessageBox.Show("Upgrade address configuration error");
  }
  catch (ArgumentException exp)
  {
      MessageBox.Show("Download the upgrade file error");
  }
  catch (Exception exp)
  {
      MessageBox.Show("An error occurred during the upgrade process");
  }
  finally
  {
      if (bSuccess == false)
      {
          try
          {
              autoUpdater.RollBack();
          }
          catch (Exception)
          {
             //Log the message to your file or database
          }
      }
  }
  #endregion 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-08T19:04:59.177

最常见的方法是在您的网络服务器上放置一个简单的文本文件（XML/JSON 会更好），并使用最后一个构建版本。然后应用程序将下载此文件，检查版本并启动更新程序。典型的文件如下所示：

应用程序更新文件（**让您的应用程序识别文件类型的唯一字符串**）

版本：1.0.0（**最新汇编版本**）

下载：http: [//yourserver.com/](http://yourserver.com/) ...（**下载版本的链接**）

重定向：http: [//yournewserver.com/](http://yournewserver.com/) ...（**我使用此字段以防服务器地址更改。**）

**这会让客户知道他们需要寻找一个新地址。**

您还可以添加其他重要细节。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-29T17:17:00.743

外行人的方式是

在 Main() 上，将正在执行的程序集文件 .exe 重命名为其他内容，检查创建日期和时间。和更新的文件日期时间并复制到应用程序文件夹。

```
//Rename he executing file
System.IO.FileInfo file = new System.IO.FileInfo(System.Reflection.Assembly.GetExecutingAssembly().Location);

System.IO.File.Move(file.FullName, file.DirectoryName + "\\" + file.Name.Replace(file.Extension,"") + "-1" + file.Extension); 
```

然后进行逻辑检查并将新文件复制到执行文件夹

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-13T04:48:01.857

这是更新文件但不安装的代码 该程序是通过 dos 制作的，用于将文件复制到最新日期并自动运行您的程序。可以帮助你

打开记事本并使用 ext .bat 保存下面的文件

```
xcopy \\IP address\folder_share_name\*.* /s /y /d /q  
start "label" /b "youraplicationname.exe" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-21T11:52:13.720

现在，您可以通过将您的应用打包到 MSIX 包或包中来使用 Windows 10 中包含的称为 AppInstaller 的应用交付机制。

有了它，您不必考虑安装程序（如果您的应用程序不使用大量依赖项）、后台更新等等。它比 ClickOnce 好得多，多亏了别名，命令行的使用就像魅力一样，更新不突兀，也可以用于后台应用程序。

安装体验也更好：用户只需单击 HTML 上的一个按钮，Windows 就会自动安装该应用程序。

它不是超级简单，我会说比 ClickOnce 复杂，但不如 Wix 难。

[官方指南](https://docs.microsoft.com/en-us/windows/msix/desktop/desktop-to-uwp-packaging-dot-net)不适用于 .NET Core 或 .NET 5 应用程序，因此您可以参考[这篇文章](https://www.meziantou.net/deploying-a-dotnet-desktop-application-using-msix.htm#creating-the-msix-pa-3a8341)或[这个精彩的视频](https://www.youtube.com/watch?v=4t2TI8ImwMY)，例如。[该站点](https://www.advancedinstaller.com/msix-introduction.html)还包含许多有用的信息。

# sql - SQL 程序从一个表中查找与另一表中的所有行相关联的行

> ID：12787762
> 
> 赞同：0
> 
> 时间：2012-10-08T18:57:20.223
> 
> 标签：sql

我有三张桌子

*   电影 (mov_id(key), 姓名, 演员,...)
*   客户（cust_id（key），姓名，性别，....）
*   watch_movie (cust_id mov_id, movie_price,...)

我想找出与某个演员一起看过所有电影的所有女性顾客的姓名。

我无法为此编写 SQL 查询。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:24:12.527

```
 select c.cust_id, c.name, c.gender
     from customer c
     join movies m on m.actor = 'Actor'
left join watches_movie w on w.cust_id=c.cust_id and m.mov_id=w.mov_id
    where c.gender = 'Female'
 group by c.cust_id, c.name, c.gender
   having count(distinct m.mov_id) = count(distinct w.mov_id) 
```

分解：

1.  我想知道所有女性顾客的名字
    *   来自客户 + where c.gender = 'Female'
2.  特定演员的所有电影
    *   加入电影 + m.actor = '演员
3.  谁看过`2\. ALL the movies with a particular actor`。所以让我们找到客户/电影组合的所有watches_movie记录
    *   在客户/电影上左加入手表电影
4.  这么多记录，让我们按客户将它们分解并分组检查
    *   按 c.cust_id、c.name、c.gender 分组
    *   注意：在此处和 SELECT 中列出客户表中所需的尽可能多的列
5.  这就是我们测试这个事实的地方。如果客户已经观看了 (m) 中的所有电影，那么每个 (m) 记录都会有 (w) 记录
    *   有 count(distinct m.mov_id) = count(distinct w.mov_id)
    *   注意：我们使用 distinct 是因为客户可能会观看 3 次电影，如果没有 distinct，这将计算 3 次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:13:28.897

此查询查找所有确实不存在他们未看过的电影的客户：

```
 SELECT * FROM customer WHERE gender = 'F' AND NOT EXISTS 
     (
     SELECT * FROM movies WHERE actor = 'Particular Actor' AND  mov_id NOT IN 
     (
      SELECT mov_id FROM watches_movie WHERE cust_id = customer.cust_id
     )
     ); 
```

如果有很多数据，不会太快，但会做你想做的事。

顺便说一句，您知道存储在电影表中的演员存在标准化问题，对吗？

# asp.net-mvc-3 - 使用 formcollection 从 mvc3 视图中检索重复的下拉列表和文本字段的字符串

> ID：12787763
> 
> 赞同：0
> 
> 时间：2012-10-08T18:57:28.583
> 
> 标签：asp.net-mvc-3, formcollection

我需要帮助来创建和检索重复的选定下拉列表值及其从 mvc3 视图到控制器的相应输入十进制值。

我在下拉列表中有paycat，在MVC3视图的输入文本框中有相应的payamount（十进制）。我正在寻找一种方法来获取所选类别的字符串和相应的支付金额并将它们提交到控制器中的数据库。我试图在视图中使用

```
 @for ( var i = 0; i <4 2; i++) {

   <div class="editor-label">
        @Html.LabelFor(model => model.PId, "PayCat")
    </div>

        <div class="editor-field">
    @Html.DropDownList("PId", String.Empty)
      </div>

     <div class="editor-label">
        @Html.LabelFor(model => model.Pay)
    </div> 
      <div class="editor-field">
         @Html.EditorFor(model => model.Pay)
         } 
```

但我不知道在哪里放置索引变量 [i] 以运行代码。任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:04:17.103

我在 jquery-dynamic 表单脚本的帮助下使用了动态方法。我在需要时动态添加字段并使用表单集合来操作条目。

# linux - 如何从 Debian 上以 start-stop-daemon 启动的进程重定向进程输出？

> ID：12787768
> 
> 赞同：4
> 
> 时间：2012-10-08T18:57:56.013
> 
> 标签：linux, bash, logging, debian, start-stop-daemon

已经有几个关于此的问题，但似乎没有一个有效。我有一个当前已关闭的生产系统，我需要能够快速从守护程序获取 stderr 输出以对其进行调试。

我以为我可以从它被调用的点（在 init.d 脚本中）重定向输出，但事实证明这非常困难。

```
 start-stop-daemon -d $DDIR -b -m --start --quiet -pidfile $PIDFILE --exec $DAEMON -- \
                $DAEMON_ARGS > /var/log/daemon.log 2>&1 \
                || return 2 
```

这不起作用。我尝试运行一个调用可执行文件并重定向输出的 shell 脚本，但日志文件仍然为空（我知道该进程正在输出信息）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-24T14:13:53.357

如果您有 start-stop-daemon >= version 1.16.5，您只需调用它`--no-close`即可重定向已*启动*进程的输出。

来自`man start-stop-daemon`：

> -C，--不关闭
> 
> ```
>  Do not close any file descriptor when forcing the daemon into
>           the background (since version 1.16.5).  Used for debugging
>           purposes to see the process output, or to redirect file
>           descriptors to log the process output.  Only relevant when
>           using --background. 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T19:10:51.097

据我记得，这是不可能的，通常当我需要从守护进程获取数据时，我要么事先记录它，要么创建一个监控程序，通过网络套接字或命名管道或任何其他进程间通信机制连接到该程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-19T23:13:02.380

调用*start-stop-daemon*将`> /var/log/daemon.log 2>&1`重定向*start-stop-daemon*的输出，而**不是启动的守护进程的输出**。*start-stop-daemon*将在运行守护程序之前关闭标准输出/输入描述符。

将可执行文件包装在一个简单的 shell 脚本中，如下所示：

```
#!/bin/bash
STDERR=$1
shift
DAEMON=$1
shift
$DAEMON 2>$STDERR $* 
```

对我有用-也许您应该检查文件权限？

这个简单的解决方案有一个问题——当*start-stop-daemon*杀死这个包装器时，被包装的守护程序将保持活动状态。这在 bash 中不容易解决，因为在脚本执行期间您无法运行信号处理程序（`trap`有关详细信息，请参阅文档）。您必须编写一个看起来像这样的 C 包装器：

```
#include <fcntl.h>
#include <unistd.h>
int main(int argc, char** argv){
    int fd_err;

    fd_err = open(argv[1], O_WRONLY | O_CREAT | O_TRUNC);
    dup2(fd_err, STDERR_FILENO);
    close(fd_err);

    return execvp(argv[2], argv + 2);
} 
```

（为了清楚起见，我省略了错误检查）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T12:23:16.560

这是一个可行的解决方案（基于[此处](https://stackoverflow.com/questions/3173131/redirect-copy-of-stdout-to-log-file-from-within-bash-script-itself)给出的解决方案）。

在 init.d 脚本的开头（以及标题之后），添加以下内容：

```
exec > >(tee --append /var/log/daemon.log)

#You may also choose to log to /var/log/messages using this:
#exec > >(logger -t MY_DAEMON_NAME)

#And redirect errors to the same file with this:
exec 2>&1 
```

这将记录脚本期间调用的所有内容，包括`start-stop-daemon`输出。

# javascript - d3：在强制布局中根据节点内容可选地添加子元素

> ID：12787769
> 
> 赞同：2
> 
> 时间：2012-10-08T18:57:56.840
> 
> 标签：javascript, d3.js, force-layout

使用 d3 中的强制布局，我可以愉快地添加节点，例如，一个圆形的 SVG 组和一些文本：

```
var node = vis.selectAll(".node")
    .data(nodes)
    .enter().append("svg:g")
    .attr("class", "node");
node.append("svg:circle")
    .attr("r", 5);
node.append("svg:text")
    .text(function(d) { return d.nodetext }); 
```

但是，我想根据节点数据*选择*向组添加另一个元素：因此，如果此节点的数据包含“图像”属性，我想添加一个新的子元素（一个 svg:image ）。将 svg:image 添加到所有节点很容易（我只是按照上面的圆圈和文本进行操作）。动态更改您已经创建的元素的属性也很容易（通过将函数作为属性的值，`text`如上所述）。*只有当*数据包含属性时，我才知道如何添加`svg:image`子元素。实现这一目标的最佳方法是什么？*`image`*

 ** * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T21:21:58.073

尝试[selection.filter](https://github.com/mbostock/d3/wiki/Selections#wiki-filter)：

```
node.filter(function(d) { return d.image; }).append("image")
    .attr("xlink:href", function(d) { return d.image; })
    .attr("width", 16)
    .attr("height", 16); 
```*

# api - Youtube 和 ADFS 身份验证？

> ID：12787775
> 
> 赞同：1
> 
> 时间：2012-10-08T18:58:20.423
> 
> 标签：api, authentication, youtube, authorization, adfs

Youtube 为您的视频提供公开、不公开和私人安全设置。但是，我有很多企业视频基本上仅供企业使用，并且希望将访问权限仅限于我们的企业用户。让数千名员工各自创建一个 youtube 帐户，然后在许多视频中维护该访问列表并不是一个可维护的解决方案。

我有兴趣改用 ADFS（或 OAuth）。我想将频道配置为拥有 Youtube，对于任何私人视频，向用户的浏览器询问凭据，然后调用我的公司 ADFS 服务器来验证并根据这些凭据授权播放事件。

有谁知道此时在 Youtube 内这是否可行？或者我是否正在考虑必须创建一个自定义播放器来使用数据 API 进行这种交互？

感谢您提供的任何建议。

干杯，埃里克

# typescript - TypeScript 中对象字面量中的类型定义

> ID：12787781
> 
> 赞同：484
> 
> 时间：2012-10-08T18:58:31.110
> 
> 标签：typescript

在 TypeScript 类中，可以为属性声明类型，例如：

```
class className {
  property: string;
}; 
```

如何在对象文字中声明属性的类型？

我尝试了以下代码，但无法编译：

```
var obj = {
  property: string;
}; 
```

我收到以下错误：

> 当前范围内不存在名称“字符串”

我做错了什么还是这是一个错误？

* * *

## 回答 #1

> 赞同：560
> 
> 时间：2012-10-08T19:08:38.090

你已经很接近了，你只需`=`要用`:`. 您可以使用对象类型文字（参见规范第 3.5.3 节）或接口。使用对象类型文字接近于您所拥有的：

```
var obj: { property: string; } = { property: "foo" }; 
```

但是你也可以使用一个接口

```
interface MyObjLayout {
    property: string;
}

var obj: MyObjLayout = { property: "foo" }; 
```

* * *

## 回答 #2

> 赞同：343
> 
> 时间：2012-10-11T04:50:12.790

### 2019-05-15 更新（改进的代码模式作为替代）

经过多年使用`const`更多功能代码并从中受益后，我建议在大多数情况下不要使用以下代码。（在构建对象时，将类型系统强制为特定类型而不是让它推断类型通常表明存在问题）。

相反，我建议`const`尽可能使用变量，然后将对象组合为最后一步：

```
const id = GetId();
const hasStarted = true;
...
const hasFinished = false;
...
return {hasStarted, hasFinished, id}; 
```

*   这将正确键入所有内容，而无需显式键入。
*   无需重新键入字段名称。
*   根据我的经验，这导致了最干净的代码。
*   这允许编译器提供更多的状态验证（例如，如果您在多个位置返回，编译器将确保始终返回相同类型的对象 - 这鼓励您在每个位置声明整个返回值 - 给出一个非常清晰的该值的意图）。

### 补充 2020-02-26

如果您确实需要一种可以延迟初始化的类型：将其标记为可为空的联合类型（null 或 Type）。类型系统将阻止您在没有首先确保它具有值的情况下使用它。

在`tsconfig.json`中，确保启用严格的空检查：

`"strictNullChecks": true`

然后使用此模式并允许类型系统保护您免受意外的空/未定义访问：

```
 const state = {
    instance: null as null | ApiService,
    // OR
    // instance: undefined as undefined | ApiService,

};

const useApi = () => {
    // If I try to use it here, the type system requires a safe way to access it

    // Simple lazy-initialization 
    const api = state?.instance ?? (state.instance = new ApiService());
    api.fun();

    // Also here are some ways to only access it if it has value:

    // The 'right' way: Typescript 3.7 required
    state.instance?.fun();

    // Or the old way: If you are stuck before Typescript 3.7
    state.instance && state.instance.fun();

    // Or the long winded way because the above just feels weird
    if (state.instance) { state.instance.fun(); }

    // Or the I came from C and can't check for nulls like they are booleans way
    if (state.instance != null) { state.instance.fun(); }

    // Or the I came from C and can't check for nulls like they are booleans 
    // AND I was told to always use triple === in javascript even with null checks way
    if (state.instance !== null && state.instance !== undefined) { state.instance.fun(); }
};

class ApiService {
    fun() {
        // Do something useful here
    }
} 
```

* * *

### 在 99% 的情况下不要执行以下操作：

### 2016 年 2 月 10 日更新 - 处理 TSX（感谢 @Josh）

使用`as`TSX 的运算符。

```
var obj = {
    property: null as string
}; 
```

一个更长的例子：

```
var call = {
    hasStarted: null as boolean,
    hasFinished: null as boolean,
    id: null as number,
}; 
```

### 原始答案

使用强制转换运算符使这个简洁（通过将 null 强制转换为所需的类型）。

```
var obj = {
    property: <string> null
}; 
```

一个更长的例子：

```
var call = {
    hasStarted: <boolean> null,
    hasFinished: <boolean> null,
    id: <number> null,
}; 
```

这比有两个部分（一个声明类型，第二个声明默认值）要好得多：

```
var callVerbose: {
    hasStarted: boolean;
    hasFinished: boolean;
    id: number;
} = {
    hasStarted: null,
    hasFinished: null,
    id: null,
}; 
```

* * *

## 回答 #3

> 赞同：76
> 
> 时间：2019-05-20T08:56:05.253

我很惊讶没有人提到这一点，但您可以创建一个名为 的接口`ObjectLiteral`，它接受`key: value`类型对`string: any`：

```
interface ObjectLiteral {
  [key: string]: any;
} 
```

然后你会使用它，像这样：

```
let data: ObjectLiteral = {
  hello: "world",
  goodbye: 1,
  // ...
}; 
```

一个额外的好处是您可以根据需要多次重复使用此界面，在您想要的任意数量的对象上。

祝你好运。

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2020-04-09T17:45:46.467

您可以使用预定义的实用程序类型[**`Record<Keys, Type>`**](https://www.typescriptlang.org/docs/handbook/utility-types.html#recordkeystype)：

```
const obj: Record<string, string> = {
  property: "value",
}; 
```

它允许为您的对象文字指定键：

```
type Keys = "prop1" | "prop2"

const obj: Record<Keys, string> = {
  prop1: "Hello",
  prop2: "Aloha",
  something: "anything" // TS Error: Type '{ prop1: string; prop2: string; something: string; }' is not assignable to type 'Record<Keys, string>'.
                        //   Object literal may only specify known properties, and 'something' does not exist in type 'Record<Keys, string>'.
}; 
```

以及属性值的类型：

```
type Keys = "prop1" | "prop2"
type Value = "Hello" | "Aloha"

const obj1: Record<Keys, Value> = {
  prop1: "Hello",
  prop2: "Hey", // TS Error: Type '"Hey"' is not assignable to type 'Value'.
}; 
```

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2012-10-08T19:08:32.473

如果您尝试编写类型注释，则语法为：

```
var x: { property: string; } = { property: 'hello' }; 
```

如果您尝试编写对象文字，则语法为：

```
var x = { property: 'hello' }; 
```

您的代码试图在值位置使用类型名称。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2019-03-07T01:22:30.267

如果您尝试将类型添加到*解构*的对象文字中，例如在函数的参数中，则语法为：

```
function foo({ bar, baz }: { bar: boolean, baz: string }) {
  // ...
}

foo({ bar: true, baz: 'lorem ipsum' }); 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2017-01-08T15:05:17.067

在 TypeScript 中，如果我们声明对象，那么我们将使用以下语法：

```
[access modifier] variable name : { /* structure of object */ } 
```

例如：

```
private Object:{ Key1: string, Key2: number } 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-10-02T15:56:31.567

```
// Use ..

const Per = {
  name: 'HAMZA',
  age: 20,
  coords: {
    tele: '09',
    lan: '190'
  },
  setAge(age: Number): void {
    this.age = age;
  },
  getAge(): Number {
    return age;
  }
};
const { age, name }: { age: Number; name: String } = Per;
const {
  coords: { tele, lan }
}: { coords: { tele: String; lan: String } } = Per;

console.log(Per.getAge()); 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2021-04-23T15:08:08.940

这就是我在 2021 年使用 TypeScript 4.5 所做的事情：

```
const sm = {
  reg: {} as ServiceWorkerRegistration,
  quantum: null as number | null,
  currentCacheName: '' as string, // superfluous
  badSWTimer: 0 as number, // superfluous
} 
```

对于对象属性，这不仅仅是一个值转换，而且与接口定义的工作方式相同。

更新：我以两个多余的类型为例。也就是说，这些类型可以自动推断，因此不会产生编译器错误。

来源：[4.4 游乐场](https://www.typescriptlang.org/play?ts=4.4.4#code/MYewdgzgLgBBC2MC8MDeAoGMBOBTA5gFxoC+MAhhDAMq7YBuAlsLgOojYDWdASgY9GzkojcABpMMAI4BXcmCgz4xMDIA2ailVXwARnRgAfGKo0SswGdjwKAwuWAALXADly8XMQDkXrXCjYjGD4YjAA9GFwMgAOdABmajIgMhCSuuQAJtSsACqMHtjEAAx+OvrYoRFRsdgJSSnoJOjoVQgAdLLyiogoXhm4cUGMULhqAJ4UMABEZXRToWMxbVO+VTmO2CAA7lTkMFBjsTB0m9jooJAgarhtaiD4ABQIAJRAA)

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2019-08-05T09:06:30.743

在您的代码中：

```
var obj = {
  myProp: string;
}; 
```

您实际上是在创建一个对象文字并将变量字符串分配给属性 myProp。虽然非常糟糕的做法，但这实际上是有效的 TS 代码（不要使用它！）：

```
var string = 'A string';

var obj = {
  property: string
}; 
```

* * *

但是，您想要的是对象文字是类型化的。这可以通过多种方式实现：

**界面：**

```
interface myObj {
    property: string;
}

var obj: myObj = { property: "My string" }; 
```

**键入别名：**

```
type myObjType = {
    property: string
};

var obj: myObjType = { property: "My string" }; 
```

**对象类型文字：**

```
var obj: { property: string; } = { property: "Mystring" }; 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2021-08-27T19:51:11.573

谨防。这对某些人来说似乎很明显，但类型声明：

```
const foo: TypeName = {} 
```

与铸造相比不一样`as`：

```
const foo = {} as TypeName 
```

尽管建议在其他答案中使用它。

例子：

谢谢，类型安全！：

```
const foo: { [K in 'open' | 'closed']: string } = {}
// ERROR: TS2739: Type '{}' is missing the following properties from type '{ open: string; closed: string; }': open, closed 
```

再见，类型安全！：

```
const foo = {} as { [K in 'open' | 'closed']: string }
// No error 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-06-20T08:23:57.477

1.  使用 type 关键字创建类型

```
type ObjType = {
  property: string;
} 
```

然后您可以使用它来绑定您的对象以仅接受这种类型，如下所示。

```
const obj: ObjType = {
property: "TypeScript"
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-12-28T17:46:27.990

只是为了扩展@RickLove 的回复......

这很好用，因为您只需要定义无法推断的类型：

```
const initialState = { 
   user: undefined as User | undefined, 
   userLoading: false
}; 
```

它转译成这个 js 代码：

```
const initialState = { 
   user: undefined, 
   userLoading: false
}; 
```

如果你需要将它提取到一个类型中，你可以这样做：

```
export type InitState = typeof initialState; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-08-26T16:47:04.310

**使用 DRY 将对象文字转换为类型**

做就是了：

```
const myObject = {
   hello: 'how are you',
   hey: 'i am fine thank you'
} 
```

```
type myObjectType = keyof typeof MyObject 
```

任务完成！

# javascript - Sharepoint Web 部件菜单不显示

> ID：12787786
> 
> 赞同：1
> 
> 时间：2012-10-08T18:58:41.487
> 
> 标签：javascript, sharepoint, web-parts

我正在尝试对使用 SharePoint 构建的网站进行一些简单的更改，特别是我想编辑一个搜索小部件，它是一个“Web 部件”。（我对 SharePoint 一点也不熟悉！！！）

当我导航到网页 >> 网站操作 >> 编辑页面时，下拉箭头可用，但是当我单击它时，我收到多个 javascript 错误并且下拉列表不显示。

这些是javascript错误：

> 未捕获的 ReferenceError：未定义 OpenWebPartMenuFromLink
> 
> 未捕获的 ReferenceError：未定义 OpenWebPartMenu `

该页面似乎缺少 javascript 库。我最好的猜测是它应该包含在 default.master 中，但我不确定这是真的，我不知道应该包含什么 javascript 库。谁能指出我正确的方向？谢谢！

目前我在我的 default.master 标头中看到这些对 javascript 的引用

```
<SharePoint:ScriptLink language="javascript" name="core.js" defer="true" runat="server"/>
<SharePoint:CustomJSUrl runat="server"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T16:21:52.883

尝试在您的母版页中找到功能区 div ( `<div id="ms-designer-ribbon">`)之前的此代码

```
<!--MS:<IS:SuppressScipts runat="server"/>--> 
```

或类似的东西并删除它

我有同样的问题，它帮助了我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:27:42.023

我认为你搞砸了新的母版页。最好的办法是复制一份 V4.master 并在上面工作

# azure - 如何设置 Azure Max Spending Limit 或 Cost CAP $ 金额？

> ID：12787789
> 
> 赞同：39
> 
> 时间：2012-10-08T18:58:47.637
> 
> 标签：azure

我现在使用免费试用 Azure 帐户。

我有一个问题，当我在免费试用后转换为订阅时，如何设置最大支出限额 $ 金额或支出 CAP，例如每天 10 美元或每月 200 美元？如果达到这个最高金额，它可以自动关闭或暂时禁用我的网站，以防止对我的 Azure 网站的恶意攻击或意外使用导致我的信用卡产生大量费用。

现在 azure 仅支持免费试用 Spending Limit 为 0$，并且不能将此 0$ 金额更改为其他 $ 金额： [https ://www.windowsazure.com/en-us/pricing/spending-limits/](https://www.windowsazure.com/en-us/pricing/spending-limits/)

我已向 Azure 支持提出请求，但得到的答复是他们不知道该功能是否会在未来可用。我搜索了很多，也有很多人关心这个问题：

[我可以在 Windows Azure 中设置成本上限吗？](https://stackoverflow.com/questions/3733066/can-i-set-a-cap-on-costs-in-windows-azure)

[http://social.msdn.microsoft.com/Forums/en-ZA/windowsazurepurchasing/thread/abfd03c5-2173-4762-9dd1-2aab802e0890](http://social.msdn.microsoft.com/Forums/en-ZA/windowsazurepurchasing/thread/abfd03c5-2173-4762-9dd1-2aab802e0890)

[http://www.mygreatwindowsazureidea.com/forums/170023-offers/suggestions/1024115-provide-a-way-to-put-a-limit-on-the-cost-of-a-serv](http://www.mygreatwindowsazureidea.com/forums/170023-offers/suggestions/1024115-provide-a-way-to-put-a-limit-on-the-cost-of-a-serv)

Azure 开发路线图中是否包含此功能？

是否可以在银行设置我的 VISA 信用卡的最高消费限额？

例如，如果我的信用卡限制了自己的最高消费金额，Azure 是否可以向我收取超过信用卡的限额？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T00:45:43.447

Windows Azure 订阅具有一定的容量，具体取决于订阅类型。例如，免费订阅资源有限，超出资源限制订阅将被禁用。通过定期订阅，您的核心数量有限（您可以将它们请求到更高的限制），但大多数其他资源都是开放的，供您尽可能多地使用。SQL 数据库、缓存、服务总线和 ACS 有一定的限制，具体取决于您选择的帐户限制。

目前，您无法在 Windows Azure 帐户上设置容量限制。您不能将 Windows Azure 设置为使用低于或等于 X 数量。关于新功能和未来计划不是可以在论坛上讨论的。此类信息在必要时在适当时公开。如果这对您来说很重要并且您想被添加为功能，您可以[在此处](http://www.mygreatwindowsazureidea.com/forums/34192-windows-azure-feature-voting)记录您的想法，您的声音将会被听到。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-05-22T19:52:46.963

[此处](https://azure.microsoft.com/en-us/support/legal/offer-details/)列出了支持支出限制的订阅。[计划](https://feedback.azure.com/forums/906772-cost-management/suggestions/3238796-spending-limit-or-maximum-cost-cap-for-azure)增加即用即付订阅的限制，但已经有好几年没有更新了。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-04-12T08:07:55.933

可以在 Azure 中创建预算，如果成本达到您想要花费的金额的 90%，您可以收到一封电子邮件。月。通过这种方式，您可以手动关闭 Azure 中的服务。只需转到 Azue 门户 > 成本管理 + 计费 > 预算 > 添加 > 填写相关信息。

# finite-automata - 三态 FA 的可判定性

> ID：12787792
> 
> 赞同：0
> 
> 时间：2012-10-08T18:59:08.380
> 
> 标签：finite-automata, computation-theory

我试图弄清楚如何描述 56 个字符串来测试字母表 {ab} 上的三态 FA 是否具有有限语言。

数字 56 来自一个定理，即如果一台机器有 N 个状态，而一个字母表有 m 个字母，那么总共有 m^N + m^(N + 1) + m^(N + 2) +。 ..+ m^(2N-1) 范围内的不同输入字符串 N<= 字符串长度 < 2N。因此 2^3 2^4 2^5 = 56 个字符串。

我知道我们可以通过在机器上运行它们来测试它们，如果有任何被接受，则语言是无限的，如果没有被接受，则语言是有限的。

我只是不确定如何描述这些字符串。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T04:25:52.407

如果有人遇到同样的问题，请关注 N 到 2N - 1。我们得到：

000 001 010 011 100 101 110 111

0000 0001 0010 0011 0100 0101 0110 0111

1000 1001 1010 1011 1100 1101 1110 1111

00000 00001 00010 00011 00100 00101 00110 00111

01000 01001 01010 01011 01100 01101 01110 01111

10000 10001 10010 10011 10100 10101 10110 10111

11000 11001 11010 11011 11100 11101 11110 11111

# php - 如何使用php以以下方式打印查询结果

> ID：12787793
> 
> 赞同：-1
> 
> 时间：2012-10-08T18:59:10.360
> 
> 标签：php

我不知道如何使用 php 以以下格式打印查询结果。

我有查询结果，提供如下信息

```
 Network Channel 
  A          X
  A          Y
  A          Z
  B          P
  B          Q
  C          R 
```

我可以像上面那样显示结果。但是现在我想显示如下结果

```
Network Channel 
  A          x
             Y
             Z
  B          P
             Q
  C          R 
```

有没有办法像上面那样使用循环显示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:06:03.630

如果您有一个关联数组，我建议您这样做：

```
$last = '';
foreach ($query as $key => $value) {
  if ($key != $last) {
    echo $key;
    $last = $key;
  }
  echo $value."\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:10:26.430

我假设您从数据库中得到某种关联数组的结果。

这是一个粗略的想法；将网络值存储在“last_network”变量中，并检查它何时更改。当它改变时，打印它，否则只打印通道。

```
echo "Network  Channel";
for ($i = 0; $i < $result_qty; $i++)
{
    $this_network = $results[$i]['network'];
    $this_channel = $results[$i]['channel'];

    if ($this_network != $last_network)
    {
        echo "$this_network      $this_channel";
        $last_network = $this_network;
    }
    else
    {
        echo "      $this_channel";
    }
} 
```

# c - c中变量的声明和定义

> ID：12787796
> 
> 赞同：0
> 
> 时间：2012-10-08T18:59:21.360
> 
> 标签：c, static, initialization, declaration, extern

我理解术语声明和定义如下。

**声明：**这只是提示编译器在代码中存在指定**“名称”**和**“类型”的变量。**以便它可以在以后的时间点定义/分配

**定义：**这是通过分配合适的内存空间来创建类型实例的过程。

```
int var; //Declaration and Definition-Agreed!!!
extern int var; //Declaration only ?
static int var; //Declaration only ? 
```

我的头脑拒绝同意第二个和第三个作为**仅**声明的声明。因为在我看到的许多参考资料中，**“外部和静态变量在内存分配时自动初始化为零”**。正如您在以下代码中看到的那样。

```
#include <stdio.h>
int main()
{
   static int i;
   printf("%d\n",i);
   return 0;
} 
```

输出为 0。所以这里看起来像**静态 int i；**是声明、定义和自动初始化语句。因此，请为此添加您的理由

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T19:01:38.820

具有静态存储持续时间的对象在 C 中初始化为零。

```
static int a; // initialized by zero
int b;        // file-scope, static storage duration, initialized by zero

int main(void)
{
     int c;        // automatic storage duration, indeterminate value
     static int d; // initialized by zero
} 
```

`a`,`c`和`d`是对象的声明和定义。

`b``b`是声明和定义，因为在翻译单元结束之前没有其他文件范围出现。在翻译单元结束之前，声明是一个*暂定*定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:13:32.700

刚刚做了一个实验，得到了澄清。

```
static int i; //Declaration,Definition and Auto initialized as zero.
extern int i; //Declaration only. Will throw an error if not externally defined. 
int i; //This when declared outside any code block will be extern by default and initialised to zero 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T19:09:49.193

我希望这个例子可以消除你对 extern 的疑惑：

```
#include<stdio.h>
extern int foo;
int main(){
foo=1;
return 0;
} 
```

由于尝试将值分配给尚未分配的位置/内存，此代码会给您一个错误。现在考虑这段代码：

```
#include<stdio.h>
extern int foo = 10;
int main(){
foo=11;
return 0;
} 
```

这段代码可以正确编译，因为 C 在其中表现出某种奇怪的行为。

# algorithm - Project Euler #8：有没有比蛮力计算更有效的算法？

> ID：12787798
> 
> 赞同：5
> 
> 时间：2012-10-08T18:59:29.287
> 
> 标签：algorithm

**问题**

有没有比蛮力法更好的方法来找到 Project Euler 问题 8 的解决方案，即[Find the maximum product of 1000-digit number 。](http://projecteuler.net/problem=8)

我计算了所有可能的产品并选择了最大的产品——蛮力算法。

有没有更高效的算法？或者是蛮力方法是唯一的方法。

**旁注**

*   这不是一个家庭作业问题。
*   我不是要求问题 8 的结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T19:09:08.583

您可以使用大小为 5 的滑动窗口并在 中解决此问题`O(d)`，其中 d 是输入数字中的位数。

您通过窗口中起始编号的索引来表示窗口，窗口 i 的值是索引为 [i, i+4] 的元素的乘积。现在，在每次迭代中，您将窗口向右滑动，有效地删除最左侧的元素并在右侧添加一个新元素，并且窗口的新值为`old_value / left_most_ele * new_right_ele`. `i`继续对范围内的每个索引执行此操作`[0,d-5]`并找到最大窗口值。

请注意，内部循环运行五次的嵌套循环的蛮力方法也是一种`O(d)`解决方案。但是上面的方法稍微好一点，因为我们不是在每一步中进行五次乘法，而是进行一次乘法和一次除法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-08T19:08:57.257

由于问题要求输入*连续数字*，因此在这种情况下，“蛮力”意味着*O(n) ，* *n*是位数（1000）。只要数字中没有某种模式，只需扫描数字就需要*n*步，所以这是最快的解决方案。

您可以缓存最后 4 位的乘积或做类似的技巧，但绝对不会比*O(n)*更好。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-08T19:10:50.843

是和不是。您确实必须查看五个连续数字的每个序列，但您不必每次通过循环都将这些序列中的每一个相乘。您可以采取一些捷径来加快处理速度。例如，如果下一个数字是 0，您可以向前跳过。此外，如果下一个数字小于您从序列中删除的最后一个数字，您知道乘以其他四个常见数字的结果会更小，因此跳过乘法并转到下一个数字。当你只有 1000 位数字时，这样的技巧不会有太大的不同，但以后的问题将是相同的，只是输入更大。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-08T19:14:52.530

一种优化是计算前五个数字的乘积，并在每次迭代中乘以下一个数字并除以前一个数字（移动窗口）。

另一个优化是立即丢弃 周围的所有数字`0`。

# java - MultiActionController 请求参数为空

> ID：12787799
> 
> 赞同：1
> 
> 时间：2012-10-08T18:59:46.973
> 
> 标签：java, spring, jsp

我有以下逻辑 index.jsp ->redirect sigin.jsp -> SigninController -> admin_site.jsp 或 user_site.jsp -> MultiActionController (AdminController or UserController)

问题出现在 AdminController (a MultiActionController) 中，因为我无法读取请求参数。我究竟做错了什么？我应该怎么办？

```
<bean id="placeholderConfig"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location"
        value="WEB-INF/classes/imperialii-servlet.properties" />
</bean>

<bean id="entranceController" class="ro.imperialii.controller.EntranceController">
    <property name="utilizator">
        <ref bean="utilizator"/>
    </property>
</bean>
<bean id="utilizator" class="ro.imperialii.model.Utilizator" />
<bean id="utilizatorValidator" class="ro.imperialii.model.UtilizatorValidator" />
<bean id="utilizatorMngr" class="ro.imperialii.model.UtilizatorManager" />
<bean id="proprietateMngr" class="ro.imperialii.model.ProprietateManager" />
<bean id="tipdeproprietateMngr" class="ro.imperialii.model.Tip_de_proprietate_Manager" />
<bean id="signinFormController" class="ro.imperialii.controller.SignInController" >
    <!-- 
    <property name="sessionForm"><value>true</value></property>
    <property name="commandName"><value>logonForm</value></property>
    <property name="commandClass"><value>ro.imperialii.model.Utilizator</value></property>
    <property name="validator"><ref bean="utilizatorValidator"/></property>
    <property name="formView"><value>signin</value></property>
    -->
    <property name="sessionForm" value="true"/>
    <property name="commandName" value="user"/>
    <property name="commandClass" value="ro.imperialii.model.Utilizator"/>
    <property name="utilizatorManager">
        <ref bean="utilizatorMngr"/>
    </property>
    <property name="proprietateManager">
        <ref bean="proprietateMngr"/>
    </property>
    <property name="tip_de_proprietate_Manager">
        <ref bean="tipdeproprietateMngr"/>
    </property>
</bean>
<bean id="adminFormController" class="ro.imperialii.controller.AdminController" >
    <property name="utilizatorManager">
        <ref bean="utilizatorMngr"/>
    </property>
    <property name="tip_de_proprietate_Manager">
        <ref bean="tipdeproprietateMngr"/>
    </property>
    <property name="myutilizator">
        <ref bean="utilizator"/>
    </property>
</bean>
<bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="mappings">
        <props>
            <prop key="/signin.htm">signinFormController</prop>
            <prop key="/admin/*.htm">adminFormController</prop>
            <!--
            <prop key="/signin.htm">signinFormController</prop>
            -->
        </props>
    </property>
</bean>

<bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="basename"><value>messages</value></property>
</bean>

<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass"><value>org.springframework.web.servlet.view.JstlView</value></property>
    <property name="prefix"><value>/WEB-INF/jsp/</value></property>
    <property name="suffix"><value>.jsp</value></property>
</bean>

<!-- Database Resources and Transaction Management -->
<!--
<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url"
        value="jdbc:mysqlql://localhost:3306/imperialii" />
    <property name="username" value="root" />
    <property name="password" value="" />
</bean>
<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource"></property>
    <property name="useTransactionAwareDataSource" value="false" />
    <property name="mappingResources">
        <list>
            <value>Utilizator.hbm.xml</value>
            <value>Proprietate.hbm.xml</value>
            <value>Tip_de_proprietate.hbm.xml</value>
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="connection.pool_size">1</prop>
            <prop key="hibernate.dialect">
                org.hibernate.dialect.MySQL5Dialect
            </prop>
            <prop key="show_sql">true</prop>
            <prop key="hibernate.generate_statistics">true</prop>
            <prop key="hibernate.cglib.use_reflection_optimizer">
                false
            </prop>
        </props>
    </property>
</bean>
--> 
```

我的 admin_site.jsp：

```
<form:form method="post">
<div id="left">

<div id="sub_left">

<h3>Utilizator</h3>
<p> Nume utilizator </br>
<input id="nume_utilizator" type="text" style="width:100%; max-width: 160px;" name="nume_utilizator">
<p> Numele de familie </br>
<input id="nume" type="text" style="width:100%; max-width: 160px;" name="nume">
<p> Prenumele </br>
<input id="prenume" type="text" style="width:100%; max-width: 160px;" name="prenume">
<p> Numarul de telefon personal </br>
<input id="telefon_personal" type="text" style="width:100%; max-width: 160px;" name="telefon_personal">
<p> Numarul de telefon al firmei </br>
<input id="telefon_firma" type="text" style="width:100%; max-width: 160px;" name="telefon_firma">
<p> Parola </br>
<input id="parola" type="password" style="width:100%; max-width: 160px;" name="parola">
<p> Status activ/inactiv </br>
<select name="status">
    <option name="activ" value="activ">ACTIV</option>
    <option name="inactiv" value="inactiv">INACTIV</option>
</select>
<p> Actiuni </br>
<!--
<button id="insereaza_modifica" type="button" name="insereaza_modifica">Insereaza / Modifica</button> 
-->
<a href="admin/insereaza_u.htm">Insereaza</a></br>
<a href="admin/sterge_u.htm">Sterge</a></br>
<a href="admin/modifica_u.htm">Modifica</a>
</div> 
```

另一个奇怪的事实是，我第一次单击 insereaza_u.htm 并重新显示页面，但是当我第二次单击 modifica_u.htm 时，请求行变为：localhost/imperialii/admin/admin/modifica_u.htm（注意 2 admin小路）

AdminController 来了：

```
public class AdminController extends MultiActionController {
    protected final Log logger = LogFactory.getLog(getClass());
    private UtilizatorManager utilizatorManager;
    private Tip_de_proprietate_Manager tip_de_proprietate_Manager;
    private Utilizator myutilizator;
    private String nume;
    private String prenume;
    private String nume_de_utilizator;
    private String parola;
    private String numar_tel_personal;
    private String numar_tel_firma;
    private String status_utilizator;

    public ModelAndView insereaza_u(HttpServletRequest request, HttpServletResponse response) throws Exception {
        System.out.println("insereaza_u method called");
        nume = request.getParameter("nume");
        prenume = request.getParameter("prenume");
        nume_de_utilizator = request.getParameter("nume_utilizator");
        parola = request.getParameter("parola");
        numar_tel_personal = request.getParameter("telefon_personal");
        numar_tel_firma = request.getParameter("telefon_firma");
        status_utilizator = request.getParameter("status");
        logger.info("insereaza Request nume_utilizator " + nume_de_utilizator);
        logger.info("insereaza Request status " + status_utilizator);
        logger.info("insereaza Request ContextPath " + request.getContextPath());

        Map myMap = request.getParameterMap();

        Iterator entries = myMap.entrySet().iterator();
        while (entries.hasNext()) {
          Entry thisEntry = (Entry) entries.next();
          Object key = thisEntry.getKey();
          logger.info("insereaza Map Request Parameter " + key.toString());
          Object value = thisEntry.getValue();
          logger.info("insereaza Map Request Value " + value.toString());
          // ...
        }

        myutilizator.setNume(nume);
        myutilizator.setPrenume(prenume);
        myutilizator.setNume_de_utilizator(nume_de_utilizator);
        myutilizator.setParola(parola);
        myutilizator.setNumar_tel_personal(numar_tel_personal);
        myutilizator.setNumar_tel_firma(numar_tel_firma);
        myutilizator.setStatus_utilizator(status_utilizator);

        //utilizatorManager.saveUtilizator(myutilizator);
        myMap = listEntities();
        //return new ModelAndView("admin_site", "message", "Add method called");
        return new ModelAndView("admin_site", "model", myMap);
    }

    public ModelAndView modifica_u(HttpServletRequest request,
            HttpServletResponse response) throws Exception {
        System.out.println("modifica_u method called");
        return new ModelAndView("admin_site", "message", "Remove method called");
    } 
```

提前感谢您的任何建议！

# visual-studio - VSIX：如何要求 VS 2010 Service Pack 1

> ID：12787800
> 
> 赞同：1
> 
> 时间：2012-10-08T18:59:47.663
> 
> 标签：visual-studio, vsix

如果用户没有在他/她的 Visual Studio 中安装 Service Pack 1，我的 VSIX Visual Studio 扩展将无法正常工作。

有没有办法在没有 SP1 的情况下安装到 VS2010 时阻止安装或给出错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:36:11.370

不幸的是，似乎没有办法做到这一点。VSIX 清单架构[允许指定支持的版本](http://msdn.microsoft.com/en-us/library/dd393701%28v=vs.100%29.aspx)，但在那里提供 SP1 版本 (10.0.40219.1) 将停止 vsix 工作（它会在安装过程中出错）。

# java - Java RegEx：如何仅提取模式匹配的变量部分

> ID：12787801
> 
> 赞同：2
> 
> 时间：2012-10-08T18:59:49.633
> 
> 标签：java, regex

考虑您有以下字符串：

```
id: 1 name: Joe age: 27 id: 2 name: Mary age:22 
```

并且您想在“age：”之后提取每个标记，但不是字符串“age：”本身。

所以我希望我`Matcher`的 's`group()`返回 27 和 22 而不是 "age: 27" 和 "age:22"

有没有办法在 Java Regex 语法中指定这条指令，这似乎与 Perl 中的指令完全不同，我在 Perl 中学习了 Regex 基础知识？

这是我的代码：

```
import java.util.regex.Pattern;
import java.util.regex.Matcher;

public class RegExTest 
{
    public static void main(String[] args) 
    {
        Pattern namePtrn = Pattern.compile("age: *\\w*");

        String data = "id: 1 name: Joe age:27 id: 2 name: Mary age:22";

        Matcher nameMtchr = namePtrn.matcher(data);

        while(nameMtchr.find())
        {
            String find = nameMtchr.group();

            System.out.println ("\t" + find);
        }
    }
} 
```

在 Perl 中，我可以使用 {} 来限制我想要提取的模式部分

```
while($text =~ m/(age:{\w+})/g)
{
      my $find = $1;

      if($find)
      {
          print "\nFIND = ".$find;
      }
} 
```

会回来

```
FIND = 27
FIND = 22 
```

如果我把 {} 放在年龄左右

```
while($text =~ m/({age:\w+})/g) 
```

它会回来

```
FIND = age: 27
FIND = age:22 
```

所以我正在寻找类似 Perl 的 {} 但在 Java 中的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T19:09:03.393

如果您使用`Matcher.group(1)`而不是`Matcher.group()`您可以捕获模式减去“年龄：”：

```
String data = "id: 1 name: Joe age:27 id: 2 name: Mary age:22";
Pattern namePtrn = Pattern.compile("age:(\\w+)");
Matcher nameMtchr = namePtrn.matcher(data);

while (nameMtchr.find()) {
   String find = nameMtchr.group(1);
   System.out.println("\t" + find);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:01:59.567

尝试：

```
age:\s*(\d+) 
```

匹配 "age:" 后跟任意数量的空格，后跟一个或多个数字。数字（数值）被捕获在第一组中。

如果您想支持负年龄（即 -1 表示“年龄未知”或其他内容），您可以使用：

```
age:\s*(-?\d+) 
```

它将匹配“年龄：”，后跟任意数量的空格，后跟零或一个减号，后跟一位或多位数字。数字和可选的减号（数值）被捕获在第一组中。

如果您不确定如何让捕获组工作，[请参阅这个问题，其中有几个示例。](https://stackoverflow.com/questions/1277157/java-regex-replace-with-capturing-group)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T19:03:03.390

使用非转义括号：

```
Pattern namePtrn = Pattern.compile("age: *(\\w*)"); 
```

这将把它放在 Matcher 的第一个捕获组中。

# asp-classic - 无法将 Crystal Report 导出到 Excel 或 Word

> ID：12787805
> 
> 赞同：2
> 
> 时间：2012-10-08T19:00:12.750
> 
> 标签：asp-classic, crystal-reports, iis-6, reportviewer

将水晶报表导出到 Excel 或 Word 时，出现错误

```
CRAXDRT Error Occured on Server. 70 : Permission denied 
```

我正在使用 Crystal Report 8 和 Windows Server 2003 和 IIS 6.0 V。请帮我解决这个问题，我情况危急。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T18:14:17.060

我们在我公司遇到这个问题很长时间了。这是一个 COM+ 配置问题。我们使用以下步骤解决了它：

1 - 找到安装了组件“CREmfgen.CREmfgen.1”和“CrystalRuntime.Application.8”的 COM+ 包；检查包是否配置为“库”。从包装中取出这两个组件。

![从库包中删除组件](../Images/0c103385557ef86760ab9e707ba49a19.png)

2 - 创建一个新包，配置为“服务器”；

![创建一个新的 COM+ 应用程序](../Images/eb07fa30bcfd423a83a3dd2e7820f112.png)

3 - 取消选中“对此应用程序执行访问检查”。

![删除访问检查](../Images/f1f381e5120253a87b9b713ae8ca90c5.png)

4 - 将组件“CREmfgen.CREmfgen.1”和“CrystalRuntime.Application.8”添加到您刚刚创建的包中。路径（通常）是：

C:\Program Files\Seagate Software\Shared\Emfgen.dll

C:\Program Files\Seagate Software\Report Designer 组件\craxdrt.dll

![将组件添加到包中](../Images/f50a8de49149713a14521a26e7340934.png)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T06:14:22.787

Yes "Marcos Brigante" answer did worked for me too.. However when I look at my machine I did not see any library component already configured as said in step 1\. The machine configuration was exactly simlar to this and the error was identical too. So since there is no other way to go I went ahead starting form step 2\.

Once you did all these, the report stop generating. The report panel start showing with all the buttons but report was blank. Then when I try to export the blank report it worked and didn't give the error we had before..

So seeing some light.. I did few more stuff..

1.  In my setup I deleted all in node "Roles", and also "Legacy Compnenets" and so I made both nodes empty
2.  under property window of the COM + Application, The "Activation" tab also changed. I made it use Library Application option
3.  Once all done correctly, you should have an Identity tab which is completely disabled

Then you will get your reports to work.. so try this if you don't see anything on the COM + section

# python - 为什么这会在第 1 行之后终止？

> ID：12787808
> 
> 赞同：0
> 
> 时间：2012-10-08T19:00:24.437
> 
> 标签：python, python-3.x

我正在尝试学习 Coursera 编程入门课程，基本上只是重新输入讲座中给出的示例以确保我理解内容。

通常，这很有效，但现在我遇到了一些代码，由于某种原因在第 1 行之后终止，我不希望它这样做。

```
def convert_to_celsius(fahrenheit):
    '''(number) --> number
Return the number of Celsius degrees equivalent to fahrenheit degrees.

>>>convert_to_celsius(32)
0
>>>convert_to_celsius(212)
100
'''
    return (fahrenheit - 32) * 5 / 9 
```

这是哪里坏了？如何修复它以使其正常运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T19:02:10.970

我有点不确定你的问题是什么，但我猜你正在定义一个函数，但从不调用它。为了调用一个函数，你使用它的名字，并提供参数。例如：

```
#This next block defines the function
def convert_to_celsius(fahrenheit):
    return (fahrenheit - 32) * 5 / 9

#call/use the function
result = convert_to_celsius(100)
#print the results
print(result) 
```

# c - 四个八位字节的二进制表示

> ID：12787812
> 
> 赞同：-2
> 
> 时间：2012-10-08T19:00:39.050
> 
> 标签：c, bit-manipulation

我偶然发现了这个奇怪的问题。

我有 2 对四个八位字节。

```
1) 255.255.255.0 (like a subnet mask)
2) 128.127.0.0 (fictive mask) 
```

我的二进制表示是：

```
1) 11111111.11111111.11111111.00000000
2) 10000000.01111111.00000000.00000000 
```

但从我的简单应用程序中，我得到：

```
1) 11111111.11111111.11111111.00000000
2) 11111110.01111111.00000000.00000000 
```

我认为这是错误的值，但请纠正我，我认为我误解了其中的重要内容。

生成二进制表示的代码是：

```
#include <stdio.h>
#include <stdlib.h>

void PrintBinary(unsigned int n)
{
    unsigned int tmp;
    int i = 1;
    tmp = n;
    do{
       printf("%d", (n & tmp) ? 1 : 0);
       if(i % 8 == 0 && i < 32)
           printf(".");
       ++i;
       n >>= 1;
      }while(n>0);
    printf("\n");
}

int main(int argc, char **argv)
{
    unsigned int octet1 = 128;
    unsigned int octet2 = 127;
    unsigned int octet3 = 0;
    unsigned int octet4 = 0;
    unsigned int a = octet1 << 24 | octet2 << 16 | octet3 << 8 | octet4;
    PrintBinary(a);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:17:20.700

你的主要问题是

```
tmp = n; 
```

所以一般来说，您正在检查是否在`(n & tmp) ? 1 : 0`.

您的掩码应该只设置一位，并且您应该移动掩码，而不是值。

```
void PrintBinary(unsigned int n)
{
    unsigned int tmp = 1 << (sizeof(unsigned int) * CHAR_BIT - 1);
    int i = 1;
    do{
       printf("%d", (n & tmp) ? 1 : 0);
       if(i % 8 == 0 && i < 32)
           printf(".");
       ++i;
       tmp >>= 1;
      }while(tmp > 0);
    printf("\n");
} 
```

应该提供所需的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:17:49.017

你的`PrintBinary`功能没有多大意义。您正在`tmp`用作掩码，但`tmp`等于`n`！

相反，尝试类似

```
int i;
for(i=31; i>=0; i--) {
    printf("%d", !!(n & (1<<i)));
    if(i%8 == 0) printf(".");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T19:20:28.397

尝试：

```
void PrintBinary(unsigned int n)
{
    unsigned int tmp = n;
    for (int i = 1; i <= 32; ++i) {
       printf("%d", (tmp & 1));
       if (i % 8 == 0)
           printf(".");
       temp >>= 1;
    }
    printf("\n");
} 
```

如果您的终止条件为 (n > 0)，则不能使用`do`循环，否则当该八位字节的值小于 0x80 (128) 时，您将在第一个八位字节中丢失前导零。

# c++ - Visual Studio 2012：“应用代码更改”已禁用 C++

> ID：12787813
> 
> 赞同：0
> 
> 时间：2012-10-08T19:00:42.523
> 
> 标签：c++, visual-studio-2012

最近将我们的项目从 2010 年（winapi/desktop/c++/32bit）转换到 2012 年。

现在“应用代码更改”按钮似乎仍然处于禁用状态。同样，当我对当前正在调试的源进行更改时，我的断点变为白色（意味着由于源不匹配而未启用）。

我没有明确更改项目设置，但我已经验证这是一个调试版本，启用了“增量链接”。

有一个我不熟悉的设置是空白的“创建热补丁图像”，但我不确定这是否与调试编辑和继续有关（MSDN 不清楚，而增量链接相当明确它是必需的。[更新：这与它无关]

任何人都知道 2012 年需要什么才能完全启用 C++ 的编辑并在 2012 年继续（非托管 - 普通 C++）？

* * *

一些额外信息：桌面 GUI .exe 目标，静态链接到 MFC 和 CRT。统一码。所有库都对调试、增量链接和程序数据库进行了双重检查以进行编辑和继续。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T19:09:52.920

尝试通过删除 Debug 文件夹中的所有内容和所有生成的文件重新开始，执行“构建/清理解决方案”和“全部重建”。

编辑：作为最后的手段，请尝试阅读文档： http: [//msdn.microsoft.com/en-us/library/esaeyddf.aspx](http://msdn.microsoft.com/en-us/library/esaeyddf.aspx) Try/Tools/Options/Debugging/Edit and Continue/Ask Me First

* * *

快速回答：
+ 工具
++ 选项
+++ 调试
++++ 编辑并继续
+++++ 仅本机选项
++++++ 启用本机编辑并继续**<- 设置此项**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T05:37:45.930

我也遇到了这个问题，这里是我的方法：Project->XXXX(project name) Properties，进入C/C++->general，查看调试信息格式，右边应该是：Program Database for Edit And Continue(/齐）

# jquery - 裹 带有 jQ uery 的文本

> ID：12787816
> 
> 赞同：1
> 
> 时间：2012-10-08T19:00:52.000
> 
> 标签：jquery

我需要将文本包装在无序列表中`<span>`

尝试这个，但它似乎不起作用......

```
$('li').each(function(){
    var text = $(this).text();
    text = text.replace(/^(\w){1}/, "<span>$1</span>");
    $(this).html(text);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T19:02:36.410

你可以只使用 jQuery 的[.wrap()](http://api.jquery.com/wrap/)方法

```
$('li').each(function(){
    $(this).contents().wrap('<span></span>');       
}); 
```

[http://jsfiddle.net/7HdER/](http://jsfiddle.net/7HdER/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T19:03:41.253

您可以使用[`wrapInner`](http://api.jquery.com/wrapInner/)方法：

```
$('li').wrapInner('<span/>')​​​​​​; 
```

[http://jsfiddle.net/UrTw5/](http://jsfiddle.net/UrTw5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T19:02:54.993

```
$('li').each(function(){
    var text = $(this).text();
    text = "<span>" + text + "</span>";
    $(this).html(text);
}); 
```

# php - php mysql insert sql sql注入

> ID：12787819
> 
> 赞同：-3
> 
> 时间：2012-10-08T19:01:04.973
> 
> 标签：php, mysql, sql, sql-injection

> **可能重复：**
> [在 PHP 中防止 SQL 注入的最佳方法？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

我的代码问题很抱歉。

$yeri=无过滤器；

```
mysql_query("Insert Into deney (vid,yazan,email,yorum,ip,tarih,durum,yeri) values ('$id', '$yazan', '$email', '$yorum', '$ip', Now(),'1','$yeri')"); 
```

如何将攻击站点的数据更新到此查询？我如何获得这种预防措施。如何更新我表中的数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:07:37.867

请改用 mysqli 或 PDO。

在 pdo 中，您的代码看起来像 - 这是**SAFE**：

```
$query = $pdo->prepare("Insert Into
    deney (vid,yazan,email,yorum,ip,tarih,durum,yeri)
    values (:id, :yazan, :email, :yorum, :ip, Now(), 1, :yeri)");
$query->execute(array(
    'id' => $id,
    'yazan' => $yazan,
    'email' => $email,
    'yorum' => $yorum,
    'ip' => $ip,
    'yeri' => $yeri
)); 
```

这样 PDO 会为您进行转义，并且可以安全地防止 sql 注入。

要通过 PDO 创建 mysql 连接，请使用：

```
$pdo = new PDO("mysql:dbname=$dbname", $username, $password); 
```

我通常也会在其中添加第 4 个参数，因为我喜欢用 utf-8 编写所有代码，所以第 4 个参数就是我的例子`array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8")`。

只是为了澄清以下内容是**不安全的 - 不要使用**：

```
$pdo->prepare("Insert Into
        deney (vid,yazan,email,yorum,ip,tarih,durum,yeri)
        values ('$id', '$yazan', '$email', '$yorum', '$ip', Now(), 1, '$yeri')"); 
```

如果您坚持使用 mysql_query，但**不推荐**，您需要这样做

```
mysql_query("Insert Into deney (vid,yazan,email,yorum,ip,tarih,durum,yeri) values ('"
    . mysql_real_escape_string($id) . "', '"
    . mysql_real_escape_string($yazan) . "', '"
    . mysql_real_escape_string($email) . "', '"
    . mysql_real_escape_string($yorum) . "', '"
    . mysql_real_escape_string($ip) . "', Now(),'1','"
    . mysql_real_escape_string($yeri) . "')"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:04:32.507

如果您必须使用旧的 mysql 扩展或使用[mysqli 扩展的预处理语句，您应该使用](http://www.php.net/manual/en/mysqli.quickstart.prepared-statements.php)[mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)转义所有输入。

请注意，这些`mysql_`功能已被弃用，如果可能，您不应该使用它们（并且应该在您的情况下）。

# javascript - Metro IE10：如何检测我们是否可以使用 setHomePage()

> ID：12787820
> 
> 赞同：0
> 
> 时间：2012-10-08T19:01:07.893
> 
> 标签：javascript, internet-explorer, windows-8, microsoft-metro, internet-explorer-10

客户希望在具有此功能的浏览器上显示链接以将其页面设置为主页（我知道它是 1999 年），即基本上仅在 IE 上。

由于我想以正确且面向未来的方式进行操作，因此我想出了这个在页面加载后运行的功能。这个想法是，如果 IE11 或 IE12 停止支持它，我的代码就可以正常工作。

```
function detectSetHomePage() {
    document.body.style.behavior="url(#default#homepage)";

    if (typeof document.body.setHomePage !== "undefined") {
        $(".makeHomepage").removeClass("hidden");
        $(".makeHomepage").on("click", function() {
            document.body.setHomePage(location.href);
        });
    }
} 
```

链接在包括 10 在内的所有 IE 上按预期显示，但未在所有其他浏览器上显示。

唯一的问题是 Metro IE10。“制作主页”链接在这里，但它不起作用。单击它时没有任何反应。

那么如何修改我的“if”语句以使链接在 Metro IE10 上消失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T01:30:48.370

在桌面和 Metro 视图以及我的 IE9 上，我使用 IE10 得到了非常奇怪的结果。

在设置行为之前：

```
>> document.body.setHomePage
   undefined
>> typeof document.body.setHomePage
   "undefined" 
```

如果首先添加行为则不同：

```
>> document.body.style.behavior="url(#default#homepage)"
   "url(#default#homepage)" 
>> document.body.setHomePage
   undefined
>> typeof document.body.setHomePage
   "unknown" 
```

这种特征检测方法显然存在问题。我建议您简单地[创建一个页面](http://www.google.com/intl/en/services/hp/index.html)，向用户展示如何将该页面设为主页或找到另一种定位于 IE9 以下的方式。

**编辑**

我进行了更多搜索，但 Metro 和 Desktop 之间似乎没有足够的区别来区分它们。我能给出的最佳建议仍然是[链接到](http://www.google.com/intl/en/services/hp/index.html)包含用户步骤的页面以使其成为主页或以 ActiveX 为目标。

由于 Metro 永远不会允许 ActiveX，它将始终被排除在外，但您还将排除任何手动禁用它的桌面版本。至少它永远不会向客户呈现损坏的功能。

# ios - UITableView reloadData 什么都不做（UITableView 不是 nil）

> ID：12787821
> 
> 赞同：7
> 
> 时间：2012-10-08T19:01:13.180
> 
> 标签：ios, objective-c, uitableview, cocoa-touch, uikit

我正在构建我的第一个真正的应用程序，你们已经提供了最大的帮助，但我一直在努力解决 tableView 没有更新的问题。我希望这里的某个人可以对此有所了解，并可能对我可能错过或不必要地复杂的其他事情提出任何想法。

目前，该应用程序应该执行以下操作：

1.  用来自 sqlite db 的数据填充表（基本上只是列出所有表）
2.  用户按下按钮（触发 fetchData 方法）
3.  (void)fetchData 将本地数据库与服务器数据库校验和进行比较
4.  (void)fetchData 设置一个 NSURLConnection，通过 POST 与服务器通信
5.  当连接接收到所有数据时，它会更新本地数据库
6.  使用新的数据库数据更新 tableView 数据源（它是一个 NSMutableArray）
7.  表视图被更新并列出数据库中的所有表 [myTableView reloadData] 被调用

我仔细检查过的事情：tableview 和 delegate、datasource 和 outlet 之间的连接；tableView 不为零；数据源本身已准确更新；

一切正常到最后一点（7）。看来 myTableView当时*不为零。*想法？如果您需要查看我的更多代码，请告诉我。

我还看了一些方法 beginUpdates 和 endUpdates，但在我看来，它们一次只关注一些更改和用户交互性。我想根据用户选择重新加载整个表（即想根据当前用户登录反映整个其他 SQL 选择字符串）。还是有另一种更好的方法来做到这一点？

提前致谢！

这是一段相当不错的代码：

```
#import "FirstViewController.h"
@interface FirstViewController ()
@end

@implementation FirstViewController
#import "FirstViewController.h"

@synthesize myTextView, myTableViewDataSource, myFetchedData, resultat, tablesAndChecks, tablesArr, checksArr, tablesToRequest,receivedData, receivedDataString, SQL, sqlStatementsArr, failedSqlStatementsArr, failedSqlStatementsCodeArr, dbloop1;

#pragma mark Table view methods
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

// Customize the number of rows in the table view.
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    NSLog(@"Konfigurerar tableView"); //swedish for "Configuring tableView"
    if(myTableView.dataSource==nil){
        NSLog(@"datasource = nil");
    }else{
        NSLog(@"datasource != nil"); //This prints in log
    }
    NSLog(@"%d",[myTableViewDataSource count]); //prints "19" in log

    return [myTableViewDataSource count];
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSLog(@"calling cellForRowAtIndexPath"); //This does NOT print in log

    static NSString *CellIdentifier = @"myCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Set up the cell...
    cell.textLabel.font = [UIFont fontWithName:@"Helvetica" size:15];
    cell.textLabel.text = [NSString  stringWithFormat:@"Tabell %d: %@", [indexPath row], [myTableViewDataSource objectAtIndex:[indexPath row]]];

    return cell;
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"connection did finish loading");

    //...
    //script that receives a long SQL-string from the server
    //and then updates the database with it goes here    
    //...

    //Ok, so now the database has updated correctly, and it's time 
    //to update the tableview so that it reflects the new data.
    //
    //Get data from database...
    NSMutableArray * tempArray = [[NSMutableArray alloc] initWithCapacity:0];

    if (sqlite3_open(dbpath, &contactDB) == SQLITE_OK)
    {
        NSLog(@"Databasen öppnad");
        NSString *beginSQL = [NSString stringWithFormat: @"SELECT name FROM sqlite_master WHERE type='table' ORDER BY name;"];
        const char *begin_stmt = [beginSQL UTF8String];
        sqlite3_prepare_v2(contactDB, begin_stmt, -1, &statement, NULL);
        while(sqlite3_step(statement) == SQLITE_ROW) {
            char *col1 = (char *)sqlite3_column_text(statement, 0);
            if (col1 !=NULL){
                [tempArray addObject:[NSString stringWithUTF8String: col1]];
            }
        }
        if (sqlite3_step(statement) == SQLITE_DONE)
        {
            NSLog(@"#####%s;   Done: %@", sqlite3_errmsg(nil), beginSQL);
        } else {
            NSLog(@"#####%s;   Error with string: %@; Errcode: %d Errmsg: %s", sqlite3_errmsg(nil), beginSQL, sqlite3_errcode(contactDB), sqlite3_errmsg(nil));
        }

        NSLog(@"%d", sqlite3_finalize(statement));
        sqlite3_close(contactDB);

        //update the datasource to the values of tempArray
        myTableViewDataSource = tempArray;

        //Some logging to see that the updated data is in the array... (which it is)
        NSLog(@"myTableViewDataSource count: %d",[myTableViewDataSource count]);

        for (i=0; i<[myTableViewDataSource count]; i++) {
            NSLog(@"%@",[myTableViewDataSource objectAtIndex:i]);
        }
    }

    //Finally, check so that myTableView isn't nil and can receive messages
    if(myTableView == nil){
        NSLog(@"NILCHECK mytableview is nil!");
    }else{
        NSLog(@"NILCHECK mytableview is NOT nil!"); //This is printed out to the log
    }

    //Reload data -> nothing happens...
    [myTableView reloadData];
}

- (void)fetchData
{
    //function that gets current checksums for all db tables on the server, compares them to the local database
    //and then requests an SQL-string from the server to update the tables that needs it.
    //I don't think this is relevant for my problem, and it runs fine anyways.

    //The last thing it does is setting up a NSURLConnection to communicate with 
    //the server (sending which tables to request via POST and then getting the SQL-string as the server response)

        NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:request delegate:self];
        if (theConnection) {
            //receivedData = [NSMutableData data];
            NSLog(@"ReceivedData är: %d", [receivedData length]);
        } else {
            NSLog(@"Connection Failed!");
        }

        //All done here, now the ReceivedData method takes over

    }
} 
```

**更新：**

这是我的 viewDidLoad 方法：

```
- (void)viewDidLoad
{
    //creates database and fills "tempArray" with data

        NSLog(@"%d", sqlite3_finalize(statement));
        sqlite3_close(contactDB);

        myTableViewDataSource = tempArray;
        NSLog(@"myTableViewDataSource count: %d",[myTableViewDataSource count]);

        for (i=0; i<[myTableViewDataSource count]; i++) {
            NSLog(@"%@",[myTableViewDataSource objectAtIndex:i]);
        }

    }

    myTableView = [[UITableView alloc] initWithFrame:self.view.frame style:UITableViewStylePlain];
    myTableView.delegate = self;   //Added this after comment (1)
    myTableView.dataSource = self; //Added this after comment (2)
} 
```

更新：添加后：

```
myTableView.delegate = self;
myTableView.dataSource = self; 
```

到viewDidLoad，`tableView:numberOfRowsInSection:`调用了，dataSource不是nil，但是`tableView:cellForRowAtIndexPath:`没有调用，表也没有更新。

**更新 2：** 这是我的头文件：

```
 //
//  FirstViewController.h
//  OHBSYS Storyboards
//
//  Created by David Forsberg on 2012-09-25.
//  Copyright (c) 2012 David Forsberg. All rights reserved.
//

#import <UIKit/UIKit.h>
#import <sqlite3.h>

@interface FirstViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>{
    NSString *databasePath;
    sqlite3 *contactDB;

    UITextView *myTextView;
    UITableView *myTableView;

    NSMutableArray *myTableViewDataSource;

    NSMutableString * tableRowCount;
    NSMutableArray * dbloop1;

    //And a bunch of other variables here
}

@property (retain, nonatomic) IBOutlet UITextView *myTextView;
@property (nonatomic, retain) IBOutlet UITableView *myTableView;
@property (nonatomic, retain) IBOutlet NSMutableArray *myTableViewDataSource;

- (IBAction) fetchData;

@property (nonatomic) NSString * tableRowCount;
@property (nonatomic, retain) NSMutableArray * dbloop1;

//A bunch of other properties here as well

@end 
```

**更新 3：**

我尝试使用断点检查值。

tableview 内的断点：numberofrowsinsection：

```
(lldb) po self.myTableView
(UITableView *) $0 = 0x0d13ca00 <UITableView: 0xd13ca00; frame = (0 20; 768 1004); clipsToBounds = YES; layer = <CALayer: 0x2a3d30>; contentOffset: {0, 0}>
(lldb) po self.myTableView.delegate
(objc_object *) $1 = 0x0ce99500 <FirstViewController: 0xce99500>
(lldb) po self.myTableView.dataSource
(objc_object *) $2 = 0x0ce99500 <FirstViewController: 0xce99500>
(lldb) po self.myTableViewDataSource
(NSMutableArray *) $3 = 0x0029fb20 <__NSArrayM 0x29fb20>(
CONTACTS,
sqlite_sequence
)

(lldb) 
```

数据库更新后的断点，就在调用 reloadData 之前：

```
(lldb) po self.myTableView
(UITableView *) $4 = 0x0d13ca00 <UITableView: 0xd13ca00; frame = (0 20; 768 1004); clipsToBounds = YES; layer = <CALayer: 0x2a3d30>; contentOffset: {0, 0}>
(lldb) po self.myTableView.delegate
(objc_object *) $5 = 0x0ce99500 <FirstViewController: 0xce99500>
(lldb) po self.myTableView.dataSource
(objc_object *) $6 = 0x0ce99500 <FirstViewController: 0xce99500>
(lldb) po self.myTableView.dataSource //(accidentally hit that twice)
(objc_object *) $7 = 0x0ce99500 <FirstViewController: 0xce99500>
(lldb) po self.myTableViewDataSource
(NSMutableArray *) $8 = 0x0ce6baa0 <__NSArrayM 0xce6baa0>(
CONTACTS,
meta_tablechecksums,
prot_multicoltest,
prot_multicoltest_4,
prot_multicoltest_4_desc,
prot_multicoltest_desc,
sqlite_sequence,
superadmin_filefolders,
superadmin_files,
superadmin_imagefolders,
superadmin_images,
sys_customers,
sys_fieldlooks,
sys_fieldtypes,
sys_formtables,
sys_pages,
sys_subpages,
sys_userroles,
sys_users
)

(lldb) 
```

断点 AT​​ reloadData 行：

```
(lldb) po self.myTableView
(UITableView *) $9 = 0x0d13ca00 <UITableView: 0xd13ca00; frame = (0 20; 768 1004); clipsToBounds = YES; layer = <CALayer: 0x2a3d30>; contentOffset: {0, 0}>
(lldb) po self.myTableView.delegate
(objc_object *) $10 = 0x0ce99500 <FirstViewController: 0xce99500>
(lldb) po self.myTableView.dataSource
(objc_object *) $11 = 0x0ce99500 <FirstViewController: 0xce99500>
(lldb) po self.myTableViewDataSource
(NSMutableArray *) $12 = 0x0ce6baa0 <__NSArrayM 0xce6baa0>(
CONTACTS,
meta_tablechecksums,
prot_multicoltest,
prot_multicoltest_4,
prot_multicoltest_4_desc,
prot_multicoltest_desc,
sqlite_sequence,
superadmin_filefolders,
superadmin_files,
superadmin_imagefolders,
superadmin_images,
sys_customers,
sys_fieldlooks,
sys_fieldtypes,
sys_formtables,
sys_pages,
sys_subpages,
sys_userroles,
sys_users
)

(lldb) 
```

tableview 内的断点：numberofrowsinsection：更新数据库并运行 reloadData 命令后：

```
(lldb) po self.myTableView
(UITableView *) $13 = 0x0d13ca00 <UITableView: 0xd13ca00; frame = (0 20; 768 1004); clipsToBounds = YES; layer = <CALayer: 0x2a3d30>; contentOffset: {0, 0}>
(lldb) po self.myTableView.delegate
(objc_object *) $14 = 0x0ce99500 <FirstViewController: 0xce99500>
(lldb) po self.myTableView.dataSource
(objc_object *) $15 = 0x0ce99500 <FirstViewController: 0xce99500>
(lldb) po self.myTableViewDataSource
(NSMutableArray *) $16 = 0x0ce6baa0 <__NSArrayM 0xce6baa0>(
CONTACTS,
meta_tablechecksums,
prot_multicoltest,
prot_multicoltest_4,
prot_multicoltest_4_desc,
prot_multicoltest_desc,
sqlite_sequence,
superadmin_filefolders,
superadmin_files,
superadmin_imagefolders,
superadmin_images,
sys_customers,
sys_fieldlooks,
sys_fieldtypes,
sys_formtables,
sys_pages,
sys_subpages,
sys_userroles,
sys_users
)

(lldb) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:53:10.067

@Lefteris 是对的。你可能已经有了这个，但我看不到你的头文件。在视图控制器的头文件中，添加一个属性来维护对 tableview 的引用：

`@property (nonatomic, strong) UITableView *myTableView;`

然后在你的实现文件中：

`@synthesize myTableView = myTableView_;`

最后，在实现文件中，将所有对 tableview 的引用从`myTableView`to更改为`self.myTableView`，看看您是否突然开始获取委托回调。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T19:21:11.483

我没有看到正在合成的 myTableView。在执行 reloadData 时，是否还调用了 tableView 数据源方法？

如果没有，请仔细检查并验证 myTableView 委托是否设置正确。如果您已将 Table 正确连接到 nib 并且您有一个插座，您也可以在代码中设置它，即在 viewDidLoad 方法中，通过设置：

```
myTableView.delegate = self; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:52:33.160

The basic problem in this was a lack of a Controller in the MVC application. I read up on the basic concept and built it again from scratch - this time, the right way.

# php - 识别存储在 MySQL 中的重复标题和/或 URL（RSS 文章）

> ID：12787825
> 
> 赞同：0
> 
> 时间：2012-10-08T19:01:39.817
> 
> 标签：php, mysql, rss

我正在将来自众多 RSS 提要的文章收集到 MySQL 数据库中（只是来自实际提要的标题和链接），并且我想确保在重新检查提要时不会两次输入同一篇文章。我预计在表中存储多达 200,000 个条目。

这将是检查重复项的最佳方法：

1.  使 URL 成为数据库中的唯一字段，
2.  为每篇文章创建一个新的唯一标识符（如 SHA1 URL 和/或标题），
3.  别的东西？

编辑：感谢大家确认#1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:02:57.273

`UNIQUE`钥匙就是为此而设计的。

如果您想批量插入但可能有重复的错误，请使用`INSERT IGNORE`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:03:57.977

在您的 3 个选项中，**1**是唯一可行的选项，无需*额外*工作。

选项 2 和 3 都需要做*更多*的事情。坚持`UNIQUE`插入。

# java - Java 套接字：如何防止 java.net.BindException

> ID：12787826
> 
> 赞同：1
> 
> 时间：2012-10-08T19:01:48.773
> 
> 标签：java, sockets, serversocket

我已经实现了一个局域网游戏并在同一台计算机上进行了测试：创建一个类，在这个类的不同线程中创建一个服务器和一个客户端并连接在一起。

关闭两个窗口（客户端和服务器）并再次执行上述步骤后：运行 java 类，创建服务器和客户端。我总是遇到这个错误：（`java.net.BindException`因为这个端口之前已经创建并且还没有关闭）。

每次我创建服务器套接字时，我总是把`serverSocket.close()`. 但是那个错误仍然遇到了我。请给我一些想法来防止这种情况。

@：如果我们知道已经创建了一个端口，我们可以关闭它并创建新的吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:03:35.853

您应该将 serverSocket.close() 放在 finally 块中，并可能等待几秒钟，然后再尝试绑定到该地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T19:04:52.220

除非捕获到异常，否则不会运行任何放入 catch 块中的内容。相反，将`close()`调用放在 finally 块中以确保它始终运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-14T08:16:52.807

调用`close()`频道后可能还不够。请参阅此处的说明：http: [//hea-www.harvard.edu/~fine/Tech/addrinuse.html](http://hea-www.harvard.edu/~fine/Tech/addrinuse.html) TCP 连接可以保持在 CLOSE-WAIT 或 TIME-WAIT 状态。您可以重用地址（SO_REUSEADDR），但它对我不起作用。最好的方法是等待网络级别为 CLOSE-WAIT 或 TIME-WAIT 设置的超时。

# objective-c - obj-c 追加 plist

> ID：12787838
> 
> 赞同：1
> 
> 时间：2012-10-08T19:02:52.213
> 
> 标签：objective-c

所以我对所有这些 iOS 东西都是新手，我对将项目附加到 plist 有一些疑问。我的 plist 如下所示；

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
  <dict>
    <key>team</key>
    <string>red</string>
    <key>name</key>
    <string>Guy1</string>
  </dict>
  <dict>
    <key>team</key>
    <string>blue</string>
    <key>name</key>
    <string>Guy2</string>
  </dict>
</array>
</plist> 
```

我已经设置了一个正确的 tableview 来读取这些信息，所以我真的不打算改变 plist。

我目前设置的与[此处](https://stackoverflow.com/questions/1605310/1617071#1617071)显示的第一个答案相同。我可以编译我的代码，但没有任何修改（当我尝试追加时）。我需要进行哪些更改才能使其专门附加到上述 plist 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:14:36.863

虽然可以操作存储在属性列表中的 XML，但在 Objective-C 中加载属性列表、操作存储在其中的对象，然后将对象保存回属性列表几乎总是更容易。通过这样做，您可以避免创建无效文件的任何可能性，并且代码也更简单。

```
NSMutableArray *array = [NSMutableArray arrayWithContentsOfFile:pathToMyPropertyList];
NSDictionary *newTeam = [NSDictionary dictionaryWithObjectsAndKeys:@"green", @"team", @"Guy4", @"name", nil];
[array addObject:newTeam]
[array writeToFile:somePath atomically:YES]; 
```

# php - 将 NUSOAP 翻译成 PHP5 的 SOAPClient

> ID：12787841
> 
> 赞同：0
> 
> 时间：2012-10-08T19:03:02.237
> 
> 标签：php, soap, nusoap, soap-client

我无法在那里获得 PHP5，因为我尝试使用 NUSOAP 作为 PHP5 的 SoapClient 的替代品。

如何将此 PHP5 SoapClient 代码转换为 NUSOAP？

```
 $epay_params = array();
$epay_params['merchantnumber'] = "ENTER YOUR MERCHANT NUMBER HERE";
$epay_params['subscriptionid'] = "ENTER THE SUBSCRIPTIONID RETURNED FROM EPAY HERE";
$epay_params['orderid'] = "1234";
$epay_params['amount'] = "9995";
$epay_params['currency'] = "208";
$epay_params['instantcapture'] = "0";
$epay_params['fraud'] = "0";
$epay_params['transactionid'] = "-1";
$epay_params['pbsresponse'] = "-1";
$epay_params['epayresponse'] = "-1";

$client = new SoapClient('https://ssl.ditonlinebetalingssystem.dk/remote/subscription.asmx?WSDL');

$result = $client->authorize($epay_params);

if($result->authorizeResult == true)
{
    $transactionid = $result->transactionid;
}
else
{
    //Error - see pbsresponse and epayresponse
} 
```

我试过这样的东西，但我什么都不懂。

```
include("lib/nusoap.php");
$epay_params = array();
$epay_params['merchantnumber'] = $Payments->merchantnumber;
$epay_params['subscriptionid'] = $_POST['subscriptionname'];
$epay_params['orderid'] = $_POST['orderid'];
$epay_params['amount'] = $_POST['amount'];
$epay_params['currency'] = $_POST['currency'];
$epay_params['instantcapture'] = "0";
$epay_params['fraud'] = "0";
$epay_params['transactionid'] = "-1";
$epay_params['pbsresponse'] = "-1";
$epay_params['epayresponse'] = "-1";

$client = new nusoap_client('https://ssl.ditonlinebetalingssystem.dk/remote/subscription.asmx?WSDL','wsdl');
$client->call("transactionid", $epay_params);

echo $client->authorizeResult; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:07:09.987

您能否澄清您是否尝试删除本地服务器或远程服务器上 15 分钟前的条目？

我为我的网站针对本地 MySQL 数据库上的条目执行此操作，方法是编写一个 sql 命令，然后将其安排为 cronjob。完美运行。

如果您的问题是删除远程数据库上的记录，请确保您可以先查询它。API 可能不接受某些 SQL 语句，例如 DELETE。

# maven - 如何在maven插件中执行最后一个阶段

> ID：12787843
> 
> 赞同：0
> 
> 时间：2012-10-08T19:03:27.723
> 
> 标签：maven, plugins, maven-plugin, phase

基本上我需要我的插件来运行 POST maven 执行，无论执行了哪些阶段，但我知道这是不可能的，我必须将我的插件附加到特定阶段:-(。

但是......如果我将我的插件附加到每个可能的阶段并从插件中提取要执行的最后一个阶段，我可以自己完成，然后通过与当前阶段的简单比较，我会知道这是否是真的是最后一个阶段与否。如果这是最后一个阶段，我将执行我的插件代码。

有人知道我如何提取这些信息吗？

谢谢， 谢伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-10T15:51:39.520

Maven 支持 pre 和 post 脚本。[请参阅此处](https://stackoverflow.com/questions/7293408/can-i-instruct-maven-to-use-another-jdk-other-than-the-one-specified-at-java-hom)接受的答案。在您的情况下，它将是 mavenrc_post.bat

> 您可以通过在 /etc/mavenrc 或 ~/.mavenrc (Linux) 或 %HOME%\mavenrc_pre.bat (Windows) 创建文件来轻松做到这一点.

# sql - oracle SQL查询优化

> ID：12787846
> 
> 赞同：0
> 
> 时间：2012-10-08T19:03:35.510
> 
> 标签：sql, oracle, query-optimization

```
SELECT SHIP.SHIPID, SHIP.SHIPID_SFX, SHIP.DATE_SOURCE, SHIP.DATE_SHIP, SHIP.WT_TOTAL, SHIP.LINK, SHIP.CARR,
MBSH.MB_ID, MBSH.MB_ID_SFX
, FBIL.DATE_BILL, FBIL.DATE_CHECK, FBIL.STATUS
FROM SHIP,
     MBSH,
    SFXR,
     FBIL
WHERE SHIP.DATE_SOURCE Between '2012/08/31' And '2012/09/28' 
AND SUBSTR(SHIP.CARR,1,1) = 'C'
AND substr(SHIP.CARR,2,1) between '0' and '9' 
And SHIP.CARR not in ('7','41','11','15')
AND SHIP.MOVE_MB Is Null 
AND SHIP.SOURCE03='JDE'
And MBSH.MB_SHIPID_SFX = SHIP.SHIPID_SFX
AND MBSH.MB_SHIPID = SHIP.SHIPID
And SFXR.SHIPID = SHIP.SHIPID
And SFXR.SHIPID_SFX = SHIP.SHIPID_SFX
And SFXR.CARR = SHIP.CARR
And FBIL.BILL_ID = SFXR.BILL_ID
And FBIL.BILL_BD = SFXR.BILL_BD 
```

这是我加入 4 个表的查询。sfxr 表引用了 ship 和 bill 表。需要使用它来获取使用船舶数据的账单数据。上面的查询永远运行。是否可以优化或需要通过应用程序代码来完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:19:07.823

首先清理

将参数转换为日期

```
SHIP.DATE_SOURCE Between '2012/08/31' And '2012/09/28'    
SHIP.DATE_SOURCE Between to_date('2012/08/31','YYYY/MM/DD') And to_date('2012/09/28','YYYY/MM/DD') 
```

删除 NOT IN 值不以“C”开头，因此它是多余的。按照 Bob 的建议使用中间值。

```
AND SUBSTR(SHIP.CARR,1,1) = 'C'    
AND substr(SHIP.CARR,2,1) between '0' and '9'       
-- AND SHIP.CARR not in ('7','41','11','15') 
```

为了让我们能够帮助您，我们需要您执行以下操作：

1.  在数据库上运行统计信息（也许使用直方图）。
2.  向我们展示您在表上定义的索引
3.  然后向我们展示一个解释计划

# c# - 如何显示图像并将其作为附件添加到电子邮件

> ID：12787852
> 
> 赞同：5
> 
> 时间：2012-10-08T19:04:08.990
> 
> 标签：c#, email

我正在创建一个带有 html 正文的 System.Net.Mail 消息。我将客户签名的 jpeg 图像（来自字节数组）附加到电子邮件并发送到服务中心。服务中心希望无需打开附件即可查看签名，因此我更改了 html 并再次将图像添加为 LinkedResource。问题是，现在附件比以前大，尝试查看附件时显示错误。如果我保存附件并在十六进制编辑器中打开文件，则整个文件为空。我可以评论添加链接资源的代码，并且附件再次起作用。如何包含内嵌图像和附件？

这是我嵌入图像的标签：`<p><img src=cid:CustomerSignature /></p>`

这是我的代码：

```
System.IO.MemoryStream ms = new System.IO.MemoryStream(insuranceClaim.Signature, 0, insuranceClaim.Signature.Length);
ms.Position = 0;
System.Net.Mime.ContentType contentType = new System.Net.Mime.ContentType();
contentType.MediaType = System.Net.Mime.MediaTypeNames.Image.Jpeg;
contentType.Name = "signature.jpg";
System.Net.Mail.Attachment imageAttachment = new System.Net.Mail.Attachment(ms, contentType);
System.Net.Mime.ContentDisposition disposition = imageAttachment.ContentDisposition;
mailMessage.Attachments.Add(imageAttachment);
System.Net.Mail.LinkedResource signature = new System.Net.Mail.LinkedResource(ms, new System.Net.Mime.ContentType("image/jpeg"));
signature.ContentId = "CustomerSignature";
System.Net.Mail.AlternateView aView = System.Net.Mail.AlternateView.CreateAlternateViewFromString(mailMessage.Body, new System.Net.Mime.ContentType("text/html"));
aView.LinkedResources.Add(signature);
mailMessage.AlternateViews.Add(aView); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T15:17:23.947

我不喜欢回答我自己的问题，但如果其他人犯了同样的错误，这里就是解决方案。我用图像数据创建了一个新的 MemoryStream，并尝试在附件和 LinkedResource 之间共享流。一旦我创建了 2 个 MemoryStream，它就起作用了。

```
System.IO.MemoryStream ms = new System.IO.MemoryStream(insuranceClaim.Signature, 0, insuranceClaim.Signature.Length);
System.Net.Mime.ContentType contentType = new System.Net.Mime.ContentType();
contentType.MediaType = System.Net.Mime.MediaTypeNames.Image.Jpeg;
contentType.Name = "signature.jpg";
System.Net.Mail.Attachment imageAttachment = new System.Net.Mail.Attachment(ms, contentType);
mailMessage.Attachments.Add(imageAttachment);

System.IO.MemoryStream embeddedMs = new System.IO.MemoryStream(insuranceClaim.Signature, 0, insuranceClaim.Signature.Length);
System.Net.Mail.LinkedResource signature = new System.Net.Mail.LinkedResource(embeddedMs, new System.Net.Mime.ContentType("image/jpeg"));
signature.ContentId = "CustomerSignature";
System.Net.Mail.AlternateView aView = System.Net.Mail.AlternateView.CreateAlternateViewFromString(mailMessage.Body, new System.Net.Mime.ContentType("text/html"));
aView.LinkedResources.Add(signature);
mailMessage.AlternateViews.Add(aView); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T15:47:43.730

使用 image/jpeg 作为图像的内容类型不起作用。它尝试将图像嵌入到电子邮件中并将其转换为 base64。然后发件人、收件人和主题都被屏蔽掉了。发送电子邮件，但所有信息已损坏。

# bash - 从生成错误的脚本 WITH 命令重定向 stderr

> ID：12787853
> 
> 赞同：0
> 
> 时间：2012-10-08T19:04:20.133
> 
> 标签：bash

我有一个调用多个命令的 bash 脚本。我已使用重定向所有错误输出

```
 exec 2> logfile 
```

虽然这可行，但最好获取生成错误输入到日志文件的命令。有人有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:07:46.477

这对你有用吗？：

```
BASH_XTRACEFD="2"
set -x 
```

# php - 如何将剩余金额与停留天数相乘？如何在java脚本中做到这一点？

> ID：12787855
> 
> 赞同：0
> 
> 时间：2012-10-08T19:04:21.207
> 
> 标签：php, javascript

如何将剩余金额与停留天数相乘？如何在java脚本中做到这一点？

例如

```
function getObj(objID){

var val=document.getElementById(objID);

if (val=="") { return 0;} else { return val; }

function D(){

    var cash =document.getElementById('cash').value;    

var total =document.getElementById('total').value;

var prepaid = document.getElementById('prepaid').value;

var remain = document.getElementById('remain').value;

document.getElementById('prepaid').value= parseFloat(getObj('cash').value);

document.getElementById('remain').value = (parseFloat(getObj('prepaid').value))-(parseFloat(getObj('total').value));

    }
  ` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:06:46.383

看起来您在问这个问题之前没有进行过搜索，但在这里和其他问题中已经很好地涵盖了：[Javascript 从日期中减去天数](https://stackoverflow.com/questions/9036838/javascript-subtracting-days-from-date)

免责声明：到达此页面后，您需要向下滚动。

# c++ - 数据容器C++设计

> ID：12787858
> 
> 赞同：2
> 
> 时间：2012-10-08T19:04:32.937
> 
> 标签：c++, locking, tbb

**我的问题：如何以更好的方式设计所描述的类而不担心数据完整性？**

我有一个类 Player-Container 和 Player。Player-Container 或多或少是一个集中的播放器“数据容器”，用于许多线程，它们都具有指向此类的指针。TBB 库为只读和写入提供了锁定机制。我有一些伪代码来反映我当前的设计：

```
Class: Player-Container 
Method: CreatePlayer, RemovePlayer , LoginUser, VerifyUser

Class: Player
Method: None its a pure data container 
```

现在对我来说，我开发得越多，在“顶级容器”上拥有这些功能似乎是错误的，但我似乎没有解决这个问题，因为容器将确保我可以锁定对象，以便没有并行访问可以修改用户（例如，用户构建某些东西并发送此请求两次，资源减少两次而不是一次）。

我想拥有的：

```
Class: Player-Container
Method: CreatePlayer, RemovePlayer

Class: Player
Method: LoginUser, VerifyUser,.... 
```

我的问题，我如何实现这一点并且仍然保存数据完整性，我应该只使用 hash_map 作为“索引”并构建“播放器”级别锁定吗？有一些意见和建议会很酷。最让我烦恼的是 PlayerContainer 实际上需要了解很多关于 Player Class 的信息，如果我更改一个属性，我必须在 Container 中重新编码很多。

如果有什么不清楚的地方请询问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:46:26.413

听起来您在设计和锁定方面确实有两个问题，并且在封装和内聚方面显然存在一些设计张力。

从 api 的用户看来，只需要处理“Player-Container”类来添加/删除/登录玩家当然很好。

我会考虑在 Player-Container 上保留正面的方法以保持简单。但是，我也可能会添加辅助类或辅助函数来实现它们，以确保 Player-Container 类中的代码非常少。如果您愿意，也可以将这些作为方法添加到播放器类中。

如果您还没有阅读Scott Meyer 的[这篇](http://www.drdobbs.com/cpp/how-non-member-functions-improve-encapsu/184401197)关于在哪里放置函数的文章，那么它可能值得您花时间阅读。

第二个问题是关于锁定的，即容器或播放器类上的锁应该放在哪里。

这里有选择，但请记住，您需要同步容器和单个类中的数据。因此，如果您使用并发容器来保存播放器并避免对播放器容器类进行重量级锁定，那么您肯定需要确保播放器类是同步的，特别是如果您允许多个线程对同一个播放器进行操作。

这样做时要小心，不要将单个方法锁定在播放器上，而是锁定整个播放器，以确保您不会交错不兼容的功能，即您真的不想要LoginUser 要与 RemoveUser 在同一用户上同时运行，您可能希望它们一个接一个地序列化和运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:02:45.953

我不知道 TBB 库的特定功能，但一般来说，您可以构建类似类的东西`SharedObject<Player>`来公开`Player`实例以及可以使用 SharedObjectAccessor 对象单独访问的锁对象（例如读/写互斥锁）处理正确应用锁。

```
template<typename T>
class SharedObjectAccessor;

template<typename T>
class SharedObject
{
public:
    SharedObject(const T& initial = T())
    : managedObject(initial)
    {}

private:
    friend class SharedObjectAccessor<T>;

    const T& read() const { return managedObject; }
    T& write() { return managedObject; }
    ReadWriteMutex lock;
    T managedObject;
};

template<typename T>
class SharedObjectAccessor
{
public:
    SharedObjectAccessor(SharedObject<T>& ref)
    : sharedObject(ref)
    {}

    ~SharedObjectAccessor() { sharedObject.lock.unlock(); }

    const T& get() const
    {
        sharedObject.lock.lock_read();
        return sharedObject.read();
    }

    T& set()
    {
        sharedObject.lock.lock_write();
        return sharedObject.write();
    }

private:
    mutable SharedObject<T>& sharedObject;
}; 
```

# android - apk包名修改

> ID：12787860
> 
> 赞同：-1
> 
> 时间：2012-10-08T19:04:40.347
> 
> 标签：android, filenames, apk

我创建了一个非常基本的应用程序，并在过去将其发布到了 android 市场（例如：'com.someapp.theapp'）。我创建了一个新应用程序（version2.0），清单显示应用程序名称为 com.someapp；有没有办法修改清单，使其与我在谷歌播放中替换的应用程序的应用程序名称相匹配？

这是我收到的错误消息：“升级后的 apk 的包名称 (com.someapp.) 必须与它要替换的包名称 (com.someapp.theapp) 相同。”

所以，我想要完成的是将 com.someapp 和所有“theapp”放在 src 和 gen 名称的末尾。这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:14:27.880

你唯一需要做的就是重构你的包名。通过右键单击你的包，然后重构、重命名并命名它来做到这一点：“com.someapp.theapp”

# c# - 将参数传递给 XSLT 样式表

> ID：12787862
> 
> 赞同：12
> 
> 时间：2012-10-08T19:04:43.903
> 
> 标签：c#, xslt, transformation

我正在尝试将几个参数传递给 XSLT 样式表。我遵循了这个例子：[Passing parameters to XSLT Stylesheet via .NET](https://stackoverflow.com/questions/1521064/passing-parameters-to-xslt-stylesheet-via-net)。

但是我转换后的页面没有正确显示该值。

这是我的 C# 代码。我不得不添加一个自定义函数来执行一些算术，因为 Visual Studio 2010 不使用 XSLT 2.0。

```
 var args = new XsltArgumentList();
  args.AddExtensionObject("urn:XslFunctionExtensions", new XslFunctionExtensions());
  args.AddParam("processingId", string.Empty, processingId);

  var myXPathDoc = new XPathDocument(claimDataStream);
  var xslCompiledTransformation = new XslCompiledTransform(true);

  // XSLT File
  xslCompiledTransformation.Load(xmlReader);

  // HTML File
  using (var xmlTextWriter = new XmlTextWriter(outputFile, null))
  {
      xslCompiledTransformation.Transform(myXPathDoc, args, xmlTextWriter);
  } 
```

这是我的 XSLT：

```
 <xsl:template match="/">
    <xsl:param name="processingId"></xsl:param>
    ..HTML..
    <xsl:value-of select="$processingId"/> 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-09T12:19:10.350

> 这是我的 XSLT：
> 
> ```
> <xsl:template match="/">     
>   <xsl:param name="processingId"></xsl:param>     
>   ..HTML..     
>   <xsl:value-of select="$processingId"/> 
> ```
> 
> 我错过了什么吗？

是的，您错过了这样一个事实，即 XSLT 转换的调用者可以设置*全局级*参数的值，而不是模板级参数的值。

因此，代码必须是：

```
 <xsl:param name="processingId"/>     

 <xsl:template match="/">     
   ..HTML..     
   <xsl:value-of select="$processingId"/> 
   <!-- Possibly other processing here  -->
 </xsl:template> 
```

# php - 从字符串中的链接中删除基本 URL

> ID：12787863
> 
> 赞同：8
> 
> 时间：2012-10-08T19:04:50.117
> 
> 标签：php

我有一个带有图像链接的字符串。

```
$image_link_raw = 'http://website.com/files/2012/10/image001.png'; 
```

现在我想删除`http://website.com`，`/files/2012/10/image001.png`就像：

```
$image_link_raw = '/files/2012/10/image001.png'; 
```

有没有办法在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-08T19:07:21.093

```
$path = parse_url($url, PHP_URL_PATH); 
```

[`parse_url`](http://php.net/manual/en/function.parse-url.php)效果很好（并且可以为您提供其他详细信息，例如主机、端口、协议等。）

* * *

```
<?php

  $url = 'http://website.com/files/2012/10/image001.png';

  echo 'URL Parts:' . PHP_EOL;
  var_dump(parse_url($url));

  echo PHP_EOL . 'And specific to path:' . PHP_EOL;
  echo parse_url($url, PHP_URL_PATH); 
```

[结果输出](http://ideone.com/LM8sl)：

```
URL Parts:
array(3) {
  ["scheme"]=>
  string(4) "http"
  ["host"]=>
  string(11) "website.com"
  ["path"]=>
  string(27) "/files/2012/10/image001.png"
}

And specific to path:
/files/2012/10/image001.png 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-08T19:08:18.397

我想我们只是在给出答案吗？

```
<?php
$image_link_raw = 'http://website.com/files/2012/10/image001.png';
$p=parse_url($image_link_raw);
//print_r($p);
echo $p['path']; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-08T19:06:58.617

我会查看 php 中的[parse_url](http://php.net/manual/en/function.parse-url.php)函数，它将是`['path']`值。

# node.js - 用于 Node.js 应用程序的 Jake vs Cake？

> ID：12787866
> 
> 赞同：2
> 
> 时间：2012-10-08T19:05:03.513
> 
> 标签：node.js, jake, cakefile

我已经进行了一些基本的谷歌搜索，但没有找到任何令人信服的理由为我的 Node.js 构建过程选择 Jake 而不是 Cake（主要是在正确的文件夹中将 *.coffee 编译为 *.js）。谁能提供一些简短的要点，说明为什么一个人会选择 Jake 或 Cake 而不是另一个？

如果适用：我来自 Java、[Grails](http://en.wikipedia.org/wiki/Grails_%28framework%29)和[Ruby on Rails](http://en.wikipedia.org/wiki/Ruby_on_Rails)开发人员的角度，所以我熟悉[Ant](http://en.wikipedia.org/wiki/Apache_Ant)、mvn 和[Gradle](https://en.wikipedia.org/wiki/Gradle)、[Rake](http://en.wikipedia.org/wiki/Rake_(software))等...

*   [https://github.com/mde/jake](https://github.com/mde/jake)
*   [http://coffeescript.org/documentation/docs/cake.html](http://coffeescript.org/documentation/docs/cake.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:44:15.450

[Jake 与Rake](http://en.wikipedia.org/wiki/Rake_(software))工具非常相似，是一个真正灵活的构建工具。该文档提供了一些很好的示例来说明如何创建和执行各种任务。任务可以相互依赖，您还可以传递属性以从命令行指示构建脚本。我在我的项目中使用 Jake，并且非常喜欢它的简单性。

Cake 似乎是[CoffeeScript](http://en.wikipedia.org/wiki/CoffeeScript)的构建工具。因此，如果您使用的是 CoffeeScript，那么它可能是您项目的好工具。

我最近听到的另一个工具是[gruntjs](https://github.com/gruntjs/grunt)。与 Jake 一样，这是一个基于任务的工具，但它捆绑了许多您可以快速开始使用的任务。

# grails - drools DRL 类路径资源

> ID：12787867
> 
> 赞同：0
> 
> 时间：2012-10-08T19:05:06.040
> 
> 标签：grails, drools, drools-planner, optaplanner

我有一个带有 XMLSolverFactory 的 grails 应用程序，使用下面的代码从 ./myapp/grails-app/conf/ 加载它的 XML 配置文件。但它无法从同一路径找到 DRL 文件。如果它在容器中运行，我如何获得配置 XML 的求解器来查找类路径 .DRL 资源？

```
def InputStream stream = this.getClass().classLoader.getResourceAsStream("nurseRosteringSolverConfig.xml")
solverFactory.configure(stream); 
```

配置 XML 片段

```
<scoreDrl>nurseRosteringScoreRules.drl</scoreDrl> 
```

抛出错误

```
scoreDrl (nurseRosteringScoreRules.drl) does not exist as a classpath resource 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:01:45.080

getClass() 代码可能会作为类包的前缀。

假设你的类文件在包 org.foo.bar 中并且你的nurserRosteringScoreRules.drl 也在那个包中，那么你会写：

```
<scoreDrl>/org/foo/bar/nurseRosteringScoreRules.drl</scoreDrl> 
```

# symfony - symfony2 开发环境中的 emberjs 无法正常工作

> ID：12787868
> 
> 赞同：1
> 
> 时间：2012-10-08T19:05:05.777
> 
> 标签：symfony, ember.js

我用 symfony2 构建了一个应用程序，该应用程序公开了一个 REST Api。

现在我建立一个简单的客户端来消费

### app.coffee -> app.js

```
App = Em.Application.create
    ready: ->
        @.entradas.load()
    Entrada: Em.Object.extend()
    entradas: Em.ArrayController.create
        content: []
        load: ->
            url = 'http://localhost/api/1/entrada'
            me = @
            $.ajax(
                url: url,
                method: 'GET',
                success: (data) ->
                    me.set('content', [])
                    for entrada in data.data.objects
                        me.pushObject DBPlus.Entrada.create(entrada)
            ) 
```

### MyBundle:Home:index.html.twig

```
<script type="text/x-handlebars" src="{{ asset('js/templates/entradas.hbs') }}"></script>
<script src="{{ asset('js/libs/jquery-1.7.2.min.js') }}"></script>
<script src="{{ asset('js/libs/handlebars-1.0.0.beta.6.js') }}"></script>
<script src="{{ asset('js/libs/ember-1.0.pre.min.js') }}"></script>
<script src="{{ asset('js/app.js') }}"></script> 
```

这里的问题是当我在`dev`环境中运行并链接模板时`<script type="text/x-handlebars" src="{{...}}">`，应用程序不起作用，没有显示但在`prod`环境中工作正常。

他唯一适用于`dev`环境的方法是内联模板

### MyBundle:Home:index.html.twig

```
<script type="text/x-handlebars">
    {% raw %}
    <ul class="entradas">
      {{#each App.entradas}}
        <li class="entrada">{{nombre}}</li>
      {{/each}}
    </ul>
    {% endraw %}
</script> 
```

## config_dev.yml

# 资产配置

```
assetic:
    debug:          %kernel.debug%
    use_controller: false
    bundles:        [ ]
    #java: /usr/bin/java
    filters:
        cssrewrite: ~
        #closure:
        #    jar: %kernel.root_dir%/Resources/java/compiler.jar
        #yui_css:
        #    jar: %kernel.root_dir%/Resources/java/yuicompressor-2.4.7.jar 
```

## 可以解释为什么这种行为？

### 注意：我禁用了调试分析器工具栏，什么也没有

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:12:12.873

在开发环境中，{{asset('js/templates/entradas.hbs') }} 生成的 URL 是什么？它有效吗？由于它可能无法正常工作，您会得到哪个错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:24:31.780

使用 rake-pipeline，我使用以下代码编写了 AssetFile：

```
output BUILD_DIR
input SRC_DIR do
  match '**/*.handlebars' do
    handlebars :precompile => true
    concat 'template.js'
  end
end 
```

在我`layout.html.twig`的包括

```
<script src="{{ asset('js/template.js') }}"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T08:24:41.600

尝试更改 twig Twig_Environment

```
 $this->options = array_merge(array(
        'tag_comment'     => array('{$', '$}'),
        'tag_block'       => array('{%', '%}'),
        'tag_variable'    => array('<%', '%>'),
        'whitespace_trim' => '-',
        'interpolation'   => array('${', '}'),
    ), $options); 
```

**路径：\lib\Twig\Lexer.php**

# javascript - 选择面板 - javascript 单选按钮组

> ID：12787871
> 
> 赞同：2
> 
> 时间：2012-10-08T19:05:35.977
> 
> 标签：javascript, jquery, radio-button, radio-group

我正在寻找一种方法来修改这样的页面> [http://speckyboy.com/demo/digg-style-radio-buttons/index.html](http://speckyboy.com/demo/digg-style-radio-buttons/index.html) 以便用户可以突出显示每行的一个选择，IOW 8 单选按钮组使用类似的视觉风格，而不是传统的单选按钮控件。

最近几天，我在stackoverflow 中尝试了几乎所有处理单选按钮组的建议，但我显然不知道足够多的js 来正确调整这些建议。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:10:04.670

您不能对所有单选按钮使用相同的 id，以便它们作为一个实体工作吗？然后你可以把它们放在你喜欢的任何地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:38:37.900

只需为您的元素使用一个类 - 不确定您是否在后台使用单选按钮或不像您发布的示例

最小化的 html

```
<div id='group1' class='radio'>
Group 1
<input type='radio' name='test'/> 
</div>
<div class='row'>
    <a href='#' class='c'>group 1a</a>   
</div>​ 
```

jQuery

```
$('.row a').click(function(e){
   e.preventDefault();
   var $this = $(this);
   $this.addClass('sel') // add class to currently clicked anchor
        .siblings() // get siblings
        .removeClass('sel'); // remove class from siblings

   $('.radio').eq($('.row').index($this.parent())) // <-- get row of radios equal to this row
              .find('input[type=radio]') // find the inputs radios under this
              .eq($this.index()) // get radio with same index as clicked anchor
              .click(); // trigger click
});​ 
```

[http://jsfiddle.net/Lupw9/](http://jsfiddle.net/Lupw9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T19:12:34.713

您应该使用类（不是 ID，id 在页面上必须是唯一的）。

1 你可以获得所有单选按钮

```
$('.class') 
```

2 现在您可以`each`在此处使用更多详细信息[http://api.jquery.com/each/](http://api.jquery.com/each/)

```
 $('.class').each(function(index) {
       // Add to element
    }); 
```

3 要添加，您可以使用

[http://api.jquery.com/add/](http://api.jquery.com/add/)

[http://api.jquery.com/appendTo/](http://api.jquery.com/appendTo/)

[http://api.jquery.com/append/](http://api.jquery.com/append/)

[http://api.jquery.com/html/](http://api.jquery.com/html/)

# c - 组装说明解释

> ID：12787874
> 
> 赞同：2
> 
> 时间：2012-10-08T19:05:49.543
> 
> 标签：c, assembly, gdb

我看到这个指令：

```
*0x804a1a0(,%eax,4) 
```

我得到了 0x804a1a0 的值并添加了 $eax*4 的值，但这不是代码跳转到的地方。我使用值 0x804a1a0 本身加上 $eax*4 做了同样的事情，它指向其他地方。我如何解释上面的指令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T19:43:12.733

## 简短的回答：

你说：

> 我得到了 0x804a1a0 的值并添加了 $eax*4 的值

这是错误的。

> 我使用值 0x804a1a0 本身加上 $eax*4 做了同样的事情

这也是错误的。

您想要的是首先计算`0x804a1a0 + eax*4`，然后查看该内存位置的值。

## 长答案：

您提供的代码不是完整的指令，而是*AT&T*语法中移动/跳转/调用指令的操作数。更具体地说，它被称为*有效地址*。基本上这是一种*间接寻址*形式，这意味着将使用操作数给定位置的内存。

有效地址的*AT&T*语法是：

```
DISP(BASE,INDEX,SCALE) 
```

这应该解释为：

```
BASE + INDEX*SCALE + DISP 
```

在你的情况下，

```
0x804a1a0(,%eax,4) 
```

是真的：

```
%eax*4 + 0x804a1a0 
```

现在`*`根据[http://wiki.osdev.org/Opcode_syntax](http://wiki.osdev.org/Opcode_syntax)：

> 相对寻址：在所有跳转和调用指令中默认使用。
> 
> 要使用绝对寻址，操作数必须以星号 (*) 为前缀。

此外，来自[http://en.wikipedia.org/wiki/Addressing_mode](http://en.wikipedia.org/wiki/Addressing_mode)：

> 绝对指令地址的有效地址是未经修改的地址参数本身。

所以最终的地址其实就是 指向的位置`eax*4 + 0x804a1a0`。

如果我不得不猜测，我会说它可能是 offset 的跳转/切换表`0x804a1a0`。换句话说，代码不会在 offset 处执行`eax*4 + 0x804a1a0`，而是读取存储在该位置的地址，然后跳转到该位置（因此它是*间接跳转*）。

**边咆哮**：我真的很讨厌*AT&T*语法。如果您不熟悉汇编，您可能更喜欢 Intel 语法。我认为它更具可读性。您在 Intel 语法中的代码可能是：

```
jmp dword ptr [0x804a1a0 + eax*4] 
```

假设指令是跳转。

# javascript - 使用 Jquery 或 JavaScript 向 CSS 菜单添加延迟

> ID：12787877
> 
> 赞同：1
> 
> 时间：2012-10-08T19:05:53.280
> 
> 标签：javascript, jquery, css

首先，我想先说我对 jquery 很陌生，对 JavaScript 也很陌生。

我希望在`jquery/javascript`CSS 菜单中添加一些内容，以在选项之间创建延迟，以防止选项在用户选择它之前关闭。我做了一些研究，发现了这个[如何向 CSS 垂直下拉菜单添加延迟](https://stackoverflow.com/questions/10792903/how-to-add-a-delay-to-css-vertical-dropdown-menu)

但它似乎做了相反的事情，延迟了子菜单的打开而不是关闭。

这是我所拥有的[http://jsfiddle.net/5jd7c/6/](http://jsfiddle.net/5jd7c/6/)

请注意，如果您尝试通过对角线直接从第 1 组转到第 2 组，则会关闭该选项，而您最终会进入第 2 组。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:08:47.710

根据您所说的，我认为您需要[hoverIntent](http://cherne.net/brian/resources/jquery.hoverIntent.html) jQuery 插件。它完全符合您的描述并且非常稳定。

比从头开始容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T23:55:41.240

您需要使用上面提到的 jQuery 插件 hoverIntent。[我为jsfiddle](http://jsfiddle.net/5jd7c/8/)创建了一个快速示例

我只在工作菜单项上设置了延迟，超时时间为 1 秒（1000 毫秒），我为工作 li 添加了一个 id，为其 ui 列表添加了一个 id

希望有所帮助。

# java - Java EE - 创建通过电子邮件注册的设置

> ID：12787883
> 
> 赞同：1
> 
> 时间：2012-10-08T19:06:11.203
> 
> 标签：java, jakarta-ee

假设我有一个 Web 应用程序（Java EE 6），我想实现以下用例：

1.  在通用“注册”页面上，用户输入他/她的电子邮件并提交
2.  系统向用户发送电子邮件。在这封邮件中，应该有一个完整注册页面的链接
3.  用户点击链接，填写所需的凭据，然后提交
4.  系统将用户存入数据库，并发送确认邮件
5.  所有临时数据都被丢弃。

我遇到问题的部分主要是第2步。我需要知道的是：

1.  为用户设置个人注册页面的最佳方式是什么？我应该生成一个临时页面并链接到它吗？我应该给用户一个特殊的cookie吗？在任何一种情况下，我该如何实现呢？不需要代码，我只需要一些关于从哪里开始查找和编码的指示。

编辑：

不管我怎么做，这里一个非常重要的问题是：如何生成和部署一个临时网页？我对 Java EE 比较陌生，所以如果这有一个明显的答案，请原谅我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:11:42.747

如果注册页面是每个用户的标准页面，则无需创建临时页面并链接到它或创建特殊的 cookie 等...只需创建带有注册表单的页面并向您的客户发送指向该页面的链接.

如果您想为特定用户提供一个特殊的定制注册页面，那么您只需向您的客户发送一封带有链接的电子邮件，并将他们的信息作为查询参数（即[http://yoursite.com/registration?fname=jordan&lname =denison](http://yoursite.com/registration?fname=jordan&lname=denison)）或者您可以使用[PrettyFaces](http://ocpsoft.org/prettyfaces/)之类的东西来使 URL 更具可读性，并更容易提取这些参数并使用它们触发方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:12:49.253

如果我必须这样做，那么我会

1.  创建了一个通用注册页面
2.  为用户创建了一个唯一的 ID
3.  将包含唯一 ID 作为参数的链接发送给用户
4.  如果没有提供唯一 ID 或 ID 无效（已使用或未颁发），则注册页面将引发错误

# regex - 正则表达式表示 3 到 50 之间的美元金额

> ID：12787884
> 
> 赞同：1
> 
> 时间：2012-10-08T19:06:15.513
> 
> 标签：regex

我很接近，但我需要一些帮助来完成正则表达式。这是目标：

应该成功：

*   10.05
*   3.00
*   50

应该失败：

*   55.99 (>50)
*   3.001（最后不能有“1”）
*   0.50 (< 3)
*   .99 (< 3)
*   50 美元（不能有“$”）
*   5.2（如果是十进制，后面必须有2位）

这是我到目前为止的正则表达式，但它并不能完全正确地完成上述所有操作：

```
^([1-4][0-9]|50|[3-9])+(\.[0-9][0-9])?$ 
```

任何人都可以分享答案吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:11:16.550

```
^(50(\.00)?|([1-4][0-9]|[3-9])(\.[0-9][0-9])?)$ 
```

有两个问题。首先，您允许小数点后的非零值，即使它之前的值是 50。所以我在顶层将其分开。其次，只需删除`+`. 因为由于它，您可以拥有更大的数字（例如，通过链接`50`和`43`在一起）。

但是，正如 Bergi 在评论中提到的那样，最好只检查格式，并单独进行范围检查（不使用正则表达式）。这将是格式检查：

```
^\d+(\.\d\d)?$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:14:14.357

您应该删除`+`潜在的美分之前。此外，您需要将 50 美元作为特殊情况处理，因为它后面只能有 50 美元，`.00`而不能有任何美分金额。

另外，我将 更改`[0-9]`为数字的快捷方式：`\d`

```
/^((0?[3-9]|[1-4]\d)(\.\d\d)?|50(\.00)?)$/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T19:15:01.033

我找到了一个[在线实用程序](http://utilitymill.com/utility/Regex_For_Range/42) ，它在输入所需范围的下限和上限时返回整数的正则表达式。我将它用于`.`限制 3-50 之前和`.`限制 0-99 之后的部分。结果如下：

```
^0*([3-9]|[1-4][0-9]|50)(\.[0-9]{2})?$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T19:11:09.333

快速浏览...只需删除 +

^([1-4][0-9]|50|[3-9])(.[0-9][0-9])?$

# java - Ant 在它创建的 .jar 文件中找不到类

> ID：12787888
> 
> 赞同：0
> 
> 时间：2012-10-08T19:06:45.590
> 
> 标签：java, ant, jenkins, build-automation, testng

从 jenkins 运行构建时出现以下错误：我已将其范围缩小到 ant 或环境无法找到我的 BrowserLaunch.class 文件，“没有来自该文件的日志”，因此它说没有这样的方法。但是，我不知道为什么！我让这些测试在使用 Eclipse 的不同环境中工作，但不是使用 Ant + Jenkins + TestNG + Java。有任何想法吗 ？我有一个 selenium 网格在与 jenkins 构建服务器不同的 VM 上运行，他们可以 ping...远程 webdriver 代码指向网格集线器。我认为这可能是权限，但所有类文件都具有相同的 rw 访问权限。所有必要的类都在我从 ANT 构建的 .jar 中。

```
AILED CONFIGURATION: @BeforeTest beforeTest(org.testng.TestRunner@108c35f3)
   [testng] java.lang.NoSuchMethodError:genericscripts.driverscripts.BrowserLaunch.createDriver(Ljava/lang/String;)Lorg/openqa/selenium/WebDriver;
   [testng]     tests.ManagementTests.beforeTest(Unknown Source)
   [testng]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
   [testng]     at              sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
   [testng]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
   [testng]     at java.lang.reflect.Method.invoke(Method.java:601)
   [testng]     at   org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:76)
   [testng]     at org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:525)
   [testng]     at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:202)
   [testng]     at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:130)
   [testng]     at org.testng.TestRunner.beforeRun(TestRunner.java:624)
   [testng]     at org.testng.TestRunner.run(TestRunner.java:592)
   [testng]     at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
   [testng]     at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:312)
   [testng]     at org.testng.SuiteRunner.privateRun(SuiteRunner.java:274)
   [testng]     at org.testng.SuiteRunner.run(SuiteRunner.java:223)
   [testng]     at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
   [testng]     at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
   [testng]     at org.testng.TestNG.runSuitesSequentially(TestNG.java:1039)
   [testng]     at org.testng.TestNG.runSuitesLocally(TestNG.java:964)
   [testng]     at org.testng.TestNG.run(TestNG.java:900)
   [testng]     at org.testng.TestNG.privateMain(TestNG.java:1182)
   [testng]     at org.testng.TestNG.main(TestNG.java:1146)
   [testng] 
   [testng] SKIPPED: createTenanttests(org.testng.TestRunner@108c35f3)
   [testng] 
   [testng] ===============================================
   [testng]     Test
   [testng]     Tests run: 1, Failures: 0, Skips: 1
   [testng]     Configuration Failures: 1, Skips: 0
   [testng] =============================================== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T19:16:25.533

我在文件系统上有重复的类，而 ant 构建文件正在选择旧的，而不是新的。一旦被删除，我就克服了那个错误，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T07:53:06.047

`tests.ManagementTests.beforeTest`您为编译提供的类与您为测试运行时提供的类之间必须存在差异。很难说没有看到这两个目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T19:12:26.397

事实上，ant 找到了类但与方法不匹配。

确保项目中的 BrowserLaunch.class 版本不超过一个。

# c++ - 使用运算符重载添加两个多项式错误

> ID：12787889
> 
> 赞同：0
> 
> 时间：2012-10-08T19:06:49.713
> 
> 标签：c++, debugging, operator-overloading

我正在编写一个程序来添加两个多项式。我已经包含了一个重载的`operator=`和`operator+`. 这是代码：

```
#include<iostream>
using namespace std;
#define MAX 30

class poly{
public:
    int arr[MAX][2];
    int count;
    poly():count(0){}
    poly(int x){
        cout<<"Enter the number of terms:\t";
        cin>>count;
        cout<<"Enter the terms:\n";
        for( int i=0; i<count; i++){
            for( int j=0; j<2; j++)
                cin>>arr[i][j];
        }
    }
    void swap( int a[2], int b[2]){
        int temp1 = a[1], temp2 = a[0];
        a[1] = b[1]; a[0] = b[0];
        b[0] = temp1; b[1] = temp2;
    }

    void sorting(){
        for( int i=0; i<count-1; i++){
            for( int j=0; j<count-i-1; j++){
                if( arr[j][1] > arr[j+1][1])
                    swap(arr[j], arr[j+1]);
            }
        }
    }

    poly& operator=(poly &obj){
        count = obj.count;
        for( int i=0; i<count; i++){
            arr[i][0] = obj.arr[i][0];
            arr[i][1] = obj.arr[i][1];
        }
        return *this;
    }

    poly operator+(poly &obj){
        poly obj3;
        int i = 0, j = 0, k=0;
        while( i<count && j<obj.count){
            if( arr[i][1] == obj.arr[j][1]){
                obj3.arr[k][1] = arr[i][1];
                obj3.arr[k][0] = arr[i][0] + obj.arr[j][1];
                i++; j++;k++;
            }
            else if( arr[i][1] < arr[j][1]){
                obj3.arr[k][1] = arr[i][1];
                obj3.arr[k][0] = arr[i][0];
                i++;k++;
            }
            else{
                obj3.arr[k][1] = obj.arr[j][1];
                obj3.arr[k][0] = obj.arr[j][0];
                j++;k++;
            }
        }
        while( i<count){
            obj3.arr[k][1] = arr[i][1];
            obj3.arr[k][0] = arr[i][0];
            i++;k++;
        }
        while( j<obj.count){
            obj3.arr[k][1] = obj.arr[j][1];
            obj3.arr[k][0] = obj.arr[j][0];
            j++;k++;
        }
        return obj3;
    }

    void display(){
        cout<<"The expression is:\t";
        cout<<arr[0][0]<<"y"<<arr[0][1];
        for( int i=1; i<count; i++)
            cout<<"+"<<arr[i][0]<<"y"<<arr[i][1];
        cout<<endl;
    }
};

int main(){
    poly obj(5), obj1(3), obj3;
    obj.display();
    obj1.display();
    obj3 = obj;
    obj3 = (obj + obj1);
    obj3.sorting();
    obj3.display();
    return 0;
} 
```

我假设多项式在用户输入时按其幂的递增顺序排列。但是编译的时候会报错：

```
In function ‘int main()’:
error: no match for ‘operator=’ in ‘obj3 = obj. poly::operator+(((poly&)(& obj1)))’
note: candidates are: poly& poly::operator=(poly&) 
```

当我重载时，为什么会发生此错误`operator=`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:10:20.253

`poly::operator=`的参数是引用并`poly::operator+`返回一个*临时*对象。您不能对临时对象进行非常量引用。

做你的`operator=`参考`const`：

```
//---------------vvvvv
poly& operator=( const poly &obj){ 
```

# javascript - CKEditor 插件设置类

> ID：12787891
> 
> 赞同：4
> 
> 时间：2012-10-08T19:06:57.227
> 
> 标签：javascript, plugins, colors, ckeditor, wysiwyg

我想做的是类似于本机前景色/背景色对话框的东西。不同之处在于，它将直接在工具栏中具有带有颜色的按钮。所以一个插件必须有多个按钮，具有不同的样式（颜色）。另一个问题是，这个原生插件设置了 CSS`color`和`background-color`属性。我需要改用类，如下所示：

```
text <span class="fg red">colored text</span> text 
```

和

```
text <span class="bg blue">colored background</span> text 
```

`fg`单击颜色必须使用类（和背景颜色 -`bg`类）更改跨度的颜色

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T22:11:37.360

首先，您必须添加自己的按钮。检查执行此操作的任何插件的来源 - 例如[`basicstyles/plugin.js`](https://github.com/ckeditor/ckeditor-dev/blob/master/plugins/basicstyles/plugin.js)。您必须为每个按钮创建命令，然后注册所有按钮。简单的。

然后我建议使用我们的样式实现。它允许从给定的选择/范围中应用/删除定义的样式。在样式定义中，您可以指定它将应用`span`具有给定类的元素。检查[此样式](https://github.com/ckeditor/ckeditor-dev/blob/master/styles.js#L59)定义。

最后一步 - 将这些东西结合在一起。与按钮关联的命令应应用/删除此样式。[这里](https://github.com/ckeditor/ckeditor-dev/blob/master/plugins/basicstyles/plugin.js#L22)有准备使用的一检查`CKEDITOR.styleCommand`用法。

您需要的一切都在`basicstyles`插件中，所以请参考那里。

波兹德拉姆 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T22:53:31.493

如果您对界面很灵活，您可以将您的样式添加到[“样式”选择器](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Styles)。

这将比创建自己的插件少。特别是如果您使用 CKEditor 3.6 或更高版本，您可以使用新的[Stylesheet Parser Plugin](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Styles#Stylesheet_Parser_Plugin)。

* * *

[欢迎您使用您要求我查看此问题](https://stackoverflow.com/a/7685232/751619)的答案中的插件。

它基于“basicstyles”插件。如果您查看我包含的评论，您会发现您可以使用它来添加多个按钮和多种样式。

```
// This "addButtonCommand" function isn't needed, but
// would be useful if you want to add multiple buttons 
```

您将多次调用该`addButtonCommand`方法。

```
addButtonCommand( 'Fg_red'   , 'Label'   , 'fg_red'   , config.coreStyles_fg_red );
addButtonCommand( 'Bg_blue'   , 'Label'   , 'bg_blue'   , config.coreStyles_bg_blue ); 
```

插件代码之后的最后一行代码是您添加到配置中的内容。您可以使用任何您喜欢的属性：

```
CKEDITOR.config.coreStyles_fg_red = { element : 'span', attributes : { 'class': 'fg red' } };
CKEDITOR.config.coreStyles_bg_blue = { element : 'span', attributes : { 'class': 'bg blue' } }; 
```

* * *

您还可以基于“colorbutton”插件创建一个插件。它创建本机前景色/背景色对话框。

# eclipse - Cassandra Eclipse Maven 项目

> ID：12787895
> 
> 赞同：0
> 
> 时间：2012-10-08T19:07:09.177
> 
> 标签：eclipse, maven, cassandra

我会为 cassandra 设置我的 eclipse maven 项目，但我不知道我使用的是哪种原型。对此有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:20:21.603

我没有任何原型可以分享，但这里有一个 pom 文件，您可以使用它来开始。它具有 hadoop、pig 和 json 依赖项，如果你愿意，你可以摆脱它。由于 hector 不再在 cassandra-all 中，因此您必须单独添加它。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.wakawaka</groupId>
  <artifactId>gore.access</artifactId>
  <version>0.0.1-SNAPSHOT</version>
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <version>2.2</version>
                <configuration>
                    <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>
                    </descriptorRefs>
                </configuration>
            </plugin>
        </plugins>
    </build>
  <dependencies>
    <dependency>
        <groupId>org.apache.hadoop</groupId>
        <artifactId>hadoop-core</artifactId>
        <version>1.0.1</version>
        <type>jar</type>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.cassandra</groupId>
        <artifactId>cassandra-all</artifactId>
        <version>1.1.2</version>
    </dependency>
    <dependency>
        <groupId>org.apache.pig</groupId>
        <artifactId>pig</artifactId>
        <version>0.10.0</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.json</groupId>
        <artifactId>json</artifactId>
        <version>20090211</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>me.prettyprint</groupId>
        <artifactId>hector-core</artifactId>
        <version>1.0-1</version>
    </dependency>
  </dependencies>
</project> 
```

# mysql - 如何根据 MySQL 中最后插入的 PK 匹配指定基于时间的范围？

> ID：12787897
> 
> 赞同：0
> 
> 时间：2012-10-08T19:07:10.737
> 
> 标签：mysql

如果这对某些人来说是一个非常简单的问题，我深表歉意。

假设我正在使用 PK 查找查询一个非常简单的表：

*   用户 ID -> int (PK)
*   正文 -> varchar
*   时间 -> 整数

时间是标准的 UNIX 时间戳。（从纪元开始的秒数）

我想从该用户 ID 的 LAST 条目中返回一个月的结果。

现在一个明显的解决方案是在其他地方跟踪最近插入的时间，并在每次插入/删除或更新记录时更新它，并根据该值执行范围查询。

因此我的问题是：是一种更简单/优雅的方法吗？我的想法是正确的，还是 MySQL 中有一些我不知道的内置功能？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:19:04.747

没有这样的内置功能。你需要做的（除非你做你已经建议的那个额外的表）是做一个自我加入。像（未经测试，从我的头顶）

```
select * 
  from [yourtable] t1
  join [yourtable] t2 
 using (userid)
 where t1.userid = [userid] 
   and t1.time is between t2.time and date_sub(t2.time, interval 1 month); 
```

# jquery - 创建 twitter bootstrap 拆分按钮单选组

> ID：12787900
> 
> 赞同：0
> 
> 时间：2012-10-08T19:07:26.570
> 
> 标签：jquery, twitter-bootstrap

给定下面的代码。如何将每个选项按钮创建为同一个按钮单选组的一部分？

```
<div class="row">

    <div class="plan-option span3 well">
        <h3 class="plan-option-title">Product Name</h3>
        <div class="plan-pricing">
            <p class="plan-price">$x<span class="small"> one-time</span></p>
            <div class="signup-btn">
                <button type="button" class="btn-large btn-block btn" >select</button>
            </div>
        </div>
    </div>

    <div class="plan-option span3 well">
        <h3 class="plan-option-title">Product Name</h3>
        <div class="plan-pricing">
            <p class="plan-price">$x<span class="small"> one-time</span></p>
            <div class="signup-btn">
                <button type="button" class="btn-large btn-block btn" >select</button>
            </div>
        </div>
    </div>

    <div class="plan-option span3 well">
        <h3 class="plan-option-title">Product Name</h3>
        <div class="plan-pricing">
            <p class="plan-price">$x<span class="small"> one-time</span></p>
            <div class="signup-btn">
                <button type="button" class="btn-large btn-block btn" >select</button>
            </div>
        </div>
    </div>

    <div class="plan-option span3 well">
        <h3 class="plan-option-title">Product Name</h3>
        <div class="plan-pricing">
            <p class="plan-price">$x<span class="small"> one-time</span></p>
            <div class="signup-btn">
                <button type="button" class="btn-large btn-block btn" >select</button>
            </div>
        </div>
    </div>

</div> 
```

我尝试将所有内容包装在 btn-group div 中，但这不起作用。我也尝试将 data-toggle="buttons-radio" 添加到每个按钮，但这不起作用。

目标是为只有一个按钮处于活动状态的计划提供一个选择器按钮。这是否必须使用自定义 jquery 来完成，或者可以通过 twitter bootstrap 中的按钮组和按钮收音机来完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:40:17.530

您需要做的就是从[这里](http://twitter.github.com/bootstrap/assets/js/bootstrap-button.js)包含 bootstrap-button.js ，它应该会处理其余的事情。

[请在此处](http://jsfiddle.net/dhirajbodicherla/JqEkD/)找到演示

**编辑**：对于这种特殊情况，btn 组附近的文本会消失，因为引导程序在 btn 组内将字体大小设置为 0px。如果需要将文本放置在 btn-group 中，则可以使用标签代替。

演示更新

我希望这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:35:23.663

您要做的只是使用 JQuery 并将类“.active”添加到您单击的按钮，然后检查其中哪一个具有“.active”类 onSubmit。

见[jsfiddle](http://jsfiddle.net/nTeU3/3/)

# objective-c - 自定义 NSTableView 与自定义 NSTableCellView？

> ID：12787906
> 
> 赞同：7
> 
> 时间：2012-10-08T19:07:55.183
> 
> 标签：objective-c, macos, cocoa, nstableview, nstablecellview

我想用自定义的 NSTableCellViews 创建一个 NSTableview。

这是我现在所拥有的：

*   名为**CustomCell.xib的单元格（视图 nib）的 nib 文件**
*   我的单元格的自定义类称为**CustomCell**
*   我的**AppDelegate.m**中的代码：

在这里，我以编程方式创建表视图：

```
 NSScrollView *tableContainer = [[NSScrollView alloc]initWithFrame:NSMakeRect(self.window.frame.size.width-TABLEWIDTH, 0, TABLEWIDTH, self.window.frame.size.height)];
    NSTableView *tableView = [[NSTableView alloc] initWithFrame:NSMakeRect(self.window.frame.size.width-TABLEWIDTH, 0, TABLEWIDTH, self.window.frame.size.height)];

    NSTableColumn *firstColumn = [[[NSTableColumn alloc] initWithIdentifier:@"firstColumn"] autorelease];
    [[firstColumn headerCell] setStringValue:@"First Column"];
    [tableView  addTableColumn:firstColumn];

    tableView.dataSource = self;
    tableView.delegate = self;
    [tableContainer setDocumentView:tableView];
    tableContainer.autoresizingMask = NSViewHeightSizable | NSViewMinXMargin;
    [self.window.contentView addSubview: tableContainer]; 
```

这是我想放置自定义单元代码的委托方法：

```
- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {

    // In IB the tableColumn has the identifier set to the same string as the keys in our dictionary
    NSString *identifier = [tableColumn identifier];

    if ([identifier isEqualToString:@"myCell"]) {

        // We pass us as the owner so we can setup target/actions into this main controller object
        CustomCell *cellView = [tableView makeViewWithIdentifier:identifier owner:self];
        // Then setup properties on the cellView based on the column
        cellView.textField.stringValue = @"Name";
        return cellView;
    }
    return nil;
} 
```

在我的自定义单元格的 nib 文件中，我已将单元格视图与名为**CustomCell的自定义类连接起来，该类是****NSTableCellView**的子类。到目前为止，我还没有完成任何其他步骤。所以我的**CustomCell.m**只是默认的初始化代码。我没碰过。而且我没有在我的 nib 文件中做任何其他事情，所以我没有更改文件的所有者或类似的东西，因为我真的不知道该怎么做。任何人都可以帮忙吗？我查看了 Apple 文档中的示例文件，但经过几天的研究，我没有找到任何解决方案。如果您能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T17:41:23.117

这就是我最终做的事情：

当然，你必须继承 NSTableCellView 并像我在下面那样返回它。如果您熟悉 iOS 中的表格视图，您应该熟悉以下方法：

```
- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView{
    //this will be called first. It will tell the table how many cells your table view will have to display
    return [arrayToDisplay count];

}

- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {

    //this is called after the count of rows is set. It will populate your table according to the data your array to display contains

    [tableView setTarget:self];
    [tableView setAction:@selector(click)];

    NSString *identifier = [tableColumn identifier];

    if ([identifier isEqualToString:@"TheCell"]) {

        CustomCell *cellView = [tableView makeViewWithIdentifier:identifier owner:self];
        cellView.cellText.stringValue = [arrayToDisplay objectAtIndex:row];
        return cellView;
    }

    return nil;
} 
```

选择行时触发的`click`方法如下所示：

```
-(void)click{

    int index = [table selectedRow];

    // Do something with your data 
    //e.g
    [[arrayToDisplay objectAtIndex:index] findHiggsBoson]; 

} 
```

还有一些必须添加到 NSTableView 中的东西：

```
NSTableColumn *column = [[NSTableColumn alloc] initWithIdentifier:@"column"];
column.width = self.frame.size.width;
[tableView addTableColumn:column]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T13:26:21.870

你不需要继承 NSTableView 来拥有自定义的 NSTableViewCell 子类。您也可以考虑使用基于视图的表视图...

# java - 简单的 getColumnName(0) 调用抛出无效的列索引：getValidColumnIndex

> ID：12787909
> 
> 赞同：11
> 
> 时间：2012-10-08T19:08:06.040
> 
> 标签：java, sql, oracle, jdbc

我正在尝试编写一个 JTable，它从 ResultSet 获取数据并使用它来创建一个动态大小的表，其中包含来自 ResultSet 的适当列名和行数据值，但我无法让 JDBC 为我动态获取列名.

我知道我的选择语句很好！我可以使用我编写的 ResultPrinter 类轻松打印结果，但由于某种原因我似乎无法获取列名。

代码： http: [//pastebin.com/SSNdCkNu](http://pastebin.com/SSNdCkNu)

输出：

```
Connected to DB!  
SNUM, SNAME, STATUS, CITY, SUPPLIERS_ID_SEQ // printed by static Suppliers class
Columns: 5 // result set shows there are 5 valid columns as expected
Exception in thread "main" java.sql.SQLException: Invalid column index: getValidColumnIndex
at oracle.jdbc.driver.OracleResultSetMetaData.getValidColumnIndex(OracleResultSetMetaData.java:138)
at oracle.jdbc.driver.OracleResultSetMetaData.getColumnName(OracleResultSetMetaData.java:306)
at Main.main(Main.java:15) 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-08T19:10:19.753

JDBC 列索引从 1 开始，而不是 0。尽可能使用列名检索数据，以避免对结果中列顺序的硬依赖。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T11:33:46.057

列索引从 1 开始。因此，将指向列变量的变量增加 1。

# php - 如何在 Apache 服务器中使用外部 IP 地址

> ID：12787911
> 
> 赞同：0
> 
> 时间：2012-10-08T19:08:16.913
> 
> 标签：php, apache

大家好，我是使用 apache 服务器的新手。

现在 Apache 服务器使用我的“内部 IP 地址”，但我希望它使用我的“外部 IP 地址”来公开我的网页。我应该如何更改“httpd.conf”文件才能做到这一点？

我现在有

听 80

但是当我将其更改为：“侦听外部 ip：80”时，我只会收到错误消息“请求的操作失败”

请你帮助我好吗

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:11:56.913

`Listen 80`将导致 Apache 侦听它正在运行的机器上的所有接口，因此它已经在侦听您的外部（到您的机器）接口以及您的环回（内部）接口。

如果您想让它在 NAT 设置的另一端可用，那么您需要在路由器上配置端口转发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:19:01.970

您应该将任何“80 HTTP”请求端口转发到运行 Apache 的主机 IP 地址。此过程因您的路由器制造商而异。Apache 只能在运行 Apache 的本地机器上监听。您不能将 Apache 配置为在任何其他设备上侦听传入的“80”请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T19:12:06.537

您不能绑定到未分配给系统接口之一的地址。绑定到*这些*地址之一，并将请求从外部地址转发到该接口。

# ios - iOS：WebView 加载 url

> ID：12787914
> 
> 赞同：13
> 
> 时间：2012-10-08T19:08:25.760
> 
> 标签：ios, xcode, url, uiwebview

我正在尝试打开以下网址，`UIWebView`但在将其更改为时无法加载：

```
 http://www.google.com 
```

工作正常。

我要加载的网址是：

```
[webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@%@%@%@%@",@"http://m.forrent.com/search.php?address=",[[bookListing objectForKey:@"Data"] objectForKey:@"zip"],@"&beds=&baths=&price_to=0#{\"lat\":\"0\",\"lon\":\"0\",\"distance\":\"25\",\"seed\":\"1622727896\",\"is_sort_default\":\"1\",\"sort_by\":\"\",\"page\":\"1\",\"startIndex\":\"0\",\"address\":\"",[[bookListing objectForKey:@"Data"] objectForKey:@"zip"],@"\",\"beds\":\"\",\"baths\":\"\",\"price_to\":\"0\"}"]]]]; 
```

更新：

我故意转义了双引号，否则它会给我一个错误。我通过在我的浏览器中打开（在笔记本电脑上）检查了 url，它工作得很好：

浏览器中的网址：

```
http://m.forrent.com/search.php?address=92115&beds=&baths=&price_to=0#{%22lat%22:%220%22,%22lon%22:%220%22,%22distance%22:%2225%22,%22seed%22:%221622727896%22,%22is_sort_default%22:%221%22,%22sort_by%22:%22%22,%22page%22:%221%22,%22startIndex%22:%220%22,%22address%22:%2292115%22,%22beds%22:%22%22,%22baths%22:%22%22,%22price_to%22:%220%22} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-08T19:53:57.237

您的代码行看起来很复杂，但基本上它是一个非常简单的代码。

您应该将此代码从单行拆分为更具可读性的多行。这也将允许您记录并检查您实际创建的 URL，如下所示：

`NSLog(@"My url: %@", urlString);`

更新：我看到你添加了完整的网址。Webview 确实无法加载该 url（UIWebkit 错误 101）。

导致问题的 url 部分是参数中的“#”字符和字典。您应该对 url 的那部分进行 url 编码。

尝试这个：

```
NSString *address = @"http://m.forrent.com/search.php?";
NSString *params1 = @"address=92115&beds=&baths=&price_to=0";

// URL encode the problematic part of the url.
NSString *params2 = @"#{%22lat%22:%220%22,%22lon%22:%220%22,%22distance%22:%2225%22,%22seed%22:%221622727896%22,%22is_sort_default%22:%221%22,%22sort_by%22:%22%22,%22page%22:%221%22,%22startIndex%22:%220%22,%22address%22:%2292115%22,%22beds%22:%22%22,%22baths%22:%22%22,%22price_to%22:%220%22}";
params2 = [self escape:params2];

// Build the url and loadRequest
NSString *urlString = [NSString stringWithFormat:@"%@%@%@",address,params1,params2];
[self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlString]]]; 
```

我使用的转义方法：

```
- (NSString *)escape:(NSString *)text
{
    return (__bridge NSString *)CFURLCreateStringByAddingPercentEscapes(NULL,
                                                                        (__bridge CFStringRef)text, NULL,
                                                                        (CFStringRef)@"!*'();:@&=+$,/?%#[]",
                                                                        kCFStringEncodingUTF8);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:37:47.443

我会尝试对您的网址中的所有键/值项进行编码。特别是花括号 ({}) 和井号 (#) 符号可能会导致问题。

# google-apps-script - Apps 脚本库权限

> ID：12787915
> 
> 赞同：4
> 
> 时间：2012-10-08T19:08:26.693
> 
> 标签：google-apps-script

当我创建一个访问电子表格并在脚本中使用它的 Apps 脚本库时，我收到一个权限错误（对于以下示例中的 setValue）。如果我在脚本中调用一次相同的电子表格函数（然后将其删除）然后调用库函数，我将永远不会再次获得权限错误（它是可重现的）。

你有没有经历过这样的行为，如果有，你是如何解决这个问题的？

谢谢

**图书馆**

```
function addRecord(ss, sheetName) {
  var sheet = ss.getSheetByName(sheetName);
  sheet.getRange("A1:A1").setValue("Hello World!");
} 
```

**剧本**

```
function myFunction() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  MyLib.addRecord(ss, "Sheet1");
} 
```

**错误消息**
“您没有调用 setValue 所需的权限”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T22:16:51.987

您的脚本必须具有与库所需的相同授权：如果您知道库读取/写入电子表格或日历（或其他），您必须为这些服务授权脚本。您可以使用一些（甚至是虚拟的）函数很容易地做到这一点，该函数将告诉系统调用所需服务的授权过程。根据您的描述，我猜系统在您保存脚本时不会检查库中的内容，因此脚本在未经授权的情况下写入电子表格是一种“惊喜”。如果您包含我在脚本之前提到的（虚拟）调用，脚本将知道您将要做什么并在第一次运行尝试时请求授权。

希望我足够清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T16:13:01.977

要关闭这个 - Stefan 报告的问题已被确认为问题。我们正在调查此事。库未正确吸收传入电子表格的权限。

Stefan -如果您愿意，请随时创建关于[问题跟踪器的报告。](http://code.google.com/p/google-apps-script-issues/issues/list)

# html - 使 facebook like box 调整为图像大小

> ID：12787917
> 
> 赞同：1
> 
> 时间：2012-10-08T19:08:33.340
> 
> 标签：html, css

这是我当前代码的一个小提琴，用于上下文：http: [//jsfiddle.net/GgvLQ/](http://jsfiddle.net/GgvLQ/)

我有一个客户希望一组 Facebook 链接始终与链接左侧的图像底部对齐，无论图像大小如何。我尝试将除图像之外的所有内容都包装在一个 div 中，将最小高度设置为客户端将使用的最小图像，并将链接绝对定位到包装器的底部（相对定位），但随后图像只是与链接重叠当尺寸很大时。我现在不确定该怎么做。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:36:00.580

我将点赞按钮放置在您的图片下方。然后根据图像大小`position: absolute;`进行调整。

不知道你必须做多少，但在这里你：http: [//jsfiddle.net/stillb4llin/GgvLQ/1/](http://jsfiddle.net/stillb4llin/GgvLQ/1/)

如果你不是在找这个，请告诉我。

# android - 如何检查生成的 DTMF 音是否正确（使用 Android 手机）？

> ID：12787918
> 
> 赞同：0
> 
> 时间：2012-10-08T19:08:37.053
> 
> 标签：android, dtmf

我有一个电路可以产生对应于 1、2、3 等的 DTMF 信号……我也可以看到 CRO 上的波形。我还使用了一个扬声器，它产生与每个键对应的这些 DTMF 音调。有没有办法我可以使用这些音调使用我的安卓手机拨打任何号码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:32:03.730

您可能需要记录音调并进行软件解码，然后转身使用 android API 来调用检测到的号码。

环境中的声音不会像拨打固定电话那样拨打手机。您可能仍然可以通过向音频输入中注入音调来激活应答后服务，但是 GSM 等移动编解码器可能会在存在任何环境噪声的情况下使音调失真，因此可能效果不佳。

# windows - 如何在后台播放视频？

> ID：12787920
> 
> 赞同：0
> 
> 时间：2012-10-08T19:08:43.703
> 
> 标签：windows

如何在后台播放视频？我有一条从电脑连接到电视的 hdmi 到 hdmi 电缆。我想玩。一切正常，我可以将视频从我的电脑播放到电视，但问题是我需要在视频仍然从我的电脑播放到电视时使用我的电脑，以便在我的电脑上做其他工作。有没有办法使用我的浏览器在后台播放视频来播放视频？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:11:43.980

我不知道您使用的是哪个操作系统，但您应该能够启用多显示器显示。它在窗口中显示和外观。这将允许您出于独立的原因使用这两个屏幕。

# javascript - 使用 JavaScript 的 XSL 参数

> ID：12787925
> 
> 赞同：0
> 
> 时间：2012-10-08T19:09:06.337
> 
> 标签：javascript, html, xml, xslt, xslt-2.0

我有一个像这样的html页面：

```
<html>
<head>
<script>
function loadXMLDoc(dname)
{
if (window.XMLHttpRequest)
  {
  xhttp=new XMLHttpRequest();
  }
else
  {
  xhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xhttp.open("GET",dname,false);
xhttp.send("");
return xhttp.responseXML;
}

function displayResult()
{
xml=loadXMLDoc("1.xml");
xsl=loadXMLDoc("2.xsl");
// code for IE
if (window.ActiveXObject)
  {
  xml.addParameter("rss", test); 
  ex=xml.transformNode(xsl);
  document.getElementById("example").innerHTML=ex;
  }
// code for Mozilla, Firefox, Opera, etc.
else if (document.implementation && document.implementation.createDocument)
  {
  xsltProcessor=new XSLTProcessor();
  xsltProcessor.importStylesheet(xsl);
  resultDocument = xsltProcessor.transformToFragment(xml,document);
  document.getElementById("example").appendChild(resultDocument);
  }
}
</script>
</head>
<body onload="displayResult()">
<div id="example" />
</body>
</html> 
```

现在我想将一个变量（javascript）传递给 XSL，例如“course_name”，以便在 XSL 中我可以像这样使用它

```
<xsl:param name="course_name" />
<xsl:value-of select="$course_name" /> 
```

高度赞赏解决此问题的方法的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T19:34:06.710

你可以这样做：

```
xsltProcessor.setParameter(null, "course_name", "whatever the name is"); 
```

对于 IE，您需要根据[http://msdn.microsoft.com/en-us/library/windows/desktop/ms762312%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms762312%28v=vs.85%29.aspx)更改代码，但命令是：

```
xslproc.addParameter("param1", "Hello"); 
```

...但是鉴于您添加了“xslt-2.0”作为标签，您应该知道浏览器中的内置 XSLT 支持仅支持 XSL 1.0。

以下内容可能会有所帮助：

*   [https://developer.mozilla.org/en-US/docs/Using_the_Mozilla_JavaScript_interface_to_XSL_Transformations](https://developer.mozilla.org/en-US/docs/Using_the_Mozilla_JavaScript_interface_to_XSL_Transformations)
*   [https://developer.mozilla.org/en-US/docs/The_XSLT_JavaScript_Interface_in_Gecko/Setting_Parameters](https://developer.mozilla.org/en-US/docs/The_XSLT_JavaScript_Interface_in_Gecko/Setting_Parameters)
*   [http://msdn.microsoft.com/en-us/library/windows/desktop/ms762312%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms762312%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:24:32.557

[Saxon-CE](http://www.saxonica.com/ce/doc/about/intro.xml) XSLT 2.0 处理器作为 JavaScript 库/框架在浏览器中运行。因为它的 JavaScript 存在高级别的互操作性，所以您可以将参数传递给 XSLT 处理器，但您也可以从 XSLT 调用 JavaScript 函数，这提供了额外的灵活性。

在传递值时，JavaScript 中的数组对应于 XSLT 2.0 序列，但仍需要注意确保跨语言边界保留类型。

Saxon-CE 的 JavaScript API 有 2 种不同形式的语法 - 一种与您的代码中的相同，但下面是替代语法的示例 - 相同的代码在所有主要浏览器上运行：

```
<!DOCTYPE html>
   <html>
      <head>
         <title>stacko</title>
         <script type="text/javascript" language="javascript"
                       src="../Saxonce/Saxonce.nocache.js"></script>
         <script type="text/javascript" language="javascript">

         var my_course = "physics";

         onSaxonLoad = function() {   
            proc = Saxon.run( {
            stylesheet:   'stacko.xsl',
            source:       'stacko.xml',
            parameters: {
                           course_name: my_course,
                           tutor:       "Mr smith"
                        }  
             } );
         }
         </script>
       </head>
       <body>
          <div id="example"></div>
       </body>
    </html> 
```

无需使用此处理器将结果片段返回给 JavaScript（尽管您可以在必要时），因为 XSLT 2.0 xsl:result-document 指令已扩展，因此它可以使用指定元素 id 的 href 属性要更新的 HTML 页面，例如：

```
<xsl:result-document href="#example" method="replace-content">
    <p><xsl:value-of select="ixsl:source()/books/book[@title = 'One']/></p>
</xsl:result-document> 
```

[Saxon-CE 文档](http://www.saxonica.com/ce/doc/about/intro.xml)的 API 部分有更多详细信息

# git - 删除一个 github 分支

> ID：12787930
> 
> 赞同：4
> 
> 时间：2012-10-08T19:09:28.380
> 
> 标签：git, github, branch

> **可能重复：**
> [如何在本地和 Github 中删除 Git 分支？](https://stackoverflow.com/questions/2003505/how-do-i-delete-a-git-branch-both-locally-and-in-github)

首先，我阅读了如何删除分支，但由于某种原因不适用于我的项目：[https ://github.com/ralcr/sdk.ralcr](https://github.com/ralcr/sdk.ralcr)

当你第一次进入这里时，你会在 gh-pages 分支中看到一些 10 个月前的文件。我不知道这个分支是如何创建的以及为什么首先显示它，但我想删除它，这不起作用

```
Balutas-MacBook-Pro:sdk.ralcr Cristi$ git push origin --delete gh-pages
fatal: 'origin' does not appear to be a git repository
fatal: The remote end hung up unexpectedly 
```

我只想要主分支。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T20:14:36.003

我在这里找到了解决方案：[https](https://github.com/matthew-brett/pydagogue/blob/master/gh_delete_master.rst) ://github.com/matthew-brett/pydagogue/blob/master/gh_delete_master.rst 我无法删除该分支，因为它是默认分支。要更改它，请转到管理员，然后有一个下拉菜单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T19:14:23.107

要删除远程分支，您必须这样做：

```
git push <remote> :<branch>
# example
git push origin :gh-pages 
```

但在你的情况下， origin 似乎不是一个远程仓库。您应该检查您的远程名称并使用好的名称。

```
git remote 
```

另外，请确保您的远程 URL 是可写的。使用该`git`协议是只读的，因此您需要选择该协议`ssh`。（也应该与`https`url 一起使用）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T19:12:46.133

尝试使用`git branch -d <feature-branch>`，它应该可以让你删除一个特性分支。

（虽然通常`git merge <branch-name>`在此之前调用以在删除之前合并分支）

要删除远程分支：

```
git push origin :<feature-branch> 
```

# iphone - 如何在 iPhone 的回调中从邮件作曲家获取收件人、发件人、抄送和密件抄送字段？

> ID：12787934
> 
> 赞同：1
> 
> 时间：2012-10-08T19:09:55.073
> 
> 标签：iphone, ios, callback, mfmailcomposeviewcontroller, mfmailcomposer

有谁知道它是否可能以及如何在 iPhone 的回调中从邮件编写器获取 TO、FROM、CC 和 BCC 字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:03:41.723

使用 MFMailComposer。

无法完成。您为此找到的唯一代表是

[MFMailComposeViewControllerDelegate](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewControllerDelegate_protocol/Reference/Reference.html#//apple_ref/occ/intf/MFMailComposeViewControllerDelegate)

> 邮件撰写控制器：didFinishWithResult：错误：

一旦用户进入 MailComposer，您可以将其设置为一些预定义的值

通过设置 setToRecipients: 和 setCcRecipients:

但是这些设置是在你给用户控制权之前的。之后，您只会得到上述内容。

# c# - 如何模拟 DataRow Merge 并构建 2D DataRow 数组？

> ID：12787937
> 
> 赞同：0
> 
> 时间：2012-10-08T19:10:11.063
> 
> 标签：c#, recursion, datatable, dataset, datarow

我正在尝试做一个简单的 DataRow Merge，但不知何故我没有得到正确的数据。

我想构建一个 2D DataRow 数组

这是一个简单的 dataSet 定义，其中包含 dataTables 和 dataRelations 以及填充的 dataRows。

> ```
>  DataSet ds = new DataSet(); 
> ```

```
 ds.Tables.AddRange(new DataTable[] { 
            new DataTable("Person"),
            new DataTable("Car"),
            new DataTable("Color"),
            new DataTable("RGB"),
            new DataTable("Bicycle")
        });
        ds.Tables["Person"].Columns.AddRange(new DataColumn[] {
            new DataColumn("id", typeof(int)),
            new DataColumn("FName", typeof(string))
        });
        ds.Tables["Car"].Columns.AddRange(new DataColumn[] {
            new DataColumn("id", typeof(int)),
            new DataColumn("PersonId", typeof(int)),
            new DataColumn("CType", typeof(string))
        });
        ds.Tables["Color"].Columns.AddRange(new DataColumn[] {
            new DataColumn("id", typeof(int)),
            new DataColumn("CarId", typeof(int)),
            new DataColumn("ColorName", typeof(string))
        });
        ds.Tables["RGB"].Columns.AddRange(new DataColumn[] {
            new DataColumn("id", typeof(int)),
            new DataColumn("ColorId", typeof(int)),
            new DataColumn("HEX", typeof(string))
        });
        ds.Tables["Bicycle"].Columns.AddRange(new DataColumn[] {
            new DataColumn("id", typeof(int)),
            new DataColumn("PersonId", typeof(int)),
            new DataColumn("Age", typeof(string))
        });
        ds.Tables["Person"].ChildRelations.Add(new DataRelation("PersonCar", ds.Tables["Person"].Columns["id"], ds.Tables["Car"].Columns["PersonId"]));
        ds.Tables["Car"].ChildRelations.Add(new DataRelation("CarColor", ds.Tables["Car"].Columns["id"], ds.Tables["Color"].Columns["CarId"]));
        ds.Tables["Color"].ChildRelations.Add(new DataRelation("ColorRGB", ds.Tables["Color"].Columns["id"], ds.Tables["RGB"].Columns["ColorId"]));
        ds.Tables["Person"].ChildRelations.Add(new DataRelation("PersonBicycle", ds.Tables["Person"].Columns["id"], ds.Tables["Bicycle"].Columns["PersonId"]));

        ds.Tables["Person"].Rows.Add(0, "John");
        ds.Tables["Person"].Rows.Add(1, "Jenny");
        ds.Tables["Person"].Rows.Add(2, "Adam");

        ds.Tables["Car"].Rows.Add(0, 0, "Renault");
        ds.Tables["Car"].Rows.Add(1, 0, "Jeep");
        ds.Tables["Car"].Rows.Add(2, 1, "Subaru");
        ds.Tables["Car"].Rows.Add(3, 2, "Daewoo");

        ds.Tables["Color"].Rows.Add(0, 0, "Red");
        ds.Tables["Color"].Rows.Add(1, 1, "Black1");
        ds.Tables["Color"].Rows.Add(2, 1, "Black2");
        ds.Tables["Color"].Rows.Add(3, 1, "Black3");
        ds.Tables["Color"].Rows.Add(4, 2, "Green");
        ds.Tables["Color"].Rows.Add(5, 3, "Blue");

        ds.Tables["RGB"].Rows.Add(0, 1, "GREEN RGB1");
        ds.Tables["RGB"].Rows.Add(1, 1, "GREEN RGB2");

        ds.Tables["Bicycle"].Rows.Add(2, 0, "Mount."); 
```

我想得到一个具有以下结果的 2D DataRow 数组：

> ```
>  John, Renault, Red
>         John, Jeep, Black1, GREEN RGB1
>         John, Jeep, Black1, GREEN RGB2
>         John, Jeep, Black2
>         John, Jeep, Black3          
>         John, Mount.
>         Jenny, Subaru, Green
>         .... 
> ```

我不想使用 DataTable.Merge！那么如何编写一个填充二维数组的递归函数。

> 数据行列表列表

结果？

这是非常紧急的，所以欢迎每一位国王的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T06:10:01.237

也许遍历数据集？但我帮不了你。问候。

# javascript - 与数组值比较的布尔测试 HTML 文本框输入

> ID：12787938
> 
> 赞同：1
> 
> 时间：2012-10-08T19:10:13.993
> 
> 标签：javascript, html, forms, textbox, boolean

我正在尝试在网页上创建单个文本框表单来布尔测试用户提交的输入。输入将是网站用户的邮政编码。我想制作一个预先确定的邮政编码数组，以测试为真。

如果为真（输入的邮政编码包含在预定数组中），我想显示一位 HTML，如果测试为假，我想显示另一位。

我四处寻找并查看了我的一些 JavaScript 书籍（我刚刚开始学习），但没有找到答案；有人可以帮我解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:28:16.810

## HTML：

```
<label id="input-label" class="invalid">
    ZIP code: <input id="zipcode" />
    <div class="valid-message">
        Valid
    </div>
    <div class="invalid-message">
        Invalid
    </div>
</label> 
```

## CSS：

```
#input-label.valid .valid-message { display: block; }
#input-label.valid .invalid-message { display: none; }

#input-label.invalid .valid-message { display: none; }
#input-label.invalid .invalid-message { display: block; } 
```

## Javascript

```
function isValidZip(z) {
    return ['12345','67890'].indexOf(z) != -1;
}

var label = document.getElementById('input-label');
var input = document.getElementById('zipcode');

input.onkeydown = function() {
    label.className = isValidZip(input.value) ? "valid" : "invalid";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:27:42.303

你可以尝试这样的事情（可能有点偏离我会仔细检查然后回复你:)）：

```
var zipArr = ['98671','97006'];//insert the zip/post codes here
var userInputEl = document.getElementById('userInput');//Get the element could use tag names or it would be better actually if you used jQuery but yeah
var elToShow = document.getElementById('elementToShowIfNotFound');
var otherElToShow = document.getElementById('idOfOtherelementToShow');
var userInput = userInputEl.value();//might be .text()
if(zipArr.indexOf(userInput) === -1){//-1 means it isn't found in the array
    zipArr.push(userInput);//pushes the new one onto the array        
    elToShow.style.display = 'block';//this changes the css display to block instead of it being hidden.    
}else{        
    otherElToShow.style.display= 'block';
} 
```

可能不是最好的方法，但我建议使用 jQuery，它使这个过程更容易。

# c# - 模糊TextBlock上的清晰文本？

> ID：12787939
> 
> 赞同：0
> 
> 时间：2012-10-08T19:10:18.257
> 
> 标签：c#, windows-8, microsoft-metro, opacity, textblock

我有我的 Metro 应用程序的这个 xaml 代码。

```
 <Grid Width="531" Height="531">
        <Grid.Background>
            <ImageBrush ImageSource="{Binding image1}" Stretch="UniformToFill"  />
        </Grid.Background>
        <StackPanel Background="#0072B0" Opacity="0.7" VerticalAlignment="Bottom">
            <Border BorderThickness="0,0,0,1" BorderBrush="White">
                <TextBlock Text="{Binding name}" VerticalAlignment="Bottom" Opacity="1"  Style="{StaticResource BigTopDealItemTitle}"/>
            </Border>
        </StackPanel>
    </Grid> 
```

我想做一个模糊面板和清晰的文本。但是看起来也像 TextBlock 中的文本模糊，即使我将它的不透明度设置为 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:15:32.920

要使背景模糊而不使文本框模糊，请执行以下操作：

```
<Grid Width="531" Height="531">
    <Grid.Background>
        <ImageBrush ImageSource="{Binding image1}" Stretch="UniformToFill"  />
    </Grid.Background>
    <StackPanel Background="#0072B0" Opacity="0.7" VerticalAlignment="Bottom">
        <Grid>
            <Border BorderThickness="0,0,0,1" BorderBrush="White"/>
            <TextBlock Text="{Binding name}" VerticalAlignment="Bottom" Style="{StaticResource BigTopDealItemTitle}"/>
        </Grid>
    </StackPanel>
</Grid> 
```

这会将 置于`TextBlock`背景（即 ）之上，`Border`而不受 . 属性的影响`Border`。

# php - 测试 PHP 邮件（）

> ID：12787943
> 
> 赞同：0
> 
> 时间：2012-10-08T19:10:24.433
> 
> 标签：php, email

我有一个邮件提交脚本，它在开发环境中都按预期工作，但有一个例外。我从以实时环境与开发环境为条件的 mail() 测试中得到相互矛盾的结果。

在我的开发环境中，它会在成功时重定向到 $ThanksURL。在实时服务器上，即使通过邮件成功，脚本也会继续执行 else 语句并重定向回表单页面。

这一直让我发疯，所以任何关于为什么的想法都会受到欢迎。

问题片段：

```
$ok = @mail($to, $subject, $message, $headers, $returnpath);
            if($ok){ header("Location: $ThanksURL");
        exit;
}else{ $_SESSION['error'] .= " There has been a problems submitting your details. <br />";
                header("Location: $form");
                exit;   
        }// end if ok 
```

完整的脚本：

```
<?php 
session_start();
$form = 'index.php';
$_SESSION['error'] = "The following errors have occured: ";

if(isset($_POST['submitted'])) {

    // email fields: to, from, subject, and so on
    // Here 
$from = "Form Feedback <******@gmail.com>";
    $to = "******@gmail.com";
    $subject = "Competition";
    $ThanksURL =  "thankyou.html"; 
    $headers = "From: $from";
    $returnpath = "-f" . $from;
    $attachment = 0; // is there an attachement
    //form fields
    $emailAddress = stripslashes($_POST['email']);
    $phone = stripslashes($_POST['phone']);
    $comments = stripslashes($_POST['comments']);
    //basic message info        
    $message = "Info submitted:\n\nEmail address: " .$emailAddress ."\n\nPhone number: " .$phone."\n\nComments:\n ".$comments. "\n\n";

    if($_FILES['attachment']['error'] == 4) {
         $message .="No attachement included";
        }else{
    // test file type and size for submission
    $allowedExts = array("doc", "docx", "pdf", "txt");
    $extension = end(explode(".", $_FILES['attachment']["name"]));

    if ((($_FILES['attachment']["type"] == "application/msword")
    || ($_FILES['attachment']["type"] == "application/vnd.openxmlformats-officedocument.wordprocessingml.document")//docx mime
    || ($_FILES['attachment']["type"] == "application/pdf")
    || ($_FILES['attachment']["type"] == "application/plain")
    || ($_FILES['attachment']["type"] == "text/plain"))
    && ($_FILES['attachment']["size"] < 2097152 )
    && in_array($extension, $allowedExts)){
        // boundary
            $semi_rand = md5(time());
            $mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";

            // headers for attachment
            $headers .= "\nMIME-Version: 1.0\n" . "Content-Type: multipart/mixed;\n" . " boundary=\"{$mime_boundary}\"";

            // multipart boundary
            $message = "--{$mime_boundary}\n" . "Content-Type: text/plain; charset=\"iso-8859-1\"\n"."Content-Transfer-Encoding: 7bit\n\n" . $message . "\n\n";

                    // prepare the files uplaod
              $message .= "--{$mime_boundary}\n";
              $fp     = @fopen($_FILES['attachment']['tmp_name'],"rb");
              $data   = @fread($fp,filesize($_FILES['attachment']['tmp_name']));
              @fclose($fp);
              $data = chunk_split(base64_encode($data));

             $message .= "Content-Type: application/octet-stream; name=\"".$_FILES['attachment']['name']."\"\n"."Content-Description: ".$_FILES['attachment']['name']."\n" ."Content-Disposition: attachment;\n" . " filename=\"".$_FILES['attachment']['name']."\";size=".$_FILES['attachment']['size'].";\n"."Content-Transfer-Encoding: base64\n\n" . $data . "\n\n";

$message .= "--{$mime_boundary}--";
        }else{
            $_SESSION['error'] .= "Error: " . $_FILES["attachment"]["name"] . " is not a doc, docx, pdf or txt file or is larger than 2mb. Please resubmit <br />";
            header("Location: $form");
             exit;
             }
        }//file conditional 
     //prepare mail
    $ok = @mail($to, $subject, $message, $headers, $returnpath);
            if($ok){
                 header("Location: $ThanksURL");
                exit;
             }else{
                 $_SESSION['error'] .= " There has been a problems submitting your details. <br />";
                header("Location: $form");
                exit;   
        }// end if ok
    }// end sub

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:23:02.233

很抱歉这么说，但是 php 邮件可以在成功时返回其他东西，而不是 true 或 false，就像[php 手册评论](http://www.php.net/manual/en/function.mail.php#109655)中提到的那样。此外，已知[在某些情况下也会返回 false 成功](https://bugs.php.net/bug.php?id=14032)。

PHP mail() 从许多不同角度来看都是一个笨拙的函数，我个人建议不要在生产系统中使用它。有很多替代品，例如[swift mailer](http://swiftmailer.org/)、[PHP mailer](http://phpmailer.worxware.com/)、[Zend_Mail](http://framework.zend.com/manual/1.12/en/zend.mail.html)等。

但是，如果您想使用它，您绝对应该记录操作，在这种情况下，返回值，而*不是使用 @ 来隐藏您的返回值*。

* * *

总而言之，在这种情况下 mail() 返回一个空字符串，而不是 true 或 false。

# java - 覆盖 Object.equals VS 重载它

> ID：12787947
> 
> 赞同：13
> 
> 时间：2012-10-08T19:10:33.247
> 
> 标签：java

阅读：有效的 Java - Joshua Bloch 的第二版

**第 8 项 - 在覆盖 equals 状态时遵守一般合同：**

> 程序员编写一个看起来像这样的 equals 方法并花费数小时思考为什么它不能正常工作的情况并不少见：
> 
> [此处的代码示例]
> 
> 问题是这个方法没有覆盖 Object.equals，它的参数是 Object 类型，而是重载了它。

**代码示例：**

```
public boolean equals(MyClass o) {
    //...
} 
```

**我的问题：**

为什么像此代码示例中那样重载的强类型 equals 方法还不够？这本书指出重载而不是覆盖是不好的，但它没有说明为什么会这样，或者什么场景会使这个等于方法失败。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-08T19:20:22.867

这是因为重载该方法不会改变诸如集合或其他`equals(Object)`显式使用该方法的地方的行为。例如，采用以下代码：

```
public class MyClass {

    public boolean equals(MyClass m) {
        return true;
    }
} 
```

如果你把它放在类似的东西中`HashSet`：

```
public static void main(String[] args) {
    Set<MyClass> myClasses = new HashSet<>();
    myClasses.add(new MyClass());
    myClasses.add(new MyClass());
    System.out.println(myClasses.size());
} 
```

这将打印`2`, not `1`，即使您希望所有`MyClass`实例从您的重载中都是相等的，并且该集合不会添加第二个实例。

所以基本上，即使这是`true`：

```
MyClass myClass = new MyClass();
new MyClass().equals(myClass); 
```

这是`false`：

```
Object o = new MyClass();
new MyClass().equals(o); 
```

后者是集合和其他类用来确定相等性的版本。事实上，这将返回的*唯一*`true`地方是参数明确是其子类型的实例`MyClass`或其子类型之一。

* * *

**编辑：**根据您的问题：

**覆盖与重载**

让我们从覆盖和重载之间的区别开始。通过覆盖，您实际上*重新定义*了方法。您删除了它的原始实现并用您自己的实际替换它。所以当你这样做时：

```
@Override
public boolean equals(Object o) { ... } 
```

您实际上是在重新链接您的新`equals`实现以替换来自`Object`（或任何最后定义它的超类）的实现。

另一方面，当你这样做时：

```
public boolean equals(MyClass m) { ... } 
```

您正在定义一个全新的方法，因为您正在定义一个名称相同但参数不同的方法。`HashSet`调用时`equals`，它会在以下类型的变量上调用它`Object`：

```
Object k;
if (e.hash == hash && ((k = e.key) == key || key.equals(k))) { 
```

（该代码来自 的源代码`HashMap.put`，用作 的底层实现`HashSet.add`。）

需要明确的是，它使用不同的唯一时间`equals`是`equals`方法被*覆盖*，而不是重载。如果你尝试添加`@Override`到你的重载`equals`方法，它会因为编译器错误而失败，并抱怨它没有覆盖一个方法。我什至可以`equals`在同一个类中声明这两种方法，因为它重载：

```
public class MyClass {

    @Override
    public boolean equals(Object o) {
        return false;
    }

    public boolean equals(MyClass m) {
        return true;
    }
} 
```

**泛型**

至于泛型，*不是*`equals`泛型。它明确地作为它的类型，所以这一点没有实际意义。现在，假设您尝试这样做：*`Object`*

 *```
public class MyGenericClass<T> {

    public boolean equals(T t) {
        return false;
    }
} 
```

这不会与消息一起编译：

> 名称冲突：MyGenericClass 类型的方法 equals(T) 与 Object 类型的 equals(Object) 具有相同的擦除，但不会覆盖它

如果您尝试这样`@Override`做：

```
public class MyGenericClass<T> {

    @Override
    public boolean equals(T t) {
        return false;
    }
} 
```

你会得到这个：

> MyGenericClass 类型的方法 equals(T) 必须覆盖或实现超类型方法

所以你赢不了。这里发生的是 Java 使用擦除实现泛型。当 Java 在编译时检查完所有泛型类型时，实际的运行时对象都被替换为`Object`. 你所看到`T`的任何地方，都包含实际的字节码`Object`。这就是为什么反射不适用于泛型类以及为什么你不能做类似`list instanceof List<String>`.

这也使得您不能重载泛型类型。如果你有这个课程：

```
public class Example<T> {
    public void add(Object o) { ... }
    public void add(T t) { ... }
} 
```

您将从该`add(T)`方法中获得编译器错误，因为当类实际完成编译时，这些方法将具有相同的签名，`public void add(Object)`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-08T19:14:01.703

> 为什么像此代码示例中那样重载的强类型 equals 方法还不够？

因为它不会覆盖`Object.equals`. `Object`任何只知道在中声明的方法（例如，测试键相等）的通用代码`HashMap`最终都不会调用您的重载——它们最终只会调用给出引用相等的原始实现。

请记住，*重载*是在编译时确定的，而*覆盖*是在执行时确定的。

如果您要覆盖`equals`，最好也提供一个强类型版本*，*并从`equals`.

这是一个如何出错的完整示例：

```
import java.util.*;

final class BadKey {    
    private final String name;

    public BadKey(String name) {
        // TODO: Non-nullity validation
        this.name = name;
    }

    @Override
    public int hashCode() {
        return name.hashCode();
    }

    public boolean equals(BadKey other) {
        return other != null && other.name.equals(name);
    }
}

public class Test {

    public static void main(String[] args) throws Exception {
        BadKey key1 = new BadKey("foo");
        BadKey key2 = new BadKey("foo");
        System.out.println(key1.equals(key2)); // true

        Map<BadKey, String> map = new HashMap<BadKey, String>();
        map.put(key1, "bar");
        System.out.println(map.get(key2)); // null
    }
} 
```

修复只是添加一个覆盖，如下所示：

```
@Override
public boolean equals(Object other) {
    // Delegate to the more strongly-typed implementation
    // where appropriate.
    return other instanceof BadKey && equals((BadKey) other);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T19:15:16.220

因为使用 equals 的集合将使用`Object.equals(Object)`方法（可能在 MyClass 中被覆盖，因此被多态调用），这与`MyClass.equals(MyClass)`.

重载一个方法定义了一个**新的、不同**的方法，它恰好与另一个方法同名。*

# java - 重载Java中的接口方法

> ID：12787951
> 
> 赞同：-4
> 
> 时间：2012-10-08T19:10:51.673
> 
> 标签：java, interface, overloading

我有以下代码：

```
public interface Block {
    public double[] getOutput();
    public double[] getOutput(double[] inputs);
}

public class Dataset implements Block{

    public double[] getOutput(){
        return(new double[0]);
    }
} 
```

我正在使用 netbeans IDE，它会产生以下消息：

```
Dataset is not abstract and does not override abstract method getOutput(double[]) in Block 
```

我不确定为什么会这样..任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T19:12:25.523

您的`Dataset`类必须提供该`getOutput(double[])`函数的实现。正如所写，它只提供了一个实现`getOutput()`（没有参数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:12:40.063

您的界面需要两种方法，而您提供了一种。QED。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T19:12:43.397

错误说它很好。实现接口时，需要实现接口的所有方法。

# javascript - 一个简单的代码片段被解析了多少次？

> ID：12787952
> 
> 赞同：2
> 
> 时间：2012-10-08T19:11:05.790
> 
> 标签：javascript

什么时候动态编译。不太确定正确的术语。但是对于下面的这个片段，它至少是 IIFE 直到你调用 test 才会运行的两倍。一般来说，简单来说，动态编译的流程是什么？

```
(function(){

    function test() {

        var T = (function(){
            // does not run until you call test
        }());

    }
    test();

})(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:14:27.570

不确定我是否完全理解您要查找的内容，但整个代码段将被一次性解析并存储为抽象语法树（或由现代 JavaScript 引擎编译为某种字节码）。然后，当您调用`test`.

# sed - 使用 SED 删除具有多个要匹配的字段的行

> ID：12787958
> 
> 赞同：1
> 
> 时间：2012-10-08T19:11:32.560
> 
> 标签：sed

我有一个包含 12 列数据的文件。如果第 5 列等于“A”且第 12 列等于“Z”，我想删除/删除整行。这可以使用 SED 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T19:23:25.617

你可以。假设您的列由空格分隔：

```
sed -i -e '/\([^ ]* *\)\{4\}A *\([^ ]* *\)\{6\}Z/d' file 
```

该`-i`标志用于就地编辑文件。

该模式`[^ ]* *`匹配零个或多个（由星号表示）不是空格的字符（由`^`括号中的空格字符表示）后跟零个或多个空格。

将此模式放在反斜杠括号之间，我们可以将其组合成一个表达式，然后我们可以使用反斜杠大括号重复表达式。最初四次，然后匹配一个`A`后跟空格，然后该模式再次重复六次，然后是`Z`.

希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T19:38:14.167

您可以使用 来做到这一点`sed`，但使用 会更容易`awk`：

```
awk '! ( $5 == "A" && $12 == "Z" )' input-file 
```

或者

```
awk '$5 != "A" || $12 != "Z"' input-file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T07:38:39.057

```
perl -F -ane 'print unless($F[4] eq "A" and $F[11] eq "Z") your_file 
```

测试如下：

```
> cat temp
1 2 3 4 5 6 7 8 9 10 11 12
1 2 3 4 A 6 7 8 9 10 11 Z
> perl -F -ane 'print unless($F[4] eq "A" and $F[11] eq "Z")' temp
1 2 3 4 5 6 7 8 9 10 11 12
> 
```

# asp.net - WebApi / AutoFac 和 iDependencyResolver 错误

> ID：12787959
> 
> 赞同：0
> 
> 时间：2012-10-08T19:11:40.140
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-web-api

我有一个 DDD 分层应用程序，因此它包含一个 Asp.Net MVC 4 项目和一个 WebApi 项目（表示层中有 2 个项目）。

用 Asp.Net MVC 4 添加 Autofac = ok 用 Asp.Net WebApi 添加 Autofac = 不行

这是我的asp.net web api中的global.asax.cs

```
var configuration = GlobalConfiguration.Configuration;
var builder = new ContainerBuilder();

// Configure the container with the integration implementations.
// builder.ConfigureWebApi(configuration);
builder.RegisterWebApiFilterProvider(configuration);

// Register API controllers using assembly scanning.
builder.RegisterApiControllers(Assembly.GetExecutingAssembly());

builder.RegisterType(typeof(UnitOfWork)).As(typeof(IUnitOfWork)).InstancePerLifetimeScope()
    .OnRelease(x => { ((IUnitOfWork)x).Commit(); });
builder.RegisterType(typeof(DatabaseFactory)).As(typeof(IDatabaseFactory)).InstancePerLifetimeScope().AsImplementedInterfaces();
builder.RegisterAssemblyTypes(typeof(UserRepository).Assembly).Where(t => t.Name.EndsWith("Repository")).AsImplementedInterfaces();
builder.RegisterAssemblyTypes(typeof(SecurityService).Assembly).Where(t => t.Name.EndsWith("Service")).AsImplementedInterfaces();
var container = builder.Build();

// Set the dependency resolver implementation.
var resolver = new AutofacWebApiDependencyResolver(container);
configuration.ServiceResolver.SetResolver(resolver); 
```

我看到的错误是：无法从程序集“System.Web.Http，Version=4.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”加载类型“System.Web.Http.Dependencies.IDependencyResolver”。尝试重写部分代码 3 次，但它似乎不起作用。

已经找到了一些博客的链接，但大多数都包含`builder.ConfigureWebApi(configuration);`对新版本中不存在的引用。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:45:29.253

除了您的解析器之外，您还需要一个控制器工厂，我没有为 autofac 创建控制器工厂的经验（我的经验是使用 windsor），但它应该是直截了当的。你想像这样使用`configuration.DependancyResolver`：

```
configuration.DependencyResolver = new AutofacWebApiDependencyResolver(container); 
```

创建工厂后，您可以分配它：

```
ControllerBuilder.Current.SetControllerFactory(yourfactory); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:22:00.863

看起来您正在使用 Web API 的预发布版本，因为在 RTW 版本中，依赖解析器是通过属性设置的：

```
var resolver = new AutofacWebApiDependencyResolver(container);
configuration.DependencyResolver = resolver; 
```

确保您是 Web API 的 RTW 版本和 Autofac 集成的最新 NuGet 包：

`Install-Package Autofac.WebApi`

# c# - Accord.NET 估计多重回归 HMM 模型

> ID：12787963
> 
> 赞同：1
> 
> 时间：2012-10-08T19:11:43.887
> 
> 标签：c#, matlab, hidden-markov-models

Accord.NET 项目主页 (http://code.google.com/p/accord/) 包含基于单变量观察序列创建、训练和评估隐马尔可夫模型的示例。我也想做同样的事情，但是有很多变量的序列。我正在设想一个具有因变量和多个自变量的多元回归结构。我希望能够估计一个 HMM，其中输出包括每个状态的估计截距和系数，以及一个转移概率矩阵。一个例子是股票收益的时变贝塔。例如 ret(IBM) = intercept + b1*ret(Index) + b2*ret(SectorETF) + error，但其中 intercept、b1 和 b2 是依赖于状态的。

Marcelo Perlin 在他[的 Matlab 的 MS_Regress 包中](https://sites.google.com/site/marceloperlin/matlab-code/ms_regress---a-package-for-markov-regime-switching-models-in-matlab)提供了这个功能。但是，我想要 C# 中的这个功能。因此，对于 (1) 使用 Accord.NET 库来估计多元回归 HMM 模型，(2) 将 Marcelo Perlin 的包翻译成 C#，或 (3) 关于如何实现我的目标的其他想法，任何帮助都将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T18:50:23.200

Accord.NET Framework 也支持多维功能。[您可以使用泛型指定要在状态中使用的任何概率分布，文档](http://accord.googlecode.com/svn/docs/html/T_Accord_Statistics_Models_Markov_Learning_BaumWelchLearning_1.htm)中也有一个示例。

例如，如果您有二维观测向量，并选择假设多维模型假设高斯发射密度，则可以使用：

```
// Assume a Normal distribution for two-dimensional samples.
var density = new MultivariateNormalDistribution(dimension: 2);

// Create a continuous hidden Markov Model with two states organized in a forward
// topology and an underlying multivariate Normal distribution as emission density.      
var model = new HiddenMarkovModel<MultivariateNormalDistribution>(new Forward(2), density); 
```

然后您可以使用常见的 Baum-Welch、Viterbi 或最大似然学习器的通用版本来学习模型。

但是，不幸的是，该框架仍然不支持您提到的确切回归形式。但它看起来非常有趣。也许它可以在将来的某个地方添加到框架中。如果您愿意，请将其作为建议与一些参考资料和论文一起留在项目的问题跟踪器中。这似乎是一个非常有用的补充。

# css - 如何定义一个干净的 HTML 对象？

> ID：12787967
> 
> 赞同：2
> 
> 时间：2012-10-08T19:11:58.660
> 
> 标签：css, html

> **可能重复：**
> [停止在代码的特定部分应用 CSS 样式](https://stackoverflow.com/questions/10139447/stop-css-styles-to-be-applied-in-particular-sections-of-the-code)

插入`WordPress`许多插件的 HTML 代码（每个插件可能都有自己的样式）自动继承全局样式。一种方法是找到不需要的样式并覆盖它们。有时很难像[我一样](https://stackoverflow.com/questions/12786090/unwanted-row-space-in-table)找到它）

如何将 HTML 对象定义为从基础干净并且不从页面继承任何样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:05:41.733

根据浏览器，它是内置样式：`border-spacing`设置为 2px。

我认为您的意思是用 清除它`cellspacing=0`，但该页面是 HTML5 页面，不支持此属性。

也就是说，有一些建议给你。使用表格进行标记已过时。你可能会侥幸成功，但如果你正在创建一个 html 5 页面，你应该遵守它附带的规则。:) 事实证明，困扰您的不是任何 WordPress CSS。这只是内置样式，不能用过时的属性来推翻。:)

将来，在大多数浏览器中，您可以检查元素及其属性。在 Chrome 中这是内置的，在 FireFox 中我认为您仍然需要安装 FireBug 插件。这样，您可以右键单击 -> 检查元素，然后检查元素或其父元素以查看发生了什么：

![检查 CSS](../Images/5ad44948ce7b66af85304aebe4d6e6aa.png)

# ruby-on-rails - 回形针，复制图像而不对其进行重新处理

> ID：12787968
> 
> 赞同：3
> 
> 时间：2012-10-08T19:11:59.173
> 
> 标签：ruby-on-rails, paperclip

当我复制回形针附件时，它会应用样式中定义的默认裁剪，并忽略我通过用户输入（CropperJs）在网站上安装的裁剪器。我需要的只是图像的原始副本，因为它是在源图像上裁剪的。我现在通过直接复制文件来解决这个问题，但是有更好的方法吗？

```
has_attached_file :avatar,
    :name => 'avatar',
    :styles => {
      :cropped => {
        :geometry => "55x55#", 
        :processors => [:cropper]
      },
      :large => "600x600>"
} 
```

# c++ - C++ 复制指针指向的数据

> ID：12787972
> 
> 赞同：1
> 
> 时间：2012-10-08T19:12:18.397
> 
> 标签：c++, pointers, map, reference, copy-constructor

我是一个长期的读者，也是第一次发帖……我已经搜索了很长时间，很难找到现在真正让我难以置信的事情的答案。我一定错过了一些东西，因为我相信这应该有效......

我正在尝试创建一个数据表类，该类将包含它自己的传递给它的对象的副本。我决定使用 std::map 来包含这些数据。请参见下面的示例代码：

```
typedef std::map <std::string, myVar *> myVarContainer;

class myObj
{
    public:
        myObj(void);
        virtual ~myObj(void);

        void setVar(std::string Key, myVar & Var);

        myVar * getVar(std::string Key);

        void release()
        {
            for (myVarContainer::iterator i = VarContainer->begin(); i != VarContainer->end(); ++i)
            {
                delete (i->second);
            }

            VarContainer->clear();
        };

        myVarContainer * VarContainer;

};

typedef std::map <myVar, myObj *> myRow;

class myTable
{
    public:
        myTable(void);
        virtual ~myTable(void);

        void addDataPoint(myVar RowID, myVar ColID, myObj * Data)
        {
            std::map <myVar, myRow *>::iterator i = m_Rows->find(RowID);

            if (i == m_Rows->end())
            {
                m_Rows->insert(make_pair(RowID, new myRow()));
            }
            i = m_Rows->find(RowID);

            // i thought the below line would be creating a copy of the data?
            // I thought this logic went:
            // 1\. create a new object copied from the value of 'Data'
            // 2\. return a pointer to this object and pair with the 'colID'
            // 3\. make this into a pair and insert into the main map
            i->second->insert(make_pair(ColID, new myObj(*Data)));
        };

    protected:

        std::map <myVar, myRow *> * m_Rows;
}

int main()
{

    myVar a, b, c, d;

    myObj * o = new myObj();

    o->setVar("test", a);
    o->setVar("test2", b);

    myTable * tab = new myTable();

    myVar x1, y1, x2;

    tab->addDataPoint(y1, x1, o);

    o->release(); // this clears out both 'o' and the values in 'tab'!?!?

    //at this point tab has no data in its object at y1,x1???

    o->setVar("test3", c);
    o->setVar("test4", d);

    tab->addDataPoint(y1, x2, o);
} 
```

我注意到的是我的数据被删除得太早了。我相信我错过了一些东西...我以为我正在创建指针引用的数据的副本，然后在我的地图中存储一个新实例化的指针...有什么想法吗？我很感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:18:07.537

看来您确实在创建对象的副本，但是当您 release() 时，您正在释放 VarContainer（删除所有项目并使用 clear()），因此您之前创建的副本（带有指针的副本，而不是实际的容器）留下一个指向空容器的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:57:49.937

因此，在容器中使用（拥有）原始指针的问题之一是您需要自己手动删除实例。我认为就是这样`myObj::~myObj`做的（在删除容器本身之前迭代容器删除所有元素）。

该行：

```
i->second->insert(make_pair(ColID, new myObj(*Data))); 
```

是从 Data 中复制构造一个 myObj。

不幸的是，因为您没有为 myObj 定义复制构造函数，所以编译器将为您生成一个复制构造函数，它只会复制指向该`VarContainer`成员的指针。它不会创建地图的新副本或它在内部引用的任何内容。创建副本后，您将拥有两个实例，它们都指向同一个容器，并且两个实例都认为它们拥有它。当第一个被破坏时，它似乎没问题，但实际上让另一个实例指向已释放的内存。一旦寿命最长的实例试图使用这个容器指针做任何事情，就会发生一些不好的事情。

您可以通过按值而不是指针存储映射来解决此问题：

```
typedef std::map<std::string, myVar> myVarContainer;
typedef std::map<myVar, myObj> myRow; 
```

也更改`myObj::VarContainer`为非分配成员。这意味着现在所有内容都被正确复制，并且副本不会引用原始文件中的任何内容。

请注意，您也可以使用智能指针（例如`std::shared_ptr`）而不是原始指针，但您仍然需要小心，因为虽然复制是安全的，但它们与原始指针共享数据，这可能不是您所期望的。

你应该看看以下内容：

[http://en.wikipedia.org/wiki/Rule_of_three_(C%2B%2B_programming](http://en.wikipedia.org/wiki/Rule_of_three_(C%2B%2B_programming) )

# eclipse - M2E 在导入现有 maven 项目时未将 Groovy 源添加到 .classpath

> ID：12787976
> 
> 赞同：6
> 
> 时间：2012-10-08T19:12:27.400
> 
> 标签：eclipse, maven, groovy, m2e

使用 Eclipse Indigo 导入现有的 maven 项目，生成的工作区项目不包含`src/main/groovy`或不包含`src/test/groovy`在构建路径中。我还希望将 groovy 代码的输出目录设置为`target/test-classes`.

这是我对这个优秀小组的第一个问题，所以我希望我能涵盖所有的基础。

## 环境：

*   日蚀靛蓝
*   m2e - Eclipse 1.2.0.20120903-1050 的 Maven 集成 org.eclipse.m2e.feature.feature.group Eclipse.org - m2e
*   用于 build-helper-maven-plugin 的 m2e 连接器 0.15.0.201207090124 org.sonatype.m2e.buildhelper.feature.feature.group Sonatype, Inc.
*   APT M2E 连接器 0.0.1.3 de.joe.m2e.apt.feature.feature.group null
*   Groovy-Eclipse 功能 2.5.2.xx-20110929-1800-e37 org.codehaus.groovy.eclipse.feature.feature.group Codehaus.org
*   Groovy-Eclipse M2E 集成 2.7.1.xx-20120921-2000-e37RELEASE org.codehaus.groovy.m2eclipse.feature.group Codehaus.org
*   第谷项目配置器 0.6.0.201207302152 org.sonatype.tycho.m2e.feature.feature.group Sonatype, Inc.

我的项目 pom.xml 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org        /2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

<modelVersion>4.0.0</modelVersion>

<parent>
<groupId>com.jha.yhs</groupId>
<artifactId>fraud.server.parent</artifactId>
<version>201203.8.0-SNAPSHOT</version>
</parent>
<artifactId>ach-wire</artifactId>
  <dependencies>

  <dependency>
    <groupId>com.jha.yhs</groupId>
    <artifactId>aspects</artifactId>
    <version>${project.version}</version>
  </dependency>

    <dependency>
        <groupId>com.jha.yhs</groupId>
        <artifactId>database</artifactId>
        <version>1.0-SNAPSHOT</version>
    </dependency>

  <dependency>
    <groupId>com.google.guava</groupId>
    <artifactId>guava</artifactId>
    <version>r09</version>
  </dependency>

  <dependency>
    <groupId>org.codehaus.groovy</groupId>
    <artifactId>groovy-all</artifactId>
    <version>1.7.6</version>
  </dependency>

  <dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.8.2</version>
    <scope>test</scope>
  </dependency>

  <dependency>
    <groupId>org.spockframework</groupId>
    <artifactId>spock-core</artifactId>
    <version>0.5-groovy-1.7</version>
    <scope>test</scope>
  </dependency>

<dependency>
    <groupId>com.h2database</groupId>
    <artifactId>h2</artifactId>
    <version>1.3.155</version>
</dependency>

  <dependency>
    <groupId>org.dbunit</groupId>
    <artifactId>dbunit</artifactId>
    <version>2.4.8</version>
    <scope>test</scope>
  </dependency>

  <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-jdbc</artifactId>
    <version>3.0.5.RELEASE</version>
  </dependency>

<dependency>
    <groupId>joda-time</groupId>
    <artifactId>joda-time</artifactId>
    <version>1.6.2</version>
</dependency>
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-simple</artifactId>
    <scope>test</scope>
    <version>1.6.1</version>
</dependency>
<dependency>
    <groupId>org.mockito</groupId>
    <artifactId>mockito-all</artifactId>
    <version>1.8.5</version>
    <scope>test</scope>
</dependency>
 </dependencies>
 <build>
  <plugins>

    <plugin>
      <groupId>org.codehaus.gmaven</groupId>
      <artifactId>gmaven-plugin</artifactId>
      <version>1.3</version>
    </plugin>

  </plugins>
</build>
</project> 
```

现在这个 pom.xml 是另一个 pom.xml 的子目录（在子目录中），其中包含：

```
<build>

  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-compiler-plugin</artifactId>
      <version>2.3.2</version>

      <configuration>
        <compilerVersion>1.6</compilerVersion>
        <source>1.6</source>
        <target>1.6</target>
        <compilerArguments>
          <encoding>windows-1252</encoding>
        </compilerArguments>
      </configuration>
    </plugin>

  <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>build-helper-maven-plugin</artifactId>
    <version>1.7</version>
    <executions>
      <execution>
        <id>add-source</id>
        <phase>generate-sources</phase>
        <goals>
          <goal>add-source</goal>
        </goals>
        <configuration>
          <sources>
            <source>src/main/groovy</source>
          </sources>
        </configuration>
      </execution>

      <execution>
        <id>add-test-source</id>
        <phase>generate-test-sources</phase>
        <goals>
          <goal>add-test-source</goal>
        </goals>
        <configuration>
          <sources>
            <source>src/test/groovy</source>
          </sources>
        </configuration>
      </execution>
    </executions>
  </plugin>

    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-surefire-plugin</artifactId>
      <version>2.4.2</version>
      <configuration>
        <argLine>-Xmx1024m -XX:MaxPermSize=256m -XX:-HeapDumpOnOutOfMemoryError</argLine>
        <includes>
          <include>**/UnitTests.java</include>
        </includes>
      </configuration>
    </plugin>

    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-failsafe-plugin</artifactId>
        <version>2.9</version>
        <executions>
            <execution>
                <id>integration-test</id>
                <goals>
                    <goal>integration-test</goal>
                </goals>
            </execution>
            <execution>
                <id>verify</id>
                <goals>
                    <goal>verify</goal>
                </goals>
          </execution>
        </executions>
    </plugin>

    <plugin>
      <groupId>org.codehaus.gmaven</groupId>
      <artifactId>gmaven-plugin</artifactId>
      <version>1.3</version>

      <dependencies>

        <dependency>
          <groupId>org.codehaus.gmaven.runtime</groupId>
          <artifactId>gmaven-runtime-1.7</artifactId>
          <version>1.3</version>
        </dependency>

        <dependency>
          <groupId>org.codehaus.groovy</groupId>
          <artifactId>groovy-all</artifactId>
          <version>1.7.6</version>
        </dependency>

      </dependencies>

      <configuration>
        <providerSelection>1.7</providerSelection>
      </configuration>

      <executions>
        <execution>
          <goals>
            <goal>generateStubs</goal>
            <goal>compile</goal>
            <goal>generateTestStubs</goal>
            <goal>testCompile</goal>
          </goals>
        </execution>
      </executions>
    </plugin> 
```

请注意，我可以使用以下方法添加 groovy 源文件夹： - GUI 的构建路径 - 通过编辑 .classpath 文件 - 从命令行运行 mvn eclipse:eclipse 并将 groovy 源目录添加到 .classpath 但不添加到输出目录。

但是，看：[this](https://stackoverflow.com/questions/7329356/eclipse-helios-maven-m2e-groovy-fail)和[this](http://mojo.codehaus.org/build-helper-maven-plugin/usage.html) using build-helper 应该可以解决问题。我尝试将 build-helper 引用放入项目 pom.xml 中，而行为没有改变。我还尝试使用 maven-eclipse 插件来设置额外的源文件夹，如此[处](https://stackoverflow.com/questions/9179791/eclipse-maven-groovy-src-test-groovy-directory-gets-removed-after-update-pr)所述和

我们有四个使用 groovy 的子项目，我希望不必为 main 添加 groovy 文件夹和输出文件夹，并在我们从 SVN 提取新代码时对它们中的每一个进行测试。**似乎 M2E 的 import maven 项目无法正常工作。**maven->updateProject 也没有。我错过了什么？

作为一种解决方法，m2e 1.2 似乎不会像 m2e 1.0 那样覆盖 .classpath 和 .project 文件，所以我总是可以手动配置 .classpath 和 .project 文件并将它们放入源代码管理中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T00:04:54.100

我在使用 Maven 开发的 webapp 中使用 Groovy。但我正在使用`groovy-eclipse-compiler`. 首先，我配置 Maven 编译器插件：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5.1</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <compilerId>groovy-eclipse-compiler</compilerId>
            </configuration>
            <dependencies>
                <dependency>
                    <groupId>org.codehaus.groovy</groupId>
                    <artifactId>groovy-eclipse-compiler</artifactId>
                    <version>${groovy-eclipse-compiler.version}</version>
                </dependency>
            </dependencies>
        </plugin> 
```

然后，我配置源目录：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>build-helper-maven-plugin</artifactId>
            <version>1.7</version>
            <executions>
                <execution>
                    <id>add-source</id>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>add-source</goal>
                    </goals>
                    <configuration>
                        <sources>
                            <source>src/main/groovy</source>
                        </sources>
                    </configuration>
                </execution>
                <execution>
                    <id>add-test-source</id>
                    <phase>generate-test-sources</phase>
                    <goals>
                        <goal>add-test-source</goal>
                    </goals>
                    <configuration>
                        <sources>
                            <source>src/test/groovy</source>
                        </sources>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

之后，我可以将 Groovy 与 Eclipse + m2e 一起使用（实际上，我正在使用带有 Groovy 插件的 Springsource Tool Suite）。我有 Groovy 语法和自动完成功能（远非理想），我也可以使用 Java 中的 Groovy 类，反之亦然。

# android - Android RelativeLayout editview 如何让文本框变大？

> ID：12787983
> 
> 赞同：0
> 
> 时间：2012-10-08T19:12:46.507
> 
> 标签：android, android-layout, android-relativelayout, android-edittext

我正在尝试制作一个大约 3 行高的文本框，但文本框也会根据输入的信息量进行扩展。我已经使用`wrap_content`which 显示为一行并且我已经使用`android:layout_height="150dp"`了 ，但是文本框没有展开。任何指导将不胜感激。

```
<EditText
        android:id="@+id/editEmailCompose"
        android:layout_width="400dp"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/editEmailSubject"
        android:layout_toRightOf="@+id/textSubject"
        android:ems="10"
        android:gravity="top|left"
        android:layout_marginRight="20dp"
        android:hint="@string/emailCompose" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:38:30.723

好的，所以我找到了所需的代码。它可能会帮助其他人。

```
*android:layout_height="wrap_content"
android:isScrollContainer="true"
android:minHeight="120dp" 
android:inputType="textMultiLine"* 
```

# c# - 如何在 .NET 3.5 中调用需要 WCF 授权的 asmx 服务

> ID：12787985
> 
> 赞同：0
> 
> 时间：2012-10-08T19:13:22.777
> 
> 标签：c#, .net, wcf, web-services, .net-3.5

如何在 .NET 3.5 中调用需要来自 WCF 的 Windows 身份授权的 asmx 服务？我们仅限于 .NET 3.5 框架。我有凭据，但不确定如何在 C# 代码中实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T06:01:32.857

[在http://msdn.microsoft.com/en-us/library/ff406125](http://msdn.microsoft.com/en-us/library/ff406125)有一个身份验证示例。

```
public decimal ReportSales()
{
    var currentUser = new WindowsPrincipal((WindowsIdentity)
    System.Threading.Thread.CurrentPrincipal.Identity);
    if (currentUser.IsInRole(WindowsBuiltInRole.BackupOperator))
    {
        return 10000M;
    }
    else
    {
       return -1M;
    }
 } 
```

在[http://haacked.com/archive/2011/10/19/implementing-an-authorization-attribute-for-wcf-web-api.aspx中描述了编译器属性的替代方法](http://haacked.com/archive/2011/10/19/implementing-an-authorization-attribute-for-wcf-web-api.aspx)

对于更高版本的.net WIF 将是要走的路。

我希望这有帮助...

# java - 使用java指定文本中名词的频率

> ID：12787987
> 
> 赞同：0
> 
> 时间：2012-10-08T19:13:29.753
> 
> 标签：java, regex, nlp, text-processing

我有一个文件包含带有 POS 标签的单词，例如

```
Tom/NNP went/VBP to/IN the/DT stadium/NN ....etc 
```

我需要知道此文件中包含的所有名词的频率。所以，输出可能是

```
stadium     12 
football    20
player      13 
```

其中这些数字是这些名词在文本中出现的次数。我怎样才能在java中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:22:27.023

有一个从字符串（名词）到整数（计数）的映射。循环遍历文件中的每个单词。检查 '/' 之后的单词部分，如果它是名词，则将其放入映射中，如果它不存在，则使用“1”值，或者在现有值上加 1。然后遍历映射，打印出键/值对。

# c++ - 如何衡量代码大小？

> ID：12787990
> 
> 赞同：4
> 
> 时间：2012-10-08T19:13:39.440
> 
> 标签：c++, visual-c++, compilation, native, code-size

当讨论某些特性或优化时，经常会提到代码大小。

虽然我当然了解基本概念，即编译为机器代码的代码集合将产生 X 字节的机器代码（加上静态数据），但我最近意识到我非常不确定如何*实际*测量代码大小给定的二进制文件。

那么，**如何衡量代码大小？**

您是否只检查生成的二进制文件（“可执行文件”，）有多大`.exe`？您是否需要诸如`dumpbin.exe`或某些特定链接器标志之类的工具来获得详细结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:19:35.820

我会说你最好的选择是反汇编二进制文件。

在代码优化的上下文中，总代码大小通常不是指的意思，而是程序某些特定部分的代码大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:19:43.453

您可以告诉链接器生成一个映射文件。这提供了最容易获得的最详细信息（即，远远缺乏手动对代码进行逆向工程）。

根据代码，在目标文件上使用 dumpbin 可以产生有意义的结果，但也可以产生简单的“匿名对象”——尤其是（仅？）当您要求生成链接时代码时。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-02-27T08:14:15.380

如果你的意思是 .exe 在字面上的字节数，我认为你在想这个问题。您的文件资源管理器应该在右侧显示文件的大小（如果没有，请右键单击文件并打开属性）。您要查找的文件应该在以 .exe 命名的调试中，如果是别的东西，对不起。

# java - 使用 java 创建我们自己的 A2DP 配置文件

> ID：12787994
> 
> 赞同：3
> 
> 时间：2012-10-08T19:13:51.093
> 
> 标签：java, bluetooth, profile, a2dp

我们中的许多人都使用过具有内置编程 A2DP（高级音频引导配置文件）的蓝牙耳机/耳机或类似设备，以便他们可以从标准设备接收流音频。

但是我想使用可以安装在移动设备上的 java 设计（编码和实现）我自己的蓝牙 A2DP 配置文件，以便该设备可以接收和输出从另一台设备接收的流式音频。

例如：我的笔记本电脑和手机一样有蓝牙堆栈。作为普通手机，它没有 A2DP 配置文件但是如果我的手机连接到放大器并且我想将笔记本电脑的音频无线传输到该放大器怎么办。

提议：如果我设计一个可安装的基于java（java，因为它被广泛接受为移动设备的支持语言）A2DP蓝牙配置文件，那么我的手机可以用作基于蓝牙的音频接收器。

但主要问题是如何以及从哪里开始？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-12T07:02:27.127

你为什么不使用你的蓝牙耳机。这样你可以将你的蓝牙设备连接到放大器，它可以从你的手机和笔记本电脑流式传输音频。

# linux - Linux与windows远程连接

> ID：12787995
> 
> 赞同：0
> 
> 时间：2012-10-08T19:13:52.327
> 
> 标签：linux, window, windows-xp-sp3

如果我使用的是window xp，有什么方法可以控制Linux机器。

有没有相当于windows netmeeting的软件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:36:51.590

您可以使用以下方法之一：

```
 NXServer
    Remmina (VNC incomming connections)
    RealVnc
    TightVNC
    ScreenConnect

... 
```

或者

```
TeamViewer in Wine (MS Emulator) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:21:50.813

你可以看看[TeamViewer](http://www.teamviewer.com/en/index.aspx)。

它允许您像在计算机前一样控制鼠标/键盘，并共享您的音频/视频和传输文件。

此外，您也不必担心 NAT 路由。

# c# - 如何正确混合两种或多种颜色？

> ID：12787996
> 
> 赞同：1
> 
> 时间：2012-10-08T19:13:53.027
> 
> 标签：c#, .net, colors, xna

> **可能重复：**
> [RGB 值的加色混合算法](https://stackoverflow.com/questions/726549/algorithm-for-additive-color-mixing-for-rgb-values)

我正在为我的游戏开发一个灯光系统，我几乎完成了它。但我有一个颜色固有的问题：如何正确混合它们？

我找到并使用的最简单的答案是平均它们的 RGB 值，但是当它们被多次平均时，结果会趋于灰色。简单解释一下，我使用的方法如下：

```
// XNA, where there isn't a FromARGB method, and the 
// values are given in the constructor.    
Color result = new Color(
    (C1.R + C2.R) / 2, 
    (C1.G + C2.G) / 2, 
    (C1.B + C2.B) / 2
); 
```

但是如果我必须混合许多不同的颜色，同时保持最正确的值，我该怎么办？我提出了一个新问题，因为我对颜色不太了解，并且不确定不同情况（例如灯光）是否需要不同的方法。提前感谢您的回复。

# linux - 脚本无法看到以 root 身份运行

> ID：12787998
> 
> 赞同：1
> 
> 时间：2012-10-08T19:13:57.020
> 
> 标签：linux, bash, shell

这是我的根检查代码。如果没有通过，请不要运行脚本，因为您需要 root。不确定这里出了什么问题：

```
if [ "whoami &2>/dev/null" != "root" ] && [ "id -un &2>/dev/null" != "root" ] ; then
    $BIN_ECHO " must be root to run this script "
    exit 1
else
    $BIN_ECHO -e " permission check passed "
fi 
```

运行后我得到：

```
must be root to run this script
[root@localhost ~]# whoami
root
[root@localhost ~]# id -un
root 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T19:21:53.537

“whoami”是一串字符。

`whoami` 是命令的输出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T19:16:38.970

您正在将包含命令的字符串与“root”进行比较。[这不是你想要](http://tldp.org/LDP/abs/html/commandsub.html)的。

```
if [ "$(whoami &2>/dev/null)" != "root" ] && ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T19:16:15.023

`"whoami &2>/dev/null"`并且`"id -un &2>/dev/null"`只是字符串，它们没有运行命令。使用：`"$(whoami &2>/dev/null)"`和`"$(id -un &2>/dev/null)"`代替。

# c++ - 第一次写入的 writefile 字节数为 0

> ID：12787999
> 
> 赞同：0
> 
> 时间：2012-10-08T19:13:58.153
> 
> 标签：c++, serial-port

我正在将字符写入串行端口（没有硬件握手，没有重叠），经过几次向端口发送握手字符（ACK）后，writefile 返回 true，但发送的字节是 0 而不是 1，所以我必须 writefile再次。Getlasterror 总是返回 0。然后第二次就可以了。我假设有什么问题，但不知道它是什么。部分程序如下。

谢谢

```
swprintf( portName, sizeof( portName ) / sizeof(TCHAR), _T("\\\\.\\COM%i"), comPort); 
port = CreateFile(portName, GENERIC_READ | GENERIC_WRITE,0,NULL,OPEN_EXISTING,0,NULL);
DCB dcb;            
ZeroMemory(&dcb, sizeof(dcb));
dcb.DCBlength = sizeof(DCB);
if ( GetCommState(port, &dcb) )
{
   dcb.BaudRate = CBR_9600;     
   dcb.ByteSize = 8;      
   dcb.Parity = NOPARITY;
   dcb.StopBits = ONESTOPBIT;
   dcb.fAbortOnError = TRUE;
   if (SetCommState(port, &dcb))
   {
    errlog(-1,"GetCommState failed with error %d.\n", GetLastError());  
    exit();
   }

while (1)
{
    DWORD bytes2write=1;
    DWORD bytes_written = 0;
    ClearCommError(port,NULL,NULL);
    BOOL w=WriteFile(port,chrs,bytes2write,&bytes_written,NULL);
    if (!w || bytes_written!=bytes2write)
    {
        DWORD err = GetLastError();
        if (err==0L)
            continue;   
        ...
    }
} 
```

}