# StackOverflow 问答 12993000-12993999

# javascript - 立方体纹理在立方体面之一中反转

> ID：12993002
> 
> 赞同：1
> 
> 时间：2012-10-20T21:47:07.847
> 
> 标签：javascript, html, three.js

我使用立方体纹理的图像，图像在 4 个面中的 3 个中正确显示，而第 4 个面看起来相反。我的相关代码如下：

```
//dom
        var container2=document.getElementById('share');
        //renderer
        var renderer2 = new THREE.CanvasRenderer();
        renderer2.setSize(100,100);
        container2.appendChild(renderer2.domElement);
        //Scene
        var scene2 = new THREE.Scene();
        //Camera
        var camera2 = new THREE.PerspectiveCamera(50,200/200,1,1000);
        camera2.up=camera.up;
        //
        camera2.position.z = 90;
        //
        scene2.add(camera2);
        //Axes
        var axes2= new THREE.AxisHelper();

        //Add texture for the cube
        //Use image as texture
        var img2 = new THREE.MeshBasicMaterial({ //CHANGED to MeshBasicMaterial
        map:THREE.ImageUtils.loadTexture('img/fb.jpg') 
        });
        img2.map.needsUpdate = true; 
        //
        var cube = new THREE.Mesh(new THREE.CubeGeometry(40,40,40),img2);
        scene2.add(cube); 
```

图像尺寸为 600*600 像素。任何建议表示赞赏，thanx提前。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T23:53:21.297

首先，应该向其他人指出您正在尝试使用 javascript 库“three.js”进行开发。文档可以在这里找到：http: [//mrdoob.github.com/three.js/docs](http://mrdoob.github.com/three.js/docs)

问题的症结在于纹理会根据几何对象中存储的 UV 坐标映射到网格对象。对象的`THREE.CubeGeometry`UV 坐标存储在数组中`faceVertexUvs`。

它包含以下 6 个面中每个面的 4 个顶点的 UV 坐标数组：

```
{{0,1}, {0,0}, {1,0}, {1,1}},  // Right Face (Top of texture Points "Up")
{{0,1}, {0,0}, {1,0}, {1,1}},  // Left Face (Top of texture Points "Up")
{{0,1}, {0,0}, {1,0}, {1,1}},  // Top Face (Top of texture Points "Backward")
{{0,1}, {0,0}, {1,0}, {1,1}},  // Bottom Face (Top of texture Points "Forward")
{{0,1}, {0,0}, {1,0}, {1,1}},  // Front Face (Top of texture Points "Up")
{{0,1}, {0,0}, {1,0}, {1,1}}   // Back Face (Top of texture Points "Up") **Culprit** 
```

它将 UV 坐标映射到构成立方体的每个面，它们是：

```
{0, 2, 3, 1},  // Right Face (Counter-Clockwise Order Starting RTF)
{4, 6, 7, 5},  // Left Face (Counter-Clockwise Order Starting LTB)
{4, 5, 0, 1},  // Top Face (Counter-Clockwise Order Starting LTB)
{7, 6, 3, 2},  // Bottom Face (Counter-Clockwise Order Starting LBF)
{5, 7, 2, 0},  // Front Face (Counter-Clockwise Order Starting LTF)
{1, 3, 6, 4}   // Back Face (Counter-Clockwise Order Starting RTB) 
```

上面的数字是顶点数组的索引，对于`THREE.CubeGeometry`存储在 中`vertices`，有 8 个：

```
{20, 20, 20},     // Right-Top-Front Vertex
{20, 20, -20},    // Right-Top-Back Vertex
{20, -20, 20},    // Right-Bottom-Front Vertex
{20, -20, -20},   // Right-Bottom-Back Vertex
{-20, 20, -20},   // Left-Top-Back Vertex
{-20, 20, 20},    // Left-Top-Front Vertex
{-20, -20, -20},  // Left-Bottom-Back Vertex
{-20, -20, 20}    // Left-Bottom-Front Vertex 
```

*注意：以上所有相对方向均假设相机沿正 z 轴放置，朝向以原点为中心的立方体。*

所以真正的罪魁祸首是纹理顶部向上的背面。在这种情况下，您希望纹理的顶部在背面朝下，因此当立方体由于旋转而倒置并以您拥有的方式查看时，图像会如您预期的那样显示。它需要改变如下：

```
{{1,0}, {1,1}, {0,1}, {0,0}}   // FIXED: Back Face (Top of texture Points "Down") 
```

可以在代码中进行此更改以更改坐标以获得您想要的显示：

```
var cubeGeometry = new THREE.CubeGeometry(40, 40, 40);
cubeGeometry.faceVertexUvs[0][5] = [new THREE.UV(1, 0), new THREE.UV(1, 1), new THREE.UV(0, 1), new THREE.UV(0, 0)];
var cube = new THREE.Mesh(cubeGeometry, img2); 
```

为了进一步阅读，我推荐使用 UV 坐标进行纹理映射的以下链接[http://www.rozengain.com/blog/2007/08/26/uv-coordinate-basics/](http://www.rozengain.com/blog/2007/08/26/uv-coordinate-basics/)。

# delphi - 在 VirtualTreeView 中更改拖动光标

> ID：12993003
> 
> 赞同：4
> 
> 时间：2012-10-20T21:47:26.740
> 
> 标签：delphi, c++builder, virtualtreeview

使用 VirtualTreeView 的拖拽操作时默认为`[doCopy,doMove]`. 移动操作由带小框的箭头指针指示，复制操作由相同的指针图标指示，但旁边添加了 [+]。

默认情况下，VT 使用复制操作，如果您按下修饰键 ( `SHIFT`key)，它会修改操作以移动，因此从指针中删除 [+]。

这是我需要的：

*   反转操作（默认是移动，按下修改键 - 复制），因此也反转指针箭头
*   替换修饰键 -`CTRL`而不是`SHIFT`
*   读取发生了两个操作中的哪一个并开始复制或移动操作

任何指向正确方向的指针表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T22:52:58.483

除了更改修饰符之外，您还应该在`OnDragOver`事件处理程序中更改您将要执行的操作。因此，要将`CTRL`键添加为复制操作修饰符，您可以编写如下内容。此事件中设置的`Effect`参数值也会根据所选操作更改拖动光标。除了传递给`OnDragDrop`事件的值之外，您可以在其中确定如何处理丢弃的源：

```
procedure TForm1.VirtualStringTree1DragOver(Sender: TBaseVirtualTree;
  Source: TObject; Shift: TShiftState; State: TDragState; Pt: TPoint;
  Mode: TDropMode; var Effect: Integer; var Accept: Boolean);
begin
  Accept := True;
  if Shift = [ssCtrl] then
    Effect := DROPEFFECT_COPY;
end; 
```

在`OnDragDrop`事件处理程序中，您可以确定使用的效果：

```
procedure TForm1.VirtualStringTree1DragDrop(Sender: TBaseVirtualTree;
  Source: TObject; DataObject: IDataObject; Formats: TFormatArray;
  Shift: TShiftState; Pt: TPoint; var Effect: Integer; Mode: TDropMode);
begin
  case Effect of
    DROPEFFECT_COPY: ShowMessage('DROPEFFECT_COPY');
    DROPEFFECT_MOVE: ShowMessage('DROPEFFECT_MOVE');
  end;
end; 
```

# java - 为什么 opennlp 库的 HelloWorld 在 Java 上运行良好，但在 Jruby 上却不行？

> ID：12993007
> 
> 赞同：0
> 
> 时间：2012-10-20T21:47:59.847
> 
> 标签：java, macos, jruby, opennlp

我收到此错误：

```
SyntaxError: hello.rb:13: syntax error, unexpected tIDENTIFIER
public HelloWorld( InputStream data ) throws IOException { 
```

HelloWorld.rb 是：

```
require "java"

import java.io.FileInputStream;
import java.io.InputStream;
import java.io.IOException;

import opennlp.tools.postag.POSModel;
import opennlp.tools.postag.POSTaggerME;

public class HelloWorld {
    private POSModel model;

    public HelloWorld( InputStream data ) throws IOException {
    setModel( new POSModel( data ) );
    }

    public void run( String sentence ) {
    POSTaggerME tagger = new POSTaggerME( getModel() );
    String[] words = sentence.split( "\\s+" );
    String[] tags = tagger.tag( words );
    double[] probs = tagger.probs();

    for( int i = 0; i < tags.length; i++ ) {
    System.out.println( words[i] + " => " + tags[i] + " @ " + probs[i] );
    }
    }

    private void setModel( POSModel model ) {
    this.model = model;
    }

    private POSModel getModel() {
    return this.model;
    }

    public static void main( String args[] ) throws IOException {
    if( args.length < 2 ) {
    System.out.println( "HelloWord <file> \"sentence to tag\"" );
    return;
    }

    InputStream is = new FileInputStream( args[0] );
    HelloWorld hw = new HelloWorld( is );
    is.close();

    hw.run( args[1] );
    }
} 
```

跑步时`ruby HelloWorld.rb "I am trying to make it work"`

当我运行它时，`HelloWorld.java "I am trying to make it work"`它工作得很好，当然`.java`不包含该`require java`语句。

**编辑：**

我按照以下[步骤操作](https://cwiki.apache.org/OPENNLP/hello-world.html)。

的输出`jruby -v`：

```
jruby 1.6.7.2 (ruby-1.8.7-p357) (2012-05-01 26e08ba) (Java HotSpot(TM) 64-Bit Server VM 1.6.0_35) [darwin-x86_64-java] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T22:53:54.300

Because it's written in Java and not Ruby?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T09:02:11.210

JRuby 是 Java 中的 ruby​​ 实现，这意味着如果你想使用 JRuby，你必须使用 ruby​​ 语法。您确实可以在 JRuby 中使用 Java 对象，但是使用 ruby​​ 语法——您不能使用 Java 语法。

例如，`frame = javax.swing.JFrame.new("Window")`使用`JFrame`, 但使用 ruby​​ 语法（即`JFrame.new`，而不是`new JFrame`）。

所以你的代码会是这样的：

```
require 'java'
# Require opennlp jars
Dir.glob('**/*.jar').each do |jar|
  require jar
end

java_import 'opennlp.tools.postag.POSTaggerME'
java_import 'opennlp.tools.postag.POSModel'

class HelloWorld
  def initialize(data)
    @model = POSModel.new(data)
  end

  def run(sentence)
    tagger = POSTaggerME.new(@model)
    words = sentence.split
    tags = tagger.tag(words)
    probs = tagger.probs

    probs.each_with_index do |p,i|
      puts "#{words[i]} => #{tags[i]} @ #{p}"
    end
  end
end

stream = File.new(ARGV[0]).to_java.getInStream
HelloWorld.new(stream).run(ARGV[1]) 
```

全部。红宝石。代码。

# javascript - 如何在 JavaScript 中动态添加点击事件处理程序？

> ID：12993012
> 
> 赞同：-2
> 
> 时间：2012-10-20T21:49:10.250
> 
> 标签：javascript, html

[JSFiddle](http://jsfiddle.net/namanyayg/KtmHb/)

有一个简单的 for 循环，任何人都可以向我解释为什么它不起作用？

这是代码（它也在小提琴中）

JS-

```
var anchors = document.getElementsByTagName('a');

for (var i, anchor; anchor = anchors[i]; i++) {
    console.log('looping');
anchor.addEventListener("click", setNavigation, false);
}​ 
```

HTML -

```
​&lt;a href="#"></a>
<a​​​​​​​​​​​​​​​​​​​​ href="lol"></a>​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T21:50:29.407

# android - 通过禁用视图的白线

> ID：12993013
> 
> 赞同：0
> 
> 时间：2012-10-20T21:49:13.447
> 
> 标签：android, view, line

有没有其他人看到这个？每当我有一个禁用的视图时，我都会有一条穿过视图的白线。我觉得我在对我的 SDK 进行更新后得到了这个，但我不确定。另外，我在一个谷歌群组上看到一个帖子说它与高度有关，所以我将其更改为他们建议的内容，但没有发生任何事情. 任何想法如何摆脱这个？谢谢。

```
<EditText
  android:id="@+id/etAmount"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:singleLine="true"
 /> 
```

在我的代码中，我创建了该字段

```
EditText etName = (EditText) findViewById(R.id.etName); 
```

然后基于一些布尔变量我将它设置为启用或禁用

```
etName.setEnabled(isOnce ? true : isSeries); 
```

# php - 内连接 ot 从第二个和第三个表返回结果

> ID：12993014
> 
> 赞同：-1
> 
> 时间：2012-10-20T21:49:14.080
> 
> 标签：php, arrays, inner-join

我对自己做错了什么感到困惑。我已经在许多资源中查找了这一点，包括我正在学习 PHP 的书，它似乎应该是正确的......但它只是不起作用。

```
<?php

try
{
    $sql = 'SELECT parks.id, parks.state, parks.name, parks.description, parks.site, parks.sname, parks.street, parks.city, parks.zip, parks.phone FROM parks
INNER JOIN comments ON parks.parkid = comments.parkid
INNER JOIN photos ON parks.parkid = photos.parkid 
INNER JOIN events ON parks.parkid = events.parkid';
$result = $pdo->query($sql);
}
catch (PDOException $e)
{
    $error = 'Error fetching data: ' . $e->getMessage();
    include 'output.html.php';
    exit();
}

foreach ($result as $row)
{
    $datas[] = array ('id' =>$row['id'],
    'parkid' =>$row['parkid'],
    'state' =>$row['state'], 
    'name' =>$row['name'], 
    'description' =>$row['description'], 
    'site' =>$row['site'], 
    'sname' =>$row['sname'],
    'street' =>$row['street'], 
    'city' =>$row['city'], 
    'phone' =>$row['phone'],
    'zip' =>$row['zip'],
    'commentname' =>$row['commentname'],
    'comment' =>$row['comment'],
    'event' =>$row['event'],
    'date' =>$row['date'],
    'description2' =>$row['description2']);
}

include 'writing.html.php'; 
```

这将返回第一个表（公园）中的所有数据就好了。项目commentname、comment、event、date 和description2 来自连接表（events 和comments）

如果我回显 '$row['state']' 我会得到正确答案。但是，如果我回显其他表中的任何项目（例如 $row['comment']），我不会得到任何结果。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T21:55:11.177

请试试这个：

```
try
{
    $sql = 'SELECT parks.id, parks.state, parks.name, parks.description, parks.site, parks.sname, parks.street, parks.city, parks.zip, parks.phone FROM parks
INNER JOIN comments INNER JOIN photos INNER JOIN events ON parks.parkid = comments.parkid and parks.parkid = photos.parkid and parks.parkid = events.parkid';
$result = $pdo->query($sql);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T22:51:29.740

SQL showing how to return columns from the joined tables

```
SELECT parks.id, 
       parks.state, 
       parks.name AS park_name, -- use an alias when column names exist in more than one table
       parks.description, 
       parks.site, 
       parks.sname, 
       parks.street, 
       parks.city, 
       parks.zip, 
       parks.phone,
       comments.comment, -- to return the comment from the comments table
       events.name AS event_name, -- return name from the event table
       event_date  -- return date from the event table
  FROM parks 
  INNER JOIN comments 
          ON parks.parkid = comments.parkid 
  INNER JOIN photos 
          ON parks.parkid = photos.parkid  
  INNER JOIN events 
          ON parks.parkid = events.parkid'
; 
```

This is not a complete solution, but a demonstration of ho to return data from the joined tables rather than purely from the main table

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T21:52:21.317

您没有编写查询来返回它们...

```
<?php

try
{
    $sql = 'SELECT parks.id, parks.state, parks.name, parks.description, parks.site, parks.sname, parks.street, parks.city, parks.zip, parks.phone 
    --insert here any other column names you want to have in PHP
    FROM parks
    INNER JOIN comments ON parks.parkid = comments.parkid
    INNER JOIN photos ON parks.parkid = photos.parkid 
    INNER JOIN events ON parks.parkid = events.parkid';
    $result = $pdo->query($sql);
} 
```

或者您可以全部获取（**请注意**，如果表格中有列具有相同的名称，这将不起作用！）：

```
 $sql = 'SELECT * 
    FROM parks
    INNER JOIN comments ON parks.parkid = comments.parkid
    INNER JOIN photos ON parks.parkid = photos.parkid 
    INNER JOIN events ON parks.parkid = events.parkid'; 
```

# google-app-engine - Golang GAE - 更改数据存储区结构中的变量名称

> ID：12993015
> 
> 赞同：1
> 
> 时间：2012-10-20T21:49:21.093
> 
> 标签：google-app-engine, variables, struct, go, datastore

我正在编写一个 Google Apps Engine Go 应用程序，我想更改存储在数据存储中的结构内的变量名称。

假设我有一个结构：

```
type AA struct{
    A string
    BB string
} 
```

并想`BB`变身`B`。如果我尝试仅更改`BB`为`B`，则数据存储区将在尝试将存储的值分配给没有该变量`BB`的新结构时开始给我错误。`AA`我可以添加`B`并仍然保留`BB`，但是结构会开始变得混乱。

我怎样才能巧妙地更改 GAE Go 数据存储中的变量结构，而无需临时复制整个数据库并擦除大量数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T03:24:26.283

您可以按照[Datastore docs](https://developers.google.com/appengine/docs/go/datastore/reference#Properties)`AA`中的说明进行实施，然后`PropertyLoadSaver`

1.  在`Load`方法中复制`BB`到`B`
2.  在`Save`方法中只需保存`A`并`B`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T12:59:41.720

查看有关[更新模型架构](https://developers.google.com/appengine/articles/update_schema)的 App Engine 文档，其中描述了更新架构然后删除过时属性所需遵循的流程。

希望这可以帮助。

# tumblr - 在 tumblr 索引上仅显示标题（带有链接）

> ID：12993019
> 
> 赞同：0
> 
> 时间：2012-10-20T21:50:21.337
> 
> 标签：tumblr

我正在寻找一种仅在我的 tumblr 索引上显示帖子标题（带链接）的方法，然后在您单击时显示整个帖子。

我知道“剪切”功能，但我只想简单地隐藏索引页面上的全部内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T02:55:15.017

只需用于`{block:IndexPage}`显示帖子标题并`{block:PermalinkPage}`显示所有内容。

不幸的是，只有三种 Tumblr 帖子类型支持标题：文本、聊天和链接。

# iphone - iPhone 5 / 第 5 代 iPod Touch 的加速度计/陀螺仪限制有何变化？

> ID：12993027
> 
> 赞同：14
> 
> 时间：2012-10-20T21:51:22.757
> 
> 标签：iphone, ios, accelerometer, ipod-touch, gyroscope

早在 iPhone 4 和第 4 代 iPod Touch 面世时，我就在玩弄 Apple 的 Core Motion 传感器融合算法，看看能否在非常局部的航位推算（在几英寸或几英尺的范围内）获得任何有趣的结果。考虑到 MEMS 传感器的规格相对较低，我没想到会有什么壮观的东西。尽管 Apple 的`CMDeviceMotion` `gravity`属性使用了不错的（虽然不透明）传感器融合算法，但互补`userAcceleration`属性并不完全针对航位推算。不过，我认为那里可能有足够的乐趣。

iPhone 4、iPhone 5、第 4 代 iPod Touch 和第 5 代 iPod Touch 显然都使用了 STMicroelectronics LIS331DLH 加速度计和 L3G4200D 陀螺仪。（实际上，我还没有看到 iTouch-5 陀螺仪的部件号，所以可能会有所不同。）

拆解：[iPhone-4](http://www.memsjournal.com/2010/12/motion-sensing-in-the-iphone-4-mems-accelerometer.html)、[iTouch-4](http://www.ubmtechinsights.com/reports-and-subscriptions/investigative-analysis/apple-ipod-touch/)、[iPhone-5](http://www.ubmtechinsights.com/apple-iphone-5/)、[iTouch-5](http://www.ifixit.com/Teardown/iPod+Touch+5th+Generation+Teardown/10803/3)

ST 规格显示加速度计可以在高达 ±8g 的 1000 Hz 下进行采样。该陀螺仪可以以 800 Hz 的频率进行采样，最高可达 ±2000 dps。

规格：[LIS331DLH](http://www.st.com/internet/analog/product/218132.jsp) , [L3G4200D](http://www.st.com/internet/analog/product/250373.jsp)

但是，在使用我的第 4 代 iPod Touch（iOS 5 和 iOS 6）时，我只能将采样率提高到 100 Hz。如果我设置`CMMotionManager` `deviceMotionUpdateInterval`低于 0.01，它会自动重置为 0.01。`accelerometerUpdateInterval`和相同`gyroUpdateInterval`。

此外，加速度计输出似乎总是被限制在 ±2g 左右。

我看到其他人对 iPhone 4 的类似限制发表了评论。

这两个界限都严重限制了我可以挤出设备的局部加速度计算（用我的第 4 代 iPod touch 进​​行实验）。我认为 Apple 已将这些界限设置得较低以降低功耗。虽然我不知道它们是设置在硬件中，还是设置在 iOS 的某个地方。

有没有人在 iPhone 5 或第 5 代 iPod Touch 上使用过这些加速度计和陀螺仪边界？（或者任何 iPad？）任何高于 100 Hz 的采样率？任何加速度计测量值超出 ±2g 的范围？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T22:11:14.237

在我所做的读数中，在确定加速度计将读取的最小/最大读数时，您通常有 2-3 个选择。2G 是加速度计的一个非常常见的选择，因为下一步 (8G) 通常是粗略读数以获得手动操作时所需的精细测量。如果您将其从建筑物上放下来测量撞击地面的力，您会想要使用 8G（或某些提供的 16G）。

[根据Corona Labs 的](http://docs.coronalabs.com/api/library/system/setAccelerometerInterval.html)人员的说法，赫兹似乎被故意限制在 100Hz 。显然是为了避免滥用电池。我读过加速度计是耗电最少的传感器，但我想这都是相对的，或者在 100Hz 左右的某个时间点，耗电量会急剧增加。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T23:01:51.937

我在 iPhone 5 上测试 techBASIC 并注意到一个异常情况，导致我进行了这个讨论。显然 iPhone 5 中的加速度计设置为 8G 范围！虽然我找不到任何参考资料来证实这一点，但当我上下摇晃 iPhone 5 时，techBASIC 的加速度计演示显示了这一点：

![iPhone 5 上的加速度图](../Images/7a6e3ff930f08ecd9d91171c72b40d44.png)

这对于物理应用来说是非常令人兴奋的。我使用 SensorTag 来测量模型火箭的加速度，因为它具有可选的 8G 范围，而 iPhone 没有——您现在可以省去 SensorTag 并直接使用 iPhone。

[http://www.youtube.com/watch?v=8YNjwcNXOK4](http://www.youtube.com/watch?v=8YNjwcNXOK4) [iPhone 火箭](http://www.youtube.com/watch?v=8YNjwcNXOK4)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-26T20:57:52.740

为了帮助回答您问题的另一半，我使用的是 iPad Mini，当我使用[Warren Whipple 的建议](https://stackoverflow.com/questions/12993027/changes-in-accelerometer-gyroscope-limitations-for-iphone-5-5th-gen-ipod-tou/14593677?#comment17708711_12993155)时，我发现如果我将它们设置为任何较小的值，an​​d 将立即重置为 0.01 `accelerometerUpdateInterval`。`gyroUpdateInterval`

但是，当我在设备上运行诊断测试时，我发现加速度计或陀螺仪数据的实际更新速率更接近 0.02 秒，即如果我将其设置`accelerometerUpdateInterval`为 0.01 秒并在 0.01 秒时查询加速度计数据，我会得到一个每隔一次获取的唯一读数，但如果我将其设置为 0.02 秒（或在 0.02 秒处查询），那么我在每次获取时都会获得唯一读数。

# google-chrome-extension - chrome 扩展-清单版本 2 _locales 问题

> ID：12993034
> 
> 赞同：21
> 
> 时间：2012-10-20T21:52:29.837
> 
> 标签：google-chrome-extension, manifest

我正在尝试为我的扩展更新清单版本，但它给了我这个问题：

> 指定了默认语言环境，但缺少 _locales 子树。

这是我的 manifest.json 文件，谁能告诉我问题出在哪里，我该怎么办？

```
{
  "name": "Selected Text", 
  "version": "0.1", 
  "manifest_version": 2,
  "description": "Selected Text and some changes", 
  "default_locale":"en", 
  "browser_action": { 
    "default_title": "S. Text", 
    "default_icon": "online.png",
    "default_popup": "popup.html"
  },
  "permissions": [
    "tabs", 
    "chrome://favicon/", 
    "http://*/*",  
    "https://*/*" 
  ],
  { 
    "matches": ["http://*/*"], 
    "js": ["selection.js"], 
    "run_at": "document_start", 
    "all_frames": true
  }
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-23T00:15:45.640

听起来您`_locales`在扩展根目录中缺少所需的目录。由于您要指定 a `default_locale`，因此您需要提供一个`_locales`目录，其中包含您的国际化选项。在您的情况下，您至少需要一个名为 的文件夹`_locales/en`，其中有一个`messages.json`文件，您可以在其中设置特定参数（有关更多信息，请参见[此处](https://developer.chrome.com/docs/extensions/reference/i18n/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-11T18:44:30.120

我遇到了同样的问题。

它的`"default_locate": "en",`.

但是，仍然有一个错误。所以把它放在一边。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-10T17:05:19.490

请检查文件层次结构。它应该像下面这样，

```
- manifest.json
-  _locales    
    -  en 
        - messages.json
    -  es
        - messages.json
    -  ...
        - messages.json 
```

## 参考

*   [铬.i18n](https://developer.chrome.com/docs/extensions/reference/i18n/)
*   [显现](https://developer.chrome.com/docs/extensions/mv3/manifest/#overview)
*   [消息.json](https://developer.chrome.com/docs/extensions/mv3/i18n-messages/#overview)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2020-08-29T23:27:52.770

"default_locale":"en",

看看这段代码并思考。你会得到解决方案。

# java - 用 Java 编写一个默认的 Comparator 类

> ID：12993035
> 
> 赞同：1
> 
> 时间：2012-10-20T21:52:34.067
> 
> 标签：java, oop, comparator, comparable

我正在用 Java 实现一个通用堆类。这个类有两个构造函数，一个是没有参数的默认构造函数。另一个接受用户可以传入的比较器对象，以便用户可以控制如何比较堆的元素。现在，如果用户使用默认构造函数，我希望我的类用于默认比较器对象。此对象的 compare 方法只是调用 compareTo() 方法（Comparable 接口的一部分）。有没有办法做到这一点，如果有，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T21:56:34.590

我猜一个通用比较器看起来像这样：

```
public class ComparableComparator<T extends Comparable<T>> implements Comparator<T> {
  @Override
  public int compare(T lhs, T rhs) {
    return lhs.compareTo(rhs);
  }  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T21:57:38.410

使用[`ComparableComparator`](http://commons.apache.org/collections/api-3.1/org/apache/commons/collections/comparators/ComparableComparator.html)来自 Apache Commons 的任意两个`Object`s 并在它们实现时进行比较`Comparable`。

或者，不采用比较器的构造函数应强制执行`K extends Comparable<K>`类型参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T22:14:59.370

Guava 提供了“自然排序” `Comparator`——可以预见的是—— [`Ordering.natural()`。](http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Ordering.html#natural--)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-30T14:44:31.643

Java 8 有`Comparator.naturalOrder()`它可以用作默认比较器。有关详细信息，请参阅[java.util.Comparator API](https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html#naturalOrder--)。

# python - 基于用户参数的输出格式

> ID：12993037
> 
> 赞同：1
> 
> 时间：2012-10-20T21:52:42.570
> 
> 标签：python, python-3.x, line-breaks

```
 250 255 260 265 270 275 280 285 290 295 300 305 310 315 320
 325 330 335 340 345 350 355 360 365 370 375 380 385 390 395
 400 405 410 415 420 425 430 435 440 445 450 455 460 465 470
 475 480 485 490 495 500 505 510 515 520 525 530 535 540 545
 550 555 560 565 570 575 580 585 590 595 600 605 610 615 620
 625 630 635 640 645 650 655 660 665 670 675 680 685 690 695
 700 705 710 715 720 725 730 735 740 745 750 
```

我正在尝试创建一个程序，您可以在其中输入下限（`250`在这种情况下）和上限（`750`在这种情况下，跳过数字（`5`在这种情况下）并告诉 Python 每行我想要多少个数字（`15`在这个案例）在断线之前，能以某种方式帮助我进行格式化吗？我有 Python 3.1.7。谢谢！

基本上我如何告诉python`15`在中断之前创建每行数字，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T22:44:01.597

使用 range 以 5 的步长创建从 250 到 750 的数字列表。使用 enumerate 循环它，它给出了值和一个计数器。检查计数器的模 15 以确定是否需要在打印中包含换行符。计数器从零开始，所以寻找 cnt%15==14。

```
import sys

for cnt,v in enumerate(range(250,755,5)):
    if cnt%15==14:
        sys.stdout.write("%d\n" % v)
    else:
        sys.stdout.write("%d " % v) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T23:57:43.167

@ [ljk07](https://stackoverflow.com/users/1658227/ljk07)

1.  xrange 更好 - 不会一次创建整个列表
2.  您实际上并不需要 sys.stdout - 只需添加逗号
3.  新样式格式更好

更紧凑，更现代一点怎么样

```
for cnt,v in enumerate(range(250,755,5),1):
    print '{}{}'.format(v,' ' if cnt % 15 else '\n'), 
```

编辑：错过了 python 3 部分-在这里**打印**得更好

```
for cnt,v in enumerate(range(250,755,5),1):
    print( '{:3}'.format(v),end=' ' if cnt % 15 else '\n') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T11:45:16.913

混合中的另一个选择是使用`itertools.grouper`配方：

```
def grouper(n, iterable, fillvalue=None):
    "Collect data into fixed-length chunks or blocks"
    from itertools import izip_longest
    # grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args) 
```

然后循环变为：

```
for line in grouper(15, range(250, 755, 5), ''):
    print(' '.join(map(str, line))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T21:58:21.733

如果必须打印新行，您应该保留一个计数器并检查计数器的模数。

可能看起来像这样：

```
if counter % 15 == 0:
    sys.stdout.write(str("\n")) 
```

# python - 在 Python OpenCV 或 PIL 中，制作电影或图像系列中最大像素值的图像的最佳方法是什么？

> ID：12993038
> 
> 赞同：1
> 
> 时间：2012-10-20T21:52:47.823
> 
> 标签：python, image-processing, opencv

除了创建新图像的明显方法，使用for循环遍历电影的每一帧以及每次迭代都经过帧中的每个像素，如果它大于当前值，则以相应的像素值更新图像。

我确实可以使用 cv.Get2D 访问帧中的单个像素，所以这很好。我只是想知道是否可以利用更快或更硬件优化的方式来执行此操作，因为我将在许多千兆字节的灰度视频上执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T00:20:48.400

有很多方法可以做到这一点，而“最佳”方法将取决于您可以使用的硬件。

如果您使用的是优质的 AMD 显卡，您可以使用[AMD 的 OpenVideo 解码](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCEQFjAA&url=http://developer.amd.com/tools/hc/AMDAPPSDK/assets/OpenVideo_Decode_API.PDF&ei=PT6DUOyKA4r89QTyhICgCQ&usg=AFQjCNE6hna3bJElky_Xu5wa-EEGzQ-wwg&sig2=i5pcHIwRaIAALiRKgk4kxw)库将帧传送到您的 GPU，然后使用 OpenCL 进行数学运算。它会很快变坏。

如果您没有 AMD 显卡，但您有不错的 NVidia 卡或 Intel HD4000（新的基于 Ivy Bridge 的 Core i7 系统），您可以使用 OpenCV 读取帧，然后将该数据传递给 OpenCL 并且仍然大规模并行计算。

即使您没有好的显卡，您仍然可以使用 OpenCL CPU 上下文进行计算，如果您使用`int4`矢量数据类型，您的代码将使用您的 Intel 或 AMD 处理器的 SSE2 寄存器。如问题陈述中所述，这应该是原始像素迭代速度的 4 倍以上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-11T01:22:26.980

添加一个答案，因为 K. Brafford 没有直接回答您问题的“OpenCV 或 PIL”部分

[从这里](https://www.kaggle.com/vfdev5/pil-vs-opencv)完成的基准测试来看，OpenCV 似乎**是明显的赢家**。

# mysql - 尝试为我的数据库编写 Mysql 查询

> ID：12993040
> 
> 赞同：0
> 
> 时间：2012-10-20T21:53:19.860
> 
> 标签：mysql, posts

这是我数据库中的图像[http://oi46.tinypic.com/2eb5lpw.jpg](http://oi46.tinypic.com/2eb5lpw.jpg)

![在此处输入图像描述](../Images/47ecd4a0599cf7318523f7cbb9b7cf65.png)

我想知道是否可以通过restID从“膳食”中获取帖子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:57:30.503

这很容易：

```
SELECT m.* 
FROM meals m JOIN cats c ON m.catId=c.catId 
WHERE restId='theRestIdIWantToQuery' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:57:22.033

是的，可以加入所有三个表

```
select * from restaurant r 
  inner join cats c on r.id=c.restId 
  inner join meals m on c.id = m.catID
  where r.id=YOURRESTID 
```

# pthreads - 子线程结束时需要减少父线程中的计数器

> ID：12993041
> 
> 赞同：0
> 
> 时间：2012-10-20T21:53:34.963
> 
> 标签：pthreads

我正在使用 pthreads 编写一个 cli/server 程序。服务器将建立一个连接并为每个要处理的连接创建一个单独的线程。一旦每个会话结束，我想通知主服务器进程连接已经结束。我不确定通知父线程子线程已结束的最佳方法是什么。我对此很陌生，所以仍然没有

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T00:25:43.727

当客户端<>服务器线程终止时，将函数/事件/委托传递给线程以调用。在 function/event/delegate/whatever 中，使用一些线程间通信机制来通知“主服务器进程”。究竟如何做到这一点取决于“主服务器进程”通常等待输入的内容。

# asp.net - 禁用gridview中的控件

> ID：12993042
> 
> 赞同：0
> 
> 时间：2012-10-20T21:53:38.623
> 
> 标签：asp.net

嗨，我想在具有特殊值的条件下禁用网格视图中的链接底部控件。例如，如果一行的计数变为 0，则该行的链接底部应该是不可见的。我应该怎么办？我应该在哪里写代码？这是我在行命令网格视图中编写的鳕鱼，但它仅适用于我将链接推到底部！但我想在加载之前将此鳕鱼应用到我的页面。请指导我

```
 int idx = Convert.ToInt32(e.CommandArgument);

    idx = idx - (GridView1.PageSize * GridView1.PageIndex);

    int ID = (int)GridView1.DataKeys[idx].Value;
    string connStr = ConfigurationManager.ConnectionStrings["dbconn"].ConnectionString;
    SqlConnection sqlconn = new SqlConnection(connStr);
    SqlCommand sqlcmd = new SqlCommand();
    sqlcmd = new SqlCommand("SELECT count(ID) FROM ReviwerArticle where ArticleID=@ArticleID", sqlconn);
    sqlcmd.Parameters.AddWithValue("@ArticleID", ID);

    sqlconn.Open();
    int count = ((int)sqlcmd.ExecuteScalar());

    sqlconn.Close();
    if (count == 0)
    {
                ((LinkButton)GridView1.Rows[idx].Cells[0].FindControl("LinkButton4") as LinkButton).Visible = false;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T03:18:26.380

然后不要尝试这样做，`onrowcommand`因为这只会在执行操作时触发。如果您在代码隐藏中使用一个函数来加载您的数据，那么此时有多少行被推送到gridview。如果行为零，则禁用该按钮。如果行大于 0，则启用该按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T04:55:19.507

在 GridView 的 RowDataBound 事件中执行此操作。

```
 if (e.Row.RowType == DataControlRowType.DataRow)
        {
            int ID = Convert.ToInt32(GridView1.DataKeys[e.Row.RowIndex].Value;
    string connStr = ConfigurationManager.ConnectionStrings["dbconn"].ConnectionString;
    SqlConnection sqlconn = new SqlConnection(connStr);
    SqlCommand sqlcmd = new SqlCommand();
    sqlcmd = new SqlCommand("SELECT count(ID) FROM ReviwerArticle where ArticleID=@ArticleID", sqlconn);
    sqlcmd.Parameters.AddWithValue("@ArticleID", ID);

    sqlconn.Open();
    int count = ((int)sqlcmd.ExecuteScalar());

    sqlconn.Close();
    if (count == 0)
    {
                ((LinkButton)e.Row.Cells[0].FindControl("LinkButton4") as LinkButton).Visible = false;

    }
        } 
```

# design-patterns - 重构现有设计以获取部分对象数据

> ID：12993045
> 
> 赞同：0
> 
> 时间：2012-10-20T21:53:45.617
> 
> 标签：design-patterns, database-design, optimization, refactoring

我有一个分层数据结构（使用实体 bean），比如一个 Book 类，它有一个 Book ID 和对一堆章节类的引用。每个章节类都有一个章节号和对许多页面类的引用。在我的 Display 类中，我想显示 Book 对象的 book id。

但是当我调用 getBook() 时，现有代码也会加载章节和页面，即使我只想从 Book 对象中获取 Book ID。这会导致大量的数据库查询。

我正在寻找一种设计模式来解决这个问题。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T21:58:58.600

您应该使用[延迟加载](http://en.wikipedia.org/wiki/Lazy_loading)设计模式。

这是一个很好的例子。 [http://www.precisejava.com/javaperf/j2ee/EJB.htm#EJB133](http://www.precisejava.com/javaperf/j2ee/EJB.htm#EJB133)

# iphone - “画廊”应用程序在IOS中共享视图

> ID：12993052
> 
> 赞同：1
> 
> 时间：2012-10-20T21:54:37.073
> 
> 标签：iphone, ios, view, gallery, share

iOS 中的“图库”应用程序（至少是最新版本）有一个漂亮的共享视图，它是黑色的，并且每个共享媒体（facebook、twitter、邮件等）都在不同的方格中。如果没人知道，我会上传一张图片。

我想使用这个视图，我想知道 - 这是 ios 库中的标准视图还是我必须自己创建一个像它一样的自定义视图？

Tnx 的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T21:58:03.207

它是一个`UIActivityViewController`，自 iOS 6.0 起可用。

# osx-mountain-lion - OSX 上的 Gstreamer

> ID：12993062
> 
> 赞同：1
> 
> 时间：2012-10-20T21:55:54.320
> 
> 标签：osx-mountain-lion, gstreamer, facetime, gst-launch

我正在尝试创建一个非常简单的 Gstreamer 管道，其中我有一个源元素，即我的 FaceTime 摄像头和一个接收器元素，即 udp 接收器。

[我首先使用此处](http://docs.gstreamer.com/display/GstSDK/Installing+on+Mac+OS+X)的说明安装 Gstreamer 。我跑了一些基本的管道没问题；但是，当我尝试使用以下命令时

```
./gst-launch-0.10 v4l2src ! xviimagesink 
```

我收到以下错误：

```
ERROR: pipeline could not be constructed: no element "v4l2src". 
```

所以我做了一些挖掘，结果发现 v4l2src 插件在 gst-plugins-good 中。我使用以下命令使用 macports 安装了这些优秀的插件：

```
port install gst-plugins-good 
```

很长一段时间后，一切安装都没有错误。现在 gst-launch 出现在三个地方。

```
/Library/Frameworks/GStreamer.framework/Versions/0.10/bin/gst-launch-0.10
/opt/local/bin/gst-launch
/opt/local/bin/gst-launch-0.10 
```

如果我尝试从这些目录中的任何一个运行上述管道，我仍然会得到

```
ERROR: pipeline could not be constructed: no element "v4l2src". 
```

如果我从任何地方键入以下命令，我会收到更多错误，但似乎仍然找不到 v4lsrc。

```
gst-launch v4l2src ! xviimagesink 
```

给出：

```
Dynamic session lookup supported but failed: launchd did not provide a socket path, verify that org.freedesktop.dbus-session.plist is loaded!
Dynamic session lookup supported but failed: launchd did not provide a socket path, verify that org.freedesktop.dbus-session.plist is loaded!
Dynamic session lookup supported but failed: launchd did not provide a socket path, verify that org.freedesktop.dbus-session.plist is loaded!
Dynamic session lookup supported but failed: launchd did not provide a socket path, verify that org.freedesktop.dbus-session.plist is loaded!
GConf Error: Failed to contact configuration server; some possible causes are that you need to enable TCP/IP networking for ORBit, or you have stale NFS locks due to a system crash. See http://projects.gnome.org/gconf/ for information. (Details -  1: Failed to get connection to session: Not enough memory)
ERROR: pipeline could not be constructed: no element "v4l2src". 
```

所以看起来我有 GStreamer 混乱，我仍然无法让我的相机工作，因为 GStreamer 找不到 v4l2src。

一些帮助将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T08:21:38.930

`v4l2src`意思是“video-for-linux (ver.2) source”。由于您没有运行“linux”，因此不能使用“v4l2”也就不足为奇了。

您可以尝试使用`osxvideosrc`（afaik 这是在 gstreamer-plugins-bad 中）。

通常，我建议您在寻找特定功能时检查您的机器上安装了哪些元素，例如：

```
$ gst-inspect | grep -i video |grep -i source 
```

PS：通常我发现`ffmpegcolorspace`在视频源和接收器之间放置一些色彩空间转换器（如）是个好主意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-07T16:25:43.757

对我来说，这两个来自 MacPorts ( [https://www.macports.org/](https://www.macports.org/) ) 的作品：

GStreamer 1.0, **applemedia: avfvideosrc: Video Source (AVFoundation)**，使用`device-index`参数选择设备（索引会因连接顺序而异）。

```
bash-3.2# port install gstreamer1*

iCeDeROM:~ cederom$ gst-inspect-1.0 |grep video | grep src
inter:  intervideosrc: Internal video source
decklink:  decklinkvideosrc: Decklink Video Source
applemedia:  qtkitvideosrc: Video Source (QTKit)
applemedia:  avfvideosrc: Video Source (AVFoundation)
ximagesrc:  ximagesrc: Ximage video source
videotestsrc:  videotestsrc: Video test source
autodetect:  autovideosrc: Auto video source 
```

GStreamer 0.10（**自动检测：autovideosrc：自动视频源**）

```
bash-3.2# port install gstreamer0*

iCeDeROM:~ cederom$ gst-inspect-0.10 |grep video | grep src
ximagesrc:  ximagesrc: Ximage video source
inter:  intervideosrc: FIXME Long name
gsettings:  gsettingsvideosrc: GSettings video src
gconfelements:  gconfvideosrc: GConf video source
autodetect:  autovideosrc: Auto video source
applemedia:  qtkitvideosrc: Video Source (QTKit)
applemedia:  miovideosrc: Video Source (MIO)
videotestsrc:  videotestsrc: Video test source 
```

我使用`autovideosink`or`osxvideosink`进行测试（第二个工作更快，首先使用 Xorg）。用于`gst-inspect <module>`模块信息。

# apache - .htaccess 重写规则不适用于我的 css 或图像目录，但它适用于我的 javascript？

> ID：12993066
> 
> 赞同：0
> 
> 时间：2012-10-20T21:56:23.687
> 
> 标签：apache, .htaccess, localhost

我正在尝试为 www.240list.com 调试我的 .htaccess 文件。

基本上，这是我的 htaccess 文件，用于我的 mvc / 目录重写文件等等。

```
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{HTTP_HOST} ^[^\.]+\.[^\.]+$
RewriteRule ^.*$ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

RewriteCond %{REQUEST_FILENAME} -f
RewriteRule .* - [L]

RewriteRule ^(\d+\/)?Css/(.*)$ Resources/css/$2 [L]
RewriteRule ^(\d+\/)?Javascript/(.*)$ Libs/Javascript/$2 [L]
RewriteRule ^(\d+\/)?Images/(.*)$ Resources/images/$2 [L]
RewriteRule .*$ App/index.php [L] 
```

该站点没有加载我的 css 或图像，如果您通过重写 url 转到图像的位置，例如[http://www.240list.com/Images/Logo.png](http://www.240list.com/Images/Logo.png) ，它会重定向到我的索引.php 因为它正在为 mvc 框架加载自动加载器，如果前 3 个目录重写规则不匹配，就会发生这种情况。

奇怪的是，一切都在我的 Uniserver 上使用 htaccess 工作，我用于在我的 localhost 上进行开发，但是当在 hostgator 上时，css 和 images 目录还没有工作，但 JavaScript 是。如果重要的话，它们都具有相同的目录权限。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T22:02:23.500

它似乎不起作用，因为它区分大小写。

试试这个：

```
RewriteRule ^(\d+\/)?Css/(.*)$ Resources/Css/$2 [L]
RewriteRule ^(\d+\/)?Javascript/(.*)$ Libs/Javascript/$2 [L]
RewriteRule ^(\d+\/)?Images/(.*)$ Resources/Images/$2 [L]
RewriteRule .*$ App/index.php [L] 
```

只是为了记录，我总是避免在 url 和系统路径中使用大写字母来避免这种错误。

**编辑：** 我刚刚注意到 Javascript 在 Libs 中，而其他在 Resources 中。这样对吗？

# jquery - jQuery Mobile 在 URL 中传递参数

> ID：12993069
> 
> 赞同：2
> 
> 时间：2012-10-20T21:56:49.547
> 
> 标签：jquery, url, mobile, parameters, anchor

我有一个登陆站点，它带有一个 id 参数，然后用于加载相应的页面。我想将相同的 ID 发送到下一页。它看起来像这样。

```
var pageID= "#gcn-lg-biz-detail-page?pid=" + mem.id;
$.mobile.changePage( pageID, { transition: "flip"} ); 
```

这目前正在工作。问题是着陆页的原始 id 仍然在下一页的 URL 中。它看起来像这样。

登陆页面

```
www.example.com/go/?id=1034 
```

关注页面

```
www.example.com/go/?id=1034#gcn-lg-biz-detail-page?pid=1034 
```

如您所见，url 中的初始页面有一个额外的 id。我意识到我可能不需要第二次发送 id，因为它已经从原始 URL 中存在，但第二页并不总是跟随着陆页，它可能会在用户点击列表项后加载，我会然后需要传递id。

我需要知道如何在 之前清理 URL，`$.mobile.changePage()`以便 URL 是干净的，只有哈希和参数跟随它。基本上我只想看起来像这样。

```
www.example.com/go/#gcn-lg-biz-detail-page?pid=1034 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:37:54.527

您可以通过这种方式重建您的网址：

```
var cleanUrl = window.location.protocol + "//" + window.location.host + window.location.pathname + window.location.hash 
```

我不完全确定这是否回答了你的问题。

# vb.net - 我可以将什么用作 Windows Phone 开发的 ComboBox 替代品？(vb)

> ID：12993075
> 
> 赞同：2
> 
> 时间：2012-10-20T21:57:44.150
> 
> 标签：vb.net, visual-studio-2010, windows-phone-7

整整 24 小时以来，我一直在彻底寻找用于 Windows Phone 开发的组合框替代方案。到目前为止，我发现的最好的是[这个](http://blogs.msdn.com/b/delay/archive/2010/11/03/listpicker-i-hardly-even-know-er-a-detailed-overview-of-the-windows-phone-toolkit-s-listpicker-control.aspx) ，非常好，但我真的在寻找可以在 Vb.net 中使用的东西。

PS：我使用 Visual Studio 2010 作为我的代码编辑器

期待感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:16:16.027

List Picker 是 ComboBox 的最佳替代品。您可以通过安装 Toolkit 更新来获取列表选择器：http: [//silverlight.codeplex.com/releases/view/55034](http://silverlight.codeplex.com/releases/view/55034)

无论您使用 VB 还是 C#，都没有关系。Listpicker 基本上是设计视图中 XAML 中的一个控件。唯一的区别是代码视图中的数据绑定语法。

# desire2learn - D2L Dropbox - 发布问题

> ID：12993076
> 
> 赞同：1
> 
> 时间：2012-10-20T21:57:55.213
> 
> 标签：desire2learn

我在尝试将文件发布到 D2L 中的保管箱时遇到错误。我在 PHP 中使用 HttpRequest。Org ID 和 Folder ID 都有效 - 我正在从 API 中检索文件夹 ID（使用 OrgID）。

这是 HttpRequest 输出：

```
POST /d2l/api/le/1.1/61381/dropbox/folders/677320/submissions/mysubmissions/?x_a=d0RNh1RjRGSMJu-dyj_wmw&x_b=_098IyP4bzkow_G-7Ke4Dv&x_c=3_L5VOX5RarK7mztTyX67sL_TyceBOK5r18GnRu9VbE&x_d=jVPR_DXuVf1JIl-YLe3Ad_OM2Ph8xG8UiMYriJVRc2w&x_t=1350769323 HTTP/1.1
User-Agent: PECL::HTTP/1.6.1-dev (PHP/5.2.6)
Host: <hostname>
Accept: */*
Content-Type: multipart/mixed; boundary=65ace1fa6e1f
Content-Length: 251

--65ace1fa6e1f
Content-type: application/json

{"Text":"test","HTML":null}
--65ace1fa6e1f
Content-Disposition: form-data; name=""; filename="file.txt"
Content-Type: application/octet-stream

eyAiVGVztCI6IlRsaXMgfXMgdGVzdYBkYXRhLiIgfQ==
--65ace1fa6e1f-- 
```

和回应：

```
HTTP/1.1 302 Found
Cache-Control: private
Content-Length: 131
Content-Type: text/html; charset=utf-8
Location: /d2l/error/404
Server: Microsoft-IIS/6.0
X-XSS-Protection: 0
X-Powered-By: ASP.NET
Date: Sat, 20 Oct 2012 21:42:26 GMT 
```

它似乎是 404（没有这样的保管箱文件夹，或没有这样的组织单位），但我知道这两个值都是有效的。

我已登录 D2L，并且在编辑 Dropbox 设置时，URL 中的 OrgID 和 DropboxID 都是正确的。相关用户有权访问保管箱，并且可以在 D2L 中这样做。

任何帮助，将不胜感激！

# c - 使用 Linux ABI (POSIX)，在文件开头插入字节的最有效方法是什么？

> ID：12993082
> 
> 赞同：1
> 
> 时间：2012-10-20T21:58:24.727
> 
> 标签：c, linux, posix

> **可能重复：**
> [C 在二进制文件的中间写入而不覆盖任何现有内容](https://stackoverflow.com/questions/10467711/c-write-in-the-middle-of-a-binary-file-without-overwriting-any-existing-content)

我正在编写一个偶尔需要在二进制文件开头插入 1-64k 数据的程序。POSIX API / Linux ABI 没有`insert(fd,buf,len)`函数调用。最有效的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T22:06:13.353

您的选择是：

1.  创建一个新文件，写入新数据并将旧数据复制到新文件，然后用新文件替换旧文件（的内容）。
2.  从文件末尾读取一个块，将块写入其新位置，重复，向后遍历文件。

(2) 的优点是它不会破坏符号链接或指向原始文件的多个链接。缺点（正如[Keith Thompson](https://stackoverflow.com/users/827263/keith-thompson)所指出的）是，如果它被中断，您就会丢失原始文件。

(1) 的缺点是，如果您需要保留链接数量并通过符号链接工作，则必须将新文件复制回旧文件，因此需要进行更多复制。优点是复制比较简单，原文件直到最后都不会被破坏。

选项 (2) 的代码还有另一个问题 —[写入二进制文件的中间而不覆盖任何现有内容](https://stackoverflow.com/questions/10467711)。在（二进制）文件的开头插入只是在文件中间插入的特定（甚至不是特殊）情况。

# java - Google AppEngine：什么是 SystemServiceServlet 及其与 _ah 目录的关系？

> ID：12993093
> 
> 赞同：13
> 
> 时间：2012-10-20T22:01:12.067
> 
> 标签：java, google-app-engine, gwt, google-cloud-endpoints

与[这个](https://stackoverflow.com/questions/12796589/how-to-disable-systemserviceservlet-configuration-in-app-engine-project)问题类似，我对这`SystemServiceServlet`甚至是什么感兴趣，以及它与`/_ah/spi/`我在自动生成的 web.xml 中看到的目录的关系。

这些有什么作用？为什么/何时是必要的？提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-26T19:20:50.747

在幕后，对端点的每个请求（中的路径`/_ah/api`）都映射到端点服务提供者接口中的请求（中的路径`/_ah/spi`）。servlet`SystemServiceServlet`处理这些请求。如果没有此映射，对端点的请求将不会成功。

当您表示希望在应用程序中使用端点时，Eclipse 的 Google 插件会自动添加映射。如果不使用 GPE，则需要手动添加映射。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-22T08:56:03.690

我认为这与 Google Endpoints API 有关。我在我的项目中启用了它们，并在之后看到了同样的变化。

# javascript - 无法更新

> ID：12993094
> 
> 赞同：0
> 
> 时间：2012-10-20T22:01:20.213
> 
> 标签：javascript, jquery

我得到了下面的代码，我有问题。除了第一个实例之外，我无法计算任何“Labouritems”实例的“总”数量，之后的每个实例我都无法计算。

```
var LabourItems = {
   rate: null,
   hours: null,
   total: null,
   init: function(object) {
      this.rate = parseInt($(object).children('.rate').first().val(), 10);
      // var rate = $(object).children('.rate').first();
      this.hours =parseInt($(object).children('.hours').first().val(), 10);
      this.total = this.rate * this.hours;
      this.updateTotal(object);
   },
   updateTotal: function(object) {
      $(object).children('.total').first().val(this.total || 0);
   }
}

//reactTochange for those inputs that you want to observe
$('.labouritems input').on("keyup", function() {
   $('.labouritems').each( function(key,value){
      LabourItems.init(this);
   });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T22:06:25.957

这很简单：您不创建*任何 'Labouritems' 实例*，您只有一个`Labouritems`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T22:06:37.973

您的代码中没有任何“实例”，因为您从不调用`new`.

要允许`LabourItems`将其视为对象，请将其声明为：

```
function LabourItems(object) {
     return {
         rate: null,
         ...
     }
}); 
```

然后`new LabourItems(this)`在您的事件处理程序中使用。

或者（更有效，因为每个实例将共享方法的副本，而不是包含自己的副本）使用普通的原型声明：

```
function LabourItems(object) {
     this.rate = null,
     ...
};

LabourItems.prototype.init = function() {
    ...
};

LabourItems.prototype.updateTotal = function() {
    ...
}; 
```

并`new LabourItems(this)`如上使用。

# java - 如何更改 HTMLPanel 的 html

> ID：12993095
> 
> 赞同：0
> 
> 时间：2012-10-20T22:01:33.603
> 
> 标签：java, html, gwt, panel

我想声明一个 HTMLPanel 的子类。在它的构造函数中，我想给它一些参数来构造包含的 html。

因为我必须调用超级构造函数作为第一条语句，所以我必须稍后在构造函数中更改 html。

我怎样才能做到这一点？

```
public class MyHTMLPanel extends HTMLPanel
{ 
  public MyHTMLPanel(String id, int anotherParameter)
  { super("");
     String html=""
    // ... some code th construct the html
    //??? this.setHtml(html);  
  }  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T22:42:05.303

您可以在下面找到我使用的示例，并且对我来说效果很好。我不记得为什么我不继承 HTMLPanel，无论是否有充分的理由。如果您在单个页面中包含多个相同类型的对象，您会注意到一种随机化 html id 的机制。

```
public abstract class HtmlPanelBase extends Composite
{
  private String _dynPostfix = "";
  protected final String id(final String staticId) { return staticId + _dynPostfix; }
  private final String wrapId(final String id) { return "id=\"" + id + "\""; }
  private final String wrapDynId(final String refId) { return wrapId(id(refId)); }

  private String _htmlAsText = null;
  public String getHtmlAsText() { return _htmlAsText; }

  abstract protected String htmlPanelBundleHtmlText();
  abstract protected List<String> idList();

  protected HTMLPanel _holder = null;
  private HTMLPanel createHtmlPanel(final boolean defineGloballyUniqueIds)
  {
    // Referent HTML panel text containing the reference id's.
    _htmlAsText = htmlPanelBundleHtmlText();
    if (defineGloballyUniqueIds)
    {
      // List of id's in the HTML Panel reference page to replace with dynamic/unique id's.
      final List<String> refIdList = idList();
      // Replace the reference id's with dynamic/unique id's.
      for (String refId : refIdList)
        _htmlAsText = _htmlAsText.replace(wrapId(refId), wrapDynId(refId));
    }
    // Return the HTMLPanel containing the globally unique id's.
    return new HTMLPanel(_htmlAsText);
  }
  public HtmlPanelBase(final boolean defineGloballyUniqueIds)
  {
    setup(defineGloballyUniqueIds);
    initWidget(_holder);
  }

  private void setup(final boolean defineGloballyUniqueIds)
  {
    if (defineGloballyUniqueIds)
      _dynPostfix = "_" + UUID.uuid().replace("-", "_");
    _holder = createHtmlPanel(defineGloballyUniqueIds);
  }
} 
```

现在你可以如何从上面的基础子类：

```
public class HtmlPanelTemplate extends HtmlPanelBase
{
  private final static boolean _defineGloballyUniqueIds = false;
  private final static int _numIdCapacity = 40;

  public HtmlPanelTemplate()
  {
    super(_defineGloballyUniqueIds);
    setup();
  }

  @Override
  protected String htmlPanelBundleHtmlText()
  {
    return YourClientBundle.INSTANCE.getYourFileHtml().getText();
  }

  @Override
  protected List<String> idList()
  {
    final List<String> idList = new ArrayList<String>(_numIdCapacity);
    return idList;
  }

  private void setup()
  {
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T23:20:39.637

您不需要继承 HTMLPanel。您可以创建一个简单的 Composite 小部件：

```
public class myPanel extends Composite {

    private HTMLPanel panel = new HTMLPanel();

    public myPanel(String id, int anotherParameter) {
        // set HTML to panel based on your parameters
        initWidget(panel);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-26T10:28:39.463

```
htmlPanel.getElement().setInnerHTML(...) 
```

不知道这是否适用于派生类的构造函数。但是为特定的内容文本设置一个类并不是一个好的解决方案。

# android - 使用 asynctask 进行多次下载

> ID：12993098
> 
> 赞同：3
> 
> 时间：2012-10-20T22:01:49.863
> 
> 标签：android, multithreading, android-asynctask

对于我的应用程序（支持 Android 2.2+），我必须检查很多（大约 700 个）不同网页的 HTML 代码，并从每个网页中检索一个名称。我将所有 URL 存储在一个数组中。

我现在使用单个 Asynctask 并使用如下 URL 遍历数组：

（来自 Asynctask 的 doinbackground 的片段）

```
publishProgress(urls.size());
int a = 0;
for(String code : urls) {
    if(!running) return null;
    try {
    URL url = new URL(code);
    HttpURLConnection con = (HttpURLConnection) url.openConnection();
    naam_codes.put(readStream(con.getInputStream(), true).get(0), code);
      } catch (Exception e) {
        running = false;
      }
    publishProgress(++a); 
```

和 readstream 是：

```
BufferedReader reader = null;
      ArrayList<String> html = new ArrayList<String>();
      try {
          reader = new BufferedReader(new InputStreamReader(in, Charset.forName("ISO-8859-1")));
          if (snel){
              //reading, matching and stuff
          }
          else {
              //other reading, matching and stuff
            }
          }       
      } catch (IOException e) {
        //pass
      } finally {
         if (reader != null) {
             try {
                 reader.close();
             } catch (IOException e) {
                 return null;
             }
         }
      }
      return html; 
```

现在我的问题是它必须等待一个下载+匹配完成才能开始一个新的。应该可以加快速度吧？在监视了一下之后，该进程似乎没有完全使用 CPU 或互联网带宽（？）。我是否应该在 UI 线程上迭代并执行多个 Asynctask，而不是在一个 Asynctask 中进行迭代？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T22:07:52.410

在 API 11 之前，多个 AsyncTask 不会利用多个内核。之后，您可以在每次下载/解析时创建一个 AsyncTask，并使用`executeOnExecutor`带有参数的函数并行执行它们`AsyncTask.THREAD_POOL_EXECUTOR`。

从[文档](http://developer.android.com/reference/android/os/AsyncTask.html)中：

> ## 执行顺序
> 
> 首次引入时，AsyncTask 在单个后台线程上串行执行。从 DONUT 开始，这被更改为允许多个任务并行运行的线程池。从 HONEYCOMB 开始，任务在单个线程上执行，以避免并行执行导致的常见应用程序错误。
> 
> 如果你真的想要并行执行，你可以使用 THREAD_POOL_EXECUTOR 调用 executeOnExecutor(java.util.concurrent.Executor, Object[])。

* * *

如果我是你，我会构建自己的服务器（只是一个 CRON 任务在某处启动一个 PHP 脚本 + 一个 MySQL 数据库 + 一个 PHP 脚本来提供您的数据）并且我不会让应用程序进行处理。

让您的服务器完成 700 次下载，解析它们，将您需要的内容存储在数据库中。然后让您的应用程序访问您的服务器脚本，该脚本将从您的数据库中选择所需的信息。

好处：

*   您的服务器有更好的带宽
*   它具有更强的处理能力
*   您的应用程序可以请求他们需要的任何数据，而不是下载和解析数百个页面。

不方便：

*   您可能会在使新数据可用时产生一点延迟（取决于您的 CRON 任务的执行周期和更新数据库的执行时间）

# java - WebSockets - 创建通道和推送数据的正确方法

> ID：12993099
> 
> 赞同：1
> 
> 时间：2012-10-20T22:01:50.487
> 
> 标签：java, websocket, push-notification, atmosphere

我有一个场景，我想通知我网站的用户有人评论了他们也评论过的文章。这很像当有人回答问题时 SO 通知我的方式！

服务器端，我坚持评论，然后查找评论同一篇文章的所有用户。然后我广播（我正在使用 Atmosphere）：

```
PushContext pushContext = PushContextFactory.getDefault().getPushContext();

for(User u : users){       
    // channel name, message
    pushContext.push("/user_" + u.id, "someone commented! blah blah"); 
} 
```

我广播的“频道”是用户的“自己的”频道，因为我不希望每个用户都收到通知。我在频道名称中使用用户 ID 来实现这一点。

这是确保只有相关用户得到通知的正确方法吗？

我想我还想做两件事：

1.  只推送给我认为仍然在线的用户。如果他们不在线，那么向他们推送资源就是浪费。
2.  加密消息，否则任何人都可以收听我的消息，如果他们知道我的用户 ID。

还有什么我需要考虑的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T17:20:12.530

SO 使用 WebSockets，例如，当对此帖子发表评论时，您会在 SO 页面左上角的状态栏中收到通知。

当页面加载时，浏览器会发出一个协议升级请求，如下所示：

```
Request URL:ws://sockets-se.or.stackexchange.com/
Request Method:GET
Status Code:101 Switching Protocols
Request Headersview source
Connection:Upgrade
Cookie:__qca=P0-1697817643-1763440830313; __utma=27376923.959753990.1338240830.1353943751.1384115154.33; __utmc=27693525; __utmz=27699983.1356175156.31.31.utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=(not%20provided)
Host:sockets-se.or.stackexchange.com
Origin:http://stackoverflow.com
Sec-WebSocket-Extensions:x-webkit-deflate-frame
Sec-WebSocket-Key:6qFl45+6gZ526yMMo79zWQ==
Sec-WebSocket-Version:13
Upgrade:websocket
(Key3):00:00:00:00:00:00:00:00
Response Headersview source
Connection:Upgrade
Sec-WebSocket-Accept:B4h2G+gi78iNZZXg+o6iAztgF1I=
Upgrade:websocket
(Challenge Response):00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00 
```

然后打开套接字，服务器可以向浏览器发送更新。例如，浏览器收到我的评论通知，如下所示：

```
{"action":"1-question-12993099","data":"{\"a\":\"comment-add\",\"id\":12993099,\"commentid\":19334206,\"acctid\":1298157}"} 
```

它不包含实际的评论；看来这只是用来告诉浏览器显示红色图标。然后，当您单击时，它会请求获取页面，包括评论。问题 ID (12993099)、评论 ID (19334206) 和帐户 ID (1298157) 包含在该框架中。

我在上面看不到任何可以阻止某些黑客创建 Web 套接字来收听您的通知的内容。这些 cookie 在我看来是 Google Analytics cookie，或者至少是第二个和第三个。也许第一个是一些你不会知道的代码，如果我不只是发布它（不用担心，我会改变它！）。

在您的 Atmosphere 示例中，我知道当 Web 套接字不起作用时，它默认为长轮询，然后请求一个带有通道名称的 URL。因此，您可以让客户端生成一个只有它知道的频道名称并将其与登录用户相关联。但是任何嗅探网络的人都可以再次访问您的流量，因此您必须使用安全 Web 套接字 (WSS) 和 HTTPS（用于长轮询后备）来保护它。

# notepad++ - Notepad++：文本块太大，无法查找和替换

> ID：12993101
> 
> 赞同：0
> 
> 时间：2012-10-20T22:01:53.837
> 
> 标签：notepad++

我进行了搜索，但找不到答案。我目前正在使用 Notepad++ 进行一些文本编辑。我需要用一个非常大的文本块替换几个文本块。我要替换的文本块对于替换文本框来说太大了。有解决方法吗？或者可能是另一个可以处理大型查找和替换的程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T17:37:48.987

EditPad Pro 有一个巨大的查找/替换窗口。我希望 Notepad++ 也是如此。

[http://www.editpadpro.com/](http://www.editpadpro.com/)

# php - 如何使用 .htaccess 重写具有 php 标头重定向的页面？

> ID：12993102
> 
> 赞同：2
> 
> 时间：2012-10-20T22:01:56.023
> 
> 标签：php, .htaccess, redirect, rewrite

这是我的第一篇文章，所以请放轻松。

基本上，我在我的 htaccess 文件中进行了一些重写，以将我编造的搜索友好 URL 更改为实际 URL，并且它们大部分都在工作。例如这个：

[http://www.negativeworld.org/7849/news/nintendo-download-for-may-24-2012](http://www.negativeworld.org/7849/news/nintendo-download-for-may-24-2012)

会变成这样：

[http://www.negativeworld.org/article.php?id=7849](http://www.negativeworld.org/article.php?id=7849)

很好……如果那篇文章存在的话。如果文章不存在，php代码使用这个：

```
header("Location: boarderror.php");
exit; 
```

将用户带到 boarderror.php。如果用户直接在 article.php 上到达那里并且 id 不好，这很好用，但是当我尝试从搜索友好的 url 进行 htaccess 重定向并且 id 不好时，htaccess 重定向会在给出之前挂起一段时间我这条消息：“页面没有正确重定向”。

我想要的是当 id 错误时它可以转到我的 boarderror.php 页面。所以基本上我希望我的 htaccess 页面采用服务器友好的 URL，切换到真正的 URL，然后……然后放手，PHP 将从那里获取它。这是我进行切换的 htaccess 行：

```
RewriteRule ^([0-9]+)/(news|review|editorial|podcast)/(.*)$ /article.php?id=$1 [L] 
```

我究竟做错了什么？（顺便说一句，我意识到如果我正确设置了所有搜索友好的 URL，那么无论如何都不应该有错误的 id，但我想安全起见......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T23:38:44.463

你的想法没有错。对于错误的 ID，可以进行双重重定向。问题是第二次重定向是如何发生的。尝试

```
header("Location: http://www.negativeworld.org/boarderror.php"); 
```

或者

```
header("Location: /boarderror.php"); 
```

随着您的重定向，浏览器正在尝试`http://www.negativeworld.org/9999/news/boarderror.php`（9999 是错误的 ID），它陷入了无限的重定向循环，浏览器在 10 次尝试后切断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T23:37:00.937

重定向规则很好，问题出在您的标头函数调用中。当您仅提供文件名时，标头重定向会将用户发送到同一文件夹中的文件，就像仅使用文件名创建 html 链接一样。

假设我尝试加载[http://www.negativeworld.org/99999/news/nintendo-download-for-may-24-2012](http://www.negativeworld.org/99999/news/nintendo-download-for-may-24-2012)并且该 ID 无效。在这种情况下，它会将用户发送到[http://www.negativeworld.org/99999/news/boarderror.php](http://www.negativeworld.org/99999/news/boarderror.php)，这会再次触发重定向并陷入无限循环（或者如果浏览器不够智能，则会陷入无限循环停止一遍又一遍地请求相同的 URL）。

根据[RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30)，位置标头应提供绝对 URI，因此您应该执行以下操作：

```
header("Location: http://www.negativeworld.org/boarderror.php");
exit; 
```

# ruby - Ruby 中的多线程系统调用

> ID：12993105
> 
> 赞同：0
> 
> 时间：2012-10-20T22:02:25.393
> 
> 标签：ruby, multithreading, system, system-calls, sidekiq

我有一个使用 sidekiq 将一些处理发送到队列的系统。这些过程包括对操纵图像的程序进行系统调用。我对这个程序的表现非常糟糕。当我“顶”我的系统时，几乎所有的 cpu 都被 ruby​​ 消耗了，而图像软件只消耗了一些 CPU。

我尝试用 5、10、20、30 名工人进行测试。增加更多的工人并不能提高处理性能（高值甚至更糟）。

我的工人是这样的：

```
def perform(file)
    command = "convert -strip -resize 580x580 -quality 90 -sampling-factor 4:2:0 -interlace Plane #{file} #{file}.main"
    `#{command}`
end 
```

有什么方法可以改善 Ruby 中的多线程系统调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T22:08:13.603

不幸的是，问题在于 Resque 的核心设计。因为它使用派生工作者模型，并且因为 Ruby 1.9 对 CoW 不友好，所以每个子进程中的第一次 GC 调用会导致整个进程的内存空间的完整副本。这很慢。

许多人专门因为这个问题而转向[Sidekiq](https://github.com/mperham/sidekiq)作为替代方案。在 Ruby 1.9 下，线程比 fork 便宜得多，并且应该会显着提高性能。

也就是说，一旦 Ruby 2.0 提供了对 CoW 友好的内存 GC 模型，Resque 应该会更具竞争力。但是，至少在几个季度内不会发生这种情况。

# devise - 轨道处理设计多个用户

> ID：12993106
> 
> 赞同：1
> 
> 时间：2012-10-20T22:02:28.473
> 
> 标签：devise, ruby-on-rails-3.2, cancan, sti

# 路线.rb

```
 get "main/index"
  match "profile" => "main#profile"
  match "account" => "main#account"
  match "subjects" => "main#subjects"
  match "messages" => "main#messages"
  match "homework" => "main#homework"
  devise_for :students,:teachers 
```

# 应用程序/模型/user_profile.rb

```
class UserProfile < ActiveRecord::Base
  attr_accessible :first_name, :gender, :institute_id, :last_name, :new_lesson, :new_messages, :user_type, :year,:avatar
  has_attached_file :avatar, :styles => { :medium => "300x300>", :thumb => "100x100>" },:default_url => '/assets/default_avatar.png'
  belongs_to :user 
end 
```

# 模型用户.rb

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable
  attr_accessible :email, :password, :password_confirmation, :remember_me , :user_profile_attributes
  has_one :user_profile
  accepts_nested_attributes_for :user_profile
end 
```

# 模型学生.rb

```
class Student < User
end 
```

# 模范教师.rb

```
class Teacher < User
end 
```

# 用户迁移

```
class AddTypeToUsers < ActiveRecord::Migration
  def change
    add_column :users, :type, :string
  end
end 
```

# user_profile 的迁移

```
class CreateUserProfiles < ActiveRecord::Migration
  def change
    create_table :user_profiles do |t|
      t.string :first_name
      t.string :last_name
      t.integer :user_type
      t.integer :gender
      t.integer :year
      t.integer :institute_id
      t.integer :new_messages
      t.integer :new_lesson
      t.integer :user_id
      t.timestamps
    end
  end
end 
```

# 怀疑

基本上我正在做的是，生成一个设计用户模型，然后通过 STI 我从用户模型继承学生和教师，我还创建了一个与用户模型具有 OneToOne 关系的 UserProfile 模型，因此也与学生和教师模型建立了关系，生成 UserProfile 模型以包含所有常见字段，例如头像、名字、姓氏、机构 ID 等。

我有3个疑问

首先，是否有任何更简单的方法来实现 devise`current_user`提供的会话变量的使用，在这种情况下，将有两个会话变量，一个用于教师，一个用于学生，例如`current_teacher`和`current_student`，所以我的问题是，有没有办法只是用一个公共变量替换两个变量

其次，当我创建一个新用户时，会创建一个新的 user_profile，但是当我创建一个新学生并检查`somestudent.user_profile`时，它返回 nil

第三，STI 或 cancan 角色是否有任何很好的实现来完全满足我的需求并实现我正在寻找的东西？

请帮忙，提前谢谢

# python - Google 服务帐户 Http 错误 500 - Python

> ID：12993108
> 
> 赞同：1
> 
> 时间：2012-10-20T22:03:02.837
> 
> 标签：python, jwt, google-api-python-client

我一直在努力解决这个问题，所以我希望有人能提供帮助。

似乎是使用服务帐户访问 Google API 端点的相对简单的代码 - 但我收到 Http Error 500

它适用于 Tasks API，相同的身份验证。

我的源代码：

```
import httplib2
import pprint
import sys

from apiclient.discovery import build
from oauth2client.client import SignedJwtAssertionCredentials

f = file('key.p12', 'rb')
key = f.read()
f.close()

credentials = SignedJwtAssertionCredentials(
'403695561042-6ntna04usrl5sscg3ovij6t4d8vfvsqp@developer.gserviceaccount.com',
key,
scope='https://www.googleapis.com/auth/apps.order.readonly')

http = httplib2.Http()
http = credentials.authorize(http)
service = build("reseller", "v1", http=http)
lists = service.subscriptions().list().execute(http=http) 
print lists 
```

回复：

```
HttpError: <unprintable HttpError object> 
```

追溯：

```
Traceback (most recent call last):
  File "/Library/Python/2.7/site-packages/flask/app.py", line 1701, in __call__
    return self.wsgi_app(environ, start_response)
  File "/Library/Python/2.7/site-packages/flask/app.py", line 1689, in wsgi_app
    response = self.make_response(self.handle_exception(e))
  File "/Library/Python/2.7/site-packages/flask/app.py", line 1687, in wsgi_app
    response = self.full_dispatch_request()
  File "/Library/Python/2.7/site-packages/flask/app.py", line 1360, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Library/Python/2.7/site-packages/flask/app.py", line 1358, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Library/Python/2.7/site-packages/flask/app.py", line 1344, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/admin/Sites/newmind/reseller-api/app.py", line 79, in index
    lists = service.subscriptions().list().execute(http=http)
  File "build/bdist.macosx-10.8-intel/egg/oauth2client/util.py", line 120, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "build/bdist.macosx-10.8-intel/egg/apiclient/http.py", line 678, in execute
    raise HttpError(resp, content, uri=self.uri) 
```

直接从 Google Sample 复制代码，只是更改了服务名称和身份验证。 [http://code.google.com/p/google-api-python-client/source/browse/samples/service_account/tasks.py](http://code.google.com/p/google-api-python-client/source/browse/samples/service_account/tasks.py) 任务 API 返回具有相同凭据的 http 200。

当我使用一个非常标准的 httplib2 请求时，这是我得到的响应：

```
WARNING:oauth2client.util:new_request() takes at most 1 positional argument (2 given)
    {'status': '500', 'content-length': '52', 'x-xss-protection': '1; mode=block', 'x-content-type-options': 'nosniff', 'expires': 'Sat, 20 Oct 2012 06:25:19 GMT', 'server': 'GSE', '-content-encoding': 'gzip', 'cache-control': 'private, max-age=0', 'date': 'Sat, 20 Oct 2012 06:25:19 GMT', 'x-frame-options': 'SAMEORIGIN', 'content-type': 'application/json; charset=UTF-8'}
    {
     "error": {
      "code": 500,
      "message": null
     }
    } 
```

如果有人可以提供帮助，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T22:26:02.923

有点长镜头，但是您是否在项目控制台中打开了 Reseller API？我记得在尝试访问我最初使用的服务以外的服务时遇到了类似的问题。

编辑：根据下面的评论，另一种解决方案是使用 Flow 并将其设置`access_type`为`offline`允许刷新令牌，而无需用户不断地重新进行身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T19:21:43.090

在不使用流程的情况下，可以执行以下操作：

您收到的错误是因为您 a) 已正确通过 API 身份验证，但 b​​) 您使用的用户无权访问您尝试访问的帐户。

我遇到了同样的问题，通过将 OAuth2 服务帐户电子邮件地址添加到 Analytics 帐户的用户来解决。

对于您要访问的每个帐户，您必须单独添加。

# sql - 加入时的 Doctrine 查询生成器错误

> ID：12993109
> 
> 赞同：0
> 
> 时间：2012-10-20T22:03:05.583
> 
> 标签：sql, symfony, doctrine-orm

如何使用学说查询生成器编写以下内容？

```
SELECT
    registry.id ,
    registry.couple_id,
    registry.gift_id,
    Sum(purchase.amount) as totalContribution,
    gift.title,
    gift.price
FROM
    gift,
    registry
LEFT JOIN
    purchase ON purchase.registry_id = registry.id
WHERE
    registry.gift_id = gift.id
    AND registry.couple_id = 1 
GROUP BY
    registry.couple_id,
    registry.gift_id 
```

我试过了：

```
$qb = $this->createQueryBuilder('g') //gift
    ->from('\BBB\GiftBundle\Entity\Registry', 'reg')
    ->select('g.id , g.title, g.description, g.price, g.imageMedium')
    ->addSelect('SUM(p.amount) as totalContribute')
    ->leftJoin('\BBB\GiftBundle\Entity\Purchase', 'p', 'ON','reg.id = p.registry')
    ->where('reg.gift = g.id')
    ->AndWhere('reg.couple = :coupleID')
    ->orderBy('reg.id','DESC')
    ->groupBy('reg.couple')
    ->groupBy('reg.gift')
    ->setParameter('coupleID', $coupleID); 
```

但它给了我以下错误：

> [语义错误] 第 0 行，第 178 列，靠近“p ON reg.id =”：错误：标识变量 BBB\GiftBundle\Entity\Purchase 用于连接路径表达式，但之前未定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T00:28:08.703

DQL 只能连接与当前实体（`Registry`位于此 DQL 中）相关的表。您的`Registry`实体将需要具有已声明的 OneToMany 关系。

假设这个关系被称为`purchases`你会像这样加入：

```
->leftJoin('reg.purchases', 'p') 
```

# vb.net - VB.NET 应用程序冻结且未运行

> ID：12993110
> 
> 赞同：2
> 
> 时间：2012-10-20T22:03:11.667
> 
> 标签：vb.net, multithreading, stream, webclient

我有一个应用程序，它使用循环调用带有一些参数的新线程，该应用程序很棒，但是当涉及到 100,000 条记录左右时，应用程序没有运行（在 CPU 和内存中 taskmgr 没有改变，因此假设程序不管用）

动作是：它运行一个函数，该函数首先收集一个数字 (X)，然后创建一个从 0 到 X 的循环，在这个循环中，我们创建一个新的线程和选项，如 IsBackground (True)、Priority (Normal) 和初始化线程。在同一个函数中 Thread.Join 有一个 Do While (true)，如果你可以穿过它刷新界面，中止线程，内存清理和 DoEvents！

在线程中使用 WebClient 来 OpenRead 并将所有这些保存在 Stream 中。使用 WebClient.IsBusy = False Do 虽然我们确保下载信息并继续使用 Regex.Match 进行 MatchCollection。使用 For Each 匹配并打印结果，并结束 Exit Do。

然后返回到返回一段时间的函数......

起初我认为这是因为列表框中打印的结果数量，但我得到了它并且仍然失败，而不是当它达到 100,000 条记录时，如果不是 100,800 左右。

我需要帮助，我不太了解 vb.net 中的编程，也不明白为什么。

编辑：我尝试删除 For Each 线程，检查它是否是。它已经完全出现了，但我不明白为什么当线程中的“For Each”时它甚至没有给我一个错误¿解决方案？

* * *

编辑：我发现了这个错误，但我不明白我解释：

A）-> 使用 For 0 到 4500 初始化函数，我调用一个带参数的线程并接收 50 个结果，（225000 个寄存器 <- 4500 * 50）当主体 For 到达 ~ 4000，在线程中的 MatchCollection ¿失败？我没有收到 Regex.Matches 的信息，然后被冻结。

B) --> 用 4000 到 4500 初始化函数，我调用一个带参数的线程并接收 50 个结果，（225000 个寄存器 <- 4500 * 50），仅此而已开始第一个线程（现在记住从 4000 到 4500 开始，我已收到 25000 个寄存器）程序被冻结，我检查断点并失败包含 Regex.Matches 结果的变量并尝试循环该程序被冻结的数组！

为什么？¿ 解决方案？

谢谢！！

* * *

功能1（初始化线程）

功能 1 ->

```
For Me.d = 0 To Pages(0) ' <-- 4500
        Dim param(1) As Object
        param(0) = "name"
        param(1) = "url/" & d
        Dim thread As New Thread(AddressOf Thread_)
        thread.IsBackground = True
        thread.Name = "name"
        thread.Priority = ThreadPriority.Normal 'ThreadPriority.Lowest
        thread.Start(param)
        Do While thread.Join(True)
            thread = Nothing
            ClearMemory()
            Application.DoEvents()
            Exit Do
        Loop
    Next d 
```

线程函数：

```
Public Sub Thread_(ByVal param As Object)
    Try
        If param(0) = "name" Then
            Using Client As New WebClient
                Client.Headers("User-Agent") = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.13 (KHTML, like Gecko) Chrome/24.0.1290.1 Safari/537.13"
                Dim html As Stream = Client.OpenRead(param(1))
                Using reader As New StreamReader(html)
                    Do While wc.IsBusy = False
                        Dim ReadStr = reader.ReadToEnd
                        links = Regex.Matches(ReadStr, "coderegex", RegexOptions.Compiled + RegexOptions.RightToLeft + RegexOptions.Multiline + RegexOptions.Singleline)
                        For Each match In links
                            Registres(0) = Registres(0) + 1
                            Debug.Print("Registro: " & Registres(0) & " pág:" & PagesComplete(0))
                        Next
                        PagesComplete(0) = PagesComplete(0) + 1
                        links = Nothing
                        Client.Dispose()
                        Exit Do
                    Loop
                End Using
            End Using
        End If
    Catch ex As Exception
        Debug.Print("Error " & ex.Message)
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T12:19:06.837

这部分看起来很可疑：

```
Do While thread.Join(True)
    thread = Nothing
    ClearMemory()
    Application.DoEvents()
    Exit Do
Loop 
```

不应该是这样的：

> ```
> thread.Join()
> thread = Nothing
> ClearMemory() 
> ```

如果您使用的是框架 >=4，那么您可以考虑使用 Parallel.For ( [MSDN](http://msdn.microsoft.com/library/system.threading.tasks.parallel.for%28v=vs.110%29.aspx) )。您无需创建自己的线程，而是让框架为您处理它。

# c++ - 奇怪的模板参数语法

> ID：12993111
> 
> 赞同：0
> 
> 时间：2012-10-20T22:03:27.803
> 
> 标签：c++, templates

```
template<typename Tag, typename Tag::type M>
struct Rob { 
  friend typename Tag::type get(Tag) {
    return M;
  }
}; 
```

我从 Johannes Schaub 的博客中获取了这段代码，我以前从未见过用于第二个模板参数的语法。什么`"Tag::type M"`意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T22:08:57.947

只要它们是编译时常量，就可以有非类型模板参数。也就是说，你可以有类似的东西

```
template <int M> ... 
```

现在，让非类型模板参数的类型依赖于另一个模板参数的嵌套类型可能是合理的：

```
template <typename T, typename T::type M> ... 
```

该部分`typename T::type`声明它`type`是一种类型，并且指定的模板参数属于这种类型。一个更具体的例子是

```
template <typename T, typename T::size_type S> ... 
```

当使用容器类型实例化时，`S`将是容器的`size_type`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T22:07:41.380

在这种情况下，这意味着 typename`Tag`为自己定义了一个 typename，称为`Tag::type`. 如果您在其中定义类型（或静态变量/函数），则类可以充当名称空间，这就是您`::`在此处使用名称的原因，就像您拥有名称空间一样。

你的例子相当于

```
<typename MyFirstType, typename MyFirstType::type MySecondType> 
```

# c# - 添加持久设置后调试非常慢

> ID：12993112
> 
> 赞同：1
> 
> 时间：2012-10-20T22:03:55.117
> 
> 标签：c#, .net, visual-studio-2010, performance, visual-studio

我有一个在 Visual Studio 2010 中工作的半小型可视化 C# 解决方案。我最近使用`settings.Settings`文件和`Properties.Settings.Default`. 在表单加载事件中，我正在使用检查值`Properties.Settings.Default`并将它们分配给一个`checkbox.Checked`变量。

```
//Load Form1
private void Form1_Load(object sender, System.EventArgs e)
{
    cbxShowPass.Checked = Properties.Settings.Default.showFullPassword;
    checkBox2.Checked = Properties.Settings.Default.showBookmarkFiles;
} 
```

当我在调试模式下启动程序时，启动速度非常慢，但是，当我删除那行代码时，它会很快启动。

如何在不删除设置的情况下使程序在调试模式下快速启动？

这是我的 CheckBox_Changed 事件，我将值分配给设置。

```
private void ShowPass_CheckChanged(object sender, EventArgs e)
{
    Properties.Settings.Default.showFullPassword = !Properties.Settings.Default.showFullPassword;
        Properties.Settings.Default.Save();
        DisplayPassword();
} 
```

# c# - Backgroundworker被取消并锁定？怎么可能？

> ID：12993114
> 
> 赞同：0
> 
> 时间：2012-10-20T22:04:25.100
> 
> 标签：c#, .net, multithreading, thread-safety, locking

我有用户报告的奇怪问题，曾经被我转载。

我有各种按钮的形式，每个按钮都执行长时间的操作。

单击新按钮时，旧操作将停止并开始新操作。

我注意到奇怪的行为：

当我单击按钮时，有时操作不会开始。无法启动操作，因为下一个代码：

```
if (!Worker.IsBusy)
        {
            RunReload();
        }
        else
        {
            isWorkerPendingForNewJob = true;
            Worker.CancelAsync();
        } 
```

取消被调用了几次，但我的工作人员总是很忙！

![在此处输入图像描述](../Images/0a1e660c3d76a62363b1d470bf35aaa9.png)

当我停止我的项目执行时，我注意到它在**锁定**部分停止。

在这个锁里面，我只是创建了一些用于所有进程的对象。

图像上的断点永远不会命中。为什么 backgroundworked 总是忙并且被锁定在这条线上？

![在此处输入图像描述](../Images/cb9091ba1fa87693b4a0d83bc34fa02a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T23:52:36.323

当您调用时`CancelAsync()`，它只是将标志设置`CancellationPending`为`true`。您必须在`BackgroundWorker`工作功能中定期手动检查此标志并自行中断。你已经这样做了吗？

这是[相关的 MSDN 页面](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.cancelasync.aspx)。

`WorkerSupportsCancellation`此外，您必须确保`true`支持`CancelAsync`.

# java - 将红黑树转换为 2、4 树

> ID：12993116
> 
> 赞同：1
> 
> 时间：2012-10-20T22:04:43.790
> 
> 标签：java, data-structures, red-black-tree

因此，您可能已经猜到了，我正在尝试将红黑树转换为 Java 中的 2,4 树。我并没有太多停留在它是如何工作的，而是更多地找出遍历树的最佳方法。

将使用预先构建的红黑树，因此我必须以某种方式从每个节点收集信息，然后逐个节点构建新的 2,4 树。

我正在考虑使用基于数组的实现作为“过渡”阶段。因此，例如在 array[i]，它的左孩子是 array[i(*2)]，它的右孩子是 array[(i*2)+1)]。然后遍历数组并通过获取其信息（即它是否具有红色或黑色子/父）从那里构建 2,4 并形成每个 2,4 节点。

这似乎效率很低，但到目前为止，这就是我所能想到的。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T19:21:28.600

看看[这个问题](https://stackoverflow.com/questions/6598515/complexity-of-turning-a-sorted-array-to-a-2-4-b-tree)。

具体来说“带有两个黑色孩子的黑色节点是 2 节点，带有一个红色孩子的黑色节点是 3 节点，带有两个红色孩子的黑色节点是 4 节点” - 您可以直接使用它进行转换。

# mysql - left join 多张表

> ID：12993118
> 
> 赞同：3
> 
> 时间：2012-10-20T22:04:45.743
> 
> 标签：mysql, sql

基本上我想离开加入 3 个表我已经加入了下面的 2 个表

```
SELECT  * 
FROM    Shop_id i
        LEFT JOIN Shopper s 
           ON i.shopper_id = s.uid
WHERE   i.shopper_comp > 0 AND 
        i.editor_comp = 0
ORDER BY i.sid 
```

我已经成功加入 Shop_id i 和 Shopper s 我想将 Clients c 添加到我认为的组合中-

```
SELECT  * 
FROM    Shop_id i
        LEFT JOIN Shopper s, Clients c 
           ON i.shopper_id = s.uid AND i.cid = c.CID
WHERE   i.shopper_comp > 0 AND 
        i.editor_comp = 0
ORDER BY i.sid 
```

我错了-请帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T22:06:43.240

您需要明确指定`LEFT JOIN`table的关键字`clients`。

```
SELECT * 
FROM   Shop_id i
       LEFT JOIN Shopper s
          ON i.shopper_id = s.uid 
       LEFT JOIN Clients c 
          ON i.cid = c.CID
WHERE  i.shopper_comp > 0 AND 
       i.editor_comp = 0
ORDER BY i.sid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T22:12:31.493

你可以这样试试吗？

```
SELECT * FROM Shop_id i
LEFT JOIN Shopper s ON i.shopper_id = s.uid
LEFT JOIN Clients c ON  i.cid = c.CID
WHERE i.shopper_comp >0 AND i.editor_comp =0
ORDER BY i.sid 
```

# linux - Linux 线程中的文件段/节/记录锁

> ID：12993120
> 
> 赞同：0
> 
> 时间：2012-10-20T18:17:59.830
> 
> 标签：linux, c, locking, concurrency, multithreading

我有一个多线程进程，其中一个文件由多个线程共享（读取和写入）。有什么方法可以让一个线程锁定一个文件段，使其他线程无法访问它？我试过`fcntl(fd, F_SETLKW, &flock)`了，但是这个锁只适用于进程，而不是线程（进程中的所有线程共享一个锁）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T23:55:55.070

是的 - 但不是使用相同的机制。您必须使用诸如 pthread 互斥锁之类的东西，并自己跟踪簿记。

如何完成这项工作的可能大纲

*   等待并通过簿记结构声明进程级互斥锁
    *   确保您的进程中没有其他线程正在尝试使用该段
    *   将自己标记为使用文件段
*   释放进程级互斥锁

*   获取进程的 fnctl 锁（如有必要）

*   做你的写作
*   释放 fnctl 锁以允许其他进程使用该段（如果需要）

*   在进程级簿记结构互斥体上再次等待（如果您可以原子地标记它未使用，则可能没有必要）

    *   在您的进程中将段标记为未使用。
*   释放进程级互斥锁

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T20:24:29.290

不。您询问的区域锁定功能具有令人惊讶的语义，并且由于它由 POSIX 控制，因此不会进一步开发。（事实上​​，这是 Kirk McKusick 对 POSIX 问题的首选示例。）如果 Linux 中有非 POSIX 字节范围锁定工具，我找不到它。

这里讨论了多线程世界中 POSIX 字节范围锁定的问题：http: [//www.samba.org/samba/news/articles/low_point/tale_two_stds_os2.html](http://www.samba.org/samba/news/articles/low_point/tale_two_stds_os2.html)。

但是，如果您只关心一个进程中的线程，您可以使用信号量构建您自己的区域锁定。例如：

```
#include <stdbool.h>
#include <pthread.h>
#include <sys/types.h>

// A record indicating an active lock.
struct threadlock {
  int fd;  // or -1 for unused entries.
  off_t start;
  off_t length;
};

// A table of all active locks (and the unused entries).
static struct threadlock all_locks[100];

// Mutex housekeeping.
static pthread_mutex_t mutex;
static pthread_cond_t some_lock_released;
static pthread_once_t once_control = PTHREAD_ONCE_INIT;
static void threadlock_init(void) {
  for (int i = 0; i < sizeof(all_locks)/sizeof(all_locks[0]); ++i)
    all_locks[i].fd = -1;
  pthread_mutex_init(&mutex, (pthread_mutexattr_t *)0);
  pthread_cond_init(&some_lock_released, (pthread_condattr_t *)0);
}

// True iff the given region overlaps one that is already locked.
static bool region_overlaps_lock(int fd, off_t start, off_t length) {
  for (int i = 0; i < sizeof(all_locks)/sizeof(all_locks[0]); ++i) {
    const struct threadlock *t = &all_locks[i];
    if (t->fd == fd &&
        t->start < start + length &&
        start < t->start + t->length)
      return true;
  }
  return false;
}

// Returns a pointer to an unused entry, or NULL if there isn't one.
static struct threadlock *find_unused_entry(void) {
  for (int i = 0; i < sizeof(all_locks)/sizeof(all_locks[0]); ++i) {
    if (-1 == all_locks[i].fd)
      return &all_locks[i];
  }
  return 0;
}

// True iff the lock table is full.
static inline bool too_many_locks(void) {
  return 0 == find_unused_entry();
}

// Wait until no thread has a lock for the given region
// [start, start+end) of the given file descriptor, and then lock
// the region. Keep the return value for threadunlock.
// Warning: if you open two file descriptors on the same file
// (including hard links to the same file), this function will fail
// to notice that they're the same file, and it will happily hand out
// two locks for the same region.
struct threadlock *threadlock(int fd, off_t start, off_t length) {
  pthread_once(&once_control, &threadlock_init);
  pthread_mutex_lock(&mutex);

  while (region_overlaps_lock(fd, start, length) || too_many_locks())
    pthread_cond_wait(&some_lock_released, &mutex);

  struct threadlock *newlock = find_unused_entry();
  newlock->fd = fd;
  newlock->start = start;
  newlock->length = length;

  pthread_mutex_unlock(&mutex);
  return newlock;
}

// Unlocks a region locked by threadlock.
void threadunlock(struct threadlock *what_threadlock_returned) {
  pthread_mutex_lock(&mutex);

  what_threadlock_returned->fd = -1;
  pthread_cond_broadcast(&some_lock_released);

  pthread_mutex_unlock(&mutex);
} 
```

注意：代码可以编译，但我还没有对它进行一点测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T19:02:51.977

如果您不需要不同进程之间的文件锁，请避免使用文件锁（这是 POSIX API 设计最糟糕的部分之一），而只需使用互斥锁或其他共享内存并发原语。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T19:29:42.540

有两种方法可以做到：

1.  使用 Mutex 在同一进程内的线程中获取记录的锁定。一旦获得锁，进程中的任何其他线程，映射试图获得锁的文件都会被阻塞，直到锁被释放。（Linux 中最好的也是唯一最直接的解决方案）。

2.  共享内存或内存映射文件上的信号量和互斥锁。

# java - 对JAVA界面感到困惑

> ID：12993123
> 
> 赞同：10
> 
> 时间：2012-10-20T22:06:27.940
> 
> 标签：java, interface

> **可能重复：**
> [“编程到接口”是什么意思？](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface)
> [接口 vs 抽象类（通用 OO）](https://stackoverflow.com/questions/761194/interface-vs-abstract-class-general-oo)

我是学习 JAVA 的新手，现在我对界面感到困惑。我搜索并阅读了很多资料，但仍然不清楚。

当我尝试查找一些关于接口的信息时，我看到很多人都在谈论接口和抽象类之间的关系。但我什至不知道他们为什么要对比这两者。因为我认为抽象类是用来告诉其他人你不能创建这个抽象类的对象，如果你想，你必须修改抽象类。这是关于继承的事情，对吧？

但我不知道接口的含义。有a `interface a`，如果a`class B`要实现接口a，则必须使用保留字`class B implements a`，然后完成接口需要的所有方法。但是我的问题是，如果B类必须自己完成所有方法，那么接口的含义是什么？我认为我们不需要它。我不太明白。我读了很多句子，例如：“接口可以反映面向对象语言的核心思想”，“接口可以帮助使程序更容易”等。但我无法真正理解其中的含义。

那么，有没有人可以给我看一些例子来让我理解界面？或者你可以告诉我一些有用的链接或清楚地描述界面的书籍。我真的希望弄清楚。谢谢你！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T05:39:04.117

假设你有一个`Car`类和`Vegetable`现实生活中不相关的类，并且有一个常见的行为叫做`wash()`. 因为我们可以洗车，也可以洗菜。但是洗车和洗菜是完全不同的过程/行为。

例如：应该在厨房水槽下`Car`用动力泵清洗。`Vegetables`所以洗涤方式不同。因此，您将洗涤过程作为`wash()`接口中的方法说，并`Washable`在类中实现它们。`Car``Vegetable`

```
interface Washable {

 public void wash();

} 

public class Car implements Washable {

 public void wash() {

   // wash the car with a power pump

 }

}

public class Vegetable implements Washable {

public void wash() {

   // wash the vegetable under a kitchen sink

 }

} 
```

作为一个人，你会想洗车和洗菜。

```
public class Person  {

Washable washableObject = new Car();

washableObject.wash();

washableObject = new Vegetable();

washableObject.wash();

} 
```

1.  所以接口是一种连接具有共同行为的不相关类的方法。但是行为将被不同地实现或将来可以改变。

2.  **有一天，您决定改变洗车方式**。假设您购买了一台“洗车机”。所以实现`wash()`在`Car`类中的方法内部发生了变化。

    公共类汽车实现可清洗{

    ```
     public void wash() {

       // wash the car with my new car washing machine !!

     } 
    ```

    }

但是作为 Person ，您仍然调用该`wash()`方法。方法的`wash()`实现方式发生了变化（用你的新洗车机洗车），这个实现变化并没有影响你的`Person`课程。

希望您清楚我们`interfaces`现在使用的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T22:12:44.557

基本上，`interface`这是一种无需实际执行即可完成多重继承的方法。（这并不是说 Java 人“被淘汰了”——多重继承非常混乱且实现起来效率低下。）

这意味着您可以拥有两个完全独立的类 A 和 B，除了 之外没有共同的祖先`Object`，并且如果它们实现相同的`interface`，您可以用一个替换另一个（只要您仅引用接口中的方法） .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T22:12:58.400

考虑接口，例如类和用户之间的合同。当一个类实现一个接口时，它告诉它承诺提供接口定义的所有方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T22:26:15.893

假设您了解类继承，我认为接口类似于骨架类，其中描述了类的结构，但实际上并未编写/实现。

然后，另一个类可以与任何实现了特定接口的类一起工作，即使它尚未实现。

例如，有人可能会创建一个名为`Animal`. 它的方法可能`Talk()`是：`Walk()`和`Eat()`。您可以编写一个`Dog`实现在调用`Animal`该`Talk()`方法时打印“woof”的类。因此，另一个类将知道如何使用所有实现 Animal 接口的类。

**UPD**

一个很好的真实示例是 JDBC 数据库语句接口。这列出了数据库制造商必须实现的许多必需属性，例如`execute(String sql)`. Oracle 将以不同于 Postgresql 的方式实现这一点。这允许将数据库交换为另一个数据库，但用户代码保持不变。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-20T22:27:51.200

一个简单的代码来理解接口和类。

```
import java.util.List;
import java.util.ArrayList;
public class Q01 {
List<Shape> shapes= new ArrayList();

public void add() {
    shapes.add(new Square(3.0));
    shapes.add(new Circle(2.0));
}
public void print() {
    for (int i = 0; i < shapes.size(); i++) {
        Shape shape = shapes.get(i);
        System.out.println(shape.getClass().getSimpleName() + " --->" + shape.getArea());
    }
}

public static void main(String[] args) {
    Q01 q01= new Q01();
    q01.add();
    q01.print();
}

public interface Shape {
    double getArea();
}

public class Square implements Shape{
    private double edge;

    public Square(double edge) {
        this.edge = edge;
    }
    public double getArea() {
        return edge*edge;
    }
}
public class Circle implements Shape{
    private double radius;

    public Circle(double radius) {
        this.radius = radius;
    }

    public double getArea() {
        return 3.14 * radius * radius;
    }
}
} 
```

# python - 安装 python autopy 时出错

> ID：12993126
> 
> 赞同：8
> 
> 时间：2012-10-20T22:06:35.240
> 
> 标签：python, autopy

嘿，我在这里看过一个老问题，但它没有回答我的问题

我已经安装了 libpng，然后尝试安装 autopy 并得到编译错误。

我还不是很擅长 python，所以我不确定如何修复它们。

```
Ashley:~ ashleyhughes$ sudo easy_install autopy
Searching for autopy
Reading http://pypi.python.org/simple/autopy/
Reading http://www.autopy.org
Best match: autopy 0.51
Downloading http://pypi.python.org/packages/source/a/autopy/autopy-0.51.tar.gz#md5=b92055aa2a3712a9c3b4c874014b450e
Processing autopy-0.51.tar.gz
Running autopy-0.51/setup.py -q bdist_egg --dist-dir /tmp/easy_install-U9uWoj/autopy-0.51/egg-dist-tmp-hdjtIx
clang: warning: argument unused during compilation: '-mno-fused-madd'
clang: warning: argument unused during compilation: '-mno-fused-madd'
clang: warning: argument unused during compilation: '-mno-fused-madd'
clang: warning: argument unused during compilation: '-mno-fused-madd'
clang: warning: argument unused during compilation: '-mno-fused-madd'
src/screengrab.c:48:26: warning: implicit declaration of function
      'CGDisplayBitsPerPixel' is invalid in C99
      [-Wimplicit-function-declaration]
        bitsPerPixel = (uint8_t)CGDisplayBitsPerPixel(displayID);
                                ^
src/screengrab.c:191:2: warning: 'CGLSetFullScreen' is deprecated
      [-Wdeprecated-declarations]
        CGLSetFullScreen(glContext);
        ^
src/screengrab.c:194:2: warning: implicit declaration of function 'glReadBuffer'
      is invalid in C99 [-Wimplicit-function-declaration]
        glReadBuffer(GL_FRONT);
        ^
src/screengrab.c:194:15: error: use of undeclared identifier 'GL_FRONT'
        glReadBuffer(GL_FRONT);
                     ^
src/screengrab.c:197:2: warning: implicit declaration of function 'glFinish' is
      invalid in C99 [-Wimplicit-function-declaration]
        glFinish();
        ^
src/screengrab.c:199:6: warning: implicit declaration of function 'glGetError'
      is invalid in C99 [-Wimplicit-function-declaration]
        if (glGetError() != GL_NO_ERROR) return NULL;
            ^
src/screengrab.c:199:22: error: use of undeclared identifier 'GL_NO_ERROR'
        if (glGetError() != GL_NO_ERROR) return NULL;
                            ^
src/screengrab.c:207:2: warning: implicit declaration of function
      'glPopClientAttrib' is invalid in C99 [-Wimplicit-function-declaration]
        glPopClientAttrib(); /* Clear attributes previously set. */
        ^
src/screengrab.c:223:2: warning: implicit declaration of function
      'glPushClientAttrib' is invalid in C99 [-Wimplicit-function-declaration]
        glPushClientAttrib(GL_CLIENT_PIXEL_STORE_BIT);
        ^
src/screengrab.c:223:21: error: use of undeclared identifier
      'GL_CLIENT_PIXEL_STORE_BIT'
        glPushClientAttrib(GL_CLIENT_PIXEL_STORE_BIT);
                           ^
src/screengrab.c:225:2: warning: implicit declaration of function
      'glPixelStorei' is invalid in C99 [-Wimplicit-function-declaration]
        glPixelStorei(GL_PACK_ALIGNMENT, BYTE_ALIGN); /* Force alignment. */
        ^
src/screengrab.c:225:16: error: use of undeclared identifier 'GL_PACK_ALIGNMENT'
        glPixelStorei(GL_PACK_ALIGNMENT, BYTE_ALIGN); /* Force alignment. */
                      ^
src/screengrab.c:226:16: error: use of undeclared identifier
      'GL_PACK_ROW_LENGTH'
        glPixelStorei(GL_PACK_ROW_LENGTH, 0);
                      ^
src/screengrab.c:227:16: error: use of undeclared identifier 'GL_PACK_SKIP_ROWS'
        glPixelStorei(GL_PACK_SKIP_ROWS, 0);
                      ^
src/screengrab.c:228:16: error: use of undeclared identifier
      'GL_PACK_SKIP_PIXELS'
        glPixelStorei(GL_PACK_SKIP_PIXELS, 0);
                      ^
src/screengrab.c:235:2: warning: implicit declaration of function 'glReadPixels'
      is invalid in C99 [-Wimplicit-function-declaration]
        glReadPixels(x, y, width, height,
        ^
src/screengrab.c:236:30: error: use of undeclared identifier 'GL_BGRA'
                     MMRGB_IS_BGR ? GL_BGRA : GL_RGBA,
                                    ^
src/screengrab.c:236:40: error: use of undeclared identifier 'GL_RGBA'
                     MMRGB_IS_BGR ? GL_BGRA : GL_RGBA,
                                              ^
9 warnings and 9 errors generated.
error: Setup script exited with error: command 'clang' failed with exit status 1 
```

任何人都可以帮忙。我需要 autopy，因为它适用于多个平台

我使用 ethan.tira-thompson.com/Mac_OS_X_Ports.html 来安装 libpng

使用命令行工具安装 xcode

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-31T03:04:59.447

我遇到了同样的问题，如果您注意到所有 9 个错误都来自一个文件：src/screengrab.c 此文件尚未更新到最新版本的 OpenGL，并且有一些已弃用的方法。在 autopy github repo 上，[这里报告了一个错误。](https://github.com/msanders/autopy/pull/27) 建议的修复/破解是添加以下行： `#include <OpenGL/gl.h>`

在 src/screengrab.c 的第 7 行之后。您将不得不从 Github 获取源代码并在本地进行更改，而不是使用 easy_install。
请注意，这是一个可以编译的 hack，但屏幕抓取将是全黑的。有人需要花几分钟用最新的方法重写 screengrab.c。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-05T09:52:16.073

当我添加

```
#include <OpenGL/gl.h> 
```

它没有编译。

所以，我看了一下我的硬盘，寻找每一个`gl.h`

所以，我尝试了

```
 #include "/System/Library/Frameworks/OpenGL.framework/Versions/A/Headers/gl.h" 
```

然后我设法编译它:-)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-20T22:12:17.190

如果您尝试过这个：

$ sudo easy_install 自动安装

另一种选择是从 GitHub 存储库中的最新源进行编译：

$ git clone git://github.com/msanders/autopy.git

$ cd 尸检

$ python setup.py 构建

$ python setup.py 安装

从源代码构建时，请确保在尝试使用 AutoPy 之前 cd 退出 autopy 目录，否则由于 Python 的相对导入，它可能会在 ImportError 上失败。

# javascript - 如果“值”字段为空，如何添加占位符属性

> ID：12993130
> 
> 赞同：5
> 
> 时间：2012-10-20T22:06:57.830
> 
> 标签：javascript, jquery

如果您有一个“value”属性为空的文本输入字段，有没有办法添加占位符属性（占位符标记，而不是“defaultvalue”和类似方法）？

我在这里看到了很多类似的问题，但大多数都使用默认值。我需要占位符标签，另外我根本无法影响 HTML 输出。

这是给定的 HTML 输出示例：

```
<input type="text" value="" name="textbox" id="edit-textbox"> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-20T22:10:38.917

我建议以下任何一种方法：

```
$('input:text').each(
    function(i,el) {
        if (!el.value || el.value == '') {
            el.placeholder = 'placeholdertext';
            /* or:
            el.placeholder = $('label[for=' + el.id + ']').text();
            */
        }
    }); 
```

[JS Fiddle 演示使用`el.placeholder = 'placeholdertext'`](http://jsfiddle.net/davidThomas/LAfN2/).

[JS Fiddle 演示使用`el.placeholder = $('label[for=' + el.id + ']').text()`](http://jsfiddle.net/davidThomas/LAfN2/1/).

或者您可以使用数组来存储各种占位符：

```
var placeholders = ['Email address', 'favourite color'];

$('input:text').each(
    function(i,el) {
        if (!el.value || el.value == '') {
            el.placeholder = placeholders[i];
        }
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/LAfN2/2/)。

要为特定元素指定特定占位符：

```
var placeholders = {
    'one' : 'Email address',
    'two' : 'Favourite color'
};

$('input:text').each(
    function(i,el) {
        if (!el.value || el.value == '') {
            el.placeholder = placeholders[el.id];
        }
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/LAfN2/3/)。

在特定的占位符对象中不存在条目的情况下添加了捕获/回退`input`：

```
var placeholders = {
    'oe' : 'Email address', // <-- deliberate typo over there
    'two' : 'Favourite color'
};

$('input:text').each(
    function(i,el) {
        if (!el.value || el.value == '') {
            el.placeholder = placeholders[el.id] || '';
        }
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/LAfN2/4/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T22:10:15.860

如果您使用的是 HTML5（并且应该），则有一个原生占位符属性。

```
<input type="text" value="" placeholder="My placeholder!" name="textbox" id="edit-textbox"> 
```

**编辑**

正如您所说，您无法编辑 HTML 并且必须使用 JS，这可能会有所帮助。

$('#edit-textbox').attr('placeholder', '我的占位符！');

再一次，这是针对 HTML 5 的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-15T12:03:20.873

```
(function($) {

  $('#edit-textbox').attr('placeholder','Your placeholder text');

})(jQuery); 
```

# javascript - window.onload 在弹出窗口中加载 DOM，浏览器兼容性

> ID：12993131
> 
> 赞同：2
> 
> 时间：2012-10-20T22:07:17.707
> 
> 标签：javascript, jquery, html, popup

我有 HTML 弹出窗口，我想在打开带有规范的窗口后添加文本。功能：

```
var win = window.open('private.php', data.sender_id , 'width=300,height=400');                      
win.window.onload = function() {
         //function for add text
         //chrome and firefox fire, IE and Opera not
}; 
```

这适用于 Chrome 和 Firefox，但 Opera 和 IE9 无法正常工作。请告诉我使用 IE 和 Opera 的最佳方法。我尝试：

```
$(document).ready(function(){
   //function for add text
}); 
```

但同样的事情。

我找到了解决方案，但我不知道是否有比 setTimeout 更好的解决方案？？？

我使用的是 onload 事件：

```
setTimeout(function(){
 //add text
},200); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T22:40:03.340

索引.php

```
function callback() {
   // ...
   return xxx;
} 
```

私人的.php

```
 $(document).read(function() {
     var text_to_insert = window.opener.callback();
 }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T22:55:34.853

你可以试试这个（在 chrome、FF、IE 中测试但不了解 Opera）

```
var win = window.open('private.php', data.sender_id , 'width=300,height=400');
win[win.addEventListener ? 'addEventListener' : 'attachEvent']((win.attachEvent ? 'on' : '') + 'load', myFunction, false);
function myFunction(){
    win.focus();
    win.document.write('loaded...');
}​ 
```

如果有效，您也可以尝试[DOMContentLoaded](http://javascript.info/tutorial/onload-ondomcontentloaded)事件。

[**演示**](http://jsfiddle.net/KyP3b/3/)。

# perl - 在 Dancer 应用程序下运行 AnyEvent

> ID：12993133
> 
> 赞同：1
> 
> 时间：2012-10-20T22:07:48.283
> 
> 标签：perl, asynchronous, ssh, dancer, anyevent

我想对我正在跟踪的几千台机器（我自己的机器）做一些非阻塞*SSH ，我有一个**Dancer*应用程序启动并运行，我愿意使用*AnyEvent::timer*来执行*SSH*异步命令（每台机器都有自己的轮询间隔，我不希望一台机器等待另一台机器完成其*SSH*工作）。

我想知道，在同步环境中异步操作的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T08:57:08.123

*从 Web 脚本中运行任何*外部命令并不是一个好主意。一方面，如果您的外部调用因任何原因阻塞或崩溃，它将给用户带来糟糕的体验（即使那个用户只是你）。然后，以网络用户身份运行外部命令可能会带来很多安全隐患——我认为您的网络用户很可能设置了无密码 ssh，不是吗？如果有人在您的脚本中发现了一些安全漏洞并设法使用它来 ssh 进入您的服务器怎么办？

相反，您应该创建单独的服务或进程，该服务或进程将使用 ssh（或其他）定期轮询您的服务器状态，并将该扫描的结果保存到数据库 - Postgres 或 MySQL。

然后，更改您的 Dancer 应用程序以显示从数据库收集的结果，而不是执行实时 ssh 请求。这样，它将非常快速和安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-22T23:20:07.940

我不是一个好主意，但这是可能的。我有一个大型的 Dancer 应用程序可以远程执行脚本，我正在使用 fork 和 Net::SSH2 来执行此操作。我尝试使用线程，但有些模块不是线程安全的，所以我建议使用 fork。

我在我的博客[http://perlondancer.blogspot.mx/2014/04/executing-remote-commands-from-dancer.html](http://perlondancer.blogspot.mx/2014/04/executing-remote-commands-from-dancer.html)中有一些评论，这个要点是下面的代码示例：[https://gist.github。 com/johandry/11197516](https://gist.github.com/johandry/11197516)

```
#!/usr/bin/env perl

use strict;
use warnings;
use Dancer;
use Net::SSH2;

sub execCommand ($$) {
  my ( $ssh2, $cmd ) = @_;

  my %args=(
    timeout => 1_000,  # polling timeout
    bufsize => 10_240, # read buffer size when polling
  );

  $ssh2->blocking(1); #needed for ssh->channel
  my $chan=$ssh2->channel(); # create SSH2 channel
  if ($ssh2->error()) {
    return (undef, undef, 100);
  }

  # exec $cmd (caveat: only one command line can be executed over this channel. No "ls -l;whoami" combo. Use ssh->shell instead.
  unless ($chan->exec($cmd)) {
    return (undef, undef, 500);
  }

  # defin polling context: will poll stdout (in) and stderr (ext)
  my @poll = ( { handle => $chan, events => ['in','ext'] } );

  my %std=();     # hash of strings. store stdout/stderr results
  $ssh2->blocking( 0 ); # needed for channel->poll
  while(!$chan->eof) { # there still something to read from channel
      $ssh2->poll( $args{'timeout'}, [ @poll ] ); # if any event, it will be store into $poll;

      my( $n, $buf ); # number of bytes read (n) into buffer (buf)
      foreach my $poll ( @poll ) { # for each event
          foreach my $ev ( qw( in ext ) ) { #for each stdout/stderr
              next unless $poll->{revents}{$ev};

              #there are something to read here, into $std{$ev} hash
              if( $n = $chan->read( $buf, $args{'bufsize'}, $ev eq 'ext' ) ) { #got n byte into buf for stdout ($ev='in') or stderr ($ev='ext')
                  $std{$ev}.=$buf;
              }
          } #done foreach
      }
  }
  $chan->wait_closed(); #not really needed but cleaner

  my $exit_code=$chan->exit_status();
  $chan->close(); #not really needed but cleaner

  $ssh2->blocking(1); # set it back for sanity (future calls)

  return ($std{'in'},$std{'ext'},$exit_code);
}   

sub execute ($$$$) {
  my ($ip, $username, $password, $cmd) = @_;
  my $pid = fork();

  if ($pid) {
    # This is the parent (DANCER)
    debug "Process started with PID $pid\n";
  } elsif ( $pid == 0 ) {
    # This is the child 
    my $ssh2 = Net::SSH2->new();
    $ssh2->connect( $ip ) or debug("Cannot connect to $ip");
    my $publicKeyFile  = './id_rsa.pub'; # path(setting('appdir'), 'db', 'id_rsa.pub'); # I prefer to copy the public key in your app dir due to permissions issues
    my $privateKeyFile = './id_rsa';     # path(setting('appdir'), 'db', 'id_rsa'); # I prefer to copy the private key in your app dir due to permissions issues
    if ( $ssh2->auth_publickey( $username, $publicKeyFile, $privateKeyFile, $password ) ) {
      my ($stdout, $stderr, $exitcode) = execCommand($ssh2, $cmd);
    } else {
      debug "Could not authenticate to $ip with $username";
    }
    $ssh2->disconnect();
  } else {
    debug "Could not fork: $!\n";
  }
}

set logger => "console";
set log    => "core";
set show_errors => 1;

get '/uptime/:ip' => sub {

  my $username = "the username";
  my $password = "the password";

  execute(param('ip'), $username, $password, "uptime > /tmp/dancer_example.txt");

  return 'uptime is running';
};

dance;

true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-24T11:19:50.020

Net::SSH2 可以异步使用，但它有很多错误并且经常崩溃。忘记使用它在同一进程上并行运行数千个（或数百个）连接。如果您按照@Johandry 的建议在新进程中使用它可能没问题，但是您可以`ssh`使用`AnyEvent::Util::run_cmd`.

Net::OpenSSH 是另一个可以异步使用的 Perl 模块。将它集成到 AnyEvent 中应该不会太难。

# zend-framework2 - 在 Zend Framework 2 中的何处放置自定义设置？

> ID：12993136
> 
> 赞同：12
> 
> 时间：2012-10-20T22:08:19.827
> 
> 标签：zend-framework2

我有一些自定义应用程序特定设置，我想放入一个配置文件。我会把这些放在哪里？我考虑过/config/autoload/global.php 和/或local.php。但我不确定我应该在配置数组中使用哪个键以确保不覆盖任何系统设置。

我在想这样的事情（例如在 global.php 中）：

```
return array(
    'settings' => array(
        'settingA' => 'foo',
        'settingB' => 'bar',
    ),
); 
```

那是一种合意的方式吗？如果是这样，我怎样才能访问设置，例如从控制器内？

高度赞赏提示。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-08-10T11:08:12.557

如果您需要为特定模块创建自定义配置文件，您可以在**module/CustomModule/config**文件夹中创建额外的配置文件，如下所示：

```
module.config.php
module.customconfig.php 
```

这是您的**module.customconfig.php**文件的内容：

```
return array(
    'settings' => array(
        'settingA' => 'foo',
        'settingB' => 'bar',
    ),
); 
```

然后您需要更改**CustomModule/module.php**文件中的**getConfig()**方法：

 **```
public function getConfig() {
    $config = array();
    $configFiles = array(
        include __DIR__ . '/config/module.config.php',
        include __DIR__ . '/config/module.customconfig.php',
    );
    foreach ($configFiles as $file) {
        $config = \Zend\Stdlib\ArrayUtils::merge($config, $file);
    }
    return $config;
} 
```

然后您可以在控制器中使用自定义设置：

```
 $config = $this->getServiceLocator()->get('config');
 $settings = $config["settings"]; 
```

这对我有用，希望对您有所帮助。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-21T09:31:53.410

你用你的`module.config.php`

```
return array(
    'foo' => array(
        'bar' => 'baz'
    )

  //all default ZF Stuff
); 
```

在您的内部，您`*Controller.php`可以通过以下方式调用您的设置

```
$config = $this->getServiceLocator()->get('config');
$config['foo']; 
```

就这么简单 ：）

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-08-10T17:47:38.990

您可以使用以下任何选项。

# 选项1

创建一个名为 config/autoload/custom.global.php 的文件。在 custom.global.php

```
return array(
    'settings' => array(
        'settingA' => 'foo',
        'settingB' => 'bar'
    )
) 
```

在控制器中，

```
$config = $this->getServiceLocator()->get('Config');
echo $config['settings']['settingA']; 
```

# 选项 2

在 config\autoload\global.php 或 config\autoload\local.php

```
return array(
    // Predefined settings if any
    'customsetting' => array(
        'settings' => array(
            'settingA' => 'foo',
            'settingB' => 'bar'
         )
    )
) 
```

在控制器中，

```
$config = $this->getServiceLocator()->get('Config');
echo $config['customsetting']['settings']['settingA']; 
```

# 选项 3

在 module.config.php

```
return array(
    'settings' => array(
        'settingA' => 'foo',
        'settingB' => 'bar'
    )
) 
```

在控制器中，

```
$config = $this->getServiceLocator()->get('Config');
echo $config['settings']['settingA']; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-21T23:06:02.067

如果你看`config/application.config.php`它说：

```
'config_glob_paths'    => array(
    'config/autoload/{,*.}{global,local}.php',
), 
```

所以 ZF2 默认情况下会自动加载配置文件`config/autoload/`- 例如，你可以`myapplication.global.php`让它被拾取并添加到配置中。

Evan.pro 写了一篇博客文章，涉及到这一点：[https ://web.archive.org/web/20140531023328/http://blog.evan.pro/environment-specific-configuration-in-zend-framework-2](https://web.archive.org/web/20140531023328/http://blog.evan.pro/environment-specific-configuration-in-zend-framework-2)**

# java - 同步方法调用另一个调用 wait() 的同步方法

> ID：12993138
> 
> 赞同：3
> 
> 时间：2012-10-20T22:08:30.747
> 
> 标签：java, synchronized

如果一个同步方法调用另一个同步方法（在另一个类中），它会执行 wait()。尽管在另一个类中，锁是否也会在第一个同步方法中释放？

例如

```
 public class A {
        private B b;

        public A(B b) {
           this.b = b;
        }

        public synchronized String a() {
           return b.b();
        }
   }

    public class B {

        public synchronized String b() {
            while (!someCondition) wait();
            return "Success!";
        }
    } 
```

所以我的问题是，是否可以在 someCondition = false 期间在 A 中输入另一个同步方法？或者 wait() 是否可以在 B 中输入其他同步方法，而在 A 中输入另一个同步方法的尝试将失败，直到 a() 返回？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T22:11:36.983

`a`不可以。在随后调用和`b`时，没有其他方法可以输入`a`或`b`（或任何其他类的同步方法`A`or `B`）。`b.wait()`但是释放对所有同步方法的锁定，`B`因为

```
public synchronized String b() 
```

本质上等同于

```
public String b() {
   synchronized(this) {
    ..
   }
} 
```

# azure - 在 Azure WorkerRole 中运行带有 GUI 的 exe

> ID：12993140
> 
> 赞同：2
> 
> 时间：2012-10-20T22:08:38.250
> 
> 标签：azure, azure-worker-roles, createprocess

我在 Azure 辅助角色上运行客户端应用程序时遇到问题。

为了以编程方式运行它，我尝试使用 System.Diagnostic.Process() 和 CreateProcessWithLogonW() 和 CreateProcessAsUser() 并且总是得到以下错误日志的错误：

```
Faulting application SumatraPDF.exe, version 2.1.1.0, time stamp 0x50671ddb, 
faulting module USER32.dll, version 6.0.6002.18541, time stamp 0x4ec3e39f, 
exception code 0xc0000142, fault offset 0x0006f52f, process id 0x84c, 
application start time 0x01cdaec9ec56418e. 
```

有没有办法以编程方式运行托管在 Worker Role 上的客户端应用程序？如果我远程进入虚拟机并使用本地命令提示符运行应用程序，它运行时不会出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T08:55:41.997

尝试从提升的任务中运行相同的操作。我已经看到在工作角色生命周期和任务期间使用 Process.Start 创建的流程的性能存在显着差异。在您的回复中，它看起来也像是一个 GDI 问题，因此可能值得分享您的 ProcessInfo。

# android - SQLiteOpenHelper 和 CRUD 操作

> ID：12993148
> 
> 赞同：3
> 
> 时间：2012-10-20T22:10:16.707
> 
> 标签：android, sqlite, sqliteopenhelper

在大多数 Android 数据库示例中，SQLiteOpenHelper 被扩展并包含创建和更新数据库的信息。但是，在许多示例中，帮助程序类包含添加、删除和返回记录的方法。我的问题是将这些 CRUD 方法包含在扩展 SQLiteOpenHelper 的类中会更好，还是使用扩展 SQLiteOpenHelper 的类的实例字段创建一个单独的类会更好，其中包含所有 CRUD 方法？这只是个人选择，还是我可能会忽略其他问题？我觉得创建一个单独的类可能是更好的形式。我感谢任何人的反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T22:19:15.317

创建/更新数据库的代码必须知道数据库结构，因此将其他知道数据库结构的代码放在同一个类中是有意义的。

结果不仅是关于打开，所以而不是`MyOpenHelper`, 调用它`MyDatabaseHelper`。:)

# sql-server - 用于插入的 SQL Server 单个存储过程

> ID：12993149
> 
> 赞同：0
> 
> 时间：2012-10-20T22:10:23.200
> 
> 标签：sql-server, sql-server-2008

我正在尝试在 SQL Server 2008 中创建一个存储过程，它可以将数据插入任何表（不是特定于表的）。我创建了一个如下所示的，但是在执行过程期间抛出了一个异常，即

> *无效的对象名称“dbo.@table”。*

存储过程代码：

```
CREATE PROCEDURE dbo.sp_InsertValues
   @table varchar(15)
   , @fields varchar(100)
   , @values varchar(100)   
AS
BEGIN
   INSERT INTO [dbo].[@table] (@fields) VALUES (@values)
END
GO 
```

记得我检查了参数表，列和值参数不为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T10:05:52.330

您将需要使用动态 SQL 构建命令，然后执行它。试试这个：

```
CREATE PROCEDURE dbo.sp_InsertValues
   @table nvarchar(15)
   , @fields nvarchar(100)
   , @values nvarchar(100)   
AS
BEGIN
    DECLARE @SQL NVARCHAR(MAX)
    SET @SQL = 'INSERT INTO [dbo].' + QUOTENAME(@table) + '(' + @fields +') VALUES (' +  @values + ')'
    EXEC(@SQL)
END
GO 
```

# c# - 是否可以从 C# 4.0 的列表中应用数学运算

> ID：12993153
> 
> 赞同：1
> 
> 时间：2012-10-20T22:10:54.680
> 
> 标签：c#, list, c#-4.0, operators

> **可能重复：**
> [C# 动态运算符](https://stackoverflow.com/questions/1207962/c-sharp-dynamic-operator)

我不知道这是否可能，但让我问一下：

例如，我从列表中生成一个简单的数学运算

如

```
List lstMat={=,+,-} 
```

然后我生成一个介于 0-2 之间的随机值并从该列表中选择该运算符

如

```
 int ir1=1;
    int ir2=2;

    int irNew=    ir1 lstMat[1] ir2 ;
    //irNew would be 3 
```

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T22:15:35.233

我能想到的最接近的事情

```
List<Func<int, int, int>> lstMat = new List<Func<int, int, int>>()
{
    (x,y)=>x.CompareTo(y),
    (x,y)=>x+y,
    (x,y)=>x-y
};

int ir1=1;
int ir2=2;

int irNew= lstMat[1](ir1,ir2); 
```

# asp.net-mvc - 无法添加新的标量属性

> ID：12993154
> 
> 赞同：0
> 
> 时间：2012-10-20T22:10:59.573
> 
> 标签：asp.net-mvc, visual-studio, asp.net-mvc-4

这是我的环境：

VS 2012
ASP.NET MVC4

1.  我创建了一个新的模型图。
2.  添加一个名为 Tipo 的实体
3.  右键单击模型并创建数据库。
4.  创建控制器和视图。
5.  到目前为止一切正常。

现在我想添加一个新的标量属性。

所以，我添加了新的标量属性，现在我在调用页面时遇到了这个错误：

自创建数据库以来，支持`TipoContext`上下文的模型已更改。

我已经挖掘了 stackoverflow 并找到了很多建议，但没有一个对我有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T22:25:37.723

是的，因为您已经在模型中添加了标量属性，所以必须在数据库中反映出来才能运行您的应用程序。因此，您需要启用 DBMigration 并让数据库知道您所做的更改。大卫海登有一篇不错的文章，看看 **[这里](http://www.davidhayden.me/blog/asp.net-mvc-4-and-entity-framework-database-migrations)。**

# iphone - 根据用户所在国家/地区具有不同功能的应用程序

> ID：12993159
> 
> 赞同：2
> 
> 时间：2012-10-20T22:12:27.173
> 
> 标签：iphone, ios, ipad, cocoa, internationalization

我需要开发一个应用程序，该应用程序的行为会因用户所在的国家/地区而异。比方说，如果用户在法国，一些功能将可用。但是，如果用户来自印度，他将能够访问一组不同的功能。

如果只是基于语言的限制，我可以使用 NSLocale 类方法来切换功能。但是由于许可和法律原因，我的功能实际上取决于用户所在的国家/地区。

处理这种情况的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T23:07:13.513

第三方应用程序无权访问有关设备用户的任何信息或访问 iTunes 帐户。没有办法知道用户的真实国家。在任何给定时间，该设备甚至可能不与任何一个人相关联。例如，iPod touch 可能没有用户登录任何 iTunes 帐户。同一设备最终可以登录到几个不同帐户之一。

您只能访问用户当前的 GPS 位置（如果用户允许您的应用访问该信息）或他们当前的区域设置。

基本上，没有办法做你需要的。当然，您可以提示用户，但显然无法验证此信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:02:33.460

对于因市场特定许可或法律问题而有特定要求的每个市场，您可以在 iTunes Connect 中创建单独的应用程序，并使其仅在相关市场中可供下载。如果您需要，这还允许您提供特定于市场的 EULA。这是一个很大的维护负担，但它可以确保只有给定市场中的用户才能访问该应用程序。

请注意，在 XCode 中，您可以相当轻松地构建、部署和发布从不同配置构建的项目的多个版本（XCode 将其称为“目标”），因此您仍然可以通过在相关文件中添加一些预处理器定义在单个代码库中实现这一点目标定义并将`#ifdef`代码放入您想要区分逻辑的位置。

# python - python密钥环，无法设置密码

> ID：12993175
> 
> 赞同：3
> 
> 时间：2012-10-20T22:15:45.253
> 
> 标签：python, python-keyring

安装后我遇到了 python 密钥环的问题。这是我的步骤：

```
$ python
>>> import keyring
>>> keyring.set_password('something','otherSomething','lotOfMoreSomethings') 
```

然后抛出这个：

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/usr/local/lib/python2.6/dist-packages/keyring/core.py", line 42, in set_password
   _keyring_backend.set_password(service_name, username, password)
File "/usr/local/lib/python2.6/dist-packages/keyring/backend.py", line 222, in set_password
   _, session = service_iface.OpenSession("plain", "")
File "/usr/lib/pymodules/python2.6/dbus/proxies.py", line 68, in __call__
   return self._proxy_method(*args, **keywords)
File "/usr/lib/pymodules/python2.6/dbus/proxies.py", line 140, in __call__
   **keywords)
File "/usr/lib/pymodules/python2.6/dbus/connection.py", line 630, in call_blocking
   message, timeout)
dbus.exceptions.DBusException: org.freedesktop.DBus.Error.UnknownMethod:
   Method "OpenSession" with signature "ss" on interface "org.freedesktop.Secret.Service" 
   doesn't exist 
```

我已经从[这里](http://pypi.python.org/pypi/keyring)安装了钥匙圈

```
easy_install keyring 
```

我做错什么了吗？？有什么解决办法？？

编辑：

我还从 repos 安装了 python-keyring 和 python-keyring-gnome 并像导入

```
>>> import gnome_keyring 
```

和作品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-08T22:19:28.563

如果使用 gnomekeyring python 包，您可以使用 item_create_sync 方法创建新密码条目或替换给定密钥的现有密码

```
#!/usr/bin/env python
import gnomekeyring

gnomekeyring.item_create_sync ("keyring-name", gnomekeyring.ITEM_GENERIC_SECRET, "key-display-name", {}, "password", True) 
```

item_create_sync 方法签名在哪里

```
item_create_sync (string? keyring, ItemType type, string display_name, AttributeList attributes, string secret, bool update_if_exists) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-23T04:12:35.553

我遇到了类似的问题，但我的 DBus 异常出现在 kwalletd（特别是 /modules/kwalletd）上，即使我使用 Gnome。

我的工作是创建一个本地“keyringrc.cfg”文件，如下所示：

```
[backend]
default-keyring=keyring.backends.Gnome.Keyring 
```

请参阅[Python 密钥环包](https://pypi.python.org/pypi/keyring#id9)以确定您的系统的配置文件路径的位置。

# sql - SQL查询同一张表中两个项目之间的关系

> ID：12993179
> 
> 赞同：1
> 
> 时间：2012-10-20T22:16:17.827
> 
> 标签：sql, sqlite

我在 sqlite 中有 3 个表，第一个是关于我称之为 bar 的实体：

```
bar
    *id
    -name 
```

另一个保持两个条之间的关系，我称这种关系为 foo：

```
foo
    *id
    -bar_one (fk->bar)
    -bar_two (fk->bar)
    -baz (fk->baz) 
```

baz 拥有一个属性，该属性限定了 foo 表示的 KIND 关系：

```
baz
    *id
    -description 
```

我需要显示一个 foo 查询，它将外键替换为 bar an baz 的值，例如：

```
id    bar_one    bar_two    baz
1     bar1       bar2       siblings
2     bar2       bar3       acquaintances
3     bar3       bar4       enemies 
```

如您所见，我不是数据库专家，我尝试过加入，它适用于 foo 和 baz。

```
SELECT foo.id, baz.description FROM foo, baz WHERE foo.baz = baz.id; 
```

但是用这种方式展示bar的两个成员对我来说很难。一些忠告？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T22:18:43.020

假设 table `foo`: `bar_one (fk->bar)`, `bar_two (fk->bar)`,`baz`的列*是非空*列，您可以使用`INNER JOIN`组合两个表，但如果它们可以为*空*，请`LEFT JOIN`改用。

```
SELECT  a.ID,
        b.name as bar_one,
        c.name AS bar_two,
        d.description
FROM    foo a
        INNER JOIN bar b
            ON a.bar_one = b.id
        INNER JOIN bar c
            ON a.bar_two = c.id
        INNER JOIN baz d
            ON a.baz = c.id 
```

基本上，`INNER JOIN`只显示记录在每个表定义上至少有一个匹配的行，而在*左侧*`LEFT JOIN`显示所有行定义是否匹配或没有。

# google-geocoding-api - 为有效地址返回无效数据

> ID：12993180
> 
> 赞同：0
> 
> 时间：2012-10-20T22:16:33.307
> 
> 标签：google-geocoding-api

我正在尝试对以下地址进行地理编码：

333111 Hwy 2, Suite A
Newport, WA 99156

出于某种原因，地理编码器响应了两个位置，一个在明尼苏达州，一个在实际业务所在的*附近*，但它们都不正确。

正确的地图位置显示在此处的企业网站上：
[http ://www.a-1team.net/index.php?option=com_content&view=article&id=81&Itemid=194](http://www.a-1team.net/index.php?option=com_content&view=article&id=81&Itemid=194)

我已经尝试删除套件、更改缩写等，但我仍然无法弄清楚我应该如何格式化此地址以使其正确地进行地理编码。

这是地理编码器本身的问题，还是我格式化此特定地址的方式有问题？（我有大约 200 个其他地址在同一过程中被正确地进行了地理编码，所以我很确定我正确地提交了它们）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T22:42:39.037

当我使用谷歌地图解决这个问题时，我也注意到输入您提供给我们的任何形式的地址都是不准确的。它总是带我靠近，但不完全是实际位置。

然而，当我查看谷歌地图给我的地址时，它说“地图上的位置是近似的”。

在那之后，我检查了你给我的网站链接，因为他们肯定不能让它工作，而我们没有，对吧？果然，当我检查嵌入地图的代码时，我发现了以下内容：

```
window.addEvent('load', function() { var yoomap1 = new YOOmaps('yoo-maps-1', 
{ lat:48.175156, lng:-117.063497... 
```

请注意，它们提供纬度和经度坐标。

如果您想正确映射它，您可以：

*   执行您链接的网站所做的操作，并使用“lat:48.175156, lng:-117.063497”
*   或者，您可以只使用地址

> 1600 7th St, 纽波特, WA

虽然这个地址并不完全准确，但它与实际地址非常接近。

这可能只是谷歌地图及其 API 中的一个错误。如果有人比我更了解这方面的知识，请分享。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:22:04.357

这看起来是一个地理编码器问题。我打算建议使用[Map Maker](http://www.google.com/mapmaker)手动添加此业务（我过去已经成功完成此操作），但看起来[Google 已经知道它](https://plus.google.com/107057179660386465942/about)并且可以将它绘制在[正确的位置](https://maps.google.com/maps?q=A-1+Team+Inc.,+U.S.+2,+Newport,+WA&hl=en&ll=48.175369,-117.063376&spn=0.002286,0.004576&sll=48.170751,-117.064819&sspn=0.018289,0.036607&oq=A-1+Team&hq=a-1+team+inc&hnear=U.S.+2&t=m&z=18&iwloc=A)。

[也许考虑将其作为API 中的错误](http://code.google.com/p/gmaps-api-issues/#Geocoding_API)提交。这是其他人似乎在做的事情。

# javascript - 图像加载在 JavaScript 中是如何工作的？

> ID：12993185
> 
> 赞同：2
> 
> 时间：2012-10-20T22:16:51.610
> 
> 标签：javascript

这是js中的图像加载结构：

```
var img = new Image();
img.onload = function(){
    //do something
}
img.src = "path to image"; 
```

我很好奇这是如何工作的，在将字符串分配给对象之后会触发一些事件。有人可以向我解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T22:22:56.080

`Image`是一个特殊对象（在规范中称为*主机对象*），其实现由浏览器提供。构造函数实际上是返回一个 new [`HTMLImageElement`](https://developer.mozilla.org/en-US/docs/DOM/HTMLImageElement)。

在内部，该`src`属性有一个 setter 函数。当您设置 时`src`，浏览器开始在后台获取图像。（发生这种情况的确切机制因浏览器而异。）

当图像请求*成功*完成时，浏览器会触发该`load`事件。（如果不成功，它将触发`error`事件。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T22:22:03.097

当您将字符串分配给对象的`src`属性时，`Image`浏览器会从应该在该字符串中的 URL 中指定的服务器发送对图像的请求。

当从服务器返回带有有效图像的响应时，将`load`触发事件，并`onload`调用事件处理程序。

# android - 如何获取安卓手机的当前日期？

> ID：12993186
> 
> 赞同：1
> 
> 时间：2012-10-20T22:17:10.453
> 
> 标签：android, date

这就是我获取电话日期的方式，但它提示我一个 parseException，有什么问题？

```
 SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
    String date = sdf.format(new Date());
    Date localDate = sdf.parse(date); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T22:19:40.647

`new Date(0)`不是当前日期/时间。你应该使用`new Date()`. ParseException 应该会消失。如果您想知道为什么会这样，只需调试您的程序并查看 new Date(0) 作为字符串给出的内容，您就会知道为什么它无法被解析。

```
Date now = new Date();
Date alsoNow = Calendar.getInstance().getTime();
String nowAsString = new SimpleDateFormat("yyyy-MM-dd").format(now); 
```

这样可行。这也是：

```
Date christmas = new SimpleDateFormat("yyyy-MM-dd").parse("2012-12-25"); 
```

顺便说一句，请确保您正在使用`java.util.Date`而不是`java.sql.Date`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T23:21:30.390

```
Calendar now = Calendar.getInstance();
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd"); 
String nowDate = formatter.format(now.getTime());
String[] separateCurrentDate = nowDate.split("-");
String year = separateCurrentDate[0];
String month = separateCurrentDate[1];
String day = separateCurrentDate[2];
int currentYear = Integer.parseInt(year);
int currentMonth = Integer.parseInt(month);
int currentDay = Integer.parseInt(day); 
```

然后将 y,m,d 一个一个存入一个 Date 类型的 onject

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-08T06:39:30.033

```
 Date now = new Date();
   Date alsoNow = Calendar.getInstance().getTime();
   String nowAsString = new SimpleDateFormat("yyyy-MM-dd").format(now);
   currentdate = (TextView)findViewById(R.id.textcntdate);
   currentdate.setText(nowAsString); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-20T22:21:25.990

```
Date dt = new Date();
                    int hours = dt.getHours();
                    int minutes = dt.getMinutes();
                    int seconds = dt.getSeconds();
                    String curTime = hours + ":" + minutes + ":" + seconds; 
```

然后这里还有另一个链接 [Display the current time and date in an Android application](https://stackoverflow.com/questions/2271131/display-the-current-time-and-date-in-an-android-application)

# c - 用于识别 C 中的变量声明的正则表达式

> ID：12993187
> 
> 赞同：5
> 
> 时间：2012-10-20T22:17:42.440
> 
> 标签：c, regex, lex

我正在研究一个正则表达式来识别 C 中的变量声明，我已经得到了这个。

```
[a-zA-Z_][a-zA-Z0-9]* 
```

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-21T00:29:16.250

一种识别C 中**变量声明**的模式。查看常规声明，我们看到：

```
int variable; 
```

如果是这种情况，应该在任何事情之前测试**type**关键字，以避免匹配其他内容，例如使用预处理器定义的字符串或常量

```
(?:\w+\s+)([a-zA-Z_][a-zA-Z0-9]+) 
```

变量名位于 \1 中。

您需要的功能是look-behind/look-ahead。

**2015 年 7 月 11 日更新**

前面的正则表达式无法将某些变量与 `_`中间的任何位置匹配。要解决这个问题，只需将 添加`_`到第一个捕获组的第二部分，它还假定变量名具有两个或多个字符，这是修复后的样子：

```
(?:\w+\s+)([a-zA-Z_][a-zA-Z0-9_]*) 
```

然而，这个正则表达式有很多误报，`goto jump;`作为其中之一，坦率地说它不适合这项工作，正因为如此，我决定创建另一个正则表达式来涵盖更广泛的情况，虽然它远非完美，这里是：

```
\b(?:(?:auto\s*|const\s*|unsigned\s*|signed\s*|register\s*|volatile\s*|static\s*|void\s*|short\s*|long\s*|char\s*|int\s*|float\s*|double\s*|_Bool\s*|complex\s*)+)(?:\s+\*?\*?\s*)([a-zA-Z_][a-zA-Z0-9_]*)\s*[\[;,=)] 
```

我已经用 Ruby、Python 和 JavaScript 测试了这个正则表达式，它在常见情况下效果很好，但在某些情况下会失败。此外，正则表达式可能需要一些优化，尽管很难在保持跨多个正则表达式引擎的可移植性的同时进行优化。

### 测试简历

```
unsignedchar *var;                   /* OK, doesn't match */
goto **label;                        /* OK, doesn't match */
int function();                      /* OK, doesn't match */
char **a_pointer_to_a_pointer;       /* OK, matches +a_pointer_to_a_pointer+ */
register unsigned char *variable;    /* OK, matches +variable+ */
long long factorial(int n)           /* OK, matches +n+ */
int main(int argc, int *argv[])      /* OK, matches +argc+ and +argv+ (needs two passes) */
const * char var;                    /* OK, matches +var+, however, it doesn't consider +const *+ as part of the declaration */
int i=0, j=0;                        /* 50%, matches +i+ but it will not match j after the first pass */
int (*functionPtr)(int,int);         /* FAIL, doesn't match (too complex) */ 
```

### 误报

*以下情况很难用可移植的正则表达式覆盖，文本编辑器使用上下文来避免突出显示引号内的文本。*

```
printf("int i=%d", i);               /* FAIL, match i inside quotes */ 
```

### 误报（语法错误）

*如果在应用正则表达式之前测试源文件的语法，则可以解决此问题。使用 GCC 和 Clang，可以只传递 -fsyntax-only 标志来测试源文件的语法，而无需编译它*

```
int char variable;                  /* matches +variable+ */ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-20T15:53:00.243

```
[a-zA-Z_][a-zA-Z0-9_]{0,31} 
```

这将允许您将变量名称作为“m_name”验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-16T18:34:20.227

这将消除 return 和 typedef 错误标志。它能够捕获返回类型和变量名，并支持指针和数组。除了检测 typedef 变量之外，它还消除了注释代码，进一步减少了错误标志。

```
^\s*(?!return |typedef )((\w+\s*\*?\s+)+)+(\w+)(\[\w*\])?(\s*=|;) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-02T20:12:41.603

我设计了这个字符串以在我的作业中匹配正则表达式：

```
(_?[a-zA-Z0-9_]+)(\s+)(([a-zA-Z]?_[a-zA-Z])?([a-zA-Z]*[0-9]*_*)(=[a-zA-Z0-9]*)?[,]?)+((\s+)(([a-zA-Z]?_[a-zA-Z])?([a-zA-Z]*[0-9]*_*)(=[a-zA-Z0-9]*)?[,]?))* 
```

它匹配所有声明，包括`using namespace std`. 因此，您需要在检查 group1 的数据类型之前删除关键字。如果数据类型有效，您可以删除 group1 字符串，并且只剩下逗号分隔的变量，包括带有赋值运算符的变量。

以下代码也正确匹配：

`int a=3, b=9, c, N`

Even `int i=0` 在 for 循环中匹配： `for(int i=0; i<N; ++i)`

这个正则表达式字符串确实需要您在过滤方面做更多的工作（例如在检查之前删除关键字），但反过来，在其他正则表达式字符串失败的情况下匹配。编辑：忘了提到它也检测`_`字母数字声明的所有组合。

EDIT2：对正则表达式字符串进行轻微修改：

```
([a-zA-Z0-9_]+)(\\s+)(([a-zA-Z_\\*]?[a-zA-Z0-9_]*(=[a-zA-Z0-9]+)?)[,;]?((\\s*)[a-zA-Z_\\*]?[a-zA-Z0-9_]*?(=[a-zA-Z0-9]+)?[,;])*) 
```

这匹配所有变量和方法声明。因此，您需要做的就是检查是否`reg_match->str(1)`是数据类型。如果是，您可以使用`sregex_token_iterator`（带有正则表达式分隔符`(\\s*)[,.;](\\s*)`） on`reg_match->str(3)`来获取所有用户定义的标识符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-05T23:11:29.647

Zac Howard-Smith 改进的答案版本，删除了尾随空格，支持带有逗号分隔符和可选类型定义的多个变量。

```
^[ \t]*(?!return|typedef)((\w+[ \t,]*\*?[ \t,]+)+)*(\w+)(\[\w*\])?([ \t,]*=|;) 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-06-06T17:17:38.087

这是变量名的完整形式。

只需稍作修改，您可以根据需要使用多个`_`。

```
([a-zA-Z_][a-zA-Z0-9]*)* 
```

# javascript - 在 keydown 监听函数上绑定事件处理程序 JavaScript jQuery

> ID：12993188
> 
> 赞同：0
> 
> 时间：2012-10-20T22:17:48.797
> 
> 标签：javascript, jquery, events, bind, handler

我正在尝试将处理程序绑定到事件。该事件是一个keydown函数。处理程序将侦听命中变量以产生两个条件之一。第一个条件（奇数命中）将执行 1 个功能，第二个条件（偶数命中）将执行另一个功能。详细地说，第一个函数将滚动到一个元素，第二个函数将滚动到另一个元素

[小提琴](http://jsfiddle.net/FTCQG/11/)

上面是一个演示链接，你可以看到一个讨厌的错误。

我唯一能想到的是，应该为第二个事件修改以下内容：

```
.offset().top 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T22:21:54.470

在您的 keydown 函数之外声明`hits`，因此它不会每次都重置为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T22:22:01.707

不，不是条件在错误的位置，而是您的变量声明和初始化。如果你这样做

```
hits = 0;
if (hits % 2 !== 0) … 
```

条件显然总是错误的。

将声明移到事件处理函数的范围之外，并且不要在每次查询之前重置它。

# function - 处理 sql 函数的运行时异常

> ID：12993193
> 
> 赞同：2
> 
> 时间：2012-10-20T22:18:14.907
> 
> 标签：function, exception, db2

我使用 db2 9.7.6 full edition for windows。我需要开发可用于 sql 选择表达式的函数。函数必须包含修改 sql 数据和处理运行时异常。有两种变体，但我遇到了实现变体中所有要求的问题。第一个变体是 sql 表函数的实现，例如

```
 CREATE FUNCTION func1 (val CHAR(20))
    RETURNS table(result varchar(1000))
    LANGUAGE SQL
    MODIFIES SQL DATA
   BEGIN atomic
    insert into a values(val);
        return (select result from a);
    END 
```

它可以工作，但我无法在 sql 过程中实现处理异常。当我尝试使用块“声明退出处理程序”时，出现语法错误。第二个变体是 pl/sql 函数的实现，例如

```
CREATE OR REPLACE FUNCTION bb
RETURN varchar2
MODIFIES SQL DATA
AS
BEGIN
    insert into st values ('a');
    return 0;
END bb; 
```

但是当我尝试执行此函数时，我收到错误“SQLCODE=-740, SQLSTATE=51034 是使用 MODIFIES SQL DATA 选项定义的，这在调用例程的上下文中无效”。请帮帮我。最好的问候，Turkin Andrew。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:07:28.797

内联 SQL 复合和编译复合之间存在许多差异。我编写了以下脚本，它在 db2 10.1 for LUW 中运行正常。

脚本.sql

```
CREATE or replace FUNCTION func1a (val CHAR(20))
RETURNS varchar(20)
LANGUAGE SQL
READS SQL DATA
BEGIN
declare ret varchar(20);
declare exit handler for sqlstate '02000' resignal sqlstate '08888';
select C1 into ret from T1 fetch first 1 row only;
return ret;
END@

CREATE or replace FUNCTION func1b (val CHAR(20))
RETURNS table(result varchar(20))
LANGUAGE SQL
MODIFIES SQL DATA
BEGIN atomic
insert into T1 values(val);
return (select C1 from T1);
END@ 
```

执行（在 Windows 客户端，但没关系）

```
db2 CREATE TABLE T1 (C1 CHAR(20))
db2 -td@ -vf Script.sql
db2 "values func1a('s')"
db2 "SELECT * FROM TABLE (FUNC1b('A'))" 
```

正如您所见，DB2 10.1 中的内联和编译 SQL 有许多不同之处： - 单值返回与表或行返回。- 读取与修改的数据。- 条件处理程序与无。

由于函数定义不同，调用方式也不同，一种是标量值，另一种是函数表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:31:40.203

它只是行不通。

[最大访问级别列表](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=%2Fcom.ibm.db2.luw.apdv.routines.doc%2Fdoc%2Fc0011291.html)

```
Routine type    Default SQL access level    Maximum allowed SQL access level
SQL procedures  MODIFIES SQL DATA   MODIFIES SQL DATA
SQL functions (scalar functions)    READS SQL DATA  READS SQL DATA
SQL functions (table functions)     READS SQL DATA  MODIFIES SQL DATA
External procedures     MODIFIES SQL DATA   MODIFIES SQL DATA
External functions (scalar functions)   READS SQL DATA  READS SQL DATA
External functions (table functions)    READS SQL DATA  READS SQL DATA 
```

对于标量函数，最大级别是“READS SQL DATA”。现在可能有办法解决这个问题，所以你必须重新考虑你的编码。

# r - 数值变量和布尔变量之间的相关性

> ID：12993195
> 
> 赞同：4
> 
> 时间：2012-10-20T22:18:33.847
> 
> 标签：r, statistics, boolean, numeric, correlation

我在 R 中创建一个情节，使用：

```
plot(IQ, isAtheist)
abline(lm(isAtheist~IQ)) 
```

IQ 是`numeric`并且`isAtheist`是布尔值，具有值`TRUE`or `FALSE`。

![在此处输入图像描述](../Images/7521bfbcbf879c69071976f9acc5e103.png)

我试着写：

```
cor(IQ, isAtheist) 
```

但它给了我一个错误：

```
Error in cor(IQ, isAtheist) : 'x' must be numeric 
```

如何确定这两个变量之间的相关性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T22:28:56.110

在这种情况下，我真的不知道您想如何解释相关性，但您可以尝试`cor(IQ, as.numeric(isAtheist))`. 在这种情况下，TRUE 为 1，FALSE 为 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T01:19:38.183

这就是我认为您可能想要的（显示叠加在箱线图上的平均 IQ 值的差异）：

```
plot(IQ~isAtheist)
lines(x=c(1,2), y=predict( lm(IQ~isAtheist), 
                     newdata=list(isAtheist=c("NO","YES") ) ) ,
       col="red", type="b") 
```

plot.formula 默认值中的 X 位置是`as.numeric(factor(isAtheist))`，即在 1 和 2 而不是在 0 和 1 ，这是您使用`abline`. 推断超出这些值是没有意义的，所以我选择绘制为有界线段。我将添加一个工作示例和输出。

```
set.seed(123)
 isAtheist=factor(c("NO","YES")[1+rep( c(0,1), 50 )])
 plot(IQ~isAtheist)
     lines(x=c(1,2), y=predict( lm(IQ~isAtheist), 
                          newdata=data.frame(isAtheist=c("NO","YES") ) ) ,
            col="red", type="b") 
```

![在此处输入图像描述](../Images/7aade4156d99f58d286ce245ac6e1225.png)

# svg - 具有完全跨浏览器 svg 操作的 js 库

> ID：12993201
> 
> 赞同：1
> 
> 时间：2012-10-20T22:19:33.317
> 
> 标签：svg, vml

我有一个 svg 地图，我希望在其中添加 javascript 交互。过去我使用过 RaphaelJS，效果很好。但我是用 js 进行 svg 操作的替代方案？

我不喜欢的问题之一是 Raphael JS 使用自己的专有 js 对象而不是 svg。是否有一些 js 库能够直接获取 svg 并在需要时仍支持 vml 输出？

# c# - 如果我们使用 NGen.exe 将 C# 编译为本机代码，C# 是否需要运行 .NET 框架？

> ID：12993203
> 
> 赞同：8
> 
> 时间：2012-10-20T22:19:44.597
> 
> 标签：c#, c++, .net

我知道 C++ 代码直接在本地机器上运行。我也知道我们可以使用 NGen.exe 将 c# 代码编译为本机代码。我的问题是

如果我们使用 Native 代码生成器 NGen.exe 将 c# 代码编译成原生代码，还需要 .NET 框架来运行吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T22:22:31.333

事实上，如果你将 C++ 代码编译成 Windows 可执行文件，你仍然需要 Win32 dll 和其他东西。你的程序不能在除了你的程序之外没有任何东西的 CPU 上运行。

C# 也是如此。如果将 C# 编译为本机代码，则不需要 JIT 编译器，它是 .NET 运行时的一部分。但是您仍然需要 .NET 运行时的所有其他部分。

例如，.NET 框架及其所有类都没有链接到您的程序中。如果他们将所有必需的 .NET 类放入您的二进制文件中，那么一个简单的`Hello world`应用程序就会变得庞大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T23:32:45.580

您可以使用 mono 构建一个 C# 应用程序，该应用程序的所有内容都使用静态链接的框架库进行了预编译，并且不需要单独的运行时。

不过，我不会推荐它。并非所有东西都可用于静态链接，使用 JITter 的好处之一是它可以让您的代码在所有部署中平均*更快*，因为您现在可以更好地利用特定于机器的优化。即使是单声道也不是开箱即用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T14:13:16.080

是**的，您需要框架**，因为您的应用程序使用的库来自框架。

当您使用 NGen 时，不仅您的代码是在本机代码上编译的，大量的框架代码也被“本地化”，只是您的应用程序使用的正确部分。

所有这一切都不会改变您的程序集（exe 或 dll）物理字节，这会将 IL 编译为本机并将此本机字节存储在已编译的程序集缓存中。

编译程序集缓存中的引用仍然需要一些框架组件，特别是框架核心，它是一开始的本机代码。

# c# - 颜色.FromArgb(...); 安全信息

> ID：12993209
> 
> 赞同：6
> 
> 时间：2012-10-20T22:20:34.207
> 
> 标签：c#, visual-studio, colors, windows-runtime

我正在从 argb 定义颜色，例如

```
Color.FromArgb(255,255,0,0); 
```

在 Visual Studio 2012 中，winRT 应用程序说这是用 [security critical] 标记的。有什么原因吗？我尝试搜索，没有结果。不知道为什么这与安全有关。

更新：

现在我注意到，不仅 FromArgb(...); 方法给出了这个 [SECURITY CRITICAL] 警告。这些中的任何一个：

```
c.A = 255;
c.R = 255;
c.G = 0;
c.B = 0; 
```

也可以。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T22:36:30.470

System.Drawing 是非托管 GDI+ 代码的包装器。据我了解，WinRT 不支持 GDI+：

[http://social.msdn.microsoft.com/Forums/en-NZ/winappswithnativecode/thread/0ba00fbd-183f-4df6-afa2-04d0ac14706a](http://social.msdn.microsoft.com/Forums/en-NZ/winappswithnativecode/thread/0ba00fbd-183f-4df6-afa2-04d0ac14706a)

> 本机渲染代码将需要使用 Direct2D 完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T15:42:35.833

您应该改用`Color`from `System.Windows.Media`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T14:36:23.113

您的消息**不是警告**，而是有关方法签名属性的信息。

SECURITY CRITICAL 是一个代码属性，真正的类名是 SecurityCriticalAttribute。必须将此属性赋予需要完全信任才能执行代码的方法（通常是本机代码调用、不安全代码、图形资源（通常需要非托管代码等））。

如果未授予方法完全信任，则安全关键方法会引发异常。

更多信息：http: [//msdn.microsoft.com/en-us/library/system.security.securitycriticalattribute.aspx](http://msdn.microsoft.com/en-us/library/system.security.securitycriticalattribute.aspx)

# ios - 表格视图顶部的分段控件，但不在标题视图中

> ID：12993212
> 
> 赞同：3
> 
> 时间：2012-10-20T22:20:52.657
> 
> 标签：ios, view, tableview, title, uisegmentedcontrol

如何将分段控件放在 tableview 之上。我不希望它出现在导航控制器的标题视图上，也不希望它与 tableview 一起滚动。为了参考我的意思，请查看 App Store 应用程序，选择类别，然后选择任何类别。在那里你会看到我正在寻找的分段控件。具有“付费”、“免费”和“发布日期”部分的部分。我使用的代码不是 IB，所以如果您知道如何使用代码而不是 IB 拖放来回答这个问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-20T23:01:06.433

当您在表格视图控制器中需要表格视图以外的其他组件时，您不能使用**UITableViewController**。您需要使用**UIViewController**。您将**UITableView**添加为子视图，并使视图控制器成为表视图的数据源和委托。然后，您也可以将任何其他组件添加到视图控制器的视图中。这样附加组件就不会随着表格视图滚动。要让视图控制器的行为与表视图控制器完全一样，还需要做更多的工作。这包括覆盖`setEditing:animated:`设置表格视图的编辑属性的方法。它包括取消选择方法中任何当前选定的行`viewWillAppear:`。

**UITableViewController**将表格视图作为其视图。这可以防止您以不会滚动的方式将任何其他子视图添加到表视图控制器。

# c++ - 使用模板技巧访问私有成员

> ID：12993219
> 
> 赞同：18
> 
> 时间：2012-10-20T22:21:38.840
> 
> 标签：c++, templates

从博客文章[*访问私人成员：Johannes Schaub 的更安全*](http://bloglitb.blogspot.com/2011/12/access-to-private-members-safer.html)的肮脏[- litb](https://stackoverflow.com/users/34509/johannes-schaub-litb)：

```
template<typename Tag, typename Tag::type M>
struct Rob { 
  friend typename Tag::type get(Tag) {
    return M;
  }
};

// use
struct A {
  A(int a):a(a) { }
private:
  int a;
};

// tag used to access A::a
struct A_f { 
  typedef int A::*type;
  friend type get(A_f);
};

template struct Rob<A_f, &A::a>;

int main() {
  A a(42);
  std::cout << "proof: " << a.*get(A_f()) << std::endl;
} 
```

由于内部未定义函数，如何`get`从对象调用函数？`a``class A`

**编辑：**

我不明白为什么 get 必须有 Tag 作为参数而不是 `a.*get<A_f>()` => 好的，这是由于 ADL 机制

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T23:50:49.283

你不是`get`从`a`! 实际上得到的返回是一个指向内部成员的类指针`A`和它的类型，`int A::*`所以你需要一个实例`A`来访问该值。

例如，让我玩一下您的代码：

```
struct A {
    A(int a):a(a) { }
    int b;
private:
    int a;
};
void test() {
    auto p = &A::b;
    std::cout << a.*p << std::endl;
} 
```

我`p`是从里面打电话`a`吗？`a`没有`p`，这正是你的代码中发生的事情，`get`函数返回`&A::a`，你`a`用来读取它的值！就是这样，没有什么错，我认为它将在所有编译器中编译。

这里的另一个问题是：为什么 C++ 允许使用`A`. C++ 标准说：

> **14.7.2p8**通常的访问检查规则不适用于用于指定显式实例化的名称。[注意：特别是，函数声明器中使用的模板参数和名称（包括参数类型、返回类型和异常规范）可能是通常无法访问的私有类型或对象，并且模板可能是成员模板或成员函数通常无法访问。]

但是，如果您尝试实例化甚至`typedef`指定模板，则会出现错误。让我们稍微修改一下您的示例：

```
struct A {
private:
    int a;
    friend void f();
};

// Explicit instantiation - OK, no access checks
template struct Rob<A_f, &A::a>;

// Try to use the type in some way - get an error.
struct Rob<A_f, &A::a> r;            // error
typedef struct Rob<A_f, &A::a> R;    // error
void g(struct Rob<A_f, &A::a>);      // error

// However, it's Ok inside a friend function.
void f() {
    Rob<A_f, &A::a> r;               // OK
    typedef Rob<A_f, &A::a> R;       // OK
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T22:40:51.237

这是合法的，因为友元函数总是在全局范围内，即使你在一个类中实现它们。换句话说，这：

```
class A
{
    friend void go() {}
}; 
```

只是一个捷径：

```
class A
{
    friend void go();
};

void go() {} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T04:08:33.820

这是 gcc 中的一个已知编译器错误，并在以后的版本中得到修复。看-：

[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=41437](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=41437)

# bash - 使用 Sed 或 Awk 将“全部拒绝”添加到 IP 地址列表

> ID：12993228
> 
> 赞同：1
> 
> 时间：2012-10-20T22:22:32.857
> 
> 标签：bash, sed, awk, prepend

这可能真的很简单，但我想知道如何将“全部拒绝”（“全部”后面有空格）添加到 IP 列表（可能超过 4,000 个）。

文件的每一行都包含一个 IP 地址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T22:29:26.657

尝试（**未测试**）：

```
sed -e 's/^/Deny from all /' infile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T23:16:42.557

使用 awk 执行此操作：

```
awk '{print "deny from all " $0}' < infile > outfile 
```

# c++ - 使用 getline 输入二维数组

> ID：12993230
> 
> 赞同：0
> 
> 时间：2012-10-20T22:22:47.323
> 
> 标签：c++, multidimensional-array, getline

对于我的一项任务，我必须使用 getline 输入一个二维数组。迷宫设计是现场制作的。

```
16 10
################
#      #    #  #
# # #### ##   ##
# #      #######
# ###### #E    #
#S# #  # ### ### 
# # ## #     # #
# # ## ####### #
#              #
################ 
```

这是用于测试我们的回溯算法的示例输入之一。

16 10 是我们迷宫的列和行。

我想知道我将如何正确解析 getline 以便我的 2D 数组将使用给定的迷宫填充。

在旁注中，我做了一个练习，我不需要 cin 而是已经有了我的数组，我想知道如何告诉它从 S 开始。

抱歉，如果对此有疑问，但我并没有真正看到它以这种格式进入二维数组的地方，而您不知道数组大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T22:33:36.883

`getline`一次只能读取一行，因此您可能想要做的是使用`for`循环依次读取每一行并将其存储为二维数组的一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T22:41:37.037

尝试这个：

```
size_t num_rows;
size_t num_cols;

cin >> num_rows >> num_cols;

char* maze = new char[num_rows * num_cols];

for (size_t row = 0; row < num_rows; row++)
{
     string line;

     getline(cin, line);

    if (line.size() != num_cols)
    {
        cerr << "Error! Size is " << line.size() << " rather than " << num_cols << endl;
        exit(1);
    }

    for (size_t col = 0; col < num_cols; col++)
    {
        maze[(row * num_cols) + col] = line[col];
    }
}

cout << "Maze is: " << endl;

for(int row = 0; row < num_rows; row++)
{
    for(int col = 0; col < num_cols; col++)
    {
        cout << maze[(row * num_cols) + col];
    }

    cout << endl;
}

delete [] maze; 
```

要找出开始的位置：

```
size_t start_row, start_col;

for(int row = 0; row < num_rows; row++)
{
    bool found = false;

    for(int col = 0; col < num_cols; col++)
    {
        if (maze[(row * num_cols) + col] == 'S')
        {
            start_row = row;
            start_col = col;
            found = true;
            break;
        }
    }

    if (found)
    {
        break;
    }
} 
```

您可以为终点做类似的事情。

如果您想将起点放在一个随机的空白点，您可以使用`srand`and `rand`。

首先，在程序开始时播种伪随机数生成器：

```
srand(time(0)); 
```

然后，确定一个随机起点：

```
size_t start_row, start_col;
bool found = false;

while (!found)
{
    start_row = rand() % num_rows;
    start_col = rand() % num_cols;

    if (isspace(maze[(start_row * num_cols) + start_col]))
    {
        maze[(start_row * num_cols) + start_col] = 'S';
        found = true;
    }
} 
```

您可以以类似的方式将结束点放在随机的空白点中。

人们会这么说[`srand`](http://www.cplusplus.com/reference/clibrary/cstdlib/srand/)，并且[`rand`](http://www.cplusplus.com/reference/clibrary/cstdlib/rand/)不太擅长生成随机数。这是真的，但它应该足以满足您的需求。

# actionscript-3 - AS3 角色移动

> ID：12993234
> 
> 赞同：0
> 
> 时间：2012-10-20T22:24:15.017
> 
> 标签：actionscript-3

我对 AS3 很陌生，并且非常喜欢学习它。我的问题是我需要将角色从一帧移动到另一帧。

我知道如何通过让他用箭头键移动到命中点来移动他并让他从一帧转到下一个场景，但我不知道如何在下面执行此操作

如果角色向右走到舞台的尽头，他应该出现在下一帧的左侧。如果他走到舞台的左边，他应该出现在前一个场景的右边

任何帮助都会很棒，谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T23:02:58.450

您可以在关键事件处理程序中添加条件：

```
// Here you set a new `x` value for the character
// If the redistration point is in the left top corner
if (myCharacter.x > stage.width)
    myCharacter.x = -myCharacter.width;
else if (myCharacter.x < -myCharacter.width)
    myCharacter.x = stage.width; 
```

# php - 测量链接的响应时间

> ID：12993238
> 
> 赞同：0
> 
> 时间：2012-10-20T22:24:55.997
> 
> 标签：php, linux

我正在尝试创建一个简单的负载平衡脚本，我想知道是否可以实时找到服务器的响应时间？我的意思是可以测量发出请求后服务器响应需要多长时间？

我想做的很简单，我想向链接/服务器发送请求并倒计时，如果服务器的回复时间超过 5 秒，我想落在备用服务器上。

请注意，它不必是纯 php，我不介意使用其他语言，例如 javascript、C/C++、asp，但我更喜欢在 PHP 中进行。如果有可能完成这项任务，你能否指出我正确的方向，以便我可以阅读它。

**澄清**

我想要做的不是下载文件，看看花了多长时间，我的服务器负载很高，当你点击文件下载时它们需要一段时间才能响应，我想要做的是测量服务器响应所需的时间（在这种情况下，它是服务器响应并允许用户下载文件所需的时间），如果花费的时间超过`x`几秒钟，它应该回退到备份服务器上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T22:27:33.197

我认为您应该查看[curl_getinfo](http://php.net/manual/en/function.curl-getinfo.php)它返回的内容超出了您的需要

```
url
content_type
http_code
header_size
request_size
filetime
ssl_verify_result
redirect_count
total_time  <------------------ what you need
namelookup_time
connect_time
pretransfer_time
size_upload
size_download
speed_download <------- Speed 
speed_upload
download_content_length
upload_content_length
starttransfer_time
redirect_time  <------ Can cause increase in time 
certinfo 
```

**您的编辑：** `if it takes longer than x seconds, it should fall back on a`

**解决方案**：您需要的只是设置`CURLOPT_CONNECTTIMEOUT`为`x seconds`...它将终止，您可以继续执行其他任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T22:54:04.207

与 curl 类似，您也可以使用`HttpRequest`并将`timeout`选项设置为 5。

# python - 将字符与带或不带小数部分的数字分开

> ID：12993239
> 
> 赞同：0
> 
> 时间：2012-10-20T22:25:01.217
> 
> 标签：python, regex

我还在学习正则表达式，我遇到了一个问题......

我正在尝试分离一个由十进制格式的字母和数字混合组成的字符串：

AB0.500CD1.05EF2.29

变成这样：

list1 = AB,CD,EF

list2 = 0.500,1.05,2.29

所有这一切的复杂之处在于我也有看起来像这样的字符串：

AB1CD2EF3

我也想把它分成：

list1 = AB,CD,EF

列表2 = 1,2,3

先前的查询产生了以下片段，

```
import re
pattern = re.compile(r'([a-zA-Z]+)([0-9]+)')
for (letters, numbers) in re.findall(pattern,cmpnd):
    print numbers
    print letters 
```

此示例适用于第二种字符串，但仅“找到”第一种字符串中包含小数位的数字中的前导数字。

我尝试了使用以下行的方法：

```
pattern = re.compile(r'([a-zA-Z]+)([0-9]+(\.[0-9]))') 
```

但这会导致错误：“ValueError: too many values to unpack”

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T22:29:03.770

只需在包含数字的字符类中添加一个点：

```
pattern = re.compile(r'([a-zA-Z]+)([0-9.]+)') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T22:54:33.750

错误

```
ValueError: too many values to unpack 
```

生成是因为您向正则表达式添加了一个新的匹配组

```
([a-zA-Z]+)([0-9]+(\.[0-9]))
                --^^^^^^^^^-- 
```

导致分配数量（即 2 个分配）之间的不一致

```
for (letters, numbers) in re.findall(pattern,cmpnd):
  --^^^^^^^^^^^^^^^^^^-- 
```

以及每组中正则表达式返回的匹配数（即3个匹配）

```
for (letters, numbers) in re.findall(pattern,cmpnd):
                        --^^^^^^^^^^^^^^^^^^^^^^^^^-- 
```

您可以通过更新解包轻松解决这些问题

```
for (letters, numbers, _) in re.findall(pattern, cmpnd): 
```

但是你还是有问题。您的正则表达式不会接受没有小数部分的数字。您可以扩展正则表达式，对小数部分进行匹配组可选：

```
([a-zA-Z]+)([0-9]+(\.[0-9])?)
                         --^-- 
```

此时代码将如下所示：

```
import re
pattern = re.compile(r'([a-zA-Z]+)([0-9]+(\.[0-9])?)')
for (letters, numbers, _) in re.findall(pattern, text):
  print letters, numbers 
```

## 改进

第三个匹配组没有被使用，因为它包含在另一个更大的匹配组中。因此，您可以将此组设为不匹配的组，`(?:\.[0-9])?)`.

```
import re
pattern = re.compile(r'([a-zA-Z]+)([0-9]+(?:\.[0-9])?)')
for (letters, numbers) in re.findall(pattern, text):
  print letters, numbers 
```

此外，如果您不想强制验证数字格式，您可以简化它。也就是说，接受由任意顺序的连续数字和句点组成的字符串作为数字，`[0-9.]+`.

```
import re
pattern = re.compile(r'([a-zA-Z]+)([0-9.]+)')
for (letters, numbers, _) in re.findall(pattern, text):
  print letters, numbers 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T22:27:48.603

试试这个模式，

```
[A-Z]{2}(\d+(\.(\d)+)?) 
```

或者

```
[A-Z]+(\d+(\.(\d)+)?) 
```

# javascript - 骨干新手：接近布局

> ID：12993242
> 
> 赞同：1
> 
> 时间：2012-10-20T22:25:20.833
> 
> 标签：javascript, backbone.js, coffeescript

我有一个主干应用程序（链接到 rails），目前看起来很像标准的 RESTful 资源。

我目前在我的索引页面上有一个“new_post”链接，通过以下方式调用：

```
 Backbonedemo.Views.PostsIndex extends Backbone.View

    # ...

    events: ->
      'click #new_post' : "newPost"

    newPost: ->
      Backbone.history.navigate("/posts/new", true)

    # ... 
```

我想将它包含在我拥有的每个主干 RESTful 页面（索引、显示、编辑等）中，我想知道该怎么做。

我最初的计划是将#new_post html 放在（非主干）父rails 模板中，但我无法确定从每个主干视图绑定事件的位置。

或者，我想我可以在（生态）模板系统中加入某种布局。

最后 - 也是最不希望的 - 是在每个视图中设置点击 #new_post 事件，并在每个主干模板中呈现它。布莱尔。

那么，解决这个问题的最优雅的方法是什么？有没有一个地方可以优雅地跨多个模板放置事件绑定？即路由器或其他东西，如果是这样，如何？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T01:17:12.807

如果单击时唯一的操作是更改页面的路线，您可以简单地创建`#new_post`链接`/post/new`并跳过进行任何程序化更改。

# php - 带有数据库连接的 Ajax 和 PHP

> ID：12993249
> 
> 赞同：0
> 
> 时间：2012-10-20T22:26:07.097
> 
> 标签：php, mysql, ajax, jquery

我对下面的代码有问题，如果电子邮件已经存在，我会尝试带来错误消息，但我没有成功..查看代码：

Ajax 一个 jQuery：

```
<script type="text/javascript">  

    // Centering the text content
    jQuery(window).resize(function () {
        boxHeight();
    }).load(function() {
        boxHeight();
        // Show the content and focus the email input
        $("#content").fadeIn();
        $("#email").focus();

    });

    jQuery(document).ready(function($){
        $('#subscribe').submit(function(e){
            e.preventDefault();

            email = $('input#email');           
            email_regex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;           
            if(!email_regex.test(email.val())) {
                $('#response', form).fadeIn(500, function() {
                    $('#response', form).html('<p class="message warning" align="center">Invalid email</p>');
                });
                return;
            } else {
                $('#response', form).html('<p class="message">Please Wait...</p>');
            }

            var form = $(this);
            var post_url = form.attr('action');
            var post_data = form.serialize();               
            $.ajax({
                type: 'POST',
                url: post_url,
                data: post_data,
                success: function(responseText) {  if(responseText == 1) {
                    $('#response', form).html('<p class="message">Error...</p>');
                } else { if(responseText == "") {                       
                    $(form).fadeOut(500, function(){
                        form.html(msg).fadeIn();
                    });

                }
                }
            }
            });
        });
    });
</script> 
```

PHP数据库连接：

```
 <?php    
$host="xxxx"; // Host name
$username="xxxx"; // Mysql username
$password="xxxx"; // Mysql password
$db_name="xxxx"; // Database name
$tbl_name="xxxx"; // Table name

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

// Get values from form
$email = $_POST['email'];

$query = mysql_query("SELECT email FROM banco_emails WHERE 'email' = '$email'");
    if(mysql_num_rows($query) == 1) { // if return 1, email exist.
    echo '1';
    } else {
// Insert data into mysql
$sql="INSERT INTO $tbl_name(email) VALUES ('". $email . "')";
$result=mysql_query($sql);
echo '<p class="message">Thanks for registering. Our bar is getting crowded!</p>'; 
```

问题是 ajax 代码没有显示错误消息，只有消息“请稍候......”并且没有任何反应，我不知道为什么......

对不起，我的英语不好。

提前致谢！

* * *

问题解决了，问题出在php代码中，我做到了，而且成功了！

```
 $query = mysql_query("SELECT email FROM banco_emails WHERE email = '$email' LIMIT 1");

    $email_check = mysql_num_rows($query);
     if ($email_check > 0) {
    echo '1';
    } else if ($email_check == 0) {
// Insert data into mysql
$sql="INSERT INTO $tbl_name(email) VALUES ('". $email . "')";
$result=mysql_query($sql);
echo '<p class="message">Thanks for registering. Our bar is getting crowded!</p>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T23:13:10.717

在您的成功函数中，您错误地处理了 PHP 在成功时返回的内容。如果电子邮件是新的并且被添加到数据库中，PHP 将回显：

```
<p class="message">Thanks for registering. Our bar is getting crowded!</p> 
```

您的 JS 会像这样解析响应：

```
if(responseText == 1) {
    $('#response', form).html('<p class="message">Error...</p>');
} else {
   if(responseText == "") {                       
       $(form).fadeOut(500, function(){
          form.html(msg).fadeIn();
       });
   }
} 
```

这里的问题是，如果 responseText 是空字符串，您只会显示 HTML 消息。您应该摆脱 if 语句：

```
if(responseText == 1) {
    $('#response', form).html('<p class="message">Error...</p>');
} else {                       
   $(form).fadeOut(500, function(){
      form.html(msg).fadeIn();
   });
} 
```

这样`responseText`就显示出来了。而且我不能 100% 确定您提交的 HTML 是什么样的，但是在您显示消息后，如果隐藏表单后它仍然可见，您可能希望淡出“请稍候”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T22:35:45.323

尝试这种方式：

制作独特的电子邮件栏。如果电子邮件地址已经存在，则返回错误，您可以在 ajax 错误部分向用户显示错误消息。

# iphone - CCParticle Meteor cocos2d

> ID：12993251
> 
> 赞同：2
> 
> 时间：2012-10-20T22:26:17.827
> 
> 标签：iphone, cocos2d-iphone, ccparticlesystem

我已经阅读了 CCParticle，但我目前唯一遇到的问题是了解 startSize、endSize、startSizeVar、startColor 等项目的含义。是否有他们都在做什么的链接，或者有人可以向我解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T06:56:18.603

*   **startSize** - 是粒子出现时的大小（它是一个四边形，所以只需要一个数字）
*   **endsize** - 是大小，当它消失时 - 它会在其生命周期内增长或缩小到这个大小
*   **startSizeVar** - 是起始尺寸方差 - 当它不为零时，粒子将出现在尺寸：startSize +/- 0 和 startSizeVar 之间的随机数
*   **endSizeVar** - 是最终尺寸方差 - 当它不为零时，粒子将以尺寸消失：endSize +/- 0 和 endSizeVar 之间的随机数
*   **startColor** - 部分的颜色，出现时
*   **endColor** - 粒子消失时的颜色（它的颜色会在生命周期内从 startColor 变为 endColor）

*所有这些属性都在CCParticleSystem.h*中得到了很好的解释（通过评论）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T04:20:11.153

这里是 Cocos2d 粒子编程指南的链接：

[粒子编程指南](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide%3aparticles)

# c# - 返回结构对象的Web服务方法

> ID：12993258
> 
> 赞同：-1
> 
> 时间：2012-10-20T22:27:59.837
> 
> 标签：c#, asp.net, .net, web-services, soap

我有一个带有两个方法 1 的 web 服务，它返回一个带有两个数组的结构：

```
 public struct GetWeatherItemDataStruct
   {
        //public DateTime[] TimeStamp;
        public double[] Value;
        public string[] TimeStamp;
   }

[WebMethod]
public GetWeatherItemDataStruct GetWeatherItemData(string parameterName,string fromTime,string toTime)
{
    GetWeatherItemDataStruct gwiDataStructObj = new GetWeatherItemDataStruct();
    SqlConnection conn  = null;
    SqlDataReader rdr   = null;
    int prameterID      = GetParameterID(parameterName);
    int tblSize         = GetTableSize(parameterName, fromTime, toTime, prameterID);
    double[] result     = new double[tblSize];
    int i = 0;
    string[] tStamp     = new string[tblSize];
    String source       = "Data Source=MASTER-PC\\SQLEXPRESS;Initial Catalog=WeatherDatabase;Integrated Security=True";
    try
    {
        using (conn = new SqlConnection(source))// create and open a connection object
        {                         
            // 1\. create a command object identifying
            // the stored procedure
            SqlCommand cmd  = new SqlCommand("GetWeatherItemData", conn);                
            // 2\. set the command object so it knows
            // to execute a stored procedure
            cmd.CommandType = CommandType.StoredProcedure;
            // 3\. add parameter to command, which
            // will be passed to the stored procedure
            //cmd.Parameters.Add(new SqlParameter("@WeatherParameterID", "1"));
            cmd.Parameters.Add("@WeatherParameter", SqlDbType.VarChar).Value    = parameterName;
            cmd.Parameters.Add("@FromTimeStamp", SqlDbType.VarChar).Value       = fromTime;
            cmd.Parameters.Add("@ToTimeStamp", SqlDbType.VarChar).Value         = toTime;
            conn.Open();
            // execute the command
            rdr = cmd.ExecuteReader();
            while (rdr.Read())
            {
                result[i]   =   (double)rdr["MeasurementValue"];
                tStamp[i]   =   rdr["Recieved"].ToString();
                i++;                   
            }
            gwiDataStructObj.Value      = result;
            gwiDataStructObj.TimeStamp  = tStamp;
            int b = gwiDataStructObj.Value.Length;
        }
    }
    catch (SqlException e)
    {
        //Log exception
        //Display Error message
    }
    return gwiDataStructObj;
}

[WebMethod]
public int[] stringTest(string[] tString)
{

    int numberOfStrings = tString.Length;
    int[] returnS = new int[numberOfStrings];
    for (int i = 0; i <= numberOfStrings; i++)
    { 
        returnS[i] = 1;

    }
    return returnS;
} 
```

在客户端程序上，我可以从结构表中读取如下：

```
 string dtFrom = "2012-10-04 19:05:57:190";
        string dtTo = "2012-10-05 21:50:05:197";
        double[] paramValue;
        string[] timeStamp;
        var client = new WebServiceSample.WebService1SoapClient();
        paramValue = client.GetWeatherItemData(paramName, dtFrom, dtTo).Value.ToArray();
        timeStamp =  client.GetWeatherItemData(paramName, dtFrom, dtTo).TimeStamp.ToArray(); 
```

这似乎工作正常。但我有另一种方法返回相同结构的数组：

```
public struct GetWeatherItemDataStruct
{
    //public DateTime[] TimeStamp;
    public double[] Value;
    public string[] TimeStamp;
}

[WebMethod]
public GetWeatherItemDataStruct[] GetSelectedWeatherItemsData(string[] parameterName, string fromTime, string toTime)
{
    int numbeOfParameters   = parameterName.Length;
    GetWeatherItemDataStruct[] getSelectedItemsStructObj = new GetWeatherItemDataStruct[numbeOfParameters];
    SqlConnection conn      = null;
    SqlDataReader rdr       = null;
    int prameterID          = 0;
    int tblSize             = 0;
    double[] result;
    int i                   = 0;
    int counter             = 0;
    for (counter = 0; counter < numbeOfParameters; numbeOfParameters++)
    {
        prameterID          = GetParameterID(parameterName[counter]);
        tblSize             = GetTableSize(parameterName[counter], fromTime, toTime, prameterID);
        result              = new double[tblSize];

        string[] tStamp     = new string[tblSize];
        String source       = "Data Source=MASTER-PC\\SQLEXPRESS;Initial Catalog=WeatherDatabase;Integrated Security=True";
        try
        {
            using (conn = new SqlConnection(source))// create and open a connection object
            {
                // 1\. create a command object identifying
                // the stored procedure
                SqlCommand cmd  = new SqlCommand("GetWeatherItemData", conn);
                // 2\. set the command object so it knows
                // to execute a stored procedure
                cmd.CommandType = CommandType.StoredProcedure;
                // 3\. add parameter to command, which
                // will be passed to the stored procedure
                //cmd.Parameters.Add(new SqlParameter("@WeatherParameterID", "1"));
                cmd.Parameters.Add("@WeatherParameter", SqlDbType.VarChar).Value = parameterName;
                cmd.Parameters.Add("@FromTimeStamp", SqlDbType.VarChar).Value = fromTime;
                cmd.Parameters.Add("@ToTimeStamp", SqlDbType.VarChar).Value = toTime;
                conn.Open();
                // execute the command
                rdr = cmd.ExecuteReader();
                while (rdr.Read())
                {
                    result[i] = (double)rdr["MeasurementValue"];
                    tStamp[i] = rdr["Recieved"].ToString();
                    i++;
                }
                getSelectedItemsStructObj[counter].Value        = result;
                getSelectedItemsStructObj[counter].TimeStamp    = tStamp;

            }
        }
        catch (SqlException e)
        {
            //Log exception
            //Display Error message
        }

    }        
    return getSelectedItemsStructObj;
} 
```

我在这里卡住了。我如何阅读每个对象的表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T03:16:05.207

## 根据上面的评论。

要从数组内的结构中获取数据，您可以像设置它一样检索它。

```
myArrayOfStruct[0].myStructProperty 
```

如果它是结构中的一个数组，它只是：

```
myArrayOfStruct[0].myArrayProperty[0] 
```

如果你想循环遍历数组中的所有结构和数组属性中的所有项，你需要接下来的两个循环：

```
for (int i = 0; i < myArrayOfStruct.length; i++){
   for (int j = 0; j < myArrayProperty.length; j++){
      myData = myArrayOfStruct[i].myArrayProperty[j]; 
      // do something with the data
   }
} 
```

基本上，`myArrayOfStruct[0].myProperty`与像这样访问它是一样的：

```
MyStruct myStruct = myArrayOfStruct[0];
myStruct.myProperty 
```

这回答了你的问题了吗？您在上面正确设置。您以类似的方式检索它。

# jsf - a4j:jsFunction 不工作

> ID：12993263
> 
> 赞同：0
> 
> 时间：2012-10-20T22:29:04.503
> 
> 标签：jsf, richfaces

我对 JSF 和 RichFaces 很陌生。我正在使用 RichFaces 4.X 和 JSF 2.0。我创建了一个示例页面，其中我的命令按钮称为 a4j 按钮，但它似乎不起作用。这是我的页面。有人可以帮忙吗

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:f="http://java.sun.com/jsf/core">

<h:head>
    <title>My Registration Page</title>
    <link href="stylesheet/reset.css" rel="stylesheet" type="text/css" />
    <link href="stylesheet/style.css" rel="stylesheet" type="text/css" />
    <link rel="icon" type="image/png" href="images/icons/favicon.png" />

    <script language="javascript">
        function showProgressBar()
        {
            alert("its in show");
        }

        function hideProgressBar()
        {
            alert("its in hide");
        }
        </script>
</h:head>
<h:body>
    <a4j:jsFunction name="login" action="#{loginBean.validateUser}"
        onbegin="showProgressBar();"
        oncomplete="hideProgressBar();" />

    <div id="login-container">
        <div class="login-logo">
            <img src="images/logo.png" />
        </div>
        <f:view>
            <div id="loin-form">
                <h1>
                    Log in to your account or <a href="#">sign up</a> to Get Started
                </h1>
                <h:form>
                    <h:inputText id="userName" value="#{loginBean.userName}"
                        validator="#{loginBeanValidator.validateUserName}" required="true"
                        class="txtFld" />
                    <h:message for="userName"></h:message>
                    <h:inputSecret id="passWord" value="#{loginBean.passWord}"
                        validator="#{loginBeanValidator.validatePassword}" required="true"
                        class="pswrdFld" />
                    <h:message for="passWord"></h:message>
                    <p>
                        <a4j:commandLink id="forgotPasswordLink"
                            value="Forgot Your Password? " />
                        <a4j:commandButton id="loginButton" value="Sign In" action="login();"
                            styleClass="sign-btn" />
                    </p>
                </h:form>
            </div>
        </f:view>
    </div>
</h:body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T10:24:43.243

实际问题出在您的命令按钮中

```
 <a4j:commandButton id="loginButton" value="Sign In" action="login();"
     styleClass="sign-btn" /> 
```

“action”属性需要一个操作方法的 EL 表达式，当按下按钮或导航规则时，该操作方法将在服务器上执行。a4j:jsFunction 的目的是从 javascript 调用执行 ajax 请求，而 a4j:commandButton 的目的是在按下时执行 ajax 请求。在您的情况下，您实际上并不需要 a4j:jsFunction。只需将其删除并将其属性放在 a4j:commandButton 上，如下所示：

```
 <a4j:commandButton id="loginButton" value="Sign In" 
    action="#{loginBean.validateUser}" onbegin="showProgressBar();"
    oncomplete="hideProgressBar();" styleClass="sign-btn" /> 
```

# qt - 在不更改 QWidget 的情况下使用样式表定义选项卡背景？

> ID：12993268
> 
> 赞同：3
> 
> 时间：2012-10-20T22:29:34.720
> 
> 标签：qt, tabs, qtscript, qtstylesheets

我想制作一个非常基本的 GUI：选项卡、文本区域。

但我想给我的标签上色，让它们在 MAC、Windows 和 Linux 上看起来总是一样的。

所以，我尝试使用样式表：

```
QTabWidget::pane
{
    border-top: 2px solid #1B1B1B;
    background-color: #262626;
}

QTabWidget::tab-bar
{
    left: 5px;
    alignment: left;
    background: #3E3E3E;
}

QTabBar::tab
{
    background: transparent;
    color: #757575;
    padding: 15px 5px 15px 5px;
}

QTabBar::tab:hover
{
    text-decoration: underline;
}

QTabBar::tab:selected
{
    color: #DEF600;
    background: qlineargradient( x1: 0, y1: 0, x2: 0, y2: 1, stop: 0 #262626, stop: 1.0 #3D3D3D );
} 
```

但是即使选项卡看起来不错，也有一个问题：选项卡窗格仍然是透明的......

我可以通过添加强制背景颜色：

```
QWidget
{
    background-color: #262626;
} 
```

但是如你所知，这改变了所有小部件的背景颜色，甚至我的 QPlainTextEdit 我仍然想要一个白色背景。更烦人的是，这会重置操作系统皮肤并显示丑陋的滚动条（我真的很想保持原样）。

有没有一种方法可以更改选项卡窗格背景而无需重新设置所有组件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-07-12T13:01:22.127

我有同样的问题。我可以让它与这个一起工作：

```
QTabWidget::pane > QWidget {
    background-color: #262626;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T00:33:38.903

尝试这个。

```
QTabWidget::pane {
    background: red;
} 
```

您可以阅读[此](http://qt-project.org/doc/qt-4.8/stylesheet-examples.html#customizing-qtabwidget-and-qtabbar)内容了解详细信息。还有一件事要评论。您可以使用 QObject::objectName() 作为样式表的 id 选择器。例如，

```
QTabWidget#myTab { ... } 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-04T23:21:02.353

可以简单地通过：

```
* {background: green;} 
```

此样式设置了**此小部件及其所有子**组件的背景，因此您需要了解一件重要的事情。您认为的区域实际上`QTabWidget`是`QWidget`设置**在**. 您可以通过添加样式`QTabWidget`轻松检查他们的孩子在哪里以及他们的孩子在哪里`QTabWidget`

```
QTabWidget::pane {background: green; padding: 10px;} 
```

绿色区域是 a `QTabWidget`，所有内部都被`QTabWidgets`孩子重叠（任何`QWidget`添加的`addTab()`功能）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-29T08:28:03.400

尝试启用文档模式

`myTab->setDocumentMode(true);`

当其他一切都失败时，这对我有用。您可以在代码中执行此操作，也可以通过在 qtcreator 中调整属性来执行此操作。

您可能仍然需要对窗格应用一些样式，如下所示：

```
QTabWidget:pane{
background: red;
} 
```

[在文档](http://qt-project.org/doc/qt-5.0/qtwidgets/qtabwidget.html#documentMode-prop)中阅读有关此内容的更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T10:49:47.087

请参考： [http ://doc.qt.digia.com/qt/stylesheet-syntax.html](http://doc.qt.digia.com/qt/stylesheet-syntax.html)

阅读选择器类型下的 ID 选择器。您可以指示仅对给定对象名称应用某种样式。因此，您可以使用您为 tabWidget 指定的任何名称。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T03:09:01.193

添加样式

```
 "background-color:rgb(255,255,255)" 
```

到每个选项卡。

# java - TD游戏中的圆形敌人检测

> ID：12993270
> 
> 赞同：1
> 
> 时间：2012-10-20T22:29:44.257
> 
> 标签：java

我正在开发一款 Java 塔防游戏，但我遇到了一个问题：我无法让塔在一个圆圈内找到敌人。我的代码：

```
if(twrsq.intersects(GameScreen.enemies[i])) {
    shooting = true;
    shotEnemy = i;
}
this.twrsq = new Rectangle(
    x - (twrsqsize/2), y - (twrsqsize/2),
    width + twrsqsize, height +  twrsqsize); 
```

`twrsq`保存当前矩形；这需要是一个圆圈。`GameScreen.enemies[i]`也有一个矩形。我正试图从周围做一个圆圈`twrsq`并使它们与敌人相交。

我怎样才能做到这一点？

编辑：我有点工作；我现在得到了这个[截图](http://screenshotuploader.com/s/01/2a383Cl1x)：

```
if(cir.intersects(GameScreen.enemies[i])) {
    shooting = true; shotEnemy = i;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T22:38:16.137

两者都`java.awt.Rectangle`实现`java.awt.geom.Ellipse2D`接口`Shape`。后者的`contains()`方法可能有用。

# ios - iOS 最成熟的 REST 服务库

> ID：12993272
> 
> 赞同：2
> 
> 时间：2012-10-20T22:31:07.713
> 
> 标签：ios, rest

如果我想从 iOS 应用程序中使用 REST 服务，那么最成熟的库是什么？我最好的选择是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T22:50:04.523

You can use [RestKit](http://mobile.tutsplus.com/tutorials/iphone/restkit_ios-sdk/).

Or you can use `NSJSONSerialization` which is already in the foundation framework.

Here's an exemple from a project that i made. It fetch an array of drinks from a json webservice:

```
 NSString *urlString= [NSString stringWithFormat:@"my json webservice URL"];
NSURL *url = [NSURL URLWithString:urlString];
NSData *data = [NSData dataWithContentsOfURL:url];
NSError *error;
NSDictionary *jsonResultSet = (NSDictionary*)[NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
if ([jsonResultSet count] !=0){
    NSArray* drinks = [jsonResultSet objectForKey:@"drinks"];
    for (NSDictionary* drinkDictionary in drinks) {
        Drink* drink = [[Drink alloc] initWithDictionary:drinkDictionary];
        [[DrinkList getInstance]addDrinksWithObject:drink];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T03:07:15.943

我推荐[AFNetworking](http://afnetworking.com/)。以下是取自其[Github 页面](https://github.com/AFNetworking/AFNetworking)的示例代码（那里有更多示例）：

```
NSURL *url = [NSURL URLWithString:@"https://alpha-api.app.net/stream/0/posts/stream/global"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    NSLog(@"App.net Global Stream: %@", JSON);
} failure:nil];
[operation start]; 
```

其他替代方案是：

*   [休息套件](https://github.com/RestKit/RestKit)
*   [LRResty](https://github.com/lukeredpath/LRResty)
*   [MKNetworkKit](https://github.com/MugunthKumar/MKNetworkKit)

其中，我认为 AFNetworking 和 RestKit 都是最受欢迎的。我个人已经广泛使用了 AFNetworking，因此我推荐它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-07T17:38:38.600

不太成熟但重量很轻：[JNRestClient](https://github.com/jonasman/JNRestClient)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-16T13:28:34.483

还有一个名为 Alamofire ( [https://github.com/Alamofire/Alamofire](https://github.com/Alamofire/Alamofire) ) 的新的 swift rest 库，看起来非常不错，它在 github 上已经有 6000 多个 star，它是由 Mattt Thompson 创建的，这意味着你可以无忧无虑地去做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-08T23:09:18.733

[JSONModel](https://github.com/icanzilb/JSONModel)使用起来非常简单。

[大衣](https://github.com/gonzalezreal/Overcoat)+[披风](https://github.com/Mantle/Mantle)真的很好看。

[RestKit](https://github.com/RestKit/RestKit)有点冗长，恕我直言。

# javascript - 使用正则表达式匹配一个或多个单词的一部分

> ID：12993273
> 
> 赞同：4
> 
> 时间：2012-10-20T22:31:45.187
> 
> 标签：javascript, jquery, regex

我是正则表达式的新手，对一些基本的东西有困难。

```
var name = "robert johnson";
var searchTerm = "robert johnson";

if (searchTerm.match(name)) {
    console.log("MATCH");
} 
```

我想尝试找到与以下任何一项匹配的内容：

```
rob, robert, john, johnson, robertjohnson 
```

为了使正则表达式更简单，我已经在“name”和“searchTerm”变量中添加了一个 .toLowerCase()。

需要将什么正则表达式添加到 searchTerm.match(name) 才能使其工作？

*澄清：*我不只是试图通过我给出的 5 个示例来通过测试，我正在尝试提出一些正则表达式，其中任何一个测试都将通过。因此，例如：

```
searchTerm.match(name) 
```

...需要更改为：

```
searchTerm.match("someRegexVoodooHere"+name+"someMoreRegexVoodooHere") 
```

所以，如果我编辑

```
var searchTerm = "robert johnson"; 
```

...成为

```
var searchTerm = "rob"; 
```

...相同的功能 searchTerm.match 指令将起作用。

同样，我是正则表达式的新手，所以我希望我能清楚地问这个问题。基本上我需要编写一个接受任何 searchTerm 的函数（它不包括在这里，但在其他地方我要求至少输入 3 个字符）并且可以检查是否在给定的字符串中依次找到这 3 个字母的“名字姓氏”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T22:43:18.620

```
"robert johnson".match(/\b(john(son)?|rob(ert(johnson)?)?)\b/) 
```

将为您提供所有可能的匹配项（如果您需要查找输入字符串是否包含任何单词，则有多个匹配项。

```
/\b(john(son)?|rob(ert(johnson)?)?)\b/.test("robert johnson") 
```

`true`如果字符串有任何匹配，将返回。（最好在条件中使用它，因为您不需要找到所有匹配项）。

*   `\b`- 表示单词边界。
*   `()`- 捕获组。
*   `?`- 量词“一或无”。
*   `|`- 逻辑“或”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T22:42:07.283

正则表达式查找模式以进行匹配。您的问题的答案在某种程度上取决于您希望完成什么 - 也就是说，您是否真的想要匹配的组或只是为了测试是否存在执行其他代码的模式。

要匹配字符串中的值，您需要使用布尔或匹配`|`- 使用该`i`标志将导致不区分大小写的匹配，因此您无需调用`toLowerCase()`-

```
var regex = /(rob|robert|john|johnson|robertjohnson)/i;
regex.match(name); 
```

如果您想要一个更复杂的正则表达式来匹配所有这些变体 -

```
var names = "rob, robert, john, johnson, robertjohnson, paul";
var regex = /\b((rob(ert)?)?\s?(john(son)?)?)\b/i;
var matches = regex.match(names); 
```

这将导致`matches`数组有 5 个元素（除“paul”之外的每个名称）。值得注意的是，这也会匹配其他名称，例如可能不需要的“rob johnson”和“rob john”。

`test()`您也可以使用-测试您的字符串是否包含这些术语中的任何一个

```
var name = "rob johnson";
var regex = /\b((rob(ert)?)?\s?(john(son)?)?)\b/i;
if (regex.test(name)){
   alert('matches!');
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T22:43:23.983

您可以创建一个测试术语数组并遍历该数组。这种方法意味着在动态环境中构建不太复杂的正则表达式

```
var name = "robert johnson";
var searchTerm = "robert johnson";

var tests = ['rob', 'robert', 'john', 'johnson', 'robertjohnson'];
var isMatch = false;

for (i = 0; i < tests.length; i++) {
    if (searchTerm.test(tests[i])) {
        isMatch = true;
    }
}

alert(isMatch) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T22:48:48.887

`/^\s*(rob(ert)?|john(son)?|robert *johnson)\s*$/i.test(str)`

`str`如果匹配，将返回 true ：

*   抢
*   罗伯特
*   约翰
*   约翰逊
*   罗伯特约翰逊
*   罗伯特·约翰逊
*   罗伯特·约翰逊（这两个之间的空格无关紧要）

它只是不在乎前面或后面是否有空字符。如果您不希望这样，请`\s*`从模式的开头和结尾删除。此外，姓名和姓氏之间的空格和星号允许这两者之间有 0 个或多个空格。如果您不希望它包含任何空间，只需删除该空间和星号。

插入符号`^`表示字符串的开头，美元符号`$`表示字符串的结尾。最后，最后的`i`标志使它不区分大小写。

# java - 如何更新自定义 JPanel？

> ID：12993274
> 
> 赞同：2
> 
> 时间：2012-10-20T22:32:04.403
> 
> 标签：java, swing, user-interface, jpanel, repaint

如果我`repaint()`在我的 custom 上调用该函数`JPanel`，我的理解是它重新执行`paintComponent(Graphics g)`正确吗？还是重新创建整体`JPanel`？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T22:42:42.463

+1 垃圾神。状态的文档[`repaint()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#repaint%28%29)：

> 重绘此组件。

`repaint()`导致 AWT 调用`update()`（对于重量级组件，然后调用 paint `()`）或`paint()`（对于轻量级组件）在 EDT 上调用`paintComponent(...)`.

所以不，每次`repaint()`调用时都不会重新创建它。

**参考：**

*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)
*   [仔细看看油漆机制](http://docs.oracle.com/javase/tutorial/uiswing/painting/closer.html)

# core-data - NSPredicate 与关系 @"SELF. . . == %@" I have the following NSManagedObjects: Product <<->> ProductAttribute <->> ProductAttributeOption Wh 问问题 问问题 2012-10-20T22:32:08.640 2149 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have the following NSManagedObjects: Product <<->> ProductAttribute <->> ProductAttributeOption What's the correct way for using an NSPredicate to fetch the ProductAttributeOptions based on the product? I've tried the following without luck: [NSPredicate predicateWithFormat:@"ANY SELF.productAttribute.products MATCHES %@", product] [NSPredicate predicateWithFormat:@"ANY SELF.productAttribute@distinctUnionOfSets.products MATCHES %@"", product] [NSPredicate predicateWithFormat:@"ANY SELF.productAttribute.@distinctUnionOfSets.giftProducts LIKE[cd] %@", self.giftProduct] Any advice? Thanks! The following predicate should work: [NSPredicate predicateWithFormat:@"ANY productAttribute.products = %@", product]; "MATCH" and "LIKE" are used in predicates for matching strings. core-datanspredicaterelationshipnsmanagedobjectnsfetchedresultscontroller 4 1 回答 1 This answer is useful 5 以下谓词应该起作用： [NSPredicate predicateWithFormat:@"ANY productAttribute.products = %@", product]; “MATCH”和“LIKE”用于匹配字符串的谓词。 于 2012-10-21T09:52:13.593 回答 Related 1 java - 使用 Bloomberg Java API 获取日期和时间的 VWAP 量 1 c# - 将参数传递给 COM 接口 4 c# - 正确使用 MS SQL 0 jquery - jQuery animate() 2个元素之间的奇怪空间 4 java - 如果每个用户的 putty.exe 路径不同，如何从 java 打开 putty？ 1 c# - 我应该在哪里找到 MVC Razor 中的共享 @helper 函数 5 php - PHP foreach 循环 2 php - 修改分页脚本以在第一页上显示与其他页面不同的行数 1 android - Android诡异动作“程序” 0 ios - QLPreviewController 未打开下载的文件 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12993275
> 
> 赞同：0
> 
> 时间：
> 
> 标签：core-data, nspredicate, relationship, nsmanagedobject, nsfetchedresultscontroller

I have the following `NSManagedObjects`:

```
Product <<->> ProductAttribute <->> ProductAttributeOption 
```

What's the correct way for using an NSPredicate to fetch the `ProductAttributeOption`s based on the product?

I've tried the following without luck:

```
[NSPredicate predicateWithFormat:@"ANY SELF.productAttribute.products MATCHES %@", product]

[NSPredicate predicateWithFormat:@"ANY SELF.productAttribute@distinctUnionOfSets.products MATCHES %@"", product]

[NSPredicate predicateWithFormat:@"ANY SELF.productAttribute.@distinctUnionOfSets.giftProducts LIKE[cd] %@", self.giftProduct] 
```

Any advice? Thanks!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T09:52:13.593

以下谓词应该起作用：

```
[NSPredicate predicateWithFormat:@"ANY productAttribute.products = %@", product]; 
```

“MATCH”和“LIKE”用于匹配字符串的谓词。

# python - Errno 10061：无法建立连接，因为目标机器主动拒绝它（客户端-服务器）

> ID：12993276
> 
> 赞同：59
> 
> 时间：2012-10-20T22:32:10.803
> 
> 标签：python, sockets

我对这些客户端和服务器代码有问题，我不断收到**[Errno 10061] No connection could be made because the target machine positively denied it**

我在带有 Windows XP SP3 的虚拟机上运行服务器，在 Windows 7 64 位上运行客户端，我的 python 版本是 2.7.3。我想知道的是我应该如何编辑代码以在不同的网络上使用客户端和服务器！谢谢！

**服务器 ：**

```
#!/usr/bin/python           # This is server.py file

import socket               # Import socket module
s = socket.socket()         # Create a socket object
host = '0.0.0.0' # Get local machine name
port = 12345                # Reserve a port for your service.

print 'Server started!'
print 'Waiting for clients...'

s.bind((host, port))        # Bind to the port
s.listen(5)                 # Now wait for client connection.
c, addr = s.accept()     # Establish connection with client.
print 'Got connection from', addr
while True:
  msg = c.recv(1024)
  print addr, ' >> ', msg
  msg = raw_input('SERVER >> ')
  c.send(msg);
  #c.close()                # Close the connection 
```

**客户 ：**

```
#!/usr/bin/python           # This is client.py file

import socket               # Import socket module

s = socket.socket()         # Create a socket object
host = socket.gethostname() # Get local machine name
port = 12345                # Reserve a port for your service.

print 'Connecting to ', host, port
s.connect((host, port))

while True:
  msg = raw_input('CLIENT >> ')
  s.send(msg)
  msg = s.recv(1024)
  print 'SERVER >> ', msg
#s.close                     # Close the socket when done 
```

PS：代码来自网络。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-20T23:10:20.170

10061 是 WSAECONNREFUSED，“连接被拒绝”，这意味着在您尝试连接的 IP：端口上没有任何监听。

大约在 2000 年有一个防火墙产品，它发出拒绝而不是忽略到被阻塞端口的传入连接，但这很快被认为是对攻击者的信息泄漏，并被纠正或撤回。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-24T14:13:54.957

提示：`actively refused`听起来有点更深层次的技术问题，但是......

`errno:10061`...实际上，如果调用 bin/mongo 可执行文件[并且 mongodb 服务根本没有](https://stackoverflow.com/questions/26585433/mongodb-failed-to-connect-to-127-0-0-127017-reason-errno10061)在目标机器上运行，也会给出这个响应（也特别是）。这甚至适用于本地机器实例（都发生在本地主机上）。

➪**始终首先排除这种微不足道的可能性**，即只需使用命令行客户端访问您的数据库。

[看这里。](https://stackoverflow.com/questions/26585433/mongodb-failed-to-connect-to-127-0-0-127017-reason-errno1006)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-03T03:14:34.263

使用以下示例：[https](https://docs.python.org/3.2/library/socketserver.html) ://docs.python.org/3.2/library/socketserver.html 我确定我需要将 HOST 端口设置为运行服务器程序的机器。所以 TCPServer on 192.168.0.1 HOST = TCPServer IP 192.168.0.1 然后我必须将 TCPClient 端设置为指向 TCPServer IP。所以 TCPClient HOST 值 = 192.168.0.1 - 抱歉，这是我能描述的最好的了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-03-19T12:50:09.753

所以我面临同样的问题，对我有用的解决方案是......

我假设您的服务器和客户端程序是用 python 编写的。

1.  首先，打开一个python shell
2.  首先打开并运行Server程序
3.  然后打开另一个不同的python shell
4.  在此处打开并运行客户端程序
5.  完毕 ！！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-11T19:54:58.500

错误和防火墙之间没有关系。

首先，运行服务器程序，
然后在 python 的另一个 shell 中运行客户端程序

它会起作用

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-04T09:32:27.990

而不是'0.0.0.0'的本地主机，使用本地网络地址作为主机 - 服务器和客户端 - 代码。

主机 = '192.168.12.12' 端口 = 12345

绑定和连接到套接字时使用此主机地址。

server.bind((host, port)) client.connect((host, port))

这个改变为我解决了这个问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-05T08:28:35.807

以下更改解决了我的问题。我为同样的错误苦苦挣扎了一周。我想和大家分享一下，解决方案只是`host = ''`在服务器和服务器的客户端`host = ip`中。  

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-05T07:40:46.060

当我使用 python 库调用 REST API 时，我遇到了类似的问题，我发现我的服务器正在进入睡眠模式，这导致了这种情况。一旦我通过远程桌面连接登录到服务器，我的 API 调用就可以正常工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-21T20:56:32.430

我有错误 10060 和 10061。原因在于我的防病毒软件（Eset Nod 32）。尝试像我一样关闭防病毒软件的防火墙，或者只是将其删除一段时间以测试程序。如果一切开始正常工作，将该程序添加到排除项或切换到另一个防病毒软件。另外，尝试将“主机”变量更改为空字符串：

```
host = '' 
```

并将 socket.AF_INET、socket.SOCK_STREAM 添加到“s”变量中：

```
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-01-10T10:35:27.727

如果您的机器上安装了远程服务器。将 server.py 主机作为“localhost”和端口号。然后客户端，您必须提供本地 ip- 127.0.0.1 和端口号。然后它的作品

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-06-21T07:56:13.997

**这可能是因为代理或防火墙。如果是代理，那么您需要在代码或项目的入口点指定代理设置。**

```
import os #for proxy

proxy = 'http://10.XX.XX.XX:8X8X' #your own proxy 'http://<user>:<pass>@<proxy>:<port>'

os.environ['http_proxy'] = proxy 
os.environ['HTTP_PROXY'] = proxy
os.environ['https_proxy'] = proxy
os.environ['HTTPS_PROXY'] = proxy
#rest of code ..... 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-07-10T07:21:35.433

第一个：请确保您的端口“12345”已打开，然后当您使用不同的网络时。您必须在 LAN 中使用 IP 地址。不要使用“localhost”或“127.0.0.1”。这里的解决方案是： **在服务器中**

```
host = '192.168.1.12' #Ip address in LAN network 
```

**在客户端**

```
host = '27.32.123.32' # external IP Address 
```

希望这对你有用

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2017-11-22T02:02:40.623

短期解决方案是分别使用默认的 iis 主机和端口，通常分别为 120.0.0.1 和 80。但是，我仍在寻找更通用的解决方案。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2019-07-31T04:37:30.380

当您在windows机器上运行代码时，防火墙提示它允许网络访问，允许网络访问并且它将工作，如果没有提示，请转到防火墙设置>允许应用程序通过防火墙并选择您的python.exe并允许网络访问。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2016-11-26T09:58:24.660

解决方案是在客户端和服务器中使用相同的 IP 和端口号。尝试，在客户端使用 TCP_IP = 'write the ip number here' TCP_PORT = write the port number here s.connect((TCP_IP, TCP_PORT))

# javascript - 没有原生 SDK 的 phonegap 2.0 项目设置

> ID：12993277
> 
> 赞同：3
> 
> 时间：2012-10-20T22:32:13.257
> 
> 标签：javascript, cordova, sdk, build

我正在尝试使用 phonegap 构建云编译器构建我的第一个 phonegap 应用程序。那里的说明中说要在上传之前删除 phonegap.js ......这个神秘文件在哪里？我下载了最新的 phonegap 并且 /Libs/ 中没有任何内容看起来正确。似乎没有关于如何正确设置根 HTML 页面以使用 phonegap 编译的文档。

“一旦您包含了必要的资产，请删除 phonegap.js (cordova.js)，因为 Build 会在编译期间自动注入它。” - [https://build.phonegap.com/docs/preparing-your-app#what_do_i_upload](https://build.phonegap.com/docs/preparing-your-app#what_do_i_upload)

我的印象是我只需要使用 JS API 来完成代码，然后让云编译器完成它的工作，但是所有的文档都围绕着为每个平台安装一个 SDK。我不想使用 xCode 或 eclipse——我只想写 javascript。

我需要在我的根 HTML 文件中包含的最少资源是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:45:15.120

> 我需要在我的根 HTML 文件中包含的最少资源是什么？

您只需要 2 个文件：**index.html**（可能是名称“index.html”可在 config.xml 中配置，我不确定）和**config.xml**。

这是一个入门应用程序：[https](https://github.com/phonegap/phonegap-start) ://github.com/phonegap/phonegap-start ，看看 www 文件夹。

# powershell - 从 Powershell 中运行 msdeploy.exe

> ID：12993278
> 
> 赞同：6
> 
> 时间：2012-10-20T22:32:18.383
> 
> 标签：powershell, msdeploy

我正在尝试从 Powershell 中运行以下命令：

```
msdeploy -verb:sync -source:archiveDir=c:\KitchenPC\Build -dest:appHostConfig="KitchenPC",computerName=https://192.168.0.3:8172/msdeploy.axd,authType=Basic,userName=someuser,password="secret" -allowUntrusted 
```

[文档说](http://technet.microsoft.com/en-us/library/dd569106%28v=ws.10%29.aspx)只需将每个参数的after`:`替换为`=`. 所以我试过这个：

```
msdeploy -verb=sync -source=archiveDir=c:\KitchenPC\Build -dest=appHostConfig="KitchenPC",computerName=https://192.168.0.3:8172/msdeploy.axd,authType=Basic,userName=someuser,password="secret" -allowUntrusted 
```

但是，我收到错误：

> 错误：无法识别的参数“computerName=https://192.168.0.3:8172/msdeploy.axd”。所有参数必须以“-”开头。错误计数：1。

我已经检查了[有关 provider settings 的文档](http://technet.microsoft.com/en-us/library/dd569001%28v=ws.10%29.aspx)，但是他们没有提到它们等效的 Powershell 语法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T22:42:36.720

[当参数有空格时，如何从 powershell 调用 msdeploy？](https://stackoverflow.com/questions/3499699/how-do-you-call-msdeploy-from-powershell-when-the-parameters-have-spaces)

认为这已经回答了，只需修改它。前任。使用变量包括“KitchenPC”和“secret”，并将 -dest 部分放在引号内。

**工作示例：**

```
msdeploy '-verb=sync' '-source=archiveDir=c:\KitchenPC\Build -dest=appHostConfig="KitchenPC",computerName=https://192.168.0.3:8172/msdeploy.axd,authType=Basic,userName=someuser,password="secret"' -allowUntrusted 
```

（注意每个命令行参数周围的单引号）

# iphone - 核心数据获取到许多

> ID：12993280
> 
> 赞同：1
> 
> 时间：2012-10-20T22:33:01.520
> 
> 标签：iphone, objective-c, ios, core-data

我正在尝试获取所有类别及其子类别，并将它们全部显示在表格中。我知道如何获取所有类别，但我需要获取所有子类别，并使用获取结果控制器按类别对它们进行排序。有什么建议吗？

![在此处输入图像描述](../Images/5856ba95dbbd4bf24977d6f02c2aaebb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T01:50:05.737

您可以创建一个获取的结果控制器，该控制器获取*SubCategory*实体并根据*Category*将它们分组为部分：

```
// Fetch "SubCategory" entities:
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"SubCategory"];

// First sort descriptor for grouping the cells into sections, sorted by category name:
NSSortDescriptor *sort1 = [NSSortDescriptor sortDescriptorWithKey:@"category.name" ascending:YES];
// Second sort descriptor for sorting the cells within each section:
NSSortDescriptor *sort2 = [NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES];
request.sortDescriptors = [NSArray arrayWithObjects:sort1, sort2, nil];

self.fetchedResultsController = [[NSFetchedResultsController alloc]
                                        initWithFetchRequest:request
                                        managedObjectContext:context
                                          sectionNameKeyPath:@"category.name"
                                                   cacheName:nil];

[self.fetchedResultsController setDelegate:self];
NSError *error;
BOOL success = [self.fetchedResultsController performFetch:&error]; 
```

[然后，您可以使用NSFetchedResultsController 类参考](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html)中描述的常用表视图数据源方法。

这为您提供了一个表格视图，其中每个类别都有一个表格视图部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T23:53:44.707

因此，您在**fetchedResultsController.fetchedObjects中有类别**

因为每个**子**类别基本上都包含在**类别**中，您可以通过调用访问每个子类别`[Category valueForKey:@"subCategory"`

这将为您提供一个 NSSet，然后您可以对其进行排序（到 NSArray）并用作 tableView 的数据。

但它不会包含在 fetchedResultsController 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T06:01:27.483

如果您有选择权，您也可以根据需要以其他方式进行操作。

取arrayOfCategories 中的所有Category 对象

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection (NSInteger)section:

{
    Category *cat = [ arrayOfCategories objectAtIndex:indexPath.row]

   if(arrayToHoldObjects.count > 0)

{

[arrayToHoldObjects removeAllObject];
}

for(Subcategory *sub in Category.subcategory)

{
   [arrayToHoldObjects addObject:sub];

}

  return arrayToHoldObjects.count;

}

- (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {

  Category *cat = [ arrayOfCategories objectAtIndex:indexPath.row]

   if(arrayToHoldObjects.count > 0)

{

[arrayToHoldObjects removeAllObject];
}

for(Subcategory *sub in Category.subcategory)

{
   [arrayToHoldObjects addObject:sub];

}

   Subcategory *sub = [arrayToHoldObjects objectAtIndexPath.row]  

   for(int k =0 ; k < arrayToHoldObjects .count; k++)
  {

    // do what ever u like with sub  

     return cell;

   }

} 
```

# ruby-on-rails - 我将如何对它进行排序和分组并用rails循环它？

> ID：12993287
> 
> 赞同：1
> 
> 时间：2012-10-20T22:34:47.883
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, group-by

好的，所以我有一个带有此架构的所有静态页面表

```
create_table "pages", :force => true do |t|
  t.string   "name"
  t.text     "html"
  t.string   "url"
  t.integer  "position"
  t.boolean  "is_home"
  t.integer  "parent_id",  :default => 0, :null => false
  t.string   "nav"
end 
```

一个页面可以有另一个页面作为其父页面。这个想法是我希望用户完全控制导航和页面。所以我的问题是对这些页面进行分组的最佳方式是什么，以便在 html 中我可以遍历所有页面及其子页面

这是我到目前为止所拥有的

```
grouped_pages = Page.where(:is_home => 0).group_by(&:nav).each do |key, group|
 group.sort_by(&:parent_id)
end 
```

我希望将它们分组到某个数组和/或哈希组合中，与另一个层一起使用，以获取具有另一个页面的 parent_id 的页面

页面结构看起来像这样

```
Page1
  Page3
    Page7
  Page4
  Page5
Page2
  Page5
  Page6 
```

任何关于排序和循环以打印出 html 的 uls 的最佳方式的想法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T22:53:08.373

如果要允许任意嵌套树级别，最简单的解决方案是递归算法。例如（`parent_id = NULL`对于页面根，使用 ，而不是 0）：

```
class Page < ActiveRecord::Base
  belongs_to :parent, :class_name => :Page
  has_many :children, :class_name => :Page, :foreign_key => :parent_id 

  def self.root
    where(:parent => nil).first
  end

  def tree
    [self, children.map(&:tree)]
  end
end

Page.root.tree 
#=> returns the structure in pairs [page, children] 
```

从这里你可以做任何你需要的事情。例如，要设置排序标准，只需添加一个 options 参数`tree`并将其用于 scope `children`。

请注意，要呈现树结构，您还需要一个递归助手来执行任务。实际上可能你不需要这个`tree`方法，只是一个调用的递归助手`children`，但想法是一样的。

正如 Mark 指出的那样，有一些 gem 可以实现 AR 树，例如[acts_as_tree](https://github.com/amerine/acts_as_tree)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T00:46:13.770

使用像[闭包树](https://github.com/mceachen/closure_tree)这样的宝石，您可以拥有相同的基本树行为，以及以下所有内容：

*   具有所有层次结构的嵌套哈希
*   一个节点的所有祖先的列表
*   一个节点的所有后代
*   一个节点的所有兄弟姐妹

和许多其他的，实现了只执行一个查询。

(See [http://matthew.mceachen.us/blog/tags/closure-tree](http://matthew.mceachen.us/blog/tags/closure-tree) for reasons behind such a tree.)

# uitableview - 在 NSFetchResultsController 中派生节号

> ID：12993290
> 
> 赞同：0
> 
> 时间：2012-10-20T22:35:41.173
> 
> 标签：uitableview, date, core-data, nsfetchedresultscontroller

我正在使用带有 NSFetchedResultsController 的 Core Data 来显示 UITableView 中按日期部分组织的事件列表。一个日期可以有多个事件（分段中的行），如下所示：

```
Date 1
  Event A
  Event B
  Event C
Date 2
  Event D
Date 3
  Event E
  Event F 
```

在特定日期可以有任意数量的事件。我希望能够滚动到包含今天日期的部分，或者 - 如果今天没有事件 - 到最近的日期。

我创建了一个 NSIndexSet 来查找包含晚于今天的日期的对象的第一个索引：

```
NSDate *dateToday = [NSDate date];
NSIndexSet *datesAfterToday = [[self.fetchedResultsController fetchedObjects] indexesOfObjectsPassingTest:
                               ^BOOL(id obj, NSUInteger idx, BOOL *stop) {
                                   Event *event = (Event *)obj;
                                   NSDate *dateToCheck = event.date;
                                   NSTimeInterval interval = [dateToday timeIntervalSinceDate:dateToCheck];
                                   if (interval <= 0) {
                                       *stop = YES;          // Only need first occurrence of date
                                       return YES;
                                   }
                                   return NO;
                               }];

NSInteger index = [datesAfterToday firstIndex]; 
```

这将为我提供今天之后的第一个事件的索引。例如，如果日期 2 是第一个晚于今天的日期，那么上面的代码片段将为我提供索引 3（对于事件 D）。但是，我希望能够滚动到第 1 节（日期 2），因此我需要节号；在这种情况下，第 1 节。

所以问题是：如果我有绝对索引号，我怎么能得到这个节号？还是有其他方法可以搜索 NSFetchedResultsController 以查找节号？

任何帮助表示赞赏。发送！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T01:24:12.740

`NSFetchedResultsController`有一个方法`indexPathForObject:`来获取一个对象的索引路径（节和行号）：

```
NSDate *dateToday = [NSDate date];
__block NSIndexPath *indexPath = nil;
NSArray *events = [self.fetchedResultsController fetchedObjects];
[events enumerateObjectsUsingBlock:^(Event *event, NSUInteger idx, BOOL *stop) {
    NSDate *dateToCheck = event.date;
    NSTimeInterval interval = [dateToday timeIntervalSinceDate:dateToCheck];
    if (interval <= 0) {
        indexPath = [self.fetchedResultsController indexPathForObject:event];
        *stop = YES; // Only need first occurrence of date
    }
}];

if (indexPath != nil) {
    // indexPath is the table view index path of the event.
    // You can use indexPath.section, indexPath.row,
    // Or perhaps this:
    [self.tableView scrollToRowAtIndexPath:indexPath ...]
} else {
    // All events are before the current date ...
} 
```

*注意：*您的算法会找到 之后的第一个事件`[NSDate date]`，即当前*日期和时间*，而不是*今天*。例如，如果是晚上 8 点，算法会在“今天晚上 8 点”或之后找到第一个事件，这可能是明天的事件。

# php - 如何在行中制作链接

> ID：12993297
> 
> 赞同：0
> 
> 时间：2012-10-20T22:37:09.940
> 
> 标签：php, html, css

我`$number`从表中获取数据，然后打印它：

```
echo "<div class='pagination'><a href='page_pagination.php?number=". $number ."' >  ". $number ." </a></div>"; 
```

但。它不会在一行中打印，我已经使用 display inline 尝试过：

```
.pagination {
    display: inline;
} 
```

但它仍然不起作用。如何使它们排成一行？谢谢 :) var_dump($number) :

```
string(1) "2"
      2
string(1) "3"
      3
etc.. 
```

完整的：

```
<div id="page">
<?php
     $query2 = mysql_query(" .....");
     while ($row2 = mysql_fetch_array($query2)) {
         ....
         echo '<div id="content">';
         echo '<div class="post">';
         ...
         echo '<div class="entry">';
         ...
     }
     echo '</div>';
     echo '</div>';
     $query3 = mysql_query(" ..... ");
     while ($row3 = mysql_fetch_array($query3)) {
         ...
         echo "<span class='pagination'><a href='page_pagination.php?number=". $number ."' >  ". $number ."    </a></span>";
     }
     echo '</div>';
?>
</div> 
```

CSS：

```
#page {
   width: 980px;
   margin: 0 auto;
   padding: 0px 220px 0px 0px;
   border-top: 1px solid #b4c1a1;
   background: #ffffff ;
}

#content {
  width: 780px;
   margin-top: 30px;
   padding: 0px 0px 0px 40px;
   background: url(images/img04.gif) no-repeat bottom;
}

.post {
   margin-bottom: 15px;
}

.post .entry {
   padding: 0px 0px 20px 0px;
   padding-bottom: 20px;
   text-align: justify;
} 
```

呈现的 HTML：

```
<center><div id="pagination"><span><a href='page_pagination.php?number=2' >  2 </a></div>
<center><div id="pagination"><span><a href='page_pagination.php?number=3' >  3 </a></div>
<center><div id="pagination"><span><a href='page_pagination.php?number=4' >  4 </a></div>
<center><div id="pagination"><span><a href='page_pagination.php?number=5' >  5 </a></div>
<center><div id="pagination"><span><a href='page_pagination.php?number=6' >  6 </a></div>
<center><div id="pagination"><span><a href='page_pagination.php?number=7' >  7 </a></div>
<center><div id="pagination"><span><a href='page_pagination.php?number=8' >  8 </a></div>
<center><div id="pagination"><span><a href='page_pagination.php?number=9' >  9 </a></div>
<center><div id="pagination"><span><a href='page_pagination.php?number=Next' >  Next </a></div> 
```

这是显示渲染输出的链接= [http://textuploader.com/?p=6&id=fferP](http://textuploader.com/?p=6&id=fferP)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T22:40:34.140

如果你想要它内联，那么你为什么要把它包装在一个`div`？

只需使用`span`，`inline`默认情况下。

```
echo "<span class='pagination'><a href='page_pagination.php?number=". $number ."' >  ". $number ." </a></span>"; 
```

CSS：

```
.pagination {
    /* nothing to do here because <span> is already inline */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T05:02:11.917

删除`<center>`标签（这些标签不存在于您的 PHP 代码片段中，但存在于“渲染的 HTML”和“渲染的输出”中，因此您以某种方式生成它们）。

该`<center>`元素是块级元素，因此它会导致其内容出现在自己的一行上。

该`<center>`元素也已弃用，但这不是重点。关键是，如果每个数字都在`<center>`它自己的元素中，你就会得到描述的问题。

您可以修改代码，以便`<center>`在列表之前和`</center>`之后只有一个。但是最好删除所有`<center>`标签，然后考虑是否要使列表居中，这样会更好更简单；如果您这样做，请将列表包装在和之间`<div class=pages>`，`</div>`然后添加`.pages { text-align: center; }`到您的样式表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T23:19:56.803

第一个 while 循环打开与循环中的项目一样多的`<div>`标签`x3`，但它们在循环之后关闭一次......所以如果你的代码正确表示，你将拥有一个完全混乱的 HTML。

```
<div id="page">
<?php
     $query2 = mysql_query(" .....");
     while ($row2 = mysql_fetch_array($query2)) {
         ....
         echo '<div id="content">';
         echo '<div class="post">';
         echo '<div class="entry">';

         ...

         echo '</div>';
         echo '</div>';
         echo '</div>';

     }
     $query3 = mysql_query(" ..... ");
     echo "<div>"; 
     while ($row3 = mysql_fetch_array($query3)) {
         ...
         echo "<a href='page_pagination.php?number=". $number ."' >  ". $number ."    </a>";
     }
     echo "</div>"; 
?>
</div> 
```

# c - g-wan 不更新 servlet 的依赖项

> ID：12993298
> 
> 赞同：2
> 
> 时间：2012-10-20T22:37:12.413
> 
> 标签：c, compiler-construction, configure, g-wan

当我修改 g-wan 包含的 hello.c 以包含一个带有 #define TEST_VALUE 50 的简单标头并将其输出到 hello.c 文件中时，我注意到对标头文件的更改不会触发 g-wan 更新小服务程序。因此，如果我将头文件测试值更改为 51，则输出中不会记录任何更改。如果我对 hello.c 文件进行任何更改，它会导致 g-wan 重新编译包含依赖项的 servlet，并编译标头中的更改。这是预期的行为吗？我很好奇，因为这意味着在具有许多依赖项的开发过程中，如果所做的所有更改都在依赖项文件中，您只需更新主 servlet 文件中的一个字符即可触发重新编译。

Tim Bolton 注意到了这种行为，因此我决定也对其进行测试，并将其作为与先前线程不同的问题提出。

感谢您的任何意见。

> G-WAN 3.3.28 64 位（2012 年 3 月 28 日 11:24:16） - 我在 2012 年 10 月 19 日的下载中看到的最新版本......在 Ubuntu Server 10.04.4 LTS 上运行 - 64 位

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:42:36.767

> 这是预期的行为吗？

是的。

> 这意味着在具有许多依赖项的开发过程中，如果所做的所有更改都在依赖项文件中，则您只需更新主 servlet 文件中的一个字符即可触发重新编译。

不。在过去的 30 年里，程序员（至少）使用了一种更好的方法。

Unix 命令正在更新文件的`touch`时间戳而不更改其内容。

只是当您更改其标头时`touch`的`hello.c`servlet。

另请注意，C 头文件应该比 C 文件更“稳定”。头文件中存储的内容可供许多 C 文件*共享*，因此您应该考虑经常使用 C 文件进行`defines`更改。

至少你现在知道如何处理这两种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:21:21.577

我也遇到了这个问题，所以我创建了一个 servlet 来帮助我解决它。使用它我不需要更新我的 CSP 文件夹中的每个文件。我在我的博客上发布了代码。

[更新 servlet_dependencies](http://www.mnd22.com/blog/update_servlet_dependencies)

该脚本只是对 CSP 文件夹下的所有文件运行 touch 命令。

# php - URL 模式匹配 (PHP)？

> ID：12993300
> 
> 赞同：2
> 
> 时间：2012-10-20T22:37:13.480
> 
> 标签：php, regex, url

（编程语言：PHP v5.3）

我正在这个网站上工作，我使用 google 和 bing 搜索 API 在特定网站上进行搜索。

**该项目：**

用户可以从下拉列表中选择要搜索的网站。我们在这个网站上有一个管理面板。如果管理员想要将新网站添加到下拉列表中，他必须提供来自该网站的两个示例 URL，如下所示。

[![形成图像](../Images/fccd3844442368d2d6b91c904bb0778e.png)](https://i.stack.imgur.com/ESlO0.png)

在提交表单时，代码会通过输入并生成我们稍后用于模式匹配的正则表达式。正则表达式存储在数据库中供以后使用。

在另一种形式中，访问用户从下拉列表中选择一个网站。然后他在文本框中输入搜索“查询”。我们使用搜索 API（如上所述）以 JSON 格式获取结果，其中我们使用以下查询语法作为搜索字符串：

“site:website query”
（我们将“website”替换为用户选择搜索的网站，并将“query”替换为用户的搜索查询）。

**问题**

现在我们要做的是得到 url 的最佳匹配。进行模式匹配的原因是有时搜索结果中存在不需要的链接。例如，假设我在网站“www.example.com”上搜索文章名称“abcd”。搜索引擎可能会返回这两个网址：

1) www.example.com/articles/854/abcd
2) www.example.com/search/abcd

第一个网址是我想要的。现在我有两个问题要解决。

1) 我知道，考虑到管理员会定期添加网站，我编写的从示例 URL 中创建正则表达式模式的代码永远不会是完美的。永远不可能有足够的条件来检查从相同代码为不同网站创建模式。有没有更好的方法来做到这一点或正则表达式是我唯一的选择？

2) 我正在运行 Windows 7 操作系统的机器上进行开发。preg_match_all() 在这里返回结果。但是当我将代码移动到运行 Linux 操作系统的服务器时，preg_match_all() 不会为相同的参数返回任何结果？我似乎不明白为什么会这样。任何人都知道为什么会这样？

过去几周我一直在研究网络技术，所以我不知道我是否有比正则表达式更好的选择。如果您能帮助我或指导我找到可以解决我的问题的资源，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T22:49:33.483

关于问题1：我不太了解您要完成的工作，因此我无法给出任何有效的意见。

关于问题 2：如果两台服务器都运行相同版本的 PHP，则使用的正则表达式库应该相同。但是，您可以通过制作一个模拟静态文件或字符串来测试这个正则表达式并查看结果是否相同。

由于您从搜索引擎获取结果然后对其进行解析，因此数据检索可能不一样。Google/Bing 会更改与您使用的操作系统相关的部分数据，这可能会改变 preg 结果。

# autohotkey - Visual Studio 2010 的 AutoHotKey

> ID：12993304
> 
> 赞同：1
> 
> 时间：2012-10-20T22:38:16.287
> 
> 标签：autohotkey

我有 4 个 AutoHotKey 程序，现在有没有办法将自动热键代码转换为 Visual Studio 代码？我需要这个，因为我正在制作一个 Visual Studio 程序，并且需要一个可以做某事的代码，所以我可以用 autohotkey 来做，但不能用 Visual Studio。也许有一个网站可以转换它或什么的？

其中一个代码是：

```
 #SingleInstance force
#Persistent

OnExit, ExitRoutine
xpos := A_ScreenWidth/2
ypos := A_ScreenHeight/2
hDrwArea := DllCall("GetDC", "uint", Null)
SetTimer, SetPixel, 1

SetPixel:

DllCall("SetPixel", "uint", hDrwArea, "int", xpos, "int", ypos, "uint", 255, "uint", 0, "uint", 0)

DllCall("SetPixel", "uint", hDrwArea, "int", xpos, "int", ypos - 2, "uint", 255, "uint", 0, "uint", 0)
DllCall("SetPixel", "uint", hDrwArea, "int", xpos, "int", ypos + 2, "uint", 255, "uint", 0, "uint", 0)

DllCall("SetPixel", "uint", hDrwArea, "int", xpos - 2, "int", ypos, "uint", 255, "uint", 0, "uint", 0)
DllCall("SetPixel", "uint", hDrwArea, "int", xpos + 2, "int", ypos, "uint", 255, "uint", 0, "uint", 0)

; ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
DllCall("SetPixel", "uint", hDrwArea, "int", xpos - 6, "int", ypos - 6, "uint", 255, "uint", 0, "uint", 0)
DllCall("SetPixel", "uint", hDrwArea, "int", xpos - 6, "int", ypos - 6, "uint", 255, "uint", 0, "uint", 0)

DllCall("SetPixel", "uint", hDrwArea, "int", xpos + 6, "int", ypos + 6, "uint", 255, "uint", 0, "uint", 0)
DllCall("SetPixel", "uint", hDrwArea, "int", xpos + 6, "int", ypos + 6, "uint", 255, "uint", 0, "uint", 0)

DllCall("SetPixel", "uint", hDrwArea, "int", xpos - 6, "int", ypos + 6, "uint", 255, "uint", 0, "uint", 0)
DllCall("SetPixel", "uint", hDrwArea, "int", xpos + 6, "int", ypos - 6, "uint", 255, "uint", 0, "uint", 0)
; ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
DllCall("SetPixel", "uint", hDrwArea, "int", xpos - 9, "int", ypos - 9, "uint", 255, "uint", 0, "uint", 0)
DllCall("SetPixel", "uint", hDrwArea, "int", xpos - 9, "int", ypos - 9, "uint", 255, "uint", 0, "uint", 0)

DllCall("SetPixel", "uint", hDrwArea, "int", xpos + 9, "int", ypos + 9, "uint", 255, "uint", 0, "uint", 0)
DllCall("SetPixel", "uint", hDrwArea, "int", xpos + 9, "int", ypos + 9, "uint", 255, "uint", 0, "uint", 0)

DllCall("SetPixel", "uint", hDrwArea, "int", xpos - 9, "int", ypos + 9, "uint", 255, "uint", 0, "uint", 0)
DllCall("SetPixel", "uint", hDrwArea, "int", xpos + 9, "int", ypos - 9, "uint", 255, "uint", 0, "uint", 0)

DllCall("SetPixel", "uint", hDrwArea, "int", xpos, "int", ypos, "uint", 255, "uint", 0, "uint", 0)

DllCall("SetPixel", "uint", hDrwArea, "int", xpos, "int", ypos - 2, "uint", 255, "uint", 0, "uint", 0)
DllCall("SetPixel", "uint", hDrwArea, "int", xpos, "int", ypos + 2, "uint", 255, "uint", 0, "uint", 0)

DllCall("SetPixel", "uint", hDrwArea, "int", xpos - 2, "int", ypos, "uint", 255, "uint", 0, "uint", 0)
DllCall("SetPixel", "uint", hDrwArea, "int", xpos + 2, "int", ypos, "uint", 255, "uint", 0, "uint", 0)

; ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
DllCall("SetPixel", "uint", hDrwArea, "int", xpos - 6, "int", ypos - 6, "uint", 255, "uint", 0, "uint", 0)
DllCall("SetPixel", "uint", hDrwArea, "int", xpos - 6, "int", ypos - 6, "uint", 255, "uint", 0, "uint", 0)

DllCall("SetPixel", "uint", hDrwArea, "int", xpos + 6, "int", ypos + 6, "uint", 255, "uint", 0, "uint", 0)
DllCall("SetPixel", "uint", hDrwArea, "int", xpos + 6, "int", ypos + 6, "uint", 255, "uint", 0, "uint", 0)

DllCall("SetPixel", "uint", hDrwArea, "int", xpos - 6, "int", ypos + 6, "uint", 255, "uint", 0, "uint", 0)
DllCall("SetPixel", "uint", hDrwArea, "int", xpos + 6, "int", ypos - 6, "uint", 255, "uint", 0, "uint", 0)
; ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
DllCall("SetPixel", "uint", hDrwArea, "int", xpos - 9, "int", ypos - 9, "uint", 255, "uint", 0, "uint", 0)
DllCall("SetPixel", "uint", hDrwArea, "int", xpos - 9, "int", ypos - 9, "uint", 255, "uint", 0, "uint", 0)

DllCall("SetPixel", "uint", hDrwArea, "int", xpos + 9, "int", ypos + 9, "uint", 255, "uint", 0, "uint", 0)
DllCall("SetPixel", "uint", hDrwArea, "int", xpos + 9, "int", ypos + 9, "uint", 255, "uint", 0, "uint", 0)

DllCall("SetPixel", "uint", hDrwArea, "int", xpos - 9, "int", ypos + 9, "uint", 255, "uint", 0, "uint", 0)
DllCall("SetPixel", "uint", hDrwArea, "int", xpos + 9, "int", ypos - 9, "uint", 255, "uint", 0, "uint", 0)

DllCall("SetPixel", "uint", hDrwArea, "int", xpos, "int", ypos, "uint", 255, "uint", 0, "uint", 0)

DllCall("SetPixel", "uint", hDrwArea, "int", xpos, "int", ypos - 2, "uint", 255, "uint", 0, "uint", 0)
DllCall("SetPixel", "uint", hDrwArea, "int", xpos, "int", ypos + 2, "uint", 255, "uint", 0, "uint", 0)

DllCall("SetPixel", "uint", hDrwArea, "int", xpos - 2, "int", ypos, "uint", 255, "uint", 0, "uint", 0)
DllCall("SetPixel", "uint", hDrwArea, "int", xpos + 2, "int", ypos, "uint", 255, "uint", 0, "uint", 0)

; ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
DllCall("SetPixel", "uint", hDrwArea, "int", xpos - 6, "int", ypos - 6, "uint", 255, "uint", 0, "uint", 0)
DllCall("SetPixel", "uint", hDrwArea, "int", xpos - 6, "int", ypos - 6, "uint", 255, "uint", 0, "uint", 0)

DllCall("SetPixel", "uint", hDrwArea, "int", xpos + 6, "int", ypos + 6, "uint", 255, "uint", 0, "uint", 0)
DllCall("SetPixel", "uint", hDrwArea, "int", xpos + 6, "int", ypos + 6, "uint", 255, "uint", 0, "uint", 0)

DllCall("SetPixel", "uint", hDrwArea, "int", xpos - 6, "int", ypos + 6, "uint", 255, "uint", 0, "uint", 0)
DllCall("SetPixel", "uint", hDrwArea, "int", xpos + 6, "int", ypos - 6, "uint", 255, "uint", 0, "uint", 0)
; ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
DllCall("SetPixel", "uint", hDrwArea, "int", xpos - 9, "int", ypos - 9, "uint", 255, "uint", 0, "uint", 0)
DllCall("SetPixel", "uint", hDrwArea, "int", xpos - 9, "int", ypos - 9, "uint", 255, "uint", 0, "uint", 0)

DllCall("SetPixel", "uint", hDrwArea, "int", xpos + 9, "int", ypos + 9, "uint", 255, "uint", 0, "uint", 0)
DllCall("SetPixel", "uint", hDrwArea, "int", xpos + 9, "int", ypos + 9, "uint", 255, "uint", 0, "uint", 0)

DllCall("SetPixel", "uint", hDrwArea, "int", xpos - 9, "int", ypos + 9, "uint", 255, "uint", 0, "uint", 0)
DllCall("SetPixel", "uint", hDrwArea, "int", xpos + 9, "int", ypos - 9, "uint", 255, "uint", 0, "uint", 0)

Return

ExitRoutine:

ExitApp 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T02:19:03.640

与其将 Autohotkey 代码转换为 C# 或 VB.NET，不如尝试使您的 AHK 脚本可从另一个程序调用。将 AHK 脚本编译为 exe 可能是一个很好的解决方案。来回传递数据可能很棘手，但它可能比转换代码更容易。

# python - 字典中元组平均值的函数

> ID：12993305
> 
> 赞同：0
> 
> 时间：2012-10-20T22:38:35.553
> 
> 标签：python, string, dictionary, tuples, average

我有一个字符串，字典形式为：

```
('the head', {'exploded': (3.5, 1.0), 'the': (5.0, 1.0), 
"puppy's": (9.0, 1.0), 'head': (6.0, 1.0)}) 
```

每个括号是对应于（分数，标准差）的元组。我只取每个元组中第一个整数的平均值。我试过这个：

```
def score(string, d):
    for word in d:
        (score, std) = d[word]
        d[word]=float(score),float(std)
        if word in string:
            word = string.lower()
            number = len(string)
            return sum([v[0] for v in d.values()]) / float(len(d))
        if len(string) == 0:
            return 0 
```

当我运行时：

```
print score('the head', {'exploded': (3.5, 1.0), 'the': (5.0, 1.0), 
"puppy's": (9.0, 1.0), 'head': (6.0, 1.0)}) 
```

我应该得到`5.5`，但我得到了`5.875`。无法弄清楚我的函数中有什么不允许我得到正确的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T22:58:06.457

```
def score(s, d):
    included = [d[word][0] for word in d if word in s]
    return sum(included) / float(len(included)) 
```

# linux - printk 不到一纳秒？- getnstimeofday() 问题

> ID：12993309
> 
> 赞同：2
> 
> 时间：2012-10-20T22:39:42.187
> 
> 标签：linux, linux-kernel, nstimer

我正在做模块编程。我有时间测量我正在做的一些 printk 对性能的影响。我有这样的代码设置。

在代码的“declare-y”开始部分：

```
struct timespec ts_start,ts_end,test_of_time; 
```

在一个方法中：

```
{
    //..other stuff
    getnstimeofday(&ts_start);
    printk("mkdir being hijacked\n");
    printk("pid is %d ", current->pid);
    printk("call #: 39 \n");
    printk("user_id of process: %d, effuid: %d\n\n", current->uid, current->euid);
    getnstimeofday(&ts_end);
    test_of_time = timespec_sub(ts_end,ts_start);
    printk("%lu", test_of_time.tv_nsec);
    return val;
} 
```

我 dmesg 奇怪地看到值 0。我非常怀疑发生这种情况需要 0 纳秒。这里有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T23:42:19.877

你用的是什么版本的内核？您的计时器实际上可能没有纳秒级分辨率。如果您想测量 printks 花费的时间，您应该循环运行它们，以便它们花费有限且可测量的时间。它不会完全准确（例如，由于缓存未命中等原因，第一个 prink 虽然可能比随后的 prink 慢），但这应该会给您一个大致的想法。

如果您想了解为什么会发生这种情况，请尝试分配一个大缓冲区，在循环中旋转，将 getnstimeofday 的值写入缓冲区一段时间，然后将缓冲区输出到您可以分析的地方。您可能能够在数据中看到实际的时钟分辨率。

# javascript - 在 JavaScript 中返回一个私有变量

> ID：12993310
> 
> 赞同：1
> 
> 时间：2012-10-20T22:39:43.913
> 
> 标签：javascript, scope

我不知道为什么`console.log(Set.current_index)`显示`0`而不是`3`.

```
var Set = (function() {
    var set = [];
    var index = 0;

    function contains(set, e) {
        for (var i = 0; i < set.length; i++) {
            if (set[i] === e) {
                return true;
            }
        }
        return false;
    }

    var add = function(e) {
        if (!contains(set, e)) {
            set[index++] = e;
        }
    }

    var show = function() {
        for (var i = 0; i < set.length; i++) {
            console.log(set[i]);
        }
    }

    return {
        add: add,
        show: show,
        current_index: index
    };
})();​

Set.add(20);
Set.add(30);
Set.add(40);
Set.show();
console.log(Set.current_index); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T22:42:37.270

正如所写的那样，它`current_index`只是获取*初始*值`index`- 它不会反映对该值的任何更改，因为该变量是*原始*类型。

如果您有一个“引用类型”（即对象或数组），则对其内容的更改在引用同一对象的任何其他变量中变得可见。原始类型不会发生这种情况，它们被“按值”复制到新变量中，并且对原始变量的更改不会影响副本。

您需要制作`current_index`一个返回当前值的*函数*`index`，或者将其编写为 a `getter`，通过不可见地调用函数返回当前值，您可以将`.index`其视为只读属性。

有关后一种方法的示例（需要 ES5 或 shims 来复制功能），请参阅[http://jsfiddle.net/alnitak/WAwUg/](http://jsfiddle.net/alnitak/WAwUg/)，它将您当前的`return`块替换为：

```
var interface = {
    add: add,
    show: show
};

Object.defineProperty(interface, 'index', {
    get: function() {
        return index;
    },
    enumerable: true
});

return interface; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T22:54:11.517

Javascript 总是按值传递，除非变量引用对象。因此，您对**current_index的初始化只是获取****index**的初始值，而不是永久指向变量，因此在初始化之后，这两个变量处于不同的方式，因此递增**index**不会递增**current_index**。

# android - 微调器转换器 android

> ID：12993311
> 
> 赞同：0
> 
> 时间：2012-10-20T22:39:55.647
> 
> 标签：android, xamarin.android, android-adapterview

我对android中的微调器类有些困惑。我想要的是制作一个转换器，用户选择他们想要转换的单位，然后在第二个微调器中选择输出单位。Ex Spinner 1: Yard² 到 Spinner 2: Feet²。我不知道如何设置它，所以如果选择了 yard² 和 feet² 则进行此计算。这是我到目前为止的代码：

```
 private void UnitBegin_ItemSelected (object sender, AdapterView.ItemSelectedEventArgs e)

        {
            Spinner UnitBegin = (Spinner)sender;
            string ubget = UnitBegin.SelectedItem.ToString();
            if (ubget == "Yard²")
            {
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:04:50.613

您可以通过声明私有 globar Spinner 来实现这一点，如下所示：

```
private Spinner spinner1;
private Spinner spinner2;

    // your code
    // now just use the globally declared spinners (spinner1 and spinner2) in your code
    private void UnitBegin_ItemSelected(object sender, AdapterView.ItemSelectedEventArgs e)
    {
        string selected1 = spinner1.SelectedItem.ToString();
        string selected2 = spinner2.SelectedItem.ToString();

        if(selected1.Equals("Yard²"))
        {
            if (selected2.Equals("m²"))
            {
                //do calculation
            }
            else if (selected2.Equals("unit²"))
            {
                //do calculation
            }
            else if (selected2.Equals("otherunit²"))
            {
                //do calculation
            }
            else
            {
                //ERROR
            }
        }

        if (selected1.Equals("m²"))
        {
            if (selected2.Equals("Yard²"))
            {
                //do calculation
            }
            else if (selected2.Equals("unit²"))
            {
                //do calculation
            }
            else if (selected2.Equals("otherunit²"))
            {
                //do calculation
            }
            else
            {
                //ERROR
            }
        }
        //repeat for all the possible units

    } 
```

但我建议你做这样的事情：

```
private Spinner spinner1;
private Spinner spinner2;
private float unit1;
private float unit2;

    // your code
    // now just use the globally declared spinners (spinner1 and spinner2) in your code
    private void UnitBegin_ItemSelected(object sender, AdapterView.ItemSelectedEventArgs e)
    {
        string selected1 = spinner1.SelectedItem.ToString();

        if(selected1.Equals("Yard²"))
        {
            unit1 = 0.5 //let's say this is the multiplier from Yard² to m² :)
        }
        //repeat for all the possible units
    }

    private void UnitEnd_ItemSelected(object sender, AdapterView.ItemSelectedEventArgs e)
    {
        string selected2 = spinner2.SelectedItem.ToString();

        if(selected2.Equals("UNIT²"))
        {
            unit2 = 0.7 //let's say this is the multiplier from UNIT² to m² :)
        }
        //repeat for all the possible units
    } 
```

并在计算结果显示的方法中：

```
float result = value*unit1; //and you get the value in the "default" unit
float finalResult = result*unit2; //and you get the value converted to the final unit

return finalResult; //return the final converted value 
```

# c++ - 在二维向量中找到一个元素，然后将其删除

> ID：12993312
> 
> 赞同：0
> 
> 时间：2012-10-20T22:40:00.000
> 
> 标签：c++

假设我的数据为 4 x 3 `vector<vector<int> >`：

```
1   2   3
4   5   6
7   8   9
10  11  12 
```

我想删除包含该元素的每一行`8`，结果如下：

```
1   2   3
4   5   6
10  11  12 
```

我一直在尝试做：

```
for (vector<vector<int> >::iterator it = v.begin(); it != v.end(); it++) {
    if (find(it->begin(), it->end(), 8)) {
        // I will remove the row in here
    }
} 
```

这给了我：

```
error: no matching function for call to 'find(std::vector<int>::iterator, std::vector<int>::iterator, int)' 
```

我没有太多经验，`stl`所以我想知道：

*   我的`find`电话有什么问题？
*   在迭代向量时从向量中删除元素是否安全？

Ofc 对我的问题的任何优雅解决方案也受到欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T22:44:43.657

> 我的 find 电话有什么问题？

你可能忘了`#include <algorithm>`

> 在迭代向量时从向量中删除元素是否安全？

查看擦除删除习语 - 擦除矢量元素可能很棘手。

# javascript - ThreeJS：如何增加和减少段？

> ID：12993314
> 
> 赞同：0
> 
> 时间：2012-10-20T22:40:04.837
> 
> 标签：javascript, 3d, three.js

在 Cube Geometry 中如何增加和减少段？确切地说，我会更改`segmentsWidth`和参数。`segmentsHeight`有谁知道三个库是否可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T23:33:56.153

创建几何图形后，您无法更改`BoxGeometry`（以前称为`CubeGeometry`）中的段数，当然，除非您编写自己的代码来执行此操作。

编辑：在相关说明中，这是使用 Catmull-Clark 细分算法平滑几何的示例：[https](https://threejs.org/examples/webgl_modifier_subdivision.html) ://threejs.org/examples/webgl_modifier_subdivision.html 。

# c - 验证可变长度参数

> ID：12993315
> 
> 赞同：0
> 
> 时间：2012-10-20T22:40:20.433
> 
> 标签：c, variadic-functions

是否可以验证提供给可变长度参数的参数的类型和数量？`(...)`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T22:47:11.223

在运行时？类型，没有。数字，仅当调用者在末尾放置一个 NULL（或可识别的东西）时，这是不可靠的。

在编译时，您可以让编译器检查参数，其方式与检查 args 到 printf 的方式相同。Google for gcc __attribute__ 格式

# javascript - 绘制到透明画布并检查点是否透明比检查点是否在复杂多边形中慢多少？

> ID：12993316
> 
> 赞同：1
> 
> 时间：2012-10-20T22:40:24.070
> 
> 标签：javascript, html, canvas

老实说，这更像是一个笼统的问题，只是想知道是否有人对此主题进行过任何形式的研究。

基本上，我正在为我为个人使用而创建的小型游戏引擎添加事件支持。我希望像素完美悬停在 2d 对象事件支持上，我只是在想最好的方法。实际上，对我个人而言，将对象绘制到透明画布上并检查鼠标 xy 是否在透明像素上会更快，因为我不必创建一组定义对象外部的点。这也可以让我在我的对象上有洞，它仍然可以正确地知道我是否悬停在上面。

我想知道的是使用此处显示的方法：[如何确定 2D 点是否在多边形内？](https://stackoverflow.com/questions/217578/point-in-polygon-aka-hit-test)

我的方法比那里显示的方法慢多少？

我目前仍在学习，所以我要实现所有这些并自己测试它并不容易，因为我可能需要很长时间才能正确工作并测试速度。

旁注：我仍然有一个基本的边界框来避免每次重绘和测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:09:20.093

检查一个点是否在多边形中将在 99.999999% 的时间内大大加快速度。

为了更慢，多边形需要非常复杂。

要执行您需要使用的其他方法`getImageData`，并且在画布上获取图像数据非常慢。

多边形算法中的点**确实可以**正确解释孔洞。确保您有一个遵守[非零缠绕数规则](http://en.wikipedia.org/wiki/Nonzero-rule)，因为这是画布使用的（与奇偶规则相反），并且您可能希望与画布中构建的路径兼容（现在或以后）。

# iphone - 在情节提要中制作的 UIScrollView 的帧值为零

> ID：12993320
> 
> 赞同：3
> 
> 时间：2012-10-20T22:40:58.210
> 
> 标签：iphone, objective-c, ios, uiscrollview, storyboard

我在我的故事板中制作了一个滚动视图，其中包含几个`UIImageView`。

问题是，该滚动视图的框架等于`{0, 0, 0, 0}`，我不知道为什么。滚动视图在我的屏幕上可见，但我无法滚动它。

我已经尝试设置内容大小和框架，但没有成功。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T00:51:22.910

修好了！

事实上，我在 iOS 6.0 上开发应用程序，我不得不取消选中情节提要属性上的“使用自动布局”复选框......

无论如何感谢所有人！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T02:33:50.123

我也遇到了这个问题，但我需要使用自动布局。

我试图将 UIImageView 设置为子视图，然后进行一些计算以计算出最小、最大缩放比例并设置 zoomScale。

问题是我试图将 zoomScale 设置为零，因为滚动视图框架为零，这给了我这个错误：

```
<Error>: CGAffineTransformInvert: singular matrix. 
```

所以我在 viewDidLoad / viewWillAppear 中设置了图像和 imageView（并隐藏了 imageView），然后在 viewDidAppear 中设置了 zoomScale（然后取消隐藏 imageView）。

这似乎运作良好，虽然我不能确定为什么。我猜它让滚动视图有机会正确设置其边界。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-20T16:30:44.133

正如其他一些答案所表明的那样，这里的问题是 AutoLayout。具体来说，问题是直到 viewWillAppear 之后才会发生自动布局，如果您将代码放在 viewDidAppear 中，当您在用户观看时更改屏幕上的内容时，您将获得时髦的显示工件......

如果您需要启用 AutoLayout，则放置框架相关代码的最佳位置是：

```
- (void)viewDidLayoutSubviews 
```

请记住，虽然它会一次又一次地调用，所以如果您只希望一些初始化代码运行一次，当视图显示时，您可以创建一个 BOOL 属性来存储初始布局是否已经完成。

```
@property (assign, nonatomic) BOOL initialLayoutComplete; 
```

然后你可以这样写你的 viewDidLayoutSubviews ：

```
- (void)viewDidLayoutSubviews {
    [super viewDidLayoutSubviews];

    if (!self.initialLayoutComplete) {
        // frame dependent code here...
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-25T03:28:24.970

正如我在[这个答案](https://stackoverflow.com/a/12811188/361247)`viewWillAppear`中提到的：在您使用该方法之前，滚动视图的框架不会被初始化。

这似乎是 iOS 6 中的一种新行为，不确定是错误还是有意更改。

您应该能够使用自动布局而不必担心这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T23:06:46.320

你连接 IBOutlet 了吗？

您是否使用以下代码初始化了滚动视图：

```
self.scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 280, 360)];
self.scrollView.contentSize = CGSizeMake(500, 360);
//values are of course only example values 
```

如何将 UIImageView 添加到 scrollView？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T16:14:25.157

我认为下面对 Enrico 的评论进行了澄清。帧大小将在 viewDidAppear 处具有正确的值（并且在 viewWillAppear 中将设置该值，但在该方法中它们仍然为零）

# c++ - 在 c++ 中构建和运行 c++ -- c++ 脚本（而不是 lua）

> ID：12993322
> 
> 赞同：0
> 
> 时间：2012-10-20T22:41:22.690
> 
> 标签：c++, embedded-script

目前，我将 lua 嵌入到我的 c++ 代码中。

我想知道 C++ 是否也可以做到这一点。这样我就可以在脚本中传递对象和使用库。为此，我想我需要主 C++ 代码中的以下内容：

1.  执行脚本的运行
2.  编译脚本
3.  运行脚本
4.  脚本将指针传递给它的数据对象
5.  脚本完成，程序使用数据对象。

这可能吗？小例子？

对我来说，它很有用，因为我运行了我不想停止但我想动态添加功能的科学计算。我还看到这对于不想关闭但想要进行更改的 c++ 中的服务器很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T23:19:44.513

您可以选择使用某种 C++ 解释器，但它们不能做所有的事情。C++ 是最难实现（如果不是最难的话）的语言之一。想想宏、模板和其他所有使 C++ 像我们所知的那样强大的东西，它们真的很难解析和理解，除此之外，我们还有优化，可以为我们创建如此快速和精简的代码，所以解释器如何如此强大并了解这一切？即使是最知名的编译器也可能无法理解所有标准，或者至少在理解复杂的 C++ 代码时会出错。在我的一个使用 MSVC 2010 大量使用模板的项目中，编译代码大约需要 10 分钟！所以解释器通常会简化他们的任务并且只支持完整 C++ 的一个子集，所以如果你对此很满意，可以使用一些解释器。`cint`很好。

另一个选择是你有一个免费的编译器`g++`，实际上将你的代码编译成某种共享库，然后动态加载它，并根据某种配置从中调用一些函数。

# python - Python：在不熟悉的 json 对象中查找键

> ID：12993328
> 
> 赞同：0
> 
> 时间：2012-10-20T22:42:03.213
> 
> 标签：python, json

G'day 所有，

在我最后一个问题之后，我一直在自学使用 json 模块并遇到了这个问题。

给定一个不熟悉的数组：

```
{"Age": 20, "Nickname": "Jim", "Name": "Fred", "Height": 180} 
```

如何在此对象中找到键？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T22:44:00.030

```
>>> d = {"Age": 20, "Nickname": "Jim", "Name": "Fred", "Height": 180}
>>> d.keys()
['Age', 'Nickname', 'Name', 'Height'] 
```

或者，更简单地说，如果您打算迭代：

```
>>> for k in d:
...     print k
... 
Age
Nickname
Name
Height 
```

# c++ - 从 Visual Studio 2010 迁移到 2012 时的 C++11 问题

> ID：12993335
> 
> 赞同：7
> 
> 时间：2012-10-20T22:42:50.090
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, unique-ptr

我正在尝试将我的项目从 Visual Studio 2010 移植到 Visual Studio 2012。在我的代码中，我有一些如下所示的文件处理：

```
auto fileDeleter = [](FILE* f) { fclose(f); };

unique_ptr<FILE, decltype(fileDeleter)> fMinute(
    fopen(minuteLogName.c_str(), "w"), fileDeleter);

unique_ptr<FILE, decltype(fileDeleter)> fIndividual(
    fopen(individualLogName.c_str(), "w"), fileDeleter);

if (!fMinute || !fIndividual) {
    throw Exceptions::IOException("One of the log files failed to open",
                                  __FUNCTION__);
} 
```

这在 2010 年没有任何问题，但在 2012 年，它在以下条件下失败：

> 错误 C2678：二进制“！” : 未找到采用左手操作数类型 > 'std::unique_ptr<_Ty,_Dx>' 的运算符（或没有可接受的转换）
> ...
> 可能是 'built-in C++ operator!(bool)'

C++11 标准规定[unique_ptr 有一个 bool 运算符](http://en.cppreference.com/w/cpp/memory/unique_ptr/operator_bool)，允许您像上面那样进行快速检查。更奇怪的是，VS2012 的 unique_ptr 定义有这个运算符：

```
_OPERATOR_BOOL() const _NOEXCEPT
{   // test for non-null pointer
    return (this->_Myptr != pointer() ? _CONVERTIBLE_TO_TRUE : 0);
} 
```

但是我在编译时得到了那个错误。为什么？

是的，我可以只是使用`ofstream`，但那不是重点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T23:41:37.517

为了建立 BigBoss 所说的，C++11 需要`std::unique_ptr`use `explicit operator bool() noexcept`，它解决了整个隐式转换为 bool 的问题。除了... VC2012 还不*支持* `explicit`运算符。因此，他们必须使用[安全布尔成语](http://www.artima.com/cppsource/safebool.html)。

虽然 safe-bool 习惯用法很好，但它可能存在缺陷（这就是`explicit operator bool()`存在的原因），具体取决于您如何实现该习惯用法。您显然在 VC2012 中遇到了其中之一。使用 重新配置您的测试`!(fMinute && fIndividual)`应该可以解决它。

但无论哪种方式，它都是一个 Visual Studio 错误。由于行为发生了变化，即使您设法找到解决方法，您也应该提交错误报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T23:29:14.747

您可以使用`if (!(fMinute && fIndividual) )`而不是`if (!fMinute || !fIndividual)`. C++ 说它们可以转换为 bool，但`operator bool`通常会产生问题，例如你可能有一个接受的函数`int`，如果你的类有一个`operator bool`然后它可以转换为 int，你可以将它传递给这个函数，但例如在我们的例子中`unique_ptr`从未打算用作`int`，因此许多开发人员从不`operator bool`直接使用，而是编写了一个可以在条件表达式中用作 bool 的运算符，但它实际上不是 bool！

```
struct bool_convertible {
    typedef void (*convertible_to_bool)();
    static void convertible_to_true();
    operator convertible_to_bool () const {
        return test() ? &convertible_to_true : nullptr;
    }
}; 
```

使用这种技术我可能有`bool_convertible c; if( c ) {...}`但我不能

```
void test_int( int );
bool_convertible c;
test_int( c ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T23:50:18.990

在最近的 C++11 标准中，std::unique_ptr 没有`operator!`定义，只有显式转换运算符

```
explicit operator bool() const; 
```

但是，内置的一元逻辑否定运算符 ，`!`根据 5.3.1/9 上下文将其参数转换为 bool：

> 逻辑否定运算符的操作数根据`!`上下文转换为`bool`（第 4 条）；如果转换的操作数为假，则其值为真，否则为假

到 bool 的上下文转换将使用显式转换运算符（如果可用）。因此，您的代码实际上应该在 C++11 规则下工作。您可能应该向 Microsoft 提交错误报告。它们是否支持显式转换运算符无关紧要。

作为一种解决方法，试试这个：

```
if (!fMinute.get() || !fIndividual.get()) {
    .... 
```

# php - (PHP) 登录不起作用

> ID：12993336
> 
> 赞同：0
> 
> 时间：2012-10-20T22:43:02.313
> 
> 标签：php, login

今天我做了一个应该登录的代码，但遗憾的是它不会。

这是我尝试过的：

```
include('php/mysqlcon.php');
if($_SERVER['REQUEST_METHOD'] == 'POST') {
    $username = $_POST['username'];
    $password = sha1($_POST['password']);
    $query = mysql_query("SELECT * FROM user WHERE username=$username AND password=$password");
    $query_rows = mysql_num_rows($query);
    if($query_rows > 0) {
        session_start();
        $_SESSION['username'] = $username;
        header('Location: index.php');
    } else {
        echo('bad login');
    }
} 
```

mysql 的详细信息在 mysqlcon.php 中，我确定它们是正确的

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T22:45:23.983

您需要在查询中为您的用户名和密码加上引号。此外，请确保您过滤输入，因为您的代码容易受到 mysql 注入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T22:45:22.257

创建 mysql 查询时，您需要将`$username`and`$password`括在引号中，目前在大多数情况下，您最终会遇到错误的查询。

你也应该在谷歌上搜索“如何防止 sql-injection php”，目前你很容易受到这种类型的攻击（这可能会导致严重的麻烦）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T22:46:46.907

使用准备好的语句并将凭据放入 SQL 查询的参数中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T22:47:08.290

`"SELECT * FROM user WHERE username='$username' AND password='$password'"`

# ios - 在日期选择器 IOS 中设置特定日期

> ID：12993339
> 
> 赞同：0
> 
> 时间：2012-10-20T22:43:27.570
> 
> 标签：ios, date

我的故事板上有一个日期选择器，但我不希望它默认为今天的日期。我希望日期从 1998 年 7 月 15 日开始。在属性检查器中，我将日期设置为该日期，它显示在我的故事板上，但是当我启动应用程序时，它仍然是今天的日期。我还需要做些什么才能让它工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T23:43:03.777

```
[yourDatePicker setDate:[NSDate dateWithTimeIntervalSince1970:900478800]]; 
```

或者如果你想变得花哨：

```
[yourDatePicker setDate:[NSDate dateWithTimeIntervalSince1970:900478800] animated:YES]; 
```

你可以把它放在你的viewDidLoad中：

# iphone - UITableViewCell 和检查点击的问题

> ID：12993341
> 
> 赞同：0
> 
> 时间：2012-10-20T22:43:57.353
> 
> 标签：iphone, ios, uitableview

所以我使用 uitableview 来显示多个图像和标签。我希望能够检查单击的单元格标签的文本，以便确定单击了哪个单元格。

我这样做的原因是因为我想对一个被单击的单元格执行不同的操作，而对另一个单元格执行不同的操作。

这就是我使用名为 CustomCell 的类的单元格定义（从原型单元格）填充单元格的方式

```
//tableview datasource delegate methods
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
return 1;
}
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
return cellIconNames.count;
}
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath     *)indexPath{

static NSString *CellIdentifier = @"Cell";

cellIconName = [cellIconNames objectAtIndex:indexPath.row];

NSString *cellIconImageName = [[self cellIconImages] objectAtIndex:[indexPath row]];

CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

if(cell == nil){
    cell = [[CustomCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}
cell.rightLabel.text = [cellIconNames objectAtIndex:indexPath.row];
cell.carrierImage.image = [UIImage imageNamed:cellIconImageName];
cell.urlString = [cellIconNames objectAtIndex:indexPath.row];

return cell;
} 
```

我检查哪个被点击的方法是这样做：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath;{

CustomCell *cell = (CustomCell*)[tableView cellForRowAtIndexPath:indexPath];
//[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"www.google.com"]];

if ([cell.urlString isEqualToString:@"Aetna"]) {
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"www.aetna.com"]];
}else if([cell.urlString isEqualToString:nil]){
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"www.google.com"]];
}
NSLog(@"cell was clicked %@", cell);
} 
```

当我单击一个单元格时，没有任何反应。现在我已经制作了 NSLOG，以便我可以确保正确读取单元格。

我还注释掉了我的测试代码行，我将 if else 语句注释掉了，只运行了注释的代码行，没有任何反应。

请帮助我，我不知道出了什么问题：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T22:52:24.250

Try putting the URL method into the string (e.g. http://).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T22:51:11.930

Just double-checking that you've both added your UITableViewController as a UITableViewDelegate and have either programatically or in Interface Builder have wired the delegate back to your controller?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T22:51:26.437

In your `didSelectRowAtIndexPath` method you shouldn't be looking at the cell at all. You should look at the data in your data model. Just like you did in `cellForRowAtIndexPath`, get the data for the **indexPath**. Then do the appropriate check against the data.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T05:29:41.607

我不知道为什么你不能轻易理解它，只需在 didSelectRowAtIndexPath 中使用 indexpath.row ，你就会得到所需的单元格。

# iphone - 如何在 z 轴上创建和旋转 3 维对象？

> ID：12993344
> 
> 赞同：1
> 
> 时间：2012-10-20T22:44:29.700
> 
> 标签：iphone, ios, ipad, ios6

我是 OpenGL 的新手。我需要在这个 url 中创建模型或图像和旋转，如[https://www.foldable.me/foldables/new](https://www.foldable.me/foldables/new)。我应该使用什么来处理可绘制模型或图像以及如何使用它。 ..

# android - 从字符串 [] 转换为字符串 Android

> ID：12993345
> 
> 赞同：0
> 
> 时间：2012-10-20T22:44:32.253
> 
> 标签：android, listview

如何仅从 String[] 转换为 String？所以我可以分配`orderan`给`items`我，我可以把它放到我的列表视图中。

这是我的代码。

```
MyClass class= new MyClass();

String orderan =class.getName();
String[] items = orderan; **the problem here

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                    android.R.layout.simple_list_item_1, items);

        list.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T22:49:01.647

看来您只是想要这个：

```
String orderan = class.getName();
String[] items = {orderan}; 
```

甚至：

```
String[] items = {class.getName()}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T22:48:41.580

ArrayAdapter 需要一个数组，但您试图将字符串 orderan 分配到数组项中。相反，创建一个新数组，并将 orderran 添加到其中。就像是：

```
String[] items = new String[1];
items[0] = orderan; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T22:49:48.217

您必须创建一个数组并将字符串添加到其中。

```
String[] items = new String[1];
items[0] = orderan; 
```

你可以在一行中完成

```
String[] items = {orderan}; 
```

# mysql - 计算多个条目/统计信息

> ID：12993346
> 
> 赞同：3
> 
> 时间：2012-10-20T22:44:35.317
> 
> 标签：mysql

我想向网站添加调查。一个好的调查需要一份报告。一些基本的报告已经完成。现在我想在咖啡上加点奶油...

带有样本数据的表格：

```
mysql> select * from u001;
+----+----------+------------+-------+---------------------+
| id | drink    | sex        | age   | date                |
+----+----------+------------+-------+---------------------+
|  1 | Beer     | m          | 30-39 | 2012-10-17 23:17:52 |
|  2 | Milk     | f          | 10-19 | 2012-10-18 00:15:59 |
|  3 | Milk     | f          | 20-29 | 2012-10-18 23:33:07 |
|  4 | Tea      | m          | 30-39 | 2012-10-20 22:47:08 |
|  5 | Water    | f          | 20-29 | 2012-10-20 22:47:30 |
|  6 | Milk     | m          | 30-39 | 2012-10-20 22:51:22 |
+----+----------+------------+-------+---------------------+
6 rows in set (0.00 sec) 
```

我想得到一个结果，计算有多少女性/男性喜欢茶/啤酒/等。想要的结果是这样的：

```
+-------+-----+---------+
| drink | sex | counted |
+-------+-----+---------+
| Beer  | m   | 1       |
| Milk  | f   | 2       |
| Tea   | m   | 1       |
| Water | f   | 1       |
| Milk  | m   | 1       |
+-------+-----+---------+ 
```

有人有什么建议或解决方案吗？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T22:45:57.510

```
SELECT drink, sex, COUNT(id) counted
FROM   u001
GROUP BY drink, sex 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/46fbc/4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T22:46:38.443

```
select drink, sex, count(id) from u001 group by drink, sex 
```

# javascript - 如何在函数之间传递变量

> ID：12993348
> 
> 赞同：0
> 
> 时间：2012-10-20T22:44:49.567
> 
> 标签：javascript, function, variables, parameter-passing

我有以下js： [http ://www.yvoschaap.com/ytpage/ytembed.js](http://www.yvoschaap.com/ytpage/ytembed.js)

如何从内部传递变量

```
listVideos : function(json,cfg)... 
```

至

```
init : function(cfg) {... 
```

示例：名为“fr”的变量我需要一个计数器...如果第一次找不到 youtube 语言限制参数的视频...&lr=de 第二次我需要增加 fr 变量，所以我可以更改 ' case "search":...' 用于检索另一种语言 ...&lr=zh

更新：我试过

```
var fr = 0; 
```

功能之外...

在第**22行**

```
init : function(cfg) {
while (fr <=1) {... ...the rest} 
```

然后在第**279行**

```
}else{
this.message('No YouTube videos found for your query:<br>Type:\''+this.cfg.type+'\'<br>Query: \''+this.cfg.q+'\'');
fr++;
            } 
```

它不起作用，因为我不明白如何将“fr”传递给第一个函数......

# java - 从远程服务器获取图像问题

> ID：12993349
> 
> 赞同：0
> 
> 时间：2012-10-20T22:44:51.947
> 
> 标签：java, android

就两件事，这是一个很好的简单的抓取图像的方法吗？同样，当我在 android AVD 上尝试它时，屏幕上以及 log_cat 中都没有显示任何内容，没有错误或崩溃。这是我的代码：

```
public class MainActivity extends Activity {
Bitmap bitmap = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    try{
        bitmap = getBitmap("https://twimg0-a.akamaihd.net/profile_images/2275552571/image_normal.jpg");
        ImageView img = (ImageView) findViewById(R.id.img);
        img.setImageBitmap(bitmap);
    }catch(Exception e){

    }

}

public Bitmap getBitmap(String bitmapUrl) { 

              try {

                URL url = new URL(bitmapUrl);

                return BitmapFactory.decodeStream(url.openConnection().getInputStream());

              }catch(Exception ex) {return null;}

            }

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T22:59:55.837

试试：[http](http://code.google.com/p/android-imagedownloader/) ://code.google.com/p/android-imagedownloader/ 。

您可以同步、异步等方式下载远程图像，效果非常好

```
 ImageDownloader imageDownloader = new ImageDownloader();
    imageDownloader.setMode(ImageDownloader.Mode.CORRECT);
    ImageView imageView = (ImageView) rowView.findViewById(R.id.picture);

    imageView.setLayoutParams(new GridView.LayoutParams(140, 140));
    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
    imageView.setPadding(4, 4, 4, 4);

    List<ImageSize> images = this.pictures.get(position).getImages();

    imageDownloader.download(images.get(images.size()-3).getSource(), imageView); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T23:20:29.517

它不起作用，因为您的图片的 url 以**HTTPS**开头。尝试使用**HttpGet**。[类似的](https://stackoverflow.com/a/11372961/1013428)东西。

# vbscript - 使用 VBScript 访问 NTFS 备用数据流

> ID：12993350
> 
> 赞同：2
> 
> 时间：2012-10-20T22:45:04.687
> 
> 标签：vbscript, stream, ntfs

我正在编写一个 VBScript，我希望能够更改区域标识符，并将扩展属性添加到各种文件中。如果没有使用插件或类似下面的东西，这可能吗？

```
objShell.run("type %windir%\notepad.exe > %windir%\calc.exe:notepad.exe") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T23:31:11.077

您可以像处理其他文件一样处理 ADS：

```
Set fso = CreateObject("Scripting.FileSystemObject")

Set f = fso.CreateTextFile("file.exe:Zone.Identifier")
f.WriteLine "[ZoneTransfer]" & vbNewLine & "ZoneId=3"
f.Close

Set f = fso.OpenTextFile("file.exe:Zone.Identifier", 1)
WScript.Echo f.ReadAll
f.Close 
```

# iphone - ABPersonSetImageData 不为来电设置联系人的全尺寸图像

> ID：12993353
> 
> 赞同：1
> 
> 时间：2012-10-20T22:45:23.857
> 
> 标签：iphone, xcode, abaddressbook, abperson, uiimagepngrepresentation

我可以在 iPhone 通讯录中设置新联系人的缩略图，但是当该联系人呼叫我的手机时，手机不会显示全屏版本。相反，它只在屏幕顶部显示缩略图版本，而我手机的屏幕保护程序在后台。有没有什么特别的事情需要做而我忘记了（见下面的代码片段）？

另外，我确实发现以前的帖子表明无法为联系人保存以前的图像，但这仍然不能解决我的问题......

提前致谢！

```
UIImage *profileImage = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:picImageUrl]]];

NSData *profileImageDataRef = UIImagePNGRepresentation(profileImage);
ABPersonSetImageData(newPerson, (__bridge CFDataRef)profileImageDataRef, nil); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-16T03:44:13.423

尝试使用以下代码将图像裁剪为完整尺寸

```
 -(NSData *)dataFromImageData:(NSData *)imageData {
     UIImage *image = [UIImage imageWithData:imageData];
     if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)]) {
         UIGraphicsBeginImageContextWithOptions([UIScreen mainScreen].bounds.size, YES, 0.0);
     } else {
         UIGraphicsBeginImageContext([UIScreen mainScreen].bounds.size);
     }
     [image drawInRect:[UIScreen mainScreen].bounds];
     UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
     UIGraphicsEndImageContext();
     return UIImageJPEGRepresentation(newImage, 0);
 } 
```

然后保存

```
NSData *dataRef = [self dataFromImageData:imageData];
CFDataRef cfdata = CFDataCreate(NULL, [dataRef bytes], [dataRef length]);
ABPersonSetImageData(aContact, cfdata, NULL); 
```

# json - 使用 Restlet/Jackson 反序列化 JSON 对象数组

> ID：12993356
> 
> 赞同：0
> 
> 时间：2012-10-20T22:45:56.033
> 
> 标签：json, rest, jackson, restlet

我正在使用 Restlet 调用返回 JSON 对象数组的 API。当进行类似的调用以拉回单个对象时，所有内容都正确映射到自定义类，但是当我拉回数组时，对象被映射为 LinkedHashMap 而不是此自定义对象。我确定我只需要定义如何正确反序列化数组，但我还没有弄清楚如何做到这一点。

```
@Get("json")
public Trait getTrait();

@Get("json")
public HashSet<Trait> getTraits(); 
```

前者工作正常，但后者不起作用。最终，当我尝试遍历 HashSet 时，我会出现此错误：java.util.LinkedHashMap 无法转换为 com.test.traits.Trait。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T01:06:36.827

这通常是因为类型是作为类（like `HashSet`）而不是泛型类型（`HashSet<Trait>`）传递的。如果是这样，这相当于`HashSet<Object>`, 杰克逊别无选择，只能将内容绑定到最简单的可用 Object 类型，该类型匹配只是`java.util.Collection`某种类型。

听起来 Restlet 出于某种原因没有正确传递泛型类型信息。

有解决方法：

*   使用包装器对象，以便`List`s 和`Map`s 始终是 Java 对象的属性，而不是根级别的值。这确保了类型工作，即使 Restlet 没有为根值传递泛型类型
*   子类`HashSet`，使您具有非泛型类型；杰克逊然后可以找出泛型类型`HashSet`

对于第二种情况，您只需执行以下操作：

```
public class MyTraits extends HashSet<Trait> { } 
```

和

```
@Get("json")
public MyTraits getTraits(); 
```

它会起作用，因为`MyTraits`它没有自己的泛型类型；但它的超类型声明具有可供 Jackson 使用的通用参数。

# inheritance - 具有取决于属性值的继承的 UML 类图

> ID：12993362
> 
> 赞同：0
> 
> 时间：2012-10-20T22:46:46.690
> 
> 标签：inheritance, uml, class-diagram

示例如下：

```
 -----------                -------------------- 
|     X     | 1..1    0..1 |    <<abstract>>    |
|           |<>------------|         Y          |
|-----------|              |--------------------|
| +a:bool   |              | +b:positiveInteger |
'-----------'              '--------------------' 
```

在现实世界中，抽象 Y 可以是具体的 A、B 或 C，根据以下规则：

*   什么时候，Y是A类`a`；`true`
*   当`a`为`false`且时`b == 1`，Y 为 B 类；
*   当和`a`时，Y 是 C 类。`false``b > 1`

您将如何在 UML 类图中对这些继承规则进行建模？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:13:40.260

您可以为此使用[OCL语言。](http://en.wikipedia.org/wiki/Object_Constraint_Language)

首先，您应该扩展您的图表并引入三个具体的子类 、`A`和`B`of `C`，`Y`然后您需要一个像这样的 OCL 约束：

```
context X:
inv: (self.a implies self.y isOclTypeOf(A)) and
     (((not self.a) and (not self.y.isOclUndefined())) implies (self.y.b = 1 implies self.y.isOclTypeOf(B))) and
     (((not self.a) and (not self.y.isOclUndefined())) implies (self.y.b > 1 implies self.y.isOclTypeOf(C))) 
```

# drop-down-menu - Imacros 下拉菜单

> ID：12993369
> 
> 赞同：2
> 
> 时间：2012-10-20T22:48:28.597
> 
> 标签：drop-down-menu, imacros

我正在使用imacros的firefox插件。从这个链接：[http](http://www.youtube.com/create_account) ://www.youtube.com/create_account我试图点击月份下拉菜单并选择一个月份（例如六月）。当我录制时没有代码出现，所以我尝试自己编写它，但我被卡住了。我知道我可以右键单击并选择检查元素并查看标记，但我没有看到此按钮的名称。

**编辑**- 现在通过贝宝为显示如何通过 iMacros 单击并选择一个月的答案提供 5 美元的奖励。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:52:26.337

我决定只使用 java 来扫描屏幕上的下拉菜单，并在它出现时执行我想要的操作。

# ruby-on-rails - 如何使用活动管理员在同一页面上显示来自多个模型的数据？

> ID：12993372
> 
> 赞同：2
> 
> 时间：2012-10-20T22:48:45.090
> 
> 标签：ruby-on-rails, activeadmin

我正在使用活动管理 gem。在我的数据库中有两个表：`lists`和`items`. 我将模型添加`lists`到活动管理员。我的目标是当我使用基本操作（新建、显示、更新）时，我应该能够立即使用数据列表及其在一页上的项目。有人可以解释如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:44:14.500

活动管理员有一个你想要拦截的方法的超级版本，在这种情况下你可以定义它们，然后调用它们的父级，并且在块中你可以访问已经为你创建的实例变量，你可以使用它来执行操作和关联记录。

```
ActiveAdmin.register List do
  controller do
    def create
      create! do |format|
        @list
      end
    end

    update
      update! do |format|
        @list
      end
    end

    def edit
      edit!
    end
  end
end 
```

希望这会引导您朝着正确的方向前进。

# ios5 - Is it possible to use static UITableViewCell and add sections on them?

> ID：12993377
> 
> 赞同：0
> 
> 时间：2012-10-20T22:49:35.707
> 
> 标签：ios5, uitableview, ios6

Is it possible to use static UITableViewCell and add sections on them?

![enter image description here](../Images/eae28f4b4c1ebd6b86f7a31db620a47f.png)

It would be great if I could separate these cells into Twitter, Facebook and Other for example.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T22:57:46.907

![在此处输入图像描述](../Images/068d73424207ff642c78c21fee466ba1.png)

哦，伙计，这很尴尬。我刚刚在“内容”下方的 IB 上看到它

# vb.net - Making it look like the computer is thinking in TicTacToe game

> ID：12993380
> 
> 赞同：4
> 
> 时间：2012-10-20T22:49:56.110
> 
> 标签：vb.net

here is a slice of code that i've written in VB.net

```
Private Sub L00_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles L00.Click, L01.Click, L02.Click, L03.Click, L10.Click, L11.Click, L12.Click, L13.Click, L20.Click, L21.Click, L22.Click, L23.Click, L30.Click, L31.Click, L32.Click, L33.Click
    Dim ticTac As Label = CType(sender, Label)
    Dim strRow As String
    Dim strCol As String

    'Once a move is made, do not allow user to change whether player/computer goes first, because it doesn't make sense to do so since the game has already started.
    ComputerFirstStripMenuItem.Enabled = False
    PlayerFirstToolStripMenuItem.Enabled = False

    'Check to make sure clicked tile is a valid tile i.e and empty tile.
    If (ticTac.Text = String.Empty) Then
        ticTac.Text = "X"
        ticTac.ForeColor = ColorDialog1.Color
        ticTac.Tag = 1

        'After the player has made his move it becomes the computers turn.
        computerTurn(sender, e)

    Else
        MessageBox.Show("Please pick an empty tile to make next move", "Invalid Move")
    End If
End Sub

Private Sub computerTurn(ByVal sender As System.Object, ByVal e As System.EventArgs)
    Call Randomize()
    row = Int(4 * Rnd())
    col = Int(4 * Rnd())

    'Check to make sure clicked tile is a valid tile i.e and empty tile.
    If Not ticTacArray(row, col).Tag = 1 And Not ticTacArray(row, col).Tag = 4 Then
        ticTacArray(row, col).Text = "O"
        ticTacArray(row, col).ForeColor = ColorDialog2.Color
        ticTacArray(row, col).Tag = 4

        checkIfGameOver(sender, e)
    Else
        'Some good ole pseudo-recursion(doesn't require a base case(s)).
        computerTurn(sender, e)
    End If

End Sub 
```

Everything works smoothly, except i'm trying to make it seem like the computer has to "think" before making its move. So what i've tried to do is place a System.Threading.Sleep() call in different places in the code above.

The problem is that instead of making the computer look like its thinking, the program waits and then puts the X and O together at the same time. Can someone help me make it so that the program puts an X wherever i click AND THEN wait before it places an O?

Edit: in case any of you are wondering, i realize that the computers AI is ridiculously dumb, but its just to mess around right now. Later on i will implement a serious AI..hopefully.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T23:06:00.347

一般来说，此类问题的解决方案是设置一个*计时器*，以便稍后显示计算出的计算机移动。问题是（通常）VB.NET 不允许在代码运行时更新屏幕。因此，当您添加睡眠时，即使您已经告诉显示器显示玩家 X，屏幕实际上也不会反映这一点，直到您的函数在睡眠之后返回。

您必须查看如何在 VB.NET 中使用计时器对象（我不知道我头脑中的细节）。因为玩家移动和计算机移动之间会有时间，所以您还需要确保玩家在计算机获得机会之前不能移动*两次*（所以要根据轮到谁来创建一个变量） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T23:17:16.457

正如 Greg 所说我会使用 Timer，我会首先从您的 computerTurn Click 事件中取出逻辑并创建一个 Method，您可以使用随机数生成器使其看起来像是计算机认为变化的时间量，然后例如，您可以将光标更改为等待光标。像这样的东西：

```
Public Class Form1
    Dim rnd As Random = New Random(1)
    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        Me.Cursor = Cursors.WaitCursor
        Timer1.Interval = CInt(rnd.NextDouble * 1000)
        Timer1.Start()
    End Sub

    Private Sub Timer1_Tick(sender As System.Object, e As System.EventArgs) Handles Timer1.Tick
        Timer1.Stop()
        computerTurn()
    End Sub

    Private Sub computerTurn()
        Me.Cursor = Cursors.Default
       'Your Move Logic Here
    End Sub

End Class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T23:20:25.767

关注点分离。

建立一种方法，告诉您计算机想要进行什么移动。让该方法尽可能高效地完成工作，并将整个结果返回给您的演示代码。然后由演示级别决定如何处理该动作，这可能包括等待或制作动画以使其看起来像是计算机正在思考。

# mysql - MySQL DDL error creating tables

> ID：12993383
> 
> 赞同：0
> 
> 时间：2012-10-20T22:50:19.400
> 
> 标签：mysql, mysql-5.5

I am attempting to create tables for a MySQL database, but I am having some syntactical issues. It would seem that syntax checking is behaving differently between tables for some reason. While I've gotten all the other tables to go through, the table, 'stock' doesn't seem to be working, despite seeming to use the same syntax patterns.

```
 CREATE TABLE users (
        user_id             SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
        username            VARCHAR(30) NOT NULL,
        password            CHAR(41) NOT NULL,
        date_joined         DATETIME NOT NULL,
        funds               DOUBLE UNSIGNED NOT NULL,

        PRIMARY KEY(user_id),
        UNIQUE KEY(username)
    );

    CREATE TABLE owned_stocks (
        id                  SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
        user_id             SMALLINT UNSIGNED NOT NULL,
        paid_price          DOUBLE UNSIGNED NOT NULL,
        quantity            MEDIUMINT UNSIGNED NOT NULL,
        purchase_date       DATETIME NOT NULL,

        PRIMARY KEY(id)
    );

    CREATE TABLE tracking_stocks (
        ticker              VARCHAR(5) NOT NULL,
        user_id             SMALLINT UNSIGNED NOT NULL,

        PRIMARY KEY(ticker)
    );

    CREATE TABLE stocks (
        ticker              VARCHAR(5) NOT NULL,
        last                DOUBLE UNSIGNED NOT NULL,
        high                DOUBLE UNSIGNED NOT NULL,
        low                 DOUBLE UNSIGNED NOT NULL,
        company_name        VARCHAR(30) NOT NULL,
        last_updated        INT UNSIGNED NOT NULL,
        change              DOUBLE NOT NULL,
        percent_change      DOUBLE NOT NULL,

        PRIMARY KEY(ticker)
    ); 
```

Am I just missing a really obvious syntactical issue?

ERROR:

> `#1064` - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'change DOUBLE NOT NULL, percent_change DOUBLE NOT NULL, last
> DOUBLE' at line 4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T22:55:48.400

'stocks' 字段名称 'change' 是一个保留的 mysql 字。尝试用不同的字段名称替换它？

供参考：[http ://dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T22:56:53.717

因为 change 是保留字，所以使用反引号将其转义

```
`change` DOUBLE NOT NULL, 
```

**[MySQL 保留字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)**

# c# - TCPClient connects to Gmail but does not receive first message

> ID：12993386
> 
> 赞同：1
> 
> 时间：2012-10-20T22:50:48.007
> 
> 标签：c#, ssl, gmail, tcpclient, gmail-imap

I am using this code to connect to gmail. Every WriteLine() is written. So presumably everything worked correctly? However no message is written to the console. What is wrong? Here is my code:

```
using System;
using System.IO;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net.Sockets;
using System.Net.Security;

namespace RemoteControl
{
class MailClient
{
    static void Main(string[] args)
    {
        try
        {
            // create an instance of TcpClient 
            Console.WriteLine("Connecting...");
            TcpClient tcpclient = new TcpClient();
            tcpclient.Connect("imap.gmail.com", 993);
            SslStream sslstream = new SslStream(tcpclient.GetStream());
            sslstream.AuthenticateAsClient("imap.gmail.com");
            Console.WriteLine("Reached Gmail.");
            StreamWriter sw = new StreamWriter(sslstream);
            System.IO.StreamReader reader = new StreamReader(sslstream);
            Console.WriteLine("Sending username.");
            sw.WriteLine("USER user@gmail.com");
            Console.WriteLine("Sending password.");
            sw.WriteLine("PASS pass");
            Console.WriteLine("Receiving Message.");
            sw.WriteLine("RETR 1");
            Console.WriteLine("Complete.");
            tcpclient.Close(); // close the connection
            Console.ReadLine();
        }
        catch (IOException e) 
        {
            Console.WriteLine(e);
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-28T08:18:11.940

** 根据我的理解，您的问题是希望使用 C# 阅读电子邮件。如果这是真的，我认为 socket pop3 是解决您的问题的好选择。例如：**

```
using System.IO;
using System.Net.NetworkInformation;
using System.Net.Security;
using System.Net.Sockets;
public partial class Default3 : System.Web.UI.Page
{
  protected void Page_Load(object sender, EventArgs e)
{
    // create an instance of TcpClient 
    TcpClient tcpclient = new TcpClient();
    tcpclient.Connect("pop3.live.com", 995);
    System.Net.Security.SslStream sslstream = new SslStream(tcpclient.GetStream());
    sslstream.AuthenticateAsClient("pop3.live.com");
    StreamWriter sw = new StreamWriter(sslstream);
    System.IO.StreamReader reader = new StreamReader(sslstream);
    sw.WriteLine("USER xxx@live.com"); sw.Flush();
    sw.WriteLine("PASS xxxx****"); sw.Flush();
    sw.WriteLine("RETR 1");
    sw.Flush();
    sw.WriteLine("Quit ");
    sw.Flush();
    string str = string.Empty;
    string strTemp = string.Empty;
    while ((strTemp = reader.ReadLine()) != null)
    {
        if (".".Equals(strTemp))
        {
            break;
        }
        if (strTemp.IndexOf("-ERR") != -1)
        {
            break;
        }
        str += strTemp;
    }
    Response.Write(str);
    reader.Close();
    sw.Close();
    tcpclient.Close(); // close the connection
}
} 
```

# xml - XSL For-Each Looping

> ID：12993393
> 
> 赞同：2
> 
> 时间：2012-10-20T22:52:34.597
> 
> 标签：xml, xslt, loops, xpath, foreach

Basically this is my XML taken from an excerpt of a Shakespeare play:

```
<PLAY>
<PERSONA>BENEDICK, a young lord of Padua.</PERSONA>
<PERSONA>LEONATO, governor of Messina.</PERSONA>
<PERSONA>ANTONIO, his brother.</PERSONA>
<PERSONA>BALTHASAR, attendant on Don Pedro.</PERSONA>
<PGROUP>
    <PERSONA>CONRADE</PERSONA>
    <PERSONA>BORACHIO</PERSONA>
    <GRPDESCR>followers of Don John.</GRPDESCR>
</PGROUP>
<PERSONA>FRIAR FRANCIS</PERSONA>
</PLAY> 
```

Here's the XSL:

```
<xsl:template match="PLAY">
    <html>
    <body>
         <xsl:for-each select="PERSONAE">

              <xsl:apply-templates select="PERSONA" />
              <xsl:apply-templates select="PGROUP/PERSONA" />

          </xsl:for-each>
    </body>
    </html>
</xsl:template>

<xsl:template match="PERSONA">
    <p><xsl:value-of select="." /></p>
</xsl:template>

<xsl:template match="PGROUP/PERSONA">
    <xsl:for-each select=".">
        <p><xsl:value-of select="." />, </p> 
    </xsl:for-each>

    <xsl:for-each select="..">
        <p><xsl:value-of select="GRPDESCR" /></p>
    </xsl:for-each>
</xsl:template> 
```

The current HTML output:

```
BENEDICK, a young lord of Padua.

LEONATO, governor of Messina.

ANTONIO, his brother.

BALTHASAR, attendant on Don Pedro.

FRIAR FRANCIS

CONRADE,

followers of Don John.

BORACHIO,

followers of Don John. 
```

And this is what I want my HTML output to look like:

```
BENEDICK, a young lord of Padua.

LEONATO, governor of Messina.

ANTONIO, his brother.

BALTHASAR, attendant on Don Pedro.

FRIAR FRANCIS

CONRADE, BORACHIO, followers of Don John. 
```

I've spent hours on this so any help would be so great!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T23:41:25.913

在您的 XSLT 中，您尝试使用它`xsl:for-each`来迭代`PERSONAE`，但您的示例 XML 不包含`PERSONAE`元素。除非您的 XSLT 有更多您没有显示的内容，否则您不应该有任何输出`<html> <body></body> </html>`

而不是使用`xsl:for-each`，您可以通过使用“推送”样式更简单地实现所需的输出，该样式使用`xsl:apply-templates`特定模板来匹配和生成所需的输出。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="html"/>

    <xsl:template match="PLAY">
        <html>
            <body>
                <!--first, process all PERSONA elements 
                    that are children of PLAY-->
                <xsl:apply-templates select="PERSONA" />
                <!--Then, process all PGROUP elements -->
                <xsl:apply-templates select="PGROUP" />
            </body>
        </html>
    </xsl:template>

    <!--generic template match for PERSONA elements -->
    <xsl:template match="PERSONA">
        <p><xsl:value-of select="." /></p>
    </xsl:template>

    <!--For each PGROUP matched, create a P and apply templates 
        to child elements(i.e. PERSONA and GRPDESCR) -->
    <xsl:template match="PGROUP">
        <p>
            <!--Note: No specific template is defined for GRPDESCR. 
               The default XSLT template rules will apply for GRPDESCR 
               and it will copy it's text to output -->
            <xsl:apply-templates select="*" />
        </p> 
    </xsl:template>

    <!--A more specific match for PERSONA elements that will select the text 
        and then add ", " -->
    <xsl:template match="PGROUP/PERSONA">
        <xsl:value-of select="."/>
        <xsl:text>, </xsl:text> 
    </xsl:template>

</xsl:stylesheet> 
```

# java - How to show progress during an IO operation

> ID：12993399
> 
> 赞同：1
> 
> 时间：2012-10-20T22:53:00.090
> 
> 标签：java, file-io, progress

I want to read elements from array and display progress of reading as parallel process reading.

I have two interal classes:

```
public class NumbersCounter {

    int totalCountOfLines;
    int currentCountOfLines = 1;

    public NumbersCounter() throws FileNotFoundException, IOException {    
        new Read();
        new Progress();
    }

    public static void main(String[] args) {
        try {
            new NumbersCounter();
        } catch (FileNotFoundException ex) {
            Logger.getLogger(NumbersCounter.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IOException ex) {
            Logger.getLogger(NumbersCounter.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    class Progress extends Thread {  
        public Progress() {
            start();
        }

        @Override
        public void run() {        
            synchronized(new Object()) {
                while (currentCountOfLines <= totalCountOfLines) {
                    System.out.println(currentCountOfLines / totalCountOfLines * 100 + "%");
                    Thread.yield();
                }            
            }
    }}

    class Read extends Thread {
        private FileHandler fh = new FileHandler("ololo.txt");
        private String[] lines;

        public Read() throws FileNotFoundException, IOException {
            this.lines = fh.readFromFile();
            start();
        }

        @Override
        public void run() {

            totalCountOfLines = this.lines.length;

            if (totalCountOfLines > 0) {
                synchronized(new Object()) {
                    for (String line : lines) {
                        currentCountOfLines++;   
                        Thread.yield();
                    }

                }
            } else {
                totalCountOfLines = 0;
            }    
        }
    }
} 
```

When first step of Read Thread is executed, I need to give executing to Progress thread, and then for Read, and then for Progress.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:59:08.283

使用`javax.swing.ProgressMonitorInputStream`该类作为输入流的包装器，显示进度对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T22:59:26.157

请参阅 java.util.concurrent 包的文档。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/package-summary.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/package-summary.html)

特别是 ExecutorService、Executor、Callable 和 Future 接口。并发包旨在完成您尝试做的事情，而无需您自己处理锁定和并发。

后台 IO 操作 - 逐步更新 UI。

# php - 使用 if 来回显基于单选按钮和下拉列表选择 PHP 的语句

> ID：12993400
> 
> 赞同：-1
> 
> 时间：2012-10-20T22:53:07.237
> 
> 标签：php, drop-down-menu, radiobuttonlist

我在整个互联网上寻找这个特定问题的答案，但似乎找不到。基本上，我有一组单选按钮和一个下拉列表，您可以从中选择选项。

```
<form method="get" action="phpindex.php">
    <select name="season">
        <option value="">- Season -</option>
        <option value="spring">Spring</option>
        <option value="summer">Summer</option>
        <option value="fall">Fall</option>
        <option value="winter">Winter</option>
    </select>
    <br /><br />
    <input type="radio" name="beer" value="heavy"/>Heavy
    <br />
    <input type="radio" name="beer" value="light"/>Light
    <br />
    <input type="submit" OnClick="show_alert"/>
</form> 
```

根据您的选择组合，您会在单击提交按钮时获得要回应的特定声明。例如，如果您选择春天作为季节，并选择浓啤酒，则应根据这些选择回应声明。问题是，回声功能不起作用，我认为这是因为单选按钮和下拉列表的组合。这是我的 PHP 和前面提到的 echo 函数不起作用。

```
<?php

$beer = $_GET["beer"];
$season = $_GET["season"];
$spring = $_GET["sp"];
$summer = $_GET["summer"];
$fall = $_GET["fall"];
$winter = $_GET["winter"];
$heavy = $_GET["heavy"];
$light = $_GET["light"];

if ( in_array("spring", $season) && in_array("heavy", $beer)  ) {
echo "$state Bud"; } 
if ( in_array("spring", $season) && in_array("light", $beer) ) {
echo "$state Abita"; }
if ( in_array("summer", $season) && in_array("heavy", $beer) ) {
echo "$state Yuengling"; }
if ( in_array("summer", $season) && in_array("light", $beer) ) {
echo "$state Coors"; }
if ( in_array("fall", $season) && in_array("heavy", $beer) ) {
echo "$state PBR"; }
if ( in_array("fall", $season) && in_array("light", $beer) ) {
echo "$state Miller"; }
if ( in_array("winter", $season) && in_array("heavy", $beer) ) {
echo "$state Natty"; }
if ( in_array("summer", $season) && in_array("light", $beer) ) {
echo "$state Kona"; }

$state = "Well, it looks like it's $season, and you want a $beer beer, so try this brew out:";

?> 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T22:58:45.747

您想将该字符串保存到 if 语句上方的 $state 中。

```
$state = .......

if....
if.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T23:02:22.203

首先你必须首先有 $state = '...' 然后你的 if 语句

$_GET 是一个数组，所以你可以做 in_array，但 $_GET['beer'] 或 $_GET['season'] 不是一个数组。

所以 $beer 和 $season 在你的情况下不是一个数组。您可以轻松地将您的陈述更改为：

```
$state = "Well, it looks like it's $season, and you want a $beer beer, so try this brew out:";
if ( $season == "spring" && $beer == "heavy"  ) {
    echo "$state Bud"; 
} 
.... 
```

等等...

因为我想你只是期待一个复制粘贴，你去那里：

```
<?php

$beer = $_GET["beer"];
$season = $_GET["season"];
$spring = $_GET["sp"];
$summer = $_GET["summer"];
$fall = $_GET["fall"];
$winter = $_GET["winter"];
$heavy = $_GET["heavy"];
$light = $_GET["light"];

$state = "Well, it looks like it's $season, and you want a $beer beer, so try this brew out:";

if ( $season == "spring" && $beer == "heavy" ) {
    echo "$state Bud"; 
} 
if ( $season == "spring" && $beer == "light" ) {
    echo "$state Abita"; 
}
if ( $season == "summer" && $beer == "heavy" ) {
    echo "$state Yuengling"; 
}
if ( $season == "summer" && $beer == "light" ) {
    echo "$state Coors"; 
}
if ( $season == "fall" && $beer == "heavy" ) {
    echo "$state PBR";
}
if ( $season == "fall" && $beer == "light" ) {
    echo "$state Miller"; 
}
if ( $season == "winter" && $beer == "heavy" ) {
    echo "$state Natty"; 
}
if ( $season == "summer" && $beer == "light" ) {
    echo "$state Kona"; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T23:07:33.717

里面有几个错误

首先，您只需要：

```
$beer = $_GET["beer"];
$season = $_GET["season"]; 
```

秋天、春天等是价值，而不是 GET 参数。之后，您检查 GET 的值以将啤酒 anme 存储在 var 中；

```
if ($beer == 'heavy' && $season == 'spring') $brand= "Bud";
 if ($beer == 'light' && $season == 'spring') $brand= "Abita";
 //ad so on....

$state = "Well, it looks like it's $season, and you want a $beer beer, so try this brew out: $brand";
echo $state; 
```

您不能回显 $state，因为 $state 是在您的回显呼叫之后定义的。相反，只需将 brew 放在一个 var 中，然后在所有 if 之后将其附加到您的状态字符串。

干杯。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-20T23:04:05.590

`$_GET`以这种方式使用的元素只能是简单的数据类型，而不是数组，因为查询字符串的每个段（例如`q=v`）都被定义为表示单个值——在数组中`v`带有键。`q``$_GET`

正如下面所指出的，当`"array[]"`用于标记的`name`属性时有一个例外`input`，在这种特定情况下，它会在`$_GET`/中创建一个数组`$_POST`。

在您的情况下，您希望直接将值作为字符串进行测试：

`if ($season == "spring" && $beer == "heavy")`

例如。

# php - Accessing object's method within string

> ID：12993402
> 
> 赞同：5
> 
> 时间：2012-10-20T22:53:37.063
> 
> 标签：php, string, string-interpolation

Recently I was reading php documentation and found interesting note in string section:

> Functions, **method calls**, static class variables, and class constants inside {$} work since PHP 5\. However, the value accessed will be interpreted as the name of a variable in the scope in which the string is defined. Using single curly braces ({}) will not work for accessing the return values of functions or **methods** or the values of class constants or static class variables.

See [www.php.net/manual/en/language.types.string.php](http://www.php.net/manual/en/language.types.string.php)

It says, that I can't use curly syntax to get value returned by object's method call. Is it a mistake in manual or I misunderstood it, because I tried the following code and it works just fine:

```
<?php
class HelloWorld
{
    public static function hello() 
    {
        echo 'hello';
    }
}
$a = new HelloWorld();

echo "{$a->hello()} world"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T23:09:23.043

[PHP DOC 说](http://www.php.net/manual/en/language.types.string.php)

> 不适用于访问函数或方法的返回值或类**常量或静态类变量的值**

`$a->hello()`不是如何调用静态方法，`PHP`也不是常量或静态类变量这就是它们的意思：

```
class HelloWorld {
    const A = "A";//                <---- You can not use it for this 
    public static $B = "B";         <---- or this  

    public static function hello() {
        echo 'hello';
    }
}

$a = new HelloWorld();
$A = "{HelloWorld::A} world";       <-------- Not Work
$B = "{HelloWorld::$B} world";      <-------- Not Work
$C = "{HelloWorld::hello()} world"; <-------- Not Work 
```

如果你现在尝试

```
$A = "X";    // If you don't define this it would not work
$B = "Y" ;   //<------------- -^

echo "{${HelloWorld::A}} world";  
echo "{${HelloWorld::$B}} world"; 
```

输出

```
X world           <--- returns X world instead of A
Y world           <--- returns Y world instead of B 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T23:09:18.503

我从那个解释中了解到，压力在

> (...) 使用**单个**花括号...</p>

所以在这个例子中，我认为它想说：

`echo "I'd like an {$beers::$ale}\n";`将不起作用，因此单个花括号。
这就是为什么你应该使用双花括号，第一个将返回静态输出，第二个将返回最终输出，如示例中所示：

```
echo "I'd like an {${beers::$ale}}\n";
                  ^ ^           ^^ 
```

# c++ - Accessing a vector > as a flat array

> ID：12993403
> 
> 赞同：2
> 
> 时间：2012-10-20T22:53:42.477
> 
> 标签：c++, vector, std, multidimensional-array, flat

For this array:

```
vector<vector<int> > v;

v.push_back(vector<int>(0));
v.back().push_back(1);
v.back().push_back(2);
v.back().push_back(3);
v.back().push_back(4); 
```

I can output {1, 2, 3, 4} easily enough:

```
cout << v[0][0] << endl;
cout << v[0][1] << endl;
cout << v[0][2] << endl;
cout << v[0][3] << endl; 
```

To access it as a flat array I can do this:

```
int* z = (int*)&v[0].front();

cout << z[0] << endl;
cout << z[1] << endl;
cout << z[2] << endl;
cout << z[3] << endl; 
```

Now, how do I access the multidimensional vector as a flat multidimensional array? I cannot use the same format as accessing a single-dimensional vector:

```
// This does not work (outputs garbage)
int** n = (int**)&v.front();

cout << n[0][0] << endl;
cout << n[0][1] << endl;
cout << n[0][2] << endl;
cout << n[0][3] << endl; 
```

The workaround I've found is to do this:

```
int** n = new int* [v.size()];

for (size_t i = 0; i < v.size(); i++) {
   n[i] = &v.at(i).front();
}

cout << n[0][0] << endl;
cout << n[0][1] << endl;
cout << n[0][2] << endl;
cout << n[0][3] << endl; 
```

Is there a way to access the entire multidimensional vector like a flat c-style array without having to dynamically allocate each dimension above the data before accessing it?

Speed is not critical in the implementation and clarity for maintenance is paramount. A multidimensional vector is just fine for storing the data. However, I want to also expose the data as a flat c-style array in the SDK so that it can be easily accessible by other languages. This means that exposing the vectors as an STL object is a no go.

The solution I came up with works fine for my needs as I only evaluate the array once at the very end of processing to "flatten" it. However, is there a better way to go about this? Or am I already doing it the best way I possibly can without re-implementing my own data structure (overkill since my flatten code is only a few lines).

Thank you for your advice, friends!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T23:08:43.873

A`vector`的缓冲区通常是动态分配的。

这意味着当你有一个`vector`of `vector`s 时，关于内部缓冲区，你有类似于指针数组的东西，每个指针都指向一个数组。

如果您需要在相同数据的 1D 和 2D 视图之间切换，最简单的可能是只定义一个 2D 数组类，如下所示（即兴发挥）：

```
typedef ptrdiff_t Size;
typedef Size Index;

template< class Item >
class Array2D
{
private:
    std::vector< Item > items_;
    Size                width_;
    Size                height_;

    Index indexFor( Index const x, Index const y )
    { return y*width_ + x; }

public:
    Size width() const { return width_; }
    Size height() const { return height_; }

    Item& operator()( Index const x, Index const y )
    { return items_[indexFor( x, y )]; }

    Item const& operator()( Index const x, Index const y ) const
    { return items_[indexFor( x, y )]M; }

    Size bufferSize() const { return width_*height_; }
    Item* buffer() { return &items_[0]; }
    Item const* buffer() const { return &items_[0]; }

    Array2D( Size const w, Size const h )
        : items_( w*h )
        , width_( w )
        , height_( h )
    {}
}; 
```

然后你可以做类似的事情

```
Array2D< int >  a( 4, 3 );

for( Index y = 0;  y < a.height();  ++y )
{
    for( Index x = 0;  x < a.width();  ++x )
    {
        foo( a( x, y ) );
    }
} 
```

*和*

```
Array2D< int >  a( 4, 3 );

int* const pb = a.buffer();
for( Index i = 0;  i < a.bufferSize();  ++i )
{
    foo( pb[i];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T23:00:32.783

> 现在，如何将多维向量作为平面多维数组访问？

你不能。

您可以`vector<int>`作为 an访问的原因`int[]`是因为布局是相同的。的内存布局与`vector<vector<int>>`的布局不同`int*[]`，这意味着您无法像访问它一样访问它`int*[]`。

如果您无法避免通过 a 访问数据，`int*[]`那么您正在做的事情是分配一个数组`int*`并用指向向量的指针填充它，这是您能做的最好的事情。不过，如果您可以避免一开始就需要这样做，那就更好了。

您可能希望为`int*[]`. 您也可能不需要使用`vector::at()`，并且您可能会考虑是否需要处理向量之一为空的情况。在这里，我使用 C++11 特性解决了这些问题。

```
std::unique_ptr<int*[]> n(new int* [v.size()]);
transform(begin(v), end(v), n.get(), [](std::vector<int> &i) { return i.data(); }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T23:00:50.330

好吧，你不能，因为尽管向量可以保证将它们的元素存储在连续的内存中，但向量的向量并不能保证与 2D C 样式数组相同的存储布局。

所以不，这是不可能的，我会更进一步说这`int* z = (int*)&v[0].front();`简直丑陋。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T23:01:21.377

如果您的一维向量 ( `std::vector<int>`) 大小相同 - 则保留向量原始数组：

```
typedef int ARRAY[6];
std::vector<ARRAY> yourVector; 
```

如果它们的大小不相同 - 那么你有真正的问题，因为每个`std::vector<int>`占用连续的内存区域，但这些区域不连续。就像在这个原始 C 数组中一样：

```
int** a = new int*[3];
a[0] = new int[4];
a[1] = new int[5]; 
```

`a`不指向大小的连续内存`(4+5)*sizeof(int)`......

# java - OnClickListener onClick=true and selector

> ID：12993404
> 
> 赞同：3
> 
> 时间：2012-10-20T22:53:52.290
> 
> 标签：java, android, onclick, onclicklistener

I have not found any answer for my problem, so I need your help ... I have an LinearLayout which I want to be clickable in order to lunch another activity. So I implement an onClickListener to it. I created an selector for this LinearLayout in order that when someone click on it, the background change.

I just don't understand that :

*   If my LinearLayout doesn't have **android:clickable="true"** in the xml, I'm able to click on it and get what I want but the selector doesn't work.
*   If I remove this line, it is the opposite .. the selector work but not the onClick event.

So, can anyone can explain me why ? Just in case, here is my the content of my selector file :

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
   <item android:drawable="@drawable/btn_restaurants_background_state_pressed" android:state_pressed="true"></item>
   <item android:drawable="@drawable/btn_restaurants_background_state_pressed" android:state_focused="true"></item>
   <item android:drawable="@drawable/btn_restaurants_background_state_pressed" android:state_selected="true"></item>
   <item android:drawable="@drawable/btn_restaurants_background_state_normal"></item>
</selector> 
```

Thanks you in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T05:28:34.587

在 onCreate 方法中：

```
private LinearLayout llayout;
@Override
public void onCreate(Bundle savedInstance) {
   super.onCreate(savedInstance);
   llayout = (LinearLayout) findViewById(R.id.layout_name);
   llayout.setOnClickListener(this); 
```

然后覆盖activity中的onClick方法，

```
 @override
  public void onClick(View v) {

     switch(v.getId()) {

        case R.id.layout_name :
              // To change the background
              llayout.setBackgroundResource(R.drawable.image_name1);

             // To call AnotherActivity
             Intent in = new Intent(this, TargetActivityName.class);
             startActivity(in);
             break;
     }
  } 
```

# eclipse - Eclipse/Mylyn: use JIRA and Bitbucket?

> ID：12993408
> 
> 赞同：1
> 
> 时间：2012-10-20T22:54:05.870
> 
> 标签：eclipse, jira, bitbucket, mylyn

It is possible to connect a Bitbucket account to JIRA: [http://blog.bitbucket.org/2012/04/30/linking-bitbucket-and-jira/](http://blog.bitbucket.org/2012/04/30/linking-bitbucket-and-jira/)

But is it possible to connect them using Eclipse/Mylyn?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T01:52:21.700

Atlassian 有一个用于 Eclipse 和 JIRA 的连接器，您可以在此处查看：http: [//www.atlassian.com/software/ide-connectors/overview](http://www.atlassian.com/software/ide-connectors/overview)。它管理构建、源代码控制、问题等。非常值得一看。

# java - Why does iOS 5 fail to connect to a server running JDK 1.6, but not JDK 1.5

> ID：12993410
> 
> 赞同：21
> 
> 时间：2012-10-20T22:54:09.260
> 
> 标签：java, ios5, ssl, jsse, diffie-hellman

We have a Java Socket Server listening on an SSLSocket (port 443) and an iOS application that connects with it. When running on **iOS 5.1**, the application stopped working when we upgraded the Java version of the server from **JDK 1.5** to **1.6** (or **1.7**). The app connects just fine to JDK 5 and 6 when running on iOS 6.

The iOS app is reporting an error: `-9809 = errSSLCrypto`. On the Java side, we get `javax.net.ssl.SSLException: Received fatal alert: close_notify`.

On the Java server side, we have enabled all the available cipher suites. On the client side we have tested enabling several different suites, although we have yet to complete a test involving each one individually enabled. Right now, it is failing when we use `TLS_DH_anon_WITH_AES_128_CBC_SHA` although it has failed with others and we are starting to think it's not the suite.

Here is the debug output. It makes it all the way to `ServerHelloDone` and then fails shortly thereafter:

```
Is secure renegotiation: false
[Raw read]: length = 5
0000: 16 03 03 00 41                                     ....A
[Raw read]: length = 65
0000: 01 00 00 3D 03 03 50 83   1E 0B 56 19 25 65 C8 F2  ...=..P...V.%e..
0010: AF 02 AD 48 FE E2 92 CF   B8 D7 A6 A3 EA C5 FF 5D  ...H...........]
0020: 74 0F 1B C1 99 18 00 00   08 00 FF 00 34 00 1B 00  t...........4...
0030: 18 01 00 00 0C 00 0D 00   08 00 06 05 01 04 01 02  ................
0040: 01                                                 .
URT-, READ: Unknown-3.3 Handshake, length = 65
*** ClientHello, Unknown-3.3
RandomCookie:  GMT: 1333992971 bytes = { 86, 25, 37, 101, 200, 242, 175, 2, 173, 72, 254, 226, 146, 207, 184, 215, 166, 163, 234, 197, 255, 93, 116, 15, 27, 193, 153, 24 }
Session ID:  {}
Cipher Suites: [TLS_EMPTY_RENEGOTIATION_INFO_SCSV, TLS_DH_anon_WITH_AES_128_CBC_SHA, SSL_DH_anon_WITH_3DES_EDE_CBC_SHA, SSL_DH_anon_WITH_RC4_128_MD5]
Compression Methods:  { 0 }
Unsupported extension signature_algorithms, data: 00:06:05:01:04:01:02:01
***
[read] MD5 and SHA1 hashes:  len = 65
0000: 01 00 00 3D 03 03 50 83   1E 0B 56 19 25 65 C8 F2  ...=..P...V.%e..
0010: AF 02 AD 48 FE E2 92 CF   B8 D7 A6 A3 EA C5 FF 5D  ...H...........]
0020: 74 0F 1B C1 99 18 00 00   08 00 FF 00 34 00 1B 00  t...........4...
0030: 18 01 00 00 0C 00 0D 00   08 00 06 05 01 04 01 02  ................
0040: 01                                                 .
%% Created:  [Session-1, TLS_DH_anon_WITH_AES_128_CBC_SHA]
*** ServerHello, TLSv1
RandomCookie:  GMT: 1333992972 bytes = { 100, 3, 56, 153, 7, 2, 251, 64, 41, 32, 66, 240, 227, 181, 55, 190, 2, 237, 146, 0, 73, 119, 70, 0, 160, 9, 28, 207 }
Session ID:  {80, 131, 30, 12, 241, 73, 52, 38, 46, 41, 237, 226, 199, 246, 156, 45, 3, 247, 182, 43, 223, 8, 49, 169, 188, 63, 160, 41, 102, 199, 50, 190}
Cipher Suite: TLS_DH_anon_WITH_AES_128_CBC_SHA
Compression Method: 0
Extension renegotiation_info, renegotiated_connection: <empty>
***
Cipher suite:  TLS_DH_anon_WITH_AES_128_CBC_SHA
*** Diffie-Hellman ServerKeyExchange
DH Modulus:  { 233, 230, 66, 89, 157, 53, 95, 55, 201, 127, 253, 53, 103, 18, 11, 142, 37, 201, 205, 67, 233, 39, 179, 169, 103, 15, 190, 197, 216, 144, 20, 25, 34, 210, 195, 179, 173, 36, 128, 9, 55, 153, 134, 157, 30, 132, 106, 171, 73, 250, 176, 173, 38, 210, 206, 106, 34, 33, 157, 71, 11, 206, 125, 119, 125, 74, 33, 251, 233, 194, 112, 181, 127, 96, 112, 2, 243, 206, 248, 57, 54, 148, 207, 69, 238, 54, 136, 193, 26, 140, 86, 171, 18, 122, 61, 175 }
DH Base:  { 48, 71, 10, 213, 160, 5, 251, 20, 206, 45, 157, 205, 135, 227, 139, 199, 209, 177, 197, 250, 203, 174, 203, 233, 95, 25, 10, 167, 163, 29, 35, 196, 219, 188, 190, 6, 23, 69, 68, 64, 26, 91, 44, 2, 9, 101, 216, 194, 189, 33, 113, 211, 102, 132, 69, 119, 31, 116, 186, 8, 77, 32, 41, 216, 60, 28, 21, 133, 71, 243, 169, 241, 162, 113, 91, 226, 61, 81, 174, 77, 62, 90, 31, 106, 112, 100, 243, 22, 147, 58, 52, 109, 63, 82, 146, 82 }
Server DH Public Key:  { 8, 60, 59, 13, 224, 110, 32, 168, 116, 139, 246, 146, 15, 12, 216, 107, 82, 182, 140, 80, 193, 237, 159, 189, 87, 34, 18, 197, 181, 252, 26, 27, 94, 160, 188, 162, 30, 29, 165, 165, 68, 152, 11, 204, 251, 187, 14, 233, 239, 103, 134, 168, 181, 173, 206, 151, 197, 128, 65, 239, 233, 191, 29, 196, 93, 80, 217, 55, 81, 240, 101, 31, 119, 98, 188, 211, 52, 146, 168, 127, 127, 66, 63, 111, 198, 134, 70, 213, 31, 162, 146, 25, 178, 79, 56, 116 }
Anonymous
*** ServerHelloDone
[write] MD5 and SHA1 hashes:  len = 383
0000: 02 00 00 4D 03 01 50 83   1E 0C 64 03 38 99 07 02  ...M..P...d.8...
0010: FB 40 29 20 42 F0 E3 B5   37 BE 02 ED 92 00 49 77  .@) B...7.....Iw
0020: 46 00 A0 09 1C CF 20 50   83 1E 0C F1 49 34 26 2E  F..... P....I4&.
0030: 29 ED E2 C7 F6 9C 2D 03   F7 B6 2B DF 08 31 A9 BC  ).....-...+..1..
0040: 3F A0 29 66 C7 32 BE 00   34 00 00 05 FF 01 00 01  ?.)f.2..4.......
0050: 00 0C 00 01 26 00 60 E9   E6 42 59 9D 35 5F 37 C9  ....&.`..BY.5_7.
0060: 7F FD 35 67 12 0B 8E 25   C9 CD 43 E9 27 B3 A9 67  ..5g...%..C.'..g
0070: 0F BE C5 D8 90 14 19 22   D2 C3 B3 AD 24 80 09 37  ......."....$..7
0080: 99 86 9D 1E 84 6A AB 49   FA B0 AD 26 D2 CE 6A 22  .....j.I...&..j"
0090: 21 9D 47 0B CE 7D 77 7D   4A 21 FB E9 C2 70 B5 7F  !.G...w.J!...p..
00A0: 60 70 02 F3 CE F8 39 36   94 CF 45 EE 36 88 C1 1A  `p....96..E.6...
00B0: 8C 56 AB 12 7A 3D AF 00   60 30 47 0A D5 A0 05 FB  .V..z=..`0G.....
00C0: 14 CE 2D 9D CD 87 E3 8B   C7 D1 B1 C5 FA CB AE CB  ..-.............
00D0: E9 5F 19 0A A7 A3 1D 23   C4 DB BC BE 06 17 45 44  ._.....#......ED
00E0: 40 1A 5B 2C 02 09 65 D8   C2 BD 21 71 D3 66 84 45  @.[,..e...!q.f.E
00F0: 77 1F 74 BA 08 4D 20 29   D8 3C 1C 15 85 47 F3 A9  w.t..M ).<...G..
0100: F1 A2 71 5B E2 3D 51 AE   4D 3E 5A 1F 6A 70 64 F3  ..q[.=Q.M>Z.jpd.
0110: 16 93 3A 34 6D 3F 52 92   52 00 60 08 3C 3B 0D E0  ..:4m?R.R.`.<;..
0120: 6E 20 A8 74 8B F6 92 0F   0C D8 6B 52 B6 8C 50 C1  n .t......kR..P.
0130: ED 9F BD 57 22 12 C5 B5   FC 1A 1B 5E A0 BC A2 1E  ...W"......^....
0140: 1D A5 A5 44 98 0B CC FB   BB 0E E9 EF 67 86 A8 B5  ...D........g...
0150: AD CE 97 C5 80 41 EF E9   BF 1D C4 5D 50 D9 37 51  .....A.....]P.7Q
0160: F0 65 1F 77 62 BC D3 34   92 A8 7F 7F 42 3F 6F C6  .e.wb..4....B?o.
0170: 86 46 D5 1F A2 92 19 B2   4F 38 74 0E 00 00 00     .F......O8t....
URT-, WRITE: TLSv1 Handshake, length = 383
[Raw write]: length = 388
0000: 16 03 01 01 7F 02 00 00   4D 03 01 50 83 1E 0C 64  ........M..P...d
0010: 03 38 99 07 02 FB 40 29   20 42 F0 E3 B5 37 BE 02  .8....@) B...7..
0020: ED 92 00 49 77 46 00 A0   09 1C CF 20 50 83 1E 0C  ...IwF..... P...
0030: F1 49 34 26 2E 29 ED E2   C7 F6 9C 2D 03 F7 B6 2B  .I4&.).....-...+
0040: DF 08 31 A9 BC 3F A0 29   66 C7 32 BE 00 34 00 00  ..1..?.)f.2..4..
0050: 05 FF 01 00 01 00 0C 00   01 26 00 60 E9 E6 42 59  .........&.`..BY
0060: 9D 35 5F 37 C9 7F FD 35   67 12 0B 8E 25 C9 CD 43  .5_7...5g...%..C
0070: E9 27 B3 A9 67 0F BE C5   D8 90 14 19 22 D2 C3 B3  .'..g......."...
0080: AD 24 80 09 37 99 86 9D   1E 84 6A AB 49 FA B0 AD  .$..7.....j.I...
0090: 26 D2 CE 6A 22 21 9D 47   0B CE 7D 77 7D 4A 21 FB  &..j"!.G...w.J!.
00A0: E9 C2 70 B5 7F 60 70 02   F3 CE F8 39 36 94 CF 45  ..p..`p....96..E
00B0: EE 36 88 C1 1A 8C 56 AB   12 7A 3D AF 00 60 30 47  .6....V..z=..`0G
00C0: 0A D5 A0 05 FB 14 CE 2D   9D CD 87 E3 8B C7 D1 B1  .......-........
00D0: C5 FA CB AE CB E9 5F 19   0A A7 A3 1D 23 C4 DB BC  ......_.....#...
00E0: BE 06 17 45 44 40 1A 5B   2C 02 09 65 D8 C2 BD 21  ...ED@.[,..e...!
00F0: 71 D3 66 84 45 77 1F 74   BA 08 4D 20 29 D8 3C 1C  q.f.Ew.t..M ).<.
0100: 15 85 47 F3 A9 F1 A2 71   5B E2 3D 51 AE 4D 3E 5A  ..G....q[.=Q.M>Z
0110: 1F 6A 70 64 F3 16 93 3A   34 6D 3F 52 92 52 00 60  .jpd...:4m?R.R.`
0120: 08 3C 3B 0D E0 6E 20 A8   74 8B F6 92 0F 0C D8 6B  .<;..n .t......k
0130: 52 B6 8C 50 C1 ED 9F BD   57 22 12 C5 B5 FC 1A 1B  R..P....W"......
0140: 5E A0 BC A2 1E 1D A5 A5   44 98 0B CC FB BB 0E E9  ^.......D.......
0150: EF 67 86 A8 B5 AD CE 97   C5 80 41 EF E9 BF 1D C4  .g........A.....
0160: 5D 50 D9 37 51 F0 65 1F   77 62 BC D3 34 92 A8 7F  ]P.7Q.e.wb..4...
0170: 7F 42 3F 6F C6 86 46 D5   1F A2 92 19 B2 4F 38 74  .B?o..F......O8t
0180: 0E 00 00 00                                        ....
[Raw read]: length = 5
0000: 15 03 01 00 02                                     .....
[Raw read]: length = 2
0000: 02 00                                              ..
URT-, READ: TLSv1 Alert, length = 2
URT-, RECV TLSv1 ALERT:  fatal, close_notify
URT-, called closeSocket()
URT-, handling exception: javax.net.ssl.SSLException: Received fatal alert: close_notify 
```

FYI, this works in iOS 6.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:06:26.747

您是否尝试过从 Java 服务器导出“新”自签名证书并导入到应用程序/操作系统的信任库？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-14T02:13:24.760

如果应用程序使用 JDK5，我建议使用 JDK6 重复相同的测试并比较两个日志文件：应该清楚真正的差异在哪里。

检查您的调试日志，服务器说客户端正在发送*致命*的close_notify 消息，因此服务器立即关闭连接，这是正确的服务器行为。

> [7.2.1\. 关闭警报](https://www.rfc-editor.org/rfc/rfc5246#section-7.2.1)
> 
> 客户端和服务器必须共享连接即将结束的知识，以避免截断攻击。任何一方都可以发起结束消息的交换。
> 
> **close_notify**此消息通知收件人，发件人将不再在此连接上发送任何消息。请注意，从 TLS 1.1 开始，无法正确关闭连接不再需要不恢复会话。这是对 TLS 1.0 的更改，以符合广泛的实施实践。
> 
> 任何一方都可以通过发送 close_notify 警报来启动关闭。关闭警报后收到的任何数据都将被忽略。除非已经传输了一些其他致命警报，否则每一方都需要在关闭连接的写入端之前发送 close_notify 警报。另一方必须以自己的 close_notify 警报响应并立即关闭连接，丢弃任何挂起的写入。在关闭连接的读取端之前，关闭的发起者不需要等待响应的 close_notify 警报。

关于 TLS_DH_anon_WITH_AES_128_CBC_SHA，请注意 JDK6u29 中有一个 REGRESSION 修复，它**使用 TLS_DH_anon_WITH_AES_128_CBC_SHA 破坏了 SSL 连接**。更多信息在这里：

[http://www.oracle.com/technetwork/java/javase/documentation/overview-137139.html](http://www.oracle.com/technetwork/java/javase/documentation/overview-137139.html) [http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7103725](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7103725)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T18:18:58.263

我可以建议在您的 Java 应用程序服务器前使用 Apache 或其他 HTTP(S) 服务器吗？想想未来，也许你的应用程序无论如何都不会让 Java 直接服务所有请求（想想 TLS 安全修复、负载平衡、故障转移等）。我的两分钱。

# android - 如何动态更改子布局

> ID：12993418
> 
> 赞同：0
> 
> 时间：2012-10-20T22:55:53.257
> 
> 标签：android, android-layout

我是 android 的新手，但由于单击按钮，我想更改布局的内容，即在另一个布局内。

```
-----------------------------
| Button |  Button | Button |
-----------------------------
|                           |
|  Layout that changes      |
|        dynamically        |
|                           |
|                           |
------------------------------ 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T23:04:04.190

获取更改布局的参考：

```
LinearLayout changingLayout = (LinearLayout)findViewById(R.id.changing_layout); 
```

然后获取它的布局参数：

```
LinearLayout.LayoutParams lp = (LinearLayout.LayoutParams)changingLayout.getLayoutParams(); 
```

然后更改您希望的任何参数，例如：

```
lp.setMargins(newLeft,newTop,newRight,newBottom); 
```

最后：

```
changingLayout.setLayoutParams(lp); 
```

如果您想更改此布局包含的可见视图，我建议：

```
view.setVisibility(View.VISIBLE); 
```

和：

```
view.setVisibility(View.GONE); 
```

# json.net - Noda Time Instance 值未正确反序列化

> ID：12993426
> 
> 赞同：5
> 
> 时间：2012-10-20T22:58:49.053
> 
> 标签：json.net, ravendb, nodatime

我目前正在使用 RavenDB 来存储一个使用 Noda Time 的 Instant 类来存储日期的对象。

RavenDb 将值存储为

“到达时间”：{“滴答声”：13507658019037497 }，

但是当查询对象时，它始终为空，并在 unix 纪元时间开始时开始。

我曾尝试使用 JsonConvert 属性，但读取器始终为 Instant 类型返回空值。此外，如果我使用多个属性，它只指第一个。

我应该在 RavenDb 中使用 noda 时间还是只使用常规日期时间？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T04:43:11.837

**使用 RavenDB 2.5**

如果您能够使用 RavenDB 2.5，那么您可以拥有完整的 Noda Time 支持并在您的域实体中使用 Noda Time 类型。您将需要[RavenDB 的 Noda Time 扩展](https://github.com/mj1856/RavenDB-NodaTime)。

**使用 RavenDB 2.0**

您最好*不要*在域实体中使用 Noda Time。相反，请使用内置类型，例如`DateTimeOffset`,`DateTime`和`TimeSpan`.

您可以在应用程序逻辑中使用 Noda Time，但不能在持久层中使用。Noda Time 中的`Instant.ToDateTimeOffset()`and方法非常有用，并且 RavenDB 与值`Instant.FromDateTimeOffset()`配合得很好。`DateTimeOffset`它以 ISO8601 格式存储它们，并在索引期间正确转换为 UTC 时间。这意味着您可以查询`DateTimeOffset`值的索引而无需考虑偏移量转换。

# objective-c - 自定义音频播放库和系统范围的音频播放器

> ID：12993429
> 
> 赞同：2
> 
> 时间：2012-10-20T22:59:03.860
> 
> 标签：objective-c, ios, c, xcode

我用 C 语言为音频文件（即 MP3、OGG）编写了一个自定义播放库。它有一些专有技术，我想将数据包逐个应用于音频。

我想使用这个 C 库播放音乐文件，但我想使用 iOS 音频播放器在后台播放音频。我已将`info.plist`文件设置为具有`Required Background Mode`of `App plays audio`，但我不确定如何让我的 C 播放库利用此功能。

停！

# c# - 保存对象的 TreeView

> ID：12993430
> 
> 赞同：0
> 
> 时间：2012-10-20T22:59:07.260
> 
> 标签：c#, winforms, treeview

有没有办法`TreeView`保持`Objects`而不是简单`string`？`ListBox`一个函数怎么类似？

或者是否有一个与 a 明显相似的控件`TreeView`能够持有 a `Object`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T23:07:54.963

如果需要在 TreeNode 中保存对象，可以使用 Tag 属性。

```
TreeNode node;
node.Tag = myObject; 
```

这将包含一个您可以随时检索的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T23:07:46.337

您可以创建`TreeNode`，将其文本设置为您想要的任何内容，将对象分配给`Tag`属性并将其添加到`TreeView`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T23:24:48.663

您还可以创建一个带有属性的 TreeNode 子类来保存您的对象。这是一个通用版本：

```
public class MyTreeNode<T>:TreeNode {
    private T data;

    public T Data {
        get {
            return data;
        }
        set {
            data = value;
            Text = data.ToString();
        }
    }
} 
```

In this case I'm also setting the TreeNode's text when the data value is set, though more code would be required if you were changing the stored object's state and wanted the TreeNode's Text to reflect that.

# python - 寻找相机矩阵的平移

> ID：12993432
> 
> 赞同：3
> 
> 时间：2012-10-20T22:59:48.280
> 
> 标签：python, camera, computer-vision, translation, linear-algebra

关于计算机视觉的另一个问题。

相机矩阵（也称为投影矩阵）通过以下关系将 3D 点**X**（例如在现实世界中）映射到图像点**x （例如在照片中）：**

```
l **x** = P **X** 
```

P 描述了相机的一些外部和内部特性（它的方向、位置和投影属性）。当我们提到投影属性时，我们使用校准矩阵 K。同样，R 表示相机的旋转，t 表示它的平移，因此我们可以将 P 写为：

```
P = K [ R | t ] 
```

[ R | t ] 表示矩阵 R 和 t 的串联。

```
R  is a matrix 3 X 3
t is a vector 3 X 1 
K is a matrix 3 X 3
[R | t ] is a matrix 3 X 4
As a consequence, P is a matrix 3 X 4 
```

好了，介绍够了。我想找到相机矩阵P的翻译。根据Computer Vision with Python一书中的代码，可以找到这样的：

```
def rotation_matrix(a):
    """ Creates a 3D rotation matrix for rotation
    around the axis of the vector a. """
    a = array(a).astype('float')
    R = eye(4)
    R[:3,:3] = linalg.expm([[0,-a[2],a[1]],[a[2],0,-a[0]],[-a[1],a[0],0]])
    return R

tmp = rotation_matrix([0,0,1])[:3,:3]
Rt = hstack((tmp,array([[50],[40],[30]])))
P = dot(K, Rt)
K, R = linalg.rq(P[:,:3])

# This part gets rid of some ambiguity in the solutions of K and R
T = diag(sign(diag(K)))
if linalg.det(T) < 0:
    T[1,1] *= -1
    K = dot(K, T)
    R = dot(T, R) # T is its own inverse

t = dot(linalg.inv(K), P[:,3]) 
```

代码是自包含的。这`Rt`就是矩阵`[R | t]`。`P`像往常一样计算并执行 RQ 分解。但是，我不明白那部分。为什么我们只取前 3 列？`K^{-1}`然后我们得到平移向量作为P 和前 3 列的点积。为什么？我还没有找到理由，但也许这是我明显遗漏的东西。

顺便说一句，代码似乎有点不对劲。当我运行它时，我得到一个翻译向量`[ 50\. -40\. 30.]`，而不是`array([[50],[40],[30]])`我们用作输入的那个。我们应该得到完全相同的结果。我不知道这是否是由于旋转矩阵。我也将不胜感激任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T00:43:21.557

您将平移向量计算为`inv(K)`和**的第 4 列`P`**的乘积。请注意，在您的代码中它说

```
t = dot(linalg.inv(K), P[:,3]) 
```

投影矩阵的第四列在哪里`P[:,3]`，因为索引从 0 开始。这意味着返回`t`是预期的，因为第四列也是`P = [KR | Kt]`如此`Kt`。`inv(K) * Kt = t`

您可以再次将 RQ 分解`P[:,:3]`为校准矩阵`K`和旋转矩阵，因为校准矩阵是上三角矩阵，而旋转矩阵是正交矩阵。`R``P = [KR | Kt]`

至于为什么你得到的翻译向量与你预期的不同，我认为这可能是因为[QR 分解](http://en.wikipedia.org/wiki/QR_decomposition)通常不是唯一的。`R`根据维基百科，只有当我们要求所有对角线元素都是正数时，它们才是唯一的。在您的情况下，这`R`是上三角矩阵`K`。

如果你的矩阵`K`在对角线上的任何地方都有一个负元素，你可能会`K`从 QR 分解中得到一个不同的（也许只有一个符号不同）。这意味着您不会得到`t`预期的回报。

# php - PHP/MYSQL 中基于 DATE 的最佳选择方式

> ID：12993434
> 
> 赞同：7
> 
> 时间：2012-10-20T23:00:16.790
> 
> 标签：php, mysql, date

我有一个名为“entry_date”的列 DATETIME 的数据库表，例如...

```
ID  entry_date
1   2012-10-13
2   2012-10-14
3   2012-10-15
4   2012-10-20
5   2012-10-20
6   2012-10-21 
```

在 PHP/MYSQL 中基于 DATE 回显结果的最佳方法是什么，所以我只得到本周的结果，所以 2012-10-15 > 2012-10-21，但显然我不能只编码因为每天都在变化:) 那么你将如何在 php 中做到这一点，所以明天本周的条件将是 2012-10-16 > 2012-10-22

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-20T23:12:24.887

今天，使用

```
where date(`entry_date`) = curdate() 
```

这个月，

```
where month(`entry_date`) = month(curdate()) 
and  year(`entry_date`) = year(curdate()) 
```

本周

```
WHERE `entry_date` 
BETWEEN (CURDATE() - Interval DAYOFWEEK(CURDATE()) day) 
AND (CURDATE() - Interval DAYOFWEEK(CURDATE()) day + Interval 1 week) 
```

以上查询有助于理解。但从性能的角度来看并不好。见下面修改的一个。它要好得多。

```
SET @s:=(CURDATE() - Interval DAYOFWEEK(CURDATE()) day)
SET @e:=(CURDATE() - Interval DAYOFWEEK(CURDATE()) day + Interval 1 week)
SELECT ....  WHERE `entry_date` BETWEEN @s AND @e 
```

这里 DAYOFWEEK 函数返回一个从 1=Sunday 开始的整数。所以你的星期将被算作星期六作为开始日期。如果你想星期一添加`+ Interval 2 day`间隔。

也可以简化为以下。但它不支持任何一天作为一周的第一天。所以它不能移植到所有文化中。

```
where yearweek(`entry_date`) = yearweek(curdate()) 
```

# c - 为什么常量存储在 C 内存映射的文本段中？

> ID：12993435
> 
> 赞同：3
> 
> 时间：2012-10-20T23:00:18.290
> 
> 标签：c, linux, memory, memory-management

您好请考虑以下在 Linux 机器（64 位）上使用 gcc 编译的代码片段以及相应的内存映射

```
#include <stdio.h>

int global = 2;

int main(void)
{
    int local = 0;

    return 0;
}

text       data     bss     dec     hex filename

1092        500      16    1608     648 mem 
```

这里因为有一个全局变量初始化为 2 。它被存储在数据段中考虑将其设为 const 的情况如下所示

```
#include <stdio.h>

int const global = 2;

int main(void)
{
    int local = 0;

    return 0;
}

text       data     bss     dec     hex filename
1096        496      16    1608     648 mem 
```

这里全局变量从数据段移动到文本段。

为什么它从数据移动到文本段？

既然数据段分为读区和读写区，那应该是存放在读区的数据吧？

在代码中间初始化的未初始化全局变量会发生什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-20T23:33:08.073

在现代系统上，常量*位于*对象文件的一部分中，为只读数据保留。该部分在默认模式下通过命令与“文本”（程序代码）部分混为一谈`size`，但您可以让它为您提供更多详细信息：

```
$ size test.o  # compiled from the code in the question
   text    data     bss     dec     hex filename
     58       0       0      58      3a test.o

$ size -A test.o
test.o  :
section           size   addr
.text                6      0
.data                0      0
.bss                 0      0
.rodata              4      0
.comment            29      0
.note.GNU-stack      0      0
.eh_frame           48      0
Total               87 
```

看看第一个命令产生的“文本”数字如何是第二个问题产生的`.text`、`.rodata`和`.eh_frame`数字的总和？

您可以通过以下命令判断常量在`.rodata`而不是：`.text``objdump`

```
$ objdump -t test.o | grep -w global
0000000000000000 g     O .rodata    0000000000000004 global 
```

（“g”代表全局，“O”代表“对象”，而“F”代表函数。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T23:17:28.557

文本段是只读的，因此通过将常量放在文本段中，编译器可以确保它是真正的常量。它必须存储在某个地方，因为它被声明为其他目标文件可以访问，因此选择是数据和文本段。

如果它是一个静态变量，编译器可能会消除它，因为它未被使用，无论是否为常量。如果它是静态且恒定的，编译器可能会消除它，以便在它生成的代码中使用它的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T23:03:43.863

我要回到我以前的编辑。我相信，因为它永远不能改变它只是一个编译器优化，因为它们不能改变，所以根本不将常量存储在数据段中。

# ruby-on-rails - RAILS 3.1 - 未知属性：构建时的 id

> ID：12993436
> 
> 赞同：2
> 
> 时间：2012-10-20T23:00:29.553
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

当我想将 build 用于多对多关联时，我的控制器中出现以下错误：

**未知属性：fte_report_option_id**

在我的控制器中：

> def edit_clients_reports
> @fte_report_option = FteReportOption.find(params[:id])
> **@fte_report_option.fte_report_client_options.build**
> end

在我的第一个模型中，我有：

> 类 FteReportOption < ActiveRecord::Base
> 
> has_many :fte_report_client_options, :dependent => :destroy
> has_many :clients, :through => :fte_report_client_options
> 结束

在我的第二个模型中：

> 类 FteReportClientOption < ActiveRecord::Base
> self.primary_key = "client_report_id"
> 
> belongs_to :fte_report_option, :foreign_key => :option_id, :class_name => "FteReportOption" belongs_to :client, :foreign_key => :client_id, :class_name => "Client"
> end

我的第三个模型：

> 类客户端 < ActiveRecord::Base
> set_primary_key "client_id"
> 
> has_many :fte_report_client_options, :dependent => :destroy
> has_many :fte_report_options, :through => :fte_report_client_options

在我的连接表迁移中，我有：

> create_table :fte_report_client_options, :primary_key => "client_report_id", :force => true do |t|
> t.integer :option_id
> t.integer :client_id
> t.timestamps
> 结束

有谁知道发生了什么？

Thanks for your help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T00:22:41.577

In your migration, change line:

```
t.integer :option_id 
```

to:

```
t.integer :fte_report_option_id 
```

# ios - 沿 x 轴来回移动 UIAnimation

> ID：12993441
> 
> 赞同：1
> 
> 时间：2012-10-20T23:00:50.083
> 
> 标签：ios

我可以让 UIImage 向右移动一点到 x 轴并回到原始位置。

```
 -(void) uiview_anim
 {

[UIView beginAnimations:@"Move" context:nil];
[UIView setAnimationDuration:3];
[UIView setAnimationBeginsFromCurrentState:YES];
CGPoint a;

     a.x=finger.frame.origin.x;

a.x=a.x+10;              

finger.center=a;

[UIView commitAnimations];  
} 
```

它也会移动 Y 方向，但我没有具体说明。我需要它在移动后迅速回到原来的位置。Finger 是我正在处理的 UIImageView。

# python - 如何使用 GtkStyleContext 获取小部件的 Gtk3 选择颜色

> ID：12993442
> 
> 赞同：0
> 
> 时间：2012-10-20T23:01:04.937
> 
> 标签：python, gtk, gio

我正在尝试在 python 中获取 Gtk3 IconView 的选择颜色，但我很困惑如何解释现有的 C++ 文档以及它与 Python 的关系。

我目前的python代码如下：

```
color = self.iconview.get_style().bg[Gtk.StateType.SELECTED] 
```

这在 Ubuntu 12.04 中可以正常工作 - 我认为 Gnome/Gtk 3.2。

但是这里的文档说`get_style`自 3.0 以来已弃用

*   [http://developer.gnome.org/gtk3/stable/GtkWidget.html#gtk-widget-get-style](http://developer.gnome.org/gtk3/stable/GtkWidget.html#gtk-widget-get-style)

在使用最新 GTK 的 Ubuntu 12.10 中，上述方法不起作用 - 我收到错误消息：

```
CRITICAL **: StackOverflow protection.  Can't copy array element into GIArgument 
```

该文件说我应该使用 GtkStyleContext - 但是如何？

谁能给我一个具体的python示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:00:13.210

在 C 中：

```
GdkRGBA color;
GtkStyleContext *style =
    gtk_widget_get_style_context(iconview);
gtk_style_context_get_background_color
    (style, GTK_STATE_FLAG_SELECTED, &color); 
```

fossfreedom 的 Python 翻译：

```
context = self.iconview.get_style_context()
color = context.get_background_color(Gtk.StateFlags.SELECTED) 
```

似乎`GtkStyle`gtk2 中的结构被简单地替换为`GtkStyleContext`gtk3 中更现代的类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-30T17:41:54.957

新的答案是“你没有”。不再需要单一的背景颜色。

根据[https://developer.gnome.org/gtk3/stable/GtkStyleContext.html#gtk-style-context-get-background-color](https://developer.gnome.org/gtk3/stable/GtkStyleContext.html#gtk-style-context-get-background-color)的文档：

“这个功能远没有看起来那么有用，它不应该在新编写的代码中使用。CSS没有“背景颜色”的概念，因为背景可以是图像，或渐变，或任何其他图案，包括纯色颜色。”

# php - PHP cURL 无信号

> ID：12993447
> 
> 赞同：1
> 
> 时间：2012-10-20T23:01:30.133
> 
> 标签：php, curl

我有一个简单的 cURL 脚本，它工作得很好。但我很好奇如何检测坏网址。“坏”是指不存在的 URL，或者如果我调用的服务器关闭了一段时间，或者我犯了错误并输入了错误的 URL。（只是例子）

这是我到目前为止所拥有的：

```
<?php

$url = 'http://someurl_or_ip.com/some_file.php';
$post_fields = "type=whatever";
$post_fields .= "&first=".$first;
$post_fields .= "&last=".$last;

$ch = curl_init($url); // create a new cURL resource 
curl_setopt($ch, CURLOPT_POST,1); 
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_fields); 
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST,  2); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);   
curl_setopt($ch, CURLOPT_TIMEOUT, 1800);  

// Execute the request. 
$raw_response = curl_exec($ch); 
$succeeded  = curl_errno($ch) == 0 ? true : false; 

echo $raw_response;

?> 
```

通常 $raw_response 是我可以解析并用于其他事情的东西，比如我想如何向用户显示数据。

我只是用一个不存在的文件（但到一个有效的域）替换了 $url，然后我得到“未找到......请求的 URL......在此服务器上找不到......”

这是否意味着我需要解析这个 apache 服务器消息才能知道它不是一个好的 URL？或者 cURL 是否有办法通过标头信息来检测它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T23:07:18.217

您可以查看标头中的 HTTP 响应代码，对于未找到的文件，它将是 404：

```
$http = curl_init($url);
$result = curl_exec($http);
$http_status = curl_getinfo($http, CURLINFO_HTTP_CODE);
curl_close($http);
echo $http_status; 
```

如果服务器不可用，您显然根本不会得到服务器的响应，因此没有 HTTP 响应代码。在这种情况下`curl_exec()`会返回 false，在这种情况下您可以处理错误：

```
if(curl_exec($ch) !== false) {
    // Success
} else {
    // Error
    $error_str = curl_error($ch);
    $error_num = curl_errno($ch);
} 
```

# java - Java 下载文件（原名）

> ID：12993449
> 
> 赞同：0
> 
> 时间：2012-10-20T23:01:54.487
> 
> 标签：java

我想下载到从 URL 返回的确切文件名。URL 不包含文件名，它会重定向，因此不建议进行字符串操作。

我需要保持相同的文件名和扩展名，就像网络浏览器下载文件一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T23:05:30.643

查看响应的标题。将有一个如下所示的标题：

```
Content-Disposition: attachment; filename="thefilename.ext" 
```

# c++ - C ++ 11：std :: thread池化？

> ID：12993451
> 
> 赞同：47
> 
> 时间：2012-10-20T23:02:35.840
> 
> 标签：c++, multithreading, c++11, stdthread

在 C++03 中，我将 pthread 与自建线程池一起使用，该线程池始终保持几个线程运行（因为`pthread_create`速度很慢），这样我就能够为小任务启动线程，而无需考虑性能问题。

现在，在 C++11 中，我们有`std::thread`. 我想标准没有说明具体的实现，所以我的问题是关于标准库的实现。他们通常会选择构建`std::thread`s 便宜（例如不调用`pthread_create`posix）的池化方法，还是`std::thread`只是一个包装器？

换句话说，在 C++11 中是否仍然推荐使用线程池，还是应该`std::thread`在需要时创建一个线程池并将性能留给标准库？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-20T23:36:54.557

通常，`std::thread`应该是底层系统原语的最小包装。例如，如果您在`pthread`平台上，您可以使用以下程序测试，无论您创建多少线程，它们都是使用唯一`pthread_t`id 创建的（这意味着它们是动态创建的，而不是从线程池中借用的):

```
#include <assert.h>
#include <mutex>
#include <set>
#include <thread>
#include <vector>

#include <pthread.h>

int main() {
  std::vector<std::thread> workers;
  std::set<long long> thread_ids;
  std::mutex m;
  const int n = 1024;

  for (int i = 0; i < n; ++i) {
    workers.push_back(std::thread([&] {
      std::lock_guard<std::mutex> lock(m);
      thread_ids.insert(pthread_self());
    }));
  }
  for (auto& worker : workers) {
    worker.join();
  }
  assert(thread_ids.size() == n);

  return 0;
} 
```

所以线程池仍然很有意义。也就是说，我看过一个视频，其中 C++ 委员会成员讨论了有关`std::async`(IIRC) 的线程池，但我现在找不到它。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-21T00:38:57.463

A`std::thread`是一个执行线程。时期。它来自哪里，如何到达那里，是否有一些“实际”线程池等，都与标准无关。只要它的行为像一个线程，它就可以是一个`std::thread`.

现在，很有可能这`std::thread`是一个真实的操作系统线程，而不是从线程池或其他任何东西中提取的东西。但是 C++11 理论上确实允许 a`std::thread`被实现为从池中提取的东西。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-20T23:15:31.843

`std::thread`就抽象成本而言，它应该非常便宜，它是低级的东西。据我了解，标准库实现可能只是尽可能紧密地包装底层操作系统机制，因此您可以假设线程创建的开销是相似或等效的。

我不知道任何具体的实现，但这是我从阅读*C++ Concurrency In Action*中获得的二手理解，该标准建议他们使用最有效的实用方法。作者当然似乎认为与 DIY 相比，成本或多或少可以忽略不计。

该库在概念上类似于 Boost，所以我想使用 Boost 实现得出一些结论不会太牵强。

基本上，我认为您的问题没有直接的答案，因为它没有具体说明。虽然在我看来，我们将更有可能看到非常薄的包装器实现，但我认为如果线程池提供了效率优势，我认为库编写者不会被限制使用线程池。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-23T11:25:31.253

首先，正如您所提到的，C++ 标准基本上没有指定库实现。但是 C++ 标准库的实现者*应该*遵守“as-if”规则。

例如，这意味着无论是底层 API 的瘦包装器还是线程池等高效实现，构造函数的行为都`std::thread`应该***像创建新线程一样。***（这里，“线程”是指 C++11 规范中的抽​​象*执行线程*，而不是具体的 OS 原生线程）

关于线程池的实现；

*   C++ 编译器和库应正确处理 C++ 线程特定资源（即`thread_local`变量），并且它们应在运行时协同工作。
*   即使满足上述条件，似乎也不可能与操作系统特定的线程资源（Windows 的 TLS、pthread 的 TSS 等）协同工作。

所以，我假设大多数`std::thread`实现只是底层线程 API 的包装。

# vb.net - Vb.net 获取工作日名称

> ID：12993459
> 
> 赞同：5
> 
> 时间：2012-10-20T23:04:14.217
> 
> 标签：vb.net

今天是 21.10.2012。现在是星期天。
但我的 VB.NET 认为不同：

```
Debug.Print("Weekday for the date '21.10.2012.'is " & WeekdayName(Weekday("21.10.2012.")))
Debug.Print("Weekday for the date '21/10/2012'is " & WeekdayName(Weekday("21/10/2012")))
Debug.Print("Weekday for the date '" & DateTime.Now.Date & "'is " & WeekdayName(Weekday(DateTime.Now.Date))) 
```

所有这 3 次检查都给了我：工作日名称的“星期一”！
如何获得正确的工作日名称？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-20T23:12:49.627

这是获取给定日期的工作日名称的正确 .NET 方法：

```
Dim myCulture As System.Globalization.CultureInfo = Globalization.CultureInfo.CurrentCulture
Dim dayOfWeek As DayOfWeek = myCulture.Calendar.GetDayOfWeek(Date.Today)
' dayOfWeek.ToString() would return "Sunday" but it's an enum value,
' the correct dayname can be retrieved via DateTimeFormat.
' Following returns "Sonntag" for me since i'm in germany '
Dim dayName As String = myCulture.DateTimeFormat.GetDayName(dayOfWeek) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-05T11:02:35.480

```
 Label1.Text = Date.Today.ToString("dddd") 
```

# c++ - 为什么即使对于这个简单的程序使用 -ldl，我也会得到“对 `dladdr' 的未定义引用”？

> ID：12993460
> 
> 赞同：32
> 
> 时间：2012-10-20T23:05:05.667
> 
> 标签：c++, ubuntu, compilation, linker, llvm

我正在[学习 LLVM Tutorial](http://llvm.org/releases/2.6/docs/tutorial/JITTutorial1.html)，但我在编译时遇到了问题。我写了一个最小的例子来重现这个问题：

```
#include "llvm/Module.h"
#include "llvm/LLVMContext.h"

int main(int argc, char **argv) {
    llvm::Module *module = new llvm::Module("test", llvm::getGlobalContext());
    return 0;
} 
```

当我尝试编译时，我得到一堆“未定义的引用”错误：

```
clang++ `llvm-config --cxxflags`   -c -o test.o test.cpp
clang++  test.o  `llvm-config --ldflags --libs core` -o test
/usr/lib/llvm-2.9/lib/libLLVMSupport.a(Signals.o): In function `PrintStackTrace(void*)':
(.text+0x6c): undefined reference to `dladdr'
/usr/lib/llvm-2.9/lib/libLLVMSupport.a(Signals.o): In function `PrintStackTrace(void*)':
(.text+0x1f6): undefined reference to `dladdr'
/usr/lib/llvm-2.9/lib/libLLVMSupport.a(Mutex.o): In function `llvm::sys::MutexImpl::MutexImpl(bool)':
(.text+0x53): undefined reference to `pthread_mutexattr_init'
/usr/lib/llvm-2.9/lib/libLLVMSupport.a(Mutex.o): In function `llvm::sys::MutexImpl::MutexImpl(bool)':
(.text+0x64): undefined reference to `pthread_mutexattr_settype'
/usr/lib/llvm-2.9/lib/libLLVMSupport.a(Mutex.o): In function `llvm::sys::MutexImpl::MutexImpl(bool)':
(.text+0x74): undefined reference to `pthread_mutexattr_setpshared'
/usr/lib/llvm-2.9/lib/libLLVMSupport.a(Mutex.o): In function `llvm::sys::MutexImpl::MutexImpl(bool)':
(.text+0x88): undefined reference to `pthread_mutexattr_destroy'
/usr/lib/llvm-2.9/lib/libLLVMSupport.a(Mutex.o): In function `llvm::sys::MutexImpl::tryacquire()':
(.text+0x179): undefined reference to `pthread_mutex_trylock'
/usr/lib/llvm-2.9/lib/libLLVMSupport.a(RWMutex.o): In function `llvm::sys::RWMutexImpl::RWMutexImpl()':
(.text+0x3e): undefined reference to `pthread_rwlock_init'
/usr/lib/llvm-2.9/lib/libLLVMSupport.a(RWMutex.o): In function `llvm::sys::RWMutexImpl::~RWMutexImpl()':
(.text+0x80): undefined reference to `pthread_rwlock_destroy'
/usr/lib/llvm-2.9/lib/libLLVMSupport.a(RWMutex.o): In function `llvm::sys::RWMutexImpl::reader_acquire()':
(.text+0xb9): undefined reference to `pthread_rwlock_rdlock'
/usr/lib/llvm-2.9/lib/libLLVMSupport.a(RWMutex.o): In function `llvm::sys::RWMutexImpl::reader_release()':
(.text+0xe9): undefined reference to `pthread_rwlock_unlock'
/usr/lib/llvm-2.9/lib/libLLVMSupport.a(RWMutex.o): In function `llvm::sys::RWMutexImpl::writer_acquire()':
(.text+0x119): undefined reference to `pthread_rwlock_wrlock'
/usr/lib/llvm-2.9/lib/libLLVMSupport.a(RWMutex.o): In function `llvm::sys::RWMutexImpl::writer_release()':
(.text+0x149): undefined reference to `pthread_rwlock_unlock'
/usr/lib/llvm-2.9/lib/libLLVMSupport.a(Threading.o): In function `llvm::llvm_execute_on_thread(void (*)(void*), void*, unsigned int)':
(.text+0x1cc): undefined reference to `pthread_create'
/usr/lib/llvm-2.9/lib/libLLVMSupport.a(Threading.o): In function `llvm::llvm_execute_on_thread(void (*)(void*), void*, unsigned int)':
(.text+0x208): undefined reference to `pthread_attr_setstacksize'
/usr/lib/llvm-2.9/lib/libLLVMSupport.a(Threading.o): In function `llvm::llvm_execute_on_thread(void (*)(void*), void*, unsigned int)':
(.text+0x228): undefined reference to `pthread_join'
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [test] Error 1 
```

如果我查看 dladdr 的手册页，它说我需要链接到`-ldl`. 但我已经这样做了`llvm-config`：

```
$ llvm-config --ldflags --libs core
-L/usr/lib/llvm-2.9/lib  -lpthread -lffi -ldl -lm 
-lLLVMCore -lLLVMSupport -L/usr/lib/llvm-2.9/lib 
```

此外，`-ldl`以正确的顺序出现（即，在`.o`需要符号的文件之后）。

我对调试此问题的下一步感到茫然。谁能指出我正确的方向？我在 Ubuntu 12.04 上运行 LVVM 2.9-7。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-20T23:15:17.790

需要符号的库包含在 中`-lLLVMSupport`，因此`-ldl`必须在 之后`-lLLVMSupport`。我改变了这个：

```
`llvm-config --ldflags --libs core` 
```

对此：

```
`llvm-config --libs core` `llvm-config --ldflags` 
```

并且链接器是成功的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-04-26T18:00:58.447

在浏览 llvm-3.4 的 LLVM 教程时，我遇到了同样的问题，不幸的是，Matthew 的回答没有帮助。为了将来参考，我发布了一个新的答案，其中包含我遇到的问题以及我如何解决它。

我已经在 中安装了 LLVM `~/dev/llvm/install`，所以我使用的是教程中给出的命令，但替换`llvm-config`为我的 llvm 安装路径：

```
clang++ -g -O3 toy.cpp `../llvm/install/bin/llvm-config --cppflags --ldflags --libs core` -o toy 
```

我有很多错误，第一个是：

```
filipe@filipe-Kubuntu:~/dev/kaleidoscope$ clang++ -g -O3 toy.cpp `../llvm/install/bin/llvm-config --cppflags --ldflags --libs core` -o toy
In file included from toy.cpp:1:
In file included from /home/filipe/dev/llvm/install/include/llvm/IR/Verifier.h:24:
/home/filipe/dev/llvm/install/include/llvm/ADT/StringRef.h:342:14: error: no template named 'enable_if' in namespace 'std'; did you mean
      '__gnu_cxx::__enable_if'?
    typename std::enable_if<std::numeric_limits<T>::is_signed, bool>::type
             ^~~~~~~~~~~~~~
             __gnu_cxx::__enable_if
/usr/bin/../lib/gcc/x86_64-linux-gnu/4.8/../../../../include/c++/4.8/ext/type_traits.h:43:12: note: '__gnu_cxx::__enable_if' declared here
    struct __enable_if 
           ^ 
```

这是因为此时 LLVM 需要 C++11 编译器；添加`-std=c++11`到`clang++`选项解决了它。但后来我得到：

```
filipe@filipe-Kubuntu:~/dev/kaleidoscope$ clang++ -std=c++11 -g -O3 toy.cpp `../llvm/install/bin/llvm-config --cppflags --ldflags --libs core` -o toy
/home/filipe/dev/llvm/install/lib/libLLVMSupport.a(Process.o): In function `terminalHasColors(int)':
/home/filipe/dev/llvm/llvm/lib/Support/Unix/Process.inc:273: undefined reference to `setupterm'
/home/filipe/dev/llvm/llvm/lib/Support/Unix/Process.inc:291: undefined reference to `tigetnum'
/home/filipe/dev/llvm/llvm/lib/Support/Unix/Process.inc:295: undefined reference to `set_curterm'
/home/filipe/dev/llvm/llvm/lib/Support/Unix/Process.inc:296: undefined reference to `del_curterm'
/home/filipe/dev/llvm/install/lib/libLLVMSupport.a(Signals.o): In function `llvm::sys::PrintStackTrace(_IO_FILE*)':
/home/filipe/dev/llvm/llvm/lib/Support/Unix/Signals.inc:278: undefined reference to `dladdr'
/home/filipe/dev/llvm/llvm/lib/Support/Unix/Signals.inc:290: undefined reference to `dladdr'
/home/filipe/dev/llvm/install/lib/libLLVMSupport.a(Mutex.o): In function `MutexImpl':
/home/filipe/dev/llvm/llvm/lib/Support/Mutex.cpp:53: undefined reference to `pthread_mutexattr_init'
/home/filipe/dev/llvm/llvm/lib/Support/Mutex.cpp:59: undefined reference to `pthread_mutexattr_settype'
/home/filipe/dev/llvm/llvm/lib/Support/Mutex.cpp:67: undefined reference to `pthread_mutexattr_destroy'
/home/filipe/dev/llvm/install/lib/libLLVMSupport.a(Mutex.o): In function `llvm::sys::MutexImpl::tryacquire()':
/home/filipe/dev/llvm/llvm/lib/Support/Mutex.cpp:109: undefined reference to `pthread_mutex_trylock'
/home/filipe/dev/llvm/install/lib/libLLVMSupport.a(RWMutex.o): In function `RWMutexImpl':
/home/filipe/dev/llvm/llvm/lib/Support/RWMutex.cpp:59: undefined reference to `pthread_rwlock_init'
/home/filipe/dev/llvm/install/lib/libLLVMSupport.a(RWMutex.o): In function `~RWMutexImpl':
/home/filipe/dev/llvm/llvm/lib/Support/RWMutex.cpp:72: undefined reference to `pthread_rwlock_destroy'
/home/filipe/dev/llvm/install/lib/libLLVMSupport.a(RWMutex.o): In function `llvm::sys::RWMutexImpl::reader_acquire()':
/home/filipe/dev/llvm/llvm/lib/Support/RWMutex.cpp:82: undefined reference to `pthread_rwlock_rdlock'
/home/filipe/dev/llvm/install/lib/libLLVMSupport.a(RWMutex.o): In function `llvm::sys::RWMutexImpl::reader_release()':
/home/filipe/dev/llvm/llvm/lib/Support/RWMutex.cpp:92: undefined reference to `pthread_rwlock_unlock'
/home/filipe/dev/llvm/install/lib/libLLVMSupport.a(RWMutex.o): In function `llvm::sys::RWMutexImpl::writer_acquire()':
/home/filipe/dev/llvm/llvm/lib/Support/RWMutex.cpp:102: undefined reference to `pthread_rwlock_wrlock'
/home/filipe/dev/llvm/install/lib/libLLVMSupport.a(RWMutex.o): In function `llvm::sys::RWMutexImpl::writer_release()':
/home/filipe/dev/llvm/llvm/lib/Support/RWMutex.cpp:112: undefined reference to `pthread_rwlock_unlock'
/home/filipe/dev/llvm/install/lib/libLLVMSupport.a(ThreadLocal.o): In function `ThreadLocalImpl':
/home/filipe/dev/llvm/llvm/lib/Support/ThreadLocal.cpp:56: undefined reference to `pthread_key_create'
/home/filipe/dev/llvm/install/lib/libLLVMSupport.a(ThreadLocal.o): In function `~ThreadLocalImpl':
/home/filipe/dev/llvm/llvm/lib/Support/ThreadLocal.cpp:63: undefined reference to `pthread_key_delete'
/home/filipe/dev/llvm/install/lib/libLLVMSupport.a(ThreadLocal.o): In function `llvm::sys::ThreadLocalImpl::setInstance(void const*)':
/home/filipe/dev/llvm/llvm/lib/Support/ThreadLocal.cpp:70: undefined reference to `pthread_setspecific'
/home/filipe/dev/llvm/install/lib/libLLVMSupport.a(ThreadLocal.o): In function `llvm::sys::ThreadLocalImpl::getInstance()':
/home/filipe/dev/llvm/llvm/lib/Support/ThreadLocal.cpp:77: undefined reference to `pthread_getspecific'
/home/filipe/dev/llvm/install/lib/libLLVMSupport.a(Threading.o): In function `llvm::llvm_execute_on_thread(void (*)(void*), void*, unsigned int)':
/home/filipe/dev/llvm/llvm/lib/Support/Threading.cpp:91: undefined reference to `pthread_attr_setstacksize'
/home/filipe/dev/llvm/llvm/lib/Support/Threading.cpp:96: undefined reference to `pthread_create'
/home/filipe/dev/llvm/llvm/lib/Support/Threading.cpp:100: undefined reference to `pthread_join'
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

与原始问题的作者发生的情况相反，我注意到`llvm-config`甚至没有链接到任何系统库。然后我想我需要使用`--system-libs`才能将所需的系统库包含到链接过程中：

```
clang++ -std=c++11 -g -O3 toy.cpp `../llvm/install/bin/llvm-config --cppflags --libs core --ldflags --system-libs` -o toy 
```

始终放在`--system-libs`最后很重要，以便链接器引入所有缺少的依赖项。

使用 LLVM 3.4 和 Kubuntu 14.04 测试

# ios - 如何为 NSURLConnection 定义 NSMutableData 实例？

> ID：12993461
> 
> 赞同：0
> 
> 时间：2012-10-20T23:05:16.510
> 
> 标签：ios, ios6, nsurlconnection, nsmutabledata, nsurlconnectiondelegate

来自[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple_ref/doc/uid/20001836-BAJEAIEE](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple_ref/doc/uid/20001836-BAJEAIEE)

```
NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
if (theConnection) {
    // Create the NSMutableData to hold the received data.
    // receivedData is an instance variable declared elsewhere.
    receivedData = [[NSMutableData data] retain];
} else {
    // Inform the user that the connection failed.
} 
```

我是一个相对较新的 iOS6 程序员。首先，我认为ARC应该只是`receivedData = [NSMutableData data]`？

其次，我应该如何声明`receivedData`实例变量？我猜`@property (strong, nonatomic) NSMutableData *receivedData;`在标题和`@synthesize receivedData`实现中。

但是，我仍在尝试在 iOS6 中探索多线程和 ARC。财产声明应该是

```
@property (strong, nonatomic) NSMutableData *receivedData; 
```

要不就

```
@property (strong) NSMutableData *receivedData; 
```

在异步 NSURLConnection 的委托中接收到的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T23:21:36.263

您应该实现`NSURLConnectionDelegate`. 这就是您将获得数据的地方。例如，如果你想使用块，你可以使用[this](https://github.com/RuiAAPeres/NSURLConnection-Blocks)。`Atomic`保证即使多个线程正在访问 ivar 并对其进行更改，值也将始终存在。如果你有它，你会得到一些提升`nonatomic`。您的应用程序逻辑应该负责数据完整性，而不是 setter/getter 的合成方式。所以一般来说，应该是`nonatomic`。

> 首先，我认为使用 ARC 应该只是 receivedData = [NSMutableData data] ？

是的，够了。

# sql - 将数据库类型优化为紧凑型数据库 (SQLite)

> ID：12993462
> 
> 赞同：3
> 
> 时间：2012-10-20T23:05:23.070
> 
> 标签：sql, database, types, sqlite

我正在压缩数据库 ( `SQLite`)，并且我正在尝试优化我在架构中分配的数据类型的大小。我掌握的数据大致可以分为3类数字。他们是：

1.  `101010000`- 9 位数字
2.  `0`或`1`, - 只有一或零
3.  `13.4567`- 浮动类型。我只想在这里存储 13.45。

所有数字都将用于程序中的数学运算。我使用这个网站作为参考：[http ://www.sqlite.org/datatype3.html](http://www.sqlite.org/datatype3.html)

我想知道哪种数据类型的亲和性会给我最紧凑的数据库。我目前的数据库大小接近 40 GB！

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T03:41:24.960

在 SQLite 中，整数数据类型可以占用 1、2、4 或 8 个字节，具体取决于数据值有多大。布尔类型存储为整数 0 或 1，并且总是占用 1 个字节。REAL（浮点）数据需要 8 个字节来存储。如果您愿意将数据四舍五入为 2 位小数，您可能希望将浮点数据乘以 100 并将其存储为 4 字节整数值（并为每个值保存 4 个字节）。您提到的 9 个二进制数字应该需要 2 个字节来存储。

如何优化数据？有很多策略。如果您有很多布尔字段，您可能可以使用一个字节来存储最多 8 位。这应该可以让您将存储效率提高 8 倍。另一个好的策略是规范化您的数据：将其拆分为多个表。但是，这仅在您的数据模式允许这种拆分时才有效。

通常，如果索引过多，它们可能会显着增加磁盘上数据库的大小。正确的解决方案是使用 EXPLAIN 修改软件使用的实际 SQL 查询，找出并不真正需要的索引并删除它们。

最后，不要忘记使用 VACUUM FULL 可以使数据库占用尽可能小的磁盘空间，但运行它可能需要一段时间并且需要独占数据库锁。祝你好运！

# ios - 如何获得准确代表视图边界和转换的 CGRect？

> ID：12993464
> 
> 赞同：0
> 
> 时间：2012-10-20T23:05:34.503
> 
> 标签：ios, cocoa, cgaffinetransform, cgrect

如何获得 UIView 的转换后的矩形，包括在 .transform 属性中进行的平移和缩放？我试着这样做：

```
CGRect transformed = CGRectApplyAffineTransform(theview.frame, theview.transform); 
```

不行！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T23:21:11.607

您应该为此使用 UIView bounds 属性，即

```
CGRect trans_rect = CGRectApplyAffineTransform(view.bounds, view.transform); 
```

# python - Python - 当一个长时间运行的循环正在进行时，如何让一个线程在同一范围内定期“做某事”？

> ID：12993466
> 
> 赞同：0
> 
> 时间：2012-10-20T23:05:45.230
> 
> 标签：python, multithreading, lambda

假设我有一个循环需要一段时间才能完成，比如读取一个长文件。我如何让它在每个时间段`x`（毫秒？），我执行“一些代码”？

```
while inFile.readable():
    line = inFile.readline()
    print(line)   # I want to do this every few seconds 
```

作为练习，我想通过线程和 lambda 来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T23:09:38.987

您可以通过跟踪上次打印的时间来做到这一点：

```
last = time.time()
while inFile.readable():
    line = inFile.readLine()
    now = time.time()
    if now - last > 2: # seconds
        print("time up!")
        last = now 
```

如果您的文件读取时间超过两秒，则该循环将`time up!`每两秒打印一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T23:07:58.107

查看 APScheduler，它有一个非常简单的类似 cron 的界面，可以在特定的时间间隔内运行 python 代码。

[http://packages.python.org/APScheduler/](http://packages.python.org/APScheduler/)

我用它来为我的一个项目安排任务，如果您需要其他方式来存储作业，它非常稳定且经过测试并且很容易扩展。

嗯，既然我回到了你的问题，这对于你想要的东西来说有点矫枉过正，但我​​会留下它，因为它可能对其他人的其他类似情况有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T23:48:46.200

例如：

```
import thread, time

def takes_a_while():

    def print_status():
        while True:
            print i   # print current i every two seconds
            time.sleep(2)

    status_thread = thread.start_new_thread(print_status, ())
    for i in xrange(10000000):
        print '*',
        time.sleep(0.1)
    status_thread.exit()

takes_a_while() 
```

可以用装饰器或上下文做得更好，但你明白了。

# .net - 更新事务中的选定行

> ID：12993467
> 
> 赞同：0
> 
> 时间：2012-10-20T23:05:47.127
> 
> 标签：.net, sql, transactions, transactionscope

我有一个具有远程数据库（MsSql）和多个 Windows/Web 客户端的自动化项目。客户端应用程序检查并选择表上的合适行并将其标记为保留以对该行进行操作。

1.  如何在另一个客户选择同一行之前轻松获取价值并更新选定的行？我有什么选择？
2.  `TransactionScope`如果我想在事务块内执行多​​个 select-update 语句（针对不同的表），我可以用于此目的吗？

编辑：让我们想象一个电影票系统（我的有点复杂）。用户选择座位并购买车票。我想为这个用户预留两分钟的座位，以便有足够的时间购买。两分钟后，其他人也可以使用它。在更新行之前，我运行一个选择查询来找到第一个空座位。我的问题是关于同一用户的选择和更新语句之间的一点时间。我想阻止：User1 的 select 语句运行，当时 User2 在 User1 保留席位之前运行相同的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T23:22:52.233

由于您希望在锁定和执行实际操作之间进行用户输入，那么

```
update top (1) seats
set time_locked = getdate(), user_locked = <the site user>
output inserted.seat_id, inserted.time_locked, inserted.user_locked
where <your conditions> and time_locked is null 
```

在这种情况下，您不会在执行此操作之前启动事务，因为您想立即提交更改。您可以稍后打开交易，只要您锁定一行，甚至更晚。

如果您从事务中执行此操作，那么其他进程将等到您提交该事务，因此您将不会获得任何并发性。然后您将看到，一个进程正在运行，所有其他进程都在等待。

当您稍后回到锁定的行时，您验证 time_locked 仍然是非空的，并且锁定的用户是同一个用户：

```
update seats
set totally_taken = 1
where
  seat_id = <remembered seat id>
  and time_locked = <remembered time_locked>
  and user_locked = <remembered user_locked> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T23:10:55.700

如果您使用的是 SQL Server，您可以在您的选择中执行 ROWLOCK。

> SELECT * FROM Orders WITH ROWLOCK WHERE Status='Pending'

# java - 什么是 JavaScript 事件循环，它与 GWT 有什么关系？

> ID：12993482
> 
> 赞同：1
> 
> 时间：2012-10-20T23:08:26.100
> 
> 标签：java, javascript, gwt, event-loop

[我正在阅读开发 GWT 应用程序并阅读此](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsDelayed?hl=de)页面的摘录：

> 任何脚本如果在超过 10 秒左右没有将控制权返回给 JavaScript 主事件循环的情况下运行，则存在浏览器向用户弹出此对话框的风险......

这个*JavaScript 主事件循环*是 JS 构造、GWT 构造还是特定于浏览器的东西？它与客户端 GWT 应用程序有何关系？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T23:42:08.087

JavaScript 代码通常构造为一组事件处理程序，其中事件可以是用户单击链接、鼠标进入或离开特定组件、Ajax 请求的完成等。主事件循环是浏览器负责在这些事件发生时对它们进行排队并调用处理函数。浏览器通常在单个线程上执行所有事件处理程序，因此如果一个处理程序需要很长时间才能运行，它将使页面看起来没有响应，因为其他用户启动的事件无法及时处理。

# macos - MacOSX：在 10.8.x 下使用 [Easy]SIMBL 编写 Dock 插件？

> ID：12993483
> 
> 赞同：2
> 
> 时间：2012-10-20T23:08:40.023
> 
> 标签：macos, plugins, dock, simbl

我正在尝试使用 EasySIMBL 在 MacOSX 10.8.2 下编写 Dock 插件，但它似乎不起作用。

我在这里按照第 7.2 节中的说明进行操作：http: [//culer.net/wiki/moin.cgi/CocoaReverseEngineering](http://culater.net/wiki/moin.cgi/CocoaReverseEngineering)

我尝试了“com.apple.dock”和“com.apple.Dock”作为我的包标识符，但我的插件的“加载”方法仍然没有被调用。

有没有人使用 SIMBL（或 Lion/Mountain Lion 中的 EasySIMBL）获得与 Dock 配合使用的插件？如果是这样，您能否指出一些我可以用作起点的示例代码？...或者你能指导我一些关于编写基于 SIMBL 插件的 Dock 特定说明吗？

# xcode - #define 在目标构建设置的“用户定义”部分，在 xcode 编译代码时未定义

> ID：12993492
> 
> 赞同：0
> 
> 时间：2012-10-20T23:10:10.920
> 
> 标签：xcode, llvm, c-preprocessor, preprocessor-directive, user-defined

我有一个项目，使用当前版本的**Xcode**和**llvm**。
我正在做一个免费和付费版本的游戏，所以我设置了一个预处理器标志来做它。

对于我定义的付费版本目标`PAID_VERSION = 1` （在**Build Settings的“** **User-Defined** ”部分）

 **然而，当我编译时，`PAID_VERSION`不断出现未定义的问题。
所以我的`#ifndef`和`#ifdef`指令构建了应用程序的免费版本。

我环顾了**Stack Overflow**和**Google**，并没有发现关于这里发生了什么的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T02:30:40.770

在**其他 C 标志**部分添加`-DPAID_VERSION=1`

这将定义`PAID_VERSION`为`1`，相当于`#define PAID_VERSION 1`在代码中。**

# javascript - 三.js：相机改变位置，但不显示

> ID：12993493
> 
> 赞同：4
> 
> 时间：2012-10-20T23:10:15.447
> 
> 标签：javascript, three.js

我有一个程序，其中 camera.position.[x|y|z] 根据鼠标位置而变化。此控制台输出验证了这一点：

![在此处输入图像描述](../Images/1d1b2fff29a28d2fea7cbc912b754864.png)

但是，相机正在查看的对象的渲染不会改变。它静止不动，如下所示：

[https://dl.dropbox.com/u/2070405/stackoverflow2/index.html](https://dl.dropbox.com/u/2070405/stackoverflow2/index.html)

我如何最好地调试这种行为？

该程序由 index.html、js/main.js、js/myLibs/dragPanControls.js*、js/require.js、js/libs/three.js/build/three.js 组成

这是 main.js：

```
// CONFIGURE require.js BEFORE LOADING MODULES:

requirejs.config({
    shim: {
        'libs/three.js/build/three': {
            deps: [],
            exports: 'three' //'three' will not be accessible, but any values that three.js writes to the global object will become available to me if I import 'three'.
            /*init: function () {
                // if I want 'three' to actually refer to something, I can do so by returning whatever I want it to refer to, in this init function
                console.log("init three. Is THREE available? ", THREE);
                return this;
            }*/
        }
    }
});

// NOW START LOADING MODULES:

require(["myLibs/dragPanControls", "libs/three.js/build/three", "myLibs/testlib"], function(DPC, three, testlib) {
    console.log("Function call called after all modules are loaded and accessible");

// HELLO WORLD EXAMPLE:

    var camera, scene, renderer;
    var geometry, material, mesh;

    init();
    animate();

    function init() {

        camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 10000);
        camera.position.z = 1000;

        scene = new THREE.Scene();

        geometry = new THREE.CubeGeometry(200, 200, 200);
        material = new THREE.MeshBasicMaterial({
            color: 0xff0000,
            wireframe: true
        });

        mesh = new THREE.Mesh(geometry, material);
        scene.add(mesh);

        renderer = new THREE.CanvasRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);

        document.body.appendChild(renderer.domElement);

        console.log("DPC? ", DPC);
        console.log("testlib.success? ", testlib.success);
        //console.log("DragPanControls? ", DragPanControls);
        console.log("DPC.DragPanControls? ", DPC.DragPanControls);
        cameraControls  = new DPC.DragPanControls(camera);

    };

    function animate() {

        // note: three.js includes requestAnimationFrame shim
        requestAnimationFrame(animate);

        //mesh.rotation.x += 0.01;
        //mesh.rotation.y += 0.02;

        cameraControls.update();

        console.log("camera.position.x: ", camera.position.x);

        renderer.render(scene, camera);

    };

}); 
```

这是 js/myLibs/dragPanControls.js：

```
/** @namespace */
define(["../libs/three.js/build/three"],
    function () {

        // Setup work:

        var DragPanControls;

        DragPanControls = function(object, domElement)
        {
            console.log("drapancontrols kan finde THREE? ", THREE);

            this._object    = object;
            this._domElement= domElement || document;

            // parameters that you can change after initialisation
            this.target = new THREE.Vector3(0, 0, 0);
            this.speedX = 0.03;
            this.speedY = 0.03;
            this.rangeX = -40;
            this.rangeY = +40;

            // private variables
            this._mouseX    = 0;
            this._mouseY    = 0;

            var _this   = this;
            this._$onMouseMove  = function(){ _this._onMouseMove.apply(_this, arguments); };
            this._$onTouchStart = function(){ _this._onTouchStart.apply(_this, arguments); };
            this._$onTouchMove  = function(){ _this._onTouchMove.apply(_this, arguments); };

            this._domElement.addEventListener( 'mousemove', this._$onMouseMove, false );
            this._domElement.addEventListener( 'touchstart', this._$onTouchStart,false );
            this._domElement.addEventListener( 'touchmove', this._$onTouchMove, false );
        }

        DragPanControls.prototype.destroy   = function()
        {
            this._domElement.removeEventListener( 'mousemove', this._$onMouseMove, false );
            this._domElement.removeEventListener( 'touchstart', this._$onTouchStart,false );
            this._domElement.removeEventListener( 'touchmove', this._$onTouchMove, false );
        }

        DragPanControls.prototype.update    = function(event)
        {
            this._object.position.x += ( this._mouseX * this.rangeX - this._object.position.x ) * this.speedX;
            this._object.position.y += ( this._mouseY * this.rangeY - this._object.position.y ) * this.speedY;
            this._object.lookAt( this.target );

            //console.log("this._mouseX: ", this._mouseX);
            //console.log("this.rangeX: ", this.rangeX);

            //console.log("this._object.position.x: ", this._object.position.x);
            //console.log("this._object.position.y: ", this._object.position.y);
        }

        DragPanControls.prototype._onMouseMove  = function(event)
        {
            this._mouseX    = ( event.clientX / window.innerWidth ) - 0.5;
            this._mouseY    = ( event.clientY / window.innerHeight) - 0.5;
        }

        DragPanControls.prototype._onTouchStart = function(event)
        {
            if( event.touches.length != 1 ) return;

            // no preventDefault to get click event on ios

            this._mouseX    = ( event.touches[ 0 ].pageX / window.innerWidth ) - 0.5;
            this._mouseY    = ( event.touches[ 0 ].pageY / window.innerHeight) - 0.5;
        }

        DragPanControls.prototype._onTouchMove  = function(event)
        {
            if( event.touches.length != 1 ) return;

            event.preventDefault();

            this._mouseX    = ( event.touches[ 0 ].pageX / window.innerWidth ) - 0.5;
            this._mouseY    = ( event.touches[ 0 ].pageY / window.innerHeight) - 0.5;
        }

        // Return module:
        return {
            DragPanControls: DragPanControls
        };
    }
); 
```

*从 jeromeetienne 借来

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T23:55:56.837

您正在使用从网络复制的代码，该代码旨在与旧版本的库一起使用。

`examples/js/controls`相反，请使用 three.js目录中可用的多个相机控制器中的任何一个。例如：

```
controls = new THREE.OrbitControls( camera ); 
```

从 r.52 开始，这些控件不是库的一部分，因此您必须明确包含源代码。

这是一个显示使用相机控制器的小提琴：http: [//jsfiddle.net/WV49w/3/](http://jsfiddle.net/WV49w/3/)

# python - python可以像这样在bash中表现吗？

> ID：12993497
> 
> 赞同：2
> 
> 时间：2012-10-20T23:11:06.823
> 
> 标签：python, shell, path, glob, expansion

python可以通过这样的短格式语法生成具有多子路径的路径吗？

```
vars=project/{DEBIAN,usr/{bin,usr/{applications,icons,share}},computer} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T07:35:53.530

通常我会建议使用类似的东西

```
def extend(base, *others):
    [base + o for o in others] if others else [base] 
```

然后做

```
 extend("project", "/debian", *extend("/usr", *(extend("/bin") + extend("/usr", "/applications", "/icons", "/share")))) 
```

. 但是由于您更喜欢解析字符串，我尝试提供一种替代方法：

```
def commasplit(s):
    start = 0
    level = 0
    for i, c in enumerate(s):
        if c == '{':
            level += 1
        elif c == '}':
            level -= 1
        elif c == ',' and level == 0:
            yield s[start:i]
            start = i+1
    yield s[start:]

def split(s):
    import re
    found = False
    for m in re.finditer("(\{.*\})",s):
        found = True
        for p in commasplit(s[m.start() + 1:m.end() - 1]):
            for i in split(p):
                yield s[:m.start()] + i + s[m.end():]
    if not found:
        yield s

cs = "a,b,c,{d,e,f},g"
print list(commasplit(cs)) # -> seems to work

s = "project/{DEBIAN,usr/{bin,usr/{applications,icons,share}},computer}"
print s
for n, i in enumerate(split(s)): print n, i # ->  as well. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T23:22:10.787

不，没有这样的内置速记。一个合理的pythonic方式是：

```
vars = ["project" + path for path in (
    ["/DEBIAN"] +
    ["/usr" + path for path in (
        ['/bin'] +
        ['/usr' +  path for path in [
            "/applications",
            "/icons",
            "/share"]
        ]
    )] +
    ['/computer']
)] 
```

* * *

### 编辑：

您可以定义一个函数来简化此操作。这是一个惰性生成器版本：

```
def expand(base, paths):
    for path in paths:
        if type(path) == str:
            yield base + path
        else:
            for p in path:
                yield base + p

vars = expand("project", [
    "/debian",
    expand("/usr", [
        "/bin",
        expand("/usr", [
            "/applications",
            "/icons",
            "/share"
        ]),
        "/computer"
    ])
]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T06:24:37.247

谢谢你。

我尝试编写我的代码。

我总是使用 ["0,1,2,3,4,5,6,7,8,9".split(","),["a,b,c,d,e".split(", ")]] 而不是普通的列表。

因为它比 ["x","y","z"] 更快——不用换档，很明显，而且更有意义。

所以，我希望很快会有一些**字符串方法**可以像bash一样，下面的代码，在python中......

Python 语法：project,[DEBIAN,usr,[bin,usr,[applications,icons,share/winpath]],computer]

Bash 语法：project/{DEBIAN,usr/{bin,usr/{applications,icons,share}},computer}

```
import re
def genpaths (multils, root=""):
    suc=[]
    for l in multils:
        if type(l) == type([]):
            suc.extend(genpaths (l, root+multils[multils.index(l)-1]+"/"))
        else: 
            suc.append( root+l)
    return filter(None, suc)

def easylist (s):
    s=eval("['''"+re.sub("(\]+)(''',''')?", "'''\\1,'''",re.sub("(''',''')?(\[+)","''',\\2'''",re.sub(",","''','''",s)))+"''']")
    return s

def bashlist (s):
    s=eval("['''"+re.sub("(\}+)(''',''')?", "'''\\1,'''",re.sub("(/)?(\{+)","''',\\2'''",re.sub(",","''','''",s))).replace("{","[").replace("}","]")+"''']")
    return s

def pythonGenPath (s):
    return genpaths(bashlist (s))

def bashGenPath (s):
    return genpaths(bashlist (s))

#testing
print pythonGenPath ("project,[DEBIAN,usr,[bin,usr,[applications,icons,share/winpath]],computer]")
print bashGenPath ("project/{DEBIAN,usr/{bin,usr/{applications,icons,share}},computer}") 
```

结果是：

```
['project', 'project/DEBIAN', 'project/usr', 'project/usr/bin', 'project/usr/usr', 'project/usr/usr/applications', 'project/usr/usr/icons', 'project/usr/usr/share', 'project/computer'] 
```

# android - Actionbarsherlock FragmentTabPager：如何获得选项卡选择通知？

> ID：12993501
> 
> 赞同：0
> 
> 时间：2012-10-20T23:11:56.537
> 
> 标签：android, android-fragments, actionbarsherlock

我是 android 片段的新手。我正在使用 actionbarsherlock FragmentsTabsPager。我有三个包含三个片段的选项卡。所有三个片段都可以通过选择选项卡或滑动来查看。我想在每次选择选项卡（片段）时得到通知。每次通过单击选项卡进行选择/重新选择时，我都想在 listfragment 中重新加载列表视图。我怎样才能做到这一点？我们在片段中有任何回调吗？OncreateView，onactivitycreated 没有被调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T00:09:02.987

不确定这是一个好的解决方案......

听众：

```
 public interface OnShowFragmentListener {
        abstract public void onShow();
    } 
```

在您的标签适配器中：

```
 private OnShowFragmentListener onShowSearchScreenListener = new OnShowFragmentListener() {
        @Override
        public void onShow() {
        }
    };

    public void setOnShowFragmentListener(OnShowFragmentListener onShowFragmentListener) {
        this.onShowFragmentListener = onShowFragmentListener;
    }     

    @Override
    public void onTabChanged(String tabId) {
        int position = tabHost.getCurrentTab();
        viewPager.setCurrentItem(position);
        if (position == 0) {
            onShowFragmentListener.onShow();
        }
    } 
```

在标签片段的 onCreate() 中：

```
 MainTabsPager main = (MainTabsPager) getActivity();
    main.setOnShowFragmentListener(new MainTabsPager.OnShowFragmentListener() {

        @Override
        public void onShow() {
            updateFragment();
        }
    }); 
```

# eclipse - 我在 Eclipse 中的 maven Java 项目不生成 jar 文件

> ID：12993504
> 
> 赞同：10
> 
> 时间：2012-10-20T23:12:20.173
> 
> 标签：eclipse, maven, m2e

如果我使用“mvn compile”和“mvn install”之类的命令行命令，我会在目标目录下看到一个 jar 文件。

但是，如果我使用 m2e 插件从 Eclipse 构建相同的项目，我看不到 jar 文件，而只看到目标目录下的编译类目录，但它们是空的。对这个问题有任何见解吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-21T00:34:09.230

除非您要求，否则 m2e 不会构建 jar。（一个例外是当您将它与某些连接器一起使用来开发 OSGi 捆绑包时，但我假设您不是。）

要构建一个罐子：

*   右键单击“包资源管理器”视图中的项目文件夹；
*   选择“运行方式”
*   选择“Maven 安装”

# sockets - 两个客户端之间的通信

> ID：12993508
> 
> 赞同：1
> 
> 时间：2012-10-20T23:12:41.537
> 
> 标签：sockets, pthreads, ipc, rpc

您好，我有 cli/server 应用程序，我需要在 2 个客户端之间进行通信设置。例子：

```
Cli A connects to server->serverThreadA
Cli B connects to server->serverThreadB
cli C connects to server->serverThreadC
...etc. 
```

然后假设我希望 Cli A 与 Cli C 建立连接。

我是否必须与主线程（服务器）通信并让它请求 Cli C 为我建立连接，然后主线程将地址/端口信息传递给我？

我想使用 RPC 吗？或插座？

我想知道这样做的最佳方法是什么。

感谢您的任何指导/建议。

# javascript - 如何在 JS 中从子级访问父级

> ID：12993509
> 
> 赞同：1
> 
> 时间：2012-10-20T23:12:47.413
> 
> 标签：javascript, jquery

我想从失败的 jQuery 方法访问对象自己的函数。

```
function obj(){    
    this.send = function(){
        $.get("send.php",null,function(data){
            this.success();
        }).error(function(){ this.fail(); });
    }
    this.fail = function(){
        alert("fail");
    }
}

var o = new obj();
o.send(); 
```

给出这个错误：`TypeError: this.fail is not a function`

如何访问`fail`jQuery 中的函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T23:19:25.860

在第 5 行，`fail`没有被同一个对象调用，因此`this`没有相同的引用，因此没有方法失败。我们说**你改变了上下文**。

诀窍是使用通常称为*`self`*or *`that`*or的变量*`_this`*。我更喜欢`self`.

```
function obj(){    
    var self = this;
    this.send = function(){
        $.get("send.php",null,function(data){
            this.success();
        }).error(function(){ self.fail(); });
    }
    this.fail = function(){
        alert("fail");
    }
} 
```

它应该成功了，是的，javascript 看起来像一种可惜的语言。但是一旦你克服了几个问题，你就会爱上这些可能性。

# xamarin.ios - 相当于 LoadDatalWithBaseURL 的 monotouch & 清空缓存

> ID：12993511
> 
> 赞同：0
> 
> 时间：2012-10-20T23:13:00.703
> 
> 标签：xamarin.ios, xamarin.android

我在将一些 Android 代码移植到 iPhone 时遇到了两个问题。首先是我需要一些类似于 LoadDataWithBaseURL 的东西。问题是这样的。在代码中，我生成了一个网页。该页面使用 Javascript 做了一些时髦的事情，这个世界很好。在机器人上工作正常，我生成，发送到 webview 的活动，然后使用 LoadDataWithBaseURL。

不幸的是，在 iPhone 上，它第一次工作。如果我在页面上添加一些内容并重新发送，我会得到列表中的第一件事来显示，而没有其他内容。这与 LoadHtmlString 一起使用。

```
string contentDirectoryPath = Path.Combine (NSBundle.MainBundle.BundlePath, "Content/");
        this.BeginInvokeOnMainThread (delegate {
            this.webView.LoadHtmlString (myGeneratedPage, new NSUrl (contentDirectoryPath, true));
        }); 
```

有一个名为 LoadData 的单点触控方法，看起来很相似，但我不清楚 NSData 数据是否与 android 应用程序上的字符串数据相同。

一个更简单的解决方案可能是清除缓存......但同样，我不知道如何做，如果我需要做应用程序缓存*或*safari 的缓存，这会令人困惑。

我环顾四周，有一个解决方案，但它是在目标 C 中，而不是单点触控。不像Java到C#，我没有接触过obj-c，所以不知道从哪里开始。

任何有关这些的帮助将不胜感激

PFJ

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:06:29.027

我一直在我一直从事的 iPhone Monotouch 项目中使用缓存。

关于您更简单的解决方案，为了清除应用程序缓存，我这样做：

```
NSUrlCache cache = NSUrlCache.SharedCache;
cache.RemoveAllCachedResponses(); 
```

我知道 SharedCache 这个名字似乎表明它将是一个跨应用程序缓存，但我发现清除 Safari 的缓存对我的应用程序的缓存没有影响。iPhone 上的 Plus 应用程序被大量沙盒化，因此我认为您无法清除 Safari 的缓存。

我使用 iPhone 模拟器的经验表明，该行为`NSUrlCace.SharedCache`应用程序创建了一个缓存。这可以通过导航到 Mac 上的此文件夹来查看：

```
Library/ApplicationSupport/iPhone Simulator/6.0/<your app id>/Library/Caches/ 
```

应该有一个包含您的包名称的文件夹和一个名为“Cache.db”的文件。我认为这个文件在这个位置的存在进一步支持了它是应用程序缓存的事实，所以你应该安全地清除它等等。

由于 MonoTouch 网站上没有太多关于 NSUrlCache 以及它们如何实现方法的文档，因此这是我能想到的最好的方法。

希望您能找到一些方法来使用缓存清除来解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T15:32:19.553

LoadData 的参数是一个包含 HTML 内容的 NSData。

# python - python 函数如何将其所有变量放在全局命名空间中？

> ID：12993513
> 
> 赞同：1
> 
> 时间：2012-10-20T23:13:19.270
> 
> 标签：python, metaclass

可以（尽管通常不是一个好主意）创建一个将其成员定义存储在`globals()`或另一个字典中的类：

```
oddclass = type("oddclass", (object,), globals()) 
```

有没有办法对函数做同样的事情，以便它的所有局部变量都存储在全局（或模块）命名空间中，而不是它自己的？

通过声明变量，我可以一次获得一个变量的相同效果`global`：

```
def myfunction():
    global x
    x = 10 
```

我正在寻找的是一种对所有内部变量（也适用于那些尚未在顶部声明的变量）实现相同效果的**通用**`myfunction`方法，理想情况下是某种可以轻松添加然后删除的单线不再需要。

PS。我问这个问题是因为我很好奇 python 管理函数命名空间的方式。我的动机是在某些情况下将其用作*临时*调试帮助（具有大量本地数据的函数神秘地失败），但不要介意：我可以`global`像上面那样使用。这个问题是关于python函数内部的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T23:20:52.280

这有效

```
>>> def test():
    x = 10
    y = 'Some string'
    for k, v in locals().items():
        globals()[k] = v

>>> test()

>>> x
10
>>> y
'Some string' 
```

请记住，这是**非常不安全的技术，永远不应该使用**。

# visual-studio - 以普通Visual Studio 2012项目中的XNA框架为目标

> ID：12993514
> 
> 赞同：2
> 
> 时间：2012-10-20T23:13:41.420
> 
> 标签：visual-studio, f#, xna, visual-studio-2012, xna-4.0

我有一个 C# XNA 宿主项目，其中包含一个 F# 客户端项目，它将包含我的所有功能。它不会构建，因为 F# 项目引用了 XNA 项目不同意的 mscorlib.dll 和 System.dll（实际错误——嗯，它确实是一个警告，在我看来*应该*是一个错误——位于帖子底部）。我如何告诉 F# 项目以实际 XNA 平台为目标（特别是针对 Xbox 360）？

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1578,5): warning MSB3268: The primary reference "\\vmware-host\Shared Folders\Projects\FSharp\Whirlygigs\Whirlygigs.Lib\bin\Debug\Whirlygigs.Lib.dll" could not be resolved because it has an indirect dependency on the framework assembly "mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" which could not be resolved in the currently targeted framework. ".NETFramework,Version=v4.0,Profile=Client". To resolve this problem, either remove the reference "\\vmware-host\Shared Folders\Projects\FSharp\Whirlygigs\Whirlygigs.Lib\bin\Debug\Whirlygigs.Lib.dll" or retarget your application to a framework version which contains "mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=***".
C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1578,5): warning MSB3268: The primary reference "\\vmware-host\Shared Folders\Projects\FSharp\Whirlygigs\Whirlygigs.Lib\bin\Debug\Whirlygigs.Lib.dll" could not be resolved because it has an indirect dependency on the framework assembly "System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" which could not be resolved in the currently targeted framework. ".NETFramework,Version=v4.0,Profile=Client". To resolve this problem, either remove the reference "\\vmware-host\Shared Folders\Projects\FSharp\Whirlygigs\Whirlygigs.Lib\bin\Debug\Whirlygigs.Lib.dll" or retarget your application to a framework version which contains "System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=***". 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T05:17:04.307

您遇到的问题是您的项目之一是针对 Windows 版本的 .NET Framework ( `mscorlib`, `System`)，而您的项目之一是针对 Xbox 360 版本的框架。而且，基本上，您不能将针对不同核心框架的程序集链接在一起。

我猜您的 F# 项目针对的是 Windows 版本的程序集。**您需要做的是让您的 F# 项目以 Xbox 360 参考程序集为目标。**

（请注意，我自己从来没有这样做过——所以我的回答只是列出你可以尝试的事情。）

供您参考，这些参考程序集默认安装到`C:\Program Files (x86)\Microsoft XNA\XNA Game Studio\v4.0\References\Xbox360\`

首先，您可以尝试使用可移植类库。我听到了关于这方面的混合报道。

我可能会这样做的方式是使用一些手动 MSBuild 技巧。Visual Studio 项目文件*是*一个 MSBuild 文件（即 XML）。您可以在文本编辑器中打开它并使用它。您会注意到 XNA 项目导入了以下文件：

```
<Import Project="$(MSBuildExtensionsPath)\Microsoft\XNA Game Studio\Microsoft.Xna.GameStudio.targets" /> 
```

因此，您可以尝试简单地将导入添加到您的项目文件中（可能还有一些其他 XNA 配置，例如`<XnaPlatform>`，在适当的位置）。这*可能会*奏效。

如果没有，您实际上可以查看这些文件（它们位于`C:\Program Files (x86)\MSBuild\Microsoft\XNA Game Studio\v4.0`）并尝试找出它们用于设置框架程序集路径的内容。我对 MSBuild 不够了解，无法确定。

否则，**你可以暴力破解它**。您可以通过将其添加到以下内容来关闭核心框架的内置引用`<PropertyGroup>`：

```
<NoStdLib>true</NoStdLib> 
```

然后手动设置每个引用的路径。所以你会改变这个：

```
<Reference Include="mscorlib" /> 
```

对此：

```
<Reference Include="mscorlib">
  <HintPath>C:\Program Files (x86)\Microsoft XNA\XNA Game Studio\v4.0\References\Xbox360\mscorlib.dll</HintPath>
</Reference> 
```

对于所有其他参考资料，依此类推。我以前用最后一种方法取得了成功，用于做类似的事情（手动更改目标框架）。

# java - 在 Eclipse 中选择一行的快捷方式？

> ID：12993518
> 
> 赞同：53
> 
> 时间：2012-10-20T23:14:06.397
> 
> 标签：java, eclipse, keyboard-shortcuts, shortcut

是否有键盘快捷键可以选择光标当前所在的所有行？在日食中？甚至一般在 Windows/Linux 上？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-08-05T23:32:04.690

**Eclipse的解决方案：**

按住`Alt`和。`**↑**`_`**↓**`

`Alt`+`**↑**`并且`**↓**`会向上或向下移动整行，所以只需将其向后移动，您就会选择整行。`**↑**`因此，和的顺序`**↓**`无关紧要。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-10-20T23:32:12.077

我使用的是`Home`，然后`Shift`+ `End`，它将转到行的开头，然后选择直到结尾，这有效地选择了整行。一旦你习惯了它，你就可以很快地做到这一点。要快速查看所有当前快捷方式，您可以使用`Shift`++ `Ctrl`。`L`

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-12-03T19:22:20.673

我使用`Ctrl`+`D`删除当前行，然后使用`Ctrl`+`Z`恢复该行并选择它。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-10-21T06:48:39.163

Eclipse中没有单一的*键盘快捷键。*如果未完全排除使用鼠标，则三次鼠标单击将选择您单击的行。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-10-21T00:05:58.860

您始终可以在首选项中按照您想要的方式对其进行配置。

![首选项 - 选择行尾](../Images/3c6bed0db11eaabb6cc9a5490e4ad2ef.png)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-06-14T07:56:34.447

似乎没有命令这样做；然而，在：

```
window->preferences->keys 
```

有命令`Cut Line`and `Copy Lines`，我认为这基本上是你需要的。

`Copy Lines`复制它下面的当前行，然后选择新行。您可以结合使用它`Cut Line`来将新行移动到其他地方。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-12-04T14:44:47.700

实际上，有一个插件（[copycutcurrentline](http://code.google.com/p/copycutcurrentline/)）用于复制/剪切整个当前行（看起来作者有这个问题）。它的工作原理如下：

> 1.  **如果不选择任何内容，请**按`Ctrl`+`C`复制或`Ctrl`+`X`剪切编辑器中的整行。（如果您选择一些文本，它会照常工作。）
> ***   将插入符号放在任何位置的任何行上。*   按`Ctrl`+`V`粘贴上面的行。（您不会失去插入符号的位置。）**

 *** * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-01-16T04:21:24.207

对于 MacOS，您可以使用组合：

`Cmd`+`→`然后`Cmd`+ `Shift`+`←`

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-09-09T14:43:16.240

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-06-26T08:49:10.997

alt + Shift + Up 几次就可以了

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-08T14:57:49.867

If you are using windows :

1.  Put the cursor at the beginning of this line.
2.  Press Shift + Down.
3.  Press Shift + Left. (to unselect the extra space at the beginning of the following line - if there is one - )**

# c++ - FSM 中的切换状态

> ID：12993520
> 
> 赞同：1
> 
> 时间：2012-10-20T23:15:03.217
> 
> 标签：c++, pointers, delete-operator, fsm, states

我正在尝试使用有限状态机作为管理简单游戏流程的模型。进入主菜单状态，您可以从中选择开始游戏或修改选项等。

我这样做的方式是创建一个基础 State 类，每个状态都从该类继承。我有一个管理程序循环的应用程序类，并添加一个指向当前状态的指针。应用程序本身有一个 changeState 方法，可以退出当前状态并进入下一个状态。当进入一个状态时，我给状态一个指向应用程序类的指针，每个状态都保存着切换到下一个状态的逻辑。

这会导致我不确定正在发生什么，或者更确切地说应该发生什么。

特别是：程序轮询事件。事件被交给当前状态进行处理。如果输入指示切换到下一个状态，我调用 changeState 函数。change state 函数删除当前状态并加载下一个状态。

我的困惑是，如果我要删除调用更改状态函数的状态，当我从更改状态函数返回时会发生什么？一些简化的代码可以更清楚地说明我的意思：

```
class Application
{
    public:
        void run();
        void changeState( StateBase * nextState );

    protected:
        void Initialize(){m_running=false; changeState(new BaseState);};

    private:
        StateBase * m_currentState;
        bool m_running;
};

void Application::run()
{
    Initialize();
    while (m_running)
    {
        Event event;
        while ( pollEvent(event) ) // Process events until event queue is empty
        {
            m_currentState->handleEvent( event );
        }
    }
}

void Application::changeState( StateBase * nextState )
{
    if (m_currentState!= 0)
    {
        m_currentState->exit();
        delete m_currentState;
    }
    m_currentState = nextState;
    m_currentState->enter( this );
}

class StateBase()
{
    public:
        void enter(  Application * app ){ m_Application = app };
        void handleEvent( Event const& event );
        void exit(){};
    private:
        Application * m_Application;
}

void StateBase::handleEvent( Event const& event )
{
    if ( event )
        m_Application->changeState( new StateBase );
}

int main()
{
    Application App;
    App.run();
    return 0;
} 
```

试图只把重要的部分放在那里。无论如何，我看到的情况是：我实例化了应用程序。然后我调用公共 run() 方法，该方法调用 Initialize() 将 m_running 变量设置为 true，并将 changeState 调用为新的 BaseState。changeState 给状态一个指向 this 的指针，因此事件可以访问应用程序的信息。

然后 run 方法轮询事件，当它检测到一个事件时，它会将其发送到当前状态以进行处理。

如果一个事件需要改变状态，它会调用 m_Application->changeState( new StateBase );

这就是我感到困惑的地方。changeState() 在 m_currentState 上调用 delete，这是 StateBase 进行调用的实例。当控制从 changeState() 返回时，它转到一个应该被删除的事件。但是，我测试了它并没有崩溃。当然，我也没有尝试修改任何一个成员国。

无论如何，我想知道是否有人可以向我解释这里发生了什么。我仍在尝试找出一种更好的方法来管理它，例如对应用程序和不同的状态使用单例，这将消除在我完成它们时传递指针和删除状态的需要。但是这个特殊的结引起了我的注意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T23:21:41.347

如果您在更改为下一个状态后没有尝试对给定状态执行任何操作 - 那么就不会发生任何错误。简而言之，它就像从成员函数中调用 delete - 如果这是对象发生的最后一件事，则允许：

```
void Test::deleteMe(int c)
{
   extern int b;
   int a;
   void f();
   delete this;
   // do not do this - do not touch/use this after delete
   // this->a = 7; 
   // this->f(); 
   // but you can use outer world and local variables
   a = 7;
   b = 8;
   c = 9;
   f(); 
   return; // just returns from function after delete this.
} 
```

在更容易理解的 C 世界中（与 C++ 世界相反），等价物如下：

```
Test* this;
....
void Test_deleteMe(Test* this)
{
   free(this);
   // this->a = 7; // do not do this
   // f(this); // and this 
   return; // just returns from function after delete this.
} 
```

# html - 我在 html 页面上放了什么，以便浏览器知道通过 ssl 访问它？

> ID：12993521
> 
> 赞同：2
> 
> 时间：2012-10-20T23:15:03.123
> 
> 标签：html, ssl

我的网络服务器上安装了一个证书。如果我只想通过 ssl 访问一个页面，我需要在页面上标记什么，或者在其他地方设置另一个设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T00:02:26.400

这是一个如何在 PHP 中执行此操作的示例

```
if($_SERVER['SERVER_PORT'] != 443) {
   header("Location: https://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']);
   exit;
} 
```

在这里如何在 JavaScript 中做到这一点：

```
<script type="text/javascript">
    if (window.location.protocol != 'https:') {
        window.location.href = 'https://' + window.location.host + window.location.pathname;
    }
</script> 
```

要仅使用 HTML，您可以执行以下操作：

```
<meta http-equiv="refresh" content="0;url=https://www.yoursite.com" /> 
```

我相信您也可以直接在 Apache 配置中执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T23:34:00.463

简而言之，唯一可靠的方法是仅使用`https://`URL 链接到它。理想情况下，您应该确保您的用户期望使用 HTTPS，并且他们会检查它是否正确使用（即他们不会忽略浏览器警告）。

在普通 HTTP 请求之后在服务器上强制执行的任何操作都可能容易受到 MITM 攻击。这包括重定向方法`mod_rewrite`，PHP 标头（`Location`标头），JavaScript（提取`window.location`），...，当然还有`https://`链接本身的初始传递，如果它是从通过普通 HTTP 提供的页面获得的。即使是由于类似的原因而拒绝访问`SSLRequireSSL`也只有在收到纯 HTTP 请求后才有效。

使用这些重定向技术并不是一个坏主意，如果只是为了让您的用户习惯他们使用 HTTPS 的事实（如果在其他情况下他们不是，他们可能会注意到一些奇怪的东西，这可能表明 MITM 攻击），他们至少应该保护他们免受被动窃听攻击。

更一般地说，即使您使用相同的主机名（可能是相同的服务器软件）提供服务`http://www.example.com`，`https://www.example.com`它们在技术上也是两个不同的主机（例如 Apache Httpd 术语中的虚拟主机），并且托管在一个主机上的资源不需要托管在其他。只需不要在纯 HTTP 主机上通过 HTTPS 提供您只需要的页面。我还建议*不要*使用重定向（至少在开发阶段），这样当您不使用 HTTPS 链接到这些页面时它会中断：这将有助于检测潜在的混合内容问题。自动重定向主要对直接在浏览器中输入地址的用户有用。

您可以考虑将您的网站放入预加载的[HTTP 严格传输安全](http://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security)列表（或至少使用 HSTS，这将使浏览器记住仅在至少工作一次后才使用 HTTPS），但这将适用于整个主机.

[您可以在Security.SE](https://security.stackexchange.com/a/22859/2435)和[Webmasters.SE](https://webmasters.stackexchange.com/a/28443/11628)上的这些答案中找到更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T23:26:27.100

如果服务器配置正确，您只需使用 https:// 链接到该页面即可。

要检查并确保在没有 https 的情况下无法访问该页面，您可以使用 php 查找当前的确切 URL 并检查其是否为 https，如果不是，则执行简单的重定向到 https://[URL]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T23:33:46.600

如果服务器配置正确，则无需在页面*或*指向它的链接上放置任何内容。只需在 Apache 配置中使用 SSLRequireSSL 指令为页面定义一个 Location 块。

# mysql - 多列上的 MySQL 主键

> ID：12993522
> 
> 赞同：2
> 
> 时间：2012-10-20T23:15:08.663
> 
> 标签：mysql

我正在从以 exel 格式提供给我的数据创建一个非常简单的数据库表，我将使用 4 列：

日期/时间 IP 地址 主机名 发现漏洞

我通常每天得到一张 exel 表，行数在 1000 到 3000 行之间。日期/时间字段由 YYYYMMDDHHMM 组成，可以重复多次，但每个相同的日期/时间列应具有唯一的 IP 地址，例如 2012-08-26:16:01、80.3.3.255、2012-08 -26:16:01，192.168.0.1。回顾了一些类似的问题后，为每条记录生成唯一的主键，或者加入日期/时间和 IP 列来创建主键会更有效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T23:22:31.323

这取决于至少两个角度：

*   关于`WHERE`稍后用于选择的标准：如果您计划按时间戳和 IP 独立选择，我建议您为它们创建非唯一键，并`AUTO_INCREMENT`为每一行创建一个简单的（也许是）主键。
*   如果确实发生了重复的时间戳/IP，您想如何处理它：唯一或主键将排除这种情况，而单独的键将愉快地共存。这取决于您的应用程序要求，您更喜欢哪一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T00:36:45.377

我喜欢为大多数/所有表设置一个 ID 列，所以我会这样做。想象一下用“notes”之类的东西扩展你的应用程序——你如何在没有 ID 的情况下将它们加入到这个表中？

此外，我遇到过一些自动加载程序发疯的情况，ID 是一种能够识别坏行的有用方法。

正如@Eugen 指出的那样，只需在时间戳/IP 上创建一个复合唯一索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T01:08:24.600

根据我使用数据库的经验，日期对于主键来说是非常糟糕的字段。每次我遇到它们时，无论应用程序是如何编程的，总会有一些东西让你用日期来咬你。最常见的情况是“我输入了错误的日期，现在我想更改它，但我不能不更新十几个子表”或“数据库只是复制了我的数据，因为我更正了日期并且软件重新提交了我的报告，它无法告诉它是重复的”。

此外，您必须记住，**日期实际上并不能保证是唯一的**。举个简单的例子，将时钟调回夏令时会发生什么？突然，您有一个日期，其中 1:00 am 出现了两次，这意味着您已经有一个合法的情况，日期可以在两个实例中发生冲突。根据您的解决方案，您可能需要确保使用时区或指定 UTC。您可以使用 UNIX 时间戳来帮助解决此问题，但即便如此，您仍要依赖两个不同的、不相关的计算机系统来正确跟踪时间并就现实达成一致。

同样，IP 地址不必是全球唯一的。私有 IP 寻址和 NAT 可以轻松构建两个系统具有相同 IP 地址的场景。事实上，除非您是所有相关系统的系统管理员，否则您无法可靠地使用主机名、IP 地址、MAC 地址甚至 BIOS 序列号并期望得到保证的唯一值。这就是系统 BIOS 通常具有系统 GUID 的原因（尽管我已经看到翻新系统板将具有全零 GUID 的实例，因此即使这也不确定）。

如果您选择使用这两个字段的复合键，那么我怀疑您将两全其美。

我了解您正在开发一个非常小的系统，并且不太可能出现这些问题，但作为系统分析师，我立即怀疑实际上需要日期和 IP 地址是唯一的程序的持久性，特别是如果数据是来自多个独立来源。

# wpf - WPF + PRISM：绑定不适用于自定义控件

> ID：12993523
> 
> 赞同：1
> 
> 时间：2012-10-20T23:15:10.673
> 
> 标签：wpf, binding, user-controls, prism, wpftoolkit

我正在尝试将 my 中的值绑定`ViewModel`到自定义控件。绑定似乎不起作用。

如果我添加一个常规`TextBlock`并应用绑定，我确实会在 TextBlock 的 ViewModel 中看到定义的值。

3 个自定义文本框控件都没有显示来自我的 ViewModel 的值。而且，当我单击 2 个按钮中的任何一个时，我无法到达 ViewModel 中的断点。

**AddAccountViewModel.xaml：**

```
<UserControl
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:Controls="clr-namespace:Client.Infrastructure.Controls;assembly=Client.Infrastructure"
         x:Class="Client.Modules.Accounts.Views.AddAccountView" 
         mc:Ignorable="d">
<Grid Width="400" Height="600">
    <Grid.RowDefinitions>
        <RowDefinition Height="65"/>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <Controls:Header Title="New Account"/>
    <StackPanel Grid.Row="1">
        <StackPanel Margin="25">
            <Controls:GTextBox Watermark="Title" TextBoxHeight="45" TextBoxWidth="350" FontSize="28" 
                                      Foreground="#999999" BorderBrush="#CCCCCC" Tip="e.g. Gmail, Dropbox, LastPass" 
                                      Text="{Binding Account.Title, Mode=TwoWay}"/>

            <Controls:GTextBox Watermark="Account" TextBoxHeight="45" TextBoxWidth="350" FontSize="28" 
                                      Foreground="#999999" BorderBrush="#CCCCCC" Tip="e.g. user@example.com" Margin="0,25,0,0" 
                                      Text="{Binding Account.Name, Mode=TwoWay}"/>

            <Controls:GTextBox Watermark="Key" TextBoxHeight="45" TextBoxWidth="350" FontSize="28" 
                                      Foreground="#999999" BorderBrush="#CCCCCC" Tip="e.g. random characters from the account provider" Margin="0,25,0,0" 
                                      Text="{Binding Account.Key, Mode=TwoWay}"/>

            <Controls:SignedButton VerticalAlignment="Top" Width="275" Height="45" Foreground="#FFFFFF" 
                                   LeftSign="+" Text="Add an Account" TextSize="20" ButtonBackground="#3A5795" 
                                   HoverBackground="#C41AD7" HoverOpacity="1" Margin="0,50,0,0" Command="{Binding AddCommand}"/>

            <Controls:SignedButton VerticalAlignment="Top" Width="275" Height="45" Foreground="#FFFFFF" 
                                   LeftSign="&lt;" Text="Back to Accounts" TextSize="20" ButtonBackground="#666666" 
                                   HoverBackground="#0FBDAC" HoverOpacity="1" Margin="0,25,0,0"
                                   Command="{Binding NavigateToMainViewCommand}"/>
        </StackPanel>
    </StackPanel>
</Grid>
</UserControl> 
```

**AddAccountView.xaml.cs：**

```
public partial class AddAccountView : UserControl, IAddAccountView
{
    public AddAccountView(IAddAccountViewModel accountViewModel)
    {
        InitializeComponent();

        ViewModel = accountViewModel;
    }

    public IViewModel ViewModel
    {
        get { return (IViewModel) DataContext; }
        set { DataContext = value; }
    }
} 
```

**添加帐户视图模型：**

```
public class AddAccountViewModel : ViewModel, IAddAccountViewModel
{
    private Account _account;

    public AddAccountViewModel()
    {
        AddCommand = new DelegateCommand(Add, CanAdd);
        NavigateToMainViewCommand = new DelegateCommand(Navigate, CanNavigate);

        Account = new Account(Guid.NewGuid()) {Title = "Test", Name = "test@test.com", Key = "12345"};
    }

    public Account Account
    {
        get { return _account; }
        set
        {
            _account = value;
            OnPropertyChanged("Account");
        }
    }

    public DelegateCommand AddCommand { get; private set; }

    public DelegateCommand NavigateToMainViewCommand { get; private set; }

    private void Add()
    {
        Account.Title = "Saved";
    }

    private bool CanAdd()
    {
        return string.IsNullOrEmpty(Account.Error);
    }

    private bool CanNavigate()
    {
        return true;
    }

    private void Navigate()
    {
        int i = 0;
    }
} 
```

**GTextBox.xaml：**

```
<UserControl
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit" xmlns:Converters="clr-namespace:Client.Infrastructure.Converters" x:Class="Client.Infrastructure.Controls.GTextBox"
         mc:Ignorable="d" 
         DataContext="{Binding RelativeSource={RelativeSource Self}}">
<UserControl.Resources>
    <Converters:CaseConverter x:Key="CaseConverter"/>
</UserControl.Resources>
<StackPanel>
    <xctk:WatermarkTextBox FontFamily="{DynamicResource OpenSans}" Watermark="{Binding Watermark}" 
    Text="{Binding Text}"
    Width="{Binding TextBoxWidth}" Height="{Binding TextBoxHeight}"
    FontSize="{Binding FontSize}" Foreground="{Binding Foreground}" BorderBrush="{Binding BorderBrush}" Padding="10,3">
        <xctk:WatermarkTextBox.WatermarkTemplate>
            <DataTemplate>
                <ContentControl Content="{Binding Converter={StaticResource CaseConverter}, Mode=OneWay}"/>
            </DataTemplate>
        </xctk:WatermarkTextBox.WatermarkTemplate>
    </xctk:WatermarkTextBox>
    <TextBlock Text="{Binding Tip}" Foreground="#999999" FontSize="13" FontFamily="{DynamicResource OpenSans}"
               TextOptions.TextFormattingMode="Display" Margin="10,5,0,0"/>
</StackPanel>
</UserControl> 
```

**GTextBox.xaml.cs：**

```
public partial class GTextBox : UserControl
{
    public static DependencyProperty TextBoxHeightProperty =
        DependencyProperty.Register("TextBoxHeight", typeof (double), typeof (GuardianTextBox));

    public static DependencyProperty TextBoxWidthProperty =
        DependencyProperty.Register("TextBoxWidth", typeof (double), typeof (GuardianTextBox));

    public static DependencyProperty TextProperty =
        DependencyProperty.Register("Text", typeof (string), typeof (GuardianTextBox));

    public static DependencyProperty TipProperty =
        DependencyProperty.Register("Tip", typeof (string), typeof (GuardianTextBox));

    public static DependencyProperty WatermarkProperty =
        DependencyProperty.Register("Watermark", typeof (string), typeof (GuardianTextBox));

    public GTextBox()
    {
        InitializeComponent();
    }

    public string Text
    {
        get { return (string) GetValue(TextProperty); }
        set { SetValue(TextProperty, value); }
    }

    public double TextBoxHeight
    {
        get { return (double) GetValue(TextBoxHeightProperty); }
        set { SetValue(TextBoxHeightProperty, value); }
    }

    public double TextBoxWidth
    {
        get { return (double) GetValue(TextBoxWidthProperty); }
        set { SetValue(TextBoxWidthProperty, value); }
    }

    public string Tip
    {
        get { return (string) GetValue(TipProperty); }
        set { SetValue(TipProperty, value); }
    }

    public string Watermark
    {
        get { return (string) GetValue(WatermarkProperty); }
        set { SetValue(WatermarkProperty, value); }
    }
} 
```

**签名按钮.xaml：**

```
<UserControl x:Class="Client.Infrastructure.Controls.SignedButton"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="45" d:DesignWidth="245" 
         DataContext="{Binding RelativeSource={RelativeSource Self}}">
<UserControl.Resources>
    <Storyboard x:Key="OnMouseEnter">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="grid">
            <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.25" Value="{Binding HoverOpacity}"/>
        </DoubleAnimationUsingKeyFrames>
        <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Panel.Background).(SolidColorBrush.Color)" Storyboard.TargetName="grid">
            <EasingColorKeyFrame KeyTime="0" Value="{Binding ButtonBackground}"/>
            <EasingColorKeyFrame KeyTime="0:0:0.25" Value="{Binding HoverBackground}"/>
        </ColorAnimationUsingKeyFrames>
    </Storyboard>
    <Storyboard x:Key="OnMouseLeave">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="grid">
            <EasingDoubleKeyFrame KeyTime="0" Value="{Binding HoverOpacity}"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.25" Value="1"/>
        </DoubleAnimationUsingKeyFrames>
        <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Panel.Background).(SolidColorBrush.Color)" Storyboard.TargetName="grid">
            <EasingColorKeyFrame KeyTime="0" Value="{Binding HoverBackground}"/>
            <EasingColorKeyFrame KeyTime="0:0:0.25" Value="{Binding ButtonBackground}"/>
        </ColorAnimationUsingKeyFrames>
    </Storyboard>
</UserControl.Resources>
<UserControl.Triggers>
    <EventTrigger RoutedEvent="Mouse.MouseEnter">
        <BeginStoryboard Storyboard="{StaticResource OnMouseEnter}"/>
    </EventTrigger>
    <EventTrigger RoutedEvent="Mouse.MouseLeave">
        <BeginStoryboard Storyboard="{StaticResource OnMouseLeave}"/>
    </EventTrigger>
</UserControl.Triggers>
<Grid x:Name="grid" Cursor="Hand" Background="{Binding ButtonBackground}">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="50"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="50"/>
    </Grid.ColumnDefinitions>
    <TextBlock Text="{Binding LeftSign}" 
               FontFamily="{DynamicResource OpenSans}" FontSize="{Binding TextSize}"
               HorizontalAlignment="Center" VerticalAlignment="Center"
               TextOptions.TextFormattingMode="Display"/>
    <TextBlock Text="{Binding Text}" 
               FontFamily="{DynamicResource OpenSans}" FontSize="{Binding TextSize}"
               HorizontalAlignment="Center" VerticalAlignment="Center" Grid.Column="1"
               TextOptions.TextFormattingMode="Display"/>
    <TextBlock Text="{Binding RightSign}" 
               FontFamily="{DynamicResource OpenSans}" FontSize="{Binding TextSize}"
               HorizontalAlignment="Center" VerticalAlignment="Center" Grid.Column="2"
               TextOptions.TextFormattingMode="Display"/>
</Grid>
</UserControl> 
```

**签名按钮.xaml.cs：**

```
public partial class SignedButton : UserControl
{
    public static DependencyProperty ButtonBackgroundProperty =
        DependencyProperty.Register("ButtonBackground", typeof (string), typeof (SignedButton));

    public static DependencyProperty CommandParameterProperty =
        DependencyProperty.Register("CommandParameter", typeof (object), typeof (SignedButton));

    public static DependencyProperty CommandProperty =
        DependencyProperty.Register("Command", typeof (ICommand), typeof (SignedButton));

    public static DependencyProperty HoverBackgroundProperty =
        DependencyProperty.Register("HoverBackground", typeof (string), typeof (SignedButton));

    public static DependencyProperty HoverOpacityProperty =
        DependencyProperty.Register("HoverOpacity", typeof (double), typeof (SignedButton));

    public static DependencyProperty LeftSignProperty =
        DependencyProperty.Register("LeftSign", typeof (string), typeof (SignedButton));

    public static DependencyProperty RightSignProperty =
        DependencyProperty.Register("RightSign", typeof (string), typeof (SignedButton));

    public static DependencyProperty TextProperty =
        DependencyProperty.Register("Text", typeof (string), typeof (SignedButton));

    public static DependencyProperty TextSizeProperty =
        DependencyProperty.Register("TextSize", typeof (double), typeof (SignedButton));

    public SignedButton()
    {
        InitializeComponent();
        MouseUp += SignedButtonMouseUp;
    }

    public string ButtonBackground
    {
        get { return (string) GetValue(ButtonBackgroundProperty); }
        set { SetValue(ButtonBackgroundProperty, value); }
    }

    public ICommand Command
    {
        get { return (ICommand) GetValue(CommandProperty); }
        set { SetValue(CommandProperty, value); }
    }

    public object CommandParameter
    {
        get { return GetValue(CommandParameterProperty); }
        set { SetValue(CommandParameterProperty, value); }
    }

    public string HoverBackground
    {
        get { return (string) GetValue(HoverBackgroundProperty); }
        set { SetValue(HoverBackgroundProperty, value); }
    }

    public double HoverOpacity
    {
        get { return (double) GetValue(HoverOpacityProperty); }
        set { SetValue(HoverOpacityProperty, value); }
    }

    public string LeftSign
    {
        get { return (string) GetValue(LeftSignProperty); }
        set { SetValue(LeftSignProperty, value); }
    }

    public string RightSign
    {
        get { return (string) GetValue(RightSignProperty); }
        set { SetValue(RightSignProperty, value); }
    }

    public string Text
    {
        get { return (string) GetValue(TextProperty); }
        set { SetValue(TextProperty, value); }
    }

    public double TextSize
    {
        get { return (double) GetValue(TextSizeProperty); }
        set { SetValue(TextSizeProperty, value); }
    }

    private void SignedButtonMouseUp(object sender, MouseButtonEventArgs e)
    {
        if (CommandParameter != null) Command.Execute(CommandParameter);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T10:10:49.223

这看起来应该使用自定义控件而不是用户控件来完成。它不仅可以帮助您遵守 MVVM 模式，还可以让您更好地控制一切。在你知道怎么做之后，这并不是什么大事。

顺便说一句：尝试 MVVM-Light 框架。它有一个`RelayCommand<T>`你可能喜欢的:)

# c++ - C++ 多态性和覆盖

> ID：12993531
> 
> 赞同：2
> 
> 时间：2012-10-20T23:16:37.690
> 
> 标签：c++, inheritance, polymorphism, overriding

我很难让它在 C++ 中工作，我已经在 C# 中管理它，但我没有太多使用 C++，所以我不确定语法。

这样做的目的是为了一个简单的状态管理器，每个状态都继承自一个称为“状态”的基类。

我已经开始工作，但我似乎无法管理多态性方面。那就是我不能有一个对象“State currentState”并将该对象设置为等于“menuState”并让它运行所需的功能，我知道这是因为它只是找到State类的签名但我不确定如何躲开它。这是一些简化的代码，以便有人可以帮助我理解。

```
// stringstreams
#include <iostream>
#include <string>
#include <sstream>
using namespace std;

// State.h
class State{
public:
  virtual void drawState();
};

// State.cpp
void State::drawState() {
    cout << "Base state.\n";
}

// MenuState.h
class MenuState: public State {
public:
  virtual void drawState();
};

// MenuState.cpp
void MenuState::drawState() {
    cout << "Menu state.\n";
    State::drawState();
}

int main ()
{
    State currentState;
    MenuState menuState;

    currentState = menuState;
    currentState.drawState();

    system("pause");
    return 0;
} 
```

如果您更改“State currentState”以创建 MenuState 的对象，则代码将按我的要求工作，但是我需要它作为父类，以便我可以将当​​前状态设置为我将在未来创建的其他状态，例如作为游戏状态。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T23:19:57.437

由于切片，多态性不适用于普通对象。您必须使用引用或（智能）指针。在您的情况下，不能重新分配作为引用的指针：

```
int main ()
{
    State* currentState = NULL;
    MenuState menuState;

    currentState = &menuState;
    currentState->drawState(); //calls MenuState::drawState()

    NextState nextState; //fictional class
    currentState = &nextState;
    currentState->drawState(); //calls NextState::drawState()

    system("pause");
    return 0;
} 
```

在您的代码中：

```
State currentState;
MenuState menuState;

currentState = menuState; 
```

分配切片`menuState`- 它基本上只是将它的`State`一部分复制到`currentState`，丢失所有其他类型信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T23:23:11.320

将您的代码更改为：

```
int main ()
{
    State *currentState;

    currentState = new MenuState();
    currentState->drawState();

    system("pause");
    delete(currentState)
    return 0;
} 
```

# css - nth-child 没有按预期工作

> ID：12993537
> 
> 赞同：1
> 
> 时间：2012-10-20T23:17:26.753
> 
> 标签：css

我在使用`nth-child(n)`. 可以说我有这样的清单：

```
<ul>
  <li></li>
  <li></li>
  <li></li>
  <li></li>
  <li></li>
  <li></li>
  <li></li>
  <li></li>
</ul> 
```

和款式：

```
li {
  margin: 0 10px 0 0;
}
li:nth-child(6n+6) {
  margin: 0;
} 
```

出于某种原因，这种组合`margin: 0`每四个`li`元素设置一次。我想要实现的是为每六分之一设置这个零边距`li`。你能告诉我我的css应该是什么样子吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T23:20:42.000

`6n+6`意味着从 6 开始，然后从那一刻开始每隔 6 做一次，所以`6n`在这种情况下使用是等效的：

```
li:nth-child(6n) {
    margin: 0;
} 
```

此外，此资源可能很有用：[http ://css-tricks.com/examples/nth-child-tester/](http://css-tricks.com/examples/nth-child-tester/)

如果这对您不起作用，则您的选择器是错误的。使用更具体的东西，`body > ul > li:nth-child(6n)`或者`body > ul > li:nth-of-type(6n)`只会选择每 6 个 li 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T23:22:35.807

它实际上只针对第六个，如[http://jsfiddle.net/6F37a/](http://jsfiddle.net/6F37a/)所示（*虽然`+6`是多余*的）

也许另一条规则正在弄乱利润..

# mercurial - Mercurial : 如何修改特定版本？

> ID：12993539
> 
> 赞同：0
> 
> 时间：2012-10-20T23:17:30.070
> 
> 标签：mercurial, revision

场景如下：

1.  我在本地克隆了一个 Repo 并进行了一些更改，然后提交。

`hg clone test`

`vim abc`

`hg commit`

1.  说上面给了我修订版 1

2.  我将此修订发送给审查。

3.  我进行了更多更改并再次提交。

`vim xyz`

`hg commit`

1.  这给了我们另一个修订版，比如修订版 2

2.  再次，我将其作为新修订版发送以供审核

3.  我进行了更多更改，并进行了一些未提交的更改。

`vim 123`

1.  我收到了更新修订版 1 的请求，并将更多更改作为优先任务。

问题：：

Q1 现在我如何对修订版 1 进行更改？

Q2 我如何获得修订 0 和修订 1 之间的差异来更新我发送的第一个评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T00:16:43.840

1.  这里**没有**变基
2.  'hg help update' 用于返回任何以前的变更集（hg up、编辑、提交、合并）
3.  存储未完成的 123 - 提交、搁置或 mq-patch

# c# - 在 WPF 中高效绘制二维网格

> ID：12993543
> 
> 赞同：2
> 
> 时间：2012-10-20T23:18:03.683
> 
> 标签：c#, wpf, winforms

这是一个 Windows 窗体程序，它绘制了一个由随机着色为黑色或红色的正方形的二维网格：

```
using System;
using System.Drawing;
using System.Windows.Forms;

namespace Forms_Panel_Random_Squares
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            Width = 350;
            Height = 350;

            var panel = new Panel() { Dock = DockStyle.Fill };

            Controls.Add(panel);

            var random = new Random();

            panel.Paint += (sender, e) =>
                {
                    e.Graphics.Clear(Color.Black);

                    for (int i = 0; i < 30; i++)
                        for (int j = 0; j < 30; j++)
                        {
                            if (random.Next(2) == 1)
                                e.Graphics.FillRectangle(
                                    new SolidBrush(Color.Red),
                                    i * 10,
                                    j * 10,
                                    10,
                                    10);
                        }
                };
        }
    }
} 
```

生成的程序如下所示：

![在此处输入图像描述](../Images/4cb0dc5cc5ab45a5a7a8624d98a408fa.png)

`Rectangle`这是使用每个正方形的对象对WPF 的（天真）翻译：

```
using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;
using System.Windows.Shapes;

namespace WPF_Canvas_Random_Squares
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            Width = 350;
            Height = 350;

            var canvas = new Canvas();

            Content = canvas;

            Random random = new Random();

            Rectangle[,] rectangles = new Rectangle[30, 30];

            for (int i = 0; i < rectangles.GetLength(0); i++)
                for (int j = 0; j < rectangles.GetLength(1); j++)
                {
                    rectangles[i, j] =
                        new Rectangle()
                        {
                            Width = 10,
                            Height = 10,
                            Fill = random.Next(2) == 0 ? Brushes.Black : Brushes.Red,
                            RenderTransform = new TranslateTransform(i * 10, j * 10)
                        };

                    canvas.Children.Add(rectangles[i, j]);
                }
        }
    }
} 
```

由于世界上的每个单元格都有对象的开销，因此 WPF 版本似乎内存效率更低`Rectangle`。

有没有办法以与 Forms 版本一样高效的风格编写这个程序？还是没有办法创建所有这些`Rectangle`对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T22:10:54.223

这是一个纯 WPF 解决方案。`FrameworkElement`是子类。这个新的子类 ( `DrawingVisualElement`) 公开了一个`DrawingVisual`可用于绘制的对象。

```
using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;

namespace DrawingVisualSample
{
    public class DrawingVisualElement : FrameworkElement
    {
        private VisualCollection _children;

        public DrawingVisual drawingVisual;

        public DrawingVisualElement()
        {
            _children = new VisualCollection(this);

            drawingVisual = new DrawingVisual();
            _children.Add(drawingVisual);
        }

        protected override int VisualChildrenCount
        { 
            get { return _children.Count; } 
        }

        protected override Visual GetVisualChild(int index)
        {
            if (index < 0 || index >= _children.Count)
                throw new ArgumentOutOfRangeException();

            return _children[index];
        }
    }

    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            Width = 350;
            Height = 350;

            var stackPanel = new StackPanel();

            Content = stackPanel;

            var drawingVisualElement = new DrawingVisualElement();

            stackPanel.Children.Add(drawingVisualElement);

            var drawingContext = drawingVisualElement.drawingVisual.RenderOpen();

            var random = new Random();

            for (int i = 0; i < 30; i++)
                for (int j = 0; j < 30; j++)    
                    drawingContext.DrawRectangle(
                        random.Next(2) == 0 ? Brushes.Black : Brushes.Red,
                        (Pen)null,
                        new Rect(i * 10, j * 10, 10, 10));

            drawingContext.Close();
        }
    }    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T00:23:23.973

可以混合使用 WPF 和表单。因此，Panel 可以通过`WindowsFormsHost`. 这是一个演示这一点的 WPF 程序：

```
using System;
using System.Windows;
using System.Windows.Forms.Integration;
using System.Drawing;

namespace WindowsFormsHost_Random_Squares
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            Width = 350;
            Height = 350;

            Random random = new Random();

            var windowsFormsHost = new WindowsFormsHost();

            Content = windowsFormsHost;

            var panel = new System.Windows.Forms.Panel()
            { Dock = System.Windows.Forms.DockStyle.Fill };

            windowsFormsHost.Child = panel;

            panel.Paint += (sender, e) =>
                {
                    e.Graphics.Clear(System.Drawing.Color.Black);

                    for (int i = 0; i < 30; i++)
                        for (int j = 0; j < 30; j++)
                        {
                            if (random.Next(2) == 1)
                                e.Graphics.FillRectangle(
                                    new SolidBrush(System.Drawing.Color.Red),
                                    i * 10,
                                    j * 10,
                                    10,
                                    10);
                        }
                };
        }
    }
} 
```

# javascript - Markitup javascript 不会加载

> ID：12993544
> 
> 赞同：0
> 
> 时间：2012-10-20T23:18:44.693
> 
> 标签：javascript, function, undefined, markitup

我正在使用markItUp！用于我网站上的 BBCodes。它以前工作得很好，但是在重新安排了一些东西之后它突然停止工作了，我不知道为什么。当我恢复我的更改时它没有帮助，除非我遗漏了一些东西。

我的标题中有这个：

```
<script type="text/javascript" src="<?php echo $jquery['plugins']['markitup'].'jquery.markitup.js'; ?>"></script>
<script type="text/javascript" src="<?php echo $jquery['plugins']['markitup'].'sets/bbcode/set.js'; ?>"></script>
<link href="<?php echo $jquery['plugins']['markitup'].'skins/simple/style.css'; ?>" rel="stylesheet" type="text/css" />
<link href="<?php echo $jquery['plugins']['markitup'].'sets/bbcode/style.php'; ?>" rel="stylesheet" type="text/css" /> 
```

尽管如此，markItUp 函数在任何其他脚本中都未定义。

Firebug 告诉我它加载得很好，但它仍然无法正常工作。

其他一切都运行良好，即使是 bbcode 设置（另一个 js 文件）也按照应有的方式定义。

我不知道它可能是什么，所以如果您需要了解其他信息，请询问。

# r - 将胡须末端放在箱线图上

> ID：12993545
> 
> 赞同：51
> 
> 时间：2012-10-20T23:18:53.327
> 
> 标签：r, ggplot2, boxplot

我想像`boxplot`函数自动给出的那样在胡须的末端放置垂直线。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-21T22:58:36.260

正如@Roland 所暗示但未实现的那样，您可以使用它`stat_boxplot`来实现它。`_boxplot`两次调用的技巧是将其中一个调用设置`geom`为`errorbar`。

请注意，由于`R`使用笔和纸的方法，建议先实现误差线，然后在顶部绘制传统的箱线图。

使用@Roland 的虚拟数据`df`

```
ggplot(df, aes(x=cond, y = value))  + 
 stat_boxplot(geom ='errorbar') + 
 geom_boxplot() # shorthand for  stat_boxplot(geom='boxplot') 
```

![在此处输入图像描述](../Images/535ebe11fb21b797e3b3162d8ef4c012.png)

[`stat_boxplot`](http://docs.ggplot2.org/current/stat_boxplot.html)( )的帮助`?stat_boxplot`详细说明了计算并保存在`data.frame`

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-07-07T12:22:54.047

要调整胡须线的大小，我们可以使用函数`width = 0.5`内部的参数：`stat_boxplot`

```
set.seed(42)
df <- data.frame(cond = factor(rep(c("A", "B"), each = 500)), 
                 value = c(rnorm(500, mean = 1, sd = 0.2), 
                           rnorm(500, mean = 1.5, sd = 0.1))) 

library(ggplot2)
ggplot(df, aes(x = cond, y = value)) +
       stat_boxplot(geom = "errorbar", width = 0.5) +  
       geom_boxplot() 
```

[![在此处输入图像描述](../Images/ccc00d518f161b4b806602d6ac4e36b4.png)](https://i.stack.imgur.com/A602a.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-21T09:13:55.380

It might be possible to use `stat_boxplot` to calculate the whisker ends, but I am not enough of a `ggplot2` wizard, so I use the base function for that.

```
set.seed(42)
df <- data.frame(cond = factor( rep(c("A","B"), each=500) ), 
                 value = c(rnorm(500,mean=1,sd=0.2),rnorm(500, mean=1.5,sd=0.1)))

whisk <- function(df,cond_col=1,val_col=2) {
  require(reshape2)
  condname <- names(df)[cond_col]
  names(df)[cond_col] <- "cond" 
  names(df)[val_col] <- "value"
  b <- boxplot(value~cond,data=df,plot=FALSE)
  df2 <- cbind(as.data.frame(b$stats),c("min","lq","m","uq","max"))
  names(df2) <- c(levels(df$cond),"pos")
  df2 <- melt(df2,id="pos",variable.name="cond")
  df2 <- dcast(df2,cond~pos)  
  names(df2)[1] <- condname
  df2
}

library(ggplot2)

plot1 <- ggplot(df, aes(x=cond)) 
plot1 <- plot1 + geom_errorbar(aes(ymin=min,ymax=max),data=whisk(df),width = 0.5)
plot1 <- plot1 + geom_boxplot(aes(y=value))
plot1 
```

![boxplot with horizontal at whisker ends](../Images/8dd0ff456bcef90bcac14c87b8814b61.png)

# jquery - 使用 jQuery 设置 SPAN 元素的值

> ID：12993551
> 
> 赞同：2
> 
> 时间：2012-10-20T23:19:56.540
> 
> 标签：jquery, html, spring

我有一个元素，`<span id="userName.errors" class="errors">Enter Your User Name </span>`我想使用 jquery 删除文本“输入您的用户名”或属于“错误”类的任何元素

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-20T23:23:41.117

使用`text`方法：

```
$(".errors").text("New text here"); 
```

这针对具有“错误”类的所有元素。

# java - 学习 Java 中的二维数组 - 学校作业

> ID：12993560
> 
> 赞同：0
> 
> 时间：2012-10-20T23:21:10.367
> 
> 标签：java

我对如何开始我正在做的这个问题有点困惑。我试图有一个二维数组，最终将计算两点之间的距离。我对如何设置阵列感到困惑。它的工作方式是用户会给我点的数量（x，y 坐标）。这将是两个数组（行和列）的长度。我现在需要用用户的输入填充数组。这是我到目前为止的设置方式：

```
 int points, x , y;

    Scanner scan= new Scanner(System.in);

    System.out.println("Please enter the number of points: ");
    points = scan.nextInt();

    int[][] coord = new int[points][points];
    for(int i =0; i < coord.length; i++)
        for(int j = 0; j < coord[i].length; j++){
            System.out.println("Please enter the x coordinates: ");
            x = scan.nextInt();
            System.out.println("Please enter the y coordinates: ");
            y = scan.nextInt();
        }
    } 
```

我试图分别获取 x 和 y 坐标，然后用它们填充数组。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T23:33:44.277

既然你已经知道你只有 x 和 y 坐标，我正在硬编码这个数字。像这样更改您的代码：

```
int[][] coord = new int[points][2]; 
    for(int i =0; i < points; i++) {
            System.out.println("Please enter the x coordinates: "); 
            x = scan.nextInt(); 
            System.out.println("Please enter the y coordinates: "); 
            y = scan.nextInt(); 
           coord[i][0]=x;
            coord[i][1]=y;
    } 
```

# dynamics-crm-2011 - 如何在 Dynamics CRM 插件中获取销售订单的父客户实体？

> ID：12993562
> 
> 赞同：0
> 
> 时间：2012-10-20T23:21:18.650
> 
> 标签：dynamics-crm-2011

我正在开发附加到创建事件的 SalesOrder 实体的 Microsoft Dynamics CRM 2011 插件。我需要获取订单父帐户，才能访问其某些属性。我正在`Execute`方法中尝试以下代码，但执行时不存在密钥“accountid”。

```
Entity entity = (Entity)context.InputParameters["Target"]; // A salesorder entity
EntityReference accountRef = (EntityReference)entity.Attributes["accountid"]; 
```

插件在 Post-operation 阶段注册，以同步模式执行。下图显示了所有配置。

![插件注册配置](../Images/a011ffb586a29513ec76e1f88329a0d8.png)

还有其他方法可以获取 SalesOrder 实体的父帐户吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T16:28:58.980

这似乎是 SDK 文档上的错误，因为即使我将插件配置为在异步模式下运行，salesorder 实体也永远无法使用**accountid属性。****我结束了通过customerid**更改**accountid**属性，它实际上可以是一个帐户（默认行为）。这解决了我的问题，我可以获得对 Order 所属的 Account 的引用。

 **```
Entity entity = (Entity)context.InputParameters["Target"]; // A salesorder entity
EntityReference accountRef = (EntityReference)entity.Attributes["customerid"];
if (accountRef.LogicalName != "account") return; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T08:53:23.700

这里有两个可能的问题。首先，您的插件是否在同步执行模式下注册了 Pre-Operation 事件管道执行阶段？检查这个设置，问题可能就在那里。

其次，如果您正确注册了插件，可能您没有在 SalesOrder 表单上设置 ParentAccount，这可能不是问题 :)**

# java - java Jpanel和边框布局，PAGE_END添加2个组件

> ID：12993568
> 
> 赞同：1
> 
> 时间：2012-10-20T23:22:23.983
> 
> 标签：java, swing, jpanel, jslider, grouplayout

我试图将一个 Jslider 和一个 Jlabel 添加到彼此旁边的 PAGE_END 中，我可以将它们中的每一个都添加到它们的上面，但是将 .add("components name".PAGE_END) 添加到它上面让一个存在吗？

所以基本上我想在右边创建我的滑块和一个jlabel，有人可以帮忙吗，谢谢。

包分配；

```
//import java.awt.FlowLayout;
import java.awt.BorderLayout;
import javax.swing.JLabel;
import javax.swing.JSlider;
import javax.swing.JTextField;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class MyControlPanel extends javax.swing.JPanel {

JSlider slider;
JLabel sliderLabel;
JLabel blank;

public MyControlPanel() {

slider = new JSlider();
slider.setValue(50);
slider.addChangeListener(new MyChangeAction());
slider.setMajorTickSpacing(10); 
slider.setPaintLabels(true); 
slider.setPaintTicks(true); 
slider.setBounds(300, 50, 100, 50);
sliderLabel = new JLabel("50");
blank = new JLabel("     ");

JTextField boundary_length = new JTextField("Boundary Length");
JTextField area = new JTextField("Area");

setLayout(new BorderLayout());

this.add(slider, BorderLayout.PAGE_END);
this.add(sliderLabel, BorderLayout.LINE_END);
this.add(area);
this.add(boundary_length);
this.add(blank, BorderLayout.LINE_START);
}

@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
this.setLayout(layout);
layout.setHorizontalGroup(
    layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
    .addGap(0, 400, Short.MAX_VALUE)
);
layout.setVerticalGroup(
    layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
    .addGap(0, 300, Short.MAX_VALUE)
);
}// </editor-fold>                        
// Variables declaration - do not modify                     
// End of variables declaration                   

public class MyChangeAction implements ChangeListener{

//complete code here

public void stateChanged(ChangeEvent ce) 
{ 
int value = slider.getValue(); 
String str = Integer.toString(value); 
sliderLabel.setText(str); 

}

} // end class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T23:42:33.377

不要使用 BorderLayout 来放置滑块和标签，而是创建一个包含这两个组件的面板，然后使用 BorderLayout 来放置面板。

代替

```
this.add(slider, BorderLayout.PAGE_END);
this.add(sliderLabel, BorderLayout.LINE_END); 
```

和

```
JPanel sliderPanel = new JPanel();
sliderPanel.setLayout( new FlowLayout(FlowLayout.TRAILING));
sliderPanel.add(slider);
sliderPanel.add(sliderLabel);
this.add(sliderPanel, BorderLayout.PAGE_END); 
```

这是基于我用来在对话框底部放置“确定”和“取消”按钮的代码。这可能无法编译 - 但你明白了。使用 FlowLayout 的参数并更改添加到滑块面板的顺序，直到获得所需的外观。

顺便说一句 - 由于您自己进行布局 - 不使用 GUI 构建器 - 您最好摆脱 initComponents 方法和周围的注释。我猜您正在使用 Netbeans 并创建了一个最初配置为使用 GroupLayout 的面板，并且 Netbeans 注入了该代码。现在它只是碍事了。

# php - 如果进程计数超过 X 数量，则 Bash 脚本终止进程

> ID：12993569
> 
> 赞同：1
> 
> 时间：2012-10-20T23:22:29.930
> 
> 标签：php, bash, process, kill

所以，我想知道是否有一种方法可以查看是否可以使用 bash 在产生超过 X 数量的情况下杀死进程的 PID。例如：

假设我们有 10 个使用单独的 PID 运行的 php 进程，所有这些进程都使用命令 /usr/bin/php。如果它达到 10 个进程，有没有办法用 bash 脚本杀死它？（我将让这个脚本在前台使用终端全时运行）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T23:57:48.310

恕我直言，您正在解决错误的问题。我宁愿确保进程本身不能有多个实例（[这里是一个实现清单](https://unix.stackexchange.com/questions/14750/stop-parallel-processing-for-a-cron-triggered-process)），并通过某种指令堆栈给出指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T23:35:17.823

以这种方式杀死东西不是一个好主意，但这就是你所要求的。试试这个（全部在一行上）：

```
j=0; for i in `ps fax | grep '/usr/bin/php'  | grep -v grep | awk '{print $1}'`; do let j=j+1; if [ $j -ge 10 ]; then echo "Killing process $i"; kill $i; fi done 
```

注意你在做什么。HTH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T02:01:49.723

```
#!/bin/bash
program_name=php
let max_instances=10
let poll_interval=60

while true; do 
  if (( count=$(ps -eocomm | grep -c "^$program_name$") > max_instances )); then
    killall "$program_name"
    echo "Found $count $program_name processes. Killed."
  fi
  sleep "$poll_interval"
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T19:52:22.503

当你杀死 php 进程时，你也会杀死客户端连接，这可能会导致客户不满意和收入损失。

如果您正在运行 apache Web 服务器，则可以限制 http 服务器/客户端连接的数量以及 php 进程的数量。

查看您的 apache conf 文件并注意：

```
StartServers
MinSpareThreads
MaxSpareThreads
ThreadLimit
ThreadsPerChild
MaxClients
MaxRequestsPerChild 
```

根据您的 PHP 进程的启动方式（suphp、fcgi、...），可能还有其他选项。

其他 Web 服务器提供类似的设置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T00:42:34.593

这对我有用：

```
#!/bin/bash

#PROGRAM_NAME=/usr/bin/php
PROGRAM_NAME="gedit"
MAX_INSTANCES=2
CURRENT_INSTANCES=0

while true
do
    sleep 1
    let CURRENT_INSTANCES=`ps aux | grep -c $PROGRAM_NAME`
    if [ "$CURRENT_INSTANCES" -ge "$MAX_INSTANCES" ];then
        killall $PROGRAM_NAME
        echo "killing program!"
        exit 0;
    fi
done 
```

# ios - EXC_BAD_ACCESS，OPENGL ES

> ID：12993572
> 
> 赞同：0
> 
> 时间：2012-10-20T23:22:48.020
> 
> 标签：ios, opengl-es, 3d

我收到此错误，我无法弄清楚的原因。是类型问题吗？错误就行了：
“size = objmesh->n_objvertexdata * sizeof(vec3) * sizeof(vec3);”
不知道是什么，一直在折腾。帮助？

```
objmesh = &objmesh[0];

unsigned char *vertex_array = NULL,
*vertex_start = NULL;
unsigned int i = 0, index = 0, stride = 0, size = 0;

size = objmesh->n_objvertexdata * sizeof(vec3) * sizeof(vec3); //this lines gives error

vertex_array = (unsigned char *) malloc(size);
vertex_start = vertex_array;

while (i != objmesh->n_objvertexdata) {
    index = objmesh->objvertexdata[i].vertex_index;

    memcpy(vertex_array, &obj->indexed_vertex[index], sizeof(vec3));
    vertex_array += sizeof(vec3);

    memcpy(vertex_array, &obj->indexed_normal[index], sizeof(vec3));

    vertex_array += sizeof(vec3);
    ++i; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T23:28:40.863

崩溃可能是因为 objmesh 是无效指针（NULL 或只是悬空指针）。当您访问与无效指针相关的内存时，您会崩溃。

或者这是另一个原因。据我了解，objmesh 是一些包含一些数据及其大小的容器。当你这样做时

```
objmesh = &objmesh[0]; 
```

objmesh 不再是容器，而是它保存的数据。所以你应该使用另一个变量进行赋值。

# ruby - 为什么我在发送的电子邮件中得到 =0A，应该在哪里换行？

> ID：12993578
> 
> 赞同：0
> 
> 时间：2012-10-20T23:23:29.020
> 
> 标签：ruby, email

我正在`=0A`进入我的电子邮件中应该有换行符的地方。

```
@article = DB[:posts][:nodeview_id => view, :nodeview => 'article']    
Pony.mail(:html_body => @article[:content], :reply_to => @email, :subject => "New article #{@article[:title]}", :headers => { "X-MC-Tags" => "feedback" } ) 
```

在这种情况下，#@article[:content]} 是

> 苹果
> 
> 香蕉

在数据库内部，没有`\n`或`<br>`标签。

以下是 Pony 的配置方式。

```
Pony.options = { :from => 'Compesh <donotreply@compesh.com>', :to => 'blahblahblah@emails.com', 
                   :via => :smtp, :via_options => { 
                      :address => 'smtp.mandrillapp.com', :port => '587', 
                      :user_name => 'XXX', :password => 'XXXXXX'
                      },
                   :headers => { "X-MC-AutoText" => "yes" }, :charset => 'utf-8' 

                 } 
```

但在我的电子邮件中，我得到

> 苹果=0香蕉

Pony 不让我选择内容类型，我不这么认为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T23:11:35.970

我设法通过将换行符转换为`<br>`标签来解决这个问题。事实证明，它与电子邮件的内容类型或编码无关。

```
mystring.gsub(/(?:\n\r?|\r\n?)/, '<br>') 
```

这个特别通用的正则表达式函数，具有覆盖 DOS、*NIX、Mac 和意外无效行结尾的方法。

# mysql - Segue 没有过渡到下一个视图？

> ID：12993585
> 
> 赞同：0
> 
> 时间：2012-10-20T23:24:58.007
> 
> 标签：mysql, ios, xcode

我已经尝试了 3 个多小时来解决这个问题。在我成功授权使用 facebook 登录后，当视图尝试转换到下一个视图时，它会因 sigbart 错误而崩溃：[4923:c07] ***由于未捕获的异常 'NSUnknownKeyException' 而终止应用程序，原因：'[ setValue:forUndefinedKey: ]：此类不符合键 SegueToScene1 的键值编码。

这是我的场景：

```
- (IBAction)loginButtonTouchHandler:(id)sender  {
    // Set permissions required from the facebook user account
    NSArray *permissionsArray = @[ @"user_about_me", @"user_relationships", @"user_birthday", @"user_location"];

    // Login PFUser using facebook
    [PFFacebookUtils logInWithPermissions:permissionsArray block:^(PFUser *user, NSError *error) {
        [_activityIndicator stopAnimating]; // Hide loading indicator
      if (user.isNew) {
            NSLog(@"User with facebook signed up and logged in!");
            [self performSegueWithIdentifier: @"SegueToScene1"
                                      sender: self];
        } else {
            NSLog(@"User with facebook logged in!");
            [self performSegueWithIdentifier: @"SegueToScene1"
                                      sender: self];
        }}];

    [_activityIndicator startAnimating]; // Show loading indicator until login is finished
} 
```

**我的问题是，为什么 xcode 一直拒绝 segue？**

编辑：我删除了我的 segue 并添加了一个新的“SegueMain”，然后更改了代码以反映这一点，但奇怪的是，它仍然返回与 SegueToScene1 相同的错误。这有多奇怪？那个标题没有留下任何痕迹......任何地方。然而，它仍然...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T05:11:42.333

我想您在界面构建器中连接了一些东西来执行 SegueToScene1 segue。要找到它，您可以尝试搜索故事板的纯文本版本，或者您可能应该知道它在哪里。

# css - 在 Nivo Slider 插件中重新定位一个图像

> ID：12993586
> 
> 赞同：5
> 
> 时间：2012-10-20T23:25:00.820
> 
> 标签：css, image, position, nivo-slider

我对 Web 开发和 jQuery 很陌生，所以请多多包涵。

我在我正在开发的网站上使用 Nivo Slider。这是一个响应式网站，我希望滑块在所有屏幕尺寸上都很容易看到。我在我的 CSS 中设置了一个断点，以便当网站达到其最小尺寸（大约移动屏幕的尺寸）时，滑块设置为 200% 宽度，并隐藏溢出，以便图像更大。

这很好用，但是在这种尺寸下，您只能看到滑块的中心，而侧面则被屏幕边缘裁剪掉。对于我使用的大多数图像，这不是问题，但是其中一张被裁剪得很尴尬。重新定位整个滑块很容易，但我想尝试将这个 ONE 图像移到上面，以便在小屏幕上更好地看到它。

我添加到默认 nivo-slider.css 的 CSS 是：

```
@media screen and (max-width: 31.25em) { /* 500px ÷ 16px */

.slider-wrapper{
    overflow: hidden;
}

.nivoSlider {
    left: -50%;
    width:200%;
}

.nivo-caption {
    margin-left: 25%;
    width: 50%;
}

} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:35:23.293

只需使用 CSS，您就可以为该特定图像添加一次性类型类，并将其放入您的 @media 查询中：

`.my-one-off { left:??px; margin-right:??px }`

您也可以使用 jQuery 搜索该图像（如果我没记错的话，Nivo 使用 jQ 库）。

`$('img[src*="one-off.jpg"]').css('margin-left',35); // just an example`

或者

`$('img[src*="one-off.jpg"]').addClass('my-one-off');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T00:04:08.673

我看了nivo-slider3.1。为了仅选择特定图像并将其向左移动，您可以在 css 中使用以下内容：

```
img[src="YourSpecialPic.jpg"]{
  left:50px !important;
} 
```

您还可以使用 HTML 中的以下 img 属性为特定幻灯片设置自定义动画：

```
data-transition="slideInLeft" 
```

您可以子任何属性以获得所需的效果，但我认为这会成功。

笔记：

根据您使用的效果将确定是否会弄乱动画（例如，切片动画在执行左移后变得搞砸了。slideInLeft 动画似乎工作正常。）。

我没有快速或简单的解决方案来修复该特定幻灯片的所有动画效果，但我确信 javascript 中的条件语句可以实现它（我只是不够聪明）。

# scala - 在 Scala 中使用一系列按名称参数进行验证？

> ID：12993587
> 
> 赞同：3
> 
> 时间：2012-10-20T23:25:09.420
> 
> 标签：scala

我想为所有返回的操作序列实现验证`Either[Error,Item]` 它应该是快速失败的（在我最初的需要中），我的意思是，返回 Either[Error,Seq[Item]]。如果有错误，很明显我不希望执行以下操作。但将来我可能想收集所有错误，而不是只返回第一个错误。

我知道 Scalaz 可以完成这项工作，但现在我完全不了解 Scalaz 的所有部分，而且我很确定有一种更简单的方法可以在不使用 Scalaz 的情况下完成这项工作，但例如使用名称参数。

有没有办法按顺序存储按名称参数？这样我就可以创建一系列代表我的操作的按名称值？

我的意思是，某种类型`Seq[=> Either[Error,Item]]` 然后我可以做一些事情，比如调用 takeWhile 或 collectFirst 或类似的东西，而不需要在创建序列之前执行所有操作？我希望仅在对序列进行迭代时执行操作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T04:40:15.633

您确实可以使用 a`Seq[() => Either[Error, Item]]`在集合创建时推迟计算。所以例如

```
val doSomething1: () => Either[Error, Item] = () => { println(1); Right(1) }
val doSomething2: () => Either[Error, Item] = () => { println(2); Right(2) }
val doSomething3: () => Either[Error, Item] = () => { println(3); Left("error") }
val doSomething4: () => Either[Error, Item] = () => { println(4); Right(3) }
val doSomething5: () => Either[Error, Item] = () => { println(5); Left("second error") }
val l = Seq(doSomething1, doSomething2, doSomething3, doSomething4, doSomething5) 
```

（在示例中 s 是 s 并且`Item`s是s）`Int``Error``String`

然后，您可以使用以下递归函数处理它们在第一次失败时延迟停止：

```
def processUntilFailure(l: Seq[() => Either[Error, Item]]): Either[Error, Seq[Item]] = {
  l.headOption.map(_.apply() match {
    case Left(error) => Left(error)
    case Right(item)  => processUntilFailure(l.tail).right.map(_ :+ item)
  }).getOrElse(Right(Nil))
} 
```

所以现在当我跑步时`processUntilFailure(l)`

```
scala> processUntilFailure(l)
1
2
3
res1: Either[Error,Seq[Item]] = Left(error) 
```

如果你想生成一个`Either[Seq[String], Seq[Int]]`（处理所有操作）。你可以做一点改变：

```
def processAll(l: Seq[() => Either[Error, Item]]): Either[Seq[Error], Seq[Item]] = {
  l.headOption.map(_.apply() match {
    case Left(error) => processAll(l.tail) match {
      case Right(_) => Left(Seq(error))
      case Left(previousErrors) => Left(previousErrors :+ error)
    }
    case Right(item)  => processAll(l.tail).right.map(_ :+ item)
  }).getOrElse(Right(Nil))
} 
```

如您所见，唯一的变化是模式匹配中的左大小写。运行这个：

```
scala> processAll(l)
1
2
3
4
5
res0: Either[Seq[Error],Seq[Item]] = Left(List(second error, error)) 
```

`processAll`可以用泛型`foldLeft`替换`l`

```
val zero: Either[Seq[Error], Seq[Item]] = Right(Seq[Item]())
l.foldLeft(zero) { (errorsOrItems: Either[Seq[Error], Seq[Item]], computation: () => Either[String, Int]) =>
  computation.apply().fold(
    { (error: String) => Left(errorsOrItems.left.toOption.map(_ :+ error).getOrElse(Seq(error))) },
    { (int: Int) => errorsOrItems.right.map(_ :+ int) })
} 
```

`processUntilFailure`也可以，但不容易。因为从弃牌中提前中止是很棘手的。当您发现自己需要这样做时，这里有一个[关于其他可能方法的好答案。](https://stackoverflow.com/questions/12892701/abort-early-in-a-fold)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T02:29:02.410

您应该可以使用 type 来完成此操作`Seq[Function0[Either[Error, Item]]]`。 `Function0`显然，是一个零参数函数。其余的应该是不言自明的。

Scalaz`IO`正是为此目的提供了该类型，因此您实际上也可以使用它。但是，如果您刚刚开始使用 Scalaz，您可能还不想这样做。

# matlab - MATLAB：在 RGB 立方体内绘制线条

> ID：12993588
> 
> 赞同：1
> 
> 时间：2012-10-20T23:25:32.343
> 
> 标签：matlab, graph-visualization

我是 MATLAB 新手，虽然我找到了几种创建和显示 RGB 立方体的方法，但我还没有弄清楚如何在其中绘制一些东西。

这里有一些上下文：我有一些在 javascript/html5 中实现的[颜色循环方法。](http://www.effectgames.com/effect/article.psp.html/joe/Old_School_Color_Cycling_with_HTML5)具体来说，我的第一次尝试天真地在 RGB 颜色空间中提供的“端点”之间进行插值，另一种方法在 HSV 颜色空间中执行类似的转换。

我想做的是获得一些几何直觉，如果我要绘制 RGB 立方体中的过渡，我的不同颜色循环模型实际上是什么样的。因此，为此，我需要执行以下操作：

**1\. 创建一个 RGB 多维**数据集（我已经可以通过剪切/粘贴使用 patch() 的解决方案来做到这一点，该解决方案在[此处找到](https://beagle.whoi.edu/redmine/projects/ifcb-web/repository/revisions/2/entry/trunk/dipum_toolbox_registered/dipum_1.1.3/rgbcube.m)

**2\. 在一个半透明的 RGB Cube 中绘制我的颜色循环模型，从 1**

将不胜感激任何帮助！

# facebook - 为用户提供一种去标记他们的 Facebook 照片的方法

> ID：12993592
> 
> 赞同：0
> 
> 时间：2012-10-20T23:27:43.080
> 
> 标签：facebook, tagging

我经营一个社交会员俱乐部，我的网站用户可以登录我的网站，每个用户都有自己的个人资料页面。

在我的每个用户的个人资料页面上，我想显示在 Facebook 上标记为该用户的照片列表。我知道这部分是可能的。

我正在努力解决的问题是让我的每个用户都能够在列表中显示的每张照片中“取消标记”自己。“取消标记”应该直接从我的网站进行。这可能吗？我怎么能这样做？

希望有人可以提供帮助/有想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T13:47:48.667

不幸的是，目前还没有 facbeook API 允许删除照片标签。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-04T14:19:14.163

它没有记录，我也没有测试过，但我有机会发出 DELTE 请求

/PHOTO_ID/标签/USER_ID

无论如何，值得通过图形浏览器进行拍摄。

# vba - 无法使用 Word VBA 保存对文本颜色的更改？

> ID：12993593
> 
> 赞同：2
> 
> 时间：2012-10-20T23:27:55.373
> 
> 标签：vba, ms-word, word-2010

我正在尝试使用 Word VBA 设置文本颜色。但是，Word 似乎并没有将颜色变化视为“变化”。以下面的 VBA 代码为例，我运行后，Word Undo 不包含任何内容。如果我直接退出 Word，Word 不会提示保存更改。你能帮忙评论一下吗？非常感谢您的意见！

```
Public Sub Test()
    ActiveDocument.Range.Font.TextColor = wdColorBlue
End Sub 
```

PS：Windows 7 SP1 X64 上的 Word 2010 x86。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:16:19.957

不要使用 TextColor 属性，而是使用 Color 属性：

```
ActiveDocument.Range.Font.Color = wdColorBlue 
```

如果您这样做，使用 Font.Color，Word 将注册更改并将其视为要撤消的内容。TextColor 属性不是 Word 正式可配置的属性；文档将其定义为只读。您可以通过 TextColor 属性有效地更改文本颜色的事实是异常的，因为在键入“Font”时 vba 的智能感知会显示 TextColor 而不是 Color。尽管如此，很明显（至少在一个级别）Word 将 TextColor 视为只读，因此它不会完全注册对该属性的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-06T15:05:26.097

词 2013

我尝试了下面的代码，没有问题。撤消适用于每个命令行。关闭时 Word 照常提示保存更改

```
Public Sub Test()
   ActiveDocument.Range.Font.TextColor = wdColorBlue
   ActiveDocument.Range.Font.TextColor = wdColorBrightGreen
   ActiveDocument.Range.Font.TextColor = wdColorRed
End Sub 
```

# c++ - 如何从线程函数返回值？

> ID：12993594
> 
> 赞同：0
> 
> 时间：2012-10-20T23:28:00.423
> 
> 标签：c++, multithreading, pointers, pthreads

我有一个这样的结构：

```
struct data{
    int x;
    int y;
} 
```

我有一个看起来像这样的线程函数：

```
void *threadFunction(void *item){
    data *myData = (data*) item;
    int first = 50;
    int second = 10;
    myData->x = first;
    myData->y = second;
    return(void*) myData;
} 
```

我在 main() 中这样调用线程函数：

```
pthread_create(threadID, NULL, threadFunction, &item); 
```

但是当我想使用以下方法将线程函数中的值返回到 main() 中时：

```
struct data* returnedItem;
pthread_join(threadID, (void**) returnedItem;
cout << returnedItem->x << returnedItem->y; 
```

我不确定会发生什么，因为我的程序似乎什么都不做。它编译并运行，但它在某处无限循环或只是等待某事。我完全不确定会发生什么，我只是没有得到任何回应。我究竟做错了什么？我在 main() 中是否缺少一些东西来从 pthread_join 语句中检索值？也许我搞砸了声明中的论点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T01:03:50.993

`pthread_join`在它的第二个参数中使用一个指向 void* 的指针来返回线程的结果，所以你写`pthread_join(threadID, (void**) returnedItem );`. 但是想一想：

```
struct data* returnedItem;
// what is the value of returnedItem?? possibly garbage, lets say it is 0xFEDCBA98
pthread_join(threadID, (void**) returnedItem ); 
```

您将该 garbase 转换为 (void**)，现在在某些时候`pthread_join`想要将线程的结果写入您提供的参数中，所以它说

```
* (void**) 0xFEDCBA98 = thread_return_value; 
```

可是等等！你`pthread_join`要尊重一个无效的指针，它甚至可能会产生像分段错误或更糟的东西，覆盖你最重要的信息之一！所以每当一个函数需要空间来返回一些东西时，你必须为它提供一个有效的内存。有效代码可以是：

```
pthread_join(threadID, (void**) &returnedItem ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T23:34:08.707

你把你的指针弄糊涂了。像这样做：

```
void * p;
pthread_join(threadID, &p);
data * returnedItem = static_cast<data *>(p); 
```

虽然可以*将*指针从 void 指针转换为 void 指针，但您不能假装类型变量`X`（在您的情况下`data *`）实际上是类型变量`Y`（在您的情况下`void *`）。这是不允许的和未定义的行为。

# c++ - 删除字符指针在析构函数中不起作用

> ID：12993598
> 
> 赞同：0
> 
> 时间：2012-10-20T23:29:02.890
> 
> 标签：c++, destructor, delete-operator

我有一个程序，我在其中向用户询问文本文件的名称，打开文本文件对其进行处理（读取，写入），然后关闭文件并退出程序。

程序.h

```
class Program
{
     char* fileName;
public:
     Program();
     ~Program();
     void ReadFile(void);
}; 
```

程序.cpp

```
Program::Program(){
     //contstructor
     fileName=NULL;
}

Program::~Program(){
     cout << "in destructor" ;
     delete []fileName;
}

void Program::ReadFile(void){
     fileName = new char[40];

     cout <<"Please enter the name of the file to open: ";
     cin.clear();
     cin.getline(fileName, 40);

     ifstream file (fileName);

     if(file.is_open()){
          //do stuff
     }
     file.close();
} 
```

现在，当我放入`delete []fileName;`析构函数时，它会在屏幕上输出“”in destructor”，但fileName不会被删除。如果我在fileName被删除后将`delete []fileName;`其放入。为什么会这样？`ReadFile()``file.close()`

我的程序的其余部分运行良好，这就是为什么没有粘贴任何代码的原因。我只是想消除任何内存泄漏，而 fileName 是我唯一遇到的问题，因此我只粘贴了使用 fileName 的代码。

任何帮助表示赞赏。

附加信息：我正在使用 Visual Studio 编写此内容并正在使用内存泄漏检测。这是它的输出：

> 检测到内存泄漏！
> 转储对象 ->
> {132} 位于 0x005D49A0 的普通块，40 字节长。
> 数据：6E 61 6D 65 73 2E 74 78 74 00 CD CD CD CD CD CD
> 对象转储完成。
> 程序“[10772] program1.exe: Native”已退出，代码为 0 (0x0)。

这就是为什么我怀疑`delete []fileName;`没有工作。

也，这就是它的`int main()`样子

```
int main(){
     Program abc;
     abc.ReadFile();
} 
```

哦，而且 Program.h 不能更改。只有 .cpp 可以更改，这是我的要求的一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T23:37:42.530

如果文件名仅在 readFile 中使用 - 那么我建议您将其从 Program 类中删除并使其成为该函数中的自动变量：

```
void Program::ReadFile(void){
     char fileName[40];
     ...
     file.close();
     // no delete [] necessary
} 
```

您的问题可能与

1.  未在构造函数中将文件名初始化为 nullptr
2.  未定义复制 c-tor、赋值运算符
3.  您没有删除 readFile 中的旧文件名

因此，不要将成员变量用作方法的自动变量。

如果您必须拥有此成员变量 - 将其更改为数组 - 不要分配它：

```
class Program {
private:
  // char* filename;
  char filename[40];
}; 
```

[更新]

您的 .h 文件不正确 - 它违反了三规则（参见[http://en.wikipedia.org/wiki/Rule_of_three_(C%2B%2B_programming](http://en.wikipedia.org/wiki/Rule_of_three_(C%2B%2B_programming) )） - 缺少复制构造函数和赋值运算符。所以请注意不要以任何方式复制您的 Program 类，因为您无法更改此标头。

更新后，您的程序中只缺少一件事：

`delete[] filename`在 readFile 的开头添加：

```
void Program::ReadFile(void){
     delete [] filename;
     fileName = new char[40]; 
```

或者（更好） - 每次调用 readFile 时不要重新分配：

```
void Program::ReadFile(void){
     if (!filename)
         fileName = new char[40]; 
```

或者（最好）- 仅在构造函数中分配此内存：

```
Program::Program() : filename(new char[40]) {}
void Program::ReadFile(void){
   // fileName = new char[40]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T00:33:23.833

你确定你`main`的和这里发布的完全一样吗？如果你只是`abc`全局定义，它会在内存转储报告内存泄漏后被释放，你可能会看到无效的报告！您可以在析构函数中插入断点，并查看在析构函数之后或之前是否报告了内存泄漏

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T23:54:27.243

`fileName`显然正在被删除：析构函数中的代码是这样说的。但是，如果您没有显示的代码`ReadFile`多次调用，则该类将泄漏内存，因为每次调用都会`ReadFile`分配一个新的内存块并覆盖指向前一个块的指针。

想想 RAII：资源分配就是初始化。在构造函数中，分配内存块。在析构函数中，将其删除。然后`ReadFile`不必担心分配块。

或者，更好的是，按照@PiotrNycz 的说法，将指针更改为数组。无需动态分配。

# c# - 服务器上的 C# 应用程序和 sql 数据库

> ID：12993602
> 
> 赞同：-7
> 
> 时间：2012-10-20T23:29:24.517
> 
> 标签：c#, asp.net

我想以 c# windows 形式制作一个应用程序，但我希望我的数据库将托管在服务器上。任何人都请帮助我如何使用 c# windows 窗体应用程序访问我的数据库并在托管在 Web 服务器上的数据库中插入数据。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T23:38:53.737

大多数情况下，出于安全原因，您无法直接从您的应用程序访问远程数据库（即使可以，使用服务仍然更好）并且您必须使用服务与其进行通信。看看 WCF 数据服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T04:48:45.100

如果你想使用局域网中的Sql Server，可以很容易的实现，

您所要做的就是在您的 SQL Server 上启用 SQL Browser，正常情况下您可以访问本地数据库，也可以在 LAN 上访问您的 SQL Server。

# ruby-on-rails - rmagick 安装失败

> ID：12993603
> 
> 赞同：0
> 
> 时间：2012-10-20T23:29:25.433
> 
> 标签：ruby-on-rails, bundler

我使用 BitBucket + Source Tree 克隆了两个 ruby​​ 项目。当我执行捆绑安装时，它在一个项目目录中成功运行，但在其他项目目录中失败，并出现以下错误：

```
Installing rmagick (2.13.1) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

    /Users/xyz/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb 
checking for Ruby version >= 1.8.5... yes
checking for gcc... yes
checking for Magick-config... no 
```

谁能帮我确定问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T23:55:38.787

尝试 ：

```
brew install imagemagick 
```

# c++ - 调用抽象类的析构函数

> ID：12993605
> 
> 赞同：2
> 
> 时间：2012-10-20T23:29:43.393
> 
> 标签：c++, virtual-destructor

我有三个班。

```
class Son : public Father;

class Father : public Grandfather; 
```

`Father`是抽象的，也是`Grandfather`。`Son`不是抽象的。

如果我这样做：

```
Son* son = new Son(); 
```

然后这样做：

```
delete(son) 
```

如何确保调用`Father`and的析构函数`Grandfather`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T23:31:47.273

无论如何都会调用指向您的指针的父类的析构函数。

不过，您应该制作顶级类的析构函数`virtual`，这样您就可以删除指向 a 的指针`Grandfather`并确保也调用所有子类的析构函数。不这样做会导致未定义的行为，这总是一件坏事。

一旦一个函数是`virtual`，它对于整个派生树都是虚的，不需要在子类中标记它。但是，这样做通常是一种很好的形式，它可以帮助人们阅读代码。

# stata - Stata 12中的gen和egen有什么区别？

> ID：12993607
> 
> 赞同：20
> 
> 时间：2012-10-20T23:30:19.273
> 
> 标签：stata

有两个不同的命令来生成新变量是有原因的吗？

有没有一种简单的方法来记住何时使用`gen`和何时使用`egen`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-20T23:52:15.383

它们都创建了一个新变量，但使用不同的函数集。`gen`当您对数据集中的其他变量进行简单转换时，您通常会使用，例如

```
gen newvar = oldvar1^2 * oldvar2 
```

在我的工作流程中，`egen`通常在我需要适用于所有观察的函数时出现，例如

```
egen max_var = max(var) 
```

或更复杂的指令

```
egen newvar = rowmax(oldvar1 oldvar2) 
```

计算`oldvar1`和之间的每个观测值的最大值`oldvar2`。我认为分离这两个命令没有明确的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-17T22:45:38.290

## `gen`

`generate`可以缩写`gen`或什`g`至可以与以下数学运算符和函数一起使用：

*   `+`添加
*   `-`减法
*   `*`乘法
*   `/`分配
*   `^`力量

有大量的功能可用。这里有些例子：

*   `abs(x)`x的绝对值
*   `exp(x)`x的反对数
*   `int(x) or trunc(x)`截断为整数值
*   `ln(x), log(x)`x 的自然对数
*   `round(x)`四舍五入到 x 的最接近整数
*   `round(x,y)`x 以 y 为单位四舍五入（即 round(x,.1) 舍入到小数点后一位）
*   `sqrt(x)`x 的平方根
*   `runiform()`返回 0 到接近 1 之间的均匀分布数
*   `rnormal()`返回遵循标准正态分布的数字
*   `rnormal(x,y)`返回服从正态分布的数字，平均值为 x，sd 为 y

## `egen`

命令中实现了许多更复杂的可能性`egen`，如下例所示：

*   `egen nkids = anycount(pers1 pers2 pers3 pers4 pers5), value(1)`
*   `egen v323r = rank(v323)`
*   `egen myindex = rowmean(var15 var17 var18 var20 var23)`
*   `egen nmiss = rowmiss(x1-x10 var15-var23)`
*   `egen nmiss = rowtotal(x1-x10 var15-var23)`
*   `egen incomst = std(income)`
*   `bysort v3: egen mincome = mean(income)`

详细的使用说明可以在这个[链接](http://wlm.userweb.mwn.de/Stata/wstatgen.htm)中找到。

# python - Django - 如何使需要实现字段？

> ID：12993609
> 
> 赞同：4
> 
> 时间：2012-10-20T23:30:56.117
> 
> 标签：python, django, django-models

我正在为大约 10 个模型构建一些抽象模型。我需要以某种方式使 1 字段未在抽象模型中声明，但必须在继承模型中声明。怎么做？有什么方法可以使用`NotImplementedError`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T23:54:07.847

如果可能的话，恐怕没有一种简单的方法可以实现这一目标，而无需深入研究 Django。

主要原因是Django 中[`Field`不允许名称“隐藏” 。](https://docs.djangoproject.com/en/dev/topics/db/models/#field-name-hiding-is-not-permitted)这意味着如果你想在作为[`Field`](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/#django.db.models.Field)实例的基础抽象类中声明一个抽象属性，你将无法在子类中重写它，这与正常的 Python 类继承范式相反。引用文档：

> 在正常的 Python 类继承中，允许子类覆盖父类的任何属性。在 Django 中，这对于作为 Field 实例的属性是不允许的（至少目前不允许）。如果基类有一个名为 author 的字段，则不能在从该基类继承的任何类中创建另一个名为 author 的模型字段。
> 
> 覆盖父模型中的字段会导致在初始化新实例（指定在 Model.init 中初始化哪个字段）和序列化等领域出现**困难**。这些是普通 Python 类继承不必以完全相同的方式处理的特性，因此 Django 模型继承和 Python 类继承之间的区别不是任意的。
> 
> 此限制仅适用于作为 Field 实例的属性。如果您愿意，可以覆盖普通的 Python 属性。它也仅适用于 Python 看到的属性名称：如果您手动指定数据库列名，则可以在子模型和祖先模型中出现相同的列名以进行多表继承（它们是列在两个不同的数据库表中）。
> 
> 如果您覆盖任何祖先模型中的任何模型字段，Django 将引发 FieldError。

但是，如果属性不是实例（尽管可能性很小），您将能够通过使用装饰器`Field`来实现您想要的。[`@property`](http://docs.python.org/library/functions.html#property)像这样的东西应该工作：

```
class Person(models.Model):
    def __init__(self, *args, **kwargs):
        super(Person, self).__init__(*args, **kwargs)
        self.last_name

    first_name = models.CharField(max_length=30)

    @property
    def last_name(self):
        raise NotImplementedError

    class Meta:
        abstract = True

class Student(Person):
    home_group = models.CharField(max_length=5)
    last_name = "Doe"  # "models.CharField()" will not work!

class BadStudent(Person):
    home_group = models.CharField(max_length=5)
    # "NotImplmentedError" will be raised when instantiating BadStudent() 
```

您可能还想看看[`abc.abstractproperty`](http://docs.python.org/library/abc.html#abc.abstractproperty). 我不确定它如何与 Django 的模型继承一起工作。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-21T01:07:23.097

你为什么要这么做？？哪些是无法在 AbstractModel 中声明公共字段的原因？

如果您真的想这样做，请使用此处的说明： [在超类构造函数中的子类中添加方法](https://stackoverflow.com/questions/2727762/add-methods-in-subclasses-within-the-super-class-constructor)

# c++ - 作为标准输入从文件中读取

> ID：12993621
> 
> 赞同：0
> 
> 时间：2012-10-20T23:34:46.800
> 
> 标签：c++, loops, file-io

假设我有一个包含一些命令的 main() 函数，例如

```
int main()
{
  ofstream myfile;
  while(!cin.eof()){
  string command; string word;
  cin >> command;
  cin >> word;

  if (command.compare("add") == 0) {
    //do Something
   }

  if (command.compare("use") == 0){
    myfile.open(word);
    myfile >> //loop back into this loop as stdin
    myfile.close();  
  }
} 
```

myfile 的内容将为文件中的每一行提供一个“命令”“单词”字段。我想知道是否有一种方法可以将文件作为输入读取并将其循环回 main() 循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T23:42:21.483

拆分工作：

```
#include <string>
#include <iostream>

void process(std::istream & is)
{
    for (std::string command, word; is >> command >> word; )
    {
        if (command == "add") { /* ... */ continue; }

        if (command == "include")
        {
            std::ifstream f(word);   // or "f(word.c_str())" pre-C++11

            if (!f) { /* error opening file! */ }

            process(f);
            continue;
        }

        // ...
    }
}

int main()
{
    process(std::cin);
} 
```

# fortran - 具有动态内存分配的 MPI 中的段错误

> ID：12993626
> 
> 赞同：1
> 
> 时间：2012-10-20T23:35:39.313
> 
> 标签：fortran, mpi, fortran90

我正在使用 MPI 并行化一个 Fortran 90 程序，我得到了一些真正奇怪的行为。我有一个长度为 nn+1 的数组 ia，我将它从进程 0 分块发送到进程 1，...，ntasks-1。每个进程还有一个列表 proc_start，它告诉 ia 中所有其他进程的起始位置，以及一个列表 pts_per_proc，它告诉每个进程具有的点数。以下代码有效：

```
if (me == 0) then
    print *, 'Eat my shorts'
else
    allocate( ia(pts_per_proc(me+1)+1) )
endif

! If this is the boss process, send the array ia,
if (me == 0) then
    do n=1,ntasks-1
        call mpi_send(ia(proc_start(n+1)),pts_per_proc(n+1)+1, &
            & mpi_integer,n,n,mpi_comm_world,ierr)
    enddo
! but if it's a worker, receive this array.
else
    call mpi_recv(ia,pts_per_proc(me+1)+1,mpi_integer, &
            & 0,me,mpi_comm_world,stat,ierr)
endif 
```

没有段错误。当我注释掉该行时

```
print *, 'Eat my shorts' 
```

无论我在哪里调用 mpi_barrier，它都会出现故障。例如，用代码替换第一位

```
call mpi_barrier(mpi_comm_world,ierr)
if (me /= 0) then
    allocate( ia(pts_per_proc(me+1)+1) )
endif
call mpi_barrier(mpi_comm_world,ierr) 
```

给我一个段错误。我可以改用 mpi_scatterv 来规避这个问题，但我想知道这里出了什么问题——障碍应该保证不会出现任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:24:07.150

语句隐藏的分段错误`print *`并不罕见，并且通常是程序中某处内存损坏的症状。

在这种情况下，Valgrind 的[memcheck](http://valgrind.org/docs/manual/mc-manual.html)工具可能会省去很多麻烦，尽管您需要正确[配置该工具以使其与 MPI 一起使用](http://valgrind.org/docs/manual/mc-manual.html#mc-manual.mpiwrap)（并且可能会出现一些容易检测的误报）。

# java - JPA中的调用方法

> ID：12993627
> 
> 赞同：14
> 
> 时间：2012-10-20T23:35:49.217
> 
> 标签：java, jpa, methods, objectdb

我将 ObjectDB 与 JPA 一起使用。我想调用 myMethod()。例如：

```
entityManager.createQuery("SELECT ... FROM ... WHERE MyClass.myMethod() = 100") 
```

可能吗？在类中的方法之前可能需要任何注释？

```
@Entity
public class MyClass implements Serializable {

    @Basic 
    private int x;

    @Basic
    private int y;

    public int myMethod() {
        return x*1000+y;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T10:22:14.633

JPQL 不完全是一种基于对象的查询语言。您不能定义自己的方法，并且 JPQL 提供的功能非常有限。因此，如果您想遵守 JPA 规范，那么答案是否定的；必须是特定于 JPA 实现的 - DataNucleus JPA 当然允许您在查询语言中拥有自己的方法（作为供应商扩展），不知道您引用的 JPA 提供者 - 尽管如此，它只会执行这样的*查询*如果将该方法的代码放在查询方法实现中（而不是在类中），则为*数据存储*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-04T22:44:23.847

是的你可以！并且不需要额外的注释。

**ObjectDB**是[面向对象的数据库系统](https://pdfs.semanticscholar.org/cb77/d6f62e6e57a4b90444649f7e300afab419bb.pdf)(OODBS) 的实现，因此允许您将数据库项作为对象进行交互，包括调用方法、使用继承和多态等。

这是我拥有的一个简单的工作示例。像这样的课程：

```
@Entity
public class Person {
    private static final long serialVersionUID = 1L;

    @Id @GeneratedValue
    private long id;

    private String firstName;
    private String lastName;

    Person(String firstName, String lastName) {
        this.firstName = firstName;
        this.lastName = lastName;
    }

    public String getFullName() {
        return firstName + " " + lastName;
    }
} 
```

此查询返回正确的结果：

```
entityManager.createQuery(
    "SELECT p FROM Person p WHERE p.getFullName()='John Johnson'", Person.class).getResultList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T14:49:20.167

JPQL 被翻译成 SQL，因此您不能包含 Java 方法调用，因为您的数据库（很可能）不支持 Java。

在 JPA 2.1 中，您将能够使用 FUNCTION 运算符来调用“数据库”函数。一些数据库确实支持在 Java 中定义函数，但通常使用专有的数据库语言（例如 PL/SQL）。

EclipseLink 支持 FUNC 和 FUNCTION 运算符来调用数据库函数。您还可以使用 OPERATOR 运算符定义自己的运算符，它允许您在 Java 中定义自己的自定义数据库函数调用。

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#EclipseLink_special_operators](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#EclipseLink_special_operators)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-21T00:02:10.060

不是您正在寻找的方式。如果您想使用自定义方法，您可以在使用它们之前创建并注册它们。

例如创建如下函数：

```
 public int myMethod(int x, int y){
           return x*1000+y;
        } 
```

`registerFunction()`然后使用`dialect`您的数据库注册此函数。完成后，您可以将查询编写为：

```
 from MyClass data where myMethod(data.x, data.y) =100; 
```

锄头这有帮助。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-21T00:40:30.183

不，你不能那样做。由于 JPA 始终使用准备好的语句（参数化 SQL），因此您只能`WHERE`在 JPQL 查询的子句中设置参数，例如

```
entityManager.createQuery("SELECT .... FROM ... WHERE  
someCondition=:someValue).setParameter("someValue", "parameterValue"); 
```

使方法 ( `myMethod()`) 以某种方式返回该值，并将方法的第二个参数替换为您`parameterValue`的`setParameter()`方法返回的值`myMethod()`。

# javascript - 正则表达式中的“g”标志是什么意思？

> ID：12993629
> 
> 赞同：143
> 
> 时间：2012-10-20T23:36:10.530
> 
> 标签：javascript, regex

`g`正则表达式中的标志是什么意思？

`/.+/g`和 和有什么不一样`/.+/`？

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2012-10-20T23:40:01.070

`g`用于全局搜索。这意味着它将匹配所有事件。您通常还会看到`i`忽略大小写的意思。

参考：[全球 - JavaScript | MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/global)

> “g”标志表示应该针对字符串中所有可能的匹配项测试正则表达式。

没有`g`标志，它只会测试第一个。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2013-07-27T23:50:36.693

Javascript中的示例来解释：

```
> 'aaa'.match(/a/g)
[ 'a', 'a', 'a' ]

> 'aaa'.match(/a/)
[ 'a', index: 0, input: 'aaa' ] 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-10-20T23:39:01.517

`g`是全局搜索标志。

全局搜索标志使正则表达式在整个字符串中搜索模式，创建一个它可以找到与给定模式匹配的所有匹配项的数组。

`/.+/g`所以和之间的区别在于 `/.+/` 版本`g`会发现每一个出现而不是第一次出现。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-08-06T03:29:16.940

正如@matiska 指出的那样，`g`标志`lastIndex`也设置了属性。

这样做的一个非常重要的副作用是，如果您对匹配的字符串重用相同的正则表达式实例，它最终会失败，因为它只开始在`lastIndex`.

```
// regular regex
const regex = /foo/;

// same regex with global flag
const regexG = /foo/g;

const str = " foo foo foo ";

const test = (r) => console.log(
    r,
    r.lastIndex,
    r.test(str),
    r.lastIndex
);

// Test the normal one 4 times (success)
test(regex);
test(regex);
test(regex);
test(regex);

// Test the global one 4 times
// (3 passes and a fail)
test(regexG);
test(regexG);
test(regexG);
test(regexG);
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-10-21T00:11:44.770

和之间没有区别`/.+/g`，`/.+/`因为它们都只会匹配整个字符串一次。如果正`g`则表达式可以匹配多次或包含组，则会有所不同，在这种情况下，`.match()`将返回匹配的数组而不是组的数组。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2016-09-09T10:14:51.760

除了已经提到的`g`标志的含义外，它还影响`regexp.lastIndex`属性：

> lastIndex 是正则表达式实例的读/写整数属性，它指定开始下一个匹配的索引。(...) 仅当正则表达式实例使用“g”标志指示全局搜索时才设置此属性。

参考：[Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/lastIndex)

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2020-02-14T11:40:25.500

1.  `g` `->`返回所有匹配项
2.  `without g` `->`返回第一个匹配

例子：

1.  `'1 2 1 5 6 7'.match(/\d+/)`返回`["1", index: 0, input: "1 2 1 5 6 7", groups: undefined]`。如您所见，我们只能参加第一场比赛`"1"`。
2.  `'1 2 1 5 6 7'.match(/\d+/g)`返回一个包含所有匹配项的数组`["1", "2", "1", "5", "6", "7"]`。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-01-21T03:25:44.960

正则表达式中的 G 定义了全局搜索，这意味着它将搜索所有行上的所有实例。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-11-15T14:12:54.813

将基于字符串给出示例。如果我们想从字符串中删除所有出现。假设我们想从“hello world”中删除所有出现的“o”和“”

```
"hello world".replace(/o/g,''); 
```

# php - 使用 PDO 向两个 mysql 表提交数据

> ID：12993634
> 
> 赞同：1
> 
> 时间：2012-10-20T23:37:06.477
> 
> 标签：php, mysql, pdo

是否可以将数据提交到具有相同查询的两个表？

我现有的代码如下所示：

```
private function adduser() {

    if (!empty($this->error)) return false;

    $params = array(
        ':user_level' => parent::getOption('default-level'),
        ':name'       => $this->name,
        ':email'      => $this->email,
        ':username'   => $this->username,
        ':password'   => parent::hashPassword($this->password)
    );

    parent::query("INSERT INTO `login_users` (`user_level`, `name`, `email`, `username`, `password`)
                    VALUES (:user_level, :name, :email, :username, :password);", $params); 
```

我没有编写这段代码，所以我有点困惑，因为我通常不使用 PDO。除此之外，我想做的是将两个值添加到我的“url_alias”表中，第一个是 UID（从第一个查询自动递增），第二个是另一个变量值。

由于现有代码的外观，我在搜索时发现的所有示例似乎都不适合我。

谁能帮我一把？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T23:57:06.937

您使用的数据库驱动程序（PDO、Mysqli 等）无关紧要。您的问题纯粹是关于 mysql 功能。Mysql 可以在单个查询中更新和删除多个表中的行，但不能插入。即`INSERT table_1, table_2 ...`不允许。

您必须为要插入数据的每个表运行一个查询。

# ios - facebook 和我的 iOS 是如何通信的

> ID：12993636
> 
> 赞同：0
> 
> 时间：2012-10-20T23:37:45.357
> 
> 标签：ios, facebook

我想使用 iOS 在我的用户的 Facebook 墙/代码/新闻提要上发帖。我了解到 opengraph 可以非常具体地说明用户在我的应用程序中执行的操作，我想将它们集成到我的项目中。

我想我现在意识到我需要运行自己的服务器才能使 opengraph 操作正常工作，对吗？或者这不是必须的吗？据我了解，服务器向 facebook 提供帖子的基本数据，如图像、正文、辅助文本等……我的服务器是否只需要提供 facebook 帖子的数据？每次 Facebook 页面加载我的应用程序内容时都会调用我的服务器吗？还是只完成一次，Facebook 将帖子的内容复制到 Facebook 的服务器中？如果我的服务器没有响应等会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T02:02:58.683

简短的回答：是的，您可能需要一台服务器。

更长的答案：Open Graph 上的 facebook 文档比我在这里能适应的要好得多。如果您还没有，请查看此页面及其链接：[https](https://developers.facebook.com/docs/opengraph/) ://developers.facebook.com/docs/opengraph/ 。

facebook 上发布的操作是一个元组 { user, action, object }。操作和对象的类型在 facebook 开发者应用程序 (developers.facebook.com/apps) 中定义。

帖子的内容由您的 iOS 客户端生成。帖子包含按名称引用操作和按 URL 引用对象的数据。

您的应用程序定义的各个对象通常由 Web 服务器上的页面表示。这些页面被 Facebook 抓取以提取定义对象的元数据，包括图像和文本。我不知道您可以对何时抓取对象的页面做出安全假设。

在编辑对象类型时可以创建示例对象（developers.facebook.com/apps，创建或编辑您的应用程序之一，“编辑开放图”，“添加示例数据”）。但是，由于这些是用于实验的，因此您可以使用它们做的事情相当有限。

# xib - Xcode 4.5 自动更改 .xib 文件

> ID：12993638
> 
> 赞同：10
> 
> 时间：2012-10-20T23:37:50.517
> 
> 标签：xib, xcode4.5

自从我升级到 Xcode 4.5 后，我发现它会自动删除我访问的每个 xib 文件的一部分。这是该部分：

```
<object class="NSMutableDictionary" key="IBDocument.PluginDeclaredDependencyDefaults">
        <string key="NS.key.0">com.apple.InterfaceBuilder.CocoaTouchPlugin.iPhoneOS</string>
        <real value="1536" key="NS.object.0"/>
</object> 
```

我几乎可以忍受这个，但是当我再次访问该文件时，我发现还有更多的“自动”更改。它们更多样化，更难描述，所以除非我真的需要，否则我不会包含示例。

我不明白这里发生了什么。我正在寻找两个答案之一：

1.  有什么方法可以禁用它吗？
2.  为什么会发生这种情况，是否有某种方法可以强制 Xcode 将这些更改应用于所有 xib 文件，以便我可以完成此操作？

如果我能明白到底发生了什么以及为什么，我会感觉好多了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-13T05:52:16.020

有一种方法可以禁用它，但它并非没有自己的问题（如下所列）。您可以在 Finder 中显示 xib 文件，获取文件的信息，然后在常规下，选择锁定。

**问题 1：**如果您像大多数人一样使用源代码控制，您将无法签出较早的提交或将您的分支重置为较早的提交，直到您解锁将由操作更改的所有文件。

**问题 2：**现在，每次在 IB 中查看文件时，都会从 xCode 窗口顶部向下滑动一个弹出窗口，标题为
“MBPreDeliveryComplete.xib”被锁定编辑，您可能无法保存更改。你想解锁吗？

此消息：
“MBPreDeliveryComplete.xib”当前已锁定，因为它在 Finder 中标记为“已锁定”。

带有按钮可以选择解锁或不解锁文件。当然，您可以选择不解锁文件，除非您确实打算进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T21:58:04.003

据我所知，Xcode 会自动重新格式化 nib，`.xib`根据需要从文件中添加/删除。当我发生这种情况时，就***我的目的而言***，似乎没有什么功能上有所不同。

仅针对 SEO，我将提出这一点，因为这在跟踪版本控制（例如 Git）中的更改时非常相关。每次我`.xib`在 Xcode（我使用的是 5.0）中打开旧文件时，它们都会自动更改，并显示在我的 Git 客户端的差异工具中。

**尝试这个：**

* *（如果您没有使用 Git 或某些版本控制，请为项目设置一个 repo 来测试它。）*

1.  看看是否还有剩余`.xib`的 unmodified 可以不修改就打开。

2.  选择/查看它，但不要更改任何内容。

3.  现在在项目导航器中选择/查看不同的文件。如果 旁边出现“M” `.xib`，请重建您的项目并验证其行为是否相同。

如果您想忽略这些，出于版本控制的原因，如果您不是故意对它们进行任何更改，请确保不要暂存/提交它们。

如果要“撤消”自动更改的文件：

1.  右键单击项目导航器中的文件。
2.  转到“源代码管理”>>>“放弃更改...”

或者，通过 Git 或您选择的版本控制工具丢弃它们。

# wordpress - WordPress中的URL缩短

> ID：12993640
> 
> 赞同：2
> 
> 时间：2012-10-20T23:38:17.303
> 
> 标签：wordpress

**修订后的问题** 1\. 我创建了一个帖子，在放置标题后，我得到如下内容：

“http://mysite.com/category/post-name-which-is-quite-long”

保存草稿副本后，我会看到“获取短链接”框，其中包含“http://wp.me/xxyyxx34 ...”之类的内容，如果单击“确定”，则不会发生任何事情。如果我点击编辑按钮，只能编辑帖子名称，不能编辑前面的部分。

我想知道的是：某些实用程序可以为我提供 wordpress 缩短和可接受的完整 url 吗？也就是说，而不是：

“http://mysite.com/category/post-name-which-is-quite-long”

我可以得到这样的东西：

“http://short-url.com/xyzz ？”

另外，如果这确实是可能的，wordpress 会接受它作为 post-title-url 吗？

希望我能提出我的问题！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:50:46.237

当您单击*获取短*链接按钮时，弹出窗口包含一个 wp.me 链接，这是一个有效的缩短 URL，请参阅[此处](http://jetpack.me/support/wp-me-shortlinks/)的用法。

（短 URL 是 wordpress.com 的[内置功能](http://en.blog.wordpress.com/2009/08/14/shorten/)，免费的[WordPress Jetpack](http://jetpack.me/support/wp-me-shortlinks/)插件也添加了此功能。）

# agda - 证明 (prev n) <= m 从 n <= m 开始

> ID：12993642
> 
> 赞同：4
> 
> 时间：2012-10-20T23:38:29.800
> 
> 标签：agda

我有下一个定义：

```
data Nat : Set where
  zero : Nat
  succ : Nat -> Nat

prev : Nat -> Nat
prev zero = zero
prev (succ n) = n

data _<=_ : Nat -> Nat -> Set where
  z<=n : forall {n} -> zero <= n
  s<=s : forall {n m} -> (n<=m : n <= m) -> (succ n) <= (succ m) 
```

很容易证明下一个引理：

```
lem-prev : {x y : Nat} -> x <= y -> (prev x) <= (prev y)
lem-prev z<=n = z<=n
lem-prev (s<=s t) = t 
```

但我找不到证明下一个引理的方法：

```
lem-prev' : {x y : Nat} -> x <= y -> (prev x) <= y 
```

我可以将定义更改`<=`为下一个：

```
data _<='_ : Nat -> Nat -> Set where
  z<=n' : forall {n} -> zero <=' n
  s<=s' : forall {n m} -> (n<=m : n <=' m) -> (succ n) <=' m 
```

在那种情况下，我可以证明`lem-prev'`：

```
lem-prev' : {x y : Nat} -> x <=' y -> (prev x) <=' y
lem-prev' z<=n' = z<=n'
lem-prev' (s<=s' t) = t 
```

但现在我无法证明`lem-prev`。

有没有办法证明`<=`和/或的引理`<='`？如果不是，那么我应该如何更改定义以使其成为可能？

添加：使用 hammar 的辅助引理的解决方案：

```
lem-prev : {x y : Nat} -> x <= y -> (prev x) <= y
lem-prev z<=n = z<=n
lem-prev (s<=s prev-n<=prev-m) = weaken (prev-n<=prev-m) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T01:10:12.440

[您可以在标准库http://www.cse.chalmers.se/~nad/listings/lib/Data.Nat.Properties.html#10457](http://www.cse.chalmers.se/~nad/listings/lib/Data.Nat.Properties.html#10457)中找到该引理的证明

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T01:20:20.537

试试这个引理：

```
weaken : {x y : Nat} -> x <= y -> x <= succ y
weaken z<=n = z<=n
weaken (s<=s n<=m) = s<=s (weaken n<=m) 
```

# jquery - Wordpress 菜单 + jQuery 幻灯片或动画？

> ID：12993644
> 
> 赞同：0
> 
> 时间：2012-10-20T23:38:45.780
> 
> 标签：jquery, wordpress, jquery-ui

我正在尝试使 jQuery 与我的 WP 导航配合得很好。我的目标是隐藏导航，直到单击徽标并让菜单从左侧滑入，很像这个例子，但点击而不是悬停：[http ://tympanus.net/Tutorials/UIElements/SlideOutMenu/#](http://tympanus.net/Tutorials/UIElements/SlideOutMenu/#)

有谁知道在 WP 中隐藏/显示整个 div 的简单方法，可能使用 .animate 或其他任何东西？

我的工作网站：[http ://armandwho.com/site](http://armandwho.com/site)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T23:53:28.050

将 div 设置为`width: 0px;` 然后你可以调用这样的东西

```
$(function(){                  //this is short for $(document).ready(function(){
 $("#clickhere").click(function() { 
    $("#animate1").animate({ width: "100px" }, 1000); 
 });
}); 
```

这将动画，显示 div ，您可以应用 .animate 来更改 css 设置

确保 jquery 被添加到页面的头部，还确保`#clickhere`设置为您点击的 id 并`#animate1`设置为您要显示的 div 的 id

# bash - UNIX - 如何编写 bash 脚本以自动切换到下一个/上一个目录

> ID：12993646
> 
> 赞同：2
> 
> 时间：2012-10-20T23:38:54.840
> 
> 标签：bash, unix, directory, cd

假设我有这个文件夹结构：

```
MainFolder
    Folder1
    Folder2
    Folder3
    ...
    Folder200 
```

我想编写一个脚本，如果我当前在 Folder2 中并执行该脚本，它将自动更改到列表中的下一个目录，在本例中为 Folder3。限制是文件夹可以有任何名称，我不能重命名它。

所以我的问题是：

1) 我如何知道列表中的下一个目录是什么？我想知道一个目录的子目录是否有一个顺序索引号，我可以用它来知道接下来是什么目录。

2）由于我想在脚本末尾显示新目录的名称，有没有办法只显示目录名称？（例如：Folder3 而不是 /home/path/to/dir/Folder3 这是“pwd”的结果）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T23:41:53.203

1.  什么定义了处理目录的顺序？如果您的目录名称中没有空格和其他特殊字符，您可以使用`ls`按顺序列出目录，然后在当前目录后面找到名称：

    ```
    cwd=$(basename $PWD)
    nwd=$(ls .. | awk "/^$cwd$/ { found = 1; next; } { if (found) { print; found = 0 } }")
    if [ -d ../$nwd ]
    then cd ../$nwd
    fi 
    ```

2.  `basename $PWD`使用或找到目录的名称（仅）`${PWD##*/}`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T23:53:25.723

假设序列没有漏洞，这应该可行。

```
cdn()
{
  cd ${PWD%%[0-9]*}$(( $(echo $PWD | sed 's/.*[^0-9]//')+1))
} 
```

编辑：似乎我忽略了“目录可以有任何名称”声明。从你的例子中，我假设他们有一个尾随的数字 id ...

如果您在示例中使用随机名称而不是 Folderxx，则会更清楚。

Edit2：这是一个适合您要求的 shell 函数：

```
cdn()
{
    for i in $(echo "/\/$(basename $PWD)$/
+1,\$p
Q" | ed -s !"ls -d ../*" | tail -n +2)
    do
        \cd $i 2>/dev/null && echo $(basename $PWD) && break
    done
} 
```

# c++ - C++ 中的 cin.ignore() 和 cin.clear()

> ID：12993649
> 
> 赞同：1
> 
> 时间：2012-10-20T23:39:11.513
> 
> 标签：c++, buffer, cin

所以我理解了一段代码：

```
cin.ignore(80, '\n'); 
```

将清除最多 80 个字符的缓冲区，直到它返回（Enter 键）并停止......对吗？

以下是问题...

`cin.ignore();`1）不带参数的简单操作有什么不同？在什么情况下哪个更好用？

2）`cin.clear();`说它清除错误标志......这是什么意思？什么是错误标志，为什么要清除它们？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T23:51:01.357

每当对流对象的某些操作失败时，就会在流对象上设置错误标志。一旦流出错，在您重置错误状态之前，无法对其进行进一步的操作。

这是一个简单的例子：

```
std::istringstream iss("ABC123");

int n;
iss >> n;

assert(!iss); 
```

现在流是错误的。但是，其中仍有数据，可能值得重新设置并重试：

```
iss.clear();  // note: this must come first!

std::string token;
iss >> token;

assert(iss); 
```

除了再次提取之外，您还可以`iss.ignore()`在 之后调用`clear()`，以防您知道在重试之前必须忽略什么。

通常，我发现这种反复试验并不是一个很好的方法。我总是`getline`先在流上使用以获得完整的线条。这只能在流已用尽（文件结尾或字符串结尾）时失败。*然后*您可以通过专用的解析逻辑继续处理每一行，并且可以以最合适的方式处理错误。原始流上的错误标志过于粗糙，无法进行优雅的控制流设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T06:39:10.990

我可以回答你的第二个问题。当您尝试输入两个不同的段落时，cin.clear() 函数很有用。例如 ：

```
std::vector<std::string> veca,vecb;
std::string x;
while(getline(std::cin,x))
     veca.push_back(x);
cin.clear();
while(getline(std::cin,x))
     vecb.push_back(x); 
```

如果您没有使用 cin.clear() 函数，则`vecb`一无所获，因为 cin 之前遇到了文件结尾。希望这会有所帮助。

# objective-c - 如何在目标 C 中编写委托模式

> ID：12993650
> 
> 赞同：1
> 
> 时间：2012-10-20T23:39:19.710
> 
> 标签：objective-c, ios, delegates, protocols

我试图`VenueIDController`通过实现委托/协议来传递 JSON。但是它似乎不起作用。请让我知道我错过了什么。我什至在 fetch 方法中输入了一个日志，以查看它是否被调用，但它甚至没有记录，这意味着它没有被调用，请帮忙。

我有一个`FetchVenuesViewController.h`

```
#import "VenueTableViewController.h" 
#import "VenueIDController.h"

@interface FetchVenuesViewController : UIViewController< VenueTableViewControllerDelegate, VenueIDControllerDelegate>{
    NSDictionary* venueJSON;
    NSDictionary* idJSON;

};

@property (strong) NSDictionary* idJSON;

- (void)VenueFetch;

- (void)IDFetch;

@end 
```

在`FetchVenuesViewController.m`

```
@synthesize idJSON;

- (void)IDFetch {

    //request some webservice 

    NSData *data = [NSURLConnection sendSynchronousRequest:request
                                         returningResponse:&response
                                                 error:&error];
    //save the response

    if (data) {

        id IDJSON = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:&error];
        if (!IDJSON) {
           //handle error

        }
        else {

        //do something

        }

    } else {
        // fetch failed

    }

    activityIndicator.hidden = NO;
}

-(NSDictionary *)getID{
    [self IDfetch];
    NSLog(@"json%@",idJSON);
    return idJSON;
} 
```

在`VenueIDController.h`

```
@protocol VenueIDControllerDelegate;

@interface VenueIDController : UIViewController{

}

@property (assign) id <VenueIDControllerDelegate> delegate;
-(IBAction)getIDData:(id)sender;

@end

@protocol VenueIDControllerDelegate <NSObject>
-(NSDictionary *)getID;
@end 
```

并且在`VenueIDController.m`

```
@interface VenueIDController (){
    NSMutableArray* IDData;
    UIImage* IDBarcode;
}
-(void) displayIDData:(NSDictionary*)data;
@end

@implementation VenueIDController
@synthesize delegate;

-(void) displayIDData:(NSDictionary*)data{

    [delegate getID];

    NSDictionary* idJSON = data;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T00:00:31.363

这似乎是错误的：

```
-(void) displayIDData:(NSDictionary*)data{

    [delegate getID];

    NSDictionary* idJSON = data;

} 
```

您正在调用委托方法并丢弃其结果。

# arrays - 查找两个排序数组中的共同元素

> ID：12993655
> 
> 赞同：5
> 
> 时间：2012-10-20T23:40:12.667
> 
> 标签：arrays, algorithm, language-agnostic

> **可能重复：**
> [两个排序数组的交集](https://stackoverflow.com/questions/2400157/the-intersection-of-two-sorted-arrays)

我们有两个排序数组 A 和 B，除了将一个与其他数组中的所有元素进行比较之外，如何设计一个最佳算法来找到具有它们共同元素的数组？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-20T23:43:07.667

持有两个指针：每个数组一个。

```
i <- 0, j <- 0
repeat while i < length(arr1) and j < length(arr2):
    if arr1[i] > arr2[j]: increase j
    else if arr1[i] < arr2[j]: increase i
    else : output arr[i], increase both pointers 
```

这个想法是，如果对数据进行排序，如果元素在一个数组中“太大”，那么对于数组中剩余的所有其他元素来说，它将“太大”——因为它是排序的。

此解决方案需要对数据进行一次遍历。`O(n)`（也有很好的常数）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-20T23:57:34.280

如果两个数组（例如，`A`有`N`元素和`B`有`M`元素）的长度相似，那么最好的方法是在另一个数组中对一个数组的元素执行*线性搜索。*当然，由于数组已排序，下一次搜索应该从上一次搜索停止的地方开始。这是“排序数组合并”算法中使用的经典原理。上的复杂性`O(N + M)`。

如果长度明显不同（例如`M << N`），那么更优化的方法是遍历较短数组的元素并使用*二*分搜索在较长数组中查找这些值。复杂性就是`O(M * log N)`这种情况。

如您所见`O(M * log N)`，`O(N + M)`如果`M`比 小得多，则比 好`N`，否则更糟。

应该触发从一种方法切换到另一种方法的阵列大小的差异取决于一些实际考虑。如果应该根据您的数据的实际实验来选择。

这两种方法（线性和二进制搜索）可以“混合”成一个算法。让我们假设`M <= N`。在这种情况下，让我们选择*step* value `S = [N / M]`。您从数组中获取第一个元素，并使用 step对该数组中的元素`A`执行*跨式*线性搜索，这意味着您检查元素等等。一旦找到可能包含您正在搜索的元素的索引范围，您就切换到该数组段内的*二进制*搜索。完毕。对 的下一个元素的跨接线性搜索从前一个搜索停止的地方开始。（作为旁注，选择`B``S``B[0], B[S], B[2*S], B[3*S], ...``[S*i, S*(i+1)]`*`B``A``S`等于 2 的幂）。*

 *这种“混合”算法是现有的两个排序数组的最渐近最优搜索/合并算法。然而，在实践中，根据数组的相对大小选择二进制或线性搜索的更简单方法效果很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T23:51:24.377

> 除了将一个与其他数组中的所有元素进行比较

您必须比较 A[] 和 B[] 才能知道它们是相同的——除非您非常了解它们可以保存什么样的数据。比较的性质可能有很多解决方案，可以根据需要进行优化。

如果数组是非常严格地创建的，即只有已知模式的连续值并且总是从已知点开始，您只需查看每个数组的长度并知道所有项目是否都是公共的。

不幸的是，这听起来不像是一个非常现实或有用的数组，因此您要返回检查 B[] 中的 A[i]*

# java - java google appspot 应用程序我可以移动到另一台服务器吗？

> ID：12993658
> 
> 赞同：0
> 
> 时间：2012-10-20T23:40:45.297
> 
> 标签：java, google-app-engine, gwt

可以将我在 appspot.com 中托管的应用程序移动到另一台服务器。如果可以，步骤和要求是什么？我的应用程序使用 gae java 在 eclipse 中完成

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:40:31.900

不可能完全按照现在的方式获取您的代码，将其设置在不同的服务器中并工作。即使您的整个代码与 App Engine 无关，您的数据存储模型也可能不是。因此，首先您需要定义要迁移到哪个开发环境，然后修改您的代码以使其正常工作。

就您当前的数据而言，您需要创建一个“迁移工具”，该工具将从 App Engine 获取数据并将它们导入您的新环境。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T00:08:22.040

Google Appengine 不提供对您的代码运行的主机的任何控制。如果您设置了付费应用程序，您可以更改**应用程序设置**上的内存/cpu 配置文件，这可能会假定您的应用程序实例需要在不同的虚拟机中运行。您还可以关闭实例（在“**实例**”页面上）。如果没有正在运行的实例，则会在下一个请求时创建一个新实例，并且不太可能在与之前运行应用程序的虚拟机相同的虚拟机上运行。

# scala - 为什么 Scalaz 使用复杂的符号并且没有代码内文档？

> ID：12993659
> 
> 赞同：25
> 
> 时间：2012-10-20T23:40:49.260
> 
> 标签：scala, scalaz

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-21T07:42:57.523

I agree that Scalaz is mostly undocumented. The problem is that it collects a lot of advanced concepts from Haskell (and the underlying mathematics) and documenting them all in detail would become writing a whole book about functional programming (and mathematics). So I believe Scalaz's approach is:

*   If you know and need some concept from functional programming prepared for Scala, you'll most likely find it here.
*   If you don't know it, you'll have to learn it elsewhere.

Let's have a look at your example: If you know [Kleisli categories](http://en.wikipedia.org/wiki/Kleisli_category) and how every monads gives rise to one, the definition is quite self-contained. If you don't, then `KleisliCategory` has no use for you anyway.

^((In my experience, Haskell is better for learning advanced concepts from functional programming. While Scala is far better than Java, it still drags around Java's OO/imperative heritage that clutters things a bit.))

* * *

Considering the Unicode symbols. Looking at sources it seems that they're used only as a syntactic sugar or at least they have a non-Unicode counterpart:

```
def ☆[M[_], A, B](f: A => M[B]): Kleisli[M, A, B] = kleisli(f)
def η[F[_]](implicit p: Pure[F]): F[A] = pure
def cokleisli[W[_], A, B](f: W[A] => B): Cokleisli[W, A, B] = ★(f) 
```

So you can go without them, if you want.

Still, I'm not sure if having them in Scalaz is a good idea. It could make the code impossible to read for someone who lacks the proper fonts. I'd rather prefer pure ASCII symbols.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-21T11:09:45.370

A place to start is to read Learn You a Haskell which covers many concepts.

Watch Chris Marshall's (@oxbow_lakes) scalaz talks: [http://skillsmatter.com/expert/scala/chris-marshall](http://skillsmatter.com/expert/scala/chris-marshall)

Get a copy of Functional Programming in Scala from Manning written by some of the authors of scalaz.

I have a couple of small examples on my blog [http://www.casualmiracles.com/blog/](http://www.casualmiracles.com/blog/)

I would say there is even easier places to start with scalaz than validation, which is the various enrichments on Option like ~foo which returns the value contained in the option or the 'zero' for the options's type (0 for numbers, empty string for String etc).

I forgot about a very detailed series of articles called Learning Scalaz at [http://eed3si9n.com/](http://eed3si9n.com/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-21T22:06:02.087

As with any open-source project, the only really true and acceptable answer to "Why isn't their better documentation?" is "Because no one has written it yet. You are free to volunteer."

(I honestly have no idea whether this answer will result in upvotes or downvotes. Interesting experiment.)

# jsf - 在另一个页面中包含一个 jsp 页面

> ID：12993660
> 
> 赞同：0
> 
> 时间：2012-10-20T23:40:54.587
> 
> 标签：jsf, richfaces

我所有的 JSF 页面都包含以下导入

```
<h:head>
<title>My Registration Page</title>
<link href="stylesheet/reset.css" rel="stylesheet" type="text/css" />
<link href="stylesheet/style.css" rel="stylesheet" type="text/css" />
<link rel="icon" type="image/png" href="images/icons/favicon.png" />
<script language="javascript" src="script/script.js"/> 
```

不是我不想将所有这些行复制并粘贴到我的 xhtml 页面的 head 元素中；但只想包含一个页面，所以我想从头部删除所有这些行并将它们放入另一个文件中，然后只包含那个文件。

亲切的问候

# perl - 不一致的外部命令输出

> ID：12993663
> 
> 赞同：3
> 
> 时间：2012-10-20T23:41:25.933
> 
> 标签：perl, md5

终端成绩单不言自明：

```
iMac:~$ echo -na | md5
0cc175b9c0f1b6a831c399e269772661
iMac:~$ perl -e 'system "echo -na | md5"'
c3392e9373ccca33629d82b17699420f

```

注意，`a`第一个结果的MD5哈希是0cc175b9c0f1b6a831c399e269772661。为什么perl调用同一个命令时结果会不一样？

* * *

顺便说一句，perl 是*为 darwin-thread-multi-2level 构建的 perl 5, version 12, subversion 4 (v5.12.4)*。和系统：Mac OS 10.8、Darwin 12.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T00:01:34.107

`/bin/sh`在 mac 上的shell 中时，`echo -n`不会像在`/bin/bash`. 如果您进入`/bin/sh`并运行`echo -n a`，您可以看到这一点，您的输出应如下所示：

```
sh-3.2$ echo -n a
-n a 
```

所以你从字面上得到`-n a`而不是期望的`a`. 当 perl 系统运行`/bin/sh`以评估您的命令时，`-n a`被传递到 md5 而不是您想要的`a`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T02:25:17.073

具体问题已经得到解答，但我想指出 od 有助于准确理解任何命令输出或文件包含的内容。这对于显示其他非打印字符特别有用。

```
$ echo -n a | od -tc
0000000    a                                                            
0000001

$ perl -e 'system "echo -n a | od -tc";'
0000000    -   n       a  \n                                            
0000005 
```

# codeigniter - Codeigniter 参数

> ID：12993673
> 
> 赞同：1
> 
> 时间：2012-10-20T23:42:41.830
> 
> 标签：codeigniter, codeigniter-2, codeigniter-url, codeigniter-routing

我已阅读 URI 参数用户指南，但仍有一个问题：

[http://codeigniter.com/user_guide/general/routing.html](http://codeigniter.com/user_guide/general/routing.html)

使用以下内容：{http://myapp/locations/1} 我收到 404 错误... {http://myapp/locations} 在主控制器 {http://myapp/ 中适当地执行 index() 函数locations/main/locations/1} 有效，并且该值已正确传递给 index($var)

我在 Main 中确实有其他功能。

如何让第一行工作以清理 URL？

在此先感谢，艾伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T00:07:06.370

`CodeIgniter``domain/controller_name/method-name/method_parameters`在你的第一个 url 中读取一个 url，`http://myapp/locations/1`第一部分 (myapp) 是你的域名，第二部分 (locations) 是你的控制器名称，第三部分应该是控制器的方法名称，在这种情况下你已经通过了`1`，显然没有这样的方法名称，所以它显示错误。

如果您`domain/controller_name`像在此 url 中所做的那样通过`http://myapp/locations`，则 CodeIgniter 将第一部分读取为 the`domain_name`和第二部分`controller_name`，当 url 中没有第三部分时，CodeIgniter`index`默认调用方法/函数，因此您的第二个 url 正在工作.

在您拥有的最后一个网址中`http://myapp/locations/main/locations/1`，它被读作

`myapp`-域名

`locations`-控制器名称

`main`-方法/函数名称

其余的都作为`main`控制器的参数传递。所以请记住，url 的第三部分是`method/function`名称，如果没有给出第三部分，则默认`CodeIgniter`调用该`index`方法，在这种情况下，您必须在该控制器中声明一个默认`index`方法/函数，否则会发生错误。

# arrays - 在子程序中添加到数组（MIPS/Assembly）

> ID：12993676
> 
> 赞同：0
> 
> 时间：2012-10-20T23:43:18.923
> 
> 标签：arrays, assembly, mips

我正在尝试将值添加到子例程内的数组中。我可以将第一个有效值（正数且可被 3 整除）放入数组中，但下一个有效条目不起作用。我可以输入一个有效数字，然后输入一个无效数字，程序运行正常，但两个有效数字使 Spim 停止工作。我花了几个小时试图弄清楚但没有运气。从一个子程序跳转是分配的要求，我有一个工作程序，但缺少所有不必要的（在我看来）子程序。

```
 .data
    array1:                 .word   80
    EnterARVal:             .asciiz "Please enter a number:\t"
    space:                  .asciiz " "
    errormessage:           .asciiz "*****Error: "
    notpos:                 .asciiz " is not a positive number.\n"
    notdiv3:                .asciiz " is not divisible by 3.\n"
    numadded:               .asciiz " added to array.\n"
    EnterElem:              .asciiz "Enter number "
    ARReverse:              .asciiz "The contents of the array in reverse orders is:\n"
    InvalidAR:              .asciiz "Invalid number of array elements, please try again.\n"                     
                    .text

main:                   
                    la  $s0, array1 #array1 pointer
                    li  $t0, 1
begin:                  

                    jal readNum #go to readNum subroutine

                    add $a0, $0, $v0    #stores readNum input to $a0

                    jal verifySize  #jumps to verifySize subroutine

                    add $t1, $v1, $0    #stores 0 or 1 value to $t1

                    beq $t1, $0, begin  #starts over if t1 is 0 or false

                    beq $t1, $t0, numok #goes to numok if t1 is 1 or true

                    numok:  add     $a0, $0, $a0
                            add     $a1, $0, $s0
                            jal     createArray

                 j exit

readNum:                li  $v0, 4
                    la  $a0, EnterARVal
                    syscall

                    li  $v0, 5
                    syscall

                    add $v0, $v0, $0

                    j   $ra

verifySize:             add $t1, $0, $a0

                    li  $t2, 20 
                    li  $t3, 1
                    li  $t4, 0
                    li  $t5, 1

                    slt $t6, $t1, $t3
                    beq $t6, $t3, toolow

                    sgt $t7, $t1, $t2
                    beq $t7, $t3, toohigh
                    beq $t7, $t4, oknum

                    oknum:
                    add $v1, $t5, $0

                    j   $ra

                    toolow:
                    li  $v0, 4
                    la  $a0, InvalidAR
                    syscall

                    add $v1, $t4, $0
                    j   $ra

                    toohigh:
                    li  $v0, 4
                    la  $a0, InvalidAR
                    syscall

                    add $v1, $t4, $0                    
                    j   $ra

createArray:            add     $s1, $a0, $0
                    add     $s0, $a1, $0
                    li  $t0, 0 #counter
                    li  $t2, 1

                    add $a0, $s1, $0
                    li  $v0, 1
                    syscall

    makingarray:        beq $t0, $s1, arraydone

                    jal readNum #go to readNum subroutine

                    add $a0, $v0, $0    #stores number from readNum to $a0
                    jal checkNumPositive    #jump to checkNumPositive subroutine

                    add $t1, $v0, $0
                    beq $t1, $0, positivenum    #if number is positive go to positivenum
                    beq $t1, $t2, notpositive

                    positivenum:
                    jal divisibleBy3
                    add $t4, $v0, $0

                    beq $t4, $0, notdivisibleby3

                        sw  $a0, 0($s0)

                        li  $v0, 1
                        syscall

                        li  $v0, 4
                        la  $a0, numadded
                        syscall

                        add $s0, $s0, 4
                        add $t0, $t0, 1
                        j   makingarray

                        arraydone:                  
                        add $v0, $s0, $0
                        j   $ra                         

                        notpositive:
                        li  $v0, 4
                        la  $a0, notpos
                        syscall

                        j makingarray

                        notdivisibleby3:
                        li  $v0, 4
                        la  $a0, notdiv3
                        syscall
                        j makingarray

#reverseArray:

divisibleBy3:           add $t0, $a0, $0
                    li  $t1, 3

                    div $t0, $t1
                    mfhi    $t2
                    mflo    $t3

                    seq     $t4, $t2, $0

                    add     $v0, $t4, $0
                    j       $ra

checkNumPositive:       li  $t0, 0

                    slt $t1, $a0, $0    #set t1 to 1 if number is less than 0

                    add $v0, $t1, $t0
                    j   $ra

exit:                   li  $v0, 10
                    syscall 
```

感谢任何有关如何修复 createArray 的提示，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:29:41.417

您的主要问题是您使用`.word 80`它只保留一个值为 80 的单词。您可能打算`.space 80`为最多 20 个单词保留空间（这似乎是您的代码中强制执行的限制）。

进一步的问题是您没有遵循关于需要保留哪些寄存器的约定。

例如，您使用`$t0`as counter in`createArray`并且它不会在子例程中保留，不是按照惯例，事实上也不是您的代码（两者都`divisibleBy3`销毁`checkNumPositive`它）。

嵌套子程序调用中未正确保留的类似问题，`$ra`因此返回地址`createArray`被从那里调用的子程序覆盖。

我认为作业的目的是教你这些细微差别。

# iphone - 为什么它没有检测到我正在点击哪个图像

> ID：12993677
> 
> 赞同：0
> 
> 时间：2012-10-20T23:44:02.513
> 
> 标签：iphone, ios6, scrollview

> **可能重复：**
> [使用 CGPoint 跟踪长按手势的确切位置](https://stackoverflow.com/questions/12963004/tracing-the-exact-location-of-the-longpressgesture-with-cgpoint)

它总是给`NSLog`图像按下`0`。我不明白我做错了什么。它从来没有给我我正在按下的图像的编号。即使当我尝试保存图像时，我点击它总是会保存最后一张图像。

```
 - (void)viewDidLoad

{

UIScrollView *imageScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
imageScrollView.delegate = self;
imageScrollView.pagingEnabled = YES;
for (int i = 0; i < 61; i++) {

    CGFloat xOrigin = i * self.view.frame.size.width;

    UIButton *myButton = [UIButton buttonWithType:UIButtonTypeCustom];

    [myButton addTarget:self action:@selector(dismissView:) forControlEvents:UIControlEventTouchUpInside];

    myButton.frame = CGRectMake(xOrigin, 10, 60, 35);

    [myButton.layer setMasksToBounds:YES];

    [myButton.layer setCornerRadius:10.0f];

    myButton.layer.borderWidth = 2;

    myButton.layer.borderColor = [[UIColor whiteColor] CGColor];

    [myButton setTitle:@"Done" forState:UIControlStateNormal];

    myButton.backgroundColor = [UIColor clearColor];

    NSString *imageName = [NSString stringWithFormat:@"image%d.png", i];

    _image = [UIImage imageNamed:imageName];

    _imageView = [[[UIImageView alloc] initWithImage:_image]autorelease];

    _imageView.frame = CGRectMake(xOrigin, 0, self.view.frame.size.width, self.view.frame.size.height);

    UILongPressGestureRecognizer *gestureRecognizer = [[UILongPressGestureRecognizer alloc]
                                                       initWithTarget:self
                                                       action:@selector(handleLongPress:)];

    imageScrollView.userInteractionEnabled = YES;

    [imageScrollView addGestureRecognizer:gestureRecognizer];
    gestureRecognizer.delegate = self;
    [gestureRecognizer release];

    [imageScrollView addSubview:_imageView];

    [imageScrollView addSubview:myButton];

}

imageScrollView.contentSize = CGSizeMake(_imageView.frame.size.width * 61 , _imageView.frame.size.height);

[self.view addSubview:imageScrollView];

 }

- (void)handleLongPress:(UILongPressGestureRecognizer*)gestureRecognizer{

if (gestureRecognizer.state == UIGestureRecognizerStateBegan){
    UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Save Photo", nil];
    actionSheet.actionSheetStyle = UIActionSheetStyleBlackTranslucent;
   [actionSheet showInView:self.view];
    [actionSheet release];

}}

-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {

switch (buttonIndex) {
    case 0:

        [self performSelector:@selector(LongPress:) withObject:nil];

       break;

    default:
        break;

}}

 - (void)LongPress:(UILongPressGestureRecognizer*)gestureRecognizer{

UIView *view  = gestureRecognizer.view;
int index = view.tag;

//UIImageWriteToSavedPhotosAlbum(index, self, @selector(image: didFinishSavingWithError:contextInfo:), nil);
  NSLog(@"image pressed %i", index);          
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T01:14:25.257

因为你从来没有为视图设置标签，所以它默认为 0。说真的，你会问多少次同样的问题？你已经得到了很多很好的反馈，使用它。

1.  [用 CGPoint 追踪长按手势的准确位置](https://stackoverflow.com/questions/12963004/tracing-the-exact-location-of-the-longpressgesture-with-cgpoint)
2.  [滚动视图中的内容偏移](https://stackoverflow.com/questions/12980114/contentoffset-in-scrollview)
3.  [找出滚动视图当前在哪个图像上](https://stackoverflow.com/questions/12983010/work-out-what-image-the-scroll-view-is-currently-on)
4.  [检测用户在 scrollviewdidscroll 中查看的图像对象](https://stackoverflow.com/questions/12990206/detect-image-object-user-is-viewing-in-scrollviewdidscroll)

# javascript - 在javascript的内部div中找到输入文本

> ID：12993686
> 
> 赞同：0
> 
> 时间：2012-10-20T23:47:47.210
> 
> 标签：javascript, html

我想专注于某个 div 内的文本输入，我有这个 html 代码：

```
<div class="place">
<div class="flip">
<div class="front"><img src="myAvatar.png"></div>
<div class="back">
<div class="name">MyName</div>
<input type="password" class="password" placeholder="Password" autocomplete="off">
<div class="button">Sign in</div>
</div>
</div>
</div> 
```

在 javascript 中，我可以检测到何时以这种方式触摸翻转 div：

```
$('.flip').click(function(){
            $('.flip').removeClass('initiate');
            $(this).addClass('initiate');
            //$(this).children('back').children('.password').focus();
        }); 
```

但我想专注于文本输入，我怎么能找到它？我试过这样：

```
$(this).children('back').children('.password').focus(); 
```

但不工作......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T23:50:37.857

`.`你从你的类选择器中省略了：

```
$(this).children('.back').children('.password').focus(); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/UhHs8/)。

但为了简洁起见，我建议将其缩短为：

```
$(this).find('.password').focus(); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/UhHs8/1/)。

参考：

*   [`find()`](http://api.jquery.com/find/).

# android - 第一时间从服务器播放音频文件并下载到SD

> ID：12993687
> 
> 赞同：2
> 
> 时间：2012-10-20T23:47:49.173
> 
> 标签：android

我正在开发一个播放不同音频文件的应用程序，我不想在用户安装时将音频文件与应用程序一起放置，因为它会具有很大的 apk 文件，所以我希望用户第一次播放任何文件以从中获取它url 流式传输并询问他是否要下载它，因此如果他在没有可用连接的情况下播放相同的音频文件，应用程序将检查他的 SD 上的文件并播放它

# javascript - 如何使用动态插入的字段

> ID：12993688
> 
> 赞同：-3
> 
> 时间：2012-10-20T23:47:57.753
> 
> 标签：javascript, jquery

我有以下 div 类“labouritems”，每次用户单击按钮时，它都会将一个新实例插入到 dom 中。

我需要能够计算“.rate”和“.hours”字段并将答案设置为“.total”字段。

现在这仅适用于用户正在处理的“labouritems”实例，即：不应该更新另一个实例上的字段总计，所以基本上只在该行内工作。

下面是我正在使用的 html，下面是我拥有的代码，它仅适用于“labouritems”的第一个实例，但是当我插入一个新实例时，它不会做任何事情。

```
 <div class="labouritems">
        <label for="quote_labouritems_attributes_0_description">Description</label>
        <input class="input-medium" id="quote_labouritems_attributes_0_description" name="quote[labouritems_attributes][0][description]" size="30" type="text" value="concrete the house">
        <label for="quote_labouritems_attributes_0_hours">Hours</label>
        <input class="input-mini hours" id="quote_labouritems_attributes_0_hours" name="quote[labouritems_attributes][0][hours]" size="30" type="text" value="33">
        <label for="quote_labouritems_attributes_0_total">Total</label>
        <input class="input-mini total" id="quote_labouritems_attributes_0_total" name="quote[labouritems_attributes][0][total]" size="30" type="text" value="1089">
        <label for="quote_labouritems_attributes_0_Mup/Hr">Mup/hr</label>
        <input class="input-mini" id="quote_labouritems_attributes_0_muphourrate" name="quote[labouritems_attributes][0][muphourrate]" size="30" type="text" value="0">
          <label for="quote_labouritems_attributes_0_Mup/Total">Mup/total</label>
        <input class="input-mini" id="quote_labouritems_attributes_0_muptotal" name="quote[labouritems_attributes][0][muptotal]" size="30" type="text" value="0">
        <label for="quote_labouritems_attributes_0_Mup/%">Mup/%</label>
        <input class="input-mini" id="quote_labouritems_attributes_0_muppercent" name="quote[labouritems_attributes][0][muppercent]" size="30" type="text">
        <label for="quote_labouritems_attributes_0_Contractor">Contractor</label>

        <input class="input-small" data-autocomplete="/contractors/autocomplete_contractor_firstname" data-update-elements="{&quot;id&quot;:&quot;#quote_labouritems_attributes_0_contractor_id&quot;,&quot;hourly_rate&quot;:&quot;#quote_labouritems_attributes_0_contractor_rate&quot;}" id="quote_labouritems_attributes_0_contractor_name" name="quote[labouritems_attributes][0][contractor_name]" placeholder="Seach" size="30" type="text" value="bing lee">
        <input id="quote_labouritems_attributes_0_contractor_id" name="quote[labouritems_attributes][0][contractor_id]" type="hidden" value="1">
        <label for="quote_labouritems_attributes_0_Rate/hr">Rate/hr</label>
        <input class="input-mini rate" id="quote_labouritems_attributes_0_contractor_rate" name="quote[labouritems_attributes][0][contractor_rate]" size="30" type="text" value="33">
        <label for="quote_labouritems_attributes_0_Work %">Work %</label>
        <input class="input-mini" id="quote_labouritems_attributes_0_progress_percent" name="quote[labouritems_attributes][0][progress_percent]" size="30" type="text" value="55">
        <label for="quote_labouritems_attributes_0_Work $">Work $</label>
        <input class="input-mini" id="quote_labouritems_attributes_0_progress_payment" name="quote[labouritems_attributes][0][progress_payment]" size="30" type="text">

        <input id="quote_labouritems_attributes_0__destroy" name="quote[labouritems_attributes][0][_destroy]" type="hidden" value="false"><a href="javascript:void(0)" class="btn btn-small btn-danger remove_nested_fields" data-association="labouritems">Delete</a>
    </div>​

 var LabourItems = {
   rate: null,
   hours: null,
   total: null,
   init: function(object) {
      this.rate = parseInt($(object).children('.rate').first().val(), 10);
      // var rate = $(object).children('.rate').first();
      this.hours =parseInt($(object).children('.hours').first().val(), 10);
      this.total = this.rate * this.hours;
      this.updateTotal(object);
   },
   updateTotal: function(object) {
      $(object).children('.total').first().val(this.total || 0);
   }
}

//reactTochange for those inputs that you want to observe
$('.hours').on("keyup", function() {
   $('.labouritems').each( function(key,value){
      LabourItems.init(this);
   });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T00:10:07.700

尝试

```
$(documents).on("keyup", '.hours', function() {
    LabourItems.init(this.closest('.labouritems'));
}); 
```

这将
1\. 在文档上附加 hours.keyup 事件，而不是每个 hours 元素
2\. 仅更新元素的总数

# php - 将int转换为float，PHP中的两个十进制值

> ID：12993689
> 
> 赞同：3
> 
> 时间：2012-10-20T23:48:02.527
> 
> 标签：php, casting, integer, decimal-point

> **可能重复：**
> [PHP：将数字显示到小数点后 2 位](https://stackoverflow.com/questions/4483540/php-show-a-number-to-2-decimal-places)

我如何转换一个整数，让我们说`$i=50`一个具有两个十进制值的浮点数：`$m=50.00`？我已经尝试过`(float)$i`，但没有任何反应。

**编辑：**

我需要这样做才能`$i == $m`返回`TRUE`；

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T23:51:16.850

`round((float)$i, 2)` 应该做的伎俩。

该`round`函数是内置的，并将给定的浮点数四舍五入到给定参数中指定的小数位数。

啊，是的，`number_format($var, 2)`也很好！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-21T00:15:04.193

如果您只是使用常规相等运算符 ( `==`) 而不是类型安全的相等运算符 ( `===`)，那么您应该没有任何问题。

将 double 与具有相同值的 int 进行比较：

```
$i = 20;
$m = 20.00;

gettype($i); // integer
gettype($m); // double

$i == $m; // true;
$i === $m; // false, $m is a double and $i is an integer. 
```

但是，如果我们想解决这个问题，我们只需要这样做：

```
$i = (double)$i;
gettype($i); // double
$i === $m; // true! 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-20T23:50:38.943

对于浮点数，小数位数是一种格式化属性，即数字本身不知道这些事情。`float`50 存储为精确整数 50。您需要格式化*数字*（`sprintf`例如使用）以用十进制数字写入。

# javascript - 尝试显示输入文件的图像 onChange 事件

> ID：12993694
> 
> 赞同：1
> 
> 时间：2012-10-20T23:49:04.420
> 
> 标签：javascript, asp.net

我试图在`onchange`输入文件的事件中直接选择图像后显示图像我弄清楚它是如何在所有浏览器中完成的但我被 safari 阻止我试图获取

`inputFile.value`财产，但它返回给我一个虚假的路径，我需要帮助，即使围绕这个问题走动，但我不需要回帖。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T04:42:56.683

假设您的输入和图像如下

```
<img id="PreviewImage" src="" alt="?" style="height:100px;"  />
<input id="ImageFileUpload" onchange="readURL(this);" type="file" runat="server"/>

function readURL(input) {
if (input.files && input.files[0]) {//Check if input has files.
var reader = new FileReader(); //Initialize FileReader.

reader.onload = function (e) {
$('#PreviewImage').attr('src', e.target.result);
$("#PreviewImage").resizable({ aspectRatio: true, maxHeight: 300 });
};
reader.readAsDataURL(input.files[0]);
} 
else {
$('#PreviewImage').attr('src', "#");
}
} 
```

# php - 从 MySQL 和 PDO (PHP) 填充 HTML；foreach 循环无法写入 MySQL 数据

> ID：12993696
> 
> 赞同：0
> 
> 时间：2012-10-20T23:50:05.600
> 
> 标签：php, html, mysql, loops, pdo

正如标题所述，我的目标是使用 MySQL 数据库中的数据生成一个 HTML 表。

我使用的一般方法是合理的，因为我手动编写了一系列单元格，但我正在尝试将其缩放以包含大量字段，因此我正在尝试使用 PHP 和 foreach 循环为单元格编写 HTML与数组。我已经写出了我工作的背景和步骤，既可以为我的问题提供背景，也可以为处于类似情况的人们提供一般帮助。但是，我知道我遇到的问题特别在于代码的一部分 - 如果您想直接跳到它，请在下面清楚地指出。

**第 1 步为我希望字段具有的标题和 MySQL 数据库中的列名定义数组：**

```
$titles  = array('Name', 'Age', 'Height', 'Weight');
$headers = array('q1', 'q2', 'q3', 'q4'); 
```

**第二步：连接数据库（之前定义的$username和$password）：**

```
try {
    $pdo = new PDO('mysql:host=localhost; dbname=db01', $username, $password);
    $pdo->exec("SET CHARACTER SET utf8"); 
```

**第 3 步：通过一些连接创建我的 SQL 语句，并获取 $result：**

```
$sql ="SELECT";

foreach(array_combine($headers, $titles) as $header => $title) {
    $sql .= "`$header` AS `$title`,";
}

$sql .= "`q5` AS `Eye Color`";
$sql .= "FROM samdata.CO_data";

$result = $pdo->query($sql); 
```

**第 4 步：通过连接静态 HTML 和上述 SQL 查询的结果来创建 $html_table**

```
if($result !== false) {
    $html_table = '<table><tr>';
    foreach($titles as $title) {
        $html_table .= "<th> $title </th>";                          
    }

    $html_table .='</tr> <tr>';

//*********PROBLEM SECTION BELOW **************************
    foreach(array_combine($result, $titles) as $row => $title) {                            
        $html_table .= "<td>' .$row\['$title'\]. '</td>";
    }
}
//*********PROBLEM SECTION ABOVE **************************

$html_table .= '</tr> </table>';
$conn = null;   

echo $html_table;       
} 
```

我知道问题出在指示的部分，因为我已经测试了所有其他部分，并且如果我手动写出而不是组合数组/ foreach 循环，例如：

```
foreach($result as $row) {
             $html_table .= '
             <tr>
                <td>' .$row['Names']. '</td>
                <td>' .$row['Age']. '</td>
                <td>' .$row['Height']. '</td>
            </tr>';
} 
```

代替循环，它可以正常工作并显示这些标题的每个结果的数据，问题是我有数百个并且想要更优雅（和懒惰）而不是一个一个地写出来！

我哪里错了？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T00:07:38.977

看起来您的问题行中有一些不匹配的引号：

```
$html_table .= "<td>' .$row\['$title'\]. '</td>"; 
```

您以双引号开头。在双引号内，单引号不能用于终止字符串。相反，双引号只能用双引号终止。单引号也是如此。意思是，这可以通过以下两种方式之一解决：

```
$html_table .= "<td>" . $row[$title] . "</td>"; 
```

或者：

```
$html_table .= '<td>' . $row[$title] . '</td>'; 
```

还要注意我是如何从 around 中删除引号的`$title`。它们是不必要的，并且会使 PHP 进行比必要更多的处理。

注意引号现在是如何匹配的。确保在编辑器中编写代码时，查看语法是如何突出显示的。您应该看到，在您的原始代码中，变量和索引都在字符串中，因为它们都是相同的颜色。

如果您依赖双引号字符串（如`echo "Hello $name";`）中的变量扩展，请知道访问数组的字符串键将不起作用，除非它们用括号括起来，如下所示：

```
echo "Hello {$person['FirstName']}"; 
```

但是，您可以像这样使用数字索引：

```
echo "Hello $people[0]"; 
```

因此，对于您的代码，如果您不想结束字符串并连接值然后再次开始字符串，则需要执行此操作：

```
$html_table .= "<td>{$row[$title]}</td>"; 
```

但是，我发现这种语法很难看，它使 PHP 进行额外的处理以找到需要扩展变量的位置。恕我直言，使用连接来避免所有这些问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T00:14:27.903

你没有正确循环。$result 是您必须获取的 PDOStatement。尝试

```
foreach( $result->fetchAll() as $row ) {
    $html_table .= '<tr>' . "\n";
    foreach( $row as $col ) {
        $html_table .= '<td>' .$col. '</td>';
    }
    $html_table .= '</tr>' . "\n";
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-07-13T04:22:33.483

这个解决方案似乎在我的项目中工作，并允许我从查询中获取列并将记录放入 html 表中，希望它也可以帮助其他人：

```
$conn = (...)

$sqlselect = "SELECT name, last, othercol FROM persontable";

// I prepare and execute my query
$stmt = $conn->prepare($sqlselect);
$stmt->execute();

//get full recordset: header and records
$fullrs = $stmt->fetchAll(PDO::FETCH_ASSOC); 

//get the first row (column headers) but do not go to next record
$colheaders = current($fullrs)

out = ""; //variable that will hold my table

out .= <table>;

//get my columns headers in the table          
foreach($colheaders as $key=>$val) 
{
    $out .= '<th>'.$key.'</th>';
}

//get my records in the table
foreach($fullrs as $row) 
{
   $out .= "<tr>"; 
      $out .= '<td>'.$row['name'].'</td>';
      $out .= '<td>'.$row['last'].'</td>';
      $out .= '<td>'.$row['othercol'].'</td>';
   $out .= "</tr>";
}

out .= </table>;  

//spit my table out
echo $out; 
```

# java - Java（使用 if else 语句查找未来日期）

> ID：12993698
> 
> 赞同：-1
> 
> 时间：2012-10-20T23:50:31.617
> 
> 标签：java, if-statement

我有一个我想不通的问题，谢谢：编写一个程序，提示用户输入一周中今天的整数（周日为 0，周一为 1，...周六为 6） . 还提示用户输入今天之后的天数作为未来的一天并显示一周中的未来一天。这是示例运行：输入今天的日期：1 输入从今天开始经过的天数：3 今天是星期一，并且明天是星期四我的尝试是：

```
Scanner input = new Scanner(System.in);

System.out.print("Enter today's day (0 - 6):  ");
int day = input.nextInt();

System.out.print("Enter the number of days elapsed since today:  ");
int elapsed = input.nextInt();

if(day == 0)
{
    System.out.println("Sunday");
}
if(day   == 1)
{
    System.out.println("Monday");
}
if(day ==  2)
{
    System.out.println("Tuesday");
}
if(day  == 3)
{
    System.out.println("Wednesday");
}
if(day  ==  4)
{
    System.out.print("Thursday");
}
if(day ==  5)
{
    System.out.print("Friday");
}
if(day  == 6)
{
    System.out.print("Saturday");
}

System.out.print("Today is " + day + " and the future day is " + elapsed); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T00:17:11.220

由于您需要天数到日期字符串两次，因此将其放在单独的函数中。我想向您展示几种可能的方法。版本 1，基本、简单、整洁：

```
// isolate the daynumber --> daystring in a function, that's tidier
String dayFor (int daynumber) {
    String dayAsString = "ERROR";  // the default return value
    switch(dayNumber) {
        case 0 :
            dayAsString = "Sunday";
            break;
        case 1 :
            dayAsString = "Monday";
            break;
        // and so on, until
        case 6 :
            dayAsString = "Saturday";
            break;
     }
     return dayAsString;
} 
```

一个更短的版本，它使用数组而不是 switch 语句：

```
String dayFor (int daynumber) {
    String dayStrings[] = new String[]{"Sunday","Monday", .... "Saturday"};
    // notice that daynumber's modulo is used here, to avoid index out of
    // bound errors caused by erroneous daynumbers:
    return dayStrings[daynumber % 7];
} 
```

尝试使用以下函数的方式可能很诱人，其中每个 case 立即返回，但不鼓励使用多个 return 语句。只是在这里展示它，因为它在技术上是可行的，你有时会遇到它

```
String dayFor (int daynumber) {
    switch(dayNumber) {
        case 0 :
            return "Sunday";
        case 1 :
            return "Monday";

        // and so on, until

        case 6 :
            return "Saturday";
     }
     // normally not reached but you need it because the compiler will
     // complain otherwise anyways.
     return "ERROR";
} 
```

在这个相当长的介绍之后，主要功能变得简短而简单。输入后，您只需要：

```
// present day + elapsed modulo 7 = the future day
int future = (day + elapsed) % 7;
System.out.print("Today is " + dayFor(day) + " and the future day is " + dayFor(future) ); 
```

不要忘记添加代码来检查您的输入！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-27T01:51:40.470

该问题为您提供了从 0 到 6 的天数，而不是 1-7（常规）。现在，例如，如果今天是 1（星期一）并且从今天开始经过的天数是 3，那么这一天应该是星期四。由于此问题包含初始日期，因此结果日期将在 1（星期一）、2、3（星期三）过去之后，即星期四。

让我们举个例子，并将其应用到下面的代码中。

天 = 1;

daysElased = 3;

else if(day > 0 && day < 7) ，就是这样

{

sum = 1(day) + 3(daysElapsed); // 总和 = 4

}

如果 sum 在 0-6 的范围内，则可以创建每个 if 案例对应的每一天。在上述情况下，总和小于 6，因此它将有自己的 if 子句。如果总和更大，例如，days = 1 和 daysElapsed = 6，那么 sum = 1(days) + 6(daysElapsed) = 7。

在这种情况下，它将匹配子句 if(sum > 6)，然后 sum = sum % 7 = 7 % 7 = 0 = Sunday。这意味着从 1（星期一）到 6（星期六）的日子已经过去，所以这一天将是星期日（0）。

```
if(day == 0) // If the present day entered is Zero(0 is for Sunday)
{
    sum = daysElapsed;    // daysElapsed will be entered by the user
}

else if(day > 0 && day < 7)    // If the present day is > 0 but < 7 (1 - 6 days)
{
    sum = day + daysElapsed;    // 
}

if(sum>6)    // if 0<= sum <=6 , 6 if cases can be created. If sum > 6 :
{
    sum = sum % 7;
}

if(sum == 0)
{
    System.out.println("Day is Sunday.");
}
.
.
.
.
else if(sum == 6)
{
    System.out.println("Day is Saturday.");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T00:13:23.180

您可以通过使用数组来存储日期名称来做得更好。

```
String[] dayNames = {"Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"}; 
```

现在您可以使用用户输入作为索引

```
int nameIndex = //... get input
//validate input
//dayNames[nameIndex] is the day of the week 
```

现在获取要添加的天数的输入

```
int numDays = //...get input 
```

然后只需添加那么多天来计算未来一周中的某一天的索引

```
int futureNameIndex = nameIndex; //start with entered day of week index
for(int i=0; i<numDays; i++) {
    futureNameIndex++; //increment by 1 for numDays times
    if(futureNameIndex == dayNames.length) { //if the index reaches lenght of the array
        futureNameIndex = 0;                 //reset it to 0
    }
} 
```

我想你会发现那个更容易理解。最后

```
//dayNames[futureNameIndex] is the future day of week. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-11T10:36:40.220

据我所知，这个问题来自“Java 编程简介”一书。在问这个问题的地方，你对方法、循环、数组等一无所知，所以我只会使用选择。

在这里，当我尝试用更好的方法解决时，我找不到任何方法，因为我们无法使用可能非常有用的数组或更好的方法。这就是为什么这个问题在书中有点多余。

而且你真的不应该使用 if 语句，因为 switch 在这种情况下要好得多。

```
 System.out.println("Enter today's number (0 for Sunday, 1 for Monday...) :");
    int todayNo = in.nextInt();

    System.out.println("Enter the number of days elapsed since today:");
    int elapsedDay = in.nextInt();

    int futureDay = (todayNo + elapsedDay) % 7;

    switch (todayNo) {
        case 0:
            System.out.print("Today is Sunday and");
            break;
        case 1:
            System.out.print("Today is Monday and");
            break;
        case 2:
            System.out.print("Today is Tuesday and");
            break;
        case 3:
            System.out.print("Today is Wednesday and");
            break;
        case 4:
            System.out.print("Today is Thursday and");
            break;
        case 5:
            System.out.print("Today is Friday and");
            break;
        case 6:
            System.out.print("Today is Saturday and");
            break;

    }

    switch (futureDay) {
        case 0:
            System.out.print(" the future day is Sunday.");
            break;
        case 1:
            System.out.print(" the future day is Monday.");
            break;
        case 2:
            System.out.print(" the future day is Tuesday.");
            break;
        case 3:
            System.out.print(" the future day is Wednesday.");
            break;
        case 4:
            System.out.print(" the future day is Thursday.");
            break;
        case 5:
            System.out.print(" the future day is Friday.");
            break;
        case 6:
            System.out.print(" the future day is Saturday.");
            break;

    } 
```

在这里，您可能不知道的唯一一件事是 System.out.print();。与 System.out.println() 的唯一区别；使用这种方法，这个不会打印在新行上，它会打印在同一行上，这正是我们在这里需要的。修补它以更好地理解。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-28T00:24:15.730

这个问题来自Y. Daniel Liang的一本名为“ *Java 编程简介”的书。*除了使用*字符串类型*之外，我相信下一章会介绍；我为此练习编写的解决方案仅使用您迄今为止所学的内容。

```
import java.util.Scanner;

public class Exercise_03_06 {
    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);

        System.out.print("Enter today's day: ");
        int todaysDay = input.nextInt();

        System.out.print("Enter the number of days elapsed since today: ");
        int elapsedDays = input.nextInt();

        int futureDay = (todaysDay + elapsedDays) % 7;
        String day_of_week = "";

        switch (todaysDay) {
            case 0: day_of_week = "Sunday"; break;
            case 1: day_of_week = "Monday"; break;
            case 2: day_of_week = "Tuesday"; break;
            case 3: day_of_week = "Wednesday"; break;
            case 4: day_of_week = "Thursday"; break;
            case 5: day_of_week = "Friday"; break;
            case 6: day_of_week = "Saturday";
        }

        switch (futureDay) {
            case 0:
                System.out.println("Today is " + day_of_week + " and the future day is Sunday."); break;
            case 1:
                System.out.println("Today is " + day_of_week + " and the future day is Monday."); break;
            case 2:
                System.out.println("Today is " + day_of_week + " and the future day is Tuesday."); break;
            case 3:
                System.out.println("Today is " + day_of_week + " and the future day is Wednesday."); break;
            case 4:
                System.out.println("Today is " + day_of_week + " and the future day is Thursday."); break;
            case 5:
                System.out.println("Today is " + day_of_week + " and the future day is Friday."); break;
            case 6:
                System.out.println("Today is " + day_of_week + " and the future day is Saturday.");
        }
    }
} 
```

**输出：**

```
Enter today's day: 0
Enter the number of days elapsed since today: 31
Today is Sunday and the future day is Wednesday. 
```

**笔记：**

*   第一个 switch 语句将字符串类型的一天分配给变量*day_of_week* ，该变量稍后用于打印“今天的一天”。

*   要获得未来的一天，您必须找到今天的总和与经过的天数除以 7 的余数。

*   *最后一个 switch 语句“匹配”一个与futureDay*变量中存储的数字相同的案例编号（通过执行上述数学运算获得）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-09T20:19:51.340

```
package javaapplication2;

import java.util.Scanner;
public class JavaApplication2 {

    public static void main(String[] args) {

    int day, eday, fday;
        String str, str1;
        Scanner S = new Scanner(System.in);
        System.out.println("Enter today's day: ");
        day = S.nextInt();
        System.out.println("Enter the number of days elapsed since today: ");
        eday = S.nextInt();
        if (day == 0) {
            str = "Sunday";
            System.out.print("Today is " +str + " and ");
        }
        else if (day == 1) {
            str = "Monday";
            System.out.print("Today is " +str + " and ");
        }
        else if (day == 2) {
            str = "Tuesday";
            System.out.print("Today is " +str + " and ");
        }
        else if (day == 3) {
            str = "Wednesday";
            System.out.print("Today is " +str + " and ");
        }
        else if (day == 4) {
            str = "Thursday";
            System.out.print("Today is " +str + " and ");
        }
        else if (day == 5) {
            str = "Friday";
            System.out.print("Today is " +str + " and ");
        }
        else if (day == 6) {
            str = "Saturday";
            System.out.print("Today is " +str + " and ");
        }

       fday = day + eday;

       if (fday % 7 == 0) {
            str1 = "Sunday";
            System.out.print("Future day is " +str1);
        }
        else if (fday % 7 == 1) {
            str1 = "Monday";
            System.out.print("Future day is " +str1);
        }
        else if (fday % 7 == 2) {
            str1 = "Tuesday";
            System.out.print("Future day is " +str1);
        }
        else if (fday % 7 == 3) {
            str1 = "Wednesday";
            System.out.print("Future day is " +str1);
        }
        else if (fday % 7 == 4) {
            str1 = "Thursday";
            System.out.print("Future day is " +str1);
        }
        else if (fday % 7 == 5) {
            str1 = "Friday";
            System.out.print("Future day is " +str1);
        }
        else if (fday % 7 == 6) {
            str1 = "Saturday";
            System.out.print("Future day is " +str1);
        }

    } 
```

# internet-explorer - IE 和 Socket.io 兼容性

> ID：12993704
> 
> 赞同：6
> 
> 时间：2012-10-20T23:51:11.613
> 
> 标签：internet-explorer, node.js, socket.io, opera

我在这里做了一些聊天示例：http: [//psitsmike.com/2011/09/node-js-and-socket-io-chat-tutorial/](http://psitsmike.com/2011/09/node-js-and-socket-io-chat-tutorial/)

当我使用 Chrome 和 Firefox 时，一切都像魅力一样。对于 IE9 或 Opera，一些 socket.io 事件不会触发（例如断开连接）或触发太晚，并且数据接收太慢。

我使用 npm 方法安装了 node.js 和 socket.io 模块。

请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T13:42:43.133

Socket.IO 最适合 websockets。在 2012 年之前，大多数浏览器不支持 websockets（[来源](http://caniuse.com/#feat=websockets "CanIUse.com » WebSockets")）。

使用此类浏览器，socket.io 会回退到各种轮询方法，但这些方法可能会导致您遇到问题，例如低数据速率和延迟事件（延迟 1-2 分钟触发）。要解决这个问题，您应该尝试启用闪存套接字。

```
 io.set('transports', [
     'websocket'
   , 'flashsocket'
   , 'htmlfile'
   , 'xhr-polling'
   , 'jsonp-polling'
 ]); 
```

此外，请确保可以从客户端访问闪存策略端口（默认 10843）。

# bash - 为查找构建命令字符串

> ID：12993706
> 
> 赞同：2
> 
> 时间：2012-10-20T23:51:20.330
> 
> 标签：bash, shell

我正在尝试解析 android 源目录，我需要提取除某些模式之外的所有目录名称。如果您注意到下面。，目前我只将 1 个目录包含在排除列表中，但我会添加更多。，

find 命令不排除名称为“docs”的目录。

注释掉的行有效，但另一行无效。为了便于调试，我包括了稍后将删除的 min 和 maxdepth。

关于它为什么不起作用的任何评论或提示？

```
#! /bin/bash
ANDROID_PATH=$1
root=/
EXCLUDES=( doc )
cd ${root}
for dir in "${EXCLUDES[@]}"; do
    exclude_name_cmd_string=${exclude_name_cmd_string}$(echo \
                            "-not -name \"${dir}*\" -prune")
done
echo -e ${exclude_name_cmd_string}
custom_find_cmd=$(find ${ANDROID_PATH} -mindepth 1 -maxdepth 1 \
                    ${exclude_name_cmd_string} -type d)
#custom_find_cmd=$(find ${ANDROID_PATH} -mindepth 1 -maxdepth 1 \
#                    -not -name "doc*" -prune -type d)
echo ${custom_find_cmd} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T00:38:23.710

使用可能引用的参数构建命令字符串是一个坏主意。您会进入嵌套的引用级别以及`eval`其他一些危险/令人困惑的语法内容。

使用数组构建`find`; 您已经将 EXCLUDES 合二为一。

此外，重复`-not`而且`-prune`对我来说似乎很奇怪。我会把你的命令写成这样：

```
excludes=()

for dir in "${EXCLUDES[@]}"; do
  excludes+=(-name "${dir}*" -prune -o) 
done

find "${ANDROID_PATH}" -mindepth 1 -maxdepth 1 "${excludes[@]}" -type d -print 
```

结果是，您希望将参数作为将扩展的文字通配符`-name`传递给，而不是 shell 扩展返回的文件列表，也不是包含文字引号的字符串。如果您尝试将命令构建为字符串，这很难做到，但如果您使用数组，则微不足道。`find``find`

朋友不要让朋友将 shell 命令构建为字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T00:33:31.780

当我运行您的脚本（名为`fin.sh`）时：

```
bash -x fin.sh $HOME/tmp 
```

跟踪输出的其中一行是：

```
find /Users/jleffler/tmp -mindepth 1 -maxdepth 1 -not -name '"doc*"' -prune -type d 
```

你看到双引号周围的单引号了吗？这是`bash`试图提供帮助。我猜您的“不起作用”问题是您仍然`doc*`在输出中包含目录；除此之外，它似乎对我有用。

如何解决？

...看来您已经找到了解决此问题的方法...我不确定我是否会信任 Bourne shell（但 Korn shell 似乎与 Bash 一致），但看起来它可能会起作用与重击。我很确定这在过去 30 年左右发生了变化，但很难证明这一点；掌握旧代码并不容易。

`-prune`我还想知道如果您重复排除目录是否需要重复选项；我还不够熟悉，`-prune`无法确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T00:29:13.293

发现了问题。它在 exclude_name_cmd_string 中带有转义序列。正确的语法应该是

> ```
> exclude_name_cmd_string=${exclude_name_cmd_string}$(echo \
>                         "-not -name ${dir}* -prune") 
> ```

# django - 无法安装 MySQL-python

> ID：12993708
> 
> 赞同：15
> 
> 时间：2012-10-20T23:51:29.160
> 
> 标签：django, mysql-python, setuptools

好的，我最近从 Ubuntu 10.04 升级到 12.04

只是要面对很多问题。我是这方面的新手，所以您可能需要更详细或逐步告诉我

我有一个运行良好的 django 项目，但现在它给了我这个错误：

```
 File "/usr/local/lib/python2.7/site-packages/django/db/backends/mysql/base.py", line 16, in <module>
    raise ImproperlyConfigured("Error loading MySQLdb module: %s" % e) django.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module: libmysqlclient_r.so.16: cannot open shared object file: No such file or directory 
```

或在 python 中：

```
>>> import MySQLdb
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "build/bdist.linux-i686/egg/MySQLdb/__init__.py", line 19, in <module>
  File "build/bdist.linux-i686/egg/_mysql.py", line 7, in <module>
  File "build/bdist.linux-i686/egg/_mysql.py", line 6, in __bootstrap__
ImportError: libmysqlclient_r.so.16: cannot open shared object file: No such file or directory 
```

无论如何，我认为我的 MySQL-python 有问题，所以我尝试重新安装它。

```
sudo pip install mysql-python 
```

给出：

```
Downloading/unpacking mysql-python
  Running setup.py egg_info for package mysql-python
    The required version of distribute (>=0.6.28) is not available,
    and can't be installed while this script is running. Please
    install a more recent version first, using
    'easy_install -U distribute'.

    (Currently using distribute 0.6.24dev-r0 (/usr/lib/python2.7/dist-packages))
    Complete output from command python setup.py egg_info:
    The required version of distribute (>=0.6.28) is not available,

and can't be installed while this script is running. Please

install a more recent version first, using

'easy_install -U distribute'.

(Currently using distribute 0.6.24dev-r0 (/usr/lib/python2.7/dist-packages))

----------------------------------------
Command python setup.py egg_info failed with error code 2 in /tmp/pip-build/mysql-python
Storing complete log in /home/nabeel/.pip/pip.log 
```

如果我做 ：

```
sudo easy_install -U distribute 
```

它给出了这个错误：

```
Searching for distribute
Reading http://pypi.python.org/simple/distribute/
Reading http://packages.python.org/distribute
Best match: distribute 0.6.29
Downloading http://pypi.python.org/packages/source/d/distribute/distribute-0.6.29.tar.gz#md5=1aad767bfca8bebaccafee25f85696cf
Processing distribute-0.6.29.tar.gz
Running distribute-0.6.29/setup.py -q bdist_egg --dist-dir /tmp/easy_install-K8ZuMX/distribute-0.6.29/egg-dist-tmp-Fj0gj_
Before install bootstrap.
Scanning installed packages
Setuptools installation detected at /usr/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg
Egg installation
Patching...
Renaming /usr/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg to /usr/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg.OLD.1350776909.4
Patching complete.
Relaunching...
Traceback (most recent call last):
  File "/usr/local/bin/easy_install", line 9, in <module>
    load_entry_point('distribute==0.6.8', 'console_scripts', 'easy_install')()
  File "/usr/local/lib/python2.7/site-packages/distribute-0.6.8-py2.7.egg/setuptools/command/easy_install.py", line 1708, in main
    with_ei_usage(lambda:
  File "/usr/local/lib/python2.7/site-packages/distribute-0.6.8-py2.7.egg/setuptools/command/easy_install.py", line 1696, in with_ei_usage
    return f()
  File "/usr/local/lib/python2.7/site-packages/distribute-0.6.8-py2.7.egg/setuptools/command/easy_install.py", line 1712, in <lambda>
    distclass=DistributionWithoutHelpCommands, **kw
  File "/usr/local/lib/python2.7/distutils/core.py", line 152, in setup
    dist.run_commands()
  File "/usr/local/lib/python2.7/distutils/dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "/usr/local/lib/python2.7/distutils/dist.py", line 972, in run_command
    cmd_obj.run()
  File "/usr/local/lib/python2.7/site-packages/distribute-0.6.8-py2.7.egg/setuptools/command/easy_install.py", line 236, in run
    self.easy_install(spec, not self.no_deps)
  File "/usr/local/lib/python2.7/site-packages/distribute-0.6.8-py2.7.egg/setuptools/command/easy_install.py", line 471, in easy_install
    return self.install_item(spec, dist.location, tmpdir, deps)
  File "/usr/local/lib/python2.7/site-packages/distribute-0.6.8-py2.7.egg/setuptools/command/easy_install.py", line 501, in install_item
    dists = self.install_eggs(spec, download, tmpdir)
  File "/usr/local/lib/python2.7/site-packages/distribute-0.6.8-py2.7.egg/setuptools/command/easy_install.py", line 680, in install_eggs
    return self.build_and_install(setup_script, setup_base)
  File "/usr/local/lib/python2.7/site-packages/distribute-0.6.8-py2.7.egg/setuptools/command/easy_install.py", line 957, in build_and_install
    self.run_setup(setup_script, setup_base, args)
  File "/usr/local/lib/python2.7/site-packages/distribute-0.6.8-py2.7.egg/setuptools/command/easy_install.py", line 946, in run_setup
    run_setup(setup_script, args)
  File "/usr/local/lib/python2.7/site-packages/distribute-0.6.8-py2.7.egg/setuptools/sandbox.py", line 29, in run_setup
    lambda: execfile(
  File "/usr/local/lib/python2.7/site-packages/distribute-0.6.8-py2.7.egg/setuptools/sandbox.py", line 70, in run
    return func()
  File "/usr/local/lib/python2.7/site-packages/distribute-0.6.8-py2.7.egg/setuptools/sandbox.py", line 31, in <lambda>
    {'__file__':setup_script, '__name__':'__main__'}
  File "setup.py", line 131, in <module>
  File "/tmp/easy_install-K8ZuMX/distribute-0.6.29/distribute_setup.py", line 368, in _before_install
  File "/tmp/easy_install-K8ZuMX/distribute-0.6.29/distribute_setup.py", line 441, in _fake_setuptools
  File "/tmp/easy_install-K8ZuMX/distribute-0.6.29/distribute_setup.py", line 450, in _relaunch
NameError: global name '_cmd1' is not defined 
```

现在我再次访问此链接： [http](http://pypi.python.org/pypi/setuptools/0.6c11) : //pypi.python.org/pypi/setuptools/0.6c11 下载并安装 setuptools。我还从这里安装了最新的分发版 0.6.8： [http://pypi .python.org/pypi/distribute/0.6.8](http://pypi.python.org/pypi/distribute/0.6.8)

我也尝试过卸载以前的版本并重新安装，但它似乎不起作用。我已经安装了 Python 2.7.3

有人可以向我解释发生了什么...我如何安装Mysqldb ...

我还在 shell 上运行了这些命令：

```
sudo apt-get install mysql-server mysql-client python-mysqldb libmysqlclient-dev python-dev 
```

但这并没有帮助...

**更新我刚刚做了这个并且得到了这个错误：**

```
nabeel@nabeel-pc:~$ pip uninstall setuptools
Uninstalling distribute:
  /usr/bin/easy_install
  /usr/bin/easy_install-2.7
  /usr/lib/python2.7/dist-packages/distribute-0.6.24dev_r0.egg-info
  /usr/lib/python2.7/dist-packages/easy_install.pyc
  /usr/lib/python2.7/dist-packages/pkg_resources.pyc
  /usr/lib/python2.7/dist-packages/setuptools
  /usr/lib/python2.7/dist-packages/site.pyc
  /usr/share/pyshared/easy_install.py
  /usr/share/pyshared/pkg_resources.py
  /usr/share/pyshared/site.py
Proceed (y/n)? y
  Successfully uninstalled distribute
nabeel@nabeel-pc:~$ sudo easy_install -U distribute
Searching for distribute
Reading http://pypi.python.org/simple/distribute/
Reading http://packages.python.org/distribute
Best match: distribute 0.6.29
Downloading http://pypi.python.org/packages/source/d/distribute/distribute-0.6.29.tar.gz#md5=1aad767bfca8bebaccafee25f85696cf
Processing distribute-0.6.29.tar.gz
Running distribute-0.6.29/setup.py -q bdist_egg --dist-dir /tmp/easy_install-Xcer8d/distribute-0.6.29/egg-dist-tmp-K0E7gP
Before install bootstrap.
Scanning installed packages
Setuptools installation detected at /usr/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg
Egg installation
Already patched.
After install bootstrap.
Creating /usr/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info
Creating /usr/local/lib/python2.7/site-packages/setuptools.pth
Removing distribute 0.6.8 from easy-install.pth file
Adding distribute 0.6.29 to easy-install.pth file
Installing easy_install script to /usr/local/bin
Installing easy_install-2.7 script to /usr/local/bin

Installed /usr/local/lib/python2.7/site-packages/distribute-0.6.29-py2.7.egg
Processing dependencies for distribute
Finished processing dependencies for distribute
nabeel@nabeel-pc:~$ sudo pip install mysql-python
Traceback (most recent call last):
  File "/usr/local/bin/pip", line 5, in <module>
    from pkg_resources import load_entry_point
ImportError: No module named pkg_resources 
```

**更新 2：** 我现在已经设法在环境中安装了 virtualenv，我还设法安装了 MySQLdb。这是我在运行服务器时遇到的错误：

```
sudo python manage.py syncdb 
```

我收到此错误：

```
 File "/usr/local/lib/python2.7/site-packages/django/db/backends/mysql/base.py", line 16, in <module>
    raise ImproperlyConfigured("Error loading MySQLdb module: %s" % e)
django.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module: libmysqlclient_r.so.16: cannot open shared object file: No such file or directory

(myenv)nabeel@nabeel-pc:~/workspace/gteam/metrics$ python
    Python 2.7.3 (default, Oct  6 2012, 21:57:36) 
    [GCC 4.4.3] on linux2
    Type "help", "copyright", "credits" or "license" for more information.
    >>> import MySQLdb
    >>> exit() 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-21T00:21:59.253

使用虚拟环境

第一件事。确保你有 Mysql、Setuptools 和一些必需品：

```
sudo apt-get install mysql-server
sudo apt-get install python-setuptools python-dev build-essential 
```

现在安装 VirtualEnv：

```
sudo easy_install -U virtualenv 
```

创建虚拟环境。正如[文档](http://www.virtualenv.org/en/latest/#what-it-does)所说：`virtualenv is a tool to create isolated Python environments.`这意味着发生冲突的机会非常小。这里的“myenv”是一个文件夹的名称，您可以在其中访问您的环境，所以在您想要的地方创建它。

```
virtualenv --distribute myenv 
```

然后转到“myenv”目录并运行它来激活它：

```
source myenv/bin/activate 
```

您需要安装 libmysqlclient-dev 以使 MySQL-python 正常工作：

```
sudo apt-get install libmysqlclient-dev 
```

现在您已准备好安装 MySQL-python：

```
pip install MySQL-python 
```

一切都应该正常工作。

当您不想再在那种环境中工作时，请在终端中写入：

```
deactivate 
```

**更新**：

由于这个答案不断得到支持，让我向您展示如何使用 conda 做同样的事情，这已成为我现在最喜欢的环境。首先你必须安装 anaconda（我相信你也可以安装 miniconda，它是一个包含 conda 和一些软件包的轻量级版本。） [在这里](https://www.continuum.io/downloads)你会找到适用于 Linux、OS X 和 Windows 的安装程序。它是一个大文件，但包含许多准备安装的预编译包。假设你已经安装了 anaconda，你可以简单地运行：

```
conda create -n mysql-env python 
```

`mysql-env`是环境的名称（您可以随意调用它），并且`python`是要安装的 python 的默认版本（当前为 2.7.10）。或者，使用`conda create -n my-new-env python=3.4`.

然后你激活你的环境：

```
source activate mysql-env 
```

最后安装mysql-python：

`conda install MySQL-python`

（我认为`conda install mysql-python`也有效）

就这样。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-30T17:45:49.447

`easy_install -U distribute`解决了我的问题

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-02T02:36:28.127

在某些 Ubuntu 安装中，您还需要考虑 libmysqlclient-dev：

```
sudo apt-get install python-dev libmysqlclient-dev 
```

它也让我退缩了。其他响应者可能已经安装了它并且没有意识到它是必需的。

# ios - trigger.io 错误 device-ios.app/Forge 格式错误的对象

> ID：12993709
> 
> 赞同：2
> 
> 时间：2012-10-20T23:51:40.150
> 
> 标签：ios, trigger.io

我正在尝试在实际的 iPhone 上运行[这个天气教程](http://docs.trigger.io/en/v1.2/tutorials/weather/tutorial-1.html)应用程序（到目前为止，我已经在模拟器上运行它）。

> [错误] 运行 /usr/bin/codesign 时失败：codesign_allocate：对象：/Users/cdplMBP17/Documents/AppDev/trigger/development/ios/device-ios.app/Forge 格式错误的对象（未知加载命令 43）/Users/ cdplMBP17/Documents/AppDev/trigger/development/ios/device-ios.app：目标文件格式无法识别、无效或不合适

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T12:29:58.850

如果您有旧版本的 Xcode 或 Xcode 命令行工具进入错误状态，则可能会发生这种情况。

我建议尝试以下

1) 确保从应用商店安装了最新的 Xcode。

2) 确保命令行工具已安装并且 Xcode 知道它们已安装。要安装命令行工具，打开 Xcode 首选项并转到下载，命令行工具旁边应该有一个安装按钮（见下图）。

![Xcode 首选项](../Images/e2aa3bcbb0a513d5ebb39c186fdd57ff.png)

如果这没有帮助，那么您的 OS X 版本和设备上失败运行的完整日志输出会很有帮助。

# c++ - 递归问题（二维求积）

> ID：12993716
> 
> 赞同：0
> 
> 时间：2012-10-20T23:53:23.817
> 
> 标签：c++, numerical-methods

所以我有一个程序在函数 x^2 + y^2 < 1 上实现自适应 2D 梯形规则，但似乎递归不起作用——这里的程序是（工作）1D 的修改形式梯形方法，所以我不确定代码在哪里发生故障，它应该返回 PI：

```
double trapezoidal(d_fp_d f,
                   double a, double b,
                   double c, double d) { //helper function
    return 0.25*(b-a)*(d-c)*
    (f(a, c)+f(a, d) +
     f(b, c)+f(b, d));
}

double atrap( double a, double b, double c, double d, d_fp_d f, double tol )
 {// helper function

 return atrap1(a, b, c, d, f, tol );
 }
double atrap1( double a, double b, double c, double d, d_fp_d f, double tol)
{
 //implements 2D trap rule 
    static int level = 0;
    const static int minLevel = 4;
    const static int maxLevel = 30;
    ++level;
    double m1 = (a + b)/2.0;
    double m2 = (c + d)/2.0;
    double coarse = trapezoidal(f,a,b,c,d);
    double fine = 
      trapezoidal(f, a, m1, c, m2)
    + trapezoidal(f, a, m1, m2, d)
    + trapezoidal(f, m1, b, c, m2)
    + trapezoidal(f, m1, b, m2, d);
    ++fnEvals;
    if( level< minLevel
       || ( abs( fine - coarse ) > 3.0*tol && level < maxLevel ) ){

            fine =  atrap1( a, m1, c, m2, f,tol/4.0)
            + atrap1( a, m1, m2, d, f, tol/4.0)
            + atrap1(m1, b, c, m2, f, tol/4.0)
            + atrap1(m1, b, m2, d, f,tol/4.0);

        }

    --level;
    return fine;
} 
```

函数由下式给出

```
double ucircle( double x, double y)
{
    return x*x + y*y < 1 ? 1.0 : 0.0;
} 
```

我的主要功能是

```
int main()
{
   double a, b, c, d;
    cout << "Enter a: " <<endl;
    cin >> a;
    cout << "Enter b: " <<endl;
    cin >> b;
    cout << "Enter c: " <<endl;
    cin >> c;
    cout << "Enter d: " <<endl;
    cin >> d;

    cout << "The approximate integral is: " << atrap( a, b, c, d, ucircle, 1.0e-5) << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T01:40:57.807

它实际上不会永远运行，但它实际上运行了很长时间，您认为它会永远运行，这就是原因：在第一次运行时`level`，函数输入你的`if`，它调用自己 4 次，现在考虑第一次：它也进入`if`并再调用自身 4 次并继续......对于正确选择的输入（如您指定的输入），条件`abs(fine - coarse)`始终`true`是唯一可以阻止流进入的东西`if`是`level`会增加然后减少所以你的函数几乎会被调用`4^30`，这真的是一个很大的数字，你在一两个小时内看不到它的结束！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:11:19.607

就像 BigBoss 已经写的那样，你的程序应该完成，它只需要很长时间，因为 30 次递归意味着`4^30`对 的函数调用`atrap1`，即`1152921504606846976`. 让这个数字沉入其中。

这里还有一些需要考虑的事情：

*   您可能想在“中断条件”中使用`fabs`而不是。`abs`（我认为您应该收到有关整数转换的警告 - 或类似的东西 - 为此）`abs`可能会返回不可预测的值`float`或`double`参数。*非常高的价值*。

*   `tol`似乎是一个代表目标精度值的变量。但是，随着每次递归，您会进一步提高此目标精度。在第 10 次递归时，它已经是`1E-11`. 不确定这是有意的。随便什么`tol`意思。

    您可能不希望递归调用中的`/4.0`（`.0`顺便说一句是多余的）。

*   您确实通过优化来编译它，对吗？

*   `trapezoidal`, `minLevel`,`maxLevel`可以是宏。

*   `level`由于是静态的，您的函数不喜欢线程执行。您应该将其作为`atrap1`.

# apache - .htaccess 奇怪的行为

> ID：12993719
> 
> 赞同：0
> 
> 时间：2012-10-20T23:53:35.863
> 
> 标签：apache, .htaccess, virtualhost

如果我把这些线放在`.htaccess`一切都很好（当我要去的时候`http://www.example.ru`我被重定向到`http://example.ru`）。

```
RewriteEngine On

# Installation directory
RewriteBase /

# Redirect all www to non-www
RewriteCond %{HTTP_HOST} ^www.example.ru [NC]
RewriteRule ^(.*)$ http://example.ru/$1 [L,R] 
```

但是，如果我将完全相同的行放在`<VirtualHost>`->`<Directory>`部分试图去`http://www.example.ru`重定向我到`http://example.ru/www`.

有人知道为什么吗？

**UPD**

新`VirtualHost`：

```
<VirtualHost *:80>
    ServerName example.ru
    ServerAlias www.example.ru
    ServerAdmin webmaster@localhost
    DocumentRoot /home/example/www/example.ru/www

    RewriteEngine On

    <Directory /home/example/www/example.ru>
            Options FollowSymLinks
            AllowOverride All
            Order allow,deny
            Allow from all
    </Directory>

    ErrorLog /home/example/www/example.ru/log/error.log

    LogLevel warn

    SetEnvIf Remote_Addr 127.0.0.1 loopback

    CustomLog /home/example/www/example.ru/log/access.log combined env=!loopback

    # Redirect all www to non-www
    RewriteCond %{HTTP_HOST} ^www.example.ru [NC]
    RewriteRule ^(.*)$ http://example.ru$1 [L,R]

</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:47:09.683

花了一些时间我发现，在`VirtualHost`部分中，模式将与主机名和端口之后以及查询字符串之前的 URL 部分匹配（在我的情况下为“/”）。

在目录部分，模式将匹配文件系统路径。

# .net - 为什么我不能在 system32 中运行我的 exe？

> ID：12993739
> 
> 赞同：3
> 
> 时间：2012-10-20T23:57:27.270
> 
> 标签：.net, vb.net, system32

我做了一个程序并编译它。它在调试文件夹中按预期工作。我把它拿出来放在system32中，但它不会运行。它给出了这个错误：

> .NET Framework 初始化错误
> 找不到运行此应用程序的运行时版本。

我已经尝试将它放在调试文件夹内它自己的文件夹中，并且它在没有其他调试文件的情况下工作。我试过以管理员身份运行它。我知道我有正确的 .NET Framework 版本，因为它能够在 system32 之外运行。我尝试使用命令提示符从其他地方运行它。我已经尝试了所有这些，但它仍然不起作用。

编辑：我也尝试将 exe 放在 windows 文件夹中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-07T07:41:36.337

此问题是由于 exe x86 与 x64 的体系结构构建造成的。VS2012 中的默认编译是 ANYCPU 并勾选了 prefer x86。

如果您的构建是 x64 平台上的默认版本，则应将其复制到 c:\windows\syswow64，这是 32 位 system32 文件夹。或者应用程序应该删除首选 x86 选项并重新编译。

无论哪种方式，都不是您没有安装正确的框架，这是由于 Windows 上的 Windows 行为和编译配置。

希望这可以帮助！

# android - 使用 adb forward 的远程 Android Chrome 在 Nexus 7 上失败

> ID：12993746
> 
> 赞同：1
> 
> 时间：2012-10-20T23:59:22.517
> 
> 标签：android, google-chrome, adb

我正在尝试从我的 Debian（嗯，Crunchbang）系统为 Nexus 7 设备设置远程 Web 调试。我似乎无法让 adb forward 阶段工作。设备找到了，我可以运行logcat等。但是当我运行...

```
adb forward tcp:9222 localabstract:chrome_devtools_remote 
```

然后访问 localhost:9222 我得到“网页不可用”和 ERR_CONNECTION_REFUSED

即使在重新启动 adb 服务器后，这种情况仍然会发生。

设备：Android 4.1.2 - Chrome 18.0.1025308

桌面：Debian 挤压。铬 19.0.1084.56

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:29:37.900

我知道您使用的是 linux，但是[这个博客](http://zacktutorials.blogspot.ca/2012/08/nexus7-android-development.html)在 Windows 7 上帮助了我很多。

我的观点是，它可能在您的环境中更深（即，linux 没有正确检测到 nexus 7）。

我知道这不是一个真正完整的答案，但我也很沮丧，这解决了它。

我从[另一个问题](https://stackoverflow.com/questions/11974700/nexus-7-not-visible-over-usb-via-adb-devices-from-windows-7-x64)中得到了答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:41:43.167

*当您的Android 设备*上的 Chrome 浏览器未打开 USB Web 调试时，您将收到 ERR_CONNECTION_REFUSED。

您必须在操作系统级别启用您的 Android 设备上的调试，然后再在 Chrome 浏览器级别启用调试。重新启动您的 adb 服务器，一切都会好起来的。

# ios - 如何使用 iOS 发布 facebook OG 操作？

> ID：12993747
> 
> 赞同：0
> 
> 时间：2012-10-20T23:59:33.030
> 
> 标签：ios, facebook

> **可能重复：**
> [是否可以在不运行我自己的服务器的情况下将 opengraph 发布到用户的墙/feed/ticker 上？](https://stackoverflow.com/questions/12996473/is-it-possible-to-post-opengraph-on-users-wall-feed-ticker-without-running-my-o)

我正在尝试找出为我的应用程序创建一些操作的方法，然后通过我的应用程序将它们作为操作发布到我的用户时间线/提要/自动收报机中以进行相关操作。通过 facebook 的开发网站阅读，我了解到流程很简单，`facebook application that requires my own server`如下所示：

1.  `get authorized` （即`log in`+ `allow access`）
2.  登录后，使用`curl -F`（即 POST 方法）发布

但这是否适用于喜欢和评论取决于您使用的 URL 对吗？
如果是`graph.facebook.com/ID/comments`或`graph.facebook.com/ID/likes`带有令牌，当然是通过 POST 发送的。

但是如何用 iOS 做到这一点？它没有它的 curl （不是通常）我认为它是通过 SDK 以某种方式模拟 cURL 完成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T01:10:26.940

一个很好的方法是 [FBRequestConnection startForPostWithGraphPath:graphObject:completionHandler]。

Facebook SDK for iOS 中的 BooleanOGSample 演示了这一点。

在该示例中，BOGFirstViewController.m 中的 postAction:leftOperand:rightOperand:result:tryReauthIfNeeded 方法中有一个示例。此方法假定用户已经登录。如果它还没有该权限，它会请求“publish_actions”权限。最后，它创建一个 BOGGraphBooleanAction，填充它，发布它，然后根据发布的结果更新 UI。

在同一个文件中，方法 ogObjectForTruthValue 包含帖子中使用的 Open Graph 对象的示例。您可以在该方法中打开 URL，以查看元数据在您的 html 中对于您的用户将执行的对象的外观。

# c# - 重构 LINQ ForEach 以返回 IEnumerable

> ID：12993749
> 
> 赞同：5
> 
> 时间：2012-10-21T00:00:09.443
> 
> 标签：c#, linq, plinq

我正在使用以下`CreateArray`静态方法创建一个数组：

```
public static int[] CreateArray(int size)
{
    var ret = new int[size];
    ret[0] = 0;
    ret[1] = 1;

    Parallel.ForEach(Enumerable.Range(2, size - 2), i =>
    {
        ret[i] = Func(i).Count();
    });

    return ret;
} 
```

Func 的样子：

```
public static IEnumerable<int> Func(int i)
{
    ...
} 
```

是否可以通过以下方式重构该`CreateArray`方法：

```
public static int[] CreateArray(int size)
{
    var tableFromIndex2 = ...
    return new[] { 0, 1 }
        .Concat(tableFromIndex2)
        .ToArray();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:35:16.007

我认为 PLINQ 在这里可能很有用：

```
var tableFromIndex = ParallelEnumerable.Range(2, size - 2)
        .AsOrdered()
        .Select(i => Func(i).Count());

return new[] { 0, 1 }
        .Concat(tableFromIndex)
        .ToArray(); 
```

# c++ - 为什么我的打印功能会为我的后缀程序产生此错误？

> ID：12993750
> 
> 赞同：2
> 
> 时间：2012-10-21T00:00:10.800
> 
> 标签：c++, memory, postfix-notation

我正在尝试编写一个程序来计算后缀表达式，它包括驱动程序和实现文件。这两个如下图所示：

```
#include <cstdlib>
#include <iostream>
#include <string>
#include "Stack.h"

using namespace std;

void printStack(Stack<float>);

int main()
{
 Stack<float> postFix;
 float userIn, operand1, operand2;
 // while the end of the postfix hasn't been reached
 do
 { 
   // prompt user for next number or modulus command
   cout << "ENTER: ";
   if (!postFix.isEmpty()) printStack(postFix);
   string userInput;
   cin >> userInput;

   // If user input is q or Q then terminate program
   if (userInput == "q" || userInput == "Q") return 0;
   else
   {
     // read next token by parsing userInput
     // if token is a number push it onto stack
  if (userInput != "+" && userInput != "/" && userInput != "*" && userInput != "-")
  {
    userIn = atof(userInput.c_str());
    postFix.push(userIn);
  }
  else if (!(postFix.size() < 2))
  {
    // if it's not a number then pop element from the stack and call it
    // operand2
    operand2 = postFix.lastElem();
    postFix.pop();

    // pop another element from the stack; call it operand1
    operand1 = postFix.lastElem();
    postFix.pop();

    // Perform the operation: operand1 token operand2 and
    // push the result of the operation onto the stack
    if (userInput == "/")
      postFix.push((operand1 / operand2));
    else if (userInput == "*")
      postFix.push((operand1 * operand2));
    else if (userInput == "+")
      postFix.push((operand1 + operand2));
    else if (userInput == "-")
      postFix.push((operand1 - operand2));
  }
  else if (postFix.size() < 2)
    cout << "Stack is too small, request ignored\n";
} // end else

} while (!postFix.isEmpty()); // end while

// empty the stack
postFix.makeEmpty();

return 0;
}

// The problem is in the print function!

void printStack(Stack<float> postFix)
{
  do
  {
    cout << postFix.lastElem() << " ";
    postFix.pop();
  } while (!postFix.isEmpty());
} 
```

我的实现文件显示在这里：

```
#include <iostream>
using namespace std;

template <class DataType>
class Stack
{
  public:
  Stack() // constructor
  {
    capacity = 2;
    //Stack(capacity);
    elements = new DataType[capacity];
    top = -1;
  }

  Stack(int s) // constructor with one parameter
  {
    capacity = s;
    elements = new DataType[capacity];
    top = -1;
  }

~Stack()
{
  delete [] elements;
}

bool isEmpty() const {return -1 == top;}

void pop() // pop function
{
  //if (-1 == top) return; // failed
  top--;
  if (top > 2 && top < (capacity / 4))
  {
    capacity /= 2;
    changeSize(capacity);
  }
}

DataType & lastElem()
{
  return elements[top];
}

int size() {return top;}

void push(float parameter) // push function
{
  if (++top == capacity)
  {
    capacity *= 2;
    changeSize(capacity);
  }
  elements[top] = parameter;
}

bool peek(DataType& parameter) const
{
  if (-1 == top) return false; // failed
  parameter = elements[top];
  return true; // success
}

inline DataType & operator=(const Stack<DataType>& a)
{
  if (this != &a)
  {
    delete [] elements;
    elements = 0;
    capacity = a.capacity;
    if (capacity > 0)
      elements = new DataType[capacity];
    for (int i = 0; i < capacity; i++)
      elements[i] = a.elements[i];
    top = a.top;
  }
  return *this;
}

void changeSize(float newSize) // function for changing the array size if it's too small
{
  DataType *newArray = new DataType[(int)newSize];
  int limit = (newSize > capacity)? capacity : newSize;

  for (int i = 0; i < limit; i++)
  {
    newArray[i] = elements[i];
  }
  delete [] elements;
  elements = newArray;
  capacity = newSize;
}

void makeEmpty() {top = -1;}

private:
  DataType* elements;
  int capacity;
  int top; // track newest value 
}; 
```

使用 g++ 编译此程序后，我最多可以输入两个值，直到出现如下所示的奇怪内存错误：

```
ENTER: 23
ENTER: 23 43
*** glibc detected *** ./calc: double free or corruption (fasttop): 0x0000000000c86010 ***
======= Backtrace: =========
/lib/libc.so.6(+0x78b06)[0x7fbd11e4ab06]
/lib/libc.so.6(cfree+0x73)[0x7fbd11e513d3]
./calc[0x401197]
./calc[0x400d9b]
/lib/libc.so.6(__libc_start_main+0xfd)[0x7fbd11df0c4d]
./calc[0x400c09]
======= Memory map: ========
00400000-00402000 r-xp 00000000 08:06 788295                             /home/badr/Documents/My programs/COMSC-210/calc
00601000-00602000 r--p 00001000 08:06 788295                             /home/badr/Documents/My programs/COMSC-210/calc
00602000-00603000 rw-p 00002000 08:06 788295                             /home/badr/Documents/My programs/COMSC-210/calc
00c86000-00ca7000 rw-p 00000000 00:00 0                                  [heap]
7fbd0c000000-7fbd0c021000 rw-p 00000000 00:00 0 
7fbd0c021000-7fbd10000000 ---p 00000000 00:00 0 
7fbd11dd2000-7fbd11f4f000 r-xp 00000000 08:06 5813                       /lib/libc-2.11.1.so
7fbd11f4f000-7fbd1214e000 ---p 0017d000 08:06 5813                       /lib/libc-2.11.1.so
7fbd1214e000-7fbd12152000 r--p 0017c000 08:06 5813                       /lib/libc-2.11.1.so
7fbd12152000-7fbd12153000 rw-p 00180000 08:06 5813                       /lib/libc-2.11.1.so
7fbd12153000-7fbd12158000 rw-p 00000000 00:00 0 
7fbd12158000-7fbd1216e000 r-xp 00000000 08:06 1268                       /lib/libgcc_s.so.1
7fbd1216e000-7fbd1236d000 ---p 00016000 08:06 1268                       /lib/libgcc_s.so.1
7fbd1236d000-7fbd1236e000 r--p 00015000 08:06 1268                       /lib/libgcc_s.so.1
7fbd1236e000-7fbd1236f000 rw-p 00016000 08:06 1268                       /lib/libgcc_s.so.1
7fbd1236f000-7fbd123f1000 r-xp 00000000 08:06 5814                       /lib/libm-2.11.1.so
7fbd123f1000-7fbd125f0000 ---p 00082000 08:06 5814                       /lib/libm-2.11.1.so
7fbd125f0000-7fbd125f1000 r--p 00081000 08:06 5814                       /lib/libm-2.11.1.so
7fbd125f1000-7fbd125f2000 rw-p 00082000 08:06 5814                       /lib/libm-2.11.1.so
7fbd125f2000-7fbd126e8000 r-xp 00000000 08:06 322753                     /usr/lib/libstdc++.so.6.0.13
7fbd126e8000-7fbd128e8000 ---p 000f6000 08:06 322753                     /usr/lib/libstdc++.so.6.0.13
7fbd128e8000-7fbd128ef000 r--p 000f6000 08:06 322753                     /usr/lib/libstdc++.so.6.0.13
7fbd128ef000-7fbd128f1000 rw-p 000fd000 08:06 322753                     /usr/lib/libstdc++.so.6.0.13
7fbd128f1000-7fbd12906000 rw-p 00000000 00:00 0 
7fbd12906000-7fbd12926000 r-xp 00000000 08:06 5815                       /lib/ld-2.11.1.so
7fbd12afa000-7fbd12afe000 rw-p 00000000 00:00 0 
7fbd12b21000-7fbd12b25000 rw-p 00000000 00:00 0 
7fbd12b25000-7fbd12b26000 r--p 0001f000 08:06 5815                       /lib/ld-2.11.1.so
7fbd12b26000-7fbd12b27000 rw-p 00020000 08:06 5815                       /lib/ld-2.11.1.so
7fbd12b27000-7fbd12b28000 rw-p 00000000 00:00 0 
7fff78cf3000-7fff78d08000 rw-p 00000000 00:00 0                          [stack]
7fff78dff000-7fff78e00000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]
ENTER: 43 0 Aborted 
```

经过多次调试，我确定问题一定出在 .cpp 文件中的打印函数中：

```
// The problem is in the print function!

void printStack(Stack<float> postFix)
{
  do
  {
    cout << postFix.lastElem() << " ";
    postFix.pop();
  } while (!postFix.isEmpty());
} 
```

我只是无法弄清楚它为什么会发生或如何克服它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T00:04:18.003

`void printStack(Stack<float> postFix)`**通过 value**获取参数，因此制作了一个副本。使用编译器生成的复制构造函数。哪个是浅拷贝。你需要实现你自己的，做一个深拷贝。

您已经有一个复制赋值运算符 ( `operator =`) 和一个析构函数。这是正确的，但还不够。这 2 加上复制构造函数`Stack(const Stack<DataType>& other)`构成了三的规则。如果您需要其中之一，则需要全部。通常，当你在课堂上管理记忆时，你需要它们，你就是这样。

实现类似于`operator =`：

```
DataType(const Stack<DataType>& a)
{
    elements = 0;
    capacity = a.capacity;
    if (capacity > 0)
      elements = new DataType[capacity];
    for (int i = 0; i < capacity; i++)
      elements[i] = a.elements[i];
    top = a.top;
} 
```

此外，以防万一这不是出于教育目的，您可以使用`std::stack`标题中的预实现。`<stack>`

# sql - 选择字符串不完全匹配的位置

> ID：12993752
> 
> 赞同：1
> 
> 时间：2012-10-21T00:00:34.297
> 
> 标签：sql, sql-like

这是我的表格行：

```
++ id ---- text ++++++++++++++
-- 1  ---- '90','80,'50' -----
-- 2  ---- '30','2','1_2' --
-- 3  ---- '10_2','5_3' ----- 
```

如您所见，`text`包含两种类型的数字，一种没有下划线，另一种有。

我想选择至少有一个没有下划线的数字的行（类型 1）。像这样的东西：（结果集）

```
++ id ---- text ++++++++++++++
-- 1  ---- '90','80,'50' -----
-- 2  ---- '30','2','1_2' -- 
```

（`3`被忽略）

怎么做？（我认为有可能`NOT LIKE`，但我不知道怎么写）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T13:32:45.977

你的号码可能有多长？试试这个：

```
SELECT t1.id,t1.txt FROM t t1, t t2 WHERE t1.txt LIKE "%'__'%" AND t2.txt NOT LIKE "%\__',%" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T00:25:58.623

你不能用 来做`LIKE`，但你可以用 a来做`RLIKE`，它使用正则表达式：

```
select * from mytable
where `text` rlike "'\d+_\d+'" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T13:11:45.487

以下查询计算字符串中逗号的数量，不同数字的数量可以计算为比逗号数量多 1，因为数字用逗号分隔，字符串中的下划线数量：

```
select id,
len(text) - len(replace(text,',','')) as count_of_commas,
len(text) - len(replace(text,',','')) + 1 as count_of_number,
len(text) - len(replace(text,'_','')) as count_of_underscore,
len(text) - len(replace(text,',','')) + 1 - (len(text) - len(replace(text,'_',''))) as zero_if_no_number_without_underscore_exists
from t1 
```

上述查询给出以下结果：

![在此处输入图像描述](../Images/af37ef64cb10d901693b324999e8199d.png)

现在使用上述查询的逻辑，可以使用以下查询来获得所需的结果：

```
select * from t1
where len(text) - len(replace(text,',','')) + 1 - (len(text) - len(replace(text,'_',''))) != 0 
```

即，它返回至少存在一个数字且不带下划线的行。

# php - 正则表达式模式匹配

> ID：12993753
> 
> 赞同：0
> 
> 时间：2012-10-21T00:00:50.067
> 
> 标签：php, regex, preg-match

我想从包含html内容的字符串中提取第一次出现（`<a>`和`<span>`标签）之间的文本。

我的模式如下：

```
$pattern='/<a[^(span)][\/\(\)-:@!%*>#=_|?$&";.\w\s]+<\/a> <span/um'; 
```

我得到的输出是第一次出现`<a`和最后一次出现之间的`<span`文本，而不是两者第一次出现之间的文本。

例如，html 内容：

```
<a href="#">asdasdasd</a> <span blah blah></span> blah blah <a>blah  </a> <span>blah 
```

想：

```
<a href="#">asdasdasd</a> <span 
```

得到：

```
<a href="#">asdasdasd</a> <span blah blah></span> blah blah <a>blah  </a> <span 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T00:06:50.483

1.  使用 HTML 解析器解析 HTML
2.  使用惰性量词`'/<a[^(span)][\/\(\)-:@!%*>#=_|?$&";.\w\s]+?<\/a> <span/um';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T00:15:35.433

`<a`您需要通过告诉正则表达式在和之间匹配`<span`尽可能少的字符来使正则表达式变得懒惰而不是贪婪`.+?`：

```
$ptn = '/<a.+?<span/';
$str = '<a href="#">asdasdasd</a> <span blah blah></span> blah blah <a>blah  </a> <span>blah';
preg_match($ptn, $str, $matches);
echo $matches[0]; 
```

结果是`<a href=\"#\">asdasdasd</a> <span`

# jmeter - 如何在jmeter中实现嵌套循环？

> ID：12993754
> 
> 赞同：4
> 
> 时间：2012-10-21T00:00:56.353
> 
> 标签：jmeter

我正在考虑如何使用 JMeter 测试具有两个参数的 servlet：X 和 Y。

X 和 Y 是从 0 到 100 的随机数。

我正在考虑实现一个嵌套循环，类似于

```
for (int x = 0; x <= 100; x++)
    for (int y = 0; y <= 100; y++)
        servlet?param1=x&param2=y 
```

任何人都可以提示如何使用`Counter`and`Loop Controller`或其他东西来实现这个吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T10:53:58.053

您的架构可能如下所示：

```
    线程组
        用户定义变量
        最大 X = 100
        最大值 = 100
        循环控制器 X
        循环计数：${__BeanShell(Integer.parseInt(vars.get("maxX"))+1)}
        计数器 X
        开始：0
        增量：1
        最大值：${maxX}
        参考名称：loopX
            回路控制器 Y
            循环计数：${__BeanShell(Integer.parseInt(vars.get("maxY"))+1)}
            Y 柜台
            开始：0
            增量：1
            最大值：${maxY}
            参考名称：loopY
                    您的 HTTP 请求
                    servlet?param1=${loopX}¶m2=${loopY}
                    . . .

```

![在此处输入图像描述](../Images/2ba9ee54cd244001f4a249f4ec2c6e6b.png)

在这里您可以找到适合您情况的解决方案，但使用 CSV 数据源而不是计数器：
[循环 2 个 CSV 文件](http://www.testautomationguru.com/jmeter-looping-2-csv-files/)

# javascript - 从 C# Web 浏览器控件调用控件上的 Javascript 事件

> ID：12993756
> 
> 赞同：7
> 
> 时间：2012-10-21T00:01:19.390
> 
> 标签：javascript, c#, webbrowser-control, dom-events

我正在使用 C# 开发一个网络爬虫，其中我有一个加载网页的网络浏览器控件，然后我收集数据并根据数据也作用于它。我的问题是我需要将一些数据写入具有侦听器的输入（文本框）。输入控件从不显示 html 中的值，它由控件上的事件触发的一些 Javascript 处理。`OK`我可以为控件值参数设置一个值，但是当我单击表单时它会丢失。

我已经在网上搜索了几天，现在我知道如何从 C# 调用 Javascript，但它是我无法理解的输入上的 Javascript 函数。

输入控件如下所示：

```
<div id="size_1" class="incrementControl" style="width: 68px;">
    <input id="size_1-input" class="hasListeners" maxlength="6" tabindex="103" value="" style="width:52px">
    <a id="size_1-up" class="up hasListeners" style="left:52px" href="javascript:void(0)"> </a>
    <a id="size_1-down" class="down hasListeners" style="left:52px" href="javascript:void(0)"> </a>
</div> 
```

输入控件事件 keyup、keydown、change、keypress 和 blur 都调用这个 Javascript：

```
function (a) 
{
    return typeof f != "undefined" && (!a || f.event.triggered !== a.type) ? f.event.dispatch.apply(i.elem, arguments) : b;
} 
```

我尝试过调用不同的事件，如 onClick 并以编程方式单击控件，但没有任何效果？！我不知道如何调用这个 Javascript 函数，因为它没有名称以及作为参数传递的内容？

非常感谢任何帮助或想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T03:08:46.557

您可以使用[Watin](http://watin.org/)。它支持Webbrowser 控制和Internet Explorer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-14T09:34:43.730

这里有一些扩展方法（建立在 WatiN 之上），允许您（除其他外）等待 JS 对象或事件：

```
using System;
using System.Threading;
using FluentSharp.Web35;
using FluentSharp.WinForms;
using FluentSharp.CoreLib;
using FluentSharp.CoreLib.API;

namespace FluentSharp.Watin
{
    public static class WatiN_IE_ExtensionMethods_Javascript
    {

        public static object invokeScript(this WatiN_IE ie, string functionName)
        {
            return ie.invokeScript(functionName, null);
        }

        public static object invokeScript(this WatiN_IE ie, string functionName, params object[] parameters)
        {
            //"[WatiN_IE] invokeScript '{0}' with parameters:{1}".info(functionName ,parameters.size());
            return ie.invokeScript(true, functionName, parameters);
        }   

        public static object invokeScript(this WatiN_IE ie, bool waitForExecutionComplete, string functionName, params object[] parameters)
        {
            var sync = new AutoResetEvent(false);
            object responseValue = null;
            ie.WebBrowser.invokeOnThread(
                ()=>{
                        var document = ie.WebBrowser.Document;
                        if (parameters.isNull())
                            responseValue = document.InvokeScript(functionName); 
                        else
                            responseValue = document.InvokeScript(functionName, parameters); 
                        sync.Set(); 
                });
            if (waitForExecutionComplete)
                sync.WaitOne();
            return responseValue;   
        }

        public static object invokeEval(this WatiN_IE ie, string evalScript)
        {
            var evalParam = "(function() { " + evalScript + "})();";
            //"[WatiN_IE] invokeEval evalParam: {0}".debug(evalParam);
            return ie.invokeScript("eval", evalParam);   
        }
        public static WatiN_IE.ToCSharp injectJavascriptFunctions(this WatiN_IE ie)
        {
            return ie.injectJavascriptFunctions(false);
        }

        public static WatiN_IE.ToCSharp injectJavascriptFunctions(this WatiN_IE ie, bool resetHooks)
        {
            if (ie.WebBrowser.isNull())
                "in InjectJavascriptFunctions, ie.WebBrowser was null".error();
            else
            {
                if (ie.WebBrowser.ObjectForScripting.isNull() || resetHooks)  
                {
                    ie.WebBrowser.ObjectForScripting = new WatiN_IE.ToCSharp();

                    "Injecting Javascript Hooks * Functions for page: {0}".debug(ie.url());
                    ie.eval("var o2Log = function(message) { window.external.write(message) };");
                    ie.invokeScript("o2Log","Test from Javascript (via toCSharp(message) )");
                    ie.eval("$o2 = window.external");
                    "Injection complete (use o2Log(...) or $o2.write(...)  to talk back to O2".info();
                    return (ie.WebBrowser.ObjectForScripting as WatiN_IE.ToCSharp);
                }
                else 
                {
                    if((ie.WebBrowser.ObjectForScripting is WatiN_IE.ToCSharp))
                        return (ie.WebBrowser.ObjectForScripting as WatiN_IE.ToCSharp);
                    else
                        "in WatiN_IE injectJavascriptFunctions, unexpected type in ie.WebBrowser.ObjectForScripting: {0}".error(ie.WebBrowser.ObjectForScripting.typeName());                   
                }

            }
            return null;
        }

        public static object downloadAndExecJavascriptFile(this WatiN_IE ie, string url)
        {
            "[WatiN_IE] downloadAndExecJavascriptFile: {0}".info(url);
            var javascriptCode = url.uri().getHtml();
            if (javascriptCode.valid())
                ie.eval(javascriptCode);
            return ie;
        }

        public static WatiN_IE injectJavascriptFunctions_onNavigate(this WatiN_IE ie)
        {

            ie.onNavigate((url)=> ie.injectJavascriptFunctions());
            return ie;
        }

        public static WatiN_IE setOnAjaxLog(this WatiN_IE ie, Action<string, string,string,string> onAjaxLog)
        {
            (ie.WebBrowser.ObjectForScripting as WatiN_IE.ToCSharp).OnAjaxLog = onAjaxLog;
            return ie;
        }

        public static WatiN_IE eval_ASync(this WatiN_IE ie, string script)
        {
            O2Thread.mtaThread(()=> ie.eval(script));
            return ie;
        }

        public static WatiN_IE eval(this WatiN_IE ie, string script)
        {
            return ie.eval(script, true);
        }

        public static WatiN_IE eval(this WatiN_IE ie, string script, bool waitForExecutionComplete)
        {
            var executionThread = O2Thread.staThread(()=> ie.IE.RunScript(script));         
            if (waitForExecutionComplete)
                executionThread.Join();
            return ie;  
        }

        public static WatiN_IE alert(this WatiN_IE ie, string alertScript)
        {
            return ie.eval("alert({0});".format(alertScript));
        }

        public static object getJsObject(this WatiN_IE ie)
        {
            var toCSharpProxy = ie.injectJavascriptFunctions();
            if (toCSharpProxy.notNull())
                return toCSharpProxy.getJsObject();
            return null;        
        }

        public static T getJsObject<T>(this WatiN_IE ie, string jsCommand)
        {
            var jsObject = ie.getJsObject(jsCommand);
            if (jsObject is T)
                return (T)jsObject;
            return default(T);
        }

        public static bool doesJsObjectExists(this WatiN_IE ie, string jsCommand)
        {
            var toCSharpProxy = ie.injectJavascriptFunctions();
            if (toCSharpProxy.notNull())
            {
                var command = "window.external.setJsObject(typeof({0}))".format(jsCommand);
                ie.invokeEval(command);
                ie.remapInternalJsObject();             
                return toCSharpProxy.getJsObject().str()!="undefined";
            }
            return false;
        }

        public static object getJsVariable(this WatiN_IE ie, string jsCommand)
        {
            return ie.getJsObject(jsCommand);
        }

        public static object getJsObject(this WatiN_IE ie, string jsCommand)
        {
            var toCSharpProxy = ie.injectJavascriptFunctions();
            if (toCSharpProxy.notNull())
            {
                var command = "window.external.setJsObject({0})".format(jsCommand);
                ie.invokeEval(command);
                ie.remapInternalJsObject();             
                return toCSharpProxy.getJsObject();
            }
            return null;
        }               

        public static WatiN_IE remapInternalJsObject(this WatiN_IE ie)
        {       
            //"setting JS _jsObject variable to getJsObject()".info();
            ie.invokeEval("_jsObject = window.external.getJsObject()"); // creates JS variable to be used from JS
            return ie;
        }

        public static WatiN_IE setJsObject(this WatiN_IE ie, object jsObject)
        {
            var toCSharpProxy = ie.injectJavascriptFunctions();
            if (toCSharpProxy.notNull())            
            {
                toCSharpProxy.setJsObject(jsObject);
                ie.remapInternalJsObject();
            }
            return ie;
        }

        public static object waitForJsObject(this WatiN_IE watinIe)
        {
            return watinIe.waitForJsObject(500, 20);
        }

        public static object waitForJsObject(this WatiN_IE watinIe, int sleepMiliseconds, int maxSleepTimes)
        {                   
            "[WatiN_IE][waitForJsObject] trying to find jsObject for {0} x {1} ms".info(maxSleepTimes, sleepMiliseconds);
            watinIe.setJsObject(null);
            for(var i = 0; i < maxSleepTimes ; i++)
            {
                var jsObject = watinIe.getJsObject();
                if(jsObject.notNull())
                {
                    "[watinIe][waitForJsObject] got value: {0} (n tries)".info(jsObject, i);
                    return jsObject;
                }

                watinIe.sleep(500, false);
            }
            "[WatiN_IE][waitForJsObject] didn't find jsObject after {0} sleeps of {1} ms".error(maxSleepTimes, sleepMiliseconds);
            return null;
        }

        public static object waitForJsVariable(this WatiN_IE watinIe, string jsCommand)
        {
            return watinIe.waitForJsVariable(jsCommand,  500, WatiN_IE_ExtensionMethods.WAITFORJSVARIABLE_MAXSLEEPTIMES);
        }

        public static object waitForJsVariable(this WatiN_IE watinIe, string jsCommand, int sleepMiliseconds, int maxSleepTimes)
        {   
            "[WatiN_IE][waitForJsVariable] trying to find jsObject called '{0}' for {1} x {2} ms".info(jsCommand, maxSleepTimes, sleepMiliseconds);         
            watinIe.setJsObject(null);
            for(var i = 0; i < maxSleepTimes ; i++)
            {
                if (watinIe.doesJsObjectExists(jsCommand))
                {
                    var jsObject = watinIe.getJsObject(jsCommand);
                    "[watinIe][waitForJsVariable] got value: {0} ({1} tries)".info(jsObject, i);
                    return jsObject;
                }                   
                watinIe.sleep(500, false);
            }
            "[WatiN_IE][waitForJsVariable] didn't find jsObject called '{0}' after {1} sleeps of {2} ms".error(jsCommand, maxSleepTimes, sleepMiliseconds);
            return null;
        }

        public static WatiN_IE deleteJsVariable(this WatiN_IE watinIe, string jsVariable)
        {
            var evalString = "try { delete " + jsVariable + " } catch(exception) { }";
            watinIe.eval(evalString);
            return watinIe;
        }

    }
} 
```

有关更多 WatiN/WebBroser 扩展方法，请参阅[https://github.com/o2platform/FluentSharp_Fork.WatiN/tree/master/FluentSharp.WatiN/ExtensionMethods](https://github.com/o2platform/FluentSharp_Fork.WatiN/tree/master/FluentSharp.WatiN/ExtensionMethods)

# javascript - 在 Javascript 中实例化数组后定义数组初始数据的最佳方法是什么？

> ID：12993757
> 
> 赞同：0
> 
> 时间：2012-10-21T00:01:25.760
> 
> 标签：javascript, arrays

我有一个已经用 new Array() 在对象类（又名原型）中实例化的数组，但没有数据。创建对象后，我通常会一次性定义其初始数据。有没有办法在不进行 100 行单独推送的情况下分配所有这些数据？有没有办法一次将大量数据分配给现有数组？也许是这样的：

```
myArray.push([1,2,3]); 
```

我可以使用：

```
myArray = myArray.concat([1,2,3]); 
```

但这会创建一个全新的数组，当我真正要做的只是为现有数组分配其初始数据时，这似乎更加昂贵和混乱。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T00:12:17.427

我想我不明白这个问题，但如果数组实际上是空的，你可以将值分配给旧的更改引用并让垃圾收集器删除空的：

```
var array = new Array()
// Later on your code
array = [1, 2, 3]; 
```

话虽如此，当您有数据要添加时，最好不要这样做并初始化您的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T00:14:10.847

在您打算将其用于某事之前，确实没有太多理由实例化一个空数组，特别是如果您稍后要加载数据。在您的示例中，您可以完全跳过初始化。

```
// leave it undefined initially
var array;

// set it to your values
array = [1,2,3]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T00:40:48.170

如果我们谈论的是*现有*数组，您不需要多次调用`.push()`. 您可以在一次调用中传递多个参数。

```
myArray.push(1,2,3,4,5,6,7); 
```

* * *

如果要添加的项目在不同的数组中，您可以使用`.apply`单独添加它们。

```
var itemsToAdd = [1,2,3,4,5,6,7];

myArray.push.apply(myArray, itemsToAdd); 
```

* * *

但是对于一个*新*的Array，可以使用文字语法同时创建和初始化，也可以将多个项目传递给 Array 构造函数。

在您的问题中，您声明 Array 在构造函数的`.prototype`. 正如我在上面的评论中指出的那样，这通常不是你想要的。但是如果打算在这种情况下共享，那么上面的前两个解决方案将起作用。

# c# - wpf目标属性依赖

> ID：12993760
> 
> 赞同：3
> 
> 时间：2012-10-21T00:01:36.573
> 
> 标签：c#, .net, wpf, xaml, data-binding

我正在尝试创建一个在我的类中`Bindable`调用的简单属性`MyBoolValue``UserControl`

首先，这里是 xaml

```
<UserControl x:Class="TMDE.Controls.SimNaoRadioPicker"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Height="16"
              DataContext="{Binding RelativeSource={RelativeSource Self}}">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <CheckBox  Grid.Column="0" Content="Teste" IsChecked="{Binding Path=MyBoolValue}" x:Name="chk" />
    </Grid>
</UserControl> 
```

这里是代码隐藏：

```
public partial class SimNaoRadioPicker : UserControl
{

   public SimNaoRadioPicker()
    {
        InitializeComponent();
    }  

   public bool? MyBoolValue
   {
       get
       {
           return (bool?)GetValue(MyCustomPropertyProperty);
       }
       set
       {
           SetValue(MyCustomPropertyProperty, value);
       }
   }

   // Using a DependencyProperty as the backing store for MyCustomProperty.  This enables animation, styling, binding, etc...
   public static readonly DependencyProperty MyCustomPropertyProperty =
       DependencyProperty.Register("MyBoolValue", 
       typeof(bool?), typeof(SimNaoRadioPicker), 
       new UIPropertyMetadata(MyPropertyChangedHandler));

   public static void MyPropertyChangedHandler(DependencyObject sender, DependencyPropertyChangedEventArgs e)
   {
       // Get instance of current control from sender
       // and property value from e.NewValue

       // Set public property on TaregtCatalogControl, e.g.
       ((SimNaoRadioPicker)sender).chk.IsChecked = (bool?)e.NewValue;
   }      
} 
```

现在，当尝试在另一个窗口中使用此控件时，如下所示：

```
 <my:SimNaoRadioPicker x:Name="test" MyBoolValue="{Binding QCV_Localizacao_Reutilizacao}"  Height="16" HorizontalAlignment="Left" Margin="287,456,0,0" VerticalAlignment="Top" Width="167" /> 
```

绑定不起作用，属性 QCV_Localizacao_Reutilizacao 没有得到更新，反之亦然。

Window 的 DataContext 是一个实现 INotifyPropertyChanged 的​​类，因此属性“QCV_Localizacao_Reutilizacao”应该可以正常工作。

此外，如果我使用常规 CheckBox 而不是我的 UserControl，它可以正常工作

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T01:38:35.683

我将删除布尔值的可为空部分并将其设为布尔值，然后将绑定模式设置为两种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T08:15:24.897

主要有两个问题——

**首先**，您的绑定模式必须是`TwoWay`您可以通过两种方式实现的 -

要么指定它是`TwoWay in xaml`这样的 -

```
<my:SimNaoRadioPicker MyBoolValue="{Binding QCV_Localizacao_Reutilizacao,
                                              Mode=TwoWay}"/> 
```

上面的`drawback`方法是，当您使用 UserControl 的实例时，您必须明确设置模式。

另一种方法是修改您的 DP 本身，使其在默认情况下始终以这样的双向模式绑定`FrameworkPropertyMetadata`-

```
public static readonly DependencyProperty MyCustomPropertyProperty =
       DependencyProperty.Register("MyBoolValue", 
       typeof(bool?), typeof(SimNaoRadioPicker), 
       new FrameworkPropertyMetadata(false, 
                FrameworkPropertyMetadataOptions.BindsTwoWayByDefault, 
                            MyPropertyChangedHandler)); 
```

**其次**，`QCV_Localizacao_Reutilizacao`属性在于你的Window的DataContext。但是，默认情况下，任何控件都会在其自己的 dataContext 中查找绑定，因此您需要明确告诉它使用`RelativeSource`这样的方式查看 Window 的 DataContext -

```
<my:SimNaoRadioPicker MyBoolValue="{Binding QCV_Localizacao_Reutilizacao,
                                RelativeSource={RelativeSource Mode=FindAncestor,
                                                     AncestorType=Window}/> 
```

# java - Java List API 实现的开源测试套件？

> ID：12993764
> 
> 赞同：4
> 
> 时间：2012-10-21T00:03:07.677
> 
> 标签：java, collections, test-suite

我刚刚写了一个`WeakArrayList<E>`类，它实现`List<E>`了`WeakReference<E>`s 元素和适当的同步。

我完全有理由相信，一个完整的测试套件会比我的班级更大更复杂。

和是否有（免费）测试`List`套件？`ArrayList``Map`

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T23:32:55.510

Google Collections 有一个非常精细的集合测试套件库，但它不能开箱即用地用于外部类和 JUnit 4。我分叉了[http://google-collections.googlecode.com/svn/trunk（A](http://google-collections.googlecode.com/svn/trunk) Guava 的子集），然后我将测试转换为他们自己的库。我必须修改一些类，并添加其他类，以便它可以在子类中正确使用泛型，并解决其他一些问题。如果我可以确定它不会违反任何许可，我可以将它放在 GitHub 或其他地方。

# java - 如何在android中更改一个特定视图的主题？

> ID：12993765
> 
> 赞同：0
> 
> 时间：2012-10-21T00:03:59.347
> 
> 标签：java, android, android-widget

我想在我的 Android 应用程序中使用 Switch 小部件，但是对于三星设备的主题，它们不允许更改开关上的文本。无论您将开/关文本更改为什么，它都只会在开关上显示一个蹩脚的“I”或“O”。

我想将我的应用程序主题保持为设备默认值，但如何将“切换”小部件的主题切换为常规 Holo 主题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:23:23.157

Use one of the backports of Switch like [https://github.com/BoD/android-switch-backport](https://github.com/BoD/android-switch-backport)

This will give you complete control over the look of Switch.

# php - 将php对象的属性存储在另一个对象中作为参考

> ID：12993766
> 
> 赞同：0
> 
> 时间：2012-10-21T00:04:01.457
> 
> 标签：php

是否可以在不同类的对象中存储对对象属性（保存标量数据，如字符串或整数的类成员变量）的引用？

我试图让以下两个 echo 语句产生相同的结果。

```
<?php

$x = new Type;
$x->name = 'abcd';

echo "x.name=" . $x->name . '<br/>';
echo "x.obj.name=" . $x->obj->value . '<br/>';

class Type
{
    public $obj; //Instance of Property (Property class defined below)
    public $name;

    function __construct()
    {
        $this->obj = new Property($this->name);
    }
}

class Property
{
    public $value;

    function __construct($v)
    {
        $this->value = $v;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T00:10:30.280

$this->obj = new Property($this->name);

在创建对象时调用。这是在分配之前执行的。即当你调用 $x = new Type; 构造函数被调用，您尝试复制到那时为空的“名称”

可能是您希望它遵循的，而不是传递值，而是传递 $this 并保留引用。

```
<?php

class Type
{
    public $obj; //Instance of Property (Property class defined below)
    public $name;

    function __construct()
    {
        $this->obj = new Property($this);
    }
}

class Property
{
    public $value;

    function __construct($ref)
    {
        $this->value = $ref;
    }
}

$x = new Type;
$x->name = 'abcd';

echo "x.name=" . $x->name . '<br/>';
echo "x.obj.name=" . $x->obj->value->name . '<br/>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T00:10:24.277

`name`您可以在构造函数中传递值。

```
$x = new Type('abcd'); 
```

如果不这样做，您的构造函数将不知道现在`$this->name`是什么。所以我们在构造函数中使用它并在使用它之前设置类属性。

```
function __construct($p_name){
  $this->name = $p_name;
  $this->obj = new Property($this->name);
} 
```

* * *

您可以在调用构造函数后轻松设置值，然后初始化引用 -

```
class Type {
  public $obj;
  public $name;

  function setProperty(){
    $this->obj = new Property($this->name);
  }
}

$x = new Type;
$x->name = 'abcd';
$x->setProperty();

echo "x.name=" . $x->name;
echo "x.obj.name=" . $x->obj->value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-02T01:10:56.590

这是一个老问题，但只是补充一下。

您可以在另一个对象内部拥有一个具有方法和属性的对象。

例子

```
$obj1 = new class1();

$obj2 = new class2($obj1); // you just grabbed $obj1 and stuck it inside $obj2 
```

现在您可以像这样使用存储对象的方法：

```
$obj2->obj1->method_from_obj1(); 
```

或访问存储对象的属性，如下所示：

```
$obj2->obj1->property_of_obj1; 
```

如果您实例化了某个 API 的对象并想在自己的对象中使用 API 方法，这将非常方便。

# android - 使用新的 Android SDK 3.0 邀请好友请求

> ID：12993767
> 
> 赞同：3
> 
> 时间：2012-10-21T00:04:03.973
> 
> 标签：android, facebook, facebook-android-sdk, fbdialogs

我正在使用刚刚在 Android 上发布的新 Facebook SDK **3.0 。**我想让用户**邀请他/她的朋友加入应用程序**。

但是，在新的 SDK 中，您不会使用 App ID创建**新的 Facebook对象。**您扩展了教程中给出的**FacebookActivity ：http:** [//developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/authenticate/](http://developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/authenticate/)

因此，我无法使用提供的参考资料向朋友发送邀请，因为没有 facebook 对象可以调用**dialog 方法**。 [http://developers.facebook.com/docs/howtos/androidsdk/3.0/send-requests/](http://developers.facebook.com/docs/howtos/androidsdk/3.0/send-requests/)

我已经设置了**Friend Picker UI**并且可以获取用户选择的 GraphUser 对象。http://developers(dot)facebook(dot)com/docs/tutorials/androidsdk/3.0/scrumptious/show-friends/

但是，我不知道如何**邀请用户选择的朋友**。

有谁知道如何在**新的 SDK**中邀请朋友？你会使用**FbDialog**类吗？如果是这样，需要提供的**url 字符串是什么？**（我尝试使用“ **apprequests** ”，但没有奏效）

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T01:14:26.770

试试这个链接：

[https://developers.facebook.com/docs/howtos/androidsdk/3.0/send-requests/](https://developers.facebook.com/docs/howtos/androidsdk/3.0/send-requests/)

```
 private void sendRequestDialog() {
    Bundle params = new Bundle();
    params.putString("message", "Learn how to make your Android apps social");
    WebDialog requestsDialog = (
        new WebDialog.RequestsDialogBuilder(getActivity(),
            Session.getActiveSession(),
            params))
            .setOnCompleteListener(new OnCompleteListener() {

                @Override
                public void onComplete(Bundle values,
                    FacebookException error) {
                    final String requestId = values.getString("request");
                    if (requestId != null) {
                        Toast.makeText(getActivity().getApplicationContext(), 
                            "Request sent",  
                            Toast.LENGTH_SHORT).show();
                    } else {
                        Toast.makeText(getActivity().getApplicationContext(), 
                            "Request cancelled", 
                            Toast.LENGTH_SHORT).show();
                    }
                }

            })
            .build();
    requestsDialog.show();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T00:51:24.297

您可以为此使用 com.facebook.widget.WebDialog 类：

```
WebDialog dialog = new WebDialog.Builder(myActivity, mySession, ...).build();
dialog.show(); 
```

另请参阅帮助类 WebDialog.FeedDialogBu​​ilder 和 WebDialog.RequestsDialogBu​​ilder ，它们可以更轻松地构建这些对话框。

# python - PyQt + 改变小部件

> ID：12993768
> 
> 赞同：0
> 
> 时间：2012-10-21T00:04:10.883
> 
> 标签：python, qt, pyqt

考虑以下代码：

```
 app = QApplication(sys.argv)

    mainWindow = MainWindow() # window created with Designer
    mainWindow.ui.output = Output() # "Output" is a subclass of QPlainTextEdit
    preparePropertiesTabs(mainWindow)
    mainWindow.show()

    mainWindow.ui.output.appendPlainText('test')

    exit(app.exec_()) 
```

我期望在我的“输出”小部件中有“测试”这个词，但它是空的。无论如何，当我只显示“输出”（mainWindow.ui.output.show() 而不是 mainWindow.show()）时，就会出现文本。

我不知道什么吗？:|

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T00:37:44.287

您的输出没有父级。尝试`mainWindow.ui.output = Output(mainWindow)`

# linux - 将 debian 软件包移植到 CentOS 的 YUM

> ID：12993772
> 
> 赞同：3
> 
> 时间：2012-10-21T00:05:45.070
> 
> 标签：linux, centos, debian, redhat, dependency-management

我有一个在 Debian 上运行的项目，它使用了 Debian 存储库提供的许​​多软件包。

由于需求，我已经考虑将项目移植到 CentOS，但发现我需要的许多包完全丢失 - 至少 10 个依赖项必须在用户机器上安装时手动编译。

我的问题是，为用户机器创建安装程序的最佳方法是什么？我应该使用 automake 工具（使用标准的 ./configure、make、make install）来编译所需的库，还是这是一种非标准方法。请注意，我的应用程序实际上不需要编译，因为它是用 Python 编写的，所以当您不编译自己的应用程序时，执行“make”是否很奇怪？

配置脚本是否应该只警告用户包 X 丢失，并让他们处理其余的？

我是否应该通过手动运行 pkg-config 为每个所需的库手动运行几次我自己的依赖项检查器，如果缺少某些内容则退出？

我对此很陌生，所以任何让我朝着正确方向前进的提示都值得赞赏。

编辑：我熟悉红帽基础发行版的 RPM 和 yum，但 CentOS 缺少许多我需要的多媒体包。我的包依赖项之一的示例是“liquidsoap”，它是一个可编程音频引擎：[http ://savonet.sourceforge.net/](http://savonet.sourceforge.net/)

这在 Debian 上可用，但在 Redhat/Centos 上不可用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T00:10:07.023

请参阅 CentOS 软件包管理的此链接。

[http://wiki.centos.org/PackageManagement/Yum](http://wiki.centos.org/PackageManagement/Yum)

CentOS 是基于 redhat 的，默认情况下不使用 .deb 包。但是 apt 包管理已被移植到大量平台，您也许可以为 centOS 使用移植

如果您使用 YUM，您需要的任何软件包都将用于您的应用程序，因为 redhat 发行版需要与任何其他发行版相同的东西。

**编辑：** 从评论中获取详细信息

目标平台上不可用的包要么必须在目标平台上构建（可能作为端口），然后在移植的包（在本例中为 YUM）中交付，要么需要修改和分叉代码以使用已经存在的包在目标平台上可用。选择取决于哪个更糟，或者考虑到您的限制，哪个是可能的。

# c# - 如何使用 BlockingCollection 数组 ，一次一个元素，在 C# 中？

> ID：12993775
> 
> 赞同：0
> 
> 时间：2012-10-21T00:06:16.603
> 
> 标签：c#, .net, arrays, task-parallel-library, blockingcollection

我已经看到很多关于如何`BlockingCollection<T>`在生产者-消费者场景中使用 a 的示例，甚至是如何在[此处](http://msdn.microsoft.com/en-us/library/dd997306.aspx)一次使用一个元素。我对并行编程很陌生，所以我面临以下问题：

实际上，问题在于如何编写`ConsumerProducerExample.ConsumerMethod`下面示例中的方法，以便它为数组中的每个元素消耗前 2`double`个`BlockingCollection<Double>`，然后为数组中的每个元素消耗下一个 2 `double`，依此类推。

我已经在下面的示例中编写了该方法，但这**不是**我希望它工作的方式。这是我在上面链接的示例中所知道的。恰恰相反：就像这里一样，它会`double`在跳转到`BlockingCollection<Double>`数组的下一个之前消耗掉每个。而且，我希望它只消耗两个`double`，然后跳转到下一个`BlockingCollection<Double>`，消耗两个`double`，等等。完成数组循环后，它应该再次`double`为每个`BlockingCollection<Double>`元素消耗下两个，依此类推。

```
public class ConsumerProducerExample
{
    public static BlockingCollection<Double>[] data;
    public static Int32 nEl = 100;
    public static Int32 tTotal = 1000;
    public static Int32 peakCounter = 0;

    public static void InitData()
    {
        data = new BlockingCollection<Double>[nEl];
        for (int i = 0; i < nEl; i++) data[i] = new BlockingCollection<Double>();
    }

    public static void ProducerMethod()
    {
        Int32 t = 0, j;
        while (t < ConsumerProducerExample.tTotal)
        {
            j = 0;
            while (j < ConsumerProducerExample.nEl)
            {
                data[j].Add(Math.Sin((Double)t / 10.0D));
                j++;
            }
            t++;
        }
        j = 0;
        while (j < ConsumerProducerExample.nEl)
        {
            data[j].CompleteAdding();
            j++;
        }
    }

    public static void ConsumerMethod()
    {
        // THE PROBLEM IS WITH THIS METHOD

        Double x1, x2;
        Int32 j = 0;
        while (j < Program.nEl)
        {
            while (!data[j].IsCompleted)
            {
                try
                {
                    x1 = data[j].Take();
                    x2 = data[j].Take();
                }
                catch (InvalidOperationException)
                {
                    break;
                }

                if (x1 * x2 < 0.0)
                {
                    Program.peakCounter++;
                }
            }

            j++;
        }
    }
} 
```

它们应该像这样使用：

```
ConsumerProducerExample.InitData();
Task task1 = Task.Factory.StartNew(ConsumerProducerExample.ProducerMethod);
Task task2 = Task.Factory.StartNew(ConsumerProducerExample.ConsumerMethod); 
```

有什么建议么？

简而言之，这是一种尝试同时计算`nEl`微分方程解中的峰值（`sin(x)`在本例中，解由 表示）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T10:47:37.580

基本上，您需要摆脱内部循环并添加另一个外部循环，该循环遍历所有集合，直到它们完成。就像是：

```
while (!data.All(d => d.IsCompleted))
{
    foreach (var d in data)
    {
        // only takes elements from the collection if it has more than 2 elements
        if (d.Count >= 2)
        {
            double x1, x2;
            if (d.TryTake(out x1) && d.TryTake(out x2))
            {
                if (x1 * x2 < 0.0)
                    peakCounter++;
            }
            else
                throw new InvalidOperationException();
        }
    }
} 
```

# javascript - JavaScript 中将 concat url 输出到 YUI 图表库输出的函数

> ID：12993783
> 
> 赞同：0
> 
> 时间：2012-10-21T00:07:26.223
> 
> 标签：javascript

**尝试在 JavaScript 中正确编写一个函数，该函数根据下拉列表中的选定选项将连接的 url 输出到图表库输出（用于图表重新渲染）...。**

**问题**：我没有让图表使用连接的 url 重新呈现（每次在下拉列表中选择一个选项时都应该发送）。

**头部的 JavaScript 代码：**

> > 函数 httpGet(theUrl) { var xmlHttp = null;

```
 xmlHttp = new XMLHttpRequest();         // instantiate request
        xmlHttp.open( "GET", theUrl, false );   // open url
        xmlHttp.send( null );                   // sending nothing
        return xmlHttp.responseText;            // return url's data as text
        };
    function selectFabric(){
            var urlString = "http://localhost:8083/tbl/sparqlmotion?id=LiabilityChart&arg1=";
            var fabrics = document.getElementById('fabrics');
            var selectedFabric = fabrics.options[fabrics.selectedIndex];
            var linkAddTogether = [urlString + selectedFabric.value];
            var linkResult = linkAddTogether[0];
            var result = httpGet(linkResult);
            if (selectedFabric.value != "nothing"){
                return linkResult;      // update begins        // document.write(linkAddTogether)
            };
        };

    function revive (key, value) {
        if (value.datatype == "http://www.w3.org/2001/XMLSchema#double" ||  // if datatype is this
        value.datatype == "http://www.w3.org/2001/XMLSchema#integer" ||     // or, this
        value.datatype == "http://www.w3.org/2001/XMLSchema#float")         // or, this
        {
            return (parseInt(value.value))      // if '#double', '#integer', or '#schema', then: 'vars' label + convert the datatype's float value to integer 
        }
        else if (value.type == 'literal')
        {
            return (value.value)        // if datatype's value is a literal: 'vars' label + return as a string
        }
        else if (value.datatype == 'http://www.w3.org/2001/XMLSchema#date') 
        {
            return value.value      // if "XMLSchema#date's" value is a literal: 'vars' label + return as a string
        }
        else 
        {
            return value        // if datatype is anything else: 'vars' label + return value as a string
        }
    };

    var scriptHead = ["YUI().use('charts',function(Y){var myDataValues=\n\n["];
    var scriptTail = ["\n];\n\nvar styleDef={series:{Stock:{line:{color:'#EEB647'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#222',alpha:0,wmode:'transparent'},over:{fill:{color:'#eee'},border:{color:'#000'},width:9,height:9}}},Liability:{line:{color:'#171944'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#222',alpha:0,wmode:'transparent'},over:{fill:{color:'#eee'},border:{color:'#000'},width:9,height:9}}},Shipment:{line:{color:'#ff0000',alpha:0,wmode:'transparent'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#ff0000',alpha:0,wmode:'transparent'},over:{fill:{color:'#ff0000',alpha:0,wmode:'transparent'},border:{color:'#000',alpha:0,wmode:'transparent'},width:16,height:16}}},Production:{line:{color:'#FFD700',alpha:0,wmode:'transparent'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#FFD700',alpha:0,wmode:'transparent'},over:{fill:{color:'#FFD700',alpha:0,wmode:'transparent'},border:{color:'#000',alpha:0,wmode:'transparent'},width:16,height:16}}},Order:{line:{color:'#006400',alpha:0,wmode:'transparent'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#006400',alpha:0,wmode:'transparent'},over:{fill:{color:'#006400',alpha:0,wmode:'transparent'},border:{color:'#000',alpha:0,wmode:'transparent'},width:16,height:16}}}}};var myAxes={dateRange:{keys:['date'],position:'bottom',type:'category',title:'Date Range',styles:{majorTicks:{display:'none'},label:{rotation:-45,margin:{top:5}},title:{fontSize:'90%'}}}};var mychart=new Y.Chart({dataProvider:myDataValues,interactionType:'planar',render:'#mychart',categoryKey:'Date',styles:styleDef,categoryType:'time',horizontalGridlines:{styles:{line:{color:'#fff'}}},verticalGridlines:{styles:{line:{color:'#fff'}}}})});\n\n"];
    var simpleHead = [scriptHead];
    var simpleTail = [scriptTail];
    var oldData = JSON.parse(result, revive); 
```

**表单的 HTML 代码（在正文中）：**

> > form style="width:200px; color:#333; padding-right:5px; padding-bottom:2px; padding-left:55px; margin-top:0px; clear:none;" name="properties" id="properties"> select style="width:160px; color:#333; clear:none; display:block;" name="fabrics" id="fabrics" onChange="selectFabric()">

```
 option value="nothing">Select Fabric END option

            option value="KOD23-4074-LV">KOD23-4074-LV END option

            option value="SGOD2-2858-LV">SGOD2-2858-LV END option

            option value="W-897-LV">W-897-LV END option

                    option value="FF-4084-LV">FF-4084-LV END option

                 END select
           END form 
```

**图表 JavaScript 代码（在 body 中编写脚本渲染 YUI 图表插件）：**

> > ```
> > document.write('\x3Cscript type="text/javascript" id="source">'); 
> > ```

```
document.write(simpleHead[0] + '\n{Date: "' + oldData.results.bindings[0].date + '", Liability: ' + oldData.results.bindings[0].liability + ", Stock: " + oldData.results.bindings[0].stock + ", " + oldData.results.bindings[0].event + ": " + oldData.results.bindings[0].current + "}," + "\n\n");

document.write('\n{Date: "' + oldData.results.bindings[1].date + '", Liability: ' + oldData.results.bindings[1].liability + ", Stock: " + oldData.results.bindings[1].stock + ", " + oldData.results.bindings[1].event + ": " + oldData.results.bindings[1].current + "}," + "\n\n");

document.write('\n{Date: "' + oldData.results.bindings[2].date + '", Liability: ' + oldData.results.bindings[2].liability + ", Stock: " + oldData.results.bindings[2].stock + ", " + oldData.results.bindings[2].event + ": " + oldData.results.bindings[2].current + "}," + "\n\n");

document.write('\n{Date: "' + oldData.results.bindings[3].date + '", Liability: ' + oldData.results.bindings[3].liability + ", Stock: " + oldData.results.bindings[3].stock + ", " + oldData.results.bindings[3].event + ": " + oldData.results.bindings[3].current + "}," + "\n\n");

document.write('\n{Date: "' + oldData.results.bindings[4].date + '", Liability: ' + oldData.results.bindings[4].liability + ", Stock: " + oldData.results.bindings[4].stock + ", " + oldData.results.bindings[4].event + ": " + oldData.results.bindings[4].current + "}," + "\n\n");

document.write('\n{Date: "' + oldData.results.bindings[5].date + '", Liability: ' + oldData.results.bindings[5].liability + ", Stock: " + oldData.results.bindings[5].stock + ", " + oldData.results.bindings[5].event + ": " + oldData.results.bindings[5].current + "}," + "\n\n");

document.write('\n{Date: "' + oldData.results.bindings[6].date + '", Liability: ' + oldData.results.bindings[6].liability + ", Stock: " + oldData.results.bindings[6].stock + ", " + oldData.results.bindings[6].event + ": " + oldData.results.bindings[6].current + "}" + simpleTail[0] + "\n\n");

document.write('\x3C/script>'); 
```

# python - 当我尝试运行这段代码（Python）时，我不断收到命名错误

> ID：12993788
> 
> 赞同：1
> 
> 时间：2012-10-21T00:09:19.037
> 
> 标签：python, class

```
class game_type(object):
    def __init__(self):
        select_game = raw_input("Do you want to start the game? ")
        if select_game.lower() == "yes":
            player1_title = raw_input("What is Player 1's title? ").lower().title()

class dice_roll(object,game_type):
    current_turn = 1
    current_player = [player1_title,player2_title]
    def __init__(self):
        while game_won == False and p1_playing == True and p2_playing == True: 
            if raw_input("Type 'Roll' to start your turn  %s" %current_player[current_turn]).lower() == "roll": 
```

我不断收到一条错误消息：NameError: name 'player1_title' is not defined

我知道标题是一个函数，所以我确实尝试使用 player1_name 和 player1_unam 但这些也返回了相同的错误:(

有人可以帮忙吗

非常感谢所有答案

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T01:22:13.140

导致 NameError 的原因有很多。

一方面，`__init__`game_type 方法不保存任何数据。要分配实例变量，您必须使用 指定类实例`self.`。如果你不这样做，你只是在分配局部变量。

其次，如果您在子类中创建一个新函数并且仍然想要父类的效果，则必须显式调用父类的`__init__`函数。`super()`

所以基本上，你的代码应该是

```
# Class names should be CapCamelCase
class Game(object):                                                                
    def __init__(self):                                                    
        select_game = raw_input("Do you want to start the game? ")         
        if select_game.lower() == "yes":                               
            self.player1_title = raw_input("What is Player 1's title? ").lower().title()
            # Maybe you wanted this in DiceRoll?
            self.player2_title = raw_input("What is Player 1's title? ").lower().title()

# If Game were a subclass of something, there would be no need to 
# Declare DiceRoll a subclass of it as well
class DiceRoll(Game):                                                      
    def __init__(self):                                                   
        super(DiceRoll, self).__init__(self)                               
        game_won = False                                                   
        p1_playing = p2_playing = True                                     
        current_turn = 1                                                   
        current_players = [self.player1_title, self.player2_title]    
        while game_won == False and p1_playing == True and p2_playing == True:
            if raw_input("Type 'Roll' to start your turn %s" % current_players[current_turn]).lower() == "roll":
                pass 
```

# java - Swing：两个 JFrame 之间的干净过渡

> ID：12993790
> 
> 赞同：1
> 
> 时间：2012-10-21T00:09:32.273
> 
> 标签：java, swing, jframe

不久前，我读到在应用程序中切换不同“屏幕”的最佳方法是设置不同`JFrame`的 s，然后简单地处理第一个并调用第二个。例如，我有屏幕 A 扩展`JFrame`和屏幕 B 扩展`JFrame`，在一个应该切换到下一个屏幕的按钮上，我会写这样的东西

```
JButton button = new JButton("show next screen");
button.addActionListener(){
    new ScreenB();
    frameA.dispose(); // assumed that we coded something like frameA = this earlier
} 
```

现在的问题是，在两个帧的转换之间，我看到屏幕 A 或屏幕 B 的 1/10，这非常难看。什么是更好的解决方案？将屏幕扩展为`Container`并将它们设置`ContentPane`为始终相同`JFrame`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T01:56:15.353

尝试将 a 附加`WindowListener`到 FrameA

在你的action listener调用`frameA.dipsose()`中，只要把frame set设置成`DISPOSE_ON_CLOSE`它就会触发一个`windowClosed`事件`WindowListener`。

发生这种情况时，您现在可以打开新窗口。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-21T00:14:52.453

您可以在另一个页面中调用来自 JQuery 的 div 标签，如下所示：

```
$("#myDiveTag").load("http://mySecondPage.aspx"); 
```

如果您需要发送变量，您可以执行以下操作：

```
var myVar = $("#controlThatHasVariable");
$("#myDivTag").load("http://xxx.aspx?myData=" + myVar); 
```

这是 JQuery 加载方法的语法：

```
load("URI", data, callback) 
```

本质上，您正在处理 div 标签内的内容并将其替换为您正在调用的页面。你不需要所有的标签，因为 JQuery 将页面插入到已经存在的页面中。因此您可以在按钮 onClick 事件上调用 javascript 函数并调用我在上面发布的 Jquery 以替换您在 Jquery 中调用的内容现有的“屏幕”。

# java - Android 上的 Java 原始类型位大小

> ID：12993795
> 
> 赞同：2
> 
> 时间：2012-10-21T00:10:28.253
> 
> 标签：java, android

在 JVM 上运行的 Java 程序中，原始数据类型具有保证的位大小。例如

```
byte      8-bit
short    16-bit
int      32-bit 
```

等等。

Android 上是否也能保证这些位大小？我一直在寻找有关 Android Developers 的文档以进行确认。任何文档链接表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T00:14:13.300

> Android 上是否也能保证这些位大小？

是的，他们是。否则，Java 库将无法移植到 Android。

* * *

文件是这样说的......

参考：http: [//developer.android.com/guide/components/fundamentals.html](http://developer.android.com/guide/components/fundamentals.html)

在第一句话中说：

> Android 应用程序是用 Java 编程语言编写的。

Java 编程语言明确指定所有原始类型的大小和语义。如果 Android 实现的大小不同，则该实现将根本违反（相关）Java 语言规范......因此不是 JAVA。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T00:15:26.260

您可以通过检查包装类来确认这一点，例如，[java.lang.Byte](http://developer.android.com/reference/java/lang/Byte.html#SIZE)确认 Byte 是 8 位，[Character](http://developer.android.com/reference/java/lang/Character.html#SIZE)是 16，[Integer](http://developer.android.com/reference/java/lang/Integer.html#SIZE)是 32。

# vb.net - 仅将字符与字符串末尾的字符进行比较

> ID：12993797
> 
> 赞同：1
> 
> 时间：2012-10-21T00:10:46.433
> 
> 标签：vb.net, string

我正在用 Visual Basic 2010 编写一个程序，该程序列出了每个长度的单词在用户输入的字符串中出现的次数。虽然大部分程序都在工作，但我有一个问题：

当循环遍历字符串中的所有字符时，程序会检查是否有下一个字符（这样程序就不会尝试遍历不存在的字符）。例如，我使用条件：

```
If letter = Microsoft.VisualBasic.Right(input, 1) Then 
```

where`letter`是字符，`input`是字符串，`Microsoft.VisualBasic.Right(input, 1)`从字符串中提取最右边的字符。因此，如果字母是最右边的字符，程序将停止循环遍历字符串。

这就是问题所在。假设字符串是`This sentence has five words`。最右边的字符是 an `s`，但 an`s`也是第四个和第六个字符。这意味着第一个和第二个`s`将像其他人一样打破循环。

我的问题是是否有办法确保只有`s`最后一个字符或字符串中最后一个字符可以打破循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T01:20:19.663

VB.NET 代码计算每个长度的单词在用户输入的字符串中出现的次数：

```
Dim sentence As String = "This sentence has five words"
Dim words() As String = sentence.Split(" ")
Dim v = From word As String In words Group By L = word.Length Into Group Order By L 
```

第 2 行可能需要调整以删除标点符号、修剪多余的空格等。

在上面的例子中，`v(i)`包含单词长度，并且`v(i).Group.Count`包含遇到了多少这个长度的单词。出于调试目的，您还有`v(i).Group`一个 数组`String`，它包含属于该组的所有单词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T09:38:38.917

您可以使用几种方法，如 Neolisk 所示；以下是其他几个：

```
Dim breakChar As Char = "s"
Dim str As String = "This sentence has five words"

str = str.Replace(".", " ")
str = str.Replace(",", " ")
str = str.Replace(vbTab, " ")
' other chars to replace

Dim words() As String = str.ToLower.Split(New Char() {" "}, StringSplitOptions.RemoveEmptyEntries)
For Each word In words
    If word.StartsWith(breakChar) Then Exit For
    Console.WriteLine("M1 Word: ""{0}""  Length: {1:N0}", word, word.Length)
Next 
```

如果您出于某种原因需要遍历字符，则可以使用以下内容：

```
Dim breakChar As Char = "s"
Dim str As String = "This sentence has five words"

str = str.Replace(".", " ")
str = str.Replace(",", " ")
str = str.Replace(vbTab, " ")
' other chars to replace

'method 2
Dim word As New StringBuilder
Dim words As New List(Of String)

For Each c As Char In str.ToLower.Trim

    If c = " "c Then
        If word.Length > 0 'support multiple white-spaces (double-space etc.)
            Console.WriteLine("M2 Word: ""{0}""  Length: {1:N0}", word.ToString, word.ToString.Length)
            words.Add(word.ToString)
            word.Clear()
        End If
    Else
        If word.Length = 0 And c = breakChar Then Exit For
        word.Append(c)
    End If
Next

If word.Length > 0 Then
    words.Add(word.ToString)
    Console.WriteLine("M2 Word: ""{0}""  Length: {1:N0}", word.ToString, word.ToString.Length)
End If 
```

我写这些是为了按照你的要求在一个单词的第一个字母上打断，根据需要进行调整。

# css - 使用溢出和 pie-clearfix 清除修复问题

> ID：12993800
> 
> 赞同：0
> 
> 时间：2012-10-21T00:11:49.767
> 
> 标签：css, css-float, clearfix

我正在尝试浮动一些元素并应用 clearfix 以便父元素可以扩展到子元素的高度和宽度。

所以，我只是按照这个小提琴设置布局：http: [//jsfiddle.net/fMjEx/](http://jsfiddle.net/fMjEx/)

然后我想浮动里面的元素`.bar`。这通常很简单：

1.  浮动元素。
2.  `pie-clearfix`使用或清除修复父级`overflow: auto`。

但是，我遇到了这些问题：

*   如果我使用 pie-clearfix，`.picture`旁边的元素`.bar`也包含在清除中：http: [//jsfiddle.net/6C7WD/](http://jsfiddle.net/6C7WD/)

*   如果我使用`overflow: auto`or `overflow: hidden`，则`.bar`不再跨越文档的宽度：http: [//jsfiddle.net/fv2gA/](http://jsfiddle.net/fv2gA/)

最初，我的一个解决方案是制作`.picture` `position: absolute`. 然而，这种方法的问题是元素被从流中取出。

在布局中，高度`.bar`是可变的，取决于里面的内容。我想给出一个`.bar`，以便它们之后的任何东西都被向下推那个量，这取决于是否或具有更大的高度。`.picture``margin-bottom``.bar``.picture`

这排除了使用`position: absolute`on`.picture`作为解决方案。

是否有满足以下条件的解决方案？

*   Clear 仅在`.bar`.
*   不从流中删除任何元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T02:19:24.117

这是我最终得到的解决方案：

为标记添加了一个包装器：

```
<div class="container">

<div class="group"> <-------------------------- This is the wrapper
    <div class="picture"></div>
    <div class="bar">
        <div class="info"> some text goes here</div>
        <div class="buttons">some other content goes here</div>
    </div>
</div>
</div> 
```

和CSS：

```
.picture{
    width: 100px;
    height: 100px;
    float: left;
    background: green;
    margin-left: 100px;
    margin-top: 10px;
    z-index: 2;
    position: relative;
}

.bar{
    background: blue;
    margin-top: -80px;
    overflow: auto;
    width: 100%;
    float: left;
    z-index: 1;
    position: relative;
}

.group{
    margin-bottom: 10px;
}

.group:after {
    clear: both;
    content: "";
    display: table;
}

.info, .button{
    float: left;
    margin-left: 200px;
}

.container{
    overflow: auto;
} 
```

上面的小提琴：http: [//jsfiddle.net/c6Lng/](http://jsfiddle.net/c6Lng/)

# python - 使用 urllib2 调用 NYT 时间事件 api 时出现 HTTPError 596

> ID：12993803
> 
> 赞同：2
> 
> 时间：2012-10-21T00:12:39.373
> 
> 标签：python, urllib2, urllib, asp.net-web-api

我正在尝试使用 urllib2 调用 NYT events api，但收到 596 错误。如果我自己构建 url，没有问题，但如果我用数据调用 urlopen，我会收到 596 错误。这是怎么回事？596 错误似乎没有记录，所以它没有帮助。

```
>>> data = urllib.urlencode({'api-key': os.environ['NYT_EVENT_LISTING_API_KEY']})  
>>> resp = urllib2.urlopen('?'.join([url,data]))
>>> resp = urllib2.urlopen(url, data)
Traceback (most recent call last):
  File "<input>", line 1, in <module>
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 400, in open
response = meth(req, response)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 513, in http_response
'http', request, response, code, msg, hdrs)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 438, in error
    return self._call_chain(*args)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 372, in _call_chain
    result = func(*args)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 521, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp) 
HTTPError: HTTP Error 596: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T06:26:45.517

@Thomas 是对的，你`GET`在你的第一个请求中使用它将构造这样的 URL：

```
nytimes.com/api/?MY_API_KEY 
```

但是，您的第二次调用`urllib2.urlopen`将`data`作为`POST`请求发送到此 URL

```
nytimes.com/api/ 
```

相反，这会给你*596 service not found error*。

* * *

现在，`urllib2`因其不直观的 API 和文档而臭名昭著，您可以考虑[`Requests`](http://docs.python-requests.org)改用：

```
import requests

api_key = {'api-key': os.environ['NYT_EVENT_LISTING_API_KEY']}
resp = requests.get(url, params=api_key)
print resp.text
print resp.json 
```

这样，`GET`requests和`POST`requests就更容易区分了，url和参数也分开了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T02:30:31.113

您的第一个请求是 GET 请求 - 第二个是 POST 请求。请参阅有关此的[文档](http://docs.python.org/library/urllib2.html#urllib2.urlopen)-`data`提供参数时， urlopen 执行 POST 请求。

# java - 使用按钮开始活动

> ID：12993806
> 
> 赞同：2
> 
> 时间：2012-10-21T00:13:22.043
> 
> 标签：java, android, eclipse, android-activity

我已经浏览了这个网站几个小时，但没有找到解决我的问题的方法：Eclipse 告诉我这个没有错误，但是当我按下“是”（打开下一个活动的那个）按钮时我的“主屏幕”应用程序使清单崩溃：

```
<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Openscreen"
        android:label="@string/title_activity_openscreen" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Q1"
        android:label="@string/title_activity_q1" >
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Q2"
        android:label="@string/title_activity_q2" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

这是我的 Openscreen.java 文件：

```
package com.atf.the.ultimate.onehundred.quiz;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

public class Openscreen extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_openscreen);

    Button homescreen_yes = (Button) findViewById(R.id.homescreen_yes);
    homescreen_yes.setOnClickListener(new View.OnClickListener(){
        public void onClick(View v) {
        Intent homescreen_yes = new Intent(Openscreen.this, Q1.class);
        startActivity(homescreen_yes);
        }
    });
    }

 public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_openscreen, menu);
    return true;
} 
```

}

这是我的 openscreen(activity_openscreen.xml) XML

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 xmlns:tools="http://schemas.android.com/tools"
 android:layout_width="match_parent"
 android:layout_height="match_parent" >

 <TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="68dp"
    android:text="Hello and welcome to the 100 questions quiz. In this quiz you will be     asked a series of quiestions, each with 3 answer possibilities. Select the right one to   proceed, if you fail a quiestion you will lose and have to start over again! Remember to save when you exit, progress is not saved automatically!"
    tools:context=".Openscreen" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="Are you ready to start?"
    tools:context=".Openscreen" />

<Button
    android:id="@+id/homescreen_yes"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView2"
    android:layout_below="@+id/textView2"
    android:layout_marginTop="78dp"
    android:text="Yes!"
    android:onClick= "" />

<Button
    android:id="@+id/homescreen_no"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/homescreen_yes"
    android:layout_alignBottom="@+id/homescreen_yes"
    android:layout_alignRight="@+id/textView2"
    android:text="No!"
    android:onClick="exit" />

</RelativeLayout> 
```

日志猫：

```
 10-21 00:25:29.972: INFO/ActivityManager(67): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.atf.the.ultimate.onehundred.quiz/.Openscreen } from pid 139
10-21 00:25:31.110: INFO/ActivityManager(67): Start proc com.atf.the.ultimate.onehundred.quiz for activity com.atf.the.ultimate.onehundred.quiz/.Openscreen: pid=813 uid=10034 gids={}
10-21 00:25:34.120: INFO/ActivityManager(67): Displayed com.atf.the.ultimate.onehundred.quiz/.Openscreen: +3s399ms (total +30m34s364ms)
10-21 00:25:36.670: INFO/ActivityManager(67): Starting: Intent { cmp=com.atf.the.ultimate.onehundred.quiz/.Q1 } from pid 813
10-21 00:25:37.070: DEBUG/AndroidRuntime(813): Shutting down VM
10-21 00:25:37.080: WARN/dalvikvm(813): threadid=1: thread exiting with uncaught exception (group=0x40015560)
10-21 00:25:37.131: ERROR/AndroidRuntime(813): FATAL EXCEPTION: main
10-21 00:25:37.131: ERROR/AndroidRuntime(813): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.atf.the.ultimate.onehundred.quiz/com.atf.the.ultimate.onehundred.quiz.Q1}: java.lang.NullPointerException
10-21 00:25:37.131: ERROR/AndroidRuntime(813):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
10-21 00:25:37.131: ERROR/AndroidRuntime(813):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
10-21 00:25:37.131: ERROR/AndroidRuntime(813):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-21 00:25:37.131: ERROR/AndroidRuntime(813):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-21 00:25:37.131: ERROR/AndroidRuntime(813):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-21 00:25:37.131: ERROR/AndroidRuntime(813):     at android.os.Looper.loop(Looper.java:123)
10-21 00:25:37.131: ERROR/AndroidRuntime(813):     at android.app.ActivityThread.main(ActivityThread.java:3683)
10-21 00:25:37.131: ERROR/AndroidRuntime(813):     at java.lang.reflect.Method.invokeNative(Native Method)
10-21 00:25:37.131: ERROR/AndroidRuntime(813):     at java.lang.reflect.Method.invoke(Method.java:507)
10-21 00:25:37.131: ERROR/AndroidRuntime(813):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-21 00:25:37.131: ERROR/AndroidRuntime(813):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-21 00:25:37.131: ERROR/AndroidRuntime(813):     at dalvik.system.NativeStart.main(Native Method)
10-21 00:25:37.131: ERROR/AndroidRuntime(813): Caused by: java.lang.NullPointerException
10-21 00:25:37.131: ERROR/AndroidRuntime(813):     at com.atf.the.ultimate.onehundred.quiz.Q1.onCreate(Q1.java:19)
10-21 00:25:37.131: ERROR/AndroidRuntime(813):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-21 00:25:37.131: ERROR/AndroidRuntime(813):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
10-21 00:25:37.131: ERROR/AndroidRuntime(813):     ... 11 more
10-21 00:25:37.180: WARN/ActivityManager(67):   Force finishing activity com.atf.the.ultimate.onehundred.quiz/.Q1
10-21 00:25:37.283: WARN/ActivityManager(67):   Force finishing activity com.atf.the.ultimate.onehundred.quiz/.Openscreen
10-21 00:25:37.790: WARN/ActivityManager(67): Activity pause timeout for HistoryRecord{40803998 com.atf.the.ultimate.onehundred.quiz/.Q1}
10-21 00:25:40.120: INFO/Process(813): Sending signal. PID: 813 SIG: 9
10-21 00:25:40.231: INFO/ActivityManager(67): Process com.atf.the.ultimate.onehundred.quiz (pid 813) has died.
10-21 00:25:40.240: ERROR/InputDispatcher(67): channel '4075d390 com.atf.the.ultimate.onehundred.quiz/com.atf.the.ultimate.onehundred.quiz.Openscreen (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
10-21 00:25:40.250: ERROR/InputDispatcher(67): channel '4075d390 com.atf.the.ultimate.onehundred.quiz/com.atf.the.ultimate.onehundred.quiz.Openscreen (server)' ~ Channel is unrecoverably broken and will be disposed!
10-21 00:25:40.510: INFO/WindowManager(67): WIN DEATH: Window{4075d390 com.atf.the.ultimate.onehundred.quiz/com.atf.the.ultimate.onehundred.quiz.Openscreen paused=true}
10-21 00:25:40.850: WARN/InputManagerService(67): Got RemoteException sending setActive(false) notification to pid 813 uid 10034
10-21 00:25:49.770: WARN/ActivityManager(67): Activity destroy timeout for HistoryRecord{40811148 com.atf.the.ultimate.onehundred.quiz/.Openscreen}
10-21 00:25:49.920: WARN/ActivityManager(67): Activity destroy timeout for HistoryRecord{40803998 com.atf.the.ultimate.onehundred.quiz/.Q1}
10-21 00:25:53.320: DEBUG/SntpClient(67): request time failed: java.net.SocketException:     Address family not supported by protocol 
```

评论按钮不起作用；但它仍然崩溃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T00:25:32.977

从按钮中删除`android:onClick`，因为您没有使用该方法调用它们。

**编辑：** 您的 Log-Cat 显示`NullPointerException`Q1 类中有一个

# c# - 在 VS2012 中使用 InstallShield 更新应用程序

> ID：12993808
> 
> 赞同：5
> 
> 时间：2012-10-21T00:13:30.823
> 
> 标签：c#

我正在尝试使用 Visual Studio 2012 中的 Install Shield 项目更新应用程序。

我已经阅读了大量关于它的文章/stackoverflow 问题，每一篇都给出了更新现有应用程序的相同步骤：

*   增加产品版本
*   更改产品代码
*   构建设置

所以我就是这么做的。首先我构建我的应用程序，然后构建设置。我找到设置，然后运行它。它按预期安装应用程序。

然后我对我的应用程序做了一个小的改动（例如改变背景颜色），然后我：

*   我构建应用程序
*   将产品版本从 1.00.0000 增加到 1.00.0001
*   更改产品代码 - 我点击 {...} 自动生成一个新的
*   确保更新代码相同
*   构建设置

转到我之前找到安装程序的同一目录，然后运行安装程序。它表明它已安装，但是当我运行该程序时，它是原始程序 - 在我的控制面板 > 程序中，现在有 2 个应用程序实例。并且在应用程序的安装目录中，仍然是原始文件。

我点击了resequence RemoveExistingProducts，还是一样。

**编辑**：我只是使用 VS2012 附带的基本版 InstallShield

有人知道我做错了什么吗？我完全不知道我做错了什么......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T05:22:25.700

如 VS2012 中 InstallShield 的升级路径部分所述：

如果您已经发布了产品的早期版本，并且您希望确保最终用户能够升级到当前版本，而无需手动安装早期版本，然后再安装当前版本，请使用升级路径视图来指示升级信息。

因此，为了升级任何以前的安装，您需要将应用程序的升级代码添加到“升级路径”。您可以从解决方案资源管理器执行此操作：

[InstallShield 设置项目] -> 组织您的设置 -> 升级路径

在该选项卡中，您将右键单击中心窗格左侧的“升级路径”选项，然后选择“新升级路径...”。然后，您将看到一个选项，为您的项目选择安装程序（.exe 或 .msi），该安装程序将填充“升级代码”字段。确保设置 Min 和 Max Version 字段以指定您希望新安装程序升级的应用程序版本。如果您希望新安装程序升级应用程序的任何已安装版本，只需将“包括最大版本”和“包括最小版本”字段设置为否。

您现在应该已准备好构建您的解决方案，并且在运行新的安装程序时，您会发现您将不再遇到您指定的问题。

# c# - 使用 ResourceManager.GetString() 时如何避免使用魔术字符串？

> ID：12993814
> 
> 赞同：2
> 
> 时间：2012-10-21T00:14:53.367
> 
> 标签：c#, string, resource-file

我在类库项目中有一个资源文件。我正在使用这个资源文件来保存用户最终可能会看到的各种消息。

例如，资源名称为“InvalidEmailAddress”，en-US 资源文件中的值为“Invalid Email Address”。

当我调用 ResourceManager 的 GetString(string) 方法时，我正在这样做：

```
 return resourceManager.GetString("InvalidEmailAddress"); 
```

然而，这对我来说似乎真的很糟糕。如果有人更改资源的名称怎么办？现在我的语句将返回一个空值。

有没有办法解决这个问题？

**更新**：本地化是这里的一个重要因素。使用资源管理器是为了确保我可以更改文化并获得适当的字符串值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T00:27:28.300

您可以改为使用自动生成的类 - 魔术字符串常量将从代码中删除并替换为强类型访问方法。VS 将此文件命名为 ResourceName.Designer.cs 并在每次在 VS 中修改 resx 时更新它。

生成方法的示例：

```
 internal static string String1 {
        get {
            return ResourceManager.GetString("String1", resourceCulture);
        } 
```

注意：虽然创建此文件是在 VS 中添加新资源时的默认行为，但您可能已禁用它，或者您可能尝试在程序集之外使用生成的资源。在这种情况下，请确保将“自定义工具”属性或 resx 文件设置为“PublicResXFileCodeGenerator”或“ResXFileCodeGenerator”（稍后如果您仅在单个程序集中使用资源）。（感谢@dbaseman 的评论）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T00:33:28.840

创建资源时，它将在 Resources 命名空间中生成强类型。

您可以通过资源 (resx) 文件的名称来访问`Resources.ClassName.InvalidEmailAddress`它`ClassName`。

# java - JComboBox 和 Action、新模型等

> ID：12993815
> 
> 赞同：0
> 
> 时间：2012-10-21T00:15:01.383
> 
> 标签：java, swing, events, actionlistener, jcombobox

我有一些奇怪的事情，我无法理解它为什么会发生。我搜索了包括此处在内的网络，但找不到答案。我有 3 个 ComboBox，其中 2 个接着一个。它是一个小程序转换工具。每次我选择我想在主组合框中转换的字段时，它都会用要转换的值加载另外两个。但是在每次加载后，我都会选择我想要转换的内容，这会影响 ComboBox。这是代码：//这是对象//////

```
 MyEvent handler = new MyEvent();

    MainCombo = new JComboBox(issueArray);
    MainCombo.setBounds(120, 50, 120, 20);
    MainCombo.addActionListener(handler);
    add(MainCombo);

    Combo1 = new JComboBox(Angle);
    Combo1.setBounds(120, 90, 120, 20);
    Combo1.addActionListener(handler);
    add(Combo1);

    Combo2 = new JComboBox(Angle);
    Combo2.setBounds(320, 90, 120, 20);
    Combo2.addActionListener(handler);
    add(Combo2);

    //The Method To Change Values In The ComboBox 
     public void loadIssueParam(String Issue){
    Combo1.removeAllItems();
    Combo2.removeAllItems();
    switch (Issue) {
        case "Angle":
            {
                DefaultComboBoxModel newModel= new DefaultComboBoxModel(Angle);
                Combo1.setModel(newModel);
                Combo2.setModel(newModel);
                break;
            }
        case "Area":
            {
                DefaultComboBoxModel   newModel= new DefaultComboBoxModel(Area);
                Combo1.setModel(newModel);
                Combo2.setModel(newModel);
                break;
            }
        case "Data":
            {
                DefaultComboBoxModel  newModel= new DefaultComboBoxModel(Data);
                Combo1.setModel(newModel);
                Combo2.setModel(newModel);
                break;
            }
        case "Energy":
            {
                DefaultComboBoxModel   newModel= new DefaultComboBoxModel(Energy);
                Combo1.setModel(newModel);
                Combo2.setModel(newModel);
                break;
            }
        case "Force":
            {
                DefaultComboBoxModel      newModel= new DefaultComboBoxModel(Force);
                Combo1.setModel(newModel);
                Combo2.setModel(newModel);
                break;
            }
        case "Length":
            {
                DefaultComboBoxModel      newModel= new DefaultComboBoxModel(Length);
                Combo1.setModel(newModel);
                Combo2.setModel(newModel);
                break;
            }
        case "Mass":
            {
                DefaultComboBoxModel        newModel= new DefaultComboBoxModel(Mass);
                Combo1.setModel(newModel);
                Combo2.setModel(newModel);
                break;
            }
        case "Power":
            {
                DefaultComboBoxModel       newModel= new DefaultComboBoxModel(Power);
                Combo1.setModel(newModel);
                Combo2.setModel(newModel);
                break;
            }
        case "Pressure":
            {
                DefaultComboBoxModel  newModel= new DefaultComboBoxModel(Pressure);
                Combo1.setModel(newModel);
                Combo2.setModel(newModel);
                break;
            }
        case "Speed":
            {
                DefaultComboBoxModel  newModel= new DefaultComboBoxModel(Speed);
                Combo1.setModel(newModel);
                Combo2.setModel(newModel);
                break;
            }
        case "Temperature":
            {
                DefaultComboBoxModel  newModel= new DefaultComboBoxModel(Temperature);
                Combo1.setModel(newModel);
                Combo2.setModel(newModel);
                break;
            }
        case "Time":
            {
                DefaultComboBoxModel  newModel= new DefaultComboBoxModel(Time);
                Combo1.setModel(newModel);
                Combo2.setModel(newModel);
                break;
            }
        case "Volume":
            {
                DefaultComboBoxModel newModel= new DefaultComboBoxModel(Volume);
                Combo1.setModel(newModel);
                Combo2.setModel(newModel);
                break;
            }
    }

    /// I THINK MAYBE THIS METHOD HAVE SOMETHING TO DO WITH IT - OR I NEED SOME HOW TO
    /// CLEAR THE SELECTION.

      private class MyEvent implements ActionListener{

    @Override
    public void actionPerformed(ActionEvent event){
        if(event.getSource()==MainCombo){
        JComboBox cb=(JComboBox)event.getSource();
        IssueBox=(String)cb.getSelectedItem();
        loadIssueParam(IssueBox);
    } 
        if(event.getSource()==Combo1){
        JComboBox cb=(JComboBox)event.getSource();
        fromBox=(String)cb.getSelectedItem();
    } 
        if(event.getSource()==Combo2){
        JComboBox cb=(JComboBox)event.getSource();
        toBox=(String)cb.getSelectedItem();
    }
    }
} 
```

每次我进行子选择时，它都会影响两个子组合框。

感谢尼罗的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T00:32:06.807

啊，看了你的代码，我现在明白你的问题了。您的问题是两个子组合框共享相同的模型，因此如果您更改一个子组合框中的选择，它会更改共享模型的状态，导致另一个子组合框更改其选择。解决你的问题，给他们每个人自己的模型。

IE，

```
switch (Issue) {
    case "Angle":
        {
            DefaultComboBoxModel newModel1 = new DefaultComboBoxModel(Angle);
            DefaultComboBoxModel newModel2 = new DefaultComboBoxModel(Angle);
            Combo1.setModel(newModel1);
            Combo2.setModel(newModel2);
            break;
        }
    // etc... 
```

此外，请考虑使用 Map，例如 a`HashMap<String, String[]>`或`HashMap<String, Vector<String>>`。这样做并正确填写地图，并且可以将巨大的 switch 语句简化为

```
Combo1.setModel(new DefaultComboBoxModel(modelMap.get(Issue)));
Combo2.setModel(new DefaultComboBoxModel(modelMap.get(Issue))); 
```

接下来我们将研究 Java 命名规则。

# objective-c - 有没有办法设置 CLLocation 不会更新太频繁？

> ID：12993817
> 
> 赞同：1
> 
> 时间：2012-10-21T00:15:15.613
> 
> 标签：objective-c, cllocationmanager, cllocation

显然我需要准确更新。然而，我认为不超过每 1 分钟一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T00:18:49.343

获得职位更新后，您可以：

1.  关闭更新
2.  启动定时器约 1 分钟
3.  定时器开启更新

完毕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:21:59.433

请参阅使用 CLLocationManager 和处理程序类的示例来执行您的要求。它不是一个计时器，而是设置一个处理程序来响应接收到的位置事件，检查自上一个事件以来经过的准确性和时间，然后根据您的要求发送通知。

您的响应操作的频率可以根据您的需要进行配置。

它在后台运行，具有省电配置选项。

请参阅此处的代码[TTLLocationHandler](https://github.com/dsdavids/TTLocationHandler)

您也可以从这个问题线程中的一些讨论中受益[Invoke get current coordinates every few seconds without NSTimer](https://stackoverflow.com/questions/12841017/invoke-get-current-coordinates-every-few-seconds-without-nstimer/12842463#12842463)

# php - PHP Echo 返回空白页

> ID：12993826
> 
> 赞同：-1
> 
> 时间：2012-10-21T00:17:04.017
> 
> 标签：php

我在这里有“检查”，如果发生了什么事，它会`echo`是一个短语`The username you supplied is already in use`或其他什么。但是，当它确实显示它时，它只会在带有该文本的空白页面上显示它。这里有什么问题？

PHP

```
<?php
    include('./dbconnect/global.php');

    if ($_POST['register']) {
        $username = mysql_real_escape_string(strip_tags($_POST['username']));
        $password = mysql_real_escape_string(strip_tags($_POST['password']));
        $email = mysql_real_escape_string(strip_tags($_POST['email']));

        if (!$username||!$password||!$email)
            echo "PLease Fill in The Required Fields";
        else {
            //check if username is taken
            $check = mysql_query("SELECT * FROM users WHERE username='$username'");
            if (mysql_num_rows($check) >= 1)
                echo "The Username you Supplied Is Already in Use! <a href='./register'>Back</a>";
            $check2 = mysql_query("SELECT * FROM users WHERE email='$email'");
            if (mysql_num_rows($check) >= 1)
                echo "The Email you Supplied Is Already in Use! <a href='./register'>Back</a>";
            else {
                $password2 = md5($password);
                $register = mysql_query("value and stuff)") or die(mysql_error());
                echo "Thanks for registering, $username! <a href='./index'>Home</a>";
            }
        }
    }

    else {
?> 
```

HTML

```
<html>

<head>

    <title>CoreCrafters</title>
    <link rel="stylesheet" type="text/css" href="./css/main.css">

</head>

<body>

    <?php include('./include/nbar.php') ?>

    <div id="main">

        <div id="register">
            <div id="wrapper">
                <form action="register" method="POST">
                    Username
                    <br />
                    <input type="username" name="username">
                    <br />
                    Password
                    <br />
                    <input type="password" name="password">
                    <br />
                    Email
                    <br />
                    <input type="email" name="email">
                    <br /><br />
                    <input type="submit" name="register" value="Register">
                </form>
            </div>
        </div>

    </div>

    <?php include('./include/footer.php') ?>

</body>

</html> 
```

结束 PHP（最后来自 ELSE）

```
<?php
    }
?> 
```

CSS

```
body {
    margin: 0;
    padding: 0;
    background-color: #EEE;
}

#headerbar {
    width: 100%;
    background-color: #000;
}

a {
    color: #069;
    font-weight: bold;
    text-decoration: none;
    transition: all 0.2s linear;
    -o-transition: all 0.2s linear;
    -ms-transition: all 0.2s linear;
    -moz-transition: all 0.2s linear;
    -webkit-transition: all 0.2s linear;
}

a:hover { 
    color: #c00;
}

#nav {
    padding: 0;
    width: 100%;
    float: left;
    list-style: none;
    margin: 0 0 3em 0;
    background-color: #f2f2f2;
    border-top: 1px solid #ccc;
    border-bottom: 1px solid #ccc; 
}

#nav li {
    float: left;
}

#nav li a {
    color: #069;
    display: block;
    font-weight: bold;
    padding: 8px 15px;
    text-decoration: none;
    transition: all 0.2s linear;
    border-right: 1px solid #ccc;
    -o-transition: all 0.2s linear;
    -ms-transition: all 0.2s linear;
    -moz-transition: all 0.2s linear;
    -webkit-transition: all 0.2s linear;
}

#nav li a:hover {
    color: #c00;
    background-color: #fff;
}

#footer {
    width: 94%;
    padding: 10px;
    margin-top: 10px;
    margin-left: auto;
    padding-left: 0px;
    text-align: center;
    margin-right: auto;
    padding-right: 0px;
    border: 1px solid #DDD;
    background-color: #FFF;
}

#main {
    width: 94%;
    margin-top: 50px;
    min-height: 500px;
    margin-left: auto;
    margin-right: auto;
    border: 1px solid #DDD;
    background-color: #FFF;
}

#register {
    width: 15%;
    margin-top: 20px;
    margin-left: auto;
    margin-right: auto;
    text-align: center;
    background-color: #CCC;
    border: 1px solid #AAA;
}

#logbar {
    width: 150px;
    float: right;
    min-height: 36px;
    padding-left: 5px;
    padding-right: 50px;
    background-color: #DDD;
} 
```

根据要求，我将大部分页面发布到这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T00:35:00.407

您的网页除了回显之外没有其他内容，因此它在空白页面上回显它，因为您告诉它这样做。

*   **更新**：代码

    ```
    <!DOCTYPE html>
    <html class="no-js">
    <head>
        <meta charset="utf-8"> <!-- UXSS UTF-7 (IE6) prevention -->
        <title>CoreCrafters</title>
        <link rel="stylesheet" type="text/css" href="./css/main.css">
    </head>
    <body>
    <?php @include('./include/nbar.php'); ?>
    <div id="main">
        <div id="register">
            <div id="wrapper">
                <form method="POST">
                    Username<br /><input type="username" name="username"><br />
                    Password<br /><input type="password" name="password"><br />
                    Email<br /><input type="email" name="email"><br /><br />
                    <input type="submit" name="register" value="Register">
                </form>
            </div>
    <?php
    @include('./dbconnect/global.php');

    if (isset($_POST['register'])) {
        if (empty($_POST['username']) || empty($_POST['password']) || empty($_POST['email'])) {
            die('Please fill out the required fields.');
        } else {
            $query = mysql_query("SELECT * FROM users WHERE username = '" . mysql_real_escape_string($_POST['username']) . "'");
            if (mysql_num_rows($query)) { die('The username you provided is already in use!'); }

            $query = mysql_query("SELECT * FROM users WHERE email = '" . mysql_real_escape_string($_POST['email']) . "'");
            if (mysql_num_rows($query)) { die('The email you provided is already in use!'); }

            /** Insert values **/

            echo 'Thanks for registering, ' . htmlentities($_POST['username'], ENT_QUOTES) . '!'; /** Normal XSS prevention **/
       }
    }
    ?>
        </div>
    </div>
    <?php @include('./include/footer.php'); ?>
    </body>
    </html> 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T02:12:59.483

我相信您的**include**语句（在 HTML 块内）缺少分号。如：

```
<?php include('./include/footer.php'); ?> 
```

如果这不能解决它，你应该检查你的错误日志。当 PHP 解析器无法解析您的代码时，您通常会得到一个完全空白的页面。

# jquery - AJAX jQuery 确认验证后触发

> ID：12993828
> 
> 赞同：1
> 
> 时间：2012-10-21T00:17:25.447
> 
> 标签：jquery, ajax, jquery-validate, confirm

我是第一次使用 AJAX/jQuery，并且正在慢慢了解它。

我有有效的表单验证以及按下提交时的确认按钮。问题是即使表单尚未完成验证，确认也会触发。

我的问题是我在哪里放置确认码？

我有（为简洁起见）验证

```
rules: {
    supplier: {
      required: true,
    },
    product: {
      required: true,
    }
  },
messages: {
  supplier: {
    required: "Please enter the supplier's name"
  },
  product: {
    required: "Please enter the name of the product"
  }
},

submitHandler: function(form){
    postForm();
} 
```

现在效果很好

然后我在另一个脚本中有这个

```
$('#product').click(function() {
    if(confirm("Are you sure that the details are correct?")){
        return true;
    }else{
         return false;
    }
 }); 
```

这也有效，但在验证完成之前触发 - 我已经尝试将它插入到 submitHandler 中，并在其中的提交处理程序和几个不同的地方，但我知道我显然遗漏了一些东西 - 任何建议表示赞赏（我正在使用以下插件 - validate.min 确认和格式化）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T00:40:53.740

在 submitHandler 里面试试：

```
if(confirm("Are you sure that the details are correct?")){
        postForm();
    }else{
         return false;
    } 
```

# mysql - 如何进行多个 SQL 连接，以便获取符合特定条件的实体？

> ID：12993831
> 
> 赞同：0
> 
> 时间：2012-10-21T00:18:20.097
> 
> 标签：mysql, sql, join, relational-database

我有下表（它是每个横幅和可用尺寸的列表）：

```
bannerid, bannersize
--------------------
1, 16
1, 32
1, 128
2, 16
2, 32
2, 128
2, 256
2, 512
3, 16
3, 32
3, 64
3, 128
3, 256
3, 512
3, 1024 
```

我需要能够生成具有所有可能大小（16、32、64、128、256、512、1024）的所有bannerid的列表

所以在这个例子中，结果应该是：

```
bannerid
--------
3, 16
3, 32
3, 64
3, 128
3, 256
3, 512
3, 1024 
```

由于bannerid 3 具有上述所有可能的尺寸（1 和2 缺少一些尺寸）。

实现这一目标的好方法是什么？我认为有比在同一张表上执行 7 次连接并检查每个可能的大小组合是否存在更好的方法。

我还想要一种方法来控制显示哪个bannerid：（a）匹配所有尺寸的那些，或（b）匹配我指定的某些尺寸。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T12:32:47.000

试试这个 ：

```
select b.* from banners b inner join
( select bannerid,count(bannersize) bl from banners
group by bannerid
having count(bannersize) = (select count(distinct(bannersize)) cl from banners) ) ab
on b.bannerid=ab.bannerid 
```

你也可以在[Sqlfiddle上试试](http://sqlfiddle.com/#!2/72893/32)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T02:49:46.863

您还没有发布您正在使用的数据库，如果您使用的是 SQL Server 2005+（或 Oracle 11g+），您可以使用[PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)

询问：

```
select * from banner
pivot (count(bannersize) for bannersize in ([16], [32], [64], [128], [256], [512], [1024])) as bann
where [16] > 0 and [32] > 0 and [64] > 0 and [128] > 0 and [256] > 0 and [512] > 0 and [1024] > 0 
```

给你输出：

```
横幅 16 32 64 128 256 512 1024
3 1 1 1 1 1 1 1

```

`where`您可以通过 modyfing子句实现“（b）匹配我指定的某些尺寸” 。

此输出与请求的不同，但您可以通过将此查询用作子查询来“修复”它：

```
select * from banner
where bannerid in
(
select bannerid from banner
pivot (count(bannersize) for bannersize in ([16], [32], [64], [128], [256], [512], [1024])) as bann
where [16] > 0 and [32] > 0 and [64] > 0 and [128] > 0 and [256] > 0 and [512] > 0 and [1024] > 0
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T00:46:26.757

> 问：我的表格......是一个横幅ID列表和每个可用的尺寸。我需要能够生成具有所有可能尺寸的所有bannerid 的列表。

A：听起来你只想要表格中的所有内容:)

`select * from mytable order by bannerid`

如果您希望排除表中的其他列，则：

`select bannerid, bannersize from mytable order by bannerid`

如果您只想要一个bannerid 的可用尺寸（例如“3”），那么

`select bannerid, bannersize from mytable where bannerid = 3`

如果您想要某些特定bannerids（例如“1”和“3”）的可用尺寸，那么

`select bannerid, bannersize from mytable where bannerid in (1, 3)`

# php - 从另一个查询中减去一个查询的总数

> ID：12993832
> 
> 赞同：0
> 
> 时间：2012-10-21T00:18:27.970
> 
> 标签：php, mysql

我以为我已经从以前的帖子中回答了这个问题，但我仍然无法做到这一点。我将尝试另一种方式并简化它：

```
Query 1:
SELECT SUM((TA.task_average*TC.completed)/60) AS manual

Query 2:
SUM(M.minutes/60) AS automatic 
```

我需要从 1 中减去查询 2。如果可能的话，我想将它组合起来并避免多个查询。我有我所有的加入和分组，我需要它们，这是我玩得很开心的这件作品。

最终编辑（包括四舍五入到小数点后两位）：

```
ROUND((SUM((TA.task_average*TC.completed)/60) - SUM(M.minutes/60)),2) AS diff 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T00:20:38.273

你可以像这样减去它们：

```
SELECT (SUM((TA.task_average*TC.completed)/60) - SUM(M.minutes/60)) AS Difference FROM ... 
```

# python - 将自定义 python 函数传递到龙卷风模板中

> ID：12993835
> 
> 赞同：4
> 
> 时间：2012-10-21T00:19:41.390
> 
> 标签：python, tornado

我想编写一个自定义函数并将其传递给我的龙卷风模板。

`def trimString(data): return data[0:20]`然后把它推到我的龙卷风文件中。这应该允许我修剪字符串。

这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-21T23:58:50.867

在文档中不是[特别清楚](http://www.tornadoweb.org/en/stable/guide/templates.html?highlight=ui_methods#template-syntax)，但是您可以通过在模块中定义此函数并将模块`tornado.web.Application`作为`ui_methods`参数传递给轻松地做到这一点。

IE：

在 ui_methods.py 中：

```
def trim_string(data):
    return data[0:20] 
```

在 app.py 中：

```
import tornado.ioloop
import tornado.web

import ui_methods

class MainHandler(tornado.web.RequestHandler):
    def get(self):
        self.render("main.html")

urls = [(r"/", MainHandler)]
application = tornado.web.Application(urls, ui_methods=ui_methods)

if __name__ == "__main__":
    application.listen(8888)
    tornado.ioloop.IOLoop.instance().start() 
```

在 main.html 中：

```
....
{{ trim_string('a string that is too long............') }}
.... 
```

Andy Boot 的解决方案也有效，但在每个模板中自动访问此类功能通常很不错。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-19T05:35:10.377

您可以在 Tornado 中导入函数。我认为这是最干净的解决方案。在模板顶部只需执行以下操作：

```
{% import lib %} 
```

以后你可以做

```
{{ trim_string(data)}} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-22T15:58:13.163

您还可以将函数作为模板变量传递，如下所示：

```
 template_vars['mesage'] = 'hello'
 template_vars['function'] = my_function # Note: No ()

        self.render('home.html',
            **template_vars
        ) 
```

然后在你的模板中你这样称呼它：

```
 {{ my_function('some string') }} 
```

# c# - 我可以听命令提示符吗？

> ID：12993836
> 
> 赞同：0
> 
> 时间：2012-10-21T00:19:44.843
> 
> 标签：c#, .net, windows

我希望能够从 Web 浏览器访问命令提示符。这听起来不太可能？

所以我的选择：

*   在浏览器中执行服务器请求，该平台（.NET/IIS？）可以与命令提示符对话（可以完成吗？）

*   编写一个可以监听命令提示符及其 I/O 的应用程序

如果我在说疯话，请告诉我。如果没有，任何信息将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T00:24:39.560

您可以`Process.Start()`在 C#中调用并`Redirect*`在`ProcessStartInfo`.

然后，您可以从您创建的流程的标准输入/输出流中读取和写入。

# jquery - 如何显示从ajax jQuery接收的参数json

> ID：12993838
> 
> 赞同：0
> 
> 时间：2012-10-21T00:20:01.753
> 
> 标签：jquery, json

我刚刚从 jQuery 的 .ajax 函数中收到了这个 json

```
string(626) "[{"ID":"6032","post_author":"2276","post_date":"2011-07-27 00:00:00","post_date_gmt":"2011-07-27 00:00:00","post_content":"","post_title":"Web Developer\/Programmer","post_excerpt":"","post_status":"publish","comment_status":"closed","ping_status":"closed","post_password":"","post_name":"web-developerprogrammer","to_ping":"","pinged":"","post_modified":"2012-05-03 09:25:32","post_modified_gmt":"2012-05-03 13:25:32","post_content_filtered":"","post_parent":"4459","guid":"http:\/\/startupchile.dev\/joinastartup\/web-developerprogrammer\/","menu_order":"0","post_type":"jobman_job","post_mime_type":"","comment_count":"0"}]" 
```

如何我可以显示 html 的一些参数？例如仅显示 ID,post_title ？

这是我的代码：

```
 (function($){

```
 $('#searchjob').keypress(function(e){
        var search = $.trim($(this).val());

        if (e.which == "13") {

            $.ajax({
                beforeSend: function(){
                    //$('#loading').html(<img src="rutagif" alt="loading" />);
                },
                url:"../wp-admin/admin-ajax.php",
                data:{ action: 'searching_job',data : search },
                dataType: "json",
                type: "POST",
                success: function(data){
                    console.log(data);
                }

            });

            e.preventDefault();

        };

    });

 })(jQuery); 
``` 我可以修复我的错误。来自 PHP 的 json 是错误的（我习惯于 var_dump，现在用于 print_r）。我只是分享成功的代码。

```
 (function($){

    $('#searchjob').keypress(function(e){
        var search = $.trim($(this).val());

        if (e.which == "13") {

            $.ajax({
                beforeSend: function(){
                    //$('#loading').html();
                },
                url:"../wp-admin/admin-ajax.php",
                data:{ action: 'searching_job',data : search },
                //dataType: "json",
                type: "POST",
                success: function(data){
                    var jsonresult = JSON.parse(data);

                    $.each(jsonresult, function(i, item){
                        alert(jsonresult[i].post_title);
                    });
                }

            });

            e.preventDefault();

        };

    });

 })(jQuery); 
```

```

# java - 如何将数据从服务/线程类传递到主要活动？

> ID：12993839
> 
> 赞同：0
> 
> 时间：2012-10-21T00:20:28.873
> 
> 标签：java, android, multithreading, service, android-intent

我在调用的主要活动中创建了变量，`"sum"`并在我创建的服务的线程中创建了将变量增加 1 的循环，如下所示：

```
public void run() {
    for(int i=0;i<50000000;i++) {
        num++;
    } 
```

现在我希望每次变量`"num"`增加 1 时，它都会将 的值更新`"sum"`为 的值`"num"`。

但我真的不知道该怎么做。

**我希望它将是实时更新，而不是在线程结束或服务被破坏之后。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T00:31:50.753

您必须使活动绑定到服务并为其定义接口。但它必须是一项服务吗？也许 AsyncTask 可以是一个更简单的解决方案？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T00:34:33.810

您将通过在服务线程中广播意图并在主线程中为该类型的意图注册接收器来完成此操作。为此，您将需要三个组件：

*   意图，如果您需要从服务发送到主线程的其他数据，则添加 Extras
*   广播接收器，一个扩展的类，并在广播意图时`BroadcastReceiver`执行它的方法`OnReceive`
*   意图过滤器，基本上是将意图链接到接收器的东西。您使用过滤器类型注册接收器。

我可以重新输入代码，但在这个链接上有关于如何使用它的解释。您对最后三张幻灯片感兴趣：

[http://www.slideshare.net/CodeAndroid/android-intent-intent-filter-broadcast-receivers](http://www.slideshare.net/CodeAndroid/android-intent-intent-filter-broadcast-receivers)

另外，检查一下： http: [//developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html) http://developer.android.com/reference/android/content/IntentFilter.html

# php - 无法在 PHP 的函数参数中指定动态变量

> ID：12993844
> 
> 赞同：0
> 
> 时间：2012-10-21T00:21:55.333
> 
> 标签：php

进行一些编码，并想为我拥有的函数中的参数设置今天日期的默认值。然而，让它工作并让它仍然是动态的有一些问题。这是当前设置，其中我为某些函数参数分配了静态值。

`private function search($text, $startDate = "2012-10-19", $endDate = "2012-10-20") { //code goes here }`

不是我想要的，但它是有效的，并且 IDE 不会抱怨。

这是我尝试过的，口译员有相应的抱怨

`private function search($text, $startDate = $this->getCurrentDate(), $endDate = "2012-10-20") { //code goes here }`

返回“语法错误，意外 $this”，其中 getCurrentDate 指的是仅返回字符串的私有函数。当我调用在类范围内声明的变量时会发生相同的共现（当然减去 getCurrentDate 末尾的括号）。使用 static 会出现“未定义的类常量 'self::getCurrentDate '”，无论我将其称为函数还是类范围变量，这很奇怪，因为我已经将它定义为这样。

```
 private static function getDate() {
    return "foo";
} 
```

和

```
private static $getTodaysDate = date("M-d-Y", mktime(0, 0, 0, date("M"), date("d"), date("Y"))); 
```

在我的两次不同的尝试中。当然这个

`private function search($text, $startDate = date("M-d-Y", mktime(0, 0, 0, date("M"), date("d"), date("Y"))), $endDate = "2012-10-20") { //code goes here }`

根本不起作用。

所以我确定这只是我遗漏的一些明显的东西，但我不明白为什么 PHP 不允许我在没有声明静态字符串的情况下执行此操作，或者我是否正在违反语言的限制。有人对原因有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T00:24:38.997

函数参数的默认值不能是动态的！
来自函数参数默认值的[PHP 手册：](http://se.php.net/manual/en/functions.arguments.php#functions.arguments.default)

> 默认值必须是常量表达式，而不是（例如）变量、类成员或函数调用。

您可以做的是将默认参数设置为`null`，然后在您的函数中检查参数是否是`null`，如果是，则用当前日期覆盖它。

```
private function search($text, $startDate = null, $endDate = "2012-10-20") {
    if ($startDate === null) $startDate = date("M-d-Y", mktime(0, 0, 0, date("M"), date("d"), date("Y"));
} 
```

# django - 阻止 Django 加入超类的表

> ID：12993851
> 
> 赞同：0
> 
> 时间：2012-10-21T00:22:21.627
> 
> 标签：django, optimization, inheritance, model, django-queryset

有一个非抽象的父类：

```
class Animal(models.Model) 
```

和两个子类：

```
class Cow(Animal)
class Dog(Animal) 
```

并打电话

```
Dog.objects.order_by('name') 
```

查询数据库并返回连接记录：

```
SELECT ... FROM dog 
INNER JOIN animal ON (dog.animal_ptr_id = animal.id) 
ORDER BY dog.name ASC 
```

但是在我的情况下，“狗”不是表，而是数据库中定义的复杂视图。该视图已经包含来自“animal”的所有必需字段，包括由 animal_ptr__id 访问的动物 id。

如何防止 django 进行 INNER JOIN 大大减慢查询速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T07:43:10.597

我真的不明白为什么您认为`dog`在这种情况下不是表格，因为您没有使用抽象基类。*因此它*是[多表继承](https://docs.djangoproject.com/en/dev/topics/db/models/#multi-table-inheritance)，每个子类都有一个表。

 *`INNER JOIN`据我所知，避免多表继承的最佳方法是通过设置in来使用[抽象基类](https://docs.djangoproject.com/en/dev/topics/db/models/#abstract-base-classes)。看起来这是你应该做的，但是..`abstract = True``class Meta`

但是，如果您坚持使用多表继承，则可以使用[原始 SQL 查询。](https://docs.djangoproject.com/en/dev/topics/db/sql/)像这样的东西*可能会*起作用：

```
Dog.objects.raw('SELECT ... FROM myapp_dog ORDER BY dog.name ASC') 
```

虽然`dog`单独的 table 不会包含它从基类继承的属性`Animal`。为了获得那些继承的属性，我认为 a`JOIN`是不可避免的，除非我错过了一些明显的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T08:14:43.740

> 但是在我的情况下，“狗”不是表，而是数据库中定义的复杂视图。

您需要设置[`managed = False`](http://docs.djangoproject.com/en/dev/ref/models/options/#django.db.models.Options.managed)为`Dog`; 否则你没有使用你的视图，而是一个名为的中间表`app_dog`（`app`你的应用程序名称在哪里）。

这可以防止 django 创建表但使用内部定义的表（在您的情况下为视图）。确保您还指定了一个[键](https://docs.djangoproject.com/en/dev/topics/db/models/#automatic-primary-key-fields)，并指定了[表名](https://docs.djangoproject.com/en/dev/ref/models/options/#db-table)。*

# sql-server - 在查询中加入表值函数

> ID：12993853
> 
> 赞同：4
> 
> 时间：2012-10-21T00:22:53.300
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, sql-server-2008-r2

我有一张桌子 vwuser。我想用表值函数 fnuserrank(userID) 加入这个表。所以我需要与表值函数交叉应用：

```
SELECT *
FROM vwuser AS a
CROSS APPLY fnuserrank(a.userid) 
```

对于每个用户 ID，它会生成多条记录。我只想要每个没有 Term(inated) Rank 的 empid 的最后一条记录。我怎样才能做到这一点？

数据：

```
HistoryID empid Rank MonitorDate
1 A1 E1 2012-8-9
2 A1 E2 2012-9-12
3 A1 学期 2012-10-13
4 A2 E3 2011-10-09
5 A2 学期 2012-11-9

```

必须从该第 2 条记录和第 4 条记录中选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T01:09:13.990

在 SQL Server 2005+ 中，您可以使用此公用表表达式 ( [CTE](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx) ) 来确定 MonitorDate 的最新记录，该记录不具有“术语”等级：

```
WITH EmployeeData AS
(
   SELECT *
      , ROW_NUMBER() OVER (PARTITION BY empId, ORDER BY MonitorDate DESC) AS RowNumber
   FROM vwuser AS a
   CROSS APPLY fnuserrank(a.userid)
   WHERE Rank != 'Term'
)
SELECT *
FROM EmployeeData AS ed
WHERE ed.RowNumber = 1; 
```

**注意：**此 CTE 之前的语句需要以分号结尾。正因为如此，我看到很多人这样写`;WITH EmployeeData AS...`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T01:23:00.040

你必须玩这个。无法在 sqlfiddle 上模拟您的架构。

```
Select bar.*
from 
(
SELECT *
FROM vwuser AS a
CROSS APPLY fnuserrank(a.userid)
where rank != 'TERM'
) foo
left join 
(
SELECT *
FROM vwuser AS b
CROSS APPLY fnuserrank(b.userid)
where rank != 'TERM'
) bar
on foo.empId = bar.empId
  and foo.MonitorDate > bar.MonitorDate
where bar.empid is null 
```

我总是需要在日期较高时测试左外线。它的工作方式是你做一个左外层。每一行除了每个用户有一个具有更高监控日期的行。那一排就是你想要的那一排。我通常使用我的代码中的一个示例，但我在错误的笔记本电脑上。要让它工作，你可以选择 foo. *， 酒吧。*并查看结果并找出您想要的行并使条件正确。

你也可以这样做，这样更容易记住

```
SELECT *
FROM vwuser AS a
CROSS APPLY fnuserrank(a.userid)
) foo
join 
(
select empid, max(monitordate) maxdate
FROM vwuser AS b
CROSS APPLY fnuserrank(b.userid)
 where rank != 'TERM'
) bar
on foo.empid = bar.empid
and foo.monitordate = bar.maxdate 
```

我通常更喜欢使用基于集合的逻辑而不是聚合函数，但无论如何都可以。您还可以通过将 TVF 连接的结果缓存到表变量中来调整它。

编辑： [http](http://www.sqlfiddle.com/#!3/613e4/17) ://www.sqlfiddle.com/#!3/613e4/ 17 - 我在这里模拟了你的 TVF。显然 sqlfiddle 不喜欢“去”。

```
select foo.*, bar.*
from 
(
SELECT f.*
FROM vwuser AS a
join fnuserrank f
  on a.empid = f.empid
where rank != 'TERM'
) foo
left join 
(
SELECT f1.empid [barempid], f1.monitordate [barmonitordate]
FROM vwuser AS b
join fnuserrank f1
  on b.empid = f1.empid
where rank != 'TERM'
) bar
on foo.empId = bar.barempid
  and foo.MonitorDate > bar.barmonitordate
where bar.barempid is  null 
```

# database-connection - java数据库安装目录位置&数据库位置

> ID：12993857
> 
> 赞同：0
> 
> 时间：2012-10-21T00:23:56.690
> 
> 标签：database-connection

java数据库安装目录位置&数据库位置

我正在尝试使用 NetBeans 6.9.1 正确设置我的 Java DB 以开始构建数据库。

当我右键单击 Java DB 时，除了属性之外，每个选项都是灰色的。没有示例数据库或其他任何东西

选择后，会出现一个弹出窗口，要求安装 Java DB：数据库位置：和一个信息行，说请输入 Java DB 安装目录。

谁能告诉我安装目录（以及与之关联的驱动程序）的位置以及如何通过此屏幕并开始创建数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T10:05:34.077

通常，JavaDB 应该作为 JDK 的一部分安装在 JDK 安装目录的名为 db 的子目录中。但是，我只是注意到我这里的JDK6没有这个目录，但是JDK7安装有。Netbeans 正在使用我也拥有的 Glassifsh 应用服务器附带的 JavaDB 安装......

您可以在系统某处查找名为`ij`（JavaDB 附带的命令行工具，显然甚至在 Windows 系统上也安装了 shellscript 调用 ij）的文件，该名称足够独特，可以避免误报。

如果您没有找到任何 JavaDB 安装，您可以将 Netbeans 指向您可以找到的任何 Derby 安装，您可以安装 Apache Derby 的新副本，它们比官方 JavaDB 发行版早了许多版本。

# python - 在 AMPPS 中设置 Python - 内部服务器错误

> ID：12993858
> 
> 赞同：1
> 
> 时间：2012-10-21T00:24:14.463
> 
> 标签：python, apache, httpd.conf, internal-server-error

我正在尝试将 Python 与 AMPPS 一起使用，AMPPS 是 Windows 的 Apache / MySQL / 等捆绑包。但是只有一个问题；我尝试运行的每个脚本都会返回一个“内部服务器错误”，即使它是正确的代码。这可能是一个不值得在这里发布的问题，但我用谷歌搜索了三个小时，但找不到任何帮助。

*   我的 httpd.conf 在这里： http: [//pastebin.com/5DMU2cUU](http://pastebin.com/5DMU2cUU)
*   我使用的单行代码是： print "Hello World!";
*   Notepad++ 设置为 EOL Conversion->UNIX 格式（在您询问之前）。

这就是我目前所知道的。请不要因为我发布这个而讨厌我（我知道你喜欢这样做），我是新人并且很困惑：3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:45:24.543

mod_wsgi 已在 AMPPS 中配置。您可以在加载的 apache 模块中看到它。

```
httpd.exe -D DUMP_MODULES 
```

您现在只需要配置您的脚本。 [http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide](http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide)

您也可以修改**httpd.conf**中包含的**python.conf**。即用于使用 mod_wsgi 指令。

 **这是来自 mod_wsgi的官方**hello world示例。**希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-15T07:31:06.130

请按照以下步骤操作：

1.  打开 httpd.conf
2.  将 .py 添加到标签下的 AddHandler cgi-script .cgi .pl 现在 AddHandler cgi-script .cgi .pl 变为 AddHandler cgi-script .cgi .pl .py
3.  搜索块并将 ExecCGI 添加到选项 FollowSymLinks 索引。现在它变成了 Options FollowSymLinks Indexes ExecCGI
4.  保存 httpd.conf 文件，停止 apache 服务器并重新启动。如果 apache 服务器重新启动而没有任何问题，则您已成功设置 ampps 以运行 python，否则从备份中恢复 conf 文件。在 ampps 中有一个选项可以恢复默认配置。

5.  将 python exe 文件链接行添加到 python 文件的顶部以指向 Python 解释器。它可能是 #!C:\Ampps\python\python.exe

6.  添加这一行 print("Content-type: text/html\n")
7.  添加这一行 print("Hello world!")
8.  现在执行你的python文件。[http://127.0.0.1/test/test.py](http://127.0.0.1/test/test.py)
9.  必须为 apache 安装 wsgi_module 才能通过 execCGI 运行 python 脚本。在 ampps 上，默认情况下会安装并添加到 conf 文件中。

链接：[http ://www.lakshman.com.np/run-python-on-ampps-windows/](http://www.lakshman.com.np/run-python-on-ampps-windows/)**

# database - 我应该用不可变或可变的数据结构来表示数据库数据吗？

> ID：12993859
> 
> 赞同：12
> 
> 时间：2012-10-21T00:24:15.960
> 
> 标签：database, language-agnostic, functional-programming, immutability

我目前正在使用 Scala 编程，但我想这适用于任何函数式编程语言，或者更确切地说，适用于任何推荐不变性并可以与数据库交互的编程语言。

当我从数据库中获取数据时，我将其映射到模型数据结构。在函数式编程中，数据结构往往是不可变的。但是数据库中的数据是可变的，所以我想知道我的模型是否也应该是可变的。一般来说，在这种情况下，什么是好的和被广泛接受的做法？

在 Coursera 上 Martin Odersky 的 Scala 课程之后，我记得他说过这样的话：

> *使用不可变数据结构更好，但是当您想与现实世界交互时，使用可变数据结构会很有用。*

所以，再次，我想知道我该怎么做。到目前为止，我的数据结构是不可变的，当我想更新数据库中的记录时，这会导致大量的样板代码。使用可变模型会有助于减少这个样板吗？

（我已经问[过一个类似的问题，该问题非常具体到我使用的技术](https://stackoverflow.com/questions/12882099/how-to-update-object-in-mongo-with-an-immutable-salat-case-class)，但我对实际答案并不满意，所以我在这里概括了它。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T08:17:47.360

为什么数据库是可变的？数据库的基本性质是可变的吗？关系模型并将其用作应用程序数据的持久存储可能会引导您得出这个结论，但它可能不是基本属性。

鉴于您可能有其他选择，例如在更新数据时存储新版本的数据，那么问题的前提可能会受到一定程度的破坏。也许，即使您确实有一个“可变”数据库，您仍然需要为更新函数提供一个与旧值分开的新值 - 例如考虑一个乐观锁，其中只有在旧值有更新时才会发生更新在此期间没有改变。

换句话说，数据库的可变性与否根本不重要，您正在处理应用程序中的一个单独的域层。如果你需要问，那么答案将永远是不变的。可变性是一个复杂性向量，只有在证明有必要时，专家才应将其作为性能优化引入。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-21T11:21:03.903

在我目前正在开发的交易应用程序中，几乎所有内容都是不可变的——当然模型也是如此。

我们的经验是，这极大地简化了我们使用模型的方式，包括持久性。

我还不明白为什么事情变得更简单了，它就是这样。我需要更多地思考这个问题。推理代码并使用它更简单。

是的，你需要使用镜头之类的东西，但我倾向于编写它们——一个机械过程——然后继续前进。这是一个很小的部分，我相信它可以被巧妙地处理。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-21T08:30:26.567

“与现实世界交互”与你使用可变数据结构还是不可变数据结构无关。这是一个经常重复的毛茸茸的问题，你对它提出质疑真是太好了。

虽然消除这样的垃圾通常更健康，但您可能会对粗略的揭穿感兴趣：http: [//blog.higher-order.com/blog/2012/09/13/what-purity-is-and-isnt /](http://blog.higher-order.com/blog/2012/09/13/what-purity-is-and-isnt/)

但是，我强烈建议您放弃它并继续前进。

关于您的问题，您说当您想对不可变数据结构执行操作时，您有样板文件。事实上，有一个非常成熟的理论在很大程度上解决了这个问题。这是一篇使用 Scala 写的关于它的论文：

[http://dropbox.tmorris.net/media/doc/lenses.pdf](http://dropbox.tmorris.net/media/doc/lenses.pdf)

希望有帮助。

# php - LastFM API 和 simplexml_load_file 的错误处理

> ID：12993863
> 
> 赞同：1
> 
> 时间：2012-10-21T00:24:40.007
> 
> 标签：php, xml, last.fm

我正在使用 simplexml_load_file 从 LastFM API 中提取专辑信息，并且在请求的专辑匹配时没有问题。

但是，当找不到专辑时，LastFM 会返回[错误](http://ws.audioscrobbler.com/2.0/?method=album.getinfo&api_key=273f3dc84c2d55501f3dc25a3d61eb39&artist=Martha%20&%20The%20Vandellas&album=Hitsville%20USA,%20Vol.%201%20%281959-1971%29&autocorrect=0)，这会导致下面的代码输出“打开流失败”错误。

**我可以看到 LastFM 正在为我提供我所需要的，但我不确定如何进行。更新代码以便正确处理此错误/错误代码的正确方法是什么？**

代码：

```
$feed = simplexml_load_file("http://ws.audioscrobbler.com/2.0/?method=album.getinfo&api_key=".$apikey."&artist=".$artist."&album=".$album."&autocorrect=".$autocorrect);

$albums = $feed->album;
foreach($albums as $album) {

    $name = $album->name;
    $img = $album->children();
    $img_big = $img->image[4];
    $img_small = $img->image[2];
    $releasedate = $album->releasedate;
    $newdate = date("F j, Y", strtotime($releasedate));

    if ($img == "") {
            $img = $emptyart; }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:28:48.590

```
 if ($headers[0] == 'HTTP/1.0 400 Bad Request') {
      $img_big = $emptyart;
      $img_small = $emptyart;
   } 
```

这将因 403 错误而中断...

方法1（不实用）：基本上你可以用@静音错误并检查你的$feed是否为空。在这种情况下，发生了“一些错误”，要么是您的 url 错误，要么是 last.fm 的状态失败。

```
 $feed = @simplexml_load_file("http://ws.audioscrobbler.com/2.0/?method=album.getinfo&api_key=".$apikey."&artist=".$artist."&album=".$album."&autocorrect=".$autocorrect);
    if ($feed)
    {
        // fetch the album info
    }
    else
    {
        echo "No results found.";
    } 
```

在这两种方式中，您都没有得到任何结果，因此您可能可以满足您的需求并显示“未找到结果”而不是向他显示“Last.fm 错误状态代码等”。

方法 2（推荐） - 使用 curl：

```
 function load_file_from_url($url) {
        $curl = curl_init();
        curl_setopt($curl, CURLOPT_URL, $url);
        curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($curl, CURLOPT_REFERER, 'http://www.test.com/');
        $str = curl_exec($curl);

        if(str === false)
        {
            echo 'Error loading feed, please try again later.';
        }

        curl_close($curl);
        return $str;
    }

    function load_xml_from_url($url) {
        return @simplexml_load_string(load_file_from_url($url));
    }

    function getFeed($feedURL)
    {
        $feed = load_xml_from_url($feedURL);
        if ($feed)
        {
                if ($feed['status'] == "failed")
            {
                echo "FAIL";
            }
            else
            {
                echo "WIN";
            }
        }
        else {echo "Last.fm error";}
    }

    /* Example:
       Album: Heritage
       Artist: Opeth
    */

    $url = "http://ws.audioscrobbler.com/2.0/?method=album.getinfo&api_key=273f3dc84c2d55501f3dc25a3d61eb39&artist=opeth&album=hwwXCvuiweitage&autocorrect=0";
    $feed = getFeed ($url);
    // will echo FAIL

    $url2 = "http://ws.audioscrobbler.com/2.0/?method=album.getinfo&api_key=273f3dc84c2d55501f3dc25a3d61eb39&artist=opeth&album=heritage&autocorrect=0";
    $feed2 = getFeed ($url2);
    // will echo WIN 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T00:33:15.010

先获取url，检查是否不包含错误，然后改用simplexml_load_string不是更好吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T00:40:58.990

在将 URL 传递给之前，按照评估 URL 状态的方式工作`simplexml_load_file`，我尝试`get_headers`了，并且再加上 if/else 语句，似乎让事情变得正常了。

```
$url = "http://ws.audioscrobbler.com/2.0/?method=album.getinfo&api_key=".$apikey."&artist=".$artist."&album=".$album."&autocorrect=".$autocorrect;

$headers = get_headers($url, 1);

if ($headers[0] == 'HTTP/1.0 400 Bad Request') {
    $img_big = $emptyart;
    $img_small = $emptyart;
    }

else {
    $feed = simplexml_load_file($url);

    $albums = $feed->album;
    foreach($albums as $album) {

        $name = $album->name;
        $img = $album->children();
        $img_big = $img->image[4];
        $img_small = $img->image[2];
        $releasedate = $album->releasedate;
        $newdate = date("F j, Y", strtotime($releasedate));

        if ($img == "") {
            $img_big = $emptyart;
            $img_small = $emptyart;
            }
    }
} 
```

# intellij-idea - 如何在特定模式下更改 IdeaVim 运动键

> ID：12993865
> 
> 赞同：1
> 
> 时间：2012-10-21T00:25:01.353
> 
> 标签：intellij-idea, ideavim

我是一个 vim 瘾君子，具有源自 bépo 的个性化键盘布局，我想在可视模式下将IdeaVim 运动键**«hjkl»重新映射到****«ctsr»**。

我试图从设置面板更改它，但它更改了视觉和插入模式的动作键，当我想从我的一个动作键插入一个字符时，它反而移动了。

我试图适应 vim.xml 没有成功。

有人可以帮我弄这个吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-28T22:02:14.453

这不再是不可能的了。IdeaVim 版本 0.35（2014-05-15 发布）及更高版本从`~/.ideavimrc`. 如果您`source ~/.vimrc`想包含来自`~/.vimrc`.

0.33（2014-04-28 发布）是第一个实现[VIM-288](http://youtrack.jetbrains.com/issue/VIM-288)的版本，包括映射`j``j`到`ESC`. 它工作得很好，IDEA 首选项中有一个新的*Vim Emulation*部分，列出了`~/.vimrc`映射和 Intellij 映射之间的所有冲突，并允许您通过将键分配给 IDEA 或 IdeaVim 来解决冲突。这是推特上的[发布公告](https://twitter.com/ideavim/status/460815026413404160)。

# php - 当无法插入记录时，教义2会增加我的主键

> ID：12993866
> 
> 赞同：2
> 
> 时间：2012-10-21T00:25:08.407
> 
> 标签：php, postgresql, symfony, doctrine-orm

> **可能重复：**
> [如果在 PostgreSQL 中插入失败，有没有办法避免调用 nextval()？](https://stackoverflow.com/questions/2036571/is-there-a-way-to-avoid-calling-nextval-if-the-insert-fails-in-postgresql)
> [Rails - Postgres 不会重用已删除的 ID，但 MySql 会重用吗？](https://stackoverflow.com/questions/9984196/rails-postgres-does-not-re-use-deleted-ids-but-mysql-does)

我有**PostgreSQL 9.2.1**的非常简单的数据库。当我使用此方法插入**Doctrine2的内容时：**

```
$em->persist($entity);
$em->flush(); 
```

如果我收到错误

> **- 表示未**插入记录-

它仍然添加`1`到我的主键中。所以如果我刷新页面`50`时间，它会说自动增量值设置为`50`。我怎样才能防止这种情况？如果没有插入记录，那么为什么主键会增加。这是非常关键的，因为它没有使用索引，而且数量还在不断增加。

我不知道它来自什么，为什么，所以，我没有尝试任何东西。非常卡在这一点上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T00:36:14.817

Doctrine2 使用事务来完成它的任务。

每次 Doctrine 将其更改刷新到数据库时，它都会打开一个事务，准备好每条记录，然后提交将立即执行所有更改。

在此过程中，将分配需要`auto_increment`ID 的记录。如果记录在提交阶段失败，则不会添加记录，但自动增量已发出该 ID。

您可以在此处阅读有关事务的更多信息：[http ://www.postgresql.org/docs/current/static/tutorial-transactions.html](http://www.postgresql.org/docs/current/static/tutorial-transactions.html)

注意：这对于 MySQL 也是一样的，我相信对于许多其他 RDBMS 也是一样的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T01:05:30.627

没有办法避免您观察到的行为，而不会导致严重的性能损失或不正确的并发操作。

[自动递增字段](http://www.postgresql.org/docs/current/static/datatype-numeric.html#DATATYPE-SERIAL)是通过将字段绑定到[序列](http://www.postgresql.org/docs/current/static/sql-createsequence.html)来实现的`default nextval('seqeunce_name')`。

序列旨在保证即使在并发操作下它们也始终发出唯一值。他们不能保证他们总是发出顺序值。当`nextval()`您尝试插入行时调用时，该值将被发出并且永远不会被序列再次发出，除非您使用手动重置序列[`setval()`](http://www.postgresql.org/docs/current/static/functions-sequence.html)。

由于安全地递增序列必然会产生锁定开销，因此在高并发操作下，一些 dbms 系统将为每个事务或会话缓存一组序列值以避免过度锁定——这进一步加剧了跳过序列值问题。在 postgres 中，这种值的缓存是通过`CACHE cache`序列创建的子句控制的。

# r - R 脚本自动加载

> ID：12993871
> 
> 赞同：0
> 
> 时间：2012-10-21T00:26:03.913
> 
> 标签：r

我从 CRAN 获得了一个旧包，其中包含一些 R 脚本，我的问题是如何自动加载这些脚本而无需逐行打开和运行它们，有什么办法吗？该软件包被称为 knnflex，它已被 CRAN 弃用。有一个适用于 Windows 的 R 的 zip：

[http://cran.uvigo.es/web/packages/knnflex/index.html](http://cran.uvigo.es/web/packages/knnflex/index.html)

但是当安装包时，由于缺乏兼容性，命名空间出现问题（我没有在这里提出问题或解决方案，因为它之前在 SO 的一个线程中解决了）。我在 zip 文件中包含了命名空间，并使用了我在此页面中找到的技巧，但某些函数（如 predict）根本无法识别。

我所做的一个转变是下载 tar.gz 文件，将其解压缩，在 R 文件夹中，有一些脚本可以使其工作。所以实际上我正在一个一个地加载这些脚本，然后让它逐行单独运行并且它可以工作。

所以这就是为什么我问是否有办法自动调用这些脚本。

说来话长，但我认为它对其他人也有帮助。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T04:51:02.217

我没有清理太多，但我将这些源文件移到了我的 github 存储库中，所以如果你安装了 devtools 包，你可以使用以下命令安装 knnflex...

```
library(devtools)
install_github("knnflex", "Dasonk") 
```

但实际上，如果您只想加载 Rscripts，那么`source`您应该使用它。

如果你想在加载 R 时运行某些东西，那么你应该把它放在你的 .Rprofile 文件中。您可以在`?Startup`

# html - 打印平铺在网页上的图像

> ID：12993875
> 
> 赞同：1
> 
> 时间：2012-10-21T00:27:30.910
> 
> 标签：html, css, browser, printing

我需要能够在一个区域内平铺图像，但也需要打印该图案。

传统上，您使用重复的背景平铺图像，但在大多数浏览器中不会打印背景，除非您明确启用该行为。

有关我需要的示例，请参阅[此 jsFiddle （此示例无法正确打印除外）。](http://jsfiddle.net/xjD3X/)

只要可以打印交叉影线图案，任何肮脏的技巧都是完全允许的。

*jsFiddle 的相关部分摘录如下：*

```
<style>
#danger div { background: white; padding:15px; margin:15px;  }
#danger { margin:15px;border: 1px solid black;
    background: url(http://i.stack.imgur.com/pTOTJ.png);
}
</style>
<div id="danger"><div>
    <h3>Danger Will Robinson</h3>
    <p>Don't forget to frob the sporkle.
</div></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T00:57:21.650

根据我上面的评论，我做了这个：[http://jsfiddle.net/xjD3X/2/](http://jsfiddle.net/xjD3X/2/)它使用绝对位置将图像放在文本后面，并且由于它在 html 中，因此它打印：

```
#bg {display:block; position:absolute; top:0; left: 0; z-index: 0;}
#danger div { background: white; padding:15px; margin:15px; position:relative; z-index: 100; } 
```

唯一的问题是它不会自己平铺。但是，如果您的图像与您在 Jsfiddle 中使用的图像一样，则较大版本的图像不会太重。

我为图像使用了跨度，但您可以使用 div 或任何其他标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T00:48:04.650

没有跨浏览器的方法可以做到这一点，最好的选择是制作一个打印样式表（具有不同的样式）或将背景放在 HTML 文件中。如果您想强制 Chrome 和 Safari 打印 css bacgrounds，您可以`-webkit-print-color-adjust: exact;`在要打印的每个元素中使用。

试试这个[http://jsfiddle.net/xjD3X/1/](http://jsfiddle.net/xjD3X/1/)

# php - 使用 php curl 逐块下载大文件

> ID：12993879
> 
> 赞同：3
> 
> 时间：2012-10-21T00:29:00.980
> 
> 标签：php, curl

我需要用于从 url 到服务器的可恢复文件下载的 php 脚本。它应该能够开始下载，然后在捕捉（30 秒 - 5 分钟）时恢复，依此类推，直到完成整个文件。

[perl http://curl.haxx.se/programs/download.txt](http://curl.haxx.se/programs/download.txt)中有类似的东西，但我想在 php 中做，我不知道 perl。

我认为使用`CURLOPT_RANGE`下载块，并将`fopen($fileName, "a")`其附加到服务器上的文件。

这是我的尝试：

```
<?php

function run()
{
    while(1)
    {
         get_chunk($_SESSION['url'], $_SESSION['filename']);
         sleep(5);
         flush();
    }    
}

function get_chunk( $url, $fileName)
{

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

    if (file_exists($fileName)) {
        $from = filesize($fileName);
        curl_setopt($ch, CURLOPT_RANGE, $from . "-");//maybe "-".$from+1000 for 1MB chunks
    }

    $fp = fopen($fileName, "a");
    if (!$fp) {
        exit;
    }
    curl_setopt($ch, CURLOPT_FILE, $fp);
    $result = curl_exec($ch);
    curl_close($ch);

    fclose($fp);

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T00:54:39.980

如果您的意图是通过不稳定的连接下载文件，请`curl`设置一个`--retry`标志以在出现错误时自动重试下载并从中断处继续。[不幸的是， PHP 库](http://www.php.net/manual/en/curl.constants.php)似乎缺少该选项，因为[libcurl 也缺少该选项](http://curl.haxx.se/libcurl/c/symbols-in-versions.html)。

通常我建议使用库而不是外部命令，但与其滚动你自己的命令，在这种情况下调用`curl --retry`或`curl -C -`在命令行上可能更简单。 `wget -c`是另一种选择。

否则，我认为不需要始终以块的形式获取数据。尽可能多地下载，如果有错误继续使用 CURLOPT_RANGE 和文件大小，就像现在一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-13T09:27:25.070

这是我使用 PHP 下载分块文件的解决方案，不是使用 curl，而是使用 fopen：

```
//set the chunnk size, how much would you like to transfer in one go
$chunksize = 5 * (1024 * 1024);
//open your local file with a+ access (appending to the file = writing at end of file)
$fp = fopen ($local_file_name, 'a+');
if($fp === false)
{
    //error handling, local file cannot be openened
}
else
{
    //open remote file with read permission, you need to have allow_url_fopen to be enabled on our server if you open here a URL
    $handle = fopen($temp_download, 'rb');
    if($handle === false)
    {
        //error handling, remote file cannot be opened
    }
    else
    {
        //while we did not get to the end of the read file, loop
        while (!feof($handle))
        { 
            //read a chunk of the file
            $chunk_info = fread($handle, $chunksize);
            if($chunk_info === false)
            {
                //error handling, chunk reading failed
            }
            else
            {
                //write the chunk info we just read to the local file
                $succ = fwrite($fp, $chunk_info);
                if($succ === false)
                {
                    //error handling, chunk info writing locally failed
                }
            }
        } 
        //close handle
        fclose($handle);
    }
}
//close handle
fclose($fp); 
```

# database - RavenDB build #2127 客户端异常：尝试创建新数据库时 [Argument_StreamNotReadable]

> ID：12993883
> 
> 赞同：5
> 
> 时间：2012-10-21T00:29:50.780
> 
> 标签：database, exception, iis, deployment, ravendb

根据[Ayende 的公告](https://twitter.com/ayende/status/259725519963185152)，我刚刚下载了 RavenDB #2127 的新不稳定版本。

我想测试它在当前使用 build #888 的现有应用程序上的执行速度。

RavenDB[部署为 IIS 应用程序](http://ravendb.net/docs/server/deployment/as-iis-application)。

`Web.config`有：

```
<add key="Raven/AnonymousAccess" value="Get"/> 
```

我得到了一个禁止的例外。然后我将其更改为：

```
<add key="Raven/AnonymousAccess" value="All"/> 
```

现在，在尝试使用 Raven Studio 创建新数据库时，我遇到了以下“可怕”异常。

如果您知道是什么原因造成的，请分享解决方案。

```
 at Raven.Studio.Infrastructure.InvocationExtensions.Catch(Task parent, Func`2 func)
   at Raven.Studio.Infrastructure.InvocationExtensions.Catch(Task parent, Action`1 action)
   at Raven.Studio.Infrastructure.InvocationExtensions.Catch(Task parent)
   at Raven.Studio.Infrastructure.Execute.OnTheUI(Action action)
   at Raven.Studio.Infrastructure.InvocationExtensions.<>c__DisplayClass30.<Catch>b__2e(Task task)
   at System.Threading.Tasks.ContinuationTaskFromTask.InnerInvoke()
   at System.Threading.Tasks.Task.Execute()
   at System.Threading.Tasks.Task.ExecutionContextCallback(Object obj)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
   at System.Threading.Tasks.Task.ExecuteEntry(Boolean bPreventDoubleExecution)
   at System.Threading.Tasks.Task.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
   at System.Threading.ThreadPoolWorkQueue.Dispatch()
   at System.Threading._ThreadPoolWaitCallback.PerformWaitCallback()

Client side exception:
System.ArgumentException: [Argument_StreamNotReadable]
Arguments: 
Debugging resource strings are unavailable. Often the key and arguments provide sufficient information to diagnose the problem. See http://go.microsoft.com/fwlink/?linkid=106663&Version=5.0.10411.00&File=mscorlib.dll&Key=Argument_StreamNotReadable
   at System.IO.StreamReader..ctor(Stream stream, Encoding encoding, Boolean detectEncodingFromByteOrderMarks, Int32 bufferSize, Boolean leaveOpen)
   at Raven.Studio.Models.ApplicationModel.AddErrorNotification(Exception exception, String message, Object[] details)
   at Raven.Studio.Infrastructure.InvocationExtensions.<>c__DisplayClass30.<>c__DisplayClass32.<Catch>b__2f()
   at AsyncCtpThreadingExtensions.<>c__DisplayClass4.<InvokeAsync>b__3() 
```

我还在 RavenDB 问题跟踪站点上打开了一个错误报告。如果你想关注它，这里是链接：

[http://issues.hibernatingrhinos.com/issue/RavenDB-636](http://issues.hibernatingrhinos.com/issue/RavenDB-636)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T05:32:01.950

在与 Ayende 在 Skype 聊天中进行了一些调试后，他刚刚提到了这一点：

> [10/21/12 3:10:31 AM] Oren Eini：在 IIS 中运行时...您是否启用了 Windows 身份验证？你需要它来创建一个新的数据库。

事实证明，我的机器上什至没有安装 Windows 身份验证......我正在尝试在新的 Windows 8 安装中进行此操作。所以我不得不去[安装 Windows 身份验证功能](http://blogs.msdn.com/b/hongmeig/archive/2007/08/20/how-do-i-turn-on-windows-authentication-in-iis-7.aspx)。然后我去了 IIS 并为 RavenDB 网站启用了 Windows 身份验证：

![在此处输入图像描述](../Images/86d23008a9483533b7c21e1d1c917548.png)

现在通过 Raven Studio 创建一个新的数据库 JUST WORKS！:)

Ayende 始终在帮助我们充分利用 RavenDB。他的大力支持。

# jquery - 延迟滑动切换

> ID：12993884
> 
> 赞同：1
> 
> 时间：2012-10-21T00:29:55.320
> 
> 标签：jquery, slidetoggle, slideup

我有一个在链接上具有向上滑动效果的导航，一旦点击，页面就会从底部向上滑动，而名为#portfolio 的主页会向下滑动，一旦打开，如果用户再次点击相同的链接我想要页面向下滑动。

我想要完成的是，如果当我单击另一个面板时打开两个面板之一#aboutpage 和#contactpage，例如如果#aboutpage 打开，然后我单击#contactpage 的链接，我希望关于页面向下滑动，一旦向下 #contactpage 向上滑动。我已经用十几种不同的方法尝试了十几次，但我似乎无法让它发挥作用。

[http://maximsiebert.com/unamed/Untitled-1.html](http://maximsiebert.com/unamed/Untitled-1.html)

```
 $('.about').click(function() {
    if (!$('#aboutpage').is(":visible")) {
    $('#aboutpage') .slideToggle(1000)
    $('#portfolio') .slideToggle(1000)
    }
else if ($(('#contactpage').css('display') == "block")) {
    $('#contactpage') .slideToggle(1000)
    $('#aboutpage') .delay(1000).slidetoggle(1000)
}else {
    $('#portfolio').slideDown(1000);
     $('#aboutpage').slideUp(1000);
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T00:58:10.230

我会再试一次。不要使用`slideToggle`，而是将它们*全部*向上滑动，然后将当前的向下滑动，但前提是它一开始不可见：

```
$('.about').click(function() {
    var wasVisible = $("#aboutpage").is(":visible");
    $("#aboutpage").slideUp();
    $("#portfolio").slideUp();
    $("#contactpage").slideUp();
    if (!wasVisible) {
        $('#aboutpage').slideDown(1000)
    }
} 
```

演示[在这里](http://jsfiddle.net/rFn5v/3/)。

# svn - 颠覆主要次要版本

> ID：12993885
> 
> 赞同：0
> 
> 时间：2012-10-21T00:30:44.230
> 
> 标签：svn, netbeans, versioning

我用 PHP 开发了一个项目，并开始使用 subversion (SVN)。我想使用 {major version}.{minor version}.{revision} 格式的版本编号。

我使用netbeans环境。我不知道我要设置什么。SVN 服务器还是 Netbeans？在哪里以及如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T00:47:06.497

Subversion 不会像那样跟踪修订，它们总是在每次提交时递增的简单整数。这是您将手动或在外部构建过程中跟踪的内容。但是，您可能希望使用您的编号方案来命名您的标签和分支。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-21T01:05:21.043

您需要设置一个 SVN 服务器，然后将您的 netbeans 代码提交到该 SVN 服务器。这里是SVN服务器软件链接：windows:http://www.visualsvn.com/server/ Linux:http://subversion.apache.org/packages.html

# c# - 如何编写环境类

> ID：12993891
> 
> 赞同：2
> 
> 时间：2012-10-21T00:32:00.393
> 
> 标签：c#, transactionscope, ambient

是否可以定义自己的环境类？

例如，TransactionScope 类使任何实现 IEnlistmentNotification（我认为）的对象都可以使用它，而无需任何代码显式地将一个对象的引用传递给另一个对象。

我不确定我是否需要使用它，但了解它是如何工作的会很有趣（即我如何在我自己的代码中实现这样的功能）。这是我们可以构建到我们自己的类中的东西，还是在较低级别开发的东西以允许 TransactionScope 做一些超出“常规开发人员”级别可用的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T00:38:28.950

写作`new TransactionScope()`只是设置静态[`Transaction.Current`属性](http://msdn.microsoft.com/en-us/library/system.transactions.transaction.current.aspx)。

其他类可以检查该属性是否不为空，并在事务中登记自己。

没有魔法。

# macos - 在特定时间范围内使 Mac OSX 应用程序过期并要求用户更新

> ID：12993892
> 
> 赞同：5
> 
> 时间：2012-10-21T00:32:04.277
> 
> 标签：macos, cocoa

在特定时间范围内（即 14 天）使 beta Mac OSX 应用程序过期然后要求用户更新（在 Cocoa 中）的推荐方法是什么？

每次用户启动应用程序时我是否只进行日期计算？此外，如果时间框架已过期，是否有办法使用 Sparkle 框架进行更新？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T14:52:19.683

我认为对于肯定会在给定日期到期的测试版，您可以对该日期进行硬编码。然后你可以像这样比较：

```
NSDate* expirationDate = [NSDate dateWithString: @"2012-03-24 10:45:32 +0600"];
if ([expirationDate compare:[NSDate date]] == NSOrderedAscending) {
    //is expired -> present update recommendation
} 
```

如果您想灵活使用日期，例如可以在服务器上创建一个包含日期字符串的 .txt 文件。这可以很容易地加载：

```
NSString* dateString = [NSString stringWithContentsOfURL:myURL encoding:NSUTF8StringEncoding error:NULL];
NSDate* expirationDate = [NSDate dateWithString: dateString]; 
```

如果您自动显示闪亮的更新提示，那肯定会很好。您可以关闭自动更新检查（请参阅：[https](https://github.com/andymatuschak/Sparkle/wiki/make-preferences-ui) ://github.com/andymatuschak/Sparkle/wiki/make-preferences-ui ），然后，当 beta 时间到期时，手动执行更新检查和/或重新激活自动检查。（见：[https](https://github.com/andymatuschak/Sparkle/wiki/customization) ://github.com/andymatuschak/Sparkle/wiki/customization ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:30:19.517

如果您正在寻找 14 天滚动测试版 - 即测试版在应用程序首次运行后 14 天到期，我建议您使用 userDefaults，并在启动时检查它。

具体来说，从您的 applicationDidFinishLaunching 中的以下代码调用 isBetaExpired：

```
- (void)setDateForKey:(NSString*)key date:(NSDate*)date {
    [[NSUserDefaults standardUserDefaults] setObject:date forKey:key];
}

- (NSDate*)getDateForKey:(NSString*)key {
    return [[NSUserDefaults standardUserDefaults] objectForKey:key];    
}

- (BOOL)isBetaExpired {
    NSString* betaKey = @"v1.0BetaExpireDate";
    double maxElapsed = 60 * 60 * 24 * 14; // 14 days

    NSDate* betaDate = [self getDateForKey:betaKey];
    if (!betaDate) {
        // if we didn't have a beta start date already, set it to now
        betaDate = [NSDate date];
        [self setDateForKey:betaKey date:betaDate];
    }

    // determine how long it has been since the beta started
    double elapsed = [betaDate timeIntervalSinceNow];

    // check if it is expired
    BOOL expired = (elapsed >= maxElapsed);

    return expired;
} 
```

# ios - 导航控制器中的 iOS ScrollView 导致重新加载时出现布局问题

> ID：12993894
> 
> 赞同：1
> 
> 时间：2012-10-21T00:32:34.520
> 
> 标签：ios, layout, uinavigationcontroller, scrollview

我使用 Interface Builder 创建了一个通用应用程序。我的视图控制器嵌入在导航控制器中。一切都可以在模拟器以及 iPad 和 iPhone 上运行，但我有一个奇怪的怪癖。

我的第一个视图是在 ScrollView 中显示的菜单。仅在 iPhone 和 iPhone 模拟器上，第一次加载我的第一个视图时，一切看起来都很好。如果我单击一个按钮以转到一个新视图，然后使用“返回”按钮，则菜单会向屏幕左侧缩小。如果我再次单击一个按钮，然后再次导航，则会恢复原始比例。（无限重复。）

这似乎在 iPad 版本中不会发生。唯一的区别是：iPhone版是纵向的，iPad版是横向的；并且 iPad 版本在滚动视图中（从 iPhone UI 复制过来），但实际上不需要滚动，因为视图与屏幕大小相同。

我正在使用 Interface Builder 来设置支柱和弹簧。我尝试升级到 AutoLayout，但这导致从一些（非常旧的）Apple 示例代码中提取的 OpenGL 组件出现问题，我不想弄乱该组件。

这可能是 ScrollViews 和导航控制器的错误吗？我只是错过了一个简单的设置更改吗？我怀疑这可能与 iOS 6 试图支持新的、更长的 iPhone 有关，但不知道如何修复它。我确定问题很愚蠢，但我被卡住了！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T01:53:46.637

弄清楚了。我只好搬家

```
self.scrollView.contentSize = self.scrollView.bounds.size; 
```

出 viewDidLoad 并进入 ViewWillAppear。

# drupal - Drupal 6：使用视图的相关“位置”

> ID：12993905
> 
> 赞同：4
> 
> 时间：2012-10-21T00:34:16.303
> 
> 标签：drupal, views, related-content

我有一个自定义字段 (field_locations)，其中列出了 20 个不同的位置。我想使用该字段作为参数来获取列出相似/相关位置的块视图。

关于如何构建论点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T18:02:37.910

在您的视图上为 field_locations 创建一个上下文过滤器。使用 PHP 代码设置过滤器以提供默认值。在过滤器的 PHP 代码中，获取并返回您的字段或分类术语的值。

# jquery - 如何为第一列中的每个唯一项目创建带有系列的多系列折线图？

> ID：12993906
> 
> 赞同：2
> 
> 时间：2012-10-21T00:34:29.143
> 
> 标签：jquery, d3.js

我检查了各种教程，但找不到我的用例。

这是我的数据集的一个子集，采用 CSV 格式：

```
Provider,Service date,Unique patients seen
10800,2007-12-03,1
10800,2008-03-21,9
10800,2008-04-16,3
10800,2008-04-18,6
11451,2008-06-27,24
11451,2008-07-10,1
11451,2008-07-14,31
11451,2008-07-15,6
12980,2008-06-17,24
12980,2008-06-27,14
12980,2008-06-28,24
13907,2008-05-04,23
13907,2008-05-05,20
13907,2008-05-08,6
14618,2008-08-27,27
14618,2008-09-04,21
14618,2008-09-05,20 
```

我希望每个独特的提供者都有一个系列，该系列的 X 轴作为服务日期，Y 轴作为患者看到的。

到目前为止，我已经查看了[多系列折线图教程](http://bl.ocks.org/3884955)，但我无法说服它像现在一样使用我拥有的数据而不是列。

有什么建议或读物吗？

塔雷克：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T01:16:48.210

[您可以在http://jsfiddle.net/YHW6H/1/](http://jsfiddle.net/YHW6H/1/)看到一个工作示例。

我做了以下事情来强制你的数据。您将希望用于`d3.csv`读取 csv 文件，但我对示例的值进行了硬编码。

```
// you would use d3.csv('filename.csv', function (data) {...})
// in order to populate the data variable, I'm just hard coding it here

var data = [
    {Provider:'10800', 'Service Date': '2007-12-03', 'Unique patients seen':'1'},
    {Provider:'10800', 'Service Date': '2008-03-21', 'Unique patients seen':'9'},
    {Provider:'10800', 'Service Date': '2008-04-16', 'Unique patients seen':'3'},
    {Provider:'10800', 'Service Date': '2008-04-18', 'Unique patients seen':'6'},
    {Provider:'11451', 'Service Date': '2008-06-27', 'Unique patients seen':'24'},
    {Provider:'11451', 'Service Date': '2008-07-10', 'Unique patients seen':'1'},
    {Provider:'11451', 'Service Date': '2008-07-14', 'Unique patients seen':'31'},
    {Provider:'11451', 'Service Date': '2008-07-15', 'Unique patients seen':'6'},
    {Provider:'12980', 'Service Date': '2008-06-17', 'Unique patients seen':'24'},
    {Provider:'12980', 'Service Date': '2008-06-27', 'Unique patients seen':'14'},
    {Provider:'12980', 'Service Date': '2008-06-28', 'Unique patients seen':'24'},
    {Provider:'13907', 'Service Date': '2008-05-04', 'Unique patients seen':'23'},
    {Provider:'13907', 'Service Date': '2008-05-05', 'Unique patients seen':'20'},
    {Provider:'13907', 'Service Date': '2008-05-08', 'Unique patients seen':'6'},
    {Provider:'14618', 'Service Date': '2008-08-27', 'Unique patients seen':'27'},
    {Provider:'14618', 'Service Date': '2008-09-04', 'Unique patients seen':'21'},
    {Provider:'14618', 'Service Date': '2008-09-05', 'Unique patients seen':'20'}    
];

// first we need to coerce the data into the right formats and make the
// names a little more sane
data = data.map( function (d) { 
    return { 
      provider: +d.Provider,   // the + sign will coerce strings to number values
      date: new Date(d['Service Date']),
      patients: +d['Unique patients seen'] }; 
});   

// then we need to nest the data on Provider since we want to only draw one
// line per provider
data = d3.nest().key(function(d) { return d.provider; }).entries(data); 
```

不幸的是，您提供的数据并没有那么有趣，因为提供者并没有真正重叠。一旦你加载了所有数据，它应该看起来更好:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T00:58:39.043

简短的回答是将您的数据重新处理为 d3 可以处理的格式。

抱歉没有包含示例，但在手机上输入代码是一头猪

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T02:38:41.953

这是一个完整的工作示例，包括上面的数据。图表存在一个问题，即不同的提供者没有不同的颜色。就个人而言，我不确定如何解决这个问题。谢谢大家的帮助。

```
<!DOCTYPE html>
<meta charset="utf-8">
<style>

body {
  font: 10px sans-serif;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.x.axis path {
  display: none;
}

.line {
  fill: none;
  stroke: steelblue;
  stroke-width: 1.5px;
}

</style>
<body>
<script src="http://d3js.org/d3.v3.js"></script>
<script>

var margin = {top: 20, right: 80, bottom: 30, left: 50},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var x = d3.time.scale()
    .range([0, width]);

var y = d3.scale.linear()
    .range([height, 0]);

var color = d3.scale.category10();

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left");

var line = d3.svg.line()
    .interpolate("basis")
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.patients); });

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

d3.csv("https://raw.github.com/gist/3925458/c48eb92a3a8a23bfee762b514a4c1256ff0be10d/gistfile1.txt", function(error, data) {

    data = data.map( function (d) {
        return { 
            provider: +d.Provider,   // the + sign will coerce strings to number values
            date: new Date(d['Service date']),
            patients: +d['Unique patients seen'] }; 
    });

  providers = d3.nest().key(function(d) { return d.provider; }).entries(data);

  x.domain(d3.extent(data, function(d) { return d.date; }));

  y.domain([
    d3.min(providers, function(c) { return d3.min(c.values, function(v) { return v.patients; }); }),
    d3.max(providers, function(c) { return d3.max(c.values, function(v) { return v.patients; }); })
  ]);

  svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  svg.append("g")
      .attr("class", "y axis")
      .call(yAxis)
    .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Number of patients seen");

  var provider = svg.selectAll(".provider")
      .data(providers)
    .enter().append("g")
      .attr("class", "provider");

  provider.append("path")
      .attr("class", "line")
      .attr("d", function(d) { return line(d.values); })
      .style("stroke", function(d) { return color(d.name); });

  provider.append("text")
      .datum(function(d) { return {name: d.name, value: d.values[d.values.length - 1]}; })
      .attr("transform", function(d) { return "translate(" + x(d.value.date) + "," + y(d.value.patients) + ")"; })
      .attr("x", 3)
      .attr("dy", ".35em")
      .text(function(d) { return d.value.provider; });
});

</script> 
```

# c# - 通过 MVVM 模式创建 UserControl - DataContext 并绑定到父级

> ID：12993908
> 
> 赞同：4
> 
> 时间：2012-10-21T00:34:45.003
> 
> 标签：c#, wpf, mvvm, binding, user-controls

我使用 MVVM 模式，所以我自己的控件包含 View 和 ViewModel。
ViewModel 通过 DataContext 属性与 View 连接。这会导致绑定问题。为什么？

假设这种情况：
我创建了新的用户控件——例如——“SuperTextBox”。它有一个属性“SuperValue”。
现在我做这样的事情：

```
<Window>
    <Window.DataContext>
        <vm:WindowViewModel/>
    </Window.DataContext>

    <local:SuperTextBox SuperValue="{Binding Test}"/>
</Window> 
```

我认为“绑定过程”将 SuperTextBox.SuperValue 与 Window.DataContext.Test 结合起来，但不，“绑定过程”将 SuperTextBox.SuperValue 与 SuperTextBox.DataContext.Test 结合起来，这对我来说是不自然和误导的。

我可以以上述方式使用其他控件，例如“TextBox”，因为它们没有 DataContext。

如何使用 MVVM 模式创建保持自然绑定的用户控件（到父控件的 DataContext）？

编辑：

**我得到了很多关于如何绑定到父母的答案，但我更早知道这一点。问题是 - 我如何通过 MVVM 模式（具有 ViewModel）创建 UserControl 并保持自然绑定 - 默认为父 DataContext。**

我想要 ViewMoldel 并且仍然可以像这样绑定：

```
<local:SuperTextBox SuperValue="{Binding Test}"/> 
```

可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T07:42:25.753

所有绑定都应用于任何`control always first look for the binding in its DataContext`. 如果没有为控件设置 DataContext，则`walks up the Visual Tree`除非找到 DataContext，否则它会一直到其父级。

即使您将`DataContext`文本框`Test`上`Window's DataContext`的

```
<TextBox>
   <TextBox.DataContext>
      <vm:ViewModelForTextBox/>
   </TextBox.DataContext>
   <TextBox.Text>
      <Binding Path="Test"/>
   </TextBox.Text>
</TextBox> 
```

现在，xaml 将在 class 中而不是在 class中查找`Test`属性，如果在 class 中找不到属性，则不会查找 Window 的 DataContext 类。`ViewModelForTextBox``WindowViewModel``Test``ViewModelForTextBox``binding will fail silently`

如果您仍想为自定义 UserControl 设置 DataContext 但仍想绑定到父级（窗口）的 dataContext，则必须`RelativeSource MarkupExtension`像这样在绑定中使用 -

```
<local:SuperTextBox SuperValue="{Binding Path=DataContext.Test,
                                RelativeSource={RelativeSource Mode=FindAncestor,
                                                 AncestorType={x:Type Window}}}"> 
```

[请参阅此处](http://msdn.microsoft.com/en-us/library/ms752347.aspx)的 MSDN 文章以获得更多说明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T08:37:12.873

你应该发布你的 SuperTextBox 代码，因为有你的错误。

通常你创建一个具有依赖属性的用户控件 - 在你的情况下是“SuperValue” - 现在最重要的是你没有将你的 SuperTextBox 的数据上下文设置为它自己。

您必须在 SuperTextBox 中使用 elementname 绑定才能绑定到“SuperValue”

```
 <SuperTextBox x:Name="uc">
   <TextBox Text="{Binding ElementName=uc, Path=SuperValue}/>
 </superTextBox> 
```

如果你这样做 - 你的

```
 <local:SuperTextBox SuperValue="{Binding Test}"/> 
```

应该可以工作并且应该绑定到您的 vm:WindowViewModel 的测试属性。这是编写上述绑定的**唯一方法。**

编辑：如果你想为你的用户控件创建一个视图模型，让我们说 SuperTextViewmodel。那么它将有一个属性“SuperValue”。现在你不能设置数据上下文两次，所以我建议你必须向你的 SuperTextViewmodel 类型的 WindowViewmodel 添加一个属性，并像你想要的那样处理属性。

你的绑定看起来像这样

```
 <local:SuperTextBox DataContext="{Binding MySuperTextViewmodelInstanceOnWindowViewmodel}"/> 
```

我会回答我的第一部分:) 我总是说视图需要一个视图模型，但需要一个用户控件依赖属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T02:01:17.243

您需要“查找”它的窗口祖先的数据上下文。您的绑定将如下所示：

```
<local:SuperTextBox SuperValue="{Binding Path=DataContext.Test, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T02:13:37.947

我觉得奇怪地回答了我的问题，但是......
在我自己的控制下，我做了这样的事情：

```
<UserControl>
    <Grid>
        <Grid.DataContext>
             <vm:UserControlViewModel />
        </Grid.DataContext>
        // here realy code of control
    </Grid>
</UserControl> 
```

现在我可以在控制之外使用“自然”绑定。:)

# c - 任何将 ip/前缀转换为 ip 地址列表的内置函数

> ID：12993913
> 
> 赞同：1
> 
> 时间：2012-10-21T00:35:16.657
> 
> 标签：c, ip

我想从 ip/prefix 输入生成 IP 地址列表。

我正在尝试找到可以帮助我实现这一目标的函数或任何指针。

基本上，我正在尝试编写一个端口扫描器，它将扫描给定 IP/前缀的所有 IP。

如果这样的功能不存在，请给我任何关于如何制作的指示。

——艾米

# javascript - JavaScript滚动到jQuery中绑定keydown事件的元素

> ID：12993914
> 
> 赞同：1
> 
> 时间：2012-10-21T00:35:29.643
> 
> 标签：javascript, jquery, function, events, keydown

我试图在 keydown 事件中滚动到 2 个不同的元素，第一次按下第一个元素，第二次按下第二个元素，并在每 2 次按下（或点击）后重复该事件。我创建了一个 JSFiddle 演示，链接如下。

[小提琴](http://jsfiddle.net/FTCQG/11/)

如您所见，它不会在第二次按下（或点击）时滚动到底部元素。我唯一能想到的就是在第二个事件中使用除“.offset().top”之外的其他东西。但是，如果你们中的一些 JS 专家查看我的代码，您可能会看到错误，或者可能会看到其他解决方案以获得所需的效果。提前致谢！

```
.offset().top ??? 
```

主要错误已解决，但发现了新错误。如果用户单击向上箭头，是否有办法将命中变量重置为零？

**没有更多的错误！随意使用这个脚本！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T01:01:05.430

参见[偏移量的定义](http://api.jquery.com/offset/)

> 获取匹配元素集中第一个元素相对于文档的当前坐标。

这里的问题是，当您为**#wrap**元素设置动画时，它的偏移量会发生变化，最简单的解决方案是预先获取它的位置，请参阅[我编辑的 JSfiddle](http://jsfiddle.net/finfin/XXuZG/)。添加如下两行代码，按照spot1/spot2做动画。开关盒执行良好。

```
var spot1 = $("#scrollToHere2").position().top;
var spot2 = $("#scrollToHere").position().top; 
```

# c++ - 不能在没有模板参数列表的情况下引用类模板

> ID：12993915
> 
> 赞同：4
> 
> 时间：2012-10-21T00:35:37.100
> 
> 标签：c++, xcode, class, templates, arguments

我是 C++ 新手。这是我的家庭作业，下面是教授给我们的代码，帮助我们完成这项任务，但它没有编译...我已经标记了生成错误的行，错误消息是“不能在没有模板参数列表的情况下引用模板“哈希””。
我不知道如何解决它。有人可以指出我正确的方向吗？
（我已经删除了我认为与错误消息无关的行。）

该类定义为：

```
template <typename HashedObj>
class HashTable
{
public:
    //.... 
private:
    struct HashEntry
    {
        HashedObj element;
        EntryType info;
        HashEntry( const HashedObj & e = HashedObj( ), EntryType i = EMPTY )
           : element( e ), info( i ) { }
    };

    vector<HashEntry> array;
    int currentSize;

    //... some private member functions....

    int myhash( const HashedObj & x ) const
    {
        int hashVal = hash( x ); <<--- line with error

        hashVal %= array.size( );
        if( hashVal < 0 )
            hashVal += array.size( );

        return hashVal;
    }
};

int hash( const HashedObj & key );
int hash( int key ); 
```

--- 和 cpp 文件中的 int hash() 函数 ----

```
int hash( const string & key )
{
    int hashVal = 0;
    for( int i = 0; i < key.length( ); i++ )
        hashVal = 37 * hashVal + key[ i ];

    return hashVal;
}

int hash( int key )
{
     return key;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T00:39:58.903

我怀疑您是`using namespace std;`（我可以说是因为您使用的是`vector`without ）并且名称空间中`std::`存在名称，因此名称冲突。`hash``std`

您应该使用`std::`而不是引入整个`std`命名空间，**特别是**在无辜用户可以使用`#include`它并污染他们的程序的头文件中`std`。

# javascript - Function.prototype 判断一个函数是否已经在 J avaScript 中定义

> ID：12993916
> 
> 赞同：2
> 
> 时间：2012-10-21T00:35:56.950
> 
> 标签：javascript, function, prototype, undefined

作为我想要的示例，如果您调用了未定义的函数，您将在控制台中收到如下消息：`nonExistentFunc is not defined`

是否可以让 Javascript 调用函数而不是显示此消息？可能与 Function.prototype 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T00:45:04.967

您的选择是：

1.  设置全局异常处理程序并将所有事件处理程序包装在异常处理程序中，并捕获通过尝试执行不存在的函数并在异常处理程序中检测到该特定异常而引发的任何异常，然后调用您自己的函数来处理那个特殊的例外。

2.  在调用之前测试特定的函数调用，以查看函数本身是否在调用之前定义。您显然不能对代码中的每个函数都执行此操作（您可以，但它不是很实用），但是如果您只有几个地方想要测试正确定义的函数，那么您可以在调用它们之前编写代码来测试它：

代码示例：

```
if (typeof obj.funcName === 'undefined') {
    // call me own special function
} else {
   obj.funcName();
} 
```

# mysql - 将查询简化为案例

> ID：12993917
> 
> 赞同：3
> 
> 时间：2012-10-21T00:36:13.320
> 
> 标签：mysql, union

这是到目前为止的查询：

```
select `formeid`, `name`, 'm' as `gender` from `data_pokemon`
    where `genders` not like '0|_' and `formeid` not in
        (select `formeid` from `dex` where `userid`=@userid and `gender`='m')
union
select `formeid`, `name`, 'f' as `gender` from `data_pokemon`
    where `genders` not like '_|0' and `formeid` not in
        (select `formeid` from `dex` where `userid`=@userid and `gender`='f')
union
select `formeid`, `name`, 'n' as `gender` from `data_pokemon`
    where `genders`='0|0' and `formeid` not in
        (select `formeid` from `dex` where `userid`=@userid and `gender`='n')
order by `formeid` 
```

如您所见，有很多重复。有没有办法简化这个查询，所以没有那么多事情发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T07:41:27.647

```
SELECT   p.formeid, p.name,
         CASE
           WHEN p.genders NOT LIKE '0|_' THEN 'm'
           WHEN p.genders NOT LIKE '_|0' THEN 'f'
           WHEN p.genders =        '0|0' THEN 'n'
         END AS gender
FROM     data_pokemon p LEFT JOIN dex d
      ON p.formeid = d.formeid
     AND d.userid  = @userid
     AND d.gender  = CASE
           WHEN p.genders NOT LIKE '0|_' THEN 'm'
           WHEN p.genders NOT LIKE '_|0' THEN 'f'
           WHEN p.genders =        '0|0' THEN 'n'
         END
WHERE    d.formeid IS NULL
ORDER BY p.formeid 
```

# ruby - 如何获取 Ruby 中正则表达式字符串中最后一个匹配项的完整匹配数据？

> ID：12993920
> 
> 赞同：1
> 
> 时间：2012-10-21T00:37:08.110
> 
> 标签：ruby, regex

[`Regexp#match(str, index)`](http://www.ruby-doc.org/core-1.9.3/Regexp.html#method-i-match)给了我`index`字符串之后的第一个匹配项，这对于从左到右遍历每个匹配项非常有用。但是我怎样才能找到给定索引*之前的**最后一个*匹配项？给出最后一场比赛的索引，但如果我想要完整的比赛数据怎么办？*[`String#rindex`](http://ruby-doc.org/core-1.9.3/String.html#method-i-rindex)*

 *例子：

```
/.oo/.rmatch("foo boo zoo") 
```

...应该屈服...

```
#<MatchData "zoo"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T01:22:32.040

您可以通过对字符串进行子字符串化来限制正则表达式可以匹配的字符串的深度。

```
irb> /.oo/.match("foo boo zoo"[0..-3])
=> #<MatchData "foo">
irb> /.oo/.match("foo boo zoo"[0..-3],3)
=> #<MatchData "boo">
irb> /.oo/.match("foo boo zoo"[3..-3]) # can also express the start with slice
=> #<MatchData "boo">
irb> /.oo/.match("foo boo zoo"[0..-3],5)
=> nil 
```

[`String#scan`](http://ruby-doc.org/core-1.9.3/String.html#method-i-scan)将重复应用一个正则表达式，返回一个包含所有匹配项的数组，您只需从中选择最后一个匹配项。

```
module RegexpHelper
  def rmatch str, rlimit = -1
    str[0..rlimit].scan(self).last
  end
end

Regexp.send :include, RegexpHelper

/.oo/.rmatch 'foo boo moo'     # => "moo"
/.oo/.rmatch 'foo boo moo', -3 # => "boo"
/.oo/.rmatch 'foo boo moo', 4  # => "foo" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T02:41:54.120

这是一个猴子补丁解决方案：

```
class Regexp
  def rmatch str, offset = str.length
    last_match = match str
    while last_match && last_match.offset(0).last < offset
      break unless m = match(str, last_match.offset(0).last)
      last_match = m
    end
    last_match
  end
end

p /.oo/.rmatch("foo boo zoo")
#<MatchData "zoo"> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-21T01:28:02.910

您可以反转字符串、反转正则表达式并用作`length(str) - index`起点。

```
1.9.3p194 :010 > /oo./.match("foo boo zoo".reverse)[0].reverse
=> "zoo" 
```

如果它所代表的语言确实是常规的，则反转正则表达式很简单。贪婪或缺乏贪婪可能会导致您必须考虑的极端情况。

如果正则表达式有一个 Kleene 星，我相信这是完成工作的唯一方法，除非您构建自己的反向正则表达式匹配器，这是一个大项目。*

# javascript - 如何使用 childrenByXPath 搜索集合？

> ID：12993924
> 
> 赞同：3
> 
> 时间：2012-10-21T00:37:57.813
> 
> 标签：javascript, alfresco

该集合有 4 个值（A、B、C、D），可以在文档中选择任意组合。

试图只为（A，B）。

```
var nodes = space.childrenByXPath("\*[@cm:mychoice='A, B']/\*"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:58:12.013

```
var nodes = space.childrenByXPath("\*[@cm:mychoice='A' or @cm:mychoice='B']/\*"); 
```

应该做的伎俩。

# mysql - MySQL 将多个表中的特定字段导出到一个 csv 文件中？创建表输出

> ID：12993931
> 
> 赞同：2
> 
> 时间：2012-10-21T00:39:23.570
> 
> 标签：mysql, csv, export

我需要将我的电子商务与本地系统集成。

我需要将数据库的多个表中的特定字段导出到 csv 文件中。

我需要从 TABLE jos_virtuemart_products 那些字段 product_sku ， product_in_stock ， low_stock_notification ， product_length ， product_width ， product_height ， product_weight

然后

我需要从 TABLE jos_virtuemart_products_en_gb 那些字段 purodct_name ， product_s_desc

然后输出的 csv 文件应该导入到另一个数据库表中，该表包含上面其他 2 个表中的所有这些字段。

是否可以在linux命令行中通过mysql命令运行？或者我将不得不找出其他方法？

有人遇到过这种情况吗？

执行此迭代的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T01:50:02.770

如果您可以为所需内容编写查询，则可以使用`SELECT ... INTO OUTFILE`将其写入服务器上的 CSV 文件。添加`FIELDS TERMINATED BY`以将分隔符设置为“，”，因为默认是使用制表符。

[http://dev.mysql.com/doc/refman/5.5/en/select-into.html](http://dev.mysql.com/doc/refman/5.5/en/select-into.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T23:36:14.397

我确实在@Joshua Martell 的帮助下解决了我的问题，让我大开眼界的是这篇文章[PHP mySQL, Joining More Two Tables Together with Similar IDs?](https://stackoverflow.com/questions/6436897/php-mysql-joining-more-than-two-tables-together-with-similar-ids) @Jatin Dhoot 的回答谢谢大家！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T00:47:42.753

如果您可以生成一个查询以生成新系统的表（可能使用某种连接），您可以将其导出到 csv 文件。

# android - 我可以告诉相机继续拍照吗？

> ID：12993934
> 
> 赞同：2
> 
> 时间：2012-10-21T00:39:43.193
> 
> 标签：android, android-intent, camera

[我已经使用Take Pictures Simply](http://developer.android.com/training/camera/photobasics.html "拍照简单")中的示例代码制作了一个应用程序，但它所做的只是启动相机应用程序，此时我仍然必须按下拍照按钮然后说“是的，我拍的那张照片没问题”。我可以在 Intent 中添加什么额外的内容来表示“继续使用我上次在相机应用程序中保存的设置拍摄 dadgum 照片”吗？

我希望能够远程触发拍照，我不想从头开始构建整个相机应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T00:44:17.793

> 我可以在 Intent 中添加什么额外的内容来表示“继续使用我上次在相机应用程序中保存的设置拍摄 dadgum 照片”吗？

不，因为启动相机应用程序的主要`Intent`目的是用户可以使用屏幕上的预览来排列镜头。可能有一些第三方相机应用程序可能支持一些`Intent`额外的自动拍摄，但它不是标准`ACTION_IMAGE_CAPTURE`协议的一部分，你不能指望任何给定的相机应用程序支持它。另外，请记住，用户可能安装了多个相机应用程序，这意味着当您调用时会出现一个选择器，而不是相机应用程序`startActivity()`。

如果你想控制图片的实际拍摄，你将不得不使用`Camera`类写一些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T00:44:32.950

[这篇关于“控制相机”的 Android 文档](http://developer.android.com/training/camera/cameradirect.html)讨论了在您的应用程序中实际控制相机的细节。正如 CommonsWare 所指出的，您使用的示例代码纯粹是启动相机应用程序，然后处理结果。[相机 API](http://developer.android.com/reference/android/hardware/Camera.html)应该让您可以访问您需要的所有功能。确保在清单中设置正确的权限/等！

# php - PHP AJAX 表单提交显示数组

> ID：12993935
> 
> 赞同：1
> 
> 时间：2012-10-21T00:39:55.673
> 
> 标签：php, jquery, ajax, arrays, forms

当我提交表单以在我的页面上发表评论时，页面会显示数据数组，而不仅仅是显示评论淡入的页面。

这是我点击提交按钮后在浏览器中看到的内容（记录插入正常）：

```
{"streamid":1567,"cm":{"id":"0","avatar":"uploads\/30-av.jpg","name":"Mike<\/a>","content":"blah blah blah","time":"some seconds ago"}} 
```

PHP

```
$action = $_GET['action'];
if ($action == 'blasting') {
$blast = input($_POST['blast']);
if ($blast AND strlen($blast) > 1) {
    $stm = $_DB->prepare('insert into wl_activity (user_id, action, posted_on, data) values (?, ?, ?, ?)');
    $stm->execute(array($_USER->get_user_id(), 'blast', time(), $blast));
    }
echo json_encode($array);
   } 
```

我的表格代码

```
 <script type="text/javascript" src="js/ajaxupload.js"></script>
    <script type="text/javascript" src="js/jquery.form.js"></script>
     <script type="text/javascript" src="js/newsfeed.js"></script>

 <form method="post" action="index.php?cmd=ajax&action=blasting" id="blast-form">
            <textarea class="form_input" id="blastbox" name="blast" style="width:90%" ></textarea>
            <input type="submit" id="blastbtn" value="Post" class="form_submit" />

<div id="ajax-feed"></div>

    <?php $general = array(); ?>
    <?php
        foreach ($feeds as $f) {
            if ($f['action'] == 'blast')
                array_push($general, 'blast');
                //unset($general[count($general)-1]);
            else
                array_push($general, 'normal');
        }
    ?> 
```

这是我的 jquery.form.js [http://pastebin.com/MP3uVdcP](http://pastebin.com/MP3uVdcP) 这是我的 newsfeed.js [http://pastebin.com/ymSNjXJR](http://pastebin.com/ymSNjXJR)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T00:51:04.427

您的表单只是一个没有附加 Ajax 功能的简单表单（就我们在您的示例中看到的而言）。

您的浏览器通过移动到 成功发布表单`index.php?cmd=ajax&action=blasting`，您可以在此处看到 JSON 响应。

您需要使用 JavaScript 挂钩表单提交事件，停止默认操作（移动到下一页）并使用 Ajax 发送。

这是一个例子：

```
$("#blast-form").submit(function(e){
    e.preventDefault();
    $.post($(this).action, $(this).serialize(), function(response) {
        $('#ajax-feed').html(response);
    });
}); 
```

# c# - 使用 GData API 启用实验室功能

> ID：12993937
> 
> 赞同：2
> 
> 时间：2012-10-21T00:40:01.500
> 
> 标签：c#, .net, google-email-settings-api

我正在构建一个应用程序（使用.Net），以便自动配置我们自己的域 gmail。

我可以使用这里描述的 API 设置很多东西：[https ://developers.google.com/google-apps/email-settings/#api_operations](https://developers.google.com/google-apps/email-settings/#api_operations)

但是，是否可以使用 API（Gmail 设置上的实验室选项卡）启用实验室中的功能？我找不到任何替代方法来做到这一点！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:17:37.593

还没有。Google 最近在 Google Apps Dashboard 中推出了高级实验室管理功能，但目前还没有任何可用的 API。

# c++ - 如何使用 C++ 读取 MNIST 数据集？

> ID：12993941
> 
> 赞同：2
> 
> 时间：2012-10-21T00:40:46.210
> 
> 标签：c++, mnist

我正在阅读以下问题：

[如何在 C++ 中读取 MNIST 数据？](https://stackoverflow.com/questions/8286668/how-to-read-mnist-data-in-c)

并且有一些用于读取 MNIST 数据库的 C++ 代码。尝试后我发现它工作正常，直到它开始读取数据的地方。

这是以下代码：

```
 for(int i=0;i<number_of_images;++i)
      {
        for(int r=0;r<n_rows;++r)
        {
            for(int c=0;c<n_cols;++c)
            {
                unsigned char temp=0;
                file.read((char*)&temp,sizeof(temp));
                //cout<<(int)temp<<" "; //printing the pixel in integer format

            }
        }
    } 
```

我尝试打印出变量“temp”的整数值，但是我没有得到正确的像素数（它们都为零）。我不确定那里出了什么问题，每个像素占用一个字节空间，然后我将其转换为 int 并且它不起作用。为什么会这样？先感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-23T02:19:11.067

我有同样的问题，前几个字节的数据很好，然后其余的都用 0 填充。事实证明，文件流在第一次遇到字节 0x01A 时失败了。对此的修复正在改变：

```
ifstream file ("data"); 
```

到

```
ifstream file ("data", std::ios::binary); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T00:59:26.087

在使用 MNIST 数据集时，我遇到了与您相同的问题。我可以阅读标签，但训练和测试集的图像大多是伪造的；训练集几乎完全用 175 填充，测试集几乎完全用 0 填充（前 6 张图像除外）。重新启动并没有解决问题，我无法确定文件读取工作不正常的原因。

对于有同样问题的任何人，我建议改用位于[http://cis.jhu.edu/~sachin/digit/digit.html](http://cis.jhu.edu/~sachin/digit/digit.html)的数据文件。数据已经按数字组织（不需要标签/图像关联），像素值数组一个接一个地简单编码。知道每个数组是 28x28 并且每个数字有 1000 张图像，您可以轻松编写代码来输入像素值的单个图像数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-19T12:56:39.417

以下是读取 mnist 并将其转换为的完整代码`cv Mat`：

```
uint32_t swap_endian(uint32_t val) {
    val = ((val << 8) & 0xFF00FF00) | ((val >> 8) & 0xFF00FF);
    return (val << 16) | (val >> 16);
}

void read_mnist_cv(const char* image_filename, const char* label_filename){
    // Open files
    std::ifstream image_file(image_filename, std::ios::in | std::ios::binary);
    std::ifstream label_file(label_filename, std::ios::in | std::ios::binary);

    // Read the magic and the meta data
    uint32_t magic;
    uint32_t num_items;
    uint32_t num_labels;
    uint32_t rows;
    uint32_t cols;

    image_file.read(reinterpret_cast<char*>(&magic), 4);
    magic = swap_endian(magic);
    if(magic != 2051){
        cout<<"Incorrect image file magic: "<<magic<<endl;
        return;
    }

    label_file.read(reinterpret_cast<char*>(&magic), 4);
    magic = swap_endian(magic);
    if(magic != 2049){
        cout<<"Incorrect image file magic: "<<magic<<endl;
        return;
    }

    image_file.read(reinterpret_cast<char*>(&num_items), 4);
    num_items = swap_endian(num_items);
    label_file.read(reinterpret_cast<char*>(&num_labels), 4);
    num_labels = swap_endian(num_labels);
    if(num_items != num_labels){
        cout<<"image file nums should equal to label num"<<endl;
        return;
    }

    image_file.read(reinterpret_cast<char*>(&rows), 4);
    rows = swap_endian(rows);
    image_file.read(reinterpret_cast<char*>(&cols), 4);
    cols = swap_endian(cols);

    cout<<"image and label num is: "<<num_items<<endl;
    cout<<"image rows: "<<rows<<", cols: "<<cols<<endl;

    char label;
    char* pixels = new char[rows * cols];

    for (int item_id = 0; item_id < num_items; ++item_id) {
        // read image pixel
        image_file.read(pixels, rows * cols);
        // read label
        label_file.read(&label, 1);

        string sLabel = std::to_string(int(label));
        cout<<"lable is: "<<sLabel<<endl;
        // convert it to cv Mat, and show it
        cv::Mat image_tmp(rows,cols,CV_8UC1,pixels);
        // resize bigger for showing
        cv::resize(image_tmp, image_tmp, cv::Size(100, 100));
        cv::imshow(sLabel, image_tmp);
        cv::waitKey(0);
    }

    delete[] pixels;
} 
```

用法：

```
string base_dir = "/home/xy/caffe-master/data/mnist/";
string img_path = base_dir + "train-images-idx3-ubyte";
string label_path = base_dir + "train-labels-idx1-ubyte";

read_mnist_cv(img_path.c_str(), label_path.c_str()); 
```

输出如下：

[![在此处输入图像描述](../Images/5786c14963cb552bd9cccd4330fc9109.png)](https://i.stack.imgur.com/K1ioF.png)

# java - 线程新手需要java中的建议

> ID：12993943
> 
> 赞同：2
> 
> 时间：2012-10-21T00:40:51.960
> 
> 标签：java, swing, concurrency

我正在写一个音乐播放器。当我从外部音乐文件中读取数据时，我会用幅度信息填充缓冲区。因为我认为将这个阻塞操作生成到它自己的线程中是有意义的，所以我添加了一个在 runnable 中运行它的接口：

```
public class AudioInterface implements Runnable {

 public void run() 
 {
    AudioManager am = new AudioManager();
    am.play("res/sample2.mp3");
 }
} 
```

以下是我的以下问题：

*   如何从另一个类创建一个钩子来轮询幅度数据？我需要它来编写将绘制到 JPanel 画布上的算法。
*   启用可视化的面板是否也应该在不同的线程中？
*   目前 run() 仅包括播放文件，我将如何将此线程用于其他操作，例如摆姿势和寻找等，因为只有一个运行操作。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T00:44:15.543

一些想法：

> 如何从另一个类创建一个钩子来轮询幅度数据？我需要它来编写将绘制到 JPanel 画布上的算法。

由于这是一个 Swing 程序，请考虑为您的后台线程使用 SwingWorker，然后通过 SwingWorker 的发布/处理方法对将幅度数据泵入程序的 GUI 部分。

> 启用可视化的面板是否也应该在不同的线程中？

在这里小心。所有 Swing 代码都应该在一个线程上调用，并且只能在一个线程上调用，即事件调度线程。请看一下这方面的教程，[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)。

> 目前 run() 仅包括播放文件，我将如何将此线程用于其他操作，例如摆姿势和寻找等。

您不为此使用“线程”，而是调用对象的方法。

此外，您可能希望将 AudioManager 变量声明为类字段，而不是局部变量，否则它的范围仅限于声明它的方法，从而阻止其他代码与其交互。

# java - 将对象从一个私有方法传递到另一个私有方法

> ID：12993946
> 
> 赞同：5
> 
> 时间：2012-10-21T00:41:40.143
> 
> 标签：java, object, methods, private

我已经编程了一段时间了，我有一个关于公共方法使用的问题。我正在开发一个自动售货机程序，我有一个私有方法`setUpMachine()`来初始化游戏和设置对象。我有另一个私有方法`startMachine()`可以启动游戏并提示用户输入。然后它将输入传递给另一个私有方法`checkInput()`，该方法检查输入是否有效......但这并不是我遇到的“问题”，而是我没有正确做某事的奇怪感觉。`setUpMachine()`对于我的第三种方法，我需要访问第一种方法中的对象`checkInput()`。问题是我有很多对象（糖果、薯条、苏打水、饼干），并且将它们全部传递给检查周边似乎并不正确。换句话说，这样做：

```
checkInput(FoodType candy, FoodType chips, FoodType soda, FoodType cookie) 
```

似乎不对。这是否意味着，如果我使用私有方法，每次我想使用它们时都必须传递对象？我读到公开方法是不好的做法。

对此的解释会很好，与其说是告诉我我的编码效率低下的解释，不如说是描述*何时*以及*如何*使用私有方法的解释，或者是否有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T00:58:49.547

如果您不想传递对象，可以将它们配置为实例变量：

```
public class VendingMachine {
    private FoodType candy;
    private FoodType chips;
    private FoodType sodas;
    private FoodType cookies;

    private static String errorMessage = "A really bad error occurred.";

    public VendingMachine(){
        this.setupMachine();
    }

    private void setUpMachine(){
        this.candy = new FoodType();
        this.chips = new FoodType();
        this.sodas = new FoodType();
        this.cookies = new FoodType();
    }

    private boolean checkInput(){
        if (this.candy==null || this.chips==null || this.sodas==null || this.cookies==null)
            return false;
        else
            return true;
    }

    public void doSomething() throws Exception() {
        if (!this.checkInput()) throw new Exception(VendingMachine.errorMessage);
        // do things
    }
} 
```

然后可以将此类称为

```
VendingMachine vendingMachine = new VendingMachine();
try {
    //vendingMachine.checkInput() is not available because it is private
    vendingMachine.doSomething(); // public method is available
} catch (Exception e){
    // validation failed and threw an Exception
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T00:52:57.590

通常，当您想向外界公开某些内容时，应该使用公共方法。通常，它是一种更高级别的方法，其中私有方法用于提供详细信息。私有方法可以很容易地更改，而不会影响公共方法不能影响的其他类。

考虑这个例子

```
public void run() {

  setUpGame();
  validateInput();
  doSomethingInteresting();
  endGame();
  notifyUserGameIsComplete();

} 
```

在此示例中，`run`是公共的，但其他方法都不是。这是因为公共方法的调用者只知道他们想要运行游戏，而不关心它究竟是如何工作的细节。

拥有许多私有方法是可以肯定的。方法应该是单一的，每个只做一件事。这使您可以更轻松地阅读、调试和维护代码。

如果多个方法需要共享数据，可以将它们声明为类的成员变量。这意味着它们是班级的状态。例如：

```
public class Person {
   private String name;

   public String getName() { return name; }
   public boolean nameMatches(String pattern) { // do some regex testing against the name }
} 
```

在此示例中，方法共享对 的访问权限`name`，并且`name`是人员的一部分。

如果你真的需要传递一堆参数，你可以创建一个对象来保存所有参数。因此，您可以创建一个数据传输对象，而不是传递 param1、param2、param3 等，例如

```
class MyStuff {
   private final String param1;
   private final String param2;
   private final String param3;
} 
```

现在您可以`MyStuff`方便地传递而不是列出单个参数。

希望这有助于增加一些清晰度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T00:55:41.960

外部世界看不到私有方法。您只能从同一类的方法中调用私有方法。

私有方法可用于在逻辑上将一个大方法分解为多个较小的部分（步骤）。

此外，如果您有一些代码似乎在您的类中的多个方法中重复，那么您可以使用私有方法。

如果对象也是类中的字段，则不需要将对象定义为私有方法的参数，但如果不是，则必须这样做。

# php - 如何编写 PHP/CRON 脚本以自动执行任务

> ID：12993950
> 
> 赞同：1
> 
> 时间：2012-10-21T00:42:20.767
> 
> 标签：php, sql, cron, mysqli

我在下面有一个“会话”表：

```
SessionId(Auto) SessionName  SessionDate SessionTime Duration  Active
1               AASEA        21-09-2012  09:00:00    01:00:00  1
2               SDERF        11-09-2012  10:00:00    01:00:00  1
3               DERSD        30-11-2012  12:00:00    01:30:00  1 
```

现在我想要做的是使用 CRON 能够将上面的会话设置为“活动” - 如果会话在 2012 年 10 月 21 日或更早的一周之前举行，则为 0。所以在上面的会话表中，它应该通过将“活动”更改为 0 来使前 2 行处于非活动状态。第三行不会明显改变，因为它的开始日期稍后。因此，该会话在 2013 年 10 月 21 日之前不会自动变为非活动状态。

所以我想知道我以前没有使用过 CRON，这是一项微妙的任务，因为需要对其进行测试以确保它有效，有人知道如何编写 php/CRON 脚本以便它执行以下操作：

*   将所有开始日期正好是一周或在当年 10 月 21 日之前的会话的“活动”值设置为 0？
*   它必须能够自动知道当前年份是什么
*   该程序每年 10 月 21 日进行一次

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T01:39:29.320

将此脚本写入 php 文件并直接保存在应用程序的某个位置。

```
<?php
$con = mysql_connect("localhost","root","password");
$db = mysql_select_db("your_database");

$createDate = mktime(0,0,0,10,21,date("Y"));
$selectedDate =  date('d-m-Y', ($createDate));
$sql = mysql_query("UPDATE Session SET Active = 0 WHERE DATE_FORMAT(SessionDate,'%Y-%m-%d' ) <= '".$selectedDate."'");

?> 
```

现在您需要登录到您的托管站点 - cPanel 并访问 CRON 作业。在那里你需要设置一个新的 CRON 作业。这是一个如何设置 cron 作业的教程 - [http://www.youtube.com/watch?v=0OBvGbyj15Q](http://www.youtube.com/watch?v=0OBvGbyj15Q)

只需将视频中使用的 url 替换为上面编写的脚本，它应该可以正常工作。确保替换凭据和数据库。

您可以在每年 10 月 21 日设置 cron 作业，也可以每天运行它。无论如何，我们的脚本都会验证日期，所以如果您也每天运行 cron 作业也没有问题。这不是一个昂贵的查询，因此使用的资源是最低限度的。

# python - 将 ETag / Last-Modified 装饰器与 Django 基于类的通用视图一起使用

> ID：12993951
> 
> 赞同：8
> 
> 时间：2012-10-21T00:42:28.780
> 
> 标签：python, django, http, etag

我最近将我的一个 Django 项目中的所有视图迁移到了新的基于类的视图。对于经典的基于函数的 Django 视图，`django.views.decorators.http.condition`如果存在与您指定的条件匹配的缓存副本，则可以使用一个方便的装饰器绕过整个视图处理。我在文档和源代码中到处搜索，但找不到新的基于类的视图的任何实现。

所以我的问题是：您如何建议我为基于类的视图实现条件视图处理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T01:21:50.437

看起来这个问题还没有一个很好的答案。对于只设置函数属性（例如`csrf_exempt`）的装饰器，将它们应用于视图类的`dispatch`方法就足够了，但这显然不适用于`condition`装饰器，因为它们希望第一个函数参数是请求对象而不是`self`.

您可以通过两种方式实现这一目标：

1.  将装饰器应用于生成的视图函数。通用视图功能实际上归结为一种从类构建视图函数的方式，因此延迟应用装饰器可能是一种选择。像这样的东西：

    ```
    f = ViewClass.as_view()
    f = condition(...)(f) 
    ```

    这样做的缺点是您无法从传递给`condition`装饰器的函数中访问视图类。如果您`as_view`在 urlconf 中调用该方法，也不是很方便。

2.  委托给一个简单的函数，您可以在视图的`dispatch`方法中应用装饰器。像这样的东西：

    ```
    def dispatch(self, request, *args, **kwargs):
        @condition(...)
        def _dispatch(request, *args, **kwargs):
            return super(ViewClass, self).dispatch(request, *args, **kwargs)
        return _dispatch(request, *args, **kwargs) 
    ```

    这样做的好处是您可以在应用装饰器时访问视图类实例，因此您可以将实例方法用于缓存验证功能。缺点是每次调用视图时都会运行装饰器，但这对于这个特定的装饰器来说似乎不是问题。

虽然这两种解决方案都有其问题，所以也许值得提交一个错误报告或在 django-users 邮件列表中询问如何最好地结合这两个概念。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-16T21:22:17.290

您可以使用以下内容：

```
def conditional(**kwargs):
    '''A wrapper around :func:`django.views.decorators.http.condition` that
    works for methods (i.e. class-based views).

    '''
    from django.views.decorators.http import condition
    from django.utils.decorators import method_decorator
    return method_decorator(condition(**kwargs)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T00:59:37.700

缓存是一个复杂的问题，但最近的趋势（服务器中的数据/片段缓存以及浏览器中的资产缓存）表明最好不要花时间解决缓存失效问题，而只是做在这篇文章中描述：

[http://37signals.com/svn/posts/3113-how-key-based-cache-expiration-works](http://37signals.com/svn/posts/3113-how-key-based-cache-expiration-works)

这种技术应用于 Django 的真实示例：

[http://www.rossp.org/blog/2012/feb/29/fragment-caching/](http://www.rossp.org/blog/2012/feb/29/fragment-caching/)

# ruby-on-rails - 如何为亚马逊 s3 图像添加过期标题？

> ID：12993954
> 
> 赞同：6
> 
> 时间：2012-10-21T00:43:46.347
> 
> 标签：ruby-on-rails, performance, optimization, amazon-s3, paperclip

在我的模型中，它使用回形针。我已经添加了[这](http://webonrails.com/2012/06/06/set-cache-control-expires-headers-to-the-content-served-by-s3-using-attachment_fu-or-paperclip/)行代码，但仍然无法正常工作

```
 has_attached_file :attachment, {
    :styles => {
      :medium => ["654x5000000>", :jpg],
      :small => ["260x50000000>", :jpg], 
      :thumb => ["75x75#", :jpg],
      :facebook_meta_tag =>["200x200#", :jpg] 
    },
    :convert_options => {
       :medium => "-quality 80 -interlace Plane",
       :small => "-quality 80 -interlace Plane",
       :thumb => "-quality 80 -interlace Plane",
       :facebook_meta_tag => "-quality 80 -interlace Plane" 
       },
       :s3_headers => { 'Cache-Control' => 'max-age=315576000', 'Expires' => 10.years.from_now.httpdate } 
    }.merge(PAPERCLIP_STORAGE_OPTIONS) 
```

PS：我在[GTmetrix.com](http://gtmetrix.com)上对其进行了测试，根据他们的统计数据，亚马逊图像中没有到期标题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-08T17:47:27.003

为了扩展詹姆斯对其他不确定如何重新处理旧附件的回答，有两种方法可以做到这一点：

1) 通过 rake 重新处理所有附件（每个 CLASS 可选）

```
rake paperclip:refresh CLASS=User 
```

2) 重新处理特定附件（例如通过迁移）

```
User.where("attachment IS NOT NULL").find_each do |user|
  user.attachment.reprocess!
end 
```

有关更多信息，请参阅[https://github.com/thoughtbot/paperclip/wiki/Thumbnail-Generation#generatingregenerating-your-thumbnails](https://github.com/thoughtbot/paperclip/wiki/Thumbnail-Generation#generatingregenerating-your-thumbnails)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T01:59:42.127

看起来您没有重新处理/上传旧附件，这就是它们的标题没有改变的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-07T18:15:51.587

如果有人需要使用动态过期标题获取附件的 URL，这对我有用：来自回形针文档[链接的 attachment.expiring_url(60 * 60)](https://github.com/thoughtbot/paperclip/blob/master/lib/paperclip/storage/s3.rb#L183)

# ruby - Ubuntu Bundler HTTP错误

> ID：12993955
> 
> 赞同：6
> 
> 时间：2012-10-21T00:44:02.930
> 
> 标签：ruby, gem, bundler

我正在运行 Ubuntu 12.04。当我安装 Ruby 和 gems 时，有一段时间一切正常，但是从 Bundler 的某一点开始显示错误：

```
Fetching gem metadata from http://rubygems.org/.
Error Bundler::HTTPError during request to dependency API
Fetching full source index from http://rubygems.org/ 
```

然后它会一直保持这种状态，直到时空连续体中的某个时刻。以前它以极低的速度捆绑宝石，但现在它什么都不做。

在系统管理、ping、代理等方面，我非常新手，但我尝试了我在互联网上可以找到的所有东西，使用`HTTP`代替`HTTPS`，检查我的终端是否正确解析了 URL，重新安装捆绑程序......甚至[注销和回到](https://superuser.com/questions/432416/websites-resolving-in-browser-but-not-resolving-in-cli-can-ping-ip-but-not-doma).

关于我应该如何开始调试这个问题的任何建议？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T02:58:11.620

依赖 API 的问题是因为 RubyGems 服务器的该部分当前已关闭。看看[http://status.rubygems.org/](http://status.rubygems.org/)

![来自 RubyGems 状态服务器的图像，截至 MDT 晚上 9 点](../Images/5ec9ab7da5ec4be1d6a6eb6e5316d4da.png)

# c# - Visual Studio 2012 DTE 将焦点更改为新的解决方案项

> ID：12993960
> 
> 赞同：3
> 
> 时间：2012-10-21T00:44:30.863
> 
> 标签：c#, automation, visual-studio-2012, envdte

我正在尝试自动将焦点从解决方案资源管理器中的一个 .ProjectItem 更改为另一个 .ProjectItem。我想以编程方式将焦点从一个项目更改为另一个项目，但似乎无法弄清楚如何。
这是我到目前为止所拥有的：

```
dteInstance.Solution.Projects(2).ProjectItems(3).Focus 
```

我意识到 ProjectItem 上没有 .Focus 属性，但这是我需要做的。因此，在代码中，我位于解决方案中的 ProjectItem 上，我想将焦点设置为但无法单击它或找到将焦点设置在它上面的方法。我可以读取 .Name 等项目属性。如何将焦点设置到 .ProjectItem？
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-12-09T08:56:17.727

递归查询解决方案的所有UIHierarchyItems，并找到与您的ProjectItem等效的确切UIHierarchyItem。然后调用UIHierarchyItem.Select()

```
UIHierarchyItem uiItem = SolutionHelper.FindHierarchyItem(dteInstance.Solution.Projects(2).ProjectItems(3));
uiItem?.Select(vsUISelectionType.vsUISelectionTypeSelect); 
```

```
 private static readonly EnvDTE80.DTE2 _applicationObject = 
(EnvDTE80.DTE2)ServiceProvider.GlobalProvider.GetService(typeof(Microsoft.VisualStudio.Shell.Interop.SDTE));

        public static UIHierarchy SolutionExplorerNode
        {
            get
            {
                return _applicationObject.ToolWindows.SolutionExplorer;
            }
        }

        public static UIHierarchyItem FindHierarchyItem(object item)
        {
            ThreadHelper.ThrowIfNotOnUIThread();
            UIHierarchyItems items = SolutionExplorerNode.UIHierarchyItems.Item(1).UIHierarchyItems;
            Stack s = new Stack();
            CreateItemsStack(s, item);

            UIHierarchyItem last = null;
            while (s.Count != 0)
            {
                object o = s.Pop();

                last = null;
                foreach (UIHierarchyItem child in items)
                {
                    if (child.Object == o)
                    {
                        last = child;
                        items = child.UIHierarchyItems;
                        break;
                    }
                }
            }

            return last;
        }

        private static void CreateItemsStack(Stack s, object item)
        {
            ThreadHelper.ThrowIfNotOnUIThread();
            if (item is ProjectItem)
            {
                ProjectItem pi = (ProjectItem)item;
                s.Push(pi);
                CreateItemsStack(s, pi.Collection.Parent);
            }
            else if (item is Project)
            {
                Project p = (Project)item;
                s.Push(p);
                if (p.ParentProjectItem != null)
                {
                    CreateItemsStack(s, p.ParentProjectItem);
                }
            }
        } 
```

# c# - 设置私有字段的值

> ID：12993962
> 
> 赞同：44
> 
> 时间：2012-10-21T00:44:32.503
> 
> 标签：c#, reflection

为什么以下代码不起作用：

```
class Program
{
    static void Main ( string[ ] args )
    {
        SomeClass s = new SomeClass( );

        s.GetType( ).GetField( "id" , System.Reflection.BindingFlags.NonPublic ) // sorry reasently updated to GetField from GetProperty...
            .SetValue( s , "new value" );
    }
}

class SomeClass
{
    object id;

    public object Id 
    {
        get
        {
            return id;
        }
    }   
} 
```

我正在尝试设置私有字段的值。

* * *

这是我得到的例外：

```
 System.NullReferenceException was unhandled   Message=Object reference not set to an instance of an object.   Source=ConsoleApplication7
 StackTrace:
        at Program.Main(String[] args) in C:\Users\Antonio\Desktop\ConsoleApplication7\ConsoleApplication7\Program.cs:line 18
        at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
        at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
        at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
        at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
        at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
        at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
        at System.Threading.ThreadHelper.ThreadStart()   InnerException: 
```

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-10-21T00:57:42.853

试试这个（灵感来自[Find a private field with Reflection?](https://stackoverflow.com/questions/95910/find-a-private-field-with-reflection)）：

```
var prop = s.GetType().GetField("id", System.Reflection.BindingFlags.NonPublic
    | System.Reflection.BindingFlags.Instance);
prop.SetValue(s, "new value"); 
```

我的更改是使用该`GetField`方法 - 您正在访问一个字段而不是一个属性，并且访问或`NonPublic`使用`Instance`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T00:57:30.793

显然，添加`BindingFlags.Instance`似乎已经解决了它：

```
> class SomeClass
  {
      object id;

      public object Id
      {
          get
          {
              return id;
          }
      }
  }
> var t = typeof(SomeClass)
      ;
> t
[Submission#1+SomeClass]
> t.GetField("id")
null
> t.GetField("id", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);
> t.GetField("id", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance)
[System.Object id]
> 
```

# jquery - Rails Autocomplete Jquery (crowdint)：选择 .uniq 不在范围内工作，避免重复

> ID：12993965
> 
> 赞同：3
> 
> 时间：2012-10-21T00:45:23.807
> 
> 标签：jquery, ruby-on-rails, autocomplete, duplicate-removal

公司可以通过查找我已经拥有的条目来自动完成。使用[https://github.com/crowdint/rails3-jquery-autocomplete](https://github.com/crowdint/rails3-jquery-autocomplete) gem，我添加了

```
autocomplete :company, :name, :scopes => [:distinct] 
```

到我的控制器，在我的模型中，我有：

```
scope :distinct, lambda { select("companies.name").uniq } 
```

使用术语“Merce”，我的系统仍会返回 Mercedes Benz 的所有 5 个条目。SQL：

```
35mCompany Load (4.0ms)[0m  SELECT DISTINCT companies.name, companies.id FROM "companies" WHERE (LOWER(companies.name) ILIKE 'merce%') ORDER BY companies.name ASC LIMIT 10 
```

我尝试过的各种事情：

```
select(:name).uniq  => Not unique values
distinct("companies.name") => Wrong number of arguments
group(:id, :name) => Not unique values
group(:id, :name).uniq  => Not unique values 
```

但是，在控制器中使用 select 语句（没有自动完成）可以：

```
@companies = Company.select(:name).uniq => Perfect results 
```

寻找有关如何在此 gem 中进行正确查询的解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T13:39:50.417

该 gem 生成的查询：

```
Company Load (4.0ms)  SELECT DISTINCT companies.name, companies.id FROM "companies" WHERE (LOWER(companies.name) ILIKE 'merce%') ORDER BY companies.name ASC LIMIT 10 
```

将始终包括表主 ID 加上将自动完成的字段的名称，答案在[此方法的第 36 和 37 行](https://github.com/crowdint/rails3-jquery-autocomplete/blob/master/lib/rails3-jquery-autocomplete/orm/active_record.rb#L36)：

```
def get_autocomplete_select_clause(model, method, options)
  table_name = model.table_name
  (["#{table_name}.#{model.primary_key}", "#{table_name}.#{method}"] + (options[:extra_data].blank? ? [] : options[:extra_data]))
end 
```

该查询结果已经是唯一的（它使用不同的名称 + id）。我可以想到两种可能的方法来解决这个问题：

1.  创建一个带有子查询的查询，想法是创建一个返回唯一结果的第一个查询，然后将其与表 id 进行外部连接，并将返回具有其 id 的唯一名称。

2.  在您的控制器中重新定义检索结果的操作，以便它执行您想要的任何操作。实际上，这个 gem 的作用是使用元编程将 autocomplete_model_attribute 操作添加到您的控制器（[参见源代码](https://github.com/crowdint/rails3-jquery-autocomplete/blob/master/lib/rails3-jquery-autocomplete/autocomplete.rb#L45)）。

希望这有助于让我知道这是否有帮助。如果您需要更多详细信息，请告诉我。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T13:25:55.983

正如上面的 Chischaschos 已经说过的，重新定义控制器动作是最好的方法。因为我在 Heroku 上使用 PostgreSQL，所以我需要走一条由 Thuss (Thodd Huss) 开发的更复杂的路线：

> 当我想要超出当前插件功能的自定义自动完成（例如选择不同的实体）时，我在控制器上实现了我自己的自动完成方法。这只是替换了您通常放入控制器中的“自动完成：组织，：城市”调用。例如，要自动完成“不同”的城市，我这样做：

```
def autocomplete_organization_city
 term = params[:term]
 if term && !term.empty?
  items = Organization.select("distinct city").
      where("LOWER(city) like ?", term.downcase + '%').
      limit(10).order(:city)
 else
 items = {}
 end
render :json => json_for_autocomplete(items, :city)
end 
```

SQLite 上还有一个针对用户的更短的解决方案，它要短得多。在这里找到原始线程： [https ://github.com/crowdint/rails3-jquery-autocomplete/issues/25](https://github.com/crowdint/rails3-jquery-autocomplete/issues/25)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-05T09:56:43.220

更好的方法：

```
 # model
  scope :distinct_on_name, lambda {
      select('DISTINCT ON (models.name) models.name, models.id')
  }
  # controller
  autocomplete :model, :name, scopes: [:distinct_on_name] 
```

# c++ - 此 C++ 程序中的错误

> ID：12993966
> 
> 赞同：0
> 
> 时间：2012-10-21T00:45:44.097
> 
> 标签：c++

当我运行这个程序时，我得到下面提到的错误 `s<<"\""<<string<<"\""`：

```
#include <string>
#include <iostream>
#include <sstream>
#include <cstdlib>

using namespace std;
string str="abc";
stringstream s;
s<<"\""<<string<<"\"";
cout<<(s.str().c_str()); 
```

错误：由于 -Wfatal-errors 导致 '<<' 标记编译终止之前的预期构造函数、析构函数或类型转换。

[http://codepad.org/KuyMQg3x](http://codepad.org/KuyMQg3x)，这里是有错误的在线代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T00:55:27.303

```
#include <string>
#include <iostream>
#include <sstream>

int main() {
    using namespace std;
    string str="abc";
    stringstream s;
    s<<"\""<<str<<"\"";
    std::cout<<(s.str().c_str());

} 
```

正如评论中建议的将字符串更改为 str 工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T00:54:32.753

您正在尝试在顶层而不是在函数内部执行代码。这是你的程序应该是这样的：

```
#include <string>
#include <iostream>
#include <sstream>
#include <cstdlib>

using namespace std;

int main() {
    string str="abc";
    stringstream s;
    s<<"\""<<str<<"\"";
    cout<<(s.str().c_str());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T00:54:50.227

您似乎缺少主要功能。尝试这个：

```
#include <string>
#include <iostream>
#include <sstream>
#include <cstdlib>

using namespace std;

int main() {
    string str="abc";
    stringstream s;
    s<<"\""<<str<<"\"";
    cout<<(s.str().c_str());
} 
```

运行时需要运行一个函数来启动您的`C++`程序，它将始终运行`int main()`（或`int main(int argc, char* argv)`）

# android - 从android中的内部对话框取消第一个对话框

> ID：12993967
> 
> 赞同：0
> 
> 时间：2012-10-21T00:46:00.457
> 
> 标签：android, android-alertdialog

我创建了一个包含列表视图的对话框。列表视图对话框的 onclicklistener 然后加载一个新的内部对话框，要求用户确认他们的选择。

完成后，我想关闭外部和内部对话框。我能够关闭内部对话框没有问题，但我正在努力寻找一种方法来关闭包含内部列表视图的外部对话框。

我的代码摘录如下：

```
// Display list of sites
                    AlertDialog.Builder builder = new AlertDialog.Builder(
                            this);
                    builder.setTitle("Sites Near Me");

                    ListView modeList = new ListView(this);
                    ArrayList<String> stringArrayList = new ArrayList<String>();

                    for (int i = 0; i < possibleLocaitons.size(); i++) {
                        String currentLocation = possibleLocaitons.get(i)
                                .getName();
                        stringArrayList.add(currentLocation);
                    }

                    ArrayAdapter<String> modeAdapter = new ArrayAdapter<String>(
                            this, android.R.layout.simple_list_item_1,
                            android.R.id.text1, stringArrayList);
                    modeList.setAdapter(modeAdapter);

                    // List click listener
                    modeList.setOnItemClickListener(new OnItemClickListener() {
                        public void onItemClick(AdapterView<?> parent,
                                View view, int pos, long id) {

                            String site = parent.getItemAtPosition(pos)
                                    .toString();

                            AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                                    LocationActivity.this);

                            // set title
                            alertDialogBuilder.setTitle("");

                            // set dialog message
                            alertDialogBuilder
                                    .setMessage("Check in at " + site + "?")
                                    .setCancelable(false)
                                    .setPositiveButton(
                                            "Yes",
                                            new DialogInterface.OnClickListener() {
                                                public void onClick(
                                                        DialogInterface dialog,
                                                        int id) {
                                                    // Update the database
                                                    UserFunctions us = new UserFunctions();
                                                    us.updateLocation(
                                                            "fish", "888");
                                                    dialog.cancel();

                                                }
                                            })
                                    .setNegativeButton(
                                            "Cancel",
                                            new DialogInterface.OnClickListener() {
                                                public void onClick(
                                                        DialogInterface dialog,
                                                        int id) {
                                                    dialog.cancel();
                                                }
                                            });

                            // create alert dialog
                            AlertDialog alertDialog = alertDialogBuilder
                                    .create();

                            // show it
                            alertDialog.show();
                        }

                    });

                    builder.setView(modeList);
                    final Dialog dialog = builder.create();

                    dialog.show();

                } 
```

非常感谢任何帮助。

编辑：

这是我想要实现的截图：

[http://dl.dropbox.com/u/57441159/Screenshot_2012-10-21-10-13-21.png](http://dl.dropbox.com/u/57441159/Screenshot_2012-10-21-10-13-21.png)

单击“是”时，我想取消“我附近的站点”和“签到”对话框，返回到后台的地图活动。目前它只取消“签到”然后返回到“我附近的站点”。我希望这更清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:30:39.280

您无法从 alertDialogBu​​ilder 的匿名 onClick() 访问这段代码，因为它是前向引用的

```
 final Dialog dialog = builder.create();
 dialog.show(); 
```

将其移至`builder.setTitle("Sites Near Me");`. 继续使用 activity.runOnUiThread() 从 UI 线程关闭对话框。

# java - 当我在 Java 中隐藏 JButton 边框时，为什么我的文本会消失？

> ID：12993968
> 
> 赞同：1
> 
> 时间：2012-10-21T00:46:05.980
> 
> 标签：java, macos, text, border, jbutton

我正在为一个圆形轨道制作一个 GUI，让两个角色在其中移动。我使用按钮数组构建了它，但是一旦我设置：

```
trackButtons[i].setBorderPainted(false); 
```

无论我将其设置为什么大小，文本都会消失。注释掉该行允许文本再次显示，但显然边框出现并且按钮再次显示为按钮。有没有办法隐藏按钮的边框但允许出现文本？

主.java：

```
import javax.swing.JFrame;
public class main
{
    public static void main(String[] args)
    {
        UserFrame myFrame = new UserFrame();
        myFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        myFrame.setSize(600,460);
        myFrame.setVisible(true);
        myFrame.setResizable(false);
    }//End of main
}//End of class main 
```

用户框架.java：

```
import javax.swing.*;
import java.awt.BorderLayout;           //Needed for Border Layout
import java.awt.Container;
import java.awt.Dimension;
import java.awt.Insets;
import java.awt.Color;                  //Needed for BLING!
import java.awt.Font;
import java.awt.Dimension;              //Needed for Button Dimensions

public class UserFrame extends JFrame
{
    //Variables
    private JLabel messageBox;

    //Layouts
    private JPanel northPanel;
    private JPanel eastPanel;
    private JPanel southPanel;
    private JPanel westPanel;
    private JPanel controlPanel;    //Contains all buttons and what not.

    // Board Pieces Grid
    private JButton[] trackButtons; //Ring of buttons forming track.

    //Game Functions
    private GameFunc gameFunctions;

    //Constructor
    public UserFrame()
    {
        //Construct GUI
        super("Tortoise and Hare Race");
        setLayout(new BorderLayout());

        //Variables
        Color myGreen = new Color(70, 190, 102);
        Font myFont = new Font("Arial", Font.PLAIN, 8);

        //Set size of Button Array
        trackButtons = new JButton[100];
        northPanel = new JPanel();
        eastPanel = new JPanel();
        southPanel = new JPanel();
        westPanel = new JPanel();

        //Set Layout
        northPanel.setLayout(new BoxLayout(northPanel, BoxLayout.LINE_AXIS));
        eastPanel.setLayout(new BoxLayout(eastPanel, BoxLayout.PAGE_AXIS));
        southPanel.setLayout(new BoxLayout(southPanel, BoxLayout.LINE_AXIS));
        westPanel.setLayout(new BoxLayout(westPanel, BoxLayout.PAGE_AXIS));

        for(int i=0; i<50; i++)
        {
            trackButtons[i] = new JButton();
            trackButtons[i].setMinimumSize(new Dimension(20, 20));
            trackButtons[i].setPreferredSize(new Dimension(20, 20));
            trackButtons[i].setMaximumSize(new Dimension(20, 20));
            trackButtons[i].setSize(20,20);
            trackButtons[i].setMargin(new Insets(0,0,0,0));
            trackButtons[i].setBackground(myGreen);
            trackButtons[i].setOpaque(true);
            trackButtons[i].setBorderPainted(false);
            trackButtons[i].setFont(myFont);
            //DEBUG
            trackButtons[i].setText(""+i);
            if(i<30)
                northPanel.add(trackButtons[i]);
            else if(i<50)
                eastPanel.add(trackButtons[i]);
        }

        //Flip count for south and west panel to maintain order!
        for(int i=99; i>=50; i--)
        {
            trackButtons[i] = new JButton();
            trackButtons[i].setMinimumSize(new Dimension(20, 20));
            trackButtons[i].setPreferredSize(new Dimension(20, 20));
            trackButtons[i].setMaximumSize(new Dimension(20, 20));
            trackButtons[i].setMargin(new Insets(0,0,0,0));
            trackButtons[i].setBackground(myGreen);
            trackButtons[i].setOpaque(true);
            trackButtons[i].setBorderPainted(false);
            trackButtons[i].setFont(myFont);
            //DEBUG
            trackButtons[i].setText(""+i);
            if(i>=80)
                westPanel.add(trackButtons[i]);
            else if(i>=50)
                southPanel.add(trackButtons[i]);
        }

        //Add Panels to respective locations
        add(BorderLayout.NORTH, northPanel);
        add(BorderLayout.EAST, eastPanel);
        add(BorderLayout.SOUTH, southPanel);
        add(BorderLayout.WEST, westPanel);
    }//End of constructor method
}//End of userFrame class 
```

提前致谢！

**编辑：**我在 Mac 上，可能是 Java 正在做一些特定于操作系统的时髦的事情吗？这是一个[屏幕截图](http://i.imgur.com/sndJa.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T02:14:46.703

我在 mac 上玩了一段时间，看到了和你看到的完全相同的问题。

Swing 很敏感——在 PC 上这一切都很好（虽然按钮大小有点不对）。

我确实让它工作了——有点。尝试使用 JLabel 而不是 JButton（唯一的其他更改是注释掉对 setMargin 的调用并将 Horizo​​ntalTextAlignment 设置为 CENTER。

我仍然说，一般来说，当对摇摆进行故障排除时，首先要做的总是确保它在正确的线程中，但它很少有帮助——只是有一次它确实有帮助，它会解决最奇怪的问题。 .

# iphone - 制作单元格时的分组表问题

> ID：12993972
> 
> 赞同：1
> 
> 时间：2012-10-21T00:46:43.223
> 
> 标签：iphone, ios

这简直要把我逼疯了。我正在尝试制作一个简单的分组表，每当我运行它时，我都会收到此错误：

```
-[__NSCFConstantString objectAtIndex:]: unrecognized selector sent to instance 0x489c 
```

这是抛出该行的代码（我将确切的行放在星号中）：

```
-(UITableViewCell *)tableView:(UITableView *)tableView
    cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *newSpecCell = @"newSpecCell";
NSUInteger section = [indexPath section];
NSUInteger row = [indexPath row];
NSString *key = [segmentArray objectAtIndex:section];
NSArray *names = [specsDictionary objectForKey:key];
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:newSpecCell];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                  reuseIdentifier:newSpecCell];
}

cell.textLabel.text = [names objectAtIndex:row]; // <---
return cell; 
```

}

根据我的逻辑，我要求`objectAtIndex`从数组中获取，但错误说我将其发送到常量字符串。

我已经尝试了一些东西（比如创建一个字符串，`[names objectAtIndex:row]`但它似乎没有任何区别。另外，如果我使用 NSLog 显示其中的值，`names`它会正确显示它们，所以我知道数组包含我需要的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T01:46:41.357

数组被错误填充的简单问题。感谢Maddy，我很快就明白了。

```
-(UITableViewCell *)tableView:(UITableView *)tableView
cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *newSpecCell = @"newSpecCell";
 NSUInteger section = [indexPath section];
 // NSUInteger row = [indexPath row];
 NSString *key = [segmentArray objectAtIndex:section];
 // NSArray *names = [specsDictionary objectForKey:key];
 NSString *values = [specsDictionary objectForKey:key]; //<--
 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:newSpecCell];
 if (cell == nil) {
     cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                              reuseIdentifier:newSpecCell];
}

cell.textLabel.text = values; //<--
return cell;
} 
```

我只是删除了注释行并修改了 cell.textlabel.text，如图所示，一切都很好！

# c++ - 用于在两个函数之间进行选择的函子

> ID：12993973
> 
> 赞同：2
> 
> 时间：2012-10-21T00:46:43.600
> 
> 标签：c++, function-pointers, functor

谷歌搜索 C++ 仿函数语法会带来很多不同的结果，我认为我看不出它们中的任何一个需要什么。有些使用模板，有些使用单个类，有些使用多个，还有一些使用结构。我永远不确定我想做的事情需要哪些特定元素。所以现在，我想做的是：

我有两个功能。它们都采用完全相同的参数，但名称不同，将返回不同的结果，尽管返回类型也相同，例如，

`unsigned foo1(char *start, char *end);`
`unsigned foo2(char *start, char *end);`

我只想根据布尔变量的值选择要调用的函数。我可以写一个谓词在两者之间进行选择，但这似乎不是一个优雅的解决方案。如果这是 C，我会使用一个简单的函数指针，但我被告知它们在 C++ 中不能很好地工作。

编辑：由于我无法控制的限制，在这种情况下，我不能使用 C++11。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T00:48:02.240

只需使用`std::function`：

```
std::function<unsigned int(char*, char*)> func = condition ? foo1 : foo2;
//            ^^^^^^^^^^^^^^^^^^^^^^^^^^ function signature

// ...

unsigned int result = func(start, end); 
```

此外，函数指针在 C++ 中也能正常工作：

```
auto func = condition ? foo1 : foo2;

unsigned int result = func(start, end); 
```

但`std::function`更灵活。

# functional-programming - 纯函数式编程：如何将元素添加到列表中？

> ID：12993979
> 
> 赞同：0
> 
> 时间：2012-10-21T00:47:58.643
> 
> 标签：functional-programming

在纯函数式编程中，我们不修改函数的任何参数。那么，我们如何设计一个函数来添加一个元素到它的参数，一个列表呢？例如，`function list add (elem, list)`。这个问题类似于这个线程：[函数式编程：状态与重新分配](https://stackoverflow.com/questions/353912/functional-programming-state-vs-reassignment/355040#355040)。

我猜测的解决方案是**深度复制**输入列表，然后使用一些破坏性操作`append`，例如操作新列表。我对吗？

**附加**

我从图形复制算法中复制以下代码：

```
// in Node
public Node deepCopy(Map<Node, Node> isomorphism) {
    Node copy = isomorphism.get(this);
    if (copy == null) {
        copy = new Node();
        isomorphism.put(this, copy);
        for (Node connection: connections) {
            copy.connections.add(connection.deepCopy(isomorphism));
        }
    }
    return copy;
} 
```

要对图进行深度复制，必须跟踪正在复制的每个节点。在宇宙中，我们使用`isomorphism`论据来做到这一点。我认为制作此`deepCopy`操作的纯函数版本的唯一方法是不仅返回变量`copy`，还返回一个标志，指示返回的节点是否为新节点。正确的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T00:58:23.207

是的，您必须返回一个添加了元素的新列表。

但是，这不一定需要深拷贝。函数式语言通常具有[持久数据结构](http://en.wikipedia.org/wiki/Persistent_data_structure)，允许在版本之间共享部分结构，因此您可以在 O(1) 时间内将元素添加到列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T00:51:12.097

您将编写一个函数来构建一个新列表（在这种情况下，一个将新元素添加到旧列表中的列表）并返回它。

# ruby-on-rails - AutoSmusher 为亚马逊 S3 优化图像？

> ID：12993982
> 
> 赞同：4
> 
> 时间：2012-10-21T00:48:31.057
> 
> 标签：ruby-on-rails, image, optimization, amazon-s3, paperclip

任何带有回形针的 ruby​​ 实现来 autosmush amazon s3 图像？

PS：我用谷歌搜索并得到了这个：[https](https://github.com/grosser/smusher) ://github.com/grosser/smusher并且在我的本地机器上运行得很好。但是要在亚马逊 s3 上使用这样的东西。有一个自动化的过程来处理这个问题，并且只是抹杀新创建的内容，这将是一件很棒的事情。有任何想法吗？

我正在使用的代码优化用户上传的图像。

```
has_attached_file :attachment, {
    :styles => {
      :medium => ["654x5000000>", :jpg],
      :small => ["260x50000000>", :jpg], 
      :thumb => ["75x75#", :jpg],
      :facebook_meta_tag =>["200x200#", :jpg] 
    },
    :convert_options => {
       :medium => "-quality 80 -interlace Plane",
       :small => "-quality 80 -interlace Plane",
       :thumb => "-quality 80 -interlace Plane",
       :facebook_meta_tag => "-quality 80 -interlace Plane" 
       },
       :s3_headers => { 'Cache-Control' => 'max-age=315576000', 'Expires' => 10.years.from_now.httpdate } 
    }.merge(PAPERCLIP_STORAGE_OPTIONS) 
```

但是可以优化静止图像。我得到了 gem smusher，但对如何使用它感到困惑。根据 GTmetrics，我当前的页面排名在这里。

![在此处输入图像描述](../Images/ca31c95be245bbea123dbb55617f3262.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T19:52:41.160

我也一直在研究使用 Rails 进行无损图像压缩，到目前为止，我认为我发现的最好的宝石就是[这里](https://github.com/dakick/paperclip-compression)。gem 的说明说要添加一个`:processors`选项，该选项会传递一个包含多个处理选项的哈希，例如`:compression`，这个 gem 定义的。它还需要安装 jpgtran 和 optipng，我不确定 Amazon S3 是否有。

# java - GWT 编辑器和 GAE 数据存储

> ID：12993983
> 
> 赞同：7
> 
> 时间：2012-10-21T00:48:52.747
> 
> 标签：java, google-app-engine, gwt, google-cloud-datastore, jdo

GWT 有一个[Editor Framework](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiEditors)，粗略检查后，它看起来很像 Spring MVC/Forms 处理后端数据对象和前端 UI 组件之间的数据绑定的方式。

我正在编写我的第一个 GWT/GAE 应用程序，想知道是否有任何方法可以将此编辑器框架**与**GAE 的 JDO/Atomic 库结合使用，这是您针对应用程序和底层数据存储之间的 O/R 映射编写的 API .

这两个框架是互补的还是相互排斥的？如果他们可以一起工作，有人可以提供一个小代码示例，说明我如何使用它们来填充，比如说，一个`<select>`带有名称列表的 HTML 框，或者其他基本但实用的东西。

我想这可能涉及一个`Person`代表一个人（并拥有一个属性）的 POJO `String name`，也许某种`PersonDAO`使用 JDO/Atomic 到`Person`数据存储区的 CRUD 实例，然后某种`Editor<Person>`可以将`Person`实例映射到 frontend `<select>`s。

如果我能看到一个可行的例子，我想这一切都会为我而存在。而且，如果这些是相互排斥的并且不能一起使用，那么将*非常*感谢您对原因的可靠解释！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:52:19.277

我希望这会有所帮助，这是一些将数据存储在 GAE 数据存储中的示例代码，一个用于获取数据并使用内容填充 GWT 下拉列表的简单查询。

这是一个持久保存到应用引擎数据存储的 JDO ORM：

[https://github.com/bsautner/com.nimbits/blob/master/nimbits-tds/src/com/nimbits/server/orm/EntityStore.java](https://github.com/bsautner/com.nimbits/blob/master/nimbits-tds/src/com/nimbits/server/orm/EntityStore.java)

这是查询数据存储以获取对象列表的示例

```
@Override
    public List<Entity> getEntityByName(final User user, final String name) 
{
        final PersistenceManager pm = pmf.getPersistenceManager();

        try {
            final Query q1 = pm.newQuery(EntityStore.Class);
            final List<Entity> c;

                q1.setFilter("name==b");
                q1.declareParameters("String b");
                q1.setRange(0, 1);
                c = (List<Entity>) q1.execute(name);

            if (c.isEmpty()) {
                return Collections.emptyList();
            } else {

                final Entity result = c.get(0);
                return createModel(user, result);

            }

        } finally {
            pm.close();
        }
    } 
```

这是一个基于 GWT (GXT) 的组合框，其中填充了从 ORM 模型创建的 POJO

[https://github.com/bsautner/com.nimbits/blob/master/nimbits-tds/src/com/nimbits/client/ui/controls/EntityCombo.java](https://github.com/bsautner/com.nimbits/blob/master/nimbits-tds/src/com/nimbits/client/ui/controls/EntityCombo.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T21:33:30.637

在 IE6 和 HTML4 时代，没有办法编写像 GMail 一样酷的 Web 应用程序。这就是引入 GWT 并实现目标的原因：GMail 能够在任何浏览器中工作。

在我们这个时代，GWT 似乎失去了领导地位。jQuery 变得越来越流行，因为它使用硬件加速并且运行速度更快……但是现在忘记 GWT 还为时过早。

如果你想使用 Editor 框架和 JDO，那么我们需要强调它们之间存在一个瓶颈：GWT RPC。RPC 每次都对 POJO 进行序列化和反序列化，而自定义这种序列化/反序列化的方法非常有限。

GWT RPC 的这个缺点迫使大多数开发人员维护两个相同的 POJO 层次结构：一个用于 JDO/Hibernate，第二个用于 GWT。通常老板会批准这个解决方案，因为它比绕过每个 RPC 调用来使其工作更快、更容易。在我见过的大多数现实世界项目中，有两个层次结构......

另一方面，jQuery 根本不需要定义任何 POJO。显然这是发展速度不同的一个原因。

很抱歉，我没有提供任何答案。我希望我的想法是有用的，即使它只是说你在死胡同里。而且我已经多次看到经验丰富的建筑师决定使用 GWT 并且也进入了这条死胡同。现在他们通过花费时间和金钱编写两个相同的 POJO 层次结构来为这个错误付出代价。

# php - 获取两个括号之间的文本，包括嵌套括号

> ID：12993984
> 
> 赞同：2
> 
> 时间：2012-10-21T00:49:17.880
> 
> 标签：php

我想在这样的文本中插入 () 并将它们放在一个数组中，但里面可能有一些嵌套的括号。

文本：

```
(This (is) a example) (on what i want) 
```

应该这样处理：

```
$array["this (is) a example"] = "on what i want"; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T01:00:01.183

```
$s = '(This (is) a example) (on what i want)';

unset($matches);
preg_match_all('/^\\((.*)\\)[ \\t]+\\((.*)\\)$/', $s, $matches);
$array[$matches[1][0]] = $matches[2][0];

var_dump($array); 
```

这是可能的，因为它`.*`是*贪婪*的，它会尝试匹配括号之间最长的字符串，同时仍然确保整个模式匹配。

# javascript - Javascript 客户端身份验证（使用 SSL，没有 OAuth2）？

> ID：12993986
> 
> 赞同：0
> 
> 时间：2012-10-21T00:49:38.670
> 
> 标签：javascript, security, api, encryption, ssl

场景是：

我有一个 Web API，两个客户端正在访问它：

*   用 Javascript 编写的 Web 应用程序，已缩小
*   iOS 应用

SSL 全部设置在托管 API 的服务器上，并且运行良好。API 没有用户身份验证，因为它是一种基于位置的搜索应用程序。

我想确保只有 Web 应用程序和 iPhone 客户端才能真正向 API 发出请求。对于 iPhone 客户端来说，这很容易——服务器和应用程序之间共享秘密就可以了，而且它使用 SSL 加密，所以我们不担心有人在监视它。

但是对于网络应用程序，相同的解决方案将不起作用。我不能只在代码中留下一个字符串，即使它在那里被加密，这也是有人需要的。

基本上，我正在寻找解决这个问题的好方法。我只是想确保它只保留给允许使用它的客户，但我不确定如果不去实施 OAuth 我怎么能这样做，我认为这可能是矫枉过正。有任何想法吗？

谢谢！担

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T14:17:37.323

这是不可能的。即使有oauth。即使假设您的 iOS 应用程序是安全的，也是错误的：它可以被反编译。任何在客户端上运行的代码都可以被篡改，并且不能相信他所说的那个人。

唯一的问题是：您提供的 API 是否足够有价值，以及有人想通过多少麻烦来破解它。以及你想为想要破解它的人制作它有多难。

iOS 版本确实比 javascript 版本更安全。在 webapp 中，您可以混淆您的代码以使其更难被破解。您可以（如果您不打算在 iOS 上使用它）使用 java 或 flash 进一步隐藏您的签名代码（HMAC 对您的请求进行签名，不要只与他们发送共享密钥。您可能认为 SSL 是安全的，但是在 URL 被加密之前还有片刻......）。

“大佬”的处理方式是：

*   无论您构建什么，都假设有人能够破解它（例如：将您的 API 用于您预期之外的其他目的）。
*   想想这到底有多糟糕（注意：他们将无法在此基础上开展业务；这将太容易受到诉讼）。如果独狼使用你的 API，真的是世界末日吗？
*   如果您确实关心孤狼，那就让它变得尽可能困难（但老实说，从孤狼那里损失一些钱不是比花 2 个开发者月的时间更便宜吗？）
*   如果有人对侵入您的 API 产生了浓厚的兴趣，请尝试与黑客达成谅解（例如，我喜欢 Spotify 对 depotify 的反应方式。基本上他们说“嘿，如果你不发布任何使它真正的东西很容易窃取我们的音乐或规避我们的商业模式，我们不会太努力地阻止你”）

# javascript - 如何在 jQuery .load() 函数上使用 .append

> ID：12993988
> 
> 赞同：0
> 
> 时间：2012-10-21T00:50:51.620
> 
> 标签：javascript, jquery

我正在尝试附加被调用的数据而不是替换它，但我不确定为什么 .append 不起作用。

```
 $('.incoming3').load('t3.html #test3').append; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T00:55:20.733

首先[`.append()`](http://api.jquery.com/append/)是一个函数——你需要在它之后使用括号，并提供一个参数告诉它要附加什么。其次，你不能仅仅[`.load()`](http://api.jquery.com/load/)通过链接`.append()`到它的末端来改变工作方式。

试试这个：

```
$.get("t3.html", function(data) {
    $('.incoming3').append($(data).filter("#test3"));
}); 
```

也就是说，使用该[`$.get()`方法](http://api.jquery.com/jquery.get/)检索数据，将数据包装在一个 jQuery 对象中，并使用该[`.filter()`方法](http://api.jquery.com/filter/)提取您需要的位，并将该位附加到您的元素中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T00:55:32.910

```
$('.incoming3').append($('<div>').load('t3.html #test3')); 
```

或者

```
$.get('t3.html', function(data) {
    $('.incoming3').append($(data).find('#test3'));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T00:57:38.840

`load()`设计方法替换了选择器的 html。您将需要创建自己的过滤 AJX 方法。

```
$.get( 't3.html', function(response){
   var contentDesired=$(response).find( '#test3')/* or filter instead of find if no body tag wrapping html*/
   $('.incoming3').append( contentDesired)

}) 
```

这与我在上一个问题中针对相同问题在相同情况下为您提供的一个解决方案几乎相同

# android - 带有两个按钮“取消”和“打开链接活动”的警报对话框出现问题

> ID：12993992
> 
> 赞同：2
> 
> 时间：2012-10-21T00:51:20.387
> 
> 标签：android, android-intent, dialog, android-dialog

我使用一个*Alert*类，在其中定义所有警报对话框以向用户显示状态消息。这是因为管理起来更舒服。

此类中定义的典型对话框是

```
public static void DataCleared(Context con) {
    AlertDialog.Builder builder = new AlertDialog.Builder(con);
    builder.setTitle(R.string.data_cleared_title);
    builder.setIcon(android.R.drawable.ic_dialog_info);
    DialogListner listner = new DialogListner();
    builder.setMessage(R.string.data_cleared_text);
    builder.setPositiveButton("ok", listner);

    AlertDialog diag = builder.create();
    diag.show();
} 
```

此对话框有一个确定按钮，单击该按钮可关闭对话框。

我在简单调用的任何活动中显示这些对话框

```
Alerts.DataCleared(MyActivity.this) 
```

现在，以同样的方式，我想创建一个带有两个按钮的对话框，一个*取消*按钮关闭对话框，一个*市场*按钮打开另一个 Google Play 应用程序的链接

我试过了

```
public static void TryThisApp(Context con) {
    AlertDialog.Builder builder = new AlertDialog.Builder(con);
    builder.setTitle(R.string.my_title);
    builder.setIcon(android.R.drawable.ic_dialog_info);
    builder.setMessage(R.string.my_text)
       .setCancelable(false)
       .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int id) {
               Intent marketIntent = new Intent(
                        Intent.ACTION_VIEW,
                        Uri.parse("market://details?id=com.myapp.sample"
                                + getPackageName()));
                startActivity(marketIntent);
           }
       })
       .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int id) {
                dialog.cancel();
           }
       });
    AlertDialog diag = builder.create();
    diag.show();
} 
```

但不起作用，出现各种编译错误“无法对非静态方法进行静态引用...”

`getPackageName()`并由`startActivity(marketIntent);`Eclipse 用红色下划线显示，并带有此消息

我该如何解决这个问题？如何创建带有打开链接和取消按钮的对话框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T01:54:05.927

1）您必须在 Context 上调用`getPackageName()`and`startActivity()`因为是实例方法，

2) 如果您想从另一个类执行此操作，则必须声明`Context con`为 final，因为安全策略不允许在以不同方法定义的内部类中引用非 final 变量。

3）（不是必须的）你应该反转按钮，通常*取消*在左边，*确认*在右边

这是正确的代码：

```
public static void TryThisApp(final Context con) {
    AlertDialog.Builder builder = new AlertDialog.Builder(con);
    builder.setTitle(R.string.my_title);
    builder.setIcon(android.R.drawable.ic_dialog_info);
    builder.setMessage(R.string.my_text)
       .setCancelable(false)
       .setPositiveButton("Cancel", new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int id) {
 dialog.cancel();

           }
       })
       .setNegativeButton("Market", new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int id) {
               Intent marketIntent = new Intent(
                        Intent.ACTION_VIEW,
                        Uri.parse("market://details?id=com.myapp.sample"
                                + con.getPackageName()));
                con.startActivity(marketIntent);
           }
       });
    AlertDialog diag = builder.create();
    diag.show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T01:03:45.397

这里的编译时错误只是`getPackageName()` `and startActivity()`两个实例方法（来自上下文）。您想调用`con.getPackageName()`（即您的 Context 参数）和`con.startActivity()`.

# git - 挖掘数据和输出数据库的存储库和错误跟踪工具？

> ID：12993997
> 
> 赞同：0
> 
> 时间：2012-10-21T00:52:36.807
> 
> 标签：git, svn, jira, bugzilla

是否有任何工具可用于挖掘 JIRA（或其他问题跟踪器）问题，这些问题利用使用 JIRA 插件（或其他可以执行相同操作的插件）将存储库连接到问题跟踪器并将结果再现为数据库的项目？

用于挖掘问题和存储库的其他问题跟踪器的此类工具的一个示例是：

[https://github.com/MetricsGrimoire/CVSAnalY](https://github.com/MetricsGrimoire/CVSAnalY) http://tools.libresoft.es/bicho

但是，它们不会将问题与源代码提交联系起来。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:32:11.403

JIRA 配备了插件来连接许多源代码控制系统，即 SVN 和 git。[例如，对于 SVN，可以在此处找到](https://marketplace.atlassian.com/plugins/com.atlassian.jira.plugin.ext.subversion)插件。该插件解析 SVN 存储库的提交消息并搜索特定模式以查看提交是否与 JIRA 问题相关联。SVN 客户端工具（例如 TortoiseSVN）也可以进行这种集成。查看此链接以了解有关[JIRA 和 TortoiseVN 集成的](https://stackoverflow.com/questions/8641950/integration-of-jira-with-tortoisesvn/8653480#8653480)更多信息。