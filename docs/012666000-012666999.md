# StackOverflow 问答 12666000-12666999

# iphone - 引导模式中的图像未显示在移动设备上

> ID：12666000
> 
> 赞同：0
> 
> 时间：2012-09-30T23:22:29.573
> 
> 标签：iphone, css, mobile, twitter-bootstrap, modal-dialog

我在一家餐厅的网站上工作，在我的手机上访问该网站时遇到了这个烦人的问题。这是我看到的：http: [//i.imgur.com/rc1sS.png](http://i.imgur.com/rc1sS.png)（可在 iOS5、iOS6、*一些*Android 中重现）

菜单是 .JPG 在 Twitter Bootstrap 模式中加载的，代码如下所示：

```
 <div id="menu" class="modal hide fade in" style="display: none; ">
                  <div class="modal-header">
                    <a class="close" data-dismiss="modal">×</a>
                  </div>
                  <div class="modal-body">
                    <img src="assets/menus/brunch.jpg">
                  </div>
              </div>
              <a data-toggle="modal" href="#menu" >BRUNCH</a></p> 
```

一切都在所有桌面浏览器中加载正常，而且奇怪的是它们出现在 iOS6 的移动 Chrome 应用程序上。我用朋友问了几个我的安卓，大约是 50%。我不知道为什么似乎没有模式。图像的调用方式有问题吗？（我认为它与模态本身没有任何关系？）

帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:54:13.083

好的，原来图像是 CMYK，这是手机不喜欢的。更改为 RGB，现在一切正常！

# javascript - 如何在完成之前清除 setTimeout() 和 jQuery fadeOut()？

> ID：12666002
> 
> 赞同：2
> 
> 时间：2012-09-30T23:22:34.177
> 
> 标签：javascript, jquery

我有这个 showMessage 功能：

```
函数显示消息（消息）{
    $('#my_message').show();
    $('#my_message').html(message);
    setTimeout(function(){$('#my_message').fadeOut();},
        2000);
}
```

但是如果在 setTimeout() 和/或 fadeOut() 完成之前再次调用它，它就不能正常工作。IE。它不会重新开始并等待 2 秒 - 正如您可以想象的那样，它有点口吃。如何清除 setTimeout 和 fadeOut 使其按预期工作？

编辑：

建议使用 jQuery delay() 而不是 setTimeout()。但我认为 delay() 不能正常工作（在 jQuery delay() 文档页面上它说 delay() 不能被取消）。这是我更新的代码：

```
$(文档).ready(函数() {
    $('#my_form').submit(function() {
        $('#my_message').stop();
        $('#my_message').hide();

        $.get('/my_url',
            $('#my_form').serialize(),
            功能（数据）{
                显示消息（数据）；
            });

        返回假；
    });
});

函数显示消息（消息）{
    $('#my_message').html(message);
    $('#my_message').show();
    $('#my_message').delay(5000).fadeOut();
}
```

因此消息将显示 5 秒钟然后淡出。问题是延迟永远不会被取消。例如，如果我提交一次表单并让消息显示，然后等待 4 秒并再次提交，那么第一个延迟仍然存在，因此第二个延迟看起来像 1 秒。那么即使延迟中断，我怎样才能使延迟始终为 5 秒。我尝试使用`stop(true)`，`stop('fx', true)`但似乎都没有任何效果。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-30T23:26:02.230

根本不要使用`setTimeout`。将其更改为`delay`.

```
$('#form_message').delay(2000).fadeOut(); 
```

这将允许您使用 jquery 的`stop`.

```
$('#form_message').stop(); 
```

`stop`还接受可选参数，让您决定是要完成动画还是简单地停止动画。

[http://api.jquery.com/stop/](http://api.jquery.com/stop/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T00:49:21.470

要回答您的原始问题：

```
var messageTimeout;
function showMessage(message) {
    clearInterval(messageTimeout);
    $('#my_message').stop().html(message).fadeTo(100, 1);
    messageTimeout = setTimeout(function(){$('#my_message').fadeOut();}, 2000);
} 
```

# bison - flex/bison 解析器编译时出现分段错误

> ID：12666003
> 
> 赞同：4
> 
> 时间：2012-09-30T23:22:44.427
> 
> 标签：bison, flex-lexer

我正在用`flex`/编写解析器`bison`（我可以用 Python 编写解析器，但我总是更喜欢经典。）

当我用这个编译代码时：

```
gcc -lfl -ly chance.tab.c lex.yy.c -o chance 
```

当我使用文件运行程序时，我得到如下信息：

```
Segmentation fault (core dumped) 
```

供任何人参考，以下是文件：

**机会.y**

```
%{
    #include <stdio.h>
%}

%union {
    char* str;
}

%token ASSERT BREAK CATCH CLASS CONTINUE DEL EACH ELSE ELSEIF FINALLY FROM
%token FUNC IF LOAD PASS PRINT REPEAT RETURN RUN THROW TRY WHILE UNTIL
%token YIELD AND OR NOT KTRUE KFALSE NONE

%token MINUS EXCLAM PERCENT LAND LPAREN RPAREN STAR COMMA DOT SLASH COLON
%token SEMICOLON QUESTION AT LBRACKET BACKSLASH RBRACKET CIRCUMFLEX LBRACE
%token BAR RBRACE TILDE PLUS LTHAN EQUAL GTHAN INTDIV

%token ADDASS SUBASS MULASS DIVASS INTDASS MODASS ANDASS ORASS LTEQ EQUALS
%token GTEQ INCREMENT DECREMENT DBLSTAR

%token<str> NAME STRING INTEGER FLOAT
%token INDENT DEDENT NEWLINE

%type<str> exprs names args kwdspec dfltarg arg arglist exprlist name namelist
%type<str> funcargs parenexpr lstexpr eachspec optargs inheritance addop
%type<str> expr ifs elifs elif elses trys catchs catchx finally suite stmts
%type<str> stmt program

%start program

%%

exprs: expr                         { $$ = $1; }
|   exprs COMMA expr                { sprintf($$, "%s %s", $1, $3); }
;

names: name                         { $$ = $1; }
|   names COMMA name                { sprintf($$, "%s %s", $1, $3); }
;

args: arg                           { $$ = $1; }
|   args COMMA arg                  { sprintf($$, "%s %s", $1, $3); }
;

kwdspec:                            { $$ = "regular"; }
|   STAR                            { $$ = "list"; }
|   DBLSTAR                         { $$ = "keyword"; }
;

dfltarg:                            { $$ = "null"; }
|   EQUAL expr                      { $$ = $2; }
;

arg: kwdspec name dfltarg
        { sprintf($$, "(argument %s %s %s)", $1, $2, $3); } ;

arglist: args                       { sprintf($$, "[%s]", $1); } ;
exprlist: exprs                     { sprintf($$, "[%s]", $1); } ;
name: NAME                          { sprintf($$, "(name %s)", $1); } ;
namelist: names                     { sprintf($$, "[%s]", $1); } ;
funcargs: LPAREN arglist RPAREN     { $$ = $2 } ;
parenexpr: LPAREN exprlist RPAREN   { sprintf($$, "(tuple %s)", $2); } ;
lstexpr: LBRACKET exprlist RBRACKET { sprintf($$, "(list %s)", $2); } ;

eachspec: BAR namelist BAR          { sprintf($$, "(each-spec %s)", $2); } ;

optargs:                            { $$ = ""; }
|   funcargs                        { $$ = $1; }
;

inheritance:                        { $$ = ""; }
|   parenexpr                       { $$ = $1; }
;

addop:
    ADDASS                          { $$ = "add"; }
|   SUBASS                          { $$ = "sub"; }
|   MULASS                          { $$ = "mul"; }
|   DIVASS                          { $$ = "div"; }
|   INTDASS                         { $$ = "int-div"; }
|   MODASS                          { $$ = "mod"; }
|   ANDASS                          { $$ = "and"; }
|   ORASS                           { $$ = "or"; }
;

expr:       /* NotYetImplemented! */
    NUMBER                          { sprintf($$, "(number %s)", $1); }
|   TRUE                            { $$ = "(true)"; }
|   FALSE                           { $$ = "(false)"; }
|   NONE                            { $$ = "(none)"; }
|   STRING                          { sprintf($$, "(string %s)", $1); }
|   lstexpr                         { $$ = $1; }
;

ifs: IF expr suite                  { sprintf($$, "(if %s %s)", $2, $3); } ;

elifs:                              { $$ = ""; }
|   elifs elif                      { sprintf($$, "%s %s", $1, $2); }
;

elif: ELSEIF expr suite             { sprintf($$, "(else-if %s %s)", $2, $3); } ;

elses:                              { $$ = ""; }
|   ELSE suite                      { sprintf($$, "(else %s)", $2); }
;

trys: TRY suite                     { sprintf($$, "(try %s)", $2); } ;

catchs:                             { $$ = ""; }
| catchs catchx                     { sprintf($$, "%s %s", $1, $2); }
;

catchx: CATCH expr suite            { sprintf($$, "(catch %s %s)", $2, $3); } ;

finally: FINALLY suite              { sprintf($$, "(finally %s)", $2); } ;

suite: COLON stmts SEMICOLON        { sprintf($$, "(block [%s])", $2); } ;

stmts:                              { $$ = ""; }
|   stmts NEWLINE stmt              { sprintf($$, "%s %s", $1, $3); }
;

stmt:
    ASSERT expr                     { printf("(assert %s)", $2); }
|   BREAK                           { printf("(break)"); }
|   CATCH expr suite                { printf("(catch %s %s)", $2, $3); }
|   CLASS name inheritance suite    { printf("(class %s %s %s)", $2, $3, $4); }
|   CONTINUE                        { printf("(continue)"); }
|   DEL expr                        { printf("(del %s)", $2); }
|   expr DOT EACH eachspec suite    { printf("(each %s %s %s)", $1, $4, $5); }
|   FROM name LOAD namelist         { printf("(from %s %s)", $2, $4); }
|   FUNC name optargs suite         { printf("(func %s %s %s)", $2, $3, $4); }
|   ifs elifs elses                 { printf("(if-block %s %s %s)", $1, $2, $3); }
|   LOAD namelist                   { printf("(load %s)", $2); }
|   PASS                            { printf("(pass)"); }
|   PRINT expr                      { printf("(print %s)", $2); }
|   REPEAT expr suite               { printf("(repeat %s %s)", $2, $3); }
|   RUN expr                        { printf("(run %s)", $2); }
|   THROW expr                      { printf("(throw %s)", $2); }
|   trys catchs elses finally       { printf("(try-block %s %s %s %s)", $1, $2, $3, $4); }
|   WHILE expr suite                { printf("(while %s %s)", $2, $3); }
|   UNTIL expr suite                { printf("(until %s %s)", $2, $3); }
|   YIELD expr                      { printf("(yield %s)", $2); }
|   RETURN expr                     { printf("(return %s)", $2); }
|   expr addop expr                 { printf("(%s-assign %s %s)", $2, $1, $3); }
|   expr INCREMENT                  { printf("(increment %s)", $1); }
|   expr DECREMENT                  { printf("(decrement %s)", $1); }
|   expr                            { printf("(expr-stmt %s)", $1); }
;

program: stmts                      { printf("(program [%s])", $1); } ; 
```

**机会.l**

```
%{
    #include <assert.h>
    #include <stdio.h>

    #include "parser.tab.h"
%}

%option yylineno
%option noyywrap

%%

"assert"    { return ASSERT; }
"break"     { return BREAK; }
"catch"     { return CATCH; }
"class"     { return CLASS; }
"continue"  { return CONTINUE; }
"del"       { return DEL; }
"each"      { return EACH; }
"else"      { return ELSE; }
"elseif"    { return ELSEIF; }
"finally"   { return FINALLY; }
"from"      { return FROM; }
"func"      { return FUNC; }
"if"        { return IF; }
"load"      { return LOAD; }
"pass"      { return PASS; }
"print"     { return PRINT; }
"repeat"    { return REPEAT; }
"return"    { return RETURN; }
"run"       { return RUN; }
"throw"     { return THROW; }
"try"       { return TRY; }
"while"     { return WHILE; }
"until"     { return UNTIL; }
"yield"     { return YIELD; }
"and"       { return AND; }
"or"        { return OR; }
"not"       { return NOT; }
"true"      { return KTRUE; }
"false"     { return KFALSE; }
"none"      { return NONE; }

-           { return MINUS; }
!           { return EXCLAM; }
%           { return PERCENT; }
&           { return LAND; }
\(          { return LPAREN; }
\)          { return RPAREN; }
\*          { return STAR; }
,           { return COMMA; }
\.          { return DOT; }
\/          { return SLASH; }
:           { return COLON; }
;           { return SEMICOLON; }
\?          { return QUESTION; }
 @          { return AT; }
\[          { return LBRACKET; }
\]          { return RBRACKET; }
\^          { return CIRCUMFLEX; }
\{          { return LBRACE; }
\}          { return RBRACE; }
\|          { return BAR; }
~           { return TILDE; }
\+          { return PLUS; }
\<          { return LTHAN; }
=           { return EQUAL; }
\>          { return GTHAN; }
\/\/        { return INTDIV; }
\+=         { return ADDASS; }
-=          { return SUBASS; }
\*=         { return MULASS; }
\/=         { return DIVASS; }
\/\/=       { return INTDASS; }
%=          { return MODASS; }
&=          { return ANDASS; }
\|=         { return ORASS; }
\<=         { return LTEQ; }
==          { return EQUALS; }
\>=         { return GTEQ; }
\+\+        { return INCREMENT; }
--          { return DECREMENT; }
\*\*        { return DBLSTAR; }

[[:digit:]]+([eE][+-]?[[:digit:]]+)?                { yylval.str = strdup(yytext); return INTEGER; }
[[:digit:]]+\.[[:digit:]]+([eE][+-]?[[:digit:]]+)?  { yylval.str = strdup(yytext); return FLOAT; }
[a-zA-Z_][a-zA-Z0-9_]*                              { yylval.str = strdup(yytext); return NAME; }

\"([^\"])*\"    { yylval.str = strdup(yytext); return STRING; }
\'([^\'])*\'    { yylval.str = strdup(yytext); return STRING; }
`([^`])*`       { yylval.str = strdup(yytext); return STRING; }

"<INDENT>"  { return INDENT; }
"<DEDENT>"  { return DEDENT; }
"<NEWLINE>" { return NEWLINE; }

#.*         { }

[ \\\t]     {}
\n          { (yylineno) += 0.5; }
.           { yyerror(); }

%%

int yyerror(void)
{
    printf("Invalid syntax on line %d: '%s'\n", yylineno, yytext);
}

int main()
{
    yyparse();
    printf("\n");
    return 0;
} 
```

如果上面的程序适用于任何人，这里有一些我的小编程语言的示例代码：

**测试.ch**

```
from timer load x

func x(f=0, **k):
    5.each|x|:
        continue;;

class OhHey:
    func __init__:
        print 5;;

while true:
    print x;

[1, 2, 3]
(1, 2, 3) 
```

提前致谢。~~机会

**编辑**：输入新的和改进的代码（不幸的是，它仍然会产生段错误。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T00:04:21.140

您的词法分析器永远不会设置`yylval`，因此当您的解析器读取令牌的值时，它会得到随机垃圾。例如，在您的规则中：

```
expr: NUMBER { sprintf($$, "(number %s)", $1); } 
```

`$1`指来自 的令牌值`NUMBER`，因此将是随机垃圾。此外，`$$`是规则的输出，因此您传递给`sprintf`此处的值也将是随机垃圾（因为您没有先将其设置为某个值）。

**编辑**

一种“简单”的解决方案是自由地`strdup/asprintf`为字符串分配内存。例如，在您的 .l 文件中，您将拥有如下内容：

```
[+-]?[0-9]+(\.[0-9]+)?([Ee][+-]?[0-9]+)? { yylval = strdup(yytext); return NUMBER; } 
```

那么你的 expr 规则将是：

```
expr: NUMBER { asprintf(&$$, "(number %s)", $1); free($1); } 
```

当然，问题是要弄清楚所有释放应该去哪里以避免内存泄漏可能很困难。

# javascript - 从 webview 的 Javascript 界面更新 UI 会使应用程序崩溃

> ID：12666012
> 
> 赞同：2
> 
> 时间：2012-09-30T23:23:59.913
> 
> 标签：javascript, android, webview

我正在开发一个混合 webview/native 应用程序，并且遇到了应用程序崩溃的问题。

这是快速纲要：

*   应用程序位于单个 FrameLayout
*   顶部有一个 LinearLayout，我在左侧和右侧放置一个按钮，在中间和下方放置我的应用程序徽标，我有我的 WebView
*   我正在使用`webview.addJavascriptInterface(myObj, "myJsName")`将 JS 接口附加到 Web 视图
*   在 webView 中，我加载了一个简单的 HTML 页面，该页面在我的 JS 界面中调用公共方法。这些方法只是在虚假的“标题栏”（LineadLayout）中显示或隐藏各种视图
*   我的 JS 界面中的方法调用得很好 - 但是如果我尝试在这些调用中更新 UI，应用程序会崩溃并出现`Fatal signal 11 (SIGSEGV)`

这是我活动中的相关代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    webview = (WebView) findViewById(R.id.webview);
    logo = (ImageView) findViewById(R.id.logo);

    webview.getSettings().setJavaScriptEnabled(true);
    webview.getSettings().setLightTouchEnabled(true);
    webview.getSettings().setEnableSmoothTransition(true);

    javascriptInterface = new JavascriptInterface() {
        public void showLogo() {
            runOnUiThread(new Runnable() {
                public void run() {
                    MyActivity.this.logo.setVisibility(View.VISIBLE);
                }
            });
        }

        public void hideLogo() {
            MyActivity.this.runOnUiThread( new Runnable() {
                public void run() {
                    MyActivity.this.logo.setVisibility(View.GONE);
                }
            });
        }
    };
    webview.addJavascriptInterface(javascriptInterface, JavascriptInterface.NAME);
    webview.loadUrl("file:///android_asset/test.html");
} 
```

*   从我的 JS 代码调用`hideLogo()`时，应用程序崩溃并显示`Fatal signal 11 (SIGSEGV)`.
*   如果我删除`MyActivity.this.runOnUiThread`并尝试修改 UI 没有任何反应（也没有崩溃）
*   调试时，我保证该`logo`变量不为空，并且确实代表正确的 ImageView
*   `hideLogo()`此外，在应用程序崩溃之前调用徽标确实会消失

所以，现在我真的很困惑。我试过使用 a`Handler`和`AsycTask`& 都给我同样类型的崩溃。

我对 Android 非常陌生，所以我希望我在这里做一些愚蠢的事情。任何和所有的帮助表示赞赏！

*更新这里是 log cat 的详细输出*

```
10-01 12:29:55.591: INFO/Choreographer(10074): Skipped 74 frames!  The application may be doing too much work on its main thread.
10-01 12:29:55.622: null/libc(10074): Fatal signal 11 (SIGSEGV) at 0x00000008 (code=1), thread 10074 (com.arin.test)
10-01 12:29:55.724: INFO/DEBUG(121): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
10-01 12:29:55.724: INFO/DEBUG(121): Build fingerprint: 'google/takju/maguro:4.1.1/JRO03C/398337:user/release-keys'
10-01 12:29:55.724: INFO/DEBUG(121): pid: 10074, tid: 10074, name: com.arin.test  >>> com.arin.test <<<
10-01 12:29:55.724: INFO/DEBUG(121): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000008
10-01 12:29:55.849: INFO/DEBUG(121): r0 00000008  r1 5bc3ebc0  r2 00000010  r3 00000004
10-01 12:29:55.849: INFO/DEBUG(121): r4 5a52d008  r5 5a52de38  r6 00000001  r7 00000004
10-01 12:29:55.849: INFO/DEBUG(121): r8 00000008  r9 00000001  sl 00000004  fp 00000001
10-01 12:29:55.849: INFO/DEBUG(121): ip 00000001  sp bedb2310  lr 5bea188c  pc 5beca774  cpsr 80000010
10-01 12:29:55.849: INFO/DEBUG(121): d0  00000000bd0d3d00  d1  3f8469ee00000000
10-01 12:29:55.849: INFO/DEBUG(121): d2  0000000000000080  d3  000000000000003f
10-01 12:29:55.849: INFO/DEBUG(121): d4  0000000000000000  d5  000000003f800000
10-01 12:29:55.849: INFO/DEBUG(121): d6  3f8469eebd0d3dcb  d7  3f8000003f800000
10-01 12:29:55.849: INFO/DEBUG(121): d8  bf800000bf800000  d9  0000000000000000
10-01 12:29:55.849: INFO/DEBUG(121): d10 0000000000000000  d11 0000000000000000
10-01 12:29:55.849: INFO/DEBUG(121): d12 0000000000000000  d13 0000000000000000
10-01 12:29:55.849: INFO/DEBUG(121): d14 0000000000000000  d15 0000000000000000
10-01 12:29:55.849: INFO/DEBUG(121): d16 0000000000000008  d17 000000c1417d8568
10-01 12:29:55.849: INFO/DEBUG(121): d18 000000000358b208  d19 0000000000000000
10-01 12:29:55.849: INFO/DEBUG(121): d20 0000000000000000  d21 0000000000000000
10-01 12:29:55.849: INFO/DEBUG(121): d22 0000000000000000  d23 0000000000000000
10-01 12:29:55.849: INFO/DEBUG(121): d24 3fee45a1e2e00000  d25 4000000006800000
10-01 12:29:55.849: INFO/DEBUG(121): d26 0000000000000000  d27 0000000000000000
10-01 12:29:55.849: INFO/DEBUG(121): d28 408d900000000000  d29 0000000000000000
10-01 12:29:55.849: INFO/DEBUG(121): d30 bffffffff8a00000  d31 0000000000000000
10-01 12:29:55.849: INFO/DEBUG(121): scr 20000010
10-01 12:29:55.849: INFO/DEBUG(121): backtrace:
10-01 12:29:55.849: INFO/DEBUG(121): #00  pc 00034774  /system/vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
10-01 12:29:55.849: INFO/DEBUG(121): #01  pc 0000b888  /system/vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
10-01 12:29:55.849: INFO/DEBUG(121): stack:
10-01 12:29:55.849: INFO/DEBUG(121): bedb22d0  03d00000
10-01 12:29:55.849: INFO/DEBUG(121): bedb22d4  00000000
10-01 12:29:55.849: INFO/DEBUG(121): bedb22d8  5a4defc8
10-01 12:29:55.849: INFO/DEBUG(121): bedb22dc  5a5316c0
10-01 12:29:55.849: INFO/DEBUG(121): bedb22e0  5a52dee4
10-01 12:29:55.849: INFO/DEBUG(121): bedb22e4  00000008
10-01 12:29:55.849: INFO/DEBUG(121): bedb22e8  00000002
10-01 12:29:55.849: INFO/DEBUG(121): bedb22ec  00000004
10-01 12:29:55.849: INFO/DEBUG(121): bedb22f0  5a52dee4
10-01 12:29:55.849: INFO/DEBUG(121): bedb22f4  5a52d008
10-01 12:29:55.849: INFO/DEBUG(121): bedb22f8  5a52de34
10-01 12:29:55.849: INFO/DEBUG(121): bedb22fc  00000000
10-01 12:29:55.849: INFO/DEBUG(121): bedb2300  00000004
10-01 12:29:55.849: INFO/DEBUG(121): bedb2304  00000023
10-01 12:29:55.849: INFO/DEBUG(121): bedb2308  df0027ad
10-01 12:29:55.849: INFO/DEBUG(121): bedb230c  00000000
10-01 12:29:55.849: INFO/DEBUG(121): #00  bedb2310  5a52d008
10-01 12:29:55.849: INFO/DEBUG(121): ........  ........
10-01 12:29:55.849: INFO/DEBUG(121): #01  bedb2310  5a52d008
10-01 12:29:55.849: INFO/DEBUG(121): bedb2314  5bea188c  /system/vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
10-01 12:29:55.849: INFO/DEBUG(121): bedb2318  5a52d008
10-01 12:29:55.849: INFO/DEBUG(121): bedb231c  00000004
10-01 12:29:55.849: INFO/DEBUG(121): bedb2320  00000004
10-01 12:29:55.849: INFO/DEBUG(121): bedb2324  00000000
10-01 12:29:55.849: INFO/DEBUG(121): bedb2328  00000005
10-01 12:29:55.849: INFO/DEBUG(121): bedb232c  5bea398c  /system/vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
10-01 12:29:55.849: INFO/DEBUG(121): bedb2330  5a52d008
10-01 12:29:55.849: INFO/DEBUG(121): bedb2334  00000004
10-01 12:29:55.849: INFO/DEBUG(121): bedb2338  00000000
10-01 12:29:55.849: INFO/DEBUG(121): bedb233c  5bef106c  /system/vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
10-01 12:29:55.849: INFO/DEBUG(121): bedb2340  00000005
10-01 12:29:55.849: INFO/DEBUG(121): bedb2344  5bea4a70  /system/vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so (glDrawArrays+804)
10-01 12:29:55.849: INFO/DEBUG(121): bedb2348  00000004
10-01 12:29:55.849: INFO/DEBUG(121): bedb234c  00000000
10-01 12:29:55.849: INFO/DEBUG(121): memory near r1:
10-01 12:29:55.849: INFO/DEBUG(121): 5bc3eba0 ffffffff ffffffff ffffffff ffffffff  ................
10-01 12:29:55.849: INFO/DEBUG(121): 5bc3ebb0 ffffffff ffffffff ffffffff ffffffff  ................
10-01 12:29:55.849: INFO/DEBUG(121): 5bc3ebc0 ffffffff ffffffff ffffffff ffffffff  ................
10-01 12:29:55.849: INFO/DEBUG(121): 5bc3ebd0 ffffffff ffffffff ffffffff ffffffff  ................
10-01 12:29:55.849: INFO/DEBUG(121): 5bc3ebe0 ffffffff ffffffff ffffffff ffffffff  ................
10-01 12:29:55.849: INFO/DEBUG(121): memory near r4:
10-01 12:29:55.849: INFO/DEBUG(121): 5a52cfe8 5a525fe0 00000001 00000000 00000007  ._RZ............
10-01 12:29:55.849: INFO/DEBUG(121): 5a52cff8 00000007 00000007 00000000 00000f9b  ................
10-01 12:29:55.849: INFO/DEBUG(121): 5a52d008 00000018 0000e7f4 00001c80 00001100  ................
10-01 12:29:55.849: INFO/DEBUG(121): 5a52d018 00001100 0000000a 00000428 00000048  ........(...H...
10-01 12:29:55.849: INFO/DEBUG(121): 5a52d028 0000003c 00000048 0000003c 00000004  <...H...<.......
10-01 12:29:55.849: INFO/DEBUG(121): memory near r5:
10-01 12:29:55.849: INFO/DEBUG(121): 5a52de18 00000000 00000000 00000000 00000000  ................
10-01 12:29:55.849: INFO/DEBUG(121): 5a52de28 00000000 00000000 5a52dc0c 5a52dcb4  ..........RZ..RZ
10-01 12:29:55.849: INFO/DEBUG(121): 5a52de38 5a52dce4 00000000 00000000 00000000  ..RZ............
10-01 12:29:55.849: INFO/DEBUG(121): 5a52de48 00000000 00000000 00000000 00000000  ................
10-01 12:29:55.849: INFO/DEBUG(121): 5a52de58 00000002 00000003 00000003 00000004  ................
10-01 12:29:55.849: INFO/DEBUG(121): memory near sp:
10-01 12:29:55.849: INFO/DEBUG(121): bedb22f0 5a52dee4 5a52d008 5a52de34 00000000  ..RZ..RZ4.RZ....
10-01 12:29:55.849: INFO/DEBUG(121): bedb2300 00000004 00000023 df0027ad 00000000  ....#....'......
10-01 12:29:55.849: INFO/DEBUG(121): bedb2310 5a52d008 5bea188c 5a52d008 00000004  ..RZ...[..RZ....
10-01 12:29:55.849: INFO/DEBUG(121): bedb2320 00000004 00000000 00000005 5bea398c  .............9.[
10-01 12:29:55.849: INFO/DEBUG(121): bedb2330 5a52d008 00000004 00000000 5bef106c  ..RZ........l..[
10-01 12:29:55.849: INFO/DEBUG(121): code around pc:
10-01 12:29:55.849: INFO/DEBUG(121): 5beca754 e781410c e28cc001 e15c0003 3afffffa  .A........\....:
10-01 12:29:55.849: INFO/DEBUG(121): 5beca764 e8bd8010 e92d4010 e3a0c000 ea000004  .....@-.........
10-01 12:29:55.849: INFO/DEBUG(121): 5beca774 e5904000 e5014008 e5904004 e0800002  .@...@...@......
10-01 12:29:55.849: INFO/DEBUG(121): 5beca784 e5014004 e15c0003 e2811008 e28cc001  .@....\.........
10-01 12:29:55.849: INFO/DEBUG(121): 5beca794 3afffff6 e8bd8010 e92d4010 e3a0c000  ...:.....@-.....
10-01 12:29:55.856: INFO/DEBUG(121): code around lr:
10-01 12:29:55.856: INFO/DEBUG(121): 5bea186c e3530000 1a000005 e1a03007 e59c0018  ..S......0......
10-01 12:29:55.856: INFO/DEBUG(121): 5bea187c e59c101c e59c2014 e1a0e00f e59cf024  ..... ......$...
10-01 12:29:55.856: INFO/DEBUG(121): 5bea188c e2866001 e2855004 e5942e50 e3a03001  .`...P..P....0..
10-01 12:29:55.856: INFO/DEBUG(121): 5bea189c e1560002 3affffeb e2840eed e1a01008  ..V....:........
10-01 12:29:55.856: INFO/DEBUG(121): 5bea18ac e280000c e1a02003 e8bd41f0 eaffe178  ..... ...A..x...
10-01 12:29:56.060: INFO/WindowState(321): WIN DEATH: Window{425993f8 com.arin.test/com.arin.test paused=false}
10-01 12:29:56.060: INFO/ActivityManager(321): Process com.arin.test (pid 10074) has died.
10-01 12:29:56.060: WARN/ActivityManager(321): Force removing ActivityRecord{4226e5d0 com.arin.test/com.arin.test}: app died, no saved state
10-01 12:29:56.099: DEBUG/Zygote(124): Process 10074 terminated by signal (11)
10-01 12:29:56.161: WARN/InputMethodManagerService(321): Got RemoteException sending setActive(false) notification to pid 10074 uid 10008 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:10:13.343

我遇到了同样的问题。使用处理程序修复它：

```
class MyJavaScriptInterface   
    {  
        // gets called from JavasScript
        @SuppressWarnings("unused")  
        public void notifyStarted()  
        {  
            _handler.post(_onNavigationStarted);
        }  
    } 

    final Handler _handler = new Handler();

    final Runnable _onNavigationStarted = new Runnable() {
        public void run() {
            _me.navigationStarted();
        }
    };

    protected void navigationStarted() {
        _btnNavigate.setEnabled(true);
        _btnNavigate.setText(_me.getResources().getString(R.string.Navigate));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:00:20.530

这是我使用的代码。这是一个简单的示例，它将显示`Toast`. 试试这个，看看它是否有效。

在你的`onCreate()`：

```
webView = (WebView) findViewById( R.id.webView );
webView.getSettings().setJavaScriptEnabled( true );
webView.addJavascriptInterface( new JavascriptInterface(), "Android" );
webview.loadUrl("file:///android_asset/test.html"); 
```

您的`JavascriptInterface`（在`Activity`使用它的内部定义）：

```
private class JavascriptInterface {

    public void makeToast( String toastText ) {

        Toast.makeText( getApplicationContext(), toastText, Toast.LENGTH_LONG ).show();
    }
} 
```

在您的 javascript 中：

```
function makeToast() {

    Android.makeToast("Test");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T22:15:29.580

好的，我想通了。我不知道这是如何发生或为什么发生的——但一种不同的方法解决了这个问题：

*   我使用的是单个视图 xml 文件 ( `main.xml`)。视图的顶部 45dp 专用于模拟标题栏的 RelativeLayout，其余的是 WebView
*   我将所有虚假标题栏元素移出`main.xml`并创建了一个自定义标题栏 ( `title.xml`)。这解决了我的问题

我不知道为什么一开始它就坏了，但现在它起作用了，我可以继续我的生活了。

另一件值得注意的事情是，在调试时，我添加了一堆本机控件，它们进行的调用与 HTML 按钮通过 JS 界面调用的调用相同，并且运行良好 100%。

每次我尝试通过 JS 接口修改视图属性时，最初的方法都会导致疯狂的内存访问违规。

# objective-c - 无法模态到下一个视图控制器

> ID：12666014
> 
> 赞同：0
> 
> 时间：2012-09-30T23:24:30.277
> 
> 标签：objective-c, ios, xcode

我觉得我只是在这里遗漏了一些简单的东西。我正在尝试模态到我的下一个视图控制器。我首先在我的第一个 .m 文件中导入了下一个视图控制器。在我这样做之后，我写了这段代码

```
CRHViewController *nextViewController = [[CRHViewController alloc]init]; 
        [self presentModalViewController:nextViewController animated:NO]; 
```

另外，我正在使用情节提要而不是笔尖。

当我运行它时会发生什么，一旦它进入模态到下一个视图控制器，它就会变黑。

我错过了一些简单的东西吗？有没有人有解决这个问题的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T00:10:13.520

如果您的 CRHViewController 在您的故事板中，那么您应该使用以下方法对其进行实例化：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"yourStoryboardName" bundle:nil];
[storyboard instantiateViewControllerWithIdentifier:@"myIdentifier"]; 
```

您应该在 IB 中为您的视图控制器提供一个标识符，以便在上述方法中作为标识符参数传入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T23:36:07.903

可能你没有正确初始化它。出于测试目的，我会尝试将 CRHViewController 显示为 AppDelegate 的第一个根视图控制器，并查看它是否正在初始化。然后检查它是否到达它的方法：

1.  initWithNibName
2.  加载视图
3.  从笔尖醒来
4.  viewDidLoad
5.  视图将出现
6.  viewDidAppear

按照这个顺序。它 90% 肯定其中一个失败了。检查它是否到达您按此顺序正确实施的每个方法。

# c - C 包括 .h 不起作用？

> ID：12666025
> 
> 赞同：2
> 
> 时间：2012-09-30T23:26:44.373
> 
> 标签：c, gcc

我是 C 编程新手。当我将 blank.h 文件包含到 Test.c 文件中时，程序将无法编译，但是当我将 blank.c 文件包含到 Test.c 文件中时，它可以正常编译。以下是所有 .c 和 .h 文件的来源。我使用 gcc 作为我的编译器，我觉得我需要与它进行某种链接？任何帮助都会非常感谢！

这是 Test.c 源

```
#include <stdio.h>
#include "blank.h"
#include "boolean.h"

int main()  
{
    bool result = blank("");

    printf("%d\n", result);

    return 0;
} 
```

这是空白.h 源

```
// Header file for blank function

bool blank(char string[]); 
```

这是空白.c 源

```
#include "boolean.h"
#include "blank.h"
#include <regex.h>

bool blank(char string[])
{

    regex_t regex_blank;
    int blank = regcomp(&regex_blank, "[:blank:]", 0);

    blank = regexec(&regex_blank, string, 0, NULL, 0);

    if  ( string == NULL || blank == 1 )
        return true;
    else
        return false;
} 
```

最后是 boolean.h

```
// Boolean

// Define true
#ifndef true
#define true 1
#endif

// Define false
#ifndef false
#define false 0
#endif

typedef int bool; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T23:30:40.667

我想你是手动运行 GCC 否则你不会有这个问题。

您可以手动为每个 .c 文件运行 GCC，也可以一起为它们运行它。

```
gcc *.c 
```

如果您稍后执行，则不应遇到链接器错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T00:14:37.053

好的，所以我尝试了您提供的源代码。有几个问题。这是我如何构建的确切步骤，我修复了什么。看看这是否适合你：

在一个文件夹中创建了 4 个文件：Test.c、blank.c、blank.h 和 boolean.h 将代码复制过来。

从外壳运行：

```
 gcc Test.c blank.c -o b 
```

输出：

```
In file included from Test.c:2:0:
blank.h:3:1: error: unknown type name ‘bool’
blank.c: In function ‘blank’:
blank.c:11:46: error: ‘NULL’ undeclared (first use in this function)
blank.c:11:46: note: each undeclared identifier is reported only once for each function it appears in 
```

修复第一个错误：在 blank.h 中添加了这个：`#include "boolean.h"`

修复第二个错误：在空白.c 中，在其他包括后添加：`#include <stdlib.h>`

终端再次运行：

```
 gcc Test.c blank.c -o b 
```

然后从终端运行 ./b 并打印 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T23:29:43.197

你忘了包括警卫：

空白.h：

```
#ifndef BLANK_H_INCLUDED
#define BLANK_H_INCLUDED

bool blank(char string[]);

#endif 
```

这些包含保护可防止每次源文件包含头文件时重新定义头文件的内容。确保也为 boolean.h 执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T23:38:53.210

您需要包含`boolean.h`在`blank.h`,

```
// Header file for blank function

#include "boolean.h"
bool blank(char string[]); 
```

或者你需要`blank.h`在 in之前包含它`Test.c`，否则编译器不`bool`知道`blank`.

除此之外，始终使用包含守卫的建议是好的，应该遵循。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T00:25:41.813

从 Test.c 中删除 #include "blank.h" 并运行 gcc Test.c blank.c 后，它编译得很好。感谢您对包含警卫的建议，以及做 gcc Text.c blank.c

# c++ - 一般来说，STL 容器的 getter 的返回类型应该是什么？

> ID：12666029
> 
> 赞同：2
> 
> 时间：2012-09-30T23:28:00.647
> 
> 标签：c++, getter-setter

> **可能重复：**
> [访问器应该返回值还是常量引用？](https://stackoverflow.com/questions/4613823/should-accessors-return-values-or-constant-references)

首先，让我们忽略 setter 和 getter 是/不是邪恶的。:)

我的问题是，如果我有一个包含某个`std::`容器作为成员的类，比如说`string`，getter 的返回类型应该是什么？`const T&`与性能原因相比，我更喜欢`T`...我知道大多数时候用户无论如何都会制作副本，但我想并非总是如此。我错了吗？

所以总的来说什么更好：

```
std::string get_name() const; 
```

或者

```
const std::string& get_name() const; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T23:37:54.147

返回一个常量引用。如果用户想要制作副本，请不要吝啬你的背影。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T01:08:44.660

这是考虑因素：

1）返回副本`string`。然后文档很简单（“返回...的当前值”）并且函数很慢（我怀疑在很多情况下编译器足够聪明以省略副本，即使返回值仅在一个单表达式，理论上编译器可以识别`string`为无副作用副本的值类型，也可以证明在调用者使用副本期间引用不能改变，因此使用引用代替。但它会做这一切吗？）。

2）返回参考`const string&`。然后文档很复杂，（“返回对`string`包含的当前值的对象的引用......此引用在以下时间保持有效......它继续包含该时间的以下子集的相同值...... ”）。如果调用者不需要副本，则该函数很快。该类的实现几乎被限制为始终将该字符串存储为`string`数据成员，因为否则它将没有任何东西可以在合适的生命周期内返回。

别名可能很快（如果它避免复制）但很复杂（因为引用可以更改或消失），因此返回引用的函数可能很快但很复杂。此外，(1) 是“返回对象属性的 getter”，而 (2) 是“返回对象私有成员的 getter”。所以如果吸气剂是邪恶的，那么（2）比（1）*更邪恶。*

I would generally return the reference if the getter is essentially there as a hack for other tightly-coupled classes to get at the data, or if the class has *very obvious* semantics for when it will change, for example "never during the lifetime of the object", or if the string is expected to be so huge that it's reasonable to expose it by reference simply because taking a copy of it *should* be rare and so callers will be expecting view behavior rather than value behavior. I'd probably return the value if the interface is supposed to be compatible-forever, just to be safe, unless the class I'm writing is explicitly designed as "a thing that holds a big string and does X for you whilst still letting you see the string".

不可变的垃圾收集字符串解决了这个问题，这可能是它们对高级语言设计者有吸引力的原因之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T23:42:22.090

这取决于 getter 的最常见用途。

如果从 get 操作的那一刻起直到程序结束都将使用该字符串，则可能会建议进行复制操作，因为您不想向用户“做出关于字符串的生命周期的承诺”。

如果要立即使用该字符串，请使用引用。

如果您的整个系统正在使用某个字符串存储库，则可以确保所有字符串的生命周期都是已知的。您可以安全地从该存储库返回引用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T23:46:13.267

一般来说，一个 const 引用是理想的。正如Kerrek 所说，如果他们需要一份副本，他们可以自己制作。这可能导致问题的唯一地方完全是参考接收者的责任。例如，当一个 const 引用 var 正在*接收*一个返回 const 引用的对象成员的结果，并且该对象后来被独立于引用变量的生命周期而被销毁时，您已经有效地“记住”了一个指针（松散术语）不再有效；IE ：

```
const std::string& myref = myobj->getString();
...
delete myobj; 
```

但是您应该了解这一点（因为您正在编写代码），因此应该首先计划避免它。*他们*应该制作副本而不是获取参考，无论如何返回参考仍然是最佳实践。

# mysql - How do I retrieve multiple random rows in MySQL without an id/auto_increment column?

> ID：12666033
> 
> 赞同：4
> 
> 时间：2012-09-30T23:28:30.983
> 
> 标签：mysql

**My objective**

I am trying to retrieve multiple random rows that contain only unique `userid` but for the `type` column to be random - `type` can only be `0` or `1`. The table in question will contain less than 1,000 rows at any given time.

**My table**

```
CREATE TABLE tbl_message_queue (
  userid bigint(20) NOT NULL,
  messageid varchar(20) NOT NULL,
  `type` int(1) NOT NULL,
  PRIMARY KEY (userid,messageid,`type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

**Sample data**

```
userid  |   messageid   |   type
---------------------------------------------------
4353453 |   518423942   |   0
4353453 |   518423942   |   1
2342934 |   748475435   |   0
2342934 |   748475435   |   1
7657529 |   821516543   |   0
7657529 |   821516543   |   1
0823546 |   932843285   |   0
0823546 |   932843285   |   1 
```

**What to rule out**

Using `ORDER BY RAND()` isn't feasible as over at least 18,000 of these types of queries are executed by applications at any given moment and are causing high load. Using `SELECT DISTINCT` or `GROUP BY` is (obviously) more efficient and will always pick unique `userid` but `type` will always equal to `0` with an acceptable load.

The common method is to create an `id` column but I'm looking for an alternative way **only**. The group primary key cannot change as it is required and deeply integrated into our application, however the structure of each column can be altered.

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T00:23:40.823

My understanding of your question is that for each `userid` you have *two* entries, but want to extract only *one*, at random.

To achieve this, you ought to generate a random value between 0 and 1 for each unique `userid`, and then JOIN this list with the starting list:

```
SELECT a.* FROM tbl_message_queue AS a
    JOIN ( SELECT userid, FLOOR(2*RAND()) AS type 
           FROM tbl_message_queue GROUP BY userid ) AS b
    ON ( a.userid = b.userid AND a.type = b.type ); 
```

But if an `ORDER BY RAND()` does not work for you, maybe we should compromise.

In the above sequence, any two userids will be *uncorrelated* -- i.e., the fact that user A gets type 0 tells you nothing about what user B will turn up with.

Depending on the use case, a less random (but "apparently random") sequence could be obtained with two queries:

```
SELECT @X := FLOOR(2*RAND()), @Y := POW(2,FLOOR(2+14*RAND()))-1;

SELECT * FROM tbl_message_queue WHERE (((userid % @Y) & 1) XOR type XOR @X); 
```

This way, you can get what seems a random extraction. What really happens is that the userids are *correlated*, and you only have some couple dozens different extractions possible. But using only simple operators, and no JOINs, this query is very fast.

# css - 悬停在 Internet Explorer 中不起作用

> ID：12666035
> 
> 赞同：1
> 
> 时间：2012-09-30T23:29:14.110
> 
> 标签：css, internet-explorer, hover

我正在尝试使网站与> IE8（包括IE）兼容。事实证明，悬停效果在任何 IE 版本中都不起作用。这是我的网站[点击](http://jimmyweb.pl/projekty/dentmedica/)

当您导航到“计划”页面时，会有一张公寓地图。当您将鼠标悬停在两个房间中的一个上时，它会在其上显示蓝色框（在每个浏览器中，但不是在 IE 中）。问题是什么？

这是我正在使用的 HTML：

```
<div id="slide3" class="slide">
    <h1>Wybierz swój lokal</h1>
    <div class="floor-nav">
        <ul>
            <li><a href="#floor0" class="floor-active">0</a></li>
            <li><a href="#floor1" class="floor-inactive">+1</a></li>
        </ul>
    </div>
    <div id="floor-0" class="floor">
        <img src="img/floor-0.png" />
        <a href="#" target="_blank" id="flat-1" class="flat">
            <span class="flat-desc">Lokal <span class="bold">45m²</span></span>
        </a>
        <a href="#" target="_blank" id="flat-2" class="flat">
            <span class="flat-desc">Lokal <span class="bold">25m²</span></span>
        </a>
    </div>
</div> 
```

还有一些CSS：

```
.flat{
    background:none;
    position:absolute;
    display:block;
    color:#ffffff;
    text-align:center;
    font-size:30px;
    text-decoration:none;
    z-index:900;
}

.flat .flat-desc{
    display:none;
    padding-left:38px;
    background:url(../img/plus-sign-white.png) left top no-repeat;
    line-height:20px;
}

.flat:hover{
    background:url(../img/flat-hover-bg.png);
}

.flat:hover .flat-desc{
    display:inline;
} 
```

你有什么想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T02:11:00.080

我无法找到这个问题。但我找到了一个适合我的修复程序。尝试

```
.flat{
    position:absolute;
    display:block;
    color:#ffffff;
    text-align:center;
    font-size:30px;
    text-decoration:none;
    z-index:900;
    background-image: url( add url to a transparent pixel.png or a transparent pixel.gif );
} 
```

工作[现场预览](http://madhushankarathnayake.com/temp/jimmyweb.pl/projekty/dentmedica/)

新代码：

```
.flat{
    position:absolute;
    display:block;
    color:#ffffff;
    text-align:center;
    font-size:30px;
    text-decoration:none;
    z-index:900;
    background-image: url(../img/flat-bg.png);
} 
```

# python - 我的 GAE 项目需要哪些文件？

> ID：12666037
> 
> 赞同：0
> 
> 时间：2012-09-30T23:29:24.820
> 
> 标签：python, google-app-engine, oauth, openid

我正在尝试在我的谷歌应用程序引擎项目中使用[SimpleAuth](https://github.com/crhym3/simpleauth)，它看起来很简单，但我想看看我的项目中实际需要哪些文件。现在我的项目目录如下所示：

```
src/
  main.py
  app.yaml
  index.yaml
  #these three are the SimpleAuth ones
  simpleauth/
    __init.py__
    handler.py
  httplib2/
  oauth2/ 
```

我需要整个 SimpleAuth 文件夹还是只需要这两个文件？在 GitHub 站点上，它只是说将 SimpleAuth 子目录放在根目录中，但主文件也被命名为 SimpleAuth。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T23:40:39.657

阅读文档说这就是你所需要的，所以你应该继续尝试看看它是否有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T09:36:51.633

是的`simpleauth`，`httplib2`并且`oauth2`是您所需要的。您也可以从一个工作[示例应用程序](https://github.com/crhym3/simpleauth/tree/master/example)开始，并根据需要对其进行修改。

[upload.py 是一个脚本，用于上传代码更改列表以供在http://codereview.appspot.com](http://codereview.appspot.com)上进行审核（无论何时想要贡献新功能或错误修复）。如果您只想使用 lib，则不需要它。

# ruby-on-rails - Ruby on Rails 随机数不起作用

> ID：12666042
> 
> 赞同：0
> 
> 时间：2012-09-30T23:30:08.173
> 
> 标签：ruby-on-rails, ruby

我已经有一段时间了。我正在建立一个简单的彩票网站，并且正在生成随机彩票。在我的本地机器上生成随机数，但是在服务器上它们是重复的。

我已经尝试了多个版本，但重复的版本是相同的。

我需要为每张票创建一个随机票号，并确​​保它没有被创建。

这是我喜欢的第 50 个版本：

```
 a = Account.find(current_account)
    numTics = params[:num_tickets].to_i
    t = a.tickets.where(:item_id => item.id).count
    total = t + numTics
    if total > 5
      left = 5 - t
      flash[:message] = "The total amount of tickets you can purchase per item is five.  You can purchase #{left} more tickets."
      redirect_to buy_tickets_path(item.id)
    else
        i = 1
        taken = []
        random = Random.new
        taken.push(random.rand(100.10000000000000))
        code = 0
        while i <= numTics do
          while(true)
            code = random.rand(100.10000000000000)
            if !taken.include?(code)
              taken.push(code)
              if Ticket.exists?(:ticket_number => code) == false
                  a.tickets.build(
                    :item_id => item.id,
                    :ticket_number => code
                  )
                  a.save
                  break
              end
              code = 0
            end
          end
          i = i + 1
        end
        session['item_name'] = item.name
        price = item.price.to_i * 0.05
        total = price * numTics
        session['amount_due'] = total.to_i
        redirect_to confirmation_path
    end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T23:37:13.463

如果可能，您应该使用 SecureRandom，而不是 Random。它的工作方式相同，但更加随机，不需要像 Random 那样初始化：

```
SecureRandom.random_number * 100.1 
```

如果您使用的是 Ruby 1.8.7，您可以尝试使用 ActiveSupport::SecureRandom 等效版本。

此外，如果您要生成彩票，您需要确保您的生成器是**加密安全**的。仅生成随机数可能还不够。您可能希望应用其他一些函数来生成这些。

请记住，大多数实际彩票不会在购买时生成随机彩票，而是提前生成大批量，然后将这些彩票发行给购买者。这意味着您可以预览门票并确保它们足够随机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T00:14:57.430

问题*不*在于Ruby 的伪随机数生成器，而是您一直在使用`Random.new`. 如[本答案](https://stackoverflow.com/questions/198460/how-to-get-a-random-number-in-ruby/2773866#2773866)所述，您不必多次致电`Random.new`。将结果存储在一个全局对象中，你会很高兴的。

# jquery - 向自动建议框添加箭头键功能

> ID：12666050
> 
> 赞同：1
> 
> 时间：2012-09-30T23:31:35.753
> 
> 标签：jquery, autosuggest, arrow-keys

我不知道如何使箭头键适用于我的自动建议框。我知道我需要在我的代码中添加这样的内容：

```
 var keynum = 0; 
    if(window.event) { keynum = e.keyCode; }  // IE  
    else if(e.which) { keynum = e.which; }    // Netscape/Firefox/Opera 
    if(keynum === 38) { // up 
    //Move selection up 
    } 
    if(keynum === 40) { // down 
    //Move selection down 
    } 
    if(keynum === 13) { // enter 
    //Act on current selection 
    } 
```

但我不知道如何将其与我的代码相匹配。有人可以帮我弄清楚这将如何与我的代码一起使用。当我按下向下箭头时，我希望突出显示的结果在按下向上箭头时向下移动一个并向上移动。这是我的代码：

```
 </ul>

<div class="input-wrapper">
<input type="text" class="autosuggest" value="Type in a city or town" onblur="onBlur (this)" onfocus="onFocus(this)" > <input type="submit" value="Search">

<div class="dropdown">
    <ul class="result"></ul>

</div>
</div>

      $(document).ready(function() {
$('.autosuggest').keyup(function() {
var search_term = $(this).attr('value');

$.post('php/search.php', { search_term: search_term }, function(data) {
    $('.result').html(data);

$('.result li').click(function(){
    var result_value = $(this).text();
    $('.autosuggest').attr('value', result_value);
    $('.result').html('');

    });

    });

});
      });
       function onBlur(el) { 
if (el.value == '') { 
    el.value = el.defaultValue; 
} 
} 
 function onFocus(el) { 
if (el.value == el.defaultValue) { 
    el.value = ''; 
} 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T23:49:42.837

我注意到您已经在使用 jQuery。如果可能，jquery-ui 库已经提供了您想要的键盘功能。包括 ajax 数据源。[在此处](http://jqueryui.com/demos/autocomplete/)的 jQuery-ui 演示中键入“j”并使用箭头键。然后查看文档以提取您的 ajax 帖子。

# 示例js

```
$(function(){
  $(".autosuggest").autocomplete({
            source: function( request, response ) {
                $.ajax({
                    url: "/php/searchToJSON.php",
                    dataType: "json",
                    data: {
                        search_term: request.term
                    },
                    success: function( data ) {
//this maps your serverside /searchToJSON.php to the {label:something, value:somethingElseMaybe} that jquery-ui autocomplete needs
                        response( $.map( data.SomeNameYouPick, function( itemWithinSomeNameYouPick ) {
                            return {
                                label: itemWithinSomeNameYouPick.labelToShowForOneItem,
                                value: itemWithinSomeNameYouPick.valueWhenSelectedForOneItem
                            }
                        }));
                    }
                });
            },
            minLength: 2
  });
}); 
```

# excel - Excel将范围复制到数组单击复选框

> ID：12666051
> 
> 赞同：0
> 
> 时间：2012-09-30T23:31:50.310
> 
> 标签：excel, vba

## 我有一个 CheckBox 并点击类似这样的事件：

```
If CheckBox1.Value = True Then
Range("H5:H38").Value = Range("H4").Value 
```

* * *

使 h5 到 H38 的列值与单元格 h4 中的值相同。

* * *

```
If CheckBox1.Value = False Then 
```

* * *

现在我需要知道H5：H38的值如何在一个数组中，以便当用户取消选中复选框时，返回值与事件之前相同。也就是在转换h5:h38中的值之前h4中包含的值需要将值保存在一个数组中才能在用户取消勾选复选框的情况下撤消该动作。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:19:19.503

这是一个将任何范围转换为数组的函数：

```
Public Function CreateArrayFromRange(yourRange As Range)
Dim retVal() As Variant, xCell As Range, upperIndex As Integer, tic As Integer

    If yourRange.Cells.Count > 0 Then
        upperIndex = yourRange.Cells.Count - 1
        ReDim retVal(0 To upperIndex)
        tic = -1
        For Each xCell In yourRange
            tic = tic + 1
            retVal(tic) = xCell.Value
        Next xCell
        CreateArrayFromRange = retVal
    Else
        CreateArrayFromRange = Array("ERROR")
    End If

End Function 
```

这个的实现看起来像这样。

```
Dim myArray()
myArray = CreateArrayFromRange(Range("H5:H38")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T00:26:16.277

这是执行您要求的操作的专家。因为你说你需要知道怎么做，所以我在几行之前添加了一些评论，以完全清楚它是如何工作的。

```
Option Explicit
'Declare a private variant to store the range formulas
'Variable is declared as private so that it remains in scope within the module
'Variable could also be declared as static within the sub with the same results.
Private rangeFormulas As Variant
Private Sub CheckBox1_Click()
If CheckBox1.Value = True Then
    'Transfer the range formulas to the variant.
    rangeFormulas = Range("H5:H38").Formula
    Range("H5:H38").Value = Range("H4").Value
Else
    'Restore the formulas from the private variant variable.
    Range("H5:H38").Formula = rangeFormulas 
End If
End Sub 
```

从技术上讲，我可以使用`rangeFormulas = Range("H5:H38").Value`and `Range("H5:H38").Value = rangeFormulas`，但我认为如果您恢复具有相同可见结果的公式会更好。

# c - 为什么这个 C 代码输出 1

> ID：12666054
> 
> 赞同：1
> 
> 时间：2012-09-30T23:32:37.167
> 
> 标签：c, computation

有什么理由吗：

```
void function_foo(){
    int k[8];
    function_math(k, 8);
}

void function_math(int *k, int i){
    printf("value: %d", k[i]);
} 
```

主要执行`function_foo()`；

输出将是 1？矩阵 k 的元素没有初始化。也许内存中有 int 长度的东西？

我是 C 概念、指针和一切的新手。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T23:34:21.590

评估是*未定义的行为*`k[8]`，因为`k`只有 8 个元素，而不是 9 个。

没有必要争论未定义行为的后果。什么事情都可能发生。您的程序格式不正确。

`k[0]`（请注意，评估, ...,甚至是未定义的行为`k[7]`，因为它们是*未初始化的。*您必须先写入它们，或初始化数组，例如 。 `int k[8] = { 1, 2 };`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T23:36:01.330

这是位于声明数组的最后一个元素之后的内存位置的值。

如果您在一周内再次运行此代码，它可能是 42 或此时存储在此特定内存地址上的任何其他内容。在这种情况下，也可能出现分段错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T23:35:31.893

您正在超出数组 k 的范围。

要访问 k 的最后一个元素，请尝试使用`function_math(k, 7)`

数组也没有初始化，所以里面的值是未定义的。

# ruby - 从 Ruby 范围内获取单个元素

> ID：12666057
> 
> 赞同：1
> 
> 时间：2012-09-30T23:32:52.617
> 
> 标签：ruby, range

我正在尝试从 500 个数字的数组中打印单个元素。我使用它初始化它

```
arr = (1..500) 
```

我可以从`for`循环打印：

```
for n in arr
  print n +"\n"
end 
```

我可以使用 打印`arr.each`，但如果我尝试只抓取一个元素，则会出现错误。

```
print arr[0]
>undefined method `[]' for 1..500:Range (NoMethodError) 
```

如果我初始化一个数组`arr2 = ["a", "b", "c"]`并尝试以这种方式获取单个元素，它就可以正常工作。

我假设这是因为我初始化它的方式（使用范围），但是无论我在哪里看，他们都说你应该如何初始化一个数字数组。

有什么办法让我从我的数组中获取一个元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T23:35:01.367

那不是数组，而是范围。您可以使用以下方法将其转换为数组`to_a`：

```
range = 0..500
arr   = range.to_a

puts arr[7] # => 6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-04T09:31:48.787

这是如何在不将整个事物转换为数组的情况下做到这一点。

```
class Range
  def index(n)
    return nil unless n < self.size
    self.each_with_index { |x, i| return x if i == n }
  end
end

range = 0..100000000000
range.index(120) # => 120 
```

# sql-server - 将字符串转换为 smalldatetime 数据类型的语法错误

> ID：12666060
> 
> 赞同：0
> 
> 时间：2012-09-30T23:33:18.420
> 
> 标签：sql-server

尝试在同一服务器上从一个数据库插入另一个数据库时，在 SQL Server 2000 中收到此错误。两个表上的列都是 smalldatetime 并允许空值。

简而言之，我的代码是：

```
INSERT INTO DB2..Table2
SELECT BirthDate, RefDate, Email, FirstName, LastName, ExitDate
FROM DB1..Table1 
```

错误是：

```
Msg 295, Level 16, State 3, Line 1
Syntax error converting character string to smalldatetime data type. 
```

当源是 smalldatetime 时，为什么会出现此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T23:43:14.417

如果你明确地拼出这些列，它会更好，更不容易出错

```
INSERT INTO DB2.Table2(Birthdate, RefDate, Email, FirstName, LastName, ExitDate)
  SELECT BirthDate, RefDate, Email, FirstName, LastName, ExitDate
  FROM DB1.Table1 
```

您收到错误可能是因为列顺序与第二个表中的列顺序不匹配，字符串与日期匹配。当你像我一样拼写出来时，你总是可以交叉检查

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T23:50:41.750

**不。**

尽管围绕 SQL Server 引起了所有营销热议，而且我不得不承认它是一个很棒的产品（我最喜欢的），但它并不能发挥你所要求的魔力。

考虑

```
Table : Columns
Table1: BirthDate, RefDate, Email, FirstName, LastName, ExitDate
Table2: BirthDate, RefDate, FirstName, LastName, ExitDate, Email 
```

您的查询

```
INSERT INTO DB2..Table2
SELECT BirthDate, RefDate, Email, FirstName, LastName, ExitDate
FROM DB1..Table1 
```

那就是您假设 SQL Server 可以匹配名称的地方，对吧？它没有。

```
INSERT INTO DB2..Table2
      (BirthDate, RefDate, Email, FirstName, LastName, ExitDate)
SELECT
       BirthDate, RefDate, Email, FirstName, LastName, ExitDate
FROM DB1..Table1 
```

玩得好，把它们排成一行。看——不难。

干杯。

# javascript - 如何让图像与 PC 浏览器上的嵌入式 SWF 文件重叠？

> ID：12666062
> 
> 赞同：1
> 
> 时间：2012-09-30T23:33:30.417
> 
> 标签：javascript, css, flash

> **可能的重复：**
> [为什么 IE 中的 Z-Index 不能以它应该在 Flash 电影上的方式呈现？](https://stackoverflow.com/questions/761402/why-doesnt-z-index-in-ie-render-the-way-its-supposed-to-over-a-flash-movie)

我需要一些 CSS 帮助。我有一个包含图像的全角标题 div 的页面。该页面还使用 SWFObject (javascript) 直接在此 div 下方嵌入了一个 .swf。

我的目标是让图像“重叠” div 和 .swf 对象，有点像它溢出到 .swf 对象中。

此效果在 Mac 上的 FireFox 中运行良好，但在任何 PC 浏览器（IE 和 FF）上似乎都失败了。

这是我页面的实时链接。 [http://printstuff.com](http://printstuff.com)

在 Mac 上的 FireFox 中查看它以查看我想要实现的目标，然后在 PC 上查看它以查看不正确的结果。

您可以通过查看实时页面上生成的源代码来查看我的 CSS 和 JS 文件。

您能提供的任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:54:55.940

我已将以下几行添加到您的 CSS 文件中

* * *

```
#headWrapper {
  width: 100%;
  position: absolute;
  z-index:1;
}

#PSLogo img {
  width: 500px;
  position: absolute;
  top: -50px;
  left: -50px;
  z-index: 9999;
} 
```

* * *

还将您的 Flash 对象放在一个带有 style="position:relative" 的 div 中

让我知道它是否有效。

# php - PHP 错误 - 登录/注册脚本

> ID：12666066
> 
> 赞同：2
> 
> 时间：2012-09-30T23:34:22.490
> 
> 标签：php, login, salt

用户注册页面有效，这意味着盐和哈希密码正确保存在数据库中。登录报告无效的用户名/密码。如果这很重要，我在数据库中将 salt 和密码设置为 varchar(64)。

我似乎无法找出为什么它不起作用。我想相信错误出在 $query 或 $count 变量中。

登记：

```
<?php
include('config.php');
#Setup Credentials
$uname = mysql_real_escape_string($_POST['uname']);
$escapedPW = mysql_real_escape_string($_POST['pass']);
$email = mysql_real_escape_string($_POST['email']);
#Salt Credentials
$salt = bin2hex(mcrypt_create_iv(32, MCRYPT_DEV_URANDOM));
$saltedPW =  $escapedPW . $salt;
$hashedPW = hash('sha256', $saltedPW);
#checks and queries
$usercheck = mysql_query("SELECT * FROM users WHERE username = '$uname'");
$emailcheck = mysql_query("SELECT * FROM users WHERE email = '$email'");
$count = mysql_num_rows($usercheck);
$count2 = mysql_num_rows($emailcheck);
$query = "INSERT INTO users (username, password, email, salt) VALUES ('$uname', '$hashedPW', '$email', '$salt')";
$error = "";

if(isset($_POST['submit'])){
    if(empty($_POST['uname']) || empty($_POST['pass']) || empty($_POST['email'] )){
      echo 'A field is empty!';}      
    else{
            if($count != 0){$error = 'Username is already registered.';}
            elseif ($count2 != 0 ) {$error = 'Email is already registered.';}
                else{ mysql_query($query);}
    }
}
?> 
```

登录：

```
<?php
include("config.php");
if (isset($_POST['submit'])) { 
   if (!$_POST['username'] | !$_POST['password'] ) {
    die('You did not complete all of the required fields');
  }
else{
    $username = mysql_real_escape_string($_POST['username']);
    $escapedPW = mysql_real_escape_string($_POST['password']);

    $saltquery = "SELECT salt FROM users WHERE username = '$username';";
    $result = mysql_query($saltquery);

    $row = mysql_fetch_assoc($result);
    $salt = $row['salt'];

    $saltedPW =  $escapedPW . $salt;

    $hashedPW = hash('sha256', $saltedPW);

    $query = "SELECT * FROM users WHERE username = '$username' and password = '$hashedPW';";
    $count = mysql_num_rows($query);

    if($count == 0){
      header("location:index.php?status=1");
    }
      else {
              // store cookie $myusername, $mypassword and redirect to index
      session_start(); 
      $_SESSION['username'] = $username;
      $_SESSION['password'] = $hashedPW;
      setcookie('username', $username, time()+60 * 60 * 4, '/', 'www.site90.net');
      setcookie('password', $hashedPW, time()+60 * 60 * 4, '/', 'www.site90.net');
      header("location:index.php");
    }
}}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T01:31:52.093

有问题的是这些：

```
$query = "SELECT * FROM users WHERE username = '$username' and password = '$hashedPW';";
$count = mysql_num_rows($query); 
```

他们应该是：

```
$sql = "SELECT * FROM users WHERE username = '$username' and password = '$hashedPW';";
$query = mysql_query($sql);
$count = mysql_num_rows($query); 
```

mysql_num_rows() 期望参数是资源而不是字符串： http: [//php.net/manual/en/function.mysql-num-rows.php](http://php.net/manual/en/function.mysql-num-rows.php)

# macos - 如何在不包括实际文件夹的情况下对文件夹的内容进行符号链接？

> ID：12666071
> 
> 赞同：4
> 
> 时间：2012-09-30T23:35:28.633
> 
> 标签：macos, bash, dropbox

我正在尝试将我的 Library/Fonts 目录与我的 Dropbox 中的一个文件夹进行符号链接，这样我就不必继续安装和找出哪台机器有我需要的字体。当我尝试这个时：

`ln -s Fonts/ ~/Library/Fonts`

我得到这个错误作为回报：

`ln: /Users/Username/Library/Fonts/: File exists`

我无法删除该文件夹，因为它是系统要求的，因此不会让您删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:39:30.947

此方法***仅***在目标文件夹*已经*是符号链接时才有效。

使用`ln`OSX 或 BSD 派生的 unix 附带的：

`ln -s -h -F */source/folder/to/use /destination/folder/to/overwrite*`

这`-h`是关键。否则你会得到类似*~/Library/Fonts/Fonts*的东西，因为它会遍历该文件夹。`-F`单独不会尝试覆盖，因为一旦进入该文件夹就不会看到冲突。

*ln* [手册页](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/ln.1.html)的相关部分：

```
 ln [-Ffhinsv] source_file ... target_dir

-s    Create a symbolic link.
-h    If the target_file or target_dir is a symbolic link, do not follow it.
      This is most useful with the -f option, to replace a symlink which may
      point to a directory.
-F    If the target file already exists and is a directory, then remove it
      so that the link may occur. 
```

* * *

*GNU coreutils* `ln`用户：

如果您使用的是软件包中的*GNU* *（linux、brew、macports 等），*请使用：`ln``coreutils`*`-T`*

 *`ln -sTf */source/folder/to/use /destination/folder/to/overwrite*`

此外，使用*GNU* `ln`，您*可以*替换普通文件夹。查看其手册页中的`-t`选项，使用它来指定目标文件夹的父级：

`ln -sf -t */destination/folder/to/overwrite/**..*** */source/folder/to/use*`

需要尾随`/..`来定位*父*目录内的创建，将其保留在原位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T01:19:49.463

`ln -s -F`将在创建链接之前强制创建删除原始目标的链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T23:44:59.860

从您的 Dropbox 目录中删除 Fonts 文件夹（显然您需要将要保存的任何文件移动到其他位置），然后键入：

```
ln -s ~/Library/Fonts Fonts 
```

请注意，您*不*希望最后一个 Fonts 目录的尾随`/`。

编辑地址评论：你说得对，这只链接到一个 /Library/Fonts 文件夹。您可以尝试在一台机器上执行此操作，然后在另一台机器上尝试：

1.  关闭 Dropbox
2.  保存 ~/Dropbox/Fonts 文件夹
3.  执行与第一台计算机相同的符号链接功能 ( `ln -s ~/Library/Fonts Fonts`)
4.  复制任何可能不在这台机器上的字体
5.  重新打开 Dropbox

我还没有尝试过，所以我不知道它是否会起作用，但它应该没有害处。

另一种绝对可行的方法是设置一个 cron 作业，*将*~/Library/Fonts 文件夹中不存在的字体复制到 ~/Dropbox/Fonts 文件夹，反之亦然。如果符号链接技巧有效，我认为那将是首选。*

# susy-compass - Susy 中定义的图像矩阵没有正确排列

> ID：12666083
> 
> 赞同：0
> 
> 时间：2012-09-30T23:38:09.643
> 
> 标签：susy-compass

我想我设法解决了与 Susy 的大部分开始问题。我无法弄清楚的唯一奇怪的事情是为什么它在创建图像矩阵时的行为方式。

这是我的设置：

```
$total-columns: 24;
$column-width: 6%;
$gutter-width: 1%;
$grid-padding: 0;

$container-style: magic; 
```

这是HTML代码：

```
 <section name="Projekte" class="projects" role="main">
        <hgroup>
            <h1 class="maintitle">Unsere Projekte</h1>
            <h2 class="subtitle">Subtitle</h2>
        </hgroup>
        <ul class="moodlegrid">
            <li><a href=""></a><img title="Projekte1" src="img/projekte.jpg"  /></li>
            <li><a href=""></a><img title="Projekte2" src="img/projekte.jpg"  /></li>
            <li><a href=""></a><img title="Projekte3" src="img/projekte.jpg"  /></li>
            <li><a href=""></a><img title="Projekte4" src="img/projekte.jpg"  /></li>
            <li><a href=""></a><img title="Projekte5" src="img/projekte.jpg"  /></li>
            <li><a href=""></a><img title="Projekte6" src="img/projekte.jpg"  /></li>
            <li><a href=""></a><img title="Projekte7" src="img/projekte.jpg"  /></li>
            <li><a href=""></a><img title="Projekte8" src="img/projekte.jpg"  /></li>
            <li><a href=""></a><img title="Projekte9" src="img/projekte.jpg"  /></li>           
        </ul>
        <div class="proper"></div>
    </section><!-- end section --> 
```

这应该是一个 3x3 的图像矩阵，页面上的其他地方应该有一个 7x4 的图像矩阵，但两者都表现得很奇怪。两者都不尊重两边都有 3 个边距栏以及它们的位置。

假设的 7x4 矩阵看起来像[这样](https://dl.dropbox.com/u/8578/7x4.png)，假设的 3x3 矩阵看起来像[这样](https://dl.dropbox.com/u/8578/3x3.png)。

这是CSS代码：

```
section {
    @include boxcolor($section-container);
    width: 100%;
    @include no-bullets;
    @include box-shadow(black 2px 2px 10px);
    margin-bottom: 2*1.5em;
    padding-bottom: 2*1.5em;
    clear: both;
}

.customers li {
    @include squish(3,3);
    @include span-columns(2,18);
    @include nth-omega(7n);
    margin-left:0;
}

.moodlegrid li{
    @include squish(3,3);
    @include span-columns(6,18);
    @include nth-omega(3n);
    margin-left:0;
} 
```

暂时就是这样。有人知道为什么苏西会这样吗？尤其是在 3x3 矩阵上，所有内容基本上都应该适合：`6 + 3*6`等于我设置的列数。不知何故令人困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:50:06.483

您不想压缩用于列的相同元素。你想压扁父母。目前，`squish`没有做任何事情，因为你用`span-columns`.

```
.customers {
  @include squish(3,3);
  li {
    @include span-columns(2,18);
    @include nth-omega(7n);
  }
}

.moodlegrid 
  @include squish(3,3);
  li{
    @include span-columns(6,18);
    @include nth-omega(3n);
  }
} 
```

# php - Symfony 2.1 kernel.request 事件不能覆盖 _controller

> ID：12666085
> 
> 赞同：0
> 
> 时间：2012-09-30T23:38:16.267
> 
> 标签：php, symfony, twig, symfony-2.1

我正在尝试向特定控制器发送一些请求。我在这里关注 Kris Wallsmith 的回答：

[来自数据库的 Symfony2 路由规则](https://stackoverflow.com/questions/8799623/symfony2-routing-rules-from-database)

但是，当我覆盖请求的 _controller 属性时，我的模板不再用基本模板装饰。

我究竟做错了什么？

这是我的听众服务：

```
// src/Acme/DemoBundle/RequestListener.php
namespace Acme\DemoBundle;

use Symfony\Component\HttpKernel\HttpKernelInterface;
use Symfony\Component\HttpKernel\Event\GetResponseEvent;

class RequestListener
{
    public function onKernelRequest(GetResponseEvent $event)
    {
        if (some logic) {
            $request = $event->getRequest();
            $request->attributes->set('_controller', 'Acme\DemoBundle\Controller\DefaultController::testAction');
        }
    }
} 
```

这是我的模板：

```
{# src/Acme/DemoBundle/Resources/views/Default/test.html.twig #}
{% extends '::base.html.twig' %}

{% block title %}Test{% endblock %}

{% block body %}
    {{ body | markdown }}
{% endblock body %} 
```

这是我的控制器：

```
// src/Acme/DemoBundle/Controller/DefaultController.php

/**
 * @Route("/test")
 * @Template()
 */
public function testAction()
{
    return $this->render('AcmeHelloBundle:Default:test.html.twig', array('body' => 'test'));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:02:35.810

不知道它是否有帮助，但在 2.0 中我使用

```
$controller = $event->getController();
$event->setController(controller); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:58:06.880

您必须使用 kernel.controller 事件。[http://symfony.com/doc/2.1/book/internals.html#kernel-controller-event](http://symfony.com/doc/2.1/book/internals.html#kernel-controller-event)

`FilterControllerEvent`作为参数传递给您的侦听器方法并使用`setController, getController`事件类的方法。

# php - 获取字符串中的当前+下一个单词

> ID：12666094
> 
> 赞同：2
> 
> 时间：2012-09-30T23:40:58.497
> 
> 标签：php, string

这就是我试图得到的： `My longest text to test`当我搜索例如`My`我应该得到`My longest`

我尝试使用此功能首先获取输入的完​​整长度，然后搜索''来剪切它。

`$length = strripos($text, $input) + strlen($input)+2;`

`$stringpos = strripos($text, ' ', $length);`

`$newstring = substr($text, 0, strpos($text, ' ', $length));`

但这仅在第一次有效，然后在当前输入后切断，意味着 `My lon`is`My longest`和 not `My longest text`。

我必须如何改变它以获得正确的结果，总是得到下一个单词。也许我需要休息一下，但我找不到正确的解决方案。

**更新**

这是我的解决方法，直到我找到更好的解决方案。正如我所说，使用数组函数不起作用，因为部分单词应该起作用。所以我扩展了我之前的想法。基本思想是在第一次和下一次之间有所不同。我稍微改进了代码。

```
function  get_title($input, $text) {
    $length       = strripos($text, $input) + strlen($input);   
$stringpos = stripos($text, ' ', $length);
// Find next ' '
$stringpos2 = stripos($text, ' ', $stringpos+1);

if (!$stringpos) {
    $newstring = $text;
} else if ($stringpos2) {
    $newstring = substr($text, 0, $stringpos2);
}  } 
```

不漂亮，但嘿，它似乎工作^^。无论如何，也许你们中的某个人有更好的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T23:45:42.647

您可以尝试使用`explode`

```
$string = explode(" ", "My longest text to test");
$key = array_search("My", $string);
echo $string[$key] , " " , $string[$key + 1] ; 
```

您可以使用不区分大小写的方式将 i 提升到一个新的水平`preg_match_all`

```
$string = "My longest text to test in my school that is very close to mY village" ;
var_dump(__search("My",$string)); 
```

输出

```
array
  0 => string 'My longest' (length=10)
  1 => string 'my school' (length=9)
  2 => string 'mY village' (length=10) 
```

使用的功能

```
 function __search($search,$string)
 {
    $result = array();
    preg_match_all('/' . preg_quote($search) . '\s+\w+/i', $string, $result);
    return $result[0]; 
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T23:45:05.717

一种简单的方法是将其拆分为空白并获取当前数组索引加上下一个：

```
// Word to search for:
$findme = "text";

// Using preg_split() to split on any amount of whitespace
// lowercasing the words, to make the search case-insensitive
$words = preg_split('/\s+/', "My longest text to test");

// Find the word in the array with array_search()
// calling strtolower() with array_map() to search case-insensitively
$idx = array_search(strtolower($findme), array_map('strtolower', $words));

if ($idx !== FALSE) {
  // If found, print the word and the following word from the array
  // as long as the following one exists.
  echo $words[$idx];
  if (isset($words[$idx + 1])) {
    echo " " . $words[$idx + 1];
  }
}

// Prints:
// "text to" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T23:45:16.383

有更简单的方法可以做到这一点。如果您不想寻找特定的东西，但要剪掉某些东西的预定义长度，则字符串函数很有用。否则使用正则表达式：

```
 preg_match('/My\s+\w+/', $string, $result);

 print $result[0]; 
```

这里`My`寻找字面的第一个词。`\s+`对于某些空间。While`\w+`匹配单词字符。

这增加了一些新的语法来学习。但没有变通办法和更长的字符串函数代码来完成同样的事情那么脆弱。

# lisp - Lisp：生成 10 个随机整数的列表

> ID：12666095
> 
> 赞同：3
> 
> 时间：2012-09-30T23:41:09.687
> 
> 标签：lisp, common-lisp

这是我的第一个普通 lisp 作业的一部分。

我们必须定义一个变量来表示从 0 到 100 的任意 10 个随机整数：我不确定这里要问什么。我应该写：`(setf var1 '())`

然后，我们必须定义一个函数，该函数生成一个包含 10 个随机整数的列表并返回一个包含这些数字的列表。

这是我写的，但我一直得到 NIL 作为我的输出。你知道代码有什么问题吗：

```
(setf *random-state* (make-random-state t))
(setf var1 '())

(defun randlist (var1)
(dotimes (i 10)
    (setf temp (random 101))
        (cons 'temp var1  ) ) ) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-30T23:57:52.487

编写一个函数，*返回*一个包含 10 个随机整数的新列表：

```
(defun randlist ()
  (let ((lst ()))
    (dotimes (i 10)
       (setf lst (cons (random 101) lst)))
   lst)) 
```

然后您可以将其结果分配给一个变量：

```
(defvar var1 (randlist)) 
```

**[演示](http://ideone.com/fol05)**。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-01T00:02:24.750

你不需要`*random-state*`像那样初始化。无论如何，这是默认设置。如果您有不同的随机数生成器实现，则需要对其进行初始化。

虽然`(setf whatever nil)`可能会起作用，但这不是您声明变量的方式。`setf`是一个为符号赋值的宏。通常，您首先创建符号，然后分配给它们。如果您需要动态变量，您的选项是`defparamter`或`defvar`宏，例如：

```
(defparameter var1 nil)
(defvar var2 nil) 
```

您的函数`randlist`返回`nil`，因为这是`dotimes`宏返回的内容，这是函数中执行的最后一个形式。您可以将其更改为 return `var1`，但是使用动态变量，尤其是这种方式，并不是一个好的编码习惯。从任务中听起来好像你被要求简单地编写一个返回十个整数列表的函数，不需要也将它分配给函数外部的动态变量。

```
(defun randlist ()
  (loop for i from 0 below 10 collect (random 101))) 
```

可能是最简单的方法。但是真的有很多很多其他的方法:)

只是为了好玩，这里有一个替代方案，虽然不是特别好。我希望它更短，但事实并非如此:)

```
(defun random-list ()
  (mapcar #'random (make-list 10 :initial-element 101))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-16T15:46:00.707

让我们用递归来做到这一点：

```
(defun rnd-list()
  (rnd-list-1 10 10))

(defun rnd-list-1 (limit count)
  (cond ((<= count 0)
         nil)
        (t
         (cons (random limit)
               (rnd-list-1 limit (1- count)))))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T23:45:22.340

或者你可以这样做——

```
(defun rnd-list()
  (let (lst)
    (dotimes (n 100)
      (push (random 101) lst))
    (reverse lst))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-22T23:05:08.567

授权[do](http://www.lispworks.com/documentation/HyperSpec/Body/m_do_do.htm)，迭代`n`并定义`lst`为空列表；当`n`到达`10`return `lst`。在每次迭代`push`中，一个随机数到`lst`。

```
(do ((n 1 (incf n))
     (lst ()))
    ((> n 10) lst)
  (push (random 101) lst))

=> (31 35 59 19 84 54 62 44 69 54) 
```

# android - java.lang.RuntimeException 并且无法实例化

> ID：12666105
> 
> 赞同：1
> 
> 时间：2012-09-30T23:43:31.343
> 
> 标签：android, eclipse, andengine, runtimeexception

我试图找到解决方案，但它在我的 n00b 眼中看起来很正确，所以我完全迷路了。我试过寻找其他问题，他们似乎都有不同的答案，所以他们根本没有帮助。这是我正在尝试使用的一些示例代码，因此我为奇怪的命名道歉。

我收到此错误

```
09-30 17:22:26.467: E/AndroidRuntime(273): FATAL EXCEPTION: main
09-30 17:22:26.467: E/AndroidRuntime(273): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{test.test/test.test.test.splashScreen}: java.lang.ClassNotFoundException: test.test.test.splashScreen in loader dalvik.system.PathClassLoader[/data/app/test.test-1.apk] 
```

这是我的清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"  
package="test.test" android:versionCode="1" android:versionName="1.0">
<uses-sdk android:minSdkVersion="8" />

<application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".test.splashScreen" android:label="@string/app_name"
        android:clearTaskOnLaunch="true">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".test.Game" android:screenOrientation="landscape" android:theme="@style/Theme.NoBackground"/>
    <activity android:name=".test.test" />
    <activity android:name=".test.TMXTiledMapExampleAStar" />
    <activity android:name=".test.Options" />
    <activity android:name=".test.MainMenu" />
</application>
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WAKE_LOCK"/> 
```

这是 splashScreen 文件的开头

```
package test.test.test;

public class splashScreen extends BaseGameActivity { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T00:26:05.497

首先，给你的包裹起更直观的名字！我更愿意发表评论，但我没有足够的代表。

2条建议：

尝试清理您的项目

尝试：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="test.test" android:versionCode="1" android:versionName="1.0"> 
```

和

```
<activity android:name=".splashScreen" android:label="@string/app_name"
        android:clearTaskOnLaunch="true"> 
```

# gwt - GWT 不加载 *.nocache.js

> ID：12666106
> 
> 赞同：7
> 
> 时间：2012-09-30T23:44:03.360
> 
> 标签：gwt, maven, tomcat7, gwt-maven-plugin

我有这个使用 gwt-maven-archetype 构建的 Maven 项目。虽然它与`mvn gwt:run`目标完美运行，但是当我尝试在 tomcat7 容器中运行它`mvn tomcat:run`或者`mvn gwt:compile && mvn tomcat:run`它不加载 GWT 动态创建的小部件时。

根据 Google Chrome 控制台，它无法找到该`*.nocache.js`文件，即使在该`/target/`文件夹中它正是它预期的位置。

我目前正在尝试在入口点模块中显示一个简单的“Hello”标签：

## GWT 入口点

```
public class Hello implements EntryPoint {

    public void onModuleLoad() {    
        Label hello = new Label("TESTESTSTSTS");

        RootPanel.get("helloContainer").add(hello);

    }

} 
```

## *.html

```
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="veltisto.css">
    <title>Web Application Starter Project</title>
    <script type="text/javascript" language="javascript" src="veltisto/veltisto.nocache.js"></script>
  </head>
  <body>
    <iframe src="javascript:''" id="__gwt_historyFrame" tabIndex='-1' style="position:absolute;width:0;height:0;border:0"></iframe>
    <noscript>
      <div style="width: 22em; position: absolute; left: 50%; margin-left: -11em; color: red; background-color: white; border: 1px solid red; padding: 4px; font-family: sans-serif">
        Your web browser must have JavaScript enabled
        in order for this application to display correctly.
      </div>
    </noscript>
    <div id="helloContainer"></div>
  </body>
</html> 
```

## POM.XML

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <!-- POM file generated with GWT webAppCreator -->
    <modelVersion>4.0.0</modelVersion>
    <groupId>gr.veltisto</groupId>
    <artifactId>web</artifactId>
    <packaging>war</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>GWT Maven Archetype</name>

    <properties>
        <!-- Convenience property to set the GWT version -->
        <gwtVersion>2.4.0</gwtVersion>
        <!-- GWT needs at least java 1.5 -->
        <webappDirectory>${project.build.directory}/${project.build.finalName}</webappDirectory>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-servlet</artifactId>
            <version>${gwtVersion}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-user</artifactId>
            <version>${gwtVersion}</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
            <classifier>sources</classifier>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>com.github.gwtbootstrap</groupId>
            <artifactId>gwt-bootstrap</artifactId>
            <version>2.0.4.0</version>
        </dependency>
    </dependencies>

    <build>
        <!-- Generate compiled stuff in the folder used for developing mode -->
        <outputDirectory>${webappDirectory}/WEB-INF/classes</outputDirectory>

        <plugins>

            <!-- Copy static web files before executing gwt:run -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1.1</version>
                <executions>
                        <execution>
                        <phase>compile</phase>
                        <goals>
                            <goal>exploded</goal>
                                </goals>
                        </execution>
                </executions>
                <configuration>
                    <webappDirectory>${webappDirectory}</webappDirectory>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.5</source>
                    <target>1.5</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.tomcat.maven</groupId>
                <artifactId>tomcat7-maven-plugin</artifactId>
                <version>2.0</version>
                <configuration>             
                    <path>/veltisto</path>
                </configuration>
            </plugin>

            <!-- GWT Maven Plugin -->
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>gwt-maven-plugin</artifactId>
                <version>2.4.0</version>
                <executions>
                    <execution>
                                <goals>
                            <goal>compile</goal>
                                </goals>
                        </execution>
                </executions>
                <!-- Plugin configuration. There are many available options, 
                   see gwt-maven-plugin documentation at codehaus.org -->
                <configuration>
                    <runTarget>veltisto.html</runTarget>
                    <hostedWebapp>${webappDirectory}</hostedWebapp>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

## *.GWT.XML

```
<module rename-to='veltisto'>
    <!-- Inherit the core Web Toolkit stuff. -->
    <inherits name='com.google.gwt.user.User' />
    <inherits name="com.google.gwt.uibinder.UiBinder" />
    <!-- We need the JUnit module in the main module, -->
    <!-- otherwise eclipse complains (Google plugin bug?) -->
    <inherits name='com.google.gwt.junit.JUnit' />

    <!-- Inherit the default GWT style sheet. You can change -->
    <!-- the theme of your GWT application by uncommenting -->
    <!-- any one of the following lines. -->
    <inherits name='com.google.gwt.user.theme.standard.Standard' />
    <!-- <inherits name='com.google.gwt.user.theme.chrome.Chrome'/> -->
    <!-- <inherits name='com.google.gwt.user.theme.dark.Dark'/> -->

    <!-- Other module inherits -->

    <inherits name="com.google.gwt.uibinder.UiBinder" />
    <inherits name="com.github.gwtbootstrap.Bootstrap" />

    <!-- Specify the app entry point class. -->
    <entry-point class='gr.veltisto.web.client.Hello' />

    <!-- Specify the paths for translatable code -->
    <source path='client' />
    <source path='shared' />

</module> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T08:07:35.553

`tomcat7:run`只使用`src/main/webapp`. 你会想要使用`tomcat7:run-war`（它会做 a `package`）或`tomcat7:run-war-only`（如果你已经有一个`war:exploded`结构）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T02:08:58.780

使用 firebug 或 chrome 的检查器，您是否看到正确加载了`.nocache.js`and文件？`.cache.html`还是有像 404 这样的错误？如果有 404，请查看您的 war 目录中错误指定的路径 - 文件在那里吗？

如果`.nocache.js`文件丢失或位置错误，则可能意味着从`*.html`您列出的页面到编译好的 JS 的路径错误。

如果`.cache.html`文件丢失，通常意味着 gwt:compile 被跳过，或者 gwt:run 或 gwt:debug 在编译期间或之后运行。不要`gwt:compile`紧跟`gwt:run`or `:debug:`，因为后两个将删除编译的文件。

最后一个想法：该`tomcat:run`阶段可能正在尝试获取已完成的`.war`文件，而您`war:exploded`不会创建一个。此外，当您运行 时`gwt:compile`，这可能不会导致构建完整的编译 war 目录。要处理所有这些问题，请考虑先让您的构建工作以生成一个 war 文件，然后再尝试使`tomcat:run`行为正常。这里的第一步是映射`gwt:compile`到`prepare-package`阶段，然后确保完成的战争包含预期的`.nocache.js`和文件。`.cache.html`

# sinatra - 错误块在 Sinatra 应用程序中不起作用

> ID：12666108
> 
> 赞同：5
> 
> 时间：2012-09-30T23:44:13.713
> 
> 标签：sinatra

我有以下 Sinatra 应用程序，我正在测试该`error`块，但它似乎没有工作。

这是我的 sinatra 应用程序：

```
require 'rubygems'
require 'sinatra'

error do
  puts "----> Failed"
  $stdout.print "----> Failed"
end

get "/*" do
  raise "Error!!"
end 
```

我正在使用 sinatra (1.3.3)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T06:51:34.927

你可以加：

```
set :show_exceptions, false 
```

到您的应用程序文件。

在开发环境`show_exceptions`中默认启用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T03:17:22.637

Sinatra 在设置为 mode 时使用自己的错误处理程序`development`，这是默认设置。要显示您的错误，您必须以`production`如下模式运行您的应用程序：

```
ruby my_app.rb -e production 
```

这是特定文档的链接以供进一步参考： [Sinatra README #Environments](http://www.sinatrarb.com/intro#Environments)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-10T03:03:02.053

确保您没有使用测试版 rack

```
gem list rack 
```

如果您看到类似以下内容：

```
rack-1.6.0.beta 
```

卸载这个版本，使用之前的版本 rack-1.5.2

# jquery-ui - Zurb Foundation 与 jQuery UI 自动完成冲突？

> ID：12666114
> 
> 赞同：5
> 
> 时间：2012-09-30T23:45:23.990
> 
> 标签：jquery-ui, zurb-foundation

加载 Zurb Foundation 3.1 后，我无法让 jQuery-UI Autocomplete 工作。

有人让他们一起工作或找到另一个与 Foundation 一起工作的自动完成插件吗？

```
Uncaught TypeError: Object [object Object] has no method 'autocomplete'
(anonymous function) order.js:7
l foundation.min.js:18
c.fireWith foundation.min.js:18
v.extend.ready foundation.min.js:18
A foundation.min.js:18 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T17:25:19.283

它在该页面中运行良好，但如果您使用 Orbit 或 Reveal 等其他组件，并且您有一个构建在 Foundationn 之上的站点，那么**foundation.min.js**是必要的。

**foundation.min.js**包括 Modernizr、jQuery 库、orbit、reveal、工具提示。所以你可以使用foundation.min.js中包含的jQuery库**（** foundation 3.2包括jQuery 1.8.2）。我将这些导入留在了正文的末尾，然后添加了我需要的内容（用于自动完成和日期选择器的 jQuery ui，然后是脚本），所以它最终是这样的：

```
<script src="javascripts/foundation.min.js"></script>
<script src="javascripts/app.js"></script>
<script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>

<script type="text/javascript">
    $(function () {
        var availableTags = [
        "ActionScript",
        "AppleScript",
        "Asp",
        "BASIC",
        "C",
        "C++",
        "Clojure",
        "COBOL",
        "ColdFusion",
        "Erlang",
        "Fortran",
        "Groovy",
        "Haskell",
        "Java",
        "JavaScript",
        "Lisp",
        "Perl",
        "PHP",
        "Python",
        "Ruby",
        "Scala",
        "Scheme"
    ];
        $("#tags").autocomplete({
            source: availableTags
        });
    });
    $(function () {
        $("#datepicker").datepicker();
    });
</script> 
```

脚本按下一个顺序排列

1.  foundation.min.js**它包含 jquery 1.8**
2.  foundation.min.js**它需要 jquery 库**
3.  **它需要 jquery 库和 jquery ui 的**自定义脚本

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T09:10:55.097

与使用 jquery 的 Foundation 框架的库存在冲突。为了将 jQuery UI 与 Foundation Zurb Framework 一起使用，您需要删除代码末尾的两个导入：

**Foundation.min.js 和 javascripts/app.js**

您可以在我的示例代码中看到它正在工作（您必须包含基础资源才能看到它工作（foundation.min.css、app.css 和modernizr.foundation.js）

```
 <!DOCTYPE html>

<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
<meta charset="utf-8" />    
<!-- Set the viewport width to device width for mobile -->
<meta name="viewport" content="width=device-width" />   
<title>jQuery UI Autocomplete - Default functionality</title>   
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />     
<!-- Included CSS Files (Compressed) -->
<link rel="stylesheet" href="stylesheets/foundation.min.css">
<link rel="stylesheet" href="stylesheets/app.css">
<script src="javascripts/modernizr.foundation.js"></script>
<!-- IE Fix for HTML5 Tags -->
<!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

    <script>
    $(function() {
        var availableTags = [
            "ActionScript",
            "AppleScript",
            "Asp",
            "BASIC",
            "C",
            "C++",
            "Clojure",
            "COBOL",
            "ColdFusion",
            "Erlang",
            "Fortran",
            "Groovy",
            "Haskell",
            "Java",
            "JavaScript",
            "Lisp",
            "Perl",
            "PHP",
            "Python",
            "Ruby",
            "Scala",
            "Scheme"
        ];
        $( "#tags" ).autocomplete({
            source: availableTags
        });
    });
    $(function() {
        $( "#datepicker" ).datepicker();
    });
    </script>
    </script>
</head>
<body>
    <br>
    <br>
    <div class="row">
        <div class="four columns">      
            <label for="tags">Programing Language: </label>
            <input type="text" id="tags" placeholder="Language"/>
        </div>
        <div class="four columns">
            <label for="city">Name: </label>
            <input type="text" id="city" placeholder="State" />
        </div>
        <div class="four columns">
            <label for="tags">Date: </label>
            <input type="text" id="datepicker" placeholder="dd/mm/yyyy"/>
        </div>
    </div>  

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T21:42:27.743

**我在foundation.min.js**和**jQuery UI**上遇到了同样的问题。

然后我阅读了@snekkke 的答案并尝试了它。
它适用于某些 UI 功能，但不适用于所有功能（这可能是因为**jQuery UI**和**jQuery**（与***Foundation.min.js****捆绑***）不能很好地协同工作）。**

 **所以我从**foundation.min.js中删除了****jQuery**代码，并为jQuery添加了Google CDN ..Order was..

 **1.  jQuery
2.  基础.min.js
3.  jQuery 用户界面

现在它对我来说工作正常......******

# javascript - 无法将 unicode 字符添加到 js.erb 文件

> ID：12666115
> 
> 赞同：0
> 
> 时间：2012-09-30T23:45:29.647
> 
> 标签：javascript, ruby-on-rails, ruby, unicode

我有一个呈现 Ruby 部分的 .js.erb 文件。现在，一切正常，第一行是

```
<%# encoding: utf-8 %> 
```

稍后当我添加该行时

```
$("#name").text("Name &#x25BC;"); 
```

事情仍然有效，但 Unicode 以代码的形式出现，而不是我想要的字符。当我将上述内容替换为

```
$("#name").text("Name " + &#x25BC;); 
```

部分只是拒绝渲染。我的 Ruby 控制台甚至说谎

```
 Rendered interface/_tan.erb (5.5ms)
  Rendered interface/tan_complete.js.erb (20.0ms) 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T00:01:54.267

您似乎正在使用 jQuery。试试这个：

```
$("#name").html("Name &#x25BC;"); 
```

该`.text()`方法设置`innerText`属性。该`.html()`方法设置`innerHTML`属性。HTML 实体在注入`innerText`属性时呈现为纯文本。

至于为什么`$("#name").text("Name " + &#x25BC;);`无法渲染，我相当确定`&`Ruby 语法中具有特殊意义（尽管我远非专家）并且`#`开始注释，因此该行可能在语法上不正确，从而导致导致部分无法渲染的错误。

# bash - 如何在 gdb 和 octave 下停止控制台以在输出期间提示用户？

> ID：12666118
> 
> 赞同：1
> 
> 时间：2012-09-30T23:45:49.183
> 
> 标签：bash, console, gdb, octave

我正在使用 Kubuntu 及其 Konsole 终端。我在使用来自控制台的不同应用程序（例如 gdb 或 octave）时遇到了烦人的行为。问题如下：程序输出一屏文本然后停止，用双冒号提示我并等待我按任意键以便它可以继续输出。因此，如果输出很大（例如 10000 次八度迭代会打印一些值），我必须多次单击 Enter 直到输出结束。我想一点也不急于求成。我不知道这是由于 bash、Konsole 应用程序还是有问题的程序（例如 gdb 或 octave）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T07:11:39.220

`more off`对于 GNU Octave 的特定情况，您可以通过在 Octave 提示符下运行来关闭此行为。您可能希望将该行添加到您的`.octaverc`文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T23:57:38.810

如果您需要自动重复输入，那么`yes`您的解决方案是：

```
$ yes | any_app_waiting_input 
```

作为默认行为，是打印一个“y”。`yes`如果你想要其他任何东西，你可以提出一个论点，比如换行符：`yes ""`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T00:28:44.337

与 Jantio 的回答类似，您可以通过设置环境变量将 can`cat`用作您的寻呼机：`PAGER`

对于所有命令：

```
export PAGER=cat 
```

对于单个命令：

```
PAGER=cat git log 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T13:04:17.773

对于 GDB，您可以使用“ **set pagination off** ”来更改此行为。请参阅[GDB 手册：屏幕尺寸](http://sourceware.org/gdb/onlinedocs/gdb/Screen-Size.html)。当我使用 GDB 时，我倾向于经常打开和关闭分页。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T00:03:28.880

我认为输出是通过寻呼机呈现的（即可能`less`或`more`）。

绕过此问题的一种简单方法是使用以下命令重定向输出`cat`：

```
my_command | cat 
```

希望这会有所帮助=)

# artificial-intelligence - 使用极小极大搜索不完全信息的纸牌游戏

> ID：12666119
> 
> 赞同：9
> 
> 时间：2012-09-30T23:46:00.807
> 
> 标签：artificial-intelligence, minimax

我想使用极小极大搜索（带有 alpha-beta 修剪），或者更确切地说是负极大搜索，让计算机程序玩纸牌游戏。

纸牌游戏实际上由 4 名玩家组成。因此，为了能够使用极小极大等，我将游戏简化为“我”对抗“他人”。在每一次“移动”之后，你都可以从游戏本身客观地读出当前状态的评价。当所有 4 名玩家都放置了卡片时，最高的玩家将赢得所有玩家 - 卡片的价值计算在内。

由于您不知道其他 3 名玩家之间的卡牌分布究竟如何，我认为您必须使用不属于您的卡牌模拟所有可能的分布（“世界”）。你有 12 张牌，其他 3 名玩家总共有 36 张牌。

所以我的方法是这个算法，其中`player`1 到 3 之间的数字表示程序可能需要为其寻找动作的三个计算机玩家。并`-player`代表对手，即所有其他三名球员。

```
private Card computerPickCard(GameState state, ArrayList<Card> cards) {
    int bestScore = Integer.MIN_VALUE;
    Card bestMove = null;
    int nCards = cards.size();
    for (int i = 0; i < nCards; i++) {
        if (state.moveIsLegal(cards.get(i))) { // if you are allowed to place this card
            int score;
            GameState futureState = state.testMove(cards.get(i)); // a move is the placing of a card (which returns a new game state)
            score = negamaxSearch(-state.getPlayersTurn(), futureState, 1, Integer.MIN_VALUE, Integer.MAX_VALUE);
            if (score > bestScore) {
                bestScore = score;
                bestMove = cards.get(i);
            }
        }
    }
    // now bestMove is the card to place
}

private int negamaxSearch(int player, GameState state, int depthLeft, int alpha, int beta) {
    ArrayList<Card> cards;
    if (player >= 1 && player <= 3) {
        cards = state.getCards(player);
    }
    else {
        if (player == -1) {
            cards = state.getCards(0);
            cards.addAll(state.getCards(2));
            cards.addAll(state.getCards(3));
        }
        else if (player == -2) {
            cards = state.getCards(0);
            cards.addAll(state.getCards(1));
            cards.addAll(state.getCards(3));
        }
        else {
            cards = state.getCards(0);
            cards.addAll(state.getCards(1));
            cards.addAll(state.getCards(2));
        }
    }
    if (depthLeft <= 0 || state.isEnd()) { // end of recursion as the game is finished or max depth is reached
        if (player >= 1 && player <= 3) {
            return state.getCurrentPoints(player); // player's points as a positive value (for self)
        }
        else {
            return -state.getCurrentPoints(-player); // player's points as a negative value (for others)
        }
    }
    else {
        int score;
        int nCards = cards.size();
        if (player > 0) { // make one move (it's player's turn)
            for (int i = 0; i < nCards; i++) {
                GameState futureState = state.testMove(cards.get(i));
                if (futureState != null) { // wenn Zug gültig ist
                    score = negamaxSuche(-player, futureState, depthLeft-1, -beta, -alpha);
                    if (score >= beta) {
                        return score;
                    }
                    if (score > alpha) {
                        alpha = score; // alpha acts like max
                    }
                }
            }
            return alpha;
        }
        else { // make three moves (it's the others' turn)
            for (int i = 0; i < nCards; i++) {
                GameState futureState = state.testMove(cards.get(i));
                if (futureState != null) { // if move is valid
                    for (int k = 0; k < nCards; k++) {
                        if (k != i) {
                            GameState futureStateLevel2 = futureState.testMove(cards.get(k));
                            if (futureStateLevel2 != null) { // if move is valid
                                for (int m = 0; m < nCards; m++) {
                                    if (m != i && m != k) {
                                        GameState futureStateLevel3 = futureStateLevel2.testMove(cards.get(m));
                                        if (futureStateLevel3 != null) { // if move is valid
                                            score = negamaxSuche(-player, futureStateLevel3, depthLeft-1, -beta, -alpha);
                                            if (score >= beta) {
                                                return score;
                                            }
                                            if (score > alpha) {
                                                alpha = score; // alpha acts like max
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            return alpha;
        }
    }
} 
```

这似乎工作正常，但是对于 1 ( `depthLeft=1`) 的深度，程序已经需要平均计算 50,000 次移动（放置的牌）。当然，这太过分了！

所以我的问题是：

1.  实施是否正确？你能模拟这样的游戏吗？关于不完善的信息，尤其是？
2.  如何在速度和工作量方面改进算法？
3.  例如，我可以将可能的移动集减少到 50% 的随机集以提高速度，同时保持良好的结果吗？
4.  我发现[UCT 算法](http://senseis.xmp.net/?UCT)是一个很好的解决方案（也许）。你知道这个算法吗？你能帮我实现它吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-05-04T18:09:19.390

我想澄清接受的答案并没有真正涉及的细节。

在许多纸牌游戏中，您可以对对手可能拥有的未知牌进行抽样，而不是全部生成。在进行此采样时，您可以考虑短花色等信息以及到目前为止持有某些牌的概率，以加权每个可能手牌的可能性（每手牌都是我们将独立解决的可能世界）。然后，您使用完美的信息搜索解决每一手牌。在所有这些世界中最好的举动通常是总体上最好的举动 - 有一些警告。

在像扑克这样的游戏中，这不会很好 - 游戏都是关于隐藏信息的。你必须精确地平衡你的行动，以隐藏你的手的信息。

但是，在诸如基于技巧的纸牌游戏之类的游戏中，这非常有效——尤其是因为新信息一直在被披露。真正优秀的玩家很清楚每个人都持有什么。因此，相当强大的 Skat 和 Bridge 程序都是基于这些想法。

如果你能彻底解决底层世界，那是最好的，但如果你不能，你可以使用 minimax 或 UCT 来选择每个世界中的最佳移动。还有一些混合算法（ISMCTS）试图将这个过程混合在一起。请注意此处的声明。简单的采样方法更容易编码——您应该在更复杂的方法之前尝试更简单的方法。

以下是一些研究论文，它们将提供更多关于不完美信息的抽样方法何时运作良好的信息：

[了解完美信息蒙特卡洛抽样在博弈树搜索中的成功](http://web.cs.du.edu/~sturtevant/papers/pimc.pdf)（本文分析抽样方法何时可能起作用。）

[改进基于技巧的纸牌游戏中的状态评估、推理和搜索](http://web.cs.du.edu/~sturtevant/papers/skat.pdf)（本文描述了在 Skat 中采样的使用）

[具有计算挑战性的游戏中的不完全信息](https://www.jair.org/media/820/live-820-1957-jair.pdf)（本文描述了 Bridge 中的采样）

[信息集蒙特卡洛树搜索](https://pure.york.ac.uk/portal/files/13014166/CowlingPowleyWhitehouse2012.pdf)（本文将采样和UCT/蒙特卡洛树搜索合并，以避免第一参考中的问题。）

公认答案中基于规则的方法的问题在于，它们无法利用超出创建初始规则所需的计算资源。此外，基于规则的方法将受到您可以编写的规则的能力的限制。基于搜索的方法可以利用组合搜索的力量产生比程序作者更强大的游戏。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T04:15:58.490

您实施的 Minimax 搜索对于存在如此多不确定性的游戏来说是错误的方法。由于您不知道其他玩家之间的卡片分布情况，因此您的搜索将花费成倍的时间来探索根据卡片的实际分布情况不可能发生的游戏。

我认为更好的方法是在您对其他玩家的牌知之甚少或根本没有信息的情况下，从良好的游戏规则开始。像：

1.  如果你在一轮中先出牌，则打出最低的牌，因为你赢得这一轮的机会很小。
2.  如果您在一轮中打到最后，则打出您将赢得该轮的最低牌。如果你不能赢得这一轮，那就打出你最低的牌。

让你的程序一开始不用搜索，只需按照这些规则进行游戏*，并假设所有其他玩家也会使用这些启发式方法。* 当程序观察每轮的第一个和最后一个玩家打出的牌时，它可以建立一个关于每个玩家可能持有的牌的信息表。例如，9 会赢得这一轮，但玩家 3 没有玩它，所以他不能有任何 9 或更高的牌。随着关于每个玩家手牌的信息的收集，搜索空间最终将被限制到一个点，即对可能游戏的极小极大搜索可以产生关于下一张要玩的牌的有用信息。

# android - 更新 PreferenceActivity 上的复选框

> ID：12666120
> 
> 赞同：0
> 
> 时间：2012-09-30T23:46:11.143
> 
> 标签：android

如何更新我的 PreferenceActivity？

我在 SharedPreferences 中保存了我的 CheckBox 在活动中的值（在这种情况下，为真）。即使我参加其他活动，我也可以看到这是真的。但是，当我转到我的 PreferenceActivity 时，未选中该复选框，它是错误的。所以我想知道的是，如何在我的 PreferenceActivity 中加载 SharedPreferences，以及如何更新 CheckBox（加载值，如果为真，将 CheckBox 设置为选中状态）。

我应该像这样加载它吗？

```
Shared Preferences SP = getSharedPreferences(DATA, MODE_PRIVATE);
fw = SP.getBoolean("fw", false); 
```

但是，由于无法使用 findViewById，如何将 CheckBox 设置为 true 或 false？

编辑：

我保存 CheckBox 值的活动：

```
Editor edit = SP.edit();
edit.putBoolean("fw", fwbt.isChecked());
edit.commit(); 
```

我的偏好 xml 文件：

```
<CheckBoxPreference
    android:title="CheckBox FW"
    android:key="fw"
    android:summary="Estado do CheckBox" /> 
```

我的偏好活动：

```
public class Prefs extends PreferenceActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.prefs);
        //Don't know what to do here...
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T23:55:35.147

您需要创建一个`Editor`来修改`SharedPreferences`.

**例子**

```
getSharedPreferences(DATA, MODE_PRIVATE).edit().putBoolean("fw", true).commit(); 
```

**更新**

您还需要`SharedPreferences`在 Activity 中定义 used 。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getPreferenceManager().setSharedPreferencesName(DATA);
    addPreferencesFromResource(R.xml.prefs);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T01:50:54.660

我以前没有使用过 PreferenceActivity，但我认为你只需要像任何其他活动一样实现它。

```
public class PreferenceWithHeaders extends PreferenceActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        CheckBox cb = (CheckBox)this.findViewById(IDOFBUTTON);
        ...  do whatever on checkbox

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-14T22:43:04.257

你搞砸了 - PreferenceActivity 从`SharedPreferences`. 所以在你的活动中

```
Shared Preferences SP = PreferenceManager.getDefaultSharedPreferences(this);
Editor edit = SP.edit();
edit.putBoolean("fw", fwbt.isChecked());
edit.commit(); 
```

并且更改应该在您的 PreferenceActivity 中。

还 ：

```
SP.edit().putBoolean("fw", fwbt.isChecked()).commit(); 
```

会做

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T18:25:24.647

我找不到解决办法，所以我放弃了。我刚刚创建了一个自定义首选项，它更容易。

无论如何，我稍后会继续寻找解决方案。

# mdx - mdx 查询 - 将两个查询合并为一个

> ID：12666124
> 
> 赞同：0
> 
> 时间：2012-09-30T23:46:28.113
> 
> 标签：mdx, multidimensional-array, mondrian

我正在使用蒙德里安，我有这个查询（我们称之为 [查询 A]）：

```
SELECT
NON EMPTY {Hierarchize({[Games].[**Some Game Name**]})} ON COLUMNS,
NON EMPTY {Hierarchize({[Users].[User Name].Members})} ON ROWS
FROM [Games_G] 
```

它返回给我一个给定游戏粉丝的用户列表，在从 [查询 A] 返回的用户中，我必须运行 [查询 B]：

```
SELECT
NON EMPTY {Hierarchize({[Games].[Game Name].Members})} ON COLUMNS,
NON EMPTY {Hierarchize({[Measures].[Fans]})} ON ROWS
FROM [Games_G]
WHERE {Hierarchize({{[Users].[**Some Username**], [Users].[**Some UsernameTwo**], [Users].[**Some UsernameThree**], etc}})} 
```

如何在两个查询之间合并？在此先感谢并抱歉成为 mdx-query-noob。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T01:34:29.590

[使用NonEmpty](http://www.iccube.com/support/documentation/mdx/NonEmpty.html)函数的那个​​怎么样：

```
SELECT

   NON EMPTY {Hierarchize({[Games].[Game Name].Members})} ON COLUMNS,
   NON EMPTY {Hierarchize({[Measures].[Fans]})} ON ROWS

FROM ( SELECT 

  NonEmpty( 
     [Users].[User Name].Members, 
     ( [Games].[**Some Game Name**] , [Measures].[Fans] )
  ) on 0 

  FROM [Games_G]

) 
```

[编辑] 蒙德里安似乎不支持子查询

# javascript - Javascript 中允许的日期范围是多少？

> ID：12666127
> 
> 赞同：8
> 
> 时间：2012-09-30T23:48:06.433
> 
> 标签：javascript, datetime

我可以`Date`在 Javascript 中使用对象的最大和最小日期是多少？

是否可以表示古代历史日期（如`January 1, 2,500 B.C.`）或远在未来的日期（如`October 7, 10,000`）？

如果这些遥远的日期不能用`Date`对象表示，我应该如何表示它们？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-30T23:48:06.433

根据[ECMA-262 规范的 §15.9.1.1](http://es5.github.com/#x15.9.1.1)，

> 自 1970 年 1 月 1 日 UTC 以来，时间在 ECMAScript 中以毫秒为单位进行测量。
> ...
> ECMAScript Date 对象支持的实际时间范围是 ... 精确**到 –100,000,000 天到 100,000,000 天，相对于 1970 年 1 月 1 日 UTC 开始时的午夜测量。**这为 1970 年 1 月 1 日 UTC 的任一侧提供了 8,640,000,000,000,000 毫秒的范围。

因此，该物体可表示的最早日期`Date`远远超出了已知的人类历史：

```
new Date(-8640000000000000).toUTCString()
// Tue, 20 Apr 271,822 B.C. 00:00:00 UTC 
```

最新的日期足以持续超过[Y10K](http://en.wikipedia.org/wiki/Year_10,000_problem)甚至超过 Y100K，但需要在 Y276K 之前的几百年进行返工。

```
new Date(8640000000000000).toUTCString()
// Sat, 13 Sep 275,760 00:00:00 UTC 
```

此范围之外的任何日期都将返回`Invalid Date`。

```
new Date(8640000000000001)   // Invalid Date
new Date(-8640000000000001)  // Invalid Date 
```

* * *

简而言之，JavaScript`Date`类型**足以测量 1970 年 1 月 1 日之前或之后大约 285,616 年的时间到毫秒精度**。问题中发布的日期非常舒适地在此范围内。

# c# - 引用的 DLL 未声明？

> ID：12666136
> 
> 赞同：0
> 
> 时间：2012-09-30T23:50:20.440
> 
> 标签：c#, vb.net, visual-studio-2010, dll, components

我在我的应用程序中添加了全局错误处理以捕获所有未处理的异常。我现在刚刚添加了自动将错误添加到我的fogbugz 帐户的功能。现在这是我的问题。

我添加了对 dll 的引用，还必须添加库的导入声明。执行此操作后，代码不会显示任何错误。虽然一旦我去调试代码或构建它，我就会收到这个错误：

未声明“错误报告”。由于其保护级别，它可能无法访问。

我猜它与某种保护有关？这一切都在我的 applicationevents.vb 类中。

**我在另一个项目中尝试过相同的代码，它可以正常工作，所以我知道它不是代码。我只是不知道它是什么？我是否必须更改我的应用程序设置中的某些内容？**无论如何，这是代码。为了隐私，我用我的信息替换了字符串。

```
Imports FogBugz

Namespace My

' The following events are available for MyApplication:
' 
' Startup: Raised when the application starts, before the startup form is created.
' Shutdown: Raised after all application forms are closed.  This event is not raised if the application terminates abnormally.
' UnhandledException: Raised if the application encounters an unhandled exception.
' StartupNextInstance: Raised when launching a single-instance application and the application is already active. 
' NetworkAvailabilityChanged: Raised when the network connection is connected or disconnected.
Partial Friend Class MyApplication

    Private Sub MyApplication_UnhandledException(ByVal _
    sender As Object, ByVal e As  _
    Microsoft.VisualBasic.ApplicationServices.UnhandledExceptionEventArgs) _
    Handles Me.UnhandledException

        'TO DO: SET THESE VALUES BEFORE CALLING THIS METHOD! 
        Dim url As String = "StackOverFlowDemoString"
        'example: http://localhost/fogbugz/scoutSubmit.asp
        Dim user As String = "StackOverFlowDemoString"
        'existing FogBugz User
        Dim project As String = "StackOverFlowDemoString"
        'existing FogBugz project 
        Dim area As String = "StackOverFlowDemoString"
        'existing FogBugz area
        Dim email As String = "StackOverFlowDemoString"
        'email address of the customer who reports the bug
        Dim defaultMessage As String = "Bug has been submitted. Every bug submitted helps us make this software that much better. We really do appreciate it."
        'the message to return to the user if no Scout Message is found for an existing duplicate bug
        Dim forceNewBug As Boolean = False
        'If set to true, this forces FogBugz to create a new case for this bug, even if a bug with the same description already exists.
        '************************************************************************************
        'send the bug we created:
        BugReport.Submit(url, user, project, area, email, forceNewBug, _
        defaultMessage, e.Exception, True, "{0}.{1}.{2}.{3}", True)

        ' If the user clicks No, then exit.
        e.ExitApplication = _
            MessageBox.Show(e.Exception.Message & _
                    vbCrLf & "Oops! It looks like we have encountered a bug. A bug report has been sent to the developers, so they can have it fixed in a jiffy. Continue?", "An Error has occured.", _
                    MessageBoxButtons.YesNo, _
                    MessageBoxIcon.Question) _
                    = DialogResult.No
    End Sub
End Class

End Namespace 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T01:23:56.267

“保护级别”是指您的`BugReport`班级的访问修饰符。

如果将一个类声明为`Friend`(`Internal`在 C# 中)，则同一程序集 (.dll) 中的其他类可以访问它。

当您尝试从另一个项目中引用该类时，它是不可访问的。

您需要更改`Friend`为`Public`.

# java - 在 Java 中提取特定单词及其两侧的多个标记

> ID：12666139
> 
> 赞同：1
> 
> 时间：2012-09-30T23:50:52.780
> 
> 标签：java, regex, text-processing

我需要找到一种好的机制来提取特定单词（由用户提供）和单词两侧的 7 个单词。例如，如果我们有以下文本

```
text = "The mean distance of the Sun from the Earth is approximately 149.6 million kilometers (1 AU), though the distance varies as the Earth moves from perihelion in January to aphelion in July" 
```

如果用户输入“地球”这个词，我应该能够提取文本的以下部分

```
mean distance of the Sun from the Earth is approximately 149.6 million kilometers (1 AU) 
```

所以你可以看到“地球”这个词被每边7个词包围。我怎样才能在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T00:17:22.237

用于`([^ ]+ ?)`匹配单词，并`([^ ]+ ?){0,7}`获取关键字：

```
String text = "The mean distance of the Sun from the Earth is approximately 149.6 million kilometers (1 AU), though the distance varies as the Earth moves from perihelion in January to aphelion in July";
String word = "Earth";
int around=7;
String pattern="([^ ]+ ?){0,"+around+"}"+word+"( ?[^ ]+){0,"+around+"}";        
if(pattern!=null){
    Matcher m = Pattern.compile(pattern).matcher(text);
    if(m.find()){
        System.out.println(m.group());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T00:13:39.303

```
public static void print() throws Exception {

    String s = "The mean distance of the Sun from the Earth is approximately 149.6 million kilometers (1 AU), though the distance varies as the Earth moves from perihelion in January to aphelion in July";
    int presize = 7;
    int postsize = 7;

    String term = "Earth";
    String[] flds = s.split("[\\s]+");

    int idx = 0;
    for (idx = 0; idx < flds.length && !flds[idx].equals(term); idx++) 
        ;

    if (idx == flds.length)
        throw new Exception("Term not found");

    int start = idx-presize;
    if (start < 0)
        start = 0;
    int end = idx+postsize;
    if (end >= flds.length)
        end = flds.length-1;
    for (int i = start; i <= end; i++) {
        System.out.print(flds[i] + " ");
    }
} 
```

# database - 为 SQL Server 2008 数据库项目的每个单元测试插入测试数据

> ID：12666140
> 
> 赞同：1
> 
> 时间：2012-09-30T23:51:10.457
> 
> 标签：database, sql-server-2008, database-project

我有 Visual Studio Premium，我正在为我的数据库使用它附带的测试项目。我希望能够在为我的 Visual Studio SQL Server 2008 数据库项目中的每个测试运行单元测试之前插入测试数据。我是否在测试本身中正确执行此操作，或者是否有其他方法可以为每个单元测试执行数据生成计划？此外，我希望能够在不同的单元测试中重用测试数据。

**编辑：更多细节：** 我有一个存储过程，它在一个假股票程序中匹配买家和卖家，该程序将在工作中运行。我需要进行测试，因为有太多不同的数据组合可以输入到我不想忘记的 SP 中。SP 获取大量买家，WHILE 循环遍历他们，并将他们与卖家一一匹配。希望这能提供足够的细节......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T01:24:15.973

一般来说，我不会将任何需要实际数据库数据的测试称为单元测试。相反，我认为它是一个集成测试。

除了我的挑剔之外，您可以使用 MSTest 中的属性 [TestInitialize] 和 [TestCleanup] 标记您的设置和拆卸方法。这些将在每次测试之前和之后运行。如果要为完整的测试运行设置数据，则可以使用 [ClassInitialize] 和 [ClassCleanup]。

```
[TestInitialize]
public void MyTestInitialize(){
  // Build needed data for my test
 ...
}

[TestCleanup]
public void MyTestCleanup(){
  // Clean up my test data after my test
  ...
} 
```

# node.js - 如何将同步样式代码转换为异步代码？

> ID：12666141
> 
> 赞同：0
> 
> 时间：2012-09-30T23:51:14.557
> 
> 标签：node.js, design-patterns, asynchronous, callback, synchronous

我有一些看起来像这样的同步代码：

```
function bulk_upload(files, callback) { 
  for (file in files) {
   sync_upload(file); // blocks till file uploads
  }
  print('Done uploading files');
  callback();
} 
```

我现在必须使用异步 API`async_upload(file, callback)`而不是`sync_upload(file)`这样做。我有多种选择，但不确定什么是最好的：

1）`sleep`在for循环之后使用a - 这是一个黑客，因为我必须希望我的时间是正确的

2）递归链接我的数组：

```
function bulk_upload(files, callback) {
  if (files.length == 0) {
    print('Done uploading files');
    callback();
  } else {
    async_upload(files.removeLast(), function() { bulk_upload(files, callback); });
  }
} 
```

这不仅是 hacky，而且不是最理想的，因为我可以使用新的`async_upload`API 并行上传我的文件，但我最终还是按顺序上传。

3）使用全局计数器：

```
function bulk_upload(files, callback) {
  uploads = 0
  for(file in files) {
    async_upload(file, function() { uploads++; }); 
  }
  while(uploads < files.length) ; // Empty spin - this is stupid
  print('Done uploading files');
  callback();
} 
```

4）稍微好一点的计数器（但仍然很糟糕）：

```
function bulk_upload(files, callback) {
  uploads = 0
  for(file in files) {
    async_upload(file, function() { 
      if (++uploads == files.length) { // this becomes uglier as I want to await on more stuff
        print('Done uploading files');
        callback();
      }; 
    }); 
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T02:06:15.933

您可以使用[`async`](https://github.com/caolan/async)模块的[`forEach`](https://github.com/caolan/async#forEach)方法来执行此操作：

```
function bulk_upload(files, callback) {
    async.forEach(files, async_upload(file, callback), function (err) {
        if (err) {
            console.error('Failed: %s', err);
        } else {
            console.log('Done uploading files');
        }
        callback(err);
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T00:39:38.627

根据我的评论，看起来这段代码使用期货（未经测试）就足够了。

```
function aync_upload_promise(file) {
    // create a promise.
    var promise = Futures.promise();
    async_upload( file, function(err, data) {
        if (err) {
            // break it
            promise.smash(err);
        } else {
            // fulfill it
            promise.fulfill(data);
        }
    });
    return promise;
}

var promises = [];
for(var i=0; i<files.length; ++i )
{
   promises.push( aync_upload_promise( files[i] ) );
}

Futures
   .join( promises )
   .when( function() {
      print('Done uploading files');
      callback();
   } )
   .fail( function(err) { print('Failed :(', err); } ) 
```

# jsf - 带有密码编码器的 SwitchUserFilter 不起作用

> ID：12666142
> 
> 赞同：0
> 
> 时间：2012-09-30T23:51:39.533
> 
> 标签：jsf, spring-security

我`<password-encoder>`在 AuthenticationManager 中引用了一个和 CustomDetailService。在所有其他安全过滤器（并发、customLogoutFilter 等）之后，我在 spring-security 中添加了以下 bean 和`<http auto-config="false" ..>`：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org
      /2001/XMLSchema-instance"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/security
    http://www.springframework.org/schema/security/spring-security-3.0.xsd">

<!-- Disable annotation-based method security -->
<global-method-security secured-annotations="disabled" />

<beans:bean id="sessionRegistry"
    class="org.springframework.security.core.session.SessionRegistryImpl" />

<!-- Service that provides user credentials for use by the authentication provider -->
<beans:bean id="customDetailService" class="xxx.security.CustomDetailService" />

<!-- Assign the user details service to the default authentication provider -->
<beans:bean class="xxx.security.XyzPasswordEncoder" id="passwordEncoder" />

<!-- Get an alias to the default authentication manager -->
<authentication-manager alias="authenticationManager">
    <authentication-provider user-service-ref="customDetailService">
        <password-encoder ref="passwordEncoder" />
    </authentication-provider>
</authentication-manager>

<!-- Register an exception filter that takes an entry point -->
<beans:bean id="exceptionTranslationFilter"
    class="org.springframework.security.web.access.ExceptionTranslationFilter">
    <beans:property name="authenticationEntryPoint" ref="authenticationEntryPoint" />
    <beans:property name="accessDeniedHandler" ref="accessDeniedHandler" />
</beans:bean>
<beans:bean id="authenticationEntryPoint"
    class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">
    <beans:property name="loginFormUrl" value="/public/auth/login.htmlx" />
</beans:bean>
<beans:bean id="accessDeniedHandler"
    class="org.springframework.security.web.access.AccessDeniedHandlerImpl">
    <beans:property name="errorPage" value="/error/access-denied.jsp" />
</beans:bean>

<!-- Register a custom authentication filter and register success/failure 
    handlers -->
<beans:bean id="customAuthenticationFilter"
    class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
    <beans:property name="authenticationManager" ref="authenticationManager" />
    <beans:property name="sessionAuthenticationStrategy"
        ref="concurrentSessionControlStrategy" />
    <beans:property name="authenticationSuccessHandler"
        ref="loginSuccessHandler" />
    <beans:property name="authenticationFailureHandler"
        ref="loginFailureHandler" />
</beans:bean>

<beans:bean id="concurrentSessionControlStrategy"
    class="org.springframework.security.web.authentication.session.ConcurrentSessionControlStrategy">
    <beans:constructor-arg name="sessionRegistry"
        ref="sessionRegistry" />
</beans:bean>
<beans:bean id="loginSuccessHandler"
    class="org.springframework.security.web.authentication.SimpleUrlAuthenticationSuccessHandler">
    <beans:property name="defaultTargetUrl" value="/LoginSuccess" />
</beans:bean>
<beans:bean id="loginFailureHandler"
    class="org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler">
    <beans:property name="defaultFailureUrl" value="/LoginFailed" />
</beans:bean>

<!-- Register a custom logout filter -->
<beans:bean id="customLogoutFilter" class="xxx.security.LogoutFilterWrapper">
    <beans:property name="logoutSuccessfulUrl" value="/public/auth/login.htmlx" />
    <beans:property name="logoutSuccessfulUrlAdmin" value="/public/auth/admlogin.htmlx" />
    <beans:property name="logoutSuccessfulUrlInactivity"
        value="/public/auth/timedout.htmlx" />
</beans:bean>

<!-- Register a concurrent session filter. This will limit the number of 
    sessions a user can have -->
<beans:bean id="concurrencyFilter"
    class="org.springframework.security.web.session.ConcurrentSessionFilter">
    <beans:property name="sessionRegistry" ref="sessionRegistry" />
    <beans:property name="expiredUrl"
        value="/public/error/multi-login-not-supported.htmlx" />
</beans:bean>

<!-- Register a filter to log in as a different user -->    
<beans:bean id="switchUserProcessingFilter" class="org.springframework.security.web.authentication.switchuser.SwitchUserFilter">
    <beans:property name="userDetailsService" ref="customDetailService" />
    <beans:property name="switchUserUrl" value="/j_spring_security_switch_user" />
    <beans:property name="exitUserUrl" value="/j_spring_security_exit_user" />
    <beans:property name="targetUrl" value="/" />
</beans:bean>

<http auto-config="false" entry-point-ref="authenticationEntryPoint">

    <custom-filter position="FORM_LOGIN_FILTER" ref="customAuthenticationFilter" />
    <custom-filter position="LOGOUT_FILTER" ref="customLogoutFilter" />
    <custom-filter position="CONCURRENT_SESSION_FILTER" ref="concurrencyFilter" />
        <custom-filter position="SWITCH_USER_FILTER" ref="switchUserProcessingFilter" />

            <session-management session-fixation-protection="none" />

    <!-- Configure the filter security interceptor. URL patterns default to 
        Apache Ant path syntax -->
    <intercept-url pattern="/**/xyz_product*" access="ROLE_XYZ_PRODUCT" />
    <intercept-url pattern="/root/user/index.htmlx" access="ROLE_XYZ_PRODUCT" />

    <!-- Allow unrestrictricted access to assets -->
    <intercept-url pattern="/assets/**" filters="none" />

    <!-- Allow unrestrictricted access to public areas -->
    <intercept-url pattern="/public/**" filters="none" />

    <!-- Allow unrestrictricted access to generated resources -->
    <intercept-url pattern="/faces/**" filters="none" />

    <!-- Enforce role-based access for login success servlet -->
    <intercept-url pattern="/LoginSuccess"
        access="ROLE_RESTRICTED,ROLE_ADMIN,ROLE_ADMIN_APP,ROLE_PHYSICIAN,ROLE_NURSE" />

    <!-- Enforce role-based access for user area -->
    <intercept-url pattern="/root/user/**" access="ROLE_PHYSICIAN,ROLE_NURSE" />

    <!-- Enforce role-based access for admin area -->
    <intercept-url pattern="/root/admin/*" access="ROLE_ADMIN,ROLE_ADMIN_APP" />

    <intercept-url pattern="/root/admin/user/**" access="ROLE_ADMIN,ROLE_ADMIN_APP" />

    // ommitted ...

     </http>

    </beans:beans> 
```

这是我的 facelets 页面：

```
<h:form>
    <h:inputText id="j_username" value="" styleClass="textInput" size="50"/>    
    <p>Click <h:commandLink value="here" action="/j_spring_security_switch_user"/> to switch to 
        user </p>
</h:form> 
```

日志中的错误：

> org.springframework.security.web.access.intercept.FilterSecurityInterceptor - RunAsManager 没有改变 Authentication 对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:40:07.477

我能够解决这个问题。问题是当我将 jsf 操作绑定到“/j_spring_security_switch_user”时，我的 jsf 页面没有将 j_username 发送到 SwitchUserFilter。但是，通过控制器绑定的直通是有效的。

我在这里写了我的经验：

[http://www.reverttoconsole.com/blog/spring/switch-user-su-like-behavior-in-spring/](http://www.reverttoconsole.com/blog/spring/switch-user-su-like-behavior-in-spring/)

# c - uint8_t 可以是非字符类型吗？

> ID：12666146
> 
> 赞同：15
> 
> 时间：2012-09-30T23:53:46.460
> 
> 标签：c, language-lawyer

在[这个答案](https://stackoverflow.com/a/1725935/1710520)和附加的评论中，[Pavel Minaev](https://stackoverflow.com/users/111335/pavel-minaev)提出了以下论点，即在 C 中，唯一`uint8_t`可以 typedef 的类型是`char`and `unsigned char`。我正在看[这份 C 标准草案](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)。

*   的存在`uint8_t`意味着相应类型`int8_t`(7.18.1p1) 的存在。
*   `int8_t`是 8 位宽并且没有填充位 (7.18.1.1p1)。
*   相应的类型具有相同的宽度（6.2.5p6），因此`uint8_t`也是 8 位宽。
*   `unsigned char``CHAR_BIT`位宽（5.2.4.2.1p2 和 6.2.6.1p3）。
*   `CHAR_BIT`至少为 8 (5.2.4.2.1p1)。
*   `CHAR_BIT`最多为 8，因为要么`uint8_t`is ，要么它是宽度是(6.2.6.1p4)的倍数`unsigned char`的非`unsigned char`、非位字段类型。`CHAR_BIT`

基于这个论点，我同意，如果`uint8_t`存在，那么它`unsigned char`都具有相同的表示形式：8 个值位和 0 个填充位。这似乎并没有强迫它们是同一类型（例如，6.2.5p14）。

**是否允许将`uint8_t`typedef 定义为具有相同表示的扩展无符号整数类型 (6.2.5p6) `unsigned char`？**当然它必须是 typedef'd (7.18.1.1p2)，并且它不能是任何标准的无符号整数类型`unsigned char`（或者`char`如果它恰好是无符号的）。这种假设的扩展类型不是字符类型（6.2.5p15），因此不符合对不兼容类型（6.5p7）对象的别名访问资格，这让我觉得编译器编写者想要这样做事物。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T00:28:08.700

If `uint8_t` exists, the no-padding requirement implies that `CHAR_BIT` is 8\. However, there's no fundamental reason I can find why `uint8_t` could not be defined with an *extended integer type*. Moreover there is no guarantee that the representations are the same; for example, the bits could be interpreted in the opposite order.

While this seems silly and gratuitously unusual for `uint8_t`, it could make a lot of sense for `int8_t`. If a machine natively uses ones complement or sign/magnitude, then `signed char` is not suitable for `int8_t`. However, it could use an extended signed integer type that emulates twos complement to provide `int8_t`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T00:28:33.260

In 6.3.1.1 (1) (of the N1570 draft of the C11 standard), we can read

> The rank of any standard integer type shall be greater than the rank of any extended integer type with the same width.

So the standard explicitly allows the presence of extended integer types of the same width as a standard integer type.

There is nothing in the standard prohibiting a

```
typedef implementation_defined_extended_8_bit-unsigned_integer_type uint8_t; 
```

if that extended integer type matches the specifications for `uint8_t` (no padding bits, width of 8 bits), as far as I can see.

So yes, *if* the implementation provides such an extended integer type, `uint8_t` *may* be typedef'ed to that.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-25T05:30:46.157

`uint8_t`可能存在并且是与 不同的类型`unsigned char`。

这其中的一个重要含义是重载解决方案。是否：

```
uint8_t by = 0;
std::cout << by; 
```

用途

1.  `operator<<(ostream, char)`
2.  `operator<<(ostream, unsigned char)`或者
3.  `operator<<(ostream, int)`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-01T00:07:07.413

int8_t 和 uint8_t 仅通过 REPRESENTATION 而不是内容（位）不同。int8_t 使用低 7 位作为数据，第 8 位表示“符号”（正或负）。因此 int8_t 的范围是从 -128 到 +127（0 被认为是正值）。

uint8_t 也是 8 位宽，但其中包含的数据始终为正。因此 uint8_t 的范围是从 0 到 255。

考虑到这个事实，char 是 8 位宽。unsigned char 也将是 8 位宽，但没有“符号”。类似地，short 和 unsigned short 都是 16 位宽。

但是，如果“ `unsigned int`”是 8 位宽，那么 .. 因为 C 不是太纳粹，所以它是允许的。为什么编译器作者会允许这样的事情？可读性！

# postgresql - PLV8 是否支持对其他服务器进行 http 调用？

> ID：12666148
> 
> 赞同：3
> 
> 时间：2012-09-30T23:54:42.807
> 
> 标签：postgresql, plv8

如果我使用 PLV8 为 PostgreSql 编写一个函数，我可以从我的 PLV8 函数调用一个带有 get/post 请求的 url 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T07:40:37.023

不，正如 Milen 所解释的那样；使用不受信任的 PL，例如 PL/perlu、PL/pythonu、PL/javau 等。

这样做与[从触发器发送电子邮件](https://stackoverflow.com/a/12003516/398670)具有相同的问题，因为诸如 DNS 配置问题之类的意外问题可能会使您的所有数据库连接忙于等待 HTTP 连接尝试，因此其他任何事情都无法完成任何工作。

相反，使用[`LISTEN`并`NOTIFY`](http://www.postgresql.org/docs/current/static/sql-notify.html)唤醒使用队列表来管理请求的外部帮助程序脚本，如上面链接的答案中所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T00:11:07.997

不，根据[此页面](http://pgxn.org/dist/plv8/doc/plv8.html)和我对“受信任”的理解：

> PL/v8 是一种*受信任*的过程语言，使用安全、运行快速且易于开发，由 V8 JavaScript 引擎提供支持。

# php - 在另一个 IP 上使用 memcache

> ID：12666151
> 
> 赞同：0
> 
> 时间：2012-09-30T23:55:37.313
> 
> 标签：php, memcached

好的，这是我的问题，我有 1 台只有区区 128M 内存的主服务器。我还有一些其他服务器，但它们不支持某些东西，使它们不能用于 Web 服务器（不适合开发（技术原因））。但问题是这些服务器有 4GB 的内存。我想好好利用它们并允许它们用作 memcached 存储桶吗？

这可能吗？

当然你会认为我不使用 4GB 服务器很疯狂，但我不能这样做，因为服务提供商不允许某些端口（25 是导致我出现问题的端口，因为我的 Web 应用程序需要邮件）。

我正在使用 PHP。请告诉我，如果这可以工作，那么如果我没有在我的 Web 服务器上使用 memcached 服务器，我需要安装什么。

我还需要转发哪些端口？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T23:58:11.910

如果您的应用程序需要内存，无论如何都要在这些服务器上运行它！使用您可以完全访问 Internet 的服务器作为这些服务器的网关。

您可以通过多种方式执行此操作，从简单的路由、NAT、代理，甚至只是映射一些端口。

# c - 在循环中执行多个管道

> ID：12666152
> 
> 赞同：1
> 
> 时间：2012-09-30T23:55:39.923
> 
> 标签：c, linux, shell, piping

我非常*接近于*弄清楚我一直在为用 C 编写的 linux shell 编写的程序。我一直想让它工作一段时间，我决定再次拿起它，并在过去一直在修补它几个星期。

对于以下代码，请记住名为**arrayOfCommands**的数组是动态填充的。我的代码用正在运行的当前命令填充 arrayOfCommands。为了我的示例，我们将运行命令**ls -l | wc**和 arrayOfCommands 填充以下内容，具体取决于循环的时间：

```
//Pass #1
arrayOfCommands[]= ("ls", "-l", NULL)

//Pass #2
arrayOfCommands[]= ("wc", NULL) 
```

这是我到目前为止所拥有的：

```
//PIPING
int do_command(char **args, int pipes) {
    // pipes is the number of pipes in the command
    // (In our example, one)

    // The number of commands is one more than the
    // number of pipes (In our example, two)
    const int commands = pipes + 1;  //Ex: 2
    int i = 0;

    // Set up the pipes
    int pipefds[2*pipes];

    for(i = 0; i < pipes; i++){
        if(pipe(pipefds + i*2) < 0) {
            perror("Couldn't Pipe");
            exit(EXIT_FAILURE);
        }
    }

    // Variables
    int pid;
    int status;
    char *str_ptr;

    int j = 0;
    for (i = 0; i < commands; ++i) {

        // A magic function that updates arrayOfCommands with
        // the current command goes here.  It doesn't make 
        // sense in the context of the code, so just believe me! :)

        // Ex: The contents will be "ls -l" or "wc" depending on 
        // which time through the loop we are

        pid = fork();

        if(pid == 0) {
            //if not last command
            if(i < commands){
                if(dup2(pipefds[j + 1], 1) < 0){
                    perror("dup2");
                    exit(EXIT_FAILURE);
                }
            }

            //if not first command&& j!= 2*pipes
            if(j != 0 ){
                if(dup2(pipefds[j-2], 0) < 0){
                    perror("dup2");
                    exit(EXIT_FAILURE);
                }
            }

            for(i = 0; i < 2*pipes; i++){
                    close(pipefds[i]);
            }

            // Should any of the below inputs be *arrayOfCommands or 
            // **arrayOfCommands or &arrayOfCommands?
            // I'm REALLY bad with pointers

            if( execvp(arrayOfCommands, arrayOfCommands) < 0 ){
                    perror(arrayOfCommands);
                    exit(EXIT_FAILURE);
            }
        }
        else if(pid < 0){
            perror("error");
            exit(EXIT_FAILURE);
        }

        j+=2;
    }

    for(i = 0; i < 2 * pipes; i++){
        close(pipefds[i]);
    }

    for(i = 0; i < pipes + 1; i++){
    }
        wait(&status);
} 
```

当我运行它时，我得到了几个错误：

*   dup2：错误的文件描述符
*   ls: |: 没有那个文件或目录
*   ls: wc: 没有这样的文件或目录

有人可以帮我弄清楚以下两件事：

1.  为什么我会收到这些错误？
2.  在 execvp 函数中，我在寻找什么样的指针？ **arrayOfCommands 被初始化为 char *arrayOfArgs[]**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T00:11:44.807

第一件事：

```
//if not last command
if(i < commands) 
```

应该

```
if(i < commands -1) 
```

因为`i`从`0`到那`commands -1` 应该解决 dup2: Bad file descriptor

ls: |: 没有那个文件或目录

ls: wc: 没有这样的文件或目录

都是畸形造成的 `arrayOfCommands`。它必须由

```
char * arrayOfCommands[] = {"ls", "-l", NULL}; 
```

和

```
char * arrayOfCommands[] = {"wc", NULL}; 
```

分别并通过调用`execvp(arrayOfCommands[0], arrayOfCommands)`

本质上必须与您的参数向量（通常）具有`arrayOfCommands`相同的格式。`argv``int main(int argc, char** argv)`

# python - 如何在 Python ctypes 库中查找泄漏

> ID：12666153
> 
> 赞同：12
> 
> 时间：2012-09-30T23:55:52.837
> 
> 标签：python, memory-management, memory-leaks, ctypes

我正在开发一个使用许多开源第三方库的 Python 应用程序。其中一个库是基于 的`ctypes`，我最近在其中发现了 10 多个单独的内存泄漏。这些泄漏的原因包括对具有显式析构函数的对象的循环引用（[Python 不能进行垃圾回收](http://docs.python.org/library/gc.html#gc.garbage)）到`c_char_p`用作返回非常量字符数组的函数的返回类型（导致字符数组自动转换为 Python 字符串和原始的 C 分配的数组永远不会被释放。）

我修复了我发现的漏洞并向图书馆的作者提交了一个拉取请求。我通过在循环中创建和删除对象并观察 Python 的内存使用情况进行了一些非常非正式的测试，我想我已经找到了所有的漏洞。但是，由于我计划在我想开源并希望有其他一些人使用的应用程序中使用这个库，所以我想比这更确定。所以我的问题是：**有没有一种系统的方法来查找`ctypes`基于库的内存泄漏？**

在修复我已经发现的漏洞的过程中，我尝试[了 Heapy](http://guppy-pe.sourceforge.net/#Heapy)和[objgraph](http://mg.pov.lt/objgraph/)，但对于这个目的都不是特别有用。据我所知，它们都只会显示在 Python 堆上分配的对象，因此它们对于查找由 C 库分配的堆空间处理不当引起的泄漏毫无用处。有没有我可以在 Python 中使用的工具，可以显示 C 堆上的分配情况，最好还显示哪些 Python 对象（如果有）引用分配的地址？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T01:34:02.077

您可以尝试在[Valgrind](http://valgrind.org/ "Valgrind 官方网站。")下运行该应用程序。Valgrind 是一个有用的工具，用于分析已编译应用程序中的内存使用情况。这至少会检测到链接并报告其来源。

你肯定会从 Python 调用中得到误报。查看[此站点](http://wiki.wxwidgets.org/Valgrind_Suppression_File_Howto)以获取有关如何使用抑制的很好的描述，它允许您专门忽略某些类型的错误。另请参阅[Python 的预制抑制列表（此处），](http://svn.python.org/projects/python/trunk/Misc/valgrind-python.supp)以及[为什么需要它们的描述（此处）](http://svn.python.org/projects/python/trunk/Misc/README.valgrind)。

# javascript - 需要 DOM 操作帮助

> ID：12666154
> 
> 赞同：2
> 
> 时间：2012-09-30T23:56:20.347
> 
> 标签：javascript, jquery, dom, dom-manipulation

```
<div id="main">
<div class="navigate">
    <ul>
        <li>
            <a href="http://localhost/xm/index.php"><span>xm</span></a> &#187;
        </li>
        <li>
            <a href="http://localhost/xm/index.php?action=admin"><span>Admin</span></a> &#187;
        </li>
        <li>
            <a href="http://localhost/xm/index.php?action=admin;change=name;random02342=randomvaluetoo320230"><span>change</span></a>
            ....... 
```

从这个 html 代码中，我必须在变量中获取随机生成的数据“random02342=randomvaluetoo320230”，这也是随机生成的 random0234 和随机值。我如何通过 Javascript（或非 jquery）实现这一点？

编辑：random02342 和 randomvaluetoo320230 是在服务器端随机生成的。所以就像每次新哈希一样 1stHash4324kjkjdas324324=And2ndAnotherHash324324asd23432

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T23:59:43.177

这会得到它，尽管它可能不会因优雅而赢得任何奖项：

```
var m = document.getElementById('main').innerHTML.match(/random(\d+)=randomvaluetoo(\d+)/);
// m[1] and m[2] are the two random values. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T00:13:34.943

```
var first, second;

var q = $('.navigate ul li a[href*="change=name"]').attr('href').split(';').filter(
    function() {
        return this.contains('random');
    }
).join().replace(/[a-zA-z]/g, '').split('=');

first = q[0];
second = q[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T00:32:23.840

based on your comment:

```
var value = $('selector').attr('href').split(';')[2].split('='); 
```

this will give you value[0] - name, and value[1] - value However this is only if there 3 query params and the random one is the third

Also this might be usefull [Parse query string in JavaScript](https://stackoverflow.com/questions/2090551/parse-query-string-in-javascript)

# security - 不能使用 Doctrine 存储库作为用户提供者

> ID：12666155
> 
> 赞同：1
> 
> 时间：2012-09-30T23:56:22.703
> 
> 标签：security, mongodb, symfony, doctrine-orm, symfony-2.1

我正在尝试创建一个[自定义用户提供程序](http://symfony.com/doc/master/cookbook/security/custom_provider.html)。

我将 my 定义`UserProvider`为服务：

```
myvendor.user_provider:
  class: MyVendor\UserBundle\Service\Security\UserProvider 
```

这个类是一个`DocumentRepository`：

```
namespace MyVendor\UserBundle\Service\Security;

use Symfony\Component\Security\Core\User\UserInterface;
use Symfony\Component\Security\Core\User\UserProviderInterface;
use Symfony\Component\Security\Core\Exception\UsernameNotFoundException;
use Symfony\Component\Security\Core\Exception\UnsupportedUserException;
use Doctrine\ODM\MongoDB\DocumentRepository;
use Doctrine\ODM\MongoDB\DocumentNotFoundException;

class UserProvider extends DocumentRepository implements UserProviderInterface {
    //public function loadUserBy...
} 
```

但我得到这个错误：

```
Catchable Fatal Error: Argument 1 passed to Doctrine\ODM\MongoDB\DocumentRepository::__construct() must be an instance of Doctrine\ODM\MongoDB\DocumentManager, none given, called in /home/www/dev/public/myapp/app/cache/dev/appDevDebugProjectContainer.php on line 258 and defined in /home/www/dev/public/myapp/vendor/doctrine/mongodb-odm/lib/Doctrine/ODM/MongoDB/DocumentRepository.php line 68 
```

似乎那时还没有创建文档管理器，因为我也尝试过注入它，但它抱怨它自己的依赖关系，比如`UnitOfWork`.

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T01:43:41.197

服务定义很棘手

```
myvendor.user_provider:
    class: MyVendor\UserBundle\Service\Security\UserProvider
    factory_service: doctrine.odm.mongodb
    factory_method:  getRepository
    arguments: [ 'MyVendorUserBundle:User\User' ] 
```

# c++ - 几个数据成员的 const 初始化

> ID：12666160
> 
> 赞同：3
> 
> 时间：2012-09-30T23:57:24.837
> 
> 标签：c++, initialization, constants

我想要一个 C++ 类，它从包含一堆数据的文件中初始化，读取数据并将其存储为`const`数据成员。

我目前做的是

```
MyClass(const std::string & fileName):
datum0(),
datum1(),
datum2()
{
  this->read(fileName);
  // read() sets all datumX data members.
} 
```

这样做的缺点是`datumX`s 不能再被标记`const`，因为它们是在实际初始化步骤之后设置的。

这里有什么好的模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T00:10:11.857

单独的解析和构造：

```
struct MyClass
{
    int const a;
    int const b;

    MyClass(int a_, int b_) : a(a_), b(b_) { }
};

MyClass readMyClass(std::istream & is)
{
    int a, b;

    // ...

    return MyClass(a, b);
} 
```

现在你可以说：

```
std::ifstream is("data.bin");
MyClass mc = readMyClass(is); 
```

如果您愿意，还可以使 reader 函数成为`static`类成员函数和构造函数。`private`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T00:09:42.553

而不是一组 datumX 成员 - 将 struct 与这些具有文件构造函数的成员一起使用。并使这个 struct const 数据成员成为你的类：

```
class MyClass {
   ...
   struct MyData {
     MyData(const string& filename) { read(filename); }
     void read(const string& filename);
     int datum1;
     int datum2;
     ...
   };
   const MyData myData;
   MyClass(const string& filename) : myData(filename) {}
}; 
```

# php - 目录中的 PHP 图像 - 随机顺序

> ID：12666161
> 
> 赞同：0
> 
> 时间：2012-09-30T23:57:37.020
> 
> 标签：php, image, random, directory

我有一个网站页面，我用它来存储参考图像..

目前我只是将所有图像放到我服务器上的一个目录中，然后 php 会以我喜欢的方式显示它们。

我想问的是如何让它们在每次刷新页面时以不同的随机顺序显示？

代码如下：

```
$dir = 'images';
$file_display = array ('jpg', 'jpeg', 'png', 'gif');

if (file_exists($dir) ==false) {
echo 'Directory \'', $dir, '\' not found';
} else {
$dir_contents = scandir($dir);

foreach ($dir_contents as $file) {
    $file_type = strtolower(end(explode('.', $file)));

    if ($file !== '.' && $file !== '..' && in_array($file_type, $file_display) == true) {
    echo '<img class="photo" src="', $dir, '/', $file, '" alt="', $file, '" />';
    }
}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T00:07:54.420

为了保证每次顺序都不同，您需要携带有关它们在页面加载之间显示顺序的数据。*但是*，这不一定是您需要的 - 如果您只是每次都随机排序，那么目录中的图像数量越多，您获得相同订单两次的机会就越低。

您可以简单地使用[`shuffle()`](http://www.php.net/manual/en/function.shuffle.php)来随机化数组的顺序：

```
$dir = 'images';
$file_display = array ('jpg', 'jpeg', 'png', 'gif');

if (file_exists($dir) == false) {
    echo 'Directory \'', $dir, '\' not found';
} else {
    $dir_contents = scandir($dir);
    shuffle($dir_contents);

    foreach ($dir_contents as $file) {
        $file_type = strtolower(end(explode('.', $file)));

        if ($file !== '.' && $file !== '..' && in_array($file_type, $file_display) == true) {
            echo '<img class="photo" src="', $dir, '/', $file, '" alt="', $file, '" />';
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T00:06:50.327

看看洗牌功能。 [http://php.net/manual/en/function.shuffle.php](http://php.net/manual/en/function.shuffle.php) 由于 PHP 是无状态的，您要么每次重新扫描目录，要么将 $dir_contents 分配给会话变量。然后你可以简单地打乱会话变量。

```
 if ($file !== '.' && $file !== '..' && in_array($file_type, suffle($file_display)) == true) { 
```

试试看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-07T10:00:02.367

使用 php`shuffle`创建的图像数组`scandir`

```
 $dir = 'images';
 $file_display = array ('jpg', 'jpeg', 'png', 'gif');     
 if (file_exists($dir) == false) {
    echo 'Directory \'', $dir, '\' not found';
 } else {
    $dir_contents = scandir($dir);                    
    if(shuffle($dir_contents)) {                    
      foreach ($dir_contents as $file) {
         $info = new SplFileInfo($file);

      // scandir returns an array of files and,or directories 
      // so we should check if $file is a file 
      // and that it's extension matches the allowed ones 
      // which are ('jpg', 'jpeg', 'png', 'gif')

         if(is_file($file) && in_array($info->getExtension(),$file_display)) {
            echo '<img class="photo" src="', $dir, '/', $file, '" alt="', $file, '" />';                                  
          }          
      }        
    } else {
    echo 'Error applying random order!';
 }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-26T09:41:40.503

请按照以下说明操作：`"php"`在您网站的根目录中创建一个文件夹并放入以下 ​​php 文件`rotate.php`...现在创建一个文件夹`"pic"`并`"xmas"`放入您的根目录...您可以通过编辑 var`$my_folder_holiday`和`$my_folder_default`. ..

```
<?php
  ##########################################################
  # Simple Script Random Images Rotator • 1.4 • 04.01.2020 #
  # Alessandro Marinuzzi [alecos] • https://www.alecos.it/ #
  ##########################################################
  function rotate($folder) {
    if ((file_exists($_SERVER['DOCUMENT_ROOT'] . "/$folder")) && (is_dir($_SERVER['DOCUMENT_ROOT'] . "/$folder"))) {
      $list = scandir($_SERVER['DOCUMENT_ROOT'] . "/$folder");
      $fileList = array();
      $img = '';
      foreach ($list as $file) {
        if ((file_exists($_SERVER['DOCUMENT_ROOT']  . "/$folder/$file")) && (is_file($_SERVER['DOCUMENT_ROOT']  . "/$folder/$file"))) {
          $ext = strtolower(pathinfo($file, PATHINFO_EXTENSION));
          if ($ext == 'gif' || $ext == 'jpeg' || $ext == 'jpg' || $ext == 'png') {
            $fileList[] = $file;
          }
        }
      }
      if (count($fileList) > 0) {
        $imageNumber = time() % count($fileList);
        $img = $folder . '/' . $fileList[$imageNumber];
      }
      return $img;
    } else {
      mkdir($_SERVER['DOCUMENT_ROOT'] . "/$folder", 0755, true);
    }
  }
  $my_gallery_month = date('m');
  $my_folder_default = 'pic';
  $my_folder_holiday = 'xmas';
  if ($my_gallery_month == 12) {
    $my_gallery = rotate($my_folder_holiday);
  } else {
    $my_gallery = rotate($my_folder_default);
  }
?> 
```

使用非常简单，并且在 PHP 7.4 下运行良好......如果您在网站的根目录中有一个文件夹`"pic"`并`"xmas"`包含您的图像，请放入您的 index.php（或位于根目录的其他文件 php）：

```
<a href="/<?php include("php/rotate.php"); echo $my_gallery; ?>"><img src="/<?php echo $my_gallery; ?>" alt="Random Gallery" width="90" height="67"></a> 
```

这是使用`FancyBox`库的另一种用法：

```
<a href="/<?php include("php/rotate.php"); echo $my_gallery; ?>" data-fancybox><img src="/<?php echo $my_gallery; ?>" alt="Random Gallery" width="90" height="67"></a> 
```

希望这可以帮助...

# c++ - 如何使用类

> ID：12666163
> 
> 赞同：0
> 
> 时间：2012-09-30T23:57:44.447
> 
> 标签：c++, class

我一直在学习 C++ 中的课程，我从一本旧的俄罗斯书籍中得到了一些关于书籍类的代码，我尝试修改它并运行它它不起作用可能有助于我理解为什么作者使用这个代码（strdup 是什么做？）

`Author = strdup(autho);`

在构造函数内部并且这行代码有误

```
Book s("edgar", "science", "chemistry for dummies", "502","12.11.13","1.12.96"); 
```

有人有简单直接的解释吗？

主要代码如下

```
using namespace std;

class Book{

    char * Author;
    char * Type;
    char * Title;
    int * Pages;
    unsigned int * Yearpublished;
    unsigned int  * Publishing;

    Book(char * autho, char * type, char * title,   int * pages, unsigned int * yearpublished, unsigned int  * publishing ){

        Author = strdup(autho);
        Type = strdup(type);
        Title = strdup(title);
        Pages = pages;
        Yearpublished = yearpublished;
        Publishing = publishing;

    }

    ~Book(){

        if(Author != NULL){

             free(Author);

        }
        if(Type != NULL){

            free(Type);
        }

        if(Title != NULL){

            free(Title);
        }
    }

};

int main(){

    cout << "main start" << endl;

    Book s("edgar", "science", "chemistry for dummies", "502","12.11.13","1.12.96");

    cout << "main finish" << endl;
return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T00:00:39.087

发布的代码有很多很多问题。如此多的事情，几乎每一行都是错误的。

最明显的一个是您试图将一年存储为`int *`，然后传入一个包含的*字符串*`"12.11.13"`。那是行不通的。你对`pages`;做同样的事情 接受一个`int*`并传入一个*包含*int 的字符串。你不能那样做，这不是指针的工作方式。您对指针的大部分使用表明您并不真正了解指针的作用，在您将一些*非常*难以追踪的错误引入代码`*`之前，您应该停下来阅读指针。您应该将年份存储为字符串（非常糟糕的主意）或将其存储为[unix time](http://en.wikipedia.org/wiki/Unix_time)中的整数，这是非常标准的。

 *您应该将其删除`using namespace std`并替换为`#include <string>`. 你应该扔掉所有以 开头的行`char*`，并用它们替换它们`std::string`并扔掉你的`int*`行并制作它们`int`。

您还声明了一个私有构造函数和析构函数。您需要`public:`在成员变量声明之后但之前添加`Book()`. 然后你应该扔掉你的构造函数的主体并使用初始化列表。

你也不包括`<iostream>`，所以你的`cout`电话可能会导致错误。

完成上述操作后，您应该`~Book()`完全删除析构函数。

例如：

```
class Book{

    std::string Author;
    // ...
    int Pages;
    // ...

    public:

    Book(std::string author, /* ... */ int pages /* ... */)
    : Author(author), Pages(pages) {

    }
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T00:03:30.130

那里有很多错误。

1）您使用的指针太多。在这段代码中，您甚至不需要一个指针。正如 meagar 所指出的，您可以替换`char*`为`std::string`。您不需要指向整数或无符号整数的指针，您可以按原样使用类型。

2) 在调用构造函数时，您传递的是字符串（用引号“”表示）而不是数字。如果要传递数字，请不要使用引号。

3）您使用的是“使用命名空间标准”，这有很多原因是错误的，并且在很多网站上已经解释了很多次，我会让您搜索原因。

4）您正在使用`free()`尚未分配的内存`malloc()`（并且在 C++ 中甚至不会建议，因为我们有`new`and `delete`）。

编辑：如果这是你从一本关于 C++ 的书中获取的真正代码，那么请使用这本书作为点火器，因为它不值得更多。

这是用 C++ 编写的*更*简单的代码版本。

```
#include <iostream>
#include <string>

class Book
{
private:
    std::string Author, Type, Title, Publishing;
    unsigned int Pages, Yearpublished;

public:
    Book(const char* autho, const char* type, const char* title, unsigned int pages,
        unsigned int yearpublished, std::string publishing )
    {
        Author = strdup(autho);
        Type = strdup(type);
        Title = strdup(title);
        Pages = pages;
        Yearpublished = yearpublished;
        Publishing = publishing;
    }

    ~Book()
    {

    }

};

int main()
{
    std::cout << "main start" << std::endl;
    Book s("edgar", "science", "chemistry for dummies", 502, 2012,"1.12.96");
    std::cout << "main finish" << std::endl;

    return 0;
} 
```

还有很多需要改进的地方，但这至少可以编译和运行得很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T00:06:12.577

我对你的问题有点困惑，但我认为你主要问的是什么`strdup`：

它复制传递的字符串并返回一个指向新创建的 jsut 的指针。在析构函数中，你销毁这些分配的字符串，如果有的话。*

# ab-testing - A/B 测试中理想的变化数是多少？

> ID：12666165
> 
> 赞同：0
> 
> 时间：2012-09-30T23:58:00.603
> 
> 标签：ab-testing, abtest

我们计划在我们的网站上测试 27 个按钮，以了解哪个按钮的转化率最高。我不确定这太多的变化是否会给我们准确的结果。有谁知道产生准确结果的理想变化数量是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T04:31:46.547

一般的想法是每次转换 100 次，而 2700 次转换...

# c - 将 +/- 字母等级定义为常数。C

> ID：12666167
> 
> 赞同：0
> 
> 时间：2012-09-30T23:58:13.940
> 
> 标签：c, arrays, constants, c-preprocessor

我正在尝试完成一个实验室，在该实验室中，我必须根据结构链接列表中给出的课程信息计算总平均绩点 (GPA)。我正在尝试用适当的成绩点定义每个字母等级（'A' = 4.0，“A-” = 3.7 ...）。课程成绩存储在字符数组中。我可以使用`#define`导数来定义字母等级 A、B、C、D、E，但我在定义 +/- 等级时遇到了麻烦。使用`#define`导数是完成这项任务的正确方法吗？如果是这样，有人能告诉我正确的语法吗？

```
/* Definition of a data node holding course information */
  struct course {
    int term;
    char name[15];
    char abbrev[20];
    float hours;
    char grade [4];
    char type[12];
    struct course *next;
  };

float gpa ( struct course *ptr )
{
  float totalhours;
  float gpa;
  float gradepoints;

  while (ptr != NULL )
    {
      totalhours += (ptr->hours);
      gradepoints = (ptr->hours * ptr->grade);
    }
  gpa = (gradepoints / totalhours);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T00:33:45.803

What you are looking for is a map, or a dictionary, which is not natively supported in C. You can implement a simple map for your use case as an array of `struct`s as such:

```
struct GradeInfo {
  char *grade;
  float value;
};
struct GradeInfo GRADES[] = { {"A", 4.0}, {"A-", 3.7}, ..., {NULL, 0.0}}; 
```

Then loop over this array inside your for loop (fixing a few more bugs):

```
float gpa ( struct course *ptr )
{
  float totalhours = 0.0;
  float gradepoints = 0.0;

  for (; ptr; ptr = ptr->next)
    {
      float grade = -1.0;
      struct GradeInfo *info;
      for (info = GRADES; info->grade; ++info) {
        if (!strcmp(ptr->grade, info->grade)) {
          grade = info->value;
          break;
        }
      }
      if (grade < 0) {
        continue;
      }
      totalhours += (ptr->hours);
      gradepoints = (ptr->hours * ptr->grade);
    }
  if (!totalhours) {
    return 0.0;
  }
  return (gradepoints / totalhours);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T00:27:15.207

What you want is string literals, not variables with those names ... you could define macros, but it just adds a pointless extra level since the mapping is fixed. e.g.,

```
// grade_string is a string read from the input
float grade_value;

if (strcmp(grade_string, "A") == 0)
    grade_value = 4.0;
else if (strcmp(grade_string, "A-") == 0)
    grade_value = 3.7;
etc. 
```

There are a couple of more compact ways you can do this.

1) Create an array of mappings, e.g.,

```
struct {
    char*  string;
    double value; 
} grades = { {"A", 4.0}, {"A-", 3.7}, etc. }; 
```

and loop over this array, comparing the strings to grade_string and extracting the value. e.g.,

```
int ngrades = sizeof grades / sizeof *grades;
int i;
for(i = 0; i < ngrades; i++)
    if (strcmp(grades[i].string, grade_string) == 0)
    {
        grade_value = grade[i].value;
        break;
    }

if (i == ngrades)
    /* invalid grade */ 
```

2) Use a hash table. This would be advisable if you had a large number of mappings.

# scala - 将多个 WS 调用合并为一个结果时处理错误

> ID：12666169
> 
> 赞同：2
> 
> 时间：2012-09-30T23:59:27.327
> 
> 标签：scala, playframework-2.0

我正在同时学习 scala、play 和 web 服务，所以请耐心等待。我已经建立了一个小聚合服务，它结合了天气网络服务和谷歌的地理编码和地点网络服务。我有一些工作，但我对处理错误的正确方法有点困惑。（我把代码贴在文末）

所以地方 api 使用纬度/经度，所以我使用地理编码 api 从邮政编码中获取纬度/经度。在处理来自对地理编码 api 的调用的响应时，我最终得到一个`(Option[String], Option[String])`（保存在`maybeLoc`val 中）。在检查的 match 语句中`maybeLoc`，如果它最终是`(None, None)`，我会返回，`Promise()`因为我需要`Promise`从 flatmap 调用中返回 a 。

我对此有两个问题：

1.) 在这些 flatMap 或 map 调用之一中处理无法进行任何进一步处理的情况的正确方法是什么？它需要我回报一个承诺，但是`Promise`当我去赎回它时，做一个只会超时的空似乎是一个非常糟糕的主意。

2.）我是否正确地假设调用`Promise()`做一个空的承诺对象，在尝试赎回它时总是会超时？我真的无法从 scaladoc 中分辨出来，也无法从谷歌找到任何关于它的信息。

我希望我的问题对你有意义并且足够清楚。这是代码：

```
def bothAsJson(zipcode:String) = Action {
    val promiseOfLoc = Geocode.buildUrlFor(zipcode).get()
    val promiseOfWeather = Weather.buildUrlFor(zipcode, "json").get()

    val result = promiseOfLoc.flatMap { locResp => 
        val maybeLoc = Geocode.extractLocation(locResp.body.toString())
        maybeLoc match {
            case (Some(lat), Some(lng)) => {
                val promiseOfPlaces = Places.buildUrlFor(lat,lng).get()
                promiseOfPlaces.flatMap { placesResp =>
                    promiseOfWeather.map { weatherResp =>
                        (weatherResp.body.toString(), placesResp.body.toString())
                    }
                }
            }
            case _ => Promise()
        }
    }

    Async {
        result.orTimeout("Timeout!", 2000).map {response =>
            response.fold(
                result => Ok("Got:\n\nweather:\n" + result._1 + "\n\nplaces:\n" + result._2),
                timeout => InternalServerError(timeout)
            )
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T00:47:55.690

如果你得到 (None, None) 你不应该期待超时，但我相信会返回另一条错误消息。我在下面提供了一个示例。

我认为您需要来自 scalaz 7 的 OptionT。我将其写为：

```
import scalaz._
import Scalaz._

def bothAsJson(zipcode:String) = Action {
    val promiseOfLoc = Geocode.buildUrlFor(zipcode).get.map { Option(_.body.toString()) }
    val promiseOfWeather = Weather.buildUrlFor(zipcode, "json").get
       .map{ lockResp => 
           val (lat,lng) = Geocode.extractLocation(locResp.body.toString())
           (lat |@| lng).tupled
       }
    def buildPlaces(lat: String, lng: String) = Places.buildUrlFor(lat,lng).get
       .map { Option(_.body.toString) }

    val result = (for {
       (lat, lng) <- OptionT(promiseOfLoc)
       places     <- OptionT(Places.buildUrlFor(lat,lng).get())
       weather    <- OptionT(promiseOfWeather)
    } yield (places, weather)).run

    Async {
        result.orTimeout("Timeout!", 2000).map {response =>
            response.fold(
                result => {
                  result.map(
                   some => Ok("Got:\n\nweather:\n" + some._1 + "\n\nplaces:\n" + some._2)
                  ).getOrElse(BadRequest("lat/lng failed probably?"))
                },
                timeout => InternalServerError(timeout)
            )
        }
    }
} 
```

有了`OptionT`flatMap，我们就可以把它当成一个`Option`，如果我们得到一个 None 就可以不处理任何东西。最后，我们留下了一个`Promise[Option[T]]`非常好的。处理错误的另一种好方法是将 Either/EtherT 与相同的方法一起使用。

`|@|`是一个应用生成器。它需要 2 个选项，`Option((Int, Int))`如果双方都是，则返回一个`Some`。如果一侧或两侧是`None`，则返回 a `None`。

请注意，要使其正常工作，您将需要一个 scalaz`Monad[Promise]`实例

```
implicit val PromiseInstance = new Monad[Promise] {
  // override def map[A,B](fa: Promise[A])(f: A => B) = fa.map(f)
  def point[A](a: => A) = Promise.pure(a)
  def bind[A,B](fa: Promise[A])(f: A => Promise[B]) = fa.flatMap(f)
} 
```

另请注意，我已经在 SO 编辑器中编写了所有这些代码，可能缺少大括号。但是所有的代码应该或多或少是正确的，我在 repl 中测试了它的一部分。

请随时在 freenode irc 上的 #scalaz 或 scalaz google 群组上寻求帮助。

# java - 在 Java 中对 ArrayList 进行排序

> ID：12666172
> 
> 赞同：0
> 
> 时间：2012-09-30T23:59:50.243
> 
> 标签：java

因此，我无法弄清楚如何使用我从泛型数组列表提交的信息来更新 TextArea。截至目前，该程序创建了一个新订单：

```
Order d1 = new Order(); 
```

然后用户选择一些数据并按下添加按钮，订单被添加到 TextArea。我遇到的问题是我必须将订单添加到列表中的正确位置并每次更新。我只是按一项排序。我不确定如何使用 CompareTo 方法来做到这一点。

```
 public void actionPerformed(ActionEvent event) 
 {
     ArrayList<Drink> DrinkArray = new ArrayList<Drink>();

     if (event.getSource() == addcoffeeButton)
     {

         String coffeesize = (String) sizecoffeelist.getSelectedItem();
         double coffeeprice = Double.parseDouble(pricecoffeeTextfield.getText());

         String coffeetype = (String) cuptypecoffeelist.getSelectedItem();
         String coffeecaffeine = (String) caffeineList.getSelectedItem();
         String coffeeroom = (String) roomforcreamList.getSelectedItem();
         String coffeeadditional = additionalflavorList.getText();
         if  ((coffeeadditional.isEmpty()))
             coffeeadditional = "No Additional Flavor";

         Drink d1 = new Coffee(coffeesize, coffeeprice, coffeetype, coffeecaffeine, coffeeroom, coffeeadditional);

          DrinkArray.add(d1);
          orderTextArea.append(d1); 
```

因此，在将饮料添加到数组并打印到文本区域之前，我必须将其添加到正确的位置，但我不太确定该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T00:08:22.560

我假设`Drink`实现`Comparable`. 如果您不知道这意味着什么，请查看 javadocs。

如果这是真的，你可以这样做：

```
List<Drink> drinks = new ArrayList<Drink>();
// add Drinks
Collections.sort(drinks); // now they're sorted according to your Comparable. 
```

您还可以实例化 a`Comparator`并将其传递给 sorts 方法。

像这样的东西（让 getValue() 函数随心所欲）：

```
public class DrinkComparator implements Comparator<Drink> {
    public int compare(Drink d1, Drink d2) {
       if (d1.getValue() < d2.getValue()) { 
           return -1;
       } else if (d1.getValue() > d2.getValue()) {
           return 1;
       } else {
           return 0;
       }
    } 

    public boolean equals(Object obj) {
        return this.compare(this, (Drink)obj) == 0;
    }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T00:22:13.880

您基本上需要预先确定插入“对象”的插入点......

看一眼[`Collections.binarySearch(List<T>, T)`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#binarySearch%28java.util.List,%20T%29)

来自 Java 文档

> 回报：
> 
> 搜索关键字的索引，如果它包含在列表中； **否则， (-(插入点) - 1)**。插入点定义为将键插入列表的点：第一个元素的索引大于键，如果列表中的所有元素都小于指定的键，则为 list.size()。请注意，这保证了当且仅当找到键时，返回值将 >= 0。

# java - 反向单链表Java，检查是否循环

> ID：12666178
> 
> 赞同：0
> 
> 时间：2012-10-01T00:01:37.060
> 
> 标签：java, reverse, singly-linked-list, circular-list

我用 Java 实现了一个单链表。我可以反转一个单链表并检查给定的列表是否是循环的。有趣的是我也可以反转一个循环列表，这很奇怪也很有趣。能够反转循环列表是否有意义？实际上它应该一遍又一遍地反转，对吗？目前，我下面的代码能够反转循环列表并终止。这是对的吗？

```
public class ListNode{
    int value;
    ListNode next;  
    public ListNode(int value, ListNode next){
        this.value = value;
        this.next = next;
    }       
    public ListNode next(){
        return next;
    }
    public void setNext(ListNode next){
        this.next = next;
    }
    public int value(){
        return value;
    }
}

public class SinglyLinkedList {

    private ListNode head;

    public SinglyLinkedList(ListNode head){
        this.head = head;
    }

    public void reverse(){
        ListNode current = head;
        head = null;
        while (current!=null){
            ListNode temp = current;
            current = current.next;
            temp.next = head;
            head = temp;
        }
    }

    public static boolean isCircular(SinglyLinkedList list){
        ListNode counter1 = list.head;
        ListNode counter2 = list.head;
        while (counter1!=null && counter2!=null){
            counter1 = counter1.next;
            counter2 = counter2.next;
            if (counter2.next!=null){
                counter2 = counter2.next;
            } else 
                return false;
            if (counter1 == counter2)
                return true;
        }
        return false;
    }

    public static void printSinglyLinkedList(ListNode head){
        ListNode temp = head;
        while(temp!=null){
            System.out.print(temp.value + " ");
            temp = temp.next;
        }
        System.out.println();
    }

    public static void main(String[] s){
        ListNode a4 = new ListNode(4, null);
        ListNode a3 = new ListNode(3, a4);
        ListNode a2 = new ListNode(2, a3);
        ListNode a1 = new ListNode(1, a2);
        a4.setNext(a1);

        SinglyLinkedList list1 = new SinglyLinkedList(a1);
        System.out.println(isCircular(list1));
        if (!isCircular(list1))
            printSinglyLinkedList(list1.head);
        list1.reverse();
        if (!isCircular(list1))
            printSinglyLinkedList(list1.head);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:38:30.807

a4.setNext(a1);

删除上面的语句。这使它成为圆形。

# c - 在C中分配大块内存时避免分页？

> ID：12666179
> 
> 赞同：1
> 
> 时间：2012-10-01T00:01:51.173
> 
> 标签：c, memory, paging

我正在使用需要使用大块内存的 Barnes-Hut 算法用 C 语言编写 N 体模拟。我追求速度和效率。有什么方法可以保证这些内存块将保留在 RAM 中而不被分页到硬盘驱动器？

编辑：我想分配多达 2GB，但是可以想象我最终可能会运行一些具有更多内存的模拟。

编辑：解决方案应该支持 Windows7（可能是 Windows8 出来的时候？）和 Ubuntu

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T00:21:08.983

有一些操作系统原语可以满足您的需求：[`mlock`](http://linux.die.net/man/2/mlock)在 Unix 上（Ubuntu 只是其中一个例子¹），以及[`VirtualLock`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366895.aspx)在 Windows 上。（忽略评论中关于 VirtualLock 确切语义的争论；它们与您的用例无关。）

Unix 原语`root`在调用过程中需要特权（一些系统允许在没有特权的情况下锁定*少量*内存，但您想要的远不止这些）。Windows 原语似乎不需要特殊权限。

¹ “Linux 不是 UNIX” 的反对意见被注意到并被偏见地忽略了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T00:25:18.987

对于 Linux： mlock(2) 将完成这项工作。

[https://www.kernel.org/doc/man-pages/online/pages/man2/mlock.2.html](https://www.kernel.org/doc/man-pages/online/pages/man2/mlock.2.html)

但请注意，标准系统上的用户可锁定内存量通常是有限的`ulimit -l`。

Windows 版本是 VirtualLock。不知道有没有限制，怎么查询。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa366895%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366895%28v=vs.85%29.aspx)

# paypal - 嵌入式支付和“此功能暂时不可用”错误

> ID：12666184
> 
> 赞同：0
> 
> 时间：2012-10-01T00:02:14.337
> 
> 标签：paypal, paypal-adaptive-payments

我正在尝试实施嵌入式链式支付。

我已经下载了 PHP PayPal SDK，它在没有嵌入选项的情况下可以正常工作。当我尝试嵌入时出现问题：

我用 sdk 得到了我的 payKey。它返回如下内容：

> 支付 - 响应 responseEnvelope.timestamp: 2012-09-30T16:30:09.512-07:00 responseEnvelope.ack: 成功 responseEnvelope.correlationId: 297f1e4a38b63 responseEnvelope.build: 3779320 payKey: AP-9EB01133M3012281Y paymentExecStatus: CREATED * 将 URL 重定向到完成付款

（链接的参考：[https](https://www.sandbox.paypal.com/webscr&cmd=_ap-payment&paykey=AP-9EB01133M3012281Y) ://www.sandbox.paypal.com/webscr&cmd=_ap-payment&paykey=AP-9EB01133M3012281Y ）

然后，我复制 paykey (AP-9EB01133M3012281Y) 并粘贴到这个 html 代码上：

```
<script type="text/javascript" src="https://www.paypalobjects.com/js/external/dg.js"></script>
<form action= "https://www.sandbox.paypal.com/webapps/adaptivepayment/flow/pay" target="PPDGFrame">
    <input id="type" type="hidden" name="expType" value="light"></input>
    <input id="paykey" type="hidden" name="paykey" value="AP-3GH99339RW1696440"> </input>
    <button id="submitBtn" value="Pay with PayPal"><p style="font-size:20px">Pay</button>
</form> 
<script>var dgFlow = new PAYPAL.apps.DGFlow({ trigger: 'submitBtn' });</script> 
```

单击按钮时，iframe显示正确，但出现错误：“事务已取消。此功能暂时不可用”。如果我单击取消按钮，我将正确重定向到我的 sdk 页面（如果我不嵌入它，则相同）

我正在使用沙盒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T12:25:19.760

创建 PayRequest 消息时不设置 senderEmail 应该可以解决问题。似乎 PayPal 嵌入式流程需要买家/发件人在 PayPal 上手动插入他/她的电子邮件。

# entity-framework - Entity Framework 5.0 中多对多关系中的额外列已审查

> ID：12666186
> 
> 赞同：3
> 
> 时间：2012-10-01T00:03:11.127
> 
> 标签：entity-framework

我正在使用最新的实体框架，当我想创建一个额外的列时遇到了多对多关系的问题。

这个问题与这篇较早的帖子中提出的问题相同： [EF Code First Additional column in join table for ordering purpose](https://stackoverflow.com/questions/7289160/ef-code-first-additional-column-in-join-table-for-ordering-purposes)

今天是否仍然存在问题，即不能在不丢失多对多关系的情况下添加额外的列（从对象 A 到 B 的链接为 AB，因为映射变成了它自己的实体）？

什么是工作？

1.  查找类AI需要的a，然后查询映射表`where(e=>e.A == a)`得到我的Bs？当我需要额外的列时，我会做`MappingTable.find(a,b)`什么？
2.  还有其他建模选项，linq to sql 可以使它更容易吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T00:50:21.683

据我所知，EF 5 并没有改变。您需要按照链接所述进行操作。我喜欢坚持使用 EF，因为它易于使用，但这只是我的意见......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T17:12:04.883

我有同样的问题。我为解决它所做的工作是创建另一个专门用于处理连接的派生 DbContext。IE：

```
public class JoinContext : DbContext
{
    internal JoinContext() : base("name=SampleConnectionString")
    {
        PreventErrorIfDatabaseSchemaChanges();

        // Get the ObjectContext related to this DbContext
        var objectContext = (this as IObjectContextAdapter).ObjectContext;
    }

    public DbSet<StudentImage> StudentImages { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<StudentImage>()
            .ToTable("StudentImages");
            .HasKey(joinTable => new { joinTable.StudentId, joinTable.ImageId });

        base.OnModelCreating(modelBuilder);
    }
    private static void PreventErrorIfDatabaseSchemaChanges()
    {
        Database.SetInitializer<JoinContext>(null);
    }
} 
```

我将其他应用程序上下文与 Student/Image 多对多连接映射保持原样。不要忘记为连接表指定复合键（参考上面的 HasKey 方法），否则 EF 会在数据库初始化时发生炸弹。

获得*特殊*连接上下文后，使用存储库访问此上下文并从映射连接表中获取或设置所需字段：

```
public class StudentRepository
{
    public int GetImageSortOrder(int studentId, int imageId)
    {
        var joinContext = new JoinContext();

        var joinTuple = joinContext.StudentImages.Find(studentId, imageId);

        return joinTuple.SortOrder;
    }
} 
```

希望这可以帮助！

# ios - 对加密的二进制数据执行子查询时要覆盖的适当函数

> ID：12666189
> 
> 赞同：0
> 
> 时间：2012-10-01T00:03:35.453
> 
> 标签：ios, core-data, subquery, codec

我正在考虑加密 sqlite 数据模型中的每个属性。加密数据显然会使访问属性值、保存属性值以及从视图（在 MVC 中）的角度搜索属性值变得复杂。

我在想覆盖 NSFetchedResultsController 方法和 NSManagedObjectContext 方法可能就`fetchedResults`足够`performFetch:`了`save:`

通过假设过去可以覆盖，我也遇到了很多麻烦。

由于这可能需要一些时间来处理所有细节，所以我想知道是否有人发现（并验证）了一种适当的方法来添加编解码器机制，这样就不必在代码中的每个地方都进行编码和解码了搜索、访问和保存持久数据？如果是这样，方法是什么？

# objective-c - 带有自定义阴影图像的 UIButton

> ID：12666190
> 
> 赞同：1
> 
> 时间：2012-10-01T00:04:13.837
> 
> 标签：objective-c, ios, user-interface, uikit, uibutton

我需要像这样实现我的按钮的效果：

![在此处输入图像描述](../Images/1adf0cd551794d50d57d02d97bd37f6b.png)

我的问题是：

1.  如何将此自定义阴影添加到按钮，以便只有“按钮”表面对触摸做出反应？
2.  当我在底部有下一个按钮时，靠近上一个按钮，我怎么能确定它不会被上部的按钮阴影覆盖？我需要把所有的按钮都放在前面，把所有的阴影放在后面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T00:12:10.313

1.  如果要添加阴影而不使其可点击，则需要将 imageView 添加为按钮的子视图。（确保剪辑子视图被禁用）。

2.  如果您不希望一个按钮的阴影出现在另一个按钮的顶部，那么您需要将阴影单独添加到主父视图中。选项 1 中的解决方案将不起作用。它不整洁，但它是我能想到的唯一方法。

# git - git 是否有 $HeadURL$ 等价物？

> ID：12666193
> 
> 赞同：1
> 
> 时间：2012-10-01T00:04:54.667
> 
> 标签：git, svn

我正在转换一些 svn 文件，其中一些有 svn 关键字`$HeadURL$`。

我愿意使用`$Format`，但没有看到等效的占位符。

# css - CSS text-align 用于文本以外的其他内容（如按钮）

> ID：12666201
> 
> 赞同：3
> 
> 时间：2012-10-01T00:05:50.487
> 
> 标签：css, alignment, text-align

根据[W3Schools](http://www.w3schools.com/cssref/pr_text_text-align.asp)，该属性用于“对齐元素内的文本”。

然而，当以不同的方式使用它时，比如按钮，它也可以完美地工作。看到[这个 JsFiddle](http://jsfiddle.net/p97Pe/)

在这种情况下使用 align-text CSS 属性是一个好主意，还是像放`float: right`按钮这样的更好的解决方案？

我想知道此属性是否仅用于文本，或者名称是否选择不当。

（正如 Ray Toal 所指出的，答案在[官方 W3C 规范](http://www.w3.org/TR/2003/CR-css3-text-20030514/#alignment-prop)中）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T00:10:17.540

更准确地说，它用于对齐父元素中的文本*和内联元素。*

因此跨度、按钮、带有的元素`display:inline-block`等将根据 对齐`text-align`，而块级元素不受影响（但可以继承容器`text-align`并将其应用于进一步的后代）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T00:09:38.413

您`text-align`在这里的使用非常好。然后，使用浮点数需要从它们的效果中清除以下元素等

非常好：我不会说您示例的 HTML 代码（表格、无标签、无 for/id 关联）

# resources - Java getResourceAsStream 无法加载资源

> ID：12666203
> 
> 赞同：0
> 
> 时间：2012-10-01T00:06:29.180
> 
> 标签：resources, classpath, loading

我正在尝试加载一个名称在属性文件中指定的类。这是相同的代码。

```
try {
    Properties properties = new Properties();   
    InputStream in = MyAbstractFactory.class.getResourceAsStream("/some.properties");
    properties.load(in);
    String impl = properties.getProperty("key");
    MyAbstractFactory factories = (MyAbstractFactory) Class.forName( impl ).newInstance();
    return factories;
} catch (Exception e) {
    return new DefaultFactoriesImpl();
} 
```

此代码是 jar 文件的一部分。属性文件就在 jar 之外。它无法加载属性文件，而是加载 DefaultFactoriesImpl。我知道当 MyAbstractFactory.class.getResourceAsStream 无法在类路径中找到资源时会发生这种情况，但这里似乎并非如此。

目录结构：-

*   com
*   myjar.jar
*   一些.properties

我正在执行的命令是“java -jar myjar.jar”

关于为什么会发生这种情况的任何反馈。这可能与类加载器有关吗？我想补充一点，当我在 Eclipse 中运行此代码时，它似乎可以很好地获取 some.properties。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T00:11:40.793

从传递给的参数中删除前导斜杠`getResourceAsStream()`。

执行 JAR 时，将 JAR 外部的文件夹放入 CLASSPATH。我不知道清单 CLASSPATH 是否会覆盖您可能使用 -cp 传递的那个。玩它；其中之一将工作。

它没有找到您的 .properties 文件，因为它不在 JVM CLASSPATH 中。当您正确执行此操作时，JVM 会找到它。

# perl - 哪些服务器适合开发机器上的 Perl？

> ID：12666207
> 
> 赞同：0
> 
> 时间：2012-10-01T00:07:02.353
> 
> 标签：perl, development-environment

我在大量空闲时间维护一个用 Perl 编写的简单网站，我不想再在实时网站上进行编码，而是先检查更改是否在本地机器上有效。

据我所知，该网站在 apache 上运行。

我应该在本地机器上安装 apache，还是有更简单（但有据可查！）的选项更适合开发框？

相关问题：[如何在 Web 服务器上运行 Perl？](https://stackoverflow.com/questions/2107356/how-can-i-run-perl-on-web-servers)，但似乎是在谈论生产盒，而不是开发盒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T07:28:30.600

[XAMPP](http://www.apachefriends.org/en/xampp.html) 正是用于此目的的出色软件包。它包括 Apache、MySQL、PHP、Perl 和其他工具，所有这些工具都预先配置为在您的本地计算机上运行。我将它用于 WordPress，但我希望它同样适用于 Perl CGI 开发。

我在 Windows 上使用它。它也可用于 Linux 和 Mac。

*向首先提到 XAMPP 的 Kenosis 致敬。我当时没有看到。*

# php - 如何使用 PHP 使用 MD5 加密此密码？

> ID：12666212
> 
> 赞同：1
> 
> 时间：2012-10-01T00:08:57.583
> 
> 标签：php, mysql, encryption, login, md5

下面的代码来自一个用 PHP 编写的登录脚本。它检查密码的数据库使用 MD5 加密密码，但是当登录脚本检查数据库的密码时，它正在检查未加密的原始密码。我熟悉 md5() 函数，但如何将其合并到以下内容中：

```
<?php
session_start();

$username = $_POST['username'];
$password = $_POST['password'];

if ($username && $password) {
    $connect = mysql_connect("host", "user", "password") or die("Couldn't connect");
    mysql_select_db("dbname") or die("Couldn't find the database");

    $query = mysql_query("SELECT * FROM users WHERE username='$username'");
    $numrows = mysql_num_rows($query);

    if ($numrows != 0) {
        while ($row = mysql_fetch_assoc($query)) {
            $dbusername = $row['username'];
            $dbpassword = $row['password'];
        }

        if ($username == $dbusername && $password == $dbpassword) {
            echo "You're in! Click <a href='../member.php'>here</a> to enter the member page.";
            $_SESSION['username'] = $username;
        }else{
            echo "Incorrect password";
        }
    }else{
        die("That username does not exist.");
    }
}else{
    die("Please enter a valid username and password.");
}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T00:13:03.793

您应该检查和查询数据库以查找匹配项，而不是将结果记录下来并在本地检查它们。照这样说：

```
$password = md5($_POST['password']); 
```

然后也改变：

```
SELECT * FROM users WHERE username='$username' AND password='$password' 
```

但我也想看看使用[PDO](http://php.net/manual/en/book.pdo.php)而不是将值直接放在 SQL 查询中。至少你应该使用它[`mysql_real_escape_string`](http://php.net/manual/en/function.mysql-real-escape-string.php)来避免注入攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T07:23:44.067

```
 $salt=sha1($postpassword);
    $arr= strlen($postpassword);
    $count=ceil($arr/2);
    $stringarr=str_split($postpassword,$count);
    $password1=hash("sha512", $stringarr['0']); 

    $password2=$salt . ( hash( 'whirlpool', $salt . $stringarr['1'] ) );
    return $password1.$password2; 
```

# c# - Datareader 未读取唯一身份的返回值

> ID：12666213
> 
> 赞同：0
> 
> 时间：2012-10-01T00:09:34.987
> 
> 标签：c#, asp.net, sql

当输入到我的 SQL 客户端时，这方面的 SQL 工作得很好。但是，当我尝试在 csharp 中以编程方式执行此操作时，不会返回任何数据。数据被添加到 follow_fb_threads 表中，但是当我尝试从数据读取器读取时出现错误。它告诉我我的数据为空。

```
 SqlDataReader dr;

        using (cmd = new SqlCommand("INSERT INTO followups_fb_threads (thread_id, thread_time, sender_name, sender_fb_id, sender_location) VALUES (@thread_id, @thread_time, @sender_name, @sender_fb_id, @sender_location); SELECT SCOPE_IDENTITY() AS [SCOPE_IDENTITY];", con)) ;

        cmd.Parameters.Add(new SqlParameter("thread_id", thread_id));
        cmd.Parameters.Add(new SqlParameter("thread_time", thread_time));
        cmd.Parameters.Add(new SqlParameter("sender_name", sender_name));
        cmd.Parameters.Add(new SqlParameter("sender_fb_id", master_sender_fb_id));
        cmd.Parameters.Add(new SqlParameter("sender_location", sender_location));
        dr = cmd.ExecuteReader();

        string type_id = dr[0].ToString();  // YOU SHOULD HAVE DATA BUT IS NULL? WTH? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T00:11:59.963

射击。我想通了。需要。博士读（）；对不起！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T00:14:10.507

`Read`您必须在数据阅读器中有任何内容之前调用：

```
dr.Read(); 
```

此外，插入可能会产生结果，在这种情况下，您必须继续下一个结果才能获得身份：

```
dr.NextResult();
dr.Read(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T00:23:37.250

您也可以`string type_id = cmd.ExecuteScalar().ToString();`立即分配并避免使用 SQLDataReader 对象。

# database - 使用类和数据库进行编程

> ID：12666221
> 
> 赞同：3
> 
> 时间：2012-10-01T00:10:41.750
> 
> 标签：database, oop

这里的哲学问题当涉及到 OOP 和数据库，特别是类由数据库备份的程序时，解决这个问题的最佳方法是什么？例如，一个团队类可能有一组玩家。该程序将在启动时从数据库中加载所有团队数据，在内存中进行所有操作，然后在关闭时写入数据库。还是在发生更改时将每个数据操作写入数据库更好？如果这是更好的方法，为什么首先将数据加载到内存中？

另一个担忧是，在我看来，数据库以一种重要的方式打破了标准的 OOP。使用我的包含球员集合的球队类，使用 OOP，球员类不需要有一个属性来保存球队名称。玩家将从其所属的团队类别中获得团队名称。现在，要将球员保存在数据库中，每个球员记录都必须有一列用于球队名称（或球队 ID，但这是同一件事）。

换句话说，如果你需要一个 GetAllPlayers() 方法，你是让它成为团队类中的成员方法，从内存中返回集合中的所有玩家，还是在玩家类中创建一个静态方法来获取所有数据库中的玩家？

有人对如何回答这些问题有任何提示吗？

我已经有一段时间没有上编程课了。任何人都知道一本很好的教科书可以理解这里的最佳方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T00:14:36.487

数据库以更基本的方式打破了面向对象。（或者对象破坏了关系模型。这取决于您是中层 OO 人员还是 DBA。）

关系数据库是根据定义设置的，本质上是声明性的。面向对象的语言是基于对象实例的。由于“对象关系阻抗不匹配”，使两者一起工作很困难。这就是为什么你会看到这么多 ORM 解决方案（例如 TopLink、Hibernate 等）的原因。它们都在试图欺骗面向对象的程序员，让他们认为他们只需要处理对象而不用担心关系数据库。

无论您如何实现它，我认为持久性应该与模型对象分开。我通常将关系代码放在基于接口的数据访问层中。这样模型对象就不必知道它们是否被持久化，并且我将 CRUD 操作隔离在一个包中。

至于推荐阅读，我将提供 Fowler 的[企业应用架构模式](https://rads.stackoverflow.com/amzn/click/com/0321127420)供您参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T00:29:18.077

The best solution for this scenario really depends on a huge number of variables. Typically, a "layered" approach is considered the best bang for your buck in OO languages, but even that has a nearly infinite number of permutations based on the priority of each concern the application must address.

Your representational objects (Player, Team, etc.) should typically not be involved in database operations, as that responsibility would belong to your data access layer, for example.

A good way to approach learning the object-oriented mindset is to take a look at some design patterns. A good "easy read" book on that topic that I recommend is "Head First Design Patterns." It's in Java, and gives a variety of angles on each topic it covers. In my opinion, it serves as a good bridge between the level of the "Dummies" books and the level of the more abstract/theoretical books.

# javascript - IE8 中 Jquery“.append”的问题

> ID：12666222
> 
> 赞同：1
> 
> 时间：2012-10-01T00:10:48.257
> 
> 标签：javascript, jquery, html, jquery-plugins

好吧，我在尝试在 IE8 中使用“.append”时遇到了问题，我的代码在所有浏览器（甚至 IE9）中都可以正常工作，但是我在使用 IE8 时遇到了问题。这是我的代码：

```
 divLine = null
    for(var i = ini; i < fim; i++ ){
       if(i % 5 === 0){
           var divLine = $("<div class='line' style='float:left;display:block;padding-top:25px;'></div>")
           $("#products").append(divLine)
       }
       if (linkI[i] != "semLink") {
       if (i != (4 + ini) && i != (9 + ini) && i != (14 + ini) && i != (19 + ini)) { 
          divLine.append("<div id='" + albuns[i] + "'style='float:left;display:block;'>" + 
         "<a href='" + url[i] + "'>" +
         "<img src='" + imagesUrl[i] + "' width='170' />" + "</a>" +
 "<div style='width:170px;'>" +
    "<h3 class='shout bare mts'>" +
       "<b>" + names[i] + "</b>" +
    "</h3>" + 
    "<h6 class='mbs'>" + 
        albuns[i] + 
    "</h6>" +
       "<a class='icons-comprar lfloat mtxs mrs' href='" + linkS[i] + "' target='_blank' >Comprar </br></a>" + 
        "<a class='icons-itunesSmall lfloat mtm' href='" + linkI[i] + "' target='_blank'>Itunes</a>" + 
  "</div>" + 
  "</div>" + 
    "<img src='http://assets.jumpseller.com/store/biscoitofino/themes/8055/space.png' width='30' style='float:left;display:block;'/>" +      
         "</div>")
          } else {
             divLine.append("<div id='" + albuns[i] + "' style='float:left;display:block;'>" + 
         "<a href='" + url[i] + "'>" +
         "<img src='" + imagesUrl[i] + "' width='170' />" +
"</a>" +
 "<div style='width:170px;'>" +
"<h3 class='shout bare mts'>" +
  "<b>" + names[i] + "</b>" +
"</h3>" + 
"<h6 class='mbs'>" + 
        albuns[i] + 
"</h6>" +
  "<a class='icons-comprar lfloat mtxs mrs' href='" + linkS[i] + "' target='_blank' >Comprar </br></a>" + 
  "<a class='icons-itunesSmall lfloat mtm' href='" + linkI[i] + "' target='_blank'>Itunes</a>" + 
         "</div>")
          }
      } else {
          if (i != (4 + ini) && i != (9 + ini) && i != (14 + ini) && i != (19 + ini)) {
          divLine.append("<div id='" + albuns[i] + "' style='float:left;display:block;'>" + 
         "<a href='" + url[i] + "'>" +
         "<img src='" + imagesUrl[i] + "' width='170' />" +
"</a>" +
 "<div style='width:170px;'>" +
"<h3 class='shout bare mts'>" +
  "<b>" + names[i] + "</b>" +
"</h3>" + 
"<h6 class='mbs'>" + 
        albuns[i] + 
"</h6>" +
  "<a class='icons-comprar lfloat mtxs mrs' href='" + linkS[i] + "' target='_blank' >Comprar </br></a>" + 
  "</div>" + 
  "</div>" + 
    "<img src='http://assets.jumpseller.com/store/biscoitofino/themes/8055/space.png' width='30' style='float:left;display:block;'/>" +      
         "</div>")
          } else {
            divLine.append("<div id='" + albuns[i] + "' style='float:left;display:block;'>" + 
         "<a href='" + url[i] + "'>" +
         "<img src='" + imagesUrl[i] + "' width='170' />" +
"</a>" +
 "<div style='width:170px;'>" +
"<h3 class='shout bare mts'>" +
  "<b>" + names[i] + "</b>" +
"</h3>" + 
"<h6 class='mbs'>" + 
        albuns[i] + 
"</h6>" +
  "<a class='icons-comprar lfloat mtxs mrs' href='" + linkS[i] + "' target='_blank' >Comprar </br></a>" + 
  "</div>" + 
  "</div>" + 
         "</div>")  
          }
      }
 } 
```

其中：

```
 albuns = new Array();
 imagesUrl = new Array();
 url = new Array();
 names = new Array();
 linkS = new Array();
 linkI = new Array(); 
```

已经是由服务器生成的排序数组。我还在 chrome 和 IE8 中打印了输出的打印屏幕： IE8 下面： ![在此处输入图像描述](../Images/b92ac9505a246ec7e680ccb1ab863cfd.png) Chrome 下面： ![在此处输入图像描述](../Images/f109e98261796f01d64c519f0a267340.png)

我们可以注意到 IE 中的输出完全被扭曲了......这是有问题的网站：http: [//biscoitofino.jumpseller.com/catalogo](http://biscoitofino.jumpseller.com/catalogo)

有什么建议么？？？先感谢您！

# sorting - 我怎样才能制作这个KD树？

> ID：12666224
> 
> 赞同：1
> 
> 时间：2012-10-01T00:10:59.333
> 
> 标签：sorting, data-structures, tree, nearest-neighbor, kdtree

我有一个很长的、半排序的纬度、经度和时区三元组列表。我希望能够快速搜索此列表以找到与任何给定纬度和经度最近的时区，因此我想将此列表制作成 KD 树。

我在想我应该首先将整个文件读入某种数据结构（什么数据结构？可能`ArrayList<Triplet<Double, Double, String>>`？）。然后取该结构中的中间元素并将其作为根，给我留下一个左右列表。然后继续获取每个列表的中间元素并将其添加为左子或右子。

第一次尝试似乎很慢而且效率低下......但我觉得我做错了。你能为我提供一个算法或伪代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T01:08:58.087

如果有帮助，我[在 Java 中有一个 KD-Tree，](http://code.google.com/p/java-algorithms-implementation/source/browse/src/com/jwetherell/algorithms/data_structures/KdTree.java)它在一个名为 XYZPoint 的内部类中将 XYZ 作为双精度。您可以使用时区数据增加 XYZ 点，并使用 X 表示经度，使用 Y 表示纬度，使用零表示 Z。它至少可以作为一个起点。

然后，您可以使用已经实现的最近邻（欧几里德距离）方法，用于距离某个点最近的时区。

另外.. 为了填充 KD-Tree，维基百科建议使用[HeapSort](http://en.wikipedia.org/wiki/K-d_tree#Balancing) [（我的 Java 实现链接）](http://code.google.com/p/java-algorithms-implementation/source/browse/src/com/jwetherell/algorithms/sorts/HeapSort.java)并反复删除中位数。

# python - BitNami DjangoStack 不是“独立的”，无法运行应用程序

> ID：12666234
> 
> 赞同：0
> 
> 时间：2012-10-01T00:12:28.963
> 
> 标签：python, django, windows-7, bitnami

我安装了 Windows（32 位）BitNami DjangoStack 1.4.1.0 并选择不安装它附带的 python，因为我已经安装了 Python 2.7。

当我单击介绍网页中的按钮时，出现以下错误以及内部服务器错误（因此 Appache 运行正常）

```
enter code here
[error] mod_wsgi (pid=3990): Target WSGI script '/opt/bitnami/apps/django/scripts/django.wsgi' cannot be loaded as Python module 
```

我发现了一个类似的问题，但与在亚马逊上安装有关。同样通过答案，问题似乎是 wsgi 是针对错误的 python 版本编译的。

然后我卸载了 BitNami 并使用提供的 python 版本重新安装 - 仍然是相同的消息。

如果 BitNami 包是自包含的，即带有运行所需的所有位，我看不出错误的 python 版本如何成为问题。

如果我以前安装的版本导致问题，我将其从 PATH 环境变量中删除。

此外，Windows 的文档似乎是错误的。django.conf 和 django.wsgi 不在文档所说的位置（\Users\user\BitNami SDjangoStack projects\apps）。事实上，该目录中唯一的东西是我在安装时选择的新项目 - 没有应用程序目录。我在 BitNami 目录中找到了这些文件。

此外，当我在 BitNami 控制台中输入 python 时，我得到了 python 2.7.3，而不是安装指南中列出的 2.7.2。

我认为这个包可以很好地帮助我运行一个生产 Django 站点。它现在已准备好在开发阶段上线进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:39:14.027

不安装 Python 到底是什么意思？BitNami DjangoStack 是自包含的，因为它包含自己的 Python 及其依赖项。您还提到您在 Windows 上运行它，但路径 /opt/bitnami 是在 Linux 中以 root 身份安装时的默认路径。您在安装过程中选择了哪些具体选项？

# actionscript-3 - 在 Flash pro cs6 舞台上放置对象是使用八哥进行 stage3d 加速还是使用旧 Flash？

> ID：12666235
> 
> 赞同：1
> 
> 时间：2012-10-01T00:12:49.430
> 
> 标签：actionscript-3, flash-cs5.5, starling-framework, flash-cs6

做stage3d硬件加速的2d游戏，最好用starling框架，starling教程不用flash pro cs6，关卡设计是用代码完成的，是不是因为flash pro cs6使用了老的Flash API，而且确实如此没有硬件加速，我的意思是，如果你用 flash pro cs6 将舞台上的艺术作品转换为影片剪辑，Flash 编辑器会像 Flash.display.MoviClip 或 Starling.display.MoviClip 一样吗？

如果 Flash pro cs6 使用“flash.display.MovieClip”，这是否会影响性能，或者您的游戏不必全是八哥来获得 stgae3d 硬件加速？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:02:03.510

Starling 是一个第三方库。它由 Adob​​e 鼓励和资助，但它不是 Flash 平台本身的一部分。因此，Flash Pro 不使用 Starling。换言之，Flash 绘图 API 只有一个，而 Flash Pro 在创建矢量图时显然会使用它。

Flash 绘图 API 不使用 Stage3D，也不使用 GPU 硬件加速。

但是，假设您**需要**使用 Stage3D 才能在 2D 游戏中获得良好性能是错误的。绝大多数游戏，包括大量复杂的高性能游戏，都没有。

为了更好地理解 Stage3D 是什么以及它是如何工作的，我推荐[Stage3D 的工作原理](http://www.adobe.com/devnet/flashplayer/articles/how-stage3d-works.html)。

# ios - 允许图像在屏幕上“漂移”的 iOS 类？

> ID：12666237
> 
> 赞同：1
> 
> 时间：2012-10-01T00:13:04.253
> 
> 标签：ios, animation, uiimageview, nstimer

我看过很多有用的教程，它们展示了如何：

1.  使图像根据预定义的路径移动，或
2.  移动图像，一次几个像素，以响应 UIButton。

我想要做的是让图像根据我定义的 Vxy 速度任意“漂移”，然后让按钮改变速度。（是的，如果不采取任何行动，我会随着时间的推移放慢速度）。

在其他语言中，除非按下按钮，否则可能有一种方法可以通过 Vxy（无限期地）更改 Pxy 位置。我相信 GET 是命令。我想我可以想办法在 iOS 中做到这一点，但这将涉及设置一系列 1 秒 CGMutablePathRef 动画。或者，我看过一些关于 NSTimer 的讨论：引入某种延迟是否是一个好习惯：draw, delay, draw, delay。

**要求：**我可以自己在手册中搜索的特定课程或术语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T00:33:00.220

Iirc 使用 uiview 的 animateWithDuration:completion 比使用核心动画便宜。frame 是一个动画属性。所以，是的，我想我会使用一个 NSTimer 来调用你的方法来默认计算你的视图的结束帧，然后在那里调用 animateWithDuration:completion 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:17:56.793

[删除坏主意]

我遇到了一个很棒的教程，供任何考虑这样一个项目的人使用； [http://www.youtube.com/watch?v=nH_Rj152DRM](http://www.youtube.com/watch?v=nH_Rj152DRM)

我相信我遇到的关键“菜鸟”问题是没有意识到我应该在

```
-(void) viewDidLoad{ 
```

然后在触摸/其他用户事件中处理动画的其他属性。一旦我弄清楚了这一点，我现在就可以自己为项目的其余部分做繁重的工作了。

# linux - ELF 动态加载器符号查找排序

> ID：12666248
> 
> 赞同：8
> 
> 时间：2012-10-01T00:14:47.370
> 
> 标签：linux, gcc, ld, elf, binutils

解析动态重定位时符号查找的搜索顺序是什么？

当解析共享库的符号时，加载器首先在“主可执行文件”中搜索（让主可执行文件覆盖定义......）还是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-01T04:17:07.703

据我了解，每个可执行对象都有自己的“查找范围”：

*   主可执行文件通常是“全局”查找范围中的第一个对象。这意味着主可执行文件中定义的符号将覆盖依赖共享库中的符号。使用该工具添加的共享对象`LD_PRELOAD`被添加到全局查找范围中，就在主可执行文件之后。
*   但是，如果正在加载的共享对象使用该`DF_SYMBOLIC`标志，则源自该对象的符号引用将在全局查找范围中搜索之前在该对象中查找定义。
*   使用打开的共享对象`dlopen()`可能有自己的依赖关系。如果`RTLD_GLOBAL`在调用 期间未设置标志`dlopen()`，则这些依赖项将添加到该对象的查找范围，但不会影响全局查找范围。如果将`RTLD_GLOBAL`标志传递给`dlopen()`，则共享对象（及其依赖项）将添加到“全局”查找范围，从而更改后续符号查找的行为。

推荐阅读Ulrich Drepper 的指南“[如何编写共享库”。](http://www.akkadia.org/drepper/dsohowto.pdf)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T03:19:49.093

> 当解析共享库的符号时，加载器首先在“主可执行文件”中搜索（让主可执行文件覆盖定义......）还是什么？

对，就是这样。动态加载器有一个加载的 ELF 对象的链接列表（列表的开头是`_r_dynamic.r_map`），并线性搜索该列表中对象的动态符号表，直到找到它正在寻找的符号定义。

列表的头部始终指向主可执行文件。如果从主可执行文件中导出给定符号，则它（几乎）总是“获胜”（覆盖其他定义）。

但是，请注意`-Bsymbolic`链接器标志会稍微改变图片。

# javascript - 根据以编程方式确定的 HTML 属性获取特定变量的值

> ID：12666250
> 
> 赞同：1
> 
> 时间：2012-10-01T00:15:10.323
> 
> 标签：javascript, jquery, selector

很抱歉打扰您，但这让我很困扰：我有以下变量：

```
var one = 1;
var two = 2;
var tre = 3; 
```

我也有输入框

```
<input type='text' id='one' class='some'> 
```

我想要一个包含上述变量对应值的变量，基于输入框的 id。

```
var atr = $(".some").attr("id");
var nr = ??? 
```

我希望 var`nr`等于 1 （作为**上面****的变量** ）`one`

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T00:17:31.680

使用以下符号：

```
 $('selector[attr]')   // elements that has attribute attr
  $('selector[attr=value]')  // elements that has attribute attr with value `value`
  $('selector[attr^=value]') // elements that has attribute attr starting with value `value`
  $('selector[attr$=value]') // --~-- ending with `value`
  $('selector[attr!=value]') // not equal `value`
  $('selector[attr*=value]') // attribute contains `value`
  $('selector[attr|=value]') // attribute has prefix `value`
  $('selector[attr~=value]') // attribute contain word delimited by spaces 
```

[查看jquery 属性选择器](http://api.jquery.com/category/selectors/attribute-selectors/)的完整列表

编辑：您可能会问另一件事：

您有特定的值映射并希望这样做：

```
var map =  { one: 1, two : 2 , three: 3 } ,
    elem = $('.some'),
    attr = elem.attr('id'),
    nr = map[attr]  // === 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T00:21:51.800

您只能使用动态生成的变量名称来匹配对象属性：

```
var ids = { one : 1, two : 2, tre : 3 };

var atr = $(".some").attr("id");

var nr = ids[atr]; // now contains 1 
```**

# shared-libraries - ELF 进出口

> ID：12666253
> 
> 赞同：5
> 
> 时间：2012-10-01T00:16:12.953
> 
> 标签：shared-libraries, elf

我知道我们有`.dynsym`，`.symtab`我如何区分导入和导出，比如在 windows 中的 pe 中，导入和导出在数据目录中，它和 elf 中的等价物吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T03:14:25.290

> 如何区分进口和出口

简单：动态符号表（in `.dynsym`）中的任何符号`.st_shndx == SHN_UNDEF`（参考特殊`UND`部分）是一个导入，并且每个其他符号都被定义和导出。

请注意，`.symtab`这无关紧要，可以完全剥离——动态加载器从不查看它。

# ruby - 如何在ruby中获取两个带有特殊字符的字符串之间的文本？

> ID：12666255
> 
> 赞同：1
> 
> 时间：2012-10-01T00:16:47.163
> 
> 标签：ruby, regex, xpath

我有一个包含 HTML 代码的字符串 (@description)，我想提取两个元素之间的内容。它看起来像这样

```
<b>Content title<b><br/>
*All the content I want to extract*
<a href="javascript:print()"> 
```

我已经设法做这样的事情

```
@want = @description.match(/Content title(.*?)javascript:print()/m)[1].strip 
```

但显然这个解决方案远非完美，因为我的@want 字符串中有一些不需要的字符。

谢谢你的帮助

编辑：

根据评论中的要求，这是完整的代码：

我已经在解析一个 HTML 文档，其中包含以下代码：

```
@description = @doc.at_css(".entry-content").to_s
puts @description 
```

返回：

```
<div class="post-body entry-content">
<a href="http://www.photourl"><img alt="Photo title" height="333"     src="http://photourl.com" width="500"></a><br><br><div style="text-align: justify;">
Some text</div>
<b>More text</b><br><b>More text</b><br><br><ul>
<li>Numered item</li>
<li>Numered item</li>
<li>Numered item</li>
</ul>
<br><b>Content Title</b><br>
Some text<br><br>
Some text(with links and images)<br>
Some text(with links and images)<br>
Some text(with links and images)<br>
<br><br><a href="javascript:print()"><img src="http://url.com/photo.jpg"></a>
<div style="clear: both;"></div>
</div> 
```

文本可以包含更多的段落、链接、图像等，但它始终以“内容标题”部分开头，以 javascript 引用结尾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:16:16.517

**`$vStart`此 XPath 表达式选择节点和之间的所有（兄弟）节点`$vEnd`：**

```
 $vStart/following-sibling::node()
           [count(.|$vEnd/preceding-sibling::node())
           =
            count($vEnd/preceding-sibling::node())
           ] 
```

要获得在您的特定情况下使用的完整 XPath 表达式，只需替换`$vStart`为：

```
/*/b[. = 'Content Title'] 
```

并替换`$vEnd`为：

```
/*/a[@href = 'javascript:print()'] 
```

替换后的最终 XPath 表达式是：

```
/*/b[. = 'Content Title']/following-sibling::node()
         [count(.|/*/a[@href = 'javascript:print()']/preceding-sibling::node())
         =
          count(/*/a[@href = 'javascript:print()']/preceding-sibling::node())
         ] 
```

**说明**：

`$ns1`这是两个节点集和交集的 Kayessian 公式的简单推论`$ns2`：

```
$ns1[count(.|$ns2) = count($ns2)] 
```

在我们的例子中，节点之间的所有节点的集合`$vStart`是`$vEnd`两个节点集的交集：所有后续的兄弟姐妹`$vStart`和之前的所有兄弟姐妹`$vEnd`。

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vStart" select="/*/b[. = 'Content Title']"/>
 <xsl:variable name="vEnd" select="/*/a[@href = 'javascript:print()']"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "$vStart/following-sibling::node()
               [count(.|$vEnd/preceding-sibling::node())
               =
                count($vEnd/preceding-sibling::node())
               ]
     "/>
==============

     <xsl:copy-of select=
     "/*/b[. = 'Content Title']/following-sibling::node()
               [count(.|/*/a[@href = 'javascript:print()']/preceding-sibling::node())
               =
                count(/*/a[@href = 'javascript:print()']/preceding-sibling::node())
               ]
     "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档**（转换为格式良好的 XML 文档）时：

```
<div class="post-body entry-content">
    <a href="http://www.photourl">
        <img alt="Photo title" height="333"     src="http://photourl.com" width="500"/>
    </a>
    <br />
    <br />
    <div style="text-align: justify;">
    Some text</div>
    <b>More text</b>
    <br />
    <b>More text</b>
    <br />
    <br />
    <ul>
        <li>Numered item</li>
        <li>Numered item</li>
        <li>Numered item</li>
    </ul>
    <br />
    <b>Content Title</b>
    <br />
    Some text
    <br />
    <br />
    Some text(with links and images)
    <br />
    Some text(with links and images)
    <br />
    Some text(with links and images)
    <br />
    <br />
    <br />
    <a href="javascript:print()">
        <img src="http://url.com/photo.jpg"/>
    </a>
    <div style="clear: both;"></div>
</div> 
```

**计算两个 XPath 表达式（有和没有变量引用），并且在每种情况下选择的节点，方便地分隔，被复制到输出**：

```
<br/>
    Some text
    <br/>
<br/>
    Some text(with links and images)
    <br/>
    Some text(with links and images)
    <br/>
    Some text(with links and images)
    <br/>
<br/>
<br/>
==============

     <br/>
    Some text
    <br/>
<br/>
    Some text(with links and images)
    <br/>
    Some text(with links and images)
    <br/>
    Some text(with links and images)
    <br/>
<br/>
<br/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T03:48:14.927

为了测试您的 HTML，我在您的代码周围添加了标签，然后将其粘贴到[文件中](http://pastie.org/4889265)

```
xmllint --html --xpath '/html/body/div/text()' /tmp/l.html 
```

输出 ：

```
Some text
Some text
Some text
Some text 
```

现在，您可以在其中使用 Xpath 模块`ruby`并重新使用 Xpath 表达式

您会在 stackoverflow 网站搜索中找到许多示例。

# c++ - 网络回复后 Qt 更新

> ID：12666256
> 
> 赞同：0
> 
> 时间：2012-10-01T00:17:19.010
> 
> 标签：c++, qt, qnetworkaccessmanager

我正在与 Qt creator 一起制作一个 GUI 程序，该程序接受不同的 URL，并将下载并显示 html 代码。

用户可以将不同的 URL 添加到 listWidget。然后用户可以选择一个特定的 URL 并下载将显示在 URL 列表旁边的 html。

我遇到的问题是在收到回复后更新文本区域。

main.cpp - 基本上只是显示窗口。

```
#include <QtGui/QApplication>
#include "mainwindow.h"
#include "htmlmanager.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();

    return a.exec();
} 
```

mainwindow.h - 非常简单。包含将用于从输入的网站请求 html 的对象 html。

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H
#include <QMainWindow>
#include "htmlmanager.h"
#include <QString>
namespace Ui {
class MainWindow;
}
class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();
    HtmlManager html;

private slots:
    void on_addButton_clicked();
    void on_actionExit_triggered();
    void on_removeButton_clicked();
    void on_downloadButton_clicked();
private:
    Ui::MainWindow *ui;
};
#endif // MAINWINDOW_H 
```

mainwindow.cpp - 这是问题的开始。如果您低头查看“downloadButton_clicked()”函数，您会看到它通过发送请求来获取 html。但是，在下一行之前没有收到回复，因此文本字段设置为“”。

```
#include "mainwindow.h"
#include "ui_mainwindow.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::on_addButton_clicked()
{
    if(!ui->lineEdit->text().isEmpty())
    {
        ui->listWidget->addItem(ui->lineEdit->text());
    }
    else
    {
        qDebug() << "Input field is empty.";
    }
}

void MainWindow::on_actionExit_triggered()
{
    //doesn't do anything right now
}

void MainWindow::on_removeButton_clicked()
{
    if(ui->listWidget->currentItem()) //If an item is selected
    {
        delete ui->listWidget->currentItem();
    }
    else
    {
        qDebug() << "No selection";
    }
}

void MainWindow::on_downloadButton_clicked()
{
    if(ui->listWidget->currentItem()) //If an item is selected
    {
        html.fetch(ui->listWidget->currentItem()->text());
        ui->textBrowser->setText(html.str);
    }
    else
    {
        qDebug() << "No selection";
    }

} 
```

htmlmaneger.h

```
#ifndef HTMLMANAGER_H
#define HTMLMANAGER_H

#include <QObject>
#include <QDebug>
#include <QtNetwork>
#include <QNetworkReply>
#include <QNetworkAccessManager>
#include <QString>

class HtmlManager : public QObject
{
    Q_OBJECT
    public:
        HtmlManager();
        void fetch(QString Url);
        QString str;

    public slots:
        void replyFinished(QNetworkReply* pReply);

    private:
        QNetworkAccessManager* m_manager;
};

#endif // HTMLMANAGER_H 
```

htmlmanager.cpp - 一旦收到回复，它将html存储在QString“str”中

```
#include "htmlmanager.h"

HtmlManager::HtmlManager()
{
    m_manager = new QNetworkAccessManager(this);
    connect(m_manager, SIGNAL(finished(QNetworkReply*)), this, SLOT(replyFinished(QNetworkReply*)));
}
void HtmlManager::fetch(QString Url)
{
    m_manager->get(QNetworkRequest(QUrl(Url)));
    qDebug() << "Sending network request.";
}
void HtmlManager::replyFinished(QNetworkReply* pReply)
{
    qDebug() << "Recieved network reply.";
    QByteArray data=pReply->readAll();
    str = data;
} 
```

是否有一种简单的方法可以在收到回复后将 str 的值发送到 MainWindow 类，或者是否有一种方法让 onclick 函数等待更新文本区域，直到收到回复后？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T00:37:22.427

您绝对不想在 onClick() 函数中等待回复。这将导致您的程序在网络请求到来之前没有响应（这很可能需要“永远”）。

解决此问题的一种方法是向您的 HtmlManager 类添加一个信号。有些东西可能叫做`stringReceived`. 然后，在您的主窗口类中，您只需要添加如下一行：

```
connect(html, SIGNAL(stringReceived(QString)), ui->textBrowser, SLOT(setText(QString)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T06:39:46.410

QNetworkAccessManager 不提供同步或阻塞方法。如果您想等到收到回复，您必须在本地事件循环中等待，直到调用回复完成信号。

异步操作转同步操作见以下链接：http: [//doc.qt.digia.com/qq/qq27-responsive-guis.html](http://doc.qt.digia.com/qq/qq27-responsive-guis.html "保持 GUI 响应")

在“在本地事件循环中等待”部分，他们展示了使用 QNetworkAccessManager 的示例。您可以对超时和本地事件循环使用相同的方法。

# c++ - （Qt）如何检查 QTextEdit 小部件文本是否从 QTabWidget 更改

> ID：12666259
> 
> 赞同：2
> 
> 时间：2012-10-01T00:17:30.233
> 
> 标签：c++, qt4, qtextedit, qt-signals

我有一个由管理**QTextEdit小部件的****QMainWindow**作为父级的**QTabWidget**。

 ****我想知道何时在一个选项卡中更改了内容并知道是哪一个。我一直在尝试用谷歌搜索一个解决方案，但是在我的代码和我的类的体系结构发生了许多更改之后。

我最后一次尝试是：

```
QTextEdit* curr_text_edit = /*slots were used to get this pointer*/;
connect(curr_text_edit, SIGNAL(textChanged()), this, SLOT(marquerChangement())); 
```

但是永远不会调用插槽“marquerChangement()”。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T01:00:10.257

如果没有调用 marquerChangement()，则可能只有两个原因。首先是由 curr_text_edit 表示的 QTextEdit 从不发出信号（换句话说，也许你得到了错误的 QTextEdit？）。

另一种可能是您的呼叫`connect`失败。此信号/插槽连接是在运行时完成的，而不是编译时。这里的失败通常只是打印到标准输出，然后程序就可以愉快地运行了。检查您的应用程序输出以查看您是否收到有关未找到信号或插槽的消息。****

# java - 如果我有一个单独的 Piece 类和一个单独的 Board 类，当它们彼此分开时，我如何告诉它移动？

> ID：12666261
> 
> 赞同：0
> 
> 时间：2012-10-01T00:17:52.383
> 
> 标签：java

Board 类有一个 s 的 8x8 2D 数组`Piece`，所以我显然可以使用 Board 类移动一块，`board.move(piece1, 3, left)`例如，但是我无法简单地告诉块移动，比如`piece1.move(3, left)`，因为它没有办法了解有关棋盘的任何信息（没有将其作为参数传递），因此它无法将自身移动到特定索引，或者知道一块是否已经占据了该索引，或者是否被告知移动到边界之外的数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T00:28:01.173

You have other objects which haven't been modeled yet, such as a `Game` and a `Player`. Let's take a step back and think about the responsibilities of each of these models:

*   **Piece**: A `Piece` is pretty minimal. It knows what it is, which color it is, that's probably about it.
*   **Board**: Also fairly minimal. It knows what its squares are.
*   **Game**: This is probably the most complex component. It knows the rules of the game. (After all, if you ever want to change the rules of the game then you shouldn't have to also change the `Board` or the `Piece`, right?) It knows which `Pieces` make up a complete game set. It knows which moves each `Piece` can make. It knows where any given `Piece` is on the `Board` at any given time.
*   **Player**: The `Player` interacts with the `Game`. It will tell the `Game` that it wants to perform a given action on a `Piece`. The `Game` will allow or deny that action, and modify the state of the `Game` (Check, Mate, Stalemate, other `Player`'s turn, etc.) based on that action. (Again, the `Pieces` and the `Board` don't care about these states.)

If the `Game` object becomes bloated and unwieldy, it can probably be broken into pieces and exist mostly as a composite object. You can have a `MoveList` of possible moves for a given set of rules, for example. The `Game` is composed of it, but doesn't need to internally contain it.

The more I think about it, the more I think that `Board` and `Piece` are set apart as really "dumb" objects in this domain. They're not even really entities, just value objects. One piece which has the exact same attributes as another piece is essentially interchangeable with that other piece. (If you lose a Black Bishop you can replace it with another Black Bishop and not have any adverse effect on the experience.) The domain might work more fluidly if these two are treated as immutable data structures instead of models.

(It's also worth noting that the same `Board` can be re-used by other `Games` with entirely different sets of `Piece`s.)

As an exercise, I recommend following [Robert Martin's Bowling Game Kata](http://butunclebob.com/ArticleS.UncleBob.TheBowlingGameKata). You'll be surprised how much effort you can put into modeling a game domain only to have it turn out to be a *lot* simpler when you consider the actual tests to validate the domain. We can academically think about these chess models all day long, but coming up with a few tests to validate the game can emerge a simpler design.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T00:20:06.760

一块，就其本身而言，不知道它恰好放置在哪里（并且可能不需要知道）。`Board`因此，需要调用方法来移动一块并没有错。

# java - 多线程我的客户端 Java 程序

> ID：12666262
> 
> 赞同：0
> 
> 时间：2012-10-01T00:18:36.040
> 
> 标签：java, multithreading, client-server

我有一个 Java 客户端（客户端服务器应用程序），它主要做两件事：（1）监听服务器以接收文件并将它们保存到本地文件夹，（2）监视该文件夹的更改并将更改发送到服务器。我想在自己的线程中运行每个。首先，在单独的线程上运行每个任务是否是个好主意。其次，当文件夹被任一任务使用时，如何锁定文件夹以避免干扰？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T00:23:13.963

> 在单独的线程上运行每个任务是个好主意吗

将程序拆分为线程听起来是个好主意，因为这两个任务可以异步和并发地工作。第一个线程可以在第二个线程上传的同时下载。

> 当任一任务使用文件夹以避免干扰时，如何锁定文件夹？

我根本不会做锁。我会让你的第一个线程从服务器读取一个文件，将它写入文件夹，然后将一个`FileToSend`对象（或者可能只是一个`File`对象）添加到[`BlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html). 因此，您的第二个线程不会查看目录，而是等待将`BlockingQueue`文件发送到服务器。这个[`LinkedBlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html)类应该很好地工作。为`BlockingQueue`您处理锁定问题。

如果您*确实*需要共享锁，那么您可以将锁对象注入您的两个线程：

```
private final Object folderLock = new Object();
...
new Thread(new Downloader(folderLock)).start();
new Thread(new Uploader(folderLock)).start();
... 
```

一个好的模式是在你的类上定义一个`addFileToUpload(File fileToUpload)`方法。`Uploader`然后你`Uploader`可以决定如何处理它。然后`BlockingQueue`可以是本地的`Uploader`

```
Uploader uploader = new Uploader();
// pass the uploader into the downloader
new Thread(new Downloader(uploader)).start();
new Thread(uploader).start(); 
```

# javascript - 当另一个 div 悬停时切换 div 的内容

> ID：12666268
> 
> 赞同：0
> 
> 时间：2012-10-01T00:19:45.820
> 
> 标签：javascript, jquery, hover, mouseover

我无法让这样的事情发挥作用。我有一系列 DIVS（1 到 8），当您将鼠标悬停在一个 div 上时，我想用#replace 的内容（当前设置为隐藏）更改其他 div 的内容 `<div id="replace" style="visibility:hidden;">Bla Bla Bla</div>` ​< /p>

这是我到目前为止所得到的：

```
$('#1').on({
    mouseover: function(){
        $('#2').replaceWith(jQuery('#replace'));
    },
     mouseleave: function(){
        $('#2').replaceWith(jQuery('#2'));
    },
    click: function(){
        $('#2').replaceWith(jQuery('#replace'));
        $('#1').off('mouseleave mouseover');
    }
}); 
```

根本没有真正的影响-我的逻辑不好，我做得不好等等……？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T00:56:34.070

## *[jsBin 演示](http://jsbin.com/agutuk/3/edit)*

```
<div class="box">This is DIV #1 :) </div> 
```

`.box`为所有 8 个元素添加一个类并执行以下操作：

```
jQuery(function($){

  var replaceText = $('#replace').text();
  var memorizeText = '';

  $('.box').on({
      mouseenter: function(){
          memorizeText = $(this).next('.box').text();   // memorize text
          $(this).next('.box').text(replaceText);
      },
      mouseleave: function(){
          $(this).next('.box').text( memorizeText );    // restore memorized text
      },
      click: function(){
          $(this).next('.box').text( replaceText );
          $(this).off('mouseleave mouseenter');
      }
  });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T00:32:26.850

Like this?

```
<div class="page">
    <div class="content">Bla bla bla</div>
</div>
<div class="page">
    <div class="content">Some more text</div>
    <div class="content-alt" style="display: none;">I like fish</div>
</div>
<div class="page">
    <div class="content">Hello there</div>
    <div class="content-alt" style="display: none;">Test 123</div>
</div>
<div class="page">
    <div class="content">Test</div>
    <div class="content-alt" style="display: none;">Hi!</div>
</div> 
```

**JS**

```
$('.page').on({
    mouseover: function(){
        var nextPage = $(this).next('.page');
        nextPage.children('.content').hide();
        nextPage.children('.content-alt').show();
    },
     mouseleave: function(){
        var nextPage = $(this).next('.page');
        nextPage.children('.content').show();
        nextPage.children('.content-alt').hide();
    }
}); 
```

* * *

## Original answer

If I understand your question correctly, you can try this:

**HTML**

```
<div id="page1"><div class="name">Page 1</div></div>
<div id="page2"><div class="name">Page 2</div></div>
<div id="page3"><div class="name">Page 3</div></div>

<div id="hidden" style="display: none">This is some hidden text</div> 
```

**JS**

```
$('#page1').on({
    mouseover: function(){
        $('#page2 .name').hide().after($('#replace'));
    },
     mouseleave: function(){
        $('#hidden').hide();
        $('#page2 .name').show();
    },
    click: function(){
        $('#hidden').hide();
        $('#page2 .name').show();
        $('#1').off('mouseleave mouseover');
    }
}); 
```

But I'm not really sure why you are trying to do this. Are you just trying to show and hide some text on mouse over?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T01:04:33.457

没有太多关于您的 HTML 结构的外观、目的等方面的数据。但以下是一个示例结构，可以实现您的问题所指的内容——而且写出来的时间有点短当每个 div 都做同样的事情时，对每个 div 的特定处理使它有点不必要的长。代码如下，工作示例也在这个[jsfiddle](http://jsfiddle.net/ZZ6d5/)

**HTML**

```
<div id="1" class="replace-me">DIV 1</div>
<div id="2" class="replace-me">DIV 2</div>
<div id="3" class="replace-me">DIV 3</div>
<div id="4" class="replace-me">DIV 4</div>
<div id="5" class="replace-me">DIV 5</div>
<div id="6" class="replace-me">DIV 6</div>
<div id="7" class="replace-me">DIV 7</div>
<div id="8" class="replace-me">DIV 8</div>
<div id="replacementText">REPLACEMENT TEXT</div> 
```

**CSS**

```
#replacementText {
    visibility: hidden;
}​ 
```

**jQuery**

```
$('.replace-me').mouseover(function() {
    $(this).text($('#replacementText').text());
});
$('.replace-me').mouseout(function() {
    $(this).text("DIV "+$(this).attr('id'));
}); 
```

​</p>

# heroku - 新添加的密钥导致未授权错误

> ID：12666269
> 
> 赞同：0
> 
> 时间：2012-10-01T00:20:05.710
> 
> 标签：heroku, ssh

我创建了一个新的 ssh 密钥，将其添加到本地的 ssh 密钥中，然后将其添加到 heroku。当我尝试推送时，我收到“未授权”错误。我不确定下一步该怎么做...

```
~/app> heroku keys:add /home/user/.ssh/XXX-YYY-ZZZ.pub
Uploading SSH public key /home/user/.ssh/XXX-YYY-ZZZ.pub... done

~/app> heroku keys
=== mail+heroku@mydomain.com Keys
ssh-rsa xxxx zzz@ubuntu
ssh-rsa yyyy zzz@ubuntu

~/app> ssh-add /home/user/.ssh/XXX-YYY-ZZZ
\Enter passphrase for /home/user/.ssh/XXX-YYY-ZZZ: 
Identity added: /home/user/.ssh/XXX-YYY-ZZZ (/home/user/.ssh/XXX-YYY-ZZZ)

~/app> git push heroku master

 !  Your key with fingerprint XXXXX is not authorized to access XXX-YYY-ZZZ.

fatal: The remote end hung up unexpectedly 
```

我是否必须以某种方式将该密钥连接到我的 XXX-YYY-ZZZ 应用程序？[我在https://devcenter.heroku.com/articles/keys](https://devcenter.heroku.com/articles/keys)的文档中没有看到任何相关内容。

可能是相关的，我有两个要部署的 heroku 帐户，这个失败的是第二个。我想把它们分开。我怀疑问题出在我的 ssh_config 上，但我不确定如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:15:06.707

看起来有一个heroku插件可以解决这个问题：

[https://github.com/ddollar/heroku-accounts](https://github.com/ddollar/heroku-accounts)

# javascript - 为什么某些形式的间接评估在 Opera 和 Safari 中会失败？

> ID：12666272
> 
> 赞同：2
> 
> 时间：2012-10-01T00:21:31.823
> 
> 标签：javascript, eval

某些形式的间接`eval`在 Opera 中失败，而且，我听说，在 Safari 中。

```
[eval][0]('') 
```

> 未处理的错误：使用无效的此对象调用 eval

请注意，在评估空字符串时它会失败......据我所知，它应该 return `undefined`。

其他形式，如`(0,eval)('')`，似乎工作正常。

运行 kangax 的这个[测试套件](http://kangax.github.com/jstests/indirect-eval-testsuite/)中的示例，我看到几个表单在 Opera 中失败并显示“invalid this object”消息，但在 Chrome 或 Firefox 中没有。

谁能解释为什么会这样？是什么决定了这种行为？这似乎是故意的，它是否符合我不知道的标准的某些部分？

相关——关于间接与直接评估的[讨论。](https://stackoverflow.com/questions/9107240/1-evalthis-vs-evalthis-in-javascript)

另外——[为什么 (0 || eval) 在 Opera 中不被视为间接？](https://stackoverflow.com/questions/12666447/why-is-0-eval-not-treated-as-indirect-in-opera)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:30:49.267

这仅仅是因为 ECMAScript 262 第 3 版为不寻常的 eval() 调用指定了一个有点奇怪的可选异常。请参阅规范本节的最后一部分：http: [//bclary.com/2004/11/07/#a-15.1.2.1](http://bclary.com/2004/11/07/#a-15.1.2.1)

**如果 eval 属性的值以任何方式使用，而不是直接调用（即，除了通过显式使用其名称作为标识符，即 CallExpression 中的 MemberExpression），或者如果 eval 属性被分配给，可能会抛出 EvalError 异常。**

我不完全确定这句​​话背后的原因是什么，但是正如您所见，如果在某个对象上定义了对 eval 的引用并从那里调用，那么 Opera 的 Carakan 引擎和 Safari 的 ES 引擎都选择实现异常。

ECMAScript 标准的后续版本已经删除了这一点（首先在规范中有一个**可选**的例外是一个非常糟糕的主意）并且 Opera 将在未来的某些 Carakan 版本中进行调整。由于 StackOverflow 上的这些问题，它已经在内部得到修复；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T00:27:14.910

我猜想运行：

```
[eval][0]('something'); 
```

将`this`等于函数`[eval]`内部的数组`eval`。

跑步：

```
[eval][0].call(window, 'something'); 
```

应该`this`等于全局对象，但我不确定在这种情况下是否适用于那些浏览器。

# python - Python GUI App Distribution：用 wxPython、TKinter 或 QT 编写

> ID：12666278
> 
> 赞同：8
> 
> 时间：2012-10-01T00:22:22.057
> 
> 标签：python, user-interface, wxpython, pyqt, tkinter

我的问题是关于跨平台（Mac/Linux/Windows）分发 GUI 应用程序的难易程度，我想知道让用户的工作变得最简单的那个。

我目前的理解是，Tkinter 应用程序对用户（安装）来说是最容易的，因为只要用户在她的盒子中安装了 Python，我的应用程序就应该准备好在那个盒子上运行。

对于使用 wxPython 或 pyQT 编写的 GUI 应用程序，用户需要先在她的盒子中安装 wxWidget 或 QT，这是一个额外的步骤，然后安装我的 GUI 应用程序。（但我的 Ubuntu 盒子似乎默认安装了 wxWidget 库和 QT 库，是规范还是只是 Ubuntu 发行版对用户更友好？我猜 Windows 和 Mac 可能不会默认提供它们，即用户需要下载并安装它们作为额外的步骤）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T05:38:15.060

如果您运行的是 Ubuntu，PyQt 将默认安装。大多数 linux 发行版将默认安装 PyGtk 或 PyQt 之一。WxPython 很可能作为系统中其他软件包的依赖项安装在您的 Ubuntu 机器中。

如果您的目标市场是 Linux，您可以只创建一个 deb 或 rpm 包，它会处理您的应用程序的依赖关系。

对于 Windows 和 Mac（甚至是 Linux，如果您愿意的话），您可以将 python 解释器与您的应用程序及其库捆绑成原生可执行格式，例如`cx_freeze`使用. 完成此操作后，您的用户将无需安装任何库。`py2exe``py2app``python`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T00:42:46.030

Tkinter 是 Python 中唯一包含的一个。wxPython 和 pyQT 需要在系统上安装 wxWindows 或 QT 库*和*wxPython 或 pyQT 库。

然而，Tk 看起来不是很好。如果你已经让用户安装 Python，你也可以让他们安装库。（或者可能包括安装程序或其他东西。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T08:00:19.337

如果该应用程序将是跨平台的，我会建议`WxWidgets`( `wxpython`)。我已经用了好几次了，从来没有出现过问题。

不过，您应该为 Windows、Mac 和 Linux 创建不同的安装程序。在 Linux 中，使用`.deb`or`.rpm`来处理依赖关系。

在 Windows 中，我一直习惯于`py2exe`创建`exe`文件。`Py2exe`在这种情况下，通过附加 python 解释器和所需的库来工作`wxWidgets`。

检查此链接以获取更多信息： http: [//www.py2exe.org/](http://www.py2exe.org/)

# html-agility-pack - 解决 StackOverflowException

> ID：12666282
> 
> 赞同：5
> 
> 时间：2012-10-01T00:22:36.370
> 
> 标签：html-agility-pack, stack-overflow

我正在使用 HtmlAgilityPack 来解析大约 200,000 个 HTML 文档。

我无法预测这些文档的内容，但是一个这样的文档会导致我的应用程序失败并显示`StackOverflowException`. 该文档包含以下 HTML：

```
<ol>
    <li><li><li><li><li><li>...
</ol> 
```

大约有 10,000 个`<li>`这样嵌套的元素。由于 HtmlAgilityPack 解析 HTML 的方式，它会导致`StackOverflowException`.

不幸的是，在 .NET 2.0 及更高版本中无法捕获 StackOverflowException。

我确实想知道为线程的堆栈设置更大的大小，但是设置更大的堆栈大小是一种技巧：它会导致我的程序使用更多的内存（我的程序启动了大约 50 个线程来处理 HTML，所以所有这些线程会增加堆栈大小）并且如果再次遇到类似情况则需要手动调整。

我可以采用其他任何解决方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T20:55:18.807

我刚刚修补了一个我认为与您描述的相同的错误。已将补丁上传到 hap 项目站点...

[http://www.codeplex.com/site/users/view/sjdirect](http://www.codeplex.com/site/users/view/sjdirect)（参见 2012 年 3 月 8 日的补丁）

或在此处查看有关问题和结果的更多文档......

[https://code.google.com/p/abot/issues/detail?id=77](https://code.google.com/p/abot/issues/detail?id=77)

**实际的修复是...** 添加了 HtmlDocument.OptionMaxNestedChildNodes 可以设置以防止由大量嵌套标签引起的 StackOverflowExceptions。它将抛出一个 ApplicationException 消息“文档有多个嵌套标签。这可能是由于页面没有正确关闭标签。”

**补丁后我如何使用 Hap...**

```
HtmlDocument hapDoc = new HtmlDocument();
hapDoc.OptionMaxNestedChildNodes = 5000;//This is what was added
string rawContent = GETTHECONTENTHERE
try
{
    hapDoc.LoadHtml(RawContent);    
}
catch (Exception e)
{
    //Instead of a stackoverflow exception you should end up here now
    hapDoc.LoadHtml("");
    _logger.Error(e);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T01:00:28.917

理想情况下，长期解决方案是修补 HtmlAgilityPack 以使用堆堆栈而不是调用堆栈，但这对我来说是一项太大的任务。我暂时丢失了我的 CodePlex 帐户详细信息，但是当我找回它们时，我将提交有关该问题的问题报告。我还注意到，这个问题可能会给任何使用 HtmlAgilityPack 清理用户提交的 HTML 的站点带来拒绝服务攻击漏洞——精心制作的过度嵌套的 HTML 文档会导致 w3wp.exe 进程终止。

同时，我认为最好的方法是手动覆盖最大线程堆栈大小。我之前的说法是错误的，即更大的堆栈大小意味着所有线程都会自动消耗该内存（似乎内存页面是在线程堆栈增长时分配给它的，而不是一次全部分配）。

我复制了该`<ol><li>`页面并进行了一些实验。我发现当堆栈大小小于`2^21`字节（2MB）时，我的程序失败了，但最大`2^22`字节大小（4MB）成功了——我书中的 4MB 作为“*可接受*的”黑客通过了......暂时。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2022-01-11T10:31:59.117

这应该有效：

```
 HtmlDocument.MaxDepthLevel = 10000;
var doc = new HtmlDocument();
try
{
    doc.LoadHtml(document);
}
catch(Exception ex)
{
    Console.WriteLine("Exception while loading html: " + ex);
    yield break;
} 
```

# algorithm - CLRS 的这段话是什么意思？

> ID：12666284
> 
> 赞同：4
> 
> 时间：2012-10-01T00:23:07.580
> 
> 标签：algorithm, complexity-theory, big-o, clrs

[我在Cormen 等人](http://en.wikipedia.org/wiki/Introduction_to_Algorithms)的[*《算法导论*](http://en.wikipedia.org/wiki/Introduction_to_Algorithms)[》第 47 页](http://books.google.co.uk/books?id=NLngYyWFl_YC&pg=PA47)看到了这段话。：[](http://en.wikipedia.org/wiki/Introduction_to_Algorithms)

 *> 表达式中匿名函数的数量被理解为等于渐近符号出现的次数。例如在表达式中：
> 
> Σ ( *i* =1 到*n* ) O( *i* )
> 
> 只有一个匿名函数（*i*的函数）。此表达式与 O(1) + O(2) + ... + O( *n* ) 不同，后者实际上并没有清晰的解释。

这是什么意思？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T00:33:26.177

I think they're saying that when they use that notation (sum of a big-O), it means there's a single O(i) function (call it `f(i)`), and then the expression refers to the sum from 1 to n of that function.

This isn't the same thing as if there were `n` different functions (call them `f_1(i)` to `f_n(i)`), each of which is `O(i)`, and then the expression refers to the sum of `f_1(1) + f_2(2) + ... + f_n(n)`. That latter thing is not what the notation means.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-02T03:45:32.557

我认为您首先应该理解“表达式中匿名函数的数量被理解为等于渐近符号出现的次数”。这意味着如果

```
 Σ (i=1 to n) O(i) 
```

所以匿名函数等于 O(i) 例如`Σ (i=1 to n) f1(i)`

如果`Σ (i=1 to n) O(i)+O(i)` 匿名函数应该有两个等于 O(i)+O(i) 的函数，例如`Σ (i=1 to n) f1(i)+f2(i)`*

# ruby - 哈希中的“id:”语法是什么？

> ID：12666288
> 
> 赞同：0
> 
> 时间：2012-10-01T00:23:55.723
> 
> 标签：ruby

> **可能重复：**
> [冒号“:”和粗箭头“=>”有什么区别](https://stackoverflow.com/questions/8198811/whats-the-difference-between-colon-and-fat-arrow)

我最近遇到了这条线：

```
<%= link_to "sample app", '#', id: "logo" %> 
```

我知道哈希和看起来像的不可变键，`{:id => "logo"}`但它是什么`id:`？如果这是一个哈希，为什么它不遵循正常的约定？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T00:25:36.813

这是 Ruby 1.9 引入的新语法。你可以这样写，也可以这样写：

```
{ :id => "logo" } 
```

JSON 样式只是作为一种较短的替代方式受到支持，并且适合喜欢 JavaScript 的人。

# python - PYTHON - 不可散列列表

> ID：12666291
> 
> 赞同：1
> 
> 时间：2012-10-01T00:24:28.193
> 
> 标签：python, model-view-controller, list, user-interface, tkinter

我正在尝试在 GUI 列表框中显示一些信息。我在 MVC 的仅模型部分中编写了一个测试方法，它输出我想要的信息；但是，当我将该代码传输到完整的 GUI 时，它会引发错误。

**下面是两段代码：**

**模型：（**注意这个方法是为一个类写的`Products()`）

```
def test(self):
    for key in self._items_list:
        print self.get_item(key) #this refers to the get_item function of the Products class:

def get_item(self, key):
    return self._items_list[key] # items_list is a dictionary 
```

因此，这将返回我想放入列表框中的输出。

**这是我将代码传输到我的 GUI 的方式**（这是在我定义的继承自 Listbox 的类中）：

```
def refreshData(self):
    for keys in self._productslist: #this productslist is equivalent to items_list
        disp = self._products.get_item(keys) #so i can call the method from the Product class
        self.insert(END, dips) 
```

当我尝试打开并显示文件时，这会引发以下错误：

```
...in get_item
return self._items_list[key]
TypeError: unhashable type: 'list' 
```

抱歉，这很长而且可能非常令人困惑，但基本上我想知道为什么我在完整版本的代码中而不是在隔离模型中得到该方法的错误。

据我所知，所有相关代码都是相同的。

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T01:02:01.507

你不能散列列表，只有不可变的东西。尽管您可以为对象`__hash__`的某些扩展定义一个方法，但`list`此逻辑背后的原因是，如果您要在字典中查找某些内容，您会希望条目的名称不会改变。同样，在 python 中，键必须是不可变的。正如另一个答案所说，请改用 a `tuple`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T00:26:42.543

改用元组： [http ://wiki.python.org/moin/DictionaryKeys](http://wiki.python.org/moin/DictionaryKeys)

# javascript - Flexsilder 问题 - 按降序播放

> ID：12666297
> 
> 赞同：0
> 
> 时间：2012-10-01T00:25:37.087
> 
> 标签：javascript, jquery, html, css, jquery-plugins

我不确定这是css还是JS问题。我已经安装了似乎已正确安装的 flexslider 插件，但是我的 flexslider 轮播出现问题，[代码发布在 github 上](https://github.com/woothemes/FlexSlider)。我的滑块按降序播放，我不太确定它为什么或如何这样做......下面是相应 JS 中的 Jquery

```
$(window).load(function(){
  $('.flexslider').flexslider({
    animation: "fade",
    animationLoop: true,
    slideshow:true,
    directionNav: true,
    minItems: 1,
    maxItems: 1,
    controlsContainer: false,
    manualControls: '.custom-controls li',
      start: function(slider){
      $('body').removeClass('loading');
    }
  });
}); 
```

[我的示例网站](http://bodyworksforme.com/testing/ExpressionEngine/index.php?/home/index-copy)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T01:29:24.890

也许您正在从自己的 CSS 中覆盖 flex-slider CSS？也许您已经将 flex-slider 的内容（图像、div 或其他任何内容）浮动到右或反向？如果是这样，请尝试解决该问题:)

我在看到你的帖子后测试了这个。所以我将 flex-slider inline float:left 更改为 float:right ，现在我将最后一张幻灯片作为第一张幻灯片，并且所有幻灯片都反转了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T08:17:18.343

这是 Flexslider 2.2.2 中的一个错误。下载 [https://github.com/woothemes/FlexSlider](https://github.com/woothemes/FlexSlider)

# c# - 从列表值创建对

> ID：12666300
> 
> 赞同：2
> 
> 时间：2012-10-01T00:25:53.670
> 
> 标签：c#, .net, list

我有一个包含一些值的列表，比如说 1 2 3 4 5 6

我需要像这样配对它们：12 13 14 15 16 23 24 25 26 34 35 36 45 46 56

基本上，我需要将它们混合起来以创建独特的值集。

您对如何创建这样的新列表有任何想法吗？

谢谢您的意见！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-10-29T17:26:03.833

使用 Linq 和元组：

```
var arr = new[] { 1, 2, 3, 4, 5, 6 };

arr.SelectMany((fst, i) => arr.Skip(i + 1).Select(snd => (fst, snd))); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-01T00:37:38.287

如果你喜欢 Linq：

```
var ar = new int[] {1, 2, 3, 4, 5};

var combo = (from left in ar
            from right in ar where right > left 
            select new { left, right }).ToArray(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T00:35:13.880

对于样本中的数据，您可以使用一对简单的嵌套循环来完成：

```
var list = new List<int>{1,2,3,4,5,6};
var res = new List<int>();
for (int i = 0 ; i != list.Count ; i++) {
    for (int j = i+1 ; j != list.Count ; j++) {
        res.Add(list[i]*10+list[j]);
    }
} 
```

对于更复杂的数据，您可以使用字符串连接技巧：

```
var list = new List<int>{98,76,54,32,10};
var res = new List<int>();
for (int i = 0 ; i != list.Count ; i++) {
    for (int j = i+1 ; j != list.Count ; j++) {
        res.Add(int.Parse(string.Format("{0}{1}", list[i], list[j])));
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T00:34:09.097

```
var newList = new List<int>();
foreach(var i in originalList)
    for(int j = i + 1; j < originalList.Count; ++j)
        newList.Add(originalList[i] * 10 + originalList[j]); 
```

应该帮忙...

# python - 使用 lxml 一次对一个 .xml 项（及其子项）执行功能操作

> ID：12666303
> 
> 赞同：2
> 
> 时间：2012-10-01T00:26:16.600
> 
> 标签：python, xml-parsing, lxml

请注意，我正在使用这样导入的 lxml `from lxml import etree`：.

我正在尝试使一些工作代码更加灵活。我的脚本采用包含按名称顺序排列的所有项目的输入 .xml 文件，引用包含项目 ID 号和项目名称的字典以根据该 .xml 文件生成项目 ID 列表，然后轮询 Web 服务器这些项目 ID 的价格数据，然后用于输出总成本。我的问题不是关于这些步骤中的任何一个。

相反，我的问题是关于如何处理解析包含多个订单的 .xml 文件。

到目前为止，我的示例 .xml 文件可能如下所示：

```
<?xml version="1.0" ?>
    <cars>
        <order="This is a test order">
            <description value=""/>
            <carType value="Model1"/>
            <upgrade slot="interior 0" type="Leather Seats"/>
            <upgrade slot="interior 1" type="6-Disc CD Player"/>
        </order>
    </cars> 
```

我可以将其解析为一个列表，其中包括基本项目 carType（这是汽车的型号）和各种升级，如下所示：

```
for element in root.iterchildren('carType'):
    modlist.append ("%s" % (element.get('value')))

for element in root.iter('upgrade'):
    modlist.append ("%s" % str.upper((element.get('type')))) 
```

它会给我一个名为的列表`modlist`，`['Model1', 'Leather Seats', '6-Disc CD Player']`我可以通过我的其他函数来获取这些物品的 ID 号，然后从那里获取价格信息并将其汇总，以找出这款带有真皮座椅升级的 Model1 汽车的价格和升级 6 碟 CD 播放器需要花费。

这是我遇到困难的地方。如何在一个 .xml 文件中拥有多辆汽车？一个示例可能如下所示：

```
<?xml version="1.0" ?>
    <cars>
        <order="This is a test order">
            <description value=""/>
            <carType value="Model1"/>
            <upgrade slot="interior 0" type="Leather Seats"/>
            <upgrade slot="interior 1" type="6-Disc CD Player"/>
        </order>
        <order="This is a 2nd order">
            <description value=""/>
            <carType value="Model3"/>
            <upgrade slot="interior 0" type="Vinyl Seats"/>
            <upgrade slot="wheels 0" type="Chrome Wheels"/>
            <upgrade slot="wheels 1" type="8 Ply Tires"/>
        </order>
        <order="This is a 3rd order">
            <description value=""/>
            <carType value="Model7"/>
            <upgrade slot="engine 0" type="V8"/>
            <upgrade slot="interior 0" type="Leather Seats"/>
            <upgrade slot="interior 1" type="Sunroof"/>
        </order>
    </cars> 
```

我想一次在一个订单上运行我的函数，这样这个例子就会输出 3 个数字——这辆 Model1 车及其升级的总价、Model3 车的升级总价和总价Model7 汽车的升级版。

如何告诉我的函数一次只运行一个订单？我正在考虑一些事情，`iterchild()`但我什么也做不了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T01:04:19.387

而不是调用`root.iterchildren`, use `order.iterchildren`, where`order`遍历`<order>`元素：

```
for order in root.xpath('//order'):
    modlist = []
    for element in order.iterchildren('carType'):
        modlist.append ("%s" % (element.get('value')))

    for element in order.iter('upgrade'):
        modlist.append ("%s" % str.upper((element.get('type'))))
    # report grand total for order 
```

# sql - 正确使用计数功能

> ID：12666306
> 
> 赞同：7
> 
> 时间：2012-10-01T00:27:07.897
> 
> 标签：sql, sql-server, sql-server-2008, tsql

在 Enrollment_Changes 表中，列出的手机型号是订户在该日期更改的手机。

如果 Enrollment_Changes 没有后续更改，则订阅者更改为的电话将列在 P_Enrollment 表中

例如，订阅者 12345678 于 2011 年 1 月 5 日注册了一个 RAZR。2011 年 11 月 1 日，他从 RAZR 更换。您可以在 2012 年 5 月 19 日的 Enrollment_Changes 上看到他在下一个事务中更改的内容。

您如何找到首次注册 iPhone 3 的订阅人数？

这是我用于创建表的代码

创建表：TBL 1

```
USE [Test2]
GO

/****** Object:  Table [dbo].[P_ENROLLMENT]    ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[P_ENROLLMENT](
    [Subid ] [float] NULL,
    [Enrollment_Date] [datetime] NULL,
    [Channel] [nvarchar](255) NULL,
    [Region] [nvarchar](255) NULL,
    [Active_Status] [float] NULL,
    [Drop_Date] [datetime] NULL,
    [Phone_Model] [nvarchar](255) NULL
) ON [PRIMARY]

GO 
```

待定 2

```
USE [Test2]
GO

/****** Object:  Table [dbo].[ENROLLMENT_CHANGES]     ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[ENROLLMENT_CHANGES](
    [Subid] [float] NULL,
    [Cdate] [datetime] NULL,
    [Phone_Model] [nvarchar](255) NULL
) ON [PRIMARY]

GO 
```

插入 TBL1

```
INSERT INTO [P_ENROLLMENT]([Subid ], [Enrollment_Date], [Channel], [Region], [Active_Status], [Drop_Date], [Phone_Model]) 
    VALUES(12345678, '2011-01-05 00:00:00', 'Retail', 'Southeast', 1, NULL, 'iPhone 4');

INSERT INTO [P_ENROLLMENT]([Subid ], [Enrollment_Date], [Channel], [Region], [Active_Status], [Drop_Date], [Phone_Model]) 
    VALUES(12346178, '2011-03-13 00:00:00', 'Indirect Dealers', 'West', 1, NULL, 'HTC Hero');

INSERT INTO [P_ENROLLMENT]([Subid ], [Enrollment_Date], [Channel], [Region], [Active_Status], [Drop_Date], [Phone_Model]) 
    VALUES(12346679, '2011-05-19 00:00:00', 'Indirect Dealers', 'Southeast', 0, '2012-03-15 00:00:00', 'Droid 2');

INSERT INTO [P_ENROLLMENT]([Subid ], [Enrollment_Date], [Channel], [Region], [Active_Status], [Drop_Date], [Phone_Model]) 
    VALUES(12347190, '2011-07-25 00:00:00', 'Retail', 'Northeast', 0, '2012-05-21 00:00:00', 'iPhone 4');

INSERT INTO [P_ENROLLMENT]([Subid ], [Enrollment_Date], [Channel], [Region], [Active_Status], [Drop_Date], [Phone_Model]) 
    VALUES(12347701, '2011-08-14 00:00:00', 'Indirect Dealers', 'West', 1, NULL, 'HTC Hero');

INSERT INTO [P_ENROLLMENT]([Subid ], [Enrollment_Date], [Channel], [Region], [Active_Status], [Drop_Date], [Phone_Model]) 
    VALUES(12348212, '2011-09-30 00:00:00', 'Retail', 'West', 1, NULL, 'Droid 2');

INSERT INTO [P_ENROLLMENT]([Subid ], [Enrollment_Date], [Channel], [Region], [Active_Status], [Drop_Date], [Phone_Model]) 
    VALUES(12348723, '2011-10-20 00:00:00', 'Retail', 'Southeast', 1, NULL, 'Southeast');

INSERT INTO [P_ENROLLMENT]([Subid ], [Enrollment_Date], [Channel], [Region], [Active_Status], [Drop_Date], [Phone_Model]) 
    VALUES(12349234, '2012-01-06 00:00:00', 'Indirect Dealers', 'West', 0, '2012-02-14 00:00:00', 'West');

INSERT INTO [P_ENROLLMENT]([Subid ], [Enrollment_Date], [Channel], [Region], [Active_Status], [Drop_Date], [Phone_Model]) 
    VALUES(12349745, '2012-01-26 00:00:00', 'Retail', 'Northeast', 0, '2012-04-15 00:00:00', 'HTC Hero');

INSERT INTO [P_ENROLLMENT]([Subid ], [Enrollment_Date], [Channel], [Region], [Active_Status], [Drop_Date], [Phone_Model]) 
    VALUES(12350256, '2012-02-11 00:00:00', 'Retail', 'Southeast', 1, NULL, 'iPhone 4');

INSERT INTO [P_ENROLLMENT]([Subid ], [Enrollment_Date], [Channel], [Region], [Active_Status], [Drop_Date], [Phone_Model]) 
    VALUES(12350767, '2012-03-02 00:00:00', 'Indirect Dealers', 'West', 1, NULL, 'Sidekick');

INSERT INTO [P_ENROLLMENT]([Subid ], [Enrollment_Date], [Channel], [Region], [Active_Status], [Drop_Date], [Phone_Model]) 
    VALUES(12351278, '2012-04-18 00:00:00', 'Retail', 'Midwest', 1, NULL, 'iPhone 3');

INSERT INTO [P_ENROLLMENT]([Subid ], [Enrollment_Date], [Channel], [Region], [Active_Status], [Drop_Date], [Phone_Model]) 
    VALUES(12351789, '2012-05-08 00:00:00', 'Indirect Dealers', 'West', 0, '2012-07-04 00:00:00', 'iPhone 3');

INSERT INTO [P_ENROLLMENT]([Subid ], [Enrollment_Date], [Channel], [Region], [Active_Status], [Drop_Date], [Phone_Model]) 
    VALUES(12352300, '2012-06-24 00:00:00', 'Retail', 'Midwest', 1, NULL, 'Droid 2');

INSERT INTO [P_ENROLLMENT]([Subid ], [Enrollment_Date], [Channel], [Region], [Active_Status], [Drop_Date], [Phone_Model]) 
    VALUES(12352811, '2012-06-25 00:00:00', 'Retail', 'Southeast', 1, NULL, 'Sidekick'); 
```

插入 TBL2

```
INSERT INTO [ENROLLMENT_CHANGES]([Subid], [Cdate], [Phone_Model]) 
    VALUES(12345678, '2011-11-01 00:00:00', 'RAZR');

INSERT INTO [ENROLLMENT_CHANGES]([Subid], [Cdate], [Phone_Model]) 
    VALUES(12346178, '2012-01-07 00:00:00', 'HTC Hero');

INSERT INTO [ENROLLMENT_CHANGES]([Subid], [Cdate], [Phone_Model]) 
    VALUES(12348723, '2012-01-28 00:00:00', 'RAZR');

INSERT INTO [ENROLLMENT_CHANGES]([Subid], [Cdate], [Phone_Model]) 
    VALUES(12350256, '2012-02-21 00:00:00', 'Blackberry Bold');

INSERT INTO [ENROLLMENT_CHANGES]([Subid], [Cdate], [Phone_Model]) 
    VALUES(12349745, '2012-05-05 00:00:00', 'HTC Hero');

INSERT INTO [ENROLLMENT_CHANGES]([Subid], [Cdate], [Phone_Model]) 
    VALUES(12345678, '2012-05-19 00:00:00', 'Palm Pre');

INSERT INTO [ENROLLMENT_CHANGES]([Subid], [Cdate], [Phone_Model]) 
    VALUES(12347190, '2012-05-20 00:00:00', 'HTC Hero');

INSERT INTO [ENROLLMENT_CHANGES]([Subid], [Cdate], [Phone_Model]) 
    VALUES(12350256, '2012-05-21 00:00:00', 'Blackberry Bold');

INSERT INTO [ENROLLMENT_CHANGES]([Subid], [Cdate], [Phone_Model]) 
    VALUES(12349234, '2012-06-04 00:00:00', 'Palm Pre');

INSERT INTO [ENROLLMENT_CHANGES]([Subid], [Cdate], [Phone_Model]) 
    VALUES(12346178, '2012-06-05 00:00:00', 'iPhone 3');

INSERT INTO [ENROLLMENT_CHANGES]([Subid], [Cdate], [Phone_Model]) 
    VALUES(12350767, '2012-06-10 00:00:00', 'iPhone 3'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T00:43:46.930

为了计数

```
select COUNT(*) Total
from
(
    select e.*,
        rn = row_number() over (partition by e.subid order by c.cdate desc),
        first_model = coalesce(c.phone_model, e.phone_model)
    from [P_ENROLLMENT] e
    left join [ENROLLMENT_CHANGES] c on c.subid = e.subid
) x
where rn=1 and first_model = 'iPhone 3' 
```

* * *

对于所有记录

```
select *
from
(
    select e.*,
        rn = row_number() over (partition by e.subid order by c.cdate desc),
        first_model = coalesce(c.phone_model, e.phone_model)
    from [P_ENROLLMENT] e
    left join [ENROLLMENT_CHANGES] c on c.subid = e.subid
) x
where rn=1 and first_model = 'iPhone 3'
order by subid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T00:31:34.953

You want to know if the first record in the table is an iPhone 3\. Something like this:

```
select count(*)
from (select e.*,
             row_number() over (partition by subid order by enrollment_date) as seqnum
      from p_enrollment e
     ) e
where seqnum = 1 and phone_model = 'iPhone 3' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T01:00:48.280

也许我想得太简单了，但是以下任何一个都不能满足您的要求吗？：

```
SELECT      Phone_Model
            , COUNT(*) AS Initially_Enrolled
FROM        p_enrollment
GROUP BY    Phone_Model 
```

（工作 SQLFiddle：[http](http://sqlfiddle.com/#!3/68258/4) ://sqlfiddle.com/#!3/68258/4 ）

或者

```
SELECT      COUNT(*) AS Initially_Enrolled
FROM        p_enrollment
WHERE       Phone_Model = 'iPhone 3' 
```

（工作 SQLFiddle：[http](http://sqlfiddle.com/#!3/68258/3) ://sqlfiddle.com/#!3/68258/3 ）

由于您只需要初始注册，因此 ENROLLMENT_CHANGES 表无关紧要。

# if-statement - angularjs if 语句？

> ID：12666307
> 
> 赞同：9
> 
> 时间：2012-10-01T00:27:10.313
> 
> 标签：if-statement, angularjs

所以我正在浏览AngularJS的教程：

我在控制器中定义了一个数组，当我循环通过 ng-repeat {{feature.name}} {{feature.description}} 时，我通过调用返回数组中的不同点

我不明白的是，可以说我在数组中有第三个点称为“重要性”，它是一个从 1 到 10 的数字。我不想在 html 中显示该数字，但我想做的是如果数组中的“重要性”数字是 10 对 1，则对特征应用不同的颜色

那么我如何编写一个 if 语句来做到这一点：

IE

```
<p style="**insert if statement: {{if feature.importance == 10}} color:red; {{/if}} **">{{feature.description}}</p> 
```

不知道这是否正确，但这就是我想做的

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-01T00:43:37.687

我认为没有`if`可用的声明。为了您的造型目的，`ng-class`可以使用。

```
<p ng-class="{important: feature.importance == 10 }"> 
```

`ng-switch`也很方便。

- 更新 -

看看： [https ://stackoverflow.com/a/18021855/1238847](https://stackoverflow.com/a/18021855/1238847)

angular1.2.0RC 似乎有 ng-if 支持。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-27T19:43:45.567

实际上Angular 1.2.0 中*有一个三元运算符。*

```
<p style="{{feature.importance == 10 ? 'color:red' : ''}}">{{feature.description}}</p> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-08-02T16:27:22.437

我认为答案需要更新。

以前您可以使用 AngularUI 项目中的 ngIf 指令（如果您仍想下载它，请[在此处代码），坏消息是它不再维护。](https://github.com/angular/angular.js/blob/master/src/ng/directive/ngIf.js)

好消息是它已被添加到官方 AngularJS 存储库（[不稳定分支](https://ajax.googleapis.com/ajax/libs/angularjs/1.1.5/angular.js)）中，并且很快将在[稳定](https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.js)版本中可用。

```
<div ng-if="something"> Foo bar </div> 
```

不仅会隐藏`DIV`元素，还会将其从 DOM 中移除（当某些东西是虚假的时）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-27T16:43:12.923

如果您的优先级是标签，您可以创建一个开关过滤器以在 ng-class 内部使用，如先前的 SO 答案所示：[https](https://stackoverflow.com/a/8309832/1036025) ://stackoverflow.com/a/8309832/1036025 （用于开关过滤器代码）

```
<p ng-class="feature.importance|switch:{'Urgent':'red', 'Warning': 'orange', 'Normal': 'green'}">...</p> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-02T13:35:17.750

ng-class 可能是您问题的最佳答案，但 AngularUI 有一个“if”指令：

[http://angular-ui.github.com/](http://angular-ui.github.com/)

搜索：从 DOM 中完全移除元素，而不是仅仅隐藏它。

我使用“ui-if”来决定是否应该将数据值呈现为标签或输入，相对于当前月份：

```
<tbody id="allocationTableBody">
    <tr ng-repeat="a in data.allocations">
        <td>{{a.monthAbrv}}</td>
        <td ui-if="$index < currentMonth">{{a.amounts[0]}}</td>
    </tr>
</tbody> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-26T20:23:58.113

你也可以试试下面这行代码

```
<div class="{{is_foo && foo.bar}}"> 
```

如果 is_foo 为真，则显示 foo.bar。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-02-02T16:25:41.620

同样有效的是：

```
<span>{{ varWithValue || 'If empty use this string' }}</span> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-10-12T21:16:43.180

第一个指令是一个指令，它评估某些东西是否应该只在 DOM 中出现一次，并且不向页面添加任何监视侦听器：

```
angular.module('setIf',[]).directive('setIf',function () {
    return {
      transclude: 'element',
      priority: 1000,
      terminal: true,
      restrict: 'A',
      compile: function (element, attr, linker) {
        return function (scope, iterStartElement, attr) {
          if(attr.waitFor) {
            var wait = scope.$watch(attr.waitFor,function(nv,ov){
              if(nv) {
                build();
                wait();
              }
            });
          } else {
            build();
          }

          function build() {
            iterStartElement[0].doNotMove = true;
            var expression = attr.setIf;
            var value = scope.$eval(expression);
            if (value) {
              linker(scope, function (clone) {
                iterStartElement.after(clone);
                clone.removeAttr('set-if');
                clone.removeAttr('wait-for');
              });
            }
          }
        };
      }
    };
  }); 
```

第二个是一个指令，它有条件地将属性应用于元素一次，而无需监视侦听器：

IE

```
<div set-attr="{ data-id : post.id, data-name : { value : post.name, condition : post.name != 'FOO' } }"></div>

angular.module('setAttr',[]).directive('setAttr', function() {
  return {
    restrict: 'A',
    priority: 100,
    link: function(scope,elem,attrs) {
      if(attrs.setAttr.indexOf('{') != -1 && attrs.setAttr.indexOf('}') != -1) {
      //you could just angular.isObject(scope.$eval(attrs.setAttr)) for the above but I needed it this way
        var data = scope.$eval(attrs.setAttr);

        angular.forEach(data, function(v,k){

          if(angular.isObject(v)) {
            if(v.value && v.condition) {
                elem.attr(k,v.value);
                elem.removeAttr('set-attr');
            }
          } else {
            elem.attr(k,v);
            elem.removeAttr('set-attr');
          }
        });
      }
    }
  }
}); 
```

当然，您可以使用 Angular 内置的动态版本：

```
<div ng-class="{ 'myclass' : item.iscool }"></div> 
```

您还可以使用 angularjs 添加的新 ng-if，它基本上取代了 angularui 团队创建的 ui-if，它们将有条件地从 DOM 中添加和删除内容，并添加监视侦听器以继续评估：

```
<div ng-if="item.iscool"></div> 
```

# java - Why would URL.openConection() throw an IOException.

> ID：12666318
> 
> 赞同：1
> 
> 时间：2012-10-01T00:30:18.393
> 
> 标签：java, url, ioexception, urlconnection

Assuming a http scheme (i.e. `new URL (“http://www.google.com/”)`) ,would not the `IOException` be thrown on `myHttpURLConnection.connect()` and not on `myHttpURLConnection = myURL.openConection()`.

I mean `instanceURL.openConection()` doesn't seem to open a connection immediately, and if so how can there be an `IOException`.

Thank You in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T02:33:56.363

当您调用 时`openConnection`，将为指定 URL 准备一个连接。如果`openConnection`由于给定的 URL 无效而无法准备连接，`IOException`则会抛出 an。

有关详细信息，请参阅[URL API](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URL.html#openConnection%28%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-22T22:09:18.433

`IOException`包装了许多异常，例如`MalformedException`其中之一`abc://1.1.1.1:1111``MalformedException``IOException`

# python - 使用 Django send_mail() 函数时出错

> ID：12666319
> 
> 赞同：0
> 
> 时间：2012-10-01T00:30:50.077
> 
> 标签：python, django

我想向在我的 django 应用程序中填写电子邮件字段的用户发送邮件。过程是这样的，当用户填写表单时，如果有效，它将保存在数据库中，并从数据库中选择用户电子邮件地址并发送邮件。我尝试了以下代码，但出现此错误：

```
 ValueError at /confirm/

  need more than 1 value to unpack

   Request Method:  POST
   Request URL:     http://127.0.0.1:8000/confirm/
   Django Version:  1.4
   Exception Type:  ValueError
   Exception Value:     

   need more than 1 value to unpack

   Exception Location:  C:\Python27\lib\site-packages\django\core\mail\message.py in sanitize_address, line 102
   Python Executable:   C:\Python27\python.exe
   Python Version:  2.7.3 
```

楷模

```
class Invite(models.Model):
    email_address=models.EmailField(max_length=75)

    def __unicode__(self):
        return self.email_address 
```

意见

```
 def invite_me(request):
         if request.method=="POST":
            form=InviteForm(request.POST)
            if form.is_valid():
               form.save()
               #get input data and send email to the user.
               send_mail('Your Key Invite','Welcome to my world','test@gmail.com',
                  [Invite.objects.values('email_address')])
               return HttpResponse('Thanks For Inputting Your Email, Go Check Your Email For Our Invite!')
            else:
                return HttpResponse('Invalid Email Address')
        else:
            form=InviteForm()
            return render_to_response('home.html',{'InviteForm':InviteForm},context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T00:51:38.440

想想什么`Invite.objects.values('email_address')`回报？绝对不是`send_mail`函数接受的（电子邮件地址列表）。

`Invite.objects.values_list('email_address', flat=True)`是你需要的。哦，删除`[]`.

`send_mail('foo', 'bar', 'baz@example.com', Invite.objects.values_list(...))`

# java - Java equivalent of Ada Select statement

> ID：12666320
> 
> 赞同：3
> 
> 时间：2012-10-01T00:30:59.530
> 
> 标签：java, multithreading, ada

Does anyone know if it's possible to have an Ada-style select statement for threads in Java or if there is an equivalent way to do it?

Specifically I would like to be able to use structures:

```
select
  javaThread.someEntry();
else
  //do something else if call not accepted straight away
end select 
```

or

```
select
  javaThread.someEntry();
or
  //delay before entry call expires
end select 
```

Where `someEntry()` is a synchronized method that could take a bit of time to enter due to a lot of other threads wanting the lock as well.

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T00:36:19.470

In Java, there are a number of ways of accomplishing this. One way is to use any of the [`Lock`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Lock.html) objects which has a `tryLock(...)` method which allows you to wait for the lock for a certain amount of time. It returns `true` if it was able to acquire the lock or `false` if it timed out. [`ReentrantLock`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantLock.html) may be a good choice here.

```
private final Lock lock = new ReentrantLock();
...

if (lock.tryLock(1L, TimeUnit.SECONDS)) {
   try {
      // we were able to lock
   } finally {
      // always unlock in a finally
      lock.unlock();
   }
} else {
   // trying to lock timed out without locking
} 
```

After some discussion in comments, I now understand that you have existing `synchronized` methods that you'd like to wait for only for a certain amount of time. Unfortunately, there is no way to do this in Java with the `synchronized` keyword.

# mysql - Mixed MySQL and Sphinx queries

> ID：12666322
> 
> 赞同：0
> 
> 时间：2012-10-01T00:32:05.520
> 
> 标签：mysql, subquery, sphinx

I have MySQL and Sphinx installed and working properly on a LNMP server. Now I'd like to integrate a Sphinx sub-query into an existing MySQL query.

Example:

```
SELECT * FROM mysql_table
JOIN (SELECT id FROM sphinx_index MATCH ('keyword')) AS match_table
ON match_table.id = mysql_table.id 
```

Is this possible? If not, should I do the Sphinx separately and then use `WHERE IN` in the MySQL query, or will this kill the extra efficiency I'm getting from Sphinx?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:54:56.647

使用 SphinxSE [http://sphinxsearch.com/docs/current.html#sphinxse-overview](http://sphinxsearch.com/docs/current.html#sphinxse-overview)

那么将是

```
SELECT * FROM mysql_table
JOIN (SELECT id FROM sphinx_index WHERE query='keyword') AS match_table
ON match_table.id = mysql_table.id 
```

虽然

```
SELECT * FROM sphinx_index INNER JOIN mysql_table USING (id) WHERE query='keyword' 
```

更短更简洁。**并**更好地保持结果的顺序。

其中 'sphinx_index' 是一个 SphinxSE 表，它指向底层的 sphinx 索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T00:51:03.113

看来我在另一个 SO 问题上找到了答案：

[将 Sphinx 集成到 MySQL](https://stackoverflow.com/questions/11698223/integrating-sphinx-to-mysql)

通过阅读本文，Sphinx 和 MySQL 似乎不像我希望的那样集成。它们需要在单独的连接上使用，因此您不能组合查询。那好吧...

# file - File size differs when sending over UDP

> ID：12666326
> 
> 赞同：1
> 
> 时间：2012-10-01T00:32:38.970
> 
> 标签：file, sockets, udp

I am running into problems when I try to transfer a file between the simple server and client applications that I have written. The file gets transferred successfully, but the file size is different at the receiving side (server side). I open the file on the client side, use fseek() to find the size of the file. Then I use fread() to to read it into a buffer of char type. I send this buffer using sendto() as I have to use UDP sockets. On the server side, I use recvfrom() to store this and use fwrite() to write it into another file. But when I check the size of the file, it is much bigger. Also I am not able to open it even though it is supposed to be a text file. Can you give me some pointers as to where I might be going wrong? Also is this the best way to send files over sockets? Are there better methods to send files?

Thanks

Code for client side

```
//Writing code to open file and copy it into buffer
        fseek(fp, 0, SEEK_END);
        size_t file_size = ftell(fp);
        fseek(fp, 0, SEEK_SET);
        if(fread(file_buffer, file_size, 1, fp)<=0)
        {
            printf("Unable to copy file into buffer! \n");
            exit(1);
        }

        //Sending file buffer
        if(sendto(sock, file_buffer, strlen(file_buffer), 0, (struct sockaddr *) &serv_addr, serv_len)<0)
        {
            printf("Error sending the file! \n");
            exit(1);
        }
        bzero(file_buffer, sizeof(file_buffer)); 
```

Code on the server side to receive the file

```
//Receiving file from client
        char file_buffer[BUFSIZE];
        if(recvfrom(sock, file_buffer, BUFSIZE, 0, (struct sockaddr *) &client_addr, &client_addr_size)<0)
        {
            printf("Error receiving file.");
            exit(1);
        }

        char new_file_name[] = "copied_";
        strcat(new_file_name,file_name);
        FILE *fp;
        fp = fopen(new_file_name,"w+");
        if(fwrite(file_buffer, 1, sizeof(file_buffer), fp)<0)
        {
            printf("Error writing file! \n");
            exit(1);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:52:20.903

您的代码有几个问题。

在发件人中：

*   你如何分配`file_buffer`？如果文件大于缓冲区怎么办？（可能这不会导致手头的问题。）

*   您只需检查返回值`fread`是否为`<= 0`. 实际上，如果发生错误或 EOF，则返回值可以是小于文件完整大小的任何值。（可能这不会导致手头的问题。）

*   您传递`strlen(file_buffer)`而不是传递`file_size`给`sendto`系统调用。`strlen`查找文件可能包含或不包含的 NUL 字节。它可能不包含任何内容，因为您说它是一个文本文件。

    *   如果文件包含至少一个 NUL 字节，则数据包将在第一个 NUL 字节之前被截断，您将不会传输文件的全部内容。
    *   如果文件不包含 NUL 字节，`strlen`则将扫描超出文件末尾作为读入缓冲区。您的程序会因为扫描到未分配的内存地址而崩溃`strlen`，或者您将在文件末尾发送额外的垃圾。

在接收器中：

*   您忽略了返回值，`recvfrom`它是接收到的数据包的有效负载长度。之后，您将无法知道您收到了多少数据。

*   当你`fwrite`得到结果时，你传递`sizeof(file_buffer)`的是大小而不是接收到的实际数据量。这是一个固定值 ( `BUFSIZE`)，可能比您的文件大。写入磁盘的文件将包含超出文件末尾的垃圾。

# c - C中移位和算术的位宽

> ID：12666330
> 
> 赞同：3
> 
> 时间：2012-10-01T00:33:32.700
> 
> 标签：c, math, bit-manipulation

我正在开发一个混合 64 位（用于某些计算）和 32 位（用于节省空间的存储）无符号整数的程序，因此在算术过程中将它们分类以避免溢出非常重要

这是一个示例问题

我想将 1 向左移动一个 unsigned long n，但我希望结果是一个 unsigned long long。这将用于 if 语句中的比较操作，因此不会进行赋值。我给你一些代码。

```
void example(unsigned long shift, unsigned long long compare)
{
    if((1<<shift)>compare)
    {
        do_stuff;
    }
} 
```

我怀疑这不会做我想要的，那么下面会做我想要的吗？

```
void example(unsigned long shift, unsigned long long compare)
{
    if(((unsigned long long)1<<shift)>compare)
    {
        do_stuff;
    }
} 
```

我如何微观管理这些东西的位宽？哪个操作数决定了执行操作的位宽，还是两者中较大的一个？

另外，如果可能的话，我也想了解一下它对其他操作的工作原理，例如 + * / % 等。

也许引用具有此信息的资源会很好，我似乎无法在任何地方找到有关此信息的明确声明。或者也许规则很简单，只需发布​​即可。我不确定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T00:37:33.050

它会做你想要的。但是，这可以通过使用 type 的文字常量来实现（在这种特殊情况下）`long long`：`1LL`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T00:48:58.747

> 哪个操作数决定了执行操作的位宽，还是两者中较大的一个？

对于位移，左操作数（要移位的）决定了执行操作的类型。如果整数提升将其转换为`int`or `unsigned int`，则以该类型执行操作，否则以左操作数的类型执行操作。

为了比较，移位的结果可以被转换为另一个操作数的类型。在您的示例代码中，整数常量`1`具有 type `int`，因此将在 type 处执行移位`int`，并将结果转换为`unsigned long long`用于比较。强制转换有效，因为结果的类型不会被整数提升更改，就像使用后缀文字一样`1ull`。

对于其他列出的操作，算术操作（如比较），执行操作的类型由两个操作数确定，如下所示：

> 否则，对两个操作数都执行整数提升。然后将以下规则应用于提升的操作数：
> 
> *   如果两个操作数具有相同的类型，则不需要进一步转换。
> *   否则，如果两个操作数都具有有符号整数类型或都具有无符号整数类型，则具有较小整数转换等级的类型的操作数将转换为具有较高等级的操作数的类型。
> *   否则，如果无符号整数类型的操作数的等级大于或等于另一个操作数类型的等级，则将有符号整数类型的操作数转换为无符号整数类型的操作数的类型。
> *   否则，如果有符号整数类型的操作数的类型可以表示无符号整数类型的操作数类型的所有值，则将无符号整数类型的操作数转换为有符号整数类型的操作数的类型。
> *   否则，两个操作数都转换为与带符号整数类型的操作数类型对应的无符号整数类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T00:35:49.907

你想要的是一个`long long` *文字*。为此，请使用`1LL`而不是`1`.

# iphone - iOS Stretchable image on UIButton showing wonky corners

> ID：12666331
> 
> 赞同：4
> 
> 时间：2012-10-01T00:33:33.833
> 
> 标签：iphone, ios

OK folks,

I've searched all over and cannot seem to find a solution to my issue.

I am trying to use a sizeable image for a button background to get a custom look for a UIButton and to reduce the overall size of the app and because it seems like the right thing to do.

However, when I try to set the image on the button the button gets all weird looking and the corners do not match the standard corner radius of a regular UIButton.

I have tried creating several different sizes of images but nothing I do seems to work.

I know the caps are supposed to be even and I have that plus the 1 pixel middle to stretch.

My UIButton is 44 high. If I create an image that is 44 pixels high and 21 pixels wide and has the same rounded corner radius as the default button (it likes an aspirin caplet) and set my background image like this:

```
UIImage *btnImage = [UIImage imageNamed:@"buttontest1.png"];
UIImage *newImg = [btnImage stretchableImageWithLeftCapWidth:10 topCapHeight:0]; 
```

the corners just don't match and look weirdly widely stretched AND the button grows in height!

I know the stretchableImagewithLeftCapWidth is deprecated but the usage of resizableCapWithInsets makes even less sense to me and when I try to do that the button image just seems to repeat over and over.

Can anyone figure out what I'm doing wrong? Is there anyplace that explains this crap simply? I just cannot seem to get it.

Thanks! -TJ

EDIT - adding images after using the resizableImageCapWithInserts to show results. They can't be typical as I see examples all over that supposedly work but the examples never work for me. I just figured out how to add images here so maybe this helps some.

![My PNG file 21pxels wide by 29 pixels tall](../Images/c98a8f337dbdc51e9e1817c2a581dcf7.png) Here is the PNG file 21px wide by 39px tall

![Results of my code](../Images/ff7c542aa25ee305c4ace1e859178408.png) This is the result of using the following code to set the background image:

```
[self.button1 setBackgroundImage:[[UIImage imageNamed:@"buttontest4.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 10, 0, 10)] forState:UIControlStateNormal]; 
```

As I understand it this should copy the left 10 pixels and right 10 pixels of my 21 pixel wide image as is and stretch the middle 1 pixel across, which it appears to do but it is also making my button get larger vertically and I'm getting this weird repeat. It should be the same size as the BTN next to it.

Here is my Xcode layout: ![Xcode layout](../Images/f568ff3700bd50a8d3d03e3309c72b1a.png)

No matter what image I use I see similar results.

I'm obviously not groking something here.

I appreciate the answers so far. It's becoming slightly less foggy.

TJ

EDIT2: showing samples using the cap insets method with image 21px by 44px.

All 4 buttons are 44px high when designed in storyboard.

![both buttons 44px high](../Images/fccb6f4cd9e795404ba56d161e4b544e.png) As you can see the orange buttons are both larger than the white buttons for scale comparison.

The top button is button1, bottom is button2.

I found a way to get it closer by using the optional resizingMode parameter of UIImageResizingModeStretch.

However, notice the buttons are larger than what they should be.

Here is the code for setting the button images.

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

[self.button1 setBackgroundImage:[[UIImage imageNamed:@"buttontest1a.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(10, 10, 10, 10)] forState:UIControlStateNormal];

[self.button2 setBackgroundImage:[[UIImage imageNamed:@"buttontest1a.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 10, 0, 10) resizingMode:UIImageResizingModeStretch]  forState:UIControlStateNormal];
} 
```

Doing the top image with (10,10,10,10) gets me an image that does not repeat the top part of the image like previously. I know the top image is not using the optional resize parameter as this is a test to see what each gets me.

Now, to complicate things even more. If I set my top button size to 43, that is one pixel smaller than my image and make a call with the optional resize parameter I get nearly perfect results except my button is not the right size.

What the heck is going on here?

I appreciate everyone who is trying to pound some knowledge through my thick skull. TJ

![buttons 43 and 44](../Images/b1c5c520559b408313e62c762a7dc7ea.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T01:19:44.877

UIEdgeInsets 有点难以理解，但它**是**更现代的用法。我将解释它的工作方式。基本上，使用四个偏移量，您将图像分成 9 个切片。如果您想查看这可能的样子，请查看[此页面](http://radleymarx.com/blog/simple-guide-to-9-patch/)的“可缩放区域”部分（注意，它适用于 Android，但概念是相同的。Android 只是首先这样做）。您会注意到四行穿过图像。这些将对应于您的四个插图。所以你的九个部分，从左到右和从上到下将是：

1.  X: 0 -> 左插图，Y: 0 -> 顶部插图
2.  X：左插入 ->（宽度 - 右插入），Y：0 -> 顶部插入
3.  X：（宽度 - 右插图）-> 宽度，Y：0 -> 顶部插图
4.  X：0 -> 左插入，Y：顶部插入 ->（高度 - 底部插入）
5.  X：左插入 ->（宽度 - 右插入），Y：顶部插入 ->（高度 - 底部插入）
6.  X：（宽度 - 右插图）-> 宽度，Y：顶部插图 ->（高度 - 底部插图）
7.  X：0 -> 左插图，Y：（高度 - 底部插图）-> 高度
8.  左插入 ->（宽度 - 右插入），Y：（高度 - 底部插入）-> 高度
9.  X：（宽度 - 右插图）-> 宽度，Y：（高度 - 底部插图）-> 高度

第 1、3、7 和 9 部分已设置，不会拉伸。
第 2 节和第 8 节将仅水平拉伸
第 4 节和第 6 节将仅垂直拉伸
第 5 节将在两个方向上拉伸。

iOS 6 中的新功能，您可以选择一种模式。您可以拉伸可拉伸的瓷砖，或者重复它们以获得您想要的效果（颜色等应该拉伸，而纹理应该重复）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T00:41:24.230

试试 UIEdgeInsets

```
[button setBackgroundImage:[[UIImage imageNamed:@"buttontest1.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(10, 10, 10, 10)] forState:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-25T01:51:11.247

2016 年的方式是围绕这一点执行 WWDC2016 视频 213 中告诉我们的操作：[https](https://developer.apple.com/videos/play/wwdc2016-213/?time=1084) ://developer.apple.com/videos/play/wwdc2016-213/?time=1084 我们可以拉伸资产。对不起，这次只是一个链接；我稍后会提供更多细节。视频中的说明最多一两分钟。简而言之，我们使用 Xcode 的 Asset Slicer 工具来定义当图像用作 UIButton 的背景时，图像的哪些部分不应被拉伸。UIButton 可以扩展到任何大小而不会扭曲圆边等。

# java - 初学者 Java Socket 编程错误

> ID：12666334
> 
> 赞同：0
> 
> 时间：2012-10-01T00:34:35.513
> 
> 标签：java, sockets, client, port

我开始编写我的第一个 Java 网络程序，长话短说我很难确保我采用了正确的方法。我们的教授给了我们一个服务器程序来测试这个 UDP 客户端，但是我遇到了一些我似乎无法解决的错误。具体来说，我得到 IO 异常，“连接被拒绝”或“没有路由到主机”异常。

```
public class Lab2Client {
/**
 * @param args[1] == server name, args[2] == server port, args[3] == myport
 */
public static void main(String[] args) {
    //Serverport is set to 10085, our client is 10086
    try {
        Socket echoSocket = new Socket(args[0],Integer.parseInt(args[2]));
        System.out.println("Server connection Completed\n");
        DataOutputStream output = new DataOutputStream(echoSocket.getOutputStream());
        byte[] toSend = new byte[5];
        toSend[0] = 12; toSend[1] = 34;//Code Number
        toSend[2] = 15;//GroupId
        toSend[3] = 86;toSend[4] = 100;//Port number in Little Endian Order
        output.write(toSend);

        System.out.println("Sent Request. Waiting for reply...\n");

        DataInputStream input = new DataInputStream(echoSocket.getInputStream());

        byte[] toRecieve = new byte[]{0,0,0,0,0,0,0,0}; 
        input.read(toRecieve);
        checkMessage(toRecieve);            
    }
    catch (UnknownHostException e) {
        System.err.println("Servername Incorrect!");
        System.exit(1);
    }
    catch (IOException e){
        System.err.println("IO Exception. Exiting...");
        System.err.println(e);
        System.exit(1);
    }
} 
```

我也有一些关于在 Java 中接收消息的实现的问题。我将得到一个数据报，其中包含：

**a）** 3个格式化字节（对问题不重要）以及IP和端口号

或者

**b)** 3 个格式化字节和一个端口。

使用 DataInputStream 是正确的方法吗？我知道使用具有 9 个元素的数组是惰性的，而不是动态分配一个 5 或 9 的数组，但现在我只是想让它工作。话虽这么说，有没有人会为此提出不同的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T01:06:32.987

您不需要包装`Socket.getOuputStream()`with返回的流`DataOutputStream`- 它已经是`DataOutputStream`

在这一行：

```
Socket echoSocket = new Socket(args[0],Integer.parseInt(args[2])); 
```

我想它应该是 args[1]，而不是 args[0]。

在这里，您必须将整数值转换为其字节表示：

```
 toSend[3] = 10086 & 0xFF;toSend[4] = 10086>>8; //Port number in Little Endian Order 
```

回答您的问题：案例**b**，因为您没有发送`IP`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T22:25:56.977

以为我会把它留给后代。问题很简单，我是个傻瓜，没有早点注意到它。

我测试它的正确程序使用了 UDP 协议，并且这个程序是用 TCP 编写的。更正后的代码是：

```
public class Lab2Client {
/**
 * @param args[0] == server name, args[1] == server port, args[2] == myport
 */
public static void main(String[] args) {
    //Serverport is 10085, our client is 10086
    try {
        DatagramSocket clientSocket = new DatagramSocket();
        InetAddress IPAddress = InetAddress.getByName(args[0]);
        int portToSend = Integer.parseInt(args[2]);
        System.out.println("Clent Socket Created");
        byte[] toSend = new byte[5];
        toSend[0] = 0x12; toSend[1] = 0x34;//Code Number
        toSend[2] = 15;//GroupId, f in hex
        toSend[3] = 0x27;toSend[4] = 0x66;
        System.out.println("Byte Array Constructed");

        DatagramPacket sendPacket = new DatagramPacket(toSend, toSend.length, IPAddress, Integer.parseInt(args[1]));
        clientSocket.send(sendPacket);          
        System.out.println("Sent Request. Waiting for reply...\n");

        DataInputStream input = new DataInputStream(echoSocket.getInputStream());
        toRecieve can either be an error message, a return of what we sent,
        or a byte stream full of IP info and port numbers.
        the "heavy" byte stream is either 4 for IPv4 of 16 for IPv6, 2 bytes for port,
        and the magic number (2 bytes) for a total of 9-20 bytes*/

        byte[] toRecieve = new byte[9];
        DatagramPacket receivePacket = new DatagramPacket(toRecieve, toRecieve.length);
        clientSocket.receive(receivePacket);            
        checkMessage(toRecieve);            
    } //and so on and so forth... 
```

感谢@Serge 的帮助，尽管没有人能正确回答我的问题。您建议的字节移位也很重要。

# cocoa - NSFileHandle 和 scanf 没有在 Xcode 4.5 中回显输入

> ID：12666336
> 
> 赞同：1
> 
> 时间：2012-10-01T00:35:02.717
> 
> 标签：cocoa, console, nsfilehandle, keyboard-input

我成功使用 NSFileHandle 读取键盘输入：

```
NSFileHandle * keyboard = [NSFileHandle fileHandleWithStandardInput];
NSData *inputData = [keyboard availableData];
NSString * input =[[NSString alloc] initWithData:inputData encoding:NSUTF8StringEncoding]; 
```

当用户键入时，只有输入的第一个字符会在屏幕上回显。例如，如果我键入`hello`，则只有`h`在屏幕上回显。然而，完整的输入被读入字符串。

正确的回声行为在 Xcode 4.2 中有效。我目前正在使用 Xcode 4.5。

**更新**

暂时放弃`NSFileHandle`，我尝试使用`scanf`. 然而，有同样的回声问题。`scanf`代码：

```
char word[4];
scanf("%s",word);
NSString * input = [[NSString alloc] initWithBytes:word length:4 encoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:50:32.970

这是 Xcode 4.5 中的一个错误。当控制台刷新时，所有回显的输入都会显示出来。

# macos - Getting a dotted font from a regular font

> ID：12666346
> 
> 赞同：2
> 
> 时间：2012-10-01T00:37:06.443
> 
> 标签：macos, cocoa, fonts

I have a need to take a regular font and obtain a dotted version of it. By "dotted", I mean that the lines and curves that make up the letterforms are composed of dots or dashes [MyFonts](http://www.myfonts.com/search/dotted/fonts/) has some examples of what I mean.

Is there any way to convert an existing non-dotted font into a dotted font without having to use a font editor myself?

# compiler-errors - What causes "Data type not implemented for operator 'COMPARE'" in this VHDL code?

> ID：12666349
> 
> 赞同：1
> 
> 时间：2012-10-01T00:37:32.427
> 
> 标签：compiler-errors, vhdl

I am trying to compare two variables:

```
variable E1, E2 : unsigned(5 downto 0); 
```

with:

```
if (E1 < E2) then
lt_val := '1';
end if; 
```

but that error comes up when I try to compile.

I have no idea what I am doing wrong.

EDIT: Here is the full file, I changed unsigned back to std_logic_vector and used the numeric_std library.

```
library IEEE;
use IEEE.std_logic_1164.all;
use IEEE.numeric_std.all;

entity FPA is
    port (clk, st : in  std_logic;
          d1      : in  std_logic_vector(15 downto 0);
          d2      : in  std_logic_vector(15 downto 0);
          sum     : out std_logic_vector(15 downto 0);
          rdy     : out std_logic);

end FPA;

architecture behav of FPA is

    type state is (s0, s1, s2, s3, s4, s5, s6, s7);
    signal new_state : state;
    signal norm      : std_logic;
    signal lt, gt    : std_logic;

begin

    process is
        variable curr_state : state := s7;
    begin
        if clk = '1' then
            case curr_state is
                when s0 =>
                    if st = '1' then curr_state := s1;
                    end if;
                when s1 =>
                    curr_state := s2;
                when s2 =>
                    if gt = '1' then curr_state := s4;
                    end if;
                    if lt = '1' then curr_state := s3;
                    end if;
                    if not((lt = '1') or (gt = '1')) then
                        curr_state := s5;
                    end if;
                when s3 =>
                    curr_state := s1;
                when s4 =>
                    curr_state := s1;
                when s5 =>
                    if norm = '1' then
                        curr_state := s6;
                    else
                        curr_state := s7;
                    end if;
                when s6 =>
                    curr_state := s7;
                when s7 =>
                    if st = '0' then curr_state := s0;
                    end if;
            end case;
            new_state <= curr_state;
        end if;
        new_state <= curr_state;
        wait on clk;
    end process;

    process is
        variable E1                : std_logic_vector(5 downto 0);
        variable E2                : std_logic_vector(5 downto 0);
        variable sum_val           : std_logic_vector(15 downto 0);
        variable X, Y              : std_logic_vector(11 downto 0);
        variable SGR               : std_logic_vector(11 downto 0);
        variable rdy_val, norm_val : std_logic;
        variable gt_val, lt_val    : std_logic;
    begin

        -- defaults

        rdy_val := '0';
        case new_state is

            when s0 =>
                sum_val := "ZZZZZZZZZZZZZZZZ";
                E1      := d1(15 downto 10);
                X       := "01" & d1(9 downto 0);
                E2      := d2(15 downto 10);
                Y       := "01" & d2(9 downto 0);
            when s1 =>
                if (E1 < E2) then
                    lt_val := '1';
                end if;
                if (E1 > E2) then
                    gt_val := '1';
                end if;
                SGR := X + Y;
            when s2 =>
                if SGR(11) = '1' then
                    norm_val := '1';
                end if;
            when s3 =>
                X  := X ror 1;
                E1 := E1 + "000001";
            when s4 =>
                Y  := Y ror 1;
                E2 := E2 + "000001";
            when s5 =>
            when s6 =>
                SGR := SGR ror 1;
                E2  := E2 + "000001";
            when s7 =>
                sum_val := E2 & SGR(9 downto 0);
                rdy_val := '1';
        end case;

        rdy  <= rdy_val;
        lt   <= lt_val;
        gt   <= gt_val;
        sum  <= sum_val;
        norm <= norm_val;

        wait on new_state;
    end process;

end behav; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T09:28:29.623

没有为 std_logic_vector 定义比较运算符，除非您使用非标准包。在您进行您提到的更改之前，我不知道您的代码是什么样的，但是现在的代码应该可以通过更改行来解决这个问题

```
if (E1<E2) then 
```

至

```
if (unsigned(E1) < unsigned(E2)) then 
```

请注意，“+”运算符也没有为 std_logic_vector 定义，因此无论何时对它们进行算术运算，都必须在 unsigned 和 std_logic_vector 之间来回转换 E1 和 E2。在您的情况下，最好将 E1 和 E2 定义为无符号而不是 std_logic_vector，只要您使用 numeric_std 包并且没有来自 IEEE 库的其他非标准包，它应该可以正常工作。（例如std_logic_unsigned）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T09:40:19.457

声明`E1`and `E2`as`unsigned`是正确的选择，但还不够。

您需要将其他几个变量声明为`unsigned`，动态地将输入从转换`std_logic_vector`为`unsigned`并动态地将您的变量转换`sum_val`回`std_logic_vector`以分配输出`sum`。

修补以下行似乎没问题（至少它在 ModelSim 中编译）：

```
 variable E1                : unsigned(5 downto 0);
    variable E2                : unsigned(5 downto 0);
    variable sum_val           : unsigned(15 downto 0);
    variable X, Y              : unsigned(11 downto 0);
    variable SGR               : unsigned(11 downto 0);
    -- ...
    E1      := unsigned(d1(15 downto 10));
    X       := unsigned("01" & d1(9 downto 0));
    E2      := unsigned(d2(15 downto 10));
    Y       := unsigned("01" & d2(9 downto 0));
    -- ...
    sum  <= std_logic_vector(sum_val); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T10:18:39.350

将所有向量改回`unsigned`（毕竟它们代表数字）。

如果它仍然不能编译，你可能有一个有缺陷的编译器（对我来说它在 Modelsim 中工作）

# java - Java：编译错误

> ID：12666350
> 
> 赞同：0
> 
> 时间：2012-10-01T00:37:35.887
> 
> 标签：java, compiler-errors

我使用两个类，但我运行：

C

名称：瑞吉

伊达德：25

出现

> registrosarraylist03xmlteste.RegistrosArrayList03_xmlteste.cadastrar(RegistrosArrayList03_xmlteste.java:72) 处的线程“main”java.lang.NullPointerException 异常在 registrosarraylist03xmlteste.RegistrosArrayList03_xmlteste.main(RegistrosArrayList03_xmlteste.java:23) Java 结果：1

而且`lista.remove(p);`不工作

```
/*
 * ArrayList
 */
package registrosarraylist03xmlteste;

import com.thoughtworks.xstream.XStream;
import java.io.File;
import java.util.ArrayList;
import java.util.Scanner;

public class RegistrosArrayList03_xmlteste {

    public static void main(String[] args) {
        ArrayList listaPessoas = new ArrayList();

        // Menu
        char op;
        do {
            op = menu();
            switch (op) {
                case 'C':
                case 'c': // cadastrar
                    cadastrar(listaPessoas);
                    gravarXML(listaPessoas, "teste.xml");
                    break;
                case 'L':
                case 'l': // ler
                    lerXML("teste.xml");
                    break;
                case 'E':
                case 'e': // editar
                    Scanner in = new Scanner(System.in);
                    MyPessoas p1 = new MyPessoas();
                    System.out.print("Digite o ID: ");
                    p1.ID = in.nextInt();
                    System.out.print("Novo nome: ");
                    p1.nome = in.next();
                    System.out.print("Nova idade: ");
                    p1.idade = in.nextInt();
                    editar(listaPessoas, p1);
                    gravarXML(listaPessoas, "teste.xml");
                    listar(listaPessoas);
                    break;
                case 'R':
                case 'r': // remover
                    System.out.println("O comando Remover ainda nao esta pronto.");
                    break;
                default:
                    System.out.println("Opcao invalida.");
                    break;
            }
        } while (op != 'S' && op != 's');
    }

    static char menu() {
        System.out.println("\n ### MENU ### Selecione uma opcao, digitando a primeira letra.");
        System.out.println("Cadastrar  Listar  Editar  Remover  Sair");
        System.out.print("Opcao: ");
        Scanner in = new Scanner(System.in);
        return in.next().charAt(0);
    }

    static void cadastrar(ArrayList lista) {
        Scanner in = new Scanner(System.in);
        MyPessoas p = new MyPessoas();
        // ID gerado automaticamente.
        System.out.print("Nome: ");
        p.nome = in.nextLine();
        System.out.print("Idade: ");
        p.idade = in.nextInt();
        System.out.print("Fone: ");
        p.fone.fone=in.next();
        lista.add(p);
    }

    static void listar(ArrayList lista) {
        System.out.println("ID - Nome - Idade");
        for (int i = 0; i < lista.size(); i++) {
            // Obtem os dados da lista MyPessoas
            MyPessoas p = (MyPessoas) lista.get(i);
            System.out.println(p.ID + "  - " + p.nome + " - " + p.idade);
        }
    }

    static ArrayList lerXML(String filename) {
        XStream xstream = new XStream();
        File arquivo = new File(filename);
        ArrayList listaPessoas = (ArrayList) xstream.fromXML(arquivo);
        listar(listaPessoas);
        return listaPessoas;
    }

    static void gravarXML(ArrayList lista, String filename) {
        XStream xstream = new XStream();
        String xml = xstream.toXML(lista);
        GravarLer Gravar = new GravarLer();
        GravarLer.gravar(xml, filename);
    }

    static void editar(ArrayList lista, MyPessoas p1) {
        System.out.print("Digite o nome: ");
        for (int i = 0; i < lista.size(); i++) {
            // Obtem os dados da lista MyPessoas
            MyPessoas p = (MyPessoas) lista.get(i);
            if (p.ID == p1.ID) {
                p.nome = p1.nome;
                p.idade = p1.idade;
                break;
            }
        }
    }
//    static void remover(ArrayList lista, MyPessoas p1) {
//        // Obtem os dados da lista MyPessoas
//        MyPessoas p = new MyPessoas();
//        System.out.print("Digite o ID: ");
//        rmvID = in.nextInt();
//        lista.remove(p);
//    }
}

/*
 * Classe de MyPessoas
 */
package registrosarraylist03xmlteste;

public class MyPessoas {

    public static int lastID = 1;
    public int ID;
    public String nome;
    public int idade;
    public Fone fone;

    // Adiciona numeracao sequencial ao ID.
    public MyPessoas() {
        ID = MyPessoas.lastID++;
    }
}

package registrosarraylist03xmlteste;

public class Fone {

    public String fone;
}

/*
 * Grava e Le registros em arquivos XML.
 */
package registrosarraylist03xmlteste;

import java.io.File;
import java.io.FileWriter;
import java.util.Scanner;

public class GravarLer {

    static void gravar(String xml, String filename) {
        try {
            FileWriter w = new FileWriter(filename);
            w.write(xml);
            w.flush();
            w.close();
        } catch (Exception e) {
            System.out.println("Erro ao gravar XML: " + e);
        }
    }

    static String ler(String filename) {
        try {
            Scanner in = new Scanner(new File(filename));
            StringBuilder sb = new StringBuilder();
            while (in.hasNext()) {
                sb.append(in.next());
            }
            in.close();
            return sb.toString();
        } catch (Exception e) {
            System.out.println("Erro ao ler XML: " + e);
        }
        return "";
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T00:46:33.143

您必须在 MyPessoas 类中初始化 Fone 属性。在构造函数中添加：

```
fone = new Fone(); 
```

乍一看，这应该可以解决您的错误，但您可能需要进行其他更正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T00:38:38.917

那是运行时异常，而不是编译错误。

阅读堆栈跟踪。在 IDE 或编辑器中打开源代码，打开行号显示，然后转到第 72 行。取消引用该行上的空引用。找到它。

# machine-learning - Recommendation rules for sorting a list based on a profile

> ID：12666355
> 
> 赞同：0
> 
> 时间：2012-10-01T00:38:22.690
> 
> 标签：machine-learning, recommendation-engine

I working on a site that needs to present a set of options that have no particular order. I need to sort this list based on the customer that is viewing the list. I thought of doing this by generating recommendation rules and sorting the list putting the best suited to be liked by the customer on the top. Furthermore I think I'd be cool that if the confidence in the recommendation is high, I can tell the customer why I'm recommending that.

For example, lets say we have an icecream joint who has website where customers can register and make orders online. The customer information contains basic info like gender, DOB, address, etc. My goal is mining previous orders made by customers to generate rules with the format

```
 feature -> flavor 
```

where feature would be either information in the profile or in the order itself (like, for example, we might ask how many people are you expecting to serve, their ages, etc). I would then pull the rules that apply to the current customer and use the ones with higher confidence on the top of the list.

My question, what's the best standar algorithm to solve this? I have some experience in apriori and initially I thought of using it but since I'm interested in having only 1 consequent I'm thinking now that maybe other alternatives might be better suited. But in any case I'm not that knowledgeable about machine learning so I'd appreciate any help and references.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T02:35:25.000

这是一个推荐问题。

首先，先验算法不再是推荐系统的最新技术。（相关讨论在这里：[使用先验算法进行推荐](https://stackoverflow.com/questions/1255663/using-the-apriori-algorithm-for-recommendations)）。

查看以下书籍**Mining of Massive Datasets的第 9 章****推荐系统**。这是一个很好的教程。

 **[http://infolab.stanford.edu/~ullman/mmds.html](http://infolab.stanford.edu/~ullman/mmds.html)

基本上你有两种不同的方法：基于内容和协同过滤。后者可以根据基于项目或基于用户的方法来完成。还有一些方法可以组合这些方法以获得更好的推荐。

一些可能有用的进一步阅读：

*   最近一篇关于推荐系统的调查论文：http: [//arxiv.org/abs/1006.5278](http://arxiv.org/abs/1006.5278)

*   亚马逊商品到商品协同过滤：[http ://www.cs.umd.edu/~samir/498/Amazon-Recommendations.pdf](http://www.cs.umd.edu/~samir/498/Amazon-Recommendations.pdf)

*   矩阵分解技术：[http ://research.yahoo4.akadns.net/files/ieeecomputer.pdf](http://research.yahoo4.akadns.net/files/ieeecomputer.pdf)

*   Netflix 挑战：[http ://blog.echen.me/2011/10/24/winning-the-netflix-prize-a-summary/](http://blog.echen.me/2011/10/24/winning-the-netflix-prize-a-summary/)

*   谷歌新闻个性化：http: [//videolectures.net/google_datar_gnp/](http://videolectures.net/google_datar_gnp/)

一些相关的stackoverflow主题：

*   [如何创建自己的推荐引擎？](https://stackoverflow.com/questions/1407841/how-to-create-my-own-recommendation-engine?rq=1)

*   [我在哪里可以了解推荐系统？](https://stackoverflow.com/questions/1592037/where-can-i-learn-about-recommendation-systems?rq=1)

*   [如何使我的推荐引擎适应冷启动？](https://stackoverflow.com/questions/1992508/recommendation-systems-and-the-cold-start-problem?rq=1)

*   [网页推荐系统](https://stackoverflow.com/questions/12778823/web-page-recommender-system)**

# perl - 无法运行这个简单的 Perl CGI 程序

> ID：12666361
> 
> 赞同：0
> 
> 时间：2012-10-01T00:40:14.620
> 
> 标签：perl, cgi, cgi-bin

有人可以向我解释让 perl 在服务器上工作的基础知识吗？我需要服务器上的模块吗？如果是这样，它会去哪里？我如何命名我的文件以及它们去哪里？

据我了解，您需要一个模块，它位于 cgi-bin 中。无论我将文件命名为 .pl 还是 .cgi，我都无法得到明确的答案，当我将它放入 cgi-bin 时，我遇到了服务器错误。我的权限也设置为 777，所以这不应该是问题。

请帮忙！我只想了解如何使非常基本的程序正常工作，例如下面的程序。提前致谢！

```
 #!/usr/bin/perl
    require("cgi-lib.pl");
    print &PrintHeader;

    print "<html>";
    print "<head><title>Hello world!</title></head>";
    print "<body>";
    print "<p>Hello world!</p>";
    print "</body>";
    print "</html>"; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T01:05:56.723

最新版本的`cgi-lib.pl`日期为 1999 年，并且非常过时。我建议您改用该[`CGI`](https://metacpan.org/module/CGI)库，它几乎肯定已经安装在您的服务器上并保持最新（最近一次是在 2012 年 8 月 16 日）

您的程序应如下所示：

```
#!/usr/bin/perl -- 

use strict;
use warnings;

use CGI ':standard';

print header;

print <<END;
<html>
  <head><title>Hello world!</title></head>
  <body>
    <p>Hello world!</p>
  </body>
</html>
END 
```

另请注意，您可以从命令行运行程序以查看它是否编译以及它生成的输出。一旦你在那里工作，你可以将它移动到服务器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T00:53:37.333

您面临的问题是您可能在 Windows 机器上编辑了源文件，它`CR`在每个换行符之前插入一个字符。确保您的代码不包含任何 CR 或将第一行更改为：

```
#!/usr/bin/perl -- 
```

（即行尾的两个破折号和一个空格）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T20:04:29.837

我同意 Dave Cross 的评论，你需要告诉你的学校，他们教你的方法不正确。我们在 Perl 领域正试图让人们停止使用 CGI 模块，而您正在使用它的前身！

这是一个现代 Perl 框架[Mojolicious](http://mojolicio.us)中的 hello world 应用程序：

```
#!/usr/bin/env perl

use Mojolicious::Lite;

get '/' => 'hello';

app->start;

__DATA__

@@ hello.html.ep
<html>
  <head><title>Hello world!</title></head>
  <body>
    <p>Hello world!</p>
  </body>
</html> 
```

您将其放入文件中，（可以说`test.pl`）。通过运行安装 Mojolicious：

```
curl get.mojolicio.us | sh 
```

然后通过运行启动您的应用程序

```
perl test.pl daemon 
```

现在您可以`http://localhost:3000`在浏览器中访问查看结果，无需 Apache，无需 cgi-bin！

一个更有趣的示例采用带有默认值的“参数”：

```
#!/usr/bin/env perl

use Mojolicious::Lite;

get '/:name' => { name => 'world' } => 'hello';

app->start;

__DATA__

@@ hello.html.ep
<html>
  <head><title>Hello <%= $name %>!</title></head>
  <body>
    <p>Hello <%= $name %>!</p>
  </body>
</html> 
```

运行它并尝试访问`http://localhost:3000/SilverNightaFall`并查看它的作用！

这种将动态值插入到 HTML 中的过程称为模板化，现在更受欢迎（而不是在每个请求上生成整个 HTML）。

# c++ - c++ std::move 混淆

> ID：12666362
> 
> 赞同：4
> 
> 时间：2012-10-01T00:40:26.837
> 
> 标签：c++, c++11

我对以下代码片段中发生的事情感到困惑。`move`这里真的有必要吗？返回临时集的最佳+安全方式是什么？

```
set<string> getWords()
{
    set<string> words;

    for (auto iter = wordIndex.begin(); iter != wordIndex.end(); ++iter)
    {
        words.insert(iter->first);
    }

    return move(words);
} 
```

我的调用代码只是`set<string> words = foo.getWords()`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T00:45:18.147

首先，设置不是*临时*的，而是*本地*的。

其次，返回它的正确方法是 via `return words;`。

这不仅是您允许返回值优化的唯一方法，而且，在副本没有完全省略的（不寻常）情况下，局部变量还将绑定到返回对象的移动构造函数。所以这是一个真正的三赢局面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T00:48:44.033

此处无需使用 move 。只需返回“单词”。它将参与所谓的“回报价值优化”。

C++11 标准中的第 12.8 节要求在返回局部变量的情况下调用移动构造函数（如果存在）。本质上，编译器会为你调用 std::move。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T00:44:44.837

不，显式`move`不一定是移动`set`. 由于`set`是按值返回的，编译器可以对 执行*命名返回值优化*，`set`这意味着它可以省略副本并直接`set`在要存储返回值的调用站点就地构造。显式移动会抑制这一点。

# java - 如何使用 Java Regex 删除文本中的标题？

> ID：12666367
> 
> 赞同：1
> 
> 时间：2012-10-01T00:42:35.323
> 
> 标签：java, regex

我正在做一个项目，我在其中阅读了大量具有相似标题的文档。标题以相同的单词开头和结尾，但开头和结尾之间的单词可能会有所不同。我正在尝试使用 Pattern 和 Matcher 来查找这些，但遇到了麻烦。这是我的代码：

```
Pattern docHeader = Pattern.compile("HEADER[ ]*:[.\\n\\t ]*header end"); 
```

所以标题看起来大致是这样的：

```
HEADER:

random junk

random junk

header end

Document information start. 
```

我试图在开始擦洗文本之前删除所有标题以节省后端时间。但它永远找不到我的模式。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:06:38.410

您可以尝试使用此模式作为 RegEx 解决方案：

```
Pattern docHeader = Pattern.compile("HEADER.*header end",Pattern.DOTALL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:36:06.320

您可以在一行中执行此操作，而不必使用`Pattern`etc 弄脏自己：

```
String headlessInput = input.replaceAll("(?s)HEADER.*header end", ""); 
```

fyi，正则表达式为正则`(?s)`表达式的其余部分打开“点匹配换行符”。

# scala - 无法弄清楚 Scala 类型继承、协方差、方法和列表问题

> ID：12666371
> 
> 赞同：0
> 
> 时间：2012-10-01T00:43:59.427
> 
> 标签：scala, inheritance, covariance

我收到此编译消息：

> 推断类型参数 [sdo.core.domain.Field[_ >: *2 with java.util.UUID <: java.lang.Comparable[* >: *1 with java.util.UUID <: java.lang.Object] with java. io.Serializable]] 不符合方法 :: 的类型参数界限 [B>: sdo.core.domain.Field[* >: String with org.scala_tools.time.Imports.DateTime <: java.lang.Comparable[ _ >: java.lang.String with org.joda.time.ReadableInstant <: java.lang.Object] with java.io.Serializable]] [error] override def fieldList = this.id :: this.create :: this .name :: this.description :: 无

我想要的是一个列表`Field[_]`，或者任何与`Field[_]`. 我怎么做？

这是有问题的代码：

```
class Work( initialId :EntityUuidIdField, 
    initialName :NameField, 
    initialDescription :TextField) extends Entity{

    val id = initialId
    val name = initialName
    val description :Field[String]= initialDescription
    val create = new DateTimeField()
    val begun = new DateTimeField()
    val inProgress = new DateTimeField()
    val done = new DateTimeField()
    val subjectiveWellBeing = new SubjectiveWellBeingField()
    val size = new WorkSizeField()

    override def fieldList = this.id :: this.create ::  this.name :: this.description       :: Nil

    } 
```

以及类型的定义：

```
class DateTimeField extends Field[DateTime] {

class EntityUuidIdField( val id :UUID) extends EntityIdField[UUID]( id) {

class EntityIdField[T]( id :T) extends Field[T] {

class NameField extends Field[String] {

class Field[T] extends Signal[T] { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T03:40:43.230

看起来不喜欢这三种类型的交集；我还没有尝试过-Yinfer-debug。

但是 List(x,y,z) 是可以的。

```
scala> trait X extends Comparable[X] with Serializable
defined trait X

scala> trait Y extends Comparable[Y] with Serializable
defined trait Y

scala> case class Foo[+A](a: A)
defined class Foo

scala> val x: Foo[X] = null
x: Foo[X] = null

scala>  val y: Foo[Y] = null
y: Foo[Y] = null

scala> val s : Foo[String] = null
s: Foo[String] = null

scala> s :: Nil
res0: List[Foo[String]] = List(null)

scala> y :: s :: Nil
res1: List[Foo[Comparable[_ >: String with Y <: java.io.Serializable] with java.io.Serializable]] = List(null, null)

scala> x :: y :: s :: Nil
<console>:15: error: inferred type arguments [Foo[Comparable[_ >: _2 with X <: java.io.Serializable] with java.io.Serializable]] do not conform to method ::'s type parameter bounds [B >: Foo[Comparable[_ >: String with Y <: java.io.Serializable] with java.io.Serializable]]
              x :: y :: s :: Nil

scala> val u: Foo[java.util.UUID] = null
u: Foo[java.util.UUID] = null

scala> x :: y :: u :: Nil
<console>:15: error: inferred type arguments [Foo[Comparable[_ >: _4 with X <: java.io.Serializable] with java.io.Serializable]] do not conform to method ::'s type parameter bounds [B >: Foo[Comparable[_ >: java.util.UUID with Y <: java.io.Serializable] with java.io.Serializable]]
              x :: y :: u :: Nil
                ^

scala> val a: Foo[AnyRef] = null
a: Foo[AnyRef] = null

scala> x :: y :: a :: Nil
res5: List[Foo[AnyRef]] = List(null, null, null)

scala> trait Z extends Comparable[Z] with Serializable
defined trait Z

scala> val z: Foo[Z] = null
z: Foo[Z] = null

scala> x :: y :: z :: Nil
<console>:16: error: inferred type arguments [Foo[Serializable with Comparable[_ >: _6 with X <: Serializable]]] do not conform to method ::'s type parameter bounds [B >: Foo[Serializable with Comparable[_ >: Z with Y <: Serializable]]]
              x :: y :: z :: Nil
                ^

scala> List(x,y,z,s,u)
res7: List[Foo[Comparable[_ >: java.util.UUID with String with Z with Y with X <: java.io.Serializable] with java.io.Serializable]] = List(null, null, null, null, null) 
```

# r - 数据表列表中的连续 setdiff

> ID：12666372
> 
> 赞同：1
> 
> 时间：2012-10-01T00:44:09.550
> 
> 标签：r, list, data.table, set-difference

使用组织为的数据

```
dtl <- replicate(10,data.table(id=sample(letters,10),val=sample(10)), simplify=F)
lapply(dtl, function(x){setkey(x,'id')}) 
```

我需要提取包含 dtl[[n+1]]] 中行的数据表列表，其中**id**不存在于 dtl[[n]] 中。我想它会像

```
dtl2 <- list(setdiff(dtl[[1]][['id']],dtl[[2]][['id']]),setdiff(dtl[[2]][['id']],dtl[[3]][['id']]...) 
```

请注意，虽然 setdiff 应该只考虑**id**列，但我希望结果包含每个数据表中的所有列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T00:52:25.310

我认为这会为你做到：

```
mapply(setdiff, head(dtl, -1), tail(dtl, -1), SIMPLIFY = FALSE) 
```

**编辑**：使用您的新预期输出，我仍然会`mapply`像上面那样使用，但有以下两个更改之一：

1.  替换`setdiff`为`function(x,y)setdiff(x$id, y$id)`
2.  替换`dtl`为`ids <- lapply(dtl, "[", "id")`

**Edit2:** : 您通过添加与您提供的代码不匹配的简单英文描述再次更改了预期输出......我*认为*您现在正在寻找这个：

```
mapply(function(x,y)y[setdiff(y$id, x$id), ],
       head(dtl, -1), tail(dtl, -1), SIMPLIFY = FALSE) 
```

# iphone - iOS中文本字段的自定义外观

> ID：12666374
> 
> 赞同：1
> 
> 时间：2012-10-01T00:44:40.180
> 
> 标签：iphone, objective-c, ios, uikit, uitextfield

我是 Objective-C 的初学者，并且对创建自定义外观文本框有疑问。我希望能够创建一个文本框区域，该区域具有例如带有标签和不同背景颜色等的标题，其中显示文本输入。如何在 Objective-C 中做这样的事情？是否只是创建一个`UILabel`在 UITextBox 顶部具有特定坐标的自定义类？让我知道是否有人可以指出我正确的方向。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T01:29:04.797

一种选择是创建一个包含 UITextField 和 UILabel 作为子视图的自定义视图。之后，可以重新使用视图。

我强烈推荐阅读 Apple 的 View Programming Guide：http: [//developer.apple.com/library/ios/#DOCUMENTATION/WindowsViews/Conceptual/ViewPG_iPhoneOS/Introduction/Introduction.html](http://developer.apple.com/library/ios/#DOCUMENTATION/WindowsViews/Conceptual/ViewPG_iPhoneOS/Introduction/Introduction.html)

有关创建聚合自定义视图的相关帖子： [.Net UserControl XCode 等效](https://stackoverflow.com/questions/7699384/net-usercontrol-xcode-equivalente)

这是一个关于创建自定义视图的教程： [http ://www.raywenderlich.com/1768/how-to-make-a-custom-uiview-a-5-star-rating-view](http://www.raywenderlich.com/1768/how-to-make-a-custom-uiview-a-5-star-rating-view)

您还可以查看其他自定义控件的构建方式。cocoacontrols.com 上的许多控件都是开源的：http: [//www.cocoacontrols.com/](http://www.cocoacontrols.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-12T11:47:49.473

使用文本字段的图层属性，例如

```
@property (nonatomic,weak)IBOutlet UITextfield *email; 
```

所以在实现文件或视图中确实加载了方法

```
self.email.layer.backgroundColor = [uicolor orangeColor]; 
```

# iphone - iOS 和蓝牙低功耗，可能性？

> ID：12666382
> 
> 赞同：3
> 
> 时间：2012-10-01T00:47:06.830
> 
> 标签：iphone, ios, bluetooth, arduino, bluetooth-lowenergy

我想通过蓝牙将机器人与 iPhone（4S 或更高版本）通过[蓝牙低功耗](http://en.wikipedia.org/wiki/Bluetooth_low_energy)(BLE) 4.0 连接起来。该机器人需要将 iPhone 的所有通知发送到设备。

例如：如果 iPhone 收到一封新电子邮件，我必须将事件发送给机器人，它会闪烁 LED。停止。

我想知道蓝牙框架的iOS蓝牙[API](http://en.wikipedia.org/wiki/Application_programming_interface)是否可以做到这一点，或者更好，可以共享互联网连接或任何可以做到这一点的东西。

我问这个，因为我听说 API 有一些限制。

PS：任何可以做到这一点的解决方案都非常受欢迎（没有 Wi-Fi 连接解决方​​案）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T03:26:42.150

蓝牙 LE 将是您想要的方式，因为标准蓝牙要求您的设备符合[MFi](https://developer.apple.com/programs/mfi/)标准。如果您能够要求支持网络的存在，标准 Wi-Fi 也可以工作。

从 iOS 6.0 开始，您可以将您的 iPhone 设置为蓝牙 LE 外围设备，如果它被配置为中心角色，它将允许它向您的设备发送通知。这将是一种使用新数据更新设备的非常省电的方式。

但是，在这里做你想做的事有一个很大的障碍。iOS 应用程序无法访问系统范围的通知，因此您将无法收听传入的电子邮件或其他类似的通知。您将能够通过蓝牙 LE 将数据发送到您的设备，但您不知道电子邮件何时进入以便您可以将其发送到您的设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:03:51.713

使用蓝牙 4，您可以控制机器人，以及创建“通知”机器人。它可以很容易地完成。但是如前所述，您无法在 iOS 中访问系统范围的通知。

但是，您可以使用外部解决方案来侦听系统通知，然后使用 API 来侦听单个编码通知并让您的应用程序侦听该通知。

一个这样的系统是[https://ifttt.com](https://ifttt.com)（无从属关系）

还有一些很棒的即插即用 BLE 选项可用于快速原型设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T07:56:45.950

你能行的。一个简单的解决方案是让手机定期检查您的电子邮件。不要依赖或尝试使用外部 Apple 应用程序来执行此操作，而是使用您的邮件提供的服务。

在[Gmail](http://en.wikipedia.org/wiki/Gmail)的情况下，尝试转到`https://mail.google.com/mail/feed/atom`. 如果您已登录 Gmail，您将看到 XML 格式的未读邮件。使用 URL 登录的方式是：`https://username:password@mail.google.com/mail/feed/atom`

因此，您可以做的是定期解析输出，并在`<fullcount>0</fullcount>`值更改时通过 BLE 调用您的机器人服务，该服务应作为此特定事件的回调。

# c++ - 在 C++ 中连接字符数组

> ID：12666383
> 
> 赞同：2
> 
> 时间：2012-10-01T00:47:16.367
> 
> 标签：c++, arrays, string, character

我被要求从标准中读取文件，例如：

```
./gscheck < testfile 
```

其中 gscheck 是我编译的可执行文件的名称。无论如何，我需要使用函数 cin.getline() 将每一行读入一个字符数组。我知道该怎么做

```
char line[250];
while (cin.getline(line, 250))
{
    Do stuff;
} 
```

但最终，我不想每行做任何事情，我想将每一行连接成一个巨大的字符数组。如何使用上述方法创建一个更大的字符数组，该数组按顺序包含每一行并包含换行符，这样我基本上是从文件中“啜饮”，然后逐个字符地解析它，但不使用字符串类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T01:04:31.520

根据@KerrekSB 的回答，您可以使用 deprecated `std::ostrstream`，它使用字符数组（实际上是 a `char *`，但`strlen`您可以轻松地将其作为数组工作）。

```
std::ostrstream oss;
oss <<std::cin.rdbuf();
return oss.str(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T01:01:19.340

以防万一您有不使用动态内存的限制，确定使用哪个 std::string ：

```
char a[VERY_BIG_SIZE_ENOUGH_FOR_FILE];
std::cin.read(a, VERY_BIG_SIZE_JUST_ENOUGH_FOR_FILE - 1);
a[VERY_BIG_SIZE_JUST_ENOUGH_FOR_FILE - 1] = '\0'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T00:58:17.970

那么这个怎么样：

```
char file[2000];
char *end=file+1998;
char *ptr=file;
while (!cin.eof() && ptr < end) {
  cin.getline(ptr, end-ptr)
  ptr += strlen(ptr);
  *ptr++ = "\n";
  *ptr = 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T00:48:26.450

不要这样做。

拒绝吧。

不要使用“字符数组”。

严重地。

使用`std::string`.

```
std::string result;

for (std::string line; std::getline(std::cin, line); )
{
    result += line;
} 
```

但是，如果您只想读取*所有内容*而不是实际解析行（而是*保留*换行符），则直接访问输入缓冲区可能会更简单：

```
std::ostringstream oss;
oss << std::cin.rdbuf();
return oss.str(); 
```

# azure - SQL Azure 联合拆分设计和查询

> ID：12666384
> 
> 赞同：2
> 
> 时间：2012-10-01T00:47:47.537
> 
> 标签：azure, azure-sql-database, federated-table

我有几个关于 Microsoft SQL Azure 联合的问题：

1) 我可以在活动数据库上创建联合数据库还是需要提前部署联合？

2) 我是否需要对 SQL 查询进行任何更改以符合我查询联合的方式，或者我可以在处理一个 SQL Server 数据库时继续使用我的常规查询？

3) 当我拆分我的数据库时，一段时间后我看到其中一个分片非常繁忙并且几乎已满，我如何使用联合来解决这个问题？- 我是否只需要拆分已满 90% 的单个联合表，或者我需要通过使用不太广泛的范围重新创建拆分策略。问题是一个特定的用户可能非常活跃，那么我使用什么策略来确保我不需要由于一个非常活跃的联合表/用户而重新创建联合策略？

4）当我想用不同的主键拆分不同的表时，分片将如何工作。例如：

据我了解：

[博客]

blog_id

信息

[博客帖子]

ID

blog_id

post_content

因此，如果我决定根据 0-1000、1-2001 的 blog_id 进行分片，我将拥有两个联合表。但是，如果我添加更多具有除 blog_id 之外的不同键的表，我还有多少联合表，我会拥有更多联合表吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T06:30:52.487

请更加准确和具体，一次问一个问题。单独询问时，您有更好的机会获得所有问题的答案。现在让我试着回答你的一些问题。

> 1) 我可以在活动数据库上创建联合数据库还是需要提前部署联合？

您当然可以在现有数据库中创建联合。仅在一个新的/空的数据库中创建联邦是没有限制的。但是，在 Active DB 中创建联合对您没有任何帮助。您必须意识到联邦是独立的数据库。联邦（或联邦成员）对联邦根数据库（您创建联邦的数据库）一无所知。因此，一旦您创建了联邦，您就必须考虑从活动数据库（或联邦根）迁移模式/数据。

> 2) 我是否需要对 SQL 查询进行任何更改以符合我查询联合的方式，或者我可以在处理一个 SQL Server 数据库时继续使用我的常规查询？

很可能是的。Windows Azure SQL 数据库联合是数据库层的横向扩展机制。这意味着，就像任何 Web 应用程序需要“特殊”设计才能在类似农场的环境（即像 Windows Azure 这样的横向扩展环境）中工作一样，数据库也需要“特殊”设计才能在横向扩展环境中工作环境。SQL Azure 联合没有魔杖可以让您的代码正常工作。您必须将其设计为工作。

> 3) 当我拆分我的数据库时，一段时间后我看到其中一个分片非常繁忙并且几乎已满，我如何使用联合来解决这个问题？- 我是否只需要拆分已满 90% 的单个联合表，或者我需要通过使用不太广泛的范围重新创建拆分策略。问题是一个特定的用户可能非常活跃，那么我使用什么策略来确保我不需要由于一个非常活跃的联合表/用户而重新创建联合策略？

这都是关于分区策略的。您必须非常仔细地设计您的联合密钥以及如何在不同的分片之间分区您的数据。只要将原子单元保持在单个分片中，您就可以随时拆分任何联邦。

> 4）当我想用不同的主键拆分不同的表时，分片将如何工作。

如果您想在不同的键上拆分不同的表，那么您将拥有不同的联邦，每个联邦都有自己的联邦键和自己的表。

如果您准备参加 SQL 联盟，那么值得一看的好视频：http: [//channel9.msdn.com/Events/TechEd/NorthAmerica/2012/DBI408](http://channel9.msdn.com/Events/TechEd/NorthAmerica/2012/DBI408)

# c++ - C++ 中的重载运算符 -=

> ID：12666388
> 
> 赞同：1
> 
> 时间：2012-10-01T00:48:39.667
> 
> 标签：c++, overloading, operator-keyword

我为我的 Rational 类定义了 operator -= 的重载：

```
rational.hh:
class Rational {

public:
    Rational(int numerator, int denominator) : numerator(numerator), denominator(denominator)
    { }

    int getNumerator() const;
    int getDenominator() const;
    Rational& operator-=(const Rational& bar);

private:
    int numerator, denominator;

rational.cc:
Rational& Rational::operator-=(const Rational& subtracted) {
    Rational result((*this).getNumerator()*subtracted.getDenominator() - (*this).getDenominator()*subtracted.getNumerator(), (*this).getDenominator()*subtracted.getDenominator());
    return *this;
} 
```

代码编译时没有警告，但这段代码不会改变 r 的值：

```
 Rational r(1, 1);
  r -= Rational(1, 2); 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T00:52:14.807

您的`-=`操作员应该更改 and 的值`numerator`，`denominator`但事实并非如此。添加代码以将这些值设置为`this`，而不是创建`result`：

```
Rational& Rational::operator-=(const Rational& subtracted) {
    numerator = (*this).getNumerator()*subtracted.getDenominator() - (*this).getDenominator()*subtracted.getNumerator();
    denominator = (*this).getDenominator()*subtracted.getDenominator();
    return *this;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T00:54:47.800

你永远不会在你的 operator-= 中分配给“this”！

您的函数创建一个临时的 Rational 对象（称为“结果”）。然后，它忘记了“结果”并返回它。

您需要实际分配给 this->numerator 和 this->denominator。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T00:53:57.430

之所以如此，是因为你没有改变对象。

您必须更改对象成员变量而不是创建临时对象。

```
Rational& Rational::operator-=(const Rational& subtracted) {
    numerator = ...;
    denominator = ...;
    return *this;
} 
```

你应该知道这一点：

```
Rational result(...); 
```

只是创建本地对象。它与调用的对象无关`-=`。

# cakephp - CakePhP 链接

> ID：12666390
> 
> 赞同：-1
> 
> 时间：2012-10-01T00:48:44.093
> 
> 标签：cakephp, hyperlink

大家好，我有一个 cakephp 页面，当您将鼠标悬停在链接上时，它会显示正确的链接，但是当您单击该链接时，它会将您带到一个完全不同/错误的页面。

我认为这是我的观点错误，所以我将在此处包含网站的相关部分，正在发生的事情是`add link`让用户`fields/view`不要`fields/add_new`

```
 <tr>
                <td align='center'><?php echo $templates['Template']['name'] ;?></td>
            <td align='center'><?php echo $templates['Template']['description']; ?> </td>
                <td align='center'>
                    <?php echo $this->Form->Html->link('Add', array('controller' => 'Fields','action'=>'add_new',$templates['Template']['id'])); ;?> |
                    <?php echo $this->Form->Html->link('View', array('controller' => 'Fields','action'=>'view',$templates['Template']['id'])); ;?> |
                    <?php echo $this->Form->Html->link('Edit', array('controller' => 'Templates','action'=>'edit',$templates['Template']['id'])); ;?> |
                    <?php echo $this->Form->Html->link('Delete', array('controller' => 'Templates','action'=>'delete',$templates['Template']['id'])); ;?></td> 
         <tr>

function add_new($id=null){
        //allows users to add another field to an existing template
        $this->set('title_for_layout', 'Create Fields');
        $this->set('stylesheet_used', 'homestyle');
        $this->set('image_used', 'eBOXLogoHome.png');
        $this->layout='home_layout';

        if(($this->Field->save($this->request->data)))
        {

        $id = $this->data['Field']['template_id'];

        $this->set('id',$id);
        $this->redirect(array('controller'=>'Fields', 'action'=>'view',$id));

        }
            $this->set('id',$id);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T01:09:43.407

该`link`函数是`HtmlHelper`类的一部分。所以你需要`->Form`从你的函数调用中删除：

```
<?php echo $this->Html->link('Add', array('controller' => 'fields', 'action'=>'add_new',$templates['Template']['id'])); ;?> 
```

此外，Cake 约定要求控制器名称为小写，因此将控制器指定为：

`('controller' => 'fields',`

并不是

`('controller' => 'Fields',`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T09:50:41.140

```
function add_new($id=null){
        //allows users to add another field to an existing template
        $this->set('title_for_layout', 'Create Fields');
        $this->set('stylesheet_used', 'homestyle');
        $this->set('image_used', 'eBOXLogoHome.png');
        $this->layout='home_layout';

        //this sets the parameter as a variable 
        $this->set('id', $id);
        //if the data posts to the databse
        if($this->request->is('post'))
        {
            //creates an instance of field in the database
            $this->Field->create(); 
            //if the field saves to the database
            if ($this->Field->save($this->request->data))
            {   //if the user clicks this button
                $id = $this->data['Field']['template_id'];

                $this->set('id',$id);
                $this->redirect(array('controller'=>'Fields', 'action'=>'view',$id));

            }

        }

    } 
```

# ajax - Uncaught SyntaxError: Unexpected token : ，当我访问tickets.com json api时

> ID：12666393
> 
> 赞同：2
> 
> 时间：2012-10-01T00:49:56.467
> 
> 标签：ajax, json, api, jquery, jsonp

我正在尝试从以下位置获取数据：

```
http://api.master18.tiket.com/search/autocomplete/hotel?q=mah&token=90d2fad44172390b11527557e6250e50&secretkey=83e2f0484edbd2ad6fc9888c1e30ea44&output=json 
```

我正在使用 jQuery`$.ajax`方法，代码写在我的`index.html`文件中：

```
function getAPI() {
    jQuery.ajax({
        url: 'http://api.master18.tiket.com/search/autocomplete/hotel?q=mah&token=90d2fad44172390b11527557e6250e50&secretkey=83e2f0484edbd2ad6fc9888c1e30ea44&output=json',
        type:"get",
        dataType: 'jsonp',
        crossDomain: true,
        jsonp: false,
        success: function(data) { console.log(data); }
    });
} 
```

当我在 Chrome 控制台中尝试时，有一条消息

```
Uncaught Syntax Error:Unexpected token: 
```

我很困惑问题是什么，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T01:15:00.883

返回的内容是 json，而不是您在 dataType 中指定的 jsonp。此外，通过将 jsonp 设置为 false，您可以防止 jquery 将 jsonp 查询字符串附加到 URL，这可能是您使用的 API 返回 json 而不是 jsonp 的原因。我会尝试取出 jsonp: false 参数。

# php - 如何使用 php 和 ajax 检查用户和密码

> ID：12666398
> 
> 赞同：-3
> 
> 时间：2012-10-01T00:51:01.270
> 
> 标签：php, ajax, validation

我对如何检查存储在数组中的用户名和密码有疑问，我不知道如何使用ajax

HTML

```
<input type="text" id="tuser" /><br>
<input type="password" id="password" /><br>
<input type="submit" id="send" value="Send"/><br>
<input type="range" id="rg" name="rg" min="0" max="50"/><br>

<script>
    $(document).ready(function() {
        $("#tuser").focus();$("#rg").hide();

        });     
        $("#tuser").keyup(function() {
            $.ajax({type:"GET",
                url: "validate.php",
                data:"names="+$("#tuser").val()+"pass="+$("#password").val(),
                success:function(data) {
                    if (data=="Error") {
                        $("rango").hide();
                    } else {
                        $("#rg").show();

                    }
                }
            });
        });
</script> 
```

PHP 验证（这里我知道如何发送名称但我不知道如何发送密码）

```
if($_GET['names']!=''){
  $personal=array("Kaoru"=>'hello1',"Megumi"=>'hello2',"Naoko"=>'hello3');
  foreach ($personal as $key=>$value){

      if(isset($personal['$key'])&& $personal['$key']=='$value') {
      echo $apersonal[$_GET['names']];
  } else {
      print "Error";

}}}?> 
```

感谢进步ssssssss

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T01:17:47.047

```
$.ajax({type:"POST",   
data:"names="+$("#tuser").val()+"&pass="+$("#password").val(),

if( isset($_POST['names']) && !is_empty($_POST['names']) ){
  $personal=array("Kaoru"=>'hello1',"Megumi"=>'hello2',"Naoko"=>'hello3');      

      if(isset($personal[$_POST['names']])&& $personal[ $_POST['names'] ] == $_POST['pass']) {
        echo "Logged IN";
      }else{
         echo "Wrong user or pass";
      }

  } else {
      print "Error";

} 
```

# java - 使用 Scala/Maven 创建可执行文件

> ID：12666400
> 
> 赞同：1
> 
> 时间：2012-10-01T00:51:16.520
> 
> 标签：java, scala, maven

我希望能够使用 Maven 创建一个用 Scala 编写的命令行实用程序。理想情况下，我希望能够编写一个 main 方法并有一些 Maven 目标，它将具有特定名称的可执行文件安装到 bin/ 目录中，以便它可以用作命令。

我对此的唯一经验是在 setup.py 中使用 Python 的“entry_points”，它将创建一个配置为调用特定函数的可执行 shell 脚本。

Maven提供这样的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T01:45:55.720

您可以使用[`appassembler-maven-plugin`](http://mojo.codehaus.org/appassembler/appassembler-maven-plugin/assemble-mojo.html)自动为您创建一个 bin 脚本。

或者，编写您自己的脚本并使用组装插件来指定如何组装您的程序。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-01T01:38:56.623

我不确定 maven 是否有类似的东西，但可以创建一个包含所有依赖项的 jar，以及类似的 bash 脚本

```
java -cp /path/to/myjar-with-deps.jar com.myjar.Main $@ 
```

# c - 在c中读取文件的第一行

> ID：12666402
> 
> 赞同：4
> 
> 时间：2012-10-01T00:51:56.357
> 
> 标签：c, pointers, structure

我对 C 语言非常陌生，我对 C 语言中最基本的想法感到困惑。我们正在开始构建结构，基本上我们正在处理的任务是读取一个分隔文件并将内容保存到一个结构中。文件的第一行包含条目数，我目前要做的就是让程序读取并保存该数字并将其打印出来。请不要假设我对 CI 有任何了解，但我对此真的很陌生。

这段代码给了我一个分段错误

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

struct info{
  char name[100];
  char number[12];
  char address[100];
  char city[20];
  char state[2];
  int zip;
};

int strucCount;
char fileText[1];

int main(char *file)
{
  FILE *fileStream = fopen(file, "r");
  fgets(fileText, 1, fileStream);

  printf("\n%s\n",fileText);

  fclose(fileStream);

} 
```

这是示例文件

```
4
mike|203-376-5555|7 Melba Ave|Milford|CT|06461
jake|203-555-5555|8 Melba Ave|Hartford|CT|65484
snake|203-555-5555|9 Melba Ave|Stamford|CT|06465
liquid|203-777-5555|2 Melba Ave|Barftown|CT|32154 
```

感谢大家的评论，他们帮助了很多，对吉姆感到抱歉。我工作的睡眠很少，并不是要冒犯任何人，我相信我们都去过那里哈哈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T01:06:20.753

建议：

```
 #include <stdio.h>
    #include <string.h>
    #include <stdlib.h>

    #define MAXLINE 80
    #define MAXRECORDS 10

    struct info{
      char name[100];
      char number[12];
      char address[100];
      char city[20];
      char state[2];
      int zip;
    };

    int 
    main(int argc, char *argv[])
    {
      FILE *fp = NULL;
      int nrecs = 0;
      char line[MAXLINE];
      struct info input_records[MAXRECORDS];

      /* Check for cmd arguments */
      if (argc != 2) {
        printf ("ERROR: you must specify file name!\n");
        return 1;

      /* Open file */
      fp = fopen(argv[1], "r");
      if (!fp) {
        perror ("File open error!\n");
        return 1;
      }

      /* Read file and parse text into your data records */
      while (!feof (fp)) {
        if (fgets(line, sizeof (line), fp) {
          printf("next line= %s\n", line);
          parse(line, input_records[nrecs]);
          nrecs++;
        }
      }

      /* Done */
      fclose (fp);
      return 0;
    }    
  fclose(fileStream);

} 
```

关键点：

*   注意使用“argc/argv[]”从命令行读取输入文件名

*   line、nrecs 等都是局部变量（不是全局变量）

*   检查错误情况，例如“未给出文件名”或“无法打开文件”

*   循环读取数据，直到输入文件结束

*   将从文本文件中读取的数据解析为二进制记录数组 (TBD)

# core-data - RestKit 删除语义

> ID：12666410
> 
> 赞同：1
> 
> 时间：2012-10-01T00:52:42.377
> 
> 标签：core-data, restkit

将 RestKit 与 Core Data 一起使用时，它的删除语义是什么？

例如，假设我`primaryKeyAttribute`在 RestKit 中为组织实体正确设置了一个。例如，如果我执行 GET 操作，`/organizations/`我会得到`/organizations/1/`、`/organizations/2/`和`/organizations/3/`返回的条目。假设我`/organizations/`稍后做一个 GET 并且只获取条目`/organizations/1/`和`/organizations/3/`返回。`/organizations/2/ 已在服务器上删除。

我希望 RestKit 删除我的核心数据记录`/organizations/2/`。这是 RestKit 所做的还是我必须实现此行为？如果我使用的是 reboot-networking-layer 分支，这是否会发生任何变化？RestKit 中是否有任何设置会影响此行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T06:44:38.970

您需要实现 FetchRequests 才能删除这些对象。这是一个简单的例子：

```
 [objectManager addFetchRequestBlock:^NSFetchRequest *(NSURL *URL) {
    RKPathMatcher *pathMatcher = [RKPathMatcher pathMatcherWithPattern:@"/organizations"];

    NSDictionary *argsDict = nil;
    BOOL match = [pathMatcher matchesPath:[URL relativePath] tokenizeQueryStrings:NO parsedArguments:&argsDict];

    if (match) {
        NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Organization"];
        return fetchRequest;
    }

    return nil;
}]; 
```

我在 ApplicationDelegate 中执行此操作（与我设置 RestKit 的位置相同）。在那里执行此操作后，所有其他调用将自动删除孤立对象。

# java - Java 中的空 CardList 对象

> ID：12666420
> 
> 赞同：0
> 
> 时间：2012-10-01T00:55:10.107
> 
> 标签：java

我现在有一个小问题。

目前我有两个班。一个叫 CardList，另一个叫 Trick。CardList 就像它听起来的样子，它是一个将自己声明为数组列表并在其中有多个方法的对象，其中一个是 add。Trick 应该是 CardList 并扩展 CardList 类。

```
private CardList aTrick;
private Suit trumpSuit;

public Trick(Bid pContract)
{   
    aTrick = new CardList();
    this.trumpSuit = pContract.getSuit();
} 
```

目前，每当我在 Trick 中使用 add 方法时，CardList 都是空的。

例如。

```
trick = new Trick(new Bid(7, Card.Suit.HEARTS));
trick.add(aJD); 
```

该列表仍然为空。任何帮助，将不胜感激。

add 方法在 CardList 类中。它所做的只是将卡片通常添加到arrayList。没什么特别的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T00:58:58.260

如果`Trick`假设要扩展`CardList`为什么你`CardList`在`Trick`类中有引用，这不是继承......

```
public class Trick extends CardList {
    // Implementation specific options here
} 
```

会“延长”`CardList`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T00:58:01.127

因为你的构造函数`Trick`使它为空

```
 aTrick = new CardList(); 
```

如果您想以这种方式使用它，您应该在其他地方初始化它。您还需要在`aTrick.add()`内部实施`trick.add(aJD)`

# python - 在python中将字符串对象转换为列表对象

> ID：12666421
> 
> 赞同：3
> 
> 时间：2012-10-01T00:55:11.220
> 
> 标签：python

假设我有一个类似的字符串`'banana'`，我想在 python 中将它转换为 list `['banana']`。我尝试`''.join(list('banana'))`了其他技巧，但我仍然回到原点！谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T00:56:46.770

为什么不`[mystring]`呢？它使用列表文字来创建一个只有`mystring`inside 值的列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T00:57:16.370

在 python shell 中尝试以下操作：

```
>>> lst = ["banana"]
>>> type(lst)
<type 'list'> 
```

然后，您可以附加一些其他水果：

```
>>> lst.append('cherry')
>>> print "\n".join(lst)
banana
cherry 
```

# ios - 如何根据用户输入在 iOS 中的特定坐标处显示图像？

> ID：12666423
> 
> 赞同：1
> 
> 时间：2012-10-01T00:56:24.917
> 
> 标签：ios, image, coordinates

在 Xcode 中，如何通过触摸我希望它出现的位置来使图像出现在 iPhone 屏幕上的某个位置？我目前尝试使用的方法是获取该点的坐标，然后尝试让 png 文件出现在该点。这是我到目前为止的代码：

```
- (void) touchesBegan:(NSSet *)touches
            withEvent:(UIEvent *)event {
    UITouch *theTouch = [touches anyObject];
    startPoint = [theTouch locationInView:self.view];
    CGFloat x = startPoint.x;
    CGFloat y = startPoint.y; 
```

但是现在我已经掌握了要点，我不确定如何让图像出现在那里，或者是否有更有效的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T03:45:53.850

您可以使用[`[-UIImage drawAtPoint:]`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:08:58.063

获取触摸事件的 x,y 坐标后，将 UIImageView 的中心点设置为它。

```
UIImageView *myImage = ...

CGPoint myPoint = CGPointMake(x_touch, y_touch);

[myImage setCenter:myPoint]; 
```

您还可以通过在图像视图上使用 animate 块来为这种更改设置动画，如下所示：

```
 nsTimerInterval myAnimationDuration = 1.0;
    [UIView animateWithDuration:myAnimationDuration animations:^{
        [myImage setCenter:myPoint];

    }
    completion:^(BOOL finished){
        //handle completion tasks

    }]; 
```

# android - 在 Eclipse Android SDK 管理器中找不到 Kindle Fire SDK

> ID：12666427
> 
> 赞同：3
> 
> 时间：2012-10-01T00:56:59.840
> 
> 标签：android, eclipse, sdk, kindle-fire

我正在逐步完成在 Eclipse 中安装 Kindle Fire 的 SDK。但在 Android SDK 管理器中，kindle Fire 并没有在任何地方列出。我已经更新了 IDE，所以我仍然不知道为什么它不存在。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T01:04:30.827

Google 不正式支持 Kindle Fire。但是，您可以将 Fire 连接到您的计算机并使用 2.3 SDK 在其上进行开发。但是，您将无法为其创建模拟器。

更新：没关系，显然他们现在提供了一个“附加”SDK。看看[这个页面](https://developer.amazon.com/sdk/fire/emulator-guide.html?ref_=pe_132830_25708000)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T05:16:08.077

[Kindle Fire 在Google 插件网站](https://dl-ssl.google.com/android/eclipse/)上不可用。

**但是您可以通过附加链接下载 SDK：**

**[http://kindle-sdk.s3.amazonaws.com/addon.xml](http://kindle-sdk.s3.amazonaws.com/addon.xml)**

欲了解更多信息，请关注：

[https://developer.amazon.com/sdk/fire/setup.html](https://developer.amazon.com/sdk/fire/setup.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-13T04:47:45.837

有一些简单的步骤需要遵循。

1.  在 Eclipse 中转到**Windows --> Android SDK** Manager 点击打开它。

2.  然后它将打开 sdk 管理器，然后在顶部的两个菜单中列出一个用于 **Packages**和另一个用于**Tools**。

3.  然后打开工具菜单点击**Manage Add-on Sites**。单击用户定义的站点选项卡，然后单击新建。

4.  在**Add Add-on Site URL**对话框中，输入以下 URL：[http://kindle-sdk.s3.amazonaws.com/addon.xml](http://kindle-sdk.s3.amazonaws.com/addon.xml)单击 OK，然后单击 Close。等待 Android SDK Manager 刷新。

5.  在 Android SDK Manager 窗口中，选择每个列出的包的最新版本。这显示了要安装的所有版本的kindle fire ...选择它。例如

    **安卓 4.0.3 API 15：**

    SDK平台

    **ARM EABI v7a 系统映像**（ARM 系统映像的模拟器先决条件）

    **Intel x86 Atom 系统映像**（x86 系统映像的模拟器先决条件）

    **Kindle Fire（第 2 代）**（用于模拟器的 ARM 和 x86 系统映像）

    **Kindle Fire HD 7"**（用于模拟器的 ARM 和 x86 系统映像）

    **Kindle Fire HD 8.9**（用于模拟器的 ARM 和 x86 系统映像）

    安装所有这些，然后关闭 Android Sdk Manager，然后重新启动 eclipse 。

    [下面的链接在这里](https://developer.amazon.com/sdk/fire/setup.html)解释得更清楚。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-15T22:14:20.710

亚马逊的一切都发生了变化。在撰写本文时，这是 Kindle SDK 安装指南：

[https://developer.amazon.com/public/resources/development-tools/ide-tools/tech-docs/01-setting-up-your-development-environment](https://developer.amazon.com/public/resources/development-tools/ide-tools/tech-docs/01-setting-up-your-development-environment)

特别要注意的是，用于通过 SDK 工具安装 Fire SDK AddOn 的 URL 现在是： [https ://s3.amazonaws.com/android-sdk-manager/redist/addon.xml](https://s3.amazonaws.com/android-sdk-manager/redist/addon.xml)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-23T06:06:33.603

亚马逊删除了对 eclipse 的模拟器支持，请查看以下线程以获取更多信息[点击这里](http://forums.developer.amazon.com/forums/thread.jspa?threadID=479)

[你可以按照这个](http://developer.amazon.com/public/solutions/devices/fire-phone/docs/using-the-api-simulator-tool)来测试一些fire phone的api

# asp.net-membership - 将 AspNetSqlMembershipProvider 用户迁移到 WebMatrix

> ID：12666428
> 
> 赞同：3
> 
> 时间：2012-10-01T00:57:00.417
> 
> 标签：asp.net-membership, webmatrix-2

我正在寻找一种工具可以将我的用户从`AspNetSqlMembershipProvider`用户迁移到 `WebMatrix.WebData.WebSecurity`. 我想在 Azure 上托管我的网站，但在使用 AspNet 存储过程时遇到了很多麻烦。

将数据从一个表导出到另一个表似乎很容易，但不使用密码。我怎样才能完成这项任务 它必须对我的最终用户透明。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-08T11:02:11.557

如果密码是唯一的障碍，请不要担心。事实上，我们不能也不需要知道密码本身。在大多数系统中，密码被编码并保存在一个表中。在 asp.net mvc4 SimpleMembershipProvider 中，该表称为 pages_membership。在此表中，2 列是键：Password 和 PasswordSalt。我对 AspNetSqlMembershipProvider 一无所知，但我认为必须有一个对应的表，其中包含具有相似名称的 2 列。迁移这 2 列中的数据应该可以正常工作。

我建议这样做：

1.  在旧系统中使用密码创建一个新帐户。
2.  在新系统中使用不同的密码创建一个新帐户。
3.  用旧系统中的密码覆盖新系统中的密码/密码盐。
4.  尝试使用旧系统的密码登录新系统。
5.  如果成功，则证明这两个系统使用的是相同的机制，您可以完成整个迁移工作。

详细算法可以在这里找到：[http ://www.jasypt.org/howtoencryptuserpasswords.html](http://www.jasypt.org/howtoencryptuserpasswords.html)

# css - CSS 显示：表格单元格失去边距属性

> ID：12666435
> 
> 赞同：3
> 
> 时间：2012-10-01T00:58:16.270
> 
> 标签：css

我有一个完美运行的 CSS 类：

```
.img_holder { width:126px; height:126px; border:1px solid #ccc; overflow:hidden; margin:12px; } 
```

但是，当我尝试通过添加 display:table-cell 和 vertical-align 属性使图像在 div 中居中时，边距停止工作并且 div 位于其父级的左上角......这是已知的效果吗？

保证金失败的新班级：

```
.img_holder { width:126px; height:126px; border:1px solid #ccc; overflow:hidden; margin:12px; display:table-cell; vertical-align:middle; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-16T18:28:57.843

要获得您可能想要使用的单元格之间的间距`border-spacing:20px;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T01:07:14.627

表格单元格不能有边距。

# json - 将 JSON 子数组项拉入 Backbone 中的模板

> ID：12666440
> 
> 赞同：1
> 
> 时间：2012-10-01T00:59:12.743
> 
> 标签：json, backbone.js

来自整个 Backbone 新手的问题：

我想从 JSON 子数组中提取项目并将它们放在模板上的特定位置。我不确定如何针对这些特定项目。

子数组在下面的代码中表示：它是两个名为 images 的数组：

```
(function () {

//JSON object containing gallery content
var galleries = [
{ name: 'Renovations', images: [
    '../img/Galleries/01/pic01.jpg',
    '../img/Galleries/01/pic02.jpg'
    ]
},
{ name: 'Kitchens', images: [
    '../img/Galleries/01/pic03.jpg',
    '../img/Galleries/01/pic04.jpg'
    ]
}
];

//Gallery Class...this is a Backbone Model
var Gallery = Backbone.Model.extend({
 initialize: function(){
    console.log('this gallery is up and running');
}
});

//A collection...also a class & the 'C' in MVC in this case
var SingleGallery = Backbone.Collection.extend({
model: Gallery,
parse: function(response){
   return response.items;
   console.log(response.items);
}
});

//A view...also a class
var GalleryGroup = Backbone.View.extend({
tagName: 'article',
className: 'contact-container',
template: $('#galleryTemplate').html(),
render: function () {
    var tmpl = _.template(this.template);
    this.$el.html(tmpl(this.model.toJSON()));
    return this;
}
});

//Another view...also a class
    var GalleryView = Backbone.View.extend({
el: document.getElementById('container'),
initialize: function () {
    this.collection = new SingleGallery(galleries);
    this.render();
},
render: function () {
    var that = this;
        _.each(this.collection.models, function (item) {
        that.renderGallery(item);
    }, this);
},
renderGallery: function (item) {
    var galleryView = new GalleryGroup({
        model: item
    });
    this.$el.append(galleryView.render().el);
}
});

var gal1 = new GalleryView();

} ()); 
```

到目前为止，我的模板看起来像这样：

```
<script id="galleryTemplate" type="text/template">
<p><h1><%= name %></h1>
<div><img src='<%= images %>' /></div></p>
</script> 
```

如果我只有一个图像要加载到 <%= images %> 部分，这将很容易，但我想构造一个格式良好的 JSON 对象并能够在两个“图像”数组中找到每个单独的项目。我想认为 fetch() 是要走的路，但我不确定......有什么想法吗？

提前致谢。是

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T01:06:33.550

您可以使用下划线的[`each`](http://underscorejs.org/#each)方法沿这些行遍历`images`数组：

```
<% _.each(images, function (image) { %>
  <div><img src='<%= image %>' /></div>
<% }); %> 
```

# android - 检查 Android 模拟器状态

> ID：12666441
> 
> 赞同：0
> 
> 时间：2012-10-01T00:59:37.593
> 
> 标签：android, android-emulator, avd, android-sdk-2.3

我使用如下命令创建了我的 android 虚拟设备：

```
android create avd --target 1 --name emu --abi x86 
```

然后我尝试运行模拟器：

```
emulator -avd emu & 
```

在模拟器启动期间，我试图发出如下命令：

```
adb shell 
```

但我有一个错误：

```
error: device offline 
```

当我发出命令时：

```
echo $? 
```

在模拟器启动之前，我一直输出“1”。是否有可能使用终端命令检查当前模拟器状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:54:46.507

您可以使用另一个终端窗口并键入 adb logcat commnad。

# iphone - 关于如何设置故事板以使元素不重叠的建议

> ID：12666446
> 
> 赞同：0
> 
> 时间：2012-10-01T01:00:22.677
> 
> 标签：iphone, objective-c, ios, ios5, uiimage

尽管阅读了诸如[Windows 和 Views 指南](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/WindowsandViews/WindowsandViews.html#//apple_ref/doc/uid/TP40009503-CH2-SW1)之类的 Apple 文档，但我仍试图弄清楚这一点。

此屏幕截图最能说明我的问题：

![在此处输入图像描述](../Images/4d6eae39fa7c347bd8f9e27efc388f0c.png)

如您所见，博客文章有一张高度可变的图片（但固定宽度 = 320px），它可能会或可能不会与其下方的视图元素重叠，这是一个标签。

与 CSS 类似，我需要 UIImageView 为“display:block”，以及标签。

因此，如果图像占据或多或少的垂直空间，下面的元素会相应地调整其位置。这只是以编程方式完成的吗？

我试图通过将每个视图放在单独的视图中来分层执行此操作，但无济于事。“剪辑子视图”未勾选。

非常感谢任何有关完成此操作的一般程序的建议或相关材料的链接。

* * *

控制器代码（postTextLabel 和 postPicture 是连接的 IBOutlets）

```
#import "DetailViewController.h"

@interface DetailViewController ()

- (void)configureView;

@end

@implementation DetailViewController;

@synthesize scroller;

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self configureView];

        CGRect label_frame = CGRectMake(postTextLabel.frame.origin.x,
                                        postPicture.frame.origin.y + postPicture.frame.size.height,
                                        postTextLabel.frame.size.width,
                                        postTextLabel.frame.size.height);

        postTextLabel.frame = label_frame;

}

- (void)configureView
{
    if (self.detailItem) {
        NSDictionary *post           = self.detailItem;
        NSString     *postText       = [post objectForKey:@"post_text"];
        NSString     *postAuthorName = [post objectForKey:@"post_author_name"];

        postTextLabel.numberOfLines = 0;
        postTextLabel.text       = postText;
        postAuthorNameLabel.text = postAuthorName;

        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            NSString *pictureUrl = [post objectForKey:@"post_picture"];
            NSData   *data       = [NSData dataWithContentsOfURL:[NSURL URLWithString:pictureUrl]];

            dispatch_async(dispatch_get_main_queue(), ^{
                postPicture.image = [UIImage imageWithData:data];
            });
        });
    }
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}
@end 
```

![在此处输入图像描述](../Images/e5b09e85d972d19c4cbb97420610e617.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T02:44:58.957

假设您的目标只是让标签贴在图像的底部，那么编程是您最好的方法 - 我认为在 Interface Builder 中没有办法做到这一点。如果您将图像和标签分别设置为名为`image`和的 IBOutlets `label`，则如下代码应该可以满足您的目标：

```
CGRect label_frame = CGRectMake(label.frame.origin.x, image.frame.origin.y + image.frame.size.height, label.frame.size.width, label.frame.size.height);
label.frame = label_frame; 
```

每当图像更改并且文本应位于其下方时调用此方法，标签的顶部边缘与图像的底部对齐。`contentSize`请记住，如果图像/文本变大，您可能需要更改滚动视图以匹配。

# javascript - 为什么 (0 || eval) 在 Opera 中不被视为间接？

> ID：12666447
> 
> 赞同：1
> 
> 时间：2012-10-01T01:00:23.803
> 
> 标签：javascript, eval, opera, strict-mode

在严格模式下，间接调用`eval`应该`this`绑定到 eval 代码中的全局对象。

> 10.4.2：在第 5 版中，对 eval 函数的间接调用使用全局环境作为 eval 代码的变量环境和词法环境。在第 3 版中，间接评估的调用者的变量和词法环境被用作评估代码的环境。

然而，在 Opera 中，这个表达式的结果是`undefined`：

```
(function(){'use strict'; return (0 || eval)('this'); }()) 
```

Chrome 和 Firefox 按预期工作。

我在这里找到了这个：http: [//kangax.github.com/jstests/indirect-eval-testsuite/](http://kangax.github.com/jstests/indirect-eval-testsuite/)

这是浏览器错误吗？如果是这样，它是否正在被跟踪？

另请参阅[为什么某些形式的间接评估在 Opera 和 Safari 中会失败？](https://stackoverflow.com/questions/12666272/why-do-some-forms-of-indirect-eval-fail-in-opera-and-safari)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:12:14.583

Opera 的 ECMAScript 引擎似乎在这里进行了一些过度优化，其中“(0||eval)”在编译之前被简化为“eval”。在这种情况下，这种优化引入了一个错误，因为它改变了代码的行为。

（在 Opera 内部，我们将此问题跟踪为 CORE-47727）

# android - 有人可以以非常详细但易于理解的方式向我解释 SharedPreferences 在 Android 中的工作原理吗？

> ID：12666452
> 
> 赞同：3
> 
> 时间：2012-10-01T01:01:29.447
> 
> 标签：android, login, sharedpreferences

我是 Android 开发的新手，现在我真的很想学习共享首选项。我用谷歌搜索了很多次，但我认为我并没有完全掌握它。

我相信此共享首选项将帮助我在登录屏幕活动中存储用户名和密码。谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-01T02:07:38.227

我制作了一些关于此的视频作为工作试镜。他们帮助我得到了这份工作，而且他们仍然可以在 Vimeo 上找到，所以希望他们能帮助你。

第 1 部分：[保存数据](http://vimeo.com/38073839)

第 2 部分：[检索数据](http://vimeo.com/38080004)

此外，为了它的价值，请小心将用户名和密码存储在 SharedPreferences 中。您可以在那里进行操作，但请阅读其他 SO 问题中的风险：[What is the most appropriate way to store user settings in Android application](https://stackoverflow.com/questions/785973/what-is-the-most-appropriate-way-to-store-user-settings-in-android-application)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T01:45:58.670

对于 android，主要有三种基本的数据持久化方式：

*   共享偏好以保存小块数据
*   传统文件系统
*   通过支持 SQLite 数据库的关系数据库管理系统

SharedPreferences 对象可帮助您将简单的应用程序数据保存为名称/值对 - 您为要保存的数据指定一个名称，然后它和它的值都将自动为您保存到 XML 文件中。要将数据保存在 sharedPreferences 文件中：

1.  获取 sharedPreferences 文件的实例： SharedPreferences appPrefs = getSharedPreferences( or fileName, MODE_PRIVATE);

2.  创建 SharedPreferences.Editor 对象

3.  例如，要将 String 值放入 SharedPreferences 对象，请使用 putString() 方法。

4.  要将更改保存到首选项文件，请使用 commit() 方法

看起来像这样：

```
// obtain an instance of the SharedPreferences class
preferences = getSharedPreferences(prefFileName, MODE_PRIVATE);
editor = preferences.edit();

// save username String
editor.putString("username", student).commit(); 
```

要检索它，请使用 getString() 方法：

```
preferences.getString(username, null) where null is a default value that will be returned if username key is not found in the file. 
```

# c++ - 多重继承问题

> ID：12666453
> 
> 赞同：0
> 
> 时间：2012-10-01T01:01:32.530
> 
> 标签：c++, oop

我正在尝试为游戏框架提出一个抽象，一种方法是创建，例如，图形和音频类，这些是游戏使用的接口，并且您为目标平台派生特定实现（桌面/移动/控制台）。

我在这里有一些想法的示例代码：

```
#include <iostream>
#include <string>

using namespace std;

struct Graphics
{
    virtual ~Graphics() {}
    virtual void Rect() {}
};

struct Text
{
    virtual ~Text() {}
    virtual void Print(string s) {}
};

struct IosGraphics : public Graphics
{
    void Rect() { cout << "[]"; }
};

struct IosText : public Text
{
    void Print(string s) { cout << s << endl; }
};

struct Output : public Graphics, public Text
{
};

struct IosOutput : public Output, public IosGraphics, public IosText
{
};

int main() 
{ 
    Output * output = new IosOutput();
    output->Rect(); // this calling Graphics::Rect not IosGraphics::Rect
    output->Print("Hello World!"); // this calling Text::Print not IosText::Print
    cin.get();
} 
```

问题是输出使用的是 Text::Print 而不是 IosText::Print，我想知道这是否与菱形问题有关，我可能不得不使用虚拟继承或其他东西。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T01:09:05.693

一般来说，不惜一切代价避免多重实现继承。在您的情况下，其中`IosOutput`有两个副本`Graphics`，`Text`这是导致问题的原因。

然而，最好的解决方案是根本不使用继承，而是使用成员资格——`IosOutput`具有 and 类型的成员`IosGraphics`，`IosText`并且这些成员可以合法地从更抽象的`Graphics`and继承`Text`。

另外，考虑接口——只有纯虚方法的类作为替代解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T01:18:45.397

“钻石问题”不是问题，它是不了解虚拟继承和非虚拟继承之间区别的症状。在上面的代码中，该类`Output`有两个 type 的基类`Graphics`，一个 from`Output`和一个 from `IosGraphics`。它还有两个类型的基类`Text`，一个 from`Output`和一个 from `IosText`。所以在它的基类中`output->Print("Hello, World!)`调用了实现`Print()`，也就是说，它调用了`Text::Print()`. 它对`IosGraphics::Print()`.

如果您更改`IosGraphics`为拥有`Graphics`作为**虚拟**基地，并更改`IosText`为拥有`Text`作为**虚拟**基地，并更改`Output`为拥有`Graphics`和`Text`作为**虚拟**基地，那么由于**优势**规则，事情会按照您的意愿行事。`Output`不会覆盖`Rect()`但`IosGraphics`会覆盖，因此虚拟调用`Output->Rect()`go to`IosGraphics::Rect()`和类似 for `Text::Print()`。

我知道，这听起来很神奇。这个规则有点奇怪，但它确实有效。尝试一下。

# ruby-on-rails - 显示包含要回答的问题列表的表单

> ID：12666458
> 
> 赞同：0
> 
> 时间：2012-10-01T01:02:16.933
> 
> 标签：ruby-on-rails, haml

我有一个包含预定义问题的集合和一个应该回答所有这些问题的用户。所以视图应该是这样的：

```
= form_for @user do |f|
  -#some code and then...
    %table.table
      - @questions.each do |q|
        %tr
          %td=q.name
          %td
            %input-# Here the answer of the user for the question 'q' 
```

所以视图也应该显示每个用户对每个问题的回答。我的问题是，首先不应该有任何答案，所以我不能使用类似的东西：

```
= form_for @user do |f|
  -#some code and then...
    %table.table
      - @user.answers.each do |answer|
        = f.fields_for :answers, answer do |a|
          %tr
            %td= answer.question.name
            %td=a.number_field :result 
```

在这种情况下，不会有任何答案，所以什么都不会显示。即使有答案，我也必须向用户展示所有问题。我可以用空值预先初始化答案，但我不想有一堆只有空值的记录（这些问题中的大多数可能永远不会被用户回答）。另一件事是问题有顺序，我不知道如何用`@user.answers.each`循环排序（是的，我可以修改查询，所以它可以排序，但我会为某事调整太多......简单的？）。一般来说，主循环应该是`@questions.each`而不是`@user.answers.each`。

我一直在想一些讨厌的方法来做到这一点，比如手动创建字段，几个 if/else 条件，但我希望 rails 有一个干净的方法来做到这一点。以前有人遇到过这样的问题吗？除了使用自定义助手创建所有这些之外，没有其他方法可以做到这一点？提前致谢

**更新**

最后，感谢@saverio 的回答，我将其保留如下：

```
%table.table
  - @questions.each_with_index do |q, i|
    %tr
      %td= q.name
      %td
        - answer = @user.answers.detect{|a| a.question.try(:id) == q.id}
        = number_field_tag "user[answers_attributes][#{i}][result]", (answer && answer.result)
        = hidden_field_tag "user[answers_attributes][#{i}][id]", (answer && answer.id)
        = hidden_field_tag "user[answers_attributes][#{i}][question_id]", q.id 
```

在控制器中，下一行足以清除所有空值：

```
params[:user][:answers_attributes].delete_if{|k,v| v[:result].blank? && v[:id].blank?} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T01:22:33.697

循环@questions，并在每一步显示相应答案的字段。如果已提供答案，请将其显示为预加载文本

```
= form_for @user do |f|
  -#some code and then...
    %table.table
      - @questions.each do |q|
        - answer = @user.answers.detect {|a| a.question.name == q}
        %tr
          %td= q.name
          %td= text_field_tag "user[answers][#{q.id}]", (answer && answer.text) 
```

在控制器中，您必须解析`params[:user][:answers]`，这将是从问题 ID 到提供的答案的哈希值。

# jira - JIRA REST API 问题转换和工作日志 (v4.4.1)

> ID：12666459
> 
> 赞同：1
> 
> 时间：2012-10-01T01:02:30.397
> 
> 标签：jira

是否可以通过 JIRA 的 REST API（API 版本是 JIRA v4.4.1 的 2.0.alpha1）进行转换（即 POST 到 /rest/api/latest/issue/{issueid}/transitions）时更新问题的工作日志? 我正在发布`worklog`作为请求的一部分并寻找我需要发送的最少信息（目前只是`minutesSpent`和`started`时间，因为这些似乎是通过 UI 的唯一强制性信息）。

IE

```
worklog:
{
    name: "worklog",
    type: "worklog",
    value: [
    {
        started: "2012-10-01T10:28:00.000+1000",
        minutesSpent: 480
    }
    ]
}, 
```

目前，该 URL 的帖子似乎只是忽略了这些附加数据，尽管转换确实以所需的 204 响应生效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:24:37.597

来自[JIRA REST API 文档](http://docs.atlassian.com/jira/REST/latest/#id251752)：

**可以使用/rest/api/2/issue/{issueIdOrKey}/transitions?expand=transitions.fields**资源来确定可以在转换时设置的字段，无论是 fields 参数还是 update 参数。如果某个字段未配置为出现在转场屏幕上，则该字段不会出现在转场元数据中，如果提交，则会出现字段验证错误。

如果在您从扩展中获得的响应中，您没有看到工作日志，那么我认为这是不可能的。

# c# - 如何在某些情况下使用不同的基类构造函数？

> ID：12666460
> 
> 赞同：1
> 
> 时间：2012-10-01T01:02:56.177
> 
> 标签：c#, inheritance

说，我们有两个类：

```
public class A
{
    protected static readonly int DefaultValue = 123;

    int value;

    public A()
    {
        value = DefaultValue;
    }

    public A(int _value)
    {
        value = _value;
    }
}

public class B : A
{
    public B(XElement x)
        : base(x.Element("int") == null 
                  ? A.DefaultValue 
                  : (int)x.Element("int"))
    {
    }
} 
```

我知道我可以为 B 类创建一个无参数构造函数::

```
public B():base()
{
} 
```

并有这样的东西：

```
B objB = (x.Element("int") == null)?new B():new B((int)x.Element("int")); 
```

但我希望将这个逻辑封装在 B 类中。

我还看到我可以做某种静态工厂方法并将其封装（`private`如果需要，甚至可以制作那些 B 类构造函数）：

```
public static B GetInstance(XElement x)
{
    return (x.Element("int") == null)?new B():new B((int)x.Element("int"));
} 
```

但我希望能够拥有像下面的伪代码这样的东西：

```
public class A
{
    //don't need this anymore 
    //protected static readonly int DefaultValue = 123;

    int value;

    public A()
    {
        value = 123;
    }

    public A(int _value)
    {
        value = _value;
    }
}

public class B : A
{
    public B(XElement x)
        : x.Element("int") == null
              ? base()
              : base((int)x.Element("int"))
    {
    }
} 
```

或者有没有其他方法可以做同样的事情，甚至更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T01:07:54.547

可以更改使用的基本构造函数的*唯一*条件是调用的实际构造函数 - 找到解决问题的另一种方法:)

如前所述，工厂方法是一种方法。此外，我相信[Ninject](http://www.ninject.org/)（可能还有其他 DI 框架）允许根据参数*值*动态选择不同的构造函数。可悲的是，我没有足够的 DI 经验..

在这种情况下，另一种可能性是采用`int?`它，虽然它确实改变了接口，但`null`可以很容易地合并到默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:42:32.917

您是否尝试过在 A 类构造函数中使用 null int (int?)？使用可选参数，您可能可以使用一个构造函数。

# sql - 多个语句之间

> ID：12666461
> 
> 赞同：10
> 
> 时间：2012-10-01T01:02:58.730
> 
> 标签：sql, sum, between

我是一名学生开发人员，目前正在学习 SQL 课程。我目前正在尝试从表中检索几组行的总和。我对 SQL 开发非常陌生，我不太确定以下场景中的问题是什么。我有一个大表，我想从中选择特定行，然后添加余额列。

以下不会在结果中显示任何数据，我不太清楚为什么。我有一种预感，每个表之间只能使用一次 between 语句，但也许我错了？

```
Select Description, SUM(Balance) AS Total_Balance
FROM Chart_Of_Accounts
WHERE (Account BETWEEN ('400401') AND ('400407')) 
AND (Account BETWEEN ('440094') AND ('440100')) 
AND (Account BETWEEN ('450094') AND ('450100'))
GROUP BY Description, Balance 
```

***编辑 10.1.2012 应***(Richard aka cyberkiwi) 的要求

**是）我有的**

```
Set 1
|Account        |Description         |Balance
|4004xx         |Red Wine            |$2361.23
|4004xx         |White Wine          |$3620.23
|4004xx         |Rice Wine           |$1223.23

Set 2
|Account        |Description         |Balance
|4400xx         |Red Wine            |$4361.23
|4400xx         |White Wine          |$3260.23
|4400xx         |Rice Wine           |$223.23

Set 3
|Account        |Description         |Balance
|4500xx         |Red Wine            |$1361.23
|4500xx         |White Wine          |$1620.23
|4500xx         |Rice Wine           |$1223.23 
```

**我正在努力实现的结果**

```
Total
|Description         |Total_Balance
|Red Wine            |$8083.69
|White Wine          |$8500.69
|Rice Wine           |$2669.69 
```

感谢您阅读我的帖子！我也愿意接受任何关于 SQL 开发的建议，非常感谢任何反馈。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-01T01:06:56.390

使用 OR 而不是 AND！
你的意思是，给我在 A 和 B`or`之间、在 C 和 D 之间等的结果。

```
 SELECT Description, SUM(Balance) AS Total_Balance
    FROM Chart_Of_Accounts
   WHERE (Account BETWEEN '400401' AND '400407') 
      OR (Account BETWEEN '440094' AND '440100') 
      OR (Account BETWEEN '450094' AND '450100')
GROUP BY Description 
```

我删除了无关的括号，但您甚至可以删除剩余的括号，因为 OR 是在 AND 之后处理的。请参阅：[SQL Server 运算符优先级](http://msdn.microsoft.com/en-us/library/ms190276.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T01:16:45.427

如果你的名字以 W 开头，你的字母可以介于 AD**和**FM**和**UZ 之间吗？当然不是。

但是，它可以在 AD**或**FM**或**UZ 之间。

同样的事情也适用于帐号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-29T23:35:25.390

我认为你的部分问题（除了在应该是 OR 的地方使用 AND 之外，正如 RichardTheKiwi 如此亲切地指出的那样）是你同时按描述和平衡进行分组。您应该只按描述分组，因为您正在尝试对每个描述的余额求和。如果您对 Balance 的每个唯一值以及每个唯一 Balance 的其他字段上的聚合函数（SUM()、AVG()、STDEV()...）感兴趣，您可以按余额分组。

# javascript - 改变“内在内容”的最佳方式

> ID：12666464
> 
> 赞同：1
> 
> 时间：2012-10-01T01:04:05.237
> 
> 标签：javascript, jquery, twitter-bootstrap

所以我有![这](../Images/f10eec5fe54239c0b1b738af92b1d0a5.png)这个布局，我计划使用 javascript/jquery 来更改下框中的内容，具体取决于上方的活动链接。

在我选择如何执行此操作之前，我想了解一下最佳实践是什么。在使用 javascript 更改 html 内容时，我是新手。特别是如果您想以最节省资源的方式进行操作。

下部框中的布局将彼此不同。那么每个lowerbox布局必须从一开始就存在于html中？并且每个布局都应该包含在一个 div 元素中，以便以最简单的方式更改整个块。我在这里思考正确吗？

我应该使用哪些 jQuery 函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T01:11:45.363

我最近一直在做类似的事情。我的建议是使用 jQuery UI 的标签功能。页面上的每个部分都是一个单独的 DIV 标记，您可以根据需要隐藏和显示。这将导致整个页面在您按下按钮后立即加载并可用。

转到此处阅读有关 jQuery UI 选项卡的更多信息：http: [//jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T01:18:33.077

## *[jsBin 演示](http://jsbin.com/ofahib/3/edit)*

将所有 DIV *.page*包装在一个公共容器中`#pages`：

```
<ul id="navigation">
   <li>Link 1</li>
   <li>Link 2</li>
   <li>Link 3</li>
   <li>Link 4</li>
   <li>Link 5</li>
</ul>
<div id="pages">
   <div class="page">Page 1</div>
   <div class="page">Page 2</div>
   <div class="page">Page 3</div>
   <div class="page">Page 4</div>
   <div class="page">Page 5</div>
</div> 
```

不仅仅是检索单击导航的索引并`.page`使用相同的索引使其可见：

```
jQuery(function($){

   $('.page:gt(0)').hide(); // hide all pages but first

   $('ul#navigation li').click(function(){
      var liIndex = $(this).index();
      $('.page').hide().eq(liIndex).show(); // hide all and show matching page!
   });

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T01:10:44.170

如果它们必须都在原始 HMTL 页面中，那么只需将每个内容块放在它自己的 div 中，每个内容块都有自己的 id 值，每个都有一个共同的类名，默认情况下通过 CSS 将它们全部隐藏`display: none`，然后使用 javascript根据点击显示所需的内容集。每次单击时，您都可以隐藏所有这些并显示您要显示的那个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T01:31:49.910

Bootstrap 本身具有[标签支持](http://twitter.github.com/bootstrap/javascript.html#tabs)，您只需要克服此类组件的包含 CSS 样式即可保留您的样式。

# recursion - 教义中的递归函数

> ID：12666465
> 
> 赞同：0
> 
> 时间：2012-10-01T01:04:08.610
> 
> 标签：recursion, doctrine-orm

我有一个这样的实体：

```
Person
  - id_person
  - name
  - child //self refering 
```

如果我在递归函数中查询人员实体，它只会返回前三个级别。你知道如何告诉教义我想深入到需要的层次吗？

## 编辑

**出了什么问题？**
使用`$queryBuilder->getquery()->getResult(Query::HIDRATE_ARRAY);`不是制作递归函数的最佳方式，它应该使用默认的水合。

**我如何解决它？**正如@Andreas Linden 所说，
使用并调用 getter：`$queryBuilder->getquery()->getResult();``$parent->getChild()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:28:31.940

当您从模型 8 中访问它们时，所有关联都将被延迟加载，如果您没有将其定义为不同的行为）。所以总是使用`getChild()`简单的getter方法`return $this->child;`

您还可以根据需要左连接任意多个级别，这样您就不会生成数千个查询（每个子查询一个查询）

```
$query = $entityManager->createQueryBuilder()
    ->select('p1, p2, p3, p4, p5, p6')
    ->from('Entity\Person', 'p1')
    ->leftJoin('p1.child', 'p2')
    ->leftJoin('p2.child', 'p3')
    ->leftJoin('p3.child', 'p4')
    ->leftJoin('p4.child', 'p5')
    ->leftJoin('p5.child', 'p6')
    ->createQuery(); 
```

# php - 如何将 PHPUnit 与我的代码捆绑在一起？

> ID：12666479
> 
> 赞同：5
> 
> 时间：2012-10-01T01:06:53.627
> 
> 标签：php, unit-testing, phpunit

我想：

*   无论我的环境如何（以及是否安装了 PHPUnit 或 PEAR），都使用 PHPUnit 运行测试
*   如果可能，在屏幕上显示测试结果

我怎样才能做到这一点？我尝试在[这里](http://pear.phpunit.de/)下载代码并包括在内`Autoload.php`，但它仍然有一些依赖项。也许有一些比尝试将它与我的代码捆绑在一起更好的方法......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:56:03.893

要将 PHPUnit 包含在您的项目源文件中，我建议您遵循指南：

[**`Using PHPUnit From a Git Checkout`**](https://github.com/sebastianbergmann/phpunit/blob/master/CONTRIBUTING.md)来自 PHPUnit 贡献部分。

它告诉您需要安装的所有包，并显示您为 phpunit 可执行文件构建运行器/包装器脚本。

```
#!/bin/bash
php -d include_path='.:../phpunit/:../dbunit/:../php-code-coverage/:../php-file-iterator/:../php-invoker/:../php-text-template/:../php-timer:../php-token-stream:../phpunit-mock-objects/:../phpunit-selenium/:../phpunit-story/:/usr/local/lib/php' ../phpunit/phpunit.php $* 
```

您可以根据需要调整路径，或者如果您想将其包装在另一个脚本中，您也可以通过编程方式使用 phpunit

```
require '/path/to/phpunit/PHPUnit/Autoload.php';
PHPUnit_TextUI_Command::main(); 
```

这假设您有一个`phpunit.xml.dist`文件，或者您在调用包装脚本时使用了正确的 cli 参数。

* * *

您还可以使用 pear 包并解压所有稳定版本，而不是使用 git checkout 来节省一些磁盘和 repo 空间。包装脚本和所有包含路径的工作是相同的 :)

* * *

相关的SO问题：

[PHP - 是否有 PHPUnit 的可移植版本？](https://stackoverflow.com/questions/4801183/php-is-there-a-portable-version-of-phpunit)

[PHPUNIT 无需安装](https://stackoverflow.com/questions/7628573/phpunit-without-installation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T01:26:30.577

依赖项将取决于您使用的附加组件，PHPUnit 本身应该是自包含的。由于 PHP 没有特别一致的包管理解决方案（并且除了轮子改造之外，您已经消除了最可行的选项），您最好的选择是将文件包含在*与应用程序代码分开*的源代码树中。从您的 APPLICATION_ROOT 或类似目录创建一个名为“test”的同级目录，并且该目录具有一个充满 PHPUnit 的“lib”或类似目录以及您需要的任何依赖项，这可能是一个不错的计划。从测试目录到主应用程序源不应该有重叠和单向依赖。

我假设您正在寻找一个运行状况检查自动化测试页面，因此您可以创建包含该测试目录所需内容的单个页面。理想情况下，如果您有暴露静态资源的 web 目录，您可以拥有负责加载应用程序前端控制器的 PHP 文件，方法是从文档根目录外部包含应用程序文件夹，然后再加载第二个文件测试套件。这将允许您的应用程序目录继续专注于应用程序代码本身、存放测试代码的测试目录，然后是负责加载代码库的 2 个小包含文件（带有任何类型的共享常量定义等）。也提取并保持干燥）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T12:03:49.877

PHP 有一个一致的包管理解决方案 - [http://getComposer.org](http://getComposer.org)。它现在还可以以通常的作曲家风格安装 PHPunit，[http ://packagist.org/packages/phpunit/phpunit](http://packagist.org/packages/phpunit/phpunit)

安装软件后，它会将 phpunit 命令行脚本放入本地的 'bin/' 目录中，因此您可以调用它，但您可能希望有一个 shell 脚本来设置它将使用的配置文件。

通常的设置是一个 tests/ 子目录，其中包含运行实际测试的 PHPunit 扩展类的层次结构。

# javascript - Javascript 切换 + 动画问题

> ID：12666481
> 
> 赞同：0
> 
> 时间：2012-10-01T01:07:11.067
> 
> 标签：javascript, jquery-animate, toggle

我在使用 javascript 动画时遇到问题。我有一个 div 切换以显示表单，另一个 div 在表单滑入时向左移动。当表单切换为隐藏时，我试图让 div 向右移动。

我在 JSFiddle 上找到了它。关于为什么它不起作用的任何想法？

[http://jsfiddle.net/KWSvy/](http://jsfiddle.net/KWSvy/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T03:22:21.317

您正在使用分配而不是比较。这是错误的：

```
if(direction = 'left')
if(direction = 'right') 
```

它应该是：

```
if(direction == 'left')
if(direction == 'right') 
```

还应初始化方向：

```
var direction = 'left'; 
```

为了将元素移回其原始位置，您应该将边距设置为 0 而不是 +160。

[http://jsfiddle.net/KWSvy/6/](http://jsfiddle.net/KWSvy/6/)

# xcode - Xcode 4在哪里隐藏开发中应用程序的首选项plist文件

> ID：12666483
> 
> 赞同：0
> 
> 时间：2012-10-01T01:07:36.113
> 
> 标签：xcode, cocoa, plist, osx-mountain-lion

我正在构建一个 OSX 应用程序，目前正在将首选项窗格放在一起。我需要验证是否正确创建了一些用户默认设置，但是在“构建和运行”期间，我不断看到我通过应用程序完成的首选项的更改。在以前的版本中，这个 plist 文件将位于 ~/Library/Preferences/[bundle identifier].plist，但在这种情况下，不存在这样的文件，但对首选项的更改肯定会在启动之间持续存在，因此它们必须得到存放在某处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T01:32:09.347

如果它是沙盒应用程序，您的文件将位于 ~/Library/Containers/[bundle identifier]

# .net - 在 Windows 8 启动时在“开始”屏幕顶部启动应用程序

> ID：12666485
> 
> 赞同：1
> 
> 时间：2012-10-01T01:08:04.983
> 
> 标签：.net, windows-8, kiosk

我有一个很像信息亭应用程序的应用程序，需要它直接从启动加载到全屏。我使用“SOFTWARE\Microsoft\Windows\CurrentVersion\Run”设置，它在 Windows 7 中运行良好。

它在 Windows 8 中仍然有效，但被开始屏幕阻止，您需要手动切换到桌面才能看到全屏显示。

是否有任何我可以用于 Windows 8 的设置来绕过开始屏幕，以便我的应用程序在启动时加载全屏？我更喜欢上面的注册表设置，我可以在我的应用程序选项中打开/关闭，并保持桌面的其余部分可用。

# php - PHP file_get_contents 和explode 在if 语句中不能正常工作

> ID：12666486
> 
> 赞同：0
> 
> 时间：2012-10-01T01:08:25.030
> 
> 标签：php

我有一个名为 tracker.txt 的文件，其中包含 3 行。txt 文件是这样的： http: [//tracker.cpcheats.co/rookie/tracker.txt](http://tracker.cpcheats.co/rookie/tracker.txt)。我正在使用 file_get_contents 并爆炸以返回数组的每一行，如下所示：

```
$read = file_get_contents('tracker.txt');
$filed = explode("\n",$read);
$status = $filed[0];
$server = $filed[1];
$room = $filed[2]; 
```

然后我有一个 if 语句，条件是如果 tracker.txt ($status) 的第一行是“找到”，那么它将在图像上写出第二行和第三行。它不起作用。

```
if ($status == 'found') {
//write out the server room and language (with shadow)
imagettftext($im, 15, 0, 140, 80, $white, $font, $server);
imagettftext($im, 15, 0, 139, 79, $black, $font, $server);
imagettftext($im, 15, 0, 140, 105, $white, $font, $room);
imagettftext($im, 15, 0, 139, 104, $black, $font, $room);
} 
```

奇怪的是，如果我只打印 $status、$server 和 $room 而不使用 if 语句，它可以正常工作并显示正确的行。为什么它不适用于条件？因为，我确定[http://tracker.cpcheats.co/rookie/tracker.txt](http://tracker.cpcheats.co/rookie/tracker.txt)的第一行是“找到”的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T01:15:49.960

您应该尝试使用`trim`删除空白区域

```
$string = file_get_contents("http://tracker.cpcheats.co/rookie/tracker.txt");
$string = explode("\n", $string);
list($status, $server, $room) = array_map("trim", $string); 
```

修剪前

```
array
  0 => string 'found
' (length=6)
  1 => string ' (EN) Avalanche
' (length=16)
  2 => string 'Ice Berg' (length=8) 
```

// 修剪后

```
array
  0 => string 'found' (length=5)
  1 => string '(EN) Avalanche' (length=14)
  2 => string 'Ice Berg' (length=8) 
```

你能看到长度是`$status`不同`length=6` 的`length=5`吗？

你也可以这样做

```
if (trim($status) == 'found') {
    // .... 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T01:20:30.433

看起来你有一个额外的 \r。这有效：

```
if ($status == "found\r"){
   ...
} 
```

# php - PHP 不区分大小写的explode()

> ID：12666489
> 
> 赞同：11
> 
> 时间：2012-10-01T01:09:00.290
> 
> 标签：php, string, explode, case-insensitive

我有以下代码：

```
explode("delimiter", $snippet); 
```

但我希望我的分隔符不区分大小写。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-01T01:11:48.163

只需使用[`preg_split()`](http://php.net/manual/en/function.preg-split.php)并传递不区分大小写的[标志：`i`](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)

```
$keywords = preg_split("/your delimiter/i", $text); 
```

还要确保您传递给的分隔符`preg_split()`不包含任何 sepcial 正则表达式字符。否则，请确保您正确逃避它们或使用[`preg_quote()`](http://php.net/manual/en/function.preg-quote.php).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-21T17:44:21.690

您可以先替换分隔符，然后正常使用explode。这可以作为一个相当可读的单行来完成，如下所示：

```
explode($delimiter,str_ireplace($delimiter,$delimiter,$snippet)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-15T07:50:24.270

```
explode('delimiter',strtolower($snippet)); 
```

1.  当有更多 CPU 负担得起的功能可用时，切勿使用昂贵的正则表达式。

2.  除非您明确用于在字符串中混合变量，否则切勿使用双引号。

# linux-kernel - 为什么必须使用 copy_to_user()/copy_from_user() 从内核访问用户空间？

> ID：12666493
> 
> 赞同：21
> 
> 时间：2012-10-01T01:09:47.293
> 
> 标签：linux-kernel

我很好奇，因为我在尝试直接访问内存后出现内核恐慌（然后我找到了这些函数）。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-01T01:27:45.700

这些函数做了一些事情：

*   他们检查提供的用户空间块是否完全在地址空间的用户部分（`access_ok()`） - 这可以防止用户空间应用程序要求内核读/写内核地址；
*   `EFAULT`如果任何地址不可访问，它们会返回错误，允许将错误返回到用户空间（在用户内存访问功能之一中）；
*   它们允许特定于体系结构的魔法，例如确保具有虚拟标记缓存的体系结构的一致性、禁用 SMAP 等保护或在具有单独用户/内核地址空间（如 S/390）的体系结构上切换地址空间。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-01T01:13:54.730

这些函数检查内存是否可访问。如果内核试图直接访问一个不可访问的地址，它就会panic。但此外，内核和用户地址空间可能不同......用户地址空间中的有效地址可能无法在内核中访问，如果是，它可能指向内核内容而不是用户内容。

有关更多详细信息，请参阅 [https://developer.ibm.com/articles/l-kernel-memory-access](https://developer.ibm.com/articles/l-kernel-memory-access)

历史记录：曾几何时，内核被设计为用户地址空间的一部分，在这些系统中，内核总是可以直接访问用户空间。可能仍然有这样的系统，但现代 linux 不是其中之一。当然，用户进程的内存作为内核地址空间的一部分始终是实现的一个选项，这可以使 copy_to_user 和 copy_from_user 更快。

# python - 我如何决定在 Smith-Waterman 算法中回溯的方式？

> ID：12666494
> 
> 赞同：4
> 
> 时间：2012-10-01T01:10:35.347
> 
> 标签：python, numpy, bioinformatics

我正在尝试使用[Smith–Waterman 算法](http://en.wikipedia.org/wiki/Smith%E2%80%93Waterman_algorithm)在 Python 中实现局部序列比对。

这是我到目前为止所拥有的。它可以建立[相似度矩阵](http://en.wikipedia.org/wiki/Similarity_matrix)：

```
import sys, string
from numpy import *

f1=open(sys.argv[1], 'r')
seq1=f1.readline()
f1.close()
seq1=string.strip(seq1)

f2=open(sys.argv[2], 'r')
seq2=f2.readline()
f2.close()
seq2=string.strip(seq2)

a,b =len(seq1),len(seq2)

penalty=-1;
point=2;

#generation of matrix for local alignment
p=zeros((a+1,b+1))

# table calculation and matrix generation
for i in range(1,a+1):
    for j in range(1,b+1):
        vertical_score =p[i-1][j]+penalty;
        horizontal_score= p[i][j-1]+penalty;
        if seq1[i-1]==seq2[j-1]:
            diagonal_score =p[i-1][j-1]+point;
        else:
            diagonal_score = p[i-1][j-1]+penalty;
        p[i][j]=max(0,vertical_score,horizontal_score,diagonal_score);

print p 
```

例如，使用两个序列：

```
agcacact
acacacta 
```

我的代码输出相似度矩阵：

```
[[  0\.   0\.   0\.   0\.   0\.   0\.   0\.   0\.   0.]
 [  0\.   2\.   1\.   2\.   1\.   2\.   1\.   0\.   2.]
 [  0\.   1\.   1\.   1\.   1\.   1\.   1\.   0\.   1.]
 [  0\.   0\.   3\.   2\.   3\.   2\.   3\.   2\.   1.]
 [  0\.   2\.   2\.   5\.   4\.   5\.   4\.   3\.   4.]
 [  0\.   1\.   4\.   4\.   7\.   6\.   7\.   6\.   5.]
 [  0\.   2\.   3\.   6\.   6\.   9\.   8\.   7\.   8.]
 [  0\.   1\.   4\.   5\.   8\.   8\.  11\.  10\.   9.]
 [  0\.   0\.   3\.   4\.   7\.   7\.  10\.  13\.  12.]] 
```

现在我被困在算法的下一步，即回溯以构建最佳对齐方式。

[维基百科说](http://en.wikipedia.org/wiki/Smith%E2%80%93Waterman_algorithm#Example)，

> 为了获得最佳的局部对齐，我们从矩阵中的最大值 ( *i* , *j* ) 开始。然后，根据用于构造矩阵的移动方向，我们返回到位置 ( *i* -1, *j* )、( *i* , *j* -1) 和 ( *i* -1, *j -1) 之一。*我们保持这个过程，直到我们到达一个零值的矩阵单元，或者位置 (0, 0) 的值。

我无法确定要回溯到哪个位置。Wikipedia 所说的“取决于用于构造矩阵的运动方向”是什么意思，我将如何在 Python 中实现这一点？

最后我做到了

```
import sys, string
from numpy import*
import re

# read first sequence

fasta_sequence1=open(sys.argv[1], 'r')

seq1=""
for i in fasta_sequence1:
    if i.startswith(">"):
        pass
    else:
        seq1 = seq1 + i.strip()   
fasta_sequence1.close()

fasta_sequence2=open(sys.argv[2], 'r')

seq2 = ""
for i in fasta_sequence2:
    if i.startswith('>'):
        pass
    else:
        seq2 = seq2+ i.strip()
fasta_sequence2.close()

a,b =len(seq1),len(seq2)

penalty=-1;
point=2;

#generation of matrix for local alignment 

p=zeros((a+1,b+1))

#intialization of max score
max_score=0;
#pointer to store the traceback path

pointer=zeros((a+1,b+1))

# table calculation and matrix generation
for i in range(1,a+1):
    for j in range(1,b+1):
        vertical_score =p[i-1][j]+penalty;
        horizontal_score= p[i][j-1]+penalty;
        if seq1[i-1]==seq2[j-1]:
            diagonal_score =p[i-1][j-1]+point;
        else:
            diagonal_score = p[i-1][j-1]+penalty;

for i in range(1,a+1):
    for j in range(1,b+1):            
        p[i][j]=max(0,vertical_score,horizontal_score,diagonal_score);

for i in range(1,a+1):
    for j in range(1,b+1):
        if p[i][j]==0:
            pointer[i][j]=0; #0 means end of the path
        if p[i][j]==vertical_score:
            pointer[i][j]=1; #1 means trace up
        if p[i][j]==horizontal_score:
            pointer[i][j]=2; #2 means trace left
        if p[i][j]==diagonal_score:
            pointer[i][j]=3; #3 means trace diagonal
        if p[i][j]>=max_score:
            maximum_i=i;
            maximum_j=j;
            max_score=p[i][j];

#for i in range(1,a+1):
   # for j in range(1,b+1):
        #if p[i][j]>max_score:
            #max_score=p[i][j]

print max_score

# traceback of all the pointers 

align1,align2='',''; #initial sequences

i,j=max_i,max_j; #indices of path starting point

while pointer[i][j]!=0:
  if pointer[i][j]==3:
    align1=align1+seq1[i-1];
    align2=align2+seq2[j-1];
    i=i-1;
    j=j-1;
  elif pointer[i][j]==2:
    align1=align1+'-';
    align2=align2+seq2[j-1]
    j=j-1;
  elif pointer[i][j]==1:
    align1=align1+seq1[i-1];
    align2=align2+'-';
    i=i-1;

align1=align1[::-1]; #reverse sequence 1
align2=align2[::-1]; #reverse sequence 2

#output_file = open(sys.argv[3],"w")
#output_file.write(align1)

#output_file.write(align2)

print align1
print align2 
```

但我认为可能有更好、更有效的方法来做到这一点

```
output_file = open(sys.argv[3],"w")
output_file.write(align1)
output_file.write(align2) 
```

结果显示像

```
agcacacta-cacact 
```

相反c：

```
print align1
print align2 
```

显示正确的输出：

```
agcacact
a-cacact 
```

如何在文件编写器中获得上述输出。谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T10:47:06.607

当您构建相似度矩阵时，您不仅需要存储相似度得分，还需要存储*该得分的来源*。您当前有一行代码：

```
p[i][j]=max(0,vertical_score,horizontal_score,diagonal_score); 
```

所以在这里你需要记住的不仅仅是最高分，而是*其中哪一个*是最高分。然后当你来做回溯时，你就会知道该往哪个方向走。

例如，您可以尝试这样的事情：

```
import numpy

DELETION, INSERTION, MATCH = range(3)

def smith_waterman(seq1, seq2, insertion_penalty = -1, deletion_penalty = -1,
                   mismatch_penalty = -1, match_score = 2):
    """
    Find the optimum local sequence alignment for the sequences `seq1`
    and `seq2` using the Smith-Waterman algorithm. Optional keyword
    arguments give the gap-scoring scheme:

    `insertion_penalty` penalty for an insertion (default: -1)
    `deletion_penalty`  penalty for a deletion (default: -1)
    `mismatch_penalty`  penalty for a mismatch (default: -1)
    `match_score`       score for a match (default: 2)

    See <http://en.wikipedia.org/wiki/Smith-Waterman_algorithm>.

    >>> for s in smith_waterman('AGCAGACT', 'ACACACTA'): print s
    ... 
    AGCAGACT-
    A-CACACTA
    """
    m, n = len(seq1), len(seq2)

    # Construct the similarity matrix in p[i][j], and remember how
    # we constructed it -- insertion, deletion or (mis)match -- in
    # q[i][j].
    p = numpy.zeros((m + 1, n + 1))
    q = numpy.zeros((m + 1, n + 1))
    for i in range(1, m + 1):
        for j in range(1, n + 1):
            deletion = (p[i - 1][j] + deletion_penalty, DELETION)
            insertion = (p[i][j - 1] + insertion_penalty, INSERTION)
            if seq1[i - 1] == seq2[j - 1]:
                match = (p[i - 1][j - 1] + match_score, MATCH)
            else:
                match = (p[i - 1][j - 1] + mismatch_penalty, MATCH)
            p[i][j], q[i][j] = max((0, 0), deletion, insertion, match)

    # Yield the aligned sequences one character at a time in reverse
    # order.
    def backtrack():
        i, j = m, n
        while i > 0 or j > 0:
            assert i >= 0 and j >= 0
            if q[i][j] == MATCH:
                i -= 1
                j -= 1
                yield seq1[i], seq2[j]
            elif q[i][j] == INSERTION:
                j -= 1
                yield '-', seq2[j]
            elif q[i][j] == DELETION:
                i -= 1
                yield seq1[i], '-'
            else:
                assert(False)

    return [''.join(reversed(s)) for s in zip(*backtrack())] 
```

# android - 一次突出显示一个按钮

> ID：12666497
> 
> 赞同：2
> 
> 时间：2012-10-01T01:11:06.963
> 
> 标签：android

我正在制作一款仿照旧西蒙游戏的安卓游戏。它的布局有点不同，因为它使用的是 3x3 的按钮布局。我试图让按钮在随机选择一个按钮的循环内一次点亮一个。我遇到的问题是所有按钮都同时亮起，只有最后一个（或第一个，不确定）变回原来的颜色。我已经非常彻底地尝试找到适合我情况的答案，但在这里或其他地方都没有运气。按钮 id(s) 在 butts[] 中。butts[0] 是按钮 1，butts[2] ... 下面是我的尝试。

```
public void play()
{
  for(int x = 0; x <= numButtons; ++x)
  {
      spot = randomGenerator.nextInt(9);
      playMe[x] = spot;
      //butts[spot].setBackgroundColor(Color.parseColor("#540115"));
      handler.postDelayed(new Runna(spot), (x+1)*1000); 
  }
}
class Runna implements Runnable 
{ 
  public Runna(int j2) 
  {
      butts[j2].setBackgroundColor(Color.parseColor("#540115"));
  }
  public void run() 
  {  
    butts[spot].setBackgroundColor(Color.LTGRAY);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T01:45:13.230

您是否尝试过每次都使按钮无效？

```
 public Runna(int j2) 
  {
      butts[j2].setBackgroundColor(Color.parseColor("#540115"));
      butts[j2].invalidate();
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T02:54:41.613

我认为这与现货的价值有关。它对函数是全局的，你每次都改变它。它运行，但最后仍然只有一个点，每个可运行的都试图改变同一个点。

也许在您的可运行文件中保存位置？

```
class Runna implements Runnable 
{ 
   int s;

   public Runna(int j2) 
   {
      s = j2;
      butts[s].setBackgroundColor(Color.parseColor("#540115"));
   }

   public void run() 
   {  
      butts[s].setBackgroundColor(Color.LTGRAY);
   } 
```

}

# bash - Unix 管道和位置参数

> ID：12666501
> 
> 赞同：5
> 
> 时间：2012-10-01T01:12:40.083
> 
> 标签：bash, unix, pipe

我正在组合`sox`并`lame`生成一个新的音乐文件，但为了使用管道在一行上完成所有操作，似乎有必要用一个`-`字符“标记”输出和输入边界。我继承了这段代码，所以让我展示一下。

```
sox $DIRNAME/$BASENAME -e signed-integer -r 8000 -c 2 -t wav - trim $POSITIONS | lame -v -V4 --resample 8 - $DIRNAME/${NOEXT}.mp3 
```

`-`between `wav`and`trim`是输出文件，between `-`and`--resample 8`是`$DIRNAME/${NOEXT}.mp3`输入文件。

我正在尝试查找有关此的更多信息，例如是否可以使用任何字符，或者是否`-`以这种方式特殊。这叫什么，是什么使它起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T01:16:47.520

许多 Unix 命令行实用程序使用“-”作为简写来表示“这里不要使用真实文件，而是使用标准输入（或标准输出）”。Sox 是这些程序之一：

这是来自[sox 联机帮助页](http://linux.die.net/man/1/sox)

> SoX 可以通过使用特殊文件名“-”用于简单的管道操作，如果使用它代替输入文件名，将导致 SoX 将从“标准输入”（stdin）读取音频数据，如果使用的输出文件名，将导致 SoX 将音频数据发送到“标准输出”（stdout）。请注意，使用此选项时，还必须给出文件类型（请参阅下面的 -t）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T01:17:09.163

按照惯例，unix 和朋友使用`-`来表示标准输入和标准输出。

它不是 100% 通用的，但它的使用非常广泛。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T01:23:08.980

在您的示例中，它与

```
/dev/stdin 
```

尝试`-`用它替换你的，你会看到的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-01T01:23:37.433

“-”通常用作约定而不是文件名来表示“使用标准输入（而不是读取文件）或标准输出（而不是写入文件）”。这不是命令外壳（即 bash）的特性，因此从这个意义上说，它不是特殊字符。它是某些命令的一个功能（例如在您的情况下是“sox”和“lame”），并且通过管道链接这些命令非常有用。

# mysql - MySQL IN 子句：最大参数数

> ID：12666502
> 
> 赞同：21
> 
> 时间：2012-10-01T01:12:42.237
> 
> 标签：mysql

假设您有以下查询：

```
SELECT * FROM table1 WHERE table1.id IN (1, 2, 3, 4, 5, ..., 999999) 
```

条款中项目数量的合理最大值是多少`IN`？我正在使用 Sphinx 生成全文搜索结果并将 ID 插入 MySQL 查询。这是一种可接受的方式吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-01T01:18:12.150

您还可以让 IN 子句获取查询结果，例如：

```
SELECT * FROM table1 
WHERE table1.id IN 
    (
   SELECT id from table2
    ) 
```

这样，您不需要生成包含所有可能值的文本字符串。

在 mysql 中，您应该能够在 IN 子句中放入任意数量的值，仅受“max_allowed_pa​​cket”值的约束。

[http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in) [http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html #sysvar_max_allowed_pa​​cket](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_max_allowed_packet)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-25T06:45:12.567

MariaDB（在我的例子中是 10.3.22）在创建物化临时表之前对 IN() 有 999 个参数的限制，这可能导致执行时间更长。取决于你的指数。我还没有找到控制这种行为的方法。MySQL 5.6.27 没有这个限制，至少没有~1000 个参数。MySQL 5.7 很可能具有相同的“功能”。

我最终做了一系列，`where id = a or id = b ...`但通过使用一系列`where id in(a, b) or id in(c, d) ...`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-10T10:55:56.613

它看起来像这个主题的副本： [https ://stackoverflow.com/a/4275704/838712](https://stackoverflow.com/a/4275704/838712)

在提供的答案中，很明显规范中没有官方限制，而是取决于您的 DBMS 配置。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-10-01T10:00:02.440

根据我的经验，子句中的最大值是 1000 个值`IN ('1',....,'1000')`，我的 excel 表中有 1300 个值，我将它们全部放入 IN ，MySQL 仅返回 1000 个。

# .net-4.0 - 在 404 页面中创建新视图

> ID：12666505
> 
> 赞同：2
> 
> 时间：2012-10-01T01:14:35.723
> 
> 标签：.net-4.0, asp.net-mvc-4

我正在尝试做一些非常简单的事情，但我似乎遗漏了一些东西。我试图在互联网上搜索结果，但没有得到任何结果，所以我想知道是否有人可以就这个看似简单直接的任务提出建议。

我有一个工作的 MVC 应用程序，并使用默认值（脚手架）创建了模型、控制器、视图。

现在我想为我的控制器操作之一创建一个新视图：

```
public ActionResult Index()
        {
            return View(db.Blog.ToList());
        } 
```

所以我右键单击操作结果，然后单击添加视图。这给了我一个对话框，我在其中指定了“测试”的视图名称，单击“创建强类型视图”复选框并选择博客的模型类。对于脚手架模板，我留空（注意我尝试过索引但没有任何好的结果）现在我单击添加按钮。

正如预期的那样，这在 Views/Blogs 下创建了一个新视图 test.cshtml

现在，当我开始没有调试并转到 url: localhost:12341/Blog/Test

我收到以下错误：

## “/”应用程序中的服务器错误。

无法找到该资源。说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。

请求的 URL：/Blog/test

* * *

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.17929

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T04:52:16.083

为什么它不起作用可能存在很多问题。研究 ASP.NET MVC 路由可能是值得的。目前，假设您已将其他所有内容设置为默认值，Mystere Man 的解决方案可能是一个“快速修复”。

特别是，当您告诉浏览器转到时，`localhost:12341/Blog/Test`它会（可能）查找调用的控制器`BlogController`，然后执行`Test`操作。在您的情况下，您的操作被调用`Index`，因此您想去`localhost:12341/Blog/Index`（尽管您可以省略`Index`，因为它是默认操作）。最后，由于调用了您的操作，`Index`因此该`View()`函数将自动查找`Index.cshtml`. 这在 msdn 文档中有所详细说明：

[http://msdn.microsoft.com/en-us/library/dd492930(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd492930(v=vs.100).aspx)

尤其是：

> 如果 ViewName 属性为空，则使用当前操作名称代替 ViewName 属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T01:21:25.550

您的操作方法称为索引，而不是测试。如果你希望url是/Test，那么你需要将动作方法命名为Test（还有其他方法可以做到，但这是最好的方法）

如果你想使用视图测试，那么你需要在你的 View() 方法中指定它。

```
return View("Test", db.Blogs.ToList()); 
```

但是，您仍然需要使用索引 url /Blogs/Index，因为您的操作方法是 Index。

# c# - 在 C# XmlSerializer 中使用一个 XML 标签处理多个字段

> ID：12666510
> 
> 赞同：0
> 
> 时间：2012-10-01T01:15:25.073
> 
> 标签：c#, xml, serialization

我有一个如下所示的 XML 片段：

```
<object>
  <field name="p1">Foo</field>
  <field name="p2">Bar</field>
  <field_list name="p3">
    <field_value>Me</field_value>
    <field_value>Myself</field_value>
    <field_value>I</field_value>
  </field_list>
</object> 
```

我想做的是在 C# 中将其表示为字典 - 键是名称 (p1, p2, p3)，值是字符串列表 - 前两个 (p1, p2) 将有一个元素和第三个（p3）将包含三个元素。

此 Xml 文档需要反序列化。我怎样才能做到这一点并最终得到所需的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T01:35:00.137

[XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)类本身不会序列化`Dictionary`。但是，有第三方序列化器可用，例如[Sharp序列化](http://www.sharpserializer.com/en/index.html)器和[来自 Peter Welter](http://weblogs.asp.net/pwelter34/archive/2006/05/03/444961.aspx)的序列化器。

如果您想自己实现它而不需要额外的库，请实现[IXmlSerializable](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.aspx)并提供 ReadXml 和 WriteXml 的自定义实现。

也可以看看：

*   [为什么 XmlSerializer 不支持 Dictionary？](https://stackoverflow.com/questions/2911514/why-doesnt-xmlserializer-support-dictionary)
*   [使用 XmlSerializer 将列表反序列化为字典](https://stackoverflow.com/questions/3123921/deserializing-with-xmlserializer-list-into-dictionary)
*   [为什么 .NET 中没有可序列化 XML 的字典？](https://stackoverflow.com/questions/1124597/why-isnt-there-an-xml-serializable-dictionary-in-net)

# ruby-on-rails - 如何访问通过 Ruby on Rails 中的表单选择的文件？

> ID：12666511
> 
> 赞同：0
> 
> 时间：2012-10-01T01:15:27.143
> 
> 标签：ruby-on-rails, ruby

我有以下 Ruby 代码，它设置了一个表单来选择一个文件：

```
 <%= form_for :import, :url=>{:controller=>"products", :action=>"import"}, :html => { :multipart => true } do |f| %>
        <div class= "field">
            <%= f.file_field :import %>
            <%= submit_tag 'Import' %>
        </div> 
```

在控制器中，我试图调用从本地驱动器中选择的文件。此行适用于特定文件：

```
 book = Spreadsheet.open 'c:/source.xls' 
```

但我不知道如何在控制器中调用从表单中选择的文件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T01:25:18.253

文件数据将在 中`params[:import][:import]`，而不是在实际文件中。文件上传后，就没有像“c:/...”这样的东西了。

如果需要，打开一个新文件，并将该数据写入其中。

或者使用像carrierwave这样的东西来为你做这件事，并在保存后获取文件的实际路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:07:34.727

使用以下插件之一来处理文件上传。

`attachement_fu`和`paperclip`。

这是关于回形针的 railscast 教程[http://railscasts.com/episodes/134-paperclip](http://railscasts.com/episodes/134-paperclip)，这是附件 fu 教程[http://clarkware.com/cgi/blosxom/2007/02/24#FileUploadFu](http://clarkware.com/cgi/blosxom/2007/02/24#FileUploadFu)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:52:30.263

这是现在有效的代码：

默认导入

```
require 'spreadsheet'
Spreadsheet.client_encoding = 'UTF-8'
import_file = params[ :import ][ :import ]
file = FileUploader.new
file.store!(import_file)
book = Spreadsheet.open "#{file.store_path}"
sheet1 = book.worksheet 0
sheet1.each 1 do |row|
@product = Product.new(:code => row[0], :name => row[1], :status => row[2], :account => current_user.account).save 
```

结尾

# mysql - MySQL查询匹配多个字段？

> ID：12666513
> 
> 赞同：1
> 
> 时间：2012-10-01T01:15:37.257
> 
> 标签：mysql, sql

我对如何在 MySQL 中编写以下查询感到困惑：给定一个协作者，我想获取参与该协作者所从事的每个项目的所有协作者。

这是我的合作者表：

```
id collaborator_id item_id
1      1              1
2      2              1
3      3              1
4      4              2
5      1              2
6      2              3 
```

对于 collaborator_id=1，查询将返回：

```
collaborator_id    item_id
       1              1
       2              1
       3              1
       1              2
       4              2 
```

因此，collaborator_id=1 在 item_id=1 上与 collaborator_ids=2,3 一起工作，并在 item_id=2 上自己工作。

这看起来超级简单，但我对如何获得这些结果一无所知。想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T01:22:53.680

此查询加入 item_id 并获取与给定协作者在共享项目上合作的所有唯一协作者，而不是协作者本人：

```
SELECT distinct b.collaborator_id, b.item_id
FROM collab_table a
    JOIN collab_table b
    on a.item_id = b.item_id
WHERE a.collaborator_id = 1
    and b.collaborator_id != 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T01:45:31.843

您可以使用`subquery`

```
SELECT *
FROM collaborator
WHERE item_ID IN
(
   SELECT item_ID
   FROM collaborator
   WHERE collaborator_id = 1
) 
ORDER BY item_ID, Collaborator_ID 
```

或通过使用`JOIN`

```
SELECT a.*
FROM   COLLABORATOR a
       JOIN COLLABORATOR b
          ON a.ITEM_ID = b.ITEM_ID
WHERE  b.COLLABORATOR_ID = 1
ORDER BY item_ID, Collaborator_ID; 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/26f9f/22)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T01:25:26.300

您需要做的是将表连接回自身，在其中一个别名上使用您的过滤器，并从另一个别名中提取结果集：

```
select a.COLLABORATOR_ID, a.ITEM_ID
from COLLABORATOR as a
inner join COLLABORATOR as b on
    a.ITEM_ID = b.ITEM_ID
where b.COLLABORATOR_ID = 1 
```

# c++ - using-declaration 的可变扩展

> ID：12666517
> 
> 赞同：5
> 
> 时间：2012-10-01T01:16:31.263
> 
> 标签：c++, c++11, overloading, variadic-templates

> **可能重复：**
> [在可变参数模板中使用声明](https://stackoverflow.com/questions/7870498/using-declaration-in-variadic-template)

我最近遇到了[一种通用机制](http://cpp-next.com/archive/2012/09/unifying-generic-functions-and-function-objects/)，用于组合两个函数对象以形成一个新的函数对象，其行为就像前两个被重载一样：

```
template <typename F1, typename F2>
struct overload : public F1, public F2
{
    overload(F1 f1, F2 f2) : F1(f1), F2(f2) {}

    using F1::operator();
    using F2::operator();
}; 
```

我正在尝试使用可变参数模板将这个想法扩展为适用于 N 个函数对象：

```
template <typename... Fs>
struct overload : public Fs...
{
    overload(Fs... fs) : Fs(fs)... {}

    using Fs::operator();...
}; 
```

但是，GCC 抱怨我尝试对 using 声明进行可变参数扩展：

```
test.cpp:6:24: error: parameter packs not expanded with '...':
     using Fs::operator();...
                        ^
test.cpp:6:24: note:         'Fs'
test.cpp:6:26: error: expected unqualified-id before '...' token
     using Fs::operator();...
                          ^ 
```

我尝试了一些变化，例如：

```
using Fs::operator()...; 
```

和

```
using Fs...::operator(); 
```

但也不行。

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：-6
> 
> 时间：2012-10-01T01:50:15.963

而不是“我最近遇到了一个通用机制”，请*提供参考*，例如“我最近遇到了[Dave Abrahams 的一篇博客文章，](http://cpp-next.com/archive/2012/09/unifying-generic-functions-and-function-objects/)描述了一个通用机制”……。

我怀疑声明是否支持参数包扩展`using`，很抱歉我没有时间检查标准——这又是*你的*工作，在提问之前*阅读文档。*

但是作为解决手头问题（而不是语言问题）的实际问题，您始终可以递归地对其进行编码，而不是使用直接扩展。只需从一个引入其余仿函数的类继承，然后引入第一个。其中“其余”是递归步骤，以一个空的函子列表作为基本情况终止。

# java - 登录 Servlet 直接变为 False

> ID：12666518
> 
> 赞同：0
> 
> 时间：2012-10-01T01:16:38.747
> 
> 标签：java, database, servlets

大家好，尝试创建一个简单的数据库登录 java servlet。它会直奔 `Login failed. Please try again.`

这是我的数据库中的集合，我有表`user`- `id`, `uniid`, `name`, `password`,`email`

例如我在表中有以下数据

```
uniid - 18357593
name - Jared Hoight
password - password
email - jhall@students.monash.edu.au 
```

这是完整的登录servlet

```
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.RequestDispatcher;

/**
 * Servlet implementation class LoginServlet
 */
@WebServlet("/LoginServlet")
public class LoginServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public LoginServlet() {
        super();
        // TODO Auto-generated constructor stub
    }

    private void sendLoginForm(HttpServletResponse response, 
              boolean withErrorMessage) 
              throws ServletException, IOException {

              response.setContentType("text/html"); 
              PrintWriter out = response.getWriter(); 
              out.println("<HTML>"); 
              out.println("<HEAD>"); 
              out.println("<TITLE>Login</TITLE>"); 
              out.println("</HEAD>"); 
              out.println("<BODY>"); 
              out.println("<CENTER>"); 

              if (withErrorMessage) 
                out.println("Login failed. Please try again.<BR>"); 

              out.println("<BR>"); 
              out.println("<BR><H2>Login Page</H2>"); 
              out.println("<BR>"); 
              out.println("<BR>Please enter your user name and password."); 
              out.println("<BR>"); 
              out.println("<BR><FORM METHOD=POST>"); 
              out.println("<TABLE>"); 
              out.println("<TR>"); 
              out.println("<TD>User Name:</TD>"); 
              out.println("<TD><INPUT TYPE=TEXT NAME=uniid></TD>"); 
              out.println("</TR>"); 
              out.println("<TR>"); 
              out.println("<TD>Password:</TD>"); 
              out.println("<TD><INPUT TYPE=PASSWORD NAME=password></TD>"); 
              out.println("</TR>"); 
              out.println("<TR>"); 
              out.println("<TD ALIGN=RIGHT COLSPAN=2>"); 
              out.println("<INPUT TYPE=SUBMIT VALUE=Login></TD>"); 
              out.println("</TR>"); 
              out.println("</TABLE>"); 
              out.println("</FORM>"); 
              out.println("</CENTER>"); 
              out.println("</BODY>"); 
              out.println("</HTML>"); 
            } 

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        sendLoginForm(response, false); 

    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    public void doPost(HttpServletRequest request, 
              HttpServletResponse response) 
              throws ServletException, IOException {  
                String uniid = request.getParameter("uniid"); 
                String password = request.getParameter("password"); 
                if (login(uniid, password)) {
                  RequestDispatcher rd = 
                    request.getRequestDispatcher("AnotherServlet"); 
                  rd.forward(request, response); 
                } 
                else {
                  sendLoginForm(response, true); 
                } 

    }

     boolean login(String uniid, String password) {
            try {
              Class.forName("sun.jdbc.odbc.JdbcOdbcDriver"); 
              Connection con = 
                DriverManager.getConnection("jdbc:mysql://localhost:3306/wae","root",""); 
              System.out.println("got connection"); 

              Statement s = con.createStatement(); 
              String sql = "SELECT uniid FROM user" + 
                " WHERE uniid='" + uniid + "'" + 
                " AND password='" + password + "'"; 
              ResultSet rs = s.executeQuery(sql); 
              if (rs.next()) {
                rs.close(); 
                s.close(); 
                con.close(); 
                return true; 
              } 
                rs.close(); 
                s.close(); 
                con.close(); 
            } 
            catch (ClassNotFoundException e) {
              System.out.println(e.toString()); 
            } 
            catch (SQLException e) {
              System.out.println(e.toString()); 
            } 
            catch (Exception e) {
              System.out.println(e.toString()); 
            } 
            return false; 
          } 
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T01:25:12.490

数据库驱动程序

```
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver"); 
```

不是与 MySQL 一起使用的正确方法。它应该是

```
Class.forName("com.mysql.jdbc.Driver"); 
```

当您的`login`方法中发生异常时，将打印异常字符串并返回 false。

# solr - solr 文档在搜索结果中的排名或位置

> ID：12666521
> 
> 赞同：2
> 
> 时间：2012-10-01T01:16:47.217
> 
> 标签：solr, full-text-search, position

我需要在 solr 查询后列出排名（或位置，您可能更喜欢）或每个文档。我想看到的是这样的：

```
<doc>
    <int name="field1">1</int>
    <str name="someotherfield">blabla</str>
    <int name="position">1</int>
</doc>
<doc>
    <int name="field1">2</int>
    <str name="someotherfield">blabla</str>
    <int name="position">2</int>
</doc>
<doc>
    <int name="field1">3</int>
    <str name="someotherfield">blabla</str>
    <int name="position">3</int>
</doc> 
```

这可能吗？或者我需要实现或找到一个插件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T03:52:47.423

在挖掘源代码之后，我现在可以看到每个不同搜索的动态位置。我只是添加了一个位置函数`DocIterator`并在子类中实现。然后我添加了一个控制块`ReturnFields`来检查 fl 是否在其中有位置。它的工作方式与`score`. 最后要做的是添加一个自定义增强器类，例如`PositionAugmenter`- 类似于`ScoreAugmenter`. 然后我就完成了:)

感谢*David Faber*给了我处理原始 XML 结果的想法

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-01T10:06:09.730

在结果中列出一个字段`position`（除其他外）：

```
...&fl=field1,field2,position 
```

排序方式 `position`

```
...&sort=position desc 
```

在这里参考他们：[http ://wiki.apache.org/solr/CommonQueryParameters#sort](http://wiki.apache.org/solr/CommonQueryParameters#sort)

# iphone - 如何在应用程序中启用 iOS 6.0 全景相机？

> ID：12666523
> 
> 赞同：10
> 
> 时间：2012-10-01T01:16:59.130
> 
> 标签：iphone, ios, ios6, uiimagepickercontroller

我正在开发一个使用相机的 iOS 6 应用程序，但我一直无法弄清楚如何启用允许用户拍摄全景照片的选项。就拍摄普通照片而言，我已经做好了一切工作，但希望用户可以选择在应用程序中使用 iOS 6 中的新全景功能。

我搜索了网络，但找不到任何信息（SO、Apple Dev Center 等）。我无法确定这是否有可能。我们可以使用它吗？如果可以，如何使用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T13:18:30.267

这是不可能的。只能通过`UIImagePickerController`或通过访问相机`AVFramework`，并且它们都不提供此功能。

`AVFramework`为您提供来自相机的数据流，您必须自己处理。除非您想实现自己的全景功能，否则这是不合适的。

虽然有调整闪光灯、视频/图像和后/前的设置`UIImagePickerController`，但没有启用原生全景功能的设置。

与 HDR 照片类似，全景拍摄仅在相机应用程序中可用。

# ruby - 在便携式设备 (iOS/Android/etc) 上离线查看 RDoc (Ruby Docs)

> ID：12666537
> 
> 赞同：2
> 
> 时间：2012-10-01T01:19:32.120
> 
> 标签：ruby, ipad, offline, rdoc, ri

我想离线访问 RDoc 生成的页面，这样我可以在没有 Internet 访问的情况下在旅行时了解新的 gem 或其他软件。我更喜欢使用 iPad，但这个问题适用于任何不容易支持查看静态网站的操作系统。据我所知，RDoc 没有生成单页文档或大 PDF 的选项。这个对吗？如果是这样，是否有一种简单的方法来获取 RDoc 文件（基本上是静态网站的文件）并将它们转换为一些可移植的离线格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T01:45:29.650

您可以尝试使用 HTML 到 PDF 的转换工具从 RDoc 生成的 HTML 代码创建 PDF 文件。[Pdfkit](https://github.com/pdfkit/PDFKit)是完成此任务的绝佳方式：

```
require 'pdfkit'

kit = PDFKit.new(html, :page_size => 'Letter')
kit.stylesheets << '/path/to/css/file'
file = kit.to_file('/path/to/save/pdf') 
```

# android - 禁用系统栏 Android 4.0

> ID：12666543
> 
> 赞同：0
> 
> 时间：2012-10-01T01:20:10.980
> 
> 标签：android

我知道有很多关于在 android 4.0 上隐藏系统栏的讨论，但没有关于在 Android 4.0 平板电脑上禁用虚拟按钮或状态栏或系统栏功能的讨论？

这可能吗？有人可以引导我走向正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T01:51:16.780

试试 FLAG_FULLSCREEN，它应该隐藏状态栏 [http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_FULLSCREEN](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_FULLSCREEN)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-11T22:09:48.723

我做了很多研究来设计锁屏，最后找到了**永久禁用系统栏的解决方案，即导航栏（返回、主页、最近的应用软键）和状态栏**。Android 禁用了覆盖除后退按钮之外的系统栏的功能。但是有一些工作可以使这项工作：

耐心地理解和实施**屏幕固定**，你就会成功。

您可以创建一个应用程序来控制要在其中实现屏幕固定的所有应用程序，或者您可以直接在要固定的同一应用程序中实现屏幕固定。

我将在本文中向您展示稍后的实现：

**1.首先您的应用程序应该是设备所有者。**

您可以通过多种方式执行此操作，最简单的是执行命令：

adb shell dpm set-device-owner [yourPackageName]/.[MyDeviceAdminReceiver]

创建一个扩展 DeviceAdminReceiver 的接收器（MyDeviceAdminReceiver）。你不需要在这里有任何代码。有关设备所有者实施的更多信息，请参阅此链接
[http://florent-dupont.blogspot.com/2015/02/10-things-to-know-about-device-owner.html](http://florent-dupont.blogspot.com/2015/02/10-things-to-know-about-device-owner.html)

以这种方式在 AndroidManifest.xml 文件中注册接收器：

```
<receiver
       android:name=".MyDeviceAdminReceiver"
       android:label="@string/app_name"
       android:permission="android.permission.BIND_DEVICE_ADMIN">
     <meta-data
       android:name="android.app.device_admin"
       android:resource="@xml/device_admin" />

       <intent-filter>
         <action android:name="android.app.action.DEVICE_ADMIN_ENABLED" />
       </intent-filter>
  </receiver> 
```

**2\. 您的 onCreate 方法应如下所示：**

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_lock_screen);

    ComponentName deviceAdmin = new ComponentName(this, MyDeviceAdminReceiver.class);
    DevicePolicyManager mDpm = (DevicePolicyManager) getSystemService(Context.DEVICE_POLICY_SERVICE);

    if (mDpm.isDeviceOwnerApp(getPackageName())) {
        mDpm.setLockTaskPackages(deviceAdmin, new String[]{getPackageName()});
    }

    if (mDpm.isLockTaskPermitted(this.getPackageName()))
        startLockTask(); 
```

**3.取消固定屏幕并使导航栏功能**：

在代码中要取消固定的位置调用函数 **stopLockTask() 。**例如在我的应用程序中，一旦我验证用户输入了正确的密码，我就会调用这个函数：

```
 if (userInput.length() == 4) {

                    if (userInput.equals(passcode)) {
                        userInput = "";
                        etxtPasscodeDisplay.setText("");
                        stopLockTask(); // this is what you need
                        unlockHomeButton(); // A method to show home screen when 
                         passcode is correct
                        finishAffinity(); //kill other activities
                    } 
```

**锁屏通常需要的额外信息：**

**1.如果您的应用程序是启动后出现的第一件事**：

为此，您需要一个服务（StartAtBootService）和一个接收器（BootCompletedReceiver）。

**2.如果您希望您的应用在屏幕锁定和解锁后显示** （按下电源按钮锁定和解锁）：

创建扩展**服务**的 AEScreenOnOffService 和扩展**BroadcastReceiver**的 AEScreenOnOffReceiver以在屏幕打开时启动您的活动。

有关我在这里提到的所有内容的详细信息，请参阅[http://www.sureshjoshi.com/mobile/android-kiosk-mode-without-root/](http://www.sureshjoshi.com/mobile/android-kiosk-mode-without-root/)
这是一篇出色的文章，对我帮助很大。特别感谢作者。

我需要至少 10 个声望才能发布两个以上的链接。由于我是 stackoverflow 的新手，我没有足够的声誉，所以很抱歉无法分享我提到的所有链接。一旦我获得访问权限，肯定会更新帖子。

# c# - C# 省略节点 XML

> ID：12666549
> 
> 赞同：1
> 
> 时间：2012-10-01T01:21:23.057
> 
> 标签：c#, xml

我有一个用这个算法编写的 XML 文档：

```
public XMLmethod(){
string[] nodes = { "node1", "node2", "node3" }; //etc etc

XmlTextWriter writer= new XmlTextWriter("file.xml", Encoding.UTF8);

writer.WriteStartDocument();
writer.WriteStartElement("root");

foreach (string node in nodes){
writer.WriteStartElement(s);
writer.WriteEndElement();
XMLmethod()}

writer.WriteEndElement();
writer.WriteEndDocument();
} 
```

以上为简化版。但是，我希望能够在将它们打印到 xml 之前过滤掉一些节点。

例如：

```
<root>
 <node1>
  <node2> </node2>
  <node3> </node3>
 </node1>
<root> 
```

说我想过滤 `<node1> </node1>`

所以它看起来像这样

```
<root>
 <node2></node2>
 <node3></node3>
</root> 
```

所以它仍然想打印孩子`<node2></node2>`和`<node3></node3>`

我考虑过使用 if 语句，例如：

```
foreach (string node in nodes){
if(node == "node1"){}
else{
writer.WriteStartElement(node);
writer.WriteEndElement();
XMLmethod()}
} 
```

这成功地不打印`<node1>/<node1>`，但它也阻止它打印子节点。知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T01:29:11.883

如果您有一个类，例如下面的 Foo，并且您想在使用 .Net [XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)对其进行序列化时省略一个或多个属性，请使用[XmlIgnore](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlignoreattribute.aspx)属性：

```
public class Foo
{
    [XmlIngore]
    public string Node1 { get; set; }
    public string Node2 { get; set; }
    public string Node3 { get; set; }
} 
```

这将导致 XmlSerializer 仅输出`<node2>`和`<node3>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T01:39:16.190

如果您发布的代码有效，您可以尝试在迭代之前从列表中删除项目，例如

```
nodes.Remove("node1");

foreach (string node in nodes)
{
} 
```

但是，从您的代码示例中不清楚您为什么要这样做。XML 文档以分层方式嵌套，因为它允许元素之间的关系和语义上下文。删除父节点可能会降低您正在生成的 XML 的可用性。

例如，如果文档是

```
<People>
  <Person>
    <FirstName>Max</FirstName>
    <LastName>Smart</LastName>
  </Person>
</People> 
```

仅删除`<Person>`标签并自行输出`FirstName`是`LastName`没有意义的。

# recursion - 了解这里的递归

> ID：12666551
> 
> 赞同：-1
> 
> 时间：2012-10-01T01:21:45.893
> 
> 标签：recursion

我正在研究一个递归问题，其中一个孩子可以一次以 1,2 或 3 步跳 n 级楼梯。我正在查看的代码是类似于斐波那契之类的函数。但是，我不明白的是，如果 n==0，为什么它会返回 1。如果总步数为 0，不应该有零种攀登方式吗？为什么只有一种方法可以爬上去？

```
int f(int n)
{
if(n<0)
return 0;
else if(n==0)
return 1;
else 
return f(n-1) + f(n-2) + f(n-3);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T01:25:40.430

这更像是一个逻辑问题。假设你站在那里什么也不做。你爬了多少级？答案是零。那么，你成功爬上零台阶了吗？是的。

爬零楼梯有几种方法？只有一种方法：你必须站在那里，不要爬任何台阶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T01:42:07.220

这不是一个真正有效的问题。

因为这是一个递归实现，所以您总是必须提供一个边界情况，`f(nmin)`即 where `nmin`is 1 小于最低的 valid `n`。

所以这种情况`n = 0`是一个边界条件，用于确保所有值的正确结果`n > 0`。

换句话说，它（可能）没有任何意义，或者，它可能意味着与你认为的不同的东西。它所要做的就是确保`f(1)`.

不，没有`0`办法上`0`楼梯，就像`0/0`不等于一样`0`。这是一个不确定的结果。

# c++ - 使用正则表达式的高效字数统计方法

> ID：12666553
> 
> 赞同：0
> 
> 时间：2012-10-01T01:21:49.937
> 
> 标签：c++, c, word-count

我正在寻找实现字数统计算法。但是，其中出现的任何内容都`~two tildes~`被视为 1 个单词。出于这个原因，我认为正则表达式可能是最好的方法？

必须在大约 10000 个字符的样本集中的每次按键上计算计数，所以最好把它弄对。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T01:45:37.370

你真的需要在每次按键时重新计算整个事情吗？似乎除非你在两个空格之间，否则没有键但是`~`或空格可以改变单词的数量。对于那些特殊的键，您通常应该能够在本地确定单词数量的变化，而无需重新处理整个缓冲区。

无论如何，您不需要正则表达式。每次看到`~`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T02:46:27.350

```
str = str.Trim() + " ";

var count = 0;
var inWord = false;
var inTilde = false;

foreach (var c in str)
{
    switch (c)
    {
        case ' ':
        case '\t':
        case '\r':
        case '\n':
            if (!inTilde && inWord)
            {
                inWord = false;
                count++;
            }
        case '~':
            if (inTilde)
            {
                count++;
                inWord = false;
            }

            inTilde = !inTilde;
        default:
            inWord = true;
    }
} 
```

未经测试，但非常简单......

另外，请注意，即使没有结束波浪号，它`~hi one~two~three four~`也会算作`hi one, two, three four`，以及。`~hi one~two~three four`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T02:15:22.120

与数字计数器耦合的简单有限状态自动机应该可以正常工作。

假设我们有以下状态：

```
OUTSIDE
WORD
TILDEWORD 
```

我们从*OUTSIDE*开始。然后我们可以开始处理每个字符，并确定接下来要进入哪个状态。

如果我们在*OUTSIDE*：

1.  如果我们到达文件的末尾，请留在原处。

2.  如果我们看到一个波浪字符，进入*TILDEWORD*状态并增加单词计数器。

3.  如果我们看到一个单词字符，进入*WORD*状态并增加单词计数器。

4.  否则，就留在原地。

其他两个州的案例分析应该类似。整个事情看起来几乎就像一个棋盘游戏。

```
------> OUTSIDE <----------> WORD
           ^                   ^
           |                   |
           |                   V
           +-------------> TILDEWORD 
```

编写 C 程序来跟踪我们在有限状态自动机中的位置是直接的。

箭头**可能**是双向的。考虑这个输入：

```
hello~happy fabulous world~testing is good 
```

当我们在扫描另一个单词时看到波浪号时会发生什么，问题陈述有点模糊。我怀疑我们必须把它算作一个单独的词，所以上面是五个词的序列。当然，您的解释可能会有所不同。考虑边缘情况！

# rails-geocoder - 如何使用 Ruby on Rails 中的 Geocoder gem 获取 postal_code？

> ID：12666554
> 
> 赞同：2
> 
> 时间：2012-10-01T01:21:58.910
> 
> 标签：rails-geocoder

我为我的 Ruby on Rails 项目安装了 GeoCoder gem，并试图获取城市的邮政编码，但`postal_code`始终为零。我在加利福尼亚州的圣何塞和华盛顿州的西雅图等所有城市都为`postal_code`.

我在 Rails 控制台中运行这些示例查询：

```
Geocoder.search("San Jose, CA").first.postal_code 
```

我发现的一种解决方法是运行以下命令，但它会进行 2 次调用，这违反了服务配额：

```
Geocoder.search(Geocoder.search("Seattle, WA").first.coordinates).first.postal_code 
```

有没有更好的语法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T01:46:19.087

试试这个 gem [Area zip](http://jonathanvingiano.com/area/)。它打一个电话。你会做这样的事情来获取邮政编码

```
 "San Jose, CA".to_zip 
```

# c - 一点 strtok() 乐趣

> ID：12666560
> 
> 赞同：0
> 
> 时间：2012-10-01T01:23:28.790
> 
> 标签：c, strtok

我不是最好的指针，所以也许你可以看到我做错了什么。

假设我有一个这样初始化的数组：

```
char *arrayOfCommands[]={"ls -l", "wc -l"}; 
```

我的目标是从该数组中获取一个名为**char *currentCommand**的数组，该数组查看 arrayOfCommands 的特定单元格并将命令分成空格上的片段。

我的最终目标是在每个循环上都有一个新的 currentCommand 数组，每个循环看起来像这样：

```
First Loop:  
currentCommand = [ls][-l]

First Loop:  
currentCommand = [wc][-l] 
```

这是我到目前为止的代码：

```
for (i = 0; i < 2; ++i) {
    char str[] = arrayOfCommands[i];
    char * currentCommand;
    printf ("Splitting string \"%s\" into tokens:\n",str);
    currentCommand = strtok (str, " ");
    while (currentCommand != NULL){
        printf ("%s\n",currentCommand);
        currentCommand = strtok (NULL, " ");
    }

    .
    .
    .

    //Use the currentCommand array (and be done with it)
    //Return to top
} 
```

任何帮助将不胜感激！:)

**更新：**

```
for (i = 0; i < commands; ++i) {
    char str[2];
    strncpy(str, arrayOfCommands[i], 2);
    char *currentCommand[10];
    printf ("Splitting string \"%s\" into tokens:\n",str);
    currentCommand = strtok (str, DELIM);
    while (currentCommand != NULL){
        printf ("%s\n",currentCommand);
        currentCommand = strtok (NULL, DELIM);
    }
} 
```

我收到此错误：** 分配中的类型不兼容**
它正在谈论我正在传递 strtok 函数的“str”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T01:33:34.417

`strtok`通过修改您传递的字符串进行操作；使用一些手册页时很容易忽略这一点。数组中的每个命令都是文字字符串：尝试修改它们会导致问题。因此，在将*每个*命令与`strtok`.

此外，这是一个无效的数组初始化：

```
char str[] = arrayOfCommands[i]; 
```

声明`str`为某个固定大小的数组，然后在使用`strncpy`以下命令对每个命令进行标记之前用于制作每个命令的副本`strtok`：

```
char str[MAX_COMMAND_LEN + 1];
strncpy(str, arrayOfCommands[i], MAX_COMMAND_LEN);

// ... 
```

# shell - powershell 命令未在 .bat 文件中运行？

> ID：12666568
> 
> 赞同：4
> 
> 时间：2012-10-01T01:24:17.030
> 
> 标签：shell, powershell, path

我正在尝试制作一个简单的脚本来设置我的 gcc 变量。作为 .bat 文件。

变量是这样设置的

```
$env:Path += ";C:\Users\Brett\Compilers\MinGW\bin" 
```

当我将它输入/粘贴到电源外壳时，它运行得很好。

但是当我粘贴到脚本 myscript.bat 中，并通过 powershell 运行它时，我得到了这个错误：

```
C:\Users\Brett\Compilers>"$env:Path += ";C:\Users\Brett\Compilers\MinGW\bin""
The filename, directory name, or volume label syntax is incorrect.
PS C:\Users\Scruffy\Compilers> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T01:28:23.040

PowerShell 是与 Windows 命令行 (cmd.exe) 分开的执行环境

如果要从批处理文件运行 powershell 命令，则需要保存 powershell 脚本 (.ps1) 并将其作为命令行参数传递给 powershell.exe。

例子：

```
powershell.exe -noexit c:\scripts\test.ps1 
```

[Microsoft TechNet 上提供了更多信息](http://technet.microsoft.com/en-us/library/ee176949.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T10:07:05.120

通常，将批处理内容留给 .BAT 文件并将 PowerShell 内容放入 .ps1 文件。

我可以在这里复制你的结果——但这些都是可以预料的。Cmd.exe 看到一个字符串，然后是一个路径，然后变得非常混乱，因为语法不是命令提示符可以处理的语法。所以它给出了那个错误信息。

如果您想在路径中添加内容，那么为什么不将语句放在 .ps1 脚本文件中呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T10:25:41.367

正如其他人所提到的，您需要将代码保存在 .ps1 文件中，而不是 .bat 中。

这一行（来自[Setting Windows PowerShell path variable](https://stackoverflow.com/questions/714877/setting-windows-powershell-path-variable)）将起到作用：

```
$env:Path = $env:Path + ";C:\Users\Brett\Compilers\MinGW\bin" 
```

甚至更短：

```
$env:Path += ";C:\Users\Brett\Compilers\MinGW\bin" 
```

# sql-server - 知道如何从以下值中获取名称吗？

> ID：12666569
> 
> 赞同：-2
> 
> 时间：2012-10-01T01:24:16.027
> 
> 标签：sql-server, sql-server-2008

我们有一个表，其中只有一个名为 Names 的字段名。

有几行与此字段名关联的长值。

下面是每行值可能有多长的示例。

```
Names

0000000024DOE JAMES JAN E102/02/1988107/11/2007 13011UNASSIGNED EMPLOYEEID 0175420670 3303302 - DY1 B100 1000 - 07/11/2007 0000028800 0000040849 0000173045 0000021600 
etc
etc 
```

是否可以只从类似于上面的列表中提取名称？

例如，我们想提取 DOE JAN 而忽略其余的值。

有时，名字有一个中间的首字母。

例子：

```
0000000024DOE JAMES JAN E102/02/1988107/11/2007 13011UNASSIGNED EMPLOYEEID 0175420670 3303302 - DY1 B100 1000 - 07/11/2007 0000028800 0000040849 0000173045 0000021600 
```

在此示例中，我们要提取的值是 Doe Jan E。

如果可能的话，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T02:13:25.240

假设名称从位置 11 开始，并以 3 个数字和一个斜杠结尾，以下应该为您完成。

```
SUBSTRING(Names, 11, PATINDEX('%[0-9][0-9][0-9]/%', Names) - 11) 
```

PATINDEX 基于通配符模式返回位置。

# three.js - 如何使用 Threejs 更改对象的 zOrder？

> ID：12666570
> 
> 赞同：31
> 
> 时间：2012-10-01T01:24:20.947
> 
> 标签：three.js

我使用 webgl 渲染器制作了一个场景，在其中放置了多个可以选择和移动的 3D 对象。However when an object is selected, I'd like to draw its axes. 将线条绘制到对象的中心没有问题，但我希望它们出现在场景中其他任何东西的前面，这样即使其他对象在前面，它们也是可见的 - 就像在 Blender 中一样。

我尝试使用 renderDepth 参数，但我认为我不了解如何使用它并且我没有得到任何结果。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-10-01T02:39:40.427

如果您希望某些对象“在顶部”或“在前面”渲染，一个技巧是创建两个场景——第一个场景是您的常规场景，第二个场景包含您想要在顶部放置的对象。

首先，设置

```
renderer.autoClear = false; 
```

然后创建两个场景

```
var scene = new THREE.Scene();
var scene2 = new THREE.Scene(); 
```

像往常一样将您的对象添加到第一个场景中，然后将您想要的对象添加到第二个场景中。

然后，在您的`render()`函数中，执行以下操作：

```
renderer.clear();
renderer.render( scene, camera );
renderer.clearDepth();
renderer.render( scene2, camera ); 
```

这将渲染第一个场景，清除深度缓冲区，然后在顶部渲染第二个场景。

这是一个小提琴：http: [//jsfiddle.net/d9Lzdkkr/](http://jsfiddle.net/d9Lzdkkr/)

* * *

编辑：另一种解决方案是只有一个场景，但使用这种模式：

```
mesh.renderOrder = 999;
mesh.onBeforeRender = function( renderer ) { renderer.clearDepth(); }; 
```

如果网格具有单一材质，它将在“顶部”渲染。

三.js r.85

# javascript - 为什么这个关闭会使浏览器崩溃？

> ID：12666574
> 
> 赞同：0
> 
> 时间：2012-10-01T01:25:17.807
> 
> 标签：javascript

我正在编写一个看起来像这样的闭包：

```
(function(){

   var OutterScope = 1;

   (function RunThisLoop() {

      OutterScope++;
      console.log(OutterScope);

      setInterval(RunThisLoop, 1000);

   })();

})(); 
```

​<strong>这里是[jsfiddle](http://jsfiddle.net/vMHdD/)。问题是控制台输出似乎关闭：它应该每秒更新一次，但它似乎每秒更新超过一秒，然后最终导致浏览器崩溃。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T01:27:22.477

`RunThisLoop`可能由于一次又一次地调用和设置间隔而耗尽资源......

您可能想要`setTimeout`改为或`setInterval`移动`RunThisLoop`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T01:28:20.593

每次运行该函数时，都会添加更多计划的间隔计时器。最终它们滚雪球并消耗所有 CPU 资源。

这是修复它的最佳方法（几乎没有`setInterval()`可以在没有 的情况下使用的场景`clearInterval()`）：

```
(function(){

   var OuterScope = 1;
   var myInterval = setInterval(RunThisLoop, 1000);

   function RunThisLoop() {

      OuterScope++;
      console.log(OuterScope);
      //stop clause 
      if (OuterScope > 10) clearInterval(myInterval);    
   };

})();​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T01:35:05.643

当您运行 RunThisLoop() 时，会创建一个上下文以包含其本地状态。
然后递归调用 RunThisLoop() 为新实例的本地状态创建一个新上下文。
然后递归调用 RunThisLoop() 为新实例的本地状态创建一个新上下文。
然后递归调用 RunThisLoop() 为新实例的本地状态创建一个新上下文。
然后递归调用 RunThisLoop() 为新实例的本地状态创建一个新上下文。
然后递归调用 RunThisLoop() 为新实例的本地状态创建一个新上下文。
然后递归调用 RunThisLoop() 为新实例的本地状态创建一个新上下文。
然后递归调用 RunThisLoop() 为新实例的本地状态创建一个新上下文。
然后递归调用 RunThisLoop() 为新实例的本地状态创建一个新上下文。
然后递归调用 RunThisLoop() 为新实例的本地状态创建一个新上下文。
然后递归调用 RunThisLoop() 为新实例的本地状态创建一个新上下文。
然后递归调用 RunThisLoop() 为新实例的本地状态创建一个新上下文。
……哎呀！堆栈溢出！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T02:05:23.367

已经回答了，这只是一个澄清：

通过使用`setInterval`您安排一组新的循环，并且由于您在循环内执行此操作，它会呈指数增长：每秒钟您的调用次数就会增加一倍：

1.  1
2.  2
3.  4
4.  8
5.  16
6.  32
7.  64
8.  128
9.  256
10.  512
11.  1 024
12.  2 048
13.  4 096
14.  8 192
15.  16 384
16.  32 768
17.  65 536
18.  131 072
19.  262 144
20.  524 288
21.  1 048 576
22.  2 097 152
23.  4 194 304
24.  8 388 608
25.  16 777 216
26.  33 554 432
27.  67 108 864
28.  134 217 728
29.  268 435 456
30.  536 870 912
31.  1 073 741 824
32.  2 147 483 648

# objective-c - NSNumber 保存双倍

> ID：12666578
> 
> 赞同：0
> 
> 时间：2012-10-01T01:26:14.177
> 
> 标签：objective-c, cocoa, core-data, osx-mountain-lion, nsnumber

考虑下面的三行代码

```
NSLog(@"start:%f", player.currentTime);
episode.resumeStamp = [NSNumber numberWithDouble:player.currentTime];
NSLog(@"end: %f", [episode.resumeStamp doubleValue]); 
```

`episode`是 NSManagedObject 的子类，而 player 是`AVAudioPlayer`. `player.currentTime`返回一个`NSTimeInterval`（双）。有人会认为当上面显示的代码运行时，“start:”和“end:”值将是相同的。奇怪的是，记录了以下内容......

```
2012-09-30 20:13:02.941 MyApp[473:303] start:3.809116
2012-09-30 20:13:02.942 MyApp[473:303] end: 0.000000
2012-09-30 20:13:03.941 MyApp[473:303] start:4.809048
2012-09-30 20:13:03.942 MyApp[473:303] end: 0.000000
2012-09-30 20:13:04.941 MyApp[473:303] start:5.809116
2012-09-30 20:13:04.942 MyApp[473:303] end: 0.000000 
```

任何想法为什么会发生这种情况？非常感谢您的参与！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T01:30:13.647

`episode`最有可能`nil`

只需将更新日志添加到

```
NSLog(@"end: %f\nepisode %@", [episode.resumeStamp doubleValue], nil); 
```

# uploadify - Uploadify - Cloudflare 的 IO 错误

> ID：12666579
> 
> 赞同：0
> 
> 时间：2012-10-01T01:26:16.653
> 
> 标签：uploadify

我正在使用 Uploadify 将视频上传到我的网站，并且运行良好。但是我的问题是 Uploadify 返回错误，当我使用 Cloudflare 时出现 IO-Error。有什么方法可以将 Uploadify 与 Cloudflare 一起使用？

我真的很喜欢 Cloudflare，因为我看到了一些性能改进，甚至当站点关闭时它们也会显示一条消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-23T21:05:43.573

Depending on your configuration of SSL it may happen, some upload scripts have problems with Self-signed certificates (in case you are using Full SSL configuration)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:50:48.897

帖子中可能没有足够的细节来真正提供帮助。您尝试[联系我们了](https://support.cloudflare.com/home)吗？

需要了解的有用信息： 1\. 是否发生任何 CloudFlare 错误消息？2\. 这发生在哪里（管理后端等）。3\. 该服务从（IP 地址）发出呼叫的位置。

注意：如果您知道他们的 IP，请尝试在 CloudFlare 威胁控制面板中将其列入白名单。

# java - Spring-Mvc - JdbcDaoSupport 错误

> ID：12666580
> 
> 赞同：2
> 
> 时间：2012-10-01T01:26:24.443
> 
> 标签：java, spring-mvc, annotations, jdbctemplate

我收到以下错误：

```
[C:\Users\Darin\apache-tomcat-6.0\webapps\crimeTrack\WEB-INF\classes\com\crimetrack\jdbc\JdbcCountryDAO.class]: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: 'dataSource' or 'jdbcTemplate' is required
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1206)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943)
    at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:778)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:504)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1385)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:306)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1389)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1653)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1662)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1642)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.IllegalArgumentException: 'dataSource' or 'jdbcTemplate' is required 
```

**jdbcDAOCountry.java**

```
@Repository
public class JdbcCountryDAO extends JdbcDaoSupport implements CountryDAO{

    private final Logger logger = Logger.getLogger(getClass());

    @Autowired
    private JdbcTemplate jdbcTemplate;  

    public List<Country> getCountryList() {
        int countryId = 6;
        String countryCode = "AI";
        logger.debug("In getCountryList()");
        String sql = "SELECT * FROM TBLCOUNTRY WHERE countryId = ? AND countryCode = ?";
        logger.debug("Executing getCountryList String "+sql);

        Object[] parameters = new Object[] {countryId, countryCode};

        logger.info(sql);

        //List<Country> countryList = getJdbcTemplate().query(sql,new CountryMapper());

        List<Country> countryList = getJdbcTemplate().query(sql, parameters,new CountryMapper());
        return countryList;
    }

    public void saveCountry(Country country) {
        logger.debug("In saveCountry");

        String sql= "INSERT INTO crimetrack.tblcountry (countryName, countryCode) " + 
                    "VALUES (:countryName, :countryCode)";

        logger.debug("Executing saveCountry String " + sql);
        int count = getJdbcTemplate().update(sql,new MapSqlParameterSource()

                .addValue("countryName", country.getCountryName())
                .addValue("countryCode", country.getCountryCode()));
        logger.debug(count +" Rows affected in tblCountry");

    }

    public void updateCountry(Country country) {
        logger.debug("In updateCountry");

        String sql= "UPDATE crimetrack.tblcountry SET countryName = :countryName, "+
                    "countryCode = :countryCode WHERE countryId = :countryId";

        logger.debug("Executing updateCountry String " + sql);
        int count = getJdbcTemplate().update(sql,new MapSqlParameterSource()
                .addValue("countryId",country.getCountryId())
                .addValue("countryName", country.getCountryName())
                .addValue("countryCode", country.getCountryCode()));
        logger.debug(count +" Rows affected in tblCountry");

    }

    public static class CountryMapper implements ParameterizedRowMapper<Country>{

         public Country mapRow(ResultSet rs, int rowNum) throws SQLException {
                Country country = new Country();
                country.setCountryCode(rs.getString("countryCode"));
                country.setCountryId(rs.getInt("countryId"));
                country.setCountryName(rs.getString("countryName"));
                return country;
            }       
    }

} 
```

**应用程序上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns:aop="http://www.springframework.org/schema/aop"
         xmlns:tx="http://www.springframework.org/schema/tx"
         xmlns:context="http://www.springframework.org/schema/context"

         xsi:schemaLocation="http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/aop 
           http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
           http://www.springframework.org/schema/tx 
           http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-3.0.xsd"> 

<!-- __________________________________________________________________________________________________ -->              

    <bean id="countryManager" class="com.crimetrack.service.CountryManager">
        <property name="countryDao" ref="countryDao"/>
    </bean>
    <bean id="countryDao" class="com.crimetrack.jdbc.JdbcCountryDAO">
        <property name="dataSource" ref="dataSource"/>
    </bean>
<!-- __________________________________________________________________________________________________ -->

    <bean id="authenticationManager" class="com.crimetrack.service.AuthenticationManager">
        <property name="loginDao" ref="loginDao" /> 
    </bean>    
    <bean id="loginDao" class="com.crimetrack.jdbc.JdbcLoginDAO">
        <property name="dataSource" ref="dataSource" />
    </bean>
<!-- __________________________________________________________________________________________________ -->  

    <bean id="divisionManager" class="com.crimetrack.service.DivisionManager">
        <property name="divisionDao" ref="divisionDao"/>
    </bean>    
    <bean id="divisionDao" class="com.crimetrack.jdbc.JdbcDivisionDAO">
        <property name="dataSource" ref="dataSource"/>
    </bean>

<!-- __________________________________________________________________________________________________ -->    

     <bean id="positionManager" class="com.crimetrack.service.PositionManager">
        <property name="positionDao" ref="positionDao"/>
    </bean>    
    <bean id="positionDao" class="com.crimetrack.jdbc.JdbcPositionDAO">
        <property name="dataSource" ref="dataSource" />
    </bean>    

<!-- __________________________________________________________________________________________________ -->    

    <bean id="genderManager" class="com.crimetrack.service.GenderManager">
        <property name="genderDao" ref="genderDao"/>
    </bean>

    <bean id="genderDao" class="com.crimetrack.jdbc.JdbcGenderDAO" >
        <property name="dataSource" ref="dataSource" />
    </bean>

<!-- __________________________________________________________________________________________________ --> 

    <bean id="officerRegistrationValidation" class="com.crimetrack.service.OfficerRegistrationValidation">

            <property name="validateUserNameManager" ref="validateUserNameManager"/>

    </bean>

    <bean id="validateUserNameManager" class="com.crimetrack.service.ValidateUserNameManager">
            <property name="officerDao" ref="officerDao"/>

    </bean>

    <bean id="officerDao" class="com.crimetrack.jdbc.JdbcOfficersDAO" >
            <property name="dataSource" ref="dataSource" />
    </bean>

<!-- __________________________________________________________________________________________________ --> 

    <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
        <property name="dataSource"><ref bean="dataSource" /></property>
    </bean>

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
            <property name="driverClassName" value="${jdbc.driverClassName}"/>
            <property name="url" value="${jdbc.url}"/>
            <property name="username" value="${jdbc.username}"/>
            <property name="password" value="${jdbc.password}"/>
    </bean>
<!-- __________________________________________________________________________________________________ -->    

    <bean id="propertyConfigurer" 
          class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>classpath:jdbc.properties</value>
            </list>
        </property>
    </bean>
<!-- __________________________________________________________________________________________________ -->    

    <bean id="transactionManager" 
          class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource"/>
    </bean>

  </beans> 
```

**servlet.xml**

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:mvc="http://www.springframework.org/schema/mvc"

       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                           http://www.springframework.org/schema/context
                           http://www.springframework.org/schema/context/spring-context-3.0.xsd
                           http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
                           http://www.springframework.org/schema/beans/spring-context-3.0.xsd">

<!-- __________________________________________________________________________________________________ -->    

     <!-- Supports annotations and allows the use of @Controller, @Required, @RequestMapping -->
    <context:annotation-config/>    

    <context:component-scan base-package="com.crimetrack.jdbc"/>
    <context:component-scan base-package="com.crimetrack.service"/>
    <context:component-scan base-package="com.crimetrack.web" />

    <mvc:annotation-driven /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T16:53:57.827

Ensure the `applicationContext.xml` has the bean `dataSource` defined.

The **DAO** should pass a constructor-arg and not a property since `dataSource` is a constructor-arg.

Annotate a constructor method and ensure it accepts a `dataSource`.

The dataSource passes is the same one defined in the `applicationContext.xml`:

```
 <bean id="countryDao" class="com.crimetrack.jdbc.JdbcCountryDAO">
     <constructor-arg index="0" ref="dataSource"/>
 </bean>

@Repository
public class JdbcCountryDAO extends JdbcDaoSupport implements CountryDAO {
    private final Logger logger = Logger.getLogger(getClass());

    @Autowired
    JdbcCountryDAO(DataSource dataSource) {
        setDataSource(dataSource);
    }

    public List<Country> getCountryList() { 
    // ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T01:43:30.433

错误是没有 dataSource 或 jdbcTemplate 连接到 JdbcCountryDao bean：

> java.lang.IllegalArgumentException：需要“dataSource”或“jdbcTemplate”

但是，您的 XML 配置显示您已发送数据源，那么您确定在使用文件的发布版本时会发生此错误吗？

此外，不需要`@Autowired jdbcTemplate`在扩展`JdbcDaoSupport`的类中声明 a，因为超类已经为您提供了这个。

# javascript - HTML 搜索表单允许立即输入文本

> ID：12666581
> 
> 赞同：-3
> 
> 时间：2012-10-01T01:26:28.937
> 
> 标签：javascript, html

> **可能重复：**
> [加载时聚焦输入框](https://stackoverflow.com/questions/4331022/focus-input-box-on-load)

我需要一个允许立即输入文本的 HTML 搜索表单。和谷歌一样。我们不需要点击将文本输入到搜索表单中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T01:43:08.587

您正在寻找的东西可以通过几种不同的方式来实现。最简单的方法是通过 jquery 的 AJAX POST。我给你举个小例子：

假设您的搜索输入具有名称属性，例如“关键字”

```
$(function(){  
  $("input[name='keywords']").keyup(function(){
    $(".search_results").slideUp("normal", function(){
      $.ajax({  
        type: "POST", url: "searchquery.php", 
        data: {keywords: $(this).val()},
        success: function(response){
          if(response != "error")
          {
            $(".search_results").html(response);
            $(".search_results").slideDown();
          }
          else
          {
            alert("Error Searching. Please refresh the page and try again.");
          }
        }
      });
    });
  });
}); 
```

然后您需要让 searchquery.php 处理搜索数据库并以 html 格式返回数据。也许是这样的：

```
if(trim($_POST["keywords"]) != "")
{
  $keywords = mysql_real_escape_string($_POST["keywords"]);

  //search the DB for maybe 5 top results and return them in something like a HTML list:
  $results = '<ul><li>first</li><li>second</li></ul>';

  die($results);
} 
```

您可以自行使用在其上定义的类“search_results”来格式化 div 或 HTML 对象。

另外，我建议添加一个计时器，以便每次点击“keyup”功能时，它都会记录时间并在允许下一次调用文件之前至少进行**_**时间。这样，当有人写 1 个单词时，PHP 文件不会被调用 5 次。

# entity-framework-4 - 在 EF 模型中手动加载关联

> ID：12666589
> 
> 赞同：0
> 
> 时间：2012-10-01T01:28:02.807
> 
> 标签：entity-framework-4

我需要使用参数化的表值函数来检索关联的数据（TVF 抽象了实际的数据库表），但想使用 EF 提供的所有好东西。因此，查看从 EDMX 生成的导航属性代码，我看到关系管理器包装了关联的人口等。

所以我的问题是：我可以从数据库中检索我需要的结果（通过 TVF）并将它们附加到上下文中，然后再生成对关系管理器的调用，并阻止 RM 本身访问数据库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T08:59:31.730

EF4 不支持 TVF。TVF 仅在 .NET 4.5 中可用，您可以在 Linq-to-entities 查询中使用它们。.NET 4.5 也默认使用现在强烈推荐的 POCO 实体`RelationshipManager`实体内部不使用这些实体（用于延迟加载的动态代理除外）。

# sitecore - 面向营销人员的 Sitecore Web 表单 2.3.0 - 发送带有附件的邮件

> ID：12666590
> 
> 赞同：1
> 
> 时间：2012-10-01T01:28:07.703
> 
> 标签：sitecore, attachment, sitecore6, web-forms-for-marketers

Sitecore (6.5.0 rev.120472) 的营销人员 Web 表单模块 (2.3.0 rev.120216) 遇到一些问题。

我已经设置了一个带有“已发送电子邮件”操作的表单。当表单没有“文件上传”字段时，表单发送正常。当它确实包含“文件上传”字段时，电子邮件将不会发送，并且我在日志文件中收到错误：

```
Parameter name: stream
Exception: System.ArgumentNullException
Message: Value cannot be null.
Parameter name: stream
Source: System
   at System.Net.Mime.MimePart.SetContent(Stream stream, String name, String mimeType)
   at System.Net.Mail.AttachmentBase..ctor(Stream contentStream, String name, String mediaType)
   at System.Net.Mail.Attachment..ctor(Stream contentStream, String name, String mediaType)
   at Sitecore.Form.Core.Pipelines.ProcessMessage.ProcessMessage.AddAttachments(ProcessMessageArgs args)
   at (Object , Object[] )
   at Sitecore.Pipelines.PipelineMethod.Invoke(Object[] parameters)
   at Sitecore.Pipelines.CorePipeline.Run(PipelineArgs args)
   at Sitecore.Pipelines.CorePipeline.Run(String pipelineName, PipelineArgs args,    String pipelineDomain, Boolean failIfNotExists)
   at Sitecore.Pipelines.CorePipeline.Run(String pipelineName, PipelineArgs args, String pipelineDomain)
   at Sitecore.Pipelines.CorePipeline.Run(String pipelineName, PipelineArgs args)
   at Sitecore.Form.Submit.SendMessage.ExecuteMail(ID form, AdaptedResultList fields)
   at Sitecore.Form.Submit.SendMail.Execute(ID formid, AdaptedResultList fields, Object[] data)
   at Sitecore.Form.Core.Submit.SubmitActionManager.ExecuteSaving(ID formID, ControlResult[] list, ActionDefinition[] actions, Boolean simpleAdapt, ID sessionID) 
```

想知道是否有人遇到过这个/知道解决方案？

提前致谢！

**更新：**发现提供“文件上传”字段不是必填字段，将其留空并提交表单时，电子邮件仍将发送。只有当用户使用“文件上传”字段时，它才会发送失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:20:53.393

我的第一个问题是问你要发送什么？首先要了解的是，在提交表单时有两种不同的“发送电子邮件”方式。一个是 Sitecore 附带的标准类型的开箱即用任务。另一个是使用电子邮件营销管理器模块的更强大的电子邮件。这有很大的不同，因为这两个发送任务处理构建电子邮件的方式非常不同，而且显然有问题，但是如果没有更多信息就不可能说。我必须查看更多关于您如何配置发送操作和一些日志文件的信息才能确定。

不过，如果由我决定，我也会通过 ECM 模块（如果你有的话）创建一个标准消息并使用它。正如我所说，它更强大，如果你想要的话，可以用一些额外的花里胡哨来做同样的事情。

# c# - 突出显示 Windows 8 TextBox 中的文本

> ID：12666592
> 
> 赞同：2
> 
> 时间：2012-10-01T01:28:18.520
> 
> 标签：c#, textbox, windows-8, windows-runtime

我正在寻找一种基于`Windows.UI.Xaml.Controls.TextBox`控件内的搜索词突出显示（而不是选择）单词的方法。

似乎没有任何方法可以覆盖文本呈现行为？这可以用文本框控件完成吗？

编辑：我最初试图使用 RichEditBox，但在粘贴我试图阻止的格式化文本时遇到了问题（我可以清除格式的唯一事件是 TextChanged，这似乎有点晚了）。我还真的需要更多地控制高光的渲染

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T02:05:08.533

文本框在格式和文本选择方面非常有限。

您可能希望使用 RichTextBox 控件而不是 TextBox，因为它为您提供了更大的选择和格式化功能，可以更轻松地突出显示多个术语。

这是一个快速入门： http: [//www.devx.com/dotnet/Article/34644](http://www.devx.com/dotnet/Article/34644)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:48:10.677

我有相同的问题。但万一你不知道，我还是会发布这个（这不是一个完整的答案，但可能会让你开始。）

您可以使用以下方法突出显示单词：

```
int indexOfFoundKeyword = 1;
int lastIndexOfFoundKeyword = 12;
txtbox.SelectionStart = indexOfFoundKeyword;
txtbox.SelectionLength = lastIndexOfFoundKeyword; 
```

如果将它放在按钮单击事件中，然后键入大约 20 个字符并单击按钮，您将看到可以突出显示 Metro 文本框中的单词。我遇到的问题是找到 found 关键字的开头和结尾，以便我知道要分配哪些值`SelectionStart`，`SelectionLength`如果我正确理解了您的问题，我认为这也是您遇到的问题。

# 更新

好的，这似乎有点喜怒无常，但大部分时间都有效。（并且在它起作用时准确）：

```
 // find the word 'jason'.
    string word = "jason";
    int a, b;
    a = genericBox.Text.IndexOf(word);
    b = word.Length;

    genericBox.SelectionStart = a;
    genericBox.SelectionLength = b; 
```

如果您要做的只是找到一些文本，然后选择它，那么这证明它可以完成。现在我知道这不是最好的方法，但这是我能够让这样的东西在 Metro 应用程序的纯 TextBox 中工作的唯一方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T05:45:54.023

也许您可以创建一个基于 TextBox 控件的控件，或者完全创建一个自定义控件。请参阅[此处](http://timheuer.com/blog/archive/2012/03/07/creating-custom-controls-for-metro-style-apps.aspx)和[此处](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh700391.aspx)获取更多帮助。

# jquery - 网站日历滑块

> ID：12666596
> 
> 赞同：1
> 
> 时间：2012-10-01T01:28:53.043
> 
> 标签：jquery, html, css, graphics, calendar

我想显示一个为期 3 天的活动的日历。我希望它看起来像这样： ![在此处输入图像描述](../Images/76248a10e061f73846f75e9c5d0e6214.png)

第 1 天、第 2 天、第 3 天是链接，单击时我希望日历像滑块一样滑动到下一个日历。我一直在网上搜索“html 网站日历显示”、“jquery 日历插件”等内容，但没有找到我想要的东西。我真的不明白我将如何实现这一点，这是纯 html+css 还是有 jquery？我在哪里可以找到一些演示/教程来设计和实施上述日历？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T02:10:11.600

新：**[jsBin 演示，在字段和弹出窗口中隐藏数据](http://jsbin.com/ukazom/8)**

## *[jsBin 演示](http://jsbin.com/ukazom/7/)*

**jQuery：**

```
var start_day = 0; // set your start day to show first!

$('.day').fadeTo(0,0.3).eq(start_day).fadeTo(0,1);
$('ul#calendar_navigation li').eq(start_day).addClass('active');

var calWidth = $('#calendar').width();

$('ul#calendar_navigation li').click(function(){

    $('ul#calendar_navigation li').removeClass('active');
    $(this).addClass('active');

    var thisIndex = $(this).index();

    $('.day').stop().fadeTo(300,0.3).eq(thisIndex).fadeTo(300,1);
    $('#days').stop().animate({left: '-'+calWidth*thisIndex },800);

}); 
```

**HTML：**

```
 <ul id="calendar_navigation">
      <li>Day 1</li>
      <li>Day 2</li>
      <li>Day 3</li> 
    </ul>

    <div id="days">

     <div class="day">
        <table>
          <thead>
            <tr>
              <th>Day 1 (oct 3)</th>
              <th>Big room</th>
              <th>Medium room</th>
              <th>Small room #1</th>
              <th>Small room #2</th>
              <th>Small room #3</th>
            </tr>
          </thead>
          <tbody>           
            <tr>
              <td>10:00</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>        
            <tr>
              <td>11:00</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>            
            <tr>
              <td>12:00</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>                            
          </tbody>
       </table>  
    </div>    
    <!-- -->
     <div class="day">
        <table>
          <thead>
            <tr>
              <th>Day 2 (oct 4)</th>
              <th>Big room</th>
              <th>Medium room</th>
              <th>Small room #1</th>
              <th>Small room #2</th>
              <th>Small room #3</th>
            </tr>
          </thead>
          <tbody>           
            <tr>
              <td>10:00</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>        
            <tr>
              <td>11:00</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>            
            <tr>
              <td>12:00</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>                            
          </tbody>
       </table>  
    </div>
   <!-- -->
     <div class="day">
        <table>
          <thead>
            <tr>
              <th>Day 3 (oct 5)</th>
              <th>Big room</th>
              <th>Medium room</th>
              <th>Small room #1</th>
              <th>Small room #2</th>
              <th>Small room #3</th>
            </tr>
          </thead>
          <tbody>           
            <tr>
              <td>10:00</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>        
            <tr>
              <td>11:00</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>            
            <tr>
              <td>12:00</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>                            
          </tbody>
       </table>  
    </div>      

    </div><!-- days -->

  </div>
  </div><!-- cal. wrapper --> 
```

**CSS：**

```
body{
  font-family:arial;
}
/* CALENDAR */
#calendar_wrapper{
  position:relative;
  margin:0 auto;
  width:100%;
  overflow:hidden;
}
#calendar{
  position:relative;
  margin:0 auto;
  width:800px;
}
ul#calendar_navigation{
  list-style:none;
  padding:0;
  font-size:30px;
  height:30px;
}
ul#calendar_navigation li{
  padding-right:30px;
  display:block;
  float:left;
  list-style:none; 
}
ul#calendar_navigation li.active{
  list-style:none; 
  border-bottom:5px solid #C5FF74;
}
#days{
  clear:both;
  position:relative;
  width:999999px;
}
.day{
  position:relative;
  float:left;
  left:0px;
  width:800px;
  box-shadow:0px 2px 4px #999;
}

#calendar table{
    font-size:13px;
    width:100%;
}

#calendar table tr th,
#calendar table tr td{
  vertical-align:middle;
  height:50px;
  width:15%;
  padding:1%;
}
#calendar table tr td{
  background-color:#C5FF74;
}

#calendar table tr{
  vertical-align:middle;
}

#calendar table tr td:first-child{
  width:140px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T01:32:30.603

我建议你看看[SlidesJS](http://slidesjs.com)。您将需要使用自定义分页。

# python - 生成斐波那契数时溢出错误“数值结果超出范围”

> ID：12666600
> 
> 赞同：8
> 
> 时间：2012-10-01T01:29:27.727
> 
> 标签：python, fibonacci

> **可能重复：**
> [在 Python 中处理非常大的数字](https://stackoverflow.com/questions/538551/handling-very-large-numbers-in-python)

我有一个 python 函数来生成斐波那契数：

```
def fib(n):                                                                                                            
        return ((1+math.sqrt(5))**n - (1-math.sqrt(5))**n)/(2**n*math.sqrt(5)) 
```

我可以提供高达 700 的 fib 函数编号，从那里开始

```
OverflowError: (34, 'Numerical result out of range') 
```

我需要使用像 long 这样的特殊类型来解决这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T02:17:38.180

问题是您使用双打来计算值并且双打溢出。双打只给出了大约第 85 个斐波那契数的精确解。

如果您想要快速准确的计算，最好使用基于更好递归关系的算法，并使用 python bignum 整数。

特别是您可以使用：

```
 fib(2*n) = fib(n)^2 + fib(n-1)^2
 fib(2*n-1) = fib(n)*(2*fib(n-1)+fib(n)) 
```

或等效的矩阵求幂公式（请原谅丑陋的格式）

```
 [ F_n     F_{n-1} ]      [ 1   1 ] ^N 
 [                 ]  =   [       ]
 [ F_{n-1} F_{n-2} ]      [ 1   0 ] 
```

这两种方法都导致算法需要`O(log(N))`计算而不是`O(N)`.

这是[伪代码的完整解决方案](https://stackoverflow.com/questions/1525521/nth-fibonacci-number-in-sublinear-time/1526036#1526036)

* * *

如果您确实想使用双精度数和显式公式执行计算，那么可以调整公式以提供更快的结果，直到大约第 1500 个斐波那契数时才会溢出，并且与您的版本保持相同的准确性。IIRC 它是：

```
def fib(n):                                                                                                            
    return round( ((1+math.sqrt(5))/2)**n / math.sqrt(5) ) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T01:39:02.133

很容易隔离错误

```
>>> (1+math.sqrt(5))**700
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
OverflowError: (34, 'Numerical result out of range') 
```

此方法效果不佳，因为浮点数没有足够的精度

例如，这里

```
>>> (1+math.sqrt(5))**600
1.024664165563927e+306 
```

您只使用前 15 位左右的数字。当您进行任何算术运算时，剩余的 291 将被视为零

[有关浮点数的准确性问题](http://en.wikipedia.org/w/index.php?title=Floating_point#Accuracy_problems)的更多信息，请参见[维基百科](http://en.wikipedia.org/w/index.php?title=Floating_point)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-01T01:43:52.353

您可以随时尝试这种方法：

```
def fib(n, memo={0:0, 1:1}):
    if n not in memo:
        memo[n] = fib(n-1) + fib(n-2)
    return memo[n]

print fib(800) 
```

输出：

> 69283081864224717136290077681328518273399124385204820718966040597691435587278383112277161967532530675374170857404743017623467220361778016172106855838975759985190398725

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-01T04:18:51.200

如果你真的想使用那个算法，并且你想超越内置的限制`float`，那么是的，你需要一个不同的类型。

如果您只想得到一个近似答案而不是异常，那很容易；您可以开箱即用地获得无限范围。但是，如果您还想消除舍入误差，则不能具有无限的精度（这将花费无限的时间/空间），因此您必须知道如何计算输入范围所需的精度。（我将把它作为练习留给读者。）

标准库类型`decimal.Decimal`可能就是您所需要的。它根据 IEEE-854 标准提供任意精度的定点或浮点十进制算法。在很多情况下它是不可用的，因为它没有提供足够的数学函数，但你只需要基本的算术和`sqrt`，就可以了。对于大数字来说，它也可能很慢，但如果你只想计算`fib`几个三位数，那就绰绰有余了。

不足时`Decimal`，还有很多第三方模块，通常封装了行业标准的 C 库，如 gmp/mpfr，如[bigfloat](http://packages.python.org/bigfloat/)。

以下是如何获得无限范围，但舍入误差与内置浮点数大致相同：

```
>>> s5 = decimal.Decimal(5).sqrt()
>>> def fib(n):
...     return ((1+s5)**n - (1-s5)**n)/(2**n*s5)
>>> fib(800)
Decimal('6.928308186422471713629008226E+166')
>>> int(fib(800))
69283081864224717136290082260000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000L
>>> s5 = bigfloat.sqrt(5)
>>> def fib(n):
...     return ((1+s5)**n - (1-s5)**n)/(2**n*s5)
>>> fib(800)
BigFloat.exact('6.9283081864226567e+166', precision=53)
>>> int(fib(800))
69283081864226566841137772774650010139572747244991592044952506898599601083170460360533811597710072779197410943266632999194601974766803264653830633103719677469311107072L 
```

但是请注意，如果您完美地完成了数学运算，这些实际上都不是您得到的答案；您因舍入错误而丢失了 24 位数字。（值不同的原因是以`bigfloat`2 为底，以 10 为底四舍五入`decimal`。）

要解决这个问题，您需要更高的精度。所有库都提供了一些改变精度的方法；`bigfloat`有比大多数更方便的选择，但没有一个太繁琐：

```
>>> decimal.getcontext().prec = 300
>>> s5 = decimal.Decimal(5).sqrt()
>>> def fib(n):
...     return ((1+s5)**n - (1-s5)**n)/(2**n*s5)
>>> fib(800)
69283081864224717136290077681328518273399124385204820718966040597691435587278383112277161967532530675374170857404743017623467220361778016172106855838975759985190398725.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000048
>>> def fibp(n, p):
...     with bigfloat.precision(p):
...         s5 = bigfloat.sqrt(5)
...         return ((1+s5)**n - (1-s5)**n)/(2**n*s5)
>>> fibp(800, 125)
BigFloat.exact('6.92830818642247171362900776814484912138e+166', precision=125)
>>> int(fibp(800, 125))
69283081864224717136290077681448491213794574774712670552070914552025662674717073354503451578576268674564384721027806323979200718479461097490537109958812524476157132800L 
```

# java - 将对象添加到 ArrayList 并进行比较

> ID：12666603
> 
> 赞同：0
> 
> 时间：2012-10-01T01:30:13.127
> 
> 标签：java

我创建了一个数组列表，我需要创建一个新对象并将该对象的属性与数组中其他元素的属性进行比较。如果我的arraylist 是array，对象是object1，属性是item，那么示例代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T01:33:36.540

仅凭您提供的信息很难回答这个问题，但您可能正在寻找这样的东西：

```
for (MyClass o : array) {
    if (o.item > object1.item) {  // or any other such comparison 
        ...  // do something
    }
} 
```

我们使用[for-each](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)`ArrayList`循环遍历您(named ) 的每个元素，并且在每次迭代中，我们比较with的元素。`array``array``object1`

**编辑**根据 OP 的评论，可以尝试这样的事情：

```
for (int i = 0 ; i < array.size() ; i++) {
    if (object1.attribute < array.get(i).attribute) {
        array.add(object1); 
    } 
} 
```

或者，更简洁：

```
for (MyClass o : array) {
    if (object1.attribute < o.attribute) {
        array.add(object1);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T01:50:23.393

我要做的是创建一个新对象，并使用该对象来填充 Arraylist。像这样

```
public class MyElement {
    int attr1;
    String attr2;
    public MyElement(int attr1, String attr2) {
        // do stuff to store these attributes.
    }
    public boolean isEqual(MyElement comparisonElement) {
        // compare attributes
        if (this.attr1 == comparisonElement.attr1 && this.attr2 = comparisonElement.attr2) {
            return true;
        }
        return false;
    }
} 
```

在您的另一类中，包含数组列表并希望进行比较的类

```
// create arraylist
ArrayList<MyElement> alme = new ArrayList<MyElement>()
// do loop and comparison(s) 
```

# java - UnicastRemoteObject.exportObject(this, 0);

> ID：12666605
> 
> 赞同：2
> 
> 时间：2012-10-01T01:30:22.023
> 
> 标签：java, rmi

我不太明白什么

```
UnicastRemoteObject.exportObject(this, 0); 
```

是为了。是在rmi服务器上注册一个对象还是什么。希望有人能给我一些光明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T01:40:33.867

从**[开始使用 Java RMI](http://docs.oracle.com/javase/1.5.0/docs/guide/rmi/hello/hello-world.html)**

> 静态方法 UnicastRemoteObject.exportObject 导出提供的远程对象以接收匿名 TCP 端口上的传入远程方法调用，并返回远程对象的存根以传递给客户端。作为 exportObject 调用的结果，运行时可能会开始侦听新的服务器套接字，或者可能使用共享服务器套接字来接受远程对象的传入远程调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-30T17:59:39.997

端口 0 意味着它将为 RMI 服务端口选择一个随机可用端口。如果您在防火墙/NATted 环境中工作，这可能是一个问题，这需要您在客户端和 RMI 服务器之间打开一个端口，因此您可以指定除 0 以外的其他值。

# entity-framework - 如何使用 Entity Framework 5 将我的 PICO 类与我的数据库中的特定表相关联

> ID：12666608
> 
> 赞同：1
> 
> 时间：2012-10-01T01:31:00.183
> 
> 标签：entity-framework

我的数据库中有一个表（多对多表），两个类 A 和 B 像这样创建。

```
 this.HasMany(t => t.TrafficImageQuestions)
       .WithMany(t => t.TrafficImages)
        .Map(m =>
            {
                m.ToTable("TrafficImage_Answers");
                m.MapLeftKey("TrafficImagesGuid");
                m.MapRightKey("TrafficImageQuestionsId");

            }); 
```

现在我想将我的自定义类关联到同一张表“TrafficImage_Answers”，该类关闭原因有左右键，然后还有一个 3\. 自定义属性。

（我确实将该列添加到数据库“答案”）

```
 public class TrafficImageAnswer
    {
        public System.Guid TrafficImageGuid { get; set; }
        public int TrafficImageQuestionId { get; set; }
        public byte Answer { get; set; }
    } 
```

我这样做是因为我希望实体模型跟踪我的 A 和 B 的多对多关系，并且仍然能够查找数据库中的 3\. 属性答案。

**我试过的**

我尝试执行以下操作：

```
 this.Property(t => t.TrafficImageQuestionId)
        .HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);
    this.Property(t => t.TrafficImageGuid)
        .HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);

    // Table & Column Mappings
    this.ToTable("TrafficImage_Answers"); 
```

但我知道该表已经存在，逻辑。我需要告诉它它应该使用该表而不是尝试创建它。（我在 EF 5 和包管理器中使用 DB 缓解来执行此操作）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T08:52:40.530

这是不支持的。如果您想在联结表中为多对多关系添加其他字段，则不能再将其映射为多对多。每个表只能映射一次，但同时将表映射到实体和多对多关系会使其映射两次。

您必须更改您的`TrafficImageQuestions`and`TrafficImages`以使用一对多关系`TrafficImageAnswer`而不是彼此之间的多对多关系。

# php - 通过php在javascript中回显html标签

> ID：12666609
> 
> 赞同：0
> 
> 时间：2012-10-01T01:31:23.840
> 
> 标签：php, javascript, html, firebug

我有一个神秘的问题。我有一个这样的 php 语言数组：

```
$lang['tip1054'] = '<b>Resource Error:</b>%s <br />
<b>OS:</b> %s <br />
<b> Ram:</b> %s <br />
<b> CPU:</b> %s <br />
'; 
```

我将在由 javascript 编写的工具提示中显示它，该函数的使用如下：

```
<span class='haveHelp' onMouseOver="ShowTip(' <?php printf ($lang['tip1054'],$error,$os,$ram,$cpu); ?> ')"> </span> 
```

但它什么也没显示。我用萤火虫看看是什么问题。遇到这个错误：

```
SyntaxError: unterminated string literal
[Break On This Error] 

ShowTip('<b>Resource Error:</b> 1054 
```

这是 HTML 输出：

```
<span class='haveHelp' onMouseOver="ShowTip('<b>Resource Error:</b>1054 <br />
<b>OS:</b> Windows Xp <br />
<b> Ram:</b> 1024MB <br />
<b> CPU:</b> Corei7-5130 <br />')">Error 1054</span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T01:33:40.720

JavaScript 中的字符串不能有换行符。`str_replace("\n", '', $lang...)`使用 PHP或其他东西将它们剥离出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T01:35:50.980

A. 你应该替换，因为你的`printf`论点不完整`4` `%s``$lang['tip1054']`

```
printf ($lang['tip1054'],$os,$ram,$cpu); 
```

和

```
printf ($lang['tip1054'],"Fist Message", $os,$ram,$cpu); 
```

B. 你应该删除所有的空格和换行符

```
$lang['tip1054'] = trim($lang['tip1054']);
$lang['tip1054'] = str_replace(array("\r","\n"), "", $lang['tip1054']); 
```

[看演示](http://codepad.viper-7.com/nj0b3m)

# javascript - Javascript 以零结尾（固定小数位数）

> ID：12666617
> 
> 赞同：2
> 
> 时间：2012-10-01T01:32:39.667
> 
> 标签：javascript, numbers, rounding

我使用 javascript`round`来舍入数字。但是当值是`$106.70`输出时只显示`$106.7`并且它缺少最后一个`0`。如何为以零结尾的数字添加零，或者有没有比使用 if else 更简单的方法来检查这个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T01:38:43.743

您可以使用以下[`.toFixed`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)方法：

```
var n = 106.72; console.log(n.toFixed(2)); //=> '106.72'
var n = 106.70; console.log(n.toFixed(2)); //=> '106.70'
var n = 106.7; console.log(n.toFixed(2)); //=> '106.70'
var n = 106; console.log(n.toFixed(2)); //=> '106.00' 
```

它四舍五入：

```
var n = 106.76; console.log(n.toFixed(1)); //=> '106.8' 
```

# python - HTML 输出问题

> ID：12666618
> 
> 赞同：2
> 
> 时间：2012-10-01T01:32:43.060
> 
> 标签：python, html, google-app-engine, jinja2

我正在用谷歌应用引擎中的 python 和 jinja2 编写一个网站。我的 html 页面在页面上显示了这个：

```
Status: 200
Content-Type: text/html;
charset=utf-8
Cache-Control: no-cache
Content-Length: 432 
```

知道这个问题来自哪里吗？另外，为什么 {{ initial_city }} 不显示结果？

我的 main.py 脚本是：

```
from google.appengine.ext import db
from google.appengine.api import memcache
from models import Deal
import os
import webapp2
import jinja2

#databasestuff
deal = Deal(title='Hello',
        description='Deal info here',
        city='New York')
deal.put()
print deal

jinja_environment = jinja2.Environment(autoescape=True,
    loader=jinja2.FileSystemLoader(os.path.join(os.path.dirname(__file__), 'templates')))

class MainPage(webapp2.RequestHandler):
def get(self):
    template = jinja_environment.get_template('index.html')
    self.response.out.write(template.render())

class DealHandler(webapp2.RequestHandler):
def get(self):
    def get_deals(choose_city, update=False):
        key = str(choose_city)
        all_deals = memcache.get(key)
        return all_deals

    choose_city = self.request.get('c')
    try:
        initial_city = str(choose_city)
        choose_city = initial_city
    except ValueError:
        initial_city = 0
        choose_city = initial_city

    template = jinja_environment.get_template('deal.html')
    self.response.out.write(template.render())

class ContentHandler(webapp2.RequestHandler):
def get(self):
    template = jinja_environment.get_template('content.html')
    self.response.out.write(template.render())

app = webapp2.WSGIApplication([('/', MainPage),
                           ('/deal', DealHandler),
                           ('/content', ContentHandler)],
                          debug=True) 
```

我的html页面：

```
<!DOCTYPE html>
<html>
  <head>
    <title>
      Deallzz: Chosen City: {{ initial_city }}
    </title>
  </head>
  ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T02:02:50.903

要显示 initial_city，请使用 render 方法将变量传递给模板：

`self.response.out.write(template.render(initial_city = initial_city))`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T01:56:08.870

它是导致问题的“打印交易”。它在任何 response.write 之前被输出

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T01:35:56.880

这只是 HTML 页面的[标题](http://en.wikipedia.org/wiki/HTTP_header)。您应该提供更多关于您现在正在尝试的信息/代码。

# javascript - 需要点击链接的属性，使用 LocalScroll 插件

> ID：12666619
> 
> 赞同：0
> 
> 时间：2012-10-01T01:33:17.240
> 
> 标签：javascript, jquery, scrollto

我正在使用 ScrollTo 和 LocalScroll 插件。基本上我只想确定单击的链接是否添加了特定的类。我知道如何正常执行此操作，但是如果可能的话，我想在调用插件时在 onBefore 函数中执行此操作。我已经尝试使用锚关键字访问它，但到目前为止我还没有到任何地方。

这是功能：

```
$.localScroll({
      duration:800,
      onBefore:function( e, anchor, $target ){

      }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T02:38:04.050

尝试这个

```
$.localScroll({
  duration:800,
  onBefore:function( e, anchor, $target ){
    if ($(ancor).hasClass('your_class')) {
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T01:44:38.467

```
if ($(this).hasClass('className')) {
    //Code
} 
```

应该有帮助

# regex - 用于 Eclipse 搜索的 RegEx 表达式可以找到一个单词的出现而没有另一个单词？

> ID：12666625
> 
> 赞同：1
> 
> 时间：2012-10-01T01:33:56.447
> 
> 标签：regex, eclipse, aptana

我需要想出一个适用于 Eclipse 搜索的 RegEx 表达式。

它需要找到每一个没有“jsSrc”的“脚本”。

我试过这些没有运气（使用负前瞻和后视）

```
 (?!jsSrc)script(?<!=jsSrc) 
```

不匹配这个：

```
 <script type="text/javascript" src="<% { out.print( jsSrc( request, "/config/pop.config.jsp" ) ); } %>"></script> 
```

但会匹配这个：

```
 <script type="text/javascript" src="/config/pop.config.jsp"></script> 
```

在 Eclipse IDE 搜索中使用的最佳表达式是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T02:24:17.693

试试这个：

```
<script(?!.*jsSrc) 
```

如果后面没有包含“jsSrc”的文本，它将匹配“<script”。

或者，这将匹配整行：

```
<script(?!.*jsSrc).*$ 
```

这是我使用的测试数据：

```
1: <script src="jsSrc"></script>
2: <script src="something else"></script>
3: <script src="something else jsSrc"></script>
4: <script src="jsSrk"></script>
5: <script src="gsSrc"></script> 
```

只有第 2、4 和 5 行使用这些表达式匹配。请注意，我只用单行表达式测试了这个，而不是多行表达式。

# asp.net - 向 ListItem 添加属性，而不是呈现样式

> ID：12666628
> 
> 赞同：1
> 
> 时间：2012-10-01T01:34:37.223
> 
> 标签：asp.net, css, checkboxlist

我在下面的页面上有一个复选框列表。

```
 <asp:CheckBoxList runat="server" ID="lstFeatures" RepeatDirection="Vertical"></asp:CheckBoxList> 
```

后端代码看起来像这样。

```
 private void MakeRegionCheckboxes(ReportRegion region, int margin)
    {
        foreach (ReportRegion subregion in region.childRegions)
        {
            ListItem item = new ListItem();
            item.Text = subregion.Name;
            item.Value = subregion.Name;
            item.Selected = subregion.DefaultSelection;
            item.Attributes.Add("style", "margin-left:" + margin.ToString() + "px");
            lstFeatures.Items.Add(item);

            MakeRegionCheckboxes(subregion, margin + 30);
        }
    } 
```

当它在一个空白项目上运行时，它会很好地缩进“子区域”，因为 style:margin-left:30px 在跨度中呈现，如您所见。

```
<td>
  <span style="margin-left:30px">
  <input id="lstFeatures_1" type="checkbox" checked="checked" name="lstFeatures$1">
  <label for="lstFeatures_1">Member Information</label>
  </span>
</td> 
```

但是，当我在主项目中运行**相同**的代码时，它不会呈现跨度，因此没有设置边距。我得到的只有这个。

```
<td>
   <input id="ctl00_pg_BuildReport_lstFeatures_1" type="checkbox" checked="checked" name="ctl00$pg$BuildReport$lstFeatures$1">
   <label for="ctl00_pg_BuildReport_lstFeatures_1">Member Information</label>
</td> 
```

这两个项目（3.5）的框架相同，唯一的区别是主项目有一个母版页，也许还有一些额外的面板，但我只是想知道什么会阻止渲染的跨度？任何帮助都会很有用。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T02:14:25.303

试试这个，看看有没有效果：

```
item.Attributes.CssStyle.Add("margin-left", String.Format("{0}px", margin)); 
```

# asp.net - ASP.NET 不一致的 PDF 文件下载结果

> ID：12666633
> 
> 赞同：1
> 
> 时间：2012-10-01T01:35:30.403
> 
> 标签：asp.net, pdf, browser, download

我正在开发一个包含树视图的 ASP.NET (3.5) 网站；节点的值设置为 PDF 文件的文件路径（在服务器上）。当用户点击树节点时，服务器端代码获取节点值（文件路径），创建一个 FileInfo 对象，并（在正确设置所有标头 Content-type、Cache-Control 等后）调用 Response.TransmitFile( xxxxpath) 发送到用户的浏览器。

这适用于主流浏览器、主要设备（PC、Mac、iOS 设备）。该文件正确下载并在用户的机器上打开。但在某些设备和某些浏览器上，无法打开 PDF 文件。在 Android 设备上，Firefox 似乎可以正确下载并打开 PDF，但普通的 Android 浏览器不能。在 Kindle Fire 上，Silk 浏览器似乎成功下载了文件，但是在尝试打开它时，我看到一个错误：“找不到 PDF 预告片”......或者它说 PDF 受 DRM 保护（它是不是）。我还没有在 Fire 上尝试过其他浏览器（如果有的话）。

我已经尝试在静态 HTML 标记中使用锚链接，当以这种方式访问​​时，问题浏览器似乎可以正确下载和显示 PDF。当通过代码完成时，ASP.NET 向浏览器发送响应的方式似乎存在问题（不一致？）。我使用过 Response.Flush、Response.WriteFile、Response.BinaryWrite、Response.Close、Response.End 等，它们都产生相同的结果：大多数浏览器处理文件，但有些浏览器无法处理 PDF。

那么，ASP.NET 构造某些浏览器不喜欢的 Response 对象（尤其是在发回 PDF 时）的方式是否存在一些问题？TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T02:03:37.137

很简单，您的问题的答案是“否”。如果您对自己的操作是否正确有疑问，您可能需要发布您的代码；否则：“不”。:)

我认为您提到的浏览器比写入响应流这样简单和成熟的浏览器更令人怀疑。

作为参考，这是我使用 iHttpHandler 进行的一种经过验证的真实方法：

```
 public void ProcessRequest(System.Web.HttpContext context)
    {
        string sFilePath = context.Server.MapPath(String.Concat("~/App_LocalResources", context.Request.QueryString["path"]));
        try
        {
            context.Response.Clear();
            context.Response.ContentType = "application/octet-stream";

            int iReadLength = 16384;
            int iLastReadLength = iReadLength;
            byte[] buffer = new byte[iReadLength];
            if (System.IO.File.Exists(sFilePath))
            {
                System.IO.FileInfo fInfo = new System.IO.FileInfo(sFilePath);
                context.Response.AddHeader("Content-Length", fInfo.Length.ToString());
                context.Response.AddHeader("Content-Disposition", String.Format("attachment; filename=\"{0}\"", fInfo.Name));
                using (System.IO.FileStream input = new System.IO.FileStream(sFilePath, System.IO.FileMode.Open, System.IO.FileAccess.Read))
                {
                    try
                    {
                        while (iLastReadLength > 0 && context.Response.IsClientConnected)
                        {
                            iLastReadLength = input.Read(buffer, 0, iLastReadLength);

                            if (iLastReadLength > 0)
                            {
                                context.Response.OutputStream.Write(buffer, 0, iLastReadLength);
                                context.Response.OutputStream.Flush();
                            }
                        }
                        context.Response.Flush();
                    }
                    catch
                    {
                    }
                    finally
                    {
                        input.Close();
                    }
                }
            }
        }
        catch
        {
        }
        finally
        {
        }
    } 
```

由于您已经表明您正在从另一个地方提取文件，因此这里是如何将其写入内存流的方法。只需从远程服务器（或文件流，Sql Binary Reader，w/e）中提取您的响应流，然后重置您的 MemoryStream 位置，然后使用上面的功能将您的响应流写入客户端。

```
int iReadLength = 16384;
long lLastReadLength = iReadLength;
long lDataIndex = 0;
byte[] buffer = new byte[iReadLength];
using (System.IO.MemoryStream msTemp = new System.IO.MemoryStream())
{
    while (lLastReadLength > 0)
    {
        lLastReadLength = reader.GetBytes(0, lDataIndex, buffer, 0, iReadLength);
        lDataIndex += lLastReadLength;

        if (lLastReadLength > 0)
        {
            msTemp.Write(buffer, 0, Convert.ToInt32(lLastReadLength));
            msTemp.Flush();
        }
    }

    // Reset Memory Position
    msTemp.Position = 0;

    // Now write to the Response Stream here
} 
```

# java - 当多个模块使用同一个jar时如何克服jar依赖地狱？

> ID：12666637
> 
> 赞同：2
> 
> 时间：2012-10-01T01:36:08.590
> 
> 标签：java, android, build, jar, intellij-idea

我有一个包含多个模块的 Android 项目。这些都是 Git 子模块，其中有几个是用相同的 jar 打包的（android support v4、Guice、Roboguice 等）。我的主项目也有这些相同的依赖项，所以我有这些 jar 的三个副本，一个在我的项目中，一个在两个子模块中的每一个中。

当我构建时，它在 dex 阶段失败，抱怨已经添加了某些类。我可以解决这个问题，通过从所有模块中删除 jars，除了一个，然后将依赖项指向那个位置，但感觉很脏。一定有更好的方法。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T01:40:09.967

使用像 Maven 或 Ivy 这样的构建工具来为您管理依赖项，因此您不必将 JAR 签入您的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T01:46:36.833

你在使用 Eclipse ADT 吗？如果是这样，这个问题已经用最新的 ADT 解决了。旧的曾经有你描述的问题，但新的应该可以工作。查看此链接了解详情： [http ://tools.android.com/recent/dealingwithdependenciesinandroidprojects](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)

# objective-c - 如何在 Xcode 的属性构建器中使用自定义字体

> ID：12666638
> 
> 赞同：4
> 
> 时间：2012-10-01T01:36:19.587
> 
> 标签：objective-c, xcode

有人可以概述在 Xcode 的属性构建器中使用自定义字体的过程吗？我希望使用 .storybuild 文件（不使用代码）来创建具有自定义字体“Delicious”的 UILabel。我下载了 .otf 文件，将其添加到字体册中，将字体文件复制到 Xcode 中的项目文件夹中，将带有字体名称的“应用程序提供的字体”添加到 -file.plist。但我仍然看不到属性生成器下拉字体列表中的字体。我还需要做其他事情吗？

PS：我使用的是 Xcode 4.5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:26:32.253

我不相信您可以在界面生成器的下拉列表中显示自定义字体。IB 仅显示您所针对的设备操作系统上可用的字体。如果你想使用自定义字体，你必须在一些代码中设置它们。

[http://kgriff.posterous.com/45359635](http://kgriff.posterous.com/45359635)

# android - 如何在 android 系统构建中仅构建应用程序

> ID：12666645
> 
> 赞同：1
> 
> 时间：2012-10-01T01:39:33.203
> 
> 标签：android, android-build

我正在为 SDK 构建 Android 源代码。但是每当我在应用程序中更改某些内容时，我必须再次构建完整的源代码，这需要相当长的时间。

现在我想知道，有没有办法只构建 app 文件夹，以便只构建我的源代码中可用的应用程序？

由于某些限制，我无法在 Eclipse 中构建我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T02:23:00.290

您可以生成 jars 然后将它们用作应用程序中的库，而不是编译整个源代码吗？

# ada - Ada：“图像”属性的前缀必须是类型

> ID：12666649
> 
> 赞同：2
> 
> 时间：2012-10-01T01:41:10.987
> 
> 标签：ada

我正在尝试使用 Ada 打印从 Natural 派生的类；但是，我不断收到错误消息，`prefix of "image" attribute must be a type`. 谷歌显然对此错误一无所知。

这是产生此错误的简化代码：

```
with Ada.Text_IO;
use Ada.Text_IO;
with Layout; use Layout;
procedure temptest is
   term : Terminator_ID;
   begin
      term := Layout.Block_GetOpposite (1, Layout.REVERSED);
   Put_Line (Item => term'Image);
   end temptest; 
```

这是`Terminator_ID`我的`Layout`包中的定义：`type Terminator_ID is new Natural range 1 .. 40;`

是什么导致了这个错误，纠正它的适当方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T01:46:39.210

显然，将数字转换为字符串的语法是`Type_Name'Image(var_containing_value)`.

我将代码更改为：

```
with Ada.Text_IO;
use Ada.Text_IO;
with Layout; use Layout;
procedure temptest is
   term : Terminator_ID;
   begin
      term := Layout.Block_GetOpposite (1, Layout.REVERSED);
   Put_Line (Item => Terminator_ID'Image (term));
   end temptest; 
```

它现在编译得很好。

# mysql - mysql Left join，mysql做inner join？

> ID：12666654
> 
> 赞同：1
> 
> 时间：2012-10-01T01:42:38.823
> 
> 标签：mysql, left-join

我想做一个左连接但mysql只是做一个内连接？我的查询有什么问题？

```
select av.*, ap.* 
from tbl_available av 
left join tbl_appointment ap 
on av.avHours = ap.appointmenttime 
where av.avCalendarId = 2 
and (ap.calendarid = 2 or ap.calendarid= null)
and (ap.appointmentdate = "2012-10-01" or ap.appointmentdate = null)
and av.avDays = DayOfweek("2012-10-01")
order by avHours 
```

mysql只给那些有相应预约的avHours

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T01:45:29.227

由于这些条件：

```
and ap.calendarid = 2 
and ap.appointmentdate = "2012-10-01" 
```

您只选择`tbl_appointment`不是的行`null`。

如果这就是你想要的 - 将它们移动到左连接`ON`部分

# delphi - 为什么连接关闭时recv有时不返回？

> ID：12666657
> 
> 赞同：0
> 
> 时间：2012-10-01T01:43:36.080
> 
> 标签：delphi, return, winsock, recv

我有一个简单的 winsock 客户端/服务器应用程序。大多数情况下一切正常，但有时即使客户端应用程序终止，recv 也不会返回值。

引用 MSDN：

> 如果没有发生错误，recv 返回接收到的字节数，buf 参数指向的缓冲区将包含接收到的数据。如果连接已正常关闭，则返回值为零。否则，返回 SOCKET_ERROR 的值，并且可以通过调用 WSAGetLastError 检索特定的错误代码。

在没有与客户端连接的情况下，recv 永远不会返回并永远挂起的原因可能是什么？

相关服务器代码：

```
const
  BUFSIZE = 512;
var
  Sock: TSocket;
  I   : Integer;
  Buf : AnsiString;
begin
  repeat
    SetLength(Buf, BUFSIZE);
    //blocking call
    I := recv(Sock, Pointer(Buf)^, BUFSIZE, 0);
    if I > 0 then
    begin
      SetLength(Buf, I);
      //do s.th. with Buf
    end;
  until I <= 0; //Connection closed or error

  //Sometimes never here

  Synchronize(procedure
  begin
    FOnConnectionClosed(Self, Sock, WSAGetLastError);
  end);
end. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:08:05.650

`recv()`永远不会在正常断开连接（发送`FIN`数据包的连接）时阻塞。所以要么它实际上不是一个优雅的断开连接，要么你的阅读代码与你的套接字不同步，并且你实际上并没有从你认为你正在阅读的套接字中读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T02:53:16.750

'如果连接已经正常关闭' - 如果它没有正常关闭，（有人在客户端拔出网络电缆），服务器 recv() 调用将继续等待，很可能永远等待。您可以设置 KEEPALIVE 套接字选项，但默认情况下检测半开套接字需要很长时间，此外，KEEPALIVE 超时值是全局注册表值：（

您可以使用 SO_RCVTIMEO setsockopt() 选项在 recv() 上设置更小的每个套接字超时。您可以使用此超时来立即关闭您的套接字，或者，如果您的协议允许，向对等方发出某种轮询/回显请求以确保它仍然存在，如果发生另一个超时，则关闭套接字。

# linux - 比较输入和输出 - bash

> ID：12666662
> 
> 赞同：1
> 
> 时间：2012-10-01T01:44:18.473
> 
> 标签：linux, bash

假设我有一个输入文件和一个输出文件（test.in 和 test.out）和一个程序“./myprogram”，标准输入重定向到来自 test.in，并使用从标准输出中捕获的结果进行比较用 test.out

我该如何比较

我在想，

```
 if [ $(myprogram < test.in) == $(cat test.out) ] 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T01:46:26.580

使用`cmp`^†并指定`-`为要比较的文件之一，这告诉它使用标准输入。

```
if myprogram < test.in | cmp -s - test.out; then 
```

如果要在不创建临时文件的情况下比较两个命令的输出，请使用该`<(cmd)`功能。（在 中搜索“进程替换” `man bash`。）

```
if cmp -s <(myprogram < test1.in) <(myprogram < test2.in); then 
```

^†或者`diff`，如果您想知道有什么区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T01:56:14.740

我会使用差异。像这样的东西：

`if cat test.in | myprogram | diff - test.out`

# c++ - 函数签名、调用和定义的顺序

> ID：12666667
> 
> 赞同：0
> 
> 时间：2012-10-01T01:45:28.617
> 
> 标签：c++, function

我想问函数签名、调用和定义的顺序

比如，计算机看起来第一、第二和第三哪个

所以：

```
#include <iostream>
using namespace std;

void max(void);
void min(void);

int main() {

max();

min();

return;
}

void max() {

return;
}

void min() {

return;
} 
```

所以这就是我的想法，

计算机将转到 main 并查看函数调用，然后它会查看

函数签名，最后看定义。

这是正确的？

感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T02:12:43.860

您可能知道，编译器将程序转换为机器代码（通过几个中间步骤）。`main()`以下是在 Windows 8 上以调试模式在 Visual Studio 2012 上编译时的机器代码反汇编：

```
int main() {
00C24400  push        ebp                         # Setup stack frame
00C24401  mov         ebp,esp  
00C24403  sub         esp,0C0h  
00C24409  push        ebx  
00C2440A  push        esi  
00C2440B  push        edi  
00C2440C  lea         edi,[ebp-0C0h]              # Fill with guard bytes
00C24412  mov         ecx,30h                     
00C24417  mov         eax,0CCCCCCCCh  
00C2441C  rep stos    dword ptr es:[edi]  

max();
00C2441E  call        max (0C21302h)              # Call max  

min();
00C24423  call        min (0C2126Ch)              # Call min

return 0;
00C24428  xor         eax,eax  
}
00C2442A  pop         edi                         # Restore stack frame    
00C2442B  pop         esi  
00C2442C  pop         ebx  
00C2442D  add         esp,0C0h  
00C24433  cmp         ebp,esp  
}
00C24435  call        __RTC_CheckEsp (0C212D5h)   # Check for memory corruption
00C2443A  mov         esp,ebp  
00C2443C  pop         ebp  
00C2443D  ret 
```

确切的细节会因编译器和操作系统而异。如果 min() 或 max() 有参数或返回值，它们将根据体系结构适当地传递。关键是编译器已经计算出参数和返回值是什么，并创建了只传递或接受它们的机器代码。

如果您希望帮助调试或进行低级调用，您可以了解更多详细信息，但请注意发出的机器代码可能是高度可变的。例如，这是在同一系统上以发布模式编译的相同代码（即优化）：

```
return 0;
01151270  xor         eax,eax  
}
01151272  ret 
```

如您所见，它已检测到这一点`min()`并且`max()`什么都不做并完全删除它们。由于现在没有要设置和恢复的堆栈帧，那已经消失了，只剩下一条指令将 eax 设置为 0 然后返回（因为返回值在 eax 寄存器中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T02:45:39.087

> 这是正确的？

不。

你需要了解函数声明和函数定义的区别，编译、链接和执行的区别，以及非虚函数和虚函数的区别。

**函数声明**
这是一个函数声明：`void max(void);`. 它不会告诉编译器有关函数的作用的任何信息。它的作用是告诉编译器如何调用函数以及如何解释结果。当编译器在编译某个函数的主体时，称之为函数A，编译器不需要知道其他函数是做什么的。它只需要知道如何处理函数 A 调用的函数。编译器可能会生成与您的 C++ 函数调用相对应的汇编代码或某种中间语言代码。或者它可能会拒绝您的 C++ 代码，因为您的代码没有意义。

确定您的代码是否有意义是这些函数声明的另一个关键目的。这在多个函数可以具有相同名称的 C++ 中尤为重要。如果编译器不知道这些函数，它如何知道要调用半打左右的函数中的`max`哪一个？当您的 C++ 代码调用某个函数时，编译器必须找到与这些函数声明之一的最佳匹配（可能涉及类型转换）。如果编译器根本找不到匹配项，或者它找到多个匹配项但无法将一个匹配项区分为最佳匹配项，则您的代码没有意义。

当编译器确实找到最佳匹配时，生成的代码将以调用该函数的未定义外部引用的形式出现。该函数所在的位置不是编译器的工作。

**函数定义**
那`void max(void)`是一个函数声明。对应`void max() {...}`的是该函数的*定义*。当编译器正在处理`void max() {...}`它时，它不必担心其他函数调用了它。它只需要担心处理`void max() {...}`。这个函数的主体变成了汇编或中间语言代码，插入到某个编译的目标文件中。编译器将这个生成代码的入口点的地址标记为这样。

**编译与链接**
到目前为止，我已经讨论了编译器的作用。它会生成与您的 C++ 代码相对应的低级代码块。由于这些外部引用，生成的代码还没有准备好迎接黄金时段。解决那些未定义的外部引用是链接器的工作。链接器是从多个目标文件、多个库构建可执行文件的工具。它跟踪将这些代码块放在可执行文件中的位置。那些未定义的外部引用呢？如果链接器已经将该引用放置在可执行文件中，则链接器只需填写该引用的占位符。如果链接器没有遇到该引用的定义，它会将引用和占位符放在仍然未解析的引用列表中。每次链接器向可执行文件添加一段代码时，它检查该列表以查看它是否可以修复任何那些仍未解决的引用。最后，您要么解决了所有参考文献，要么仍然有一些未完成的参考文献。后者是一个错误。前者意味着你有一个可执行文件。

**执行**
当你的代码运行时，这些函数调用实际上只是一些堆栈管理，它包裹在机器语言中，相当于那个邪恶的`goto`语句。无需检查您的函数声明；这些甚至在代码执行时都不存在。返回？那也是一个`goto`。

**非虚拟与虚拟功能**
我上面所说的与非虚拟功能有关。虚拟功能确实发生了运行时调度。运行时分派与检查函数声明无关。这些虚拟功能可能是另一个问题的问题。

**最后一件事：**
摆脱将`using namespace std;`其视为类似于吸烟的习惯。这是一个坏习惯。

# java - 从另一个类中的对象数组中访问单个对象

> ID：12666671
> 
> 赞同：1
> 
> 时间：2012-10-01T01:45:42.377
> 
> 标签：java, oop

好的，所以我有一个名为 MonthlyReport 的驱动程序类，它从 2 个不同的 .dat 文件中读取数据，一个包含有关帐户的信息，另一个包含有关客户的信息。在我的驱动程序类中，我创建了 2 个对象数组，分别存储有关帐户和客户的信息。问题是，一旦我将客户数据发送到客户类，我不确定如何指定每个客户属于哪个帐户，并且无法根据他们的身份修改他们帐户中的信息。

所以基本上，我想访问其客户的相应帐户对象，但我不确定如何从 Customer 类访问在 MonthlyReport 中创建的对象。这更像是一个概念问题，我不需要代码，因为我需要设计建议。如果有助于回答问题，我可以添加一些代码。提前致谢。

```
 public class MonthlyReport() {
       public static void main(String args[]){

             //reading in account data here

             Account a = new Account(accountNumber, accountType, balance, openingDates, aprAdjustment, feeAdjustment);
             accounts[i]=a;

             //reading in customer data here

             Customer c = new Customer(customerID, firstName, lastName, mailingAddress, emailAddress, flag, accountNum);
             customers[i]= c;

        }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T01:48:16.867

您可以编写一个包含两种数组数据类型的自定义类，并将 .dat 文件中的信息组合到这种新类型的数组中

```
public class CustomerAccounts
{
    public Account[] Account {get; set;}
    public Customer Customer {get; set;}
}

public class MonthlyReport() {
   public static void main(String args[]){

         CustomerAccounts[] allData = new CustomerAccounts[totalCustomers];

         //Read in customers
         for (i = 0; i < totalCustomers; i++)
         {
               Customer c = new Customer(customerID, firstName, lastName, mailingAddress, emailAddress, flag, accountNum);
               CustomerAccounts customerAccount = new CustomerAccounts()'
               customerAccount.customer = c;
               allData [i] = customerAccount;

         }

         for (i = 0; i < totalAccounts; i++)
         {
              Account a = new Account(accountNumber, accountType, balance, openingDates, aprAdjustment, feeAdjustment);

              //Look up customer account belongs to to get index in all data array
              int index = lookupIndex();

              CustomerAccounts customerAccount = allData [index];
              int numberOfAccounts = customerAccount.accounts.count;
              allData [index].accounts[numberOfAccounts] = a;
         }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T01:55:41.047

> 另一个问题是每个人都`Customer`可以有多个帐户。

`Customer`假设在和`Account`细节之间是一对多的关系，`MonthlyReport`应该持有对 a 的引用`Map<Customer, List<Account>> data`。

附录：当您阅读客户文件并`Customer`在您的 中累积实例时`Map`，`List<Account>`for each 最初将为空。同时，将每个添加`Customer`到`Map<AccountNumber, Customer> index`. 稍后，当您阅读帐户文件时，您可以使用`index`查找`Customer`每个新帐户记录，然后将其添加到该客户的`List<Account>`.

# php - PHP - cURL 到数组？

> ID：12666681
> 
> 赞同：1
> 
> 时间：2012-10-01T01:46:56.680
> 
> 标签：php, curl

我如何使用 cURL 从这个 URL 取回一个数组？[http://module.game-monitor.com/67.202.102.136:27016/data/server.php](http://module.game-monitor.com/67.202.102.136:27016/data/server.php)

到目前为止，这是我的代码。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://module.game-monitor.com/67.202.102.136:27016/data/server.php'); 
curl_setopt($ch, CURLOPT_HEADER, false); 
curl_setopt($ch, CURLOPT_NOBODY, false); // remove body 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);  
$head = curl_exec($ch); 
$httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE); 
curl_close($ch); 
$head = unserialize($head);
$head = objectToArray($head);
$head["query_time"] = str_ireplace('ms', '', $head["query_time"]);
return $head; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T01:51:02.210

尝试只使用[PHP Type Casting](http://www.php.net/manual/en/language.types.array.php#language.types.array.casting) `(array)`并删除该`objectToArray`功能

```
$head = unserialize($head);
$head = (array) $head ;
var_dump($head); 
```

输出

```
array
  'ip' => string '67.202.102.136' (length=14)
  'port' => string '27016' (length=5)
  'player' => int 0
  'maxplayer' => int 14
  'name' => string 'Another www.cogameservers.com CSGO Server' (length=41)
  'premium' => string '0' (length=1)
  'link' => string 'http://www.game-monitor.com/csgo2_GameServer/67.202.102.136:27016/Another_www.cogameservers.com_CSGO_Server.html' (length=112)
  'error' => int 0
  'query_time' => string '0ms' (length=3) 
```

# internet-explorer - 使用 htaccess 重定向 IE 6、7 和 8 用户

> ID：12666684
> 
> 赞同：3
> 
> 时间：2012-10-01T01:47:29.953
> 
> 标签：internet-explorer, .htaccess, redirect

如何使用 htaccess 将 IE 版本 6-8 的用户重定向到某个目录 (mysite.com/ie)？

注意：我正在使用 Wordpress。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-01T01:59:15.483

就像是：

```
RewriteEngine on
RewriteCond %{HTTP_USER_AGENT} "MSIE [6-8]" [NC]
RewriteRule ^(.*)$ http://mysite.com/ie [R=301,L] 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-10-01T01:59:16.287

使用简单的 javascript 函数来处理这个问题要简单得多。您也可以使用 HTML。这是一个检测浏览器版本的 javascript 示例。您应该能够根据您的需要进行定制：

[更有效地检测 Windows Internet Explorer](http://msdn.microsoft.com/en-us/library/ms537509%28v=vs.85%29.aspx)

# asp.net-mvc - MVC.net 对客户端/JavaScript 的异步响应

> ID：12666687
> 
> 赞同：0
> 
> 时间：2012-10-01T01:48:21.697
> 
> 标签：asp.net-mvc, asynchronous

我正在为我的要求寻找一个可能的解决方案，从 ASP.NET MVC 控制器操作方法我们调用多个异步调用到多个 DB。这些调用会将数据返回给回调方法。回调方法维护静态字典并根据用户键（唯一）存储数据。

目前我们实现为，轮询服务器的数据可用性，这些数据将基于用户密钥存储在字典中。

我正在寻找其他可能的解决方案？将数据返回到 JavaScript 的最佳方式是什么，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T03:55:44.607

使用 javascript 轮询数据库更新？您是否考虑过使用 SignalR (http://signalr.net/)？

# wordpress - 如何禁用 mp4 的 gzip 压缩

> ID：12666689
> 
> 赞同：4
> 
> 时间：2012-10-01T01:48:37.400
> 
> 标签：wordpress, gzip, mp4

我试图在我的 wordpress 博客上停止 gzip 压缩，因为如果我发布一个 mp4 视频，即使使用软件 qtindexswapper 它仍然会在我播放之前加载整个内容。我在我的 .htaccess 文件中尝试了各种不同的代码来禁用 gzip，但它只是不起作用。有任何想法吗？

例如，这是我在存储视频的 .htaccess 中尝试过的一些代码

SetEnv no-gzip 不变化

RewriteRule ^(.*)$ $1 [NS,E=no-gzip:1,E=dont-vary:1]

SetEnvIfNoCase Request_URI .mp4$ no-gzip dont-vary

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-04T10:44:56.700

你试试？

```
SetEnvIfNoCase Request_URI \.mp4$ no-gzip dont-vary## Heading ## 
```

并查看：[如何为 .htaccess 文件中的某些媒体文件禁用 Apache gzip 压缩？](https://stackoverflow.com/questions/9249243/how-to-disable-apache-gzip-compression-for-some-media-files-in-htaccess-file)

# javascript - 垂直包装一个div

> ID：12666691
> 
> 赞同：0
> 
> 时间：2012-10-01T01:49:00.830
> 
> 标签：javascript, html, css

我正在尝试使 div 的内容在溢出时垂直换行，从而使其水平拉伸而不是垂直拉伸。

有没有办法在 CSS 或 JavaScript 库中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T03:25:52.303

使用`display: inline-block`和`white-space: nowrap`：http: [//jsfiddle.net/EH5uy/](http://jsfiddle.net/EH5uy/)

或者，您可以这样做`display: inline`，但您将无法正确设置边距

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:13:55.217

我使用 Isotope Jquery 插件找到了我的问题的答案。

代码：

```
$container.isotope({ 
    layoutMode: 'fitColumns',
    resizable: true
 });​ 
```

这是 JsFiddle 的链接：http: [//jsfiddle.net/uzQPM/](http://jsfiddle.net/uzQPM/)

# ruby-on-rails - Rails + Devise：如何限制用户编辑不属于他的记录

> ID：12666693
> 
> 赞同：2
> 
> 时间：2012-10-01T01:49:28.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我正在使用 Rails、Devise 和 Mongoid。

一个用户只能拥有一个项目（`has_one :profile`），但所有用户（和未经身份验证的用户）都可以看到项目列表（我有这个工作）。当用户登录时，他们会在项目旁边看到“编辑和删除”按钮（通过将这些按钮包装在 中`<% if user_signed_in? %>`）。但是，登录用户会在所有项目旁边看到这些按钮，并且可以全部编辑或删除它们。

如何限制登录用户只能编辑他的项目？

作为奖励，是否可以在属于已登录用户的项目周围显示特定内容或 html（例如“这是您的项目”的文本或项目 html 周围的附加类）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T22:58:44.037

当您有多个用户能够修改相同的资源并且您需要跟踪谁拥有哪些权限时，CanCan 非常棒。但如果严格来说只有拥有该项目的用户才能修改它，CanCan 可能是矫枉过正。

按照 iouri 的建议隐藏视图中的链接，然后在您的控制器中执行以下操作：

```
def edit
  if current_user != @project.user
    # Redirect them to an error page
  else
    # Render the view
  end
end 
```

更好的是，创建一个方法，如：

```
def user_owns_project?
  @project.user == current_user
end 
```

然后为编辑、更新和销毁设置一个前置过滤器，如果用户不拥有该项目，则重定向到错误页面。

**编辑**：您之前的过滤器也将需要找到项目并设置`@project`。CanCan 也为您解决了这个问题`load_and_authorize_resource`，但除非您需要或期望需要细粒度的权限控制，否则我仍然会避免使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T22:42:04.600

设计是控制“身份验证”，这不应该是你的责任。

您想控制“授权”，因为[CanCan](https://github.com/CanCanCommunity/cancancan)更好。

# java - GCMRegistrar jar 在 eclipse 中导致错误，找不到源。档位调试

> ID：12666694
> 
> 赞同：0
> 
> 时间：2012-10-01T01:49:50.837
> 
> 标签：java, android, google-cloud-messaging

我正在尝试使用 google GCM 注册一个 Android 应用程序，它似乎在 eclipse 中导致错误。有什么帮助吗？

一旦我尝试检查它是否已注册，它就会爆炸。它编译得很好，我添加了 `import com.google.android.gcm.GCMRegistrar;` 我认为这更多是因为我不了解 java 和 eclipse，而不是 GCM，但谁知道

我添加了要忽略的步骤过滤器`com.google.android.gcm.*`

并且我确保将 gdm.jar 库与我的项目和构建路径一起包含在我的本地 libs 文件夹中。

如果我单步执行代码，当我尝试跨过`GCMRegistrar`引用的第一行并说“找不到源”时，它会停止。`GCMRegistrar`如果我没有设置断点，它仍然会在它命中并说“找不到源”时停止。

```
private void checkRegistration(){
    try{
            if (!GCMRegistrar.isRegistered(getApplicationContext())) {
                 // Automatically registers application on startup.
                GCMRegistrar.register(getApplicationContext(), Utilities.GCM_SENDER_ID);
            } else {
                final String regId = GCMRegistrar.getRegistrationId(getApplicationContext());
                if(regId.equals("")){
                    GCMRegistrar.register(getApplicationContext(), Utilities.GCM_SENDER_ID);
                }else{
                // Device is already registered on GCM

                    if(regId == Utilities.getGcmRegKey(this)){

                    }else{
                        pwClient.updateGCMRef("add", regId, Utilities.getApiKey(this), Utilities.getDeviceId(this));
                        Utilities.setGcmRegKey(this, regId);
                    }
                }
            }
        }catch(Exception ex){
            Log.e("PW", "register error: " + ex.getMessage());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:26:47.703

我不得不停止我的 GCM 项目，但我至少设法获得了 GCM 客户端的源代码，所以它可能会帮助你调试一下。从 R17 SDK 工具开始，谷歌已经让附加源代码和 javadocs 成为一种痛苦，但它可以做到。

在您找到 gcm.jar 的同一个“dist”目录中是另一个 jar gcm-src.jar - 这就是源代码。因此，在您的 libs 目录中创建一个名为 gcm.jar.properties 的新文件。

它应该包含一行

```
src=C:\\dev\\tools\\android-sdk-windows4.1\\extras\\google\\gcm\\gcm-client\\dist\\gcm-src.jar 
```

（编辑此以引用您的 SDK 安装，如果您在 Linux 上，请将 \\s 更改为 /s）

现在关闭您的项目并重新打开它，否则它将无法正常工作，天知道为什么！

您现在应该有“悬停在”javadoc 类型的弹出窗口，并且能够进入 GCMRegistrar 静态方法。至于你的代码为什么会爆炸，也许这会让你更接近。

顺便说一句，我基于我的项目的示例代码在注册开始时有这两行

```
// Check that the device supports GCM (should be in a try / catch)
GCMRegistrar.checkDevice(this);
// Check the manifest to be sure this app has all the required permissions.
GCMRegistrar.checkManifest(this); 
```

他们可能会对事情有所了解

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T07:07:21.630

根据[here](http://developer.android.com/guide/google/gcm/gs.html)，GCM需要Android **2.2**或更高版本，首先检查你的manifest sdk版本是否正确

其次，右键单击您的项目并选择**Properties** => **Java Build Path** => **Libraries**选项卡并确保 gcm.jar 存在于列表中

# php - php删除分配变量上的回车

> ID：12666698
> 
> 赞同：-2
> 
> 时间：2012-10-01T01:50:07.523
> 
> 标签：php

如果我将 2 行值分配给这样的变量。

```
$tt = 'part 1
part 2 '; 
```

我附和它。

```
echo $tt; 
```

我的浏览器将它显示在 2 行上，这很好。但是在源页面上，代码将有 2 行。

怎么能摆脱这个回车。因为它不是 chr(13) 和 \r，所以这些都不起作用。

```
echo str_replace(chr(13), '-', $tt);
echo str_replace('\r', '-', $tt); 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T01:53:09.770

这实际上取决于您所处的环境。在 Windows 中，换行符是 \r\n。在 *nix 环境中它只是 \n。

```
echo str_replace("\r", "-", str_replace("\n", "-", $tt)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T02:59:38.977

适用于 Windows 或 Linux 的简单方法：

```
str_replace("\r\n", "-", $var); 
```

在 Linux 上，仍会检测到 \r\n。这里提出的任何其他建议都是过分的（尽管不一定是不正确的）。

请记住，在使用 \r 或 \n 等特殊字符时需要使用双引号。

编辑：

如果你想格外小心，你可以用这个来代替：

```
str_replace(array("\r\n", "\n"), "-", $var); 
```

对于 \r 或 \n 之类的东西，您不需要使用 char() 函数的任何额外开销。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-01T01:53:59.007

你可以试试

```
str_replace(array(chr(13),chr(10)), "-", $tt); 
```

# java - 如何使用 Java 发布并包含参数和原始请求正文？

> ID：12666702
> 
> 赞同：8
> 
> 时间：2012-10-01T01:50:33.237
> 
> 标签：java, apache-commons-httpclient

我正在与一个需要 POST 参数并且还需要请求正文的 Web 服务进行通信。我已经确认可以使用我拥有的 REST 控制台完成这样的 POST 请求，但是我无法使用 Apache 库在 Java 中发出这样的请求。

在下面的代码中，我能够 POST 到 Web 服务，并且它正确接收变量 raw_body 的内容。如果我取消注释两行中的第一行，Web 服务会收到“fname”参数，但它不再收到 POST 的正文。

```
import org.apache.commons.httpclient.HttpClient;
import org.apache.commons.httpclient.methods.PostMethod;
import org.apache.commons.httpclient.methods.RequestEntity;
...

HttpClient httpClient = new HttpClient();
String urlStr = "http://localhost:8080/MyRestWebService/save";
PostMethod method = new PostMethod(urlStr);
String raw_body = "This is a very long string, much too long to be just another parameter";
RequestEntity re = new StringRequestEntity(raw_body, "text/xml", "UTF-16");
//method.addParameter("fname", "test.txt");
//httpClient.getParams().setParameter("fname", "test.txt");
method.setRequestEntity(re); 
```

如何同时传输参数和正文？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T02:12:06.690

您可以使用该`setQueryString`方法将参数添加到要发布到的 URL。但是，从 RESTful 的角度来看，我认为您通常不应该这样做，因为 POST 应该表示对资源的调用，并且任何符合查询参数的条件都应该包含在请求中传输的表示中正文...或者它应该代表资源本身的资格，在这种情况下，它应该是发布到的路径的一部分，然后控制器可以使用 @PathVariable/@PathParam 或类似的东西来提取该路径。因此，在您的情况下，如果您要保存资源并知道 URI，您也可能正在寻找类似`POST /MyRestWebService/files/test.txt`或更合适的 PUT 的东西。服务器上的代码可以从 URL 模式中提取文件名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T01:53:53.020

您需要使用 multipart-form 发出 POST 请求。这是示例：

[Apache HttpClient 制作多部分表单帖子](https://stackoverflow.com/questions/2304663/apache-httpclient-making-multipart-form-post)

或者，您可以使用编码的内容（参数和文件）`application/x-www-form-urlencoded`发出 POST 请求，但当您想要发出带有大内容（如文件）的 POST 请求时，不建议这样做。

# javascript - 输入类型=提交时未触发单击事件

> ID：12666706
> 
> 赞同：0
> 
> 时间：2012-10-01T01:51:23.593
> 
> 标签：javascript, jquery, html

我显然在做一些愚蠢的事情，我不太明白出了什么问题。每当我单击“发送”按钮时，单击事件都无法触发。

```
function CreateNewMessage()
{
    var receiver = $("#receiver").value;
    var msg_body = ("#msg_body").value;
    $("#submit").click(function(event) {
        alert("it works!");
        $.post("new/", {"receiver" : receiver, "msg_body" : msg_body});
    });
}

(function() {
    $(document).ready(function() {
        CreateNewMessage();
    });
})(); 
```

和 HTML 按钮

```
<input id="submit" value="Send" type="submit"> 
```

谁能发现我的错误？

编辑：

所以这就是我的代码在考虑了大家的建议之后现在的样子。

```
function CreateNewMessage()
{
    $("#submit").click(function(event) {
        var receiver = $("#receiver").val();
        var msg_body = $("#msg_body").val();
        alert("it works!");
        $.post("message/new/", {"receiver" : receiver, "msg_body" : msg_body});
    });
}

$(document).ready(function() {
    CreateNewMessage();
}); 
```

它仍然没有正确发送请求，并且控制台没有记录错误。我尝试使用提交事件而不是上面代码中的单击事件，但得到了相同的结果。

编辑 2 所以代码在 jsFiddle 上运行，但不在我的浏览器中。我真的很困惑

编辑3：也许这与它有关......请注意，最初加载页面时提交按钮不存在。它是在特定的 javascript 事件触发时生成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T01:53:18.940

您缺少`$()`for 的功能`#msg_body`，它应该是这样的：

```
var receiver = $("#receiver")[0].value;
var msg_body = $("#msg_body")[0].value; 
```

此外，您不需要将其包装`ready`在一个函数中，您可以直接在脚本中调用它；您还可以直接将 CreateNewMessage 函数设置为处理程序，如下所示：

```
$(document).ready( CreateNewMessage ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T01:56:32.713

jQuery 的值是 .val()。另外，为什么不听提交事件呢？如果您不希望帖子通过，只需使其返回 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T01:54:23.497

你错过了 $ before ("#msg_body") 所以你的脚本会在那里崩溃。

```
function CreateNewMessage()
{
    var receiver = $("#receiver").value;
    var msg_body = $("#msg_body").value;
    $("#submit").click(function(event) {
        alert("it works!");
        $.post("new/", {"receiver" : receiver, "msg_body" : msg_body});
    });
}

(function() {
    $(document).ready(function() {
        CreateNewMessage();
    });
})(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T01:54:42.043

尝试这个：

```
function CreateNewMessage()
{
    var receiver = $("#receiver").value;
    var msg_body = $("#msg_body").value;

    alert("it works!");
    $.post("new/", {"receiver" : receiver, "msg_body" : msg_body});
}

$(function(){
  $("#submit").click(function() {
    CreateNewMessage();
  });
}); 
```

# less - 我可以在不使用 PX 的情况下声明像素参数吗？

> ID：12666710
> 
> 赞同：2
> 
> 时间：2012-10-01T01:52:23.580
> 
> 标签：less, mixins

这是我的左边距混合：

```
.mL (@pixels) {
    margin-left: @{pixels}px;
} 
```

这就是我所说的：

```
#menu {
    .mL(124);
} 
```

这会输出语法错误。这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T07:44:58.010

它适用于转义字符串插值：

```
.mL (@pixels) {
    margin-left: ~"@{pixels}px";
} 
```

一种更简洁的方法可能是添加`0px`到您的变量中：

```
.mL (@pixels) {
    margin-left: @pixels + 0px;
} 
```

# jquery - 使用 jquery 自定义码头

> ID：12666714
> 
> 赞同：0
> 
> 时间：2012-10-01T01:53:22.357
> 
> 标签：jquery, dock

我正在尝试使用 jquery 创建一个显示/隐藏文档。现在我使用以下代码将顶部位置从 -200pc 设置为 0：

```
$('#play-the-series').click(function(){
            $('#main-nav #content').animate({
                    top: '0'
                }, 1000, 'jswing');
        }); 
```

我需要将位置切换回 -200px 以关闭扩展坞。我还想保持 100% 的宽度一致。

这是原始代码：

```
 $('#play-the-series').click(function(){
            $('#main-nav #content').toggle(function(){
                $(this).animate({
                    top: '0'
                }, 1000, 'jswing'),
                $(this).animate({
                    top: '-200px'
                }, 1000, 'jswing');
        }); 
    }); 
```

我很接近这个：

```
$('#play-the-series').click(function(){
        if($('#main-nav #content').css('top', '-200px')){
                $('#main-nav #content').animate({
                    top: '0'
                }, 1000, 'jswing');
            }else{
                $('#main-nav #content').animate({
                    top: '-200px'
                }, 1000, 'jswing');
            }
    }); 
```

但是else语句似乎不起作用...

这可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T01:57:34.750

你需要`top: '-200px'`. 你错过了 px。

编辑： .toggle 不会做你认为它做的事情。请参阅[切换文档](http://api.jquery.com/toggle/)。你应该这样做：

```
if ($('#main-nav #content').is(':visible'))
    $(this).slideDown(1000, 'jswing');
else $(this).slideUp(1000, 'jswing'); 
```

# batch-file - 我的批处理脚本报告了一个错误，指出“此时意外”

> ID：12666715
> 
> 赞同：1
> 
> 时间：2012-10-01T01:53:29.377
> 
> 标签：batch-file

我尝试运行的 Windows 批处理文件包含以下分配：

```
set ANT_HOME="C:/Program Files/apache-ant-1.8.4" 
```

违规行是：

```
call %ANT_HOME%/bin/ant -f ../config/common.xml start_db 
```

当我运行带有 echo 的脚本时，我得到：

```
call "C:/Program_Files/apache-ant-1.8.4"/bin/ant -f ../config/common.xml start_db
Files/apache-ant-1.8.4""=="" was unexpected at this time. 
```

我已经将第二个引号移到了路径的末尾，在蚂蚁之后，但我收到了相同的错误消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T02:30:43.110

如果 ant 是一个 .exe，我会说你的代码应该可以工作。但我怀疑 ant 是一个批处理文件，并且错误发生在 ant 脚本中。

我的结论基于您的错误消息 - 特别是它的以下部分：`""==""`. 错误消息是批处理解析错误，我看不出您的代码如何生成这些字符。所以我认为 ant 一定是导致问题的批处理脚本。

我怀疑 ant.bat`@echo off`位于顶部，因此您看不到实际失败的行。

由于无法访问 ant.bat 脚本，我无法准确诊断出失败的原因，也无法猜测如何修复它。

**更新 - 找到确切的问题**

我在网上找到了一份[ant.bat](http://svn.rifers.org/rife-search/trunk/lib/ant-1.6.2/bin/ant.bat)。

它包含以下代码行：

```
if "%ANT_HOME%"=="" set ANT_HOME=%DEFAULT_ANT_HOME% 
```

您对 ANT_HOME 的定义包括引号，因此代码正在尝试执行

```
if ""C:/Program Files/apache-ant-1.8.4""=="" set ANT_HOME=%DEFAULT_ANT_HOME% 
```

空格没有被引用，你有你的错误。

修复所有问题所需要做的就是从 ANT_HOME 的定义中删除引号，然后在 CALL 语句中添加引号：

```
set "ANT_HOME=C:/Program Files/apache-ant-1.8.4"
call "%ANT_HOME%/bin/ant" -f ../config/common.xml start_db 
```

正斜杠作为 Windows 中的文件夹分隔符并不总是可靠的。请参阅[为什么 Windows 上的 cmd.exe shell 使用正斜杠 ('/'') 路径分隔符的路径失败？](https://stackoverflow.com/questions/10523708/why-does-the-cmd-exe-shell-on-windows-fail-with-paths-using-a-forward-slash).

最好使用反斜杠。

```
set "ANT_HOME=C:\Program Files\apache-ant-1.8.4"
call "%ANT_HOME%\bin\ant" -f ..\config\common.xml start_db 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T01:56:26.177

引号必须完全包围文件名。您不能将它们用于部分名称。试试这个：

```
set ANT_HOME=C:\Program Files\apache-ant-1.8.4
call "%ANT_HOME%\bin\ant" -f ../config/common.xml start_db 
```

哦，我把你的一些斜杠改成了反斜杠（DOS 不喜欢正斜杠）。我假设你被允许`/`在你传递的那个参数中使用。

# python - 添加两个带有 2D 掩码的 3D numpy 数组

> ID：12666720
> 
> 赞同：3
> 
> 时间：2012-10-01T01:54:31.097
> 
> 标签：python, numpy, python-imaging-library

我想在灰度图像上添加两个 3D numpy 数组（RGB 图像数组）以及由某些算法生成的 2D 蒙版。做这个的最好方式是什么？

作为我正在尝试做的一个例子：

```
from PIL import Image, ImageChops, ImageOps
import numpy as np

img1=Image.open('./foo.jpg')
img2=Image.open('./bar.jpg')

img1Grey=ImageOps.grayscale(img1)
img2Grey=ImageOps.grayscale(img2)

# Some processing for example:
diff=ImageChops.difference(img1Grey,img2Grey)
mask=np.ma.masked_array(img1,diff>1)

img1Array=np.asarray(im1)
img2Array=np.asarray(im2)

imgResult=img1Array+img2Array[mask] 
```

我在想：
1）分解RGB图像并分别做每种颜色
2）将蒙版复制到3D数组中

还是有更蟒蛇的方式来做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T02:31:57.627

希望我可以添加评论而不是答案。无论如何：

masked_array*不是*用来制作面具的。它用于在计算中仅包含掩码之外的数据，例如总和、平均值等。科学统计应用。它由一个数组和数组的掩码组成。这可能不是你想要的。

您可能只需要一个普通的布尔掩码，如：

```
mask = diff>1 
```

然后您需要修改形状，以便 numpy 在正确的维度上广播，然后将其广播到第三维度：

```
mask.shape = mask.shape + (1,)
mask = np.broadcast_arrays(img1Array, mask)[1] 
```

之后，您可以添加像素：

```
img1Array[mask] += img2Array[mask] 
```

进一步澄清：

```
imgResult=img1Array+img2Array[mask] 
```

那永远行不通。您是在说“将 img2Array 中的一些像素添加到 img1Array 中的*所有*像素”6_9

如果要在两个或多个数组之间应用 ufunc，它们必须是相同的形状，或者可以广播到相同的形状。

# haskell - 我教 ghci 编译我的 StackOverflow 帖子。我可以让它更光滑吗？

> ID：12666723
> 
> 赞同：34
> 
> 时间：2012-10-01T01:55:03.347
> 
> 标签：haskell, ghci

# Haskell Stack Overflow 布局预处理器

```
module StackOverflow where  -- yes, the source of this post compiles as is 
```

如果您想先玩这个（向下 1/2） ，请跳至**如何让它工作。**
跳到**我想要什么，**如果我有点无聊，你只是想找出我正在寻求什么帮助。

## TLDR 问题摘要：

1.  我可以让 ghci 将文件名完成添加到`:so`我在我定义的命令中`ghci.conf`吗？
2.  我是否可以以某种方式定义一个 ghci 命令来返回编译代码而不是返回 ghci 命令，或者 ghci 是否有更好的方法让我将 Haskell 代码插入为特定于文件扩展的预处理器，因此`:l`适用于`.hs`和`.lhs`像往常一样文件，但使用我的手写`.so`文件预处理器？

## 背景：

`.lhs`Haskell 在源文件中支持 literate 编程，有两种方式：

*   LaTeX 风格`\begin{code}`和`\end{code}`.
*   鸟迹：代码以 开头`>` ，其他都是注释。
    代码和注释之间必须有一个空白行（以防止对`>`.

Bird 跟踪规则听起来不像 StackOverflow 的代码块吗？

参考： **1\.** [.ghci 手册](http://www.haskell.org/ghc/docs/7.4.2/html/users_guide/ghci.html) **2\.** [GHCi haskellwiki](http://www.haskell.org/haskellwiki/GHC/GHCi) **3\.** [Neil Mitchell 关于`:{`.ghci`:}`的博客](http://neilmitchell.blogspot.co.uk/2010/01/better-ghci-files.html)

## 预处理器

我喜欢在文本编辑器中编写 SO 答案，并且我喜欢发布由有效代码组成的帖子，但最终会出现评论块或`>`我必须在发布之前编辑掉的 s，这不那么有趣。

所以，我给自己写了一个预处理器。

*   如果我将一些 ghci 内容粘贴为代码块，它通常以`*`or开头`:`。
*   如果该行完全空白，我不希望将其视为代码，否则我会意外出现 code-next-to-comment-line 错误，因为我看不到我不小心留在空白行上的 4 个空格。
*   如果前一行不是代码，那么这一行也不应该是，所以我们可以处理 StackOverflow 在代码块之外使用缩进来进行文本布局。

起初我们不知道（我不知道）这一行是代码还是文本：

```
dunnoNow :: [String] -> [String]
dunnoNow [] = []
dunnoNow (line:lines)
  | all (==' ') line = line:dunnoNow lines     -- next line could be either
  | otherwise = let (first4,therest) = splitAt 4 line in 
     if first4 /="    "                 -- 
        || null therest                 -- so the next line won't ever crash
        || head therest `elem` "*:"     -- special chars that don't start lines of code.
     then line:knowNow False lines      -- this isn't code, so the next line isn't either
     else ('>':line):knowNow True lines -- this is code, add > and the next line has to be too 
```

但是如果我们知道，我们应该保持相同的模式，直到我们遇到一个空行：

```
knowNow :: Bool -> [String] -> [String]
knowNow _ [] = []
knowNow itsCode (line:lines) 
  | all (==' ') line = line:dunnoNow lines
  | otherwise = (if itsCode then '>':line else line):knowNow itsCode lines 
```

## 让 ghci 使用预处理器

现在我们可以取一个模块名，预处理那个文件，然后告诉 ghci 去加载它：

```
loadso :: String -> IO String
loadso fn = fmap (unlines.dunnoNow.lines) (readFile $ fn++".so") -- so2bird each line
        >>= writeFile (fn++"_so.lhs")                     -- write to a new file
        >> return (":def! rso (\\_ -> return \":so "++ fn ++"\")\n:load "++fn++"_so.lhs") 
```

我已经默默地重新定义了`:rso`命令，因为我以前尝试使用 `let currentStackOverflowFile = ....`或`currentStackOverflowFile <- return ...` 没有让我到任何地方。

# 怎么做才能让它工作

现在我需要把它放在我的`ghci.conf`文件中，即`appdata/ghc/ghci.conf` 按照[说明](http://www.haskell.org/ghc/docs/7.0.2/html/users_guide/ghci-dot-files.html)

```
:{
let dunnoNow [] = []
    dunnoNow (line:lines)
      | all (==' ') line = line:dunnoNow lines     -- next line could be either
      | otherwise = let (first4,therest) = splitAt 4 line in 
         if first4 /="    "                 -- 
            || null therest                 -- so the next line won't ever crash
            || head therest `elem` "*:"     -- special chars that don't start lines of code.
         then line:knowNow False lines      -- this isn't code, so the next line isn't either
         else ('>':line):knowNow True lines -- this is code, add > and the next line has to be too
    knowNow _ [] = []
    knowNow itsCode (line:lines) 
      | all (==' ') line = line:dunnoNow lines
      | otherwise = (if itsCode then '>':line else line):knowNow itsCode lines
    loadso fn = fmap (unlines.dunnoNow.lines) (readFile $ fn++".so") -- convert each line
        >>= writeFile (fn++"_so.lhs")                            -- write to a new file
        >> return (":def! rso (\\_ -> return \":so "++ fn ++"\")\n:load "++fn++"_so.lhs")
:}
:def so loadso 
```

## 用法

现在我可以保存整个帖子`LiterateSo.so`并在 ghci 中做一些可爱的事情，比如

```
*Prelude> :so StackOverflow
[1 of 1] Compiling StackOverflow    ( StackOverflow_so.lhs, interpreted )
Ok, modules loaded: StackOverflow.

*StackOverflow> :rso
[1 of 1] Compiling StackOverflow    ( StackOverflow_so.lhs, interpreted )
Ok, modules loaded: StackOverflow.

*StackOverflow> 
```

万岁！

# 我想要什么：

我宁愿让 ghci 更直接地支持这一点。摆脱中间`.lhs`文件会很好。

此外，似乎 ghci 会从`:load`确定您实际上正在执行的最短子字符串开始完成文件名`load`，因此使用`:lso`而`:so`不是欺骗它。

（我不想*用*C 重写我的代码。我也不想*从*源代码重新编译 ghci。）

## TLDR 问题提醒：

1.  我可以让 ghci 将文件名完成添加到`:so`我在我定义的命令中`ghci.conf`吗？
2.  我是否可以以某种方式定义一个 ghci 命令来返回编译代码而不是返回 ghci 命令，或者 ghci 是否有更好的方法让我将 Haskell 代码插入为特定于文件扩展的预处理器，因此`:l`适用于`.hs`和`.lhs`像往常一样文件，但使用我的手写`.so`文件预处理器？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T10:20:23.500

我会尝试制作一个独立的预处理器来运行 SO 预处理代码或标准的文学预处理器，具体取决于文件扩展名。然后只需使用`:set -pgmL SO-preprocessor`in `ghci.conf`。

对于标准的文学预处理器，运行`unlit`程序，或使用`Distribution.Simple.PreProcess.Unlit`.

这样，`:load`文件名完成就可以正常工作。

GHCI 将 4 个参数依次传递给预处理器：`-h`标签、源文件名和目标文件名。预处理器应该读取源并写入目标。标签用于输出`#line`pragma。如果您不更改源代码的行数（即用`--`注释或空白行替换“注释”行），您可以忽略它。

# textarea - 使用下拉选择动态更改文本区域中的某些文本

> ID：12666725
> 
> 赞同：-1
> 
> 时间：2012-10-01T01:55:40.083
> 
> 标签：textarea, populate

我有一个文本区域，其名称在默认值内。例如 textarea 读取..

（动态注册人姓名）刚刚注册成为（从上方下拉动态）荣誉捐赠者。此文本可编辑

所以在同一个表单中，我有一个输入询问用户他们的姓名和一个选择框，他们可以在其中选择一系列名称。我正在尝试根据他们在文本区域上方的输入和下拉字段中输入的值来更改文本区域内的名称。有人可以帮忙吗？我完全被困住了。我已经阅读了这里的一些论坛，看起来很多解决方案都是使用 ajax。我在 ajax 方面的经验为零，并且想找到一个不使用它的解决方案……有可能吗？或者有人可以提供解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T02:08:38.990

我不认为 textarea 正是你想要的。如果用户取消（从上面的下拉动态）部分怎么办？你怎么知道把文本放在哪里？即使您可以，我建议您为用户可以更改的内容制作常规文本输入元素，并将其他动态更改的文本作为不可编辑的 html 文本元素（或者您想要格式化它们）。

# ruby-on-rails - 索引名称太长 - Rails 3

> ID：12666727
> 
> 赞同：4
> 
> 时间：2012-10-01T01:56:06.490
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sqlite, rails-migrations

我正在尝试运行此迁移：

```
class RemoveClientFromSalesteam < ActiveRecord::Migration
    change_table :sales_teams do |t|
        t.remove :client_id
    end
end 
```

这是我得到的错误：

```
rake db:migrate
-- change_table(:sales_teams)
rake aborted!
An error has occurred, this and all later migrations canceled:

Index name 'temp_index_altered_sales_teams_on_client_priority_and_personal_priority' on table 'altered_sales_teams' is too long; the limit is 64 characters

Tasks: TOP => db:migrate
(See full trace by running task with --trace) 
```

这就是我的`schema.rb`样子：

```
 create_table "sales_teams", :force => true do |t|
    t.string   "name"
    t.integer  "firm_id"
    t.boolean  "client_priority"
    t.boolean  "personal_priority"
    t.datetime "created_at",        :null => false
    t.datetime "updated_at",        :null => false
    t.integer  "client_id"
  end

  add_index "sales_teams", ["client_id"], :name => "index_sales_teams_on_client_id"
  add_index "sales_teams", ["client_priority", "personal_priority"], :name => "index_sales_teams_on_client_priority_and_personal_priority"
  add_index "sales_teams", ["name", "firm_id"], :name => "index_sales_teams_on_name_and_firm_id" 
```

想法？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T02:09:49.377

删除索引，删除列，然后重新添加索引：

```
def up
  remove_index :sales_teams, :column => [ :client_priority, :personal_priority ]
  remove_column :sales_teams, :client_id
  add_index :sales_teams, [ :client_priority, :personal_priority ]
end 
```

我猜你正在使用 SQLite，大多数数据库都支持真正的 ALTER TABLE 操作来删除列，但是 SQLite 会强制你复制表（和索引），删除表，然后将所有内容复制回来；Rails SQLite 驱动程序在幕后处理这个问题，但显然不知道标识符长度限制。

如果需要，您还可以使用`:name`to 选项指定您自己的索引名称。[`add_index`](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/SchemaStatements.html#method-i-add_index)[`remove_index`](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/SchemaStatements.html#method-i-remove_index)

# asp.net - 带有asp.net ajax扩展器控件的webmethod调用问题

> ID：12666731
> 
> 赞同：1
> 
> 时间：2012-10-01T01:56:23.803
> 
> 标签：asp.net, ajax, asp.net-ajax, extender

我有一个扩展器控件，并希望从其中调用 webmethod。但 Sys.net.webserviceproxy.invoke 和 $.ajax 都不起作用。$.ajax 发出服务器超时错误。invoke 有效，但不调用 web 方法。代码如下

```
 [WebMethod]
public static string calculateTime(string dateTime) {

    return result;
} 
```

扩展器控件中调用 web 方法的方法。

```
 timer: function(){

           Sys.Net.WebServiceProxy.invoke("CaculateTime.asmx", "calculateTime",false,{"dateTime":""+this._timestamp+""}, function (result, e){ this.get_element().innerText=result  ;}, function(result, e){},"User Context", 100);

}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:21:53.923

我使用路径地址作为“CalculateTime.asmx”。但是，asp.net 就是这种情况。我从 javascript 调用它，所以它应该是“http://localhost:18194/applicationname/Calculate.asmx/calculateTime”。这浪费了我很多时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T07:25:49.273

从. `static`_ `calculateTime`我相信您对那些确实必须是静态才能允许异步调用的页面方法感到困惑。

# android - 未收到 ACTION_MY_PACKAGE_REPLACED

> ID：12666734
> 
> 赞同：32
> 
> 时间：2012-10-01T01:56:48.463
> 
> 标签：android, broadcastreceiver

我正在使用 ACTION_MY_PACKAGE_REPLACED 来接收我的应用程序何时更新或重新安装。我的问题是该事件从未被触发（我尝试了 Eclipse 和真实设备）。这就是我所做的：

显现：

```
<receiver android:name=".MyEventReceiver" >
    <intent-filter android:priority="1000" >
        <action android:name="android.intent.action.ACTION_MY_PACKAGE_REPLACED" />
    </intent-filter>
</receiver> 
```

代码：

```
public class MyEventReceiver extends BroadcastReceiver
{  
   @Override public void onReceive(Context context, Intent intent)
   {  
      if ("android.intent.action.ACTION_MY_PACKAGE_REPLACED".equals(intent.getAction())) 
      {  //Restart services
      }
   }      
} 
```

这段代码很简单，实际上我使用了其他事件，如 BOOT_COMPLETED 和其他事件，它们可以工作，但 ACTION_MY_PACKAGE_REPLACED。谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-02-02T12:28:18.693

出于某种原因，谷歌开发人员（名为“Dianne Hackborn”）认为可以单独注册当前应用程序的 PACKAGE_REPLACED 意图（在此处阅读存档版本[**，**](http://osdir.com/ml/Android-Developers/2009-11/msg04736.html)[此处](https://web.archive.org/web/20161206025533/http://osdir.com/ml/Android-Developers/2009-11/msg04736.html)为原始链接）。[](http://osdir.com/ml/Android-Developers/2009-11/msg04736.html)

 **但是，我找不到任何正确的方法，所以我做出了妥协：它将在可用时使用最新的 API。

可悲的是，我不知道为什么它不能被调试，但它确实有效（如果你愿意，你可以写入日志）。

这是代码：

**显现：**

```
 <receiver
        android:name=".OnUpgradeBroadcastReceiver"
        android:enabled="@bool/is_at_most_api_11" >
        <intent-filter>
            <action android:name="android.intent.action.PACKAGE_REPLACED" />
            <data android:scheme="package" />
        </intent-filter>
    </receiver>
    <receiver
        android:name=".OnUpgradeBroadcastReceiver"
        android:enabled="@bool/is_at_least_api_12" >
        <intent-filter>
            <action android:name="android.intent.action.MY_PACKAGE_REPLACED" />
        </intent-filter>
    </receiver> 
```

**res/values/version_checks.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <item name="is_at_least_api_12" type="bool">false</item>
    <item name="is_at_most_api_11" type="bool">true</item>

</resources> 
```

res/values-v12/version_checks.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <item name="is_at_least_api_12" type="bool">true</item>
    <item name="is_at_most_api_11" type="bool">false</item>

</resources> 
```

**OnUpgradeBroadcastReceiver.java**

```
public class OnUpgradeBroadcastReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(final Context context, final Intent intent) {
        if (VERSION.SDK_INT <= VERSION_CODES.HONEYCOMB
                && !context.getPackageName().equals(intent.getData().getSchemeSpecificPart())) {
            android.util.Log.d("AppLog", "other apps were upgraded");
            return;
        }
        android.util.Log.d("AppLog", "current app was upgraded"); 
```

* * *

编辑：在今天的 Android 版本中，当你应该将 minSdk 设置为至少 14 时，你不需要这个，实际上你应该只使用 MY_PACKAGE_REPLACED 就可以了。不需要布尔值等...

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-01-03T22:11:51.953

由于清单合并问题，已[接受的答案](https://stackoverflow.com/a/21510561/423171)不再适用于 Android Studio 1.0+，如此[处所示](https://stackoverflow.com/q/24447663/423171)。完全基于[android开发人员的回答](https://stackoverflow.com/a/21510561/423171)，我通过以下实现解决了这个问题：

**AndroidManifest.xml：**

```
<receiver android:name=".UpdateReceiver$LegacyUpdateReceiver" android:enabled="@bool/shouldUseActionPackageReplaced" >
    <intent-filter>
        <action android:name="android.intent.action.PACKAGE_REPLACED" />
        <data android:scheme="package" />
    </intent-filter>
</receiver>
<receiver android:name=".UpdateReceiver" android:enabled="@bool/shouldUseActionMyPackageReplaced" >
    <intent-filter>
        <action android:name="android.intent.action.MY_PACKAGE_REPLACED" />
    </intent-filter>
</receiver> 
```

**/res/values/resources.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <bool name="shouldUseActionPackageReplaced">true</bool>
    <bool name="shouldUseActionMyPackageReplaced">false</bool>
</resources> 
```

**/res/values-v12/resources.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <bool name="shouldUseActionPackageReplaced">false</bool>
    <bool name="shouldUseActionMyPackageReplaced">true</bool>
</resources> 
```

**更新接收器.java：**

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class UpdateReceiver extends BroadcastReceiver
{
    public static class LegacyUpdateReceiver extends BroadcastReceiver
    {
        @Override
        public void onReceive(Context context, Intent intent)
        {
            if (intent != null && intent.getData() != null && context.getPackageName().equals(intent.getData().getSchemeSpecificPart()))
            {
                onUpdate(context);
            }
        }
    }

    @Override
    public void onReceive(Context context, Intent intent)
    {
        onUpdate(context);
    }

    public static void onUpdate(Context context)
    {
        Log.d("LOG", "Current app updated");
    }
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-01T16:21:32.560

从所有用户那里获取信息我可以通过这种方式解决我的问题。他们都是对的，几乎没有需要注意的地方：

在清单中：

```
 <receiver android:name=".MyEventReceiver" >
        <intent-filter android:priority="1000" >
            <!--other actions I need-->
            <action android:name="android.intent.action.PACKAGE_REPLACED" />
            <data android:scheme="package"/>
        </intent-filter>
    </receiver> 
```

和代码：

```
public class MyEventReceiver extends BroadcastReceiver
{     
    @Override public void onReceive(Context context, Intent intent)
    {  
       if(Intent.ACTION_PACKAGE_REPLACED.equals(intent.getAction())) 
       {   if(intent.getData().getSchemeSpecificPart().equals(context.getPackageName()))
           {  //Restart services.
           }
       }
    }      
} 
```

在我的 Android 版本（2.3 Gingerbread）中，我无法使用 MY_PACKAGE_REPLACED 但我们使用 PACKAGE_REPLACED 解决了（将告知任何应用程序已被替换）但询问它是否是我们的：

```
 if(intent.getData().getSchemeSpecificPart().equals(context.getPackageName()))
 {
 } 
```

谢谢大家

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-01-03T15:58:05.743

我只想在这里添加我自己的两便士，因为我在让它工作和调试它时遇到了问题。我使用的是棒棒糖设备：

这是我使用的代码：

```
 <receiver android:name=".services.OnUpdateReceiver">
        <intent-filter>
            <action android:name="android.intent.action.MY_PACKAGE_REPLACED" />
        </intent-filter>
    </receiver> 
```

要调试它，你需要确保你已经在手机上安装了更新，只需通过 Eclipse 调试就可以了，并且至少打开了一次应用程序，然后你可以简单地编辑你的调试配置：

```
eclipse > run > debug configurations > launch action (do nothing) > then F11 like normal 
```

我通过将一个小文件写入 SD 卡来确认它有效

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-07-22T10:04:29.443

简单清单适用于所有版本：

```
 <receiver
        android:name=".Receiver"
        android:enabled="true"
        android:exported="true" >
        <intent-filter>
            <action android:name="android.intent.action.PACKAGE_REPLACED" />
            <data android:scheme="package"/>
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.MY_PACKAGE_REPLACED" />
        </intent-filter>
    </receiver> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-01T02:12:26.443

您是在 API>=12 设备/模拟器上尝试吗？此广播不会在以前的情况下发送，因为它是 API 12。如果您需要您的应用程序为 Pre-ICS 和旧蜂巢设备接收此广播，

尝试：

```
if (intent.getAction().equals(Intent.ACTION_PACKAGE_REPLACED)) {
  if (!intent.getData().getSchemeSpecificPart()
       .equals(context.getPackageName())) {
    return;
  }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-16T10:13:06.803

实际上，当您安装 apk 时，您的应用程序将启动两次。为您设置的每个接收器一次。

当您正在收听时，`android.intent.action.PACKAGE_REPLACED`您需要检查包名中的`intent.getData()`

请注意， `intent.getData()`当它来自时将为 Null `android.intent.action.MY_PACKAGE_REPLACED`

我认为使用其中之一就足够了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-13T23:21:52.563

当我从 Android Studio 构建和安装我的应用程序时遇到了这个问题。

*   在进行正常的构建和运行（不进行调试）时，我通过关闭 Instant Run 解决了这个问题。
*   在使用调试进行构建和运行时，我找不到解决问题的方法。

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2012-10-01T03:35:21.560

您需要将数据方案添加到意图过滤器，如下所示

```
<receiver android:name=".MyEventReceiver" >
    <intent-filter android:priority="1000" >
        <action android:name="android.intent.action.ACTION_MY_PACKAGE_REPLACED" />
        <data android:scheme="package"/>
    </intent-filter>
</receiver> 
```**

# php - 使用 php mailer 使用多个用户名和密码发送多个电子邮件？

> ID：12666736
> 
> 赞同：0
> 
> 时间：2012-10-01T01:57:10.423
> 
> 标签：php

好吧，我得到了这段代码，它可以工作，但是我需要将每个循环都设置为 PHPMailer，如果它很好，则为 idk，但如果我不设置它，则每个循环都不会更改，我设置的始终是第一个，看：

```
foreach($this->users as $v)
{   
    $this->phpmailer = new PHPMailer();

    $this->phpmailer->IsSMTP();
    $this->phpmailer->SMTPAuth = true;
    $this->phpmailer->SMTPSecure = 'ssl';

    $this->phpmailer->Host = 'smtp.gmail.com';
    $this->phpmailer->Port = 465;

    $this->phpmailer->ClearAllRecipients();
    $this->phpmailer->AddAddress($v['email']);

    $this->phpmailer->Username = $v['email_user'];
    $this->phpmailer->Password = $v['email_pass'];

    $this->phpmailer->From = $v['email_user'];
    $this->phpmailer->FromName = $v['email_name']; 
```

...

它有效，但我在每个循环中设置 PHPMailer 但如果我这样做：

```
$this->phpmailer = new PHPMailer();

$this->phpmailer->IsSMTP();
$this->phpmailer->SMTPAuth = true;
$this->phpmailer->SMTPSecure = 'ssl';

$this->phpmailer->Host = 'smtp.gmail.com';
$this->phpmailer->Port = 465;

foreach($this->users as $v)
{       
    $this->phpmailer->ClearAllRecipients();
    $this->phpmailer->AddAddress($v['email']);

    $this->phpmailer->Username = $v['email_user'];
    $this->phpmailer->Password = $v['email_pass'];

    $this->phpmailer->From = $v['email_user'];
    $this->phpmailer->FromName = $v['email_name'];

... 
```

它会起作用，但 from 不会改变每个循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T02:25:57.453

我没有适合您的解决方案，但想分享我使用 PHPMailer 的经验：我必须为我发送的每封邮件创建一个全新的对象以获得我想要的结果，即使电子邮件相同但收件人不同.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T02:43:50.083

很难说。错误报告是否设置为显示所有错误？phpMailer有什么失败吗？这不太可能，但我刚刚看到了一个类似的问题，即运行对象循环污染了日志并阻止脚本正确执行。

我希望这有帮助。请让我知道你发现了什么。

# iphone - 为什么我的 UILabel 不显示 NSInteger

> ID：12666739
> 
> 赞同：0
> 
> 时间：2012-10-01T01:58:40.797
> 
> 标签：iphone, objective-c

我有一个 ViewController 和 GameController 类，它只是 NSObject 的子类。视图控制器有一个链接到它的按钮并触发一个 IBAction 来初始化一个 GameController 类。在 GameController 类的 init 中有一个 CADisplayLink，它将一个名为 score 的 int 添加一个。在调试器中，分数在上升，但标签只会显示 0。

在视图控制器中

```
-(void)setScore:(NSInteger)gameScore{
NSString *string = [NSString stringWithFormat:@"%i", gameScore];
scoreLabel.text = string;
NSLog(@"the score is %i", gameScore);
}

-(IBAction)play:(id)sender{
gameController = [[GameController alloc] init];
//in my header is GameController* gameController;
} 
```

在游戏控制器中

```
-(id)init{
self = [super init];
if (self) {

viewController = [[ViewController alloc] init];
//in header ViewController* viewController;
displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(gameLoop:)];
[displayLink addToRunLoop:[NSRunLoop mainRunLoop] forMode: NSRunLoopCommonModes];

//in the header CADisplayLink* displayLink;
}
return self;

}

-(void)gameLoop:(CADisplayLink *)sender{
deltaScore++;
if (deltaScore >= 20) {
deltaScore -= 20;
score++;
//deltaScore and score are NSIntegers
[viewController setScore:score];
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T05:53:28.940

score 没有更新，因为您正在游戏控制器中创建视图控制器的新实例，您需要以某种方式将视图控制器的对象传递给游戏控制器，然后使用相同的对象调用方法 setScore。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T05:48:48.757

在 GameCenter 中，游戏分数是 long long int 类型，因此在您的方法中使用 long long，如果在任何地方使用，则返回类型。当你想在标签上使用它时

```
yourLabel.text = [NSString stringWithFormat:@"%lld",yourscore]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T02:16:28.547

仔细查看您的代码。您的 ViewController 的 '-play:' 方法会创建一个新的 GameController。您的 GameController 的“-init”创建了一个新的 ViewController。这真的是你想要的吗？

您没有给我们太多继续，但您的游戏控制器或视图控制器似乎应该“负责”并创建另一个实例。这里有大约一百万个关于如何让一个对象向另一个对象发送一些数据的问题，但它们都归结为：要将信息从对象 a 传递到对象 b，a 需要一个指向 b 的指针。然后 A 可以使用该指针向 b 发送消息。

因此，例如，您的视图控制器会创建游戏控制器。这意味着视图控制器有一个指向游戏控制器的指针，它可以使用实例变量或属性来保存它。如果游戏控制器需要将消息发送回视图控制器，它需要一个指向视图控制器的指针。视图控制器可以在创建游戏控制器时或之后的某个时间提供该指针（指向自身）。为此，游戏控制器需要一个可以接受指向视图控制器的指针的方法。也许你决定在创建时这样做，所以你将游戏控制器的初始化卡通方法更改为'-initWithDelegate:(id)'，定义一个 GameControllerDelegate 协议，然后在你的 ViewController 类中采用该协议。你会这样做，而不仅仅是使用'-initWithViewController：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T05:41:15.013

你有没有尝试过？

```
NSLog(@"the score is %lu", gameScore); 
```

它应该适合你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T02:06:24.140

`%i`是无效的格式说明符；用于有`%d`符号 32 位整数或`%u`无符号 32 位整数

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T02:02:45.080

通常，当调试器正确获取信息但 UI 没有更新时，是因为更新 UI 的操作没有在主线程上执行。尝试这个：

```
dispatch_async(dispatch_get_main_queue(), ^{ [viewController setScore:score]; }); 
```

# java - 在 Java 中使用字符串根据某些要求接受密码

> ID：12666742
> 
> 赞同：0
> 
> 时间：2012-10-01T01:59:20.130
> 
> 标签：java, string

该程序假设接受输入字符串，即密码。然后程序会检查以确保密码长度至少为 8 个字符，至少包含 2 位数字，并且仅包含字母和数字。我似乎无法找到正确的方法来计算至少 2 位数字，尽管据我所知，这种方法应该有效。

这是我在线程“main”java.lang.StringIndexOutOfBoundsException 中得到异常的错误：String index out of range: 10 at java.lang.String.charAt(String.java:658) at Password.main(Password.java:35 )

```
import java.util.*;

public class Password{
    public static void main(String[] args){
    Scanner input = new Scanner(System.in);
    String s;
    int numbers = 0;

    System.out.println("Enter a password (Must contain only letters and numbers, ");
    System.out.print("minimum of 8 characters with atleast two numbers): ");    
    s = input.nextLine();

    while(1==1){
    if (s.length() < 8){
        System.out.println("Password is too short");
        System.out.println("Enter correctly formatted password");
        s = input.nextLine();
        continue;
        }

    if (s.matches("^[a-zA-Z0-9_]+$")){  
    }
    else{
        System.out.println("Password may only contain Letters and Digits");
        System.out.println("Enter correctly formatted password");
        s = input.nextLine();
        continue;
        }

    int i;
    for (i = 0; i <= s.length(); i++){
        if (Character.isDigit(s.charAt(i))){
            numbers++;
            }
            }

    if (numbers < 2){
        System.out.println("Password must contain atleast 2 digits");
        System.out.println("Enter correctly formatted password");
        s = input.nextLine();
        continue;
        }
        break;
        }

    while (0==0){   
    System.out.println("Reenter Password to see if it matches");
        String a = input.nextLine();

    if (s.equals(a)){
        System.out.println("Password matches!");
        break;
        }
    else{
        System.out.println("Password does not match");
        continue;
    }
    }
    }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T02:03:29.973

在你的 for 循环中，你不应该允许`i`等于`s.length()`

```
for (i = 0; i <= s.length(); i++) 
```

ArrayIndexOutOfBoundsException 是在您尝试访问时引起的`s[s.length()]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T03:05:43.750

由于使用从 0 到长度的索引，此语句正在获取异常。而不是使用 0 到 < 长度。

```
 for (i = 0; i <= s.length(); i++){
    if (Character.isDigit(s.charAt(i))){
        numbers++;
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T07:21:31.937

将 for (i = 0; i <= s.length(); i++){ 替换为 for (i = 0; i < s.length(); i++){

示例：假设字符串 s = "abc"。s.length() = 3\. s.charAt(0)= "a", s.charAt(1)= "b", s.charAt(2)= "c"。s.charAt(3) 不存在并抛出异常。

# unix - 带有用户输入的 Bourne shell 脚本

> ID：12666745
> 
> 赞同：1
> 
> 时间：2012-10-01T01:59:56.137
> 
> 标签：unix, sh

我正在尝试使用从图书馆借来的教科书自学 Bourne shell 脚本的基础知识，并且正在解决每章末尾的问题。然而，我刚拿到一个，我被难住了......

> 编写一个脚本，它接受零个或多个参数并打印列表中的最后一个参数。例如，给定参数“myProgram arg1 arg2 arg3”，输出将为“arg3”。

谁能给我一些关于如何设置这个的建议？我正在尝试查看有关用户输入和参数的部分，但到目前为止我还没有使用那么多，所以我还没有太多练习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T02:09:18.330

```
echo ${!#}         # bash only
eval echo \${$#}   # sh-compatible 
```

### 解释

参数的数量是`$#`。可以通过 间接访问变量`${!VAR}`。例如：

```
$ VAR="PATH"
$ echo ${!VAR}
/sbin:/bin:/usr/sbin:/usr/bin 
```

将它们放在一起，如果我们有一个`$n`包含整数的变量，我们可以`$n`使用`${!n}`. 或者而不是`$n`让我们使用`$#`; 最后一个命令行参数是`${!#}`!

* * *

此外，这可以使用数组切片（`$@`是一个包含所有命令行参数的数组）更冗长地编写为：

```
echo ${@:$#:$#} 
```

奇怪的是，您不能使用数组索引：

```
# Does not work
echo ${@[$#]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T02:07:37.850

我只是给你一些指示。既然你想学习 bash，你可能不只是想要一段代码来完成问题所要求的：

1) 你知道如何计算你的 bash 函数有多少个参数吗？

2）你知道如何循环吗？

3）你知道如何“弹出”其中一个论点吗？

4) 你知道如何打印出第一个参数吗？

如果你把所有这些放在一起，我打赌你会想出来的。

# php - MySQL 与 PHP 中的加密和散列

> ID：12666748
> 
> 赞同：1
> 
> 时间：2012-10-01T02:02:41.027
> 
> 标签：php, mysql, stored-procedures, encryption

我正在编写一些简单的登录脚本。我只是想知道，在 MySQL 中使用散列和加密函数而不是 PHP 或其他方式有什么优势吗？

我知道使用存储过程，我可能会传输不安全的敏感信息。另一方面，它可能更易于维护。

使用它们有什么好处吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T02:07:07.883

我看到使用 mysql 加密敏感数据的唯一问题是，如果您运行 php 的 Web 服务器位于 mysql 的不同位置，您可能会通过与这两方通信的网络发送敏感的未加密数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T02:19:36.760

我肯定会在 MySQL 上使用 PHP 来散列密码。有很多方法可以存储和查看查询，如果有这样的查询最终存储在某个地方，那可能会很糟糕：

`SELECT id FROM users WHERE username = 'User123' AND password = MD5(CONCAT('SecretSalt','MyPassword'))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T02:44:54.313

如果您要存储密码，请使用设计为难以破解的散列函数。`bcrypt`是一个合理的选择，这里的许多[答案](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)都详细介绍了如何实现它。

MySQL 的散列方法没有这种安全性，并且用于其他目的，例如散列文档以检查重复。

# python - 在列表理解中将字符串变成列表

> ID：12666751
> 
> 赞同：1
> 
> 时间：2012-10-01T02:02:57.623
> 
> 标签：python

问题：通过过滤较低的列表，创建一个至少有 5 个字母长且其字母已按字母顺序排列的单词列表。

我有的：

```
[word for word in lowers if len(word)>= 5 and word.sort=word] 
```

我知道这不会起作用，因为 word.sort 正在用于字符串，并且 word 需要是一个列表才能使此功能起作用。我将如何在列表理解中执行此操作，或者我之前是否需要定义一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T02:06:55.953

```
>>> sorted('foo') == list('foo')
True
>>> sorted('bar') == list('bar')
False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T02:23:33.013

最简单的方法是使用列表推导：

```
[word for word in lowers if len(word)>=5 and sorted(word)==list(word)] 
```

另一个是使用 Python 2 的[**过滤器**](http://docs.python.org/library/functions.html#filter)功能来处理类似的事情。此外，这使用 string.join 将排序列表转换回字符串

```
#Lambda function to test condition
test = lambda x: len(x)>=5 and ''.join(sorted(x))==x
#Returns list of elements for which test is True
filter(test, lowers) 
```

普通的 ol' 函数（奖励：[生成器](http://wiki.python.org/moin/Generators)和[产量](http://docs.python.org/reference/simple_stmts.html#grammar-token-yield_stmt)！）：

```
def filterwords(lst):
    for word in lst:
        if len(word)>=5 and sorted(word)==list(word):
            yield word 
```

最后一个是最有效的，资源方面的等等。

* * *

更新： .sort() 可用于列表（不是字符串）直接对列表进行排序，但它不返回值。所以，`list(word).sort()`在这里没有用；我们使用`sorted(word)`.

```
>>> lst = [1,100,10]
>>> sorted(lst) #returns sorted list
[1, 10, 100]
>>> lst #is still the same
[1, 100, 10]
>>> lst.sort() #returns nothing
>>> lst #has updated
[1, 10, 100] 
```

# netbeans - 在 OS X 10.8 Mountain Lion 上使用 Netbeans 7.2 启动和运行 cppunit 的分步说明

> ID：12666755
> 
> 赞同：3
> 
> 时间：2012-10-01T02:03:32.057
> 
> 标签：netbeans, osx-mountain-lion, cppunit, netbeans-7.2

有人可以提供让 cppunit 在 OS X 10.8 Mountain Lion 上工作的分步说明吗？这包括所需的任何下载和 Netbeans 的任何配置。

目前，当我添加一个 cppunit 测试时，“添加测试”对话框中会显示“未检测到 cppunit 库。测试编译可能会失败”的警告。我已经从 Sourceforge 和 svn cppunit 下载并将文件复制到 /usr/local/include，但这不会使编译错误消失。

我错过了什么？Google™ 对这个问题没有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T04:41:29.003

我使用 Homebrew 在 OS X 10.8 Mountain Lion 上安装 CppUnit。单元测试然后在 Netbeans 中工作，没有问题。

我遵循的过程是：

1.  安装 XCode 命令行工具
    *   在 XCode 首选项中可用或作为单独的 DMG 下载
2.  安装自制软件
    *   见[http://mxcl.github.com/homebrew/](http://mxcl.github.com/homebrew/)
    *   ruby -e "$(curl -fsSkL raw.github.com/mxcl/homebrew/go)"
    *   按照安装说明（例如最后的brew医生）
3.  使用 brew 安装 cppunit
    *   冲泡安装 cppunit
4.  在 Netbeans 中：
    *   创建 C++ 项目
    *   添加要测试的函数
    *   右键cpp文件，选择“Create Test”，选择CppUnit Test
    *   从列表中选择函数，按照提示创建测试
5.  执行测试
    *   右键项目，选择Test（或crtl+F6）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T04:38:58.810

我终于弄清楚我做错了什么，所以我想我会回答我自己的问题并避免使用*[古人](http://www.xkcd.com/979/)*的智慧。

1.  安装 Xcode。
2.  通过首选项对话框安装 Xcode 命令行工具（[Apple 的文档显示了如何在 Xcode 4 中执行此操作](http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_3.html)）
3.  [从 Sourceforge](http://sourceforge.net/projects/cppunit/files/cppunit/)下载 CPPUnit
4.  提炼
5.  跑`./configure`
6.  跑`make`
7.  跑`sudo make install`

有可能我第一次尝试这个时没有运行正确的命令，`./configure`但这是一个可疑的说法，因为我能够完成标签，即我不应该能够运行 say `./config`。

但我认为我的问题的真正关键是不得不调用`sudo`. `make install`我收到了一个权限错误，因为脚本需要管理员权限才能将库放在需要去的地方。我本可以发誓我在某个时候尝试过这个，但它也失败了。

大约一个月前，我有一位同事为我尝试了这个，他让它起作用了。我拖延了重试，但一旦我这样做了，它就像一个魅力。据我所知，OS X 10.8.1 和 10.8.2 或 .3 之间没有错误。

一旦我按照上面列出的步骤进行操作，我就可以返回 Netbeans 并添加一个单元测试，而不会出现对话框抱怨。此外，测试代码编译并运行。

# javascript - Windows Phone 7 垂直对齐

> ID：12666757
> 
> 赞同：0
> 
> 时间：2012-10-01T02:04:13.050
> 
> 标签：javascript, css, windows-phone-7

如何将 div 元素绝对定位在 bottom='0px' ？我创建了一个按钮（div 标签）。但我只能通过定位它。最佳。

例子：

```
<html>
    <body>
        <div style="position:absolute;
                    width:20px;
                    height:20px;
                    background-color:red;
                    right:0px;
                    bottom:0px">
        </div>     
    </body>
</html>​ 
```

这与 Web 浏览器的右下角完全垂直对齐。但我无法让它在 WP7 Web 控件中工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T04:15:48.397

`bottom`是相对于身体的，所以你必须给身体一些高度。

你可以在这里看到它的工作原理：http: [//jsfiddle.net/jfriend00/VL8Gg/](http://jsfiddle.net/jfriend00/VL8Gg/)

# javascript - 在javascript中检测Firefox中的鼠标位置

> ID：12666758
> 
> 赞同：0
> 
> 时间：2012-10-01T02:04:30.027
> 
> 标签：javascript

我试图通过鼠标移动事件检测元素内的鼠标位置，但它在 Firefox 中不起作用。

```
function mouseover_imageChange(imgid,imgArr) {
    var x= event.pageX- jQuery("#"+imgid).offset().left;
    var y= event.pageY- jQuery("#"+imgid).offset().top;
} 
```

关于如何使其在所有浏览器中工作以及需要传递给函数的参数的任何想法？

谢谢，穆图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T02:21:30.067

既然你似乎在使用 jQuery，为什么不使用这样的东西呢？

```
$(document).ready(function () {
    var startImgTracker = function (e) {
        $(this).mousemove(function (e) {
            console.log(JSON.stringify({
                "x": e.pageX,
                "y": e.pageY,
                "relativeX": e.pageX - $(this).offset().left,
                "relativeY": e.pageY - $(this).offset().top
            }));
        });
    };
    var stopImgTracker = function (e) {
        $(this).unbind('mousemove');
    };
    $('img').hover(startImgTracker, stopImgTracker);
}); 
```

使用`hover`事件来触发`mousemove`处理程序（这是您想要的）和“停止”`hover`事件来取消绑定`mousemove`. 确保包含一个事件参数以获取当前`pageX`和`pageY`.

这应该适用于任何将运行 jQuery 的浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T03:44:50.300

@Muthu

这是“在视口中获取鼠标的 X 和 Y 坐标”的工作演示[http://jsfiddle.net/XsqBz/](http://jsfiddle.net/XsqBz/)

请在下面找到完整的源代码。享受。

```
<!doctype html> 
<html lang="en">
<head> 
<title>jQuery: Getting X and Y coordinates of the mouse in the viewport</title> 
<style> 
html{background:#f9f9f9;background-color:#f9f9f9;} 

body{background:#fff;background-color:#fff;color:#666;font-family:"Lucida Grande",Verdana,Arial,Georgia,"Bitstream Vera Sans","Bitstream Charter",sans-serif,serif;margin:2em auto;width:700px;padding:1em 2em;-moz-border-radius:11px;-khtml-border-radius:11px;-webkit-border-radius:11px;border-radius:11px;border:1px solid #dfdfdf;} 

body{ 
font-size:11px; 
line-height:15px; 
background:#fff;
background-color:#fff; 
color:#666; 
margin-left:20px; 
} 

strong{font-size:12px;}
a:link{color:#0066CC;}
a:hover{color:#FF6600;}
a:visited{color:#003366;}
a:active{color:#9DCC00;} 

p{font-size:18px;} 

.relativeX, .relativeY{color:#666;font-size:13pt;} 
.relativeX{font-size:48pt;color:#fc0;position:relative;top:-20px;left:30px;} 
.relativeY{font-size:52pt;position:relative;top:-09px;left:-10px;} 
</style>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head> 
<body> 
<!-- Move mouse over div to get position --> 
<div style="margin:10px;height:400px;width:90%;min-width:420px;background:#ccc;padding:20px;border:1px dotted #777;display:block;"> 
  relative to this 
</div>  
<script> 
(function($) { 
$(document).bind('contextmenu', function(){ 
  return false; 
}); 

  $('div').mousemove(function(e){ 
    // Relative to this div element instead of document 
    var relativeX = e.pageX - this.offsetLeft; 
    var relativeY = e.pageY - this.offsetTop;
    $(this).html('releativeX = <span class="relativeX">' + relativeX + '</span>, releativeY = <span class="relativeY">' + relativeY + '</span>'); 
  }); 
})(jQuery); 
</script>
</body> 
</html> 
```

# c++ - sizeof 可变参数模板（所有元素的 sizeof 之和）

> ID：12666761
> 
> 赞同：13
> 
> 时间：2012-10-01T02:05:18.983
> 
> 标签：c++, c++11, tuples, sizeof, variadic-templates

考虑以下功能：

```
template<typename... List> 
inline unsigned int myFunction(const List&... list)
{
    return /* SOMETHING */; 
} 
```

`/* SOMETHING */`为了返回`sizeof`所有参数的总和，最简单的方法是什么？

例如`myFunction(int, char, double) = 4+1+8 = 13`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-01T02:14:31.357

```
unsigned myFunction() {return 0;}

template <typename Head, typename... Tail>
unsigned myFunction(const Head & head, const Tail &... tail) {
    return sizeof head + myFunction(tail...);
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-03-18T18:38:21.010

在 C++17 中，使用折叠表达式：

```
template<typename... List> 
inline constexpr unsigned int myFunction(const List&... list)
{
    return (0 + ... + sizeof(List));
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-01T02:16:38.847

根据[此评论](https://stackoverflow.com/questions/3628364/count-of-parameters-in-a-parameter-pack-is-there-a-c0x-std-lib-function-for-t#comment3816253_3628564)和对该问题的以下评论，您可以使用它（注意：完全未经测试）

```
std::initializer_list<std::size_t> sizeList = {sizeof(List)...}; //sizeList should be std::initializer_list, according to the comments I linked to
return std::accumulate(sizeList.begin(), sizeList.end(), 0); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-18T18:18:01.133

晚了两年，但保证由编译器计算一个替代解决方案（如果你不介意不同的语法）：

```
template < typename ... Types >
struct SizeOf;

template < typename TFirst >
struct SizeOf < TFirst >
{
    static constexpr auto Value = (sizeof(TFirst));
};

template < typename TFirst, typename ... TRemaining >
struct SizeOf < TFirst, TRemaining ... >
{
    static constexpr auto Value = (sizeof(TFirst) + SizeOf<TRemaining...>::Value);
}; 
```

用作`constexpr std::size_t size = SizeOf<int, char, double>::Value; // 4 + 1 + 8 = 13`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-19T15:44:29.273

这是一个模板方式：

```
#include <iostream>

template<typename T, typename ...Ts>
class PPackSizeOf
{
  public:
  static const unsigned int size = sizeof(T) + PPackSizeOf<Ts...>::size;
};

template<typename T>
class PPackSizeOf<T>
{
  public:
  static const unsigned int size = sizeof(T);
};

template<typename ...Ts>
class FixedSizeBlock
{
   private:
      char block[PPackSizeOf<Ts...>::size];
   public:

};

int main( )
{
  FixedSizeBlock<char,long> b;
  std::cout << sizeof(b) << std::endl; 
  return 0;
} 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-10-01T02:20:06.400

我刚刚发现：

```
template<typename... List> 
inline unsigned int myFunction(const List&... list)
{
    return sizeof(std::make_tuple(list...)); 
} 
```

但 ：

1）我是否保证所有编译器的结果总是相同的？

2) make_tuple 会在编译时生成和开销吗？

# php - 无法找到 PEAR HTML 电子邮件

> ID：12666767
> 
> 赞同：1
> 
> 时间：2012-10-01T02:06:25.067
> 
> 标签：php, email, pear, html-email

好的，已经尝试了几个小时，查看大量问题和文档，但没有运气。

我可以使用 PEAR 从 gmail 帐户发送纯文本电子邮件。没问题。

但我意识到我需要一个链接，所以我想把它做成 HTML 电子邮件。[在这里](https://stackoverflow.com/questions/3058897/sending-html-email-from-php)、[这里](http://www.euperia.com/development/php/sending-html-mail-via-smtp-with-php-pear-mail/808)、[这里](http://pear.php.net/manual/en/package.mail.mail-mime.example.php)和更多地方尝试过问题和文档。

到目前为止，我有：

```
$em = new EmailObject;
$em->to = 'recipient@someplace.com';
$em->htmlbody = 'Some HTML msg with a <a href="goto.com?link=true">link</a>';
$em->body = 'Backup text';
$em->sendMail();

class EmailObject
{
    public $to = '';
    public $cc = '';
    public $bcc = '';
    public $subject = '';
    public $body = '';
    public $htmlbody = '';

    function sendMail()
    {
        $headers = array('From' => ***withheld*** ,
                  //'Return-Path' => ***withheld*** ,
                           'To' => $this->to,
/*                           'CC' => $this->cc,
                          'BCC' => $this->bcc, */
                      'Subject' => $this->subject);

        /*if ($this->cc <> '') { $headers['CC'] = $this->cc; }
        if ($this->bcc <> '') { $headers['BCC'] = $this->bcc; }          */  

        $server = array('host' => 'ssl://smtp.gmail.com',
                        'port' => '465',
                        'auth' => true,
                    'username' => ***withheld*** ,
                    'password' => ***withheld*** );
        $clrf = "\n";

        //Tried all sorts here:
        //$mime = new Mail_mime( array('eol' => $clrf, 'text_charset' => 'utf-8', 'html_charset' => 'utf-8') );
        $mime = new Mail_mime();

        $mime->setTXTBody = $this->body;
        $mime->setHTMLBody = $this->htmlbody;

        // Tried all sorts here:
        // $body = $mime->get();
        // $body = $mime->getMessageBody();
        // $body = $mime->getMessageBody(array('eol' => $clrf, 'text_charset' => 'utf-8', 'html_charset' => 'utf-8'));
        $body = $mime->get(array('eol' => $clrf, 'text_charset' => 'utf-8', 'html_charset' => 'utf-8'));
        $headers = $mime->headers($headers);
        $smtp =& Mail::factory('smtp', $server);
        $mail = $smtp->send($this->to, $headers, $body);

        print '<pre>';
        var_dump($body);
        var_dump($headers);        
        print '</pre>';

        /* Working snippet for plain text:
        $smtp = @Mail::factory('smtp', $server);
        $mail = @$smtp->send($this->to, $headers, $this->body);*/

        return PEAR::isError($mail);
    }
} 
```

现在电子邮件确实发送了，但是没有创建正文。它有正确的收件人和抄送，但电子邮件正文中没有任何内容。当我 vardump`$body`返回的`$mime->get()`或使用的任何一个时，它总是返回 NULL。到底是怎么回事？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T02:23:41.153

我已经成功使用[PHPMailer 5.2.0](http://code.google.com/a/apache-extras.org/p/phpmailer/)，这可能值得一试。其他一些作为评论发布。在你拉出太多头发之前，我肯定会尝试另一个电子邮件帐户或包裹。

# regex - .*（点星）如何工作？

> ID：12666768
> 
> 赞同：32
> 
> 时间：2012-10-01T02:06:26.340
> 
> 标签：regex

我已经明白这`.*`意味着零个或多个任何字符，但是有人可以解释一下`.*`接下来的工作如何以及它会匹配什么吗？

```
.*([a-m/]*).*

.*([a-m/]+).*

.*?([a-m/]*).* 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-01T02:07:58.430

点表示任何东西都可以放在这里，星号表示至少 0 次，因此`.*`接受任何字符序列，包括空字符串。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-01T02:27:59.750

每种情况都不同：

**`.*([a-m\/]*).*`**

第一个`.*`可能会匹配整个字符串，因为`[a-m/]`不需要存在，第一个`*`是贪婪的并且首先出现。

**`.*([a-m\/]+).*`**

第一个`.*`将匹配整个字符串，直到匹配的最后一个字符，`[a-m/]`因为只需要一个，第一个`*`是贪婪的并且首先出现。

**`.*?([a-m\/]*).*`**

第一个`.*?`将匹配字符串直到匹配的第一个字符`[a-m/]`，因为`*?`不是贪婪的，然后`[a-m/]*`将匹配所有可以匹配的，因为`*`是贪婪的，然后最后一个`.*`将匹配字符串的其余部分。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-01T02:11:48.080

.* 在您的示例中的功能是确保包含表达式可以被任何东西（或什么都没有）包围。点表示任意字符，星号表示之前的字符可以重复任意次数（或根本不重复）。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-10-01T02:10:40.890

.* 表示“任何字符，任何重复次数”。

# c# - 计数错误？

> ID：12666771
> 
> 赞同：0
> 
> 时间：2012-10-01T02:07:04.577
> 
> 标签：c#

我得到了错误的计数错误，我不知道为什么。

在我的数据库中，serverId = 1/2/3 每个服务器只有一个启动值和 3 个未启动值。

```
painfo = (from paes in server.AppPM_Paes
          where (paes.PaStatus == "Started" || paes.PaStatus == "NotStarted" ) && paes.ServerId != null
          select new PaDetails { ServerID = paes.ServerId, PaStatus = paes.PaStatus }).ToList();
foreach (PaDetails a in painfo)
{
    if (a.PaStatus.Contains("Started") && a.ServerID.Equals(1))
        stCount1++;
    if (a.PaStatus.Contains("Started") && a.ServerID.Equals(2))
        stCount2++;
    if (a.PaStatus.Contains("Started") && a.ServerID.Equals(3))
        stCount3++;
    if (a.PaStatus.Contains("NotStarted") && a.ServerID.Equals(1))
        notStCount1++;
    if (a.PaStatus.Contains("NotStarted") && a.ServerID.Equals(2))
        notStCount2++;
    if (a.PaStatus.Contains("NotStarted") && a.ServerID.Equals(3))
        notStCount3++;                    
} 
```

但在我上面的代码（stCount#->started count）`stCount#`中，值是 4 而不是 1。

我的代码有什么问题？

你能帮我么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T02:08:34.853

你正在做一个`.Contains("Started")`. 这将包括任何包含“Started”字样的字符串，包括“NotStarted”

您可以将其更改为`a.PaStatus == "Started"`或`a.PaStatus.Equals("Started")`

# .htaccess - htaccess 条件重写？

> ID：12666773
> 
> 赞同：0
> 
> 时间：2012-10-01T02:07:08.980
> 
> 标签：.htaccess, mod-rewrite

我试图阻止对 CodeIgniter 控制器功能的公共访问，但这个 .htaccess 规则不起作用：

```
#Block External Access to create pdfs function
RewriteCond %{REMOTE_ADDR} !^127\.0\.0\.0
RewriteCond %{REMOTE_ADDR} !^x\.x\.x\.x
RewriteCond %{REQUEST_URI} ^/applicationForm/createPDF
RewriteRule ^(.*)$ index.php/$1 [F,L] 
```

请注意 x 已替换为服务器公共 IP

我只是不明白为什么这行不通。

其余的 mod 重写工作正常：

```
#Removes access to the system folder by users.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T02:12:11.510

这行得通吗？

```
RewriteCond %{REMOTE_ADDR} !^127\.0\.0\.0
RewriteCond %{REMOTE_ADDR} !^x\.x\.x\.x
RewriteRule ^/?applicationForm/createPDF /index.php/$1 [F,L] 
```

# google-apps-script - 与 Google Apps 脚本一起使用的 Caja 版本

> ID：12666774
> 
> 赞同：2
> 
> 时间：2012-10-01T02:07:32.333
> 
> 标签：google-apps-script, google-caja

Google Apps Script 是使用最新版本的 Caja for HtmlService 还是有些落后？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T06:43:07.777

最新的 Caja 版本和 GAS 的 Caja 版本之间存在差异。

*   [Caja Playground](http://caja.appspot.com/)中的 Caja 版本是`5065`
*   GAS Caja 版本是`4969m`

版本信息存储在`cajolerVersion`Caja 生成的 HTML 代码的“变量”中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T13:43:54.143

尽管这是一个有趣的功能请求，但无法访问 Apps Script 中的版本。作为一般规则，Apps Script 比 Caja 滞后大约 2 周，无论是给予还是接受。

# excel - 编译错误：vba 中未定义子或函数

> ID：12666778
> 
> 赞同：2
> 
> 时间：2012-10-01T02:08:05.353
> 
> 标签：excel, vba

我有一个带有三个按钮的用户表单。单击确定按钮时，我编写了以下代码：

```
Private Sub CommandButton2_Click()
   Call calculateCost
End Sub 
```

我在 Sheet1 中编写的子方法是：

```
Public Sub calculateCost()
    Dim kilo As String
    kilo = Worksheets("Sheet1").TextBox1.Text
    MsgBox "value" & kilo
End Sub 
```

当我运行代码时，我得到了错误。调用calculateCost 附近未定义子或函数。为什么会这样？如何解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T02:27:56.740

将您的计算成本过程移动到标准模块（插入 - VBE 中的模块）。类模块中的过程，包括工作表类模块，不能这样调用。您可以通过其他方式从工作表的类模块中调用它，但我在您的过程中看不到任何需要它位于工作表模块中的内容，因此它可能属于标准模块。

# objective-c - CGContextFillRect 不工作

> ID：12666779
> 
> 赞同：0
> 
> 时间：2012-10-01T02:08:19.677
> 
> 标签：objective-c, ios, quartz-graphics

这段代码似乎什么也没做。构建成功，没有错误。屏幕上没有绘制矩形。

```
- (void)viewDidLoad
{

    [super viewDidLoad];

    UIColor *reliantMagenta             = [UIColor colorWithRed:208.0f / 255.0f green:27.0f / 255.0f blue:124.0f / 255.0f alpha:1];

    CALayer *reliantCanvasLayer         = [CALayer layer];

    reliantCanvasLayer.frame            = CGRectMake(0, 0, 640, 960);

    [[[self view] layer] addSublayer:reliantCanvasLayer];

    CGContextRef ctx                    = UIGraphicsGetCurrentContext();
    CGRect leftRect                     = CGRectMake(0, 0, 200, 300);

    CGContextSaveGState(ctx);
    CGContextSetFillColorWithColor(ctx, reliantMagenta.CGColor);

    CGContextFillRect(ctx, leftRect);
    CGContextRestoreGState(ctx);

} 
```

我只是在学习 Quartz，并且非常喜欢它。如果你想解释 UIViews、CALayers、CGLayers 和上下文之间的关系，这也会有很大帮助，但不是必需的，只是很难理解发生了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T02:32:02.750

如果您是从 Quartz 开始的，那么您应该从[Quartz 2D Programming Guide](https://developer.apple.com/library/ios/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/Introduction/Introduction.html)开始，其中介绍了所有这些。您在这里的主要错误是`viewDidLoad`. 这种绘图通常在`drawRect:`. 您的调用此时`UIGraphicsGetCurrentContext()`返回`NULL`。

通读编程指南后，您可能会有更多问题，但您应该从那里开始学习自定义绘图。

# c# - 值不为零时清零

> ID：12666783
> 
> 赞同：0
> 
> 时间：2012-10-01T02:08:39.883
> 
> 标签：c#, .net

我正在使用 TrimStart('0') 清除前导零。

例如 ：

```
string value= "00999";
value = value.TrimStart('0'); 
```

它工作得很好。

但现在发生的事情是我不想修剪为零的值，例如 00。

例如，返回结果为 00 ：

```
string value= "00";
    value = value.TrimStart('0'); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T02:09:49.473

只需添加这一行：

```
if (value == "")
    value = "0"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T02:17:32.277

```
if (value.TrimStart('0') != "")
  value = value.TrimStart('0'); 
```

这只会在字符串包含除 0 之外的其他字符时修剪字符串。

# mysql - MySQL GroupBy 并水平显示

> ID：12666796
> 
> 赞同：5
> 
> 时间：2012-10-01T02:10:43.323
> 
> 标签：mysql, sql, group-by, pivot

假设我有下表：

```
1) tblScore

============================ 
Date      VendorID     Score 
============================ 
12/09/01  12001        A     
12/09/01  12001        A     
12/09/01  12002        B     
12/09/02  12003        C     
12/09/02  12003        A     
12/09/03  12001        C     
============================ 
```

我有这个查询：

```
SELECT ts.VendorID, ts.Score, COUNT(*)
FROM trxscore ts
GROUP BY ts.VendorID, ts.Score
ORDER BY ts.VendorID, ts.Score 
```

但是如何显示表格：

```
===========================
VendorID    A    B    C
===========================
12001       2    0    1
12002       0    1    0 
12003       1    0    1
=========================== 
```

而且，是否有可能从文本中获得平均值？即，`VendorID 12001`应该得到 A 的平均值。谢谢...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T02:18:10.820

试试这个，

```
SELECT  VendorID,
        SUM(CASE WHEN Score = 'A' THEN 1 ELSE 0 END) totalA,
        SUM(CASE WHEN Score = 'B' THEN 1 ELSE 0 END) totalB,
        SUM(CASE WHEN Score = 'C' THEN 1 ELSE 0 END) totalC
FROM    tableName
GROUP BY VendorID 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/1de17/2)

# heroku - Heroku bash shell 中提供了哪些文本编辑器？

> ID：12666799
> 
> 赞同：120
> 
> 时间：2012-10-01T02:11:02.107
> 
> 标签：heroku, text-editor

我正在尝试在基于 Cedar 的 Heroku 应用程序中更新 httpd.conf。我到了我的 Heroku bash

```
 heroku run bash 
```

并在apache下找到了conf目录。但是当我尝试打开任何编辑器 vi、vim 或 emacs 时，我找不到任何这些程序。你如何在 Heroku 上编辑 conf 文件？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-12-19T20:54:11.560

我最近把[原来的 gist](https://gist.github.com/naaman/2847793)变成了一个[heroku cli 插件](https://github.com/naaman/heroku-vim)。

只需安装：

`heroku plugins:install https://github.com/naaman/heroku-vim`

并使用：

`heroku vim`

该`heroku vim`命令会将您放入`vim`安装在`$PATH`. 您所要做的就是重新训练您的手指打字`heroku vim`而不是`heroku run bash`.

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2018-01-09T12:54:23.857

如果您不想弄乱插件，只想在一次性测功机中复制 nano，只需运行

```
mkdir /app/nano
curl https://github.com/Ehryk/heroku-nano/raw/master/heroku-nano-2.5.1/nano.tar.gz --location --silent | tar xz -C /app/nano
export PATH=$PATH:/app/nano 
```

这将从[该插件](https://github.com/Ehryk/heroku-nano)下载 nano 的副本并将其放入您的 PATH 中。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2015-03-20T21:35:45.840

如果`ed`你是一个受虐狂。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2013-03-02T23:15:30.957

看起来您可以为一个会话下载并安装 vim：

```
#!/usr/bin/env bash
curl https://s3.amazonaws.com/heroku-jvm-buildpack-vi/vim-7.3.tar.gz --output vim.tar.gz
mkdir vim && tar xzvf vim.tar.gz -C vim
export PATH=$PATH:/app/vim/bin 
```

这个想法是在[这里](https://gist.github.com/btakita/7853541)找到的。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2012-10-01T13:03:21.363

即使您可以使用它编辑文件`vi`也可能无法解决您的问题，因为文件系统是短暂的。含义...如果您通过编辑文件，`heroku run bash`您实际上并没有更改其他测功机的文件。要更改所有 dynos 的文件，您需要更改您在 Git 存储库中推送的内容或更改 buildpack。更多细节：
[https ://devcenter.heroku.com/articles/oneoff-admin-ps#formation-dynos-vs-oneoff-dynos](https://devcenter.heroku.com/articles/oneoff-admin-ps#formation-dynos-vs-oneoff-dynos)

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2018-12-31T17:26:49.483

[Naaman Newbold 提供的插件](https://stackoverflow.com/a/20691484/10852581)不再使用`heroku-16`堆栈，所以我从这个[更新的 gist中制作了一个新](https://gist.github.com/dvdbng/7375821b20f189c189ab1bd29392c98e)[插件](https://github.com/jasonheecs/heroku-vim)。

安装：

`heroku plugins:install @jasonheecs/heroku-vim`

并使用：

`heroku vim`

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-01-03T18:53:29.973

在 Brian Takita 的答案链接的评论中，有更新的解决方案可以让**Vim**在 Heroku 控制台上工作：

[https://gist.github.com/dvdbng/7375821b20f189c189ab1bd29392c98e](https://gist.github.com/dvdbng/7375821b20f189c189ab1bd29392c98e)

刚刚为我节省了很多时间！:)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2015-01-28T06:13:30.650

# 在 Heroku 上调试

## 准备测功机

安装后`naaman/heroku-vim`，您可以通过`heroku vim`. 正如其他帖子正确指出的那样，您在通过浏览器查看时将无法看到您的更改，因为更改不会被传播，但是......您实际上可以从测功机本身内部查看更改。

我只尝试过通过 curl 进行“浏览”，但如果你能进入`lynx`那里，或者更好的是获得一个 ssh 隧道 - 可能真的很棒。

## 启动服务器

当您实例化 heroku-vim 时，Web 服务器不会运行，因此您需要自己进行。在我的示例中，我正在运行 php：

```
~ $ cat Procfile
web: vendor/bin/heroku-php-apache2 
```

您可以自己启动此命令！

```
~ $ vendor/bin/heroku-php-apache2 2>/dev/null &
[2] 845 
```

它现在在后台运行！

## 卷曲您的网站

Dynos 在随机端口上启动。幸运的是，您知道哪一个，因为它是`$PORT`变量！

```
~ $ curl localhost:$PORT
Hello World! 
```

## 编辑

现在做你的 vim 事情，但是当你保存文件并再次 curl 时 - 你不会看到更改。我不明白它被缓存在哪里，但它被缓存了。您必须杀死服务器并重新启动它。

## 重新启动服务器

1.  查找进程 ID

    ```
    ~ $ ps -f
    UID        PID  PPID  C STIME TTY          TIME CMD
    u6897        3     1  0 05:34 ?        00:00:00 bash
    u6897      582     3  0 05:53 ?        00:00:00 bash vendor/bin/heroku-php-apache2
    u6897      652   582  0 05:53 ?        00:00:00 bash vendor/bin/heroku-php-apache2
    u6897      653   582  0 05:53 ?        00:00:00 bash vendor/bin/heroku-php-apache2
    ```

    这`582`是父 ID - 使用它。

    ```
    kill 582 
    ```

2.  只需等待 1 秒钟，然后再次启动服务器（您将获得一个新的进程 ID！）。通过相同的命令进行卷曲现在将为您提供更新的页面。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2017-01-16T18:07:03.337

在 Heroku 中编辑文件的紧急替代方法：

1.  将它的副本放在某个远程主机上。我喜欢用 Gist
2.  在 Gist 上编辑文件，完成后获取它的原始 URL
3.  `wget`Heroku bash 上的原始 URL
4.  将获取的文件复制到原始文件的路径

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-11-29T18:02:40.437

我写了一篇关于[如何使用 Nano 或 Vim 在 Heroku Dynos 上编辑文件](http://www.compulsivecoders.com/tech/how-to-edit-a-file-on-heroku-dynos-using-nano-or-vim/)的完整文章，但基本上是：

*   您可以使用命令行：

    `curl https://s3.amazonaws.com/heroku-jvm-buildpack-vi/vim-7.3.tar.gz --output vim.tar.gz mkdir vim && tar xzvf vim.tar.gz -C vim export PATH=$PATH:/app/vim/bin`

*   你可以使用 Heroku 插件：[heroku-vim](https://github.com/naaman/heroku-vim)
*   你可以使用 Heroku Buildpacks：[heroku-buildpack-vip](https://github.com/carloluis/heroku-buildpack-vim)

希望能帮助到你！

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-02-01T11:14:07.130

如果您只想查看文件的内容，则：

1.  cd 到文件所在的文件夹，例如`$ cd folder`
2.  运行 cat 命令 + 文件名，例如`$ cat filename.csv`

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-04-09T10:36:21.403

现在有许多包含 vim 的构建包：[https ://elements.heroku.com/search/buildpacks?q=vim](https://elements.heroku.com/search/buildpacks?q=vim)

[您可以使用support buildpack support](https://devcenter.heroku.com/articles/using-multiple-buildpacks-for-an-app)将其中之一添加到有问题的 Heroku 应用程序中。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-02-02T19:09:34.093

如果您的服务器运行 php，另一种方法是上传 PHP 文件管理器，它是单个文件，您可以从

`http://phpfm.sourceforge.net/`

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-09-23T17:59:48.033

可以在测功机中更改文件并查看结果，而无需推送到 Heroku：

1.  安装`heroku-buildpack-vim`构建包：

    ```
    $ heroku buildpacks:add \
    https://github.com/carloluis/heroku-buildpack-vim 
    ```

2.  SSH进入测功机：

    ```
    $ heroku ps:exec 
    ```

3.  创建并运行 start.sh：

    ```
    #!/usr/bin/env bash
    set -eu
    export DATABASE_URL=...
    bin/rails s -p 4000 
    ```

4.  转发端口 4000（第二个控制台）：

    ```
    $ heroku ps:forward 
    ```

5.  `localhost:4000`在浏览器中打开。

6.  停止`start.sh`，更改文件，重新开始，刷新浏览器页面。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-12-09T08:18:52.110

我更喜欢 Nano 编辑器，您可以使用以下 buildpack... [https://github.com/velizarn/heroku-buildpack-nano](https://github.com/velizarn/heroku-buildpack-nano)

# javascript - 带有标题和段落的简单（新手）手风琴效果

> ID：12666800
> 
> 赞同：2
> 
> 时间：2012-10-01T02:11:37.637
> 
> 标签：javascript, html, css, accordion, nodes

我需要知道如何在单击 h2 标题时创建一个简单的手风琴效果（只有 div 下 id 为“手风琴”的 h2 标签）。如果标题下的段落被隐藏，则应显示它们；如果单击标题时显示它们，则应隐藏它们。作业的说明在 HTML 代码中。我大约有 90% 在那里，但我需要帮助看看我做错了什么。这是一个完整的新手脚本，所以我不能使用任何复杂的东西（没有 innerHTML）。我需要能够访问 h2 标题的 parentNode（它有一个 div 标签）并使用 parentNode 来访问 h2 标题下的子段落。所以我将在下面粘贴我的 HTML、CSS 和 JavaScript。最后一点，我不能改变 CSS 或 HTML，手风琴必须基于 JavaScript 工作。JavaScript 必须有 2 个函数并且只有 2 个函数。好的，代码如下：

**HTML**

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org  /TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
        <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Best Practices - Jason McCoy</title>
        <link href="css.css" type="text/css" rel="stylesheet" />
        <script src="test.js" type="text/javascript"></script>
        </head>
        <body>
        <h1>Accordion - Jason McCoy</h1>
        <hr />
        <h2>Instructions</h2>
        <p>Create a simple accordion while implementing best practices.</p>
        <ol>
          <li>Change the part of the page heading to your name.</li>
          <li>Add your name to the &lt;title&gt; also.</li>
          <li>Create and link to an external CSS.
          <ul>
            <li>Create a class with a single declaration: <em>display:none;</em> Name the class <strong>.hideContent</strong>.  No class attribute should be added to the HTML.</li>
            <li>Create a second class with a single declaration: <em>display:block;</em> Name the class <strong>.showContent</strong>.</li>
            <li>Create two more CSS rules. One should remove the bottom margin from all H2s. The other should remove the top margin from all paragraphs.</li>
          </ul>
          </li>
          <li>Create and link to a JavaScript file.
          <ul>
          <li>Create exactly two functions. One called <strong>preparePage()</strong> that automatically applies the .hideContent style to all paragraphs within the accordion div and then makes the desired H2s call the second function when clicked. The second function,<strong>accordion()</strong>, performs the class switching.</li>
          <li>Make preparePage() run when the page loads.</li>
          <li>When an H2 inside the "accordion" div is clicked, the associated paragraph should change class so that it appears. If the paragraph is already visible, then it should disappear when its H2 is clicked.</li>
          <li>No inline JavaScript should appear in the HTML. Only a SCRIPT tag should be present in the HTML. No other JavaScript should be in the HTML anywhere.</li>
          <li>Study the HTML first so you know the structure! Similar to backing up out of folders (like you did in NOS-110 using subdirectory markers) you will have to &quot;back up&quot; out of the H2 to get its parentNode. Then you can use that parentNode to descend back down to the child paragraph.</li>
          </ul>
          </li>
        </ol>
        <p>The only changes to this HTML file should be the addition of a &lt;script&gt; tag to link to your JS file, the addition of a &lt;link&gt; tag to link to your CSS, and the addition of your name to both the title and page heading.</p>
        <div id="accordion">
        <div>
        <h2>What is Lorem Ipsum?</h2>
        <p><strong>Lorem Ipsum</strong> is simply dummy text of the printing and   typesetting industry..</p>
        </div>
        <div>
        <h2>Where does it come from?</h2>
        <p>Contrary to popular belief, Lorem Ipsum is not simply random text..</p>
        </div>
        <div>
        <h2>Why do we use it?</h2>
        <p>It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout.</p>
        </div>
        <div>
        <h2>Where can I get some?</h2>
        <p>There are many variations of passages of Lorem Ipsum available</p>
        </div>
        </div>
        </body>
        </html> 
```

**CSS**

```
/* create a class that hides the text */
.hidecontent {
display: none;
}

/* create a class that shows the text */
.showcontent {
display: block;
}

/* h2 rules */
h2 {
margin-bottom: 0;
}

/* paragraph rules */
p {
margin-top: 0;
} 
```

**JavaScript**

```
/* once the page finishes loading, run the preparePage function */
window.onload = function preparePage() {

/* Step 1: get the necessary elements needed from the accordion div section of the HTML */
    var accodion = document.getElementById('accordion');                    
var accordionHeadings = accordion.getElementsByTagName('h2');               
var accordionParagraphs = accordion.getElementsByTagName('p');                      

/* Step 2: use a for loop to set the class of the accordionParagraphs to 'hidecontent' */
for (var i = 0; i < accordionParagraphs.length; i++) {                  
    accordionParagraphs[i].className = 'hidecontent';               
}

/* Step 3: use a for loop to get to the headings
 * when a heading is clicked,
 * run the accordion function
 */
    for(var i = 0; i < accordionHeadings.length; i++) {
        accordionHeadings[i].onclick = function accordion() {
            if(accordionParagraphs.className == 'hidecontent') {
                accordionParagraphs.className = 'showcontent';
            } else {
                accordionParagraphs.className = 'hidecontent';
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T02:36:17.913

我认为问题在于，在第 3 步中，您尝试设置`className`of `accordionParagraphs`，这实际上是一个数组而不是一个元素。

尝试用这样的东西替换它：

```
accordionHeadings[i].onclick = function accordion() {

    // 'this' refers to the element that was clicked
    // 'nextElementSibling' gets the element directly after it
    var accParagraph = this.nextElementSibling;

    // now you have the right element, you can change its class
    if (accParagraph.className == 'hidecontent') {
        accParagraph.className = 'showcontent';
    } else {
        accParagraph.className = 'hidecontent';
    }
} 
```

编辑：

你也可以这样做：

```
// 'this' refers to the element that was clicked (heading)
// 'parentNode' gets its parent
// 'getElementsByTagName('p')[0]' selects the first <p> element
var accParagraph = this.parentNode.getElementsByTagName('p')[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T02:48:58.150

写得很好的问题，首先。使用两个功能是吗？有几种不同的方法可以做到这一点。您已经分配了 onclicks，所以您的状态很好。但是您正在为*accordeonParagraphs*数组本身分配一个类名，而不是元素。那里小心。使用accordionParagraphs[i].className...

基本上，您需要首先找到点击标题的索引。这很容易，因为 onclick 事件向 window 对象注册 - 使用 window.event.target 获取目标对象（可能因浏览器而异，因此如果您的分配依赖于它，请查看如何彻底完成它 - 这适用于铬和FF肯定）。使用它，您可以实际引用刚刚单击的对象。由于您已经有一个标题列表，请浏览它们并查看您单击的是哪一个：

```
for(var i = 0; i < accordeonHeadings.length; i++){
    if(window.event.target == accordeonHeadings[i]){

    }
} 
```

现在在 if 语句中，您只需使用 i 的索引来访问相应的段落并更改它。

```
for(var i = 0; i < accordeonHeadings.length; i++){
    if(window.event.target == accordeonHeadings[i]){
        if(accordionParagraphs[i].className == 'hidecontent') {
            accordionParagraphs[i].className = 'showcontent';
        } else {
            accordionParagraphs[i].className = 'hidecontent';
        }
    }
} 
```

那应该这样做。我没有测试这段代码，它可能包含会破坏它的拼写错误，所以你自己测试一下。

祝兄弟好运。

# linux - 为什么我的核心文件没有被覆盖？

> ID：12666801
> 
> 赞同：4
> 
> 时间：2012-10-01T02:11:40.560
> 
> 标签：linux, ubuntu, gdb, core, filemtime

在 Ubuntu 12.04 上，打开一个新的文本文件并写入：

```
#include <stdlib.h>

int main()
{
    abort();
    return 0;
} 
```

现在运行：

```
g++ yourfile.cpp 
```

然后运行可执行文件，它将核心转储：

```
./a.out 
```

现在检查文件的 mtime：

```
-rw-r----- 1 xxxxx xxxxx 228K 2012-10-01 19:20:20.752136399 -0500 core 
```

现在再次运行可执行文件：

```
./a.out 
```

现在再次检查 mtime：

```
-rw-r----- 1 xxxxx xxxxx 228K 2012-10-01 19:20:20.752136399 -0500 core 
```

一样的！为什么新内核不会覆盖旧内核？重建时，这会导致 gdb 抱怨内核比可执行文件旧。

为了确保这不是权限问题，我在 /tmp 的新目录中尝试了这个并在`chmod -R 777 **/*`里面运行。运行两次可执行文件仍然没有产生新的核心 O_o 此外，`ulimit -c`报告 800000000，对于这种大小的核心来说绰绰有余。

我还尝试运行一个干净的 bash，`env - bash --noprofile --norc`并且仍然运行二进制文件不会更新核心的 mtime，除非我先删除它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T02:54:12.210

如果您参考[https://bugs.launchpad.net/ubuntu/+source/apport/+bug/160999](https://bugs.launchpad.net/ubuntu/+source/apport/+bug/160999) ，这是 Ubuntu 中`O_EXCL`用于打开文件的错误，防止它覆盖现有核心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T05:02:48.560

[core(5)](http://www.kernel.org/doc/man-pages/online/pages/man5/core.5.html)`core`手册页列出了文件不被 [re-] 写入的某些条件。您可能满足其中一个条件。请仔细阅读该手册页。

# wordpress - 响应式设计不适用于 W3 Total Cache

> ID：12666809
> 
> 赞同：0
> 
> 时间：2012-10-01T02:12:34.203
> 
> 标签：wordpress, responsive-design

我正在使用[Swift 主题](http://swiftthemes.com/)及其响应式主题。但我的问题是，每当我激活 W3Total Cache 时，主题大小不会根据浏览器大小而变化。可能是什么问题？谁能帮我纠正这个问题。我的博客[数字建议](http://www.digitaladvices.com/) 问候，Vivek。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:37:36.427

你能澄清一下你是如何建立你的 W3C 的吗？如果我不得不猜测，我会说它与缩小和组合选项有关。我建议您完全禁用它们并检查它是否有效。

# networking - Tcpdump：序列号和确认号与 libpcap 不匹配

> ID：12666814
> 
> 赞同：0
> 
> 时间：2012-10-01T02:14:28.517
> 
> 标签：networking, network-programming, libpcap, tcpdump

我正在编写一个应用程序，我在其中打印 TCP 序列和确认号。我在同一个盒子上运行 tcpdump 并且数字不匹配。这是我的代码，所有标题和结构都来自[sniffex.c](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCIQFjAA&url=http://www.tcpdump.org/sniffex.c&ei=3_toUKOUK4XA9gTQ4oHoBA&usg=AFQjCNG06vPZLcb_gnMas5sM1m7uu5K53A&sig2=pdfscbubzfUEDSZdGEuwcQ)

```
void
got_packet(u_char *args, const struct pcap_pkthdr *header, const u_char *packet)
{

    static int count = 1;                   /* packet counter */

    /* declare pointers to packet headers */
    const struct sniff_ethernet *ethernet;  /* The ethernet header [1] */
    const struct sniff_ip *ip;              /* The IP header */
    const struct sniff_tcp *tcp;            /* The TCP header */

    int size_ip;
    int size_tcp;
    int size_payload;

    count++;

    /* define ethernet header */
    ethernet = (struct sniff_ethernet*)(packet);

    /* define/compute ip header offset */
    ip = (struct sniff_ip*)(packet + SIZE_ETHERNET);
    size_ip = IP_HL(ip)*4;
    if (size_ip < 20) {
        printf("   * Invalid IP header length: %u bytes\n", size_ip);
        return;
    }

    /* determine protocol */
    switch(ip->ip_p) {
        case IPPROTO_TCP:
            printf("   Protocol: TCP\n");
            break;
        case IPPROTO_UDP:
            printf("   Protocol: UDP\n");
            return;
        case IPPROTO_ICMP:
            printf("   Protocol: ICMP\n");
            return;
        case IPPROTO_IP:
            printf("   Protocol: IP\n");
            return;
        default:
            printf("   Protocol: unknown\n");
            return;
    }

    /* define/compute tcp header offset */
    tcp = (struct sniff_tcp*)(packet + SIZE_ETHERNET + size_ip);
    size_tcp = TH_OFF(tcp)*4;
    if (size_tcp < 20) {
        printf("   * Invalid TCP header length: %u bytes\n", size_tcp);
        return;
    }

    std::cout << "Packet# " << count << " S " << tcp->th_seq << " A "
<< tcp->th_ack << "\n";

} 
```

这打印：

```
Packet# 2 S 1063936835 A 1371648504
Packet# 3 S 1080714051 A 1975693816
Packet# 4 S 1080714051 A 1975693816
Packet# 5 S 141321027 A 2730734072
Packet# 6 S 2960220995 A 2730734072
Packet# 7 S 1484219203 A 2730734072
Packet# 8 S 8217411 A 2730734072
Packet# 9 S 2827117379 A 2730734072
Packet# 10 S 1351115587 A 2730734072 
```

我运行 tcpdump 将 pcap 文件记录为：

```
# sudo tcpdump -n -i eth0 -S -n -w cache.cap 'tcp and src port 80' 
```

然后用

```
# sudo tcpdump -S -ttttnnr cache.cap
reading from file cache.cap, link-type EN10MB (Ethernet)
2012-09-30 18:52:58.110398 IP 192.168.122.11.80 > 192.168.122.22.7001:
Flags [S.], seq 1130588735, ack 4172398929, win 14480, options [mss
1460,sackOK,TS val 71597136 ecr 71595534,nop,wscale 3], length 0
2012-09-30 18:52:58.110925 IP 192.168.122.11.80 > 192.168.122.22.7001:
Flags [.], ack 4172399221, win 1944, options [nop,nop,TS val 71597136
ecr 71595534], length 0
2012-09-30 18:52:58.116146 IP 192.168.122.11.80 > 192.168.122.22.7001:
Flags [P.], seq 1130588736:1130589192, ack 4172399221, win 1944,
options [nop,nop,TS val 71597137 ecr 71595534], length 456
2012-09-30 18:52:58.173321 IP 192.168.122.11.80 > 192.168.122.22.7001:
Flags [.], seq 1130589192:1130590640, ack 4172399522, win 2078,
options [nop,nop,TS val 71597152 ecr 71595549], length 1448
2012-09-30 18:52:58.173388 IP 192.168.122.11.80 > 192.168.122.22.7001:
Flags [.], seq 1130590640:1130592088, ack 4172399522, win 2078,
options [nop,nop,TS val 71597152 ecr 71595549], length 1448
2012-09-30 18:52:58.173517 IP 192.168.122.11.80 > 192.168.122.22.7001:
Flags [.], seq 1130592088:1130593536, ack 4172399522, win 2078,
options [nop,nop,TS val 71597152 ecr 71595549], length 1448
2012-09-30 18:52:58.173583 IP 192.168.122.11.80 > 192.168.122.22.7001:
Flags [.], seq 1130593536:1130594984, ack 4172399522, win 2078,
options [nop,nop,TS val 71597152 ecr 71595549], length 1448
2012-09-30 18:52:58.173620 IP 192.168.122.11.80 > 192.168.122.22.7001:
Flags [.], seq 1130594984:1130596432, ack 4172399522, win 2078,
options [nop,nop,TS val 71597152 ecr 71595549], length 1448
2012-09-30 18:52:58.173656 IP 192.168.122.11.80 > 192.168.122.22.7001:
Flags [.], seq 1130596432:1130597880, ack 4172399522, win 2078,
options [nop,nop,TS val 71597152 ecr 71595549], length 1448 
```

序列号和确认号不匹配。我在这里想念什么？

在我的应用程序中，过滤器是相同的“tcp 和 src 端口 80”

**编辑** 我改变了

```
std::cout << "Packet# " << count << " S " << tcp->th_seq << " A "
    << tcp->th_ack << "\n"; 
```

到

```
 std::cout << "Packet# " << count << " S " << ntohl(tcp->th_seq) << " A "
    << ntohl(tcp->th_ack) << "\n"; 
```

现在输出是

```
Packet# 2 S 1384921720 A 3111642711
Packet# 3 S 1384921721 A 3111643003
Packet# 4 S 1384921721 A 3111643003
Packet# 5 S 1384922177 A 3111643304
Packet# 6 S 1384923625 A 3111643304
Packet# 7 S 1384925073 A 3111643304
Packet# 8 S 1384926521 A 3111643304
Packet# 9 S 1384927969 A 3111643304
Packet# 10 S 1384929417 A 3111643304 
```

还是不匹配

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T03:36:54.403

您只记录了一半的流量，即一个方向。ACK 用于您未记录的部分。尝试使用包含目标端口 80 的过滤器。

# javascript - Mootools Fx.Slide：未定义不是函数

> ID：12666819
> 
> 赞同：0
> 
> 时间：2012-10-01T02:15:21.293
> 
> 标签：javascript, mootools, slide

我想让一个 div 滑出，但我得到一个错误..

代码

```
<script src="http://ajax.googleapis.com/ajax/libs/mootools/1.4.5/mootools-yui-compressed.js"></script>

window.addEvent('domready', function() {

  var div = new Fx.Slide('divID');
  div.slideOut();
}); 
```

错误就在下面`var div`

```
Uncaught TypeError: undefined is not a function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T02:36:24.747

不幸的是，`Fx.Slide`助手不是 Mootools Core 的一部分，它是`More`包的一部分。您正在加载的 CDN 文件只是核心。您将需要找到另一个托管更多的 CDN，或者从您自己的服务器上提供服务。

看起来谷歌目前没有托管更多：[http ://code.google.com/p/google-ajax-apis/issues/detail?id=135](http://code.google.com/p/google-ajax-apis/issues/detail?id=135)

欲了解更多信息，正如它在主下载页面顶部所说的那样：http: [//mootools.net/download](http://mootools.net/download)

```
From this page you can download the full MooTools Core. If you need more
functionality, head over to the More Builder. 
```

所以去这里： http: [//mootools.net/more/](http://mootools.net/more/)并检查`More`你想要的任何功能。勾选`Fx.Slide`并点击页面底部的下载。

# android - SQLite 和 SQL 有什么区别

> ID：12666822
> 
> 赞同：67
> 
> 时间：2012-10-01T02:15:27.813
> 
> 标签：android, sql, database, sqlite

我知道 SQLite 数据库用于移动设备（Android、iPhone），它很轻，只占用 Kb 空间。SQLite 有什么限制吗？我想知道它们有何不同。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-10-01T02:22:48.073

每个 SQL 数据库都使用自己的语言实现，但略有不同。虽然基本查询几乎是通用的，但 MySQL、PostgreSQL、Microsoft SQL Server、Oracle 数据库等之间存在显着的细微差别。

SQLite 特别值得注意的是，与上面提到的所有其他软件不同，该数据库软件没有附带查询通过的守护程序。这意味着如果多个进程同时使用数据库，它们将直接通过 SQLite 库更改数据，并对操作系统本身进行读/写数据调用。这也意味着锁定机制不能很好地处理争用。

对于大多数考虑使用 SQLite 的应用程序来说，这不是问题——开销小好处和数据检索简单是值得的。但是，如果您将使用多个进程访问数据库，或者不考虑通过一个线程映射所有请求，则可能会有些麻烦。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-10-01T02:18:35.820

Sqlite 是非常轻量级的 SQL 版本，支持 SQL 的许多特性。基本上是为手机、平板电脑等小型设备开发的。

SQLite 是一个第三方的、开源的、进程内的数据库引擎。SQL Server Compact 来自 Microsoft，是 SQL Server 的精简版。它们是两个相互竞争的数据库引擎。

SQL 是查询语言。Sqlite 是嵌入式关系数据库管理系统。

编辑：（来自以下对我的回答的评论）

Sqlite 也不需要特殊的数据库服务器或任何东西。它只是一个使用 SQL 语法的直接文件系统引擎。（作者：亚当·普洛彻）

从技术上讲，SQLite 不是开源软件，而是公共领域。没有许可证。（作者：拉里·拉斯提格）

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-01T08:48:39.347

SQL 是查询语言。Sqlite 是嵌入式关系数据库管理系统。

与其他数据库（如 SQL Server 和 MySQL）不同，SQLite 不支持存储过程。

SQLite 是基于文件的，不像其他数据库，如基于服务器的 SQL Server 和 MySQL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-15T09:20:43.160

## 什么是 SQLite？

*   SQLite 是一个开源、零配置、自包含、独立的事务关系数据库引擎，旨在嵌入到应用程序中。

*   Python SQLite 可以定义为使用 ANSI-C、轻量级基于磁盘的数据库开发的 C 库**；**不需要额外的或任何其他单独的服务器进程。

## SQLite 有哪些特点？

*   SQLite**不需要**服务器来运行（RDBMS 如 MySQL、PostgreSQL 等，需要单独的服务器进程来运行）。

*   是独立的，它需要操作系统或外部库的最少支持。这使得 SQLite 可以在任何环境中使用，尤其是在 iPhone、Android 手机、游戏机、手持媒体播放器等嵌入式设备中。

*   不使用任何配置文件。

*   符合ACID**标准**。这意味着所有查询和更改都是原子的、一致的、隔离的和持久的，即使发生应用程序崩溃、电源故障或操作系统崩溃等意外情况，事务中的所有更改都完全发生或根本不发生。

*   能够创建非常快速的内存数据库。

*   对表使用动态类型。这意味着您可以在任何列中存储任何值，而不管数据类型如何。

*   允许单个数据库连接同时访问多个数据库文件。

## SQLite 和酸

SQLite 保证所有事务都符合**ACID**，即使事务因程序崩溃、操作系统转储或计算机电源故障而中断。

*   **原子**的：事务应该是原子的。这意味着不能将更改分解为较小的更改。提交事务时，要么应用整个事务，要么不应用。

*   **一致**：事务必须确保将数据库从一种有效状态更改为另一种有效状态。当事务启动并执行修改数据的语句时，数据库变得不一致。然而，当事务被提交或回滚时，事务必须保持数据库一致是很重要的。

*   **隔离**：一个会话执行的待处理事务必须与其他会话隔离。当会话启动事务并执行 INSERT 或 UPDATE 语句来更改数据时，这些更改仅对当前会话可见，其他会话不可见。另一方面，其他会话在事务开始后提交的更改不应该对当前会话可见。

*   **持久**性：如果事务成功提交，无论电源故障或程序崩溃等情况如何，更改都必须在数据库中永久存在。相反，如果程序在事务提交之前崩溃，则更改不应持续存在。

* * *

信用[Sqlitetutorial.net](https://www.sqlitetutorial.net/what-is-sqlite/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-13T09:03:17.963

**SQLite**和**SQL**之间最基本的区别是：

**SQL**是一种查询语言，被不同的 SQL 数据库使用。它本身不是数据库。

**SQLite**是一个使用 SQL 的数据库管理系统。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-01-13T05:10:33.980

SQL 是一种数据库查询语言，而 SQLite 是一种使用 SQL 规范的数据库 (RDBMS)。SQLite 可以说是微软 SQL Server 的竞争对手。

这个名字本身就表明它是 SQL RDBMS 的轻量级版本。它用于大多数小型便携式设备，例如 Android 和 iOS 设备。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2018-03-23T07:02:01.487

**SQLite**：数据库管理系统（DBMS）。
**SQL**：结构化查询语言是一种计算机语言，用于通过查询从 DBMS 创建、编辑和获取数据。

# c++ - 我是否必须检查此方法的指针有效性？

> ID：12666825
> 
> 赞同：1
> 
> 时间：2012-10-01T02:17:29.897
> 
> 标签：c++, pointers

```
class A
{
private:
    A(){}; 
    ~A(){};
public:
    static A* GetInstance( void )
    {
        static A obj;
        return& obj;
    }
}; 
```

我假设如果发生某些`bad`事情只会在第一次发生，因为类构造函数仅在第一次调用`GetInstance`发生时才被初始化，我不知道 C++ 的深度，我不信​​任 C++，所以当我需要指向此类的指针，它将在我当前正在执行的函数中多次使用：

```
A* ptr = A::GetInstance();
if( ptr )
{ 
```

检查指针的有效性，我**相信**该方法返回`obj`存储值的地址，以便`ptr`指向它，我猜它`can't`失败了。

请注意，我不是在谈论一个小型应用程序，我目前正在开发一个 500,000 多行的 MMO 服务器应用程序，该应用程序可以处理数千个客户端，并且必须保持打开数周而不会崩溃，防御性编程是最低要求。是否**可以确定****100%**安全使用`ptr`而不检查其有效性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T02:22:18.690

该函数当然不可能返回一个空指针，因此没有必要检查它。返回一个引用可能更有意义，以明确它不会为空。

但是，不能保证该函数将始终返回指向有效对象的指针。如果它是从静态对象的析构函数中调用的，那么`obj`可能已经被销毁了。这就是为什么全局可访问对象是一个非常糟糕的主意的原因之一，无论您是否将它们包装在像这样的 Singleton 反模式中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T02:21:53.433

该函数将始终返回一个指向存在的对象的指针。唯一的危险是对象本身无效，这应该由对象构造函数的 throw 指示。在您的情况下，您没有从构造函数中捕获异常，因此程序应该在这种情况下停止，否则应该很好。

检查`NULL`是没有意义的，因为你总是返回一个有效的地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T02:22:59.037

添加对指针的检查不太可能导致显着的性能下降，但应该是不必要的。如果它会让您感觉更好，请添加它。但是，我更关心缓冲区溢出、内存泄漏和其他更可能的问题，而不是`static`编译器是否正确实现了关键字。

# c - 使用多个 if/else if 语句定义函数宏的预处理器指令

> ID：12666828
> 
> 赞同：0
> 
> 时间：2012-10-01T02:17:43.640
> 
> 标签：c, c-preprocessor

我正在使用预处理器指令在 C 中定义函数宏。我可以在函数宏中有多个 if/else if 语句吗？

如果是，我该怎么写？

```
#define WRITE(str,id) #str(id)

// HERES where I am having difficulty
#define DRAW_GENERIC_WINDOW(windowID, type) if type==1 WRITE(draw_text,windowID) else if type==2 WRITE(draw_image,windowID) else if type==3 WRITE(draw_hyperlink,windowID)

// usage
DRAW_GENERIC_WINDOW(112, 1);
DRAW_GENERIC_WINDOW(178, 2);
DRAW_GENERIC_WINDOW(988, 3);

// At compile time the above should be converted to...
draw_text(112);
draw_image(178);
draw_hyperlink(988); 
```

我知道如何在函数宏中执行单个 if else 语句，但不知道如何使用多个 if/else if 执行此操作：

```
// if else eg
#define DRAW_GENERIC_WINDOW(windowID, type) ((type)==(1))?WRITE(draw_text,windowID):WRITE(draw_image,windowID) 
```

注意：在你问“你为什么要这样编程？”之前 :P 这是因为我用一种与 C 非常相似的语言编写，称为 4dm，除了没有结构、指针或声明新数据类型的能力。所以我不得不求助于预处理器指令来实现某种形式的虚拟功能（当我不知道我正在使用的窗口类型 - 图像、超链接等时使用）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T02:37:49.993

试试这样：

```
#define WRITE(str,id) str(id)

// HERES where I am having difficulty
#define DRAW_GENERIC_WINDOW(windowID, type) if (type==1) \
WRITE(draw_text,windowID) \
else if (type==2) \
WRITE(draw_image,windowID) \
else if (type==3) \
WRITE(draw_hyperlink,windowID)

// usage
DRAW_GENERIC_WINDOW(112, 1);
DRAW_GENERIC_WINDOW(178, 2);
DRAW_GENERIC_WINDOW(988, 3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T15:11:57.660

只需使用标记粘贴运算符`##`作为基本模式匹配，如下所示：

```
#define DRAW_GENERIC_WINDOW(windowID, type) DRAW_GENERIC_WINDOW_ ## type(windowID)

#define DRAW_GENERIC_WINDOW_1 draw_text
#define DRAW_GENERIC_WINDOW_2 draw_image
#define DRAW_GENERIC_WINDOW_3 draw_hyperlink 
```

然后像这样使用它：

```
DRAW_GENERIC_WINDOW(112, 1); // expands to draw_text(112, 1);
DRAW_GENERIC_WINDOW(178, 2); // expands to draw_image(178);
DRAW_GENERIC_WINDOW(988, 3); // expands to draw_hyperlink(988); 
```

# java - Java & RegEx：清理和拆分字符串

> ID：12666830
> 
> 赞同：-2
> 
> 时间：2012-10-01T02:18:08.460
> 
> 标签：java, regex, split

我有一个字符串，其中包含格式化的十进制值，例如 45,890.00、1.5v 2,12g 等。此外，它在一行中包含特殊字符、HTML 实体（转义和未转义）UTF-8 编码字符等。虽然我已经设法清理了实体，但我仍在努力想出一种方法来确保空格或标点符号的拆分不会拆分由逗号或句点分隔的数字。

**示例字符串**：

```
> String original_str = 
>     "a,b;c.d+e-f/g\h*i~j=k?l$m 1.5 1,5 1.5v 1,5v 1255,456.78 & 6<7 &amp; 6&gt;5 &#1602; f&uuml;r; {AGB's;} ([für]); "; 
```

**预期输出：**

> 一种
> 
> b
> 
> C
> 
> ETC
> 
> 1.5
> 
> 1,5
> 
> 1.5v
> 
> 1,5v
> 
> 1255,456.78
> 
> 6<7
> 
> 6>5
> 
> 
> 
> 毛皮
> 
> AGB 的
> 
> 毛皮

数字格式可以是：xx 或 xxx,xxxx.xxxx,xxxx 以**COMMA** |分隔 **点**| **混合**

从字符串中清除实体后，我尝试通过标点符号和空格列表将其拆分，但如何在用逗号和时期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T02:43:22.063

使用带有模式的正则表达式

```
.split("[^0-9][.,]|[.,][^0-9]|\\s+|(?![.,])\\p{Punct}") 
```

这将拆分句号或逗号两侧没有数字的任何内容，或者任何其他不是句号或逗号的标点符号。管道之间的第三部分覆盖任何空间。最后一部分基于[此答案](https://stackoverflow.com/a/8200935/90322)中讨论的否定前瞻，以防止已匹配的逗号和句点在此处匹配，我们避免在此处拆分数字。

# android - 如何知道 SurfaceView 是否真的绘制/更新其内容？

> ID：12666832
> 
> 赞同：0
> 
> 时间：2012-10-01T02:18:34.447
> 
> 标签：android, surfaceview, ondraw

我知道那`onDraw()`不是被`SurfaceView`. 相反，绘图是由一个单独的线程完成的。每次重绘/更新时有什么方法可以知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T03:41:09.730

check [this](https://stackoverflow.com/a/2687093/1629707) answer, you could simple add `setWillNotDraw(false)` to receive the `onDraw()` callback

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-01T02:39:06.810

也许您可以创建一个自定义类来扩展您正在使用的任何视图。然后您可以覆盖 onDraw() 并让它回调到您的主要活动（将其传递给您的扩展视图）

```
class mButton extends Button {
   private Activity ownerActivity;

   public void setOwner(Activity pA) {
      ownerActivity = pA;
   }

   @override
   public void onDraw() {
      super.onDraw();
      ((MainActivity) ownerActivity).callback();
   }
} 
```

或类似的规定...

# iphone - selectall uitextfield 并不总是全选

> ID：12666834
> 
> 赞同：9
> 
> 时间：2012-10-01T02:18:49.733
> 
> 标签：iphone, objective-c, ios, uitextfield, selectall

```
- (void)textFieldDidBeginEditing:(UITextField *)textField {
    [textField selectAll:self];
}
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [textField resignFirstResponder];
    return YES;    
} 
```

在上面， textField 选择正确，但是当我从键盘返回并连续第二次点击 textField 时，它不会选择文本。如果我没有连续选择它，或者我在从键盘返回之前取消选择文本，则该 textField 的下一个焦点会正确选择文本。

在上述情况下如何选择文本？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-23T08:28:09.397

我找到了一个完美的解决方案（在下一个运行循环中调用 selectAll）：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    [textField performSelector:@selector(selectAll:) withObject:textField afterDelay:0.f];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-02T03:06:22.217

我使用 Grand Central Dispatch 解决了这个问题。`[textField selectAll:self];`您可以使用`dispatch_async`调用包装并`dispatch_get_main_queue()`作为第一个参数。

```
 dispatch_async(dispatch_get_main_queue()){
        // ... code you want to run on the main queue goes here
    } 
```

# c# - 将 MMDDYYYY 转换为 01-JAN-YY

> ID：12666835
> 
> 赞同：5
> 
> 时间：2012-10-01T02:18:54.867
> 
> 标签：c#, c#-4.0, datetime

我有一个格式为 =“01012012”的字符串。我希望它转换为：01-JAN-12。我如何在 C# 中实现它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-01T02:23:44.700

```
DateTime dateTime = DateTime.ParseExact("01012012", "MMddyyyy", CultureInfo.InvariantCulture);
string newDateString = dateTime.ToString("dd-MMM-yy"); 
```

编辑：将输出更改为 2 位日期（而不是 4 位）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T02:43:21.160

**得到了我的答案：**

```
 CultureInfo provider = CultureInfo.InvariantCulture;
     DateTime date = DateTime.ParseExact("08312012", "MMddyyyy", provider);
     string getDate = date.ToString("dd-MMM-yy"); 
```

多谢你们！！！

# microsoft-metro - 离线开发 Windows 8 / Metro 应用程序

> ID：12666836
> 
> 赞同：1
> 
> 时间：2012-10-01T02:19:14.887
> 
> 标签：microsoft-metro, offline

在没有获得 Windows 8 开发人员许可证的情况下，是否有其他方法可以开发 Metro/Windows 8 风格的应用程序？

我们部门希望为明年即将推出的 Windows 8 部署探索公司内部应用程序的开发。

无法离线获取许可证（请参阅[http://msdn.microsoft.com/en-us/library/windows/apps/hh974578.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh974578.aspx)和[http://connect.microsoft.com/VisualStudio/feedback/details /762946/cannot-request-offline-developer-license-for-visual-studio-2012-windows-store-app](http://connect.microsoft.com/VisualStudio/feedback/details/762946/cannot-request-offline-developer-license-for-visual-studio-2012-windows-store-app)）。

如果没有 Internet 连接，您将无法从 VS2012 获得 Windows 8 开发人员许可证，而且我找不到任何解决方法。

有没有人可以在不需要互联网连接的情况下开发 Windows 8 应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:43:58.677

让我非常沮丧的是，我将永远无法创建 win8 应用程序，因为我的开发人员机器将始终处于脱机状态。因此，我向 Microsoft 提出了一份请愿书，要求提供一种离线获取许可证的方法。

如果您正在阅读本文并且还想了解离线获取 Windows 8 开发人员许可证的方法，请在此处投下您的一票：

[http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3313641-provide-a-way-to-obtain-a-windows-8-developer-lice](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3313641-provide-a-way-to-obtain-a-windows-8-developer-lice)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:20:29.580

实际上，你需要每个月更新这个开发者的许可证，所以这不是一次性的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-16T06:48:33.780

有一个可用的热修复程序。 [http://support.microsoft.com/kb/2871280](http://support.microsoft.com/kb/2871280)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T05:08:53.747

虽然您最初需要互联网连接才能获得许可证，但一旦完成此操作，您就可以完全离线开发应用程序。这不是一个不寻常的模型！很多应用程序最初都需要一次性注册。

# php - 有没有办法逐像素读取图像并将每个像素的颜色返回到由其坐标索引的数组中？

> ID：12666838
> 
> 赞同：0
> 
> 时间：2012-10-01T02:19:28.113
> 
> 标签：php, javascript, mysql, coordinates, pixels

我正在尝试在我正在制作的浏览器游戏中使用我为坐标系制作的像素图。每种颜色代表一种地形类型，其相关值会影响游戏的各个方面。

所以问题是：有没有办法使用 PHP 或 JavaScript 逐像素“读取”图像，然后返回数组中每个像素的颜色值以存储在数据库中，以便我可以快速将每种颜色附加到我自己的 x ,y 坐标基于图像的中心而不是角落？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T00:22:24.823

对于基于 javascript 的游戏，我建议在客户端硬编码数组并仅在其中存储重要的坐标以减小数组的大小，这样您就不必经常检查它。然后切换到位图/位板表示，就像当今大多数现代国际象棋引擎的功能一样。然后为每个可能的块类型（例如墙、空、楼梯等）创建一个位图。位图的概念是映射感兴趣的块的坐标。地图上的部分被赋予一个布尔真值，而未映射的坐标将具有一个布尔假值。然后对每种块类型重复此过程。

例如

```
walls:[[3,-7],[-8,9],[30,67],[31,67],[32,68]]
ustairs:[[4,6],[7,8],[8,9]]
dstairs:[[7,6],[-2,-4],[-7,-9]] 
```

即使您决定不切换到位图/位板表示，如果您最终将所有坐标存储在那里，至少对您的数据库后端有怜悯之心。

您可以使用 PHP 的`imagecolorat()`函数来填充您的数据库，但每次您需要检查坐标时，我都会投票反对在运行时使用此函数。此功能适用于非索引图像，例如 PNG。

但是，如果您在 PHP 中打开一个索引图像（例如 GIF），那么您必须先查找图像中使用的索引的颜色，然后才能获取其颜色值。因此，您将使用`imagecolorsforindex()`. 编辑：对不起，我的意思是`imagecolorexact()`

# vb.net - “obj.X”VB.net 的正确术语？

> ID：12666841
> 
> 赞同：2
> 
> 时间：2012-10-01T02:19:44.953
> 
> 标签：vb.net, function, properties, methods, terminology

我正在查看一些代码，我意识到我不记得某些东西的正确术语。我相信如果我有以下代码

```
pnlOne.Visible = False 
```

“可见”部分会被视为方法、函数还是什么？我正在与 JavaScript 一起学习 VB，在 JS 中这将是一种方法。vb也一样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T02:23:01.077

`pnlOne`是一个类的实例并且`Visible`是它的属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T02:23:01.810

在 VB.net 中，这是一个“属性”。VB.net 和 C# 中的属性本质上是用于获取和设置值的美化方法。（他们实际上编译成类似`get_Visible`和`set_Visible`方法的东西。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T02:58:31.473

`Visible`可能*是*..

1.  一个[属性](http://msdn.microsoft.com/en-us/library/e8ae41a4.aspx)；*或者*
2.  一个[字段（在 VB 中称为“成员变量”）](http://msdn.microsoft.com/en-us/library/ke6sh835.aspx)

..取决于它的声明方式。属性和字段都是“成员” ¹的特化。请参阅[Visual Basic 中属性和变量之间的差异](http://msdn.microsoft.com/en-us/library/sk5e8eth.aspx)。

我*怀疑* `Visible`在这种情况下是一个属性，它将适用于所有标准[控件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.aspx)类型..但是，要验证这两种方式都需要了解由 .name 命名的对象的类型`pnlOne`。

* * *

¹ [方法（或“子/函数过程”）](http://msdn.microsoft.com/en-us/library/6xxtk8kx.aspx)是一种不同类型的成员，*不适合*将属性或字段称为“函数”或“方法”。（注意：各种引用*不一致*地区分[Method 和 Procedure](http://msdn.microsoft.com/en-us/library/yse67234.aspx)；在 VB.NET 中，它们被视为同义词。）

Nit：JavaScript 中的*正确*术语是[property](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators)；属性可以*评估*为函数对象，因此当它们这样做时也可以被视为*方法*`this`- 通常是在有意义地使用时。`jsObj.set_Visible(true)`在任何情况下，如果使用一种方法，代码就必须是不同的（例如）。

# android - randomGenerator 避免连续重复

> ID：12666844
> 
> 赞同：0
> 
> 时间：2012-10-01T02:20:26.540
> 
> 标签：android, eclipse, random, duplicates

我对以下代码有疑问

```
Random randomGenerator = new Random();
    int randomInt = randomGenerator.nextInt(4);
    String wordList[] = new String[4];
    {
        wordList[0] = "Red";
        wordList[1] = "Blue";
        wordList[2] = "Green";
        wordList[3] = "Orange";

    }

String wordToDisplay = wordList[randomInt]; 
```

这段代码工作正常，但我想知道是否有可能让它连续两次不选择同一个词。例如，如果它刚刚选择了“红色”，那么它不会在下一次连续选择“红色”。我读了一些关于 DISTINCT 的东西，但我不确定这是否是正确的。

这是使用此按钮的代码

```
final Button button1 = (Button) findViewById(R.id.button1);
        final TextView textView = (TextView) findViewById(R.id.text_random_text);
        button1.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // Perform action on click
                Random randomGenerator = new Random();
                int randomInt = randomGenerator.nextInt(9);
                String wordToDisplay = wordList[randomInt];
                textView.setText(wordToDisplay); 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T02:36:09.800

使用列表并删除颜色：

```
private static ArrayList<String> arrayList = new ArrayList<String>();
private static Random random = new Random();
public static void fillList(){
    arrayList.add("Red");
    arrayList.add("Blue");
    arrayList.add("Green");
    arrayList.add("Orange");
}
public static String getNextRandomColor(){
    if(arrayList.isEmpty()){
        fillList();
    }
    return arrayList.remove(random.nextInt(arrayList.size()));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T02:37:29.820

您可以通过两种方式做到这一点（可能更多，但我现在能想到的两种方式）：

1）创建一个使用全局变量存储最后生成的随机数的函数。它看起来像这样：

```
int myRand(int i) {
  int aux;
  Random randomGenerator = new Random();

  do {
    aux = randomGenerator.nextInt(i);
  } while (aux != lastRandGenerated);

  lastRandGenerated = aux;

  return aux;
} 
```

，其中 lastRandGenerated 是您初始化为 0 的全局变量。

然后你使用这个函数来生成随机数。

2）您可以创建一个具有与上述功能非常相似的类，然后实例化该类的一个对象并使用它来生成您的随机数。在类中创建一个静态变量，该变量将记住最后生成的随机数。使用它而不是全局变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T02:31:53.570

具体细节有点超出我的范围，但作为一个数学问题，有 24 种组合（4 * 3 * 2 * 1）。尽管这听起来很沉重，但最坏的情况是你可以计算出所有的组合，然后从 24 个随机中选择一个。

# ruby-on-rails - 有条件的用户代理检查需要变干

> ID：12666845
> 
> 赞同：1
> 
> 时间：2012-10-01T02:20:49.083
> 
> 标签：ruby-on-rails, ruby, user-agent

如果客户在 ie7 (barf) 上，我只是将这个条件写到不同的社交领域；因为我们的两个社交网络不再正确支持 ie7 (pinterest/google plus)。

我想将用户代理检查从部分移到更清洁、更易于阅读的东西中。我尝试将条件移动到名为 is_this_ie7 的方法？在助手和控制器中，两者都给了我一个未定义的方法中断。

如果我是一个更有经验的 RoR 开发人员，这会去哪里？提前致谢！！！！

```
 <!-- if ie7 load seperate helper  since gplus dones't support -->
    <%   if  request.env['HTTP_USER_AGENT'] =~ /msie 7.0/i %>
          <%= share_area_for_bidding_ie7   %>
    <%   else %>
        <!-- if any other browser load main share area -->
        <%= share_area_for_bidding  %>
    <%   end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T02:40:09.393

通常在帮助程序中，如果您想灵活处理 TDD，您可以为字符串和请求创建一个方法：

```
# ./app/helpers/application_helper.rb

def agent_ie7?(agent)
  agent =~ /msie 7.0/i
end

def request_ie7? 
  agent_ie7?(request.env['HTTP_USER_AGENT'])
end 
```

一个更强大的答案是对其建模：

```
# ./app/models/browser.rb

class Browser

  def initialize(agent)
    @agent = agent
  end

  def ie7?
    @agent =~ /msie 7.0/i
  end

end 
```

一个很好的答案是使用提供您想要的现有 gem：[https ://github.com/fnando/browser](https://github.com/fnando/browser)

```
 gem install browser
 ...
 browser.ie7? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T02:39:30.867

最好让浏览器嗅探客户端。但如果你真的必须在 Rails 模板中做，你可以做一个助手：

**_social.html.erb**

```
<% if ie7?(request) %>
  do ie7 stuff
<% else %>
  do other stuff
<% end %> 
```

**application_helper.rb**

```
def ie7?(request)
  if request.user_agent
    !!request.user_agent.match(/msie 7.0/i)
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T02:38:36.560

我认为这段代码在布局中应该没问题。您已经将大部分逻辑抽象为函数。将它放在布局中可以让您从控制器呈现此布局。

这也可能在视图文件中，但如果您需要在多个页面中使用相同的代码，则必须为多个视图文件复制相同的代码。或使用将其插入所需的页面`content_for`

# java - 在字段更改时更新 Android SQLite 数据库

> ID：12666851
> 
> 赞同：0
> 
> 时间：2012-10-01T02:21:57.867
> 
> 标签：java, android, sqlite, sql-update, auto-update

我正在编写一个 android 应用程序，在我的一个页面上，我有一个文本字段、一个微调器和一个需要在 SQLite 数据库中保存/更新的日期选择器。这三个在创建时都有默认值，并且数据库需要在任何时候更改字段时更新（没有“保存”按钮或类似的东西）。我已经研究过为此使用 onFocusChangeListener() ，但似乎应用程序仅在使用文本字段时更改焦点，因此它不适用于微调器或日期选择器。我还尝试将组件拆分为片段并使用更新功能覆盖 onPause() 方法，认为当用户移动到下一个片段时片段会暂停，但我认为它仍然只检查用户何时离开屏幕。任何帮助/建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T03:24:42.250

对于`Spinner`您可以尝试[OnItemSelectedListener](http://developer.android.com/reference/android/widget/AdapterView.html#setOnItemSelectedListener%28android.widget.AdapterView.OnItemSelectedListener%29)，对于`Datepicker`，请尝试[OnDateChangedListener](http://developer.android.com/reference/android/widget/DatePicker.OnDateChangedListener.html)

# asp.net-mvc - Meteor 能否与 Microsoft 后端一起运行（即 EF 和 ASP.net MVC）

> ID：12666867
> 
> 赞同：5
> 
> 时间：2012-10-01T02:24:51.973
> 
> 标签：asp.net-mvc, iis, meteor

也许像你们中的一些人一样，我被 JavaScript MV* 的数量所淹没。当我以为我要 KO 时，我找到了 Backbone，然后是 Ember。

**我最近在 Meteor 上看到了一些演示，给我留下了深刻的印象。**但我对 Mongo 一无所知，我“认为” Meteor 需要它。(http://www.meteor.com/screencast)

我在 Entity Framework 和 ASP.net MVC 上投入过多，无法摆脱它们，但 Meteor 看起来像一个了不起的客户端 MV*。

有谁知道 Meteor 是否可以与 Microsoft 后端（即 EF 和 ASP.net MVC）一起使用？

谢谢。

**更新**：

是的，我看到了 MongoDb 的 NuGet 包，但说实话我只对 Meteor 感兴趣。这是两者兼而有之的情况吗？Meteor 看起来像是最前沿的东西，我真的很感激任何关于它与 MS 后端一起使用的文档的链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T13:45:19.397

对于在 2013 年或之后仍在阅读此内容的任何人 - 现在可以在 IIS 下的 Windows 上运行 Node.js（只需使用 Web 平台安装程序安装支持）。

还有适用于 Windows 的 Meteor 和 MongoDB 版本，Meteor 支持部署将在“纯”node.js 下运行的包

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-08T13:00:18.243

是的，有点。Meteor 使用 node.js 运行服务器端代码，但也在客户端提供一些非常有用的服务，如模板、路由、集合、会话变量和反应性。

将它与 .net 后端（或任何其他语言）一起使用的方法是创建一个可以通过 Meteor 访问的 api。您可以在客户端代码中创建 Meteor 集合，不需要 mongodb 实例。只需访问 api 以使用正确的数据加载集合，然后您就可以像往常一样使用 Meteor。

然而，对于大多数应用程序来说，在 Meteor 中实现一切会简单得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T23:29:04.060

据我所知，你不能。它在 Node.js 上运行，另外还有一个类似 MongoDB 的 API 的客户端实现，我认为用 EF 后端实现会很痛苦

# c# - C# XNA 使纹理出现在新窗口中？

> ID：12666868
> 
> 赞同：1
> 
> 时间：2012-10-01T02:24:52.580
> 
> 标签：c#, xna, window

我正在玩随机地图生成，我想做的是：

*   输入命令生成随机地图
*   将创建一个类似于生成的纹理，每个像素类似于每个图块
*   然后会弹出一个新窗口，不会删除另一个包含纹理的窗口

所以我知道如何做到这一点，除了最后一部分。那么有人能告诉我如何创建一个新窗口并在这个窗口上绘制纹理吗？谢谢你。

# c++ - std::list::erase 不起作用

> ID：12666869
> 
> 赞同：1
> 
> 时间：2012-10-01T02:25:40.597
> 
> 标签：c++, stl

如果对象的属性之一与条件匹配，我正在尝试从对象列表中删除一个元素。这是我这样做的功能，但是，在执行此操作然后打印内容之后，erase() 似乎没有任何效果。我在这里做错了什么？

```
void FileReader::DeleteProcess(int id, list<Process> listToDeleteFrom)
{
    list<Process>::iterator process;

    for(process = listToDeleteFrom.begin(); process != listToDeleteFrom.end(); process++)
    {
        if (process -> ID == id)
        {
            listToDeleteFrom.erase(process);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-01T02:31:25.027

首先，您需要通过引用传递列表；您的代码正在处理副本，因此它所做的更改不会影响调用者的列表：

```
void FileReader::DeleteProcess(int id, list<Process> & listToDeleteFrom)
                                                     ^ 
```

其次，擦除列表元素会使引用该元素的任何迭代器无效，因此尝试在之后进行迭代将导致未定义的行为。如果只删除一个元素，则在调用`erase`;后直接从函数返回 否则，循环需要构造如下：

```
for (auto it = list.begin(); it != list.end(); /* don't increment here */) {
    if (it->ID == id) {
        it = list.erase(it);
    } else {
        ++it;
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-01T02:27:13.343

`erase()`在迭代器迭代时调用`list`会使迭代器无效。将要擦除的元素添加到第二个列表，然后将其删除。

另请注意，您是按值传递列表，而不是使用引用或指针。您的意思是使用`list<Process>& listToDeleteFrom`or`list<Process>* listToDeleteFrom`吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T02:35:13.403

您看不到任何更改的原因是您的列表没有通过引用传递，因此您只是从列表的副本中删除元素。

将其更改为：

```
void FileReader::DeleteProcess(int id, list<Process> &listToDeleteFrom) //note & 
```

这将在函数中保持相同的语法并修改原始语法。

但是，您删除元素的方式有点次优。如果您有 C++11，以下内容将消除您的失效问题，并且使用为该工作设计的现有算法更加惯用：

```
listToDeleteFrom.erase ( //erase matching elements returned from remove_if
    std::remove_if( 
        std::begin(listToDeleteFrom), 
        std::end(listToDeleteFrom), 
        [](const Process &p) { //lambda that matches based on id
            return p->ID == id;
        }
    ),
    std::end(listToDeleteFrom) //to the end of the list
); 
```

请注意保留`std::list<>::erase`在那里以实际删除匹配的元素。这被称为擦除删除习语。

# .htaccess - Modx Evolution 重写 URL Web.Config IIS

> ID：12666874
> 
> 赞同：1
> 
> 时间：2012-10-01T02:26:53.813
> 
> 标签：.htaccess, iis, web-config, modx, modx-evolution

我需要帮助将 htaccess 转换为 IIS 服务器的 web.config。
这个 htaccess 被 Modx Evolution 1.x 使用

```
#php_flag register_globals Off
#AddDefaultCharset utf-8
#php_value date.timezone Europe/Moscow

Options +FollowSymlinks
RewriteEngine on
RewriteBase /

# Fix Apache internal dummy connections from breaking [(site_url)] cache
RewriteCond %{HTTP_USER_AGENT} ^.*internal\ dummy\ connection.*$ [NC]
RewriteRule .* - [F,L]

# Rewrite domain.com -> www.domain.com -- used with SEO Strict URLs plugin
#RewriteCond %{HTTP_HOST} .
#RewriteCond %{HTTP_HOST} !^www\.example\.com [NC]
#RewriteRule (.*) http://www.example.com/$1 [R=301,L]

# Exclude /assets and /manager directories and images from rewrite rules
RewriteRule ^(manager|assets)/*$ - [L]
RewriteRule \.(jpg|jpeg|png|gif|ico)$ - [L]

# For Friendly URLs
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

我需要将此配置转换为 IIS 服务器的 web.config。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:20:49.093

将其作为**web.config**放在您的网络服务器的根文件夹中，将 example.com 更改为您的域名：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <directoryBrowse enabled="false" />
        <defaultDocument>
            <files>
                <clear />
                <add value="index.php" />
                <add value="Default.htm" />
                <add value="Default.asp" />
                <add value="index.htm" />
                <add value="Default.aspx" />
            </files>     
        </defaultDocument>
        <rewrite>
            <rules>
                <rule name="Add WWW prefix" >
                  <match url="(.*)" ignoreCase="true" />
                    <conditions>
                      <add input="{HTTP_HOST}" pattern="^example\.com" />
                    </conditions>
                  <action type="Redirect" url="http://www.example.com/{R:1}"
                    redirectType="Permanent" />
                </rule> 

                <rule name="ModX IIS7 Rule 1" stopProcessing="true">
                    <match url=".*" ignoreCase="false" />
                    <conditions logicalGrouping="MatchAll">
                        <add input="{HTTP_USER_AGENT}" pattern="^.*internal\ dummy\ connection.*$" />
                    </conditions>
                    <action type="CustomResponse" statusCode="403" statusReason="Forbidden" statusDescription="Forbidden" />
                </rule>
                <rule name="ModX IIS7 Rule 2" stopProcessing="true">
                    <match url="^(manager|assets)" ignoreCase="false" />
                    <action type="None" />
                </rule>              
                <rule name="ModX IIS7 Rule 3" stopProcessing="true">
                    <match url="^(.*)$" ignoreCase="false" />
                    <conditions logicalGrouping="MatchAll">
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" pattern="" ignoreCase="false" />
                        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" pattern="" ignoreCase="false" />
                    </conditions>
                    <action type="Rewrite" url="index.php?q={R:1}" appendQueryString="true" />
                </rule>
            </rules>
        </rewrite>          
    </system.webServer>
</configuration> 
```

# wpf - 如何获取复选框列wpf的选定行

> ID：12666875
> 
> 赞同：0
> 
> 时间：2012-10-01T02:27:01.250
> 
> 标签：wpf, xaml, telerik-grid, radgridview

我有一个带有复选框列的 Telerik RadGrid

```
 <telerik:GridViewDataColumn  Header="Subject">
                <telerik:GridViewDataColumn.CellTemplate>
                    <DataTemplate>
                        <CheckBox IsChecked="{Binding Path=IsSelected, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                        telerik:StyleManager.Theme="Office_Black"/>
                    </DataTemplate>
                </telerik:GridViewDataColumn.CellTemplate>
            </telerik:GridViewDataColumn> 
```

当用户检查复选框列中的任何行时，我想获取选中的行。如果我们使用 MouseLeftButtonDown 事件，我们如何获取行或将 IsSelected 绑定到 viewModel 有没有办法从 viewmodel 获取行?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T07:47:48.247

```
 <telerik:GridViewDataColumn  Header="Subject">
            <telerik:GridViewDataColumn.CellTemplate>
                <DataTemplate>
                    <CheckBox IsChecked="{Binding  Path=IsSelected,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Checked="CheckBox_Checked"/>  
                </DataTemplate>
            </telerik:GridViewDataColumn.CellTemplate>
        </telerik:GridViewDataColumn>  

    private void CheckBox_Checked(object sender, RoutedEventArgs e)
    {
        var parent = (sender as CheckBox).ParentOfType<GridViewRow>();
       var Item = parent.Item as ClassItem;
      // ClassItem name of class itemsource to the grid
    } 
```

# javascript - 确保backbonejs应用程序中没有内存泄漏

> ID：12666877
> 
> 赞同：3
> 
> 时间：2012-10-01T02:27:30.250
> 
> 标签：javascript, dom, memory-leaks, backbone.js

我有一个backbonejs应用程序，它的工作原理是这样的：

```
[Backbone MODEL] <----> [Backbone VIEW] <----> [DOM ELEMENT] 
```

模型和视图被创建并分配给函数范围内的局部变量。如果我删除 dom 元素（通过在其父元素上调用 jQuery().empty()），这是否会删除对 View 的所有引用以及随后的 Model 以避免僵尸对象/内存泄漏？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T03:04:21.217

只要您从不将模型或视图变量分配给任何会留下来的东西。警惕围绕变量的闭包，不要将变量作为任何其他对象的属性附加，不要将视图或模型附加到来自任何其他对象的任何事件。那么是的，这将自行清理。

但这些是一些非常严格的规则，需要遵守并且不能很好地与大多数应用程序配合使用。您应该明确处理事件处理程序的删除，并删除您创建的任何对象的任何属性。

我有几篇与此相关的文章（您似乎已经阅读过其中至少一篇）：

经典的僵尸帖子： http: [//lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)

僵尸清理代码的实现，以及更多，作为它自己的对象：http: [//lostechies.com/derickbailey/2011/12/12/composite-js-apps-regions-and-region-managers/](http://lostechies.com/derickbailey/2011/12/12/composite-js-apps-regions-and-region-managers/)

JavaScript 和 Backbone 中的内存管理：http: [//lostechies.com/derickbailey/2012/03/19/backbone-js-and-javascript-garbage-collection/](http://lostechies.com/derickbailey/2012/03/19/backbone-js-and-javascript-garbage-collection/)

# python - 需要在列表理解中划分字符串

> ID：12666879
> 
> 赞同：3
> 
> 时间：2012-10-01T02:27:53.453
> 
> 标签：python

问我：通过过滤 lowers 列表，创建并打印一个单词的前半部分与后半部分匹配的单词列表。示例包括“bonbon”、“froufrou”、“gaga”和“murmur”。

到目前为止我所拥有的：

```
[word for word in lowers if list.(word)(1:len(word)/2:)==list.(word)(len(word)/2::)] 
```

我不确定如何将单词列成列表，因此我只能将某些字符用于此过滤器。我知道这行不通，但到目前为止这是我的逻辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T02:33:20.473

试试这个：

`[word for word in lowers if word[len(word)//2:] == word[:len(word)//2]]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T02:57:27.850

逻辑错误：您从索引 1 而不是 0 切片`list.(word)(1:len(word)/2:)`

语法错误：`list.(word)`语法不正确，列表切片使用 [ ] 而不是 ( )。简单地用`word[start:stop]`它来打破它

采用：

`[word for word in lowers if word[:len(word)//2]==word[len(word)//2:]]`

编辑：感谢 Ignacio Vazquez-Abrams 的评论 - 使用整数除法 ( // 运算符 ) 实现 Python 3 兼容性

# mysql - mysql date_add 2次在程序中

> ID：12666883
> 
> 赞同：0
> 
> 时间：2012-10-01T02:28:02.060
> 
> 标签：mysql, stored-procedures, dateadd

我想在一个过程中使用 Date_add 2 次，但它返回 0 行（而它应该返回行）

这是程序

```
 select av.*, ap.*,c.* from tbl_available av 
 left join tbl_appointment ap on av.avHours = ap.appointmenttime 
 and ap.calendarid = kalenderId 
 and ap.appointmentdate = DATE_ADD(dag, INTERVAL 6 DAY)
 left join tbl_client c on ap.clientid = c.clientid
 where av.avCalendarId = KalenderId 
 and av.avDays = DayOfweek(DATE_ADD(dag, INTERVAL 6 DAY)) 
 order by avHours; 
```

它可以在没有 date_add 的情况下工作

提前致谢！

//编辑

我现在拥有的：

```
select av.*, ap.*,c.*, ab.absentid from tbl_available av 
left join tbl_appointment ap on av.avHours = ap.appointmenttime 
and ap.calendarid = kalenderId 
and ap.appointmentdate BETWEEN dag AND DATE_ADD(dag, INTERVAL 6 DAY)
and (av.avDays = DayOfweek(ap.appointmentdate) OR ap.appointmentdate IS NULL)
left join tbl_client c on ap.clientid = c.clientid
left join tbl_absent ab on av.avHours = ab.ababsent
and ab.abHoliday = dag
and ab.abCalendarID = kalenderId
where av.avCalendarId = kalenderId 
order by avDays,avHours; 
```

但是没有获取 ab.absentid，这是为什么呢？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T02:54:22.803

我不确定您*到底*想要什么，但在整个星期内，请尝试以下操作：

```
select av.*, ap.*,c.* from tbl_available av 
left join tbl_appointment ap on av.avHours = ap.appointmenttime 
and ap.calendarid = kalenderId 
and ap.appointmentdate BETWEEN dag AND DATE_ADD(dag, INTERVAL 6 DAY)
and (av.avDays = DayOfweek(ap.appointmentdate) OR ap.appointmentdate IS NULL)
left join tbl_client c on ap.clientid = c.clientid
where av.avCalendarId = KalenderId 
order by avHours; 
```

我`BETWEEN`用来指定`ap.appointmentdate`. 更改为与没有约会的行`av.avDays`相关`ap.appointmentdate`或也显示没有约会的行（假设这种行为是因为你有一个`LEFT JOIN`on `tbl_appointment`）。我已经离开了，`DayOfweek(dag) ...`因为您正在查看整整一周，所以这是多余的。

# mysql - 我需要一个简单的 sql 查询来查找具有特定字符的单词

> ID：12666885
> 
> 赞同：2
> 
> 时间：2012-10-01T02:28:55.633
> 
> 标签：mysql

我不是一个返回仅包含这些字符的单词的 sql 查询。例如：如果我将字符指定为 d,o,k,c,l。然后查询应该返回dock、doll、所有可能的英文单词。我的数据库中已经有英文单词列表。

我试过这个查询，

```
select col_name from TName
Where
col_name REGEXP "^[d|o|k|c|l]{2,}$" 
```

但是，这总是返回 0 行。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T02:30:14.157

尝试这个，

```
select col_name 
from TName
Where col_name REGEXP "\w[dockcl]+\w" 
```

# php - Javascript 和 PHP 中的动态饼图数据

> ID：12666888
> 
> 赞同：3
> 
> 时间：2012-10-01T02:29:22.003
> 
> 标签：php, javascript, d3.js, dynamic-data, pie-chart

以下代码表示将在 javascript 中以饼图可视化形式显示的数据。

```
<script type="text/javascript">

    var agg = { label: 'Aggressive', pct: [60, 10, 6, 30, 14, 10] },
        bal = { label: 'Balanced',   pct: [24,  7, 2, 18, 13, 36] },
        mod = { label: 'Moderate',   pct: [12,  4, 2, 10, 11, 61] },
        inc = { label: 'Income',     pct: [ 0,  0, 0,  0,  0,100] },

</script> 
```

我想将 pct 值作为 php 变量，而不是像上面的代码中那样固定。我该怎么做呢？

我想把它当作`var agg = <?php echo json_encode($data); ?>;`

$data 是 php 变量

我想在答案中找到它：[Dynamic Javascript Tree Structure](https://stackoverflow.com/questions/12522022/dynamic-javascript-tree-structure/12522258#12522258)

使用 var treeData 和函数 toTree 对上述链接问题的第二个答案似乎与我想要做的完全一样。但是，我如何将这些代码和函数应用到我的饼图中？

我想通过 php 变量或 php 数组或 json 编码使 6 个值的 pct 数组动态化。

而不是 `pct: [60, 10, 6, 30, 14, 10]`如上所示，我想将 6 个值中的每一个作为 php 变量。比如： pct: [$r1, $r2, $r3, $r4, $r5, $r6] 。我该怎么做呢？

我正在使用的代码可以在[http://jsfiddle.net/MX7JC/9/找到](http://jsfiddle.net/MX7JC/9/)

我可以使用循环或递归函数来填充饼图数据吗？

# ios - 有没有办法在 iOS 中创建选项卡式选择器？或者以某种方式结合小键盘+选择器输入？

> ID：12666890
> 
> 赞同：1
> 
> 时间：2012-10-01T02:29:59.220
> 
> 标签：ios, uipickerview, numeric-keypad

我正在寻找一种干净的方法来在一个屏幕内启用两个交互。

例如：

1）用户点击“添加活动”按钮

2) 用户输入一些标准单位（例如，10 米），然后从列表中选择相关的活动（例如，选择列表：慢跑、跑步、步行、爬行）

我现在能想到的就是创建两个单独的输入字段——一个调用小键盘，另一个调用选择器。是否可以创建一个选项卡式小键盘，以便用户完成数字输入，然后只需点击小键盘上方的“活动类型”，元素就会切换到选择器？

感谢任何输入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T03:53:44.990

没有股票键盘。如果你只需要一个小键盘，你应该能够用几个按钮实现一个非常合理的键盘。添加几个“选项卡”按钮，并显示/隐藏适当的视图：键盘或选择器。

# java - Java 中某些 Gurmukhi 字符的不正确表示

> ID：12666891
> 
> 赞同：1
> 
> 时间：2012-10-01T02:30:09.377
> 
> 标签：java, unicode, internationalization, javafx-2

我正在尝试在 Gurmukhi 脚本的 Java 桌面应用程序中显示一些文本。我的系统上安装了所有在互联网上可用的 Gurmukhi 字体。我可以在浏览器和文字处理器中用 Gurmukhi 读写。它们都显示了几乎所有字符的正确呈现。喜欢...

--------图片已删除----------

现在相同的文本看起来像这样......

--------图片已删除----------

在我的 Java 应用程序中。我注意到 SIHARI（即用来表示`i`[as in promise] 的元音）被放在字符之后而不是之前。

我在互联网上搜索过，发现 Unicode 建议在字符之后输入它（SIHARI - Unicode '\u0a3f'），但在它之前呈现它。在我看来，Java 似乎在盲目地渲染它而不遵循所描述的 unicode 逻辑。

我不想创建相同文本的 2 个副本以在 2 个不同的地方使用。有没有其他/更好的方法来解决这个问题？

（我已经尝试在我的应用程序中显式更改字体，尝试所有可用的字体，但没有奏效）。

# c++ - 如何将地图的内容从一个类复制到另一个类的新向量中

> ID：12666894
> 
> 赞同：1
> 
> 时间：2012-10-01T02:30:33.237
> 
> 标签：c++

在我的 C++ 代码中，我有一个类，它有一个对的映射作为私有成员，我需要将这些对复制到一个新的向量中，该向量将保存在不同的类（也是私有的）中。如果这些容器都在 main() 中，我可以使用 copy() 轻松完成，但 copy() 不适用于我的课程。考虑到我的限制，最直接的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T02:33:37.110

如果您有权访问类定义，则可以创建一个特殊`friend`函数，该函数可用于访问每个类的私有成员并将私有成员从一个类复制到另一个类。

例如：

```
class B; //forward declaration

class A
{
    private:
        //... private data members

    public:
        //... methods, etc.

        friend void copy(const A&, B&);
};

class B
{
    private:
        //... private data members

    public:
        //... methods, etc.

        friend void copy(const A&, B&);
};

void copy(const A& rhs, B& lhs)
{
    //... copy the private elements out of class A into class B
} 
```

当然，再一次，如果您可以访问类定义，您可以做很多事情，包括向其中一个类添加一个简单的方法，将一个类声明为另一个类`friend`，等等。如果其他人创建了代码并且将这些数据成员声明为私有，那么他们要么错过了一个用例，要么你不应该接触这些数据......

# python - 从列表中删除与子字符串匹配的项目

> ID：12666897
> 
> 赞同：26
> 
> 时间：2012-10-01T02:31:18.007
> 
> 标签：python, list, substring, string-matching

如果它与子字符串匹配，如何从列表中删除元素？

我尝试使用`pop()`and`enumerate`方法从列表中删除一个元素，但似乎我缺少一些需要删除的连续项目：

```
sents = ['@$\tthis sentences needs to be removed', 'this doesnt',
     '@$\tthis sentences also needs to be removed',
     '@$\tthis sentences must be removed', 'this shouldnt',
     '# this needs to be removed', 'this isnt',
     '# this must', 'this musnt']

for i, j in enumerate(sents):
  if j[0:3] == "@$\t":
    sents.pop(i)
    continue
  if j[0] == "#":
    sents.pop(i)

for i in sents:
  print i 
```

输出：

```
this doesnt
@$  this sentences must be removed
this shouldnt
this isnt
#this should
this musnt 
```

期望的输出：

```
this doesnt
this shouldnt
this isnt
this musnt 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-01T02:34:46.783

像这样简单的东西怎么样：

```
>>> [x for x in sents if not x.startswith('@$\t') and not x.startswith('#')]
['this doesnt', 'this shouldnt', 'this isnt', 'this musnt'] 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-01T02:37:13.817

这应该有效：

```
[i for i in sents if not ('@$\t' in i or '#' in i)] 
```

如果您只想要以指定句子开头的内容，请使用该`str.startswith(stringOfInterest)`方法

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-10-01T02:45:16.943

另一种技术使用`filter`

```
filter( lambda s: not (s[0:3]=="@$\t" or s[0]=="#"), sents) 
```

您的原始方法的问题是，当您在列表项上`i`并确定它应该被删除时，您将其从列表中删除，这会将`i+1`项目滑入该`i`位置。您在 index 处的循环的下一次迭代，`i+1`但该项目实际上是`i+2`.

说得通？

# playframework - Setting up IntelliJ IDEA IDE to work with a Play2 application?

> ID：12666899
> 
> 赞同：3
> 
> 时间：2012-10-01T02:31:50.100
> 
> 标签：playframework, intellij-idea, playframework-2.0

I want to setup IntelliJ IDEA as my IDE for a Play2 application. According to the documentation there should be an idea command that comes with the play framework. See here [http://www.playframework.org/documentation/2.0.3/IDE](http://www.playframework.org/documentation/2.0.3/IDE). I just downloaded, unzipped and setup the play framework and even created a new application but the *idea* command seems to be missing.

Where is this command? If it's not going to be available then I could use some tips on setting up the environment manually.

I already tried Creating an new project and importing the sources but IntelliJ did not detect any **frameworks**.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-01T04:59:44.017

Maybe you forgot to switch to the application folder.

not working:

```
$ play new my-app 
$ play idea 
```

output:

```
play! 2.0.3, http://www.playframework.org
This is not a play application! 
```

correct:

```
$ play new my-app
$ cd my-app
$ play idea 
```

If that does not work, please show what you have typed and what is the output.

IntelliJ IDEA 11 has no native support for play 2.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T10:12:19.380

I follow the steps

1.  play new myproject
2.  cd myproject
3.  play idea

And then following the intellij documentation I tried to import the play module, didnt work

But checking the [Play wiki](https://github.com/playframework/Play20/wiki/IDE) I realize that instead of importing the module into an existing project of iltellij I must **open the project** and everithing is already in place.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T00:06:11.220

For Play 2.0, I ran into issues with the vanilla `play idea` command. Most, if not all associated libraries were malformed in the .iml file.

As a workaround, I used `play eclipsify` and used Idea's 'Import from External Source' to create a proper idea project with all the dependencies. Worked like a charm.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-08T19:28:08.593

You can also try using:

```
play idea with-sources=yes 
```

Works for me.

# java - 用Akka远程系统玩2.0.2

> ID：12666903
> 
> 赞同：2
> 
> 时间：2012-10-01T02:32:20.567
> 
> 标签：java, playframework, playframework-2.0, akka, future

我正在使用 Akka 2 和 Play 2.0.2。我想将 Play Framewrok 连接到远程 Akka 系统。我已经完成了演员的远程配置和远程引用，但是任何时候我尝试将播放框架连接到 Akka 远程系统。我收到错误我在下面提供代码片段。

来自 play 应用程序的代码。

```
public static Result index() throws InterruptedException { 

      ActorSystem csystem = Akka.system();
      ActorRef localNode = csystem.actorOf(new Props(LocalNode.class),"localNode");
        localNode.tell("Hello");

        Thread.sleep(5000);
        csystem.shutdown();
        return ok(index.render("I am OK"));
  }  
} 
```

这是来自 Play Actor 的代码

```
public class LocalNode extends UntypedActor {

    LoggingAdapter log = Logging.getLogger(getContext().system(), this);
    Timeout timeout = new Timeout(Duration.create(5 , "seconds"));

    static ActorRef masterActor;

    public void preStart()
    {

        /* Get reference to Master Node*/
         masterActor = getContext().
            actorFor("akka://MasterNode@127.0.0.1:9002/user/masterNode/masterActor");
    }

    @Override
    public void onReceive(Object message) throws Exception {
        System.out.println(" Future called  ");

        Future<Object> future = Patterns.ask(masterActor , message, timeout);

            String result = (String) Await.result(future, timeout.duration());

           log.info("Message from Server", result.toString());  
    }
} 
```

Play 应用程序 conf 文件中的代码

```
#confige the remote connection

localNode {
    akka {
        actor {
            provider = "akka.remote.RemoteActorRefProvider"
        }
        remote {
            transport = "akka.remote.netty.NettyRemoteTransport"
            netty {
                hostname = "127.0.0.1"
                port = 0
            }
        }
    }
} 
```

下面是来自远程 Akka Master 节点的代码

包 Rubine_Cluster；

```
import com.typesafe.config.ConfigFactory;
public class MasterNode implements Bootable
{
     final ActorSystem system;

      public MasterNode() {
        system = ActorSystem.create("MasterNode", ConfigFactory.load()
            .getConfig("masterNode"));
        ActorRef masterActor = system.actorOf(new Props(MasterActor.class),"masterActor");
        System.out.println(" Master Node is called ");
      }  
      public void startup() {

      }      
          public void shutdown() {
            system.shutdown();
          }
} 
```

下面是远程 Akka 子 Actor 的代码

```
public class MasterActor extends UntypedActor {

    public MasterActor(){System.out.println(" the masteractor has been started ");}

    @Override
    public void onReceive(Object message) throws Exception {
        System.out.print(" this is from me to you  "+message.toString());

         if (message instanceof String) {
                // Get reference to the message sender and reply back
                getSender().tell(message + " got something");
                System.out.print(" this is from me to you  "+message.toString());
    }
  }  
} 
```

下面是远程 Akka 系统 conf 文件的代码

```
masterNode {

akka {
  actor {
    provider = "akka.remote.RemoteActorRefProvider"
  }
  remote {
    transport = "akka.remote.netty.NettyRemoteTransport"
    netty {
      hostname = "127.0.0.1"
      port = 9002
    }
 }
}
} 
```

下面我们有错误代码：

```
[ERROR] [10/01/2012 03:03:21.646] [application-akka.actor.default-dispatcher-2]
[akka://application/user/localNode] sending to terminated ref breaks promises
akka.pattern.AskTimeoutException: sending to terminated ref breaks promises
        at akka.pattern.AskSupport$class.ask(AskSupport.scala:76)
        at akka.pattern.package$.ask(package.scala:43)
        at akka.pattern.Patterns$.ask(Patterns.scala:41)
        at akka.pattern.Patterns.ask(Patterns.scala)
        at controllers.LocalNode.onReceive(LocalNode.java:32)
        at akka.actor.UntypedActor$$anonfun$receive$1.apply(UntypedActor.scala:1
54)
        at akka.actor.UntypedActor$$anonfun$receive$1.apply(UntypedActor.scala:1
53)
        at akka.actor.Actor$class.apply(Actor.scala:318)
        at akka.actor.UntypedActor.apply(UntypedActor.scala:93)
        at akka.actor.ActorCell.invoke(ActorCell.scala:626)
        at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:197)
        at akka.dispatch.Mailbox.run(Mailbox.scala:179)
        at akka.dispatch.ForkJoinExecutorConfigurator$MailboxExecutionTask.exec(
AbstractDispatcher.scala:516)
        at akka.jsr166y.ForkJoinTask.doExec(ForkJoinTask.java:259)
        at akka.jsr166y.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:975)
        at akka.jsr166y.ForkJoinPool.runWorker(ForkJoinPool.java:1479)
        at akka.jsr166y.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:104) 
```

我正在做一个提交项目，有人可以帮助解决这个问题，欢迎提出任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T02:54:08.933

1.  您不应该关闭 csystem，因为它是 Play 的 ActorSystem。
2.  你有："actorFor("akka://MasterNode@127.0.0.1:9002/user/masterNode/masterActor");" 但是您没有“masterActor”这样的父级（“masterNode”）

# facebook - 通过 app_id 回收应用

> ID：12666904
> 
> 赞同：1
> 
> 时间：2012-10-01T02:33:19.217
> 
> 标签：facebook, xfbml

我有一个与我的 Facebook 帐户相关联的应用程序。我停用了我的帐户几天，当我回来时，我在应用程序部分找不到我的应用程序。我的网站上确实有一个likebox，它链接到我为该应用程序创建的页面。正是通过那个likebox，我得到了appID。有什么方法可以使用我拥有的 appID 再次将应用程序连接到我的帐户？

# c# - 为什么 string.Length 不适用于 text.Substring？

> ID：12666915
> 
> 赞同：0
> 
> 时间：2012-10-01T02:35:40.853
> 
> 标签：c#, asp.net-mvc, string, substring

我试图在给定单词之后获取字符串。下面是代码。

```
private static string GetStringAfterWord(string text, int position)
    {
        if (text.Length - 1 < position || text[position] == ' ') return null;

        int start = position;
        int end = position;

        while (end < text.Length - 1 )   
        end++;

        return text.Substring(start, end);

    } 
```

这段代码总是给我这个错误：System.ArgumentOutOfRangeException：索引和长度必须引用字符串中的位置。

string.Length 不是返回总字符数，为什么总是超出范围。我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T02:40:42.297

它应该是：

```
if (text.Length - 1 < position || position < 0 || text[position] == ' ') 
```

并更换

```
 while (end < text.Length - 1 )   
    end++; 
```

和

```
 end = text.Length - start; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T02:42:47.393

`string.SubString`的第二个参数是子串的长度。

在您的示例中，您是在说`grab the string starting at <start> and is <end> characters long`. 如果`start`是 2 并且字符串的长度是 11，那么`end`将是 10.. 如果加在一起得到 12（10+2=12.. 而字符串的长度是 11）。

你需要这个：

```
return text.Substring(start, end - start); 
```

..还有这个：

```
while (end < text.Length) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T02:45:55.790

方法的第二个参数`Substring()`不是索引，而是长度。

# c - 赋值表达式和 volatile

> ID：12666916
> 
> 赞同：5
> 
> 时间：2012-10-01T02:35:48.427
> 
> 标签：c, volatile

总的来说，我似乎有一个合理的理解`volatiles`，但是有一个看似晦涩的案例，我不确定按照标准应该如何工作。我已经阅读了 C99 的相关部分以及关于 SO 的十几篇或更多相关帖子，但找不到此案例的逻辑或解释此案例的地方。

假设我们有这段代码：

```
 int a, c;
  volatile int b;
  a = b = 1;
  c = b += 1; /* or equivalently c = ++b; */ 
```

应该`a`这样评价：

```
 b = 1;
  a = b; // volatile is read 
```

或像这样：

```
 b = 1;
  a = 1; // volatile isn't read 
```

?

同样，应该`c`这样评估：

```
 int tmp = b;
  tmp++;
  b = tmp;
  c = b; // volatile is read 
```

或像这样：

```
 int tmp = b;
  tmp++;
  b = tmp;
  c = tmp; // volatile isn't read 
```

?

在简单的情况下，`a = b; c = b;`事情很清楚。但是上面的那些呢？

基本上，问题是，当对象为 volatile 时，C99 的 6.5.16c3 中的“表达式在赋值后具有左操作数的值”到底是什么意思？：

> 赋值运算符将值存储在左操作数指定的对象中。赋值***表达式在赋值之后具有左操作数的值***，但不是左值。

它是否意味着额外读取 volatile 以产生赋值表达式的值？

**更新**：

所以，这就是两难境地。

如果“赋值后对象的值”不是从对 volatile 对象的额外读取中获得的，那么编译器会假设 volatile 对象`b`：

*   能够保存写入其中的任意`int`值，它可能不是（例如，位 0 硬连线为 0，这对于硬件寄存器来说并不罕见，我们应该使用 volatiles）
*   在分配写入发生的点和获得表达式值的点之间不能改变（这可能是硬件寄存器的问题）

正因为如此，如果不是从 volatile 对象的额外读取中获得表达式值，则不会产生 volatile 对象的值，标准声称应该是这种情况。

这两个假设似乎都不太适合易失性对象的性质。

如果，OTOH，“赋值后对象的值”是从对所述易失性对象的额外隐含读取中获得的，那么使用易失性左操作数评估赋值表达式的副作用取决于是否使用表达式值完全任意，这将是一种奇怪的、意外的和记录不充分的行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T04:56:17.497

C11 澄清这是未指定的。

[您可以在此处](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)找到 C11 的最终草案。您现在引用的第二句话指的是脚注 111：

> 赋值运算符将值存储在左操作数指定的对象中。赋值表达式在赋值后具有左操作数的值，^(111))但不是左值。

脚注 111 说：

> 111.  允许实现读取对象以确定值，但不是必需的，即使对象具有 volatile 限定类型。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-12-16T13:19:58.290

从常识来看，我会这样争论：

如果`b = (whatever)`并且`whatever`可以存储在寄存器中，则编译器没有理由重新评估表达式以进行赋值。也因为它不能比寄存器中的值更新。考虑`f(x)`vs. `r = f(x)`：一旦`f(x)`知道结果，就可以分配它。因此，`a = b = 1`应该没有理由再次分配`1`给`b`，只是为了能够分配给`a`。还假设你写`a = ++b`：显然`b`不能第二次增加；否则基本的 C 语义将被破坏。

# ios - 尝试访问核心数据时出错

> ID：12666919
> 
> 赞同：2
> 
> 时间：2012-10-01T02:36:20.760
> 
> 标签：ios, core-data, nsmanagedobjectcontext

我正在尝试获取保存在我的核心数据对象之一中的值，但是我不断收到此错误

```
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+entityForName: nil is not a legal NSManagedObjectContext parameter searching for entity name 'Man'' 
```

结果错误发生在我编写的尝试访问核心数据对象然后记录其内容的代码中，如下所示。

```
if ([manufDBVNumber isEqualToNumber:currentDBVersion]) {
        // READ FROM CORE DATA
        // WRITE TO CORE DATA
        NSManagedObjectContext *context = [self managedObjectContext];

        NSLog(@"%@", context);

        // Test listing all FailedBankInfos from the store
        NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
        NSEntityDescription *entity = [NSEntityDescription entityForName:@"Man" inManagedObjectContext:self.managedObjectContext]; // This is where the error is happening.
        [fetchRequest setEntity:entity];

        NSError *error;

        NSMutableArray *manufacturerDictionaryArray = [[NSMutableArray alloc] init];

        NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&error];
        for (Manuf *manuf in fetchedObjects) {
            NSLog(@"MANA: %@", man.mana);
            NSLog(@"SURGE: %@", man.surge);
            NSLog(@"HEALTH: %@", manuf.health);

etc//.... 
```

这就是我合成 managedObjectContext 和 fetchedResultsController 的方式

```
// Core-Data variables used for fetching and managing the object
@synthesize fetchedResultsController = __fetchedResultsController;
@synthesize managedObjectContext = __managedObjectContext; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T02:42:18.880

你来做这件事：

```
NSManagedObjectContext *context = [self managedObjectContext]; 
```

但是然后你访问这个：

```
self.managedObjectContext 
```

假设您`NSLog(@"%@", context);`显示一个有效的 NSManagedObjectContext，那么我会这样做：

```
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Man" inManagedObjectContext:context]; 
```

或者，将您的原始声明更改为：

```
self.managedObjectContext = [self managedObjectContext]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T22:45:06.537

在您的 viewController.m 实现文件中，就在这段代码下面：

```
- (void)viewDidLoad
{ 
```

添加这段代码：

```
id delegate = [[UIApplication sharedApplication] delegate];
    self.managedObjectContext = [delegate managedObjectContext]; 
```

# c# - 区分用户取消超时

> ID：12666922
> 
> 赞同：28
> 
> 时间：2012-10-01T02:37:00.853
> 
> 标签：c#, .net, timeout, task-parallel-library, dotnet-httpclient

`HttpClient`具有内置超时功能（尽管都是异步的，即超时可以被认为与 http 请求功能正交，因此可以由通用异步实用程序处理，但除此之外）并且当超时开始时，它会抛出一个`TaskCanceledException`（包裹在一个`AggregateException`）。

TCE 包含一个`CancellationToken`等于`CancellationToken.None`。

现在，如果我提供自己的`HttpClient`a`CancellationToken`并使用它在操作完成（或超时）之前取消操作，我会得到完全相同的`TaskCanceledException`，再次使用 a `CancellationToken.None`。

有没有办法**通过只查看抛出的异常**来确定超时是否取消了请求，而不必让我自己`CancellationToken`访问检查异常的代码？

PS这可能是一个错误并且`CancellationToken`以某种方式错误地修复了`CancellationToken.None`吗？在*使用自定义 CancellationToken 取消*的情况下，我希望`TaskCanceledException.CancellationToken`等于该自定义令牌。

**编辑** 为了使问题更清楚一点，通过访问原始`CancellationTokenSource`，很容易区分超时和用户取消：

> origCancellationTokenSource.IsCancellationRequested == **true**

`CancellationToken`从异常中获取虽然给出了错误的答案：

> ((TaskCanceledException) e.InnerException).CancellationToken.IsCancellationRequested == **false**

由于受欢迎的需求，这里**有一个最小的例子：**

```
public void foo()
{
    makeRequest().ContinueWith(task =>
    {
        try
        {
            var result = task.Result;
            // do something with the result;
        }
        catch (Exception e)
        {
            TaskCanceledException innerException = e.InnerException as TaskCanceledException;
            bool timedOut = innerException != null && innerException.CancellationToken.IsCancellationRequested == false;

            // Unfortunately, the above .IsCancellationRequested
            // is always false, no matter if the request was
            // cancelled using CancellationTaskSource.Cancel()
            // or if it timed out
        }
    });
}

public Task<HttpResponseMessage> makeRequest()
{
    var cts = new CancellationTokenSource();
    HttpClient client = new HttpClient() { Timeout = TimeSpan.FromSeconds(10) };
    HttpRequestMessage httpRequestMessage = new HttpRequestMessage(HttpMethod.Get, "url");

    passCancellationTokenToOtherPartOfTheCode(cts);
    return client.SendAsync(httpRequestMessage, cts.Token);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-30T18:01:20.867

公认的答案当然是理论上*应该*如何工作，但不幸的是，在实践`IsCancellationRequested`中并没有（可靠地）设置附加到异常的令牌：

[取消 HttpClient 请求 - 为什么 TaskCanceledException.CancellationToken.IsCancellationRequested 为假？](https://stackoverflow.com/q/29319086/62600)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T02:03:09.843

是的，它们都返回相同的异常（可能是因为在内部也使用了令牌超时），但可以通过这样做很容易地找出它：

```
 catch (OperationCanceledException ex)
            {
                if (token.IsCancellationRequested)
                {
                    return -1;
                }

                return -2;
            } 
```

所以基本上如果你遇到异常但你的令牌没有被取消，那么这是一个常规的 http 超时

# android - 测量应用程序响应时间/等待 Android 中准备好的下一个活动？

> ID：12666925
> 
> 赞同：1
> 
> 时间：2012-10-01T02:37:40.820
> 
> 标签：android, automated-tests, robotium, monkeyrunner

我正在开发一个自动化测试套件来获取一些 Android 应用程序（我无权访问其源代码）的时间信息。

我还没有决定是使用 MonkeyRunner 还是 Robotium。我主要关心的是在我对 UI 执行操作（比如输入 URL）之后，如何确定 Android 何时满足我的请求，下一个活动的所有组件都已准备好使用，我已准备好获取结果并获取下一步操作（比如我请求的页面已完全加载，或者电子邮件已完全打开）。

对于网络浏览器，这很简单，我可以使用 onProgressChaged() 或 onPageFinished()。但我正在寻找一种适用于所有应用程序的更通用的方法。我认为 Instrumentation.waitForIdleSync() 或 Instrumentation.waitForIdle() 可能是我最好的选择。

但是，就我阅读的有关 MonkeyRunner 和 Robotium 的文档而言，它们似乎都没有很好地与 waitForIdle 集成。在 Robotium 中，我可以发送一些输入然后获取输出，但似乎没有一种简单的方法可以让我知道输出何时准备好，并且可能在那时调用回调。MonkeyRunner 在这方面也很相似。

所以我想知道是否有一种简单的方法可以让我知道我的请求什么时候得到满足（如用户所感知的那样），而无需我自己重新实现 Robotium 功能？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:02:43.210

这可能非常棘手，并且完全取决于您要求 monkeyrunner 做什么。例如，如果您有一个 monkeyrunner 脚本，并发出了启动计算器应用程序的命令，您可以让一个 python 子进程监控 adb logcat -b 事件输出以确定计算器应用程序是否已启动。如果您要求按下计算器中的按钮，您可以休眠 1 或 2 秒。

但是没有直接的方法可以确定 android 是否处理了您的事件。仅仅是因为，每项操作都不同，需要自己的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T04:16:59.080

您可以将断言放入机器人中，然后像计时器一样在前后使用 system.nanoseconds()。

这可能是获取时间信息的简单方法

# android - 如何读取由另一个 apk 创建的文件？

> ID：12666929
> 
> 赞同：0
> 
> 时间：2012-10-01T02:38:20.540
> 
> 标签：android, file

我的应用程序（A.apk）使用 openFileOutput 创建文件：

```
FileOutputStream os = this.openFileOutput(file, Context.MODE_WORLD_READABLE); 
```

我怎样才能通过另一个应用程序（B.apk）读取这个文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T02:42:10.660

只有当文件位于手机内存或 SD 卡中时，您才能读取它。

与 SharedPreference 或 Sqlite 数据库文件系统不同，它没有应用程序依赖。含义 File 完全独立于 Android 应用程序。您可以从一个应用程序 (.apk) 创建文件并从另一个 android 应用程序 (.apk) 读取它。为此，您不需要任何特殊的机制。

# c++ - 不扩展 std::exception 的运行时异常消息

> ID：12666930
> 
> 赞同：2
> 
> 时间：2012-10-01T02:38:32.770
> 
> 标签：c++, exception

我有一些这样的代码：

```
class ParseError: public exception {

protected:

  mutable string msg;
  int position;

public:

  explicit ParseError(const string& message, const int index) {
    msg = message;
    position = index;
  }

  virtual ~ParseError() throw () {
  }

  const char * what() const throw () {
    stringstream ss(msg);
    ss << "Parse error at position " << position << ": " << msg;
    msg = ss.str();
    return msg.c_str();
  }

}; 
```

当我抛出它时，在 valgrind 下运行单元测试时会看到类似这样的内容：

> foo.h:102：带有消息的意外异常：'第 9 位解析错误：发现意外字符：blah'

这就是我想要的，但我很好奇基`exception`类在幕后做了什么。如果我不扩展`exception`但保持课程的其余部分不变，我会得到：

> foo.h:102：带有消息的意外异常：“未知异常”

我需要向我的班级添加什么才能无法扩展`exception`并仍然显示消息？

顺便说一句，我意识到我可能应该扩展`runtime_error`而不是`exception`. 在这种情况下，我很好奇`exception`幕后的原因是什么，我不一定要寻求有关最佳实践的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T03:07:35.117

如果您不处理异常，则无法保证您会收到有用的错误消息；唯一的保证是程序将通过调用`std::terminate`.

您的实现似乎能够识别出未处理的异常是从 派生的`std::exception`，并使用该知识来调用其覆盖`what()`以生成错误消息。它对非标准异常类型一无所知，它不应该仅仅因为它们恰好与完全不相关的类中的函数具有相同的名称而随机调用函数。

如果你想在抛出任意类型时打印一些有用的东西，你需要一个处理程序来捕获该类型并用它做正确的事情。但我绝对建议你只抛出派生自的类型，`std::exception`除非你有很好的理由抛出其他东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T03:53:18.043

这里有两个问题：

在这个函数中，你`msg`自己：

```
 const char * what() const throw () {
    stringstream ss(msg);
                 ** ^^^
    ss << "Parse error at position " << position << ": " << msg;
    **                                                      ^^^ 
```

但这并不是很重要，因为您的第二个问题是您应该将创建消息从`what()`构造函数移至构造函数。`what()`应该只返回它。

```
class ParseError: public exception {
protected:
  string msg;

public:
  explicit ParseError(const string& message, const int index) {
    ostringstream ss;
    ss << "Parse error at position " << position << ": " << message;
    msg << ss.str();
  }

  const char * what() const throw () {
    return msg.c_str();
  }

}; 
```

# azure - Windows Azure VPN 公共访问

> ID：12666933
> 
> 赞同：1
> 
> 时间：2012-10-01T02:39:11.160
> 
> 标签：azure, virtual-machine, vpn, public

我在 Windows Azure 的 VPN 中创建了一个 VM。我为运行服务器 2012 的特定机器添加了 TCP 端点。但是每次我运行一个小程序监听 TCP 时，就像[nodejs](http://nodejs.org)中的示例一样，任何客户端都会拒绝连接。即使我禁用防火墙也会发生这种情况？我也尝试过使用 linux (ubuntu)。有人可以帮助我，让我知道我缺少哪些步骤吗？我连接了：server1.cloudapp.net:tcp_port

RDP 和 SSH 通过 TCP 可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:20:38.043

这里有几件事要检查，这可能会提供更多线索。1) 仔细检查您的端点，确保公共端口和私有端口设置正确 2) rdp 到 VM 并执行“netstat -an”检查端口是否确实在监听

# php - 什么时候应该在 PHPDoc 类型提示和文档块中使用 NULL？

> ID：12666934
> 
> 赞同：13
> 
> 时间：2012-10-01T02:39:16.547
> 
> 标签：php, phpdoc, docblocks

`null`在使用PHPDoc 描述变量时，我对何时使用 as 类型感到困惑。类型提示是否应该描述外部调用者预期和遵守的希望和期望，或者它们是否应该记录变量的所有可能类型，即使希望它在实践中是一种非常具体的类型？

示例 1：默认值。以下函数只需要非空值。但是，如果没有传递任何值，它默认`null`并显式检查该值，以确定是否传递了任何值，并为这种情况返回一个特殊值。希望没有外部调用者会传递除整数之外的任何内容。应该`null`在`@param`下面的类型中使用，还是应该只指定`int`，因为这是我们想要传递的，如果有任何传递？

```
/**
 * @param int|null $bar
 */
function foo($bar = null) {
  if(is_null($bar)) { 
    return 'ABC';
  }

  return doSomething($bar);
} 
```

示例 2：实例属性。我们只希望 $bar 包含整数。也就是说，如果没有为 bar 设置任何内容，则此实例属性的默认 PHP 值为 null。我是否需要在每个使用 $bar 的地方都考虑到这一点，可能的 null 类型如下？

```
class Foo {
  /**
   * @var int|null
   */
  public $bar;

  /**
   * @param int|null $bar
   */
  public setBar( $bar) {
    $this->bar = $bar;
  }

  /**
   * @return int|null
   */
  public function getBar() {
    return $this->bar;
  }
} 
```

基本上，我发现自己几乎在每一个`@param`和`@var`声明中都乱扔垃圾，`|null`因为从技术上讲，它可能就是那个价值。但在实践中不*应该*如此。我是否应该期望我的几乎所有类型都包含`null`或应该假设的可能性，并且我应该避免指定它，除非我希望`null`明确设置或接收一个值？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-01T14:06:35.907

在实践中，我倾向于让 param 标签只列出您*想要*传入的内容。但是，对于返回标签，您确实需要列出可能返回的每种类型。这就是我对两者不同的原因。

由于 PHP 不是强类型的，即使你说“只传递一个 int”，你的方法仍然需要确保它没有传递一些意想不到的东西。仅仅因为方法代码试图处理接收其他类型，你不希望你的文档告诉你的用户“当然，你可以给我一个 NULL，我会为你做一些事情”。您希望您的文档说“给我一个 int，句号”。

在考虑返回值时，您的用户确实确实需要知道可能从您的方法返回的每种潜在返回类型，因为他们确实需要在代码中覆盖其基础以处理您的方法可能返回的所有类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T03:22:46.383

是的，按照 PHPDoc 标准，你应该在任何地方都包含 null （当然，如果它适用的话）

见这里： http: [//manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_tags.param.pkg.html](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_tags.param.pkg.html)

> 数据类型应该是有效的 PHP 类型（int、string、bool 等）、对象类型的类名，或者简单地“混合”。此外，您可以通过用竖线分隔单个参数来列出多个数据类型（例如“@param int|string $p1”）。您可以记录列出的参数或将由标准 PHP 函数 func_num_args()/get_func_arg() 解析的任何可选参数。func_get_arg() 列出的参数的推荐名称格式为： $paramname 如果只有一个参数 $paramname,... 如果参数数量不限

# java - 每月付款计算器

> ID：12666935
> 
> 赞同：-3
> 
> 时间：2012-10-01T02:39:23.450
> 
> 标签：java, logic

我有一些代码，我发现它一直给我一个除以 0 的错误。假设计算每月付款金额！

```
import java.io.*;

public class Bert
{
public static void main(String[] args)throws IOException
{
    //Declaring Variables
    int price, downpayment, tradeIn, months,loanAmt, interest;
    double annualInterest, payment;
    String custName, inputPrice,inputDownPayment,inputTradeIn,inputMonths, inputAnnualInterest;
    BufferedReader dataIn = new BufferedReader(new InputStreamReader(System.in));

   //Get Input from User
    System.out.println("What is your name?  ");
    custName = dataIn.readLine();
    System.out.print("What is the price of the car?  ");
    inputPrice = dataIn.readLine();
    System.out.print("What is the downpayment?  ");
    inputDownPayment = dataIn.readLine();
    System.out.print("What is the trade-in value?  ");
    inputTradeIn = dataIn.readLine();
    System.out.print("For how many months is the loan?  ");
    inputMonths = dataIn.readLine();
    System.out.print("What is the decimal interest rate?  ");
    inputAnnualInterest = dataIn.readLine();

    //Conversions
    price = Integer.parseInt(inputPrice);
    downpayment = Integer.parseInt(inputDownPayment);
    tradeIn = Integer.parseInt(inputTradeIn);
    months = Integer.parseInt(inputMonths);
    annualInterest = Double.parseDouble(inputAnnualInterest);

            interest =(int)annualInterest/12;
            loanAmt = price-downpayment-tradeIn;

            //payment = loanAmt*interest/a-(1+interest)
            payment=(loanAmt/((1/interest)-(1/(interest*Math.pow(1+interest,-months)))));
    //Output
    System.out.print("The monthly payment for " + custName + " is $");
    System.out.println(payment);
            // figures out monthly payment amount!!!
}
} 
```

尝试设置支付变量时会出现问题。我不明白为什么它不断出现除以 0 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T02:44:04.043

您已将变量声明为 Int，因此`1/interest`将`1/(interest*Math.pow(1+interest,-months))`返回 0。将变量的类型更改为 float 或 double。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T02:50:43.623

给你的一个建议是，你应该学会“向后切片”你的代码。

这意味着当你看到你得到 a 时，`DivideByZeroException`你应该看看你的代码，然后说，“为什么会发生这种情况？”

在你的情况下，让我们看看这个：

```
payment=(loanAmt/((1/interest)-(1/(interest*Math.pow(1+interest,-months))))); 
```

所以，现在，`Math.pow`永远不会返回任何零（因为它是一种幂），所以它必须`interest`是零。让我们找出原因：

```
interest =(int)annualInterest/12; 
```

所以现在，Java 中的整数除法会*截断*。这意味着如果您有 0.5，它将被切断，并变成零。（同样，1.3 将被截断为 0）。

所以现在：

```
annualInterest = Double.parseDouble(inputAnnualInterest); 
```

这意味着你传入的东西被解析为小于 12 的值。如果它大于 12，那么你会得到其他东西。

但是，您可能只是传入了一个无效的字符串，例如，传入`"hello2.0"`将不起作用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T02:55:35.860

这将始终四舍五入为 0。所以它会引发异常。

```
 (1/interest)-(1/(interest*Math.pow(1+interest,-months))))); 
```

使用[float](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)类型而不是[int](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)。了解它们的工作原理。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-02-16T23:46:59.667

```
package computeloan;

import java.util.Scanner;

public class ComputeLoan {

public static void main(String[] args) {
   Scanner input = new Scanner(System.in);

        System.out.print(" Enter Yearly Interest Rate : ");

        double annualIntersetRate = input.nextDouble();

        double monthlyIntersetRate = annualIntersetRate / 1200;

        System.out.print(" Enter Number of years :  ");

        int numberOfYears = input.nextInt();

        // Enter loan amount

        System.out.print(" Enter Loan Amount : ");

        double loanAmount = input.nextDouble();

        double monthlyPayment = loanAmount * monthlyIntersetRate /(1-1/Math.pow(1+monthlyIntersetRate,numberOfYears*12 ));

        double totalPayment = monthlyPayment * numberOfYears * 12;
        //Calculate monthlyPaymeent and totalPayment

        System.out.println(" The Monthly Payment Is : " +(int)(monthlyPayment*100) /100.0);

        System.out.println(" The Total Payment Is : " +(int)(totalPayment*100) /100.0 );
    }
} 
```

# c# - 为什么没有字符串 在 C# 的 System.Collections.Generic 中？

> ID：12666943
> 
> 赞同：2
> 
> 时间：2012-10-01T02:41:09.660
> 
> 标签：c#

C++ STL`string`是通过模板实现的。

我现在正在学习 C#，只是好奇.net 设计人员没有在 System.Collections.Generic 中提供通用字符串的原因是什么？

如何在 C# 中有一个 int 的字符串，double 的字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T02:48:51.887

C# ^*`int`中没有s 或s字符串这样的东西；最接近的是 a ，但它不支持典型的特定于字符串的操作，例如子字符串、修剪等。`double`^(`List<T>`)

您可以使用 .NET 的 LINQ 对字符串执行大部分操作。例如，`substring(1,5)`将是`list.Skip(1).Take(5).ToList()`。

* * *

^* C++ 也是如此：有`basic_string`模板可以用其他类型实例化，但`std::string`它是模板类的实例，而不是模板类本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T02:48:42.700

没有'double's string'和'int's string'这样的东西。它是一个“双精度数组”和“一个整数数组”。这就是为什么没有通用的“字符串”。

# java - java编译器如何退出void方法？

> ID：12666944
> 
> 赞同：3
> 
> 时间：2012-10-01T02:41:57.103
> 
> 标签：java

当编译器到达 void 方法的末尾时，它是否只是调用`return;`？谁能告诉我在哪里可以找到有关此类行为的文档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T02:45:51.517

是的，如果您查看字节码`javap -c class`，您将看到`RETURN`void 方法中的指令。

[您可以通过阅读JVM 规范](http://docs.oracle.com/javase/specs/jvms/se7/html/index.html)来了解有关字节码的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T02:45:26.467

如果缺少 RETURN 操作码 (B1)，则会在 void 方法的末尾自动插入，如果您愿意，也可以手动将其插入

# c - 为 Arduino 库（如液晶）创建 Simulink 模块

> ID：12666945
> 
> 赞同：6
> 
> 时间：2012-10-01T02:42:01.243
> 
> 标签：c, matlab, arduino, simulink

我想使用 Simulink 为[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)硬件创建程序。但我想使用现有的库（如液晶）来处理[LCD](http://en.wikipedia.org/wiki/Liquid_crystal_display)显示器的输出。如何创建包含液晶类文件的 s-function？

我认为 s-function 是要走的路，因为现有的 Simulink Arduino 库模块实际上是被屏蔽的 s-function。我正在使用 Simulink 学生版，所以我认为我不能从模型编译[C](http://en.wikipedia.org/wiki/C_%28programming_language%29)代码并将其合并到 Arduino IDE 中的项目中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-04T09:39:48.400

我会把我的评论变成答案...... :)

好的，要从 Simulink 创建程序，您需要安装代码生成工具。`ver`会告诉您是否有 Simulink Coder，以及可选的 Embedded Coder。如果您使用的是旧版本的 MATLAB，则它称为 Real-time Workshop。如果没有其中一个，您将不会生成任何代码。

因此，假设您可以代码生成：

S-functions 是他们要走的路：http: [//www.mathworks.co.uk/help/simulink/s-function-basics.html](http://www.mathworks.co.uk/help/simulink/s-function-basics.html)

...尽管有各种工具可以帮助创建 S-Function。

简而言之，过程是：

*   获取 sfunc_basic.c（或类似的）S-Function C 文件模板的副本并相应地填充。这无论如何都不是微不足道的，它可能需要很长时间才能编译（见下文）并且在模型中实例化时不会使 MATLAB 崩溃。
*   使用 mex 命令编译（参见文档）。
*   在模型中使用块。为自己创建一个执行非常简单的测试工具模型。使用创建工作解决方案所需的最小模型块。
*   创建一个 TLC 文件，该文件将定义如何在模型 C 程序的编译和运行时使用块数据。在这里，您将调用液晶库。
*   使用 TLC 和/或 S-Function 生成代码/修复错误/修复生成代码中的错误/重复直到完成:)

所有这些步骤都可以扩展很多。第一次这个过程有点麻烦，但你会学到很多关于 S-Function、model.RTW 文件、TLC 和调试所有上述内容的知识。

哦，是的，调试 S-Function 可能很麻烦。准备好使用 Visual Studio 之类的东西“附加”到 matlab 进程来调试它。

富有的

# php - 从文本文件 PHP 或 LINUX 返回行的范围

> ID：12666949
> 
> 赞同：2
> 
> 时间：2012-10-01T02:42:33.827
> 
> 标签：php, linux, file

我在这里有一个小问题，我需要能够读取一个未知大小的文件，它可能是几百行或更多，日志文件一直在变化，具体取决于我检查的时间。我想要一个在 php 或 linux 中的方法，我可以从文件中读取一系列行。我不想将整个文件读入 php 内存然后删除这些行，因为文件可能比 php 允许的内存大。

我还希望它使用默认的 php 模块或默认的 linux 工具，因为它需要可移植，所以不需要安装任何东西。

编辑：

对于基于 linux 的选项，我希望能够提供多个范围，我可能需要获得几个不同范围的行读？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T02:48:29.220

使用 awk：

```
awk 'NR>=10 && NR<=15' FILE 
```

使用 awk（两个范围）：

```
awk 'NR>=10 && NR<=15 || NR>=26 && NR<=28' FILE 
```

与`ed`：

```
echo 2,5p | ed -s FILE 
```

有`ed`和 两个范围：

```
echo -e "2,5p\n7,8p" | ed -s FILE 
```

最后但同样重要的是，`sed`具有两个范围的解决方案（最快的解决方案，用 测试`time`）：

```
sed -n '2,5p;7,8p' FILE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T02:54:01.817

怎么样的东西

```
head -100 | tail -15 
```

给你第 86-100 行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T02:46:22.253

```
$ cat input.txt
q
w
e
r
t
y
u
i
$ sed -n 2,5p input.txt
w
e
r
t 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T03:06:09.347

```
while ($lines_read < last_line_desired) {
  while ($line = fgets($filehandle, $buffersize) !== false)
    if (line >= first_desired_line) {
      push($interesting_lines, $line)
    }
  }
  $lines_read++
} 
```

打开文件句柄，选择足够大的缓冲区大小以覆盖任何预期的行长度等取决于您。

如果您正在阅读经常附加到的文件，您应该查看[ftell](http://www.php.net/manual/en/function.ftell.php)和[fseek](http://www.php.net/manual/en/function.fseek.php)函数以注意您在数据中的位置，并在阅读更多内容之前跳过所有旧内容。

# google-chrome-extension - 这是 chrome 扩展上下文菜单的错误吗

> ID：12666953
> 
> 赞同：2
> 
> 时间：2012-10-01T02:42:52.330
> 
> 标签：google-chrome-extension, contextmenu

我试图在父菜单项下创建一个子上下文菜单项，并测试了以下代码：

```
 chrome.contextMenus.create(
     {'title': 'child1', 'parentId': parentItem, 'onclick': function(info,tab){console.log('info', info)}}
  ) 
```

返回的代码`317`是子项 ID，在检查上下文菜单后，子项 'child1' 确实是在 'parentItem' 下创建的，但是当我单击 'child1' 时，`console.log`显示

```
 info  Object
  editable: false
  menuItemId: 317
  pageUrl: "https://www.google.com/"
  parentMenuItemId: 317 
```

'parentMenuItemId' 与 'menuItemId' 相同，不是 ，也不`parentItem`是`317`。

这里发生了什么？我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T21:49:55.420

是的，这是一个错误。我已将其报告为 crbug.com/165771 ，但将来最好在 crbug.com/new 上报告错误（或可疑错误），以便有人能更快地看到它们。

# database - 您将使用什么来构建带有客户端的分布式数据库？

> ID：12666957
> 
> 赞同：0
> 
> 时间：2012-10-01T02:43:27.057
> 
> 标签：database, distributed, bittorrent, libtorrent

如果我想为媒体文件（比如图像）创建一个分布式数据库，我会使用什么？

这个想法是数据库不会被任何特定实体控制（尽管软件可以，尽管它是 GPL / forkable）。

相反，你会有一个客户端，它有类似 libtorrent 的东西，可以用来浏览/缓存数据库。您将使用“源”列表配置客户端。

Cydia 是一个很好的模型。

虽然我不想使用网络主机，但我想使用充当超级节点的比特种子播种机（它将对任意树高的子节点进行编目）

libtorrent 会是最好的选择吗？或者会有更好的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:54:16.030

仅仅因为给定的种子存在播种器并不意味着*您的*客户知道他们正在播种什么。对于每个单独的“事物”，您至少需要一个磁力链接或一个 torrent 文件。

所以，用洪流“缓存”内容，好的，但就“浏览”而言，你需要别的东西（例如：一个索引，它会列出磁铁/洪流文件 - 我怀疑你会使用 lib/bittorrent 构建它...）。

其次，如果使用 DHT，您的“来源”列表将由跟踪器提供，以便连接到您的集群，或者至少是已知对等节点（您称之为超级节点）的列表 - 再次由 libtorrent 的其他东西提供。

此外，显然（？）你不能用种子“更新”内容——如果有什么“改变”，那么它就是一个不同的种子——所以，短期内，你会有一个包含无法修改项目的数据库......通过bittorrent“复制”，但被其他一些技术索引。

我不太明白您为什么要使用 bittorrent 来（重新）实现“分布式数据库”，但这对我来说似乎是不正确的（如果只是因为索引，它不会被分发，几乎是失败的）目的）。

如果您的问题是可靠性/可扩展性，为什么不考虑任何（现有的）“db”引擎可以本机完成这项工作？（带有 mongo 的副本集，或者 hadoop 上的分布式文件系统，甚至是节点之间良好的老式手工数据复制，甚至是 sql 主从，或者一些云存储......）。

如果您的问题是对数据库的“所有权”，那么这与内容无关，而是与索引有关。现在，我可以想象一些同行会在他们之间交换他们拥有的项目列表，允许给定的同行从另一个给定的同行获取数据，但这与我所说的“数据库”相去甚远......

我不认为你可以放弃“所有权”（至少在索引上）而不放弃“数据库”的概念......（假设我很好理解你的意思是“数据库无法控制任何特定实体”）

# java - FastCGI 和 Java Servlet API 的区别

> ID：12666962
> 
> 赞同：1
> 
> 时间：2012-10-01T02:44:13.087
> 
> 标签：java, servlets, fastcgi

据我了解，FastCGI 和 java Servlet API 都是开发 Web 应用程序的规范，后来是一个非常具体的 java.util.

由于我们已经在 java 中提供了 Fast CGI api，为什么 Sun Microsystem 觉得需要新的规范来开发 Java 应用程序？Java Servlet API 与 Fast CGI 相比有什么优势吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T16:15:32.760

Servlet API 提供了 Web 服务器可以用 Java 编写并直接调用应用程序的“优势”。不需要字节协议 (FastCGI)。该协议是 Servlet 规范。

如果你问我，这真的是苹果对橘子。Java 开发人员似乎更喜欢在整个堆栈上运行 Java，因此 servlet 是常态。

关于 Sun 想要 Servlet 的原因，我想说很明显：如果您的应用程序是使用 Servlet 规范开发的，那么您必然会使用 Java。如果它使用 FastCGI，您可以随时更改实际的网络服务器。但这不是唯一的原因。Servlet 规范也比 FastCGI 接口更加雄心勃勃。相比之下，FastCGI 是低级的，真的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T06:16:29.860

在低级视图中，FastCGI 仍然为每个脚本或程序占用一个进程。但是 Servlet 引擎在同一个进程中运行所有 servlet。

# ios - 在 iOS 应用程序中实现登录过程的正确方法

> ID：12666963
> 
> 赞同：0
> 
> 时间：2012-10-01T02:44:24.963
> 
> 标签：ios, iphone, login, uitabbarcontroller

当用户第一次运行我的应用程序时，会出现 LoginViewController。他登录后，我会展示一个 ModalViewController，其中包含应用程序的所有内容。如果用户想注销，我关闭模式视图，再次显示 LoginViewController。

如果用户在已经登录时运行应用程序，就会出现问题。在 self.window.rootViewController 中，我直接设置了应用程序的主视图（嵌入在 a 中`UITabBarController`），所以如果用户想注销，我不知道如何“关闭”视图并显示 LoginViewController。

设想：

*   尚未登录的用户：LoginViewController ->（登录）-> `UITabBarController`->（注销）-> LoginViewController。
*   用户已登录：`UITabBarController`->（注销）-> LoginViewController。

我认为必须有一种简单的方法可以做到这一点，因为在具有登录系统的应用程序中这是一种非常正常的行为，但是我还没有找到一种干净的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-27T13:52:14.527

经过多次努力，我们发布了一个名为[CLHoppingViewController](https://github.com/eladb/CLHoppingViewController)的开源库，它可以处理这种情况。

所以，在你的情况下，你会做这样的事情来描述启动流程：

```
UIViewController *loginViewController;
UIViewController *mainViewController;

if (user_not_logged_in) {
  [self hopToViewController:loginViewController then:^{
    [self hopToViewController:mainViewController then:nil];
  }];
}
else {
  [self hopToViewController:mainViewController then:nil];
} 
```

该库可以支持更高级的条件序列。例如，您可以显示启动画面、有条件地显示入职用户体验等。

[这里](http://hackingonstuff.net/post/78005128788)有一个简短的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T03:26:43.310

我这样做了：

应用代表：

```
 if() //signed in
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];        
    TabBarController *tabBarController1 = [[TabBarController alloc] init];
    self.window.rootViewController = tabBarController1.myTabBarController;
    [self.window makeKeyAndVisible];
}

else //signed out

{

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.viewController = [[SigninTabBarTemplateViewController alloc] initWithNibName:@"SigninTabBarTemplateViewController" bundle:nil]; 
    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:self.viewController];
    self.window.rootViewController = navController;
    [self.window makeKeyAndVisible];

} 
```

如果您已注销，我将 tabbarcontroller 实现为单独的 UITabBarController，如下所示：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) { 

    UIViewController *viewController1 = [[FirstTab alloc] initWithNibName:@"FirstTab" bundle:NSBundle.mainBundle];
    UINavigationController *firstNavController = [[UINavigationController alloc]initWithRootViewController:viewController1];
    UIViewController *viewController2 = [[SecondTab alloc] initWithNibName:@"SecondTab" bundle:NSBundle.mainBundle];
    UINavigationController *secondNavController = [[UINavigationController alloc]initWithRootViewController:viewController2];
    myTabBarController = [[UITabBarController alloc] init];
    myTabBarController.viewControllers = [NSArray arrayWithObjects:firstNavController, secondNavController, nil];

}
return self;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T05:15:08.070

尝试以下方式：

```
TabBarController *tabBarController1 = [[TabBarController alloc] init];
    self.window.rootViewController = tabBarController1.myTabBarController;
    [self.window makeKeyAndVisible];

   // if not Logedin
     if() {
    self.viewController = [[LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil]; 
    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:self.viewController];
   [self.tabBarController1 presentModalViewController:navController animated:NO];

    } 
```

登录后，关闭 LoginViewController。再次注销时，在 tabBarViewController 上以模态方式显示 LoginViewController，如上所述。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T07:42:35.620

处理登录状态的一种优雅方法是使用状态[机](http://en.wikipedia.org/wiki/Finite-state_machine)。原则是，定义所有可能的状态以及它们之间的转换。乍一看，这似乎有点矫枉过正，但随着您的应用程序越来越大，这项投资将获得回报。对于小型应用程序，if/else 方式应该没问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-09T18:22:49.660

```
#import <UIKit/UIKit.h>
#import "EditInfoViewController.h"

@interface ViewController : UIViewController <UITableViewDelegate, UITableViewDataSource, EditInfoViewControllerDelegate>

@property (weak, nonatomic) IBOutlet UITableView *tblPeople;

- (IBAction)addNewRecord:(id)sender;

@end
#import "ViewController.h"
#import "DBManager.h"

@interface ViewController ()

@property (nonatomic, strong) DBManager *dbManager;

@property (nonatomic, strong) NSArray *arrPeopleInfo;

@property (nonatomic) int recordIDToEdit;

-(void)loadData;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    // Make self the delegate and datasource of the table view.
    self.tblPeople.delegate = self;
    self.tblPeople.dataSource = self;

    // Initialize the dbManager property.
    self.dbManager = [[DBManager alloc] initWithDatabaseFilename:@"sampledb.sql"];

    // Load the data.
    [self loadData];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    EditInfoViewController *editInfoViewController = [segue destinationViewController];
    editInfoViewController.delegate = self;
    editInfoViewController.recordIDToEdit = self.recordIDToEdit;
}

#pragma mark - IBAction method implementation

- (IBAction)addNewRecord:(id)sender {
    // Before performing the segue, set the -1 value to the recordIDToEdit. That way we'll indicate that we want to add a new record and not to edit an existing one.
    self.recordIDToEdit = -1;

    // Perform the segue.
    [self performSegueWithIdentifier:@"idSegueEditInfo" sender:self];
}

#pragma mark - Private method implementation

-(void)loadData{
    // Form the query.
    NSString *query = @"select * from peopleInfo";

    // Get the results.
    if (self.arrPeopleInfo != nil) {
        self.arrPeopleInfo = nil;
    }
    self.arrPeopleInfo = [[NSArray alloc] initWithArray:[self.dbManager loadDataFromDB:query]];

    // Reload the table view.
    [self.tblPeople reloadData];
}

#pragma mark - UITableView method implementation

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return self.arrPeopleInfo.count;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    // Dequeue the cell.
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"idCellRecord" forIndexPath:indexPath];

    NSInteger indexOfFirstname = [self.dbManager.arrColumnNames indexOfObject:@"firstname"];
    NSInteger indexOfLastname = [self.dbManager.arrColumnNames indexOfObject:@"lastname"];
    NSInteger indexOfAge = [self.dbManager.arrColumnNames indexOfObject:@"age"];

    // Set the loaded data to the appropriate cell labels.
    cell.textLabel.text = [NSString stringWithFormat:@"%@ %@", [[self.arrPeopleInfo objectAtIndex:indexPath.row] objectAtIndex:indexOfFirstname], [[self.arrPeopleInfo objectAtIndex:indexPath.row] objectAtIndex:indexOfLastname]];

    cell.detailTextLabel.text = [NSString stringWithFormat:@"Age: %@", [[self.arrPeopleInfo objectAtIndex:indexPath.row] objectAtIndex:indexOfAge]];

    return cell;
}

-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    return 60.0;
}

-(void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath{
    // Get the record ID of the selected name and set it to the recordIDToEdit property.
    self.recordIDToEdit = [[[self.arrPeopleInfo objectAtIndex:indexPath.row] objectAtIndex:0] intValue];

    // Perform the segue.
    [self performSegueWithIdentifier:@"idSegueEditInfo" sender:self];
}

-(void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath{

    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the selected record.
        // Find the record ID.
        int recordIDToDelete = [[[self.arrPeopleInfo objectAtIndex:indexPath.row] objectAtIndex:0] intValue];

        // Prepare the query.
        NSString *query = [NSString stringWithFormat:@"delete from peopleInfo where peopleInfoID=%d", recordIDToDelete];

        // Execute the query.
        [self.dbManager executeQuery:query];

        // Reload the table view.
        [self loadData];
    }
}

#pragma mark - EditInfoViewControllerDelegate method implementation

-(void)editingInfoWasFinished{
    // Reload the data.
    [self loadData];
}

@end
===================
#import <UIKit/UIKit.h>

@protocol EditInfoViewControllerDelegate

-(void)editingInfoWasFinished;

@end

@interface EditInfoViewController : UIViewController <UITextFieldDelegate>

@property (nonatomic, strong) id<EditInfoViewControllerDelegate> delegate;

@property (weak, nonatomic) IBOutlet UITextField *txtFirstname;

@property (weak, nonatomic) IBOutlet UITextField *txtLastname;

@property (weak, nonatomic) IBOutlet UITextField *txtAge;

@property (nonatomic) int recordIDToEdit;

- (IBAction)saveInfo:(id)sender;

@end

#import "EditInfoViewController.h"
#import "DBManager.h"

@interface EditInfoViewController ()

@property (nonatomic, strong) DBManager *dbManager;

-(void)loadInfoToEdit;

@end

@implementation EditInfoViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    // Make self the delegate of the textfields.
    self.txtFirstname.delegate = self;
    self.txtLastname.delegate = self;
    self.txtAge.delegate = self;

    // Set the navigation bar tint color.
    self.navigationController.navigationBar.tintColor = self.navigationItem.rightBarButtonItem.tintColor;

    // Initialize the dbManager object.
    self.dbManager = [[DBManager alloc] initWithDatabaseFilename:@"sampledb.sql"];

    // Check if should load specific record for editing.
    if (self.recordIDToEdit != -1) {
        // Load the record with the specific ID from the database.
        [self loadInfoToEdit];
    }
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

/*
#pragma mark - Navigation

// In a storyboard-based application, you will often want to do a little preparation before navigation
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    // Get the new view controller using [segue destinationViewController].
    // Pass the selected object to the new view controller.
}
*/

#pragma mark - UITextFieldDelegate method implementation

-(BOOL)textFieldShouldReturn:(UITextField *)textField{
    [textField resignFirstResponder];
    return YES;
}

#pragma mark - IBAction method implementation

- (IBAction)saveInfo:(id)sender {
    // Prepare the query string.
    // If the recordIDToEdit property has value other than -1, then create an update query. Otherwise create an insert query.
    NSString *query;
    if (self.recordIDToEdit == -1) {
        query = [NSString stringWithFormat:@"insert into peopleInfo values(null, '%@', '%@', %d)", self.txtFirstname.text, self.txtLastname.text, [self.txtAge.text intValue]];
    }
    else{
        query = [NSString stringWithFormat:@"update peopleInfo set firstname='%@', lastname='%@', age=%d where peopleInfoID=%d", self.txtFirstname.text, self.txtLastname.text, self.txtAge.text.intValue, self.recordIDToEdit];
    }

    // Execute the query.
    [self.dbManager executeQuery:query];

    // If the query was successfully executed then pop the view controller.
    if (self.dbManager.affectedRows != 0) {
        NSLog(@"Query was executed successfully. Affected rows = %d", self.dbManager.affectedRows);

        // Inform the delegate that the editing was finished.
        [self.delegate editingInfoWasFinished];

        // Pop the view controller.
        [self.navigationController popViewControllerAnimated:YES];
    }
    else{
        NSLog(@"Could not execute the query.");
    }
}

#pragma mark - Private method implementation

-(void)loadInfoToEdit{
    // Create the query.
    NSString *query = [NSString stringWithFormat:@"select * from peopleInfo where peopleInfoID=%d", self.recordIDToEdit];

    // Load the relevant data.
    NSArray *results = [[NSArray alloc] initWithArray:[self.dbManager loadDataFromDB:query]];

    // Set the loaded data to the textfields.
    self.txtFirstname.text = [[results objectAtIndex:0] objectAtIndex:[self.dbManager.arrColumnNames indexOfObject:@"firstname"]];
    self.txtLastname.text = [[results objectAtIndex:0] objectAtIndex:[self.dbManager.arrColumnNames indexOfObject:@"lastname"]];
    self.txtAge.text = [[results objectAtIndex:0] objectAtIndex:[self.dbManager.arrColumnNames indexOfObject:@"age"]];
}

@end
===== 
```

====================

```
#import <Foundation/Foundation.h>

@interface DBManager : NSObject

@property (nonatomic, strong) NSMutableArray *arrColumnNames;

@property (nonatomic) int affectedRows;

@property (nonatomic) long long lastInsertedRowID;

-(instancetype)initWithDatabaseFilename:(NSString *)dbFilename;

-(NSArray *)loadDataFromDB:(NSString *)query;

-(void)executeQuery:(NSString *)query;

@end

#import "DBManager.h"
#import <sqlite3.h>

@interface DBManager()

@property (nonatomic, strong) NSString *documentsDirectory;

@property (nonatomic, strong) NSString *databaseFilename;

@property (nonatomic, strong) NSMutableArray *arrResults;

-(void)copyDatabaseIntoDocumentsDirectory;

-(void)runQuery:(const char *)query isQueryExecutable:(BOOL)queryExecutable;

@end

@implementation DBManager

#pragma mark - Initialization

-(instancetype)initWithDatabaseFilename:(NSString *)dbFilename{
    self = [super init];
    if (self) {
        // Set the documents directory path to the documentsDirectory property.
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        self.documentsDirectory = [paths objectAtIndex:0];

        // Keep the database filename.
        self.databaseFilename = dbFilename;

        // Copy the database file into the documents directory if necessary.
        [self copyDatabaseIntoDocumentsDirectory];
    }
    return self;
}

#pragma mark - Private method implementation

-(void)copyDatabaseIntoDocumentsDirectory{
    // Check if the database file exists in the documents directory.
    NSString *destinationPath = [self.documentsDirectory stringByAppendingPathComponent:self.databaseFilename];
    if (![[NSFileManager defaultManager] fileExistsAtPath:destinationPath]) {
        // The database file does not exist in the documents directory, so copy it from the main bundle now.
        NSString *sourcePath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:self.databaseFilename];
        NSError *error;
        [[NSFileManager defaultManager] copyItemAtPath:sourcePath toPath:destinationPath error:&error];

        // Check if any error occurred during copying and display it.
        if (error != nil) {
            NSLog(@"%@", [error localizedDescription]);
        }
    }
}

-(void)runQuery:(const char *)query isQueryExecutable:(BOOL)queryExecutable{
    // Create a sqlite object.
    sqlite3 *sqlite3Database;

    // Set the database file path.
    NSString *databasePath = [self.documentsDirectory stringByAppendingPathComponent:self.databaseFilename];

    // Initialize the results array.
    if (self.arrResults != nil) {
        [self.arrResults removeAllObjects];
        self.arrResults = nil;
    }
    self.arrResults = [[NSMutableArray alloc] init];

    // Initialize the column names array.
    if (self.arrColumnNames != nil) {
        [self.arrColumnNames removeAllObjects];
        self.arrColumnNames = nil;
    }
    self.arrColumnNames = [[NSMutableArray alloc] init];

    // Open the database.
    BOOL openDatabaseResult = sqlite3_open([databasePath UTF8String], &sqlite3Database);
    if(openDatabaseResult == SQLITE_OK) {
        // Declare a sqlite3_stmt object in which will be stored the query after having been compiled into a SQLite statement.
        sqlite3_stmt *compiledStatement;

        // Load all data from database to memory.
        BOOL prepareStatementResult = sqlite3_prepare_v2(sqlite3Database, query, -1, &compiledStatement, NULL);
        if(prepareStatementResult == SQLITE_OK) {
            // Check if the query is non-executable.
            if (!queryExecutable){
                // In this case data must be loaded from the database.

                // Declare an array to keep the data for each fetched row.
                NSMutableArray *arrDataRow;

                // Loop through the results and add them to the results array row by row.
                while(sqlite3_step(compiledStatement) == SQLITE_ROW) {
                    // Initialize the mutable array that will contain the data of a fetched row.
                    arrDataRow = [[NSMutableArray alloc] init];

                    // Get the total number of columns.
                    int totalColumns = sqlite3_column_count(compiledStatement);

                    // Go through all columns and fetch each column data.
                    for (int i=0; i<totalColumns; i++){
                        // Convert the column data to text (characters).
                        char *dbDataAsChars = (char *)sqlite3_column_text(compiledStatement, i);

                        // If there are contents in the currenct column (field) then add them to the current row array.
                        if (dbDataAsChars != NULL) {
                            // Convert the characters to string.
                            [arrDataRow addObject:[NSString  stringWithUTF8String:dbDataAsChars]];
                        }

                        // Keep the current column name.
                        if (self.arrColumnNames.count != totalColumns) {
                            dbDataAsChars = (char *)sqlite3_column_name(compiledStatement, i);
                            [self.arrColumnNames addObject:[NSString stringWithUTF8String:dbDataAsChars]];
                        }
                    }

                    // Store each fetched data row in the results array, but first check if there is actually data.
                    if (arrDataRow.count > 0) {
                        [self.arrResults addObject:arrDataRow];
                    }
                }
            }
            else {
                // This is the case of an executable query (insert, update, ...).

                // Execute the query.
                BOOL executeQueryResults = sqlite3_step(compiledStatement);
                if (executeQueryResults == SQLITE_DONE) {
                    // Keep the affected rows.
                    self.affectedRows = sqlite3_changes(sqlite3Database);

                    // Keep the last inserted row ID.
                    self.lastInsertedRowID = sqlite3_last_insert_rowid(sqlite3Database);
                }
                else {
                    // If could not execute the query show the error message on the debugger.
                    NSLog(@"DB Error: %s", sqlite3_errmsg(sqlite3Database));
                }
            }
        }
        else {
            // In the database cannot be opened then show the error message on the debugger.
            NSLog(@"%s", sqlite3_errmsg(sqlite3Database));
        }

        // Release the compiled statement from memory.
        sqlite3_finalize(compiledStatement);

    }

    // Close the database.
    sqlite3_close(sqlite3Database);
}

#pragma mark - Public method implementation

-(NSArray *)loadDataFromDB:(NSString *)query{
    // Run the query and indicate that is not executable.
    // The query string is converted to a char* object.
    [self runQuery:[query UTF8String] isQueryExecutable:NO];

    // Returned the loaded results.
    return (NSArray *)self.arrResults;
}

-(void)executeQuery:(NSString *)query{
    // Run the query and indicate that is executable.
    [self runQuery:[query UTF8String] isQueryExecutable:YES];
}

@end 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-02-20T18:45:21.927

```
 enter code here
@interface ViewController ()
{  sqlite3 *dbref;
    NSString *dbpath;
    BOOL flag;}
@end
@implementation ViewController
@synthesize usertxt,passtxt;
- (void)viewDidLoad
{[super viewDidLoad];
    NSString *docpath;
     NSError *error;
    NSArray *docarr=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSLog(@"directory path=%@",docarr);
    docpath=[docarr objectAtIndex:0];
   // docpath=[docpath stringByAppendingString:@"/simpledb.sqlite/"];
 [[NSFileManager defaultManager] createDirectoryAtPath:docpath withIntermediateDirectories:YES attributes:nil error:&error];
   dbpath=[[NSString alloc] initWithString:[docpath stringByAppendingString:@"/simpledb.sqlite"]];
   NSFileManager *fmgr=[NSFileManager defaultManager];
    if([fmgr fileExistsAtPath:dbpath]!=YES)
    { char *err;
        const char *dbp=[dbpath UTF8String];
        if(sqlite3_open(dbp, &dbref)==SQLITE_OK)
        { const char *crstmt = "CREATE TABLE IF NOT EXISTS Login(Login_id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,Username TEXT , Password TEXT)";
            if(sqlite3_exec(dbref, crstmt, NULL, NULL,&err)!= SQLITE_OK)
            {
            }
            sqlite3_close(dbref);
           }}
    // Do any additional setup after loading the view, typically from a nib.
}
-(IBAction)save:(id)sender
{[self validation];
   if(flag==0)
{ sqlite3_stmt *statement;
    NSString *insertSQL = [NSString stringWithFormat:@"insert into Login(Username,Password) values('%@','%@')",usertxt.text,passtxt.text];
    const char *insert_stmt = [insertSQL UTF8String];
    const char *dbp=[dbpath UTF8String];
    if(sqlite3_open(dbp, &dbref)==SQLITE_OK)
    { sqlite3_prepare_v2(dbref, insert_stmt, -1, &statement, NULL);
        if (sqlite3_step(statement) == SQLITE_DONE)
        {
        }
        else
        {

        }}
    sqlite3_finalize(statement);
    sqlite3_close(dbref);
 UIAlertView *objalert=[[UIAlertView alloc]initWithTitle:@"Inserted Successfully" message:nil delegate:nil cancelButtonTitle:@"cancel" otherButtonTitles:@"ok", nil];
    [objalert show];
}}
-(IBAction)update:(id)sender
{ NSString *querySQL = [NSString stringWithFormat: @"update Login set Username='%@',Password='%@' where Login_id==1",usertxt.text,passtxt.text];
    [self updateQuery:querySQL];}
-(BOOL)updateQuery:(NSString *)querySQL
{ sqlite3_stmt *statement;
    const char *dbp=[dbpath UTF8String];
    if(sqlite3_open(dbp, &dbref)==SQLITE_OK)
    { const char *query_stmt = [querySQL UTF8String];
        if (sqlite3_prepare_v2(dbref, query_stmt, -1, &statement, NULL) == SQLITE_OK)
        { if (sqlite3_step(statement) == SQLITE_ROW)
            { sqlite3_reset(statement);
               return YES;
            } }
        sqlite3_finalize(statement);
        sqlite3_close(dbref)}
    else
    { return NO;
    }
    return YES}
-(void)validation
{ NSString *valida;
//    usertxt.text = [usertxt.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
//    passtxt.text = [passtxt.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
    if ([usertxt.text length]<2)
    {flag=1;
        valida=@"user Name : Minimum 2 Character req*\n";
        UIAlertView *objalert=[[UIAlertView alloc]initWithTitle:nil message:valida delegate:nil cancelButtonTitle:nil otherButtonTitles:@"ok", nil];
        [objalert show];

    }
   } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-03-06T18:15:34.113

```
@imp flipsideviewcont
@syn entries

-(void)viewdidload
{
entries=[[nsmutablarray alloc]onit];
[self opendb];
nsstring *sql=[nsstring stringwithormat:@"select * from summery"];
sqlite_state *stat;
if(sqlite_prepare_v2(db,[sql utf8string],-1,&stat,nil)==sqlite_ok)
{while(sqlite_step(stat==sqlite_row))
{
  char *field1=(char*)sqlite_column_text(stat,0);
  nsstring *field1str=[[nsstring alloc]initwithutf8string:feild1];
  char *field2=(char*)sqlite_column_text(stat,1);
  nsstring *field2str=[[nsstring alloc]initwithutf8string:feild2];
  nsstring *str=[[nsstring alloc]initwithformat:@"%@/%@-%@",field2str,field3str,field4str];
[entries addobjects:str];
}
-(nsstring*)filepath
{

nsarray *path=nssearchpathfordocumentry(nsdocumentdic,nsdomainmask,yes);
return([path objectAtindex:0]stringbyappingpathcomp:@"ss.sql");

}
-(void)opendb
{
if(sqlite_open([self filepath]utf8string,&db)!=sqlite_ok)
{sqlite_close(db);
 nsasser(0,@"problem");
else
{
nslog(@"db open");
}
}

-(ibaction)done
{
[self.delegate flipsideviewcontrollerdidfinish :self];
}
cellforindex
{
cell.textlabel.text=[self.entries objectAtindex:indexpath:row];
}

===========================interface flipsideviewcont======
#import "sqlite3.h"
@class flipsideviewcontroller;
-(void)flipsideviewcontdidfinish:(flipsideviewcontroller*)controller;
@end
@interface flipsideviewcont:viewcont
{
sqlite *db;
}
@property()id<flipsideviewcontrollerdelegate>delegate;
@property()nsmutablearray *entries;
-(void)opendb;
-(nsstring*)filepath;
}

======================
@interface mainviewcontroller:viewcontroller<flipsideviewcontrollerdelegate>
{sqlite3 *db;}
@property()iboutlet nstextfiled *systext,*diatext,*commenttxt;
@property(readpnly,non)nsdate *currentdate;
-(void)createTable:(nsstring*)tablename
withfield1:(nsstring*)field1 withfield2:(nsstring*)field2 withfield3:(nsstring*)field3 withfield4:(nsstring*)field4;
-(ibaction)saveentry;

@implement mainview
-(void)createTable:(nsstring*)tablename
withfield1:(nsstring*)field1 withfield2:(nsstring*)field2 withfield3:(nsstring*)field3 withfield4:(nsstring*)field4
{
char *err;
nastring *sql=[nsstring stringwithformat:@"crete table if nat exist '%@'('%@'""text primary key,'%@' int,'%@' int,'%@'text);",tablename,field1,field2,field3,field4);
if(sqlite_exe(db,[sql utf*string],null,null,&err)!=sqlite_ok)
{sqlite_close(db);
}}
-(void)opendb;
{}
-(nsstring*)filepath()
-(void)viewdidload
{[self opendb];
[self createtable:@"summery" withfield:@"thedate withfield2:@"systonic"];}
-(ibaction)saveenrty
{
int sys=[systext.text intvalue];
int dia=[diatext.text intvalue];
nsstring *comm=comtext.tex;
nsdate *thedate=[nsdate date];
nsstring *sql=[nsstring stringwithformat:@"insert into summery('sys','thedate','dia',''com')values('%@','%d','%d','%@')",thedate,sys,dia,comm];
{sqlite_close(db);
}
systext.text="";
didtext.text="";
commtext.text="";
}
}
-(void)prepareforsegue
{if([[segue identifier]isequalto string:@"showwale");
{[[segue destinationviewcont]setdelegate:self];

}
}

-(void)flipsideviewcontdidfinish
{[self dismissviewcontroller:yes];
}

}

} 
```

# c++ - 无法构建，qmake.exe 在 Qt Creator 中崩溃

> ID：12666969
> 
> 赞同：1
> 
> 时间：2012-10-01T02:45:08.553
> 
> 标签：c++, qt, mingw, qmake

我在 Windows XP SP3 上使用 Qt Creator。我想开发 C++ 桌面应用程序。

我做了一个新项目。每次我点击构建时，都会出现一个窗口，上面写着：

> qmake.exe 遇到问题需要关闭。对此造成的不便，我们表示歉意。

在 Qt Creator 中，会出现与此类似的内容：

```
20:36:55: Running build steps for project yyy...
20:36:55: Starting: "d:\qtsdk\desktop\qt\4.8.1\mingw\bin\qmake.exe" D:\...\yyy.pro -r -spec win32-g++ "CONFIG+=declarative_debug"
20:38:00: The process "d:\qtsdk\desktop\qt\4.8.1\mingw\bin\qmake.exe" crashed.
Error while building project yyy (target: Desktop)
When executing build step 'qmake' 
```

我无法构建，我已经重新安装了软件，但它一直给出同样的错误。

你能告诉我发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T13:14:09.243

通过 bat 文件从命令行运行 qmake 命令是可行的。

# javascript - Javascript 和 HTML5，修改现有渐变

> ID：12666977
> 
> 赞同：3
> 
> 时间：2012-10-01T02:45:59.680
> 
> 标签：javascript, html, canvas, gradient

我正在尝试编写一个小型客厅应用程序，特别是为了避免用户需要安装 Java、flash 或Shockwave。而且我在颜色选择器中遇到了一些渐变问题。

具体来说，问题似乎是我找不到正确清除和重新启动渐变的方法。我正在做一个类似于 SAI Paint 工具和其他绘图程序的三行（目前是 3 个画布原型）RGB 渐变，并且在更新/修改渐变时它不会按照我期望的方式更新，结果是'与输出相比，drawbar' 显示不正确的颜色。

我正在使用 addColorStop() 来更新渐变，但我得到的几乎就像是在推动偏移，而不是替换它。

```
 function sendUpdate(p, p2, p3) //sends update to colour bars.
        {
        //  var id;
            var p;

            cr.beginPath();
            rbg.addColorStop(0, "#00" + hxb + hxc ); //00 00 00 black
            rbg.addColorStop(1, "#FF" + hxb + hxc ); //FF 00 00 bright red
            cr.rect(0, 0, r.width, r.height);
            cr.fillStyle = rbg;
            cr.fill();
            cr.closePath();
            //indicator
            cr.beginPath();
            cr.rect(p - 2, 1, 3, 6);
            cr.lineWidth = 1;
            cr.strokeStyle = "#E0E0E0";
            cr.stroke();
            cr.closePath();

            cg.beginPath();
            cg.rect(0, 0, g.width, g.height);
            gbg.addColorStop(0, "#" + hxa + "00" + hxc ); //FF 00 00 bright red. 
            gbg.addColorStop(1, "#" + hxa + "FF" + hxc ); //FF FF 00 yellow
            cg.fillStyle = gbg;
            cg.fill();
            cg.closePath();
            cg.beginPath();
            cg.rect(p2 - 2, 1, 3, 6); 
            cg.lineWidth = 1;
            cg.strokeStyle = "#E0E0E0";
            cg.stroke();
            cg.closePath();

            cb.beginPath();
            cb.rect(0, 0, b.width, b.height);
            bbg.addColorStop(0, "#" + hxa + hxb + "00" ); //FF 00 00 bright red
            bbg.addColorStop(1, "#" + hxa + hxb + "FF" ); //FF 00 FF pink/purple
            cb.fillStyle = bbg;
            cb.fill();
            cb.closePath();
            cb.beginPath();
            cb.rect(p3 - 2, 1, 3, 6);
            cb.lineWidth = 1;
            cb.strokeStyle = "#E0E0E0";
            cb.stroke();
            cb.closePath();

            document.getElementById("colourIndicator").style.backgroundColor=clr;

        }

        function link(id, x, p) //takes id(which colourbar) 0-255 value and position 0-170 value and UPDATES COLOUR! Use this to initialize or call!
        {
            var x;
            var p;

            if (x <= 255)
            {
                switch(id)
                {
                case 0:
                    hxa = toHex(x);
                    if (hxa.length == 1) { hxa = "0" + hxa; }
                    clr = "#" + hxa + hxb + hxc;
                    document.getElementById("debugc").innerHTML="case0 output: " + hxa + hxb + hxc;
                    pos1 = p;
                    sendUpdate(p, pos2, pos3);
                break;
                case 1:
                    hxb = toHex(x);
                    if (hxb.length == 1) { hxb = "0" + hxb; }
                    clr = "#" + hxa + hxb + hxc;
                    document.getElementById("debugc").innerHTML="case1 output: " + hxa + hxb + hxc;
                    pos2 = p;
                    sendUpdate(pos1, p, pos3);
                break;
                case 2:
                    hxc = toHex(x);
                    if (hxc.length == 1) { hxc = "0" + hxc; }
                    clr = "#" + hxa + hxb + hxc;
                    document.getElementById("debugc").innerHTML="case2 output: " + hxa + hxb + hxc;
                    pos3 = p;
                    sendUpdate(pos1, pos2, p);
                break;
                }
            }
            else 
            {
                x = 255;
                p = 170;
                link(id, x, p);
            }
        } 
```

我对 javascript 很陌生，我无法自己解决这个问题。我已经阅读了 W3 关于画布渐变的部分和功能描述。此处找到的一些颜色选择器和色轮解决方案可能会在以后对我有所帮助，但它们似乎都没有提到我实际上反复更新渐变的问题。

addColorStop 后面的注释是我想要的输出，如果用户选择了颜色 FF0000，让渐变显示用户可以实现的混合颜色。哦，在这个版本中，创建渐变是在函数之外调用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:17:34.493

我认为您需要“重新启动”您的渐变，就好像您在已经创建的渐变上添加颜色步骤一样，它们不会覆盖它已经拥有的渐变。

尝试在函数开始时取消您的 rbg 对象并再次创建渐变对象

# c++ - 是否需要重写以基类为参数的虚函数？

> ID：12666978
> 
> 赞同：1
> 
> 时间：2012-10-01T02:46:20.547
> 
> 标签：c++, inheritance, overloading, virtual-functions

例如，我有纯虚函数的基类：

```
class IBase
{
    virtual void Function(const IBase& ref) = 0;
}; 
```

如果我继承该类，是否必须重载以派生类为参数的“函数”？

```
class Derived
{
    // this will be implemented
    virtual void Function(const IBase& ref) {}

    // does this have to be implemented
    virtual void Function(const Derived& ref) {}
}; 
```

或者编译器可以区分调用，我可以跳过编写重载函数？

```
Derived d();
...

IBase* dptr = &d; // ignoring cast for example

// would never really call 'Function' on itself, this is for example purposes
dptr->Function(d); 
```

注意： IBase::Function 必须采用引用类型，而不是指针类型。

我了解继承纯虚函数的规则，而不是纯虚函数将基类型作为参数的这种特殊情况。

我需要知道的是我是否必须在将继承类型作为参数的每个继承类型中实现重载，或者编译器是否会理解如果我传递 Derived 引用来调用虚拟实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T02:49:13.853

是的，如果您`Function(const IBase&)`在基类中有 a 并在派生类中覆盖它，则可以将对派生类的引用传递给`Function`并将`Function(const IBase&)`被调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T03:18:00.880

> 我需要知道的是我是否必须在将继承类型作为参数的每个继承类型中实现重载，或者编译器是否会理解如果我传递 Derived 引用来调用虚拟实现？

如果只覆盖基类型中定义的函数而不添加重载，编译器会将 to 的所有实例转换`Derived`并`IBase`调用现有函数。

# c# - 共享内存缓存

> ID：12666981
> 
> 赞同：0
> 
> 时间：2012-10-01T02:47:21.240
> 
> 标签：c#, .net, c#-4.0

System.Runtime.Caching.MemoryCache 可以跨不同的控制台应用程序访问吗？

我读过有关 memcached 的信息，但我们的团队只需要使用 .Net 库。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T02:52:38.520

您正在寻找的是[AppFabric 缓存。](http://msdn.microsoft.com/en-us/library/hh334364.aspx)

它将允许您将多个服务器/计算机视为缓存集群中的节点并为您处理自动复制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-27T11:34:06.463

jr pineda 问题的答案：对于单服务器最佳解决方案是[分布式内存](https://docs.microsoft.com/en-us/dotnet/api/microsoft.extensions.dependencyinjection.memorycacheservicecollectionextensions.adddistributedmemorycache?view=dotnet-plat-ext-5.0)缓存，它是 IDistributedCache 的框架提供的实现，用于将项目存储在内存中。分布式内存缓存不是真正的分布式缓存。缓存项由应用程序实例存储在运行应用程序的服务器上。

# javascript - 从 HTML 中分离 jQuery 代码

> ID：12666982
> 
> 赞同：1
> 
> 时间：2012-10-01T02:47:38.387
> 
> 标签：javascript, jquery, html, css

我正在尝试清理我的代码，所以我把所有的东西都放在我的

```
<style></style> 
```

在 CSS 文件中。我正在尝试对我的 jQuery 做同样的事情。所以我创建了一个 Custom.js 文件。但请执行以下操作：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 
```

留在 html 文件中还是可以将它们移动到 Custom.js 文件中？另外，我正在使用一个名为 uscrollbar 的 jQuery 插件，所以我的 html 文件中有这段代码：

```
<script> 
$(document).ready(function(e) {
    $('#scroll_form').uscrollbar();
}); 
</script>​​​​​​​​​​​​​​​​​ 
```

我也可以将其移至 Custom.js 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T02:50:53.150

一个更好的问题。

最好在您的 HTML 中保留指向外部脚本的链接，最好有几个`<script>`标签。尤其是那些使用 CDN 的！

您可以将您的`document.ready()`函数移动到外部 JS，您的所有其他 JS 都将保存在那里。但有时在只涉及该页面的页面中直接包含这样的小片段会更容易。

将内容移动到单独的文件时，以正确的顺序包含它们很重要。
通常像 Modernizr 之类的东西在顶部（`<head>`），jQuery 靠近底部（就在之前`</body>`），然后是您的插件，然后是您的自定义脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T02:52:42.270

查看[RequireJS](http://requirejs.org)，它为您提供了一种超级简单的方法来根据需要包含 javascript 文件，而不是在页眉/页脚中塞满大量`<script>`标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T02:51:58.250

在 HTML 代码中保留对 Javascript 文件（本地或远程）的引用。如果在 DOM 准备好之前不需要准备好它们，请将它们放在页面底部的结束 body 标记之前。例如，您的 jQuery 引用应该几乎总是在您的“head”部分，因为在 HTML 加载时任何对 jQuery 的引用都需要定义，即使在文档准备好之前不调用的函数也不需要定义。许多其他支持文件，例如“jquery.easing”，可以放在底部，从而缩短页面加载时间。

您可以将 uscrollbar() 调用移至 .js 文件，但我建议将所有“就绪”命令放在一个函数中，然后在 HTML 中简单地调用该函数就绪。IE：

```
<script type="text/javascript">
jQuery(document).ready(function() {
    fn_LoadFunctionName_Thats_InYour_Custom_js_files();
});
</script> 
```

不要忘记在你的脚本标签中包含 type="text/javascript" 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T02:51:59.913

如果您使用的不仅仅是一个小函数调用的自定义 js，我会分离成一个新的 js 文件，然后在您的`<script>`标签中调用它。与 css 相同。如果您使用 jquery 更改样式，那么通常我使用`addClass`,`removeClass`和`toggleClass`来修改我的样式。这样您就不会忘记从 css 到 js 文件的样式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T02:52:24.293

您当然可以将它们移动到 Custom.js 文件中。只要确保您已将文件包含在您的 html 文件中，就像您包含了 jQuery 库一样。

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script type="text/javascript" src="Custom.js"></script> 
```

只需确保 Custom.js 的路径正确。此外，您不要将脚本标记放在 js 文件中。所以 Custom.js 将是：

```
$(document).ready(function(e) {
    $('#scroll_form').uscrollbar();
}); 
```

# python - Matplotlib 对图像进行动画处理

> ID：12666990
> 
> 赞同：2
> 
> 时间：2012-10-01T02:49:20.503
> 
> 标签：python, matplotlib

我正在尝试为图像上的一堆不断更新的点设置动画（想象使绘制的点在某些图像上沿对角线移动）。我在这里查看了动画示例：http: [//matplotlib.org/examples/animation/dynamic_image.html](http://matplotlib.org/examples/animation/dynamic_image.html)，但我不确定如何在清除所有以前的点的同时保持相同的图像，然后重新绘制它们。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:46:05.233

您不需要清除每帧之间的图形

```
#initial data 
ln, = ax.plot(x,y)
#...some loop code
    ln.set_xdata(new_x)
    ln.set_ydata(new_y) 
```

您能否展示一些您尝试过的代码，这样可以更容易地给出更具体的答案。

另请参阅：[在循环中有效地使用 matplotlib 的 quiver，](https://stackoverflow.com/questions/12169001/using-matplotlibs-quiver-in-a-loop-efficiently/12170760#12170760)逐帧[可视化 3D-numpy-array](https://stackoverflow.com/questions/11563295/visualization-of-3d-numpy-array-frame-by-frame/11563414#11563414)

# heroku - 为什么activeadmin有时会自动注销？

> ID：12666991
> 
> 赞同：0
> 
> 时间：2012-10-01T02:49:27.953
> 
> 标签：heroku, activeadmin

[ActiveAdmin](http://activeadmin.info)是一个很好的 gem，可以帮助我们如此轻松地管理数据。

但是一个问题是我使用[Heroku](http://www.heroku.com)来运行我的项目。在我登录管理页面后，做一些事情并刷新管理页面，它会自动注销！

是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T04:57:30.950

也许控制器的**会话**影响了您的项目。

你可以看到这个问题：

[https://github.com/gregbell/active_admin/pull/1173](https://github.com/gregbell/active_admin/pull/1173)

* * *

[RailsAdmin](https://github.com/sferik/rails_admin)比它好。

但我建议您自己编写所有源代码。**定制**很棒。

# google-cloud-storage - 谷歌云存储示例不工作

> ID：12666993
> 
> 赞同：1
> 
> 时间：2012-10-01T02:49:57.433
> 
> 标签：google-cloud-storage

还有其他人在让谷歌云存储 API 示例工作时遇到问题吗？ [https://developers.google.com/appengine/docs/python/googlestorage/overview#Complete_Sample_App](https://developers.google.com/appengine/docs/python/googlestorage/overview#Complete_Sample_App)

我遵循了所有非常直截了当的方向。您只需粘贴示例中的代码，它应该可以工作。但是，您必须更新您的存储桶名称。我正在更新这一行

```
# TODO: Change to a bucket your app can write to.
READ_PATH = '/gs/bucket/obj' 
```

至

```
READ_PATH = 'gs://mybucketname' 
```

这没用？我这样更新了它，因为这就是我通过 gsutil 访问我的存储桶的方式

有人让这个工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T23:48:18.700

在 Files API 中，路径不**遵循**gs:// URL 方案。如示例所述，您需要这样做：

```
/gs/mybucketname/myobjectname 
```

# c - 用 C 打印环境

> ID：12666995
> 
> 赞同：1
> 
> 时间：2012-10-01T02:50:23.343
> 
> 标签：c, unix, solaris

我目前正在编写一个 shell，由于某种原因，我无法让我的 printenv 函数工作。当没有给出命令时，它会起作用。当给出两个参数时，它也有效。但是，当给出一个参数时，它不起作用并且什么也不打印。

代码如下：

```
else if (strcmp(args[0], "printenv")==0){
        /* Previously: if (args[1] == NULL && args[0] != NULL){ */
        if (argc == 1){
            int i = 0;
            while (envp[i] != NULL){
                printf("%s\n", envp[i++]);
            }
        }
        /* Previously: else if (args[2] == NULL && args[1] != NULL){ */
        else if (argc == 2){
            char *env;
            while (args[1] = *argv++){
                env = getenv(args[1]);
                if (env != NULL){
                    printf("%s", env);              
                }           
            }
            free(env);
        }
        else {
            fprintf(stderr, "%s: Too many arguments\n", args[0]);
        }   

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T04:19:47.317

```
else if (strcmp(args[0], "printenv")==0){
        if (args[1] == NULL && args[0] != NULL){ 
```

我在这里停止阅读。`strcmp`已经确定了调用，`*args[0]=='p'`为什么要比较`args[0]`NULL呢？

* * *

现在，这已经清除了。我认为你根本不需要这个循环：

```
 while (args[1] = *argv++){
            env = getenv(args[1]);
            if (env != NULL){
                printf("%s", env);              
            }           
        } 
```

只是循环体：

```
 env = getenv(args[1]);
            if (env != NULL){
                printf("%s", env);              
            } 
```

正如@Jason 评论的那样，您不应该释放（或以其他方式修改）由返回的指针`getenv`（也不应该是它指向的数据）。

# c++ - C++：当并非所有派生类都预先知道时使用继承？

> ID：12666999
> 
> 赞同：1
> 
> 时间：2012-10-01T02:50:59.137
> 
> 标签：c++, class, inheritance, polymorphism, derived

> **可能重复：**
> [有没有办法从保存类名的字符串中实例化对象？](https://stackoverflow.com/questions/582331/is-there-a-way-to-instantiate-objects-from-a-string-holding-their-class-name)

我正在处理一些 C++ 代码中的一个问题，该代码具有一个基类`InputFile`和许多派生类：`TxtInputFile`、`ASCInputFile`等，其中每个派生类都是特定的输入类型。

我想做的是从命令行中取出一个变量，然后生成正确的派生类对象来处理指示的文件类型（例如，用户`TXT`在命令行中指示，所以，我生成一个`TXTInputFile`对象并在`InputFile`标签下返回以用于程序的其余部分）。

我可以用`IF`/ 'ELSE' 语句的字符串来做到这一点，将用户输入与一堆预定的文件代码进行比较，但我希望将来能够添加对新文件类型的支持而无需编辑字符串if 语句和添加新的文件代码等。

有什么方法可以在运行时访问某个编译器生成的所有派生类表到基类？

或者可能是某种基于传递参数等于动态绑定的多态构造函数？

（例如`InputFile(string)`...... `TXTInputFile(string temp = "TXT")`，`ASCInputFile(string temp = ASC")`......我意识到这是参数默认值的格式，只是想建议我用这种思路去哪里。）

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T02:56:00.960

您可以进行`std::map`从字符串到工厂函数的映射（可能使用 ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T03:00:19.217

如果解析非常复杂，请不要滚动您自己的解析器。有很多选择，从旧的备用 lex/yacc（或 flex/bison）到 Boost::Spirit 到 ANTLR。Lex/yacc 是一个 LALR 解析器，它生成代码。生成的代码有点难以理解和调试。Boost::Spirit 更符合现代编程概念，ANTLR 也是如此。基本思想是您指定语法以及如何处理该语法。