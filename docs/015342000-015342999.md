# StackOverflow 问答 15342000-15342999

# javascript - 如何使用 jQuery 扩展实现多重继承

> ID：15342002
> 
> 赞同：2
> 
> 时间：2013-03-11T15:08:17.260
> 
> 标签：javascript, jquery, multiple-inheritance, extend

根据 Douglas Crockford 的说法，我可以使用[http://javascript.crockford.com/prototypal.html](http://javascript.crockford.com/prototypal.html)之类的东西（稍作调整）......但我对 jQuery 的处理方式很感兴趣。使用 $.extend 是一种好习惯吗？

我有 4 节课：

```
 var A = function(){ } 
            A.prototype = {
                name : "A",
                cl : function(){
                    alert(this.name);
                }
            }
            var D = function(){} 
            D.prototype = {
                say : function(){
                    alert("D");
                }
            }

            var B = function(){} //inherits from A
            B.prototype = $.extend(new A(), {
                name : "B"
            });

            var C = function(){} //inherits from B and D
            C.prototype = $.extend(new B(), new D(), {
                name : "C"
            });

            var o = new C();

            alert((o instanceof B) && (o instanceof A) && (o instanceof C)); //is instance of A, B and C 
            alert(o instanceof D); //but is not instance of D 
```

所以，我可以从 A、B、C 和 D 中调用每个方法、属性...。问题来了，当我想测试 o 是否是 D 的实例时？我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T15:22:58.680

> 使用 $.extend 是一种好习惯吗

`$.extend`对于单例很有用，但对于原型并不理想。

使用`Object.create`（或 Crockford 的 polyfill），您可以轻松地创建这样的类。我`$.extend`用来简单地处理属性并为它们提供默认值和模块模式以使其井井有条。希望这可以帮助：

```
// Helper that makes inheritance work using 'Object.create'
Function.prototype.inherits = function(parent) {
  this.prototype = Object.create(parent.prototype);
};

var Person = (function PersonClass() {

  var _defaults = {
    name: 'unnamed',
    age: 0
  };

  function Person(props) {
    $.extend(this, props, _defaults);
  }

  Person.prototype = {
    say: function() {
      return 'My name is '+ this.name;
    }
  };

  return Person;

}());

var Student = (function StudentClass(_super) {

  Student.inherits(_super); // inherit prototype

  var _defaults = {
    grade: 'untested'
  };

  function Student(props) {
    _super.apply(this, arguments); // call parent class
    $.extend(this, props, _defaults);
  }

  Student.prototype.say = function() {
    return 'My grade is '+ this.grade;
  };

  return Student;

}(Person));

var james = new Student({ name: 'James', grade: 5 });

console.log(james instanceof Student); // true
console.log(james instanceof Person); // true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:01:07.873

An object has only one prototype, so you cannot make it an instance of two other types with one call.

`$.extend(new B(), new D(), ...` creates an object that is an instance of B. Then all properties of D are copied to the newly created object. But the object will still be an instance of B.

Using `$.extend` is neither good nor bad per se. But you are bound to jQuery, which makes your code less reusable. And you have to be aware of the fact that `$.extend` overwrites properties with the same name, which might or might not be what you want.

# java - 如何在硬盘上存储对象？

> ID：15342005
> 
> 赞同：7
> 
> 时间：2013-03-11T15:08:21.960
> 
> 标签：java, eclipse, serialization, hard-drive, object-serialization

我正在开发一个项目，该项目使用可以拥有超过 100,000 个键的几个地图。目前，我在每个运行时使用数据的缩写形式创建地图以节省时间，以便地图只有大约 1,000 个键。但我想用我现有的全部数据进行测试。

我想知道如何在一个类中创建一个映射，然后将该对象保存到硬盘驱动器，然后能够在不同的类中引用该对象，这样我每次测试时都不需要创建和填充映射班级。我正在使用 Eclipse 用 Ja​​va 编写类。

**编辑：**我相信它被称为对象序列化，但如果它被序列化，我是否必须在使用前阅读整个地图？或者它实际上与调用局部变量一样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:30:38.787

如果您的地图包含可序列化的对象，那么您可以使用序列化直接将地图写入磁盘。例如：字符串、整数的映射

但是，如果您的地图包含您创建的任何自定义类，则必须通过实现[Serializable 接口](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)使您的类可序列化。

您可以通过重写 writeObject(ObjectOutputStream s) 进行写入和 readObject(ObjectInputStream ois) 读取类的内容来明确决定使用序列化将类写入磁盘的方式。

这些方法，即 writeObject() 和 readObject() 将在序列化和反序列化发生时被隐式调用。在实现这些方法时要小心，因为您必须以与写入相同的顺序读取元素。

示例示例如何实现这些方法：[示例示例](http://www.javablogging.com/what-are-writeobject-and-readobject-customizing-the-serialization-process/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:18:02.737

我有类似的问题。首先我使用[HSQLDB](http://hsqldb.org/)。之后我检查了[EHCache](http://ehcache.org/)。而且它有所作为 - 工作速度更快，更容易理解。

您也可以查看[NOSQL](http://nosql-database.org/)页面的“Key Value / Tuple Store”段落。你肯定会找到适合你的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:37:40.920

前段时间我遇到了类似的问题。我使用了 Berkeley DB，它非常适合。如果您问我，这是一个不错的选择：http: [//docs.oracle.com/cd/E17277_02/html/GettingStartedGuide/index.html](http://docs.oracle.com/cd/E17277_02/html/GettingStartedGuide/index.html)

# com - COM coclass 实现来自另一个类型库的接口

> ID：15342012
> 
> 赞同：2
> 
> 时间：2013-03-11T15:08:33.070
> 
> 标签：com, idl, midl, coclass

我在 COM 中相对较新，所以如果这是一个愚蠢的问题，我很抱歉。我将一堆 COM 接口编译到类型库*A*中。此类型库是我的解决方案中的一个 DLL ( *a.dll* ) 中的资源。在进入单独 DLL ( *b.dll* )的单独类型库 ( *B* ) 中，我想定义一个实现类型库*A*接口的 coclass 。请参阅下面的 IDL 代码作为我想到的简化示例：

 **```
import "oaidl.idl";
import "ocidl.idl";

// Import IMyInterface, which is part of MyLibA.tlb
import "MyInterface.idl";

[
    uuid(E80492A8-1E8C-4ABF-B4DE-9C252C445AFE),
    version(1.0),
    helpstring("MyLibB Type Library")
]
library MyLibB
{
    importlib("stdole32.tlb");
    importlib("stdole2.tlb");
    importlib("MyLibA.tlb); 

    [
        uuid(25E3CD5E-FA06-4845-BE3E-F260985AFB20),
        helpstring("My CoClass")
    ]
    coclass MyCoClass
    {
         [default] interface IMyInterface;
    };
}; 
```

我可以编译上面的ok，但是当我在oleview中打开MIDL生成的tlb文件时，我得到一个错误信息`TYPE_E_CANTLOADLIBRARY`。我开始怀疑我想做的事情是不可能的。到目前为止，我的实验表明类型库需要包含 coclass 实现的所有接口以及 coclass 定义本身。这是真的？

如果我删除该`importlib("MyLibA.tlb);`语句，我可以在 oleview 中查看编译的 tlb 文件而不会出错，但是*MyLibB.tlb*还包含接口的定义`IMyInterface`，即接口在两个类型库中都定义了两次。我不希望这样，因为在我的应用程序中，我使用免注册 COM 加载了*a.dll*和*b.dll*。在这种情况下，当在多个类型库中遇到相同的接口定义时，激活上下文生成会失败。

有什么建议可以在单独的类型库中实现所需的接口和 coclass 分离吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:48:38.483

当 OLE/COM 查看器显示时，`TYPE_E_CANTLOADLIBRARY`这通常意味着从正在打开的 TLB 引用的另一个 TLB 未正确注册。

解决方法是根据您的系统，使用类似或替代`regtlb`工具之类的工具注册依赖项 TLB（在本例中为 MyLibA.tlb） 。`regtlib`

由于该问题是在免注册 COM 的上下文中给出的，因此您应该注意与接口实例的编组有关的可能问题。通常，必须注册 TLB 才能使用标准编组器。否则，您必须确保在清单中正确声明编组信息，如此[处所述](http://msdn.microsoft.com/en-us/library/ms973913.aspx#rfacomwalk_topic8)**

# ios - 将数据从选定行传递到视图控制器

> ID：15342018
> 
> 赞同：3
> 
> 时间：2013-03-11T15:08:53.630
> 
> 标签：ios, objective-c, uitableview, uiviewcontroller

我在弹出窗口中有一个 UITableView。当用户在弹出窗口中选择一行时，我希望它关闭弹出窗口并将单元格中的一些数据保存到父视图控制器中的变量中。最有效的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T15:13:29.750

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

在此方法中，您处理用户选择。`UITableView`要在视图控制器之间传递变量，`ViewController`请阅读 ray wenderlich 的这篇精彩教程：[http ://www.raywenderlich.com/1797/how-to-create-a-simple-iphone-app-tutorial-part-1](http://www.raywenderlich.com/1797/how-to-create-a-simple-iphone-app-tutorial-part-1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T16:55:57.973

在弹出框的表格视图控制器中创建一个委托，并将变量作为单元格数据传递给它在弹出框的表格视图控制器的 .h 中

```
@protocol PopoverTableViewControllerDelegate <NSObject>

- (void)didSelectRow:(NSString *)cellDataString;

@end

@interface PopoverTableViewController : UITableViewController

@property (strong, nonatomic) id<PopoverTableViewControllerDelegate> delegate;

@end 
```

在 .m 的 didSelectRowAtIndexPath 中调用委托并将单元格数据变量传递为

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   [self.delegate didSelectRow:cellDataString];
}

- (void)dealloc
{
   [super dealloc];
   [_delegate release];
} 
```

在 .h 的父视图控制器中实现它，将 PopoverTableViewControllerDelegate 实现为

```
@interface ParentViewController : UIViewController <PopoverTableViewControllerDelegate>

@property (strong, nonatomic) NSString *cellDataString;

@end 
```

并在 .m 中将委托实现为

```
- (void)dealloc
{
   [super dealloc];
   [_cellDataString release];
}

PopoverTableViewController *popoverTableViewController = [[[PopoverTableViewController alloc] init] autorelease];
popoverTableViewController.delegate = self;

- (void)didSelectRow:(NSString *)cellDataString
{
    self.cellDataString = cellDataString;
    [popOverController dismissPopoverAnimated:YES];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:20:17.837

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   ParentViewController *parent = [[ParentViewController alloc] initWithNibName:@"ParentViewController" bundle:nil];
 parent.variable = //do something you want

[self.navigationcontroller pushViewController:parent animated:YES];

} 
```

像这样的东西......希望这会有所帮助......

# magento - 直接删除订单状态为pending_payment的magento订单

> ID：15342024
> 
> 赞同：1
> 
> 时间：2013-03-11T15:09:24.313
> 
> 标签：magento, orders

在这里，我需要使用 cron 作业删除待处理的付款状态订单。但我无法使用以下代码获得 pending_payment 订单。我认为这在我的代码中不起作用

```
$orderCollection = Mage::getResourceModel('sales/order_collection');
            $orderCollection
                    ->addFieldToFilter('state', 'pending')

                    ->getSelect()
                    ->order('e.entity_id'); 
```

这是我的完整代码

```
<?php
$mageFilename = 'app/Mage.php';

require_once $mageFilename;

Varien_Profiler::enable();

Mage::setIsDeveloperMode(true);

ini_set('display_errors', 1);

umask(0);
Mage::app('default');
Mage::register('isSecureArea', 1);
//until here you gained access to the Magento models. The rest is custom code
$orderCollection = Mage::getResourceModel('sales/order_collection');
            $orderCollection
                    ->addFieldToFilter('state', 'pending')

                    ->getSelect()
                    ->order('e.entity_id');

        echo count($orderCollection);die;
        foreach($orderCollection->getItems() as $order)
        {

                $orders_object = Mage::getModel('sales/order')->getCollection()->addAttributeToFilter('increment_id', $order['entity_id']);
                $orders_arr = $orders_object->getData();
                if(!empty($orders_arr))
                {
                            $orders_data = $orders_arr[0];
                            $orderId = $orders_data['entity_id'];//put here the id of the order you want to delete. THE ONE FROM THE DATABASE NOT THE INCREMENT_ID

                            $order = Mage::getModel('sales/order')->load($orderId);
                            $invoices = $order->getInvoiceCollection();

                              foreach ($invoices as $invoice)
                               {
                                $invoice->delete();
                               }

                         $creditnotes = $order->getCreditmemosCollection();

                                foreach ($creditnotes as $creditnote){
                                $creditnote->delete();
                                }

                         $shipments = $order->getShipmentsCollection();

                                foreach ($shipments as $shipment)
                                {
                                $shipment->delete();
                                }

                         $order->delete();

                        $db = Mage::getSingleton('core/resource')->getConnection('core_write');    
                        $sales_flat_order_grid= Mage::getSingleton('core/resource')->getTableName('sales_flat_order_grid');
                        $order_increment_id = $order->getIncrementId();

                                if($order_increment_id)
                                { 
                                $db->query("DELETE FROM ".$sales_flat_order_grid." WHERE increment_id='".mysql_escape_string($order_increment_id)."'");        
                                }

                  echo "deleted";
                }
                else
                {
                   echo "no record";
                }
        }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:17:50.993

使用下面的代码获取处于待处理状态的订单

```
 $order_collection = Mage::getModel('sales/order')->getCollection()->addAttributeToFilter('status','pending');
       foreach($order_collection as $order){
         echo '<br/>Increment ID : '.$order->getIncrementId();
         echo '<br/>STATUS : '.$order->getStatus();
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:29:59.953

终于我明白了。

```
 <?php
ini_set('display_errors', 1); 
error_reporting(E_ALL);
$mageFilename = 'app/Mage.php';
require_once $mageFilename;
Mage::setIsDeveloperMode(true);

Varien_Profiler::enable();
umask(0);
Mage::app('default');
Mage::register('isSecureArea', 1);

//until here you gained access to the Magento models. The rest is custom code

$orderCollection = Mage::getModel('sales/order')->getCollection()->addAttributeToFilter('status','pending_payment');
 $orderIds = array();
 $IncrementIds = array();

foreach($orderCollection as $order) {

    $orderIds[] =    $order->getEntityId();  
    $IncrementIds[] =    $order->getIncrementId();  
}

        $flag = false;
        $write = Mage::getSingleton('core/resource')->getConnection('core_write');  
        $query="show tables";
        $rsc_table=$write->fetchCol($query);    

        $table_sales_flat_order = Mage::getSingleton('core/resource')->getTableName('sales_flat_order');                        
        $table_sales_flat_creditmemo_comment= Mage::getSingleton('core/resource')->getTableName('sales_flat_creditmemo_comment');
        $table_sales_flat_creditmemo_item= Mage::getSingleton('core/resource')->getTableName('sales_flat_creditmemo_item');
        $table_sales_flat_creditmemo= Mage::getSingleton('core/resource')->getTableName('sales_flat_creditmemo');
        $table_sales_flat_creditmemo_grid= Mage::getSingleton('core/resource')->getTableName('sales_flat_creditmemo_grid');
        $table_sales_flat_invoice_comment= Mage::getSingleton('core/resource')->getTableName('sales_flat_invoice_comment');
        $table_sales_flat_invoice_item= Mage::getSingleton('core/resource')->getTableName('sales_flat_invoice_item');
        $table_sales_flat_invoice= Mage::getSingleton('core/resource')->getTableName('sales_flat_invoice');
        $table_sales_flat_invoice_grid= Mage::getSingleton('core/resource')->getTableName('sales_flat_invoice_grid');
        $table_sales_flat_quote_address_item= Mage::getSingleton('core/resource')->getTableName('sales_flat_quote_address_item');
        $table_sales_flat_quote_item_option= Mage::getSingleton('core/resource')->getTableName('sales_flat_quote_item_option');
        $table_sales_flat_quote= Mage::getSingleton('core/resource')->getTableName('sales_flat_quote');
        $table_sales_flat_quote_address= Mage::getSingleton('core/resource')->getTableName('sales_flat_quote_address');
        $table_sales_flat_quote_item= Mage::getSingleton('core/resource')->getTableName('sales_flat_quote_item');
        $table_sales_flat_quote_payment= Mage::getSingleton('core/resource')->getTableName('sales_flat_quote_payment');
        $table_sales_flat_shipment_comment= Mage::getSingleton('core/resource')->getTableName('sales_flat_shipment_comment');
        $table_sales_flat_shipment_item= Mage::getSingleton('core/resource')->getTableName('sales_flat_shipment_item');
        $table_sales_flat_shipment_track= Mage::getSingleton('core/resource')->getTableName('sales_flat_shipment_track');
        $table_sales_flat_shipment= Mage::getSingleton('core/resource')->getTableName('sales_flat_shipment');
        $table_sales_flat_shipment_grid= Mage::getSingleton('core/resource')->getTableName('sales_flat_shipment_grid');     
        $table_sales_flat_order_address= Mage::getSingleton('core/resource')->getTableName('sales_flat_order_address');
        $table_sales_flat_order_item= Mage::getSingleton('core/resource')->getTableName('sales_flat_order_item');
        $table_sales_flat_order_payment= Mage::getSingleton('core/resource')->getTableName('sales_flat_order_payment');
        $table_sales_flat_order_status_history= Mage::getSingleton('core/resource')->getTableName('sales_flat_order_status_history');                   
        $table_sales_flat_order_grid= Mage::getSingleton('core/resource')->getTableName('sales_flat_order_grid');                       
        $table_log_quote= Mage::getSingleton('core/resource')->getTableName('log_quote');               
        $quoteId='';    

        if (!empty($orderIds)) {
            $i=0;
            foreach ($orderIds as $orderId) {

                    $query=null;

                    if($orderId){

                        ///@jbn group order checking whether it is canceled or not//////
                        $mk_order = Mage::getModel('sales/order')->loadByIncrementId($IncrementIds[$i]);
                        $mk_items = $mk_order->getAllVisibleItems();

                        foreach ($mk_items as $mk_itemId => $mk_item)
                        {   //echo $mk_item->getSku();
                            //echo $mk_item->getStatus();
                            if($mk_item->getStatus()=="Ordered")
                            {
                                $mk_product_sku = $mk_item->getSku();
                                $mk_product_ordered_qty = $mk_item->getQtyToInvoice();
                                $mk_product = Mage::getModel('catalog/product')->loadByAttribute('sku',$mk_product_sku);
                                 if ($mk_product) 
                                 {
                                    $mk_stockItem =Mage::getModel('cataloginventory/stock_item')->loadByProduct($mk_product->getId());                              

                                    $mk_stockItem->setData('qty', $mk_stockItem->getQty() + $mk_product_ordered_qty);
                                    $mk_stockItem->setData('is_in_stock',1);
                                    $mk_stockItem->save();

                                 }

                            }
                        }

                        /////end order checking////////////////////////////////

                        /*$query="show tables like 'sales_flat_order'";
                        $rs=$write->fetchAll($query);*/

                        $incId=$IncrementIds[$i];
                        if(in_array($table_sales_flat_order,$rsc_table)){
                            $query='SELECT entity_id   FROM  '.$table_sales_flat_order.'    WHERE increment_id="'.mysql_escape_string($incId).'"';

                            $rs=$write->fetchAll($query);                                               

                            $query='SELECT quote_id    FROM   '.$table_sales_flat_order.'        WHERE entity_id="'.mysql_escape_string($orderId).'"';
                            $rs1=$write->fetchAll($query);
                            $quoteId=$rs1[0]['quote_id'];
                        }

                        $query='SET FOREIGN_KEY_CHECKS=1';
                        $rs3=$write->query($query);
                        //print_r($rsc_table);
                        ////echo $table_sales_flat_creditmemo_comment;
                        if(in_array($table_sales_flat_creditmemo_comment,$rsc_table)){
                        //echo "<br />DELETE FROM ".$table_sales_flat_creditmemo_comment."    WHERE parent_id IN (SELECT entity_id FROM ".$table_sales_flat_creditmemo." WHERE order_id=".$orderId.")";
                        //die;
                        $write->query("DELETE FROM ".$table_sales_flat_creditmemo_comment."    WHERE parent_id IN (SELECT entity_id FROM ".$table_sales_flat_creditmemo." WHERE order_id='".mysql_escape_string($orderId)."')");
                        }
                        //die;

                        if(in_array('sales_flat_creditmemo_item',$rsc_table)){
                            //echo "<br />DELETE FROM ".$table_sales_flat_creditmemo_item."       WHERE parent_id IN (SELECT entity_id FROM ".$table_sales_flat_creditmemo." WHERE order_id='".mysql_escape_string($orderId)."')";
                        $write->query("DELETE FROM ".$table_sales_flat_creditmemo_item."       WHERE parent_id IN (SELECT entity_id FROM ".$table_sales_flat_creditmemo." WHERE order_id='".mysql_escape_string($orderId)."')");
                        }

                        if(in_array($table_sales_flat_creditmemo,$rsc_table)){
                            //echo "<br />DELETE FROM ".$table_sales_flat_creditmemo."            WHERE order_id='".mysql_escape_string($orderId)."'";
                        $write->query("DELETE FROM ".$table_sales_flat_creditmemo."            WHERE order_id='".mysql_escape_string($orderId)."'");
                        }

                        if(in_array($table_sales_flat_creditmemo_grid,$rsc_table)){
                            //echo "<br />DELETE FROM ".$table_sales_flat_creditmemo_grid."        WHERE order_id='".mysql_escape_string($orderId)."'";
                        $write->query("DELETE FROM ".$table_sales_flat_creditmemo_grid."        WHERE order_id='".mysql_escape_string($orderId)."'");
                        }

                        if(in_array($table_sales_flat_invoice_comment,$rsc_table)){
                            //echo "<br />DELETE FROM ".$table_sales_flat_invoice_comment." WHERE parent_id IN (SELECT entity_id FROM ".$table_sales_flat_invoice." WHERE order_id='".mysql_escape_string($orderId)."')";

                        $write->query("DELETE FROM ".$table_sales_flat_invoice_comment." WHERE parent_id IN (SELECT entity_id FROM ".$table_sales_flat_invoice." WHERE order_id='".mysql_escape_string($orderId)."')");
                        }

                        if(in_array($table_sales_flat_invoice_item,$rsc_table)){
                        //echo "<br />DELETE FROM ".$table_sales_flat_invoice_item."     WHERE parent_id IN (SELECT entity_id FROM ".$table_sales_flat_invoice." WHERE order_id='".mysql_escape_string($orderId)."')";
                        $write->query("DELETE FROM ".$table_sales_flat_invoice_item."     WHERE parent_id IN (SELECT entity_id FROM ".$table_sales_flat_invoice." WHERE order_id='".mysql_escape_string($orderId)."')");
                        }

                        if(in_array($table_sales_flat_invoice,$rsc_table)){
                        //echo "<br />DELETE FROM ".$table_sales_flat_invoice."         WHERE order_id='".mysql_escape_string($orderId)."'";
                        $write->query("DELETE FROM ".$table_sales_flat_invoice."         WHERE order_id='".mysql_escape_string($orderId)."'");
                        }

                        if(in_array($table_sales_flat_invoice_grid,$rsc_table)){
                        //echo "<br />DELETE FROM ".$table_sales_flat_invoice_grid."     WHERE order_id='".mysql_escape_string($orderId)."'";
                        $write->query("DELETE FROM ".$table_sales_flat_invoice_grid."     WHERE order_id='".mysql_escape_string($orderId)."'");
                        }   

                        if($quoteId){                       
                            if(in_array($table_sales_flat_quote_address_item,$rsc_table)){
                                //echo "<br />DELETE FROM ".$table_sales_flat_quote_address_item."     WHERE parent_item_id  IN (SELECT address_id FROM ".$table_sales_flat_quote_address." WHERE quote_id=".$quoteId.")";                          
                            $write->query("DELETE FROM ".$table_sales_flat_quote_address_item."     WHERE parent_item_id  IN (SELECT address_id FROM ".$table_sales_flat_quote_address." WHERE quote_id=".$quoteId.")");
                            }

                            $table_sales_flat_quote_shipping_rate= Mage::getSingleton('core/resource')->getTableName('sales_flat_quote_shipping_rate');
                            if(in_array($table_sales_flat_quote_shipping_rate,$rsc_table)){
                                //echo "<br />DELETE FROM ".$table_sales_flat_quote_shipping_rate."    WHERE address_id IN (SELECT address_id FROM ".$table_sales_flat_quote_address." WHERE quote_id=".$quoteId.")";
                            $write->query("DELETE FROM ".$table_sales_flat_quote_shipping_rate."    WHERE address_id IN (SELECT address_id FROM ".$table_sales_flat_quote_address." WHERE quote_id=".$quoteId.")");
                            }

                            if(in_array($table_sales_flat_quote_item_option,$rsc_table)){
                                //echo "<br />DELETE FROM ".$table_sales_flat_quote_item_option."     WHERE item_id IN (SELECT item_id FROM ".$table_sales_flat_quote_item." WHERE quote_id=".$quoteId.")";
                            $write->query("DELETE FROM ".$table_sales_flat_quote_item_option."     WHERE item_id IN (SELECT item_id FROM ".$table_sales_flat_quote_item." WHERE quote_id=".$quoteId.")");
                            }

                            if(in_array($table_sales_flat_quote,$rsc_table)){
                                //echo "<br />DELETE FROM ".$table_sales_flat_quote."                 WHERE entity_id=".$quoteId;
                            $write->query("DELETE FROM ".$table_sales_flat_quote."                 WHERE entity_id=".$quoteId);
                            }

                            if(in_array($table_sales_flat_quote_address,$rsc_table)){
                                //echo "<br />DELETE FROM ".$table_sales_flat_quote_address."         WHERE quote_id=".$quoteId;
                            $write->query("DELETE FROM ".$table_sales_flat_quote_address."         WHERE quote_id=".$quoteId);
                            }

                            if(in_array($table_sales_flat_quote_item,$rsc_table)){
                                //echo "<br />DELETE FROM ".$table_sales_flat_quote_item."             WHERE quote_id=".$quoteId;
                            $write->query("DELETE FROM ".$table_sales_flat_quote_item."             WHERE quote_id=".$quoteId);
                            }

                            if(in_array('sales_flat_quote_payment',$rsc_table)){
                                //echo "<br />DELETE FROM ".$table_sales_flat_quote_payment."         WHERE quote_id=".$quoteId;
                            $write->query("DELETE FROM ".$table_sales_flat_quote_payment."         WHERE quote_id=".$quoteId);
                            }

                        }

                        if(in_array($table_sales_flat_shipment_comment,$rsc_table)){
                            //echo "<br />DELETE FROM ".$table_sales_flat_shipment_comment."    WHERE parent_id IN (SELECT entity_id FROM ".$table_sales_flat_shipment." WHERE order_id='".mysql_escape_string($orderId)."')";
                        $write->query("DELETE FROM ".$table_sales_flat_shipment_comment."    WHERE parent_id IN (SELECT entity_id FROM ".$table_sales_flat_shipment." WHERE order_id='".mysql_escape_string($orderId)."')");
                        }

                        if(in_array($table_sales_flat_shipment_item,$rsc_table)){
                            //echo "<br />DELETE FROM ".$table_sales_flat_shipment_item."         WHERE parent_id IN (SELECT entity_id FROM ".$table_sales_flat_shipment." WHERE order_id='".mysql_escape_string($orderId)."')";
                        $write->query("DELETE FROM ".$table_sales_flat_shipment_item."         WHERE parent_id IN (SELECT entity_id FROM ".$table_sales_flat_shipment." WHERE order_id='".mysql_escape_string($orderId)."')");
                        }

                        if(in_array($table_sales_flat_shipment_track,$rsc_table)){  
                        //echo "<br />DELETE FROM ".$table_sales_flat_shipment_track."         WHERE order_id  IN (SELECT entity_id FROM ".$table_sales_flat_shipment." WHERE order_id='".mysql_escape_string($orderId)."')";                   
                        $write->query("DELETE FROM ".$table_sales_flat_shipment_track."         WHERE order_id  IN (SELECT entity_id FROM ".$table_sales_flat_shipment." WHERE order_id='".mysql_escape_string($orderId)."')");
                        }

                        if(in_array($table_sales_flat_shipment,$rsc_table)){
                            //echo "<br />DELETE FROM ".$table_sales_flat_shipment."             WHERE order_id='".mysql_escape_string($orderId)."'";

                        $write->query("DELETE FROM ".$table_sales_flat_shipment."             WHERE order_id='".mysql_escape_string($orderId)."'");
                        }

                        if(in_array($table_sales_flat_shipment_grid,$rsc_table)){
                            //echo "<br />DELETE FROM ".$table_sales_flat_shipment_grid."         WHERE order_id='".mysql_escape_string($orderId)."'";
                        $write->query("DELETE FROM ".$table_sales_flat_shipment_grid."         WHERE order_id='".mysql_escape_string($orderId)."'");
                        }

                        if(in_array($table_sales_flat_order,$rsc_table)){
                            //echo "<br />DELETE FROM ".$table_sales_flat_order."                     WHERE entity_id='".mysql_escape_string($orderId)."'";
                        $write->query("DELETE FROM ".$table_sales_flat_order."                     WHERE entity_id='".mysql_escape_string($orderId)."'");
                        }

                        if(in_array($table_sales_flat_order_address,$rsc_table)){
                            //echo "<br />DELETE FROM ".$table_sales_flat_order_address."            WHERE parent_id='".mysql_escape_string($orderId)."'";
                        $write->query("DELETE FROM ".$table_sales_flat_order_address."            WHERE parent_id='".mysql_escape_string($orderId)."'");
                        }

                        if(in_array($table_sales_flat_order_item,$rsc_table)){
                            //echo "<br />DELETE FROM ".$table_sales_flat_order_item."                 WHERE order_id='".mysql_escape_string($orderId)."'";                     
                        $write->query("DELETE FROM ".$table_sales_flat_order_item."                 WHERE order_id='".mysql_escape_string($orderId)."'");
                        }
                        if(in_array($table_sales_flat_order_payment,$rsc_table)){
                            //echo "<br />DELETE FROM ".$table_sales_flat_order_payment."             WHERE parent_id='".mysql_escape_string($orderId)."'";
                        $write->query("DELETE FROM ".$table_sales_flat_order_payment."             WHERE parent_id='".mysql_escape_string($orderId)."'");
                        }
                        if(in_array($table_sales_flat_order_status_history,$rsc_table)){
                            //echo "<br />DELETE FROM ".$table_sales_flat_order_status_history."     WHERE parent_id='".mysql_escape_string($orderId)."'";
                        $write->query("DELETE FROM ".$table_sales_flat_order_status_history."     WHERE parent_id='".mysql_escape_string($orderId)."'");
                        }
                        if($incId&&in_array($table_sales_flat_order_grid,$rsc_table)){  
                        //echo "<br />DELETE FROM ".$table_sales_flat_order_grid."                 WHERE increment_id='".mysql_escape_string($incId)."'";                   
                            $write->query("DELETE FROM ".$table_sales_flat_order_grid."                 WHERE increment_id='".mysql_escape_string($incId)."'");

                        }

                        $query="show tables like '%".$table_log_quote."'";
                        //echo $query;
                        $rsc_table_l=$write->fetchCol($query);  
                        if($quoteId&&$rsc_table_l){ 
                        //echo "<br />DELETE FROM ".$table_log_quote." WHERE quote_id=".$quoteId;                   
                                $write->query("DELETE FROM ".$table_log_quote." WHERE quote_id=".$quoteId);                         
                        }
                        $write->query("SET FOREIGN_KEY_CHECKS=1");                      
                    }                   
            $i++;}

        }
 ///////////end

?> 
```

# .net - 在 Server 2012 上构建 .NET 4.0 网站时出现 CS0246 和 CS0433 错误

> ID：15342028
> 
> 赞同：2
> 
> 时间：2013-03-11T15:09:29.777
> 
> 标签：.net, teamcity-7.0, psake

我正在安装 .Net 4.5 的 Server 2012 上构建一个 .Net 4.0 Web 项目。我在 TeamCity 下使用 Psake，并且收到 CS0246 说找不到 NotMapped，而 CS0433 说它找到了两个用于 DataAnnotations 的 DLL。

该类如下所示：

```
using System.ComponentModel.DataAnnotations.Schema;
public abstract class Order
{
   [NotMapped]
   public decimal TaxPercentage { get; set; }
} 
```

完整的错误是：

```
Ordering\Order.cs(105,8): error CS0246: The type or namespace name 'NotMapped' could not be found (are you missing a using directive or an assembly reference?) [C:\TeamCity\buildAgent\work\71c853cb9b4c108\Code\Models\Model.csproj]
Ordering\Order.cs(105,8): error CS0433: The type 'System.ComponentModel.DataAnnotations.Schema.NotMappedAttribute' exists in both 'c:\TeamCity\buildAgent\work\71c853cb9b4c108\Code\packages\EntityFramework.5.0.0\lib\net40\EntityFramework.dll' and 'c:\Windows\Microsoft.NET\assembly\GAC_MSIL\System.ComponentModel.DataAnnotations\v4.0_4.0.0.0__31bf3856ad364e35\System.ComponentModel.DataAnnotations.dll' [C:\TeamCity\buildAgent\work\71c853cb9b4c108\Code\Models\Model.csproj] 
```

该构建仅使用 Psake 而不是 TeamCity 在 Windows 8 下运行良好。任何想法如何解决这个问题？

更新：我做了一个较小的测试[项目](https://bitbucket.org/seankearon/ef-build-test)，并且在 2012 年构建良好。看起来我的主项目有些奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:58:13.577

结果是`System.ComponentModel.DataAnnotations`在 EF 4.4 中提供的，而它们在 EF 5.0 的单独程序集中。我的项目中混合了 EF 引用，现在我已经重建了这些引用 - 全部使用 EF 5，它解决了问题。

# ruby-on-rails - 无法弄清楚是什么导致我的测试失败

> ID：15342031
> 
> 赞同：2
> 
> 时间：2013-03-11T15:09:32.943
> 
> 标签：ruby-on-rails, tdd, paperclip

我是 Rails 新手，我在没有做 TDD 的情况下构建了一个应用程序，但现在我要回去尝试通过所有测试。我已经通过了其中的大部分，但还有一些与我无法弄清楚的相同问题有关。该应用程序也可以正常运行，我只是无法通过这些测试。

测试失败并提供：

```
1) ProductsController POST create with valid params assigns a newly created product as @product
 Failure/Error: post :create, {:product => valid_attributes}, valid_session
 Paperclip::AdapterRegistry::NoHandlerError:
   No handler found for "#<File:0x007fc6d17b28f8>"
 # ./app/controllers/products_controller.rb:43:in `new'
 # ./app/controllers/products_controller.rb:43:in `create'
 # ./spec/controllers/products_controller_spec.rb:86:in `block (4 levels) in <top (required)>'

2) ProductsController POST create with valid params creates a new Product
 Failure/Error: post :create, {:product => valid_attributes}, valid_session
 Paperclip::AdapterRegistry::NoHandlerError:
   No handler found for "#<File:0x007fc6d1757cf0>"
 # ./app/controllers/products_controller.rb:43:in `new'
 # ./app/controllers/products_controller.rb:43:in `create'
 # ./spec/controllers/products_controller_spec.rb:81:in `block (5 levels) in <top (required)>'
 # ./spec/controllers/products_controller_spec.rb:80:in `block (4 levels) in <top (required)>'

3) ProductsController POST create with valid params redirects to the created product
 Failure/Error: post :create, {:product => valid_attributes}, valid_session
 Paperclip::AdapterRegistry::NoHandlerError:
   No handler found for "#<File:0x007fc6d36b3dd8>"
 # ./app/controllers/products_controller.rb:43:in `new'
 # ./app/controllers/products_controller.rb:43:in `create'
 # ./spec/controllers/products_controller_spec.rb:92:in `block (4 levels) in <top (required)>' 
```

我的控制器中的“创建”方法：

```
def create
  @product = Product.new(params[:product])

  respond_to do |format|
    if @product.save
      format.html { redirect_to admin_path, notice: 'Product was successfully created.' }
      format.json { render json: @product, status: :created, location: @product }
    else
      format.html { render action: "new" }
      format.json { render json: @product.errors, status: :unprocessable_entity }
    end
  end
end 
```

我的模型：

```
class Product < ActiveRecord::Base
  attr_accessible :designed, :features, :photo, :manufactured, :name, :case_study

  has_attached_file :photo, { 
    :styles => {
      :thumb => "x50>", 
      :small => "x150>", 
      :detail => "x600>"
    }
  }.merge(PAPERCLIP_STORAGE_OPTIONS)

  validates_attachment_presence :photo
  validates_attachment_size :photo, :less_than => 5.megabytes
  validates_attachment_content_type :photo, :content_type => ['image/jpeg', 'image/png']
end 
```

我的测试：

```
before(:each) do
  @image = File.new(Rails.root + 'spec/fixtures/images/test.png')
end 

def valid_attributes
  { "photo" => @image }
end

describe "POST create" do
describe "with valid params" do
  it "creates a new Product" do
    expect {
      post :create, {:product => valid_attributes}, valid_session
    }.to change(Product, :count).by(1)
  end

  it "assigns a newly created product as @product" do
    post :create, {:product => valid_attributes}, valid_session
    assigns(:product).should be_a(Product)
    assigns(:product).should be_persisted
  end

  it "redirects to the created product" do
    post :create, {:product => valid_attributes}, valid_session
    response.should redirect_to(admin_path)
  end
end
end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T15:41:08.000

如果您使用的是 Rails 3.2，请尝试在测试中发送`UploadedFile`而不是。在其初始化程序中接受一个文件名和一个内容类型。`File``UploadedFile`

```
before(:each) do
  @image = Rack::Test::UploadedFile.new(Rails.root.join('spec/fixtures/images/test.png'), 'image/png')
end 
```

您可能必须包含`Rack::Test::Methods`在您的测试或测试助手中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T13:00:53.413

您还可以使用[fixture_file_upload](http://apidock.com/rails/ActionDispatch/TestProcess/fixture_file_upload)作为这样的快捷方式`Rack::Test::UploadedFile.new`：

```
post :create, product: { photo: fixture_file_upload('spec/fixtures/images/test.png', 'image/png') } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:22:09.613

您是否已将回形针附件添加到您的数据库中——例如创建并运行迁移？包括测试数据库？

# python - Networkx，DIAC图，来自具有深度限制的节点的子图

> ID：15342033
> 
> 赞同：0
> 
> 时间：2013-03-11T15:09:41.580
> 
> 标签：python, networkx, depth, directed-acyclic-graphs, subgraph

我有一个用 networkx 构建的有向图，它有 37379 个节点和 61263 个边。我想提取一个节点目标，一个仅包含目标节点和链接到它的第一个节点的子图。

[我在这里](https://stackoverflow.com/questions/13914920/networkx-extract-the-smallest-connected-subgraph)尝试了答案，它只为我绘制了目标节点。我错过了什么吗？我检查了我的图中是否有边（我只是输出为 json 并看到“源和目标”项目）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:28:51.443

请删除问题，这是一个键类型错误，因为我的键是整数并试图用字符串键创建子图...

# php - MySQL全文匹配除了完全匹配之外的所有内容？

> ID：15342034
> 
> 赞同：0
> 
> 时间：2013-03-11T15:09:44.917
> 
> 标签：php, mysql, full-text-search, match

我面临一个奇怪的情况，我的全文搜索查询似乎匹配除了完全匹配之外的所有内容......

我的意思是如果输入是：

> 帝国全面战争

它将匹配为：

> 帝国全面战争限量版
> ...尽管数据库中有一条记录准确地说：**帝国全面战争**

这是我的查询：

```
 $query_GID = "SELECT game, gameID, 
    MATCH (game) AGAINST ('$game_title') AS score 
FROM gkn_catalog_match WHERE MATCH (game) AGAINST
  ('$game_title');";
$result_GID = $dbc->query($query_GID);
$row_GID = mysqli_fetch_array($result_GID,MYSQLI_ASSOC); 
```

出于调试目的，我继续编写此代码以在返回的数组中输出所有匹配的替代项，但是完全匹配不在其中...

```
$GID = $row_GID['gameID'];
$GName = $row_GID['game'];
$Gscore = $row_GID['score'];
$max_score = 0;
$data = array();
while($row_GID = mysqli_fetch_assoc($result_GID)) {
if($row_GID['score'] > $max_score){ $max_score = $row_GID['score']; } //because we are ordering by score we can assume on the first run this wil be the max score.
echo "<br><b>Alternatives: " .$row_GID['game']."".@number_format(($row_GID['score']/$max_score)*100,0)."%</b>\n";

} 
```

我的问题是：为什么即使输入字符串和数据库中的记录相同，我也没有得到所需/精确匹配？
即使我输出了数组，似乎甚至没有从数据库中提取完全匹配，因为它在数组中无处可寻。

编辑：

数据库中的示例情况记录：

> 孤岛危机 孤岛
> 危机 2
> 孤岛危机 2 最大版
> 孤岛危机 3
> 孤岛危机 3 猎人版
> 
> 搜索字符串（输入）：Crysis 3
> 查询返回的匹配项：Crysis 3 Hunter Edition

孤岛危机 3 没有匹配，而是匹配了另一条记录，如孤岛危机 3 猎人版，这是……意外，因为我希望它匹配孤岛危机 3。

当我输出此查询的 $row 数组时，我可以看到 Crysis 3 不包括在内：
Alternatives: Crysis 3 Hunter Edition 100%
Alternatives: Crysis 2 Maximum Edition 82%
Alternatives: Crysis 70%
Alternatives: Far Cry 3 Deluxe Edition 32%
替代品：孤岛惊魂 2 财富版 32%
替代品：模拟城市 4 豪华版 31%
替代品：模拟城市限量版 31%
替代品：战地 3 高级版 31%
替代品：战地 3 限量版 31%
替代品：文明 5 黄金版 31%

编辑2：

手动输入查询会返回所需的结果。
所以查询似乎有效，但是我似乎丢失了返回数组的第一个条目......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:43:15.723

我通过移动循环的数组分配解决`outside`了我的问题。现在全文查询匹配数据库中存在的游戏标题高达 99.9%。`while`

如果没有，那就有点疯狂了。

# c++ - 从 mfc 对话框应用程序读取和写入 xml 文档

> ID：15342035
> 
> 赞同：0
> 
> 时间：2013-03-11T15:09:46.420
> 
> 标签：c++, xml, mfc, msxml

如何在基于 mfc 对话框的应用程序中读取和写入 xml 文件。我正在使用 Visual Studio 2012。当我搜索一些文章时，我知道要导入 msxml6.dll 文件。但它在我的 IDE Visual Studio 2012 中显示错误。所以请帮帮我，我是这项技术的新手。谢谢你.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:51:44.587

你可以使用任何你想要的 xml 解析器：msxml、Xerces、tinyxml，或者你可以通过谷歌搜索找到的任何 100 个其他的。

要了解如何使用 msxml，请搜索此站点或 google，您会找到以下帖子：[MSXML with Visual c++](https://stackoverflow.com/questions/3417345/msxml-with-visual-c)。

# layout - Sencha Touch：如何实现左侧菜单，布局右侧

> ID：15342037
> 
> 赞同：1
> 
> 时间：2013-03-11T15:09:56.357
> 
> 标签：layout, button, view, menu, sencha-touch

我是使用 Sencha Touch 2 的新手，我已经开始开发平板电脑应用程序。我`Sencha Architect`用于设计和编写代码，我的应用程序有`card layout`“左侧”和“右侧”。在左侧，我有一个带有一些按钮的主菜单。这个菜单一直在左边。在右侧，我想根据单击的菜单按钮和用户想要去的位置更改视图（每次单击按钮后都会有超过 3 个级别的导航）。我现在的问题是“如何改变观点？”。到现在为止，我有一个`Navigation.View`在右边，我有使用`this.getPanelFrame().push(view);`方法。将某些内容加载到 navegation.view 时，工具栏出现问题，并且我知道如何创建视图和推送，但之后我不知道如何再次加载此视图。

我[也链接了一个图像](http://www.sencha.com/forum/attachment.php?attachmentid=42297&stc=1&d=1363013757)，您可以在其中查看我的组件的结构。我的主要疑问是：我是否必须使用 navigation.view 作为“框架”才能在其他视图中加载？如何改变负载别人？有什么选择吗？

太感谢了”

**控制器**

```
Ext.define('MyApp.controller.Main', {
    extend: 'Ext.app.Controller',

    config: {
        refs: {
            panelFrame: '#PanelFrame'
        },

        control: {
            "button#btnclientes": {
                tap: 'onBtnclientesTap'
            },
            "#btnpedidos": {
                tap: 'onBtnpedidosTap'
            }
        }
    },

    onBtnclientesTap: function(button, e, options) {
        var view = Ext.create("MyApp.view.ClientesListView");

        this.getPanelFrame().push(view);
    },

    onBtnpedidosTap: function(button, e, options) {
        var view = Ext.create("MyApp.view.ClientesNewView");

        this.getPanelFrame().push(view);

    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:25:23.110

为什么不在右侧创建一个容器。然后在项目中：使用 xtype 调用每个视图

```
{
     xtype: 'container',

    items: [

 {
             xtype: 'view1',
             id: 'Cview1',
              hidden:true,
     },
                {
                    xtype: 'view2',
                    id: 'Cview2',
                   hidden:true,
                },
                {
                    xtype: 'view3',
                    id: 'Cview3',
                    height:'auto',
                     hidden:true,

                }] 
```

然后在按钮的处理程序中，您只需隐藏其他视图并显示您选择的视图，例如：

```
 {
                                    xtype: 'button',

                                   handler:function(){

                                        Ext.getCmp('Cview1').hide();
                                        Ext.getCmp('Cview2').hide();
                                        Ext.getCmp('Cview3').show();
}
} 
```

# javascript - 在同一域的窗口之间发送消息，没有可用的句柄

> ID：15342038
> 
> 赞同：1
> 
> 时间：2013-03-11T15:10:00.533
> 
> 标签：javascript, html

有没有办法在彼此独立创建的窗口之间发送消息？也就是说，用户以某种方式打开了窗口 A，然后以某种方式打开了窗口 B，现在我想从 A -> B 发送一条消息。该`postMessage`界面仅在我有另一个窗口的句柄时才有效，而我没有。两个窗口都在同一个域上，我会知道另一个窗口的确切 URL。

*请注意，我不是在寻找涉及一个窗​​口轮询值的解决方案。我已经可以使用 localStorage 做到这一点，并且正在寻找替代方案。*

# javascript - 在视图中使用 javascript 为列表中的每个项目启用单选按钮状态的文本框

> ID：15342041
> 
> 赞同：1
> 
> 时间：2013-03-11T15:10:10.033
> 
> 标签：javascript, jquery, asp.net-mvc

我有这个视图，其中有 2 个单选按钮强类型化到模型中，我希望根据这些单选按钮的状态启用/禁用文本框字段。

这是我现在正在处理的视图和脚本：

```
@model IList<MyApp.Models.ObjInfo>
@{
    ViewBag.Title = "SendItems";
}

<h2>Ebay Items</h2>

    <script src="/Scripts/jquery-1.7.1.min.js"
        type="text/javascript"></script>
    <script type="text/javascript">
    function dostate1() {
        $("#textfield1").attr("disabled", "disabled");
        $("#textfield2").removeAttr("disabled");
        $("#textfield3").removeAttr("disabled");
    }
    function dostate2() {
        $("#textfield1").removeAttr("disabled");
        $("#textfield2").attr("disabled", "disabled");
        $("#textfield3").attr("disabled", "disabled");
    }

    $(document).ready(function ()
    {
        alert("The document is ready");
        if ($("#state1").is(":checked")) {
            dostate1();
        } else {
            dostate2();
        }

        $("#state1").click(function (){
            alert("Auction radio button has been clicked");
            dostate1();
        });
        $("#state2").click(function () {
            alert("Buy It Now radio button has been clicked");
            dostate2();
        });
    });
    </script>
<p>
    @using (Html.BeginForm("ManageItems", "Item Inventory"))
    {
       (...)
            @for (int i = 0; i < Model.Count; i++)
            {
                <p>
                    <tr>
                        <td>@Html.DisplayFor(x => x[i].m_OtrObj.m_ObjName)</td>
                        <td>@Html.RadioButtonFor(x => x[i].m_State, "State 1", new {id = "state1", style ="width: 50px"})</td>
                        <td>@Html.RadioButtonFor(x => x[i].m_State, "State 2", new {id = "state2", style ="width: 50px"})</td>
                        <td>
                            @Html.TextBoxFor(x => x[i].m_Field1, new{id = "textField1", style = "width:200px"})
                        </td>
                        <td>
                            @Html.TextBoxFor(x => x[i].m_Field2, new {id = "textField2", style = "width:200px"})
                        </td>
                        <td>
                            @Html.TextBoxFor(x => x[i].m_Field3, new {id ="textField3", style = "width:200px" })
                        </td>
                    </tr>
                </p>
            }
        </table>
        <input type="submit" value="Do Something"/>
    }
</p> 
```

现在我有两个主要问题：

1.  单击每个单选按钮实际上会禁用我希望禁用的字段，但不要激活其他字段；
2.  该脚本实际上仅在单击按钮时运行，但应在开始时运行以避免字段 1 处于活动状态，因为默认情况下启用“状态 1”单选按钮。

我**真的**是 javascript 的新手，所以任何人都可以帮助我吗？谢谢！！

****编辑 ******

 **我已经修改了脚本以向您展示迄今为止的演变，感谢所有提供帮助的人，脚本有效，但仅适用于列表中的第一项。考虑到它是一个对象列表（请参阅@model），我如何单独影响列表中的每个项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:15:58.130

将您的脚本更改为

```
$(document).ready(function ()
{
    alert("The document is ready");

    $("#state1").change(function (){ // use change event instead of click
        alert("state1 radio button has been changed");
        // use prop instead of attr and always use the disabled attribute 
        // (there is not enabled). Use true/false to alter its state
        $("#textField1").prop("disabled", true); 
        $("#textField2").prop("disabled", false);
        $("#textField3").prop("disabled", false);
    }).trigger('change'); // trigger a change event since it is the default 

    $("#state2").change(function() { // use change event instead of click
        alert("state2 radio button has been changed");
        $("#textField1").prop("disabled", false); 
        $("#textField2").prop("disabled", true);
        $("#textField3").prop("disabled", true);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:15:31.603

好的，所以：

1.  您需要使用 jQuery 的 removeAttr 函数 ( [http://api.jquery.com/removeAttr/](http://api.jquery.com/removeAttr/) ) 启用单选按钮：

    ```
    alert("state1 radio button has been clicked");
    $("#textField1").attr("disabled", "disabled");
    $("#textField2").removeAttr("disabled");
    $("#textField3").removeAttr("disabled"); 
    ```

    这是因为它是禁用控件的“禁用”属性的存在。

2.  如果您将启用/禁用代码分解为函数：

    ```
    function doState1() {
      $("#textField1").attr("disabled", "disabled");
      $("#textField2").removeAttr("disabled");
      $("#textField3").removeAttr("disabled");
    }

    function doState2() {
      $("#textField1").removeAttr("disabled");
      $("#textField2").attr("disabled", "disabled");
      $("#textField3").attr("disabled", "disabled");
    }

    $(document).ready(function () {
      doState1();

      $("#state1").change(function (){
        doState1();
      });
      $("#state2").change(function() {
        doState2();
      });
    }); 
    ```

然后，您可以在文档准备好时调用它们，并将它们连接到单击操作中。

**编辑** 要对按钮+字段集重复此操作，我会让您的循环生成每个元素唯一的ID，例如

```
<input type="radio" id="state_1_1">State 1_1
<input type="radio" id="state_2_1">State 2_1
<input type="text" id="textField_1_1">Text 1_1
<input type="text" id="textField_2_1">Text 2_1
<input type="text" id="textField_3_1">Text 3_1

<input type="radio" id="state_1_2">State 1_2
<input type="radio" id="state_2_2">State 2_2
<input type="text" id="textField_1_2">Text 1_2
<input type="text" id="textField_2_2">Text 2_2
<input type="text" id="textField_3_2">Text 3_2 
```

然后更改代码以使用“search start of id”选择器并拆分 id 以获得集合和状态/文本字段编号：

```
function doState1(theid) {
    var idarr = theid.split("_");
    var state = idarr[1];
    var idval = idarr[2];
    $("#textField_1_" + idval).attr("disabled", "disabled");
    $("#textField_2_" + idval).removeAttr("disabled");
    $("#textField_3_" + idval).removeAttr("disabled");
}

function doState2(theid) {
    var idarr = theid.split("_");
    var state = idarr[1];
    var idval = idarr[2];
    $("#textField_1_" + idval).removeAttr("disabled");
    $("#textField_2_" + idval).attr("disabled", "disabled");
    $("#textField_3_" + idval).attr("disabled", "disabled");
}

$(document).ready(function () {

    if ($("#state_1_1").is(":checked")) {
        doState1("state_1_1");
    } else {
        doState2("state_2_1");
    }

    $('input[id^="state_1_"]').change(function () {
        doState1(this.id);
    });

    $('input[id^="state_2_"]').change(function () {
        doState2(this.id);
    });
}); 
```

见[http://jsfiddle.net/raad/4vHBv/17/](http://jsfiddle.net/raad/4vHBv/17/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:20:07.043

你的第一个问题上面已经回答了。至于第二个，我建议将状态检查移至如下函数：

```
function checkState(){
    if($('#state1').is(':checked')){
       //do stuff...
    }
} 
```

然后在文档准备好并且每次更改单选按钮的状态时运行该功能一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T15:26:56.843

首先，您必须了解“启用”的名称没有这样的属性。要启用 html 元素，您必须从字段中删除 disabled 属性。

如果您想将您的字段从禁用更改为启用状态，那么就像我写的那样： $("#textField2").removeAttr("disabled"); $("#textField3").removeAttr("disabled");

上面的代码将启用 id 为“#textField2”和“#textField3”的文本框**

# regex - 使用正则表达式检查 shell 脚本中的版本

> ID：15342048
> 
> 赞同：1
> 
> 时间：2013-03-11T15:10:33.457
> 
> 标签：regex, shell

任何人都可以建议一个用于检查版本的正则表达式如果我想检查 1.0.0 版本中的任何更新版本可能是`1.0.0-1`或`1.0.0-2`或`1.0.0-3`我只需要检查它是什么更新版本`-1 or -2 or -3` `1.0.0-1`或`1.0.0-2`或者`1.0.0-3`我可以使用什么正则表达式？试过了

```
sed -ne s/1.0.0\-[0-9]\1/p 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:26:56.577

这将只留下更新版本号：

```
echo "1.0.0-1" | sed -e 's/^[1-9][0-9.]*-//' 
```

这将留下领先的'-'：

```
echo "1.0.0-1" | sed -e 's/^[1-9][0-9.]*//' 
```

上面不需要 p 命令，所以我保留了它，并关闭了 -n 选项，但是如果这部分是一些更精细的 sed 脚本，您可以恢复它们。

编辑： OP 显然只是想知道该版本是否包含更新。以下是经典 bourne shell 中的几种方法：

```
#!/bin/sh
version='1.0.0-1'
case "$version" in
    *-[1-9]*)  # Not a regex, this is a (file) "pattern"
        # Update triggered code here
        ;;
esac

# Or:
if echo "$version" | grep '-[1-9][0-9]*$' >/dev/null ; then
    # Update triggered code here
fi 
```

当然，在其他 shell/环境中还有其他方法可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:39:11.973

您在这里并不需要正则表达式；只需将字符串拆分为正确的字符：

```
version=1.0.0-2
major=$(echo $version | cut -d. -f1 )
minor=$(echo $version | cut -d. -f1 )
patchlvl=$(echo $version | cut -d. -f1 | cut -d - -f1 )
build=$(echo $version | cut -d - -f2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:19:55.200

也许是这样的？：

```
$ echo "1.0.0-1" | sed -ne 's/1.0.0\(\-[0-9]\)/\1/p'
-1 
```

获取任何版本的更新号的正则表达式将是：

```
$ echo "1.0.0-1" | sed -ne 's/[0-9]\+\.[0-9]\+\.[0-9]\+\(\-[0-9]\)/\1/p'
-1 
```

诀窍是捕获您想要的输出`\(`并将`\)`括号分组以及用于`\1`在命令的替换部分中输出模式。

# c++ - 如何使用 mingw 编译 openexr

> ID：15342049
> 
> 赞同：0
> 
> 时间：2013-03-11T15:10:34.063
> 
> 标签：c++, c, mingw, openexr

我正在尝试在 windows7 上用 mingw 编译 openexr。我得到这个错误：

```
main.cpp: In function 'int main(int, char**)':
main.cpp:213:28: error: 'strcmp' was not declared in this scope
make[1]: *** [main.o] Error 1
make[1]: Leaving directory `/d/openexr/build/openexr-1.6.1/exrmaketiled'
make: *** [all-recursive] Error 1 
```

为什么我会收到此错误，我该如何解决？

我是 mingw 和 openexr 的新手，所以我可能会做一些傻事！

## 编辑1：

我正在使用这个脚本来制作它：

```
!/bin/sh
# modified synfig build file, taken from
# http://www.synfig.org/Windows_build_instructions

echo "Making OpenEXR..."
# Including configuration
if [ -r "./make_openexr.conf" ]; then
  . ./make_openexr.conf
else
echo "No config file (./make_openexr.conf) found."
exit 1
fi

CURRENT_DIR=`pwd`

echo "Cleanup directories"
rm -rf ${BUILD_DIR}/zlib-${ZLIB_VERSION}
[ $? -eq 0 ] || exit 1

rm -rf ${BUILD_DIR}/ilmbase-${ILMBASE_VERSION}
[ $? -eq 0 ] || exit 1

rm -rf ${BUILD_DIR}/openexr-${OPENEXR_VERSION}
[ $? -eq 0 ] || exit 1

echo "Preparing sources"
echo PATH is $PATH
echo tar -xzf ${ZLIB_SRC} -C ${BUILD_DIR}
tar -xzf ${ZLIB_SRC} -C ${BUILD_DIR}
[ $? -eq 0 ] || exit 1
echo tar -xzf ${ILMBASE_SRC} -C ${BUILD_DIR}
tar -xzf ${ILMBASE_SRC} -C ${BUILD_DIR}
[ $? -eq 0 ] || exit 1
echo tar -xzf ${OPENEXR_SRC} -C ${BUILD_DIR}
tar -xzf ${OPENEXR_SRC} -C ${BUILD_DIR}
[ $? -eq 0 ] || exit 1

echo "Configuring zlib"
cd  ${BUILD_DIR}/zlib-${ZLIB_VERSION}
[ $? -eq 0 ] || exit 1
./configure --prefix=${TEMP_INSTALL}
[ $? -eq 0 ] || exit 1

echo "Making"
make
[ $? -eq 0 ] || exit 1
make install
[ $? -eq 0 ] || exit 1
echo "zlib Done"

echo "Applying patches for ILMBase... "
cd  ${BUILD_DIR}/ilmbase-${ILMBASE_VERSION}
[ $? -eq 0 ] || exit 1
for SFILE in ${ILMBASE_PATCHES[@]}
do
  patch -p1 <${PATCHES_DIR}/${SFILE}
  [ $? -eq 0 ] || exit 1
done

echo "Configuring ILMbase"
[ $? -eq 0 ] || exit 1
./configure --host=${MINGW_HOST} --prefix=${TEMP_INSTALL} \
  --disable-static --disable-threading --disable-posix-sem
[ $? -eq 0 ] || exit 1

echo "Making"
make
[ $? -eq 0 ] || exit 1
make install
[ $? -eq 0 ] || exit 1
echo "ILMBase Done"

echo "Applying patches for OpenEXR... "
cd  ${BUILD_DIR}/openexr-${OPENEXR_VERSION}
[ $? -eq 0 ] || exit 1
for SFILE in ${OPENEXR_PATCHES[@]}
do
 patch -p1 <${PATCHES_DIR}/${SFILE}
 [ $? -eq 0 ] || exit 1
done

# Now the temp/openexr dir exists, we can add it to paths
if [ -d "${TEMP_INSTALL}" ]; then
 PATH="${TEMP_INSTALL}/bin:${PATH}"
 PKG_CONFIG_PATH="${TEMP_INSTALL}/lib/pkgconfig:${PKG_CONFIG_PATH}"
fi

 # set inc/lib path (for zlib)
 CXXFLAGS+=" -I${TEMP_INSTALL}/include"
  LDFLAGS+=" -L${TEMP_INSTALL}/lib"

 export PATH
 export PKG_CONFIG_PATH
 export CXXFLAGS
  export LDFLAGS

  echo "Configuring OpenEXR"
  [ $? -eq 0 ] || exit 1
  ./configure --host=${MINGW_HOST} --prefix=${TEMP_INSTALL} \
  --disable-static --disable-threading --disable-posix-sem  --disable-ilmbasetest
  [ $? -eq 0 ] || exit 1

 echo "separately build b44ExpLogTable as the openexr script doesn't work under msys"
 cd  ${BUILD_DIR}/openexr-${OPENEXR_VERSION}/IlmImf
 [ $? -eq 0 ] || exit 1
 mingw32-g++ --verbose -g -O2 -I${TEMP_INSTALL}/include/OpenEXR -L${TEMP_INSTALL}/lib       b44ExpLogTable.cpp  -lHalf -o b44ExpLogTable
  [ $? -eq 0 ] || exit 1
 cd ..
 [ $? -eq 0 ] || exit 1

 echo "Making"
make
[ $? -eq 0 ] || exit 1
make install
[ $? -eq 0 ] || exit 1
cd ${CURRENT_DIR}
[ $? -eq 0 ] || exit 1
# rm -rf ${BUILD_DIR}/openexr-${OPENEXR_VERSION}
# [ $? -eq 0 ] || exit 1

echo "Done: OpenEXR" 
```

我相信 mingw 和 mysys 的设置不正确，系统找不到包含（和库路径）。我怎样才能检查这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:29:51.630

正如我从[源代码文件](https://github.com/openexr/openexr/tree/master/OpenEXR)中注意到的，openexr 应该使用 cmake 工具构建。您必须执行CMake 的[步骤](http://www.cmake.org/cmake/help/cmake_tutorial.html)。

否则只编译`g++`或`gcc`不工作。

# java - javax web服务客户端数组

> ID：15342050
> 
> 赞同：0
> 
> 时间：2013-03-11T15:10:37.997
> 
> 标签：java, web-services, soap

我正在尝试调用一个需要数组作为参数的 web 服务，但我不知道该怎么做，我没有 wsdl，我想使用 javax 来做到这一点。

```
 String operation = "TheOperationName";    
    String urn = "TheWebService";
    String destination = "http://my-server/something.php";

    // First create the connection
    SOAPConnectionFactory soapConnFactory = SOAPConnectionFactory.newInstance();
    SOAPConnection connection = soapConnFactory.createConnection();

      // Next, create the actual message
      MessageFactory messageFactory = MessageFactory.newInstance();
      SOAPMessage message = messageFactory.createMessage();

      SOAPPart soapPart = message.getSOAPPart();
      SOAPEnvelope envelope = soapPart.getEnvelope();
      envelope.addNamespaceDeclaration("SOAP-ENC", "http://schemas.xmlsoap.org/soap/encoding/");
        // Create and populate the body
        SOAPBody body = envelope.getBody();

     // Create the main element and namespace
        SOAPElement operationItem = body.addChildElement(
                envelope.createQName(operation, "ns1")); 
```

//这里我迷路了，我应该创建一个数组

参数 0 SOAP-ENC:arrayType="SOAP-ENC:Struct[1]" xsi:type="SOAP-ENC:Array"

其中包含我的项目数组

```
 SOAPElement itemElement = myarray.addChildElement("item");

        // Add parameters
        itemElement.addChildElement("ID_Bug").addTextNode("ID");
        itemElement.addChildElement("ID_Release").addTextNode("RELEASE");

        // Save the message
        message.saveChanges();

        // Send the message and get the reply
        SOAPMessage reply = connection.call(message, destination);
        reply.toString();

        // Close the connection           
        connection.close(); 
```

关于如何实现这一目标的任何建议？

# asp.net-mvc - mvc 返回文件 xlsx 需要修复

> ID：15342051
> 
> 赞同：2
> 
> 时间：2013-03-11T15:10:46.857
> 
> 标签：asp.net-mvc

我正在使用 asp.net mvc 4，但从数据库中抓取的 excel 文件存在一些问题。我知道它是特定于 mvc 的，因为它不会在我的代码的正常 asp.net 部分中给出错误。

当我下载我的 xlsx 时，它下载得非常好。打开它时，它给了我以下错误：

> 我们发现“name.xlsx”中的某些内容存在问题。你想让我们尽可能多地恢复吗？如果您信任此工作簿的来源，请单击“是”。

显然我点击是。我的任何excel文件都没有问题。它们是正确生成的。

现在这是我的 mvc 代码：

```
Return File(attachment.FileContent.Content, attachment.FileContent.Type, attachment.Filename) 
```

*   attachment.FileContent.Content = byteArray 与内容
*   attachment.FileContent.Type = 在这种情况下 application/vnd.openxmlformats-officedocument.spreadsheetml.sheet
*   attachment.Filename = 带有正确结束标记的文件名（在本例中为 .xlsx）

但是，在我正常的 asp.net 页面上，我根本没有收到此错误。这是我在我的 asp.net 页面上所做的：

```
Dim filter As IO.Stream = Response.Filter
Response.Filter = Nothing
Response.Clear()
Response.ContentType = attachment.FileContent.Type
Response.AddHeader("Content-Disposition", "attachment; filename=" & attachment.Filename)
Response.OutputStream.Write(attachment.FileContent.Content, 0, attachment.FileContent.Length.Value)
Response.End() 
```

如果您有任何建议：我很乐意接受。

# testing - 获取 PayPal 测试账户资料

> ID：15342060
> 
> 赞同：0
> 
> 时间：2013-03-11T15:11:13.533
> 
> 标签：testing, paypal, token, profile, account

我要做的就是从我的测试帐户中获取凭据，以查看配置文件以在我的在线商店上进行测试付款。旧的 Sandbox 就像 Live 页面一样工作，我曾经很容易获得我的测试配置文件。新的沙盒界面让一切变得不同。我能够使用我的 LIVE 企业帐户登录沙盒，然后导入我的旧测试帐户（企业和个人）。

但是我如何获得测试业务帐户配置文件？如何使用测试帐户登录？

我在新沙盒上看到的只是这个： ![新界面](../Images/a238040222ed3cf5d0dfdb000f54c2e1.png)

***我需要的是在新的沙盒界面上得到这个：***

***商户编号***

![商户编号](../Images/55bd5ed23c6bea55ff3eabeb7859055e.png)

***以及返回 URL 和身份令牌：***

![网址和令牌](../Images/0ae0bf4a50cf3915be8ee3b7a73673a5.png)

从 Test Business 帐户获得此信息后，我可以继续在测试环境中进行开发和运行。我认为实时设置仍在工作，但还不想检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:11:00.763

如果您单击“沙盒站点”而不是“个人资料”，您将被重定向到沙盒页面，您可以在其中登录帐户并访问您正在寻找的信息。
或者，只需导航到[https://www.sandbox.paypal.com/webapps/mpp/home](https://www.sandbox.paypal.com/webapps/mpp/home)这将是完全相同的页面。

# mysql - MySql 我应该在哪些列上放置索引？

> ID：15342063
> 
> 赞同：0
> 
> 时间：2013-03-11T15:11:18.757
> 
> 标签：mysql, sql, explain

我有这个查询：

```
SELECT Concat(f.name, ' ', f.parent_names) AS FullName, 
       stts.name                           AS 'Status', 
       u.name                              AS Unit, 
       city.name                           AS City, 
       (SELECT Group_concat(c.mobile1) 
        FROM   contacts c 
        WHERE  c.id = f.husband_id 
                OR c.id = f.wife_id)       AS MobilePhones, 
       f.phone                             AS HomePhone, 
       f.contact_initiation_date           AS InitDate, 
       f.status_change_date                AS StatusChangeDate, 
       cmt.created_at                      AS CommentDate, 
       cmt.comment                         AS LastComment, 
       f.reconnection_date                 AS ReconnectionDate, 
       (SELECT Group_concat(t.name, ' ') 
        FROM   taggings tgs 
               JOIN tags t 
                 ON tgs.tag_id = t.id 
        WHERE  tgs.taggable_type = 'family' 
               AND tgs.taggable_id = f.id) AS HandlingStatus 
FROM   families f 
       JOIN categories stts 
         ON f.family_status_cat_id = stts.id 
       JOIN units u 
         ON f.unit_id = u.id 
       JOIN categories city 
         ON f.main_city_cat_id = city.id 
       LEFT JOIN comments cmt 
              ON f.last_comment_id = cmt.id 
WHERE  1 = 0 
        OR ( u.is_busy = 1 ) 
        OR ( f.family_status_cat_id = 1423 ) 
        OR ( f.family_status_cat_id = 1422 
             AND f.status_change_date BETWEEN '2011-03-21' AND '2012-03-13' ) 
```

我的问题非常具体。这是关于这条线：

```
 SELECT GROUP_CONCAT( c.mobile1 ) 
    FROM contacts c
    WHERE c.id = f.husband_id
    OR c.id = f.wife_id
    ) AS MobilePhones 
```

当我使用 EXPLAIN 时，这个查询似乎很糟糕。我得到这张表（c = 联系人）：38307 行。我应该根据查询将索引放在哪些列上？我尝试了 mobile1 - 但没有任何改进（顺便说一句 - family_id 在联系人表中被索引）。

我附上解释结果的图像： ![解释](../Images/9a3d2b4dbae4b2a626a5e26d18781ee4.png)

或者也许有人可以帮助我优化查询......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:21:37.170

您将要搜索的任何列，以加快该过程。请记住，键已经编入索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:00:35.413

只是出于我的好奇，查询的性能是什么

```
SELECT GROUP_CONCAT( c.mobile1 ) 
    FROM contacts c
    WHERE c.id IN(f.husband_id, f.wife_id)
    ) AS MobilePhones 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:39:35.970

好吧，似乎使用 GROUP_CONCAT 是问题所在。我只是将妻子和丈夫的手机分开为 2 个不同的列。首先，我认为使用 GROUP_CONCAT 会更快，但事实证明这是非常错误的。

# excel - excel导出到制表符分隔的文本文件| 开始每一行

> ID：15342064
> 
> 赞同：0
> 
> 时间：2013-03-11T15:11:19.570
> 
> 标签：excel, text, export-to-text

我正在做一个需要非技术人员编辑 excel 文件的项目。

该文件包含 2 列，一列是键，一列是值。键是整数，值是 html。我需要一个由非技术人员生成的文本文件，格式如下：

```
|[key][ tab \t][value]
|[key][ tab \t][value]
|[key][ tab \t][value] 
```

该| 需要，因为 html 可能是多行的。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:50:53.297

听起来你需要一点 VBA 才能让它工作。这应该让你开始。

```
Sub writeKeysValues()
Dim i As Integer
Dim outFile As String
Dim fNum1 As Integer

'Open file
outFile = "C:\temp\outfile.txt"
fNum1 = FreeFile()
Open outFile For Output As fNum1

'loop through non-blanks
i = 1
With Worksheets("Book1")
    Do Until .Cells(i, 1).Value = ""
        Print #fNum1, "|" & .Cells(i, 1).Value & vbTab & .Cells(i, 2).Value
        i = i + 1
    Loop
End With

'All done
Close #fNum1
End Sub 
```

笔记：

*   您必须将文件另存为支持 Excel 宏的电子表格 (.xlsm)。
*   它将在空白键处停止阅读。
*   写入被硬编码到 C:\temp\outfile.txt。

这不会赢得任何代码设计竞赛，但它应该让您了解如何使用管道和选项卡完全按照您的意愿编写它。

# jquery - jquery google like 图像网格

> ID：15342066
> 
> 赞同：0
> 
> 时间：2013-03-11T15:11:22.567
> 
> 标签：jquery, image, grid

有谁知道使用 jquery 缩放图像并将它们放置在图像谷歌搜索中的图像库（例如，所有图像都在直线上，即使一行可以包含不同数量的图像，具体取决于图像的宽度）

（不像砌体那样的蒙太奇）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-14T16:59:13.993

查看这个 jQuery 插件：[https](https://github.com/brunjo/rowGrid.js) ://github.com/brunjo/rowGrid.js 。它将项目放在谷歌图像搜索中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:01:47.017

我相信这篇文章会让你上路。

[http://www.techbits.de/2011/10/25/building-a-google-plus-inspired-image-gallery/](http://www.techbits.de/2011/10/25/building-a-google-plus-inspired-image-gallery/)

# java - 阿拉伯语的情感分析

> ID：15342081
> 
> 赞同：-1
> 
> 时间：2013-03-11T15:12:07.153
> 
> 标签：java, nlp, sentiment-analysis, rapidminer

我正在寻找用阿拉伯语分析情绪，为此我从 facebook 收集一些状态并将它们分类为正面和负面，我正在使用 RapidMiner 软件，所以我进行标记化和词干提取和停用词删除，现在我想要我的语料库将表情符号“:(和:)”视为一种积极和消极的情绪，如何将其添加到我的语料库中。

![在此处输入图像描述](../Images/fff118a9cdb188bfb9c5b836e2ed28a7.png)

这是我使用的模型，我必须合并什么运算符才能将笑脸作为正面和负面情绪处理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:24:34.603

标记化通常会删除标点符号。您是否正在实施自己的标记器来避免这种情况？也许是自定义[TokenMarker](http://rapid-i.com/api/rapidminer-5.1/com/rapidminer/gui/tools/syntax/TokenMarker.html)？

# c# - Linq GroupBy。返回数据子集的前一项

> ID：15342082
> 
> 赞同：5
> 
> 时间：2013-03-11T15:12:08.003
> 
> 标签：c#, sql, linq, group-by

我有一张航班价格数据表，我想将排名前 1 位的最便宜航班返回到每个目的地。该表具有以下基本字段：

```
FlightInfoID
AirportFrom
AirportTo
Price 
```

我尝试了以下操作，但它没有返回我预期的结果，因为特定目的地有多个项目，我只希望每个目的地有 1 个结果，所以如果我有 50 个目的地，我会返回 50 个项目。

```
lstBestFlightDealsForAllRoutes.OrderBy(p=> p.Price).GroupBy(x => x.AirportTo).First(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T15:14:58.663

```
from f in lstBestFlightDealsForAllRoutes
group f by new { f.AirportFrom, f.AirportTo } into g // group by route
select g.OrderBy(x => x.Price).First() // select cheapest flight 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T15:14:18.747

1.  按目的地分组航班
2.  从每个组中选择组中最便宜的航班

Lniq 使 2 变得困难（Minimum 函数没用），但您可以通过按价格对每个组进行排序并从每个组中选择第一个来做到这一点（以较小的性能成本），例如。

```
flights.GroupBy(f => f.Destination).Select(g => g.OrderBy(f => f.Cost)).Select(g => g.First()) 
```

# java - 从透明png精灵制作多边形的算法

> ID：15342083
> 
> 赞同：2
> 
> 时间：2013-03-11T15:12:10.617
> 
> 标签：java, png, sprite, polygon

说，我有一个游戏对象的精灵，它是一个`png`透明的图像。

![宇宙飞船精灵](../Images/e5cfa2f28d72b9f3d048790c8a4f9f39.png)

我想从此图像创建一个包含我的游戏对象的多边形。

![宇宙飞船多边形](../Images/796890b5348e8d91f4f8c4171546ac66.png)

我很确定它有一个现有的算法，但我还没有找到任何算法。

我期待类似的东西：

```
public static Polygon getPolygon(BufferedImage sprite)
{
    // get coordinates of all points for polygon
    return polygon;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:05:14.760

看到[这个问题](https://stackoverflow.com/q/7052422/837703)。它*会*很慢，但这取决于您想要它的准确度（第二个答案比较草率，但要快一点）。`Area`从另一个问题上得到答案后`getOutline()`，请尝试使用此代码（未经测试）：

```
public static Polygon getPolygonOutline(BufferedImage image) {
    Area a  = getOutline(image, new Color(0, 0, 0, 0), false, 10); // 10 or whatever color tolerance you want
    Polygon p = new Polygon();
    FlatteningPathIterator fpi = new FlatteningPathIterator(a.getPathIterator(null), 0.1); // 0.1 or how sloppy you want it
    double[] pts = new double[6];
    while (!fpi.isDone()) {
        switch (fpi.currentSegment(pts)) {
        case FlatteningPathIterator.SEG_MOVETO:
        case FlatteningPathIterator.SEG_LINETO:
            p.addPoint((int) pts[0], (int) pts[1]);
            break;
        }
        fpi.next();
    }
    return p;
} 
```

# javascript - 通过ajax更新数据库中的单个表单元素值？

> ID：15342088
> 
> 赞同：0
> 
> 时间：2013-03-11T15:12:22.053
> 
> 标签：javascript, jquery

我在页面上有很多用户可以更改的输入元素。我不想提交表格。我只想在用户更改其中一个元素内的值后更改数据库值。

我目前正在尝试将焦点绑定到每个输入。这是它通常的做法（facebook等）吗？

```
 $('input').focusout(function() {
    var current_val = $(this).val();
    var preset_val = $(this).attr('rel');//attribute set with original value
    if (current_val !== preset_val) {
                alert ('Value changed.');//where I would post to php page to update database
            }
    });" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:15:27.593

“通常完成”的方式是等到用户单击按钮以保存或提交更改。如果您要更新每个更改，您应该确保对用户非常清楚。

要使用的适当事件将取决于您希望在捕获更改时的积极程度。对于每次击键更新，`keyup`适用于输入、`click`选择和单选框/复选框。不那么激进的将是`blur`或`change`。

一种非常主动地捕捉任何可能的变化的方法是将 a`click`和 a附加`keyup`到表单元素本身。这也将节省为每个元素添加侦听器的开销。每次在表单上触发事件时，您可以 a) 检查原始目标，或 b) ajax 整个表单，或 c) 循环所有元素并检测更改，仅 ajax 更改的字段。

`onbeforeupload`也可用于在窗口关闭时对表单进行最终检查，但这可能有点过于夸张。

**文档**

*   [https://developer.mozilla.org/en-US/docs/DOM/HTMLFormElement](https://developer.mozilla.org/en-US/docs/DOM/HTMLFormElement)
*   [https://developer.mozilla.org/en-US/docs/DOM/element.onkeyup](https://developer.mozilla.org/en-US/docs/DOM/element.onkeyup)
*   [https://developer.mozilla.org/en-US/docs/DOM/element.onchange](https://developer.mozilla.org/en-US/docs/DOM/element.onchange)
*   [https://developer.mozilla.org/en-US/docs/DOM/element.onblur](https://developer.mozilla.org/en-US/docs/DOM/element.onblur)
*   [https://developer.mozilla.org/en-US/docs/DOM/element.onclick](https://developer.mozilla.org/en-US/docs/DOM/element.onclick)

# penetration-testing - 我在找中间人软件

> ID：15342090
> 
> 赞同：-3
> 
> 时间：2013-03-11T15:12:27.617
> 
> 标签：penetration-testing, penetration-tools

我有 TamperData 作为 Firefox 扩展。有没有更好的软件好用的拦截请求调用和修改..

Webscrab 和 Paros 只工作了一半而且不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:20:08.283

您可以使用 Burp Proxy 的免费版本

[http://portswigger.net/burp/proxy.html](http://portswigger.net/burp/proxy.html)

试试看:)

# android - Android RadioButton 和 Button one ClickEvent

> ID：15342091
> 
> 赞同：0
> 
> 时间：2013-03-11T15:12:30.070
> 
> 标签：android, button, dynamic, onclick

我有一个具有不同组件（单选按钮、复选框、按钮与）的应用程序。我动态创建了所有这些组件，但现在有一个问题；

当他们创建时，我无法为所有人创建事件。我需要对所有这些事件的单击事件的建议。

原谅我的英语有点糟糕，但提前谢谢你。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:35:30.940

您是否尝试在您的活动中实现 onclicklistener ？之后，对于所有组件，您应该设置它们的 onclicklistener。但是有一个重要的一点。单选按钮和复选框有自己的侦听器，“setOnCheckedChangeListener”。我认为你应该使用它。但如果你愿意，你可以像这样实现 OnClickListener。

```
public class myActivity extends Activity implements OnClickListener {
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

            button1.setOnClickListener(this);
            checkbox1.setOnClickListener(this);
            radiobuton1.setOnClickListener(this);

}

@Override
public void onClick(View v) {
    //You can listen "click event" of button1 ,checkbox1 and radiobutton1 here.

}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:48:01.933

```
RadioButton rb ; 
CheckBox cb;
Button btn;

public void MultiEvent (int clickId ){
    if (clickId == 0) {

    }else if (clickId == 1) {

    }else if (clickId == 2) {

    }
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    rb = (RadioButton)findViewById(R.id.radioButton1);
    cb = (CheckBox)findViewById(R.id.checkBox1);
    btn = (Button)findViewById(R.id.button1);

    btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            int clickId = 0;
            MultiEvent (clickId );
        }
    });

    rb.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            int clickId = 1;
            MultiEvent (clickId );
        }
    });

    cb.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            // TODO Auto-generated method stub
            int clickId = 2;
            MultiEvent (clickId );
        }
    });

} 
```

# sql-server - 通过 Coalasce 和 NULLIF 删除前导逗号？

> ID：15342092
> 
> 赞同：1
> 
> 时间：2013-03-11T15:12:36.993
> 
> 标签：sql-server, tsql, sql-server-2005, sql-update

```
UPDATE PropertyInformationDump
   SET RegistryAdd = COALESCE(NULLIF(b.OCAREOF, ''), b.OCAREOF + ', ','') +
       COALESCE(NULLIF(b.O1STADD, ''), b.O1STADD + ', ','') + 
       COALESCE(NULLIF(b.O2NDADD, '') + b.O2NDADD + ', ','') + 
       COALESCE(b.OSTNAME + ', ','') + COALESCE(b.OCITYST + '  ','') +  
       COALESCE(NULLIF(b.OZIP, ''), b.OZIP,'')
  FROM dbo.vw_BRT b
 WHERE BRTNumber = b.PARCEL
GO 
```

希望删除这些组合字符串前面的逗号。这是正在发生的事情的一个例子：

```
, , 1350 SUSQUEHANNA AVE, PHILADELPHIA PA  19125
MICHAEL J CARLONE, 10050 ROOSEVELT BLVD, PHILADELPHIA PA  191163924 
```

需要它始终看起来像：

```
1350 SUSQUEHANNA AVE, PHILADELPHIA PA  19125 
```

或者只是 OCAREOF 的填充方式：

```
MICHAEL J CARLONE, 10050 ROOSEVELT BLVD, PHILADELPHIA PA  191163924 
```

如果该字段为空或为空，我需要去掉这些逗号。显然我做错了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:19:28.497

使用 SQL Server 2005 以下应该可以工作

```
UPDATE PropertyInformationDump
SET RegistryAdd = 
    CASE WHEN Len(b.OCAREOF) > 0 THEN b.OCAREOF + ',' ELSE '' END + 
    CASE WHEN Len(b.O1STADD) > 0 THEN b.O1STADD + ',' ELSE '' END  + 
    CASE WHEN Len(b.O2NDADD) > 0 THEN b.O2NDADD + ',' ELSE '' END  + 
    CASE WHEN Len(b.OSTNAME ) > 0 THEN b.OSTNAME + ',' ELSE '' END  + 
    CASE WHEN Len(b.OCITYST) > 0 THEN b.OCITYST+ ',' ELSE '' END  + 
    CASE WHEN Len(b.OZIP) > 0 THEN b.OZIP+ ',' ELSE '' END 
FROM dbo.vw_BRT b
WHERE BRTNumber = b.PARCEL 
```

如果字段是空的有数据，那么你可以忽略使用`isNull()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:16:55.643

用这个：

```
COALESCE(NULLIF(b.OCAREOF + ', ', ''),'') 
```

**更新**

如果您的字段不可为空，请使用：

```
CASE WHEN LEN(b.OCAREOF) = 0 THEN '' ELSE b.OCAREOF + ', ' END +
.... 
```

# android - Android 自定义标题栏样式/主题

> ID：15342097
> 
> 赞同：1
> 
> 时间：2013-03-11T15:13:07.400
> 
> 标签：android, styles, themes, titlebar

我创建了一个带有自定义标题栏和一个按钮的活动，它被所有其他活动扩展。到目前为止它运行良好，但是当我使用带有 theme.dialog 的活动时，标题栏显示不正确。我猜标题的左右两边都有一个填充，高度限制为 25。

所以我尝试了与`theme.dialog windowTitleSize`主题相同的方法。但它显示的结果与我只更改正常主题的标题相同 - 左右填充和错误高度。

经过大量谷歌搜索后，我发现至少有一种适用于 stackoverflow 的解决方案。不幸的是，它在运行时修复了标题栏的填充，`Class.forName()`我`getField().`可以用相同的方式更改标题栏的高度`layoutParams`，但想将其全部设置为`xml`.

我在..data/res/values 中浏览了themes.xml，但找不到设置布局限制的位置。最后我尝试扩展普通主题并自己创建一个对话框。这给我带来了`Widget.PreferenceFrameLayout`我的 xmls 中的以下错误：在 styles.xml`"no resource found..." on all "...android:border..."`

```
<style name="MyPreference">
    <item name="android:borderTop">20dp</item>
    ...
</style> 
```

在themes.xml中“找不到资源...android:preferenceFrameLayoutStyle”

```
<style name="MyThemeDialog" parent="android:Theme">
    ...
    <item name="android:preferenceFrameLayoutStyle">@style/MyPreference</item>
    ...
</style> 
```

我应该如何使用给定的主题和样式以正确的方式在 theme.dialog 中设置标题栏？

**- - -编辑 - - -**

我认识到，提到的属性在 api8 的 attrs.xml 中不可用，所以对于匆忙提出的问题感到抱歉。有时我只是因为所有的树木而看不到森林。

在此先感谢您的帮助，

克里斯特尔

# java - 在 Netbeans 中将 JCheckBox 数组添加到 JPanel

> ID：15342104
> 
> 赞同：0
> 
> 时间：2013-03-11T15:13:29.953
> 
> 标签：java, arrays, netbeans, auto-generate, jcheckbox

我一直在尝试在 Netbeans 中添加一个`JCheckBoxes`由`JPanel`自动生成`Netbeans GUI`的数组，当我创建一个数组`JCheckBoxes`然后尝试将它们添加到`JPanel`using`JPanel.add(jCheckboxArray[x])`时，程序编译正常，但它们没有出现。

我创建了一个这样的数组：

```
// custom private member variables
private javax.swing.JCheckBox[] jCheckboxArray;
//

int CheckBoxNumber = 5;
jCheckboxArray = new javax.swing.JCheckBox[CheckBoxNumber];
for(int x = 0; x < CheckBoxNumber ; x++) {
    jCheckboxArray[x] = new javax.swing.JCheckBox();
    jCheckboxArray[x].setText("CheckBox " + x);
} 
```

我尝试设置可行但没有结果，并且所有在线示例似乎都引用了添加`JPanel`到 a`JFrame`但是`JFrame`自动生成的代码中不存在可能是因为自动生成的类 extends `javax.swing.JFrame`。

非常感谢任何帮助。

这是整个代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package my.ArduinoGUI;

/**
 *
 * @author EEE
 */
public class ArduinoGUI extends javax.swing.JFrame {

/**
 * Creates new form ArduinoGUI
 */
public ArduinoGUI() {
    initCustomComponents();
    initComponents();

}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    buttonGroup1 = new javax.swing.ButtonGroup();
    jPanel1 = new javax.swing.JPanel();
    jCheckBox1 = new javax.swing.JCheckBox();
    jCheckBox2 = new javax.swing.JCheckBox();
    jCheckBox3 = new javax.swing.JCheckBox();
    jCheckBox4 = new javax.swing.JCheckBox();
    jCheckBox5 = new javax.swing.JCheckBox();
    jPanel2 = new javax.swing.JPanel();
    jRadioButton1 = new javax.swing.JRadioButton();
    jRadioButton2 = new javax.swing.JRadioButton();
    jPanel3 = new javax.swing.JPanel();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder("Outputs"));
    jPanel1.setName("Outputs"); // NOI18N

    jCheckBox1.setText("jCheckBox1");

    jCheckBox2.setText("jCheckBox2");

    jCheckBox3.setText("jCheckBox3");

    jCheckBox4.setText("jCheckBox4");

    jCheckBox5.setText("jCheckBox5");

    javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
    jPanel1.setLayout(jPanel1Layout);
    jPanel1Layout.setHorizontalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel1Layout.createSequentialGroup()
            .addContainerGap()
            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(jPanel1Layout.createSequentialGroup()
                    .addComponent(jCheckBox1)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                    .addComponent(jCheckBox5))
                .addComponent(jCheckBox2)
                .addComponent(jCheckBox3)
                .addComponent(jCheckBox4))
            .addContainerGap(39, Short.MAX_VALUE))
    );
    jPanel1Layout.setVerticalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel1Layout.createSequentialGroup()
            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jCheckBox1)
                .addComponent(jCheckBox5))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(jCheckBox2)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(jCheckBox3)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(jCheckBox4)
            .addGap(0, 14, Short.MAX_VALUE))
    );

    jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder("PinState"));

    buttonGroup1.add(jRadioButton1);
    jRadioButton1.setText("Input");
    jRadioButton1.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jRadioButton1ActionPerformed(evt);
        }
    });

    buttonGroup1.add(jRadioButton2);
    jRadioButton2.setText("Output");

    javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
    jPanel2.setLayout(jPanel2Layout);
    jPanel2Layout.setHorizontalGroup(
        jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel2Layout.createSequentialGroup()
            .addGap(8, 8, 8)
            .addComponent(jRadioButton1)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(jRadioButton2)
            .addContainerGap(67, Short.MAX_VALUE))
    );
    jPanel2Layout.setVerticalGroup(
        jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel2Layout.createSequentialGroup()
            .addGap(16, 16, 16)
            .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jRadioButton1)
                .addComponent(jRadioButton2))
            .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
    );

    jPanel3.setBorder(javax.swing.BorderFactory.createTitledBorder("Generated Boxes"));

    int CheckBoxNumber = 5;
    jCheckboxArray = new javax.swing.JCheckBox[CheckBoxNumber];

    for(int x = 0; x < CheckBoxNumber ; x++) {
        jCheckboxArray[x] = new javax.swing.JCheckBox();
        System.out.print(x);
        System.out.print(jCheckboxArray[x].getText());
        jCheckboxArray[x].setText("CheckBox " + x);
        System.out.print(jCheckboxArray[x].getText());

        jPanel3.add(jCheckboxArray[x]);

    }

    javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
    jPanel3.setLayout(jPanel3Layout);
    jPanel3Layout.setHorizontalGroup(
        jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 0, Short.MAX_VALUE)
    );
    jPanel3Layout.setVerticalGroup(
        jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 175, Short.MAX_VALUE)
    );

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 40, Short.MAX_VALUE)
            .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addContainerGap())
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                .addGroup(layout.createSequentialGroup()
                    .addContainerGap()
                    .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addGroup(layout.createSequentialGroup()
                    .addGap(23, 23, 23)
                    .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGap(18, 18, 18)
                    .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
            .addContainerGap())
    );

    pack();
}// </editor-fold>

private void jRadioButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    // TODO add your handling code here:
}

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
     * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Windows".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(ArduinoGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(ArduinoGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(ArduinoGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(ArduinoGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new ArduinoGUI().setVisible(true);
        }
    });
}
// Variables declaration - do not modify
private javax.swing.ButtonGroup buttonGroup1;
private javax.swing.JCheckBox jCheckBox1;
private javax.swing.JCheckBox jCheckBox2;
private javax.swing.JCheckBox jCheckBox3;
private javax.swing.JCheckBox jCheckBox4;
private javax.swing.JCheckBox jCheckBox5;
private javax.swing.JPanel jPanel1;
private javax.swing.JPanel jPanel2;
private javax.swing.JPanel jPanel3;
private javax.swing.JRadioButton jRadioButton1;
private javax.swing.JRadioButton jRadioButton2;
// End of variables declaration

private javax.swing.JCheckBox[] jCheckboxArray;
private javax.swing.JPanel jPanel4;
private javax.swing.JCheckBox jCheckBox6;

private void initCustomComponents() {
    //throw new UnsupportedOperationException("Not yet implemented");
    // create checkbox array

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:37:48.337

```
I have given the example

 public static void main(String args[]) {
            String title = (args.length == 0 ? "CheckBox Sample" : args[0]);
            JFrame frame = new JFrame(title);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            JPanel panel = new JPanel(new GridLayout(0, 1));
            Border border = BorderFactory.createTitledBorder("Test");
            panel.setBorder(border);

            javax.swing.JCheckBox[] jCheckboxArray;
            //

            int CheckBoxNumber = 5;
            jCheckboxArray = new javax.swing.JCheckBox[CheckBoxNumber];
            for(int x = 0; x < CheckBoxNumber ; x++) {
                jCheckboxArray[x] = new javax.swing.JCheckBox();
                jCheckboxArray[x].setText("CheckBox " + x);
                panel.add(jCheckboxArray[x]);
            }

            Container contentPane = frame.getContentPane();
            contentPane.add(panel, BorderLayout.CENTER);
           // contentPane.add(button, BorderLayout.SOUTH);
            frame.setSize(300, 200);
            frame.setVisible(true);
          } 
```

# box-api - 在事件中获取用户的源 IP 地址

> ID：15342106
> 
> 赞同：0
> 
> 时间：2013-03-11T15:13:36.523
> 
> 标签：box-api

有没有办法从 Box API 的事件通知参数中获取用户的源 IP 地址。

因此，如果用户创建了一个文件夹，作为“创建”事件通知的一部分，除了用户 ID 和用户名之外，我还需要知道用户的源 IP 地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:50:10.003

这目前不能用作事件通知的参数，但我们可能会考虑在未来添加它。

# wcf - WCF 接收 HTTP 响应时出错

> ID：15342117
> 
> 赞同：1
> 
> 时间：2013-03-11T15:14:16.947
> 
> 标签：wcf, datacontract, datamember

这是我的 WCF 服务应该返回的内容。当我从 ResponseModel 命令 PaymentData 并在该类中添加其他 DataMembers 时，它可以工作。

```
[DataContract]
public class ResponseModel
{
    [DataMember]
    public PaymentData PaymentData { get; set; }
} 
```

这是`PaymentData`课程：

```
[DataContract]
public class PaymentData
{
    [DataMember]
    public PaymentType PaymentType { get; set; }
    [DataMember]
    public string CardNumber { get; set; }
    [DataMember]
    public DateTime ExpirationDate { get; set; }
    /// <summary>
    /// If true, then the CardNumber property will contain the token
    /// </summary>
    [DataMember]
    public bool IsCardNumberTokenized { get; set; }
    /// <summary>
    /// Number on back of credit cards. This value CANNOT be stored anywhere
    /// </summary>
    [DataMember]
    public string CardSecurityValue { get; set; }
    [DataMember]
    public CardSecurityPresence CardSecurityPresence { get; set; }
} 
```

`PaymentData`...以及类中定义的枚举

```
[DataContract(Name = "CardSecurityPresenceEnum")]
public enum CardSecurityPresence
{
    [EnumMember(Value = "1")]
    IsPresent = 1,
    [EnumMember(Value = "2")]
    Illegible = 2,
    [EnumMember(Value = "9")]
    NoCodeOnCard = 9,
    [EnumMember(Value = " ")]
    NotSent
}

[DataContract(Name = "PaymentTypeEnum")]
public enum PaymentType
{
    [EnumMember]
    Visa = CMPWSApiService.TransactionMop.VI,
    [EnumMember]
    MasterCard = CMPWSApiService.TransactionMop.MC,
    [EnumMember]
    AmericanExpress = CMPWSApiService.TransactionMop.AX,
    [EnumMember]
    Discover = CMPWSApiService.TransactionMop.DI,
    [EnumMember]
    PayPal = CMPWSApiService.TransactionMop.PP,
    [EnumMember]
    BillMeLater = CMPWSApiService.TransactionMop.BL
} 
```

序列化不喜欢我的变量名与它们的类同名吗？

这是来自 WCFTest 客户端的错误：

> 接收对 [服务 url 省略] 的 HTTP 响应时出错。这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文（可能是由于服务关闭）。有关更多详细信息，请参阅服务器日志。
> 
> 服务器堆栈跟踪：在 System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException(WebException webException, HttpWebRequest request, HttpAbortReason abortReason)
> 在 System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply（TimeSpan 超时） 在 System.ServiceModel.Channels.RequestChannel.Request（消息消息，TimeSpan 超时） 在 System.ServiceModel.Dispatcher.RequestChannelBinder.Request（消息消息，TimeSpan超时）在 System.ServiceModel.Channels.ServiceChannel.Call（字符串操作，布尔单向，ProxyOperationRuntime 操作，Object[] 输入，Object[] 输出，TimeSpan 超时）在 System.ServiceModel.Channels.ServiceChannelProxy.InvokeService（IMethodCallMessage methodCall，ProxyOperationRuntime操作）在 System.ServiceModel.Channels.ServiceChannelProxy.Invoke（IMessage 消息）
> 
> 在 [0] 处重新抛出异常：在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) 在 ICreditCardService.TestAuth( ) 在 CreditCardServiceClient.TestAuth()
> 
> 内部异常：底层连接已关闭：接收时发生意外错误。在 System.Net.HttpWebRequest.GetResponse() 在 System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply（时间跨度超时）
> 
> 内部异常：无法从传输连接读取数据：现有连接被远程主机强行关闭。在 System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size) 在 System.Net.PooledStream.Read(Byte[] buffer, Int32 offset, Int32 size) 在 System.Net.Connection.SyncRead （HttpWebRequest 请求，布尔型 userRetrievedStream，布尔型 probeRead）
> 
> 内部异常：远程主机在 System.Net.Sockets.NetworkStream.Read(Byte [] 缓冲区，Int32 偏移量，Int32 大小）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:30:56.363

在`CardSecurityPresenceEnum`我有一个`NotSent`未初始化为值的枚举成员。出于某种原因，这把事情挂了。

# php - 点击“立即付款”按钮时，Paypal EC 没有给我反馈

> ID：15342123
> 
> 赞同：1
> 
> 时间：2013-03-11T15:14:29.110
> 
> 标签：php, paypal, express-checkout

我正在将 Paypal Express Checkout 与我的 PHP 网站集成。当用户单击某个按钮时，我在[https://www.sandbox.paypal.com/incontext](https://www.sandbox.paypal.com/incontext)打开 Paypal 网站，它会打开一个 Paypal 登录页面。一旦用户点击“登录”按钮，就会出现一些文本“处理中...”，表示点击正常，他必须等待 Paypal 回复。

然后出现一个 Paypal 评论页面，当用户点击“立即付款”时，什么也没有发生。returnURL 正在执行，但在 Paypal 界面上，没有任何变化，用户可以一次又一次地单击。在我的例子中，returnURL 在 10 秒内处理，用户不知道发生了什么，直到 returnURL 脚本完成并重定向到我的网站。

我试图将 header() 放在 returnURL 的第一行而不是最后一行，但在相同的延迟后它仍然重定向。

窗口底部有一个非常少的“等待沙盒...”，然后是“从 mywebsite.com 加载...”，但大多数用户不会看到它，它不会阻止他们再次单击和再次点击“立即付款”按钮。

**编辑**：如果我重定向到[https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout](https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout)上的 Paypal 页面，（而不是[https://www.sandbox.paypal.com/incontext](https://www.sandbox.paypal.com/incontext)）当我点击“立即付款”时，页面会出现“正在加载...”消息。这是我预期的行为。但我更喜欢弹出页面而不是大型 Paypal 页面......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:12:11.457

听起来很奇怪，当您登录真实帐户、多个沙盒帐户等时，有时会出现一些奇怪的界面问题。这会导致 cookie 变得非常大并且表现得很奇怪。您可以尝试清除缓存/cookie 并查看是否遇到相同的奇怪界面问题吗？

# parsing - 野牛中的标记

> ID：15342124
> 
> 赞同：1
> 
> 时间：2013-03-11T15:14:36.663
> 
> 标签：parsing, bison

假设你想在规则中间添加一个语义动作，所以你替换：

```
S->AB 
```

和：

```
S->AMB
M->epsilon { //do something } 
```

为什么这是必要的？如果我只写：

```
S->A { //do something } B 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:23:14.740

解析器没有区别——在规则中间编写动作是用动作创建新的 epsilon 规则的语法糖。动作由解析器中的归约触发，因此需要有一个与动作关联的归约规则。Bison 会自动为您进行转换。

唯一的区别是`$1`... 在动作中的含义。使用嵌入式操作，索引计算的值堆栈中的基点将有所不同——基于包含规则的开始而不是 epsilon 规则。

# c# - 在方法运行时更新标签

> ID：15342125
> 
> 赞同：1
> 
> 时间：2013-03-11T15:14:37.700
> 
> 标签：c#, asp.net, ajax

如何在方法运行时更新 aspx 页面中的标签？也许使用 AJAX（更新面板）？

```
private void button_Click(object sender, EventArgs e)
{
    doThings1();
    label.Text = "Status1";
    doThings2();
    label.Text = "Status2";
    doThings3();
    label.Text = "Done";  
} 
```

我想一步一步地展示。当doThings1（）完成时方法正在运行，显示“Status1”，doThings2（）完成，显示“Status2”......这样，标签不会显示“Status1”和“Status2”，只是过程完成时“完成”。我想一步一步地展示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:33:10.040

这不是一件容易的事，就像在桌面应用程序中一样。您需要启动一个异步操作，该操作将在请求结束后继续，您需要让客户端不断轮询服务器以获取有关进度的更新，并且服务器端异步代码将需要更新某种共享状态（即会话、数据库、视图状态等），轮询方法可以从中读取进度。到处都是非常低效的（特别是如果你有很多用户这样做）并且需要一些时间来编写。 [这](http://code.msdn.microsoft.com/CSASPNETBackgroundWorker-dda8d7b6/view/SourceCode)是 MSDN 上的一个示例，它可以让您了解所涉及的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:24:15.020

听起来您想显示在​​服务器上运行的某些任务的进度。Signalr库将允许您从服务器向客户[端](http://signalr.net/)发送实时更新。因此，只要任务完成了任务的一个阶段（Status1、Status2 等），它就会向侦听客户端发送具有新状态的更新。

您还可以让一些 javascript 每隔几秒钟从服务器请求任务状态并将其显示给用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:31:56.410

规则是：1 个请求 --> 一个响应。不同的方法：您可以使用 3 个异步 javascript 调用执行这些方法，并在成功回调中设置标签的文本。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

例子：

```
$.ajax({
    type: "POST",
    url: "URL.asmx/doThings1",
    data: "{}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function(result) {
            // result will be "done" from the function of webservice below.
        // set the first label text
    },
    error: function(xmlHttpRequest, status, err) {
        alert(xmlHttpRequest.statusText + " " + xmlHttpRequest.status + " : " + xmlHttpRequest.responseText);
    }

}); 
```

重复这些调用 3 次，并在不同的函数中进行修改。您可以使用 jquery 或纯 javascript 在客户端处理您的 buttonclick。

您可以使用 Web 服务或通用处理程序来执行服务器端方法。

[如何创建网络服务](http://www.codeproject.com/Articles/863/Your-first-C-Web-Service)

```
[WebMethod]
    public string doThings1()
    {
        return "done";
    } 
```

# php - 短语解析和趋势

> ID：15342132
> 
> 赞同：1
> 
> 时间：2013-03-11T15:15:03.143
> 
> 标签：php, javascript, mysql, regex

因此，我正处于工作项目（软件支持）的“设计”阶段，并希望在深入森林之前收集社区的意见、想法等。最终，我正在构建一个与 Twitter 的 Trending 页面非常相似的网页。这是我将如何使用它的高级概述：

我们的支持代表将在客户来电时为他们创建工单，工单的文本被实时捕获并发送到另一个我称之为“Hoss”的服务器。一旦 Hoss 收到数据，我们就开始解析文本。这里的主要兴趣是一个文本区域，支持代表在其中键入客户遇到的问题的简短摘要。我想获取这些信息，对其进行解析并将其显示在列出“趋势”主题的网页上，以便管理人员可以实时了解客户打电话的内容。

现在有趣的东西和我想得到一些方向的地方......对于这个例子。假设摘要文本区域包含以下内容：

> “客户在尝试安装更新时遇到错误，“update.exe 中的错误”

既然 Hoss 服务器有了这个文本，它就可以开始解析它了。我有兴趣为趋势提要捕获关键字。在此示例中，“错误”、“安装”、“update.exe”。但是，捕获/跟踪一起出现的关键字也很重要。意思是，我可以很容易地捕捉到“错误”和“安装”，并且基本上可以计算这些词在任何给定时间内出现了多少次，但它们单独提供的洞察力不如它们一起提供的洞察力。

同样，我处于该项目的早期阶段，这就是为什么我没有附加代码示例等。此时没有任何限制！先感谢您！在花了很多时间阅读帖子之后，我了解到了这个社区的力量，它是一个无价的资源！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:32:30.347

这涉及到自然语言处理，这本身就是一个相当大的研究领域。

一些想法应该让你朝着正确的方向前进。

1.  定义停止列表。这些词将被忽略。它们应该包括没有意义的词（is、of、a、when）。以及因为很可能出现在很多票（客户）中而没有什么意义的词。

2.  定义同义词，意思相同的不同词。在对字符串进行标记时，您可以用根词替换匹配词以减少差异。

3.  索引 1-3 个关键字词组中的关键字。然后总结并记录这些事件。

随着更多数据可用，您可能会不断调整这点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:37:02.237

我建议使用像 Carrot2 ( [http://project.carrot2.org/](http://project.carrot2.org/) ) 这样的集群服务器，然后将票证内容或主题作为文档传递。您可以选择要使用的算法。集群启动后，您可以通过集群计数获得热门话题。Carrot2 是 java，但有一些有用的 php 示例（用于发送文档和检索结果和计数）可用于您可以试验的代码。它还有一个 REST api，您可以将其与 php curl 或 guzzle 一起使用（使 curl 吸得更少）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:38:37.467

好吧，我建议您构建一组您想要注意的常用短语，每次将提要发送到 Hoss 时，在您的解析过程中，`preg_match()`对提要执行操作或计算您的短语出现并存储的次数一个分贝。

Say you have a array of ten words that you are watching out for `$support_words=array('word1','word2','word3', ...'wordn');` ,count the number of array items and do a loop to check the count. eg. `foreach($support_words as $words){$count = substr_count($feed_from_customer_reps, $word); // insert the word and count into the database here. or better still fetch word if exists from database, get the current count and add the new count to it. // }`

This is an untested code infact its more of a psuedocode that an actual program code. I hope you get the logic tho...let me know if yo not clear.

resources:[php substr_count manual](http://php.net/manual/en/function.substr-count.php)

# php - 如何在 html 中使用 php 更改单词方向？

> ID：15342135
> 
> 赞同：0
> 
> 时间：2013-03-11T15:15:18.130
> 
> 标签：php, html, word

我已经创建了一个word文档来使用这个方法

```
 <?php
        $word= "";
        $word  .= "<h2 style='font-family: Arial;'>My title</h2>";
        $cleanContent = utf8_decode($word);
    file_put_contents("mynewworddocument.doc",$cleanContent,LOCK_EX);
   ?> 
```

我有 2 个问题。

1.- 通过这个过程可以改变方向页面（横向或纵向）？

2.- 可以创建分页符吗？如果是，如何？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:24:27.323

正如评论者已经提到的那样，您不是在创建真实的 Word 文档。这也没有你想象的那么容易。但是为了你的运气，那里有解决这些问题的裂缝。例如 PHPWord：[http](http://phpword.codeplex.com/) ://phpword.codeplex.com/ | [https://github.com/PHPOffice/PHPWord/](https://github.com/PHPOffice/PHPWord/)

如果您真的想创建 .doc word 文档，请尝试使用该库。

# c - 如何使用 __declspec( dllexport/import ) 将 C 结构从 DLL/ 导出/导入到控制台应用程序

> ID：15342138
> 
> 赞同：8
> 
> 时间：2013-03-11T15:15:25.760
> 
> 标签：c, dll, struct, dllimport, dllexport

这是我第一次处理 DLL。根据 MSDN 文档，我创建了一个头文件**fooExports.h**，其中包含根据预处理器定义定义的宏：

```
#ifdef FOODLL_EXPORTS
    #define FOO_API __declspec( dllexport )
#else
    #define FOO_API __declspec( dllimport ) 
```

我的意图是在我的 DLL 实现和控制台应用程序中都使用这个头文件。到目前为止，导入和导出功能工作得很好。当我尝试导出一个已定义的结构时，问题就出现了，我需要该结构作为其中一个导出函数的参数。例如，在前面提到的头文件中我声明`FOO_API void foo( FooParams *args )`了`args`一个结构体，定义如下：

```
typedef struct FooParams
{
    char *a;
    char *b;
    void *whatever; //some other type
} FooParams; 
```

这个结构必须在**foo.h**而不是**fooExports.h**中定义。有什么方法可以导出这个结构而不将其从原始头文件中取出（考虑到我想将导出/导入集中在**fooExports.h**中）。有什么更好的方法来做到这一点？DLL 是所有 C 以及使用它的客户端应用程序。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T19:55:06.730

如果客户端的唯一用途`FooParams`是获取从 DLL 函数返回的指向它的指针并将这些指针传递给其他 DLL 函数，则可以将其设为“不透明类型”：

```
typedef struct FooParams FooParams; 
```

在 fooExports.h 中。该`FOO_API`宏不属于该声明。不透明类型意味着客户端代码不能：

*   创建任何类型的变量`FooParams`（但`FooParams * ptr = NULL;`没关系）。
*   对 的任何成员做任何事情`FooParams`。
*   查找`sizeof(FooParams)`- 因此无法正确地`malloc`为一个或多个`FooParams`对象留出空间。

您也不能`#define`看到执行上述任何操作的客户端的宏。因此，您的 DLL 需要具有一个或多个“构造函数”或“工厂”函数，可能类似于

```
FOO_API FooParams* CreateFooParams(const char * input); 
```

定义一个匹配的“析构函数”函数也是一个好习惯，比如

```
FOO_API void DestroyFooParams(FooParams * p); 
```

*即使*定义与 一样简单`{ free(p); }`，因为如果在 DLL 内分配的内存被外部代码释放，有时可能会出现问题，反之亦然（因为并非所有 Windows 代码都使用`malloc`和的相同定义`free`）。

如果这一切都过于极端，则唯一的其他选择是将定义或`#include`定义`struct`放在导出的头文件中并使其对客户端可见。没有它，除了传递指针之外，任何对 a 做某事的尝试`FooParams`都是不可能的，因为编译器将不知道 a 中的内容`FooParams`。编译器（与链接器相反）仅从命令行参数和`#include`-d 文件中获取信息，而不是从库或 DLL 中获取信息。

# c# - 如何不允许 WPF 组合框为空

> ID：15342143
> 
> 赞同：7
> 
> 时间：2013-03-11T15:15:34.343
> 
> 标签：c#, wpf, combobox

我有一个 WPF 组合框，我绑定了一些东西。用户必须选择其中一项。如果他们没有选择任何东西，我想发出警告并让用户重新选择。

怎么能这样做？

我正在考虑有一个“选择”按钮。当用户没有选择任何东西时，我设置：

```
if (combobox.SelectedItem == null)
{
    MessageBox.Show("Please select one");

    //Here is the code to go back to selection
} 
```

是否有针对此要求的通用解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T21:33:07.777

您可以创建一个`ValidationRule`然后`ComboBox` `SelectedItem,`您可以让 UI 向用户显示他们需要做某事。

例子：

验证规则：

```
public class SelectionValidationRule : ValidationRule
{
    public override ValidationResult Validate(object value, System.Globalization.CultureInfo cultureInfo)
    {
        return value == null
            ? new ValidationResult(false, "Please select one")
            : new ValidationResult(true, null);
    }
} 
```

组合框：

```
<ComboBox ItemsSource="{Binding Items}" >
    <ComboBox.SelectedItem>
        <Binding Path="SelectedItem">
            <Binding.ValidationRules>
                <local:SelectionValidationRule ValidatesOnTargetUpdated="True"/>
            </Binding.ValidationRules>
        </Binding>
    </ComboBox.SelectedItem>
</ComboBox> 
```

这将勾勒出`ComboBox`红色

![在此处输入图像描述](../Images/18d08553e449a5ed5864b92528bf5867.png)

当然还有 ite `WPF`，因此您可以自定义所有内容，因此您可以`ControlTemplate`为失败添加 a`Validation`并将验证消息添加为`ToolTip`.

```
<Window x:Class="WpfApplication9.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication9"
        Title="MainWindow" Height="132" Width="278" Name="UI">

    <Window.Resources>

        <!--If there is a validation error, show in tooltip-->
        <Style TargetType="ComboBox" >
            <Style.Triggers>
                <Trigger Property="Validation.HasError" Value="true">
                    <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors)[0].ErrorContent}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!--Create a template to show if validation fails-->
        <ControlTemplate x:Key="ErrorTemplate">
            <DockPanel>
                <Border BorderBrush="Red" BorderThickness="1" >
                    <AdornedElementPlaceholder/>
                </Border>
                <TextBlock Foreground="Red" FontSize="20" Text=" ! " />
            </DockPanel>
        </ControlTemplate>

    </Window.Resources>

    <Grid DataContext="{Binding ElementName=UI}">
        <ComboBox ItemsSource="{Binding Items}" Margin="21,20,22,48" Validation.ErrorTemplate="{StaticResource ErrorTemplate}">
            <ComboBox.SelectedItem>
                <Binding Path="SelectedItem">
                    <Binding.ValidationRules>
                        <local:SelectionValidationRule ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </ComboBox.SelectedItem>
        </ComboBox>
    </Grid>
</Window> 
```

结果：

![在此处输入图像描述](../Images/f6bf1d047a7cd9654d6dc7843948cd7c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:22:39.873

您可以通过多种方式实现这一点，但一种方法可能是：

*   使用转换器将“选择”按钮的 IsEnabled 属性绑定到组合框的 SelectedItem，如果 SelectedItem 不为 null，则输出 True，否则输出 False
*   并且也许还可以在组合框中定义一个触发器以在 SelectedItem 为空时显示警告（使用相同类型的转换器设置触发器）

您可以像这样实现类型转换器：

```
[ValueConversion(typeof(object), typeof(bool))]
public class NullToBoolConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return (value != null);
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return value;
    }
 } 
```

然后，您可以像这样使用它：

```
 <local:NullToBoolConverter x:Key="nullToBoolConverter"/>

 <Button IsEnabled="{Binding ElementName=nameOfCombobox, Path=SelectedItem, Converter={StaticResource nullToBoolConverter}}" Content="Select"/> 
```

# forms - MS Access 表单中的自动填充字段

> ID：15342144
> 
> 赞同：0
> 
> 时间：2013-03-11T15:15:34.700
> 
> 标签：forms, ms-access, return-value, multiple-instances, auto-populate

有没有办法自动填充 MS Access 表单中的字段？假设用户从表单上的特定组合框中进行选择，是否可以根据 PK 自动选择表单上的其他字段？

我想补充一点，要自动填充的字段将来自各种表。

***修正

在组合框中选择特定记录后，我需要返回多个值。有人可以帮忙吗？多个值将来自返回如下值的查询：

```
ID          Code             Count
24          TST                4  
24          BPB                7
24          SSS                10 
```

在表单中，组合框将选择 ID 号。一旦我选择了 24 的 ID 号，我想返回来自名为 Project_Error_Final 的查询的所有 3 条记录（在此示例中，有 3 个值要返回，但我希望查询返回 ID = 24 的任何记录）。我到目前为止的 VBA 代码是：

```
Private Sub cboProjectID_Change()

Dim VarComboKey As Integer
Dim VarObjective As Variant
Dim VarStartDate As Variant
Dim VarEndDate As Variant
Dim VarRiskCategory As Variant
Dim VarTarDatSet As Variant

Dim VarErrorCount As Variant
Dim VarErrorCode As Variant

VarComboKey = Me.cboProjectID.Value

VarObjective = DLookup("[Objective]", "[Project_HDR_T]", "[Project_ID] = " & VarComboKey)
Me.txtObjective = VarObjective

VarStartDate = DLookup("[Start_Date]", "[Project_HDR_T]", "[Project_ID] = " & VarComboKey)
Me.txtStartDate = VarStartDate

VarEndDate = DLookup("[End_Date]", "[Project_HDR_T]", "[Project_ID] = " & VarComboKey)
Me.txtEndDate = VarEndDate

VarRiskCategory = DLookup("[Risk_Category]", "[Project_HDR_T]", "[Project_ID] = " & VarComboKey)
Me.txtRiskCategory = VarRiskCategory

VartxtTarDatSet = DLookup("[Targeted_Dataset]", "[Project_Targeted_Dataset]", "[Project_ID] = " & VarComboKey)
Me.txtTarDatSet = VartxtTarDatSet

VarErrorCount = DLookup("[Count_Error_Codes]", "[Project_Error_Final]", "[project_ID] = " & VarComboKey)
Me.txtErrorCount = VarErrorCount

VarErrorCode = DLookup("[ErrorCode]", "[Project_Error_Final]", "[project_ID] = " & VarComboKey)
Me.txtErrorCode = VarErrorCode

End Sub 
```

有问题的值是 VarErrorCount 和 VarErrorCode。在上面的 VBA 代码中，只返回一个值。但是，一旦选择了 ID 组合框字段，我正在寻找要在我的表单中返回的多个 VarErrorCount 和 VarErrorCode 值。在此特定示例中，VarErrorCode 应返回“TST”、“BPB”和“SSS”。VarErrorCount 应返回相应的 VarErrorCode 值：“4”、“7”、“10”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:59:30.110

就在这里！

显然，您需要能够将组合框选择与您希望填充到其他字段中的值相关联。假设您与 PK 具有 1:1 的关系（因为您只想在表单中显示一个值），您可以使用 AfterUpdate 事件加上 DLookup() 函数来使用 PK 检索相关值。

作为一个简单的示例，我设置了一个名为 Foods 的表，如下所示：

> FoodID、FoodName、FoodCategory
> 
> 1、橙子、水果
> 
> 2、鸡肉、家禽
> 
> 3、杏仁、坚果
> 
> 4、生菜、蔬菜

在表单中，我有一个选择 FoodID 作为名为 ComboFoods 的 PK 绑定值的控件，以及一个名为 TextFoodCategory 的未绑定文本框控件，我们将使用 Foods 表中的 FoodCategory 填充该控件。

我已将以下代码分配给组合框的 AfterUpdate 事件，以便当组合框的值更改时，将填充文本框：

> 私有子 ComboFoods_AfterUpdate()
> 
> '创建一个变量来存储组合框主键选择
> 
> 将 VarComboKey​​ 调暗为整数
> 
> '创建一个变量来存储 DLookup 结果
> 
> Dim VarFoodCat 作为变体
> 
> '获取组合框的主键
> 
> VarComboKey​​ = Me.ComboFoods.Value
> 
> '获取相关字段值
> 
> VarFoodCat = DLookup("[FoodCategory]", "[Foods]", "[FoodID] = " & VarComboKey​​)
> 
> '将文本框的值设置为变量
> 
> Me.TextFoodCategory.Value = VarFoodCat

这将返回与 PK 相关的 FoodCategory。这都是使用一个表，但是可以修改 DLookup 语句以引用任何包含 PK 的查询或表。

请注意，只有当您引用的数据中的 PK 是唯一的时，DLookup 才能正常工作。除非您指定将结果限制为一条记录的其他条件，否则它不会在一对多关系中工作。如果您需要返回多条记录，还有其他方法可以在 VBA 中使用 SQL 查询和记录集，但这超出了此问题的范围。

这在测试时有效 - 祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:01:56.527

关于您的多次退货，您不能使用 a `DLookup`，但我会根据您的描述向您展示如何实现您想要的结果。

> 在此特定示例中，VarErrorCode 应返回“TST”、“BPB”和“SSS”。VarErrorCount 应返回相应的 VarErrorCode 值：“4”、“7”、“10”

将上面的最后 4 行更改`End Sub`为以下内容：

```
Dim dbs as DAO.Database
Dim rst1 as DAO.Recordset
Dim rst2 as DAO.Recordset

Set dbs = CurrentDb
Set rst1 = dbs.OpenRecordset("SELECT [Count_Error_Codes] FROM [Project_Error_Final] WHERE [project_ID] = " & VarComboKey)
If rst1.RecordCount > 0 Then
    rst1.MoveFirst
    Do Until rst1.EOF
        VarErrorCount = VarErrorCount & rst1!Count_Error_Codes & ","
        rst1.MoveNext
    Loop
    ' Remove the last comma
    VarErrorCount = Mid(VarErrorCount, 1, Len(VarErrorCount) - 1)
End If

Set rst2 = dbs.OpenRecordset("SELECT [ErrorCode] FROM [Project_Error_Final] WHERE [project_ID] = " & VarComboKey)
If rst2.RecordCount > 0 Then
    rst2.MoveFirst
    Do Until rst2.EOF
        VarErrorCode = VarErrorCode & rst2!ErrorCode & ","
        rst2.MoveNext
    Loop
    ' Remove the last comma
    VarErrorCode = Mid(VarErrorCode, 1, Len(VarErrorCode) - 1)
End If

rst1.Close
Set rst1 = Nothing

rst2.Close
Set rst2 = Nothing

dbs.Close
Set dbs = Nothing

Me.txtErrorCount = VarErrorCount
Me.txtErrorCode = VarErrorCode 
```

# python - Python：有效地比较列表的第一个元素

> ID：15342146
> 
> 赞同：1
> 
> 时间：2013-03-11T15:15:43.437
> 
> 标签：python, list, compare, append

在 Python 中，我有一个名为“list1”的列表，其中包含可变长度的列表。

如果 add 的第一个元素不是 list1 中任何列表的第一个元素，我想将第二个列表“add”附加到那个长列表中。

此代码有效：

```
list1 = [["a", 5, 9, 22], ["b", 10, 1], ["c"], ["d", 42]]

add = ["e", 1, 31]
add2 = ["b", 1, 31]

temp = []
for e in list1:
    temp.append(e[0])

if add[0] not in temp:
    list1.append(add) 
```

正如预期的那样，将 add ist 添加到 list1 而不会添加 add2。

但是，我想知道是否有一种更优雅有效的方法可以避免创建临时列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:18:22.020

您可以使用`all()`生成器表达式进行测试：

```
if any(add[0] != elem[0] for elem in list1):
    list1.append(add) 
```

该`all()`函数遍历包含的生成器表达式测试它只会包含`True`值，但如果遇到 a `False`（其中`add[0]`等于`elem[0]`）将停止。这样就不必遍历*所有*来`list1`找出是否`elem[0]`已经存在。

# css - div 永远正确，所有浏览器

> ID：15342148
> 
> 赞同：1
> 
> 时间：2013-03-11T15:15:54.100
> 
> 标签：css, cross-browser

我只是为 div 创建下一个 css 代码，使其始终正确：

```
#button > .right{
  background-position: -268px 1415px;
  height: 180px;
  position: fixed;
  right: -90px;
  top: 40%;
  width: 263px;
 -webkit-transform                : scale(0.23);
 -moz-transform                   : scale(0.23);
 -o-transform                     : scale(0.23);
 -ms-transform                        : scale(0.23);
 transform                        : scale(0.23);
} 
```

我在 firefox 中尝试，这段代码很好，但是当我在其他浏览器中尝试时，找不到。

任何想法？

pdt：这是网址[http://supboat.herokuapp.com/](http://supboat.herokuapp.com/)

编辑：这段代码很好，问题是因为这个 div 在其他 div 中，位置：relative。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:21:42.910

你的问题很容易解决。您的设置`right:-90px;`意味着 div 从可见屏幕移出 90 像素。您将宽度设置为 263 像素，然后将其缩放为 0.23。大约是 60 像素 (263 * 0.23)。这意味着您的 div 在那里，但他的左边框在您的可见视口右侧约 30 像素处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:29:06.600

嘿只需计算屏幕的宽度，然后更新按钮左坐标的值。

例如：-

```
<button id="right"><button>

<script>
    var x=$(window).width();
    var right=document.getElementById("right");
    right.style.position="absolute";
    right.style.left=x+"px";
</script> 
```

x 是屏幕的总宽度，然后您已将“x”分配给按钮的左侧坐标... :)

# ruby-on-rails - 如何从错误的网址中拯救

> ID：15342149
> 
> 赞同：0
> 
> 时间：2013-03-11T15:15:57.213
> 
> 标签：ruby-on-rails, rescue

我的应用程序中有一个方法可以从提交的链接的 og:image 标记中查找照片。在我的创建操作中，我使用`photo_form_url`下面描述的方法。

```
def photo_from_url(url)
  if !Nokogiri::HTML(open(url)).css("meta[property='og:image']").blank?
    photo_url = Nokogiri::HTML(open(url)).css("meta[property='og:image']").first.attributes["content"]
    self.photo = URI.parse(photo_url)
    self.save
  end 
end 
```

但是，如果输入了错误的 url，则会产生错误。我试图拯救如下，但这给了我一个“未定义的方法redirect_to”

```
def photo_from_url(url)
  begin
    if !Nokogiri::HTML(open(url)).css("meta[property='og:image']").blank?
      photo_url = Nokogiri::HTML(open(url)).css("meta[property='og:image']").first.attributes["content"]
      self.photo = URI.parse(photo_url)
      self.save
    end
  rescue OpenURI::HTTPError
    redirect_to :back, notice: 'link's broken！'
  end
end 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:27:09.767

根据您对我的评论的回答，您的功能`photo_from_url`是在模型中定义的。如您所面临的错误所示，无法尝试在模型中重定向用户。

请记住，您的模型可以在浏览会话环境之外调用。例如：

*   测试
*   耙任务

因此，您永远不应该将任何与操作用户浏览器或模型中的用户会话有关的代码。这是控制器的工作。

因此，当您遇到错误的 url 时，您需要做的只是在模型中引发异常或返回特定值。并通过重定向用户来响应控制器中的异常/返回值。这确保了与用户浏览器有关的任何内容都保留在控制器中，并且如果遇到相同的错误，您可以在 rake 任务中实现不同的行为。

所以，你的模型应该做一些事情，并在它不能做的时候引发错误：

```
# Link.rb
def photo_from_url(url)
  if !Nokogiri::HTML(open(url)).css("meta[property='og:image']").blank?
    photo_url = Nokogiri::HTML(open(url)).css("meta[property='og:image']").first.attributes["content"]
    self.photo = URI.parse(photo_url)
    self.save
  end 
end 
```

您的控制器应该要求您的模型做一些事情，并在出现问题时与用户处理：

```
# link_controller
# in create
begin
  link.photo_from_url(url)
rescue OpenURI::HTTPError
   redirect_to :back, notice: 'link's broken！'
end 
```

# python - Python 线程似乎冻结了机器

> ID：15342155
> 
> 赞同：0
> 
> 时间：2013-03-11T15:16:17.363
> 
> 标签：python, multithreading

我正在使用 python 线程来解析网站 IP 地址。这是我的解决工作流程。这是一个守护线程。

```
def get_ip_worker():
    """This is the worker (thread) process for parsing ips, this process takes domain from the q processes it
    and then saves it to another q"""

    socket.setdefaulttimeout(3)
    while True:
        domain = domains_q.get()
        try:
            addr_info = socket.getaddrinfo(domain, 80, 0, 0, socket.SOL_TCP)
            for family, socktype, proto, name, ip in addr_info:
                if family == 2: #okay it's ipv4
                    ip, port = ip
                    processed_q.put((ip, domain))
                elif family == 10: #okay it's ipv6
                    ip, port, no_1, no_2 = ip
                    processed_q.put((ip, domain))
        except:
            pass
            #print 'Socket Error'

        domains_q.task_done() 
```

编辑： domain = domain_q.get() 此行**阻塞，直到队列中的项目可用**。

当我在 300 个线程上运行它时，问题就来了，平均负载似乎还可以，但简单的 ls -la 需要 5 秒，而且一切都很慢。我哪里做错了？我应该使用异步还是多处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:49:52.220

你真的需要通过 300 个线程并行处理 300 个连接吗？我从未尝试过创建那么多线程，但这可能是个问题。这绝对不是解决问题的好方法。通常还有其他选择。首先，你不需要 300 个线程来监听 300 个连接。创建许多似乎可以在您的硬件和操作系统上运行的线程。使用单个线程从主队列中检索请求，然后将它们从[线程池](http://lethain.com/using-threadpools-in-python/)传递给线程。

顺便说一句，如果队列为空，请检查您的“从队列中检索”操作是否真的阻塞并等待。如果没有，则循环可能一直执行，而不取决于是否有传入请求。

您可能真正需要的是套接字的非阻塞模式以及诸如`select.select()`等到您的一个套接字准备好读取或写入的东西。您可以自己编写该代码。如果您不急于这样做，可能一个好的异步网络库（如`gevent`（或`twisted`））可以帮助改进程序的体系结构。利用多核 CPU 的全部功能是一个单独的问题，但我听说有一些解决方案，至少对于`gevent`（它们基于`gunicorn`运行多个进程；没试过）。但我认为您遇到的问题不是执行速度，而是需要一次有效地等待许多对象的 I/O。如果是这样，请避免为此目的大量使用线程，它通常不仅在 Python 中无效，甚至在更适合多线程编程的没有[GIL的语言中也是无效的。](http://en.wikipedia.org/wiki/Global_Interpreter_Lock)`multiprocessing`避免了 GIL 但增加了自己的执行成本，所以我建议不要在这里使用它。

# three.js - 获取包含在网格中的文本

> ID：15342157
> 
> 赞同：1
> 
> 时间：2013-03-11T15:16:20.783
> 
> 标签：three.js, webgl

我的 webGL 代码需要一些帮助。我创建了一个 TextGeometry 并将其包含在网格中，对此我没有任何问题。但是，我想在不创建另一个 TextGeometry 的情况下更新此文本。

实际上，我的主要目标是翻译文本（从右到左）并在他到达左侧时使其消失，但只能逐个字符（如淡入淡出效果）。

我尝试了一些尝试：例如，根据文本位置，用 : 删除它 `scene.remove(text)` 并创建另一个与之前相同的文本减去第一个字符。我不知道我是否清楚......但是这个解决方案使我的应用程序非常慢：这就是为什么我不想每次都创建一个对象，而只是更新他的文本属性。

我在 three.js 文档中没有找到很多帮助，你能帮我看看吗？干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:48:58.637

你可以试试这个：

创建一个 PlaneGeometry 并使用包含您的文本的隐藏画布对象中的图像对其进行纹理化，然后将图像变换应用到画布本身（根据需要淡化）并在 Three.js 中随着它在场景中移动而不断更新纹理。

有关如何将画布对象用作（文本）图像的示例，我在以下位置发布了一个示例：http: [//stemkoski.github.com/Three.js/Texture-From-Canvas.html](http://stemkoski.github.com/Three.js/Texture-From-Canvas.html)

# jquery - jQuery 对话框设置单选检查问题

> ID：15342158
> 
> 赞同：1
> 
> 时间：2013-03-11T15:16:23.847
> 
> 标签：jquery, jquery-ui, dialog, radio-button

我有一个问题，我想记住 jQuery UI 对话框弹出窗口中选中的单选按钮。

我遇到了一些奇怪的行为，所以我在 JSFiddle 中对其进行了模拟。小提琴在创建时基本上随机选择 3 个收音机选项之一。然而，它很快就会停止工作。

我也尝试过使用和不使用 removeAttr('checked') 的行。

您将需要单击打开对话框并关闭它几次才能看到它停止工作。我一直在最新版本的 Chrome 中对此进行测试。

[http://jsfiddle.net/t8kN7/5/](http://jsfiddle.net/t8kN7/5/)

HTML

```
<div id="dialog" style="display:none;">

<input type="radio" class="left" name="rentFrequency" value="1" />
<span class="left">&#160;Monthly&#160;&#160;&#160;</span>

<input type="radio" class="left" name="rentFrequency" value="2" />
<span class="left">&#160;Quarterly&#160;&#160;&#160;</span>

<input type="radio" class="left" name="rentFrequency" value="3" />
<span class="left">&#160;Annualy&#160;&#160;&#160;</span>                                

</div>

<input type="button" name="dialogOpen" value="Open Dialog" />
<input type="text" name="randVal" value="" readonly="readonly" /> 
```

Javascript

```
$(document).ready(function() {

$('input[name="dialogOpen"]').click(function(){
    $("#dialog").dialog({
        title: 'Additional Tenancy Information',
        resizable: false,
        width: 530,
        show: { effect:'fade', duration:500 },
        hide: { effect:'fade', duration:400},           
        modal: true,
        close: function (event, ui) {
        },
        open: function (event, ui) {
            var randval=Math.floor(Math.random()*3)+1
            console.log(randval); 
            $('input[name="randVal"]').val(randval);
            $('input[name="rentFrequency"]').removeAttr('checked');
            $('input[name="rentFrequency"][value="'+randval+'"]').attr('checked', 'checked');
        }
    });
});
}); 
```

这实际上是相同的代码，只是没有弹出对话框，它的行为符合预期：

[http://jsfiddle.net/W6rFh/1/](http://jsfiddle.net/W6rFh/1/)

一直点击 RUN

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T15:37:08.970

跟进我的评论。将 attr 实例更改为 prop

```
$('input[name="randVal"]').val(randval);
$('input[name="rentFrequency"]').prop("checked", false);
$('input[name="rentFrequency"][value="'+randval+'"]').prop("checked", true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:22:03.290

您应该只创建一次对话框。

在这种情况下，我建议您立即创建对话框，但将`autoOpen`属性设置为`false`.

在点击处理程序中，您可以调用：

```
$('#dialog').dialog('open'); 
```

此时它将具有与您关闭它时相同的状态。

显然，您还应该删除代码以在`open:`处理程序中设置随机状态。

# java - 使用字节流在客户端 Web 浏览器上播放服务器上的视频

> ID：15342160
> 
> 赞同：1
> 
> 时间：2013-03-11T15:16:33.920
> 
> 标签：java, html, jsp

我想在网络浏览器中播放视频。下面的 html 代码在 Google crome 中运行良好，但在 IE 和 firefox 中不起作用。我从服务器上的 c:/ 获取一个 .avi 文件，并将其转换为字节流并发送字节作为响应。

在此处输入代码

```
 <html>
    <body>
    <object id="MediaPlayer" width="192" height="146" classid="CLSID:22D6F312-B0F6-11D0-94AB-0080C74C7E95" standby="Loading Windows Media Player components..." type="application/x-oleobject">
    <param name="SRC" value="dg">                
    <param name="ShowControls" value="false">
    <param name="ShowStatusBar" value="false">
    <param name="ShowDisplay" value="false">
    <param name="autostart" value="true">
    <embed type="application/x-mplayer2" src="http://125.60.35.36:8888/sa/jsp/common/showVideo.jsp?path=library/2013/Video/sample_1362996503283.avi" name="MediaPlayer" width="400" height="300" showcontrols="1" showstatusbar="0" showdisplay="0" autostart="0"> 
   </object>
   </body>
   </html> 
```

在此处输入代码

```
String filePath = "c:/sa/documents/"+request.getParameter("path");
System.out.println(filePath);
InputStream is=new FileInputStream(filePath);
OutputStream os=response.getOutputStream();
//OutputStream os=new FileOutputStream("c:/test.avi");
byte b[]=IOUtils.toByteArray(is);
os.write(b,0,b.length);
os.close();
is.close(); 
```

# ios - Sql 语句的嵌套

> ID：15342161
> 
> 赞同：0
> 
> 时间：2013-03-11T15:16:34.380
> 
> 标签：ios, sqlite

嗨，我在我的应用程序委托中创建了一个函数来删除我的数据库的冗余，我不确定我的编码是否正确，因为我必须执行 SQL 语句的嵌套以找出数据库中的错误。

任何人都可以建议我哪里错了，因为应用程序在模拟器中运行良好并且在设备中崩溃。

我什至不确定将 finalize 和 sqlite3_close 放在哪里。请帮助

```
 -(void) removeRedundancy2
    {
        NSArray *docPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        dbPathString = [[docPaths objectAtIndex:0] stringByAppendingPathComponent:@"turfnutritiontool_ver_99.db"];
        sqlite3_stmt *selectStmt;
        sqlite3_stmt *selectStmt1;
        BOOL isMyFileThere = [[NSFileManager defaultManager] fileExistsAtPath:dbPathString];

        if (isMyFileThere)
        {
            if (sqlite3_open([dbPathString UTF8String], &database1)==SQLITE_OK)
            {
                // TO REMOVE FROM from tnt_scenario_product when NO ProductID Found

                NSString *querySql2= [NSString stringWithFormat:@"SELECT productid from tnt_scenarioproduct"];
                const char* query_sql2 = [querySql2 UTF8String];

                if(sqlite3_prepare_v2(database1, query_sql2, -1, &selectStmt, NULL) == SQLITE_OK)
            {
                while (sqlite3_step(selectStmt) == SQLITE_ROW)
                {
                    int productid =  sqlite3_column_int(selectStmt, 0);
                    // NSLog(@"ProductId1 =%d",productid);

                    NSString *querySql21= [NSString stringWithFormat:@"SELECT productid from tnt_productcontent WHERE productid = %d",productid];
                    const char* query_sql21 = [querySql21 UTF8String];

                    if(sqlite3_prepare_v2(database1, query_sql21, -1, &selectStmt1, NULL) == SQLITE_OK)
                    {
                        if (sqlite3_step(selectStmt1) == SQLITE_ROW)
                        {
                            // DO NOTHING
                        }
                        else
                        {   // to delete scenario without product id
                            NSLog(@"Delete this Product from TPC 2 %d",productid);
                            NSString *querydelete2= [NSString stringWithFormat:@"DELETE from tnt_scenarioproduct WHERE productid = %d",productid];

                            const char* query_delete2 = [querydelete2 UTF8String];
                            char *error;
                            sqlite3_exec(database1, query_delete2, NULL, NULL, &error);
                            NSLog(@"error=%s ",error);
                            sqlite3_finalize(selectStmt1);
                        }
                    }
                    sqlite3_finalize(selectStmt1);
                    sqlite3_close(database1);

                }
                sqlite3_finalize(selectStmt);
            }
            sqlite3_close(database1);
        }
        sqlite3_close(database1);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:25:56.973

调用后`sqlite3_open`，您*必须*只调用`sqlite3_close`一次该连接。在调用之后`sqlite3_prepare_v2`，您*必须*只调用`sqlite3_finalize`该语句一次。

```
if (sqlite3_open([dbPathString UTF8String], &database1)==SQLITE_OK)
{
    ...
    if(sqlite3_prepare_v2(database1, query_sql21, -1, &selectStmt1, NULL) == SQLITE_OK)
    {
        ...
    }
    sqlite3_finalize(selectStmt);
    ....
}
sqlite3_close(database1); 
```

此外，您不应`selectStmt`为两个不同的查询重复使用相同的变量 ( )，以防止混淆其生命周期。

# java - 使用与子类构造函数不同的参数调用基构造函数

> ID：15342165
> 
> 赞同：1
> 
> 时间：2013-03-11T15:16:42.547
> 
> 标签：java, generics, constructor

我确定这是重复的，但我的搜索关键字太常见了......我得到了很多点击，因为我不寻找的东西。我来自 C#，Java 泛型似乎有点落后于 .NET 实现，所以这对我来说非常令人沮丧。

我有一个抽象类 BaseRepository 像这样：

```
public abstract class BaseRepository<T, K> implements Repository<T, K> {

    private Class<T> type;
    private Class<K> keyType;

    public BaseRepository(Class<T> clazz, Class<K> kClazz) {
        type = clazz;
        keyType = kClazz;
    }

    protected Class<T> getType() {
        return type;
    }

    protected Class<K> getKeyType(){
        return keyType;
    }
} 
```

现在我想从我的基类派生出`EmployeeRepository`这样的：

```
public class EmployeeRepository extends BaseRepository<Employee, UUID>{

} 
```

使用 c#，我不需要付出如此巨大的努力来实例化基类，但似乎 java 的泛型实现需要您在构造函数中传递泛型类型。

那么如何为我的`EmployeeRepository`类创建一个无参数构造函数，以实例化具有实体类型`Employee`和键类型的基类`UUID`？我希望能够这样写：

```
EmployeeRepository foo = new EmployeeRepository(); 
```

...并让它用`Class<Employee>`and实例化抽象类`Class<UUID>`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T15:18:40.567

AFAIK，除了从默认的子类构造函数调用超类构造函数之外，没有其他办法，因此：

```
public EmployeeRepository() {
    super(Employee.class, UUID.class);

    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:23:25.063

您可以使用反射来确定泛型参数的类型。

```
public abstract class BaseRepository<T, K> implements Repository<T, K> {

    private Class<T> type;
    private Class<K> keyType;

    public BaseRepository() {
        Type[] actualTypes = ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments();
        this.type = (Class<T>)actualTypes[0];
        this.keyType = (Class<K>)actualTypes[1];
    }

    protected Class<T> getType() {
        return type;
    }

    protected Class<K> getKeyType(){
        return keyType;
    }
} 
```

然而，真正的问题是：你为什么要拥有这些类型？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:24:45.493

作为替代方案，使用[Builder](http://en.wikipedia.org/wiki/Builder_pattern)模式：

```
public class EmployeeRepository extends BaseRepository<Employee, UUID>{
   public static EmployeeRepository newInstance() {
       return new EmployeeRepository(Employee.class, UUID.class);
   }
   ...
}

EmployeeRepository foo = EmployeeRepository.newInstance(); 
```

# c# - 日期时间计算

> ID：15342166
> 
> 赞同：-2
> 
> 时间：2013-03-11T15:16:42.800
> 
> 标签：c#, asp.net, datetime

我遇到了一个烦人的问题。我有两个日期时间变量。雇佣日期和终止日期。我需要得到工作天数。终止日期 - 就业日期。我该怎么做呢？

```
DateTime empDate = int.Parse((employeeEmploy.ElementAt(i).dateofEmpl).GetValueOrDefault().ToString("yyyyMMdd"));

DateTime terminDate = int.Parse((employeeEmploy.ElementAt(i).terminDate ).GetValueOrDefault().ToString("yyyyMMdd"));

int? dWorked = terminDate - empDate; 
```

我试过了，但没用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T15:19:41.257

好吧，您正在尝试处理`DateTime`值-因此您不应该`int.Parse`从一开始就使用它。使用`DateTime.ParseExact`. 获得两个`DateTime`值后，您可以使用减法得到 a `TimeSpan`，然后从中计算总天数：

```
DateTime employmentDate = ...;
DateTime terminationDate = ...;

TimeSpan employmentDuration = terminationDate - employmentDate;
int days = (int) employmentDuration.TotalDays; 
```

就我个人而言，我实际上会使用我的[Noda Time](http://noda-time.googlecode.com)项目来完成所有这些，请注意：

```
private static LocalDatePattern TextPattern = 
     LocalDatePattern.CreateWithInvariantInfo("yyyyMMdd");

...
LocalDate employmentDate = TextPattern.Parse(...).Value;
LocalDate terminationDate = TextPattern.Parse(...).Value;
int days = Period.Between(employmentDate, terminationDate, PeriodUnits.Days)
                 .Days; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T15:19:18.253

减去 DateTime 对象会产生[TimeSpan](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)。因此，用于`TimeSpan.TotalDays`获取两个日期之间的总天数：

```
int dWorked = (terminDate - empDate).TotalDays; 
```

**更新：**对于 LINQ to Enitites 使用[EntityFunctions.DiffDays](http://msdn.microsoft.com/en-us/library/dd412615.aspx)方法，该方法计算两个可空日期之间的天数：

```
from x in context.Foo
select EntityFunctions.DiffDays(x.FromDate, x.ToDate) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:26:12.697

您可以轻松地减去两个 Datetime，从而获得 TimeSpan！

```
 DateTime employmentDate = new DateTime(2013,03,8);
        DateTime terminationDate = new DateTime(2013,03,11);

        TimeSpan days = terminationDate - employmentDate;
        Console.WriteLine("Days: " + days.TotalDays); //Result: "Days: 3" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T15:19:16.153

尝试一些类似的东西

```
var numDays = (terminDate - empDate ).TotalDays;
dworked = (int)Math.Round(numDays, MidpointRounding.AwayFromZero); 
```

# lua - lua 调用 GetTickCount 分解

> ID：15342167
> 
> 赞同：1
> 
> 时间：2013-03-11T15:16:43.023
> 
> 标签：lua

我用lua调用windows API出现故障！看不懂，求救！平台：win7、lua5.1forwindows

```
<i>require "alien"

--alien.load("Dll.dll")
--print(alien.defalt)
--[[
def = alien.load("msvcrt.dll")
def.puts:types("int", "string")
def.puts("foo")

scanf = def.scanf
scanf:types("int", "string", "ref int", "ref double")
_, x, y = scanf("%i%lf", 0, 0)
print(x, y)
--]]

local Kernel32 = alien.load('kernel32.dll')
GetTickCount = Kernel32.GetTickCount
GetTickCount:types{ret = "ulong", "void", abi = "stdcall"}
local c = GetTickCount(nil)</i> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:28:00.140

你的代码过于复杂了。此代码段打印当前滴答计数：

```
require "alien"

local kernel = alien.load("kernel32.dll")
local ticks = kernel.GetTickCount
ticks:types({ret="ulong"})
print(ticks()) 
```

# jquery-ui - Jquery UI 中的 Jquery dragstart 和 dragend 事件

> ID：15342172
> 
> 赞同：11
> 
> 时间：2013-03-11T15:16:50.917
> 
> 标签：jquery-ui, drag-and-drop

有没有办法访问这两个事件？偶数存在吗？我必须在对象上设置传输`dragStart`数据。`dragEnd``event`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T15:22:25.013

查看：

拖动开始：[http ://api.jqueryui.com/draggable/#event-start](http://api.jqueryui.com/draggable/#event-start)

拖动停止：[http ://api.jqueryui.com/draggable/#event-stop](http://api.jqueryui.com/draggable/#event-stop)

您可以在两个函数调用中访问当前事件。

# javascript - 查询 Node.js HTTP 请求/响应和 URL 作为此 JSON 格式文档的主键

> ID：15342174
> 
> 赞同：0
> 
> 时间：2013-03-11T15:16:54.770
> 
> 标签：javascript, mongodb, database, nosql

我有一个使用 Node.js 从特定站点请求标头的脚本。

```
var http = require("http");
var fs = require("fs");

var hostNames = ['www.google.com'];

var options = {
            host: hostNames[i],
            path: '/'
    };

http.get(options, function(res) {

        var obj = {};
        obj.statusCode = res.statusCode;
        obj.headers = res.headers;

        console.log(JSON.stringify(obj, null, 4));
    }) 
```

URL“www.google.com”的输出将附在下面：

```
{
    "statusCode": 200,
    "headers": {
        "date": "Mon, 04 Mar 2013 16:43:39 GMT",
        "expires": "-1",
        "cache-control": "private, max-age=0",
        "content-type": "text/html; charset=ISO-8859-1",
        "set-cookie": [
            "PREF=ID=cfa31a2cae817ca6:FF=0:TM=1362415419:LM=1362415419:S=m-sNTevwPhFFWVpv; expires=Wed, 04-Mar-2015 16:43:39 GMT; path=/; domain=.google.com",
            "NID=67=AKMqJ9Q94GtcmF0kTOAOLgFLqz9XAnSwVe4jzzXFVhvxuxRJP_l9QEwbjR3F7d506thF9BURyGJUz5DuNTEzXesit50Dm7FlOoVuL2qGRt9XZwRMGjAlxL5heO4vIATp; expires=Tue, 03-Sep-2013 16:43:39 GMT; path=/; domain=.google.com; HttpOnly"
        ],
        "p3p": "CP=\"This is not a P3P policy! See http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657 for more info.\"",
        "server": "gws",
        "x-xss-protection": "1; mode=block",
        "x-frame-options": "SAMEORIGIN",
        "transfer-encoding": "chunked"
    }
} 
```

我的问题是关于 JSON 的。我正在尝试将输出存储到 MongoDB 中。MongoDB 存储类似 JSON 的文档。据我了解，基于 SQL 的数据库有一个主键。这就是我的困惑所在。我想使用 URL，在这种情况下，“www.google.com”作为主键。我如何实现这一目标？这是我第一次使用类似 JSON 的存储结构，我读过的多篇文章并不真正适用于我的具体情况。

当我在数据库中搜索“www.google.com”时，计划是在“www.google.com”下显示标题。我不知道——我想我仍然在思考 SQL 的思维方式。有人可以分享一些对此的见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:21:02.327

这是关于对象 ID的[官方文档。](http://docs.mongodb.org/manual/core/object-id/)

因此，您可以使用具有适当格式（十六进制数）和长度的任何内容为记录创建自己的对象 ID，这样就可以了

```
db.names.insert({"_id": new ObjectId("012345678901234567890123"), "name" : "my name" }) 
```

但这不是

```
db.names.insert({"_id": new ObjectId("my reallllly long string"), "name" : "my name" }) 
```

如果要在对象 id 处使用，则需要使用 url 的哈希值。

但是 mongo 为您提供了另一种选择。单独留下 _id 字段并为 url 创建 url 字段，然后在 url 字段上设置索引

```
db.scrapedPages.ensureIndex({ 'url': 1}) 
```

更新：更具体地说是您的示例。您不会设置/更改`_id`属性，mongo 会为您完成。相反，您将设置`url`要保存的文档属性，在这里使用的合理的东西是您的选项对象，因为它定义了您正在解析的页面。

所以我认为你最终会得到类似的东西（我希望你使用 mongo 本机驱动程序并打开 mongo 连接）

```
var options = {
        host: hostNames[i],
        path: '/'
};

http.get(options, function(res) {
    var obj = {
       url: options.host + options.path // or whatever else is 
       statusCode : res.statusCode,
       headers : res.headers
    }
    save(obj, function(err, objects) {
       if (err) console.warn(err.message);
    })
})

function save(doc, callback) {
    var collection = new mongodb.Collection(client, 'test_collection')
     , cb = callback || function() {}
    collection.insert(doc, {safe:true}, cb);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:16:16.130

SQL表`primary key`中的 是用于唯一标识特定行的列。在 mongodb`_id`中是作为主键的字段。`mongodb`如果您没有指定它会自动添加它并为其分配一个`ObjectId`（12 字节长的 BSON 标识符）。您可以在[此处](http://docs.mongodb.org/manual/core/object-id/)查看详细信息。

# matlab - 绘制微分方程图

> ID：15342178
> 
> 赞同：0
> 
> 时间：2013-03-11T15:17:18.760
> 
> 标签：matlab, plot

我有函数`sym`结果的变量`dsolve`，我想绘制这个表达式的图形。

我认为这样做的一种方法是创建一个时间数组 `t=0:0.001:10`和值数组，然后使用`plot(valuearray,t)` 但问题是如何从我的时间数组创建值数组`t`？
我是对的，还是有另一种可能性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:26:14.833

您可以使用[`ezplot`](http://www.mathworks.com/help/symbolic/ezplot.html)绘制从 获得的符号函数`dsolve`。

# c# - 返回的部分对象为空

> ID：15342181
> 
> 赞同：0
> 
> 时间：2013-03-11T15:17:24.650
> 
> 标签：c#, .net, asp.net-mvc, json, asp.net-web-api

我的 web api 控制器中有以下方法

```
public HttpResponseMessage PostGrantAccess(DeviceAccessRequest deviceAccessRequest)
{
    var deviceId = deviceAccessRequest.DeviceId;

    var deviceAccessResponse = new DeviceAccessResponse(deviceAccessRequest.RequestId)
        {
            Status = "OK"
        };
    var response = Request.CreateResponse<DeviceAccessResponse>(HttpStatusCode.OK, deviceAccessResponse);
    return response;
} 
```

这是调用客户端代码：

```
using (var client = new HttpClient())
{
    client.BaseAddress = new Uri("http://localhost:55208/");

    var request = new DeviceAccessRequest
    {
        RequestId = Guid.NewGuid().ToString(),
        DeviceId = "bla",
        LoginId = "tester",
        Password = "haha" ,                    
    };
    var response = client.PostAsJsonAsync("api/accesspanel", request).Result;
    if (response.IsSuccessStatusCode)
    {
        var deviceAccessResponse = response.Content.ReadAsAsync<DeviceAccessResponse>().Result;

    }
} 
```

对象类：

```
public class DeviceAccessResponse : ResponseBase
{
    public DeviceAccessResponse()
    {
    }

    public DeviceAccessResponse(string correlationId)
        : base(correlationId)
    {
    }

    public string Status { get; set; }
}

public class ResponseBase
{
    private string correlationId;

    public ResponseBase()
    {
    }

    public ResponseBase(string correlationId)
    {
        this.correlationId = correlationId;
    }
} 
```

我能够在我的控制器中接收 DeviceAccessRequest 就好了，我能够获取 guid 字符串。

但是，在将响应返回给客户端后，我只能返回 Status = "OK"，correlationId 为空，而不是包含我在客户端代码中使用此行分配的 guid 字符串

```
var deviceAccessResponse = new DeviceAccessResponse(deviceAccessRequest.RequestId) 
```

我错过了什么？

是`response.Content.ReadAsAsync<DeviceAccessResponse>().Result;`用来重建我的整个对象的正确代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T15:20:15.030

你`correlationId`是一个私人领域。如果您希望它通过网络进行序列化，您可能需要创建一个公共属性来公开它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:21:14.203

`correlationId`如果您希望它被暴露并前往客户，您应该将其设为公共财产：

```
public class ResponseBase
{
    public ResponseBase()
    {
    }

    public string CorrelationId { get; set; }

    public ResponseBase(string correlationId)
    {
        this.CorrelationId = correlationId;
    }
} 
```

# java - 在java中通过命令执行vbs脚本命令

> ID：15342183
> 
> 赞同：0
> 
> 时间：2013-03-11T15:17:27.153
> 
> 标签：java, com, vbscript

我基本上想在java中执行一个VBS脚本。为了获得更好的信息和流控制，我想一次为一个 VB 命令执行此操作。由于该`cscript`工具仅执行整个脚本，因此无法使用。我试图让它与 Com4J 一起工作，但这真的很痛苦，因为我不知道脚本实际使用哪些 COM 对象。（例如编写 SAP-Gui 脚本）。有没有办法不生成一堆脚本，每个脚本只包含一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:56:09.193

使用[脚本控件](http://www.microsoft.com/en-us/download/details.aspx?id=1949)加载**一个****结构**合理的（函数、“只做一件事”的短子）脚本/库并调用/运行[选定](http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/179a5554-84c5-4f77-b358-76b73b563b82/)的项目。您还可以在您的 VBScript 代码中实现调度子/函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-17T12:56:49.593

这就是`test.vbs`使用 Java 触发的方式，即使您需要发送参数，您也可以给一个空格并添加参数...

```
Runtime.getRuntime().exec("wscript C://Users//Desktop//test.vbs" + " " + parameter1 
+ " " + parameter2); 
```

有关详细的示例访问：[这里](http://www.shabdd.com/sending-automated-mail-without-administrator-rights-on-windows-machine)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T15:34:01.987

假设你的 Java 程序在 Windows 机器上执行，试试这个：

```
Runtime.getRuntime().exec("path + MyVBScript.exe"); 
```

这假定您的 vbscript 已被编译为可执行文件。

或者：

```
Runtime.getRuntime().exec("path + Cscript + MyScript.vbs"); 
```

它使用 Windows 脚本主机。

路径是您的脚本或可执行文件的位置。

# c# - 奇怪的行为 CRM 2011 插件

> ID：15342187
> 
> 赞同：6
> 
> 时间：2013-03-11T15:17:41.407
> 
> 标签：c#, plugins, dynamics-crm-2011

我已经为我们的报价产品注册了一个插件。该插件在我们的测试环境中运行良好。我已经测试了很多次。然后在主服务器中注册插件。但是，会发生以下情况：当我首先创建或更新报价产品时，报价产品表单变灰：

![在此处输入图像描述](../Images/c3243e78db51cb2f4fad8db883e10678.png)

单击报价单后，出现错误。没有可用的日志文件（如您所见）。我调试了插件，但也没有错误。单击“确定”后，错误消失，并且在报价产品上发生了所需的业务（对于税字段）。意味着插件的代码没有错误并且可以很好地完成它的工作。代码如下：

```
using System;
using System.Diagnostics;
using System.Linq;
using System.ServiceModel;
using Microsoft.Xrm.Sdk;
using Xrm;
using System.Collections.Generic;
using Microsoft.Xrm.Sdk.Deployment;

public class Plugin : IPlugin
{
    public void Execute(IServiceProvider serviceProvider)
    {
        IPluginExecutionContext context = (IPluginExecutionContext)
        serviceProvider.GetService(typeof(IPluginExecutionContext));
        Entity entity;
        if (context.InputParameters.Contains("Target") &&
        context.InputParameters["Target"] is Entity)
        {
            entity = (Entity)context.InputParameters["Target"];
            if (entity.LogicalName != "quotedetail") { return; }
        }
        else
        {
            return;
        }
        try
        {
            IOrganizationServiceFactory serviceFactory =
                (IOrganizationServiceFactory)serviceProvider.GetService(
            typeof(IOrganizationServiceFactory));
            IOrganizationService service =
            serviceFactory.CreateOrganizationService(context.UserId);
            if (context.MessageName == "Create")
            {
                Entity QuoteProduct = (Entity)context.InputParameters["Target"];
                Guid QPID = QuoteProduct.Id;
                TaxCreator(service, QPID);
            }
            if (context.MessageName == "Update" && context.Depth < 3)
            {
                Entity QuoteProduct = (Entity)context.PostEntityImages["Target"];
                Guid QPID = QuoteProduct.Id;
                TaxUpdater(service, QPID);
            }
        }
        catch (FaultException<OrganizationServiceFault> ex)
        {
            throw new InvalidPluginExecutionException(
            "An error occurred in the plug-in.", ex);
        }
    }
    private static void TaxCreator(IOrganizationService service, Guid QPID)
    {
        using (var crm = new XrmServiceContext(service))
        {
            var QuoteProduct = crm.QuoteDetailSet.Where(c => c.QuoteDetailId == QPID).First();
            var SaleSetting = crm.new_salessettingSet.Where(c => c.statecode == 0).First();
            double TaxPercent = (Convert.ToDouble(SaleSetting.new_TaxPercent) / 100);
            if (QuoteProduct.IsPriceOverridden == false)
            {
                decimal Tax = (decimal)Convert.ToDecimal(Convert.ToDouble(QuoteProduct.BaseAmount - QuoteProduct.ManualDiscountAmount.GetValueOrDefault()) * TaxPercent);
                decimal PricePerUnit = (decimal)(QuoteProduct.PricePerUnit.GetValueOrDefault() - QuoteProduct.VolumeDiscountAmount.GetValueOrDefault());
                crm.UpdateObject(QuoteProduct);
                crm.SaveChanges();
                QuoteProduct.Attributes["tax"] = new Money(Tax);
                QuoteProduct.Attributes["new_result"] = new Money(PricePerUnit);
                crm.UpdateObject(QuoteProduct);
                crm.SaveChanges();
            }
        }
    }
    private static void TaxUpdater(IOrganizationService service, Guid QPID)
    {
        using (var crm = new XrmServiceContext(service))
        {
            var QuoteProduct = crm.QuoteDetailSet.Where(c => c.QuoteDetailId == QPID).First();
            var SaleSetting = crm.new_salessettingSet.Where(c => c.statecode == 0).First();
            double TaxPercent = (Convert.ToDouble(SaleSetting.new_TaxPercent) / 100);
            if (QuoteProduct.IsPriceOverridden == false)
            {
                decimal Tax = (decimal)Convert.ToDecimal(Convert.ToDouble(QuoteProduct.BaseAmount - QuoteProduct.ManualDiscountAmount.GetValueOrDefault()) * TaxPercent);
                decimal PricePerUnit = (decimal)(QuoteProduct.PricePerUnit.GetValueOrDefault() - QuoteProduct.VolumeDiscountAmount.GetValueOrDefault());
                crm.UpdateObject(QuoteProduct);
                crm.SaveChanges();
                QuoteProduct.Attributes["tax"] = new Money(Tax);
                QuoteProduct.Attributes["new_result"] = new Money(PricePerUnit);
                crm.UpdateObject(QuoteProduct);
                crm.SaveChanges();
            }
        }
    }
} 
```

我还检查了服务器上的事件查看器是否有错误，但没有结果！我已经在创建和更新报价产品时注册了我的插件。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:19:55.133

```
 public void Execute(IServiceProvider serviceProvider)
    {
        IPluginExecutionContext context = (IPluginExecutionContext)serviceProvider.GetService(typeof(IPluginExecutionContext));
        Entity entity;
        if (context.InputParameters.Contains("Target") && context.InputParameters["Target"] is Entity)
        {
            entity = (Entity)context.InputParameters["Target"];
            if (entity.LogicalName != "quotedetail") { return; }
        }
        else
        {
            return;
        }

        try
        {
            IOrganizationServiceFactory serviceFactory = (IOrganizationServiceFactory)serviceProvider.GetService(typeof(IOrganizationServiceFactory));
            IOrganizationService service = serviceFactory.CreateOrganizationService(context.UserId);
            QuoteDetail QuoteProduct = ((Entity)context.InputParameters["Target"]).ToEntity<QuoteDetail>();
            if (context.MessageName == "Create" || context.MessageName == "Update")
                // && context.Depth < 3) //try to avoid depth unless you have to have it
            {
                TaxSetter(service, QuoteProduct);
            }
        }
        catch (FaultException<OrganizationServiceFault> ex)
        {
            throw new InvalidPluginExecutionException( "An error occurred in the plug-in.", ex);
        }
    }

    private static void TaxSetter(IOrganizationService service, QuoteDetail product)
    {
        using (var crm = new TrainingContext(service))
        {
            var QuoteProduct = product.ToEntity<QuoteDetail>();
            if (QuoteProduct.IsPriceOverridden == false)
            {
                double TaxPercent = Convert.ToDouble(50 / 100);
                decimal Tax = (decimal)Convert.ToDecimal(Convert.ToDouble(QuoteProduct.BaseAmount - QuoteProduct.ManualDiscountAmount.GetValueOrDefault()) * TaxPercent);
                decimal PricePerUnit = (decimal)(QuoteProduct.PricePerUnit.GetValueOrDefault() - QuoteProduct.VolumeDiscountAmount.GetValueOrDefault());

                QuoteProduct.Tax = Tax; //depending on how you the parameters passed into CrmSvcUtil
                QuoteProduct.Attributes["new_result"] = new Money(PricePerUnit); //same deal here

                //crm.UpdateObject(QuoteProduct);
                //crm.SaveChanges();
                //code not needed, the Plugin context will take care of this for you
            }
        }
    } 
```

这个想法是，您希望您的插件上下文为您工作；你想尽可能少做。我改变了税收计算，因为我没有你的属性；你会想把它们改回来。如果我仍然误读了您的问题，我很乐意删除我的帖子（或尝试）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T19:18:14.890

我会对其进行shot弹枪调试。实现以下跟踪。通常，我将跟踪器的声明放置为类成员（因此它对类中的所有帮助方法都可见）并在每次操作后（或多或少）写入它（当绝望和沮丧时）。然后，当程序自行崩溃时（或者当我故意让它崩溃以查看跟踪日志时），我通常可以查明问题区域。

```
public class MyPlugin _ IPlugin
{
  private ITracingService _trace;

  public void Execute(IServiceProvider service)
  {
    _trace = (ITracingService)service.GetService(typeof(ITracingService));
    _trace.Trace("Commencing.");
    ...
    _trace.Trace("Right before an operation. " + someValue);
    PerformAnOperation();
    _trace.Trace("Right before an other operation. " + someOtherValue);
    PerformAnOtherOperation();
    ...
    throw new Exception("Intentional!");
  }
} 
```

的，您可以继续查看问题的确切来源。以我的经验，一旦知道痛**在哪里**，就可以很容易地建议如何解决这个问题。

编辑：

由于 OP 要求提供更多详细信息，因此我正在使用他的代码并将跟踪算法放入其中。有点多余，但显然，CRM 可能非常令人困惑。我自己去过那里。

```
public class Plugin : IPlugin
{
  // Here we declare our tracer.
  private ITracingService _trace;

  public void Execute(IServiceProvider serviceProvider)
  {
    // Here we create it.
    _trace = (ITracingService)serviceProvider
      .GetService(typeof(ITracingService));
    _trace.Trace("Commencing.");

    // Here we crash our plugin just to make sure that we can see the logs 
    // with trace information. This statement should be gradually moved down
    // the code to discover where exactly the plugin brakes.
    throw new Exception("Intentional!");

    IPluginExecutionContext context = (IPluginExecutionContext)serviceProvider
      .GetService(typeof(IPluginExecutionContext));
    Entity entity;
    ...

    try { ... }
    catch (FaultException<OrganizationServiceFault> ex)
    {
      throw new InvalidPluginExecutionException(
        "An error occurred in the plug-in.", ex);
    }

    // Here we catch all other kinds of bad things that can happen.
    catch(Exception exception) { throw exception; }
  }

  private static void TaxCreator(IOrganizationService service, Guid QPID)
  {
    // Here we add a line to the trace hoping that the execution gets here.
    _trace.Trace("Entered TaxCreator.");

    using (var crm = new XrmServiceContext(service))
    {
      var QuoteProduct = crm.QuoteDetailSet.Where(...).First();
      var SaleSetting = crm.new_salessettingSet.Where(...).First();
      double TaxPercent = (Convert.ToDouble(...) / 100);

      // Here we add a line to the trace to see if we get past this point.
      _trace.Trace("Approaching if statement.");

      if (QuoteProduct.IsPriceOverridden == false) { ... }
    }
  }

  private static void TaxUpdater(IOrganizationService service, Guid QPID)
  {
    // Here we add a line to the trace hoping that the execution gets here.
    _trace.Trace("Entered TaxUpdater.");

    ...
  }
} 
```

# extjs - 如何重命名 extjs 4 树中的节点

> ID：15342188
> 
> 赞同：1
> 
> 时间：2013-03-11T15:17:42.913
> 
> 标签：extjs, extjs4

嗨朋友们，我是 extjs 4 的新手，`how to rename of extjs 4 tree node`请给我一个建议，并给我一个参考。
下面的树面板代码

```
var treePanel = Ext.create('Ext.tree.Panel', {
    id: 'tree-panel',
    title: 'Taxonomy',
    region: 'west',
    collapsible: true,
    split: true,
    //multiSelect: true,                            
    height: '100%',
    width: '20%',
    minWidth: 100,
    rootVisible: false,
    autoScroll: true,
    store: store,
    viewConfig: {
        allowCopy: true,

        plugins: {
            ptype: 'treeviewdragdrop',
            appendOnly: true,
            ddGroup: 'selDD'
        }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:41:15.650

只需将列配置和编辑器添加到单个列，这就是我认为它在您的代码中的工作方式：

```
var treePanel = Ext.create('Ext.tree.Panel', {
    id: 'tree-panel',
    title: 'Taxonomy',
    region:'west',
    collapsible: true,
    split: true,
    //multiSelect: true,                            
    height:'100%',       
    width: '20%',
    minWidth: 100,
    rootVisible: false,
    autoScroll: true,
    store: store,
    viewConfig: {
    allowCopy: true,

    plugins: {
        ptype: 'treeviewdragdrop',
        appendOnly: true,
        ddGroup:    'selDD'
    },
    columns: [
       {
           xtype:     "treecolumn",
           dataIndex: "text",
           flex:      1,
           editor:{
               xtype:      "textfield"
           }
       }
    ]
} 
```

# youtube - 为什么 Youtube 在尝试获取编辑链接时会出现 NullPointerException

> ID：15342192
> 
> 赞同：0
> 
> 时间：2013-03-11T15:17:48.043
> 
> 标签：youtube, youtube-api

```
String atomXml = "<?xml version='1.0'?>" +
"<entry xmlns='http://www.w3.org/2005/Atom' xmlns:gd='http://schemas.google.com/g/2005' gd:fields='yt:accessControl' xmlns:yt='http://gdata.youtube.com/schemas/2007'>" +
"<yt:accessControl action='comment' permission='denied'/>"+
"<yt:accessControl action='rate' permission='denied'/></entry>";
System.out.println("Dsiabling Comments and Rating");
GDataRequest request = service.createPatchRequest(new URL(entry.getEditLink().getHref()));
request.getRequestStream().write(atomXml.getBytes("UTF-8"));
request.execute();
System.out.println("Dsiabling Comments and Rating COMPLETED"); 
```

在上面的代码条目中是一个 VideoEntry，它是通过将视频上传到 YouTube 来重新调整的。但是当我尝试代码时，它会抛出一个空指针异常。对此的任何修复。如果有任何其他设置评论和评级的方式也可以禁用它。视频发布后，我会执行以下操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:55:53.487

```
String updateUrl = "https://gdata.youtube.com/feeds/api/users/default/uploads/"+videoId;    
VideoEntry _entry = service.getEntry(new URL(updateUrl), VideoEntry.class);
VideoEntry vToDel = service.getEntry(new URL(_entry.getEditLink().getHref()), VideoEntry.class);
vToDel.delete(); 
```

如果您想删除或更新视频，您不能直接从上传的 VideoEntry 的编辑链接中获取它。您需要使用相同的视频 ID 查询新的视频条目。并使用它来更新或删除。

# unit-testing - 使用 Nancy.Testing.Browser 发布时发生 ConfigurableBootstrapper 错误

> ID：15342196
> 
> 赞同：3
> 
> 时间：2013-03-11T15:18:03.443
> 
> 标签：unit-testing, nancy

我有一个简单的 NancyModule 声明了一个 Post ：

```
Post["/Car/New"] = args => 
{
    Car newCar = this.Bind<Car>();
    newCar = _carRepos.CreateNewCar(newCar);
    return Response.AsJson<Car>(newCar);
}; 
```

从视图发布到此效果很好：

```
<form action="/Car/New" method="post">
    <input type="text" name="colour" />
    <input type="submit" value="Submit" />
</form> 
```

当我尝试对此路线进行测试时，我收到以下错误：

```
System.Exception : ConfigurableBootstrapper Exception
  ----> Nancy.RequestExecutionException : Oh noes!
  ----> System.MissingMethodException : Method not found: '!!0 Nancy.ModelBinding.ModuleExtensions.Bind(Nancy.INancyModule, System.String[])'.
Result StackTrace:  
at Nancy.Testing.PassThroughStatusCodeHandler.Handle(HttpStatusCode statusCode, NancyContext context)
at Nancy.NancyEngine.CheckStatusCodeHandler(NancyContext context)
at Nancy.NancyEngine.HandleRequest(Request request, Func`2 preRequest)
at Nancy.NancyEngine.HandleRequest(Request request)
at Nancy.Testing.Browser.HandleRequest(String method, String path, Action`1 browserContext)
at Nancy.Testing.Browser.Post(String path, Action`1 browserContext)
at Shopr.Tests.Cars.CarTests.PostNewCarReturnsCar() in c:\Users\*******\Documents\Visual Studio 2012\Projects\Shopr\Shopr.Tests\Cars\CarTests.cs:line 35
--RequestExecutionException
at Nancy.NancyEngine.InvokeOnErrorHook(NancyContext context, ErrorPipeline pipeline, Exception ex)
--MissingMethodException
at Shopr.Api.Modules.CarsModule.<.ctor>b__3(Object args)
at Nancy.Routing.Route.Invoke(DynamicDictionary parameters)
at Nancy.Routing.DefaultRouteInvoker.Invoke(Route route, DynamicDictionary parameters, NancyContext context)
at Nancy.Routing.DefaultRequestDispatcher.Dispatch(NancyContext context)
at Nancy.NancyEngine.InvokeRequestLifeCycle(NancyContext context, IPipelines pipelines) 
```

这是我的测试：

```
[Test]
public void PostNewCarReturnsCar()
{
    var browser = BrowserFactory.Create();
    var response = browser.Post("/Car/New", with =>
    {
        with.FormValue("Colour", "Red");
    });

    var car = GetObjectFromJsonBody(response.Body.AsString());

    Assert.IsNotNull(car);
    Assert.AreEqual(2, car.Id);
} 
```

这是我的测试引导程序：

```
public class NancyBootstrapper : ConfigurableBootstrapper
{
    public NancyBootstrapper()
        : base(with => { with.Module<CarsModule>(); })
    { }

    protected override void ConfigureApplicationContainer(TinyIoCContainer container)
    {
        container.Register<ICarRepository>(new FakeData.CarRepository());
    }
} 
```

我是否必须在我的 ConfigurableBootstrapper 中做任何特别的事情才能使绑定工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T15:44:03.740

仔细检查您的 packages.config 是否提取了正确的版本。

**更新：**由于这主要来自@StevenRobbins，我奖励了他的背部：

![在此处输入图像描述](../Images/7d0a8af4afc6cbeac8b113048e52b7ec.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T15:42:32.373

@Jon 检查 packages.config 的建议是正确的。尽管使用相同的方法在几分钟内添加了软件包，但测试项目的 Nancy 版本比 Web 项目的版本旧。更新到正确的版本，现在可以正常工作了。

# javascript - 无法让我的菜单与“StickyPanel”一起使用

> ID：15342197
> 
> 赞同：0
> 
> 时间：2013-03-11T15:18:03.633
> 
> 标签：javascript, jquery, html, plugins

我对创建网站有点陌生，所以请耐心等待。

我刚刚开始了一个新项目，我想要一个在滚动时跟随的菜单，然后在到达页面顶部时停止。我发现了一个非常酷的 JavaScript 插件，名为`"StickyPanel"`( [https://code.google.com/p/sticky-panel/](https://code.google.com/p/sticky-panel/) )，但它不会合作。显然没有说明，我在其他地方找不到任何有用的信息。

代码非常简单：

```
<script src="js/jquery.js"></script>
<script src="js/jquery.stickyPanel.min.js"></script>

<!-----Sticky Panel------>

<script type="text/javascript">
        $().ready(function () {

            var stickyPanelOptions = {
                afterDetachCSSClass: "",
                savePanelSpace: true
            };
            $("header").stickyPanel(stickyPanelOptions);
        });
    </script>

    <script>
        $(document).ready(function(){
            $(".nav-button").click(function () {
            $(".nav-button,.menu").toggleClass("open");
            });    
        });
    </script>

<!-----Sticky Panel------> 
```

然后我创建了一个`div`名为“header”的类，然后设置了 header-menu 的样式。我无法让 JavaScript 对我的标题做任何事情。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:21:53.407

```
 $("header").stickyPanel(stickyPanelOptions); 
```

您向 Jquery 询问 elemet 标头 您需要向 jquery 询问类标头 =>

```
 $(".header").stickyPanel(stickyPanelOptions); 
```

阅读有关它有用的选择器！

```
 <header> is a html5 element, support by almost all browser but dont forget display: block in css! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:24:04.297

`$(".header")`使用而不是选择您的 div`$("header")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:30:18.267

如果您不想使用此插件，还有另一种方法。在互联网的某个地方找到了这段代码。它使用`position:fixed`css风格，简单的js

**javascript**

```
<script type="text/javascript">
    window.onload = function () { 
    $(window).scroll(function () {
    var e = $("#StickyPanel"); 
    if (document.documentElement.scrollTop >= 602 || window.pageYOffset >= 602) { 
    if ($.browser.msie && $.browser.version == "6.0") 
    { 
    e.css("top", document.documentElement.scrollTop + 15 + "px") } 
    else { 
    e.css({ position: "fixed", top: "1%" }) } } 
    else if (document.documentElement.scrollTop < 602 || window.pageYOffset < 602) 
    {            
     e.css({ position: "absolute", top: "91%" }) } }) }
     </script> 
```

**css**

```
#search
{
  position: absolute;
  top: 91%;
 } 
```

只需更改值

> 602

根据您的需要

希望能帮助到你。

这就是您所要求的： **JSFIDDLE** [jsfiddle 演示](http://jsfiddle.net/hx33N/)

# svn - svn: Can't set permissions on '?\128': 没有这样的文件或目录

> ID：15342198
> 
> 赞同：1
> 
> 时间：2013-03-11T15:18:05.960
> 
> 标签：svn, permissions, collabnet

当做一个

`svn co`

或者

`svn up`

从我的 HP-UX 11.00 到我们的 Windows CollabNet Subversion，使用从 subversion-deps 包 1.6.20 编译的 subversion，我得到：

`svn: Can't set permissions on '?\128': No such file or directory`

我的仓库中没有这样奇怪的文件名，我可以毫无问题地从另一台主机上签出。

如果我打电话，这似乎是一个随机错误

`svn up`

在每个错误之后一次又一次地，整个回购被部分检查。我在 Linux svn 服务器上也遇到了这些错误，所以问题似乎出在客户端。

我解决了使用 deps 包安装 subversion-1.6.1 的问题。

# c++ - 从 CScrollBar 获取所有位置值

> ID：15342203
> 
> 赞同：0
> 
> 时间：2013-03-11T15:18:16.333
> 
> 标签：c++, windows, mfc

尝试`CScrollBar`在我的 Windows7 的 MFC C++ 应用程序中使用。

我收到所有消息都很好，并且有一个看起来像这样的处理程序：

```
void Dialog::OnHScroll(UINT nSBCode, UINT apos, CScrollBar* pScrollBar)
{    
    SCROLLINFO si;
    si.cbSize = sizeof( si );
    si.fMask = SIF_TRACKPOS;
    m_slider.GetScrollInfo(&si,SIF_TRACKPOS|SIF_POS|SIF_PAGE);
    int nTrackPos = si.nTrackPos; //0 except on TB_THUMBTRACK
    int nPos = si.nPos; //0 except on TB_THUMBTRACK
    UINT nPage = si.nPage; //seems correct always but I dont need it 
```

我尝试使用提取位置的原因`GetScrollInfo`是因为它们可能比适合 16 位 var 的更大，因此我不能使用传递的 pos 作为参数。

然而，我的问题是，我只有在拖动栏并接收到拖动操作`TB_THUMBTRACK`的结尾时才获得有效位置。`TB_ENDTRACK`如果我单击滚动条或在每一端使用箭头，则所有位置（参数 pos 和`SCROLLINFO`结构中除 page 之外的所有内容）都将为 0。

有谁知道如何获得所有消息的正确位置？即`TB_LINEUP, TB_LINEDOWN`等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T07:53:57.323

查看 MSDN 中显示的 WM_HSCROLL 事件处理程序的示例代码：

[MSDN 文档](http://msdn.microsoft.com/en-us/library/e14hhbe6%28v=vs.110%29.aspx)

# android - 为 Android 平台编译带有线程支持的 x264

> ID：15342205
> 
> 赞同：0
> 
> 时间：2013-03-11T15:18:16.997
> 
> 标签：android, android-ndk, pthreads, x264, libx264

我一直在尝试为具有线程支持的**Android编译****x264** ……但没有成功……

 **我已经设法在没有线程支持的情况下编译了它......配置命令如下：

```
./configure --prefix=$PREFIX \
--enable-pic \
--host=arm-linux \
--disable-cli \
--cross-prefix=$PREBUILT/bin/arm-linux-androideabi- \
--sysroot=$PLATFORM 
```

在哪里`PREBUILT=$NDK/toolchains/arm-linux-androideabi-4.7/prebuilt/linux-x86`和 `PLATFORM=$NDK/platforms/android-14/arch-arm`

我也尝试过使用和不使用选项`--enable-static`and `extra-ldflags="-lpthread"`，但是当尝试时`make`它以错误结束。

有什么办法可以完成上述...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:17:26.313

似乎出现在`config.log`线程支持上下文中的错误是`cannot find lpthread`......通过手动`-lpthread`从`configure`文件中删除解决了这个问题。但是随后配置开始在测试中失败，其中包括`struct cpu_set_t`and `CPU_COUNT()`...

似乎某些`libc`函数和定义不包含在**Android NDK (R8D)**提供的代码中......在上述情况下和......`CPU_COUNT()`的定义`struct cpu_set_t`

上述解决方法是`sched.h`使用[最新版本](https://github.com/android/platform_bionic/blob/master/libc/include/sched.h)进行修补...... Android 问题列表中有一些错误报告描述了相同的问题，希望在下一个 NDK 版本中得到解决......

也`x264`可以通过包含选项来编译以包含“ARM Support Feature” `--extra-cflags="-mfloat-abi=softfp"`...**

# ios - touchesMoved 不适用于 UIBarButtonItem

> ID：15342223
> 
> 赞同：0
> 
> 时间：2013-03-11T15:19:10.147
> 
> 标签：ios, uibarbuttonitem, uitoolbar

我想通过触摸 UIBarButtonItem 并移动来创建滑动 UIToolbar。我阅读了一些主题，发现我必须实现 touchesMoved。但是哪里？我发现它的唯一地方是我位于 UIBarButtonItem 中的 UIButton。

这是 viewController **viewDidLoad**

```
self.toolbar = [[UIToolbar alloc] initWithFrame: CGRectMake(bounds.origin.x, bounds.size.height - 2.5*height, bounds.size.width, 2*height)];

SlideButton* infoButton = [SlideButton buttonWithType: UIButtonTypeDetailDisclosure];
UIBarButtonItem *slideButton = [[UIBarButtonItem alloc]initWithCustomView:infoButton];

self.toolbar.items = items;
[self.view addSubview:self.toolbar]; 
```

最奇怪的是，我试图将 UIButton 绑定到操作 (addTarget:action:forEvents) 它的工作原理，非常准确。但是我不能采取触摸的位置，因为我没有发生过事件，所以我不能使用这种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:35:32.230

您可以添加一个`UIPanGestureRecognizer`到您的工具栏。

它只识别平移手势（拖动）。在目标方法中，使用方法检查触摸是否在条形按钮的框架中，`CGRectContainsPoint(CGRect, point)`并首先触摸`if(UIGestureRecognizerStateBegan)`。

如果是，则在禁用拖动后启用`UIGestureRecognizerStateEnded or UIGestureRecognizerStateCancelled` 拖动。

# r - 在 R 的 data.table 中获取随机的内部 selfref 错误

> ID：15342227
> 
> 赞同：10
> 
> 时间：2013-03-11T15:19:18.760
> 
> 标签：r, data.table, setattribute

我喜欢 data.table，它既快速又直观，还有什么更好的呢？`data.table`唉，这是我的问题：当在循环中引用 a 时`foreach()`（使用`doMC`实现），我偶尔会收到以下错误： **EXAMPEN IN APPENDIX**

```
Error in { : 
  Internal error: .internal.selfref prot is not itself an extptr 
```

这里令人讨厌的问题之一是我无法让它以任何一致性重现，但它会在一些长时间（几个小时）的任务中发生，所以我想确保它永远不会发生，如果可能的话。

由于我在每个循环中都引用了相同的`data.table`, `DT`，因此我尝试在每个循环的开头运行以下命令：

```
setattr(DT,".internal.selfref",NULL) 
```

...删除无效/损坏的 self ref 属性。这有效，内部 selfref 错误不再发生。不过，这是一种解决方法。

解决根本问题的任何想法？

非常感谢您的帮助！

埃里克

附录：缩写 R 会话信息以确认最新版本：

```
R version 2.15.3 (2013-03-01)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
other attached packages:
 [1] data.table_1.8.8  doMC_1.3.0 
```

使用模拟数据的示例——您可能必须`history()`多次运行该函数（例如数百次）才能得到错误：

```
##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
## Load packages and Prepare Data
##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
require(data.table)
##this is the package we use for multicore
require(doMC)
##register n-2 of your machine's cores
registerDoMC(multicore:::detectCores()-2) 

## Build simulated data
value.a <- runif(500,0,1)
value.b <- 1-value.a
value <- c(value.a,value.b)
answer.opt <- c(rep("a",500),rep("b",500))
answer.id <- rep( 6000:6499 , 2)
question.id <- rep( sample(c(1001,1010,1041,1121,1124),500,replace=TRUE) ,2)
date <- rep( (Sys.Date() - sample.int(150, size=500, replace=TRUE)) , 2)
user.id <- rep( sample(250:350, size=500, replace=TRUE) ,2)
condition <- substr(as.character(user.id),1,1)
condition[which(condition=="2")] <- "x"
condition[which(condition=="3")] <- "y"

##Put everything in a data.table
DT.full <- data.table(user.id = user.id,
                      answer.opt = answer.opt,
                      question.id = question.id,
                      date = date,
                      answer.id = answer.id,
                      condition = condition,
                      value = value)

##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
## Daily Aggregation Function
##
##a basic function that aggregates all the values from
##all users for every question on a given day:
##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
each.day <- function(val.date){
  DT <- DT.full[ date < val.date ]

  #count the number of updates per user (for weighting)
  setkey(DT, question.id, user.id)
  DT <- DT[ DT[answer.opt=="a",length(value),by="question.id,user.id"] ]
  setnames(DT, "V1", "freq")

  #retain only the most recent value from each user on each question
  setkey(DT, question.id, user.id, answer.id)
  DT <- DT[ DT[ ,answer.id == max(answer.id), by="question.id,user.id", ][[3]] ]

  #now get a weighted mean (with freq) of the value for each question
  records <- lapply(unique(DT$question.id), function(q.id) {
    DT <- DT[ question.id == q.id ]
    probs <- DT[ ,weighted.mean(value,freq), by="answer.opt" ]
    return(data.table(q.id = rep(q.id,nrow(probs)),
                      ans.opt = probs$answer.opt,
                      date = rep(val.date,nrow(probs)),
                      value = probs$V1))
  })
  return(do.call("rbind",records))
}

##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
## foreach History Function 
##
##to aggregate accross many days quickly
##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
history <- function(start, end){
  #define a sequence of dates
  date.seq <- seq(as.Date(start),as.Date(end),by="day")

  #now run a foreach to get the history for each date
  hist <- foreach(day = date.seq,  .combine = "rbind") %dopar% {
    #setattr(DT,".internal.selfref",NULL) #resolves occasional internal selfref error
    each.day(val.date = day)
  }
}

##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
## Examples
##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

##aggregate only one day
each.day(val.date = "2012-12-13")

##generate a history
hist.example <- history (start = "2012-11-01", end = Sys.Date()) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-02T19:07:42.283

感谢您的报告和寻找它的所有帮助！现在在 v1.8.11 中修复。来自[新闻](https://r-forge.r-project.org/scm/viewvc.php/pkg/NEWS?view=markup&root=datatable)：

> 在多次重复调用 data.table 的长时间运行计算中，有时会出现以下错误，#2647：已
> `Internal error: .internal.selfref prot is not itself an extptr`
> 修复。感谢 EricStone、StevieP 和 JasonB 提供的（困难的）可重现示例。

可能相关的是分组中的内存泄漏，现在也已修复。

> 固定分组中长期未解决（通常很小）的内存泄漏，#2648。当最后一组小于最大组时，这些大小的差异不会被释放。同样在非平凡的聚合中，每个组返回不同数量的行。大多数用户运行一次分组查询并且永远不会注意到这些，但是任何循环调用分组的人（例如并行运行或基准测试时）都可能会受到影响。添加了测试。多亏了许多，包括 vc273 和 Y
> [T。data.table 中的内存泄漏通过引用分组分配](https://stackoverflow.com/questions/20349159/memory-leak-in-data-table-grouped-assignment-by-reference)
> [当返回 j 中的命名列表时，data.table 中的内存泄漏缓慢（试图重塑 data.table）](https://stackoverflow.com/questions/15651515/slow-memory-leak-in-data-table-when-returning-named-lists-in-j-trying-to-reshap)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T16:35:59.650

几个月来，一个类似的问题一直困扰着我。也许我们可以通过将我们的经验放在一起来看到一个模式。

我一直在等待发布，直到我可以创建一个可重现的示例。到目前为止不可能。该错误不会发生在相同的代码位置。在过去，我经常通过重新运行完全相同的代码来避免错误。其他时候，我重新制定了一个表达式并成功地重新运行。无论如何，我很确定这些错误确实是 data.table 内部的。

我保存了最后 4 条错误消息以尝试检测模式（粘贴在下面）。

```
---------------------------------------------------
[1] "err msg: location 1"
Error in selfrefok(x) : 
  Internal error: .internal.selfref prot is not itself an extptr
Calls: my.fun1 ... $<- -> $<-.data.table -> [<-.data.table -> selfrefok
Execution halted

---------------------------------------------------
[1] "err msg: location 1"
Error in alloc.col(newx) : 
  Internal error: .internal.selfref prot is not itself an extptr
Calls: my.fun1 -> $<- -> $<-.data.table -> copy -> alloc.col
Execution halted

---------------------------------------------------
[1] "err msg: location 2"
Error in shallow(x) : 
  Internal error: .internal.selfref prot is not itself an extptr
Calls: print ... do.call -> lapply -> as.list -> as.list.data.table -> shallow
Execution halted

---------------------------------------------------
[1] "err msg: location 3"
Error in shallow(x) : 
  Internal error: .internal.selfref prot is not itself an extptr
Calls: calc.book.summ ... .rbind.data.table -> as.list -> as.list.data.table -> shallow
Execution halted 
```

与上述示例的另一个相似之处：我在并行线程之间传递 data.tables，因此它们正在被序列化/反序列化。

我会尝试上面提到的“setattr”修复。

希望这会有所帮助，谢谢，杰森

这是对似乎每运行 50-100k 次就会产生 1 次错误的代码段之一的简化​​：

谢谢@MatthewDowle 顺便说一句。data.table 是最有用的。这是一段精简的代码：

```
require(data.table)
require(xts)

book <- data.frame(name='',
                   s=0,
                   Value=0.0,
                   x=0.0,
                   Qty=0)[0, ]

for (thing in list(1,2,3,4,5)) {

  tmp <- xts(1:5, order.by= make.index.unique(rep(Sys.time(), 5)))
  colnames(tmp) <- 'A'
  tmp <- cbind(coredata(tmp[nrow(tmp), 'A']),
               coredata(colSums(tmp[, 'A'])),
               coredata(tmp[nrow(tmp), 'A']))

  book <- rbind(book,
                data.table(name='ALPHA',
                           s=0*NA,
                           Value=tmp[1],
                           x=tmp[2],
                           Qty=tmp[3]))

} 
```

像这样的东西似乎是这个错误的原因：

```
Error in shallow(x) : 
  Internal error: .internal.selfref prot is not itself an extptr
Calls: my.function ... .rbind.data.table -> as.list -> as.list.data.table -> shallow
Execution halted 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-19T20:06:35.603

为了重现错误，我有一个[脚本](https://raw.github.com/stevenpollack/kag_digit_id/2fd2cf1fac8d51bc8b6b6156b342f9ef32e62226/R/dt_centric_random_gov.R)供你们倾倒并找出这个错误来自哪里。错误内容如下：

```
Error in { : 
task 96 failed - "Internal error: .internal.selfref prot is not itself an extptr"
Calls: apply ... system.time -> apply -> FUN -> %dopar% -> <Anonymous>
Execution halted 
```

我正在使用`doParallel`为`foreach`.

背景：我正在 MNIST 手写数字数据集上测试分类器。您可以通过以下方式从我这里获取数据

```
wget -nc https://www.dropbox.com/s/xr4i8gy11ed8bsh/digit_id_data_and_benchmarks.zip 
```

只需确保修改脚本（上图），使其正确指向[load_data.R](https://raw.github.com/stevenpollack/kag_digit_id/35717c8a61c72a8745245313c55a8415936af9ee/R/load_data.R)并且 load_data.R 正确指向 MNIST 数据——尽管克隆我的 repo 可能更容易，跳上 random_gov 分支，然后运行 ​​dt_centric_random_gov.R。

抱歉，我无法制作一个更简单的可重现示例，但就像@JasonB 的回答一样，在您进行大量计算之前，这个错误似乎不会出现。

*编辑：*我使用上面建议的解决方法重新运行了我的脚本，它似乎顺利进行。

# python - Python将目录中文件中的所有函数导入一个命名空间

> ID：15342232
> 
> 赞同：0
> 
> 时间：2013-03-11T15:19:45.280
> 
> 标签：python

我正在尝试创建一个`__init__.py`文件，它将 *.py 文件中的所有函数从目录导入命名空间（目录的名称）。逻辑如下图所示：

```
for f in os.listdir(wd):
    if not f.endswith('.py') or f == '__init__.py':
        continue
    names = get_public_functions(open(wd + f))
    try:
        mod = __import__(f[:-3], fromlist=names)
        for fn in names:
            fun = getattr(mod, fn)
            setattr(sys.modules[__name__], fn, fun)
    except Exception as e: 
        for fn in names:
            setattr(sys.modules[__name__], fn, lambda: str(e)) 
```

因此，您可以观察到，如果文件中存在语法错误，函数仍然会被导入，但它们会返回语法错误（作为字符串）。

令人沮丧的是，当多个文件中存在语法错误时，我期待的是：

```
mymodule.fn() => error1,
mymodule.fn2() => error1 (these were from the first file),
mymodule.fn3() => error2 etc. 
```

我只收到最后一条错误消息。我认为错误一定在`except`块中，但我想不通。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:24:37.863

您需要将 的值绑定`e`到您创建的 lambda 的范围。或者更确切地说，您想将`str(e)`结果绑定到 lambda：

```
error = str(e)
for fn in names:
    setattr(sys.modules[__name__], fn, lambda error=error: error 
```

现在每个 lambda 都有一个关键字参数来存储`error`. 因为`error`参数是具有默认值的关键字参数，所以当使用参数调用时，您的 lambdas 仍然有效。

另一种方法是创建一个新的函数范围：

```
def errorfunction(error):
    return lambda: error

error = str(e)
for fn in names:
    setattr(sys.modules[__name__], fn, errorfunction(error) 
```

# git - 切换分支和拉动同时

> ID：15342234
> 
> 赞同：0
> 
> 时间：2013-03-11T15:19:50.547
> 
> 标签：git

如果您开始在 master 分支上拉取更改，然后在其他窗口同时检出另一个分支，会发生什么？Git会吓坏吗？它还在拉东西（还没有完成）然后你突然切换分支。

特别是我对 Git 在 Windows 上的行为感兴趣

# java - log4j:WARN No appenders could be found for logger log4j:WARN 请正确初始化 log4j 系统

> ID：15342236
> 
> 赞同：1
> 
> 时间：2013-03-11T15:19:53.610
> 
> 标签：java, log4j

任何人都可以帮助我解决这个问题我收到此警告消息

```
log4j:WARN No appenders could be found for logger (com.akak.book.shop.listener.LogContextListener).
log4j:WARN Please initialize the log4j system properly. 
```

班上：

```
public class LogContextListener implements ServletContextListener{

  @Override
  public void contextDestroyed(ServletContextEvent ctxEvent) {
  }

  @Override
  public void contextInitialized(ServletContextEvent ctxEvent) {
    ServletContext ctx = ctxEvent.getServletContext();
    String path = ctx.getRealPath("/") + "logs\\";
    System.setProperty("jlcindia.root.path", path);
    String str = ctx.getRealPath("/WEB-INF/classes/com/jlc/jlc-log4j.properties");
    PropertyConfigurator.configure(str);
    Logger log = Logger.getLogger(this.getClass());
    log.info("Properties file:"+ str);
  }
} 
```

jlc-log4j.properties 文件：我这样指定

```
log4j.rootLogger = ERROR.jlc
log4j.appender.jlc = org.apache.log4j.FileAppender
log4j.appender.jlc.file = ${jlcindia.root.path}/jlcindia.log
log4j.appender.jlc.layout = org.apache.log4j.PatterLayout
log4j.appender.jlc.layout.ConversionPattern = %p %l %m %n 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:03:32.337

使用逗号而不是句点：

```
log4j.rootLogger = ERROR,jlc
                        ^ comma, not period 
```

它也应该是模式而不是模式：

```
log4j.appender.jlc.layout = org.apache.log4j.PatternLayout
                                                   ^ forgot this 'n' as well 
```

# delphi - Delphi XE3中打印Crystal Reports XI表格的解决方案

> ID：15342240
> 
> 赞同：0
> 
> 时间：2013-03-11T15:20:01.487
> 
> 标签：delphi, delphi-xe, crystal-reports-xi

在遇到与其他人相同的问题后，我想出了这个预览/打印 Crystal Reports XI 报表的解决方案。这为登录序列借了几行。我仍然无法在 *TLB.pas 文件中找到任何允许我直接登录服务器而不是遍历表列表的内容。无论如何，这就是我目前所拥有的。希望它可以帮助某人！

```
Unit CrystalReports;
uses Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes,          Vcl.Graphics,
    Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.OleCtrls, ActiveX, ComObj, Data.DB, Data.Win.ADODB,
    CrystalActiveXReportViewerLib11_TLB, Vcl.OleServer, CrystalReportsControllersLib_TLB;

    type
    TCrystalReportForm = class(TForm)
        CRV: TCrystalActiveXReportViewer;
        procedure DisplayReport;
    private
        { Private declarations }
    public
        {Public declarations }
        ReportName : WideString;
        ReportCaption : String;
        ReportSelectionFormula : WideString;
    end;

    var
    CRXIRuntime : Variant;

    implementation

    {$R *.dfm}

    procedure TCrystalReportForm.DisplayReport;
    var
    CrystalReport : variant;
    i : integer;

    begin
    CrystalReport := CRXIRuntime.OpenReport(ReportName);
    for i := 1 to CrystalReport.Database.Tables.Count do begin
        CrystalReport.Database.Tables[1].ConnectionProperties.Item['User ID'] := 'user';
        CrystalReport.Database.Tables[1].ConnectionProperties.Item['Password'] := 'password';
    end;
    CrystalReport.FormulaSyntax := 0;
    Caption := ReportCaption;
    CrystalReport.RecordSelectionFormula := ReportSelectionFormula;
    CRV.Align := alClient;
    CRV.ReportSource := CrystalReport;
    WindowState := wsMaximized;
    CRV.ViewReport;
    ShowModal;
    end;

    begin
    CRXIRuntime := CreateOleObject('CrystalRuntime.Application');
    end. 
```

# ios - 无法向项目添加新 pod：架构 i386 的未定义符号

> ID：15342242
> 
> 赞同：0
> 
> 时间：2013-03-11T15:20:08.113
> 
> 标签：ios, objective-c, cocoa-touch, cocoapods

嗨，溢出者，

我现在已经在这个问题上拉了一个多星期的头发，我似乎根本找不到任何东西。我不知道为什么或如何，但在某一时刻我的项目停止接受更多 Pod，让我解释一下。这是我的 Podfile：

```
平台：ios，“4.3”
pod 'SVGeocoder', :git => 'https://github.com/kirualex/SVGeocoder.git'
pod 'KALayoutHelper', :git => 'https://github.com/kirualex/KALayoutHelper.git'
吊舱“SBJson”，“3.1.1”
吊舱“AFNetworking”，“0.10.1”
吊舱“SDWebImage”，“2.4”
吊舱“SVProgressHUD”
吊舱“iActiveRecord”

```

一切都很好，但这是诀窍，只要我想添加一个新的 pod（如 Flurry 或 Crittercism），我就会得到同样的错误：

`Undefined symbols for architecture i386: "_OBJC_CLASS_$_Crittercism", referenced from: objc-class-ref in AppDelegate.o ld: symbol(s) not found for architecture i386 clang: error: linker command failed with exit code 1 (use -v to see invocation)`

我对此感到非常沮丧，因为我接近这个项目的结尾，我目前被迫通过“肮脏的旧方式”导入这些库！任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:54:51.517

我终于找到了问题所在，它与我正在使用的库中的错误 podspec 文件相关联（SVGeocoder，请参阅 Podfile）。尽管指定库的行已损坏，但在进行 pod 更新时 podspec 没有造成任何问题。我变了 ：

```
s.framework    = 'CoreLocation, MapKit' 
```

到

```
s.framework    = 'CoreLocation', 'MapKit' 
```

现在一切都回到了正轨。

# java - 无法将 GeoPoint 转换为地址

> ID：15342249
> 
> 赞同：1
> 
> 时间：2013-03-11T15:20:25.200
> 
> 标签：java, android

我试图将 GeoPoint 对象从其 Lat 和 Long 值反转为实际的字符串地址。

到目前为止，我将 GeoPoint 对象传递给一个方法，提取 lat 和 long 值，将地址存储在一个数组中，将第一个地址设置为“添加”字符串变量，并通过警报对话框重新设置。 .

这是显示 GeoPoint 'p' 已发送以及如何调用该方法：

```
String address = convertGpToLoc(point);

city.setText("Address: " +  address + ""); 
```

CityClickListner 类：

```
class CityClickListener extends Activity implements OnClickListener {

    private GeoName geoName = null;

    CityClickListener(GeoName name) {
        this.geoName = name;
    }

    @Override
    public void onClick(View v) {

        Double Lattt = geoName.getGeometry().getLocation().getLat();
        Double Longgg = geoName.getGeometry().getLocation().getLng();
        updateMap(Lattt, Longgg); 

        AlertDialog.Builder builder = new AlertDialog.Builder(ctx);
        builder.setView(createView());
        builder.setTitle("Details of " + geoName.getName());

        builder.setCancelable(true);

        builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   dialog.cancel();
               }
        });

        AlertDialog alert = builder.create();
        alert.show();

    } 
```

convertGpToLoc 方法：

```
public String convertGpToLoc(GeoPoint p)
    {
        String add = "";
        try {

            Geocoder gc = new Geocoder(CityClickListener.this, Locale.ENGLISH);

            List<Address> addresses = gc.getFromLocation(
                p.getLatitudeE6()  / 1E6, 
                p.getLongitudeE6() / 1E6, 1);

            if (addresses.size() < 0) 
            {
               return null;
            }

            else
            {

                for (int i=0; i<addresses.get(0).getMaxAddressLineIndex(); i++)
                {
                      add += addresses.get(0).getAddressLine(i) + "\n";
                }

            }

        }
        catch (IOException e)
        {                
            e.printStackTrace();
        }

        return add;  

        } 
```

日志猫：

```
03-11 15:16:10.952: E/AndroidRuntime(304): FATAL EXCEPTION: main
03-11 15:16:10.952: E/AndroidRuntime(304): java.lang.NullPointerException
03-11 15:16:10.952: E/AndroidRuntime(304):  at android.content.ContextWrapper.getPackageName(ContextWrapper.java:120)
03-11 15:16:10.952: E/AndroidRuntime(304):  at android.location.GeocoderParams.<init>(GeocoderParams.java:50)
03-11 15:16:10.952: E/AndroidRuntime(304):  at android.location.Geocoder.<init>(Geocoder.java:64)
03-11 15:16:10.952: E/AndroidRuntime(304):  at com.example.restfulweb.PostalCodeAdapter$CityClickListener.convertGpToLoc(PostalCodeAdapter.java:207)
03-11 15:16:10.952: E/AndroidRuntime(304):  at com.example.restfulweb.PostalCodeAdapter$CityClickListener.createView(PostalCodeAdapter.java:175)
03-11 15:16:10.952: E/AndroidRuntime(304):  at com.example.restfulweb.PostalCodeAdapter$CityClickListener.onClick(PostalCodeAdapter.java:1 14)
03-11 15:16:10.952: E/AndroidRuntime(304):  at android.view.View.performClick(View.java:2408)
03-11 15:16:10.952: E/AndroidRuntime(304):  at android.view.View$PerformClick.run(View.java:8816)
03-11 15:16:10.952: E/AndroidRuntime(304):  at android.os.Handler.handleCallback(Handler.java:587)
03-11 15:16:10.952: E/AndroidRuntime(304):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-11 15:16:10.952: E/AndroidRuntime(304):  at android.os.Looper.loop(Looper.java:123)
03-11 15:16:10.952: E/AndroidRuntime(304):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-11 15:16:10.952: E/AndroidRuntime(304):  at java.lang.reflect.Method.invokeNative(Native Method)
03-11 15:16:10.952: E/AndroidRuntime(304):  at java.lang.reflect.Method.invoke(Method.java:521)
03-11 15:16:10.952: E/AndroidRuntime(304):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-11 15:16:10.952: E/AndroidRuntime(304):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-11 15:16:10.952: E/AndroidRuntime(304):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:31:24.827

> 地址 = 地址.get(0).getAddressLine(0); 城市 = 地址.get(0).getAddressLine(1); 国家=addresses.get(0).getAddressLine(2);

如果上面有一些是空的，你会得到空指针异常，因为你没有在 if 块中使用 try catch，

使用下面的代码，

```
 for (int i=0; i<addresses.get(0).getMaxAddressLineIndex(); i++)
     {
          try{  
              add += addresses.get(0).getAddressLine(i) + "\n";
          }
          catch(Exception e)
          {}
     } 
```

# css - 避免 IE 10 锚点/链接上的灰色背景

> ID：15342250
> 
> 赞同：14
> 
> 时间：2013-03-11T15:20:25.833
> 
> 标签：css, styles, anchor, internet-explorer-10

当您单击锚点时，如何避免 IE 10 对锚点应用的恼人的灰色背景？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-21T22:14:02.283

实际上有一个非常简单的 CSS 修复程序。IE 10 在`background-color`锚标记处于[`:active`](https://developer.mozilla.org/en-US/docs/CSS/:active)状态时会更改它们。要阻止它发生或更改颜色，您可以使用下面的 CSS 规则。

```
a:active{
    background-color: transparent; /* Can be any colour, not just transparent */
} 
```

现场演示：http: [//jsfiddle.net/tw16/NtjK7/](http://jsfiddle.net/tw16/NtjK7/)

在旁注中，值得一提的是，在设置链接样式时，您需要确保以正确的顺序编写规则，以确保以前的样式不会被覆盖：

```
a:link{}    /* 1st */
a:visited{} /* 2nd */
a:hover{}   /* 3rd */
a:active{}  /* 4th */ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-22T15:06:59.847

我发现它实际上是 :focus 添加了灰色背景。

这对我有用：

```
a:focus {
    background-color: transparent;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:20:25.833

我找不到很多信息，但我确实找到了一个解决方法：

**将锚的文本包裹在一个`span`**

[工作解决方案](http://jsfiddle.net/paska/5ZhXA/)

如果您不想更改 HTML 中的每个锚点，可以使用如下脚本：

```
$("a:not(.dont-use-span)").each(function() {
    $(this).html("<span>" + $(this).html() + "</span>");
}); 
```

[工作解决方案](http://jsfiddle.net/paska/5ZhXA/1/)

*注意：只需将类添加`dont-use-span`到您不想修改的锚点*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-09T09:47:32.430

经过许多徒劳的测试，我终于使它适用于这个：

```
 a               {color:#fff; background-color:#f77927 !important;}
  a:hover         {color:#fff; background-color:#e65e06 !important;}
  a.active        {color:#fff; background-color:#e65e06 !important;}
  a.focus         {color:#fff; background-color:#e65e06 !important;} 
```

[看实际](http://jsfiddle.net/avudzpvv/)

# c - 在将来调用函数

> ID：15342252
> 
> 赞同：4
> 
> 时间：2013-03-11T15:20:37.347
> 
> 标签：c, linux, gcc, posix

在 Posix (Linux) 环境中长时间运行的服务器程序（用 C 语言构建）中：让**函数在未来特定时间执行**的最佳方法是什么？它不需要在任何特定线程中执行，但执行时间的精度需要几毫秒。通用方法或特定代码表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:49:05.250

GNU C 库 ( ) 中有一些高分辨率时钟函数`sys/timex.h`，因此虽然它们不是 POSIX，但它们将是可移植的 linux 明智的。

[高精度时钟——GNU C 库](http://www.gnu.org/software/libc/manual/html_node/High-Accuracy-Clock.html)

尽管这些函数不需要或不使用任何 ntp 服务，但这些函数都以“ntp”为前缀，因此这种关系纯粹是肤浅的。

请注意，虽然粒度以微秒为单位，但 linux 内核的用户空间延迟为 10 毫秒，因此不要打扰或期望比这更准确的任何东西。

获得当前高分辨率时间后，您可以计算持续时间并使用 (posix) [nanosleep](http://pubs.opengroup.org/onlinepubs/9699919799/functions/nanosleep.html)（但同样，舍入到 10 毫秒）来设置延迟。还有一个可能感兴趣的[clock_nanosleep 。](http://pubs.opengroup.org/onlinepubs/9699919799/functions/clock_nanosleep.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-02T10:21:14.003

您应该查找posix timers。它为您提供了一个简单的界面来安排未来的工作。您可以管理它以在 x 秒/纳秒内向您发送信号（然后您可以将您的函数作为信号处理程序）。查找 timer_create

# c# - 错误 1 类型“Pay”已经定义了一个名为“ComputePay”的成员，具有相同的参数类型

> ID：15342253
> 
> 赞同：0
> 
> 时间：2013-03-11T15:20:38.773
> 
> 标签：c#, overloading

我似乎无法弄清楚我们的问题是什么。pph 和两者在不同的重载中都等于不同的值。我不确定我做错了什么。我看不出这些值是如何相同的。

```
public class Pay
{
    public double ComputePay(double h,double pph,double with)
    {
        double net = 0;

        try
        {
            double gross = h * pph;
            net = gross - with;
        }
        catch (FormatException)
        {
            Console.WriteLine("Hour's cannot be less than zero");
        }

        return net;      
    }

    public double ComputePay(double h, double pph, double with = 0.15)
    {
        double net = 0;

        try
        {
            double gross = h * pph;
            net = gross - with;
        }
        catch (FormatException)
        {
            Console.WriteLine("Hour's cannot be less than zero");
        }

        return net;
    }

    public double ComputePay(double h, double pph = 5.85, double with = 0.15)
    {
        double net = 0;

        try
        {
            double gross = h * pph;
            net = gross - with;
        }
        catch (FormatException)
        {
            Console.WriteLine("Hour's cannot be less than zero");
        }

        return net;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T15:22:51.627

> 我不确定我做错了什么。

你有三个方法，它们都有三个`double`参数：

```
public double ComputePay(double h,double pph,double with)
public double ComputePay(double h, double pph, double with = 0.15)
public double ComputePay(double h, double pph = 5.85, double with = 0.15) 
```

某些方法声明中的某些参数是可选的这一事实与此处的重载无关 - 您根本不能指定三个这样的方法。如果调用者指定了三个参数，您希望调用哪个方法？

既然它们都做同样的事情，为什么还要三种方法呢？只需摆脱前两个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:26:16.890

您不能有两个或多个具有相同签名的方法。这意味着它们不能具有相同的名称和参数类型。这与将传递给方法的值无关。

正确的可能是：

```
public int Sum(int a, int b)
{
    return Sum(a, b, 0);
}

public int Sum(int a, int b, int c)
{
    return a + b + c;
} 
```

**编辑：**

这是一篇有趣的 MSDN 文章，提供有关[**成员重载**](http://msdn.microsoft.com/en-us/library/vstudio/ms229029%28v=vs.100%29.aspx)的指南。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:23:01.553

您的方法签名（双，双，双）是相同的。在这种情况下，只需删除前两个实现。最后一个很可能已经按照您想要的方式运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T15:24:04.993

你的最后两个 ComputePay (double, double, double) 是一样的。拥有默认变量不会使方法不同。只需使用第二个就可以了。

# ruby-on-rails - 搜索过去一小时内的推文

> ID：15342257
> 
> 赞同：2
> 
> 时间：2013-03-11T15:20:56.813
> 
> 标签：ruby-on-rails, twitter

我正在构建一个社交分析应用程序。我需要查找过去一小时内包含某个单词的推文数量（时间范围可能会有所不同）。

我该怎么做呢？

我尝试了这些： 1\. 使用`until`参数 - 但它不支持时间并且听说它不可靠 2\. 获取最大可能的推文并按日期和时间过滤 - 计算密集型

我应该如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:48:08.580

假设您使用的是 sql 数据库并且推文的标题应该包含某个单词，这应该可以解决问题。

```
Tweet.where('created_at >= ? AND title LIKE ?', 1.hour.ago, '%some_word%') 
```

# html - MVC中没有表单的隐藏字段

> ID：15342258
> 
> 赞同：1
> 
> 时间：2013-03-11T15:20:56.933
> 
> 标签：html, asp.net-mvc-4

我正在使用的一个页面中有一张表格，但没有表格。有没有办法在不创建表单的情况下将某些值保留到该 html。我不会以任何特定方式从该页面提交。

```
<!DOCTYPE html>
<html>
<head>
    <title>Show All Encounters</title>
</head>
<body>
<div class="content-wrapper clear-fix float-left"  style="height: 1px; padding: 10px;" id="list1">
    @{        
        Html.Hidden("popId", TempData["POPULATIONID"], new { id = "hidPopID" });
        Html.Hidden("popId", TempData["POPNAME"], new { id = "hidpnID" });
        Html.Hidden("popId", TempData["ROWNUM"], new { id = "hidrownumID" });
    }
 <table border="2" id="frTable" class="scroll"></table>  
 <div id='pager'></div>
 </div>
</body>
</html>
<script>
    function loadDialog(tag, event, target) {
        //debugger;
        .load($url)
      .dialog({
      ...
      , close: function (event, ui) {
            debugger;
            //if($url.contains)        
            var popId = $('#hidPopID').val();
            var rows = $('#hidrownumID').val();
            location.reload(true);
      }
        });

        $dialog.dialog('open');
    };
    </script> 
```

关闭事件在 jquery 模态对话框调用 btw 内，因此语法在技术上是正确的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:22:34.980

您可以将值保留在 DOM 中的任何位置，但如果要将它们发送到服务器，您有几个选择：

*   带有隐藏字段的表单（你说你不想要这个）
*   将从 DOM 中获取值的 AJAX 请求
*   使用查询字符串中的值锚定

或者只是将值保存在服务器上。我猜你正在使用一些可以使用的数据存储。

* * *

更新：

现在您已经展示了您的代码，很清楚为什么它不工作了。您没有任何隐藏字段（在浏览器中浏览 HTML 源代码以查看它们是否丢失）。您刚刚在服务器上调用了 Html.Hidden 助手，但您从未将结果输出到 HTML

现在正确添加隐藏字段：

```
@Html.Hidden("popId", TempData["POPULATIONID"], new { id = "hidPopID" })
@Html.Hidden("popId", TempData["POPNAME"], new { id = "hidpnID" })
@Html.Hidden("popId", TempData["ROWNUM"], new { id = "hidrownumID" }) 
```

# c++ - OpenCV，C++：如何使用 cv::Meanshift

> ID：15342262
> 
> 赞同：4
> 
> 时间：2013-03-11T15:21:13.470
> 
> 标签：c++, opencv, computer-vision

我有一个二维点向量，我正在尝试使用 meanshift 算法来检测数据中的多种模式，但对方法签名有点困惑。

1）我可以传入我的向量（如果可以，以什么形式）还是必须转换为 cv::Mat （如果可以的话如何？如果我有负值的点）。

2）我如何提取多种模式，从我所看到的函数只返回一个 int

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T15:50:55.007

OpenCV 的均值偏移实现是用于跟踪单个对象（作为[CamShift 算法](http://www.robinhewitt.com/research/track/camshift.html)的一部分），因此我不相信它已经扩展到使用多模态分布来跟踪多个对象。它将为您提供一个以概率图像模式为中心的边界框（由 的参考通道返回`cv::Rect window`）。

您的数据是否表示为高斯的混合（或其他一些对称分布）？如果是这样，您也许可以使用[k-means](http://docs.opencv.org/modules/core/doc/clustering.html?highlight=kmeans)聚类来找到分布的均值（这将是对称分布的模式），尽管选择 k 会有问题。

或者，可能启用跟踪多个对象（或查找多个模式）的黑客可能涉及重复调用此函数，检索模式，然后从反投影直方图中将此部分归零。

至于你的数据形式，函数输入是通过 a`cv::Mat`所以你必须转换你的数据。但是，您声称具有负值，并且此 opencv 函数需要一个概率直方图（通常您使用 图像从图像中计算出来`cv::calcBackProject()`），因此我希望如果您尝试将其传递给`cv::Mat`包含负值的值，它会抱怨。

# udp - 设置 UDP 校验和字段（在网络驱动程序端）

> ID：15342270
> 
> 赞同：0
> 
> 时间：2013-03-11T15:21:26.223
> 
> 标签：udp, checksum

我必须更改网络驱动程序（在实时操作系统上）以嗅探 PTP 帧（它是具有特殊数据字段的 UDP 帧）并更改一些数据。我需要更新网络驱动程序（R8168）中的数据。这样做我也必须在发送帧之前修改 CRC 字段。我找了一些例子，但没有一个有效。我想这在使用 htons 或 ntohs 的行中有问题：我不知道我是否必须使用网络字节顺序或主机字节顺序。

```
unsigned int calc_checksum( unsigned char *pcBuf, unsigned short usLength, unsigned int uiSum )
{
    unsigned short i, usTmp ;
    /* Checksum all the pairs of bytes first... */
    for ( i = 0; i < (usLength & ~1U); i += 2 )
    {
        usTmp = *((unsigned short *)(pcBuf + i)) ;
        uiSum += (unsigned short)ntohs( usTmp ) ;
        if ( uiSum > 0xFFFF )
            uiSum -= 0xFFFF ;
    }
    /*
     * If there's a single byte left over, checksum it, too.
     * Network byte order is big-endian, so the remaining byte is
     * the high byte.
     */
    if ( i < usLength )
    {
        uiSum += pcBuf[i] << 8 ;
        if ( uiSum > 0xFFFF )
            uiSum -= 0xFFFF ;
    }
    /*.*/
    return uiSum ;
}

/* Recalculate UPD checksum */
usTmp = sizeof(TUdpHeader) + sizeof(TPTPSyncData) ;
uiSum = calc_checksum( (unsigned char *)(&pPTPFrame->udpHeader.sport),
    sizeof(TUdpHeader) + sizeof(TPTPSyncData),
    calc_checksum( (unsigned char *)(&pPTPFrame->ipHeader.saddr),
        2 * sizeof(unsigned int), IP_UDP + htons( usTmp ) ) ) ;
// Return the one's complement of sum
usTmp = (~uiSum) & 0xFFFF ;
pPTPFrame->udpHeader.checksum = htons( usTmp ) ; 
```

笔记：

*   pPTPFrame 是指向全帧的指针（EthHeader + IpHeader +
    UdpHeader + Data）
*   IP_UDP = 17
*   TPTPSyncData 是数据结构

非常感谢。伊曼纽尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:04:53.570

这是正确的版本：

```
/* Recalculate UPD checksum */
pPTPFrame->udpHeader.checksum = 0 ;
uiSum = calc_checksum( (unsigned char *)(&pPTPFrame->udpHeader.sport),
    sizeof(TUdpHeader) + sizeof(TPTPSyncData),
    calc_checksum( (unsigned char *)(&pPTPFrame->ipHeader.saddr),
        2 * sizeof(unsigned int), IP_UDP + sizeof(TUdpHeader) + sizeof(TPTPSyncData) ) ) ;
// Return the one's complement of sum
usTmp = (~uiSum) & 0xFFFF ;
pPTPFrame->udpHeader.checksum = htons( usTmp ) ; 
```

问题解决了！

# html - 2 种不同的链接样式在 IE 中显示正常，但在其他浏览器中则不行。单击链接时，所有链接都显示已访问

> ID：15342279
> 
> 赞同：0
> 
> 时间：2013-03-11T15:21:47.410
> 
> 标签：html, css, google-chrome, firefox

我的网站在这里用于测试目的： [http ://www.splithorizo​​nt.com/itc/web1.html](http://www.splithorizont.com/itc/web1.html)

在 IE 中，我的网站链接都可以正常工作，但在其他浏览器中，当我单击一个链接时，网页上的所有链接都会变成已访问的链接。

```
Here is CSS:

@charset "utf-8";
.css {
}
html, body {
        background-color:#d8e9f6;
        text-align:center;
margin:0 auto; 
width: 800px;
}

a.nav2:link { color: #FFFFFF; font-size: 20px; text-decoration: none;}
a.nav2:visited { color: #EA5421;}
a.nav2:hover { color: #EA5421; text-decoration: underline; }
a.nav2:active {color: #EA5421; text-decoration: underline;} 

a.nav1:link {   font-size: 16px;    color: #EA5421; }
a.nav1:visited {    color: #EA5421; }
a.nav1:hover {color: #EA5421; }
a.nav1:active {color: #EA5421; }

#center {width: 800px; margin:0 auto; }

#menu1 {width:792px;
 }
#nav_text {width:590px; height:210px; background-color:#f39e81; float:left; margin:8px;
-moz-border-radius-bottomleft: 10px;
border-bottom-left-radius: 10px;
-moz-border-radius-topright: 10px;
border-top-right-radius: 10px;
-moz-border-radius-topleft: 10px;
border-top-left-radius: 10px;
-moz-border-radius-bottomright: 10px;
border-bottom-right-radius: 10px; 

}

#nav_text2 {width:590px; height:210px; background-color:#509aca; float:left; margin:8px;
-moz-border-radius-bottomleft: 10px;
border-bottom-left-radius: 10px;
-moz-border-radius-topright: 10px;
border-top-right-radius: 10px;
-moz-border-radius-topleft: 10px;
border-top-left-radius: 10px;
-moz-border-radius-bottomright: 10px;
border-bottom-right-radius: 10px;

 }
#nav_desno {width:170px; height:700px; background-color:#c0e3fd; float:right ; margin:8px;
-moz-border-radius-bottomleft: 10px;
border-bottom-left-radius: 10px;
-moz-border-radius-topright: 10px;
border-top-right-radius: 10px;
-moz-border-radius-topleft: 10px;
border-top-left-radius: 10px;
-moz-border-radius-bottomright: 10px;
border-bottom-right-radius: 10px;
}
#razmak {width:800px; height:875px; float:left; background-image: url(slike/pozadina.jpg);}

.wrapper_menu {background-color:#1d6594; margin:8px; width:780px; text-align:center
-moz-border-radius-bottomleft: 10px;
border-bottom-left-radius: 10px;
-moz-border-radius-topright: 10px;
border-top-right-radius: 10px;
-moz-border-radius-topleft: 10px;
border-top-left-radius: 10px;
-moz-border-radius-bottomright: 10px;
border-bottom-right-radius: 10px;}

.nav ul {
   list-style-type: none;
    text-align: center;
    }

.nav ul li {
    display: inline;

}
h4 {
    font-size: 14px;
    color: #333333;
    text-decoration:none
}
h1,h2,h3,h4,h5,h6 {
    font-family: Times New Roman, Times, serif;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:29:00.197

如果您只单击一个链接，所有链接都进入已访问状态的原因是所有链接都转到同一个地址：“#”。

# php - 例外：include()：realpath 未能规范化 Service/Response.php - 保释

> ID：15342280
> 
> 赞同：3
> 
> 时间：2013-03-11T15:21:47.860
> 
> 标签：php, zend-framework, nginx

我面临以下问题：

> 例外：include()：realpath 未能规范化 Service/Response.php - 保释

以下是我的服务器配置：

*   操作系统-Debian
*   PHP- 5.2.x
*   mysql - 5.1。
*   Nginx
*   曾德

我用谷歌搜索了很多，但没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T08:22:06.683

**老答案：**

您也可以使用该功能`require_once()`。这个函数不会报错。include 和 require 之间的区别在于 include 给出错误并且脚本将继续运行，而 require 脚本将停止运行。

**新回答者：**

我做了更多的研究。该错误不是来自`require_once()`，`require()`或者`include()`要解决 APC 缓存的此问题，您需要设置绝对路径，例如`/home/user/domains/example.com/public_html/include/config`. 包括de基目录，错误就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T05:39:32.720

无需关闭 APC，`apc.stat=1`在 apc.ini 文件中设置就足够了。另请参阅[此错误报告](https://bugs.php.net/bug.php?id=59493)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-18T23:20:04.480

就我而言，使用 Php 5.4，我降级到 APC 3.1.10

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-06T06:46:39.000

不覆盖`APC`设置（以默认`APC`设置为准）也可以解决此错误。

# spring-mvc - 连接到 spring-security 自动生成的登录页面时出现 HTTP 405 错误

> ID：15342281
> 
> 赞同：1
> 
> 时间：2013-03-11T15:21:47.930
> 
> 标签：spring-mvc, spring-security

我无法连接到自动生成的 Spring Security 登录页面。根据文档，在您的 security-context.xml 中包含以下行将使 Spring 生成一个 html 登录表单，并在尝试连接到特定 URL 时将用户重定向到该表单：

```
<http auto-config="true" >
    <intercept-url pattern="/management-console" access="ROLE_ADMIN"/>
</http>

<authentication-manager ... /> 
```

这是我的其余配置。Web.xml：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
        <param-value>
            classpath:/context/applicationContext.xml <!-- I am importing my security-context.xml in here -->
        <param-value>
</context-param>

<!-- Security Configuration -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/management-console</url-pattern>
</filter-mapping> 
```

我已经尝试直接在 web.xml 中导入 security-context.xml，但我仍然看到错误。

部署我的应用程序后，我可以毫无问题地连接到我指定的每个 URL。但是，当我尝试访问 localhost:{port}/{appName}/management-console 时，过滤器链将我重定向到 /spring_security_login（如预期的那样）。但是，我在转发后看到“HTTP 状态 405 - 不支持请求方法 'GET'”错误，并且控制台上出现以下内容（spring-mvc 是我给我的 servlet 的名称）：

```
org.springframework.web.servlet.PageNotFound            | No mapping found for HTTP request with URI [/InternalManagementViewer/spring_security_login] in DispatcherServlet with name 'spring-mvc' | 
```

当我错过在控制器中声明 POST/GET 映射之前，我已经看到了这个错误。根据文档，我不应该在我的控制器中包含这样的方法来处理 /spring_security_login 映射。根据我的阅读，spring 应该知道返回自动生成的登录 html 页面。

为了看看会发生什么，我在控制器中声明了一个方法来处理 /spring_security_login 映射。由于该函数返回void（因为我不知道生成的html登录页面的本地视图名称），它会查找名为“spring_security_login.jsp”的资源，该资源未在我的项目中显式创建，因此我得到“未找到 HTTP 资源”错误。

我被这个难住了，真的可以用手。非常感谢您看一看。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:32:38.717

`springSecurityFilterChain`对所有 URL应用过滤器：

```
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

`springSecurityFilterChain`是所有 Spring Security 功能的入口点。因此，如果此过滤器未应用于某些 URL，那么您将无法在那里使用 Spring Security（在这种情况下处理 /spring_security_login URL）。

# java - JAXB Java EE 从 Schema 生成实体类

> ID：15342282
> 
> 赞同：4
> 
> 时间：2013-03-11T15:21:53.077
> 
> 标签：java, jakarta-ee

我正在使用 JAXB 的 Maven 插件从 XML 模式文档生成类。我的 POM 包含以下内容

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
    <artifactId>jaxb2-maven-plugin</artifactId>
    <version>1.5</version>
     <executions>
 <execution>
     <goals>
 <goal>xjc</goal>
 </goals>
 <phase>generate-sources</phase>
     </execution>
   </executions>
 <configuration>
 <clearOutputDir>false</clearOutputDir>
 <outputDirectory>src/main/java</outputDirectory>
 <schemaDirectory>src/main/webapp/schemas</schemaDirectory>
 <includeSchema>**/*.xsd</includeSchema>
 <bindingDirectory>src/main/resources/bindings</bindingDirectory>
 <enableIntrospection>false</enableIntrospection>
 </configuration>
</plugin> 
```

我使用的是JPA 2的Eclipselink规范。当JAXB根据schema生成类时，不包含以下注解。

```
@Entity
@Id 
@GeneratedValue(strategy = GenerationType.IDENTITY) 
```

目前我只是在每次使用 Maven 进行干净编译时手动添加这些。我想知道是否有办法让 JAXB 插件在生成类时使用包含的这些注释来注释类文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:46:22.960

JAXB 使用的 XJC 编译器有一个插件 api，允许自定义生成的 java 代码。似乎有一个[插件可以添加任意注释](http://confluence.highsource.org/display/J2B/Annotate+Plugin)，也许这已经解决了你的问题。

有关可能性的更复杂示例，您可以查看[fluent api 插件](http://code.google.com/p/jaxb-fluent-api-ext/)的[源代码](http://code.google.com/p/jaxb-fluent-api-ext/source/browse/code/trunk/src/main/java/redmosquito/xjc/plugin/fluent/ext/FluentApiExtPlugin.java)。

# git - Git：将最后一次更改从发布分支移动到差异很大的分支分支

> ID：15342285
> 
> 赞同：0
> 
> 时间：2013-03-11T15:21:57.803
> 
> 标签：git

在我的 android 项目中，我使用了 github 和 git 最新版本。我有准备发布的“master”分支和包含重大更改的“next”分支。我应该实现从 master 分支到下一个的最后约 80 个小提交。他们使其他开发人员。但可能不需要或无法在下一个分支中实施某些 shanges。我要遵循的方式是结帐到“下一个”分支，并对最后 80 次提交的范围进行挑选。像这样：

```
git cherry-pick 6f12..73f5 
```

可能樱桃挑选会打破冲突，我会解决它，提交更改，调用

```
git cherry-pick --quit 
```

然后从第一次提交中再次运行cherry-pick

```
git cherry-pick 34e2..73f5 
```

那是正确的还是我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:36:09.050

您可以`git cherry-pick --continue`在它因冲突而停止后运行。这将使它自动从中断的地方继续。

# java - 如何让 RadioButton 播放音乐

> ID：15342298
> 
> 赞同：2
> 
> 时间：2013-03-11T15:22:41.720
> 
> 标签：java, android

所以我有一门课，可以通过 MediaPlayer 播放一些歌曲。I have the following code that When a Radiobutton is selected should play a song, However this does not work, could anyone tell me why?

我没有收到任何错误，只是没有播放音乐。

OnCheckedChange 方法中的代码：

```
 break;          
    case R.id.rFolk1: //setting up sub radiogroup buttons
        if(fsong1.isPlaying() == false)
            fsong1.start();
        break;
    case R.id.rFolk2: //setting up sub radiogroup buttons
        if(fsong2.isPlaying() == false)
            fsong2.start();
        break; 
```

歌曲的其他代码：

```
 fsong1 = MediaPlayer.create(this, R.raw.folk1);
    fsong2 = MediaPlayer.create(this, R.raw.folk2); 
```

完整代码：

```
public class Music extends Activity implements OnCheckedChangeListener, OnClickListener{

Button playpause;
RadioGroup selectionList, Folk, Rock, Pop, NewWave, Pipe;//define the radiogroup
RadioButton folk1, folk2, rock1, rock2, pop1, pop2, newwave1, newwave2, pipe1, pipe2; //define radiobuttons
MediaPlayer fsong1, fsong2, rsong1, rsong2, psong1, psong2, nwsong1, nwsong2, pisong1, pisong2;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //set fullscreen
    requestWindowFeature(Window.FEATURE_NO_TITLE); 
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN );

    setContentView(R.layout.music); //set layout

    initialize(); //call this method
}

public void initialize(){
    // set up the radiogroups
    selectionList = (RadioGroup) findViewById(R.id.rgMusic);
    Folk = (RadioGroup) findViewById(R.id.rgFolk);
    Rock = (RadioGroup) findViewById(R.id.rgRock);
    Pop = (RadioGroup) findViewById(R.id.rgPop);
    Pipe = (RadioGroup) findViewById(R.id.rgPipe);

    folk1 = (RadioButton) findViewById(R.id.rFolk1);
    folk2 = (RadioButton) findViewById(R.id.rFolk2);
    rock1 = (RadioButton) findViewById(R.id.rRock1);
    rock2 = (RadioButton) findViewById(R.id.rRock2);
    pipe1 = (RadioButton) findViewById(R.id.rPipe1);
    pipe2 = (RadioButton) findViewById(R.id.rPipe2);
    pop1 = (RadioButton) findViewById(R.id.rPop1);
    pop2 = (RadioButton) findViewById(R.id.rPop2);
    newwave1 = (RadioButton) findViewById(R.id.rNewWave1);
    newwave2 = (RadioButton) findViewById(R.id.rNewWave2);

    NewWave = (RadioGroup) findViewById(R.id.rgNewWave);

  //settting up on check changed
    selectionList.setOnCheckedChangeListener(this);

    playpause = (Button) findViewById(R.id.bPlayPause);
    playpause.setOnClickListener(this);

    fsong1 = MediaPlayer.create(this, R.raw.folk1);
    fsong2 = MediaPlayer.create(this, R.raw.folk2);

}

@Override
public void onCheckedChanged(RadioGroup arg0, int arg1) {
    //case statement for onCheckChange to open a new class/layout
    //
    //This also hides radiogroups and shows others
    switch(arg1){
    case R.id.rFolk:
        Folk.setVisibility(View.VISIBLE); //shows rg for folk
        //hides all the rest of the radiogroups if visible
            if(Pipe.getVisibility() == View.VISIBLE){
                Pipe.setVisibility(View.GONE);
                }
            if(Rock.getVisibility() == View.VISIBLE){
            Rock.setVisibility(View.GONE);
                }
            if(Pop.getVisibility() == View.VISIBLE){
            Pop.setVisibility(View.GONE);
                }
            if(NewWave.getVisibility() == View.VISIBLE){
            NewWave.setVisibility(View.GONE);
                }

        break;
    case R.id.rPipe:
        Pipe.setVisibility(View.VISIBLE);//shows rg for pipe
        //hides all the rest of the radiogroups if visible
        if(Folk.getVisibility() == View.VISIBLE){
            Folk.setVisibility(View.GONE);
            }
        if(Rock.getVisibility() == View.VISIBLE){
        Rock.setVisibility(View.GONE);
            }
        if(Pop.getVisibility() == View.VISIBLE){
        Pop.setVisibility(View.GONE);
            }
        if(NewWave.getVisibility() == View.VISIBLE){
        NewWave.setVisibility(View.GONE);
            }

        break;
    case R.id.rRock:
        Rock.setVisibility(View.VISIBLE);//shows rg for rock
        //hides all the rest of the radiogroups if visible
        if(Folk.getVisibility() == View.VISIBLE){
            Folk.setVisibility(View.GONE);
            }
        if(Pipe.getVisibility() == View.VISIBLE){
        Pipe.setVisibility(View.GONE);
            }
        if(Pop.getVisibility() == View.VISIBLE){
        Pop.setVisibility(View.GONE);
            }
        if(NewWave.getVisibility() == View.VISIBLE){
        NewWave.setVisibility(View.GONE);
            }

        break;
    case R.id.rPop:
        Pop.setVisibility(View.VISIBLE);//shows rg for pop
        //hides all the rest of the radiogroups if visible
        if(Folk.getVisibility() == View.VISIBLE){
            Folk.setVisibility(View.GONE);
            }
        if(Pipe.getVisibility() == View.VISIBLE){
        Pipe.setVisibility(View.GONE);
            }
        if(Rock.getVisibility() == View.VISIBLE){
        Rock.setVisibility(View.GONE);
            }
        if(NewWave.getVisibility() == View.VISIBLE){
        NewWave.setVisibility(View.GONE);
            }

        break;
    case R.id.rNewWave:
        NewWave.setVisibility(View.VISIBLE);//shows rg for newwave
        //hides all the rest of the radiogroups if visible
        if(Folk.getVisibility() == View.VISIBLE){
            Folk.setVisibility(View.GONE);
            }
        if(Pipe.getVisibility() == View.VISIBLE){
        Pipe.setVisibility(View.GONE);
            }
        if(Rock.getVisibility() == View.VISIBLE){
        Rock.setVisibility(View.GONE);
            }
        if(Pop.getVisibility() == View.VISIBLE){
        Pop.setVisibility(View.GONE);
            }

        break;          
    case R.id.rFolk1: //setting up sub radiogroup buttons
        if(fsong1.isPlaying() == false){
            fsong1.start();
        }
        break;
    case R.id.rFolk2: //setting up sub radiogroup buttons
        if(fsong2.isPlaying() == false){
            fsong2.start();
        }
    }
}

@Override
public void onClick(View view) {
    // setting the onclick listener for the buttons for play/pause stop

    // check for already playing
    if(fsong1.isPlaying()){

            fsong1.pause();
            // Changing button image to play button
            playpause.setBackgroundResource(R.drawable.play_button);

    }else{
        // Resume song
            fsong1.start();
            // Changing button image to pause button
            playpause.setBackgroundResource(R.drawable.pause_button);
    }   

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:03:17.950

[我建议不要创建这么多`MediaPlayer`s](http://developer.android.com/reference/android/media/MediaPlayer.html#MediaPlayer%28%29)。它们很可能是你的麻烦的原因：当你实例化太多它们时，它们就不能很好地工作。

你也应该看看[MediaPlayer 的生命周期](http://developer.android.com/reference/android/media/MediaPlayer.html#StateDiagram)。

在其中，您将找到一种删除多个 MediaPlayers 实例的方法。例如，您可以将演奏更改为：

```
 Boolean fsong1, fsong2, rsong1, rsong2, psong1, psong2, nwsong1, nwsong2, pisong1, pisong2;
  Boolean isPlaying=false; 
```

//还有很多代码

```
 case R.id.rFolk1: //setting up sub radiogroup buttons
    if ((isPlaying) && !fsong1){
        mediaPlayer.stop();
        mediaPlayer.release();
        mediaPlayer = null;
    }
    if (!fsong1){
       //reset all other types of songs!
       fsong1=true;
       isPlaying = true;          
       mediaPlayer=MediaPlayer.create(this, R.raw.folk1);
       mediaPlayer.start();
    }

    break; 
```

警告：我不会给你你必须应用的全部改变！

# c# - Silverlight 5 VS 2012 单元测试

> ID：15342299
> 
> 赞同：9
> 
> 时间：2013-03-11T15:22:44.787
> 
> 标签：c#, silverlight, unit-testing, visual-studio-2012

在过去的几个小时里，我一直在尝试为 Silverlight 应用程序生成单元测试。

许多帖子都提到了“Silverlight 单元测试项目”，它是 Silverlight 工具包的一部分。但是我下载了工具包还是没有Test Project，好像只有VS 2010才有？

我添加了一个“Silverlight 类库”项目并添加了对以下内容的引用：

1.  `Microsoft.Silverlight.Testing`
2.  `Microsoft.VisualStudio.QualityTools.UnitTesting.Silverlight`

和以下TestClass：

```
using Microsoft.Silverlight.Testing;
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace UnitTesting
{
    [TestClass]
    public class Class
    {

        [TestMethod]
        public void TestMethod()
        {
            .....    
        }
    }
} 
```

但是 Visual Studio 2012 测试资源管理器没有发现任何测试。即使在重新构建解决方案并重新启动应用程序之后。

有人有想法么？这甚至可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-12T13:13:37.840

这个链接有对我有用的答案：

[http://social.msdn.microsoft.com/Forums/vstudio/en-US/5e991b0d-8061-4c4e-a17d-82b4abd58d6c/vs-2012-silverlight-unittest](http://social.msdn.microsoft.com/Forums/vstudio/en-US/5e991b0d-8061-4c4e-a17d-82b4abd58d6c/vs-2012-silverlight-unittest)

> 我建议开始一个新的 Silverlight 项目并安装 SilverlightToolkit-Testing NuGet 包。在您的测试文件中，为 Microsoft.Silverlight.Testing 和 Microsoft.VisualStudio.TestTools.UnitTesting 输入 usings 并使用常规的 [TestClass] 和 [TestMethod] 属性。要运行它们，您可以通过放入`RootVisual = UnitTestSystem.CreateTestPage();`App.Application_Startup() 来使用 Toolkit 测试运行器，使用 Silverlight 单元测试适配器（当前版本为 v0.0.1，并不能真正工作），或者（迄今为止最好的方法）安装 ReSharper 和 AgUnit 插件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-08T15:46:10.627

为了完成这个线程，

Silverlight DLLS 位于 C:\Program Files (x86)\Microsoft SDKs\Silverlight\v5.0\Toolkit\dec11\Testing

我无法让 Resharper 7.1 运行测试，但[这个库](https://agunit.codeplex.com)有帮助。您将需要使用 7-zip 进行解压，以免 DLLS 被阻止。然后重新启动 Visual Studio 2012，Resharper 将运行您的单元测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-27T09:32:57.707

我能够运行一些测试：

1.  给定 Visual Studio 2012 Professional（带有测试运行器）。

2.  创建面向 .NET 4.5 的类库，名称类似于`MyProject.Tests`.

3.  参考`C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\PublicAssemblies\Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll`或来自您的位置。

4.  像往常一样为 .NET 4.5 添加测试。

5.  将项目引用添加到`MyProject`- 针对 Silverlight 5 的项目。

6.  添加一些测试。建造。可能会出现缺少参考的错误： `Error 12 The type 'System.Xml.Serialization.IXmlSerializable' is defined in an assembly that is not referenced. You must add a reference to assembly 'System.Xml, Version=5.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e'`

7.  参考`C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\Silverlight\v5.0\System.Xml.dll`

8.  构建并得到相同的错误。打开`*.csproj`并确保提示路径： `xml <Reference Include="System.Xml"> <HintPath>C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\Silverlight\v5.0\System.Xml.dll</HintPath> </Reference>`

9.  运行测试，例如通过右键单击`TestMethod`-> `Run Tests`。可能会出错： `System.IO.FileNotFoundException: Could not load file or assembly 'System.Windows, Version=5.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e' or one of its dependencies. The system cannot find the file specified.WRN: Assembly binding logging is turned OFF. To enable assembly bind failure logging, set the registry value [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) to 1. Note: There is some performance penalty associated with assembly bind failure logging. To turn this feature off, remove the registry value [HKLM\Software\Microsoft\Fusion!EnableLog].` 修复是： `<Reference Include="System.Windows"> <HintPath>C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\Silverlight\v5.0\System.Windows.dll</HintPath> </Reference>`

笔记：

1.  回想一下，Silverlight 5 程序集的格式与 .NET 4.5 相同。
2.  测试失败，因为 .NET 4.5 程序集是项目的默认设置，我们需要通过 .NET 覆盖`HintPath`。我认为通过 MSBuild 脚本修改和/或程序集绑定重定向可能还有其他方式。
3.  .NET 核心程序集从 4.5 加载，如果这些与 Silverlight 不同，则可能会失败。我希望不是。
4.  取决于 Silverlight 托管运行时的功能可能会失败。比如显示 Silverlight 窗口或访问 HTML DOM。这是将代码重构为与 Silverlight 无关的良好指标。可能的错误：

```
 Test Outcome:    Failed

       Result Message:  
       System.DllNotFoundException: Unable to load DLL 'agcore': The specified module could not be found. (Exception from HRESULT: 0x8007007E)
       Result StackTrace:   
    at MS.Internal.XcpImports.Application_GetCurrentNative(IntPtr context, IntPtr& obj)
       at MS.Internal.XcpImports.Application_GetCurrent(IntPtr& pApp)
       at System.Windows.Application.get_Current() 

```

表示需要将`ActiveX`SL 的运行时加载到进程中。

5.  引用 Silverlight Toolkit 版本的测试程序集（`[TestMethod]`内部带有属性）而不是 .NET 会导致测试可见但不运行的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T15:27:39.653

我相信您需要安装 Silverlight 单元测试适配器才能让测试显示在测试资源管理器中

*   [http://visualstudiogallery.msdn.microsoft.com/caca1e81-becb-41e4-9110-bc247f3f400b?SRC=VSIDE](http://visualstudiogallery.msdn.microsoft.com/caca1e81-becb-41e4-9110-bc247f3f400b?SRC=VSIDE)

# highcharts - 在 highstock 上对齐 y 轴刻度“外部”，因此它们与 highcharts 上的相同

> ID：15342300
> 
> 赞同：4
> 
> 时间：2013-03-11T15:22:50.207
> 
> 标签：highcharts, highstock

是否可以在 highstock 图表上将 y 轴刻度“外部”对齐，使其与网格线对齐，而不是“内部”并位于网格线的顶部。highstock 的文档建议默认情况下应将其放置在“外部”，但查看 highstock 图的每个示例，它们似乎总是在“内部”。

`tickPosition: String. The position of the major tick marks relative to the axis line. Can be one of inside and outside. Defaults to "outside".`

Highchart 示例（我想要的）：http: [//jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/line-basic/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/line-basic/)

Highstock 示例（我得到的）：http: [//jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/basic-line/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/basic-line/)

提前谢谢了。

**更新 - 各种解决方案**

我意识到 a只是文件中`Highcharts.StockChart`的预配置版本。`Highcharts.Chart``highstock.js`

`HighCharts.Chart`具有 a 的所有功能`Highcharts.StockChart`- 不仅仅是文件中 a 的`Highcharts.Chart`功能`highcharts.js`。

结果，我刚刚使用了`highstock.js` `Highcharts.Chart`我需要的配置，这将 yAxis 标签放置在正确的位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T15:30:48.600

您可以为 yAxis 使用偏移参数。

[http://api.highcharts.com/highstock#yAxis.offset](http://api.highcharts.com/highstock#yAxis.offset)

编辑：

[http://jsfiddle.net/Z4zwr/1/](http://jsfiddle.net/Z4zwr/1/)

```
 yAxis : {
        labels:{
            align:'right',
            x:-10
        },
        lineWidth : 1,
        offset : 30
    }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-17T09:42:28.620

我找到了一个解决方案（[jsfiddle](http://jsfiddle.net/r4wrf63u/)）：添加`labels: { align: 'left' }`到您的 yAxis 选项，如下所示：

```
yAxis: [{
    labels: {
        align: 'left'
    }
}] 
```

这告诉 Highcharts将*标签**的*左端*与*y *-axis 对齐*。

 **更新了 jsfiddle：http: [//jsfiddle.net/r4wrf63u/](http://jsfiddle.net/r4wrf63u/)**

# android - 如何获取Android系统启动时间

> ID：15342301
> 
> 赞同：10
> 
> 时间：2013-03-11T15:22:50.987
> 
> 标签：android, shell, time, boot

如何在 shell 中获取绝对系统启动时间？我试过 cat/proc/uptime，但这只会返回重启后的时间。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-29T12:30:40.503

基本上是：

```
java.lang.System.currentTimeMillis() - android.os.SystemClock.elapsedRealtime(); 
```

# javascript - 为什么我的背景图像在元素上没有改变？

> ID：15342308
> 
> 赞同：0
> 
> 时间：2013-03-11T15:23:05.287
> 
> 标签：javascript, jquery, html, css

我正在尝试使用 3 像素宽和 89 像素高的单个背景图像。每个 1 像素的垂直条纹将是不同的背景`div`。

我假设将`background-position`by`-1px 0`和设置为`background-size`to`1px 89px`会改变 each 上的背景图像`div`，但事实并非如此。这是设置背景css的javascript。

```
(function () {
jQuery(".featuredBox").each(function (index, elem) {
    jQuery(elem).css({
        "background-image": "url(http://i.imgur.com/mC7DQlt.png)",
            "background-position": -index + "px 0",
            "background-repeate": "repeat-x",
            "background-size": "1px 89px"
    });
});
})(); 
```

这是一个小提琴，它显示了我正在尝试做的事情。

[http://jsfiddle.net/DGWsD/](http://jsfiddle.net/DGWsD/)

========================================

这是图片的链接：

[http://i.imgur.com/mC7DQlt.png](http://i.imgur.com/mC7DQlt.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T15:27:04.707

你拼错了重复。

```
$(document).ready(function () {
    $(".featuredBox").each(function (index, elem) {
        $(elem).css({
            "background-image": "url(http://i.imgur.com/mC7DQlt.png)",
            "background-position": -index + "px 0",
            "background-repeat": "repeat-x",
            "background-size": "1px 89px"
        });
    });
}); 
```

此外，无需`()`在函数结束时立即调用表达式。jQuery 会为您做到这一点。

[**更新小提琴**](http://jsfiddle.net/DGWsD/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:34:56.740

您不能使用 background-size CSS 属性将图像的一部分用作背景。background-size 会将图像缩放到给定的大小，它不会占用它的一部分。和 background-position 将应用于整个背景，而不是重复图像的单个部分。所以你不能水平重复 3px*89px 的 1px*89px。[你可以在http://www.w3schools.com/cssref/css3_pr_background-size.asp](http://www.w3schools.com/cssref/css3_pr_background-size.asp)试试这个， 还有一件事要注意它的背景大小在 IE9 下不起作用。

一个快速的解决方案是使用 Photoshop 或油漆将图像切成 3 部分 1px*89px 并垂直粘贴它们，您可以使用 background-position,backround-repeat 和适当的位置值来水平重复它

# exchangewebservices - EWS：验证服务的凭据

> ID：15342314
> 
> 赞同：1
> 
> 时间：2013-03-11T15:23:18.397
> 
> 标签：exchangewebservices

在获取 url 之前，是否有任何方法可以检查或验证分配给交换服务的用户名和密码？

现在在我的程序中，我创建了一个新服务并为其分配了用户名和密码，如下所示

```
var service = new ExchangeService(exchangeVersion) { Credentials = new WebCredentials(userSmtp, password) };
service.AutodiscoverUrl(userSmtp, RedirectionUrlValidationCallback); 
```

如果凭据有问题（例如密码错误），异常将是 **"Autodiscover service could not be located"**。

这种方法的问题是它并没有真正指定不能带url的原因。那么有什么方法可以让我知道为什么我无法找到该服务？例如，我希望看到一条异常消息，说明用户名或密码错误。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-27T09:12:32.367

查看 Microsoft 远程连接分析器 @ [https://www.testexchangeconnectivity.com/](https://www.testexchangeconnectivity.com/)

```
You can test:
-Microsoft Exchange ActiveSync Connectivity Tests
-Microsoft Exchange Web Services Connectivity Tests
-Microsoft Office Outlook Connectivity Tests
-Internet Email Tests 
```

# html - 在 IE9 中的 DOCTYPE HTML 标准模式下，DIV 溢出隐藏和高度不起作用

> ID：15342317
> 
> 赞同：0
> 
> 时间：2013-03-11T15:23:26.137
> 
> 标签：html, css, internet-explorer-9

我有一个`<div>`溢出：隐藏，`height:100%`它在屏幕上显示 div 内容并适合窗口的高度。

这适用于 Chrome 和 Safari。

IE9，不尊重我的 div `overflow:hidden`，`height:100%`所以它只是扩展 div 来显示内容。

在我的页面上，我有以下文档类型

```
<!DOCTYPE HTML> 
```

这应表明符合最新标准。

如果我完全删除 Doctype，那么在所有浏览器中一切正常，除了字体太大，因为没有指定 doctype。

这可能发生的任何原因？html 和 body 标签在 css 样式表中指定为 height:100%

```
<div style="overflow:hidden;height:100%">
content too tall to fit height of the screen, so a scroll bar is added.  In IE9 it doesn't work because it just extends the height of the DIV
</div> 
```

编辑：我已经包含了完整的 HTML，可以完全复制 IE9 中的问题

```
<!DOCTYPE html>
<html>
   <head>
     <style>
      * { /* Resetting the defaults */
          margin: 0;
          padding: 0;
      }

      html, body { /* Assigning Height To Containers First */
          height: 100%;
      }

      table
      {
        height:100%;
        width:100%;
        border-collapse: collapse  
      }

      .headerRow
      {
        height:50px;
      }

      .sidePanelTd
      {

      }

      .sidePanelDiv
      {
        overflow:auto;
        height:100%;
      }

      .row2
      {

      }

     </style>
</head>
<body style="background-color:White;overflow:auto">
    <table border=0 cellpadding=0 cellspacing=1 id="mainTable">
    <tr class="headerRow">
        <td valign=top colspan=2>Header
        </td>
    </tr>

    <tr class="row2">
        <td>
        td 1
        </td>

        <td class="sidePanelTd">
           <div class="sidePanelDiv">
              td 2 content <br>too <br>tall <br><br><br><br><br><br>
              <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
              <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
              <br><br><br><br><br><br><br><br><br><br><br><br>to fit height of the screen, 
              so a scroll bar is added.  In IE9 it doesn't work because it just extends 
              the height of the DIV
            </div>
        </td>
    </tr>

</table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:29:13.907

这是我尝试过的并且有效

```
<!DOCTYPE html>
<html>
   <head>
     <style>
      * { /* Resetting the defaults */
          margin: 0;
          padding: 0;
      }

      html, body { /* Assigning Height To Containers First */
          height: 100%;
      }
     </style>
</head>
<body>
   <div style="overflow:hidden;height:100%">
      content <br>too <br>tall <br><br><br><br><br><br>
      <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
      <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
      <br><br><br><br><br><br><br><br><br><br><br><br>to fit height of the screen, 
      so a scroll bar is added.  In IE9 it doesn't work because it just extends 
      the height of the DIV
    </div>
</body>
</html> 
```

**正如您评论的那样，您应该添加这个**

```
table, tr, td {
    height: 100%;
    border-collapse: collapse;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:31:27.097

看起来它应该可以工作。确保 DOCTYPE 声明上方没有注释或任何类型的代码，因为这也会使 IE 进入怪癖模式。还要添加`<meta http-equiv="X-UA-Compatible" content="IE=edge" />`只是为了安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:29:27.900

也许您页面上的某些内容触发了 quirksmode，请尝试设置`<meta http-equiv="X-UA-Compatible" content="IE=edge" />`（来自[此帖子），或者您可能会在](https://stackoverflow.com/questions/7168288/page-stuck-in-quirks-mode)[此页面](http://hsivonen.iki.fi/doctype/)上找到一些提示。

# jquery - MVC 4 ApiController 操作上的空参数

> ID：15342318
> 
> 赞同：2
> 
> 时间：2013-03-11T15:23:27.053
> 
> 标签：jquery, asp.net-mvc, asp.net-web-api

我正在将一个字符串集合的 Javascript 数组传递给我的 apicontroller 上的一个 post 操作，有一个数据正在发送（我通过 fiddler 知道这一点）但是当我调试时它似乎并没有真正到达控制器操作代码。我的代码如下，任何帮助将不胜感激。

**编辑：为了澄清起见，调用了控制器操作，但是当有一个列表传递给它时，List stuffsId 的计数为零**

Ajax/Javascript

```
my.sendStuffToController = function (stuffIds, completedHandler) {

        $.ajax({
            dataType: 'json',
            type: 'POST',
            url: my.stuffUrl,
            data: {
                stuffIds: stuffIds
            },
            success: function (data) {

                if (completedHandler !== undefined) {
                    completedHandler(stuffIds);
                }
            }
        });
    }; 
```

我的 ApiController 发布操作

```
 // Post 
    public void PostAsync(List<string> stuffIds)
    {
        var clientProxy = this.proxyFactory.CreateClientProxy(Tokens.EndPoint);
        var clientChannel = clientProxy.GetClientChannel();

        try
        {
            clientChannel.DoStuffAsync(stuffIds);
        }
        finally
        {
            clientProxy.TryCloseAbortClientChannel();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:19:23.897

`dataType`用于指定请求的返回类型。 `contentType`是您应该用来告诉服务器您要发送的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:33:17.067

[此处](http://forum.jquery.com/topic/jquery-post-1-4-1-is-appending-to-vars-when-posting-from-array-within-array)描述了从 jQuery 将数组作为 post 参数传递的可能（也是最常见的）问题之一。

简洁版本：

添加

```
jQuery.ajaxSettings.traditional = true; 
```

在你的 jQuery ajax() 函数调用之前，即

```
jQuery.ajaxSettings.traditional = true;
my.sendStuffToController = function (stuffIds, completedHandler) {

        $.ajax({
            dataType: 'json',
            type: 'POST',
            url: my.stuffUrl,
            data: {
                stuffIds: stuffIds
            },
            success: function (data) {

                if (completedHandler !== undefined) {
                    completedHandler(stuffIds);
                }
            }
        });
    }; 
```

长版：

从某个时间点开始，如果变量是数组，jQuery 开始将方括号附加到变量名，即在您的情况下，它将通过 ajax 调用传输 'stuffIds[]:value1 stuffIds[]:value2' 等。ASP.NET MVC 不喜欢这样并且拒绝接受这样的参数。`jQuery.ajaxSettings.traditional = true`关闭这个 jQuery 的“功能”。

# php - 如何在 Eclipse IDE 下使用 Tomcat 7 运行带有 PHP 文件的 HTML 项目？

> ID：15342320
> 
> 赞同：1
> 
> 时间：2013-03-11T15:23:39.803
> 
> 标签：php, eclipse, tomcat7, phpeclipse

我已经搜索了所有地方，但我找不到我的问题的答案。

我在 Arch Linux 上安装了 Eclipse Juno，我安装了 Apache Tomcat 7 作为服务器和 PHPEclipse 用于编写 PHP 脚本。

我已经创建了一个包含各种 HTML 页面的项目，但是我需要在这个项目中运行一些 PHP 脚本。出于这个原因，我安装了 PHPEclipse，在*运行配置*中我设置了 PHP 可执行目录，但是如果我使用内部 Eclipse 浏览器，PHP 根本不会被解析，它对我来说似乎是常规文本。如果我在外部 Web 浏览器 (Firefox) 中运行访问该页面，我会得到一个白屏。

我对这个问题真的很生气，有人可以帮我吗？

# java - 通过 SMPP 发送阿拉伯语 Flash 信息

> ID：15342328
> 
> 赞同：3
> 
> 时间：2013-03-11T15:24:12.363
> 
> 标签：java, smpp

在 Java 中使用 SMPP 协议时，我在用阿拉伯语发送 flash 消息时遇到问题。我以标准英文格式发送成功，但是当我使用阿拉伯 unicode 时，消息以未知格式发送。

以下是我正在使用的相关示例请求。

```
byte protocolId = 0x00;
byte dataCoding = (byte) 0xf0; //(for flash message)
byte smsClass = 0x00;
request.setShortMessage("\u0628", Data.ENC_UTF8); 
```

日志中的 SMPP 请求在发送请求时显示正确的阿拉伯字母，但在用户端，字母格式不可读。请求的其余设置设置为默认值。将不胜感激任何实现目标的建议。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T11:45:20.490

您需要将 dcs 设置为 0x18。

有两种编码方式允许访问负责闪存消息的消息类参数。

有关进一步阅读，请参阅[http://www.etsi.org/deliver/etsi_ts/100900_100999/100900/07.02.00_60/ts_100900v070200p.pdf第 4 节。](http://www.etsi.org/deliver/etsi_ts/100900_100999/100900/07.02.00_60/ts_100900v070200p.pdf)

您的值 0xf0 表示编码 dcs 的第二种方式，并将消息类设置为 0，即 flash，但字母表也设置为默认值。顺便说一下，这种方式不是UCS2。

另一种方式允许更好的控制。高位十六进制半字节设置为 1，这仅表示低位十六进制半字节包含有关消息类别的信息。然后，较低的十六进制半字节表示使用了 UC2 并且消息类别设置为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-17T12:03:36.887

我还没有遇到适用于所有 SMS-C 的万无一失的方法。

有两种可能性；您将不得不尝试查看哪种（如果有的话）方法适用于您的提供商。

**选项 1.**将 data_coding 参数设置为 0x18。

这在@Martin 的回答中得到了很好的解释，但严格来说，这是一个 GSM/MAP DCS 值（搜索规范“TS 23.038”），而不是 SMPP data_coding 值。此选项预先假定 SMS-C 透明地传递此 SMPP data_coding 值。不能保证这一点 - data_coding 范围 0x0F-0xBF 保留在 SMPP 中，因此如果不尝试，您不知道 SMS-C 会用它做什么。

**选项 2.**将 data_coding 设置为 0x08 和 dest_addr_subunit = 1 ("MS Display")

这是更符合标准的方式，但依赖于您的 SMPP 堆栈和支持 dest_addr_subunit 参数（可选）的 SMS-C 堆栈。

这两个选项都不能保证在网络之间是可移植的。因此，如果您要跨区域内的所有网络连接到聚合器，并且聚合器透明地转发字段，则在向所有目标网络上的电话发送消息时可能会遇到不一致的情况。

# zend-framework2 - Zend Framework 2 两个模板在一个布局中？

> ID：15342330
> 
> 赞同：3
> 
> 时间：2013-03-11T15:24:16.060
> 
> 标签：zend-framework2

在我的应用程序的每个模块中，我都会有一个主要内容部分和一个侧边栏菜单。

在我的布局中，我有以下...

```
<div id="main" class="span8 listings">
    <?php echo $this->content; ?>
</div>

<div id="sidebar" class="span4">
    <?php echo $this->sidebar; ?>
</div> 
```

我的控制器都返回一个 ViewModel 指定内容（见下文），但我如何让它也填充侧边栏？

```
public function detailsAction()
{
    *some code to populate data*

    $params = array('data' => $data);               

    $viewModel = new ViewModel($params);
    $viewModel->setTemplate('school/school/details.phtml');     

    return $viewModel;
} 
```

我有一种感觉，我在这里做了一些根本错误的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T15:43:17.077

您可以使用[部分视图助手包含“子模板”](http://framework.zend.com/manual/2.0/en/modules/zend.view.helpers.html#partial-helper)

```
<div id="main" class="span8 listings">
    <?php echo $this->content; ?>
</div>

<div id="sidebar" class="span4">
    <?php echo $this->partial('sidebar.phtml', array('params' => $this->params)); ?>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:30:53.283

在控制器中，您可以使用[视图模型嵌套](http://framework.zend.com/manual/2.1/en/modules/zend.view.quick-start.html#nesting-view-models)和[布局插件](http://framework.zend.com/manual/2.1/en/modules/zend.mvc.plugins.html#layout-plugin)：

```
public function fooAction()
{
    // Sidebar content
    $content = array(
        'name'     => 'John'
        'lastname' => 'Doe'
    );
    // Create a model for the sidebar
    $sideBarModel = new Zend\View\Model\ViewModel($content);
    // Set the sidebar template
    $sideBarModel->setTemplate('my-module/my-controller/sidebar');

    // layout plugin returns the layout model instance
    // First parameter must be a model instance
    // and the second is the variable name you want to capture the content
    $this->layout()->addChild($sideBarModel, 'sidebar');
    // ...
} 
```

现在您只需在布局脚本中回显变量：

```
<?php
    // 'sidebar' here is the same passed as the second parameter to addChild() method
    echo $this->sidebar;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-21T09:59:05.067

// Module.php 添加它是

```
use Zend\View\Model\ViewModel;

public function onBootstrap($e)
{
    $app = $e->getParam('application');
    $app->getEventManager()->attach('dispatch', array($this, 'setLayout'));
}

public function setLayout($e)
{
    // IF only for this module 
    $matches    = $e->getRouteMatch();
    $controller = $matches->getParam('controller');
    if (false === strpos($controller, __NAMESPACE__)) {
        // not a controller from this module
        return;
    }
    // END IF

    // Set the layout template
    $template = $e->getViewModel();
    $footer = new ViewModel(array('article' => "Dranzers"));
    $footer->setTemplate('album/album/footer');
    $template->addChild($footer, 'sidebar');
} 
```

# php - 在我有for循环功能的页面中？在 for($i=0;$i<=$max;$i++){ Size Query 只从 mysql 数据库中检索一行？

> ID：15342334
> 
> 赞同：0
> 
> 时间：2013-03-11T15:24:40.840
> 
> 标签：php, javascript, mysql

在我有for循环功能的页面中？在mysql 数据库中`for($i=0;$i<=$max;$i++){` `Size Query`只检索一个`row``for loop repeat that size row again and again``new product is entered?`

**页面功能**

```
 <?php
if(is_array($_SESSION['cart'])){
echo '<tr bgcolor="#FFFFFF" style="font-weight:bold"><td align="center"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Item Code</font></td><td align="center"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Product Name</font></td>
<td align="center"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Product Image</font></td>
<td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Price</font></td>
<td><div><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Size</font></div></td>
<td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Options</font></td></tr>';

 $max=count($_SESSION['cart'] );
 for($i=0;$i<=$max;$i++){
 $id=$_SESSION['cart'][$i]['id'];
 $q=$_SESSION['cart'][$i]['qty'];
 $product=get_product_name($id);
 $image=get_product_image($id);
 $ids=get_id($id);
 $itemcode=get_itemcode($id);
 $size=get_size($id);
 if($q==0) continue;

 ?>
 </table>

 <diiv style="float:left; margin-left:42px;"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;">
 <?php echo $itemcode; ?>
 <input type="hidden" name="itemcode[]" value="<?php echo $itemcode?>" /></font></div><br />

 <div style="float: left;margin-left: 122px; margin-top: -14px;"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;">
 <?php echo $product?>
 <input type="hidden" name="product[]" value="<?php echo $product?>" /></font></div><br />

<div style="float: left;margin-left: 387px;margin-top: -24px;"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;">
<img name="image" id="image" src="admin/uploads/small0_<?php echo $image?>" width="150" height="150">
<input type="hidden" name="image[]" id="image"  value="<?php echo $image?>"  /> </font></div><br />

<div style="float: left;margin-left: 548px;margin-top: -147px;"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;">
<?php echo get_price($id) ?>
<input type="hidden" name="price[]" id="price" value="<?php echo get_price($id)?>" /></font></div><br />

<?php //foreach ($size as $sizes) { ?>
<div style="float: left;margin-left: 625px;margin-top: -149px;"><font style="font-family:Arial,Helvetica,sans-serif;font-size:15px; color:#000;">
<?php echo $size; ?> 
</font><input type="hidden" name="size" value="<?php echo $size; ?>" /></font></div><?php //}?><br />

<div style="float: left;margin-left:686px;margin-top: -150px;"><a href="javascript:del(<?php echo $id?>)">
<input type="button" class="button5" value="Remove" /></a></div><br /> 
<hr style="width:800px" />  

<?php                   
}
?>

 <?php
 }
 else{
 echo "There are no items in your shopping cart!";
 }
 ?> 
```

**尺寸查询**

```
function get_size($id){
$result=mysql_query("SELECT size FROM mywishlist order by id") or die("My Wish Size Problem"."<br/><br/>".mysql_error());
while($row=mysql_fetch_array($result)){
return $row['size'];
}} 
```

**Mywishlist 表格截图** ![现在看到尺寸列中有两种尺寸](../Images/f9e44ddd167902e0d567fbbce9eef2c3.png)

**页面截图** ![页面截图](../Images/080d12debbc9cc6189697e46e91e61f1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:28:02.903

因为您的函数**每次**调用该函数时`get_size()`都会重新运行查询，所以您会**立即**从第一行的循环中返回。

 ****简而言之，您需要学习基本的编程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:35:07.287

您的问题在于`qet_size()`功能的构造。

首先，您的查询不是根据您的目标正确构建的。你的功能是

```
function get_size($id){ 
```

但你不`$id`考虑。正确的查询如下

```
SELECT size FROM mywishlist WHERE id = $id 
```

您的问题是您正在获取表中的**所有**行，并且仅按`id`. 然后你遍历每一个，**只**返回你点击的第一行的大小。我提供的查询将只返回一行，然后您可以返回给定的值。

**注意**：自 PHP 5.5 起，MySQL_* 已被弃用。使用 MySQLi_* 或 PDO****

# rabbitmq - RabbitMQ 扇出交换问题

> ID：15342340
> 
> 赞同：8
> 
> 时间：2013-03-11T15:24:58.700
> 
> 标签：rabbitmq, messaging, amqp, rabbitmq-exchange

我可以使用[Publish/Subscribe](http://www.rabbitmq.com/tutorials/tutorial-three-java.html) RabbitMQ Java 教程创建一个扇出交换，并且任何连接的消费者都将收到一条消息的副本。我不想以动态/编程方式声明交换和绑定，而是想在连接任何消费者之前创建交换和绑定。我通过 RabbitMQ 管理控制台完成了这项工作。然而，出于某种原因，我的消费者以循环方式接收消息，而不是所有接收消息的副本。我错过了什么？以下是一些代码片段：

出版商：

```
channel.basicPublish("public", "", null, rowId.getBytes("UTF-8")); 
```

消费者：

```
QueueingConsumer consumer = new QueueingConsumer(channel);
            channel.basicConsume("myqueue", false, consumer); 
```

...在 RabbitMQ 管理控制台中，我创建了一个类型为“fanout”的交换“公共”，并将该交换的绑定设置为“myqueue”。

我会很感激任何帮助！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-11T19:10:03.187

听起来您的所有消费者都订阅了同一个队列。当多个消费者订阅同一个队列时，RabbitMQ 的默认行为是轮询所有订阅消费者之间的消息。[请参阅RabbitMQ 教程 #2：工作队列](http://www.rabbitmq.com/tutorials/tutorial-two-java.html)中的“循环调度” 。

扇出交换是为了确保绑定到它的每个队列都获得消息的副本，而不是每个消费者。如果您希望每个消费者都获得消息的副本，通常您会让每个消费者创建自己的队列，然后绑定到交换器。我不确定您为什么要避免以编程方式创建/绑定队列，但是如果您提前知道订阅者的数量并为每个订阅者创建一个队列，您可以获得相同的效果。

# javascript - insertBefore 语句中的参数无效

> ID：15342341
> 
> 赞同：0
> 
> 时间：2013-03-11T15:25:02.220
> 
> 标签：javascript

在这段代码中：

```
function comrespond(){
    function addresform(){
    var resid = this.getAttribute('id'),
    grandParent = this.parentNode.parentNode,
    newrespondform = '<div class="commentresponse"><span></span><span><p class="author">Leave a reply:</p><form id="commentform" action="http://split.snippetspace.com/wp-comments-post.php" method="post" onsubmit="addcomment(); return false;"><input id="author" aria-required="true" name="author" type="text" placeholder="Your name"/><input id="email" aria-required="true" name="email" type="text" placeholder="Email address" /><textarea id="comment" aria-required="true" name="comment" rows="8"></textarea><input id="submit" name="submit" type="submit" value="Post Comment" /><input id="comment_post_ID" name="comment_post_ID" type="hidden" value="'+resid+'" /></form></span></div>';
    grandParent.parentNode.insertBefore(newrespondform, grandParent.nextSibling);
    }
    var responsebtn = document.getElementsByClassName('comment-reply-link');
    for(var i = 0; i < responsebtn.length; i++){
                    bindEvt(responsebtn[i], "click", addresform);
                }; 
```

此行在 IE10 中返回为“无效参数”：

```
grandParent.parentNode.insertBefore(newrespondform, grandParent.nextSibling); 
```

我似乎无法弄清楚这一点。它应该在 cetain div 的祖父母之后插入一段代码。有什么想法吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:27:45.737

newrespondform 是一个字符串。insertBefore 接受一个 DOM 元素。您应该将其更改为：

```
newrespondform = document.createElement('div');
newrespondform.innerHTML = '<span></span><span><p class="author">Leave a reply:</p><form id="commentform" action="http://split.snippetspace.com/wp-comments-post.php" method="post" onsubmit="addcomment(); return false;"><input id="author" aria-required="true" name="author" type="text" placeholder="Your name"/><input id="email" aria-required="true" name="email" type="text" placeholder="Email address" /><textarea id="comment" aria-required="true" name="comment" rows="8"></textarea><input id="submit" name="submit" type="submit" value="Post Comment" /><input id="comment_post_ID" name="comment_post_ID" type="hidden" value="'+resid+'" /></form></span>'; 
```

这是 insertBefore 的文档：[https ://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore)

# python - python生成定义长度的随机列表

> ID：15342342
> 
> 赞同：1
> 
> 时间：2013-03-11T15:25:07.363
> 
> 标签：python

我正在尝试编写一个程序，该程序生成一个包含 1-5 的十个随机整数的列表，然后在每个整数重复时打印该数字。然后打印删除重复项的第二个列表。现在，我什至根本无法生成第一个列表。我不断收到 TypeError: 'int' object is not iterable

这是我到目前为止所拥有的：

```
def randomTen():
    """return list of ten integers and the number of times each one
    appears"""
    firstList= []
    for num in range(1,11):
        x= int(random.randint(1,6))
        list1= firstList.append(x)
    print(list1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T15:30:15.303

首先请注意，这可以通过列表理解更轻松地完成：

```
firstList = [random.randint(1,6) for num in range(1, 11)] 
```

至于您的功能，您需要执行以下操作：

```
firstList= []
for num in range(1,11):
    x= int(random.randint(1,6))
    firstList.append(x)
print(firstList) 
```

`append`不返回任何内容，它会更改列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:30:43.517

```
def randomTen():
    """return list of ten integers and the number of times each one
    appears"""
    firstList= []
    for num in range(1,11):
        x= int(random.randint(1,6))
        firstList.append(x)
    return firstList 
```

您首先创建一个空列表，将元素附加到它，然后返回它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:31:03.967

1) x 是一个整数，而不是一个列表。所以只需使用

```
list1 = firstList.append(x) 
```

2）如果要删除重复，您可能只想将列表转换为集合：

```
print(set(list1)) 
```

# android - 通过点击 EditText 加载 XML 布局

> ID：15342346
> 
> 赞同：0
> 
> 时间：2013-03-11T15:25:21.477
> 
> 标签：android, android-layout

我是 Android 的新手。我喜欢通过点击 EditText 来加载布局 xml。该特定 xml 填充有带有文本的按钮。当用户按下其中一个按钮时，按钮上的文本将显示在 EditText 中。我有两个问题。

```
(1)EditText IDEditTxt = (EditText) findViewById(R.id.IDeditText); 
```

在该行中，即使 IDeditText 在 R.id 中确定，IDEditTxt 始终为空。我尝试了所有可以从互联网上找到的方法，例如清理、删除 xml、重写 xml。我都试过了，但还是有问题。但是，可以出于其他目的读取 EditText 中的文本。我不明白为什么 IDEditTxt 是 walays null 并且可以读取 EditText 中的文本。

`new AlertDialog.Builder(this).setTitle("New Tracker").setView(addView) .setPositiveButton("ADD", new DialogInterface.OnClickListener() { public void onClick(DialogInterface dialog, int whichButton) { addWord((TextView) addView.findViewById(R.id.IDeditText)); } }).setNegativeButton("Cancel", null).show();`

(2)如何通过点击EditText来实现加载布局xml。然后按钮上显示的文本将显示在该 EditText 中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:22:54.680

> 在该行中，IDEditTxt 始终为空，即使 IDeditText 在 R.id 内是确定的......我不明白为什么 IDEditTxt 是 walays 空，但可以读取 EditText 内的文本。

您`EditText`存在于您的`Layout`文件中，但`EditText`您尝试声明和使用的对象是`null`直到您`inflate`的`layout`. 您需要`inflate`第`layout`一个，通过使用`setContentView(R.layout.your_layout_file);`或`inflater`像在`AlertDialog`

> (2)如何通过点击EditText来实现加载布局xml。然后按钮上显示的文本将显示在该 EditText 中。

通常最好不要像这样`layouts`在同一个中创建单独的。`Activity`您可能会遇到尝试使用`View`第一次`Layout`膨胀或效率问题的错误。你应该创建一个`Layout`for the`Actvity`并将它用于整个事情，除非你有一个你不能的特定原因。您可以`Activity`在所需的操作发生时开始新的操作，也可以将其`layout`设置`visibility`为然后在操作发生后进行操作。希望这会有所帮助，并且通过一本书和教程的建议是一个非常好的主意。现在可能需要更多时间，但在您了解框架的运行方式后肯定会为您节省时间。`Buttons``gone``visible`

# oracle - oracle报告更改列宽

> ID：15342348
> 
> 赞同：0
> 
> 时间：2013-03-11T15:25:31.120
> 
> 标签：oracle, oracle10g, oraclereports

我尝试更改列宽`choosing : proprty inspector->column->width`但宽度被锁定我无法更改值，哪里可能有问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:24:52.667

您所指的列宽是数据模型中数据列的大小。例如，如果您有一个数据库列 as`varchar2(10)`并且您在报表的数据模型中查询该列，那么宽度将为 10。如果您将报表布局中的字段基于此数据列，它的宽度也将是 10。这不是你可以改变的。但是，如果您只想让报表布局中的字段*更宽*，那么只需使用图形布局编辑器来调整列的大小（用鼠标单击并拖动边缘）。

# vim - YADR 和 Vim 高亮颜色

> ID：15342350
> 
> 赞同：1
> 
> 时间：2013-03-11T15:25:41.650
> 
> 标签：vim

我已经为 vim 安装了 YADR，[https://github.com/skwp/dotfiles](https://github.com/skwp/dotfiles)，它弄乱了我的 Visual Block 突出显示颜色。我有黑色背景，我的突出显示颜色是深灰色，我看不到我突出显示的内容。任何帮助如何更改突出显示颜色？我想保持背景黑色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T16:31:30.813

您应该运行 : `:verbose highlight`以查看已修改的每个亮点以及在哪里。

您可以对其进行细化`:verbose highlight Visual`以查看视觉选择的特定修改。

然后尝试注释掉它最后修改的地方，看看当你重新输入命令时会出现什么。

您可以在您的中强制执行新的默认值，也可以`.vimrc`删除正在修改它的插件。

# scons - Scons - 如何使用 MSVSProject builder 指定 VS 项目的附加内容

> ID：15342351
> 
> 赞同：0
> 
> 时间：2013-03-11T15:25:42.683
> 
> 标签：scons

是否可以让 scons MSVSProject builder 获取要生成的项目文件的附加包含目录列表？我有很多需要在那里的第 3 方。另外，如何使用构建器将配置类型从 makefile 项目更改为 exe？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:00:53.393

我不太了解那个构建器，但是您是否尝试过将包含路径添加到环境中，如下所示？

```
env = Environment()
env.Append(CPPPATH= ['path1', 'path2'])

project = env.MSVSProject(...) 
```

这应该会正确填充 MSVS 项目文件。

您可以找到这个和其他构造变量，例如[此处](http://www.scons.org/doc/production/HTML/scons-user/a5025.html)记录的 LIBPATH 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-24T20:04:42.660

对于任何搜索此内容的人：配置设置为 MakeFile，因为 VS 没有“本机”编译内容。该项目设置为使用生成文件来触发 SCons（所以基本上你最终将 VS 作为一个 gui，但在引擎盖下它仍然只是 SCons）。

如果调用 SCons 构建一个 exe，那么您的 VS 项目将构建一个 exe 等。

如果 SCons 使用包含路径正确设置，这些也将起作用。

请注意，您传递给 MSVSProject 的文件文件路径虽然需要相对于项目目录，否则当您在解决方案资源管理器中双击文件时，它会抱怨找不到该文件（并且搜索的路径将是错误的）

# c# - 如何使用 mvc4 和 simplemembership 更改用户名

> ID：15342352
> 
> 赞同：0
> 
> 时间：2013-03-11T15:25:42.913
> 
> 标签：c#, asp.net, asp.net-mvc-4, simplemembership

为什么不能更改简单会员用户名。我试过了

```
MembershipUser memUser = Membership.GetUser(existingUser);
memUser.UserName = model.UserName;
Membership.UpdateUser(memUser); 
```

我知道 MembershipUser.UserName 是只读的。没有其他可用的方法来更改用户名。

有没有办法解决这个问题？

编辑：新问题。当线

```
 var confirmationToken = WebSecurity.CreateUserAndAccount(model.UserName, Request["Password"], new { NameFirst = model.NameFirst, NameLast = model.NameLast, ContactId = newContact.ContactId },true); 
```

运行时，我得到一个 MembershipCreateUserException 并说用户名已经在使用中（实际上不是）。它设法将用户添加到我的 UserSecurity 表（UserProfile）中，但没有将其添加到成员资格表中。它试图将用户添加到 pages_Membership 表中，而不是我创建的 UserMembership 表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:34:54.657

您可能无法使用 MembershipProvider 编辑用户名。在 SimpleMembership 中，您必须将 UserProfile 表添加到存储用户名的模型中。

您在初始化时指定表：

```
WebSecurity.InitializeDatabaseConnection("DBname", "UserProfileTable", "IdColumn", "UsernameColumn", autoCreateTables: true); 
```

# json - 为什么猫鼬用“[object Object]”替换子文档？

> ID：15342354
> 
> 赞同：3
> 
> 时间：2013-03-11T15:25:43.530
> 
> 标签：json, node.js, mongodb, mongoose

我在使用嵌入式文档时遇到了奇怪的行为，我不知道是我做错了什么还是一个错误。

这是我的模型：

```
var mg = require('mongoose')
 , S  = mg.Schema;

var subject = new S({
    name: String
  , properties: [{
        name: String
      , value: String
    }]
});

module.exports = mg.model('Subject',subject); 
```

当我尝试添加一个属性时，它会以某种方式转换为`"[object Object]"`：

```
 console.log(req.body); // --> { name: 'height', value: 120 }
  console.log(typeof req.body); // --> object
  ob.Subject.findByIdAndUpdate(req.params.id, {$push: {properties: req.body}}, function(err, doc) {
    if(err) throw err;
    res.send(doc);
  }); 
```

返回`doc`的是：

```
{_id: '...', name: 'sss', properties:[ "[object Object]" ]} 
```

我使用 mongo CLI 检查数据库中的文档并将正确的值放入其中。

```
//the document as seen in mongo CLI:
{
  _id: '...', name: 'sss', 
  properties: [ "[object Object]", {name: "aaa", value: "bar"} ]
} 
```

然后我尝试了这个：

```
ob.Subject.findById(id, function(err, doc) {
  res.send(doc);
} 
```

然后返回的文档是：

```
{ 
  _id: '...', name: 'sss', 
  properties:[ "[object Object]", "[object Object]" ]
} 
```

我认为，发生的事情是猫鼬以某种方式将子文档转换为该字符串。此外，我不认为这是我的`res.send()`错，因为：

*   我没有使用`toJson`或`toObject`明确地，我根本不处理 JSON 转换
*   `res.send()`不是问题，因为即使我`util.inspect`的价值 - 它是一样的
*   通过猫鼬进行写入和读取时似乎都发生了无效转换

你有没有遇到过类似的行为？有办法解决吗？

我刚开始使用 mongoose，不知道如何回退到 mongodb native 来更新和获取文档并检查这种行为是否仍然存在（我怀疑）。

任何有用的提示表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:32:24.847

尽管 Node.js 和 MongoDB 都使用 Javascript，但它们并不共享相同的内存空间。他们甚至没有在同一个进程中运行。因此，他们必须通过 tcp 通信并序列化数据。

我会假设你在格式化 mongoDB 请求时`req.body`得到了'ed。`toString()`

*编辑*

这是正常的，因为您`properties`将模型的属性声明为字符串数组。

像这样声明它：

```
properties: Object 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:10:58.317

我认为您的“属性”属性定义错误。我了解您要做什么，但我怀疑您需要将键/值对定义为它自己的类型，以便您的代码变为：

```
 var mg = require('mongoose')
     , S  = mg.Schema;

    var keyValue = new S({
        key: String, value: String});

    var subject = new S({
        name: String
      , properties: [keyValue]
    });

    module.exports = mg.model('Subject',subject); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T18:12:38.650

You could try this:

```
ob.Subject.findByIdAndUpdate(req.params.id, {$push: {properties: {name: req.body.name, value: req.body.value}}}, function(err, doc) {
    if(err) throw err;
    res.send(doc);
}); 
```

# jquery - Jquery复选框更改

> ID：15342356
> 
> 赞同：0
> 
> 时间：2013-03-11T15:25:48.717
> 
> 标签：jquery, checkbox, onchange

我在这里查看了许多答案，但没有一个对我有真正的帮助。我注意到我的 jQuery 有一个奇怪的问题。我意识到代码有点快和讨厌，但一旦我让它正常工作，我会整理它。

```
jQuery('input#use_points').change(function() {

    if(jQuery(this).not(':checked')) {
       alert('not checked');
       jQuery( "#amount" ).val(0);
       jQuery( "#pounds" ).val(0);
       jQuery(".ui-slider-handle").css({'left': '0'});
       jQuery(".points-text").hide();
       jQuery(".use-points-labels").hide();
       jQuery("#slider-range-max").hide();
       jQuery('#updatecart').click();
    } 

    if(jQuery(this).is(':checked')) {
       alert('is checked');
       jQuery( "#amount" ).val(1);
       jQuery( "#pounds" ).val(0.05);
       jQuery(".points-text").show();
       jQuery(".use-points-labels").show();
       jQuery("#slider-range-max").show();
       jQuery('#updatecart').click();

    }
}); 
```

您会注意到我有两个警报“未检查”和“已检查”第一个 if 语句按预期工作。但是，如果未选中，然后我单击复选框，它将贯穿两个语句。给我警报“未检查”，然后紧接着“已检查”

但是，我不明白为什么会发生这种情况，因为它只是在更改而不是复选框的单击操作时被调用。有人有想法吗 ？

提前致谢。

/////////////////////////////// 编辑 ////////////////// ///////////////////////我现在已经回答了我自己的问题。出于某种原因，以这种方式编写它是有效的：

```
jQuery('input#use_points').change(function() {

    if(this.checked) {
       alert('is checked');
       jQuery( "#amount" ).val(1);
       jQuery( "#pounds" ).val(0.05);
       jQuery(".points-text").show();
       jQuery(".use-points-labels").show();
       jQuery("#slider-range-max").show();
       jQuery('#updatecart').click();
    } else {
       alert('not checked');
       jQuery( "#amount" ).val(0);
       jQuery( "#pounds" ).val(0);
       jQuery(".ui-slider-handle").css({'left': '0'});
       jQuery(".points-text").hide();
       jQuery(".use-points-labels").hide();
       jQuery("#slider-range-max").hide();
       jQuery('#updatecart').click(); 
    } 
```

谁能解释为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:45:06.750

JQuery`.not(selector)`从您的选择中删除与选择器的条件匹配的元素，而不是检查条件是否不正确。在您的情况下，它将返回一个没有元素的 jquery 对象，而不是`false`.

换句话说，`.not()`不是相反的`.is()`。这就是为什么它不起作用

[http://api.jquery.com/not/](http://api.jquery.com/not/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:29:19.850

为什么不把逻辑的第二部分放在 else 语句中呢？

```
jQuery('input#use_points').change(function() {

if(jQuery(this).not(':checked')) {
   alert('not checked');
   jQuery( "#amount" ).val(0);
   jQuery( "#pounds" ).val(0);
   jQuery(".ui-slider-handle").css({'left': '0'});
   jQuery(".points-text").hide();
   jQuery(".use-points-labels").hide();
   jQuery("#slider-range-max").hide();
   jQuery('#updatecart').click();
} 

else {
   alert('is checked');
   jQuery( "#amount" ).val(1);
   jQuery( "#pounds" ).val(0.05);
   jQuery(".points-text").show();
   jQuery(".use-points-labels").show();
   jQuery("#slider-range-max").show();
   jQuery('#updatecart').click();

}
}); 
```

# go - 进行浮点数除法

> ID：15342357
> 
> 赞同：5
> 
> 时间：2013-03-11T15:25:51.493
> 
> 标签：go

我尝试在 Go 中获得 2.4/0.8 == 3

```
w:=float64(2.4)
fmt.Println(math.Floor(w/0.8),math.Floor(2.4/0.8) ) 
```

它给了我“2 3”。

问题是为什么`math.Floor(w/0.8)`不给我3。是浮点数的精度限制吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T15:46:37.653

程序输出是正确的。IEEE 格式中许多实数的表示并不精确。第一个数字实际上（在其有限的 64 位版本中）小于 3，因此 floor 正确返回“2”。第二个是在编译时使用更高的精度计算的。

推荐[阅读](http://floating-point-gui.de/)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-11T16:12:52.463

是的，这是精度限制。float64 非常精确，但 2.4 不能完全以二进制形式存储。当两个数字都是常数时，在编译时以更高的精度进行计算，当结果四舍五入到 float64 时，结果正好是 3。但是当其中一个数字是变量时，必须进行计算在运行时，结果为 2.9999999999999996，Floor 截断为 2。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-07-24T08:08:39.513

虽然这不能回答问题（为什么），但我发现这个页面正在寻找一个圆形函数，所以以防万一有人发现它有帮助，这是我自己的解决方案：

```
 func Round(val float64) (float64) {
        if float64(int(val)) < val {
            return float64(int(val) + 1)
        }
        return val
    } 
```

# jquery - jQuery Datepicker onClose 选择下一个

> ID：15342360
> 
> 赞同：5
> 
> 时间：2013-03-11T15:26:02.460
> 
> 标签：jquery, datepicker, jquery-ui-datepicker

我有一个系统，人们可以在其中添加多个起止日期，即屏幕截图：![http://screencast.com/t/Q7MHQVLnn4J9](../Images/645ed4eb7dd6828868cf0d5b6201d1e8.png)

在选择第一个日期时，onClose 事件会设置第二个输入的日期并打开它。IE

```
datePickers = function() {
    $(".from_date").datepicker({
      minDate: 'D',
      dateFormat: "dd/mm/yy",
      defaultDate: "+1w",
      numberOfMonths: 2,
      onClose: function(selectedDate) {
        $(".to_date").datepicker("option", "minDate", selectedDate);
        return $(".to_date").datepicker("show");
      }
    });
    return $(".to_date").datepicker({
      minDate: '+1D',
      dateFormat: "dd/mm/yy",
      defaultDate: "+1w",
      numberOfMonths: 2
    });
  }; 
```

当我有 2,3 或更多并编辑第一个或第二个时，我的问题就变成了....关闭时，它会打开最后一个输入。

我试过使用 .next('to_date') 和最接近的('to_date') 但它不起作用。

关于如何解决这个问题的任何建议。

根据要求提供小提琴：http: [//jsfiddle.net/FdfPY/](http://jsfiddle.net/FdfPY/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T15:49:18.330

而不是使用`return $(".to_date").datepicker("show");`，请执行以下操作：

```
$(".from_date").datepicker({
      minDate: 'D',
      dateFormat: "dd/mm/yy",
      defaultDate: "+1w",
      numberOfMonths: 2,
      onClose: function(selectedDate) {
        $(".to_date").datepicker("option", "minDate", selectedDate);
        $(this).parent().next().children().focus();
      }
    });
 $(".to_date").datepicker({
      minDate: '+1D',
      dateFormat: "dd/mm/yy",
      defaultDate: "+1w",
      numberOfMonths: 2
    }); 
```

演示：http: [//jsfiddle.net/FdfPY/1/](http://jsfiddle.net/FdfPY/1/)

***编辑：***

如果它是嵌套的，则使用以下内容：

```
$(".from_date").datepicker({
      minDate: 'D',
      dateFormat: "dd/mm/yy",
      defaultDate: "+1w",
      numberOfMonths: 2,
      onClose: function(selectedDate) {
        $(".to_date").datepicker("option", "minDate", selectedDate);
        $(this).parents('.span2').next().children().find('.to_date').focus();
      }
    });
 $(".to_date").datepicker({
      minDate: '+1D',
      dateFormat: "dd/mm/yy",
      defaultDate: "+1w",
      numberOfMonths: 2
    }); 
```

演示：http: [//jsfiddle.net/FdfPY/5/](http://jsfiddle.net/FdfPY/5/)

# c - 通过引用返回的 C 样式字符串

> ID：15342361
> 
> 赞同：0
> 
> 时间：2013-03-11T15:26:02.977
> 
> 标签：c, c-strings

谁能告诉我为什么这段代码不起作用？

*   我将`char *`指针传递给我的拆分函数并拆分我的缓冲区。
*   为传入的每个 arg (char *) 在堆上分配内存，
*   然后将子字符串 strcpy 到这个新缓冲区中。
*   一切正常，直到我从该方法返回并尝试打印任何变量。
*   分段失败

```
void split(char * buffer, int num, ...)
{
  char* string;
  char* tofree;
  string = strdup(trim(buffer));

  if (string != NULL) {
    tofree = string;

    va_list arguments; 

    //Initializing arguments to store all values after num 
    va_start ( arguments, num );           

    int i = 0;
    for (i = 0; i < num; i++ )        
    {
        //Item is the final store place of the split substring
        char * arg = va_arg ( arguments, char *);

        //Split the strings, delimiter is space
        char * splitBuffer = strsep(&string, " ");

        //Allocate the buffer memory to store the splitBuffer
        arg  =  malloc(sizeof(char*)*strlen(splitBuffer));

        strcpy(arg ,splitBuffer);
        printf("Buffer [%s] -- [%s]n", buffer, arg);
    }
    va_end ( arguments ); // Cleans up the list

    free(tofree);
  }
}

        char * a;
        char * b;
        char * c;
        split(buffer,3,a,b,c);
        printf("Print A = %s B = %s C = %s\n", a,b,c); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:33:26.027

@tjameson 的意思是，我认为：

```
 void split(char * buffer, int num, ...)
  {
     char* string;
     char* tofree;
     string = strdup(trim(buffer));

     if (string != NULL)
     {
        tofree = string;

        va_list arguments; 

        //Initializing arguments to store all values after num 
        va_start ( arguments, num );           

        int i = 0;
        for (i = 0; i < num; i++ )        
        {
           //Item is the final store place of the split substring
           char ** arg = va_arg ( arguments, char **);

           //Split the strings, delimiter is space
           char * splitBuffer = strsep(&string, " ");

           //Allocate the buffer memory to store the splitBuffer
           *arg  =  malloc(sizeof(char*)*strlen(splitBuffer));

           strcpy(*arg ,splitBuffer);
           printf("Buffer [%s] -- [%s]\n", buffer, *arg);
        }
        va_end ( arguments ); // Cleans up the list

        free(tofree);
     }
  }

    char * a;
    char * b;
    char * c;
    split(buffer,3,&a,&b,&c);
    printf("Print A = %s B = %s C = %s\n", a,b,c); 
```

它应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:36:52.963

在 C 中，**指针是按值传递的**。如果您将指针传递给函数，然后在该函数中更改其值（它指向的对象的地址），它不会像 C++ 引用那样传播到原始指针。

在这里，将更改(being , or )`malloc`指向的地址，但仅限于本地。实际的,和（比如说）将保持未初始化状态。**你的编译器可能会警告你。**`arg``a``b``c``a``b``c``main`

 **传递这些指针时使用双重间接：

```
split(buffer,3, &a, &b, &c); 
```

...以及`split`函数中的正确代码，例如：

```
char **arg = va_arg ( arguments, char ** );
*arg = malloc(...);
// etc. 
```**

# c++ - 使用比较功能

> ID：15342363
> 
> 赞同：2
> 
> 时间：2013-03-11T15:26:12.917
> 
> 标签：c++, stl, operator-overloading, overloading

我有这个功能

```
std::vector <std::vector <int> > puddles;
std::set <int> is_checked;

size_t M, N;

bool v_compare(int a, int b){
    return puddles[(a-a%M)/M][a%M] < puddles[(b-b%M)/M][b%M];
} 
```

我想找到对应于最小值的集合元素`puddles`（我`i*M+j`用作集合中的键）。所以我试图用我的函数作为谓词`min_element`

```
close(*std::min_element(is_checked.begin(), is_checked.end(), v_compare)); 
```

但我收到了这个错误

```
:113:82: error: no matching function for call to 'min_element(std::set<int>::iterator, std::set<int>::iterator, <unresolved overloaded function type>)'
:113:82: note: candidates are:
/usr/include/c++/4.6/bits/stl_algo.h:6173:5: note: template<class _FIter> _FIter std::min_element(_FIter, _FIter)
/usr/include/c++/4.6/bits/stl_algo.h:6201:5: note: _FIter std::min_element(_FIter, _FIter, _Compare) [with _FIter = std::_Rb_tree_const_iterator<int>, _Compare = bool (TFlood::*)(int, int)]
/usr/include/c++/4.6/bits/stl_algo.h:6201:5: note:   no known conversion for argument 3 from '<unresolved overloaded function type>' to 'bool (TFlood::*)(int, int)' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:57:16.883

指向函数的指针和指向成员函数的指针是有区别的。不是的类成员为`static`您提供指向成员函数的指针。但`std::min_element`只接受指向函数或其他可调用类型的指针，指向成员函数的指针不符合条件，因为没有指针或对类对象的引用就无法调用它。正如您所发现的，如果您尝试使该函数成为`static`成员，那么它就无法访问该成员`M`。（也许`puddles`也是，如果那也是会员的话。）

看起来您使用的是支持 lambdas 的 g++ 4.6。所以最简单的解决方案是：

```
close(*std::min_element(is_checked.begin(), is_checked.end(),
      [this](int a, int b) { return puddles[a/M][a%M] < puddles[b/M][b%M]; })); 
```

（我去掉了减法，因为整数类型的除法总是向零舍入，所以`(a-(a%M))/M`结果总是与 相同`a/M`。）确保使用`-std=c++0x`编译器标志。lambda 魔术负责“捕获”`this`指针以供比较对象稍后使用。

# django - 将 django 应用程序部署到生产服务器时出现 TemplateDoesNotExist 错误

> ID：15342364
> 
> 赞同：0
> 
> 时间：2013-03-11T15:26:14.433
> 
> 标签：django, apache, deployment

环境：

ubuntu on aws
django-1.4.5 in virtalenv
apache-2.2 with wsgi

django setting.py:

```
TEMPLATE_DIRS = (os.path.join(os.path.dirname(__file__), '..', 'templates').replace('\\', '/'),) 
```

apache2错误日志：

```
[Mon Mar 11 22:18:55 2013] [error] [client 116.238.171.102] mod_wsgi (pid=1794): Exception occurred processing WSGI script '/home/ubuntu/Sites/tushanwan/tushanwan/wsgi.py'.
[Mon Mar 11 22:18:55 2013] [error] [client 116.238.171.102] Traceback (most recent call last):
[Mon Mar 11 22:18:55 2013] [error] [client 116.238.171.102]   File "/home/ubuntu/.virtualenvs/django-1.4.5/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 241, in __call__
[Mon Mar 11 22:18:55 2013] [error] [client 116.238.171.102]   File "/home/ubuntu/.virtualenvs/django-1.4.5/lib/python2.7/site-packages/django/core/handlers/base.py", line 179, in get_response
[Mon Mar 11 22:18:55 2013] [error] [client 116.238.171.102]   File "/home/ubuntu/.virtualenvs/django-1.4.5/lib/python2.7/site-packages/django/core/handlers/base.py", line 228, in handle_uncaught_exception
[Mon Mar 11 22:18:55 2013] [error] [client 116.238.171.102]   File "/home/ubuntu/.virtualenvs/django-1.4.5/lib/python2.7/site-packages/django/utils/decorators.py", line 91, in _wrapped_view
[Mon Mar 11 22:18:55 2013] [error] [client 116.238.171.102]   File "/home/ubuntu/.virtualenvs/django-1.4.5/lib/python2.7/site-packages/django/views/defaults.py", line 32, in server_error
[Mon Mar 11 22:18:55 2013] [error] [client 116.238.171.102]   File "/home/ubuntu/.virtualenvs/django-1.4.5/lib/python2.7/site-packages/django/template/loader.py", line 145, in get_template
[Mon Mar 11 22:18:55 2013] [error] [client 116.238.171.102]   File "/home/ubuntu/.virtualenvs/django-1.4.5/lib/python2.7/site-packages/django/template/loader.py", line 138, in find_template
[Mon Mar 11 22:18:55 2013] [error] [client 116.238.171.102] TemplateDoesNotExist: 500.html 
```

我花了一天时间，在我的 aws ubuntu 实例上尝试了很多方法来解决这个问题，但它们都不适合我。我使用相同的方式在本地 ubuntu 服务器上部署 django 应用程序，并且可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T15:38:25.120

来自：[https ://docs.djangoproject.com/en/dev/topics/http/views/#the-500-server-error-view](https://docs.djangoproject.com/en/dev/topics/http/views/#the-500-server-error-view)

> 如果 DEBUG 设置为 True（在您的设置模块中），那么您的 500 视图将永远不会被使用，而是会显示回溯，并带有一些调试信息。

因此，虽然在您的开发服务器中一切都可以正常工作，但如果在您的生产服务器中您没有 500.html（在模板文件夹的根目录中），那么框架将出现错误。

**附注**：Django 1.4.x 需要 404.html 和 500.html 文件；在 Django 1.5.x 中，不再严格要求 500.html 和 404.html 文件，这要归功于[这个补丁](https://github.com/django/django/commit/8bd7b598b6de1be1e3f72f3a1ee62803b1c02010)

# c++ - 在 C++ 中使用循环创建字符数组

> ID：15342368
> 
> 赞同：0
> 
> 时间：2013-03-11T15:26:15.707
> 
> 标签：c++, loops

我正在尝试创建一个 C++ Tic-Tac-Toe 游戏，但是当我修改字符数组（棋盘本身）时，它会在放置它的行上创建两个字符，然后在下一行的第一个元素上创建两个字符。下面的代码是收集用户输入并将其放入板上的代码。

```
void changeBoard(int position)
{
int row = position / 3;
int column = position - (row*3);
if((player == 1 & run == 1) || (player == 0 && run == 0))
    Board[row][column] = 'X';
else
    Board[row][column] = 'O';
}

void displayBoard()
{
int i;
int z;
    for(i=0;i<3;i++)
    {
    cout << "\n\n";
    for(z=0;z<3;z++)
    {
        cout << "||" << "  " << Board[i][z] << "  ";
        if(z == 2)
            cout << "||";
    }
}
cout << "\n";
} 
```

我省略了其余的代码。然而，当用户输入位置 3（第一行的最后一个元素）时，输出会在那里创建一个符号，并在下一行的第一个元素上创建一个符号。

关于它为什么这样做的任何帮助或解释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:09:26.567

使用`modulo`( ) 查找列，如果您想成为棋盘的右上角，`%`请确保从位置减去 1 。`3`

# Javascript 示例：http: [//jsfiddle.net/howderek/nPMvz/](http://jsfiddle.net/howderek/nPMvz/)

```
void changeBoard(int position)
{
position--;
int row = position / 3;
int column = position % 3;
if((player == 1 & run == 1) || (player == 0 && run == 0))
    Board[row][column] = 'X';
else
    Board[row][column] = 'O';
}

void displayBoard()
{
int i;
int z;
    for(i=0;i<3;i++)
    {
    cout << "\n\n";
    for(z=0;z<3;z++)
    {
        cout << "||" << "  " << Board[i][z] << "  ";
        if(z == 2)
            cout << "||";
    }
}
cout << "\n";
} 
```

# javascript - jquery 用 div 包裹元素

> ID：15342371
> 
> 赞同：0
> 
> 时间：2013-03-11T15:26:29.397
> 
> 标签：javascript, jquery

大师们，

我有这个。

```
<td style="width:100px">
Queued:465
Rejects:3897
Offers:31
</td> 
```

并且需要使它成为

```
<td style="width:100px">
<span class="label">Queued:</span><span class="data">465</span> <br>
<span class="label">Rejects:</span><span class="data">3897</span><br>
<span class="label">Offers:</span><span class="data">31</span>
</td> 
```

而不是一行（排队：465 拒绝：3897 报价：31），我想在数字之后休息一下（它们是动态的）。排队，拒绝，报价是固定的。

这就是我尝试过的。

```
$('td:contains(Queued:)').html(function() {
    return $(this).html().replace('Queued:', '<span class="label">Queued: </span>');
});
$('td:contains(Rejects:)').html(function() {
    return $(this).html().replace('Rejects:', '<br><span class="label">Rejects: </span>');
});
$('td:contains(Offers:)').html(function() {
    return $(this).html().replace('Offers:', '<br><span class="label">Offers: </span>');
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T15:32:52.010

```
$("td").html(function(i, val) {
    return $.trim(
        val.replace(/[a-z]+/ig, '<span class="label">$&</span>')
           .replace(/\d+/g, '<span class="data">$&</span>')
    ).replace(/\n/g, "<br />");
}); 
```

**演示：http:** [//jsfiddle.net/dfRzY/](http://jsfiddle.net/dfRzY/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:51:58.423

您也可以走 .split 路线而不是 Regex 路线。

```
var $td = $("td"),
    rows = $td.html().trim().split("\n"),
    html = [];

for (var x=0; x<rows.length; x++){
  var line = rows[x].split(":");

  html.push(
    "<span class='label'>"+line[0]+":</span>"+
    "<span class='data'>"+line[1]+"</span>"
  );
}
$td.html(html.join("<br>")); 
```

编辑：[小提琴](http://jsfiddle.net/VsAGL/)

# orchardcms - 为汇总和详细信息页面创建自定义“模板”

> ID：15342372
> 
> 赞同：0
> 
> 时间：2013-03-11T15:26:33.747
> 
> 标签：orchardcms, orchardcms-1.6

在为我的新 OrchardCMS 网站创建主题后，我有另外两组想要创建的模板（不确定模板是否是正确的词）。基本上我想说“将此模板用于所有标签和博客存档汇总页面”。

我可以为每个博客月存档和标签创建一个单独的图层，并将 HTML 小部件添加到带有标题信息的页面顶部，但这不可行......我想让它更加动态。

在这里寻找最好的方法。我想知道是否添加了一些小部件的自定义模块。然后我可以创建两层：一层用于博客档案，一层用于标签。该模块可以有两个小部件，一个用于博客档案，一个用于标签。然后他们可以动态地将这些内容添加到页面顶部。

想法？

# php - 基于用户输入的动态mysql查询

> ID：15342373
> 
> 赞同：0
> 
> 时间：2013-03-11T15:26:34.200
> 
> 标签：php, mysql

我有一个mysql查询，目前按月汇总数据：

```
 $sql = SELECT SellerName, 
           SUM(IF(ReportMonth = 201201, 1,0)) AS Jan, 
           SUM(IF(ReportMonth = 201202, 1,0)) AS Feb, 
           SUM(IF(ReportMonth = 201203, 1,0)) AS Mar, 
           SUM(IF(ReportMonth = 201204, 1,0)) AS Apr, 
           SUM(IF(ReportMonth = 201205, 1,0)) AS May, 
           SUM(IF(ReportMonth = 201206, 1,0)) AS Jun,
           SUM(IF(ReportMonth = 201207, 1,0)) AS Jul,
           SUM(IF(ReportMonth = 201208, 1,0)) AS Aug,     
           SUM(IF(ReportMonth = 201209, 1,0)) AS Sep,
           SUM(IF(ReportMonth = 201210, 1,0)) AS Oct,      
           SUM(IF(ReportMonth = 201211, 1,0)) AS Nov,    
           COUNT(*) AS YTD
           FROM onlineDATA
           WHERE BuyerZipCode IN ($zips_query) 
           GROUP BY SellerName 
```

这很好用。

但是，我需要调整它以允许用户输入月份 - 即用户将选择开始和结束月份。

我可以将 datepicker 数据格式化为现有的 yyyymm 格式 - 但是我将如何在 PHP 中制定查询以调整可变月份并考虑多年（例如 2012 年 10 月至 2013 年 2 月）？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:31:14.797

你的方法只适用于一年；否则，如果您不希望将多年中的月份组合在一起，则需要额外的列。您还应该使用`date`函数而不是检查整数值（您不应该将日期存储为 int）。

如果您需要动态方法，则需要在 PHP 端进行动态查询准备（获取开始/结束日期并生成 SQL）。

这可能是您正在寻找的解决方案：

```
<?php

$startDate = '201201';
$endDate = '201303';

$formattedStartDate = strtotime( SUBSTR($startDate, 0, 4) . '-' . SUBSTR($startDate, -2, 2) . '-01' );
$formattedEndDate = strtotime( SUBSTR($endDate, 0, 4) . '-' . SUBSTR($endDate, -2, 2) . '-01' );

$sql = "SELECT SellerName, \n";

while ($formattedStartDate <= $formattedEndDate) {
    $sql .= 'SUM(IF(LEFT(ReportMonth, 4) = ' . date('Y', $formattedStartDate) . ' AND RIGHT(ReportMonth, 2) = ' . date('m', $formattedStartDate) . ")) AS '" . date('M Y', $formattedStartDate);

    if($formattedStartDate <> $formattedEndDate) {
        $sql .= "', \n";
    }
    else {
        $sql .= "'\n";
    }

    $formattedStartDate = strtotime('+1 month', $formattedStartDate);
}

$sql .= 'COUNT(*) AS YTD
FROM onlineDATA
WHERE BuyerZipCode IN ($zips_query) 
GROUP BY SellerName';

echo $sql; 
```

**结果**

```
选择卖家姓名，
SUM(IF(LEFT(ReportMonth, 4) = 2012 AND RIGHT(ReportMonth, 2) = 01)) AS 'Jan 2012',
SUM(IF(LEFT(ReportMonth, 4) = 2012 AND RIGHT(ReportMonth, 2) = 02)) AS 'Feb 2012',
SUM(IF(LEFT(ReportMonth, 4) = 2012 AND RIGHT(ReportMonth, 2) = 03)) AS 'Mar 2012',
SUM(IF(LEFT(ReportMonth, 4) = 2012 AND RIGHT(ReportMonth, 2) = 04)) AS 'Apr 2012',
SUM(IF(LEFT(ReportMonth, 4) = 2012 AND RIGHT(ReportMonth, 2) = 05)) AS 'May 2012',
SUM(IF(LEFT(ReportMonth, 4) = 2012 AND RIGHT(ReportMonth, 2) = 06)) AS 'Jun 2012',
SUM(IF(LEFT(ReportMonth, 4) = 2012 AND RIGHT(ReportMonth, 2) = 07)) AS 'Jul 2012',
SUM(IF(LEFT(ReportMonth, 4) = 2012 AND RIGHT(ReportMonth, 2) = 08)) AS 'Aug 2012',
SUM(IF(LEFT(ReportMonth, 4) = 2012 AND RIGHT(ReportMonth, 2) = 09)) AS 'Sep 2012',
SUM(IF(LEFT(ReportMonth, 4) = 2012 AND RIGHT(ReportMonth, 2) = 10)) AS 'Oct 2012',
SUM(IF(LEFT(ReportMonth, 4) = 2012 AND RIGHT(ReportMonth, 2) = 11)) AS 'Nov 2012',
SUM(IF(LEFT(ReportMonth, 4) = 2012 AND RIGHT(ReportMonth, 2) = 12)) AS 'Dec 2012',
SUM(IF(LEFT(ReportMonth, 4) = 2013 AND RIGHT(ReportMonth, 2) = 01)) AS 'Jan 2013',
SUM(IF(LEFT(ReportMonth, 4) = 2013 AND RIGHT(ReportMonth, 2) = 02)) AS 'Feb 2013',
SUM(IF(LEFT(ReportMonth, 4) = 2013 AND RIGHT(ReportMonth, 2) = 03)) AS 'Mar 2013'
计数(*) 为年初至今
来自在线数据
WHERE BuyerZipCode IN ($zips_query)
按卖家名称分组
```

[查看演示](http://codepad.org/rCzhuLGq)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:40:36.573

你应该能够做到这一点，我敢肯定这是一个开始：

```
SELECT SUM(ReportMonth) FROM SellerName
WHERE BuyerZipCode IN ($zips_query)
AND ReportMonth > '$start_date'
AND ReportMonth < DATE_ADD('$start_date', INTERVAL 1 YEAR)
GROUP BY ReportMonth 
```

例如

```
SELECT SUM(ReportMonth) FROM SellerName
WHERE BuyerZipCode IN (1,2,3,4,5,6)
AND ReportMonth > '2013-01-01'
AND ReportMonth < DATE_ADD('2013-01-01', INTERVAL 1 YEAR)
GROUP BY ReportMonth 
```

# asp.net-mvc-3 - 在 MVC 3 应用程序中使用 log4net 在哪里捕获异常？

> ID：15342374
> 
> 赞同：0
> 
> 时间：2013-03-11T15:26:36.577
> 
> 标签：asp.net-mvc-3, logging, exception-handling, log4net

我将以下代码放在全局文件中以在我的 mvc 应用程序中捕获异常：

```
 void Application_Error(Object sender, EventArgs e)
        {
            Exception ex = Server.GetLastError().GetBaseException();
            log.Error("Exception", ex);
        } 
```

以及以下内容以跟踪调用的控制器：

```
public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            if (log.IsDebugEnabled)
            {
                var loggingWatch = Stopwatch.StartNew();
                filterContext.HttpContext.Items.Add(StopwatchKey, loggingWatch);

                var message = new StringBuilder();
                message.Append(string.Format("Executing controller: {0}, action: {1}",
                    filterContext.ActionDescriptor.ControllerDescriptor.ControllerName,
                    filterContext.ActionDescriptor.ActionName));

                log.Debug(message);
            }
        } 
```

我可以做更多的事情来捕获涉及数据库、安全性（如无法连接到 ldap）、数据问题/转换等的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:31:26.433

第二个代码片段可以添加到全局操作过滤器（在 中注册`global.asax`）。第一个片段可以添加到单独的`IHttpModule`实现中以将其从 global.asax 中删除。

除此之外，您已将代码添加到将捕获所有异常的两个地方。第一个将针对所有非 MVC 相关异常调用，而后一个仅针对 MVC 异常（不包括路由）

# c# - 单击“OnLoggingOut”操作时会话未结束

> ID：15342375
> 
> 赞同：0
> 
> 时间：2013-03-11T15:26:43.280
> 
> 标签：c#, asp.net

我正在尝试使用以下代码注销网站上的会话。但是，当我单击注销按钮时，似乎没有任何反应。

这是我的代码：

```
<asp:LoginStatus ID="LoginStatus1" OnLoggingOut="Logout_Click"  runat="server" /> 
```

和 c#:

```
public void Logout_Click(object sender, EventArgs e)
    {

        Session.Abandon();
        FormsAuthentication.SignOut();
        FormsAuthentication.RedirectToLoginPage();

    } 
```

此代码没有结束会话，甚至没有重定向到登录页面。

网络配置：

```
<authentication mode="Forms" >
      <forms loginUrl="url"   timeout="20" domain="domain">
      </forms>
    </authentication> 
```

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:12:20.143

Write a below code on your button click event

```
protected void Page_Load(object sender, EventArgs e)
{
    HttpContext.Current.Session.Abandon();
    HttpContext.Current.Response.Cookies.Clear();
    FormsAuthentication.SignOut();

    Response.Redirect("~/LoginPage.aspx");

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:27:02.907

```
(object sender, LoginCancelEventArgs e) 
```

是 OnLoggingOut 方法的实际签名。而且您不需要调用 session.abandon。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:32:54.193

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.loginstatus.onloggingout.aspx)，您的`OnLoggingOut`方法应该有 1 个参数类型`LoginCancelEventArgs`。

您在 Logout_Click 方法中的代码应该没问题，但它没有被调用，因为您的方法签名不正确。

# entity-framework - EF Code First：在 SaveChanges 之前调用 DetectChanges 好吗？

> ID：15342377
> 
> 赞同：13
> 
> 时间：2013-03-11T15:26:52.593
> 
> 标签：entity-framework, ef-code-first

我读过几篇关于实体框架的文章（文章1、文章 2 [） ，它多次调用](http://patrickdesjardins.com/blog/entity-framework-increasing-performance-with-autodetectchangesenabled)[DetectChanges](https://stackoverflow.com/questions/5943394/why-is-inserting-entities-in-ef-4-1-so-slow-compared-to-objectcontext)，这使得处理大量数据时速度非常慢。

例如，`autoDetectChanges`我可以在初始化上下文时禁用它，然后在调用`DetectChanges()`之前调用`.SaveChanges()`吗？

上下文会识别插入/更改/删除的实体吗？

```
var _dbContext = new ProjectContext();
_dbContext.Configuration.AutoDetectChangesEnabled = false;

// add/edit/delete entities

_dbContext.ChangeTracker.DetectChanges();
_dbContext.SaveChanges(); 
```

这种方法应该有效吗？或者它可能会产生隐藏的错误？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-11T18:40:57.867

[Arthur Vickers](https://stackoverflow.com/users/2012410/arthur-vickers)[在这篇博](http://blog.oneunicorn.com/2012/03/12/secrets-of-detectchanges-part-3-switching-off-automatic-detectchanges/)文中定义了一个`DetectChanges`不需要调用（甚至之前`SaveChanges`）的规则：

> 如果之前不需要调用 DetectChanges，则对 EF 代码的调用不会使上下文处于需要调用的状态。

关于**Add**和**Delete**这些是“EF 代码”方法，因为您要么调用`Add`or`Delete`要么将状态设置`context.Entry(entity).State`为`Added`or `Deleted`。因此，如果您只是遍历一堆实体并添加或删除它们，那么您根本不需要调用`DetectChanges`。

关于**编辑**，我相信它更微妙一些。当您使用任一更新实体时...

```
context.Entry(entity).CurrentValues.SetValues(someObject); 
```

...或通过使用...的属性`DbContext`API

```
context.Entry(entity).Property(e => e.SomeProperty).CurrentValue = someValue; 
```

...那么您也不需要`DetectChanges`（甚至不需要`SaveChanges`），因为这些又是对“EF 代码”的调用。

如果您只是更改实体的属性值，例如...

```
entity.SomeProperty = someValue; 
```

[...然后上面链接的同一博客文章中](http://blog.oneunicorn.com/2012/03/12/secrets-of-detectchanges-part-3-switching-off-automatic-detectchanges/)的第二条规则适用：

> 每当非 EF 代码更改实体或复杂对象的任何属性值时，都可能需要调用 DetectChanges。

`DetectChanges`而且我认为，`SaveChanges` **如果**您只是遍历一些实体，将它们加载到上下文中或将它们附加到上下文并更改一些（标量和复杂）属性值，那么实际上您只需要一次调用。

如果你做更复杂的事情（也许关系改变？或其他什么？）你的方法可能不再安全，因为

1.  `AutoDetectChanges`如果之前只需要一次，则不会以它的方式实现并在许多 EF 方法中调用`SaveChanges`

2.  [在同一篇博](http://blog.oneunicorn.com/2012/03/12/secrets-of-detectchanges-part-3-switching-off-automatic-detectchanges/)文中再次提到

    > 如果代码对实体的属性进行更改更改而不是仅调用 Add 或 Attach，则根据规则 2，将需要调用 DetectChanges，至少作为 SaveChanges 的一部分，**并且可能在此之前也可能**。

    （我强调）

不幸的是，我不知道`DetectChanges`在比之前更早的阶段调用时会显示的代码示例`SaveChanges`是必要的。但是由于上面的第 1 点，我确信存在这样的例子。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-07-16T02:01:18.560

可以解决的主要问题之一`DetectChanges`是当我们有`ManyToMany`关系时在 EF 中持久化数据和`AutoDetectChanges=false`.

# node.js - 如何使用 node.js 上传目录？

> ID：15342383
> 
> 赞同：1
> 
> 时间：2013-03-11T15:27:00.107
> 
> 标签：node.js, upload, directory

我是 node 新手，想使用 node.js 上传目录。有人可以帮忙吗？谢谢 如果有可能怎么办？如果不是，那为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:03:39.413

您只能上传文件。
但是有解决方法，您可以

1.  将文件夹转换为 zip 文件（客户端），这实际上取决于您的情况。
2.  上传压缩文件
3.  然后解压到服务器

您可以使用谷歌了解如何执行其中的每一步。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-30T11:58:56.483

您可以使用任何文件夹上传库，例如[https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)或 [https://dropzonejs.com](https://dropzonejs.com)，它允许您使用 HTML5 功能拖放整个目录。

# spring - java.lang.ClassCastException: org.apache.xerces.parsers.SAXParser 不能转换为 org.xml.sax.XMLReader Hibernate

> ID：15342388
> 
> 赞同：0
> 
> 时间：2013-03-11T15:27:15.213
> 
> 标签：spring, hibernate, orm, xml-parsing, orchestra

我正在使用 Hibernate `JPA`/进行一个项目`spring`。

它引发以下异常。在做了一些阅读之后，我从依赖项中删除了所有 xml-apis，但它抛出了同样的错误。有任何想法吗 ？？

```
java.lang.ClassCastException: org.apache.xerces.parsers.SAXParser cannot be cast to org.xml.sax.XMLReader
    at org.xml.sax.helpers.XMLReaderFactory.loadClass(XMLReaderFactory.java:199)
    at org.xml.sax.helpers.XMLReaderFactory.createXMLReader(XMLReaderFactory.java:150)
    at org.dom4j.io.SAXHelper.createXMLReader(SAXHelper.java:83)
    at org.dom4j.io.SAXReader.createXMLReader(SAXReader.java:894)
    at org.dom4j.io.SAXReader.getXMLReader(SAXReader.java:715)
    at org.dom4j.io.SAXReader.setFeature(SAXReader.java:218)
    at org.hibernate.internal.util.xml.MappingReader.setValidationFor(MappingReader.java:114)
    at org.hibernate.internal.util.xml.MappingReader.readMappingDocument(MappingReader.java:77)
    at org.hibernate.cfg.Configuration.add(Configuration.java:478)
    at org.hibernate.cfg.Configuration.add(Configuration.java:474)
    at org.hibernate.cfg.Configuration.add(Configuration.java:647)
    at org.hibernate.cfg.Configuration.addInputStream(Configuration.java:685)
    at org.hibernate.ejb.Ejb3Configuration.addClassesToSessionFactory(Ejb3Configuration.java:1248)
    at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:1048)
    at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:693)
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:73)
    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:225)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417) 
```

当我试图在码头网络服务器中初始化网络上下文时，它会抛出上述异常。[Spring (3.0.6.Release) & hibernate (4.1.10.final)]

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:util="http://www.springframework.org/schema/util"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:p="http://www.springframework.org/schema/p"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context-3.0.xsd
       http://www.springframework.org/schema/tx
       http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

<import resource="classpath*:/META-INF/spring-orchestra-init.xml"/>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
        </bean>

<bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor"/>

<bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/>

<tx:annotation-driven transaction-manager="transactionManager"/>

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"    
      p:persistenceUnitName="persistenceUnit">
    <property name="dataSource" ref="dataSource"/>
    <property name="jpaDialect">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect"/>
    </property>
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="true"/>
            <property name="generateDdl" value="false"/>
        </bean>
    </property>
    <property name="loadTimeWeaver">
        <bean class="org.faces.controller.jpa.JpaLoadTimeWeaver"/>
    </property>

</bean>

<bean class="org.springframework.beans.factory.config.CustomScopeConfigurer">
    <property name="scopes">
        <map>
            <entry key="conversation.access">
                <bean class="org.apache.myfaces.orchestra.conversation.spring.SpringConversationScope">
                    <property name="advices">
                        <list>
                            <ref bean="persistentContextConversationInterceptor" />
                        </list>
                    </property>
                </bean>
            </entry>
        </map>
    </property>
</bean>

<bean id="jpaPersistentContextFactory" class="org.apache.myfaces.orchestra.conversation.spring.JpaPersistenceContextFactory">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>
<bean id="persistentContextConversationInterceptor" class="org.apache.myfaces.orchestra.conversation.spring.PersistenceContextConversationInterceptor">
    <property name="persistenceContextFactory" ref="jpaPersistentContextFactory" />
</bean>

<bean name="org.apache.myfaces.orchestra.conversation.AccessScopeManagerConfiguration"
      class="org.apache.myfaces.orchestra.conversation.AccessScopeManagerConfiguration"
      scope="singleton" lazy-init="true">

    <property name="ignoreViewIds">
        <set>
            <value>/__ADFv__.xhtml</value>
        </set>
    </property>
</bean>
<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver" />
    <property name="url" value="jdbc:oracle:thin:@rum:1541:CHEZTST" />
    <property name="username" value="username" />
    <property name="password" value="password" />
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:27:47.510

删除 loadtimeweaver 属性后，它工作正常。

`<property name="loadTimeWeaver">
<bean class="org.faces.controller.jpa.JpaLoadTimeWeaver"/> </property>`

这是显示的链接，尽管它已经很老了，但它可以工作

[https://jira.springsource.org/browse/SPR-2596](https://jira.springsource.org/browse/SPR-2596)

# jquery - 隐藏在ajax上的点击输入

> ID：15342389
> 
> 赞同：0
> 
> 时间：2013-03-11T15:27:15.997
> 
> 标签：jquery, ajax

我有一个由第三方模块添加的按钮。单击此按钮时，第三个模块会发送一个 ajax 请求（我无法更改第三方代码）。我怎样才能隐藏这个按钮`ajaxStart`并显示它`ajaxStop`？

我试过了：

```
$('#buttonId').click(function() {
    $(this).ajaxStart(function() { $(this).hide(); }).ajaxStop(function() { $(this).show(); });
}); 
```

但它不能正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:00:03.590

`this`问题是在与函数相关的函数中使用这个匿名函数而不是点击事件，所以你可以使用这种方法，

```
$('#buttonId').click(function() {
    var button = $(this);
    button.ajaxStart(function() { button.hide(); }).ajaxStop(function() { button.show(); });
}); 
```

编辑：在您发表评论后，我检查了`ajaxStart`我认为它是您的某个插件，但它是全局事件，因此您不能将该人附加到按钮，您只能将其附加到文档，并且当 AJAX 请求开始或结束时触发相关事件。请看这里。 [http://api.jquery.com/ajaxStart/](http://api.jquery.com/ajaxStart/)当您将该事件附加到一个对象时，您可以使用它访问它，但它永远不会导致触发事件。所以你可以做这样的事情。

```
$(document).ajaxStart(function() {
  $( "#buttonId" ).hide();
});

$(document).ajaxStop(function() {
  $( "#buttonId" ).show();
}); 
```

要触发此事件，您必须发出 AJAX 请求，例如；

```
$( "#buttonId" ).click(function () { $("#divId").load("DivContent.aspx") }); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:28:45.320

我找到了简单的解决方案，感谢您的帮助：

```
var tmp = false;

$('.button').click(function() {
    $(this).hide();
    tmp = $(this);
});

$(document).ajaxStop(function() {
    if (tmp) {
         tmp.show();
         tmp = false;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:34:55.540

见小提琴：http: [//jsfiddle.net/4YJyk/2/](http://jsfiddle.net/4YJyk/2/)

```
$('#buttonId').click(function() {
    $(this).ajaxStart(function() { $("#buttonId").hide(); }).ajaxStop(function() { $("#buttonId").show(); });
}); 
```

已编辑

# html - PhoneGap 说 ChildBrowser 插件不存在

> ID：15342390
> 
> 赞同：0
> 
> 时间：2013-03-11T15:27:16.197
> 
> 标签：html, ios, xcode, cordova, childbrowser

我正在使用 Xcode 和 PhoneGap 和 HTML 以及 ChildBrowser 为 iPhone 开发应用程序。我正在尝试显示从 Dropbox 检索的 PDF（该站点已添加到 Cordova.plist 中的外部数组列表），**但未找到错误插件“ChildBrowserCommand”，或者不是 CDVPlugin。检查您在 Cordova.plist**中的插件映射，`console`我不明白出了什么问题。在 Cordova.plist 中，我添加到插件字典中；

![在此处输入图像描述](../Images/03e1bdc2fa99b79221c315e0be1be7a5.png)

JavaScript 是；

```
childbrowser = ChildBrowser.install();

function viewOnline(site) {
  cordova.exec("ChildBrowserCommand.showWebPage", encodeURI(site));
} 
```

HTML是；

```
<button onclick="viewOnline('http://dl.dropbox.com/u/97184921/Internship%20Stuff/Holidays.pdf');">View Online</button></li> 
```

我对 ChildBrowser 还很陌生，并不真正了解问题所在；我该如何修复代码？

**编辑**

如果有帮助，这是控制台中出现的完整错误；

*2013-03-11 16:05:00.327 TestApp1[62039:15b03] 错误：未找到插件“ChildBrowser”，或者不是 CDVP 插件。检查 Cordova.plist 中的插件映射。*

*2013-03-11 16:05:00.328 TestApp1[62039:15b03] -[CDVCommandQueue executePending] [第 102 行] FAILED pluginJSON = [null,"ChildBrowser","showWebPage",[" [http://dl.dropbox.com /u/97184921/Internship%2520Stuff/Holidays.pdf](http://dl.dropbox.com/u/97184921/Internship%2520Stuff/Holidays.pdf) "]]*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:08:22.117

我自己回答了 - 你需要确保*所有*ChildBrowser 文件都在 Xcode 的**Plugins**文件夹中（可以在屏幕左侧看到 index.html 文件等 - 一开始可能是空的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:28:35.867

从`.js`您的 plist 中删除 并`Command`从您的 javascript 调用中删除。

# c++ - 在openGL中画一个9点圆？

> ID：15342391
> 
> 赞同：0
> 
> 时间：2013-03-11T15:27:18.883
> 
> 标签：c++, opengl

我正在尝试为我的 openGL 类项目绘制一个 9 点圆，有问题吗？我的老师没有教我们如何用圆圈做几乎任何事情。他给了我们关于如何“绘制”三角形的代码，并告诉我们找到法线圆的顶点和中心点的公式。但从未触及过如何使用它们进行编码，尤其是他希望我们这样做的方式。他告诉我们使用

```
class GLintPoint {
public:
GLint x, y;
}; 
```

我们可以将它们命名为 A、B、C，然后找到顶点说 a = B - A。我认为这将是 ax = Bx - Ax 并且原因相同，但我不确定。他不得不离开去接受医疗（我假设是手术）所以我不能问他，他仍然在本周末到期。

他在离开之前给了我们这个代码。

```
#include <stdlib.h>
#include <math.h>
#include <GL/glut.h>
#include "canvas.h"

const int screenWidth = 640;
const int screenHeight = 480;

Canvas cvs(screenWidth, screenHeight, "Relative Drawing Example", 1);

class GLintPoint {
public:
GLint x, y;
};

#define NUM 3
static GLintPoint List[NUM];

// myInit

void myInit(void)
{
glClearColor(1.0, 1.0, 1.0, 0.0);
glColor3f(0.0f, 0.0f, 0.0f);
glPointSize(1.0);
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluOrtho2D(0.0, (GLdouble )screenWidth, 0.0, (GLdouble)screenHeight);
}

// myDisplay
void myDisplay(void)
{
glClear(GL_COLOR_BUFFER_BIT);
glFlush();
}

void mykey(unsigned char key, int x, int y)
{
if (key == 'Q' || key == 'q') exit(0);
}

// draw arc 

void draw_arc(GLdouble cx, GLdouble cy, GLdouble r, GLdouble startAngle,
GLdouble sweepAngle)
{
glBegin(GL_LINE_STRIP);
for (GLdouble t = startAngle; t < startAngle+sweepAngle; t += 0.001)
{
    GLdouble x = cx + r*cos(DEG2RAD*t);
    GLdouble y = cy + r*sin(DEG2RAD*t);
    glVertex2d(x, y);
}
glEnd();
}  

// myMouse

void myMouse(int button, int state, int x, int y)
{

static int last = -1;

if (button == GLUT_LEFT_BUTTON && state == GLUT_DOWN && last < (NUM -1))
{
    List[++last].x = x;
    List[  last].y = screenHeight - y;
    glClear(GL_COLOR_BUFFER_BIT);
    glBegin(GL_LINE_STRIP);
        for (int i = 0; i <= last; i++) {           
    if(last <=0){
    cvs.moveTo(List[i].x, List[i].y);       
    }
    else
    cvs.lineTo(List[i].x, List[i].y);
    }
    int i = 0;
    cvs.lineTo(List[i].x, List[i].y);
    glEnd();
    glFlush();
}
else if(button == GLUT_RIGHT_BUTTON && state == GLUT_DOWN)
    last = -1;

GLintPoint a.x = 

}

// main

int main(int argc, char ** argv)
{ 
//glutInit(&argc, argv);
//glutInitDisplayMode(GLUT_SINGLE| GLUT_RGB);
//glutInitWindowSize(screenWidth, screenHeight);
//glutInitWindowPosition(100, 150);
//glutCreateWindow("case study 4.2");
glutDisplayFunc(myDisplay);
glutMouseFunc(myMouse);
glutKeyboardFunc(mykey);
myInit();
glutMainLoop();
return 0;
} 
```

和

```
#include <math.h>
// define some ascii key names
#define GLUT_KEY_ESC 27

// Keeps track of a single point ( turtle position )
class Point2d {
public:
Point2d() { x = y = 0.0f; }
Point2d( float xx, float yy ) { x = xx; y = yy; }
void set( float xx, float yy ) { x = xx; y = yy; }
void setX( float xx ) { x = xx; }
void setY( float yy ) { y = yy; }
float getX() { return x; }
float getY() { return y; }
void draw( void ) { glBegin( GL_POINTS );
                    glVertex2f( (GLfloat)x, (GLfloat)y );
                    glEnd();
                  }
private:
float x, y;
};

//Data type for an array of points
class Point2dArray {
 static const int MAX_NUM = 100;
 public:
    int num;
Point2d pt[MAX_NUM];
};

class IntRect {
public:
 IntRect() { l = 0; r = 100; b = 0; t = 100; }
 IntRect( int left, int right, int bottom, int top )
    { l = left; r = right; b = bottom; t = top; }
 void set( int left, int right, int bottom, int top )
    { l = left; r = right; b = bottom; t = top; }
 void draw( void ) { glRecti( l, b, r, t ); }
 int getL() { return l; }
 int getR() { return r; }
 int getT() { return t; }
 int getB() { return b; }

  private:
   int l, r, b, t;
 };

class RealRect {
public:
RealRect() { l = 0; r = 100; b = 0; t = 100; }
RealRect( float left, float right, float bottom, float top )
    { l = left; r = right; b = bottom; t = top; }
void set( float left, float right, float bottom, float top )
    { l = left; r = right; b = bottom; t = top; }
void draw( void ) { glRectf( l, b, r, t ); }
float ratio( void ) { return (r - l)/(t - b); }
float getL() { return l; }
float getR() { return r; }
float getT() { return t; }
float getB() { return b; }

  private:
   float l, r, b, t;
};

class Canvas {
public:
Canvas( int width, int height, char* windowTitle, int buffer );
void setWindow( float l, float r, float b, float t );
void setViewport( int w, int h );
void autoSetWindow(void);

 float getWindowAspectRatio( void );

 void lineTo( float x, float y );
 void lineTo( Point2d p );
void moveTo( float x, float y );
void moveTo( Point2d p );
void turnTo( float angle );
void turn( float angle );
void forward( float dist, int visible );
int getWinId(void);
void initCT(void);
void scale2D(double, double);
void translate2D(double, double);
void rotate2D(double);

  private:
  Point2d CP;
  float CD;
  IntRect viewport;
  RealRect window;
  int winId;
  float delx, dely;
  char code1, code2;
  char formCode(Point2d p);
  void chopLine(Point2d &p, char c);
  int clipSegment(Point2d &p1, Point2d &p2);
  };

Canvas::Canvas( int width, int height, char* windowTitle, int buffer = 1 ) {
 char* argv[1];
 char dummyString[1];
 argv[0] = dummyString;
 int argc = 1;

 glutInit( &argc, argv );

 glutInitDisplayMode( ((buffer == 1) ? GLUT_SINGLE : GLUT_DOUBLE) | GLUT_RGB );
 glutInitWindowSize( width, height );
 glutInitWindowPosition( (1024 - width) / 2, (768 - height) / 2 );
 winId = glutCreateWindow( windowTitle );
 setWindow( 1000.0f, -1000.0f, 1000.0f, -1000.0f );
 CP.set( 0.0f, 0.0f );
 CD = 0.0f;
 }  

int Canvas::getWinId(void)
{
  return winId;
}

float Canvas::getWindowAspectRatio(void)
{
  return (window.getR() - window.getL())/(window.getT() - window.getB());
}

void Canvas::setWindow( float l, float r, float b, float t ) {
window.set( l, r, b, t );
glMatrixMode( GL_PROJECTION );
glLoadIdentity();
gluOrtho2D( (GLdouble) l, (GLdouble) r, (GLdouble) b, (GLdouble) t );
}

void Canvas::autoSetWindow(void) {
float l = window.getL();
float r = window.getR();
float b = window.getB();
float t = window.getT();

glMatrixMode( GL_PROJECTION );
glLoadIdentity();
gluOrtho2D( (GLdouble) l, (GLdouble) r, (GLdouble) b, (GLdouble) t);
}

void Canvas::setViewport( GLsizei width, GLsizei height) {
float aspectRatio = getWindowAspectRatio();
GLint l, b;
GLsizei w, h;

 if ((float) width / (float) height >= aspectRatio) {
l = (GLint) ((width - height * aspectRatio)/2.0);
    b = 0;
    w = (GLsizei) (height * aspectRatio);
h = height;
   }
   else {
    l = 0;
b = (int) ((height - width / aspectRatio)/2.0);
w = width;
    h = (GLsizei) (width / aspectRatio);
    }
    glViewport( l, b, w, h );
    }

void Canvas::lineTo( float x, float y ) {
glBegin( GL_LINES );
glVertex2f( (GLfloat) CP.getX(), (GLfloat) CP.getY() );
glVertex2f( (GLfloat) x, (GLfloat) y );
glEnd();
CP.set( x, y );
glFlush();
}

void Canvas::lineTo( Point2d p ) {
glBegin( GL_LINES );
glVertex2f( (GLfloat) CP.getX(), (GLfloat) CP.getY() );
glVertex2f( (GLfloat) p.getX(), (GLfloat) p.getY() );
glEnd();
CP.set( p.getX(), p.getY() );
glFlush();
}

void Canvas::moveTo( float x, float y ) {
CP.set( x, y );
}

void Canvas::moveTo( Point2d p ) {
CP.set( p.getX(), p.getY() );
}

void Canvas::turn(float angle) {
CD += angle;
}

void Canvas::turnTo(float angle) {
CD = angle;
}

void Canvas::forward( float dist, int visible ) {
 const float RadPerDeg=0.017453393;
float x = CP.getX()+dist*cos(RadPerDeg*CD);
float y = CP.getY()+dist*sin(RadPerDeg*CD);
float l = window.getL();
float r = window.getR();
float b = window.getB();
float t = window.getT();

 l = (x < l)?x:l;
 r = (x > r)?x:r;
 b = (y < b)?y:b;
 t = (y > t)?y:t;
 window.set(l, r, b, t);
 if (visible)
lineTo(x, y);
 else 
moveTo(x, y);
 } 
```

还有这些公式。就像他给我的那张纸一样写着 a = B -A b = C - B c - A - C

```
c = A = 1/2((a + ((b(dot product) c)/(matrix of a (dotproduct)c)) * (matrix of a))

r = (magnitude of a)/2 squareroot(((b(dot product) c)/(matrix of a (dotproduct)c))^2 +          1) 
```

我不想问，但我知道当我不知所措时，谁能对他要我做的事情做出正面或反面？或者任何人都可以引导我朝着正确的方向制作一个 9 点圆吗？它占我期末成绩的 10%，所以我不是要求代码只是复制/粘贴“我要做什么？” 这就是我要问的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:40:04.110

你不能真正在 OpenGL 中绘制曲线，只能绘制多边形。因此，如果有人让我在 OpenGL 中绘制一个九点圆，我会假设他们的意思是一个有 9 条边的多边形，其中每个点沿圆的周长均匀分布。

# java - 删除方法不适用于自定义 UI 小部件

> ID：15342396
> 
> 赞同：0
> 
> 时间：2013-03-11T15:27:32.993
> 
> 标签：java

我已经组装了一个小的 UI 小部件，但它上面的删除按钮不起作用。每当我点击它时，什么都没有发生。有任何想法吗？

```
public class ComboBoxProblem extends JFrame {
    static JLabel citiesLabel = new JLabel();
    static JList citiesList = new JList();
    static JScrollPane citiesScrollPane = new JScrollPane();
    static JButton remove = new JButton();

    public static void main(String[] args) {
        new ComboBoxProblem().show();
    }

    public ComboBoxProblem() {
        // create frame
        setTitle("Flight Planner");
        setResizable(false);

        getContentPane().setLayout(new GridBagLayout());
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        GridBagConstraints gridConstraints;
        citiesLabel.setText("Destination City");
        gridConstraints = new GridBagConstraints();
        gridConstraints.gridx = 0;
        gridConstraints.gridy = 0;
        gridConstraints.insets = new Insets(10, 0, 0, 0);
        getContentPane().add(citiesLabel, gridConstraints);
        citiesScrollPane.setPreferredSize(new Dimension(150, 100));
        citiesScrollPane.setViewportView(citiesList);
        gridConstraints = new GridBagConstraints();
        gridConstraints.gridx = 0;
        gridConstraints.gridy = 1;
        gridConstraints.insets = new Insets(10, 10, 10, 10);
        getContentPane().add(citiesScrollPane, gridConstraints);

        // Here is my list with my elements, that I want to remove

        final DefaultListModel Model = new DefaultListModel();
        Model.addElement("San Diego");
        Model.addElement("Los Angeles");
        Model.addElement("Orange County");
        Model.addElement("Ontario");
        Model.addElement("Bakersfield");
        Model.addElement("Oakland");
        Model.addElement("Sacramento");
        Model.addElement("San Jose");

        citiesList.setModel(Model);

        final JList list = new JList(Model);

        remove.setText("Remove");
        gridConstraints = new GridBagConstraints();
        gridConstraints.gridx = 0;
        gridConstraints.gridy = 3;
        getContentPane().add(remove, gridConstraints);

        // Here is my removing method, I don't know, where the problem is
        // and it is showing no error

        remove.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                int sel = list.getSelectedIndex();
                if (sel >= 0) {

                    Model.removeElementAt(sel);
                }
            }
        });

        pack();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:51:02.737

替换这一行：

```
int sel = list.getSelectedIndex(); 
```

通过这个：

```
int sel = citiesList.getSelectedIndex(); 
```

list.getSelectedIndex() 总是返回-1。

请在将来使用调试以获取有关代码中正在发生的事情的更多信息。

# jquery - 摆脱 iPad 上的双击

> ID：15342397
> 
> 赞同：0
> 
> 时间：2013-03-11T15:27:34.310
> 
> 标签：jquery, mobile-safari

我已经按照我想要的方式进行了所有设置，只是发现当我使用 ipad 时，我必须触摸链接两次才能激活它。

```
jQuery(document).ready(function () {
    jQuery('.normal-model').live('mouseover', function () {
        jQuery(this).find('.desc-box').fadeIn('slow');
        var videoid = jQuery(this).find('.model-video a').attr('id');
        var viddestin = jQuery(this).find('.model-video');
        var postoi = jQuery(this).find('.model-video iframe');
        if (postoi.length == 0) {
            if (videoid != '' || videoid != ' ') {
                var genifr = '<iframe src="http://www.youtube.com/embed/' + videoid + '?autoplay=1" frameborder="0" width="230" height="150"></iframe>';
            }
            jQuery(genifr).appendTo(viddestin);
        }
    });
    jQuery('.normal-model').live('mouseleave', function () {
        jQuery(this).find('.desc-box').fadeOut('slow');
        jQuery(this).find('.model-video iframe').remove();
    });
}); 
```

如何让它在 iPad 上只被点击一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:38:33.963

iPad 没有`mouseover`或`mouseleave`事件。除了您的事件之外，尝试使用`touchstart`and `touchend`（或仅使用 ） （并且还知道不赞成使用）：`touch``mouse``.live`[`.on`](http://api.jquery.com/on)

```
jQuery('.normal-model').on('mouseover touch', function () {

// ...

jQuery('.normal-model').on('mouseleave touch', function () { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:38:58.577

您正在将鼠标悬停事件绑定到元素。由于触摸设备没有常规的悬停事件，因此它们通过确保在您点击某个元素时将其视为悬停事件来解决此问题。第二次点击（双击）激活正常的点击事件。

特长; 如果您想在 iPad 上提供良好的体验，请不要将悬停事件用于此类导航。只需将绑定更改为单击事件。

# html - CSS 固定位置向右浮动

> ID：15342398
> 
> 赞同：0
> 
> 时间：2013-03-11T15:27:34.677
> 
> 标签：html, css

我有这个代码：

```
<style> 
        .floatright 
        {
            float: right;
            margin-right:800px;
        }

        .menu {
            padding: 0;
            float: right;
            width: auto;
            position:relative;
        }
        .menu ul {
            list-style-type: none; 
            margin: 0; 
            padding: 0;
        } 
        .menu li { 
            display:inline; 
            padding:0;
            margin: 0px;
        } 
        .menu a:link, 
        .menu a:hover {
            text-decoration:none;
            padding:0 5px 5px 0;
            margin-right: 8px;
        }
</style>

<div class="floatright">
<ul class="menu">
<li><a href="/apidocs">api</a></li>
<li><a href="/tools">tools</a></li>
<li><a href="/blog">blog</a></li>
</ul>
</div> 
```

它旨在浮动到页面的右侧（而不是在右上角 - 只是在左侧）并且每个链接之间都有间隙。

间隙可以正常工作，但是当屏幕调整大小时，ti 不会停留在应有的位置

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:34:27.093

查理，因为您在 div 的右侧有 800 像素的边距，所以无论屏幕分辨率如何，它都将始终具有该边距。

如果您希望根据屏幕分辨率减少边距，可以考虑使用百分比或媒体查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T15:44:22.537

您需要将父 div 居中...然后菜单将向右浮动。

```
 .floatright {
        width:1000px;
        height:50px;
        margin:0 auto;
    } 
```

其中宽度应该是“橙色框”的宽度。菜单已经在其父 div 中很好地浮动。

这是一个 jsfiddle 示例：http: [//jsfiddle.net/hvLkh/](http://jsfiddle.net/hvLkh/)

**附加建议：** 1）不要将 div 放在 body 标签之外，2）向 div 添加一个 hight 属性以将框向下推，以及 3）将字体格式直接添加到您的 css 中并避免使用字体标签......像这样：

```
 .floatright {
        width:1000px;
        height:50px;
        margin:0 auto;
        font-family:"Trebuchet MS",Arial,Verdana,Tahoma;

    } 
```

这是一个更新的小提琴：http: [//jsfiddle.net/n6mnP/1/](http://jsfiddle.net/n6mnP/1/)

# javascript - Jquery单击可见元素处理程序之一

> ID：15342399
> 
> 赞同：0
> 
> 时间：2013-03-11T15:27:39.243
> 
> 标签：javascript, jquery, html

当我的模态窗口可见时，当我单击#screen 或#loading_modal 时，我需要隐藏此div，但是我该怎么做，以及如何正确编写它，现在我的代码不起作用，但我也有对于两个对象（#screen，#loading_modal）......我是js新手，如何重构这段代码，并使其正常工作......？

```
 if ($('#screen').is(':visible')) {
    $("#screen").click(function() {    
      $('#screen').hide();
      $('#loading_modal').hide();  
    });
     $("#loading_modal").click(function() {    
      $('#screen').hide();
      $('#loading_modal').hide();  
    });
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:31:10.847

如果我对您的理解正确，我认为您需要在点击处理程序中检查可见性，如下所示：

```
$("#screen").click(function() {    
    if ($('#screen').is(':visible')) {
        $('#screen').hide();
        $('#loading_modal').hide();  
    }
});
$("#loading_modal").click(function() {    
    if ($('#screen').is(':visible')) {
        $('#screen').hide();
        $('#loading_modal').hide();  
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:33:20.990

这里不需要`if`声明，你可以简单地使用：

```
$('element:visible').click(function() { ... }) 
```

所以：

```
$("#screen:visible").click(function() {    
    $(this).hide();
    $('#loading_modal').hide();  
});
 $("#loading_modal:visible").click(function() {    
    $('#screen').hide();
    $(this).hide();  
}); 
```

如果函数要执行相同的任务，您可以简单地使用：

```
$("#screen:visible, #loading_modal:visible").click(function() {    
    $('#screen').hide();
    $('#loading_modal').hide();  
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T15:33:24.003

你做错了。您可以检查点击事件中的条件。一旦点击事件触发。将`if`条件放在单击事件处理程序中

```
$("#screen").click(function() {    
    if ($('#screen').is(':visible')) {
        $('#screen').hide();
        $('#loading_modal').hide();  
    }
});
$("#loading_modal").click(function() {    
    if ($('#screen').is(':visible')) {
        $('#screen').hide();
        $('#loading_modal').hide();  
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T15:36:04.740

你可以重构你的代码看起来像这样

```
$("#screen,#loading_modal").click(function() { 
      $('#screen,#loading_modal').hide();       
}); 
```

无需检查它是否可见

如果它是动态创建的，则需要在创建元素后进行委托或绑定

```
$('body').on('click',"#screen,#loading_modal",function() { 
      $('#screen,#loading_modal').hide();       
}); 
```

# css - 如何在具有 LESS 的文件之间导入变量 - 当前正在“未定义”

> ID：15342400
> 
> 赞同：1
> 
> 时间：2013-03-11T15:27:39.433
> 
> 标签：css, twitter-bootstrap, less

嘿，我对 bootstrap 比较陌生，正在尝试将 bootstrap 响应式 css 导入我的 style.less 文件。

IE

```
@import "css/bootstrap-responsive.css"; 
```

然后我应用以下

```
#menu, #sub-menu {
.span2;
color: @bodydarker1;
height: 100%;
min-height: 100%;
padding: 1%;
} 
```

并`.span2;`出现在 bootstrap-responsive.css 但是当我检查页面时它给了我消息..

```
 .span2 is undefined
in style.less on line 26, column 2: 
```

现在，如果我将红色应用于 bootstrap-responsive.css 中的主体，它会渲染得很好，但是当我在类中调用它时`.span2`，它会说它是未定义的。为什么会这样？

如果我`.span2`在 html 中添加一个可以工作的类，但是在较少的文档上导入时应用到一个 id 不会。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:25:06.887

确保导入 .less 文件而不是 .css。您**可以**导入 .css，我只建议始终使用 .less 文件。在导入 .css 而不是 .less 时，您可能会遇到更多问题。

看起来您的 .LESS 代码结构有点不正确。尝试替换这个：

```
#menu, #sub-menu {
.span2;
color: @bodydarker1;
height: 100%;
min-height: 100%;
padding: 1%;
} 
```

有了这个：

```
#menu, 
#sub-menu {
    .span2 {
        color: @bodydarker1;
        height: 100%;
        min-height: 100%;
        padding: 1%;
    }
} 
```

**编辑：**

如果您尝试在自定义 #menu id 下访问 .span2 ，那么您必须在引导程序中查看它在哪个[命名空间](http://lesscss.org/#-namespaces)下（如果它在命名空间下），然后进行相应调整。

例子

```
#bootstrap {
    #lists {
        .span2 {
            // some span2 stuff
        }
    }
}

#menu, 
#sub-menu {
    #bootstrap > #lists > .span2;

    color: @bodydarker1;
    height: 100%;
    min-height: 100%;
    padding: 1%;
} 
```

# php - PHP：strlen 返回字符长度而不是字节长度

> ID：15342402
> 
> 赞同：7
> 
> 时间：2013-03-11T15:27:42.193
> 
> 标签：php, wordpress, strlen

我有一个 wordpress 网站。

我创建了简单的页面模板，例如：

```
<?php 
 /**
 * Template Name: Test
 */

 echo strlen('Привет');

 ?> 
```

然后我使用这个模板创建了一个页面。该页面显示俄语字符串“Привет”（意思是“你好”）的长度。我希望看到 12，因为由 6 个字符组成的 UTF-8 编码的俄罗斯字符串应该有 12 个字节的大小，但我得到了 6 个。

我已经在其他服务器上测试了同样的东西并且有正确的值 - 12。所以我认为原因是我的服务器配置。我有 wp 3.2.1（升级到 wp 3.5.1 后我遇到了同样的问题）和 PHP 5.3.3。

目前我花了大约 5 天时间试图找到解决方案，但没有运气。有谁知道这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T15:32:37.180

检查[mbstring.func_overload](http://php.net/manual/en/mbstring.overload.php)中的设置`php.ini`。此选项允许 PHP 使用 mb_strlen() 覆盖 strlen() 函数（对于其他等效项也是如此）。这可以解释您的服务器之间的差异

**编辑**

引用文档链接：

> 要使用函数重载，请将 php.ini 中的 mbstring.func_overload 设置为一个正值，该值表示指定要重载的函数类别的位掩码组合。它应该设置为 1 以重载 mail() 函数。2个用于字符串函数，4个用于正则表达式函数。例如，如果设置为 7，邮件、字符串和正则表达式函数将被重载。

因此，带有`2 bit`set 的值意味着基本字符串函数将被其 mbstring 等价物重载，但不是邮件或正则表达式函数；如果你想要`normal`行为，这应该是 0

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T15:29:43.207

您是否尝试过：http: [//lt.php.net/manual/en/function.mb-strlen.php](http://lt.php.net/manual/en/function.mb-strlen.php)？

```
int mb_strlen ( string $str [, string $encoding ] )
Gets the length of a string. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:31:48.630

有关以多字节字符获取字符串长度的更多信息，请参阅[http://php.net/manual/en/function.mb-strlen.php 。](http://php.net/manual/en/function.mb-strlen.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T15:30:23.550

你需要为此使用多字节字符串函数吗？如[http://www.php.net/manual/en/function.mb-strlen.php](http://www.php.net/manual/en/function.mb-strlen.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-24T05:04:21.123

我的文件设置为“UCS-2 BE BOM”编码。（可以从notepad++-Encoding菜单选项查看）

然后我使用了 mb_strlen($line,"UCS-2") 函数，但是由于某种原因，我得到了不正确的字符串长度（例如 mb_strlen("somestr","UCS-2") -> 6，我期待 7 )

我已将文件的编码更改为“UTF-8”，并且能够获得正确的字符串长度。

我不确定为什么使用其他编码类型时字符串长度不正确，但想分享对我有用的方法。

# php - Linux串口通信，php脚本问题

> ID：15342409
> 
> 赞同：2
> 
> 时间：2013-03-11T15:28:05.800
> 
> 标签：php, linux, serial-port, usb

我正在尝试通过 Linux 下的串行端口与微控制器通信。我为此目的使用 USB 到串行电缆，但我的 php 脚本给了我以下错误：

**致命错误：调用未定义的函数 deviceSet()**

这是我的脚本

```
error_reporting(E_ALL);
ini_set('display_errors', '1');     //displays php errors

include("php_serial.class.php");

$serial = new phpSerial();

deviceSet('ttyUSB0'); //for linux serial /dev/ttySP(0-4) for usb /dev/ttyUSBN

// If you want to change the configuration, the device must be closed 
//$serial->deviceClose();
$serial->confBaudRate(9600); //Baud rate: 9600
$serial->confParity("none");  //Parity (this is the "N" in "8-N-1")
$serial->confCharacterLength(8); //Character length (this is the "8" in "8-N-1")
    $serial->confStopBits(2);  //Stop bits (this is the "1" in "8-N-1")
$serial->confFlowControl("none");

$serial->deviceOpen();
// To write into $serial->sendMessage("1");
$read = $serial->readPort(); 
```

我怀疑 php_serial.class 文件无法通过 USB 运行串行连接，有什么想法吗？

这似乎也有问题：

```
# dmesg | grep tty
console [tty0] enabled
usb 3-2: FTDI USB Serial Device converter now attached to ttyUSB0
ftdi_sio ttyUSB0: ftdi_submit_read_urb - failed submitting read urb, error -1 
```

谢谢。

我编辑了 $serial ->deviceSet() 现在出现了一堆错误

指定的串口在第 111 行的 /var/www/html/php_serial.class.php 中无效 警告：无法设置波特率：设备未在 /var/www/html/php_serial.class 中设置或打开第 204 行的 .php 警告：无法设置奇偶校验：设备未设置或在第 254 行的 /var/www/html/php_serial.class.php 中打开 警告：无法设置字符长度：设备要么未在第 298 行的 /var/www/html/php_serial.class.php 中设置或打开警告：无法设置停止位的长度：设备未在 /var/www/html/php_serial 中设置或打开。第 335 行的 class.php 警告：无法设置流控制模式：设备未设置或在第 376 行的 /var/www/html/php_serial.class.php 中打开 警告：必须先设置设备才能打开在 /var/www/html/php_serial.class.php 第 137 行警告：必须打开设备才能在第 474 行的 /var/www/html/php_serial.class.php 中读取它

这是 php_serial.class 的问题吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:30:42.047

`deviceSet()`是串行类的方法。你调用它的方式，它需要是一个原生的 PHP 函数。

它应该是：`$serial->deviceSet('ttyUSB0');`

# c++ - 将不可访问的私有基类型的指针传递给派生类方法

> ID：15342410
> 
> 赞同：13
> 
> 时间：2013-03-11T15:28:06.170
> 
> 标签：c++

此代码示例将描述我认为不直观的语言功能。

```
class A {
public:
  A() {}
};

class B: private A
{
public:
  B() {}
};

class C: public B
{
public:
  C() {}
  void ProcessA(A* a) {
  }
};

int main() {
  C c;
} 
```

在 Mac 上使用 Apple LLVM 4.2 版编译此代码会产生一个

```
test.cc:16: error: ‘class A’ is inaccessible
test.cc:16: error: within this context 
```

替换`void ProcessA(A* a)`为`void ProcessA(::A* a)`可以构建，但我不明白为什么要在这里使用绝对类名。它是一种语言功能，是为了避免某种错误，还是只是一个黑暗的 C++ 语法角落，比如要求`> >`在使用其他模板参数化的模板中的尖括号 ( ) 之间放置空格。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T15:34:23.260

## 人话

我将首先描述这里发生的事情——如果您已经知道这一点，请原谅我，但它为后续行动创造了必要的背景。

编译器将不合格解析`A`为`::C::A`（如果您自己在源代码级别进行更改，结果将相同）。由于`::C::A`无法访问，因此会发出错误消息。

您建议编译器应该检测到`::C::A`不可访问的内容，`A`然后应该将对的引用视为`::A`作为后备​​的引用。但是，`::C::A`和`::A`可能很容易是两个*完全不同的东西*。

在这里自动猜测应该做什么不仅容易引入错误和/或拉扯头发¹，而且完全违背了 C++ 的精神。

## 标准话

直接从 C++11 标准确认此行为符合设计要求。

§9/2 说：

> 类*名被插入到在看到**类名*之后立即声明它的作用域中。类*名*也被插入到类本身的范围内；这被称为 *注入类名*。

这意味着在 class 的范围内`C`，`A`是一个*注入的类名*。

§3.4/3 指出*注入的类名*是名称查找的候选者：

> 出于名称隐藏和查找的目的，类的注入类名称也被认为是该类的成员。

§3.4/1 阐明了基础的不可访问性`A`并不妨碍考虑*注入的类名* `A`：

> 仅在名称查找和函数重载解析（如果适用）成功后才考虑访问规则。

§11.1/5 直接解释了讨论中的*确切*情况：

> [注意：在派生类中，基类名称的查找将在声明它的范围内找到*注入的类名称，而不是基类的名称。*在声明它的范围内，*注入的类名*可能比基类的名称更难访问。——尾注]

该标准还给出了这个例子，它相当于你的：

```
class A { };
class B : private A { };
class C : public B {
    A *p;   // error: injected-class-name A is inaccessible
    ::A *q; // OK
}; 
```

* * *

¹ 想象一下，如果`A`最初是一个`public`基础，然后`private`在重构期间会发生什么。也想象一下，`::A`并`::C::A`没有关系。您会期望像`a->foo()`（以前可以工作）这样的调用会因为`foo`不再可访问而失败，但不是这个，类型`a`已经在您背后发生了变化，您现在会收到“没有方法`foo`”错误。啊？！？这当然远不是可能发生的最坏情况。

# javascript - 使用 Ajax 响应文本填充 dojo dijit/form/FilteringSelect

> ID：15342412
> 
> 赞同：0
> 
> 时间：2013-03-11T15:28:25.237
> 
> 标签：javascript, ajax, select, dojo

我的应用程序中有两个下拉菜单：在第一个下拉菜单（选择机构类型）中，我附加了一个 onchange 事件，该事件调用一个 javascript 函数（这个函数进行 ajax 调用），用于填充第二个下拉菜单（选择机构名称）。HTML 代码如下所示：

```
<label for="typeHighInst">Type of institution: </label>
          <select data-dojo-type="dijit/form/FilteringSelect" data-dojo-id="typeHighInst" id="typeHighInst" name="typeHighInst" onChange="getInstitution(this.value)">
            <option value="" selected='selected'>-- select institution type -- </option>
            <?php foreach($InstitutionType as $institutiontype): ?>
            <option value="<?php echo $institutiontype['TypeID']; ?>"><?php echo $institutiontype['Description'];  ?>
            </option>
            <?php endforeach; ?>
          </select>
<label for="nameHighInst">Name of institution: </label>
          <select data-dojo-type="dijit/form/Select" data-dojo-id="nameHighInst" id="nameHighInst" name="nameHighInst">
            <option value="" selected='selected'>-- select institution --</option>
          </select> 
```

javascript 代码如下所示：

```
function getInstitution(str)
{
  var xmlhttp;

if (str=="")
{
    document.getElementById("nameHighInst").innerHTML="<option value='' selected='selected'>-- select institution --</option>";
    return;
}
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
 xmlhttp.onreadystatechange=function()
{
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    //alert(xmlhttp.responseText);
    document.getElementById("nameHighInst").innerHTML=xmlhttp.responseText;
    }
}

  xmlhttp.open("GET","includes/getInstitution.php?typeHighInst="+str,true);
  xmlhttp.send();
} 
```

问题是当您从第一个下拉列表中选择一个选项（例如大学）时，第二个下拉列表仍然是空的（而不是显示由 ajax 返回的所有大学的列表）。

但是，当我在第二个下拉列表中使用本机选择标签时，一切正常（选择对象有效地填充了所有大学的列表）。

这是使用本机选择元素的代码：

```
<label for="nameHighInst">Name of institution: </label>
          <select id="nameHighInst" name="nameHighInst">
            <option value="" selected='selected'>-- select institution --</option>
          </select> 
```

有人可以告诉我为什么它适用于本机选择元素而不适用于 dijit/form/FilteringSelect 小部件吗？我是道场新手。我也想知道怎么解决。虽然本机选择有效，但我更喜欢使用 dojo 小部件，因为我发现了它们。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:58:04.657

尝试使用 dojo 对象来操作列表：

```
 var dojo_obj = dijit.byId("nameHighInst");
  dojo_obj.attr("innerHTML",xmlhttp.responseText); 
```

代替

```
 document.getElementById("nameHighInst").innerHTML=xmlhttp.responseText; 
```

我想你想要的是这样的：

```
 var dojo_obj = dijit.byId("nameHighInst");
  dojo_obj.attr("options",xmlhttp.responseText); 
```

选项的 xmlhttp.responseText 应该是 JSON 格式：

```
options: [
  { label: 'TN', value: 'Tennessee' },
  { label: 'VA', value: 'Virginia', selected: true },
  { label: 'WA', value: 'Washington' },
  { label: 'FL', value: 'Florida' },
  { label: 'CA', value: 'California' }
] 
```

示例： [http ://dojotoolkit.org/reference-guide/1.7/dijit/form/Select.html](http://dojotoolkit.org/reference-guide/1.7/dijit/form/Select.html)

从 dojo 对象获取值时执行相同操作：

```
 var dojo_obj = dijit.byId("nameHighInst");
  var val = dojo_obj.attr("value");
  var html = dojo_obj.attr("innerHTML");
  var options = dojo_obj.attr("options"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:44:53.217

有多种实现方式

首先，dojo 将解析您的 html 内容 onload，然后对任何 dijit 元素的内部 html 的任何更改都不会反映，除非您手动解析它。

如果您坚持使用 html 更改选项的方式，您将不得不调用

```
dojo.parser.parse("id of enclosing div"); 
```

或者

使用 dojo.attr

从您的 ajax 响应中获取 JSON 格式的选项。

```
 var option = [{
        label: 'TN',
        value: 'Tennessee'
    },
    {
        label: 'VA',
        value: 'Virginia',
    }]

selectObj = dijit.byId("id of element");
selectObj.attr("options",option); 
```

或者

直接使用 javascript 设置选项值，而不是使用 .attr 函数，然后重新启动组件。

```
selectObj.options = option;//JSON object
selectObj.restart(); 
```

# javascript - 我可以在创建实体工作流步骤表单上有一个 onload 脚本吗？

> ID：15342416
> 
> 赞同：1
> 
> 时间：2013-03-11T15:28:41.697
> 
> 标签：javascript, workflow, dynamics-crm-2011, onload, crm

我知道在常规创建/编辑实体上它是微不足道的。我正在查看的是通过工作流创建实体时，您可以单击“设置属性”，它会打开一个不同于标准表单的表单。那里可以有一个自定义的 onload 事件吗？

我们所做的一个例子是，我们根据他们 CRM 系统中的信息动态地将文本框转换为下拉菜单。这打破了工作流形式。

如果您需要我澄清任何事情，请询问。我已经在工作流表单中包含了我正在谈论的内容的屏幕截图。

![工作流程](../Images/a36ff8d00d498dc238d1e60d2ecf87ba.png)

![这是我希望 onload 触发的地方。](../Images/9437d44ed35a6503414e2e2434f1b555.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:19:51.290

不，您在工作流设计器中看到的表单是该实体的当前默认表单 - 它还在底部标记了所有隐藏/未使用的字段。

我相信所有形式的 JavaScript 都被禁用了。也许看看另一种方法？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T18:59:11.633

你正在交叉授粉你的概念。

工作流表单是您的最终用户永远不会看到的。因此，您获得的屏幕是包含您的实体的所有字段的表单。

当您要求用户与受控过程进行交互时，您可以使用对话框屏幕。但是，这也无法进行您提到的自定义。

Webresources 的概念只影响表单；这就是您的 GUI 魔术给您的客户留下深刻印象的地方，您可以帮助他（或她）更好地使用您的设计。

（如果不清楚，答案是“否”，您不能在工作流中使用您的网络资源和自定义控件。）

# mercurial - 从 hgignore 中删除不匹配的行

> ID：15342418
> 
> 赞同：0
> 
> 时间：2013-03-11T15:28:48.930
> 
> 标签：mercurial, hgignore, mercurial-extension

是否有一个 Mercurial 扩展可以从中删除`.hgignore`与本地存储库中的任何文件都不匹配的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:09:58.957

不存在执行此操作的扩展或内置函数。您可以使用 jerry rig 编写脚本来查找无需太多工作而忽略任何内容的行，但考虑到这可能是一个坏主意。

仅仅因为 .hgignore 行与本地存储库中的文件不匹配并不意味着它与其他任何人的存储库中的文件不匹配。在 .hgignore 文件中，您经常会发现 和 之类`.swp`的模式`.bak`。您可能不会使用 vi（它会创建 .swp 文件）并且您可能不会使用创建 '.bak `files, but other do. Or perhaps your editor creates .swp files but you don't currently have any because you're not actively editing a file. Removing that line means you'd not be ignoring a .swp file next time you had one and`hg addremove` 的编辑器会导致它被跟踪。

# drupal-7 - 为自定义内容创建新的字段类型

> ID：15342420
> 
> 赞同：1
> 
> 时间：2013-03-11T15:28:53.450
> 
> 标签：drupal-7, customization, field

我想创建一个名为“消息”的新内容类型。它将有几个字段，“message-body”将是纯文本和“addressees”。收件人字段应反映网站注册用户的列表。

这个想法是创建一个字段类型，它将是一个清单，可以选择站点的所有用户，并且那些将通过 drupal_set_message($msg) 接收“消息正文”中的消息。

到目前为止，我在创建自定义字段类型方面没有成功。Field API 文档不是很清楚。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T09:42:23.440

您可能已经为您的问题找到了解决方案。

我认为在你的情况下你可以使用实体参考。在您的自定义内容类型中，您可以使用实体引用类型创建一个新字段。然后在配置页面上，您可以使用不同类型的小部件选择要引用的实体，例如节点、分类或用户。

[这是实体引用模块的链接。](https://drupal.org/project/entityreference)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:41:39.647

为什么不通过菜单界面制作内容类型`www.yoursite.com/admin/structure/types/add`。

或者你需要它作为一个可以重新分发的模块？

一个更简单的方法是利用[特性](http://drupal.org/project/features)。它允许您将构建的内容类型“导出”到模块中。启用模块（在另一个站点上），然后创建导出中的所有字段。

# ruby-on-rails - activeadmin：缓存过滤器值

> ID：15342429
> 
> 赞同：7
> 
> 时间：2013-03-11T15:29:06.983
> 
> 标签：ruby-on-rails, activeadmin

我有一个过滤器

```
#in cities.rb

  filter :country #drop-down select list with more than 200 values 
```

它几乎是静态列表，我需要缓存它以提高生产力

我试过了

```
filter :country, :collection=>proc{cache {options_from_collection_for_select(Country.all, :id, :name)}} #no luck 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T02:20:03.723

尝试这样的事情：

**编辑**：我已经根据评论反馈更改了我的代码示例。

**编辑**：我已更新示例以包含 html 生成。

```
# In activeadmin
filter :country, :collection => proc do
  Rails.cache.fetch('countries_for_select') do
    options_from_collection_for_select(Country.all, :id, :name)}
  end
end

# Somewhere, when you want to expire the cache
Rails.cache.delete('countries_for_select') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T17:03:32.350

有时按国名搜索会容易得多：

检查这篇文章：[http ://blog.zeratool.net/2012/02/02/activeadmin-filter-from-drop-down-to-textfield/](http://blog.zeratool.net/2012/02/02/activeadmin-filter-from-drop-down-to-textfield/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-02T15:24:05.807

现在您有了更好的选择，您可以使用[AJAX 过滤器](https://github.com/holyketzer/activeadmin-ajax_filter)！

```
filter :country, as: :ajax_select, data: { search_fields: [:name] } 
```

# zend-framework - Zend Navigation - 所有 XML 可能的选项

> ID：15342434
> 
> 赞同：0
> 
> 时间：2013-03-11T15:29:25.080
> 
> 标签：zend-framework, zend-navigation, zend-config-xml

我现在已经搜索了一段时间，但我没有任何结论。我正在搜索博客或任何解释并显示 Zend_Navigation XML 配置文件的所有可能选项的内容。

我现在知道这些：

```
<module>
<controller>
<action>
<route>
<params> (array)
<pages> (array)
<visible>
<label> 
```

我知道的就这些。如果有人有完整的清单，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:51:36.447

我相信选项与`Zend_Navigation_Page`对象的构造函数选项相同，这些都列在手册中：http: [//framework.zend.com/manual/1.12/en/zend.navigation.pages.html](http://framework.zend.com/manual/1.12/en/zend.navigation.pages.html)。

# c# - 在一个地方捕获调试错误消息

> ID：15342436
> 
> 赞同：0
> 
> 时间：2013-03-11T15:29:30.023
> 
> 标签：c#, debugging, exception

我正在开发一个具有很多层次结构的大型应用程序，并且我正在发疯地调用日志消息并忘记它们。在测试时我不时遇到异常。现在我正在通过接口和其他方式将错误消息转发到我的主窗体。

有没有办法让应用程序在异常情况下始终触发主窗体中的单个方法。

我的意思是，现在我捕获异常并通过接口转发它。我希望能够忽略这一点，每次发生异常时，在主窗体中自动执行一个方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:31:35.653

如果您允许异常通过应用程序冒泡，您可以使用[AppDomain.UnhandledException](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)。您*应该*允许任何您无法有意义地处理的异常冒泡。

这样的事情应该可以解决问题：

```
class Program
{
    public static void Main()
    {
        form = new MainForm();
        AppDomain.CurrentDomain.UnhandledException +=
            new UnhandledExceptionEventHandler(form.OnUnhandledException);
        Application.Run(form);
    }
} 
```

# windows - 如何在目录中查找早于 X 时间的文件

> ID：15342442
> 
> 赞同：0
> 
> 时间：2013-03-11T15:29:45.733
> 
> 标签：windows, batch-file, cmd

需要在文件夹中查找超过 X 小时的文件。必须批量执行此操作，因为这是一个较旧的服务器，我们不想在其上加载任何其他内容。这是基于[Find out if file is older than 4 hours in Batch file](https://stackoverflow.com/questions/6928552/find-out-if-file-is-older-than-4-hours-in-batch-file)，但该解决方案仅针对一个静态文件名编写。我已经针对多个文件和美国日期格式对其进行了调整，但是我在文件分钟中遇到的问题是上午或下午的“a”或“p”。我在下面发布了我的部分解决方案（不执行日期数学并回显到屏幕文件名和日期/时间值）。关于如何摆脱 a 或 p 的任何想法？

```
rem extract current date
for /f "tokens=1-5 delims=.,/ " %%a in ("%date%") do (
  set day=%%c&set mon=%%b&set yr=%%d
)
REM Extract Current Time
for /f "tokens=1-5 delims=.:, " %%a in ("%time%") do (
set hr=%%a&set min=%%b
)
REM BUILD LIST OF FILES IN DIRECTORY
dir /B /O:N c:\mydir\*myfilestub*.* >list.txt
Rem LOOP THROUGH LIST OF FILES and CALL SUBROUTINE TO CHECK FILE DATE 
For /F %%A in (list.txt) DO (CALL :CHECKFILE %%A)
GOTO :EOF

:CHECKFILE
REM  CHECKING FILE %* 
set filename=%*
rem extract file date and time
for /f "tokens=1-5 delims=.:,/ " %%a in ('"dir c:\mydir\%filename%|find "%filename%""') do (
  set fday=%%a&set fmon=%%b&set fyr=%%c&set fhr=%%d&set fmin=%%e
)        
ECHO   %FILENAME% %fday% %fmon% %fyr% %fhr% %fmin%
GOTO :EOF 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:57:34.743

感谢[http://www.dostips.com/DtTipsStringManipulation.php](http://www.dostips.com/DtTipsStringManipulation.php)，我得到了我需要的答案，只是在获取文件日期的 for 循环下方添加了一行

设置 fmin=%fmin:~0,2%

在 Windows 服务器上仅使用 DOS 仍然可以完成的工作简直令人惊叹。我知道这个脚本可以清理和缩短我确信，但它适合我的目的。

# mfc - 使用类 CSplitterWndEx 时如何避免双滚动条

> ID：15342444
> 
> 赞同：0
> 
> 时间：2013-03-11T15:29:51.127
> 
> 标签：mfc, splitter, csplitterwnd

我使用 MFC 向导创建了一个应用程序并添加了拆分器功能。

`CSplitterWndEx m_wndSplitter`该向导将向class添加一个变量`CChildFrame`。

之后，将创建一个带有水平滚动条和垂直滚动条的拆分视图。

但富编辑视图也有自己的滚动条。

如何只保留一个滚动条并保留拆分功能？

提前致谢。

# ruby-on-rails - Nested_form, link_to_add ... 3 次

> ID：15342446
> 
> 赞同：1
> 
> 时间：2013-03-11T15:29:56.150
> 
> 标签：ruby-on-rails, nested-forms

我的nested_form 有问题，现在当我点击我的link_to_add 按钮时，会显示三个表单......我所有的嵌套表单都是一样的，这是新的。我真的不知道原因，有什么想法吗？

我的代码：

```
 <div id="new_upload">

    <%= f.fields_for :uploads do |file| %>

        <%= file.label :filename, 'Nom pièce jointe :'%>

        <%= file.text_field :name, :size => "19", :id=>"field" %>   

        <%= file.file_field :file if file.object.new_record? %> 

        <%= file.link_to_remove "Supprimer" %>

    <% end %>

  </div>

  <%= f.link_to_add "Ajouter pièce jointe", :uploads, :class=>"btn" %>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T10:40:23.703

此问题与 Rails 4 和 Turbolinks 相关。例如，请参阅[https://github.com/ryanb/nested_form/issues/307](https://github.com/ryanb/nested_form/issues/307)。

您应该能够添加`data-no-turbolinks`到您的 div 以在本地禁用 turbolinks。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-06T06:44:02.350

对我来说，这是因为 application.js 在 body 而不是 head 中被调用。呸！见[https://github.com/ryanb/nested_form/issues/286](https://github.com/ryanb/nested_form/issues/286)

# eclipse - 将目录结构导入eclipse

> ID：15342447
> 
> 赞同：1
> 
> 时间：2013-03-11T15:29:58.073
> 
> 标签：eclipse, jsp

我最近获得了一个 jsp 应用程序的源代码（我主要是 ac# 的家伙，所以对任何不合适的术语表示歉意）。我正在尝试使用 Eclipse 进行更改并在本地运行应用程序，但是在开始时遇到了一些问题。

文件夹结构如下

```
/Admin
/css
/js
/jsp
...more folders that look like your typical web site
/WEB-INF
  /classes
  /lib
  web.xml
  taglib-i18n.tld
build.xml
index.jsp 
```

我尝试创建一个空的动态 Web 应用程序并将文件夹拖入，但有大量构建错误表明`/classes/`无法识别在子目录中找到的代码。

我可以在本地运行一个非常简单的jsp教程，所以我有信心安装了tomcat和jsp框架。

源代码直接来自（抱歉）Source Safe，目前的方法是在开发服务器上进行更改、部署和测试。

有什么明显的我遗漏或需要配置的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:25:58.150

听起来您没有告诉 Eclipse 您的依赖项。转到 Project > Properties > Java Build Path > Libraries 并确保您在此处引用了所有依赖项 JAR。

# android - android中ListView项目的边距

> ID：15342461
> 
> 赞同：30
> 
> 时间：2013-03-11T15:30:33.737
> 
> 标签：android, android-layout, android-listview

我正在尝试（徒劳地）为我的 ListView 项目添加边距。我尝试在下面的 RelativeLayout 中添加边距值，但无论我做什么，我似乎得到的只是每个项目之间的 1px 线。

我真正想要的是在每个项目上都有圆角，一个 1 像素的黑色边框和一个 3-5 像素的左侧、顶部和右侧边距，但现在我将满足于每个项目周围的边距:-)

我如何实现我的目标？只是现在的利润...... ;-)

这是我所拥有的：

**更新：**我已经更新了下面的 xml，删除了主布局和片段布局。我还将 ListView 项目布局更新为我现在拥有的更接近我想要的但仍然不完美的布局。还添加了屏幕截图

列表视图项目布局 xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:paddingLeft="@dimen/matchMargin"
android:paddingRight="@dimen/matchMargin"
android:paddingTop="@dimen/matchMargin" >

<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="#cfcfcfcf" >

    <include
        android:id="@+id/matchKampstart"
        layout="@layout/kampstart_layout" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/matchKampstart"
        android:layout_marginTop="@dimen/belowKampstartMargin" >

        <ImageView
            android:id="@+id/tournamentImageView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginRight="2dp"
            android:adjustViewBounds="true"
            android:contentDescription="@string/tournamentImageViewContentDescription"
            android:gravity="left"
            android:src="@drawable/sofabold_launcher" />

        <ImageView
            android:id="@+id/homeTeamImageView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginRight="2dp"
            android:adjustViewBounds="true"
            android:contentDescription="@string/homeTeamImageViewContentDescription"
            android:src="@drawable/sofabold_launcher" />

        <TextView
            android:id="@+id/homeTeam"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginRight="2dp"
            android:text="@string/home"
            android:textSize="14sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/dash"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginRight="2dp"
            android:gravity="center"
            android:text="@string/dash"
            android:textSize="12sp"
            android:textStyle="bold" />

        <ImageView
            android:id="@+id/awayTeamImageView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginRight="2dp"
            android:adjustViewBounds="true"
            android:contentDescription="@string/awayTeamImageViewContentDescription"
            android:src="@drawable/sofabold_launcher" />

        <TextView
            android:id="@+id/awayTeam"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:gravity="center"
            android:text="@string/away"
            android:textSize="14sp"
            android:textStyle="bold" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@id/matchKampstart"
        android:layout_marginTop="@dimen/belowKampstartMargin" >

        <ImageView
            android:id="@+id/tvChannelImageView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:adjustViewBounds="false"
            android:contentDescription="@string/tvChannelImageViewContentDescription"
            android:gravity="right"
            android:src="@drawable/sofabold_launcher" />
    </LinearLayout>

</RelativeLayout>

</RelativeLayout> 
```

这给了我以下内容，您会注意到每个项目的左右两侧都有一条非常小的线。我也想摆脱。

![在此处输入图像描述](../Images/8a33f25ac40fed96e5ef10196dfe3604.png)

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-03-11T17:12:30.387

我不擅长布局，但我过去注意到 ListView 行经常忽略 LayoutParams。我不知道这种情况发生在哪里，或者是否可以覆盖，我知道您可以通过添加另一个布局轻松解决它：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:background="#990000ff" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginRight="10dp"
        android:layout_marginTop="10dp"
        android:background="#9900ff00"
        android:paddingLeft="10dp" >

        <TextView
            android:id="@+id/text"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#99ff0000" />
    </LinearLayout>

</LinearLayout> 
```

通常可以删除只有一个孩子的布局，但正如您所见，这个布局是有目的的：

![截屏](../Images/0a00bd64b699c13598636360164258b6.png)

最外面的布局是蓝色的，TextView 是红色的，绿色是额外的布局，可以让你添加一些额外的间距。注意填充（左边的绿色）和边距（右边没有绿色）之间的区别。您已明确表示要使用边距（`android:layout_margin`），但您的代码清楚地使用了填充（`android:padding`），因此我将两者都包括在内。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-11-25T23:17:52.423

看到这个有点晚了，但只需将以下行添加到您的 ListView xml 元素

```
android:divider="#00000000"
android:dividerHeight="10dp" 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-08-17T16:22:21.040

请参阅此处的答案以了解原因。简而言之，孩子问父母，列表视图行使用`AbsListView.LayoutParams`不包括边距。

[如果用作 ListView 行视图，为什么 LinearLayout 的边距会被忽略](https://stackoverflow.com/questions/16278159/why-linearlayouts-margin-is-being-ignored-if-used-as-listview-row-view)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-11T15:42:33.263

在您的适配器中，在 getView() 中捕获您的相对布局，然后给出布局参数，

```
RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams)view.getLayoutParams();
params.setMargins(80, 0, 0, 0); //substitute parameters for left, top, right, bottom
YourRelativeLayoutInAdapter.setLayoutParams(params); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-30T15:09:43.570

我想你`ListView`在某个 XML 文件中定义了一个，如果是这样，你可以添加一些`padding`，这样屏幕边缘和 ListView 之间就会有一些空间。

例子：

```
<ListView
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="15dp"/> 
```

# c# - 如何从客户查询中显示客户的地址

> ID：15342467
> 
> 赞同：0
> 
> 时间：2013-03-11T15:30:51.673
> 
> 标签：c#, asp.net, intuit-partner-platform, intuit

是否可以使用客户查询向客户显示地址？
我的云应用程序中有一个客户信息页面，但我似乎无法访问客户的地址、电话和电子邮件属性。
我希望能够显示数据库中所有客户的所有信息；IE。数据网格内的公司名称、客户名称、地址（帐单和送货）、电话号码（帐单、家庭、传真）和电子邮件（帐单或家庭）。

我使用 .NET DevKit 2.0 示例应用程序中的示例来构建这个数据网格。

我有一个绑定到我的客户查询对象的数据网格。

```
<asp:GridView AutoGenerateColumns="False" ID="grdCustInfo"  runat="server" CssClass="custInfo">
   <Columns>
      <asp:TemplateField HeaderText="Customer Name">
         <ItemTemplate>
            <asp:Label ID="lblC1" runat="server" Text='<%# Bind("Name") %>'></asp:Label></ItemTemplate>
      </asp:TemplateField>
      <asp:TemplateField HeaderText="Company Name">
         <ItemTemplate>
            <asp:Label ID="lblC2" runat="server" Text='<%# Bind("DBAName") %>'></asp:Label></ItemTemplate>
      </asp:TemplateField>
         <asp:TemplateField HeaderText="Bill Address 1">
            <ItemTemplate>
               <asp:Label ID="lblC3" runat="server" Text='<%# Bind("Address[0].Line1") %>'></asp:Label></ItemTemplate>
      </asp:TemplateField>    
   </Columns>
</asp:GridView> 
```

Name 和 DBName 会产生所需的信息，但 Address 行不会。如图所示运行时，应用程序不会加载，它只是给我一个应用程序错误。当我从应用程序启动的地址中删除 [0] 时，但在访问客户数据网格时出现错误：
DataBinding: 'Intuit.Ipp.Data.Qbd.PhysicalAddress[]' does not contain a property with name ' Line1'

我如何从客户查询中访问地址、电子邮件和电话字段，或者我是否需要从其他位置或查询中访问信息？

# xml - SSIS 动态 XML 配置路径

> ID：15342487
> 
> 赞同：0
> 
> 时间：2013-03-11T15:31:34.467
> 
> 标签：xml, path, ssis, config

伙计们，

我的包具有 XMl 配置中指定的所有用户变量，这些变量将位于包的文件夹之一中。

问题是配置文件的路径本身是硬编码在包中的......

将整个文件夹结构移动到 PROD 环境时，我将能够在 XML 配置文件中相应地重新配置用户变量路径……但是 XML 配置文件本身的位置呢？

我如何管理这条路径？

任何信息表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:15:15.403

定义配置类型时，选择第二个选项将配置位置存储在环境变量中。要更改 XML 位置，请转到开始 > 计算机并右键单击计算机。选择系统属性，然后选择高级选项卡。在底部，您会看到环境变量按钮。选择它，然后在系统列表中搜索您为其分配了 XML 位置的变量。此处可以更改 XML 位置。

当包投入生产时，您需要做的就是在那里创建环境变量并在系统属性下定义新位置。无需修改 SSIS 包。

希望这可以帮助。

科什

# file - 序列化与将数据结构写入和读取二进制文件之间的区别？

> ID：15342493
> 
> 赞同：2
> 
> 时间：2013-03-11T15:31:46.697
> 
> 标签：file, object, serialization, file-io, data-structures

序列化有点像存储数据对象以使我们能够将它们传输到任何地方，但与简单地将对象或数据结构写入二进制文件有什么不同......？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:34:09.427

序列化是另一种更正式的方式，如果您愿意的话，表示您正在生成对象或数据结构的表示并将其存储在某处。存储的目的地可能是：文件、数据库、内存中的另一个位置等。

名称**序列化**意味着对象或数据结构的内容/状态将按顺序（串行）表示，这就是计算机内存的基本组织方式：*作为一系列字节*。

序列化是一个抽象的**概念/过程**，在一般意义上并不意味着特定的表示。您可能有二进制表示（二进制序列化）或文本表示（XML 或 JSON 等等），可能还有其他。就如何组织有关对象或数据结构的信息而言，甚至二进制序列化也可以通过多种方式完成。

与序列化相反的是**反序列**化，它采用对象或数据结构的序列化表示并将对象或数据结构的状态重新创建或恢复为可用形式。

# resharper - 在 ReSharper 模板中对名称进行大写

> ID：15342501
> 
> 赞同：15
> 
> 时间：2013-03-11T15:32:08.443
> 
> 标签：resharper

有没有办法在 ReSharper 中创建一个将名称大写的模板？

例如，我想做这样的事情：

```
private $type$ _$name$;
public $type$ $uppercase_name$
{
    get { return _$name$; }
    set { _$name$ = value; }
} 
```

所以当我输入“ *city* ”的时候`$name$`，`$uppercase_name$`应该会自动变成“ *City* ”。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-11T15:39:29.270

好的，我做到了：

1.  添加模板时，右侧有一个可以选择宏的部分。点击“*选择宏*” `uppercase_name`。
2.  转到列表的末尾。有一个宏叫做“*第一个大写字符的****另一个变量****的值***”。选择那个。**
***   “*另一个变量*”部分在宏选择部分将显示为红色。点击那个。*   选择`name`。**

 **享受！

PS 我有 ReSharper 7.1。这可能不适用于早期版本。**

# java - 在 OpenImaj 库中使用 BagOfVisualWord 类

> ID：15342502
> 
> 赞同：1
> 
> 时间：2013-03-11T15:32:11.210
> 
> 标签：java, generics, openimaj

所以在我的情况下，我应该向 computeQuantisedFeatures 方法提供两个参数，第二个是类型

```
 List<LocalFeature<Location, ? extends ArrayFeatureVector<byte[]>>> 
```

我尝试传递我的类型的 imagekeypoints 列表

```
 LocalFeatureList<Keypoint> 
```

并且

```
 List<LocalFeature<KeypointLocation, ByteFV>> features = null;
    for (java.util.Iterator<Keypoint> iter = imageKeypoints.iterator(); iter.hasNext();)
    {features.add((LocalFeature<KeypointLocation, ByteFV>)iter.next());} 
```

但我总是得到著名的错误

```
 The method computeQuantisedFeatures(HardAssigner<T,?,?>, List<LocalFeature<L,? 
    extends ArrayFeatureVector<T>>>) in the type BagOfVisualWords is not applicable for
    the arguments (HardAssigner<byte[],capture#3-of ?,capture#4-of ?>, 
    List<LocalFeature<KeypointLocation,ByteFV>>) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:38:25.657

注意：我将此答案基于[此处](http://code.ohloh.net/file?fid=wx1t6y3ue5PkgGZAS3-vHzKJQJI&cid=N2mZo1S3wZ0&s=Keypoint.java&pp=0&fl=Java&ff=1&filterChecked=true&mp=0&ml=1&me=1&md=1&browser=Default#L32)`Keypoint`的来源。

这个问题源于泛型[不是 covariant](http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29#Java)的事实。该方法需要 a `List<LocalFeature<L, ? extends ArrayFeatureVector<T>>>`，但您提供的是`List<Keypoint>`. 如果该方法`List<? extends LocalFeature<L, ? extends ArrayFeatureVector<T>>>`取而代之，那将是一个合法的调用。

最简单的解决方案是将 的内容复制`imagekeypoints`到新创建的内容中，`List<LocalFeature<KeypointLocation, ByteFV>>`然后将其传递给调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:44:46.170

正如 Paul Bellora 所指出的，这实际上是该方法的泛型中的一个错误。我刚刚提交了一个修复程序，该修复程序将`1.1.1-SNAPSHOT`很快在版本中提供。临时解决方案是在您的类中实现正确版本的`computeQuantisedFeatures`方法，如下所示：

```
public static <L extends Location, T> List<QuantisedLocalFeature<L>> computeQuantisedFeatures(
    HardAssigner<T, ?, ?> assigner,
    List<? extends LocalFeature<L, ? extends ArrayFeatureVector<T>>> features)
{
    final List<QuantisedLocalFeature<L>> out = new ArrayList<QuantisedLocalFeature<L>>(features.size());

    for (final LocalFeature<L, ? extends ArrayFeatureVector<T>> f : features) {
        final int idx = assigner.assign(f.getFeatureVector().values);
        out.add(new QuantisedLocalFeature<L>(f.getLocation(), idx));
    }

    return out;
} 
```

# iphone - 我如何在 AQGridViewCell 中实现删除按钮

> ID：15342516
> 
> 赞同：3
> 
> 时间：2013-03-11T15:32:45.043
> 
> 标签：iphone, uibutton, custom-cell, aqgridview

我想在带有 ImageView 的自定义 AQGridViewCell 中添加按钮。当我单击编辑按钮时，它在 ImageGridViewCell 上显示删除按钮，如下图所示。我在**cellForItemAtIndex**方法中添加了删除按钮。这是我的代码

```
 - (AQGridViewCell *) gridView: (AQGridView *) gridView cellForItemAtIndex: (NSUInteger) index
{
static NSString *photoCellIdentifier = @"IBImageGridViewCell";
IBImageGridViewCell *cell = (IBImageGridViewCell *)[self.gridView dequeueReusableCellWithIdentifier:photoCellIdentifier];
if (cell == nil) {
    cell = [[IBImageGridViewCell alloc] initWithFrame:CGRectMake(3.0, 3.0, 100.0, 120.0) reuseIdentifier:photoCellIdentifier];
    cell.selectionStyle = AQGridViewCellSelectionStyleNone;

}
PTKEntry *entry = [_objects objectAtIndex:index];

UIButton *deletebutton = [UIButton buttonWithType:UIButtonTypeCustom];
[deletebutton addTarget:self
                 action:@selector(deleteimage:)
       forControlEvents:UIControlEventTouchDown];

[deletebutton viewWithTag:index];

deletebutton.frame = CGRectMake(70,0,30,30);

UIImage * buttonImage = [UIImage imageNamed:@"delete.png"];

[deletebutton setImage:buttonImage forState:UIControlStateNormal];

if (self.gridView.editing) {
    deletebutton.hidden=NO;

}
else{
    deletebutton.hidden=YES;

}

[cell.contentView addSubview:deletebutton];
[cell.contentView bringSubviewToFront:deletebutton];

    if (entry.data && entry.data.photo) {

        cell.imageView.image = entry.data.photo;

        NSLog(@"load table");

    } else {

        cell.imageView.image = nil;
         NSLog(@"Not load table");
    }

return cell;
} 
```

当视图加载没有显示删除按钮时。在单击删除按钮时，它显示每个网格单元格的删除，然后单击完成按钮，删除按钮没有从我的网格中隐藏查看单元格视图![我的形象](../Images/c73d86d69b46fcc8a3dbff30cd526cc9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T12:56:36.033

不修改 AQGridView 类的另一种方法

在您的 IBImageGridViewCell.xib 文件中添加一个删除按钮并将您的 IBImageGridViewCell.h 修改为

```
@class IBImageGridViewCell;
@protocol CustomGridCellViewDelegate<NSObject>

@optional

-(void) onDeleteButtonTouched:(IBImageGridViewCell *)sender;

@end

@interface IBImageGridViewCell : AQGridViewCell

+ (id) cellFromNib;

@property (nonatomic,assign) id <CustomGridCellViewDelegate> delegate;

@property (nonatomic, readonly, retain) IBOutlet UIView *contentView;

@property (weak, nonatomic) IBOutlet UIButton *deleteButton;

@property (nonatomic, copy) NSString *reuseIdentifier;

- (IBAction)deleteButtonAction:(UIButton *)sender;

@end 
```

在您的 IBImageGridViewCell.m 文件中添加

```
- (IBAction)deleteButtonAction:(UIButton *)sender
{
    [self.delegate onDeleteButtonTouched:self];
} 
```

现在在你的 mainViewController.h 添加委托

```
@interface mainViewController : UIViewController<CustomGridCellViewDelegate> 
```

在你的 mainViewController.m 文件中

在方法中

```
- (AQGridViewCell *) gridView: (AQGridView *) gridView cellForItemAtIndex: (NSUInteger) index 
```

添加

```
cell.delegate=self;
cell.deleteButton.tag =index; 
```

处理删除按钮动作

```
-(void)onDeleteButtonTouched:(NTGridViewCell *)sender
{
    NSLog(@"Selected Button:%d",sender.deleteButton.tag);
    [yourArrayList removeObjectAtIndex:sender.deleteButton.tag];
    [self.gridView reloadData];

    //***Animated delete 
//    [yourArrayList removeObjectAtIndex:sender.deleteButton.tag];
//    NSIndexSet* set = [NSIndexSet indexSetWithIndex:sender.deleteButton.tag];
//    [self.gridView beginUpdates];
//    [self.gridView deleteItemsAtIndices:set  withAnimation:AQGridViewItemAnimationFade];
//    [self.gridView endUpdates];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-05T11:43:56.627

您可以在 AQGridView 中创建委托方法并在您的类中实现它，例如

-(void) gridView:(AQGridView *)gridView didSelectItemAtIndex:(NSUInteger)index

这是一种委托方法方法。如果您创建委托方法

```
-(void) gridView:(AQGridView *)argGridView deleteCell:(AQGridViewCell *)cell atIndex:(NSUInteger)index; 
```

当您单击删除按钮时，这将作为 didSelectItemAtIndex: 调用。

为此，请遵循此程序。

添加一个方法 canHideDelete: 在您的自定义单元格 IBImageGridViewCell 中显示和隐藏删除按钮。当您单击指定的单元格时，然后 [cell canHideDelete:NO] 显示删除按钮。在您的 IBImageGridViewCell 中，

您可以创建一个块来删除指定的单元格。为此，请为 AQGridViewCell 创建一个扩展 AQGridViewCell_Extension.h，例如

```
#import "AQGridViewCell.h"

typedef void(^AQGridViewCellDeleteBlock)(AQGridViewCell*);

@interface AQGridViewCell ()

@property(nonatomic, copy) AQGridViewCellDeleteBlock deleteBlock;

@end 
```

在 IBImageGridViewCell.m 和 AQGridView.m 中导入“AQGridViewCell_Extension.h”

现在，创建一个选择器来处理删除按钮并调用一个块来删除单元格。

```
 -(void)deleteButtonAction
{
    self.deleteBlock(self);
} 
```

创建要在您的类中实现的委托方法以删除单元格将此添加到 @protocol AQGridViewDelegate 下的 AQGridView.h

-（void）gridView：（AQGridView *）gridView deleteCell：（AQGridViewCell *）单元格atIndex：（NSUInteger）索引；现在，在 AQGridView.m 中，更改方法

```
- (AQGridViewCell *) createPreparedCellForIndex: (NSUInteger) index usingGridData: (AQGridViewData *) gridData
{
    [UIView setAnimationsEnabled: NO];
    AQGridViewCell * cell = [_dataSource gridView: self cellForItemAtIndex: index];
    cell.separatorStyle = _flags.separatorStyle;
    cell.editing = self.editing;
    cell.displayIndex = index;

    cell.frame = [self fixCellFrame: cell.frame forGridRect: [gridData cellRectAtIndex: index]];
    if ( _backgroundView.superview == self )
        [self insertSubview: cell aboveSubview: _backgroundView];
    else
        [self insertSubview: cell atIndex: 0];
    [UIView setAnimationsEnabled: YES];
    __block AQGridView *localAQGridView = self;
    // DELETE BUTTON BLOCK - TO CALL DELEGATE METHOD
    cell.deleteBlock = ^(AQGridViewCell *argCell)
    {
        NSInteger index = [localAQGridView indexForCell:argCell];
        //NSLog(@"Cell to be deleted is %d", index);
        [localAQGridView.delegate gridView:localAQGridView deleteCell:argCell atIndex:index];

    };

    return ( cell );
} 
```

实施以下方法以删除班级中的单元格

```
-(void) gridView:(AQGridView *)argGridView deleteCell:(AQGridViewCell *)cell atIndex:(NSUInteger)index
{
    NSLog(@"ON deleting cell at %d", index);
    [mediaItemsArray removeObjectAtIndex:index];
    NSIndexSet *indexSet = [NSIndexSet indexSetWithIndex:index];

    [argGridView beginUpdates];
    [argGridView deleteItemsAtIndices:indexSet withAnimation:AQGridViewItemAnimationFade];
    [argGridView endUpdates];

} 
```

我希望这可以帮助你。

# sql - 如何让 SSMS 为 SQL Azure 提供自动完成功能？

> ID：15342517
> 
> 赞同：6
> 
> 时间：2013-03-11T15:32:45.183
> 
> 标签：sql, sql-server, editor, ssms, azure-sql-database

我正在尝试确定在查询编辑器中提供表/列自动完成功能的 SQL Server Management Studio 选项（在编写/运行查询时）。不幸的是，当您连接到 SQL Azure 数据库时，SSMS 似乎停止为您提供 Intellisense。有没有什么办法解决这一问题？

是否有任何选项、黑客、插件或其他任何东西可以实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:08:31.847

我终于偶然发现了一个选择。这并不理想，但肯定是朝着正确方向迈出的一大步！

[dbForge SQL Complete](http://www.devart.com/dbforge/sql/sqlcomplete/)是一个 SSMS 插件，它用自己的自动完成引擎替换了 SSMS 的内置 Intellisense。当连接到 SQL Azure 时，这是一个巨大的改进，但到目前为止，当连接到传统的 SQL Server 实例时，免费版本感觉像是倒退了一步。总的来说，我认为我们会更喜欢使用它而不是不使用它。我会在几天后回来报告它的进展情况（或不顺利）。

不过，至少这是一个选择！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-25T06:28:46.027

SQL Server Management Studio V17.2 的新版本现在支持 Intelliscence，因此无需为此使用任何其他工具。

请注意，这仅适用于 SQL Server 身份验证，即使用 SA 实例登录。

[https://connect.microsoft.com/SQLServer/feedback/details/3100677/ssms-2016-would-be-nice-to-have-intellisense-on-azure-sql-databases](https://connect.microsoft.com/SQLServer/feedback/details/3100677/ssms-2016-would-be-nice-to-have-intellisense-on-azure-sql-databases)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-08-05T09:36:55.360

Visual Studio 已为 Azure SQL 启用了基本的 IntelliSense，但它并不容易使用。

您必须单击表格，从下拉菜单中选择`DROP AND CREATE TO -> New query window`，然后 IntelliSense 将起作用。如果你只是使用`New query`它不会。

# selenium - 构建 selenium-server-standalone 可执行 jar

> ID：15342518
> 
> 赞同：2
> 
> 时间：2013-03-11T15:32:46.573
> 
> 标签：selenium, selenium-webdriver

我在 HtmlUnitDriver.java 文件中做了一个补丁，如下所述： [Is it possible to ignore JavaScript exceptions when working with WebDriver (HtmlUnit, Ruby bindings)](https://stackoverflow.com/questions/8745061/is-it-possible-to-ignore-javascript-exceptions-when-working-with-webdriver-html)

我已经按照 selenium build wiki 和自述文件中的说明进行了操作，这里也给出了提示： [Building the Selenium Server Project](https://stackoverflow.com/questions/3306248/building-the-selenium-server-project)

不过，我没有像 selenium-server-standalone-2.25.0.jar 这样的 jar 文件，它可以运行并用作 selenium 测试的无头浏览器。

...所以我试图用我的补丁重新创建 selenium-server-standalone-2.xx.jar 文件，并用它来运行我的无头测试。

谁能向我解释如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T08:39:41.513

我发现最好的方法是：

`go //java/server/src/org/openqa/selenium/remote/server:server:uber //java/client/src/org/openqa/selenium:client-combined:uber`

这将为 selenium 服务器创建一个 jar

然后运行`go release`。

生成的 .jar 应位于 selenium 源文件夹的 build\dist 文件夹中。（例如`./build/java/server/src/org/openqa/grid/selenium/selenium-standalone.jar`）

另请参阅[https://github.com/SeleniumHQ/selenium/wiki/Building-WebDriver#tips](https://github.com/SeleniumHQ/selenium/wiki/Building-WebDriver#tips)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-26T05:37:41.397

这是 selenium 独立服务器的分步构建指南。selenium 项目的构建过程对于新手来说可能不是那么困难，所以我推荐这个关于如何创建一个可运行的独立 jar 的详细指南。

[http://shengwangi.blogspot.com/2014/08/how-to-build-selenium-from-source.html](http://shengwangi.blogspot.com/2014/08/how-to-build-selenium-from-source.html)

您也可以参考关于 build selenium 的官方文档。 [https://code.google.com/p/selenium/wiki/BuildingWebDriver#Building_Selenium_Server](https://code.google.com/p/selenium/wiki/BuildingWebDriver#Building_Selenium_Server)

# c# - 在单个 SQLCLR 上下文连接中运行 1000-10000 条命令会更好吗？

> ID：15342521
> 
> 赞同：3
> 
> 时间：2013-03-11T15:32:52.553
> 
> 标签：c#, sql-server-2008-r2, sqlclr

我正在使用 JOB 来持续观察表数据。在 JOB 内部，我调用 SQLCLR SP。SQLCLR SP 将运行。在 while 循环之前，我将打开 SQL 连接。在 for 循环中，我将仅在一个连接中访问数据库 1000-10000 次。在我的工作完成之前，我不会关闭数据库连接。

```
 SqlConnection connection = null;
            try
            {
                using (connection = new SqlConnection("context connection=true"))
                {
                    connection.Open();

                    DataTable dt;
                    SqlDataAdapter adp=new SqlDataAdapter("select * from tableName",CnStr);
                    DataSet ds=new DataSet();
                    adp.Fill(ds,"TableName");
                    dt= ds[0];

                    //dt.Rows.count may be range from 1000-10000

                    for(i=0;i<dt.Rows.count;i++)
                    {
                        int id = int.Parse(dt.Rows[i][0].ToString());

                        SqlCommand command = new SqlCommand("select * from table1 where IsParsed=0 and Id=" + id, connection);
                        SqlDataReader r1 = command.ExecuteReader();

                        SqlCommand command = new SqlCommand("Insert into table2 (values)", connection);
                        int r2 = command.ExecuteNonQuery();

                        //Always get table1 data which has IsParsed=0\. Get those rows manipulate those rows data and 
                        // insert into datatable table2 and update those rows to IsParsed=1

                        SqlCommand command = new SqlCommand("Update table1 set IsParsed=1 where  id=@id", connection);
                        int r3 = command.ExecuteNonQuery();

                        // Run the Billing Logic here

                        // Insert into Billing Table 
                        SqlCommand command = new SqlCommand("Insert into Billing(values)", connection);
                        int r2 = command.ExecuteNonQuery();

                    }
                }
            }
            catch (Exception ex)
            {
            }
            finally
            {
                connection.close();
            } 
```

这种方法有什么问题让我知道吗？使用这样的连接有什么问题吗？提供适当的建议..

我浏览了文章 [更好的方法来在单个连接中执行多个命令](https://stackoverflow.com/questions/5981376/is-it-better-to-execute-many-sql-commands-with-one-connection-or-reconnect-ever)

在这里，我使用上下文连接并在单个连接中执行数千个命令。上下文连接中有没有考虑连接池..？每个连接的单个命令执行与单个连接的多个命令执行的性能如何？

另外我想知道在上下文连接和常规连接等两种情况下都会产生相同的结果？因为 SP 部署在 DB 本身中。如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T09:21:26.930

通过单个连接执行大量查询没有问题。您如何使用具有上下文连接的 SQL CLR 过程。正如 MSDN 中提到的，它指出：

> 使用上下文连接通常会带来更好的性能和更少的资源使用。上下文连接是仅进程内连接，因此它可以通过绕过网络协议和传输层“直接”联系服务器，以发送 Transact-SQL 语句并接收结果。身份验证过程也被绕过。

有关上下文和常规连接的更多信息，请参阅此[链接](http://msdn.microsoft.com/en-us/library/ms131104.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T05:31:08.580

**不**，可以通过单个连接执行大量查询。

如果您要打开/关闭一个连接来为这 1000 多行中的每一行运行这三个 SQL 查询，那么您的代码可能会执行*得更差。*

# ruby-on-rails - 工作正常工作，但没有发送电子邮件

> ID：15342532
> 
> 赞同：0
> 
> 时间：2013-03-11T15:33:22.793
> 
> 标签：ruby-on-rails, ruby-on-rails-3, delayed-job

我正在使用延迟作业（3.0.1）和延迟作业活动记录（0.4.3）在触发此操作时基于另一个操作发送电子邮件

```
Delayed::Job.enqueue(MailingJob.new(@auction.id) , 0 , date) 
```

这是邮寄工作

```
class MailingJob < Struct.new(:auction_id)
   def perform
     sql = "select a.id , u.fname , u.lname , u.email , p.name
            from auctions a
            join products p on a.product_id = p.id
            join auction_followers af on a.id = af.auction_id
            join users u on af.user_id = u.id
            where a.id = #{auction_id}"
     result = ActiveRecord::Base.connection.execute(sql)
     result.each(:as => :hash) do |row|
       AuctionMailer.delay.auction_start(row)
     end
   end
 end 
```

这是 AuctionMailer

```
 class AuctionMailer < ActionMailer::Base
      default from: "noreply@yabalashdeals.com"
      def auction_start(data)
         @shared = data
         mail(:to => data['email'], :subject => "Yabalash Auction started")
      end
 end 
```

当我运行 rake jobs:work 时，我得到 2 个以 4.6510 j/s 的速度处理的工作，0 个失败......但没有发送电子邮件我做了一个测试功能来检查拍卖邮件，它工作正常

这是没有错误的日志

**日志/生产.log**

```
Sent mail to hesham.kanany@gmail.com (99ms)
Rendered text template (0.0ms)
Completed 200 OK in 288ms (Views: 1.1ms | ActiveRecord: 1.3ms) 
```

**日志/delayed_job.log**

```
MaillingJob completed after 0.0035
1 jobs processed at 93.1503 j/s, 0 failed ... 
```

**完成** 抱歉没有发布这个问题的解决方案我想出了**.deliver()如果你使用****enqueue()**必须调用它......现在电子邮件发送完美

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:17:42.727

在我看来，您的延迟工作代码是错误的。尝试将其移至可以从控制台调用的方法中。

具体来说，您可能想要删除 :as => :hash。

```
def perform
 sql = "select a.id , u.fname , u.lname , u.email , p.name
        from auctions a
        join products p on a.product_id = p.id
        join auction_followers af on a.id = af.auction_id
        join users u on af.user_id = u.id
        where a.id = #{auction_id}"
 result = ActiveRecord::Base.connection.execute(sql)
 result.each do |row|
   AuctionMailer.delay.auction_start(row)
 end 
```

结尾

# variables - “处理程序类应该是静态的，否则可能会发生泄漏” - 处理程序具有对主要活动变量的引用

> ID：15342537
> 
> 赞同：2
> 
> 时间：2013-03-11T15:33:33.530
> 
> 标签：variables, android-activity, reference, static, handler

Android：我在我的活动中定义了一个处理程序类，我收到警告“处理程序类应该是静态的，否则可能会发生泄漏”，代码如下：

```
 Handler messageHandler = new Handler() {
      // @Override 
      public void handleMessage(Message msg) {
        try {
            ... accessing variables defined at the activity level
            ... doing something very important
        }
        super.handleMessage(msg)
      }
    } 
```

然而，问题是我的消息处理程序有对主要活动变量的引用，所以我不能让它成为静态的。在我的情况下，我怎样才能摆脱该警告（以正确的方式）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T02:27:09.427

改变

```
Handler messageHandler = new Handler() {
      // @Override 
      public void handleMessage(Message msg) {
        try {
            ... accessing variables defined at the activity level
            ... doing something very important
        }
      }
    } 
```

到

```
Handler mIncomingHandler = new Handler(new Handler.Callback() {
    @Override
    public boolean handleMessage(Message msg) {
    }
}); 
```

参考： [这个 Handler 类应该是静态的，否则可能会发生泄漏：IncomingHandler](https://stackoverflow.com/questions/11407943/this-handler-class-should-be-static-or-leaks-might-occur-incominghandler)

# python - Python 变量命名/绑定混淆

> ID：15342545
> 
> 赞同：9
> 
> 时间：2013-03-11T15:33:44.530
> 
> 标签：python, variables, binding, python-2.7, scope

我对 Python 开发比较陌生，在阅读语言文档时，我遇到了一行：

> 取消绑定被封闭范围引用的名称是非法的；编译器将报告一个 SyntaxError。

因此，在学习练习中，我试图在交互式 shell 中创建此错误，但我一直无法找到这样做的方法。我正在使用 Python v2.7.3，所以使用**nonlocal**关键字

```
def outer():
  a=5
  def inner():
     nonlocal a
     print(a)
     del a 
```

不是一个选项，并且不使用**nonlocal**，当 Python`del a`在`inner`函数中看到时，它会将其解释为尚未绑定的局部变量并引发`UnboundLocalError`异常。

显然，关于全局变量，这条规则有一个例外，那么我怎样才能创造一种情况，即我“非法”解除对封闭范围引用的变量名的绑定？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T15:36:49.893

删除必须在*外部*范围内进行：

```
>>> def foo():
...     a = 5
...     def bar():
...         return a
...     del a
... 
SyntaxError: can not delete variable 'a' referenced in nested scope 
```

Python 3 中删除了编译时限制：

```
$ python3.3
Python 3.3.0 (default, Sep 29 2012, 08:16:08) 
[GCC 4.2.1 Compatible Apple Clang 3.1 (tags/Apple/clang-318.0.58)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> def foo():
...     a = 5
...     def bar():
...         return a
...     del a
...     return bar
... 
>>> 
```

相反，`NameError`当您尝试引用时会引发a `a`：

```
>>> foo()()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 4, in bar
NameError: free variable 'a' referenced before assignment in enclosing scope 
```

我很想在这里提交一个文档错误。对于 Python 2，文档具有误导性；它正在删除触发编译时错误的*嵌套*范围中使用的变量，并且在 Python 3 中根本不再引发该错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T15:37:26.427

要触发该错误，您需要在外部范围的上下文中取消绑定变量。

```
>>> def outer():
...  a=5
...  del a
...  def inner():  
...   print a
... 
SyntaxError: can not delete variable 'a' referenced in nested scope 
```

# iphone - 如何在工作日的选择列表上设置重复的 UILocal 通知

> ID：15342546
> 
> 赞同：6
> 
> 时间：2013-03-11T15:33:48.277
> 
> 标签：iphone, objective-c, uilocalnotification, localnotification

我已经使用以下链接实现**了 UILocal 通知**

[http://useyourloaf.com/blog/2010/07/31/adding-local-notifications-with-ios-4.html](http://useyourloaf.com/blog/2010/07/31/adding-local-notifications-with-ios-4.html)

我已经修改它以使用每天设置重复通知

```
//To set the repeat notification
            notif.repeatInterval = NSDayCalendarUnit; 
```

例如**每天上午 10 点**

但我的要求是用户需要**在选定的工作日（周一至周六）设置通知**

为什么，因为用户可能有**每周假期，例如（星期六和星期日）/星期五 - 星期日）/其他日子**..

在*`week offs he shouldn't fire the notifications.`*

因此，我们欢迎用户设置选定的工作日，并且通知只会在那些日子设置..一旦用户设置了通知。

***`For ex:`***

我们有**工作日周日、周一、周二、周三、周四、周五、周六的名单**

在这些**用户上选择星期一、星期二、星期三、星期四。并设置在上午 10 点**

*然后通知将在这些天的每天上午 10 点触发。*

怎么做

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T15:52:58.940

UILocalNotification 的 API 在这方面非常有限 - 您必须手动安排 4 个事件，在用户选择的日期每周重复一次。

为星期一安排重复计时器的示例如下所示

```
NSDateComponents *dateComponents = [[NSDateComponents alloc] init];
dateComponents.weekday = 2; // sunday = 1 ... saturday = 7
dateComponents.hour    = 10;

UILocalNotification *notification = //...
notification.repeatInterval = NSWeekCalendarUnit;
notification.fireDate       = [calendar dateFromComponents:dateComponents]; 
```

日期编号可以在[NSDateComponents 类参考中找到](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDateComponents_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40001502-BCIGCBDB)

# java - 如何使 JLayeredPane 上的面板透明？

> ID：15342547
> 
> 赞同：4
> 
> 时间：2013-03-11T15:33:49.037
> 
> 标签：java, swing, jpanel, transparency, jlayeredpane

我有一个添加了 4 层的 JLayeredPane。1 个不透明的基础层和三个“透明”层 ( `setOpaque(false)`)。

问题是，尽管面板被绘制到，但每次刷新都会显示灰色。如果没有刷新发生，也会发生同样的事情。换句话说，不是显示在基础层上绘制的任何内容，而是显示灰色，我假设这是来自上面的一层。这是一个 SSCCE - 我不确定这是否足够短，但它显示了我的问题。

```
 public class SSCCE extends JLayeredPane{

public static void main(String[] args){
    JFrame frame = new JFrame();
    frame.setSize(950, 600);
    frame.add(new SSCCE());
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}

// private fields
private boolean drawInitial = true;
private boolean drawn = false;

private JPanel overlay, base, iconPanel, middle;
private BufferedImage baseBuffer, midBuffer, overlayBuffer, iconBuffer;
private boolean updateInit = true;
private Rectangle2D stored = new Rectangle2D.Double(60, 60, 40, 100);

public SSCCE() {

    setBorder(new LineBorder(Color.BLACK));
    setDoubleBuffered(false);
    setOpaque(true);
    setSize(new Dimension(950, 600));
    setPreferredSize(new Dimension(950, 600));

    base = new JPanel();
    base.setBackground(new Color(0,0,0,0));
    base.setSize(new Dimension(getWidth(), getHeight()));
    this.add(base, new Integer(0));

    middle = new JPanel();
    middle.setSize(new Dimension(getWidth(), getHeight()));
    middle.setBackground(new Color(0,0,0,0));
    middle.setOpaque(false);
    this.add(middle, new Integer(1));

    overlay = new JPanel();
    overlay.setBackground(new Color(0,0,0,0));
    overlay.setOpaque(false);
    overlay.setSize(new Dimension(getWidth(), getHeight()));
    this.add(overlay, new Integer(2));
    iconPanel = new JPanel();
    iconPanel.setBackground(new Color(0,0,0,0));
    iconPanel.setSize(getWidth(), getHeight());
    iconPanel.setOpaque(false);
    this.add(iconPanel, new Integer(3));

}

public void update() {
    if(updateInit){
        checkBuffer();
        updateInit = false;
    }
    drawInfoRect();
    drawIcon();
    highlightPath(stored);
}

public void render() {
    if (drawInitial) {
        Graphics2D baseGraphics = (Graphics2D) base.getGraphics();
        baseGraphics.drawImage(baseBuffer, 0, 0, null);
    }
    setResistanceColor((Graphics2D)baseBuffer.getGraphics());
    middle.getGraphics().drawImage(midBuffer, 0, 0, null);
    iconPanel.getGraphics().drawImage(iconBuffer, 0, 0, null);
    drawInfoRect();
    base.getGraphics().drawImage(baseBuffer, 0, 0, null);
    if (drawn) {
        overlay.getGraphics().drawImage(overlayBuffer, 0, 0, null);
    }
    repaint();
}

// /**
// * draws the appropriate colour
// */
@Override
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    update();
    render();
}

/**
 * sets the appropriate colours according to the resistance
 * @param g2
 */
private void setResistanceColor(Graphics2D g2) {
        Rectangle2D sp = new Rectangle2D.Double(50,50, 50, 50);
        g2.setColor(Color.GREEN);
        g2.fill(sp);
        g2.setColor(Color.BLACK);
}

/**
 * checks if there already exists an image to buffer with
 */
private void checkBuffer() {
    if (baseBuffer == null) {
        baseBuffer = (new BufferedImage(this.getWidth(), this.getHeight(), BufferedImage.TYPE_INT_ARGB));

        // background color
        Graphics2D g2 = (Graphics2D) baseBuffer.getGraphics();
        g2.setColor(Color.decode("#729fcf"));
        Rectangle2D rect = new Rectangle2D.Double(0, 0, baseBuffer.getWidth(), baseBuffer.getHeight());
        g2.fill(rect);
    }
    if (midBuffer == null) {
        midBuffer = (new BufferedImage(this.getWidth(), this.getHeight(), BufferedImage.TYPE_INT_ARGB));
        // background color
        Graphics2D g2 = (Graphics2D) midBuffer.getGraphics();
        g2.setColor(Color.RED);
        Rectangle2D rect = new Rectangle2D.Double(0, 0, midBuffer.getWidth(), midBuffer.getHeight());
        g2.fill(rect);
    }
    if (overlayBuffer == null) {
        overlayBuffer = (new BufferedImage(this.getWidth(), this.getHeight(), BufferedImage.TYPE_INT_ARGB));
    }
    if (iconBuffer == null) {
        iconBuffer = (new BufferedImage(this.getWidth(), this.getHeight(), BufferedImage.TYPE_INT_ARGB));
    }
}

public void highlightPath(Shape enlighten) {
    Area area = new Area();
    area.add(new Area(enlighten));
    // clearing image before drawing
    Graphics2D midBufferG = (Graphics2D) midBuffer.getGraphics();
    clearImage(midBufferG);

    midBufferG.setColor(Color.white);

    // adds a transparent overlay
    midBufferG.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.50f));
    midBufferG.fill(area);
}

public void drawIcon() {
    Graphics2D iconG = (Graphics2D) iconBuffer.getGraphics();
    clearImage(iconG);
}

public void drawInfoRect() {
    Graphics2D graph = (Graphics2D) overlayBuffer.getGraphics();

    Rectangle2D visible = getVisibleRect();
    int boxX = (int) (visible.getX() + 50);
    int boxY = (int) (visible.getY() + 450);

    RoundRectangle2D rect = new RoundRectangle2D.Double(boxX, boxY, 200, 150, 25, 25);

    graph.setColor(Color.decode("#729fcf").darker());
    graph.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.4f));
    graph.fill(rect);

    graph.setColor(Color.BLACK);
    drawn = true;
}

private void clearImage(Graphics2D graph){
    graph.setComposite(AlphaComposite.Clear);
    graph.fillRect(0, 0, overlayBuffer.getWidth(), overlayBuffer.getHeight());
    graph.setComposite(AlphaComposite.SrcOver);
} 
```

}

这可能是我犯的一些基本错误。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-22T09:09:41.147

先前建议的答案之一实际上解决了我的问题，但由于某种原因，他们删除了答案。

> 设置面板的背景来`setBackground(new Color(0,0,0,0));`解决我的问题。

根据提出此建议的人的说法，其原因是如果没有明确指定，JComponent 可能会或可能不会绘制透明。再次感谢！

# ruby - Heroku 缓慢重新连接

> ID：15342549
> 
> 赞同：-3
> 
> 时间：2013-03-11T15:33:54.353
> 
> 标签：ruby, ruby-on-rails-3, heroku

我的应用程序（Rails 3.2.12）使用 1 个 web dyno 和 0 个 worker dyno，使用 Heroku 上的默认配置进行部署。使用的宝石不多，也没有后台运行。

通常 - 并且大部分时间 - 应用程序加载速度非常快。但有时，不知何故，连接变得非常非常慢，并最终超时。神秘的是——在那段时间里——从第二台计算机（也在同一个网络上）加载我的网站非常快。从第一台计算机加载另一个网站也非常快。

根据实验，连接很容易修复，当我：（1）停止所有仍在加载我的网站的浏览器选项卡（2）等待几秒钟（3-5秒）（3）打开新的标签并再次打开我的网站

我相信这不是我的浏览器问题，因为它只发生在我的网络应用程序中。而且这也不是由于 dyno-idling 造成的，因为该网站正在生产中并且从未闲置超过 3 分钟（[https://devcenter.heroku.com/articles/dynos#dyno-idling](https://devcenter.heroku.com/articles/dynos#dyno-idling)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:43:46.470

您可以将您的测功机增加到 2 个或更多（不再空转），或者做我所做的：使用[Pingdom](http://www.pingdom.com)每隔一段时间 ping 我的站点。这可以防止网站闲置（如果网站出现故障，也会让我知道......）

# node.js - 浏览器中的 NodeJS Crypto createCipher('aes128') 等效项？

> ID：15342550
> 
> 赞同：0
> 
> 时间：2013-03-11T15:33:55.143
> 
> 标签：node.js, cryptography, aes, cryptojs

服务器代码：

```
cipher = createCipher('aes128', 'password');
str = cipher.update('message', 'utf8', 'base64');
str += cipher.final('base64') 
```

我希望客户端代码（浏览器）具有与上面相同的算法，给定相同的消息和密码，产生与服务器相同的输出。

我尝试`CryptoJS`了`SJCL`和其他一些库，但是它们使用了`iv`，`salt`这使得结果完全不同。在我的情况下，这种安全性是不必要的。

（我不知道到底是什么`iv`，`salt`我只是希望代码可以在没有它们的情况下运行。）

**更新：**我发现如果不正确了解加密本身，以这种方式使用该功能是一个巨大的错误。每个[文档](http://nodejs.org/api/crypto.html#crypto_crypto_createdecipheriv_algorithm_key)：

> 密码用于派生密钥和 IV，它必须是“二进制”编码的字符串或缓冲区。

我要先学习一些基础知识。

# xcode - 将plist读入nsmutabledictionary，更新字典再保存

> ID：15342554
> 
> 赞同：2
> 
> 时间：2013-03-11T15:34:09.763
> 
> 标签：xcode, plist, nsmutabledictionary

我对在目标 C 中保存文件真的很陌生，但我想要完成的是在启动时读取位于文档目录中的 plist 文件，或者如果它不存在则创建它。

它应该被读入 NSMutableDictionary。稍后在应用程序中，我应该能够将项目保存到 NSMutableDict，并将类别作为键 + 文本。

viewWillUnload NSMutableDictionary 中的 before launch 应该再次保存到 plist 文件中。

我已经创建了 plist，但我需要一种以正确方式写入 NSMutableDictionary 的方法（类别和我的 result.text 字符串。

而且我还需要将 NSMutableDictionary 保存到 plist 文件中，并在启动时将 plist 读入字典。

对此有一些帮助会很棒：D

多谢你们。

在保存文件 void 我这样做：

```
 storeDict = [[ NSMutableDictionary alloc]
                 init];
    [storeDict setObject:resultText.text forKey:@"kvitto"];
    [storeDict setObject:kategori forKey:@"kategori"];
    [storeDict writeToFile:[self saveFilePath] atomically:YES]; 
```

saveFilePath 看起来像这样：

```
- (NSString *) saveFilePath {
    NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    return [[path objectAtIndex:0] stringByAppendingString:@"savefile.plist"];
} 
```

这些值是从用户扫描的代码中收集的字符串，所以不要担心它们。那么我如何正确保存这个，保留savefile.plist中已经存在的数据。

再次感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-29T17:11:02.260

如果您希望字典中包含的字典和数组也是可变的，请执行以下操作：

```
NSData *data = [NSData dataWithContentsOfFile:path];
NSError *error;
storeDict = 
    [NSPropertyListSerialization 
            propertyListWithData:data 
                         options:NSPropertyListMutableContainersAndLeaves
                          format:nil
                           error: &error]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T15:43:06.750

为什么不能使用 writeToFile api？在这里写问题之前，您必须谷歌或检查 NSMutableDictionary 的苹果文档。

```
[dict writeToFile:path atomically:YES]; 
```

加载保存的字典

```
 dict = [NSMutableDictionary dictionaryWithContentsOfFile:path]; 
```

快乐编码！

# kolite - KoLite asyncCommand 访问元素数据

> ID：15342555
> 
> 赞同：0
> 
> 时间：2013-03-11T15:34:15.583
> 
> 标签：kolite

因此，我在视图中显示了一个可观察数组，并且我希望能够使用 asyncCommand 从该列表中删除一个元素。但是，我不确定我应该如何获得该元素。有没有办法访问或将所选元素传递给 asyncCommand 方法？

感谢您的输入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:14:11.700

```
 addGroupCmd = ko.asyncCommand({
            execute: function (data, complete) {
                //access your observable here with the data object 
                //EX. var demo = data.id();
            },
            canExecute: function (isExecuting) {
                return !isExecuting && isEditing();
            }
        }), 
```

好的，所以我在谷歌的帮助下弄清楚了。您所要做的就是传入 data 参数，ko.lite 将找出您在谈论的对象。非常好，不确定它是如何工作的，但确实如此。

# c++ - 如何在 Excel 中显示 C++ 结果

> ID：15342576
> 
> 赞同：2
> 
> 时间：2013-03-11T15:35:08.073
> 
> 标签：c++, excel

我正在尝试创建允许用户输入选择各种字段的 C++ 代码，然后它将计算许多不同的角度并向用户显示结果以及图表。

但是，我们的讲师向我们建议，最好用 C++ 编写这些计算等的代码，然后将结果输入 Excel。

有谁知道如何做到这一点？从字面上寻找一种方法让用户在 C++ 上填写所需的值，然后自动将其带到 excel 文件中以表格和图形格式显示结果。

如果这不可能，有没有办法通过 C++ 以表格和图形格式显示结果？

首先十分感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:37:52.643

Excel 提供了可从 C++ 应用程序使用的 COM 接口。

这可以通过本文中描述的方式完成：

[http://support.microsoft.com/kb/216686](http://support.microsoft.com/kb/216686)

此链接也可能有用：

[http://www.codeproject.com/Articles/10886/How-to-use-Managed-C-to-Automate-Excel](http://www.codeproject.com/Articles/10886/How-to-use-Managed-C-to-Automate-Excel)

我认为第二个链接对您来说会更好，因为它更像是一个分步指南，应该可以帮助您锻炼答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:53:05.353

使用 COM 自动化自动化 Excel。

最好的方法是使用 Matthew Wilson 的田鼠库

[http://vole.sourceforge.net/](http://vole.sourceforge.net/)

看看这些例子。我认为没有 excel 的示例，但在[http://www.codeproject.com/KB/COM/VOLE_word.aspx上有一个用于 microsoft word 的示例](http://www.codeproject.com/KB/COM/VOLE_word.aspx)

我过去用过田鼠，它让它变得容易多了

# android - 应用程序被杀死后 ViewPager 出现 NullPointerException

> ID：15342577
> 
> 赞同：2
> 
> 时间：2013-03-11T15:35:13.153
> 
> 标签：android, nullpointerexception, android-viewpager

我在 ViewPager 中有 3 个页面：Tab0、Tab1、Tab2 的实例。在主 Activity 中，我将每个选项卡的实例存储在 SectionsPagerAdapter 的 getItem() 函数的单独变量中。

我假设 ViewPager 始终初始化当前选项卡、左侧选项卡和右侧选项卡。

这些是我的例子：`Tab0 t0; Tab1 t1; Tab2 t2;`

该应用程序最初运行良好。但是，如果我按下主页按钮（触发`onPause()`），从任务杀手杀死应用程序（或假设 android 本身已经杀死它），然后再次打开应用程序，我得到 NullPointerExceptions`onPageSelected`因为`t0, t1 and t2`现在为空。

这是我的 onCreate 方法：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

            mSectionsPagerAdapter = new SectionsPagerAdapter(
                    getSupportFragmentManager());

            // Set up the ViewPager with the sections adapter.
            mViewPager = (ViewPager) findViewById(R.id.pager);
            mViewPager.setAdapter(mSectionsPagerAdapter);
            mViewPager.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {

                @Override
                public void onPageSelected(int pos) {

                    switch(pos){
                    case 1:
                       t1.lookup()
                        break;
                    case 0:

                    t0.doSomething();

                        break;
                    case 2:
                            t2.someThingElse();
                        break;

                    }

                }

                @Override
                public void onPageScrolled(int arg0, float arg1, int arg2) {

                }

                @Override
                public void onPageScrollStateChanged(int arg0) {

                }
            });

    mViewPager.setCurrentItem(1,true);
} 
```

这是我的 FragmentPagerAdapter（这是我的 Activity 中的嵌套类）：

```
public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        // getItem is called to instantiate the fragment for the given page.
        // Return a DummySectionFragment (defined as a static inner class
        // below) with the page number as its lone argument.
        Fragment fragment;

        switch(position){
        case 0:
            fragment = t0 = new Tab0();
            break;
        case 1:
            fragment = t1 = new Tab1();         
            break;
        case 2:
            fragment = t2 = new Tab2();
            break;

            default:
                fragment=null;
        }

        Bundle args = new Bundle();
        args.putInt(ARG_SECTION_NUMBER, position + 1);
        if(fragment!=null)
            fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        // Show 3 total pages.
        return 3;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        Locale l = Locale.getDefault();
        switch (position) {
        case 1:
            return getString(R.string.T1).toUpperCase(l);
        case 0:
            return getString(R.string.T0).toUpperCase(l);
        case 2:
            return getString(R.string.T2).toUpperCase(l);
        }
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:20:16.943

来自[文档](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)：用户访问的每个页面的片段将保存在内存中，尽管它的视图层次结构**在不可见时可能会被破坏**。这意味着当它回来时，将为您重新创建片段，但不会是原始片段（因此您会丢失 t* 变量）。我会看一下覆盖 saveState 和 restoreState 方法，看看您是否可以添加用于设置 t* 变量的逻辑。如果不是可能在片段中的其他 on* 方法之一中。

# c++ - 涵盖 32 位 Linux、64 位 Linux 和 32 位 Windows 的 CMakeLists.txt

> ID：15342583
> 
> 赞同：1
> 
> 时间：2013-03-11T15:35:29.547
> 
> 标签：c++, sqlite, qt, cmake, 32bit-64bit

如何制作以这种方式工作的 C++ CMake 项目？

1.  所有构建中间产品和二进制文件将被分成 2 个文件夹，一个用于 32 位，另一个用于 64 位。对于 32 位和 64 位，二进制文件的名称将相同。
2.  如果我当前的平台是 32 位 Linux 或非 Linux（例如 Windows），那么只构建 32 位。
3.  如果我当前的平台是 64 位 Linux，则为 32 位和 64 位构建。
4.  如果我当前的平台是 32 位 Linux，那么 CPack 将只为 32 位二进制文​​件生成 Debian 和 TGZ 包。
5.  如果我当前的平台是 64 位 Linux，那么 CPack 将为 32 位和 64 位二进制文​​件生成 Debian 和 TGZ 包。
6.  该程序依赖于 sqlite3 和 Qt4。

顺便说一句，对于 Windows，我目前正在使用 InnoSetup 生成安装包。在 Windows 上，它是使用 mingw 构建的。我的程序目前针对 32 位 Linux 和 32 位 Windows 分发，但我也想添加 64 位 Linux。

我的构建平台是 Ubuntu 64 位，但我也想支持在 Linux 32 位上构建。该项目还建立在 Travis CI 之上，它提供了由 Ubuntu 32 位组成的虚拟构建机器。

# web-services - 如何在 Visual Studio 生成的 SoapClient 中添加用户代理？

> ID：15342587
> 
> 赞同：0
> 
> 时间：2013-03-11T15:35:38.350
> 
> 标签：web-services, soap, user-agent

我正在尝试使用 Visual Studio 在 ASP MVC 项目中生成的类来调用 Web 服务，这是我的代码：

```
var serviceClient = new UserSoapClient("UserSoap");

var isValid = serviceClient.CheckEmail(email);
ViewBag.ServiceOutput = isValid? "Email is valid" : "Email is not valid";
return View(); 
```

但是，消息超时，问题似乎在于 SoapClient 的请求标头未发送 User-Agent 属性，因为我尝试使用 SOAP UI 执行相同的服务，这是唯一的区别。有什么方法可以设置用户代理，因为我正在查看文档，它似乎不是很明显。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T08:27:00.160

*我在尝试使用SoapClient*使用服务时遇到了类似的问题。我能够通过浏览器从服务获得响应，但是当我在项目服务中执行代码时返回*协议异常*，*远程服务器返回错误：(502) 网关错误。*信息。

经过几个小时的跟踪，我意识到异常是由用户代理定义引起的。我试图将用户代理添加到 Soap 请求标头，但没有办法。您不能将用户代理添加到注册为服务参考的 Soap 请求中。但是可以将用户代理标头定义为注册为 Web 服务参考的请求。

我的解决方案是：

1.  从项目中删除服务引用
2.  从添加服务参考窗口的高级菜单中添加与 Web 参考相同的参考
3.  创建一个新对象并定义 UserAgent 属性，如下所示。

    ```
    var svc = new ServiceReference.QueryService();
    svc.UserAgent = "Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/32.0.1700.107 Safari/537.36"; 
    ```

# android - Android/iphone InApp 购买数据管理到google play/app store 使用自己的网站

> ID：15342588
> 
> 赞同：0
> 
> 时间：2013-03-11T15:35:41.577
> 
> 标签：android, iphone, app-store, in-app-purchase, google-play

我的问题将与开发不同，但我被困在这一点上，任何帮助表示赞赏。

我正在使用标准 API 为 Android 和 iPhone 开发应用内购买应用。我的客户不想使用 Google Play 管理界面来管理我的应用内购买项目。他希望自己的实现（他自己的管理员站点）将新文件上传到 Google Play 或应用商店。那么，是否有任何 API 可用于与应用商店和 Google Play 通信，以管理他们自己网站上的应用购买数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:43:57.913

不，目前没有 API 支持这一点。

最接近的是[Google Play Android Developer API](https://developers.google.com/android-publisher/index)，但目前只支持检查和取消用户订阅购买的状态。

# android - 签名/锁定引导加载程序背后的架构是什么（即对于 android）？

> ID：15342590
> 
> 赞同：-2
> 
> 时间：2013-03-11T15:35:44.023
> 
> 标签：android, cryptography, bootloader

我知道，例如，摩托罗拉曾经为 der Milestone/Droids 签署了他们的引导加载程序，这使得改装场景很难应用他们的服装 rom。

我的问题是这在抽象层面上是如何工作的？我想可能是这样的：

1.  制造商（即摩托罗拉）将其公钥放入智能手机的 EEPROM/非易失性存储器 (NVM)
2.  引导加载程序使用制造商的私钥签名
3.  在设备启动时，引导加载程序在从 eeprom/NVM 加载的公钥的帮助下以某种方式检查自己的签名
4.  仅当签名正确时，引导加载程序才会继续。

a) 那么，如果这是正确的，那么第 3 步如何真正起作用？已签名的应用程序如何检查自己的签名？

b）我猜在签名的引导加载程序之前还有其他一些代码在运行，但引导加载程序不是第一个运行的程序吗？（除了startup.S）

希望有人能启发我，因为我只找到了签名引导加载程序的定义，但没有找到它是如何真正实现的。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:38:21.410

许多现代芯片都有一个[掩码 ROM](http://en.wikipedia.org/wiki/Mask_ROM)，它在任何用户提供的代码运行之前执行。正是这个 ROM，不可变并嵌入到芯片本身中，进行初始签名检查。

# python - Protocol designing subclasses

> ID：15342592
> 
> 赞同：1
> 
> 时间：2013-03-11T15:35:56.367
> 
> 标签：python

I had a interview with one of the companies and they asked me this question?

What are the protocols you follow while designing sub-classes. My answer was if the subclasses share all the properties and methods of the parent class and plus it wants to implement its own methods and properties than implement subclass.

Can someone let me know the list of items that needs to be looked into?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:40:23.320

[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29) and [DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself) principles are a good place to start.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:28:37.227

Your answer was a good start, but they probably were looking for more:

For example:

*   Is a subclass the appropriate solution in this case?

    How much of the parent class's functionality will be appropriate for the subclass?

    Are you subclassing at the correct level of granularity: is your subclass 'final' - an endpoint which will represent the end of an inheritance chain, or an intermediate class that will be the parent class for other subclasses to follow?

    Do you need only one subclass, or perhaps several that reflect different aspects of the parent class's functionality and add their own.

    What aspects of the new functionality will be implemented in the subclass itself, and how much might be delegated to other classes or subsystems.

    Sounds simple, but following an appropriate **NAMING PROTOCOL** for your classes and subclasses is also very important: make sure the name of your subclass correctly describes its functionality and its relationship to the parent class.

Some things to research - the GOF book is a tough read but 'Head First Design Patterns' is more accessible, although sometimes it gets into very elementary details. There may be Python specific design books out there too, but offhand I'm not familiar with them.

Relevant subjects might be:

*) Inheritance

*) Object composition/delegation vs inheritance

*) Abstract classes/Interfaces

# hibernate - Hibernate @Version 和 DTO

> ID：15342594
> 
> 赞同：0
> 
> 时间：2013-03-11T15:35:59.007
> 
> 标签：hibernate, version, dto

与 DTO 一起使用 Hibernate 的设计问题。

在我们的一个实体上，我们使用乐观锁定和@Version 注释。当前的问题是，在合并后，版本号直到刷新后才更新。这意味着它发生在我们的 DTO 转换过程之外。我们最终使用旧版本号将转换后的 DTO 发送回客户端。对此的后续操作现在将导致乐观锁失败，因为 Hibernate 检查不同的数据库版本号。

我已经设法通过一些涉及使用 ThreadLocal 容器和事件侦听器的 hack 来解决这个问题，但我想知道当您使用业务/客户端 DTO 时，是否存在关于如何处理系统刷新后更新的属性的公认最佳实践。

任何想法或想法表示赞赏，谢谢，Shands

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:44:34.473

如果实体将被多个客户端同时更新。它确实需要在您的客户端视图中保持最新版本。进行更改时需要刷新它（更新后重新加载）。

如果实体将仅由其所有者更新（而不是同时由多个用户）。您不需要保留最新版本的属性。当您在服务器端进行更新时。您可以加载存储的实体并设置需要使用您的 DTO 更新的属性，并且加载的 PO 可以在事务中自动更新。

# php - PHP - 根据另一个数组对数组进行排序

> ID：15342600
> 
> 赞同：-1
> 
> 时间：2013-03-11T15:36:14.043
> 
> 标签：php, arrays, sorting

我在 php 中有一个问题，我想根据数组的键重新索引数组的值，以使每个数组具有相同的顺序以便能够轻松地比较它们（以删除重复项），它应该适用于任何数组长度删除重复项。

例如 A,C,B,D / D,B,C,A / C,A,B,D 应该重新排序以具有值 A,B,C,D 因为给定的字符列表及其索引是 0->A , 1->B, 2->C, 3->D

例如，假设我们有这个数组

```
Array(
  [0] => Array (
    [0] => S,
    [1] => E,
    [2] => Q,
    [3] => A
  )
) 
```

我们有一个给定的带有索引的字符列表（带有它们应该具有的索引的字符）：

```
// index --> character ( array with real indexes)
$array_real_index = Array(
  [0] => A, 
  [1] => C, 
  [2] => D, 
  [3] => B, 
  [4] => E, 
  [5] => Q, 
  [6] => R,
  [7] => S
) 
```

如果找到字符的索引应该用正确的替换（如果不是正确的）。

所以结果应该是：

```
Array (
  [0] => A, 
  [1] => E, 
  [2] => Q, 
  [3] => S
) 
```

感谢您未来的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:07:07.700

1.  自定义排序是指[`usort()`](http://www.php.net/manual/en/function.usort.php)函数家族之一。
2.  自定义过滤器的意思[`array_filter()`](http://www.php.net/manual/en/function.array-filter.php)。

代码：

```
$master = array('A', 'C', 'D', 'B', 'E', 'Q', 'R', 'S');

function myCompare($a, $b) {
  global $master;
  $index_a = array_search($a, $master, TRUE);
  $index_b = array_search($b, $master, TRUE);
  if( $index_a === false && $index_b === false ) {
    // if neither are in the array, then sort by their normal value
    return ($a === $b) ? 0 : ($a < $b) ? -1 : 1;
  } else if( $index_a === false ) {
    // if only one is in the array, then it is "greater" than the other
    return 1;
  } else if( $index_b === false ) {
    return -1;
  } else {
    // otherwise the item with the lowest index is the "greater" of the two
    return ($index_a === $index_b) ? 0 : ($index_a < $index_b) ? -1 : 1;
  }
}

function myFilter($var) {
  global $master;
  return in_array($var, $master);
}

$input = array('A','B','C','D','E','F','G','H');
$input = array_filter($input, 'myFilter');
usort($input, 'myCompare');
print_r($input);

/* Output:
Array
(
    [0] => A
    [1] => C
    [2] => D
    [3] => B
    [4] => E
) */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:44:03.290

尝试这个：

```
<?
  $sorted_array = array_intersect($sort_array, $array_real_index);
  sort($sorted_array);
  print_r($sorted_array);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:54:08.173

```
$original_array = Array(
    0 => 'S',
    1 => 'E',
    2 => 'Q',
    3 => 'A'
);
$array_real_index = Array(
  0 => 'A', 
  1 => 'C', 
  2 => 'D', 
  3 => 'B', 
  4 => 'E', 
  5 => 'Q', 
  6 => 'R',
  7 => 'S'
);

// Custom sorting function passed to usort. $a & $b are two values
// being compared in terms of how they should be sorted. Results:
// 1:  $a > $b  (move $b down one and $a up one)
// -1: $b > $a  (move $a down one and $b up one)
// 0:  $a == $b (no change)
function sort_using_real_index($a,$b){
  // allow access to $array_real_index from within this function
  global $array_real_index;

  // retrieve the key indexes of the values. E.g. $a might contain
  // 'R', array_search would return 6\. 
  $aI = array_search($a, $array_real_index);
  $bI = array_search($b, $array_real_index);

  // Both the found keys are then compared and returned
  // (1, -1 and 0 results reflect how $a and $b relate in terms
  // of sort order within the sorted result)
  return $aI == $bI
    ? 0
    : ($aI > $bI ? 1 : -1);
}

// dump out the original array (benchmark)
var_dump($original_array);

// sort the original array using the custom function
usort($original_array, 'sort_using_real_index');

// output the sorted result
var_dump($original_array); 
```

[例子](http://sandbox.onlinephpfunctions.com/code/381344a9d3e5873f14a13846b461a53bb6baf398)

正如其他人所说，您可以使用`usort`并传递一个自定义函数，该函数使用一个数组中的键作为排序函数中的比较器。

*想要用来`usort`演示如何使用您认为最有用的任何指标对数组进行排序。*

# android - MapView 起始位置

> ID：15342604
> 
> 赞同：1
> 
> 时间：2013-03-11T15:36:28.537
> 
> 标签：android, google-maps, google-maps-api-3

下午好，

当我启动我的应用程序时，地图视图的显示如下图所示：

![在此处输入图像描述](../Images/74b3a98f6024aa34a4c69a8e4df62930.png)

但我想在某个点开始放大地图视图，类似于以下内容：

![在此处输入图像描述](../Images/9f060a8cd8f481b2e025e140fd1abbdd.png)

我需要使用哪种方法？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T15:38:08.250

您向地图控制器添加缩放级别：

```
mapView.getController().setZoom(17); // an int that suits you 
```

在此处阅读有关缩放级别的更多信息：[https ://developers.google.com/maps/documentation/staticmaps/#Zoomlevels](https://developers.google.com/maps/documentation/staticmaps/#Zoomlevels)

要设置中心，您可以使用：

```
 mapView.getController().setCenter(new GeoPoint(latitude,longitude)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:41:30.190

放 -

```
mapView.setStreetView(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:47:24.387

```
 mapView.getController().setZoom(17); // an int that suits you
 mapView.getController().setCenter(new GeoPoint(latitude,longitude)); 
```

这就是解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T15:49:43.923

用于显示埃及使用它-

```
 String coordinates[] = {"18.352566007", "73.78921587"};//here you can set geopoints of egypt
    double lat = Double.parseDouble(coordinates[0]);
    double lng = Double.parseDouble(coordinates[1]);

    p = new GeoPoint(
        (int) (lat * 1E6), 
        (int) (lng * 1E6));//p is GeoPoint

    mc.animateTo(p);
    mc.setZoom(17); 
    mapView.invalidate(); 
```

# c++ - 在 shellexecute 中将文件路径作为参数传递

> ID：15342605
> 
> 赞同：2
> 
> 时间：2013-03-11T15:36:29.387
> 
> 标签：c++, shellexecute, createprocess

我希望我的其他 c++ 程序从另一个文件运行，所以我使用 shell 执行。亩代码是：

```
#pragma comment(lib,"shell32.lib")  
#include "windows.h"
#include<Shellapi.h>

#include<stdio.h>
#include<iostream>
using namespace std;

class spwan{
public:
    //char szPath[] = "";
    void run(char path[]);
};

void spwan::run(char szPath[]){
HINSTANCE ShellExecute(HWND,  "open", szPath,"","",SW_SHOW);    
    cout<<"program executed";
}

int main ()
{
 spwan s;
 s.run("path to the file");
} 
```

但是我遇到了一个问题，就像预期的带有“open”的类型说明符一样，我无法使用 szPath 定义路径。任何帮助。

更具体地说，错误是：它给我的行错误：HINSTANCE ShellExecute(HWND, "open", szPath,"","",SW_SHOW); 作为语法错误：'字符串'

当我给出这样的路径时：- C:\Users\saira\Documents\Visual Studio 2010\Projects\phase_1_solver\Debug\phase_1_solver.exe 它给出的错误如下：警告C4129：'s'：无法识别的字符转义序列警告C4129： 'D' : 无法识别的字符转义序列

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:50:58.383

在您的代码中，您有：

```
HINSTANCE ShellExecute(HWND,  "open", szPath,"","",SW_SHOW); 
```

那是一个函数的声明。我认为您实际上是要调用该函数：

```
HINSTANCE retval = ShellExecute(HWND,  "open", szPath,"","",SW_SHOW); 
```

现在，这也不会编译。因为`HWND`是一种类型。我认为你需要：

```
HINSTANCE retval = ShellExecute(0, "open", szPath, NULL, NULL, SW_SHOW); 
```

更重要的是，实际上不需要指定动词。路径的默认动词就足够了。

```
HINSTANCE retval = ShellExecute(0, NULL, szPath, NULL, NULL, SW_SHOW); 
```

听起来好像您正在传递这样的字符串：

```
s.run("C:\Users\saira\...\phase_1_solver.exe"); 
```

这不好，因为反斜杠在 C++ 中用作转义字符。所以你需要逃避它：

```
s.run("C:\\Users\\saira\\...\\phase_1_solver.exe"); 
```

如果您不打算测试返回值，那么您可以简单地编写：

```
ShellExecute(0, NULL, szPath, NULL, NULL, SW_SHOW); 
```

如果您确实想检查从返回时的错误`ShellExecute`，那么`ShellExecute`调用的函数是错误的。它的错误处理特别弱。改为使用`ShellExecuteEx`。`ShellExecute`Raymond Chen在[Why does ShellExecute return SE_ERR_ACCESSDENIED for几乎所有事情](http://blogs.msdn.com/b/oldnewthing/archive/2012/10/18/10360604.aspx)中讨论了错误处理？

# jquery - 谷歌方向 json 为空，但仅在资源管理器中

> ID：15342607
> 
> 赞同：0
> 
> 时间：2013-03-11T15:36:39.883
> 
> 标签：jquery, json

我在所有浏览器中都得到了填充了正确响应数据的数据变量，但即。在所有版本的ie中，响应都是空的..？

```
function getDirections(addr) {
    var %id%url = encodeURI("http://maps.googleapis.com/maps/api/directions      /json?origin=" + addr + "&destination=%id=maplocation%&sensor=false");
    alert(%id%url); // looks good
    $.getJSON(%id%url, function(data) {
    alert(data); // empty in all versions of ie.. works in al other browsers
        if(data.routes[0]){ //... and so on 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:42:37.640

我相信您遇到了[Google 已放弃对 IE 8 的支持](http://www.webmonkey.com/2012/09/google-drops-support-for-ie-8-windows-xp/)的问题。

# ios - MPMoviePlayerViewController 不播放

> ID：15342609
> 
> 赞同：0
> 
> 时间：2013-03-11T15:36:42.280
> 
> 标签：ios, objective-c, video-streaming, mpmovieplayercontroller, mpmoviewcontroller

我会保持简单，代码如下：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
VideoEntry *entry = [videoEntries objectAtIndex:indexPath.row];

[HCYoutubeParser h264videosWithYoutubeURL:[NSURL URLWithString:entry.url] completeBlock:^(NSDictionary *videoDictionary, NSError *error) {
    NSArray *urls = [videoDictionary allValues];
    NSURL *url = [NSURL URLWithString:[urls objectAtIndex:0]];
    [mp.moviePlayer setAllowsAirPlay:YES];
    [mp.moviePlayer setContentURL:url];
    [mp.moviePlayer prepareToPlay];
    [mp.moviePlayer play];
    [self presentMoviePlayerViewControllerAnimated:mp];
}]; 
```

}

mp 是一个 MPMoviePlayerViewController。显示了视图控制器，但电影没有开始，它只是说“正在加载...”，在你问之前我 100% 确定链接有效。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:46:06.100

它不起作用，因为没有在主线程上调用完成块。您可以通过强制在主线程上执行代码来解决：

```
[HCYoutubeParser h264videosWithYoutubeURL:[NSURL URLWithString:entry.url]
                            completeBlock:^(NSDictionary *videoDictionary, NSError *error) {
    dispatch_async(dispatch_get_main_queue(), ^(void) {
        NSArray *urls = [videoDictionary allValues];
        NSURL *url = [NSURL URLWithString:[urls objectAtIndex:0]];
        [mp.moviePlayer setAllowsAirPlay:YES];
        [mp.moviePlayer setContentURL:url];
        [mp.moviePlayer prepareToPlay];
        [mp.moviePlayer play];
        [self presentMoviePlayerViewControllerAnimated:mp];
    });
}]; 
```

# java - 遍历 ArrayList>

> ID：15342611
> 
> 赞同：2
> 
> 时间：2013-03-11T15:36:50.200
> 
> 标签：java, arrays, arraylist, loops

我在迭代时遇到了一些麻烦`ArrayList`。我有一个名为`Row`extends的类`ArrayList<String>`。我有另一个名为`Table`extends的类`ArrayList<Row>`。

我正在尝试遍历 Table 类以将`ArrayList`Rows 转换为二维字符串数组。

这是我的`Table`课程代码：

```
public class Table extends ArrayList<Row>
{
public Row[] appArray; //Array of single applicant details
public String tableArray[][]; //Array of every applicant
private ArrayList<Row> ar;
private Row r;

public Table()
{
}

public void addApplicant(Row app)
{
    add(app);
    displayable();
}

public void convertToArray()
{
    int x = size();
    appArray=toArray(new Row[x]);
}

public void displayable()
{
int i,j;
for (Row r: ar)
   i=0;
    for(String s: r){
        j=0;
        tableArray[i][j]=s;
        j++;
    }

}} 
```

这是`Row`课程：

```
public class Row extends ArrayList<String>
{
public Row(String appNumber, String name, String date, String fileLoc, String country, Table table)
{
    addDetails(appNumber,name,date,fileLoc,country);
    table.addApplicant(this);
}

public void addDetails(String appNumber, String name, String date, String fileLoc, String country)
{
    add(appNumber);
    add(name);
    add(date);
    add(fileLoc);
    add(country);
}} 
```

我遇到问题的方法是`displayable()`在`Table`课堂上。它告诉我`i may not have been initialized`但是，如果我在每个循环的第二个中初始化它，它只会遍历我的第一个元素`Table ArrayList`？

在此先感谢您的任何指点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T15:38:39.847

你只是错过了`for (Row r: ar)`循环中的块。

此外，正如[Fortega 所](https://stackoverflow.com/users/109880/fortega)指出的，您永远不会`i`在代码中增加，我想您将计数器归零在错误的位置。

所以，而不是：

```
for (Row r: ar)
   i=0;
   for(String s: r){
     j=0;
     tableArray[i][j]=s;
     j++;
   } 
```

你应该写这样的东西：

```
i=0;
for (Row r: ar) {
  j=0;
  for(String s: r){
    tableArray[i][j]=s;
    j++;
  }
  i++;
} 
```

或者更好地缩小计数器的可见性区域并将声明与初始化连接起来：

```
// Remove previous declarations

int i=0;
for (Row r: ar) {
  int j=0;
  for(String s: r){
    tableArray[i][j]=s;
    j++;
  }
  i++;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T15:43:23.040

displayable 方法有两个错误：

*   第一个 for 循环没有 {}
*   i 不递增（i++；缺失）

代码：

```
public void displayable()
{
  int i,j;
  for (Row r: ar){
    i=0;
    for(String s: r){
        j=0;
        tableArray[i][j]=s;
        j++;
    }
    i++;
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T15:40:15.020

改变这个：

```
for (Row r : ar)
            i = 0;
        for (String s : r) {
            j = 0;
            tableArray[i][j] = s;
            j++;
        } 
```

到：

```
for (Row r : ar) {
            i = 0;
            for (String s : r) {
                j = 0;
                tableArray[i][j] = s;
                j++;
            }
            i++;
        } 
```

# heroku - Heroku 的 Eclipse 插件是否存在问题？

> ID：15342613
> 
> 赞同：0
> 
> 时间：2013-03-11T15:36:57.787
> 
> 标签：heroku, eclipse-plugin

我正在使用 Eclipse 插件在 Heroku 上部署新应用程序。但是最近，当我尝试创建一个新应用程序时，在我选择模板应用程序的阶段，我从 Eclipse 收到以下异常：

```
An unknown error has occurred. If this error persists, please follow up with Heroku support.
com.heroku.api.exception.RequestFailedException: Unexpected app exist status statuscode:401 responseBody:{"id":"unauthorized","error":"Unauthorized"} 
```

我知道这与授权有关。但是，我找不到检查我提供给 Eclipse 插件的凭据的方法。据我记得，一旦您选择并命名了您的模板应用程序，就会在下一步中提供凭据。

有人知道heroku的eclipse插件是否有问题吗？

谢谢你。

# css - ul div 推出父级

> ID：15342618
> 
> 赞同：1
> 
> 时间：2013-03-11T15:37:09.127
> 
> 标签：css, html-lists, inline-styles

我对 ul div 有疑问。我的 ul 的父 div 没有把它放在里面。我有父 div (subMenu) 定位和 z-indexed 但是 ul 子 (subMen) 只是推出并显示在它的底部，当它应该包含在父母并拉到我应用于父母的定位。我试过浮动和列表式定位它。但似乎什么都不重要。这是CSS代码：

```
#subMenu {
background-image: url(images/sub_nav_background2.png);
width: 1280px;
height: 60px;
position: relative;
top: -145px;
z-index: -100;
}

#subMen {
margin-left: 330px;
list-style-position: inside !important;
float: left !important;
height: 20px;
width: 900px !important;
font-size: 14px;

} 
```

这是涉及此的 HTML 部分。

```
<div id="subMenu">
        <ul id="subMen">
        <li><a href="#">BRAND MARKETING</a></li>
        <li><a href="#">EXPERIENTIAL MARKETING</a></li>
        <li><a href="#">PERFORMANCE SOLUTIONS</a></li>
        <li><a href="#">MEETING & EVENT SOLUTIONS</a></li>
        </ul>
        </div>
<div class="clearfix"></div> 
```

这是正在发生的事情的[图像。](http://img.photobucket.com/albums/v88/Nesso/ScreenShot2013-03-11at111827AM_zpsbd04c279.png)

底部列出的菜单应该位于该灰色区域并隐藏在顶部的主导航下方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-09T14:35:18.713

你可以做

```
list-style-position:inside; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:25:01.617

我根据您的代码整理了一个小提琴。

[http://jsfiddle.net/wby6W/1/](http://jsfiddle.net/wby6W/1/)

```
#subMenu {
background:#ccc;
width: 1280px;
height: 60px;
position: relative;
z-index: -100;
overflow:hidden;
}

#subMen {
margin-left: 330px;
float: left;
width: 900px;
font-size: 14px;
} 
```

我删除了 top:-145px 因为我需要查看窗口中的文本。如上所述，我还添加了溢出：隐藏到您的 CSS 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:40:55.447

当您浮动某些东西时，它可以逃脱其父 div。您应该将该`overflow`属性添加到您的父级。如果您指定`overflow: hidden`它将隐藏溢出；`overflow: scroll`将滚动。

工作示例：http: [//jsfiddle.net/BZFTY/2/](http://jsfiddle.net/BZFTY/2/)。

在上面的小提琴中，尝试将溢出属性更改为不同的值：`default`、`scroll`和`hidden`.

# java - Cassandra 更新无法始终如一地工作

> ID：15342621
> 
> 赞同：4
> 
> 时间：2013-03-11T15:37:19.440
> 
> 标签：java, cassandra, astyanax

我在本地（mac）机器和远程 unix 服务器上运行以下代码：

```
public void deleteValue(final String id, final String value) {
    log.info("Removing value " + value);
    final Collection<String> valuesBeforeRemoval = getValues(id);
    final MutationBatch m = keyspace.prepareMutationBatch();
    m.withRow(VALUES_CF, id).deleteColumn(value);
    try {
      m.execute();
    } catch (final ConnectionException e) {
      log.error("Unable to delete  location " + value, e);
    }
    final Collection<String> valuesAfterRemoval = getValues(id);
    if (valuesAfterRemoval.size()!=(valuesBeforeRemoval.size()-1)) {
      log.error("value " + value + " was supposed to be removed from list "  + valuesBeforeRemoval + " but it wasn't: " + valuesAfterRemoval);
    }
...
  }

protected Collection<String> getValues(final String id) {
  try {
    final OperationResult<ColumnList<String>> operationResult = keyspace
            .prepareQuery(VALUES_CF).getKey(id).execute();
    final ColumnList<String> result = operationResult.getResult();
    if (result.isEmpty()) {
      log.info("No  value found for id: " + id);
      return new ArrayList<String>();
    }
    return result.getColumnNames();
  } catch (final ConnectionException e) {
    log.error("Unable to retrieve session " + id, e);
  }
  return new ArrayList<String>();
} 
```

在本地，该行永远不会执行，这是有道理的：

```
log.error("value " + value + " was supposed to be removed from list "  + valuesBeforeRemoval + " but it wasn't: " + valuesAfterRemoval); 
```

但该行在我的开发服务器上执行：

[错误] [main] [nowsdSessionDaoCassandraImpl] [2013-03-08 13:12:24,801] [] - 值 3 应该从列表中删除 [3, 2, 1, 0, 7, 6, 5, 4, 9, 8] 但不是：[3, 2, 1, 0, 7, 6, 5, 4, 9, 8]

*   我正在使用 com.netflix.astyanax
*   我的本地机器和远程开发服务器都连接到同一个 cassandra 实例。
*   我的本地机器和远程开发服务器都运行相同的测试，创建一个新的行族，并在删除一条记录之前添加 10 条记录。
*   当dev发生错误时，log.error("无法删除位置" + value, e); 没有被执行（即运行删除命令没有产生任何异常）。
*   我 100% 肯定，当我在 dev 上运行测试时，没有其他代码影响数据库的内容，所以这不是什么奇怪的并发问题。

什么可以解释 deleteColumn(value) 请求运行时没有产生任何错误但仍然没有从数据库中删除列？

附加信息

这是我创建键空间的方式：

```
create keyspace sessiondata
    with placement_strategy = 'org.apache.cassandra.locator.SimpleStrategy'
    and strategy_options = {replication_factor:1}; 
```

以下是我创建列族值的方法，在上面的代码中引用为 VALUES_CF：

```
create column family values
    with comparator = UTF8Type
; 
```

以下是上面 java 代码中引用的键空间的定义方式：

```
final AstyanaxContext.Builder contextBuilder = getBuilder();
final AstyanaxContext<Keyspace> keyspaceContext = contextBuilder
        .forKeyspace(keyspaceName).buildKeyspace(
                ThriftFamilyFactory.getInstance());
keyspaceContext.start();
keyspace = keyspaceContext.getEntity(); 
```

其中 getBuilder 是：

```
 private Builder getBuilder() {
    final AstyanaxConfigurationImpl conf = new AstyanaxConfigurationImpl()
    .setDiscoveryType(NodeDiscoveryType.NONE)
    .setRetryPolicy(new RunOnce());

    final ConnectionPoolConfigurationImpl poolConf = new ConnectionPoolConfigurationImpl("MyPool")
    .setPort(port)
    .setMaxConnsPerHost(1)
    .setSeeds(value);

    return new AstyanaxContext.Builder()
    .forCluster(cluster)
    .withAstyanaxConfiguration(conf)
    .withConnectionPoolConfiguration(poolConf)
    .withConnectionPoolMonitor(new CountingConnectionPoolMonitor());
  } 
```

第二次更新

*   首先，这些问题不仅仅与删除有关。我在更新数据库中的记录时观察到类似的问题，读取它们，并且无法读取我刚刚编写的更新

*   其次，我创建了一个执行 100 次以下操作的测试：

    *   将一行写入 cassandra
    *   在 cassandra 中更新该行
    *   从 cassandra 读回该行并检查该行是否确实已更新，如果没有，则在延迟后定期再次检查

    我从该测试中观察到的是：

    *   同样，当我在本地运行该代码时，所有 100 次迭代都会立即通过（无需重试）
    *   当我在远程服务器上运行该代码时，一些迭代通过，一些失败。当它们失败时，无论延迟有多大（我最多等待 10 秒），测试总是失败。

在这一点上，我真的不确定任何 cassandra 设置如何解释这种行为，因为我连接到同一台服务器进行测试，并且由于我插入的延迟远大于连接时运行测试可能需要的任何额外延迟从我的本地机器。

唯一相关的区别似乎是代码在哪台机器上运行。

第三次更新

如果在之前更新中提到的测试中，我在 2 次写入之间插入了延迟，如果延迟 >= 1,000 毫秒，则代码开始通过。比如说，100 毫秒的延迟没有帮助。我还修改了构建器，将默认的读写一致性设置为最苛刻的：ALL，这对测试结果没有影响（大约一半的时间仍然失败，除非写入之间的延迟>1s）：

```
final AstyanaxConfigurationImpl conf = new AstyanaxConfigurationImpl()
.setDiscoveryType(NodeDiscoveryType.NONE)
.setRetryPolicy(new RunOnce()).setDefaultReadConsistencyLevel(ConsistencyLevel.CL_ALL).setDefaultWriteConsistencyLevel(ConsistencyLevel.CL_ALL); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:40:47.510

To debug, try printing the full row instead of just the column names. When I say the full row I mean the column name, column value and the time stamp. A long shot is clocks are wrong on one of your test machines and this is throwing out your tests on the other.

Another thing to double check is that ip is indeed what you think it is, in both your application and cassandra. When you retrieve it print it between something, like println("-" + ip "-"). Before and after your try block for the execute in deleteSecureLocation do a get for only that column, not the entire row. I'm not too sure how to do that in astynax, on the cli it would be get[id][ip].

Something to keep in mind is that a delete won't fail even if there's nothing to delete. To cassandra it's a write, the only thing that will make it a delete is if on read it's the latest timestamped entry against that row/column name.

# c# - 异步等待链接如何停止

> ID：15342623
> 
> 赞同：0
> 
> 时间：2013-03-11T15:37:28.170
> 
> 标签：c#, asynchronous, .net-4.5, async-await, c#-5.0

（新手异步/等待）

我正在链接一个正在深入到许多类的 Initialize() 函数。
每个类都有这个初始化方法：

```
 public async Task Initialize(string fileName) 
```

当我进入最后一堂课时，我该怎么办？
我想运行一个简单的函数，例如：

```
public async Task Initialize(string dllPath)
{         
    await PrintThePath(dllPath);
}

public void PrintThePath(string dllPath)
{
     Console.WriteLine(dllPath);
} 
```

当然，我收到“无法等待无效”错误。
所以我在逻辑上做错了什么。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T15:41:49.823

在这种情况下，只需`PrintThePath`直接调用，`await`因为它是一个简单的同步方法。

```
public async Task Initialize(string dllPath)
{
    PrintThePath(dllPath);
} 
```

尽管似乎没有理由将其标记`Initialize`为 ，但查看此示例`async`。它不做任何`async`工作，也不是一种`override`方法。本身没有必要将此方法标记为`async`（编译器会警告您）

**编辑**

OP 指定他们在构建时将警告视为错误，并且需要维护这种模式，即使`Initialize`实际上并非如此`await`。这是抑制警告的代码

```
#pragma warning disable 1998
    public async Task Initialize(string dllPath)
    {
        PrintThePath(dllPath);
    }
#pragma warning restore 1998 
```

# android - 如何写入在 res/raw 中声明的文件？

> ID：15342628
> 
> 赞同：1
> 
> 时间：2013-03-11T15:37:49.537
> 
> 标签：android

我有一个文件存储在 res/raw 中，我想知道如何写入该文件。我尝试了getResources，但它返回了一个inputStream。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T15:40:49.583

不可能。如果您需要将资产复制到设备，请将文件存储在资产目录中。然后使用 AssetManager 流式传输并复制资产，以便将其写入磁盘或应用程序缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:38:38.643

您不应该编写应用程序资源。相反，尝试将资源复制到您的可写数据目录并在那里进行修改。[`Context`](http://developer.android.com/reference/android/content/Context.html)根据您的需要，有许多方法可以帮助您找到合适的目录。

# java - 游戏计时器损坏延迟

> ID：15342630
> 
> 赞同：3
> 
> 时间：2013-03-11T15:37:57.403
> 
> 标签：java, multithreading, swing, timer

我和我的一个朋友正在开发一款游戏，基本上，我们设置了一个碰撞箱，如果我们的角色（蜘蛛）击中它，角色就会失去健康。

因为我们使用了for循环，所以不可避免的会发生，玩家一个一个地失去生命值，但速度如此之快，人眼看不到。因此，我们需要为玩家每 x 次击中蜘蛛设置一个计时器、暂停或其他东西。这是我们的代码：

```
 if (ResetEntities.spiderObj.intersects(ResetEntities.blueCharacterObj)) {
        try {
            Thread.sleep(10);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        for (int i = 0; i < 100; i++) {
            if (ResetEntities.blueHealth < 0) {
                ResetEntities.blueHealth = 0;
                Frame.blueHealthLabel.setText("Health: "
                        + ResetEntities.blueHealth);
            } else {
                ResetEntities.getBlueHealth(ResetEntities.blueHealth - 1);
                Frame.blueHealthLabel.setText("Health: "
                        + ResetEntities.blueHealth);
            }
        }
    } 
```

在这段代码中，我们有一个 if 语句来检查交集。我试图让脚本休眠，（我意识到 10 速度非常快，但 1000 延迟非常可怕，所以`Thread#sleep`我想象中的路不通）。然后我们有一个 for 语句运行 100 次（作为球员的健康）。然后我们有一个 if 查看生命值是否低于 0，设置回 0，这样玩家就不会得到负生命值。如果它不低于 0，我们执行 else 并减去 1 生命值。但正如我所说，这运行得太快了。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:57:53.343

传统的方法——在我看来最好的方法——是让受伤的角色在特定的时间点之前无懈可击：当角色受伤时，检查游戏时间线（或者如果你没有，那么当前毫秒计数）然后添加一个特定的时间，例如 1 秒（或与字符相关的恢复时间）并记住字符对象中的时间戳。想要伤害角色的gametick首先检查角色是否仍然处于隐藏的无敌状态。这特别好，因为通常人们并不真正希望多个线程更新游戏状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:58:51.473

问题尚不清楚，但您是在问如何才能阻止健康状况如此迅速地下降？如果是这样，这就是我会做的：

您应该有一个 int 值 invincibilityTime 并在玩家被击中时将其设置为 100，然后每次您的游戏通过 gameloop 时都会将其减一。放在`if(invincibilityTime <= 0)`之前`(ResetEntities.spiderObj.intersects(ResetEntities.blueCharacterObj))`以检查无敌期是否已过期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T15:53:13.353

使用[Timer](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html)进行后台进程的计时。并用于`javax.swing.SwingUtilities.invokeLater(Runnable)`更新您的 GUI。

# shell - 使用 shell 输出对 condor 进行错误处理

> ID：15342635
> 
> 赞同：0
> 
> 时间：2013-03-11T15:38:19.133
> 
> 标签：shell, error-handling, terminal, condor

我需要使用 shell 向 condor（多客户端执行网格）提交多个模拟，因为这可能需要一段时间，所以我决定编写一个 shell 脚本来为我做这件事。我对 shell 脚本非常陌生，这是我一天所做的结果：

```
for H in {0..50}
do
    for S in {0..10}
    do
        ./p32 -data ../data.txt -out ../result -position $S -group $H
        echo "> Ready to submit"
        condor_submit profile.sub
        echo "> Waiting 15 minutes for group $H Pos $S"
        for W in {1..15}
        do
            echo "Staring minute $W"
            sleep 60
        done
    done

    echo "Deleting data_3 to free up space"
    mkdir /tmp/data_3
    if [$H < 10]
        then
            tar cfvz /tmp/data_3/group_000$H.tar.gz ../result/data_3/group_000$H
            rm -r ../result/data_3/group_000$H
        else
            tar cfvz /tmp/data_3/group_00$H.tar.gz ../result/data_3/group_00$H
            rm -r ../result/data_3/group_00$H
    fi
done 
```

该脚本运行 0..50 次模拟并将 0..10 个不同的参数提交给生成 condor 提交配置文件的程序。然后我提交此配置文件并让它执行 15 分钟（每分钟进行一次调用以确保 SSH 管道不会中断）。一旦 15 分钟结束，我将输出压缩到具有更多空间的卷并擦除原始文件。

我实施这个的原因是因为我们的 condor 系统一次只能处理多达 10,000 个提交，而一个提交 ( `condor_submit profile.sub`) 执行 7000 多个模拟。

现在我的问题是这条线。当我今天早上检查时，我（幸运地）发现`condor_submit profile.sub`如果网络太忙，调用时可能会导致错误。错误代码是：

```
ERROR: Failed to connect to local queue manager
CEDAR:6001:Failed to connect to <IP_NUMBER:PORT_NUMBER> 
```

这意味着不时会丢失整个迭代！我该如何解决这个问题？我看到的唯一方法是使用 shell 读取终端输出的最后一行并评估它们是否遵循预期的响应，即：

```
7392 job(s) submitted to cluster CLUSTER_NUMBER. 
```

但是我将如何阅读最后一行并检查错误？

**非常需要**任何帮助，非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:13:36.803

失败时是否`condor_submit`给出非零退出代码？如果是这样，您可以尝试这样调用它：

```
while ! condor_submit profile.sub; do
    sleep 5
done 
```

这将导致当前配置文件每 5 秒提交一次，直到成功。

# c# - SWIG：如何将指定的 C# 代码块添加到所有生成的 C# 方法

> ID：15342638
> 
> 赞同：2
> 
> 时间：2013-03-11T15:38:29.647
> 
> 标签：c#, c++, c, swig

我正在使用 SWIG 为我的 C API 生成 C# 绑定。理想情况下，我想在我生成的所有 C# 方法中添加一个固定代码块，而无需通过特定的类型映射。

这可能吗？

更新：

一个例子是这样的：

```
class MyClass {

.....

public void MyMethod()
{
    // A block of code that will appear in all my methods.

   // my working code 1.

}

public void MyMethod_2()
{
    // A block of code that will appear in all my methods.

   // my working code 2.

}

.....

} 
```

也就是说我想生成与类型映射无关的代码，或者异常，它只是几行代码（例如，上面的“将出现在我所有方法中的代码块。”）将被插入到所有生成的方法。

我知道 SWIG 有特殊的命令，例如**csbody**来插入接口级代码，但我找不到任何我想要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:05:35.720

我认为最接近这一点的是滥用`%exception`。插入每个函数代码，除了它在 C++ 端而不是 C# 端。但是，您可以使其等效，因为您始终可以通过 C++ 本机调用在 C# 中做任何您想做的事情。您甚至可以安排 C++ 调用一些静态函数来执行您希望固定块执行的任何操作。

例子：

```
%module test

%exception {
  // Some magical code goes here
  $action
}

class MyClass {
public:
  void MyMethod();
  void MyMethod2();
}; 
```

在每个函数调用之前生成一个带有额外 C++ 代码的 rapper。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T23:17:15.323

1）使类部分

```
%typemap(csclassmodifiers) MyClass "public partial class" 
```

2) 在 %pragma(csharp) moduleimports 中添加缺失的代码

```
%pragma(csharp) moduleimports= %{

public partial class MyClass
{
    public void MyMethodN()
    {
    ...
    }
}

%} 
```

# c++ - c++向量push_back不工作

> ID：15342642
> 
> 赞同：0
> 
> 时间：2013-03-11T15:38:34.377
> 
> 标签：c++, stdvector, push-back

我的程序在这里崩溃：

```
void TriangleStrip::addTriangle(Triangle t){ 
   cout << t <<endl ;
   instances.push_back(t); // problem here
} 
```

实例是：

```
vector<Triangle> instances; 
```

我在这里调用 addTriangle ：

```
TriangleStrip* s;
int c = m.getTrianglesCount();
int i;
Triangle* triangles = m.getTriangles();
for(i=0; i<c; i++){
  s->addTriangle(triangles[i]); 
} 
```

cout 给我写三角形，但我不能把它放到向量中。

问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T15:40:16.067

`TriangleStrip* s;`声明一个**未初始化**的指针，取消引用它`s->addTriangle...`是非法的。

要么用 初始化它`new`，要么根本不使用指针——在这种情况下，你不需要指针，只需要

```
TriangleStrip s; 
```

和

```
s.addTriangle(triangles[i]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:41:21.533

你永远不会创建一个`TriangleStrip`.

这将创建一个**指向**a的指针`TriangleStrip`。

```
TriangleStrip* s; 
```

这期望将指针分配给`TriangleStrip`. 但这从未发生过。

```
s->addTriangle(triangles[i]); 
```

# jquery - 在 MVC 4 中使用 jQuery 表单提交的部分视图和模型

> ID：15342647
> 
> 赞同：1
> 
> 时间：2013-03-11T15:38:40.410
> 
> 标签：jquery, razor, asp.net-mvc-4

我正在开发基于 MVC 4 的网络应用程序，并且正在尝试使用 HTML 表单进行一些工作。我在视图模型中有几个单独的模型，如下所示：

```
public class NewAccountViewModel
{
    UserModel User { get; set; }
    AccountModel Account { get; set; }
    TicketModel Ticket { get; set; }
} 
```

然后，我将其用作我的视图的模型。该视图还包含每个模型的局部视图。这些局部视图中的每一个也使用视图模型作为它们的模型，我从主视图传递视图模型实例，如下所示：

```
@Html.Partial("~/Views/Account/_User.cshtml", Model) 
```

然后在部分视图中，我添加了以下字段：

```
@Html.TextBoxFor(m => m.User.Name) 
```

在我的 POST 处理程序中，我接受视图模型实例作为参数，并且可以处理从那里的表单提交的数据。使用`jQuery.post`,提交表单`$('#nameofmyform').serialize()`作为数据。

这种方法就像预期的那样工作。但是，局部视图和视图模型之间的耦合过于紧密。如果我想在具有不同视图模型的不同控制器中使用用户模型，这是不可能的，因为部分视图使用这个特定的视图模型。

所以，我尝试的是这样的：

```
@Html.Partial("~/Views/Account/_User.cshtml", Model.User) 
```

然后，使用实际模型作为局部视图的模型，我绑定了字段：

```
@Html.TextBoxFor(m => m.Name) 
```

这是单向的，因为所有字段都使用来自视图模型及其包含的模型的数据正确填充。但是，在 POST 上，视图模型没有正确序列化回来。通过检查从表单发回的数据，我看到在第一种方法中，所有内容都绑定到视图模型，它使用如下数据序列化表单：

```
{ "User.Name" : "Blahblah" ... 
```

而使用第二种方法时，它只是按模型序列化表单：

```
{ "Name" : "Blahblah" ... 
```

这样，视图模型的模型属性在 POST 处理程序中都是空值。

所以，我真正想知道的是：是否有可能以某种方式从视图模型中添加属性名称，以便在我的视图模型中正确序列化？我需要在 JavaScript/通过 jQuery 中执行此操作，还是可以在我的 .NET 代码中执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T15:48:45.623

使用编辑器模板而不是部分模板：

```
@Html.EditorFor(x => x.User, "_User") 
```

然后定义`~/Views/Shared/EditorTemplates/_User.cshtml`：

```
@model User
...
@Html.TextBoxFor(m => m.Name) 
```

现在您的输入字段将被正确命名，因为与部分相反，编辑器模板尊重导航上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:49:00.693

您可以像这样设置字段前​​缀：

```
ViewData.TemplateInfo.HtmlFieldPrefix = "User"; 
```

# jquery - 如何使用 jQuery 使用 asmx Web 服务？

> ID：15342651
> 
> 赞同：0
> 
> 时间：2013-03-11T15:38:56.707
> 
> 标签：jquery, ajax, web-services, web-config, asmx

我在网上看到了许多不同的答案，并做了很多复制和粘贴。它对我不起作用。谁能告诉我为什么？？我很沮丧>_<我必须对我的 web.config 文件做些什么吗？我不明白即使是我的“WebService.asmx/add”也不会从我的浏览器返回任何内容（因为没有这样的链接。）jQuery 将如何获得任何结果？我必须添加一些httphandler，对吗？![在此处输入图像描述](../Images/66b062b8642de474c8ebe6638c0884ad.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:46:35.033

正如我在您的图片中看到的，您的 webmethod 没有静态方法。

webmethod 应该是静态方法，以便使用服务。 [Web方法和静态](http://encosia.com/why-do-aspnet-ajax-page-methods-have-to-be-static/)

```
[WebMethod]
Public static string HelloWorld()
{
 return "Hi";
} 
```

请通过此链接获取更多信息

1.  [WebService 和 Jquery](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:50:55.717

我不知道我是被讨厌还是什么。只是没有人回答我。很伤心。...>_<... 经过几天的研究，我找到了一些工作方法需要将数据序列化为 JSON 字符串的属性是

```
[System.Web.Script.Services.ScriptService] 
```

所以我有我的 asmx 代码

```
<%@ WebService Language="C#" Class="WebService" %>

using System;
using System.Web;
using System.Web.Services;
using System.Web.Services.Protocols;
using System.Web.Script.Services;
using System.Data;
using System.Data.SqlClient;
[System.Web.Script.Services.ScriptService]
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
public class WebService  : System.Web.Services.WebService {

[WebMethod]    
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public string HelloWorld() {
    return "Hello World";
}
[WebMethod]    
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public int add(int a, int b)
{
    return a + b;
} 
```

}

我的 jQuery 代码为

```
 $(
        function () {
            $.ajax({
                type: "POST",
                url: 'WebService.asmx/add',
                data: "{'a':15, 'b':20}", //be careful! do pass it as a string
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    alert(msg.d);
                },
                error: function (e) {
                    alert("WebSerivce unreachable");
                }
            });
        }
    ); 
```

正确返回 35。

好的！

# c++ - 使用 extern 显式实例化声明

> ID：15342653
> 
> 赞同：3
> 
> 时间：2013-03-11T15:39:07.737
> 
> 标签：c++, templates, c++11

我正在阅读 C++ 标准草案 n3485 中的 14.7.2，它说：

> 2 显式实例化的语法是：explicit-instantiation: `extern`*opt* template declaration
> 
> 显式实例化有两种形式：显式实例化定义和显式实例化声明。**显式实例化声明以`extern`关键字开头。**

看到模板声明和定义总是放在标题中，我从未见过`extern`模板上的声明。那个加粗的句子到底是什么意思？

另外为什么实例化会关心`extern`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T15:44:26.683

它告诉编译器不要在这个 TU 中实例化该模板。

`extern`请注意，如果您希望代码实际链接，它应该在一个 TU（没有位）中实例化。

# java-native-interface - JNI：传递参数时出现不满意的链接错误

> ID：15342654
> 
> 赞同：0
> 
> 时间：2013-03-11T15:39:13.607
> 
> 标签：java-native-interface

我有点'新手`JNI`，但一直在阅读很多关于`JNI`何时我想在我的项目中使用旧版 dll 的信息。足够快，我发现我不能为本地方法提供参数。这是我尝试编码但没有成功的示例：

```
Hello.java:
package HelloWorld;

    Public class Hello {
    Private static native int HelloWorld();
    Private static native int Mirror(int a);
    Static {
      System.loadLibrary("Example"); //got path in            
                    vm arguments - works.
    }
    Public static void main(String[] args) {
    Int a = 8;
    System.out.println(Mirror(a));
    } 
```

使用 javah 创建标头，这让我得到了这个签名： `JNIEXPORT jint JNICALL Java_HelloWorld_Hello_Mirror (JNIEnv *, jclass, jint);`

写了一个 cpp：与带有 impl 的 h 相同的签名：`"return 1";`

就是这样......这是我从 eclipse 得到的错误： `Exception in thread "main" java.lang.UnsatisfiedLinkError: HelloWorld/Hello.Mirror(I)I at HelloWorld.Hello.main (Hello.java:14)`

* * *

这些是我的想法： A. 看到了一些关于 c 和 cpp 的东西，我是不是在混合东西。B. jdk 还是什么东西？C.库加载完美（检查了其他没有获取参数的函数），可能类型不兼容？

卡了一段时间，希望大家能帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:53:40.383

解决了！只需在“extern c”命令之后，在 cpp 文件中的两个函数周围添加“{”...

# angularjs - 如何引用来自不同模块的同名值

> ID：15342657
> 
> 赞同：13
> 
> 时间：2013-03-11T15:39:16.403
> 
> 标签：angularjs

如果我有一些定义相同`value`对象的模块：

```
var m1 = angular.module('m1', []);
m1.value('test', 'AAA');

var m2 = angular.module('m2', []);
m2.value('test', 'BBB'); 
```

注意`m1`和`m2`两者具有相同的值`test`。

然后在主模块中，我依赖他们两个：

```
var app = angular.module('angularjs-starter', ['m1','m2']);

app.controller('MainCtrl', function($scope, test) {
  $scope.test = test;
}); 
```

HTML 非常简单：

```
<body ng-controller="MainCtrl">
 [{{test}}]
</body> 
```

它将显示`[BBB]`在最后一页。我可以看到 的值`test`已`m1`被 的 之一覆盖`m2`。

你可以在这里看到一个现场演示：http: [//plnkr.co/edit/u7u8p0nYqq9CvNxWKv5G ?p=preview](http://plnkr.co/edit/u7u8p0nYqq9CvNxWKv5G?p=preview)

有没有办法在同一页面中显示`test`两者`m1`的值？`m2`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-11T15:55:57.327

简而言之 -**不**。AngularJS 模块形成一个命名空间。如果您在 2 个不同的模块上定义 2 个具有相同名称的值，则在运行时只有一个可见。这适用于任何提供者，而不仅仅是值。

这可能会在 AngularJS 的未来版本中得到解决，但现在**你最好的选择是在你的值（和其他提供者）前面加上一个模块名称**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-16T10:46:51.950

实际上，您*可以*（在某种程度上）这样做，但它需要更多的手动工作。[看到这个 plunkr。](http://plnkr.co/edit/gSBuraEytj8XXwLK8dgd)

```
var foo = angular.module('foo', ['ng']).value('test', 1);
var bar = angular.module('bar', ['foo']).value('test', 2);
console.log(angular.injector(['foo']).get('test')); // 1
bar.service('original', ['test', function(test) {
    console.log(test); // 2
}]); 
```

正如其他答案所述，模块命名空间是全局的，因此“foo”中的控制器从“bar”获取测试值。但是，通过使用 angular.injector([...modules]) 我们可以显式地从某些模块中检索值/服务/whatnot。

当然，这不适用于 Angular 的 DI 系统，但就我个人而言，这并没有真正困扰我，因为 function(Foo) {} 或 function() { Foo = angular.injector(['myModule']).get('富'); } 打字稍微多一点，但不一定更糟（我们仍在注入一些东西，只是手动注入）。

此外，指令和过滤器需要以另一种方式变得独特，但它提供了一个起点。

# php - PHP函数参数不起作用

> ID：15342663
> 
> 赞同：-1
> 
> 时间：2013-03-11T15:39:34.137
> 
> 标签：php, function, parameters, ternary-operator

除了空的选择标签之外，此函数不生成任何输出。如果没有指定天数，它应该根据当前月份自动选择天数。

```
function create_day_select($month=NULL)
      {
        ($month == NULL) ? $date = 31 : $days = date("t",$month);
        echo "<select name='day'>";
        for ($i = 0; $i < $days; $i++){
          echo "<option value='$i'>$i</option>";
        }
        echo "</select>";
      } 
```

这个函数正在工作，我使用了相同的语法：

```
 function create_year_select($begin=NULL,$end=NULL){
    ($begin == NULL) ? $begin = date("Y") : $begin;
    ($end == NULL) ? $end = date("Y") + 6 : $end ;
    echo "<select name='year'>";
      for($x = $begin; $x < $end; $x++){
        echo "<option value='$x'>$x</option>";
      }
    echo "</select>";
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:41:08.427

尝试：

```
$days = ( $month == NULL ) ? 31 : date("t",$month); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T15:41:27.180

您不能在运算符内部进行分配。

```
$days = ($month == NULL) ? ifvalue : elsevalue; 
```

除非您将它们分组到其他评估组中

```
$value = isset($var) ? ($foo = true) : ($bar = false); 
```

# html - 谷歌 seo 索引子域

> ID：15342665
> 
> 赞同：-1
> 
> 时间：2013-03-11T15:39:38.360
> 
> 标签：html, web, seo

请仅在您全面了解并可以详细说明的情况下回答。 **已给出一个答案，等待更多观点**

**我看到 stackoverflow 问题立即**在谷歌搜索中被索引。

 **我有一个域。（**masoodahmad.com**）

我有一个子域。**resume.masoodahmad.com**

我在 masoodahmad.com/index.html 中有 resume.masoodahmad.com的**链接。**masoodahmad.com**在谷歌搜索中可见，但**resume.masoodahmad.com**不**可见（不是通过其内容的关键字或名称）。

可能是什么原因？我需要什么东西，或者我有什么问题。

如果 masoodahmad.com/index.html 被编入索引。它有一个指向 resume.masoodahmad.com 的链接。所以 resume.masoodahmad.com 也应该被索引？

**即使爬虫没有访问 resume.masoodahmad.com **，蜘蛛也不可能知道 masoodahmad.com/indext.html（它有一个 resume.masoodahmad.com 的链接）并且没有访问过或知道resume.masoodahmad.com。**它确实知道。那么为什么不在谷歌搜索结果中呢？**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:46:53.753

如果您的域是新的，您只需要等待爬虫到达那里并索引您的第三级......这也可能需要两周以上。

我建议你在你的根目录中也放一个 robots.txt 和至少一个页面标题。

Robots.txt 示例：

```
User-agent: *
Disallow: 
```

将其保存为 robots.txt 并将其放在您的根文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:32:06.890

尝试适当的标签以提高机会。主页只有 on 标签。****

# c# - 循环删除列表中的多个项目...c#

> ID：15342669
> 
> 赞同：1
> 
> 时间：2013-03-11T15:39:48.877
> 
> 标签：c#, linq, loops, foreach

我有一种方法可以在数据库中搜索具有相同公司名称的所有客户，然后返回他们的 ID 号列表，现在我将它们保存到文本文件中，以便我可以确认它是否有效。

我遇到的问题是访问该 ID 号列表并返回并删除它们。在下面的代码中，我使用了一个请求，该请求将通过他们的 ID 号取消客户。我使用了一个 foreach 循环，它应该获取 ID 列表并将它们全部删除，但它只是删除一个而不是每次都删除一个，它每次都删除同一个，而不是尝试，我只是得到异常说**您正在尝试删除已被删除的客户**。请就我做错的事情提出任何建议！

```
SearchRequest _request;
CancelRequest _request2;

SearchResponse _response;
CancelResponse _response2;

public void ArrangeRequest() {
    _request=new CustomerSearchRequest();
    _request.Company="Test Inc. ";
} 
```

```
var customerIds=_response.Customers.Select(c => c.CustID).ToList();

foreach(var custID in customerIds) {
    _request2=new CancelRequest();
    _request2.CustID=custID;
    _request2.Company=_request.Company;
} 
```

```
public void Response() {
    var ws=new RunEngine();

    _response=ws.SearchCust(new AppHeader(), _request) as SearchResponse;
    _response2=ws.CancelCust(new AppHeader(), _request2) as CancelResponse;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T15:42:38.157

您正在重用`_request2`字段。不要在字段中存储单个取消请求，而是使用请求列表：

```
List<CancelRequest> _cancelRequests; 
```

然后创建并将所有请求添加到此列表中：

```
var customerIds = _response.Customers.Select(c => c.CustID);
_cancelRequests = customerIds.Select(custID => new CancelRequest { 
                          CustID = custID,
                          Company = _request.Company
                  }).ToList(); 
```

并在以后一一处理这些请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:54:13.493

似乎您的问题不会直接发生在列表中，因为您`CancelCust`可以一次处理`Request`一个。我实际上无法理解您发布的最早的代码片段应该在哪里，所以我只是命名它`NowhereMethod`！

我还修改了您的代码，更正了类似`_request.Company=_request.Company;`. 我根据您发布的代码进一步从使用情况中推断出您的所有类层次结构。

正如您所说，删除是由 完成的`CancelRequest`，但是，正如我上面提到的，一次只能删除`Request`一个，并且`Request`推断它仅保存有关一位客户的信息。因此，我认为您的问题可以通过重写`Response`方法来解决。

您仍然可以认为问题即将使它们成为列表，就像其他答案所示，这些是使用 Linq 的正确方法。尽管如此，您可能需要决定在某个类中放置正确的位置，或者以正确的方式设计一个方法来获取列表。

所以，这是我推断并试图纠正的代码；请注意，我使用*字段*而不是那些可能是*属性*，并且只放那些需要的。

您可能想查看代码中的注释。

```
partial class Listener /* I named it, to put your code */ {
    SearchRequest _request;
    CancelRequest _request2;

    SearchResponse _response;
    CancelResponse _response2;

    public void ArrangeRequest() {
        _request=new CustomerSearchRequest();
        _request.Company="Test Inc. ";
    }

    void NowhereMethod() {
        var customerIds=_response.Customers.Select(c => c.CustID).ToList();

        foreach(var custID in customerIds) {
            _request2=new CancelRequest();
            _request2.CustID=custID;
            _request2.Company=_request.Company;
        }
    }

    public void ResponseOriginal() {
        var ws=new RunEngine();

        _response=ws.SearchCust(new AppHeader(), _request) as SearchResponse;
        _response2=ws.CancelCust(new AppHeader(), _request2) as CancelResponse;
    }

    public void Response() /* tried to correct */ {
        var ws=new RunEngine();

        _response=ws.SearchCust(new AppHeader(), _request) as SearchResponse;

        var customerIds=_response.Customers.Select(c => c.CustID).ToList();

        foreach(var custID in customerIds) {
            _request2=new CancelRequest();
            _request2.CustID=custID;
            _request2.Company=_request.Company;

            // Seems it should be like this
            // but note the assignment might be wrong, it's according to what `CancelCust` returns
            // for the correct way to make it a list of Customer is appeared in other answers 
            _response2=ws.CancelCust(new AppHeader(), _request2) as CancelResponse;
        }
    }
}

partial class Customer {
    public String CustID;
}

partial class Response {
    public List<Customer> Customers;
}

partial class Request {
    public String Company;
    public String CustID;
}

partial class SearchResponse: Response {
}

partial class CancelResponse: Response {
}

partial class SearchRequest: Request {
}

partial class CancelRequest: Request {
}

partial class CustomerSearchRequest: SearchRequest {
}

partial class AppHeader {
}

partial class RunEngine {
    public Response SearchCust(AppHeader appHelper, Request request) {
        // I don't know what it's like
        throw new NotImplementedException();
    }

    public Response CancelCust(AppHeader appHelper, Request request) {
        // I don't know what it's like
        throw new NotImplementedException();
    }
} 
```

`Request`and`Customer`可以声明为

```
partial class Customer {
    // Company was not appearing used in the code
    public String CustID;
}

partial class Request {
    public String Company;
    public String CustID;
} 
```

或者

```
partial class Customer {
    public String Company;
    public String CustID;
}

partial class Request: Customer {
} 
```

不会破坏代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:42:02.460

`_request`似乎是一个单独的变量，而不是一个列表。然后它只会做一条记录，因为您每次都在循环中更新它，而不是将任何以前的循环值存储在列表中。

编辑：你想做这样的事情：

```
 var requestList = new List<CancelRequest>();
    var customerIds = _response.Customers.Select(c => c.CustID).ToList();
    foreach (var custID in customerIds)
    {
        _request = new CancelRequest(); 
        _request.CustID = custID;
        _request.Company = _request.Company;
        requestList.Add(_request);
    } 
```

# angularjs - AngularJS - 使用服务作为模型，ng-repeat 不更新

> ID：15342672
> 
> 赞同：11
> 
> 时间：2013-03-11T15:39:56.423
> 
> 标签：angularjs

我正在创建一个 ajax 搜索页面，该页面将由一个搜索输入框、一系列过滤器下拉列表以及一个显示结果的 UL 组成。

由于搜索的过滤器部分将位于页面上的单独位置，我认为创建一个服务来处理协调输入和对搜索服务器端的 ajax 请求是一个好主意。然后可以由几个单独的控制器调用它（一个用于搜索框和结果，一个用于过滤器）。

我正在努力解决的主要问题是在调用 ajax 时刷新结果。如果我将 ajax 直接放在 SearchCtrl 控制器中，它可以正常工作，但是当我将 ajax 移到 Service 时，它​​会在调用 Service 上的 find 方法时停止更新结果。

我确定这是我错过的一些简单的事情，但我似乎看不到它。

标记：

```
<div ng-app="jobs">
    <div data-ng-controller="SearchCtrl">
        <div class="search">
            <h2>Search</h2>
            <div class="box"><input type="text" id="search" maxlength="75" data-ng-model="search_term" data-ng-change="doSearch()" placeholder="Type to start your search..." /></div>
        </div>
        <div class="search-summary">
            <p><span class="field">You searched for:</span> {{ search_term }}</p>
        </div>
        <div class="results">
            <ul>
                <li data-ng-repeat="item in searchService.results">
                    <h3>{{ item.title }}</h3>
                </li>
            </ul>
        </div>
    </div>
</div> 
```

AngularJS：

```
var app = angular.module('jobs', []);

app.factory('searchService', function($http) {
    var results = [];

    function find(term) {
        $http.get('/json/search').success(function(data) {
            results = data.results;
        });
    }

    //public API
    return {
            results: results,
            find: find
    };
});

app.controller("SearchCtrl", ['$scope', '$http', 'searchService', function($scope, $http, searchService) {
    $scope.search_term = '';
    $scope.searchService = searchService;

    $scope.doSearch = function(){
        $scope.searchService.find($scope.search_term);
    };

    $scope.searchService.find();
}]); 
```

这是一个粗略的 JSFiddle，我已经注释掉了 ajax，我只是手动更新结果变量作为示例。为简洁起见，我没有包含过滤器下拉菜单。

[http://jsfiddle.net/XTQSu/1/](http://jsfiddle.net/XTQSu/1/)

我对AngularJS很陌生，所以如果我以完全错误的方式去做，请告诉我:)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-11T18:22:41.253

在您的 HTML 中，您需要引用在控制器的 $scope 上定义的属性。一种方法是在控制器中绑定一次`$scope.searchService.results`：`searchService.results`

```
$scope.searchService.results = searchService.results; 
```

现在这条线将起作用：

```
<li data-ng-repeat="item in searchService.results"> 
```

在你的服务中，使用`angular.copy()`而不是分配一个新的数组引用`results`，否则你的控制器的 $scope 将失去它的数据绑定：

```
var new_results = [{ 'title': 'title 3' }, 
                   { 'title': 'title 4' }];
angular.copy(new_results, results); 
```

[小提琴](http://jsfiddle.net/mrajcok/XmWUP/)。在小提琴中，我注释掉了对 find() 的初始调用，因此当您在搜索框中输入内容时，您可以看到更新发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:22:47.560

问题是您永远不会在您的范围内更新您的结果。有很多方法可以做到这一点，但根据您当前的代码，您可以首先修改您的**find**函数以返回结果：

```
function find(term) {
    $http.get('/json/search').success(function(data) {
            var results = data.results;

    });
    //also notice that you're not using the variable 'term' 
    //to perform a query in your webservice
    return results;
} 
```

您在“公共 API”中使用模块模式，因此您的**searchService**返回**find**函数和数组**results**，但您想让函数**find**负责*实际返回结果。*

撇开这一点不谈，每当您在范围内调用**doSearch()**时，您都希望更新**searchService返回的结果的当前结果**

```
$scope.doSearch = function(){
    $scope.searchService.results = searchService.find($scope.search_term);
}; 
```

我用我的想法更新了你的 jsfiddle，它不起作用，但我添加了一些评论和日志来帮助你调试这个问题。[http://jsfiddle.net/XTQSu/3/](http://jsfiddle.net/XTQSu/3/)

# jquery - 你能找到属性 w 的不同值的数量吗？jQuery？

> ID：15342674
> 
> 赞同：1
> 
> 时间：2013-03-11T15:40:05.337
> 
> 标签：jquery, html

假设我有这样的结构：

```
<div class='collection'>
    <div class='item' seq=1>foo</div>
    <div class='item' seq=2>bar</div>
    <div class='item' seq=2>baz</div>
    <div class='item' seq=2>asd</div>
    <div class='item' seq=3>que</div>
    <div class='item' seq=3>bletch</div>
</div> 
```

获取 seq=1、seq=2 等项的数量很容易。但是您如何找到 seq 的不同值的数量，以及这些值是什么？假设 的值`seq`将从 1 开始并增加 1 直到没有更多值可能是安全的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T15:45:34.550

您可以在对象中累积属性值及其计数：

```
var totals = {};
$(".collection > .item").each(function() {
    var seq = $(this).attr("seq");
    var total = totals[seq] || 0;
    totals[seq] = total + 1;
}); 
```

当上面的代码运行时，你应该有一个像这样的对象：

```
{
    "1": 1,
    "2": 3,
    "3": 2
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:41:42.713

您可以执行以下操作：

```
var items = [];
$(".collection > .item").each(function() {
   var sequence = $(this).attr("seq");
    if (jQuery.inArray(sequence, items) == -1) {
         items.push(sequence);
    }
}); 
```

这将声明一个名为 items 的数组并循环每个 div。如果序列不在数组中，则添加序列值。

# php - 通过 Pear 安装 PHPUnit 时出错

> ID：15342675
> 
> 赞同：0
> 
> 时间：2013-03-11T15:40:09.490
> 
> 标签：php, phpunit, pear

通过 PEAR 安装 PHPUnit，phpunit 的安装说明正在运行：

```
pear channel-discover pear.phpunit.de
pear install phpunit/PHPUnit 
```

但失败并出现此错误：

> 注意： fwrite(): send of 105 bytes failed with errno=10053 已建立的连接被主机中的软件中止。在 PEAR\Downloader.php 的第 1664 行
> 
> 注意： fwrite(): send of 105 bytes failed with errno=10053 已建立的连接被主机中的软件中止。在 C:\xampp\php\pear\PEAR\Downloader.php 第 1664 行
> 
> 通过 http:// 发现频道 pear.phpunit.de 失败并显示消息：
> 
> 频道添加：无法打开“ [http://pear.phpunit.de/channel.xml](http://pear.phpunit.de/channel.xml) ”（文件[http://pear.phpunit.de:80/channel.xml](http://pear.phpunit.de:80/channel.xml)无效（重定向但没有位置））
> 
> 尝试通过 https:// 发现频道 pear.phpunit.de
> 
> 频道“pear.phpunit.de”的发现失败（频道添加：无法打开“ [https://pear.phpunit.de/channel.xml](https://pear.phpunit.de/channel.xml) ”（与“pear.phpunit.de:443”的连接失败：
> 
> 已建立的连接被主机中的软件中止。））

你怎么解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-13T11:39:21.870

```
wget https://phar.phpunit.de/phpunit.phar
chmod +x phpunit.phar
mv phpunit.phar /usr/local/bin/phpunit 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T21:46:40.407

你设置了自动发现吗？我做了以下操作，它在 Ubuntu Linux 和 Windows 7 上正常工作。

Ubuntu：

```
sudo pear upgrade PEAR
sudo pear config-set auto_discover 1
sudo pear install pear.phpunit.de/PHPUnit 
```

视窗：

```
pear upgrade PEAR
pear config-set auto_discover 1
pear install pear.phpunit.de/PHPUnit 
```

# php - 每当此服务器端验证检查时，即使我输入正确的密码，它也会返回 false

> ID：15342680
> 
> 赞同：-2
> 
> 时间：2013-03-11T15:40:16.433
> 
> 标签：php, mysql, database, validation, passwords

这是代码。abc_university 是我的数据库名称。

```
<?php
include('connectionfile.php');
$query=("select username,password from professor where username='$_POST[username]'AND password='$_POST[password]'");
$result=MYSQL_QUERY($query);
$number = abc_university_numrows($result);
if($number ==0)
{
    abc_university_close($id_link);
    header("Location:InvalidUser.php"); 
}
else if($number ==1)
{
    $user=$_POST['username'];
    $pwd=$_POST['password'];
    session_start();
    session_register("user");
    if(!isset($_POST['user']))
    {
        $_SESSION['user'] = $prof_email_id;
                $_SESSION['pwd'] = $prof_pwd;
            }
    abc_university_close($id_link);
    header("Location:UserPage.php");    
}
else
{
    abc_university_close($id_link);
    header("Location:InvalidUser.php"); 
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:02:37.983

首先，您是否定义了一个名为`abc_university_numrows();`或不应该使用的函数`mysql_num_rows()`。

另外，为什么不迁移到`mysqli`mysql 现在已弃用。

# c# - 集成 Fluidkit ElementFlow

> ID：15342681
> 
> 赞同：1
> 
> 时间：2013-03-11T15:40:18.140
> 
> 标签：c#, .net, wpf, xaml, coverflow

我已将 FluidKit 库集成到我的项目中。它运作良好。我用它来实现它：

```
private void WindowLoaded(object sender, RoutedEventArgs e)
    {
        _dataSource = FindResource("DataSource") as StringCollection;
        _dataSource.Insert(0, "pack://application:,,/Resources/Images/CoverFlow/01.jpg");
        _dataSource.Insert(1, "pack://application:,,/Resources/Images/CoverFlow/02.jpg");
        _dataSource.Insert(2, "pack://application:,,/Resources/Images/CoverFlow/03.jpg");
        _dataSource.Insert(3, "pack://application:,,/Resources/Images/CoverFlow/04.jpg");
        _dataSource.Insert(4, "pack://application:,,/Resources/Images/CoverFlow/05.jpg");
        _dataSource.Insert(5, "pack://application:,,/Resources/Images/CoverFlow/06.jpg");
        _dataSource.Insert(6, "pack://application:,,/Resources/Images/CoverFlow/07.jpg");
        _dataSource.Insert(7, "pack://application:,,/Resources/Images/CoverFlow/08.jpg");
        _dataSource.Insert(8, "pack://application:,,/Resources/Images/CoverFlow/09.jpg");
        _dataSource.Insert(9, "pack://application:,,/Resources/Images/CoverFlow/10.jpg");
        _dataSource.Insert(10, "pack://application:,,/Resources/Images/CoverFlow/11.jpg");
        _dataSource.Insert(11, "pack://application:,,/Resources/Images/CoverFlow/12.jpg");

        _elementFlow.SelectedIndex = _dataSource.Count / 2;
    } 
```

但我无法使图书馆适应我的项目。我正在尝试制作一个 8 页的封面流（1 张图片和 1 个标题组成一页）。但我有相反的看法。

我的xml代码：

```
<Grid>
                <ItemsControl x:Name="ContentItems" 
                              ItemsSource="{Binding Path=Category.Content, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:StorySelectionControl}}}"
                              >
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <UniformGrid Rows="2" Height="{Binding ActualHeight, ElementName=ContentScrollViewer, Mode=OneWay}" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <FluidKit:ElementFlow x:Name="_elementFlow" TiltAngle="45" ItemGap="0.2" FrontItemGap="1.5" PopoutDistance="1.5" HasReflection="True"
                                    SelectedIndex="3" Margin="0,0,0,0">
                                <Border x:Name="ImageBorder" BorderBrush="{StaticResource SelectedColorBrush}">
                                    <Grid>
                                        <Image Source="{Binding ContentImage}" Margin="1,1,1,1" RenderOptions.BitmapScalingMode="HighQuality" Stretch="UniformToFill" />
                                    </Grid>
                                </Border>
                                <TextBlock x:Name="StoryTitle"  Text="{Binding Title}" Foreground="Black" Grid.Row="1"
                                                   Margin="0,25,0,0" FontFamily="Segoe" FontWeight="Light" HorizontalAlignment="Left" VerticalAlignment="Top"
                                                   FontSize="30" Height="80" TextAlignment="Left" TextWrapping="Wrap" TextTrimming="CharacterEllipsis" />
                                <FluidKit:ElementFlow.Camera>
                                    <PerspectiveCamera FieldOfView="50" Position="0,0,6" LookDirection="0,-0,-6"  />
                                </FluidKit:ElementFlow.Camera>
                            </FluidKit:ElementFlow>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl> 
```

我的封面图片链接：http: [//img819.imageshack.us/img819/1057/capturevad.png](http://img819.imageshack.us/img819/1057/capturevad.png)

你有什么想法吗？如果你不明白，告诉我！我的英语不是很好:-)

# c - 如何在C中创建一个用新数组替换数组的函数

> ID：15342683
> 
> 赞同：-3
> 
> 时间：2013-03-11T15:40:23.180
> 
> 标签：c

我在整个互联网上寻找解决方案，并尝试了我的代码的各种不同安排，但找不到任何有效或可以产生正确结果的东西。基本上，我想要一个函数，它接受一个已经创建的数组作为参数，根据前一个数组和其他一些参数的值创建一个新数组，然后替换用作的原始数组参数与新创建的数组。代码看起来像这样：

```
void function(double *array, double other_parameter)
 {
  /* do some calculations involving the array and the parameter */
  double new_array[/* some # */] = /* some expression */;
  *array = *new_array;
 }

main()
 {
  double *x[/* some # */];
  x[0]=/* some # */;x[1]=/* some # */;x[2]=/* some # */,...
  double par = /* something */
  function(x,par);
  printf("x =\n%f\n%f\n",x[0],x[1],...)
 } 
```

所有注释部分仅代表我想用这个数组执行的任何特定任务以及我特别选择给它的值，这些并不重要。我想弄清楚的是需要对我用于数组、指针和参数的符号进行哪些更改；以及我需要在哪些地方进行这些更改以获得所需的结果。如有必要，原始数组的大小可以作为附加参数输入到函数中，如果这是使其工作的唯一方法。我还要补充一点，新数组的大小并不总是与原始数组的大小相同（它将取决于参数）。

我非常感谢任何人可以给我的任何帮助；我一直在修改代码很长时间，到目前为止还没有任何工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:47:22.223

如果你曾经在 C 中分配过一个数组，你永远无法将它传回堆栈。（即回到调用函数）

为了创建数组并将它们发送回来，您需要使用`malloc()`

```
double* my_ar = malloc(sizeof(double) * ar_size);
...
free(my_ar); 
```

如果您想扩展该数组

```
my_ar = realloc(my_ar, sizeof(double) * new_size); 
```

这将释放您以前的数组并创建一个大小相同且内容相同的新数组，或者它将扩展您以前的数组。

如果你想复制你的数组

```
#include <string.h>
...
double* new_ar = malloc(my_ar, sizeof(double) * new_ar_size);
memcpy(new_ar, my_ar, MIN(ar_size, new_ar_size) * sizeof(double)); 
```

# javascript - 通过type=file获取文件路径

> ID：15342685
> 
> 赞同：0
> 
> 时间：2013-03-11T15:40:29.937
> 
> 标签：javascript, html

我有一个 html 元素输入类型文件。我正在使用以下代码获取多个文件名：

```
<input id="inputAddVideo" onchange="AddVideo(this.id)" type="file" name="upload" multiple/>

 var files = $('input[type="file"]')[0].files;
    for (var i = 0; i < files.length; i++) {
        alert('path: ' + files[i].path);
        var filename = files[i].name.split('.');
} 
```

现在同时，如何使用 javascript 检索每个文件的路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:42:32.117

您将无法通过 JavaScript 访问它；作为安全预防措施，浏览器会将文件名公开给您，但不会向您公开本地文件系统的其他内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:41:57.087

你不能。

这是浏览器创建者内置的安全措施，因此无法看到有关本地文件路径的私人信息。

# javascript - 如何测量脚本执行和*解析*时间？

> ID：15342687
> 
> 赞同：8
> 
> 时间：2013-03-11T15:40:31.530
> 
> 标签：javascript, profiling

据我所知，脚本是在 javascript 中同步下载和执行的。因此，如果我们编写以下代码：

```
<script type='text/javascript'>console.time('core')</script>
<script type='text/javascript' src="guicore.js"></script>
<script type='text/javascript'>console.timeEnd('core')</script> 
```

我们将在控制台中看到下载、解析和执行 js 的总时间。我们如何排除解析时间？只需添加类似的文件，但所有代码都已注释掉。或多或少，这种技术应该有效。

问题是这不起作用=）

我优化了该代码，将执行时间从 90 毫秒减少到 25 毫秒，但 Chrome 的时间约为 100±10 毫秒，Firefox 的时间约为 160±15 毫秒。

好的，我知道我可以使用分析器，但**问题是**：“如何正确测量 js 解析时间”以及我测量了什么。Research.reverse-engineering 非常有趣，但也许有人深入了解该领域。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-07-11T20:34:58.503

您无法单独使用 Web API 准确测量脚本解析时间，而与执行时间无关。不同的浏览器在解析时有不同的策略，其中一些会随着脚本的执行而逐步解析，甚至在假设一段代码不太可能立即执行的情况下进行“部分解析”（例如一个函数这不是 IIFE，请参阅[optimize-js README 中的](https://github.com/nolanlawson/optimize-js#why)一些详细信息）。

使用单独`<script>`的标签是至少捕获解析和执行时间*的最准确方法。*我将对您的代码段进行的唯一修改是：

```
<script>
  performance.mark('start');
</script>
<script src="myscript.js"></script>
<script>
  performance.mark('end');
  performance.measure('total', 'start', 'end');
</script> 
```

请注意高精度[用户计时 API](https://developer.mozilla.org/en-US/docs/Web/API/User_Timing_API)的使用，作为额外的奖励，它将在 Chrome/Edge/IE 开发工具（如果您愿意，还可以使用 Windows Performance Analyzer 和 WebPageTest 等工具）中显示可视化。

从技术上讲，第三个`<script>`不是必需的，因为您可以将标记/度量附加到第二个脚本的末尾。但是第一个`<script>`肯定是捕获所有解析时间所必需的。您可以在开发工具中验证标记/度量包含所有初始解析和执行时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-07T18:44:29.923

我知道这是一个老问题，但我在自己寻找解决方案时遇到了这个问题。您可以使用您选择的浏览器中的开发工具来查看此内容，但如果您想在代码中执行此操作，这是我最终使用的方法。

下面的`scriptLoadParseDuration`函数将获取`.js`文件的 URL，将其放入`<script>`元素中，并将加载/解析持续时间记录到控制台。

请记住，这将`<script>`在当前 DOM 上下文中执行您正在分析的内容。所以在下面的例子中：`jQuery`即使脚本被删除，仍然可以在全局范围内访问。该脚本可以扩展以完成所有这些操作`<iframe>`以隔离它。

```
function scriptLoadParseDuration(url) {
  var start;
  var script = document.createElement('script');

  // <script> must be attached to the document to actually load the file
  document.querySelector('html').appendChild(script);

  // Calculate load/parse duration once script has loaded
  script.addEventListener('load', function scriptLoad() {   
    // Calculate load/parse duration
    console.log('Duration: ' + (Date.now() - start) + 'ms');

    // Remove <script> from document
    script.parentElement.removeChild(script);
  }, false);

  // Get current time in milliseconds
  start = Date.now();

  // Setting the `src` starts the loading. Math.random is used to make sure it is an uncached request
  script.src = url + '?' + Math.floor(Math.random() * 9e9);
}

var url = 'https://code.jquery.com/jquery-3.0.0.min.js';

scriptLoadParseDuration(url);
```

这是一个示例，显示删除`jQuery`后仍在全局范围内。`<script>`

```
function scriptLoadParseDuration(url) {
  var start;
  var script = document.createElement('script');

  console.log('`jQuery` before attaching: ' + typeof jQuery);

  // <script> must be attached to the document to actually load the file
  document.querySelector('html').appendChild(script);

  // Calculate load/parse duration once script has loaded
  script.addEventListener('load', function scriptLoad() {   
    // Calculate load/parse duration
    console.log('Duration: ' + (Date.now() - start) + 'ms');

    console.log('`jQuery` once attached: ' + typeof jQuery);
    // Remove <script> from document
    script.parentElement.removeChild(script);
    console.log('`jQuery` after detach: ' + typeof jQuery);
  }, false);

  // Get current time in milliseconds
  start = Date.now();

  // Setting the `src` starts the loading. Math.random is used to make sure it is an uncached request
  script.src = url + '?' + Math.floor(Math.random() * 9e9);
}

var url = 'https://code.jquery.com/jquery-3.0.0.min.js';

scriptLoadParseDuration(url);
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T09:14:30.620

打开 Chrome 并打开开发人员工具，转到“时间轴”选项卡。如果你按下记录按钮（用圆圈填充，左下角）然后重新加载页面，它会给你一个相当详细的时间线，分解成特定类型的活动（发送请求、解析、评估），计时到微秒。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-19T22:18:38.203

Chrome DevTools 实际上有一个隐藏标志，显示 V8 解析和编译时间！

[https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/javascript-startup-optimization#parsecompile](https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/javascript-startup-optimization#parsecompile)

结果如下所示：

[![在此处输入图像描述](../Images/d18766b7507c5ac4fe4d5032ff000cab.png)](https://i.stack.imgur.com/6fzu0.png)

下面蓝色部分的文档中也提供了快速指南：

[![分步指南（蓝色部分）](../Images/47ebe2baa9cf4cf6a4a07f16cdad30b2.png)](https://i.stack.imgur.com/qAqSn.png)

启用该功能后，您可以分析一个页面，然后单击 Chrome DevTools 中 Performance 选项卡上的“Bottom-Up”选项卡，然后确保您“按活动分组”，您现在应该会看到编译和解析时间.

享受！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-31T21:46:46.317

非常老的问题，答案相对较新。

`Date.now()`返回具有毫秒精度的时间戳。对于以 60FPS 运行的应用程序，它必须每 16 毫秒更新一次帧。我们的毫秒计可能不够准确。

在现代 JS 浏览器中引入了[Performace API](https://developer.mozilla.org/en-US/docs/Web/API/Performance)，这允许浮点时间戳精确到微秒。

[在 HTML5Rocks 上使用 Performance API](https://www.html5rocks.com/en/tutorials/webperformance/usertiming/)有一个很好的指南，而不是`Date.now()`用于`window.performance.now()`测量。

# html - 为什么此列表中的文本不能正确浮动？

> ID：15342693
> 
> 赞同：0
> 
> 时间：2013-03-11T15:40:52.570
> 
> 标签：html, css

我有一个清单。列表中的每个项目都包含一个图标范围和文本范围，如下所示：

```
 <ul id="features">
     <li>
         <span class="icon"></span>
         <span class="text">blah blah blahlrceoahuoa steohuasnoet huntaoheu saoetnhu saoetuhsaoe tuhsaoetnhu saoehtuasoetnhu saou</span>
     </li>            
 </ul> 
```

使用以下 CSS

```
#features { list-style-type: none; }
#features li { overflow: auto;}
#features li span { float: left;  }
#features .icon { background: #000; height: 55px; width: 55px; display: inline-block;}
#features .text { margin-left: 24px; display: inline-block;  } 
```

我相信这段代码应该产生浮动在图标旁边的文本，并相应地自动调整其宽度。但是，情况并非如此，[请参阅 jsfiddle。](http://jsfiddle.net/dwZaN/1/)

为什么图标旁边没有浮动文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:43:11.913

`width: auto`将指示文本跨度根据其内容采用所需的宽度。当该空间不可用时，这就是导致整个跨度环绕的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:46:24.967

您应该在内部元素中使用 CSS 背景并浮动 LI。您不需要单独的图标元素。

```
#features li { float left }

#features li span { 
      display:block;
      background-image: url(...);
      background-repeat:no-repeat;
      height:25px;
      padding-left:30px;
} 
```

请参阅我的教程：[我喜欢列表](http://preview.moveable.com/jm/ilovelists/)。

如果要使用字体而不是图像，可以`position:relative`在 LI 上使用 , 并添加：

```
li:before {
    content: "\25A0";   <--- this is a UTF-8 square
    left: -1em;
    position: absolute;
    top: 0.1em;
} 
```

（相应地调整间距值）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T17:19:42.770

啊，试图让固定宽度和流动宽度和谐相处……一个老问题。

这是解决方案的更新小提琴：http: [//jsfiddle.net/dwZaN/11/](http://jsfiddle.net/dwZaN/11/)

```
#features { list-style-type: none; margin-top: 24px; margin-right: 24px; }
#features li { margin-bottom: 24px; overflow: auto; width: 100%; }

#features li span {  }
#features .icon { background: #000; height: 55px; width: 55px; float: left; }
#features .text { padding-left: 75px; display: block; } 
```

基本上...

*   浮动您的固定宽度图标
*   不要浮动你的流体宽度元素，但给它留有足够的空间来容纳你的图标和一些缓冲空间（这会自动给它 100% 并减去你指定的任何填充左）
*   两个元素都应该是块级的。您实际上不需要为图标指定任何内容，但您的文本跨度需要`display: block`（或者您可以切换到已经是块级的 DIV）

此外，由于您在父 UL 中指定了右边距，因此添加`width: 100%`会使它扩展到浏览器窗口之外并创建一个水平滚动条。只需将其删除。

# eclipse-gef - Eclipse GEF 中使用的设计模式

> ID：15342696
> 
> 赞同：3
> 
> 时间：2013-03-11T15:40:58.157
> 
> 标签：eclipse-gef

任何人都可以总结 Eclipse GEF 中使用的设计模式吗？我看到有人在 Eclipse 平台和 JDK 上做得很完美。如果说明设计模式，对学习 GEF 将非常有帮助。

例如，EditPartFactory 就是典型的工厂模式。GEF 本身实现了 MVC 设计。

类层次图也很有帮助。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:06:40.640

来自 GEF wiki 的简短摘要。

*   工厂：从调色板创建模型、创建 EditParts 和创建图形
*   观察者：通常是一个控制器（EditPart）监听模型和视图
*   命令：实现撤销和重做功能
*   策略：EditParts 可以动态安装和移除 EditPolicies
*   责任链：决定哪个 EditPolicy 应该处理请求

# ios - 写入错误的目标地址格式时，MFMailViewComposer 不返回错误

> ID：15342700
> 
> 赞同：2
> 
> 时间：2013-03-11T15:41:00.417
> 
> 标签：ios, objective-c, mfmailcomposeviewcontroller

当我尝试向一个不存在的地址（例如，“hello”）发送电子邮件时，我猜 MFMail Composer 应该返回 MFMailComposeResultFailed，但这不会发生，并且邮件似乎发送正确（显然，它是未发送）。我对“邮件”进行了同样的尝试，在这种情况下，“邮件”回答发送消息时出错，但是，当我在我的应用程序中执行相同操作时，没有错误。我怎样才能解决这个问题？

这是我进入邮件屏幕时使用的代码：

```
if ([MFMailComposeViewController canSendMail]) {
    MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc]init];
    mailer.mailComposeDelegate = self;
    [mailer setSubject:@"Notification"];
    User *user = [user_array objectAtIndex:0];
      NSArray *toRecipients = [NSArray arrayWithObjects:user.eMail, nil];
      [mailer setToRecipients:toRecipients];

    [mailer setMessageBody:self.label1.text isHTML:NO];
    [self presentViewController:mailer animated:YES completion:nil];
    [mailer release];
}
else
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Failure"
                                                    message:@"Your device doesn't support the composer sheet"
                                                   delegate:nil
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles: nil];
    [alert show];
    [alert release];
} 
```

}

这是响应者的代码：

```
-(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error {
NSString *string = @"";
switch (result)
{
    case MFMailComposeResultCancelled:
        string = @"cancelled";
        NSLog(@"Mail cancelled: you cancelled the operation and no email message was queued.");
        break;
    case MFMailComposeResultSaved:
        NSLog(@"Mail saved: you saved the email message in the drafts folder.");
        break;
    case MFMailComposeResultSent:
        string = @"sent";
        NSLog(@"Mail send: the email message is queued in the outbox. It is ready to send.");
        break;
    case MFMailComposeResultFailed:
        NSLog(@"Mail failed: the email message was not saved or queued, possibly due to an error.");
        break;
    default:
        NSLog(@"Mail not sent.");
        break;
}
// Remove the mail view
int abc = MFMailComposeErrorCodeSendFailed;
NSLog(@"ERROR LOG %i", abc);
[self dismissViewControllerAnimated:YES completion:nil];
if ([string isEqualToString:@"cancelled"]) {
    ViewController *second = [self.storyboard instantiateViewControllerWithIdentifier:@"Notif_detail"];
    [second setString1:self.string1];
    [second setString2:self.string2];
    [second setString3:self.string3];
    [second setString4:self.string4];
    [self.navigationController pushViewController:second animated:YES];
}
else if ([string isEqualToString:@"sent"]){

    ViewController *second = [self.storyboard instantiateViewControllerWithIdentifier:@"View"];
   [self.navigationController pushViewController:second animated:YES];
} 
```

}

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:13:19.273

我想触发时实际上没有错误`didFinishWithResult`，因为消息已排队并且即将发送。由于未传递消息，当您从邮件服务器（smtp 代码）获得响应时，稍后会发生该错误。

# css - @font-face，字体变体

> ID：15342704
> 
> 赞同：11
> 
> 时间：2013-03-11T15:41:15.433
> 
> 标签：css, cross-browser, font-face, webfonts

这是我的@font-face 声明以支持不同的字体变体，在这种情况下是我字体的粗体和加粗版本。

```
@font-face {
  font-family: "santana";
  src: url("data:font/ttf;base64,AAEAAAALAI....") format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: "santana";
  src: url("data:font/ttf;base64,AAEAAAALAI....") format('truetype');
  font-weight: bold;
}
@font-face {
  font-family: "santana";
  src: url("data:font/ttf;base64,AAEAAAALAI....") format('truetype');
  font-weight: bolder;
} 
```

现在我只是在使用 Chrome 和 Firefox。在 Chrome 中，正常和粗体变体有效，但较粗体变体不起作用（保留“粗体”变体）。在 Firefox 中，只有粗体变体按预期工作，在任何其他情况下，使用粗体变体（即使是正常重量）。
这是一个已知问题还是有更好的方法来做这个声明？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-11T15:47:31.773

这里有两个单独的问题：

1.  使用字体粗细关键字而不是数值。
2.  如果需要，支持 IE8（和更早版本）。

**关键词**

使用字体粗细关键字的问题似乎在于`lighter`，`bolder`它不是绝对值，例如`normal`and `bold`（总是分别为 400 和 700），而是相对于父元素的既定粗体（100 更亮或更暗）。可能无法将`lighter`它们`bolder`视为绝对值。

正如@HTMLDeveloper 和@Christoph 所建议的那样，使用数值而不是关键字是解决此问题的简单方法，并且本身可能是一个足够的解决方案（如果不需要支持 IE8）。

```
@font-face {
  font-family: "santana";
  src: url("data:font/ttf;base64,AAEAAAALAI....") format('truetype');
  font-weight: 400;
  font-style: normal;
}
@font-face {
  font-family: "santana";
  src: url("data:font/ttf;base64,AAEAAAALAI....") format('truetype');
  font-weight: 700;
}
@font-face {
  font-family: "santana";
  src: url("data:font/ttf;base64,AAEAAAALAI....") format('truetype');
  font-weight: 900;    /* or whatever weight you need to use for "bolder" */
} 
```

**IE8 及更早版本**

当多个权重或样式与同一个`font-family`名称相关联时，某些浏览器会出现显示问题。

我知道的具体问题：（可能还有其他问题）

*   当超过 1 个粗细与字体系列名称相关联时，IE8 会出现显示问题。
*   当超过 4 个粗细或样式链接到字体系列名称时，IE6/7/8 会出现显示问题。

`font-family`解决方案是为每种字体变体使用唯一的名称：

```
@font-face {
  font-family: "santana";
  src: url("data:font/ttf;base64,AAEAAAALAI....") format('truetype');
}
@font-face {
  font-family: "santana-bold";
  src: url("data:font/ttf;base64,AAEAAAALAI....") format('truetype');
}
@font-face {
  font-family: "santana-bolder";
  src: url("data:font/ttf;base64,AAEAAAALAI....") format('truetype');
} 
```

这种方法通常由 Typekit 等字体服务使用。如果需要对多种浏览器的支持（或至少，尤其是 IE8），这可能被认为是嵌入字体时必须支付的代价之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T15:58:12.127

在 font-face 单一字体中，不需要字体系列名称的引号。你应该删除并运行它会正常工作。`font-family: santana; font-weight: 900;`不需要单一字体，只需要多种字体。而不是更大胆的使用数值，它应该可以正常工作。

# ruby-on-rails - 将 cookie 会话存储添加回 Rails API 应用程序

> ID：15342710
> 
> 赞同：38
> 
> 时间：2013-03-11T15:41:35.377
> 
> 标签：ruby-on-rails

我有一个 Rails-API 应用程序。或多或少“开箱即用”，但我想添加回基于 cookie 的会话存储。这是我所做的：

应用程序/控制器/application_controller.rb

```
+ include ::ActionController::Cookies 
```

配置/应用程序.rb

```
+ config.middleware.insert_after ActiveRecord::QueryCache, ActionDispatch::Cookies
+ config.middleware.insert_after ActionDispatch::Cookies, ActionDispatch::Session::CookieStore 
```

创建 config/initializers/secret_token.rb

```
+ Namespace::Application.config.secret_token = 'token' 
```

创建 config/initializers/session_store.rb

```
+ Namespace::Application.config.session_store :cookie_store, :key => '_namespace_key' 
```

当我在控制器中检查会话时，结果是：

```
<Rack::Session::Abstract::SessionHash:0x3fdadc5daa24 not yet loaded> 
```

但是，似乎正在写入和使用数据。

但是，在我的浏览器中，cookie 本身被命名为 '_session_id' 而不是 '_namespace_key'

我以为我添加了基于 cookie 的会话存储所需的每一部分，但我似乎遗漏了其他东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2016-05-10T13:36:49.707

如果您在 Rails 5 上，并且想要保留`config.api_only = true`您可以扩展中间件以添加会话层，在之后添加此`class Application < Rails::Application`代码`config/application.rb`

```
config.middleware.use ActionDispatch::Cookies
config.middleware.use ActionDispatch::Session::CookieStore, key: '_namespace_key' 
```

当您想要`api-only`启用 Rails 的应用程序但必须使用 ActiveAdmin 或 Rails_Admin 等管理面板管理用户会话时，这可能会派上用场。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-12T14:04:09.743

您需要从`application.rb`文件中删除这些中间件声明并添加：

```
config.api_only = false 
```

`session_store`如果您的初始化程序（您拥有）中的某处配置了一个，这将按照您想要的方式启用会话管理。这没有明确记录，[但这是你应该做的](https://github.com/rails-api/rails-api/blob/master/lib/rails-api/application.rb#L141)。

[这里](https://github.com/mauricio/sample_api)的例子。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-04-13T16:59:38.120

此行被忽略，因为您没有使用完整的 Rails 堆栈：

```
::Rails.application.config.session_store :cookie_store,
  :key => '_namespace_key' 
```

因此，您的会话将使用[此处设置](https://github.com/rails/rails/blob/v4.2.1/actionpack/lib/action_dispatch/middleware/session/abstract_store.rb#L23)的默认会话密钥。但是，您可以通过替换直接传递这些参数：

```
config.middleware.insert_after 
  ActionDispatch::Cookies, ActionDispatch::Session::CookieStore 
```

和：

```
config.middleware.insert_after
  ActionDispatch::Cookies, ActionDispatch::Session::CookieStore,
  :key => '_namespace_key' 
```

这是[您可以传递的选项的完整列表](https://github.com/rack/rack/blob/master/lib/rack/session/abstract/id.rb#L195)（大致了解它们的默认值，因为某些可能会被 Rails 中的模块覆盖）。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-04-15T21:25:30.923

这在 Rails 6.0 中对我有用，`application.rb`：

```
config.middleware.use ActionDispatch::Cookies
config.middleware.use ActionDispatch::Session::CookieStore
config.middleware.insert_after(ActionDispatch::Cookies, ActionDispatch::Session::CookieStore) 
```

如果要设置自定义键（是的，必须设置两次）：

```
config.middleware.use ActionDispatch::Cookies
config.middleware.use ActionDispatch::Session::CookieStore, key: '_your_app'
config.middleware.insert_after(ActionDispatch::Cookies, ActionDispatch::Session::CookieStore, key: '_your_app') 
```

最后，如果您想添加到期日期 - 在这里完成：

```
config.middleware.use ActionDispatch::Cookies
config.middleware.use ActionDispatch::Session::CookieStore, key: '_your_app', expire_after: 20.years 
config.middleware.insert_after(ActionDispatch::Cookies, ActionDispatch::Session::CookieStore, key: '_your_app') 
```

本来喜欢链接到文档，但没有。

# php - 调用非对象解决方法？

> ID：15342713
> 
> 赞同：0
> 
> 时间：2013-03-11T15:41:41.267
> 
> 标签：php, class, methods, prepare

我有这样的方法：

```
public function query ($sql) {
  $this->result = $this->db->query($sql);
} 
```

将查询语句绑定到结果变量。这真的很方便，因为我有几种方法可以输出一些东西，还有另一种方法可以处理`$result`其他任务的变量。

但是我想使用相同的方法，但是在准备好的语句上（以逃避插入的数据），我遇到了一个问题：

```
public function prepare ($sql) {
  $this->result = $this->db->prepare($sql);
} 
```

我试着像这样使用它：

```
public function insert ($this, $that) {
  // Then I tried to use my prepare method
  $var = $this->prepare(INSERT INTO Table (Row1, Row2) VALUES (:Val1, :Val2));
  $var->bindValue(":Val1", $this, PDO::PARAM_INT);
  //... and so on
} 
```

问题出现在`$var->bindValue()`“在非对象上调用成员函数 bindvalue()”。因为我不太了解错误消息，这里到底发生了什么？如果我使用 query 方法查询我的数据库，它工作得很好，但是如何使用 prepare 方法绑定值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:44:54.300

在：

```
public function ($sql) {
  $this->result = $this->db->prepare($sql);
} 
```

您忘记返回结果。（您还忘记了代码段中函数的名称。）

错误消息很清楚，您正在调用不是对象的方法。在这种情况下，您调用它是`NULL`因为您自己的准备方法不返回任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:55:35.193

首先，我注意到您的方法没有名称。

`public function ($sql) { $this->result = $this->db->query($sql); }`

不应该是这样的吗

`public function doSomething($sql) { $this->result = $this->db->query($sql); }`

其次，您似乎在方法中调用了另一个类的实例。

`$this->db->query($sql)` 如果没有错，“db”应该是您尝试访问其查询方法的另一个类...再次查看您的代码。

最后我你错过了一个退货声明。

# android - UrlConnection Android 返回具有 2 个不同 url 的同一页面

> ID：15342716
> 
> 赞同：0
> 
> 时间：2013-03-11T15:41:44.183
> 
> 标签：android, urlconnection

这是代码：

```
 URL myUrl = new URL("http://www.militaryphotos.net/forums/showthread.php?224123-Weekend-Photos-9th-and-10th-March-2013/page1");
    URLConnection ucon = myUrl.openConnection();
    ucon.setRequestProperty("User-Agent", "Mozilla/5.0 (Windows; U; Windows NT 6.0; pl; rv:1.9.1.2) Gecko/20090729 Firefox/3.5.2");
    InputStream is = ucon.getInputStream();   
    BufferedReader page = new BufferedReader(new InputStreamReader(is));     
    StringBuilder results = new StringBuilder();
    String linea="";  
    while((linea = page.readLine()) != null){       
        Log.w("myApp",linea);
        }
    is.close();
    page.close(); 
```

在此之后我启动***另一个***需要下载***另一个***页面的活动（类似于第一个，它只在“2”结尾处改变）

[http://www.militaryphotos.net/forums/showthread.php?224123-Weekend-Photos-9th-and-10th-March-2013/page2](http://www.militaryphotos.net/forums/showthread.php?224123-Weekend-Photos-9th-and-10th-March-2013/page2)

如果我看到 Logcat，它会打印页面 1、2 次....

如果我尝试先下载第 2 页然后再下载第 1 页，我们会遇到同样的问题，但这次它复制了第 2 页。

如果我使用这段代码，同样的事情：

```
 HttpClient httpClient = new DefaultHttpClient();
        HttpContext localContext = new BasicHttpContext();
        HttpGet httpGet = new HttpGet("http://www.militaryphotos.net/forums/showthread.php?224123-Weekend-Photos-9th-and-10th-March-2013/page2");
        HttpResponse response = httpClient.execute(httpGet, localContext);
        String result = "";
        BufferedReader page = new BufferedReader(
            new InputStreamReader(
              response.getEntity().getContent()
            )
          ); 
```

这怎么可能？

***- - - - - - - - - - - - - - - - - - - - - -编辑 - - - ---------------------------------***

我想我发现了问题。

当我抓取 html 时，我抓取了这个 urlmilitaryphotos.net/forums/showthread.php?t=224123，并成功下载了第一页。

如果我使用 Militaryphotos.net/forums/showthread.php?t=224123/page2 它会自动将我重定向到第 1 页。

在下面的代码中，我使用了另一种 url 格式 Militaryphotos.net/forums/showthread.php?224123-Weekend-Photos-9th-and-10th-March-2013/page1，它确实有效，我将它与另一个没有的有效。

所以，如果我打扰了你们，我很抱歉。:P

# transactions - 获取已发布交易的 MAPP 协议是什么？

> ID：15342718
> 
> 赞同：5
> 
> 时间：2013-03-11T15:41:47.500
> 
> 标签：transactions, protocols, credit-card, specifications, modem

我有一些 15 年前的代码，可以通过[POTS进行 MAPP（万事达卡自动销售点计划）信用卡交易](http://en.wikipedia.org/wiki/Plain_old_telephone_service)和调制解调器，带有主机数据捕获（与终端数据捕获相反）。它实现：获得批准（操作码#08）、批准后（#60）、出售（#10）、退款（#30）和无效（#50）交易。我记得，MAPP 还允许获取给定检索编号或整批的数据。出于验证目的，我需要实现其中一个（获取交易或批次）。获取给定检索号的卡和金额就足够了。但是，我再也找不到我们的“60-M08V3.0/1096 销售点规范和认证程序”副本，而且该文档似乎不在网络上的任何位置。我猜按检索号获取将需要诸如 TERMINALID、ASCII FS、OPCODE、ASCII FS、RETRIEVAL、ASCII ETX 之类的东西（或者批准号也可能在其中）。

获取（通过检索号和/或批准号）先前发布的交易或交易批次的正确协议是什么？网络上某处是否有 60-M08V3.0/1096 或协议的适用部分的副本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:38:49.103

我们终于完成了通过官僚机构的工作，并发现当前的协议文档可从 product.integration@globalpay.com 获得

# xcode - Xcode / Interface Builder，使用对象标签的定义/常量

> ID：15342724
> 
> 赞同：2
> 
> 时间：2013-03-11T15:41:57.770
> 
> 标签：xcode, interface-builder

是否有任何“批准”的方式在 IB 中使用定义/常量来标记也可以在代码中引用的对象？请是或否。如果是，请举例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T15:46:10.700

**没有**。

（根据您的问题，您只问是或否，并且仅以是为例。）

没有任何“批准”的方式可以在 IB 中使用定义/常量来标记也可以在代码中引用的对象。

# android - 如果在 Activity 中打开 GPS 服务，则不使用

> ID：15342726
> 
> 赞同：0
> 
> 时间：2013-03-11T15:42:20.403
> 
> 标签：android, google-maps-android-api-2

我正在编写代码以便能够使用本地化（如果可用，则基于 GPS，否则基于网络）。如果我在手机上打开 GPS 进入我的活动，一切正常。但是，如果我在关闭 GPS 的情况下进入活动，然后在活动中启用 GPS，则没有任何反应，并且基于网络的位置仍然处于活动状态，而不是切换到基于 GPS。

我错过了什么 ？谢谢

```
public class MapActivity extends Activity implements LocationListener {

    //Used CameraPosition attributes
    private final int MAP_BEARING = 69;
    private final int SETUP_ZOOM = 16;
    private final int AT_POSITION_ZOOM = 19;
    private final int UPDATE_FREQUENCY = 20000; //Update frequency (ms)
    private final LatLng MAP_CENTER = new LatLng(44.80736, -0.596572);

    private CheckBox mServices, mRestauration, mBuildings;
    private Resources mResources;
    private GoogleMap mMap;
    private LocationManager mLocationManager;
    private Marker mCurrentLocation;
    private ArrayList<Marker> mServicesMarkers, mRestaurationMarkers, mBuildingsMarkers;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_map);
        mResources = getResources();
        mServices = (CheckBox) findViewById(R.id.services_check);
        mRestauration = (CheckBox) findViewById(R.id.restauration_check);
        mBuildings = (CheckBox) findViewById(R.id.buildings_check); 
        setUpLocationServices();
    }

    public void setUpLocationServices() {
        mLocationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
        Criteria criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_FINE);
        String provider = mLocationManager.getBestProvider(criteria, true);
        Location location = mLocationManager.getLastKnownLocation(provider);
        double latitude = location.getLatitude();
        double longitude = location.getLongitude();
        LatLng currentPosition = new LatLng(latitude, longitude);

        mCurrentLocation = mMap.addMarker(new MarkerOptions()
        .position(currentPosition)
        .title("Votre position")
        .icon(BitmapDescriptorFactory.fromResource(R.drawable.user_location_marker)));   

        if (location != null)
            onLocationChanged(location);
        if (isGpsEnabled())
            mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
        else
            mLocationManager.requestLocationUpdates(provider, UPDATE_FREQUENCY, 0, this);

    }

    @Override
    public void onLocationChanged(Location location) {
        mCurrentLocation.remove();
        LatLng currentPosition = new LatLng(location.getLatitude(), location.getLongitude());
        mCurrentLocation = mMap.addMarker(new MarkerOptions()
        .position(currentPosition)
        .title("Votre position")
        .icon(BitmapDescriptorFactory.fromResource(R.drawable.user_location_marker)));      
    }

    public boolean isGpsEnabled() {
        LocationManager service = (LocationManager) getSystemService(LOCATION_SERVICE);
        return service.isProviderEnabled(LocationManager.GPS_PROVIDER);
    }

    @Override
    public void onProviderDisabled(String provider) {
        mLocationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
        if (isGpsEnabled()) 
            mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,  this);
        else 
            mLocationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, UPDATE_FREQUENCY, 0, this);               
    }

    @Override
    public void onProviderEnabled(String provider) {
        mLocationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
        if (isGpsEnabled())
            mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
        else 
            mLocationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, UPDATE_FREQUENCY, 0, this);           
    }

    @Override
    public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
        // TODO Auto-generated method stub
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T18:54:43.223

问题似乎在这里：

```
 if (isGpsEnabled())
        mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
  else
        mLocationManager.requestLocationUpdates(provider, UPDATE_FREQUENCY, 0, this); 
```

您只运行一次此代码，在`onCreate()`. 如果您希望在启用 GPS 后更新位置，则需要提出要求。在现代设备上，我更喜欢将[Google 的 Play Service Location API](http://developer.android.com/training/location/receive-location-updates.html)与 Fused Location 提供程序一起使用。这就是我在上一个商业应用程序中实现的方式，只有在未安装 Google Play 时才使用 GPS。

另一种选择，如果您[查看此链接](http://developer.android.com/guide/topics/location/strategies.html#BestEstimate)，在该`isBetterLocation`方法中，您可以将当前值与新值进行比较，然后选择两者中较好的值。这样，如果您有一个并得到另一个，您可以决定它是否比以前更好。

# c++ - 在没有 const_cast 的情况下将 const void* 转换为其他指针时出错

> ID：15342736
> 
> 赞同：3
> 
> 时间：2013-03-11T15:42:51.933
> 
> 标签：c++, casting, constants

功能

```
int compare(const void* a, const void* b)
{
    SomeDataType g1 = *(static_cast<SomeDataType*>(a));
    SomeDataType g2 = *(static_cast<SomeDataType*>(b));
    g1.firstelement < g2.firstelement ? 1 : -1;
} 
```

此代码返回一个错误，提示“静态转换无法从 const void* 转换为 SomeDataType*”。我使用 const_cast 之类的

```
SomeDataType g1 = *(static_cast<SomeDataType*>(const_cast<void*>(a))) ; 
```

让这个工作。这是正确的方法吗？还是我错过了什么？我不太明白这是如何工作的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T15:47:22.957

它感觉不对，因为它*不应该感觉对*。有人给了你一个指针，在你承诺你不会修改它的接口中，放弃它`const`就是违背你的承诺（嗯，不是真的，但是类型系统认为如果你放弃 const，是因为你想修改对象，这*会*违背你的诺言）。

我建议你不要放弃`const`：

```
int compare(const void* a, const void* b)
{
    SomeDataType g1 = *(static_cast<const SomeDataType*>(a));
    SomeDataType g2 = *(static_cast<const SomeDataType*>(b));
    return g1.firstelement < g2.firstelement ? 1 : -1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T15:45:25.567

做这个：

```
const SomeDataType g1 = *static_cast<const SomeDataType *> (a);
const SomeDataType g2 = *static_cast<const SomeDataType *> (b); 
```

你不需要`const_cast`这里。

但是我更喜欢这个：

```
int compare(const SomeDataType &g1, const SomeDataType &g2)
{
    return g1.firstelement < g2.firstelement ? 1 : -1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T15:46:43.987

为什么不像这样转换为 const SomeDataType*

```
SomeDataType g1 = *(static_cat<const SomeDataType*>(a)); 
```

当然，这样做会复制数据，而不是你应该这样做

```
const SomeDataType& g1 = *(static_cat<const SomeDataType*>(a));
const SomeDataType& g2 = *(static_cat<const SomeDataType*>(b));
g1.firstelement < g2.firstelement ? 1 : -1; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T15:46:44.860

static_cast 无法从指针中删除 const-ness，而且它并不打算这样做。只有 const_cast 才能做到这一点。所以你必须像你一样分两步施法。顺便说一下，在您的情况下，您不需要指针是非常量的。所以你可以简单地做：

```
int compare(const void* a, const void* b)
{
    const SomeDataType* g1 = static_cast<SomeDataType*>(a);
    const SomeDataType* g2 = static_cast<SomeDataType*>(b);
    g2->GetFirstElement() - g1->GetFirstElement();
} 
```

假设您已经为您使用的字段实现了 const 访问器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T15:47:59.557

怎么样 ：

```
int compare(const void* a, const void* b)
{
    const SomeDataType *g1 = static_cast<const SomeDataType*>(a);
    const SomeDataType *g2 = static_cast<const SomeDataType*>(b);
    return g1->firstelement < g2->firstelement ? 1 : -1;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T15:46:13.960

使用常量！

```
const SomeDataType g1 = *(static_cast<SomeDataType const *>(a)); 
```

由于您不会更改`g1`，因此无需将其设置为 const。

您可能还想要一个`return`：

```
return  g1.firstelement < g2.firstelement ? 1 : -1; 
```

不确定您是否也关心 g1 == g2？

# php - PHP - 使用会话更新登录信息

> ID：15342740
> 
> 赞同：0
> 
> 时间：2013-03-11T15:43:01.610
> 
> 标签：php, mysql

我有一个指向另一个 php 页面的登录页面。这个 php 页面获取用户输入的用户名，将其存储为会话变量，然后重定向到 home.php（此代码在信息验证后运行）。

```
 $username = $_POST['username'];
    $update = mysql_query("UPDATE usertable SET loginStatus='Logged in' WHERE userName = '$username'");
    session_start();
    $_SESSION['loggedin'] = true;
    $_SESSION['username'] = $_POST['username'];
    header("Location: home.php"); 
```

这将更新相应的列而不会出现问题。我将以下代码放在 home.php 页面中以显示每个用户的登录状态

```
 session_start();
    $username = $_SESSION['username'];
    if(empty($_SESSION['username'])){
    header("Location: login.php");
    }

    $result = mysql_query("SELECT * FROM usertable");
    echo "Logged in as ". $_SESSION['username'];
    echo "<br />";
    while($row = mysql_fetch_array($result))
    {
    echo $row['userName'] . " " . $row['emailAddress'] . " " .$row['loginStatus'];
    echo "<br />";
    }

    ?>

    <p><a href=logout.php>Click here to logout</a></p> 
```

当用户单击注销链接时，它会将他们定向到以下 php 页面：

```
 <?php
    session_start();
    $username = $_SESSION['username'];
    $update1 = mysql_query("UPDATE usertable SET loginStatus='' WHERE userName = '$username'");
    echo $username;
    ?>
    <?php
    session_destroy();
    ?>
    <h1>You are now logged out</h1>
    <p><a href=login.php>login</a></p> 
```

这就是我的问题所在。MySQL 没有更新相应用户名的 loginStatus。我拥有的所有变量 ($username, $username1) 在我测试它们时都会打印出正确的信息。在注销页面的情况下，我知道 $_SESSION['username'] 正在存储正确的用户名，但我不知道为什么它不会更新数据库中的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:48:53.797

您的问题到底在哪里？？...登录时的数据库更新或 home.php 页面上的数据库获取或注销页面上的数据库更新...还有多少次您启动会话所有三个页面都具有会话启动功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:50:17.560

如果这是您的页面的全部内容，则您可能没有数据库连接。至少检查查询的返回值

```
$update1 = mysql_query("UPDATE usertable SET loginStatus='' WHERE userName = '$username'") or die(mysql_error()); 
```

你应该看到真正的原因。

此外，您应该考虑切换到`mysqli`or `PDO`，因为`mysql_*`现在不推荐使用函数。

# cqrs - EventStore 提交错误

> ID：15342741
> 
> 赞同：1
> 
> 时间：2013-03-11T15:43:05.370
> 
> 标签：cqrs, neventstore

我在 Jonathon Oliver 的 EventStore 中看到以下错误：

**错误：23505：重复键值违反唯一约束“ix_commits_revisions”**

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T20:56:00.917

假设索引是我用谷歌搜索的：

```
CREATE UNIQUE INDEX IX_Commits_Revisions ON Commits (
     StreamId, StreamRevision, Items); 
```

两个`Save`s 写了等效的更改，这代表了乐观并发违规。

通常，这将由 Common Domain（或类似）层转换为 EventStore `ConcurrencyException`。

解决方案是针对流中事件的新负载重新应用命令。

如果要缓存`IEventRepository`，则不应像对数据库具有写访问权限的每个人都可以平等地写入事件流。

我怎么知道这一切？NuGet 包中的自述文件非常清楚地解释了这背后的基础，如果你不阅读并重新阅读它们，直到你自己解决这个问题，你就会从你自己/你的雇主那里偷东西！

# excel - Scripting.Dictionary 的最大大小是多少？

> ID：15342751
> 
> 赞同：6
> 
> 时间：2013-03-11T15:43:33.207
> 
> 标签：excel, vba, scripting, vbscript

我试图找出 Scripting.Dictionary 的上限是多少？有吗？

它可能是对元素数量或内存大小的限制。我无法追踪任何信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T15:56:03.607

从我所遇到的一切（并且似乎找不到任何与此相矛盾的文档）来看，字典没有隐含的上限，仅受可用内存量的限制。

# github - Github API 列出已删除的 gist

> ID：15342752
> 
> 赞同：3
> 
> 时间：2013-03-11T15:43:35.717
> 
> 标签：github, github-api, gist

将 Github API 与 Gists 一起使用时，它会列出不再存在的 gist：

```
require 'github_api'

github = Github.new do |config|
  config.oauth_token = 'mytoken'
end

gists = github.gists.list 
```

返回 30 个结果，但我总共只有 6 个要点（私人和公共）。列出的要点在过去的某个时候已经存在，但从那以后它们被删除了。

如果我尝试删除列表返回的要点，则会出现异常，因为 ID 不再存在。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T13:19:31.697

我用 测试过`curl`，删除的要点不在列表中。

`curl -s -H "Authorization: token $github_oauth_token" 'https://api.github.com/gists?per_page=100'`

# php - 使用 PHP 从文本块中裁剪超链接

> ID：15342753
> 
> 赞同：0
> 
> 时间：2013-03-11T15:43:45.637
> 
> 标签：php, html, text, strip-tags

我的网页上有以下**HTML**：

```
<p>This is a <a href="http://www.google.com/">hyperlink</a> and this is another <a href="http://www.bing.com/">hyperlink</a>. There are many like it, but <a href="http://en.wikipedia.org/wiki/Full_Metal_Jacket">this one is mine</a>.</p> 
```

现在，我想知道...

**有什么办法，我可以使用 PHP 函数将这个文本块拆分成一个数组？**

```
$html[0] = "<p>This is a & this is another . There are many like it, but .</p>";
$html[1] = "http://www.google.com/";
$html[2] = "http://www.bing.com/";
$html[3] = "http://en.wikipedia.org/wiki/Full_Metal_Jacket"; 
```

因此，基本上剥离所有超链接的初始文本块并将它们全部存储在自己的数组元素中。

非常感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:47:24.807

使用此 RegEx 获取 html 的 URL：

```
 $url = "http://www.example.net/somepage.html";
  $input = @file_get_contents($url) or die("Could not access file: $url");
  $regexp = "<a\s[^>]*href=(\"??)([^\" >]*?)\\1[^>]*>(.*)<\/a>";
  if(preg_match_all("/$regexp/siU", $input, $matches)) {
    // $matches[2] = array of link addresses
    // $matches[3] = array of link text - including HTML code
  }
?> 
```

# php - php动态元描述空

> ID：15342755
> 
> 赞同：1
> 
> 时间：2013-03-11T15:43:46.890
> 
> 标签：php, arrays, web-services, meta-tags

从 Web 服务执行此代码时，标题和关键字按预期显示在元标记中。描述仍然是空的。如何将 $array 中的动态数组内容放入描述中？Ps 例如 $array[3] 也不起作用。

```
$array = $result->AAAResult->AAA->A;

$teller = count($array);

$titeltekst = "{$teller} quantity: $r";

$doc =& JFactory::getDocument();
$options = $doc->getHeadData();

$options['title'] = $titeltekst;
$options['metaTags']['standard']['keywords'] = "keywords - test";
$options['metaTags']['standard']['description'] = $array;

$doc->setHeadData($options); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:50:11.877

您将无法将数组直接分配给任何需要字符串的东西，但您可以`implode`假设所有值也是字符串。

```
$string = implode(', ', $array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:15:15.340

好的，我刚刚添加了例如。

```
$string .= $v->Naam; 
```

和;

```
$options['metaTags']['standard']['description'] = $string; 
```

, 如果您选择在 Array 的 Naam (Name) 对象上创建字符串。

# ruby-on-rails - 扩展 ActiveResource 类

> ID：15342763
> 
> 赞同：0
> 
> 时间：2013-03-11T15:44:08.987
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, activeresource

是否可以扩展从响应中解组的 ActiveResource 类？

ActiveResource 请求示例：

```
GET http://www.exampleservice.com/products.json 
```

回复

```
[{name:'Product X', price:14.5, features:[{name:'Soft'}, {name:'Green'}, {name:'Heavy'}]}] 
```

此响应将被解组为具有`Product`对象数组的`Product::Feature`对象。是否可以向此类添加一些自定义方法/属性`Product::Feature`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:34:57.313

回答我自己的问题：

我创建了一个包含我的方法的新模块，并`Product::Feature`用它扩展了每个未编组的对象。如下所示：

```
module FeatureExtension
  def my_method
    # do something
  end
end 
```

在收到`Product`来自我的某个地方后，`ActiveResource`我使用了代码：

```
@product.features.each do |feature|
  feature.extend(FeatureExtension)
  feature.my_method # Now it is possible to call the method
end 
```

# ios - 在 prepareForSegue:sender 中传递数据时 iPhone 应用程序崩溃

> ID：15342767
> 
> 赞同：1
> 
> 时间：2013-03-11T15:44:34.350
> 
> 标签：ios, iphone, segue

我一直在尝试将数据从一个 tableViewController 传递到另一个，但是一旦我为第二个 tableViewController 中的属性分配一个值，应用程序就会崩溃，给我消息“......发送到实例 0x715c340 的无法识别的选择器...... ”。这是我使用的代码：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([segue.identifier isEqualToString:@"displayWordlist"]){
        DisplayWordlist *dwl = (DisplayWordlist *)[segue destinationViewController];
        dwl.apa = @"hej";
    }
} 
```

一旦程序到达 'dwl.apa = @"hej";' 它崩溃了。我都制作了 apa 的属性并合成了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:49:58.943

确保您已将此视图控制器的类设置为*Storyboard 中的*DisplayWordlist 。如果你不这样做，dwl 将被假定为 UIViewController 的一个实例，尽管有演员表。

# magento - 检测集合是否包含数据

> ID：15342770
> 
> 赞同：11
> 
> 时间：2013-03-11T15:44:49.577
> 
> 标签：magento

这可能是一个简单的问题，但我找不到答案。我怎么知道我的收藏是否没有数据？

如果我`$datas = Mage::getModel('zzz/zzz')->getCollection()`执行`$datas->getData()`它会返回一个空数组，但是如果不执行 foreach 或 getData ，我怎么知道我的集合是否没有数据？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-11T17:07:42.843

您应该避免使用`count`或您的收藏。原因如下：

（几乎所有 Magento 集合都继承的`Mage_Core_Model_Resource_Db_Collection_Abstract`集合模型）没有`count()`定义，所以`count`在你的集合上使用你很可能最终会得到`Varien_Data_Collection::count()`一个非常糟糕的选择，因为它会执行一个集合`load()`然后计算加载的对象：

```
/**
 * Retireve count of collection loaded items
 *
 * @return int
 */
public function count()
{
    $this->load();
    return count($this->_items);
} 
```

拥有大量集合（尤其是 EAV 集合）将导致加载所有集合数据 - 这可能需要很多时间。

相反，您应该使用`Varien_Data_Collection_Db::getSize()`方法，该方法将运行 SQL 查询以仅获取计数，与检索所有类型的数据以进行 Collection 加载相比优化得多：

```
/**
 * Get collection size
 *
 * @return int
 */
public function getSize()
{
    if (is_null($this->_totalRecords)) {
        $sql = $this->getSelectCountSql();
        $this->_totalRecords = $this->getConnection()->fetchOne($sql, $this->_bindParams);
    }
    return intval($this->_totalRecords);
} 
```

除此之外，`load`集合后不能以任何方式修改。例如，在使用`count()`.

所以正确答案应该是：

```
$collection = Mage::getModel('zzz/zzz')->getCollection();
var_dump($collection->getSize()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T15:53:02.980

您可以像这样轻松地执行 if 语句：

```
if (!$datas->getData() || empty($datas->getData())) {
     // do things
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-22T20:59:44.630

除了接受的答案外，请参阅基准：

测试了 750 种产品

`$collection->getData()`

*   总含 挂壁时间（微秒）：67,567 微秒
*   总含 CPU（微秒）：67,599 微秒
*   总含 内存使用（字节）：11,719,168 字节
*   总含 PeakMemUse（字节）：11,648,152 字节
*   函数调用次数：1,047

`$collection->getSize()`

*   总含 挂壁时间（微秒）：6,371 微秒
*   总含 CPU（微秒）：4,402 微秒
*   总含 内存使用（字节）：140,816 字节
*   总含 PeakMemUse（字节）：96,000 字节
*   函数调用次数：191

`$collection->count()`或者`sizeof($collection)`

*   总含 挂壁时间（微秒）：2,130,568 微秒
*   总含 CPU（微秒）：2,080,617 微秒
*   总含 内存使用（字节）：12,899,872 字节
*   总含 PeakMemUse（字节）：13,002,256 字节
*   函数调用次数：101,073

所以你应该去`getSize()`。

* * *

^(表格：[https ://magento.stackexchange.com/questions/179028/how-to-check-if-a-collection-has-items/179035#179035](https://magento.stackexchange.com/questions/179028/how-to-check-if-a-collection-has-items/179035#179035))

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-11T17:00:21.520

/** * 检索集合的所有项目计数 * * @return int */ $collection = Mage::getModel('aaa/bbb')->getCollection()->getSize();

这是用于分页等的代码，建议使用。

where /** * Retireve count of collection loaded items * * @return int */ public function count()

将有助于检查加载的项目数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T15:52:44.353

您可以使用;

```
$collection = Mage::getModel('zzz/zzz')->getCollection();
var_dump($collection->count()); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-11T17:59:37.757

`count()`在集合上运行一个简单的标准 PHP就可以了。只要您正确过滤了您的集合，在计算它之前您应该始终这样做，调用`->count()`集合上的方法也可以。只要您以任何方式操作集合，无论您使用哪种方法，它都会加载，因此标准 PHP`count()`调用`->count()`对象上的方法，使用 a 运行集合，`foreach()`所有加载集合的方式与`load()`，事实上，如果你追溯这个`load()`方法，你会发现它实际上运行了一个标准的 PHP`foreach()`来加载集合数据。

所以不管你怎么做，你仍然不能计算你的集合，直到你知道从数据库返回了多少结果，所以上面的方法很好，但确实意味着额外的数据库调用，首先要计算，然后加载。更好的方法是通过使用子句等来缩小陈述的范围，以确保您的`SELECT`陈述尽可能具体。`WHERE`如果您从集合中拉取选择对象，您可以访问[此处](http://framework.zend.com/manual/1.12/en/zend.db.select.html)显示的所有 Zend_Db_Select 方法，即

`$collection->getSelect()->where('......... = ?', $var);`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-28T07:16:19.493

假设产品集合是 $pro_collection

现在应用以下代码..

```
<?php 
if(isset($pro_collection) && count($pro_collection) > 0) {
    /* Your code here */
}
?> 
```

# flexslider - 当宽度为 768px 时，Flexslider 轮播显示两个图像

> ID：15342772
> 
> 赞同：0
> 
> 时间：2013-03-11T15:44:56.470
> 
> 标签：flexslider

**问题** 我使用 flexslider 轮播来显示多个图像。我现在想要的是，当浏览器有一定的宽度时会出现中断，例如 768px 附带显示 2 个图像。目前，您看到的图像宽度只有一半，并且希望使用 javascript/jquery 对这些点提供许多必须完全显示的图片。

所以我的问题是，当浏览器宽度为例如 768px 宽度时，我如何做出 if 语句，是否必须显示两个图像......

```
$('.flexslider').flexslider({
    animation: "slide",
    animationLoop: true,
    itemWidth: 320,
    itemMargin: 0,
    minItems: 2,
    maxItems: 5,
    start: function(slider){
        $('body').removeClass('loading');
    }
}); 
```

检查[JSFiddle上的代码](http://jsfiddle.net/d7dTx/15/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T18:54:17.253

您可以对宽度使用 if 语句，如下所示：

```
if ($(window).width() < 960) {
   alert('Less than 960');
}
else {
   alert('More than 960');
} 
```

...并包含它，您可能希望将文档就绪功能与窗口调整大小功能结合起来。

```
$(document).ready(myfunction);
$(window).resize(myfunction);

function myfunction() {
    // Pace the if/else here, do whatever
} 
```

在显示两个图像方面，它认为您应该能够通过在 flexslider 函数中设置幻灯片宽度和偏移量 - 或使用 css 来实现。这是我正在谈论的选项：

```
itemWidth: 490, // or whatever is 1/2 of your width
itemMargin: 30, // experiment here!
minItems: 1, // or 2 
```

这是您的 JS 小提琴演示的编辑版本！[http://jsfiddle.net/tM2a8/](http://jsfiddle.net/tM2a8/)

# file - 自动启动选项 plupload 1.5.6

> ID：15342774
> 
> 赞同：0
> 
> 时间：2013-03-11T15:45:03.287
> 
> 标签：file, upload, plupload, jscript, autostart

这个问题已经[在这里](https://stackoverflow.com/questions/6227210/autostart-option-plupload-1-4-3-2)和[这里](http://www.plupload.com/punbb/viewtopic.php?id=90)得到了回答。但是在 1.5.6 版中，将 init() 放在 FilesAdded(...) 之前会使其完全没有响应。同样，自动启动上传也根本不会启动。

```
var csvUploader = new function() {
var self = this;
self.init = function() {
    var uploader = new plupload.Uploader(
        {
            runtimes: 'html4',
            url: 'http://localhost:5073/Document/Upload',
            browse_button: 'uploadCsvButton',
            max_file_size: '100mb',
            chunk_size: '1mb',
            unique_names: true,
            filters: [{ title: "CSV files", extensions: "csv" }]
        });

    /* postion 1:  uploader.init(); /**/

    uploader.bind('FilesAdded', function(up, files) {
        setTimeout(function () { up.start(); }, 500);
    });

    uploader.bind('FileUploaded', function (up, file) {
        // do some stuff here...
    });

    /*position 2: */ uploader.init(); /**/

}; // self.init

}; // NS:csvUploader 
```

该模块的初始化：

```
csvUploader.init(); 
```

那么有经验的同事这里有什么问题呢？模块化模式还是其他？由于 init() 位于位置 2，因此方法 FilesAdded 内容被调用，但 up.start(); 永远不要将文件上传到服务器。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:27:06.660

骗我，

代码没问题，如果文件不是**.CSV**扩展名，它不会上传！

# java - 使用 Java Jersey 将文件上传到 ZenDesk

> ID：15342775
> 
> 赞同：3
> 
> 时间：2013-03-11T15:45:08.740
> 
> 标签：java, jersey, zendesk

我正在尝试使用 java 和 Jersey 进行复制，将文件上传到 ZenDesk，用作票证的附件。ZenDesk 的示例代码使用 curl 和 --data-binary 参数，引用磁盘上的文件。我正在使用我在 git 上找到的 SDK 客户端作为起点，除了文件上传之外，有关此 SDK 的所有内容都可以正常工作。

这是我目前正在上传的代码：

```
 File fileToUpload = new File(attachment.getUrl());

        FileDataBodyPart filePart = new FileDataBodyPart(attachment.getFilename(), fileToUpload, MediaType.APPLICATION_OCTET_STREAM_TYPE); 

        FormDataContentDisposition.FormDataContentDispositionBuilder builder = FormDataContentDisposition.name(filePart.getName());
        builder.fileName(fileToUpload.getName());
        builder.size(fileToUpload.length());
        filePart.setFormDataContentDisposition(builder.build());

        FormDataMultiPart multiPart = new FormDataMultiPart();
        multiPart.bodyPart(filePart);
        multiPart.field("filename", attachment.getFilename());

        ClientResponse cr = rootResource.path("/api/v2/uploads.json")
                .accept(MediaType.APPLICATION_JSON_TYPE)
                .type(MediaType.MULTIPART_FORM_DATA_TYPE)
//              .post(AttachmentWrapper.class, attachment);
                .post(ClientResponse.class, multiPart); 
```

这会导致 ZenDesk 发出内部服务器错误 500 响应。

我尝试了几种不同的参数安排，但没有成功。我用作起点的项目位于此处：[Zendesk-API-Client](https://github.com/pryadav84/Zendesk-API-Client)

原始项目的问题是正在上传的文件在 ZenDesk 服务器上没有可用的内容，它只是定义文件的 JSON。

谢谢，

艾伦

# c# - 以指定格式显示日期

> ID：15342778
> 
> 赞同：0
> 
> 时间：2013-03-11T15:45:14.500
> 
> 标签：c#, datetime

我想以这种格式显示日期：`Saturday, March 9, 2013 at 10:00pm`在 c# 中。你能帮我实现吗？

```
DateTime dateTime = new DateTime();
dateTime.ToString(??) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:48:58.320

您想要的格式类似于以下格式字符串

`dddd, MMMM d, yyyy 'at' hh:mmtt`

现场示例：[http ://rextester.com/WUYT65966](http://rextester.com/WUYT65966)

示例代码：

```
var dt = DateTime.Now;
Console.WriteLine(dt.ToString("dddd, MMMM d, yyyy 'at' hh:mmtt")); 
```

输出：

```
Monday, March 11, 2013 at 08:51AM 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:48:13.547

使用此格式字符串。详情请参阅[MSDN](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)！

```
string.format("{0:dddd, MMMM d, yyyy} at {0:hh:mmtt}", dateTime); 
```

或相同但用作 DateTime.ToString() 方法的格式字符串：

```
dateTime.ToString("dddd, MMMM d, yyyy 'at' 0:hh:mmtt"); 
```

如果您想根据特定文化格式化结果，您也可以指定 CultureInformation（正如@TimSchmelter 在评论/他的回答中指出的那样）

```
CultureInfo desiredCultur = CultureInfo.InvariantCulture;
dateTime.ToString("dddd, MMMM d, yyyy 'at' 0:hh:mmtt", desiredCulture); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T15:53:12.857

这应该适用于任何文化：

```
DateTime dt = new DateTime(2013, 03, 09, 22, 00, 00);
var toString = string.Format("{0} at {1}{2}", 
    dt.ToString("dddd, MMMM d, yyyy", CultureInfo.InvariantCulture),
    dt.ToString("hh:mm", CultureInfo.InvariantCulture), 
    dt.ToString("tt", CultureInfo.InvariantCulture).ToLower()); 
```

[**演示**](http://ideone.com/1JyCau)

输出（即使在没有 AM/PM 指示符的文化中）：`Saturday, March 9, 2013 at 10:00pm`

# jquery - 甘特图中的月视图

> ID：15342779
> 
> 赞同：1
> 
> 时间：2013-03-11T15:45:16.253
> 
> 标签：jquery, html, sharepoint-2010

我已经创建了一个每日甘特图，但我需要每月一次，任何人都可以给我链接或提供解决方案。

[http://jsfiddle.net/highcharts/r6emu/](http://jsfiddle.net/highcharts/r6emu/)

```
 xAxis: {
    type: 'datetime'
},

yAxis: {
    tickInterval: 1,
    labels: {
        formatter: function() {
            if (tasks[this.value]) {
                return tasks[this.value].name;
            }
        }
    },
    startOnTick: false,
    endOnTick: false,
    title: {
        text: 'Activity'
    },
        minPadding: 0.2,
            maxPadding: 0.2
}, 
```

[http://jsfiddle.net/kannankeril/fdTEx/5347/](http://jsfiddle.net/kannankeril/fdTEx/5347/)

```
minorTickInterval: 24 * 3600 * 1000,  // = 1 day
    type: 'datetime',
    min: Date.UTC(2012, 0, 3), 
```

# c# - Code First 和 EF 5.0 不加载导航属性

> ID：15342781
> 
> 赞同：3
> 
> 时间：2013-03-11T15:45:22.987
> 
> 标签：c#, entity-framework, ef-code-first

我正在尝试通过 Code First 和 EF 5.0 加载导航属性子对象加载为 null。下面是代码。

```
 [Table("ls_roles")]
    public class Role
    {
        [Required]
        [Key]
        public int RoleID { get; set; }

        [Required]
        public String BarColor { get; set; }

        [ForeignKey("RoleId")]
        public virtual ICollection<ScheduleEmployee> Employees { get; set; }
    }

    [Table("ls_ScheduleEmployee")]
    public class ScheduleEmployee
    {
        [Key]
        [Required]
        public int Id { get; set; }

        [Required]
        public int RoleId { get; set; }

        [ForeignKey("RoleId")]
        public  Role Role { get; set; }
    } 
```

编辑：调用代码

```
class Program
{
    static void Main(string[] args)
    {
        var x = new Model.ContextEntityFramework().ScheduleEmployees.FirstOrDefault();
    }
} 
```

x.Role == null 此时

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T15:53:39.830

为了使延迟加载起作用，类上的*所有*属性都应该定义为虚拟的。这是 Entity Framework 创建支持延迟加载的代理对象所必需的。

请参阅[此处](http://msdn.microsoft.com/en-us/library/vstudio/dd468057%28v=vs.100%29.aspx)了解更多信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-11T15:52:09.553

你必须在你的调用代码上做一个 .include 来包含孩子。

就像是

```
Model.ContextEntityFramework().ScheduleEmployees.Include(x => x.Role).FirstOrDefault(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T15:47:11.023

您的`Role`类根本不需要在集合上使用该`ForeignKey`属性。`Employees`EF 将自动知道根据`ScheduleEmployee`对象及其对`ForeignKey`属性的使用进行映射。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-19T13:48:04.173

```
 [Table("ls_roles")]
public class Role
{
    [Required]
    [Key]
    public int RoleID { get; set; }

    [Required]
    public String BarColor { get; set; }

    public virtual ICollection<ScheduleEmployee> Employees { get; set; }
}

[Table("ls_ScheduleEmployee")]
public class ScheduleEmployee
{
    [Key]
    [Required]
    public int Id { get; set; }

    [Required]
    [ForeignKey("Role")]
    public int RoleId { get; set; }

    public virtual  Role Role { get; set; }
} 
```

# html - 将大文本从数据库加载到 Zend textarea

> ID：15342784
> 
> 赞同：1
> 
> 时间：2013-03-11T15:45:28.137
> 
> 标签：html, zend-framework, textarea

我正在尝试填充这样的`textarea`定义

```
$this->addElement('textarea', 'body', array(
  'label' => $translate->translate('Contents:'),
  'cols' => '80',
  'rows' => '24',
  'required' => true
)); 
```

从数据库记录。该记录是一个包含页面 HTML 文本的 BLOB，采用 UTF-8 格式。

```
$form->populate(array(
  // ...
  'body' =>
    str_replace("\\n", "\n",
      html_entity_decode(
        $page['body']
      )
    ),
  // ...
)); 
```

不幸的是，当文本的长度大于 2934 字节时，根本不会填充该字段。我尝试`maxlength`通过发出设置

```
 'maxlength' => '4096', 
```

但它似乎没有效果。

现在，根据我在网上找到的信息，`textarea`限制应该大于 2934 字节，更接近 30-60 KB。除了将字段拆分为两个单独的表单元素之外，我该如何解决这个问题？

**更新** 似乎罪魁祸首是字符“ß”，它在数据库中被编码为两个字符“Ã”。该字符的第一次出现是在文本中的位置 2934，因此双字节表示中的第二个字符以某种方式使该字段无法完全接收文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:59:51.610

如问题更新中所述，罪魁祸首是字符“ß”，该字符在数据库中被编码为两个字符“Ã”。该字符第一次出现在文本中的位置 2934，因此双字节表示中的第二个字符以某种方式破坏了该字段完全接收文本。

正如*ficuscr*在他的评论中指出的那样，破坏文本的是对该`str_replace`函数的调用。将其替换为对 的调用后`preg_replace`，文本已正确保存在数据库中，并且该字段收到了全文。

# r - 如何根据另一个二进制文件中的类计算多个二进制文件中变量的平均值？

> ID：15342787
> 
> 赞同：0
> 
> 时间：2013-03-11T15:45:42.380
> 
> 标签：r

我有 5 个具有相同尺寸的二进制文件（栅格）：前四个文件代表参数 1，第五个文件代表具有 10 个类别的土地覆盖图。我想根据土地覆盖类别计算所有四个文件的平均值。所以最后我们会得到每个类对应的4个值。

就像是：

```
 1(first class):
  first file = 0.5(average of all pixels correspond to class 1 from the land cover)
  second file = 0.4(average of all pixels correspond to class 1 from the land cover)
  third file = 0.2(average of all pixels correspond to class 1 from the land cover)
  fourth file = 0.1(average of all pixels correspond to class 1 from the land cover)

  2(second class):
first file = 0.5(average of all pixels correspond to class 2 from the land cover)
second file = 0.4(average of all pixels correspond to class 2 from the land cover)
third file = 0.2(average of all pixels correspond to class 2 from the land cover)
fourth file = 0.1(average of all pixels correspond to class 2 from the land cover 
```

等等...

我在stackoverflow中发现了一些非常相似的东西：如何根据另一个二进制文件中的类计算一个二进制文件中变量的平均值？

然而，这在某种程度上是不同的，我有 4 个文件而不是一个文件。所以我需要在我的所有文件中循环该代码。

全部文件：

1-读取一个文件：

```
 fre <- file("C:\\corr.bin","rb")
  sdf<- readBin(fre, numeric(), size=4,  n=1440*720, signed=TRUE) 
```

2-阅读土地覆盖文件：

```
 land <- file("C:\\land cover.bin","rb")
        over<- readBin(land, integer(), size=1,  n=1440*720, signed=F) 
```

3-仅使用一个文件计算平均值：

```
 result=tapply(sdf, over, mean, na.rm=TRUE) 
```

我对所有文件都试过这个：

```
 dir1<- list.files("C:\filesh", "*.img", full.names = TRUE)
  fre <- file("C:\\landover_from Suj1440a.bin","rb")
  sdf<- readBin(fre, integer(), size=1,  n=1440*720, signed=F)
  results<- list()
 for (.files in seq_along(dir1)){
   list1 <- readBin(dir1[.files], numeric(), size = 4, n = 1440*720, signed = TRUE)   
   list1=tapply(list1, sdf, mean, na.rm=TRUE)
   results[[length(results) + 1L]]<- list1} 
```

似乎它没有错误地工作。：写结果（来自kith回答）：

```
 for (i in seq_along(results)){
  write.table(results[[i]], paste("C:\\filesh\\data", i, ".txt", sep="")) 
```

我会得到4个文本文件data1，data2，data3，......

4-我感谢任何有关如何将所有结果写入一个文本文件的帮助。我希望输出是一个包含所有结果的文本文件：

```
 class            1    2    3    4   5   6  7 ...
 data1            0.2 0.5   0.2  .   .   .  . ...
 data2            0.1  0.5  0.6
 data3            .    .    .   .   .    .  . ...
 data4            . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:02:14.337

要保存您编写的文件：

```
for (i in seq_along(results)){
    write.table(results[[i]], "C:\\filesh\\data%03d.txt", sep="\t")
} 
```

你的意思是：

```
for (i in seq_along(results)){
    write.table(results[[i]], paste("C:\\filesh\\data", i, ".txt", sep="")) 
```

# ruby-on-rails - ruby 中的邮寄表格？

> ID：15342788
> 
> 赞同：1
> 
> 时间：2013-03-11T15:45:43.990
> 
> 标签：ruby-on-rails, contact-form

嗨，我试图在我的 ruby​​ 项目中安装一个联系表单，用户可以在其中向指定的地址发送电子邮件。我无法在我的网站上显示联系表格，不断收到错误 *Expected H:/Sites/whatsonnew/app/controllers/contact_form_controller.rb to define ContactFormController*。任何想法为什么？

联系表单控制器中的代码

```
class ContactFormsController < ApplicationController
  def new
    @contact_form = ContactForm.new
  end

  def create
    begin
      @contact_form = ContactForm.new(params[:contact_form])
      @contact_form.request = request
      if @contact_form.deliver
        flash.now[:notice] = 'Thank you for your message!'
      else
        render :new
      end
    rescue ScriptError
      flash[:error] = 'Sorry, this message appears to be spam and was not delivered.'
    end
  end
end 
```

通过显示此链接调用控制器

```
<li><%= link_to "Contact Form", controller: 'contact_form', action: 'new'  %></li> 
```

routes.rb 我试过了

```
match 'contact_form/create' => 'contact#create'
match 'contact_form/new' => 'contact#new'
match 'contact_form' => 'contact#new' 
```

# android - 将数据插入数据库时 Listview 不更新

> ID：15342789
> 
> 赞同：2
> 
> 时间：2013-03-11T15:45:52.553
> 
> 标签：android, android-listview

我的问题是关于在 SQLite 数据库中更改数据后更新列表视图。当我将数据插入数据库时​​，我的列表视图没有更新。在我的 onRestart() 上，我想做这样的事情：

```
onRestart(){
super.onRestart();
custom_adapter.notifyDataSetChanged();
} 
```

它给了我 NullPointerException。但不是这个，我必须编写完整的代码：

```
onRestart(){
super.onRestart();
cursor.requery();
listview.setadapter(custom_adapter);
listview.setonClickListener(new OnclickListener(){
......
}
)};
} 
```

我的自定义列表视图包含 Imageview 和两个 TextView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T02:03:52.770

**从适配器**调用 `notifyDataSetChanged()`方法检查**适配器构造函数**中收到的更改，因此更改 sql 数据库中的数据不是重点，您必须确保更改的数据与您发送给**适配器**的数据相同。在这种情况下，将自动刷新**`list<Objects>`**`List<Object>`**`listView`******

# python - 重新启动 if then 语句

> ID：15342790
> 
> 赞同：2
> 
> 时间：2013-03-11T15:46:00.823
> 
> 标签：python, if-statement

就像我在 python 中一样。

```
choice1 = raw_input('John Blue Green')
if choice1 == 'A':
   print('blah')
elif choice1 == 'B':
   print('blahblah') 
```

有人输入 B 但它不正确，所以我希望它返回并再次询问。我怎么做？当心，我是一个编程菜鸟。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T15:50:42.017

你基本上需要循环这个。一个例子是将其置于无限循环中，并在达到所需结果时手动中断它：

```
while True:
    choice1 = raw_input('John Blue Green')
    if choice1 == 'A':
        print('blah')
        break # <-- 'A' is okay, so we can get out of the loop then
    elif choice1 == 'B':
        print('blahblah') 
```

根据您的情况，您当然可以调整`True`循环条件以使其不是无止境的，而是对用户输入做出实际反应。然后你就不需要了`break`，但循环自然会停止循环。但是，如果您有多个接受输入值，那么仍然使用中断而不是使用巨大的循环条件可能会更干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:50:50.457

尝试一个while循环，这样你会得到：

```
choice1 = ''
while (choice1 != 'A'):
    choice1 = raw_input('John Blue Green')
    if (choice1 == 'A'):
        print('blah')
    elif (choice1 == 'B'):
        print('blahblah') 
```

以下是关于 while 循环的一些解释： [http ://www.tutorialspoint.com/python/python_while_loop.htm](http://www.tutorialspoint.com/python/python_while_loop.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:52:18.240

你应该把你的代码放在一个循环中并要求确认（或根据你自己的逻辑决定以某种方式决定）是否退出循环：

```
confirmation = 'n'
while (confirmation != 'y'):
  choice1 = raw_input('John Blue Green')
  if choice1 == 'A':
    print('blah')
  elif choice1 == 'B':
    print('blahblah')
  confirmation = raw_input('are you happy with the result?(y/n)') 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-11T15:47:46.437

```
choice1 = raw_input('John Blue Green')
while(choice1 == 'B'):
    print "blahblah"
    choice1 = raw_input('John Blue Green')
print "blah" 
```

# php - 如何使用 DOMXPath 查询获取区域形状

> ID：15342802
> 
> 赞同：1
> 
> 时间：2013-03-11T15:46:25.550
> 
> 标签：php, html, xpath, domxpath

当前的PHP：

```
 $dom = new DOMDocument();
    $dom->loadHTML($htmlsrc);

    $xpath = new DOMXPath($dom);

    $tags = $xpath->query('//div/map/area');
    foreach ($tags as $tag) {
        var_dump(trim($tag->nodeValue));
    } 
```

这显然是不正确的。我有一个变量，其中包含一个文件的 file_get_contents，其中有几个（大约 8000 个）：

```
<area shape="poly" alt="" coords="500,327,464,349,467,385,478,400,492,394,500,356" href="1880314600" title="" /> 
```

我正在尝试收集 $coords 和 $href 以便我可以将它们放入数据库而不是文件中，但我无法理解如何使用 xpath。抱歉，对于“您尝试过什么？”，我没有正确答案。我已经尝试了很多东西，我根本无法理解这一点（或正则表达式）。

**编辑** 对于评论：

```
$xpath = new DOMXPath($dom);
    var_dump($xpath);
    $tags = $xpath->query('//div/map/area');
    foreach ($tags as $tag) {
        var_dump($tag->getAttribute('coords'));
    } 
```

第一个 var_dump() 显示：（已编辑，因为它们有很多）

```
object(DOMXPath)#2985 (1) { ["document"]=> string(22) "(object value omitted)" } string(47) "500,327,464,349,467,385,478,400,492,394,500,356" string(47) "559,310,530,314,532,394,543,389,561,367,561,351" string(63) "613,369,586,343,575,343,575,369,584,394,618,402,638,398,629,371" string(47) "523,431,501,438,498,451,537,468,550,464,550,447" string(39) "525,464,510,460,507,466,518,471,523,469" 
```

但是，第二个 var_dump 不返回任何内容。为什么第一个 xpath 转储只显示坐标？此外，我什至没有在这一点上提出查询......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:19:37.100

要获取坐标（或任何其他属性），您[可以简单地执行](http://php.net/manual/en/domelement.getattribute.php)以下操作：

```
var_dump($tag->getAttribute('coords')); 
```

如果您还想获取`href`属性，您可以简单地执行以下操作：

```
var_dump([
    'coords' => $tag->getAttribute('coords'),
    'href'   => $tag->getAttribute('href'),
]); 
```

# rest - Backbone.js 级联集合和同步？

> ID：15342803
> 
> 赞同：1
> 
> 时间：2013-03-11T15:46:27.750
> 
> 标签：rest, backbone.js, collections, sync, cascade

我正在尝试在 Backbone 中使用尽可能多的 OOTB 同步和 RESTful 功能。我为模型的基本 CRUD 设置了 Web API。我有：

```
var SearchModel = Backbone.Model.extend({});
var SearchMappingModel = Backbone.Model.extend({});
var SearchComponentModel = Backbone.Model.extend({});

var SearchCollection = Backbone.Collection.extend({});
var SearchMappingCollection = Backbone.Collection.extend({});
var SearchComponentCollection = Backbone.Collection.extend({}); 
```

对于每个 Search，都有一对多的 SearchMapping，对于每个 SearchMapping，都有一对多的 SearchComponent。我的同步 URL 类似于 Search 集合的“/search”，SearchMapping 集合的“'/searchmapping/' + searchId”和 SearchComponent 集合的“'/searchcomponent/' + mappingId”。

我的问题是，由于每个集合都依赖于前一个集合，有没有办法可以在主干中建立级联关系以最小化我的代码并尽可能多地使用已经存在的基本同步功能？

我最初的想法是在集合中创建一个集合并编写我自己的 .fetch() 以首先获取父集合并在其成功时获取子集合，然后在其自身成功后也将获取其子集合，如下所示：

```
var SearchCollection = Backbone.Collection.extend({
    model: SearchModel,
    initialize: function (data) {
      this.url = baseURL + "/search";
      this.data = data;
      this.SearchMappingCollection = new SearchMappingCollection();
    },
    fetchData: function () {
      this.fetch({
        success: _.bind(function (results) {
          this.fetchListSuccess(results);
        }, this)
      });
    },
    fetchListSuccess: function (results) {
      this.SearchMappingCollection.fetchData(results);
    } 
```

对 .save() 也是如此。这可能是一种很好的方法，但希望从其他做过类似事情的人那里获得反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:14:35.893

我最终没有使用级联格式。似乎它增加了更多的复杂性，却没有给予任何回报。现在所有 3 个集合都位于控制器级别，我只是在每个“重置”事件加载每个集合后加载下一个集合。

# c++ - C++ linux检测所有串口

> ID：15342804
> 
> 赞同：5
> 
> 时间：2013-03-11T15:46:29.667
> 
> 标签：c++, ubuntu, serial-port

有没有一种很好的方法来检测连接在 linux 上的串行端口上的所有连接设备？我用 C++ 编程，但也欢迎其他示例。

您可以尝试打开每个端口，并在成功后将其添加到端口列表中，但这似乎不是一个很好的解决方案。

您可以进入开发总监，因为我的串行端口是 USB 端口，我可以检查哪些 ttyUSB.. 文件已制作。但这不适用于非 USB 串行端口，因为 tty0 到 tty63 的文件始终在此目录中。

我的例子：

```
std::string port;
int fd 
std::vector<std::string>> list;
for(int i = 0; i < 256; ++i)
{
    port.clear();
    port.append("/dev/ttyUSB");
    port.append(std::to_string(i));
    fd = open(port.c_str(), O_RDWR | O_NOCTTY | O_DELAY);
    if(fd != -1)
    {
        list.push_back(port);
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T16:24:35.167

Linux 中枚举设备的标准方法是浏览`/sys`文件系统。在这种情况下，您可以执行以下操作：

1.  枚举所有文件`/sys/class/tty`
2.  对于每个目录`/sys/class/tty/foo`，使用 . 检查是否`/sys/class/tty/foo/device`存在`lstat()`。
    *   如果它不存在，那么您正在处理某种虚拟 tty 设备（虚拟控制台端口、ptmx 等...），您可以丢弃它。
    *   如果存在则保留串口`foo`。

您应该留下一个实际串行端口的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-17T18:23:26.227

鉴于自从回答这个问题以来已经过去了很多年，我正在添加这个答案。这个答案适用于更高版本的linux。它还使用了`std::filesystem`c++17 中引入的新功能。 `std::filesystem`在早期版本的 c++ 中可以通过 boost 或命名空间`std::experimental::filesystem`(use `#include <experimental/filesystem>`) 使用。如果使用 boost，则必须包含已编译的组件`system`

此示例还计算出符号链接指向的位置并返回它的规范名称。

```
#include <iostream>
#include <string>
#include <boost/filesystem.hpp>
#include <boost/asio.hpp>

using std::cout;
namespace fs = boost::filesystem;

std::vector<std::string> get_available_ports() {
    std::vector<std::string> port_names;

    fs::path p("/dev/serial/by-id");
    try {
      if (!exists(p)) {
        throw std::runtime_error(p.generic_string() + " does not exist");
      } else {
        for (fs::directory_entry &de : fs::directory_iterator(p)) {
          if (is_symlink(de.symlink_status())) {
            fs::path symlink_points_at = read_symlink(de);
            fs::path canonical_path = fs::canonical(symlink_points_at, p);
            port_names.push_back(canonical_path.generic_string());
          }
        }
      }
    } catch (const fs::filesystem_error &ex) {
      cout << ex.what() << '\n';
      throw ex;
    }
    std::sort(port_names.begin(), port_names.end());
    return port_names;
} 
```

# border - 边框半径显示不正确

> ID：15342808
> 
> 赞同：1
> 
> 时间：2013-03-11T15:46:38.543
> 
> 标签：border, css

我在样式表中为某个 div 中的所有图像设置了边框半径。工作正常，除了在某些浏览器中半径根本不是圆的？

我为 IE、webkit 和 moz 设置了它。但例如在 IE10 中，除了右下角之外根本没有半径。

示例 1

代码：

```
div#dienstright img{

border-bottom-left-radius:25px;
border-bottom-right-radius:25px;
border-top-left-radius:25px;
border-top-right-radius:25px;

-moz-border-radius:25px 25px 25px 25px; 

-webkit-border-top-left-radius:25px; 
-webkit-border-top-right-radius:25px; 
-webkit-border-bottom-left-radius:25px; 
-webkit-border-bottom-right-radius:25px; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:53:39.877

在这种情况下，如果您删除边框半径将按预期显示，则它是您在顶部/左侧的填充`img`。`10px`

在 IE9 + 10中工作的长短手语法`border-radius`很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:48:26.403

对于 IE 使用：

```
border-radius: 25px; 
```

它应该足以正常工作。而且由于每个角落都有相同的值，因此无需单独指定每个角落。

如果您需要单独指定使用：

```
border-radius: 25px 25px 25px 25px; 
```

值按顺序排列：左上、右上、右下、左下

# vb.net - mongodb查询查找字段 - vb.net

> ID：15342814
> 
> 赞同：1
> 
> 时间：2013-03-11T15:46:44.683
> 
> 标签：vb.net, mongodb

我将如何构建对 mongodB 的查询以创建“存储过程”或请求选择标记为活动的 id，然后立即删除该字段或将其标记为不活动；哪个性能更好。这是集合结构：

```
 db = server.GetDatabase("test")
    siteCollection = db("test")
    collection = db.GetCollection(Of BsonDocument)("siteids")
    Dim book As BsonDocument = New BsonDocument() _
                    .Add("siteid", BsonValue.Create(BsonType.String)) _
                    .Add("active", BsonValue.Create(BsonType.String))
    collection.Insert(book) 
```

我找到了 java 版本，但不确定这是否可行以及 .net 语法是什么

```
db.things.find( { x : 4 } , { j : 1 } ) 
```

这显然会找到 x = 4 的记录，但只返回 j = 1 的记录，所以我想要一个 active = 'N' 的 siteid

谢谢; 到目前为止，这是我想出的：

```
 ' Dim squery = Query.EQ("active", "Y")

    Dim squery = Query.EQ("active", "Y")
    Dim ssort = SortBy.Null
    Dim uupdate = Update.[Set]("active", "N")
    Dim result = collection.FindAndModify(squery, ssort, uupdate)

    ' Dim dresult = collection.FindAs(Of BsonDocument)(squery)
    Dim newSiteId As String = dresult.Count 
```

如您所见，第一行已被注释掉，我认为将实现一个简单的选择，但结果返回 null。然后用倒数第二个语句注释掉那个太返回值Null。

# c++ - C++中树的内存分配类型

> ID：15342816
> 
> 赞同：0
> 
> 时间：2013-03-11T15:46:49.433
> 
> 标签：c++, pointers, tree, stack, dynamic-memory-allocation

我需要一个函数来返回从表达式 AB*B+ 构建的树。每个节点的类型`struct`

```
struct Node {
std::string name;
Node* left;
Node* right;
} 
```

我现在需要解析表达式 AB*B+。我有一叠`std::vector<Node*>`。

1）为A创建节点，将其推入堆栈

2）为B创建节点，将其推入堆栈

3）为*创建节点，弹出B，赋值给右边，弹出A，赋值给左边。将 * 压入堆栈

这一直持续到表达式完成。

现在，如果我可以访问树的根，我应该能够访问每个节点。但是，由于我将它们全部分配在函数的堆栈上，我猜测当我返回根节点时，虽然该节点可能被复制到 RHS，但它指向的子节点是无效的。

我是否应该在创建节点时将所有节点存储在不同`std::vector<Node> nodes`的位置。使用栈创建父子关系，然后`nodes`按值返回？这行得通吗？

或者我应该用`std::shared_ptr`这个来代替？如果是这样，你能举例说明如何做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T06:37:09.217

By copy, I am guessing you mean this :

```
 Node* root = Null;
    root = nodeStack.pop(); 
```

I you really are following your algorithm perfectly , and you mean copy as the above. It should work. Definitely. May be there is something wrong with the algorithm implementation.

# asp.net-mvc-3 - 获取 mvc 3 异常：找不到路径“/GMIS/ie-css3.htc”的控制器或未实现 IController？

> ID：15342819
> 
> 赞同：0
> 
> 时间：2013-03-11T15:46:56.770
> 
> 标签：asp.net-mvc-3, logging, exception-handling, log4net

该应用程序似乎运行良好？但我一直在我的日志中看到这些异常：

```
2013-03-11 11:32:46,736 [30] DEBUG COPSGMIS.Logging.GMISLogging - Executing controller: Home, action: Index
2013-03-11 11:32:48,934 [30] ERROR COPSGMIS.MvcApplication - GMIS Exception
System.Web.HttpException (0x80004005): The controller for path '/GMIS/ie-css3.htc' was not found or does not implement IController.
   at System.Web.Mvc.DefaultControllerFactory.GetControllerInstance(RequestContext requestContext, Type controllerType)
   at System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext requestContext, String controllerName)
   at System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& controller, IControllerFactory& factory) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:27:12.420

放置 `ie-css3.htc`到内容文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:36:42.907

不知道为什么我忽略了它。在我的样式表中，我有以下内容：

```
behavior: url(ie-css3.htc); 
```

它必须是：

```
behavior: url(../Content/ie-css3.htc); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:54:07.440

尝试这个。添加这一行

```
routes.IgnoreRoute("GMIS/ie-css3.htc"); 
```

在您调用 MapRoute 的位置上方

# powershell - 无法使用 PowerShell Enter-PSSession 连接到远程服务器

> ID：15342821
> 
> 赞同：2
> 
> 时间：2013-03-11T15:47:01.103
> 
> 标签：powershell, remote-management

我在使用 PowerShell 连接到远程服务器时遇到问题，其中远程计算机使用非默认端口号。设置如下：我有一个带有多个虚拟机的虚拟主机服务器。所有这些虚拟机都具有相同的 IP 地址，但使用不同的端口访问，例如：

```
a.b.c.d:3000
a.b.c.d:3001
etc 
```

所以，我到目前为止的 PowerShell 脚本是：

```
$password = ConvertTo-SecureString "<MyPassword>" -AsPlainText -Force
$cred= New-Object System.Management.Automation.PSCredential ("<Domain\UserName>", $password)
Enter-PSSession -ComputerName <IPAddress> -Port <PortNumber> -Credential $cred 
```

“<>”中的位特定于各个机器。运行此脚本时，我收到以下错误：

> Enter-PSSession：连接到远程服务器失败，并显示以下错误消息：客户端无法连接到请求中指定的目标。验证目标上的服务是否正在运行并且正在接受请求。请查阅在目标（最常见的是 IIS 或 WinRM）上运行的 WS-Management 服务的日志和文档。如果目标是 WinRM 服务，在目标上运行以下命令来分析和配置 WinRM 服务：“winrm quickconfig”。有关详细信息，请参阅 about_Remote_Troubleshooting 帮助主题。在 C:\PowerShell\Test7.ps1:25 char:16 + Enter-PSSession <<<< -ComputerName -Port -Credential $cred + CategoryInfo : InvalidArgument: (:String) [Enter-PSSession],

我尝试的另一个变体如下：

```
$password = ConvertTo-SecureString "<MyPassword>" -AsPlainText -Force
$cred= New-Object System.Management.Automation.PSCredential ("<Domain\UserName>", $password)
$powershell_uri = "http://<IPAddress>:<PortNumber>"
Enter-PSSession -ConnectionUri $powershell_uri -Credential $cred 
```

但这给出了以下错误：

> Enter-PSSession：连接到远程服务器失败，并显示以下错误消息：客户端无法连接到请求中指定的目标。验证目标上的服务是否正在运行并且正在接受请求。请查阅在目标（最常见的是 IIS 或 WinRM）上运行的 WS-Management 服务的日志和文档。如果目标是 WinRM 服务，在目标上运行以下命令来分析和配置 WinRM 服务：“winrm quickconfig”。有关详细信息，请参阅 about_Remote_Troubleshooting 帮助主题。在 C:\PowerShell\Test7.ps1:21 char:16 + Enter-PSSession <<<< -ConnectionUri $powershell_uri -Credential $cred # -ComputerName -Port -Credential $cred + CategoryInfo : InvalidArgument: (http://: /：

我已经在本地机器上设置了 TrustedHosts (winrm set winrm/config/client @{TrustedHosts=""})，在远程机器上我已经运行了“winrm quickconfig”命令。在远程机器上，我还运行了“winrm create winrm/config/listener?Address=*+Transport=HTTP @{Port=""}" 命令。

任何有关如何在 PowerShell 中与这些机器建立连接的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-08-11T22:13:18.500

### 在远程计算机上：

1.  在：*控制面板\网络和Internet\网络和共享中心*
    确保远程计算机不在*公共*位置，但将其设置为*工作*或*私人*

2.  以管理员模式启动PowerShell并输入命令：
    Enable-PSRemoting
    exit

3.  转到控制面板-> 系统和安全-> Windows 防火墙，然后单击高级设置
    将管理计算机的 IP 范围添加到*私有*和*域*入站规则中的 Windows 远程管理（http-In）。

### 在管理计算机上：

2.  以管理员模式启动 PowerShell 并输入命令：

    Set-Item WSMan:\localhost\Client\TrustedHosts -Concatenate *remotecomputer.domain.suffix* -Force

    使用完整的远程计算机的网络路径。这会将远程计算机网络名称添加到您的受信任主机。

这应该够了吧。

# javascript - 使用 javascript 在屏幕上下载图像

> ID：15342822
> 
> 赞同：-1
> 
> 时间：2013-03-11T15:47:01.397
> 
> 标签：javascript, image, download

如何使用 javascript 将图像下载到用户计算机？该图像已经在屏幕上，但我希望他们能够单击一个按钮，以便使用每个浏览器的本机下载选项。（不需要ajax，因为图像已经存在）

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:51:23.093

由于 JavaScript 无法设置必要的 HTTP 标头，因此无法单击鼠标左键。也许这会在未来改变——“HTML5”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:04:19.380

好吧，插入使用 URL 来使用它们.. 使用它们的数据 URI.......

你可以打开一个图像，然后base64它..

现在，添加它而不是 Javascript 文件（如 data:image/png; base64, ....................）

单击时，将 window.location.href 设置为该数据 URI，它将是可下载的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:21:21.207

我的解决方案

在发现您不能仅使用 Javascript 来执行此操作后，我只是在服务器上设置了正确的标头。

在 php 中，使用这些标头返回图像

```
$headers = [
  'content-type' => 'image/jpg',
  'content-disposition' => 'attachment; filename="photo.jpg'
]; 
```

现在，当`window.location`设置时，它只会下载图像 - 正是我想要的。

# c - c代码在dumpbin中报告undef sprintf 编译没有错误

> ID：15342826
> 
> 赞同：-1
> 
> 时间：2013-03-11T15:47:18.090
> 
> 标签：c

我有可以在另一台 PC 上编译和链接的 c 代码。我现在正在努力让一切都在我的 Windows 7 64 位操作系统上运行。代码编译成一个没有错误的对象，但是当我在对象上运行 dumpbin 时，`/SYMBOLS`我收到了几条`UNDEF`消息。

```
0F9 00000000 UNDEF  notype       External     | __imp__sprintf
0FA 00000000 UNDEF  notype       External     | __imp__fclose
0FB 00000000 UNDEF  notype       External     | __imp__fopen
0FC 00000008 SECT3  notype       Static       | _i
0FD 00000000 UNDEF  notype ()    External     | _strcmp
0FE 00000000 UNDEF  notype       External     | __imp__setlocale
0FF 00000000 UNDEF  notype ()    External     | _strcpy
100 00000290 SECT5  notype ()    Static       | _f_read_common_fields
101 00000000 UNDEF  notype ()    External     | _memcpy
102 00000000 UNDEF  notype       External     | __imp__fread
103 00000000 UNDEF  notype ()    External     | _memset
104 00000000 UNDEF  notype       External     | ___security_cookie
105 00000000 UNDEF  notype ()    External     | @__security_check_cookie@4 
```

好像我只是在发送一条路径声明或其他信息，但找不到它。这是使用 VS2005 从命令行编译的所有外部代码（不在 VS 项目中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:14:44.100

它看起来像一个链接器问题。我看到了你的编译行，但是链接行呢。在我脑海中，我不记得标准 c 东西的 VC 库了。

是 msvcrt.lib 吗？您是否将其包含在链接行中？

# ruby - 如何在 ERB 文件中输出多维哈希？

> ID：15342827
> 
> 赞同：0
> 
> 时间：2013-03-11T15:47:18.247
> 
> 标签：ruby, sinatra, erb

我需要一些帮助来打印我的哈希值。在我的“web.rb”文件中，我有：

```
class Main < Sinatra::Base

    j = {}
    j['Cordovan Communication'] = {:title => 'UX Lead', :className => 'cordovan', :images => ['http://placehold.it/350x150','http://placehold.it/350x150','http://placehold.it/350x150']}
    j['Telia'] = {:title => 'Creative Director', :className => 'telia', :images => ['http://placehold.it/350x150','http://placehold.it/350x150','http://placehold.it/350x150','http://placehold.it/350x150']}

    get '/' do
        @jobs = j
        erb :welcome
    end
end 
```

在“welcome.rb”中，我正在打印哈希值，但它不起作用：

```
<% @jobs.each do |job| %>  
    <div class="row">
        <div class="span12">
            <h2><%=h job.title %></h2>
        </div>
    </div>
<% end %> 
```

这是我的错误信息：

```
NoMethodError at / undefined method `title' for #<Array:0x10c144da0> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T15:53:44.463

想想`@jobs`看起来像什么：

```
@jobs = {
  'Cordovan Communication' => {
    :title => 'UX Lead', 
    :className => 'cordovan',
    :images => ['http://placehold.it/350x150','http://placehold.it/350x150','http://placehold.it/350x150']},
  'Telia' => {
    :title => 'Creative Director',
    :className => 'telia',
    :images => ['http://placehold.it/350x150','http://placehold.it/350x150','http://placehold.it/350x150','http://placehold.it/350x150']}
} 
```

然后记住，`each`在散列上调用将一个键和一个值传递给块，你会看到你有：

```
@jobs.each do |name, details|
  # On first step, name = 'Cordovan Communication', details = {:title => 'UX Lead', ...}
end 
```

所以你想要的可能是：

```
<% @jobs.each do |name, details| %>  
    <div class="row">
        <div class="span12">
            <h2><%=h details[:title] %></h2>
        </div>
    </div>
<% end %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T15:54:09.403

Ruby 哈希没有自动方法创建，例如，您不能调用`job.title`，因为对象上没有`title`方法`Hash`。相反，您可以调用`job[:title]`.

~~另请注意，这`@jobs`是一个哈希，而不是一个数组，因此您可能想要调用`@jobs.each_pair`而不是`@jobs.each`. 可以使用`@jobs.each`，但在这种情况下，它不会给你所期望的。~~

# forms - 在 symfony 1.4 中更改动态验证文件类

> ID：15342835
> 
> 赞同：0
> 
> 时间：2013-03-11T15:47:29.880
> 
> 标签：forms, symfony1, validation, symfony-1.4

我有这个模型：

```
Banner:
 columns:
  filename: string(255)
  url: string(255)
  position:
   type: enum
   values: [top, right]
   default: right 
```

这种形式：

```
class BannerForm extends BaseBannerForm
{
  public function configure()
  {
    $this->widgetSchema['filename'] = new sfWidgetFormInputFileEditable(array(
      'file_src' => $this->getObject()->getThumbURL(),
      'is_image' => true,
      'edit_mode' => $this->getObject()->exists()
    ));
    $validated_file_class = $this->getObject()->position === 'right' ? 'bannerRightValidatedFile' : 'bannerTopValidatedFile';
    $this->validatorSchema['filename'] = new sfValidatorFile(array(
      'path' => sfConfig::get('sf_upload_dir'),
      'mime_types' => 'web_images',
      'validated_file_class' => $validated_file_class',
      'required' => $this->getObject()->isNew()
    ));
  }
} 
```

我使用不同的验证类，因为在其中我封装了缩略图操作，并且横幅的大小取决于它的位置字段。问题是 $validated_file_class 总是bannerRightValidatedFile 类。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:50:43.077

我可以推荐 4 种解决方案供您选择：

**选项1：**

您应该向表单类添加一个 update$fieldNameColumn 方法。在您的情况下，它应该如下所示：

```
// change validated file instance before calling save
protected function updateFilenameColumn($value)
{
  if ($value instanceof sfValidatedFile)
  {
    $class = 'right' == $this->getValue('position') ? 'bannerRightValidatedFile' : 'bannerTopValidatedFile';
    // this will not work as I thought at first time
    // $this->getValidator('filename')->setOption('validated_file_class', $class);

    $this->values['filename'] = new $class(
      $value->getOriginalName(),
      $value->getType(),
      $value->getTempName(),
      $value->getSize(),
      $value->getPath()
    );

    return $this->processUploadedFile('filename');
  }

  return $value;
} 
```

我认为这有点骇人听闻。

**选项 2：**

您应该向模型添加一个学说挂钩方法：

```
/**
 * @param Doctrine_Event $event
 */
public function postSave($event)
{
  $record = $event->getInvoker();

  if (array_key_exists('filename', $record->getLastModified()))
  {
    // get the full path to the file
    $file = sfConfig::get('sf_upload_dir') . '/' . $record->getFilename();

    if (file_exists($file))
    {
      // resize the file e.g. with sfImageTransformPlugin
      $img = new sfImage($file);
      $img
        ->resize(100, 100)
        ->save();
    }
  }
} 
```

这将在创建没有表单的记录时起作用，例如在使用固定装置时。

**选项 3：**

使用[`admin.save_object`](http://symfony.com/legacy/doc/reference/1_4/en/15-Events#chapter_15_sub_doctrine_admin_save_object)事件。

```
public static function listenToAdminSaveObject(sfEvent $event)
{
  $record = $event['object'];

  if ($event['object'] instanceof Banner)
  {
    // use the same code as in the `postSave` example
  }
} 
```

**选项 4：**

使用[sfImageTransformExtraPlugin](http://www.symfony-project.org/plugins/sfImageTransformExtraPlugin)

设置和配置有点困难（而且它的代码是一团糟:)，但它可以在不重新生成所有已经调整大小的情况下修改图像的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:52:40.393

您可以添加一个 sfCallbackValidator 作为后验证器，并相应地设置属性。

伪代码（我手头没有确切的函数签名）。

```
public function configure() {
  // ...
  $this->mergePostValidator(new sfCallbackValidator(array('callback' => array($this, 'validateFile'))));
}

public function validateFile($values) {
   $realValidator = new sfValidatorFile(...);
   return $realValidator->clean($values['field']);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T15:55:19.277

如果您可以修改对表单类的调用，则可以这样做：

```
$form = new BannerForm(array(), array('validated_file_class' => 'bannerRightValidatedFile');
$form2 = new BannerForm(array(), array('validated_file_class' => 'bannerTopValidatedFile'); 
```

然后以您的形式：

```
class BannerForm extends BaseBannerForm
{
  public function configure()
  {
    $this->widgetSchema['filename'] = new sfWidgetFormInputFileEditable(array(
      'file_src'  => $this->getObject()->getThumbURL(),
      'is_image'  => true,
      'edit_mode' => $this->getObject()->exists()
    ));

    $this->validatorSchema['filename'] = new sfValidatorFile(array(
      'path'                 => sfConfig::get('sf_upload_dir'),
      'mime_types'           => 'web_images',
      'validated_file_class' => $this->options['validated_file_class'],
      'required'             => $this->getObject()->isNew()
    ));
  }
} 
```

**编辑：**

由于您是在管理员内部玩，我认为最好的方法是使用像@Grad van Horck 所说的 postValidator。

您的验证类依赖于一个额外的字段。使用 postvalidator，您可以访问表单内的任何字段。然后，您只需要创建一个小开关来处理每个职位/验证类的情况。

```
public function configure()
{
    // ...
    $this->mergePostValidator(new sfValidatorCallback(array('callback' => array($this, 'validateFile'))));
}

public function validateFile($validator, $values, $arguments)
{
    $default = array(
        'path'       => sfConfig::get('sf_upload_dir'),
        'mime_types' => 'web_images',
        'required'   => $this->getObject()->isNew()
    );

    switch ($values['position'] ) {
        case 'right':
            $validator =  new sfValidatorFile($default + array(
                'validated_file_class' => 'bannerRightValidatedFile',
            ));
            break;

        case 'top':
            $validator =  new sfValidatorFile($default + array(
                'validated_file_class' => 'bannerTopValidatedFile',
            ));

        default:
            # code...
            break;
    }

    $values['filename'] = $validator->clean($values['filename']);

    return $values;
} 
```

# mysql - 考虑到两个表的连接，获取重复行的最大值

> ID：15342836
> 
> 赞同：0
> 
> 时间：2013-03-11T15:47:30.507
> 
> 标签：mysql, sql, greatest-n-per-group

我有两张桌子

**学生_tbl**

**student_results_tbl**

学生_tbl

```
------------------------------------------------------
student_id | student_name | 
------------------------------------------------------
1            Mark
2            Jhon
3            Michael
4            Steven  
------------------------------------------------------ 
```

student_results_tbl

```
------------------------------------------------------
student_id | course_id | student_mark 
------------------------------------------------------
1            33            100
2            2             50
3            33            200  
4            10            80 
------------------------------------------------------ 
```

我的问题，如果只有 course_id 重复并且学生表中的学生姓名基于结果表中生成的学生 id，我想根据具有最高标记的特定课程 id 从结果表中选择所有内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:50:53.750

据我了解您的问题，您希望*每门课程都获得最高的学生*。

```
SELECT  a.*, b.*
FROM    students_tbl a
        INNER JOIN students_results_tbl b
            ON a.student_id = b.student_id
        INNER JOIN
        (
            SELECT  course_ID, MAX(student_mark) max_grade
            FROM    students_results_tbl
            GROUP   BY course_ID
        ) c ON  b.course_id = c.course_id  AND
                b.student_mark = c.max_grade 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/7c0a5/1)

结果

```
╔════════════╦══════════════╦═══════════╦══════════════╗
║ STUDENT_ID ║ STUDENT_NAME ║ COURSE_ID ║ STUDENT_MARK ║
╠════════════╬══════════════╬═══════════╬══════════════╣
║          2 ║ Jhon         ║         2 ║           50 ║
║          3 ║ Michael      ║        33 ║          200 ║
║          4 ║ Steven       ║        10 ║           80 ║
╚════════════╩══════════════╩═══════════╩══════════════╝ 
```

**更新 1**

`INDEX`为了获得更快的性能，请在上添加一个化合物`course_id and student_mark`，

```
ALTER TABLE students_results_tbl INDEX (course_id, student_mark) 
```

**更新 2**

```
SELECT  a.*, b.*
FROM    students_tbl a
        INNER JOIN students_results_tbl b
            ON a.student_id = b.student_id
        INNER JOIN
        (
            SELECT  student_id,
                    course_ID, 
                    MAX(student_mark) max_grade
            FROM    students_results_tbl 
            GROUP   BY student_id, course_ID
        ) c ON  b.course_id = c.course_id  AND
                b.student_ID = c.student_id AND
                b.student_mark = c.max_grade
WHERE   b.course_ID = 33 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/3371d1/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:49:45.313

也许这个，如果我正确理解你的问题

```
SELECT MAX(student_mark)
FROM students_results_tbl
WHERE course_id = ???
GROUP BY course_id
HAVING COUNT(course_id) > 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:50:27.323

此查询将返回所有 course_id 的最大学生标记，其中结果表中有多个记录

```
SELECT course_id, MAX(student_mark)
FROM students_resultstbl r
GROUP BY course_id HAVING COUNT (r.student_id) > 1 
```

# pdf - 如何由小组成员将报告打印为 pdf

> ID：15342842
> 
> 赞同：0
> 
> 时间：2013-03-11T15:47:38.887
> 
> 标签：pdf, printing, crystal-reports, group-by

新的关键报告。

我有一个基于组的报告（使用组专家），组的项目是人名；鲍勃、简...

是否可以根据组的项目（即名称）打印报告以分隔 pdf；鲍勃、简...

使用关键报告 2011

# android - 将文本视图动态添加到列表视图

> ID：15342846
> 
> 赞同：1
> 
> 时间：2013-03-11T15:47:45.420
> 
> 标签：android, listview, android-arrayadapter

我正在尝试将 textview 动态添加到 listview 中。在添加我之前设置文本但在列表视图中的文本看起来像'android.widget.TextView@45f ...'

```
private ArrayAdapter<TextView> dizi;
private ListView list;

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

list = (ListView)findViewById(R.id.listview);
dizi = new ArrayAdapter<TextView>(this, R.layout.asd);
list.setAdapter(dizi);

TextView qwe = new TextView(getApplicationContext());
qwe.setText("txt");
dizi.add(qwe);

} 
```

asd 布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textSize="20sp"
    android:padding="5dp"

/> 
```

我尝试在 asd 布局文件中使用 linearlayout 更改 textview 元素，但它没有用。

我想不通。我需要做什么？

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T15:49:33.323

这是因为对它所持有的对象的正常`ArrayAdapter`调用实现`toString()`可以确保它们可以显示。

由于`ArrayAdapter`已经使用`TextView`s 来显示数据，我建议您将 Adapter 更改为`ArrayAdapter<String>`，然后添加您要显示的字符串。

```
dizi = new ArrayAdapter<String>(this, R.layout.asd);
list.setAdapter(dizi);

dizi.add("txt");
dizi.notifyDataSetChanged(); 
```

如果要更改布局，请扩展`ArrayAdapter`并覆盖该`getView()`方法。本[教程](http://www.vogella.com/articles/AndroidListView/article.html)更深入一些。

`ArrayAdapter`由 a `List`of `String`s 实现 some s的小例子`Spannable`：

```
public class ExampleAdapter extends ArrayAdapter<String> {

  LayoutInflater inflater;
  int resId;
  int layoutId;

  public ExampleAdapter(Context context,int layoutId, int textViewResourceId,
                        List<String> objects) {
    super(context, layoutId, textViewResourceId, objects);
    this.inflater = LayoutInflater.from(context);
    this.layoutId = layoutId;
    this.resId = textViewResourceId; 
  }

  @Override
  public View getView(int position, View convertView, ViewGroup parent)
  {
    if (convertView == null)
      convertView = inflater.inflate(layoutId, parent,false);

    String text = getItem(position);
    Spannable s = Spannable.Factory.getInstance().newSpannable(text);
    s.setSpan(new ForegroundColorSpan(Color.RED), 0, text.length()/2, 0);
    s.setSpan(new StyleSpan(android.graphics.Typeface.ITALIC), 0, text.length()/2, 0);
    s.setSpan(new ForegroundColorSpan(Color.DKGRAY), text.length()/2, text.length(), 0);
    s.setSpan(new StyleSpan(android.graphics.Typeface.BOLD), text.length()/2, text.length(), 0);

    ((TextView)convertView.findViewById(resId)).setText(s, TextView.BufferType.SPANNABLE);

    return convertView;
  }
} 
```

结果：

![在此处输入图像描述](../Images/adcaa63c5c2d94203229d79fc2a5e08b.png)

要创建它的实例（假设您是从 Activity 执行此操作），我做了什么：

```
ArrayList <String> items = new ArrayList <String> ();
items.add ("Array Adapter");

ExampleAdapter dizi = new ExampleAdapter (YourActivity.this,android.R.layout.simple_list_item_1,android.R.id.text1,items);
list.setAdapter(dizi);

dizi.add ("your text");
dizi.notifyDataSetChanged(); 
```

# sql-server - MVC3 重新创建表

> ID：15342848
> 
> 赞同：0
> 
> 时间：2013-03-11T15:47:46.747
> 
> 标签：sql-server, asp.net-mvc-3

我正在制作一个 MVC3 C# 应用程序，我想清除所有表格并基本上重新开始。我进入 SQL Server 对象资源管理器并删除了我用于模型的所有表。现在我希望它们会在下次构建时再次创建并为空。不幸的是，情况并非如此。如何让我的应用程序重新创建表？

# sql - oracle sql查询基于另一个查询进行计数

> ID：15342850
> 
> 赞同：0
> 
> 时间：2013-03-11T15:47:51.163
> 
> 标签：sql, oracle

我想知道哪个国家的哪个客户的订单最多。所以我有一个`sales_table`与`customer_ids`. 但是`country_id`在`customer_table`. 所以我需要以某种方式根据国家/地区计数来计算客户......但我不知道该怎么做。一世

我知道如何计算客户。

```
select count(cust_id)
from sh_sales 
```

以及如何计算国家

```
select count(country_id)
from sh_customers 
```

但我想根据`customer_id`最常用的国家来计算国家`sh_sales table`

所以它应该以某种方式

```
select count(country_id)
from sh_customers
where sh_sales.customer ???? 
```

我真的需要一些帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T15:53:53.043

这将计算 sh_sales 表中的记录，并按客户表中的每个 country_id 分组

```
SELECT country_id, count(s.cust_ID)
FROM sh_customers c
    INNER JOIN sh_sales s ON c.cust_id = s.cust_id
GROUP BY country_id 
```

如果由于某种原因，您可能有客户记录，但没有销售，那么您可以使用`LEFT OUTER JOIN`为没有任何销售的国家/地区返回 NULL

# c# - win 8 Metro 应用程序 c# 多个 itemTemplate

> ID：15342851
> 
> 赞同：1
> 
> 时间：2013-03-11T15:47:53.987
> 
> 标签：c#, xaml, microsoft-metro, windows-runtime, windows-store-apps

我正在开发一个地铁应用程序，我遇到了一些情况。在我的一个页面中，我使用了带有自定义项目模板的列表视图，该模板显示图像及其名称。现在我必须使用 2 项模板，如果图像是垂直的，我必须使用另一个高度更长的模板。o listview 中可以有 2 个不同的模板吗？我必须更改 .cs 中的模板，例如 `if the image is horizontal listview.ItemTemplate = 1 else if the image is vertical listvew.ItemTemplate =2` 如何使用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T05:35:57.063

首先创建一个自定义[`DataTemplateSelector`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.datatemplateselector.aspx)类：

```
public class OrientationTemplateSelector : DataTemplateSelector
{
    protected override DataTemplate SelectTemplateCore(object item, DependencyObject container)
    {
        // cast item to your custom item class
        var customItem = item as CustomItem;
        if (customItem == null)
            return null;

        string templateName = String.Empty;
        if (customItem.Width > customItem.Height
        {
            // image is horizontal
            templateName = "HorizontalItemTemplate";
        }
        else
        {
            templateName = "VerticalItemTemplate";
        }

        object template = null;
        // find template in App.xaml
        Application.Current.Resources.TryGetValue(templateName, out template);
        return template as DataTemplate;
    }
} 
```

将您的项目模板定义为资源（​​在我的情况下`App.xaml`- 确保在模板选择器内的正确位置搜索它们）：

```
<Application.Resources>
    <DataTemplate x:Key="HorizontalItemTemplate">
        <!-- item template for horizontal image -->
    </DataTemplate>
    <DataTemplate x:Key="VerticalItemTemplate">
        <!-- item template for vertical image -->
    </DataTemplate>
</Application.Resources> 
```

将模板选择器也添加为资源（在以下`ListView`级别或更高级别，即页面或应用程序级别）：

```
<ListView.Resources>
    <local:OrientationTemplateSelector x:Key="OrientationTemplateSelector" />
</ListView.Resources> 
```

现在您可以将其设置为[`ItemTemplateSelector`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.itemscontrol.itemtemplateselector.aspx)您的`ListView`：

```
<ListView ItemTemplateSelector="{StaticResource OrientationTemplateSelector}" ItemsSource="{Binding CustomItemsList}" /> 
```

# .net - 如何确定 .NET dll 是否合法来自 Microsoft？

> ID：15342857
> 
> 赞同：2
> 
> 时间：2013-03-11T15:48:26.123
> 
> 标签：.net

我怀疑我们正在使用的 asp.net mvc dll 已被修改，因为：

1.  Microsoft 符号服务器上没有匹配的符号信息。
2.  有问题的 dll 不是强命名的。

如何最终确认 dll 是否确实来自 Microsoft 并且没有更改？

PS - 我意识到这听起来像是一个安全问题，在这种情况下它绝对有效，但我的目的是找出我的前辈是否包含了维护项目所需的所有代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T16:31:41.527

"%ProgramFiles%\Microsoft SDKs\Windows\v6.0A\bin\sn.exe" -T

例如：

```
"C:\Program Files\Microsoft SDKs\Windows\v6.0A\bin\sn.exe" -T c:\Windows\Microsoft.NET\Framework\v4.0.30319\system.xml.dll 
```

将输出的公钥令牌与预期的公钥令牌进行比较。

对于它的价值，如果您引用一个强命名的 DLL，它将始终只加载具有相同强名称的 DLL（您可以绕过不同的版本，但这是一个单独的主题）。您可以通过查看您的 csproj 文件的源来验证正在使用的正确（合法）DLL，以确保正在使用合法的公钥令牌。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T16:49:41.013

如果程序集经过数字签名，那么您可以确定它的所有者。他们说一张照片值一千个字，所以这里...

选择程序集是问题并按照下图查看其属性

![在此处输入图像描述](../Images/858558d4521af21fbb1e39ad652fe207.png)

![在此处输入图像描述](../Images/c6de9294bd2b97f55c6c898bb34f6fce.png)

# crystal-reports - Crystal report pro 11 链接表时崩溃

> ID：15342860
> 
> 赞同：1
> 
> 时间：2013-03-11T15:48:43.530
> 
> 标签：crystal-reports, odbc, crystal-reports-xi

我在使用 Crystal 报表专业版 11.5.11.1470 SP 5 时遇到了一系列问题。当我创建一个新报表并添加多个表并只需按下链接选项卡以在表之间建立链接时，它会崩溃并关闭。我多次卸载该程序并再次安装它但徒劳无功。我整天用谷歌搜索这个问题，但一点运气都没有。技术问题日志显示以下内容：

```
Problem Event Name: APPCRASH
  Application Name: crw32.exe
  Application Version:  11.5.11.1470
  Application Timestamp:    492e9155
  Fault Module Name:    MFC71U.DLL
  Fault Module Version: 7.10.3077.0
  Fault Module Timestamp:   3e77fc29
  Exception Code:   c0000005
  Exception Offset: 00032e72
  OS Version:   6.1.7601.2.1.0.256.4
  Locale ID:    1033
  Additional Information 1: 1fc1
  Additional Information 2: 1fc163a1c57ae45571bce37d539b233f
  Additional Information 3: 12a3
  Additional Information 4: 12a3f41f6385dcf1330ec81c9df2618c 
```

# c++ - 无法使用 gdb 生成 shell

> ID：15342861
> 
> 赞同：3
> 
> 时间：2013-03-11T15:48:44.303
> 
> 标签：c++, c, bash, gdb

我在一个巨大的代码中有这个 C 函数：

```
void test() {
    char *arg[] = {"/bin/sh", 0};
    execve("/bin/sh", arg, 0);
} 
```

我正在尝试使用 gdb 调试此代码

```
(gdb) 调用 test()
进程 1948 正在执行新程序：/bin/dash
警告：所选架构 i386:x86-64 与报告的目标架构 i386 不兼容
文件架构无法识别。
在从 GDB 调用的函数中发生错误。
评估包含函数的表达式
（测试）将被放弃。
函数执行完毕后，GDB 会静默停止。

```

因此壳没有产卵。怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:41:18.797

gdb 不允许您执行具有不同架构的二进制文件，即使它在您的平台上兼容。如果您尝试从 64 位执行 32 位可执行文件，也会发生同样的情况。这也发生在 gdb 的最新版本 (7.5.1) 上。

如果您可以将代码编译为 32 位而不会导致其他问题，那将是一种解决方法。

根据 Hasturkun 的评论，这里有一个可用的[补丁](http://cygwin.com/ml/gdb-patches/2012-11/msg00247.html)。

# .htaccess - 永久重定向、www 重定向和 url 重写

> ID：15342863
> 
> 赞同：0
> 
> 时间：2013-03-11T15:48:45.990
> 
> 标签：.htaccess

我给了一个旧网站一个新的 CMS。现在我需要一个包含 3 个部分的 .htaccess，但它只适用于其中的 2 个：

1.  永久重定向
2.  www 重定向（这不起作用）
3.  url重写

现在我将解释更多。第 0 部分（仅适用于整体）

```
RewriteEngine On 
```

第 1 部分（永久重定向）我用来将旧 CMS 的 URL 重定向到新 CMS 的内容。

```
RewriteCond %{THE_REQUEST} !/de-old-content.html
Redirect permanent /de-old-content.html /old/content.html 
```

第 2 部分（www 重定向）我用来避免重复内容。

```
RewriteCond %{HTTP_HOST} ^website.de [NC]
RewriteRule ^(.*)$ http://www.website.de/$1 [L,R=301] 
```

第 3 部分（url 重写）将“old/content.html”转换为“index.php?adresse=old/content”

```
RewriteRule ^(.*)\.html$ index.php?adresse=$1 [l,qsa] 
```

[l,qsa] 只允许使用 $_GET。

可以合并这些部分吗？

如果我使用第 2 部分，它会显示正确的内容

[http://www.website.de/abc/def/ghi.html](http://www.website.de/abc/def/ghi.html)

但没有 www 它重定向到

[http://www.website.deabc/](http://www.website.deabc/)

我认为这部分肯定有错误。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:28:37.920

Redirect 是 mod_alias 的一部分，而 RewriteCond 和 RewriteRule 是 mod_rewrite 的一部分。因此，第 1 部分的 RewriteCond 实际适用于第 2 部分的 RewriteRule，这将使其无法正常工作。

最好避免同时使用重写和重定向。

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^website.de [NC]
RewriteRule ^(.*)$ http://www.website.de/$1 [L,R=301]

RewriteRule ^de-old-content\.html$ /old/content.html [L,R=301]

RewriteRule ^(.*)\.html$ index.php?adresse=$1 [L,QSA] 
```

PS。为了保持理智，在测试时使用 302。一旦一切正常，将它们更改为 301。由于您已经使用了 301，请同时清除浏览器缓存，以便从浏览器缓存中删除所有旧的 301。

# python - 为什么直方图是一样的[python + simplecv]

> ID：15342868
> 
> 赞同：1
> 
> 时间：2013-03-11T15:48:53.900
> 
> 标签：python, histogram, simplecv

我的问题是为什么以下代码中的两个直方图相同。因为图片确实发生了变化，第一次显示显示原始图片，第二次显示全黑图片。

我错过了使用 simpleCV 还是这可能是一个错误？

代码：

```
from itertools import product
from SimpleCV import Image
from SimpleCV import Color

if __name__ == '__main__':
    pass

def number_of_hues(picture):
    image = Image(picture)

    #convert the picture's space to HSV
    image = image.toHSV()
    image.show()
    original_histogram = image.histogram()

    (image_x_length, image_y_length) = image.size()
    for i,j in product(range(image_x_length), range(image_y_length)):
        image[i,j] = Color.BLACK

    image.show()

    new_histogram =  image.histogram()

    for o,n in zip(original_histogram, new_histogram):
        if o != n:
            print o,n 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T23:11:45.023

您最后一次从开发 github 存储库中拉取数据是什么时候？图像类的设置项调用中存在一个错误，该错误使图像无法直接设置。它是在几周前修复的。通常，您应该尽量避免直接循环图像对象并直接设置像素，因为它可能真的很慢。如果您认为自己发现了错误，请向我们的 github 存储库提交问题，我们会尽快解决。

# javascript - Angular Directive - 如何使用 ng-model 设置双向绑定

> ID：15342869
> 
> 赞同：5
> 
> 时间：2013-03-11T15:48:55.030
> 
> 标签：javascript, angularjs, angularjs-directive

我为 redactor（所见即所得的编辑器）编写了一个指令。经过一些黑客攻击后它可以工作，但我想找出正确的方法。对我来说主要的挑战是 ng-model 和 redactor jquery 插件之间的双向绑定。我从所见即所得的编辑器中收听 keyup 和命令事件并更新模型。我还从编辑器编辑器外部观察模型更改，以便我可以相应地更新编辑器编辑器。棘手的部分是：如何忽略反应器编辑器强加的 ng-model 更改（从绑定的前半部分开始）？

在以下代码中，它会记住编辑器编辑器更新到模型的最后一个值，如果模型的新值等于最后一个值，则忽略模型更改。我真的不确定这是否是实现这一目标的正确方法。在我看来，这是 Angular 中双向绑定的常见问题，必须有***正确***的方法。谢谢！

```
<textarea ui-redactor='{minHeight: 500}' ng-model='content'></textarea> 
```

Directive.coffee（对不起咖啡脚本）

```
angular.module("ui.directives").directive "uiRedactor", ->

  require: "ngModel"
  link: (scope, elm, attrs, ngModel) ->
    redactor = null
    updatedVal = null

    updateModel = ->
      ngModel.$setViewValue updatedVal = elm.val()
      scope.$apply()

    options =
      execCommandCallback: updateModel
      keydownCallback: updateModel
      keyupCallback: updateModel

    optionsInAttr = if attrs.uiRedactor then scope.$eval(attrs.uiRedactor) else {}

    angular.extend options, optionsInAttr

    setTimeout ->
      redactor = elm.redactor options

    #watch external model change
    scope.$watch attrs.ngModel, (newVal) ->
      if redactor? and updatedVal isnt newVal
        redactor.setCode(ngModel.$viewValue or '')
        updatedVal = newVal 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:23:29.473

Mark Rajcok 给出了解决方案（谢谢！）诀窍是使用 ngModel.$render() 而不是 $watch()。

采用

```
ngModel.$render = ->
  redactor?.setCode(ngModel.$viewValue or '') 
```

代替

```
scope.$watch attrs.ngModel, (newVal) ->
  if redactor? and updatedVal isnt newVal
    redactor.setCode(ngModel.$viewValue or '')
    updatedVal = newVal 
```

# c# - 在 C# 中编辑 Word 模板

> ID：15342871
> 
> 赞同：0
> 
> 时间：2013-03-11T15:48:58.460
> 
> 标签：c#, visual-studio-2010, ms-word

我被困在学校的一个项目中。

我有一个 word 模板，这是一个空文档，但它有一些格式，例如，每页有 25 行，字体为 Times New Roman，大小为 12。

我要做的就是打开这个模板，写入信息并保存。当我打开模板时，我应该会看到按照格式显示的文本。

我怎样才能做到这一点？我尝试了 DocX 库，但无法使用行间距功能。

你可以使用任何你想让它工作的东西。它必须在 C# 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:25:43.463

它需要是C#吗？也许他们希望您使用[vba](http://en.wikipedia.org/wiki/Visual_Basic_for_Applications)？

# jsf - JSF 2.1：h:dataTable 不刷新数据

> ID：15342872
> 
> 赞同：0
> 
> 时间：2013-03-11T15:48:59.613
> 
> 标签：jsf, jpa, datatable, persistence

我已经建立了一个系统，允许您查看 IT 设备的类别及其子类别。现在我希望能够通过 JPA 将子类别添加到父类别。

问题是我的实体被正确保存，但它没有出现在数据表中。我需要开始一个新会话以使其可见。

这是我的 xhtml 页面：

```
 <?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>Kategorie Tester</title>
        <h:outputStylesheet library="css" name="tables.css"/>
        <f:metadata>
            <f:event type="preRenderView" listener="#{kategorieController.beforeRenderLoadKat}"/>
        </f:metadata>
    </h:head>
    <h:body>
        <h:form>
            <h:dataTable value="#{kategorieController.reload()}"
                         var="kat"
                         styleClass="katview">
                <h:column>
                    <f:facet name="header">
                        Kategorie
                    </f:facet>
                    <h:outputText value="#{kat.titel}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        Unterkategorie
                    </f:facet>
                    <h:selectManyCheckbox layout="pageDirection">
                        <f:selectItems value="#{kat.unterkategorieList}"
                                       var="sub"
                                       itemLabel="#{sub.titel}"
                                       itemValue="#{sub.idunterkategorie}"/>
                    </h:selectManyCheckbox>
                </h:column>
            </h:dataTable>
            <h:panelGroup>
                <h:inputText value="#{kategorieController.titel}"/>
                <h:selectOneMenu value="#{kategorieController.kategorie.idkategorie}">
                    <f:selectItems id="kategorie" value="#{kategorieController.allKats}"
                                   var="kati"
                                   itemLabel="#{kati.titel}"
                                   itemValue="#{kati.idkategorie}"/>
                </h:selectOneMenu>
                <h:commandButton value="Add" action="#{kategorieController.addSub()}"/>
            </h:panelGroup>
        </h:form>
    </h:body>
</html> 
```

这些是我的控制器，用于持久化和重新加载数据：

类别控制器：

```
package controller;

import java.io.Serializable;
import java.util.List;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.event.ComponentSystemEvent;
import javax.inject.Inject;
import model.Kategorie;
import model.Unterkategorie;

@ManagedBean
@SessionScoped
public class KategorieController implements Serializable {

    @Inject
    private KategorieService katService;
    private List<Kategorie> allKats;
    // Hinzufügen
    private Unterkategorie subkategorie;
    private Kategorie kategorie;
    private String titel;

    public void beforeRenderLoadKat(final ComponentSystemEvent event) {
        if (allKats != null) {
            allKats.clear();
        }
        allKats = katService.getAll();
        subkategorie = new Unterkategorie();
        kategorie = new Kategorie();
    }

    public void addSub() {
        subkategorie.setKategorieId(kategorie);
        subkategorie.setTitel(titel);
        katService.addSub(this.subkategorie);   
    }
// GETTERS AND SETTERS

} 
```

分类服务：

```
package controller;

import java.io.Serializable;
import java.util.List;
import javax.ejb.Stateless;
import javax.ejb.TransactionAttribute;
import javax.ejb.TransactionAttributeType;
import javax.inject.Inject;
import model.Kategorie;
import model.Unterkategorie;

@Stateless
@TransactionAttribute(TransactionAttributeType.REQUIRED)
public class KategorieService implements Serializable {

    @Inject
    private KategorieFacade katFacade;

    public List<Kategorie> getAll() {
        return katFacade.getAll();
    }

    public List<Kategorie> addSub(final Unterkategorie sub) {
        return katFacade.addSub(sub);
    }

} 
```

类别外观：

```
package controller;

import java.util.List;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.TypedQuery;
import model.Kategorie;
import model.Unterkategorie;

public class KategorieFacade {

    @PersistenceContext
    private EntityManager em;

    public List<Kategorie> getAll() {
        TypedQuery<Kategorie> query = em.createNamedQuery("Kategorie.findAll", Kategorie.class);
        return query.getResultList();
    }

    public List<Kategorie> addSub(final Unterkategorie sub) {
        em.persist(sub);
        em.flush();
        return getAll();
    }
} 
```

任何帮助表示赞赏！

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:03:10.987

为什么不尝试在`addSub()`方法中刷新集合：

```
public void addSub() {
    subkategorie.setKategorieId(kategorie);
    subkategorie.setTitel(titel);
    allKats.clear();
    allKats.addAll(katService.addSub(this.subkategorie));   
} 
```

并且与原始问题完全无关：您正在交换概念`Service`并`Facade`相互交换。

但我建议不要放入`getAll()`into `addSub()`，而是`void`在插入后从客户端再次调用服务。

# c# - 从命令行检索 regsvr32 执行的结果（没有消息框/弹出窗口）

> ID：15342874
> 
> 赞同：0
> 
> 时间：2013-03-11T15:49:04.563
> 
> 标签：c#, command-line, regsvr32

C# WinForms 应用程序 (.NET 4)

从组合（下拉）菜单中选择目录路径，然后将其包含在以下命令行语句中。

```
for %f in ("< path >\*.ocx" "< path >\*.dll") do regsvr32 /s "%f" 
```

其中**<path>**是目录路径。

这执行得很好。我想检索注册成功消息（或错误），而用户不必在显示的弹出/消息框中单击确定一千次。显然，静音 (/s) 开关摆脱了弹出窗口。

在用户在屏幕上看到任何内容（除了应用程序本身）的情况下，检索结果的最佳方法是什么？

这就是我现在所拥有的，

```
public void reg_in_source_2()
{
    ProcessStartInfo cmdStartInfo = new ProcessStartInfo();
    cmdStartInfo.FileName = @"C:\Windows\System32\cmd.exe";
    cmdStartInfo.RedirectStandardOutput = true;
    cmdStartInfo.RedirectStandardError = true;
    cmdStartInfo.RedirectStandardInput = true;
    cmdStartInfo.UseShellExecute = false;
    cmdStartInfo.CreateNoWindow = true;

    Process cmdProcess = new Process();
    cmdProcess.StartInfo = cmdStartInfo;
    cmdProcess.ErrorDataReceived += cmd_Error;
    cmdProcess.OutputDataReceived += cmd_DataReceived;
    cmdProcess.EnableRaisingEvents = true;
    cmdProcess.Start();
    cmdProcess.BeginOutputReadLine();
    cmdProcess.BeginErrorReadLine();

    cmdProcess.StandardInput.WriteLine(@"for %%f in (""" + reference.source_folder + @"\*.ocx"" " + reference.source_folder + @"\*.dll"") do regsvr32 ""%%f""");
    cmdProcess.StandardInput.WriteLine("exit");

    cmdProcess.WaitForExit();
}

public void cmd_DataReceived(object sender, DataReceivedEventArgs e)
{
    reference.cmd_replies.Add(e.Data);
}

public void cmd_Error(object sender, DataReceivedEventArgs e)
{
    reference.cmd_replies_errors.Add(e.Data);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:09:54.813

与其尝试将批处理脚本写入 cmd 进程，不如使用它`Directory.GetFiles("c:\\somepath\\", "*.dll;*.ocx")`来获取要注册的文件 -*然后*用于`process.start`启动`regsvr32`进程（使用`/silent`参数）并检查返回码以了解您是否成功。

如果您尝试在脚本中执行此操作，您将只获得 cmd 进程的返回码，而不是您感兴趣的 regsvr32 进程的返回码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:08:10.457

请通过设置 Environment.Exit(code) 从控制台应用程序返回退出代码。

您可以将退出代码设置为此[stackoverflow 答案中的链接](https://stackoverflow.com/a/156134/1012641)

默认值为 0（零），表示进程成功完成。使用非零数字表示错误。在您的应用程序中，您可以在枚举中定义自己的错误代码，并根据场景返回相应的错误代码

所有错误代码都可以映射到它们的状态消息，然后可以记录这些消息。

# .net - 为什么从不调用 NET 垃圾收集器？

> ID：15342875
> 
> 赞同：4
> 
> 时间：2013-03-11T15:49:04.730
> 
> 标签：.net, garbage-collection, finalizer

我正在开发一个内存消耗存在问题的应用程序。如果用户在应用程序中单击的时间足够长，则会以 OutOfMemoryException 结束。

我用“ANTS Memory Profiler”对应用程序进行了很长时间的分析，我认为没有“经典”内存泄漏（例如，防止对象被垃圾收集的事件处理程序）。

但是所有保留在内存中的对象都有一个共同点——它们直接或间接地使用实现终结器的标准.NET 控件（例如TextBox、Numberbox）。在“ANTS Memory Profiler Instance Retention Graph”中，我可以看到唯一持有控件引用的实例是 .NET Finalizer Queue。

链接保留图（我没有足够的声誉直接发布图像:-)）--> [http://i50.tinypic.com/2d6r6nn.png](http://i50.tinypic.com/2d6r6nn.png)

因此，我调查了终结器线程中死锁的方向（参见[http://dotnetdebug.ne](http://dotnetdebug.net/2005/06/22/blocked-finalizer-thread/) ​​t/2005/06/22/blocked-finalizer-thread/ ），但找不到死锁的迹象。此外，反对死锁理论的是，在触发 GC.Collect() 的内存分析器的内存快照之后，视图被垃圾收集 - 分别执行它们的终结器并且一切都很好。

所以，这看起来像是带有 Finalizer 的 .net 对象的正常生命周期，对吧？但是在我的应用程序中，我可以单击直到出现 OutOfMemoryException 并且垃圾收集器永远不会运行！

处理该问题的最后一次尝试是使用 GC.AddMemoryPressure()，因为在视图中有很多位图，它们分配了很多非托管代码。但这也不能促使垃圾收集器收集空闲内存。

所以，我认为应用程序中的一个概念本质上是错误的，它阻止了 GC 释放内存，但我完全不知道是什么。

有没有人经历过类似的经历并有任何线索？

此致

和我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T15:55:46.193

`OutOfMemoryException`有时会说谎。有时它意味着“我无法获得非托管句柄” - 它并不*总是*与内存相关。问题是通常很难说出*为什么*会失败，“内存不足”可能是一个合理的猜测。

*好像*很多事情都没有及时处理。处理它们会调用它们的自定义代码，以急切地主动释放它们未损坏的句柄。

相反，GC主要是由内存压力触发的。如今，PC 可以有大量内存，但会用完非托管句柄。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:04:29.913

在[MODEL-VIEW-VIEWMODEL (MVVM)](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)中，如果您使用特殊的第三方引用，则可以将对象清除为显式控件。也许你只需要包括 `object.Dispose`和`object = null`

[何时在 MVVM Light 中处理 ViewModel](https://stackoverflow.com/questions/7036873/when-to-dispose-viewmodel-in-mvvm-light)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:09:44.730

可能有很多东西

这只是一个让我记忆犹新的怪事

在集合中检查 = 值，如果是则返回。

查找对 NotifyPropertyChanged 的​​不必要调用。
我有一个案例，我正在通过公共属性加载 ObservableCollection，它正在排队多个 NotifyPropertyChanged，这导致内存不足。
然后我加载了私有变量，完成后只调用了一次 NotifyPropertyChanged，它修复了内存不足的问题。

# emacs - 如何自动（重新）编译 ELPA 包？

> ID：15342877
> 
> 赞同：14
> 
> 时间：2013-03-11T15:49:05.840
> 
> 标签：emacs, compilation, elisp, elpa

我现在通过 MELPA 和 Marmalade 尽可能多地安装，并且使用 git 管理我的 ~/.emacs.d。但是，我有 git ignore *.elc 文件。

这意味着当我在一个系统上安装一个软件包然后开始使用另一个系统时，`git pull`只会给我 *.el 文件。使用这些文件通常比使用 *.elc 慢。

我尝试将以下内容添加到 ~/.emacs.d/init.el：

```
;; load the packages we've installed. Note that package-install
;; byte-compiles the packages, but .elc is ignored by git so we force recompilation here
(byte-recompile-directory (expand-file-name "~/.emacs.d/elpa") 0)
(package-initialize) 
```

不幸的是，这并不等同于 package.el 完成的编译。例如，如果我安装 emacs-eclim，package.el 不会编译 emacs-eclim/company-emacs-eclim.el，我会收到以下错误：

```
Leaving directory `/home/wilfred/.emacs.d/elpa'

Compiling file /home/wilfred/.emacs.d/elpa/emacs-eclim-20130310.1237/company-emacs-eclim.el at Mon Mar 11 15:40:01 2013
Entering directory `/home/wilfred/.emacs.d/elpa/emacs-eclim-20130310.1237/'
company-emacs-eclim.el:35:1:Error: Cannot open load file: eclim
Warning: reference to free variable `multiple-cursors-mode'
Warning: reference to free variable `mc--read-char'
Warning: assignment to free variable `mc--read-char'
Warning: reference to free variable `multiple-cursors-mode'
Warning: reference to free variable `mc--read-quoted-char'
Warning: assignment to free variable `mc--read-quoted-char'
Warning: reference to free variable `rectangular-region-mode'
Warning: reference to free variable `rectangular-region-mode' 
```

如何使 Emacs 只对与 package.el 相同的文件进行字节编译？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T14:53:06.503

package.el 实际上使用完全相同的方法，只是在启动时重新编译使错误更加明显。

使用的函数是`package--make-autoloads-and-compile`，它调用：

```
(byte-recompile-directory pkg-dir 0 t) 
```

所以问题中的原始代码是正确的。但是，要重新编译尚未编译的目录，您可以执行以下操作：

```
(require 'dash)
(require 'f)

(defun was-compiled-p (path)
  "Does the directory at PATH contain any .elc files?"
  (--any-p (f-ext? it "elc") (f-files path)))

(defun ensure-packages-compiled ()
  "If any packages installed with package.el aren't compiled yet, compile them."
  (--each (f-directories package-user-dir)
    (unless (was-compiled-p it)
      (byte-recompile-directory it 0))))

(ensure-packages-compiled) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-12T14:04:34.977

我建议不要将包保存在版本控制中（您不会将 .o 文件置于版本控制之下，对吗？）。这是我用来保持我的包同步的代码：

```
(setq jpk-packages
      '(
        ac-dabbrev
        ...
        yasnippet
        ))

(package-initialize)
(add-to-list 'package-archives
             '("melpa" . "http://melpa.milkbox.net/packages/"))
(add-to-list 'package-archives
             '("org" . "http://orgmode.org/elpa/"))

(when (not package-archive-contents)
  (package-refresh-contents))

(dolist (pkg jpk-packages)
  (when (and (not (package-installed-p pkg))
           (assoc pkg package-archive-contents))
    (package-install pkg)))

(defun package-list-unaccounted-packages ()
  "Like `package-list-packages', but shows only the packages that
  are installed and are not in `jpk-packages'.  Useful for
  cleaning out unwanted packages."
  (interactive)
  (package-show-package-list
   (remove-if-not (lambda (x) (and (not (memq x jpk-packages))
                            (not (package-built-in-p x))
                            (package-installed-p x)))
                  (mapcar 'car package-archive-contents)))) 
```

我将上面的内容放在 init.el 中（当然是在版本控制之下），它会在 emacs 启动时安装任何尚不存在的包。更新是从缓冲区`package-list-packages`创建的。 `package-list-unaccounted-packages`显示所有已安装但不在我的`jpk-packages`列表中的软件包，并且可以轻松删除我从列表中取出的软件包。

要回答您的具体问题，我只需删除 elpa 目录并重新安装所有内容（使用上面的代码）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-02-24T20:07:12.630

对于“如何自动重新编译*任何*过时的 .elc 文件”这个更一般的问题，我喜欢的解决方案是使用[https://github.com/tarsius/auto-compile](https://github.com/tarsius/auto-compile)

我曾经有一些自定义解决方案涵盖了我遇到的大多数情况，但是这个库涵盖了我正在做的所有事情以及更多。只需在加载其他任何内容之前对其进行初始化，然后您就可以排序了。

至于不编译最初未编译的文件的原始问题，这就是`0`参数的`byte-recompile-directory`作用，因此您明确要求这种行为。默认行为是仅重新编译现有过时的 .elc 文件，因此您应该简单地删除该 .elc 文件`0`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-11T19:33:44.057

我不知道您关于字节编译包的具体问题的答案与完全相同的方式`package.el`。

但是，对于您在通过 Melpa 或 marmalade 安装扩展时在 git 中维护 emacs 配置目录的更普遍的问题，我建议您看一下 palm [，](https://github.com/rdallasgray/pallet)它旨在解决这个问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-28T14:13:03.427

当我需要手动重新编译以前使用 elpa 安装的软件包时，（字节编译文件）对我有用。

特别是对于这种情况：[https ://github.com/yjwen/org-reveal/issues/76t](https://github.com/yjwen/org-reveal/issues/76t)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-24T19:34:41.857

您遇到的问题只是在初始化包之前对文件进行字节编译。如果您切换两条线，您的问题应该会消失。您得到的错误 ( `Cannot open load file: eclim`) 是因为`~/.emacs.d/elpa/emacs-eclim-20130310.1237/`还没有在您的 中`load-path`，并且`package-initialize`会将其添加到您的`load-path`（以及其他一些东西）中。

# image - 图像和 matlab 和 DCT 变换和 jpeg

> ID：15342879
> 
> 赞同：0
> 
> 时间：2013-03-11T15:49:13.830
> 
> 标签：image, matlab, jpeg

我对matlab了解不多。
我有一张图片（*png*格式）。如何将格式更改为*jpeg*？我需要一个命令来对图像进行 DCT

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:55:52.257

如果您只想将*png*转换为*jpeg*，您可以执行以下操作：

```
imwrite( imread( [imFilename, '.png'] ), [imFilename, '.jpg'] ); 
```

# mongodb - Symfony2 可重用的可排序列表

> ID：15342881
> 
> 赞同：2
> 
> 时间：2013-03-11T15:49:17.790
> 
> 标签：mongodb, symfony

我已经将 Symfony1 Cookbook [http://symfony.com/legacy/doc/cookbook/1_2/en/sortable](http://symfony.com/legacy/doc/cookbook/1_2/en/sortable)的这个条目重写为 Symfony2。我的第一个目标是经典的可排序列表：

![在此处输入图像描述](../Images/5237726a60edf6922cdaa836b9807a8b.png)

所有文档（MongoDB）都有一个整数类型的位置字段，它们将显示的顺序。

我创建了一个服务类 Sortable，其中有以下方法：

```
class Sortable
{
    //Return the position of the document
    public function getByPosition($position = 1, $document, $site, $item = null){ /**/ }

    //Return all elements sorted by position
    public function getAllByPosition($document, $site){/**/}

    //Return the max position of the items within a parent item
    public function getMaxPosition($document, $site, $parent = null){/**/}

    //Swap the position between $itemOne and $itemTwo
    public function swapWith($itemOne, $itemTwo, $document){/**/}

    //Set the new position => +1
    public function executeUp($document, $id){/**/}

    //Set the new position => -1
    public function executeDown($document, $id){/**/}

    //Persist document with the new position
    public function save($item, $document){/**/}
} 
```

这很好用，但主要问题是这个类很难重用。

-$document var 是数据库中 Document 的名称，例如在**createQueryBuilder('MyBundle'.$document)上使用**

-$site var 是我的应用程序的站点，因为每个用户都有一个站点。

-$parent var 是 $document 类型，它是相同类型文档的父级。

对我来说问题是，这很难重用，我必须在控制器操作中调用上面的所有方法，然后检查 Twig 模板中的位置。我想实现一个树枝扩展，它调用我的服务并执行我在控制器和树枝中所做的所有逻辑。此外，它适用于任何文档。

我怎么能得到这个？

# php - php和CSV文件上传，文件有病毒怎么办？

> ID：15342884
> 
> 赞同：0
> 
> 时间：2013-03-11T15:49:21.910
> 
> 标签：php, mysql, csv

我使用此代码将 CSV 文件上传到我的服务器文件夹并提取要插入数据库的数据。如果用户不小心上传了带有病毒的 CSV 文件怎么办？由于系统不执行文件，系统/服务器是否感染了病毒？

```
$name = ($_FILES['fileuploaded']['name']);  
$tmp_name = ($_FILES['fileuploaded']['tmp_name']);
$_SESSION['username']=$username;    
if($name){
   $location = "files/$name";
   move_uploaded_file($tmp_name,$location);
   $file_handle = fopen("files/".$name, "r");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:53:04.400

“如果用户不小心上传了带有病毒的 CSV 文件怎么办？”。我会更关心“如果用户故意上传带有病毒的 CSV 文件怎么办”这个问题。由于您没有检查文件类型，因此有人可能会上传一个名为 bad.php 的文件，并猜测您可能会将它放在一个名为 files 的文件夹中，然后他们可以执行它并造成各种损害。

# netbeans - javafx 如何比较两种颜色并知道它们相同或不同？

> ID：15342888
> 
> 赞同：0
> 
> 时间：2013-03-11T15:49:37.930
> 
> 标签：netbeans, javafx

我正在为学校做一个项目，我们必须制作游戏记忆，我想你们都知道这个游戏。我们的问题是我们不明白 javafx 如何比较两张“卡片”

我们现在的代码是 4 张卡片，你可以点击它们，它们会变成一种颜色，当你点击它们时它们会变回来。你们能帮帮我吗？

我当前的代码是这样的：

```
rectangle:rectangle1 = Rectangle { 
    width: 50 
    height: 50 
    x: 10 
    y: 50 
    arcWidth: 10 
    arcHeight: 10 
    fill: bind Color.web(kleur1) 
    onMouseClicked: function(event) { 
        if (kleur1 == "red"){ 
            kleur1 = "blue"
        } 
        else if (kleur1 == "blue") { 
            kleur1 = "red"} 
        } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:06:46.683

看来您需要检查颜色是否相等

```
 if(kleur1.equals("blue") && kleur3.equals("blue"))
 {
      rectangle1.setVisible(false);
      rectangle3.setVisible(false);
 } 
```

并像上面一样设置可见

# jquery - 图片库上一个和下一个按钮不起作用

> ID：15342889
> 
> 赞同：-1
> 
> 时间：2013-03-11T15:49:41.857
> 
> 标签：jquery, image-gallery

嗨，我有一个简单的缩略图库，包含两行 5 张图片，总共 10 张，我的上一个和下一个按钮不起作用，我不知道为什么它们不起作用？我想当您单击上一个或下一个按钮时，它会相应地移动图库部分。这是我所拥有的链接：http://jsfiddle.net/jsavage/YRTzG/21/[问题] 任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:02:01.550

请看图像，在左上角的黑色选中矩形，表明您忘记添加 JQuery 库文件

![](../Images/13c6605dc4b737fc85e38e115e2e4143.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:00:47.770

实际上，您忘记包含 jquery 库文件。在您的代码中包含以下行...

```
<script type="text/javascript"      
    src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
</script> 
```

# jquery - jQuery选择框插件在屏幕底部向上打开？

> ID：15342893
> 
> 赞同：1
> 
> 时间：2013-03-11T15:49:48.820
> 
> 标签：jquery, drop-down-menu

目前我遇到了以下问题：

我正在为漂亮的选择框使用以下插件：[http ://www.bulgaria-web-developers.com/projects/javascript/selectbox/](http://www.bulgaria-web-developers.com/projects/javascript/selectbox/)

它工作得很好，除了下拉菜单位于屏幕底部附近的情况 - 在这种情况下，我需要在选择框上方显示选项而不是经典行为（如下）。

我正在尝试解决 _openSelectbox 函数，但仍然没有成功......

有任何想法吗？

# javascript - 使用滚动条滚动其他滚动条

> ID：15342894
> 
> 赞同：3
> 
> 时间：2013-03-11T15:49:49.163
> 
> 标签：javascript, jquery, html, scrollbar

我有 3 个带滚动条的 div。如果我在 div 1 中滚动，我想以相反的方向滚动 div 2 和 3。滚动的距离应该是 div 1 距离的一半。

这就是我现在拥有的（一小部分，其余部分在 jsfiddle 中），适用于 1 div。

```
$("#textBox1").scroll(function () {
        console.log("scroll 1");
        var offset = $("#textBox1").scrollTop() - scrollPosTBox1;
        var half_offset = offset/2.0;

        disable1 = true;

        if(disable2 == false) {
            $("#textBox2").scrollTop(scrollPosTBox2 - half_offset);
        }
        if(disable3 == false) {
            $("#textBox3").scrollTop(scrollPosTBox3 - half_offset);
        }    
        disable1 = false;

    }); 
```

但是，如果我尝试为其他 2 个 div 获得相同的结果，那么我将无法再滚动任何内容。这是因为例如 div 1 触发 div 2 并且 div 2 触发回 div 1。我试图用禁用代码解决这个问题，但它没有帮助。

有人能帮我吗？

[http://jsfiddle.net/XmYh5/1/](http://jsfiddle.net/XmYh5/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T17:25:54.577

对@EmreErkan 和@Simon 的努力没有不尊重。这是一个无点击版本。

```
var $boxes = $("#textBox1,#textBox2,#textBox3"),
    active;

$boxes.scrollTop(150);

// set initial scrollTop values
updateScrollPos();

// bind mouseenter: 
// 1) find which panel is active 
// 2) update scrollTop values

$boxes.mouseenter(function () {
    active = this.id;
    updateScrollPos();
});

// bind scroll for all boxes
$boxes.scroll(function (e) {

    $this = $(this);

    // check to see if we are dealing with the active box
    // if true then set scrolltop of other boxes relative to the active box
    if(this.id == active){

        var $others = $boxes.not($this),
            offset = $this.scrollTop()-$this.data("scroll"),
            half_offset = offset / 2;

        $others.each(function(){
            $this = $(this);
            $this.scrollTop($this.data("scroll") - half_offset);
        });
    }

});

// utility function: 
// assign scrollTop values element's data attributes (data-scroll)

function updateScrollPos() {
    $boxes.each(function(){
        $this = $(this);
        $this.data("scroll",$this.scrollTop());
    });
} 
```

[小提琴](http://jsfiddle.net/XmYh5/16/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:05:55.333

您可以使用变量来确定活动文本框，`.mousedown()`如果它是活动的，则可以使用；

```
var activeScroll = '';

$("#textBox1").on('mousedown focus mouseenter', function () {
    activeScroll = 'scroll1';
}).scroll(function () {
    if (activeScroll == 'scroll1') {
        console.log("scroll 1");
        var offset = $("#textBox1").scrollTop() - scrollPosTBox1;
        var half_offset = offset / 2.0;

        $("#textBox2").scrollTop(scrollPosTBox2 - half_offset);
        $("#textBox3").scrollTop(scrollPosTBox3 - half_offset);
    }
}); 
```

您可以在此处查看更新的[jsFiddle](http://jsfiddle.net/karalamalar/XmYh5/12/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T17:22:09.973

终于得到了一个动态的解决方案，比我想象的要复杂，但我想我明白了：

[http://jsfiddle.net/XmYh5/14/](http://jsfiddle.net/XmYh5/14/)

```
var initialTop = 150,
    factor = 2;

    $(".textBox")
        .addClass('disabled')
        .scrollTop(initialTop)
        .on('scroll', function () {
            var $this = $(this);

            if(!$this.is('.disabled')) {
                this.lastOffset = this.lastOffset || initialTop;

                var offset = $this.scrollTop(),
                    step = (offset - this.lastOffset) / factor;

                $this.siblings().each( function() {
                    var $this = $(this),
                        offset = $this.scrollTop() - step;

                    $this.scrollTop(offset);
                    this.lastOffset = offset;
                });

                this.lastOffset = offset;
            }
        })
        .on('mouseenter', function() {
            $(this).removeClass('disabled').siblings().addClass('disabled');
        }); 
```

# process - 邪恶的向导将参数传递给步骤

> ID：15342897
> 
> 赞同：1
> 
> 时间：2013-03-11T15:49:54.030
> 
> 标签：process, wizard

我想为下达客户订单制定一个流畅的流程。我觉得完成这项工作的最佳工具是向导——除非有其他建议？

我需要将参数传递给我的向导中的后续步骤。

我的控制器如下所示：

```
include Wicked::Wizard
steps :item, :customization, :upsell

def show
# @order_session_id = params[:order_session_id]

@order = Order.new
@order.order_session_id = params[:order_session_id]

case step
when :item
    @items = Item.all # change with group...
when :customization
    # item = Item.find(@order.item_id)
    # item = Item.find(params[:item_id])
    item = Item.find(1)
    @customizations = item.customizations.split("|")
when :upsell
    @upsells = Upsell.find_all_by_group_id(item.group_id)
end

render_wizard
end

def update
    @order_session_id = params[:order_session_id]
    @order.attributes = params[:order]
    render_wizard @order
end 
```

item 的视图如下所示：

```
<%= form_for @order, url: wizard_path(:customization), :method => :get do |f| %>

  <table border="1">
    <% @items.each do |item| %>
    <tr>        
        <td class="item_selection" onclick="$(this).children('input').attr('checked', 'checked');return false;">
            <%= f.label :item_id, "#{item.name}" %>
            <%= f.radio_button(:item_id, item.id) %>
        </td>
    </tr>
    <% end %>
  </table>  

  <div class="actions">
    <%= f.submit "Continute" %>
  </div>

<% end %> 
```

我需要将选定的 item_id 传递给自定义步骤，以便向导的下一部分可以工作。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-16T17:33:18.370

您可以在 step 参数之后的 url 中传递参数。

```
wizard_path(:step_1, item: item) 
```

# google-app-engine - 无论如何用 GAE 的搜索 API 进行 GROUP BY 和 COUNT 吗？

> ID：15342899
> 
> 赞同：0
> 
> 时间：2013-03-11T15:49:59.940
> 
> 标签：google-app-engine, gae-search

我刚开始使用 GAE 的搜索 API，我正在寻找相当于 SQL group by count 语句的功能。目前是否存在类似的情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:07:22.923

As @Daniel Roseman noted, GROUP BY does not apply for the full-text Search API.

On [Datastore](https://developers.google.com/appengine/docs/java/datastore/queries) there is count (but it's very expensive) but no GROUP BY.

[Google CLoud SQ](https://developers.google.com/cloud-sql/)L: it's basically a managed MySql instance - both GROUP BY and COUNT are available.

[Google Big Query](https://developers.google.com/bigquery/) is a distributed on-demand map-reduce system with [SQL-like query language](https://developers.google.com/bigquery/docs/query-reference). It has both GROUP BY and COUNT. They are both expensive as queries are charged by rows x columns scanned (no indexes exist). BQ is very powerful (and fast) but exporting data to it from GAE is tedious as there is no direct API.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:11:33.913

不，这根本不是它的用途。它是一个全文搜索 API，不支持分组或其他关系概念。

# php - 包含的 PHP 文件中的 Javascript

> ID：15342900
> 
> 赞同：0
> 
> 时间：2013-03-11T15:50:03.327
> 
> 标签：php, javascript, include

我有一个包含 javascript 的 php 文件（一个表单）来检查是否所有输入都已填写。当我直接查看 php 文件时，js 工作得很好，但是当我在另一个页面中包含 PHP 文件时，javascript 不再工作。

我的 JavaScript 代码：

```
<script type="text/javascript" src="../js/modernizr.js"></script>
<script type="text/javascript"> 
window.onload = function(){
    document.getElementById("topField").setAttribute("autocomplete","off");
    }

window.onload = function() {
    // get the form and its input elements
    var form = document.forms[0],
        inputs = form.elements;
    // if no autofocus, put the focus in the first field
    if (!Modernizr.input.autofocus) {
        inputs[0].focus();
    }
    // if required not supported, emulate it
    if (!Modernizr.input.required) {
        form.onsubmit = function() {
            var required = [], att, val;
            // loop through input elements looking for required
            for (var i = 0; i < inputs.length; i++) {
                att = inputs[i].getAttribute('required');
                // if required, get the value and trim whitespace
                if (att != null) {
                    val = inputs[i].value;
                    // if the value is empty, add to required array
                    if (val.replace(/^\s+|\s+$/g, '') == '') {
                        required.push(inputs[i].name);
                    }
                }
            }
            // show alert if required array contains any elements
            if (required.length > 0) {
                alert('The following fields are required: ' +
                    required.join(', '));
                // prevent the form from being submitted
                return false;
            }
        };
    }
}

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:30:57.583

这是对以后发现此问题的任何人的解释。在 javascript 中，您只能将单个函数附加到事件处理程序。如果要附加更多，则需要将它们链接起来。几乎所有的 javascript 框架/库都有某种方法来处理事件链。

Javascript 允许您将函数视为变量。因此，您可以将旧的 onload 函数分配给变量，然后稍后在新的 onload 函数中调用它。

如果您不使用框架，则可以执行类似的操作来处理事件链。

```
function addLoadEvent(func) {
  var oldonload = window.onload;
  if (typeof window.onload != 'function') {
    window.onload = func;
  } else {
    window.onload = function() {
      if (oldonload) {
        oldonload();
      }
      func();
    }
  }
} 
```

您可以使用以下方式调用它：

```
addLoadEvent(function(){
  // Some code here
}); 
```

# jsf - h:commandLink 被rich:datascroller 破坏

> ID：15342903
> 
> 赞同：0
> 
> 时间：2013-03-11T15:50:07.090
> 
> 标签：jsf, richfaces

我正在使用richfaces 3.2.3，并且在以下方面遇到了一个有趣的错误：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
            xmlns:s="http://jboss.com/products/seam/taglib"
            xmlns:ui="http://java.sun.com/jsf/facelets"
            xmlns:f="http://java.sun.com/jsf/core"
            xmlns:h="http://java.sun.com/jsf/html"
            xmlns:rich="http://richfaces.org/rich" xmlns:a4j="http://richfaces.org/a4j">
<f:subview>
    <a4j:outputPanel id="commentariesAjaxContainer" ajaxRendered="true">
        <rich:dataTable id="commentaries" var="commentary"
                        value="#{someBean.commentaries}" rows="10" rowClasses="odd-row, even-row"
                        styleClass="stable"
                        reRender="commentariesDS">
            <f:facet name="header">
                <h:outputText
                        value="#{messages['commentaries.title']}"/>
            </f:facet>

            ...
            <rich:column width="10%" styleClass="rich-grid-edit-column">
                <f:facet name="header">
                    <h:outputText
                            value="#{messages['historic.commentary.action']}"/>
                </f:facet>
                <h:panelGroup>
                    <h:commandButton id="commentaryactioneditLnk" styleClass="image-edit-copy-delete"
                                     image="/img/edit16x16px.png"
                                     value="#{messages['historic.commentary.action.edit']}"
                                     action="#{someBean.editCommentary()}"/>
                </h:panelGroup>
            </rich:column>
        </rich:dataTable>
        <rich:datascroller fastControls="hide"
                           id="commentariesDS" for="commentaries" renderIfSinglePage="false">
            <ui:include src="layout/rich-datascroller-facets.xhtml"/>
        </rich:datascroller>
    </a4j:outputPanel>

    <h:commandLink action="#{someBean.createCommentary()}">
        <h:panelGrid columns="2">
            <h:panelGroup>
                <h:outputText styleClass="image-link-label-medium"
                              value="#{messages['customerCare.historic.commentary.action.create']}"/>
            </h:panelGroup>
            <h:panelGroup>
                <h:graphicImage value="img/buttons/add_a_comment_icon-24x24.png"/>
            </h:panelGroup>
        </h:panelGrid>
    </h:commandLink>
</f:subview>
</ui:composition> 
```

因此，命令链接显示为带有嵌套标签和图标的链接。在我单击`rich:datascroller`按钮之前它工作正常 - 通过 ajax 请求重新呈现数据表后，我的链接被损坏 - 所有嵌套元素都成为它的兄弟姐妹，而不是孩子（因此 - 链接变为空）。更奇怪`h:commandLink`的是，它不是rich:dataTable 的孩子！

你能帮我解决这个问题吗？很高兴知道这个问题的根源是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:27:53.807

我认为问题出在 oncomplete 调用中，因为它正在“据我了解”页面中进行一些更改：

```
<rich:datascroller oncomplete="_globalTsmModule.renderGlobalMessagesBlock();"... 
```

您可以为此组件使用 ajax 状态，例如：

```
<a4j:status id="a4jstatus" onstop="_globalTsmModule.renderGlobalMessagesBlock();"/> 
```

# asp.net-mvc-4 - ASP.net MVC SimpleMembership

> ID：15342906
> 
> 赞同：4
> 
> 时间：2013-03-11T15:50:19.553
> 
> 标签：asp.net-mvc-4, guid, simplemembership

我正在使用 SimpleMembership，并将它连接到我的用户表，一切正常。但是当我尝试将 UserId 从 int 更改为 guid 时，出现错误：

```
Cannot convert type 'System.Guid' to 'int' 
```

对于这些代码行：

```
 WebSecurity.CreateUserAndAccount(model.Email, model.Password,
 new
 {
     Name = model.Name,
     Surname = model.Surname,
     Gender = model.Gender,

 }
); 
```

在表 pages_OAuthMembership 和 pages_Membership 中，我已将 UserId 从 int 更改为 uniqueidentifier （代表 guid），但没有帮助。

那么我可以为用户 ID 提供指南吗？如果可以，如何？如果我不能使用 guid 我可以使用 BIGINT 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T09:27:36.073

SimpleMembershipProvider 的想法是它很容易实现，因为我通常开箱即用。但是，您必须与它的用户表相处。如果你想使用自己的用户表，也许还有一些自制的密码加密/解密等，你应该创建一个 CustomMembershipProvider。有了它，您可以自定义所有内容以适应您现有的环境或数据库。

# xml - 如何使用记事本++中的正则表达式修剪xml标签中的空格？

> ID：15342915
> 
> 赞同：2
> 
> 时间：2013-03-11T15:50:29.757
> 
> 标签：xml, regex, xml-parsing, notepad++

我正在尝试修剪`XML`标签中的空格，这是我所拥有的一个示例：

```
<xmlT ag>
content between tag
</xmlTa g> 
```

到：

```
<xmlTag>
content between tag
</xmlTag> 
```

这是我为此写的表达式：

查找：`[<](\w)* (\w)*[>]|[<][/](\w)* (\w)*[>]`
替换：`\1\2`

但没有按预期工作。
有没有其他解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:57:39.977

如果标签中只有一个空格并且没有属性，这将起作用

寻找：`<(/?)(\w*) (\w*)>`

代替：`<\1\2\3>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T17:31:58.123

使用 LookAhead，我们可以修复标签中的任意数量的空格：

查询词语：`\s+(?=[\s\w]*>)`
一无所有

在这里解释演示：[http ://www.regex101.com/r/dY6zC2](http://www.regex101.com/r/dY6zC2)

*注意：LookAhead 从 6.0 版开始在 NotePad++ 中可用*

# android - 具有远程服务器后端的 Android 应用程序？

> ID：15342927
> 
> 赞同：0
> 
> 时间：2013-03-11T15:51:11.703
> 
> 标签：android, sql, database, remote-server

我正在创建一个 android 应用程序，它允许用户将数据输入到表中并从中检索现有数据以生成报告。后端数据库的最佳选择是什么？另外，将前端 android 应用程序与后端集成需要哪些工具和平台？

后端是远程服务器上的数据库。android 设备使用 Wifi 与后端通信，所有记录更新都是使用 Wifi 作为通信模式完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:01:00.130

虽然我同意前两个答案，但最好以 JSON 格式进行通信，后端数据库可以是 mysql 或 sqlite，具体取决于大小以及服务器上可用的选项。

您可以在 python、php、perl 中实现请求处理或编写使用套接字的自定义应用程序。

php 可能是最容易实现基本服务器功能的，而 python 可能是最快的脚本语言

mysql 需要一些设置和配置，而 sqlite 不需要任何东西，您只需打开一个 .db 文件并运行 SQL 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:55:26.210

基于我现在开发的应用程序，在移动应用程序和后端服务器之间执行客户端-服务器通信的最简单方法是使用`JSON`对象来传递数据。因为它们非常轻巧，可以更快地转移`XML`物体。

# qt - QSlider 未显示在小部件（Qt）上

> ID：15342933
> 
> 赞同：-1
> 
> 时间：2013-03-11T15:51:25.933
> 
> 标签：qt, tabs, widget, qslider

我有带有标签和复选框的简单标签。我想添加滑块，但没有显示滑块。方法setGeometry有错吗？

```
 RollsTab::RollsTab(QWidget *parent)
     : QWidget(parent)
 {
     QFont font("Times", 11);

     label1 = new QLabel(rus("11111"), this);
        label1->setFont(font);
        label1->setGeometry(20, 25, 160, 20);
     checkBoxRolls = new QCheckBox(rus(""), this);
        checkBoxRolls->setChecked(stateRR);
        checkBoxRolls->setGeometry(180, 25, 55, 22);

     sliderA = new QSlider(Qt::Horizontal);
          sliderA->setRange(0, 99);
          sliderA->setValue(0);
          sliderA->setGeometry(20, 50, 55, 22);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:48:50.783

与父级一起启动滑块是一种很好的做法，例如：

```
sliderA = new QSlider(Qt::Horizontal, this); 
```

`addWidget`并通过函数[http://qtdocs.narod.ru/4.1.0/doc/html/qgridlayout.html#addWidget](http://qtdocs.narod.ru/4.1.0/doc/html/qgridlayout.html#addWidget)将其添加到布局（如果有的话）

sliderA 需要是头文件中定义的 QSlider*

# shell - 向用户隐藏对话框而不关闭它

> ID：15342935
> 
> 赞同：0
> 
> 时间：2013-03-11T15:51:29.203
> 
> 标签：shell, button, swt

我的应用程序被编写为在 OOTB 应用程序中运行。用户可以从 OOTB 应用程序中选择数据并将其存储在我的应用程序的 WritableList 中。然后，用户可以单击 OOTB 工具栏中的按钮，该按钮将打开我的应用程序的基本对话框。此对话框向用户显示他们已经选择的数据表。从基本对话框中，他们可以对表中的数据执行不同的任务。这包括删除数据以及从 OOTB 应用程序中选择更多数据。我的应用程序将保存数据，直到用户关闭 OOTB 应用程序关闭。但是我必须在基本对话框上为用户提供一个按钮，以便从他们的视图中删除该对话框。因此，当他们使用 OOTB 应用程序时，对话框不会妨碍他们。我的基本对话框是基于 TitleAreaDialog 构建的。

```
protected void createButtonsForButtonBar(Composite parent) {
   Button okButton = createButton(parent, OK, "Close Aplot", true);
   okButton.addSelectionListener(new SelectionAdapter() {
      public void widgetSelected(SelectionEvent e) {
         viewer = null;
         close();
      }
    });
  } 
```

但是 close(); 正在处理我所有的 SWT 小部件并导致运行时错误。尝试打开对话框备份时，SWT_Widget 已释放。所以有了一些建议，我尝试加入隐藏外壳。所以我删除了close（）并放置在getShell（）中。

```
protected void createButtonsForButtonBar(Composite parent) {
  Button okButton = createButton(parent, OK, "Close", true);
  okButton.setEnabled(true);
  okButton.addSelectionListener(new SelectionAdapter() {
     public void widgetSelected(SelectionEvent e) {
        viewer = null;
        getShell().setVisible(false);
    }
  }); 
```

}

现在我在以下行得到一个运行时空指针异常：getShell().setVisible(false);

如果我删除“OK”并将其替换为 SWT_PUSH。它似乎没有错误。

```
protected void createButtonsForButtonBar(Composite parent) {
  Button okButton = createButton(parent, SWT.PUSH, "Close Aplot", true);
  okButton.setEnabled(true);
  okButton.addSelectionListener(new SelectionAdapter() {
     public void widgetSelected(SelectionEvent e) {
        viewer = null;
        getShell().setVisible(false);
    }
  }); 
```

}

在上一个问题中，我意识到这不是好的做法。

那么我应该如何隐藏我的dailog而不关闭它呢？我假设我必须保留方法 createButtonsForButtonBar。那么我怎样才能改变我必须正确照顾贝壳的东西呢？

谢谢

***编辑***

这看起来正确吗？

```
 @Override
 protected void createButtonsForButtonBar(final Composite parent) {
    createButton(parent, IDialogConstants.OK_ID, "Close Aplot",
        true);
 }

 @Override
 protected void okPressed() {
   viewer = null;
   getShell().setVisible(false);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:47:50.137

当用户单击按钮时，您可以尝试`org.eclipse.swt.widgets.Decorations.setMinimized(boolean)`最小化对话框吗？那会是更好的解决方案吗？

# python - 如何解析 Python 中括号中的 CSV 列表？

> ID：15342938
> 
> 赞同：0
> 
> 时间：2013-03-11T15:51:38.783
> 
> 标签：python, string, text, csv

我想将以下原始字符串解析为一个数组：

```
(65.312321,89.314213214214) 
```

作为 Python，我敢打赌有一种很好的方法可以做到这一点，我只是不知道！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T15:53:04.573

由于它在语法上等同于 python 的浮点元组，因此您可以使用`ast.literal_eval`：

```
>>> import ast
>>> print ast.literal_eval("(65.312321,89.314213214214)")
(65.312321, 89.314213214214) 
```

如果需要，可以将其转换为列表：

```
>>> print list(ast.literal_eval("(65.312321,89.314213214214)"))
[65.312321, 89.314213214214] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T15:54:36.290

在 Python 中，您没有数组。您最终将数据保存在不可变元组或可变列表中。您最好的选择是为此目的使用 ast

```
>>> import ast
>>> st = "(65.312321,89.314213214214)"
>>> ast.literal_eval(st) # as a tuple
(65.312321, 89.314213214214)
>>> list(ast.literal_eval(st)) # as a list
[65.312321, 89.314213214214] 
```

如果您愿意，您也可以去掉括号并用逗号分隔

```
>>> st.strip("() ").split(",")
['65.312321', '89.314213214214'] 
```

# php - Mysql加载数据infile路径错误

> ID：15342940
> 
> 赞同：0
> 
> 时间：2013-03-11T15:51:41.810
> 
> 标签：php, mysql

嗨，我非常需要你的帮助。

使用 mysql load data infile 导入 .CSV 文件后显示错误。

我在下面有一个表格上传，工作正常

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Untitled Document</title>
</head> 
```

和一个使用加载数据文件的 PHP 上传脚本。

```
require("../config/conn.php");

  if (is_uploaded_file($_FILES['my-file']['tmp_name']) && $_FILES['my-file']['error']==0) {
    $path = 'C:/xampp/htdocs/dom/test/uploads/' . $_FILES['my-file']['name'];
    if (!file_exists($path)) {
      if (move_uploaded_file($_FILES['my-file']['tmp_name'], $path)) {

        echo $mysql = "LOAD DATA LOCAL INFILE '".$_FILES['my-file']['name']."' 
                REPLACE INTO TABLE table 
                FIELDS 
                    TERMINATED BY ',' 
                LINES 
                    TERMINATED BY '\\n'
                IGNORE 1 LINES 
                (`col1`,`col2`,`col3`,`col4`,`col5`....)";

                $query = mysqli_query($link, $mysql) or die(mysqli_error($link));

if(!$query) 
{
    printf("Error message: %s\n", mysqli_error($link));     
}   

      } else {
        echo "The file was not uploaded successfully.";
      }
    } else {
      echo "File already exists. Please upload another file.";
    }
  } else {
    echo "The file was not uploaded successfully.";
    echo "(Error Code:" . $_FILES['my-file']['error'] . ")";
  } 
```

一切都很好，除了加载数据本地 infile 看不到正确的路径。请查看错误：**找不到文件“logJan262013.CSV”。**但 .csv 文件已成功上传到文件夹“uploads/”中。任何帮助，将不胜感激。

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:54:36.273

您正在使用查询：

```
$mysql = "LOAD DATA LOCAL INFILE '".$_FILES['my-file']['name']."'... 
```

我相信您希望使用完整路径

```
$mysql = "LOAD DATA LOCAL INFILE '".$path."'... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:55:07.353

你做

```
 if (move_uploaded_file($_FILES['my-file']['tmp_name'], $path)) { 
```

前

```
$query = mysqli_query($link, $mysql) 
```

因此，`LOAD DATA`没有找到该文件也就不足为奇了。

如果您给出`LOAD DATA`正确的`$path`，它应该按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:55:22.307

错误你没有告诉 LOAD DATA INFILE 路径！试着告诉它路径，一切都应该没问题。

# xpages - XPages 分类视图、过滤和分页

> ID：15342941
> 
> 赞同：1
> 
> 时间：2013-03-11T15:51:48.960
> 
> 标签：xpages

我有一个基于分类视图的视图面板。我在页面顶部有一个下拉组合，允许用户选择一个类别。此值存储在 sessionScope 中。

该视图使用“按列值过滤”和计算到 sessionScope 值的值。

这一切都很好，直到他们使用寻呼机。他们转到第二页，然后尝试更改类别。这将显示一个空白的视图面板，可能是因为该面板正试图显示一个少于一整页结果的类别的第二页结果。我这样说是因为如果他们单击寻呼机中的第一页（或“上一页”），他们会得到最初应该得到的正确结果。

我将下拉菜单设置为进行完整更新，并尝试了 onclick（需要“部分更新”）和 onchange 事件。更改类别时如何重置面板以转到结果的第一页？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T16:21:26.840

XspViewPanel 类具有 gotoFirstPage 函数（没有参数）。尝试在下拉组合的 onchange 事件中调用它。

正如 Naveen 建议的那样，代码看起来像这样（假设视图面板 id 是 viewPanel1）：

```
getComponent("viewPanel1").gotoFirstPage(); 
```

# oracle - 在 oracle 中将 nclob 数据的土耳其字符解码为 html

> ID：15342946
> 
> 赞同：0
> 
> 时间：2013-03-11T15:52:20.580
> 
> 标签：oracle, decode, nclob

我在 oracle pl sql developer 的编辑器中看到 nclob 数据为

```
Detayları resmi yazı ile iletilen t&uuml;berk&uuml;loz ... 
```

但我想把它解码成

```
Detayları resmi yazı ile iletilen tüberküloz ... 
```

我的 sql 查询是这样的：

```
SELECT T.Aciklama "AÇIKLAMA",
... 
```

我应该如何将我的查询更改为真正的解码。

# java - Lucene 3.6.2 搜索桌面应用

> ID：15342947
> 
> 赞同：0
> 
> 时间：2013-03-11T15:52:22.673
> 
> 标签：java, lucene, derby

我有一个桌面应用程序，它使用 lucene 3.6.2 库来搜索 java derby 数据库中的多个字段。当输入一个词进行搜索时，lucene 系统会返回该词的匹配项。另一方面，当我输入一个不是完整单词而是一个较大单词的字符串时，lucene 不会返回与该字符串匹配的内容。

例如：“national”返回可用的匹配项

但是字符串“natio”不返回任何结果。

我希望能够输入一个字符串

"natio" 然后 lucene 将返回所有 "natio*" 作为匹配结果。

下面是应用程序的代码片段。

```
this is a the code that creates the lucene in-memory director

     Directory index = new RAMDirectory();
            StandardAnalyzer analyzer = new StandardAnalyzer(matchVersion);
            IndexWriterConfig IWConfig = new IndexWriterConfig(Version.LUCENE_36, analyzer);
            IndexWriter iw = new IndexWriter(index,IWConfig) ;

 //Connection to DB
  con = DriverManager.getConnection(host, uName, uPass);     
    Statement stmt = con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);
     String sql = "SELECT * FROM APP.REGISTRY";
        rs = stmt.executeQuery(sql);

  //creating the docuetns      
         rs.beforeFirst();
         while(rs.next()) {
         doc = new Document();
         doc.add(new Field("subject",rs.getString("SUBJECT"),Field.Store.YES,Field.Index.ANALYZED));
         doc.add(new Field("letter_from",rs.getString("LETTER_FROM"),Field.Store.YES,Field.Index.ANALYZED));
       iw.addDocument(doc);
         }

//Oen the index 
           IndexReader ir = IndexReader.open(index);

           //create the searcher object
            IndexSearcher searcher = new IndexSearcher(ir);
            QueryParser queryParser = new MultiFieldQueryParser(Version.LUCENE_36,
                    new String[]{"subject","letter_from","remarks","office_dispatched_to"}, analyzer);
            Query query = queryParser.parse(qString); 
```

# jquery - 更改 JQuery Mobile 中可折叠元素的样式

> ID：15342948
> 
> 赞同：1
> 
> 时间：2013-03-11T15:52:32.173
> 
> 标签：jquery, css, jquery-mobile

我想更改 JQuery Mobile 中可折叠元素的样式：该元素不应该有任何边框并且是完全白色的。我尝试了以下方法：

```
 <div class="ui-block-a" data-role="collapsible"  data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d" style="width: 74%; margin-left: 9px; border-width: 0px; background-color:white">
                <h3>Name</h3>
                <p>This is a mock.</p>
            </div> 
```

但是，某些 CSS 似乎不起作用。有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T15:59:59.873

这是一个工作示例：http: [//jsfiddle.net/Gajotres/GNAXT/](http://jsfiddle.net/Gajotres/GNAXT/)

它必须通过 css 完成，如果您不想更改使用可折叠 css 类的每个元素，可折叠元素也必须有自己的 id。

!important 很重要，因为它用于覆盖原始属性。

```
#custom-collapsible {
    width: 74% !important; 
    margin-left: 9px !important; 
    border-width: 0px !important; 
    background-color: white  !important;
}

#custom-collapsible h3 a {
    border-width: 0px !important; 
    background: white  !important;
} 
```

# javascript - JSON帖子中的node.js POST变量问题

> ID：15342952
> 
> 赞同：0
> 
> 时间：2013-03-11T15:52:53.200
> 
> 标签：javascript, html, json, node.js, post

我在 node.js 从通过 JSON 函数完成的帖子中获取帖子变量时遇到问题。
编辑：我可以在 Chrome 的检查器中看到表单帖子。表格帖子很好，格式也很好。

服务器位：

```
app.use(express.bodyParser());
app.post('/user', function (req, res) {
    var tempSession = req.body.tempSession;
    console.log(tempSession);
} 
```

JSON函数的帖子：

```
function postJSONP(url, params, method) {
    method = method || "post"; // Set method to post by default, if not specified.

    var form = document.createElement("form");
    form.setAttribute("method", method);
    form.setAttribute("action", url);

    for(var key in params) {
        if(params.hasOwnProperty(key)) {
            var hiddenField = document.createElement("input");
            hiddenField.setAttribute("type", "hidden");
            hiddenField.setAttribute("name", key);
            hiddenField.setAttribute("value", params[key]);

            form.appendChild(hiddenField);
         }
    }

    document.body.appendChild(form);
    form.submit();        
} 
```

调用 JSON 函数的帖子：

```
function LoginSubmit() {
    var action = 'login';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value; 
    var tempSession = generateSession();

    postJSONP('/user?callback=none&action=' + action + '&user=' + username,{"password":password, tempSession:tempSession});
 } 
```

从 HTML 提交的表单：

```
 <input id="submit" name="submit" type="submit" value="Login" onclick="LoginSubmit();"> 
```

Node.js 控制台的结果：

```
 undefined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:06:53.107

在堆栈上找到了一个有用的链接：
[Express.js req.body undefined](https://stackoverflow.com/questions/9177049/express-js-req-body-undefined)

我意识到 req.body 也是未定义的。事实证明，在允许 express 服务任何路由之前，您必须配置所有内容。
我在 app.post() 部分之前有一个 app.get() 。

最有帮助的部分是：

> 您必须确保在定义路由之前定义所有配置。

```
app.configure(function(){
    app.use(express.bodyParser());
    app.use(app.router);
}); 
```

# google-api - Google Contact API v3 - 创建联系人时无法创建姓名/职务

> ID：15342965
> 
> 赞同：3
> 
> 时间：2013-03-11T15:53:17.740
> 
> 标签：google-api, google-shared-contacts

我正在使用 Google Contacts API v3 文档，OAuth Playground 2.0。

我可以通过获取请求拉取所有联系人。我可以使用 POST 创建新联系人，但似乎无法填充姓名字段等。电子邮件和电话号码填充良好。

我一直在 Contacts API v3 文档的请求正文中逐字使用 atom/xml，如下所示。

```
 <atom:entry xmlns:atom='http://www.w3.org/2005/Atom'
    xmlns:gd='http://schemas.google.com/g/2005'>
  <atom:category scheme='http://schemas.google.com/g/2005#kind'
    term='http://schemas.google.com/contact/2008#contact'/>
  <gd:name>
     <gd:givenName>Elizabeth</gd:givenName>
     <gd:familyName>Bennet</gd:familyName>
     <gd:fullName>Elizabeth Bennet</gd:fullName>
  </gd:name>
  <atom:content type='text'>Notes</atom:content>
  <gd:email rel='http://schemas.google.com/g/2005#work'
    primary='true'
    address='liz@gmail.com' displayName='E. Bennet'/>
  <gd:email rel='http://schemas.google.com/g/2005#home'
    address='liz@example.org'/>
  <gd:phoneNumber rel='http://schemas.google.com/g/2005#work'
    primary='true'>
    (206)555-1212
  </gd:phoneNumber>
  <gd:phoneNumber rel='http://schemas.google.com/g/2005#home'>
    (206)555-1213
  </gd:phoneNumber>
  <gd:im address='liz@gmail.com'
    protocol='http://schemas.google.com/g/2005#GOOGLE_TALK'
    primary='true'
    rel='http://schemas.google.com/g/2005#home'/>
  <gd:structuredPostalAddress
      rel='http://schemas.google.com/g/2005#work'
      primary='true'>
    <gd:city>Mountain View</gd:city>
    <gd:street>1600 Amphitheatre Pkwy</gd:street>
    <gd:region>CA</gd:region>
    <gd:postcode>94043</gd:postcode>
    <gd:country>United States</gd:country>
    <gd:formattedAddress>
      1600 Amphitheatre Pkwy Mountain View
    </gd:formattedAddress>
  </gd:structuredPostalAddress>
</atom:entry> 
```

非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-27T19:40:30.273

我也被这个刺痛了。我忽略了将此 HTTP 标头添加到请求中：

```
GData-Version: 3.0 
```

在 v3 之前，表示名称的方式是`<atom:title>Full Name</atom:title>`代替`<gd:name>...</gd:name>`. 但我想最好只添加标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-19T09:13:29.983

是的，您必须将 GData-Version 添加到您的 HTTP 请求标头中：

```
[request setValue:@"3.0" forHTTPHeaderField:@"GData-Version"]; 
```

# windows - 对于 Windows Vista 上的 CreateProcessWithLogon，CreateEnvironmentBlock 返回块太大

> ID：15342967
> 
> 赞同：3
> 
> 时间：2013-03-11T15:53:23.323
> 
> 标签：windows, api, authentication, windows-vista, user-environment

我正在使用微软的[CreateProcessWithLogonW 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682431%28v=vs.85%29.aspx)以特定用户身份运行程序。在我们几乎所有的测试场景中，一切都很好。我们的代码类似于微软页面上的示例。这个问题出现在 windows vista 上。我们使用以下方法创建环境块：

```
CreateEnvironmentBlock(&lpvEnv, hToken, TRUE) 
```

然后我们将其传递给 CreateProcessWithLogonW：

```
CreateProcessWithLogonW(argv[1], NULL, argv[2], 
        LOGON_WITH_PROFILE, NULL, argv[3], 
        CREATE_UNICODE_ENVIRONMENT, lpvEnv, szUserProfile, 
        &si, &pi) 
```

问题是环境块大于 5120 个字符。我看到的唯一位置是在微软页面的评论部分：

> “未记录的环境块大小限制使用参数‘lpEnvironment’传递的环境块不得包含超过 5120 个字符，包括终止 \0 字符和尾随 \0 块分隔符。
> 
> 如果环境块超过该限制，则调用将发出错误“0x000006F7：存根收到错误数据”。
> 
> 在 Windows 7 SP1 上，记录的限制是环境的 32767 字节和每个变量的 8192 字节。但是，CreateProcessWithLogonW 函数尚未适应这些新限制。它仍然不接受超过 5120 个字符。

有什么可以做的吗？我犹豫要不要破解环境块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-07T22:30:34.070

希望到现在这个具体问题已经得到纠正。但是，为了将来参考，在这种情况下最简单的解决方法是使用 CreateProcessWithLogonW() 来启动代理可执行文件，而不是您实际想要运行的程序。然后代理可执行文件根据需要设置环境并使用普通的旧 CreateProcess() 启动目标程序。

# jquery - jQuery 多个动画并跟踪它们的进度

> ID：15342982
> 
> 赞同：0
> 
> 时间：2013-03-11T15:54:04.867
> 
> 标签：jquery, jquery-animate

我正在编写一个脚本，其中包含许多并行且以不同顺序发生的动画。根据在网页上单击的内容使用一组特定的动画。这些功能被重用，并且每次都不会以相同的顺序出现。

当用户单击另一个元素而不让第一组动画完成时，就会出现问题。在这种类型的实例中，脚本会中断并且无法按预期运行。这显然是因为进度没有完成，又开始执行另一组动画。

我的问题是，是否有任何做法可以识别当前是否正在运行动画，以防止在当前集完成之前执行另一组动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:57:36.540

您可以使用[:animated](http://api.jquery.com/animated-selector/)选择器：

```
if ($("yourSelector:animated").length > 0) {
    // Some of the elements matching 'yourSelector' are still being animated.
} 
```

或者，您可以在开始新动画之前调用[finish()](http://api.jquery.com/finish/)以强制当前动画立即完成：

```
$("yourElement").finish().animate({
    // The properties to animate...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:40:21.817

如果您只想确保与特定元素关联的动画在开始新动画之前正常完成，您可以使用该`.queue()`功能。[请参阅我在 jsFiddle 上的示例](http://jsfiddle.net/amullins/VtzSw/3/)。

```
$( function() {
    $(".clicker").on("click", function() {
        var self = $(this);
        self.queue( function(next) {
            self.animate({left:"+=100"}, 1000); // Replace with your animation
            next();
        });
    });
}); 
```

[在 api.jquery.com 上阅读有关队列功能的更多信息](http://api.jquery.com/queue/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:18:53.520

jQuery 还有一个隐藏的暴露变量`$.timers`，它包含当前动画/等所有事物的数组。哪个速度方面非常快，性能方面你不想循环`$('*').is(':animated')`，以测试页面上是否有任何东西在移动。

我创建了一个小函数，它一遍又一遍地循环一个间隔，直到它们全部完成，然后执行一个回调函数。

```
function isPageAnimated (_func) {    
    var testAnimationInterval = setInterval(function () {
        if ($.timers.length === 0) { // any page animations finished
            clearInterval(testAnimationInterval);
            _func(); // callback function
        }
    }, 100);
} 
```

# windows - Windows下以emacs为编辑器的git commit

> ID：15342988
> 
> 赞同：5
> 
> 时间：2013-03-11T15:54:19.067
> 
> 标签：windows, git, emacs

在 Windows 中使用 git bash，我将 my 设置`core.editor`为以下内容：

```
 c:/program/emacs-24.2/bin/emacs --no-splash -geometry 110x58+200+2 
```

后`git commit`，一个新的 emacs 框架按预期打开。打开的缓冲区有`$@`一个名称。我无法保存缓冲区并退出 emacs。Git 抱怨提交信息是空的。

我有一个解决方法，即将我设置`core.editor`为：

```
c:/program/emacs-24.2/bin/emacs --no-splash -geometry 110x58+200+2 .git/COMMIT_EDITMSG 
```

这可行，但有几个缺点：

*   我必须在包含 .git 文件夹的目录中。如果我在子目录中，它不起作用。
*   打开的 emacs 框架有两个窗口，一个带有`COMMIT_EDITMSG`，一个带有`$@`.

有没有更好的方法来选择 emacs 作为提交编辑器（除了让它在终端中打开）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T16:09:45.523

我建议你要么

*   [将 Emacs 作为守护进程运行](http://www.emacswiki.org/emacs/EmacsAsDaemon)- 但这显然是仅适用于 unix 的，或者
*   `Emacs`像往常一样运行并使用`M-x server-start RET`或添加`(server-start)`到启动服务器`.emacs`

如果您坚持从命令行运行（在完成编辑后在客户端缓冲区中命中以将控制权传递回） ，则使用`emacsclient`而不是`emacs`您的。`core.editor``git``C-x #``git`

但是，最好的使用`Emacs`方式`git`是`vc`：

在`Emacs`中，输入`C-x v d your/git/repo/root/dir RET`以获取已修改文件的列表，标记您要提交的文件`m`，输入`C-x v v`以提交它们 - 出现提交消息的缓冲区（使用`ChangeLog`条目为您初始化，如果有的话），编辑它，输入`C-c C-c`，然后您就是完毕。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-13T12:59:48.953

这在 msysgit 1.7.11 下对我有用：

```
git config core.editor '/d/bin/emacs-24.3/bin/emacs.exe' 
```

但是当我切换到这个时：

```
git config core.editor '/d/bin/emacs-24.3/bin/emacs.exe --no-splash' 
```

我得到了和你一样的 '$@' 缓冲区。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T19:23:42.083

另一个非常好的`git`emacs 接口是由[`magit`](https://github.com/magit/magit). 背后的想法`magit`是在 emacs 中为您提供一个交互式界面，以便轻松运行所有常用的 git 命令，`git`从本质上消除您直接从命令行运行的需要。

尽管它不是标准的（与`vc`另一个答案中提到的 不同），但您可以使用包装系统非常简单地安装它，例如从[melpa](http://melpa.milkbox.net/)或[marmalade](http://marmalade-repo.org/packages/magit)存储库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-13T14:29:16.697

我在网上找到的任何东西都没有按照我想要的方式工作，令人惊讶的是我还没有看到这个命令..所以，这就是我如何让 emacs 在 Git for windows 中工作：

```
git config --global core.editor "'C:\Program Files\Emacs\x86_64\bin\runemacs.exe' -wait" 
```

# performance - 前端性能和地图服务：谷歌地图与竞争

> ID：15342989
> 
> 赞同：2
> 
> 时间：2013-03-11T15:54:20.157
> 
> 标签：performance, google-maps, canvas, openstreetmap

由于存在被标记为“健谈”问题的风险，我想分析使用 Google 地图与其他服务（例如 OpenStreetMaps+Leaflet）的技术优势和劣势。

我观察到的一件事是谷歌地图存在性能问题，当地图中有很多事情（许多标记）时，性能问题会增加。我还注意到每个服务都基于不同的前端技术：svg、canvas、images ..

我正在构建一个项目，该项目将大量使用地图，因此我想就哪种服务更好地使用您的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:32:19.437

我认为这个问题没有很好的答案。您处理的两种地图服务都可以被多个前端使用。例如，[Leaflet](http://leafletjs.com/)和[OpenLayers](http://openlayers.org/)（以及所有其他能够显示*图块*的库）都可以显示 OSM 和谷歌地图图块，因此这里没有什么可比较的。

OpenStreetMap 的真正优势之一是您不受特定数据表示的限制。OSM 数据是免费的，因此基于 OSM 的地图可以使用您想要的任何技术。已经有[许多不同的基于 OSM 的服务](https://wiki.openstreetmap.org/wiki/List_of_OSM_based_Services)和 [渲染库](https://wiki.openstreetmap.org/wiki/Rendering#Libraries)/[客户端渲染器](https://wiki.openstreetmap.org/wiki/Vector_tiles#Client_.2F_Renderer)使用非常不同的技术来显示地图。

# mysql - 表定义 MySQL 转换中的 Oracle ROWID

> ID：15342990
> 
> 赞同：0
> 
> 时间：2013-03-11T15:54:27.087
> 
> 标签：mysql, oracle

```
 DOCID    NUMBER(38)                               NULL,
  TEXTKEY  ROWID                                    NULL, 
  CONSTRAINT SYS_IOT_TOP_107722
 PRIMARY KEY
 (TEXTKEY) 
```

我试图`MySql`从我们的旧`Oracle`数据库中定义一个这样的表，我不确定如何处理这个扩展`ROWID`的`MySql`.

**更新**

这是一些示例数据：`AAAaRfAARAAACtcAAA`。它似乎遵循 oracle 文档中所述的扩展密钥格式。我会尝试使用二进制文件，看看它是否会爆炸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:13:15.110

[这里](https://stackoverflow.com/questions/2728413/equivalent-of-oracles-rowid-in-mysql)有一个类似的 StackOverflow 问题，它提供了替代方案，但没有直接“与 ROWID 等效的 MySQL”，因为没有这样的东西。

所有列似乎都在这里为行创建唯一标识符，因此您可以使用`AUTO_INCREMENT`或 GUID 列。

# sql - 具有多个条件的 SQL 计算列案例

> ID：15342992
> 
> 赞同：0
> 
> 时间：2013-03-11T15:54:30.027
> 
> 标签：sql, sql-server, tsql

我在使用多个条件的 Case 语句时遇到问题，我不知道如何嵌套另一个 CASE。

*   `DateTime`柱子：`Control_OpenDateOwner`
*   `DateTime`柱子：`Control_ClosedDateRev`

计算列：

```
(case when [Control_ClosedDateRev] IS NULL then '1' else '0' end) 
```

试图我想计算何时`OPENDATE`打开（使用）大于 4 天`today()`并且关闭日期为空，放置一个`1`（打开记录并且打开超过 4 天，或者`0`如果记录关闭或打开少于 4 天，我无法让它工作。

注意：我不是 SQL 专家，初学者。试过这篇文章，但对我来说有点困惑。（[在 SQL Server 中执行嵌套 case 语句逻辑的最佳方法](https://stackoverflow.com/questions/505747/best-way-to-do-nested-case-statement-logic-in-sql-server)）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:00:59.470

您可以`AND`在`CASE`语句中使用。在这种情况下，您不需要执行真正的嵌套`CASE`语句

```
(CASE WHEN [Control_ClosedDateRev] IS NULL AND DateDiff(day,opendate,getDate()) > 4 THEN '1' ELSE '0' END) 
```

# android - jsoup 在我的 android 应用程序中不起作用，get() 总是出错

> ID：15342996
> 
> 赞同：-1
> 
> 时间：2013-03-11T15:54:40.050
> 
> 标签：android, html, eclipse, jsoup

这是我的代码的一部分：

```
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_lyrics_display);
    setupActionBar();

    TextView ArtistName = (TextView)findViewById(R.id.aname);
    TextView SongName = (TextView)findViewById(R.id.sname);

     // Get the message from the intent
    Intent intent = getIntent();
    String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);
    String message2 = intent.getStringExtra(MainActivity.EXTRA_MESSAGE2);

    // Create the text view
    ArtistName.setTextSize(12);
    ArtistName.setText(message);
    SongName.setTextSize(12);
    SongName.setText(message2);
    getLyrics(message , message2);
}

@SuppressLint("DefaultLocale")
public void getLyrics(String message , String message2) {

    final TextView LyricsContent = (TextView)findViewById(R.id.lyricscontent);
    Document doc = null;
    String  url = "http://api.chartlyrics.com/apiv1.asmx/SearchLyricDirect?artist="+message.toLowerCase()+"&song="+message2.toLowerCase();
    LyricsContent.setText(url);
    try {
        doc = Jsoup.connect(url).get();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }           
} 
```

它总是在我输入（字符串消息，字符串消息2）后停止。我已经使用它了：android.permission.INTERNET android.persmission.ACCESS_NETWORK_STATE/>

当我删除 jsoup 的部分时，它可以工作。那么哪里出了问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:41:23.473

您好，我的申请中也有这个。

解决方案相当简单：

所有 Jsoup 动作都必须在 Asyntask 或 Thread 中完成

我个人使用这样的 Asynctask：

活动前在代码顶部有一个字符串歌词

```
 private class LoadLyric extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        // Here you can do any UI operations like textview.setText("test");
    }

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
    Document doc = null;
    try {
        doc = Jsoup.connect(url).get();
        lyrics = doc.text(); // or atleast do something like doc.getElementsByTag("Lyric"); in your case

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T22:53:47.003

我不确定，但您不必在 Activity 中建立任何连接，您可以调用 getLyrics()。

```
@SuppressLint("DefaultLocale")
public void getLyrics(String message , String message2) {
new Thread(new Runnable() {
    public void run() {
        final TextView LyricsContent = (TextView)findViewById(R.id.lyricscontent);
        Document doc = null;
        String  url = "http://api.chartlyrics.com/apiv1.asmx/SearchLyricDirect?artist="+message.toLowerCase()+"&song="+message2.toLowerCase();
        LyricsContent.setText(url);
    try {
        doc = Jsoup.connect(url).get();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }           
}
}).start();
} 
```