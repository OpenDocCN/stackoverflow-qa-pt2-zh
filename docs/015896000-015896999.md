# StackOverflow 问答 15896000-15896999

# java - Java 使用带引号的字符串常量

> ID：15896005
> 
> 赞同：6
> 
> 时间：2013-04-09T07:36:03.580
> 
> 标签：java, eclipse, debugging

当我将此常量字符串与内部 MB 与内部带有 MB 的变量进行比较时，结果为假。字符串常量看起来像“MB”（[“,M,B”]=4 长度），我的变量是“MB”（[M,B]=2 长度）。这里有什么问题。Java 不能将代码中的引号放入字符串中。

![字符串常量](https://i.stack.imgur.com/yNppT.png)

![变量 2](https://i.stack.imgur.com/eAIrs.png)

```
public static final String gc_TelCodeFixed  = "FX";

if (!telcode.getId().equals(com.quoka.qis.db.constant.Constants.gc_TelCodeFixed)) 
    throw new TelcodeTypeMismatchException(telcode.getType()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:43:24.070

不可见的字符可能会导致此行为。

“MB”是怎么来的？你是输入它们还是从另一个程序复制粘贴？复制粘贴操作可能会出现不可见字符，文本编辑器不会显示它们。

这可以通过使用 Linux 文档查看器从 PDF 文件复制来轻松复制。

希望这会有所帮助，亚龙

# python - 如何检查关系项是否为空

> ID：15896010
> 
> 赞同：0
> 
> 时间：2013-04-09T07:36:30.883
> 
> 标签：python, openerp

如何检查 openerp 中的相关对象是否为空？

我有`my_object`哪个有一个`supplier_invoice`字段。

`my_object`声明为：

```
_columns = {
        'supplier_invoice': fields.many2one('account.invoice',
                                            'commission invoice',
                                            ondelete='set null'),
} 
```

我想这样做：

```
if my_object.supplier_invoice:
     do_something() 
```

但它不起作用，即使是空的，它也总是返回一个browse_record。

我正在使用 openerp 7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:27:07.727

好的，我必须测试：

```
if my_object.supplier_invoice.id:
    do_this() 
```

记录不存在时id**为False**

# arduino - 如何从 Arduino 读取 SMS 并让 LED 打开或关闭

> ID：15896019
> 
> 赞同：2
> 
> 时间：2013-04-09T07:36:58.060
> 
> 标签：arduino, gsm

```
#include <SoftwareSerial.h>
char inchar; //Will hold the incoming character from the serial port.
SoftwareSerial cell(2,3); //Create a 'fake' serial port. Pin 2 is the Rx pin, pin 3 is the Tx pin.

 int led1 = A2;

 void setup()
 {
     // Prepare the digital output pins
     pinMode(led1, OUTPUT);
     digitalWrite(led1, HIGH);

     //Initialize GSM module serial port for communication.
     cell.begin(19200);
     delay(30000); // Give time for GSM module to register on network, etc.
     cell.println("AT+CMGF=1"); // Set SMS mode to text
     delay(200);
     cell.println("AT+CNMI=3,3,0,0"); // Set module to send SMS data to serial out upon receipt 
     delay(200);
 }

 void loop() 
 {
     //If a character comes in from the cellular module...
     if(cell.available() >0)
     {
         delay(10);
         inchar=cell.read(); 
         if (inchar=='a')
         {
             delay(10);
             inchar=cell.read();
             if (inchar=='0')
             {
                 digitalWrite(led1, LOW);
             } 
             else if (inchar=='1')
             {
                 digitalWrite(led1, HIGH);
             }
             delay(10);
             delay(10);
         }
         cell.println("AT+CMGD=1,4"); // Delete all SMS
     }
 } 
```

这是从蜂窝网络接收 SMS 的代码。我正在使用带有 SIM900 的 Arduino Gboard。代码中没有错误，但板上的 LED 不会响应 SMS 来打开或关闭。

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-08-19T10:56:57.120

这是一个功能齐全的代码，用于使用 Arduino 和 GSM 通过 SMS 发送命令，它还将回复灯的状态。

```
#include <SoftwareSerial.h>
SoftwareSerial GPRS(10, 11);
String textMessage;
String lampState;
const int relay = 12; //If you're using a relay to switch, if not reverse all HIGH and LOW on the code

void setup() {  
  pinMode(relay, OUTPUT);
  digitalWrite(relay, HIGH); // The current state of the light is ON

  Serial.begin(9600); 
  GPRS.begin(9600);
  delay(5000);
  Serial.print("GPRS ready...\r\n");
  GPRS.print("AT+CMGF=1\r\n"); 
  delay(1000);
  GPRS.print("AT+CNMI=2,2,0,0,0\r\n");
  delay(1000);
}

void loop(){
  if(GPRS.available()>0){
    textMessage = GPRS.readString();
    Serial.print(textMessage);    
    delay(10);
  } 
  if(textMessage.indexOf("ON")>=0){ //If you sent "ON" the lights will turn on
    // Turn on relay and save current state
    digitalWrite(relay, HIGH);
    lampState = "ON";
    Serial.println("Lamp set to ON\r\n");  
    textMessage = "";
    GPRS.println("AT+CMGS=\"+631234567890\""); // RECEIVER: change the phone number here with international code
    delay(500);
    GPRS.print("Lamp was finally switched ON.\r");
    GPRS.write( 0x1a );
    delay(1000);
  }
  if(textMessage.indexOf("OFF")>=0){
    // Turn off relay and save current state
    digitalWrite(relay, LOW);
    lampState = "OFF"; 
    Serial.println("Lamp set to OFF\r\n");
    textMessage = "";
    GPRS.println("AT+CMGS=\"+631234567890\""); /// RECEIVER: change the phone number here with international code
    delay(500);
    GPRS.print("Lamp was finally switched OFF.\r");
    GPRS.write( 0x1a );
    delay(1000);
  }
  if(textMessage.indexOf("STATUS")>=0){
    String message = "Lamp is " + lampState;
    GPRS.print("AT+CMGF=1"); 
    delay(1000);
    Serial.println("Lamp state resquest");
    textMessage = "";
    GPRS.println("AT+CMGS=\"+631234567890\""); // RECEIVER: change the phone number here with international code
    delay(500);
    GPRS.print("Lamp is currently ");
    GPRS.println(lampState ? "ON" : "OFF"); // This is to show if the light is currently switched on or off
    GPRS.write( 0x1a );
    delay(1000);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-21T23:13:22.947

改变

```
AT+CNMI=3,3,0,0 
```

至：

```
AT+CNMI=**2,2,0,0,0**
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-08T11:22:06.437

最简单的方法是最好的方法。

```
// if You use SoftwareSerial lib, declare object for GSM
SoftwareSerial gsm(8,9); // TX, RX
void setup(){
     // initialise UART and GSM communication between Arduino and modem
     Serial.begin(115200);
     gsm.begin(115200);
     // wait 5-10sec. for modem whitch must connect to the network
     delay(5000);
     // configure modem - remember! modem didn't remeber Your's configuration!
     gsm.print("at+cmgf=1\r"); // use full functionality (calls, sms, gprs) - see app note
     gsm.print("at+clip=1\r"); // enable presentation number
     gsm.print("at+cscs=\"GSM\"\r"); // configure sms as standard text messages
     gsm.print("at+cnmi=1,2,0,0,0\r"); // show received sms and store in sim (probobly, I don't compre this settings with app note but it's working :)
}
void loop(){
     String response = gsmAnswer();
    if(response.indexOf("+CMT:") > 0 ) { // SMS arrived
    // Now You can parse Your Message, if You wont controll only LED, just write
       if(response.indexOf("LED ON") > 0) {
          digitalWrite(LED_PIN, HIGH); // enable it
       }else if(response.indexOf("LED OFF") > 0) {
          digitalWrite(LED_PIN, LOW); // turn off
       }
       delay(1000);
    }
}

String gsmAnswer(){
   String answer;
   while(!gsm.available());
   while(gsm.available()){
     delay(5);
     if(Serial.available() > 0){
       char s = (char)gsm.read();
       answer += s;
     }
  }
  return answer;
} 
```

多想一下，传入的短信格式如下：

```
+CMT: "+48xxxxxxxxx","","17/07/07,21:57:04+08"
Test of arrived messages 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-21T15:14:49.423

```
void loop() {
    while(cell.available() > 0) {inchar = cell.read(); readString+=c;delay(1);} ///can be a delay up to (10) so you can get a clear reading
    Serial.print(readString);  /// Declare a string    " String readString; "
    for (i=0; i<200; i++){  /// Serch for the txt you sent up to (200) times it depends how long your ""readString" is
      if(readString.substring(i,i+4)=="RING"){ //// I am looking for the word RING sent from my phone
        digitalWrite(13,HIGH);
        break;

      } 
    }   
} 
```

这将帮助您找到您阅读的特定单词（短信）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-13T07:08:27.767

在尝试解析响应之前，您应该首先确切地知道响应是什么。

尝试一些简单的代码，例如以下代码（注意：未经测试！）以了解您应该寻找什么：

```
void loop() {
    if(cell.available() > 0) {
        char ch = cell.read();
        Serial.print(ch);
    }
} 
```

我的猜测是您会看到的不仅仅是“0”或“1”:)

# ruby-on-rails - Rails：我怎样才能让新动作在弹出窗口而不是新页面中起作用？

> ID：15896020
> 
> 赞同：0
> 
> 时间：2013-04-09T07:36:58.410
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

当用户单击发送消息时，我希望出现一个弹出框，其中包含发送消息表单。用户可以写一条消息并点击发送。弹出部分很简单，我通过 jquery 实现了它。但是我如何让新动作在其中发挥作用？换句话说，当用户单击“发送消息”时，我希望链接到新操作，但不是转到单独页面上的新视图，而是希望新视图成为弹出窗口-向上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:17:35.123

您可以通过添加到标签来使大多数链接、按钮或表单远程`:remote => true`，这将允许控制器以 .js 文件而不是 .html 响应。

在这个 js 文件中，您可以使用 jquery 来显示弹出框，可能使用您已经实现的逻辑。

# iphone - 如何使用 ObjC 在 ios 中发送对这个 Soap Header 的请求？

> ID：15896021
> 
> 赞同：-1
> 
> 时间：2013-04-09T07:36:59.390
> 
> 标签：iphone, ios, xcode

我是 iPhone 开发的新手，想得到答案，用用户名、密码和公司 ID 发送这个肥皂头的请求，..

我搜索了很多教程，但没有任何帮助。

提前致谢。

肥皂代码是：

```
<soap:Header>
<AuthenticationData xmlns="http://www.harikishan.com/">  //www.harikishan.com used as an example of website to which i need to send request
  <CompanyId>string</CompanyId>
  <UserName>string</UserName>
  <Password>string</Password>
</AuthenticationData>
</soap:Header> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:05:51.000

通常，您需要构建 XML 有效负载，确保对您插入的任何字符串进行 XML 编码，并使用`NSURLRequest`. 然后，您可以接收响应并适当地处理它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:38:16.277

你需要用你的肥皂体做一个 nnstring

为公司 ID、用户名、密码创建 3 个字符串

```
NSString * soapBody  = [NSString stringWithFormat @"<soap:Header>"
"<AuthenticationData xmlns=\"http://www.harikishan.com/\">
  "<CompanyId>%@</CompanyId>"
  "<UserName>%@</UserName>"
  "<Password>%@</Password>"
  "</AuthenticationData>"
  "</soap:Header>", companyID, userName, password]; 
```

然后加你`NSMutableURLRequest * request`

# android - 是否可以在 Android 中操作消息查询（收件箱）？

> ID：15896022
> 
> 赞同：0
> 
> 时间：2013-04-09T07:37:03.037
> 
> 标签：android, sms, android-contentprovider

抱歉，如果我问的是一个愚蠢的问题。所以我真正想知道的是。是否可以操纵查询，我们习惯于在 Android 中获取消息。更具体地说，我需要显示来自特定的消息默认消息收件箱中的一组数字。我知道我们可以使用 contentprovider 访问联系人列表并对其进行操作。但在这里我只想防止来自黑名单号码的消息出现在默认消息收件箱中。

如果可能的话，请指导我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:55:15.990

YOu can use the ALertDialog.Builder... try this code:

```
 var dialogBuilder = new AlertDialog.Builder(this);
                    dialogBuilder.SetTitle("Record Saved!");
                    dialogBuilder.SetIcon(Android.Resource.Drawable.IcDialogAlert);
                    dialogBuilder.SetMessage("Successfully Saved!");
                    dialogBuilder.SetNeutralButton("Confirm", (Sender, args) =>
                    {
                        StartActivity(typeof(Activity1));

                    });
                    dialogBuilder.Show(); 
```

# android - 我们可以使用 EditText 创建超链接吗？

> ID：15896029
> 
> 赞同：3
> 
> 时间：2013-04-09T07:37:27.283
> 
> 标签：android, android-edittext

我们可以使用 a`TextView`通过各种方法向其添加超链接，例如使用属性 autoLink 或使用`setMovementMethod()`.

我们可以使用和`EditText`小部件做同样的事情吗？我正在尝试创建一个记事本，如果在其中输入任何此类文本，例如 url、电子邮件、数字或类似内容，我们应该获得一个超链接以单击它并打开浏览器。

请帮忙。

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:55:52.773

从 Android API 级别 8 开始，有一个[WEB_URL](http://developer.android.com/reference/android/util/Patterns.html#WEB_URL)模式。引用源代码，它“匹配 [es] RFC 3987 的大部分内容”。如果您针对较低的 API 级别，您可以简单地从源中复制模式并将其包含在您的应用程序中。我假设你知道如何使用模式和匹配器，所以我不会在这里详细介绍。

[URLUtil](http://developer.android.com/reference/android/webkit/URLUtil.html)类还提供了一些有用的方法，例如：

[isHttpUrl()](http://developer.android.com/reference/android/webkit/URLUtil.html#isHttpUrl%28java.lang.String%29) [isValidUrl()](http://developer.android.com/reference/android/webkit/URLUtil.html#isValidUrl%28java.lang.String%29) 方法的描述不是很详细，因此您可能最好查看源代码并找出最适合您的目的的方法。

至于何时触发验证检查，有多种可能：可以使用 EditText 回调函数

[onFocusChanged()](http://developer.android.com/reference/android/widget/TextView.html#onFocusChanged%28boolean,%20int,%20android.graphics.Rect%29)或 [onTextChanged()](http://developer.android.com/reference/android/widget/TextView.html#onTextChanged%28java.lang.CharSequence,%20int,%20int,%20int%29) 或使用[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)，我认为这会更好。

我希望这会有所帮助，最好的问候，

# css - HTML 电子邮件：适用于移动设备和 Outlook 的@media 查询

> ID：15896032
> 
> 赞同：2
> 
> 时间：2013-04-09T07:37:47.693
> 
> 标签：css, outlook, media-queries

我正在为可以在 Outlook 和移动设备中查看的电子邮件编写 HTML。我想为 Outlook 使用表格（我需要设置多列），为移动设备使用单列 div（或任何 < 400 像素）。

我正在尝试使用@media 查询来做到这一点，并且我知道 Outlook 的 CSS 支持非常粗制滥造，但我想知道是否有人知道可以使 Outlook“忽略”< 400px 的 @media 查询并应用样式的 hack对于 >400px 部分。我试过这个：

```
@media (max-width: 480px)
{
    .mobile-email { background-color:green; }
} 

@media (min-width:500px) 
{
    .mobile-email {  background-color:red;}
} 
```

问题似乎是 Outlook 忽略了两者。有什么办法可以让这种事情在 Outlook 中工作吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:48:46.530

老实说，我会很清楚。HTML 电子邮件是一项非常可怕的业务。将媒体查询添加到混合中是自找麻烦。

黑莓一开始就不支持媒体查询...

[http://www.emailonacid.com/blog/details/C13/media_queries_in_html_emails](http://www.emailonacid.com/blog/details/C13/media_queries_in_html_emails)

Outlook 甚至几乎不使用标准 CSS，因为它将[渲染引擎切换到 MS Word 的](http://litmus.com/blog/outlook-2013-still-powered-by-word-now-available-for-email-testing).

[查看此站点以了解有关电子邮件标准](http://www.email-standards.org/)支持的更多信息。我仍然在 HTML 电子邮件中使用内联样式和表格，因为它仍然是获得结果的最一致的方式（这在 2013 年非常糟糕）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T01:55:00.130

最佳实践是为背景颜色做内联 css。您编写的课程无法跨越国界。有些设备喜欢这样编写脚本，有些设备喜欢这样编写脚本。例如，当您收到一封要求隐藏：边框的响应式电子邮件时；大多数设备和浏览器都会按照媒体查询的要求进行操作。然而，Android 姜饼并没有做隐藏边框。iphone会隐藏边框。Outlook 2013 会隐藏边框，但雅虎不会这样做。对于您为 Outlook 2007 和 2010 做的背景颜色需要内联您希望它在此处阅读文本

我希望这会帮助你。

# amazon-web-services - 无法进行轮询/重试/排队时的失败设计

> ID：15896039
> 
> 赞同：2
> 
> 时间：2013-04-09T07:38:21.013
> 
> 标签：amazon-web-services, amazon-ec2, amazon-elb

我正在设计一个托管在云中的网站/网络服务（特别是 AWS，尽管这几乎无关紧要），而且我花了很多时间思考“为失败而设计”。我希望我的系统能够无缝地处理节点故障，即没有任何重大的用户影响或工程师干预。

在大多数情况下，很容易看出如何处理突然的节点故障。如果我的应用程序有一个由负载均衡器后面的 4 个服务器处理的 API，由 AJAX 或 iPhone 应用程序轮询，轮询器可以简单地检测失败的 TCP/IP 传输并重试......假设负载均衡器行为正确，它将命中健康的实例。

如果应用程序更面向处理，则可以使用像 SQS 这样的队列服务来允许无状态节点从故障节点停止的地方继续工作。

我看到的困难在于“入口点”，因为尚未加载应用程序，因此无法重试/轮询，并且失败意味着应用程序永远不会启动。例如，网页上的 index.html ......如果一个节点在传输该文件时失败，用户的浏览器可能会挂起并且不会自动重试（他们需要刷新）。

负载均衡器也是一个单一的“入口/故障点”。但是，在这种情况下，我们似乎可以通过创建多个负载平衡器来解决问题，并使用 DNS 负载平衡对*它们进行负载平衡，如下所述：http:* [//blog.rightscale.com/2012/10/23/dns-load-云中的平衡和使用多个负载平衡器/](http://blog.rightscale.com/2012/10/23/dns-load-balancing-and-using-multiple-load-balancers-in-the-cloud/)

这是一个适用于更简单的 index.html 案例的解决方案吗？总的来说，我们如何在无法进行轮询/重试/排队的情况下创建冗余？

编辑：另一个想法是将 index.html 静态托管在 CDN、S3 等（资源可用性更可靠）上，尽管这会阻止使用动态内容。如果页面使用 JS 填充自身，则可以添加动态内容，但这会增加对 JS 的依赖以及用户的延迟。

# java - JavaCV 本机对象释放

> ID：15896044
> 
> 赞同：0
> 
> 时间：2013-04-09T07:38:45.893
> 
> 标签：java, javacv

以下 JavaCV 代码有什么问题？我尝试填充 CvSeq 以进行进一步的工作，但 JVM*几乎*可靠地在不同的地方崩溃了 EXCEPTION_ACCESS_VIOLATION，最常见的是在`[msvcr100.dll+0x3c19b] memcpy+0x20b`或`[opencv_core243.dll+0x61793] cvSeqPush+0x133`

```
public static void main(String[] args) {
    CvMemStorage memStorage = CvMemStorage.create();
    CvSeq seq = cvCreateSeq(0, Loader.sizeof(CvSeq.class), 
          Loader.sizeof(CvPoint.class), memStorage);

    for (int j=0; j<1000000; j++) {
        CvPoint cvPoint = cvPoint(j, j+1);
        System.out.println(j);
        cvSeqPush(seq, cvPoint);
    }
} 
```

在我的配置中，它最常在大约 50000 次迭代后失败，但有时在其他计数或根本没有。显然存在一些分配/解除分配错误。并且它仅在未在调试模式下运行时重现。

如果我`System.gc()`在 20000 次迭代后显式调用，它会在 GC 之后立即在内部失败`cvSeqPush`（或者稍后 1-2 次迭代，可能是因为来自已释放空间的指针恰好指向正确的地址）。或者，如果我同时设置`Xmx`和`Xms`参数，它迟早会失败。可能正在使用的东西会自动释放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:57:53.043

问题是，垃圾收集器`memStorage`在代码中最后一次引用它之后识别为未使用，而不是在块的末尾。这会在循环中发生的第一次 GC 之后导致本机对象释放。这就是为什么仅在不使用调试器时才会重现问题的原因。

解决方案是在循环之后添加一些引用`memStorage`，以防止 GC 释放它。最好的办法是调用`memStorage.release()`主动释放本机内存，而无需等待 GC 并防止在仍然需要它时过早释放。

请参阅我与 JavaCV 和 JavaCPP 作者 Samuel Audet 的讨论以及更多本地分配问题：[https ://groups.google.com/forum/?fromgroups=#!topic/javacv/ffQSkfXnT0o](https://groups.google.com/forum/?fromgroups=#!topic/javacv/ffQSkfXnT0o)

# ruby-on-rails - 让 Capybara 的 inside() 方法找到 Rails 的资源 ID，例如 #user_1234？

> ID：15896045
> 
> 赞同：3
> 
> 时间：2013-04-09T07:38:51.347
> 
> 标签：ruby-on-rails, rspec, capybara

我的规范中经常有以下代码：

```
 within "#user_#{@user.id}" do
    page.should have_content(@user.email)
  end 
```

如果 Capybara 能够从给定的资源对象中确定想要的 ID，那就太好了，例如：

```
 within @user do
    page.should have_content(@user.email)
  end 
```

是否有捷径可寻？可以尝试覆盖该`find`方法，但也许有更好的方法？

谢谢，乔什

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-12-14T20:33:26.487

为什么不直接添加`include ActionController::RecordIdentifier`到`spec/support/`(rspec/capybara) 或`features/support`(cucumber/capybara)？

然后您可以执行以下操作：

```
within "##{dom_id(user)}" do
  find('button').click
end 
```

**Rails 4 更新**：`include ActionView::RecordIdentifier`避免弃用警告（感谢@robertwbradford）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T07:46:05.437

在辅助方法中执行此操作怎么样？

**在规范/支持/中：**

```
module YourHelper
  def user_element(user, prefix = nil)
    '#' + dom_id(user, prefix)
  end
end

RSpec.configure do |config|
  config.include YourHelper, :type => :request
  config.include ActionController::RecordIdentifier, :type => :request
end 
```

然后你可以写：

```
within user_element(user) do
  page.should have_content(@user.email)
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-12T00:29:19.697

如果您添加这样的内容（`spec/support/capybara_selectors.rb`例如，添加到 ）：

```
Capybara.add_selector(:active_record_object) do
  match { |value| value.is_a?(ActiveRecord::Base) }
  css {|record| 
    singleton_class.include ActionView::RecordIdentifier
    '#' + dom_id(record)
  }
end 
```

Then you can use an even simpler and more intuitive syntax in your tests:

```
within user do
  find('button').click
end 
```

# php - WHERE 子句在使用 mdbtools 的 SQL 查询中不起作用

> ID：15896046
> 
> 赞同：6
> 
> 时间：2013-04-09T07:38:57.497
> 
> 标签：php, ms-access, ubuntu, mdbtools

我一直在使用 LAMP 服务器进行一个项目，该服务器需要频繁**读取**存储在 *.mdb 文件中的 MS-ACCESS 数据库。该数据库有一个表和大约 40.000 行。

我已经安装`mdb-tools`并配置`unixODBC`为使用它。第一印象是积极的：

```
SELECT * FROM [Table] 
```

工作正常，但返回一个巨大的结构，溢出我的缓冲区并且数据的尾部被截断。

```
SELECT [col1], [col2], [col3] FROM [Table] 
```

工作也很好，但数据量仍然处于可用性边缘（几乎没有超过缓冲区）。所以我试图用`WHERE`语句来限制结果，但两者都没有

```
SELECT * FROM [Table] WHERE [col1]=X
nor
SELECT * FROM [Table] WHERE [col2] LIKE 'xxx'
nor
SELECT [col1], [col2], [col3] FROM [Table] WHERE [col1]=X
nor
SELECT [col1], [col2], [col3] FROM [Table] WHERE [col2] LIKE 'xxx' 
```

不工作。他们只是返回空结构。但如果条件是全匹配的 - 它有效：

```
SELECT * FROM [Table] WHERE [col2] LIKE '%' 
```

返回大量数据

我知道这`mdb-tools`是一个非常古老的解决方案，它提供只读访问 - 但这对我来说没问题。我只是想让它工作。我已经尝试了这两个版本 - 来自 sourceforge 和来自 github。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:00:41.863

如果`col1`是文本列，则使用`... WHERE [col1] = 'some text'`（注意使用引号）进行完全匹配。

`... WHERE [col1] LIKE 'xxx'`相当于`... WHERE [col1] = 'xxx'`。

使用`LIKE`通配符时`%`匹配零个或多个字符，并`_`匹配一个字符，所以

`... WHERE [col1] LIKE 'To%'`

应该匹配“Toronto”、“Tokyo”、“Toledo”等......

## 编辑

MDB Tools 命令的手册页`mdb-sql`确实声称支持`LIKE`，所以我将一个测试 .mdb 文件与一个名为 [Clients] 的表放在一起，其中包含

```
ID  LastName    FirstName       Email
--  ----------  --------------  ------------------
1   Thompson    Gord            gord@example.com
2   Loblaw      Bob             bob@example.com
3   Kingsley    Hank            hank@example.com
4   Thompson    Hunter S.       hunter@example.com 
```

我`sudo apt-get install mdbtools`在我的测试服务器（Ubuntu 12.04.02）上做了，上传了 .mdb 文件并做了以下

```
gord@pingu:~$ mdb-sql -p ~/ubuTest2003.mdb
1 => SELECT ID, LastName FROM Clients
2 => go

ID      LastName
1       Thompson
2       Loblaw
3       Kingsley
4       Thompson
4 Rows retrieved
1 => SELECT ID, LastName FROM Clients WHERE LastName LIKE 'Thomp%'
2 => go

ID      LastName
1       Thompson
4       Thompson
2 Rows retrieved 
```

如果您在使用 WHERE 子句时遇到困难，我建议在您的系统上运行类似的测试（使用小样本数据集），`mdb-sql`以查看 WHERE 子句是否在该上下文中有效。如果它们不起作用，那么您的 MDB 工具就坏了。如果它们确实有效，那么我们将需要进一步调查。

## 编辑

我花了一些时间尝试在我的 Ubuntu 12.04 测试服务器上用 PHP 重新创建这个问题。我无法这样做，只是因为我根本无法使用***PHP***`odbc_`中的函数。我可以建立一个“有效”连接（没有错误），我可以“执行”一个查询（同样，没有错误），但我无法获得任何查询来实际返回结果，甚至.`mdbtools` *`SELECT * FROM Clients`*

 *在寻求解决我的问题的帮助时，我偶然发现了 Stack Overflow 的文章[，](https://stackoverflow.com/questions/10089782/lamp-php-accessing-access-database-with-odbc-with-mdbtools-driver)这进一步阻止了我进一步追究此事。

相反，由于这显然是托管在 Windows 机器上的活动 Access 数据库，我个人会选择使用[ODBTP](http://odbtp.sourceforge.net/index.html)。它是一个免费的 (GPL) TCP/IP 协议，允许您将查询传递给 Windows 机器，然后通过*其*ODBC 驱动程序提交查询并将结果传回给您。

它确实需要在 Windows 机器上安装和运行服务，并且 PHP 客户端组件必须在 Linux 机器上编译，但如果这些要求不是太令人生畏，那么它是解决此类问题的一个非常强大的解决方案。（我过去用过几次。）

虽然 ODBTP 确实有好几年没有更新了，但它仍然有效：我刚才测试了它，我的 LAMP 服务器运行以下 PHP 脚本来查询驻留在我的旧 Vista 笔记本上的 .mdb 文件：

```
<?php
echo '<html><body><pre>';
echo "ODBTP test:\n";

$con = odbtp_connect('192.168.1.254', 
        'DRIVER={Microsoft Access Driver (*.mdb)};DBQ=c:\\__tmp\\ubuTest.mdb;UID=admin;PWD=;');
if (!$con) die('_connect error: ' . odbtp_get_error($con));
$rst = odbtp_query("SELECT * FROM Clients WHERE LastName LIKE 'Thomp%'");
if (!$rst) die('_query error: ' . odbtp_get_error($con));
while ($row = odbtp_fetch_assoc($rst)) {
    echo $row['ID'] . ': ' . $row['LastName'] . "\n";
}
echo '</pre></body></html>'; 
```

我的浏览器窗口中显示的结果是

```
ODBTP test:
1: Thompson
4: Thompson 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-12T14:33:26.090

有一阵子了...

mdb-tools 是垃圾。

* * *

最后，我们编写了自己的 Windows 服务来监听给定端口上的 SQL 查询，并通过 ADO 连接将它们代理到 Access。

所以如果只有你有这样的机会，我建议你不要使用死的 mdb-tools。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-24T19:37:25.077

我偷偷怀疑您的 WHERE col 数据包含一些特殊字符，例如单引号或双引号，或者 PrimaryKey 存在一些问题。

我正在使用 MDBTools 并且我成功地从带有通配符的表中选择 cols，但是当我尝试从数据中包含一些双引号的某个 col 中进行选择时，我得到零结果。当我在那个特定的 col 上运行 php blah.php 时，我得到了错误

CRITICAL：在索引 PrimaryKey 中找不到具有内部 id ### 的列

在第 309 行的代码中发现，但仍然没有过去... [https://github.com/brianb/mdbtools/blob/master/src/libmdb/index.c](https://github.com/brianb/mdbtools/blob/master/src/libmdb/index.c)*

# c++ - 使用 OpenMP 并行化嵌套循环

> ID：15896048
> 
> 赞同：1
> 
> 时间：2013-04-09T07:39:08.317
> 
> 标签：c++, parallel-processing, nested, openmp

我试图在我的代码中使用 OpenMP 并行化以下循环

```
 double pottemp,pot2body;
 pot2body=0.0;
 pottemp=0.0;

 #pragma omp parallel for reduction(+:pot2body) private(pottemp) schedule(dynamic)
 for(int i=0;i<nc2;i++)
    {
     pottemp=ener2body[i]->calculatePot(ener2body[i]->m_mols);
     pot2body+=pottemp;
    } 
```

对于函数“calculatePot”，该函数内部的一个非常重要的循环也已被 OpenMP 并行化

```
 CEnergymulti::calculatePot(vector<CMolecule*> m_mols)
   {
        ...

        #pragma omp parallel for reduction(+:dev) schedule(dynamic)
        for (int i = 0; i < i_max; i++)
        {
         ...
         }
     } 
```

所以看来我的并行化涉及嵌套循环。当我删除最外层循环的并行化时，似乎程序运行得比最外层循环并行化的程序快得多。测试在 8 个内核上进行。

我认为这种并行化的低效率可能与嵌套循环有关。有人建议我在并行化最外层循环时使用“折叠”。但是，由于最外层循环和内层循环之间还有一些东西，所以据说在这种情况下不能使用'collapse'。在仍然使用 OpenMP 的同时，还有其他方法可以尝试使这种并行化更有效吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:16:06.977

如果 i_max 与外循环中的 i 无关，您可以尝试融合循环（基本上是崩溃）。这是我经常做的事情，通常会给我带来小小的推动。我也更喜欢“手动”融合循环而不是使用 OpenMP，因为 Visual Studio 仅支持没有崩溃的 OpenMP 2.0，我希望我的代码可以在 Windows 和 Linux 上运行。

```
#pragma omp parallel for reduction(+:pot2body) schedule(dynamic)
for(int n=0; n<(nc2*i_max); n++) {
    int i = n/i_max; //i from outer loop
    int j = n%i_max; //i from inner loop 
    double pottmp_j = ... 
    pot2body += pottmp_j;
} 
```

If i_max depends on j then this won't work. In that case follow Grizzly's advice. But one more thing to you can try. OpenMP has an overhead. If i_max is too small then using OpenMP could actually be slower. If you add an if clause at the end of the pragma then OpenMP will only run if the statement is true. Like this:

```
const int threshold = ... // smallest value for which OpenMP gives a speedup.
#pragma omp parallel for reduction(+:dev) schedule(dynamic) if(i_max > threshold) 
```

# perl - 在 Perl 中使用类型

> ID：15896053
> 
> 赞同：1
> 
> 时间：2013-04-09T07:39:19.273
> 
> 标签：perl, object, types

多年来我一直使用 Fortran，当然也使用 Fortran 中的类型。

现在，由于我在一家新公司工作，我必须使用 Perl。

由于我的主要工作是处理文本文件中的数据并且必须通读文件，因此我想从这些数据中生成“对象”或“类型”。在 Fortran 中，我会这样做，因此进一步的工作要容易得多:)

Perl 是否可以像在 Fortran 中那样为严格的类型模式生成类型？

例如......这就是我在 Fortran 中所做的：

```
Type demoType
    integer i
    character(256) str
end Type 
```

然后我可以使用这种类型的变量。`Type(demoType) demoVar` 例如

有没有机会在 Perl 中这样工作？

对不起我的英语......我是德语母语:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:28:13.970

在 FORTRAN 中，与 C 非常相似，变量大多占据内存中的固定空间。所以`Type`像你`demoType`描述的项目是如何布局的，像字符串这样的东西必须预先分配一个最大大小。

在 Perl 中，标量值——主要是字符串和数字——占用的空间*远远*超过值本身的空间，因此不能以相同的方式映射。

要在 Perl 中编程，您必须远离实现，并让运行时系统为您处理事情。字符串的大小可以无限变化（取决于计算机的内存），关联值集的首选方法是使用*散列*（一种由任意字符串而不是数字索引的数组类型）。

例如，*单个* `demoType`值可能看起来像

```
my $demo_type = {
  i => 99,
  str => 'text'
} 
```

如果您想使用许多这样的配对，那么您应该查看 Perl 对象。

如果您没有面向对象软件的经验，那么您将面临一段漫长而迷人的旅程！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:48:28.517

我建议你看看[Modern Perl](http://www.onyxneon.com/books/modern_perl/modern_perl_a4.pdf)。
如果您想使用类型，请查看 Moose 以面向对象的方式工作并公开方法和属性。
perl 的核心是动态评估变量以将类型分配给变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T08:09:04.697

有一些 CPAN 模块可以帮助您。这是一个选项：[Class::Struct](http://search.cpan.org/~rjbs/perl-5.16.3/lib/Class/Struct.pm)（属于标准 perl 发行版，无需进一步安装）。示例（取自模块文档）：

```
use Class::Struct;

struct( Rusage => {
        ru_utime => 'Timeval',  # user time used
        ru_stime => 'Timeval',  # system time used
});

struct( Timeval => [
        tv_secs  => '$',        # seconds
        tv_usecs => '$',        # microseconds
]);

# create an object:
my $t = Rusage->new(ru_utime=>Timeval->new(), ru_stime=>Timeval->new());

# $t->ru_utime and $t->ru_stime are objects of type Timeval.
# set $t->ru_utime to 100.0 sec and $t->ru_stime to 5.0 sec.
$t->ru_utime->tv_secs(100);
$t->ru_utime->tv_usecs(0);
$t->ru_stime->tv_secs(5);
$t->ru_stime->tv_usecs(0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T18:06:20.013

我认为您可能正在尝试存储整数值和相同数字的字符串化值。

```
{
  i = 123;
  str = "123";
} 
```

如果是这样的话，你正在尝试做一些 Perl 自动为你做的事情。

```
my $integer = 123;

my $string = $integer;

print $string; 
```

* * *

另一种可能性是您需要将数字与字符串相关联。在这种情况下，您可以使用：

*   数组。

    ```
    my @data = ( 123, 'string' );

    print 'integer: ', $data[0], "\n";
    print 'string: ', $data[1], "\n"; 
    ```

*   数组参考。

    ```
    my $data = [ 123, 'string' ];

    print 'integer: ', $data->[0], "\n";
    print 'string: ', $data->[1], "\n"; 
    ```

*   哈希

    ```
    my %data = (
      123 => 'string',
    );

    print $data{123}, "\n"; 
    ```

*   哈希参考

    ```
    my $data = {
      123 => 'string',
    };

    print $data->{123}, "\n"; 
    ```

* * *

无论如何，您应该真正发布匿名示例数据，这样我们才能真正帮助您学习 Perl。

我认为您应该阅读[Perl 的文档](http://perldoc.perl.org)。这是相当[广泛的](http://perldoc.perl.org/index-language.html)。这实际上是我学习 Perl 编程的方式。

至少阅读[perlintro](http://perldoc.perl.org/perlintro.html "Perl 简介")和[perldata](http://perldoc.perl.org/perldata.html "Perl 数据类型")。如果您需要构建嵌套数据结构，您还应该看看[perldsc](http://perldoc.perl.org/perldsc.html "数据结构食谱")。

您还可以查看[learn.perl.org](http://learn.perl.org)。

# jquery - 动画和重置间隔

> ID：15896054
> 
> 赞同：0
> 
> 时间：2013-04-09T07:39:20.463
> 
> 标签：jquery

我对 jquery 有点陌生，需要一些帮助，我在网上搜索解决方案并尝试对其进行编辑以满足我的要求。我想要的是一个更改背景事件，并且内容内部还有一个滑块，当更改控件时，背景也会更改。我已经做到了，但我遇到了两个问题：

1.  我需要在单击时重置间隔（现在将其混合）
2.  我需要为直接更改的背景设置动画（缓动或淡入淡出）

这是代码：-

```
$(window).load(function(){
    var images = ['images/background/body-bg.jpg','images/background/body-bg2.jpg'];
    var i = 0;

    function changeBackground() {
        $('html').css({
            'background': function(){
                             if (i >= images.length) {
                                i=0;
                            }
                            return 'url(' + images[i++] + ')';

                        },
            'background-position':'center',
            'background-attachment':'fixed',
            'background-size':'cover'
        })
    }

    // Call it on the first time
    changeBackground();

    (function(){
        $('.sliderControl > li').children().on('click', function(){
            changeBackground();
            window.clearInterval()
        })
    })();

    // Set an interval to continue
    setInterval(changeBackground, 5000);

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:55:05.937

using js tween library you acheive this easily

[http://www.jstween.org/](http://www.jstween.org/)

```
 {
            id: "JSframe1",
            //audio: "<filename and path, without extension>",
            play: function(JQtarget, FNcallback) {
                JQtarget.find(".JSimage1").tween({

                        transform:{
                            start: 'rotate(0deg) scale( 1 )',
                            stop: 'rotate(360deg) scale( 1 )',
                            time: 0,
                            duration: 1,
                            effect:'linear'
                            },
                            width: {
                            start: 1,
                            stop: 100,
                            time: 0,
                            duration: 1,
                            units: '%'

                            },
                            height: {
                            start: 1,
                            stop: 100,
                            time: 0,
                            duration: 1,
                            units: '%'
                            },

                });
                setTimeout(FNcallback, 7000);
                $.play();
            }
        }, 
```

# mysql - MySQL char 与 int

> ID：15896055
> 
> 赞同：2
> 
> 时间：2013-04-09T07:39:24.233
> 
> 标签：mysql, types

我目前正在课堂上讨论数据类型`char`和`int`MySQL。我们有一个由 8 个个人号码组成的电话号码。但是，我们找不到它们各自的优缺点。

我们应该使用`char`类型还是`int`类型，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T07:56:27.287

如果你有一个固定的大小，那么你可以使用`char(8)`-> 8B ，mysql在固定大小的字段上工作得更快，但是如果你选择`int`-> 4B 你会节省空间，而且如果你在那个字段上有一个索引，它会工作得更快字符。

您可以使用 char(8) 和 int 做一个简单的基准测试来测试写入和读取的速度

如果您有固定大小，则使用可变长度类型（如**varchar 或 varbinary**）是**没有意义的，因为性能会****降低**

 ***** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:44:34.497

取决于您要如何表示电话号码，您是否需要区号、国家/地区代码之类的东西，您是将其保存为单列还是将其拆分？

就个人而言，我会选择用 datatype 将区号、国家代码和电话号码表示为 3 列`int`，因为这样可以更容易地找到一个地区的所有电话号码，依此类推。但是，如果它的唯一目的是成为一个类似字符串值，那么 char 就足够了，但是`varchar`如果您有多个国家/地区的电话号码，我会考虑使用 char。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T07:57:38.183

不知道美国的具体情况，但在欧洲，国家接入码是前导 0 ，国际接入码是前导 00 或 +。所以这是使用 INT 的一个缺点，因为前导 0 会丢失。此外，您还有包含姓名的电话号码，即使这些姓名可以转换为数字，将它们保留为姓名可能会很好。这是使用 INT 的第二个缺点。最后一个缺点是您还可以拥有分机号码等。一切都支持 VARCHAR。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T07:44:41.010

我开始`VARCHAR`用于存储电话号码，因为它为您提供了更多不同国家/地区格式的范围。存储很便宜。****

# android - 处理人声

> ID：15896056
> 
> 赞同：0
> 
> 时间：2013-04-09T07:39:27.013
> 
> 标签：android, audio, fft

我正在尝试制作一个 android 应用程序来检查一个人录制的声音是否是高频的。我已经完成了录制部分，但不知道如何进一步进行。经过搜索，我发现必须使用 FFT 算法，但问题是如何获取必须作为输入传递给算法的数组值。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:54:48.320

假设您已经定义了“包含高频”的含义，并且您只需要对此进行测量（无需在图表中可视化频率内容），则实际上无需计算 FFT。

我将计算信号的 RMS 值（总能量的度量），然后对数据应用低通滤波器（在时域中）并再次计算滤波后的信号的 RMS 值。比较能量损失是衡量您的初始能量值有多少高频成分。

回复评论：

您需要数据才能处理它！也许我不明白你的问题？您希望“获得确切值”的内容您已经说过您“完成了记录部分”，所以我假设您将信号存储在内存中，现在您需要计算信号的总能量以便 A)计算滤波后的能量变化或B）将能量与一些预定义的硬编码值进行比较（顺便说一句坏主意）。

无论哪种方式，如果您想要的只是一个度量/值，这应该在时域中完成。正如 Parseval 定理所述，无需执行 cpu 密集处理并转到频域来计算信号的能量。[http://en.wikipedia.org/wiki/Parseval](http://en.wikipedia.org/wiki/Parseval) 's_theorem

阐述：

当您录制用户的声音（为您的信号收集数据）时，您需要确保数据不会丢失并正确存储在内存中（在某些数组类型的对象中）并且您有对该数组的引用。收集数据后，您无需将信号转换为值，它已经存储为一系列值。因此，您现在已准备好执行一些计算，以衡量“有多少高频”......

RMS（均方根）值是测量信号总能量的标准化方法 - 您采用“所有值平方平均值的平方根”。见[http://mathworld.wolfram.com/Root-Mean-Square.html](http://mathworld.wolfram.com/Root-Mean-Square.html)

RMS 计算起来既快速又容易，但它为您提供了总信号、低频分量和高频分量的能量，并且无法知道高 RMS 值是由于大量高频分量还是低频率成分。因此，我建议您去除高频分量并再次计算 RMS 值，以查看这样做的总能量变化了多少，即。高频对初始“原始” RMS 值的影响有多大。将这两个值相除是您的高频比率测量...我不确定这是您想要做的，但这是我会做的。

为了执行低通滤波，你需要选择一个频率值 Fcut 并说任何超过这个值的东西都被认为是“高”，然后应用一个截止点设置为 Fcut 的低通滤波器，应用一个滤波器是在时域中完成的卷积的手段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:47:11.680

通常他们使用[AudioRecord](http://developer.android.com/reference/android/media/AudioRecord.html)类。它写入原始 PCM 数据，然后他们可以对数据进行一些计算。

# python - 隐藏控制台窗口

> ID：15896062
> 
> 赞同：3
> 
> 时间：2013-04-09T07:39:42.013
> 
> 标签：python, tkinter, cx-freeze

**问题**

我开始使用 Python 和 Tkinter 设计 GUI 应用程序。当我使用 cxFreeze 冻结脚本时，然后当我在机器上运行该 EXE 文件时。然后首先打开控制台窗口（在 Windows XP 的情况下为黑色 DOS shell），然后初始化主窗口（Tk() 实例）。

**目标**

不得出现控制台窗口。只有 Tk() 实例应该出现。

**代码**

```
root = Tk()

Label(root,text="hey").pack()

root.mainloop() 
```

**眼镜**

视窗 XP SP 3

蟒蛇 2.7

Tkinter 8.5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T07:47:11.007

使用[py2exe](http://py2exe.org/)时使用`windows=['main.py']`而不是`console=['main.py']`在[创建 setup.py时](http://py2exe.org/index.cgi/Tutorial#Step2)

对于 cx_Freeze，这个答案可能会对您有所帮助：[https ://stackoverflow.com/a/11374527/2256700](https://stackoverflow.com/a/11374527/2256700)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-10T16:34:26.200

I'm not sure if this is the answer anyone is looking for, but renaming the file extension from .py to .pyw under Python 3.4 and Win32 will effectively suppress the Python shell. You'll just get your Tk GUI window.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T07:47:11.277

假设您的 python 脚本称为“myscript.py”。

创建一个名为`runme.vbs`包含代码的文件：

```
Set WshShell = CreateObject("WScript.Shell")
cmds=WshShell.RUN("myscript.py", 0, True)
Set WshShell = Nothing 
```

# python - 一种在不生成新列表的情况下删除元素所有实例的pythonic方法

> ID：15896064
> 
> 赞同：0
> 
> 时间：2013-04-09T07:39:50.833
> 
> 标签：python, list, data-structures

有很多与此类似的问题（[这里是一个](https://stackoverflow.com/questions/1207406/remove-items-from-a-list-while-iterating-in-python)），但我见过的解决方案使用列表理解或过滤器，这些方法会生成一个新列表（或者在 Python 3.x 中的过滤器的情况下生成一个新的迭代器）。有一些解决方案可以通过修改列表本身来删除实例（[比如 this](https://stackoverflow.com/questions/2629198/python-remove-items-from-a-list-while-iterating-in-python?rq=1)和[this](https://stackoverflow.com/questions/1157106/remove-all-occurences-of-a-value-from-a-python-list)），这将是我最后的手段。但是，我想看看是否有更优雅（另一个问题称之为“Pythonic”）的方式来做这件事。

为什么我不考虑生成新列表的解决方案：我正在迭代一组列表，Python 允许我修改正在迭代的“当前”列表，但不能完全替换它：

```
>>> ll= [[1,2,3], [2,3,4], [4,5,6]]

>>> for l in ll:
        if l[0] == 2:
            l = [10]
>>> ll
[[1, 2, 3], [2, 3, 4], [4, 5, 6]]   #replacement didn't happen

>>> for l in ll:
        if l[0] == 2:
            l.remove(2)
>>> ll
[[1, 2, 3], [3, 4], [4, 5, 6]]   #modification succeeded 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T07:41:30.827

您需要使用切片分配来替换所有列表*元素*而不是列表本身：

```
for l in ll:
    if l[0] == 2:
        l[:] = [10] 
```

该`[:]`部分将其转换为切片分配；不是替换参考`l`点，而是用新列表替换其中包含*的**所有*元素。 *`l`*

 *演示：

```
>>> ll= [[1,2,3], [2,3,4], [4,5,6]]
>>> for l in ll:
...     if l[0] == 2:
...         l[:] = [10]
... 
>>> ll
[[1, 2, 3], [10], [4, 5, 6]] 
```*

# java - 如何处理url android中的空格

> ID：15896070
> 
> 赞同：2
> 
> 时间：2013-04-09T07:40:04.257
> 
> 标签：java, android, url, login

当我尝试在 url android 中运行一些空格时出现错误，这是代码：

```
 String strUrlLoginFullpath = "";

              strUrlLoginFullpath = strUrlMain+"exl?u="+strUser+"&p="+strPass+"&t=1";

              URL url = new URL(strUrlLoginFullpath);
              publishProgress(40);

              //membuka koneksi
              URLConnection urlConn = url.openConnection();
              urlConn.setConnectTimeout(50000);
              urlConn.setReadTimeout(50000);

              //digunakan untuk menangkap nilai dari server
              BufferedReader in = new BufferedReader(
                      new InputStreamReader(
                              urlConn.getInputStream()));
              publishProgress(60);
              String inputLine;
              int i=0;
              while ((inputLine = in.readLine()) != null)
              {     
                  Log.v("Login",i+", return:" +inputLine+"; url: "+strUrlLoginFullpath);
                  if(i == 5)
                      {
                        Log.v("Login","RESULT >"+i+", return:" +inputLine+"; url: "+strUrlLoginFullpath);
                        str2 = inputLine;
                      }
                  i++;
              }
              in.close();

              publishProgress(80);

              publishProgress(100);
          } 
          catch (MalformedURLException e) 
          {
                Log.v("KxL", "MalformedURLException=" + e.toString());
          } 
          catch (IOException e) 
          {
                Log.v("KxL", "IOException=" + e.toString());
          } 
          return null;
    } 
```

如您所见..我有进行登录验证的命令， `strUrlLoginFullpath = strUrlMain+"exl?u="+strUser+"&p="+strPass+"&t=1";`但条件是**strUser**有时包含空格，这会使我的程序无法运行。那么如何解决这个问题。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T07:42:25.550

[`URLEncoder.encode()`](http://developer.android.com/reference/java/net/URLEncoder.html)您的 URL 参数值，以便正确编码空格和其他特殊字符。

例子：

```
strUrlLoginFullpath = strUrlMain + "exl?u=" + URLEncoder.encode(strUser, "UTF-8") +
    "&p=" + URLEncoder.encode(strPass, "UTF-8") + "&t=1"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:43:22.017

URL 中不允许使用空格。相反，您应该对它们进行 URL 编码 - 用替换所有空格，`%20`并且事情应该在另一端出现。

如果有任何其他特殊字符（在 URL 中被认为是特殊字符）可能出现在任何这些字符串中，至少对于密码来说这似乎很有可能，那么您应该使用合适的 URL 编码函数对整个字符串进行 URL 编码以避免任何问题或安全问题。

忽略，即在 URL 的查询字符串中传递密码的安全问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T08:42:21.457

尝试使用`URLEncoder.encode()`

```
strUrlLoginFullpath = strUrlMain+"exl?u="+ URLEncoder.encode(strUser)+"&p="+URLEncoder.encode(strPass)+"&t=1"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-18T17:00:16.217

创建 url 字符串后，只需执行以下操作：

`strUrlLoginFullpath = strUrlMain+"exl?u="+strUser+"&p="+strPass+"&t=1"; strUrlLoginFullpath.replace(" ", "20%")`

# ruby-on-rails - 未定义的方法“end_with？” 对于“耙子中止！”：字符串（NoMethodError）

> ID：15896073
> 
> 赞同：0
> 
> 时间：2013-04-09T07:40:18.827
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-2

每当我输入 rake db:migrate 或 rake -T 时，我一直面临运行 rake 任务/命令的问题，它显示错误说未定义的方法 `end_with?' 对于“rake aborted!”：String (NoMethodError)。使用 ruby​​186、rails238 和 gem 版本 1.3.3

```
rake db:migrate
/home/projects/.rvm/gems/ruby-1.8.6-p420@global/gems/rubygems-bundler-1.1.0/lib/rubygems-bundler/regenerate_binstubs_command.rb:48: warning: parenthesize argument(s) for future version
/home/a3logics/.rvm/gems/ruby-1.8.6-p420@global/gems/rake-10.0.3/lib/rake/trace_output.rb:14:in `trace_on': undefined method `end_with?' for "rake aborted!":String (NoMethodError)
from /home/a3logics/.rvm/gems/ruby-1.8.6-p420@global/gems/rake-10.0.3/lib/rake/trace_output.rb:14:in `map'
from /home/a3logics/.rvm/gems/ruby-1.8.6-p420@global/gems/rake-10.0.3/lib/rake/trace_output.rb:14:in `trace_on'
from /home/a3logics/.rvm/gems/ruby-1.8.6-p420@global/gems/rake-10.0.3/lib/rake/application.rb:322:in `trace'
from /home/a3logics/.rvm/gems/ruby-1.8.6-p420@global/gems/rake-10.0.3/lib/rake/application.rb:176:in `display_error_message'
from /home/a3logics/.rvm/gems/ruby-1.8.6-p420@global/gems/rake-10.0.3/lib/rake/application.rb:169:in `standard_exception_handling'
from /home/a3logics/.rvm/gems/ruby-1.8.6-p420@global/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
from /home/a3logics/.rvm/gems/ruby-1.8.6-p420@global/gems/rake-10.0.3/bin/rake:33
from /home/a3logics/.rvm/gems/ruby-1.8.6-p420@global/bin/rake:19:in `load'
from /home/a3logics/.rvm/gems/ruby-1.8.6-p420@global/bin/rake:19
from /home/a3logics/.rvm/gems/ruby-1.8.6-p420/bin/ruby_noexec_wrapper:14 
```

我被困在这里的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:10:29.583

看起来像 rake 源中的错误，`end_with?`应该`ends_with?`在 trace_output.rb 中。尝试不同版本的 rake，我使用 0.9.2.2 没有任何问题。

# linux - 从 SVN 更新/下载实际文件

> ID：15896074
> 
> 赞同：0
> 
> 时间：2013-04-09T07:40:19.153
> 
> 标签：linux, svn

我在没有提交到 SVN 的情况下紧急更改了文件中的某些内容。也就是说，我没有对本地计算机进行更改并提交这个，而是立即更改了服务器上的文件（这就是原因）。

告诉我，如何从计算机上的服务器下载文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:37:23.840

**如果** *您的服务器空间是工作副本* **，而**您的*本地工作场所是工作副本*（并且两个 WC 都绑定到同一个 Repo-URL），您可以从服务器提交并从本地更新

如果您的服务器不是 WC，那么您在同步不同的更改时会更加头疼

# jquery - Dynatree 延迟加载不工作

> ID：15896075
> 
> 赞同：0
> 
> 时间：2013-04-09T07:40:22.553
> 
> 标签：jquery, dynatree, jquery-dynatree

我正在创建一个 dynatree 并加载与示例中提供的相同的数据：

[http://wwwendt.de/tech/dynatree/doc/sample-lazy.html](http://wwwendt.de/tech/dynatree/doc/sample-lazy.html)

只有我的惰性节点（子项 2.3（惰性））没有显示为可扩展，并且 onLazyRead() 永远不会触发。

```
$("#tree").dynatree({
    title: "Lazy loading sample",
    autoFocus: false,
    initAjax: {
        url: "sample-data3.json"
    },
    onLazyRead: function(node){
        console.log("LAZY");
    }
}); 
```

数据：

[http://wwwendt.de/tech/dynatree/doc/sample-data3.json](http://wwwendt.de/tech/dynatree/doc/sample-data3.json)

是与示例页面加载完全相同的数据。惰性节点如下所示：

```
{"title": "Sub-item 2.3 (lazy)", "isLazy": true } 
```

但没有显示展开图标：

![在此处输入图像描述](https://i.stack.imgur.com/wL9TF.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:53:55.460

问题是我有一个缺少延迟加载图标的自定义 icons.gif 文件。

# php - PHP：使用 fwrite 时已发送标头，但使用 fputcsv 时未发送

> ID：15896079
> 
> 赞同：2
> 
> 时间：2013-04-09T07:40:26.993
> 
> 标签：php, file-io, http-headers

我知道这个错误背后的理论，但它现在又让我发疯了。我在我的应用程序中使用[Tonic](http://peej.github.io/tonic/)。使用这个库，您可以将所有流量重定向到您的`dispatch.php`脚本，然后执行适当的`Resource`并`Resource`返回`Response`由`dispatch.php`.

的输出方法`Response`如下：

```
/**
 * Output the response
 */
public function output()
{
    foreach ($this->headers as $name => $value) {
        header($name.': '.$value, true, $this->responseCode());
    }
    echo $this->body;
} 
```

所以 AFAIK 这告诉我们你不能在 .php 文件中写任何东西到 php 输出`Resource`。

我现在有一个`Resource`从输入 csv 动态生成 csv 并将其输出到浏览器（它将 1 列数据转换为不同格式）。

```
$csv = fopen('php://output', 'w');
// sets header
$response->__set('contentDisposition:', 'attachment; filename="' . $fileName . '"');
while (($line = fgetcsv($filePointer, 0, ",", '"')) !== FALSE) {
    // generate line
    fputcsv($csv, $line);
}
fclose($filePointer);
return $response; 
```

这可以 100% 正常工作。标题没有问题，并且生成了正确的文件并提供下载。这已经令人困惑了，因为我们在设置标头之前写入输出？fputcsv 实际上做了什么？

我有第二个资源做类似的事情，但它输出自定义文件格式（文本文件）。

```
$output = fopen('php://output', 'w');
// sets header
$response->__set('contentDisposition:', 'attachment; filename="' . $fileName . '"');
while (($line = fgetcsv($filePointer, 0, ",", '"')) !== FALSE) {
    // generate a record (multiple lines) not shown / snipped
    fwrite($output, $record);
}
fclose($filePointer);
return $response; 
```

唯一的区别是它使用 fwrite 而不是 fputcsv 和 bang

```
 headers already sent by... // line number = fwrite() 
```

这非常令人困惑！恕我直言，在这两种情况下它实际上都应该失败吗？为什么第一个有效？我怎样才能让第二个工作？（我可以生成一个包含文件的巨大字符串并将其放入响应正文中并且它可以工作。但是文件可能相当大（高达 50 mb），因此希望避免这种情况。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:49:42.820

`$record`未设置，生成 level 错误`NOTICE`。如果必须`error_reporting`，`true`PHP 会在发送标头之前将此错误放在输出中。

设置`error_reporting`为 false 并留意您的日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:10:51.650

这是我的解决方案。我暂时不会将其标记为答案，因为也许有人想出了比这更好（更简单）的东西。

首先是关于 fwrite 和 fputcsv 的评论：

fputcsv 有一个完全不同的源，与 fwrite 没有太多共同之处（它在内部不调用 fwrite，它是 C 源代码中的一个单独的函数）。因为我不知道 CI 无法说出为什么他们的行为不同，但他们确实如此。

解决方案：

生成的文件可能是“大”的，具体取决于输入，因此通过字符串连接生成整个文件并将其保存在内存中并不是一个很好的解决方案。

我用谷歌搜索了一下，找到了 apache 的 mod_xsendfile。这通过在 php 中设置一个自定义标头来工作，该标头包含要发送给用户的文件的路径。然后 mod 删除该自定义标头并将文件作为响应发送。

mod_xsendfile 的问题在于它与我也使用的 mod_rewrite 不兼容。您将收到 404 错误。要解决此问题，您需要添加

```
RewriteCond %{REQUEST_FILENAME} !-f 
```

到 apache 配置中的相应位置（如果请求是针对实际物理存在的文件，则不要重写）。然而，这还不够。您需要在未重写的 php 脚本中设置标头 X-Sendfile，它是一个实际存在的 php 文件。

因此，在最后生成文件的 \Tonic\Resource 类中，我重定向到上述脚本：

```
$response->__set('location', $url . "?fileName=" . urlencode($fileName));
$response->code = \Tonic\Response::FOUND;
return $response; 
```

在我们重定向到上面代码片段的下载脚本中，只需执行（省略验证内容）：

```
$filePath = trim($_GET['fileName']);
header ('X-Sendfile: ' . $filePath);    
header ('Content-Disposition: attachment; filename="' . $filePath . '"'); 
```

and the browser will display a download dialog for the generated file.

You will also need to create cron job to delete the generated files.

```
/usr/bin/find /path/to/generatedFiles/ -type f -mmin +60 -exec rm {} + 
```

this will delete all files older than 60 min in directory `/path/to/generatedFiles`.

I use ubuntu server so you can add it to the file

```
/etc/cron.daily/standard 
```

or generated a new file in that directory or generated a new file in `/etc/cron.hourly` containing that command.

Note:

I name the generated files after the sha1 hash of the input csv file so the name is unique and if someone repeats the same requests several times in a short period you can just return the already generated file a second time.

# php - 认证表格

> ID：15896082
> 
> 赞同：0
> 
> 时间：2013-04-09T07:40:31.040
> 
> 标签：php

大家好，我尝试在 php 中做一个 Authenticate 表单。

首先我创建一个表单

```
<form id="frmlogin" name="frmlogin"  method="post" action="validarUsuario.php">
    <table align="center" width="200px">
        <tr>
            <td colspan="2" align="center"><h3>Iniciar sesi&oacute;n</h3></td>
        </tr>
        <tr>
            <td>Usuario</td>
            <td>
                <input type="text" name='usuario' id="usuario"  maxlength="50">
            </td>
        </tr>

        <tr>
            <td>Password</td>
            <td>
                <input type="password" name='password' id="password"  maxlength="50">
            </td>
        </tr>
        <tr>
            <td colspan="2" align="right">
                <input type="submit" name="enviar" value="Enviar" >
            </td>

        </tr>

        <?php 
```

我调用了validarUsuario，所以我包含了require_once '../Classes/validarUsuario.php';

在 validarUsuario.php 我有这个代码

```
include("conectar_bd.php");
conectar_bd();

$usr = $_POST['usuario'];
$pw = $_POST['password'];
//Obtengo la version encriptada del password
$pw_enc = md5($pw);

$sql = "SELECT * FROM ubc_admin_user
            WHERE username = '".$usr."'
            AND password = '".$pw_enc."' ";

$result     =mysql_query($sql,$conexio);

$uid = ""; 
```

但我收到此错误

```
Notice: Undefined index: usuario in /Users/yp/Sites/.../Classes/validarUsuario.php on line 14 Call Stack: 0.0018 646416 1\. {main}() /Users/yp/Sites/.../download/index.php:0 0.0020 654048 2\. require_once('/Users/yp/Sites/.../validarUsuario.php') /Users/yp/Sites/.../index.php:38 Notice: Undefined index: password in /Users/yp/Sites/...validarUsuario.php on line 15 Call Stack: 0.0018 646416 1\. {main}() /Users/../index.php:0 0.0020 654048 2\. require_once('/Users/yp/Sites/.../validarUsuario.php') /Users/yp/Sites/../index.php:38 
```

任何的想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:43:02.527

将您的代码更改为此

```
if (isset($_POST['Enviar'])) {
    $usr = $_POST['usuario'];
    $pw = $_POST['password'];
    //Obtengo la version encriptada del password
    $pw_enc = md5($pw);

    $sql = "SELECT * FROM ubc_admin_user WHERE username = '".$usr."'AND password = '".$pw_enc."' ";

    $result     =mysql_query($sql,$conexio);

    $uid = "";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:49:07.837

检查是否接收到值。

```
if (isset($_POST['usuario'])) {

}
if (isset($_POST['password'])) {

} 
```

还要确保接收文件的路径正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:54:08.717

在您的 HTML 表单中，名称值上有单引号 (')。所以你应该改变这个：

```
name='usuario'
name='password' 
```

到：

```
name="usuario"
name="password" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T07:55:14.690

您不需要这样做，`require_once '../Classes/validarUsuario.php';`因为您的表单会在表单提交后将您重定向到该页面。删除该行。

或者您可以将表单重定向到与表单相同的地址并添加检查`isset`。

代替：

```
<form id="frmlogin" name="frmlogin"  method="post" action="validarUsuario.php"> 
```

和：

```
<form id="frmlogin" name="frmlogin"  method="post" action=""> 
```

和：

```
require_once '../Classes/validarUsuario.php'; 
```

和：

```
if(isset($_POST['usuario'])){
    require_once '../Classes/validarUsuario.php';
} 
```

# algorithm - 寻找输入小输出长的单向函数

> ID：15896088
> 
> 赞同：1
> 
> 时间：2013-04-09T07:41:00.203
> 
> 标签：algorithm, hash, cryptography, entropy

我正在寻找一种算法，它是一种单向函数，如哈希函数。该算法接受一个小的输入（几个位，小于 512 位），并将其映射到一个长输出（1K 字节或更多）。你知道这样的算法或函数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T07:59:12.003

根据[香农定理](http://www3.alcatel-lucent.com/bstj/vol28-1949/articles/bstj28-4-656.pdf)，除非密钥（或创建密文的过程）对于任何输入都不同，否则您不会通过拥有比纯文本更大的密文来获得任何安全性。即使在这种情况下，您也只需为每个输入分配一个键（或机制），`x` 否则您违反了函数的定义。因此，如果您应用加密机制 f：X（输入集）-> Y（输出集），则`|Y| <= |X|`.

所有这一切都表明，如果您的输入小于`512`位，则通过产生`1KB`输出您将一无所获。[现在，我建议您使用单向函数 wiki 页面](http://en.wikipedia.org/wiki/One-way_function)上列出的函数之一

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T15:56:39.973

[Keccak](http://keccak.noekeon.org/)具有可变长度输出，（尽管未在 SHA-3 中评估），它是“安全声明与输出长度分离。有一个最小输出长度......”并且[Skein](http://www.skein-hash.info/about)散列函数的可变输出高达[16艾字节](http://www.schneier.com/skein1.3.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:59:36.760

无论您的原因是什么，您都可以使用不同的算法计算相同小数据的哈希值，然后将这些哈希值连接起来。如果输出不够大，计算散列的散列并附加它们。

正如其他答案所指出的，从安全角度来看，这没有多大意义。

# sql - 案例比较数字并给出名称

> ID：15896095
> 
> 赞同：1
> 
> 时间：2013-04-09T07:41:21.567
> 
> 标签：sql, database, select, case

我遇到的问题是我有一个名为 cate 的列，其数字为 1 到 5，但我想要打印输出中的别名。例如，如果该列的数字为 1，我想要结果集中的 STONE，如果它是 2，我想要“TREE”。

我应该看起来像

```
 Select
    case when t.cate = 1 then t.cate="STONE"
    case when t.cate = 2 then t.cate="TREE"
    else null end as test from dbt.tbl t 
```

我不想仅在打印输出中更改表中的值。

知道我该怎么做吗？

感谢您提前提供的所有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:42:37.410

删除多余的案例，

```
SELECT  CASE WHEN t.cate = 1 THEN 'STONE'
             WHEN t.cate = 2 THEN 'TREE'
             ELSE null 
         END AS test 
FROM    dbt.tbl t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:56:13.963

或者，您可以编写

```
SELECT
  CASE t.cate
    WHEN 1 THEN 'STONE'
    WHEN 2 THEN 'TREE'
    ELSE NULL
  END AS test
FROM dbt.tbl t 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:47:41.703

如果该列表将来可能会更改（通过编辑或添加），我会将其作为单独的表格进行：

```
INSERT INTO Cates (Cate,Description) VALUES
(1,'Stone'),
(2,'Tree') --Etc 
```

然后做：

```
SELECT c.Description as Test
FROM dbt.tbl t inner join Cates c on t.Cate = c.Cate 
```

# java - 使用 XPath 解析损坏的 HTML 站点

> ID：15896097
> 
> 赞同：1
> 
> 时间：2013-04-09T07:41:28.083
> 
> 标签：java, html, xml, xpath

我在这里只收到关于 python 的问题，而我发现的工具主要是针对 python 的，所以新问题：我需要使用 XPath 从 HTML 站点查询一些东西。

我当前的代码如下所示：

```
URL url = new URL("http://somesite.com");
connection = (HttpURLConnection) url.openConnection();
connection.connect();

Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder()
                                     .parse(new InputSource(connection.getInputStream()));

XPathFactory xPathfactory = XPathFactory.newInstance();
XPath xpath = xPathfactory.newXPath();
XPathExpression expr = xpath.compile("//span[@class='a-class']");
String price = (String) expr.evaluate(doc, XPathConstants.STRING); 
```

问题是，页面已损坏或 XPath 有一些阅读问题：

> [致命错误]：4:254：实体名称必须紧跟在实体引用中的“&”之后。
> org.xml.sax.SAXParseException；行号：4；列号：254；实体名称必须紧跟实体引用中的“&”。
> 在 com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:251)
> 在 com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:300)

有什么工具可以更好地阅读html网站吗？还是我应该只在页面上使用正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:43:20.033

> 有什么工具可以更好地阅读html网站吗？

人们对[jsoup](http://jsoup.org/)评价很高。

# java - 使用 org.apache.commons.fileupload 在 mysql 数据库中上传图像，但调用 servlet 会给出一个空白页

> ID：15896101
> 
> 赞同：0
> 
> 时间：2013-04-09T07:41:39.670
> 
> 标签：java, jsp, servlets, file-upload

我想用.jsp和servlet的图像上传mysql数据库中囤积的详细信息，但是当我调用我的servlet时，它给出了一个空白页..

我的.jsp

```
<form action="HoardingProfile" method="post" enctype="multipart/form-data">
    <table style="height: 100%; width:100%;">
        <tr style="height: 10%;">
            <td class="tdleft" style="width: 50%;">
                <h3>Location</h3>
            </td>
            <td style="width: 50%;">
                <input type="text" class="tx bk" name="txtLocation"
                    placeholder="Location" required="yes">
            </td>
        </tr>
        <tr style="height: 02%">
            <td>&nbsp;
            </td>
        </tr>
        <tr style="height: 10%;">
            <td class="tdleft" style="width: 50%;">
                <h3>Size</h3>
            </td>
            <td class="padd10" style="width: 50%;">
                <input class="tx bk" type="text" name="txtSize" placeholder="Size"
                    required="yes">
            </td>
        </tr>
        <tr style="height: 02%">
            <td>&nbsp;
            </td>
        </tr>
        <tr style="height: 10%;">
            <td class="tdleft" style="width: 50%;">
                <h3>Owner Name</h3>
            </td>
            <td style="width: 50%;">
                <input type="text" class="tx bk" placeholder="Owner Name"
                    required="yes" name="txtName">
            </td>
        </tr>
        <tr style="height: 02%">
            <td>&nbsp;
            </td>
        </tr>
        <tr style="height: 10%;">
            <td class="tdleft" style="width: 50%;">
                <h3>Contact No.</h3>
            </td>
            <td style="width: 50%;">
                <input type="text" class="tx bk" placeholder="Number"
                    required="yes" name="txtNumber">
            </td>
        </tr>
        <tr style="height: 02%">
            <td>&nbsp;
            </td>
        </tr>
        <tr style="height: 10%;">
            <td class="tdleft" style="width: 50%;">
                <h3>Address</h3>
            </td>
            <td style="width: 50%;">
                <textarea class="tx bk2" placeholder="Address" required="yes"
                    name="txtAddress"></textarea>
            </td>
        </tr>
        <tr style="height: 02%">
            <td>&nbsp;
            </td>
        </tr>
        <tr style="height: 15%;">
            <td class="tdleft" style="width: 50%;">
                <h3>Picture</h3>
            </td>
            <td style="width: 50%;">
                <input type="file" name="file" id="file">
            </td>
        </tr>
        <tr style="height: 02%">
            <td>&nbsp;
            </td>
        </tr>
        <tr style="height: 10%;">
            <td class="tdleft" style="width: 50%;">
                <h3>Google map</h3>
            </td>
            <td style="width: 50%;">
                <textarea class="tx bk2" placeholder="Google Map iframe"
                    name="txtMap"></textarea>
            </td>
        </tr>
        <tr style="height: 02%">
            <td>&nbsp;
            </td>
        </tr>
        <tr style="height: 10%;">
            <td class="tdleft" style="width: 80%;">
                <input class="btn" type="submit" name="Add" value="Save"
            </td>
            <td style="width: 20%;">
                <input class="btn" type="reset" value="Reset"
            </td>
        </tr>
    </table>
</form> 
```

和我的 servlet

```
 PrintWriter out = response.getWriter();
    try {
        // Apache Commons-Fileupload library classes
        DiskFileItemFactory factory = new DiskFileItemFactory();
        ServletFileUpload sfu  = new ServletFileUpload(factory);

        if (! ServletFileUpload.isMultipartContent(request)) {
            System.out.println("Sorry. No file uploaded");
            return;
        }

        // parse request
        List<FileItem> items = sfu.parseRequest(request);
        out.print(items);
        FileItem  txtLocation = (FileItem) items.get(0);
        String location =  txtLocation.getString();
        out.println(location);
        FileItem txtSize = (FileItem) items.get(1);
        String   size =  txtSize.getString();
        out.println(size);
        FileItem txtName = (FileItem) items.get(2);
        String   name =  txtName.getString();
        out.println(name);
        FileItem txtNumber = (FileItem) items.get(3);
        String   number =  txtNumber.getString();
        out.println(number);
        FileItem txtAddress = (FileItem) items.get(4);
        String   address =  txtAddress.getString();
        out.println(address);
        // get uploaded file
        FileItem file = (FileItem) items.get(5);

        // Connect to Oracle
        Class.forName("com.mysql.jdbc.Driver");
        Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/opm?zeroDateTimeBehavior=convertToNull","root","");
        con.setAutoCommit(false);

        PreparedStatement ps = con.prepareStatement("insert into hprofile(location,size,owner,address,phone,deleted,img) values(?,?,?,?,?,?,?)");
        ps.setString(1, location);
        ps.setString(2, size);
        ps.setString(3, name);
        ps.setString(4, number);
        ps.setString(5, address);
        // size must be converted to int otherwise it results in error
        ps.setBinaryStream(6, file.getInputStream(), (int) file.getSize());
        ps.executeUpdate();
        con.commit();
        con.close();
        out.println("Proto Added Successfully. <p> <a href='listphotos'>List Photos </a>");
    }
    catch(Exception ex) {
        out.println( "Error --> " + ex.getMessage());
    }
     finally {            
        out.close();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T05:06:59.760

我发现我在链接库时犯了一些错误......

# django - Python 和 Django 博客示例项目

> ID：15896109
> 
> 赞同：0
> 
> 时间：2013-04-09T07:42:34.110
> 
> 标签：django, django-models, python-2.7, django-forms, django-views

我是 python 和 Django 的新手，我已经开始了一个示例项目“博客”。

目前博客文章是手动添加到数据库中的，但我想在前端通过向用户提供表单来完成。我创建了我的`model.py`和`views.py`文件，但我无法在前端看到这些字段。我在下面复制了我的所有代码：

**模型.py**：

```
class posts(models.Model): 
    author = models.CharField(max_length = 30) 
    title = models.CharField(max_length = 100) 
    bodytext = models.TextField() 
    timestamp = models.DateTimeField() 

class postForm(ModelForm): 
    class Meta: 
         model = posts 
```

**视图.py**：

```
def home(request):
    content = posts.objects.all()[:5]
    return render_to_response('index.html',{'posts' : content})

def save_blog(request):      
    form = postForm
    if request.POST:
        form = postForm(request.POST)
        if form.is_valid():
            form.save
    return render_to_response('index.html',{'form' : form},context_instance=RequestContext(request)) 
```

**网址.py**：

```
from django.conf.urls import patterns, include, url    
from django.contrib import admin   
admin.autodiscover()

urlpatterns =
    patterns('',
        url(r'^$', 'blog.views.home', name='home'),
        url(r'^admin/', include(admin.site.urls))
    ) 
```

**索引.html**：

```
<body>
    <div class="container">
        <h1>Welcome To</h1>
        <hr />
        {% for post in posts %} 
            <div class="posts">
                <h2>{{ post.title }}</h2>
                <h3>Posted on {{ post.timestamp }} by {{ post.author }}</h3>
                <p>{{ post.bodytext }}</p>
            </div>
            <hr />
        {% endfor %}
    </div>
    <div class="forms">
        <form action="." method="post" name="posts" id="posts">{% csrf_token %}
        <table>
        <tr><td>{{form.author.label}}</td><td>{{form.author}}</td></tr>
        <tr><td>{{form.title.label}}</td><td>{{form.title}}</td></tr>
        <tr><td>{{form.bodytext.label}}</td><td>{{form.bodytext}}</td></tr>
        <tr><td></td><td><input type="button" name="btnSave" id="bntSave" value="Submit"  class = "default2"/></td>
        </table>
        </form>
    </div>
</body> 
```

**settings.MIDDLEWARE_CLASSES**：

```
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
) 
```

如果我遗漏任何东西，请告诉我。也让我知道如何在不使用 Django 模型表单的情况下实现这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:46:07.673

看起来您调用了您的表单`postForm`，但正在`posts_form`您的视图中使用...

我也不确定是什么`form_save`，您应该调用[`save()`](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#the-save-method)表单实例，例如

```
if form.is_valid():
    form.save() 
```

在发布后，通常会将用户重定向到另一个 url 以防止重新提交数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:09:28.577

视图.py

```
def home(request):
     content = posts.objects.all()[:5]
     form = postForm() 
     if request.POST:
         form = postForm(request.POST) 
         if form.is_valid():
             form.save()
     return render_to_response('index.html',{'posts' : content, 'form' : form}, context_instance=RequestContext(request)) 
```

索引.html

```
<div class="forms">
    <form method="post" name="posts" id="posts">
        {% csrf_token %}
        {{ form.as_table }}
        <input type="button" name="btnSave" id="bntSave" value="Submit" class="default2"/>    //<---------------
    </form>
</div> 
```

更新：

好的，我现在明白为什么它不提交了。你把`button`而不是`submit`输入类型

```
<input type="submit" name="btnSave" id="bntSave" value="Submit" class="default2"/> //<--------------- 
```

只需添加`auto_now_add`您的时间戳字段

```
timestamp = models.DateTimeField(auto_now_add=True) 
```

# javascript - Ajax 请求在登录时不工作，在未登录时工作

> ID：15896113
> 
> 赞同：1
> 
> 时间：2013-04-09T07:42:48.980
> 
> 标签：javascript, node.js, mongodb

我有一个简单的 Ajax 请求，如下所示：

```
 $.ajax({
        type: "POST",
        url:  "/admin.html",
        data: dataString,
        success: function(data) {
          if(data.error) {
            $('#alertt').text(data.error);
            $('#alertt').show();
            $('#alertt').fadeIn().delay(2000).fadeOut('slow');
          } else if (data.success) {
            var lati = $('#route_latitude').val();
            var longi = $('#route_longitude').val();
            increment();
            setMarker(lati, longi);
            $('#alertt').text(data.success);
            $('#alertt').show();
            $('#alertt').fadeIn().delay(2000).fadeOut('slow');
          }
        },
        error: function(jqXHR, textStatus, errorThrown) {
          console.log(textStatus + " " + errorThrown)
        }
      }) 
```

问题是，如果用户在网页上登录，那么它会`(pending)`等待大约 5 分钟然后`500`出现错误，我不确定这是为什么，我正在使用`Express v3`，这基本上是请求的方式：

```
var isAdmin = function(req, res, next) {
  helper.isAdmin(req, res, next);
}
app.post('/admin.html', isAdmin, admin.new);

exports.isAdmin = function(req, res, next) {
  db.users.find({'rememberToken': req.cookies.rememberToken}, function(err, foundUser) {
    if (err) { console.log('We have an error' + err) } else {

      if (foundUser.length === 0) {
        console.log('Somebody attempted to view the Admin page without an account.')
        res.render('index', { 'title': 'Home Page'})
      } else if (foundUser[0].admin === 0) {
          console.log('A non-admin user account tried to log into the Admin page: ' + foundUser[0].email);
          res.render('index', { 'title': 'Home Page' });
      } else if (foundUser[0].rememberToken === req.cookies.rememberToken) {
        console.log('Admin viewing Admin page.');
          next();
      }
    }
  })
} 
```

我真的看不出有什么问题，但由于某种原因，它只是存在，`(pending)`但如果我在没有设置 cookie 的情况下未登录，（`isAdmin function`从 中删除`post`）它可以工作。任何帮助都会很棒，这让我发疯了。

如果您对登录的处理方式感到好奇：[https ://gist.github.com/anonymous/f458783ffdc45255f85d/raw/dd59d045b7fa76abc2dca458eea16702477c36d1/gistfile1.js](https://gist.github.com/anonymous/f458783ffdc45255f85d/raw/dd59d045b7fa76abc2dca458eea16702477c36d1/gistfile1.js)

这实际上在 localhost 上完全按预期工作，但是当我将它推送到 Nodejitsu 时，它不起作用并且发生了这个问题。

# python - 任务的 Python 并行化（事件循环？）

> ID：15896114
> 
> 赞同：2
> 
> 时间：2013-04-09T07:42:50.877
> 
> 标签：python, parallel-processing, subprocess, twisted, gevent

### 现在的情况

我正在编写[一个小型 Python 程序](https://github.com/dbrgn/orochi)来播放终端中 8tracks 的播放列表。

它由三部分组成，一个`client.py`使用 stdlib 的[cmd](http://docs.python.org/2/library/cmd.html)模块，一个`api.py`使用 python-requests 访问 API 的`player.py`模块和一个在从属模式下创建 mplayer 子进程并向其发送命令的模块。

### 问题

到目前为止，这是可行的，问题是除了轮询子进程的标准输出之外，我没有其他方法可以判断歌曲是否已在 mplayer 中播放完毕。这意味着我必须观看该过程，以便在歌曲播放完毕后请求并开始播放列表的下一首歌曲。

问题是等待子进程会阻塞`cmd`模块的主循环。不过，我也不能简单地在单独的线程或进程中运行它，因为我必须共享对子进程的 stdout 的引用，而像这样的引用不能在进程之间共享。

### 可能的方法

我为此想到了不同的解决方案。我可以放入`player.py`一个单独的进程并通过队列发送文本命令，但这会使事情变得过于复杂。我可以创建一个 Twisted 应用程序，但 Twisted 相当大，我不知道从哪里开始。另外，我不希望在我的项目中有这样的依赖。

第三种解决方案是使用 Gevent。问题是我如何让它与`cmd`模块一起工作。据我了解 Gevent，我将不得不在我“等待”某事的每个地方屈服。在这种情况下，这将是在 HTTP 请求期间、在等待期间`cmd.cmdloop()`以及在子进程轮询之间的暂停期间。但是如何让`cmd`模块产生？某种子类或猴子补丁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:44:28.790

从您的代码的外观来看，您可以在与 mplayer 通信时使用 pexpect。Pexpect（或期望）非常适合来回 stdio 通信。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T19:43:58.683

看来我想通了。我之前使用线程的所有尝试都是使用`multiprocessing.dummy`模块，它包装了`threading`模块，但在参数传递时表现有点不同——你不能传递引用。

直接使用`threading`，好像可以。我每次加载新曲目时都会启动一个后台线程来做到这一点。曲目播放完毕后，我向`SIGUSR1`客户端发送信号，客户端通过加载和播放新歌曲来处理它。

*播放器.py*

```
import os
import signal
import threading
from pipes import quote

class MPlayer(object):

    def __init__(self):
        self.process = Process(['mplayer',
            '-slave', '-idle',
            '-really-quiet', '-msglevel', 'global=6:cplayer=4', '-msgmodule',
            '-input', 'nodefault-bindings',
            '-cache', '1024',
        ], bufsize=1)
        self.write_lock = threading.Lock()

    # (...)

    def load(self, path):

        with self.write_lock:
            self.p.write('loadfile {}\n'.format(quote(path)))

        def wait_for_finish(process):
            # HERE: poll process for track ending with process.read()
            os.kill(os.getpid(), signal.SIGUSR1)

        t = threading.Thread(target=wait_for_finish, args=(self.process,))
        t.daemon = True
        t.start() 
```

*客户端.py*

```
import cmd
import signal
from player import MPlayer

class PlayCommand(cmd.Cmd, object):

    def __init__(self, *args, **kwargs):

        # (...)

        self.p = MPlayer()
        signal.signal(signal.SIGUSR1, self._song_end_handler)

    def _song_end_handler(self, signum, frame):
        print('SIGUSR1!!!!!!!!!!111!1')
        # HERE: Fetch new track URL
        self.p.load() 
```

尽管如此，如果有人认为他/她使用协程或事件找到了更好的解决方案，请随时用您的解决方案来回答。

# jsp - respone.sendRedirect() 在 Firefox 中可以正常工作，但在 IE6 中不行

> ID：15896120
> 
> 赞同：0
> 
> 时间：2013-04-09T07:43:07.237
> 
> 标签：jsp, servlets, internet-explorer-6

我有一个使用 response.sendRedirect() 重定向到 jsp 页面的 servlet，它在 firefox 中运行良好，但在 IE6 中它不会重定向到该页面。任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:48:41.113

这可能会对您有所帮助：http: [//www.coderanch.com/t/443561/Servlets/java/sendRedirect-working](http://www.coderanch.com/t/443561/Servlets/java/sendRedirect-working)。

```
public void editQuery() throws IOException {  
  String url = request.getContextPath() + "/search.jsp";  
  url = response.encodeRedirectURL(url);  
  //url = response.encodeURL(url);  
  response.setHeader("Pragma", "No-cache");  
  response.setHeader("Cache-Control", "no-cache");  
  response.setHeader("Expires", "1");  
  response.sendRedirect(url);
} 
```

**请注意，不再维护 IE6。**Microsoft 没有发布任何安全修复程序，这使得它成为一个非常不安全的浏览器。

# objective-c - NSNotificationCenter 如何检测 ARC 中释放的观察者？

> ID：15896121
> 
> 赞同：0
> 
> 时间：2013-04-09T07:43:15.513
> 
> 标签：objective-c, automatic-ref-counting, nsnotificationcenter

我发现`NSNotificationCenter`在 ARC 中使用时，即使您忘记删除`observer`from`defaultCenter`和`observer`has `deallocated`，然后您发布观察者观察到的通知，也没有崩溃了！

在 Xcode 4 之前，没有 ARC，我们必须`observer`在函数中删除默认通知中心`dealloc`，像这样：

```
- (void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

否则当一个绑定的通知发布时，它会触发崩溃！

所以，问题是如何检测**ARC**中`NSNotificationCenter`的释放 ？`observer`

 *** * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T08:00:39.430

**更新：**从 iOS 9 和 OS X 10.11 开始，NSNotificationCenter 观察者在被释放时不再需要取消注册。（来源：[在 iOS 9 中取消注册 NSNotificationCenter 观察者](https://useyourloaf.com/blog/unregistering-nsnotificationcenter-observers-in-ios-9/)）

* * *

*（旧答案：）*即使使用 ARC，您也必须在释放通知中心时从通知中心删除观察者。您的程序没有崩溃可能是纯粹的机会。

下面的程序演示了这一点。我已经激活了“启用僵尸对象”选项。

```
@interface MyObject : NSObject
@end

@implementation  MyObject

-(id)init
{
    self = [super init];
    if (self) {
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(notify:) name:@"test" object:nil];
    }
    return self;
}
- (void)dealloc
{
    NSLog(@"dealloc");
    //[[NSNotificationCenter defaultCenter] removeObserver:self];
}
- (void)notify:(NSNotification *)notification
{
    NSLog(@"notify");
}

@end

int main(int argc, const char * argv[])
{
    @autoreleasepool {
        MyObject *o = [[MyObject alloc] init];
        [[NSNotificationCenter defaultCenter] postNotificationName:@"test" object:nil];
        o = nil; // This causes the object to be deallocated
        // ... and this will crash
        [[NSNotificationCenter defaultCenter] postNotificationName:@"test" object:nil];
    }
    return 0;
} 
```

*输出：*

```
notifytest[593:303] notify
notifytest[593:303] dealloc
notifytest[593:303] *** -[MyObject notify:]: message sent to deallocated instance 0x100114290 
```**

# javascript - 如何使用codeigniter保存和显示模式中的值以通过数据库查看

> ID：15896122
> 
> 赞同：0
> 
> 时间：2013-04-09T07:43:17.193
> 
> 标签：javascript, html, codeigniter

我对codeigniter相当陌生，似乎无法解决这个问题，简而言之，我在理解CodeIgniter框架之间的数据流时遇到了问题。我只想显示使用模态从数据库中获取的数据并将它们显示在视图中。

我的控制器中的代码是：

```
$unitData =$this->ClientUnit->getBlockUnits($client_block_ID);
foreach ($unitData->result() as $row){
  for ($i=0; $i < 3; $i++) { 
    $client_unit_name[$i] = $row->client_unit_name[$i]; 
    $unit_owner_name[$i] = $row->unit_owner_name[$i];     
    }
 }
 $data['client_unit_name'] = $client_unit_name;
 $data['unit_owner_name'] = $unit_owner_name;
 $this->load->view('newblock_unit',$data); 
```

我的模态文件是：

```
function getBlockUnits($client_block_ID) {
  $query = $this->db->query('SELECT * FROM client_units where client_block_ID="'.$client_block_ID.'"');
  return $query; 
} 
```

如您所见，从我的模态和控制器代码中，问题是由于返回了多行，目前我只得到视图所有输出中的最后一行，而不是单个行......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:12:26.943

您可以将整个数组发送到视图中并在那里循环

```
 $unitData =$this->ClientUnit->getBlockUnits($client_block_ID);

 $data['unitData '] = $unitData->result_array();
 $this->load->view('newblock_unit',$data); 
```

在您的视图中使用循环来获取相应的

```
 foreach($unitData as $row){
    echo row['client_unit_name'];
     echo row['unit_owner_name'];
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:06:02.137

我认为问题在于您没有返回对象或数组。在您应该使用的模型中，对于对象：

```
return $query->result(); 
```

或者对于一个数组：

```
return $query->result_array(); 
```

编辑：您可以在此处阅读有关此内容的所有内容[http://ellislab.com/codeigniter/user-guide/database/results.html](http://ellislab.com/codeigniter/user-guide/database/results.html)

# git - 从本地终端创建 Github 存储库

> ID：15896123
> 
> 赞同：-4
> 
> 时间：2013-04-09T07:43:19.890
> 
> 标签：git, github

如何从本地终端创建 Github 存储库？

**更新 ：**

我们必须创建存储库并将数据从一个应用程序上传到github，而不在应用程序系统中存储任何数据......这是可能的

实际上，很多用户都会登录到这个应用程序。他们将在预览框中输入代码并检查结果。在这里，用户可以将此代码存储到 github 。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T07:47:23.443

您可以使用[集线器](https://github.com/defunkt/hub)。

```
hub create repo 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T10:09:14.250

您不创建 Github 存储库，而是创建 Git 存储库。然后可以将其与 Github 一起用作遥控器。如果您在 Github 上创建了存储库，则可以使用以下命令将本地存储库与 Github 远程连接：

```
$ mkdir ~/Hello-World
# Creates a directory for your project called "Hello-World" in your user directory

$ cd ~/Hello-World
# Changes the current working directory to your newly created directory

$ git init# Sets up the necessary Git files
# Initialized empty Git repository in /Users/you/Hello-World/.git/

$ git remote add origin https://github.com/username/Hello-World.git
# Creates a remote named "origin" pointing at your GitHub repository

$ git push origin master
# Sends your commits in the "master" branch to GitHub 
```

来自：[https ://help.github.com/articles/create-a-repo](https://help.github.com/articles/create-a-repo)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T07:45:54.170

[Defunkt 的`hub`工具](https://github.com/defunkt/hub)可以做到这一点

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-09T07:48:06.157

[http://git-scm.com/book/en/Git-on-the-Server-Setting-Up-the-Server](http://git-scm.com/book/en/Git-on-the-Server-Setting-Up-the-Server) 从本地服务器设置 git 的完整教程。

# linux - 使用 make 的管道不起作用

> ID：15896125
> 
> 赞同：1
> 
> 时间：2013-04-09T07:43:21.207
> 
> 标签：linux, gnu-make

我是新手，我尝试创建一个虚假目标来打印目标：

```
.PHONY: help
help:
        $(MAKE) --print-data-base --question | \
        $(AWK) '/^[^.%][-A-Za-z0-9_]*:/ { print substr($$1, 1, length($$1)-1) }' | \
        $(SORT) | \
        $(PR) --omit-pagination --width=80 --columns=4 
```

代码取自[此处](http://oreilly.com/catalog/make3/book/ch02.pdf)（第 20 页）。

当我跑步时，`make help`我得到以下信息：

```
make --print-data-base --question | \
     '/^[^.%][-A-Za-z0-9_]*:/ { print substr($1, 1, length($1)-1) }' | \
     | \
     --omit-pagination --width=80 --columns=4
/bin/sh: 3: Syntax error: "|" unexpected
make: *** [help] Error 2 
```

出了什么问题，我该如何解决？

我正在研究 linux mint，为 i686-pc-linux-gnu 构建 3.81。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:40:00.630

它看起来像`$(AWK)`, `$(SORT)`, 并且`$(PR)`都扩展为空字符串，这意味着您的 makefile 中没有定义此类变量。

# actionscript-3 - 尝试删除所有子节点，收到错误 #1009

> ID：15896127
> 
> 赞同：0
> 
> 时间：2013-04-09T07:43:25.743
> 
> 标签：actionscript-3, removechild

我的设置的想法是我在舞台上有一个输入文本字段和三个单独的按钮。当您在文本字段中键入内容并按下输入按钮时，字段内的文本将添加到数组中。

当您按下显示按钮时，数组的内容会显示在屏幕上（数组的每个值都显示在最后一个值的下方）。

最后一个按钮应该删除数组上的所有当前值，并清除屏幕上所有显示的值。但是我无法让我的代码按预期工作，因为我收到了，

`TypeError: Error #1009: Cannot access a property or method of a null object reference.`

使用此代码块：

```
import flash.text.TextField;
import flash.events.MouseEvent;

var myArray:Array = new Array (""); 
var tf:TF;

btnInput.addEventListener(MouseEvent.CLICK, txtInput);

function txtInput(event:MouseEvent):void
{myArray.push(txtInput.text);}

btnDisplay.addEventListener(MouseEvent.CLICK, txtDisplay);

function txtDisplay(event:MouseEvent):void
{for (var i:int = 0; i < myArray.length; i++)
{var tf:TF = new TF();
tf.txt.text = myArray[i];
tf.y = 280 + (i * 25);
tf.x = 265; 
addChild(tf);
tf.name="test";}
}

btnClear.addEventListener (MouseEvent.CLICK, txtClear);

function txtClear(event:Event){
myArray.splice(1);
if (tf.numChildren != 0){
removeChild(getChildByName("test"));}
} 
```

或者，当我添加

```
var tf:TF = new TF; 
```

它只删除屏幕上显示的一个值。我还可以补充一点，“TF”是库中的一个影片剪辑，其中包含一个实例名称为 txt 的动态文本字段。问题仅出在最后一个按钮上，还是我也应该更改其他内容？我不知道如何按照我的意愿进行这项工作。我对编码很陌生，因此非常感谢任何提示或帮助。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:02:55.607

在您的情况下`if(tf.numChildren != 0)`，该`tf`对象是`null`因为您从未创建过它。这就是您收到`#1009`错误的原因。

另一方面，为了删除所有项目，您应该将 替换`if (tf.numChildren != 0)`为`while (tf.numChildren != 0)`。

# r - 从 C/C++ 代码访问“自然强制”逻辑

> ID：15896128
> 
> 赞同：3
> 
> 时间：2013-04-09T07:43:28.753
> 
> 标签：r, type-conversion, rcpp, coercion, type-coercion

调用`unlist`or`c`时，该类型将被提升为能够表示所有内容的最小类型：

```
> c(as.integer(1), 2.3, '3')
[1] "1"   "2.3" "3"  
> c(TRUE, 5)
[1] 1 5
> unlist(list(as.integer(1:5), as.complex(2:4)))
[1] 1+0i 2+0i 3+0i 4+0i 5+0i 2+0i 3+0i 4+0i 
```

如何从 C/C++ 代码访问此逻辑？

我查找了 and 的 C 源代码，`c`并在and ( )`unlist`中找到了以下代码：`do_c_dflt``do_unlist`[`main/bind.c`](https://github.com/wch/r-source/blob/trunk/src/main/bind.c)

```
if (data.ans_flags & 512)      mode = EXPRSXP;
else if (data.ans_flags & 256) mode = VECSXP;
else if (data.ans_flags & 128) mode = STRSXP;
else if (data.ans_flags &  64) mode = CPLXSXP;
else if (data.ans_flags &  32) mode = REALSXP;
else if (data.ans_flags &  16) mode = INTSXP;
else if (data.ans_flags &   2) mode = LGLSXP;
else if (data.ans_flags &   1) mode = RAWSXP; 
```

`data`类型为的变量由似乎定义强制逻辑`BindData`的例程计算。`AnswerType`但是，该类型仅`BindData`在中声明`bind.c`。

那么：R 的一般强制逻辑是导出到任何地方，还是我必须从 复制粘贴代码`bind.c`？（对不起双关语……）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:50:43.580

Kevin 刚刚[在 Rcpp Gallery 上发布了一篇在精神上](http://gallery.rcpp.org/articles/rcpp-wrap-and-recurse/)非常接近的文章，它使用 R 的 API 中的宏进行了显式测试：

```
#include <Rcpp.h>
using namespace Rcpp;

// [[Rcpp::export]]
List do_stuff( List x_ ) {
    List x = clone(x_);
    for( List::iterator it = x.begin(); it != x.end(); ++it ) {
        switch( TYPEOF(*it) ) {
            case REALSXP: {
                NumericVector tmp = as<NumericVector>(*it);
                tmp = tmp * 2;
                break;    
            }
            case INTSXP: {
                if( Rf_isFactor(*it) ) break; // factors have type INTSXP too
                IntegerVector tmp = as<IntegerVector>(*it);
                tmp = tmp + 1;
                break;
            }
            default: {
                stop("incompatible SEXP encountered;");
            }
       }
  }  
  return x;
} 
```

# android - 为什么要在服务器上生成 Android 应用内计费的 nonce？

> ID：15896131
> 
> 赞同：0
> 
> 时间：2013-04-09T07:43:50.030
> 
> 标签：android, security, in-app-purchase, google-play, nonce

[http://developer.android.com/google/play/billing/billing_best_practices.html](http://developer.android.com/google/play/billing/billing_best_practices.html)

正如最佳实践文档所建议的那样，我希望我的服务器为应用内计费执行签名验证任务。这让我想到了这个关于 nonces 的条款：

> 此外，如果您在服务器上执行随机数验证，请确保在服务器上生成随机数。

我知道我在购买请求中传递的随机数将作为购买数据的一部分返回以`developerPayload`进行额外验证。客户端使用 SecureRandom 生成唯一的随机数还不够吗？- 因为无论如何我都会将购买数据传回服务器进行验证，所以它也会存储客户端生成的随机数以过滤掉重放攻击。

为什么我必须“确保”在服务器上生成随机数？这似乎使过程复杂化，因为现在应用程序需要在任何应用程序内购买之前从服务器请求一个随机数。

我能想到它可能有用的唯一极不可能的情况是防止客户端上的 SecureRandom 生成已在服务器上使用的随机数的实例。即使这样，通过交叉检查也不容易识别这种情况`orderId`，无论如何它本身应该是唯一的？

# java - 在 JAVA GUI 和 C++ 服务器之间实现 SSL

> ID：15896134
> 
> 赞同：0
> 
> 时间：2013-04-09T07:44:00.507
> 
> 标签：java, c, ssl, client-server, communication

我有一个用 JAVA 设计并充当客户端的 GUI，并且可以与用 C/C++ 编写的服务器远程通信。它们之间的通信是通过套接字进行的。但是，发送的消息没有加密，容易受到中间人攻击。我想知道保护通信的最佳解决方案是什么，并想实施 SSL。是否可以这样做，如果可以，我应该研究什么工具包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:23:25.157

您甚至可能根本不需要修改服务器。你可以把[stunnel](https://www.stunnel.org/index.html)贴在它前面。

警告：使用 TLS/SSL，您可能需要报告或记录一大堆额外的错误情况，尤其是关于证书（错误、过期、由于网络/DNS 问题而无法验证）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:16:56.417

Java 包含一个称为 JSSE 的 SSL 实现。请参阅 javax.net.ssl 包的 Javadoc。还有一个教程，JDK 提供了几个示例。

# c# - 单击另一个表单中的按钮提交时如何在c#中重新加载表单？

> ID：15896135
> 
> 赞同：3
> 
> 时间：2013-04-09T07:44:03.373
> 
> 标签：c#, forms, button, reload

我的 C# 中有一个组合框，它位于名为的表单中，当我在我的设置表单中`frmMain` 添加（使用按钮）产品时自动填充名为. 当我单击按钮时，我想重新加载新添加的产品将可见。`button1_Click``frmSettings``button1_Click``frmMain`

我尝试使用

```
frmMain main = new frmMain();
main.Close();
main.Show(); 
```

我知道这段代码很有趣，但它没有用。:D

这是窗体！

**编辑**

请查看我的程序的这张图片以便更好地理解。这是我的`frmMain` ![在此处输入图像描述](https://i.stack.imgur.com/O8Uzb.png)

这是我的设置`frmSettings`表单的样子。因此，正如您所看到的，当我单击提交按钮时，我想要`frmMain`重新加载，以便我添加到设置中的更新值对组合框可见`frmMain`。

![在此处输入图像描述](https://i.stack.imgur.com/SWAQT.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T08:08:27.500

更新：由于您更改了问题，这里是更新您的产品的更新版本

这是您的产品形式：

```
private frmMain main;

public frmSettings(frmMain mainForm)
{
  main = mainForm;
  InitializeComponent();
}

private void button1_Click(object sender, EventArgs e)
{
  main.AddProduct(textBox1.Text);
} 
```

它将需要构造函数中的主窗体将数据传递给它。

主要形式：

```
private frmSettings settings;
private List<string> products = new List<string>();

public frmMain()
{
  InitializeComponent();
  //load products from somewhere
}

private void button1_Click(object sender, EventArgs e)
{
  if (settings == null)
  {
    settings = new frmSettings(this);
  }
  settings.Show();
}

private void UpdateForm()
{
  comboBoxProducts.Items.Clear();
  comboBoxProducts.Items.AddRange(products.ToArray());

  //Other updates
}

public void AddProduct(string product)
{
  products.Add(product);
  UpdateForm();
} 
```

然后，您可以`UpdateForm()`从表单上的任何位置调用，例如另一个按钮。此示例仅使用本地变量来存储您的产品。还缺少某些添加产品的检查，但我想你明白了......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:02:37.857

没有这样的内置方法可以根据需要设置所有值。正如我在评论中提到的，您应该使用所有控件的所需设置创建一个方法，这里是示例代码：

```
private void ReloadForm()
{
    comboBox.ResetText();
    dataGridView.Update();   
    //and how many controls or settings you want, just add them here
}

private void button1_Click(object sender, EventArgs e)
{
    ReloadForm();   //and call that method on your button click
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-08T18:28:40.357

试试这个代码。

```
this.Refresh();
Application.Doevents(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-12T06:03:04.900

```
this.Refresh();
Refresh();
this.Hide();
frmScholars ss = new frmScholars();
ss.Show(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-24T08:59:28.817

```
this.Close();
frmMain main = new frmMain();
main.Show(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T07:48:25.377

你想使表格无效

[http://msdn.microsoft.com/en-us/library/598t492a.aspx](http://msdn.microsoft.com/en-us/library/598t492a.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-25T12:14:32.933

如果您要从 usercontrol 刷新页面。这是我从 usercontrol 刷新表单的示例 查找此重新加载按钮所在的表单。然后调用无效选项卡控件并刷新它。

```
Dim myForm As Form = btnAuthorise.FindForm()

For Each c As Control In myForm.Controls
                If c.Name = "tabControlName" Then
                    DirectCast(c, System.Windows.Forms.TabControl).Invalidate()
                    DirectCast(c, System.Windows.Forms.TabControl).Refresh() 'force the call to the drawitem event
                End If
 Next 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-12T08:41:08.103

不需要为整个表单重新加载。只需为表单初始化创建一个函数。您可以随时调用此函数。这将刷新表单。

```
private void acc_Load(object sender, EventArgs e)
{
     form_Load();           
}

public void form_Load()
{
    // write form initialise codes example listView1.Clear();...
}

private void button1_Click(object sender, EventArgs e) //edit account
{
    //Do something then refresh form
    form_Load(); 

} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-05-27T05:10:07.643

我认为，通过在`frmMain_load(sender,e)`单击按钮时调用应该重新加载表单。

您也可以`Invalidate()`像@Nahum 所说的那样尝试表格。

# sql - 循环SQL语句插入

> ID：15896138
> 
> 赞同：2
> 
> 时间：2013-04-09T07:44:18.560
> 
> 标签：sql, sql-server, loops, insert

我想每次插入一行日期 + 1。这是一个简单的 SQL 循环。我使用的是 SSIS，所以 StartDate 和 Enddate 是变量。

这是我的代码：

```
WITH View_Solidnet_Training AS
(
    SELECT CAST('2013-04-09' AS DATETIME) DateValue
    UNION ALL

    SELECT DateValue + 1
    FROM   View_Solidnet_Training
    WHERE  DateValue + 1 < '2013-04-11'
)
INSERT INTO OBJ_Availability
VALUES
  SELECT 34,
         DateValue + 1,
         'AM',
         2,
         'Test'
  FROM   View_Solidnet_Training; 
```

错误信息：

> 消息 156，级别 15，状态 1，第 11 行关键字“选择”附近的语法不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:49:40.593

不需要`VALUES`in`INSERT...SELECT`声明。

代替

```
INSERT INTO OBJ_Availability
VALUES
  SELECT 34,
         DateValue + 1,
         'AM',
         2,
         'Test'
  FROM   View_Solidnet_Training; 
```

和

```
INSERT INTO OBJ_Availability
SELECT 34,
       DateValue + 1,
       'AM',
       2,
       'Test'
FROM   View_Solidnet_Training; 
```

# ruby - 请解释一下这个方法

> ID：15896140
> 
> 赞同：1
> 
> 时间：2013-04-09T07:44:20.717
> 
> 标签：ruby, inject, splat

我对这种方法中的星星有疑问：

```
def multiplies_array(*numbers)
  numbers.inject(1, :*)
end 
```

参数列表 ( `*numbers`) 中的星号是什么意思？冒号 ( ) 后面的星号是什么意思`1, :*`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T07:52:30.773

第一颗星是 splat 运算符。在这种情况下，它会将给定的所有参数“收集”`multiplies_array`到单个数组中。

用四个参数这样调用它......

```
multiplies_array 1, 2, 3, 4 
```

... 在方法中为您提供一个包含四个元素的数组。

这相当于：

```
def multiplies_array(numbers) # Without splat operator
end 

multiplies_array [1, 2, 3, 4] 
```

第二颗星有点混乱。这里乘法运算符的意思是：

`:`表示符号。所有`Enumerable`方法都允许将符号作为快捷方式传递。它的意思是：“用这个名字调用方法”。

换句话说，该`*`方法应用于 numbers 数组中的每个项目。如果没有符号快捷方式，该行将如下所示：

```
numbers.inject(1) { |result, number| result * number) } 
```

我希望这对所有 Ruby 魔法有一点启发：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:54:22.500

请参阅[注入的文档。](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-inject)

它“通过应用二进制操作来组合枚举的所有元素，该操作由命名方法或运算符的块或符号指定。”

因此，在The中指定`:*`乘法运算符将其指定为符号，但您也可以这样做。使用符号更为惯用。`numbers.inject(1, :*)``:*``numbers.inject(1, '*')`

# javascript - HTML 拖放上传文件的增强功能？

> ID：15896142
> 
> 赞同：0
> 
> 时间：2013-04-09T07:44:26.413
> 
> 标签：javascript, asp.net, html, upload, drag-and-drop

我知道这个问题有点幼稚，但我觉得还是放在这里还是不错的。

我有一个 HTML 拖放上传文件。我的问题是，如果有可能当用户单击放置区域（除了正常行为将文件拖放到放置区域之外）并打开选择文件对话框以及用户选择文件时，我们可以调用放置事件并开始正常的过程拖放。

是否有可能或有人做过或想过吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:10:15.163

通过绑定到输入元素上的删除事件，我取得了一些成功。

在此处查看 jsfiddle：http: [//jsfiddle.net/LPVcM/](http://jsfiddle.net/LPVcM/)

祝你好运！

**HTML**

```
<div id="container">
    <div id="instructions">Drag a file here.</div>
</div> 
```

**Javascript**

```
var container = document.getElementById('container'),
    file = null,
    instructions = document.getElementById('instructions');

addFileInput();

function addFileInput() {
    var el = document.createElement('input');
    el.setAttribute('type', 'file');
    el.setAttribute('class', 'fileinput');
    el.addEventListener('drop', function() {
        instructions.innerHTML += ' Thanks!';
    });
    el.addEventListener('change', function() {
        instructions.innerHTML += ' Yum!';
    el.className += ' hidden'
        addFileInput();
    });
    container.appendChild(el);
} 
```

**CSS**

```
.fileinput {
    position: absolute;
    width: 300px;
    height: 200px;
    opacity: 0;
}

.fileinput.hidden {
    display: none;
}

#instructions {
    position: absolute;
    width: 300px;
    height: 200px;
}

#container {
    border: 1px solid black;
    width: 300px;
    height: 200px;
} 
```

# sql - 如何从 XMLType 节点中提取元素路径？

> ID：15896143
> 
> 赞同：2
> 
> 时间：2013-04-09T07:44:29.253
> 
> 标签：sql, xml, oracle, xpath, xmltype

我想在 XML 文档上有一个 select 语句，并且一列应该返回 **每个节点的路径**。

例如，给定数据

```
SELECT * 
FROM TABLE(XMLSequence(
  XMLTYPE('<?xml version="1.0"?>
    <users><user><name>user1</name></user>
           <user><name>user2</name></user>
           <group>
              <user><name>user3</name></user>
           </group>
           <user><name>user4</name></user>
    </users>').extract('/*//*[text()]'))) t; 
```

这导致

```
column_value
--------
<user><name>user1</name></user>
<user><name>user2</name></user>
<user><name>user3</name></user>
<user><name>user4</name></user> 
```

我想要这样的结果：

```
path                     value
------------------------ --------------
/users/user/name         user1
/users/user/name         user2
/users/group/user/name   user3
/users/user/name         user4 
```

我看不出如何做到这一点。我认为有两件事必须一起正常工作：

*   **我可以使用单个操作或方法`path`从一个`XMLType`**中提取，还是必须使用字符串魔术来执行此操作？
*   **什么是正确的 XPath 表达式，这样我才能得到整个元素路径**（如果可能的话），例如。`<users><group><user><name>user3</name></user></group></user>`而不是`<user><name>user3</name></user>`？

也许我还没有`XMLType`完全理解。可能是我需要一种不同的方法，但我看不到它。

旁注：

*   在最终版本中，XML 文档将来自表的 CLOB，而不是静态文档。
*   该`path`列当然也可以使用点或其他任何内容，并且初始斜线不是问题，任何表示都可以。
*   此外，我不介意每个内部节点是否也有一个结果行（可能带有`null`as `value`），而不仅仅是其中的那些`text()`（这是我真正感兴趣的）。
*   最后，我将需要单独的*尾部元素*（`path`始终`"name"`在此处的示例中，但稍后会有所不同），即`('/users/groups/user', 'name', 'user3')`我可以单独处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T10:26:37.787

您可以借助[Oracle XML DB XQuery 函数集中的](http://docs.oracle.com/cd/B19306_01/appdev.102/b14259/xdb_xquery.htm)[XMLTable](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions228.htm)函数来实现：

```
select * from 
  XMLTable(
    '
     declare function local:path-to-node( $nodes as node()* )  as xs:string* {
       $nodes/string-join(ancestor-or-self::*/name(.), ''/'')
     };
     for $i in $rdoc//name 
       return <ret><name_path>{local:path-to-node($i)}</name_path>{$i}</ret>
    '
    passing 
    XMLParse(content '
      <users><user><name>user1</name></user>
           <user><name>user2</name></user>
           <group>
              <user><name>user3</name></user>
           </group>
           <user><name>user4</name></user>
      </users>'
    )
    as "rdoc"
    columns 
      name_path  varchar2(4000) path '//ret/name_path',
      name_value varchar2(4000) path '//ret/name'

  ) 
```

对我来说，XQuery 对于 XML 数据操作至少看起来比 XSLT 更直观。

[您可以在此处](http://www.xqueryfunctions.com/xq/)找到有用的 XQuery 函数集。

**更新 1**

我想你需要在最后阶段包含完整数据的完全简单的数据集。这个目标可以通过复杂的方式实现，在下面逐步构建，但是这个变体非常耗费资源。我建议审查最终目标（选择一些特定的记录，计算元素的数量等），然后简化这个解决方案或完全改变它。

**更新 2**

从此更新中删除了所有步骤，除了最后一个，因为@ABCade 在评论中提出了更优雅的解决方案。此解决方案在下面的**更新 3**部分中提供。

***第 1 步***- 构建具有相应查询结果的 id 数据集

***第 2 步***- 聚合到单个 XML 行

***第 3 步***- 最后通过使用 XMLTable 查询压缩的 XML 来获得完整的纯数据集

```
with xmlsource as (
  -- only for purpose to write long string only once
  select '
      <users><user><name>user1</name></user>
           <user><name>user2</name></user>
           <group>
              <user><name>user3</name></user>
           </group>
           <user><name>user4</name></user>
      </users>' xml_string
   from dual   
),
xml_table as ( 
  -- model of xmltable
  select 10 id, xml_string xml_data from xmlsource union all 
  select 20 id, xml_string xml_data from xmlsource union all 
  select 30 id, xml_string xml_data from xmlsource 
) 
select  *
from
  XMLTable(
    '
        for $entry_user in $full_doc/full_list/list_entry/name_info
          return <tuple>
                   <id>{data($entry_user/../@id_value)}</id>
                   <path>{$entry_user/name_path/text()}</path>
                   <name>{$entry_user/name_value/text()}</name>
                  </tuple> 
    '
    passing ( 
      select  
        XMLElement("full_list", 
          XMLAgg(     
            XMLElement("list_entry",
              XMLAttributes(id as "id_value"),
              XMLQuery(
                '
                 declare function local:path-to-node( $nodes as node()* )  as xs:string* {
                   $nodes/string-join(ancestor-or-self::*/name(.), ''/'')
                 };(: function to construct path :) 
                 for $i in $rdoc//name return <name_info><name_path>{local:path-to-node($i)}</name_path><name_value>{$i/text()}</name_value></name_info>
                '
                passing by value XMLParse(content xml_data) as "rdoc"
                returning content
              )
            )
          )
        )        
        from xml_table
    )   
    as "full_doc"      
    columns
      id_val   varchar2(4000) path '//tuple/id',
      path_val varchar2(4000) path '//tuple/path',
      name_val varchar2(4000) path '//tuple/name'
  ) 
```

**更新 3**

正如@ABCade 在他的评论中提到的，有很简单的方法可以将 ID 与 XQuery 结果结合起来。

因为我不喜欢答案中的外部链接，所以下面的代码代表[他的 SQL fiddle](http://www.sqlfiddle.com/#!4/beba9/2)，有点适应这个答案的数据源：

```
with xmlsource as (
  -- only for purpose to write long string only once
  select '
      <users><user><name>user1</name></user>
           <user><name>user2</name></user>
           <group>
              <user><name>user3</name></user>
           </group>
           <user><name>user4</name></user>
      </users>' xml_string
   from dual   
),
xml_table as ( 
  -- model of xmltable
  select 10 id, xml_string xml_data from xmlsource union all 
  select 20 id, xml_string xml_data from xmlsource union all
  select 30 id, xml_string xml_data from xmlsource
)
select xd.id, x.*  from
xml_table xd,
  XMLTable(
    'declare function local:path-to-node( $nodes as node()* )  as xs:string* {$nodes/string-join(ancestor-or-self::*/name(.), ''/'')     };     for $i in $rdoc//name        return <ret><name_path>{local:path-to-node($i)}</name_path>{$i}</ret>    '
    passing
    XMLParse(content xd.xml_data
    )
    as "rdoc"
    columns
      name_path  varchar2(4000) path '//ret/name_path',
      name_value varchar2(4000) path '//ret/name'

  ) x 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T08:48:44.920

这并不完美，但可以作为一个开始：

[这是一个sqlfiddle](http://www.sqlfiddle.com/#!4/d41d8/9660)

```
with xslt as (
  select '<?xml version="1.0" ?><xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="/">
  <records>
    <xsl:apply-templates/>
   </records>
  </xsl:template>
  <xsl:template match="//name">
      <columns>
        <path>
        <xsl:for-each select="ancestor-or-self::*">
            <xsl:call-template name="print-step"/>
        </xsl:for-each>
        </path>
  <value>
    <xsl:value-of select="."/>
  </value>
        <xsl:apply-templates select="*"/>
      </columns>
    </xsl:template>
    <xsl:template name="print-step">
        <xsl:text>/</xsl:text>
        <xsl:value-of select="name()"/>
        <xsl:text>[</xsl:text>
        <xsl:value-of select="1+count(preceding-sibling::*)"/>
        <xsl:text>]</xsl:text>
    </xsl:template>
   </xsl:stylesheet>'
  xsl from dual)
, xmldata as
(select xmltransform(xmltype('<?xml version="1.0"?>
    <users><user><name>user1</name></user>
           <user><name>user2</name></user>
           <group>
              <user><name>user3</name></user>
           </group>
           <user><name>user4</name></user>
    </users>'), xmltype(xsl)) xd from xslt)

select  XT.* 
from xmldata c,
xmltable('$x//columns' passing c.xd
   as "x"
         columns
         path_c VARCHAR2(4000) PATH 'path',
         value_c VARCHAR2(4000) PATH 'value'
        ) as XT 
```

这就是我试图做的：

既然你想要“路径”，我不得不使用 xslt（[这篇文章的学分](https://stackoverflow.com/a/953219/1083652)）

然后我使用[xmltransform](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions229.htm)将带有 xsl 的原始 xml 转换为所需的输出（路径、值）

然后我`xmltable`把它当成一张桌子来读

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-12T19:16:51.740

这改进了 ABCade 的上述答案：

```
<xsl:template name="print-step">
    <xsl:variable name="name" select="name()" />
    <xsl:text>/</xsl:text>
    <xsl:value-of select="$name"/>
    <xsl:text>[</xsl:text>
    <xsl:value-of select="1+count(preceding-sibling::*[name()=$name])"/>
    <xsl:text>]</xsl:text>
</xsl:template> 
```

结果：

/users[1]/user[1]/name[1] user1

/users[1]/user[2]/name[1] user2

/users[1]/group[1]/user[1]/name[1] user3

/users[1]/user[3]/name[1] user4

代替：

/users[1]/user[1]/name[1] user1

/users[1]/user[2]/name[1] user2

/users[1]/group[3]/user[1]/name[1] user3

/users[1]/user[4]/name[1] user4

# ant - Openbravo ant build fails

> ID：15896148
> 
> 赞同：1
> 
> 时间：2013-04-09T07:44:41.877
> 
> 标签：ant, openbravo

I am trying to setup openbravo on eclipse environment with the above URL.
Development stack setup is done successfully. (ANT, Java, Postgresql)

At the openbravo source directory when i apply the command

> ant install.source

Build failure due to errors -

```
/home/pos/sourcecode_openbravo/Openbravo-3.0MP21/build.xml:480: The following error occurred while executing this line:
480     <ant dir="${base.src}" target="compile.complete.development" inheritAll="true" inheritRefs="true" />

/home/pos/sourcecode_openbravo/Openbravo-3.0MP21/src/build.xml:874: The following error occurred while executing this line:
874       <jvmarg line="${env.CATALINA_OPTS}" />

/home/pos/sourcecode_openbravo/Openbravo-3.0MP21/src/build.xml:880: Directory 
880       <jvmarg value="-Djava.io.tmpdir=${env.CATALINA_BASE}/temp" />

/var/lib/tomcat6/webapps/openbravo/WEB-INF/lib creation was not successful for an unknown reason 
```

Any help would be appreciated. Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:28:40.330

听起来像是权限问题。[请参阅openbravo wiki](http://wiki.openbravo.com/wiki/Installation/Troubleshooting#Permission_issues)
中的相关部分“权限问题”

**编辑**
其余问题，我相信属性`base.src`，`CATALINA_OPTS`并且`CATALINA_BASE`设置不正确。通过以下方式检查：

```
<echo>
 $${base.src} => ${base.src}
 $${env.CATALINA_OPTS} => ${env.CATALINA_OPTS}
 $${env.CATALINA_BASE} => ${env.CATALINA_BASE}
</echo> 
```

或者简单地输出所有可用的属性使用：

```
<echoproperties/> 
```

还要考虑，在使用 ${env.whatever} 之前，您需要使用：

```
<property environment="env"/> 
```

前 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-01T03:20:29.523

> /var/lib/tomcat6/webapps/openbravo/WEB-INF/lib 创建不成功，原因不明

似乎权限问题。始终使用正确的用户帐户来启动/停止 tomcat 很重要！

从概念上讲，使用 Openbravo 涉及两个用户帐户：

用于处理文件和编译 Apache Tomcat 服务使用的 Openbravo 用户帐户的命令行用户 有几个重叠区域，其中一个帐户需要从另一个帐户双向访问和修改文件。

为避免任何问题，Openbravo 强烈建议使用命令行上使用的相同用户帐户运行 Apache Tomcat 服务。这样一来，上述主题就可以轻松完美地解决了。

来源：[http ://wiki.openbravo.com/wiki/Installation/Custom/Apache_Tomcat](http://wiki.openbravo.com/wiki/Installation/Custom/Apache_Tomcat)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-23T07:46:41.267

*/var/lib/tomcat6/webapps/openbravo/WEB-INF/lib 创建不成功，原因不明*

**授予 webapps 文件夹的权限**

```
sudo chmod -R 777 /var/lib/tomcat6/webapps/ 
```

# java - Java - 受保护的“getter”与嵌套类

> ID：15896152
> 
> 赞同：0
> 
> 时间：2013-04-09T07:44:49.887
> 
> 标签：java, inheritance, field, protected, nested-class

如果我在父类中有一堆字段都需要由子类继承，那么将子类嵌套在超类中，使字段受保护而不是私有，还是使用受保护的访问器更好？还是其他的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T07:48:30.147

最简单的解决方案是保护超类字段或实例变量，但是，如果将它们设为私有，则始终可以通过 getter 和 setter 访问它们，这在概念上要好得多，因为它遵循封装原则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:46:45.097

最简单的解决方案似乎是使字段受到保护，除非您有令人信服的理由不这样做，否则就这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T07:48:45.933

我认为使用受保护的访问器是最好的方法和更常见的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T07:57:59.247

如果您希望子类可以访问它，则只剩下两个选项，公共和受保护。受保护的可能是您想要的。当您`extends`在 java 中使用关键字进行继承时，下表适用。

```
 Access Levels

Modifier    Class   Package Subclass    World
public      Y       Y       Y           Y
protected   Y       Y       Y           N
no modifier Y       Y       N           N
private     Y       N       N           N 
```

如果您在超类中嵌套子类，那么您也可以使用私有。这是因为内部类是父类的一部分，因此也可以访问私有方法。

```
public class Parent {
    private int x = 5;

    //Not really a subclass
    private class NestedClass {
        public NestedClass() {
            int hax = new Parent().x; // Works!
        }
    }

    //More of a nestedclass than a subclass.
    private class SubClass extends Parent {
        public SubClass() {
            int stillHax = new Parent().x;
        }
    }
} 
```

`extends`在使用or关键字之前，您不会使用继承，`implements`因此您可能希望让子类扩展父类（在不同的文件中），并且变量将具有受保护（或公共）级别的访问权限。请注意，在同一个包中或在同一个类中需要优先考虑网格。上述两个示例之所以有效，是因为 SAME 类中的另一个类与父类相同。

**只要按照网格，就是这样。**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T08:11:34.590

在某些情况下，公开受保护的字段或受保护的访问器方法是有意义的。所以这一切都取决于您对父类的设计，以及您希望子类如何利用您的父类。

但是，可以肯定的是：“将子类嵌套在超类中会更好” <-这很少是正确的选择。

# dojo - 如何在自定义 AMD dojo 小部件中定义公共常量

> ID：15896154
> 
> 赞同：1
> 
> 时间：2013-04-09T07:44:53.863
> 
> 标签：dojo

直到 dojo 1.6，我曾经这样定义公共常量：

```
dojo.declare('x.y.Z', null, { ... });

x.y.Z.constant = 100; 
```

这样就可以从其他代码访问它们而无需实例化类。

从 dojo 1.7 开始，我的小部件可能会被重命名或移动。所以我不应该在我的代码中使用绝对模块 ID。

定义这样一个常数的好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T01:16:23.250

如果您尝试将其附加到已定义的小部件类，则可以执行以下操作：

```
define(["dojo/_base/declare"], function(declare) {
  var MyWidget = declare([], {
    //Define your widget as usual
  });

  MyWidget.someConstant = "42";

  return MyWidget;
}); 
```

现在你可以像这样使用它：

```
require(["MyWidget"], function(MyWidget) {
  console.debug(MyWidget.someConstant); // Prints out "42"
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T08:04:07.113

我会在 window 对象中创建一个对象：

```
window.myConstants={};
window.myConstants.c1=100; 
```

您可以从代码中的任何位置访问 myConstants 对象，因为它是一个全局对象。

javascript 中没有真正的常量。

# php - nicEdit textarea的默认值

> ID：15896157
> 
> 赞同：4
> 
> 时间：2013-04-09T07:45:15.073
> 
> 标签：php, textarea, nicedit

这是一个代码

```
<?php 
if (isset($_POST['flag'])) {

    $length=strlen(trim($_POST['area']));
     echo "Length of abstract  :  ".$length;
     if (!strlen(trim($_POST['area']))){
        $abstractErrorMsg = "Please enter the abstract of your article";
        echo $abstractErrorMsg;
    }
}
?>
<form method="post" action="">
        <input type="hidden" name="flag" value="hidden">
        <script type="text/javascript" src="http://js.nicedit.com/nicEdit-latest.js"></script> 
        <script type="text/javascript">
                            //<![CDATA[
                            bkLib.onDomLoaded(function() {
                                nicEditors.editors.push(
                                        new nicEditor().panelInstance(
                                        document.getElementById('myNicEditor')
                                        )
                                        );
                            });
                            //]]>
                        </script>

                        * Abstract

                                <textarea name="area" id="myNicEditor" style="width: 300px;height: 100px;"></textarea>

        <input type="submit" name="btn">
    </form> 
```

如果我在没有向nicedit textarea输入任何文本的情况下提交表单，则显示长度= 4。为什么会这样？ nicedit textarea 有默认值吗？如果是，如何更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T08:49:43.033

通过注释 3 行来解决问题。在 niceEdit.js 中搜索以下代码。默认情况下，它包含一个`<br />`.

```
init : function() {
            this.elm.setAttribute('contentEditable','true');    
            //if(this.getContent() == "") {
            //  this.setContent('<br />');
            //}
            this.instanceDoc = document.defaultView; 
```

# javascript - str.split() 传递多个分隔符一个正则表达式和另一个字符串

> ID：15896158
> 
> 赞同：0
> 
> 时间：2013-04-09T07:45:15.500
> 
> 标签：javascript, html, regex

好吧，我`str.split()`在 javascript 中使用 var 传递多个分隔符，其中一个是正则表达式，另一个是字符串，其中正则表达式是`/\([0-9]\)/`字符串，字符串是异常。如何通过两者以及我不替换但我只想打破线。

我的代码在哪里

```
 var rawParts = str.split(/\([0-9]\)/), parts = [];
             for (var i = 0, len = rawParts.length, part; i < len; ++i) {
                 part = "";
                 while (rawParts[i].slice(-1) == "\\") {
                     part += rawParts[i++].slice(0, -1) + "/";
                 }
                 parts.push(part + rawParts[i]);
             }
             return parts;
         }

         var str = section_data.title;
         var val= splitPath(str).join('<br><br>');
         alert(val); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:16:44.700

这对你有用吗？您可以将带有十进制分隔符的异常字符串添加为：

```
 str = str.replace(/(\(\d+\)|exception\s*\:)/gi, "<br /><br />$1"); 
```

让我知道，如果我让你正确并且你得到你的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:23:29.437

您可以为此使用[前瞻](http://www.regular-expressions.info/lookaround.html)。您真的不想拆分带括号的数字，而是拆分新段落开头的空格（即数字或“例外”）。

```
var parts = str.split(/\s+(?=\(\d+\)|Exception)/g),
    val = parts.join("\n\n"); // or something 
```

# codeigniter - CodeIgniter 从数据库中获取值以显示

> ID：15896161
> 
> 赞同：1
> 
> 时间：2013-04-09T07:45:22.663
> 
> 标签：codeigniter

**错误 - -**

**解析错误：语法错误，第 71 行 C:\wamp\www\jobsite\application\models\model_users.php 中的意外 T_RETURN**

```
public function profile_data()
{
    $this->load->database();
    $query = $this->db->get('tbl_studentreg')  //tbl_studentreg is the table name
    return $query->result();                   // Line 71
} 
```

**我可以知道如何解决吗？提前致谢。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:48:34.817

您在这里缺少分号：

```
$query = $this->db->get('tbl_studentreg'); //semicolon added 
```

# c++ - 如何实现 MFC CEdit ON_EN_SETFOCUS 的事件处理程序？

> ID：15896164
> 
> 赞同：0
> 
> 时间：2013-04-09T07:45:35.360
> 
> 标签：c++, mfc

我只是在维护一些 MFC C++ 代码，并且我有一个包含许多`CEdit`对象的屏幕。

我想`OnFocus`为所有事件实现该事件，但只编写一种方法来处理该事件。

为此，我需要知道`CEdit`触发事件的 ID，但看起来`OnFocus`MFC 中的事件实现没有 this 作为参数（与其他一些类似的事件相比`OnCtlColor`，`CWnd*`对象作为参数）。

我只是拒绝相信我必须为每个`CEdit`将其 ID 传递给将执行我想要的操作的主要方法的单个方法实现一个小方法！如果这是唯一的解决方案，那你 MFC 真丢脸！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:11:37.753

[`ON_CONTROL_RANGE`宏](http://msdn.microsoft.com/en-us/library/e3sz709f%28v=vs.71%29.aspx)的存在正是为了允许将单个处理程序映射到多个控件上的同一事件。

首先，您需要确保您的控件 ID 是连续的。然后在标头中，您需要声明一个以控件 ID 作为参数的处理程序：

```
afx_msg void OnSetFocusMulti(UINT ctrlId); 
```

如果需要，这允许您在处理程序中区分发送者控件。

现在您需要将其添加到消息映射中，而不是一堆`ON_EN_SETFOCUS(IDC_EDIT1, &CMyDlg::OnSetfocus)`：

```
ON_CONTROL_RANGE(EN_SETFOCUS, IDC_EDIT1, IDC_EDIT_X, OnEnSetFocusMulti)
                      ^           ^          ^             ^
//       notification code | first ctrl | last ctrl |   the handler 
```

[此处](http://msdn.microsoft.com/en-us/library/s9k6yh5b%28v=vs.71%29.aspx)记录了其他消息映射宏

# jquery - jquery，我的函数执行了很多时间而不是一个

> ID：15896167
> 
> 赞同：0
> 
> 时间：2013-04-09T07:45:57.430
> 
> 标签：jquery, function, onclick, mouseover, mouseout

当我单击 .myClass 时，我希望在#message 之前出现“a”，但不幸的是，出现“aaaa a”而不是它。

我的CSS是：

```
 #message{
    width: 80%;
    height: 10%;
    border-style:solid;
    border-width:5px;
}

 .hideIt{
    visibility:hidden;
} 
```

我的代码是：

```
<div id="message">test1 <span class="myClass hideIt">test2</span></div>

    <script src="jquery.js"></script>
    <script>
    $(function() {

        test = function() { $('#message').before('a '); }

        $(document).on('mouseover', '#message', function () {
            var el = $(this);
            el2 = el.children('.myClass');
            el2.removeClass('hideIt');
            el2.on('click',test);
            el.on('mouseout', function() {
                el2.addClass('hideIt');
            });
        });

    });
    </script> 
```

这里有一个小提琴链接：http: [//jsfiddle.net/TDJVw/](http://jsfiddle.net/TDJVw/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:50:48.957

在这里检查这个小提琴[http://jsfiddle.net/TDJVw/1/](http://jsfiddle.net/TDJVw/1/)它会做你想要的。

您的问题是`click`每次`div`悬停时您都在注册该方法。我移动了方法的`click`外部`hover`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:54:13.237

我已经更新了你的小提琴：

[http://jsfiddle.net/TDJVw/8/](http://jsfiddle.net/TDJVw/8/)

```
$(document).on('mouseover', '#message', function () {
    $(this).find('.myClass').removeClass('hideIt');
}).on('mouseout', '#message', function() {
    $(this).find('.myClass').addClass('hideIt');
})

$('#message .myClass').on('click', test); 
```

我将`click`and事件处理程序移到处理`mouseout`程序之外`mouseover`

编辑：哎呀，我忘了将#message 添加到第二个 .on()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:50:16.127

如果尝试

```
test = function() { $('#message').html('a '); } 
```

这会将“a”放置在“test1”位置。这是你的要求吗？

# c++ - C++ 接受参数中的任何结构

> ID：15896172
> 
> 赞同：1
> 
> 时间：2013-04-09T07:46:12.957
> 
> 标签：c++, pointers, struct

我是 C++ 新手，我想知道我们是否可以接受任何结构作为我们的方法参数。

情况就是这样：我有一个类（比方说`hw_manager`）与硬件类（比方说）交互`hw_device1`。目前`hw_manager`会调用 的方法，方法`hw_device1`的结果会通过 struct 参数返回（将 struct 参数作为引用发送，并更改引用参数的值）。

在 C++ 中代码应该是这样的：

```
struct sSensorStatus {
    unsigned char sensor1;
    unsigned char sensor2;
};

bool checkSensorStatus(struct sSensorStatus &status) {
    // Change the status here
} 
```

现在，由于硬件发生了变化，我需要创建一个新类，假设`hw_device2`它具有完全不同的操作。

```
struct sHardwareStatus {
    unsigned char loader;
    unsigned char transport;
    unsigned char ejector;
    unsigned char mouth;
};

bool checkHardwareStatus(struct sHardwareStatus &status) {
    // Change the status here
} 
```

`hw_manager`我打算实现一个接口，而不是更改其中的代码（这将影响该层之上的代码），假设`IHardware`它具有`doAction`方法。这个想法是这样的：

```
bool doAction(int cmdID, ????) {
    // switch case cmdID
    // based on the cmdID, type cast the ???? into the struct
} 
```

我应该放什么**？？？？**接受任何类型的结构？我可以在 C++ 中做到这一点吗？

谢谢

**编辑**

在硬件内部，我还会有另一个结构，所以我认为使用模板不合适。抱歉，澄清晚了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T07:49:41.063

只需使用多态性。为所有设备创建一个基本类，并将指向它的指针或引用作为参数传递给方法`doAction`。

编辑（感谢 Koushik 对 elyashiv 的回答的评论）：

实际上，更好的解决方案是使方法 doAction 成为所有设备的基类中的虚拟方法，并且根本不向它传递任何东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T08:09:19.870

你可以这样做：

```
struct IHardware{virtual doAction() = 0;} 
```

现在继承它

```
struct sHardwareStatus : public IHardware
{/*implementation with implementation for doAction()*/
    unsigned char loader;
    unsigned char transport;
     unsigned char ejector;
    unsigned char mouth;
     /*provide concrete definition for bool doAction() here*/
} 
```

也为

```
srtuct sSensorStatus : public IHardware
{/*implementation with implementation for doAction()*/
    unsigned char sensor1;
    unsigned char sensor2;
    /*provide concrete definition for bool doAction() here*/
} 
```

现在，当您从接口继承新硬件时，然后为该类编写结构。我想`doAction()`每个硬件都会有所不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T07:51:06.440

如果你只有几个结构和函数要调用，你可以使用模板和模板特化：

```
template<typename T>
bool doAction(T& s)
{
    return false;
}

template<>
bool doAction(sSensorStatus& status)
{
    return checkSensorStatus(status);
}

template<>
bool doAction(sHardwareStatus& status)
{
    return checkHardwareStatus(status);
} 
```

如您所见，您实际上并不需要该`cmdID`标志，编译器将通过单独使用结构类型自行解决。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T07:52:42.670

你应该使用继承。
类似的事情已经到位：

```
struct HardwareStatusInterface{};
struct sHardwareStatus : public HardwareStatusInterface
 {
    unsigned char loader;
    unsigned char transport;
    unsigned char ejector;
    unsigned char mouth;
};
struct sSensorStatus : publc HardwareStatusInterface
 {
    unsigned char sensor1;
    unsigned char sensor2;
}; 
```

和功能：

```
bool doAction(int cmdID, HardwareStatusInterface &HI) {
    // switch case cmdID
    // based on the cmdID, type cast the ???? into the struct
} 
```

# python - 在 matplotlib 保存的 pdf 图中，一些字符位于较低位置

> ID：15896174
> 
> 赞同：3
> 
> 时间：2013-04-09T07:46:19.477
> 
> 标签：python, python-2.7, matplotlib, diacritics

如果我使用 matplotlib 保存图形，有时某些字符（例如 endash、ű énd ő）的位置比其他字符低。不仅在图例中，而且在标签和标题中也是如此。我在 Ubuntu 11.10 和 12.04 上使用 matplotlib 1.0.1 和 1.1.1~rc1 进行了尝试。文件源为utf-8编码，Python版本为2.7.2+。这是来源：

```
import matplotlib.pyplot as plt
from numpy import sin, linspace, pi
x = linspace(0, 20, 1000)
plt.plot(x, sin(x), label=u"Hurrá, őrtűz! Szűztűz.")
plt.plot(x, sin(x), label=u"xxxxá, őx–x–xűx! Sxűxxűx.")
plt.plot(x, sin(x+pi/2), label=u"B–A őrűr ()")
plt.plot(x, sin(x-pi/2), label=u"B–A őrűr")
plt.plot(x, sin(x+pi), label=u"xãxâxőxŐxűxŰx–x endash")
plt.plot(x, sin(x+.1), label=u"őrtűz !")
plt.plot(x, sin(x+.2), label=u"őr tűz! (")
plt.plot(x, sin(x+pi+.2), label=u"őrült tűzlány ãxâ")
plt.title(u"matplotlib version 1.0.1, source: utf-8, Ubuntu 11.10")
plt.legend()
plt.savefig("tmp_accent.pdf")
plt.savefig("tmp_accent.eps") 
```

这是我得到的数字的一部分。（我用 evince 和 acroread 看过）。

![我得到的PDF文件的一部分（用evince，但用acroread是一样的）](https://i.stack.imgur.com/PoG3i.png)

我不擅长字体，但我在 matplotlibrc 中设置了 font.sans-serif 字体，Bitstream Vera Sans、Lucida Grande、Verdana、Geneva、Lucid、Arial、Helvetica、Avant Garde 字体一一设置。

我可以使用 epspdf 命令行工具从 eps 版本制作一个更好的版本，但这种方法取决于平台。有没有更好的办法？问题存在于较新的 matplotlib 版本或较新的 Ubuntu 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T12:33:02.150

似乎呈现 unicode 存在各种问题，尤其是 pdf 文件。我看到了与您使用稍有不同的 matplotlib 版本（见下文）相同的问题。如果我切换到不同的 matplotlib 后端，或者如果您安装了乳胶，则不会发生这种情况，您可以让乳胶进行文本渲染（请参阅[http://matplotlib.org/users/usetex.html](http://matplotlib.org/users/usetex.html)）。在 Ubuntu 上，`texlive-latex-extra`如果您还没有安装该软件包，我相信您需要安装它。

**乳胶**：

Latex 方法效果最好，但速度要慢得多，并且当然会引入很大的外部依赖性。我在文件顶部添加了以下三行：

```
import matplotlib
matplotlib.rcParams['text.usetex']=True
matplotlib.rcParams['text.latex.unicode']=True 
```

请看下面的结果——看起来不错，但您可能想要对轴刻度标签做一些事情。

**开罗**

或者，您可以使用 GTKCairo 后端。我在代码顶部添加了两行：

```
import matplotlib
matplotlib.use("GTKCairo") 
```

您可以在下图中看到它并不完美——图例文本已正确对齐，但不幸的是它现在偏离了图例框。我真的不知道为什么会发生这种情况，但一种可能的解决方法是将行更改`plt.legend()`为`plt.legend(borderpad=2)`，它给出了下面的最终图像。现在有太多的空白，但至少文本适合。您也许可以尝试不同的图例选项来获得看起来更好的东西。

**图片**

请注意，它们在这里看起来比原始 pdf 文件中的要糟糕得多。我刚刚将 pdf 文件直接上传到 imgur，这似乎将它们转换为分辨率相当低的图像。

起初：

![TKAGG 后端](https://i.stack.imgur.com/nND9I.png)

用乳胶： ![乳胶文字渲染](https://i.stack.imgur.com/wGVv8.png)

乳胶pdf的特写截图：

![在此处输入图像描述](https://i.stack.imgur.com/f2wBx.png)

使用 GTKCairo 后端：

![GTK开罗](https://i.stack.imgur.com/4g4eM.png)

使用 GTKCairo 和borderpad=2

![GTKCairo 带边框](https://i.stack.imgur.com/JF6Fn.png)

# php - 关于php上传文件的简单介绍

> ID：15896177
> 
> 赞同：0
> 
> 时间：2013-04-09T07:46:27.170
> 
> 标签：php, upload

我正在使用内置的 PHP 函数`copy()`将图像或文件上传到我的主机。

因此，我想知道为什么文件必须在上传到目的地之前移动到临时文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:10:07.660

> 为什么在上传到目的地之前文件必须移动到临时文件？

这就是 PHP 管理文件上传的方式；从客户端（网络浏览器）发布的正文以格式从网络服务器传递到 PHP，`multipart/form-data`然后对其进行解码。

因为这个过程发生在你的脚本运行之前，PHP 将文件存储在一个临时位置，由[`upload_tmp_dir`](http://www.php.net/manual/en/ini.core.php#ini.upload-tmp-dir).

顺便说一句，建议使用[`move_uploaded_file()`](http://php.net/move_uploaded_file)而不是`copy()`; 它确保文件实际上是作为当前请求的一部分上传的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:48:05.600

而是使用[Move_uploaded_file](http://php.net/manual/en/function.move-uploaded-file.php)。如果您在表单中上传带有文件标签的文件，则不能上传带有副本的文件。

使用 move_uploaded_file，您可以获得错误处理、大小限制、文件类型限制等优势。只需阅读链接。语法是：

```
move_uploaded_file($source, $destination); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T08:07:49.133

当我们在 html 表单中使用文件字段时，它将文件保存到临时文件夹中。您需要 move_upload_fle 函数将文件从临时目录复制到目标目录。

```
move_uploaded_file($source, $destination); 
```

# coldfusion - fusionreactor安装错误后备存储不可用

> ID：15896178
> 
> 赞同：0
> 
> 时间：2013-04-09T07:46:38.617
> 
> 标签：coldfusion, install4j, coldfusion-10, backing, fusionreactor

我正在尝试在我的 ColdFusion 10 / Windows 7（32 位）系统上安装**FusionReactor_windows_4_5_5 。**但这给了我一个错误：

```
安装程序检测到问题

请确保 Java System Preferences Backing Store 具有适当的权限！
其他信息可在以下文档中找到：

http://www.fusion-reactor.com/support/kb/FRS-198.cfm
http://www.fusion-reactor.com/fr/helpdocs/installation_guide.pdf

报告的错误是：
Flush()：后备存储不可用。

```

如何解决并成功安装FusionReactor？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:59:09.773

从此处找到的 FusionReactor 支持页面：[FusionReactor Technote - FRS-198](http://www.fusion-reactor.com/support/kb/FRS-198.cfm)（您收到的错误中也提到了这一点）

> *如何修复它*
> 
> **权限不足**
> 
> 安装 FusionReactor 的服务器的运行时用户需要对 Java System Preferences Backing Store 具有读/写权限。根据操作系统，此数据存储的位置会有所不同。
> 
> 在 Windows 上，数据存储在注册表配置单元`HKEY_LOCAL_MACHINE\SOFTWARE\JavaSoft\Prefs`中，属于 FusionReactor 的数据位于`HKEY_LOCAL_MACHINE\SOFTWARE\JavaSoft\Prefs\com\intergral\fusionreactor`. 《FusionReactor 安装指南》第 14 页为您提供了如何调整该商店的权限的说明。
> 
> 在 Linux 和 Solaris 上，数据通常`/etc/.java/.systemPrefs`作为包含 XML 文件的目录层次结构存储在目录中。属于 FusionReactor 的数据在目录中`/etc/.java/.systemPrefs/com/intergral/fusionreactor`。要设置必要的权限，请以 root 用户身份执行以下命令：
> 
> `chmod -R 777 /etc/.java/.systemPrefs`
> 
> **System Preferences Backing Store 的替代位置**
> 
> *   如果无法创建目录 where 表示 JVM 本身所在的目录（例如 /opt/coldfusionmx/runtime/jre ），一些 JVM 会尝试在目录中创建 System Preferences Backing Store`$JAVA_HOME/.systemPrefs`作为备用解决方案。`/etc/.java/.systemPrefs``$JAVA_HOME`
>     
>     
> *   我们强烈建议您将其`/etc/.java/.systemPrefs`用作 System Preferences Backing Store 的唯一位置。如果您已经有来自其他应用程序的数据，`$JAVA_HOME/.systemPrefs`您应该将其移动`/etc/.java/.systemPrefs`并在之后删除`$JAVA_HOME/.systemPrefs`（在您正确调整权限之后`/etc/.java/.systemPrefs`）。
>     
>     
> 
> **清除系统偏好设置后备存储**
> 
> *   如果您尝试安装许可证并收到前面提到的错误消息：
> 
> `Can not upload license: null`
> 
> 或者干脆
> 
> `null`
> 
> 那么您应该停止应用程序服务器，清除 Java System Preferences Backingstore 的内容并重新启动应用程序服务器。
> 
> 在**Windows**机器上运行注册表编辑器（regedit.exe 或 regedt32.exe），然后删除该键
> 
> `HKEY_LOCAL_MACHINE\SOFTWARE\JavaSoft\Prefs\com\intergral\fusionreactor`
> 
> 在**UNIX**机器上，以 root 用户身份删除目录
> 
> `/etc/.java/.systemPrefs/com/intergral/fusionreactor`
> 
> 如果权限配置正确，则上传许可证并激活它之后将正常工作。
> 
> 在**MacOS**上，系统偏好设置作为一组 *.plist 文件存储在`/Library/Preferences`文件夹下。应用服务器停止后，删除该文件`/Library/Preferences/com.intergral.fusionreactor.plist`以清除所有属于 FusionReactor 的 Preferences。

# ios - appcentre reports: Your iOS app does not appear to have Facebook Login integration

> ID：15896182
> 
> 赞同：1
> 
> 时间：2013-04-09T07:46:56.607
> 
> 标签：ios, facebook, facebook-authentication

It would seem that the facebook appcentre review team and myself are talking about completely different things in relation to the above alert and allthough I have asked them to explain what they mean by it several times all they reply with is this canned answer:

> Your iOS app does not appear to have Facebook Login integration. Please either implement Facebook Login or remove this integration as a listed platform in the developer app. You can read more here: [http://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk](http://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk).

In my app I have implemented the code from the "hellofacebooksample" that comes with the facebook SDK. This all works. I can login, I can post, I can logout. When in facebook app on the iPad and I click on the name of my iOS app that appears in a post, the facebook app moves to the background and my app moves to the foreground. To me this looks like facebook login integration, but appearantly the review team refers to something else all together and they seem unable to explain this to me other then sending me the same canned message over and over again. Even though the "share" button is not hard to find I include the following instructions when I submit the app details page for review with the facebook appcentre:

> Make sure you have the latest version of the app: Mandala Magick.
> 
> Start the app. If the menus are not showing, reveal the menus by tapping the disclosure button at the bottom (portrait mode) or right (landscape mode). Select the "options" button. From the revealed options select: "Disperse mandala". From the dispersion options select: "Share on Facebook". Here is the Facebook sso integration section. You can login if not already. You can share current mandala on Facebook.

Is it me?

Perhaps someone out there can explain why I keep hitting a brick wall.

Cheers

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:13:24.367

我在这里遇到了同样的问题。提交申请时，请务必尽可能详细地说明 Facebook 的使用方式和使用场景。

# caching - Grails ehcache.xml custom caches configuration

> ID：15896188
> 
> 赞同：0
> 
> 时间：2013-04-09T07:47:15.720
> 
> 标签：caching, grails, ehcache, grails-2.0

ehache.xml for cache configuration has been created. But setting in this file works only for hibernate 2L cache For custom caches (for example caching service methods invocation: **@Cacheable('someCache')** ) cache plugin settings don't work

```
<cache name="someCache" maxElementsInMemory="100" timeToLiveSeconds="86400" timeToIdleSeconds="86400"/> 
```

But if setting in Config.groovy -- it works

```
grails.cache.config = {
  cache {
    name 'someCache'
    timeToIdleSeconds 86400
    timeToLiveSeconds 86400
    maxElementsInMemory 100
  }
} 
```

Like for *springcache* plugin I tried to share cacheManager

```
cacheManager(EhCacheManagerFactoryBean) {
    shared = true
} 
```

Where is no result

Now I have to write configuration in two places and for cache managing use **grailsCacheManager.cacheManager** & **CacheManager.instance**

Any ideas?

Upd: Configuration in Config.groovy has been created

```
import  grails.test.Test
grails.cache.config = {
  domain {
    name Test
    timeToIdleSeconds 3600
    timeToLiveSeconds 3600
    maxElementsInMemory 50000
  }
  cache {
    name 'myCache'
    timeToIdleSeconds 86400
    timeToLiveSeconds 86400
    maxElementsInMemory 1000
  }
  defaults {
    eternal false
    overflowToDisk false
    diskPersistent false
    timeToIdleSeconds 600
    timeToLiveSeconds 3600
    memoryStoreEvictionPolicy 'LRU'
  }
} 
```

Domain:

```
package grails.test
class Test {
  static mapping = {
    cache 'nonstrict-read-write'
    version false
  }
} 
```

and in controller I call:

```
Test.get(params.id) 
```

**But cache is empty:** grails.test.Test cur size:0

Custom cache "myCache" -- work

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:42:02.453

查看 Grails ehcache 插件[文档](http://grails-plugins.github.io/grails-cache-ehcache/guide/usage.html)。它包含解释如何使用 Grails 缓存插件 DSL 配置 Hibernate 二级缓存的部分。查找“Hibernate 二级缓存”和“Hibernate 域类二级缓存”

# html - how to remotely check a website?

> ID：15896198
> 
> 赞同：0
> 
> 时间：2013-04-09T07:47:47.377
> 
> 标签：html, widget, html-parsing

I build a free widget for my customers but I want them to put my website link on their websites so I want to check regularly their websites html code for my site link and if they remove the link I will stop the widget automatically. I want to know am I thinking correctly? I mean, is it possible to check websites' code remotely? then if it is possible how to start? I thought about getting the html of the page using php method file_get_content and then parse the returned file but I could not because I did not find a way to parse the returned string.

```
$html = htmlentities(file_get_contents('http://example.com/'));
echo $html; 
```

I use DOM :

```
<?php
$doc = new DOMDocument();
$doc->loadHTML('http://example.com');
$exm = $doc->getElementsByTagName('a');
print_r($exm);
//will print DOMNodeList Object ( )
?> 
```

I do not want to use "RegExp" it is not reliable most of the time if there are any ideas or tips to be provided I will be thankful

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:51:25.127

使用DOM挖掘页面内容： http: [//php.net/dom](http://php.net/dom)

# dll - UIMA integrate DLL

> ID：15896199
> 
> 赞同：1
> 
> 时间：2013-04-09T07:47:52.250
> 
> 标签：dll, uima

How can UIMA integrate DLLs?I want to make a system ,it can integrate some components in the UIMA ! Then how can I do it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:55:02.360

您可以编写一个[C++ UIMA](http://uima.apache.org/doc-uimacpp-huh.html) Annotator，并从中调用您的 DLL。那行得通吗？UIMA 在 中有一个示例`examples/src/ExampleApplication.cpp`，或者您可以从 Java UIMA 管道调用您的 C++ Annotator。

# java - 阵列无法正常工作

> ID：15896206
> 
> 赞同：-1
> 
> 时间：2013-04-09T07:48:06.453
> 
> 标签：java, arrays

嗨，我正在尝试计算二维数组的频率。我正在尝试以某种方式显示频率，例如，如果表格如下：

0：1 2 0

1：2 0 1

2：1 0 2

我希望能够像这样计算频率：

0：0 2 1

1：2 0 1

2：1 1 1

所以表格应该是多少次 0 出现在第一列中，多少次 1 出现在第一列中，依此类推。我不确定我有什么问题。我注意到它进入第二次迭代它停止工作或者它只是给出 0

到目前为止我的代码是

```
 for (int col =0; col< s ; col++){
        System.out.print(col+ ": ");
        for (int row = 0; row<s; row++)
        {
            x=val[row][col];
            if (table[row][col]==row)
            {
                System.out.print(x++ + " ");
            }

            //System.out.print(val[col][row]+" ");
            if (row+1==s)
                System.out.println();
        }
    }

} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:02:31.230

假设一个规则形状的数组。为了使其更健壮，您需要检测最大列数。

```
int[][] table = new int[][]{{1,2,0},{2,0,1},{1,0,2}};
int[][] result = new int[table.length][table.length];
for (int row = 0; row<result.length;row++){
  Arrays.fill(result[row], 0);
}

// iterating through multi dimensional arrays it is easier to start
// with dimension 0
for (int row = 0; row<table.length;row++){
  for (int col =0; col< table[row].length ; col++){
    // the row in the result table equals the value of the cell.
    int index = table[row][col];
    result[index][col]++;
  }
}

System.out.println(Arrays.deepToString(result)); 
```

# eclipse - Standard class members are invisible - `Type of expression is statically unknown` error

> ID：15896210
> 
> 赞同：3
> 
> 时间：2013-04-09T07:48:18.293
> 
> 标签：eclipse, groovy

I am getting `Type of expression is statically unknown` error in Eclipse for many standard groovy functions:

```
import groovy.util.slurpersupport.NodeChild
import groovy.xml.MarkupBuilder
import groovy.xml.StreamingMarkupBuilder
import groovy.xml.XmlUtil
import org.codehaus.groovy.tools.xml.DomToGroovy 
```

...

```
 v- here
def xmlRequest= new XmlSlurper().parseText(templateString.trim())

def outputBuilder = new StreamingMarkupBuilder()
                    v- and here
fw<< outputBuilder.bind{ mkp.yield xmlRequest } 
```

Oh, yes, and the question is - what does it mean, please? This error is NOT widely known by google.

The error is real, it is not a problem that would be resolver by itself at run stage. On the contrary, the project won't run. ( it is a test and says : No JUnit tests found )

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:18:41.077

我认为*蒂姆耶茨*的评论是正确的。这似乎与类型推断有关。我猜您遇到了这个错误[GRECLIPSE-1483](http://jira.codehaus.org/browse/GRECLIPSE-1483)：*字段初始值设定项对类型推断没有贡献*。

我做了一个小测试：

```
package test

import groovy.util.slurpersupport.NodeChild
import groovy.xml.MarkupBuilder
import groovy.xml.StreamingMarkupBuilder
import groovy.xml.XmlUtil
import org.codehaus.groovy.tools.xml.DomToGroovy

class SimpleTest {
    def templateString = '<test>testing</test>'

    def xmlRequest= new XmlSlurper().parseText(templateString.trim())
} 
```

这样，该`trim()`方法被下划线。激活*Groovy 类型检查*（右键单击文件 -> Groovy 类型检查 -> 类型检查），消息“表达式类型静态未知：修剪”

更进一步，用`@TypeChecked`：

*   此行有多个标记
    *   Groovy：[静态类型检查] - 找不到匹配的方法 groovy.util.XmlSlurper#parseText(java.lang.Object)。请检查声明的类型是否正确以及方法是否存在。
    *   Groovy：[静态类型检查] - 找不到匹配的方法 java.lang.Object#trim()。请检查声明的类型是否正确以及方法是否存在。
    *   表达式的类型是静态未知的：trim

但是，如果我将上面的代码包含在一个方法中，从而没有字段初始值设定项，上述错误就会消失：

```
@TypeChecked
class SimpleTest {
    def test() {
        def templateString = '<test>testing</test>'
        def xmlRequest= new XmlSlurper().parseText(templateString.trim())
    }
} 
```

如果没有`@TypeChecked`注释，“ *Groovy 类型检查*”不会给出这个错误。

# django - Django - 加载具有外部身份验证的页面会更改 session_key

> ID：15896217
> 
> 赞同：1
> 
> 时间：2013-04-09T07:48:35.417
> 
> 标签：django, session, authentication

我正在尝试将项目从 Django 1.4 迁移到 Django 1.5.1 ...

Web 服务必须可作为经过身份验证的用户和匿名用户访问。[我们使用带有 Apache 模块的外部身份验证（根据https://docs.djangoproject.com/en/1.5/howto/auth-remote-user/](https://docs.djangoproject.com/en/1.5/howto/auth-remote-user/)设置“REMOTE_USER”环境变量）。

url [https://example.com/](https://example.com/)具有不同的内容，具体取决于用户是匿名的还是经过身份验证的。

我们在 Django 1.4 中使用的策略是只有以 /auth/ 开头的 url 才会被 Apache 的模块验证。如果用户（位于[https://example.com/](https://example.com/)页面上）选择进行身份验证，他会跳转到[https://example.com/auth/](https://example.com/auth/)。/auth/ 由 Apache 的模块进行身份验证，然后由 Django 应用程序提供服务，该应用程序重定向回[https://example.com/](https://example.com/)。由于 session_key，Django 知道用户已通过身份验证。

不幸的是，对于 Django 1.5.1 ...每次浏览器从经过身份验证的 URL 移动到未经过身份验证的 URL 时，session_key 都会更改。

在我的日志中，我可以看到 (Django 1.5.1) ：

```
DEBUG 2013-04-09 09:15:20,571 views home None
DEBUG 2013-04-09 09:15:48,886 views auth ow1bzgdajs7i12d9bmfwwm3fpw47elna
DEBUG 2013-04-09 09:15:48,981 views home mehlf1x0iemx9yc3ddf6mhnls1nha1r4 
```

*   第一行是用户访问[https://example.com/](https://example.com/)时。
*   其次，当他点击“Connexion”按钮时。
*   第三是 HttpResponseRedirect 到 / 。
*   最后一个字符串是 request.session.session_key 。

当我在 /auth (Django 1.5.1) 上删除 apache 身份验证时：

```
DEBUG 2013-04-09 09:16:45,268 views home None
DEBUG 2013-04-09 09:16:48,258 views auth None
DEBUG 2013-04-09 09:16:48,345 views home None 
```

使用 Django 1.4，相同的日志给出的内容如下：

```
DEBUG 2013-04-09 09:11:21,899 views home None
DEBUG 2013-04-09 09:11:41,261 views auth f16ab3e574b866177803f9011dc33ab8
DEBUG 2013-04-09 09:11:41,375 views home f16ab3e574b866177803f9011dc33ab8 
```

这种行为改变是预期的吗？（新功能？）我们如何修复它？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T06:43:51.347

这是一个错误修复：[https](https://code.djangoproject.com/ticket/17869) ://code.djangoproject.com/ticket/17869 。

它记录在 Django 1.5 的发行说明中：

> 现在，当 REMOTE_USER 标头在同一浏览器会话期间消失时，RemoteUserMiddleware 会强制注销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:02:32.870

正如 Aymeric 提到的，这是 Django 1.5 中出现的预期错误修复。:) :(

在我们的例子中，即使 Apache 的模块不再提供“REMOTE_USER”变量，我们也确实需要会话持续存在。为了解决这个问题，我发现了两种可能性：

1.  子类 RemoteUserMiddleware 并仅重新定义方法 process_request 没有代码 auth.logout(request)
2.  插入一个自制的中间件，在需要时将用户名注入到 REMOTE_USER 中。

我选择了第二种可能性，因为它将/应该是零努力地适应即将推出的 Django 版本。

在我`'main.middleware.persistant_session_middleware'`之前添加的 settings.py 中`'django.contrib.auth.middleware.RemoteUserMiddleware'`

并在 main/middleware.py 中定义了**persistant_session_middleware ：**

```
class persistant_session_middleware(object):
def __init__(self):
    pass

def process_request(self, request):
    header = "REMOTE_USER"

    if request.user.is_authenticated() and not header in request.META:
        request.META[header] = request.user.username
    return None 
```

我只是希望这不会是一个安全漏洞！但只要这取决于`request.user.is_authenticated()`我认为我们是安全的:)

# ajax - echo json_encode($data,TRUE) is not going back to the ajax function in codeigniter

> ID：15896218
> 
> 赞同：0
> 
> 时间：2013-04-09T07:48:39.517
> 
> 标签：ajax, codeigniter-2, json

My code is

```
<script>
 $("#saveExpense").click(function(){
     alert('I am in jquery function');
    $.ajax({
        type:'GET', 
        url: "<?php echo site_url('expenses/addExpense');?>",
        dataType: 'json',
        data:$('#AddExpenseForm').serialize(), 
        success: function(response) {
            comsole.log(response);
            var curlen = response.length;

            var htm = curlen+"| &nbsp;"+response[curlen-1].Category+"| &nbsp;"+response[curlen-1].Amount+"| &nbsp;"+response[curlen-1].Comments+"| &nbsp;Edit/Delete<br />";

             $("#ShowExpenses").append(htm); 
        }
    });
 }); 
```

My controller is

```
function addExpense(){
    if(!$this->session->userdata('logged_in'))
        redirect('expenses','refresh');
    $this->expenses_model->addExpense();
    $data=$this->expenses_model->viewExpenses();
    echo json_encode($data,TRUE);
} 
```

# php - Adding a custom bit of text to PHP Twitter code

> ID：15896221
> 
> 赞同：0
> 
> 时间：2013-04-09T07:48:43.627
> 
> 标签：php, text, twitter, wordpress

I am using the code below, which is bulked in with the "Keyring Social Importer" plugin for Wordpress, to import my Tweets on a regular basis as individual blog posts in my Wordpress blog.

I would like to add a line of text within each created blog post, after the tweet, that says "Follow me on Twitter" with a link to my Twitter page. How could I achieve this?

So, currently my posts look like this... Title Of Post = Tweet with 15 word limit and "..." after it. Content = Tweet in full. After the Tweet in full within the content, I want this follow link.

Many thanks in advance for any help you can offer.

HT

```
<?php

function Keyring_Twitter_Importer() {

class Keyring_Twitter_Importer extends Keyring_Importer_Base {
    const SLUG              = 'twitter';    // e.g. 'twitter' (should match a service in Keyring)
    const LABEL             = 'Twitter';    // e.g. 'Twitter'
    const KEYRING_SERVICE   = 'Keyring_Service_Twitter';    // Full class name of the Keyring_Service this importer requires
    const REQUESTS_PER_LOAD = 3;     // How many remote requests should be made before reloading the page?

    var $auto_import = false;

    function __construct() {
        parent::__construct();
        add_action( 'keyring_importer_twitter_custom_options', array( $this, 'custom_options' ) );
    }

    function custom_options() {
        ?><tr valign="top">
            <th scope="row">
                <label for="include_rts"><?php _e( 'Import retweets', 'keyring' ); ?></label>
            </th>
            <td>
                <input type="checkbox" value="1" name="include_rts" id="include_rts"<?php echo checked( $this->get_option( 'include_rts', true ) ); ?> />
            </td>
        </tr>
        <tr valign="top">
            <th scope="row">
                <label for="include_replies"><?php _e( 'Import @replies', 'keyring' ); ?></label>
            </th>
            <td>
                <input type="checkbox" value="1" name="include_replies" id="include_replies"<?php echo checked( $this->get_option( 'include_replies', true ) ); ?> />
            </td>
        </tr><?php
    }

    function handle_request_options() {
        // Validate options and store them so they can be used in auto-imports
        if ( empty( $_POST['category'] ) || !ctype_digit( $_POST['category'] ) )
            $this->error( __( "Make sure you select a valid category to import your checkins into." ) );

        if ( empty( $_POST['author'] ) || !ctype_digit( $_POST['author'] ) )
            $this->error( __( "You must select an author to assign to all checkins." ) );

        if ( isset( $_POST['auto_import'] ) )
            $_POST['auto_import'] = true;
        else
            $_POST['auto_import'] = false;

        if ( isset( $_POST['include_rts'] ) )
            $_POST['include_rts'] = true;
        else
            $_POST['include_rts'] = false;

        if ( isset( $_POST['include_replies'] ) )
            $_POST['include_replies'] = true;
        else
            $_POST['include_replies'] = false;

        // If there were errors, output them, otherwise store options and start importing
        if ( count( $this->errors ) ) {
            $this->step = 'greet';
        } else {
            $this->set_option( array(
                'category'        => (int) $_POST['category'],
                'tags'            => explode( ',', $_POST['tags'] ),
                'author'          => (int) $_POST['author'],
                'include_replies' => (bool) $_POST['include_replies'],
                'include_rts'     => (bool) $_POST['include_rts'],
                'auto_import'     => (bool) $_POST['auto_import'],
                'user_id'         => $this->service->get_token()->get_meta( 'user_id' ),
            ) );

            $this->step = 'import';
        }
    }

    function build_request_url() {
        // Base request URL
        $url = "http://api.twitter.com/1/statuses/user_timeline.json?";
        $params = array(
            'user_id' => $this->get_option( 'user_id' ),
            'trim_user' => 'true',
            'count' => 75, // More than this and Twitter seems to get flaky
            'include_entities' => 'true',
        );
        if ( false == $this->get_option( 'include_replies' ) )
            $params['exclude_replies'] = 'true';
        if ( true == $this->get_option( 'include_rts' ) )
            $params['include_rts'] = 'true';
        $url = $url . http_build_query( $params );

        if ( $this->auto_import ) {
            // Locate our most recently imported Tweet, and get ones since then
            $latest = get_posts( array(
                'numberposts' => 1,
                'orderby' => 'date',
                'order' => 'DESC',
                'meta_key'    => 'keyring_service', // In case there are other asides
                'meta_value'  => 'twitter',
                'tax_query' => array( array(
                    'taxonomy' => 'post_format',
                    'field' => 'slug',
                    'terms' => array( 'post-format-standard' ), // Tweets stored as asides
                    'operator' => 'IN',
                ) ),
            ) );

            // If we have already imported some, then start since the most recent
            if ( $latest ) {
                $max = get_post_meta( $latest[0]->ID, 'twitter_id', true );
                $url = add_query_arg( 'since_id', $max, $url );
            }
        } else {
            // Handle page offsets (only for non-auto-import requests)
            $url = add_query_arg( 'page', $this->get_option( 'page', 0 ), $url );
        }

        return $url;
    }

    function extract_posts_from_data( $raw ) {
        global $wpdb;

        $importdata = $raw;

        if ( null === $importdata ) {
            $this->finished = true;
            return new Keyring_Error( 'keyring-twitter-importer-failed-download', __( 'Failed to download your tweets from Twitter. Please wait a few minutes and try again.', 'keyring' ) );
        }

        // Check for API overage/errors
        if ( !empty( $importdata->error ) ) {
            $this->finished = true;
            return new Keyring_Error( 'keyring-twitter-importer-throttled', __( 'You have made too many requests to Twitter and have been temporarily blocked. Please try again in 1 hour (duplicate tweets will be skipped).', 'keyring' ) );
        }

        // Make sure we have some tweets to parse
        if ( !is_array( $importdata ) || !count( $importdata ) ) {
            $this->finished = true;
            return;
        }

        // Get the total number of tweets we're importing
        if ( !empty( $importdata[0]->user->statuses_count ) )
            $this->set_option( 'total', $importdata[0]->user->statuses_count );

        // Parse/convert everything to WP post structs
        foreach ( $importdata as $post ) {
            // Double-check for @replies, which shouldn't be included at all if we chose to skip them
            if ( true == $this->get_option( 'exclude_replies' ) && null != $post->in_reply_to_screen_name )
                continue;

            // Post title can be empty for Asides, but it makes them easier to manage if they have *something*
            $title_words = explode( ' ', strip_tags( $post->text ) );
            $post_title  = implode( ' ', array_slice( $title_words, 0, 15 ) );
// Use the first 15 words
            if ( count( $title_words ) > 15 )
                $post_title .= '&hellip;'; 

            // Parse/adjust dates
            $post_date_gmt = strtotime( $post->created_at );
            $post_date_gmt = gmdate( 'Y-m-d H:i:s', $post_date_gmt );
            $post_date     = get_date_from_gmt( $post_date_gmt );

            // Apply selected category
            $post_category = array( $this->get_option( 'category' ) );

            // Clean up content a bit
            $post_content = $post->text;
            $post_content = $wpdb->escape( html_entity_decode( trim( $post_content ) ) );

            // Handle entities supplied by Twitter
            if ( count( $post->entities->urls ) ) {
                foreach ( $post->entities->urls as $url ) {
                    $post_content = str_replace( $url->url, $url->expanded_url, $post_content );
                }
            }

            // Any hashtags used in a tweet will be applied to the Post as tags in WP
            $tags = $this->get_option( 'tags' );
            if ( preg_match_all( '/(^|[(\[\s])#(\w+)/', $post_content, $tag ) )
                $tags = array_merge( $tags, $tag[2] );

            // Add HTML links to URLs, usernames and hashtags
            $post_content = make_clickable( esc_html( $post_content ) );

            // Include geo Data (if provided by Twitter)
            if ( !empty( $post->geo ) && 'point' == strtolower( $post->geo->type ) )
                $geo = array(
                    'lat' => $post->geo->coordinates[0],
                    'long' => $post->geo->coordinates[1]
                );
            else
                $geo = array();

            // Get a GUID from Twitter, plus other important IDs to store in postmeta later
            $user = $this->service->get_token()->get_meta( 'username' );
            $twitter_id              = $post->id_str;
            $twitter_permalink       = "https://twitter.com/{$user}/status/{$twitter_id}";
            $in_reply_to_user_id     = $post->in_reply_to_user_id;
            $in_reply_to_screen_name = $post->in_reply_to_screen_name;
            $in_reply_to_status_id   = $post->in_reply_to_status_id;
            $post_author             = $this->get_option( 'author' );
            $post_status             = 'publish';
            $twitter_raw             = $post;

            // Build the post array, and hang onto it along with the others
            $this->posts[] = compact(
                'post_author',
                'post_date',
                'post_date_gmt',
                'post_content',
                'post_title',
                'post_status',
                'post_category',
                'tags',
                'twitter_id',
                'twitter_permalink',
                'geo',
                'in_reply_to_user_id',
                'in_reply_to_screen_name',
                'in_reply_to_status_id',
                'twitter_raw'
            );
        }
    }

    function insert_posts() {
        global $wpdb;
        $imported = 0;
        $skipped  = 0;
        foreach ( $this->posts as $post ) {
            extract( $post );
            if (
                $wpdb->get_var( $wpdb->prepare( "SELECT meta_id FROM {$wpdb->postmeta} WHERE meta_key = 'twitter_id' AND meta_value = %s", $twitter_id ) )
            ||
                $post_id = post_exists( $post_title, $post_content, $post_date )
            ) {
                // Looks like a duplicate
                $skipped++;
            } else {
                $post_id = wp_insert_post( $post );

                if ( is_wp_error( $post_id ) )
                    return $post_id;

                if ( !$post_id )
                    continue;

                // Track which Keyring service was used
                add_post_meta( $post_id, 'keyring_service', $this->service->get_name() );

                // Store the twitter id, reply ids etc
                add_post_meta( $post_id, 'twitter_id', $twitter_id );
                add_post_meta( $post_id, 'twitter_permalink', $twitter_permalink );
                if ( !empty( $in_reply_to_user_id ) )
                    add_post_meta( $post_id, 'twitter_in_reply_to_user_id', $in_reply_to_user_id );
                if ( !empty( $in_reply_to_screen_name ) )
                    add_post_meta( $post_id, 'twitter_in_reply_to_screen_name', $in_reply_to_screen_name );
                if ( !empty( $in_reply_to_status_id ) )
                    add_post_meta( $post_id, 'twitter_in_reply_to_status_id', $in_reply_to_status_id );

                // Update Category and Tags
                wp_set_post_categories( $post_id, $post_category );
                if ( count( $tags ) )
                    wp_set_post_terms( $post_id, implode( ',', $tags ) );

                // Store geodata if it's available
                if ( !empty( $geo ) ) {
                    add_post_meta( $post_id, 'geo_latitude', $geo['lat'] );
                    add_post_meta( $post_id, 'geo_longitude', $geo['long'] );
                    add_post_meta( $post_id, 'geo_public', 1 );
                }

                add_post_meta( $post_id, 'raw_import_data', json_encode( $twitter_raw ) );

                $imported++;
            }
        }
        $this->posts = array();

        // Return, so that the handler can output info (or update DB, or whatever)
        return array( 'imported' => $imported, 'skipped' => $skipped );
    }
}

} // end function Keyring_Twitter_Importer

add_action( 'init', function() {
    Keyring_Twitter_Importer(); // Load the class code from above
    keyring_register_importer(
        'twitter',
        'Keyring_Twitter_Importer',
        plugin_basename( __FILE__ ),
        __( 'Import all of your tweets from Twitter as Posts (marked as "asides") in WordPress.', 'keyring' )
    );
} ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:53:59.390

这可能对您有用。

后：

```
Keyring_Twitter_Importer(); // Load the class code from above 
```

尝试这个：

```
Keyring_Twitter_Importer(); // Load the class code from above
print "<BR><a href=\"http://Twitter-link.com/you\">Follow me on Twitter</a><BR>"; 
```

# c# - 如何将列表数据转换为json格式

> ID：15896222
> 
> 赞同：1
> 
> 时间：2013-04-09T07:48:45.590
> 
> 标签：c#, json, linq

大家好，我想转换一个包含 36 行值的列表，我想以这样的特定格式更改它

```
"rows": [{
    "id": 1,
    "cell": ["1", "Super Item", "300", "test", "test1", "test2,", "test3,", "test4", "test5", "test6", "test7", "test8", "test9", "test11", "test12", "test13", "test14", "test15", "test16", "test17", "test18", "test19", "test20", "test21", "test22", "test23", "test24", "test25", "test26", "test27", 0, null, false, false]
  }, {
    "id": 2,
    "cell": ["2", "Item 1", "100", "test", "test1", "test2,", "test3,", "test4", "test5", "test6", "test7", "test8", "test9", "test11", "test12", "test13", "test14", "test15", "test16", "test17", "test18", "test19", "test20", "test21", "test22", "test23", "test24", "test25", "test26", "test26", 1, 1, false, false]
  }, {
    "id": 3,
    "cell": ["3", "Sub Item 1", "50", "test", "test1", "test2,", "test3,", "test4", "test5", "test6", "test7", "test8", "test9", "test11", "test12", "test13", "test14", "test15", "test16", "test17", "test18", "test19", "test20", "test21", "test22", "test23", "test24", "test25", "test26", "test26", 2, 2, true, true]
  }, {
    "id": 4,
    "cell": ["4", "Sub Item 2", "25", "test", "test1", "test2,", "test3,", "test4", "test5", "test6", "test7", "test8", "test9", "test11", "test12", "test13", "test14", "test15", "test16", "test17", "test18", "test19", "test20", "test21", "test22", "test23", "test24", "test25", "test26", "test26", 2, 2, false, false]
  }, {
    "id": 5,
    "cell": ["5", "Sub-sub Item 1", "25", "test", "test1", "test2,", "test3,", "test4", "test5", "test6", "test7", "test8", "test9", "test11", "test12", "test13", "test14", "test15", "test16", "test17", "test18", "test19", "test20", "test21", "test22", "test23", "test24", "test25", "test26", "test26", 3, 4, true, true]
  }, {
    "id": 6,
    "cell": ["6", "Sub Item 3", "25", "test", "test1", "test2,", "test3,", "test4", "test5", "test6", "test7", "test8", "test9", "test11", "test12", "test13", "test14", "test15", "test16", "test17", "test18", "test19", "test20", "test21", "test22", "test23", "test24", "test25", "test26", "test26", 2, 2, true, true]
  }, {
    "id": 7,
    "cell": ["7", "Item 2", "200", "test", "test1", "test2,", "test3,", "test4", "test5", "test6", "test7", "test8", "test9", "test11", "test12", "test13", "test14", "test15", "test16", "test17", "test18", "test19", "test20", "test21", "test22", "test23", "test24", "test25", "test26", "test26", 0, null, false, false]
  }, {
    "id": 8,
    "cell": ["8", "Sub Item 1", "100", "test", "test1", "test2,", "test3,", "test4", "test5", "test6", "test7", "test8", "test9", "test11", "test12", "test13", "test14", "test15", "test16", "test17", "test18", "test19", "test20", "test21", "test22", "test23", "test24", "test25", "test26", "test26", 1, 7, false, false]
  }, {
    "id": 9,
    "cell": ["9", "Sub-sub Item 1", "50", "test", "test1", "test2,", "test3,", "test4", "test5", "test6", "test7", "test8", "test9", "test11", "test12", "test13", "test14", "test15", "test16", "test17", "test18", "test19", "test20", "test21", "test22", "test23", "test24", "test25", "test26", "test26", 2, 8, true, true]
  }, {
    "id": 10,
    "cell": ["10", "Sub-sub Item 2", "50", "test", "test1", "test2,", "test3,", "test4", "test5", "test6", "test7", "test8", "test9", "test11", "test12", "test13", "test14", "test15", "test16", "test17", "test18", "test19", "test20", "test21", "test22", "test23", "test24", "test25", "test26", "test26", 1, 8, false, true]
  }, {
    "id": 11,
    "cell": ["11", "Sub Item 2", "100", "test", "test1", "test2,", "test3,", "test4", "test5", "test6", "test7", "test8", "test9", "test11", "test12", "test13", "test14", "test15", "test16", "test17", "test18", "test19", "test20", "test21", "test22", "test23", "test24", "test25", "test26", "test26", 2, 8, true, true]
  }, {
    "id": 12,
    "cell": ["12", "Super Item", "300", "test", "test1", "test2,", "test3,", "test4", "test5", "test6", "test7", "test8", "test9", "test11", "test12", "test13", "test14", "test15", "test16", "test17", "test18", "test19", "test20", "test21", "test22", "test23", "test24", "test25", "test26", "test26", 0, null, false, false]
  }
] 
```

我怎样才能把这个列表变成像这种格式的 json

```
var res = new List<FlatProduct>(); 
```

我有一个平面产品列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:45:40.647

.NET 3.5 开箱即用地支持 JSON 序列化。您必须参考`System.Runtime.Serialization`和`System.ServiceModel.Web`。

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Runtime.Serialization;
using System.Runtime.Serialization.Json;
using System.Text;

namespace ConsoleApplication1
{
    [DataContract]
    public class FlatProduct
    {
        [DataMember]
        public string id { get; set; }

        [DataMember]
        public string[] cell { get; set; }
    }

    class Program
    {
        static void Main(string[] args)
        {
            var flatProducts = new List<FlatProduct>
            {
                new FlatProduct { id = "1", cell = new string[2]{"1", "Super Item"} },
                new FlatProduct { id = "2", cell = new string[2]{"2", "Item 1"} }
            };
            var serializer = new DataContractJsonSerializer(flatProducts.GetType());
            using(MemoryStream stream = new MemoryStream())
            {
                serializer.WriteObject(stream, flatProducts);
                stream.Seek(0, SeekOrigin.Begin);

                using (var streamReader = new StreamReader(stream))
                {
                    string result = streamReader.ReadToEnd();
                }
            }
        }
    }
} 
```

当然，您可以在 中放置更多`string[]`项目`FlatProduct`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:54:03.363

您应该使用 codeplex 中的 Json.NET

[http://json.codeplex.com/](http://json.codeplex.com/)

# magento - Magento EBS payment gateway - upon redirection shows 404 page

> ID：15896225
> 
> 赞同：0
> 
> 时间：2013-04-09T07:48:49.997
> 
> 标签：magento, magento-1.7, payment-gateway, url-redirection

I have developed a store and using EBS payment gateway for netbanking. It was working fine but suddenly it started showing a 404 page not found error upon redirection. After clicking confirm order the customer is never directed to the EBS page but remains on the site with the page not found message!

I've checked the EBS key, Magento base urls etc, what else can i do? How can I fix this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:52:06.583

我修好了它。这是 i-speed 插件的问题。如果这对任何人都有帮助，我只是将“secureebs”放入忽略的 URL 部分

# javascript - Backbone App Crash on Navigate

> ID：15896227
> 
> 赞同：1
> 
> 时间：2013-04-09T07:49:04.677
> 
> 标签：javascript, backbone.js, kendo-ui, single-page-application

I have a single-page-app built with backbone.js that has multiple views in it, and the app often crashes when transitioning between views. When the app crashes, the browser itself does not crash, just the app, so the browser displays a message like Chrome's "Oops" screen. This crash forces the user to his 'Reload' to refresh the page, so whatever they were working on was lost if they hadn't saved. The crash is intermittent and hard to reproduce.

# Code:

To accomplish these transitions without a navigation tab, I create an event-aggregator (or a simple 'state-machine') in the router like so:

```
eventAggregator: _.extend({}, Backbone.Events), 
```

I also set-up the router to listen for multiple events, for example:

```
this.eventAggregator.on("moveToPage1", function () {
                this.Navigate("page1", {trigger: true});
            });
this.eventAggregator.on("moveToPage1", function () {
                this.Navigate("page2", {trigger: true});
            }); 
```

So the routes look something like this:

```
routes: {
            "page1": "viewPage1",
            "page2": "viewPage2",
}, 
```

When those routes are navigated-to I do some basic stuff to hide modals and showing/hiding of the views, and refresh some kendoUI grids that are on some of the views:

```
viewPage1: function(){
    $(window).trigger('closeModal');
    $(window).trigger('minimize');
    /* hide all the views */
    _.each(this.views, function (view) {
        view.$el.hide();
    });
    page1.$el.show();
    //for Kendo UI grids            
    $(window).trigger("realWindowResize"); 
    $(window).trigger("refreshGrid");
} 
```

Then I pass the 'eventAggregator' object into each view. Then the view can have an event-hookup for a button that will trigger the event like so:

```
eventAggregator.trigger("moveToPage2"); 
```

# Other thoughts:

### (Not sure if any of this is useful information, but I thought it might help explain things I've considered, or looked into to help me solve this issue)

*   Two of the pages are normal backbone views, and 2 of them are views with Kendo UI grids in them (not sure if that is relevant or not). We do refresh the grids when the page transitions.
*   I have done some memory profiling and monitored the memory footprint of the app, and there's no evidence of a memory leak.
*   When the app crashes there is usually at least 1 ajax call that is left 'pending' because it was sent just before the app crashed.
*   One tester believes he saw it crash when pressing a 'Cancel' button. This would be one unique test result, and it is interesting because the Cancel button does not use the event-pattern shown above, it simply has the attribute `href="#homePage"` in the html.
*   Sometimes the bug seems easy to reproduce after leaving the browser idle for a period of time, but not always. It is also reproducible at times while under heavy use. (In both cases, the memory profiling shows nothing remarkable).
*   If I litter my javascript code with `console.log()` statements, there is usually one statement that is always printed out just before the crash. It is some basic code for handling the `realWindowResize` event we created. However, if I remove the code to raise that event, the app will still crash (seems to have the same frequency as before), even though that code is no longer being touched. This leads me to believe this is some weird timing issue...

What could be causing a crash of this type? Any ideas how I can further debug the issue? Thanks for the help...

# java - 泽西岛的 @path 和 @queryparam

> ID：15896231
> 
> 赞同：1
> 
> 时间：2013-04-09T07:49:09.557
> 
> 标签：java, web-services, rest, jersey

我正在开发一个简单的宁静网络服务，并且是一个新手。因此，我参考了基本教程并成功执行了它们。

以下是我编写的示例代码以进一步进行

```
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.QueryParam;
import javax.ws.rs.core.MediaType;

@Path("/text/{sso}")

public class Do {

      @GET
      @Produces(MediaType.TEXT_PLAIN)
      public String simple(@PathParam("ss") @QueryParam("d") String params) {
        return "Hello Jersey"+params;
      }

      @GET
      @Produces(MediaType.TEXT_PLAIN)
      public String advanced(@PathParam("as") @QueryParam("d") String params) {
        return "Hello Jersey-----"+params;
      }
} 
```

我基本上需要的是在同一个类中公开两种不同的方法，并根据 url 访问适当的方法。

执行上述方式时会引发以下错误 - com.sun.jersey.spi.inject.Errors$ErrorMessagesException 如果我走在正确的轨道上，有人可以指导我吗？如果是，请告诉我我错过了哪里。如果不是这种情况的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:05:11.883

您的代码中有两个问题。

1.  `@PathParam`注释需要应用于您的方法的参数
2.  注解的值`@PathParam`需要匹配一个路径段。

你的类中唯一的路径段是这样定义的：

```
@Path("/text/{sso}") 
```

并具有价值'sso'。因此，您的代码应该看起来更像这样：

```
@Path("/text/{sso}")
public class Do {

    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String simple(@PathParam("sso") String sso,
            @QueryParam("d") String params) {
        return "Hello Jersey" + params;
    }

    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String advanced(@PathParam("sso") String sso,
            @QueryParam("d") String params) {
        return "Hello Jersey-----" + params;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:02:16.780

如果你想匹配两个s ，你的方法必须有*两个参数。*`QueryParam`

```
public String simple(@PathParam("ss") String paramSs,
                     @PathParam("d") String paramD) {
  // ...
} 
```

`@PathParam`是*一个*方法参数的注解。

# iphone - 在iphone中的特定帧中裁剪图像？

> ID：15896233
> 
> 赞同：0
> 
> 时间：2013-04-09T07:49:16.873
> 
> 标签：iphone, ios, ipad

我有一个应用程序，我需要将图像裁剪到特定的帧。即 CGRectMake(20,40, 280,200)。然后我正在拍摄我的图像并在

> 选择器完成

我正在这样做`

```
 UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];

    //code for crop
    CGRect rect=CGRectMake(20,40,280,180);
    CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], rect);
    UIImage *newImg = [UIImage imageWithCGImage:imageRef]; 
    CGImageRelease(imageRef);
    CGSize size = [newImg size];
    UIButton *btn=[[UIButton alloc]initWithFrame:CGRectMake(0, 0, size.width, size.height)];
    NSLog(@"frame = %@\n", NSStringFromCGRect(btn.frame));
  imageData =[[Utility getCompressedData:newImg]retain]; 

        [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];
        [self dismissModalViewControllerAnimated:YES]; 
```

`并上传图像。但是当我从上传的服务器获取图像时，它仍然是 360*480。为什么会这样。我需要有一个覆盖视图，它只对用户启用部分相机视图。所以用户可以参加他想要的任何部分。那只是显示。但我不知道我哪里出错了。有人可以帮助我吗？

# c# - C# 图表在 for-int 循环中添加数据

> ID：15896234
> 
> 赞同：1
> 
> 时间：2013-04-09T07:49:21.277
> 
> 标签：c#, wpf, visual-studio-2012, charts

我需要这方面的帮助，我在 wpf 中创建了一个图表，在我的 c# 中我有以下内容：

```
((ColumnSeries)callLogs.Series[0]).ItemsSource =
  new KeyValuePair<string, int>[]{

      for(int i=0; i<counter; i++)
      {
        new KeyValuePair<string, int>(callHour[i], callCounter[i])
      }
}; 
```

现在上面的语句不起作用。

变量 callHour 和 callCounter 是从数据库中提取所需数据的数组，它们工作正常，我只需要一种通过存储在数组中的值的数量将数据添加到图形的方法，如果这有意义吗？

换句话说，而不是使用这种方法：

```
((ColumnSeries)callLogs.Series[0]).ItemsSource =
  new KeyValuePair<string, int>[]{
    new KeyValuePair<string, int>(callHour[0], callCounter[0]),
    new KeyValuePair<string, int>(callHour[1], callCounter[1]),
    new KeyValuePair<string, int>(callHour[2], callCounter[2]),
    new KeyValuePair<string, int>(callHour[3], callCounter[3]),
    new KeyValuePair<string, int>(callHour[4], callCounter[4]),
    new KeyValuePair<string, int>(callHour[5], callCounter[5]),
    ...}; 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:41:01.060

如果您还没有找到任何解决方案，则首先创建一个 KeyValuePair 对象数组，然后将其分配给 ItemSource：

```
 var items = new KeyValuePair<string, int>[counter];
        for(var i = 0; i < counter; i++)
        {
            items[i] = new KeyValuePair<string, int>(callHour[i], callCounter[i]);
        };
 (ColumnSeries)callLogs.Series[0]).ItemsSource = items; 
```

# java - 可以在java中显式锁定/解锁对象上的隐式同步锁吗

> ID：15896235
> 
> 赞同：0
> 
> 时间：2013-04-09T07:49:23.083
> 
> 标签：java, synchronization

是的，同步锁定语法很容易，因为它是块结构，但有时你不能使用它。有没有办法显式锁定和解锁对象上的“同步”监视器，以便它与“同步”的先前用法兼容？

```
class MyObj {
    Object locker_ = new Object();
    void lockedMethod() {
       synchronized(locker_) {
           ....
       }
    }
    Iterator lockTraversal() {
        explicitlyWaitForAndAcquireLock(locker_); // assume will not throw exception
        return(getAnIterator());
    }
    void unlockTraversal() {
        explicitlyReleaselock(locker_);
    }
}

 MyObj obj = (...)

 try {
     Iterator it = obj.lockTraversal();
     for(;;) // iterate 
 } finally {
     obj.unlockTraversal();
 } 
```

当然，在这个例子中，“闭包”会消除这种需要，就像“堆栈范围”的析构函数一样;^>但是......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:51:38.020

您不能在对象的内在锁上执行此操作，但您可以使用 java.util.concurrent.locks.Lock 代替。

如果你真的需要它，感觉有风险，并且不担心可移植性，你也可以使用 misc.sun.Unsafe，特别是 monitorEnter 和 monitorExit。但是... 可能不是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:53:07.420

您可以使用[ReentrantLock](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantLock.html)。

这正是它的作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T07:53:10.323

您可以使用 ReentrantLock 和 Condition 来指示何时可以释放锁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T08:08:18.867

JVM 验证程序的设计使得锁定和解锁必须平衡。所以，你不能有未配对的锁定和显式解锁。

只要您不依赖可重入行为（这对我来说似乎总是一个坏主意），您就可以在不同的线程中持有锁。以线程安全的方式与其他线程进行通信将确保您获得相关*的先发生*关系。

实现目标的标准方法是[Execute Around idiom](https://stackoverflow.com/questions/341971/what-is-the-execute-around-idiom)，正如[javax.swing.text.AbstractDocument.render](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/AbstractDocument.html#render%28java.lang.Runnable%29)所使用的那样。

在 Java SE 7 和更早版本（不是 1.0*）中，Execute Around 看起来像：

```
public interface Traversal<T>() {
    void traverse(Iterator<T> iter);
}
public class MyObj {
    private final Object lock = new Object();
    ...
    public void lockTraversal(Traversal<String> block) {
        synchronized (lock) {
            block.traverse(getAnIterator());
        }
    }
}
MyObj obj = (...)

obj.lockTraversal(new Traversal<String>() {
    public void traverse(Iterator<String> iter) {
        ...
    }
}); 
```

从 Java SE 8 开始，除了你可以写一些类似的东西外，它几乎是一样的：

```
obj.lockTraversal({iter -> // Guess type of iter.
    ...
}); 
```

正如其他人所提到的，`java.util.concurrent.locks`提供具有较少约束的锁。请注意，失去这些约束可能会导致细微的错误。例如，在原始问题中，`lockTraveral`抛出可能会导致解锁而没有成功匹配锁。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T07:57:45.637

Java 有一个单独的锁定框架，可以在[`java.util.concurrent.locks`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/package-summary.html)Java 1.5 之后的包中找到。它提供了比`synchronized`.

```
class X {
    private final ReentrantLock lock = new ReentrantLock();

    public void m() {
      lock.lock();  // block until condition holds
      try {
        // ... method body
      } finally {
        lock.unlock()
      }
    }
} 
```

# c# - 在 c# WPF XAML 中应用样式和模板控件

> ID：15896244
> 
> 赞同：0
> 
> 时间：2013-04-09T07:49:43.903
> 
> 标签：c#, wpf, xaml, templates, styles

我想将自定义样式（模板）应用到按钮、文本框、文本块等。我可以在 Visual Studio 2010 的哪里学习这个（我使用 c# wpf）？你能给我举个例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:58:02.190

[本教程](http://wpftutorial.net/Styles.html)是否回答了您的问题？

它很简单，但向您展示了`window.resources`用于 WPF 样式的用法。

# wordpress - Wordpress 中复杂的自定义帖子类型多个循环

> ID：15896248
> 
> 赞同：0
> 
> 时间：2013-04-09T07:50:06.857
> 
> 标签：wordpress, loops

我有一个组织的**工作人员**的自定义帖子类型，其分类名为 Profession。我正在使用 easytabs 来显示按不同职业分类的每个成员的照片矩阵。当用户单击照片（选项卡导航）时，面板中会显示相应的信息，因为它会以动画方式查看。

我只能在页面上的每个选项卡容器 div 中容纳 4 个成员，并且第 5 个成员会破坏选项卡布局。

我需要一个循环来每个容器只拉 4 个工作人员，然后是接下来的 4 个等等。

这是我到目前为止的代码......

```
<div class="team_content">
            <?php
                $custom_terms = get_terms('profession');

                foreach($custom_terms as $custom_term) {
                    wp_reset_query();
                        $args = array('post_type' => 'team_members',
                            'tax_query' => array(
                                array(
                                    'taxonomy' => 'profession',
                                    'field' => 'slug',
                                    'terms' => $custom_term->slug,
                                ),
                            ),
                         );

                         $loop = new WP_Query($args);
                         if($loop->have_posts()) {
                            echo '<h2>'.$custom_term->name.'</h2>'; //displays the profession

                            echo '<div class="tab-collapsible-container">';
                                echo '<ul>';

                            while($loop->have_posts()) : $loop->the_post(); //first sub-loop

                                //extract field names from metaboxes
                                $salutation = get_post_meta( $post->ID, '_cmb_salutation', true );
                                $title = $salutation.' '.get_the_title();
                                $full_title = get_the_title();
                                $title_link = str_replace(' ','',$full_title); 
                                $final_title_link = strtolower($title_link);

                                echo '<li><a href="#'.$final_title_link.'">';
                                the_post_thumbnail("team-member");
                                echo '<h4>'.$title.'</h4></a></li>';

                            endwhile;

                                echo '</ul>';

                            rewind_posts();

                            echo '<div class="panel-container">';

                            while($loop->have_posts()) : $loop->the_post();

                                //extract field names from metaboxes
                                $profession = get_post_meta( $post->ID, '_cmb_profession', true );
                                $qualifications = get_post_meta( $post->ID, '_cmb_qualifications', true );
                                $services_url = get_post_meta( $post->ID, '_cmb_services_url', true );
                                $full_title2 = get_the_title();
                                $title_link2 = str_replace(' ','',$full_title2); 
                                $final_title_link2 = strtolower($title_link2);

                                echo '<div id="'.$final_title_link2.'" class="member_info">';
                                    echo '<h4>'.$profession.' '.$qualifications.'</h4>';
                                    the_content();
                                    echo '<a href="'.$services_url.'" class="button2">Visit Service Page</a>'; //Services page link
                                echo '</div>';

                            endwhile;

                            echo '</div>'; //panel-container

                            }

                        echo '</div>'; //tab-collapsible-container

                        }
                    ?>

        </div><!-- .team_content --> 
```

感谢@anstrangel0ver 的快速回复！我已经尝试在整个循环中使用 counter & % 运算符，但没有成功。我认为它会更符合以下来自[易腐新闻](http://perishablepress.com/multiple-loops-and-multiple-columns-with-wordpress/)的代码行，如下所示......

```
// FIRST LOOP: display posts 1 thru 5
<?php query_posts('showposts=5'); ?>
<?php $posts = get_posts('numberposts=5&offset=0'); foreach ($posts as $post) :     start_wp(); ?>
<?php static $count1 = 0; if ($count1 == "5") { break; } else { ?>

<?php the_title(); ?>
<?php the_content(); ?>

<?php $count1++; } ?>
<?php endforeach; ?>

// SECOND LOOP: display posts 6 thru 10
<?php query_posts('showposts=5'); ?>
<?php $posts = get_posts('numberposts=5&offset=5'); foreach ($posts as $post) : start_wp(); ?>
<?php static $count2 = 0; if ($count2 == "5") { break; } else { ?>

<?php the_title(); ?>
<?php the_content(); ?>

<?php $count2++; } ?>
<?php endforeach; ?> 
```

// 第三循环：等 ..................

只是不确定如何将其应用于我的循环并保持一切正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:20:24.753

哎呀，那里的东西很乱`rewind_posts()`。首先，我会创建一个函数，可以将您的自定义 WP_Query 推进一定数量的帖子：

```
function offset_posts($loop, $offset) {
    $post_counter = 0;
    while ($loop->have_posts() && ($post_counter < $offset) {
        $loop->next_post();
        $post_counter++;
    }
} 
```

然后，我会将您的员工输出代码提取到一个函数中，该函数一次可以编写一个由四个员工组成的块：

```
function output_staff_members($loop, $offset, $number_to_output = 4) {
    // skip posts until we get to $offset
    offset_posts($loop, $offset);

    $post_counter = 0;
    while ($loop->have_posts() && ($post_counter < $number_to_output)) :  //first sub-loop
        $loop->the_post();
        $post_counter++;

        //extract field names from metaboxes
        $salutation = get_post_meta( $post->ID, '_cmb_salutation', true );
        $title = $salutation.' '.get_the_title();
        $full_title = get_the_title();
        $title_link = str_replace(' ','',$full_title); 
        $final_title_link = strtolower($title_link);

        echo '<li><a href="#'.$final_title_link.'">';
        the_post_thumbnail("team-member");
        echo '<h4>'.$title.'</h4></a></li>';

    endwhile;

    echo '</ul>';

    $loop->rewind_posts();
    offset_posts($loop, $offset);

    echo '<div class="panel-container">';

    $post_counter = 0;
    while ($loop->have_posts() && ($post_counter < $number_to_output)) :  //second sub-loop
        $loop->the_post();
        $post_counter++;

        //extract field names from metaboxes
        $profession = get_post_meta( $post->ID, '_cmb_profession', true );
        $qualifications = get_post_meta( $post->ID, '_cmb_qualifications', true );
        $services_url = get_post_meta( $post->ID, '_cmb_services_url', true );
        $full_title2 = get_the_title();
        $title_link2 = str_replace(' ','',$full_title2); 
        $final_title_link2 = strtolower($title_link2);

        echo '<div id="'.$final_title_link2.'" class="member_info">';
            echo '<h4>'.$profession.' '.$qualifications.'</h4>';
            the_content();
            echo '<a href="'.$services_url.'" class="button2">Visit Service Page</a>'; //Services page link
        echo '</div>';

    endwhile;

    echo '</div>'; //panel-container

    return $post_counter;
} 
```

最后，您只需要调用该新函数足够多次即可输出所有员工：

```
<div class="team_content">
        <?php
            $custom_terms = get_terms('profession');

            foreach($custom_terms as $custom_term) {
                wp_reset_query();
                    $args = array('post_type' => 'team_members',
                        'tax_query' => array(
                            array(
                                'taxonomy' => 'profession',
                                'field' => 'slug',
                                'terms' => $custom_term->slug,
                            ),
                        ),
                     );

                     $loop = new WP_Query($args);
                     if($loop->have_posts()) {
                        echo '<h2>'.$custom_term->name.'</h2>'; //displays the profession

                        echo '<div class="tab-collapsible-container">';
                        echo '<ul>';

                        // NEW CODE HERE:
                        $post_counter = 0;
                        while ($post_counter < $loop->$post_count) {
                            $post_counter += output_staff_members($loop, $post_counter);
                        }

                     }

                     echo '</div>'; //tab-collapsible-container

                 }
            ?>

    </div><!-- .team_content --> 
```

希望对你有用！

# javascript - 如何只在一个地方防止 document.ajaxstart

> ID：15896249
> 
> 赞同：0
> 
> 时间：2013-04-09T07:50:07.267
> 
> 标签：javascript, jquery

在我的项目中，他们使用下面的 jquery 代码，它为每个 ajax 调用调用 ajaxLoader.gif

```
$().ready(function() {
    $(document).ajaxStart(function() {
            $.blockUI({ css: { border: '0px none #aaa', backgroundColor:'transparent'}, message: '<img src="../common/images/ajaxLoader.gif" alt="Loading" />', overlayCSS:  { backgroundColor: '#08275d', opacity: 0.6 }});
        }
    ).ajaxStop($.unblockUI);
}); 
```

我只需要在一个地方防止这种情况。**用户不希望这个 ajaxLoader.gif 出现在**ajax 调用被触发的地方。

我需要在 ajax 调用之前添加任何代码片段吗？我可以在那里抑制这个 ajaxstart 函数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T08:51:52.673

在这个地方，将选项设置`global`为`false`，因此`ajaxStart`不会被解雇。

来源：[http ://api.jquery.com/ajaxStart/](http://api.jquery.com/ajaxStart/)

> 如果在全局选项设置为 false 的情况下调用 $.ajax() 或 $.ajaxSetup()，则不会触发 .ajaxStart() 方法。

# c# - 如何抽象 Linq 查询的 Select 列表中的字段？

> ID：15896252
> 
> 赞同：7
> 
> 时间：2013-04-09T07:50:25.137
> 
> 标签：c#, linq, linq-to-entities, entity-framework-5

我有一个特定的计算字段，我经常希望在 Linq 查询的“选择”字段中返回，例如今年的客户订单总额，以及客户的其他人口统计信息。

```
public class Customer {
  public decimal TotalPurchasesThisYear(MyDataContext db) {
    return db.Orders.Where(o => o.CustomerID == ID)
                    .Sum(o => o.OrderTotalAmt);
  }
}

public class SomeReport {
  public void GetCustomerInfoBySalesperson(long salespersonID) {
    using (var db = new MyDataContext()) {
      var q = db.Customers.Where(c => c.SalespersonID == salespersonID)
                          .Select(c => new { c.Name, c.Address, ThisYearPurchases = c.TotalPurchasesThisYear(db) })
                          .ToList();
      // etc..
    }
  }
} 
```

显然，这是行不通的，因为`TotalPurchasesThisYear`没有 SQL 翻译。但它里面的所有东西都有一个 SQL 翻译。我不想直接在查询中包含该代码，因为我在很多地方都在做同样的计算。我的直觉告诉我这应该用 an 来完成，`Expression`但我已经玩过并且不能完全找出正确的语法。

帮助，有人吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:02:06.393

好的，我找到了一种方法来做到这一点，但我不确定这是最好的方法：

```
public class CustomerOrderInfo {
  public long CustomerID;
  public decimal TotalPurchases;
}

public class Customer {
  public static Expression<Func<Customer, CustomerOrderInfo>> GetCustomerOrderInfo() {
    return c => new CustomerOrderInfo {
                  CustomerID = c.ID,
                  TotalPurchases = c.Orders.Where(o => o.OrderDate.Year == DateTime.Now.Year)
                                    .Sum(o => o.OrderTotalAmt)
                };
  }
}

public class SomeReport {
  public void GetCustomerInfoBySalesperson(long salespersonID) {
    using (var db = new MyDataContext()) {
      var q = db.Customers
                .Join(db.Customers.Select(Customer.GetCustomerOrderInfo()),
                      c => c.ID, i => i.CustomerID,
                      (c, i) => new { c.Name, c.Address, i.TotalPurchases })
                .ToList();
  // etc..
    }
  }
} 
```

它可以工作......但底层 SQL 最终以嵌套查询的连接结束，这不是我的理想。我希望看到底层 SQL 变得简单，例如：

```
select c.Name, c.Address, sum(o.OrderTotalAmt) TotalPurchases
from Customer c 
left join [Order] o on o.CustomerID = c.ID
where Year(o.OrderDate) = @year
group by c.Name, c.Address 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:24:57.957

```
List<Parent> myParents = new List<Parent>
                                         {
                                             new Parent() 
                                             {
                                                 Prop1 = "1", 
                                                 Prop2 = "2",
                                                 Prop3 = "3", 
                                                 Children = new List<Child>()
                                                        {
                                                            new Child(){ Prop1 = 1, Prop2 = 2, Prop3 = 3 },
                                                            new Child(){ Prop1 = 21, Prop2 = 22, Prop3 = 23 },
                                                            new Child(){ Prop1 = 31, Prop2 = 32, Prop3 = 33 }
                                                        }
                                             }, 
                                         };

            Expression<Func<Parent, int>> GetChildSum =
                p => p.Children.Where(c => c.Prop1 > 0).Sum(o => o.Prop2);

            var v = myParents.Where(w => w.Prop1 == "1").Select(p => GetChildSum.Compile().Invoke(p)).ToList();

            Console.WriteLine(v.First());

            //output is 56 
```

# java - 具有单个或多个值的 SOLR 查询字段

> ID：15896254
> 
> 赞同：3
> 
> 时间：2013-04-09T07:50:26.213
> 
> 标签：java, xml, solr, tooltwist

我是 SOLR 的新手，目前我的查询返回公司及其各自的 postCode，postCode 是一个数组类型字段，一些结果包含其 postCode 节点的多个值，有些只有一个值。

结果集：

```
<doc>
 <str name="company">Alien Technology</str>
 <arr name="postCode">
   <str>2068</str>
   <str>2065</str>
   <str>2066</str>
   <str>2061</str>
   <str>2077</str>
 </arr>
 ....
</doc>

<doc>
 <str name="company">Cris' Sports</str>
 <arr name="postCode">
   <str>2068</str>
 </arr>
 ...
</doc>

<doc>
 <str name="company">Hyper Consultation Firm</str>
 <arr name="postCode">
   <str>2068</str>
   <str>2000</str>
   <str>2071</str>
 </arr>
 ...
</doc>

<doc>
 <str name="company">DJ Goods & Gadgets</str>
 <arr name="postCode">
   <str>2068</str>
 </arr>
 ...
</doc> 
```

...

我的问题是，是否可以仅获取其 postCode 仅具有一个值的数据，反之亦然，获取那些其 postCode 字段包含多个值的数据，并排除其他 postCode 仅具有一个值的数据。这可能使用 SOLR 查询吗？

例子：

我搜索了 postCode = 2068

我的第一个查询将只返回 Cris Sports 和 DJ Goods and Gadgets，因为它们的 postCode 字段只有一个值。

我的第二个查询将仅返回 Alien Technology 和 Hyper Consultation Firm，因为它们的 postCode 字段都包含多个值。

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:20:15.463

没有直接的方法来获取多值字段中的项目计数或函数查询来计算相同。
您始终可以在索引期间维护字段计数并在查询期间使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:52:35.163

当您按分数（desc）排序时，只有一个值的字段将具有更高的分数，因此将在其他字段之前列出。不确定是否有办法将结果集限制为仅包含分数匹配最大分数的文档。可以在客户端完成吗？

# ios - 每次应用在 IOS 应用启动时显示 apple-id 的警报视图

> ID：15896257
> 
> 赞同：1
> 
> 时间：2013-04-09T07:50:45.700
> 
> 标签：ios, in-app-purchase

我在我的应用程序中使用应用程序内购买，但从过去 1 周开始，我的应用程序`alertview`在`apple-id login`用户启动应用程序时显示。苹果有什么问题？为什么它一次又一次地出现？我已经两个月没有对我的应用程序进行任何更改。

# matlab - Matlab：如何将几个点的向量写成连续函数？

> ID：15896263
> 
> 赞同：0
> 
> 时间：2013-04-09T07:50:59.923
> 
> 标签：matlab, function, vector

我有两个向量：

```
x = [0; 1; 2]
y = [2.0000; 0; -14.7781] 
```

`xy`如果我要绘制 x 和 y，我将在-plane上看到三个点。但我想连接这三个点并将它们作为一个连续函数：

```
y = f(x),
y(0) = 2;
y(1) = 0;
y(2) = -14.7781;
y(0.5) = value between 2 and 0. 
```

例如`y`，可以将其视为 ZOH（零阶保持）连续信号。

我看到 MATLAB 有一个名为 的函数`d2c`，它将模型从离散时间转换为连续时间。但不知道如何将它与我已经拥有的向量联系起来。如何用 MATLAB 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:29:25.183

好的，您的最新编辑大大改善了这种情况。

但是，您仍然没有充分界定问题。

ZOH 就像

```
 >> x = [0; 1; 2];
    >> y = [2.0000; 0; -14.7781];
    >> f = @(new_x) y(find(x <= new_x, 1, 'last'));
    >> f(0.5)

    ans =
        2 
```

`y(0.5) = value between 2 and 0`但是，正如您问题的一部分所表明的那样，这不是我认为您的意思。

也许你想要一个线性插值：

```
>> f = @(new_x) interp1(x,y, new_x);
>> f(0.5)

ans = 
    1 
```

或三次样条插值：

```
>> f = @(new_x) interp1(x,y, new_x, 'spline');
>> f(0.5)

ans =    
    2.5973 
```

我要问的是：当采样时间减少到无穷小值时，哪种模型最能描述您的信号？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:15:13.260

一个 n 次多项式最多可以有 n-1 个转折点。因此，我们可以进行多项式回归：

```
% Input data
yy = [2.0000; 0; -14.7781];

% Parameters
n = length(yy)-1;
x = (0:1:n).';

% Regression
p = polyfit(x,yy,n);

% Plot
f = polyval(p,x);
figure
plot(x,yy,'o',x,f,'-') 
```

# python - Python super() 继承和需要的参数

> ID：15896265
> 
> 赞同：17
> 
> 时间：2013-04-09T07:51:05.520
> 
> 标签：python, inheritance

考虑：

```
class Parent(object):

    def altered(self):
        print "PARENT altered()"

class Child(Parent):

    def altered(self):
        print "CHILD, BEFORE PARENT altered()"
        super(Child, self).altered()    # what are the arguments needed?  Why Child and self?
        print "CHILD, AFTER PARENT altered()" 
```

在 Python 2.7 中，为什么必须`Child`作为参数传递给`super()`调用？使用 super 而不是让它工作的确切复杂性是什么。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-09T08:09:09.577

`super`找出方法解析顺序中的下一个类。你传入的两个参数是让它弄清楚的原因——`self`通过一个属性给它整个 MRO；当前课程告诉它您现在在 MRO 的哪个*位置*。所以 super 实际上在做的事情基本上是：

```
def super(cls, inst):
    mro = inst.__class__.mro() # Always the most derived class
    return mro[mro.index(cls) + 1] 
```

它是当前类而不是基类的原因是因为拥有 super 的全部意义在于拥有一个函数来计算该基类是什么，而不是必须显式引用它——如果基类可能会导致问题' 名称会发生​​变化，如果你不知道父类的确切名称（想想像这样的工厂函数`namedtuple`吐出一个新类），尤其是在多继承情况下（MRO 中的下一个类可能不是当前班级的基础之一）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-08T14:42:03.960

如果我没记错的话，您不必从 python3 开始将子实例作为参数传递。另外，要深入了解 super() 方法，请参阅[https://rhettinger.wordpress.com/2011/05/26/super-considered-super/](https://rhettinger.wordpress.com/2011/05/26/super-considered-super/)

# ruby - 如何在rspec中合并匹配器？

> ID：15896271
> 
> 赞同：0
> 
> 时间：2013-04-09T07:51:12.797
> 
> 标签：ruby, rspec2

这是我的规格：

```
 it "should convert doc successfully" do
      @response = SharpOffice::Office.process(File.expand_path("spec/fixture/test.doc"))
      @response[:status].should == 'ok'
      File.exist?(@response[:pdf_path]).should be_true
      File.exist?(@response[:swf_path]).should be_true
      File.exist?(@response[:cover_path]).should be_true
    end

    it "should convert ppt successfully" do
      @response = SharpOffice::Office.process(File.expand_path("spec/fixture/test.ppt"))
      @response[:status].should == 'ok'
      File.exist?(@response[:pdf_path]).should be_true
      File.exist?(@response[:swf_path]).should be_true
      File.exist?(@response[:cover_path]).should be_true
    end

    it "should convert xls successfully" do
      @response = SharpOffice::Office.process(File.expand_path("spec/fixture/test.xls"))
      @response[:status].should == 'ok'
      File.exist?(@response[:pdf_path]).should be_true
      File.exist?(@response[:swf_path]).should be_true
      File.exist?(@response[:cover_path]).should be_true
    end 
```

如何合并重复？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:19:12.853

`conversion_helpers.rb`您可以在新文件中声明自定义匹配器：

```
RSpec::Matchers.define :be_converted_successfully do
  match do |conversion_response|
    conversion_response[:status] == 'ok' && File.exist?(conversion_response[:pdf_path]) && File.exist?(conversion_response[:swf_path]) && File.exist?(conversion_response[:cover_path])
  end
end 
```

然后在您的规范中，`require 'conversion_helpers'`您可以执行以下操作：

```
it "should convert doc successfully" do
  SharpOffice::Office.process(File.expand_path("spec/fixture/test.doc")).should be_converted_successfully
end

it "should convert ppt successfully" do
  SharpOffice::Office.process(File.expand_path("spec/fixture/test.ppt")).should be_converted_successfully
end

it "should convert xls successfully" do
  SharpOffice::Office.process(File.expand_path("spec/fixture/test.xls")).should be_converted_successfully
end 
```

虽然，在实际测试中，试图追踪错误可能会很烦人。但这是一个不同的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:17:55.410

让它成为一个功能？
将功能描述放在描述块中

```
def convert_expectation(resp)
  resp[:status].should == 'ok'
  File.exist?(resp[:pdf_path]).should be_true
  File.exist?(resp[:swf_path]).should be_true
  File.exist?(resp[:cover_path]).should be_true
end  

it "should bla blabla" do
  resp = SharpOffice::Office.process(File.expand_path("spec/fixture/test.xls"))
  convert_expectation(resp)
end 
```

# python - 带有前瞻的正则表达式分组（在 Python 中）

> ID：15896275
> 
> 赞同：1
> 
> 时间：2013-04-09T07:51:19.273
> 
> 标签：python, regex, lookahead

我正在修改正则表达式以提取一组组匹配，但是这个“超级组”没有按预期返回复合匹配字符串。

要匹配的字符串的格式为：

```
/DIR/SOMESTRING-W0.12+345.raw.gz 
```

和我正在使用的正则表达式：

```
/DIR/
(?P<super>
    (?P<name>.*?)
    (?=(?P<modifier>-W\d\.\d{2}[+-]\d{3})?\.(?P<extension>raw\.gz|root)$)
) 
```

我得到命名组的以下结果：

```
modifier: '-W0.12+345'
super: 'SOMESTRING'
name: 'SOMESTRING'
extension: 'raw.gz' 
```

在我期待的时候

```
super: 'SOMESTRING-W0.12+345.raw.gz' 
```

子组的分组一直对我有用，但这次不行，我不明白为什么。

希望有人能给我一些提示。

注意：此正则表达式的解释可以在（[使用 awk 将特定子字符串与正则表达式匹配](https://stackoverflow.com/questions/4450034/matching-a-specific-substring-with-regular-expressions-using-awk)）中找到

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:55:36.063

该组`super`匹配该组匹配的相同文本`name`，因为前瞻断言不会为匹配贡献任何实际字符（这就是它们也被称为“零宽度断言”的原因）。

要获得所需的结果，只需删除前瞻断言：

```
/DIR/
(?P<super>
    (?P<name>.*?)
    (?P<modifier>-W\d\.\d{2}[+-]\d{3})?\.(?P<extension>raw\.gz|root)$
) 
```

# c# - 获取没有端口 .net 的地址并构造地址 + 端口到端点

> ID：15896285
> 
> 赞同：1
> 
> 时间：2013-04-09T07:52:01.363
> 
> 标签：c#, .net, url, port

从像“ `http://localhost:2111/`”这样的 URL 如何将地址部分：`http://localhost/`与端口部分：2111 分开？是否有一种数据结构可以让我 `http://localhost:2111/`从其地址和端口中分离或构造？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:58:52.827

用这个：

```
Uri uri = new Uri("http://localhost:2111/");
string newUri = uri.Scheme + "://" + uri.Host + "/";
Console.WriteLine(newUri);

// Output:
// http://localhost/ 
```

做相反的事情：

```
Uri uri = new Uri("http://localhost/");
string newURI = uri.AbsoluteUri + uri.Port; 
```

对我来说`uri.Ports`，`80`我不知道它是否适合你，但请尝试一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-01T22:39:53.193

[UriBuilder](http://msdn.microsoft.com/en-us/library/system.uribuilder.aspx)可用于通过将端口值设置为 -1 或 80 来从 url 中删除端口：

```
var uriBuilder = new UriBuilder("http://localhost:2111/");
uriBuilder.Port = -1;  // or 80
string newUrl = uriBuilder.Uri.AbsoluteUri;
Console.WriteLine(newUrl); 
```

以上将输出`http://localhost/`.

如果要将它们重新添加在一起，请再次使用 UriBuilder 并将端口设置为 2111：

```
var uriBuilder = new UriBuilder("http://localhost/");
uriBuilder.Port = 2111;
string newUrl = uriBuilder.Uri.AbsoluteUri;
Console.WriteLine(newUrl); 
```

以上将输出`http://localhost/2111`.

# javascript - 我怎么知道键盘上最后按下的键 2

> ID：15896289
> 
> 赞同：1
> 
> 时间：2013-04-09T07:52:22.523
> 
> 标签：javascript, jquery, keyboard-events

是否有可能知道，键盘上最后按下了哪两个键？
我该怎么做？
我需要比较这些键，如果它们相同 - 制作一些功能。
例如，如果有人按 Enter - 这是第一个功能，如果在 Enter 之后他按 SPACE - 这是第二个功能。如果在 ENTER 之后他按下 Ctrl - 这是第三个功能。
所以，我认为唯一的方法是用当前和以前的键值制作一个 2 var，并制作一个*IF ELSE IF*函数
:-)
这是一种方法，我如何获得当前的键值

```
$('#text').keydown(function(event) {
  $('#show').text(event.keyCode);
}); 
```

或者，更好的问题！（我现在看到了）
直接在这个编辑器中，按双倍空格后 - 它会跳转到实时预览中的另一行。
这个怎么运作？我不确定，但我认为我需要的几乎是一样的。
非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:59:32.103

我认为存储按下的最后一个键并在事件处理程序中检查新旧键`keyCode`是一种很好的方法。

```
$('#text').keydown((function() {
    var lastKey = undefined;
    return function(event) {
        // here you have both the old and new keyCode
        lastKey = event.keyCode;
    };
})()); 
```

另外，两个空格的东西是[Markdown](http://daringfireball.net/projects/markdown/syntax)解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:29:03.670

你可以从一个*非常*简单的 jQuery 插件开始：

```
(function($) {
    $.fn.keyWatcher = function() {
        return this.keydown(function(evt){
            var $this =  $(this);
           var prevEvt = $this.data('prevEvt');
            $this.trigger('multikeydown',[prevEvt,evt]);
            $this.data('prevEvt',evt);
        });
    };
})(jQuery); 
```

这将在通常引发事件时引发新事件 ( `multikeydown`) 。`keydown`这将仅提供当前按键的 keydown 事件，或者如果有前一个事件，它也将提供该事件。

用法可能类似于：

```
$(document).keyWatcher().bind('multikeydown',function(evt,prevKey,currKey){
    alert('prevKey = ' + ((prevKey) ? String.fromCharCode(prevKey.keyCode) : '(none)')); 
   alert('currKey = ' + String.fromCharCode(currKey.keyCode));
}); 
```

实时示例（在 jsfiddle 的右下方窗格中按键）：http: [//jsfiddle.net/9VMUy/1/](http://jsfiddle.net/9VMUy/1/)

事件处理程序中提供的事件`prevKey`和`currKey`参数包含原始`keydown`事件，因此您可以完全访问`keyCode`、`ctrlKey`和`shiftKey`属性等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T08:30:23.390

这可能不是最好的解决方案，但看看你是否可以使用它或它的一部分

[jsFiddle](http://jsfiddle.net/cP8Ud/9/)

```
var clicks = 0
$("#text").one("keypress", function () {
    clicks = 1;
    var KeyCode1 = event.keyCode;
    $('#result').text(KeyCode1);
    $("#text").one("keypress", function () {
        clicks = 2;
        var KeyCode2 = event.keyCode;
        $('#result').text(KeyCode1 + "\n" + KeyCode2);
    });
}); 
```

# automaton - Java：Indexoutofrange 是怎么回事？

> ID：15896290
> 
> 赞同：0
> 
> 时间：2013-04-09T07:52:24.560
> 
> 标签：automaton

这是我正在研究的元胞自动机的代码：

```
public class Life1D {

    private Rule rule;
    private int stepCount;

    public static void main (String [ ] args) {
            Life1D simulation = new Life1D ( );
            simulation.processArgs (args);
            simulation.producePBM ( );
    }

    // Print, in Portable Bitmap format, the image corresponding to the rule and step count
    // specified on the command line.
    public void producePBM ( ) {
            int width = (stepCount*2+1);
            System.out.println("P1 " + width + " " + (stepCount+1));
            String prev_string = "";
            // constructs dummy first line of rule
            for (int i = 0; i < width; i++){
                    if (i == stepCount+1){
                            prev_string += "1";
                    } else {
                            prev_string += "0";
                    }
            }
            // contructs and prints out all lines prescribed by the rule, including the first
            for (int i = 0; i < stepCount; i++) {
                    String next_string = "";
                    for (int j = 0; j < width; j++) {
                        // prints next line, one character at a time

                            System.out.print(prev_string.charAt(j) + " ");
                            // specifies cases for the edges as well as for normal inputs to Rule
                            if (j == 0) {
                                    next_string += rule.output(0, prev_string.charAt(0), prev_string.charAt(1));
                            } else if (j == width-1) {
                                    next_string += rule.output(prev_string.charAt(width-2), prev_string.charAt(width-1), 0);
                            } else {
                                    String rule_input = prev_string.substring(j-1, j+2);
                                    int first = rule_input.charAt(0);
                                    int second = rule_input.charAt(1);
                                    int third = rule_input.charAt(2);
                                    next_string += rule.output(first, second, third);
                            }
                    }
                    // sets prev_string to next_string so that string will be the next string in line to be printed
                    prev_string = next_string;
                    System.out.println();
            }
    }

    // Retrieve the command-line arguments, and convert them to values for the rule number
    // and the timestep count.
    private void processArgs (String [ ] args) {
            if (args.length != 2) {
                    System.err.println ("Usage: java Life1D rule# rowcount");
                    System.exit (1);
            }
            try {
                    rule = new Rule (Integer.parseInt (args[0]));
            } catch (Exception ex) {
                    System.err.println ("The first argument must specify a rule number.");
                    System.exit (1);
            }
            try {
                    stepCount = Integer.parseInt (args[1]);
            } catch (Exception ex) {
                    System.err.println ("The second argument must specify the number of lines in the output.");
                    System.exit (1);
            }
            if (stepCount < 1) {
                    System.err.println ("The number of output lines must be a positive number.");
                    System.exit (1);
            }
    }
}

 class Rule {

    private int a, b, c;
    private String rulebin;

    public Rule (int ruleNum) {
            rulebin = Integer.toBinaryString(ruleNum);
    }

    // Return the output that this rule prescribes for the given input.
    // a, b, and c are each either 1 or 0; 4*a+2*b+c is the input for the rule.
    public int output (int a, int b, int c) {
        return rulebin.charAt(7 - 4*a + 2*b + c);
    }
} 
```

这是我运行它时的错误消息：

```
P1 7 4
0 Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index      out of range: 151
    at java.lang.String.charAt(String.java:686)
    at Rule.output(Life1D.java:90)
    at Life1D.producePBM(Life1D.java:35)
    at Life1D.main(Life1D.java:9) 
```

有没有搞错？为什么我会收到此错误，我该如何解决？几个小时以来，我一直试图找出错误，如果我能得到帮助，那将是一件幸事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:30:29.177

在此特定部分中，您将整数转换为二进制字符串：

```
 rulebin = Integer.toBinaryString(ruleNum); 
```

现在假设您的参数是：
第一个参数 = 12
第二个参数 = 任意数字

现在，当此代码将此数字转换为二进制字符串时，您将得到：
rulebin = "1100" (length 4)

现在在这个函数中：

```
 public int output (int a, int b, int c) {
    return rulebin.charAt(7 - 4*a + 2*b + c);
} 
```

当 a = b = c = 0 时，此函数将尝试访问您的“rulebin 的字符 8”，但您的 rulebin 的长度为 4。这就是您让字符串索引超出界限异常的原因。

注意：我不确定您是否对输入参数设置了任何限制，但这可能是一个潜在问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:46:25.943

不！问题是您将 char 而不是 int 传递给

```
 public int output (int a, int b, int c) {
    return rulebin.charAt(7 - 4*a + 2*b + c);
} 
```

我试过了，当 prevString.charAt(0) 和 prevString.charAt(1) 为 0 时，它会将这些参数 (0,48,48) 发送到输出方法（尝试调试它，你会）这会导致索引超出范围！

并且转换为二进制字符串不返回 7 位格式..

**更新：**

```
public class Lif1ID {

private Rule rule;
private int stepCount;

public static void main (String [ ] args) {
        Lif1ID simulation = new Lif1ID ( );
        simulation.processArgs (args);
        simulation.producePBM ( );
}

// Print, in Portable Bitmap format, the image corresponding to the rule and step count
// specified on the command line.
public void producePBM ( ) {
        int width = (stepCount*2+1);
        System.out.println("P1 " + width + " " + (stepCount+1));
        String prev_string = "";
        // constructs dummy first line of rule
        for (int i = 0; i < width; i++){
                if (i == stepCount+1){
                        prev_string += "1";
                } else {
                        prev_string += "0";
                }
        }
        // contructs and prints out all lines prescribed by the rule, including the first
        for (int i = 0; i < stepCount; i++) {
                String next_string = "";
                for (int j = 0; j < width; j++) {
                    // prints next line, one character at a time

                        System.out.print(prev_string.charAt(j) + " ");
                        // specifies cases for the edges as well as for normal inputs to Rule
                        if (j == 0) { 
// take a look at the 'getNumericValue' Method.. in your version it didn't pass 0 or 1, now it does.. 
                                next_string += rule.output(0, Character.getNumericValue(prev_string.charAt(0)), Character.getNumericValue(prev_string.charAt(1)));
                        } else if (j == width-1) {
                                next_string += rule.output(prev_string.charAt(width-2), prev_string.charAt(width-1), 0);
                        } else {
                                String rule_input = prev_string.substring(j-1, j+2);
                                int first = Character.getNumericValue(rule_input.charAt(0));
                                int second = Character.getNumericValue(rule_input.charAt(1));
                                int third = Character.getNumericValue(rule_input.charAt(2));
                                next_string += rule.output(first, second, third);
                        }
                }
                // sets prev_string to next_string so that string will be the next string in line to be printed
                prev_string = next_string;
                System.out.println();
        }
}

// Retrieve the command-line arguments, and convert them to values for the rule number
// and the timestep count.
private void processArgs (String [ ] args) {
        if (args.length != 2) {
                System.err.println ("Usage: java Life1D rule# rowcount");
                System.exit (1);
        }
        try {
                rule = new Rule (Integer.parseInt(args[0]));
        } catch (Exception ex) {
                System.err.println ("The first argument must specify a rule number.");
                System.exit (1);
        }
        try {
                stepCount = Integer.parseInt (args[1]);
        } catch (Exception ex) {
                System.err.println ("The second argument must specify the number of lines in the output.");
                System.exit (1);
        }
        if (stepCount < 1) {
                System.err.println ("The number of output lines must be a positive number.");
                System.exit (1);
        }
   }
}

 class Rule {

private int a, b, c;
private String rulebin;

public Rule (int ruleNum) {
        rulebin = convertToBinary(ruleNum);
}

private String convertToBinary(int input) // get the binary presentation as you want
{                                         // if the input is 2 you'll get "00000010"
    String binary = "";
    for (int i = 0; i < 8; i++){
      if ((1 << i & input) != 0)
        binary += "1";
      else 
          binary+= "0";
    }
    binary = new StringBuffer(binary).reverse().toString();
    return binary;
}

// Return the output that this rule prescribes for the given input.
// a, b, and c are each either 1 or 0; 4*a+2*b+c is the input for the rule.
public char output (int a, int b, int c) {    // here you want to return a char, no?
    return rulebin.charAt(7 - 4*a + 2*b + c); // there is a problem with your formula
} 
```

}

# iphone - 将字节值放入 NSDictionary [iOS]

> ID：15896291
> 
> 赞同：3
> 
> 时间：2013-04-09T07:52:29.333
> 
> 标签：iphone, ios, objective-c, image, bytearray

我有一个 post web 服务，我需要以字节数组发送图像，并且因为我需要以 JSON 格式发送 post 参数，所以我创建了它的`NSDictionary`. 我的问题是如何将对象分配给字典中的键`Byte`，我尝试这样做并且在创建时应用程序崩溃`NSDictionary`。我还用代码解释了每个步骤，以便于理解下面的问题：-

这是我将图像转换为字节格式的代码：-

```
NSData *data = [NSData dataWithContentsOfFile:filePath];
NSUInteger len = [data bytes];
Byte *byteData = (Byte*)malloc(len);
memcpy(byteData, [data bytes], len); 
```

所以，现在我`Byte`在字节数组中包含图像，现在我想将此对象分配给`NSDictionary`. 这是代码，

```
NSDictionary *dictJson = [NSDictionary dictionaryWithObjectsAndKeys:
byteData, @"photo",
nil]; 
```

现在我的应用程序在我创建`dictJson`对象的上述行中崩溃了，有什么方法可以将 Byte 传递给`NSDictionary`？

另外，另一个问题，我该怎么`NSLog` `byteData`办？

请帮我。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T09:15:50.277

如果您真的想将图像数据作为包含字节作为数字的 JSON 数组发送，那么您必须“手动”创建数组，没有内置函数：

```
NSData *data = ... // your image data
const unsigned char *bytes = [data bytes]; // no need to copy the data
NSUInteger length = [data length];
NSMutableArray *byteArray = [NSMutableArray array];
for (NSUInteger i = 0; i < length; i++) {
    [byteArray addObject:[NSNumber numberWithUnsignedChar:bytes[i]]];
}
NSDictionary *dictJson = [NSDictionary dictionaryWithObjectsAndKeys:
              byteArray, @"photo",
              nil];
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:dictJson options:0 error:NULL]; 
```

JSON数据看起来像

```
{"photo":[byte0, byte1, byte2, ...]} 
```

所以也许这就是服务器所期望的。但请注意，这是一种非常无效的（就空间而言）发送图像数据的方式（例如与 Base64 相比）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:16:46.553

如果您将此信息作为 JSON 发送到服务器，则需要首先使用[Base 64](http://en.wikipedia.org/wiki/Base64)等编码将其转换为有效字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T08:09:28.040

我相信您放置在`NSDictionary`must 中的任何对象本身都来自`NSObject`.

显然`Byte *`不是来源于`NSObject`。

也许尝试使用一个集合类，例如`NSArray`，或者确实尝试将其`NSData`直接放入其中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T08:11:04.163

您可以尝试将字节放入 NSValue：

```
 UIImage* testImage = [UIImage imageNamed:@"Default.png"];
    NSData* data = UIImagePNGRepresentation(testImage);
    NSValue* value = [NSValue valueWithBytes:[data bytes] objCType:@encode(UIImage)];

    NSDictionary *dictJson = [NSDictionary dictionaryWithObjectsAndKeys:
                              value, @"photo",
                              nil]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T08:31:03.243

在其中创建带有文件对象的请求字典，稍后 postWith: 函数将处理您的图像绑定任务

```
NSDictionary *requestDict = [NSDictionary dictionaryWithObjectsAndKeys:@"FirstObjectValue",@"FirstKey",
                             @"Second Object",@"Second Key",
                             @"myFileParameterToReadOnServerSide",@"file", nil]; // This line indicate ,POST data has file to attach
[self postWith:requestDict]; 
```

如果要发送图像，以下函数将从要发布的对象字典中读取所有参数，然后在字典中添加“文件”键，以标识要随请求发送的文件

```
- (void)postWith:(NSDictionary *)post_vars
{
    NSString *urlString = [NSString stringWithFormat:@"YourHostString"];

    NSURL *url = [NSURL URLWithString:urlString];
    NSString *boundary = @"----1010101010";

    //  define content type and add Body Boundry
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
    [request setHTTPMethod:@"POST"];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

    NSMutableData *body = [NSMutableData data];
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    NSEnumerator *enumerator = [post_vars keyEnumerator];
    NSString *key;
    NSString *value;
    NSString *content_disposition;

    while ((key = (NSString *)[enumerator nextObject])) {

        if ([key isEqualToString:@"file"]) {

            value = (NSString *)[post_vars objectForKey:key];
            //  ***     Write Your Image Name Here  ***
            // Covnert image to Data and bind to your post request
            NSData *postData = UIImageJPEGRepresentation([UIImage imageNamed:@"yourImage"], 1.0);

            [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\";\r\nfilename=\"testUploadFile.jpg\"\r\n\r\n",value] dataUsingEncoding:NSUTF8StringEncoding]];
            [body appendData:postData];
        } else {
            value = (NSString *)[post_vars objectForKey:key];

            content_disposition = [NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n", key];
            [body appendData:[content_disposition dataUsingEncoding:NSUTF8StringEncoding]];
            [body appendData:[value dataUsingEncoding:NSUTF8StringEncoding]];

        }

        [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    }

    //Close the request body with Boundry
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    [request setHTTPBody:body];
    [request addValue:[NSString stringWithFormat:@"%d", body.length] forHTTPHeaderField: @"Content-Length"];

    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];
    NSLog(@"%@", returnString);        
} 
```

# java - Java 字符串格式数组

> ID：15896294
> 
> 赞同：0
> 
> 时间：2013-04-09T07:52:38.270
> 
> 标签：java, arrays, string, format

我正在尝试按如下方式格式化字符串

```
System.out.println("unique number is :"+ number[b]);
System.out.println("unique number formatted to 28  is :"+ String.format("%-28s",number[b]).replace(' ','0')) 
```

当“数字”是一个短于 28 的字符串时没有问题，它将 0 添加到左侧，但是当字符串长于 28 时它不会缩短它，我做错了什么吗？

它是从循环中提取的 BTW

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:56:44.773

格式化程序不会削​​减你的`String`，它只确保它使用至少 28 个空格。

您必须执行以下操作：

```
if (str.length() > 28) {
    str = str.subString(0, 28);
} 
```

或许

```
if (str.length() > 28) {
    str = str.subString(str.length() - 28, str.length());
} 
```

来限制大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:20:06.310

`format`从类的 javadoc 中可以清楚地看出无法按预期工作的原因[`java.util.Formatter`](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html)。它说：

> “可选*宽度*是一个非负十进制整数，指示要写入输出的**最小字符数。”**

# android - 我们能否使用 Titan 和 phonegap 等跨平台制作完整的服务器端应用程序

> ID：15896295
> 
> 赞同：-4
> 
> 时间：2013-04-09T07:52:41.590
> 
> 标签：android, ios, cross-platform

我想为 iOS 和 Android 制作一个应用程序，我希望该应用程序应该是跨平台的。电子邮件的基本目的就像社交网站，意味着如果任何人在公司使用，他可以看到所有视频和音频目录，还可以录制音频来自应用程序的视频，因此是否可以使用跨平台的 java 脚本，或者我必须为所有 iOS 和 Android 制作不同的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:02:11.290

Titanium 或 Phonegap/Cordova 等跨平台框架可以帮助您仅使用 JavaScript 构建适用于 iOS 和 Android 的跨平台应用程序。

然而，使用相机等原生功能并不是最容易使用的东西，它不是在所有框架中实现的，也不是在所有移动操作系统中实现的。

但是在您的情况下，Titanium 或 Phonegap 应该能够处理您需要的 Android 和 iOS 功能，而且如果尚未实现某个功能，您仍然可以使用或为框架编写本机插件，这将为您提供更大的灵活性.

# jquery - 使用 JQuery 显示简单的模式对话框

> ID：15896298
> 
> 赞同：1
> 
> 时间：2013-04-09T07:52:53.653
> 
> 标签：jquery

有以下简单的div：

```
<div id="dialogg">
    Hello, world!
</div> 
```

一些 CSS 样式：

```
#dialogg {
    display: none;
} 
```

和jQuery代码：

```
<script src="assets/js/jquery-1.9.1.min.js"></script>
<script src="assets/js/jquery-ui-1.10.2.custom.js"></script>
<script src="assets/js/jquery-ui-1.10.2.custom.min.js"></script>
<script type="text/javascript">
    $(function() {
        $('#dialogg').dialog({
            autoOpen: false;
            width: 400;
        });
        $('#dialogg').dialog('open');
    });
</script> 
```

但我看不到任何对话框！我该如何解决？怎么了？

更新：

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Исторический турнир</title>
    <link rel="stylesheet" type="text/css" href="assets/css/main-styles.css">
    <link rel="stylesheet" type="text/css" href="assets/css/departments-page-styles.css">
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
    <script src="assets/js/jquery-1.9.1.min.js"></script>
    <script src="assets/js/jquery-ui-1.10.2.custom.min.js"></script>
    <script type="text/javascript">
        $(function() {
            $('#dialogg').show();
            $('#dialogg').dialog({
                autoOpen: false;
                width: 400;
            });
            $('#dialogg').dialog('open');
        });
    </script>
</head> 
```

但是这段代码仍然不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:31:53.480

请试试这个：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script> 
```

并尝试： **`$("#dialogg").dialog();`**

```
<script>
 $(function() {
   $( "#dialogg").dialog();
 });
</script> 
```

见[演示](http://jsfiddle.net/j2SBE/)

[jquery网站上的例子](http://jqueryui.com/dialog/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:55:55.087

you don't need two ui.js script there remove one.. and looks like you forgot to load the css file

add this on top of the script..

```
 <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" /> 
```

so the full code should be

```
 <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
<script src="assets/js/jquery-1.9.1.min.js"></script>
<script src="assets/js/jquery-ui-1.10.2.custom.min.js"></script>
<script type="text/javascript">
$(function() {
    $('#dialogg').dialog({
        autoOpen: false;
        width: 400;
    });
    $('#dialogg').dialog('open');
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:57:25.963

`$('#dialog')`就浏览器而言，当您选择它不存在时，您不会等待 html 文档完全加载。您可以`<script>...</script>`在 html 中使用较低的或在`$('document').ready(function(){..});`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T15:17:52.907

这也是不正确的：

```
$('#dialogg').dialog({
  autoOpen: false;
  width: 400;
}); 
```

它应该是：

```
$('#dialogg').dialog({
  autoOpen: false,
  width: 400
}); 
```

# r - 在 R 中使用 interp1 作为矩阵

> ID：15896299
> 
> 赞同：2
> 
> 时间：2013-04-09T07:53:02.087
> 
> 标签：r, interpolation

我正在尝试使用 R 中的 interp1 函数来线性插值矩阵而不使用 for 循环。到目前为止，我已经尝试过：

```
bthD <- c(0,2,3,4,5) # original depth vector
bthA <- c(4000,3500,3200,3000,2800) # original array of area

Temp <- c(4.5,4.2,4.2,4,5,5,4.5,4.2,4.2,4)
Temp <- matrix(Temp,2) # matrix for temperature measurements

# -- interpolating bathymetry data  --
depthTemp <- c(0.5,1,2,3,4)
layerZ <- seq(depthTemp[1],depthTemp[5],0.1)

library(signal)
layerA <- interp1(bthD,bthA,layerZ);

# -- interpolate= matrix --
layerT <- list()
for (i in 1:2){
  t <- Temp[i,]
  layerT[[i]] <- interp1(depthTemp,t,layerZ)  
}
layerT <- do.call(rbind,layerT) 
```

因此，在这里我在 for 循环中对矩阵的每一行使用了 interp1。我想知道如何在不使用 for 循环的情况下做到这一点。我可以在matlab中通过转置矩阵来做到这一点，如下所示：

```
layerT = interp1(depthTemp,Temp',layerZ)'; % matlab code 
```

但是当我尝试在 R 中执行此操作时

```
layerT <- interp1(depthTemp,t(Temp),layerZ) 
```

它不返回插值结果的矩阵，而是一个数值数组。如何确保 R 返回插值矩阵？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:19:32.460

*   你的方法没有错；我可能会避免中间`t <-`

*   如果您想感受 R-ish，请尝试

`apply(Temp,1,function(t) interp1(depthTemp,t,layerZ))`

如果您真的需要这种方式，您可能必须在所有人前面添加 at(ranspose) 。

由于这是一个 3d 字段，因此每行插值可能不是最佳的。我最喜欢的是`interp.loess`在 package 中`tgp`，但对于常规间距，其他选项可能可用。该方法不适用于您的迷你示例（这对问题很好），但需要更大的网格。

# file - 将存在于多个文件夹中的同名文件复制到不同的目标文件夹

> ID：15896303
> 
> 赞同：0
> 
> 时间：2013-04-09T07:53:21.993
> 
> 标签：file, for-loop, cmd, subdirectory

这是我的文件夹A的文件夹结构

```
A\Temp\folder1\c\one.txt
A\Temp\folder2\c\one.txt
A\Temp\folder3\c\one.txt 
```

和另一个文件夹 B

```
B\folder1.ext\c\   Note: the extension is part of its folder name.
B\folder2.ext\c\
B\folder3.ext\c\ 
```

我想要做的是将所有 one.txt 从 A\Temp*\c\one.txt 复制到 C*\c\

我现在正在尝试的是：

```
for /D %%b in (TEMP\*) do (
set folder=%%~nb
ECHO %%~b
ECHO Copying %%b
ECHO.
ECHO.
COPY %%b\c\one.txt B\%folder%.ext\c 
```

它不起作用，因为存储在 %folder% 中的文件夹名称 gettig 每次都只是最后一个文件夹（这里是文件夹 3）的名称，即文件夹 1 中的 one.txt 被复制到 C\folder3 中，而其他文件没有被复制（系统不能找到指定的文件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:35:21.907

如果要将循环变量分配给循环内的另一个变量，则必须启用延迟扩展：

```
setlocal EnableDelayedExpansion
for /D %%b in (TEMP\*) do (
  set folder=%%~nb
  ECHO %%~b
  ECHO Copying %%b
  ECHO.
  ECHO.
  COPY %%b\c\one.txt B\!folder!.ext\c
)
endlocal 
```

否则你必须使用循环变量：

```
for /D %%b in (TEMP\*) do (
  COPY %%~b\c\one.txt B\%%~nb.ext\c
) 
```

这样做的原因是没有延迟扩展，变量（`%folder%`）在*解析时*扩展，即在读取命令（块）时。启用延迟扩展后，变量 ( `!folder!`) 在*运行时*扩展。

# html - 目录列表

> ID：15896307
> 
> 赞同：0
> 
> 时间：2013-04-09T07:53:28.273
> 
> 标签：html, directory

好的，所以我的服务器上有一个目录和一个文件，位于我的 public_html 文件夹中。

目录名是：sample 文件名是：index.html

在子目录示例中有另一个名为 home.html 的文件

现在，我希望 home.html 引用它的父目录 index.html。但是，为此我必须将我的 index.html 文件放入我不想要的子目录 sample 中。

所以，请告诉我该怎么做！我不想重定向，我想要一个指向我父目录中 index.html 的 home.html 文件的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:56:29.430

链接到父目录只需写：

```
<a href="../index.html">text</a> 
```

# objective-c - UITableView custom begin and end updates animation

> ID：15896309
> 
> 赞同：2
> 
> 时间：2013-04-09T07:53:29.760
> 
> 标签：objective-c, uitableview

I have a `UITableView`, I want to customize animation duration of begin and end update.

If it is 0.2 then I want to make it as 0.5\.

```
[tbl beginUpdates];
[tbl reloadRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationRight];
[tbl endUpdates]; 
```

Above lines animation duration needs to be very slow for me.

# c# - 使用 C# 获取连接到命名管道服务器的客户端的进程 ID

> ID：15896315
> 
> 赞同：1
> 
> 时间：2013-04-09T07:53:50.993
> 
> 标签：c#, .net, windows, pinvoke, named-pipes

我不确定我只是没有看到它，还是什么？我需要知道通过命名管道从`NamedPipeServerStream`. 这可能吗？

与此同时，我想出了这个功能：

```
[DllImport("kernel32.dll", SetLastError = true)]
internal static extern bool GetNamedPipeClientProcessId(IntPtr Pipe, out UInt32 ClientProcessId);
public static UInt32 getNamedPipeClientProcID(NamedPipeServerStream pipeServer)
{
    //RETURN:
    //      = Client process ID that connected via the named pipe to this server, or
    //      = 0 if error
    UInt32 nProcID = 0;
    try
    {
        IntPtr hPipe = pipeServer.SafePipeHandle.DangerousGetHandle();
        GetNamedPipeClientProcessId(hPipe, out nProcID);
    }
    catch
    {
        //Error
        nProcID = 0;
    }

    return nProcID;
} 
```

我对“DangerousGetHandles”和“DllImports”不是很擅长。我在这里使用的 Win32 更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:01:58.363

该代码的主要问题是它没有执行正确的错误处理。您需要检查返回值`GetNamedPipeClientProcessId`以检测错误。

```
[DllImport("kernel32.dll", SetLastError = true)]
internal static extern bool GetNamedPipeClientProcessId(IntPtr Pipe, out uint ClientProcessId);
public static uint getNamedPipeClientProcID(NamedPipeServerStream pipeServer)
{
    UInt32 nProcID;
    IntPtr hPipe = pipeServer.SafePipeHandle.DangerousGetHandle();
    if (GetNamedPipeClientProcessId(hPipe, out nProcID))
        return nProcID;
    return 0;
} 
```

# c# - 在 mvc4 上记录和跟踪

> ID：15896316
> 
> 赞同：3
> 
> 时间：2013-04-09T07:53:52.733
> 
> 标签：c#, asp.net-mvc-4

我想知道我在 mvc4 中记录和跟踪的选项是什么，过去我曾经使用外部框架，我记得我多次使用 log4net 以及企业库。

我正在寻找一种简单的方法，可以启用/禁用日志记录和跟踪以提高性能。所以我只会在发生未知异常时启用日志记录/跟踪。

由于我来自 Sharepoint 世界，在那里，您可以配置不同的日志记录级别、详细、可监控、高、异常等。

我想知道我是否可以对 asp.net mvc 做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:56:44.370

您应该能够毫无问题地使用 log4net。

我们使用不同的记录器[NLog](http://nlog-project.org/)，它绝对适用于 ASP.NET。它有 ASP.NET 的具体示例

这是[一篇关于在 ASP.Net 中使用 NLog 的博客文章](http://rickyrosario.com/blog/asp-net-logging-using-nlog/)。

# python - Shifting 3D numpy array

> ID：15896317
> 
> 赞同：1
> 
> 时间：2013-04-09T07:53:55.250
> 
> 标签：python, arrays, numpy, 3d, shift

I would like to be able to shift a 3D numpy array in either direction along the height axis. If a positive shift of a say 3 is given, all values in the array shift up and 3 new slices of zeros appear at the bottom of the array. The opposite would occur if a negative shift is given, all slices shift down along the height axis and new slices of zeros appear at the top.

I have attempted reshaping the array to 1D and shifting left and right, and then returning to 3D. However, this shifts the array along the wrong direction. I tried implementing numpy.rollaxis before reshaping, thus shifting along the correct axis. But the system I'm working on does not recognize all numpy functions and will not perform rollaxis.

Thanks!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T14:58:10.823

你的问题有点不明确。首先，“高度”轴对于您在 3D 阵列中所追求的不是一个非常明确的定义。最好通过形状元组中的位置来定位它们。我将把它理解为“沿着第一个轴”，但是对于不同的轴应该如何做到这一点应该很明显。

其次，虽然很明显您希望零来填充移位的数据，但您没有指定要对另一侧的数据做什么：它应该消失在数组边界之外并丢失吗？还是应该扩展数组以保留所有内容？

对于前者，numpy 具有与[`roll`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.roll.html)您想要的功能类似的功能，但它不是用零填充，而是从数组的另一侧复制数据。之后您可以简单地用零替换它：

```
>>> a = np.arange(60).reshape(3, 4, 5)
>>> a
array([[[ 0,  1,  2,  3,  4],
        [ 5,  6,  7,  8,  9],
        [10, 11, 12, 13, 14],
        [15, 16, 17, 18, 19]],

       [[20, 21, 22, 23, 24],
        [25, 26, 27, 28, 29],
        [30, 31, 32, 33, 34],
        [35, 36, 37, 38, 39]],

       [[40, 41, 42, 43, 44],
        [45, 46, 47, 48, 49],
        [50, 51, 52, 53, 54],
        [55, 56, 57, 58, 59]]])
>>> b = np.roll(a, 2, axis=0)
>>> b[:2,:, :] = 0
>>> b
array([[[ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0]],

       [[ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0]],

       [[ 0,  1,  2,  3,  4],
        [ 5,  6,  7,  8,  9],
        [10, 11, 12, 13, 14],
        [15, 16, 17, 18, 19]]]) 
```

如果转变是负面的，而不是`b[:shift, :, :] = 0`你会去`b[-shift:, :, :] = 0`。

如果您不想丢失数据，那么您基本上只是在数组的顶部或底部添加零片。对于前三个维度，numpy 有[`vstack`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.vstack.html), [`hstack`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.hstack.html), 和[`dstack`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.dstack.html), 并且`vstack`应该是您所追求的：

```
>>> a = np.arange(60).reshape(3, 4, 5)
>>> b = np.vstack((np.zeros((2,)+a.shape[1:], dtype=a.dtype), a))
>>> b
array([[[ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0]],

       [[ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0]],

       [[ 0,  1,  2,  3,  4],
        [ 5,  6,  7,  8,  9],
        [10, 11, 12, 13, 14],
        [15, 16, 17, 18, 19]],

       [[20, 21, 22, 23, 24],
        [25, 26, 27, 28, 29],
        [30, 31, 32, 33, 34],
        [35, 36, 37, 38, 39]],

       [[40, 41, 42, 43, 44],
        [45, 46, 47, 48, 49],
        [50, 51, 52, 53, 54],
        [55, 56, 57, 58, 59]]]) 
```

如果您希望在底部附加零，只需更改调用堆栈函数中的参数顺序即可。

# asp.net - Getting error to generate pdf

> ID：15896319
> 
> 赞同：0
> 
> 时间：2013-04-09T07:54:06.423
> 
> 标签：asp.net

```
 protected void txt_btn_Click(object sender, EventArgs e)
{
    Response.ContentType = "application/pdf";
    Response.AddHeader("content-disposition", "attachment;filename=TestResult.pdf");
    Response.Cache.SetCacheability(HttpCacheability.NoCache);

    StringBuilder htmlText = new StringBuilder();
    htmlText.Append("<table style='color:red;' border='1'><tr><th>createing pdf</th><tr><td> abcdef</td></tr></table>");

    StringReader stringReader = new StringReader(htmlText.ToString());
    Document doc = new Document(PageSize.A4);
    List<iTextSharp.text.IElement> elements =
            iTextSharp.text.html.simpleparser.HTMLWorker.ParseToList(stringReader, null);
    doc.Open();
    foreach (object item in elements)
    {
        doc.Add((IElement)item);
    }
    doc.Close();
    // Response Output
    PdfWriter.GetInstance(doc, Response.OutputStream);
    doc.Open();

    //doc.Close();

    Response.Write("PDF is created");
} 
```

}

I am try to create pdf file.But pdf is created only 0kb.Mean when i open this it's shw error that May be pdf damaged

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:06:52.827

我假设您正在使用 iTextSharp 库。

```
private void GeneratePDF()
    {
        try
        {
            string pdfPath = "~/PDF/File_1.pdf";
            StringBuilder sb = new StringBuilder();
            sb.Append("Name : chamara" + Environment.NewLine);
            sb.Append("Address : sri lanaka" + Environment.NewLine);
            sb.Append("Institute : SLIIT" + Environment.NewLine);
            Document doc = new Document();
            PdfWriter.GetInstance(doc, new FileStream(Server.MapPath(pdfPath), FileMode.Create));
            doc.Open();
            doc.Add(new Paragraph(sb.ToString()));
            doc.Close();

        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

# javascript - Want to pass in returned data to my custom callback within jQuery's $.post()

> ID：15896324
> 
> 赞同：0
> 
> 时间：2013-04-09T07:54:17.940
> 
> 标签：javascript, jquery, callback

Basically I'm creating my own callback and passing it into my method called `_ajaxCall()`.

`_ajaxCall()` takes the following parameters:

`data` = an object containing the user submitted data to be POSTed to my server `postURL` = the url to post to `callback` = a function expression to be called upon successful return of data from the server.

Here is the _ajaxCall() method:

```
_ajaxCall: function (data, postURL, callback) {
  $.post(postURL, {
    data : data
  }, 'json').done(function (returned) {
    switch(returned.success) {
      case true:
        typeof callback === 'function' && callback(returned);
        break;
    }
  }).fail(function (xhr, textStatus, errorThrown) {
    if (status !== 200) {
      window.location = document.URL;
    }
  });
}

commentUpdate : function(self) {
  var postURL = '/submission/comment/' + self.attributes.commentId;

  var data = {
    action: self.attributes.action,
    commentId : self.attributes.commentId,
    comment: self.attributes.comment
  };

  var callback = function(returned) {
    if (returned.success === true) {
      // do something in here
    } else {
      // do other crap here
    }
  };

  this._ajaxCall(data, postURL, callback);
} 
```

But it's not passing `returned` to my custom callback() method. Why?

# java - 网络服务器和应用服务器通信

> ID：15896327
> 
> 赞同：0
> 
> 时间：2013-04-09T07:54:24.157
> 
> 标签：java, jsp, tomcat, weblogic

我们有`web application`, 包含`dynamic`和`static`内容。由于我们的客户想要静态内容`tomcat`和动态内容`web logic`。有没有可能做这种类型的 `configuration`，我们怎么能做到这一点？支持连接器或对此的支持是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:57:44.230

简单：确保静态内容的 URL 可以被静态过滤（例如，将静态图像放在 /image 路径中）并配置网络服务器以从静态目录中提供与该路径匹配的所有内容，并将其余部分转发到应用服务器。

反之亦然：过滤动态内容并静态提供其余内容。

# android - Experiencing choppyness when loading Bitmaps into ImageViews from AsyncTask. Looking for improvement pointers

> ID：15896330
> 
> 赞同：0
> 
> 时间：2013-04-09T07:54:35.813
> 
> 标签：android, android-asynctask, android-imageview, android-image

I'm experiencing some choppyness when loading bitmaps into ImageViews from an AsyncTask.

I have a fragment in which I display information loaded from SQLite, and said information often times have photos attached. When my fragment is launched, it takes up to a second before it is displayed (the app appears to hang for a bit), probably because of the heavy data loading, which tells me I might be doing something wrong.

Here is a stripped down version of my implementation:

```
public class InformationFragment extends Fragment {
    private ArrayList<MyPhoto> mPhotos;
    private LinearLayout mPhotoContainer;
    private View mView;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        // ....

        mView = inflater.inflate(R.layout.fragment_information, container, false);
        mPhotoContainer = (LinearLayout) mView.findViewById(R.id.fragment_information_photos_container);

        return mView;
    }

    @Override
    public void onResume() {
        super.onResume();
        loadInformation();
    }

    private void loadInformation() {
        // Loads information from database and puts it into TextViews and such.
        // Relatively performance heavy operations, should perhaps run off main, but it's not the cause
        // of my problems as it was pretty smooth before I implemented photo attachments
    }

    private ArrayList<MyPhoto> getPhotos() {
        // Loads photos from database. Not sure but could be pretty performance heavy, you tell me :)
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        if(mPhotoContainer.getChildCount() == 0) {
            mPhotos = getPhotos();

            for (MyPhoto p : mPhotos) {
                addImageViewForPhoto(p);
            }
        }
    }

    private void addImageViewForPhoto(MyPhoto p) {
        final ImageView iv = new ImageView(getActivity());

        mPhotoContainer.addView(iv);

        new MyPhotoLoaderTask(iv).execute(p.getBytes());
    }

} 
```

The following is the MyPhotoLoaderTask class

```
public class MyPhotoLoaderTask extends AsyncTask<byte[], Void, Bitmap> {

    private final WeakReference<ImageView> mWeakImageView;

    public MyPhotoLoaderTask(ImageView iv) {
        mWeakImageView = new WeakReference<ImageView>(iv);
    }

    @Override
    protected Bitmap doInBackground(byte[]... params) {
        return MyPhotoUtils.createBitmap(params[0], 100, 100);
    }

    @Override
    protected void onPostExecute(final Bitmap result) {
        if(mWeakImageView != null && result != null) {
            final ImageView iv = mWeakImageView.get();
            iv.setImageBitmap(result);
        }
    }
} 
```

And lastly, the MyPhotoUtils.createBitmap() method

```
public static Bitmap createBitmap(byte[] bytes, int reqWidth, int reqHeight) {
    BitmapFactory.Options opts = new BitmapFactory.Options();

    opts.inJustDecodeBounds = true;
    BitmapFactory.decodeByteArray(bytes, 0, bytes.length, opts);

    opts.inSampleSize = getInSampleSize(opts, reqWidth, reqHeight);
    opts.inJustDecodeBounds = false;

    return BitmapFactory.decodeByteArray(bytes, 0, bytes.length, opts);
} 
```

I don't mind the fact that loading the images takes a while, but I would love for the fragment to load with all of the text information already present, and then have the images appear one by one after the user has begun interaction with the fragment. The current situation is pretty bad in my opinion, and I fear it will become even worse if the user will attach even more photos to the information.

# java - 在 Java 中执行循环后解释 println 和 print 语句？

> ID：15896331
> 
> 赞同：0
> 
> 时间：2013-04-09T07:54:42.110
> 
> 标签：java, println

这里发生了什么，即使用 print 时，为什么它不会在行停止的地方打印？

```
for(int i = 0; i <=2; i++){
System.out.println(i)
System.out.print("s");
} 
```

为什么它不会像这样打印 2 之后的 s ：

0

1

2s

据我所知，有人说它会永远缓冲？这意味着什么？计算机会知道打印 2 旁边的字母 s，因为它已经停在那里了，那为什么不打印呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:06:51.377

您在循环中的第一条语句之后缺少一个分号。

```
for (int i = 0; i <=2; i++) {
    System.out.println(i);
    System.out.print("s");
} 
```

上面的代码会输出这个：

0秒
1
秒2
秒

但是，如果您这样做：

```
for (int i = 0; i <=2; i++) {
    System.out.print(i);
    System.out.println("s");
} 
```

这将打印以下内容：

0秒
1
秒 2 秒

With an extra line break at the end.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:59:58.997

对于循环中的每次迭代，代码打印整数，添加一个换行符（因为`println`已使用）并打印 s。所以你会有一个像这样的输出

> 0
> 
> s1
> 
> s2
> 
> s

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T08:00:19.693

你的代码会发生什么：

```
0
s1 
s2
s 
```

为什么会发生：如果你使用

```
print("s"); 
```

该程序将打印“s”，仅此而已。如果您使用：

```
println("s"); 
```

你会在每个“s”之后得到一个新行，我想这就是你想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T08:01:10.183

这是因为 println 将在语句的末尾留下换行符（\n），而不是在语句的开头。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T08:03:57.500

实际上`print`打印`s`行停止的位置！。这里的问题是，`println`已经先换了一条线，然后`print`从那个地方开始。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T08:04:47.367

两个语句都在同一个循环中，因此将一个接一个地运行。

所以：

```
System.out.println(i); 
```

将给 i（无论该变量是什么）然后换行。

```
System.out.print("s"); 
```

将打印“s”。没有新线。

你的输出将是

```
0
s1
s2
s 
```

而且由于您只想要循环的最后一次迭代的输出，因此您需要一个“if”：

```
 for (int i = 0; i <= 2; i++) {
        System.out.print(i);
        if (i == 2) {
        System.out.print("s");
        } else {
        System.out.println("");
        }
    } 
```

这使：

```
0
1
2s 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-09T08:22:04.130

The actual answer is that the previous println already puts it to the next line. Using System.out.print("s") actually goes horizontally forever, therefore it never prints.

# objective-c - Xcode 无法编译 XIB

> ID：15896332
> 
> 赞同：0
> 
> 时间：2013-04-09T07:54:44.813
> 
> 标签：objective-c, xcode, cocoa, interface-builder, xib

我收到以下错误消息，并且多个 XIB 编译失败，退出代码为 6。我无法理解它。有谁知道可能出了什么问题？

我已经清理了项目，但这没有帮助。

错误仅在归档时发生，而不是在简单地运行应用程序时发生。编辑：从头开始，在我完成构建（和清理）之后，运行不再有效。

```
CompileXIB MyProject/en.lproj/MainMenu.xib
    cd /Users/wesley/XCode/MyProject
    setenv XCODE_DEVELOPER_USR_PATH /Applications/Xcode.app/Contents/Developer/usr/bin/..
    /Applications/Xcode.app/Contents/Developer/usr/bin/ibtool --errors --warnings --notices --output-format human-readable-text --compile /Users/wesley/Library/Developer/Xcode/DerivedData/MyProject-ciandcogabqifsfgbscfrfgabfet/Build/Intermediates/ArchiveIntermediates/MyProject/InstallationBuildProductsLocation/Applications/MyProject.app/Contents/Resources/en.lproj/MainMenu.nib /Users/wesley/XCode/MyProject/MyProject/en.lproj/MainMenu.xib --sdk /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk

2013-04-09 09:48:22.377 ibtoold[77454:1207] [MT] DVTAssertions: ASSERTION FAILURE in /SourceCache/IDEInterfaceBuilder/IDEInterfaceBuilder-3084/ibtool/IBToolErrorForwarder.m:32Details:  Unhandled error: 13Object:   <IBToolErrorForwarder: 0x401036100>Method:   -initThread:   <NSThread: 0x40030a1e0>{name = (null), num = 1}Hints: NoneBacktrace:  0  0x000000010c04c7c3 -[DVTAssertionHandler handleFailureInMethod:object:fileName:lineNumber:messageFormat:arguments:] (in DVTFoundatio  1  0x000000010c04c5f4 _DVTAssertionFailureHandler (in DVTFoundatio  2  0x000000010b571bba (in ibtool  3  0x000000010b569115 (in ibtool  4  0x000000010b563f74 (in ibtool  5  0x00000000000000Command /Applications/Xcode.app/Contents/Developer/usr/bin/ibtool failed with exit code 6 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:00:47.247

断言失败原因：-可能是您正在打开的文件或损坏的首选项。尝试删除首选项或打开已知良好的 nib/xib 文件。

还

删除“派生数据”文件夹中的所有内容

清理你的项目。更多类似的问题[xcode 不会编译 iOS 应用程序，打开 .xib 或 .storyboard 文件时崩溃](https://stackoverflow.com/questions/9109571/xcode-wont-compile-ios-apps-crashes-when-xib-or-storyboard-files-are-opened)可以帮助您！

也试试

从 *.xcdatamodeld 目录中删除所有未在 XCode 中显示的 *.xcdatamodel 目录。这些目录出现在 XCode 中 *.xcdatamodel 重命名之后。

# mysql - 从一个表中选择所有行，其中连接表中的条件

> ID：15896337
> 
> 赞同：1
> 
> 时间：2013-04-09T07:54:57.377
> 
> 标签：mysql, left-join

我的数据库中有一个 Products 表和一个 ProductionReport 表。

ProductionReport 表捕获每个产品的每周生产信息。我的应用程序将报告此信息。

**表结构**

生产报告

> productionreportid, productid, 日期, 数量
> 1, 1, 2013-04-08, 50
> 2, 2, 2013-04-08, 12

产品

> productid, productname
> 1, 护肤霜
> 2, 花生油
> 3, 浴盐
> 4, 洗发水

我的页面使用了一个网格视图，它将列出所有产品 ( `SELECT productid, productname FROM Products`) 并加入 ProductionReport 表，以便显示用户可以更新的一周的所有产品和生产值的列表。

我的问题是填充 GridView 的 sql 查询。它目前只获取两个表中存在连接值的行：

```
SELECT pro.productname, pr.productionreportid, IFNULL(pr.qty, 0) qty
FROM Products pro
LEFT JOIN ProductionReport pr ON pro.productid = pr.productid
WHERE DATE(pr.date) = '2013-04-08' 
```

因此，鉴于上述数据，我希望得到以下结果集

> 护肤霜, 1, 50
> 花生油, 2, 12
> 浴盐, 0, 0
> 洗发水, 0, 0

不幸的是，我得到的只是前两行。我相信这是因为 WHERE 子句针对连接表中的列。如果是这样的话，这显然是我的逻辑上的一个严重缺陷，但我不知道该怎么办。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:02:45.580

试试这个

```
 SELECT  
     pro.productname, 
     pr.productionreportid, 
     IFNULL(pr.qty, 0) qty
  FROM 
    Products pro  
  LEFT JOIN ProductionReport pr  
    ON pro.productid = pr.productid 
    AND DATE(pr.date) = '2013-04-08' 
```

基本上将日期条件从 WHERE 子句移动到 JOIN 子句

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:05:37.510

你是正确的，`DATE(pr.date) = '2013-04-08'`如果 pr.date 为空，那将不匹配。

您可以将其更改为类似`pr.date is null or date(pr.date) = '2013-04-08'`

# php - 使用 preg_match 查找 url 参数

> ID：15896338
> 
> 赞同：0
> 
> 时间：2013-04-09T07:54:59.877
> 
> 标签：php, regex

我正在用 curl 解析我的网站（html 代码）：

```
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, "http://example.com/product.html");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);

$content = curl_exec($ch); 
```

现在我想找到一个特定`<span>`的带有`<a>`a 标签包含`href`带有参数的。`[eventUid]=22`是否可以通过 preg match找到此参数 ( )？我想`22`使用 PHP 将来自数据库的 (id) 保存到变量中。

例子：

```
<span><a title="mytitle" href="http://example.com/products.html?tx_example_pi1[eventUid]=22">example</a></span> 
```

```
if (preg_match('@((https?://)?([-\w]+\.[-\w\.]+)+\w(:\d+)?(/([-\w/_\.]*(\?\S+)?)?)*)@', $content, $matches)) {
    echo $matches[2];
} else {
    echo 'Nothing found!';
} 
```

目前我只找到了这个 preg 搜索的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:13:16.970

使用正则表达式搜索 HTML 很容易出错；最好使用 XPath：

```
$doc = new DOMDocument;
$doc->loadHTML($content);
$xp = new DOMXPath($doc);

foreach ($xp->query('//span/a[contains(@href, "[eventUid]=")]') as $anchor) {
    if (preg_match('/\[eventUid\]=(\d+)/', $anchor->getAttribute('href'), $matches)) {
        echo $matches[1];
    }
} 
```

# java - Change hawtio port on Karaf

> ID：15896341
> 
> 赞同：2
> 
> 时间：2013-04-09T07:55:07.003
> 
> 标签：java, apache-karaf, hawtio

I have installed [hawtio](http://hawt.io/getstarted/index.html) in the couple of my Apache Karaf 2.2.7 instances by executing commands:

```
features:addurl mvn:io.hawt/hawtio-karaf/1.0/xml/features
features:install hawtio 
```

The problem is that I have four linux boxes and four Karaf instances, so I have installed it on each of them. Everything is fine except that the hawtio console ports are different. I know that by default it should be started on `8181`. On two of my servers it started on: `8182` and on the other twos: `7181`. I am not sure, maybe `8181` is used by something, but still, how does hawtio chooses the port? Can I somehow get in control of this and change the port manually to always be the same?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:57:37.920

Hawtio 只是一个运行在 Karaf 和 Pax-Web 之上的 Web 应用程序，因此您应该检查 org.ops4j.pax.web.cfg 以了解端口的配置方式。

# javascript - Apps for Office - how to manipulate slide in Powerpoint

> ID：15896345
> 
> 赞同：3
> 
> 时间：2013-04-09T07:55:18.313
> 
> 标签：javascript, powerpoint, apps-for-office

I want to be able to insert some text(or anything else) into a current (or any) slide in PowerPoint using the JavaScript API. I can't find any examples.

I've also browsed through the [API Reference](http://msdn.microsoft.com/en-us/library/fp142185.aspx) and haven't found any clues. (I'm not even sure if this is only the common API or all of it)

Can anyone point me in the right direction?

# nsusernotification - NSUserNotificationCenter not showing notifications

> ID：15896348
> 
> 赞同：2
> 
> 时间：2013-04-09T07:55:21.050
> 
> 标签：nsusernotification, nsusernotificationcenter

I'm not sure if I got something wrong but from the examples I could find. I wrote that little helloworld.

```
#import <Foundation/Foundation.h>
#import <Foundation/NSUserNotification.h>

int main (int argc, const char * argv[])
{
    NSUserNotification *userNotification = [[NSUserNotification alloc] init];
    userNotification.title = @"Some title";
    userNotification.informativeText = @"Some text";

    [[NSUserNotificationCenter defaultUserNotificationCenter] deliverNotification:userNotification];

    return 0;
} 
```

I compile it with:

```
cc -framework Foundation -o app main.m 
```

It compiles and I can execute it but it won't show anything. For some reasons, nothing gets presented. I read that Notifications may not get displayed if the application is the main actor. How can I make it show Notification?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-06T12:06:59.873

设置委托并覆盖

```
- (BOOL)userNotificationCenter:(NSUserNotificationCenter *)center 
                               shouldPresentNotification:(NSUserNotification *)notification {
  return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-24T00:23:16.690

请务必为任何新通知分配一个新标识符。通知只会显示一次，除非使用了新的标识符或用户清除了他们的通知历史记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-11T02:14:04.820

有关 Objective-C 和 Swift 的完整示例：

我们需要提供一个`NSUserNotificationCenterDelegate`, 在最简单的情况下我们可以使用`AppDelegate`它

# Objective-C

我们需要修改`AppDelegate`提供`NSUserNotificationCenterDelegate`方法。从一个干净的`AppDelegate`（看起来像这样......）

```
@interface AppDelegate () 
```

我们将其修改为：

```
@interface AppDelegate () <NSUserNotificationCenterDelegate> 
```

现在我们可以在里面提供所需的委托方法`@implementation AppDelegate`

```
- (BOOL)userNotificationCenter:(NSUserNotificationCenter *)center 
                               shouldPresentNotification:(NSUserNotification *)notification {
  return YES;
} 
```

# 斯威夫特 4

您可以使用`extension`of`AppDelegate`来提供`NSUserNotificationCenterDelegate`方法：

```
extension AppDelegate: NSUserNotificationCenterDelegate {
    func userNotificationCenter(_ center: NSUserNotificationCenter, shouldPresent notification: NSUserNotification) -> Bool {
        return true
    }
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-05-28T15:07:17.060

我知道这是一个老问题 - 但由于可能有人在寻找如何在 Python 和 PyObjC 中执行此操作的答案，因此我将在此处发布正确的语法（因为它是谷歌搜索结果中的佼佼者之一）。由于我无法评论小鬼的评论，我将把它作为另一个答案发布。

在 Python 中使用 pyobjc 也可以这样做：

```
def userNotificationCenter_shouldPresentNotification_(self, center, notification):
    return True 
```

完整的课程看起来像这样：

```
from Cocoa import NSObject
import objc

class MountainLionNotification(NSObject):
    """ MacOS Notifications """
    # Based on http://stackoverflow.com/questions/12202983/working-with-mountain-lions-notification-center-using-pyobjc

    def userNotificationCenter_shouldPresentNotification_(self, center, notification):
        return True

    def init(self):

        self = super(MountainLionNotification, self).init()
        if self is None: return None

        # Get objc references to the classes we need.
        self.NSUserNotification = objc.lookUpClass('NSUserNotification')
        self.NSUserNotificationCenter = objc.lookUpClass('NSUserNotificationCenter')

        return self

    def clearNotifications(self):
        """Clear any displayed alerts we have posted. Requires Mavericks."""

        NSUserNotificationCenter = objc.lookUpClass('NSUserNotificationCenter')
        NSUserNotificationCenter.defaultUserNotificationCenter().removeAllDeliveredNotifications()

    def notify(self, title="", subtitle="", text="", url=""):
        """Create a user notification and display it."""

        notification = self.NSUserNotification.alloc().init()
        notification.setTitle_(str(title))
        notification.setSubtitle_(str(subtitle))
        notification.setInformativeText_(str(text))
        # notification.setSoundName_("NSUserNotificationDefaultSoundName")
        notification.setHasActionButton_(False)
        notification.setActionButtonTitle_("View")
        # notification.setUserInfo_({"action":"open_url", "value": url})

        self.NSUserNotificationCenter.defaultUserNotificationCenter().setDelegate_(self)
        self.NSUserNotificationCenter.defaultUserNotificationCenter().scheduleNotification_(notification)

        # Note that the notification center saves a *copy* of our object.
        return notification 
```

# mysql - 如何使用like运算符编写mysql存储过程

> ID：15896351
> 
> 赞同：13
> 
> 时间：2013-04-09T07:55:32.143
> 
> 标签：mysql, sql, stored-procedures

以下是我的代码：

```
 DELIMITER $$

     CREATE DEFINER=`root`@`localhost` PROCEDURE `employee_with_asset`(IN name     VARCHAR(250))
     BEGIN
     SELECT a.Asset_code,a.name as name1,a.type,a.description,`purchase date`,
    `amc availability`,`amc renewal`,`employee Id`,b.Name FROM `asset_details` a,
     employee b WHERE  b.Name LIKE '%' + @name + '%' and a.`assigned to`=b.`employee Id`;
     END 
```

它在 LIKE 附近显示错误。如何解决它。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-09T07:57:04.103

mysql中的连接是使用完成的`CONCAT()`

```
LIKE CONCAT('%', @name , '%') 
```

完整声明

```
DELIMITER $$
CREATE DEFINER=`root`@`localhost` PROCEDURE `employee_with_asset`
(
    IN _name     VARCHAR(250)
)
BEGIN
    SELECT  a.Asset_code,
            a.name as name1,
            a.type,
            a.description,
            `purchase date`,
            `amc availability`,
            `amc renewal`,
            `employee Id`,
            b.Name 
    FROM    `asset_details` a
            INNER JOIN employee b 
                ON a.`assigned to` = b.`employee Id`
    WHERE   b.Name LIKE CONCAT('%', _name , '%');
END $$
DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-26T08:00:31.897

John Woo 的答案是正确的，但是如果您不使用 utf8_general_ci 集合，则必须在 WHERE 子句之后（如果您有多个条件，则在每个条件之后）将集合与您比较的列的集合相同

```
... WHERE name LIKE CONCAT('%', @name , '%') COLLATE utf8_unicode_ci 
```

或多个条件

```
... WHERE name LIKE CONCAT('%', @name , '%') COLLATE utf8_unicode_ci
OR job LIKE CONCAT('%', @name , '%') COLLATE utf8_unicode_ci ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-06T12:54:10.673

PHP：

```
$keyword = $_POST['keyword'];
$response = "call user_search('%$keyword%');"; 
```

mysql：

```
....where user.name like @keyword; 
```

# android - Android：ListView 加载给出空指针异常

> ID：15896353
> 
> 赞同：0
> 
> 时间：2013-04-09T07:55:42.760
> 
> 标签：android, sqlite, nullpointerexception, simplecursoradapter

我正在尝试将数据从 sqlite 获取到 listview，所以我按照这个 url 中的答案示例 [从 SQLite 数据库制作 listview](https://stackoverflow.com/questions/5466396/make-listview-from-sqlite-database)

CustomCursorAdapter 就是这样

```
 public class CustomCursorAdapter extends SimpleCursorAdapter  {
    private int layout; 
    private LayoutInflater inflater;
    private Context context;

    public CustomCursorAdapter (Context context, int layout, Cursor c, String[] from, int[] to) {
        super(context, layout, c, from, to);
        this.layout = layout;
        this.context = context;
        inflater = LayoutInflater.from(context);

    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {

        View v = inflater.inflate(R.layout.topics, parent, false);

        return v;
    }

    @Override
    public void bindView(View v, Context context, Cursor c) {
                //1 is the column where you're getting your data from
        String name = c.getString(1);
        /**
         * Next set the name of the entry.
         */
        TextView name_text = (TextView) v.findViewById(R.id.listLabel);
        if (name_text != null) {
            name_text.setText(name);
        }   
    }
} 
```

但是 onCreate 我有这个代码

```
ListView listView = (ListView)findViewById(R.layout.topics);
    connectToDB();
    from = new String[] { "topicTitle" };
    to = new int[] { R.id.listLabel };

    CustomCursorAdapter adapter = new CustomCursorAdapter(this,
            R.layout.topics, cursor, from, to);
    listView.setAdapter(adapter); 
```

用xml如下

```
 <?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/listLogo"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="20dp"
        android:layout_marginTop="5dp"
         >
    </ImageView>

    <TextView
        android:id="@+id/listLabel"
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textSize="15sp" >
    </TextView>

</LinearLayout> 
```

问题是.. listView 为空！！..我不知道为什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:59:17.903

您指的是您的布局主题。您应该在 xml 中定义一个带有 id 的列表视图。在 setCONntentView(R.layout.topics) 之后的活动 onCreate() 中，找到 listview 的 id 并将适配器设置为您的列表。

在你的 xml 中说 topic.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" 
android:background="#0095FF">
   <ListView android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="100dp" 
    android:id="@+id/lv">
   </ListView>
    // other ui elements
</LinearLayout> 
```

然后在你的活动 onCreate()

```
 setContentview(R.layout.topics);
   ListView listView = (ListView)findViewById(R.id.lv);
   connectToDB();
   from = new String[] { "topicTitle" };
   to = new int[] { R.id.listLabel };

   CustomCursorAdapter adapter = new CustomCursorAdapter(this,
        R.layout.topics, cursor, from, to);
    listView.setAdapter(adapter); 
```

来自聊天中的讨论

编辑：

定义 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" 
android:background="#0095FF">

<ListView android:id="@+id/list"
android:layout_width="fill_parent"  
android:layout_height="0dip"
android:focusableInTouchMode="false"
android:listSelector="@android:color/transparent"
android:layout_weight="2"
android:headerDividersEnabled="false"
android:footerDividersEnabled="false"
android:dividerHeight="8dp" 
android:divider="#000000" 
android:cacheColorHint="#000000"
android:drawSelectorOnTop="false">
</ListView>
</LinearLayout> 
```

在你的活动中

```
 public class MainActivity extends Activity {

 ListView lv;
 CustomCursorAdapter cus;
 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    lv = (ListView) findViewById(R.id.list);
    cus= new CustomCursorAdapter(parameters);
    lv.setAdapter(cus);

 }
 } 
```

定义 customCursor 适配器为自定义布局充气。为图像视图设置图像，为文本视图设置文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:02:09.513

尝试编辑您的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:padding="5dp" 
android:id="@+id/main"
>

<ImageView
    android:id="@+id/listLogo"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="20dp"
    android:layout_marginTop="5dp"
     >
</ImageView>

<TextView
    android:id="@+id/listLabel"
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:text="@+id/label"
    android:textSize="15sp" >
</TextView>

<ListView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/topics"
        ></ListView>

 </LinearLayout> 
```

在 Activity onCreate

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ListView listView = (ListView)findViewById(R.layout.topics);
    connectToDB();
    from = new String[] { "topicTitle" };
    to = new int[] { R.id.listLabel };

    CustomCursorAdapter adapter = new CustomCursorAdapter(this,
            R.layout.topics, cursor, from, to);
    listView.setAdapter(adapter);
} 
```

# javascript - Undefined symbols for architecture i386 and Terminating app due to uncaught exception in iOS

> ID：15896359
> 
> 赞同：0
> 
> 时间：2013-04-09T07:55:56.113
> 
> 标签：javascript, iphone, ios, xcode, cordova

I am trying to develop 1 app with phone gap. When i try to use plugin extractzipfile for iOS it's throw this error:

```
Undefined symbols for architecture i386:
"_main", referenced from:
    start in crt1.o
  ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

then i seach for issue and i find 1: "add main.m in to compiler source of compiler phrase".

and this error above is fixed. But it's throw an exeption:

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Unable to instantiate the UIApplication delegate instance. No class named AppDelegate is loaded.' 
```

I am using phonegap 2.5.0 and Xcode 4.6.1, use iPhone simulator 6.1

Please, hlep me! i am new and fool!

thanh for reading!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:56:20.357

如果你突然出现这种情况，通常意味着项目缺少一些它需要的框架。库和相关项目可能需要框架，因此如果您最近添加了框架，则可能会导致此错误。

要添加框架，请在项目视图中右键单击项目名称，选择添加，然后从列表中选择现有框架...。然后找到带有您缺少的符号的框架。

至于如何找到所需的框架，我发现使用 google 最简单，尽管您也可以使用 Xcode 帮助搜索。搜索其中一个符号，尽最大努力找出未损坏的名称，然后您在 developer.apple.com 找到的第一个文档链接通常是正确的。您通常不必狩猎很远。在这种情况下，就是这个页面：

然后继续这样做，直到它起作用......

# javascript - Meteor.js Collection not being created in mongo

> ID：15896364
> 
> 赞同：1
> 
> 时间：2013-04-09T07:56:06.490
> 
> 标签：javascript, mongodb, meteor

Server Side Code:

```
if (Meteor.isClient) {
  Meteor.subscribe("messages");
  Template.hello.greeting = function () {
    Messages = new Meteor.Collection("messages");
    Stuff = new Meteor.Collection("stuff");
    return "Welcome to feelings.";
  };

  Template.hello.events({
    'click input' : function () {
      // template data, if any, is available in 'this'
      if (typeof console !== 'undefined')
        var response = Messages.insert({text: "Hello, world!"});
        var messages = Messages.find
        console.log("You pressed the button", response, Messages, Stuff);
    }
  });
}

if (Meteor.isServer) {
  Meteor.startup(function () {
    // code to run on server at startup
    Messages = new Meteor.Collection("messages");
    Messages.insert({'text' : 'bla bla bla'});
  });
} 
```

Client Side Code

```
<head>
  <title>Test</title>
</head>

<body>
  {{> hello}}
</body>

<template name="hello">
  <h1>Hello World!</h1>
  {{greeting}}
  <input type="button" value="Click"/>
</template> 
```

The problem:

When in javascript console I type Messages.insert({'text' : 'test test test'}); or click the button, underneath which a database insertion call is written

I don't see a document inserted in mongo. Going to mongo console and doing show dbs shows messages (empty)

I have a few other questions, I have read through the meteor docs and also googled but I can't seem to find a clear answer to this:

1.  Why do I need to declare a collection in client as well as server code?
2.  I'm declaring collections inside Template.hello.greeting, what's the difference if I put it in if(Meteor.isClient) block directly.
3.  Is any plans of adding some app directory structure in meteor like rails? where models and templates are separate? I'm not talking about express.js

Thanks.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T08:17:29.953

您需要在全局范围内创建 MongoDB 集合，例如在`isClient`和`isServer`范围之外。因此`Messages = new Meteor.Collection("Messages")`，从该辅助函数中删除并将其置于全局范围内。

您不能直接通过客户端执行插入，因为流星不允许从客户端代码插入数据库。如果您仍想从客户端插入/更新，则必须为客户端定义数据库规则，请参阅[docs](http://docs.meteor.com/#allow)。

或者首选方法是创建一个服务器方法来插入文档，并使用 `Meteor.call()`.

在内部创建集合`Template.hello.greeting`没有任何意义，因为集合用于将数据存储在可从客户端访问的服务器上。

### 更新：流星 > 0.9.1

在 Meteor 中创建集合现在是：

```
Messages = new Mongo.Collection("Messages") 
```

**代替：**

```
Messages = new Meteor.Collection("Messages") 
```

# apache - 如何在openbsd上使用mod_python在apache中运行需要root权限才能执行的python脚本

> ID：15896367
> 
> 赞同：0
> 
> 时间：2013-04-09T07:56:11.480
> 
> 标签：apache, python-2.7, mod-python, openbsd

我正在尝试使用 mod_python 在 Apache 2.x 中运行 python 脚本。我与发布者一起编辑了 httpd.conf

```
 LoadModule python_module /usr/local/apache2/modules/mod_python.so
 <Directory /usr/local/apache2/htdocs/mod_python>

SetHandler mod_python
PythonHandler mod_python.publisher
PythonDebug On 
```

我正在尝试使用需要 root 权限的 python 脚本在防火墙中添加规则。它要求root权限？请有人帮忙。

```
 #!/usr/local/bin/python
    #from mod_python import apache
    import sys
    import errno
    import pf

    def index(req):
         filter = pf.PacketFilter()

         try:
              # Enable packet filtering
              filter.enable()
              print  "pf is enabled"
              return "pf is enabled"
         except IOError, (err, msg):
                if err == errno.EACCES:
                      #sys.exit("Permission denied: are you root?")
                       return ("Permission denied: are you root?")
                elif err == errno.ENOTTY:
                        #sys.exit("ioctl not supported by the device: is the pf device correct?")
                        return ("ioctl not supported by the device: is the pf device correct?") 
```

这是我想通过openBSD上的apache执行的python脚本。它使用 mod_python。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:20:08.080

请在某处发布您的 python 脚本并给我们链接。您的 python 脚本如何尝试与 pf 通信？通过 pfctl? 假设您正在尝试将 IP 添加到表中

```
pfctl -t thetable -T add x.x.x.x 
```

找出运行 apache 的用户

```
ps aux | grep apache 
```

Then you must edit */etc/sudoers* to have that user be able to run the pfctl command without a password. So lets say that you run apache as www. place the following in sudoers :

```
www ALL=(ALL:ALL) NOPASSWD: /sbin/pfctl 
```

Finally in the python script (lets say you call the external command with subprocess)

```
from subprocess import call
call(["sudo","pfctl","-T","theTable","-t","add", "x.x.x.x"]) 
```

But please keep in mind that the whole scheme is really a bad idea and you shouldn't do it that way. get rid of the python script if you can and run the bundled apache 1.3 which is privseped and audited. Run the webserver in a chroot. Never expose the control of your firewall to user input specially when this comes over the web. I am sure that if you elaborate on what you want to do , we could find a much more efficient and secure setup.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T04:48:45.453

You cannot run Python scripts under mod_python as the root user. This is because Apache will always drop privileges to an untrusted user. The only way to get around it would be to recompile Apache from source code and define a magic preprocessor macro which enables the security hole which allows Apache worker processes to run as root.

In summary, don't do it, it is dangerous.

Also be aware the mod_python is no longer maintained or developed and it is questionable as to whether you should use it in the first place.

# vba - 使用 VBA 删除工作表会使 Excel 崩溃

> ID：15896369
> 
> 赞同：2
> 
> 时间：2013-04-09T07:56:17.757
> 
> 标签：vba, excel, excel-2010

当用户单击 Excel 中的图像（按钮）时，我试图删除工作表。但是，这会使 excel 崩溃并重新启动，忘记任何未保存的进度。

这是我的子：

```
Sub DeletePlan()

Application.Calculation = xlCalculationManual
Application.DisplayAlerts = False
Dim SheetNamesToCopy As String

SheetNamesToCopy = ActiveSheet.Name

' Check what addon sheets exists for the media, then add existing ones to string
If CheckSheet("periodeplan", True) = True Then
    ThisWorkbook.SheetS(SheetNamesToCopy & " - periodeplan").Delete
End If

If CheckSheet("ukesplan", True) = True Then
    ThisWorkbook.SheetS(SheetNamesToCopy & " - ukesplan").Delete
End If

If CheckSheet("Input", True) = True Then
    ThisWorkbook.SheetS(SheetNamesToCopy & " - Input").Delete
End If

SheetS("Totalplan").Select
ThisWorkbook.SheetS(SheetNamesToCopy).Delete

Application.DisplayAlerts = True
Application.Calculation = xlCalculationAutomatic

End Sub 
```

应用程序大部分时间都会崩溃。但并非总是如此......有什么想法可能是错的吗？（我已经测试并确认删除功能会导致崩溃，但它并不总是同一张）。

**编辑：**此功能不会删除工作簿中的最后一张工作表。还有20张。我也使用`Application.Calculation = xlCalculationAutomatic`，因为有很多公式，并且我不希望 excel 在删除所有连接的工作表之前计算更改。

任何提示或答案表示赞赏:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T09:19:46.830

当启动宏的按钮位于要删除的工作表之一上时，会发生错误。

**所以答案是：不要创建一个按钮（或链接到宏的图像）来删除它所在的工作表。**

如果有人可以将此错误的原因添加到此答案中，请这样做；）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-17T19:05:30.067

我自己也遇到了这个问题！我将遵循更有经验的设计师来改进这种技术，但作为一般概念，我确实有一个可行的解决方案：

如果您允许宏运行它的过程，然后删除工作表，它不会崩溃。像这样的东西：

```
Sub Delete_This_Sheet()

    Application.OnTime Now + TimeValue("00:00:02"), "Watergate"
    Sheets("Sheet with a death sentence").Visible = False

End Sub

Sub Watergate() 'To make things go away

    Application.DisplayAlerts = False
    Sheets("Sheet with a death sentence").Delete
    Application.DisplayAlerts = True

End Sub
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-12T15:15:18.680

复活这个帖子，因为我有同样的问题并想分享解决方案。

我有一个非常简单的子来删除工作表：

```
Sub deletetraindoc()
Dim ws As Worksheet

Application.ScreenUpdating = False

For Each ws In ThisWorkbook.Sheets

    'This if statement looks for any worksheet that contains the term "Form" 
    'Any worksheet that contains that string will be deleted
    If InStr(ws.Name, "Form") > 0 Then
            Application.DisplayAlerts = False 'Deactivates the standard deletion confirmation
            ws.Activate
            ws.Delete 'Deletes the worksheet
            Application.DisplayAlerts = True 'Reactivates display alerts
    End If
Next
Application.ScreenUpdating = True

End Sub 
```

这不一致地导致崩溃，直到我在删除之前添加了“ws.Activate”行来激活每个工作表，这似乎已经解决了这个问题。我在许多其他对工作表执行操作的情况下遇到了这个问题，但它通常会导致对象错误而不是完全崩溃。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-15T17:32:07.247

我发现在 Office 2013 中，您不能放置与该宏更改的单元格重叠的按钮。有趣的是，如果更改本质上是数字，则不会发生这种情况，但如果是字母数字，当您尝试删除该选项卡时，它会炸毁 excel。事实证明，当尝试手动删除选项卡（通过鼠标单击）或宏尝试删除选项卡时，它会炸毁它。因此，我从该线程中吸取的教训并将其应用于我的具体情况是永远不要在它更改的单元格上放置一个开发按钮（在我的情况下，它只是一个提供宏正在执行的状态的单元格）。Excel 2013 不喜欢这种情况，而 Excel 2010 根本不在乎。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T12:10:01.207

我相信你是对的，解决这个问题的唯一方法是确保这个宏在**总计划**表上。此外，您正在执行一些不必要的步骤，并且选择工作表应该是激活并选择一个单元格。

```
Sub DeletePlan()    
Application.Calculation = xlCalculationManual
Application.DisplayAlerts = False
Dim SheetNamesToCopy As String

SheetNamesToCopy = ActiveSheet.Name

'dont delete total plan
If sheetnames = "Totalplan" then exit sub      

SheetS("Totalplan").Activate
Activesheet.Cells(1,1).select  

'Turn off errors if sheet doesn't exist 
On error resume next 
ThisWorkbook.SheetS(SheetNamesToCopy & " - periodeplan").Delete
ThisWorkbook.SheetS(SheetNamesToCopy & " - ukesplan").Delete
ThisWorkbook.SheetS(SheetNamesToCopy & " - Input").Delete
ThisWorkbook.SheetS(SheetNamesToCopy).Delete
On error goto 0

Application.DisplayAlerts = True
Application.Calculation = xlCalculationAutomatic

End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-05T01:33:25.607

您**可以**从活动工作表上的按钮（或图像）删除活动工作表。你只需要解决它。

```
ActiveSheet.Move before:=Worksheets(1)
Worksheets(2).Activate
Worksheets(1).Delete 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-29T22:19:03.707

我有一个类似但不相同的问题。我有一个使用以下命令删除所有图表的宏，但尽管它运行正确，但 Excel 2013 在我尝试保存文件时注定会失败，并且会通过恢复到以前保存的情况来“恢复”，丢弃任何后续工作：

哦，它运行良好，直到我从 Excel 2010 迁移到 2013，同时更改为 Windows 10。厄运的命令是：

```
ThisWorkbook.Charts.Delete 
```

感谢上面答案的一些启发，我首先在删除操作之前插入了一个保存，然后按如下方式更改了删除（事实证明，保存毕竟不是必需的，但我喜欢将它们放在那里，即使我将它们注释掉):

```
Dim graphSheet As Chart
ActiveWorkbook.Save
For Each graphSheet in this Workbook.Charts
graphSheet.Delete
ActiveWorkbook.Save
Next graphSheet 
```

我还应该提到，`Application.DisplayAlerts = False`在 for 循环之前有一个前面，当然`Application.DisplayAlerts = True`在 Next... 语句之后有一个删除不需要的语句

> 你确定要做这种类型的问题吗？

再次感谢您的贡献者的灵感。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-10T22:38:56.233

我想要一个可以删除工作表的按钮，因为工作簿受到保护并且可以“导出”结果但不能删除不需要的结果。

我的简单解决方法是让宏隐藏工作表，然后删除最后一个隐藏工作表，这样文件就不会变得很大，有几十个隐藏工作表。

我在一个名为“DeleteSheet”的隐藏工作表中创建了一个范围，用于存储隐藏工作表的名称。

* * *

```
Sub Delete_Sheet()

ActiveWorkbook.Unprotect Password:="Patrick2017"

ActiveSheet.Unprotect Password:="Patrick2017"

On Error Resume Next

' (In event there is no hidden sheet or the sheet is already deleted, resume next)

'The below finds the name of the previously hidden sheet to delete, and stores it.

Dim DeleteSheet As String
DeleteSheet = Range("DeleteSheet")

'The below is to avoid the main sheet being deleted

If ActiveSheet.Name = "POAL Calculator" Then     
Exit Sub                                        
End If

' The below stores the current sheets name before hiding, for deleting next time the 
' macro is run

Range("DeleteSheet") = ActiveSheet.Name          
ActiveWindow.SelectedSheets.Visible = False 

' The below deletes the sheet previously hidden

Application.DisplayAlerts = False 
Sheets(DeleteSheet).Delete

ActiveWorkbook.Protect Password:="Patrick2017"
Application.DisplayAlerts = True

End Sub 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-19T09:43:26.460

将按钮代码移动到模块中怎么样？

我在 Excel 2016 中遇到了一个问题，如果代码在模块中，Option explicit 不起作用，但如果代码在模块中，那么您“应该”能够删除按钮所在的工作表。

# ruby - How to fill a online form automatically using ruby?

> ID：15896370
> 
> 赞同：1
> 
> 时间：2013-04-09T07:56:17.843
> 
> 标签：ruby, rubygems, standard-library

I am wondering how I can fill an online form automatically . I am new to ruby development , done this with python .

More Specifically i want to enter 10 digit pnr no "[http://irctc-pnr-status.com/](http://irctc-pnr-status.com/)" and then click enter.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:06:09.167

只需将您的值作为参数**lccp_pnrno1**发送，然后解析 response.body

```
require 'net/http'
require 'uri'     
response = Net::HTTP.post_form(URI.parse('http://irctc-pnr-status.com/'), 
                               {'lccp_pnrno1'=>'VALUE'}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T08:06:16.790

看看[机械化宝石](http://mechanize.rubyforge.org/)。这允许您以编程方式执行 Web 请求，包括填写表格和提交。

# php - How to set page title in single page site

> ID：15896371
> 
> 赞同：0
> 
> 时间：2013-04-09T07:56:20.463
> 
> 标签：php

Hi I have a single page ajax website the single page is basically loading all the pages I would like to set the page title depending on the current view.

I have tried using this

```
<title><!--TITLE--></title>
    <?
$pageContents = ob_get_contents (); // Get all the page's HTML into a string
ob_end_clean (); // Wipe the buffer

// Replace <!--TITLE--> with $pageTitle variable contents, and print the HTML
echo str_replace ('<!--TITLE-->', $pageTitle, $pageContents);
?> 
```

I have then added the titles to the page links like this

```
 <li class="menu-link">
        <a href="index.php?page=home"><img src="images/menu/home.png" width="72" height="72" alt="Home" />Home</a>
        <?php $pageTitle = 'Saunders-Solutions Freelance Design and Development'; ?>
    </li>
    <li class="menu-link">
        <a href="index.php?page=about"><img src="images/menu/about.png" width="72" height="72" alt="About" />About</a>
        <?php $pageTitle = 'About Saunders-Solutions Freelance Design and Development';  ?>
    </li> 
```

however it always shows the same title for all pages any help appreciated

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:09:29.123

你能打印 HTML 吗？适合我。

```
print "<TITLE>".$pageTitle."</TITLE>"; 
```

然后只需删除设置标题的任何其他代码：

例如：

```
<title><!--TITLE--></title> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:58:18.000

在 JavaScript 中：

```
document.title = "New Title"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:59:45.393

变量 $pageTitle 似乎是在用 str_replace 替换后定义的。也许您可以发布更多代码以查看问题所在

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T08:25:35.570

```
<?
$TITLE[home]="Saunders-Solutions Freelance Design and Development";
$TITLE[about]="About Saunders-Solutions Freelance Design and Development";
?>

<title><?=$TITLE[$_GET[page]]?></title>

<li class="menu-link">
        <a href="index.php?page=home"><img src="images/menu/home.png" width="72" height="72" alt="Home" />Home</a>            
    </li>
    <li class="menu-link">
        <a href="index.php?page=about"><img src="images/menu/about.png" width="72" height="72" alt="About" />About</a>

    </li> 
```

# android - 水平旋转木马或 ScrollView 与图像上的文本

> ID：15896373
> 
> 赞同：3
> 
> 时间：2013-04-09T07:56:28.897
> 
> 标签：android

我试图找出从 android >= 2.1 设计水平滚动视图的最佳方法，在图像上带有一些文本，当滚动到结束时，它开始再次显示第一个项目，因此轮播行为。

您可以继续水平滚动，永远，当到达终点时，第一个项目会再次出现，例如向左滑动滚动时。它可以是带有适配器的视图寻呼机、轮播但不是水平滚动视图，因为它不支持某些 android 设备。

![在此处输入图像描述](https://i.stack.imgur.com/T0vKP.png) 任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:01:33.013

为什么不使用[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)？因为它在[支持库](http://developer.android.com/tools/extras/support-library.html)中可用。我会坚持使用 ViewPager 而不是 Horizo​​ntalScrollView 或 Gallery。您可以从我的 github[查看 ViewPager 的示例。](https://github.com/lalit3686/ViewPagerDemo)

**更新**

要在 Fragment 中显示多个视图，您可以使用[getPageWidth()](http://developer.android.com/reference/android/support/v4/view/PagerAdapter.html#getPageWidth%28int%29)。[在这里](http://commonsware.com/blog/2012/08/20/multiple-view-viewpager-options.html)查看以供参考。

# javascript - AngularJS 通过 HTTP 状态码导航。（MVC设计）

> ID：15896380
> 
> 赞同：1
> 
> 时间：2013-04-09T07:56:47.603
> 
> 标签：javascript, rest, angularjs, navigation, http-status-code-404

我正在尝试将一个非结构化的 jQuery 应用程序转换为 MVC AngularJS，但有一次我有点迷路或者我只是不明白......（不幸的是，我不是 JavaScript 之神，所以错误也可能存在）

这是原始 jQuery 代码的片段。

```
$.ajax({
type: "GET",  
    url: "rest/users/" + userId + "/requests",  
                accept: "application/json; charset=utf-8",
                statusCode: {
                    200: function(data) {               
                        // do something
                    },
                    404: function() {
                        window.location = 'index.html';
                    },
                    500: function() {
                        alert("Server Error!");
                    }
                }                   
            }); 
```

一个简单的 REST 调用，其中使用 HTTP 响应代码进行导航。不幸的是，我无法在 AngularJS 中运行它。

这是我的控制器：

```
// Inside the RequestController
$scope.requests = RequestModel.getRequestsByUser($rootScope.currentUser.userId);  
    if($scope.requests.statusCode == 200) { 
        // do something         
    }
    else if($scope.requests.statusCode == 404) {
        $location.path('/notFound');
    } else if ($scope.requests.statusCode == 500) {
        $location.path('/error');
    }; // PROBLEM: The if/else statement is never true since statusCode is not available 
```

这是我的模型：

```
// Inside the RequestModel
this.getRequestsByUser = function(userId) {

    var RequestResource = $resource('../rest/users/' + userId + "/requests");
    var requestList = RequestResource.get({}, function(response, getResponseHeaders) {

        // PROBLEM: The property "stausCode" is "unavilable" at the Controller even if it was set here
        requestList.statusCode = 200;
        console.log("SUCCESS: getRequestsByUser() -> StatusCode: requestList.statusCode");
        console.log(requestList);

    }, function(response, getResponseHeaders) {

        requestList.statusCode = response.status;
        console.log("FAILED: getRequestsByUser() -> StatusCode: " + response.status);

    });
    return requestList;
}; 
```

这不起作用，因为“statusCode”在我的控制器中“不可用”。REST 调用有效，并且数据绑定到视图也很好。我只是无法实现“导航部分”。我是否错过了诸如 $watch 属性、异步行为之类的东西，还是我的方法不正确？！

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:46:02.413

You can make better use of resource parameter mapping in your service:

```
// Inside service
this.requestsByUser = $resource('../rest/users/:userId/requests', {userId:'@userId'}); 
```

That way you'll be able to reuse the same resource for different rest actions (eg. post, delete).

And controller code to handle statuses (response handlers were moved to controller):

```
// Inside the RequestController
$scope.requests = RequestModel.requestsByUser
    .get(
      {userId: $rootScope.currentUser.userId},

      function(response) { // success handler
          if(response.status == 200) {
              // do something         
          }
      },

      function(response) { // error handler
          if(response.status == 404) {
              $location.path('/notFound');
          } else if (response.status == 500) {
              $location.path('/error');
          }
      }
    ); 
```

Another way around is to use $q service to return promises from your service. But provided solutions seems cleaner to me

# html - 使用 HTTP URL 查询字符串

> ID：15896394
> 
> 赞同：1
> 
> 时间：2013-04-09T07:57:36.247
> 
> 标签：html, http, url, browser, web

我正在尝试使用浏览器对具有多个查询字符串的 URL 进行 HTTP GET。以下是我的观察

```
http://192.168.0.1:80/mycontent/?key1=value1 //Works.
http://192.168.0.1:80/mycontent/?key1=value1&key2=value2 //Doesen't work. 
```

这里的问题：

*   我发现很难弄清楚附加查询字符串的正确格式是什么
*   `&amp`当我们放入浏览器时我们应该使用吗？
*   有没有办法可以找到我在 URL 中输入的查询字符串的有效性（服务器中的可用性）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:02:01.807

您应该`&amp;`在将链接写入 HTML 时使用，例如：

```
<a href="http://192.168.0.1:80/mycontent/?key1=value1&amp;key2=value2">Example</a> 
```

但在地址栏中输入 URL 或直接在 JavaScript 中使用时（例如）不会。

您的格式是正确的，因此您应该能够同时`key1`在`key2`请求集合中获取。根据您在服务器上使用的语言，用于此的技术会有所不同。

# android - 带有Textview和2个Edittext的Listview在android中的单行中

> ID：15896399
> 
> 赞同：0
> 
> 时间：2013-04-09T07:57:50.767
> 
> 标签：android, listview

我想在一行中有一个“Textview”和2个“Edittext”。我尝试了以下代码：

xml:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"

   >

    <TextView 
        android:id="@+id/vegtext"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"        
       />

    <EditText 
        android:id="@+id/vegquantity"   
        android:hint="Qty"    
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:layout_weight="1"
        />

     <EditText 
        android:id="@+id/vegprice"       
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:hint="price"
        android:layout_weight="1"
       />

</LinearLayout> 
```

适配器中的获取视图：

```
@Override
    public View getView(int position, View convertview, ViewGroup parent) 
    {
         VeglistHolder holder;
        // TODO Auto-generated method stub
        if(convertview == null)
        {
            LayoutInflater inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertview  = inflater.inflate(R.layout.veglistrow, null); 

             holder = new VeglistHolder();

             holder.text = (TextView) convertview
                        .findViewById(R.id.vegtext);

             holder.Qtyedit = (EditText) convertview
                        .findViewById(R.id.vegquantity);

             holder.priceedit = (EditText) convertview
                        .findViewById(R.id.vegprice);

             convertview.setTag(holder);            

        }
        else
        {
            holder = (VeglistHolder) convertview.getTag();      
        }

         holder.text.setText(vegitems[position]);
        return convertview;
    } 
```

但是该行中不存在 Edittext。“TExtview”下方也出现了一些空白。我搜索了有关此的“很多”帖子，但我无法解决这个问题。请帮我解决这个问题..提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:02:34.013

尝试在主布局中使用 weightSum 进行相等分区，如下所示

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:weightSum="3"
android:orientation="vertical" > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:15:26.837

使用真实布局。修改属性以满足您的要求

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
 >

<TextView
    android:id="@+id/textView1"
    android:layout_width="60dp"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="58dp"
    android:text="TextView" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="60dp" //set to whatever you desire
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView1"
    android:layout_alignBottom="@+id/textView1"
    android:layout_marginLeft="30dp"
    android:layout_toRightOf="@+id/textView1"
    android:ems="10" >

    <requestFocus />
</EditText>

<EditText
    android:id="@+id/editText2"
    android:layout_width="60dp"// //set to whatever you desire
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/editText1"
    android:layout_alignBottom="@+id/editText1"
    android:layout_alignParentRight="true"
    android:layout_marginRight="70dp"
    android:ems="10"
    android:inputType="textPersonName" />

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T08:05:35.133

那么您的问题是您将宽度和高度设置`TextView`为`fill parent`

# python - 如何解析模板标签的Django模板

> ID：15896408
> 
> 赞同：9
> 
> 时间：2013-04-09T07:58:13.047
> 
> 标签：python, django

## 情况

我正在编写一个检查 Django 模板的检查程序。例如，我想检查是否所有使用`url`模板标签的 Django 模板，在第一个参数上使用引号，以便它与 Django 1.5 兼容。我还想检查他们是否已包含`{% load url from future %}`在他们的模板中。

例如，如果我的程序解析以下 Django 模板，我希望它引发异常。

```
{% extends 'base.html' %}
<td>
  <a href="{% url first second %}">
  </a>
</td> 
```

但是这个模板应该毫无例外地被解析。

```
{% extends 'base.html' %}
{% load url from future %}
<td>
  <a href="{% url 'first' second %}">
  </a>
</td> 
```

我不限于这个简单的例子。我还有其他解析要做。例如，我想检查模板中存在多少`load`模板标签。

## 问题

我怎样才能优雅地解决这个解析问题？

*   我不想使用正则表达式。
*   我这个 Django 它自己在这方面有一些实用程序。我认为使用它们是一个好主意，但我不知道如何。
*   我想与 Django 分开运行该程序。所以我不希望 Django 自己运行程序（使用`render_to_response`）。（**这很重要**）

## 代码

请告诉我一些可以解决我提到的示例的代码。我想检测是否`{% load url from future %}`在代码中。另外我想检查每个`url`模板标签并检查第一个参数是否被引用。

**奖金**：

*   我希望能够看到 Django 从此模板生成的渲染 HTML，并对其进行 HTML 解析。（例如使用 PyQuery）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T18:38:18.533

你说...

> 我想检查是否所有使用 url 模板标记的 Django 模板，在第一个参数上使用引号，以便它与 Django 1.5 兼容。

...和...

> 我不想使用正则表达式。

...因为...

> 结果可能会变成一个巨大的意大利面条代码

...但是，坦率地说，从头开始编写解析器可能比使用正则表达式更加混乱。我看不出像这样简单的正则表达式有什么乱七八糟的......

```
"{% *url +[^']" 
```

...而且我怀疑是否有一种基于非正则表达式的解决方案会如此简洁。

关于...

> 我还想检查他们是否已包含 `{% load url from future %}`在他们的模板中。

如果您的目的是确保 Django 1.5 的兼容性，那么这是没有意义的。根据[Django 1.5 发布说明](https://docs.djangoproject.com/en/dev/releases/1.5/)，新式 url 标签语法默认启用，因此该行`{% load url from future %}`不会有任何效果。

在 1.5 之前的版本中，只需将...

```
import django.template
django.template.add_to_builtins('django.templatetags.future') 
```

...at the bottom of your `settings.py` and be done with it. :-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-05T04:33:46.723

You can also use the `compile_string` method.

```
 >>> from django.template.base import *
 >>> settings.configure()
 >>> compile_string("<a href='ab'></a>{% cycle 'row1' 'row2' as rowcolors %}", None)
 >>> [<Text Node: '<a href='ab'></a>'>, <django.template.defaulttags.CycleNode object at 0x10511b210>] 
```

The compile string method is utilized by the `Template` class and is the method used to produce the node list. Tested in Django 1.8 Alpha.

[https://github.com/django/django/blob/1f8bb95cc2286a882e0f7a4692f77b285d811d11/django/template/base.py](https://github.com/django/django/blob/1f8bb95cc2286a882e0f7a4692f77b285d811d11/django/template/base.py)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T17:24:18.170

Next code still uses django, but it can check if syntax is correct:

```
>>> from django.template import Template
>>> from django.template.defaulttags import URLNode
>>> t = Template("{% load url from future %}\n{% url projects_list company.slug %}")
>>> for node in t.nodelist:
...     if isinstance(node, URLNode):
...         for arg in node.args: print(arg)
... 
company.slug
>>> t2 = Template('{% load url from future %}\n{% url "projects_list" company.slug }')
>>> for node in t2.nodelist:
...     print(node)
... 
<django.template.defaulttags.LoadNode object at 0x32145d0>
<Text Node: '
{% url "projects_list" c'>
>>> 
```

As you see last node is not URLNode

# c# - 通过数据库提取图像

> ID：15896413
> 
> 赞同：0
> 
> 时间：2013-04-09T07:58:22.140
> 
> 标签：c#, sql, database, image, extract

我正在从数据库中提取图像（SQL Server 2008）我正在使用 WPF 应用程序，使用 Grid_Loaded 事件来加载页面。我发现的示例主要是使用组合框来选择图像的 ID 并显示它。但是我不想使用组合框。

我有几行代码我已经在互联网上找到并找到了，如果有人帮助我，将不胜感激！

```
private void LoadImages()
    {
        try
        {

            string connstr = @"Server=CTGPJLPC21\SQLEXPRESS;Database=testing;Trusted_Connection=True;";
            using (SqlConnection conn = new SqlConnection(connstr))
            {
                conn.Open();
                using (SqlDataAdapter adapter = new SqlDataAdapter("SELECT * FROM test_table", conn))
                {
                    dset = new DataSet();
                    adapter.Fill(dset);
                }
                DataTable dt = dset.Tables[0];
                foreach (DataRow row in dt.Rows)
                {
                    if (dset.Tables[0].Rows.Count == 1)
                    {
                        byte[] data = (byte[])dset.Tables[0].Rows[0][0];

                        MemoryStream strm = new MemoryStream();

                        strm.Write(data, 0, data.Length);

                        strm.Position = 0;

                        System.Drawing.Image img = System.Drawing.Image.FromStream(strm);

                        BitmapImage bi = new BitmapImage();

                        bi.BeginInit();

                        MemoryStream ms = new MemoryStream();

                        img.Save(ms, System.Drawing.Imaging.ImageFormat.Bmp);

                        ms.Seek(0, SeekOrigin.Begin);

                        bi.StreamSource = ms;

                        bi.EndInit();

                        myImg.Source = bi;
                    }
                }
                }
        }
        catch (Exception ex)
        {

            MessageBox.Show(ex.Message);

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T06:14:32.750

```
long bufferSize = dataReader.IsDBNull(1) ? 0 : dataReader.GetInt64(1);
if (bufferSize > 0)
{
    j.PictureContent = new byte[bufferSize];
    bufferSize = dataReader.GetBytes(1, 0, j.PictureContent, 0, Convert.ToInt32(bufferSize));
} 
```

其中 j 是一个类实例，而 j.PictureContent 是一个字节 []。

# windows-runtime - 如何在 WinRT 中擦除画布上的笔划？

> ID：15896414
> 
> 赞同：1
> 
> 时间：2013-04-09T07:58:31.697
> 
> 标签：windows-runtime, erase

我想使用 C# 逐点擦除画布上的 InkStroke，如何解决？

到目前为止，我只是发现InkManipulationMode.erasing模式是用来擦除inkStroke的，但问题是它会擦除整个inkStroke。我想要的是逐点擦除。

# css - webkit 没有将样式级联到 svg 中？

> ID：15896415
> 
> 赞同：1
> 
> 时间：2013-04-09T07:58:32.460
> 
> 标签：css, svg, webkit, cross-browser

我想通过添加/删除外部 div 的类来隐藏/显示 SVG 的一部分（以及其他一些元素）。这似乎不适用于跨浏览器。示例文档：

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>webkit non-cascading svg</title>
    <style type="text/css">
      #shape1, #ul1
      {
          display: none;
      }
      #shape2, #ul2
      {
          display: none;
      }

      .show #shape1, .show #ul1
      {
          display: inline-block;
      }
      .show #shape2, .show #ul2
      {
          display: inline-block;
      }
    </style>
  </head>
  <body>
    <div>
      <p>This svg should be hidden:</p>
      <svg width="100" height="100">
        <g id="shape1">
          <rect x="0" y="0" width="40" height="20" fill="yellow" stroke="black" stroke-width="3" />
        </g>
      </svg>
      <p>This ul should be hidden:</p>
      <ul id="ul1"><li>hidden list</li></ul>
    </div>

    <hr/>

    <div class="show">
      <p>This svg should be shown:</p>
      <svg width="100" height="100">
        <g id="shape2">
          <rect x="0" y="0" width="40" height="20" fill="yellow" stroke="black" stroke-width="3" />
        </g>
      </svg>
      <p>This ul should be shown:</p>
      <ul id="ul2"><li>shown list</li></ul>
    </div>
  </body>
</html> 
```

可在[http://jsfiddle.net/unhammer/qA3BX/1/](http://jsfiddle.net/unhammer/qA3BX/1/)进行测试——它在 Firefox 和 Opera (Presto) 中按预期工作，但在 Chromium 中不工作。是我的 CSS 错误，还是 Chromium 中的错误？

（Browsershots.org 告诉我 Safari 的行为类似于 Chromium。）

# java - 露天活动新工作流程添加

> ID：15896416
> 
> 赞同：0
> 
> 时间：2013-04-09T07:58:35.343
> 
> 标签：java, workflow, alfresco, jbpm, activiti

我有露天社区 4.0.e。

我为其中一项任务部署了新的工作流程并使用了任务侦听器；

```
<activiti:taskListener event="create" class="java.JavaBpmnTest"></activiti:taskListener> 
```

这是我的java类

```
package java;

import org.activiti.engine.delegate.DelegateExecution;
import org.activiti.engine.delegate.JavaDelegate;

public class JavaBpmnTest implements JavaDelegate{

@Override
public void execute(DelegateExecution arg0) throws Exception {
    /* my code */
}

/**
 * @param args
 */

} 
```

我的问题是把这个 java 文件放在哪里以便我的工作流程可以使用它？如何部署这个java文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:27:28.213

您可以创建 jar 文件并将其放在 alfresco/WEB-INF/lib 下。

当 alfresco 运行时，您的所有导入将已经加载到类路径中。

# asp.net - 如何使用 Visual Studio 2012 创建 .Net 2.0 版网站？

> ID：15896420
> 
> 赞同：0
> 
> 时间：2013-04-09T07:59:02.847
> 
> 标签：asp.net, ajax

我使用 Visual Studio 2012 创建了一个网站。它工作得很好。问题是我必须将它部署在仅具有 .Net Framework 2.0 的服务器上。所以我使用 Visual Studio 2012 创建了另一个网站，并将其版本设置为 2.0。在复制了一个页面的代码后，我尝试运行它。但我收到错误“未知的服务器标签 asp:ScriptManager”和“未知的服务器标签 asp:UpdatePanel”。我需要它们，因为我必须在我的页面中使用 PageMethods。如何使用 ScriptManager 和 UpdatePanel 创建 .Net Framework 2.0 网站而不会出现任何错误？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:15:16.520

您不必重新创建项目。转到项目设置，应用程序，然后更改“目标框架”。

为了清楚地回答你的问题，答案是：你不能。

正如 Jamie Keeling 所建议的，[脚本管理器](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.aspx)和[更新面板](http://msdn.microsoft.com/fr-fr/library/system.web.ui.updatepanel.aspx)随 .Net Framework 3.5 版一起提供。

您将不得不找到其他组件或某种解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:19:43.870

如果您计划在 .NET 2.0 中使用脚本管理器和更新面板，您可能必须安装[ASP.NET 2.0 AJAX Extensions 1.0 。](http://www.microsoft.com/en-us/download/details.aspx?id=883)在 .NET 3.5 之前，Ajax 作为一个单独的库提供。

# object - 持久存储将布尔值保存为对象

> ID：15896421
> 
> 赞同：0
> 
> 时间：2013-04-09T07:59:03.160
> 
> 标签：object, blackberry, persistent, persistent-storage

我正在开发一个 BlackBerry 应用程序`String`并`boolean`在`Persistent Store`. 我知道当从手机中删除/卸载应用程序时，字符串和布尔值不会从 Persistent 中删除。我也知道，为了删除这些值，我需要将其存储在“项目”特定类中。我一直在努力解决这个问题，所以想要一个**临时**的工作。我正在保存一个布尔值，以确定应用程序应该加载哪个屏幕。

```
PersistentStoreHelper.persistentHashtable.put("flagged",Boolean.TRUE); 

if (PersistentStoreHelper.persistentHashtable.containsKey("flagged")) 
        {
           boolean booleanVal = ((Boolean) PersistentStoreHelper.persistentHashtable.get("flagged")).booleanValue();
           if (booleanVal==true)
           {
              pushScreen(new MyScreen());
           }
        }
        else
        {
            pushScreen(new MyScreen(false));
        } 
```

是否可以将此布尔值存储为对象，以便在卸载/删除应用程序时将其删除。如果我错过了什么，请提供帮助并发表评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:11:46.117

再次，我建议您在线更改`PersistentStoreHelper`为此[版本](http://pastebin.com/tka4jQvF)。

当您的应用程序被卸载时，您当然可以从持久存储中删除`Boolean`和`String`删除值，但它们需要**位于**只能存在于您的应用程序中的对象内。

例如：

```
 PersistentStoreHelper store = PersistentStoreHelper.getInstance();
 store.put("flagged", Boolean.TRUE);
 // commit will save changes to the `flagged` variable
 store.commit(); 
```

然后稍后使用以下方法检索它：

```
 PersistentStoreHelper store = PersistentStoreHelper.getInstance();
 boolean isFlagged = ((Boolean)store.get("flagged")).booleanValue(); 
```

使这项工作的关键在我的`PersistentStoreHelper`类中，它将所有内容保存在我/您的应用程序（）独有的**子类**中。您需要将您的或对象存储在该应用程序唯一的子类中，**而不是**普通的.`Hashtable``MyAppsHashtable``String``Boolean``Hashtable`**`java.util.Hashtable`**

 **再一次，请让自己轻松一点，并使用我发布的代码。

**Note:** also, you probably know this, but you may need to reboot your device to see the app, and its persistent store data, fully deleted.

## Update

If you had changed the original `PersistentStoreHelper` class that [I had posted online](http://pastebin.com/tka4jQvF), because you wanted access to the `containsKey()` method, or other methods in the `Hashtable` class, you can solve that problem by simply adding code like this:

```
public boolean containsKey(String key) {
    return persistentHashtable.containsKey(key);
} 
```

to the `PeristentStoreHelper` class. **Please don't** make `persistentHashtable` a `public static` member. As you need to use more `Hashtable` methods, just add *wrappers* for them, like I show above with `containsKey()`. Of course, you can achieve the same thing as `containsKey()` by simply using this code:

```
 boolean containsFlagged = (store.get("flagged") != null); 
```

## Update 2

If you get stuck with old persistent data, that you need to clean out, you can modify `PersistentStoreHelper` to detect and correct the situation, like this (hattip to @adwiv for suggestions):

```
 private PersistentStoreHelper() {
      persistentObject = PersistentStore.getPersistentObject(KEY);

      Object contents = persistentObject.getContents();
      if (contents instanceof MyAppsHashtable) {
         persistentHashtable = (MyAppsHashtable)contents;
      } else {
         // store might be empty, or contents could be the wrong type
         persistentHashtable = new MyAppsHashtable();
         persistentObject.setContents(persistentHashtable);
         persistentObject.commit();
      }
   } 
```**

# java - Spring 布局中组件之间的空间太大

> ID：15896426
> 
> 赞同：3
> 
> 时间：2013-04-09T07:59:15.150
> 
> 标签：java, swing, layout-manager, springlayout

我想手动创建一个 JFrame 并使用 spring 布局来执行此操作。但是，我的最终输出并不好。我的行之间的空间太大了，我的单选按钮之间也是如此：

![示例输出](https://i.stack.imgur.com/vLgEQ.png)

我的代码：

```
public final class NewUserFrame1 extends JFrame {

public NewUserFrame1() {
    add(rowComponent(), BorderLayout.CENTER);
    setLocation(200, 40);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setResizable(false);
    setVisible(true);
    pack();
}

public JPanel rowComponent() {

    JPanel panel = new JPanel();
    JLabel fnamelbl = new JLabel("First name");
    JLabel lnamelbl = new JLabel("Last Name");
    JLabel fntemp = new JLabel();
    JLabel lntemp = new JLabel();
    JTextField fntf = new JTextField(10);
    JTextField lntf = new JTextField(10);
    JLabel gndlnl = new JLabel("Gender");
    JRadioButton malerb = new JRadioButton("Male");
    JRadioButton femalerb = new JRadioButton("Female");
    ButtonGroup bgroup = new ButtonGroup();
    bgroup.add(malerb);
    bgroup.add(femalerb);
    JLabel registnm = new JLabel("Registration ID is:");
    JLabel showreglbl = new JLabel();
    JLabel regtemp = new JLabel();

    panel.add(fnamelbl);
    panel.add(fntf);
    panel.add(fntemp);
    panel.add(lnamelbl);
    panel.add(lntf);
    panel.add(lntemp);
    panel.add(gndlnl);
    panel.add(malerb);
    panel.add(femalerb);
    panel.add(registnm);
    panel.add(showreglbl);
    panel.add(regtemp);

    panel.setLayout(new SpringLayout());
    SpringUtilities.makeCompactGrid(panel, 4, 3, 50, 15, 3, 4);
    return panel;
}

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            NewUserFrame1 newUserFrame1 = new NewUserFrame1();
        }
    });
}
} 
```

现在： ![在此处输入图像描述](https://i.stack.imgur.com/sCCQX.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:14:14.837

1.  您的代码不可编译（缺少导入）。
2.  你写了：

    SpringUtilities.makeCompactGrid(面板, 4, 3, 50, 15, 3, 100);

最后一个参数是 yPad。将其更改为 10（如果需要，可以更改为更低的值），例如：

```
SpringUtilities.makeCompactGrid(panel, 4, 3, 50, 15, 3, 10); 
```

但是仍然-标签会很高等，但这是一个不同的问题。继续使用面板的大小和组件的大小。

如果是单选按钮 - 更改

```
panel.add(malerb);
panel.add(femalerb); 
```

类似于：

```
JPanel radioPanel = new JPanel();
radioPanel.setLayout(new FlowLayout(FlowLayout.LEFT));
radioPanel.add(malerb);
radioPanel.add(femalerb);
panel.add(radioPanel);
panel.add(new JLabel()); 
```

最后一行是必需的，因为您将布局声明为 3 列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:55:19.483

而不是在构造函数中调用`setSize`call `pack`on 。`JFrame``NewUserFrame1`

```
public NewUserFrame1() {
    add(rowComponent(), BorderLayout.CENTER);
    setLocation(200, 40);
    //setSize(800, 500);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setResizable(false);
    setVisible(true);
    pack();
} 
```

`SpringUtilities.makeCompactGrid`还可以通过以下方式更改方法的参数：

```
SpringUtilities.makeCompactGrid(panel, 4, 3, 50, 15, 3, 4);//change yPad to 4 instead of 100\. It sets the vertical height between two rows 
```

# haskell - 如何完全中止 Haskell 运行时？

> ID：15896428
> 
> 赞同：4
> 
> 时间：2013-04-09T07:59:19.153
> 
> 标签：haskell

我有一个功能

```
import System.Exit

exit_and_report_type_mismatch :: String -> IO ExitCode
exit_and_report_type_mismatch error_message = do
    putStrLn error_message
    exitFailure 
```

和另一个像这样的部分

```
interpret_expr :: Vars -> Expr -> Val        
interpret_expr vars (Plus (ConsE _ _) (NumE _)) = exit_and_report_type_mismatch "Type Error: Can only concatenate list (not int) to list" 
```

Haskell 向我抱怨它期待 Val 类型（我定义的另一种数据类型），但它实际上接收类型 IO Exitcode。足够公平 - exit_and_report_mismatch 正在返回不是 Val 的 IO ExitCode。

如何从“exit_and_report_type_mismatch”中完全中止 Haskell 程序？我已经阅读了一些有关 Haskell 异常的信息，但这些解释要么没有意义，要么提到必须从主函数调用 ExitWith，这不是一个选项。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T10:22:37.293

这是[`error`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3aerror)为了什么。从文档中：

> `error :: [[Char](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Char)] -> a`
> [`error`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3aerror)停止执行并显示错误消息。

例如：

```
zsh% runhaskell <<<'main = putStrLn (error "Message") >> print "Not reached."'
runghcXXXX7729.hs: Message 
```

The effect of `putStrLn` is ignored, and the program terminates as soon as the value produced by `error` is demanded (lazy evaluation means that just putting `error` somewhere doesn't immediately cause an error; as you might or might not expect, `let x = error "Message" in putStrLn "Printed"` causes no errors). It *is* possible to catch these exceptions with the functions from [`Control.Exception.Base`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Exception-Base.html), such as [`catch`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Exception-Base.html#v%3acatch), but I've never done this nor have I seen this done.

Also, as a final note, consider avoiding the use of `error`. Partial functions (functions that aren't defined over their entire input domain) are best avoided when possible, as it's much easier to reason about your code with the stronger guarantees total functions provide. It's nice when, as for total functions, `f :: A -> B` really means "the function `f` returns something of type `B`"; for partial functions, `f :: A -> B` means only "*if the function `f` returns*, then what it returns is of type `B`". In your case, this might mean having a type like `interpretExpr :: Vars -> Expr -> Either RuntimeError Val`, or something suitably isomorphic (in the simplest case, perhaps `data Result = Error String | Value Val`, and `interpretExpr :: Vars -> Expr -> Result`).

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T08:16:13.690

这将做到：

```
import System.IO.Unsafe

exit_and_report_type_mismatch :: String -> a
exit_and_report_type_mismatch error_message = unsafePerformIO $ do
    putStrLn error_message
    exitFailure 
```

不过，函数[错误](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:error)可能会起作用。

# log4j - 如何为 jackrabbit-standalone-2.6.0.jar 配置记录器

> ID：15896431
> 
> 赞同：0
> 
> 时间：2013-04-09T07:59:32.840
> 
> 标签：log4j, slf4j, jackrabbit

我正在尝试使用 jackrabbit-standalone-2.6.0.jar 的程序设置日志记录。该档案包含一些 slf4j 包（org.slf4j、org.slf4j.helpers、org.slf4j.impl、org.slf4j.spi），但据我所知没有日志框架。但是当我添加 slf4j-log4j12-1.7.2.jar 时，我收到以下消息：

SLF4J：在 [jar:file:/D:/Anwendungen/EclipsePlugins/Jackrabbit/jackrabbit-standalone-2.6.0.jar!/org/slf4j/impl/StaticLoggerBinder.class] 中找到绑定 SLF4J：在 [jar:file 中找到绑定:/D:/Anwendungen/EclipsePlugins/slf4j-1.7.2/slf4j-1.7.2/slf4j-log4j12-1.7.2.jar!/org/slf4j/impl/StaticLoggerBinder.class]

有没有机会看看这里使用了哪种实施者？

我想配置记录器。现在它将大量的调试消息写入一个名为“jackrabit.log_IS_UNDEFINED”的文件，我迫切需要抑制它。在互联网上有几个提示建议设置记录器，但我不完全明白我需要做什么。“DOMConfigurator”和“PropertyConfigurator”类在包中不可用，但是当添加例如“slf4j-log4j12-1.7.2.jar”时，我得到了上述消息。所以我无法在我的程序中初始化记录器。据说将配置 XML 添加到类路径中。我尝试了这个（在 Eclipse 中，我将包含 XML 的文件夹添加到 BuildPath，然后我从我的 XML 文件创建了一个 jar 文件并将这个 jar 文件添加到 BuildPath）但它没有任何区别。

[我在http://logging.apache.org/log4j/1.2/manual.html](http://logging.apache.org/log4j/1.2/manual.html)中阅读了“默认初始化程序”的描述，但必须声明我根本不明白。这是什么意思： 2\. 将资源字符串变量设置为 log4j.configuration 系统属性的值。指定默认初始化文件的首选方法是通过 log4j.configuration 系统属性。如果未定义系统属性 log4j.configuration，则将字符串变量资源设置为其默认值“log4j.properties”。我必须在哪里指定资源字符串变量？

我的 log4j.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">
         <appender name="Console" class="org.apache.log4j.ConsoleAppender">
             <layout class="org.apache.log4j.PatternLayout">
                <param name="ConversionPattern" value="%d  %-5p  [%c{1}] %m %n" />
            </layout>
        </appender>

        <root>
            <priority value="info" />
            <appender-ref ref="Console" />
        </root>
 </log4j:configuration> 
```

非常欢迎以编程方式或默认初始化配置记录器的任何想法。

乌尔里希

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:07:27.977

从版本 1.6.6 开始，如果在类路径上找到多个绑定，SLF4J 将输出它绑定的框架/实现类的名称。在 " `SLF4J: Found binding`" 行之后，应该有一行以：

```
"SLF4J: Actual binding is of type []" 
```

你错过了那条线吗？

jackrabbit-standalone-2.6.0.jar 的内容表明它附带 logback 作为日志框架。jackrabbit-standalone-2.6.0.jar 文件还附带一个 logback.xml 配置文件。

这是 logback.xml 文件：

```
<configuration>
  <appender name="jackrabbit" class="ch.qos.logback.core.FileAppender">
    <file>${jackrabbit.log}</file>
    <encoder>
      <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level %-40([%thread] %F:%L) %msg%n</pattern>
    </encoder>
  </appender>

  <appender name="jetty" class="ch.qos.logback.core.FileAppender">
    <file>${jetty.log}</file>
    <encoder>
      <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level %-40([%thread] %F:%L) %msg%n</pattern>
    </encoder>
  </appender>

  <logger name="org.mortbay.log" level="${log.level}"
          additivity="false">
    <appender-ref ref="jetty"/>
  </logger>

  <root level="${log.level}">
    <appender-ref ref="jackrabbit"/>
  </root>
</configuration> 
```

与 Unix shell 一样，在 logback.xml 中[${} 中的任何字符串都指定一个 variable](http://logback.qos.ch/manual/configuration.html#variableSubstitution)。

Looking at the logback.xml file above, we can see that the variables ${jackrabbit.log}, ${jetty.log} and "${log.level} are referenced. These variables are set by the prepareServerLog() method in [Main class of jackrabbit-standalone](http://goo.gl/Lf3Ig) [2](http://goo.gl/Lf3Ig). The prepareServerLog() is invoked unless the "-i" or "--cli" option is given on the command line. Are you invoking jackrabbit with -i or --cli?

Anyway, it would be helpful to post here all messages printed by SLF4J as well the command you are using to launch jackrabbit-standalone.

# node.js - 使用 xxx.js 托管时，Node 网站返回“Cannot GET/withTxt”

> ID：15896432
> 
> 赞同：0
> 
> 时间：2013-04-09T07:59:34.610
> 
> 标签：node.js

这是我的代码：

```
 xxx = require('./routes/xxx');

app.get('/myNodePage',routes.eXxxTxt);

app.post('/myNodePage', function(req,res,nextResult){
   xxx.emailHtml(req,res,nextResult);
}); 
```

当我运行它时，我得到“无法获取/我的节点页面”。我究竟做错了什么？为什么我得到这个？

# javascript - 如何在页面加载时忽略 window.onpopstate？

> ID：15896434
> 
> 赞同：39
> 
> 时间：2013-04-09T07:59:43.253
> 
> 标签：javascript, jquery, html

我在玩`window.onpopstate`，有件事让我有点恼火：

> 浏览器倾向于在页面加载时以不同的方式处理 popstate 事件。Chrome 和 Safari 总是在页面加载时发出 popstate 事件，但 Firefox 不会。

[来源](https://developer.mozilla.org/en-US/docs/DOM/window.onpopstate)

我对其进行了测试，是的，在 Chrome 和 Safari 5.1+ 中，popstate 事件在页面加载时触发，但在 Firefox 或 IE10 中没有。

问题是，我只想收听`popstate`用户单击*后退*或*前进*按钮（或通过 javascript 更改历史记录）的事件，但不想在页面加载时执行任何操作。

换句话说，我想将`popstate`事件与*页面加载*与其他`popstate`事件区分开来。

这是我到目前为止所尝试的（我正在使用 jQuery）：

```
$(function() {
  console.log('document ready');

  setTimeout(function() {
    window.onpopstate = function(event) {
      // Do something here
    }, 10);
}); 
```

基本上我尝试将我的`listener`函数绑定到`popstate`足够晚，以便在页面加载时不绑定，只是稍后。

这似乎可行，但是，我不喜欢这种解决方案。我的意思是，我如何确定为 setTimeout 选择的*超时时间*足够大，但又不会太大（因为我不希望它等待太多）。

我希望有一个更聪明的解决方案！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-09T08:40:37.880

检查事件处理程序`event.state`中的布尔真值：`popstate`

```
window.addEventListener('popstate', function(event) {
    if (event.state) {
        alert('!');
    }
}, false); 
```

To ensure this will work, **always** specify a non-`null` state argument when calling `history.pushState()` or `history.replaceState()`. Also, consider using a wrapper library like [History.js](https://github.com/browserstate/history.js) that provides consistent behavior across browsers.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-09T08:27:28.183

我遇到了类似的问题，我必须验证以确保页面是否已完全加载。

我用过这样的东西：

```
var page_loaded = false;    
window.onpopstate = function(event){
    if(!page_loaded){
       page_loaded = true;
       return false;
     }
    //Continue With Your Code
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-10T15:40:47.620

To react on `popstate` event, you need to push some state onto the session history.

For example add this line to the document ready section:

```
history.pushState(null, null, window.location.pathname); 
```

Not ideal, but it works in Chrome, Firefox and other browsers as well.

Then the event is fired correctly when user clicks on *Back* or *Forward* button, also when `history.back()`, `history.forward()`, `history.go()` methods are called manually. Each time when `popstate` has been invoked, you have to push another state again to make it working.

See also:

*   [Single-Page Apps and HTML5 pushState](http://zinoui.com/blog/single-page-apps-html5-pushstate)
*   [How to Detect Browser Back Button event - Cross Browser](https://stackoverflow.com/q/25806608/55075)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-18T21:32:20.793

It seems none of the browsers are emitting the event on page load any more as of today:

> Browsers used to handle the popstate event differently on page load, but now they behave the same. Firefox never emitted a popstate event on page load. Chrome did until version 34, while Safari did until version 10.0.

Source: [https://developer.mozilla.org/en-US/docs/Web/API/PopStateEvent](https://developer.mozilla.org/en-US/docs/Web/API/PopStateEvent)

# jquery-ui - 使用键盘导航时防止默认的 jquery-ui 选项卡行为

> ID：15896437
> 
> 赞同：5
> 
> 时间：2013-04-09T07:59:51.377
> 
> 标签：jquery-ui, tabs

我正在使用 jquery-ui 选项卡和 jeditable 来内联编辑选项卡标题。但是使用可编辑文本中的光标导航会导致 jquery-ui 导航到它旁边的选项卡。

如何防止 jquery 默认行为（禁用选项卡中的键盘导航）。

干杯，布朗科

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T09:59:58.160

通过以下方式解决了它：

```
$.widget( "ui.tabs", $.ui.tabs, {
    options: {
      keyboard: true
    },
    _tabKeydown: function(e) {
      if(this.options.keyboard) {
        this._super( '_tabKeydown' );
      } else {
        return false;
      }
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-18T06:33:58.520

从这里获得更好的解决方案[http://www.daveoncode.com/2013/09/18/how-to-disable-keyboard-navigation-in-jquery-ui-tabs/](http://www.daveoncode.com/2013/09/18/how-to-disable-keyboard-navigation-in-jquery-ui-tabs/)：

```
jQuery('.foo').tabs({
activate: function(e, ui) {
    e.currentTarget.blur();
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-26T08:32:45.580

初始化选项卡时可以取消绑定 keydown 事件：

```
$('#tabs').tabs({
  create : function() {
    var data = $(this).data('tabs');

    data.tabs.add(data.panels).off('keydown');
  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-19T19:38:58.497

只好自己做这件事。这对我有用：

```
$.widget("ui.tabs", $.ui.tabs, {
    _tabKeydown: function (event) {
        if (event.keyCode !== 38 && event.keyCode !== 40) {
            this._super(event);
        }
    }
}); 
```

您可以使用 event.keyCode 替换任何键组合，甚至可以通过以下方式对其进行自定义：

```
$.widget("ui.tabs", $.ui.tabs, {
    options: {
        overrideKeyCodes: [],
    },
    _tabKeydown: function (event) {
        var isOverride = false;
        if (Object.prototype.toString.call(this.options.overrideKeyCodes) === '[object Array]') {
            for (i = 0; i < this.options.overrideKeyCodes.length; i++) {
                if (event.keyCode === this.options.overrideKeyCodes[i]) {
                    isOverride = true;
                    break;
                }
            }
        }

        if (!isOverride) {
            this._super(event);
        }
    }
});

$('#MyTabs').tabs({ overrideKeyCodes: [ 38, 40 ] }); 
```

或者更好的是，您可以添加自己的自定义行为：

```
$.widget("ui.tabs", $.ui.tabs, {
    options: {
        overrideKeyCodes: {},
    },
    tabKeydown: function (event) {
        if (this.options.overrideKeyCodes.hasOwnProperty(event.keyCode)) {
            if (typeof this.options.overrideKeyCodes[event.keyCode] === 'function') {
                 this.options.overrideKeyCodes[event.keyCode](event, this._super(event));
            }
        }
        else {
            this._super(event);
        }
    }
});

$('#MyTabs').tabs({
    overrideKeyCodes: {
        40: function (event, callback) {
            console.log(event.keyCode);
        },
        38: function (event, callback) {
            console.log(event.keyCode);
            if (callback) {
                callback();
            }
        },
        32: null //just let the space happen
    }
}); 
```

# c# - 如何从一台服务器找出正在另一台服务器上运行的 Windows 服务状态？

> ID：15896438
> 
> 赞同：2
> 
> 时间：2013-04-09T07:59:54.130
> 
> 标签：c#, vb.net

通常，当需要知道现有服务器中的服务状态之一时，通过粘贴以下代码可以很容易地从服务控制器中找到结果：

```
ServiceController sc = new ServiceController("servicename");

if  ((sc.Status.Equals(ServiceControllerStatus.Stopped)) ||
 (sc.Status.Equals(ServiceControllerStatus.StopPending)))
{
  // Start the service if the current status is stopped.
  sc.Start();
} 
```

在这里我想知道另一台机器的服务状态，我怎样才能找出结果，任何人都可以在这种情况下指导我。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T11:07:05.433

ServiceController 的另一个构造函数将机器名称作为第二个参数。[http://msdn.microsoft.com/en-us/library/ssbk2tf3.aspx](http://msdn.microsoft.com/en-us/library/ssbk2tf3.aspx)

你试过了吗？

# android-canvas - 在android中从一个点拖动到另一个点的线图

> ID：15896442
> 
> 赞同：2
> 
> 时间：2013-04-09T08:00:09.770
> 
> 标签：android-canvas

我想制作一个应用程序，当我触摸屏幕上的某个点并拖动到另一个位置时，会在 ACTION_UP 上绘制一条线，然后从 ACTION_UP 位置绘制另一条线到其他点，依此类推。但是我们有这条线之前绘制的不应在绘制新线时消失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T08:59:52.020

```
public class LineDrawerView extends View 
{
    public LineDrawerView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }   

    ArrayList<Rect> lines= new ArrayList<Rect>();
    int x1, y1;
    int x2, y2;
    boolean drawing=false;

    @Override
    protected void onDraw(Canvas canvas) 
    {
        super.onDraw(canvas);

        canvas.drawColor(Color.YELLOW);

        Paint p= new Paint();
        p.setColor(Color.BLACK);

        if (drawing)
            canvas.drawLine(x1, y1, x2, y2, p);
        else
            for (int i=0; i<lines.size(); i++)
            {
                Rect currline= lines.get(i);
                canvas.drawLine(currline.left, currline.top, currline.right, currline.bottom, p);
            }
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) 
    {
        boolean result=false;
        switch (event.getAction()) 
        {
            case MotionEvent.ACTION_DOWN:
                x1=x2= (int)event.getX();
                y1=y2= (int)event.getY();
                drawing=true;
                result=true;
                break;
            case MotionEvent.ACTION_MOVE:
                x2= (int)event.getX();
                y2= (int)event.getY();
                result=true;
                break;
            case MotionEvent.ACTION_UP:
                x2= (int)event.getX();
                y2= (int)event.getY();
                lines.add(new Rect(x1, y1, x2, y2));
                drawing=false;
                result=true;
                break;
        }

        if (result) invalidate();
        return result;
    }
} 
```

# javascript - 特立尼达的屏蔽输入字段

> ID：15896443
> 
> 赞同：1
> 
> 时间：2013-04-09T08:00:13.350
> 
> 标签：javascript, jsf, trinidad

PrimeFaces 有一个`<p:inputMask>`组件，它在输入输入时强制输入适合定义的掩码。

例如：

```
<h:outputText value="Date: " />
<p:inputMask value="#{maskController.date}" mask="99/99/9999"/> 
```

特立尼达有没有等价物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:31:31.417

我通过使用 JQuery 添加 javascript 支持来解决我的问题 - 屏蔽输入插件： [http ://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:59:33.287

你可以这样做：

```
<tr:inputDate id="idDate" value="04/10/2013"
       autoSubmit="true"
       label="Label: ">
    <tr:convertDateTime pattern="MM/dd/yyyy"/>
</tr:inputDate> 
```

另请参阅：[特立尼达标签文档](http://myfaces.apache.org/trinidad/trinidad-api/tagdoc.html)

# iphone - TTTAttributedLabel 中的单词被截断

> ID：15896445
> 
> 赞同：2
> 
> 时间：2013-04-09T08:00:24.977
> 
> 标签：iphone, ios, objective-c

我正在使用 TTTAttributedLabel 但现在当我尝试显示一些链接时，它会从中心切掉单词，就像您在附图中看到的那样，在单词“f”和“un”出现在下一行之后，单词“fun”被截断。但我希望完整的单词应该显示在第一行或下一行。任何帮助。

![在此处输入图像描述](https://i.stack.imgur.com/rsmQ0.png)

![在此处输入图像描述](https://i.stack.imgur.com/tZ0GW.png)

```
if ([_label isKindOfClass:[TTTAttributedLabel class]])
            {
                TTTAttributedLabel *tttLabel=(TTTAttributedLabel *)_label;

                                        [tttLabel setDelegate:self];

                    [tttLabel setDataDetectorTypes:UIDataDetectorTypeLink|UIDataDetectorTypePhoneNumber];
                    [tttLabel setLineBreakMode:NSLineBreakByWordWrapping];

                [tttLabel setText:attributedText];
                if ([dic objectForKey:@"texttolink"]!=nil)
                {
                    [tttLabel addLinkToURL:[NSURL URLWithString:[dic objectForKey:@"hyperlink"]] withRange:[text rangeOfString:[dic objectForKey:@"texttolink"] options:NSCaseInsensitiveSearch]];
                }

            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T12:22:34.043

在最新版本的 TTTAttributedLabel 中，默认`linkAttributes`属性已更新为默认自动换行。确保 label 和 the`linkAttributes`都具有所需的换行模式（`lineBreakMode`label 的属性；`NSMutableParagraphStyle lineBreakMode`for `linkAttributes`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:11:24.780

尝试设置`lineBreakMode`为`NSLineBreakByWordWrapping`：

```
label.lineBreakMode = NSLineBreakByWordWrapping; 
```

# c# - 隔离存储在 Windows Phone 应用程序上不起作用

> ID：15896451
> 
> 赞同：0
> 
> 时间：2013-04-09T08:00:39.063
> 
> 标签：c#, silverlight, mvvm, windows-phone-8, isolatedstorage

我有这个隔离存储功能可以写入存储：

```
public static void WriteIsolatedStorage(object ObjectToStore, StorageType Key)
{

    using (var storage = System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForApplication())
    using (var storageFile = storage.CreateFile(Key.ToString()))
    {
        var xmlSerializer = new System.Xml.Serialization.XmlSerializer(typeof(string));
        switch (Key)
        {
            case StorageType.UserCredentials:
                xmlSerializer = new System.Xml.Serialization.XmlSerializer(typeof(dmWFUserCredentials));
                break;
            case StorageType.BackgroundAgentUserCredentials:
                xmlSerializer = new System.Xml.Serialization.XmlSerializer(typeof(dmWFUserCredentials));
                break;
            case StorageType.UserProfile:
                xmlSerializer = new System.Xml.Serialization.XmlSerializer(typeof(dmWFUser));
                break;
            case StorageType.InboxItems:
                xmlSerializer = new System.Xml.Serialization.XmlSerializer(typeof(ObservableCollection<dmWFInboxItem>));
                break;
            case StorageType.InboxTileItems:
                xmlSerializer = new System.Xml.Serialization.XmlSerializer(typeof(ObservableCollection<dmInboxTileInfo>));
                break;
            case StorageType.DocumentHeaders:
                xmlSerializer = new System.Xml.Serialization.XmlSerializer(typeof(ObservableCollection<dmWFDocumentHeader>));
                break;
            case StorageType.SearchCache:
                xmlSerializer = new System.Xml.Serialization.XmlSerializer(typeof(List<List<dmWFDocumentHeader>>));
                break;
            case StorageType.FacebookProfile:
                xmlSerializer = new System.Xml.Serialization.XmlSerializer(typeof(dmFBUserProfile));
                break;
            case
                StorageType.BaseUrl:
                xmlSerializer = new System.Xml.Serialization.XmlSerializer(typeof(dmWFURLSetting));
                break;
            default:
                break;
        }
        xmlSerializer.Serialize(storageFile, ObjectToStore);
    }

} 
```

然后这是我从这个存储中获取的功能：

```
public static dmWFURLSetting GetBaseUrl(StorageType Key)
{
    try

    {

        using (var storage = System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForApplication())
        {
            using (var storageFile = storage.OpenFile(Key.ToString(), System.IO.FileMode.Open, System.IO.FileAccess.ReadWrite))
            {
                dmWFURLSetting result = new dmWFURLSetting();
                var xmlSerializer = new System.Xml.Serialization.XmlSerializer(typeof(dmWFURLSetting));
                return (dmWFURLSetting)xmlSerializer.Deserialize(storageFile);
            }
        }

    }
    catch (Exception)
    {
        return null;
    }

} 
```

好的，然后这是我如何从前端调用这些方法，然后是 viemodel，我正在使用 mvvm fr 这个手机应用程序。前端调用：

```
public string URL = (WorkflowBase.BaseURL != null ? WorkflowBase.BaseURL.ToString() : ""); 
```

这是后端的公共财产：

```
public static string BaseURL = AccTech.WP8.Helpers.IsolatedStorage.GetBaseUrl(Helpers.IsolatedStorage.StorageType.BaseUrl).BaseUrl.ToString(); 
```

好的，所以奇怪的部分来了，我知道当我在完全关闭后启动模拟器时，隔离的存储（缓存）是完全干净的，所以如果调用这个函数，我将得到一个 Null 返回......正如你在我的前端看到的如果我得到一个空值，则调用我进行内联，然后将其设为“”。所以这是我运行时遇到的错误。PS：如果我将 URL 设为静态，则应用程序可以工作 ![在此处输入图像描述](https://i.stack.imgur.com/F8mAb.png)

好的，这是我尝试逐步完成整个过程时遇到的错误：

![在此处输入图像描述](https://i.stack.imgur.com/xGOoB.png)

我身体上无法正常工作我已经尝试了谷歌提供的所有东西......但没有任何反应，如果有人可以请给我一个答案，我会很高兴。

如果您需要更多数据或信息，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:31:22.350

WorkflowBase.BaseURL != null ，它指向的这个工作流基类从未将公共变量更改为它获得的数据，这就是发生错误的原因！.

所以是的，本周的菜鸟错误！:P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T11:22:16.857

是的，我也遇到了这种类型的异常。但是此异常背后的区域是您的隔离存储不包含您要访问的密钥，因此如果有任何现金访问隔离存储首先检查包含。在 Visual Studio 中还可以通过使用检查隔离存储中有多少个密钥隔离存储对象中的断点。

# excel - 如何将动态创建的向量返回到工作区？

> ID：15896454
> 
> 赞同：0
> 
> 时间：2013-04-09T08:00:41.267
> 
> 标签：excel, matlab, eval

您好，我正在尝试编写一个函数，该函数读取某种类型的电子表格并根据其数据动态创建向量，然后将所述向量返回到工作区。

我的 xlcs 由行构成，第一行有一个字符串，它应该成为向量的名称，其余行包含构成向量的数字。

这是我的代码：

```
function [ B ] = read_excel(filename)
%read_excel a function to read time series data from spreadsheet

% I get the contents of the first cell to know what to name the vector
[nr, name]=xlsread(filename, 'sheet1','A2:A2');

% Transform it to a string
name_str = char(name);

% Create a filename from it
varname=genvarname(name_str);

% Get the numbers which will make up the vector
A=xlsread(filename,'B2:CT2');

% Create the vector with the corect name and data
eval([varname '= A;']);

end 
```

据我所知，向量是正确创建的，但我不知道如何将其返回到工作区。

最好该解决方案应该能够返回不确定的 nr 个向量，因为这只是一个原型，我希望该函数一次返回用户选择的 nr 个向量。

更准确地说，创建了向量 varname，如果我添加，我可以在脚本中使用它：

```
eval(['plot(',varname,')']) 
```

它将绘制矢量，但出于我的目的，我需要将矢量 varname 返回到工作区以在脚本运行后持续存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:15:28.620

I think you're looking for `evalin`:

```
evalin('base', [varname '= B;']); 
```

(which will not work quite right as-is; but please read on)

However, I strongly advise against using it.

It is often a lot less error-prone, usually considered good practice and in fact very common to have *predictable* outcomes of functions.

From all sorts of perspectives it is very undesirable to have a function that manipulates data beyond its own scope (i.e., in another workspace than its own), let alone assign unpredictable data to unpredictable variable names. This is unnecessarily hard to debug, maintain, and is not very portible. Also, using this function inside other functions does not what someone who doesn't know your function would think it does.

Why not use smoething like a structure:

```
function B = read_excel(filename)

    ...

    B.data = xlsread(filename,'B2:CT2');
    B.name = genvarname(name_str);
end 
```

Then you always have the same name as output (`B`) which contains the same data (`B.data`) and whose `name` you can also use to reference other things dynamically (i.e., `A.(B.name)`).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:12:17.623

因为这是一个函数，所以您需要将创建的变量传递给输出变量。我建议您通过结构来完成，因为您不知道要预先输出多少变量。因此，将`eval`行更改为：

```
% Create the vector with the correct name and data
eval(['B.' varname '= A;']); 
```

现在，您应该有一个名为的结构`B`，在运行函数后，该结构在工作区中保持不变，其字段名称等于您动态创建的变量名称。例如，您`varname`现在`X`可以在工作区中以`B.X`.

但是您应该非常仔细地考虑这种代码设计，动态创建变量名称不太可能是最好的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T09:30:41.693

An alternative to `evalin` is the function `assignin`. It is less powerfull than `evalin`, but does exacty what you want - assign a variable in a workspace.

Usage:

```
assignin('base', 'var', val) 
```

# c# - 如何在 C# 中使用替换命令？

> ID：15896456
> 
> 赞同：-8
> 
> 时间：2013-04-09T08:00:53.893
> 
> 标签：c#

```
static void Main(string[] args)
{

    string t="<html>  <head> <link rel='stylesheet' type='text/css' href='http://www.taxmann.com/css/taxmannstyle.css' />  </head>  <body ><html><body style='background-color:Black;font-size:30px;color:#fff;'><html>\r\n<head><link href='http://www.taxmann.com/TaxmannWhatsnewService/Styles/style.css' rel='stylesheet' type='text/css' />\r\n<title>Finmin Aims to Halve Net Bad Loans of PSBs</title>\r\n<style type=\"text/css\">\r\nbody{font-family:Arial, Helvetica, sans-serif; font-size:12px; line-height:18px;text-align:justify;}\r\n.w100{width:100%;}\r\n.fl-l{float:left;}\r\n.ffla{font-family:Arial, Helvetica, sans-serif;}\r\n.fs18{font-size:18px;}\r\n.mart10{margin-top:10px;}\r\n.fcred{color:#c81616;}\r\n.tc{text-align:center;}\r\n.tu{text-transform:uppercase;}\r\n.lh18{line-height:18px;}\r\n</style>\r\n</head>\r\n<body>\r\n<div class=\"w100 fl-l\">\r\n<div class=\"w100 fl-l ffla fs18 mart10 fcred ttunderline tc tu\">Finmin Aims to Halve Net Bad Loans of PSBs</div>\r\n\r\n<div class=\"w100 fl-l lh18 mart10\">Concernedover the rising bad loans of the state-run banks, the finance ministry is working out a plan to reduce their net non-performing assets (NPAs) to 1% of net advances by the end of the current financial year.</div>\r\n\r\n</div>\r\n</body>\r\n</html>\r\n</body></html></body></html>"

    string resultValue = t.Replace("<html><head> <link rel='stylesheet' type='text/css' href='http://www.taxmann.com/css/taxmannstyle.css' /></head> <body ><html>", " <html><head> </head> <body ><html>");  //its not working

    Console.WriteLine(resultValue);

} 
```

这是我的代码但我无法替换`resultValue`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:05:28.460

该`Replace`方法采用*精确的*字符串。

在您的原件中，您有：

```
 />  </head> 
```

但是在替换字符串中你有：

```
 /></head> 
```

空格很重要。

在这种情况下，由于这是 HTML，我建议使用 HTML 解析器而不是`string.Replace`.

两个流行的解析器是[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)和[CsQuery](https://github.com/jamietre/CsQuery)。您可以使用其中任何一个来读取 HTML 并重写您需要的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T08:05:36.010

您使用它的方式很好，但它与您的输入字符串不匹配，因为短语`<html> <head>`与`<html><head>`. 空格使替换失败。

您可以使用正则表达式来匹配标签之间允许空格的位置，或者您可以删除之后的所有空格`>`，然后替换该值。

# android - 使用 Mosquitto 在 mysql 的外部数据库中持久化

> ID：15896458
> 
> 赞同：0
> 
> 时间：2013-04-09T08:01:04.790
> 
> 标签：android, database, persistence, mosquitto

当我配置 mosquitto.conf 文件时，我可以使用默认的 mosquitto.db 实现持久化，但它不能满足我们的需要，所以我想在 mysql 的外部数据库中实现持久化，尽管我在其中添加了代码mosquitto.conf 如下：

```
db_host 127.0.0.1
db_name test
db_username root
db_password 123456 
```

我仍然无法成功，我不知道我是否配置了错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-17T03:11:48.893

看看下面的 Authentication Plugin for Mosquitto Whiccan 可用于 MySQL、CDB、SQLite3 数据库、Redis 键/值存储和 TLS PSK。

[https://github.com/jpmens/mosquitto-auth-plug](https://github.com/jpmens/mosquitto-auth-plug)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T18:37:26.307

恐怕目前除了内置的持久性与 mosquitto 之外，无法使用任何其他东西。

# python - 使用 Python、Ruby 或 LUA 进行游戏开发？

> ID：15896460
> 
> 赞同：-1
> 
> 时间：2013-04-09T08:01:11.700
> 
> 标签：python, ruby, lua, game-engine

我在 Action Script 3 和 C++ 的一些游戏引擎中拥有游戏开发经验。但是，我想提高生产力，所以我想用 Python、ruby 或 LUA 开发一个新项目。这会是个好主意吗？如果是的话，你会推荐哪一个？什么是杀手级游戏开发工具集或引擎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:04:03.877

如果您有任何好处，请使用[Pyglet](http://www.pyglet.org/)。
它是一个针对 OpenGL 的跨平台 Python 版本独立钩子，具有出色的性能。这有点棘手，但它比 Python 世界中的其他任何东西都做得更好。

如果您是初学者，我会选择[Pygame](http://www.pygame.org/)。
这对系统有点负担，但对于现代计算机来说这不是问题..而且，它有用于游戏开发的预打包 API（因此得名）:)

Python 游戏/图形引擎的“官方”列表： [http ://wiki.python.org/moin/PythonGames](http://wiki.python.org/moin/PythonGames)

一些好的：

*   熊猫3D
*   Pyglet
*   游戏
*   Blender3D

# 示例 Pyglet 代码：

```
#!/usr/bin/python
import pyglet
from time import time, sleep

class Window(pyglet.window.Window):
    def __init__(self, refreshrate):
        super(Window, self).__init__(vsync = False)
        self.frames = 0
        self.framerate = pyglet.text.Label(text='Unknown', font_name='Verdana', font_size=8, x=10, y=10, color=(255,255,255,255))
        self.last = time()
        self.alive = 1
        self.refreshrate = refreshrate
        self.click = None
        self.drag = False

    def on_draw(self):
        self.render()

    def on_mouse_press(self, x, y, button, modifiers):
        self.click = x,y

    def on_mouse_drag(self, x, y, dx, dy, buttons, modifiers):
        if self.click:
            self.drag = True
            print 'Drag offset:',(dx,dy)

    def on_mouse_release(self, x, y, button, modifiers):
        if not self.drag and self.click:
            print 'You clicked here', self.click, 'Relese point:',(x,y)
        else:
            print 'You draged from', self.click, 'to:',(x,y)
        self.click = None
        self.drag = False

    def render(self):
        self.clear()
        if time() - self.last >= 1:
            self.framerate.text = str(self.frames)
            self.frames = 0
            self.last = time()
        else:
            self.frames += 1
        self.framerate.draw()
        self.flip()

    def on_close(self):
        self.alive = 0

    def run(self):
        while self.alive:
            self.render()
            # ----> Note: <----
            #  Without self.dispatc_events() the screen will freeze
            #  due to the fact that i don't call pyglet.app.run(),
            #  because i like to have the control when and what locks
            #  the application, since pyglet.app.run() is a locking call.
            event = self.dispatch_events()
            sleep(1.0/self.refreshrate)

win = Window(23) # set the fps
win.run() 
```

* * *

# 关于 Python 3.X 的 Pyglet 的注意事项：

你必须下载**1.2alpha1**否则它会抱怨你没有安装 Python3.X :)

# android - Android Google Map v2 如何调用默认手势？

> ID：15896463
> 
> 赞同：0
> 
> 时间：2013-04-09T08:01:21.983
> 
> 标签：android, google-maps, gesture

我对手势设计很陌生。在 Google map v2 API 中，它允许双击检测 onDoubleTap 手势来放大或缩小。我浏览了一些与此问题相关的问题，但它都基于 MapView 类而不是用于在片段中创建的 GoogleMap。我的项目是基于 MapView 的 GoogleMap 创建的，但是我的时间很短，所以我不想从头开始重写程序。

我想要做的是，如果我按下设备上的一个按钮（比如降低音量）并且只用一根手指在屏幕上单击，就可以执行缩放手势。所以我想问是否可以在没有默认设置的情况下直接执行手势？如果可以，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:08:07.503

缩放操作是使用彼此分开的 2 个手指执行的，就像您在手机中缩放图像一样。您可以在地图对象上监控的其他操作是：

```
map.setOnInfoWindowClickListener(arg0);
map.setOnMapClickListener(arg0);
map.setOnMapLongClickListener(arg0);
map.setOnMarkerClickListener(arg0);
map.setOnMarkerDragListener(arg0); 
```

如果您不想使用双击操作执行缩放，那么您必须自己编写代码，监控双击并在执行时务实地缩放地图。

# android - Android ActionBar在使用九补丁背景时有边框

> ID：15896464
> 
> 赞同：0
> 
> 时间：2013-04-09T08:01:24.603
> 
> 标签：android, android-theme, nine-patch

我正在使用九个补丁 png 作为 Android 应用程序的 windowBackground。但是，我在 ActionBar 周围有一个 1px 的边框。当我使用简单的 png 时，这不会发生。

为了测试这一点，我使用向导创建了一个基本应用程序：

*   安卓：m​​inSdkVersion="10"
*   安卓：targetSdkVersion="17"
*   在 Galaxy Nexus v.4.2.2 上测试

有趣的是，Eclipse 中的 XML 布局预览显示了相同的边框。

/res/values/styles.xml

```
<resources>

    <!--
        Base application theme, dependent on API level. This theme is replaced
        by AppBaseTheme from res/values-vXX/styles.xml on newer devices.
    -->
    <style name="AppBaseTheme" parent="android:Theme.Light">
        <!--
            Theme customizations available in newer API levels can go in
            res/values-vXX/styles.xml, while customizations related to
            backward-compatibility can go here.
        -->
    </style>

    <!-- Application theme. -->
    <style name="AppTheme" parent="AppBaseTheme">
        <!-- All customizations that are NOT specific to a particular API-level can go here. -->

        <item name="android:windowBackground">@drawable/test4</item>
    </style>

</resources> 
```

比较效果的两张截图（不，这不是真实背景，只是用于测试的一张 :-) 如您所见，ActionBar 一直插入 1px。

添加 - 我尝试了一个手动创建的 9patch 和一个使用 Google 的 draw9patch 工具。

![使用 9-patch 背景](https://i.stack.imgur.com/6O3rh.png) ![使用简单的 png 作为背景](https://i.stack.imgur.com/lkUCE.png) ![9-patch png](https://i.stack.imgur.com/GdKA1.png)

# ios - 在后台线程中上传大图像。

> ID：15896465
> 
> 赞同：0
> 
> 时间：2013-04-09T08:01:27.963
> 
> 标签：ios, grand-central-dispatch

我需要将图像上传到网络服务。下面是我返回上传图片的代码片段。图像尺寸非常大（大约 6Mb）。我正在使用 GCD 在后台线程中上传该图像。

```
 if([VSCore ConnectedToInternet ])
       {
         bgTask = [[UIApplication sharedApplication]beginBackgroundTaskWithExpirationHandler: ^{
                            dispatch_async(dispatch_get_main_queue(), ^{
                                //[application endBackgroundTask:self->bgTask];
                                //self->bgTask = UIBackgroundTaskInvalid;
                            });
                        }];

                        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

                            [vrs write:data toURI:URI];

                           [[UIApplication sharedApplication]endBackgroundTask:bgTask];
                             bgTask = UIBackgroundTaskInvalid;
                        }); 
```

//
}

```
-(BOOL)write:(NSData *)data toURI:(NSString *)URI
{
BOOL retVal = NO;
NSString* requestDataLengthString = [[NSString alloc] initWithFormat:@"%d", [data length]];

NSRange range = [URI rangeOfString:@"http"];//Is http?  
if(range.location != NSNotFound) 
{   
    //Yes, http
    NSMutableURLRequest *httpRequest = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:URI]];

    [httpRequest setHTTPMethod:@"POST"];
    [httpRequest setHTTPBody:data];
    [httpRequest setValue:@"application/xml" forHTTPHeaderField:@"Content-Type"];
    [httpRequest setValue:requestDataLengthString forHTTPHeaderField:@"Content-Length"];

    NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:httpRequest delegate:self];

    [theConnection release];
    [httpRequest release];

    if (theConnection) 
    {
        receivedData=[[NSMutableData data] retain];
        retVal = YES;
    } 
    else 
    {                                            
        NSError *error = [NSError alloc];
        NSLog(@"Connection failed! Error - %@ %@",
            [error localizedDescription],
            [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
            [error release];

        retVal = NO;
    }

}                                            
return retVal; 
```

}

现在我面临的问题是，如果我尝试在后台线程中上传图像，则请求不会发送到服务器（我正在检查服务器上的日志文件）。但是如果我在主线程中上传图像，则请求将发送到服务器（仅出于测试目的，我知道在主线程中上传大图像不是一个好主意）。那么我在这里做错了什么？后台线程有什么问题吗？请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:22:26.863

而不是在后台线程上进行。您可以创建一个像这样进行网络连接的类。

您只需要在字段中添加即可发布您的图片。

```
- (void)send: (NSString *)urlString {

self.receivedData = [[NSMutableData alloc] init];

NSURLRequest *request = [[NSURLRequest alloc]
                         initWithURL: [NSURL URLWithString:urlString]
                         cachePolicy: NSURLRequestReloadIgnoringLocalCacheData
                         timeoutInterval: 20
                         ];

NSURLConnection *connection = [[NSURLConnection alloc]
                               initWithRequest:request
                               delegate:self
                               startImmediately:YES];
if(!connection) {
    NSLog(@"connection failed :(");
} else {
    NSLog(@"connection succeeded  :)");

}

}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
//NSLog(@"Received response: %@", response);

[receivedData setLength:0];
}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
//NSLog(@"Received %d bytes of data", [data length]); 

[receivedData appendData:data];
//NSLog(@"Received data is now %d bytes", [receivedData length]); 

}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
NSLog(@"Error receiving response: %@", error);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
// Once this method is invoked, "responseData" contains the complete result
//NSLog(@"Succeeded! Received %d bytes of data", [receivedData length]); 

NSString *dataStr=[[NSString alloc] initWithData:receivedData encoding:NSASCIIStringEncoding];

NSLog(@"%@",dataStr);

} 
```

您需要在标题中使用它：

```
@interface NetConnection : NSObject

{
NSMutableData *receivedData;

}

@property (nonatomic,retain) NSMutableData *receivedData;
@property (nonatomic,retain) NSString *callback; 
```

# sqlite - SQLite 中 INSERT、UPDATE 和 SELECT 的时间复杂度是多少？

> ID：15896466
> 
> 赞同：5
> 
> 时间：2013-04-09T08:01:29.523
> 
> 标签：sqlite, time, insert, sql-update, complexity-theory

我正在开发一个 android 应用程序并使用 SQLite。我想知道：

*   INSERT、UPDATE 和 SELECT 操作的时间复杂度是多少。（如果答案是 BigO 表示法，我会很高兴，但也欢迎其他答案。）

*   CPU使用率是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-11T17:08:07.940

这两个问题确实太模糊而无法回答，但这可能会有所帮助：

**时间复杂度：**

给定一个特定的 SQL 语句，您或许可以计算出时间和复杂性，但有太多因素无法指向一个单一的答案。

您可能对[EXPLAIN QUERY PLAN](http://sqlite.org/eqp.html)感兴趣，它可以帮助您处理特定的 SELECT。

**CPU使用率：**

再次，CPU使用率究竟是什么？复杂的查询可能会更多地占用 CPU，但我认为您会发现大部分工作是 I/O。

# highstock - 如何使用 HighStock 显示每周滑块

> ID：15896473
> 
> 赞同：0
> 
> 时间：2013-04-09T08:02:00.777
> 
> 标签：highstock

我有一个场景，我必须每周显示特定年份的图表数据。我需要更改高库存滑块以显示周范围，即从 1 到 52。谁能建议我们如何为这种情况定制高库存滑块。

我完全被难住了，也不确定是否可以使用 High Stock。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T00:40:41.233

我使用 bootstarp 双向滑块管理此操作，并根据所选周对 highchart 的系列数据进行切片。

# python - 如何在基于 Debian 的系统上找到字体具有字形的 Unicode 代码点？

> ID：15896493
> 
> 赞同：11
> 
> 时间：2013-04-09T08:03:01.240
> 
> 标签：python, ruby, unicode, fonts, fontconfig

从基于 Debian 的系统上的脚本语言（例如 Python 或 Ruby），我想找到以下任一种：

1.  特定字体具有字形的所有 Unicode 代码点
2.  具有特定 Unicode 代码点字形的所有字体

（显然 1 或 2 可以从另一个派生，所以更容易的会很好。）我过去通过运行：

```
fc-list : file charset 
```

[...并根据fontconfig](http://cgit.freedesktop.org/fontconfig/tree/src/fccharset.c#n803)中的这段代码解析每行末尾的输出， 但在我看来，应该有一种更简单的方法来做到这一点。

（我不完全确定这是该问题的正确 StackExchange 站点，但我正在寻找可以以编程方式使用的答案。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T15:04:15.460

我会尝试任何[FreeType 2 语言绑定](http://freetype.sourceforge.net/freetype2/projects.html#bindings)。这是一个 Perl 解决方案，使用以下方法列出字体的 Unicode 代码点`Font::FreeType`：

```
use Font::FreeType;
Font::FreeType->new->face('DejaVuSans.ttf')->foreach_char(sub {
    printf("%04X\n", $_->char_code);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-23T10:36:28.383

我最近使用[TTX/FontTools](https://github.com/behdad/fonttools/)列出了从 unicode 代码点到 TTF 中字形的映射。该工具是用 Python 编写的，因此它与您帖子中的 Python 标记相匹配。命令

```
ttx -t cmap foo.ttf 
```

`foo.ttx`将为各种环境和编码生成一个描述该映射的 XML 文件。有关平台和编码标识符实际含义的描述，请参见此[参考。](https://developer.apple.com/fonts/TrueType-Reference-Manual/RM06/Chap6cmap.html)我假设该包可以用作库和命令行工具，但我没有这方面的经验。

# javascript - 通过javascript在iframe中发布Json

> ID：15896502
> 
> 赞同：0
> 
> 时间：2013-04-09T08:03:53.523
> 
> 标签：javascript, post, iframe

我正在创建和设置一个不可见的 iframe，如示例[http://encosia.com/ajax-file-downloads-and-iframes/](http://encosia.com/ajax-file-downloads-and-iframes/)
我有一个 json 字符串在提交此框架 url 时传递（POST）。
如何才能做到这一点？

# arrays - IronPython 中是否有内置方法可以将 1d 数组转换为 2d 数组

> ID：15896503
> 
> 赞同：1
> 
> 时间：2013-04-09T08:03:55.160
> 
> 标签：arrays, multidimensional-array, ironpython, reshape

我正在寻找一种简单的方法来将 IronPython 中的一维数组重塑为 2D 数组，而无需使用 NumPy / Scipy for .NET

我试图找到类似于 Numpy 的“重塑”功能的东西，但到目前为止我还没有成功。

谢谢你的帮助，

塞比

# itunes - iTunes 在 Windows PC 上启动时崩溃

> ID：15896505
> 
> 赞同：0
> 
> 时间：2013-04-09T08:03:59.640
> 
> 标签：itunes, quicktime

这是一个有点奇怪的问题，我使用的是 Windows 8 PC，最近升级到 iTunes 后，它在启动时开始失败。

在多个论坛中查找，但即使在苹果在线论坛上也没有任何帮助。

人们在这些论坛上提到，联系 Windows 和 Apple 论坛并没有多大帮助，因为对此问题没有任何回应。

当然，对于像我这样的忠实 iTunes 用户来说，这令人沮丧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:03:59.640

我尝试使用 iTunes 来找到有关此问题的解决方案，我发现可能发生此错误的原因有多种，此问题有多种解决方案：

**解决方案1：（**这对我有用）

1.  打开 QuickTime
2.  从 QuickTime 菜单转到“编辑 -> 首选项 -> QuickTime 首选项”
3.  转到音频选项卡 检查是否选择了安全模式（仅限 waveout）。
4.  将此选择更改为 Direct Sound。
5.  应用更改。重新启动 iTunes。

**解决方案 2：（**您在这种方法中丢失了所有 iTunes 数据）

1.在我的情况下，打开保存在本地驱动器上的 iTunes 库：“C:\Users\username\My Music\iTunes\” 2.将 iTunes 文件夹重命名为 iTunes old 之类的其他名称。

3.重新启动iTunes。

恢复 iTunes 数据：将 iTunes 数据手动复制并粘贴到新创建的 iTunes 文件夹中（选择时在此处进行选择）并重新启动 iTunes。

**解决方案 3：（**在苹果论坛上阅读它，感谢建议这个有趣修复的实际所有者）

1.  从互联网上拔下您的笔记本电脑并确保您处于离线状态。
2.  启动 iTunes [这次它不会崩溃 :)]
3.  打开首选项 (iTunes)。
4.  转到家长偏好。
5.  启用复选框 iTunes 商店以禁用对 iTunes 商店的访问。
6.  重新连接并重新启动即可享受。

当我准备好发布它时，将包括更多修复，直到那时快乐调整。

# jquery - 在 jquery replaceWith 中连接字符串的正确语法是什么

> ID：15896507
> 
> 赞同：0
> 
> 时间：2013-04-09T08:04:03.057
> 
> 标签：jquery, coffeescript, datepicker, replacewith

我有以下 html 标记

```
<body>
  <div class="old-wrapper">
    ...lots of stuff
  </div>
</body> 
```

我需要用咖啡脚本函数替换它以提供以下标记

```
<body>
  <div class="new-wrapper">
    <input type="text" class="date-picker">
  </div>
</body> 
```

我需要`.old-wrapper`用作目标

我的咖啡脚本功能看起来像这样

```
jQuery ->
  $(".old-wrapper").repaceWith(
    $("<div class='new-wrapper'>") +
    $("<input type='text' class='date-picker'>").datepicker +
    $("</div>")
  ) 
```

在 replaceWith 函数中连接这些字符串的正确方法是什么？（对不起，这是一个非常基本的 javascript 语法问题，但我的 javascript 知识有限）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:09:32.740

你有一个语法错误开始：

```
$("<div class="wrapper>")
  ^           ^        ^
open        close     ??? 
```

该代码的其余部分也是无效的。

尝试这个：`$(".date-wrapper").wrapInner('<div class="wrapper" />');`

你应该看看网站上的教程部分：http: [//docs.jquery.com/Tutorials](http://docs.jquery.com/Tutorials)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:35:41.717

这是我的尝试。请注意，我正在`old-wrapper`根据原始问题寻找课程。

我还使用了将内部调用放入它们自己的函数中的技术，我认为这可以使代码更加整洁。

这是一个[jsFiddle](http://jsfiddle.net/biofractal/8g4mD/5/)，显示了下面的代码

```
getDatePicker=->$('<input/>', {type:'text', class:'date-picker'}).datepicker()

getWrapper=->$('<div/>', {class:'new-wrapper'}).append getDatePicker()

$ -> $('.old-wrapper').replaceWith getWrapper() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T08:53:04.757

这应该工作！

```
jQuery ->
    $('.date-wrapper')
        .append($('<div class="wrapper" />'))
        .find('.wrapper')
        .append($('<input type="text" class="date-picker">').datepicker()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T08:31:44.603

~~可能是这样的。。~~

 ~~```
jQuery ->
  $('.date-wrapper').append(
    $('<input type="text" class="date-picker" id="user_dob" value="' + dob + '" name="user[dob]" />').datepicker()
  ).wrapInner('<div class="wrapper" />')
  $('.wrapper').unwrap() 
```~~ 

~~而不是替换元素只是附加你的 datepicker-input 元素，像你需要的那样包装它，然后用`unwrap`.~~

### 编辑

重读问题后，我发现我的方法有点错误；-)

对于您的问题，最简单的解决方案不是像您已经做的那样简单地替换所有日期包装器元素，然后用您的新包装器包装所有这些吗？

```
dob = '2013/4/9'
$ ->
  $('.date-wrapper').replaceWith($('<input type="text" class="date-picker" id="user_dob" value="' + dob + '" name="user[dob]" />').datepicker())      
  $('.date-picker').wrapAll('<div class="wrapper" />') 
```

生产

```
<div class="wrapper">
    <input id="user_dob" class="date-picker hasDatepicker" type="text" name="user[dob]" value="2013/4/9">
</div>
<div id="ui-datepicker-div" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div> 
```

见[小提琴](http://jsfiddle.net/Lucidus/hHrst/)

# java - 无法从使用 java 创建的 httpserver 发送响应消息

> ID：15896511
> 
> 赞同：0
> 
> 时间：2013-04-09T08:04:16.440
> 
> 标签：java, httpresponse, httpserver

我正在我的应用程序中创建 httpserver，使用：

```
HttpServer server = HttpServer.create(new InetSocketAddress(8000), 0); 
```

该服务器首先使用

```
OutputStream os = httpEx.getResponseBody();
os.write(("your request is being handled, please wait").getBytes()); 
```

然后打开一个 jFilechooser。如果出现任何问题，它也会使用

```
os.write(("Failed to handle your request").getBytes()); 
```

当我的应用程序在用户的机器上运行时，它会正确创建 httpserver，正如我可以通过日志找到的那样，但是当用户向该服务器发送任何请求时，什么也没有发生。它显示空白页。但是当我删除所有`os.write`行时，它工作正常并显示文件选择器弹出窗口。我不知道出了什么问题。请帮助我。我已经尝试过这些方法：

```
try {           
            os.write(("Your request is being handled, please wait").getBytes());
            os.close();
            //code to open Jfilechooser pop-up

        } catch (Exception e) {
            os.write(("Failed to handle the request because"+e.getMessage()).getBytes());
            os.close();} 
```

和

```
 try {           
                os.write(("Your request is being handled, please wait").getBytes());

                //code to open Jfilechooser pop-up

            } catch (Exception e) {
                os.write(("Failed to handle the request because"+e.getMessage()).getBytes());
                }

os.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:34:22.883

解决了。我添加了 os.flush(); 作为：

```
finally(){
os.flush();
os.close();
is.close();
httpEx.close();

} 
```

# asp.net - ASP.NET 在 .aspx 设计表单的头部中使用类（静态方法）

> ID：15896513
> 
> 赞同：1
> 
> 时间：2013-04-09T08:04:37.820
> 
> 标签：asp.net, methods, frameworks, static, zurb-foundation

基本上我正在尝试将 Foundation 4 框架集成到 ASP.NET 项目中。我在 App_Code 中创建了一个类，其中创建了包含所有 css、js 链接的静态方法。现在我想在 .aspx 文件的 head 标签中使用它。部分代码： *AppCore.cs*

```
 public class AppCore
    {       
       private static IDictionary<string, string> Dlink = new Dictionary<string, string>();

    static AppCore()
    {

     //App Links
        Dlink.Add("js", "~/_Assets/js/");
        Dlink.Add("css", "~/_Assets/css/");
        Dlink.Add("img", "~/_Assets/img/");
    }

        public static string link(string i)
    {
        if (!Dlink.ContainsKey(i))
            return "N/A";
        else
            return Dlink[i];
    }
} 
```

**我可以在正文标签中使用它作为**

```
<% AppCore.link("css")+"foundation.css";%> 
```

**我真正想要的是在头脑中使用它，例如：**

```
<link rel="stylesheet" href="<% AppCore.link("css");%>foundation.css" /> 
```

我哪里失败了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:12:35.920

试试这个

```
<link rel="stylesheet" href="<%= AppCore.link("css") %>foundation.css" /> 
```

在后面放一个`=`标志，然后从末端`<%`移除。`;`

对于客户端特定的 URL，请执行此操作

```
<link rel="stylesheet" 
      href="<%= ResolveClientUrl(AppCore.link("css")) %>foundation.css" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:10:55.987

请尝试使用单引号，即：'' 而不是双引号 ""，如下所示：

```
<link rel="stylesheet" href='<% AppCore.link("css");%>foundation.css' /> 
```

让我知道它是否有效？

# c++ - 试图在netbeans c ++中导入dll

> ID：15896514
> 
> 赞同：2
> 
> 时间：2013-04-09T08:04:42.927
> 
> 标签：c++, netbeans, dll

我在将 FFTw3 库包含到我的项目中时遇到了一些问题。这是我第一次接触 dll，所以我很确定这将是一些简单的东西……

到目前为止我所做的是：

*   设置 Build/C++ Compiler/Include Directories - 并将其设置为 lib 文件夹
*   设置 Bujld/Linker/Additional Library Directories - 并添加相同的 lib 文件夹

之后我尝试运行下面的演示脚本。

```
#include <fftw3.h>
int main(void) // Tutorial code from http://www.fftw.org/fftw2_doc/fftw_2.html
{

 int N = 10;

 fftw_complex in[N], out[N];
 fftw_plan p;

 p = fftw_create_plan(N, FFTW_FORWARD, FFTW_ESTIMATE);

 fftw_one(p, in, out);

 fftw_destroy_plan(p);  

 } 
```

由此它找到了头文件 fftw3.h 并且可以正常运行（如果其余部分被注释掉，则运行）

```
p = fftw_create_plan(N, FFTW_FORWARD, FFTW_ESTIMATE); 
```

那里说：

> main.cpp:19:57：错误：“fftw_create_plan”未在此范围内声明

我正在通过网络寻找并退出混乱。我是否还需要 .lib 文件，它们是从 .dev 文件创建的，如果需要的话？（它们对我来说看起来很相似，但又一次，我对这个话题一无所知）

所以我想知道你们中是否有人有知识并愿意帮助我让它运行......

谢谢magu_

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T11:49:22.810

您必须将包含目录设置为您的头文件（例如`fftw3.h`）所在的路径。要检查您的标题是否由*ctrl + 单击*包含设置。

接下来像这样设置库：

*   项目属性，**`Build -> Linker`**
*   附加库目录：设置您的或所在的目录*路径*-*不是*文件`.lib``.dll`
**   Libraries: **`[...] -> Add Library`** and type the *name* of your library there, eg. if the library is named `libFFTw3.dll` write only `FFTw3`.*

 *Use `Add Library File` instead if you want to specify a full filename.

* * *

## Edit:

**Windows (using MinGW):**

Download: [http://www.fftw.org/install/windows.html](http://www.fftw.org/install/windows.html)

used code for this example (it's an example from the website):

```
fftw_complex *in, *out;
fftw_plan p;

size_t N = 3;

in = ( fftw_complex* ) fftw_malloc(sizeof (fftw_complex ) * N);
out = ( fftw_complex* ) fftw_malloc(sizeof (fftw_complex ) * N);
p = fftw_plan_dft_1d(N, in, out, FFTW_FORWARD, FFTW_ESTIMATE);

fftw_execute(p); /* repeat as needed */

fftw_destroy_plan(p);
fftw_free(in);
fftw_free(out); 
```

Setting up NetBeans:

1.  Open Project Buildproperties ( **`Properties -> Build`** )
2.  **`C++ Compiler -> Includes directories -> [...] -> Add`**, select path where you unpacked the library
3.  Go to **`Linker`** a. **`Additional Library Direcotries -> [...] -> Add`**, select path where you unpacked the library (not the library!) b. **`Libraries -> [...] -> Add Library`**, write *`fftw3-3`* there and press Ok

On Linux the steps are the same, but you have to build the library before.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-21T05:56:35.347

**fftw_create_plan() is out of date in fftw3**

fftw3.h manual is here

[http://www.fftw.org/fftw3_doc/Complex-One_002dDimensional-DFTs.html#Complex-One_002dDimensional-DFTs](http://www.fftw.org/fftw3_doc/Complex-One_002dDimensional-DFTs.html#Complex-One_002dDimensional-DFTs)

please use the new syntax **fftw_plan_dft_1d()** to create plan*

# email - Dynamics CRM 2011 - 发送前将文件附加到电子邮件

> ID：15896518
> 
> 赞同：0
> 
> 时间：2013-04-09T08:05:03.943
> 
> 标签：email, workflow, dynamics-crm-2011, dynamics-crm

我的 Dynamics CRM 2011 中有一个非常标准的工作流程，它会在创建新实体时发送电子邮件。现在，在发送电子邮件之前，我想通过插件附加一些附件。

是否可以在电子邮件活动中捕获一些发送前事件，所以我可以在发送电子邮件之前创建插件，检查创建的消息，附加文件并发送它？

## 编辑：

Web 服务从另一个系统获取的文件，它们不是 CRM 中其他实体的附件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:13:39.617

CRM 将创建电子邮件，然后将其作为两个单独的操作发送。因此，您应该能够将代码添加到添加附件的电子邮件实体上的创建后插件。大概您的工作流程会在电子邮件中添加一些标志，以便您的插件知道将哪个附件添加到哪个电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:23:39.853

电子邮件实体上有两条消息：`Send`和`SendFromTemplate`。您应该能够创建 PreSend 或 PreSendFromTemplate 插件并附加文件。

# iphone - 隐藏视图是否响应 NSNotifications？

> ID：15896520
> 
> 赞同：-1
> 
> 时间：2013-04-09T08:05:07.507
> 
> 标签：iphone, objective-c, nsnotifications

我在 a 上有两个选项卡`UITabBarController`，我都注册了`NSNotificationCenter`，我的问题是我没有在隐藏选项卡上收到通知（即它还没有被调用`viewDidAppear:`）。我的想法是不在屏幕上（即隐藏）的控制器不响应`NSNotifications`. 我可以用不同的方式做事，这不是问题，但我只是想验证为什么隐藏的选项卡没有收到通知，以防我遗漏了其他东西并且它实际上应该工作......

# 编辑：

[@Fab1n](https://stackoverflow.com/users/1340499/fab1n)为我指出了正确的方向，我错误地习惯于`viewWillDisappear:`移除观察者，所以当视图消失时不再监听通知。我会把它移到`dealloc`.

```
- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];
    NSNotificationCenter *notificationCenter = [NSNotificationCenter defaultCenter];
    [notificationCenter removeObserver:self];
} 
```

变成：

```
- (void)dealloc {
        NSNotificationCenter *notificationCenter = [NSNotificationCenter defaultCenter];
        [notificationCenter removeObserver:self];
} 
```

非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:16:29.760

据我所知，尽管第一个标签栏元素是延迟加载的。当您第一次点击代表标签栏项目（或通过以编程方式访问其视图属性）时，它们会被加载。之后，即使您选择另一个选项卡项目，他们也可以收到您想要的任何消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:22:44.947

**为了安全起见：注册您`NSNotification`的`-init`或（通过 IB）`-initWithNibName:`**

当您设置 的属性时，`UITabbarController`会初始化a 的控制器。`init``controllers``UITabbarController`

`viewWillAppear`并且`viewDidAppear`每次通过点击标签栏图标使其中一个控制器可见时都会被调用。

**解决方案：**

1.  `NSNotification`通过覆盖`-init`每个“子”控制器来注册您的
2.  注销通知`-dealloc`（不要`[super dealloc]`用 ARC 打电话！！！）

现在一切正常！

# php - 如何将数据从数组发布到数据库

> ID：15896521
> 
> 赞同：0
> 
> 时间：2013-04-09T08:05:10.523
> 
> 标签：php, codeigniter

你好编码员。我在将数据插入数据库时​​遇到问题，您能帮我处理一下控制器功能吗？这是我的php表单：

```
<form method='post' action='<?php echo site_url('a3_bus_system/output')?>'>
    <div class="_25">
        <strong>Route Name/Number</strong>
        <br/>
        <input type="text" name=""></input>
    </div>

        <p>&nbsp;<p>&nbsp;</p></p>

        <p>&nbsp;<p>&nbsp;</p></p>
        </p>

    <div id="div">

    </div>

  <p>&nbsp;</p><div class="_25">

    <p><input type="button" name="button" class="button red" id="button" value="Add"  onclick="generateRow() "/></a></p>
</div>
 <input type='button' value='Remove Button' id='removeButton'>

<p>&nbsp;</p><p>&nbsp;</p></div>

<input type="submit"  class="button blue" id="button" value="Register" />

</form> 
</div>

</div>

<div class="clear height-fix"></div>

        </div></div> <!--! end of #main-content -->
  </div> <!--! end of #main -->
 <script>
 var counter=1;
    function generateRow() {
    var count="<font color='red'>"+counter+"</font>";
   var temp ="  <p>&nbsp;&nbsp;&nbsp;&nbsp;<div class='_25'><input type='textbox' id='textbox' name='stop["+counter+"]' placeholder='Stop Name'></input></div>&nbsp;&nbsp;&nbsp;<div class='_25'><input type='textbox' id='textbox' name='timing["+counter+"]' placeholder='Timing'></input></div>&nbsp;<div class='_25'><select id='ampm' name='ampm["+counter+"]'><option>a.m</option><option>p.m</option></select>  </div>";

var newdiv = document.createElement('div');
newdiv.innerHTML = temp + count;

var yourDiv = document.getElementById('div');

yourDiv.appendChild(newdiv);
counter++;
    }
    </script> 
```

这是我的控制器功能：

```
public function output()
    {
    $common['common']=$this->common;
    $this->load->helper('form');
    $this->load->database();

    foreach ($_POST['stop'] as $stopIndex => $stopValue) {

    if($stopValue!=NULL)
    {

    echo $stopIndex;
    echo $stopValue;

        }
    }
    foreach ($_POST['timing'] as $timingIndex => $timingValue)
    {
    if($timingValue!=NULL)
    {
    echo $stopValue['data'];
    }

}
foreach ($_POST['ampm'] as $ampmIndex => $ampmValue) {

  if($timingValue!=NULL)
    {
  echo $ampmValue;
  }
}

    $this->output->enable_profiler(TRUE);
    } 
```

这些是我的数据库字段：

```
route_number   stop_name   am_pm   timing 
```

请给我一种插入查询以将所有这些输入字段发布到数据库中的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:16:57.560

你有已经制作好的模型吗？在 Codeigniter 中，您应该使用模型进行所有直接的数据库活动。您需要了解的有关模型的所有信息都在此处进行了说明：http: [//ellislab.com/codeigniter/user-guide/general/models.html](http://ellislab.com/codeigniter/user-guide/general/models.html)

一旦在那里你会像这里解释的那样插入：[http](http://ellislab.com/codeigniter/user-guide/database/examples.html) : //ellislab.com/codeigniter/user-guide/database/examples.html 尽管我总是使用活动记录类方式（[http://ellislab.com/codeigniter/ user-guide/database/active_record.html](http://ellislab.com/codeigniter/user-guide/database/active_record.html)），它更简单，抽象真的很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:26:44.930

您不能直接在数据库中发布数组...在插入之前序列化数据并在获取后反序列化

# dojo - dojo方面未定义，不明白为什么

> ID：15896523
> 
> 赞同：2
> 
> 时间：2013-04-09T08:05:12.683
> 
> 标签：dojo, undefined, aspect

我想从 dojo 1.7 更新到 1.8.3，所以我必须替换 dojo.connect 命令。

转变：

```
< div id="universalPushSwitch" data-dojo-type="dojox.mobile.Switch" style="float:right" class="mblSwRoundShape1"></div> 
```

我现在有：

```
dojo.require("dijit/registry");
dojo.require("dojo/ready");
dojo.require("dojox/mobile/ListItem");
dojo.require("dojo/aspect");

dojo.ready(function(){
  dojo.aspect.after(dijit.registry.byId("universalPushSwitch"), "onStateChanged", 
        function(newState){
        alert(newState);
    }
)}); 
```

Firebug 说：“方面未定义”

PS：我知道我不使用新的 AMD 加载程序。这是一个旧项目，我对所有 dojo 的东西也很陌生。一个简单的从`dojo.require("x");dojo.require("y");`to翻译`require(["x","y"], function (x,y){...}`对我不起作用，所以仍然需要旧样式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:09:16.770

尝试使用：

```
dojo.aspect.after(...); 
```

代替

```
aspect.after(...); 
```

并且不要停留在下一个功能！:-)

如果这不能立即起作用，请尝试以全局方式加载方面（使用点，而不是斜线）：

```
dojo.require("dojo.aspect"); 
```

也有可能，旧的道场与“/”不兼容，它只适用于点！

来源：

[http://livedocs.dojotoolkit.org/dojo/require](http://livedocs.dojotoolkit.org/dojo/require)

## 编辑

这是一个基于您的小提琴的工作小提琴：

[http://jsfiddle.net/9Xdv2/](http://jsfiddle.net/9Xdv2/)

The main problem with your code was that you did not parse the html. dojo parser converts some specific html to "dojo javascript objects" ! You use that kind of html a lot ! You should have done a:

```
dojox.mobile.parser.parse(); 
```

Everything is in the jsfiddle !

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T13:02:49.957

Since you are using dojo 1.8.3 and have been using dojo 1.7, why don't you use the AMD syntax instead of the pre-1.7 ? You would do something like :

```
<div id="universalPushSwitch" data-dojo-type="dojox/mobile/Switch" style="float:right" class="mblSwRoundShape1"></div> 
```

And in your js :

```
require(["dijit/registry",
         "dojox/mobile/ListItem",
         "dojo/aspect",
         "dojo/parser",
         "dojo/domReady!"
         ], function(registry, ListItem, aspect, parser){

    parser.parse().then(function(instances){
        aspect.after(registry.byId("universalPushSwitch"), "onStateChanged", 
           function(newState){
               alert(newState);
           });
    });
}); 
```

# javascript - 带有按钮 javascript 的 Python 发布表单

> ID：15896526
> 
> 赞同：2
> 
> 时间：2013-04-09T08:05:34.730
> 
> 标签：javascript, python, forms, button, mechanize

我尝试在网站上发布广告。
我们有 2 个表单，第一个表单询问我的广告信息，我可以提交它们，但在第二个表单中，我有一个带有 javacript 的按钮（输入），

```
onclick="action_cmd('delete')" 
```

我使用 mechanize 和 python 。

代码javascript是：

```
function action_cmd(action){
var hidden = document.getElementById("div_cmd");
hidden.innerHTML += "<>input type=\"hidden\" name=\"cmd\" value=\"" + action + "\">";
document.form_ads_action.submit();
} 
```

代码 python ：
对于第一种形式，我添加了信息。

```
br.open("link")
br.select_form(nr=0)
br.submit() 
```

首先可以。

对于第二种形式：

```
br.select_form(nr=0)
br.submit() 
```

不起作用。

代码HTML：

```
form name="ads_action" action="link" method="post" enctype="multipart/form-data">
input type="image" name="back" id="back" value="Back"   onClick="action_cmd('back');">
input type="image" name="continue" id="continue" value="Val"onClick="action_cmd('delete')"> 
```

请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:19:58.917

You have the same form number:

```
br.select_form(nr=0)
br.submit() 
```

If it's different form on the same page, then it should be:

```
br.select_form(nr=1)
br.submit() 
```

Or if you want to specifically select the second form, you can do that by name:

```
br.select_form(name = "ads_action")
br.submit() 
```

# android - DatePickerFragment 一个清理项目

> ID：15896530
> 
> 赞同：2
> 
> 时间：2013-04-09T08:05:38.237
> 
> 标签：android, android-dialogfragment, android-datepicker

我的 Android 项目中有一个 DatePickerFragment：

```
public class Uses extends FragmentActivity {

@Override
public void onCreate(Bundle savedInstanceState) {

  //code

}

public class parkingListHTTP extends AsyncTask<String, Void, String> {

     //code
    }

    @Override
    protected void onPostExecute(String result) {

         //code
}

public void returnUses(String date) {

    //code

}

public void selectDate(View v) {
    DialogFragment newFragment = new DatePickerFragment();
    newFragment.show(getSupportFragmentManager(), "datePicker");
}

public class DatePickerFragment extends DialogFragment implements DatePickerDialog.OnDateSetListener {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the current date as the default date in the picker
        final Calendar c = Calendar.getInstance();
        int year = c.get(Calendar.YEAR);
        int month = c.get(Calendar.MONTH);
        int day = c.get(Calendar.DAY_OF_MONTH);

        // Create a new instance of DatePickerDialog and return it
        return new DatePickerDialog(getActivity(), this, year, month, day);
    }

    public void onDateSet(DatePicker view, int year, int month, int day) {
        // Do something with the date chosen by the user
        String dateText = context.getString(R.string.date_name);
        String[] strDays = new String[]{"Dom", "Lun", "Mar", "Mie", "Jue", "Vie", "Sáb"};

        final Calendar c = Calendar.getInstance();

        c.set(Calendar.YEAR, year);
        c.set(Calendar.MONTH, month-1);
        c.set(Calendar.DAY_OF_MONTH, day);

        int week = c.get(Calendar.DAY_OF_WEEK); 

        date.setText(dateText.replaceFirst("\\*",strDays[week - 1] + " " + day + "/" + (month+1)+"/"+year));
        returnUses(year+"-"+(month+1)+"-"+day);
    }
} 
```

}

当我更改项目中的某些代码时

```
public class DatePickerFragment extends DialogFragment implements DatePickerDialog.OnDateSetListener { 
```

返回错误：

```
 This fragment inner class should be static (com.usualbike.mandemo.Uses.DatePickerFragment) 
```

但它解决了清理项目。

我怎样才能避免这个错误+清理？

# java - GWT - 如何获取选定选项卡的 tabText？

> ID：15896542
> 
> 赞同：1
> 
> 时间：2013-04-09T08:06:25.537
> 
> 标签：java, gwt, tabpanel

我想在单击选项卡时获取选项卡文本。我这样做：

```
tabPanel.addSelectionHandler(new SelectionHandler<Integer>() {

            @Override
            public void onSelection(SelectionEvent<Integer> event) {
                //get the tabtext here
            }
        }); 
```

但我只得到索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:02:25.067

假设您正在使用`TabPanel`并且您没有为 提供自定义`Widget`，`TabBar`您可以这样做：

```
tabPanel.addSelectionHandler(new SelectionHandler<Integer>() {

  @Override
  public void onSelection(SelectionEvent<Integer> event) {
      String tabHtml = tabPanel.getTabBar().getTabHTML(event.getSelectedItem());
    }
  }); 
```

当然，您将获得选项卡的底层 HTML，通常是`<div>tab text</div>`. 无论您选择将选项卡文本显示为 HTML，您在`add()`方法中放置的文本都包含在`Label`或小部件中。`HTML`

当然这并不方便，通常您需要`TabPanel`在插入时将选项卡文本（在我猜的扩展名或模型中）存储在某处（覆盖`add(...)`s）并在需要时检索它（通过为它们添加一个简单的 getter ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:54:30.827

您可以通过以下方式获取选定的选项卡。

```
tabPanel.getElement().getTitle(); 
```

# php - 我无法从 php 数组中检索值

> ID：15896543
> 
> 赞同：1
> 
> 时间：2013-04-09T08:06:38.950
> 
> 标签：php

这是代码：

我无法在第二个函数中打印站点类型。当从不同的函数发送“all”作为参数时，我可以打印数组。

```
function site_type_find($site_type)
{
 $site_type_name_array=['Youtube','Wikipedia','Mashable','Wired'];
  if($site_type="all")
  return $site_type_name_array;
  else
  return $site_type_name_array[$site_type];
}
function display_topic_category_sitetype($topic_id,$category_id,$site_type)
{
  $result=mysql_query("select topic_name from topic_table where topic_id=$topic_id");
  $result1=mysql_query("select category from categorytable where category_id=$category_id");
  $site_type_name=site_type_find($site_type);
  $resultarr=array();
  $resultarr1=array();
  $resultarr=mysql_fetch_array($result);
  $resultarr1=mysql_fetch_array($result1);
  $topic=$resultarr[0];
  $catname=$resultarr1[0];
?>
  <section>
  <header><?php echo $topic."\n";?></header>
  <article><?php echo $catname."\n";?></article>
  <article><?php echo $site_type_name."\n";?></article>
<?php
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T08:08:50.140

您应该使用`==`而不是`=`作为比较运算符。

这是在第 4 行：

```
if($site_type="all") // use two = 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T08:10:28.740

使用`==`而不是`=`作为比较运算符。

在第 4 行，使用下面的代码。

```
if($site_type=="all") 
```

在哪里：

`==`用于`checking equality`OR 的`comparison`目的。

`=`用于`assigning values`php 变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T08:10:23.873

改变

```
if($site_type="all") 
```

到

```
if($site_type=="all") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T08:23:57.387

单个等号运算符 ( `=`) 是赋值运算符，双等号运算符 ( `==`) 是比较运算符，因此您必须使用`if($site_type=="all")`bcoz 在这里您将值`$site_type`与 all进行比较

# blackberry - 如何获取短信服务中心号码？

> ID：15896548
> 
> 赞同：0
> 
> 时间：2013-04-09T08:06:56.173
> 
> 标签：blackberry

我需要知道服务中心号码才能在我的 BlackBerry 应用程序中确定运营商。我尝试过`RadioInfo.getCurrentNetworkName()`直接获取操作员名称的方法，但结果不适合我的情况。

有可能知道这些信息吗？还有其他方法可以确定用户的运营商吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:14:09.580

方法`GPRSInfo.getHomeMCC()`并`GPRSInfo.getHomeMNC()`返回家庭网络的国家代码和网络代码的数字代码。

这将获得名称（[请参阅此链接](https://stackoverflow.com/questions/6981257/radioinfo-getcurrentnetworkname-giving-a-null-value)）：

```
RadioInfo.getCurrentNetworkName(); 
```

**编辑 ：**

```
String mcc = Integer.toHexString(RadioInfo.getMCC(RadioInfo.getCurrentNetworkIndex())); 
```

# maven - 如何使用 maven 1 复制项目依赖项？

> ID：15896552
> 
> 赞同：0
> 
> 时间：2013-04-09T08:07:14.610
> 
> 标签：maven, compilation

当使用 maven 1（不是 maven 2）作为构建工具时，有没有办法将项目的依赖项复制到某个目录中？

我知道 Maven 2 存在一个依赖插件，但我找不到 Maven 1 的依赖插件。

将所有依赖项 jar 复制到文件夹的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:29:09.753

你将不得不使用 Jelly 来做到这一点，使用类似这样的东西：

```
<j:forEach var="lib" items="${pom.artifacts}">
    <ant:copy todir="${your.target.dir}" file="${lib.path}"/>
</j:forEach> 
```

# android - 具有自定义视图/布局的项目列表

> ID：15896554
> 
> 赞同：0
> 
> 时间：2013-04-09T08:07:24.333
> 
> 标签：android, list, listview, data-binding, scroll

我需要一种方法来创建一个可垂直滚动的列表。然后列表应该包含一堆行，其中每行应该有一个图像按钮、一个图像、三个`TextViews`和两个图像。像这样：

```
Row1: ImgBtn | TextView | TextView | TextView | Image | Image 

Row2: ImgBtn | TextView | TextView | TextView | Image | Image 

Row3: ImgBtn | TextView | TextView | TextView | Image | Image 
```

..等等..

我还需要将视图“绑定”到某些值......因为`TextViews`图像和图像等的值应该从数据库中“获取”。

**问题：**

什么是最好的方法，有什么地方可以让我了解更多关于这个的信息吗？..我不太确定要谷歌搜索什么，所以这就是为什么我自己问而不是谷歌搜索的原因之一:)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:15:07.140

您可以查看我写的关于如何创建自定义的指南`ListView`：

[自定义列表视图](https://blog-emildesign.rhcloud.com/?p=495)

基本上你需要创建一个`CustomArrayAdapter`, 里德指南来了解它是如何完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:12:50.370

你想要的是一个组件。组件是不同于 Android 直接为您提供的自定义对象。更多信息在这里：

[http://developer.android.com/guide/topics/ui/custom-components.html](http://developer.android.com/guide/topics/ui/custom-components.html)

制作自定义组件后，只需在 getView() 上实例化自定义项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T08:13:07.920

您应该扩展`BaseAdapter`并定义您自己的适配器，该适配器`ListView`将使用。
这里有一些文章展示了如何做到这一点：
[http ://www.ezzylearning.com/tutorial.aspx?tid=](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)
[1763429 http://androidresearch.wordpress.com/2012/01/07/building-a-custom-花式列表视图-在-android/](http://androidresearch.wordpress.com/2012/01/07/building-a-custom-fancy-listview-in-android/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T08:13:22.993

如果您打算创建自定义列表视图，则应使用扩展“arrayAdapter”。也许本教程会对您有所帮助：[http ://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T08:14:43.570

您可以使用您想要的内容编写自定义布局并使用它而不是**android.R.layout.simple_list_item_1**并使用**android.layout.yourxml**，在谷歌中搜索您如何做到这一点，您也可以搜索您想要定制的内容带适配器的android listview

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T08:43:12.283

好吧，您不需要自定义视图，您只需要将布局设置为 row_layout 或任何其他名称，如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<ImageButton
    android:id="@+id/imageButton1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_action_lang" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_action_lang" />

<ImageView
    android:id="@+id/imageView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_action_lang" /> 
```

然后在适配器中对其进行膨胀，然后将数据分配给该视图，例如从您的数据库中。您需要的步骤是：

*   制作布局
*   列表显示
*   Adapter(Assigns data to the listView row by row with you layout) I was learning about lists myself these past weeks it will seem lengthy at first but will become very easy when you get the process, so here are some links that might help you:

*   [Android offical website](http://developer.android.com/guide/topics/ui/layout/listview.html)

*   [Vogella](http://www.vogella.com/articles/AndroidListView/article.html)

# perl - 您如何将 Mojolicious 应用程序部署到生产服务器上？

> ID：15896555
> 
> 赞同：2
> 
> 时间：2013-04-09T08:07:30.033
> 
> 标签：perl, mojolicious

我一直在开发我的第一个 Mojolicious 应用程序。直到现在我一直从开发目录运行它，但现在我想安装在生产服务器上。 `mojo generate app`生成了我用来存储模板和静态文件的目录 templates/ 和 public/。我使用 Dist::Zilla 创建了一个简单的发行版，但在运行时我无法访问 templates/ 和 public/。

我提供的解决方案是将templates/和public/移动到一个新的目录share/中，然后让File::ShareDir（或Dist::Zilla的ShareDir插件）把它捡起来，这样我就可以在我的*_mode 方法：

```
sub development_mode{
    my $app = shift;
    push @{$app->static->paths}, rel2abs(catdir('share', 'public') );
    push @{$app->renderer->paths}, rel2abs(catdir('share', 'templates') );
}

sub production_mode{
    my $app = shift;
    push @{$app->static->paths}, catdir(dist_dir('FooBar'), 'public') ;
    push @{$app->renderer->paths}, catdir(dist_dir('FooBar'), 'templates') ;
} 
```

有没有更官方的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:48:46.757

不，我就是这样做的，对于[Galileo](http://metacpan.org/module/Galileo)和我的更通用的插件来说都是这样的：[Mojolicious::Plugin::InstallablePaths](https://metacpan.org/source/JBERGER/Mojolicious-Plugin-InstallablePaths-0.03/lib/Mojolicious/Plugin/InstallablePaths.pm)。

# iphone - 获取 System.InvalidOperationException：请求格式无效：通过 AFNetworking 上传图像（数据）时出现多部分/表单数据错误

> ID：15896556
> 
> 赞同：0
> 
> 时间：2013-04-09T08:07:33.377
> 
> 标签：iphone, .net, ios, web-services, afnetworking

我正在关注一些通过 AFNetworking 上传图像（数据）的教程。我已经做好了

```
 NSURL *url = [NSURL URLWithString:@"http://184.154.0.24"];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];

//    NSMutableDictionary* _params = [[NSMutableDictionary alloc] init];
//    [_params setObject:multiMData forKey:@"Bytes"];
//    [_params setObject:name forKey:@"UserId"];
//    [_params setObject:@"Hello" forKey:@"fileName"];
//    [_params setObject:@"png" forKey:@"contentType"];

//    [httpClient registerHTTPOperationClass:[AFJSONRequestOperation class]];

NSMutableURLRequest *request = [httpClient multipartFormRequestWithMethod:@"POST" path:@"/IphoneVideoService/webservice.asmx/getStringData" parameters:nil constructingBodyWithBlock: ^(id <AFMultipartFormData>formData)
{
    [formData appendPartWithFileData:multiMData name:@"stringReturn" fileName:@"stringReturn.png" mimeType:@"image/png"];
}];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

[operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
    NSLog(@"Sent %lld of %lld bytes", totalBytesWritten, totalBytesExpectedToWrite);
}];

[operation setCompletionBlock:^{
    NSLog(@"%@", operation.responseString); //Lets us know the result including failures
}];

//    NSOperationQueue *queue = [[NSOperationQueue alloc] init] ;
//    [queue addOperation:operation];

[httpClient enqueueHTTPRequestOperation:operation]; 
```

编译后我得到了那个错误

```
2013-04-09 13:22:49.153 Softo Chat[582:19d03] Sent 323584 of 333526 bytes
2013-04-09 13:22:49.153 Softo Chat[582:19d03] Sent 327680 of 333526 bytes
2013-04-09 13:22:49.153 Softo Chat[582:19d03] Sent 331776 of 333526 bytes
2013-04-09 13:22:49.154 Softo Chat[582:19d03] Sent 333526 of 333526 bytes
2013-04-09 13:22:49.154 Softo Chat[582:1ad0b] System.InvalidOperationException: Request    format is invalid: multipart/form-data; boundary=Boundary+0xAbCdEfGbOuNdArY.
at System.Web.Services.Protocols.HttpServerProtocol.ReadParameters()
at System.Web.Services.Protocols.WebServiceHandler.CoreProcessRequest() 
```

及其服务器端编程asp.net

```
[WebMethod]
public string getStringData(string stringReturn)
{
    return stringReturn;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:05:55.043

嗨，Pravi jay，我只是在谷歌上搜索了一下，得到了一个与您相关的好问题。您只需要对 web.config 进行一些更改。

```
<add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
<add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" /> 
```

请访问：-

['System.InvalidOperationException: Request format is invalid: multipart/form-data' 将图像从 iphone 发布到 .NET webservice 时出错](https://stackoverflow.com/questions/2067742/system-invalidoperationexception-request-format-is-invalid-multipart-form-dat)

# zend-framework2 - 如何访问自定义文件的数据库

> ID：15896557
> 
> 赞同：1
> 
> 时间：2013-04-09T08:07:36.643
> 
> 标签：zend-framework2

除了控制器、表单、模型和视图之外，我还想创建一个包含一些通用功能类的文件。例如 common.php

所以我是否需要为我的这个自定义文件创建其他连接文件，或者有任何其他方式来使用 zend 数据库文件（config/local.php 和 config/global.php）

我应该在哪个文件夹下创建这个文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:21:47.693

错误的概念。`YourNamespace\Stdlib`使用包含通用功能的类创建一个-Library。然后这些类将被注入他们需要的依赖项。例如：

```
getServiceConfig() {
    return array( 'factories' => array(
        'stdlib-dbstuff' => function ($sm) {
            $dbStuff = new \YourNamespace\Stdlib\DbStuff();
            $dbStuff->setAdapter($sm->get('Zend\Db\Adapter\Adapter'));
            return $dbStuff;
        }
    ));
} 
```

[`Zend\Stdlib`](https://github.com/zendframework/zf2/tree/master/library/Zend/Stdlib)有关一些示例，请参见命名空间下的类；）

要使用您`Stdlib`只需从`ServiceManager`. 或者，您可以跳过`ServiceManager`并简单地注入 Controller-Level 上的依赖项（这有点糟糕，这不是控制器的责任）。

```
$dbStuff = $this->getServiceLocator()->get('stdlib-dbstuff');
// alternatively
$adapter = $this->getServiceLocator()->get('Zend\Db\Adapter\Adapter');
$dbStuff = new \YourNamespace\Stdlib\DbStuff();
$dbStuff->setAdapter($adapter); 
```

# sql - 获取 sql server 中的表和索引存储大小

> ID：15896564
> 
> 赞同：75
> 
> 时间：2013-04-09T08:07:57.420
> 
> 标签：sql, sql-server, sql-server-2008, indexing

我想为我的数据库中的每个表获取表数据和索引空间：

```
Table Name             Data Space           Index Space
------------------------------------------------------- 
```

我怎样才能达到这个结果？

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2013-04-09T08:12:54.517

此处的此查询将列出表占用的总大小 - 聚集索引、堆和所有非聚集索引：

```
SELECT 
    s.Name AS SchemaName,
    t.NAME AS TableName,
    p.rows AS RowCounts,
    SUM(a.total_pages) * 8 AS TotalSpaceKB, 
    SUM(a.used_pages) * 8 AS UsedSpaceKB, 
    (SUM(a.total_pages) - SUM(a.used_pages)) * 8 AS UnusedSpaceKB
FROM 
    sys.tables t
INNER JOIN 
    sys.schemas s ON s.schema_id = t.schema_id
INNER JOIN      
    sys.indexes i ON t.OBJECT_ID = i.object_id
INNER JOIN 
    sys.partitions p ON i.object_id = p.OBJECT_ID AND i.index_id = p.index_id
INNER JOIN 
    sys.allocation_units a ON p.partition_id = a.container_id
WHERE 
    t.NAME NOT LIKE 'dt%'    -- filter out system tables for diagramming
    AND t.is_ms_shipped = 0
    AND i.OBJECT_ID > 255 
GROUP BY 
    t.Name, s.Name, p.Rows
ORDER BY 
    s.Name, t.Name 
```

如果要将表空间与索引空间分开，`AND i.index_id IN (0,1)`则需要用于表空间（`index_id = 0`是堆空间，`index_id = 1`是聚集索引的大小=数据页）和`AND i.index_id > 1`仅索引空间

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-09T08:30:40.613

```
with pages as (
    SELECT object_id, SUM (reserved_page_count) as reserved_pages, SUM (used_page_count) as used_pages,
            SUM (case 
                    when (index_id < 2) then (in_row_data_page_count + lob_used_page_count + row_overflow_used_page_count)
                    else lob_used_page_count + row_overflow_used_page_count
                 end) as pages
    FROM sys.dm_db_partition_stats
    group by object_id
), extra as (
    SELECT p.object_id, sum(reserved_page_count) as reserved_pages, sum(used_page_count) as used_pages
    FROM sys.dm_db_partition_stats p, sys.internal_tables it
    WHERE it.internal_type IN (202,204,211,212,213,214,215,216) AND p.object_id = it.object_id
    group by p.object_id
)
SELECT object_schema_name(p.object_id) + '.' + object_name(p.object_id) as TableName, (p.reserved_pages + isnull(e.reserved_pages, 0)) * 8 as reserved_kb,
        pages * 8 as data_kb,
        (CASE WHEN p.used_pages + isnull(e.used_pages, 0) > pages THEN (p.used_pages + isnull(e.used_pages, 0) - pages) ELSE 0 END) * 8 as index_kb,
        (CASE WHEN p.reserved_pages + isnull(e.reserved_pages, 0) > p.used_pages + isnull(e.used_pages, 0) THEN (p.reserved_pages + isnull(e.reserved_pages, 0) - p.used_pages + isnull(e.used_pages, 0)) else 0 end) * 8 as unused_kb
from pages p
left outer join extra e on p.object_id = e.object_id 
```

考虑内部表，例如用于 XML 存储的表。

编辑：如果您将`data_kb`和`index_kb`值除以 1024.0，您将获得您在 GUI 中看到的数字。

# pdf - 使用 Sun PDFRenderer 进行 Java 打印编码

> ID：15896569
> 
> 赞同：0
> 
> 时间：2013-04-09T08:08:10.580
> 
> 标签：pdf, printing, pdfrenderer, pdfview

我是 Java 编程的初学者，也是 stackoverflow 的初学者。目前我正在尝试使用 com.sun.pdfview 库打印 PDF 文件。它经常工作，但是对于某些文档，我收到以下错误：

```
java.lang.IllegalArgumentException: Unknown encoding: SymbolSetEncoding
    at com.sun.pdfview.font.PDFFontEncoding.getBaseEncoding(PDFFontEncoding.java:199)
    at com.sun.pdfview.font.PDFFontEncoding.<init>(PDFFontEncoding.java:78)
    at com.sun.pdfview.font.PDFFont.getFont(PDFFont.java:133)
    at com.sun.pdfview.PDFParser.getFontFrom(PDFParser.java:1166)
    at com.sun.pdfview.PDFParser.iterate(PDFParser.java:719)
    at com.sun.pdfview.BaseWatchable.run(BaseWatchable.java:101)
    at java.lang.Thread.run(Thread.java:722) 
```

我应该通知您，这些文件是用高加索语（格鲁吉亚语）编写的，典型的字体是 Sylfaen。

错误发生在以下代码中：

```
 PDFRenderer pgs = new PDFRenderer(page, g2, imgbounds, null,null);
            try {
                page.waitForFinish();
                pgs.run(); 
```

我相信这些文件需要使用不同的编码或者我需要指定字体，不幸的是我找不到可以查看或更改设置的脚踝。

谢谢

马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:16:26.847

PDFRenderer only supports a limited subset of the PDF spec.

# mysql - MYSQL 语句一起使用 OR 和 AND

> ID：15896574
> 
> 赞同：0
> 
> 时间：2013-04-09T08:08:20.360
> 
> 标签：mysql, sql

我在 MySQL 中有一个名为 sale 的表，其中包含 3 列，如下所示：

```
id|customers|type 
```

我想选择具有 type!=2 的销售或具有 type=2 和客户的销售！=0

我这样写声明：

```
sale.type != 2 OR (sale.type = 2 AND sale.customers != 0 ) 
```

但它没有给我正确的行。

此外，我必须对这个查询中的其他列使用 AND ，但它们之间的运算符都是 AND ，在这里我使用 OR 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:11:17.963

只要记住这样的规则：括号 OR！

```
where foo = 'bar'
and (sale.type != 2 OR (sale.type = 2 AND sale.customers != 0 ) )
and blah = 3 
```

实际上，您的情况可以简化为：

```
( sale.type != 2 OR sale.customers != 0 ) 
```

因为从逻辑上检查 sale.type = 2 是多余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:13:34.857

您是否希望 sales.type 不等于 2 或（当您的客户不等于 0 时 sales.type 等于 2？）您可以同时使用 HAVING 和 WHERE。选择 * from sales where type !=2 or (type=2 HAVING customers !=0);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T08:16:17.550

只是我尝试这个我发现工作：[sqlfiddle](http://www.sqlfiddle.com/#!2/733d6/3)

```
select * from sale where
sale.type != 2 OR (sale.type = 2 AND sale.customers != 0 ) 
```

# jquery - 使用 .first() 和 .eq(0) 有什么区别？

> ID：15896577
> 
> 赞同：4
> 
> 时间：2013-04-09T08:08:25.837
> 
> 标签：jquery

使用这两种方法检索集合中的第一个元素有什么区别？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-09T08:16:55.657

取自jQuery 1.7.1的[实时源代码：](http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js)

```
,first:function(){return this.eq(0)},last:function(){return this.eq(-1)} 
```

因此，您怀疑`.first()`这只是一个包装器调用`.eq()`.

结论：没有任何区别。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:11:37.810

据我所知，没有区别。

# c++ - 为什么不能将结构作为模板非类型参数的值传递？

> ID：15896579
> 
> 赞同：15
> 
> 时间：2013-04-09T08:08:32.090
> 
> 标签：c++, templates, c++11

非类型模板参数显然*不是类型*，例如：

```
template<int x>
void foo() { cout << x; } 
```

除了这种情况，还有其他选择`int`，我想参考[这个很好的答案](https://stackoverflow.com/a/5687553/752976)。

现在，有一件事情让我很烦恼：结构。考虑：

```
struct Triple { int x, y, z; };

Triple t { 1, 2, 3 };

template<Triple const& t>
class Foo { }; 
```

现在，使用正常的非类型引用语义，我们可以编写：

```
Foo<t> f; 
```

这里值得注意的是`t` *can't* be`constexpr`或 even `const`，因为这意味着内部链接，这基本上意味着该行不会编译。我们可以通过声明`t`as来绕过它`const extern`。这本身可能有点奇怪，但真正让我想知道的是为什么这是不可能的：

```
Foo<Triple { 1, 2, 3 }> f; 
```

我们从编译器中得到了一个非常不错的错误：

> 错误：`Triple{1, 2, 3}`不是类型的有效模板参数，`const Triple&`因为它不是左值。

我们不能`Triple`在模板中按值指定，因为这是不允许的。但是，我无法理解那一小行代码的*真正问题。*不允许使用结构作为值参数的原因是什么。如果我可以使用三个`int`s，为什么不使用三个整数的结构？如果它只有微不足道的特殊成员，那么它在处理上应该与只有三个变量没有什么不同。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2020-02-16T00:25:19.913

更新了[c++20](/questions/tagged/c%2b%2b20 "显示标记为“c++20”的问题")用户的答案：

C++20 adds support for class literal (class with `constexpr` constructor) non-type template parameters, which would allow the example in the original question to work, provided the template parameter is accepted by value:

```
template<Triple t> // Note: accepts t by value
class Foo { };

// Works with unnamed instantiation of Triple.
Foo<Triple { 1, 2, 3 }> f1 {};

// Also works if provided from a constexpr variable.
constexpr Triple t { 1, 2, 3 };
Foo<t> f2 {}; 
```

Further, all template parameter instances of `Triple { 1, 2, 3 }` throughout the program will refer to the ***same*** static storage duration object:

```
template<Triple t1, Triple t2>
void Func() {
    assert(&t1 == &t2); // Passes.
}

constexpr Triple t { 1, 2, 3 };

int main()
{
    Func<t, Triple {1, 2, 3}>();
} 
```

From [cppreference](https://en.cppreference.com/w/cpp/language/template_parameters):

> 命名类类型 T 的非类型模板形参的标识符表示类型为 const T 的静态存储持续时间对象，称为模板形参对象，其值是对应模板实参转换为模板参数。**相同类型的程序中所有具有相同值的模板参数表示相同的模板参数对象。**

请注意，模板参数允许的类文字类型有很多限制。有关更多详细信息，请查看我写的这篇博客文章，解释文字类 NTTP 的用法和限制：[文字类作为 C++20 中的非类型模板参数](https://blog.keha.dev/posts/cpp20-class-as-non-type-template-param/)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-09T08:26:49.093

让这一点工作很容易，但是人们会抱怨使用 struct 模板参数在其他模板参数所做的所有相同情况下都不起作用（考虑部分特化，或如何处理`operator==`）。

在我看来，整块蛋糕太乱了，只吃一小块还不够令人满意，可能更令人沮丧。只做这一点点工作不会给我比下面这样的东西更多的力量，它具有开箱即用的各种东西（包括部分专业化）的额外优势。

```
template <int X, int Y, int Z>
struct meta_triple {
    // static value getters
    static constexpr auto x = X;
    static constexpr auto y = Y;
    static constexpr auto z = Z;
    // implicit conversion to Triple 
    constexpr operator Triple() const { return { X, Y, Z }; }
    // function call operator so one can force the conversion to Triple with
    // meta_triple<1,2,3>()()
    constexpr Triple operator()() const { return *this; }
}; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-09T08:18:20.720

您可以定义`t`为`const extern`，给它外部链接。然后构造工作：

```
struct Triple { int x, y, z; };

const extern Triple t { 1, 2, 3 };

template<Triple const& t>
class Foo { };

Foo<t> f; 
```

[活生生的例子](http://ideone.com/omPQDB)。

不能将临时参数传递给引用模板参数的原因是该参数是**引用。**如果模板参数是`const int&`并且您尝试传递`7`. [例子](http://ideone.com/OYlVFh)。

**编辑**

`int`三个s 和一个包含三个 s 的结构之间的区别在于`int`，所有类型的文字`int`实际上都是相同的值（所有出现`7`的只是七个），而对结构的每个构造函数调用在概念上都会创建一个新实例。举这个假设的例子：

```
template <Triple t>
struct Foo {};

Foo<Triple {1, 2, 3}> f1;
Foo<Triple {1, 2, 3}> f2; 
```

我认为将这两个构造函数调用“匹配”到同一个模板实例化中会引入额外的复杂性。

# c# - 使用 iTextSharp 制作符合 PDF/A 且仅包含图像的 pdf

> ID：15896581
> 
> 赞同：8
> 
> 时间：2013-04-09T08:08:38.123
> 
> 标签：c#, .net, pdf, pdf-generation, itextsharp

我正在使用 iTextSharp 从图像生成 pdf-a 文档。到目前为止，我还没有成功。
**编辑：我正在使用 iTextSharp 生成 PDF**

我所尝试的只是制作一个带有一些图像的 pdf-a 文档（1a 或 1b，无论适合什么）。这是我到目前为止提出的代码，但是当我尝试使用[pdf-tools](http://www.pdf-tools.com/pdf/validate-pdfa-online.aspx)或[validatepdfa](http://www.validatepdfa.com/online.htm)验证它们时，我不断收到错误。

这是我从 pdf-tools 得到的错误（使用 PDF/A-1b 验证）： **编辑：MarkInfo 和色彩空间还没有工作。其余的还好**

```
Validating file "0.pdf" for conformance level pdfa-1a
The key MarkInfo is required but missing.
A device-specific color space (DeviceRGB) without an appropriate output intent is used.
The document does not conform to the requested standard.
The document contains device-specific color spaces.
The document doesn't provide appropriate logical structure information.
Done. 
```

**主流**

```
var output = new MemoryStream();
using (var iccProfileStream = new FileStream("ToPdfConverter/ColorProfiles/sRGB_v4_ICC_preference_displayclass.icc", FileMode.Open))
{
    var document = new Document(new Rectangle(PageSize.A4.Width, PageSize.A4.Height), 0f, 0f, 0f, 0f);
    var pdfWriter = PdfWriter.GetInstance(document, output);
    pdfWriter.PDFXConformance = PdfWriter.PDFA1A;
    document.Open();

    var pdfDictionary = new PdfDictionary(PdfName.OUTPUTINTENT);
    pdfDictionary.Put(PdfName.OUTPUTCONDITION, new PdfString("sRGB IEC61966-2.1"));
    pdfDictionary.Put(PdfName.INFO, new PdfString("sRGB IEC61966-2.1"));
    pdfDictionary.Put(PdfName.S, PdfName.GTS_PDFA1);

    var iccProfile = ICC_Profile.GetInstance(iccProfileStream);
    var pdfIccBased = new PdfICCBased(iccProfile);
    pdfIccBased.Remove(PdfName.ALTERNATE);
    pdfDictionary.Put(PdfName.DESTOUTPUTPROFILE, pdfWriter.AddToBody(pdfIccBased).IndirectReference);

    pdfWriter.ExtraCatalog.Put(PdfName.OUTPUTINTENT, new PdfArray(pdfDictionary));

    var image = PrepareImage(imageBytes);

    document.Open();
    document.Add(image);

    pdfWriter.CreateXmpMetadata();

    pdfWriter.CloseStream = false;
    document.Close();
}
return output.GetBuffer(); 
```

**这是prepareImage()**
，它是用来将图像展平为bmp的，所以我不需要为alpha通道操心。

```
private Image PrepareImage(Stream stream)
{
    Bitmap bmp = new Bitmap(System.Drawing.Image.FromStream(stream));
    var file = new MemoryStream();
    bmp.Save(file, ImageFormat.Bmp);
    var image = Image.GetInstance(file.GetBuffer());

    if (image.Height > PageSize.A4.Height || image.Width > PageSize.A4.Width)
    {
        image.ScaleToFit(PageSize.A4.Width, PageSize.A4.Height);
    }
    return image;
} 
```

任何人都可以帮助我找到解决错误的方向吗？具体来说`device-specific color spaces`

**编辑：更多解释：我想要实现的是，将扫描的图像转换为 PDF/A 以进行长期数据存储**

**编辑：添加了一些我用来测试**
PDF 和图片的文件。rar (3.9 MB)
[https://mega.co.nz/#!n8pClYgL!NJOJqSO3EuVrqLVyh3c43yW-u_U35NqeB0svc6giaSQ](https://mega.co.nz/#!n8pClYgL!NJOJqSO3EuVrqLVyh3c43yW-u_U35NqeB0svc6giaSQ)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:40:32.077

好的，我检查了你在 callas pdfToolbox 中的一个文件，上面写着：“使用了设备色彩空间，但没有 PDF/A 输出意图”。我认为这表明您在向文档写入输出意图时做错了。然后我使用相同的工具将该文档转换为 PDF/A-1b，差异很明显。

也许您还需要修复其他错误，但这里的第一个错误是您在名为“OutputIntent”的 PDF 文件的目录字典中放置了一个键。那是错误的：PDF 规范的第 75 页指出密钥应该命名为“OutputIntents”。

就像我说的，除此之外，您的文件可能还有其他问题，但错误的密钥名称会导致 PDF/A 验证器找不到您尝试放入文件的输出意图......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T13:56:12.437

1.  首先，pdfx 不是 pdfa。

    2.  其次，您使用了错误的 PdfWriter。它应该是 PdfAWriter。

不幸的是，我没有图像问题的解决方案，但我有 1 和 2。

问候

```
using System;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using System.Text;
using System.IO;
using iTextSharp.text;
using iTextSharp.text.pdf;
using iTextSharp.text.html.simpleparser;
using iTextSharp.tool.xml;
using System.Drawing;
using System.Drawing.Imaging;

namespace Tests
{
    /*
     * References:  
     * UTF-8 encoding http://stackoverflow.com/questions/4902033/itextsharp-5-polish-character
     * PDFA http://www.codeproject.com/Questions/661704/Create-pdf-A-using-itextsharp
     * Images http://stackoverflow.com/questions/15896581/make-a-pdf-conforming-pdf-a-with-only-images-using-itextsharp
     */

    [TestClass]
    public class UnitTest1
    {
        /*
         * IMPORTANT: Restrictions with html usage of tags and attributes
         * 1\. Dont use * <head> <title>Sklep</title> </head>, because title is rendered to the page
         */

        // Test cases
        static string contents = "<html><body style=\"font-family:arial unicode ms;font-size: 8px;\"><p style=\"text-align: center;\"> Davčna številka dolžnika: 74605968<br /> </p><table> <tr> <td><b>\u0160t. sklepa: 88711501</b></td> <td style=\"text-align: right;\">Davčna številka dolžnika: 74605968</td> </tr> </table> <br/><img src=\"http://img.rtvslo.si/_static/images/rtvslo_mmc_logo.png\" /></body></html>";
        //static string contents = "<html><body style=\"font-family:arial unicode ms;font-size: 8px;\"><p style=\"text-align: center;\"> Davčna številka dolžnika: 74605968<br /> </p><table> <tr> <td><b>\u0160t. sklepa: 88711501</b></td> <td style=\"text-align: right;\">Davčna številka dolžnika: 74605968</td> </tr> </table> <br/></body></html>";

        //[TestMethod]
        public void CreatePdfHtml()
        {
            createPDF(contents, true);        
        }

        private void createPDF(string html, bool isPdfa)
        {
            TextReader reader = new StringReader(html);
            Document document = new Document(PageSize.A4, 30, 30, 30, 30);
            HTMLWorker worker = new HTMLWorker(document);

            PdfWriter writer;
            if (isPdfa)
            {
                //set conformity level
                writer = PdfAWriter.GetInstance(document, new FileStream(@"c:\temp\testA.pdf", FileMode.Create), PdfAConformanceLevel.PDF_A_1B);

                //set pdf version
                writer.SetPdfVersion(PdfAWriter.PDF_VERSION_1_4);

                // Create XMP metadata. It's a PDF/A requirement.
                writer.CreateXmpMetadata();
            }
            else
            {
                writer = PdfWriter.GetInstance(document, new FileStream(@"c:\temp\test.pdf", FileMode.Create));
            }

            document.Open();

            if (isPdfa) // document should be opend, or it will fail
            {
                // Set output intent for uncalibrated color space. PDF/A requirement.
                ICC_Profile icc = ICC_Profile.GetInstance(Environment.GetEnvironmentVariable("SystemRoot") +  @"\System32\spool\drivers\color\sRGB Color Space Profile.icm");
                writer.SetOutputIntents("Custom", "", "http://www.color.org", "sRGB IEC61966-2.1", icc);
            }

            //register font used in html
            FontFactory.Register(Environment.GetEnvironmentVariable("SystemRoot") + "\\Fonts\\ARIALUNI.TTF", "arial unicode ms");

            //adding custom style attributes to html specific tasks. Can be used instead of css
            //this one is a must fopr display of utf8 language specific characters (čćžđpš)
            iTextSharp.text.html.simpleparser.StyleSheet ST = new iTextSharp.text.html.simpleparser.StyleSheet();
            ST.LoadTagStyle("body", "encoding", "Identity-H");
            worker.SetStyleSheet(ST);

            worker.StartDocument();
            worker.Parse(reader);
            worker.EndDocument();
            worker.Close();
            document.Close();
        }

    }

} 
```

# facebook - facebook分享问题，登录方式如何影响分享行为？

> ID：15896587
> 
> 赞同：4
> 
> 时间：2013-04-09T08:08:54.467
> 
> 标签：facebook, ios6

我有一个 ios 6 应用程序，第一页上有一个 facebook 登录。我正在使用 facebook-sdk 3.2。登录过程类似于[美味教程](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/authenticate/)。因此，如果有会话，用户会自动登录，否则他必须按登录。我还有一个共享对话框。它类似于[分享教程](https://developers.facebook.com/docs/howtos/share-native-dialogs-ios-sdk/)。

1.  如果用户在**iOS-Settings**中填写了他的 Facebook 登录信息，则会出现一个本机登录对话框（弹出框）。如果用户登录并触摸共享按钮，则会出现本**机共享对话框**。
2.  如果用户**没有在****iOS-Settings**中填写他的 facebook 登录信息，则会有一个 fast-app-switch-login。如果用户登录并触摸共享按钮，他最终会进入**后备共享对话框**。

现在到奇怪的部分：

如果用户选择方式 2，关闭并重新启动应用程序，如果 facebook 会话存在，他会自动登录。如果用户随后触摸共享，则会弹出本**机共享对话框（应为回退共享对话框），并要求用户在 iOS 设置中填写其凭据。**

有没有办法让行为保持一致？我不在乎是否有请求的后备共享对话框或本机对话框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T05:08:07.170

我相信 facebook 致力于单点登录体验。当用户进入 #2 时，它还会将用户登录到 facebook。

# python - 如何在 Python 的 SciPy 中更改稀疏矩阵中的元素？

> ID：15896588
> 
> 赞同：21
> 
> 时间：2013-04-09T08:08:56.187
> 
> 标签：python, math, scipy, linear-algebra, sparse-matrix

我已经构建了一个小代码，我想用它来解决涉及大型稀疏矩阵的特征值问题。它工作正常，我现在要做的就是将稀疏矩阵中的一些元素设置为零，即最上面一行中的元素（对应于实现边界条件）。我可以调整下面的列向量（C0、C1 和 C2）来实现这一点。但是，我想知道是否有更直接的方法。显然，NumPy 索引不适用于 SciPy 的 sparse 包。

```
import scipy.sparse as sp
import scipy.sparse.linalg  as la
import numpy as np
import matplotlib.pyplot as plt

#discretize x-axis
N = 11
x = np.linspace(-5,5,N)
print(x)
V = x * x / 2
h = len(x)/(N)
hi2 = 1./(h**2)
#discretize Schroedinger Equation, i.e. build 
#banded matrix from difference equation
C0 = np.ones(N)*30\. + V
C1 = np.ones(N) * -16.
C2 = np.ones(N) * 1.
diagonals = np.array([-2,-1,0,1,2])
H = sp.spdiags([C2, C1, C0,C1,C2],[-2,-1,0,1,2], N, N)
H *= hi2 * (- 1./12.) * (- 1\. / 2.)
#solve for eigenvalues
EV = la.eigsh(H,return_eigenvectors = False)

#check structure of H
plt.figure()
plt.spy(H)
plt.show() 
```

这是由上面的代码构建的矩阵的可视化。我想将第一行中的元素设置为零。![在此处输入图像描述](https://i.stack.imgur.com/ANHui.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-09T11:27:49.500

正如评论中所建议的，我将发布我对自己的问题找到的答案。SciPy 的 sparse 包中有几个矩阵类，它们在[此处](http://docs.scipy.org/doc/scipy/reference/sparse.html)列出。可以将稀疏矩阵从一类转换为另一类。因此，对于我需要做的事情，我选择将我的稀疏矩阵转换为 csr_matrix 类，只需通过

```
H = sp.csr_matrix(H) 
```

然后我可以使用常规 NumPy 表示法将第一行中的元素设置为 0：

```
H[0,0] = 0
H[0,1] = 0
H[0,2] = 0 
```

为了完整起见，我在下面发布了完整的修改代码片段。

```
#SciPy Sparse linear algebra takes care of sparse matrix computations
#http://docs.scipy.org/doc/scipy/reference/sparse.linalg.html
import scipy.sparse as sp
import scipy.sparse.linalg  as la

import numpy as np
import matplotlib.pyplot as plt

#discretize x-axis
N = 1100
x = np.linspace(-100,100,N)
V = x * x / 2.
h = len(x)/(N)
hi2 = 1./(h**2)

#discretize Schroedinger Equation, i.e. build 
#banded matrix from difference equation
C0 = np.ones(N)*30\. + V
C1 = np.ones(N) * -16.
C2 = np.ones(N) * 1.

H = sp.spdiags([C2, C1, C0, C1, C2],[-2,-1,0,1,2], N, N)
H *= hi2 * (- 1./12.) * (- 1\. / 2.)
H = sp.csr_matrix(H)
H[0,0] = 0
H[0,1] = 0
H[0,2] = 0

#check structure of H
plt.figure()
plt.spy(H)
plt.show()

EV = la.eigsh(H,return_eigenvectors = False) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-24T06:43:29.587

在 scipy 中使用`lil_matrix`比简单的`numpy`方法更有效地更改元素。

```
H = sp.csr_matrix(H)
HL = H.tolil()
HL[1,1] = 5  # same as the numpy indexing notation
print HL
print HL.todense() # if numpy style matrix is required
H = HL.tocsr()    # if csr is required 
```

# android - ASP.NET MVC4 Web API & 会话变量

> ID：15896590
> 
> 赞同：2
> 
> 时间：2013-04-09T08:08:59.117
> 
> 标签：android, asp.net, asp.net-mvc-4, asp.net-web-api

在我的 asp.net mvc4 项目中，我使用 ApiControllers 为 Web 客户端和移动客户端提供服务。为了保护 Web 服务，我使用了 [Authorize] 注释。所以现在，网络客户端工作正常。但是，当我倾向于从移动应用程序（例如 Android）调用一些 Web API 时，我得到了一个错误。当我回顾代码片段时：

```
 [Authorize]
    public List<double> GetSomeInfo(int param1, string param2)
        {
           User user = SessionData.CurrentUser;
           // do something using user.UserId
           // ....

        } 
```

只有当用户连接到 Web 应用程序时，会话数据才会保存用户连接的属性。但在移动客户端的情况下，会话数据为空。那么，有没有合适的方法来解决这个问题。在我看来，我认为应该将 userId 作为参数提供给任何可能需要它来实现某些处理的 Web API。你怎么看 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T14:00:45.387

你在谈论两件不同的事情：

*   **会议**

正如 Darrel 所说，Web Api 并不是为支持 Asp.net Session 而设计的。HTTP 和 Rest 服务是无状态的——因此，每个 HTTP 请求**本身都应该携带足够的信息，**以便其接收者对其进行处理，从而与 HTTP 的无状态特性完全一致。因此，不要依赖会话变量，而是在您的请求中添加更多参数。当然，Web Api 中有一种使用 session 的方法，我建议你使用它。

*   **验证**

Because working with only paramaters ( such as UserId, AccountId, ...) is not very secure, you have to use Authentication and Authorization. I highly suggest you to read the [security section](http://www.asp.net/web-api/overview/security/authentication-and-authorization-in-aspnet-web-api) in asp.net web api web site. Web Api support many authentications (Basic, OAuth, Windows, Custom, ...). You have to choose what is the best for you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:29:52.840

Web API 并非旨在支持会话，因为它们是 HTTP 反模式。如果您已设置必要的身份验证机制，则可以通过访问 Thread.CurrentPrincipal 来获取当前经过身份验证的用户。

# algorithm - 解决基于版本范围依赖的算法

> ID：15896591
> 
> 赞同：12
> 
> 时间：2013-04-09T08:08:59.630
> 
> 标签：algorithm, dependencies, graph-algorithm

我有一个依赖算法的问题，依赖类似于 maven 依赖，除了它是基于严格的版本范围的。

例如：

```
component A, version 1 depends on: component B, version 1~3; and component C, version 2~3
component D, version 1 depends on: component B, version 2~4; and component C, version 1~2 
```

现在，当我想安装组件 A，版本 1 和组件 D，版本 1 时，我想获得依赖项。因为它们都依赖于组件 B、C，所以我需要一个正确的算法来获得正确版本的 B 和 C

此外，我可能需要升级组件 A 和 D。例如，现在我有以下新版本：

```
component A, version 2 depends on: component B, version 3~5; and component C, version 4~5
component A, version 3 depends on: component B, version 6~7; and component C, version 4~5
component D, version 2 depends on: component B, version 3~4; and component C, version 3~4 
```

现在我需要一个算法来获得正确版本的 A 和 D，我可以升级到它们及其所有依赖项。这里的一个问题是组件 A，版本 3 和组件 D，版本 2 存在组件 B 的依赖冲突

是否存在解决此类问题的算法？或类似（更容易）的问题。你有什么建议吗？

由于不应该有很多数据，所以不要考虑性能。

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-02T11:37:39.163

通过以下从 3SAT 的减少，这个问题是 NP-hard。给定一个 3CNF 公式，对于每个变量，都有一个具有两个版本的组件，对于每个子句，都有一个具有三个版本的组件。我们想安装一个版本的“超级”组件，它依赖于所有子句组件，但对版本并不挑剔。对于每个子句，子句组件 1 取决于出现在子句中的第一个变量，如果字面量为正，则需要版本 1，如果为负，则需要版本 0。子句组件 2 取决于第二个变量等。当且仅当公式可满足时，我们才能安装超级组件。

鉴于这种减少，将您的问题表述为[约束满足是有意义的](http://en.wikipedia.org/wiki/Constraint_satisfaction_problem). 每个组件都是一个变量，其可能的值是该组件的版本，如果没有安装该组件是一个选项，则加上“未安装”。对于每个版本依赖于组件 B 的版本的组件 A，存在一个涉及 A 和 B 的变量的约束，将版本的选择限制为其域产品的特定子集。对于第一个示例中的 A 和 B，这是 {(1, 1), (1, 2), (1, 3)}，因为 A 版本 1 依赖于 B 版本 1~3。如果 A 的版本 2 也可用，则此约束将是 {(1, 1), (1, 2), (1, 3), (2, 3), (2, 4), (2, 5) }。如果我们不必安装 A 或 B，那么 {(none, none), (none, 1), (none, 2), (none, 3), (none, 4), (none, 5), (1, 1), (1, 2), (1, 3), (2, 3), (2, 4), (2, 5)}。

由于您的实例很小，您可能需要一个完整的回溯搜索，可能带有约束传播。约束传播的一种常见算法是[AC-3](http://en.wikipedia.org/wiki/AC-3_algorithm)，它强制执行弧一致性，即根据已消除的内容从考虑中删除所有明显不起作用的版本。例如，给定约束 {(1, 1), (1, 2), (1, 3)}，我们可以消除 B = none，因为 none 永远不会出现。现在 B 的选择受到限制，我们可以推断 B 的依赖 C 等。当没有更多的简化要做时，我们必须猜测；一种策略是选择剩余版本最少的组件并递归地尝试所有组件（回溯）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:43:41.660

这是[可满足性问题](http://en.wikipedia.org/wiki/Boolean_satisfiability_problem)的变体。osgi 也必须处理这个问题。因此，您可以查看 osgi 规范和/或实现，看看他们是如何解决它的。

# android - 如何跨多个进程测试 Android 应用程序？

> ID：15896595
> 
> 赞同：3
> 
> 时间：2013-04-09T08:09:10.960
> 
> 标签：android, testing, automation, robotium

我有整个带有资源的平板电脑项目，并且已经有一堆结合 Robotium、Android 和 JUnit API 编写的测试用例

在一个正在测试的项目中，某个活动使用了特殊属性`android:process=":remote"`。在已加载此属性的活动时，我可以使用 Robotium 方法，但无法访问当前屏幕上的元素。所以似乎我应该重新启动检测或初始化`Solo`. 我试图这样做，但没有帮助，似乎我无法在我的测试中的其他进程中重新启动它。也许有人有测试此类应用程序的经验，并且知道如何使用`Robotium`或直接使用 android.test API 来实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:29:52.907

您可以使用 IUAutomator，但它适用于 api >= 16：http: [//developer.android.com/tools/testing/testing_ui.html](http://developer.android.com/tools/testing/testing_ui.html)

您始终可以使用猴子跑步者：http: [//developer.android.com/tools/help/monkeyrunner_concepts.html](http://developer.android.com/tools/help/monkeyrunner_concepts.html) 但是它基于 x,y

没有使用robotium的选项，也没有用于测试多个进程的仪器。

# java - 如何遍历 jar 根目录中的每个 xml 文件

> ID：15896604
> 
> 赞同：1
> 
> 时间：2013-04-09T08:09:29.013
> 
> 标签：java

在我的应用程序运行时，我需要遍历位于我的 jar 根目录中的每个 xml 文件。

我知道我可以访问这样的具体文件

```
InputStream in = this.getClass().getClassLoader().getResourceAsStream( "filename.xml" ); 
```

但是我怎样才能接收到 jar 根目录中的文件列表呢？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:14:31.850

试试[这个](http://www.uofr.net/~greg/java/get-resource-listing.html)。

**Java：列出资源目录**
*的内容 ClassLoader.getResource() 函数可以非常方便地在 Java 中加载文件。这些文件可以从类路径上的任何文件夹或 JAR 文件中加载。然而，令人失望的是，API 缺少列出目录中所有文件的方法。（不，getResources() 不这样做。）这个实用函数来救援！*

# node.js - 在 Node.JS 中使用 'querystring.parse' 内置模块的方法来读取/解析参数

> ID：15896609
> 
> 赞同：2
> 
> 时间：2013-04-09T08:09:48.263
> 
> 标签：node.js, query-string, request.querystring, querystringparameter

**场景**：考虑以下代码：

```
var querystring = require('querystring');
var ParamsWithValue = querystring.parse(req._url.query); 
```

然后我可以读取任何[查询字符串](http://nodejs.org/api/querystring.html#querystring_querystring_parse_str_sep_eq_options)的值。
例如：如果请求的字符串是**http://www.website.com/Service.aspx?UID=Trans001&FacebookID=ae67ea324**
我可以分别用代码`ParamsWithValue.UID`& 获取查询字符串的值`ParamsWithValue.FacebookID`。

**问题：**我能够获取以上述相同方式传递的任意数量参数的值。但是第二次我在浏览器上收到以下错误响应。

**错误**：

```
{"code":"InternalError","message":"Cannot read property 'query' of undefined"} 
```

**问题**：从 URL 读取查询字符串的方法有什么问题。

**注意**：我不想使用任何框架来解析它。我试图仅依赖内置模块。

* * *

**更新**：当任何参数的值更改时，它会正确响应。但是，如果从不同的浏览器再次请求相同的值，则会引发相同的错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T08:47:30.303

1.  我认为你需要 req.url 而不是 req._url。

2.  req.url 是一个字符串，如果你想要一个 URI 实例使用 require('url').parse(req.url)

3.  所以，你最终应该有：

    `var ParamsWithValue = querystring.parse(require('url').parse(req.url).query);`

编辑：我纠正了第 1 点的错字，最后一个 req.url -> req._url

# git - 将推送的 git 提交转换为一个

> ID：15896611
> 
> 赞同：2
> 
> 时间：2013-04-09T08:10:12.523
> 
> 标签：git, project-management, bitbucket, git-reset

我正在为我所做的任何新项目使用样板。但是，我在样板文件中所做的提交会传递给新项目。我将如何简单地进行“初始提交”，其中包括一次提交中的所有内容并删除旧的提交历史记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:07:01.953

为此使用 rebase 命令

git rebase -i HEAD~N

N 是您想要合并为一个的提交数。然后进行强制推送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:30:41.017

您可以关注“ [git：如何压缩前两个提交？](https://stackoverflow.com/questions/598672/git-how-to-squash-the-first-two-commits) ”的问题，并在您的新仓库中压缩 n-commits。
脚本在[这里](https://stackoverflow.com/a/2662323/6309)，可以压缩第一个提交，同时重放您想要保留在新仓库历史中的其余提交。

```
git clone boilerplaterepo newrepo
# apply the script for git reset --soft $1 everything 
```

该解决方案使用，并且是“[实际用途](https://stackoverflow.com/questions/5203535/practical-uses-of-git-reset-soft/5203843)`git reset --soft`”之一的示例。[`git reset --soft?`](https://stackoverflow.com/questions/5203535/practical-uses-of-git-reset-soft/5203843)

* * *

如果您想要一个基于 rebase --interactive 的解决方案（不太实用，因为它涉及手动步骤），[请不要忘记`--root`选项 (git 1.7.12)](https://stackoverflow.com/a/2309391/6309)，以便重新设置为根提交。

```
 git rebase -i --root
 git push -f 
```

# opencv - 滑动窗口算法是否有任何非天真的方法？

> ID：15896612
> 
> 赞同：1
> 
> 时间：2013-04-09T08:10:14.770
> 
> 标签：opencv, computer-vision, sliding-window

我正在尝试从 2D rgb 图像中提取特征（后来扩展到 3D 深度数据）。

基本上我正在做的是在我的图像周围滑动一个 64 x 128 的窗口（稍后，在图像的较小比例版本上），步幅为 8x8。但是我发现这种方法真的很慢。

有没有可以加快这个过程的滑动窗口算法？

**编辑：**在使用 SVM 预测结果之前，我通过从滑动窗口中提取 HoG 特征（及其 3d 变体）来执行检测。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:06:08.817

如果您仅使用滑动窗口来检测对象，那么[本文](https://research.google.com/pubs/archive/34843.pdf)对于具有尺度不变性的分支定界方法是一个很好的参考。

# android - 在按钮中使用 android:drawable____ 时设置图像的侧面

> ID：15896620
> 
> 赞同：0
> 
> 时间：2013-04-09T08:10:39.123
> 
> 标签：android, image, button, drawable

这里有一个简单的问题：我正在自定义一些按钮，通过 android:drawableLeft 或 Right 在我的文本旁边放置一个图标，但我似乎无法找到如何准确地定义大小。我的图像恰好太大，超出了按钮的形状。

哦，当我在它的时候： android:drawableLeft 允许将图像放在文本的左侧，但是如何确定与文本的距离？就我而言，当我的文本居中时，它会自动转到按钮的最左侧。结果是一切都很好！

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:04:48.803

如果你想定义drawable的精度大小，你应该使用Java代码而不是android:drawableLeft

```
 Drawable dw = getResources().getDrawable(R.drawable.ic);
  dw.setBounds(0, 0, 100, 100); // set the size of the drawable to 100*100

  button.setCompoundDrawables(dw, null, null, null); 
```

因为

```
 android:drawableLeft // equals with  setCompoundDrawablesWithIntrinsicBounds 
```

和

```
 android:drawablePadding // this used to control the padding between the text and drawable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:24:47.900

我建议从[这个话题](https://stackoverflow.com/questions/1532876/android-combining-text-image-on-a-button-or-imagebutton)开始。

> 但是如何确定与文本的距离？

在这里你有一个答案：

> android:drawablePadding 可用于指定图像和按钮文本之间的填充量。

[资源](http://developer.android.com/reference/android/widget/TextView.html#attr_android:drawableBottom)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T08:29:05.973

我想这会成功的

`android:drawablePadding`结合使用并`android:paddingLeft`强制`android:paddingRight`文本和drawable向内朝向按钮的中心......

# android - 调试作为 Android 应用程序 prt 的 ndk Jni

> ID：15896623
> 
> 赞同：0
> 
> 时间：2013-04-09T08:10:50.353
> 
> 标签：android, android-ndk

我有一个部分用 C++ 编写并通过 ndk 编译的应用程序，该部分位于单独的 jni 文件夹中。我的问题是：我可以将 c++ 代码作为我的应用程序的一部分进行调试吗？我可以在 sdk 上开始调试，然后在我的 jni 代码上跳转到断点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:14:30.187

是的，[这是](http://mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-debugging/)Martin Hejna 的行礼方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:15:02.087

有一本书描述了这些东西[http://www.amazon.com/Android-Beginners-Guide-Sylvain-Ratabouil/dp/1849691525](https://rads.stackoverflow.com/amzn/click/com/1849691525)。它帮助了我，但在 Android 中进行整体 C++ 调试很痛苦，我尽可能使用 printfs 来代替。

# ios - uiview中的按钮不可点击

> ID：15896625
> 
> 赞同：0
> 
> 时间：2013-04-09T08:10:52.637
> 
> 标签：ios, uiview, uibutton

请帮忙..我的子类中有这个按钮，当我在我的uiview中添加子视图时，它不能被点击，知道吗？..谢谢

我的子类中的按钮：

```
- (void)configureDate{
    ChangeButton=[UIButton buttonWithType:UIButtonTypeRoundedRect];
    ChangeButton.frame= CGRectMake(10, 20, 100, 30);
    [ChangeButton setTitle:@"Change Date" forState:UIControlStateNormal];
    [ChangeButton addTarget:self action:@selector(changeDate) forControlEvents:UIControlEventTouchUpInside];
    [self addSubview:ChangeButton];
} 
```

我在我的 uiview 中添加了子类/按钮：

```
dateClass = [[DateClass alloc] init];
[dateClass configureDate];
[myView addSubview:dateClass];
[dateClass releaseTable]; 
```

该按钮出现但不可点击:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:06:21.847

尝试这个：

```
[myView addSubview:dateClass];
[myView bringSubviewToFront:dateClass]; 
```

尝试为 dateClass 和 ChangeButton 按钮设置 BG 颜色以进行测试。

```
- (void)configureDate{
ChangeButton=[UIButton buttonWithType:UIButtonTypeRoundedRect];
ChangeButton.frame= CGRectMake(10, 20, 100, 30);
[ChangeButton setTitle:@"Change Date" forState:UIControlStateNormal];
[ChangeButton addTarget:self action:@selector(changeDate) forControlEvents:UIControlEventTouchUpInside];
[self addSubview:ChangeButton];
self.backgroundColor=[UIColor redColor];
ChangeButton.backgroundColor=[UIColor yellowColor];

} 
```

# ruby - JRuby 调试器无法按预期工作

> ID：15896631
> 
> 赞同：0
> 
> 时间：2013-04-09T08:11:07.920
> 
> 标签：ruby, debugging, jruby

今天我尝试将 JRuby 与 Apache 的 Mahout 一起使用。但是我的调试器有问题。当我把`debugger`声明放在一个特定的地方时，它并没有止步于此。它稍后在脚本结束时停止，然后当然没有任何变量可用。这是我的 Gemfile：

```
source 'https://rubygems.org'

platform :jruby do
  gem "jruby_mahout"
  gem "ruby-debug"
end 
```

这是脚本：

```
require 'rubygems'
require 'ruby-debug'

puts "I am called"
debugger
puts "I should not be called before the debugger" 
```

但输出是：

```
I am called
/usr/local/rvm/gems/jruby-1.7.3@mahout/gems/ruby-debug-base-0.10.4-java/lib/ruby-debug-base.rb:215 warning: tracing (e.g. set_trace_func) will not capture all events without --debug flag
I should not be called
/usr/local/rvm/gems/jruby-1.7.3@mahout/gems/ruby-debug-0.10.4/cli/ruby-debug/interface.rb:129
finalize if respond_to?(:finalize)
(rdb:1) 
```

我想知道为什么会有这个警告`tracing (e.g. set_trace_func) will not capture all events without --debug flag`，因为我开始使用脚本`jruby test.rb --debug`

我在我的 OS X 10.8 上安装了带有 RVM 的 JRuby 1.7.3，调用时`jruby -version`我得到了这个输出：

```
jruby 1.7.3 (1.9.3p385) 2013-02-21 dac429b on Java HotSpot(TM) 64-Bit Server VM 1.6.0_43-b01-447-11M4203 [darwin-x86_64]
NameError: undefined local variable or method `rsion' for main:Object
  (root) at -e:1 
```

也许安装坏了，或者我做错了什么。任何建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:44:43.733

我自己解决了。尝试了半天，无意间把`--debug`语句放在了：

```
jruby --debug test.rb 
```

这很奇怪，但现在它按预期工作。

# html - 仪表板的绘图工具

> ID：15896632
> 
> 赞同：0
> 
> 时间：2013-04-09T08:11:07.820
> 
> 标签：html, plot, gnuplot, dashboard, rgraph

在浏览了一段时间可用的解决方案之后，真的很难选择最合适的工具来创建仪表板并用图表填充它。我想要一个包含多个绘图和表格的 html 页面。我正在考虑将数据输入存储在 csv 文件中，并进行适当的格式化。

要求是：

*   鼠标悬停时显示绘图坐标
*   能够在绘制的线上显示点的坐标（散点图中的点或条形图的条形值）在悬停时“坚持”到最近的线，并适当处理多条线（显示相同 x 的多个 y 值）
*   能够以交互方式打开/关闭绘图数据
*   易于嵌入到 html 页面中，不需要安装额外的插件
*   各种各样的情节类型
*   加载速度不会太慢且稳定，一页上可能有大约 50 个图（这仅供内部使用，所以速度并不那么重要）
*   以最小的努力完成这一切

到目前为止，我检查了（绝不是最终意见，如果我错了，请纠正我）：

*   **gnuplot+canvas** - 看起来不错，但他们页面上的示例对我来说效果不佳，并不总是能正确点击鼠标

*   **python+matplotlib+mplh5canvas** - 感觉有点原始，因为我理解上面的一些东西我需要自己在 Python 中实现

*   **RGraph**乍一看很棒，不确定好不好，因为没听说过，也没有 js 经验，很难定制（？）

*   其他一些看起来很糟糕的随机东西

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T11:03:07.423

RGraph 看起来很棒，而且很棒。使用起来不难，网上有很多例子。 [Rgraph 示例页面](http://www.rgraph.net/examples/) 他们有 22 种图表，如果我错了，请纠正我，正如我已经说过的，易于使用。网站上还提供了有关每种图表的可能性和内容的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T01:06:32.113

我最终使用了[Highcharts](http://www.highcharts.com/)，因为它具有非常先进的功能和现成的模板（除了问题中提到的内容）。

# python - 使用 Python 请求库限制下载大小

> ID：15896639
> 
> 赞同：0
> 
> 时间：2013-04-09T08:11:37.867
> 
> 标签：python, python-2.7, python-requests

我正在使用 Python 的请求库爬取一堆网页，但有时爬虫会偶然发现一个绝对庞大的页面，无论是 PDF 或视频还是其他庞大的文件。有没有一种好方法来限制它将下载的文件的最大大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:23:03.447

urlopen 对象有一个 info() 方法，它提供各种有用的标头信息，包括 Content-Length

有时这设置不正确，但在大多数情况下应该是正确的，并且会有所帮助

# jsf - Primefaces DataTable - 使用对话框删除会删除错误的条目

> ID：15896641
> 
> 赞同：1
> 
> 时间：2013-04-09T08:11:42.923
> 
> 标签：jsf, jakarta-ee, jsf-2, primefaces, facelets

我有一张表格。表格中的一列显示一行用于编辑和删除表格条目的按钮。当我从按钮的属性中删除一个条目调用控制器时`action`，它按预期工作。

但是一旦我添加了一个让用户确认删除的对话框，就会删除一个错误的条目。它始终是当前表中的最后一个条目。我不知道可能是什么原因 - 我`DataTable` `var`对按钮和对话框使用相同的。

我正在使用 JSF 2 (Mojarra 2.1.6) 和 Primefaces 3.5 部署在 Suse 12.2 机器上的 JBoss 7.1.1 上。

表格：

```
<h:form id="downloads">
    <ui:include src="components/table.xhtml"/>
</h:form> 
```

桌子：

```
<ui:composition>

  <p:dataTable value="#{controller.currentLevelResources}"
            var="download" id="downloadTable" scrollHeight="120" rows="10">

    <p:column sortBy="#{download.name}">
        <f:facet name="header">Name</f:facet>
        <h:outputText id="downloadName" value="#{download.name}" title="#{download.description}" />
    </p:column>

            ...

    <p:column>
        <ui:include src="menuBar.xhtml"></ui:include>
    </p:column> 
```

菜单栏：

```
<ui:composition>

        <p:commandButton id="edit"
            action="#{downloadEditController.editResource(download)}"
            icon="ui-icon-gear" title="Edit" oncomplete="updateStyles()"
            update=":downloads" />

        <p:commandButton id="delete" onclick="deletedDlg.show();"
            icon="ui-icon-trash" title="Delete" oncomplete="updateStyles()" />

        <p:dialog header="Delete confirmation" widgetVar="deletedDlg"
            resizable="false">
            <h:panelGroup layout="block" style="padding:5px;">
                <h:outputText
                    value="The Resource #{download} will be deleted. Proceed?" />
            </h:panelGroup>
            <p:commandButton id="deleteBtn" value="Delete"
                oncomplete="deletedDlg.hide(); updateStyles(); "
                action="#{downloadEditController.deleteResource(download)}"
                process="@this" update=":downloads">
            </p:commandButton>
            <p:commandButton value="Cancel" type="button"
                onclick="deletedDlg.hide();" />
        </p:dialog> 
```

如果我用这个替换对话框，一切正常：

```
<p:commandButton id="delete" icon="ui-icon-trash" title="Delete" 
action="#{downloadEditController.deleteResource(download)}" 
oncomplete="updateStyles()" update=":downloads" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T08:17:29.653

为每一行创建一个`<p:dialog>`不是一个好主意。

对于初学者，您最好`<p:dialog>`在`<p:dataTable>`.

接下来我要做的是在单击删除按钮时在您的 bean 中设置*id 或行 var*，如果在对话框中确认，请使用该*id 或来自 bean 的行 var*来删除。

这就是删除按钮的外观，设置`download`var`prepareDataForDeletion`并显示对话框...

```
<p:commandButton id="deleteConfirmation" icon="ui-icon-trash" title="Delete" 
    action="#{downloadEditController.prepareDataForDeletion(download)}" 
    onsucess="deletedDlg.show();"/> 
```

* * *

关于您当前的异常情况：这是因为您的所有对话框都相同`widgetVar`，并且下一个对话框一直覆盖先前声明的对话框，直到最后一个对话框。你可以像这样动态地给它们一个不同的小部件名称`widgetVar="deleteDlg_#{someIndex}"`，但是如果你只能有一个可重用的对话框，它的内容在打开之前会更新，那么这是没有意义的。

# oracle - 在休眠状态下动态切换oracle实例

> ID：15896643
> 
> 赞同：0
> 
> 时间：2013-04-09T08:11:49.040
> 
> 标签：oracle, hibernate, dynamic, instance

我们正在使用 Spring、tomcat、hibernate 和 oracle 11.0.2。有没有一种方法可以在不重新启动应用程序层的情况下在 2 个 oracle 实例（ins1 和 ins2）之间切换？hibernate 中是否有任何设置允许我们动态地执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:21:49.187

Spring 的 HotSwappableTargetSource 允许在运行时更改 bean。也许你可以根据自己的需要来使用它。仍然会有限制（例如两个数据库中的相同数据库模式，...）

见 [http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/aop/target/HotSwappableTargetSource.html](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/aop/target/HotSwappableTargetSource.html)

# sql - sql select with 不包含

> ID：15896644
> 
> 赞同：5
> 
> 时间：2013-04-09T08:11:50.243
> 
> 标签：sql, oracle

这是我的选择：

```
select MY_ID, JOB_ID
from MY_TABLE
where JOB_ID != 'bra%'
and JOB_ID != 'wes%'
and STS_DTTM < trunc (sysdate) -12 
```

它仍然选择值包含“bra”和“wes”的字段

谢谢和问候，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T08:15:01.453

应该：

```
select MY_ID, JOB_ID
from MY_TABLE
where JOB_ID not like 'bra%'
and JOB_ID not like 'wes%'
and STS_DTTM < trunc (sysdate) - 12; 
```

并且列名应该是job_name 或job_code，而不是Job_id。Job_id 听起来像一个数字:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T08:15:25.800

使用 NOT LIKE 代替 !=

```
select MY_ID, JOB_ID
from MY_TABLE
where JOB_ID NOT LIKE'bra%'
and JOB_ID NOT LIKE 'wes%'
and STS_DTTM < trunc (sysdate) -12 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T08:17:41.393

我不确定，但这个 SQL 请求可能有效：

```
 select MY_ID, JOB_ID
    from MY_TABLE
    where NOT (JOB_ID LIKE 'bra%' OR JOB_ID LIKE 'wes%')
    and STS_DTTM < trunc (sysdate) -12 
```

# build - Xamarin：使用 NDK 构建的 .so

> ID：15896650
> 
> 赞同：12
> 
> 时间：2013-04-09T08:12:17.897
> 
> 标签：build, android-ndk, java-native-interface, xamarin

我在 C 中的 Eclipse（Android 项目）上创建了两个简单的函数（设置和返回一个 int）。我使用 ndk-build 生成了一个 .so。我如何在 Xamarin 上使用这个 .so 并在我的 Xamarin.Android 项目上使用这两个函数？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-09T12:55:44.367

假设我们有一个名为 MyTest.so 的共享库，并且我们希望在 Xamarin.Android 项目中使用它。MyTest.so 包含一个函数

```
int MyTest_GetValue(); 
```

现在，我们需要在 Xamarin.Android 项目上使用此功能。以下是成功的步骤：

步骤 1：在 Xamarin.Android 项目中创建一个名为 lib 的新文件夹和子文件夹 armeabi。复制我的 .so 库以在 armeabi 文件夹中使用，如此处[所述](http://docs.xamarin.com/guides/android/advanced_topics/using_native_libraries)

第 2 步：将 library.so（导入库）的属性设置为“AndroidNativeLibrary”并将输出复制到“始终复制”。

第 3 步：（在 Xamarin.Android 类中工作，例如：MainActivity.cs）

*   通过“使用 System.Runtime.InteropServices;”包含命名空间 InteropServices；</p>

*   使用项目中的标准 DllImport 导入原生库，如下所示：

    ```
    [DllImport("MyTest.so")] 
    public extern static int MyTest_GetValue();// with exact Functtion Name, Type & Params in the .so Lib. 
    ```

第 4 步：在应用程序中使用上述函数 ( `MyTest_GetValue()`)。

例如：

```
int value= MyTest_GetValue();

Console.Writeline(value.ToString()); 
```

**任务完成！**:D

# c# - 需要绝对路径信息错误

> ID：15896655
> 
> 赞同：0
> 
> 时间：2013-04-09T08:12:49.133
> 
> 标签：c#

这是我的代码：

```
FtpConnection ftp = new FtpConnection(ConfigurationManager.AppSettings["server"], ConfigurationManager.AppSettings["user"], ConfigurationManager.AppSettings["password"]);
ftp.Open();
ftp.Login();
FtpFileInfo[] files = null;
if (ftp.DirectoryExists(some_name))
{
    ftp.SetCurrentDirectory(some_name);
    files = ftp.GetFiles("*.xlsx");
    string fileName = files[0].Name;
}
return; 
```

一切正常。fileName 变量具有正确的名称。但是，即使没有崩溃，我也会收到错误代码 500。错误说：需要绝对路径信息。

这是什么意思？如何解决？

当我调试时，我注意到当我扩展文件的属性时，有一个属性存在，它具有完全相同的错误。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T08:26:45.827

请参阅以下链接

尽管它们不是完全相同的问题-它应该为您指明正确的方向吗？

[链接1](http://p2p.wrox.com/net-framework-2-0/44150-exception-absolute-path-information-required.html)

[链接2](http://social.msdn.microsoft.com/forums/en-US/csharpide/thread/d8b66574-9b1c-480d-a5f7-260aa5fde5ad/)

希望这可以帮助

# css - JSF 输出文本溢出

> ID：15896669
> 
> 赞同：3
> 
> 时间：2013-04-09T08:13:41.013
> 
> 标签：css, jsf, jsf-2, primefaces

我正在尝试使用以下代码在面板中显示状态注释：

```
<p:panel>
    <ui:repeat var="Comment" value="#{Status.commentList}">
        <h:outputText value="#{Comment.Text}"/>
    </ui:repeat>
</p:panel> 
```

似乎评论太长了，面板上的文字溢出了。我已经对其进行了调查，发现它`h:outputText`正在生成一个跨度并试图通过 CSS 解决这个问题：

```
<h:outputText value="#{Comment.Text}"
    style="width: 100px!important; overflow-x: scroll!important;"/> 
```

给出一个固定的宽度，`overflow-x:scroll`应该可以解决问题，但它的渲染范围更广，即使我将其设置为 100 像素，它也会将其渲染为 400 像素，而不会注意到`!important`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:44:25.013

```
<h:outputText value="#{Comment.Text}"
    style="width: 100px; overflow-x: scroll; display:block;"/> 
```

是正确的方法。W3 说的是`display:block`；

> 在块格式化上下文中，框从包含块的顶部开始一个接一个地垂直排列。两个同级框之间的垂直距离由 'margin' 属性确定。块格式化上下文中相邻块框之间的垂直边距折叠。
> 
> 在块格式化上下文中，每个框的左外边缘接触包含块的左边缘（对于从右到左的格式化，右边缘接触）。即使存在浮动也是如此（尽管盒子的内容区域可能会由于浮动而缩小）。

这证明了为什么我的文本溢出它需要作为上下文值处理。

# linux - 增加 FD 限制然后 SSH 不起作用？

> ID：15896673
> 
> 赞同：-2
> 
> 时间：2013-04-09T08:13:54.463
> 
> 标签：linux, ssh, kernel, centos, file-descriptor

我正在使用 CentOS 6.3 64 位，并且在增加 FD 限制时遇到问题：更改限制后 SSH 无法正常工作，每次我登录我的服务器，输入密码后，然后“连接被远程服务器关闭”。

它是一个没有任何“救援模式”的远程服务器，因此无法进行本地登录以获取任何错误日志。在此问题发生之前，我也尝试了 ulimit -SHn，但效果不佳。

现在，每次发生此问题时，我都必须恢复快照，但仍然不知道我的服务器出了什么问题。

由于我正在使用每秒处理数百万个请求的高性能服务器，因此我需要非常高的 FD 限制，这是我的配置：

```
/etc/security/limits.conf
* hard nofile 2000000
* soft nofile 2000000

/etc/security/limits.d/90-nproc.conf  
*          soft    nproc     1024

/etc/ssh/sshd_config
Protocol 2
SyslogFacility AUTHPRIV
PasswordAuthentication yes
ChallengeResponseAuthentication no
GSSAPIAuthentication yes
GSSAPICleanupCredentials yes
UsePAM yes
AcceptEnv LANG LC_CTYPE LC_NUMERIC LC_TIME LC_COLLATE LC_MONETARY LC_MESSAGES
AcceptEnv LC_PAPER LC_NAME LC_ADDRESS LC_TELEPHONE LC_MEASUREMENT
AcceptEnv LC_IDENTIFICATION LC_ALL LANGUAGE
AcceptEnv XMODIFIERS
X11Forwarding yes
Subsystem       sftp    /usr/libexec/openssh/sftp-server

/etc/pam.d/sshd
auth       required     pam_sepermit.so
auth       include      password-auth
account    required     pam_nologin.so
account    include      password-auth
password   include      password-auth
session    required     pam_selinux.so close
session    required     pam_loginuid.so
session    required     pam_selinux.so open env_params
session    optional     pam_keyinit.so force revoke
session    include      password-auth
session    required     pam_limits.so   

/etc/sysctl.conf
fs.file-max = 2000000
fs.nr_open = 2000000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:17:55.523

2^20 是绝对极限。至少您必须更改`NR_OPEN`.`linux/fs.h`

```
#define NR_OPEN (1024*1024) /* Absolute upper limit on fd num */ 
```

我不建议将`limit.conf`价值提高到高于你必须的水平。许多程序试图关闭它们可能打开的每个文件描述符，尤其是在调用`exec`. 他们会循环很长时间来关闭未打开的描述符。

# enterprise-library - 使用 Enterprise 库进行批量日志记录

> ID：15896679
> 
> 赞同：0
> 
> 时间：2013-04-09T08:14:17.603
> 
> 标签：enterprise-library

您好我正在使用 Enterprise library 5.0 在文本文件中记录消息，作为其中的一部分，我需要将消息集合记录到文本文件中。

下面是使用 flatfilelistener 记录到文本文件的代码部分

```
public void LogToFile(string message, string category, IDictionary<string, object> additionalDetail)
{
    var logger = EnterpriseLibraryContainer.Current.GetInstance<LogWriter>();

    logger.Write(message, category, 0, 0, TraceEventType.Error, string.Empty, additionalDetail);
} 
```

以上将在文本文件中记录单个消息，就像我将调用我需要记录的集合中的每个项目。

那么，如何一次性记录所有内容？就像放置在缓冲区中并在单次拉伸时更新日志文件。

我猜有一个名为“AutoFlush”的属性，但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T01:53:22.993

[使用自动冲洗](https://stackoverflow.com/questions/9782946/how-to-understand-about-autoflush-property-of-logsource)

这可能是你最好的选择。只需让缓冲区处理它或创建一个自定义刷新机制，您可以在指定的持续时间内调用该机制，例如 http 请求的结束，或者如果您在应用程序崩溃并且您不能信任 autoflush 工作时偏执。

# java - 如何检查 PDF 是否受密码保护

> ID：15896691
> 
> 赞同：11
> 
> 时间：2013-04-09T08:15:10.470
> 
> 标签：java, passwords, itext, file-permissions, pdf-reader

我正在尝试使用 iText 的 PdfReader 来检查给定的 PDF 文件是否受密码保护，但出现此异常：

> 线程“主线程”中的异常 java.lang.NoClassDefFoundError:org/bouncycastle/asn1/ASN1OctetString

但是当针对非密码保护文件测试相同的代码时，它运行良好。这是完整的代码：

```
try {
    PdfReader pdf = new PdfReader("C:\\abc.pdf");
} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-03-16T02:05:08.110

**在旧版 PDFBox**

```
try
{
    InputStream fis = new ByteArrayInputStream(pdfBytes);                       
    PDDocument doc = PDDocument.load(fis);

    if(doc.isEncrypted())
    {
      //Then the pdf file is encrypeted.
    }
} 
```

**在较新版本的 PDFBox 中（例如 2.0.4）**

```
 InputStream fis = new ByteArrayInputStream(pdfBytes);
    boolean encrypted = false;
    try {
        PDDocument doc = PDDocument.load(fis);
        if(doc.isEncrypted())
            encrypted=true;
        doc.close();
    }
    catch(InvalidPasswordException e) {
        encrypted = true;
    }
    return encrypted; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-09T08:29:41.907

[从这里](http://pdfbox.apache.org/)使用 Apache PDFBox - Java PDF 库：
示例代码：

```
try
{
    document = PDDocument.load( "C:\\abc.pdf");

    if(document.isEncrypted())
    {
      //Then the pdf file is encrypeted.
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-09T08:52:41.917

我这样做的方法是尝试在`PdfReader`不传递密码的情况下读取 PDF 文件。如果文件受密码保护，`BadPasswordException`则会抛出 a。这是使用 iText 库。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-01-31T16:16:52.543

这是一个不需要 3rd 方库的解决方案，使用 PdfRenderer API。

```
 fun checkIfPdfIsPasswordProtected(uri: Uri, contentResolver: ContentResolver): Boolean {
    val parcelFileDescriptor = contentResolver.openFileDescriptor(uri, "r")
        ?: return false
    return try {
        PdfRenderer(parcelFileDescriptor)
        false
    } catch (securityException: SecurityException) {
        true
    }
} 
```

参考：[https ://developer.android.com/reference/android/graphics/pdf/PdfRenderer](https://developer.android.com/reference/android/graphics/pdf/PdfRenderer)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-11-28T06:20:58.470

```
try {
    PdfReader pdfReader = new PdfReader(String.valueOf(file));
    pdfReader.isEncrypted();
} catch (IOException e) {
    e.printStackTrace();
} 
```

您可以使用 iText PDF 库进行检查。如果它发生异常处理它（要求输入密码）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-01-24T05:33:58.283

试试这个代码：

```
 boolean isProtected = true;
    PDDocument pdfDocument = null;
    try
    {
        pdfDocument = PDDocument.load(new File("your file path"));
        isProtected = false;

    }
    catch(Exception e){
        LOG.error("Error while loading file : ",e);
    }
    Syste.out.println(isProtected); 
```

如果您的文档受密码保护，则它无法加载文档并抛出 IOException。使用验证上述代码`pdfbox-2.0.4.jar`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-04-27T18:28:44.760

```
public boolean checkPdfEncrypted(InputStream fis) throws IOException {
    boolean encrypted = false;
    try {
        PDDocument doc = PDDocument.load(fis);
        if (doc.isEncrypted())
            encrypted = true;
        doc.close();
    } catch (
            IOException e) {
        encrypted = true;
    }
    return encrypted;
} 
```

注意：在 iText 中存在一个极端情况，一些文件被加密保护但没有密码打开，读取这些文件并像这样添加水印

```
PdfReader reader = new PdfReader(src);
reader.setUnethicalReading(true); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-30T09:33:03.300

我不想使用任何第三方库，所以我使用了这个 -

```
 try {
                new PdfRenderer(ParcelFileDescriptor.open(file, ParcelFileDescriptor.MODE_READ_ONLY));
            } catch (Exception e) {
                e.printStackTrace();
                // file is password protected
            } 
```

如果文件受密码保护，我没有使用它。

# database - ER图中的一对多关系

> ID：15896699
> 
> 赞同：24
> 
> 时间：2013-04-09T08:15:25.413
> 
> 标签：database, relational-database, entity-relationship

我试图在 ER 图中显示以下内容：

```
There are instructors and courses, a course is taught by only one instructor
whereas an instructor can give many courses. 
```

![在此处输入图像描述](https://i.stack.imgur.com/Z669P.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/pYK2a.jpg)

我的问题是，两个图表之间有什么区别，换句话说，我们将哪条线变成箭头是否重要，或者仅重要的是箭头的方向？

另外，如果我们考虑映射基数；是1对多还是多对1？如果我们从课程的角度考虑，那就是多对一，但如果我们从教师的角度考虑，那就是一对多。我们如何决定这个？谢谢你。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-09T12:59:21.630

在 ER 图中，当表示关系时，不使用箭头。一些讲师在想要确定基数时使用此箭头，但这只是为了获得基数（1:1、1:M 和 N:M）

我已经用 Chen 表示法附上了 ER 图，并且还使用 Crow Notation，你可以使用它们中的任何一个。

![ER图](https://i.stack.imgur.com/thblX.jpg)

确定关系的基数是一个实际场景，没有硬性规则来获得它。你需要做的是从关系的一侧开始，取一个元组（实例），看看有多少来自另一个实体的元组参与了关系。然后反之亦然。然后你知道从每个实体到关系的元组参与数。当您决定基数（即教师集、课程集和教导关系类型）时，请考虑数学中的集合论和函数，那么这很容易，但如果您不是数学背景，请考虑实际场景。

**例如**

a) 对于 1 名讲师，他或她可以教授许多 (M) 课程

b) 1 门课程只有 1 位讲师

所以在讲师方面，a) 和 b) 中总是有 1，但在课程中，a) 和 b) 中有 M 和 1，对于讲师来说：课程基数是 1:M

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-07T15:19:09.837

我不认为另一个答案是完全正确的。

我会说*应该使用箭头，并且应该使用为关系的**每个方向*赋予有意义的名称的符号。在这种情况下，它将在一个方向上“教导”，而在另一个方向上“被教导”。要么在名称旁边使用箭头，要么将名称放在它所指的实体附近。您可以使用一条线（带有两个箭头）或两条线（每个带有一个箭头）。

我还建议基数只是一种约束，符号应该反映这一点。例如，关系的两个名称可以是“teaches (many)”和“isteacher by (exactly one)”。关键是你可能有“教（一个或两个）”或“由（正好两个）教”等等。

最好明确并清楚您的约束到底是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-04T15:38:00.257

两者都具有完全相反的基数

简单干净的线条意味着很多。

箭头表示一。

**如果我们考虑两者具有相同的基数。**

那么，多对多应该通过遵循第二个约定来表示（请假设关系集为菱形，实体集为矩形）

```
 INSTRUCTOR <---- TEACHES -----> COURSE 
```

这实际上没有任何意义。

**如果我们以相反的基数考虑两者。**

那么，多对多应该通过遵循第二个约定来表示（请假设关系集为菱形，实体集为矩形）

```
 INSTRUCTOR ----- TEACHES ------ COURSE 
```

没有明确的箭头总是被认为是多对多的。所以，这是正确的（只有当我们认为两者相反时）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-21T04:33:15.840

考虑一个“员工”实体集和“部门”实体集，将关系集设置为“管理”。Employee-------------Manage--------部门（实体集）（关系集）（实体集） 一对多关系意味着员工集的一个实体可以与部门实体集的多个实体相关联，但是部门集的一个实体最多可以与员工实体集的一个实体相关联。这意味着如果员工和部门实体集之间存在一对多的关系，那么每个员工可以管理多个部门，同时每个部门最多由一个雇主管理。

# asp.net - mvc 在没有 httpContext 或控制器上下文的情况下渲染部分视图

> ID：15896703
> 
> 赞同：5
> 
> 时间：2013-04-09T08:15:29.693
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

是否可以在没有 ViewContext 或 ControllerContext 的情况下呈现部分视图？

*   我正在尝试从 Controller Action 外部获取 PartialView Html 作为字符串。
*   或者
*   是否可以从其他方法调用控制器操作？（这将允许我执行控制器操作并以这种方式获取部分视图 html）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T17:33:41.860

你可以试试[Razor Generator](http://haacked.com/archive/2011/08/01/text-templating-using-razor-the-easy-way.aspx) Visual Studio Extension。基本上，您在视图上运行自定义工具，它会生成一个类，您可以将模型传递给该类，它会生成一个字符串。

# javascript - 将 javascript 放在外部文件中的 html5 中

> ID：15896704
> 
> 赞同：6
> 
> 时间：2013-04-09T08:15:31.977
> 
> 标签：javascript, html

在 html5 中，我如何将下面的类（构造函数和方法）放在另一个文件中并在 html 文件中引用它。

下面我将所有内容都放在 1 个文件中，但我不希望这样。

```
 <canvas id="myCanvas" width="600" height="400"></canvas>
<script>
  var canvas = document.getElementById('myCanvas');
  var ctx = canvas.getContext('2d');
  ctx.font="14px Arial"; 

  //how to move to other file
  function ClassPerson(gender,name1) {
      var aa;
      this.gender=gender;
      this.name1=name1;
      aa=6;

  };

   //how to move to other file
  ClassPerson.prototype.m_sayGender = function()
    {
    ctx.fillText("this gender= " + this.gender + " gender=" + this.name1,10,40);
    };

    //stay in this file
  var person1 = new ClassPerson('male','dave');
  var person2 = new ClassPerson('female','bet');
  ctx.fillText("this gender= " + person1.gender,10,20);
  person1.m_sayGender();
  myObject._three();

</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T08:16:40.420

您只需使用您的代码创建一个外部 JS 文件并像这样包含它：

`<script src="myFile.js"> </script>` 或者

```
<script src="<myFile>.js" type="text/javascript"></script> 
```

确保将 JS 文件放在您的 HTML 文件所在的目录中

评论后：我想你必须用 javacript 动态创建一个图像，设置它的 porpertie`src`和显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:18:47.957

在外部 *.js 文件中设置类的整个 JS 代码。然后将其导入您的 *.html 文件，如下所示：

```
<script src="<external-file-name>.js" type="text/javascript"></script> 
```

# javascript - 使用 window.open 进行的操作

> ID：15896706
> 
> 赞同：1
> 
> 时间：2013-04-09T08:15:35.630
> 
> 标签：javascript, html, window

我有一个通过执行以下操作打开页面的 javascript 代码： `location.href("newPage.cfm?param1=xxx&param2=yyy");`

“newPage”必须返回到之前，传入一些参数，像这样：

`location.href("prevPage.cfm?param1=www&param2=kkk")`.

现在，我想做同样的事情，打开 newPage，使用：

`window.open`

我的问题是：我怎样才能返回上一页，关闭新的（`window.close`），但传递新的参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:36:14.940

您可以使用 访问上一个窗口`window.opener`。[http://www.w3schools.com/jsref/prop_win_opener.asp](http://www.w3schools.com/jsref/prop_win_opener.asp)

因此，您只需将代码更改为：

```
window.opener.location.href("prevPage.cfm?param1=www&param2=kkk");
window.close(); 
```

这是在您*打开*的窗口中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:45:08.000

你也用这个。

```
<script language="javascript">
         window.opener.location = "prevPage.cfm?param1=www&param2=kkk";
         window.close();
</script> 
```

# python - Sphinx 文档模块属性

> ID：15896707
> 
> 赞同：11
> 
> 时间：2013-04-09T08:15:37.737
> 
> 标签：python, properties, python-sphinx, metaclass, python-module

我有一个应该有的模块`@property`，我通过将一个类设置为模块来解决这个问题。我从这个答案中得到了想法：[懒惰的模块变量——可以做到吗？](https://stackoverflow.com/questions/1462986/lazy-module-variables-can-it-be-done/1463773#1463773)

我希望这是可重复且易于使用的，因此我为它制作了一个元类。这就像一个魅力。

问题是当使用 Sphinx 生成文档属性时没有记录。其他所有内容都按预期记录。我不知道如何解决这个问题，也许这是 Sphinx 的问题？

模块：

```
import sys
import types

class ClassAsModule(type):
    def __new__(cls, name, bases, attrs):
        # Make sure the name of the class is the module name.
        name = attrs.pop('__module__')
        # Create a class.
        cls = type.__new__(cls, name, bases, attrs)
        # Instantiate the class and register it.
        sys.modules[name] = cls = cls(name)
        # Update the dict so dir works properly
        cls.__dict__.update(attrs)

class TestClass(types.ModuleType):
    """TestClass docstring."""
    __metaclass__ = ClassAsModule
    @property
    def some_property(self):
        """Property docstring."""
        pass
    def meth():
        """meth doc"""
        pass 
```

以及用于生成/查看 Sphinx 文档的复制粘贴：

```
sphinx-apidoc . -o doc --full
sphinx-build doc html
xdg-open html/module.html 
```

最重要的部分是记录类的属性。奖励积分还可以记录原始模块成员。

**编辑：**该类应记录为它所在的模块。该类以这种方式使用，因此应该以这种方式出现在 Sphinx 中。

所需输出的示例：

```
Module Foo
    TestClass docstring.

    some_property
        Property docstring.

    meth()
        meth doc 
```

**编辑2：**我发现了一些可能有助于找到解决方案的东西。`foo`具有以下内容的常规模块时：

```
#: Property of foo
prop = 'test' 
```

狮身人面像记录这样的：

```
foo.prop = 'test'
    Property of foo 
```

如果`prop`是类的属性，则同样有效。我还没弄清楚为什么它在我的特殊情况下不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T21:37:44.447

这是我的理解。

理论是：让你的类像一个模块一样~~的变种~~人这种（有点hacky）的方式让sphinx认为他不需要（解析）模块的属性（因为它是一个类级别的范例）。所以，对于 sphinx 来说，`TestClass`是一个模块。

首先，要确保罪魁祸首是使类像模块一样运行的代码 - 让我们删除它：

```
class ClassAsModule(type):
    pass 
```

我们将在文档中看到：

```
package Package
    script Module

    class package.script.ClassAsModule
        Bases: type

    class package.script.TestClass
        Bases: module

        TestClass docstring.

        meth()
            meth doc

        some_property
            Property docstring. 
```

如您所见，sphinx 毫无问题地读取了该属性。这里没什么特别的。

* * *

您的问题的可能解决方案是避免使用`@property`装饰器并将其替换为调用`property`类构造函数。例如：

```
import sys
import types

class ClassAsModule(type):
    def __new__(cls, name, bases, attrs):
        # Make sure the name of the class is the module name.
        name = attrs.pop('__module__')
        # Create a class.
        cls = type.__new__(cls, name, bases, attrs)
        # Instantiate the class and register it.
        sys.modules[name] = cls = cls(name)
        # Update the dict so dir works properly
        cls.__dict__.update(attrs)

class TestClass(types.ModuleType):
    """TestClass docstring."""
    __metaclass__ = ClassAsModule

    def get_some_property(self):
        """Property docstring."""
        pass

    some_property = property(get_some_property)

    def meth(self):
        """meth doc"""
        pass 
```

对于此代码 sphinx 生成：

```
package Package
    script Module
        TestClass docstring.

            package.script.get_some_property(self)
                Property docstring.

            package.script.meth(self)
                meth doc 
```

答案可能是一派胡言，但我希望它能为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T16:34:47.850

我发现最好的方法是保持文件内容与编写常规模块一样，然后最后替换胚胎模块`sys.modules`：

```
"""Module docstring.  """

import sys
import types

def _some_property(self):
    pass
some_property = property(_some_property)
"""Property docstring."""

def meth():
    """meth doc"""
    pass

def _make_class_module(name):
    mod = sys.modules[name]
    cls = type('ClassModule', (types.ModuleType,), mod.__dict__)
    clsmod = cls(name)
    clsmod.__dict__.update(mod.__dict__)
    clsmod.__wrapped__ = mod
    sys.modules[name] = clsmod
_make_class_module(__name__) 
```

文本文档：

```
mymod Module
************

Module docstring.

mymod.meth()

   meth doc

mymod.some_property = None

   Property docstring. 
```

对于我正在使用的 Sphinx 版本（v1.1.3），看起来您必须显式应用属性构造函数（您不能将其用作装饰器），并且文档字符串必须放在顶部的文件中级别，在创建属性的构造函数调用之后的行上（它不能作为属性获取器内的文档字符串）。不过，源代码仍然相当可读。

# android - 在 google play 上使用 google maps V2 发布证书

> ID：15896714
> 
> 赞同：0
> 
> 时间：2013-04-09T08:15:55.107
> 
> 标签：android, google-maps, google-maps-api-3

[我已经成功实现了 Google maps V2。我已经按照Google Map Tutorial](https://developers.google.com/maps/documentation/android/start)的描述进行了调试 。[现在是时候在 Google Play 上使用 Google Maps 发布我的应用程序了。为此，我必须制作 Google maps 的发布证书。而且我不了解发布证书指纹](https://developers.google.com/maps/documentation/android/start)的第一步。

1.  从哪里下载 Keystore 文件？它来自 api 控制台谷歌
2.  发布证书密钥库文件在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:22:14.707

它是您自己创建的用于签署应用程序的密钥库。你不会从任何地方下载它。你不应该把它给任何人，甚至是谷歌。

有关详细信息，请参阅[http://developer.android.com/tools/publishing/app-signing.html#releasemode](http://developer.android.com/tools/publishing/app-signing.html#releasemode)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-20T07:13:51.240

当我在我的应用程序中使用 Google Maps V2 时，我在将我的应用程序发布到 google Play 时也遇到了同样的问题。成功解决这个问题后，我写了一篇关于这个的博客文章，你可以[看看](http://smdaudhilbe.wordpress.com/2014/02/19/how-to-create-release-keystore-digitally-sign-publish-android-app-to-google-play-android-market/)。

正如每个人都要求的那样，我会在以下步骤中说出答案 1）使用 eclipse adt 注册您的应用程序 2）记下将显示在 eclipse adt 控制台上的 SHA1 指纹 3）再次转到谷歌控制台并获取 API_KEY您的应用程序通过使用上述获得 SHA1 指纹 4) 将旧 API_KEY 替换为应用程序的 manifest.xml 上的新 API_KEY 5) 再次注册您的应用程序。您的应用已准备好发布。但请记住，一旦您将应用程序发布到谷歌市场，您应该能够通过使用之前用于发布的密钥库签署**.apk来发布应用程序的更新。**

希望这可以帮助 ...

# c# - 是否有其他方法可以编写此代码以获得更大的灵活性

> ID：15896715
> 
> 赞同：1
> 
> 时间：2013-04-09T08:15:56.230
> 
> 标签：c#, design-patterns

现在，我在 db 中有一个包含 5 个学生（示例）的列表，其 ID 依次为 1、2、3、4、5。

在我的代码中，我想通过**使用不同的函数**以多种不同的方式对待这些学生。

例如，学生 ID 1 将使用函数名称“Call_History()”

学生 2 将用于函数名称“Get_Record()”

其余类似。

这是我的代码：

```
if(studentID == 1) Call_History();
else if(studentID == 2) Get_Record();
else .... 
```

因此，对于**10 个学生**的列表，我必须**编写代码 if...else 10 次**。这里我想问的是：有什么方法（除了使用switch）可以帮助我写代码更灵活吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:19:36.287

使用以下设计模式之一

[http://en.wikipedia.org/wiki/Template_method_pattern](http://en.wikipedia.org/wiki/Template_method_pattern) 或 [http://en.wikipedia.org/wiki/Strategy_pattern](http://en.wikipedia.org/wiki/Strategy_pattern)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T08:20:29.497

此示例使用 C# 编写，但其他语言（例如 Java）也有类似的数据结构。

您可以使用使用`Dictionary<int, Action>`所有操作/ID 组合初始化的 a。

然后执行以下操作：

```
if (actionMap.ContainsKey(studentId))
    actionMap[studentId](); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T08:20:03.947

使用字典

```
Dictionary<int, delegate> allStudentsAndActions=new (...);

allStudentsAndActions.Add(1, FirstMethod);
...
allStudentsAndActions.Add(N, OtherMethod); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T08:35:09.010

由于您需要根据学生的ID确定逻辑，因此您必须在某处编写代码，您不能跳过它。我认为工厂模式的一种方式也将帮助您使您的代码更好且可维护

# .net - 如何自定义窗口标题扩展，渐变

> ID：15896716
> 
> 赞同：1
> 
> 时间：2013-04-09T08:15:57.123
> 
> 标签：.net, wpf, visual-studio-2010, wpf-controls

![我必须使窗口外观如下图所示](https://i.stack.imgur.com/2ycDg.jpg)

```
Window x:Class="WPF_UI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Mian Window" WindowStyle="None" AllowsTransparency="True" Width="775" Height="500" 
```

我已经自定义了我的窗口标题 Extended,Gradient.How 应该在 wpf 中做什么。

我必须使窗口外观像 abv 图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:15:55.460

**尝试**在 Window 倾斜条上覆盖堆栈面板。使 WindowStyle="None" ResizeMode="NoResize" 并**调整控件的边距（MAKE TOP NEGATIVE OF STACKPANEL）**以覆盖标题栏上的窗口堆栈面板。

```
<Window x:Class="WPF_UI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
       WindowStyle="None" WindowStartupLocation="CenterScreen" ResizeMode="NoResize"  Width="920" Height="600" >

<Grid>....other stack panels....
**Here i have take stack panel to overwrite on window title bar.**
<StackPanel Margin="0,-566,0,5" Grid.ColumnSpan="3" Height="25" DataContext="{Binding}">
                <StackPanel.Background>
                    <LinearGradientBrush>
                        <GradientStop Color="White" Offset=".2" />
                        <GradientStop Color="Gray" Offset=".5" />
                        <GradientStop Color="Black" Offset="1" />
                    </LinearGradientBrush>
                </StackPanel.Background>
                <TextBlock HorizontalAlignment="Left" VerticalAlignment="Center" Margin="1,5,0,0"> APPLICATION NAME
                </TextBlock>
                <Button Content="Close" Margin="860,-17,0,0" VerticalAlignment="Center" HorizontalAlignment="Left" Name="btnClose" Width="40" >
                    <Button.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,2">
                            <GradientStop Color="Black" Offset=".2" />
                            <GradientStop Color="Gray" Offset=".5" />
                            <GradientStop Color="White" Offset="1" />
                        </LinearGradientBrush>
                    </Button.Background>
                </Button>
            </StackPanel>
</Grid> 
```

# jqgrid - 类“jqgrid-new-row”将由 addRow 添加但从未删除

> ID：15896718
> 
> 赞同：0
> 
> 时间：2013-04-09T08:15:57.873
> 
> 标签：jqgrid, row, add

我最近读过一个关于 jqgrid addrow 函数的错误的帖子： [http ://www.trirand.com/blog/?page_id=393/bugs/class-jqgrid-new-row-will-be-added-by -添加但从不删除/](http://www.trirand.com/blog/?page_id=393/bugs/class-jqgrid-new-row-will-be-added-by-addrow-but-never-removed/)

您能否将添加到 grid.inlinedit.js 的代码发送给我？我是 Jqgrid 的新手，我不知道如何将一个类删除到行中。

奥列格，如果你能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:17:32.143

[我在这里](http://www.trirand.com/blog/?page_id=393/bugs/class-jqgrid-new-row-will-be-added-by-addrow-but-never-removed/#p28527)报告的错误已经在[github](https://github.com/tonytomov/jqGrid)上的 jqGrid 的主要代码中修复。您可以在此处查看当前代码并[在](https://github.com/tonytomov/jqGrid/archive/master.zip)`grid.inlinedit.js` [此处](https://github.com/tonytomov/jqGrid/blob/master/js/grid.inlinedit.js)下载。

顺便说一句，我建议 Tony（参见[此处](http://www.trirand.com/blog/?page_id=393/releases/jqgrid-4-4-4/#p28591)）从 github 发布当前版本的 jqGrid 作为 jqGrid 的新版本（4.4.5）。他回答（见[这里](http://www.trirand.com/blog/?page_id=393/releases/jqgrid-4-4-4/#p28604)）他计划在这周做这件事。因此，您可能只需等待 1-2 天，然后从[标准下载位置下载](http://www.trirand.com/blog/?page_id=6)jqGrid 的新固定版本。

# java - 适用于 Java 的开源静态源代码分析工具（面向安全）

> ID：15896720
> 
> 赞同：6
> 
> 时间：2013-04-09T08:16:10.763
> 
> 标签：java, android, security, pci-dss, pci-compliance

我正在寻找一种开源静态源代码分析工具，可用于对安卓应用程序进行安全测试。我需要确保我的应用程序符合 PCI 标准。
Fortify 就是一个非开源工具的例子。
任何人都可以帮助提供推荐软件的列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:22:28.620

Java 源代码分析工具有很多开源工具，如 Dependometer、FindBugs、QJ-Pro 等。
[有关列表的更多详细信息。](http://java-source.net/open-source/code-analyzers)
[另一个链接](http://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:23:54.500

PMD 和 FindBugs 是我研究过的最好的静态代码分析器。你可以试试。您可以添加自己的规则并从中删除一些现有规则。

[https://www.sparkred.com/blog/open-source-java-static-code-analyzers/](https://www.sparkred.com/blog/open-source-java-static-code-analyzers/)

# php - 使用带有 cURL 的 imgur API 获取空白响应

> ID：15896737
> 
> 赞同：-1
> 
> 时间：2013-04-09T08:17:05.680
> 
> 标签：php, api, post, curl, imgur

这是我的代码 - 为什么我会得到一个空白响应？

```
<?php

$client_secret = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx';
$client_id = 'xxxxxxxxxxxxxxx';

$file = file_get_contents("test-image.png");

$url = 'https://api.imgur.com/3/image.json';
$headers = array('Authorization: Client-ID $client_id');
$pvars  = array('image' => base64_encode($file));

$curl = curl_init();

curl_setopt_array($curl, array(
   CURLOPT_URL=> $url,
   CURLOPT_TIMEOUT => 30,
   CURLOPT_POST => 1,
   CURLOPT_RETURNTRANSFER => 1,
   CURLOPT_HTTPHEADER => $headers,
   CURLOPT_POSTFIELDS => $pvars
));

$json_returned = curl_exec($curl); // blank response
echo "Result: " . $json_returned ;

curl_close ($curl); 

?> 
```

**编辑：**

一些 var_dump 结果：

```
var_dump(base64_encode($file)):
    string iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAQAAAD2e2DtAADS7ElEQVR4Xu39B7SlaVbehz9fPDndnEPl0F2dw8z05CEjGIQAC2ELhABhIbAlZMmyhOEvB0mWg2zZQsaykJElkdMwwOTUM527qit0xVs353NPjl/6r/Vb77prCcYwDNM9A5pzV9UNJ33nffe7w7OfvbeV6A++xeZfwr+UM4hs85unP/m3r97+EAGIlcjip4SffSVK+LurPw23r97cP+z820YAJFsJXzY//8m+/TUnsEciWeeS9+oF/QPJ+qvJC3pS56wXk5+3Fm1XG/FsUnJ837LDKIhdO52Sx4GJO4OZ6L5txYtBEF7Udf1k/CdeA/zpv/0lu+THtu046SStiqZUiRK1kqS1Fu62c9NzltXYq3V7g6LizPhYuuSN24/GW14qmkliHaiehNbJeCGeSBwNrY6G1lF80719b/U3N2U/kXmxrVgak5KD+KsC8GXe6HXNas9KKSfpyC44l+yB'...
(length=72080)

var_dump($json_returned):
    boolean false 
```

**编辑2：**

```
print_r(curl_getinfo($curl)):
    '( [url] => https://api.imgur.com/3/image.json [content_type] => [http_code] => 0 [header_size] => 0 [request_size] => 0 [filetime] => -1 [ssl_verify_result] => 0 [redirect_count] => 0 [total_time] => 0.296 [namelookup_time] => 0.047 [connect_time] => 0.312 [pretransfer_time] => 0 [size_upload] => 0 [size_download] => 0 [speed_download] => 0 [speed_upload] => 0 [download_content_length] => -1 [upload_content_length] => -1 [starttransfer_time] => 0 [redirect_time] => 0 [certinfo] => Array ( ) [primary_ip] => 54.243.128.92 [primary_port] => 443 [local_ip] => 192.168.1.69 [local_port] => 4923 [redirect_url] => )' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:47:48.747

您需要像这样设置一个完整的标题：

```
$post_header  = array("POST /3/image.json HTTP/1.1",
"Host: api.imgur.com",
"User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:9.0.1) Gecko/20100101 Firefox/9.0.1",
"Accept-Language: en-us,en;q=0.5",
"Accept-Encoding: gzip, deflate",
"Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7",
"Connection: keep-alive",
"Content-Type: application/x-www-form-urlencoded; charset=UTF-8",
); 
```

然后把这个header放到opt数组中`CURLOPT_HTTPHEADER => $post_header`

这就是 CURL POST 的工作方式。

.

此外，您需要使用`http_build_query()`构建要发送到的 postdata `CURLOPT_POSTFIELDS`，而不是直接数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:58:43.200

我已经解决了：

```
'Authorization: Client-ID $client_id' should have been
"Authorization: Client-ID $client_id" 
```

基础知识，要使用单引号，我必须连接。

# ubuntu - Sublime Text 2 - 为特定项目设置构建系统

> ID：15896738
> 
> 赞同：0
> 
> 时间：2013-04-09T08:17:13.477
> 
> 标签：ubuntu, sublimetext2, build-system

我想为一个项目设置一个特定的构建系统。在这种情况下，我不必每次切换项目时都切换构建系统。我尝试按照我在这个[网站](http://www.sublimetext.com/docs/2/projects.html)上找到的说明在项目文件中定义构建系统。

我将构建系统切换为自动，但 sublime 仍然使用默认的 c++ 构建系统。

我正在使用 Ubuntu 12.10 32 位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:19:59.413

转到`tools -> Build System`并选择您在项目文件中定义的那个，否则 Sublime 将使用它的自动构建系统或用于 C++ 的预定义系统。

如果您没有看到您的构建系统的名称，那么您可能定义错误并且应该`project json`在 SO 上发布您的此处。

# solr - 我是 apache solr 的新手，并且正在开发一个包。solr 创建的索引只有 .CFS、.gen、insegmentparents 文件和 .del 文件

> ID：15896739
> 
> 赞同：0
> 
> 时间：2013-04-09T08:17:14.550
> 
> 标签：solr, lucene, solrj

我知道它包含原始格式的标题和文件数据，但这是否意味着每次我查询索引时，都会处理原始数据以找出术语的频率？因为我看不到 .frq 文件？有没有办法找出数据是如何存储在 .cfs 文件中的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:28:37.137

索引文件格式是[复合](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_0/fileformats.html#Compound%20Files)的，因此创建的 cfs 文件将所有文件组合在一起。

检查 [文件格式](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_0/fileformats.html)，它将提供 Lucene 索引文件格式的详细信息。

您可以使用[Luke](http://www.getopt.org/luke/)浏览您的 Lucene Index 文件。

# entity-framework - 如何避免 EF 4 中的无效并发修改

> ID：15896740
> 
> 赞同：0
> 
> 时间：2013-04-09T08:17:15.307
> 
> 标签：entity-framework, entity-framework-4.1

我有一个 3 层应用程序：

1.  客户端应用
2.  服务器应用
3.  数据库服务器

服务器使用 Entity Framework 4 向/从数据库读取数据。

想象以下情况：

1.  客户端应用程序创建具有`RowVersion`属性的实体实例。此时，该属性等于 null。
2.  客户端应用程序向服务器发送“将此实例保存在数据库中”的请求。
3.  服务器将对象保存在数据库中并自动设置`RowVersion`属性的值。但在客户端，该值仍然等于 null。
4.  客户端应用程序修改了它在第一步中创建的对象，向服务器发送请求，服务器在尝试保存对象的新版本时收到并发异常。

有没有解决这类问题的标准机制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:38:08.747

我不知道系统内部是如何工作的（认为客户端和服务器之间的通信使用一些 API）。正如我看到的那样，当 2 个客户端修改同一个实体时，您尝试处理这种情况，如果他试图保存比当前版本更旧的版本，您需要通知客户端。

所以我接下来会做：

*   在第 3 步服务器必须返回版本 ID（实体的第一次保存）
*   客户端对实体的下一次修改将有一个版本 id，您需要检查当前版本 id 是否等于或早于您在服务器上的版本（认为 rowversion 是时间戳）
*   服务器逻辑将处理此状态并发送给客户端响应：保存新版本（如果当前版本相同，将发送回新版本 id）或如果版本较旧（其他客户端已进行修改）则返回错误状态。

这就是简化的方式。

**[更新]**

看起来在本文中您会发现非常接近您的需求的实现： [http ://weblogs.asp.net/ricardoperes/archive/2012/05/28/yet-another-asp-net-mvc-crud-教程.aspx](http://weblogs.asp.net/ricardoperes/archive/2012/05/28/yet-another-asp-net-mvc-crud-tutorial.aspx)

# java - Tomcat 和 JSTL 错误

> ID：15896741
> 
> 赞同：0
> 
> 时间：2013-04-09T08:17:15.760
> 
> 标签：java, eclipse, tomcat, jstl

我需要一些帮助，拜托！

我在 Eclipse Helios 中执行示例时遇到问题。

我正在使用基于 Drools 的 portlet 开发 Liferay 6.1 和 Tomcat 7。

我读了一些与那个相关的其他帖子，但没有一个对我有用。

这是错误：

```
 Can't process TLD with route [http://java.sun.com/jsp/jstl/core] and URI [/WEB-INF/tld/c.tld] 
```

正如我在其他帖子上阅读的那样，我将 JSTL 2.1 库放在 WEB-INF/lib 文件夹中，并使用构建路径将其绑定到项目，但即使这样，错误仍然出现。

我还将此代码添加到 web.xml 中...

```
 <?xml version="1.0" encoding="UTF-8"?>
    <web-app 
         xmlns="http://java.sun.com/xml/ns/javaee" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee                
         http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" 
         version="3.0"> 
```

我应该怎么解决这个问题？

太感谢了，

金莺

# java - 使用 JTidy 从 html 中删除所需的标签

> ID：15896744
> 
> 赞同：1
> 
> 时间：2013-04-09T08:17:20.860
> 
> 标签：java, dom, html-parsing, jtidy

我在解析 HTML 时使用 JTidy 和 xpath，但暂时解析文本给我带来了一些麻烦，因为它可能包含 b 标签，所以我不想循环它的子节点，而只是在之后删除'b'标签它加载html。

如果从 DOM 文档中，如何删除标签。

```
Document doc = tidy.parseDOM(url.openStream(), System.out); 
```

例如它的伪代码 -`doc.removeTag('<b>');`

可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:29:02.497

您已经用“jdom”标记了它，但您的文档是 DOM 文档（不是 JDOM）。

当然，如果*是*JDOM，您可以使用相对简单的文档扫描将元素替换为其内容。或者，您可以使用自定义 SAXHandler 来跳过首先添加元素。

例如，使用 JDOM，您可以执行以下操作：

```
for (Iterator <Content> it = document.getDescendants(); it.hasNext(); ) {
  Content c = it.next();
  if ((c instanceof Element) && "b".equals(((Element)c).getName())) {
    Element e = (Element)c;
    it.remove();
    for (Content k : e.getContent()) {
      k.detach();
      it.add(k);
    }
  }
} 
```

# clojure - 是否有任何宏可以帮助创建具有一个开放参数的函数？

> ID：15896751
> 
> 赞同：1
> 
> 时间：2013-04-09T08:17:33.767
> 
> 标签：clojure

`(map (fn [x] (func 1 2 x)) [0 1 2])`其中`func`需要 3 个参数可以`(map #(func 1 2 %) [0 1 2])`简写为。有没有可能让它更简洁？就像在 OCaml 中一样，`(func 1 2)`它本身就是一个函数。我不需要创建一个新的并将其传递给地图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T08:28:54.710

Clojure 不做自动柯里化，所以你不能只说`(func 1 2)`，但你可以使用`partial`：

`(map (partial func 1 2) [0 1 2])`

# c# - 如何在 WPF 中实现自定义的可排序和可扩展列表

> ID：15896761
> 
> 赞同：0
> 
> 时间：2013-04-09T08:18:01.213
> 
> 标签：c#, wpf

我需要实现一个定制的列表，如下所示。您应该能够通过单击标题对给定字段上的项目进行排序。一条线也应该是可扩展的。当用户单击 + 时，该行应展开并在其 field2 值下显示更多信息。

![我的需要：](https://i.stack.imgur.com/dQow4.png)

我曾尝试在 GridView 中使用 ListView。对于每一列，我定义了一个模板（field1 值的模板，左侧带有 +，一个用于字段 2 值，一个用于字段 3 值）。有了这个实现，我的问题是“如何扩展一行”。

我还查看了 ListBox 组件，但我需要手动创建标题并对齐内容。我还需要手动排序。这对我来说似乎不是一个好的解决方案。

你有什么更好的主意，或者任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:43:31.800

正确的基础 Control 似乎是`DataGrid`. 它将为您提供诸如对标题进行排序等功能。

`ControlTemplate`如果您希望它看起来像屏幕截图中的那样，则必须通过样式对其进行修改。

作为如何获得详细扩展的灵感，以下文章可以帮助您：

[WPF中DataGrid中的分组](http://www.c-sharpcorner.com/uploadfile/dpatra/grouping-in-datagrid-in-wpf/)

您还可以考虑查看第三方 dataGrids，以防标准 DataGrid 无法满足您的所有需求，但使用单独的模板可以让您走得更远。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:28:36.247

如果我理解正确，“扩展”是指在一行（或特别是列表视图项）下显示某事？

如果是这种情况，例如，在您的数据模板中添加一个堆栈面板，并将其可见性更改为折叠；

通过单击“+”按钮，将折叠更改为可见。

```
<ListView ...>
   <ItemTemplate>
       <GridView ...>
           <Button Name="ExpandButton Click="OnClick"/>
       <StackPane  Visibility={Binding SomeProperty} />
   <Itemtemplate>
</ListView> 
```

在 Onclick 中，更改 SomeProperty=Visibility.Visible。我假设您对 WPF 中的数据绑定感到满意。

# apache - Apache 重定向页面时，重写条件用户代理为 IE 8 并包含 URI

> ID：15896763
> 
> 赞同：1
> 
> 时间：2013-04-09T08:18:05.353
> 
> 标签：apache

我有一个要求，当客户端代理不是 IE 8 并且请求的 URI 包含一个字符串时，应用程序应重定向到一个页面，该页面向用户显示友好警告消息以使用 IE8 访问该站点，并且以下 RewriteCondition 不起作用.

感谢您是否可以提出一些想法来解决这个问题，我尝试了各种组合，但似乎没有一个有效。

```
 `RewriteCond %{HTTP_USER_AGENT} !MSIE\s8`
 `RewriteCond %{REQUEST_URI} ^/foobar.*`
 `RewriteRule ^/(.*)$ /foo/bar/warning.html` 
```

感谢您宝贵的时间，Sudheer

# gwt - 我如何在 gwt 示例中实现 log4j-gwt-1.0.jar 并想知道如何编写 log4j.properties 文件？

> ID：15896764
> 
> 赞同：0
> 
> 时间：2013-04-09T08:18:07.457
> 
> 标签：gwt, logging, gwt-rpc, gwt-log4j

当我在构建路径中使用 log4j-gwt-1.0.jar 文件时，它们各自的类没有找到即。记录器 logger=new Logger.getLogger(modulename.class); 得到错误。我还想知道如何编写 log4j.properties 文件以在 linux 文件结构的特定位置上的特定文件中写入日志。请尽快提供帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:42:16.143

**Log4j.properties**

```
# Define the root logger with appender file
log = /usr/home/log4j
log4j.rootLogger = DEBUG, FILE

# Define the file appender
log4j.appender.FILE=org.apache.log4j.FileAppender
log4j.appender.FILE.File=${log}/log.out

# Define the layout for file appender
log4j.appender.FILE.layout=org.apache.log4j.PatternLayout
log4j.appender.FILE.layout.conversionPattern=%m%n 
```

**log4jExample.java**

```
public class log4jExample{
      /* Get actual class name to be printed on */
      static Logger log = Logger.getLogger(
                          log4jExample.class.getName());

      public static void main(String[] args)
                    throws IOException,SQLException{

         log.debug("Hello this is an debug message");
         log.info("Hello this is an info message");
      }
    } 
```

所有库都应该在 CLASSPATH 中可用，并且您的 log4j.properties 文件应该在 PATH 中可用。因此，请执行以下操作：

`log4j.properties`如上图创建。

`log4jExample.java`如上图创建并编译。

执行`log4jExample`二进制以运行程序。

你会得到以下结果，里面的`/usr/home/log4j/log.out`文件：

```
Hello this is an debug message
Hello this is an info message 
```

更多详情请通过[链接](http://www.tutorialspoint.com/log4j/index.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:12:29.413

您不应再在 GWT 中使用第三方日志记录，例如 log4j-gwt-1.0.jar。GWT 在最近的几个版本中提供了一个很棒的日志库。[https://developers.google.com/web-toolkit/doc/latest/DevGuideLogging](https://developers.google.com/web-toolkit/doc/latest/DevGuideLogging)

您甚至可以使用 RemoteHandler[将客户端异常记录到服务器。](https://developers.google.com/web-toolkit/doc/latest/DevGuideLogging#Client_vs_Server_side_Logging)

GWT 团队在日志记录方面做得很棒。**使用它**。

浏览 Google GWT 日志记录示例代码 @ [https://code.google.com/p/google-web-toolkit/source/browse/#svn/trunk/samples/logexample/](https://code.google.com/p/google-web-toolkit/source/browse/#svn/trunk/samples/logexample/)

下载 Google GWT 日志记录示例代码 @ [https://google-web-toolkit.googlecode.com/files/gwt-2.5.1.zip](https://google-web-toolkit.googlecode.com/files/gwt-2.5.1.zip)

# export-to-excel - 使用 SQL Express 自动导出到 Excel（不是 CSV）

> ID：15896765
> 
> 赞同：0
> 
> 时间：2013-04-09T08:18:10.833
> 
> 标签：export-to-excel, sql-server-2012-express

我需要在单独的选项卡中将大约 20 个不同的查询结果导出到一个 Excel 文件中。

我知道我们可以使用 SSIS 包装，但由于我使用的是快速添加，它不会让我保存它。因为我将每两周运行一次检查，所以我正在寻找一些自动化。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T01:17:31.963

您在寻找工具还是方法？

我知道有 2 个工具可以做到这一点： [http ://www.r-tag.com/Pages/ReportManager.aspx](http://www.r-tag.com/Pages/ReportManager.aspx) [http://www.hybing.com/report-genie.html](http://www.hybing.com/report-genie.html)

报告精灵免费供个人使用，25 美元供企业使用。

R-Tag 是 25 美元，但每家公司提供 1 个免费许可证（可以从这里申请：[http ://www.r-tag.com/Pages/FreeCrystalReportsViewer.aspx](http://www.r-tag.com/Pages/FreeCrystalReportsViewer.aspx) ://www.r-tag.com/Pages/FreeCrystalReportsViewer.aspx ）

R-Tag 还有一个调度器（不包括在免费许可证中）

# c# - VirtualizingPanel 对许多孩子的行为很奇怪

> ID：15896766
> 
> 赞同：2
> 
> 时间：2013-04-09T08:18:14.910
> 
> 标签：c#, wpf, virtualization

嗨，我面临着以正确方式实施水平虚拟化面板的严重问题。到目前为止，虚拟化工作正常，项目位于正确的位置，但是当我滚动项目时，一些项目开始重叠（对我来说，项目 671090）并且以下项目开始在彼此之间产生间隙。这种效果会随着水平偏移而增加。我已经尝试在 Debug 中查看 itemposition 的问题，但它完全符合预期。在互联网上找到的不同实现具有相同的问题。我尝试了 Dan Crevier 提供的 VirtualizingTilePanel 实现和“SAMS WPF Control Development unleashed”中描述的 StaggeredPanel。当我添加很多项目时，两者似乎都有相同的问题。

重现步骤： 1\. 从[http://blogs.msdn.com/b/dancre/archive/2006/02/16/implementing-a-virtualizingpanel-part-4-the-goods.aspx下载示例](http://blogs.msdn.com/b/dancre/archive/2006/02/16/implementing-a-virtualizingpanel-part-4-the-goods.aspx)

或示例代码

[http://www.informit.com/store/wpf-control-development-unleashed-building-advanced-9780672330339](http://www.informit.com/store/wpf-control-development-unleashed-building-advanced-9780672330339)

1.  例如，为虚拟化添加 1000000 个项目。
2.  滚动数据
3.  我的问题从项目 671090 开始（可能取决于架构？）

编辑：Itemswidth 设置为 100.0，我的同事在同一索引处出现问题

任何帮助都会非常好。

谢谢和问候

# javascript - 将数据保存回 Google 我的地图

> ID：15896773
> 
> 赞同：1
> 
> 时间：2013-04-09T08:18:46.587
> 
> 标签：javascript, api, google-maps, kml

假设我有一个从 Google 我的地图加载 KML 文件的应用程序。然后我想更改一些数据（向标记添加描述，创建路线等）。最后我想把它保存回谷歌我的地图。那可能吗？

我在 Google Maps API Docs 中没有找到任何关于它的信息。:( 如果 Google 地图无法做到这一点，是否有任何其他服务可以接受 KML 文件，以便我可以将更改后的 KML 或 GeoXML 文件传递​​给他们并与...朋友...与任何人分享结果？

我现在拥有的只是一个虚拟应用程序[https://github.com/developer88/duggerknout](https://github.com/developer88/duggerknout)

# jqgrid - jqgrid 数据类型：用于 url 请求的 json，而 json 响应无法填充

> ID：15896775
> 
> 赞同：0
> 
> 时间：2013-04-09T08:18:52.217
> 
> 标签：jqgrid, mvcjqgrid

我想向服务器发出请求（同步）以填充 jqGrid。我这样做了：

```
$table.jqGrid({ 
                    datatype: "json",
                    url:'takepage/page=1',
                    mtype: 'GET',
                    ajaxSubgridOptions: { async: false },
                    colNames:['Result','Test'], 
                    colModel:[ {name:'result',index:'result',width:120}, 
                               {name:'test',index:'test', width:120}
                              ], 
                     pager: "#"+pager,
                     caption: "TESTjqGrid sync request to server",

                     jsonReader: {
                            repeatitems: false,
                            page: function(obj) { 
                                return obj.page; 
                            },
                            total: function(obj) { 
                                return obj.total; 
                            },
                            root: function (obj) { 
                                console.log(obj);
                                return obj; 
                            },
                            records: function (obj) { 
                                console.log(obj.rows.length);
                                return obj.rows.length; 
                            }

                        }

                }).jqGrid('navGrid', "#"+pager, {
                    add:    false,
                    edit:   false,
                    del:    false,
                    search: false,
                    refresh:false
                }); 
```

服务器的json响应是这样的：

```
{"total":1,"page":1,"rows":[{"result":null,"test":"val"}],"records":1} 
```

错误在哪里？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:08:27.473

您应该使用`jsonReader`与您发布的数据相对应的。对于您发布的 JSON 数据，您应该使用`jsonReader: {repeatitems: false}`. 来自的许多其他选项`jsonReader`是正确的，但`root`都是错误的。您必须从中*删除* `root`属性`jsonReader`或将其更改为`root: "rows"`或`root: function (obj) { return obj.rows; }`（的用法`return obj;`为假）。

`loadonce: true`此外，如果您的服务器未实现服务器端数据分页，我建议您使用。以任何方式选择`gridview: true`和`height: "auto"`推荐。

# jquery - 如何让css影响jquery加载的新内容？

> ID：15896778
> 
> 赞同：0
> 
> 时间：2013-04-09T08:18:56.710
> 
> 标签：jquery, css

我有一个外部 css 文件，现在我将一个表格加载到我的 html 页面中，css 文件如何影响新加载的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:22:38.247

jquery 附加的新内容（或附加的，或一般添加的）受到 DOM 中已经存在的任何 css 的影响。

问之前有试过吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:26:40.123

您需要预先设计样式，例如设计首先由 jquery 显示的部分，然后将其隐藏，然后显示您想要的任何事件。

```
.div
{
display:none;
border:2px solid #fff;
background-color:red;
height:100px;
width:200px;
} 
```

# jquery - 在 JSF2 中填充隐藏字段的更好方法

> ID：15896779
> 
> 赞同：4
> 
> 时间：2013-04-09T08:19:03.760
> 
> 标签：jquery, jsf-2

我一直在用 Jquery 研究 JSF2 一段时间。我在使用 JSF2 填充隐藏字段时遇到问题。我知道可以这样做

```
<h:inputHidden id="a" value="#{backingBean.a} /> 
```

这工作正常，但唯一的事情是我需要在我的支持 bean 中为“a”创建 getter 和 setter。但是我想通过传递另一个参数来调用支持 bean 方法，这将返回一个必须在“inputHidden”中设置的输出值。我试过这样使用

```
<h:inputHidden id="a" value="#{backingBean.populateA(b)} /> 
```

但是，这段代码在我的浏览器控制台上给了我一个警告，说用法不正确。我理解带参数的支持 bean 方法应该在 'action' 属性中调用，例如 in `<h:commandButton>`。如何使用 JSF2 甚至 Jquery 将某些东西用于隐藏字段？

请注意，我需要在页面加载时填充此输入隐藏字段。不确定是否可以完成。

提前感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:36:38.827

## 对主题的阐述

所有被设计用作“值持有者”的标签，即像`<h:inputText>`or之类的标签`<h:selectOneMenu>`，都由[`UIInput`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html)实现[`EditableValueHolder`](http://docs.oracle.com/javaee/6/api/javax/faces/component/EditableValueHolder.html)接口的类支持。在**应用请求值**阶段，用户提交的值是从请求参数中提取的，并被设置为适当组件类的提交值`UIInput#setSubmittedValue`。如有必要，可使用 预先转换这些值`Converter#getAsObject`。

接下来，每个“值持有者”组件都提供一个`value`属性，该属性将组件的值与支持 bean 的属性双向绑定。例如，当绑定的形式为 时，当需要从 bean 属性更新组件值时调用 then ，并在`value="#{bean.prop}"`更新模型**值**阶段更新模型值时调用。`bean.getProp()``bean.setProp(value)``value``UIInput#getValue()`

 **总而言之，`UIInput`组件**需要通过适当的 JSF 标记的属性与 bean 属性**进行双向绑定，`value`并且此绑定提供通过值表达式访问模型层中的数据。这给我们留下了表单`value="#{bean.prop}"`类型的值绑定。

## 基于某种方法的属性填充

当您不想使用直接的用户提交的值而是使用通过某种方法修改的值来填充 bean 属性时，您基本上剩下以下内容：

1.  在 和 中提供一个并在 bean 属性和[`Converter`](http://docs.oracle.com/javaee/6/api/javax/faces/convert/Converter.html)组件值之间进行一对一的映射。不要忘记在标签的属性中指定您的转换器。作为一个通常的参考点，您可以参考[JSF 2.0 中的通信](http://balusc.blogspot.ru/2011/09/communication-in-jsf-20.html#ConvertingAndValidatingGETRequestParameters)；`Converter#getAsObject``Converter#getAsString``converter`
2.  在 getter/setter 对中进行转换器类型的转换，例如 in`public String getProp(String s) { return modifyPropValue(this.prop); }`和`public void setProp(String s) { this.prop = modifyCompValue(s); }`. 我强烈反对这样做；
3.  在表单提交期间在 action(listener) 方法中进行转换。为此，您可以使用`dummyProp`bean 属性进行虚拟绑定，并`this.prop = modifyCompValue(dummyProp)`在您的 action(listener) 方法中执行此操作。您还可以注意到，拥有一个虚拟的roperty 是多余的，您可以通过访问必要的请求参数`FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("id")`。实际上，另一个答案中提出的解决方案是这种转换的一个特例，其中唯一有效的方法是转换值的填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:51:18.783

使用隐藏的命令按钮将值传递给方法

```
<h:commandButton value="Print" id="someButton" style="visibility: hidden;"
                    action="#{backingBean.populateA(b)}">
  <f:ajax execute="@this" render="a"/>
</h:commandButton> 
```

和一个隐藏的输入来接收输出

```
<h:inputHidden id="a" value="#{backingBean.a} /> 
```

触发所需事件时，使用 jQuery 单击按钮。**

# javascript - 将许多 JS 文件与 Rails 资产管道组合

> ID：15896780
> 
> 赞同：3
> 
> 时间：2013-04-09T08:19:08.677
> 
> 标签：javascript, ruby-on-rails, namespaces, asset-pipeline

我正在从 Rails 3.0.20 升级到 Rails 3.1.10。（稍后我将升级到 3.2，但我希望首先在 3.1 中使用我的代码库进行更重大的更改。我没有测试套件，所以请多多包涵，因为我克服了相当多的技术债务。值得庆幸的是，该应用程序并没有那么大或复杂。）

我的应用程序中的各种视图总是有单独的 JS 文件。现在，Asset Pipeline 想要将所有这些组合到一个文件中。问题是，我的很多变量和函数名称发生冲突，通常只会导致问题。

我的假设是我需要在这里使用某种命名空间，然后在需要它的页面上的特定命名空间中初始化代码。

有没有标准的方法来做到这一点？或者，总体上有更好的方法吗？

澄清一点：我还没有准备好切换到 CoffeeScript。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-08T21:15:14.740

资产管道的基石是清单文件。默认情况下，Rails 会在以下位置为 JavaScript 文件创建一个

```
app/assets/javascripts/application.js 
```

此清单使用*指令*来声明资产源文件中的依赖项。这些指令之一是

```
require_tree 
```

它的工作方式类似于 require 目录，但递归操作需要所有子目录中的所有文件。在我的 Rails 应用程序中，生成的`application.js`包含

```
//= require_tree . 
```

这需要 JavaScript 资产文件夹中的所有文件。通过删除它，不再将所有 JavaScript 文件合并为一个。然后，您必须要求每个视图的 JavaScript 文件。[这在 Rails 中每个视图的 JavaScript 文件](https://stackoverflow.com/questions/602147/javascript-file-per-view-in-rails)问题中得到了回答。

* * *

**话虽如此，请重新考虑您的计划。**毕竟 Rails 这样做不是为了惹恼你，而是有目的的。出于效率的原因，您应该尽可能少地使用 HTTP 请求。如果你所有的 JavaScript 代码都被预先加载，你可能会有更好的性能，例如由于缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:55:50.360

资产管道将允许为每个视图使用单独的 js 文件。在 app/assets/javascripts 中，您将能够为每个视图创建一个单独的 js 文件。因此，假设您有模型书籍和杂志。在 app/assets/javascripts 中，您可以为每个模型/视图拥有 books.js 和 magazines.js（或咖啡）。

此外，如果您还没有看过[http://railscasts.com/episodes/282-upgrading-to-rails-3-1](http://railscasts.com/episodes/282-upgrading-to-rails-3-1)，请看一看。

# android - Android Google Analytics 连接到服务失败

> ID：15896782
> 
> 赞同：12
> 
> 时间：2013-04-09T08:19:11.923
> 
> 标签：android, service, google-analytics, connection

我已经在我的 Android 应用程序中实现了 Google Analytics (V2)。不久前，代码成功地将数据发送到配置文件（V2）。但是现在它拒绝连接到服务：

```
04-09 14:42:49.911: W/GAV2(8576): Thread[main,5,main]: Need to call initialize() and be in fallback mode to start dispatch.
04-09 14:42:49.921: I/GAV2(8576): Thread[main,5,main]: ExceptionReporter created, original handler is com.android.internal.os.RuntimeInit$UncaughtHandler
04-09 14:42:50.051: D/libEGL(8576): loaded /system/lib/egl/libEGL_mali.so
04-09 14:42:50.061: D/libEGL(8576): loaded /system/lib/egl/libGLESv1_CM_mali.so
04-09 14:42:50.061: D/libEGL(8576): loaded /system/lib/egl/libGLESv2_mali.so
04-09 14:42:50.120: D/OpenGLRenderer(8576): Enabling debug mode 0
04-09 14:42:50.190: W/IInputConnectionWrapper(8576): showStatusIcon on inactive InputConnection
04-09 14:42:54.881: I/GAV2(8576): Thread[GAThread,5,main]: connecting to Analytics service
04-09 14:42:54.891: I/GAV2(8576): Thread[GAThread,5,main]: connect: bindService returned false for Intent { act=com.google.android.gms.analytics.service.START (has extras) }
04-09 14:42:54.901: W/GAV2(8576): Thread[GAThread,5,main]: Service unavailable (code=1), will retry.
04-09 14:42:54.941: I/GAV2(8576): Thread[GAThread,5,main]: No campaign data found.
04-09 14:42:59.911: I/GAV2(8576): Thread[Service Reconnect,5,main]: connecting to Analytics service
04-09 14:42:59.921: I/GAV2(8576): Thread[Service Reconnect,5,main]: connect: bindService returned false for Intent { act=com.google.android.gms.analytics.service.START (has extras) }
04-09 14:42:59.921: W/GAV2(8576): Thread[Service Reconnect,5,main]: Service unavailable (code=1), using local store.
04-09 14:42:59.921: I/GAV2(8576): Thread[Service Reconnect,5,main]: falling back to local store
04-09 14:42:59.971: V/GAV2(8576): Thread[GAThread,5,main]: dispatch running...
04-09 14:43:00.061: V/GAV2(8576): Thread[GAThread,5,main]: ...nothing to dispatch
04-09 14:43:00.061: I/GAV2(8576): Thread[GAThread,5,main]: PowerSaveMode initiated.
04-09 14:43:52.951: D/dalvikvm(8576): GC_CONCURRENT freed 197K, 4% free 7258K/7492K, paused 15ms+5ms, total 56ms
04-09 14:43:54.611: W/IInputConnectionWrapper(8576): showStatusIcon on inactive InputConnection 
```

我很确定我的代码已经足够了，因为它之前成功地发送了数据。这些是我实施的步骤（使用 Android Google Analytics V2 文档）：

清单补充：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

主要活动补充：

```
@Override
public void onStart() {

    super.onStart();
    EasyTracker.getInstance().activityStart(this);

}

@Override
public void onStop() {

    EasyTracker.getInstance().activityStop(this);
    super.onStop();
} 
```

xml (分析.xml)

```
<?xml version="1.0" encoding="utf-8" ?>

<resources>
  <!--tracking ID-->
  <string name="ga_trackingId">UA-(copied from profile)-1</string>

  <!--Enable automatic activity tracking-->
  <bool name="ga_autoActivityTracking">true</bool>

  <!--Enable automatic exception tracking-->
  <bool name="ga_reportUncaughtExceptions">true</bool>

  <!--Enable debug tracking-->
  <bool name="ga_debug">true</bool>

  <integer name="ga_dispatchPeriod">20</integer>
</resources> 
```

我在应用程序启动时收到警告。我试过创建一个新的个人资料/帐户。我试过使用 & #45; 和– 而不是破折号。自从在配置文件上收到最后一个数据以来已经 30 多个小时，从那时起上面的 logcat 行。

任何想法这是如何引起的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-10T00:34:46.520

可能不是你的情况，但无论如何。

我的应用程序中的分析工作正常。我正在使用 Eclipse，并决定切换到 Intellij IDE。当我这样做时，IDE 在我的 analytics.xml 文件的破折号字符上显示了一个印刷警告（关于 ga_trackingId）。当我做出改变（肉眼看不见）时，警告消失了，但分析只是停止工作。

可能与文件的编码有关，无论如何，但我的情况是我必须**输入**破折号而不是**粘贴**它（并且还在我的文件中添加一个 tools:ignore="TypographyDashes" 以消除警告）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T05:38:28.523

ga_debug 将此设置为 false 并尝试一次。可能你会得到它。

```
<!--Enable debug tracking-->
<bool name="ga_debug">false</bool> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-11T12:04:39.077

不确定这是否重要，但我的analytics.xml 存在于“值”而不是“xml”中，并且工作正常。

这是它的外观。希望这可以帮助。

```
<resources xmlns:tools="http://schemas.android.com/tools" tools:ignore="TypographyDashes">

    <!-- Replace placeholder ID with your tracking ID -->
    <string name="ga_trackingId">UA-8158474-29</string>

    <!-- Enable automatic activity tracking -->
    <bool name="ga_autoActivityTracking">true</bool>

    <integer name="ga_dispatchPeriod">40</integer>

    <!-- Enable automatic exception tracking -->
    <bool name="ga_reportUncaughtExceptions">true</bool>

</resources> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-19T12:24:05.847

您是否在 Google Analytics（分析）网络 UI 上检查过您实际上没有收到任何东西？

我也有调试打印，表明没有连接，但我的代码仍然有效（我也使用 EasyTracker）。当我在 Web UI 上查看事件时，我收到了事件。这也是你的情况吗？不幸的是，我不知道为什么调试器说它没有连接。

# css - 元素的边框颜色是否受其背景颜色的影响？

> ID：15896785
> 
> 赞同：6
> 
> 时间：2013-04-09T08:19:29.433
> 
> 标签：css

我正在重新研究 W3Schools 中的 CSS 概念。

我引用了这个有用的网站上的内容：

> *   **边框**- 围绕填充和内容的边框。边框受框的背景颜色影响

[http://www.w3schools.com/css/css_boxmodel.asp](http://www.w3schools.com/css/css_boxmodel.asp)

但是，如果我没有为我的边框指定颜色（我正在使用表格进行测试），则不会显示它。

那么 W3Schools 想要表达什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T08:25:44.733

> 但是，如果我没有为我的边框指定颜色（我正在使用表格进行测试），则不会显示它。

如果您不指定边框，则没有要绘制的边框。我不明白你引用的陈述是如何相关的。

无论如何，关于手头的实际问题......

> 元素的边框颜色是否受其背景颜色的影响？

只有在以下情况下：

*   边界不是完全实心和/或不透明的，并且

*   `background-clip`不是`border-box`（默认情况下）

如果它是具有透明区域的边框图像或半透明颜色（例如 an`rgba()`或`hsla()`颜色），则背景（如果有）将在边框下方可见。

如果`background-clip`是，则无论边框是图像`padding-box`还是`content-box`半透明颜色，边框甚至都不会与背景重叠。

这些是您必须努力实现的不常见场景，所以我不知道为什么 W3Schools 会费心指出这一点。*W3Schools不会*费心解释*为什么*会这样，我并不感到惊讶。郑重声明，那个网站并没有你想象的那么好。请参阅对您的问题的评论以了解原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:26:33.940

如果您的边框颜色具有 alpha 值或透明颜色或不纯色，则框的颜色会透出。
[http://jsfiddle.net/HerrSerker/WrZRL/](http://jsfiddle.net/HerrSerker/WrZRL/)

```
div {
    background-color: black;
    border: 10px solid rgba(255,255,0,0.5);
    width: 100px;
    height: 100px;
    margin: 10px;
}
div.d2 {
    background-color: red;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T10:14:02.127

忽略透明度...

在某些旧浏览器上，边框颜色（如果未明确设置）可能会受到某些`border-style`s（凹槽、脊、插图、开头等）的背景颜色的影响。例如，旧版本的 Chrome 在斜角边框样式的拐角处（奇怪地）显示了一种中间颜色`background-color`——尽管这几乎不引人注意，并且与`border-color`设置无关。（这可能是一个错误，已在以后的版本中修复。）

当`border-style`设置为“double”时，会`background-color`在边框内看到 。

但是，我觉得 w3schools 搞错了……

> 边框受框的~~背景~~颜色影响。

当未明确设置时，元素的**颜色**确实会影响边框的颜色。`border-color`但这取决于浏览器，因此不可靠。在 Chrome 中，如果没有明确设置，则 s`border-color`将与`color`dotted、dashed、solid 和 double s 相同。`border-style`

* * *

是否显示边框主要取决于`border-style`("none" 或 "hidden") 和`border-width`，通常不是`border-color`- 除非边框颜色与背景颜色匹配，在这种情况下*看起来*没有边框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T08:22:56.033

取决于你选择的组合如果边框更亮你会看到两者如果身体颜色更亮边框变得不那么明显所以在我看来最好选择更亮的边框你可能与我的观点不同..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T08:25:53.460

如果您的边框颜色和背景颜色相同，则边框将不可见。

# html - 锚标记不起作用

> ID：15896788
> 
> 赞同：1
> 
> 时间：2013-04-09T08:19:35.667
> 
> 标签：html, asp.net-mvc

我有两个锚标记，如下所示

```
<a href="www.exx.com" target="_blank">
            AnnualBudget</a> 
```

当我单击上面的 Anchor 标记时，它的 URL 不正确（**因为它已转到 Mydomainname/www.exx.com**）。但同时下面的锚标记正在工作并转到正确的 url 。

```
<a href="https://www.exx.com" target="_blank">
            AnnualBudget</a> 
```

**为什么 www 不起作用但 https 起作用**？我该如何解决这个问题？

**更新**：

*   **网址是从用户在文本框中输入的。那么我该如何检查呢？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T08:21:00.047

尝试在前面放一个“http://”。

IE

```
<a href="http://www.exx.com" target="_blank">AnnualBudget</a> 
```

“www”不是协议/方案。HTTPS 或[HTTP](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)是协议。

绝对 URL 必须在前面有一个“方案”，请参阅[Wikipedia 上有关 URL 的详细信息](http://en.wikipedia.org/wiki/Uniform_resource_locator#Syntax)。

或者，这也可以：

```
<a href="//www.exx.com" target="_blank">AnnualBudget</a> 
```

**更新1：**

既然您评论说您的输入来自用户，让我添加这个：

![在此处输入图像描述](https://i.stack.imgur.com/nlg6H.png)

（虽然这指的是[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)，但对于*所有*用户输入也是如此）。

**更新 2：**

要检查绝对 URL 的输入，请执行以下操作：

```
// Read from user input, e.g. (WebForms syntax!):
string my = MyTextBox.Text.Trim();

// Do some checking (this has be done much more thoroughly in real-life!)
if ( !my.StartsWith("http://") && !my.StartsWith("https://") )
{
    my = "http://" + my;
}

// Do something with "my", e.g. (again, WebForms syntax only):
MyHyperLink.NavigateUrl = my; 
```

（请注意，我不是 MVC 专家，上面的伪代码使用了 WebForms 语法）

# delphi - Delphi 2007 中的字节数组 PAnsiChar

> ID：15896794
> 
> 赞同：1
> 
> 时间：2013-04-09T08:19:49.017
> 
> 标签：delphi, bytearray

我有一个包含一些数据的字节数组...

```
CommandBytes : array of byte; 
```

我有一个向蓝牙打印机发送命令的 VCL 功能。VCL函数原型是这个

```
SendData(PAnsiChar, Cardinal); 
```

“此方法将字节从内存缓冲区传输到打开的设备”

如何正确传递字节数组以向打印机发送命令？

我是德尔福的新手，我试过：

```
SendData(PAnsiChar(@CommandBytes[0]), SizeOf(CommandBytes)); 
```

但它不起作用......

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T08:27:05.313

`SizeOf()`在动态数组上产生指针的大小。动态数组是一种引用类型，表示为指向数组第一个元素的指针。因此`SizeOf()`返回指针的大小。这对你没有用。

您需要`Length()`改用：

```
SendData(PAnsiChar(@CommandBytes[0]), Length(CommandBytes)); 
```

该[`Length()`](http://docwiki.embarcadero.com/Libraries/en/System.Length)函数返回数组中元素的数量。

更重要的是，我可能会简化您转换为`PAnsiChar`. 你可以像这样更简洁地做到这一点：

```
SendData(PAnsiChar(CommandBytes), Length(CommandBytes)); 
```

这很有意义`CommandBytes`，因为作为对动态数组的引用，它指向数组的第一个元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:27:03.270

将[`SizeOf(CommandBytes)`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.SizeOf)返回指针的大小。

用于[`Length(CommandBytes)`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Length)获取数组中的元素计数，在本例中是分配的缓冲区大小，因为 SizeOf(byte) = 1。

# ruby-on-rails - 存储和检索会话对象

> ID：15896795
> 
> 赞同：1
> 
> 时间：2013-04-09T08:19:49.153
> 
> 标签：ruby-on-rails, ruby

我将一个对象存储在哈希中，该对象位于会话对象中，如下所示：

```
 hash_key = ImportantData.new
    hash_key.test_id = params[:test_id]
    hash_key.user_id = params[:user_id]

    session[:important_data] ||= {}
    session[:important_data][hash_key] = nil 
```

然后我在我的另一个控制器中打印这个地图`session[:important_data][hash_key]`并尝试检查对象是否在那里：

```
hash_key = ImportantData.new
hash_key.schedule_id = @test.id
hash_key.user_id = @user.id

in_hash = session[:important_data].has_key?(hash_key) unless session[:important_data].nil? 
```

`in_hash`对我总是假的，我做错了什么？有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:43:00.960

在 Ruby 中，哈希键[通过相等来工作](http://ruby-doc.org/core-2.0/Hash.html#label-Hash+Keys)。只要您使用的密钥与存储的密钥相同，您就可以在哈希中存储和检索值。

例如：

```
hsh = { 'hello' => 'world' }
p hsh['hello']        #=> "world"
'hello'.eql? 'hello'  #=> true 
```

您可以检索该值，因为相同的值字符串始终`eql?`在 Ruby 中。

大多数对象并非如此：

```
class Example; end

object1 = Example.new
object2 = Example.new
object1.eql? object2    #=> false 
```

因此，您用来存储在散列中的键必须是`eql?`您用来检索的键。`eql?`等价于[`==`和`equal?`](http://ruby-doc.org/core-2.0/Object.html#method-i-eql-3F)。

您正在创建 的两个实例`ImportantData`，它们彼此不相等。看起来您可以使用单个哈希键完成您想要的操作：

```
hash_value = ImportantData.new
hash_value.test_id = params[:test_id]
hash_value.user_id = params[:user_id]

session[:important_data] ||= hash_value
puts session[:important_data].class.name    #=> ImportantData
session[:important_data].test_id            #=> puts out value of test_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:36:22.253

我认为你应该这样分配它

```
session[:important_data][:hash_key] = hash_key 
```

并访问它

```
session[:important_data][:hash_key] 
```

# linq-to-xml - 使用 linq 从带有 where 语句的 XElement 中选择

> ID：15896797
> 
> 赞同：0
> 
> 时间：2013-04-09T08:19:55.403
> 
> 标签：linq-to-xml, xelement

我有一个 XElement 对象，它是从如下所示的 XML 构建的：

```
<Root>
  <Oppurtunities>
    <Oppurtunity>
      <Title> Account Manager</Title>
      <Company>Company name</Company>
      <Location>Boston</Location>
      <EndDate>2013-04-11</EndDate>
      <c>acce</c>
      <id>MNYN-95ZL8L</id>
      <Description>This is a detailed description...</Description>
    </Oppurtunity> 
```

现在我需要从特定的 Oppurtunity 节点获取描述值，这意味着我想从 id 特定的位置获取描述。我需要做这样的事情：

```
//My XElement object is called oppurtunities
oppurtunities = new XElement((XElement)Cache["Oppurtunities"]);

string id = Request.QueryString["id"];

//I want to do something like this but of course this is not working
var description = (from job in oppurtunities
                              .Element("Oppurtunities")
                              .Element("Oppurtunity")
                              .Element("Description")
                              where job.Element("id") == id).SingleOrDefault(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:22:17.587

您必须`.Element("Description")`在查询中进一步移动，以允许`id`条件工作：

```
//I want to do something like this but of course this is not working
var description = (from job in oppurtunities
                              .Element("Oppurtunities")
                              .Elements("Oppurtunity")
                   where job.Element("id") == id
                   select job.Element("Description")).SingleOrDefault() 
```

要`Element("id")`作为字符串进行比较，请使用`(string)XElement`转换 - 即使`<id>`找不到它也会起作用：

```
where (string)job.Element("id") == id 
```

使用`XElement.Value`会抛出`NullReferenceException`这种情况。

# ios - 如何区分用户滑动和点击动作？

> ID：15896802
> 
> 赞同：2
> 
> 时间：2013-04-09T08:20:11.160
> 
> 标签：ios, objective-c, cocoa-touch, uigesturerecognizer

我正在开发一个应用程序，其中有一个包含 subView 的视图。我想跟踪滑动和点击操作，例如单击。

仅当用户在我的子视图中触摸时才应跟踪操作。当用户点击我想要执行一个动作时，当用户滑动我想要执行另一个动作时。

为了跟踪滑动，我实施`UIGestureRecognizer`了并且工作正常。但我不知道如何跟踪点击选项。请指导我如何实现这一目标。

主要的是，当我点击它时，它应该只调用点击动作，反之亦然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:21:25.550

您可以使用[**UITapGestureRecognizer**](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITapGestureRecognizer_Class/Reference/Reference.html)进行点击手势。

> “UITapGestureRecognizer 是 UIGestureRecognizer 的具体子类，它查找单次或多次点击。要识别手势，指定数量的手指必须点击视图指定次数。”

此方法包括`numberOfTapsRequired`("要识别的手势的点击次数。") 和`numberOfTouchesRequired`("要识别的手势所需的点击次数") 属性，您可以在其中准确设置您希望它如何响应用户操作。

在这种情况下，由于您只希望在点击一次时激活它，因此这两个属性的默认设置（都具有默认值 1）应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:30:41.817

获取信息的最佳位置是**Defining How Gesture Recognizers Interact** of [Event Handling Guide for iOS](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizer_basics/GestureRecognizer_basics.html#//apple_ref/doc/uid/TP40009541-CH2-SW9)

> 当一个视图附加了多个手势识别器时，您可能希望更改相互竞争的手势识别器接收和分析触摸事件的方式。默认情况下，没有设置手势识别器首先接收触摸的顺序，因此每次可以以不同的顺序将触摸传递给手势识别器。您可以将此默认行为覆盖为：
> 
> *   指定一个手势识别器应该在另一个手势识别器之前分析触摸。
> *   允许两个手势识别器同时运行。
> *   防止手势识别器分析触摸。

# javascript - 一段时间后如何执行功能

> ID：15896810
> 
> 赞同：18
> 
> 时间：2013-04-09T08:20:43.417
> 
> 标签：javascript

我想编写一个 javascript 代码，我可以在 30 分钟后执行一个函数。

假设我有一个名为的函数`getScore`和另一个名为`getResult`. 我希望在 30 分钟后执行这些功能。

这是一个测验目的，测验持续时间是三十分钟，所以时间过去后，两个功能都应该执行。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-09T08:23:32.937

你应该使用[`setTimeout()`](https://developer.mozilla.org/en/docs/DOM/window.setTimeout)：

```
setTimeout(function() {
    getScore(); 
    getResult(); 
}, 1800000); 
```

'1800000' 是您希望此函数执行的时间（以毫秒为单位）。在这种情况下，30 分钟。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-10-11T12:14:51.137

如果要显示元素，可以使用此代码，这将显示按钮。

```
 function myFunc(){
        var linkEd = document.getElementById("buttonID");
        var timing = 6;
        var text_timing = document.createElement("span");
        linkEd.parentNode.replaceChild(text_timing, linkEd);
        var id;
        id = setInterval(function() {timing--;
      if (timing < 0) {
        clearInterval(id);
       text_timing.parentNode.replaceChild(linkEd, text_timing);
      } else {
       text_timing.innerHTML = "<h3 class='yourclass'>Button will appear after  <strong>" + timing.toString() + "</strong>  second</h3>";
      linkEd.style.display = "inline";
      }
    }, 1000);
} 
```

> 这是为了显示时间毫秒
> 
> *<h3 class='yourclass'>按钮会在<strong>" + timing.toString() + " </strong> 秒后出现</h3>*

> 调用时间并显示按钮使用 onclick 事件在时间 0 后显示按钮
> 
> **<button class='yourclass' onclick='myFunc()' id='button'>显示时间</button>**
> 
> 使用*display none*隐藏按钮
> 
> **<button style='display:none' id='buttonID' class='yourclass'>一段时间后</button>**

# xslt - 来自 2 个 XML 的 XSLT

> ID：15896814
> 
> 赞同：0
> 
> 时间：2013-04-09T08:21:04.760
> 
> 标签：xslt

我是 xslt 高级程序的新手。我实际上对从 2 个不同的 xml 文件制作 xslt 有疑问。

以下是我拥有的 2 个 xml 文件。

**AHK-authors.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
<chapters>
    <chapter no="1">
        <head-4>By J. R. Weeramantry</head-4>
    </chapter>
    <chapter no="2">
        <head-4>By Ernest Yang<footnote id="AHK-02.1.fn0" prefix="*">
                <footnote-para>I would like to acknowledge and express my gratitude for the assistance provided by my colleagues, Mr. Kevin Hong and Ms. Sharon Leung, in the preparation of this Chapter. All errors and omissions are my own. </footnote-para>
            </footnote>
        </head-4>
    </chapter>
    <chapter no="3">
        <head-4>By David Bateson and Edmund Wan</head-4>
    </chapter>
    <chapter no="4">
        <head-4>By Timothy Hill and Mark Lin</head-4>
    </chapter>
    <chapter no="5">
        <head-4>By Christopher To<footnote id="AHK-05.1.fn0" prefix="*">
                <footnote-para>I would like to acknowledge Alan Tang Siu Lun for his assistance in compiling parts of the Chapter.</footnote-para>
            </footnote>
        </head-4>
    </chapter>
    <chapter no="6">
        <head-4>By Chiann Bao</head-4>
    </chapter>
    <chapter no="7">
        <head-4>By Justin D’Agostino and Ula Cartwright-Finch</head-4>
    </chapter>
    <chapter no="8">
        <head-4>By Kim M. Rooney</head-4>
    </chapter>
    <chapter no="9">
        <head-4>By Neil Kaplan QC, JP, CBE, SBS and Andrew Aglionby</head-4>
        <head-5>[Revised and Updated by William Stone QC, SBS]<footnote id="AHK-09.1.fn0" prefix="*">
                <footnote-para>With thanks to summer students Chadwick Wong and Cheryl Leung.</footnote-para>
            </footnote>
        </head-5>
    </chapter>
    <chapter no="10">
        <head-4>By Frances van Eupen</head-4>
    </chapter>
    <chapter no="11">
        <head-4>By Peter Yuen and John Choong</head-4>
    </chapter>
    <chapter no="12">
        <head-4>By David Bateson and Edmund Wan</head-4>
    </chapter>
    <chapter no="13">
        <head-4>By Teresa Cheng SC<footnote id="AHK-13.1.fn0" prefix="*">
                <footnote-para>Special thanks to Andrew Aglionby, Joy Medd and Johnson Tan, co-authors to the first edition of this chapter, as portions of their work has been retained herein.</footnote-para>
            </footnote>
        </head-4>
    </chapter>
    <chapter no="14">
        <head-4>By Paul Starr<footnote id="AHK-14.1.fn0" prefix="*">
                <footnote-para>Heartfelt thanks to Jennifer Lee-Shoy, Stefania Lucchetti, Samuel Tang and Rita Wong.</footnote-para>
            </footnote>
        </head-4>
    </chapter>
    <chapter no="15">
        <head-4>By Timothy Hill and Mark Lin</head-4>
    </chapter>
    <chapter no="16">
        <head-4>By Denis Brock and Shirley Wu</head-4>
    </chapter>
    <chapter no="17">
        <head-4>By Peter Chow</head-4>
    </chapter>
    <chapter no="18">
        <head-4>By Paul Starr<footnote id="AHK-18.1.fn0" prefix="*">
                <footnote-para>Heartfelt thanks to Jennifer Lee-Shoy, Samuel Tang and Rita Wong for their assistance with this chapter.</footnote-para>
            </footnote>
        </head-4>
    </chapter>
    <chapter no="19">
        <head-4>By Kathryn Sanger, Joseph Chu and Bing Yu</head-4>
    </chapter>
    <chapter no="20">
        <head-4>By Loke-Khoon Tan</head-4>
    </chapter>
    <chapter no="21">
        <head-4>By Philip Yang and Rosita Lau</head-4>
    </chapter>
    <chapter no="22">
        <head-4>By Marianne Chao</head-4>
    </chapter>
    <chapter no="23">
        <head-4>By Dr Nils Eliasson</head-4>
    </chapter>
    <chapter no="24">
        <head-4>Banking, International Investor-State, Insurance, Property and Employment Disputes</head-4>
        <head-5>By Frances van Eupen, Vincent Li, Gary Soo and Alexander Stock</head-5>
    </chapter>
</chapters> 
```

**ARBHK-Chapter01.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="xsl" ref="Untitled28.xslt"?>
<chapter num="A">
    <title>
        <content-style font-style="bold">PART 1 GENERAL PRINCIPLES</content-style>
    </title>
    <section level="sect1">
        <title>
            <content-style font-style="bold">Chapter 1: THE NEW ARBITRATION ORDINANCE</content-style>
        </title>
    </section>
</chapter> 
```

我试过的xslt如下 **Untitled28.xslt**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions">
    <xsl:output method="html" encoding="UTF-8" indent="yes"/>
    <xsl:template match="/">

        <html>
            <head>
                <xsl:text disable-output-escaping="yes"><![CDATA[</meta>]]></xsl:text>
                <title>
                    <xsl:value-of select="substring-after(chapter/section/title,':')"/>
                </title>
                <link rel="stylesheet" href="er:#css" type="text/css"/><xsl:text disable-output-escaping="yes"><![CDATA[</link>]]></xsl:text>
            </head>
            <body>
                <xsl:call-template name="new"/>
            </body>
        </html>
    </xsl:template>

<xsl:template match="chapters/chapter" name="new">
<div class="new">
<xsl:apply-templates select="document('AHK-authors.xml')/head-4">
</xsl:apply-templates>
</div>
</xsl:template> 
</xsl:stylesheet> 
```

我得到的o/p如下

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </meta>
        <title> THE NEW ARBITRATION ORDINANCE</title>
        <link rel="stylesheet" href="er:#css" type="text/css"/>
    </head>
    <body>
        <div class="new"/>
    </body>
</html> 
```

但我想列出所有作者信息。

请让我知道我该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:51:56.077

检查您的 XPath 在您要查找“/head-4”的位置，您必须将其从文档元素中放置或放置 // 斜杠而不是应该工作的斜杠

# sql-server - 视觉工作室 2012 快递。在 PHP myAdmin 中生成创建数据库 sql 脚本

> ID：15896816
> 
> 赞同：1
> 
> 时间：2013-04-09T08:21:07.360
> 
> 标签：sql-server, visual-studio

我在 Visual Studio 2012 express 数据库资源管理器中打开了一个 sql 数据库，并想为整个数据库生成创建表 sql 脚本。

在 PHP myAdmin 中有这样的功能，但在 VS 2012 express 中找不到。如果您为表打开表，则会显示创建表脚本并且可以一一复制，但是在选择多个表或整个数据库时似乎没有这样的功能。

有谁知道在 VS 2012 Express 中是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:21:57.360

使用 SQL Server Management Studio Express。

# c# - 隐藏图像标签的 src 字符串

> ID：15896818
> 
> 赞同：0
> 
> 时间：2013-04-09T08:21:12.247
> 
> 标签：c#, html, asp.net-mvc

例如我有：

```
<img src="http://gateway.com/Providername/NameOfTheSupplier/RequestedImg.jpg" /> 
```

现在一些客户抱怨那里的客户可以在网址中看到公司名称。因为改变我使用的网关的结构需要做很多工作，所以我寻找另一种方法来做到这一点。

有没有办法可以为客户隐藏 src？例如使用 base64 或其他可以解密客户端的加密？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:23:18.140

您*可以*使用[数据 URI](https://en.wikipedia.org/wiki/Data_URI_scheme)，但这需要您下载图像，转换为 base64 并嵌入页面（或 CSS）。

这将有效载荷增加了约 34%。

* * *

另一种方法是使用 CSS 来设置页面样式，将图像 URL 嵌入到 CSS 中。这往往不是动态的（尽管它可以是动态的），但任何对 Web 技术有所了解的人仍然可以查看 CSS 并查看 URL。以这种方式使用图像当然也不是语义化的，并且可能会以意想不到的方式破坏您的页面，这意味着您将需要付出更多的努力来使应该“正常工作”的东西发挥作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T08:24:56.570

简单的回答：没有。长答案：没有。技术答案：浏览器显示的所有内容都需要以一种方式翻译成人类可读的*文本。不过，您可以混淆服务器端。

*) 人类可读还包括非常短的名称，例如`http://gateway.com/P/N/R.jpg`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T14:15:56.157

```
<a href="data:text/html;charset=utf-8;base64,PCFET0NUWVBFIEhUTUw%2BDQo8aHRtbCBs
YW5nPSJlbiI%2BDQogPGhlYWQ%2BDQogIDx0aXRsZT5QcmV0dHkgR2xvd2luZyBMaW5lczwvd   
Gl0bGU%2BDQogPC9oZWFkPg0KIDxib2R5Pg0KPGNhbnZhcyB3aWR0aD0iODAwIiBoZWlnaHQ
9IjQ1MCI%2BPC9jY..."</a> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T08:24:12.367

`base64`您可以在代码中转换整个图像。为此，可以使用大量可用的服务。

只是一个例子：

[将任何图像转换为 base64 字符串](http://webcodertools.com/imagetobase64converter)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T08:23:33.157

你可以试试这段代码

```
$('img').filter(function(index){return $(this).attr('src')==='';}).hide(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T09:24:32.910

您可以为此使用处理程序吗？这样你可以隐藏 URL，如果你愿意，你也可以使用 base64 发送图像，或者只写字节流作为响应。

我认为这应该可行，您还可以通过更改一段代码来控制图像路径。

检查此链接： http: [//www.codeproject.com/Articles/34084/Generic-Image-Handler-Using-IHttpHandler](http://www.codeproject.com/Articles/34084/Generic-Image-Handler-Using-IHttpHandler)

谢谢。

# highcharts - 在 Highcharts 中设置气泡透明度？

> ID：15896821
> 
> 赞同：2
> 
> 时间：2013-04-09T08:21:19.847
> 
> 标签：highcharts, bubble-chart

有没有办法影响 Highcharts 气泡图中气泡的透明度？我一直在寻找与区域填充颜色相当的配置，但没有找到。

我尝试为该系列使用 rgba 颜色，如下所示：

```
 series: [{
        color: "rgba(255,0,0,0.5)",
        data: [ 
```

但这只会使边框半透明。

编辑：我只是尝试使用标记填充颜色：

```
series: [{
        color: "rgba(255,0,0,1)",
        marker: {
            fillColor: "rgba(255,0,0,0.1)"
        }, 
```

但这不会影响透明度

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-09T11:37:27.577

您可以使用 fillOpacity 参数，

```
marker: {
          fillOpacity:0.3
        } 
```

[http://jsfiddle.net/g8JcL/116/](http://jsfiddle.net/g8JcL/116/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-24T12:48:58.680

最简单的方法是添加 CSS 属性。

```
.highcharts-point {
    fill-opacity: 0.8;
  } 
```

但这将应用于所有气泡。

# jquery - jQuery mobile：在捏合/捏合时更改字体大小？

> ID：15896822
> 
> 赞同：3
> 
> 时间：2013-04-09T08:21:21.673
> 
> 标签：jquery, jquery-mobile, jquery-plugins, multi-touch, pinchzoom

我正在用 JQM 编写一个 Web 文档阅读器。我不希望我的用户在阅读时不断地左右滚动，所以我的视口是：

```
<META NAME='viewport' CONTENT='width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=1;' /> 
```

虽然，我知道用户对字体大小的偏好可能会因视觉技能的不同而改变......所以，我认为在多点触控缩小动作（“捏合”）中缩小字体大小会很好，然后放大多点触控缩放动作（“捏出”）的字体大小...

是否可以？除了 JQM，我还需要一些外部库吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T08:50:11.187

这在 jQuery Mobile 上是可能的，但您需要使用名为[**hammer.js**](https://github.com/EightMedia/hammer.js/wiki/Getting-Started)的第3 方实现。

它支持大量手势，例如：

*   抓住
*   轻敲
*   双击
*   拖动，dragstart，dragend，dragup，dragdown，dragleft，dragright
*   滑动，向上滑动，向下滑动，向左滑动，向右滑动
*   变换，变换开始，变换结束
*   旋转
*   捏，捏，捏
*   触摸（手势检测开始）
*   释放（手势检测结束）

例子：

```
$('#test_el').hammer().on("pinchin", ".nested_el", function(event) {
    console.log(this, event);
});

$('#test_el').hammer().on("pinchout", ".nested_el", function(event) {
    console.log(this, event);
}); 
```

它适用于 jQuery Mobile，这很重要。但是您应该考虑其他一些想法，或者至少是针对 Android 2.X 设备的另一个想法，因为该平台不支持多点触控事件。

还有一些其他的 3rd 方实现，例如[**Touchy**](https://github.com/HotStudio/touchy)。不幸的是，Touchy 只支持捏合。

# svn - svn不存在的子节点

> ID：15896824
> 
> 赞同：0
> 
> 时间：2013-04-09T08:21:30.670
> 
> 标签：svn, commit

这应该是一个非常简单的问题，但我在任何地方都找不到答案。也许这里有人可以帮助...

在 SVN 中提交时出现问题的原因是什么，收到一条消息“尝试打开不存在的子节点 'name'”？

我该如何修复它？

谢谢，

欧文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:06:36.873

我觉得我必须提供一个答案，以便为可能遇到相同问题的其他人提供一些解决方案。

我遇到的问题是，当我尝试从 NetBeans IDE 提交对 SVN 的更改时，我被告知我无法提交，因为提交机制“尝试打开不存在的子节点 'name'”。我对这个错误的含义没有任何准确的概念，但是给我的提示确实让我找到了一个方向，我可以从 NetBeans 中找出修复它的必要条件，并且在这个过程中，我学到了一件事或二关于补丁是什么。

因此，我的问题的解决方案是针对 Subversion 存储库中的最新版本在我的工作副本上生成一个补丁。我通过 NetBeans 执行此操作，方法是转到工作副本的主干目录，然后从顶部菜单中选择 Team->Export Diff Patch。然后我重命名了我的工作副本，这样我就可以在它的位置检查一个新的。

签出新的工作副本后，我从收藏夹菜单中选择了新工作副本的主干，然后选择了 Team->Apply Diff Patch。这会在必要时更改、添加和删除文件，但不会删除删除文件的空目录。我不得不手动删除这些目录，但除此之外，通过补丁应用更改效果很好。

我将通过应用差异补丁更改的新工作副本毫无意外地提交到代码库。迷人的。

# wordpress - WP Query 忽略特定类别的变量

> ID：15896831
> 
> 赞同：1
> 
> 时间：2013-04-09T08:21:52.960
> 
> 标签：wordpress, categories

好的，我可能在这里遗漏了一些明显的东西，因为这是一件非常简单的事情，但由于某种原因，我无法让这个 WP Query 工作。我只想从用户当前访问的类别页面查询帖子（使用 get_the_category）。像这样——

```
$category = get_the_category();
$category_id = $category[0]->cat_ID;

$category_items = new WP_Query( array(
    'post_type' => 'post',
    'cat' => $category_id,
    'showposts' => -1,
    'orderby' => 'rand'
    )
); 
```

$category_id 为我提供了类别页面的正确 ID，但在 WP Query 中引用它会使查询获取我的所有帖子，而不管类别如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:34:09.867

试试这个：

```
$category = get_the_category();
$category_name = $category[0]->cat_name;

$category_items = new WP_Query( array(
    'post_type' => 'post',
    'category_name' => $category_name,
    'showposts' => -1,
    'orderby' => 'rand'
    )
); 
```

# android - Proguard 和 HashMap

> ID：15896832
> 
> 赞同：1
> 
> 时间：2013-04-09T08:21:57.050
> 
> 标签：android, jar, hashmap, obfuscation, proguard

我正在为 android 开发一些 api 作为库项目，我想将它们导出为一个混淆的 jar。

我有各种课程，但唯一的公共实体是：

*   `MyInterface`：一个接口，列出了用户必须实现的一些方法；

*   `MyUtilities`：具有一些静态方法的类；

*   `MySingleton`：一个单例（实现为具有单个实例的枚举）；

*   `MyObject`：实现我需要处理的特定对象的类；

我是混淆的新手，所以我遵循了一些教程并阅读了 android/proguard 文档。

我成功地从我的项目中创建了一个 jar 并在外部应用程序中使用它。我还成功地混淆了所有非公共类（所以除了上述之外的所有类），它仍然可以继续工作。

* * *

现在我的问题：

中指定的方法之一`MyInterface`是

```
public void getObject(HashMap<String, MyObject>); 
```

在混淆之前，用户可以添加`implements MyInterface`到他的活动/类并（自动）生成接口方法的实现，特别是：

```
@Override
public void getObject(HashMap<String, MyObject> hashmap){
  // User implementation
} 
```

在混淆 jar 之后，当我添加`implements MyInterface`到用户活动并自动生成方法实现时，我得到：

```
@Override
public void getObject(HashMap hashmap){
  // User implementation
} 
```

所以没有 HashMap 类型。老实说，我不知道为什么会发生这种情况。我还希望看到 HashMap 类型，因为`String`和`MyObject`都被保留了。

它仍然可以在没有 HashMap 类型的情况下工作，但我必须将它转换为`Hasmap<String, MyObject>`

这是我的 proguard conf 文件（由 proguard gui 工具生成）：

```
-injars inAPIs.jar
-outjars 'obfAPIs.jar'

-libraryjars /My/android/SDK/Path/platforms/android-15/android.jar
-libraryjars /My/android/SDK/Path/tools/support/annotations.jar
-libraryjars /My/android/SDK/Path/add-ons/addon-google_apis-google-15/libs/effects.jar
-libraryjars /My/android/SDK/Path/add-ons/addon-google_apis-google-15/libs/maps.jar
-libraryjars /My/android/SDK/Path/add-ons/addon-google_apis-google-15/libs/usb.jar

-overloadaggressively

-keep class my.package.MyObject {
    public <fields>;
    public <methods>;
}

-keep public class my.package.MyUtilities {
    public <fields>;
    public <methods>;
}

-keep interface  my.package.MyInteface {
    public <fields>;
    public <methods>;
}

-keep public class my.package.MySingleton {
    public <fields>;
    public <methods>;
}

-keep,allowshrinking public class my.package.MyInterface {
    public <fields>;
    public <methods>;
}

-keep,allowshrinking public class my.package.MyObject

-keep,allowshrinking public class my.package.MyUtils

-keep,allowshrinking public enum  my.package.MySingleton {
    public <fields>;
    public <methods>;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:32:54.393

根据[Proguard docs](http://proguard.sourceforge.net/manual/usage.html#keepattributes)，您可能需要添加以下选项：

```
-keepattributes Signature 
```

引用他们的文档：

> 在 JDK 5.0 及更高版本中编译时，需要“Signature”属性才能访问泛型类型。

# php - 使用 UNIX 日期操作

> ID：15896834
> 
> 赞同：0
> 
> 时间：2013-04-09T08:22:01.320
> 
> 标签：php, mysql, unix, date, format

我正在制作这样的 SQL：

```
SELECT * FROM POST
WHERE date between :date1 and :date2 
```

Date2 永远是今天的日期 PHP time(); （UNIX 格式）。现在我需要 date2 减去 7 天（1 周）和 date2 减去 1 个月。

（这将由用户在表单上选择）。

问题是我无法使用 UNIX 日期进行操作。

```
$date2 = time();
$date1 = $_GET['fromDate'];

$query = "SELECT * FROM POST
          WHERE date between :date1 and :date2"; 
```

HTML 表格

```
 select id=fromDate>
    <option value=<?php echo time()-604800>WEEK</option>
/select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:28:09.250

```
$today = time();
$oneWeekAgo = time() - (60 * 60 * 24 * 7); // 60 seconds, 60 minutes, 24 hours, 7 days
$oneMonthAgo = time() - (60 * 60 * 24 * 30); // 60 seconds, 60 minutes, 24 hours, 30 days 
```

或更准确地说是 $oneMonthAgo：

```
$date = date_create(); // get DateTime object of today
date_modify($date, "-1 month"); // 1 month ago
$oneMonthAgo = date_timestamp_get($date); // get unix time 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:28:22.223

你尝试了什么？

```
$t=time();
# this would output current date
echo(date("D F d Y",$t));
# minus 7 days converted to seconds
$t -= 7*24*60*60;
# this would print the original $t minus 7 days
echo(date("D F d Y",$t)); 
```

# winforms - 在 WinForms 上重置按钮图像

> ID：15896842
> 
> 赞同：0
> 
> 时间：2013-04-09T08:22:28.440
> 
> 标签：winforms

按钮的图像绑定到资源，如下所示：

```
btnCancel.BackgroundImage = Localization.Labels.cancel; 
```

并根据文化选择所需的图像。但是文化可以改变，而运行时和按钮的图像应该根据新选择的文化重置。

当然，我可以在重绘方法中复制相同的代码，但是有很多控件，我正在寻找更优雅的方式。

# xml - 请帮助我使用 xslt 解析来自 xml 的文本

> ID：15896844
> 
> 赞同：-2
> 
> 时间：2013-04-09T08:22:37.730
> 
> 标签：xml, xslt

这是我的xml：

```
<catalog>
<cd>
    <title>Empire Burlesque</title>
    <year>1985</year>
</cd>
<cd>
    <title>Hide your heart</title>
    <year>1988</year>
</cd>
<cd>
    <title>Greatest Hits</title>
    <year>1982</year>
</cd>
</catalog> 
```

我想使用 xslt 将其解析为文本，结果如​​下所示：

```
Empire Burlesque, Hide your heart, Greatest Hits, 1985, 1988, 1982, 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:30:31.230

使用 XSLT 2.0，您可以简单地做到

```
<xsl:template match="/">
  <xsl:value-of select="//cd/title, //cd/year" separator=", "/>
</xsl:template> 
```

使用 XSLT 1.0，您可以使用

```
<xsl:template match="/">
  <xsl:for-each select="//cd/title">
    <xsl:if test="position() &gt; 1>, </xsl:if>
    <xsl:value-of select="."/>
  </xsl:for-each>
  <xsl:text>, </xsl:text>
  <xsl:for-each select="//cd/year">
    <xsl:if test="position() &gt; 1>, </xsl:if>
    <xsl:value-of select="."/>
  </xsl:for-each>
</xsl:template> 
```

# python-2.7 - 如何在 Windows 上为 python 2.7 安装 pymedia？

> ID：15896846
> 
> 赞同：2
> 
> 时间：2013-04-09T08:22:39.527
> 
> 标签：python-2.7, ogg

```
Path for  OGG not found.
Path for  VORBIS not found.
Path for  FAAD not found.
Path for  MP3LAME not found.
Path for  VORBISENC not found.
Path for  ALSA not found.
Continue building pymedia ? 
```

我在windows（32位）上使用python 2.7，我从以下链接获得了源代码[http://sourceforge.net/projects/pymedia/files/pymedia/](http://sourceforge.net/projects/pymedia/files/pymedia/) 谁能帮我解决我的问题..

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-28T16:45:05.743

您可以找到 pymedia 的非官方副本和其他几个适用于 windows 的 python 2.7 包： [这里](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pymedia)

我在这个来源的 Windows 7 上使用了 pymedia for python 2.7，效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:21:57.190

当您开始使用 Python 时，您会发现安装模块可能非常令人沮丧。所以我所做的是安装“easy_install” [https://pypi.python.org/pypi/setuptools](https://pypi.python.org/pypi/setuptools)，然后将其添加到您的路径中，从现在开始安装一个模块，您只需要这样做：

打开命令行-> 输入“你想安装的模块的easy_install名称”（例如：easy_install pywinauto）然后瞧

# algorithm - 使用线性规划寻找“最佳拟合线”

> ID：15896850
> 
> 赞同：1
> 
> 时间：2013-04-09T08:23:00.390
> 
> 标签：algorithm

这是一个家庭作业问题。我被要求找到给定一组 n 点（2D）的最佳拟合线的系数。系数为 abc 在：ax+by=c。假设有 n 个点，使用线性规划找到导致最小“最大绝对误差”的系数，定义为：max(|a*xi+b*yi -c|)，i 的范围为 1-n。

这是我的思考过程：

令 M 表示最大绝对误差。线性规划的目标是最小化 M。由于 M 是所有 |a*xi+b*yi-c| 中最大的，因此它必须大于它们中的每一个。所以 (a*xi+b*yi-c)<= M，并且 (a*xi+b*yi-c)>= -M，对于所有 i（第二个表达式是考虑绝对符号）。

我认为这足以定义问题。当我将条件放入求解器时，它返回的 abc 都等于 0，但实际上它不应该。我想我在这里缺少一些条件。有人可以向我指出吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:26:58.283

您应该添加一个额外的语句，即：a 或 b 都不应该为 0。如果两个值都为 0，则您的系统有一个有效的解决方案，但没有一条线 a 和 b 都等于 0。

编辑：改进 Rerito 的建议。任何行的 a 或 b 都不等于 0。对于任何非零 k，这些行`(k*a)*x + (k*b)* y + (k*c)`和都是相同的。`(a)*x + (b)* y + (c)`所以我会说你需要运行求解器两次——一次在指定 a 为 1 时，一次在指定 b 为 1 时，然后选择更好的解决方案。您必须运行求解器两次，因为最好的解决方案可能具有`a=0`或`b=0`（但不是两者）。

# android - Appunta AR标记重叠，改变视线方向但仅在纵向模式下进行活动

> ID：15896852
> 
> 赞同：0
> 
> 时间：2013-04-09T08:23:09.090
> 
> 标签：android, dictionary, augmented-reality, screen-orientation

我正在开发一个使用三个数据视图的应用程序。1.) 列表视图 2.) ARView 3.) 地图视图。

对于 Geo-AR，我使用的是“Appunta AR-engine”。它非常酷和简单的 AR 引擎。

以前我使用的是 metaio SDK。但是这个SDK在很多手机上都有很多问题。这里是使用Metaio开发的屏幕。

……

这是我使用 Appunta AR 引擎开发的屏幕。但在这里一切都崩溃了。

有什么办法可以按可见的顺序排列它们。

还有一件事，当我将 Activity 制作为仅肖像时（在清单中）。AR eyeview 不会进入横向模式。

我们如何通过仅将活动保持在纵向模式来更改 EYEView 和radarview 的方向。

[使用appunta开发的屏幕](http://tardis1.tinygrab.com/grabs/1c4f0c1df3d721faad96bc0d31263d5b01325b3fa3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:12:55.813

我是 appunta 库的作者 :)

目前平台本身不支持有序绘制（后续版本会注意），但是你可以在eyeview的preRender方法中自己实现，在绘制之前按距离排序点（该方法每帧执行一次，然后绘制点）或在绘制它们时为每个点设置 z 顺序。

关于 eyeView，这在纵向模式下应该可以正常工作，事实上，样本是可旋转的。

我怀疑您指的是相机视图，坦率地说，我的建议是不要使用它。我必须为项目需求实现一个“可旋转”的相机视图，但这很可怕，而且它是一个真正的资源消耗者。[只需像这样](https://github.com/commonsguy/cw-advandroid/blob/master/Camera/Preview/src/com/commonsware/android/camera/PreviewDemo.java)实现一个简单的不可旋转的相机视图。

# ios - initWithFrame 未在 UIVIew 中执行

> ID：15896855
> 
> 赞同：0
> 
> 时间：2013-04-09T08:23:16.447
> 
> 标签：ios, objective-c

我已经创建了一个`UIView`子类并想在 上执行一个方法`initWithFrame:`，但是没有调用此方法。

当我调用`initWithCoder:`正在执行的方法时，代码崩溃并显示此错误：

> **由于未捕获的异常“NSGenericException”而终止应用程序，原因：“此编码器要求从初始化编码器方法返回替换的对象：”**

我的代码是：

```
-(void)initialize
{
    //code
}

-(id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        [self initialize];

        // Initialization code
    }
    return self;
}

- (id)initWithCoder:(NSCoder *)aCoder
{ 
    self = [super initWithCoder:aCoder];

    if(self)
    {
        [self initialize];
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T08:25:32.207

你没有`self`从你的`initWithCoder:`方法中返回。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T08:33:45.300

也许你在 IB 或 storyBoard 中指定了这个 UIView，所以会调用 initWithCoder。删除 initWithCoder 并使用 awakeFromNib

```
 - (void)awakeFromNib{
    //custom init code
   [self initialize];
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T08:33:53.207

试试这个。

```
- (id)initWithCoder:(NSCoder *)aCoder
    { 
        self = [super initWithCoder:aCoder];

        if(self)
        {

        }
    return self;
    } 
```

# html - 新：如何显示“处理中...”文本几秒钟并在 html 中显示“数据更新”？

> ID：15896860
> 
> 赞同：0
> 
> 时间：2013-04-09T08:23:26.410
> 
> 标签：html

我正在开发简单的 html 更新页面。

我在一页中有按钮，单击该新窗口应该打开。在新窗口中，我需要显示“处理中...”文本几秒钟并显示文本“数据已更新”新页面。

请帮我。

问候，桑迪

* * *

你好，

实际上这是问题的下一部分。我可以在带有新窗口的页面之间重定向。但是在新窗口中显示“数据更新”页面后。现在，如果我关闭“数据更新”页面，我希望将原始页面重定向到原始窗口中。

请帮我。

问候，桑迪普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:27:55.260

您正在使用哪些技术？基本上你可以使用一些计时器对象，当几秒钟过去后自动将用户重定向到带有文本“数据更新”的新页面

第一页：

```
<FORM>

<INPUT TYPE="BUTTON" VALUE="Test" onclick="window.open('http://www.test.com/processingPage');" >

</FORM> 
```

处理页面：

```
<div id="proccessContent">
Processing...
</div> 
<meta http-equiv="refresh" content="5; url=next_page.html"> 
```

数据更新页面：

```
<div id="updateContent">
Data updated
</div> 
```

这不是完整的代码，但它的一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:04:13.457

在首页上，您只需要一个按钮

```
<input type="button" value="Next Page" onclick="window.open('nextpage.html');" /> 
```

在下一页上，您需要一个 div 和一个 javascript 间隔，如下所示

```
<div id='urdiv'>Processing... </div>

<script>
var yourdiv = document.getElementById('urdiv');
setInterval(function() { yourdiv.innerHTML = 'Data Updated'; },5000);
</script> 
```

或者如果你想清除间隔（避免重复无用）。然后

```
<script>
var yourdiv = document.getElementById('urdiv');
var myinterval = setInterval(function() { myFunction(); }, 5000);
function myFunction()
{
    yourdiv.innerHTML = 'Data Updated';
    window.clearInterval(myinterval);
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:38:49.850

实际上这是问题的下一部分。我可以在带有新窗口的页面之间重定向。但是在新窗口中显示“数据更新”页面后。现在，如果我关闭“数据更新”页面，我希望将原始页面重定向到原始窗口中。

# email - 为什么我在发送电子邮件时要指定比 application/octet-stream 更具体的 MIME 类型？

> ID：15896863
> 
> 赞同：2
> 
> 时间：2013-04-09T08:23:29.660
> 
> 标签：email, language-agnostic, mime-types

例如，假设我的应用程序发送一封带有二进制附件（例如`somedata.xlsx`）的邮件。在制作邮件消息（以编程方式）时，我可以

1.  只需将附件的 MIME 类型设置为`application/octet-stream` *或*

2.  根据文件的实际内容（例如`application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`，上述`somedata.xlsx`文件）设置“正确”的 MIME 类型。

我们也假设

*   我知道文件的实际内容（所以选项 2 是可行的），
*   该文件始终是二进制的（即人类不可读的）并且
*   所有收件人都位于“企业 Windows 世界”中，其中文件扩展名是指定文件类型的事实上的标准。

**为什么我要经历使用不同 MIME 类型而不是`application/octet-stream`-ing everyting 的麻烦？**根据我的经验，`xlsx`无论 MIME 类型是`application/octet-stream`还是`application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`.

**这只是一种好的做法²还是会产生真正的实际差异？**

* * *

¹ 即，在 Windows 系统上，在注册表中查找`xlsx`处理程序并启动它以打开文件。

² 就我个人而言，我认为“良好实践”是一个很好的理由。但是，出于科学好奇心，我对它是否会产生实际影响感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:35:35.973

*这个答案纯粹是推测性的。*

假设一个中间系统（即，在服务器端实现的一些邮件过滤器）阻止访问/剥离除“安全”之外的所有 MIME 类型以保护客户端系统。 `application/octet-stream`可能不应该被认为是安全的，但真正的 MIME 类型可能。在这种情况下，行为将存在实际差异。

# ajax - trigger.io：tabs.openWithOptions 导致应用程序在 Android 中崩溃

> ID：15896867
> 
> 赞同：1
> 
> 时间：2013-04-09T08:23:43.717
> 
> 标签：ajax, trigger.io, forge

我们正在使用标签来为我们的移动应用程序调用一些身份验证。它以前似乎可以工作，但现在，在工具包更新后，它现在导致我们的应用程序崩溃。

如果是问题，您可以查看我的代码：

```
 $(".share_now").live('click' , function(){
  authorize_twitter();
  })

   function authorize_twitter(){
      var url_encode="http://server.com/twitteroauth/login.php";
      forge.tabs.openWithOptions({
      tint:[217, 0, 0, 87],
      url: url_encode,
      pattern: "http://server.com/twitteroauth/complete/*",
      title: 'Login with Twitter'
   }, 
   function (data) {
    forge.logging.log(data);    
   });
   } 
```

这是崩溃的错误：

[错误崩溃 Android 2.2 http://content.screencast.com/users/junnel1001/folders/Jing/media/27304ddc-7094-4006-b457-f9de09398026/sample.png](http://content.screencast.com/users/junnel1001/folders/Jing/media/27304ddc-7094-4006-b457-f9de09398026/sample.png)

我希望 trigger.io 的人可以帮助解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T16:38:56.930

我很抱歉 - 这是由于前一段时间在合并到 v1.4.37 时丢失的修复引起的：我已经推送了 v1.4.40 来解决这个问题！

# json - Knockout.js 循环遍历表中父级的子级

> ID：15896868
> 
> 赞同：1
> 
> 时间：2013-04-09T08:23:53.510
> 
> 标签：json, mvvm, knockout.js, knockout-mapping-plugin

我的 MVVM 看起来像这样：

```
<script type="text/javascript">

function Company(data) {

    this.name = ko.observable(data.name);
    this.legal_form = ko.observable(data.legal_form);
    this.company_number = ko.observable(data.company_number);
    this.type_account = ko.observable(data.type_account);
    this.type_supplier = ko.observable(data.type_supplier);
    this.type_competitor = ko.observable(data.type_competitor);
    this.type_other = ko.observable(data.type_other);
    this.children = ko.observableArray(data.child);
}

function CompanyListViewModel() {
    // Data
    var self = this;
    self.companies = ko.observableArray([]);

    $.getJSON(Routing.generate('contacts_companies_get_json'), function(allData) {
        var mappedCompanies = $.map(allData, function(item) { return new Company(item) });
        self.companies(mappedCompanies);
    });  
}

ko.applyBindings(new CompanyListViewModel());

</script> 
```

我的视图如下所示：

```
<tbody data-bind="foreach: companies">
       <tr>
           <td>
               <a href="#" class="title">
                   <span data-bind="text: name"></span> <span data-bind="text: legal_form"></span>
               </a>        
           </td>
           <td data-bind="if:$data.company_number"><span data-bind="text: company_number"></span></td>
           <td><span data-bind="if: type_account" ><i class="icon-check"></i></span></td>
           <td><span data-bind="if: type_supplier" ><i data-bind="if: type_supplier" class="icon-check"></i></span></td>
           <td><span data-bind="if: type_competitor" ><i data-bind="if: type_competitor" class="icon-check"></i></span></td>
           <td><span data-bind="if: type_other" ><i data-bind="if: type_other" class="icon-check"></i></span></td>
           <td><a href="#" class="btn btn-mini">Details</a></td>
       </tr>
   </tbody> 
```

我想`<tr>`为母公司拥有的每个孩子添加 hidden 并在父公司之前添加一个加号以扩展 hidden 。

问题是我只能访问原始父母中的孩子，`<tr>`否则会告诉我“孩子”没有定义。

关于如何实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:47:58.200

您可以使用不带容器元素的[foreach来显示子元素：](http://knockoutjs.com/documentation/foreach-binding.html)

```
<tbody data-bind="foreach: companies">
       <tr>
           <!-- company columns -->
       </tr>
       <!-- ko foreach: children -->
           <tr>
              <!-- children columns -->
           </tr>
      <!-- /ko -->
</tody> 
```

并且在新属性的帮助下（如） `showChildren`，`Company`您可以对孩子们进行展示隐藏：

演示[JSFiddle。](http://jsfiddle.net/B9jRZ/1/)

[如果您想显示具有相同列的完整层次结构，那么您希望必须显示可以使用递归模板](http://knockoutjs.com/documentation/template-binding.html)实现的子campanies 的子项。 最近有一些关于递归模板的问题：

*   [带有淘汰赛js的递归模板](https://stackoverflow.com/questions/15525216/recursive-template-with-knockout-js)
*   [使用 Knockout 'foreach' 循环遍历多维数组](https://stackoverflow.com/questions/15814603/working-with-knockout-foreach-looping-through-multidimensional-array/15815413#15815413)

# java - 在 Quickfixj 中断开连接

> ID：15896871
> 
> 赞同：3
> 
> 时间：2013-04-09T08:23:55.927
> 
> 标签：java, quickfix

我正在使用 quickfixj，我有一个接收器，我使用 Logout() 方法从该接收器发送修复消息“8=FIX.4.29=8235=534=38749=TEST152=20130409-08:01:47.86256=TEST2-1136558=User Is Blocked10 =231" 到发起者，但我可以看到接收器本身发送的心跳，我们如何解决这个问题？我正在使用下面的代码

```
 Logout oLogout = new Logout();
        quickfix.field.Text aText = new quickfix.field.Text("User Is Blocked");
        oLogout.set(aText);
        Session.sendToTarget(oLogout, "TEST2-11365, "TEST1"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:51:19.167

您不应该像这样手动发送注销。注销是一条管理消息；您应该相信引擎可以发送/接收所有管理消息类型。

正在发生的事情是您在引擎的控制逻辑之外发送此消息。引擎将其视为任何其他传出的应用程序级消息，而不是启动引擎的内部关闭逻辑。

如果您调用 Acceptor.stop()，则引擎将启动其关闭逻辑并为您发送 Logout。

# jdbc - jConnect4 池连接不按记录工作

> ID：15896872
> 
> 赞同：0
> 
> 时间：2013-04-09T08:23:56.817
> 
> 标签：jdbc, sybase, jconnect

[官方 Sybase jConnect 程序员参考](http://infocenter.sybase.com/help/topic/com.../prjdbc0700.pdfSimilarShare)建议使用以下方式使用池连接：

```
SybConnectionPoolDataSource connectionPoolDataSource = new SybConnectionPoolDataSource();
...
Connection ds = connectionPoolDataSource.getConnection();
...
ds.close(); 
```

但是 getDataSource 总是会导致异常。我反编译了SybConnectionPoolDataSource，发现方法调用显式产生了错误：

```
public Connection getConnection() throws SQLException
{
    ErrorMessage.raiseError("JZ0S3", "getConnection()");
    return null;
} 
```

有谁知道为什么文档与实施相矛盾？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:58:02.140

我不能专门针对 Sybase 发表评论，因为 1）我不使用它，并且 2）您的链接不起作用，但我可以根据自己维护 JDBC 驱动程序的经验（Jaybird/Firebird JDBC）尝试给您一个理论) 并查看其他一些实现的作用。

这[`ConnectionPoolDataSource`](http://docs.oracle.com/javase/7/docs/api/javax/sql/ConnectionPoolDataSource.html)可能是 JDBC API 中最不被理解的部分。与命名所暗示的内容以及它在某些 JDBC 实现中的实现方式相反，此接口**不应该**提供连接池，也不应该实现`DataSource`（或者至少：这样做会导致混乱和错误；*我自己的经验*）。

的 javadoc`ConnectionPoolDataSource`不是很有帮助，[`javax.sql`](http://docs.oracle.com/javase/7/docs/api/javax/sql/package-summary.html)包文档提供了更多信息，但是您确实需要查看 JDBC 4.1 规范，第 11 章*连接池*以很好地了解它应该如何工作：

> [...] JDBC 驱动程序提供了`ConnectionPoolDataSource`应用服务器用来构建和管理连接池的实现。

换句话说：`ConnectionPoolDataSource`不是供开发人员直接使用，而是由应用程序服务器用作其连接池；它本身不是连接池。

> 应用程序服务器为其客户端提供`DataSource`接口的实现，使连接池对客户端透明。

因此，连接池通过正常`DataSource`实现对用户可用。用户将其用作不提供池的连接，并使用获得的连接，就好像它是普通的物理连接一样，而不是从连接池中获得的连接：

> 当应用程序使用完一个连接后，它会使用 方法关闭逻辑连接`Connection.close`。这会关闭逻辑连接，但不会关闭物理连接。而是将物理连接返回到池中，以便可以重复使用。
> 
> 连接池对客户端是完全透明的：客户端获得一个池连接并使用它，就像它获得和使用非池连接一样。

[`PooledConnection`](http://docs.oracle.com/javase/7/docs/api/javax/sql/PooledConnection.html)（由 a 创建的对象）的文档进一步支持了这一点`ConnectionPoolDataSource`：

> 应用程序员不`PooledConnection`直接使用接口；相反，它由管理连接池的中间层基础设施使用。
> 
> 当应用程序调用该方法`DataSource.getConnection`时，它会返回一个`Connection`对象。如果正在执行连接池，则该`Connection`对象实际上是一个`PooledConnection`对象的句柄，它是一个物理连接。
> 
> 连接池管理器（通常是应用程序服务器）维护`PooledConnection`对象池。如果`PooledConnection`池中有可用的对象，则连接池管理器返回一个`Connection`对象，该对象是该物理连接的句柄。如果没有`PooledConnection`可用的对象，则连接池管理器调用该`ConnectionPoolDataSource`方法`getPoolConnection`来创建新的物理连接。JDBC 驱动程序实现`ConnectionPoolDataSource`创建一个新`PooledConnection`对象并返回一个句柄。

不幸的是，一些 JDBC 驱动程序已经创建了数据源，这些数据源通过在单个类中实现两者来提供连接池，而不是 JDBC 规范`DataSource`的意图是**使用**. 这导致实现如果用作 normal 可以工作，但如果用作 a （例如在应用程序服务器的连接池中），或者接口被误解以及用于创建连接的方法错误（例如打电话）。`ConnectionPoolDataSource``DataSource`**`ConnectionPoolDataSource``DataSource``ConnectionPoolDataSource``getPooledConnection().getConnection()`**

 **我已经看到了实现（包括在 Jaybird 中），其中`getPooledConnection()`将用于访问实现内部的连接池，或者只有从`getConnection()`实现中获得的连接才能正常工作，导致实现时出现各种奇怪和不正确的行为用于填充应用程序服务器中的连接池，使用`getPooledConnection()`.

也许 Sybase 做了类似的事情，然后认为这不是一个好主意，所以他们更改了`DataSource.getConnection()`抛出异常以确保它不以这种方式使用，但同时通过不删除定义的方法`DataSource`。或者也许他们扩展了一个普通`DataSource`的以轻松创建物理连接（而不是包装一个普通的连接），但不希望用户将其用作`DataSource`.**

# backbone.js - 如何使所选项目更改类别（如何使属性在主干中可观察）

> ID：15896874
> 
> 赞同：2
> 
> 时间：2013-04-09T08:24:03.083
> 
> 标签：backbone.js

我想构建一个简单的屏幕，其中一侧的项目列表和另一侧的选定项目详细信息。当用户单击其中一项时-其详细信息显示在“详细信息”部分中。“列表”部分中的选定项目也必须用“活动”类装饰。这是我的路由器代码：

```
var AppRouter = Backbone.Router.extend({

routes:{
    "":"list",
    "users/:id":"userDetails"
},
list:function () {

    this.usersList = new UsersCollection(usersList);/* new UsersCollection()*/
    var self = this;

    //this.userList.fetch({
       // success: function () {
           this.UsersListView =   new UsersListView({ model: this.usersList });
           $('#sidebar').html(this.UsersListView.render().el);
       // }
    //})//end of fetch

},
userDetails:function (id) {

    if(this.usersList){
        //unselect prevously selected
        if(this.user )this.user.set({'selected':false});

        this.user = this.usersList.get(id);

        //select current
        this.user.set({'selected':true});
        //empty refill the items section
        this.UsersListView =   new UsersListView({ model: this.usersList });
        $('#sidebar').empty().html(this.UsersListView.render().el);

        if (this.UserDetailsView) this.UserDetailsView.close();
        this.UserDetailsView = new UserDetailsView({model:this.user});

        $('#content').html(this.UserDetailsView.render().el);
    }
    else{

    }
}
}); 
```

到目前为止，我设法通过清空和重新填充项目部分 html 来设置“活动”项目类。有没有办法观察（如在knockoutjs中）'selected'属性，所以一旦它改变 - 改变将在html中可见？

视图代码：

```
window.UserListItemView = Backbone.View.extend({
    tagName:"li",

    template:_.template($('#tpl-user-list-item').html()),

    render:function (eventName) {
        if(this.model.get('selected')){$(this.el).addClass('active');}
        $(this.el).html(this.template(this.model.toJSON()));

        return this;
    }
}); 
```

谢谢转发

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:35:47.090

[这](http://backbonejs.org/#Events)就是您要查找的内容（尤其是 Events#listenTo 方法）。
所以; 在你看来：

```
initialize: function() {
  // listen to your model
  this.listenTo(this.model, 'change:selected', this.updateClass);
},
updateClass: function() {
  // something like...
  this.$el.toggleClass('active');
} 
```

# unix - 获取由 mvn exec 插件启动的应用程序的 pid

> ID：15896877
> 
> 赞同：4
> 
> 时间：2013-04-09T08:24:10.067
> 
> 标签：unix, maven, sh

我想编写 .sh 脚本来杀死由 maven exec 插件启动的进程。目前我正在尝试按开始时间获取 PID，但这种方法不能保证与其他进程没有冲突。

请有人说是否有一种方法可以获取 PID 或杀死由 mvn exec 启动的进程。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-07T20:08:10.440

最好的方法是使用 start-stop-daemon 启动 maven 进程。我使用来自 tomcat init.d 的修改后的 bash 脚本来启动/停止 java 或 maven 程序作为守护进程。这是一个片段。请根据需要定制：

```
#!/bin/sh    
case "$1" in
      start)
            log_daemon_msg "Starting $DESC" "$NAME"
            start-stop-daemon --start -b -u "$MAVEN_USER" -g "$MAVEN_GROUP" \
                    -c "$MAVEN_USER" -d "$MAVEN_HOME" -p "$MAVEN_PID" -m \
                    -x mvn -- exec:java -Dexec.mainClass="com.company.Application" -Dexec.classpathScope=runtime -Dexec.args="/home/user 192.168.1.1" 2>&1
            status="$?"
            set +a -e
            else
                log_progress_msg "(already running)"
                    log_end_msg 0
            fi
            ;;
      stop)
            log_daemon_msg "Stopping $DESC" "$NAME"

            set +e
            if [ -f "$MAVEN_PID" ]; then
                    start-stop-daemon --stop --pidfile "$MAVEN_PID" \
                            --user "$MAVEN_USER" \
                            --retry=TERM/20/KILL/5 >/dev/null
                    if [ $? -eq 1 ]; then
                            log_progress_msg "$DESC is not running but pid file exists, cleaning up"
                    elif [ $? -eq 3 ]; then
                            PID="`cat $MAVEN_PID`"
                            log_failure_msg "Failed to stop $NAME (pid $PID)"
                            exit 1
                    fi
                    rm -f "$MAVEN_PID"
                    rm -rf "$JVM_TMP"
            else
                    log_progress_msg "(not running)"
            fi
            log_end_msg 0
            set -e
            ;; 
```

# c# - 仅对特定用户和角色启用迷你分析器

> ID：15896878
> 
> 赞同：2
> 
> 时间：2013-04-09T08:24:09.683
> 
> 标签：c#, asp.net-mvc-4, mvc-mini-profiler

在 asp.net mvc 中，scott hanselman 示例显示了如何显示本地环境的迷你分析器

```
protected void Application_BeginRequest()
        {
            if (Request.IsLocal) { MiniProfiler.Start(); } //or any number of other checks, up to you 
        } 
```

但是，我想更进一步，能够远程查看它，仅适用于特定的登录用户或 ips。

知道怎么做吗？

更新：我使用了以下代码：

```
protected void Application_EndRequest()
        {
            MiniProfiler.Stop(); //stop as early as you can, even earlier with MvcMiniProfiler.MiniProfiler.Stop(discardResults: true);
        }

        protected void Application_PostAuthorizeRequest(object sender, EventArgs e)
        {
            if (!IsAuthorizedUserForMiniProfiler(this.Context))
            {
                MiniProfiler.Stop(discardResults: true);
            }
        }

        private bool IsAuthorizedUserForMiniProfiler(HttpContext context)
        {
            if (context.User.Identity.Name.Equals("levalencia"))
                return true;
            else
                return context.User.IsInRole("Admin");
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T08:27:37.707

`PostAuthorizeRequest`如果当前用户不在给定角色或请求来自特定 IP 或您想要的任何检查，您可以订阅事件并丢弃结果：

```
protected void Application_BeginRequest()
{
    MiniProfiler.Start();  
}

protected void Application_PostAuthorizeRequest(object sender, EventArgs e)
{
    if (!DoTheCheckHere(this.Context))
    {
        MiniProfiler.Stop(discardResults: true);
    }
}

private bool DoTheCheckHere(HttpContext context)
{
    // do your checks here
    return context.User.IsInRole("Admin");
} 
```

# html - 真正的手机屏幕模拟器？

> ID：15896883
> 
> 赞同：1
> 
> 时间：2013-04-09T08:24:21.210
> 
> 标签：html, mobile, google-chrome-extension, viewport

我有这个页面：

[http://people.opera.com/andreasb/viewport/ex01.html](http://people.opera.com/andreasb/viewport/ex01.html)

它为不同的移动屏幕尺寸使用视口。

当我在我的 iphone 上运行它时，我确实看到字体发生了变化：

![在此处输入图像描述](https://i.stack.imgur.com/zPkq1.jpg)

但是当我使用 Ripple 或其他 chrome 扩展（我发现）时，它并没有显示增加的字体大小。只有屏幕尺寸在变化。（但不影响字体大小）

如何模拟（chrome 扩展）屏幕尺寸，以便它向我显示就像我在真正的移动设备上一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:06:22.597

您不需要 Chrome 扩展程序，开发人员工具已经具有这样的内置功能。

1.  打开开发者工具（`F12`, `Ctrl``Shift``I`, ...）。
2.  点击右下角的齿轮。
3.  单击“覆盖”。
4.  启用“设备指标”，并将“屏幕分辨率”/“字体比例因子”调整为您想要的值。

示例（360x200 和 200x360，我没有缩放或调整屏幕截图的大小）：

![360x200](https://i.stack.imgur.com/yyNkV.png "示例：360x200")

![200x360](https://i.stack.imgur.com/EtTbs.png "示例：200x360")

通过切换用户代理（在“设备指标”上方）可以使用一些预设值。[`chrome.debugger`](https://developer.chrome.com/extensions/debugger.html)如果您需要多个自定义值，请使用API创建 Chrome 扩展程序。

# java - R.java 已经生成，仍然得到'无法解析为变量'

> ID：15896885
> 
> 赞同：1
> 
> 时间：2013-04-09T08:24:28.467
> 
> 标签：java, android, xml

我认为它可能与包有关，但我找不到错误。我的 xml 文件中没有错误（红色标记），并且我的所有可绘制对象和 xml 文件都符合命名约定。我已经尝试清理项目，并且任何地方都没有 import R.java 。

找不到 R.java 的类是：

```
 com.datafetcher.main.Menu.java
  com.datafetcher.showperson.MainActivity.java
  com.datafetcher.showperson.DisplayMessageActivity.java 
```

在 Android Manifest 中，我声明：

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.datafetcher"
  ... 
```

并宣布活动：

```
<activity
        android:name=".main.Menu"
        android:label="@string/title_activity_display_message">
          <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

    </activity>

    <activity
        android:name=".showperson.MainActivity"
        android:label="@string/app_name" 
        android:parentActivityName="com.datafetcher.main.Menu" >

    </activity>

    <activity
        android:name=".showperson.DisplayMessageActivity"
        android:label="@string/title_activity_display_message"
        android:parentActivityName="com.datafetcher.main.Menu" >

    </activity> 
```

我的 R.java 生成为 gen/com.datafetcher.R.java。为什么我不能在我的代码中使用它？

这是一个不错的 5 秒编辑。我真的应该导入 com.datafetcher.R 吗？我只是出于某种原因尝试过，它有效。我以前从未这样做过，我认为它是以某种方式隐式完成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:34:23.963

一种解决方案是显式导入 R.java 文件。在这个例子中，它将是：

```
import com.datafetcher.R; 
```

无论您需要访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:30:02.890

当您从不同的包中导入 R 时，有时会发生这种情况。例如，您从 Eclipse 中的一个项目中复制文本，使用 com.example.foo 包，然后 Eclipse 为该包的 R 插入一个导入指令。但是生成的 R 属于另一个包。在这种情况下，您必须删除错误的导入。

顺便说一句，您是否看到*所有*未找到的资源 ID 或只有其中一些？（在同一个文件中，在不同的文件中？）

还有一种可能是你的应用包和活动包不一样。在这种情况下，您需要明确的导入语句。

在您的情况下，类`com.datafetcher.R`和`com.datafetcher.main.Menu`属于不同的包，即`com.datafetcher`和`com.datafetcher.main`。在Java中，类在没有显式导入的情况下看到同一个包中的其他类，不同包中的类只有在你导入它们之后才可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T08:34:09.413

我经常遇到这个问题......通常*清理或构建*项目确实会解决这个问题。

有时，一般命名约定不接受某些文件名或引用（例如，`ic-launcher`等等）*（命名文件时不接受这里`-`）*。在某些情况下，复制代码可能会触发此问题，因此请检查代码，因为它正在导入项目中未找到的类。

这主要是导致**R**腐败的原因。我希望这能回答你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-06T02:18:26.103

我遇到了同样的问题，这是因为我忘记将 gen 文件夹添加到构建路径中。

只需右键单击 gen 文件夹，然后转到“构建路径”>“用作源文件夹”

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-09T10:05:23.930

只需从项目选项卡中清理您的项目，而不是再次构建您的项目并删除 import android

# apache - 子进程的 Apache 段错误

> ID：15896887
> 
> 赞同：0
> 
> 时间：2013-04-09T08:24:32.807
> 
> 标签：apache, segmentation-fault

生产服务器上的 Apache 定期失败。Apache 日志显示子进程的段错误。

核心转储回溯显示如下：

```
#0  0x00007fc2462d6617 in ?? ()
#1  0x00007fc24d9458b8 in _hooks ()
#2  0x00007fc2498c798f in ?? () from /usr/lib/apache2/modules/libphp5.so
#3  0x00007fc2498ce342 in ?? () from /usr/lib/apache2/modules/libphp5.so
#4  0x00007fc2498ce5c8 in zend_hash_graceful_reverse_destroy ()
   from /usr/lib/apache2/modules/libphp5.so
#5  0x00007fc2498c26b5 in ?? () from /usr/lib/apache2/modules/libphp5.so
#6  0x00007fc24986d4cd in php_module_shutdown ()
   from /usr/lib/apache2/modules/libphp5.so
#7  0x00007fc24986d579 in php_module_shutdown_wrapper ()
   from /usr/lib/apache2/modules/libphp5.so
#8  0x00007fc24994de51 in ?? () from /usr/lib/apache2/modules/libphp5.so
#9  0x00007fc24ce467d7 in ?? () from /usr/lib/libapr-1.so.0
#10 0x00007fc24ce45684 in apr_pool_destroy () from /usr/lib/libapr-1.so.0
#11 0x00007fc24d72b4ce in clean_child_exit (code=0)
    at /build/buildd/apache2-2.2.14/server/mpm/prefork/prefork.c:196
#12 0x00007fc24d72b8f9 in accept_mutex_on (child_num_arg=<value optimized out>)
    at /build/buildd/apache2-2.2.14/server/mpm/prefork/prefork.c:212
#13 child_main (child_num_arg=<value optimized out>)
    at /build/buildd/apache2-2.2.14/server/mpm/prefork/prefork.c:568
#14 0x00007fc24d72bb5a in make_child (s=0x7fc24f517938, slot=3)
    at /build/buildd/apache2-2.2.14/server/mpm/prefork/prefork.c:758
#15 0x00007fc24d72c7e4 in perform_idle_server_maintenance (
---Type <return> to continue, or q <return> to quit---
    _pconf=<value optimized out>, plog=<value optimized out>,
    s=<value optimized out>)
    at /build/buildd/apache2-2.2.14/server/mpm/prefork/prefork.c:893
#16 ap_mpm_run (_pconf=<value optimized out>, plog=<value optimized out>,
    s=<value optimized out>)
    at /build/buildd/apache2-2.2.14/server/mpm/prefork/prefork.c:1097
#17 0x00007fc24d701350 in main (argc=3, argv=0x7fff9a1da0d8)
    at /build/buildd/apache2-2.2.14/server/main.c:742 
```

我已将 Apache 从 2.2.14 更新到 2.2.20，将 PHP 从 5.3.2 更新到 5.3.6，但这个错误仍然存​​在。什么可能导致这个问题？

更新这里 php -v 输出：

```
root@host:~# php -v
PHP 5.3.6-13ubuntu3.1 with Suhosin-Patch (cli) (built: Aug 29 2011 23:39:16)
Copyright (c) 1997-2011 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2011 Zend Technologies
    with eAccelerator v1.0-dev, Copyright (c) 2004-2012 eAccelerator, by eAccelerator 
```

php -m:

```
root@host:~# php -m
[PHP Modules]
bcmath
bz2
calendar
Core
ctype
curl
date
dba
dom
eAccelerator
ereg
exif
fileinfo
filter
ftp
gd
gettext
hash
iconv
imagick
imap
intl
json
libxml
mbstring
mcrypt
memcache
mhash
ming
mysql
mysqli
openssl
pcntl
pcre
PDO
pdo_mysql
pdo_sqlite
Phar
posix
ps
pspell
readline
recode
Reflection
session
shmop
SimpleXML
snmp
soap
sockets
SPL
sqlite3
standard
sysvmsg
sysvsem
sysvshm
tidy
tokenizer
wddx
xml
xmlreader
xmlrpc
xmlwriter
xsl
zip
zlib

[Zend Modules]
eAccelerator 
```

我也尝试禁用 eAccelerator 但没有任何改变。

# perl - perl 脚本每 1 分钟找出每列的最大值（共 12 个值）

> ID：15896892
> 
> 赞同：0
> 
> 时间：2013-04-09T08:24:44.213
> 
> 标签：perl, awk

我需要在 12 个值中每 1 分钟找到每列的最大值意味着日志将每 5 秒出现一次，所以每 1 分钟我需要找到每列的最大值

```
02 11:23:18 03 004 009 009 001 002 002 001 001 001 001 004 000 000 258 258 000 00 4/05/2013
01 11:23:22 01 001 001 001 001 001 001 002 001 001 001 004 000 000 000 000 000 00 4/05/2013
02 11:23:23 01 002 006 012 001 002 002 002 002 002 001 004 000 000 241 241 000 00 4/05/2013
01 11:23:27 01 001 002 005 004 006 001 003 001 001 001 004 000 000 000 000 000 00 4/05/2013
02 11:23:28 01 003 001 002 001 002 001 002 001 001 001 004 000 000 256 257 000 00 4/05/2013
01 11:23:32 01 001 001 001 001 001 001 002 001 001 006 009 000 000 000 000 000 00 4/05/2013
02 11:23:33 02 003 003 015 002 005 002 002 001 001 001 004 000 000 204 205 000 00 4/05/2013
01 11:23:37 02 001 001 001 001 002 001 003 001 001 001 005 000 000 000 000 000 00 4/05/2013
02 11:23:38 01 002 001 009 001 004 009 003 001 001 001 004 000 000 266 267 000 00 4/05/2013
01 11:23:42 01 001 001 000 001 001 001 002 001 001 002 011 000 000 000 000 000 00 4/05/2013
02 11:23:43 01 002 002 009 001 002 001 004 000 002 001 004 000 000 195 195 000 00 4/05/2013 
```

需要第 3 到第 14 列的最大值，我是 perl 新手，请见谅

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:16:00.197

这对我有用：

```
#!/usr/bin/env perl
use strict;
use warnings;
use 5.010;

my @maxima;
my $prevmin = "";

sub print_maxima
{
    print "@maxima\n" if (scalar(@maxima) > 0);
    @maxima = ();
}

while (<>)
{
    my(@row) = split;
    my($hhmm) = substr $row[1], 1, 5;
    if ($hhmm ne $prevmin)
    {
        print_maxima;
        $prevmin = $hhmm;
    }
    foreach my $col (0..(scalar(@row)-1))
    {
        $maxima[$col] //= $row[$col];   # Avoid undef values
        $maxima[$col] = $row[$col] if ($row[$col] gt $maxima[$col]);
    }
}
print_maxima; 
```

给定样本数据的扩展版本，经过精心设计，以便第二分钟的最大值始终严格小于第一分钟的值，除非这些值全为零：

```
02 11:23:18 03 004 009 009 001 002 002 001 001 001 001 004 000 000 258 258 000 00 4/05/2013
01 11:23:22 01 001 001 001 001 001 001 002 001 001 001 004 000 000 000 000 000 00 4/05/2013
02 11:23:23 01 002 006 012 001 002 002 002 002 002 001 004 000 000 241 241 000 00 4/05/2013
01 11:23:27 01 001 002 005 004 006 001 003 001 001 001 004 000 000 000 000 000 00 4/05/2013
02 11:23:28 01 003 001 002 001 002 001 002 001 001 001 004 000 000 256 257 000 00 4/05/2013
01 11:23:32 01 001 001 001 001 001 001 002 001 001 006 009 000 000 000 000 000 00 4/05/2013
02 11:23:33 02 003 003 015 002 005 002 002 001 001 001 004 000 000 204 205 000 00 4/05/2013
01 11:23:37 02 001 001 001 001 002 001 003 001 001 001 005 000 000 000 000 000 00 4/05/2013
02 11:23:38 01 002 001 009 001 004 009 003 001 001 001 004 000 000 266 267 000 00 4/05/2013
01 11:23:42 01 001 001 000 001 001 001 002 001 001 002 011 000 000 000 000 000 00 4/05/2013
02 11:23:43 01 002 002 009 001 002 001 004 000 002 001 004 000 000 195 195 000 00 4/05/2013
02 11:24:18 03 003 008 009 001 002 002 001 001 001 001 004 000 000 258 258 000 00 4/05/2013
01 11:24:22 01 001 001 001 001 001 001 002 001 001 001 004 000 000 000 000 000 00 4/05/2013
01 11:24:23 01 002 006 012 001 002 002 002 001 001 001 004 000 000 241 241 000 00 4/05/2013
01 11:24:27 01 001 002 005 003 005 001 003 001 001 001 004 000 000 000 000 000 00 4/05/2013
01 11:24:28 01 003 001 002 001 002 001 002 001 001 001 004 000 000 256 257 000 00 4/05/2013
01 11:24:32 01 001 001 001 001 001 001 002 001 001 005 009 000 000 000 000 000 00 4/05/2013
02 11:24:33 02 003 003 014 002 005 002 002 001 001 001 004 000 000 204 205 000 00 4/05/2013
01 11:24:37 02 001 001 001 001 002 001 003 001 001 001 005 000 000 000 000 000 00 4/05/2013
01 11:24:38 01 002 001 009 001 004 008 003 001 001 001 004 000 000 265 266 000 00 4/05/2013
01 11:24:41 01 001 001 000 001 001 001 002 001 001 002 010 000 000 000 000 000 00 4/05/2013
01 11:24:42 01 002 002 009 001 002 001 003 000 001 001 004 000 000 195 195 000 00 4/05/2013 
```

脚本的输出是：

```
02 11:23:43 03 004 009 015 004 006 009 004 002 002 006 011 000 000 266 267 000 00 4/05/2013
02 11:24:42 03 003 008 014 003 005 008 003 001 001 005 010 000 000 265 266 000 00 4/05/2013 
```

该脚本是一个简单的控制中断报告，基于第二列的 hh:mm 部分。最大值比较利用数据的前导零，使用字符串比较 ( `gt`) 而不是数字比较。它扫描所有列，因此它在第 2 列中报告一分钟内的最大时间。

它会与以下相邻的数据线混淆：

```
01 11:24:41 01 001 001 000 001 001 001 002 001 001 002 010 000 000 000 000 000 00 4/05/2013
01 11:24:42 01 002 002 009 001 002 001 003 000 001 001 004 000 000 195 195 000 00 4/06/2013 
```

请注意，日期部分已更改，因此这些行属于两个不同的日期，但它们会聚合到同一分钟，因为代码不查看日期列。也不清楚您的日期格式是 mm/dd/yyyy 还是 dd/mm/yyyy；任何一个都可能是有效的。最好使用yyyy-mm-dd格式；它是明确的，并自动排序为日期顺序。

* * *

它是 Perl — TMTOWTDI（有不止一种方法可以做到）。

循环体`foreach my $col`可以替换为：

```
$maxima[$col] = $row[$col] if (!defined $maxima[$col] || $row[$col] gt $maxima[$col]); 
```

这避免了对 Perl 5.10 的需要（`//=`当时添加了运算符）。我怀疑您是否能够衡量性能差异。`foreach`控件也可以是简单的`for (my $col = 0; $col < scalar(@row); $col++)`；同样，在这种情况下，两者之间没有太多选择，但如果列数很大（数千列），则`for`使用的内存将少于`foreach`.

# java - 为什么在使用 Flood Fill 算法时会出现 java.lang.StackOverflowError？

> ID：15896898
> 
> 赞同：1
> 
> 时间：2013-04-09T08:25:07.910
> 
> 标签：java, colors, stack-overflow, flood-fill

我的程序应该用我在 boundaryFill4 方法中指定的颜色（开头为黑色和白色）填充非常规形状。这是 myImage.png 的链接：[https](https://dl.dropbox.com/u/41007907/myImage.png) ://dl.dropbox.com/u/41007907/myImage.png 我使用了一个非常简单的洪水填充算法，但它不起作用......这是完整的代码：

```
 import java.awt.Color;
  import java.awt.Container;
  import java.awt.Image;
  import java.awt.image.BufferedImage;
  import javax.swing.ImageIcon;
  import javax.swing.JFrame;
  import javax.swing.JLabel;

      public class MyPolygon extends JFrame {

private JLabel my;

public MyPolygon() throws InterruptedException {
    createMy();
}

private void createMy() throws InterruptedException {
    Container contentPane = getContentPane();
    contentPane.setBackground(Color.WHITE);
    contentPane.setLayout(null);
    contentPane.setSize(1000, 700);

    my = new JLabel();
    my.setIcon(new ImageIcon("myImage.png"));
    my.setBounds(50, 50, 300, 300);
    contentPane.add(my);

    setSize(1000, 700);
    setVisible(true);
    setLocationRelativeTo(null);

    int fill = 100;
    boundaryFill4(100, 100, fill, 50);
}

// Flood Fill method
public void boundaryFill4(int x, int y, int fill, int boundary) {
    int current;
    current = getPixel(x, y);
    if ((current >= boundary) && (current != fill)) {
        setPixel(x, y, fill);
        boundaryFill4(x + 1, y, fill, boundary);
        boundaryFill4(x - 1, y, fill, boundary);
        boundaryFill4(x, y + 1, fill, boundary);
        boundaryFill4(x, y - 1, fill, boundary);
    }
}

// Getting the color integer at specified point(x, y)
private int getPixel(int x, int y) {
    Image img = ((ImageIcon) my.getIcon()).getImage();
    BufferedImage buffered = new BufferedImage(img.getWidth(null),
            img.getHeight(null), BufferedImage.TYPE_INT_ARGB);
    buffered.getGraphics().drawImage(img, 0, 0, null);
    Color c = new Color(buffered.getRGB(x, y));
    int current = buffered.getRGB(x, y);
    return current;
}

// Setting the color integer to a specified point(x, y)
private void setPixel(int x, int y, int fill) {
    Image img = ((ImageIcon) my.getIcon()).getImage();
    BufferedImage buffered = new BufferedImage(img.getWidth(null),
            img.getHeight(null), BufferedImage.TYPE_INT_ARGB);
    buffered.getGraphics().drawImage(img, 0, 0, null);
    int red = fill;
    int green = fill;
    int blue = fill;
    Color c = new Color(buffered.getRGB(x, y));
    c = new Color(red, green, blue);
    buffered.setRGB(x, y, c.getRGB());
}

// Main method
public static void main(String args[]) throws InterruptedException {
    MyPolygon my = new MyPolygon();
    my.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}
} 
```

为什么会出现 StackOverflow 错误？我怎样才能纠正它，以便我的代码工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:32:08.993

您可以尝试将递归方法（`boundaryFill4`调用自身）转换为非递归方法。这样 JVM 堆栈就不会溢出。

另一种选择是增加堆栈的大小 - 请参阅[Java 调用堆栈的最大深度是多少？](https://stackoverflow.com/questions/4734108/what-is-the-maximum-depth-of-the-java-call-stack)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T08:32:57.987

StackOverflowException 意味着您的递归对于您的记忆来说太深或没有结束。尝试使用较小的图像。当这不能解决问题时，您的递归结束条件有问题。（setPixel() 和 getPixel 真的会改变图像吗？写一个[JUnitTest](https://github.com/junit-team/junit/wiki/Getting-started)）

此外，你真的应该简化你的 setPixel 和 getPixel 方法。它们太复杂了。对于您设置或获取的每个像素，您都创建一个新的 BufferedImage-Instance，然后在设置一个像素后将其处理掉。您可以存储和重用 BufferedImage。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T08:32:06.507

您应该调试您的`boundaryFill4`方法：这是发生无限循环的地方。使用简单的案例来跟踪方法的反应。

此外，您应该避免在递归的每次迭代中写入/读取图像。在开始时实例化一个适当且高效的表示图像的数据结构，然后修改该数据结构，当算法结束时，将结果写入图像。

# facebook-apps - 如何检测用户是来自facebook还是直接来自

> ID：15896899
> 
> 赞同：1
> 
> 时间：2013-04-09T08:25:12.873
> 
> 标签：facebook-apps, facebook-page, iframe-app

假设我有一个网站，我也将其用作 facebook 应用程序（facebook 页面的 iframed 页面选项卡）。我需要知道用户是否通过 facebook 应用程序打开了我的网站，因为我只想在 facebook 中打开一些 CSS 和内容。

Afaik 我只有在用户第一次在 fb 上打开 iframe 时才会收到 signed_request，所以在用户在我的网站上导航后我“丢失”了它。除了将 signed_request 存储在会话中之外，还有更好的方法吗？

提前致谢

# jquery - jQuery $().each() 和隐式迭代有什么区别？

> ID：15896903
> 
> 赞同：1
> 
> 时间：2013-04-09T08:25:46.860
> 
> 标签：jquery, each

我有来自同一页面的两个单独搜索表单的两个输入。一个有`data-result-select-url`属性，一个没有。

```
<input id="q_id_eq" class="foo" type="text" size="30" name="q[id_eq]" data-result-select-url="/products/(id)" tabindex="-1"></input>

<input id="q_id_eq" class="foo" type="text" size="30" name="q[id_eq]" tabindex="-1"></input> 
```

我为这些输入编写了自己的 select2 插件。

```
$ = jQuery
$.fn.my_select2 = (args) ->
  ...
  select_url = $(this).data("result-select-url")
  if select_url?
    $(this).on "change", (e) ->
      ...

  $(this).select2 args 
```

当我`$().each()`用来调用我的插件`my_select2()`时，这很好用。只有一个输入接收“更改”事件。

```
jQuery
  $('.foo').each ->
    $(this).my_select2() 
```

但是，如果我使用 jQuery 隐式迭代调用 my_select2() ，则两个输入都会收到事件。

```
jQuery ->
  $('.foo').my_select2() 
```

解释是什么？我查找了[jQuery 文档](http://api.jquery.com/each/)，`each`但找不到答案。

# android - 在双卡手机中打开数据包数据

> ID：15896906
> 
> 赞同：2
> 
> 时间：2013-04-09T08:25:54.603
> 
> 标签：android, android-internet

我正在使用此功能打开数据包数据：

```
public static void setDataNetworkEnable(Context mContext) {
    try {
        ConnectivityManager conman = (ConnectivityManager) mContext
                .getSystemService(Context.CONNECTIVITY_SERVICE);
        Class<?> conmanClass = Class.forName(conman.getClass().getName());
        Field iConnectivityManagerField = conmanClass
                .getDeclaredField("mService");
        iConnectivityManagerField.setAccessible(true);
        Object iConnectivityManager = iConnectivityManagerField.get(conman);
        Class<?> iConnectivityManagerClass = Class
                .forName(iConnectivityManager.getClass().getName());
        Method setMobileDataEnabledMethod = iConnectivityManagerClass
                .getDeclaredMethod("setMobileDataEnabled", Boolean.TYPE);
        setMobileDataEnabledMethod.setAccessible(true);

        setMobileDataEnabledMethod.invoke(iConnectivityManager, true);
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

但它在双卡手机中不起作用...

是否存在任何解决方案？

# sql - 如何：编写唯一约束创建脚本

> ID：15896908
> 
> 赞同：1
> 
> 时间：2013-04-09T08:25:57.483
> 
> 标签：sql, sql-server, tsql, ssms, unique-constraint

我有一个我需要的创建脚本的唯一约束列表。

是否有捷径可寻？（类似于查询 sp_help、sys.objects、..）或者我是否需要为每个约束手动执行此操作（在 30 多个表上）？

我目前正在使用的解决方法：在 SSMS

*   对象资源管理器
    *   数据库
    *   桌子
    *   约束
        *   '脚本约束为'
        *   “创建”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:20:07.063

曾经使用过 Powershell 吗？

```
$null = [Reflection.Assembly]::LoadWithPartialName("Microsoft.SqlServer.Smo");

$svr = New-Object Microsoft.SqlServer.Management.Smo.Server("YourServerInstance");

$svr.Databases["YourDatabase"].Tables[0].Indexes[0].Script(); 
```

`Databases`，`Tables`并且`Indexes`是可以迭代的集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:11:09.890

你可以尝试这样的事情：

```
SELECT 
    ColumnName = c.name,
    TableName = t.name,   
    CreateCmd = 'ALTER TABLE ' + OBJECT_SCHEMA_NAME(t.object_id) + '.' + t.name + ' ADD CONSTRAINT ' + i.name + ' UNIQUE(' + c.name + ')'
FROM 
     sys.indexes i
INNER JOIN 
     sys.index_columns ic ON i.index_id = ic.index_id AND i.object_id = ic.object_id
INNER JOIN 
     sys.columns c ON ic.column_id = c.column_id AND ic.object_id = c.object_id
INNER JOIN 
     sys.tables t ON c.object_id = t.object_id
WHERE 
     is_unique_constraint = 1 
```

这为您提供了应用唯一约束的列和表的列表，并为您提供了 T-SQL 命令来新创建`UNIQUE CONSTRAINT`

# php - 在 CRM Oracle On Demand 上关闭区分大小写

> ID：15896909
> 
> 赞同：0
> 
> 时间：2013-04-09T08:26:08.453
> 
> 标签：php, oracle, crm

我正在使用 CRM Oracle On Demand，但我遇到了区分大小写的问题。

在这里你可以看到一个请求：

```
"ContactWS_ContactQueryPage_Input" => array(
                        "ListOfContact" => array(
                            "Contact" => array(
                                "ContactId" => "",
                                "ContactFullName" => "",
                                "ContactFirstName" => "='".$firstname."'",
                                "ContactLastName" => "='".$lastname."'",
                                "CellularPhone" => "",
                                "WorkPhone" => "",
                                "WorkFax" => "",
                                "PrimaryCountry" => "",
                                "PrimaryZipCode" => "",
                                "PrimaryCity" => "",
                                "MrMrs" => "",
                                "JobTitle" => "",
                                "PrimaryAddress" => "",
                                "ContactEmail" => "",
                                "ContactType" => ""
                            )
                        ),
                        "PageSize" => "100"         
                    ) 
```

例如，如果在我的 Oracle 数据库中，我有一个像这样的用户：

```
First Name : TOTO
Last Name : TATA 
```

我尝试用以下方式提出请求： `$firstname = "toto"`或`$lastname = "tAtA"`

CRM什么也没给我回报，它找不到用户。

有没有办法关闭区分大小写？有任何想法吗 ？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:05:08.600

```
alter session set nls_comp=ansi;
alter session set nls_sort=binary_ci; 
```

请注意，这可能会对性能产生影响。有些索引可能不会被使用。

PS：创建索引时也可以使用选项：NLS_SORT=BINARY_CI。

# php - 从 URL 获取嵌套的 GET 值

> ID：15896911
> 
> 赞同：-1
> 
> 时间：2013-04-09T08:26:12.747
> 
> 标签：php

考虑一下，我有以下网址：

```
index.php?page=list&id=10 
```

如何从 URL 获取变量值（例如 10）到 list.php（它使用 $_GET[id] 来做事）而不是 index.php。

编辑：天哪……我认为它不起作用的原因是因为我在“list.php”上的内容与上一页相同，所以我想知道为什么它不起作用..没关系。:)

现在可以了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:27:58.597

呃。。

```
$id = $_GET['id'];
$page = $_GET['page']; 
```

你是这个意思吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:28:30.140

`include`只需使用 PHP 的函数包含 list.php 文件。这应该使 list.php 中的变量可以通过`$_GET['id']`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T08:28:36.827

这不是以任何方式嵌套的。无论它们处于什么位置，您都会像往常一样获得价值：

`$_GET['id']`（但不是`$_GET[id]`）

通常添加`var_dump($_GET);`到您的`index.php`并调查

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T08:28:52.490

将此代码添加到您的`index.php`

```
$id = $_GET['id'];  // 10
$page = $_GET['page'];  // list 
```

**或者**

```
$id = $_REQUEST['id'];  // 10
$page = $_REQUEST['page'];  // list 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T08:29:06.010

```
echo $_GET['page'];//Outputs list
echo $_GET['id'];//Outputs 10 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-09T08:29:39.403

在这两个页面（索引和列表）中，您可以这样写：

```
$id;

if(isset($_GET["id"]))
{
    $id = $_GET["id"];
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-09T08:36:14.237

您可以在任何 php 文件中使用 $_GET 变量，它应该可以工作。

我想，你的网址是

```
index.php?page=list&id=10 
```

因此，它重定向到 index.php 文件。您需要包含“list.php”文件以获得正确的功能。

# ruby-on-rails-3 - 使用 Rails 进行 AJAX 赞成/反对投票有哪些安全措施？

> ID：15896912
> 
> 赞同：1
> 
> 时间：2013-04-09T08:26:20.767
> 
> 标签：ruby-on-rails-3, jquery, security

我正在使用`act_as_votable`gem ( [https://github.com/ryanto/acts_as_votable](https://github.com/ryanto/acts_as_votable) ) 实现 upvote/downvote 系统。我想我已经弄清楚了控制器和模型，但我有一些与 AJAX 部分相关的问题。

用户只有在登录后才能投票。我正在考虑将请求发布到控制器，在那里它处理 upvote/downvote 并返回 json 响应。这个网站有点像reddit，在给定页面上有很多带有投票功能的链接，所以我有点担心。我不确定在安全性和完整性方面我需要担心什么，我需要检查或注意什么？例如，带有 AJAX 调用的 CSRF 令牌等。

# jquery - Jquery z-index，触发按钮上的奇怪行为

> ID：15896930
> 
> 赞同：3
> 
> 时间：2013-04-09T08:27:14.657
> 
> 标签：jquery, onclick, z-index, css-animations

我不知道如何问这个问题，但我将从我的代码开始。这是HTML和js

```
 <html>
        <head>
            <link rel="stylesheet" href="style.css">
            <script src="http://code.jquery.com/jquery-latest.min.js"   type="text/javascript"></script>
        </head>

        <body>
        <div id="behind-bg"></div>
            <div id="code" class="code">

                <a id="testlink" href="#">Click Here</a><br>
                <a id="testlink" href="#">Click Here</a><br>
                <a id="testlink" href="#">Click Here</a>

            </div>
                <div id="curl" class="curl"></div>
            <div id="check-box-float">

            <div id="open" class="toggle-menu">
            <div id="close" class="toggle-menu">
            </div>

        </body>

        <script>
            $(function() { 
                $("#open").click(function() { 
                    $(".curl").toggleClass("curl-out"); 
                }); 
            }); 

            $(function() { 
                $("#open").click(function() { 
                    $(".code").toggleClass("menu-reveal"); 
                }); 
            }); 

            $(function() { 
                $("#close").click(function() { 
                    $(".code").toggleClass("menu-unreveal"); 
                }); 
            }); 
        </script>

    </html> 
```

这是与它一起使用的css。

```
#open {
    position:absolute;
    display:block;
    height:40px;
    width:40px;
    background: black;
    top: 200px;
    left: 400px;
    z-index: 10;
}

#close {
    position:absolute;
    z-index: -9;
    display:block;
    height:40px;
    width:40px;
    background: yellow;
    top: 0;
    left: 40px;
}

.curl{
        background: -moz-linear-gradient(-45deg, rgba(112,112,112,0) 48%, rgba(229,229,229,0.75) 51%, rgba(229,229,229,1) 52%, rgba(249,249,249,1) 100%); /* FF3.6+ */
        background: -webkit-gradient(linear, left top, right bottom, color-stop(48%,rgba(112,112,112,0)), color-stop(51%,rgba(229,229,229,0.75)), color-stop(52%,rgba(229,229,229,1)), color-stop(100%,rgba(249,249,249,1))); /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(-45deg, rgba(112,112,112,0) 48%,rgba(229,229,229,0.75) 51%,rgba(229,229,229,1) 52%,rgba(249,249,249,1) 100%); /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(-45deg, rgba(112,112,112,0) 48%,rgba(229,229,229,0.75) 51%,rgba(229,229,229,1) 52%,rgba(249,249,249,1) 100%); /* Opera 11.10+ */
        background: -ms-linear-gradient(-45deg, rgba(112,112,112,0) 48%,rgba(229,229,229,0.75) 51%,rgba(229,229,229,1) 52%,rgba(249,249,249,1) 100%); /* IE10+ */
        background: linear-gradient(135deg, rgba(112,112,112,0) 48%,rgba(229,229,229,0.75) 51%,rgba(229,229,229,1) 52%,rgba(249,249,249,1) 100%); /* W3C */

    width:15px;
    height:15px;
    position:fixed;
    top:0;
    left:0;
    box-shadow: 0px 0px 5px #d3d3d3;
    z-index: 20;
    transition: width 2s ease, height 2s ease; 
}

.curl-out { 
    width: 300px; 
    height: 300px;
    box-shadow: 0px 0px 10px #d3d3d3;
} 

.code{
    background:#fffff;
    white-space: nowrap;
    overflow: hidden;
    width:15px;
    height:15px;
    position:fixed;
    top:0;
    left:0;
    z-index: 10;

}

.menu-reveal { 
    transition: width 2s ease, height 2s ease, z-index 3s ease;
    width: 250px; 
    height: 250px;
    z-index: 50;
} 

.menu-unreveal {
    transition: width 2s ease, height 2s ease, z-index 0s ease;
    width: 15px; 
    height: 15px;
    z-index: 10;
} 
```

我遇到的问题是两个按钮的行为（黑色和黄色框）

当您加载页面并单击黑框时，页面卷曲并且文本轻松显示 - 这就是我想要的。但是，当您再次单击黑色按钮时，文本不会轻松消失，它只会消失。

下一个

如果您刷新浏览器并首先单击黄色按钮，页面会卷曲但文本没有显示 - 这也很好 - 它也没有编程。黑盒子有#open ID

问题是这样的——再次点击刷新现在先点击黑色按钮。这将打开卷曲并显示文本，然后如果您继续单击黄色框，它将根据需要轻松进出，并使用 z-index 显示文本，使其也可点击。

**我想要什么我想要**一个从一开始就可以工作的按钮，它可以缓入和缓出。但是，当卷曲“关闭”时，我希望 z-index 立即设置动画（因此当页面卷曲关闭时没有延迟。）

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:49:34.717

在进行任何更改之前，最好将过渡添加到元素中。我已经设置了一个小提琴来说明这一点，我认为它可以实现您的目标：http: [//jsfiddle.net/xV9Rx/](http://jsfiddle.net/xV9Rx/)

**本质上：**

1.  我删除了黄色按钮，因为它不需要。
2.  我已经`transition`像这样移动了属性：

    .code { 过渡：宽度 2s 缓动，高度 2s 缓动，z-index 0s 缓动；/* z-index 没有延迟 */ }

    .menu-reveal { 过渡：宽度 2s 缓动，高度 2s 缓动，z-index 3s 缓动；/* z-index 的延迟 */ }

就是这样！希望能帮助到你！！:)

# matlab - 没有均值零的白噪声会做一些改变吗？

> ID：15896932
> 
> 赞同：0
> 
> 时间：2013-04-09T08:27:19.703
> 
> 标签：matlab, stochastic-process

我的问题再次与白噪声有关，但含义不同。让我们比较以下两个代码。首先

```
function [ x ] = generate(N,m,A3)
f1 = 100;
f2 = 200;
T = 1./f1;
t = (0:(N*T/m):(N*T))'; %'
wn = rand(length(t),1).*2 - 1;
x = 20.*sin(2.*pi.*f1.*t) + 30.*cos(2.*pi.*f2.*t) + A3.*wn;
%[pks,locs] = findpeaks(x);
 plot(x)
end 
```

使用`generate(3,500,10)`

此代码的图表如下

![在此处输入图像描述](https://i.stack.imgur.com/kOis7.jpg)

但是让我们改变我们的代码，让它在白噪声的情况下为零均值

```
function [ x ] = generate1(N,m,A3)
f1 = 100;
f2 = 200;
T = 1./f1;
t = (0:(N*T/m):(N*T))'; %'
wn = rand(length(t),1).*2 - 1;
mn=wn-mean(wn);
x = 20.*sin(2.*pi.*f1.*t) + 30.*cos(2.*pi.*f2.*t) + A3.*mn;
%[pks,locs] = findpeaks(x);
 plot(x)
end 
```

图表如下 ![在此处输入图像描述](https://i.stack.imgur.com/IZeAg.jpg)

如果我们比较这两张图片，我们可以说它几乎相同，只是有一些变化，那么我们是否使均值为零是否重要？对于实际分析，例如寻找峰值等。非常感谢

更新：有更新的代码

```
function [ x ] = generate1(N,m,A3)
f1 = 100;
f2 = 200;
T = 1./f1;
t = (0:(N*T/m):(N*T))'; %'
wn = randn(length(t),1); %zero mean variance 1
x = 20.*sin(2.*pi.*f1.*t) + 30.*cos(2.*pi.*f2.*t) + A3.*wn;
%[pks,locs] = findpeaks(x);
 plot(x)
end 
```

![在此处输入图像描述](https://i.stack.imgur.com/SjKQd.jpg)

这是图片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:35:04.153

平均值（wm）的值是多少？如果它接近于零，那么不，没关系。

[从技术上讲，根据定义](http://en.wikipedia.org/wiki/White_noise#White_noise_vector)，白噪声的均值为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:36:42.427

您的初始噪音均匀分布在 -1 和 +1 之间

您的第二个噪音也均匀分布在 -1 和 +1 之间，因为均值已经为零，减去它是没有意义的

为了获得白噪声，您可以使用`randn()`以下功能：

```
wn = randn(length(t),1); %zero mean variance 1 
```

如果与信号系数 20 和 30 相比，您的噪声系数 A3 的值要低得多，您可能不会再观察到任何太大差异。

为了找到峰值，添加噪声可能没有任何作用，因为噪声往往会减少信号的信息内容

# sql - 在不使用最大值的情况下从计数中查找最大值

> ID：15896933
> 
> 赞同：2
> 
> 时间：2013-04-09T08:27:24.730
> 
> 标签：sql

我有

```
Voters(name,vote, score,time) 
```

其中 name 是主键，并且投票是选民投票给的人的 ID。1人可以多次投票。

我必须找到投票次数最多的人的名字。 `{Maximum Count(vote)}`不使用 max 命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:33:07.277

如果您可以使用 `count()`，请尝试按它排序您的结果。在 MySQL 中，您的查询可能看起来像

```
SELECT name, COUNT(vote) AS total_votes
FROM Voters
GROUP BY name
ORDER BY total_votes DESC
LIMIT 1 
```

这将返回投票最多的人及其投票数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:46:50.713

您可以使用关系代数中的概念。`limit 1`当多个用户拥有相同数量的选票时，不会给出好的结果。

在 PostgreSQL 上：

```
with t as (select name, count(*) c from voters group by name)
SELECT t.* from t
except
SELECT t.* from t JOIN t t2 ON t2.c > t.c 
```

[SQL Fiddle 示例](http://sqlfiddle.com/#!1/bc113/6)

和样本数据来证明这一点：

```
create table voters (name int,vote int);

insert into voters values (1,1);
insert into voters values (1,1);
insert into voters values (1,1);
insert into voters values (1,1);
insert into voters values (1,1);
insert into voters values (1,1);
insert into voters values (1,1);
insert into voters values (1,1);
insert into voters values (2,1);
insert into voters values (2,1);
insert into voters values (2,1);
insert into voters values (2,1);
insert into voters values (2,1);
insert into voters values (2,1);
insert into voters values (2,1);
insert into voters values (2,1);
insert into voters values (2,1);
insert into voters values (3,1);
insert into voters values (3,1);
insert into voters values (3,1);
insert into voters values (3,1);
insert into voters values (3,1);
insert into voters values (3,1);
insert into voters values (3,1);
insert into voters values (3,1);
insert into voters values (3,1);
insert into voters values (4,1);
insert into voters values (4,1);
insert into voters values (4,1);
insert into voters values (4,1);
insert into voters values (4,1);
insert into voters values (5,1);
insert into voters values (5,1);
insert into voters values (5,1);
insert into voters values (5,1); 
```

My solution is based on answer to this question: [How can I find MAX with relational algebra?](https://stackoverflow.com/questions/5493691/how-can-i-find-max-with-relational-algebra)

There is also good explanation of this concept in another answer here [Aggregate Relational Algebra (Maximum)](https://stackoverflow.com/questions/4952451/aggregate-relational-algebra-maximum)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T08:32:01.783

**尝试关注**

```
select count(*) from table where vote=(select max(count(*)) from table) group by vote 
```

希望这对您有所帮助。

# java - XML 解析。试图获取属性

> ID：15896934
> 
> 赞同：1
> 
> 时间：2013-04-09T08:27:26.600
> 
> 标签：java, xml

我正在开发一个 java 类来解析这个 xml 文件：

```
<document src="xmls/sections/modules/200_1.xml">
<module name="product_info" id="1">
    <product_primary_id>200</product_primary_id>
    <product_section_id>1</product_section_id>
    <product_section_item_id></product_section_item_id>

    <type>1</type>
    <position>1</position>
    <align>top</align>

    <url href="productview/info.html"></url>
</module>
</document> 
```

我有这个java类：

```
try {
    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
    Document doc = dBuilder.parse(contingut);
    doc.getDocumentElement().normalize();
    //loop a cada module
    NodeList nodes = doc.getElementsByTagName("module");
    for (int i = 0; i < nodes.getLength(); i++) {
        Node node = nodes.item(i);
        Element element = (Element) node;
        if(element.getNodeType() == Element.ELEMENT_NODE){
            Log.d("debugging","product_primary_id: "+getValue("product_primary_id",element));
            Log.d("debugging","product_section_id: "+getValue("product_section_id",element));
            //Log.d("debugging","product_section_item_id: "+getValue("product_section_item_id",element));
            Log.d("debugging","type: "+getValue("type",element));
            Log.d("debugging","position: "+getValue("position",element));
            Log.d("debugging","align: "+getValue("align",element));
            //Log.d("debugging","url: "+getValue("url",element));   
        }
    }
} catch (Exception e){
            e.printStackTrace();
} 
```

正如你所看到的，它为每个“模块”标签循环并获取它的子值。但是我需要模块中的名称属性，但是因为它是一个 NodeList，所以不能使用方法`getAttribute("name");`

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:37:56.647

你可以做

```
Element element = (Element) node;
element.getAttribute("name") 
```

检索`name`代表`module`标签的节点的属性。您可以这样做，因为`module`标签本身也是一个元素。该`getAttribute()`方法记录[在这里](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Element.html#getAttribute%28java.lang.String%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:37:26.150

```
doc.getElementsByTagName("module") 
```

返回具有给定标记名称的元素列表，即模块，当您迭代节点列表时，您必须在 for 语句中使用**getAttribute函数。**

请参阅[http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Document.html#getElementsByTagName%28java.lang.String%29](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Document.html#getElementsByTagName%28java.lang.String%29)

# c++ - 捕捉窗口消息放入队列的时刻

> ID：15896941
> 
> 赞同：0
> 
> 时间：2013-04-09T08:27:54.680
> 
> 标签：c++, winapi

我有一个 3rdparty 应用程序（目标），它创建一个窗口。我通过设置父级、更改样式等将该窗口嵌入到我自己的应用程序中。

问题是 Spy++ 显示目标接收 WM_DESTROY 两次（以防我关闭我的应用程序）。有时这会导致目标崩溃。我想了解，为什么消息队列包含 2 个与目标窗口关联的 WM_DESTROY（顺便说一句，只有 1 个 WM_NCDESTROY）。

为此，我在 DestroyWindow、PostMessage 系统调用处设置了断点，但这些函数似乎没有为主目标窗口调用（第一个仅对子窗口调用，第二个 - 具有不同的消息，WM_DESTROY 除外）。我在我的流程和目标流程的背景下做到了这一点。

所以问题是，是否有任何低级函数将消息放入线程消息队列？我想在它上面放断点，并在额外的 WM_DESTROY 放在那里的时候捕捉一下。像 PostThreadMessageInternal...

提前致谢！

# python - IIS 上的 Django：PyISAPIe 或 FastCGI 或 WSGI 或 Helicon Zoo 或 DjangoWindowsTools

> ID：15896943
> 
> 赞同：5
> 
> 时间：2013-04-09T08:27:57.460
> 
> 标签：python, django, iis-7, windows-server-2008-r2

我目前有一个运行 iis 7.5 的 Windows 2008 网络服务器。我已经成功地为 Python 2.7.4 构建了 PyISAPIe 1.1.0。Django 已部署并且运行速度很快。但据我所知，PyISAPIe 有点过时，最后一个版本发布于 2010 年。我发现有 Helicon Zoo（打包运行 WSGI 桥的 WebPI）和 DjangoWindowsTools（使用 Fascgi 自动部署）。所以我想请教您的建议：哪种解决方案最适合 IIS 上的 django/python？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T11:02:07.493

我可以看到您找到了一种解决方案。您可能想知道 Helicon Zoo 也支持 FastCGI 协议进行操作（与 Microsoft FCGI 模块无关）。此外，它支持 TCP 协议（​​如 Linux 上的 Nginx），对于彗星和长轮询支持很有用。此外，它还提供了许多 Microsoft FCGI 模块不具备的附加功能，例如自动负载平衡和应用程序扩展、慢速 POST 攻击保护等。使用 Web Platform Installer 和 Helicon Zoo 我可以缩小您的初始 bat 文件。请查阅：

```
rem Default settings
SET SITE_NAME=Django Site
SET SITE_PHYSIC_PATH=C:\intepub\%SITE_NAME%
SET SITE_URL=*
SET SITE_PORT=8000
SET SITE_PROTOCOL=http

SET SITE_NAME="Enter site name (%SITE_NAME%):" %=%
SET /p SITE_PHYSIC_PATH="Enter project directory, which contain manage.py (%SITE_PHYSIC_PATH%): " %=%
SET /p SITE_PROTOCOL="Enter http|https for protocol (%SITE_PROTOCOL%): " %=%

SET /p SITE_URL="Enter site url (%SITE_URL%):" %=%
IF "%SITE_URL%"=="localhost" (
    SET SITE_URL="*"
)

ECHO.
ECHO Install IIS, Python, Helicon Zoo and other requirements if needed
WebpiCmd.exe /Install /Products:PythonModules /feeds:http://www.helicontech.com/zoo/feed/ /AcceptEula

ECHO.
ECHO Create IIS Site: %SITE_NAME%
md %SITE_PHYSIC_PATH%
%windir%\system32\inetsrv\appcmd add site /name:"%SITE_NAME%" /physicalPath:"%SITE_PHYSIC_PATH%" /bindings:%SITE_PROTOCOL%://%SITE_URL%:%SITE_PORT%
%windir%\system32\inetsrv\appcmd start site /site.name:"%SITE_NAME%"

ECHO.
ECHO Create Django application
echo ApplicationPath[@]%SITE_NAME%/>DjangoProject.app
WebpiCmd.exe /Install /Application:ZooDjangoProject@DjangoProject.app /feeds:http://www.helicontech.com/zoo/feed/ /AcceptEula 
```

如果需要，此代码还可以在完整干净的系统上安装 IIS、Python、Helicon Zoo 和所有其他要求。您只需要Web Platform Installer，您可以从通常安装在**C:\Program Files\Microsoft\Web Platform Installer**的其他系统中复制它无需安装。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T07:56:25.030

好吧，经过另一项研究，我发现 Windows Azure 服务器使用 FastCGI 并且设置非常简单。不再下载，构建...您可以在这里查看[http://www.windowsazure.com/en-us/develop/python/tutorials/web-app-with-django/](http://www.windowsazure.com/en-us/develop/python/tutorials/web-app-with-django/)

我已经创建了一个自动安装程序。它在带有 iis 7.5 的 Windows seserver 2008 r2 上运行。只需从这里获取 wfastcgi.py [http://pytools.codeplex.com/releases](http://pytools.codeplex.com/releases)

```
@ECHO OFF
rem Check for IIS setup
IF NOT EXIST %windir%\system32\inetsrv\appcmd.exe (
    ECHO Please have IIS 7.5 install first
    GOTO END
)

rem Default settings
SET PYTHON_EXE="C:\Python27\python.exe"
SET PROJECT_NAME="DjangoProject"
SET SITE_NAME="%PROJECT_NAME%"
SET SITE_PHYSIC_PATH=%~dp0
SET SITE_URL="*"
SET SITE_PORT="8000"
SET SITE_PROTOCOL="http"
SET DJANGO_SETTING="%PROJECT_NAME%.settings"

rem Gathering information
ECHO IIS 7.5 Django Setup
ECHO Author: James spyjamesbond0072003@gmail.com
ECHO ===========================================
ECHO.

SET /p PYTHON_EXE="Enter python.exe path (%PYTHON_EXE%):" %=%
SET /p PROJECT_NAME="Enter project name (%PROJECT_NAME%):" %=%
SET SITE_NAME="%PROJECT_NAME%"
SET DJANGO_SETTING="%PROJECT_NAME%.settings"
SET /p SITE_PHYSIC_PATH="Enter project directory, which contain manage.py (%SITE_PHYSIC_PATH%): " %=%
SET /p DJANGO_SETTING="Django settings module (%DJANGO_SETTING%):" %=%
SET /p SITE_NAME="Enter IIS site name (%PROJECT_NAME%):" %=%
SET /p SITE_PROTOCOL="Enter http|https for protocol (%SITE_PROTOCOL%): " %=%

SET /p SITE_URL="Enter site url (%SITE_URL%):" %=%
IF "%SITE_URL%"=="localhost" (
    SET SITE_URL="*"
)

SET /p SITE_PORT="Enter port (%SITE_PORT%):" %=%

SET WFCGI_FILE="%SITE_PHYSIC_PATH%\wfastcgi.py"
IF NOT EXIST %WFCGI_FILE% (
    SET /p WFCGI_FILE="Please enter full path for wfastcgi.py: " %=%
)

ECHO =====================================
ECHO Installing
ECHO Install FASTCGI for IIS. Please wait.
start /wait %windir%\System32\PkgMgr.exe /iu:IIS-WebServerRole;IIS-WebServer;IIS-CommonHttpFeatures;IIS-StaticContent;IIS-DefaultDocument;IIS-DirectoryBrowsing;IIS-HttpErrors;IIS-HealthAndDiagnostics;IIS-HttpLogging;IIS-LoggingLibraries;IIS-RequestMonitor;IIS-Security;IIS-RequestFiltering;IIS-HttpCompressionStatic;IIS-WebServerManagementTools;IIS-ManagementConsole;WAS-WindowsActivationService;WAS-ProcessModel;WAS-NetFxEnvironment;WAS-ConfigurationAPI;IIS-CGI

ECHO.
ECHO Create IIS Site: %SITE_NAME%
%windir%\system32\inetsrv\appcmd add site /name:%SITE_NAME% /physicalPath:%SITE_PHYSIC_PATH% /bindings:%SITE_PROTOCOL%/%SITE_URL%:%SITE_PORT%:
%windir%\system32\inetsrv\appcmd start site /site.name:%SITE_NAME%

ECHO.
ECHO Setup Python FastCGI Handler
%windir%\system32\inetsrv\appcmd set config /section:system.webServer/fastCGI "/+[fullPath='%PYTHON_EXE%', arguments='%WFCGI_FILE%']"

ECHO.
ECHO Register the handler for this site
%windir%\system32\inetsrv\appcmd set config "%SITE_NAME%" /section:system.webServer/handlers "/+[name='Python_via_FastCGI',path='*',verb='*',modules='FastCgiModule',scriptProcessor='%PYTHON_EXE%|%WFCGI_FILE%',resourceType='Unspecified']" /commit:site

ECHO.
ECHO Configure the handler to run your Django application
%windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/fastCgi /+"[fullPath='%PYTHON_EXE%', arguments='%WFCGI_FILE%'].environmentVariables.[name='DJANGO_SETTINGS_MODULE',value='k6ecommerce.settings']" /commit:apphost

ECHO.
ECHO Configure PYTHONPATH so your Django app can be found by the Python interpreter
%windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/fastCgi /+"[fullPath='%PYTHON_EXE%', arguments='%WFCGI_FILE%'].environmentVariables.[name='PYTHONPATH',value='%SITE_PHYSIC_PATH%']" /commit:apphost

ECHO.
ECHO Tell the FastCGI to WSGI gateway which WSGI handler to use:
%windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/fastCgi /+"[fullPath='%PYTHON_EXE%', arguments='%WFCGI_FILE%'].environmentVariables.[name='WSGI_HANDLER',value='django.core.handlers.wsgi.WSGIHandler()']" /commit:apphost

ECHO.
ECHO Restart IIS
iisreset
ECHO Done...
:END 
```

# mysql - 大型记录的 SQLInner 联接

> ID：15896949
> 
> 赞同：0
> 
> 时间：2013-04-09T08:28:20.433
> 
> 标签：mysql

我有两个 130,897 行的表，我想在我的本地主机中内部连接这两个表。它需要很多时间或超过执行时间。有人能告诉我如何优化查询吗？提前致谢

# java - 具有自定义属性的 JCR 新节点类型

> ID：15896950
> 
> 赞同：2
> 
> 时间：2013-04-09T08:28:20.930
> 
> 标签：java, jcr, repository

我正在使用此代码在我的 Modeshape JCR 存储库中写入文件。

```
Session session = //some session
Node folderNode = session.getRootNode();

//init some calendar and a file from fileSystem
Calendar lastModified = Calendar.getInstance();
File myFile = new File("c://temp//pic.jpg");    

//create nt:file node
Node fileNode = folderNode.addNode(myFile.getName(), "nt:file");

// create the mandatory child node - jcr:content
Node resNode = fileNode.addNode("jcr:content", "nt:resource");
resNode.setProperty("jcr:mimeType", "");
resNode.setProperty("jcr:encoding", "");
resNode.setProperty("jcr:lastModified", lastModified);

// add some binary data                    
InputStream stream = new BufferedInputStream(new FileInputStream(myFile));
Binary binary = session.getValueFactory().createBinary(stream);
lastModified.setTimeInMillis(myFile.lastModified());
resNode.setProperty("jcr:data", binary); 
```

我想添加一些这样的自定义属性

```
resNode.setProperty("myCustomProperty", "some value", PropertyType.STRING) 
```

但正如所有文档中所述，我得到一个`ConstraintViolationException`因为试图将自定义属性添加到本机 JCR nodeType。

我试图生成一个继承自 Native 的新 NodeType `nt:resource`，然后使用我的自定义属性对其进行扩展：

```
Session session = //some session
Workspace workspace = session.getWorkspace();
NodeTypeManager nodeTypeManager = workspace.getNodeTypeManager();
NodeTypeTemplate ndt = nodeTypeManager.createNodeTypeTemplate();

//i define my new custom propertie under the new nodeType
PropertyDefinitionTemplate createPropertyDefinitionTemplate = nodeTypeManager.createPropertyDefinitionTemplate();
createPropertyDefinitionTemplate.setName("myCustomProperty");
createPropertyDefinitionTemplate.setRequiredType(PropertyType.STRING);
ndt.getPropertyDefinitionTemplates().add(createPropertyDefinitionTemplate);

String myNodeTypeName = "newCustimNodeType";
ndt.setName(myNodeTypeName);
//heritates from nt:resource
String[] str = {"nt:resource"};
ndt.setDeclaredSuperTypeNames(str);
nodeTypeManager.registerNodeType(ndt, true);
session.save(); 
```

这样做我们避免`ConstraintViolationException`了，但现在我们得到了一个，`RepositoryException`因为 JCR 无法在 fileSystem 中保存我的新类型节点和消息：

“有效的主要类型是 nt:file、nt:folder、nt:resource 和 dna:resouce”

所以我想我没有成功地从 superClass 继承新的 newNode `nt:resource`。

这是向节点添加自定义属性的正确方法吗？这是定义继承自 jcr 原生节点的新节点类型的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:21:36.900

您不需要创建自定义节点类型。相反，您可以使用 JCR mixins 为内置的“nt:file”和“nt:folder”节点类型添加更多属性。请参阅此[博客文章](http://modeshape.wordpress.com/2010/09/01/custom-properties-on-ntfile-and-ntfolder-nodes/)，其中解释了如何执行此操作。

至于定义您自己的自定义“nt:file”和“nt:folder”子类型的问题，听起来您使用的是旧版本的 ModeShape（2.x 而不是 3.x），而且您正在使用文件系统连接器。后者旨在通过 ModeShape 和 JCR API 公开文件系统上的现有文件，因此它在使用的节点的主要类型方面受到限制。使用博文中提到的 mixins 将解决这个限制。或者，考虑其他没有此限制的连接器。

# batch-file - 列出文件夹中的名称，执行操作并批量返回文件夹

> ID：15896956
> 
> 赞同：0
> 
> 时间：2013-04-09T08:28:36.280
> 
> 标签：batch-file, dos

我面临以下情况：

我有一个文件夹，其中有许多名为`P_1400`（`P1_1499`A HUNDRED FOLDERS）的文件夹

我想编写一些可以访问每个文件夹并执行操作的脚本

让我们说：

```
>cd Folder 1 
>echo hello in file.txt

>cd ..

>cd folder 2
>echo hello in file.txt

>cd .. 
```

等等..直到没有文件夹

小约束是某些文件夹丢失了可以说`P_1450`丢失并且某些文件夹被命名`P_1420_1`或`P_1420_2`

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:46:10.820

阅读`HELP FOR`然后`HELP PUSHD`试试这个

```
FOR /D %%a IN (P_*) DO (
   PUSHD %%a
   echo Do some action in %%a
   POPD %%a
) 
```

# embedded - ICSP SendCommand 标头中第 4 位的 TDO 是什么意思？（PIC32MX，ICSP 2 线 4 相）

> ID：15896964
> 
> 赞同：3
> 
> 时间：2013-04-09T08:29:02.923
> 
> 标签：embedded, pic, jtag

现在我正在尝试实现 PIC32MX 的[闪存编程规范](http://ww1.microchip.com/downloads/en/DeviceDoc/61145L.pdf)。我正在使用 PIC32MX512L 和 PIC32MX512H。PIC32MX512L 最终必须将程序传输到 PIC32MX512H 的两条线 PGEC2 和 PGED2。

现在我正在尝试执行检查设备操作。按照规定，我通过 MCLR 杂耍进入编程模式，并在 TMS 时钟上执行 SetMode (6b011111)，同时 TDI 时钟保持低电平。TAP 控制器回复零（每个 TDO 为低电平）。

之后，我必须执行 SendCommand( MTAP_SW_MTAP ) 来选择 MTAP 控制器。要移位的序列是

```
(header) 01 01 00 00_ | (data) 00 00 10 00 00 | (most sign. bit) 01 | (footer) 01 00 
```

每对的第一位是 TDI，第二位是 TMS。我在第一个时钟上写入 TDI，在第二个时钟上写入 TMS，并在第三个和第四个时钟上读取 TDO。该序列从左到右馈送。移位的位在每个时钟下降期间保持其值。

# 问题

移位前 4 对后，TDO 线在第四对上变为高电平（在第三个时钟上），并在该 4 相部分结束时（在第四个时钟上）变为低电平。我在上面的序列中用下划线标记了这个位置。之后，控制器将忽略任何进一步的命令。在下一个 SendCommand( MTAP_COMMAND ) 上，TDO 保持低电平，然后对于 XferData( MCHP_STATUS ) TDO 仍然保持低电平，无论我多久发送一次命令。

我用我的示波器做了一个小屏幕截图。蓝线是时钟，绿线是数据。我的意思是右边的跳跃。

![http://i.stack.imgur.com/MSGZh.png](https://i.stack.imgur.com/EWIry.png)

# 问题

有谁知道 TAP 控制器在第四阶段 TDO 高时试图告诉我什么？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T06:43:13.713

嗯，我已经修好了。通常，序言的最后一个 TDO 是输出的第一个最低有效位。对于 SendCommand 它没有任何意义，但对于 XferData 和 XferFastData 它很重要。

对于 XferFastData，它是根据规范的 PrAacc 位。如果该位为零，则应重复整个操作。**但请注意：MCU 实施不符合规范。**如果在 PrAcc 为零的情况下真的重新启动 FastData 的整个操作，它将无法正常工作。相反，只需忽略该位并继续写入。通过反复试验以及将我的 XferFastData 实现与 pic32prog 进行比较，我最终发现了这一点。

# sql-server - 是相同的递归 CTE 和触发器而不是删除？

> ID：15896969
> 
> 赞同：0
> 
> 时间：2013-04-09T08:29:07.950
> 
> 标签：sql-server, sql-server-2008r2-express

我正在使用 SQL Server 2008 Express R2，并且我有一个自引用的表，因为我有一个层次结构。

我需要删除一个根节点，但由于外键而出现错误。我读过我可以使用两个选项，使用递归 CTE 或使用 a 而不是删除触发器。

两者的区别是什么？哪个更有效率？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:55:30.763

当您说使用删除触发器而不是递归 CTE 时，我假设您将在触发器中执行某种循环，这意味着 CTE 会更有效。

对于 CTE，请尝试以下操作：

```
with cte as (
    select id as root, parent, id
    from [<YourTable>]
    where parent is null -- This selects root nodes

    union all

    select cte.root, d.parent, d.id
    from cte
    inner join data d on cte.id = d.parent
)
delete from [<YourTable>]
from [<YourTable>]
inner join cte on rel.id = cte.id
where cte.root = 1 -- This is the root to delete 
```

# java - 具有多个课程的 JComboBoxes 的可能设计模式

> ID：15896971
> 
> 赞同：1
> 
> 时间：2013-04-09T08:29:12.257
> 
> 标签：java, swing, design-patterns, jcombobox

我有一系列 JComboBox，选择的每个值都会改变控制流并动态填充以下 JComboBox。有谁知道任何可能符合此标准的设计模式？课程可能看起来像这样......

```
Course 1    A1    A11    A111
                         A112
                         A113

                  A12    A121
                         A122

            A2    A21    A211
Course 2    ...   ...    .... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:45:15.770

*   将这些项目[放入 JComboBox API 中实现的数组类型之一](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html#JComboBox%28javax.swing.ComboBoxModel%29)

*   将这些数组放入`Tree`,`util.List`或`HashMap`（取决于树的深度），并带有逻辑以逐渐改变链接的其余部分`JComboBox(es)`

*   将[ItemListener](http://docs.oracle.com/javase/tutorial/uiswing/events/itemlistener.html)，[ActionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)添加到所有[JComboBoxes](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)

*   [例如](https://stackoverflow.com/a/6540003/714968)

# actionscript-3 - 将对象传递给类时的兼容性

> ID：15896975
> 
> 赞同：0
> 
> 时间：2013-04-09T08:29:24.827
> 
> 标签：actionscript-3, class, extend

好的，所以这可能是我悬而未决，但我需要知道做某事的最佳方法：（这是伪代码，不是实际代码。实际代码很大）

我的包中基本上有一个像这样的类：

```
internal class charsys extends DisplayObject {
  Bunch of Variables
  a few functions
} 
```

我打算添加到时间轴的另一个类，我想创建一个这样的函数：

```
public class charlist {
  var list:Array = new Array();
  var clock:Timer = new Timer(6000);
  var temp:charsys;

  function addObj(MC:DisplayObject, otherprops:int) {
     temp=MC;
     temp.props = otherprops;
     list.push(temp)
  }

  function moveabout(e: event) {
     stuff to move the items in list
  }

  function charlist() {
     stuff to initialize the timers and handle them.
  }
} 
```

所以问题是，我填充这个数组的方法是一种有效的方法吗？有没有更简单的方法，它们可以像这样继承吗？我什至需要像我一样传递对象吗？

（还在写包，不知道能不能用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:37:49.323

这会起作用，我想我会在将 charsys 对象的属性传递给 add 方法之前为其分配值，而不是传递属性并让不同的类进行属性分配。如果您有一些公共属性，它们可以在 charsys 类定义中具有默认值，或者您可以在 addObj 方法中设置文字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:10:35.830

是的，你可以将一个对象传递给一个函数，但是你应该小心你计划在那个函数中对那个对象做什么。比如说，如果你打算只传递`charsys`对象，你可以这样编写函数头：

```
function addObj(MC:charsys, otherprops:int) { 
```

注意，类型是直接放入函数头的。这样Flash编译器就可以做很多事情了。

首先，它将查询函数体是否引用了传递实例的有效属性。说，你的`charsys`对象没有`props`属性，但是有`prop`属性，这个打字错误会立即被捕获并报告。此外`props`，例如，如果它是一个 int，并且您尝试为其分配一个 String 值，您将再次收到通知。

其次，无论您在何处使用该函数，Flash 编译器都会静态检查是否将正确类型的实例`charsys`传递给该函数，因此如果没有正确类型的实例`charsys`或其子类，则会引发编译错误。

第三，这可以帮助您学习如何为函数提供正确的类型，而不是依赖于动态类，例如`MovieClip`，几乎可以将任何名称的属性分配给任何东西，并且在编译时不检查该属性的存在，可能会引入s 无处出现的令人讨厌的错误`NaN`，或者某些元素未显示等。

关于此类方法的常见用法 - 它们确实可以用于创建/管理一个类的一组相似对象，以根据它们的相应值更改它们的每个可能属性。虽然偶尔需要属性的默认值，但这些函数可用于根据额外信息轻微（或不那么轻微）改变它们。例如，我有一个函数可以生成一个准备好放置的`TextField`对象，完成格式化和更改的默认设置（`multiline=true`等），然后按照我的需要对齐和放置。您不能更改`TextField`类中的默认值，因此您可以使用这样的函数来根据您的需要定制一个新的文本字段对象。

希望这可以帮助。

# javascript - 设置 div 可见

> ID：15896977
> 
> 赞同：0
> 
> 时间：2013-04-09T08:29:26.703
> 
> 标签：javascript, jquery

我想设置可见`valError`。我尝试了一切，但它不起作用。有人可以帮助我吗？

```
<script type="text/javascript">    
    function ValidateTextBox(elem) {
        if (elem.val() == "") {                
            return false;
        }
        else return true;
    }

    function ValidateForm() {
      var a = ValidateTextBox($('[id$=txtBxLangName]'));

      if (a)
          return true;
      else {                                          
          $('#valError').html('Please fill required field');
          $('#valError').show();
          return false;
           }
     } 
</script>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
   <div class="alert alert-error" visible="false" id="valError" runat="server">                       
   </div>                         
   <asp:TextBox ID="txtBxLangName" runat="server" CssClass="textEntry">
   </asp:TextBox>
   <asp:Button ID="btnNewAndUpdate" runat="server" Text="Save" OnClick="btnNewAndUpdate_Click" OnClientClick="return ValidateForm()" />
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T08:30:54.430

```
<div class="alert alert-error" visible="false" id="valError" runat="server"> 
```

应该

```
<div class="alert alert-error" style="display: none" id="valError" runat="server"> 
```

然后`.show()`会工作。

仅出于其他人查看此问题的目的，以下答案显示了此解决方案工作还需要什么：

```
 <asp:TextBox ID="txtBxLangName" runat="server" CssClass="textEntry" ClientIDMode="Static">
 </asp:TextBox> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T08:33:29.630

@thedixon 答案是正确的，但是您也有另一个问题。当 .net 将文本框呈现给客户端时，文本框`txtBxLangName`可能没有该 ID。尝试添加`ClientIDMode`值 static 以确保 ID 设置为`txtBxLangName`

```
 <asp:TextBox ID="txtBxLangName" runat="server" CssClass="textEntry">
   </asp:TextBox> 
```

变成

```
 <asp:TextBox ID="txtBxLangName" runat="server" CssClass="textEntry" ClientIDMode="Static">
   </asp:TextBox> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-09T08:34:53.780

它应该用 .show 显示，确保#valError div 中有一些内容或设置它的宽度、高度和背景并尝试显示块。

```
$('#valError').css('display','block'); 
```

# asp.net - 在主视图中创建复杂模型的多个部分

> ID：15896978
> 
> 赞同：1
> 
> 时间：2013-04-09T08:29:27.027
> 
> 标签：asp.net, asp.net-mvc-4

我对 ASP.Net MVC 有点陌生，我有一个复杂的模型。

```
public class BuildingPermit
{
    public int ApplicationID { get; set; }
    public virtual Person Applicant { get; set; }
    public virtual Area ApplicantArea { get; set; }
    public virtual ICollection<Owner> Owners { get; set; }
    /...
} 
```

使用脚手架，我创建了控制器和所有视图。但是，我想在同一页面中注册所有详细信息，这意味着在`BuildingPermit`'s`Create`视图中，为`Applicant`of type `Person`、`ApplicationArea`of type`Area`等创建详细信息。有什么办法可以做到这一点吗？

如果不可能，我认为可以添加一个链接来创建对象。当用户单击它时，页面会转到该视图，创建它，取回其信息并将其显示在`BuildingPermit`的视图中。

我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:00:45.553

您可以通过在以下位置为 Person、Area、Owner 等创建编辑器模板来实现此目的：

```
~/Views/Shared/EditorTemplates/Person.cshtml
~/Views/Shared/EditorTemplates/Area.cshtml
~/Views/Shared/EditorTemplates/Owner.cshtml 
```

编辑器模板将需要强类型，并且应该为该类型提供编辑器布局：

```
@model Models.Person
<h2>Person</h2> 
<p>
    @Html.LabelFor(model => model.Name)
    @Html.EditorFor(model => model.Name)
</p>
<p>
    @Html.LabelFor(model => model.Address)
    @Html.EditorFor(model => model.Address)
</p>
// And so on 
```

完成此调用`@Html.EditorFor(model => model.Applicant)`后，将拾取您的模板并显示在您的编辑视图中。

如果您想同时显示所有这些信息，那么您可能还需要为这些类型创建显示模板。这些工作就像编辑器模板一样，除了您将模板保存在 DisplayTemplates 文件夹中。

```
~/Views/Shared/DisplayTemplates/Person.cshtml
~/Views/Shared/DisplayTemplates/Area.cshtml
~/Views/Shared/DisplayTemplates/Owner.cshtml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:55:37.590

没问题，只需确保以某种方式初始化复杂对象以避免空引用异常：

```
public BuildingPermit()
{
    this.Applicant = new Person();
    this.ApplicantArea = new Area();
    ...
} 
```

然后在您的控制器操作方法中创建模型的实例并将其传递给您的视图：

```
public ActionResult Create()
{
    BuildingPermit model = new BuildingPermit();

    View(model);
} 
```

对于视图：

```
@model MyNamespace.BuildingPermit

@Html.LabelFor(m => m.Applicant.FirstName)<br />
@Html.TextBoxFor(m => m.Applicant.FirstName)<br />

...

<input type="submit" value="Create new building permit" /> 
```

然后在线查看有关如何`HttpPost`在 MVC 控制器中处理 a 的示例。

如果您想为每种对象类型创建特定的 UI 部分，那么您可以查看`EditorFor`模板`DisplayFor`。从您在原始帖子中提到的内容来看，这可能也是您正在寻找的内容。

希望这可以帮助。

# android - Android Viewflow 用一个按钮去查看

> ID：15896982
> 
> 赞同：0
> 
> 时间：2013-04-09T08:29:47.227
> 
> 标签：android, button, viewgroup

我正在尝试使用[ViewFlow](https://github.com/pakerfeldt/android-viewflow)类制作一个不错的水平视图组。

我想把它和按钮结合起来。例如，当我单击按钮 2 时，我会转到视图组的视图 2。那可能吗？我目前得到了这个：

```
public class HousingActivity extends BaseActivity implements OnClickListener {

ViewFlow viewFlow;
ListView listView;

HousingViewflowAdapter adapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.housing_activity);
    init();

}

private void init() {
    viewFlow = (ViewFlow) findViewById(R.id.viewflow);
    setOnClickListner(this, this, new int[] { R.id.housing_button1,
            R.id.housing_button2, R.id.housing_button3,
            R.id.housing_button4 });
    adapter = new HousingViewflowAdapter(this);
    viewFlow.setAdapter(adapter);
    viewFlow.setOnViewSwitchListener(new ViewSwitchListener() {

        @Override
        public void onSwitched(View view, int position) {

        }
    });

    listView = (ListView) findViewById(R.id.housing_view1_listview);
    ArrayList<Community> communityList = new ArrayList<Community>();
            // Some dummy data
    for (int i = 0; i < 10; i++) {
        communityList.add(new Community("Place " + new Random().nextInt(),
                new Random().nextInt(), 000000000, ""));
    }
    listView.setAdapter(new MainListViewAdapter(this, 0, communityList));
}

@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    // viewFlow.onConfigurationChanged(newConfig);
}

@Override
public void onClick(View v) {
    super.onClick(v);
    switch (v.getId()) {
    case R.id.housing_button1:  
        break;
    case R.id.housing_button2:
        break;
    case R.id.housing_button3:
        break;
    case R.id.housing_button4:
        break;
    }
}
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T17:01:10.853

Ah ! I found it !

```
viewFlow.setAdapter(adapter,number); 
```

The number being the page you want to show

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:16:54.987

您可以查看：

```
viewFlow.setSelection(int position) 
```

# javascript - 在不同的 attr 中定义的指令 attr 内的回调函数

> ID：15896985
> 
> 赞同：39
> 
> 时间：2013-04-09T08:29:56.003
> 
> 标签：javascript, ajax, angularjs, angularjs-directive

所以我有这个指令叫做 say, `mySave`，差不多就是这个

```
app.directive('mySave', function($http) {
   return function(scope, element, attrs) {
      element.bind("click", function() {
          $http.post('/save', scope.data).success(returnedData) {
              // callback defined on my utils service here

              // user defined callback here, from my-save-callback perhaps?
          }
      });
   }
}); 
```

元素本身看起来像这样

```
<button my-save my-save-callback="callbackFunctionInController()">save</button> 
```

callbackFunctionInController 现在只是

```
$scope.callbackFunctionInController = function() {
    alert("callback");
} 
```

当我`console.log()` `attrs.mySaveCallback`在 my-save 指令中时，它只给了我一个 string ，我在[某处](https://groups.google.com/forum/?fromgroups=#!topic/angular/NGQufVevDyA)`callbackFunctionInController()`读到我应该 $parse 这个，它会很好，所以我尝试了它给了我一些功能，但几乎不是我正在寻找的功能，它还给了我`$parse(attrs.mySaveCallback)`

```
function (a,b){return m(a,b)} 
```

我究竟做错了什么？这种方法从一开始就存在缺陷吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-04-09T09:17:08.720

所以似乎最好的方法是使用 ProLoser 建议的隔离范围

```
app.directive('mySave', function($http) {
   return {
      scope: {
        callback: '&mySaveCallback'
      }
      link: function(scope, element, attrs) {
        element.on("click", function() {
            $http.post('/save', scope.$parent.data).success(returnedData) {
                // callback defined on my utils service here

                scope.callback(); // fires alert
            }
        });
      }
   }
}); 
```

要将参数传递回控制器，请执行此操作

```
[11:28] <revolunet> you have to send named parameters 
[11:28] <revolunet> eg my-attr="callback(a, b)" 
[11:29] <revolunet> in the directive: scope.callback({a:xxx, b:yyy}) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-09T08:41:45.490

有很多方法可以去做你正在做的事情。您应该知道的第一件事是，`$http.post()`一旦模板引擎渲染出 DOM 元素，就会调用 ，仅此而已。如果你把它放在一个重复中，调用将针对中继器中的每个新项目完成，所以我猜这绝对不是你想要的。如果**是**这样，那么您确实没有正确设计事物，因为仅 DOM 的存在不应该决定对后端的查询。

无论如何，直接回答你的问题；如果您在 $parse 上阅读虽然很糟糕的文档，它会返回一个评估表达式。当您通过传递要评估的范围来执行此函数时，将返回您传递的范围内该表达式的当前状态，这意味着您的函数将被执行。

```
var expression = $parse(attrs.mySave);
results = expression($scope); // call on demand when needed
expression.assign($scope, 'newValu'); // the major reason to leverage $parse, setting vals 
```

是的，一开始有点令人困惑，但您必须了解 $scope 在异步应用程序中不断变化，这完全取决于您希望何时确定该值，而不仅仅是如何确定。`$parse`对于引用您希望能够为其分配值的模型更有用，而不仅仅是从中读取。

当然，您可能想阅读有关创建隔离作用域或如何创建`$eval()`表达式的信息。

```
$scope.$eval(attrs.mySave); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-09T08:38:44.437

您可以使用[.$eval](http://docs.angularjs.org/api/ng.$rootScope.Scope#$eval)在给定范围内执行语句

```
app.directive('mySave', function($http) {
   return function(scope, element, attrs) {
      $http.post('/save', scope.data).success(returnedData) {
          // callback defined on my utils service here

          // user defined callback here, from my-save-callback perhaps?
          scope.$eval(attrs.mySaveCallback)
      }
   }
}); 
```

TD：[演示](http://plnkr.co/edit/8m4GegZqOS3ZFJZtKVUd?p=preview)

如果要在指令和控制器之间共享数据，可以使用双向绑定

```
app.controller('AppController', function ($scope) {
   $scope.callbackFunctionInController = function() {
      console.log('do something')
   };

   $scope.$watch('somedata', function(data) {
      console.log('controller', data);
   }, true);
});

app.directive('mySave', function($http, $parse) {
   return {
     scope: {
       data: '=mySaveData',
       callback: '&mySaveCallback' //the callback
     },
     link: function(scope, element, attrs) {
       $http.get('data.json').success(function(data) {
         console.log('data', data);
         scope.data = data;
         scope.callback(); //calling callback, this may not be required
       });
     }
   };
}); 
```

演示：[小提琴](http://plnkr.co/edit/8m4GegZqOS3ZFJZtKVUd?p=preview)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-10-11T08:37:52.457

```
scope: {
    callback: '&mySaveCallback'
} 
```

显式设置范围可能是一个很好的解决方案，但是如果您想要访问原始范围的其他部分，则不能，因为您刚刚覆盖了它。出于某种原因，我也需要到达范围的其他部分，所以我使用了与 ng-click 相同的实现。

在 HTML 中使用我的指令：

`<div my-data-table my-source="dataSource" refresh="refresh(data)">`

在指令内部（没有明确设置范围）：

```
var refreshHandler = $parse(attrs.refresh);
    scope.$apply(function () {
    refreshHandler( {data : conditions}, scope, { $event: event });
}); 
```

有了这个，我可以调用控制器中的函数并将参数传递给它。

在控制器中：

```
$scope.refresh= function(data){
    console.log(data);
} 
```

它会正确打印出条件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-25T10:11:43.610

这对我有用

视图脚本内部

```
<tag mycallbackattrib="scopemethod"> 
```

指令内

```
$scope[attrs.mycallbackattrib](params....); 
```

它被正确调用并传递了参数，但可能不是最好的“角度方式”工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-10T05:32:57.993

您应该使用`ng-click`而不是创建自己的指令。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-21T15:10:34.823

```
app.directive('mySave', function($http, $parse) {
   return {
     scope: {
       data: '=mySaveData',
       callback: '&' //the callback
     },
     link: function(scope, element, attrs) {
       $http.get('data.json').success(function(data) {
         console.log('data', data);
         if (scope.callback()) scope.callback().apply(data);
       });
     }
   };
}); 
```

# java - 我们如何在 Java 中生成一个随机但唯一的数字

> ID：15896990
> 
> 赞同：-7
> 
> 时间：2013-04-09T08:30:13.403
> 
> 标签：java

我正在尝试为每个命中我的应用程序的 Http 请求生成一个随机的唯一编号。

如何确保这样一个数字的唯一性。java是否为此提供任何方法或API？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T08:33:25.140

你可以使用这个[`java.util.UUID`](http://docs.oracle.com/javase/6/docs/api/java/util/UUID.html)类。

```
UUID rand = UUID.randomUUID();
System.out.println(rand); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T08:36:43.693

您可以使用 java.util.Random - [http://java.about.com/od/javautil/a/randomnumbers.htm](http://java.about.com/od/javautil/a/randomnumbers.htm)

# java - JButton 和 actionPerformed 方法是否可能在不同的文件中？

> ID：15896991
> 
> 赞同：2
> 
> 时间：2013-04-09T08:30:23.020
> 
> 标签：java, swing, button, actionlistener

是否可以在一个文件上有一个按钮，在另一个文件中有它的 actionPerformed(ActionEvent e) 方法？我正在尝试向按钮添加一个 actionListener，choose1 在文件 trialdump.java 中，但 actionPerformed(ActionEvent e) 方法在文件 listen.java 中。我尝试扩展公共类 Trialdump 扩展侦听，但它显示错误。知道如何将方法添加到按钮吗？谢谢。

这是我在文件 trialdump.java 中的代码：

```
package Core;

import javax.swing.GroupLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.SwingConstants;
import javax.swing.*;
import java.awt.*;

// Create a simple GUI window
public class trialdump {

private static void createWindow() {

    // Create and set up the window.
    JFrame frame = new JFrame("PDF Denoiser");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    // My edit
    JPanel panel = new JPanel();
    GroupLayout layout = new GroupLayout(panel);
    panel.setLayout(layout);

    layout.setAutoCreateGaps(true);
    layout.setAutoCreateContainerGaps(true);

    JLabel label1 = new JLabel("Image File");
    JLabel label2 = new JLabel("Destination");
    JLabel label3 = new JLabel("Preview");

    JTextField current = new JTextField();
    JTextField dest = new JTextField();
    JTextArea preview = new JTextArea();

    preview.setEditable(false);
    JScrollPane previewScrollPane = new JScrollPane(preview);

    JButton choose1 = new JButton("Search1");
    JButton choose2 = new JButton("Search2");
    JButton algo1 = new JButton("MDWM");
    JButton algo2 = new JButton("BFMR");
    JButton algo3 = new JButton("Mine");

    // Horizontal arrangement
    layout.setHorizontalGroup(layout
            .createSequentialGroup()
            .addGroup(
                    layout.createParallelGroup(GroupLayout.Alignment.LEADING).addComponent(label1)
                            .addComponent(label2).addComponent(label3))
            .addGroup(
                    layout.createParallelGroup(GroupLayout.Alignment.LEADING).addComponent(current)
                            .addComponent(dest).addComponent(preview))
            .addGroup(
                    layout.createParallelGroup(GroupLayout.Alignment.LEADING).addComponent(choose1)
                            .addComponent(choose2).addComponent(algo1).addComponent(algo2).addComponent(algo3)));

    layout.linkSize(SwingConstants.HORIZONTAL, choose1, choose2, algo1, algo2, algo3);

    // Vertical arrangement
    layout.setVerticalGroup(layout
            .createSequentialGroup()
            .addGroup(
                    layout.createParallelGroup(GroupLayout.Alignment.BASELINE).addComponent(label1)
                            .addComponent(current).addComponent(choose1))
            .addGroup(
                    layout.createParallelGroup(GroupLayout.Alignment.BASELINE).addComponent(label2)
                            .addComponent(dest).addComponent(choose2))
            .addGroup(
                    layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                            .addComponent(label3)
                            .addComponent(preview)
                            .addGroup(
                                    layout.createSequentialGroup().addComponent(algo1).addComponent(algo2)
                                            .addComponent(algo3))));

    // Display the window.
    frame.setLocationRelativeTo(null);
    frame.add(panel);
    frame.pack();
    frame.setVisible(true);
}

public static void main(String[] args) {

    createWindow();

}
} 
```

这是我在listen.java中的代码：

```
package components;

import java.io.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.SwingUtilities;
import javax.swing.filechooser.*;

public class listen extends JPanel implements ActionListener{

static private String newline = "\n";
private JTextArea log;
private JFileChooser fc;

public listen() {

}

public void actionPerformed(ActionEvent e) {
    //Set up the file chooser.
    if (fc == null) {
        fc = new JFileChooser();

    //Add a custom file filter and disable the default
    //(Accept All) file filter.
        fc.addChoosableFileFilter(new imagefilter());
        fc.setAcceptAllFileFilterUsed(false);

    //Add custom icons for file types.
        fc.setFileView(new imagefileview());

    //Add the preview pane.
        fc.setAccessory(new imagepreview(fc));
    }

    //Show it.
    int returnVal = fc.showDialog(listen.this,
                                  "Attach");

    //Process the results.
    if (returnVal == JFileChooser.APPROVE_OPTION) {
        File file = fc.getSelectedFile();

    } else {
        log.append("Attachment cancelled by user." + newline);
    }
    log.setCaretPosition(log.getDocument().getLength());

    //Reset the file chooser for the next time it's shown.
    fc.setSelectedFile(null);
}

/**
 * Create the GUI and show it.  For thread safety,
 * this method should be invoked from the
 * event dispatch thread.
 */

public static void main(String[] args) {
    //Schedule a job for the event dispatch thread:
    //creating and showing this application's GUI.
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            //Turn off metal's use of bold fonts
            UIManager.put("swing.boldMetal", Boolean.FALSE);

        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:37:52.707

您可以添加在另一个类中定义的侦听器，执行类似这样的操作

```
JButton choose1 = new JButton("Search1");
choose1.addActionListener(new listen()); 
```

顺便说一句，您应该注意代码的更多部分：

*   类名应以 CamelCase 格式输入，首字母大写
*   为您的包裹使用正确的名称
*   我认为侦听器类中的主要方法没有任何用处
*   根本不需要在侦听器类中从 JPanel 扩展
*   尽量避免创建空构造函数，就像你在listen() 中所做的那样。至少调用 super()，或者只是不包含它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:37:41.667

只是示例代码，您可以在类似的行上进行更改-

```
class Some extends JFrame {

    private JButton button = new JButton("Something");

    Some() {
        button.addActionListener(new MyListener());
    }
}

class MyListener implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent e) {
        // do something
    }    
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T08:47:51.413

这样做的正确方法是扩展`AbstractAction`类，将所有操作代码添加到它的`actionPerformed`方法，然后将它的新实例传递给构造`JButton's`函数或调用`setAction`.`JButton`

这是一个[链接](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)，可帮助您清除所有问题。

# emacs - pylint 和 pep8 不适用于 emacs24.2？

> ID：15896998
> 
> 赞同：1
> 
> 时间：2013-04-09T08:30:40.890
> 
> 标签：emacs, pylint, pep8

我尝试将 pylint 和 pep8 集成到我的 emacs24.2 中，通过一些代码，例如`(require 'python-pep8)`在`(require 'python-pylint)`我的 .emacs 中。但我得到了如下所示的错误：

```
Debugger entered--Lisp error: (void-function define-compilation-mode)
   (define-compilation-mode python-pep8-mode "PEP8" (setq python-pep8-last-buffer (current-buffer)) (set (make-local-variable (quote compilation-error-regexp-alist)) python-pep8-regexp-alist) (set (make-local-variable (quote compilation-disable-input)) t))
   eval-buffer(#<buffer  *load*<3>> nil "/home/zhkzyth/.emacs.d/non_forked/python-pep8.el" nil t)  ; Reading at buffer position 2399
   load-with-code-conversion("/home/zhkzyth/.emacs.d/non_forked/python-pep8.el" "/home/zhkzyth/.emacs.d/non_forked/python-pep8.el" nil nil)
 load("non_forked/python-pep8")
 eval-buffer(#<buffer  *load*<2>> nil "/home/zhkzyth/.emacs.d/zhkzyth.el" nil t)  ; Reading at buffer position 1353
 load-with-code-conversion("/home/zhkzyth/.emacs.d/zhkzyth.el" "/home/zhkzyth/.emacs.d/zhkzyth.el" nil nil)
 load("zhkzyth")
 eval-buffer(#<buffer  *load*> nil "/home/zhkzyth/.emacs" nil t)  ; Reading at buffer position 56
 load-with-code-conversion("/home/zhkzyth/.emacs" "/home/zhkzyth/.emacs" t t)
 load("~/.emacs" t t)
 #[0 "\205\262 
```

似乎未定义定义编译模式。知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T12:02:49.503

好像`python-pep8.el`少了一个

```
(require 'compile) 
```

在顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T10:15:46.307

我有同样的问题，在我的情况下 pep8 在 .emacs 中被注释掉了

```
;;(require 'python-pep8)
(require 'python-pylint) 
```

当我删除注释时，问题已得到解决，似乎 pylint 需要 pep8。

```
(require 'python-pep8)
(require 'python-pylint) 
```