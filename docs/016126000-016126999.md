# StackOverflow 问答 16126000-16126999

# php - 如何通过分页维护复选框查询

> ID：16126001
> 
> 赞同：0
> 
> 时间：2013-04-20T22:47:42.057
> 
> 标签：php, session, pagination, checkbox

我有一个带有下面代码的脚本和一个分页，用户可以在其中选中复选框以缩小显示的结果，一切似乎都很好，唯一的问题是当用户单击分页中的下一页时，结果会丢失并且默认结果显示。我想我可能需要使用会话来存储查询或语句，但我不确定如何使用它们。如果有人可以帮助我或指出我正确的方向，我将非常感激。

这是我的代码

```
 <?php

 //get the function
 include ($_SERVER['DOCUMENT_ROOT'] .'/scripts/function1.php'); 

 $page = (int) (!isset($_GET["page"]) ? 1 : $_GET["page"]);
        $limit = 14;
        $startpoint = ($page * $limit) - $limit;     

   if(isset($_POST['muscle'])) {

   // Runs mysql_real_escape_string() on every value encountered.
         $clean_muscle = array_map('mysql_real_escape_string', $_REQUEST['muscle']);

    // Convert the array into a string.
         $muscle = implode("','", $clean_muscle);

   if (!empty($_POST['muscle'])) {

      $options[] = "muscle IN ('$muscle')";
     } else {
      $options[] = "";
     }
     } else {
      $options[] = "allmuscle = 'all' ";
     }

   if(isset($_POST['equipment'])) {

    // Runs mysql_real_escape_string() on every value encountered.
   $clean_equipment = array_map('mysql_real_escape_string', $_REQUEST['equipment']);

   // Convert the array into a string.
   $equipment = implode("','", $clean_equipment);

   if (!empty($_POST['equipment'])) {

      $options[] = "equipment IN ('$equipment')";
     } else {
      $options[] = "";
     }
     } else {
      $options[] = "allequipment = 'all'";
     }

   if(isset($_POST['all'])) {
     $options[] = "";
  } 

 $fullsearch = implode(' AND ', $options);

 $statement = "exercise ";

 if ($fullsearch <> '') {
 $statement .= " WHERE " . $fullsearch;
 } else {
 $statement .= "";
 }

 if(!$query = mysql_query("SELECT * FROM  {$statement}  LIMIT {$startpoint} , {$limit}"))
 {
 echo "Cannot parse query";
 }   
 elseif(mysql_num_rows($query) == 0) {
 echo "No records found";
 }  

 else {

 while($row = mysql_fetch_assoc($query)) {
 echo "".$row['name'] ."<br />
              ".$row['description'] ."";
        }
}
         echo "<div class=\"new-pagination\">";
        echo pagination($statement,$limit,$page);
        echo "</div>";

?> 
```

这是分页脚本

```
 <?php

    function pagination($query, $per_page = 10, $page = 1, $url = '?'){        
    $query = "SELECT COUNT(*) as `num` FROM {$query}";
    $row = mysql_fetch_array(mysql_query($query));
    $total = $row['num'];
      $adjacents = "1"; 

    $page = ($page == 0 ? 1 : $page);  
    $start = ($page - 1) * $per_page;   

    $firstPage = 1;
       $prev = ($page == 1)?1:$page - 1; 

    $prev = $page - 1;                          
    $next = $page + 1;
      $lastpage = ceil($total/$per_page);
    $lpm1 = $lastpage - 1;

    $pagination = "";

    if($lastpage >  1)
    {   
        $pagination .= "<ul class=\"pagination1\">";

                if ($page == 1)
    {
    $pagination.= "<li><a class=\"inactive\">First</a></li>";
     $pagination.= "<li><a class=\"inactive\">Prev</a></li>"; 
     }
        else
      {
        $pagination.= "<li><a href=\"{$url}page=$firstPage\" >First</a></li>";
     $pagination.= "<li><a href=\"{$url}page=$prev\" >Prev</a></li>"; 
     }

                $pagination .= "<li class=\"details\">Page $page of $lastpage</li>";
        if ($lastpage < 7 + ($adjacents * 2))

        {   
            for ($counter = 1; $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<li><a class=\"current\">$counter</a></li>";
                else
                    $pagination.= "<li><a href=\"{$url}page=$counter\" >$counter</a></li>";                 
            }
        }
        elseif($lastpage > 5 + ($adjacents * 2))
        {
            if($page < 1 + ($adjacents * 2))        
            {
                for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<li><a class=\"current\">$counter</a></li>";
                    else
                        $pagination.= "<li><a href=\"{$url}page=$counter\" >$counter</a></li>";                 
                }
                $pagination.= "<li class=\"dot\">... </li>";
                $pagination.= "<li><a href=\"{$url}page=$lpm1\" >$lpm1</a></li>";
                $pagination.= "<li><a href=\"{$url}page=$lastpage\" >$lastpage</a></li>";       
            }
            elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
            {
                $pagination.= "<li><a href=\"{$url}page=1\" >1</a></li>";
                $pagination.= "<li><a href=\"{$url}page=2\" >2</a></li>";
                $pagination.= "<li class=\"dot\">...</li>";
                for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<li><a class=\"current\">$counter</a></li>";
                    else
                        $pagination.= "<li><a href=\"{$url}page=$counter\" >$counter</a></li>";                 
                }
                $pagination.= "<li class=\"dot\">..</li>";
                $pagination.= "<li><a href=\"{$url}page=$lpm1\" >$lpm1</a></li>";
                $pagination.= "<li><a href=\"{$url}page=$lastpage\" >$lastpage</a></li>";       
            }
            else
            {
                $pagination.= "<li><a href=\"{$url}page=1\" >1</a></li>";
                $pagination.= "<li><a href=\"{$url}page=2\" >2</a></li>";
                $pagination.= "<li class=\"dot\">..</li>";
                for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<li><a class=\"current\">$counter</a></li>";
                    else
                        $pagination.= "<li><a href=\"{$url}page=$counter\" >$counter</a></li>";                 
                }
            }
        }

        if ($page < $counter - 1){ 
            $pagination.= "<li><a href=\"{$url}page=$next\">Next</a></li>";
            $pagination.= "<li><a href=\"{$url}page=$lastpage\" >Last</a></li>";
        }else{
            $pagination.= "<li><a class=\"inactive\">Next</a></li>";
            $pagination.= "<li><a class=\"inactive\">Last</a></li>";
        }
        $pagination.= "</ul>\n";        
    }

    return $pagination;
} 
?> 
```

这是我的复选框

```
 <form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" name="criteria">
 <ul>
  <li class="head">
 <input type="checkbox" name="allmuscle[1]" class="remember_cb" id="allMuscles" value="selectedMuscles" >All Muscle Groups<br /></li>
<li><input type="checkbox" name="muscle[2]" class="remember_cb" id="abdominals" value="abdominals"/>Abdominals<br /></li>
<li><input type="checkbox" name="muscle[3]" class="remember_cb" id="biceps" value="biceps"/>Biceps<br /></li>
<li><input type="checkbox" name="muscle[4]" class="remember_cb" id="calves" value="calves"/>Calves<br /></li>
<li><input type="checkbox" name="muscle[5]" class="remember_cb" id="chest" value="chest" />Chest<br /></li>
<li><input type="checkbox" name="muscle[6]" class="remember_cb" id="forearms" value="forearms"/>Foreamrs<br /></li>
<li><input type="checkbox" name="muscle[7]" class="remember_cb" id="glutes" value="glutes"/>Glutes<br /></li>
<li><input type="checkbox" name="muscle[8]" class="remember_cb" id="hamstrings" value="hamstrings"/>Hamstrings<br /></li>
<li><input type="checkbox" name="muscle[9]" class="remember_cb" id="lats" value="lats"/>Lats<br /></li>
<li><input type="checkbox" name="muscle[10]" class="remember_cb" id="lower-back" value="lower-back"/>Lower Back<br /></li>
<li><input type="checkbox" name="muscle[11]" class="remember_cb" id="middle-back" value="middle-back" />Middle Back<br /></li>
<li><input type="checkbox" name="muscle[12]" class="remember_cb" id="neck" value="neck"/>Neck<br /></li>
<li><input type="checkbox" name="muscle[13]" class="remember_cb" id="quadriceps" value="quadriceps" />Quadriceps<br /></li>
<li><input type="checkbox" name="muscle[14]" class="remember_cb" id="shoulders" value="shoulders" />Shoulders<br /></li>
<li><input type="checkbox" name="muscle[15]" class="remember_cb" id="traps" value="traps" />Traps<br /></li>
<li><input type="checkbox" name="muscle[16]" class="remember_cb" id="triceps" value="triceps"/>Triceps<br /></li>
      </ul>
            <br /><p><strong>EQUIPMENT</strong></p>
     <ul>
   <li class="head"><input type="checkbox" name="allequip[]" class="remember_cb" id="allEquipment" value="selectedEquipment" >All Equipment<br /></li>
<li><input type="checkbox" name="equipment[1]" class="remember_cb" id="equipment" value="bands"/>Bands<br /></li>
<li><input type="checkbox" name="equipment[2]" class="remember_cb" id="equipment" value="barbell" />Barbell<br /></li>
<li><input type="checkbox" name="equipment[3]" class="remember_cb" id="equipment" value="body-only" />Body Only<br /></li>
<li><input type="checkbox" name="equipment[4]" class="remember_cb" id="equipment" value="cable" />Cable<br /></li>
<li><input type="checkbox" name="equipment[5]" class="remember_cb" id="equipment" value="dumbbell" />Dumbbell<br /></li>
<li><input type="checkbox" name="equipment[6]" class="remember_cb" id="equipment" value="ez-curl-bar"/>EZ Curl Bar<br /></li>
<li><input type="checkbox" name="equipment[7]" class="remember_cb" id="equipment" value="exercise-ball"/>Exercise Ball<br /></li>
<li><input type="checkbox" name="equipment[8]" class="remember_cb" id="equipment" value="foam-roll" />Foam Roll<br /></li>
<li><input type="checkbox" name="equipment[9]" class="remember_cb" id="equipment" value="kettlebell" />Kettlebell<br /></li>
<li><input type="checkbox" name="equipment[10]" class="remember_cb" id="equipment" value="machine" />Machine<br /></li>
<li><input type="checkbox" name="equipment[11]" class="remember_cb" id="equipment" value="medicine-ball"/>Medicine Ball<br /></li>
<li><input type="checkbox" name="equipment[12]" class="remember_cb" id="equipment" value="none" />None<br /></li>
<li><input type="checkbox" name="equipment[13]" class="remember_cb" id="equipment" value="other" />Other<br /></li> 
```

该脚本一切正常，我唯一的问题是，一旦选中复选框，结果就会返回，但只有在您单击下一页或第 2 页时才会停留在第一页上，结果或查询将丢失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T23:07:12.270

对于会话，只需将搜索参数存储到`$_SESSION`数组中。当请求来自初始搜索表单时，不要忘记覆盖存储的参数。

```
$_SESSION['muscle'] = ... 
```

不使用用户会话的另一种方法是在结果列表中重新发布搜索参数。您可以将它们放在隐藏的表单元素中或手动添加到页面前进/后退链接的 URL：

```
"<form action=\"...\" id=\"page_prev\">".
    "<input type=\"hidden\" name=\"muscle\" value=\"$_POST['muscle']\" .
    "<input type=\"hidden\" name=\"page\" value=\"$prev\"; 
```

或者

```
"<a href=\"{$url}page=$prev&muscle=$_POST['muscle']\" 
```

对于表单变体，您还需要一些 JS 代码以将表单作为链接提交以单击：

```
<a href="#" onclick="document.getElementById('page_prev').submit()">Prev</a>; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T23:50:25.247

既然你想使用会话来做到这一点..这是你可以做到的方式

```
//Your first part of the code

<?php 
   session_start(); // this should be in the beginning of your page

   //get the function
    include ($_SERVER['DOCUMENT_ROOT'] .'/scripts/function1.php'); 
     .    
     .. //code in between
     ...   

     if(isset($_POST['muscle'])) {

    // Runs mysql_real_escape_string() on every value encountered.
     $clean_muscle = array_map('mysql_real_escape_string', $_REQUEST['muscle']);

      //since you had a post request you can save it in session now
      // you can either save it as an array or string depending on what exactly you want to do with it.
      // if you want to do more complex work like db quering save ie in array like this
      foreach($clean_muscle as $cm){
            $_SESSION["muscle"][] = $cm;
       }

      // or if you just want to display the clean_muscle string do it this way after your implode
      $muscle = implode("','", $clean_muscle);
       $_SESSION["muscle"] = $muscle; 
```

现在，每当加载页面时，您只需要检查会话是否已设置

```
 //check if session is set
  if(isset($_SESSION["muscle"]) && !empty($_SESSION["muscle"])){
      // do whatever you want to do with your variable  
   } 
```

对您的设备使用相同的过程。就个人而言，这整个代码可以用更好的方式编写..但它是您的选择和您的代码..希望这会有所帮助。

丁斯

# r - 将一个数据帧的列中的值与另一个数据帧中的列子集匹配

> ID：16126003
> 
> 赞同：3
> 
> 时间：2013-04-20T22:47:50.393
> 
> 标签：r, match, subset

我正在尝试将一个数据框的列中的值与第二个数据框的列中的值匹配。棘手的部分是我想使用第二个数据帧的子集进行匹配（由第二个数据帧中与正在匹配的数据帧不同的列指定）。这不同于通常发布的基于数据帧之间的匹配进行子集化的问题。

我的问题恰恰相反——我想根据子集匹配数据帧。具体来说，我想将第二个数据框中列的子集与第一个数据框的整个列进行匹配，然后在第一个数据框中创建新列，以显示是否为每个数据框进行了匹配子集。

这些子集可以有不同数量的行。使用下面的两个虚拟数据框...

```
DF1 <- data.frame(number=1:10)

DF2 <- data.frame(category = rep(c("A","B","C"), c(5,7,3)), 
                  number = sample(10, size=15, replace=T)) 
```

...目标是创建三个新列（`DF1$A`、`DF1$B`和`DF$C`），显示 中的值是否`DF1$number`与. 理想情况下，如果匹配成功，这些新列中的行将显示“1”，如果没有匹配，则显示“0”。使用下面的虚拟数据，我最终会得到 4 列（、、和），每列 10 行。`DF2$number``DF2$category``DF1``DF1$number``DF1$A``DF1$B``DF$C`

请注意，在我实际的第二个数据框中，我有大量的类别，因此我不想为实现此目标所需的任何操作单独输入它们。我希望这是有道理的！抱歉，如果我遗漏了一些明显的东西，非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T23:00:02.120

这应该有效：

```
sapply(split(DF2$number, DF2$category), function(x) DF1$number %in% x + 0)

      A B C
 [1,] 0 0 1
 [2,] 1 1 0
 [3,] 1 1 1
 [4,] 0 1 0
 [5,] 0 0 1
 [6,] 0 1 0
 [7,] 1 1 0
 [8,] 1 0 0
 [9,] 1 0 0
[10,] 0 1 0 
```

您可以将其添加回 DF1，如：

```
data.frame(
   DF1,
   sapply(split(DF2$number, DF2$category), function(x) DF1$number %in% x + 0)
          )

   number A B C
1       1 0 0 1
2       2 1 1 0
3       3 1 1 1
4       4 0 1 0
5       5 0 0 1
6       6 0 1 0
7       7 1 1 0
8       8 1 0 0
9       9 1 0 0
10     10 0 1 0 
```

# php - VIrtualHost 选项返回站点文件夹的索引

> ID：16126005
> 
> 赞同：1
> 
> 时间：2013-04-20T22:48:07.887
> 
> 标签：php, apache, cakephp, virtualhost, virtual-hosts

我不确定为什么会发生这种情况，因为我对 Apache 不是很了解。下面是我的 VirtualHost 的副本。

如果这对如何让它工作提供了任何额外的帮助，我正在尝试运行一个 CakePHP 站点。我知道该站点本身没有问题，因为我有另一个位置来管理代码，并且可以通过那里的 Apache 在本地运行它。

```
<virtualhost *:80>
    DocumentRoot "C:/sites/sitename"
    ServerName dev.sitename.com
    ErrorLog "logs/sitename.com-error.log"
    CustomLog "logs/sitename.com-access.log" common

    <directory "C:/sites/sitename">
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order Allow,Deny
        Allow from all
    </directory>
</virtualhost> 
```

我在 Apache 2.0 和 Win7sp1 上运行它

**更新**

我从未使用我所在的路线找到真正的解决方案。我下载了一个新的 WAMP 副本，很快就可以启动并运行所有内容，没问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T23:01:03.003

为了*防止*apache 显示目录列表，您需要*禁用* `indexes`. 此外，最好禁用 MultiViews，因为这将启用内容协商，这可能会产生不必要的副作用

将选项更改为；

```
 Options -Indexes FollowSymLinks 
```

然后，检查该`.htaccess`文件是否存在于您的 webroot ( `C:/Sites/Sitename`) 中，因为该文件用于启用 mod_rewrite

## 其他指针/提示

首先，确保`DocumentRoot`指向您的应用程序的正确目录；

CakePHP 的标准目录结构如下所示；

```
app
   /Config
   /Controllers
   /Views
   ......
   /webroot
lib
   /Cale
plugins 
```

`DocumentRoot`应该指向您的“app/webroot”目录，其中包含所有“公共”文件。

将虚拟主机中的路径/目录更改为该目录并重新启动 Apache。

如果您仍然收到 403 错误，请将您在浏览器中访问的 URL 更改为此；

```
http://mywebsite.com/index.php 
```

如果这*确实*有效，请检查该`.htaccess`文件是否存在于该目录中并`mod_rewrite`安装在您的 Apache 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T09:01:27.370

根据“thaJetzah”的回答（对不起，还不能评论：））

403 Forbidden 比拥有文件夹的索引更好，因为现在您可以看到 logs/sitename.com-error.log 日志，并希望它告诉您为什么它给出 403。

只是为了确保： index.php 在文件夹“C:/sites/sitename”中？

如果您不能像这样隔离错误，那么当您尝试访问该页面时，最好在此处发布 error.log 的输出，它会为您提供 403。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T06:57:01.773

如果您正在运行 Ubuntu，请选中[此项。](http://blog.code4hire.com/2011/03/setting-up-virtual-hosts-for-apache-on-ubuntu-for-local-development/)

# c# - 在运行时更新 DataGridView

> ID：16126007
> 
> 赞同：1
> 
> 时间：2013-04-20T22:48:17.573
> 
> 标签：c#, mysql, winforms, datagridview

我只是有一个简单的问题。每当我在我的 C# 接口（连接到 SQL 数据库）中插入一些东西时，我都会收到我编程的“已保存数据”的消息（并将数据保存在数据库中），但我的 DataGridView 不会更新，除非我关闭应用程序并再次运行它。

我的代码是：

```
private void frmCatalogoMunicipios_Load(object sender, EventArgs e)
    {
        cmd.Connection = conexion;
    }

    private void frmCatalogoMunicipios_Shown(object sender, EventArgs e)
    {
        CargaEstados();
        CargaDataGridView();
    }

    private void CargaEstados()
    {
        conexion.Open();
        txtNomMun.Focus();
        try
        {
            DataSet ds = new DataSet();
            MySqlDataAdapter da = new MySqlDataAdapter("SELECT cveestado, nombre FROM tbestados", conexion);
            da.Fill(ds, "FillDropDown");
            cbEstado.DisplayMember = "Nombre";
            cbEstado.ValueMember = "CveEstado";
            cbEstado.DataSource = ds.Tables["FillDropDown"];
            conexion.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }

    private void CargaDataGridView()
    {
        conexion.Open();
        try
        {
            cmd.CommandText = "SELECT m.cvemunicipio, m.nombre AS NombreA, e.nombre AS NombreB FROM tbMunicipios m INNER JOIN tbEstados e ON m.CveEstado = e.CVeEstado";
            rd = cmd.ExecuteReader();
            while (rd.Read())
            {
                this.dataGridView1.Rows.Add(rd.GetValue(0), rd.GetValue(1), rd.GetValue(2));
            }
            conexion.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }

conexion.Open();
            try
            {
                cmd.CommandText = "insert into tbmunicipios (nombre, cveestado) values ('" + txtNomMun.Text + "', '" + cbEstado.SelectedValue.ToString() + "')";
                cmd.ExecuteNonQuery();
                cmd.Clone();
                MessageBox.Show("Datos Guardados", "Mensaje");
                conexion.Close();
                Nuevo();
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
            } 
```

**编辑**

我自己找到了答案：就像@Obama 说的那样。我必须调用 CargarDataGridView()，但在此之前我用 dataGridView1.Rows.Clear() 删除了所有行；

所以，我的最终代码是：

```
 conexion.Open();
            try
            {
                cmd.CommandText = "insert into tbmunicipios (nombre, cveestado) values ('" + txtNomMun.Text + "', '" + cbEstado.SelectedValue.ToString() + "')";
                cmd.ExecuteNonQuery();
                cmd.Clone();
                MessageBox.Show("Datos Guardados", "Mensaje");
                conexion.Close();
                dataGridView1.Rows.Clear();
                CargaDataGridView();
                Nuevo();
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:58:25.120

刚打完`MessageBox.Show("Datos Guardados", "Mensaje");` 电话`CargaDataGridView();`

# opengl - 加载顶点着色器错误

> ID：16126012
> 
> 赞同：0
> 
> 时间：2013-04-20T22:49:09.640
> 
> 标签：opengl

我正在尝试学习 OpenGL 2.0，并且正在尝试在屏幕上绘制一个三角形。当我尝试加载顶点着色器时，它不会编译这是我的代码（我知道我的代码不完整，我只是定期运行它以确保我不会因错误而陷入太深）：

```
#include <iostream>
#include <stdlib.h>
#include <GL/glew.h>
#include <GLUT/glut.h>

 int init_resoureces(void){

GLint compile_ok = GL_FALSE, link_ok = GL_FALSE;
GLuint vs = glCreateShader(GL_VERTEX_SHADER);
const char *vs_source =
    "#version 120\n"
    "attribute vec2 coord2d;"
    "void main(void) {"
    "gl_position = vec4(coord2d, 0.0, 1.0);"
    "}";
glShaderSource(vs, 1, &vs_source, NULL);
glCompileShader(vs);
glGetShaderiv(vs, GL_COMPILE_STATUS, &compile_ok);
if (0 == compile_ok){
    fprintf(stderr, "Error in the vertex shader\n");
    return 0;

}

return 1;
 }

void onDisplay(){

//fill in later

}

void free_resources(){

   }

  GLfloat triangle_vertices[] = {
   0.0, 0.8,
  -0.8, -0.8,
  0.8, -0.8

};

 int main(int argc,  char * argv[])
{

glutInit(&argc, argv);

glutInitDisplayMode(GLUT_RGBA | GLUT_DOUBLE | GLUT_DEPTH);
glutInitWindowSize(640, 480);
glutCreateWindow("My First Triangle");

GLenum glew_status = glewInit();
if (glew_status != GLEW_OK){

    fprintf(stderr, "Error: %s\n", glewGetErrorString(glew_status));
    return EXIT_FAILURE;
}

if (1 == init_resoureces()) {
    glutDisplayFunc(onDisplay);
    glutMainLoop();
}

free_resources();
return EXIT_SUCCESS;

 } 
```

程序退出并说顶点着色器中有一个错误（因为它应该使用 if 语句检测编译错误）。不过，我在着色器中找不到错误。

有人知道我做错了什么吗？

如果重要的话，我正在使用 Xcode 和 OS X 10.8

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:57:35.087

OpenGL 着色器语言 GLSL 区分大小写。

确保`gl_Position`正确大写。

# pyephem - PyEphem 上升/设置星星和星座的方位角

> ID：16126014
> 
> 赞同：0
> 
> 时间：2013-04-20T22:49:12.660
> 
> 标签：pyephem

我似乎无法弄清楚如何计算恒星的方位角，比如说天狼星，当它处于 alt=0（星升/星集）时。

所以基本上最终我会有两个值。

天狼星.az@星升天狼星.az@星集

这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T05:19:49.580

`.az`一旦您的观察者对象确定了升起或落下的时刻，只需检查恒星的属性。例如：

```
import ephem

s = ephem.star('Sirius')

boston = ephem.Observer()
boston.lat = '42.37'
boston.lon = '-71.03'

boston.next_rising(s)
print s.alt, s.az
boston.next_setting(s)
print s.alt, s.az 
```

此刻运行这个脚本给了我令人鼓舞的输出：

```
0:00:00.0 112:23:25.2
0:00:00.0 247:36:34.9 
```

如您所见，上升和下降程序已经建立了零高度的时刻，留下方位角供您读取和使用！

# c - 二叉树中的迭代加深深度优先搜索

> ID：16126017
> 
> 赞同：1
> 
> 时间：2013-04-20T22:49:25.727
> 
> 标签：c, depth-first-search, iterative-deepening

我有一个正常的二叉树，我试图在使用 c 时应用迭代加深深度优先搜索：

```
struct node {
    int data;
    struct node * right;
    struct node * left;
};

typedef struct node node; 
```

我正在使用一个函数将节点插入树中，现在我需要将搜索函数实现为如下所示： `function search(root,goal,maxLevel)` 所以它使用深度优先搜索但搜索到特定的最大级别然后停止这是我的第一次尝试，它没有工作：

```
currentLevel = 0;
void search(node ** tree, int val, int depth)
{
    if(currentLevel <= depth) {
        currentLevel++;
        if((*tree)->data == val)
        {
            printf("found , current level = %i , depth = %i", currentLevel,depth);

        } else if((*tree)->left!= NULL && (*tree)->right!= NULL)
        {
            search(&(*tree)->left, val, depth);
            search(&(*tree)->right, val, depth);
        }
    }
} 
```

请帮忙，谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T22:55:20.873

你永远不会停止...

```
node *search(node ** tree, int val, int depth)
{
    if (depth <= 0)
    {
        return NULL; // not found
    }

    if((*tree)->data == val)
    {
        return *tree;
    }

    if((*tree)->left)
    {
        node * left = search(&(*tree)->left, val, depth - 1);
        if (left) return left; // found
    }
    if((*tree)->right)
    {
        node * right = search(&(*tree)->left, val, depth - 1);
        return right; // whatever is result of right
    }
    return NULL; // not found
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T22:56:52.840

全局变量不适用于此。你想拥有类似的东西

```
void search(node ** tree, int val, int remainingDepth) {
    if (remainingDepth == 0) return; 
```

然后

```
 search(&(*tree)->left, val, remainingDepth - 1);
        search(&(*tree)->right, val, remainingDepth - 1); 
```

您可能还想分别检查左右是否为空，因为每个都可以独立为空。

# ruby-on-rails - Rails：从控制器排序不起作用

> ID：16126022
> 
> 赞同：0
> 
> 时间：2013-04-20T22:50:45.717
> 
> 标签：ruby-on-rails

我想从控制器中对数组进行排序，这不起作用，但不会引发错误。

```
def my_published
  @tests=Test.where(:user_id => current_user.id, :state=>'saved')
  @tests=@tests.sort { |p1, p2| p1.rating <=> p2.rating }
  respond_to do |format|
    format.html
    format.js{@tests}
  end
end 
```

评分是一个整数。PS 要显示数组，我使用每种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:00:58.440

试试这个结构：

```
@test = Test.where(:user_id=>current_user.id, :state=>'saved').order('rating') 
```

您可以添加顺序的方向：

```
order('rating DESC') or order('rating ASC') 
```

# applescript - Applescript 延迟问题

> ID：16126027
> 
> 赞同：4
> 
> 时间：2013-04-20T22:51:04.590
> 
> 标签：applescript

我正在测试稍后将在我的 OSX 应用程序中使用的 AppleScript。在下面的单击按钮命令后，我得到了 6 秒的延迟。经过一些研究，这似乎是一个已知问题。我觉得有趣的是，如果我使用商业应用程序 QuicKeys 来执行相同的按钮单击，没有延迟，所以我认为他们找到了解决方法。有人有什么想法吗？

```
 tell application "System Events"
     tell process "Pro Tools"
         set frontmost to 1
         click button "Track List pop-up" of window 1 
         --  6 seconds delay before next command is sent
         key code 36   -- return key stroke
     end tell
 end tell 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-02T08:02:38.540

遇到了同样的问题，并通过在`ignoring application responses`块中包含导致延迟的点击来解决它。这是一个快速的总结：

旧代码（导致 6 秒延迟）

```
tell application "System Events" to tell process "SystemUIServer"
    set bt to (first menu bar item whose description is "bluetooth") of menu bar 1
    click bt
    tell (first menu item whose title is "SBH80") of menu of bt
        click
        tell menu 1
            if exists menu item "Disconnect" then
                click menu item "Disconnect"
            else
                click menu item "Connect"
            end if
        end tell
    end tell
end tell 
```

新代码（无延迟）

```
tell application "System Events" to tell process "SystemUIServer"

    set bt to (first menu bar item whose description is "bluetooth") of menu bar 1
    ignoring application responses
        click bt
    end ignoring
end tell

do shell script "killall System\\ Events"
delay 0.1
tell application "System Events" to tell process "SystemUIServer"

    tell (first menu item whose title is "SBH80") of menu of bt
        click
        tell menu 1
            if exists menu item "Disconnect" then
                click menu item "Disconnect"
            else
                click menu item "Connect"
            end if
        end tell
    end tell
end tell 
```

请在下面列出的线程中查看详细答案。

[加快 AppleScript UI 脚本编写速度？](https://stackoverflow.com/questions/21270264/speed-up-applescript-ui-scripting?answertab=active#tab-top)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-10T05:11:12.940

似乎 click 或 axpress 会导致很大的延迟。

相反 - 获取位置并使用第三方 shell 脚本进行点击。快得多。

使用 clicclik： [https ://www.bluem.net/en/mac/cliclick/](https://www.bluem.net/en/mac/cliclick/)

放入用户库/应用支持/点击

```
set clickCommandPath to ((path to application support from user domain) as string) & "Click:cliclick"
set clickCommandPosix to POSIX path of clickCommandPath

tell application "System Events"
 tell process "Pro Tools"
     set frontmost to 1
     tell button "Track List pop-up" of window 1 
     set {xPosition, yPosition} to position
        set x to xPosition
        set y to yPosition
    end tell
    do shell script quoted form of clickCommandPosix & " c:" & xPosition & "," & yPosition
     key code 36   -- return key stroke
 end tell 
```

结束告诉

# ruby - Ruby 脚本错误

> ID：16126028
> 
> 赞同：0
> 
> 时间：2013-04-20T22:51:28.720
> 
> 标签：ruby, macos, terminal

我有一个红宝石脚本

```
#!/usr/bin/ruby
require 'rubygems'
require 'mechanize'
require 'nokogiri'
require 'highline/import'
require 'stringio'

#Change based on Semester
$term = '09'
$year = '2012'
$frequency = 4  #Number of Seconds between check requests

$agent = Mechanize.new
$agent.redirect_ok = true 
$agent.user_agent = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.11 Safari/535.19"
$agent.verify_mode = OpenSSL::SSL::VERIFY_NONE

#Uber simway to colorize outputin
class String
def color(c)
    colors = { 
        :black   => 30, 
        :red     => 31, 
        :green   => 32,
        :yellow  => 33, 
        :blue    => 34, 
        :magenta => 35, 
        :cyan    => 36, 
        :white   => 37 
    }
    return "\e[#{colors[c] || c}m#{self}\e[0m"
end
end

#Logins, Gets the Courses, Returns Courses Obj with Name/URL/Tools for each
def login(username, password)

#Login to the system!
page = $agent.get("https://auth.vt.edu/login?service=https://webapps.banner.vt.edu/banner-cas-prod/authorized/banner/SelfService")
login = page.forms.first
login.set_fields({
    :username => username, 
    :password => password
})
if (login.submit().body.match(/Invalid username or password/)) then
    return false
else
    return true
end
end

#Gets Course Information
def getCourse(crn)  
begin
    courseDetails = Nokogiri::HTML( $agent.get(
        "https://banweb.banner.vt.edu/ssb/prod/HZSKVTSC.P_ProcComments?CRN=#{crn}&TERM=#{$term}&YEAR=#{$year}"
    ).body)
rescue
    return false #Failed to get course
end

#Flatten table to make it easier to work with
course = {}
dataSet = false

course[:title] = courseDetails.css('td.title').last.text.gsub(/-\ +/, '')
course[:crn] = crn

courseDetails.css('table table tr').each_with_index do |row|
    #If we have a dataSet
    case dataSet
        when :rowA
            [ :i, :days, :end, :begin, :end, :exam].each_with_index do |el, i|
                if row.css('td')[i] then
                    course[el] = row.css('td')[i].text
                end
            end
        when :rowB
            [ :instructor, :type, :status, :seats, :capacity ].each_with_index do |el, i|
                course[el] = row.css('td')[i].text
            end
    end

    dataSet = false
    #Is there a dataset?
    row.css('td').each do |cell|
        case cell.text
            when "Days"
                dataSet = :rowA
            when "Instructor"
                dataSet = :rowB
        end
    end
end

return course
end

#Registers you for the given CRN, returns true if successful, false if not
def registerCrn(crn)
#Follow Path
$agent.get("https://banweb.banner.vt.edu/ssb/prod/twbkwbis.P_GenMenu?name=bmenu.P_MainMnu")
reg = $agent.get("https://banweb.banner.vt.edu/ssb/prod/hzskstat.P_DispRegStatPage")
dropAdd = reg.link_with(:href => "/ssb/prod/bwskfreg.P_AddDropCrse?term_in=#{$year}#{$term}").click

#Fill in CRN Box and Submit
crnEntry = dropAdd.form_with(:action => '/ssb/prod/bwckcoms.P_Regs')
crnEntry.fields_with(:id => 'crn_id1').first.value = crn
crnEntry['CRN_IN'] = crn
add = crnEntry.submit(crnEntry.button_with(:value => 'Submit Changes')).body

if add =~ /#{crn}/ && !(add =~ /Registration Errors/) then
    return true
else
    return false
end
end

#Main loop that checks the availaibility of each courses and fires to registerCrn on availaibility
def checkCourses(courses)

requestCount = 0
startTime = Time.new
loop do
    system("clear")

    requestCount += 1
    nowTime = Time.new

    puts "Checking Availaibility of CRNs".color(:yellow)
    puts "--------------------------------\n"
    puts "Started:\t#{startTime.asctime}".color(:magenta)
    puts "Now:    \t#{nowTime.asctime}".color(:cyan)
    puts "Request:\t#{requestCount} (Once every #{$frequency} seconds)".color(:green)
    puts "--------------------------------\n\n"

    courses.each_with_index do |c, i|

        puts "#{c[:crn]} - #{c[:title]}".color(:blue) 
        course = getCourse(c[:crn]) 
        next unless course #If throws error

        puts "Availaibility: #{course[:seats]} / #{course[:capacity]}".color(:red)

        if (course[:seats] =~ /Full/) then
        else 
            if (registerCrn(c[:crn])) then
                puts "CRN #{c[:crn]} Registration Sucessfull"
                courses.slice!(i)

            else
                puts "Couldn't Register"
            end

        end

        print "\n"
    end

    sleep $frequency
end
end

#Add courses to be checked
def addCourses 
crns = []

loop do 
    system("clear")
    puts "Your CRNs:".color(:red)
    crns.each do |crn|
        puts "  -> #{crn[:title]} (CRN: #{crn[:crn]})".color(:magenta)
    end

    #Prompt for CRN
    alt = (crns.length > 0)  ? " (or just type 'start') " : " "
    input = ask("\nEnter a CRN to add it#{alt}".color(:green) + ":: ") { |q| q.echo = true }

    #Validate CRN to be 5 Digits 
    if (input =~ /^\d{5}$/) then

        #Display CRN Info
        c = getCourse(input.to_s)
        puts "\nCourse: #{c[:title]} - #{c[:crn]}".color(:red)
        puts "--> Time: #{c[:begin]}-#{c[:end]} on #{c[:days]}".color(:cyan)
        puts "--> Teacher: #{c[:instructor]}".color(:cyan)
        puts "--> Type: #{c[:type]} || Status: #{c[:status]}".color(:cyan)
        puts "--> Availability: #{c[:seats]} / #{c[:capacity]}\n".color(:cyan)

        #Add Class Prompt
        add = ask("Add This Class? (yes/no)".color(:yellow) + ":: ") { |q| q.echo = true }
        crns.push(c) if (add =~ /yes/)

    elsif (input == "start") then
        checkCourses(crns)
    end 
end
end

def main
system("clear")
puts "Welcome to CourseAdd by mil".color(:blue)

username = ask("PID ".color(:green) + ":: ") { |q| q.echo = true }
password = ask("Password ".color(:green) + ":: " ) { |q| q.echo = "*" }

system("clear")
if login(username, password) then
    addCourses
else
    puts "Invalid PID/Password"
    exit
end
end

main 
```

但是当我运行 ruby​​ Untitled.rb 时，它给了我这个错误。

```
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require': no such file to load -- mechanize (LoadError)
from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `require'
from /Users/user/Desktop/Untitled.rb:3 
```

这是什么意思，我该如何解决？我不确定我是否需要通过 IDE 执行此操作，或者终端是否可以工作。我是红宝石的新手，所以老实说我不知道​​问题可能是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T22:54:44.157

您需要安装机械化。在您的终端中，键入：

```
gem install mechanize 
```

完成安装后重试您的脚本。如果您缺少其他 gem，您可以使用相同的命令来安装它们。

```
gem install <gem name> 
```

# android - BroadcastReceiver：以编程方式设置 android:process

> ID：16126030
> 
> 赞同：5
> 
> 时间：2013-04-20T22:51:35.680
> 
> 标签：android, broadcastreceiver, storage

我希望我的应用程序检测外部存储状态何时发生变化。起初在我的 AndroidManifest 中定义了一个 BroadcastReceiver。在这里我可以像这样设置`android:process`和`android:exported`属性：

```
 <receiver android:name=".StorageStateReceiver" android:process=":storage_state" android:exported="false">
        <intent-filter>
            <action android:name="android.intent.action.MEDIA_UNMOUNTED" />
            <action android:name="android.intent.action.MEDIA_MOUNTED" />
            <action android:name="android.intent.action.MEDIA_EJECT" />
            <action android:name="android.intent.action.MEDIA_BAD_REMOVAL" />
            <data android:scheme="file" />
        </intent-filter>
    </receiver> 
```

然后我意识到我只在一个 Activity 中使用这个接收器，所以不需要在应用程序启动时实例化它，而是可以在代码中以编程方式定义它。这就是我想出的：

```
BroadcastReceiver StorageStateReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            // Do what needs to be done
        }
    };
IntentFilter filter = new IntentFilter();
filter.addAction(Intent.ACTION_MEDIA_UNMOUNTED);
filter.addAction(Intent.ACTION_MEDIA_MOUNTED);
filter.addAction(Intent.ACTION_MEDIA_EJECT);
filter.addAction(Intent.ACTION_MEDIA_BAD_REMOVAL);
filter.addDataScheme("file");
getApplicationContext().registerReceiver(StorageStateReceiver, filter); 
```

我将此代码放在我活动的 onCreate() 方法中。

但我找不到`process`从代码中设置的方法。我已阅读有关 BroadcastReceiver 和 Context 类的文档。BroadcastReceiver 似乎没有托管任何让您定义进程名称的方法。另一方面， registerReceiver() 可以接受两个额外的参数：`String broadcastPermission`, `Handler scheduler`. Handler 听起来很有希望，但我找不到可以接受字符串形式的进程名称的 Handler 构造函数。我觉得我的想法已经用完了。有没有办法以编程方式设置进程名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:14:07.430

> 然后我意识到我只在一个 Activity 中使用这个接收器，所以不需要在应用程序启动时实例化它，而是可以在代码中以编程方式定义它。

清单注册`BroadcastReceiver`的不是“在应用程序启动时实例化”。只有在发送匹配的广播时才会实例化它。

> 但是我找不到从代码中设置流程的方法。

那是因为这是不可能的。此外，您不需要它，它会通过浪费 RAM、CPU 和电池来伤害用户。您也不应该在清单条目中拥有该`android:process`属性，除非您**完全准确地知道*为什么***需要另一个进程。绝大多数 Android 应用程序都没有。

# windows-phone-7 - 我怎样才能让listitem 100% 宽度？

> ID：16126031
> 
> 赞同：1
> 
> 时间：2013-04-20T22:51:35.657
> 
> 标签：windows-phone-7

我有一些想要放入列表的用户控件：

```
 <ListBox HorizontalContentAlignment="Stretch">
            <StackPanel x:Name="audioList" />
        </ListBox> 
```

但由于某种原因，我不允许将宽度设置为 100%。它看起来不太好，我想要 100% 的宽度，但不是专门将其设置为某个像素，因为这会破坏其他设备的屏幕分辨率（？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T06:48:58.193

列表框中的每个项目都托管在一个容器中。您需要按如下方式拉伸容器：

```
<ListBox.ItemContainerStyle> 
    <Style TargetType="ListBoxItem"> 
        <Setter Property="HorizontalContentAlignment" Value="Stretch"></Setter> 
    </Style> 
</ListBox.ItemContainerStyle> 
```

# php - PHP导航调用相同

> ID：16126033
> 
> 赞同：0
> 
> 时间：2013-04-20T22:51:52.047
> 
> 标签：php, magento

我正在尝试集成boostrap，但我正面临着我不太了解的事情...... PHP。基本上我需要的是添加 class="nav" 到 ul 和 class="dropdown-menu" 到子菜单 ul 但它重复两次导航类。这是代码。非常感谢你的帮忙！

```
<div class="navbar navbar-inverse">
<div class="navbar-inner">
    <div class="navbar">
        <!-- menu start -->
        <ul class="nav" id="nav">
            <li  class="level0"> <a class="dropdown-toggle" href="#"   class=""><span>Dashboard</span></a></li>
            <li onmouseover="Element.addClassName(this,'over')" onmouseout="Element.removeClassName(this,'over')" class=" active  parent dropdown level0"> <a class="dropdown-toggle" href="#"  onclick="return false" class="active"><span>Sales</span></a>
                <ul class="nav">
                    <li  class="level1"> <a class="dropdown-toggle" href="#" class=""><span>Orders</span></a></li>
                    <li  class="level1"> <a class="dropdown-toggle" href="#" class=""><span>Invoices</span></a></li>
                    <li  class="level1"> <a class="dropdown-toggle" href="#" class=""><span>Shipments</span></a></li>
                    <li  class="level1"> <a class="dropdown-toggle" href="#" class=""><span>Credit Memos</span></a></li>
                    <li  class="level1"> <a class="dropdown-toggle" href="#" class=""><span>Transactions</span></a></li>
                    <li  class="level1"> <a class="dropdown-toggle" href="#" class=""><span>Recurring Profiles (beta)</span></a></li>
                    <li  class="level1"> <a class="dropdown-toggle" href="#" class=""><span>Billing Agreements</span></a></li>
                    <li  class="level1"> <a class="dropdown-toggle" href="#" class=""><span>Terms and conditions</span></a></li>
                    <li onmouseover="Element.addClassName(this,'over')" onmouseout="Element.removeClassName(this,'over')" class="  parent dropdown last level1"> <a class="dropdown-toggle" href="#"  onclick="return false" class=""><span>Tax</span></a>
                        <ul class="nav"> <!--Need to add .dropdown-menu here-->
                            <li  class="level2"> <a class="dropdown-toggle" href="#" class=""><span>Manage Tax Rules</span></a></li>
                            <li  class="level2"> <a class="dropdown-toggle" href="#" class=""><span>Manage Tax Zones &amp; Rates</span></a></li>
                            <li  class="level2"> <a class="dropdown-toggle" href="#" class=""><span>Import / Export Tax Rates</span></a></li>
                            <li  class="level2"> <a class="dropdown-toggle" href="#" class=""><span>Customer Tax Classes</span></a></li>
                            <li  class="last level2"> <a class="dropdown-toggle" href="#" class=""><span>Product Tax Classes</span></a></li>
                        </ul>
                    </li>
                </ul>
            </li>
<!--THE PHP-->
            <?php 
            public function getMenuLevel($menu, $level = 0)
            {
                $html = '<ul class="nav" ' . (!$level ? 'id="nav"' : '') . '>' . PHP_EOL;
                foreach ($menu as $item) {
                    $html .= '<li ' . (!empty($item['children']) ? 'onmouseover="Element.addClassName(this,\'over\')" '
                        . 'onmouseout="Element.removeClassName(this,\'over\')"' : '') . ' class="'
                        . (!$level && !empty($item['active']) ? ' active' : '') . ' '
                        . (!empty($item['children']) ? ' parent dropdown' : '')
                        . (!empty($level) && !empty($item['last']) ? ' last' : '')
                        . ' level' . $level . '"> <a class="dropdown-toggle" href="' . $item['url'] . '" '
                        . (!empty($item['title']) ? 'title="' . $item['title'] . '"' : '') . ' '
                        . (!empty($item['click']) ? 'onclick="' . $item['click'] . '"' : '') . ' class="'
                        . ($level === 0 && !empty($item['active']) ? 'active' : '') . '"><span>'
                        . $this->escapeHtml($item['label']) . '</span></a>' . PHP_EOL;

                    if (!empty($item['children'])) {
                        $html .= $this->getMenuLevel($item['children'], $level + 1);
                    }
                    $html .= '</li>' . PHP_EOL;
                }
                $html .= '</ul>' . PHP_EOL;

                return $html;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:36:25.607

我不能很好地测试它，因为我没有空间来放置所有这些字段和其他一些部分，但我看到你有一个递归调用的函数。这将导致第二个 'id="nav"'。

```
public function getMenuLevel($menu, $level = 0)
{
/* declared id="nav" here */
    $html = '<ul class="nav" ' . (!$level ? 'id="nav"' : '') . '>' . PHP_EOL;
    foreach ($menu as $item) {
        $html .= '<li ' . (!empty($item['children']) ? 'onmouseover="Element.addClassName(this,\'over\')" '
            . 'onmouseout="Element.removeClassName(this,\'over\')"' : '') . ' class="'
            . (!$level && !empty($item['active']) ? ' active' : '') . ' '
            . (!empty($item['children']) ? ' parent dropdown' : '')
            . (!empty($level) && !empty($item['last']) ? ' last' : '')
            . ' level' . $level . '"> <a class="dropdown-toggle" href="' . $item['url'] . '" '
            . (!empty($item['title']) ? 'title="' . $item['title'] . '"' : '') . ' '
            . (!empty($item['click']) ? 'onclick="' . $item['click'] . '"' : '') . ' class="'
            . ($level === 0 && !empty($item['active']) ? 'active' : '') . '"><span>'
            . $this->escapeHtml($item['label']) . '</span></a>' . PHP_EOL;

        if (!empty($item['children'])) {
/* this line calls the function again which will cause id="nav" to happen again. */
           $html .= $this->getMenuLevel($item['children'], $level + 1);
        }
        $html .= '</li>' . PHP_EOL;
    }
    $html .= '</ul>' . PHP_EOL;

    return $html;
} 
```

修复它的一个猜测可能是更好地检查 $level 是什么，因为我认为您的 !$level 可能给出了错误的答案。

```
public function getMenuLevel($menu, $level = 0)
{

    $idnav = '';
    if ($level === 0) 
        $idnav = 'id="nav"';

    $html = '<ul class="nav" ' . $idnav . '>' . PHP_EOL;
    foreach ($menu as $item) {
        $html .= '<li ' . (!empty($item['children']) ? 'onmouseover="Element.addClassName(this,\'over\')" '
..... 
```

另一个想法可能是嵌套循环。也许像下面这样：

```
<?php
    public function getMenuLevel($menu, $level = 0)
    {
        $html = '<ul class="nav" ' . (!$level ? 'id="nav"' : '') . '>' . PHP_EOL;
 /*notice*/
        while (!empty($item['children'])) {
            foreach ($menu as $item) {
                $html .= '<li ' . (!empty($item['children']) ? 'onmouseover="Element.addClassName(this,\'over\')" '
                    . 'onmouseout="Element.removeClassName(this,\'over\')"' : '') . ' class="'
                    . (!$level && !empty($item['active']) ? ' active' : '') . ' '
                    . (!empty($item['children']) ? ' parent dropdown' : '')
                    . (!empty($level) && !empty($item['last']) ? ' last' : '')
                    . ' level' . $level . '"> <a class="dropdown-toggle" href="' . $item['url'] . '" '
                    . (!empty($item['title']) ? 'title="' . $item['title'] . '"' : '') . ' '
                    . (!empty($item['click']) ? 'onclick="' . $item['click'] . '"' : '') . ' class="'
                    . ($level === 0 && !empty($item['active']) ? 'active' : '') . '"><span>'
                    . $this->escapeHtml($item['label']) . '</span></a>' . PHP_EOL;

              }
  /* here is the tricky part */
              $html .= '</li>' . PHP_EOL;
              $html .= $this->getMenuLevel($item['children'], $level + 1);
        }
        $html .= '</ul>' . PHP_EOL;

        return $html;
    }
?> 
```

您可以通过反复试验来计算出棘手部分的详细信息，以使结果正确地结束列表。

# java - java hibernate标准预测rowCount只有1列

> ID：16126048
> 
> 赞同：0
> 
> 时间：2013-04-20T22:54:00.133
> 
> 标签：java, hibernate, criteria, projection

我有一个休眠查询要检查学生的别名（用户名）是唯一的，这工作得很好这是我的代码。

```
public Boolean isAliasUniqueInStudent(String alias) 
{        
    Session session = getHibernateTemplate().getSessionFactory().openSession();        
    ProjectionList p = Projections.projectionList().add(Projections.rowCount());
    org.hibernate.criterion.Conjunction exist=(Conjunction)Restrictions.conjunction().add(Restrictions.isNotNull("username")).add(Restrictions.eq("username",alias));
    Criteria criteria = session().createCriteria(Student.class).setProjection(p).add(exist);               
    Long result=(Long)criteria.uniqueResult();
    closeSession(session);
    return result.intValue()==0;
} 
```

这是创建这样的选择。

```
select count(*) as y0_ from student this_ where (this_.username is not null and this_.username=?) 
```

这很好，但我想知道是否可以尝试选择

```
select count(username) as y0_ from student this_ where (this_.username is not null and this_.username=?) 
```

这是比我更好的方法吗？

存在更好的吗？

我知道我正在检查属性不为空..但这是否可以用休眠来完成。

```
select count(name) 
```

多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T09:04:35.157

你试过这个吗？

```
Projections.projectionList().add(Projections.count("username"); 
```

# asp.net-mvc - 如何在 MVC 视图中传递模型

> ID：16126049
> 
> 赞同：12
> 
> 时间：2013-04-20T22:54:18.607
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我想将模型从表单传递到控制器并在同一视图中显示其他模型。我怎样才能做到这一点？我的主要问题是：如何发送到 testAcc actionresult、模型 CommentModel 和显示文本`ViewData["Success"]`？

这是我的代码：

```
 @model XYZ.Models._ideaDetailsWrapper
    @using XYZ.Tools   
<article>
    <h2>@Model.idea.Tilte</h2>

<table><tr><td>
<p>
    Author: <b>@UserTools.getUser(Model.idea.AuthorID).UserName</b><br />
    Add date: @Model.idea.AddDate<br />
    Category: @IdeasTools.getCategoryName(Model.idea.CategoryID)<br />
</p></td>
</tr></table>

<p><b>Content:</b><br />
    @Model.idea.Content</p>

<br /><br />

// HERE - ADD comment

    @using (Html.BeginForm("testAcc", "Ideas", FormMethod.Post))
    { 
            <h4>Add comment:</h4>

            @Html.LabelFor(m => m.addComment.Content)
            @Html.EditorFor(m => m.addComment.Content)<br />
        <input type="submit" value="SendEmails" />
    }

@ViewData["Success"] 
```

包装：

```
public class _ideaDetailsWrapper 
{
    public Ideas idea { get; set; }
    public IEnumerable<IdeasComment> commentList { get; set; }
    public CommentModel addComment { get; set; }
} 
```

动作方法：

```
 [HttpPost]
    [Authorize]
    public ActionResult testAcc(CommentModel model)
    {

        CommentModel abs = model;

        ViewData["Success"] = "Working!";

        // ADD TO DATABASE, but model is null..
        return RedirectToAction("Details", "Ideas");
    } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-20T23:44:59.707

一种方法是使用**Partial View**。

**详细信息.cshtml**

```
@model XYZ.Models._ideaDetailsWrapper
...
// HERE - ADD Comment
<div id="comment-form">
@Html.Partial("_CommentForm", Model.addComment)
</div>

@Model.message
// add validation javascript to this view 
```

**_CommentForm.cshtml**（部分视图）

```
@model XYX.Models.CommentModel
@{
    Layout = null;
}

@using (Html.BeginForm("testAcc", "Ideas", FormMethod.Post))
{ 
      @Html.ValidationSummary(true)
        <h4>Add comment:</h4>

        @Html.LabelFor(m => m.Content)
        @Html.EditorFor(m => m.Content)
        @Html.ValidationMessageFor(m => m.Content)<br />
    <input type="submit" value="SendEmails" />
} 
```

部分视图是强类型的，将提交`CommentModel`

行动方法：

```
[HttpPost]
[Authorize]
public ActionResult testAcc(CommentModel model)
{
    string abs = model.Content;

    TempData["Message"] = "Working!";

    // ADD TO DATABASE
    return RedirectToAction("Details", "Ideas", new { id = model.Idea.Id });
}

[HttpGet]
[Autorize]
public ActionResult Details(int id)
{
    var ideaModel = dbStore.GetIdea(id);  // however you do this

    var model = new _ideaDetailsWrapper {
        idea = ideaModel,
        addComment = new CommentModel(),
        message = TempData["Message"]
        ...
    };
    return View(model);
} 
```

用于`TempData`通过重定向传递消息。当您在使用页面之前直接加载页面时，您将检查`TempData["Message"]`该操作是否存在。`Details`

**编辑：**对于验证，只需将验证 javascript 添加到详细信息视图和`ValidationSummary`部分视图。

**编辑 2：**此方法因验证和错误处理而失效。为此，它需要 AJAX 替换表单 div 而无需重新加载整个页面。

您需要拦截正常的表单提交并使用AJAX自己处理

```
$("form").on("submit", function(event) {
    event.preventDefault();
    $.ajax({
        url: "/Ideas/testAcc",
        type: "POST",
        data: $("form").serialize()
    })
    .done(function(partialViewHtml) {
        $("#comment-form").html(partialViewHtml);
    });
}); 
```

你的动作变成

```
[HttpPost]
public ActioNResult testAcc(CommentModel model)
{
    if (ModelState.IsValid)
    {
        ...
        return RedirectToAction("Details", "Ideas", new { id = model.Idea.Id });
    }
    return PartialView("_CommentForm", model);
} 
```

# node.js - mongodb 2.4 全文搜索

> ID：16126054
> 
> 赞同：1
> 
> 时间：2013-04-20T22:55:15.597
> 
> 标签：node.js, mongodb, full-text-search, node-mongodb-native

在 mongo shell 我可以做到这一点

```
db.collection.runCommand( 'text', { search: 'query' } ) 
```

我怎样才能用 mongodb-native 和 node.js 得到这个？

我试图做这样的事情

```
db.executeDbCommand( 'text', { search:'query' }, function(e, o) {
    if (e) {
        callback(e)
    }
    else callback(o)
}); 
```

它失败了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T08:51:56.657

解决方案很简单

```
exports.search = function(query, callback) {
db.command({ text: 'collectionName', search: query }, function(e, o) {
    if (e) {
        console.log(e, 'error')
    }
    else callback(o)
});
} 
```

在回调中

```
DB.search(query, function(o){
    if (o) {
        console.log(o.results);
    }
}); 
```

# iphone - 你会为文本框推荐什么方法，文本保持在边界内并减小字体大小以保持在边界内

> ID：16126057
> 
> 赞同：0
> 
> 时间：2013-04-20T22:55:21.030
> 
> 标签：iphone, ios, objective-c, xcode

我需要一个文本框，该文本框需要允许用户在文本框中输入文本并且文本保持在文本框边界内。如果用户输入的文本过多，它将减小字体以使其适合文本框界限。我不知道哪个对象能够满足这个要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T07:14:39.107

我假设您正在使用 UITextField （正如您所说的那样，它是一个文本框。

所以你可以使用以下

```
[yourTextField setMinimumFontSize:7.0];
[yourTextField setAdjustsFontSizeToFitWidth:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T23:00:21.860

有趣的是，我*刚刚*实现了这个。我是这样做的：

```
- (void)fitTextView {
    CGFloat height = [[UIScreen mainScreen] bounds].size.height - 16;

    _fontSize = 96;
    _text.font = [UIFont fontWithName:_fontName size:_fontSize];

    while (height < _text.contentSize.height) {
        if (_fontSize < 20) {
            break;
        }

        _fontSize -= 0.5;
        _text.font = [UIFont fontWithName:_fontName size:_fontSize];
    }

    while (height > _text.contentSize.height) {
        if (_fontSize > 96) {
            break;
        }

        _fontSize += 0.5;
        _text.font = [UIFont fontWithName:_fontName size:_fontSize];
    }
}

- (void)textViewDidChange:(UITextView *)textView {
    [self fitTextView];
} 
```

不过，我的代码有一点问题，如果你输入得足够快，输入的文本会反弹一点。希望得到一些关于如何解决这个问题的反馈。

希望这可以帮助！

[编辑] 更多代码。

```
_fontSize = 96; 
_fontName = @"Helvetica";

_text = [[UITextView alloc] initWithFrame:self.view.bounds];
_text.autocapitalizationType = UITextAutocapitalizationTypeNone;
_text.autocorrectionType = UITextAutocorrectionTypeNo;
_text.delegate = self;
_text.text = @"";
_text.font = [UIFont fontWithName:_fontName size:_fontSize];
_text.backgroundColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:1];
_text.textColor = [UIColor colorWithRed:1 green:1 blue:1 alpha:1];
[self.view addSubview:_text]; 
```

并且记得声明你的类实现了`UITextViewDelegate`协议。

# python - 从 Applescript 运行 Python 脚本时出错

> ID：16126058
> 
> 赞同：1
> 
> 时间：2013-04-20T22:55:22.783
> 
> 标签：python, shell, applescript

为什么这不起作用？

苹果脚本：

```
set script_path to "$HOME/Desktop"
do shell script "python & script_path & hello_world.py" 
```

Python脚本：

```
#!/usr/bin/env python
print "Content-Type: text/html"
print
print """\
<html>
 <head>
  <title>Python - Hello World</title>
 </head>
 <body>
  Hello World
 </body>
</html> 
```

"""

错误：

> 告诉当前应用程序执行 shell script "python & script_path & hello_world.py" --> error "sh: script_path: command not found sh: hello_world.py: command not found" number 127 结果: error "sh: script_path: command not found sh：hello_world.py：找不到命令“第 127 号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T00:10:31.647

和号连接字符串文字和变量替换。像这样：

```
set script_path to "$HOME/Desktop"
do shell script "python " & script_path & "/hello_world.py" 
```

您还需要在 hello_world.py 之前或 $HOME/Desktop 末尾添加一个斜杠。上面的示例在 hello_world.py 之前显示了它。

# api - 使用特定库集使用特定参数（即情绪、流派、节奏）创建播放列表的应用创意

> ID：16126062
> 
> 赞同：1
> 
> 时间：2013-04-20T22:55:51.317
> 
> 标签：api, metadata, spotify

我正在为 Spotify 创建一个应用程序，我想知道一旦我们可以访问 Spotify 的 API，我们能够访问哪些元数据。我正在尝试创建的应用程序将是使用我组织的 Spotify 库中的音乐的播放列表创建者，并且面向特定社区。我们的音乐库包含具有共同主题的多种音乐流派，我想为用户提供一种方法来创建带有设置参数（即流派、情绪、活动、节奏等）的播放列表，但我需要一种方法来本质上“标记”我们图书馆中的歌曲。使用 Spotify 的 API 是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T15:02:00.830

如果我理解正确，您需要自己提供标记。你如何做到这一点取决于你。例如，您可能有一个正在运行的服务，它为给定的轨道 URI 返回一个“心情”。可以使用 Playlist 类创建临时播放列表。

查看[http://developer.spotify.com/technologies/apps/docs/preview/api/](http://developer.spotify.com/technologies/apps/docs/preview/api/)以获取最新的 API 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-06T14:58:56.973

我正在寻找同样的东西：一个为我们提供流派、情绪等的 API。这是我为风格找到的[http://developer.echonest.com/docs/v4/artist.html#list-terms](http://developer.echonest.com/docs/v4/artist.html#list-terms)和心情和[http://developer.echonest.com/raw_tutorials/faqs/faq_04.html](http://developer.echonest.com/raw_tutorials/faqs/faq_04.html)的节奏

顺便说一句，Echo Nest 被 Spotify 收购了。

# c# - 使用 Web 浏览器控件按类名获取 div 的内容？

> ID：16126068
> 
> 赞同：5
> 
> 时间：2013-04-20T22:57:12.467
> 
> 标签：c#, .net

我有一个带有`webBrowser1`控件的表单，用于加载在其 HTML 部分中包含以下行的页面：

```
 ...
 <div class="cls">
 Hello World !
 </div> 
```

我需要得到`innerText`元素的`div`。我尝试了以下方法：

```
 string result = "";
 foreach (HtmlElement el in webBrowser1.Document.GetElementsByTagName("div"))
                if (el.GetAttribute("class") == "cls")
                {
                    result = el.InnerText;
                } 
```

但是上面的代码似乎不起作用，根据[解决方案 1 在另一个网站上的类似问题](http://www.codeproject.com/Questions/271651/read-data-from-DIV-tag-via-webBrowser-Csharp)，据说

> 引起我注意的第一件事是：`<div class="thin">`没有定义`div`元素的名称，它定义了它的 CSS 样式类。相反，使用属性名称（或两者），例如：`<div class="thin" name="thin">`.

如果只有一个属性`innerText`，我怎样才能得到`div`元素的？`class`

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-20T23:39:07.480

您应该使用`ClassName`而不是`class`：

```
 if (el.GetAttribute("className") == "cls") { … } 
```

有关详细信息，请参阅[HtmlElement.GetAttribute("class") 不运行](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/66677b14-f34f-4d4e-9a03-326839bb536e/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T23:10:17.017

添加`runat="server"`和`ID`属性`div`如下：

```
 …
 <div class="cls" ID="hello_div" runat="server">
 Hello World !
 </div> 
```

添加`runat="server"`属性后，您可以`ID`像对象一样在后面的代码上调用它：

```
string result = hello_div.InnerText; // or InnerHtml 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-24T14:00:34.053

```
 HtmlDocument doc = webBrowser1.Document;
        HtmlElementCollection divs = doc.GetElementsByTagName("div");

        foreach (HtmlElement div in divs)
        {
            try
            {
                var info = div.DomElement;
                PropertyInfo[] pi = info.GetType().GetProperties();

                string strClass = pi[0].GetValue(div.DomElement).ToString();

                if (strClass == "cls")
                {
                        //DoStuff
                }
            }
            catch
            {

            }
        } 
```

# html - 从 DOM 中删除浮动（jquery 可拖动）DIV 会导致其兄弟（DIV）向上爬

> ID：16126074
> 
> 赞同：0
> 
> 时间：2013-04-20T22:57:42.753
> 
> 标签：html, move

假设我在一个固定的父 div 中有两个浮动 div。
使用可拖动的 JQuery使 div 浮动。当我从 DOM 中删除第一个 DIV 时，它下面的第二个 DIV
似乎由于某种原因爬上了页面。

我创建了一个jsfiddle。[http://jsfiddle.net/k6yxu/1/](http://jsfiddle.net/k6yxu/1/)

在此示例中，当您关闭框 1 时，框 2 向上移动。这发生在 Chrome、Firefox 和 IE 9 中。

我想将所有这些框 (DIV) 保留在同一个地方，即使它的任何同级已从 DOM 中删除。

```
<style>
html, body, #container {
    height: 100%;
}
body {
    font-style: normal;
    font-variant: normal;
    font-weight: normal;
    font-size: 11px;
    line-height: 13px;
    font-family:"Lucida Sans Unicode", "Lucida Grande", sans-serif;
}
#container {
    position: relative;
}
#header, #footer {
    height: 40px;
    line-height: 40px;
    background: #999;
    width: 100%;
    position: absolute;
}
#header {
    top: 0;
}
#footer {
    bottom: 0;
}
/* This is the parent of inner-content div */
 #content {
    position: absolute;
    top: 40px;
    bottom: 40px;
    width: 100%;
    overflow: visible;
    border-top: 1px solid #888;
    border-bottom: 1px solid #888;
}
/* This is the direct parent of all boxes */
 #inner-content {
    overflow: inherit;
    height: 100%;
}
.box {
    border: 4px solid #999;
    height: 120px;
    width: 120px;
}
.boxHeader {
    height: 32px;
    vertical-align: middle;
}
.boxCloseButton {
    padding-top: 3px;
    padding-right: 6px;
    padding-bottom: 3px;
    padding-left: 6px;
    margin-right: 4px;
    margin-top: 6px;
    float: right;
    font-size: 13px;
    line-height: 13px;
    cursor: pointer
}
</style>
<div id="container">
    <div id="header">
        <div id="headerContent"></div>
    </div>
    <div id="content">
        <div id="inner-content">
            <div id="id0" class="box">
                <div class="boxHeader">
                    <div class="boxHeaderContent">1 <span><a class="boxCloseButton">x</a></span>

                    </div>
                </div>
            </div>
            <div id="id1" class="box">
                <div class="boxHeader">
                    <div class="boxHeaderContent">2 <span><a class="boxCloseButton">x</a></span>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="footer"></div>
</div>
<script>
$(function() {
    $(".box").each(function () {
        $(this).draggable({
            containment: "#inner-content",
            scroll: true
        });
    });

    $(document).on("click", "a.boxCloseButton", function () {
        // Close button is clicked
        // get the parent div box
        var box = $(this).parents('div.box');
        // remove box from DOM. 
        // BUG: Removing a node from the DOM causes all its younger siblings to be re-positioned.
        // The re-positioning is random and causes un-expected behaviour.
        box.remove();
    });
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T23:03:14.570

> 当我从 DOM 中删除第一个 DIV 时，它下面的第二个 DIV 似乎由于某种原因爬上了页面。

这不就是float的定义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T23:11:59.650

尝试使框绝对定位：http: [//jsfiddle.net/k6yxu/2/](http://jsfiddle.net/k6yxu/2/)

```
.box {
    position: absolute;
    border: 4px solid #999;
    height: 120px;
    width: 120px;
}
#id1 {
    top:124px;
} 
```

如果你想避免`top`定位，你需要将每个盒子包装在一个`position: relative`容器中，并且只移除`.box`，离开容器。该容器还需要设置适当的高度。

**编辑：**这是上述调整的小提琴：http: [//jsfiddle.net/k6yxu/3/](http://jsfiddle.net/k6yxu/3/)

# sql - What is the opposite of SQL Use DatabaseName to NOT USE database?

> ID：16126090
> 
> 赞同：3
> 
> 时间：2013-04-20T23:00:34.060
> 
> 标签：sql, sql-server, sql-server-2008

When I am working on my database I connect with USE but what if I want to stop using the database, what is the opposite of USE?

I am using MS SQL Server Mgmt Studio in a Query window to call the USE.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T23:07:25.990

I think your only option is to use another database, or end the script - there is no End Use as it were.

# c# - Ninject 中的绑定 - 提供的泛型参数不等于泛型类型定义的数量？

> ID：16126094
> 
> 赞同：0
> 
> 时间：2013-04-20T23:01:00.293
> 
> 标签：c#, .net, generics, ninject

尝试使用 ninject 将我的接口绑定到一个具体的类，但我必须遗漏一些东西并且无法让它工作。

```
System.ArgumentException was unhandled by user code
  HResult=-2147024809
  Message=The number of generic arguments provided doesn't equal the arity of the generic type definition.
Parameter name: instantiation
  Source=mscorlib
  ParamName=instantiation
  StackTrace:
       at System.RuntimeType.MakeGenericType(Type[] instantiation)
       at Ninject.Activation.Providers.StandardProvider.GetImplementationType(Type service) in StandardProvider.cs:line 126
       at Ninject.Activation.Providers.StandardProvider.Create(IContext context) in StandardProvider.cs:line 77
       at Ninject.Activation.Context.Resolve() inContext.cs:line 157
       at Ninject.KernelBase.<>c__DisplayClass10.<Resolve>b__c(IBinding binding) in KernelBase.cs:line 386
       at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
       at System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 source)
       at Ninject.Planning.Targets.Target`1.GetValue(Type service, IContext parent) in Target.cs:line 197
       at Ninject.Planning.Targets.Target`1.ResolveWithin(IContext parent) inTarget.cs:line 165
       at Ninject.Activation.Providers.StandardProvider.GetValue(IContext context, ITarget target) in StandardProvider.cs:line 114
       at Ninject.Activation.Providers.StandardProvider.<>c__DisplayClass4.<Create>b__2(ITarget target) in StandardProvider.cs:line 96
       at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()
       at System.Linq.Buffer`1..ctor(IEnumerable`1 source)
       at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)
       at Ninject.Activation.Providers.StandardProvider.Create(IContext context) in StandardProvider.cs:line 96
       at Ninject.Activation.Context.Resolve() inContext.cs:line 157
       at Ninject.KernelBase.<>c__DisplayClass10.<Resolve>b__c(IBinding binding) in KernelBase.cs:line 386
       at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
       at System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 source)
       at Ninject.Planning.Targets.Target`1.GetValue(Type service, IContext parent) inTarget.cs:line 197
       at Ninject.Planning.Targets.Target`1.ResolveWithin(IContext parent) inTarget.cs:line 165
       at Ninject.Activation.Providers.StandardProvider.GetValue(IContext context, ITarget target) in StandardProvider.cs:line 114
       at Ninject.Activation.Providers.StandardProvider.<>c__DisplayClass4.<Create>b__2(ITarget target) in StandardProvider.cs:line 96
       at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()
       at System.Linq.Buffer`1..ctor(IEnumerable`1 source)
       at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)
       at Ninject.Activation.Providers.StandardProvider.Create(IContext context) in StandardProvider.cs:line 96
       at Ninject.Activation.Context.Resolve() inContext.cs:line 157
       at Ninject.KernelBase.<>c__DisplayClass10.<Resolve>b__c(IBinding binding) in KernelBase.cs:line 386
       at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
       at System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 source)
       at PriceCheck.Api.Models.Ninject.NinjectScope.GetService(Type serviceType) in NinjectScope.cs:line 24
       at System.Web.Http.Dispatcher.DefaultHttpControllerActivator.GetInstanceOrActivator(HttpRequestMessage request, Type controllerType, Func`1& activator)
       at System.Web.Http.Dispatcher.DefaultHttpControllerActivator.Create(HttpRequestMessage request, HttpControllerDescriptor controllerDescriptor, Type controllerType)
  InnerException: 
```

在这里崩溃

```
 public object GetService(Type serviceType)
        {
            IRequest request = resolutionRoot.CreateRequest(serviceType, null, new Parameter[0], true, true);
            return resolutionRoot.Resolve(request).SingleOrDefault();
        }

  public interface IResponseResult
    {
       void AddError(string key, string errorMessage);
       bool IsValid();
       Dictionary<string, string> Errors { get; }

       ResponseBase Status { get; set; }
    }

 public class ResponseResult<T> : IResponseResult
    {
        public ResponseResult()
        {
            Errors = new Dictionary<string, string>();
            Status = new ResponseBase();
        }

        public void AddError(string key, string errorMessage)
        {
            if (!Errors.ContainsKey(key))
            {
                Errors.Add(key, errorMessage);
            }        
        }

        public bool IsValid()
        {
            if (Errors.Count > 0)
            {
                return false;
            }

            return true;
        }

        public Dictionary<string, string> Errors { get; private set; }
        public T Response { get; set; }

        public ResponseBase  Status { get; set; }
    }

Bind(typeof(IResponseResult)).To(typeof(ResponseResult<>)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:53:38.793

您并没有真正为服务提供“构造的通用类型”。
[泛型 - 开放和封闭构造类型](https://stackoverflow.com/questions/1735035/c-sharp-generics-open-and-closed-constructed-types/1735060#1735060)
[.NET 中的“开放泛型类型”到底是什么？](https://stackoverflow.com/questions/2173107/what-exactly-is-an-open-generic-type-in-net/2173115#2173115)

Ninject inside 实际上试图制造一个 - 但期望`generic arguments`你没有。

```
Type.MakeGenericType(service.GetGenericArguments()) 
```

我不确定您的想法是什么 - 以及如何解决此类问题。

您可以尝试`ToProvider`或设置提供程序 - 但您仍然缺少一些东西。

# php - (Ajax + PHP) 我的谷歌地图消失了

> ID：16126096
> 
> 赞同：1
> 
> 时间：2013-04-20T23:01:03.877
> 
> 标签：php, javascript, ajax, google-maps

我在索引页上显示 Google 地图时遇到问题。这是我目前正在尝试的方式：

1.  使用**GoogleMapApiV3** PHP 类 ( [http://pastebin.com/LCb3mP7f](http://pastebin.com/LCb3mP7f) )
2.  使用以下方法在 PHP 文件 (loadMap.php) 中生成我的地图：

`$gmap->generate();` `echo $gmap->getGoogleMap();`

3 - 使用 AJAX 获取地图的脚本（基本上是什么`echo`）然后使用`eval()`.

这是我的**refresh.js**页面的内容：

```
$(document).ready(function() {
    // show map and news
    refreshGUI();
});

// Update every 5 seconds
setInterval('refreshData()', 5000);
setInterval('refreshGUI()', 5000);

function refreshData() {
    $.post('index.php?js=refresh');
}
;

// Refreshes the page elements
function refreshGUI() {
    refreshNews();
    refreshMap();
} 

function refreshNews() {
    $.post('index.php?js=lastNews&lim=3', function(data) {
        var s = '';
        data = data.childNodes.item(0);
        for (var i = 0; i <= data.childNodes.length; i++) {
            data2 = data.childNodes.item(i);
            s += ('<div>' + data2.childNodes.item(1).textContent + '</div>');
            $('#newspane #news').html(s);
        }
        $('#newspane #news').html($('#newspane #news').html() + s);
    });
}

function refreshMap() {
    var xmlhttp;

    if (window.XMLHttpRequest) {
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    } else {
        // code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
            var myDiv = document.getElementById('map');
            myDiv.innerHTML = xmlhttp.responseText;

            var myScripts = myDiv.getElementsByTagName("script");
            if (myScripts.length > 0) {
                eval(myScripts[0].innerHTML);
            }
        }
    }
    // js=loadMap is my loadMap.php file, where I echo the map's script.
    xmlhttp.open("GET", "index.php?js=loadMap", true);
    xmlhttp.send();
} 
```

**我的问题：**地图仅在我使用 CTRL+F5 手动刷新索引页面时显示。然后它在 5 秒后消失（我猜这是因为`setInterval()`）

我怎样才能解决这个问题？这样做的最佳方法是什么？

这整件事让我发疯了，提前感谢任何帮助！

halpsb.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:38:55.590

这让你发疯，你是对的。

```
setInterval('refreshData()', 5000);
setInterval('refreshGUI()', 5000); 
```

您没有强制要求任何序列，只是同时触发 3 个 ajax 调用。

所以事情变得混乱了。

因为您正在异步接收相互依赖的数据，并且在每个接收点您都假设您已经准备好所有数据集，这不是......

setTimeout 在这里比 setInterval 更好，因为： setInterval 将每 5 秒启动**一次**，但 setTimeout 将在每次您的工作完成时启动一次并等待 5 秒，这将使您的脚本适应服务器响应时间。

请注意，我不**知道**jQuery 调用，因此您最好找出正确的语法。

下面，我根据您的需要对您的代码进行两个示例修改：

**如果您首先需要数据，然后是新闻，然后是地图，请这样做**

伪代码：

```
start the sequence directly with a refreshData for first render

                           send refreshData 
when async receive occurs  send refreshNews
when async receive occurs  send refreshMap
when async receive occurs  render output
after render complete      setTimeout('refreshData',5000); 
```

代码：

```
$(document).ready(function() {
    refreshData(); 
});

function refreshData() {
    $.post('index.php?js=refresh',
            refreshNews); // that is the part I am not so sure
}                           // I am jQuery illiterate sorry..

function refreshNews() {
    $.post('index.php?js=lastNews&lim=3', function(data) {
        var s = '';
        data = data.childNodes.item(0);
        for (var i = 0; i <= data.childNodes.length; i++) {
            data2 = data.childNodes.item(i);
            s += ('<div>' + data2.childNodes.item(1).textContent + '</div>');
            $('#newspane #news').html(s);
        }
        $('#newspane #news').html($('#newspane #news').html() + s);
    //---------------------------------------
        refreshMap();  // here add this
    //---------------------------------------
   });
}

function refreshMap() {
    var xmlhttp;

    if (window.XMLHttpRequest) {
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    } else {
        // code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
            var myDiv = document.getElementById('map');
            myDiv.innerHTML = xmlhttp.responseText;

            var myScripts = myDiv.getElementsByTagName("script");
            if (myScripts.length > 0) {
                eval(myScripts[0].innerHTML);
            }
        }
    //--------------------------------
    setTimeout(refreshData, 5000); // restart sequence in 5 seconds
    //--------------------------------
    }
    // js=loadMap is my loadMap.php file, where I echo the map's script.
    xmlhttp.open("GET", "index.php?js=loadMap", true);
    xmlhttp.send();
 } 
```

**如果您首先需要新闻，然后是地图，然后是数据，请这样做**

伪代码：

```
start the sequence directly with a refreshNews for first render

                           send refreshNews
when async receive occurs  send refreshMap
when async receive occurs  send refreshData
when async receive occurs  render output
after render complete      setTimeout('refreshNews',5000); 
```

代码：

```
$(document).ready(function() {
    refreshNews(); 
});

function refreshData() {
    $.post('index.php?js=refresh',
        function(){
            setTimeout(refreshNews, 5000); // restart sequence in 5
        }
    ); // that is the part I am not so sure
}      // I am jQuery illiterate sorry..

function refreshNews() {
    $.post('index.php?js=lastNews&lim=3', function(data) {
        var s = '';
        data = data.childNodes.item(0);
        for (var i = 0; i <= data.childNodes.length; i++) {
            data2 = data.childNodes.item(i);
            s += ('<div>' + data2.childNodes.item(1).textContent + '</div>');
            $('#newspane #news').html(s);
        }
        $('#newspane #news').html($('#newspane #news').html() + s);
    //---------------------------------------
        refreshMap();  // here add this
    //---------------------------------------
   });
}

function refreshMap() {
    var xmlhttp;

    if (window.XMLHttpRequest) {
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    } else {
        // code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
            var myDiv = document.getElementById('map');
            myDiv.innerHTML = xmlhttp.responseText;

            var myScripts = myDiv.getElementsByTagName("script");
            if (myScripts.length > 0) {
                eval(myScripts[0].innerHTML);
            }
        }
    //--------------------------------
        refreshData(); // here add this
    //--------------------------------
    }
    // js=loadMap is my loadMap.php file, where I echo the map's script.
    xmlhttp.open("GET", "index.php?js=loadMap", true);
    xmlhttp.send();
 } 
```

我希望这足够清楚，可以帮助你。

# asp.net-mvc - 将“data-”属性动态添加到 html.listboxfor

> ID：16126097
> 
> 赞同：2
> 
> 时间：2013-04-20T23:01:04.267
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4, razor-2

我有以下剃须刀代码：

```
@Html.ListBoxFor(model => model.selectedServices, new MultiSelectList(Model.companyServices, "serviceId", "name")) 
```

在 中`companyServices`，我有一个持续时间属性，我想在列表框的每个选项上导出它，如下所示：

```
<select id="selectedServices" name="selectedServices" multiple="multiple">
    <option value="0" data-duration="90">option 1</option>
    <option value="1" data-duration="15">option 2</option>
    <option value="2" data-duration="60">option 3</option>
</select> 
```

无论如何，有没有使用 foreach 和其他东西来干净轻松地做到这一点，`@Html.ListBoxFor`还是我必须手动创建选择？

# php - 从 PHP 时间戳计算和格式化时间差

> ID：16126100
> 
> 赞同：0
> 
> 时间：2013-04-20T23:01:29.333
> 
> 标签：php, mysql, math, timestamp

我的社区网站的禁止系统用时间戳将时间记录在 MySQL 表中。

我有以下代码来显示发布临时禁令的时间，但无法计算出时差。它记录禁令的方式是记录禁令发布的时间，以及临时禁令完成的时间。由此可以计算出禁令的长度，不知何故......

```
<b>Time of ban:</b> <?php echo date('d/m/Y H:i:s', $row['time']);?><br />
<b>Time of unban:</b> <?php echo $row['temptime'];?><br />
<b>Unban time - ban time=</b> <?php echo $diff;?> 
```

当我尝试这个时：

```
<b>Tempban length:</b> <?php echo date('d/m/Y H:i:s', $diff);?> 
```

它输出`Tempban length: 08/01/1970 01:00:00`

请有人告诉我我哪里出了问题。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:05:34.620

```
$diff = $row['temptime'] - $row['time'];

$diff_years   = floor($diff / (365*60*60*24));
$diff_monthes  = floor(($diff - $diff_years * 365*60*60*24) / (30*60*60*24));
$diff_days    = floor(($diff - $diff_years * 365*60*60*24 - $diff_monthes*30*60*60*24)/ (60*60*24));

$diff_hours   = floor(($diff - $diff_years * 365*60*60*24 - $diff_monthes*30*60*60*24 - $diff_days*60*60*24)/ (60*60));
$diff_minutes  = floor(($diff - $diff_years * 365*60*60*24 - $diff_monthes*30*60*60*24 - $diff_days*60*60*24 - $diff_hours*60*60)/ 60);

// here you can format output, using variables above, for example:
$diff = $diff_hours." hours, ".$diff_minutes." minutes.";

<b>Tempban length:</b> <?php echo $diff;?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T23:25:54.317

试试这个：

```
//time when the person was banned
$banTime =  date_format($row['time'], 'Y-m-d H:i:s'); // too make sure its the right format
$banLifted = date_format($row['temptime'], 'Y-m-d H:i:s');

$bt = new Datetime($banTime);
$bl = new Datetime($banLifted);

$diffTime = $bl->diff($bt); 
```

你能看看这是否符合你的目的..

您可以随时致电：

```
$diffTime ->format('%R%a days'); //for number or days 
```

检查此以获取更多[信息](http://www.php.net/manual/en/class.datetime.php)

丁斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T23:08:19.837

你没有错。date() 适用于自 以来的秒数`1/1/1970 00:00:00`。因此，当您有`86400*8 + 3600*1`秒作为差异时，您将拥有`08/01/1970 01:00:00`as 输出。此外，您将有一个与您的时区相对应的差异。

您必须使用自己的功能来显示时间：

（`$seconds`在您的代码中称为`$diff`）

```
$years = floor($seconds / 365 * 86400);
$days = floor(($seconds -= $years * 365 * 86400) / 86400);
$hours = floor(($seconds -= $days * 86400) / 3600);
$minutes = floor(($seconds -= $hours * 3600) / 60);
$seconds -= $minutes * 60;
echo "$years years, $days days, $hours hours, $minutes minutes and $seconds seconds"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T05:49:59.403

`($row['temptime'] -$row['time'] )/60`让你与众不同`minute`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-21T10:25:27.923

我认为最好的方法是

*   $diff = strtotime('2009-10-05 18:11:08') - strtotime('2009-10-05 18:07:13')

# java - 如何在java中将字符串传递给本地服务器

> ID：16126101
> 
> 赞同：0
> 
> 时间：2013-04-20T23:01:33.647
> 
> 标签：java, sockets, java-io

我创建了一个本地服务器和一个客户端窗口，以使它们在本地相互通信。

服务器和客户端都已创建。我的问题是我需要客户在

JTextField 我想将它传递给服务器。现在，当我检查输入的字符串时，它会显示

该字符串具有 NULL 值。

这是我的客户代码：

```
import java.io.*;
import java.net.Socket;
import java.awt.event.*;
import javax.swing.*;

public class MyClientSide extends JFrame{

    public static String userFile;
    public static String entered = "";

    public static String host = "localhost";
    public static int port = 8080;
    public static Socket socket = null;

    public static DataOutputStream out = null; 

    public MyClientSide(){

        JLabel jlbl = new JLabel("File Name: ");
        final JTextField jtxt = new JTextField(20);
        JButton jbtn = new JButton("Upload to Server");
        JPanel jpnl = new JPanel();

        jbtn.addActionListener(new ActionListener(){ 

            public void actionPerformed (ActionEvent e) {//Start of actionPerformed 

                entered = jtxt.getText();

            }

        });

        jpnl.add(jlbl);
        jpnl.add(jtxt);
        jpnl.add(jbtn);
        this.add(jpnl);

    }

    public MyClientSide(String error) {
        // TODO Auto-generated constructor stub

        JLabel jlbl = new JLabel("Please connect to server");

        this.add(jlbl);
    }

    /**
     * @param args
     * @throws IOException 
     */
    public static void main(String[] args) throws IOException {
        // TODO Auto-generated method stub

        String error = "Please connect to server";

        MyClientSide connectFrm = new MyClientSide();

        MyClientSide errorFrm = new MyClientSide(error);

        try {

            socket = new Socket(host,port);

            connectFrm.setTitle("File Transfer Client");
            connectFrm.setSize(500,80);
            connectFrm.setVisible(true);
            connectFrm.setDefaultCloseOperation(EXIT_ON_CLOSE);

                    InputStreamReader(socket.getInputStream()));

            BufferedReader in = new BufferedReader(new     
                    InputStreamReader(socket.getInputStream()));

            out = new DataOutputStream(socket.getOutputStream());

                   out.writeBytes(entered); /*Here is my problem. when I pass this to the server,
                                              The value is NULL. I need to pass a string from 
                                              JTextField*/

        }

        catch (IOException e) {

            errorFrm.setTitle("Error!!!!");
            errorFrm.setSize(200,100);
            errorFrm.setVisible(true);
            errorFrm.setDefaultCloseOperation(EXIT_ON_CLOSE);

            System.err.print("Please connect to server");

        }

    }

} 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:29:16.347

您的问题是您没有等待按下上传按钮！

你打电话

```
 connectFrm.setVisible(true);
       connectFrm.setDefaultCloseOperation(EXIT_ON_CLOSE); 
```

但与此同时，您将继续与服务器通信。请记住，`setVisible`for a`JFrame`不是阻塞调用。也就是说，无论对话框是否显示，无论按钮是否被按下，它都将直接进入下一个代码而不会停止。

您只需在按下按钮后与服务器通信。

IE

在您的`actionPerformed`功能中：

```
 public void actionPerformed (ActionEvent e) {//Start of actionPerformed 

            entered = jtxt.getText();
            sendToServer(entered);

        } 
```

然后创建一个名为 的函数`sendToServer`，只有在输入数据后才会调用该函数。把你的`try/catch`块

```
 try {
        socket = new Socket(host,port);
        .. 
```

在这个新功能中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T23:29:37.800

将`entered` `String`不是`null`一个空`String`值，它是初始化它的值。您正在创建一个`Socket`在用户有机会进入`String`.

由于您使用的是 Swing，因此最安全的方法是使用[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)。当用户输入新文本时，您可以执行`Socket`上传操作而不会阻止`EDT`.

# error-handling - 在 go 中处理多个错误

> ID：16126102
> 
> 赞同：11
> 
> 时间：2013-04-20T23:01:43.207
> 
> 标签：error-handling, go

我是新手，发现错误处理非常冗长。我已经阅读了它的推理并且大多同意，但是在某些地方，处理错误的代码似乎比实际工作要多。这是一个（人为的）示例，我在其中管道“Hello world！” 进入 cat 并读取并打印输出。基本上每一行都有另外三个来处理错误，我什至什么都没有处理。

```
package main

import "fmt"
import "io"
import "io/ioutil"
import "os/exec"

func main() {
    cmd := exec.Command("cat", "-")
    stdin, err := cmd.StdinPipe()
    if err != nil {
        return
    }
    stdout, err := cmd.StdoutPipe()
    if err != nil {
        return
    }
    err = cmd.Start()
    if err != nil {
        return
    }
    _, err = io.WriteString(stdin, "Hello world!")
    if err != nil {
        return
    }
    err = stdin.Close();
    if err != nil {
        return
    }
    output, err := ioutil.ReadAll(stdout)
    if err != nil {
        return
    }
    fmt.Println(string(output))
    return
} 
```

有没有一种惯用的、干净的方式来处理这个问题？我只是觉得我错过了一些东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T23:56:18.053

显然，我们必须处理任何错误；我们不能忽视它们。

例如，试图使示例不那么人工，

```
package main

import (
    "fmt"
    "io"
    "io/ioutil"
    "os"
    "os/exec"
)

func piping(input string) (string, error) {
    cmd := exec.Command("cat", "-")
    stdin, err := cmd.StdinPipe()
    if err != nil {
        return "", err
    }
    stdout, err := cmd.StdoutPipe()
    if err != nil {
        return "", err
    }
    err = cmd.Start()
    if err != nil {
        return "", err
    }
    _, err = io.WriteString(stdin, input)
    if err != nil {
        return "", err
    }
    err = stdin.Close()
    if err != nil {
        return "", err
    }
    all, err := ioutil.ReadAll(stdout)
    output := string(all)
    if err != nil {
        return output, err
    }
    return output, nil
}

func main() {
    in := "Hello world!"
    fmt.Println(in)
    out, err := piping(in)
    if err != nil {
        fmt.Println(err)
        os.Exit(1)
    }
    fmt.Println(out)
} 
```

输出：

```
Hello world!
Hello world! 
```

> [错误处理和 Go](http://golang.org/doc/articles/error_handling.html)
> 
> 在 Go 中，错误处理很重要。该语言的设计和约定鼓励您在错误发生的地方明确检查错误（与其他语言中抛出异常并有时捕获它们的约定不同）。在某些情况下，这会使 Go 代码变得冗长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T15:44:14.403

我只是在 Go 中写了几百行，所以我没有标题表示任何惯用的方式。但是，在重复调用和检查错误步骤的情况下，如果我恢复逻辑，我发现代码更容易编写和阅读：而不是检查退出条件（错误！= nil） ，我检查继续的条件（ err == nil ），如下所示。
如果您有一种独特的方式来处理错误，无论是哪个错误，例如返回调用者或​​打印/记录它，都可以做到这一点。这种方法的缺点是您不能使用 := 隐式声明变量，因为它们将具有分配它们的 if 块的范围。

```
func main() {
    var output []byte
    var stdin io.WriteCloser 
    var stdout io.Reader 

    cmd := exec.Command("cat", "-")

    stdin, err := cmd.StdinPipe()

    if err == nil {
      stdout, err = cmd.StdoutPipe()
    }

    if err == nil {
      err = cmd.Start()
    }

    if err == nil {
      _, err = io.WriteString(stdin, "Hello world!")
    }

    if err == nil {
    output, err = ioutil.ReadAll(stdout)
    } 

    if err == nil {
     err = stdin.Close();
    }

    if err == nil {
            fmt.Println(string(output))
    } else {
         fmt.Println(string(err.Error())) // Error handling goes here
    }

    return
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T01:06:00.643

对于惯用的，请参阅`peterSO`开始涉及返回错误主题的答案，并且可以通过使用与应用程序中调用上下文相关的一些额外信息来包装错误来进一步采取行动。

在某些情况下，对操作的迭代运行可能需要通过以下链接中的一些非常有创意的示例进行更通用的处理，但正如我对这个问题的评论，这是一个糟糕的代码示例来检查：[Go — 优雅地处理多个错误？](https://stackoverflow.com/questions/15397419/go-handling-multiple-errors-elegantly)

无论如何，仅查看您拥有的示例，这只不过是一次性的，因此，如果您只是想像在交互式 python 控制台中那样搞乱，请像这样对待它。

```
package main

import (
    "fmt"
    "io"
    "io/ioutil"
    "os/exec"
)

func main() {
    cmd := exec.Command("cat", "-")
    stdin, _ := cmd.StdinPipe()
    stdout, _ := cmd.StdoutPipe()

    cmd.Start()
    io.WriteString(stdin, "Hello world!")

    stdin.Close();
    output, _ := ioutil.ReadAll(stdout)

    fmt.Println(string(output))
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-21T01:19:07.277

在这种情况下，我通常只是把它弄平一点。

```
func myFunc() (err error) {
    cmd := exec.Command("cat", "-")

    stdin,  err := cmd.StdinPipe();                  if err != nil { return }
    stdout, err := cmd.StdoutPipe();                 if err != nil { return }

       err  = cmd.Start();                           if err != nil { return }
    _, err  = io.WriteString(stdin, "Hello world!"); if err != nil { return }
       err  = stdin.Close();                         if err != nil { return }
    o, err := ioutil.ReadAll(stdout);                if err != nil { return }

    fmt.Println(string(o))
    return
} 
```

仍然丑陋，但至少它不那么垂直，而且我们得到了一些对齐。

我不能说这符合任何约定，但它更容易阅读 IMO。

# android - Android：XML 无法通过 id 找到其他视图

> ID：16126103
> 
> 赞同：2
> 
> 时间：2013-04-20T23:01:53.670
> 
> 标签：android, xml, find, resources, android-relativelayout

突然之间，我开始对我的 RelativeLayout 有问题。问题是它不想识别此 RelativeLayout 中使用 ID 定义的其他视图：错误消息（在线**android:layout_alignBaseline="@id/editText3"**）是：**错误：未找到与给定匹配的资源名称（在“layout_alignBaseline”处，值为“@id/editText3”）。**

```
 <RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="10dp" >

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@id/editText3"
        android:text="Predaj: "
        android:textSize="25dp" />

    <EditText
        android:id="@+id/editText3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/textView3"
        android:inputType="numberDecimal"
        android:singleLine="true"
        android:textSize="25dp"
        android:textStyle="bold"
        android:editable="false"
        android:textIsSelectable="true" />
</RelativeLayout> 
```

我无法理解似乎是什么问题 - 我已经尝试清理、重建、重新启动 PC、删除和重新创建整个文件（R.java 也是如此），但错误不会消失。当我删除这行代码时，一切正常（对齐除外）。我有一种感觉，这是因为“textView3”是在“editText3”之前定义的，但在过去的几天里它是这样工作的。感谢您的建议 - 非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T10:21:01.170

感谢弗朗西斯科·加托。它确实有助于在 TextView 中为 EditText 创建变量，因此代码现在看起来非常相似但实际上可以工作。

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="10dp" >

     <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/editText1"
        android:text="Cena: "
        android:textSize="25dp" />

    <EditText
        android:id="@id/editText1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/textView1"
        android:inputType="numberDecimal"
        android:singleLine="true"
        android:textSize="25dp"
        android:textStyle="bold" />

</RelativeLayout> 
```

所以我在分配 layout_alignBaseline="@+id/editText" 时已经创建了 edittext 变量，然后在 EditText 中我使用了相同的 id（不再创建它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T23:14:11.627

您是否尝试清理项目？

或者尝试在 alignbaseline 中写 +@id

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T23:37:35.653

在你声明它之后引用它，看看是否能平息错误。还有你在声明之前提到的事情。似乎您需要一些可视文本，然后是一个框，以便用户可以在 textview 右侧编辑文本。在 RelativeLayouts 中，让第一个视图自动布局，或者您可以将其布局与父级相关。IE。（安卓：layout_alignParentLeft）。在 RelativeLayouts 中，我们使用 firstview 作为我们的起始参考点，而不是父容器。我调整了您的代码，请告知是否有意义：

```
 <RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="10dp" >

    <EditText
        android:id="@+id/editText3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:inputType="numberDecimal"
        android:singleLine="true"
        android:textSize="25dp"
        android:textStyle="bold"
        android:editable="false"
        android:textIsSelectable="true" />

<TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@id/editText3"
        android:layout_alignBaseline="@id/editText3"
        android:text="Predaj: "
        android:textSize="25dp" />

</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-27T23:55:34.787

我知道它已经很晚了，但它可能会帮助有同样问题的人。

将`EditText`上面的`TextView`. 它不会影响您正在做的事情的外观，因为它是一个`RelativeLayout`.

简单来说，Gradle 会扫描代码的每一行，因为它没有找到您提到的 ID，所以会显示错误。

以前的答案也是正确的，但这实现起来要简单得多。

# haskell - 《Learn You a Haskell for Great Good》一书中的懒惰示例

> ID：16126104
> 
> 赞同：3
> 
> 时间：2013-04-20T23:01:56.617
> 
> 标签：haskell

我正在阅读[Learn You a Haskell for Great Good 的介绍](http://learnyouahaskell.com/introduction#so-whats-haskell)，我无法理解以下对“懒惰”一词的解释。

> 假设您有一个不可变的数字列表`xs = [1,2,3,4,5,6,7,8]`和一个`doubleMe`将每个元素乘以 2 然后返回一个新列表的函数。如果我们想用命令式语言将我们的列表乘以 8 并且做了`doubleMe(doubleMe(doubleMe(xs)))`，它可能会通过列表一次并制作一个副本然后返回它。然后它会再通过列表两次并返回结果。在一种懒惰的语言中，调用`doubleMe`一个列表而不强制它显示结果最终会在程序中告诉你“是的，我稍后再做！”。但是一旦你想看到结果，第一个`doubleMe`告诉第二个它想要的结果，现在！第二个说给第三个，第三个不情愿地给了一个加倍的 1，这是一个 2。第二个收到了这个，然后把 4 还给了第一个。第一个看到并告诉你第一个元素是 8。所以它只通过列表，并且只有在你真正需要它时才通过。

该功能背后的魔力是`doubleMe`什么？命令式和函数式版本之间有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T02:43:46.910

如果您习惯于严格的编程，那么绕着懒惰考虑的麻烦在于，当严格的评估能够产生结果时，懒惰*永远不会改变结果。*¹

因此，查看您已经理解的示例并尝试查看惰性评估如何改变图片可能会令人困惑，因为答案大多是“它没有”。惰性评估与严格评估*有时*会在性能特征上产生很大差异（在任一方向上）。更重要的是，有些代码可以在惰性求值下执行，但在严格求值下会失败。

所以惰性求值基本上不会改变你已经知道如何编写的任何代码，但可以让你编写严格求值无法写出的代码！

所以`print doubleMe(doubleMe(doubleMe([1, 2, 3, 4, 5])))`在严格或惰性评估下并不意味着任何不同。我们可以讨论它是如何实现的细节，并发现各种加倍将以不同的顺序发生，也许这足以让一些人获得直觉。但我不确定这是介绍这个概念的最佳方式。

懒惰真正开始看起来不同的地方在于，您可以执行以下操作：

1.  编写一个程序来打印第 N 个素数，方法是生成所有素数的列表，然后打印列表的第 N 个元素。使用惰性求值，仅在请求时生成素数，因此不会永远运行。一个严格的程序必须有一个函数参数`generate_primes`来控制生成多少。

2.  `print`编写一个程序，通过将函数映射到所有素数的列表，永远打印素数（直到按下 control-C） 。通过惰性评估，它们将在生成时被打印出来；一个严格的程序会在打印任何素数之前尝试生成所有素数。请注意，惰性程序可以使用`generate_primes`(1) 中的相同函数，而严格程序的`generate_n_primes`函数在这里是无用的（除非我们希望每次打印第 N + 1个素数时*再次生成直到第 N 个的所有素数）。*

3.  一个稍微不那么愚蠢的例子是，有一个程序可以将文档转换为 HTML、PDF、Latex 和许多其他格式，并将它们全部返回到一个大字典中，以允许调用者选择它想要的一种。在严格的评估下，这将完成产生*所有*表示的工作，即使调用者只想要一个。在惰性求值下，调用者可以选择它想要的任何表示，并且程序只会实际执行实际需要的转换。

4.  定义您自己的控制结构。在惰性语言中，相当于 if/then/else 的东西可以在用户代码中定义为普通函数。该函数接受一个布尔值（条件），如果布尔为真则返回一个值，如果条件为假则返回一个值。只会评估“then”或“else”值，因此即使您正在测试的原因是“then”分支会导致错误，如果条件为假，则会导致程序终止！您也可以定义其他类似控制结构的函数。

等等。

其工作方式是，每当对函数调用进行求值时，而不是离开并完成所有工作然后返回结果，而是*立即*返回。它还没有结果，所以它返回一个占位符，其中包含足够的信息来完成工作（如果确实需要的话）。

这个占位符可以传递给其他函数，存储在数据结构等中，就像它是真实的结果一样。如果稍后某些代码需要根据占位符所在的结果“做出决定”（将什么字符打印到屏幕上，在条件中采用哪个分支，诸如此类），则执行代码“多一点”来提出足够的实际数据来做出决定。

* * *

¹除非所涉及的代码有副作用，这就是为什么命令式编程语言从不到处都有隐式惰性求值的原因。最多他们手动声明了惰性，随之而来的警告是程序员有责任确保何时/是否运行他们声明为惰性的代码并不重要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T18:55:48.463

好吧，让我们来说明一下。首先，这是一个简单的定义`doubleMe`：

```
doubleMe [] = []
doubleMe (x:xs) = x*2 : doubleMe xs 
```

现在，让我们考虑一下严格/急切的语言（不是 Haskell）如何评估`doubleMe (doubleMe (doubleMe [1, 2, 3]))`. 这种语言的规则是：*评估函数调用，完整地评估所有参数，然后将它们传递给函数*。所以我们得到这个：

```
doubleMe (doubleMe (doubleMe [1, 2, 3]))

  -- Expand the list literal into its structure
  == doubleMe (doubleMe (doubleMe (1 : 2 : 3 : [])))

  -- Eager evaluation requires that we start at the innermost use of doubleMe
  -- and work there until we produce the whole list.
  == doubleMe (doubleMe (2 : doubleMe (2 : 3 : [])))
  == doubleMe (doubleMe (2 : 4 : doubleMe (3 : [])))
  == doubleMe (doubleMe (2 : 4 : 6 : doubleMe []))
  == doubleMe (doubleMe (2 : 4 : 6 : []))

  -- Only now we can move on to the middle use of doubleMe:
  == doubleMe (4 : doubleMe (4 : 6 : []))
  == doubleMe (4 : 8 : doubleMe (6 : []))
  == doubleMe (4 : 8 : 12 : doubleMe [])
  == doubleMe (4 : 8 : 12 : [])
  == 8 : doubleMe (8 : 12 : [])
  == 8 : 16 : doubleMe (12 : [])
  == 8 : 16 : 24 : doubleMe []
  == 8 : 16 : 24 : []
  == [8, 16, 24] 
```

在 Haskell 中，规则更像这样（但不完全是这样）：

1.  要评估函数应用程序，请在评估其参数之前应用该函数。
2.  如果外部函数有多种情况（就像我们的`doubleMe`定义那样），那么我们只评估它的参数来确定使用哪种情况。

所以我们得到类似的东西：

```
doubleMe (doubleMe (doubleMe [1, 2, 3]))
  -- Here we only "pull out" the 1 from the list, because it's all we need to
  -- pick which case we want for doubleMe.
  == doubleMe (doubleMe (doubleMe (1 : [2, 3])))
  == doubleMe (doubleMe (1*2 : doubleMe [2, 3]))

  -- Now instead of continuing with the inner doubleMe, we move on immediately
  -- to the middle one:
  == doubleMe ((1*2)*2 : doubleMe (doubleMe [2, 3]))

  -- And now, since we know which case to use for the outer doubleMe, we expand 
  -- that one:
  == (1*2)*2)*2 : doubleMe (doubleMe (doubleMe [2, 3])) 
```

而在 Haskell 中，除非有另一个调用者需要列表头部或尾部的值，否则评估将停止。（请注意，我什至没有进行乘法运算。）例如，`head`是返回列表第一个元素的函数：

```
head (x:xs) = x 
```

假设我们正在评估`head (doubleMe (doubleMe (doubleMe [1, 2, 3])))`. 事情是这样的：

```
head (doubleMe (doubleMe (doubleMe [1, 2, 3])))
  -- repeat the steps from above for the doubleMe part
  head (((1*2)*2)*2 : doubleMe (doubleMe (doubleMe [2, 3]))

  -- By the definition of head:
  ((1*2)*2)*2 
```

因此`doubleMe (doubleMe (doubleMe [2, 3]))`在这种情况下该部分被丢弃，因为`head`不需要它来产生结果。如果 Haskell 不是懒惰的，它会计算整个`[8, 12, 24]`列表，然后将其`8`放在前面。

GHC 比这更聪明。我们可以使用`map`函数来写`doubleMe`：

```
doubleMe = map (*2) 
```

GHC，当您使用`-O`优化编译程序的选项时，将以下规则纳入其中：

```
map f (map g xs) = map (f . g) xs 
```

这意味着如果它看到 的嵌套使用`map`，它可以将它们减少到遍历列表的一次。使用它：

```
head (doubleMe (doubleMe (doubleMe [1, 2, 3])))
  == head (map (*2) (map (*2) (map (*2) [1, 2, 3])))
  == head (map ((*2) . (*2) . (*2)) [1, 2, 3])
  == head (map (\x -> ((x*2)*2)*2) [1, 2, 3])
  == head (map (\x -> ((x*2)*2)*2) (1 : [2, 3]))
  == head (((1*2)*2)*2 : map (\x -> ((x*2)*2)*2) [2, 3])
  == ((1*2)*2)*2 
```

* * *

**编辑：**在这个问题的答案中，一通与三通的主题显然有很多混淆。我会把我的很多东西都扔进去。

简单的惰性评估（如我的第二个示例评估所示）不会改变通过次数。如果我们评估类似的东西`print (doubleMe (doubleMe (doubleMe [1, 2, 3])))`，惰性和急切的评估将做相同数量的工作，但顺序不同。让我们编写嵌套表达式的值并排列列表元素，如下所示：

```
 doubleMe [1, 2, 3] = [2,  4,  6]
           doubleMe (doubleMe [1, 2, 3]) = [4,  8, 12]
doubleMe (doubleMe (doubleMe [1, 2, 3])) = [8, 16, 24] 
```

现在，如果我们执行以下操作`print (doubleMe (doubleMe (doubleMe [1, 2, 3])))`：

1.  急切的评估将逐行攻击这一点。首先它将计算整个 list `[2, 4, 6]`，然后是 list `[4, 8, 12]`，然后是 list `[8, 16, 24]`，最后它会打印最后一个 list 。
2.  惰性求值逐列攻击。首先它将计算`2`第一个列表中的 ，然后`4`是第二个列表中的 ，然后是`8`第一个列表中的 ，并打印`8`; 然后计算`4`第一个列表中的`8`，第二个列表中的 ，依此类推。

如果您正在打印列表，因为这需要计算所有元素，所以在任何一种情况下（或多或少）相同数量的工作和内存。然而，在这个`head (doubleMe (doubleMe (doubleMe [1, 2, 3])))`例子中，惰性求值做的工作较少。

最后一个“融合”示例（使用 的示例`map f . map g == map (f . g)`）比其他两个示例做的工作更少，因为它确实是一次通过。但这不是因为懒惰，而是因为纯度允许更积极的优化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T23:57:47.387

评价策略不同。

在命令式世界中，仅在对参数进行完全评估后才评估函数的主体。然后考虑你的例子。

```
-- double1 = double2 = double3 = double  
double3 ( double2 ( double1 [1,2,3] ) ) 
```

最初要评估double3，我们必须评估double2
要评估double2，我们必须评估double1
要评估double1，我们必须评估[1,2,3]
但是[1,2,3]不需要评估，那么我们可以开始double1 的求值
然后 double1 ([1,2,3]) 求值为 [2,4,6] 并传递给 double2
然后 double2 ([2,4,6]) 求值为 [4,8,12 ] 并传递给 double3
最后对 double3 的求值可以启动并返回 [8,16,24]

```
double3 ( double2 ( double1 [1,2,3] ) )  
double3 ( double2 [2,4,6])  
double3 [4,8,12]  
[8,16,24] 
```

对于像 haskell 这样的惰性语言来评估函数，我们不需要等待其参数的完全评估。然后，如果在评估参数期间已经产生了一大块数据，则可以开始评估函数体。

举个例子。

```
double3 ( double2 ( double1 [1,2,3] ) )
double3 ( double2 [2] ( double1 [2,3] ) )
double3 [4]( double2 [4] ( double1 [3] ) )
[8] double3 [8] ( double2 [6] )
[8,16] double3 [12]
[8,16,24] 
```

# pdo - 如何将常量字符串数组字段放入 PDO/D7 db_query()？

> ID：16126106
> 
> 赞同：0
> 
> 时间：2013-04-20T23:02:17.967
> 
> 标签：pdo, drupal-7

第一次在这里发帖:)

这是一个有效的 MySQL 查询：`SELECT "'a','b'" AS FieldStrArray;`

（要在 PHP 中作为字符串输入，请记住双引号前的反斜杠。）

至少在 Drupal 7 的 db_query() 中，这会产生一个致命的 PDO 异常，抱怨这`'a','b'`不是一个已知字段。

我的问题：如何解决 db_query()/PDO 的这种明显限制？

（是的，我需要一个常量字符串数组作为字段结果之一。这是问题的最小复制...... :)）

任何建议都非常受欢迎......包括a）这是否也是PHP本身的问题，b）如何将此作为错误报告给适当的当局，c）假设它是一个真正的错误的解决方法的任何创造性想法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:06:04.083

这可能不是 PDO/Drupal 问题，而是 mysql 问题。
服务器似乎在[ANSI_QUOTES SQL 模式下运行](http://dev.mysql.com/doc/refman/5.1/en/server-sql-mode.html#sqlmode_ansi_quotes)：

```
Treat “"” as an identifier quote character (like the “`” quote character) 
and not as a string quote character. You can still use “`” to quote identifiers 
with this mode enabled. With ANSI_QUOTES enabled, you cannot use double quotation
marks to quote literal strings, because it is interpreted as an identifier. 
```

因此，只需接受您的建议并转义单引号即可：

```
SELECT '\'a\',\'b\'' AS FieldStrArray 
```

虽然我想知道为什么人们需要从 SQL 查询中获得这样的东西。一些 Drupal API 限制？

# django - 将 Django 项目切换到 virtualenv 中的 gunicorn 服务器时出错

> ID：16126107
> 
> 赞同：2
> 
> 时间：2013-04-20T23:02:41.503
> 
> 标签：django, django-models, virtualenv, gunicorn

我有一个项目可以创建我想用 uuid 键入的对象。当我在 manage.py 中使用简单的 Django 测试服务器运行这个项目时，一切都很好。但是我正在尝试部署到heroku，所以我设置了一个带有gunicorn服务器的virtualenv，它破坏了我的代码。我已将错误追溯到这样一个事实，即由于某种原因，我的 UploadedFile 对象在与此服务器一起运行时始终具有空白访问链接。

这是我的models.py中的代码：

```
 from django.db import models
 import uuid
 import datetime

 # UUID field will be used to key file upload objects
 class UUIDField(models.CharField) :
   def __init__(self, *args, **kwargs):
     kwargs['max_length'] = kwargs.get('max_length', 64 )
     kwargs['blank'] = True
     models.CharField.__init__(self, *args, **kwargs)

 class UploadedFile(models.Model):
   #accessLink = UUIDField(primary_key=True, editable=False)
   accessLink = models.CharField(primary_key=True, max_length=64)
   uploadTime = models.DateTimeField(default=datetime.datetime.now)  
   filename = models.CharField(max_length=200)

   def __init__(self, *args, **kwargs):
     super(UploadedFile, self).__init__(*args, **kwargs)
     if self.accessLink is '':
       self.accessLink = str(uuid.uuid4())

   def __unicode__(self):
     return filename 
```

这是views.py中包含的我的索引的代码：

```
 from django.http import HttpResponse  # Just for lulz                                            
 from django.shortcuts import render
 from django.core.context_processors import csrf
 from django.shortcuts import render_to_response
 from django.template import Template, Context
 from smartfile import BasicClient
 from filemapper.models import UploadedFile

 def index(request):
   if request.method == 'POST':
     c = {}
     c.update(csrf(request))
     authKey = 'ggcCEFzGBcJYAQSHNf7AnF8r7c03cB'
     authPassword = 'CJlxZHCocieiPOKuhI6GdGOwwTMr2i'
     api = BasicClient(authKey, authPassword)
     for f in request.FILES.values():
       # Create our record of the file
       u = UploadedFile(filename=f.name) 
       u.save()
       # Create a directory on smartfile
       api.post('/path/oper/mkdir/', path=u.accessLink)
       # Upload the file to s
       api.post('/path/data/' + u.accessLink, file=f.file, name=u.filename)
       # This page should display how to access the uploade
       return generate(request, u.accessLink)
     else:
       return HttpResponse('File not found')
   else:
     return render(request, 'filemapper/index.html') 
```

当我尝试将文件发布到索引时代码失败，因为 u.accessLink 不是格式正确的 UUID，它是一个空白字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T19:21:14.760

作为 Django 开发人员，我会以另一种方式做一些事情：

*   无需编码 UUIDField，只需使用 char 字段`max_length`和`blank=True`
*   不要覆盖- 在方法`UploadedFile.__init__`中设置 accessLink`UploadedFile.save()`

此外，在重载新样式类方法时，您应该使用`super`，而不是显式调用该`__init__`方法。

# android - 正在进行的通知在单击时被取消

> ID：16126111
> 
> 赞同：3
> 
> 时间：2013-04-20T23:03:08.897
> 
> 标签：android, notifications

我正在尝试使用远程视图创建一个持续的通知。问题是点击后，通知被取消。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T13:58:02.917

那是因为你设置了

```
notification.flag = Notification.auto_cancel 
```

或者

```
new NotificationCompat.Builder(this)
    .setAutoCancel(true) 
```

删除任何这些代码片段就可以了。

# windows-7 - AT to SCHTASKS：如何避免重复？

> ID：16126115
> 
> 赞同：1
> 
> 时间：2013-04-20T23:03:28.203
> 
> 标签：windows-7, at-job, windows-task-scheduler

我正在调整一个 WinXP 批处理文件，该文件使用 AT 命令来安排一些交互式的、持续时间相当长的活动（以及稍后杀死它们将产生的进程）以使用 Win7 的 SCHTASKS 版本（因为 Win7 中的 AT 不再支持**/interactive**标志），例如翻译

`at 00:59 /interactive /every:Monday "h:\bin\scrape.bat"`

`at 03:02 /interactive /every:Monday "h:\bin\kill_scrape.bat"`

类似于：

`schtasks /Create /TN SCRAPER /IT /ST 00:59 /K /ET 03:02 /ST: 04:02\`

```
 /SC WEEKLY /D MON /TR "h:\bin\scrape.bat" 
```

...这似乎更简单，因为它会直接使用调度程序来终止预定的活动（如果我理解如何`/K`使用`/ET`or是正确的`/DU`。上述工作，但任务以 10 分钟的默认间隔重复。有了这个`/RI`选项，我可以给它一个最多 122 分钟的重复间隔......但它仍然可以在 {122 秒}-分钟重复，我收集，我不想要那个......并且有很多行要翻译，而且我的 elisp 还不足以从所有任务持续时间中减去一分钟。SCHTASKS 中是否有任何选项可以避免*重复*计划任务？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-08T12:15:26.933

我相信您需要的是一个日程安排选项 ( `/SC`)。有效的定时选项有`daily`, `weekly` `monthly`, 'minute', 'hourly'，效果明显。

如果您希望在所有时间内只运行一次任务，`/SC once`就可以解决问题。添加`/Z`选项也会为您删除任务。

如果这些选项都不能完全满足您的需求，您应该能够使用`/RI`（运行间隔）开关来设置您希望任务在之后重复的确切分钟数。我不确定 XP 上的最大间隔是多少，但至少应该是一天，Windows 7 上的最大间隔是 599940 分钟，即 416 天。

你想要的一个例子是这样的：

```
schtasks /Create /TN SCRAPER /IT /ST 01:00 /ET 03:01 /K /SC WEEKLY /D MON /TR "h:\bin\scrape.bat"
schtasks /Create /TN ender /IT /ST 3:00 /K /SC WEEKLY /D MON /TR "h:\bin\end.bat" 
```

初始程序在哪里`scrape.bat`并`end.bat`杀死所有进程。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2021-04-07T11:11:45.373

使用 /RI 0 禁用重复任务

# wcf - IIS WCF net.tcp 绑定错误

> ID：16126116
> 
> 赞同：0
> 
> 时间：2013-04-20T23:03:33.923
> 
> 标签：wcf, iis, wcf-binding, invalidoperationexception, net.tcp

我知道有很多关于这个的问题，我都试过了，但没有用......我在 WS8 上使用 IIS8，将 net.tcp 添加到协议列表并绑定到 808，但我仍然收到此错误：

```
System.InvalidOperationException: Could not find a base address that matches scheme net.tcp for the endpoint with binding NetTcpBinding. Registered base address schemes are [http]. 
```

我正在尝试使用以下方法在浏览器中打开服务： `http://192.168.1.101:64410/eve/relay/ClientRelayService.svc`

我正在使用端口 64410 的站点上运行 2 个测试服务（一个是 basichttp，另一个应该是 tcp）。其他服务正在正常工作。

这是我的服务器端配置：

```
<?xml version="1.0"?>
<configuration>
    <appSettings/>
    <system.web>
        <compilation debug="true" targetFramework="4.0"/>
        <customErrors mode="Off"/>
        <trust level="Full" />
        <httpRuntime/>
    </system.web>
    <system.serviceModel>
        <bindings>
            <netTcpBinding>
                <binding name="tcpBinding" transferMode="Streamed" portSharingEnabled="true">
                    <reliableSession enabled="true" />
                    <security mode="None">
                        <transport clientCredentialType="None" protectionLevel="None" />
                        <message clientCredentialType="None" />
                    </security>
                </binding>
            </netTcpBinding>
        </bindings>

        <services>

            <service name="Eve.API.Services.Relay.RemoteRelayService">
                <host>
                    <baseAddresses>
                        <add baseAddress="http://localhost:64410/eve/relay/" />
                    </baseAddresses>
                </host>
                <endpoint address="" binding="basicHttpBinding" contract="Eve.API.Services.Contracts.Services.Interfaces.IEveAPIService"/>
                <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
            </service>

            <service name="Eve.API.Services.Relay.RelayService">
                <host>
                    <baseAddresses>
                        <add baseAddress="net.tcp://localhost:808/eve/relay/ClientRelayService.svc"/>
                    </baseAddresses>
                </host>
                <endpoint address="" binding="netTcpBinding" bindingConfiguration="tcpBinding" contract="Eve.API.Services.Contracts.Services.Interfaces.IRelayService">
                    <identity>
                        <dns value="localhost" />
                    </identity>
                </endpoint>
                <endpoint address="tcpmex" binding="mexTcpBinding" contract="IMetadataExchange"/>
                <!--<endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>-->
            </service>

        </services>
        <behaviors>
            <serviceBehaviors>
                <behavior>
                    <!-- TODO Set to false on deploy -->
                    <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
                    <serviceDebug includeExceptionDetailInFaults="true"/>
                </behavior>
            </serviceBehaviors>
        </behaviors>
        <protocolMapping>
            <add binding="basicHttpsBinding" scheme="https"/>
        </protocolMapping>
        <serviceHostingEnvironment aspNetCompatibilityEnabled="true" minFreeMemoryPercentageToActivateService="1" multipleSiteBindingsEnabled="true"/>
    </system.serviceModel>
    <system.webServer>
        <modules runAllManagedModulesForAllRequests="true"/>
        <!-- TODO Set to false on deploy -->
        <directoryBrowse enabled="true"/>
    </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:13:06.873

我会使用 net.tcp 绑定从服务中删除基地址，并在其端点上**明确定义地址，例如**

```
<endpoint address="net.tcp://localhost:808/eve/relay/ClientRelayService.svc" 
  binding="netTcpBinding" bindingConfiguration="tcpBinding" 
  contract="Eve.API.Services.Contracts.Services.Interfaces.IRelayService"> 
```

# python - 为所有并排的单词成对拆分字符串单词

> ID：16126122
> 
> 赞同：2
> 
> 时间：2013-04-20T23:04:40.980
> 
> 标签：python

我需要将字符串拆分成单词，然后成对连接每个连续的单词，如下所示：

```
"This is my subject string" 
```

会去：

```
"This is"    
"is my"  
"my subject"  
"subject string" 
```

字符串的长度从 5 个字到 250 个字不等。此外，它会在大量数据（1GB 左右）上执行此操作。在 Python 中有没有一种有效的方法来做到这一点？

我已经看到很多关于哪种方法最有效的建议，所以想先问一下。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T23:07:25.177

您可以使用 split 方法和列表推导来做到这一点：

```
text = "This is my subject string"
words = text.split() #note that split without arguments splits on whitespace
pairs = [words[i]+' '+words[i+1] for i in range(len(words)-1)]
print(pairs) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-21T00:29:03.160

有一个[`itertools`名为pairwise的食谱就是](http://docs.python.org/2/library/itertools.html#recipes)为此而建的！不使用它会很疯狂。

```
>>> from itertools import tee, izip
>>> def pairwise(iterable):
        "s -> (s0,s1), (s1,s2), (s2, s3), ..."
        a, b = tee(iterable)
        next(b, None)
        return izip(a, b)

>>> list(pairwise(text.split()))
[('This', 'is'), ('is', 'my'), ('my', 'subject'), ('subject', 'string')] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T23:19:03.927

这是 Pythonic 方式

```
from itertools import izip
[' '.join(pair) for pair in izip(words[:-1], words[1:])] 
```

*izip*将保持或多或少的效率

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T00:41:58.523

```
>>> import re
>>> text = "This is my subject string"
>>> re.findall(r'(\w+)\s+(?=(\w+))', text)
[('This', 'is'), ('is', 'my'), ('my', 'subject'), ('subject', 'string')] 
```

如果您需要一个生成器，只需使用`re.finditer`

```
pairs = (m.groups() for m in re.finditer(r'(\w+)\s+(?=(\w+))', text)) 
```

这是非常快速/高效的，第二个版本将是最有效的，因为它不会一次将所有单词存储在内存中，但是它不会那么快。您必须分析向您建议的方法，以查看哪种方法适合您。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T23:19:12.127

在这种情况下，天真的实现应该可以正常工作，假设每个*字符串*都很小（不是 1GB）

```
string = "This is my subject string"

words = string.split()
prevWord = None

for word in words:
    if prevWord != None:
        print prevWord, word
    prevWord = word 
```

像往常一样，在处理相当大的数据集时，您需要读取一个项目，处理它，读取下一个项目等。不要尝试`split()`整个文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-20T23:21:29.877

如果您不介意计算初始列表的长度，那么您可以执行以下操作：

```
s = 'this is a test string'.split()
n = len(s)
for first, second in itertools.izip(itertools.islice(s, 0, n-1), itertools.islice(s, 1, n)):
    print(first, second) 
```

这输出：

```
('this', 'is')
('is', 'a')
('a', 'test')
('test', 'string') 
```

这对于大量数据应该是有效的，因为您没有创建一个巨大的列表（除了您已经拥有的）。

# javascript - 更改 (document).ready 上受正则表达式影响的字符串的颜色

> ID：16126123
> 
> 赞同：2
> 
> 时间：2013-04-20T23:04:43.893
> 
> 标签：javascript, jquery

所以我在这里想要完成的是改变受一些正则表达式影响的单词的颜色。

```
$(document).ready(function(){

  container = $("#modal_container section").text();
  hashtags = /\#\w+/g;
  var container_hash = container.match(hashtags);
  $(container_hash).css({'color':'red'}); 
  //We're grabbing the words, but how can I change the color?
  alert(container_hash);

 }); 
```

这是一个小提琴[http://jsfiddle.net/vuDzC/2/](http://jsfiddle.net/vuDzC/2/)让它更清楚。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T23:10:27.253

您不能更改 textNodes/texts 的颜色，您应该用一个元素包装匹配的文本，然后设置该元素的样式。

```
$("#modal_container section p").html(function(_, html) {
   return html.replace(/(\#\w+)/g, '<span class="red">$1</span>');   
}); 
```

[http://jsfiddle.net/vuDzC/4/](http://jsfiddle.net/vuDzC/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T23:44:26.457

您正在寻找的这种做法（或者应该是一个足够好的例子）：

```
<script type="text/javascript">
    $(document).ready(function(){
        var text = $("#modal_container").html();
        var myRegExp = new RegExp('\\#\\w+','gi');
        var newtext = text.replace(myRegExp,'<span style="color:red;">$&</span>');
        $("#empty").html(newtext);
    });
</script>
<div id="modal_container">
    #works<br />
    # Desnt Work<br />
    Not Even Close<br />
</div>
<div id="empty" style="margin-top:30px;">
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T23:14:04.407

```
 $(function(){

  var container = $("#modal_container section");
  var htmlWrappedHashtags = container.html().replace(/\(#\w+)/g, '<span class="red">$1</span>');
  container.html(htmlWrappedHashtags);

  $(".red").css({'color':'red'}); // or better: include ".red {color: red;}" into your CSS

 }); 
```

# asp.net-mvc-4 - 使用 NotFound MVC 包时如何将 404 记录到 ELMAH？

> ID：16126125
> 
> 赞同：1
> 
> 时间：2013-04-20T23:04:51.237
> 
> 标签：asp.net-mvc-4, elmah

我在少数 ASP.NET MVC 4 网站中安装了[NotFound MVC Nuget 包。](https://nuget.org/packages/NotFoundMvc/)

但是，我喜欢在 ELMAH 中记录这些错误，以便我可以轻松地提取有关在我的网站上触发 404 的客户端的所有信息。

现在我在`NotFound`视图中添加了以下逻辑：

```
Elmah.ErrorSignal.FromCurrentContext().Raise(new Exception("Request not found: " + ViewBag.RequestedUrl)); 
```

安装 NotFound MVC 后是否有更好的方法继续在 ELMAH 中记录 404？

# python - Python 2.7.3 为什么我的文本框救济不起作用？

> ID：16126126
> 
> 赞同：0
> 
> 时间：2013-04-20T23:05:16.820
> 
> 标签：python, python-2.7, tkinter

我正在尝试创建一个电子邮件客户端。由于我在 Mac OSX 上测试该程序，我意识到我无法看到文本框而没有缓解。因此，我尝试将其设置为`GROOVE`.

```
def mainFun(self):
    """Holds body of thing"""
    self.entryFrame = Frame(self)
    self.entryFrame.grid(row = 1, column = 0, sticky = W)

    self.Body = Text(self.entryFrame, width = 75, height = 50, relief = GROOVE)
    self.Body.grid() 
```

**但是，文本框仍然是扁平的。为什么是这样？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T23:21:07.560

...因为borderwidth默认为0。

# c++ - 启用 -std=c++0x 时自定义分配器的编译问题

> ID：16126133
> 
> 赞同：3
> 
> 时间：2013-04-20T23:05:37.370
> 
> 标签：c++, vector, c++11, allocator

我有一个`Matrix`类，它是`Row`s 的集合。数据类型定义如下：

**排：**

```
template <typename Index>
class Row {
public:

    Row()
    {
        _index_vector = std::vector<Index, aligned_allocator<Index> > ();
    }

    Row& operator=( const Row& source )
    {
        //some copy logic here
        return *this;
    }

private:
    std::vector<Index, aligned_allocator<Index> >       _index_vector;
}; 
```

**矩阵：**

```
template <typename Index>
class Matrix {
public:
    typedef std::vector<Row<Index> > Rep;

    Matrix () : _m (0), _n (0)
    {}

    Matrix (size_t n, size_t m) :
            _m (m),
            _n (n)
    {
        _A = Rep (n);
    }

private:
    Rep     _A;
    size_t      _m;
    size_t      _n;
}; 
```

`Row`数据类型使用分配器**，**主要功能有：

```
template <class T>
class aligned_allocator
{
public:
       //Other methods; members...

    pointer allocate ( size_type size, const_pointer *hint = 0 ) {
        pointer p;
        posix_memalign((void**)&p, 16, size * sizeof (T));

        return p;
    };

    void construct ( pointer p, const T& value ) {
        *p=value;
    };

    void destroy ( pointer p ) {
        p->~T();
    };

    void deallocate ( pointer p, size_type num ) {
        free(p);
    };
}; 
```

我使用这个简单的程序来测试代码：

```
#include "types.h"

int main(int argc, char **argv)
{
    Matrix<int> AA (100, 100);
} 
```

当我在没有 的情况下编译它时`-std=c++0x`，它编译时没有任何错误。但是，当`-std=c++0x`启用时，我收到以下错误：

```
error: invalid operands to binary expression ('_Tp_alloc_type'
      (aka 'aligned_allocator<int>') and '_Tp_alloc_type')
        if (__x._M_get_Tp_allocator() == this->_M_get_Tp_allocator())

./types.h:26:17: note: in instantiation of member function 'std::vector<int, aligned_allocator<int> >::operator=' requested here
                _index_vector = std::vector<Index, aligned_allocator<Index> > (); 
```

这可能是什么原因？以及可能的修复/解决方法。我正在使用`gcc version 4.7.2`和`clang version 3.1`。

*（对不起，冗长的代码。）*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T23:31:44.423

错误消息实际上包含提示。我在这里稍微重新表述了一下：

> 错误：无效操作数 [类型`aligned_allocator<int>`] 到二进制表达式 […]`__x._M_get_Tp_allocator() == this->_M_get_Tp_allocator()`

换句话说，您的分配器类型需要提供一个`operator ==`.

这是分配器要求的一部分（§17.6.3.5，表 28）。情况一直如此。但是直到 C++11 分配器是无状态的，`operator ==`因此总是返回`true`，所以标准库容器可能永远不会调用操作符。这可以解释为什么代码在没有`-std=++0x`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T23:29:54.350

看起来它希望aligned_allocator<> 具有运算符==()。

# windows - 推送通知、Uri 通道和 PHP 服务器端

> ID：16126139
> 
> 赞同：2
> 
> 时间：2013-04-20T23:06:17.380
> 
> 标签：windows, windows-phone-7, push-notification, mpns

我正在尝试使用 WP7.1 中的推送通知。我创建了类和一些 php 类。该示例适用于所有通知类型，但我的问题是 UriChannel。通过我的简单示例，我必须在 php 代码中手动编写 URI 通道。

*   安装我的应用程序的所有设备的 uri 通道是否唯一？

*   如何将 Uri Channel 发送到我的服务器？

谢谢。

这是我的代码：

```
/// Holds the push channel that is created or found.
    HttpNotificationChannel pushChannel;
    // The name of our push channel.
    string channelName = "LiveTileChannel";

    // Costruttore
    public MainPage()
    {
        InitializeComponent();
        CreatePushChannel();
    }

    private void CreatePushChannel()
    {
        // Try to find the push channel.
        pushChannel = HttpNotificationChannel.Find(channelName);

        // If the channel was not found, then create a new connection to the push service.
        if (pushChannel == null)
        {
            pushChannel = new HttpNotificationChannel(channelName);

            // Register for all the events before attempting to open the channel.
            pushChannel.ChannelUriUpdated += new EventHandler<NotificationChannelUriEventArgs>(PushChannel_ChannelUriUpdated);
            pushChannel.ErrorOccurred += new EventHandler<NotificationChannelErrorEventArgs>(PushChannel_ErrorOccurred);
            pushChannel.ShellToastNotificationReceived += new EventHandler<NotificationEventArgs>(PushChannel_ShellToastNotificationReceived);
            pushChannel.HttpNotificationReceived += new EventHandler<HttpNotificationEventArgs>(pushChannel_HttpNotificationReceived);
            pushChannel.Open();
            // Bind this new channel for Tile events.
            pushChannel.BindToShellTile();
            pushChannel.BindToShellToast();
            connessioneTxt.Text = "Connessione avvenuta";
        }
        else
        {
            // The channel was already open, so just register for all the events.
            pushChannel.ChannelUriUpdated += new EventHandler<NotificationChannelUriEventArgs>(PushChannel_ChannelUriUpdated);
            pushChannel.ErrorOccurred += new EventHandler<NotificationChannelErrorEventArgs>(PushChannel_ErrorOccurred);
            pushChannel.ShellToastNotificationReceived += new EventHandler<NotificationEventArgs>(PushChannel_ShellToastNotificationReceived);
            pushChannel.HttpNotificationReceived += new EventHandler<HttpNotificationEventArgs>(pushChannel_HttpNotificationReceived);
            // Display the URI for testing purposes. Normally, the URI would be passed back to your web service at this point.
            System.Diagnostics.Debug.WriteLine(pushChannel.ChannelUri.ToString());
            uriTxt.Text=pushChannel.ChannelUri.ToString();
            connessioneTxt.Text = "Connessione già avvenuta";
        }
    }

    void pushChannel_HttpNotificationReceived(object sender, HttpNotificationEventArgs e)
    {
        string message;

        using (System.IO.StreamReader reader = new System.IO.StreamReader(e.Notification.Body))
        {
            message = reader.ReadToEnd();
        }

        Dispatcher.BeginInvoke(() => rawTxt.Text = String.Format("Received Notification {0}:\n{1}",
                DateTime.Now.ToShortTimeString(), message)
                );

    }

    /// Event handler for when the Push Channel Uri changes.     
    void PushChannel_ChannelUriUpdated(object sender, NotificationChannelUriEventArgs e)
    {

        Dispatcher.BeginInvoke(() =>
        {
            // Display the new URI for testing purposes. Normally, the URI would be passed back to your web service at this point.
            System.Diagnostics.Debug.WriteLine(e.ChannelUri.ToString());
            uriTxt.Text = pushChannel.ChannelUri.ToString();
        });
    }

    // Event handler for when a Push Notification error occurs.   
    void PushChannel_ErrorOccurred(object sender, NotificationChannelErrorEventArgs e)
    {
        // Error handling logic for your particular application would be here.
        Dispatcher.BeginInvoke(() =>
            MessageBox.Show(String.Format("A push notification {0} error occurred.  {1} ({2}) {3}", e.ErrorType, e.Message, e.ErrorCode, e.ErrorAdditionalData)));
    }

    void PushChannel_ShellToastNotificationReceived(object sender, NotificationEventArgs e)
    {
        System.Diagnostics.Debug.WriteLine("notifica aperta");
    }

} 
```

还有一个树 php 示例：

[PHP的Pastebin](http://pastebin.com/ztphE6iU)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:59:37.710

对于安装了您的应用程序的每个设备，URI 通道都是唯一的。它对于每个设备必须是唯一的，因为这就是告诉 MPN 服务将通知发送到哪个设备的原因。它与 Apple 推送通知的设备令牌和谷歌云消息传递的注册 ID 的用途相同。

您可以通过向您的服务器发送一些 HTTP GET 或 POST 请求将 URI 通道发送到您的服务器，并将 URI Chnnael 作为输入参数。

以下是从[MSDN](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202940%28v=vs.105%29.aspx)获取的一些与服务器通信的指南：

> 每次您的应用程序启动时，您应该将 URI 从您的推送通道传递到发送推送通知的云服务。还建议您将设备 ID 传递给云服务，以便云服务可以跟踪 URI 分配给哪些设备。如果 URI 发生更改，则云服务可以替换该设备 ID 的旧 URI。Windows Phone 不提供执行此操作的框架，因为在大多数情况下，应用程序和云服务已经有自己的协议，它们用于相互通信。
> 
> 与云服务通信的最佳实践包括：
> 
> 该应用程序应通过其相应的云服务进行身份验证。
> 
> 应用程序应在将 URI 发送到其相应的云服务之前对其通知通道 URI 进行加密。
> 
> 如果您的云服务将使用 Windows Phone OS 7.0 中不存在的通知属性，那么您应该将操作系统版本信息传递给您的云服务，以便云服务可以正确降级 Windows Phone OS 7.0 客户端的通知。
> 
> 云服务应验证从其相应应用程序接收到的通知通道 URI 并以安全方式存储它。
> 
> 从应用程序启动会话时，应始终将通知通道 URI 发送到其相应的云服务。
> 
> 云服务应该有一个状态码，它可以发送到相应的应用程序，这将触发应用程序创建一个新的通知通道 URI。

# apache - 虚拟子文件夹的多语言站点 (Apache)

> ID：16126146
> 
> 赞同：1
> 
> 时间：2013-04-20T23:06:41.277
> 
> 标签：apache, url-rewriting, multilingual, virtualhost, subdirectory

我想在多语言网站上拥有这样的架构：

> www.mydomain.tld/en/mypage
> www.mydomain.tld/fr/mypage

我有多个这样的重写规则：

> RewriteRule ^mypage$ mypage.php [L]
> RewriteRule ^mypage2$ mypage2.php [L]

如何在 RewriteRule ^*$ *.php?language=en|fr [L] 中执行转换 /en/* 或 /fr/* 的“前缀规则”？

我尝试使用不同的组合但没有成功：

> RewriteRule !^(fr|en)/ /fr%{REQUEST_URI} [L,R=301]
> RewriteRule ^(fr|en)/ %{REQUEST_URI}?language=$1 [L,R=301]

一个想法如何做到这一点？

--对不起我的英语我是法国人。

谢谢你的帮助。

# svn - 从 Branch 到 Trunk 的持续合并

> ID：16126148
> 
> 赞同：0
> 
> 时间：2013-04-20T23:07:07.223
> 
> 标签：svn, merge, tortoisesvn, branch, trunk

如果我要在我想要定期从主干合并到分支*以及*分支到主干的情况下使用 Tortoise-SVN，我应该如何做后者？

我遇到的“分支到主干”教程使用“重新集成分支”命令，但他们只执行一次。当我第二次尝试这样做时，我会遇到意想不到的冲突。

但是，如果我使用“合并一系列修订”命令，我可以多次从分支合并回主干。

[文档](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-merge.html)说重新集成的分支现在没用了，我想这可以解释我遇到的意外冲突。但是，如果使用“合并一系列修订”允许多个从分支到主干的合并，为什么要使用不会的“重新集成分支”呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:20:55.577

1.  使用 SVN 1.7.x，您可以（根据文档）`--reintegrate`不止一次。对于 1.6 和早期重新集成只能执行一次
2.  *对于支持 mergeinfo* (1.6+) 的SVN，“同步合并”可能不使用 rev-range - 以前的合并写在同一修订版的 mergeinfo 中，**不会**再次合并（除了中间合并子树的情况，其中合并变得疯狂检测范围）
3.  使用特殊前提条件执行重新集成合并，这将节点之间的差异减少到*仅由合并源引入*（对于巨大的差异和复杂的变化，它可能是巨大的优势）

# java - Ksoap 响应为空，但带有正确信息的 Web 服务响应

> ID：16126150
> 
> 赞同：0
> 
> 时间：2013-04-20T23:07:19.273
> 
> 标签：java, android, jax-ws, ksoap

我在 JAX-WS 上有一个 web 服务，当我从 web 请求时，webservice 可以完美运行，但是当我从 android 请求时，服务返回 null。

这是 WSDL

```
<definitions xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:wsp1_2="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="address_example" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.xmlsoap.org/wsdl/" targetNamespace="address_example" name="Gate">
<types>
<xsd:schema>
<xsd:import namespace="http://jaxb.dev.java.net/array" schemaLocation="address_example:4225/MobilePlatea/Gate?xsd=1"/>
</xsd:schema>
<xsd:schema>
<xsd:import namespace="address_example" schemaLocation="address_example:4225/MobilePlatea/Gate?xsd=2"/>
</xsd:schema>
</types>
<message name="addUser">
<part name="parameters" element="tns:addUser"/>
</message>
<message name="addUserResponse">
<part name="parameters" element="tns:addUserResponse"/>
</message>
<message name="login">
<part name="parameters" element="tns:login"/>
</message>
<message name="loginResponse">
<part name="parameters" element="tns:loginResponse"/>
</message>
<message name="updatePasswd">
<part name="parameters" element="tns:updatePasswd"/>
</message>
<message name="updatePasswdResponse">
<part name="parameters" element="tns:updatePasswdResponse"/>
</message>
<message name="updUser">
<part name="parameters" element="tns:updUser"/>
</message>
<message name="updUserResponse">
<part name="parameters" element="tns:updUserResponse"/>
</message>
<message name="searchbyCoord">
<part name="parameters" element="tns:searchbyCoord"/>
</message>
<message name="searchbyCoordResponse">
<part name="parameters" element="tns:searchbyCoordResponse"/>
</message>
<message name="add_item">
<part name="parameters" element="tns:add_item"/>
</message>
<message name="add_itemResponse">
<part name="parameters" element="tns:add_itemResponse"/>
</message>
<message name="findByPosition">
<part name="parameters" element="tns:findByPosition"/>
</message>
<message name="findByPositionResponse">
<part name="parameters" element="tns:findByPositionResponse"/>
</message>
<message name="searchTops">
<part name="parameters" element="tns:searchTops"/>
</message>
<message name="searchTopsResponse">
<part name="parameters" element="tns:searchTopsResponse"/>
</message>
<message name="getProdinfo">
<part name="parameters" element="tns:getProdinfo"/>
</message>
<message name="getProdinfoResponse">
<part name="parameters" element="tns:getProdinfoResponse"/>
</message>
<message name="getProdRelated">
<part name="parameters" element="tns:getProdRelated"/>
</message>
<message name="getProdRelatedResponse">
<part name="parameters" element="tns:getProdRelatedResponse"/>
</message>
<message name="getProdImg">
<part name="parameters" element="tns:getProdImg"/>
</message>
<message name="getProdImgResponse">
<part name="parameters" element="tns:getProdImgResponse"/>
</message>
<message name="infoUserSel">
<part name="parameters" element="tns:infoUserSel"/>
</message>
<message name="infoUserSelResponse">
<part name="parameters" element="tns:infoUserSelResponse"/>
</message>
<message name="getInfoSearch">
<part name="parameters" element="tns:getInfoSearch"/>
</message>
<message name="getInfoSearchResponse">
<part name="parameters" element="tns:getInfoSearchResponse"/>
</message>
<portType name="Gate">
<operation name="addUser">
<input wsam:Action="address_exampleGate/addUserRequest" message="tns:addUser"/>
<output wsam:Action="address_exampleGate/addUserResponse" message="tns:addUserResponse"/>
</operation>
<operation name="login">
<input wsam:Action="address_exampleGate/loginRequest" message="tns:login"/>
<output wsam:Action="address_exampleGate/loginResponse" message="tns:loginResponse"/>
</operation>
<operation name="updatePasswd">
<input wsam:Action="address_exampleGate/updatePasswdRequest" message="tns:updatePasswd"/>
<output wsam:Action="address_exampleGate/updatePasswdResponse" message="tns:updatePasswdResponse"/>
</operation>
<operation name="updUser">
<input wsam:Action="address_exampleGate/updUserRequest" message="tns:updUser"/>
<output wsam:Action="address_exampleGate/updUserResponse" message="tns:updUserResponse"/>
</operation>
<operation name="searchbyCoord">
<input wsam:Action="address_exampleGate/searchbyCoordRequest" message="tns:searchbyCoord"/>
<output wsam:Action="address_exampleGate/searchbyCoordResponse" message="tns:searchbyCoordResponse"/>
</operation>
<operation name="add_item">
<input wsam:Action="address_exampleGate/add_itemRequest" message="tns:add_item"/>
<output wsam:Action="address_exampleGate/add_itemResponse" message="tns:add_itemResponse"/>
</operation>
<operation name="findByPosition">
<input wsam:Action="address_exampleGate/findByPositionRequest" message="tns:findByPosition"/>
<output wsam:Action="address_exampleGate/findByPositionResponse" message="tns:findByPositionResponse"/>
</operation>
<operation name="searchTops">
<input wsam:Action="address_exampleGate/searchTopsRequest" message="tns:searchTops"/>
<output wsam:Action="address_exampleGate/searchTopsResponse" message="tns:searchTopsResponse"/>
</operation>
<operation name="getProdinfo">
<input wsam:Action="address_exampleGate/getProdinfoRequest" message="tns:getProdinfo"/>
<output wsam:Action="address_exampleGate/getProdinfoResponse" message="tns:getProdinfoResponse"/>
</operation>
<operation name="getProdRelated">
<input wsam:Action="address_exampleGate/getProdRelatedRequest" message="tns:getProdRelated"/>
<output wsam:Action="address_exampleGate/getProdRelatedResponse" message="tns:getProdRelatedResponse"/>
</operation>
<operation name="getProdImg">
<input wsam:Action="address_exampleGate/getProdImgRequest" message="tns:getProdImg"/>
<output wsam:Action="address_exampleGate/getProdImgResponse" message="tns:getProdImgResponse"/>
</operation>
<operation name="infoUserSel">
<input wsam:Action="address_exampleGate/infoUserSelRequest" message="tns:infoUserSel"/>
<output wsam:Action="address_exampleGate/infoUserSelResponse" message="tns:infoUserSelResponse"/>
</operation>
<operation name="getInfoSearch">
<input wsam:Action="address_exampleGate/getInfoSearchRequest" message="tns:getInfoSearch"/>
<output wsam:Action="address_exampleGate/getInfoSearchResponse" message="tns:getInfoSearchResponse"/>
</operation>
</portType>
<binding name="GatePortBinding" type="tns:Gate">
<soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
<operation name="addUser">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="login">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="updatePasswd">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="updUser">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="searchbyCoord">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="add_item">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="findByPosition">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="searchTops">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="getProdinfo">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="getProdRelated">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="getProdImg">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="infoUserSel">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="getInfoSearch">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
</binding>
<service name="Gate">
<port name="GatePort" binding="tns:GatePortBinding">
<soap:address location="address_example:4225/MobilePlatea/Gate"/>
</port>
</service>
</definitions> 
```

这是代码

```
public void set_info(){
    ObjConexion object = new ObjConexion();

    SoapObject request = new SoapObject(object.NameSpace(), "getProdinfo");
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

    Bundle extras = getIntent().getExtras();

    PropertyInfo idPro =new PropertyInfo();
    idPro.setName("id");
    idPro.setValue(extras.getInt("id"));
    idPro.setType(Integer.class);
    request.addProperty(idPro);
    envelope.setOutputSoapObject(request);

    HttpTransportSE androidHttpTransport = new HttpTransportSE(object.Url());
    androidHttpTransport.debug = true;
    try {

        androidHttpTransport.call("getProdinfo", envelope);
        SoapPrimitive result = (SoapPrimitive)envelope.bodyIn;//this is null

    }catch (Exception e) {
        e.printStackTrace();
        Toast.makeText(this,e.getMessage().toString(),Toast.LENGTH_LONG).show();
    }

    setImages();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:27:43.103

问题出在 PropertyInfo 的 setValue 上，我将值放在整数上，显然必须在 String 上。

希望对某人有所帮助！

# c++ - 从 DoubleLinkedList 中删除重复项

> ID：16126160
> 
> 赞同：0
> 
> 时间：2013-04-20T23:08:45.383
> 
> 标签：c++

我正在尝试删除 C++ 中的重复项。我已经设法通过使用对象默认构造函数将对象设置为 = null。但我无法将其从列表中完全删除。此代码还删除了两个对象，而不仅仅是一个。这是另一个问题的重新发布。我的代码和部分我的帖子已经改变。[如何按全名从双向链表中删除重复项](https://stackoverflow.com/questions/16124663/how-to-remove-duplicates-from-a-doubly-linked-list-by-full-name/16124787#16124787)。谁能帮我这个？这是我的 removeDuplicates 函数：

```
***Remove Duplicates***
    void RemoveDuplicates(DoublyLinkedListIterator<Datatype> m_itr, string searchByFirstName, string searchBySecondName)
    {
        for (m_itr.Start(); m_itr.Valid(); m_itr.Forth())
            {
                if ((m_itr.Item().getFirstName() == searchByFirstName )
                          && (m_itr.Item().getSecondName() == searchBySecondName))
                {
                    for (m_itr.Item(); m_itr.Valid(); m_itr.Forth())
                    {
                        if ((m_itr.Item().getFirstName() == searchByFirstName )&&
                            (m_itr.Item().getSecondName() == searchBySecondName))
                                {
                                    m_itr.Item() = Stats();
                                }
                    }
                }
            }
        delete m_itr.Item();
    }
***Remove***
    void Remove(DoublyLinkedListIterator<Datatype> m_itr)
        {
            query.clock1();
            DoublyLinkedListNode<Datatype>* node = m_head;
            //Check to see if the iterator belongs to this list, if not return nothing.
            if (m_itr.m_list != this)
                return;
            //Check to see if the node is valid, if not return nothing.
            if (m_itr.m_node == 0)
                return;
            //If the iterator is pointing to the head...
            if (m_itr.m_node == m_head)
            {
                //Move the iterator forward.
                m_itr.Forth();
                //Delete the head.
                RemoveHead();
                //Decrement the size.
                m_count--;
            }
            //If the iterator is not pointing to the head...
            else
            {
                //Search forward through the list until you find
                //the node prior to the node you want to remove.
                while (node->m_next != m_itr.m_node)
                node = node->m_next;
                // move the iterator forward.
                m_itr.Forth();
                //If the node being are deleted is the tail...
                //Then update the tail node.
                if (node->m_next == m_tail)
                {
                    //Tail is now equal to node.  Which means we can now delete the node.
                    m_tail = node;
                }
                //Delete the node.
                delete node -> m_next;
                //Relink the list.
                node -> m_next = m_itr.m_node;
                //Decrement the count because a node was removed.
                m_count--;
                query.clock2();
                cout << "\nTime Taken : " << query.time2 - query.time1 << "\n";
            }
        }

***Class Declarations***
template <class Datatype>
class DoublyLinkedList
{   
public:
//-------------------------------------------------------------------------------------------
//  Member Vairables.
//-------------------------------------------------------------------------------------------
DoublyLinkedListNode<Datatype>* m_head;
DoublyLinkedListNode<Datatype>* m_tail;
int m_count;

template<class Datatype>
class DoublyLinkedListNode
{
public:
//-------------------------------------------------------------------------------------------
//  Member Vairables.
//-------------------------------------------------------------------------------------------
    DoublyLinkedListNode<Datatype>* m_next; //The next node.
    DoublyLinkedListNode<Datatype>* m_prev; //The previous node.
    Datatype m_data;                        //The data in the node.

template <class Datatype>
class DoublyLinkedListIterator
{
public:
//-------------------------------------------------------------------------------------------
//  Member Vairables.
//-------------------------------------------------------------------------------------------
    DoublyLinkedListNode<Datatype>* m_node; //A node for the Iterator to pointn to.
    DoublyLinkedList<Datatype>* m_list;     //A list for the Iteraotor to go through.
//-------------------------------------------------------------------------------------------
//  Name:           Constructor.
//  Description:    Constructs the DoublyLinkedListIterator.
//-------------------------------------------------------------------------------------------
    DoublyLinkedListIterator(DoublyLinkedList<Datatype>* p_list= 0, DoublyLinkedListNode<Datatype>* p_node= 0)
    {
        m_list= p_list;
        m_node= p_node;
    }

// ------------------------------------------------------------------
//  Name:           Start
//  Description:    Resets the iterator to the beginning of the list.
//  Arguments:      None.
//  Return Value:   None.
// ------------------------------------------------------------------
    void Start()
    {
        if(m_list!= 0)
        m_node= m_list -> m_head;
    }

// ----------------------------------------------------------------
//  Name:           End
//  Description:    Resets the iterator to the end of the list.
//  Arguments:      None.
//  Return Value:   None.
// ----------------------------------------------------------------
    void End()
    {
        if(m_list!= 0)
        m_node = m_list->m_tail;
    }

// ----------------------------------------------------------------
//  Name:           Forth
//  Description:    Moves the iterator forward by one position.
//  Arguments:      None.
//  Return Value:   None.
// ----------------------------------------------------------------
    void Forth()
    {
        if(m_node != 0)
        {
        m_node = m_node ->m_next;
        }
    }

// ----------------------------------------------------------------
//  Name:           Back
//  Description:    Moves the iterator back by one position.
//  Arguments:      None.
//  Return Value:   None.
// ----------------------------------------------------------------
    void Back()
    {
        if(m_node!= 0)
        m_node = m_node->m_prev;
    }

// ----------------------------------------------------------------
//  Name:           Item
//  Description:    Gets the item that the iterator is pointing to.
//  Arguments:      None.
//  Return Value:   Reference to the data in the node.
// ----------------------------------------------------------------
    Datatype& Item()
    {
        return m_node->m_data;
    }
//-----------------------------------------------------------------
//  Name:           Valid
//  Description:    Determines if the node is valid.
//  Arguments:      None.
//  Return Value:   true if valid.
// ----------------------------------------------------------------
    bool Valid()
    {
        return (m_node!= 0);
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T23:17:45.550

使用 DoublyLinkedList 的内置 Remove 函数并将其传递给迭代器。**delete**调用是简单的C++ 变体，它不处理节点的删除和正确重新链接列表。**删除**的调用只删除节点中的内容，而不是节点本身！

```
Remove(m_itr); 
```

代替

```
delete m_itr.Item(); 
```

另外，我认为您删除的位置可能已关闭（您似乎总是会删除最后一项）。也许你想做下面的事情。不确定 Stats() 是做什么的，但希望你能明白。基本上你需要收起要删除的项目，向前推进常规迭代器，然后删除你收起的那个。或者，在移除完成后完全停止迭代。这是必需的，因为当迭代器被删除时，它不能用于进一步的迭代。

```
 if ((m_itr.Item().getFirstName() == searchByFirstName ) &&
        (m_itr.Item().getSecondName() == searchBySecondName))
    {
      DoublyLinkedListIterator<Datatype> toDelete = m_itr; 
      m_itr.Forth(); 
      Remove(toDelete);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T23:33:49.147

内部 for 循环没有为您做任何事情：它只是继续由外部循环开始的迭代。

这里有很多问题，我猜你正在学习，我为你的努力鼓掌：很适合你伸出援手。

```
void RemoveDuplicates(DoublyLinkedListIterator<Datatype> m_itr, string searchByFirstName, string searchBySecondName)
{
    for (m_itr.Start(); m_itr.Valid(); m_itr.Forth())
        {
            if ((m_itr.Item().getFirstName() == searchByFirstName )&& (m_itr.Item().getSecondName() == searchBySecondName))
            {
                    if ((m_itr.Item().getFirstName() == searchByFirstName )&&
                        (m_itr.Item().getSecondName() == searchBySecondName))
                            {
                                m_itr.Item() = Stats();
                            }
                }
        }
    delete m_itr.Item();
} 
```

将项目分配给统计数据也可能不是您想要的：您想要删除项目，然后从列表中删除该条目。我需要查看迭代器和双向链表的 api，但您需要删除该项目，并将其从列表中删除，可能涉及以下内容：

```
 m_itr.Item().m_prev.m_next = m_itr.Item().m_next;
              if (m_itr.Item().m_next != null)
                m_itr.Item().m_next.m_prev = m_itr.Item().m_prev;
              // now that the item is spliced out of the list, delete it. 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T23:22:07.187

我对您正在使用的库一无所知，但在标准库中，随手删除是这样的：

```
for (auto i = begin(list); i != end(list);) {
    if (dont_want(*i)) {
        i = list.erase(i);
    } else {
        ++i;
    }
} 
```

基本思想是，在循环内部，要么您正在擦除当前节点，并且`list.erase(…)`在它擦除当前节点后通知您从哪个节点继续迭代，或者您保留该节点，在这种情况下您只需增加迭代器即可越过它。

在您的代码中，等效于`++i`is`m_itr.Forth()`和`list.erase(…)`is `Remove(…)`。然而，由于`Remove()`没有返回任何关于如何在列表中继续前进的信息，你会被卡住；您无法调用`m_itr.Forth()`，因为它指向的节点不再存在。

我不知道我可以进一步帮助你，因为我很难理解你的代码是如何工作的。该表达式`m_itr.Item().getFirstName()`意味着`m_itr.Item()`是对对象的引用，而`delete m_itr.Item()`意味着它必须是指针，而不是引用。

请注意，上述代码符合 C++11。C++03 等价物是：

```
for (std::list<Datatype>::iterator i = list.begin(); i != list.end();) { … } 
```

# box2d - 将 JBox2D 库导入新项目

> ID：16126163
> 
> 赞同：0
> 
> 时间：2013-04-20T23:08:57.520
> 
> 标签：box2d, jbox2d

我想将 JBox2D 库导入一个新项目，我不熟悉使用外部库，所以我的怀疑看起来真的很愚蠢，但是哦，这就是你学习的方式。

所以我有点遵循 JBox2D 网站上的教程，我做到了这一点：

![在此处输入图像描述](https://i.stack.imgur.com/GWfI5.png)

你可以看到我有 JBox2D 主干（我不太明白什么是主干......）我相信它们都是 Maven 项目，我的目标是能够在你可以看到打开的 PhysicTest 项目中使用引擎的库。

（可能是愚蠢的）我试图导入你在图像中看到的并且它不起作用，所以我请求你的帮助来解决一个对我来说并不那么简单的简单问题^^

感谢您的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T20:10:55.537

您需要将这些项目导入到您的项目中。转到您的项目属性、构建路径，然后单击库选项卡。在那里，您可以将 jbox2d 库添加到您的 PhysicTest 项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-29T00:04:37.857

首先，对不起我的英语。我遇到了同样的问题，但没有找到答案。我做了以下工作来让它工作：

1.  从 git 下载 jbox2D

2.  将 jbox2D 作为 maven 项目导入 Eclipse

3.  导入完成后，可以测试名为jbox2d-testbed的项目，右键，作为Java应用程序运行，选择TestebedMain

4.  现在右键单击 jbox2D-library 项目，选择 Maven，然后安装。这将生成一个位于目标文件夹中的 .jar 文件

5.  现在创建一个新的 Java 项目并导入这个 .jar 文件并使用 jbox2D 库

# css - 可扩展 Web 应用的 CSS3 媒体查询应该放在哪里？

> ID：16126166
> 
> 赞同：0
> 
> 时间：2013-04-20T23:09:23.500
> 
> 标签：css, less, media-queries

目前我已经创建了一个名为 .media-queries.css 的文件来存放我所有的媒体查询和我网站上的各种断点（5 个断点）；然而，事实证明这对后端来说是一种痛苦。为了特定于 CSS，我不得不在这些媒体查询中复制我的网站结构。这种方法似乎不可扩展。我是否最好将媒体查询直接烘焙到该特定选择器所在的实际 CSS 中？

有哪些替代方法和设计模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:16:23.177

您可以跟随 Bootstrap 和 Foundation 等伟大思想的领导，将所有内容合并到同一个文件中。维护会更容易，并且站点性能会略有改善。完全跑题了，但我发现使用[http://lesscss.org](http://lesscss.org)确实有助于保持 CSS 井井有条。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-12T16:22:08.980

根据我的经验，**将相关样式放在一起效果最好**。

这是一个实际的例子：

```
/** Header's styles and media queries */
.header {
  ...
}
@media screen and (max-width: 1024px) {
  .header { ... }
}
@media screen and (max-width: 720px) {
  .header { ... }
}

/** Nav's styles and media queries */
.nav {
  ...
}
@media screen and (max-width: 1024px) {
  .nav { ... }
}
@media screen and (max-width: 720px) {
  .nav { ... }
}

/** ... and so on */ 
```

这是[另一个类似的 StackOverflow 线程](https://stackoverflow.com/a/43374610/1333836)，可能会给您更多的见解。

如果你对更多细节感兴趣，你也可以[阅读我的博客文章](https://medium.com/@superKalo/journey-to-highly-effective-and-maintainable-css-media-queries-876e5b92f918)，我在这里分享我的经验、我一直在努力的事情以及我知道的一些想法 :-)

# facebook - 如何在 PHP 中从某人的 Facebook 个人资料中获取数据

> ID：16126170
> 
> 赞同：0
> 
> 时间：2013-04-20T23:10:09.197
> 
> 标签：facebook

我是 PHP 的绝对初学者，但我正在考虑一种可以赚钱的方法。我想知道我是否可以从某人的 Facebook 获取数据？例如，我说有人去这里：[http](http://site.com/script.php) : //site.com/script.php，在 script.php 里面会有这样的代码：

```
$yes = include("http://facebook.com");
print $yes; 
```

但我会修改一些 HTML 以使源输出不可见，然后使用一些常规表达式我会得到我想要的数据并将它们记录在一个 txt 文件中。或者也许使用 iFrame ，我不知道。但是我可以通过这种方式获取数据吗？这行得通吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:02:43.447

我建议您使用 Graph API 以一种简单的方式进行操作。检查它[https://developers.facebook.com/docs/reference/api/selecting-results/](https://developers.facebook.com/docs/reference/api/selecting-results/)

# r - 为什么在多位实数上执行大型任务时 R 不准确？

> ID：16126171
> 
> 赞同：0
> 
> 时间：2013-04-20T23:10:16.050
> 
> 标签：r

我在 RStudio 版本 0.97.336 中使用 R 版本 2.15.3 (2013-03-01) - Xubuntu 12.10 3.8.8-030808-generic 上的“安全毯”。

我编写了一个算法，它为 Project Euler 的第五个问题提供了一个通用的解决方案：

“2520 是可以除以 1 到 10 的每个数字而没有任何余数的最小数字。

可以被 1 到 20 的所有数字整除的最小正数是多少？”（[http://projecteuler.net/problem=5](http://projecteuler.net/problem=5)）？

程序不断发现 min=116396280，而答案是 232792560(2*116396280)。单击我们的测试向量会显示 test[16]=7274767.5，但是，手动输入`test[16]`会返回 7274768。此外，当手动输入时，应该`identical(test,floor(test))`返回。`FALSE`为什么当 R 经历这些循环时它忽略了这个事实`7274767.5!=floor(7274767.5)`？

```
pe5<-function(n){
  p<-c()
  for(x in 1:n){
    while(x!=1){
      y<-2
      z<-0
      while(x!=z){
        z<-x/y
        if(z==floor(z)){
          x<-z
          p<-append(p,y)
        }else{
          y<-y+1
        }
      }
    }
  }
  min<-0
  test<-rep(0,n)
  x<-2520
  while(min==0){
    for(i in unique(p)){
      test[i]<-x/i
    }
    if(identical(test,floor(test))==TRUE){
      min<-x
    }else{
      x<-x+2520      
    }
  }
  print(min)
}
pe5(20) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:48:12.750

> 为什么当 R 经历这些循环时它忽略了这个事实`7274767.5!=floor(7274767.5)`？

它没有。你永远不会让它在这些循环中检查。

让我们看看你的代码做了什么：

```
p<-c()
for(x in 1:n){
  while(x!=1){
    y<-2
    z<-0
    while(x!=z){
      z<-x/y
      if(z==floor(z)){
        x<-z
        p<-append(p,y)
      }else{
        y<-y+1
      }
    }
  }
} 
```

对于从 1 到`n`您的每个数字，您将其素因数附加到`p`（最初为空），每个数字与它在素因数分解中出现的频率一样多。

所以在那之后，`p`包含所有的素数`<= n`，其中一些是多次的（我想，我不知道 R，所以我不能 100% 确定它`append()`会做我认为的事情），素数大于`n/2`一次。

```
for(i in unique(p)){
  test[i]<-x/i
}
if(identical(test,floor(test))==TRUE){
  min<-x
}else{
  x<-x+2520      
} 
```

对于 中列出的每个素数`p`，您检查当前候选是否`x`是它的倍数。如果它不是其中一个素数的倍数，则增加`x`2520。

由于 2520 已经可以被所有正整数整除`<= 10`，因此您实际上是在检查 2520 的倍数是否也可以被 11、13、17 和 19 整除。

现在，对于素数`π > 10`，`k*2520`是`π`当且仅当`k`是 的倍数时的倍数`π`，所以你计算的是

```
2520*11*13*17*19 = 2³ * 3² * 5 * 7 * 11 * 13 * 17 * 19 
```

你从来没有在你的算法中真正考虑过素数，所以你总是得到`2520 * product of the primes > 10 in the range`. 对于上限 20，唯一能被`< 10`比 2520 更高的素数（或素数的平方`> 10`）整除的数字是 16，所以这是你唯一的“失败案例”。

如果你用更大的界限来测试它会更明显，因为`n = 25`你会得到一个太小的结果`2*5`[2 from 16, and one 5 from `25 = 5²`]，因为`n = 27`结果太小了一个因素`2*3*5`[也是来自`27 = 3³`]的3。

您需要找到每个素数不超过 的最高幂`n`，结果是这些素数幂的乘积。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T09:18:54.093

正如所承诺的，虽然有点延迟，但这是一个可行的解决方案。我追求的是程序的效率，而不是编码，但我敢打赌，有一种更短的方法可以编写更高效的脚本（请随时在这方面提出建议或发布您自己的解决方案）。我还编码，如果我错了，请纠正我，我的第一个人工智能进入这个程序。

```
n<-500
if(!exists("primeslist",mode="numeric")){
    primeslist<-(2)
  }
  q<-matrix(rep(NA,n*floor(log(n,2))),n,floor(log(n,2)))
  for(i in 2:n){
    j<-1
    x<-as.numeric(i)
    while(x!=1){
      k<-1
      y<-primeslist[k]
      z<-1
      while(x!=z){
        z<-x/y
        if(z==floor(z)){
          x<-z
          q[i,j]<-y
          j<-j+1
          if(y>tail(primeslist, 1)){
            primeslist<-append(primeslist, y)
          }
        }else{
          if(tail(primeslist, 1)>y){
            k<-k+1
            y<-primeslist[k]
          }else{
            y<-y+1
          } 
        }
      }
    }
  }
  t<-unique(as.vector(q))
  t<-t[!is.na(t)]
  padicmat<-matrix(rep(0, n*3),n,3)
  padicmat[,1]<-1:n
  for(i in t){
    padicrow<-rep(NA,n)
    for(j in 1:n){
      padicrow[j]<-length(which(q[j,]==as.numeric(i)))
    }
    padicmat[i,2]<-max(padicrow)
  }
padicmat[,3]<-padicmat[,1]^padicmat[,2]
result<-prod(padicmat[,3])
result 
```

# html - How convert an image in a code understood by browsers

> ID：16126175
> 
> 赞同：1
> 
> 时间：2013-04-20T23:10:43.080
> 
> 标签：html, image, embed

I would like to convert an entire image into it hex code for example and them embed it into an html document for display.

I know it can be done with vectors (svg for example), the problem is that they don't look that good for a photo.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:12:19.947

那么base64呢？

您可以使用在线转换器，例如[http://webcodertools.com/imagetobase64converter](http://webcodertools.com/imagetobase64converter)

# xcode - 仅在模拟器中发生的随机 StringByReplacingOccurances 字符串错误

> ID：16126182
> 
> 赞同：3
> 
> 时间：2013-04-20T23:11:31.943
> 
> 标签：xcode, exception, void

所以我有这个奇怪的错误。我一整天都能够毫无问题地调试我的应用程序，但是即使我没有更改任何内容，也会突然出现这个奇怪的错误消息......

2013-04-21 01:06:26.617 Schema REVAMP [4874:907] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** -[__NSCFString stringByReplacingOccurrencesOfString:withString:options:range:]: nil argument' *** First throw call stack: (0x3131f2a3 0x38fc497f 0x3131f1c5 0x31b8c9b5 0x31b8c95d 0x6765 0x58c3 0x3318e311 0x3319a79b 0x3319a4c1 0x3316b4e9 0x3312a803 0x32ed4d8b 0x32ed4929 0x32f037cf 0x331d40e9 0x331d32d5 0x331d24a7 0x331d2431 0x33308309 0x33190691 0x331903d5 0x3318fd3b 0x33186eab 0x33182aed 0x331c41e9 0x3318783f 0x3317f84b 0x33127c39 0x331276cd 0x3312711b 0x34e2a5a3 0x34e2a1d3 0x312f4173 0x312f4117 0x312f2f99 0x31265ebd 0x31265d49 0x3317e485 0x3317b301 0x54cd 0x393fbb20) libc+ +abi.dylib: 终止调用抛出异常 (lldb)

我发生错误的空白：

```
- (void) loadSchema {

    NSURL *scriptUrl = [NSURL URLWithString:@"http://schemaappen.se/plist/risbergska.plist"];
    NSData *data = [NSData dataWithContentsOfURL:scriptUrl];
    if (data)
        NSLog(@"Device is connected to the internet");
    else{
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Ingen internetanslutning" message:@"Försök igen senare" delegate:self cancelButtonTitle:@"Okej" otherButtonTitles: nil];
        [alert show];
    }

    NSDateFormatter *f = [[NSDateFormatter alloc] init];
    [f setDateFormat:@"EEEE"];
    NSString *string = [f stringFromDate:[NSDate date]];

    unique = string;

    if ([unique isEqualToString:@"måndag"] || [unique isEqualToString:@"Monday"]) {
        dagen = @"1";
    }
    if ([unique isEqualToString:@"tisdag"] || [unique isEqualToString:@"Tuesday"]) {
        dagen = @"2";

    }
    if ([unique isEqualToString:@"onsdag"] || [unique isEqualToString:@"Wednesday"]) {
        dagen = @"4";
    }
    if ([unique isEqualToString:@"torsdag"] || [unique isEqualToString:@"Thursday"]) {
        dagen = @"8";
    }
    if ([unique isEqualToString:@"fredag"] || [unique isEqualToString:@"Friday"]) {
        dagen = @"16";
    }
    if ([unique isEqualToString:@"lördag"] || [unique isEqualToString:@"Saturday"]) {
        dagen = @"1";
    }
    if ([unique isEqualToString:@"söndag"] || [unique isEqualToString:@"Sunday"]) {
        dagen = @"1";
    }

    urlString = [[NSUserDefaults standardUserDefaults] valueForKey:@"SchemaURL"];

    NSRange rangeValue = [urlString rangeOfString:@"currentweek" options:NSCaseInsensitiveSearch];

    if (rangeValue.length > 0){
        weekURL = [urlString stringByReplacingOccurrencesOfString:@"currentweek" withString:weekNumber];
    }
    else {
        weekURL = urlString;
    }

    NSString *dayURL = [weekURL stringByReplacingOccurrencesOfString:@"dagen" withString:dagen];
    NSURL *url = [NSURL URLWithString:dayURL];
    NSURLRequest *req = [NSURLRequest requestWithURL:url];

    [webView loadRequest:req];

    [MBHUDView hudWithBody:@"Laddar schema..." type:MBAlertViewHUDTypeActivityIndicator hidesAfter:NO show:YES];

} 
```

如果我在我的设备上运行该应用程序而不通过 xcode 运行它，则该应用程序可以正常工作。没有一次崩溃。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T01:45:59.250

应用程序在模拟器中崩溃但不在设备上崩溃的一个可能原因是文件的大小写敏感访问。（模拟器区分大小写，设备不区分）

1) 我会检查**stringByReplacingOccurrencesOfString**使用的任何文件名是否区分大小写问题。

2）根据您的代码和给定的错误，我的第一个猜测是，**weakNumber**在某些时候为 nil 会导致崩溃。

# c# - How do i modify a field in a property

> ID：16126183
> 
> 赞同：0
> 
> 时间：2013-04-20T23:11:42.937
> 
> 标签：c#, properties, struct, field

How do i modify a field in a property that is a struct?

For example:

```
using System;
using System.Collections.Generic;

namespace ConsoleApplication1
{
    struct vector
    {
        public vector(int theX, int theY)
        {
            x = theX;
            y = theY;
        }
        public int x;
        public int y;
    }

    class SomeClass
    {
        public vector myVector { get; set; }
        public SomeClass()
        {
            myVector = new vector(10, 20);
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            SomeClass me = new SomeClass();
            me.myVector.x = 200; //Error

            Console.Read();
        }
    }
} 
```

If the vector was a class, then i would be able to modify it.

So my question is: How can i modify it if it was a struct?

So far, my solution would be setting my current vector to a new vector

for example (if i only wanted to modify the x value):

```
me.myVector = new vector(200,me.myVector.y); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T23:17:32.433

结构应该是不可变的。您不应该能够修改结构中的属性。修改的正确方法`myVector`是为属性分配一个新实例。

如果你想创建一个更方便的 API，我建议你这样设计你的结构：

```
public struct vector
{
    private readonly int x;
    private readonly int y;

    public vector(int theX, int theY)
    {
        x = theX;
        y = theY;
    }

    public int X { get { return this.x; } }
    public int Y { get { return this.y; } }

    public vector SetX(int x) 
    {
        return new vector(x, this.y);
    }

    public vector SetY(int y) 
    {
        return new vector(this.x, y);
    }
    .. other operations
}

me.myVector = me.myVector.SetX(200); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:18:32.770

结构通常应该代表以下两件事之一：

*   一个统一的实体，例如分数或时刻（例如 a`Decimal`或`Date`）。

*   用胶带粘在一起的一小部分固定的自变量集合，有时可以单独使用，有时可以作为一个组使用（例如 3d 点的坐标），并且除了它们包含的值之外没有任何标识（例如，任何`Point3d`具有值 [1,4,7] 等价于具有相同值的任何其他值）。

Microsoft 的指导原则适用于第一种类型的东西时很好，但是编写它们的人没有考虑到一些有用的概念比第一种模式更适合第二种模式。从事物的声音来看，您的数据类型符合第二种模式。因此，它应该将其整个状态公开为公共字段（您可以这样做）。此外，在许多情况下，如果可行，它应该作为`ref`参数传递。如果将暴露字段类作为`ref`参数传递，则接收者将能够像修改相应类型的单个变量一样容易地修改其字段。不幸的是，没有将属性公开为`ref`参数的机制。除非您编写自己的方法将结构传递为`ref`参数并使用它们而不是属性，您最好的选择可能是执行以下操作：

```
var temp = something.myVector;
temp.X += 200;
something.myVector = temp; 
```

另一种选择（如果有很多字段，这可能是有利`myVector`的）是有一个`someThing`类似的方法：

```
delegate void ActByRef<T1>(ref T1 p1);
delegate void ActByRef<T1>(ref T1 p1, ref T2 p2);

void modifyMyVector(ActByRef<myVector> actor) 
{
  actor(ref _myVector); // _myVector must be manual prop with backing field
}
void modifyMyVector<TX1>(ActByRef<myVector, TX1> actor, ref TX1 px1) 
{
  actor(ref _myVector, ref px1);
} 
```

想要添加 4 到`X`of的调用者`myVector`可以写

```
something.ModifyMyVector((ref myVector vec) => vec.X+=4;) 
```

如果调用者有一个`vector`被调用`velocity`并且它想添加一个垂直于它的向量，`something.myVector`它可以这样做：

```
something.ModifyMyVector((ref myVector vec, ref myVector vel) => 
  { vec.X += vel.Y; vec.Y -= vel.X; }, ref velocity); 
```

请注意，使用`ref`具有开放字段结构的参数可能非常有效，因为传递结构所需的时间`ref`与其大小无关。不幸的是，所有框架集合都没有内置任何此类工具，而 C# 并没有做太多使此类代码变得方便的工作。然而，即使使用`temp`变量的方法也比使用所谓的“不可变”结构或不可变类的代码更简洁、更有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T23:23:31.260

虽然之前所说的是真的——你*应该*让你的结构不可变——默认情况下它们不是这样的。你可以在你拥有的设置中改变一个结构。

我最初说你需要初始化你的结构，然后注意到它是。所以我回去重新评估这个问题，并意识到我的想法不对。

问题是值类型的语义。当你这样做

```
me.myVector 
```

您将获得结构值的副本，而不是对其的引用。然后随后尝试在同一行中修改该结构上的值是没有意义的。

下面的代码可能会使它更清晰：

```
static void Main(string[] args)
{
    SomeClass me = new SomeClass();
    //me.myVector.x = 200; //Error

    // Get a local copy of the struct, which is NOT a reference to the me.myVector variable.
    vector myVec = me.myVector;
    // Now mutate the value of the local struct
    myVec.x = 3;
    int xNew = myVec.x; // xNew = 3

    int xOld = me.myVector.x; // xOld still = 10

    Console.Read();
} 
```

因此，在此之后，这里是如何创建一个可变值类型，您的代码可以在其中工作（请注意，该`myVector`属性必须是可直接访问的字段，或者是您在`MutateStruct`调用中访问的具有支持字段的属性):

```
class SomeClass
{
    public vector myVector;
    public SomeClass()
    {
        myVector = new vector(10, 20);
    }

    public void MutateStruct(int newX)
    {
        myVector.x = newX;
    }
}

class Program
{
    static void Main(string[] args)
    {
        SomeClass me = new SomeClass();

        me.MutateStruct(200);
        int newerX = me.myVector.x; // newerX is now 200

        Console.Read();
    }
} 
```

# python - PyInstaller cannot find win32 API

> ID：16126184
> 
> 赞同：1
> 
> 时间：2013-04-20T23:11:48.907
> 
> 标签：python, pywin32, pyinstaller

I am trying to run `pyinstaller`, but I keep getting this:

```
Error: PyInstaller for Python 2.6+ on Windows needs pywin32.
Please install from http://sourceforge.net/projects/pywin32/ 
```

I have verified the existence of `pywin32`. I have also attempted to write the full path to `python.exe` to verify I was running the correct Python executable. What's wrong?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-01T19:52:41.027

想用我从我的经验中吸取的教训来补充上述信息。首先这里是[一个安全下载](http://sourceforge.net/projects/pywin32/files/pywin32/Build%20218/)最新 pywin32 的链接。其他一些链接无法通过我们的防火墙。

```
Error: PyInstaller for Python 2.6+ on Windows needs pywin32.
Please install from http://sourceforge.net/projects/pywin32/ 
```

以上错误是pywin32没有安装或者安装不正确的时候出现的。当安装了**错误版本**的 pywin32时**也会**发生这种情况。如果您在安装过程中没有看到最终的“**完成**”对话框和按钮，则它可能没有正确安装。您也可以使用 pip 创建一个新环境，并在该环境命令窗口中键入：

 ****```
python -c "import win32api" 
```

如果您没有收到任何错误，则说明安装已正确执行。在同一个 pip 窗口中并在安装 PyInstaller 之后尝试的下一件事是：

```
pyinstaller --version 
```

同样，如果您收到上述错误，那么您可能需要一个不同的版本。希望这对那里的人有所帮助，因为我花了几个小时试图弄清楚为什么 PyInstaller 不起作用并不断收到上述错误。pywin32 安装没有任何迹象表明安装失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T22:20:56.317

尝试安装 32 位版本而不是 64 位版本。这个对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T17:22:55.113

我找到了答案！我刚刚在 ActivePython 上安装了 CPython 2.7。你猜怎么着？有效！怪 ActivePython。

编辑：原来它更多。我在 64 位 CPython 之上安装了 32 位 ActivePython。哎呀。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-30T15:37:02.220

这出现在 pywin32-win64 上，不支持最新的 pyinstaller。我已经通过在我当前的 Windows 7 64 位状态上安装 pywin32-win32 来修复它。请确保根据注册表路径“HKLM\SOFTWARE\Python\PythonCore”下的当前 python 版本号修改所有版本号，例如 3.3 到 2.7。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T23:22:29.607

[从这里](http://sourceforge.net/projects/pywin32/files/pywin32/Build%20218/)为您的系统和 python 版本下载适当的版本

然后尝试手动安装或通过：

```
easy_install "path\to\file\pywin32-218.win-amd64-py3.4.exe" 
```

你可以导入pywin32吗？

确保 pywin32 安装不会产生任何错误，有时它很容易被忽略。

另外，如果这无济于事：您是否在 pyinstaller 中运行了 Configure.py？

有时也不是运行（Windows 是某种怪人）：

```
Configure.py 
```

尝试：

```
python Configure.py 
```

我希望它有帮助****

# java - 使用 catch 分配一个新的整数值

> ID：16126187
> 
> 赞同：0
> 
> 时间：2013-04-20T23:12:00.477
> 
> 标签：java, exception, try-catch, numberformatexception

我想从 TextField 设置文本值并转换为整数。当整数转换时，我想得到一个值（n）。如果未输入整数值，例如字符串或字符，如何创建异常以使整数 (n) 的默认值 = 3？

```
private void Game(){

int n = 0;

String getsize;     

getsize = size.getText();

//gets the text position and turns into integer
try{
    n = Integer.parseInt(getsize);
}

catch(NumberFormatException e){
    n = 3;
    e.printStackTrace();
}

...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T23:13:46.860

你可以改变你的线路

```
int n=0; 
```

至

```
int n = 3; 
```

这样，如果 try 块**在 之前或期间**`parseInt`失败，将`n`保持为 3。

# android - 适用于 Android 的 Dropbox Sync Api 中的奇怪错误

> ID：16126188
> 
> 赞同：1
> 
> 时间：2013-04-20T23:12:03.517
> 
> 标签：android, nullpointerexception, dropbox-api

我注意到，在某些设备上，我总是`NullPointerException`在打电话时得到`DbxAccountManager.getInstance`，但大多数时间和大多数设备上的代码都可以正常工作。

这是我基本上在做的事情：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_settings);

        //some initialization 

    mDbxAcctMgr = DbxAccountManager.getInstance(getApplicationContext(), appKey, appSecret);
} 
```

哪里`DbxAccountManager.getInstance`调用 Dropbox 的 Sync API SDK。

这是跟踪：

```
04-20 22:36:52.565: E/AndroidRuntime(551): Uncaught handler: thread main exiting due to uncaught exception
04-20 22:36:52.575: E/AndroidRuntime(551): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.nobeid.XXX/com.nobeid.XXX.Settings}: java.lang.NullPointerException
04-20 22:36:52.575: E/AndroidRuntime(551):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2401)
04-20 22:36:52.575: E/AndroidRuntime(551):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2417)
04-20 22:36:52.575: E/AndroidRuntime(551):  at android.app.ActivityThread.access$2100(ActivityThread.java:116)
04-20 22:36:52.575: E/AndroidRuntime(551):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1794)
04-20 22:36:52.575: E/AndroidRuntime(551):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-20 22:36:52.575: E/AndroidRuntime(551):  at android.os.Looper.loop(Looper.java:123)
04-20 22:36:52.575: E/AndroidRuntime(551):  at android.app.ActivityThread.main(ActivityThread.java:4203)
04-20 22:36:52.575: E/AndroidRuntime(551):  at java.lang.reflect.Method.invokeNative(Native Method)
04-20 22:36:52.575: E/AndroidRuntime(551):  at java.lang.reflect.Method.invoke(Method.java:521)
04-20 22:36:52.575: E/AndroidRuntime(551):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
04-20 22:36:52.575: E/AndroidRuntime(551):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:549)
04-20 22:36:52.575: E/AndroidRuntime(551):  at dalvik.system.NativeStart.main(Native Method)
04-20 22:36:52.575: E/AndroidRuntime(551): Caused by: java.lang.NullPointerException
04-20 22:36:52.575: E/AndroidRuntime(551):  at com.dropbox.sync.android.DbxAccountManager.validateAppContext(DbxAccountManager.java:432)
04-20 22:36:52.575: E/AndroidRuntime(551):  at com.dropbox.sync.android.DbxAccountManager.getInstance(DbxAccountManager.java:106)
04-20 22:36:52.575: E/AndroidRuntime(551):  at com.dropbox.sync.android.DbxAccountManager.getInstance(DbxAccountManager.java:99)
04-20 22:36:52.575: E/AndroidRuntime(551):  at com.nobeid.XXX.Settings.onCreate(Settings.java:198)
04-20 22:36:52.575: E/AndroidRuntime(551):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1123)
04-20 22:36:52.575: E/AndroidRuntime(551):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2364)
04-20 22:36:52.575: E/AndroidRuntime(551):  ... 11 more 
```

有谁知道如何解决这个问题。任何线程都会有所帮助。

**编辑1：**

`getInstance`这是从 Dropbox 的 SDK中获取的DbxAccountManager

```
static DbxAccountManager getInstance(Context applicationContext, DbxConfig config) {
    if (null == applicationContext) throw new NullPointerException("applicationContext shouldn't be null.");
    if (null == config) throw new NullPointerException("config shouldn't be null.");

    AppConfigStrings appStrings = validateAppContext(applicationContext, config);
    CoreConfig coreConfig = new CoreConfig(config, CoreConfig.Hosts.DEFAULT, appStrings.userAgent, appStrings.appVersion, appStrings.deviceId);

    synchronized (sInitializeLock) {
        if (null == sInstance) {
            sInstance = new DbxAccountManager(new CoreAccountManager(applicationContext, coreConfig));
        }
        else if (!config.equals(sInstance.mAcctMgr.getConfig())) {
             throw new ConfigurationMismatchException("Dropbox.ensureInitialized called with different configuration.");
        }

        return sInstance;
    }
} 
```

和`validateAppContext`：

```
private static AppConfigStrings validateAppContext(Context appContext, DbxConfig config)
{
    Context testContext = appContext.getApplicationContext();
    if (testContext != appContext) {
        throw new IllegalArgumentException("The provided context wasn't an application context.");
    }

    PackageInfo pi = null;
    try
    {
        PackageManager pm = appContext.getPackageManager();
        pi = pm.getPackageInfo(appContext.getPackageName(), 4101);
    }
    catch (PackageManager.NameNotFoundException e)
    {
        CoreLogger.getGlobal().logAndThrow(TAG, new RuntimeException("Unable to get package info for app package.", e));
    }

    CoreAssert.isTrue(null != pi);

    Set requiredActivities = new HashSet();
    requiredActivities.add(DbxAuthActivity.class.getName());
    requiredActivities.add(AuthActivity.class.getName());
    for (ActivityInfo info : pi.activities) {
        requiredActivities.remove(info.name);
    }
    if (!requiredActivities.isEmpty()) {
        throw new IllegalStateException("Required Sync API Activity isn't included in application manifest: " + TextUtils.join(", ", requiredActivities));
    }

    Set requiredServices = new HashSet();
    requiredServices.add(DbxSyncService.class.getName());
    for (ServiceInfo info : pi.services) {
        requiredServices.remove(info.name);
    }
    if (!requiredServices.isEmpty()) {
        throw new IllegalStateException("Required Sync API Service isn't included in application manifest: " + TextUtils.join(", ", requiredServices));
    }

    Set requiredPermissions = new HashSet();
    requiredPermissions.add("android.permission.INTERNET");
    requiredPermissions.add("android.permission.ACCESS_NETWORK_STATE");
    for (String perm : pi.requestedPermissions) {
        requiredPermissions.remove(perm);
    }
    if (!requiredPermissions.isEmpty()) {
        throw new IllegalStateException("Required Sync API permission isn't requested in application manifest: " + TextUtils.join(", ", requiredPermissions));
    }

    AuthActivity.checkAppBeforeAuth(appContext, config.appKey, false);

    String locale = Locale.getDefault().toString();

    StringBuilder sbUserAgent = new StringBuilder();
    sbUserAgent.append(appContext.getPackageName()).append('/').append(pi.versionCode);
    sbUserAgent.append(' ').append("DropboxSync/").append(SDK_VERSION_NAME);
    sbUserAgent.append(" (Android; ").append(CoreAndroidUtil.getSystemVersion()).append("; ").append(Build.MANUFACTURER).append(" ").append(Build.MODEL).append(" ").append(Build.CPU_ABI).append("; ").append(locale).append(")");

    StringBuilder sbAppVersion = new StringBuilder();
    sbAppVersion.append(pi.versionCode).append(' ');
    sbAppVersion.append("Dropbox-Sync-Sdk-Android/").append(SDK_VERSION_NAME);
    return new AppConfigStrings(sbUserAgent.toString(), sbAppVersion.toString(), CoreAndroidUtil.getDeviceId(appContext));
} 
```

第 432 行是：`requiredServices.remove(info.name);`

**编辑2：** 从问题中删除了不相关（误导）的东西。（感谢CommonsWare）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T18:05:33.847

在联系了 Dropbox 的开发人员并进行了一些繁重的调试后，事实证明该问题是由 Sync SDK 在某些操作系统版本上出现一些未记录的行为引起的。将在他们的下一个 API 更新 (1.0.8) 中发布修复程序。

# dart - Dart 标准库中是否有与 erb 或 mustache 类似的东西，我可以用它来从模板生成文本文件？

> ID：16126193
> 
> 赞同：0
> 
> 时间：2013-04-20T23:12:23.890
> 
> 标签：dart, dart-pub

我希望为 pubspec.yml 创建模板，要求用户提供他们的包的名称，然后输出一个填充了他们的包的 pubspec.yml 版本。

现在，我倾向于使用字符串插值，但我相信这需要字符串在编译时可用。在这种情况下，我希望能够从文件中加载模板，进行某种形式的字符串替换以注入包名和其他信息，然后将呈现的文件保存回文件系统。

通常我会引入一个单独的包来执行此操作，但鉴于这是 pub，我假设我仅限于使用标准 Dart 库中可用的内容。

有人可以在这里提供一些指导吗？我搜索了api文档无济于事。

**更新：**需要明确的是，我希望为 pub 本身贡献一个“pub init”命令。因为这将是 pub 的一部分，所以 pub 还不可用，所以我不能依赖加载 Dart 包。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T04:42:43.240

我有一些简单的[替换代码](https://github.com/xxgreg/postgresql/blob/master/lib/substitute.dart)，你可以从这个包中取出并修改它们。

另一种选择，如果你想保持它非常简单，就是使用正则表达式替换。

我还写了上面提到的[小胡子](http://pub.dartlang.org/packages/mustache)包之一。如果您决定使用它，我很乐意提供帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T23:36:25.430

查看[`mustache`软件包](http://pub.dartlang.org/packages/mustache)或pub.dartlang.org 上可用的[`mustache4dart`软件包。](http://pub.dartlang.org/packages/mustache4dart)

# javascript - jQuery/CSS：脚本第一次运行后 CSS 消失

> ID：16126194
> 
> 赞同：0
> 
> 时间：2013-04-20T23:12:34.370
> 
> 标签：javascript, jquery, html, css

我有一个倒计时到 0 的脚本，然后重新启动 - 每次都替换一个图像。

问题是，在计时器第一次结束后，它又开始了，但是两组数字之间的“：”失去了它的样式 css，变得又小又黑（并且在这个过程中把一些东西移到了不合适的位置）我'不确定这个问题来自哪里，但如果有人可以查看我的代码并了解如何解决此问题，我会很高兴。

前：

![在此处输入图像描述](https://i.stack.imgur.com/PbMOl.png)

后：

![在此处输入图像描述](https://i.stack.imgur.com/H1FcR.png)

**代码：**

```
<div id="counter_2" class="counter">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js" type="text/javascript" charset="UTF-8"></script>
    <script src="js/jquery.countdown.js" type="text/javascript" charset="UTF-8"></script>
    <script type="text/javascript">

        <!-- Replace image start -->
        <!-- The ready() function will force the browser to run wait running the javascript until the entire page has loaded -->
        $(document).ready(function() {

            // The jquery code for constructing and starting the counter
            // has been wrapped inside a function so we can call it whenever we want to
            function startCounter(imageLoader){
                $('#counter_2').countdown({
                     image: 'img/digits.png',
                     startTime: '00:10',
                     timerEnd: function(){ callback(imageLoader) },
                     format: 'mm:ss'
                })
                //Loads a new image right when the page loads
                $('#image').attr('src', imageLoader.nextImage())
            }

            // Takes care of whatever need to be done everytime
            function callback(imageLoader){
                // Replace image
                $('#image').attr('src', imageLoader.nextImage());

                // Clear the finished counter, so a new can be constructed in its place
                $('#counter_2').empty();

                // Construct a new counter and starts it
                startCounter(imageLoader);
            }

            function ImageLoader(images) {
                this.images = images;
                this.usedIndexes = {};
                this.displayedCount = 0;
            }

            ImageLoader.prototype.nextImage = function () {
                var self = this,
                    len = self.images.length,
                    usedIndexes = self.usedIndexes,
                    lastBatchIndex = self.lastBatchIndex,
                    denyLastBatchIndex = self.displayedCount !== len - 1,
                    index;

                if (this.displayedCount === len) {
                    lastBatchIndex = self.lastBatchIndex = self.lastIndex;
                    usedIndexes = self.usedIndexes = {};
                    self.displayedCount = 0;
                }

                do {
                    index = Math.floor(Math.random() * len);
                } while (usedIndexes[index] || (lastBatchIndex === index && denyLastBatchIndex));

                self.displayedCount++;
                usedIndexes[self.lastIndex = index] = true;
                return self.images[index];
            };

            // Fill in images in this array
            imageLoader = new ImageLoader(['img/wallpapers/2.jpg', 'img/wallpapers/3.jpg', 'img/wallpapers/4.jpg',
                'img/wallpapers/5.jpg', 'img/wallpapers/6.jpg', 'img/wallpapers/7.jpg', 'img/wallpapers/9.jpg',
                'img/wallpapers/10.jpg', 'img/wallpapers/11.jpg', 'img/wallpapers/12.jpg', 'img/wallpapers/13.jpg',
                'img/wallpapers/14.jpg',  'img/wallpapers/15.jpg', 'img/wallpapers/16.jpg', 'img/wallpapers/17.jpg',
                'img/wallpapers/18.jpg', 'img/wallpapers/19.jpg', 'img/wallpapers/20.jpg', 'img/wallpapers/21.jpg',
                'img/wallpapers/22.jpg', 'img/wallpapers/23.jpg', 'img/wallpapers/24.jpg', 'img/wallpapers/25.jpg',
                'img/wallpapers/26.jpg', 'img/wallpapers/27.jpg', 'img/wallpapers/28.jpg', 'img/wallpapers/29.jpg',
                'img/wallpapers/30.jpg', 'img/wallpapers/31.jpg', 'img/wallpapers/32.jpg', 'img/wallpapers/33.jpg',
                'img/wallpapers/34.jpg', 'img/wallpapers/35.jpg', 'img/wallpapers/36.jpg', 'img/wallpapers/37.jpg',
                'img/wallpapers/38.jpg', 'img/wallpapers/39.jpg', 'img/wallpapers/40.jpg', 'img/wallpapers/41.jpg']);

            // Set everything off! (Construct a new counter and starts it)
            startCounter(imageLoader);
        });

    </script>
    <style type="text/css">
        div.counter{
            font-size: 54px;
            color: white;
            margin: 10px 7px;
        }
    </style>
</div> 
```

谢谢！

# javascript - 尝试将对象添加到主干集合时，此模型未定义

> ID：16126195
> 
> 赞同：0
> 
> 时间：2013-04-20T23:12:38.217
> 
> 标签：javascript, backbone.js, underscore.js

我想知道在使用骨干集合时是否应该记住什么？我基本上有一个模型，我的集合定义为：

```
LibraryPreps = (function () {
    return Backbone.Collection.extend({
        model: LibraryPrep,
        url: '/api/platform',
        initialize: function (models, options) {

        }
    });
})();

LibraryPrep = (function () {
    return Backbone.Model.extend({

        defaults: {
            name: '',
            platform: '',
        },
        initialize: function () {
            return this;
        }
    });
})(); 
```

他们没什么好看的。当我创建一个 LibraryPrep 并记录它时，它看起来就像我想要的数据。但是当我尝试将它添加到集合中时，我收到了这个错误：

```
TypeError: this.model is undefined
followed by this line of code:
this._idAttr || (this._idAttr = this.model.prototype.idAttribute); 
```

我基本上是这样做的：

```
var libPreps = new LibraryPreps();

            _.each(libraries, function (library) {
                console.log("POPULATE LIBRARY PREP");
                console.log(library);
                var tempLibPrep = new LibraryPrep(library);
                console.log(tempLibPrep);

                libPreps.add(tempLibPrep);    // why aren't you working?!
            }); 
```

我以前在其他地方使用过一个集合，我似乎从来没有遇到过问题。我对网络还是很陌生，所以也许有一些我没有想到的东西。有什么想法吗？提前致谢 ：-。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T23:53:18.517

看看，`LibraryPreps.prototype`你会发现你哪里出错了。首先，你的真实代码必须看起来更像这样，否则你会得到`ReferenceError`：

```
var LibraryPreps = (function () { ... })();
var LibraryPrep  = (function () { ... })(); 
```

当产生的匿名函数`LibraryPreps`执行时，`LibraryPrep`将是未定义的，因为它直到稍后才被赋值。如果你这样做：

```
var LibraryPreps = (function () {
    return Backbone.Collection.extend({
        model: LibraryPrep,
        //...
    });
})();
var LibraryPrep = (function () {
    return Backbone.Model.extend({ /*...*/ });
})();
console.log(LibraryPreps.prototype); 
```

您会在控制台中看到`LibraryPreps.prototype.model`is 。`undefined`演示：http: [//jsfiddle.net/ambiguous/y8cja/](http://jsfiddle.net/ambiguous/y8cja/)

`Backbone.Collection.extend`调用（带有或不带有匿名自执行函数包装器）强制在调用`LibraryPrep`时进行评估，`extend`因此您最终构建了一个带有`undefined` `model`属性的集合“类”。然后，在 Backbone 中，它会寻找`idAttribute`集合模型的 ，然后你会得到错误。

修复定义的顺序，以便在使用之前定义事物：

```
var LibraryPrep  = (function () { ... })();
var LibraryPreps = (function () { ... })(); 
```

你会有更好的结果。

* * *

正如[Loamhoof](https://stackoverflow.com/users/2211877/loamhoof)在评论中指出的那样，您的代码在当前版本的 Backbone (1.0.0) 上运行良好，我找不到这个：

```
this._idAttr || (this._idAttr = this.model.prototype.idAttribute); 
```

1.0.0 源中的任何位置。大概您使用的是旧版本的 Backbone，其`Collection#add`方法需要知道`idAttribute`其模型的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T23:21:47.050

您是否尝试将模型直接添加到集合中？

```
libPreps.add(libraries); 
```

[http://backbonejs.org/#Collection-add](http://backbonejs.org/#Collection-add)

*addcollection.add(models, [options]) 将模型（或模型数组）添加到集合中，触发“add”事件。如果定义了模型属性，**您还可以传递原始属性对象，并将它们激活为模型的实例**。传递 {at:index} 将模型拼接到指定索引处的集合中。如果您将模型添加到集合中已经在集合中的模型，它们将被忽略，除非您传递 {merge: true}，在这种情况下，它们的属性将被合并到相应的模型中，触发任何适当的“更改”事件。*

# android - 解析 JSON 数组时出错

> ID：16126197
> 
> 赞同：3
> 
> 时间：2013-04-20T23:13:03.577
> 
> 标签：android, arrays, json, parsing

我已经将这些 JSON 数据解析到我的 Android 应用程序中：

```
{"result":"success","source":"getPlayerNames","success":["Player1","Player2"]} 
```

为了解析它，我正在这样做（`jsonData`包含上述数据的字符串在哪里）：

```
ArrayList<String> players;
players = new ArrayList();

JSONObject json = new JSONObject(jsonData);
JSONArray array = json.getJSONArray("success");

for (int i = 0; i < array.length() ; i++)
{
    players.add(array.getString(i));
} 
```

但是`players`ArrayList 仍然是空的......（大小 = 0）

为什么 ？你可以帮帮我吗 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T23:17:30.187

尝试改变这一点

```
players = new ArrayList(); 
```

至 ：

```
players = new ArrayList<String>(); 
```

看看有没有帮助

**编辑：** 明白了。工作代码：

```
ArrayList<String> players;
players = new ArrayList();

JSONObject json = new JSONObject(jsonData);
JSONArray array = json.getJSONArray("success");

for (int i = 0; i < array.length() ; i++)
{
    players.add((String)array.get(i));
} 
```

# android - android 电话 (api 17/android 4.2) 问题

> ID：16126198
> 
> 赞同：3
> 
> 时间：2013-04-20T23:13:08.373
> 
> 标签：android, telephony, telephonymanager, android-4.2-jelly-bean

我正在尝试使用新的[电话 API](http://developer.android.com/reference/android/telephony/CellInfo.html)。我打电话给 TelephonyManager 的[getAllCellInfo()](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getAllCellInfo%28%29)但我得到的只是一个空对象（意味着它不可用）。

当前使用带有最新更新（4.2.2）的官方rom的nexus 4。

应补充：

*   我没有从 DDMS 收到任何错误。
*   我的清单中有 ACCESS_COURSE_UPDATES

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T03:18:13.290

该功能需要一些权限集，特别是 ACCESS_COARSE_UPDATES，确保将其添加到应用程序清单 xml：

```
<uses-permission android:name="android.permission.ACCESS_COARSE_UPDATES"/> 
```

此外，关于读取电话状态的电话 api 可能也需要这个：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T09:28:39.763

我有同样的问题，我放弃了 CellInfo 类，但使用 CellLocation 来获取信息。

# mysql - 将所有文件上传存储在一个 MySQL 表中？（文本和 BLOB）

> ID：16126211
> 
> 赞同：0
> 
> 时间：2013-04-20T23:14:20.240
> 
> 标签：mysql, text, blob, sql-types

我正计划实施一个基本的 CMS，我将在内部用于我自己的开发。我想根据自己的需要开发一个定制的 CMS —— 比 Dreamweaver 更轻、更便携、更少冗余，但面向已经知道如何编码并且只需要整合信息的人。本质上，该计划是将所有内容存储在 MySQL 数据库中，将其全部缓存在文件系统上，然后，每当通过获取 PHP 文件查询数据时，都会向数据库发送一个简单查询，以检查该资源上次更新的时间，如果系统上的缓存文件足够新，则从缓存目录中拉取；否则，缓存文件将被覆盖。

CMS 会将所有上传的内容存储在数据库中，以便在系统需要移动到另一台主机等时将所有内容放在一个位置。它还使备份非常简单，并且可以轻松扩展以实现差异/修订存储库等.

我想创建一个包含通过 CMS 界面创建的所有文件和资源（页面、模板等）的单个表（例如“资产”）。理想情况下，这将处理两种类型：ASCII（文本）和二进制（BLOB）。

表“资产”

id INT，slug VARCHAR，ascii LONGTEXT，二进制 LONGBLOB，类型 INT，元 TEXT，修改日期，...

我的问题是，将这些信息放在一张表中是否有意义？“资产”表中的任何给定行都只能在 ascii 列或二进制列中具有值，但绝不会在两者中都有。这会浪费空间吗？完全减慢这个过程？

永远不会不必要地选择列。“type”字段将对应于“types”表中的 id，该表将列出文本类型（html、模板、纯文本等）和二进制类型（png、jpg、pdf、mp3、mp4 等）。所以我可以这样查询：

（显然是伪代码）

```
$lastModified = SELECT modified FROM assets WHERE slug = $asset_slug;
if last_modified_date_of_file("cache/$asset_slug") != $lastModified :
  $type_id = SELECT type FROM assets WHERE id = $asset_id;
  $type_col = SELECT col FROM types WHERE id = $type_id;
  if $col == 'ascii'
    cache_file("cache/$asset_slug", SELECT ascii FROM assets WHERE slug = $asset_slug);
  else
    cache_file("cache/$asset_slug", SELECT binary FROM assets WHERE slug = $asset_slug); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:25:47.083

一般来说，如果你在数据库中存储二进制数据，你就做错了。虽然我很欣赏让迁移变得容易的愿望，但当您在其中存储 mp3 时，您会很快发现数据库速度变慢；数据库针对快速检索少量数据进行了优化，文件系统针对有组织地访问大量数据进行了优化。当我实现类似的系统时，我将文件的位置存储在数据库中，并将文件本身存储在文件系统中；为了可移植性，您可能只想将文件名存储在“资产”表中，并将资产存储的路径存储在数据库的其他位置。

良好的数据库设计通常意味着将实体的属性从与实体关联的数据中分离出来——例如，在经典的“联系人卡片”场景中，表“人”可能具有“姓名”、“出生日期”和“位置”，但是诸如“电话号码”之类的数据应该存储在其他地方，因为它是与人相关联的数据，而不是人的属性。对于您的情况，最好 (IMO) 将单独的表 FKing 返回到“资产”表以将资产数据链接到资产。

# asp.net - IIS URL 重写 - 基于 ID 在 URL 中包含标题

> ID：16126214
> 
> 赞同：1
> 
> 时间：2013-04-20T23:14:40.753
> 
> 标签：asp.net, url-rewriting, iis-7.5, url-rewrite-module

我有一个 ASP.NET 电子商务应用程序，其中产品 URL 主要采用以下格式

```
<domain_name>/ProductCatalog/Product.aspx?ID=30 
```

我正在使用 IIS URL Rewrite 成功将此 URL 写入为

```
<domain_name>/ProductCatalog/Product/30 
```

假设`ID = 30`数据库中的产品名称是“XYZ Item”，那么我想做查找并将 URL 重写为

```
<domain_name>/ProductCatalog/Product/XYZ-Item 
```

我不知道该怎么做？请指出我正确的方向。

# php - 在 Laravel 4 中急切加载资源时加载模型变量

> ID：16126216
> 
> 赞同：0
> 
> 时间：2013-04-20T23:14:59.193
> 
> 标签：php, orm, model, laravel

我正在从 REST API 返回 JSON 数据，在该 API 中我渴望加载相关模型（在本例中为资源）。

```
// In my controller (FooController.php)
public function show($id)
{
  return Foo::with('bar')->find($id);
}

// In my model (Bar.php)
class Bar extends Eloquent {

  public $baz = 1;

  public function foo()
  {
    return $this->belongsTo('Foo');
  }

} 
```

我怎么能`$baz`在使用`with('bar')`和保持对象关系的同时返回？在我的视图/控制器中，我可以使用诸如`$foo->baz`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T23:23:19.547

您应该能够使用访问器执行此操作。由于 $baz 不是实际的模型属性（好吧，我假设您的问题就是这种情况），您可以执行以下操作：

```
public function getBaz()
{
  return $this->baz;
} 
```

有关更多信息，请参阅[文档](http://four.laravel.com/docs/eloquent#accessors-and-mutators)。

# serial-port - Arduino上整数的串行消息

> ID：16126219
> 
> 赞同：3
> 
> 时间：2013-04-20T23:15:20.083
> 
> 标签：serial-port, integer, arduino

我希望我的 Arduino 通过串行通信接收一个整数。你能帮我解决这个问题吗？

它应该是这样的形式：

```
int value = strtoint(Serial.read()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-13T12:18:14.723

您可以使用 Serial.parseInt() 函数，请参见此处：[http ://arduino.cc/en/Reference/ParseInt](http://arduino.cc/en/Reference/ParseInt)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T13:22:03.250

有几种方法可以从 中读取整数`Serial`，主要取决于数据在发送时的编码方式。`Serial.read()`只能用于读取单个字节，因此需要从这些字节重构发送的数据。

以下代码可能对您有用。它假定串行连接已配置为 9600 波特，数据作为 ASCII 文本发送，并且每个整数由换行符 ( `\n`) 分隔：

```
// 12 is the maximum length of a decimal representation of a 32-bit integer,
// including space for a leading minus sign and terminating null byte
byte intBuffer[12];
String intData = "";
int delimiter = (int) '\n';

void setup() {
    Serial.begin(9600);
}

void loop() {
    while (Serial.available()) {
        int ch = Serial.read();
        if (ch == -1) {
            // Handle error
        }
        else if (ch == delimiter) {
            break;
        }
        else {
            intData += (char) ch;
        }
    }

    // Copy read data into a char array for use by atoi
    // Include room for the null terminator
    int intLength = intData.length() + 1;
    intData.toCharArray(intBuffer, intLength);

    // Reinitialize intData for use next time around the loop
    intData = "";

    // Convert ASCII-encoded integer to an int
    int i = atoi(intBuffer);
} 
```

# ember.js - 带有主题和皮肤的 Ember 项目

> ID：16126224
> 
> 赞同：0
> 
> 时间：2013-04-20T23:16:30.260
> 
> 标签：ember.js, handlebars.js

关于如何创建一个支持多个主题/皮肤的 Ember / Handlebars 项目的任何想法，这些主题/皮肤可以通过 UI 中的下拉框进行更改？

Ember 的当前版本是 1.0.0-rc.2

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T06:57:10.430

Ember 在这里没有什么太独特的地方。将 CSS 用于主题/皮肤，并在 Dropbox 更改时更改当前主题样式表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-21T23:41:44.077

仅供参考，您可以使用一个开关样式表 ember-cli： [https ://www.npmjs.com/package/ember-theme-changer](https://www.npmjs.com/package/ember-theme-changer/)

* * *

### 安装主题转换器

```
ember install ember-theme-changer 
```

### 在 ember-cli-build.js 中修改以下代码：

```
// ember-cli-build.js
    outputPaths: {
      app: {
        css: {
          'light': '/assets/light.css', // FOR LIGHT THEME => app.scss
          'dark': '/assets/dark.css' // FOR DAR THEME => dark.scss
        }
      }
    }, 
```

### 使用不同的配置创建您自己的 SCSS。

1.  转到应用程序/样式文件夹
2.  创建 dark.css 和 app.scss

黑暗.scss

```
body{
 background-color: black;
} 
```

应用程序.scss

```
body{
 background-color: light;
} 
```

### 您只需要制作两个按钮即可切换您应用的css文件

想一个简单的方法：

## 在 Html 模板 application.hbs

```
<link href="light.css" rel="stylesheet" type="text/css" >

<button class='light'>LIGHT MODE</button>
<button class='dark'>DARK MODE</button> 
```

## 在 Javascript 文件中

```
$('.light').click(function (){
   $('link[href="light.css"]').attr('href','black.css');
});
$('.black').click(function (){
   $('link[href="black.css"]').attr('href','light.css');
}); 
```

评论：您可以使用其他插件（更复杂），它可以在以下位置找到：

1.  [https://www.emberaddons.com/](https://www.emberaddons.com/)
2.  [https://www.npmjs.com/package/ember-themed-syntax](https://www.npmjs.com/package/ember-themed-syntax/)

# variables - 使用“@”与“${}”进行 CMake 变量扩展

> ID：16126225
> 
> 赞同：5
> 
> 时间：2013-04-20T23:16:39.077
> 
> 标签：variables, cmake, expansion

考虑以下：

```
SET(TEST_DIR, "test")
INSTALL(PROGRAMS scripts/foo.py DESTINATION ${TEST_DIR})
INSTALL(PROGRAMS scripts/foo.py DESTINATION @TEST_DIR@) 
```

第一个`INSTALL`命令不起作用。第二个可以。这是为什么？这两者有什么区别？`@@`除了在创建配置文件的上下文中，我没有找到任何关于扩展的参考。其他一切都只使用`${}`扩展。

更新：好的，上面有明显的错误。我的`SET()`命令有一个多余的逗号。删除它，使其看起来像：

```
 SET(TEST_DIR "test") 
```

结果`@@`和`${}`扩展工作。`@@`仍然想知道（a）相对于的含义是什么`${}`，以及为什么只有前者与我的错误`SET()`陈述一起使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T04:24:30.587

根据[`configure_file()`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command:configure_file)配置文件时命令的文档，`${VAR}`表单和`@VAR@`表单都将替换 VAR 的值。根据您的上述经验和我所做的一些测试，当 CMake 评估您的`CMakeLists.txt`. 由于这没有记录，我建议不要`@VAR@`在你的`CMakeLists.txt`

请注意，使用时，`configure_file()`您可以通过使用参数将替换限制为仅`@VAR@`表单`@ONLY`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T10:32:03.993

据我所知，@VAR@ 语法仅在用[configure_file](http://cmake.org/cmake/help/v2.8.10/cmake.html#command%3aconfigure_file)命令替换变量时使用。

请注意，该`configure_file`命令允许一个额外的选项`@ONLY`。使用它，您可以指定仅替换 @VAR@，但保留 ${VAR}。

例如，在生成例如稍后将再次与 CMake 一起使用的 cmake 文件时，这可能很有用。例如，在构建项目时，@VAR@ 将在使用 configure_file 时被替换。在您分发项目并且其他人使用生成的 UseProject.cmake 文件后，将替换 ${VAR}$ 条目。

# fonts - Changing font in prettyPhoto

> ID：16126226
> 
> 赞同：0
> 
> 时间：2013-04-20T23:16:52.863
> 
> 标签：fonts, prettyphoto, caption

I'm using prettyPhoto for a lightbox, and it works great, but I have a problem:

I can't figure out how to change the "caption" font at the bottom of the photo. I keep looking for this online, but I can't find it. I know it must be something about changing the prettyPhoto style sheet?

Can I write my own class in my custom css file like with other font changes? If so, how do I reference the class for my caption?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T17:54:50.817

自从你问了一段时间，但如果你没有解决它或者其他人正在寻找答案，“prettyPhoto.css”中隐藏着两条没有字体系列属性的规则：“div.pp_default .pp_description”和“ div.ppt'。

第一个适用于图像下方的描述，第二个适用于顶部的标题。

# java - Generate pdf empty signature fields free for commercial use

> ID：16126235
> 
> 赞同：-4
> 
> 时间：2013-04-20T23:18:57.987
> 
> 标签：java, pdf, digital-signature

Is there any java lib that I can use (Itext is not free to use for commercial sites) to generate empty digital signature fields in java from servlets or jsp . I must have more than one empty signature field generated . Php has TCPDF , is there something similar in java .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:25:30.493

由于除了 JasperReports 之外没有其他答案（并且使用成熟的报告套件只是为文档添加一个空的签名字段可能被认为是一种矫枉过正），我在这里合并我的评论作为第二个答案：

您想*在 java 中生成空的数字签名字段，*但不想使用 iText，因为*它不能免费用于商业网站*。

1.  如果您只是想创建空的签名字段，并且在 iText 的较新版本中的许多添加和错误修复并不重要，您可以考虑使用在 LGPL 下发布的最新 iText 版本，即 2.1 .7 或（非官方）4.2.0。与前一个相比，后一个有一些小修复，因此您可能希望更喜欢该版本。

    在这种情况下，我建议您检查有问题的 SVN 分支并自己构建它，而不是使用某些第三方构建的版本之一，因为其中一些包含未记录的更改。

2.  我相信您也可以使用 PDFBox 以某种方式做到这一点，因为该库公开了它相当公开地处理的 PDF 的低级对象。由于我并没有真正进入那个图书馆，我无法详细说明如何做到这一点。您可以简单地获取一些创建表单域的 PDFBox 示例，参考 PDF 规范[ISO 32000-1:2008](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)并实施它，应该不会太难。

3.  免费 PDF 库中较新的播放器是 PDF Clown。根据其文档，它还没有处理签名。不过，它确实适用于表单字段和一般注释，因此添加您需要的功能应该不难，或者 --- 空签名字段实际上是非常简单的表单字段，加密乐趣在实际签署之前不会开始PDF，可以使用一个空的签名字段或动态创建一个新的。

    在这种情况下，您可能必须更改 lib 本身，而对于 PDFBox，我假设您可以简单地使用 lib。但是您也许可以让 PDF 小丑的创造者 Stefano Chizzolini 着迷，以整合这种变化。

话虽这么说，我确实同意布鲁诺的评论，即任何人通过使用别人创建的库（手头的*iText ）来获利（**商业用途*）都不应限制以某种方式共享，无论是通过共享他的代码（即使用iText 根据 AGPL）或支付 iText。

 *当然，有时也会有不利的限制，例如，管理层允许共享非常缓慢，但要求其开发人员实现的速度非常快... <sigh>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T23:31:25.987

试试[JasperReports](http://community.jaspersoft.com/project/jasperreports-library)。它有一个很好的 GUI 来设计你的 PDF。*

# php - jQuery UI Datepicker 今天和其他日子

> ID：16126239
> 
> 赞同：0
> 
> 时间：2013-04-20T23:19:20.560
> 
> 标签：php, jquery, jquery-ui

目前，我正在使用 datepicker jquery ui 小部件来允许用户从日历中选择一个日期。

我想改变我所拥有的，这样我就可以让日历出现在悬停/点击“选择你的日子”的文字上，然后当点击日历选项时，它会重定向到一个页面。

这可能吗？

此刻的Jquery -

```
<script>
$(function() {
  $( "#datepicker" ).datepicker({ dateFormat: 'yy-mm-dd' });
  $('#datepicker').datepicker('setDate', 'today');
});
</script> 
```

html

```
<input type="text" id="datepicker" size="30" name="date"/> 
```

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T23:21:46.923

1.

> 然后当单击日历选项时，它将重定向到一个页面。

[http://api.jqueryui.com/datepicker/#option-onSelect](http://api.jqueryui.com/datepicker/#option-onSelect)

```
$( "#datepicker" ).datepicker({ 
     dateFormat: 'yy-mm-dd', 
     onSelect: function(){
         document.location.href = '/';
     }
}); 
```

2.

> 我可以让日历出现在悬停/单击“选择你的日子”的文字上

```
$('#datepicker').on('focus', function(){
   alert('Choose your date');
}); 
```

# c++ - Limit recursive calls in C++ (about 5000)?

> ID：16126241
> 
> 赞同：6
> 
> 时间：2013-04-20T23:19:37.773
> 
> 标签：c++, recursion

In order to know the limit of the recursive calls in C++ i tried this function !

```
void recurse ( int count ) // Each call gets its own count
{
printf("%d\n",count );
  // It is not necessary to increment count since each function's
  //  variables are separate (so each count will be initialized one greater)
  recurse ( count + 1 );
} 
```

this program halt when count is equal 4716 ! so the limit is just 4716 !! I'm a little bit confused !! why the program stops exeuction when the count is equal to 4716 !! PS: Executed under Visual studio 2010. thanks

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-20T23:22:41.683

递归调用的限制取决于堆栈的大小。C++ 语言并没有限制这一点（从内存来看，符合标准的编译器需要支持的函数调用数量有一个下限，这是一个非常小的值）。

是的，递归“无限”会在某个时候停止。我不完全确定你还有什么期望。

值得注意的是，设计软件来执行“无限”递归（或运行成百上千的递归）是一个非常糟糕的主意。没有（标准）方法可以找出堆栈的限制，并且您无法从堆栈溢出崩溃中恢复。

您还会发现，如果您添加一个数组或其他一些数据结构[并使用它，因此它不会得到优化]，递归限制会降低，因为每个堆栈帧使用堆栈上的更多空间。

编辑：我实际上希望有一个更高的限制，我怀疑你正在调试模式下编译你的代码。如果你在发布模式下编译它，我预计你会得到数千个，甚至可能无穷无尽，因为编译器会将你的尾递归转换为循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T23:21:51.043

堆栈大小取决于您的环境。

例如在 *NIX 中，你可以在环境中修改堆栈大小，然后运行你的程序，结果会有所不同。

在 Windows 中，您可以这样更改它[（来源）](https://superuser.com/questions/340239/how-to-increase-stack-size-permanently-on-windows-7)：

```
$ editbin /STACK:reserve[,commit] program.exe 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T23:21:15.430

您可能已经用完了堆栈空间。

每次调用递归函数时，它都需要将返回地址压入堆栈，以便知道函数调用后返回到哪里。

它在 4716 处崩溃，因为它恰好在大约 4716 次迭代后用完堆栈空间。

# java - How to apply row span in tablelayout?

> ID：16126243
> 
> 赞同：10
> 
> 时间：2013-04-20T23:19:58.367
> 
> 标签：java, android, row, html, tablelayout

How to apply row_span to TableLayout?

I want to make something similar to this image, but i don't know how to do it.

![table image](https://i.stack.imgur.com/3ktT8.jpg)

What is the correct way to make something like this?

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-20T23:38:33.103

`TableLayout`不支持行跨度，仅支持列跨度。`GridLayout`支持行和列跨度：

![网格布局示例](https://i.stack.imgur.com/SgXci.png)

（图片来自[http://android-developers.blogspot.com/2011/11/new-layout-widgets-space-and-gridlayout.html](http://android-developers.blogspot.com/2011/11/new-layout-widgets-space-and-gridlayout.html)）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-25T22:39:32.033

小作弊（代码可能相当复杂，仅对简单设计有效）：

做一个`TableLayout`. 将另一个`TableLayout`放在第一列和一个您希望在第二列中具有行跨度的视图。这个内部`TableLayout`可以有尽可能多`TableRows`的你希望另一个视图跨越。

这是代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="@dimen/activity_horizontal_margin"
    tools:context=".MainActivity">

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <TableRow
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:weightSum="3">

            <TableLayout
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1.5">

                <TableRow
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:background="@android:color/holo_blue_dark">

                    <TextView
                        android:text="Row 1"/>

                </TableRow>

                <TableRow
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:background="@android:color/holo_blue_light">

                    <TextView
                        android:text="Row 2"/>

                </TableRow>

                <TableRow
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:background="@android:color/holo_blue_bright">

                    <TextView
                        android:text="Row 3"/>

                </TableRow>

            </TableLayout>

            <TextView
                android:layout_width="0dp"
                android:layout_height="match_parent"
                android:layout_weight="1.5"
                android:text="Second column, rowspan 3"
                android:background="@android:color/holo_purple"
                android:gravity="center"/>

        </TableRow>

    </TableLayout>

</LinearLayout> 
```

所以，你总结一下：

TableLayout：第一列（TableLayout 与我们想​​要的尽可能多的 TableRows），第二列（将占用所有这些行空间的元素）。

[![在此处输入图像描述](https://i.stack.imgur.com/Fx1nr.png)](https://i.stack.imgur.com/Fx1nr.png)

# javascript - 如何让按钮调用表单

> ID：16126244
> 
> 赞同：1
> 
> 时间：2013-04-20T23:20:05.137
> 
> 标签：javascript, wordpress

这里又是一个新手。我从旧站点页面获取此代码，并希望在新 WP 站点的页面上使用它。我将适当的 HEAD 信息放在 WP 的 HEADER 部分，并将以下脚本放在页面上，但我似乎无法获得调用表单本身的按钮。

非常感谢帮助。

```
<center><form><input type="button" id="feedback-button" class="button" value="Open Support Ticket" /></form></center>

<script type="text/javascript">
window.ATL_JQ_PAGE_PROPS = $.extend(window.ATL_JQ_PAGE_PROPS, {

    // ==== custom trigger function ====
    triggerFunction : function( showCollectorDialog ) {
        $('#feedback-button').on( 'click', function(e) {
            e.preventDefault();
            showCollectorDialog();
        });

    }

});
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T23:23:24.117

如果您的意思是希望按钮提交表单，那么绝对不需要使用 JavaScript；这是浏览器的默认行为。但是，您需要确保*包括提交按钮在内的*所有输入都在*同一个`form`元素*中。您还需要确保该`form`元素具有一个`action`属性和一个`method`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T23:35:16.433

在我看来，自定义触发事件正在调用 showCollectorDialog()

你也有 showCollectorDialog 的代码吗？

您可能想尝试添加一条警报消息以查看该函数是否被调用。

```
<script type="text/javascript">
window.ATL_JQ_PAGE_PROPS = $.extend(window.ATL_JQ_PAGE_PROPS, {

// ==== custom trigger function ====
triggerFunction : function( showCollectorDialog ) {
    $('#feedback-button').on( 'click', function(e) {
        alert("Yes, the button is getting executed!");
        e.preventDefault();
        showCollectorDialog();
        alert("No, looks like I passed the showCollectorDialog and is not working");
    });

}

});
</script> 
```

其他选项包括在按钮中添加一些代码，这些代码是 onClick 事件，例如...

```
<center><form><input type="button" id="feedback-button" onClick="functionName()" class="button" value="Open Support Ticket" /></form></center> 
```

onClick 可用于根据您需要的操作触发某种功能。我不能确切地知道代码在做什么，但也许是打开一个支持票的弹出窗口？

真的，我们需要更多细节，但看看上面的内容是否至少可以帮助您解决开始发生的事情。

# android - 让 android 模拟器与在线端点交谈

> ID：16126249
> 
> 赞同：0
> 
> 时间：2013-04-20T23:20:50.250
> 
> 标签：android, google-cloud-endpoints, gae-eclipse-plugin

[请参阅如何将我的 android 应用程序指向我的在线 apengine 端点](https://stackoverflow.com/questions/16121987/how-do-i-point-my-android-app-to-my-online-apengine-endpoint)以获取背景信息。

我已经部署了我的应用引擎端点。现在我想让我的模拟器与之交谈。有谁知道这是怎么做到的吗？在本地主机上一切正常。但是当我切换到已部署的后端时，我得到了一个异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:48:00.773

使用模拟器与已部署的 Endpoint 对话应该与使用真实设备几乎相同。如果您的 APK 可在真实设备上运行，则在运行时选择模拟器目标应该会产生相同的结果。

对此的*一个主要警告*是，如果您使用的是 Google Play 服务（身份验证的要求），截至本文发布时，它在模拟设备上不起作用。要测试经过身份验证的 API，您必须使用物理设备。

# java - 意外发生 StackEmptyException

> ID：16126250
> 
> 赞同：0
> 
> 时间：2013-04-20T23:21:00.337
> 
> 标签：java, stack

我有这部分的课程

```
private static Stack<Integer> integers = new Stack<Integer>();

private static int nextInt()
{               
    if(integers.isEmpty())
    {
        refill();
    }

    return integers.pop();
}

public static int peekInt()
{
    if(integers.isEmpty())
    {
        refill();
    }

    return integers.peek();
}

private static synchronized void refill()
{
    for(int i = 0; i<7; i++)
        integers.add(i);
    Collections.shuffle(integers);
} 
```

并且两个不同的线程调用方法 nextInt 和 peekInt 但有时它们会得到一个堆栈空异常但是如果它们都在获取它们的值之前调用 refill 为什么会发生这种情况。

这是异常跟踪

```
Exception in thread "Thread-7" java.util.EmptyStackException
at java.util.Stack.peek(Stack.java:102)
at Utility.peekInt(Utility.java:26)
at Frame$repainter.run(Frame.java:72)
at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T23:28:20.200

因为它不是线程安全的。假设堆栈中有一个元素，并且两个线程都在语句处`if(integers.isEmpty())`，这两个线程都将返回 false 并跳到下一个语句。现在，如果调用的线程`nextInt()`先调用`integers.pop()`，则将从堆栈中取出一个元素，并且堆栈将为空。现在，当调用的另一个线程`peekInt()`执行`integers.peek()`时，它会抛出，`EmptyStackException`因为堆栈中没有元素。

您可以做的是尝试同步方法`nextInt()`和`peekInt()`同步之外`refill()`，如下所示：

```
private static synchronized int nextInt(){...} 
```

```
public static synchronized int peekInt(){...} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T23:29:12.513

您的代码不是线程安全的。考虑堆栈仅包含一个元素/整数的场景，并且在 nextInt() 和 peekInt() 方法中执行两个线程，两者都会看到堆栈非空，因此不调用 refill() 方法，现在如果一个线程在另一个线程调用 peek() 之前稍微执行 pop()，您将得到 StackEmptyException。

同步 nextInt() 和 peekInt() 将解决问题。

# xaml - How to link the View and the ViewModel and where to create them

> ID：16126254
> 
> 赞同：2
> 
> 时间：2013-04-20T23:21:21.513
> 
> 标签：xaml, mvvm, windows-store-apps

I have written a phone app using an MVVM framework. It came together okay - every page (view) on the phone has its own ViewModel and code within each ViewModel went away to the dataservice and retrieved appropriate data.

So I had a page showing an Agenda of upcoming items and its ViewModel retrieved a collection of events and within the XAML I bound a Listbox to this collection. Similarly I had another page showing a OneOff Events and again, within its VM I called the data service to get a collection of data back and that was bound to a listbox within its view.

Not sure how good an implementation of MVVM this is, but, I ended up moving to a different database - and it was very easy to implement another dataservice without touching anything else and it all worked great.

Ok - so now I am looking to rework this app into a Windows Store app. I now have a main page that will show a combination of data that on the phone was shown on individual pages. Hypothetically, assume that the Agenda items and One Off Events mentioned above are now appearing on the same main page (so much more room to show stuff)

Just struggling with what this means for ViewModel(s). If the MainPage can only work with one ViewModel, do I end up with one huge ViewModel that includes all the functionality that was in multiple VM's before.

Or should the Main ViewModel have within it collections of ViewModels. From looking around this seems to be the way it could be done, but, if so where are the ViewModels created? It seems quite a fundamental shift from what I have done previously.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:27:19.280

是的，您可以将不同的 ViewModel 设置为页面不同部分的绑定上下文。您可以使用定位器模式（一个具有 ViewModel 属性的定位器对象）或依赖注入来保持事物的构造可管理。

Gill Cleeren 的精彩示例代码和幻灯片讨论并展示了如何使用 MVVM 交替设置[Contoso Cookbook 示例应用程序](http://msdn.microsoft.com/en-us/jj819238.aspx)，可以在[此处](http://www.snowball.be/2013/03/08/Slides+And+Demos+For+My+Advanced+MVVM+Cookbook+Session.aspx)找到 ViewModelLocator 类。谈话本身在[第 9 频道](http://channel9.msdn.com/Events/TechDays/Techdays-2013-the-Netherlands/MVVM-and-Windows-8)。

从这些幻灯片中：

> 数据绑定是粘合剂，但......
> 
> 视图需要“找到”它的 ViewModel
> 
> *   ViewModel 是 DataContext
> 
> 可以是静态的或动态的
> 
> *   静态：View 创建 ViewModel 并将其设置为 DataContext
>     
>     
> *   动态：在运行时，View 选择它的 ViewModel，反之亦然
>     
>     
>     
>     2个选项：
>     
>     
>     *   View-First：创建 ViewModel 是因为创建了 View
>     *   ViewModel-First：创建 ViewModel 并选择 View

# imap - 如何检索邮件 IMAP

> ID：16126260
> 
> 赞同：0
> 
> 时间：2013-04-20T23:22:12.350
> 
> 标签：imap

`fetch`命令和**IMAP**`search`中的命令有什么区别？

 **我试图在我的收件箱中获取消息，我使用以下命令来检索 UID：

```
sb = receiveResponse("$ UID SEARCH ALL\r\n"); 
```

然后我使用这个命令来获取一个特定的消息头：

```
sb = receiveResponse("$ FETCH " + number+ " BODY.PEEK[HEADER.FIELDS (From Subject Date)]\r\n"); 
```

fetch 命令是使用 UID 来获取消息头还是使用消息号？

如果它使用消息号，我如何检索消息号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T00:52:52.950

使用 UID FETCH 按 uid 获取。仅使用 FETCH 按消息序列号获取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T12:41:42.630

如果您只想下载收件箱文件夹中的所有邮件，您需要做的就是

```
FETCH 1:* BODY.PEEK[HEADER.FIELDS (From Subject Date)] 
```**

# scala - 模式匹配会创建函数吗？

> ID：16126261
> 
> 赞同：0
> 
> 时间：2013-04-20T23:22:13.130
> 
> 标签：scala

`List.sortWith`根据[文档](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.List)的方法：有签名

```
def sortWith(lt: (A, A) ⇒ Boolean): List[A] 
```

现在对于我们可以做的字符串列表：

```
myList.sortWith((_,_) match { case(s1: String, s2: String) => s1.compareTo(s2)} 
```

即当scala 说它想要一个函数类型时使用模式匹配。

在这种情况下，我们可以因此说

```
(_,_) match { case(s1: String, s2: String) => s1.compareTo(s2) 
```

是以下函数类型的函数应用程序`(A, A) ⇒ Boolean`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T01:33:46.143

请注意，`compareTo`返回一个整数。如果要遵守签名`(A, A) ⇒ Boolean`，对于字母升序，可以使用`<`.

所有这三个匿名函数都会对 a 进行排序`List`：

```
myList.sortWith(_ < _)
myList.sortWith { case(a, b) => a < b }
myList.sortWith( (_, _) match { case (a, b) => a < b} ) 
```

# php - 如何保存自定义元框的数据？

> ID：16126267
> 
> 赞同：1
> 
> 时间：2013-04-20T23:23:08.840
> 
> 标签：php, wordpress

我正在尝试学习一些有关 WordPress 插件开发的知识。这是我第一次尝试写东西。这应该在“页面”页面上创建一个输入字段来存储自定义值。

这是我写的代码，但有些东西不起作用。我无法保存我的数据。

```
<?php
/*
Plugin Name: nw_Page_Gallery
*/

class nw_Page_Gallery {

    public function __construct(){
        $this->add_meta_boxes();
    }

    public function add_meta_boxes(){
        add_action("add_meta_boxes", array($this, "add_meta_box_images"));
    }

    public function add_meta_box_images(){
        add_meta_box("nw_page_image", "Sfondo pagina", array($this, "add_image_box"), "page");
    }

    public function add_image_box($post){
        $back_url = get_post_meta($post->ID, 'nw_page_image', true);
        echo "Il valore è".$back_url;
        ?>
        <label>Lenght:</label> 
        <input type="text" class="widefat" name="nw_page_image" id="nw_page_image" value="<?php echo $back_url; ?>" />
        <?php

        add_action("save_post", function($id){
            if(isset($_POST['nw_page_image'])){
                    update_post_meta(
                        $id,
                        'nw_page_image',
                        strip_tags($_POST['nw_page_image'])
                    );
                }
        });
    }
}

add_action("admin_init", function(){
    $PG = new nw_Page_Gallery();
}); 
```

有人可以告诉我出了什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T00:31:04.677

你正在做你`add_action("save_post",`应该在的最后一个地方......

那属于`__construct`，或者你正在做的事情：

```
public function add_meta_boxes(){
    add_action("add_meta_boxes", array($this, "add_meta_box_images"));
    add_action("save_post", function($id){
        if(isset($_POST['nw_page_image'])){
                update_post_meta(
                    $id,
                    'nw_page_image',
                    strip_tags($_POST['nw_page_image'])
                );
            }
    });
} 
```

请注意，您在`save_post`没有检查一堆事情的情况下（如果是修订版，如果进行自动保存）和*更多问题*，没有安全检查：[`wp_nonce_field`](http://codex.wordpress.org/Function_Reference/wp_nonce_field).

你可以在 WordPress Answers 找到很多很好的例子，查看[这个搜索查询](https://wordpress.stackexchange.com/search?tab=votes&q=%2badd_meta_box%20%2bsave_post%20is%3aanswer)。

# javascript - 使用 jquery 和 ajax 连接到 Rest 服务器

> ID：16126276
> 
> 赞同：0
> 
> 时间：2013-04-20T23:23:54.823
> 
> 标签：javascript, jquery, rest

我正在尝试使用 jquery/ajax 调用休息服务器休息服务器内置在 Codeigniter ajax 功能如下：

```
var req = $.ajax({
    type: 'GET',
    url: "http://localhost/projects/comp6300Server/index.php/resources/token//username/" + email + "/password/" + pword + "/institution/" + inst,
    contentType: "application/json; charset=utf-8",
    dataType: "json"
  }) 
```

生成的请求如下：

```
http://localhost/projects/comp6300Server/index.php/resources/token//username/etambie@yahoo.com/password/qwerty/institution/BCC 
```

返回的状态是“400 Bad Request”我认为问题可能出在“etambie@yahoo.com”中传递的电子邮件。ajax 有没有办法自动将'@'转换为'%40'，还是我必须手动转换字符串中的所有特殊字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T23:27:14.327

要检查的两件事：

1.  “_”参数可能被添加到每个请求都是唯一的。如果不这样做，则浏览器可能会尝试从其缓存中获取调用 URL 的结果，这可能不是您想要的。
2.  在错误的请求中...您确定要在您的网址中的“令牌”一词后添加两个斜杠吗？

# sql - VB Web 开发人员/SQL GETDATE()

> ID：16126277
> 
> 赞同：0
> 
> 时间：2013-04-20T23:23:55.400
> 
> 标签：sql, vb.net

所以我有一个带有 SQL 更新语句的探针。

当用户登录以下代码运行时，我正在运行它：

```
Dim UpdateSQL As String 
UpdateSQL = "UPDATE tblUsers SET LoginDate = GETDATE()" 
UpdateSQL = UpdateSQL & " WHERE ID = '" & Session("ID") & "'" 
```

我认为的问题在于，`Session("ID")`当我明确调用要更新的记录时，它工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:34:57.040

如果你`ID`是 type `int`，你应该省略`'`：

```
UpdateSQL = UpdateSQL & " WHERE ID = " & Session("ID") 
```

但要注意[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)！

此外，也许最好不要使用`Session("ID")`. 我猜你`ID`在登录用户时得到了。将值存储在变量中并在查询中使用此变量，而不是会话。

# php - Wordpress 钩子函数

> ID：16126279
> 
> 赞同：1
> 
> 时间：2013-04-20T23:24:27.917
> 
> 标签：php, wordpress, hook

我是新手，需要一点帮助。

这是我想更改的一些示例代码，我想将 h3 标签交换为 h5 标签。

这是第一页

```
<?php
        /**
         * woocommerce_before_subcategory_title hook
         *
         * @hooked woocommerce_subcategory_thumbnail - 10
         */
        do_action( 'woocommerce_before_subcategory_title', $category );
    ?>

    <h3>
        <?php
            echo $category->name;

            if ( $category->count > 0 )
                echo apply_filters( 'woocommerce_subcategory_count_html', ' <mark class="count">(' . $category->count . ')</mark>', $category );
        ?>
    </h3>

    <?php
        /**
         * woocommerce_after_subcategory_title hook
         */
        do_action( 'woocommerce_after_subcategory_title', $category );
    ?> 
```

我正在尝试替换这部分代码：

```
<h3>
        <?php
            echo $category->name;

            if ( $category->count > 0 )
                echo apply_filters( 'woocommerce_subcategory_count_html', ' <mark class="count">(' . $category->count . ')</mark>', $category );
        ?>
    </h3> 
```

有了这个：

```
<div class="caption-non-move">
      <h5>
        <?php
            echo $category->name;

            if ( $category->count > 0 )
                echo apply_filters( 'woocommerce_subcategory_count_html');
        ?>
      </h5>
    </div> 
```

这是我到目前为止所得到的。

```
<?php
// Add text to content-product-cat to help with styling
add_action('woocommerce_before_subcategory_title', 'woohook_before_subcategory_title');

function woohook_before_subcategory_title() {
ob_start();

}

add_action('woocommerce_after_subcategory_title', 'woohook_after_subcategory_title');

function woohook_after_subcategory_title() {
 $subcategory_title = ob_get_clean();
 echo "<div class='caption-non-move'>";
 echo str_replace('h3>', 'h5>', $subcategory_title);
}
?> 
```

这是第二页

```
<li <?php post_class( $classes ); ?>>

<?php do_action( 'woocommerce_before_shop_loop_item' ); ?>

<a href="<?php the_permalink(); ?>">

    <?php
        /**
         * woocommerce_before_shop_loop_item_title hook
         *
         * @hooked woocommerce_show_product_loop_sale_flash - 10
         * @hooked woocommerce_template_loop_product_thumbnail - 10
         */
        do_action( 'woocommerce_before_shop_loop_item_title' );
    ?>

    <h3><?php the_title(); ?></h3>

    <?php
        /**
         * woocommerce_after_shop_loop_item_title hook
         *
         * @hooked woocommerce_template_loop_price - 10
         */
        do_action( 'woocommerce_after_shop_loop_item_title' );
    ?>

</a>

<?php do_action( 'woocommerce_after_shop_loop_item' ); ?>

</li> 
```

在第二页我试图替换这部分代码

```
<h3><?php the_title(); ?></h3> 
```

和

```
<div class="caption"><h5><?php the_title(); ?></h5>
      <div class="category-main-points"><?php echo apply_filters( 'woocommerce_short_description', $post->post_excerpt ) ?>
      </div>
    </div> 
```

这是我到目前为止第二页的内容

```
<?php
// Add text to content-product-cat to help with styling
add_action('woocommerce_before_shop_loop_item_title', 'woohook_before_shop_loop_item_title');

function woohook_before_shop_loop_item_title() {
ob_start();

}

add_action('woocommerce_after_shop_loop_item_title', 'woohook_after_shop_loop_item_title');

function woohook_after_shop_loop_item_title() {
 $doh_title = ob_get_clean();
 echo "<div class='caption'>";
 echo str_replace('h3>', 'h5>', $doh_title);
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:54:22.670

如果 h3 标签嵌入到模板本身中（看起来是这样），并且您不想或不能更改原始代码。你可以做到这一点的唯一方法是使用 php 输出缓冲。

```
<?php
add_action('woocommerce_before_subcategory_title', 'woohook_before_subcategory_title');

function woohook_before_subcategory_title() {
ob_start();

}

add_action('woocommerce_after_subcategory_title', 'woohook_after_subcategory_title');

function woohook_after_subcategory_title() {
 $subcategory_title = ob_get_clean();
 echo str_replace('h3>', 'h5>', $subcategory_title);
}
?> 
```

另请注意，do_action 的正确挂钩是 add_action，而不是 add_filter。

# c++ - 添加更多代码会使代码无法编译

> ID：16126280
> 
> 赞同：0
> 
> 时间：2013-04-20T23:24:44.450
> 
> 标签：c++, visual-studio-2012, header, linker, compiler-errors

我有一个以开头的头文件

```
#if !defined(__GLOBAL_H)
#define  __GLOBAL_H 
```

然后是一些代码

```
#endif 
```

该代码仅包含函数声明，一些包含其他头文件和一些模板函数。但是，当我添加一行代码时，就会出现问题。我收到链接器错误，我添加的函数已在目标文件中定义。我使用 Visual Studio 2012 Premium 作为编译器。我试图从头文件中删除任何现有函数，这也通过编译器。另一方面，如果我向编译器添加任何可能是新的新行，它会拒绝编译，说它已经被定义。有没有人知道可能出了什么问题，或者我是否偶然发现了编译器本身的错误？（我非常怀疑） 编辑：解决方案是将函数声明为头文件，但在 CPP 文件中定义它。但真正的问题是，当我包含一个用于返回头文件中声明的类型的对象的头文件时，它不会编译。它的许多错误“Missing ; in front of *”是在其他头文件中声明的类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T23:30:10.180

尽管您没有显示使用任何代码或错误消息，但我猜测标题中存在函数定义（包括函数体的代码），而不仅仅是声明。

这些必须*要么*声明`inline`，这允许它们在多个翻译单元中定义；*或*移动到单个源文件中，只在标题中留下声明，因此它们仅在一个翻译单元上定义。

“一个定义规则”说（除非它们是内联的）函数在程序中可能只有一个定义。

此外，您的包含保护不应以下划线开头，也不应包含双下划线；像这样的名字是保留的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T23:28:42.637

将非内联函数定义添加到头文件通常是不好的。编译器将在它包含的**每个**文件中为函数生成代码，从而导致您遇到重新定义错误。相反，您应该在头文件中**声明**函数并将**定义**放在源文件 (.cpp) 中。

`Global.h`

```
#if !defined(__GLOBAL_H)
#define  __GLOBAL_H

void somefunction();  // <-- declaring the function.

#endif 
```

`SomeSource.cpp`

```
#include "Global.h"

// Here is where define the function
void somefunction()
{
} 
```

# vb.net - 在包含标签的面板中移动鼠标

> ID：16126282
> 
> 赞同：2
> 
> 时间：2013-04-20T23:24:57.753
> 
> 标签：vb.net, label, panel, mouseover

我想移动面板以响应 MouseMove 事件，但如果鼠标悬停在面板内的标签上，则不会触发此事件。（如果鼠标在面板内但在标签外，则会触发）。有没有简单的方法来解决这个问题？

我正在使用 Visual Basic 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:14:07.577

你可以让你自己的类派生自面板并使用这个[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onmousemove.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onmousemove.aspx)

```
Protected Overridable Sub OnMouseMove ( e As MouseEventArgs ) 
```

这将使您可以访问面板上的所有鼠标移动事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T11:08:31.857

找到了一种方法：

```
Private Sub MyControl_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Click
    'Something it does when clicked
End Sub

Private Sub MyControl_ControlAdded(ByVal sender As Object, ByVal e As System.Windows.Forms.ControlEventArgs) Handles Me.ControlAdded
    AddHandler e.Control.Click, AddressOf MyControl_Click
    AddHandler e.Control.ControlAdded, AddressOf MyControl_ControlAdded
End Sub 
```

我只需要对 MouseOver 做同样的事情。

# python - 带有奇怪正则表达式的 Django 过滤器

> ID：16126284
> 
> 赞同：0
> 
> 时间：2013-04-20T23:25:15.850
> 
> 标签：python, regex, django, django-models

通过一些遗留代码，我在模型过滤器中偶然发现了这个正则表达式：

```
"[[:<:]](%s)[[:>:]]" % value 
```

我知道内部方括号与文字方括号匹配，但我找不到对冒号和 lt/gt 的任何引用。

这应该匹配什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:00:12.590

正如您问题的评论者所指出的那样，这可能是一个错误，或者有人拉扯您的链条。我无法想象它有什么用处。但是要明确回答您的问题，这里有一些可以匹配的内容。这假设 Python 已经替换`%s`为`foo`

```
[]foo:]
:]foo:]
<]foo:]
<]foo>]
[]foo>]
[]foo:]
[]foo[] 
```

也许这是一次（失败的）尝试找到类似`<foo>`或`:foo:`

正则表达式的解释（我已经删除了`:`多余的重复项，并且似乎表明这完全是一个错误，或者不打算使用 Python 运行`re`）：

```
[[:<] # match one `[` or `:` or `<`
]     # one literal right bracket
(     # open capture group
foo   # literal string `foo`, or whatever replaced `%s`
)     # close capture group
[[>:] # match one `[` or `>` or `:` 
]     # one literal right bracket 
```

这是什么意思呢？你的猜测和任何人的一样好。

# javascript - TypeScript 和 Javascript 之间的显着区别是什么？

> ID：16126286
> 
> 赞同：9
> 
> 时间：2013-04-20T23:25:25.733
> 
> 标签：javascript, typescript

Typescript 和 Javascript 有什么区别？每种语言的设计目标是什么？这些设计目标有何不同？

打算与 Javascript 一起使用的库和框架的兼容性如何，例如 jquery，也与 Typescript 兼容？

一些例子会有所帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-21T07:28:03.157

我在一些小型业余项目中使用过 typescript，我确信它是完美的 Javascript 替代品。我最喜欢的功能是：

*   声明文件。使用声明文件，您可以将类型信息添加到您的 javascript 库中。此结构信息将为您提供 VisualStudio 中出色的智能感知支持。

*   “标准”面向对象。如果您来自 C# 或 Java 背景，您可能甚至不需要打字稿教程。它只是工作。你有类、接口、访问修饰符、扩展机制……

*   内置对模块的支持。Typescript 有一个稍微令人困惑的模块系统。您可以将代码拆分为多个 .ts 文件并附加它们，但您也可以创建不同的模块。

最后：语法。有时，影响最大的是小事。对我来说，打字稿的语法感觉很完美。让我举几个例子：

使用“：”键入注释并进行类型推断

```
var a = 5; //infers that a has the type number
var canvas : HTMLCanvasElement = document.getElementById("canvas"); 
// automatically casts to the canvas type. Intellisense will now suggest all the canvas specific methods 
```

用作列表、堆栈、...的数组

```
var array= []; //dynamic type
array.push(1);
array[1]=2;
array.pop();

var array2 : number[] = []; //typed array
array[0]=2;
array[1]="hello"  //compile time error. You've got to love the type system. Finally you can trust your collections 
```

以及带有箭头语法的函数作为 lambdas：

```
var array=[];
array.push(1);
//...
array.forEach((num)->{alert(num);});
//for single statement functions you can write
array.forEach((num)->alert(num)); 
```

现在类型化数组和 lambdas 结合起来：

```
var array: number[]=[];
array.push(1);
//...

//let's assume you want to work with the data in the array. You've got to filter it and process it. Lambdas will come in handy, as well as the type inference
array.filter((num)->num>3).map((num)->num*2).forEach((num)->alert(num));

// the first lambda with the comparison is fully type safe. The compiler knows the type of the array. Therefore it can infer the type of the parameter num and will check if num can be compared to a number 
```

我真的很喜欢使用打字稿。它将显着提高您的生产力。还有更多：~~[http://typescript.codeplex.com/wikipage?title=路线图](http://typescript.codeplex.com/wikipage?title=Roadmap)~~ [https://github.com/Microsoft/TypeScript/wiki/Roadmap](https://github.com/Microsoft/TypeScript/wiki/Roadmap)

0.9 版本将包含泛型，对于 1.x 版本，他们计划实现 async/await 调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T23:28:17.423

以下是关于 TypeScript 的视频集合：

[http://channel9.msdn.com/search?term=typescript](http://channel9.msdn.com/search?term=typescript)

基本上它为 Javascript 添加了可选的静态类型，因此静态类型的所有优点都带入了 Javascript。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-20T23:31:59.797

JQuery 和 Typescript 并不相互排斥，因为在 Typescript 中使用 JQuery 是相当普遍的。使用 Typescript 而不是 Javascript 的主要好处是增加了类型检查。这允许您创建接口并按合同开发。在较大的项目中，进行类型检查可能是有益的，但这是一种主观偏好。

# javascript - if (a) {} 抛出 uncaughtReferenceError

> ID：16126290
> 
> 赞同：1
> 
> 时间：2013-04-20T23:25:49.180
> 
> 标签：javascript, null, referenceerror

我需要能够检查一个变量是否存在（如果它没有将它分配给 {}）而不在 javascript 中引发错误。当我尝试这段代码时

```
if (a) {} 
```

它抛出 uncaughtReferenceError

我真正想做的是这样的事情而不会引发错误：

```
a = a || {} 
```

或者它看起来像这样

```
if (a) { a = {} } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T23:30:38.477

```
if (typeof a === 'undefined'){
  // variable is not available and you can write a = {}
} 
```

但`a = a || {}`很快

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T23:34:45.470

如果`a`是全局的，可以使用*全局对象*来避免错误。在浏览器中，该对象是`window`：

```
window.a = window.a || {}; 
```

或者，正如 Ozerich 建议的那样，您可以使用[`typeof`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof)不会引发参考错误的 ：

```
if (typeof a === 'undefined') {
    a = {};
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T23:36:37.337

```
a = a || {} 
```

根本行不通，因为`a`没有定义。但是您可以使用`typeof`它来检查它是否存在。

```
a = (typeof(a) === 'undefined' ? {} : a); 
```

# c - C中的文件，如何输入

> ID：16126293
> 
> 赞同：-1
> 
> 时间：2013-04-20T23:25:55.283
> 
> 标签：c, file, file-io, input

这是我的输出功能

```
void output(int n){

   FILE *fp;
   fp = fopen("sqrt.txt", "w");
   for(int i = 1; i < n; ++i){
       fprintf(fp, "%.2f\n", sqrt(i));
   }
   fclose(fp);
} 
```

我需要创建一个输入函数（它读取输出函数），提示用户输入要打开的文件的名称。我需要打印文件的内容。如果它是一个无效的文件名，程序应该退出。

如何开始这个练习？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:45:51.367

`fopen`返回一个可以为空的指针：如果是，则表示您的进程无法打开文件。所以你必须检查返回值`fopen`才能知道文件是否存在（我不确定，但如果文件存在并且返回值为NULL，那意味着你可能没有必要的权利）。

希望它可以提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T23:29:22.037

要在 C 中读取文件，您`fopen`几乎可以像以前一样使用该函数，只是将它传递给*ead*而不是*rite*。要在打开文件后读取文件，您可以使用或。该文件可以像往常一样关闭。**`r`*****`w`***`fread``fscanf``fclose`**

 **如果你想从用户而不是从文件中读取，你可以使用`fread`with`stdin`代替文件或（相当于`fscanf`）`scanf`。**

# ios - Delphi - 为 IOS、MacOsx 和 windows 编写应用程序？

> ID：16126294
> 
> 赞同：0
> 
> 时间：2013-04-20T23:25:56.057
> 
> 标签：ios, windows, macos, delphi

我想确保我正确理解 Delphi 的强大功能。有可能编写将在这三个平台上运行的代码：windows、MacOSx 和 IOS？！

1.  怎么会？
2.  是否可以将 delphi iOS 应用程序上传到 Appstore？
3.  该程序是否也可以在linux上运行？
4.  我应该学习哪个 Delphi 版本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T23:41:35.297

问：Delphi 程序可以在 Windows、MacOS 和 IOS 下运行吗？

答：是的。

但 Mac OSX 支持仅适用于较新版本的 Delphi XE，而 IOS 支持适用于 Delphi XE3，仍处于测试阶段：[http](http://www.embarcadero.com/products/delphi/ios-development) ://www.embarcadero.com/products/delphi/ios-development 。

Delphi 使用（失败的）[Kylix](http://en.wikipedia.org/wiki/Kylix_%28software%29)品牌支持 Linux。

[FreePascal](http://www.freepascal.org/)和[Lazarus](http://www.lazarus.freepascal.org/)项目是活跃的、完全开源的。

Free Pascal 支持 Linux ... Windows（Win32 和 Win64；Win95、Win/XP、Win7 等）、DOS、WinCE、OS/2、MorphOS、Nintendo GBA、Nintendo DS 和 Nintendo Wii ... FreeBSD、Haiku , Mac OS X/iOS/达尔文。甚至树莓派：[http ://wiki.freepascal.org/Lazarus_on_Raspberry_Pi](http://wiki.freepascal.org/Lazarus_on_Raspberry_Pi)

此外，.Net 上的 Delphi XE 应该在 Windows 和 Linux 实现（分别为 .Net 和 Mono）上运行。

'希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T17:09:52.280

有[Delphi FireMonkey](http://www.embarcadero.com/products/firemonkey)框架，为提供单源跨平台开发而开发。从 XE2 开始，它包含在 Delphi 中。

Delphi XE2 FireMonkey 原生支持 32 位和 64 位 Windows，以及 32 位 Mac OS X 和 iOS。

Delphi XE3 放弃了对 iOS 的支持。

2012 年 12 月，Embarcadero 研发团队[据报道一直致力于](http://delphibistro.com/?p=206)iOS 和 Android 支持，Windows 8 ARM 和 Linux 服务器也即将推出。

在 XE3 中可以将 OS X 应用程序上传到 App Store。Embarcadero 制作[了一个视频来说明如何做到这一点](http://www.youtube.com/watch?v=W6Zd71_L8aw)。重新添加 iOS 支持后，可能会包含对 App Store 的支持。

# ruby-on-rails - 列出具有不同数量元素的数组

> ID：16126295
> 
> 赞同：0
> 
> 时间：2013-04-20T23:26:17.653
> 
> 标签：ruby-on-rails, ruby

模型在我的 Rails 应用程序中的关联方式，如果我尝试使用这样的代码列出用户拥有的许可证

```
Licensed in <%= answer.user.licenses.map(&:state) %> 
```

它会像这样打印出来

```
Licensed in ["New York"] 
```

由于它是一个数组，我可以像这样删除数组括号

```
<%= answer.user.licenses.map(&:state)[0] %> 
```

我得到了我想要的结果

```
Licensed in New York 
```

但是，如果用户拥有多个许可证（这是可能的），这不是一个好的解决方案，因为应该列出每个许可证。

因此，我尝试了这个

```
 <% answer.user.licenses.map(&:state).each do |state| %>
    <%= state %>
   <% end %> 
```

但是，这不会在许可证之间添加“智能”逗号，智能意味着“在必要时添加注释，但不要在末尾添加注释”。

在这种情况下，代码应该是什么样子才能实现我想要做的事情。我不确定我应该用谷歌搜索的关键字来解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T23:27:48.853

尝试这个

```
answer.user.licenses.map(&:state).join(',') 
```

这将`,`在数​​组的每个元素之间添加。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T23:29:36.460

在 Rails 中，您可以使用`to_sentence`. 这会将 a 放在`,`所有元素之间，并将单词`and`放在倒数第二和最终单词之间。

# sql - SQL Unit Testing Stored Procedures

> ID：16126296
> 
> 赞同：14
> 
> 时间：2013-04-20T23:26:32.753
> 
> 标签：sql, sql-server, sql-server-2008

I am new to working with SQL database but have been confronted with testing my database. For security reasons any queries or updates are done through stored procedures.

It was suggested to me by a peer to use stored procedures to test other stored procedures. Is this a good or bad solution to unit testing my stored procedures to ensure they are doing what they are suppose to be doing?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-25T02:29:40.300

我使用 Visual Studio 找到了一个出色的解决方案： [Visual Studio 单元测试](http://msdn.microsoft.com/en-us/library/jj851203%28v=vs.103%29.aspx)

它允许您为 SQL 存储过程创建单元测试，您还可以使用正则表达式填充数据库 - 非常酷的东西。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-25T10:48:33.187

除了[DbUnit](http://www.dbunit.org/)和[NUnit](http://www.nunit.org/) ，如果你喜欢写tsql，你可以使用[tSQLt 。](http://tsqlt.org/)[tSQLt](http://tsqlt.org/)是一个用 tsql 编写的开源框架，用于为 tsql 编写单元测试用例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-26T04:35:30.533

来自 dbunit.org 的 DbUnit 是一个很好的框架。另一个很棒的工具是来自 tsqlt.org 的 TSqlUnit 和 tsqlt。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-20T23:37:44.693

我不知道哪个工具可以对 SQL 语句或存储过程进行单元测试。我通常会编写 SQL 脚本来对此进行测试。

1.  创建一个空的数据库，当然和原来的结构一样。
2.  准备数据（从原始数据库中导入一些数据）。
3.  调用存储过程。
4.  然后查看数据是否正确。

有时会写一些断言语句，例如

```
IF EXISTS (SELECT * FROM XX INNER JOIN XXX ON XXXXXXXX WHERE XXX=XXX)
     RAISEERROR XXXXXX 
```

如果抛出一些异常或错误，那么您可以检查存储过程。

但这是浪费时间。

我通常大部分时间检查存储过程的所有执行路径，并且只测试预期的主要错误点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-19T12:04:24.460

我一直使用[TST](http://tst.codeplex.com/)作为 SQL Server 的测试框架，结果非常好。它运行良好，我什至可以将它集成到 Team City 中的 CI 环境中。

关键是要非常小心如何设置测试数据。无论您选择什么测试框架，请务必应用测试数据构建器模式。如果不这样做，您可能很快就会遇到一些测试重构问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-22T04:28:02.760

我一直在使用 TestContainer(Mysql) 来模拟 mysql 服务器。使用 Kotlin/Java JUnit5 作为测试运行器。所以在测试用例中，它会

1.  启动测试容器
2.  测试所需的种子数据。
3.  执行存储过程。
4.  断言数据是准确的。

# http - 需要根据 python 中的第一个请求验证第二个 HTTP 请求

> ID：16126297
> 
> 赞同：0
> 
> 时间：2013-04-20T23:26:57.103
> 
> 标签：http, python-2.7

如果我手动尝试在浏览器中执行它，它可以工作，如果我输入第一个 url，然后输入第二个 url。但是如果我不输入第一个 url，第二个 url 失败。所以，我试图以编程方式使用第一个 url 获取 cookie 并在第二个 url 中使用它们。但它仍然给我 http 500 错误。请帮帮我。

到目前为止我的代码：

```
import urllib, urllib2, cookielib

cookie_jar = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cookie_jar))
urllib2.install_opener(opener)

# acquire cookie
url_1 = 'http://www.nsf.gov/awardsearch/simpleSearchResult?queryText=9&ActiveAwards=true'
req = urllib2.Request(url_1)
rsp = urllib2.urlopen(req)

# make 2nd request
url_2 = 'http://www.nsf.gov/awardsearch/ExportResultServlet?exportType=txt'
req = urllib2.Request(url_2)
rsp = urllib2.urlopen(req)
content = rsp.read()

# print result
import re
pat = re.compile('Title:.*')
print pat.search(content).group() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:24:15.073

如果我输入第一个 url，然后输入第二个 url，我会收到 500 错误。作为替代方案，您可以尝试使用 mechanize 看看您是否有更好的运气。您缺少第一个网址的开头引号。

# php - PHP std::Class check if attribute exists

> ID：16126301
> 
> 赞同：11
> 
> 时间：2013-04-20T23:27:19.990
> 
> 标签：php, twitter-search

I am using **Twitter Search API** and it returs an array of objects. I have to check for each object if it contains `['media']` array. Below is one of the objects with media attribute.

```
object(stdClass)#56 (4) {
  ["hashtags"]=>
  array(2) {
    [0]=>
    object(stdClass)#57 (2) {
      ["text"]=>
      string(9) "katyperry"
      ["indices"]=>
      array(2) {
        [0]=>
        int(62)
        [1]=>
        int(72)
      }
    }
    [1]=>
    object(stdClass)#58 (2) {
      ["text"]=>
      string(8) "katycats"
      ["indices"]=>
      array(2) {
        [0]=>
        int(73)
        [1]=>
        int(82)
      }
    }
  }
  ["urls"]=>
  array(0) {
  }
  ["user_mentions"]=>
  array(1) {
    [0]=>
    object(stdClass)#59 (5) {
      ["screen_name"]=>
      string(13) "perfkatyperry"
      ["name"]=>
      string(7) "KatyCat"
      ["id"]=>
      int(611836599)
      ["id_str"]=>
      string(9) "611836599"
      ["indices"]=>
      array(2) {
        [0]=>
        int(3)
        [1]=>
        int(17)
      }
    }
  }
  ["media"]=>
  array(1) {
    [0]=>
    object(stdClass)#60 (10) {
      ["id"]=>
      int(325747221490434048)
      ["id_str"]=>
      string(18) "325747221490434048"
      ["indices"]=>
      array(2) {
        [0]=>
        int(83)
        [1]=>
        int(105)
      }
      ["media_url"]=>
      string(46) "http://pbs.twimg.com/media/BIVJXz-CAAAHQ8M.jpg"
      ["media_url_https"]=>
      string(47) "https://pbs.twimg.com/media/BIVJXz-CAAAHQ8M.jpg"
      ["url"]=>
      string(22) "http://t.co/RYgQ8Srze5"
      ["display_url"]=>
      string(26) "pic.twitter.com/RYgQ8Srze5"
      ["expanded_url"]=>
      string(66) "http://twitter.com/perfkatyperry/status/325747221486239744/photo/1"
      ["type"]=>
      string(5) "photo"
      ["sizes"]=>
      object(stdClass)#61 (5) {
        ["medium"]=>
        object(stdClass)#62 (3) {
          ["w"]=>
          int(600)
          ["h"]=>
          int(600)
          ["resize"]=>
          string(3) "fit"
        }
        ["thumb"]=>
        object(stdClass)#63 (3) {
          ["w"]=>
          int(150)
          ["h"]=>
          int(150)
          ["resize"]=>
          string(4) "crop"
        }
        ["large"]=>
        object(stdClass)#64 (3) {
          ["w"]=>
          int(1024)
          ["h"]=>
          int(1024)
          ["resize"]=>
          string(3) "fit"
        }
        ["small"]=>
        object(stdClass)#65 (3) {
          ["w"]=>
          int(340)
          ["h"]=>
          int(340)
          ["resize"]=>
          string(3) "fit"
        }
        ["orig"]=>
        object(stdClass)#66 (3) {
          ["w"]=>
          int(1024)
          ["h"]=>
          int(1024)
          ["resize"]=>
          string(3) "fit"
        }
      }
    }
  }
} 
```

How can i do that?

Thanks!

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-20T23:30:29.127

使用循环+[`property_exists`](http://php.net/manual/de/function.property-exists.php)函数：

```
foreach($myArray as $obj)
{
  if(!property_exists($obj, 'media') || !is_array($obj->media))
  {
    echo("property 'media' does not exist in $obj");
    // throw exception, fill in default value for media array, set variable, whatever. 
  }
} 
```

# r - Storing the output of a function into a variable in R

> ID：16126306
> 
> 赞同：1
> 
> 时间：2013-04-20T23:28:19.317
> 
> 标签：r, while-loop, average, mean

I'm having trouble with storing the output of a function into a variable. I think it's best that I give some context to the problem I'm trying to work out. Suppose that players "a" and "r" play a game of tennis, the runningScoreFn sums the pointHistory vector and puts everything together in a nice data.frame

```
runningScoreFn = function(pointHistory){
playerUni = c("a", "r")
cols = sapply(playerUni, function(thisPlayer){
cumsum(pointHistory == thisPlayer)
})
names(cols) = playerUni
cbind(pointHistory, as.data.frame(cols))
} 
```

The oneEpxiermentGameFn that plays out a game of "a" v.s "r".The first player to win 4 points wins the game, but he must be ahead by at least 2 points. "r" has 60% chance of winning a point.

```
pRogerPoint = 0.6

oneExperimentGameFn = function(pRogerPoint){
game = c(rep("r",pRogerPoint * 100), rep("a", 100-pRogerPoint*100))
i = 4
keepGoing = TRUE
while(keepGoing){
whosePoint = sample(game, size=i, replace=TRUE)
if(sum(whosePoint=="r")-sum(whosePoint=="a")>=2){
success = TRUE
print(cbind(runningScoreFn(whosePoint),success=success))
keepGoing = FALSE
}else if(sum(whosePoint=="a")-sum(whosePoint=="r")>=2){
success = FALSE
print(cbind(runningScoreFn(whosePoint),success=success))
keepGoing = FALSE
}
i=i+1
}
} 
```

pRogerGameFn shows the probability that Roger wins the game.

```
pRogerGameFn = function(pRogerPoint, NExperiments){
RogerGameFn = lapply(1:NExperiments,function(dummy){

ok=oneExperimentGameFn(pRogerPoint)
})} 
```

Here I wish to store the output into the variable ok, but ok returns NULL. I think this has something to do with my oneExperimentGameFn. I also tried ok = RogerGameFn, but ok also returns NULL.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T00:12:25.630

该函数没有返回任何内容`oneExperimentGameFn`。如果您要返回特定值，请`return(.)`在函数末尾（或其他适当的地方）插入命令。

如果您只是想捕获打印语句，您可以使用`capture.output(.)`：

```
 ok <- capture.output(oneExperimentGameFn(pRogerPoint)) 
```

# jquery-mobile - 自定义 jQuery Mobile 复选框标签

> ID：16126312
> 
> 赞同：1
> 
> 时间：2013-04-20T23:28:47.643
> 
> 标签：jquery-mobile

我有一个`<fieldset>`带有自定义标签的复选框，其中包含项目名称和描述，如您在此处看到的：

![自定义复选框](https://i.stack.imgur.com/tW1ox.png)

演示：http: [//jsfiddle.net/Zw823/](http://jsfiddle.net/Zw823/)

在第三个复选框上，我需要有一个自定义的`<input type="number" />`下面描述，只有在选中它的复选框时才可编辑。可能吗？我尝试在`<div data-role="fieldcontain">`下方放置一个带有标签+输入的标签`<p>`，但`<input/>`数字未按预期显示...我怎样才能实现该目标？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T01:06:36.363

这就是我设法做你想做的事的方式。诀窍是在页面底部加载 jquery 脚本，这样您就不必调用`trigger('create')`和破坏您的代码。

```
<fieldset data-role="controlgroup" >
 <label for="check-1" >
  <a class="ui-li-heading" href="">Service 1</a>
  <p class="ui-li-desc">Lorem ipsum text</p>
 </label>
 <input type="checkbox" id="check-1" data-iconpos="left">
</fieldset>
<!-- rest of your data-role="page" -->
</div> <!-- end of page -->
<script src="jquery.min.js"></script>
<script src="jquery-mobile.min.js"></script>
</body>
</html> 
```

# iphone - 本地播放器iOS6认证失败

> ID：16126320
> 
> 赞同：2
> 
> 时间：2013-04-20T23:29:41.020
> 
> 标签：iphone, ios, objective-c, ios6, game-center

我正在 iOS6 中构建 Game Center 游戏，并且不断遇到问题。当前的让我难过——我的游戏每次尝试验证本地玩家的身份时都会失败。每次它触发我的“禁用游戏中心”功能，它都让我发疯。

```
- (void) disableGameCenter
{
    // Write something to disable gamecenter.
    // gameCenterAvailable = FALSE;
}

-(void)showAuthenticationDialogWhenReasonable:(UIViewController *)viewController
{
    // Pause Tasks Here
//    [[[(AppDelegate *)[[UIApplication sharedApplication] delegate] window] rootViewController] presentViewController:viewController animated:YES completion:nil];
}

- (void) authenticateLocalPlayer
{
    localPlayer = [GKLocalPlayer localPlayer];
    __weak GKLocalPlayer* weakLocalPlayer = localPlayer;

    weakLocalPlayer.authenticateHandler = ^(UIViewController *viewController, NSError *error)
    {
        if (viewController != nil)
        {
            [self showAuthenticationDialogWhenReasonable: viewController];
        }
        else if (weakLocalPlayer.isAuthenticated)
        {
            self.localPlayer = weakLocalPlayer;
        }
        else
        {
            [self disableGameCenter];
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:13:24.900

如果我错了，请原谅我，但我认为您没有运行身份验证方法。

试试这个方法：

```
- (void) authenticateLocalPlayer
{
    GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];
    [localPlayer authenticateWithCompletionHandler:^(NSError *error) {
        if (localPlayer.isAuthenticated)
        {
            NSLog(@"Authenticated");
        }
        else
        {
            NSLog(@"Not Authenticated");
        }
    }];
} 
```

# delphi - delphi7, how to check picture of a Timage existence

> ID：16126333
> 
> 赞同：0
> 
> 时间：2013-04-20T23:32:06.600
> 
> 标签：delphi, image, exists, ram

The title is bad so i will explain:

Hi, i created 4 images, in which the character (game character, a car) looks at different directions, every time you press the arrow keys (up looks at up, down looks at down, left looks at left, right looks at right), here is the code:

```
procedure TForm1.FormKeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
  var path,dleft,dright,dtop,dbot:string; 
begin
path:=paramstr(0);
dleft:=extractfilepath(path)+'Images\Pacman_Left.bmp';
dright:=extractfilepath(path)+'Images\Pacman_Right.bmp';
dtop:=extractfilepath(path)+'Images\Pacman_Top.bmp';
dbot:=extractfilepath(path)+'Images\Pacman_Bot.bmp';

  case Key of
     VK_UP:
    begin
      image6.Picture.LoadFromFile(dtop);
      image6.Top := image6.Top - 10;
      end;
     VK_DOWN:
       begin
       image6.Picture.LoadFromFile(dbot);
      image6.Top := image6.Top + 10;
      end;
    VK_LEFT:
       begin
       image6.Picture.LoadFromFile(dleft);
      image6.Left := image6.Left - 10;
      end;
    VK_RIGHT:
       begin
       image6.Picture.LoadFromFile(dright);
      image6.Left := image6.Left + 10;
  end;
  end;
end; 
```

I think the code i am using is terrible, because if i press a key over than a time, it will reload the image and it will keep doing it as long as i keep pressing the same key, such a waste of ram. What can i do about it? thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:36:41.200

一些改进：首先加载所有图像（例如在应用程序启动时）：

```
var
  bmCarLeft, bmCarRight, bmCarUp, bmCarDown: TBitmap;

...

bmCarLeft := TBitmap.Create;
bmCarLeft.LoadFromFile(dleft);
... 
```

然后你可以做

```
Image6.Picture.Assign(bmCarSomething) 
```

每次你需要改变它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T00:55:31.517

确实有很多方法可以做到这一点。
经典方式：
一张包含您的物品（汽车）所有状态的图片，并使用 Canvas.CopyRect() 方法从一张到另一张绘制适当的图像；
另一种方法：
将所有“精灵”加载到 TImageList 并使用 TImageList.Draw() 方法。
等等。
主要思想：使用目标图片的 Canvas 属性并在其上绘制您想要的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T03:47:20.087

从长远来看，更改管理图像的方式是最好的，但在短期内，最简单的解决方案是跟踪当前加载的图像，以便仅在实际需要时才可以加载新图像，例如：

```
type
  eWhichImage = (imgUp, imgDown, imgLeft, imgRight);

const
  ImgFiles: array[eWhichImage] of string = (dtop, dbot, dleft, dright);

procedure TMyForm.ImageNeeded(const Img: eWhichImage);
begin
  if image6.Tag <> Ord(Img) then
  begin
    image6.Picture.LoadFromFile(ImgFiles[Img]);
    image6.Tag := Ord(Img);
  end;
end; 
```

.

```
case Key of
  VK_UP:
  begin
    ImageNeeded(imgUp);
    image6.Top := image6.Top - 10;
  end;
  VK_DOWN:
  begin
    ImageNeeded(imgDown);
    image6.Top := image6.Top + 10;
  end;
  VK_LEFT:
  begin
    ImageNeeded(imgLeft);
    image6.Left := image6.Left - 10;
  end;
  VK_RIGHT:
  begin
    ImageNeeded(imgRight);
    image6.Left := image6.Left + 10;
  end;
end; 
```

# cocos2d-iphone - Accelometer different sensitivity at different tilts?

> ID：16126334
> 
> 赞同：0
> 
> 时间：2013-04-20T23:32:08.430
> 
> 标签：cocos2d-iphone, accelerometer

In my cocos2d game I would like to use tilt controls. The game is in landscape left only, for keeping it simple.

Now, if the user tilt device backwards, eg, tilt the screen upwards, the player sprite is moving up(+y). If the tilt is in the other direction(turning screen downwards) the sprite moves down. -(y)

The problem is that the device is pretty much in downward tilt from start and the player sprite moves down quickly. To get it moving up I have to tilt the device so far that I can´t see the screen.

So is there anyway to make the tilt less/more sensitive based on what direction the said tilt is?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:20:39.983

您需要为此设置过滤因子。请查看[http://www.raywenderlich.com/3611/how-to-make-a-space-shooter-iphone-game](http://www.raywenderlich.com/3611/how-to-make-a-space-shooter-iphone-game)上的教程，其中介绍了如何使用加速度计进行此类运动。

# nuget - 如何使用 Nuget 控制台获取 jQuery 版本列表？

> ID：16126338
> 
> 赞同：12
> 
> 时间：2013-04-20T23:32:32.830
> 
> 标签：nuget

我正在尝试解决我遇到的问题，jQuery 2.0 是 Nuget 想要通过 GUI 更新到的版本（[我可以将 Nuget 保留在 jQuery 1.9.x/1.x 路径上（而不是升级到 2 .x)?](https://stackoverflow.com/q/16125828/11912) )。

查看另一个问题的[答案](https://stackoverflow.com/a/5635453/11912)，看来我应该能够使用 Nuget 控制台来获取所有版本的 jQuery：

```
Get-Package -ListAvailable -Filter 'jQuery' -AllVersions 
```

然后我应该能够选择我想要的版本并更新它：

```
Install-Package jQuery -Version 1.9.1 
```

或者

```
Update-Package jQuery -Version 1.9.1 
```

不幸的是，虽然更新工作完美，但试图获取 jQuery 版本列表最终会抓住许多项目，这些项目仅在其标题中引用或包含 jQuery。

我想我可以使用`Open-PackagePage`，但这似乎很笨拙。

但是，我没有看到任何参数表明我可以在[官方文档](http://docs.nuget.org/docs/Reference/Package-Manager-Console-PowerShell-Reference#Get-Package)中按 Id 过滤。

有没有办法限制 Nuget 控制台仅按项目 ID 进行搜索？还是有其他方法可以使用 Nuget 控制台获取 jQuery 版本列表？我已经尝试在我的 jQuery 过滤器 ( ) 周围加上引号，`-filter 'jQuery'`但这也没有解决问题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-22T23:47:44.487

键入`Install-Package JQuery -Version`然后`Space`，然后`Tab`。

这将显示该软件包的所有可用版本的列表。

`Get-Package`及其选项的问题`-Filter`在于它同时搜索`ID`和`Description`字段。`-ID`我同意，如果有一个选项或类似的选项，那将非常有用。

# assembly - 在汇编中寻址

> ID：16126342
> 
> 赞同：2
> 
> 时间：2013-04-20T23:33:23.317
> 
> 标签：assembly, nasm, bios

我目前正在编写一个演示如何从头开始构建操作系统的教程。

在本教程的某些部分中，有一些汇编代码演示了寻址。

该代码只是尝试以 4 种不同的方式打印“X”。

该教程声称只有最后两种方法可以成功打印“X”。

当我在我的机器上尝试时，只有第三次尝试成功

这是代码：

```
mov ah,0x0e

;first attempt
mov al,the_secret
int 0x10

;second attempt
mov al,[the_secret]
int 0x10

;third attempt
mov bx,the_secret
add bx,0x7c00      ; 0x7c00 is where bios loads our boot sector code
mov al,[bx]
int 0x10

;fourth attempt
mov al,[0x7c1e] 
int 0x10

jmp $

the_secret:
    db "X"

times 510 -( $ - $$ ) db 0
dw 0xaa55 
```

现在，我明白为什么前两次尝试失败了。

我相信最后两次尝试应该打印 X

那么为什么第四次尝试无法打印 'X' ？

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T03:06:51.693

您需要了解段以了解为什么一个或另一个可能会或可能不会打印 X。

我不会逐案解释一切。相反，我会给你一些事实，一些拆解和一些讨论。

首先，BIOS 可以使用`CS=7C0h`and`IP=0`或`CS=0`and启动您的引导扇区`IP=7C00h`。两者都指向相同的物理地址：`7C0h * 16 + 0`= `0 * 16 + 7C00h`= `7C00h`。

目前假设在这两种情况下（`DS=CS`无论是，`7C0h`还是`0`

```
IP        instruction bytes instruction
00000000  B40E              mov ah,0xe
00000002  B01E              mov al,0x1e
00000004  CD10              int 0x10
00000006  A01E00            mov al,[0x1e]
00000009  CD10              int 0x10
0000000B  BB1E00            mov bx,0x1e
0000000E  81C3007C          add bx,0x7c00
00000012  8A07              mov al,[bx]
00000014  CD10              int 0x10
00000016  A01E7C            mov al,[0x7c1e]
00000019  CD10              int 0x10
0000001B  E9FDFF            jmp word 0x1b
0000001E  58                pop ax        ; this is your 'X'
... 
```

或者

```
IP        instruction bytes instruction
00007C00  B40E              mov ah,0xe
00007C02  B01E              mov al,0x1e
00007C04  CD10              int 0x10
00007C06  A01E00            mov al,[0x1e]
00007C09  CD10              int 0x10
00007C0B  BB1E00            mov bx,0x1e
00007C0E  81C3007C          add bx,0x7c00
00007C12  8A07              mov al,[bx]
00007C14  CD10              int 0x10
00007C16  A01E7C            mov al,[0x7c1e]
00007C19  CD10              int 0x10
00007C1B  E9FDFF            jmp word 0x7c1b
00007C1E  58                pop ax          ; this is your 'X'
... 
```

您现在可以清楚地看到为什么某些访问“X”的方法应该在一种情况下工作而在另一种情况下不应该工作，反之亦然。

现在，由于 BIOS 不保证引导`DS`扇区开始执行时的任何特定值，因此您可能有`DS≠CS`并且这里有四种可能的情况：

*   `CS=0`, `DS=7C0h`- 一些访问方法`X`将起作用
*   `CS=7C0h`, `DS=0`- 其他一些访问方法`X`也可以
*   `CS=0`, `DS≠7C0h`- 任何访问方法`X`都不起作用
*   `CS=7C0h`, `DS≠0`- 任何访问方法`X`都不起作用

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-20T23:47:48.583

使用 tasm 而不是 nasm 理论上它会起作用

# twitter-bootstrap - 使用 impress.js 引导导航栏

> ID：16126343
> 
> 赞同：1
> 
> 时间：2013-04-20T23:33:27.200
> 
> 标签：twitter-bootstrap, impress.js

是否可以将 boostrap 导航栏添加到 impress.js 网站？我在集成它时遇到了麻烦，而且我不明白如何为我的网站使用多个 CSS 样式表（第一次 Web 构建器）。

有什么想法吗？欢迎所有想法，因为我对这些东西是个白痴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T14:38:15.287

你可以看看[http://www.scala-tour.com/#/welcome](http://www.scala-tour.com/#/welcome) 我刚刚偶然发现它，他们一起使用了 impress.js 和一个引导菜单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-08T14:31:15.640

只需在头部添加一个链接标签：

`<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">`

并让`<nav></nav>`外面`<div id="impress"></div>`。

# objective-c - Cocoa 在 NSMenu 或 NSMenuItem 上获取屏幕位置

> ID：16126344
> 
> 赞同：5
> 
> 时间：2013-04-20T23:33:48.333
> 
> 标签：objective-c, cocoa

是否有可能获得其中一个`NSMenu`或其中一个的位置（框架） `NSMenuItems`？

我尝试向其中一个菜单项添加自定义视图并获取其框架，但它返回零。我需要的只是相对于屏幕的 x 坐标。

**编辑**

`[[view window] frame]`在菜单可见之后调用`NSView`内部是可行的，但是从 10.6 开始不推荐使用。除非有人发布更好的方法，否则我会使用它...`NSMenuItem``window`

# php - PHP：从 HTML 表单输入到可打印的 PDF

> ID：16126349
> 
> 赞同：0
> 
> 时间：2013-04-20T23:34:36.657
> 
> 标签：php, pdf

我有一个包含 PHP 代码的简单页面，该页面允许用户输入值并通过点击按钮，执行计算并在几个 html 文本字段中输出结果。

我想要一个打印版本，即用户输入值并通过点击另一个按钮，生成一个 PDF 文件，其中基本上包含一些格式化文本和计算值，以便他们可以打印它。

有可能用纯PHP来做吗？我很新手，但仍然比我一无所知的java好。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T23:39:02.857

尝试查看 PHP 手册中的 PDF 函数：[http ://www.php.net/manual/en/pdf.examples-basic.php](http://www.php.net/manual/en/pdf.examples-basic.php)

# mysql - Can't execute MySQL stored procedure

> ID：16126353
> 
> 赞同：4
> 
> 时间：2013-04-20T23:34:58.217
> 
> 标签：mysql, stored-functions

I'm dipping my toe into using stored functions with MySQL and am having trouble.

Having created a function and tested it, I don't seem to be able to allow other users to execute it. From the documentation, it seems that I need to grant EXECUTE access to the other users, but that doesn't appear to be sufficient.

I've put together a couple of scripts that I believe demonstrate the problem:

```
# This script creates two databases with a stored function in each.
#
# On one database, tester in granted all privileges.
# On the other, tester only gets a few.
#
# We want to find the minimum privileges required to allow tester to execute the
# stored function.
#
# This script must be run by an administrative user, i.e. root

CREATE DATABASE test1;

DELIMITER $$
CREATE FUNCTION test1.foo () RETURNS VARCHAR(255) DETERMINISTIC
BEGIN
   RETURN ('garp');
END$$

DELIMITER ;
GRANT ALL PRIVILEGES ON test1.* TO 'tester'@'localhost';

#

CREATE DATABASE test2;
DELIMITER $$
CREATE FUNCTION test2.foo () RETURNS VARCHAR(255) DETERMINISTIC
BEGIN
    RETURN ('garp');
END$$

DELIMITER ;

GRANT EXECUTE ON PROCEDURE test2.foo TO 'tester'@'localhost'; 
```

and

```
# This script tests whether tester can access the stored functions
#
# It should be executed by tester

SELECT 'test1.foo(): ', test1.foo ();
SELECT 'test2.foo(): ', test2.foo (); 
```

When I run execute the second script, I get an error:

```
$ mysql --user=tester --password=tester --skip-column-names < testScript2.sql
test1.foo():    garp
ERROR 1370 (42000) at line 6: execute command denied to user 'tester'@'localhost' for routine 'test2.foo' 
```

I have no doubt that I'm missing something obvious, but I can't see what that is. I imagine that I've got something wrong in the `GRANT EXECUTE...` statement in the first script, and am deeply suspicious of my use of single quotes, but I recall trying most of the combinations of placement and inclusion of single quotes without success.

I'd be really grateful to anyone who can point out my error.

For reference, I'm running `Server version: 5.1.67-0ubuntu0.10.04.1 (Ubuntu)` (on Ubuntu!).

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T00:09:21.757

test2.foo 是一个函数而不是一个过程。

尝试：

```
GRANT EXECUTE ON FUNCTION test2.foo TO 'tester'@'localhost'; 
```

* * *

（我能够在本地重现该问题并确认此更改有效。）

# javascript - Javascript索引数组问题

> ID：16126355
> 
> 赞同：0
> 
> 时间：2013-04-20T23:35:17.013
> 
> 标签：javascript

嗨，我有一个包含以下数字的数组，但是当我循环通过 eachNode 函数（迭代 13 次）时，它会重复所有列表元素 13 次。我测试了所有内容，但仍然产生错误，我是否正确执行了 for 循环？

```
list[61,67,78]
var len = list.length;

fd.graph.eachNode(function (node) { // loops thru all node id's in graph (13)
    for (var i = 0; i < len; ++i) {
        if (i in list) {
            var nody = list[i]; // I put the number in a variable
            var nodess = fd.graph.getNode(nody); //this takes the number and matches it with a node id, it "odjectify" it
            if (node.id != nodess.id) { //  if the list nodes are not the same
                node.setData('alpha', 0); //
                node.eachAdjacency(function (adj) { // this make the unmatched nodes disappear
                    adj.setData('alpha', 0, 'end');
                });
            }
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:46:24.840

此行是不需要的：

```
if (i in list) 
```

`in`如果其右操作数包含由其左操作数指定的属性，则该关键字返回 true。将它与数组一起使用时，它会返回意外结果。这个关键字的行为在这种情况下是无关紧要的，所以你应该简单地把它去掉。

此外，您需要`list`像这样创建数组：

```
var list = [61, 67, 78]; 
```

> ...但是，当我循环`eachNode`（迭代 13 次）时，它会重复所有列表元素 13 次

它没有，它实际上迭代了`eachNode`13 次以上。您还创建了一个 for 循环，它将按`list`数组的长度遍历数组。

* * *

现在您已经向我提供了有关您想要什么的更多详细信息，这里是更新的代码。我希望这个对你有用：

```
fd.graph.eachNode(function (node) {
    var flag = false;

    for (var i = 0; i < len; ++i)
    {
        var nody = list[i];
        var nodess = fd.graph.getNode(nody);

        if (node.id == nodess.id) {
            flag = true; break;
        }
    }

    if (flag)
    {
        node.setData('alpha', 0);
        node.eachAdjacency(function (adj) {
           adj.setData('alpha', 0, 'end');
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T23:38:04.160

这是设计行为：

您遍历图形（如您所说的 13 次），然后在每次迭代中遍历您的数组（3 个项目）。

如果您只想在数组上循环一次，只需将其移出外循环

# javascript - Create HTML table using Javascript

> ID：16126357
> 
> 赞同：23
> 
> 时间：2013-04-20T23:36:25.047
> 
> 标签：javascript, html-table

My question will ultimately be related to this site:

[http://dbtest.net16.net/ethanol-01.html](http://dbtest.net16.net/ethanol-01.html)

EDIT: View unencrypted page source code here >>> [http://dbtest.net16.net/ethanol-22.html](http://dbtest.net16.net/ethanol-22.html)

This is an HTML form with results calculated using JavaScript. My goal is to display a table of 2-6 columns and variable number of rows depending on user input (form would be modified). My problem is that I am not fully understanding how to get the table created in JavaScript after the user clicks the Calculate button. I have found some potential good answers but apparently don't fully understand it all. Running the following code is somewhat like what I want my output to display.

```
<html>
    <!-- http://www.java2s.com/Tutorial/JavaScript/0220__Array/OutputarrayelementinaHTMLtableformat.htm -->

    <head>
        <title>Table of Numbers</title>
    </head>

    <body>
         <h1>Table of Numbers</h1>

        <table border="0">
            <script language="javascript" type="text/javascript">
                <!--

                var myArray = new Array();
                myArray[0] = 1;
                myArray[1] = 2.218;
                myArray[2] = 33;
                myArray[3] = 114.94;
                myArray[4] = 5;
                myArray[5] = 33;
                myArray[6] = 114.980;
                myArray[7] = 5;

                document.write("<tr><td style='width: 100px; color: red;'>Col Head 1</td>");
                document.write("<td style='width: 100px; color: red; text-align: right;'>Col Head 2</td>");
                document.write("<td style='width: 100px; color: red; text-align: right;'>Col Head 3</td></tr>");

                document.write("<tr><td style='width: 100px;'>---------------</td>");
                document.write("<td style='width: 100px; text-align: right;'>---------------</td>");
                document.write("<td style='width: 100px; text-align: right;'>---------------</td></tr>");

                for (var i = 0; i < 8; i++) {
                    document.write("<tr><td style='width: 100px;'>Number " + i + " is:</td>");
                    myArray[i] = myArray[i].toFixed(3);
                    document.write("<td style='width: 100px; text-align: right;'>" + myArray[i] + "</td>");
                    document.write("<td style='width: 100px; text-align: right;'>" + myArray[i] + "</td></tr>");
                }

                 //-->
            </script>
        </table>
    </body>

</html> 
```

If I can get the test table to be created and populated with my test data using my actual javascript file, then I should then be able to figure the rest myself (I think).

Following are a couple of the best answers I could find so far:

[http://jsfiddle.net/drewnoakes/YAXDZ/](http://jsfiddle.net/drewnoakes/YAXDZ/)

The above link originated in stackoverflow but I can't seem to find the original post at this time.

[http://www.java2s.com/Tutorial/JavaScript/0220__Array/OutputarrayelementinaHTMLtableformat.htm](http://www.java2s.com/Tutorial/JavaScript/0220__Array/OutputarrayelementinaHTMLtableformat.htm)

Any help is appreciated. Simpler is better due to my limited experience.

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-20T23:42:23.317

问题是，如果每次插入新标签时都尝试使用 JS编写 a`<table>`或 a`<tr>`或标签，浏览器会尝试关闭它，因为它会认为代码有错误。`<td>`

不要逐行编写表格，而是将表格连接到一个变量中，并在创建后将其插入：

```
<script language="javascript" type="text/javascript">
<!--

var myArray    = new Array();
    myArray[0] = 1;
    myArray[1] = 2.218;
    myArray[2] = 33;
    myArray[3] = 114.94;
    myArray[4] = 5;
    myArray[5] = 33;
    myArray[6] = 114.980;
    myArray[7] = 5;

    var myTable= "<table><tr><td style='width: 100px; color: red;'>Col Head 1</td>";
    myTable+= "<td style='width: 100px; color: red; text-align: right;'>Col Head 2</td>";
    myTable+="<td style='width: 100px; color: red; text-align: right;'>Col Head 3</td></tr>";

    myTable+="<tr><td style='width: 100px;                   '>---------------</td>";
    myTable+="<td     style='width: 100px; text-align: right;'>---------------</td>";
    myTable+="<td     style='width: 100px; text-align: right;'>---------------</td></tr>";

  for (var i=0; i<8; i++) {
    myTable+="<tr><td style='width: 100px;'>Number " + i + " is:</td>";
    myArray[i] = myArray[i].toFixed(3);
    myTable+="<td style='width: 100px; text-align: right;'>" + myArray[i] + "</td>";
    myTable+="<td style='width: 100px; text-align: right;'>" + myArray[i] + "</td></tr>";
  }  
   myTable+="</table>";

 document.write( myTable);

//-->
</script> 
```

如果您的代码位于外部 JS 文件中，请在 HTML 中创建一个带有 ID 的元素，您希望表格出现在该元素中：

```
<div id="tablePrint"> </div> 
```

而在 JS 中，而不是`document.write(myTable)`使用以下代码：

```
document.getElementById('tablePrint').innerHTML = myTable; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T08:00:44.073

这个漂亮的代码在这里创建了一个表，每个 td 都有数组值。不是我的代码，但它帮助了我！

```
var rows = 6, cols = 7;

for(var i = 0; i < rows; i++) {
  $('table').append('<tr></tr>');
  for(var j = 0; j < cols; j++) {
    $('table').find('tr').eq(i).append('<td></td>');
    $('table').find('tr').eq(i).find('td').eq(j).attr('data-row', i).attr('data-col', j);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-16T09:32:16.757

```
In the html file there are three input boxes with userid,username,department respectively. 
```

这些输入框用于获取用户的输入。

用户可以向页面添加任意数量的输入。

单击按钮时，脚本将启用调试器模式。

在 javascript 中，要启用调试器模式，我们必须在 javascript 中添加以下标记。

/************************************************* ***********************\

```
 Tools->Internet Options-->Advanced-->uncheck
    Disable script debugging(Internet Explorer)
    Disable script debugging(Other)

    <html xmlns="http://www.w3.org/1999/xhtml" >

    <head runat="server">

    <title>Dynamic Table</title>

    <script language="javascript" type="text/javascript">

    // <!CDATA[

    function CmdAdd_onclick() {

    var newTable,startTag,endTag;

    //Creating a new table

    startTag="<TABLE id='mainTable'><TBODY><TR><TD style=\"WIDTH: 120px\">User ID</TD>
    <TD style=\"WIDTH: 120px\">User Name</TD><TD style=\"WIDTH: 120px\">Department</TD></TR>"

    endTag="</TBODY></TABLE>"

    newTable=startTag;

    var trContents;

    //Get the row contents

    trContents=document.body.getElementsByTagName('TR');

    if(trContents.length>1)

    {

    for(i=1;i<trContents.length;i++)

    {

    if(trContents(i).innerHTML)

    {

    // Add previous rows

    newTable+="<TR>";

    newTable+=trContents(i).innerHTML;

    newTable+="</TR>";

    } 

    }

    }

    //Add the Latest row

    newTable+="<TR><TD style=\"WIDTH: 120px\" >" +
        document.getElementById('userid').value +"</TD>";

    newTable+="<TD style=\"WIDTH: 120px\" >" +
        document.getElementById('username').value +"</TD>";

    newTable+="<TD style=\"WIDTH: 120px\" >" +
        document.getElementById('department').value +"</TD><TR>";

    newTable+=endTag;

    //Update the Previous Table With New Table.

    document.getElementById('tableDiv').innerHTML=newTable;

    }

    // ]]>

    </script>

    </head>

    <body>

    <form id="form1" runat="server">

    <div>

    <br />

    <label>UserID</label> 

    <input id="userid" type="text" /><br />

    <label>UserName</label> 

    <input id="username" type="text" /><br />

    <label>Department</label> 

    <input id="department" type="text" />

    <center>

    <input id="CmdAdd" type="button" value="Add" onclick="return CmdAdd_onclick()" />
    </center>

    </div>

    <div id="tableDiv" style="text-align:center" >

    <table id="mainTable">

    <tr style="width:120px " >

    <td >User ID</td>

    <td>User Name</td>

    <td>Department</td>

    </tr>

    </table>

    </div>

    </form>

    </body>

    </html> 
```

# java - JavaFx，路径转换，直线

> ID：16126363
> 
> 赞同：0
> 
> 时间：2013-04-20T23:37:03.430
> 
> 标签：java, animation, javafx

我正在开发一个 javaFx 应用程序。如何进行直线过渡？我有两个矩形，我希望第一个矩形转到第二个矩形。这是不起作用的代码：

```
 Rectangle r1 = rectangles.get(numbers[0]);
    Rectangle r2 = rectangles.get(numbers[1]);

    TranslateTransition translateTransition = new TranslateTransition();

    translateTransition.setNode(r1);
    translateTransition.setDuration(Duration.millis(1000));
    translateTransition.setFromX(r1.getX());
    translateTransition.setToX(r2.getX());

    TranslateTransition translateTransition2 = new TranslateTransition();

    translateTransition2.setNode(r2);
    translateTransition2.setDuration(Duration.millis(1000));
    translateTransition2.setFromX(0);
    translateTransition2.setToX(r1.getX() - r2.getX());
    translateTransition2.play();

    translateTransition.play(); 
```

# php - ARRAY 中的多行

> ID：16126368
> 
> 赞同：-2
> 
> 时间：2013-04-20T23:37:20.963
> 
> 标签：php, mysql

我正在使用 Twilio REST API 并使用它从 MySQL 数据库向每个人发送 TEXT。

这是我到目前为止所拥有的......（发送文本部分）

```
$result = mysql_query("SELECT * FROM numbers",$conn);
$people = array(

    while($row = mysql_fetch_array($result))
    {
        "+1".$row['number'] => $row['name'],
    }
); 
```

这显然不起作用，但这就是我想要做的......但无法弄清楚如何。

这是我所拥有的，但只发送第一个

```
$result = mysql_query("SELECT * FROM numbers",$conn);

while($row = mysql_fetch_array($result))
{
    $people = array(
             "+1".$row['number'] => $row['name'],
                   );
} 
```

帮助！乍得。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:39:16.863

```
while($row = mysql_fetch_array($result))
  {
    $people[] = array(
        "+1".$row['number'] => $row['name'],
    );
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T23:39:24.613

```
$people = array();
while ($row = mysql_fetch_array($result)) {
    $people["+1".$row['number']] = $row['name'];
} 
```

这是你想要的吗？

你每次都`$people`用一个新数组覆盖你的变量，所以你只有最后一行。（不是第一个）

您必须为每个键分配键以填充`$people`数组。

# performance - How to check which index in a loop is executing without slow down process?

> ID：16126371
> 
> 赞同：0
> 
> 时间：2013-04-20T23:37:40.543
> 
> 标签：performance, loops, for-loop

What is the best way to check which index is executing in a loop without too much slow down the process?

For example I want to find all long fancy numbers and have a loop like

```
for( long i = 1; i > 0; i++){
    //block
} 
```

and I want to learn which i is executing in real time.

Several ways I know to do in the block are printing i every time, or checking if(i % 10000), or adding a listener.

Which one of these ways is the fastest. Or what do you do in similar cases? Is there any way to access the value of the i manually?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:46:06.640

我最近的大部分经验都是使用 Java，所以我会写这样的东西

```
import java.util.concurrent.atomic.AtomicLong;

public class Example {

    public static void main(String[] args) {
        AtomicLong atomicLong = new AtomicLong(1); // initialize to 1
        LoopMonitor lm = new LoopMonitor(atomicLong);
        Thread t = new Thread(lm);
        t.start(); // start LoopMonitor

        while(atomicLong.get() > 0) {
            long l = atomicLong.getAndIncrement(); // equivalent to long l = atomicLong++ if atomicLong were a primitive
            //block
        }
    }

    private static class LoopMonitor implements Runnable {
        private final AtomicLong atomicLong;

        public LoopMonitor(AtomicLong atomicLong) {
            this.atomicLong = atomicLong;
        }

        public void run() {
            while(true) {
                try {
                System.out.println(atomicLong.longValue()); // Print l
                Thread.sleep(1000); // Sleep for one second
                } catch (InterruptedException ex) {}
            }
        }
    }
} 
```

即使在 32 位平台上，大多数 AtomicLong 实现也可以在一个时钟周期内设置，这就是为什么我在这里使用它而不是原始 long（你不想无意中打印半集 long）；查看您的编译器/平台详细信息，看看您是否需要这样的东西，但如果您在 64 位平台上，那么无论您使用哪种语言，您都可以使用原始 long。修改后的 for 循环不会对效率造成太大影响 - 您已将原始 long 替换为对 long 的引用，因此您添加的只是指针取消引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T00:06:37.730

这并不容易，但可能在不影响进程的情况下探测该值的唯一方法是使用另一个线程访问共享内存中的循环变量。线程库因系统而异，因此我无能为力（在 Linux 上我可能会使用 pthreads）。“监控”线程可能会做一些事情，比如每分钟探测一次值，在两者之间进行 sleep()，因此允许第一个线程不间断地运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T02:58:36.040

要获得空成本报告（在多 CPU 计算机上）：将您的索引设置为“全局”属性（例如全类），并有一个单独的线程来读取和报告索引值。
该报告可以是基于计时器的（每秒 5 次左右）。

Rq：也许你还需要一个布尔值来说明“我们在循环中吗？”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T06:05:14.827

**易失性和缓存**

如果您打算在 C/C++ 中执行此操作，并按照之前的建议使用单独的监视器线程，那么您必须使全局/静态循环变量 volatile。您不希望编译器决定为循环变量使用寄存器。无论如何，一些工具链都会做出这样的假设，但明确说明它并没有什么坏处。

然后是缓存的小问题。如今，一个单独的监视器线程最终将在一个单独的核心上结束，这意味着两个单独的缓存子系统必须就值是什么达成一致。这将不可避免地对循环的运行时间产生很小的影响。

**实时约束？**

所以这就引出了一个问题，即你的循环到底有多实时？我怀疑您的时序约束是否依赖于它在特定数量的 CPU 时钟周期内运行。两个原因，a) 没有现代操作系统可以保证你必须在裸机上运行，​​b) 现在大多数 CPU 在你背后改变自己的时钟频率，所以你不能指望对应于特定实时间隔的特定时钟周期数。

**功能丰富的解决方案**

因此，假设您的实时要求不受限制，您可能希望做一个功能更强大的监控线程。拥有一个受信号量保护的共享结构，您的循环偶尔会更新该信号量，并且您的监控线程会定期检查并报告进度。为了获得最佳性能，监视器线程将获取信号量，复制结构，释放信号量，然后检查/打印结构，最大限度地减少信号量锁定时间。

与先前答案中建议的方法相比，这种方法的唯一优点是您可以报告的不仅仅是循环变量的值。您可能还想报告来自循环块的更多信息。

如今，Linux 上的 C 语言中的互斥信号量非常快。除非您的循环块非常轻量级，否则单个互斥锁的运行时开销可能不会很大，尤其是当您每 1000 次循环迭代更新共享结构时。一个体面的操作系统会将你的线程放在不同的核心上，但为了更好的形式，你会让监控线程的优先级高于运行循环的线程。如果两个线程确实最终在同一个核心上，这将确保监视确实发生。

# python - 是否有更易读（和有效）的方式来迭代 ndarray？

> ID：16126372
> 
> 赞同：2
> 
> 时间：2013-04-20T23:37:41.103
> 
> 标签：python, arrays, numpy

有很多方法可以遍历 2D 数组。下面的例子。

这些方法中的大多数，虽然很实用，但让我觉得难以阅读。有些非常消耗内存，并且大多数不能很好地推广到 N 维。

有没有一种更易读的方法，最好是一种计算效率高并且很好地推广到 ND 的方法来迭代 ndarray 中的所有坐标集？

```
arr = np.arange(100).reshape([10,10])
x,y = np.indices(arr.shape)

for i,j in zip(x.flat,y.flat):
    dosomething(arr[i,j])

for i,j in np.nditer(np.indices(arr.shape).tolist()):
    dosomething(arr[i,j])

for i in xrange(arr.shape[0]):
    for j in xrange(arr.shape[1]):
        dosomething(arr[i,j])

for i,j in itertools.product(range(arr.shape[0], range.shape[1])):
    dosomething(arr[i,j])

# on further thought, maybe this one is OK?
for ind in xrange(arr.size):
    i,j = np.unravel_index(ind, arr.shape)
    dosomething(arr[i,j])

for i,j in itertools.product(*map(xrange, arr.shape)):
    dosomething(arr[i,j]) 
```

（后者来自[Pythonic 迭代 3D 数组的方式](https://stackoverflow.com/questions/1316068/pythonic-way-of-iterating-over-3d-array)）

我真正想要回答的问题是“我如何获得数组的`x`,索引？” `y`答案是：

```
for i,j in (np.unravel_index(ind,arr.shape) for ind in xrange(arr.size)):
    dosomething(arr[i,j]) 
```

`(np.unravel_index(ind,arr.shape) for ind in xrange(arr.size))`是一个相当易读和高效的生成器。

但是，对于标题中提出的问题，其他（链接的）答案更好（`np.nditer`, `np.enumerate`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:45:40.143

从您的示例中，您似乎想以 C 连续样式迭代您的数组。如果您只关心元素而不关心索引，则可以使用以下内容：

```
for e in arr.flat:
    dosomething(e) 
```

当然，它比所有替代方案都快。但是，如果您想使用索引进行一些时髦的事情，则不能使用此方法（为此使用[ndenumerate](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndenumerate.html#numpy.ndenumerate) - 您的链接 SO 答案）。这可以与 N-dims 一起使用。

# asp.net - 不确定用于同步的 SQL Server 锁的类型

> ID：16126374
> 
> 赞同：4
> 
> 时间：2013-04-20T23:37:48.940
> 
> 标签：asp.net, sql-server, sql-server-2008, tsql, synchronization

我有一个 ASP.NET Web 应用程序，它填充 SQL Server 2008 数据库表，如下所示：

```
INSERT INTO tblName1 (col1, col2, col3)
VALUES(1, 2, 3) 
```

我还有一个单独的服务应用程序，它通过首先重命名该表，然后创建一个空表来处理该表的内容（在后台）：

```
SET XACT_ABORT ON
BEGIN TRANSACTION

--Rename table
EXEC sp_rename 'tblName1', 'temp_tblName1'

--Create new table
CREATE TABLE tblName1(
id INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
col1 INT,
col2 INT,
col3 INT
)
COMMIT

SET XACT_ABORT OFF
--Begin working with the 'temp_tblName1' table 
```

我不确定在这种情况下我需要在`tblName1`表上使用哪个 SQL 锁？

PS。为您提供这两个代码示例运行的频率：第一个可能每秒运行几次（尽管大多数时候，频率较低），第二个 - 一天两次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T16:36:16.247

正如一些评论所建议的那样，请考虑以不同的方式执行此操作。您可能会受益于使用[快照隔离级别](http://msdn.microsoft.com/en-us/library/ms189122%28v=sql.100%29.aspx)。使用快照隔离需要在数据库上`ALLOW_SNAPSHOT_ISOLATION`设置。`ON`此设置默认关闭，因此您需要检查是否可以打开它。

一旦您能够使用快照隔离，您就不需要更改您的`INSERT`语句，但您的其他流程可能会更改为：

```
SET XACT_ABORT ON
SET TRANSACTION ISOLATION LEVEL SNAPSHOT
BEGIN TRANSACTION

-- Do whatever this process does, but don't rename the table.

-- If you want to get rid of the old records:
DELETE [tblName1] WHERE 1 = 1
-- Then
COMMIT TRANSACTION 
```

如果您确实出于某种原因确实需要创建一个新的非临时表，您可能需要在进入事务之前这样做，因为在快照隔离期间允许您执行的操作有一些限制。

# rubymotion - Best way to display static text in a view RubyMotion

> ID：16126375
> 
> 赞同：0
> 
> 时间：2013-04-20T23:37:55.530
> 
> 标签：rubymotion

I have a two view app. The root view has items that simply have a details view. In that details view is a simple section label (the item name) followed by a paragraph description.

What is the best way to display this static text? Is the best option UILabel?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T06:44:10.640

通常 UILabel 可以正常工作。确保将 lineBreakMode 设置为零 (0)，以便它自动换行。

# twitter-bootstrap - LESS：访问级联的子级

> ID：16126387
> 
> 赞同：1
> 
> 时间：2013-04-20T23:39:24.723
> 
> 标签：twitter-bootstrap, less

假设我在无法修改的 .less 文件中有这样的声明（实际上它在 Twitter Bootstrap 中）：

```
.nav-pills {
  > li {
    &.active > a,
    &.active > a:hover,
    &.active > a:focus {
      color: #fff;   
    }
  }
} 
```

如您所见，它包括`active`类中 li 内锚点的样式。

我的导航`current`在 html 标记中使用该类用于相同的目的（我也无法修改标记）。如何使用 LESS将`active`声明应用于我的元素？`current`

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T17:07:17.393

## 使用 LESS 1.4.0

LESS 的最新（当前为 beta）版本允许您通过如下`:extend()`函数执行此操作：

```
.nav-pills > li.current > a {
  &:extend(.nav-pills > li.active > a);
  &:hover {
    &:extend(.nav-pills > li.active > a:hover);
  }
  &:focus {
    &:extend(.nav-pills > li.active > a:focus);
  }
} 
```

产生这个 CSS：

```
.nav-pills > li.active > a,
.nav-pills > li.active > a:hover,
.nav-pills > li.active > a:focus,
.nav-pills > li.current > a,
.nav-pills > li.current > a:hover,
.nav-pills > li.current > a:focus {
  color: #fff;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T23:51:44.003

也许我错过了一些东西，但有没有理由不能添加和编译以下内容？

```
.nav-pills {
> li {
&.current > a,
&.current > a:hover,
&.current > a:focus {
  color: #fff;   
}
}
} 
```

无需尝试更改活动代码，它不会在您的情况下使用。

# php - How do I use Twitter's API to fetch tweets from someone's timeline ? (problems with authentication !)

> ID：16126388
> 
> 赞同：0
> 
> 时间：2013-04-20T23:39:30.823
> 
> 标签：php, twitter, twitter-oauth

So I'm trying to get the latest tweets posted by a user using a PHP script (and caching the results into a text file). I'm using the request [https://api.twitter.com/1/statuses/user_timeline.json?count=5&screen_name=google](https://api.twitter.com/1/statuses/user_timeline.json?count=5&screen_name=google) and it's been working fine as a public client, but in order to get better control over my API hit limit I need to authenticate my requests.

I've tried the method shown at [https://dev.twitter.com/docs/auth/application-only-auth](https://dev.twitter.com/docs/auth/application-only-auth) , but after I successfully connect I get the error "Your credentials do not allow access to this resource" (why ?). So I've tried to use the OAuth method (which looks frighteningly complicated for a hobbyist like me), and downloaded the [TwitterOAuth library](https://github.com/abraham/twitteroauth). But I'm still having trouble connecting ! I put my credentials in the config.php file, but I have no idea where to go from there. The documentation seems to be hinting that I need to manually login to Twitter to authorize the application's connection token... or something. Apparently I need to redirect to some callback URL (what even ?!) and get a short-term connection to enable a long-term connection password which I have to store for later ? What is this madness ?

I was initially under the impression that I could just fetch data from Twitter's [RSS feeds](https://api.twitter.com/1/statuses/user_timeline.rss?screen_name=google) but those can't be accessed from scripts for some reason (unlike the [Google News](http://news.google.com/?output=rss) RSS feed which fetches just fine). It seems I've gotten myself into something much more complicated than what I signed for. Isn't there an easier (and saner) way of doing this ? Or is nothing decidedly simple ?

I apologize for being such an easily-confused dullard, but my head is spinning.

Thanks !

* * *

**Edit :** after digging around some more I decided to just use PHP curl to fetch the raw page, and then do some Xpath voodoo to get the tweets and the time they were posted at. Of course, this is CPU-intensive, far from stable, and probably not a practice that pleases the folks at Twitter; it also only returns the last 20 tweets (which is thankfully enough for my needs).

However, Cormac Driver's response below about Temboo is certainly a method I'll be investigating next time I need to do something like that.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:31:57.293

Temboo 提供了一种使用 OAuth 向 Twitter 进行身份验证的简单方法。该过程分为两个步骤：

1.  `InitializeOauth`. 此步骤返回 Twitter 授权 URL，Twitter 帐户持有人可以访问该 URL 以授予对您的脚本的访问权限。

2.  `FinalizeOauth`. 此步骤返回您的脚本代表用户向 Twitter API 发出经过身份验证的请求所需的访问令牌。

有关如何在此处使用 PHP 执行此操作的完整详细信息：[https ://www.temboo.com/library/Library/Twitter/OAuth/](https://www.temboo.com/library/Library/Twitter/OAuth/)

您可以在此页面上查看 Temboo 如何为 Facebook 处理 OAuth 的示例。提供了 PHP 源代码，它几乎与您为 Twitter 执行相同操作所需的代码相同。

（全面披露：我在 Temboo 工作）

# ios - UITableView crashes when pressing delete button in edit mode

> ID：16126390
> 
> 赞同：0
> 
> 时间：2013-04-20T23:39:58.310
> 
> 标签：ios, xcode, uitableview

When editing the UITableView, the app usually crashes with this error after someone presses the "delete" button on the uitableviewcell. This usually happens for the first item in the table view, but has happened to others. I'm sorry for being so vague, I can provide any additional infomation. I'm just very confused on why this happens and why it happens when it does.

*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '-[__NSCFArray removeObjectAtIndex:]: mutating method sent to immutable object'

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.navigationItem.leftBarButtonItem = self.editButtonItem;
}

-(void)viewWillAppear:(BOOL)animated{
    [_matchIDS removeAllObjects];
    _matchIDS = [[NSMutableArray alloc]init];
    _matchIDS = [[NSUserDefaults standardUserDefaults] valueForKey:@"allMatchIDS"];
    [self.tableView reloadData];
}

-(void)viewWillDisappear:(BOOL)animated{
    NSUserDefaults * defaults = [NSUserDefaults standardUserDefaults];
    [defaults setValue:_matchIDS forKey:@"allMatchIDS"];
    [defaults synchronize];
}

#pragma mark - Table View

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return _matchIDS.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];
    cell.textLabel.text = _matchIDS[indexPath.row];
    return cell;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [_matchIDS removeObjectAtIndex:indexPath.row];
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:11:33.860

该错误是由于试图从 _matchIDS 数组中删除一个元素而导致的，该数组是不可变的。

```
 [_matchIDS removeObjectAtIndex:indexPath.row]; 
```

您尝试在此处使数组可变：

```
-(void)viewWillAppear:(BOOL)animated{
    [_matchIDS removeAllObjects];
    _matchIDS = [[NSMutableArray alloc]init];
    _matchIDS = [[NSUserDefaults standardUserDefaults] valueForKey:@"allMatchIDS"]; // <---
    [self.tableView reloadData];
} 
```

但上面标记的行替换了 _matchIDS，丢弃了您实例化的 NSMutableArray。您可能想改用 mutableCopy 方法，结果如下：

```
_matchIDS = [[[NSUserDefaults standardUserDefaults] valueForKey:@"allMatchIDS"] mutableCopy]; 
```

# wpf - How i change ListView Item Background Color according to listview item HarfNotu value in wpf

> ID：16126393
> 
> 赞同：17
> 
> 时间：2013-04-20T23:40:17.877
> 
> 标签：wpf, listviewitem

My ListView looks like: [http://oi36.tinypic.com/ek5n3o.jpg](http://oi36.tinypic.com/ek5n3o.jpg)

My listview xaml:

```
<ListView  Name="notListView" Width="550" HorizontalAlignment="Left">
        <ListView.View>
        <GridView AllowsColumnReorder="true">
            <GridViewColumn Header="Ders Kodu" Width="100" DisplayMemberBinding="{Binding Path=DersKodu}" />
            <GridViewColumn Header="Ders Adı" Width="200" DisplayMemberBinding="{Binding Path=DersAdi}" />
            <GridViewColumn Header="Vize" Width="50" DisplayMemberBinding="{Binding Path=Vize}" />
            <GridViewColumn Header="Final" Width="50" DisplayMemberBinding="{Binding Path=Final}" />
            <GridViewColumn Header="Ortalama" Width="60" DisplayMemberBinding="{Binding Path=Ortalama}" />
            <GridViewColumn Header="Harf Notu" Width="60" DisplayMemberBinding="{Binding Path=Harf}" />
        </GridView>
    </ListView.View>
</ListView> 
```

My .cs code:

```
notListView.ItemsSource = notGoruntule(1, 1); // notGoruntule() function returns an Arraylist, which contains my "Notlar" objects. 
```

I tried this:

```
ListViewItem lvitem = (ListViewItem)notListView.Items[0];
lvitem.Background = Brushes.Red; 
```

But first line throws:

```
Unable to cast object of type 'OBS_Interface_5.Classes.Notlar' to type 'System.Windows.Controls.ListViewItem'. 
```

How i solve this problem?

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-04-21T00:06:29.000

您可以直接`Style`在`ListViewItem`xaml 中，

例子：

假设您的“Harf”变量是一个字符串，您可以尝试

```
<ListView Name="notListView"
          Width="550"
          HorizontalAlignment="Left">
  <ListView.Resources>
    <Style TargetType="{x:Type ListViewItem}">
      <Style.Triggers>
        <DataTrigger Binding="{Binding Harf}"
                      Value="1">
          <Setter Property="Background"
                  Value="Red" />
        </DataTrigger>
      </Style.Triggers>
    </Style>
  </ListView.Resources>
  ... 
```

现在任何`ListView`“Harf”值为 1 的行都将具有“红色”`Background`

# java - java方法签名中返回类型中的扩展关键字

> ID：16126394
> 
> 赞同：8
> 
> 时间：2013-04-20T23:40:23.257
> 
> 标签：java

我正在浏览[commons-chain的代码](http://commons.apache.org/proper/commons-chain)

我发现了很多类似于这个的方法签名：

`public <CMD extends Command<K, V, C>> CMD getCommand(String commandID)`

此签名与以下内容有何不同：

`public Command getCommand(String commandID)`

我能理解的唯一合乎逻辑的原因是进行类型检查。但我仍然无法从设计的角度弄清楚这样做的原因。

还有其他一些原因可以说明为什么要在 java 方法的返回类型中 使用和**扩展？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T00:52:40.883

区别在于三个方面：

1.  返回的类型是*类型化*的（不是原始类型）
2.  返回的类型可以是特定的子类
3.  该方法可以访问类型 K、V 和 C

作为一个类型化的方法，java可以推断类型

所有这一切意味着这将编译（没有强制转换）：

```
Command<String, Integer, String> x = getCommand(commandID); 
```

或者

```
SomeTypedSubClassOfCommand x = getCommand(commandID); 
```

编译器将根据分配给结果的变量的类型来推断（即找出）方法的类型。

此外，您可以使用以下语法显式指定子类：

```
Command<String, Integer, String> x = ContainingClass.<CommandSubClass<String, Integer, String>>getCommand(commandID); 
```

# java - 在 JNI 中链接静态库

> ID：16126399
> 
> 赞同：1
> 
> 时间：2013-04-20T23:40:49.920
> 
> 标签：java, java-native-interface

我是 JNI 的新手。

我想将一个静态库（比如 libFoo.a）链接到我正在创建的动态库中。这个动态库是从我的 Java 类中调用的。

这可能吗？如果有怎么办？

```
gcc -I$JAVA_DIR/include -I$JAVA_DIR/include/linux  -o libXY.so -shared jni/xy.c libFoo.a 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:44:33.470

问：我想将一个静态库（比如 libFoo.a）链接到我正在创建的动态库中。这可能吗？

答：当然。只需在构建共享 .so 的链接命令中包含您的 .a 静态库。

这与 JNI 本身无关 -*任何*共享二进制文件（*nix .so 或 Windows .dll）都可以以这种方式链接到共享库。

这些链接应该会有所帮助：

*   [可以使用静态链接使用库构建共享库吗？](https://stackoverflow.com/questions/1344830/possible-to-build-a-shared-library-with-static-link-used-library)

*   [http://www.tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html](http://www.tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html)

# c# - 平板电脑 WPF Windows 桌面应用程序 - 滚动问题

> ID：16126400
> 
> 赞同：7
> 
> 时间：2013-04-20T23:40:51.537
> 
> 标签：c#, wpf, windows-8, scrollview, scrollviewer

我在平板电脑 ASUS ME400 Intel Atom Z2760 上运行我的桌面应用程序 WPF。一切正常，但是当我使用scrollviewer时，在用手指滚动结束时用手指滚动移动（支持平移模式horizo​​ntalOnly），窗口移动，你会看到任务栏片刻。如果我用手指滚动看不到效果，直到在滚动条中找到才到达。

我怎样才能避免这种窗口移动？当我在滚动条末尾滚动时，如何锁定我的窗口并且不允许移动？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-05-03T09:25:18.830

在`ScrollViewer`启用平移的对象中，为`ManipulationBoundaryFeedback`.

```
<ScrollViewer PanningMode="Both" ManipulationBoundaryFeedback="ScrollViewer_ManipulationBoundaryFeedback">
    <!-- your content is here... -->
</ScrollViewer> 
```

在代码隐藏中，您必须通过将`Handled`属性设置为来处理事件`true`：

```
void ScrollViewer_ManipulationBoundaryFeedback(object sender, ManipulationBoundaryFeedbackEventArgs e)
{
    e.Handled = true;
} 
```

*（通过将`Handled`属性设置为`true`，我们实际上是在告诉我们该事件已被我们处理，因此我们将在消息到达`Window`/之前停止消息在可视树中的冒泡过程`Application`- 无论哪个会导致抖动。）*

# java - 如何让每个相同字符的计数只显示一次？

> ID：16126401
> 
> 赞同：0
> 
> 时间：2013-04-20T23:41:00.387
> 
> 标签：java

我有这个工作正常的代码，但问题是结果如下所示。

```
public static int[] countlist (char[] list){

    int [] counts = new int[list.length];

    for (int k = 0; k < list.length; k++) {

         for (int m = 0; m < list.length; m++) {
            if (list[m] == list[k]){
                counts[m]++;
            }
        }

        System.out.println( "Letter " + list[k] + " = " + counts[k]);
        }
    } 
```

输出：

```
Letter T = 1
Letter T = 2
Letter N = 1
Letter T = 3
Letter Z = 1
Letter N = 2
Letter H = 1
Letter H = 2 
```

我该怎么做才能获得每个字母的输出一次？非常感谢例如，我希望输出如下所示

```
Letter T = 3
Letter N = 2
Letter Z = 1
Letter H = 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T23:48:25.930

使用 HashMap 来保存单个字符的计数/频率。

遍历您的列表并为每个元素执行以下操作：

*   如果 HashMap 中不存在该元素，则以频率 1 插入它
*   如果元素存在于 HashMap 中，则将频率增加 1。

最后，打印 HashMap 的键/值对将为您提供所需的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T00:07:43.803

```
public static void countlist (char[] list)
{
    Map<Character, Integer> map = new HashMap<Character, Integer>();

    for (int k = 0; k < list.length; k++)
    {
        if (map.containsKey(list[k]))
        {
            map.put(list[k], map.get(list[k]) + 1);
        }
        else
        {
            map.put(list[k], 1);
        }
    }

    for (Map.Entry<Character, Integer> entry : map.entrySet()) 
    {
        System.out.println( "letter = " + entry.getKey() + ", count = " + entry.getValue() );
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T00:03:11.923

存储结果的原始数组是强制性的吗？您可以使用 Hashmap 并将字母定义为键，将计数器定义为值。

```
Map<Character, Integer> charactersOccurrences = new HashMap<Character, Integer>();

for (int k = 0; k < list.length; k++) {
    if (charactersOccurrences.containsKey(list[k])) {
        charactersOccurrences.put(list[k], charactersOccurrences.get(k) + 1);
    } else {
        charactersOccurrences.put(list[k], 1);
    }
} 
```

然后打印：

```
for(char aLetter : charactersOccurrences.keySet()) {
    System.out.println("Letter " + aLetter + " = " + charactersOccurrences.get(aLetter));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T23:45:31.247

我对java还不是很熟悉，我现在可以快速输入代码，但基本上你可以创建一个数组，键是字母，值是字母的值

在 PHP 中，这将起到类似的作用：

```
$array = array();

$array['T'] = 1;
$array['T'] = 2;
$array['T'] = 3;
$array['N'] = 2;
$array['Z'] = 1;
$array['H'] = 2;

echo print_r($array); //Resulting in T=>3, N=>2, Z=>1, H=>2 
```

如果您不希望（例如） T 的第一个值被覆盖，您所要做的就是实现一个 IF 语句，检查 $array['T'] 是否已经存在。

编辑：在您提供的代码中，您必须在我标记的地方实现它：

```
public static int[] countlist (char[] list){

    int [] counts = new int[list.length];

    for (int k = 0; k < list.length; k++) {

         for (int m = 0; m < list.length; m++) {
            if (list[m] == list[k]){
                counts[m]++;
            }
        }

        //====Insert the code here====

        System.out.println( "Letter " + list[k] + " = " + counts[k]);
    }
} 
```

# javascript - 在我的堆栈中，流可以在哪里解决问题、更换零件和/或使其变得更好？

> ID：16126403
> 
> 赞同：1
> 
> 时间：2013-04-20T23:41:30.490
> 
> 标签：javascript, node.js, stream, highcharts

如果我看一下流库景观，我会看到很多不错的东西（例如映射/减少流），但我不确定如何有效地使用它们。

假设我已经有一个提供静态文件的快速应用程序，并且有一些连接到 MongoDB 数据库服务器的 JSON REST 处理程序。我有一个客户端繁重的应用程序，可以在小部件和图表（想想 highcharts）中显示信息，用户过滤、深入了解信息等。我想转向使用界面的实时更新，这是完美的小工具我认为将 node.js 引入项目的借口，但是数据并不是真正实时的，因此将新数据推送到很多客户端并不是我想要实现的（还）。我只是想要一个快速的体验。

我想使用 browserify，它使我可以访问浏览器中的 node.js 流 API（以及更多..），并且鉴于数据集的庞大，处理是在服务器端完成的（通过 JSONP 上的后端 API）。

我知道在某些时候大多数连接已经表示为流，但是我不确定在哪里可以有效地在其他地方使用流来解决问题；

1.  现在，当滑块/输入发生变化时，旋转加载器会出现在受影响的组件中，直到新的 JSON 到达并被解析并准备好写入图表/小部件。在两者之间放置一个 Node.JS 服务器，是否可以通过流式传输而不是请求/响应 JSONPified 数字数据块来加快应用程序的交互性？
2.  假设我有一些时间序列数据。是否可以重用流，以便当我说我只想查看数据的子集（按时间）时，我可以让流重新发送它的数据，过滤掉我不关心的数据？
3.  将数据流式传输到（高）图表会比使用 for 循环和数组更好的用户体验吗？

# html - 传递 HTML 的 id 单击时标记到 VBScript 子例程

> ID：16126405
> 
> 赞同：0
> 
> 时间：2013-04-20T23:41:35.707
> 
> 标签：html, vbscript, hta

我有大量的 VBScript，我打算提供一个 GUI 前端（使用 HTA）。在 HTA 窗口的顶部，我创建了一个下拉菜单栏，如下所示（没有包含 CSS 代码，因为我认为它不会添加任何相关信息）。

我已经尝试了一段时间，但无法弄清楚如何将单击的 li 的 id 值传递给 MenuClicked 子例程。

我以前使用 HTML 的经验是使用它来创建静态文档，所以我可能完全搞错了。如果是这种情况，请告诉我。

```
<script type="text/VBScript">
  Sub MenuClicked()
    Select Case WhatDoIPutHere
      Case "#Option1A" : Sub_Option1A
      Case "#Option1B" : Sub_Option1B
      Case "#Option2A" : Sub_Option2A
      Case "#Option2B" : Sub_Option2B
      Case "#Option3"  : Sub_Option3
    End Select
  End Sub
</script>

<div>
  <ul id="nav" class="drop" onClick="MenuClicked()">
    <li><a>Option1A</a>
      <ul>
        <li id="#Option1A"><a>Option 1A</a></li>
        <li id="#Option1B"><a>Option 1B</a></li>
      </ul>
    </li>
    <li><a>Option 2</a>
      <ul>
        <li id="#Option2A"><a>Option 2A</a></li>
        <li id="#Option2B"><a>Option 2B</a></li>
      </ul>
    </li>
    <li id="#Option3"><a>Option 3</a></li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:24:25.143

由于 HTA 由 Internet Explorer 引擎运行，因此您应该使用该[`srcElement`](http://msdn.microsoft.com/en-us/library/ie/ms534638%28v=vs.85%29.aspx)属性

```
<script type="text/VBScript">
  Sub MenuClicked()
    Dim target

    ' .parentNode because the <a> element is really what's being clicked,
    ' but we want the ID of the <li> element
    Set target = window.event.srcElement.parentNode

    Select Case target.id
      Case "#Option1A" : Sub_Option1A
      Case "#Option1B" : Sub_Option1B
      Case "#Option2A" : Sub_Option2A
      Case "#Option2B" : Sub_Option2B
      Case "#Option3"  : Sub_Option3
    End Select
  End Sub
</script>

<div>
  <ul id="nav" class="drop" onClick="MenuClicked()">
    <li><a>Option1A</a>
      <ul>
        <li id="#Option1A"><a>Option 1A</a></li>
        <li id="#Option1B"><a>Option 1B</a></li>
      </ul>
    </li>
    <li><a>Option 2</a>
      <ul>
        <li id="#Option2A"><a>Option 2A</a></li>
        <li id="#Option2B"><a>Option 2B</a></li>
      </ul>
    </li>
    <li id="#Option3"><a>Option 3</a></li>
  </ul>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T00:25:17.883

这是我的做法：

```
<script type="text/VBScript">
  Sub MenuClicked(obj)
    Select Case obj.id
      Case "#Option1A" : Sub_Option1A
      Case "#Option1B" : Sub_Option1B
      Case "#Option2A" : Sub_Option2A
      Case "#Option2B" : Sub_Option2B
      Case "#Option3"  : Sub_Option3
    End Select
  End Sub
</script>

<div>
  <ul id="nav" class="drop">
    <li><a>Option1A</a>
      <ul>
        <li id="#Option1A" onClick="MenuClicked Me"><a>Option 1A</a></li>
        <li id="#Option1B" onClick="MenuClicked Me"><a>Option 1B</a></li>
      </ul>
    </li>
    <li><a>Option 2</a>
      <ul>
        <li id="#Option2A" onClick="MenuClicked Me"><a>Option 2A</a></li>
        <li id="#Option2B" onClick="MenuClicked Me"><a>Option 2B</a></li>
      </ul>
    </li>
    <li id="#Option3" onClick="MenuClicked Me"><a>Option 3</a></li>
  </ul>
</div> 
```

# ios - 带有 UITableView 的两指 UISwipeGestureRecognizer

> ID：16126407
> 
> 赞同：0
> 
> 时间：2013-04-20T23:41:54.623
> 
> 标签：ios, uitableview, uigesturerecognizer, uiswipegesturerecognizer

我希望向 UITableView 添加一个手势识别器，它使用两个手指向上或向下，就像 Twitterific 用于切换状态栏一样。

这是我的代码

```
[self.tableView setMultipleTouchEnabled:YES];
[self.tableView.panGestureRecognizer setMaximumNumberOfTouches:1];

UISwipeGestureRecognizer *swipeUpGesture = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(doubleSwipeUp)];
[swipeUpGesture setNumberOfTouchesRequired:2];
[swipeUpGesture setDirection:UISwipeGestureRecognizerDirectionUp];
[swipeUpGesture setDelaysTouchesBegan:YES];
[self.tableView addGestureRecognizer:swipeUpGesture];

UISwipeGestureRecognizer *swipeDownGesture = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(doubleSwipeDown)];
[swipeDownGesture setNumberOfTouchesRequired:2];
[swipeDownGesture setDirection:UISwipeGestureRecognizerDirectionDown];
[swipeUpGesture setDelaysTouchesBegan:YES];
[self.tableView addGestureRecognizer:swipeDownGesture]; 
```

我在 viewDidLoad 中调用它并且没有调用 doubleSwipeUp。

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:51:52.880

首先，我会检查以确保 self.tableView.multipleTouchEnabled 设置为 YES。

如果这没有帮助，那么可以尝试设置 swipeUpGesture.delaysTouchesBegan = YES;

# php - TYPO3 6.0：如何包含 php 脚本

> ID：16126410
> 
> 赞同：2
> 
> 时间：2013-04-20T23:42:46.160
> 
> 标签：php, typo3

在我的本地机器上，我导入了从我的站点下载的数据库（TYPO3 4.1.6）。然后我解决了我遇到的所有小问题，它运行良好。然后我在子域的服务器上安装了 TYPO3 6.0.4 并导入了新数据库。它工作得很好，除了一个不起作用的插件：Lumonet PHP Include。

事实上，我可以在修复该扩展中的一行后测试脚本，但是一旦安装，由于另一个已弃用的功能存在问题，目前似乎无法修复，因此无法添加新记录。

我需要在两页中运行一个 php 脚本，但不知道该怎么做。除了 Lumonet 之外，没有包含 php 脚本的新扩展，所以我被卡住了。

我已经读过可以使用 Typoscript 包含这样的脚本，但我不知道该怎么做，因为我几年前通过主要复制粘贴片段编写了一些 Typoscript。

在这方面的任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T11:43:09.070

您可以使用[USER 或 USER_INT 内容对象](http://docs.typo3.org/typo3cms/TyposcriptReference/ContentObjects/UserAndUserInt/Index.html)包含自定义 PHP 函数。该页面上给出了一个示例。

# python - 排列、迭代器、递归和双循环

> ID：16126413
> 
> 赞同：1
> 
> 时间：2013-04-20T23:43:01.077
> 
> 标签：python

这是一个迭代字符串中字母排列的函数：

```
def permutations(items):
    for x in _permutations_rec('', items, len(items)):
        yield x

def _permutations_rec(current, items, n):
    if len(current) == n:
        yield current
    else:
        for item, other_items in pick_item(items):
            for next_ in _permutations_rec(current+item, other_items, n):
                yield next_

def pick_item(items):
    for i, item in enumerate(items):
        yield item, items[:i] + items[i+1:]

# print permutations
for x in permutations('abc'):
    print x 
```

在某种程度上`_permutations_rec`，`else`我有两个循环。在第一个中，我选择附加到`current`字符串的下一个项目。第二个循环迭代下一个部分结果并产生它们。因此，第二个`for`只是处理递归调用的迭代器并“冒泡”它的结果。在递归调用产生结果时，我经常发现这种模式，例如在使用[backtracking](http://en.wikipedia.org/wiki/Backtracking)时。

问题：

有没有一种惯用的、优雅的方式来只使用一个循环，而不是两个？虽然我知道这两个循环没有任何问题，但也许有一些迭代器功夫可以让我只使用一个（越简单越好）。

**编辑：**

*   我知道`itertools.permutations`，我`permutations`的只是一个玩具例子

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T23:51:03.927

在现代 Python 中，您可以使用[yield from](http://docs.python.org/3/whatsnew/3.3.html#pep-380)来避免最内层循环。是时候升级了？:^)

```
 for item, other_items in pick_item(items):
        yield from _permutations_rec(current+item, other_items, n) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T23:45:01.230

因为[“简单胜于复杂”](http://www.python.org/dev/peps/pep-0020/)，您可以简单地使用[itertools.permutations](http://docs.python.org/3.3/library/itertools.html#itertools.permutations)：

```
from itertools import permutations

for p in permutations('abc'):
    print(p) 
```

输出：

```
('a', 'b', 'c')
('a', 'c', 'b')
('b', 'a', 'c')
('b', 'c', 'a')
('c', 'a', 'b')
('c', 'b', 'a') 
```

如果你仍然想使用你的函数，你可以使用[@DSM 解释](https://stackoverflow.com/questions/16126413/permutations-iterator-recursion-and-double-loop/16126462#16126462)`yield from`的新 python3 的语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T01:52:57.403

您的较短版本，几乎相同：

```
In [1]: def permutations(items):
   ....:     if len(items) == 0:
   ....:         yield items
   ....:     else:
   ....:         for n in range(len(items)):
   ....:             for ps in permutations(items[:n]+items[n+1:]):
   ....:                 yield ps + items[n:n+1]
   ....:

In [2]: list(permutations('abc'))
Out[2]: ['cba', 'bca', 'cab', 'acb', 'bac', 'abc']

In [3]: list(permutations(list('abc')))
Out[3]:
[['c', 'b', 'a'],
 ['b', 'c', 'a'],
 ['c', 'a', 'b'],
 ['a', 'c', 'b'],
 ['b', 'a', 'c'],
 ['a', 'b', 'c']] 
```

顺便说一句：Scala 中的等效代码如下：

```
scala> def perm[T](xs: List[T]): Iterator[List[T]] = xs match {
     |   case Nil => Iterator(Nil)
     |   case _ => for(x <- xs.iterator; ys <- perm(xs diff Seq(x))) yield x::ys
     | }
perm: [T](xs: List[T])Iterator[List[T]]
scala> val itr = perm(List.range(0,100))
itr: Iterator[List[Int]] = non-empty iterator

scala> itr.next
res0: List[Int] = List(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26,
 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56,
 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86,
 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99)
scala> perm(1::2::3::Nil) foreach println
List(1, 2, 3)
List(1, 3, 2)
List(2, 1, 3)
List(2, 3, 1)
List(3, 1, 2)
List(3, 2, 1) 
```

# python - 为什么 QtGui.QApplication 工作但在 PyDev 中标记为未定义？

> ID：16126414
> 
> 赞同：1
> 
> 时间：2013-04-20T23:43:01.600
> 
> 标签：python, eclipse, pydev, pyside

在我的 Python 2.7.3 应用程序中，使用 PySide 1.1.2 和 Qt 4.8.4，我执行以下操作：

```
from PySide import QtGui
app = QtGui.QApplication(sys.argv) 
```

代码运行良好，之后使用更多命令正确创建了 Qt 窗口。但是，在 Eclipse/PyDev`QApplication`中带有红色下划线，鼠标悬停在弹出窗口中说

```
Undefined variable from import: QApplication 
```

有没有办法在 Eclipse/PyDev 中解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T00:16:21.477

转到窗口>首选项>解释器-python>强制内置（选项卡）>单击该选项卡上的新按钮并添加PySide

# c - C访问其文件从未调用过的数组

> ID：16126416
> 
> 赞同：0
> 
> 时间：2013-04-20T23:43:16.177
> 
> 标签：c, arrays

我需要在一个文件中有几个数组，并且我希望能够从另一个 C 文件访问它。我在头文件中定义了它们，`arrays.h`然后在`arrays.c`文件中初始化它们。问题是，当尝试从另一个文件访问数组的索引时，我得到一个`unresolved external ... LNK2001 error`. 我认为这是因为“arrays.c”文件从未被编译，所以我的程序知道该数组存在，但无法访问它，因为该文件“arrays.c”从未被调用，因此该数组未初始化。

我对吗？有什么办法可以解决这个问题，让源保持原样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T23:48:56.653

如果数组是在 in 中定义的，`arrays.c`但使用它们的程序是 in `program.c`，则您需要同时编译`arrays.c`和`program.c`并将目标文件链接在一起。

在类 Unix 系统上，可能是：

```
cc -o program program.c arrays.c 
```

或者：

```
cc -c program.c
cc -c arrays.c
cc -o program program.o arrays.o 
```

错误消息看起来很像来自 MSVC 的消息；在这种情况下，您需要遵循适当的规则来实现与 Unix 命令显示的相同的效果。

# angularjs - AngularJS 阻止默认选择指令

> ID：16126419
> 
> 赞同：3
> 
> 时间：2013-04-20T23:43:45.593
> 
> 标签：angularjs, angularjs-directive

在我的情况下，AngularJS[`select`](http://docs.angularjs.org/api/ng.directive%3aselect%20select)不太适合 - （`ng-repeat`方法`<option>`值只能是字符串，并且`ng-options`我无法正确设置初始选定值）。

我能做些什么来阻止 angular`select`在他看到`<select>`元素的任何地方应用指令？

我问这个问题的原因是因为我想在`select`元素上应用一个自定义指令，它会执行类似于原始指令的操作，所以它们会发生冲突。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:05:15.413

这是你需要的吗？

**HTML：**

```
<div ng-app="angularApp">
    <div ng-controller="testCtrl">
        <select ng-model="initialSelectedValue" ng-options="option for option in [1,2,3]"></select>
    </div>
</div> 
```

**Javascript：**

```
angular.module('angularApp', []);

function testCtrl($scope)
{
    $scope.initialSelectedValue = 2;
} 
```

我为它创建了以下[jsfiddle](http://jsfiddle.net/tadchristiansen/HM6SV/)。

# javascript - ID 属性有括号包围吗？

> ID：16126420
> 
> 赞同：1
> 
> 时间：2013-04-20T23:44:21.177
> 
> 标签：javascript, jquery, greasemonkey, html

我正在添加一个 Greasemonkey 脚本来为我工作的页面增添趣味，但我遇到了问题。我希望将默认值添加到表单字段中，因此每次填写表单时都不必添加相同的值。

查看表单上的`id`and`name`属性时，它们被括号括起来！例如：

```
<input id="[[FormGen]]Contact" type="text" 
    value="" name="[[FormGen]]Contact">
</input> 
```

现在，我无法访问任何服务器端代码，我正在从源代码中查看它。需要注意的一点是，这种形式工作得非常好。我很好奇这些括号可能做什么或意味着什么，但这不是我的根本问题。

根本问题是，当我使用 jQuery 获取值时，它无法识别我使用的 id。换句话说，这是行不通的：

```
("#[[FormGen]]Contact").val("test"); 
```

还有一点需要注意 - 表格总共有大约 20 个字段。所有 ID 和 Name 属性值都以 开头`[[FormGen]]`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T23:46:18.247

你可以逃避它们：

```
$('#\\[\\[FormGen\\]\\]Contact') 
```

或者使用这样的东西：

```
$(document.getElementById('[[FormGen]]Contact')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T23:51:24.940

如果它们都以 [[FormGen]] 开头，这意味着您可以通过 id 属性的其余部分来选择它们：

```
$('input[id$="Contact"]') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-11T00:55:17.290

如果您的标记有许多带有特殊字符的 ID，请考虑使用 [jQuery 常见问题解答中的](https://learn.jquery.com/using-jquery-core/faq/how-do-i-select-an-element-by-an-id-that-has-characters-used-in-css-notation/)此解决方案。它根据 jQuery 的要求转义所有字符。

我喜欢他们建议的这个 nullsafe 版本：

```
function jqid (id) {
  return (!id) ? null : '#' + id.replace(/(:|\.|\[|\]|,)/g, '\\$1');
} 
```

# c# - C#将类作为字符串传递并从数组中转换

> ID：16126430
> 
> 赞同：2
> 
> 时间：2013-04-20T23:45:43.513
> 
> 标签：c#, generics, reflection, types, casting

我很少有嵌套类，例如“BlueprintsManager.WorkingStandardBlueprint”，以及具有它们实例的 ArrayList。我想将它们作为参数传递给方法，例如：

```
private void ShowBlueprints(string class_str, ArrayList class_array)
{
    // class_str would be passed as "BlueprintsManager.WorkingStandardBlueprint"
    // how here I can access class_str as a class and cast class_array to it, to access some variables.
    // for example, I need to access some BlueprintsManager.WorkingStandardBlueprint public variables.
} 
```

我在搞乱反射，泛型，但我仍然无法让它工作。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:51:49.990

您应该为此使用泛型：

```
private void ShowBlueprints<T>(List<T> class_array)
{
    for (BlueprintsManager.WorkingStandardBlueprint item in class_array)
    {
        if(typeof T is BlueprintsManager.WorkingStandardBlueprint)
        {
            Console.WriteLine(((BlueprintsManager.WorkingStandardBlueprint)item).whateverpropertyyouhavedefined);
        }
    }
} 
```

现在您可以像这样调用该方法：

```
ShowBluePrints<BlueprintsManager.WorkingStandardBlueprint>(myblueprints); 
```

**编辑**在评论中，OP 说所有属性都是相同的。该解决方案将起作用：

```
class BaseClass
{
    string Name {get; set;}
    int id {get; set;}
}

class BlueprintsManager
{
    class WorkingStandardBlueprint : BaseClass
    {

    }
}

private void ShowBlueprints<T>(List<T> class_array) where T : BaseClass
{
    for (T item in class_array)
    {       
        Console.WriteLine(item.Name);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T23:59:17.013

我认为问题`why`不仅仅是如何。我没有看到很多这样的结构。

如果满足您的需要，您应该使用泛型。

如果你真的需要`construct types dynamically`从一个任意的项目列表中

1）制作一个通用方法（就像已经建议的那样）

```
interface IBlueprint
{
    int ID {get;set;}
    int Name {get;set;}
}
class MyClass 
{
    private void ShowBlueprints<T>(IEnumerableT> values) where T : IBlueprint 
    {
        // access properties of IBlueprint
    }
    // I presume you 'know something' about your 'T'-s, have an interface -
    // ...if you don't you should if possible
} 
```

2）然后这样称呼它（我从记忆中输入，但它应该是正确的）

```
MyClass myclass = new MyClass();
var values = // list of your blueprints
// if you don't have any in the list handle it and bail out
MethodInfo methodInfo = typeof(MyClass).GetMethod("ShowBlueprints");
MethodInfo methodInfoGeneric = 
    methodInfo.MakeGenericMethod(new[] { values.First().GetType() });
// or get your blueprint type from string if needed
methodInfoGeneric.Invoke(myclass, new object[] { values }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T00:05:39.563

您不能将对象转换为仅通过其字符串名称知道的类型。因此，您也无法以这种方式访问​​其字段。您有一些选项可以访问类型的字段：

1.  您知道确切的类型（或其任何基本类型或接口），因此您可以直接强制转换：

    ```
    object first = class_array[0];
    var blueprint = (BlueprintsManager.WorkingStandardBlueprint)first;
    blueprint.MyProperty = 10; 
    ```

2.  您不知道确切的类型，但您非常确定它有一个具有特定名称的公共属性/字段。请注意`dynamic`此处的关键字，适用于 C# 4 及更高版本。

    ```
    dynamic blueprint = class_array[0];
    blueprint.MyProperty = 10; 
    ```

3.  您不知道确切的类型，但您会得到一个带有类型名称的字符串。而且您不知道确切的属性/字段，但您会得到一个带有属性名称的字符串。然后你可以使用反射：

    ```
    string typeName = "BlueprintsManager.WorkingStandardBlueprint";
    string propertyName = "MyProperty";

    var type = Assembly.GetExecutingAssembly().GetType(typeName);
    var property = type.GetProperty(propertyName);

    object first = class_array[0];
    // Getter:
    int result = (int)property.GetMethod.Invoke(first, null);
    // Setter
    property.SetMethod.Invoke(first, new object[] { 10 }); 
    ```

* * *

顺便说一句，你不应该使用`ArrayList`. 当泛型还不存在时，它是一个非常古老的类。今天你应该使用`List<T>`. 例如，当您知道所有实现具有您要使用的属性`T`的接口时：`IBlueprint`

```
private void ShowBlueprints<T>(string classStr, List<T> classArray)
    where T : IBlueprint
{
    T blueprint = classArray[0];
    blueprint.MyProperty = 10;
} 
```

或者，如果您*确实*有任何类型的对象列表：

```
private void ShowBlueprints(string classStr, List<object> classArray); 
```

# linux-kernel - free_irq 后无法访问 /proc/interrupts

> ID：16126433
> 
> 赞同：1
> 
> 时间：2013-04-20T23:45:54.480
> 
> 标签：linux-kernel, linux-device-driver, interrupt, raspberry-pi

我正在为连接到*Raspberry Pi上的***GPIO**引脚的**ov7670 CMOS 元件编写内核***v4l2*驱动程序。我设置了三个**IRQ**线（*Pixel*、*Href*和*Vsync*）

 *********这是我要求他们的方式：

```
ret = request_irq(  PX_IRQ, 
                    ov7670rpi_pixel_interrupt,
                    irq_flags,
                     "ov7670rpi_px",
                     ov7670rpi_pixel_interrupt);

ret = request_irq(  HREF_IRQ, 
                    ov7670rpi_href_interrupt,
                    irq_flags,
                     "ov7670rpi_href",
                     ov7670rpi_href_interrupt);

ret = request_irq(  VSYNC_IRQ,
                    ov7670rpi_vsync_interrupt,
                    irq_flags,
                     "ov7670rpi_vsync",
                     ov7670rpi_vsync_interrupt); 
```

现在一切顺利：

```
#cat /proc/interrupts
           CPU0       
3:       4168   ARMCTRL  BCM2708 Timer Tick
9:          0   ARMCTRL  ov7670rpipx
10:          0   ARMCTRL  ov7670rpihref
11:          0   ARMCTRL  ov7670rpivsync
32:      68523   ARMCTRL  dwc_otg, dwc_otg_pcd, dwc_otg_hcd:usb1
52:          0   ARMCTRL  BCM2708 GPIO catchall handler
65:        543   ARMCTRL  ARM Mailbox IRQ
66:          2   ARMCTRL  VCHIQ doorbell
75:          1   ARMCTRL
77:       3439   ARMCTRL  bcm2708_sdhci (dma)
79:          0   ARMCTRL  bcm2708_i2c.0, bcm2708_i2c.1
80:          0   ARMCTRL  bcm2708_spi.0
83:         21   ARMCTRL  uart-pl011
84:       7436   ARMCTRL  mmc0
FIQ:              usb_fiq
Err:          0 
```

看起来不错。

这就是我禁用 IRQ 的方式：

```
/* Disable Interrupts */
free_irq(PX_IRQ, ov7670rpi_pixel_interrupt);
free_irq(HREF_IRQ, ov7670rpi_href_interrupt);
free_irq(VSYNC_IRQ, ov7670rpi_vsync_interrupt); 
```

我也试过：

```
/* Disable Interrupts */
free_irq(PX_IRQ, NULL);
free_irq(HREF_IRQ, NULL);
free_irq(VSYNC_IRQ, NULL); 
```

这两种方式都使得一旦模块被卸载，我就无法访问*/proc/interrupts*。当我尝试时`cat /proc/interrupts`，他们会锁定系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T01:10:25.077

正确的方法是使用`gpio_request()`您的[GPIO 编号](http://www.mjmwired.net/kernel/Documentation/gpio.txt)。

```
 #define PX_GPIO 9
 #define HREF_GPIO 10
 #define VSYNC_GPIO 11

 gpio_request(PX_GPIO, "v4l_rpi_px");
 gpio_input(PX_GPIO);
 gpio_request(HREF_GPIO, "v4l_rpi_href");
 gpio_input(HREF_GPIO);
 gpio_request(VSYNC_GPIO, "v4l_rpi_vsync");
 gpio_input(VSYNC_GPIO);

 /* Now, gpio_to_irq() can be used. */
 ret = request_irq(gpio_to_irq(PX_GPIO), 
                ov7670rpi_pixel_interrupt,
                irq_flags,
                 "ov7670rpi_px",
                 ov7670rpi_pixel_interrupt);
 /* etc. */ 
```

[bcm2708_gpio.c](https://github.com/raspberrypi/linux/blob/rpi-3.6.y/arch/arm/mach-bcm2708/bcm2708_gpio.c)提供了一个*GPIO 中断控制器*，如[本问题](https://stackoverflow.com/questions/15871048/the-irq-in-kernel-function-asm-do-irq-is-different-from-the-one-i-request-in-m)所述。另请参阅[GPIO 文档](http://www.mjmwired.net/kernel/Documentation/gpio.txt)。

您的主中断控制器**ARMCTRL**将中断 52 作为*BCM2708 GPIO 通用处理程序*。这个 IRQ 被*链接*并支持每个**gpio**线上的 IRQ。**GPIO 的控制器将在GPIO**`/proc/interrupts`中以不同的方式列出。*********

# javascript - 如何使用 -number 后缀对字符串进行 MongoDB 查询排序？

> ID：16126437
> 
> 赞同：17
> 
> 时间：2013-04-20T23:46:30.873
> 
> 标签：javascript, mongodb

我有一个查询：

```
ownUnnamedPages = Entries.find( { author : this.userId, title : {$regex: /^unnamed-/ }}, {sort: { title: 1 }}).fetch() 
```

这将返回以下排序的数组：

```
[ { 
    title: 'unnamed-1',
    text: '<p>sdaasdasdasd</p>',
    tags: [],
    _id: 'Wkxxpapm8bbiq59ig',
    author: 'AHSwfYgeGmur9oHzu',
    visibility: 'public' },
{ 
    title: 'unnamed-10',
    text: '',
    author: 'AHSwfYgeGmur9oHzu',
    visibility: 'public',
    _id: 'aDSN2XFjQPh9HPu4c' },
{ 
    title: 'unnamed-2',
    text: '<p>kkhjk</p>',
    tags: [],
    _id: 'iM9FMCsyzehQvYGKj',
    author: 'AHSwfYgeGmur9oHzu',
    visibility: 'public' },
{ 
    title: 'unnamed-3',
    text: '',
    tags: [],
    _id: 'zK2w9MEQGnwsm3Cqh',
    author: 'AHSwfYgeGmur9oHzu',
    visibility: 'public' }] 
```

问题是它似乎对第一个数字字符进行排序，所以它认为正确的序列是 1、10、2、3 等......我真正想要的是它对整个数字部分进行排序，这样10 将在最后。

我不希望通过为数字添加其他数字（例如 01 或 001）来执行此操作。

我该怎么做？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2018-11-20T17:16:56.750

您可以使用

```
db.collectionName.find().sort({title: 1}).collation({locale: "en_US", numericOrdering: true}) 
```

numericOrdering 标志是布尔值并且是可选的。确定是将数字字符串作为数字还是字符串进行比较的标志。如果为真，则作为数字进行比较；即“10”大于“2”。如果为假，则作为字符串进行比较；即“10”小于“2”。默认为假。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-21T00:10:40.857

MongoDB 无法按存储为字符串的数字进行排序。您必须将数字作为整数存储在其自己的字段中，用前导零填充，或者在从数据库返回结果后对结果进行排序。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-29T23:27:21.900

如果您 0 填充数字，您将能够以正确的顺序搜索为字符串，所以不要使用 0,1,2,3,4,5,6,7,8,9,10,11... 01,02,03,04,05,06,07,08,09,10,11... 字符串搜索将按顺序返回它们。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-09-18T10:42:41.960

mongo 文档说你可以使用 Collat​​ion 来实现这个目标，因为@Eugene Kaurov 说你可以使用

```
.collation({locale: "en_US", numericOrdering: true}) 
```

这是官方文档： [mongo ref](https://docs.mongodb.com/manual/reference/collation/)

并注意现在接受的答案不正确

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-16T08:21:42.173

在 mongo 中是不可能的（在 ascii 中排序字符串），但是在从集合中获取所有文档后，您可以使用以下函数进行排序

```
const sortString = (a, b) => {
  const AA = a.title.split('-');
  const BB = b.title.split('-');

  if (parseInt(AA[1], 10) === parseInt(BB[1], 10)) {
    return 0;
  }
  return (parseInt(AA[1], 10) < parseInt(BB[1], 10)) ? -1 : 1;
};

document.sort(sortString); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-10T15:41:46.727

就我而言，我们使用聚合。方法是使用字符串的长度进行排序；仅在文本部分始终相同时才有效（在您的情况下未命名）

```
db.YourCollection.aggregate([
  {
    $addFields: {
      "TitleSize": { $strLenCP: "$Title" }
    }
  },
  {
    $sort: {
      "TitleIdSize": 1,
      "Title": 1
    }
  }
]); 
```

现在我们使用长度排序，第二次排序将使用内容。

例子：

*   “未命名-2”，标题大小：9
*   “无名 7”，标题大小：9
*   “未命名 30”，标题大小：10
*   “未命名-1”，标题大小：9

第一种排序会将 id 按以下顺序排列：**2**、**7**、**1**、**30**。然后第二个排序会将 id 以正确的顺序排列：**1**、**2**、**7**、**30**。

# string - 如何在一行中使用 `textscan` 函数的多个输出？

> ID：16126438
> 
> 赞同：1
> 
> 时间：2013-04-20T23:46:36.530
> 
> 标签：string, matlab, parsing, textscan

假设我有以下字符串：

> s = 'Foo 1.000 3.000 3.554'

我想用`textscan`如下功能阅读它。

> [名称 xyz] = textscan(s, '%s %f %f %f')

但是，当我这样做时，我总是会收到`Too many output arguments`错误消息。

我认为这与输出单元格数组的事实有关`textscan`，但我无法发现如何解决这个问题和预期的效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T02:20:43.103

你需要两条线来做你想做的事。首先，您将所需的值放入一个虚拟变量中，然后将数据分配给`deal`：

```
dummy = textscan(s, '%s %f %f %f');
[a,b,c,d] = deal(dummy {:}); 
```

# html - Internet Explorer 9 - Magento 目录布局问题

> ID：16126439
> 
> 赞同：0
> 
> 时间：2013-04-20T23:46:41.800
> 
> 标签：html, css, internet-explorer, magento, internet-explorer-9

我目前正在尝试找出 IE9 和 magento 的问题，下面的截图更好地解释了这个问题（这在 FireFox/Opera/Chrome 中很好）或这里[http://foscamuk.co.uk/indoor-ip-cameras .html](http://foscamuk.co.uk/indoor-ip-cameras.html)： ![IE9 目录 Magento 问题](https://i.stack.imgur.com/Zf9s8.png)

这显然是一个 IE 兼容性问题，但我不知道从哪里开始寻找，CSS 代码在这里：

```
.products-grid-container{ background:#fafafa; padding: 5px 0; border:1px solid #ffffff; -webkit-border-radius:5px; -moz-border-radius:5px; border-radius:5px; box-shadow:0 0 3px #ccc; }
.products-grid { position:relative; }
.products-grid li.item { float: left; padding: 15px 5px; width: 160px; text-align:center; position: relative; background:url(../images/bg-li-product.png) 100% 10px no-repeat; }
.products-grid li.last{ background:none; }
.products-grid .product-image { display: block; height: 120px; margin: 0 0 15px 10px; width: 135px; }
.products-grid .product-name { color: #555; margin: 5px 0 17px; padding:0 10px; font-weight:400;  }
.products-grid .product-name a { color: #555; font-size:110%; }
.products-grid .product-name a:hover{color:#D92D37;text-decoration:none; font-weight:400;}
.products-grid .price-box { margin:5px 0; }
.products-grid .availability { line-height:21px; }
.products-grid .actions { background:url(../images/bg-action.png) 50% 100% no-repeat; padding:0 0 30px; }
.products-grid.last .actions{ background:none;}
.products-grid .actions .add-to-links { display:none; } 
```

虽然我已经引起了您的注意，但也在此页面上，如果您查看底部工具栏，列表图像似乎位于它应该位于的下方 - 不完全确定为什么会发生这种情况，因为它运行的代码与顶部工具栏完全相同.

谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T15:46:13.530

您的列表项中有一个损坏的`a`标签。

当我查看源代码时，我发现了这个：`<a href="http://foscamuk.co.uk/foscam-fi9821w.html" class="minimal-price-link">`后面是一个结束的 div 标签。这应该可以解释您的 IE 问题。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T14:10:15.603

您有一个显示一些错误的 Pie.js 尝试修复它。可能是它的冲突问题。尝试使用 noConflict

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T18:01:54.670

你的 a 标签没有结束

查看 ：）

# mysql - MySQL：简单的列值递增安全吗？

> ID：16126442
> 
> 赞同：0
> 
> 时间：2013-04-20T23:46:58.797
> 
> 标签：mysql

```
UPDATE counter SET views=views+1 
```

这个查询在 InnoDB 和 MyISAM 表中使用安全吗？

我记得，就像 10 年前一样，有一个错误（或者“一个令人不快的功能”，如果你愿意的话） - 当这个查询同时有 2 次以上的点击时（2 多个用户同时访问了该页面） ，`views`值被重置为`0`。

这个功能还在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:50:54.250

这个查询是安全的。执行更新查询时，表（或 InnoDB 格式数据库中的行）会自动锁定。

# java - while 循环只打印一次而不是整个循环

> ID：16126446
> 
> 赞同：0
> 
> 时间：2013-04-20T23:48:33.413
> 
> 标签：java, printing, while-loop

我有一个程序，我在其中使用 while 循环将打印到控制台和 html 文件。然而，即使它打印到控制台，程序也只会将最后一行打印到 html 文件。这是我的循环的代码，它应该打印从文本文件中提取的第 9 到第 16 行的信息。

```
 //read the txt file
Path objPath = Paths.get("dirsize.txt");  
if (Files.exists(objPath))
{

    File objFile = objPath.toFile();
  try(BufferedReader in = new BufferedReader(
                          new FileReader(objFile)))
   {
    String line = in.readLine();
    int lineNum = 1;
    //extract the month
    String monthSubstring = line.substring(25,27);
    month = Integer.parseInt(monthSubstring) -1 ;
    //extact the year
    String yearSubstring = line.substring(31,35);
    year = (Integer.parseInt(yearSubstring));
    //extract the date
    String daySubstring = line.substring(28,30);
    day = Integer.parseInt(daySubstring);
     PrintWriter out = new PrintWriter (new BufferedWriter(new FileWriter("Output.html")));
    while(line != null)
    {
      line = in.readLine();
      lineNum ++;
      if (lineNum == 3)
       {
           //extract the hour
            String hourSubstring = line.substring(21,23);
             hour = Integer.parseInt(hourSubstring); 
            //extract the minute
            String minuteSubstring = line.substring(24,26);
             minute = Integer.parseInt(minuteSubstring);
            //extract the second
            String secondSubstring = line.substring(27,29);
            second= Integer.parseInt(secondSubstring);
           }
      if(lineNum ==5)
       {
            //Extract the branch
            strBranch = line.substring(22, 27);        
       }        
      if (lineNum == 6)
      {
             //Extract the computer
             strCPU = line.substring(26,32);
      }   
     if (lineNum >= 9 && lineNum <= 16)
      {
          //call the MyDirectory methods to get the files name,size and number of files
          MyDirectory directory = new MyDirectory(line);
          fileName = directory.getName();
          fileSize = directory.getsize();
          fileNum = directory.getNum();
          //create the dteDate calender
          GregorianCalendar dteDate = new GregorianCalendar(year, month, day, hour, minute, second);
          //fromat the date
          SimpleDateFormat strDate = new SimpleDateFormat("MMM dd, yyyy h:m");
        //Write the data to the file
         out.println((strBranch + "; " +
                  strCPU + "; "  + 
                  strDate.format(dteDate.getTime())) + "; " +
                  fileName + "; " +
                  fileSize + "; " + 
                  fileNum);
         //create the necessary output for the console
          System.out.println((strBranch + "; " +
                  strCPU + "; "  + 
                  strDate.format(dteDate.getTime())) + "; " +
                  fileName + "; " +
                  fileSize + "; " + 
                  fileNum);
        }    
       out.flush();
    }

   }   

  //catch any IOExceptions and print out e
 catch (IOException e)
  {
    System.out.println(e);  
  }

} 
```

编辑：通过答案中发布的建议，我现在有了所有内容的输出，但我很难对其进行格式化，html 文件包含所有行，没有空格我尝试在输出末尾使用“\n”，然后是我的代码无法编译，因为它说不允许空值，当它不允许我在打印方法的末尾放置“\n”时，有人知道如何将其格式化为行吗？

我不确定这是太多代码还是不足以解决问题，如果我应该在我的帖子中添加任何内容或删除任何内容，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T23:51:52.717

这很明显 - 每次 while 循环迭代时都会创建文件（见下文）：

```
 PrintWriter out = new PrintWriter (
                           new BufferedWriter(
                           new FileWriter("Output.html")));
        //Write the data to the file
         out.println((strBranch + "; " +
                  strCPU + "; "  + 
                  strDate.format(dteDate.getTime())) + "; " +
                  fileName + "; " +
                  fileSize + "; " + 
                  fileNum);
        //flush the data and close the output stream
         out.close(); 
```

您应该在进入 while 循环之前创建文件。

所以你的代码应该是这样的：

```
 PrintWriter out = new PrintWriter (new BufferedWriter(new FileWriter("Output.html")));
     while(line != null)
    {
        //perform your file operations here
    }
    out.close(); 
```

- - 编辑 - -

您已经更新了代码，但仍然不行。您在第二个循环内关闭文件：

```
 (...)
 while (lineNum >= 9 && lineNum <= 16)
  {
      //call the MyDirectory methods to get the files name,size and number of files
      MyDirectory directory = new MyDirectory(line);
      fileName = directory.getName();
      fileSize = directory.getsize();
      fileNum = directory.getNum();
      //create the dteDate calender
      GregorianCalendar dteDate = new GregorianCalendar(year, month, day, hour, minute, second);
      //fromat the date
      SimpleDateFormat strDate = new SimpleDateFormat("MMM dd, yyyy h:m");
    //Write the data to the file
     out.println((strBranch + "; " +
              strCPU + "; "  + 
              strDate.format(dteDate.getTime())) + "; " +
              fileName + "; " +
              fileSize + "; " + 
              fileNum);
    //flush the data and close the output stream
     //################# YOU CLOSE YOUR FILE HERE:
     out.close();
     //create the necessary output for the console
      System.out.println((strBranch + "; " +
              strCPU + "; "  + 
              strDate.format(dteDate.getTime())) + "; " +
              fileName + "; " +
              fileSize + "; " + 
              fileNum);
     //move on in the loop so it's not infinte
      break;
   }    
} 
```

当此循环下次迭代时，您仍然尝试写入文件（然后再次关闭它，即使它在上一次迭代中已关闭）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T23:55:17.177

您在输出文件中只看到一行，因为每次写入文件时都会覆盖该文件。

如果您必须在 while(linenum >=9 && linenum <=16) 循环中创建 PrintWriter，请以附加模式打开文件：

**new FileWriter("Output.html", true);**

将解决您的问题。

# sass - Sass/Compass 从变量中获取变量名

> ID：16126448
> 
> 赞同：4
> 
> 时间：2013-04-20T23:48:38.913
> 
> 标签：sass

我正在尝试制作一个 mixin，它可以让我根据您使用的变量名称创建适应的代码块。

```
$foo: #00A9EC;
@mixin menu-color($color) {
.color-#{$color} a.level2,
.color-#{$color} a.level2:visited {
    color: $color;
    &:hover {
        color: adjust-lightness($color, 10); }
    &:active {
        color: adjust-lightness($color, -10); } } }

@include menu-color($foo); 
```

输出：

```
.color-foo a.level2,
.color-foo a.level2:visited {
    color: #00A9EC; }

.color-foo a.level2:hover,
.color-foo a.level2:visited:hover {
        color: #20C0FF; }

.color-foo a.level2:active,
.color-foo a.level2:visited:active {
        color: #0084B9; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T00:12:24.813

不应以特定颜色命名 CSS 类。你会后悔的。试想一下，如果您想稍后将颜色变为红色，则需要返回所有 html 并更改类。

我们拥有 CSS 的原因是您不必在标记中嵌入样式信息。

使用语义类来描述数据，而不是如何显示：

```
$foo: #00A9EC;

@mixin menu-color($name, $color) {
.custom-#{$name} a.level2,
.custom-#{$name} a.level2:visited {
    color: $color;
    &:hover {
        color: adjust-lightness($color, 10); }
    &:active {
        color: adjust-lightness($color, -10); } } }

@include menu-color(profile, $foo); 
```

然后在你的 HTML`<div class="custom-profile">`中。

这样，从现在起两年后，当您想将其设置为黑色并加下划线（或其他）时，您不必深入研究您的 html 并为所有那些元素。您只需在一处更改 SCSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-30T05:55:23.203

在 sass 中，您可以使用 map 来执行此操作，您只需传递变量名而不是变量本身：

```
$colors: ( 
    -black: #000,
    -blue: #088DC6
);

@mixin generateBgColor($colorName) {
    .bg-color#{$colorName} {
        background-color: map-get($colors, $colorName);
    }
}

@include generateBgColor("-blue"); 
```

这将生成类：

```
.bg-color-blue {
    background-color: #088DC6;
} 
```

只需使用大括号和 double at 字符，您也可以使用更少的标准变量来实现这一点：

```
@blue: #088DC6;

.generate-bg-color(@color) {
    .bg-color-@{color} {
        background-color: @@color;
    }
}

.generate-bg-color(~"blue"); 
```

# javascript - Javascript 中的年龄计算器

> ID：16126452
> 
> 赞同：-4
> 
> 时间：2013-04-20T23:49:10.883
> 
> 标签：javascript, calculator

我有这个代码，这个代码必须能够计算用户的年龄，并且它必须显示在提供的文本框中，如果用户更改了他的出生日期，年龄必须改变。但此代码不起作用，它不会在文本框中显示计算出的年龄。

```
<input name= "date" type="text" readonly="readonly"  />

<select id="Ultra" onchange="run()">  
 <option value="11/15/991">1991-11-15</option>
 <option value="10/23/1992">1992-10-23</option>
</select><br><br>
TextBox1<br>
 <input type="text" id="srt" placeholder="get value on option select"   readonly="readonly"><br>
<script type="text/javascript">
function run() {
  var birth = document.getElementById("Ultra").value;
  var check = new Date();
  var milliDay = 1000 * 60 * 60 * 24;

  var AgeinDay = (check - birth) / milliday;
  var ComputAge = Math.floor(AgeinDay / 365 );
  var age = ComputAge / 365;
  document.getElementById("srt").value = age;
}
 </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-02-12T05:52:44.080

这是在 JavaScript 中完成年龄计算的外观：

```
<body onload="getAge()">
  <h1 id="age" ></h1>

  <script>
    function calculateAge(dob) {
      var now = new Date();
      var dob = new Date(dob);
      var year=now.getYear()-dob.getYear();
      var month=now.getMonth()-dob.getMonth();
      if(month<0){
        month=now.getMonth()+12-dob.getMonth();
        year=year-1;
      }
      var day=now.getDate()-dob.getDate();
      if(day<0){
        var monthNumber=dob.getMonth();
        var fullDate=getFullDate(monthNumber);
        day=now.getDate()+fullDate-dob.getDate();
        month=month-1;
      }

      return year+" Years, "+month+" Months, "+day+" Days!";
    };
    function getFullDate(x){
      switch(x){
        case 0:
          return 31;
          break;
        case 1:
          return 28;
          break;
        case 2:
          return 31;
          break;
        case 3:
          return 30;
          break;
        case 4:
          return 31;
          break;
        case 5:
          return 30;
          break;
        case 6:
          return 31;
          break;
        case 7:
          return 31;
          break;
        case 8:
          return 30;
          break;
        case 9:
          return 31;
          break;
        case 10:
          return 30;
          break;
        case 11:
          return 31;
      }
    }
    function getAge(){
      x=prompt("Please Enter Your Date of Birth in format (yyyy-mm-dd): ","");
      x=new Date(x);
      document.getElementById("age").innerHTML="Your age is: "+calculateAge(x);
    }
  </script>
</body>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T23:57:02.353

试试这个..

```
function run() {
  var birth = new Date(document.getElementById("Ultra").value);
  var curr  = new Date();
  var diff = curr.getTime() - birth.getTime();
   document.getElementById("srt").value = Math.floor(diff / (1000 * 60 * 60 * 24 * 365.25));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T00:10:51.610

您的代码中有三个错误，请参阅下面的内联注释：

第一个选项的年份值是 991 而不是 1991，可能会导致您认为计算错误。

包含分配给出生变量的日期的字符串必须作为参数传递给 Date() 函数，以创建一个日期对象，该对象可以与它下面的当前日期对象一起使用。

声明了变量milliDay，然后您尝试使用milliday（错误的情况D）。

```
<input name= "date" type="text" readonly="readonly"  />

<select id="Ultra" onchange="run()">  
 <option value="11/15/1991">1991-11-15</option> <!-- year value was 991 instead of 1991, might cause you to think the calculation is wrong -->
 <option value="10/23/1992">1992-10-23</option>
</select><br><br>
TextBox1<br>
 <input type="text" id="srt" placeholder="get value on option select"   readonly="readonly"><br>
<script type="text/javascript">
function run() {
  var birth = new Date(document.getElementById("Ultra").value); //string containing date has to be passed as parameter to Date() function to create a date object that can be used with the current date object below
  var check = new Date();
  var milliDay = 1000 * 60 * 60 * 24;

  var AgeinDay = (check - birth) / milliDay; //variable here was milliday all small case, declared above as milliDay with a capital D
  var ComputAge = Math.floor(AgeinDay / 365 );
  var age = ComputAge / 365;
  document.getElementById("srt").value = age;
}
 </script> 
```

假设选择了第一个选项，这将返回以下值：

年龄：0.057534246575342465

计算机年龄：21

您是否也只是想以年、月、日为单位来计算年龄？

# opengl - freeglut 段错误，没有来自 gdb 的有用信息

> ID：16126454
> 
> 赞同：1
> 
> 时间：2013-04-20T23:50:04.867
> 
> 标签：opengl, gdb, freeglut

在我正在编写的这个程序中，我一直在使用 freeglut，而且通常它一直在工作。然而，有时当程序中出现一些与渲染完全无关的问题时，我在 glutInit() 处得到一个段错误，而 GDB 没有解释。

```
Program received signal SIGSEGV, Segmentation fault.
0x00007ffff7942409 in glutInit () from /usr/lib/x86_64-linux-gnu/libglut.so.3 
```

回溯：

```
#0  0x00007ffff7942409 in glutInit () from /usr/lib/x86_64-linux-gnu/libglut.so.3
#1  0x0000000000415d4c in initGL () at ../gfx/render.cpp:62
#2  0x00000000004035f3 in main () at battle.cpp:49 
```

在禁用渲染的情况下运行不会产生错误。

所以，我想知道我需要做什么才能获得有关这些故障的更多信息。我可以获得回溯以查看 liblut.so.3 内部吗？

（顺便说一句，任何比 freeglut 更可靠的工具包的建议都值得赞赏。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T00:16:55.577

> 我可以获得回溯以查看 liblut.so.3 内部吗？

您*已经*有一个正在查看内部的回溯`libglut.so.3`。

你需要要么

*   为其安装调试符号（`sudo apt-get install freeglut3-dbg`或类似的），或
*   从源代码编译`libglut.so`，或
*   在汇编级别调试：`x/i $pc`、、、`disas`等`info registers`。

# java - Android 从其他微调器填充微调器

> ID：16126459
> 
> 赞同：3
> 
> 时间：2013-04-20T23:50:41.783
> 
> 标签：java, android, android-asynctask

我有 3 个微调器和一个列表视图。在第一个微调器中，用户选择一个状态。然后下一个微调器将填充该州的所有县。然后用户选择一个县，最后一个微调器将填充该县的城市。最后，用户选择了一个城市，列表视图中填充了该城市的医院。所有这些数据都是从数据库中提取的，并且工作正常。我遇到的问题是，如果我想返回并更改应用程序崩溃的县、州或城市。

这是堆栈跟踪：

```
04-20 23:26:33.604: E/AndroidRuntime(1781): FATAL EXCEPTION: AsyncTask #5
04-20 23:26:33.604: E/AndroidRuntime(1781): java.lang.RuntimeException: An error occured while executing doInBackground()
04-20 23:26:33.604: E/AndroidRuntime(1781):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at java.util.concurrent.FutureTask.run(FutureTask.java:239)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at java.lang.Thread.run(Thread.java:856)
04-20 23:26:33.604: E/AndroidRuntime(1781): Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
04-20 23:26:33.604: E/AndroidRuntime(1781):     at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4746)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at android.view.ViewRootImpl.focusableViewAvailable(ViewRootImpl.java:2588)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:608)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:608)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:608)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:608)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:608)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:608)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:608)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:608)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at android.view.View.setFlags(View.java:8405)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at android.view.View.setFocusable(View.java:5767)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at android.widget.AdapterView.checkFocus(AdapterView.java:718)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at android.widget.AdapterView$AdapterDataSetObserver.onChanged(AdapterView.java:812)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at android.database.DataSetObservable.notifyChanged(DataSetObservable.java:37)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at android.widget.BaseAdapter.notifyDataSetChanged(BaseAdapter.java:50)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at android.widget.ArrayAdapter.notifyDataSetChanged(ArrayAdapter.java:286)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at android.widget.ArrayAdapter.add(ArrayAdapter.java:182)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at com.photosbychristian.ems.Edit$LoadCity.doInBackground(Edit.java:315)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at com.photosbychristian.ems.Edit$LoadCity.doInBackground(Edit.java:1)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-20 23:26:33.604: E/AndroidRuntime(1781):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
04-20 23:26:33.604: E/AndroidRuntime(1781):     ... 4 more

04-20 23:26:43.693: E/WindowManager(1781): Activity com.photosbychristian.ems.Edit has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{b32d40f0 V.E..... R.....ID 0,0-564,230} that was originally added here
04-20 23:26:43.693: E/WindowManager(1781): android.view.WindowLeaked: Activity com.photosbychristian.ems.Edit has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{b32d40f0 V.E..... R.....ID 0,0-564,230} that was originally added here
04-20 23:26:43.693: E/WindowManager(1781):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:354)
04-20 23:26:43.693: E/WindowManager(1781):  at android.view.WindowManagerGlobal.addView(WindowManagerGlobal.java:216)
04-20 23:26:43.693: E/WindowManager(1781):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:69)
04-20 23:26:43.693: E/WindowManager(1781):  at android.app.Dialog.show(Dialog.java:281)
04-20 23:26:43.693: E/WindowManager(1781):  at com.photosbychristian.ems.Edit$LoadCity.onPreExecute(Edit.java:293)
04-20 23:26:43.693: E/WindowManager(1781):  at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:586)
04-20 23:26:43.693: E/WindowManager(1781):  at android.os.AsyncTask.execute(AsyncTask.java:534)
04-20 23:26:43.693: E/WindowManager(1781):  at com.photosbychristian.ems.Edit$LoadCounty$2.onItemSelected(Edit.java:272)
04-20 23:26:43.693: E/WindowManager(1781):  at  android.widget.AdapterView.fireOnSelected(AdapterView.java:892)
04-20 23:26:43.693: E/WindowManager(1781):  at android.widget.AdapterView.access$200(AdapterView.java:49)
04-20 23:26:43.693: E/WindowManager(1781):  at android.widget.AdapterView$SelectionNotifier.run(AdapterView.java:860)
04-20 23:26:43.693: E/WindowManager(1781):  at android.os.Handler.handleCallback(Handler.java:725)
04-20 23:26:43.693: E/WindowManager(1781):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-20 23:26:43.693: E/WindowManager(1781):  at android.os.Looper.loop(Looper.java:137)
04-20 23:26:43.693: E/WindowManager(1781):  at android.app.ActivityThread.main(ActivityThread.java:5039)
04-20 23:26:43.693: E/WindowManager(1781):  at java.lang.reflect.Method.invokeNative(Native Method)
04-20 23:26:43.693: E/WindowManager(1781):  at java.lang.reflect.Method.invoke(Method.java:511)
04-20 23:26:43.693: E/WindowManager(1781):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-20 23:26:43.693: E/WindowManager(1781):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-20 23:26:43.693: E/WindowManager(1781):  at dalvik.system.NativeStart.main(Native Method) 
```

我的代码是：

```
package com.photosbychristian.ems;

import java.util.ArrayList;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Spinner;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class Edit extends ListActivity {

private ProgressDialog stateDialog;
private ProgressDialog countyDialog;
private ProgressDialog cityDialog;
private ProgressDialog hospitalDialog;

JSONParser stateParser = new JSONParser();
JSONParser countyParser = new JSONParser();
JSONParser cityParser = new JSONParser();
JSONParser hospitalParser = new JSONParser();

private static String url_state = "http://www.photosbychristian.com/ems/states.php";
private static String url_county = "http://www.photosbychristian.com/ems/countys.php";
private static String url_city = "http://www.photosbychristian.com/ems/citys.php";
private static String url_hospital = "http://www.photosbychristian.com/ems/hospitals.php";

private static final String TAG_STATE_DISPLAY = "display";
private static final String TAG_COUNTY_DISPLAY = "display";
private static final String TAG_CITY_DISPLAY = "display";
private static final String TAG_HOSPITAL_DISPLAY = "display";

JSONArray statesArray = null;
JSONArray countysArray = null;
JSONArray citysArray = null;
JSONArray hospitalArray = null;

ArrayAdapter<String> stateAdapter;
ArrayAdapter<String> countyAdapter;
ArrayAdapter<String> cityAdapter;
ArrayAdapter<String> hospitalAdapter;

Spinner state;
Spinner county;
Spinner city;

String stateLabel;
String cityLabel;
String hospitalLabel;
ListView hosps;
ArrayList<String> hosp = new ArrayList<String>();

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.edit);

    TabHost th = (TabHost) findViewById(R.id.tabhost);
    th.setup();
    TabSpec specs = th.newTabSpec("tag1");
    specs.setContent(R.id.tab1);
    specs.setIndicator("My Hospitals");
    th.addTab(specs);
    specs = th.newTabSpec("tag2");
    specs.setContent(R.id.tab2);
    specs.setIndicator("Add Hospitals");
    th.addTab(specs);
    new LoadStates().execute();

    state = (Spinner) findViewById(R.id.sState);
    county = (Spinner) findViewById(R.id.sCounty);
    city = (Spinner) findViewById(R.id.sCity);
    hosps = getListView();

    stateAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item);
    countyAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item);
    cityAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item);
    hospitalAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, hosp);

}

class LoadStates extends AsyncTask<String, String, String> {

    // Before starting background thread Show State Progress Dialog

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        stateDialog = new ProgressDialog(Edit.this);
        stateDialog.setMessage("Loading States. Please wait...");
        stateDialog.setIndeterminate(false);
        stateDialog.setCancelable(false);
        stateDialog.show();
    }

    /** Get states form Internet **/

    protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = stateParser.makeHttpRequest(url_state, "GET",
                params);

        // Check your log cat for JSON response
        Log.d("All States: ", json.toString());

        stateAdapter
                .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        stateAdapter.add("Select A State");
        try {
            // products found
            // Getting Array of Products
            statesArray = json.getJSONArray("states");

            // looping through All Products
            for (int i = 0; i < statesArray.length(); i++) {
                JSONObject c = statesArray.getJSONObject(i);

                // Storing each JSON item in variable
                // String id = c.getString(TAG_HID);
                String disp = c.getString(TAG_STATE_DISPLAY);

                stateAdapter.add(disp);

            }

        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /** After completing background task Dismiss the progress dialog **/

    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        stateDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                // add states to spinner
                state.setAdapter(stateAdapter);

            }
        });

        state.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> parent, View view,
                    int position, long id) {
                // On selecting a spinner item
                String label = parent.getItemAtPosition(position)
                        .toString();
                if (label == "Select A State") {

                } else {
                    stateLabel = label;
                    // load county spinner

                    new LoadCounty().execute();
                }
            }

            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        });
    }
}

class LoadCounty extends AsyncTask<String, String, String> {
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        countyDialog = new ProgressDialog(Edit.this);
        countyDialog.setMessage("Loading Countys. Please wait...");
        countyDialog.setIndeterminate(false);
        countyDialog.setCancelable(false);
        countyDialog.show();
    }

    // Get states form Internet
    @Override
    protected String doInBackground(String... args) {
        // TODO Auto-generated method stub
        // Building Parameters
        List<NameValuePair> Countyparams = new ArrayList<NameValuePair>();
        Countyparams.add(new BasicNameValuePair("state", stateLabel));
        // getting JSON string from URL
        JSONObject Countyjson = countyParser.makeHttpRequest(url_county,
                "GET", Countyparams);

        // Check your log cat for JSON response
        Log.d("All Countys: ", Countyjson.toString());

        countyAdapter
                .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        countyAdapter.add("Select A County");
        try {
            // products found
            // Getting Array of Products
            countysArray = Countyjson.getJSONArray("county");

            // looping through All Products
            for (int i = 0; i < countysArray.length(); i++) {
                JSONObject c = countysArray.getJSONObject(i);

                // Storing each JSON item in variable
                // String id = c.getString(TAG_HID);
                String disp = c.getString(TAG_COUNTY_DISPLAY);

                countyAdapter.add(disp);

            }

        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    // After completing background task Dismiss the progress dialog

    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        countyDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                // add states to spinner
                county.setAdapter(countyAdapter);

            }
        });

        county.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> parent, View view,
                    int position, long id) {
                // On selecting a spinner item
                String label = parent.getItemAtPosition(position)
                        .toString();
                if (label == "Select A County") {

                } else {
                    // load city spinner
                    hospitalAdapter.clear();
                    hospitalAdapter.notifyDataSetChanged();
                    cityAdapter.clear();
                    cityAdapter.notifyDataSetChanged();
                    cityLabel = label;
                    new LoadCity().execute();

                }
            }

            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        });
    }
}

class LoadCity extends AsyncTask<String, String, String> {
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        cityDialog = new ProgressDialog(Edit.this);
        cityDialog.setMessage("Loading Citys. Please wait...");
        cityDialog.setIndeterminate(false);
        cityDialog.setCancelable(false);
        cityDialog.show();

    }

    // Get states form Internet
    @Override
    protected String doInBackground(String... args) {
        // TODO Auto-generated method stub
        // Building Parameters
        List<NameValuePair> Cityparams = new ArrayList<NameValuePair>();
        Cityparams.add(new BasicNameValuePair("state", stateLabel));
        Cityparams.add(new BasicNameValuePair("county", cityLabel));
        // getting JSON string from URL
        JSONObject Cityjson = cityParser.makeHttpRequest(url_city, "GET",
                Cityparams);

        // Check your log cat for JSON response
        Log.d("All Citys: ", Cityjson.toString());

        cityAdapter
                .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        cityAdapter.add("Select A City");
        try {
            // products found
            // Getting Array of Products
            citysArray = Cityjson.getJSONArray("city");

            // looping through All Products
            for (int i = 0; i < citysArray.length(); i++) {
                JSONObject c = citysArray.getJSONObject(i);

                // Storing each JSON item in variable
                // String id = c.getString(TAG_HID);
                String disp = c.getString(TAG_CITY_DISPLAY);

                cityAdapter.add(disp);

            }

        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    // After completing background task Dismiss the progress dialog

    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        cityDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                // add states to spinner
                city.setAdapter(cityAdapter);

            }
        });

        city.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> parent, View view,
                    int position, long id) {
                // On selecting a spinner item
                String label = parent.getItemAtPosition(position)
                        .toString();

                hospitalLabel = label;
                if (label == "Select A City") {

                } else {
                    // load hospitals

                    new LoadHospitals().execute();
                }
            }

            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        });
    }
}

class LoadHospitals extends AsyncTask<String, String, String> {
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        hospitalDialog = new ProgressDialog(Edit.this);
        hospitalDialog.setMessage("Loading Hospitals. Please wait...");
        hospitalDialog.setIndeterminate(false);
        hospitalDialog.setCancelable(false);
        hospitalDialog.show();
        hospitalAdapter.clear();
        hospitalAdapter.notifyDataSetChanged();
    }

    // Get states form Internet
    @Override
    protected String doInBackground(String... args) {
        // TODO Auto-generated method stub
        // Building Parameters
        List<NameValuePair> hospitalparams = new ArrayList<NameValuePair>();
        hospitalparams.add(new BasicNameValuePair("state", stateLabel));
        hospitalparams.add(new BasicNameValuePair("county", cityLabel));
        hospitalparams.add(new BasicNameValuePair("city", hospitalLabel));
        // getting JSON string from URL
        JSONObject Cityjson = hospitalParser.makeHttpRequest(url_hospital, "GET",
                hospitalparams);

        // Check your log cat for JSON response
        Log.d("All Hospital: ", Cityjson.toString());

        try {
            // products found
            // Getting Array of Products
            hospitalArray = Cityjson.getJSONArray("hospital");

            // looping through All Products
            for (int i = 0; i < hospitalArray.length(); i++) {
                JSONObject c = hospitalArray.getJSONObject(i);

                // Storing each JSON item in variable
                // String id = c.getString(TAG_HID);
                String disp = c.getString(TAG_HOSPITAL_DISPLAY);
                hosp.add(disp);
            }

        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    // After completing background task Dismiss the progress dialog

    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        hospitalDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                // display hospitals
                setListAdapter(hospitalAdapter);
                hospitalAdapter.notifyDataSetChanged();

            }
        });
    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:35:55.030

你必须`stateAdapter`在 UI 线程上管理你的，即在`onPostExecute`方法中。

将 的 设置为`Result`包含`AsyncTask`应添加到微调器的数据的字符串列表，然后`onPostExecute`使用您作为参数收到的列表填充微调器。

# sql - 如何定义要在 VB.NET 中使用的 Sql Server 连接字符串？

> ID：16126468
> 
> 赞同：3
> 
> 时间：2013-04-20T23:51:28.597
> 
> 标签：sql, vb.net, visual-studio-2012

如何：`connectionString`？

希望是一个简单的问题，但我太新了，`Visual Basic`无法理解：http: [//msdn.microsoft.com/en-us/library/d7469at0.aspx](http://msdn.microsoft.com/en-us/library/d7469at0.aspx) ...

我正在编写一个应用程序`VB`并尝试将其连接到“本地数据库”/“数据集”。

我今天早些时候收到了帮助以获取下面列出的代码，它似乎可以正常工作，除了我不知道如何将我的应用程序连接到我的数据集。从我一直在做的阅读来看，connectionString 似乎是将其连接到使用 SQL Server 创建的数据库。？？？

在我的 VB Windows 窗体应用程序中，我只是做了“添加新项目”然后是“本地数据库”，它问我什么类型的数据库模型，我选择了“数据集”。

我只有两个表，只需要能够连接到它们。这是代码或至少是我想做的想法。请帮忙

```
 Using sqlCon = New SqlConnection(connectionString)
        sqlCon.Open()
        Dim sqlText = "UPDATE appTable SET clickCount + 1 " & _
            "WHERE appName = @name"
        Dim cmd = New SqlCommand(sqlText, sqlCon)
        cmd.Parameters.AddWithValue("@name", appName)
        cmd.ExecuteNonQuery()
    End Using 
```

对于这个措辞不佳的问题，我感到非常抱歉，我已经阅读并尝试学习了太久，并且让自己感到沮丧。我来自 Python，语法和“规则”要少得多，我觉得我可以在这个项目上走得更远，并且坚持简单地连接到“数据库”让我非常沮丧：/

提前感谢您的帮助。

答案：我的解决方案资源管理器中有一个 App.config 文件，其 connectionString **Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|\gadgetDatabase.mdf;Integrated Security=True**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T23:58:16.070

尝试

```
Dim connectionString AS String = "Server=my_server;Database=name_of_db;User Id=user_name;Password=my_password" 
```

并将 my_server、name_of_db、user_name 和 my_password 替换为您的值。

然后`Using sqlCon = New SqlConnection(connectionString)`应该工作

我也认为你的SQL是错误的，应该是`SET clickCount= clickCount + 1`我认为的。

一般来说，您链接到的页面有一个名为[Connection String](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx)的链接，它向您展示了如何执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-03T07:13:04.777

标准安全：

```
Server=myServerAddress;Database=myDataBase;User Id=myUsername;Password=myPassword; 
```

可信连接：

```
Server=myServerAddress;Database=myDataBase;Trusted_Connection=True; 
```

如果有帮助会很高兴。

问候。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T23:58:23.013

在配置文件中设置连接字符串：

```
<connectionStrings>
    <add name="ConnString"
         connectionString="Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|\gadgetDatabase.mdf;Integrated Security=True" />
</connectionStrings> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-16T10:23:15.460

我们从服务器端分配的连接字符串将与来自 Web 配置文件的连接字符串相同。目录：表示数据库，后面是用户名和密码以及 DataClient 新的 sql 连接通过使用连接字符串中的凭据建立到 sql server 的连接。然后是 sql 命令，该命令检索数据集中所需的数据然后我们将它们分配给所需的变量或控件以完成所需的任务

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-23T06:51:46.243

愿它对你有所帮助。你应该使用（localdb）。

LocalDB 自动实例

`Server=(localdb)\v11.0;Integrated Security=true;`

具有特定数据文件的 LocalDB 自动实例

`Server=(localdb)\v11.0;Integrated Security=true; AttachDbFileName=C:\MyFolder\MyData.mdf;`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-01T09:43:35.337

```
Imports System.Data.SqlClient
Imports System.Data.Sql
Imports System.IO
Imports System.Configuration
Dim connectionString As String = ConfigurationManager.ConnectionStrings("ConString").ConnectionString
Dim cn As New SqlConnection(connectionString)
Dim cmd As New SqlCommand
Dim dr As SqlDataAdapter 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-22T03:08:45.010

```
 if (reader.HasRows)
            {
                while (reader.Read())
                {
                    comboBox1.Items.Add(reader.GetString(0));
                }
            }
            reader.Close();

            MySqlDataReader reader1 = cmd1.ExecuteReader();
            if (reader1.HasRows)
            {
                while (reader1.Read())
                {
                    listBox1.Items.Add(reader1.GetString(0));
                }
            }
            reader1.Close(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-02T18:10:22.573

使用以下`Imports`

```
Imports System.Data.SqlClient
Imports System.Data.Sql

Public SQLConn As New SqlConnection With {.ConnectionString = "Server=Desktop1[enter image description here][1];Database=Infostudio; Trusted_Connection=true;"} 
```

完整字符串： [![在此处输入图像描述](https://i.stack.imgur.com/EdRHK.png)](https://i.stack.imgur.com/EdRHK.png)

# iphone - UIGestureRecognizer 存储在 NSData

> ID：16126469
> 
> 赞同：2
> 
> 时间：2013-04-20T23:51:38.177
> 
> 标签：iphone, ios, uigesturerecognizer

我到处研究，但找不到答案。您将如何转换 NSData 中的 UIGestures 并在需要时将其转换回 UIGestures？

是否可以通过蓝牙将 UIGestures 发送到另一台设备？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T01:27:10.990

gesterrecognizers 是一个对象，它保存指向您的对象和系统对象的其他对象的指针，因此序列化识别器不会带回它需要返回的系统对象。如果它不依赖于系统框架，那将是一个直接的创作。因此，您唯一能做的就是保存重新创建新识别器所需的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T06:55:44.440

在任何情况下，您正在尝试或想要实施的事情都是不可能的。您不能存储或转换`UIGestureRecognizer`. 不可能。

# javascript - 如何让音频标签播放？

> ID：16126471
> 
> 赞同：0
> 
> 时间：2013-04-20T23:51:41.943
> 
> 标签：javascript, html

我正在根据图库中的当前图像动态更改 HTML5 音频标记源。

但由于某种原因，我的 HTML5 音频播放器根本无法播放。

这是我的播放器：

```
<div id="audioPlayer">
    <a onclick="playSound()">
        <audio class="audioPlayer" preload="none" controls src="">
            <source type="audio/ogg" src="" class="audio-ogg" />
            <source type="audio/mpeg" src="" class="audio-mp3" />
            <source type="audio/wav" src="" class="audio-wav" />
        </audio>
        <img src="img/playBtn.png" alt="Play" />
    </a>
</div>

function loadSound(galleryIndex) {
    document.getElementsByClassName('audio-ogg')[0].src = "sounds/" + galleryAudio.sounds[galleryIndex].ogg;
    document.getElementsByClassName('audio-mp3')[0].src = "sounds/" + galleryAudio.sounds[galleryIndex].mp3;
    document.getElementsByClassName('audio-wav')[0].src = "sounds/" + galleryAudio.sounds[galleryIndex].wav;
}

function playSound() {
    // galleryAudio.tag.play();
    // console.log(document.getElementsByClassName('audioPlayer')[0]);
    galleryAudio.tag.play();
    return false;
}

function initialise() {
    galleryAudio.tag = document.getElementsByClassName('audioPlayer')[0];
}

var galleryAudio = {
    tag: null,
    sounds: [{
            "ogg": "square.ogg",
            "mp3": "square.mp3",
            "wav": "square.wav"
        }, {
            "ogg": "rectangle.ogg",
            "mp3": "rectangle.mp3",
            "wav": "rectangle.wav"
        }, {
            "ogg": "circle.ogg",
            "mp3": "circle.mp3",
            "wav": "circle.wav"
        }, {
            "ogg": "equilateral-triangle.ogg",
            "mp3": "equilateral-triangle.mp3",
            "wav": "equilateral-triangle.wav"
        }, {
            "ogg": "isosceles-triangle.ogg",
            "mp3": "isosceles-triangle.mp3",
            "wav": "isosceles-triangle.wav"
        }, {
            "ogg": "right-angle-triangle.ogg",
            "mp3": "right-angle-triangle.mp3",
            "wav": "right-angle-triangle.wav"
        }, {
            "ogg": "scalene-triangle.ogg",
            "mp3": "scalene-triangle.mp3",
            "wav": "scalene-triangle.wav"
        }, {
            "ogg": "pentagon.ogg",
            "mp3": "pentagon.mp3",
            "wav": "pentagon.wav"
        }, {
            "ogg": "hexagon.ogg",
            "mp3": "hexagon.mp3",
            "wav": "hexagon.wav"
        }, {
            "ogg": "heptagon.ogg",
            "mp3": "heptagon.mp3",
            "wav": "heptagon.wav"
        }, {
            "ogg": "octagon.ogg",
            "mp3": "octagon.mp3",
            "wav": "octagon.wav"
        }
    ]
};

window.addEventListener('load', initialise, true); 
```

为什么我的音频播放器无法播放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:07:17.350

因为`loadSound`永远不会被调用。

```
window is loaded
  └─ initialise()

button clicked
  └─ playSound()
       └─ galleryAudio.tag.play() 
```

试试这个：

```
 <audio oncanplay="playSound()" src="..."> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T00:21:14.650

我已经修好了！

事实证明，如果您在音频标签中有`<source>`标签`src=""`，它会尝试播放空白音频源。

我只需要删除它就可以了！

# ruby-on-rails - 在不下载 git 的情况下将 Github Repo 部署到 Heroku

> ID：16126478
> 
> 赞同：0
> 
> 时间：2013-04-20T23:52:28.220
> 
> 标签：ruby-on-rails, git, heroku, repository

有没有办法在不使用 git 的情况下将 GitHub 存储库部署到 Heroku？我尝试了[https://github.com/ddollar/heroku-push](https://github.com/ddollar/heroku-push)上的链接，但它似乎不起作用，有人可以帮助解决这个问题吗？而且我知道这是可能的，我只是不完全确定如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:14:22.820

看来不能从 Github 直接推送到 Heroku：[Push from github to heroku without download repo](https://stackoverflow.com/questions/3324586/push-from-github-to-heroku-without-downloading-repo)

这也在这里讨论过：[Github direct to heroku](https://stackoverflow.com/questions/5236916/github-straight-to-heroku)

# sed - 如何在匹配时仅使用 sed 有条件地删除第一行？

> ID：16126479
> 
> 赞同：7
> 
> 时间：2013-04-20T23:52:29.407
> 
> 标签：sed

我可以`sed`用来检查某些命令输出的第一行（到标准输出）并在它与某个模式匹配时删除第一行吗？

比如说，命令的输出是这样的：

```
"AB"
"CD"
"E"
"F" 
```

我希望它变成：

```
"CD"
"E"
"F" 
```

但是当第一行是 时`"GH"`，我不想删除该行。

我试过这个，但它不起作用：

```
<some_command> |sed '1/<pattern>/d' 
```

贝壳告诉我：

```
sed: 0602-403 1/<pattern>/d is not a recognized function. 
```

我只想使用 sed 处理第一行，而其他行保持不变。

这里的正确语法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T00:27:17.220

你想引用第一行，然后说删除：

```
$ sed '1 d' file 
```

如果您知道要删除哪一行，则无需任何模式。

使用模式，使用以下语法：

```
$ sed '0,/pattern/ d' file 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-21T00:35:30.187

这可能对您有用：

```
sed -e '1!b' -e '/GH/!d' file 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-21T00:11:42.310

这就是你想要的：

```
$ sed '1{/"GH"/!d}' file 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-21T00:48:10.497

```
sed '1{/<pattern>/{/GH/!d}}' input 
```

表达式中的错误可以这样修复：

```
sed '1{/<pattern>/d}' input 
```

# php - php中的子字符串通过从数据库中检索的值

> ID：16126482
> 
> 赞同：1
> 
> 时间：2013-04-20T23:53:16.647
> 
> 标签：php

我正在尝试 t0 在 DATETIME 上执行子字符串，DATETIME 的值是通过 mysql 从数据库中检索的。

例子：

日期时间：2013 年 7 月 31 日 12:30:60 年：2013 年 月：07 日：31 小时：12 分钟：30

我下面的代码不起作用。我该怎么做呢？

```
 <?php
$sql = "SELECT * FROM auctionItem;";
        // Write a statement to open a connection to MySQL server
        $link = mysql_connect("localhost:3306", "root", "gfg");
        // Write a statement to select the required database
        mysql_select_db("KXCLUSIVE", $link);
        // Write a statement to send the SQL statement to the MySQL server for execution and retrieve the resultset
        $resultset = mysql_query($sql);
        // Write a statement to close the connection
        mysql_close($link);

    $dateTime = $row["startTime"];
    $year = substr($dateTime, 0,4);
    $month = substr($dateTime, 5,7);
    $day = substr($dateTime, 8,10);
    $hour = substr($dateTime, 11,13);
    $minute = substr($dateTime, 14,16);
    echo "year " .$year."<br></br>";
    echo "month " .$month."<br></br>";
    echo "day " .$day."<br></br>";
    echo "hour " .$hour."<br></br>";
    echo "minute " .$minute."<br></br>";
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T23:55:41.067

`substr`想要作为第三个参数的长度，而不是停止的位置。

正确的是：

```
$year = substr($dateTime, 0,4);
$month = substr($dateTime, 5,2);
$day = substr($dateTime, 8,2);
$hour = substr($dateTime, 11,2);
$minute = substr($dateTime, 14,2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T23:56:15.273

为此使用[`DateTime`](http://www.php.net/manual/de/class.datetime.php)该类：

```
$dt = new DateTime('2013-07-31 12:30:60');
echo "year " .$dt->format('Y')."<br></br>";
echo "month " .$dt->format('m')."<br></br>";
echo "day " .$dt->format('d')."<br></br>";
echo "hour " .$dt->format('H')."<br></br>";
echo "minute " .$dt->format('i')."<br></br>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T23:56:50.460

您的代码缺少部分：

```
<?php
   $sql = "SELECT * FROM auctionItem;";
        // Write a statement to open a connection to MySQL server
        $link = mysql_connect("localhost:3306", "root", "gfg");
        // Write a statement to select the required database
        mysql_select_db("KXCLUSIVE", $link);
        // Write a statement to send the SQL statement to the MySQL server for execution and retrieve the resultset
        $resultset = mysql_query($sql);
        // Write a statement to close the connection
        $row = mysql_fetch_assoc($resultset); //this was lost
        mysql_close($link);

    $dateTime = $row["startTime"];
    $year = substr($dateTime, 0,4);
    $month = substr($dateTime, 5,7);
    $day = substr($dateTime, 8,10);
    $hour = substr($dateTime, 11,13);
    $minute = substr($dateTime, 14,16);
    echo "year " .$year."<br></br>";
    echo "month " .$month."<br></br>";
    echo "day " .$day."<br></br>";
    echo "hour " .$hour."<br></br>";
    echo "minute " .$minute."<br></br>";
?> 
```

PS：不要使用 mysql 扩展....改用 mysqli 或 PDO

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T00:03:05.473

使用[strtotime()](http://php.net/manual/en/function.strtotime.php)：

```
$time = '2013-07-31 12:30:60';
$timestamp = strtotime($time);

$year = date('Y', $timestamp);
$month = date('m', $timestamp);
$day = date('d', $timestamp);
$hour = date('H', $timestamp);
$minute = date('i', $timestamp);
$second = date('s', $timestamp);

echo $year.' '.$month.' '.$day.' '.$hour.' '.$minute.' '.$second.'<br>'; 
```

使用[preg_split()](http://php.net/manual/en/function.preg-split.php)：

```
$time = '2013-07-31 12:30:60';
list($year, $month, $day, $hour, $minute, $second) = preg_split('/-|:|\s/', $time);
echo $year.' '.$month.' '.$day.' '.$hour.' '.$minute.' '.$second; 
```

# jquery - jquery-rails 和 jquery-ui-rails gem 在 Ruby on Rails 应用程序中无法按预期工作

> ID：16126485
> 
> 赞同：0
> 
> 时间：2013-04-20T23:53:21.060
> 
> 标签：jquery, ruby-on-rails, ajax

我在使用`jquery-rails`and时遇到问题`jquery-ui-rails gems`。我已经到了可以在本地让日期选择器**出现**并且某些效果起作用的地步。但是，当我检查托管在 heroku 上的网站时，即使我的 rails ajax 响应也不起作用。它们默认为控制器中的常规 html 响应，错误为

```
Error: Sprockets::FileNotFound: couldn't find file 'jquery' (in /app/app/assets/javascripts/application.js:4) 
```

我注意到它说`/app/app/`我知道这是不对的，但我不知道如何解决这个问题。

这是我的 application.js 中包含的内容：

```
//= require_self
//= require foundation.min
//= require app
//= require jquery
//= require jquery_ujs
//= require jquery-ui 
```

## 问题一：

当我在我的 Gemfile 中添加`jquery-rails`和`jquery-ui-rails`gem 时，它们应该包含在我的`group :assets do`块中，还是应该在外面？我已经尝试了这两种方法，但它都不起作用，但我认为这个问题有一个正确的答案，假设我让其他一切正常工作。

此外，我到处都读到`jquery-ui-rails`gem 包含我需要的 css，例如 jquery datepicker，但我可以让 datepicker 具有任何样式的唯一方法是将代码 url 包含在我的 application.html.erb 文件中。

## 问题2：

我是否可以通过内置的 rails ajax 响应 (*.js.erb) 将日期选择器添加到部分加载的表单中？我有一个部分列表，其中包含特定 text_field 的日期选择器，但是当我单击日期（本地端）时，日期不会放在 text_field 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:33:39.353

**答案 1：** :assets 组基本上充当其他组的快捷方式，具体取决于您在 config/application.rb 文件中设置的内容：

```
if defined?(Bundler)
 # If you precompile assets before deploying to production, use this line
 # Bundler.require(*Rails.groups(:assets => %w(development test staging)))
 # If you want your assets lazily compiled in production, use this line
 Bundler.require(:default, :assets, Rails.env)
end 
```

这在你的项目中是否漂亮或需要，真的取决于你。我通常总是将它们从 :assets 组中删除，但这只是因为我的组有点不同并且喜欢我的 Gemfile 整洁。

**至于 css-files**，做`*= require jquery-ui/jquery-ui.css`

**路径：**

```
vendor/assets/stylesheets/jquery-ui/jquery-ui.css 
vendor/assets/images/jquery-ui/images/ (your theme images) 
```

读[这个！](https://github.com/joliss/jquery-ui-rails)

**答案 2：**是的，你应该可以。您的方法似乎有点不方便，我将不得不查看一些代码来帮助您。

# java - 没有手动提交的 JTA EntityManager

> ID：16126486
> 
> 赞同：0
> 
> 时间：2013-04-20T23:53:29.623
> 
> 标签：java, entitymanager, jta

我正在尝试将我的项目从 Seam 3 中移出。

现在我在关闭 Seam Faces 模块后卡在 JTA 事务上。有综合交易管理。事务已开始并自动提交 - 无需手动提交。

现在，当我尝试执行`EntityManager.persist()`or时`EntityManager.merge(Object entity)`，出现错误：

```
JBAS011469: Transaction is required to perform this operation (either use a transaction or extended persistence context) 
```

**有什么方法可以强制 JTA 启动事务并透明地提交它？**

附言。有趣的事情 - 前段时间我正在寻找如何在 Seam3 中强制手动提交/回滚的解决方案。

好的，如果我将 bean 置于 @Stateless 状态 - 那么它的行为与我预期的一样。

但...

不是吗 - 如果我放置应用程序管理的 EntityManager - 那么我应该自己管理事务（`testApplicationJTA()`下面示例中的方法），但是如果我使用容器管理的 EntityManager - 那么它应该在没有事务管理的情况下工作（方法`testContainterJTA()`）？

我的例子：

```
@Named
@SessionScoped
public class Test implements Serializable {

    private static final long serialVersionUID = 1L;

    @PersistenceContext
    private EntityManager           em;

    @PersistenceUnit
    private EntityManagerFactory    emf;

    @Resource
    private UserTransaction         utx;

    public void testContainerJTA() {
        TestEntity entity = em.find(TestEntity.class, 1L);
        entity.setName("dddddd");
        em.merge(entity);

    }

    public void testApplicationJTA() {
        EntityManager mgr = emf.createEntityManager();
        TestEntity entity = em.find(TestEntity.class, 1L);
        entity.setName("fffff");
        try {
            utx.begin();
            mgr.joinTransaction();
            mgr.merge(dict);
            utx.commit();
        } catch (Exception e) {
            utx.rollback();
        }

        mgr.close();

    }
} 
```

在我上面的示例中，方法 testContainerJTA() 不起作用。为什么？

如果我将删除`@SessionScoped`并放置`@Stateless`然后方法`testApplicationJTA()`不起作用，但`testContainerJTA()`有效。为什么？

它们不应该一直工作吗——作为应用程序管理和容器管理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:50:48.350

好的，因此可以使用拦截器使 CDI bean 成为事务性的 :-)

最后，我设法解决了阅读这篇文章的问题：

[http://smokeandice.blogspot.com/2009/12/cdi-and-declarative-transactions.html](http://smokeandice.blogspot.com/2009/12/cdi-and-declarative-transactions.html)

**编辑：**

从 JEE7 开始，有一个新的`@Transactional`注解将 CDI bean 或方法中的所有 JPA 操作都带入事务。

# lua - 在单点触控 Corona SDK 中绘制和添加线条

> ID：16126487
> 
> 赞同：0
> 
> 时间：2013-04-20T23:53:31.270
> 
> 标签：lua, coronasdk

目前，我正在尝试使用著名的 One Touch Drawing 创建具有类似逻辑的游戏。经过研究，我已经知道如何画线。

无论如何，例如，如果我的场景中有 4 个点形成一个正方形，并且我开始在这 4 个点中的一个点上画一条线，我怎样才能在不抬起手指结束触摸的情况下立即附加线？现在，这是我到目前为止所做的当前逻辑：

```
function drawLine(event,self)
  if event.phase == "began" then
     --do something here
  elseif event.phase == "moved" then
     local line = display.newLine(x1,y1,x2,y2)
     if myflag == true then
          line:append(.....)
     end
  end
end 
```

如果触摸通过一个点，我尝试让标志返回 true，但这根本不起作用。如何在绘制线条时一键添加线条？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T06:57:34.907

我正在使用电晕创建相同的游戏，我使用图像作为图案，然后使用 newLine 对其进行回溯，因为对于每个图案的点，我使用图案的顶点获得我的点的位置。看图片 ![在此处输入图像描述](https://i.stack.imgur.com/Dy3bv.png)

# cordova - Phonegap 构建：index.html 中指向 css 和 JS 文件的链接不起作用

> ID：16126490
> 
> 赞同：0
> 
> 时间：2013-04-20T23:53:40.703
> 
> 标签：cordova, phonegap-build

我不知道为什么，但在我看来，我的 index.html 中所有 JS 文件和 css 的链接都不起作用。这些文件未添加到我的应用程序中。（但配置文件解析得很好）当我用 Visual for WP7 构建它时它工作正常......这是我的 index.html 的头：

```
<!DOCTYPE HTML>
<html>
<head>
    <title>aaaaa</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <link rel="stylesheet" type="text/css" href="css/jquery.mobile.structure-1.3.0.min.css" />
    <link rel="stylesheet" type="text/css" href="css/myJQM.css" />
    <link rel="stylesheet" type="text/css" href="css/app.css" />
    <script src="phonegap.js" type="text/javascript"></script>
    <script src="js/lib/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="js/app.js" type="text/javascript"></script>
    <script src="js/lib/jquery.mobile-1.3.0.min.js" type="text/javascript"></script>
</head> 
```

（我已经尝试删除元内容类型和“格式检测”，我总是删除我的 zip 中的 phonegap.js）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T17:58:46.103

我的文件夹 lib 带有大写字母（“Lib”），浏览器和 WP7 模拟器不区分大小写，Android 是。愚蠢的错误，但我花了很多时间才找到它-_-

# java - 使用 Java 获取 MySQL 数据库中的特定字段

> ID：16126492
> 
> 赞同：0
> 
> 时间：2013-04-20T23:53:56.013
> 
> 标签：java, mysql

我正在用 Java 制作一个银行账户程序来测试 MySQL。到目前为止，该程序允许您创建一个具有名字和姓氏、密码、用户 ID 和帐户余额的新成员（每个用户占用数据库中的一行）。您如何让他们仅通过输入他们的用户名和密码来登录？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T23:56:37.813

您必须将给定的凭据访问权限与数据库中的值进行比较。

您可能希望存储一个散列密码（使用盐！），以防止数据库被盗时出现问题。

对哈希进行加盐的想法很重要，已知有一些像 md5 这样的哈希函数不安全，但是如果你这样做

```
password = "123456"
salt = "someString" //Anything you want, but it must be the same all the time
saltedPassword = password + "-" + salt
hashedSaltedPassword = yourHashFunction(saltedPassword) 
```

然后， hashedSaltedPassword 更安全，如果哈希函数被破坏，攻击者将获得的密码将是“123456-someString”，这不是真正的密码。

散列函数字段非常有趣，我强烈建议您查看它，无论如何从查看 SHA 函数开始

无论如何，看起来你应该搜索一下谷歌:)

# java - 在shell中启动java程序但用eclipse编写？

> ID：16126496
> 
> 赞同：0
> 
> 时间：2013-04-20T23:54:22.513
> 
> 标签：java, console

是否可以在我用 eclipse 编写的 shell 中启动一个程序？

由于某些原因，我不想使用 Eclipse 控制台，所以有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T23:58:32.687

绝对地。将您的程序导出到 jar 文件 (your-project.jar) 并通过调用以下命令运行所需类的 main 函数：

> java -cp your-project.jar packagename.classname

您甚至可以通过以下方式将输出（stdout、stderr）重定向到文件：

> java -cp your-project.jar packagename.classname > outputFile 2>&1

# bash - 如何使用 bash 命令删除 html 标签内的空格

> ID：16126498
> 
> 赞同：2
> 
> 时间：2013-04-20T23:54:43.657
> 
> 标签：bash

我的 html 解析器程序有问题。我的 html 有这样的标签，`< p>`并且`<p >`：空白给我带来了问题。

有没有一种简单的方法可以在单个 bash 命令中使用 sed 之类的东西来删除这些空格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T00:03:20.553

这是一个修剪无属性标签内的前导和尾随空格的方法。

```
$ echo '< p> </ p> <p > < /p>' | sed -E 's|<(/?) *([^ >]*) *>|<\1\2>|g'
<p> </p> <p> </p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T00:05:15.703

不，有太多的边缘情况，引号和转义字符会破坏你的结果。对于你得到的每一个答案，都有容易找到的例子可以打破它们。有关完整讨论，请参阅[RegEx match open tags except XHTML self-contained tags](https://stackoverflow.com/questions/1732348)。

# css - 为什么一个 div 中的 a:link 会影响另一个 div 中的 a:link？

> ID：16126501
> 
> 赞同：0
> 
> 时间：2013-04-20T23:55:17.580
> 
> 标签：css, html, styles

我正在使用内容 div 和页脚 div。每个 div 都有不同的锚样式。出于某种原因，我的内容锚点采用了页脚锚点的样式，而我终其*一生*都无法弄清楚为什么！

这是HTML：

```
<div class="content">
  <h1>WELCOME</h1>
  <p>Content content content. Click <a href="index.html">here</a> for more information.</p>
</div>

<div class="footer">
  <p><a href="index.html">Home</a> &mdash; <a href="">Printable Forms</a> &mdash; <a href="">Ad Rates</a> &mdash; <a href="">Contact Us</a></p>
</div> 
```

这是CSS：

```
body
{

  background-color: #c8d3fc;
  color: black;
  font-family: Times New Roman;
  font-size: 12pt;

}

.content
{

  display: block;
  float: left;
  margin-left: 261px;
  width: 827px;
  background: url('../images/contentBG.jpg') repeat-y;

}

.content a:link, a:visited, a:active
{

  color: black;
  text-decoration: none;
  font-weight: bold;

}

.content a:hover
{

  text-decoration: none;
  color: #ff9e00;
  font-weight: bold;

}

.footer
{

  display: block;
  float: left;
  margin-left: 261px;
  width: 827px;
  height: 78px;
  background: url('../images/footerBG.jpg');
  color: white;

}

.footer a:link, a:visited, a:active
{

  text-decoration: none;
  color: white;

}

.footer a:hover
{

  text-decoration: none;
  color: #ff9e00;

} 
```

因此，即使我的正文默认颜色为黑色，并且我的内容 div 的 a:link 等样式专门设置为黑色，内容 div 中的链接仍显示为白色。如果我将页脚 div 的 a:link 等样式更改为黑色，它会将页脚和内容链接都更改为黑色，但我需要页脚为白色。我试过把“颜色：黑色；” 直接在内容 div 中，但这没有帮助。a:hover 样式和其他一切都可以完美运行。真正让我丧命的是代码在 IE 中运行良好，但在 FF 中运行良好。我写了非常简单的代码，感觉可能有一个非常简单的解决方案，但我就是想不通，所以任何帮助都会非常感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T23:57:51.997

你的选择器有问题。

```
.content a:link, a:visited, a:active {} 
```

应该：

```
.content a:link, .content a:visited, .content a:active {} 
```

页脚链接也是如此：

```
.footer a:link, .footer a:visited, .footer a:active {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T23:59:44.660

> .content a:link, a:visited, a:active

将适用于所有`a:visited`且`a:active`仅适用于`.content a:link`. 如果您使用逗号，则必须再次引用它们..

所以改变

> .content a:link, a:visited, a:active

至

> .content a：链接，.content a：已访问，.content a：活动

和

> .footer a:link, a:visited, a:active

至

> .footer a：链接，.footer a：已访问，.footer a：活动

# node.js - 并发网页会话的最佳技术是什么？

> ID：16126502
> 
> 赞同：-1
> 
> 时间：2013-04-20T23:55:26.030
> 
> 标签：node.js, session, express

为了使网页根据数据库中的值变化自动更新屏幕，推荐使用什么技术或技术？

例如，有一个带有按钮的网页。当按下按钮时，数据库中的对应值从关闭变为开启。完成后，再次检查数据库，网页上的按钮变为相应的状态（打开或关闭）。

几个网页可能在不同的设备上打开，它们也必须改变。

我已经使用 Express 和 Socket.io 研究了 Node.js，但它的文档似乎相对较少，我想知道这是否可以通过另一种方式完成，因为 JavaScript 非常慢（我认为）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:26:46.987

如果您不介意[Meteor JS的前沿地位，您可能会感兴趣。](http://meteor.com)它非常花哨的 javascript 框架，可以进行大量实时更新和并发。很酷。

# c++ - 我看到 <?= 和 >?= 在代码中使用： //community.topcoder.com/s 问问题 问问题 2013-04-20T23:55:40.380 2645 次 This question shows research effort; it is useful and clear 8 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我看到 <?= 和 >?= 在代码中使用： //community.topcoder.com/stat ?c=problem_solution&rm=151152&rd=5854&pm=2923&cr=310333 我尝试在没有包含的情况下进行编译以测试它是否是标准的，但它不起作用。然后我添加了包含，但它仍然给出了同样的错误： question-mark.cpp:15:5：错误：“？”之前的预期主表达式 令牌 question-mark.cpp:15:6：错误：'='之前的预期主表达式令牌 question-mark.cpp:15:9：错误：';'之前的预期'：' token question-mark.cpp:15:9: error: ';'之前的预期主表达式 令牌 #include <stdio.h> #include <algorithm> #include <iostream> #include <sstream> #include <string> #include <vector> using namespace std; int main() { int x = 3; int y = 2; x >?= y; printf("x = %d\n", x); return 0; } 以下是它在链接代码中的使用方式： x <?= h[i][j]; // x = (h[i][j] < x) ? h[i][j] : x; 我怎样才能使这项工作？ 应用程序在启动器中按图标启动时完全重启 我正在尝试发布我的第一个 android 应用程序以发送给一些测试人员。但是，我遇到了一个问题。当您退出应用程序，然后通过其图标启动它重新进入它时，它会重新启动整个应用程序，而不是返回到之前的位置。即使您在退出后立即重新进入，也会发生这种情况。但是，如果我按住主页按钮并通过最近的应用程序列表启动它，它就不会发生。 我在网上搜索了其他有这个问题的人，有几个，但没有人对为什么会发生在他们身上有一个可靠的答案。在旧问题中建议在清单文件中将启动模式设置为 singletask 或 singleinstance，但这对我没有帮助，此外 - 据我了解，android 的默认行为是返回到任务的先前状态在这种情况下，所以我不知道为什么我需要特殊的清单选项才能做到这一点。 这个问题最离奇的是，如果我用eclipse和调试器把app放到手机上，就不会出现这个问题。我什至不需要连接到调试器，似乎只要我有应用程序的调试版本，问题就不会发生。但是，如果我使用发布版本（我使用 Eclipse 中的 Android Tools - Export Signed Application Package 菜单选项创建它），就会出现问题。如果有人对造成这种情况的原因有任何见解，我很想听听您的想法。 c++overloadingvariable-assignmentoperator-keyword 4 2 回答 2 This answer is useful 9 这些是 GCC 扩展运算符。与(是 "max" 运算符)a <?= b具有相同的含义，但它只对其左侧表达式求值一次。当是一个变量时，这并不重要，但它在表示表达式时可能会有所不同，尤其是当表达式有副作用时。例如，在a = min(a, b)>?=aa *dest++ <?= *src++; ++indest++只会被评估一次。 这两个运算符现在都已被弃用。 于 2013-04-21T00:00:22.807 回答 This answer is useful 3 这是一个 GCC 扩展。x >?= y相当于： x = max(x, y); 虽然我有一段时间没有看到它使用过。 于 2013-04-20T23:59:01.423 回答 Related 1 css - 如何将背景图像（CSS，而不是图案）添加到 Highcharts 列？ 1 python - 转义 web2py 数据库连接字符串中的特殊字符 3 windows-phone-8 - 如何以编程方式从 Windows Phone 8 中选择照片 1 jquery - 如何停止 IE 呈现插入到 textarea 中的 HTML 1 asp.net-mvc-3 - mvc3 对象引用未设置为对象的实例，无法弄清楚 1 oracle - 将 Clob 写入本地计算机上的文件 2 configuration - 什么是配置文件 2 iphone - UINavigationController 在 iPhone 的 ARC 下不起作用 4 python - Python 3 中的字符串格式化 1 jquery - 在点击问题上更改 cookie 值 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：16126507
> 
> 赞同：8
> 
> 时间：
> 
> 标签：c++, overloading, variable-assignment, operator-keyword

我看到 <?= 和 >?= 在代码中使用： [//community.topcoder.com/stat ?c=problem_solution&rm=151152&rd=5854&pm=2923&cr=310333](http://community.topcoder.com/stat?c=problem_solution&rm=151152&rd=5854&pm=2923&cr=310333)

我尝试在没有包含的情况下进行编译以测试它是否是标准的，但它不起作用。然后我添加了包含，但它仍然给出了同样的错误：

> question-mark.cpp:15:5：错误：“？”之前的预期主表达式 令牌 question-mark.cpp:15:6：错误：'='之前的预期主表达式令牌 question-mark.cpp:15:9：错误：';'之前的预期'：' token question-mark.cpp:15:9: error: ';'之前的预期主表达式 令牌

```
#include <stdio.h>
#include <algorithm> 
#include <iostream> 
#include <sstream> 
#include <string> 
#include <vector> 

using namespace std;

int main()
{

    int x = 3;
    int y = 2;
    x >?= y;
    printf("x = %d\n", x);

    return 0;
} 
```

以下是它在链接代码中的使用方式：

```
x <?= h[i][j];  // x = (h[i][j] < x) ? h[i][j] : x; 
```

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T00:00:22.807

这些是 GCC 扩展运算符。与(是 "max" 运算符)`a <?= b`具有相同的含义，但它只对其左侧表达式求值一次。当是一个变量时，这并不重要，但它在表示表达式时可能会有所不同，尤其是当表达式有副作用时。例如，在`a = min(a, b)``>?=``a``a`

```
*dest++ <?= *src++; 
```

`++`in`dest++`只会被评估一次。

这两个运算符现在都已被[弃用](https://stackoverflow.com/a/3437425/335858)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T23:59:01.423

这是一个 GCC 扩展。`x >?= y`相当于：

```
x = max(x, y); 
```

虽然我有一段时间没有看到它使用过。

# android - 应用程序在启动器中按图标启动时完全重启

> ID：16126511
> 
> 赞同：87
> 
> 时间：2013-04-20T23:55:50.130
> 
> 标签：android, android-launcher

我正在尝试发布我的第一个 android 应用程序以发送给一些测试人员。但是，我遇到了一个问题。当您退出应用程序，然后通过其图标启动它重新进入它时，它会重新启动整个应用程序，而不是返回到之前的位置。即使您在退出后立即重新进入，也会发生这种情况。但是，如果我按住主页按钮并通过最近的应用程序列表启动它，它就不会发生。

我在网上搜索了其他有这个问题的人，有几个，但没有人对为什么会发生在他们身上有一个可靠的答案。在旧问题中建议在清单文件中将启动模式设置为 singletask 或 singleinstance，但这对我没有帮助，此外 - 据我了解，android 的默认行为是返回到任务的先前状态在这种情况下，所以我不知道为什么我需要特殊的清单选项才能做到这一点。

这个问题最离奇的是，如果我用eclipse和调试器把app放到手机上，就不会出现这个问题。我什至不需要连接到调试器，似乎只要我有应用程序的调试版本，问题就不会发生。但是，如果我使用发布版本（我使用 Eclipse 中的 Android Tools - Export Signed Application Package 菜单选项创建它），就会出现问题。如果有人对造成这种情况的原因有任何见解，我很想听听您的想法。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2014-02-07T07:58:38.513

我在应用程序中遇到了同样的问题，我通过添加标志`"android:launchMode="singleTop""`而不是`"android:launchMode="singleTask""`在`<activity>`AndroidManifest.xml 文件的声明中解决了这种行为。希望这会对某人有所帮助。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-12-30T05:07:27.717

到目前为止，我发现这是一个基于您如何在真实设备中安装它的问题，特别是：

1.  如果您只是将 APK 复制并粘贴到设备的本地存储并从设备安装它，无论它是已签名或未签名还是从 bin 文件夹中获取，它都会显示此行为，应用程序从菜单图标重新启动。

如果您使用以下选项之一安装它，则不会出现此问题：

1.  使用终端或命令提示符转到 sdk/tools/ 然后键入

    ```
    adb install <FILE PATH OF .APK FILE> 
    ```

    在 Linux 中，键入：

    ```
    ./adb install <FILE PATH OF .APK FILE> 
    ```

2.  只需从 Eclipse 运行您的项目。

我很高兴知道是否有任何方法可以分发正确的 APK 以进行 beta 测试。我已经尝试导出签名的 APK，因为当您复制和粘贴 APK 并手动安装它时，它会显示流氓行为。

**更新：**

我找到了解决方案。请遵循以下两个步骤：

1.  *在activity*标签内的*AndroidMainifest.xml*`android:launchMode="singleTask" = true`中为你应用的所有activity设置。
***   将此代码放入您的 Launcher Activity 中`onCreate()`。

    ```
    if (!isTaskRoot())
    {
        final Intent intent = getIntent();
        final String intentAction = intent.getAction(); 
        if (intent.hasCategory(Intent.CATEGORY_LAUNCHER) && intentAction != null && intentAction.equals(Intent.ACTION_MAIN)) {
            finish();
            return;       
        }
    } 
    ```** 

 **此行为是 Android 中的错误。不是特例。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-11-30T06:07:06.590

```
 // To prevent launching another instance of app on clicking app icon 
        if (!isTaskRoot()
                && getIntent().hasCategory(Intent.CATEGORY_LAUNCHER)
                && getIntent().getAction() != null
                && getIntent().getAction().equals(Intent.ACTION_MAIN)) {

            finish();
            return;
        } 
```

在调用 setContentView 之前，在您的启动器活动中编写上述代码。这将解决问题

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-08-05T08:53:41.933

您可以将 launchMode 用作*AndroidManifest.xml*中 Launcher Activity 的**singleTop**

 *```
 <activity
        android:name="<YOUR_ACTIVITY>"
        android:label="@string/app_name"
        android:launchMode="singleTop">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-09-16T17:29:28.287

这是 Android 中的默认行为。对于调试版本，由于某种原因，它的工作方式有所不同。它可以通过添加`android:launchMode="singleInstance"`到活动中来解决，您希望在从图标启动后重新启动。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-10-21T13:36:26.573

将此添加到您的第一个活动中：

```
if (!isTaskRoot()) {
        finish();
        return;
}     
super.onCreate(savedInstanceState); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-02-09T02:24:51.530

尝试使用`android:alwaysRetainTaskState`如下例所示：

```
<activity
    android:name="com.jsnider.timelineplanner.MainActivity"
    android:alwaysRetainTaskState="true"
    android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-07-08T23:18:06.460

对我来说，我发现我错误地发布`NoHistory = true`了我的活动属性

```
[Activity(NoHistory = true, ScreenOrientation = ScreenOrientation.Landscape)] 
```

这阻止了应用程序恢复到此活动并重新启动

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-06-19T04:35:48.887

我在 2019 年的 Android TV 上看到了这个问题。有没有更好的解决方法？以外

```
if (!isTaskRoot()) {
    finish();
} 
```

它可以工作，但看起来比实际解决方案更像一个黑客。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-10-17T03:50:42.160

您可以尝试`android:alwaysRetainTaskState="true"`在 AndroidManifest.xml 中为您的启动器活动设置。

```
 <activity
        android:name=".YourMainActivity"
        android:alwaysRetainTaskState="true">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

有关详细信息，您可以查看[https://developer.android.com/guide/topics/manifest/activity-element.html#always](https://developer.android.com/guide/topics/manifest/activity-element.html#always)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-06-23T08:31:37.700

我在重新启动应用程序时遇到了问题，我的问题出在主题上：我有不同的片段，我会有一个适合所有人的背景。但这会导致某些设备中的应用程序重新启动（.

我在主题中删除了这一行，这有助于：

项目名称="android:windowBackground">​​@drawable/background /item

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-09-01T09:32:20.150

上述所有解决方案在我的所有设备上都无法始终如一地工作。它适用于一些三星，但不是全部。

对我来说问题的原因是手动安装 APK。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-10-16T13:28:08.593

对我来说，修复是`LaunchMode = LaunchMode.SingleTop`在主 Activity 上添加到我的 Activity 属性：

```
/// <summary>
    /// The main activity of the application.
    /// </summary>
    [Activity(Label = "SilhuettePhone",
        Icon = "@drawable/icon",
        Theme = "@style/MainTheme",
        MainLauncher = true,
        ConfigurationChanges = ConfigChanges.ScreenSize | ConfigChanges.Orientation,
        ScreenOrientation = ScreenOrientation.Portrait,
        LaunchMode = LaunchMode.SingleTop,
        WindowSoftInputMode = SoftInput.AdjustResize)] 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-09-26T20:27:26.480

移除任务关联而不是启动模式在一定程度上起到了一定的作用，因为它有自己的缺点

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2013-04-21T00:10:32.917

当您在 Android 中按下后退按钮时，将`onDestroy`调用该方法（与按下主页按钮相反，仅`onPause()`调用该方法）。

如果您需要您的应用程序从中断处继续，请将应用程序的状态保存在您的方法中，然后在`onDestroy()`方法中加载该状态`onCreate()`。***

# c - 使用 SWIG 从 C 代码定义类的最佳方法是什么？

> ID：16126513
> 
> 赞同：1
> 
> 时间：2013-04-20T23:56:02.010
> 
> 标签：c, swig

在 C 中看到以下模式很常见：

```
/* struct definition */
typedef struct {int x,y,z} vector_t; 

/* Methods that always take defined struct as first argument */
int vector_add_scalar(vector_t *v, int s);
int vector_sub_scalar(vector_t *v, int s); 
```

显然，在 OOP 中，类比是拥有一个向量对象，然后上述函数成为它的方法。我想知道的是使用 SWIG 将上述示例转换为其 OOP 等效项的最佳方式。我是否应该在我的接口文件中从头开始定义一个类（在这种情况下，我不妨编写自己的绑定）？是否有我缺少的命令行选项？或者也许该`%extend`指令是我正在寻找的，尽管我看到的所有示例都涉及在接口文件中编写您自己的代码？任何和所有输入将不胜感激！

# c - 在 C 中生成两个独立播种的随机数列表

> ID：16126517
> 
> 赞同：0
> 
> 时间：2013-04-20T23:56:24.630
> 
> 标签：c, random

我的程序有两个不同的函数，它们都调用随机数。我希望能够独立播种每个函数调用的随机数，这样我就可以运行完整的程序多次调用一个函数的相同随机数并更改另一个函数调用的随机数。有什么见解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T00:12:00.467

POSIX 提供[`drand48()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/drand48.html)函数族；你可以使用其中的一些来达到你需要的效果：

*   `double erand48(unsigned short xsubi[3]);`
*   `long jrand48(unsigned short xsubi[3]);`
*   `long nrand48(unsigned short xsubi[3]);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T00:22:39.783

在面向对象的语言中，您将创建两个独立的随机数生成器对象并分别调用它们。在 C 语言中，您必须自己完成这项工作。获取一些代码，例如[Mersenne Twister](http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/emt.html)或我的[onejoker](https://github.com/lcrocker/onejoker/src/clib/prng.c)，并对其进行修改以获取多个状态变量。例如，我的代码中的 JKISS prng 将其内部状态保存在四个变量 x、y、z 和 c 中。将它们更改为数组或结构数组，并保留几组。然后独立播种。因此，无论代码中当前有一个“x”，将其更改为“x[i]”，其中 i 是流的编号。既然你提到它，我这样做可能不是一个坏主意...... :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T00:06:20.047

您可以为第一个播种一些常数，第二个播种为当前时间

# jquery - Woothemes Flexslider 2 缺少方向导航按钮

> ID：16126519
> 
> 赞同：0
> 
> 时间：2013-04-20T23:56:40.757
> 
> 标签：jquery, flexslider, nav, woothemes

我一直在尝试为 flexslider v2.0 找到有关“不可见导航功能”的答案，但我没有找到任何可以在线回答我的确切问题的答案。也许是因为将基本滑块添加到您的页面应该是不费吹灰之力。=/

无论如何，我希望有人能解释为什么我的滑块没有显示“下一个”和“上一个”控件的原因。

我已按照 woothemes 提供的三个步骤进行操作，并将`bg_direction_nav.png`文件添加到我的“图像”文件夹中。

奇怪的是，当我将鼠标悬停在控件应位于的区域上时，我可以单击并在图像之间切换，所以我知道它存在，只是不可见。

这是CSS：

```
.flex-direction-nav {*height: 0;}
.flex-direction-nav a {width: 30px; height: 30px; margin: -20px 0 0; display: block; background: url(images/bg_direction_nav.png) no-repeat 0 0; position: absolute; top: 50%; z-index: 10; cursor: pointer; text-indent: -9999px; opacity: 1; -webkit-transition: all .3s ease;}
.flex-direction-nav .flex-next {background-position: 100% 0; right: -36px; }
.flex-direction-nav .flex-prev {left: -36px;}
.flexslider:hover .flex-next {opacity: 1 !important; right: 5px;}
.flexslider:hover .flex-prev {opacity: 1 !important; left: 5px;}
.flexslider:hover .flex-next:hover, .flexslider:hover .flex-prev:hover {opacity: 1;}
.flex-direction-nav .flex-disabled {opacity: .3!important; filter:alpha(opacity=30); cursor: default;} 
```

请让我知道我是否应该提供其他任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-09T20:43:52.257

同样的问题。发现他们已经用字体文件替换了图形 .png。Soooo，将下载中包含的字体目录复制到您的服务器上。在 CSS 中重新映射路径。我必须将 '/' 添加到 src:url('fonts/flexslider-icon.eot'); 在 'fonts...' 之前 所以这个： src:url('/fonts/flexslider-icon.eot'); 现在就像一个魅力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T11:00:41.213

调用JS时尝试`directionNav: true`

```
$('#mainslider').flexslider({  
 directionNav: true
}); 
```

# java - 使用 CallableTask/Futures 和 ObjectMapper 时多线程代码的性能问题

> ID：16126523
> 
> 赞同：0
> 
> 时间：2013-04-20T23:56:56.110
> 
> 标签：java, multithreading, jackson, future

我正在开发一个基于 REST 服务的项目，其中我有两个组件，如下所述-

1.  `URL's`客户端，它将为服务组件提供必要的服务
2.  然后服务（REST 服务）组件将使用这些`URL's`从数据库中获取数据。

通常 URL 看起来像这样 -

`http://host.qa.ebay.com:8080/deservice/DEService/get/USERID=9012/PROFILE.ACCOUNT,PROFILE.ADVERTISING,PROFILE.DEMOGRAPHIC,PROFILE.FINANCIAL`

上面 URL 的含义是-为了`USERID- 9012`给我这些列的数据库中的数据-

`[PROFILE.ACCOUNT, PROFILE.ADVERTISING, PROFILE.DEMOGRAPHIC, PROFILE.FINANCIAL]`

目前我正在客户端组件方面进行基准测试。我发现下面的方法正在使用`time(95 Percentile)`一堆`~15ms`。

下面的方法将接受两个参数 -

`List<DEKey> keys- sample data in keys will have USERID=9012`

`List<String> reqAttrNames- sample data for reqAttrNames will be-`

`[PROFILE.ACCOUNT, PROFILE.ADVERTISING, PROFILE.DEMOGRAPHIC, PROFILE.FINANCIAL]`

下面是代码-

```
public DEResponse getDEAttributes(List<DEKey> keys, List<String> reqAttrNames) {

    DEResponse response = null;
    try {
        String url = buildGetUrl(keys,reqAttrNames);

        if(url!=null){
            List<CallableTask<DEResponse>> tasks = new ArrayList<CallableTask<DEResponse>>();
            CallableTask<DEResponse> task = new DEResponseTask(url); 
            tasks.add(task);

            // STEP 2: Execute worker threads for all the generated urls
            List<LoggingFuture<DEResponse>> futures = null;
            try {
                long waitTimeout = getWaitTimeout(keys);
                futures = executor.executeAll(tasks, null, waitTimeout, TimeUnit.MILLISECONDS);

                // STEP 3: Consolidate results of the executed worker threads
                if(futures!=null && futures.size()>0){
                    LoggingFuture<DEResponse> future = futures.get(0);
                    response = future.get();
                }
            } catch (InterruptedException e1) {
                logger.log(LogLevel.ERROR,"Transport:getDEAttributes Request timed-out :",e1);
            }
        }else{
            //
        }
    }  catch(Throwable th) {

    }

    return response;
} 
```

上面的方法会把对象还给我`DEResponse`。

下面是`DEResponseTask class`

```
public class DEResponseTask  extends BaseNamedTask implements CallableTask<DEResponse> {

        private final ObjectMapper m_mapper = new ObjectMapper();

        @Override
        public DEResponse call() throws Exception {
            URL url = null;
            DEResponse DEResponse = null;
            try {
                if(buildUrl!=null){
                    url = new URL(buildUrl);

                    DEResponse = m_mapper.readValue(url, DEResponse.class);

                }else{
                    logger.log(LogLevel.ERROR, "DEResponseTask:call is null ");
                }
            } catch (MalformedURLException e) {

            }catch (Throwable th) {

            }finally{
            }

            return DEResponse;
        }
    } 
```

这个多线程代码的编写方式有什么问题吗？如果是，我怎样才能提高效率？

`executeAll`在我的公司中为方法签名，`executor`他们有自己的执行程序，它将实现 Sun Executor 类-

```
/**
     * Executes the given tasks, returning a list of futures holding their 
     * status and results when all complete or the timeout expires, whichever
     * happens first.  <tt>Future.isDone()</tt> is <tt>true</tt> for each
     * element of the returned list.  Upon return, tasks that have not completed
     * are cancelled.  Note that a <i>completed</i> task could have terminated
     * either normally or by throwing an exception.  The results of this method
     * are undefined if the given collection is modified while this operation is
     * in progress.  This is entirely analogous to
     * <tt>ExecutorService.invokeAll()</tt> except for a couple of important
     * differences.  First, it cancels but does not <b>interrupt</b> any 
     * unfinished tasks, unlike <tt>ExecutorService.invokeAll()</tt> which
     * cancels and interrupts unfinished tasks.  This results in a better 
     * adherence to the specified timeout value, as interrupting threads may
     * have unexpected delays depending on the nature of the tasks.  Also, all 
     * eBay-specific features apply when the tasks are submitted with this 
     * method.
     * 
     * @param tasks the collection of tasks
     * @param timeout the maximum time to wait
     * @param unit the time unit of the timeout argument
     * @return a list of futures representing the tasks, in the same sequential
     * order as produced by the iterator for the given task list.  If the 
     * operation did not time out, each task will have completed.  If it did
     * time out, some of these tasks will not have completed.
     * @throws InterruptedException if interrupted while waiting, in which case
     * unfinished tasks are cancelled
     */
    public <V> List<LoggingFuture<V>> executeAll(Collection<? extends CallableTask<V>> tasks, 
                                                 Options options, 
                                                 long timeout, TimeUnit unit)
            throws InterruptedException {
        return executeAll(tasks, options, timeout, unit, false);
    } 
```

**更新：-**

一旦我通过增加线程来增加执行基准测试的程序的负载，这个组件就需要时间`20`

`newFixedThreadPool(20)`

但我相信如果我使用这个组件可以正常工作 -

`newSingleThreadExecutor`

我能想到的唯一原因是，可能在上面的代码中，有一个阻塞调用，所以这就是线程被阻塞的原因，这就是为什么它需要时间？

**更新：-**

所以这行应该这样写？-

```
if(futures!=null && futures.size()>0){
                    LoggingFuture<DEResponse> future = futures.get(0);
                    //response = future.get();//replace this with below code-

                    while(!future.isDone()) {
                        Thread.sleep(500);
                    } 

                    response = future.get();
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:09:24.727

如果我正确阅读了您的代码，则存在一个明显的性能问题。这个：

```
public class DEResponseTask  extends BaseNamedTask implements CallableTask<DEResponse> {
    private final ObjectMapper m_mapper = new ObjectMapper(); 
```

每个任务都被调用一次，并且创建`ObjectMapper`实例非常昂贵。

有很多方法可以解决这个问题，但您可能想要：

1.  使 m_mapper 引用静态（仅创建一次）——映射器在配置后可以安全共享，或者
2.  传入共享`ObjectMapper`（共享是安全的）

这样做应该会对 JSON 处理效率产生很大影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T02:23:26.247

除了您使用的是复杂的非标准执行器之外，我没有看到任何应该导致性能下降的东西。我意识到您对于可以使用哪个 Executor 没有任何选择，但出于好奇，我会尝试用 a 替换它，`ThreadPoolExecutor`看看这是否有任何区别，并使用现有的权力提出它如果您发现有重大改进，请您的工作 - 在我的工作中，我们发现另一个部门编写的加密库绝对是垃圾（我们 80-90% 的 CPU 时间花费在他们的代码中）并成功游说他们重写它。

编辑：

```
public class Aggregator implements Runnable {
    private static ConcurrentLinkedQueue<Future<DEResponse>> queue = new ConcurrentLinkedQueue<>();
    private static ArrayList<DEResponse> aggregation = new ArrayList<>();

    public static void offer(Future<DEResponse> future) {
        queue.offer(future);
    }

    public static ArrayList<DEResponse> getAggregation() {
        return aggregation;
    }

    public void run() {
        while(!queue.isEmpty()) { // make sure that all of the futures are added before this loop starts; better still, if you know how many worker threads there are then keep a count of how many futures are in your aggregator and quit this loop when aggregator.size() == [expected number of futures]
            aggregation.add(queue.poll().get());
        }
    }
}

public void getDEAttributes(List<DEKey> keys, List<String> reqAttrNames) {
    try {
        if(url!=null){
            try {
                futures = executor.executeAll(tasks, null, waitTimeout, TimeUnit.MILLISECONDS);
                if(futures!=null && futures.size()>0){
                    Aggregator.offer(futures.get(0));
                }
            }
        }
    }
} 
```

# java - 尝试使用 java 在 oracle 10g 数据库上执行 SQL 查询，但出现 ORA-00911 错误

> ID：16126528
> 
> 赞同：0
> 
> 时间：2013-04-20T23:57:51.630
> 
> 标签：java, oracle, oracle10g, ora-00911

我正在尝试使用 java 在 oracle10g 数据库上执行一个简单的 CREATE TABLE 查询。这就是我正在做的事情：

```
Connection conn = //create connection
//open connection.  No errors/warnings are generated so I assume this succeeds 
Statement statement = conn.createStatement();
ResultSet rs = statement.executeQuery("CREATE TABLE t1 (c1 INTEGER NOT NULL, c2 VARCHAR(100), c3 INTEGER NULL, CONSTRAINT m_pk PRIMARY KEY (c1));");
...
//close connection.  No errors again so I assume it succeeds. 
```

当我直接在命令行上执行命令（复制并粘贴到终端窗口）时，它成功了。当我运行上面的java代码时，这是我得到的错误：

```
java.sql.SQLSyntaxErrorException: ORA-00911: invalid character 
```

我不明白我怎么会有一个无效的字符，因为将它复制并粘贴到终端工作得很好。如果我去掉“;” 在查询结束时，一切都运行没有任何错误，但没有按预期创建表。我已经尝试了上述查询的许多变体，但似乎没有任何效果。只是做“CREATE TABLE t1;” 什么都不做，做“CREATE TABLE t1 (c1 INTEGER);” 也不做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:18:21.953

没关系。我在这里发帖时大吃一惊！在 java 中执行查询时，我不认为将分号放在语句的末尾。我试过不把分号放在最后，它运行没有错误，但我以为我检查了我的数据库，发现没有创建表。我现在已经确认删除分号是有效的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T00:19:48.753

您不需要在末尾添加分号。您可以尝试在没有它的情况下运行该程序吗？

# android - 像导航安卓应用一样滑动菜单

> ID：16126543
> 
> 赞同：1
> 
> 时间：2013-04-20T23:59:27.937
> 
> 标签：android, menu, tabs, swipe

我想要一个类似导航应用程序的滑动菜单。当当前项目移动到边缘时（第二张图片，“快捷方式”移动到右边缘），它会碰到相邻项目（联系人）：

![在此处输入图像描述](https://i.stack.imgur.com/5z7m6.png) ![在此处输入图像描述](https://i.stack.imgur.com/pYHlI.png) ![在此处输入图像描述](https://i.stack.imgur.com/FXT5Y.png)

我只找到了[SwipeyTabs](http://blog.peterkuterna.net/2011/09/viewpager-meets-swipey-tabs.html)，但这并不是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T00:17:55.223

你需要 Android-ViewPagerIndicator

[https://github.com/JakeWharton/Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)

尝试示例应用程序

[https://play.google.com/store/apps/details?id=com.viewpagerindicator.sample](https://play.google.com/store/apps/details?id=com.viewpagerindicator.sample)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T00:19:27.963

听起来您想创建一个带有选项卡和视图分页器的[操作栏以进行滑动导航？](http://developer.android.com/guide/topics/ui/actionbar.html)你可以看看这个：[如何在 Android 上实现标签之间的滑动？](https://stackoverflow.com/questions/10134332/how-do-i-implement-swiping-between-tabs-on-android/10134336#10134336)

如果您还希望 Tabs + Swipe 也适用于较低的 Android 版本，您也可以尝试[Action Bar Sherlock](http://actionbarsherlock.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-28T20:35:45.290

我想你也可以通过选择导航类型 - > 可滚动选项卡 + 滑动来做到这一点，同时创建新项目和活动类型，它提供相同的滑动屏幕，但每个页面只有字母 1 2 3，尝试发送您的自定义查看这些片段，显示 1 2 3 并按照您的意愿完成。PS：虽然我不确定这种方法的效率

# ember.js - Ember 数据：观察相关模型

> ID：16126545
> 
> 赞同：2
> 
> 时间：2013-04-20T23:59:33.067
> 
> 标签：ember.js, ember-data

基于此 railscast，我一直致力于使用 rails 和 ember 实现标记：[http: //railscasts.com/episodes/382-tagging](http://railscasts.com/episodes/382-tagging)

我已经设置了一个带有`tagList`属性的 ember-data 模型，我想在每次标签更改时设置它（使用以下`setTagList`方法）：

```
App.Post = DS.Model.extend({
  tags: DS.hasMany('App.Tag'),
  tagList: DS.attr('string'),

  setTagList: function() {
    if(this.get('tags.length')) {
      var tagList = this.get('tags').map(function(tag) {
        return tag.get('name');
      }).join(', ');
      this.set('tagList', tagList);
    }
  }.observes('isLoaded', 'tags', 'tags.@each.name')
}); 
```

我遇到的第一个错误是：

```
Uncaught TypeError: Cannot call method 'send' of null 
```

我相信这是观察`tags`和的结果`tags.@each.name`。我还读到[观察嵌套属性可能存在问题](https://github.com/emberjs/ember.js/issues/541)。

其次，通过删除这些依赖项 leave `.observes('isLoaded')`，会引发以下错误：

```
Uncaught Error: Attempted to handle event `materializingData` on <App.Post:ember283:1> while in state rootState. Called with undefined 
```

这是由对`this.get('tags')`.

见 JSBin：http: [//jsbin.com/iyoyax/7/edit](http://jsbin.com/iyoyax/7/edit)

谁能建议我如何观察关联模型以在同一模型上设置另一个属性？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T23:18:51.003

我不确定为什么您的案例没有特别有效，但我愿意打赌使用`ember-data-latest`with`ember rc2`与它有关。

你的代码看起来不错。这是一个正在工作的小提琴：http: [//jsfiddle.net/DBtu6/5/](http://jsfiddle.net/DBtu6/5/)

我所做的唯一更改是将 rc6 与 ember-data-latest 一起使用，并将您的`map`函数更改为`mapProperty`.

我还使用了 JSFiddle 而不是 JSBin，因为 JSBin 因为我不知道如何使用后者的控制台，而我只是更熟悉 fiddle。希望这可以帮助。

# svn - 颠覆 svn 管理员？

> ID：16126552
> 
> 赞同：0
> 
> 时间：2013-04-21T00:01:25.403
> 
> 标签：svn

我是 Java 初学者，我需要设置 subversion，我正在遵循本指南 [https://netbeans.org/kb/docs/ide/subversion.html](https://netbeans.org/kb/docs/ide/subversion.html)

问题是，一旦我安装了所有东西，然后转到命令行并输入 svnadmin

我得到错误：

'svnadmin' 不是内部或外部命令、可运行程序或批处理文件。

所以我想知道 svnadmin 可执行文件在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:51:03.847

您需要将 Subversion 目录添加到您的`PATH`语句中。（我猜你正在使用 Windows，因为错误消息，尤其是`batch file`部分。）

右键单击菜单，选择`Computer`，然后选择。当对话框打开时，单击底部的按钮。在 中，如果存在则编辑现有的，如果不存在则添加一个，然后将完整位置添加到您的文件夹中。（我不能告诉你那个文件夹的位置是什么，因为我不知道你安装了什么 SVN 或者你安装它的位置。）`Start``Properties``Advanced System Settings``System Settings``Environment Variables``User variables for <your user name>``PATH``SVN`

# c++ - C++ fscanf 逗号文本文件信息字符串和数字

> ID：16126553
> 
> 赞同：-1
> 
> 时间：2013-04-21T00:01:30.383
> 
> 标签：c++, scanf

我正在尝试读取如下所示的 .txt 文件：

```
100054545 
```

为此，我正在使用以下代码：

```
int main() {
    int ra;

    FILE *archivo;

    fopen_s(&archivo,"people.txt", "r");

    if (NULL==archivo){ printf("Error"); }
    else {
        fscanf_s(archivo,"%i);
    }

    cout<<"Code1: " <<rb<<endl;

    fclose(archivo);
    system("pause");
    };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:05:16.107

您对字符串使用了错误的格式。使用 扫描字符串`"%s"`。`c`in`"%c"`代表字符（如单个*字符*），`s`代表字符串。您可能应该学会更好地阅读文档。

# php - JW Player 6 - 根据文件夹中的视频自动创建播放列表

> ID：16126554
> 
> 赞同：1
> 
> 时间：2013-04-21T00:01:35.153
> 
> 标签：php, automation, jwplayer

是）我有的

*   PHP 5.3
*   JW 播放器 6.4

这是给谁的

*   我只是用它来验证视频，而不是为播放列表编写代码。我将所有视频放在一个文件夹中，它们会显示在播放列表中，非常简单。

问题

*   可在此处找到的工作脚本[JW Player 5.10 Auto Folder Script](http://www.longtailvideo.com/support/forums/jw-player/using-playlists/11409/automatic-playlist-script/)适用于 JW Player 5.10，但现在需要 6.0+。我已经延迟了足够长的升级。

代码的第一部分：

```
 <?php
$path ="./webvideos/test/";
$path2="./webvideos/test/";
$folder = opendir($path);
$start="<asx version='3.0'>n<title>Example ASX playlist</title>";
$Fnm = "$path./playlist.xml";
$inF = fopen($Fnm,"w");
fwrite($inF,$start."n");
while( $file = readdir($folder) ) {
     if (($file != '.')&&($file != '..')&&($file != 'index.htm')){
     $result="<entry>n<title>$file</title>n<ref href='$path2$file'/>n<param name='image' value='preview.jpg'/>n</entry>n";
         fwrite($inF,$result);
     }
}
fwrite($inF,"</asx>");
closedir($folder);
fclose($inF);
?> 
```

我已经在“test”文件夹中检查了 XML 文件，它就在那里，所以那里没有问题。

下面的这部分代码允许您下载视频，（右键单击并保存）。这也有效。

```
<?php
$dir = opendir("$path");
while($file = readdir($dir)) {
if(($file == "index.htm") || ($file == ".") || ($file == "..")){} else {
echo
"<a title='".$file."' href='".$path.$file."'>".$file."</a><br/>";
}
}
closedir($dir);
?> 
```

下面的代码是针对自己的播放器的。

```
<div class="video" id="player"></div><!--/video-->
<script>
    jwplayer("player").setup({
    height: 550,
    listbar: {
    position: 'bottom',
    size: 200
    },
    width: 768,
    playlist:'playlistfile=playlist.xml&image=preview.jpg&playlist=bottom',             

});
</script> 
```

在这里我不确定，我尝试了各种不同的可能性，但没有解决方案。即无法加载播放列表是我得到的常见错误，一旦我无法加载 RSS 提要。我不是 PHP 专家，但它似乎是播放器部分，因为我已经测试了 XML 读取并且我也能够下载视频。我已经发送了一封支持电子邮件，但仍在等待，无论哪种方式，我发现这对我来说是一个无价的工具，我相信它会帮助视频制作中的其他人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:34:30.973

在我看来，正在生成的播放列表是一个 ASX 播放列表。JW6 仅支持 mRSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T23:38:36.293

工作脚本：

```
<?php
$path ="videos/test/";
$xmlfile = "$path/playlist.rss";
$path2="http://".$_SERVER['SERVER_NAME'].dirname($_SERVER["PHP_SELF"])."$path";
$folder = scandir($path);
$files = array();
foreach($folder as $file){
    if($file == '.' OR $file == '..' OR $file == 'index.htm'){}else{
        $files[$file] = filemtime($path.'/'.$file);     
    }
}
ksort($files);
//use asort to sort from old to new
$output="<rss version='2.0' xmlns:jwplayer='http://rss.jwpcdn.com/'><channel>";
foreach($files as $file => $date){
$output .= "" . PHP_EOL . 
"<item>" . PHP_EOL . "<title>$file</title>" . PHP_EOL . "<description>$file</description>" . PHP_EOL . "<jwplayer:image>./preview.jpg</jwplayer:image>" . PHP_EOL . "<jwplayer:source file='$path/$file' />" . PHP_EOL . "</item>" . PHP_EOL . "" . PHP_EOL;
}
$output .= "</channel>
</rss>";
file_put_contents($xmlfile,$output);
?> 
```

# sql - 使用内部联接的消息 4104 - SQL SERVER 2012

> ID：16126557
> 
> 赞同：0
> 
> 时间：2013-04-21T00:02:42.093
> 
> 标签：sql, tsql, sql-server-2012-express

我有这些表：

我正在尝试通过使用连接表来获取`article_id, article_name, article_title, article_description`和`article_date`获取。`articles``username``users``user_articles`

我试过这段代码：

```
SELECT E.article_id, E.article_title, E.article_description, E.article_date, u.username
FROM articles AS E, users as u
INNER JOIN user_articles as A ON A.article_id = E.article_id
INNER JOIN users as u2 ON u2.user_id = A.user_id
WHERE E.article_status = 1 
```

我收到此错误消息：

```
Msg 4104, Level 16, State 1, Line 3
The multi-part identifier "E.article_id" could not be bound. 
```

![在此处输入图像描述](https://i.stack.imgur.com/H2fWJ.png)

我正在使用 SQL Server 2012 Express。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T00:06:01.163

您不能从一个表中选择并在另一个表上应用联接。试试这个查询：

```
SELECT E.article_id, E.article_title, E.article_description, E.article_date, u.username
FROM articles AS E
    INNER JOIN user_articles as A ON A.article_id = E.article_id
    INNER JOIN users as u ON u.user_id = A.user_id
WHERE E.article_status = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T00:06:48.970

问题是你混合了 JOIN 类型，你有逗号分隔的隐式 JOIN，然后是显式 JOIN。您的代码应该是：

```
SELECT E.article_id, 
  E.article_title, 
  E.article_description, 
  E.article_date, 
  u.username
FROM articles AS E
INNER JOIN user_articles as A 
  ON A.article_id = E.article_id
INNER JOIN users as u
  ON A.user_id = u.user_id
WHERE E.article_status = 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T00:42:27.263

我在想为什么你甚至需要这样的表格：users_articles？将名为 (article_author) 的列添加到使用用户 ID 填充的文章表中不是更有效吗？然后你可以内部加入那个值。只是说

# ruby-on-rails - 从另一个模型调用 Rails 模型

> ID：16126558
> 
> 赞同：2
> 
> 时间：2013-04-21T00:02:46.283
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, factory-bot

从另一个模型调用 Rails 模型是否被认为是最佳实践？（下面的代码）：

```
#models/user.rb
def get_pending_requests(user_id)
  Friend.where("friend_id = ? AND approved = ?", user_id, false)
end 
```

我发现执行 RSpec/FactoryGirl 测试这样做有点尴尬，而不是在 Controller 中执行这些操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T00:14:55.413

我可以建议一种不同的方法吗？假设您的模型设置如下：

```
class Friend < ActiveRecord::Base
  belongs_to :user

  scope :pending, -> { where(approved: false) }
end

class User < ActiveRecord::Base
  has_many :friends

  def pending_requests
    friends.pending
  end
end 
```

因此，您创建了一个名为pending onfriend 的范围。然后你可以在你的朋友关系上使用这个范围。我发现这是一种更标准的方法。

# java - 如何使用比较器接口

> ID：16126563
> 
> 赞同：13
> 
> 时间：2013-04-21T00:03:41.467
> 
> 标签：java, interface, sorting, comparator

我是 java 新手，我并没有真正了解如何使用比较器接口。我有一`ArrayList`堂课和一`Item`堂课。在课堂上我写道：`Inventory``Item``Item`

```
public class Item implements Comparator<Item> {
    //stuff
    ...
    @Override
    public int compare(Item a, Item b) {
        if (a.getID().compareToIgnoreCase(b.getID())>0)
            return 1;
        else if (a.getID().compareToIgnoreCase(b.getID())<0)
            return -1;
        else
            return 0;
    }
} 
```

getID() 方法只给出了 id，我必须用它来按字母顺序排列项目。我不确定这是否正确，它让我放了`@Override`注释，我不知道为什么。我还写了一个界面，上面写着：

```
 public interface Comparator<Item>
{
    int compare(Item a, Item b);
} 
```

我不确定那一点。另外，如何实现此方法来对库存类中创建的数组列表进行排序？

谢谢，如果我的问题没有意义或需要澄清，请告诉我。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-21T00:19:33.180

**编辑：**首先，有几件事：

1.  `@Override`注释不应该是强制性的。如果 Eclipse 想让您戴上它，请不要担心。
2.  ***不要编写自己的 Comparator 接口。删除该定义 NAO 并使用 Java 提供的定义。***重新发明轮子可能以大约 15 种不同的方式违反了计算机编程的潜规则。`import java.util.Comparator;`在代码的最顶部（在这些使用`public class`a) 使用 Java 提供的版本和 b) 使您的代码与世界上几乎所有其他存在的东西兼容。

* * *

Comparator 接口不用于创建可以将自身排序的类。这是 Comparable 接口。

两者都是相似的，所以我将在这里描述两者。

# java.util.Comparator

如您所知，Comparator 接口有一种方法：`compare`. Comparator 是通用的（使用尖括号`<>`）并采用它将在`<>`. 问题是 Comparator 用于比较*其他类*的项目。例如，我可以创建一个比较器，`java.lang.Integers`它返回与“自然顺序”相反的结果（整数通常是如何排序的）。

比较器主要用于在其他对象不按自然顺序时为其他对象提供一种对其参数进行排序的方法。例如，[`java.util.TreeSet`该类](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)使用 Comparator 来实现其排序功能。

# java.lang.Comparable

Comparable 的目的是说一个对象可以进行比较。它也是通用的，并采用可以与之比较的类型。例如，`Comparable<String>`可以将 a 与字符串进行比较。

Comparable 有一种方法：`compareTo()`. 与 Comparator 不同`compare()`，`compareTo`它采用一个参数。它的工作方式类似于`compare`，除了它使用调用对象作为一个参数。所以，`comparableA.compareTo(comparableB)`是一样的`comparator.compare(comparableA, comparableB)`。

Comparable 主要建立对象的自然顺序，是比较对象的默认方式。比较器的作用是在对数据比较或排序有不同需求时覆盖这种自然顺序。

# 数组列表排序

要对 a 进行排序`List`，您可以使用已经可用的方法：向下滚动`sort`到[`java.util.Collections`class](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html)。一种方法需要一个比较器，另一种不需要。`sort`是静态的；使用`Collections.sort(...)`，不是`Collections c = new Collections(); c.sort(...)`。（`Collections`反正甚至没有构造函数，所以*嗯*。）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-21T00:23:58.777

要使用[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)接口，您必须实现它并将其作为匿名类传递给[Collections.sort(List list, Comparator c)](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)作为第二个参数。

如果您只想将列表传递给[Collections.sort(List list)](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)那么您的`Item`类必须实现[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)接口。

因此，在这两种情况下，`Collections.sort`方法都知道如何对列表中的元素进行排序

这是一些示例代码：

项目类实施`Comparable`+ 库存持有项目清单

```
public class Item implements Comparable<Item> {

    String id = null;

    public Item(String id) {
        this.id = id;
    }

    @Override
    public String toString() {
        return id;
    }

    @Override
    public int compareTo(Item o) {
        return - id.compareToIgnoreCase(o.id);
    }
}

public class Inventory {

    List<Item> items = new ArrayList<>();

    public void addItem(Item item) {
        items.add(item);
    }

    public static void main(String[] args) {
        Inventory inventory = new Inventory();
        inventory.addItem(new Item("2"));
        inventory.addItem(new Item("4"));
        inventory.addItem(new Item("1"));
        inventory.addItem(new Item("7"));

        Collections.sort(inventory.items, new Comparator<Item>() {
            @Override
            public int compare(Item o1, Item o2) {
                return o1.id.compareToIgnoreCase(o2.id);
            }
        });
        System.out.println(inventory.items);

        Collections.sort(inventory.items);
        System.out.println(inventory.items);

    }
} 
```

**输出**

```
[1, 2, 4, 7] // ascending
[7, 4, 2, 1] // descending since the compareTo method inverts the sign of the comparison result. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-21T00:13:33.883

您正在混淆接口`Comparator`和`Comparable`.

比较器： http: [//docs.oracle.com/javase/6/docs/api/java/util/Comparator.html](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)

可比：[http ://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)

Comparator 的目的是一个可以传递给需要排序的操作的类（当场匿名声明或以其他方式声明），它定义了将在项目上使用的排序。**比较器将在需要排序的类之外使用，如果有另一种方法要对其进行排序。**

Comparable 的目的是说（实现 Comparable 的）类具有自然顺序 - 这就是它的本质。**如果您需要排序的类具有自然排序，则将其定义为 Comparable。**（实现 Comparable 排序顺序的类仍然可以被 Comparator 覆盖。另一方面，如果该类不是 Comparable ，则还必须传递 Comparator 才能进行排序。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T00:19:36.717

使用*@Override*注释是 eclipse、netbeans 等编辑器的标准做法，用于通知开发人员他正在覆盖/实现父类/接口方法。它是可选的。

不要在您的 Item 类中实现此接口。创建一个*新*类并实现`Comparator`接口。

```
public class ItemCompare implements Comparator<Item> {

    @Override
    public int compare(Item a, Item b) {
        if (a.getID().compareToIgnoreCase(b.getID())>0)
            return 1;
        else if (a.getID().compareToIgnoreCase(b.getID())<0)
            return -1;
        return 0;
    }
} 
```

然后，在您的主要课程中，执行以下操作：

```
ArrayList al = new ArrayList<Item>

Collections.sort(al, new ItemCompare()) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T00:11:57.760

你实现了错误的接口，你想要[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)

# jquery - $(document).width() 没有在浏览器调整大小时更新？

> ID：16126568
> 
> 赞同：0
> 
> 时间：2013-04-21T00:04:34.173
> 
> 标签：jquery, resize, document

我发现当我调整窗口（各种浏览器）的大小时，$(document).width() 经常不会更新。这是一个已知问题，还是正在发生一些奇怪的事情？如果这是一个已知问题，解决方法是什么？

编辑：突然之间（就像变魔术一样）完全相同的页面的文档宽度正在更新，但它是不一致的。例如，我使页面变宽，并且警报告诉我宽度说它变小了。（这发生在 Firefox 中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:07:03.907

试试看`$(window).width()`，因为这就是你要找的。

您可以看到差异，例如。通过查看官方[jQuery 的`.width()`文档](http://api.jquery.com/width/)：

```
$(window).width();   // returns width of browser viewport
$(document).width(); // returns width of HTML document 
```

# java - 播放框架——测试 POST 控制器方法

> ID：16126569
> 
> 赞同：6
> 
> 时间：2013-04-21T00:04:40.950
> 
> 标签：java, unit-testing, playframework-2.1

我想在我的控制器中测试我的一种 POST 方法，所以我写了这样的东西：

```
@Test
    public void shouldSaveNewCollectionToDatabase(){
        String body = "{\"name\":\"collectionName\", \"owner\": {}}";
        JsonNode json = Json.parse(body);
        FakeRequest request = new FakeRequest(POST, "/rest/collections/add").withJsonBody(json);

        Result result = callAction(controllers.routes.ref.SetsAndCollections.postCollection(), request);
        verify(questionSetCollectionDAO).save(any(QuestionSetCollection.class));
    } 
```

问题是，这个测试失败了，因为控制器方法根本没有被调用，所以我的`questionSetCollectionDAO`方法没有被调用。

我事件在方法的顶部放置了一些打印：

```
@BodyParser.Of(Json.class)
@play.db.jpa.Transactional
public static Result postCollection(){
    System.out.println("I am here");
... 
```

而且我在控制台上看不到任何输出。

如果这不是我可以使用虚假请求调用控制器方法的方式，我该怎么做？

我读过，`fakeApplication`但我还有其他方法可以对`POST`控制器方法进行一些简单的测试吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-13T16:23:47.963

为了测试你的休息服务，首先你应该启动一个假的应用程序。

```
FakeApplication fakeApplication=fakeApplication();
start(fakeApplication); 
```

在你的测试结束时，建议停止它

```
 stop(fakeApplication); 
```

如果您有许多测试方法，您可以在测试类中添加这些方法以促进测试过程。

```
FakeApplication fakeApplication = fakeApplication();

@Before
public void beforeTest() {
    start(fakeApplication);
}

@After
public void afterTest() {
    stop(fakeApplication);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T22:15:01.843

你能打印出结果的http状态码吗？如果它是 303 重定向 - 听起来像是（因为控制器没有被调用），很可能您需要提供一个登录播放会话 cookie 来执行 POST 方法。

请参阅有关如何在 Play 2 中获取身份验证 cookie 的答案： [https ://stackoverflow.com/a/13953375/286550](https://stackoverflow.com/a/13953375/286550)

# r - 使用 quantmod 设置打开和关闭时间

> ID：16126570
> 
> 赞同：2
> 
> 时间：2013-04-21T00:05:00.687
> 
> 标签：r, quantmod

我在 R 研究期货合约。期货市场在美国东部标准时间下午 6 点开盘，第二天下午 5 点结束。我正在处理小时级别的数据。当我使用 quantmod 时，它假设开盘时间是上午 12:00，收盘时间是晚上 11:59。有没有办法改变打开和关闭时间或者有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:38:26.740

这里通常的技巧是设置一个时区，以便午夜匹配一天结束。EST 的问题在于夏令时/冬令时切换，但由于您的市场是 23 小时，而不是 24 小时，您不需要处理它（与外汇市场相反）。

如果您尝试一次处理一天的数据，在 R 中，我使用下面的示例代码。它是`rollapply.right`. 我的脚本 和`data`位于 UTC 时区。（`data`可能是刻度数据、每小时数据或任何介于两者之间的数据）。

基本思想是获取数据的副本，将该副本移动到不同的时区，`endpoints`在其上运行，然后使用`endpoints`原始数据的结果。'7*3600' 调整将下午 5 点前移至午夜。

```
rollapply_chunks.FX.xts=function(data,width,FUN,...,on="days",k=1){
data <- try.xts(data)

x2 <- data
index(x2) <- index(x2)+(7*3600)
indexTZ(x2) <- 'America/New_York'

ep <- endpoints(x2,on=on,k=k)    #The end point of each calendar day (when on="days").
    #Each entry points to the final bar of the day. ep[1]==0.

if(length(ep)<2){
    stop("Cannot divide data up")
}else if(length(ep)==2){  #Can only fit one chunk in.
    sp <- 1;ep <- ep[-1]
}else{
    sp <- ep[1:(length(ep)-width)]+1
    ep <- ep[(width+1):length(ep)]
}

xx <- lapply(1:length(ep), function(ix) FUN(.subset_xts(data,sp[ix]:ep[ix]),...) )
xx <- do.call(rbind,xx)   #Join them up as one big matrix/data.frame.

tt <- index(data)[ep]  #Implicit align="right". Use sp for align="left"
res <- xts(xx, tt)
return (res)
} 
```

# css - CSS - 更改 html 中特定区域的样式

> ID：16126571
> 
> 赞同：0
> 
> 时间：2013-04-21T00:05:02.077
> 
> 标签：css

我是 CSS 新手。如何更改 html 标签中的特定区域？我不想更改所有`<li>`元素。我只是想改变`<li> item1_content2 </li>`。

这是你在**css**中的做法吗？

```
.content2 li {
   /* some properties*/
} 
```

* * *

```
<div class="content1">
<ul>
   <li>item1_content1</li>
</ul>
</div>

<div class="content2">
<ul>
   <li>item1_content2</li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:08:35.950

在你的例子中是的，这就是方式。通常，您可以做很多事情，例如分配 id 或类，使用子选择器或伪选择器。由你决定！

# php - MySQL：内存分配问题

> ID：16126575
> 
> 赞同：0
> 
> 时间：2013-04-21T00:05:25.990
> 
> 标签：php, mysql, excel, symfony, wamp

我在我的计算机上使用 WAMP，当我运行从 Excel 文件导入数据的算法时，它需要的时间太长了。首先，它给我一个错误，即内存不足。然后，我扩展了`memory_limit`参数 on `php.ini`。但话说回来，这一次，它运行了很长时间，然后它只是显示著名的“无法显示页面”（连接中止）。

此外，该算法只需要导入 5 行。但它有点长。它根据从 Excel 文件中获取的值创建对象，并且 stuf..

所以你怎么看 ？

注意：我正在使用 Symfony2、Doctrine2 和 PHPExcel 库来帮助处理类似 Excel 的文件。

**编辑（这里是代码）：**

```
<?php

public function bachelierAction(){

        $inputFileType = 'Excel2007';
        $inputFileName = 'Excel_Files/Bacheliers/Bacheliers12.xlsx';

        /**  Create a new Reader of the type defined in $inputFileType  **/
        $objReader = \PHPExcel_IOFactory::createReader($inputFileType);
        $objReader->setReadDataOnly(true);
        /**  Define how many rows we want to read for each "chunk"  **/
        $chunkSize = 1;
        /**  Create a new Instance of our Read Filter  **/
        $chunkFilter = new chunkReadFilter();

        /**  Tell the Reader that we want to use the Read Filter  **/
        $objReader->setReadFilter($chunkFilter);
        $objPHPExcel = $objReader->load($inputFileName);

        // The Entity Manager :
        $em = $this->getDoctrine()->getManager();

        $anneObj = new Annee();
        $anneObj->setAnnee(2012);

        for ($startRow = 2; $startRow <= 6 ; $startRow += $chunkSize) {
            /*  Tell the Read Filter which rows we want this iteration  */
            $chunkFilter->setRows($startRow,$chunkSize);
            /**  Load only the rows that match our filter  **/
            $objPHPExcel = $objReader->load($inputFileName);
            $sheet = $objPHPExcel->getSheet(0);

            // Extraire les données du bachelier :
            $cne = $sheet->getCellByColumnAndRow(1,$startRow)->getValue();
            $nom = $sheet->getCellByColumnAndRow(2,$startRow)->getValue();
            $prenom = $sheet->getCellByColumnAndRow(3,$startRow)->getValue();
            $sexe = $sheet->getCellByColumnAndRow(5,$startRow)->getValue();;
            $dateNaissance = $sheet->getCellByColumnAndRow(6,$startRow)->getValue();

            // Création du bachelier
            $bachelier = new Bachelier();
            $bachelier->setCne($cne)
                      ->setDateNaissance($dateNaissance)
                      ->setNom($nom)
                      ->setPrenom($prenom)
                      ->setSexe($sexe);

            $em->persist($bachelier);

            // Extraire les données du bac :
            $moyenneBac = $sheet->getCellByColumnAndRow(10,$startRow)->getValue();
            $typeBac = $sheet->getCellByColumnAndRow(8,$startRow)->getValue();
            $sessionBac = $sheet->getCellByColumnAndRow(13,$startRow)->getValue();
            $mentionBac = $sheet->getCellByColumnAndRow(11,$startRow)->getValue();
            $etabBac = $sheet->getCellByColumnAndRow(14,$startRow)->getValue();

            $typeBacObj = $em->getRepository('PFASIGBundle:TypeBac')->find($typeBac);
            $sessionBacObj = $em->getRepository('PFASIGBundle:SessionBac')->find($sessionBac);
            $mentionBacObj = $em->getRepository('PFASIGBundle:MentionBac')->find($mentionBac);
            $etabBacObj = $em->getRepository('PFASIGBundle:EtablissementBac')->find($etabBac);

            // Création de l'établissement du Bac
            if($etabBacObj == null ){
                // Type de l'établissement du Bac
                $typeEtabBac = $sheet->getCellByColumnAndRow(16,$startRow)->getValue();
                $typeEtabBacObj = $em->getRepository('PFASIGBundle:TypeEtablissementBac')->find($typeEtabBac);

                // La délégation de l'établissement du Bac
                $delegBac = $sheet->getCellByColumnAndRow(19,$startRow)->getValue();
                $delegBacObj = $em->getRepository('PFASIGBundle:Delegation')->find($delegBac);

                $etabBacObj = new EtablissementBac();
                $etabBacLibelle = $sheet->getCellByColumnAndRow(15,$startRow)->getValue();

                $etabBacObj->setCodeLieu($etabBac)
                           ->setNomLieu($etabBacLibelle)
                           ->setDelegation($delegBac)
                           ->setTypeEtabBac($typeEtabBac);

                $em->persist($etabBacObj);

            }

            // Création du bac
            $bac = new Bac();
            $bac->setAnneeBac($anneObj)
                ->setBachelier($bachelier)
                ->setEtabBac($etabBacObj)
                ->setMentionBac($mentionBacObj)
                ->setMoyenne($moyenneBac)
                ->setSessionBac($sessionBac)
                ->setTypeBac($typeBacObj);

            $em->persist($bac);

        }

        $msg = "Les " + $startRow + " bacheliers ont été importés avec succès.";

        try{
            $em->flush();

        }catch(\Doctrine\DBAL\DBALException $e){
            $msg = "Les données n'ont pas pu être importées ! Une erreur est survenue !";

        }

        return $this->render('PFASIGBundle:Carte:bachelier.html.twig',array('msg' => $msg));

    } 
```

**编辑 2：** 在应用 Mark 的建议后，这是用于测试的代码：

```
public function bachelierAction(){

        $inputFileType = 'Excel2007';
        $inputFileName = 'Excel_Files/Bacheliers/Bacheliers12.xlsx';

        // Cell caching ::
        $cacheMethod = \PHPExcel_CachedObjectStorageFactory::cache_to_apc;
        $cacheSettings = array( 'cacheTime' => 600);
        \PHPExcel_Settings::setCacheStorageMethod($cacheMethod, $cacheSettings);

        /**  Create a new Reader of the type defined in $inputFileType  **/
        $objReader = \PHPExcel_IOFactory::createReader($inputFileType);
        $objReader->setReadDataOnly(true);
        /**  Define how many rows we want to read for each "chunk"  **/
        $chunkSize = 1;
        /**  Create a new Instance of our Read Filter  **/
        $chunkFilter = new chunkReadFilter();

        /**  Tell the Reader that we want to use the Read Filter  **/
        $objReader->setReadFilter($chunkFilter);
        $objPHPExcel = $objReader->load($inputFileName);

        // The Entity Manager :
        $em = $this->getDoctrine()->getManager();

        $anneObj = new Annee();
        $anneObj->setAnnee(2012);

        for ($startRow = 2; $startRow <= 6 ; $startRow += $chunkSize) {
            /*  Tell the Read Filter which rows we want this iteration  */
            $chunkFilter->setRows($startRow,$chunkSize);
            /**  Load only the rows that match our filter  **/
            $objPHPExcel = $objReader->load($inputFileName);
            $sheet = $objPHPExcel->getSheet(0);

            // Extraire les données du bachelier :
            list( ,$cne,$nom,$prenom, ,$sexe,$dateNaissance) = $sheet->rangeToArray('A'.$startRow.':F'.$startRow);
        }

        return $this->render('PFASIGBundle:Carte:bachelier.html.twig',array('msg' => $cne));

    } 
```

不幸的是，我仍然得到错误： `FatalErrorException: Error: Allowed memory size of 157286400 bytes exhausted (tried to allocate 111967106 bytes) in C:\wamp\www\symf_PFA_v1\vendor\codeplex\phpexcel\PHPExcel\Reader\Excel2007.php line 428`

作为记录，在我的 php.ini 中，我得到了：

`memory_limit=150M` `apc.shm_size=180M`

**编辑 3 :** : 这是当前代码（增强）

```
public function bachelierAction(){

        $inputFileType = 'Excel2007';
        $inputFileName = 'myfile.xlsx';

        // Cell caching ::
        $cacheMethod = \PHPExcel_CachedObjectStorageFactory::cache_to_apc;
        $cacheSettings = array( 'cacheTime' => 600);
        \PHPExcel_Settings::setCacheStorageMethod($cacheMethod, $cacheSettings);

        /**  Create a new Reader of the type defined in $inputFileType  **/
        $objReader = \PHPExcel_IOFactory::createReader($inputFileType);
        $objReader->setReadDataOnly(true);
        /**  Define how many rows we want to read for each "chunk"  **/
        $chunkSize = 10;
        /**  Create a new Instance of our Read Filter  **/
        $chunkFilter = new chunkReadFilter();

        /**  Tell the Reader that we want to use the Read Filter  **/
        $objReader->setReadFilter($chunkFilter);
        $objPHPExcel = $objReader->load($inputFileName);

        $sheet = $objPHPExcel->setActiveSheetIndex(0);

for ($startRow = 2; $startRow <= 6 ; $startRow += $chunkSize) {
            /*  Tell the Read Filter which rows we want this iteration  */
            $chunkFilter->setRows($startRow,$chunkSize);
            /**  Load only the rows that match our filter  **/
            $objPHPExcel = $objReader->load($inputFileName);
            $sheet = $objPHPExcel->setActiveSheetIndex(0);

            $result = $sheet->rangeToArray('A'.$startRow.':G'.$startRow);
            list( ,$cne,$nom,$prenom, ,$sexe,$dateNaissance) = $result[0];

            // some process
            $result = $sheet->rangeToArray('I'.$startRow.':O'.$startRow);
            list($typeBac,,$moyenneBac,$mentionBac,,$sessionBac,$etabBac) = $result[0]; 

            // some process

        }
                // render the Twig template
} 
```

类**chunkReadFilter**：

```
namespace Me\MyBundle\Entity;

/**  Define a Read Filter class 
 * implementing PHPExcel_Reader_IReadFilter  */

class chunkReadFilter implements \PHPExcel_Reader_IReadFilter 
{ 
    private $_startRow = 0; 
    private $_endRow   = 0; 

    /**  Set the list of rows that we want to read  */ 
    public function setRows($startRow, $chunkSize) { 
        $this->_startRow = $startRow; 
        $this->_endRow   = $startRow + $chunkSize; 
    } 

    public function readCell($column, $row, $worksheetName = '') { 
        //  Only read the heading row, and the configured rows 
        if (($row == 1) ||
            ($row >= $this->_startRow && $row < $this->_endRow)) { 
            return true; 
        } 
        return false; 
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:46:51.450

**观察#1**

利用 PHPExcel 的 rangeToArray() 方法，而不是使用 getCellByColumnAndRow() 单独读取每个单元格。

例如

```
list ($cne, $nom, $prenom, , $sexe, $dateNaissance) = 
    $sheet->rangeToArray('A'.$startRow.':F'.$startRow); 
```

**观察#2**

使用单元缓存而不是通过读取过滤器进行分块，这样您就不会不断地为每个块重新读取整个文件，但仍然可以节省内存

**观察#3**

或者，一次使用比 1 行稍大的块大小。如果你有 100 行，那么你需要重读整个文件 100 次；将块大小设置为 10，您只需重读 10 次；将其设置为内存允许的最高值。

**观察#4**

将观察#1、#2 和#3 与一些实验结合起来，看看哪些块大小和缓存方法可以为您提供内存和速度的最佳平衡。

# c++ - C++ 中的向量和多态性

> ID：16126578
> 
> 赞同：12
> 
> 时间：2013-04-21T00:06:02.253
> 
> 标签：c++, oop, vector, polymorphism

我有一个棘手的情况。它的简化形式是这样的

```
class Instruction
{
public:
    virtual void execute() {  }
};

class Add: public Instruction
{
private:
    int a;
    int b;
    int c;
public:
    Add(int x, int y, int z) {a=x;b=y;c=z;}
    void execute() { a = b + c;  }
}; 
```

然后在一节课上，我做了类似的事情......

```
void some_method()
{
    vector<Instruction> v;
    Instruction* i = new Add(1,2,3)
    v.push_back(*i);
} 
```

在另一个班级...

```
void some_other_method()
{
    Instruction ins = v.back();
    ins.execute();
} 
```

他们以某种方式共享这个指令向量。我关心的是我执行“执行”功能的部分。它会起作用吗？它会保留它的 Add 类型吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-21T00:13:53.497

不，不会的。

```
vector<Instruction> ins; 
```

存储值，而不是引用。这意味着无论您如何在其中使用该指令对象，它都会在将来的某个时候被复制。

此外，由于您使用 进行分配`new`，因此上述代码会泄漏该对象。如果你想正确地做到这一点，你必须这样做

```
vector<Instruction*> ins 
```

或者，更好的是：

```
vector< std::reference_wrapper<Instruction> > ins 
```

我喜欢这篇[博文](http://oopscenities.net/2012/08/09/reference_wrapper/)来解释`reference_wrapper`

这种行为称为[对象切片。](http://en.wikipedia.org/wiki/Object_slicing)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-21T00:14:36.630

所以你需要某种指针。A`std::shared_ptr`效果很好：

```
typedef shared_ptr<Instruction> PInstruction;

vector<PInstruction> v;
v.emplace_back(make_shared<Add>());

PInstruction i = v[0]; 
```

请记住，PInstruction 是引用计数的，因此 PInstruction 的复制构造函数将创建对同一对象的新“引用”。

如果要复制引用的对象，则必须实现一个克隆方法：

```
struct Instruction
{

   virtual PInstruction clone() = 0;
   ...
}

struct Add
{
    PInstruction clone() { return make_shared<Add>(*this); }
    ...
}

PInstruction x = ...;
PInstruction y = x->clone(); 
```

如果性能问题超出了您的想象`std::unique_ptr`，则管理起来有点棘手，因为始终需要移动语义，但它避免了一些原子操作的成本。

您还可以使用原始指针并通过某种内存池架构手动管理内存。

潜在的问题是，要拥有多态类型，编译器不知道子类会有多大，所以你不能只拥有基本类型的向量，因为它不会有额外的空间需要子类。出于这个原因，您将需要使用如上所述的传递引用语义。这会将指向对象的指针存储在向量中，然后根据子类的需要将对象存储在不同大小的块中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-21T00:13:51.987

不，那行不通；您正在“切片”`Add`对象，并且仅将其`Instruction`部分插入到数组中。我建议您将基类抽象化（例如通过使`execute`纯虚拟化），以便切片产生编译错误而不是意外行为。

为了获得多态行为，向量需要包含指向基类的指针。

然后，您将需要小心如何管理对象本身，因为它们不再包含在向量中。智能指针可能对此有用；并且由于您可能会动态分配这些对象，因此您还应该为基类提供一个虚拟析构函数，以确保您可以正确删除它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T00:35:41.843

您可能想做几件事，A：将“v”的类型更改为“vector”，B：使用“delete”运算符管理您的内存。要回答你的问题，用这种方法，是的，但是如果你知道“指令”指针指向的东西的类型，你将只能从“指令”访问接口，如果你需要，我建议使用 dynamic_cast从“添加”访问界面。

# dart - 如何用 Dart 格式化日期？

> ID：16126579
> 
> 赞同：269
> 
> 时间：2013-04-21T00:06:11.577
> 
> 标签：dart

我有一个实例，`DateTime`我想将其格式化为字符串。我怎么做？我想把日期变成一个字符串，比如“2013-04-20”。

* * *

## 回答 #1

> 赞同：568
> 
> 时间：2013-04-21T00:06:11.577

您可以使用[`intl`](https://www.dartdocs.org/documentation/intl/latest/intl/DateFormat-class.html)包（[安装程序](https://pub.dev/packages/intl/install)）来格式化日期。

对于`en_US`格式，这很简单：

```
import 'package:intl/intl.dart';

main() {
  final DateTime now = DateTime.now();
  final DateFormat formatter = DateFormat('yyyy-MM-dd');
  final String formatted = formatter.format(now);
  print(formatted); // something like 2013-04-20
} 
```

有许多格式化选项。从文档：

```
ICU Name                   Skeleton
--------                   --------
DAY                          d
ABBR_WEEKDAY                 E
WEEKDAY                      EEEE
ABBR_STANDALONE_MONTH        LLL
STANDALONE_MONTH             LLLL
NUM_MONTH                    M
NUM_MONTH_DAY                Md
NUM_MONTH_WEEKDAY_DAY        MEd
ABBR_MONTH                   MMM
ABBR_MONTH_DAY               MMMd
ABBR_MONTH_WEEKDAY_DAY       MMMEd
MONTH                        MMMM
MONTH_DAY                    MMMMd
MONTH_WEEKDAY_DAY            MMMMEEEEd
ABBR_QUARTER                 QQQ
QUARTER                      QQQQ
YEAR                         y
YEAR_NUM_MONTH               yM
YEAR_NUM_MONTH_DAY           yMd
YEAR_NUM_MONTH_WEEKDAY_DAY   yMEd
YEAR_ABBR_MONTH              yMMM
YEAR_ABBR_MONTH_DAY          yMMMd
YEAR_ABBR_MONTH_WEEKDAY_DAY  yMMMEd
YEAR_MONTH                   yMMMM
YEAR_MONTH_DAY               yMMMMd
YEAR_MONTH_WEEKDAY_DAY       yMMMMEEEEd
YEAR_ABBR_QUARTER            yQQQ
YEAR_QUARTER                 yQQQQ
HOUR24                       H
HOUR24_MINUTE                Hm
HOUR24_MINUTE_SECOND         Hms
HOUR                         j
HOUR_MINUTE                  jm
HOUR_MINUTE_SECOND           jms
HOUR_MINUTE_GENERIC_TZ       jmv
HOUR_MINUTE_TZ               jmz
HOUR_GENERIC_TZ              jv
HOUR_TZ                      jz
MINUTE                       m
MINUTE_SECOND                ms
SECOND                       s 
```

对于非`en_US`日期，您需要在语言环境中显式加载。有关更多信息，请参阅[`DateFormat`文档](https://www.dartdocs.org/documentation/intl/latest/intl/DateFormat-class.html)。包含每个国家/语言的[`date_symbol_data_local.dart`](https://github.com/dart-lang/intl/blob/master/lib/date_symbol_data_local.dart)所有格式，如果您想要更深入的了解。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2014-09-07T00:17:03.050

这也可以：

```
DateTime today = new DateTime.now();
String dateSlug ="${today.year.toString()}-${today.month.toString().padLeft(2,'0')}-${today.day.toString().padLeft(2,'0')}";
print(dateSlug); 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2018-10-17T15:13:51.657

您还可以指定日期格式，如前所述：[https ://pub.dev/documentation/intl/latest/intl/DateFormat-class.html](https://pub.dev/documentation/intl/latest/intl/DateFormat-class.html)

```
import 'package:intl/intl.dart';
String formatDate(DateTime date) => new DateFormat("MMMM d").format(date); 
```

生产：`March 4`

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2019-09-23T07:11:14.860

如果有人想将字符串格式的日期转换为其他字符串格式，请先使用 DateTime.parse("2019-09-30") 然后将其传递给 DateFormat("date pattern").format()

```
dateFormate = DateFormat("dd-MM-yyyy").format(DateTime.parse("2019-09-30")); 
```

**参考：** [Dart - 如何将 yyyy-MM-dd 中的简单日期字符串的格式更改为 dd-MM-yyyy](https://stackoverflow.com/questions/58040606/dart-how-to-change-format-of-simple-date-string-which-is-in-yyyy-mm-dd-to-dd-m#answer-58042809)

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2020-05-31T14:44:36.803

pubspec.yaml：

```
dependencies:
  intl: 
```

主要飞镖：

```
import 'package:intl/intl.dart'; // for date format
import 'package:intl/date_symbol_data_local.dart'; // for other locales

void main() {
  var now = DateTime.now();
  print(DateFormat().format(now)); // This will return date using the default locale
  print(DateFormat('yyyy-MM-dd hh:mm:ss').format(now));
  print(DateFormat.yMMMMd().format(now)); // print long date 
  print(DateFormat.yMd().format(now)); // print short date 
  print(DateFormat.jms().format(now)); // print time 

  initializeDateFormatting('es'); // This will initialize Spanish locale
  print(DateFormat.yMMMMd('es').format(now)); // print long date in Spanish format
  print(DateFormat.yMd('es').format(now)); // print short date in Spanish format
  print(DateFormat.jms('es').format(now)); // print time in Spanish format
} 
```

结果：

```
May 31, 2020 5:41:42 PM
2020-05-31 05:41:42
May 31, 2020
5/31/2020
5:41:42 PM
31 de mayo de 2020
31/5/2020
17:41:42 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2020-09-07T18:50:18.793

如果您不想添加另一个库，也可以使用此方法

```
 DateTime dateTime = DateTime.now();
  String YYYY_MM_DD = dateTime.toIso8601String().split('T').first;
  print(YYYY_MM_DD); //2020-11-23 
```

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2018-06-26T10:36:26.687

这为您提供了社交网络中的日期：[“今天”、“昨天”、“星期几”等。]

```
void main() {
      DateTime now = new DateTime(2018,6,26);
      print(date(now));
    }

    String date(DateTime tm) {
      DateTime today = new DateTime.now();
      Duration oneDay = new Duration(days: 1);
      Duration twoDay = new Duration(days: 2);
      Duration oneWeek = new Duration(days: 7);
      String month;
      switch (tm.month) {
        case 1:
          month = "january";
          break;
        case 2:
          month = "february";
          break;
        case 3:
          month = "march";
          break;
        case 4:
          month = "april";
          break;
        case 5:
          month = "may";
          break;
        case 6:
          month = "june";
          break;
        case 7:
          month = "july";
          break;
        case 8:
          month = "august";
          break;
        case 9:
          month = "september";
          break;
        case 10:
          month = "october";
          break;
        case 11:
          month = "november";
          break;
        case 12:
          month = "december";
          break;
      }

      Duration difference = today.difference(tm);

      if (difference.compareTo(oneDay) < 1) {
        return "today";
      } else if (difference.compareTo(twoDay) < 1) {
        return "yesterday";
      } else if (difference.compareTo(oneWeek) < 1) {
        switch (tm.weekday) {
          case 1:
            return "monday";
          case 2:
            return "tuesday";
          case 3:
            return "wednesday";
          case 4:
            return "thursday";
          case 5:
            return "friday";
          case 6:
            return "saturday";
          case 7:
            return "sunday";
        }
      } else if (tm.year == today.year) {
        return '${tm.day} $month';
      } else {
        return '${tm.day} $month ${tm.year}';
      }
    } 
```

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2021-03-02T04:27:42.413

您可以使用[intl](https://pub.dev/packages/intl)包在颤振中格式化日期。

```
void main() {
  final DateTime now = DateTime.now();
  final DateFormat format = DateFormat('yyyy-MM-dd');
  final String formatted = format.format(now);
  // 2021-03-02
} 
```

或者您可以使用[date_format](https://pub.dev/packages/date_format)包在颤动中格式化日期。

```
import 'package:date_format/date_format.dart';

final formattedStr = formatDate(DateTime.now(), [dd, '-', mm, '-', yyyy]);

//02-03-2021 
```

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2019-03-16T18:50:35.320

有一个包 date_format

```
dependencies:
    date_format: 
```

代码

```
import 'package:date_format/date_format.dart';

final formattedStr = formatDate(
    yourDateTime, [dd, '.', mm, '.', yy, ' ', HH, ':', nn]);

// output example "29.03.19 07:00" 
```

注意：分钟是**nn**

[链接到包](https://pub.dartlang.org/packages/date_format#-readme-tab-)

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2021-03-15T22:06:13.323

另一种方式。

**创建 DateTime 的扩展：**

**date_time_extension.dart**

```
import 'package:intl/date_symbol_data_local.dart';
import 'package:intl/intl.dart';

extension DateTimeExtension on DateTime {
  String format([String pattern = 'dd/MM/yyyy', String? locale]) {
    if (locale != null && locale.isNotEmpty) {
      initializeDateFormatting(locale);
    }
    return DateFormat(pattern, locale).format(this);
  }
} 
```

将此文件导入您要使用 DateTime 类型的位置（您必须手动导入），您可以像这样使用它：

```
DateTime.now().format();

DateTime.now().format('MM/yyyy');

DateTime.now().format('MM/yyyy', 'es'); 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2021-06-02T04:56:05.573

```
/// Get date as a string for display.
String getFormattedDate(String date) {
  /// Convert into local date format.
  var localDate = DateTime.parse(date).toLocal();

  /// inputFormat - format getting from api or other func.
  /// e.g If 2021-05-27 9:34:12.781341 then format must be yyyy-MM-dd HH:mm
  /// If 27/05/2021 9:34:12.781341 then format must be dd/MM/yyyy HH:mm
  var inputFormat = DateFormat('yyyy-MM-dd HH:mm');
  var inputDate = inputFormat.parse(localDate.toString());

  /// outputFormat - convert into format you want to show.
  var outputFormat = DateFormat('dd/MM/yyyy HH:mm');
  var outputDate = outputFormat.format(inputDate);

  return outputDate.toString();
} 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2020-06-29T09:36:03.890

如果您想将多种日期格式合并为一种，我们可以使用`intl`.

```
DateFormat('yMMMd').addPattern(DateFormat.HOUR24_MINUTE).format(yourDateTime)) 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-07-03T07:43:47.020

处理从字符串到日期时间的年度季度，我没有找到合适的解决方案，所以做了这个：

```
 List<String> dateAsList = 'Q1 2001'.split(' ');
    DateTime dateTime = DateTime.now();
    String quarter = dateAsList[0];
    int year = int.parse(dateAsList[1]);
    switch(quarter) {
      case "Q1": dateTime = DateTime(year, 1);
      break;
      case "Q2": dateTime = DateTime(year, 4);
      break;
      case "Q3": dateTime = DateTime(year, 7);
      break;
      case "Q4": dateTime = DateTime(year, 10);
      break;
    } 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2021-10-05T19:31:23.640

**无依赖方法 [将日期显示为格式化字符串]**

如果您想将 DateTime 值显示为日/月/年或您喜欢的任何其他格式，字符串插值会很方便：

```
"${_date.day} / ${_date.month} / ${_date.year}" 
```

样本输出：

> 23 / 4 / 1920

我不想使用任何额外的库，所以我就这样走了。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-11-29T14:44:44.913

```
 String dateConverter(String date) {
    // Input date Format
    final format = DateFormat("dd-MM-yyyy");
    DateTime gettingDate = format.parse(date);
    final DateFormat formatter = DateFormat('yyyy-MM-dd');
    // Output Date Format
    final String formatted = formatter.format(gettingDate);
    return date;
  } 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-10-22T20:26:00.427

```
String formatDate(String date) {
    return date.substring(0, 10).split('-').reversed.join().replaceAll('-', '/');

  } 
```

从格式“yyyy-mm-dd H:i:s”

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-04-17T11:59:15.810

```
import 'package:intl/intl.dart';

main() {
  var formattedDate = new DateTime.Format('yyyy-MM-dd').DateTime.now();
  print(formattedDate); // something like 2020-04-16
} 
```

更多细节可以参考[DateFormat 文档](https://pub.dev/documentation/intl/latest/intl/DateFormat-class.html)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2022-02-14T14:42:25.723

```
 main() {
  final String pattern = 'yyyy-MM-dd';
  final String formatted = DateFormat(pattern).format(DateTime.now());
  print(formatted);
} 
```

更改`yyyy-MM-dd`字符串可以更改日期格式。我用这个模式字符串制作了应用程序。

您可以在我的应用程序中试验格式字符串它是用颤振制作的。 [https://biplobsd.github.io/EpochConverterApp](https://biplobsd.github.io/EpochConverterApp)

[在这里你可以看到我如何编辑图案和这个效果显示在顶部](https://i.stack.imgur.com/ZcBWm.gif)

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2021-06-01T23:16:03.500

更简单的方法：

```
new DateFormat("dd-MM-y").format(YOUR_DATETIME_HERE) 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2021-09-17T09:12:41.910

使用“H:mm”查看完整的分钟数，例如 13:08 而不是 13:8

* * *

## 回答 #21

> 赞同：-2
> 
> 时间：2021-11-11T20:50:58.190

要获得一个包含日期和时间的用户友好型字符串，您可以使用以下命令：

```
import 'package:intl/intl.dart';

main() {
  final DateTime someDateTime = DateTime(2017, 9, 7, 17, 30);
  final DateFormat formatter = DateFormat.yMMMd().add_jms();
  final String formatted = formatter.format(someDateTime);
  print(formatted); // Sep 7, 2017 5:30:00 PM (in the US)
} 
```

# html - 你能制作一个不使用固定宽度右侧边栏包装的流体宽度标题吗？

> ID：16126585
> 
> 赞同：4
> 
> 时间：2013-04-21T00:06:38.493
> 
> 标签：html, css, ellipsis

恐怕它比这更复杂一些。

我需要一个`h2`从不换行的流体宽度标题`.btn1`（`.btn2`

如果这听起来太复杂，那么写一个好的[Fiddle](http://jsfiddle.net/8ZtU5/) ( [http://jsfiddle.net/8ZtU5/](http://jsfiddle.net/8ZtU5/) ) 和一些漂亮的 ASCII 艺术怎么样？

```
__________________________________________________
|                                                |
| This header is really really... [One]    [Two] |
|                                                |
--------------------------------------------------
__________________________________________________
|                                                |
| This header is short [One]               [Two] |
|                                                |
--------------------------------------------------
_________________________________
|                               |
| This header is... [One] [Two] |
|                               |
--------------------------------- 
```

你怎么看？你能帮我吗？

* * *

HTML：（[http://jsfiddle.net/8ZtU5/](http://jsfiddle.net/8ZtU5/)）

*注意：额外的包装只是为了方便。除了呈现的结果外，没有什么是必需的。*

```
<div class="container">
    <div class="fluid-width">
        <div class="no-wrapping">
            <h2>This header is really really really really really really really long</h2>
        </div>
        <button class="btn1">One</button>
    </div>
    <div class="fixed-width">
        <button class="btn2">Two</button>
    </div>
</div>
<div class="container">
    <div class="fluid-width">
        <div class="no-wrapping">
            <h2>This header is short</h2>
        </div>
        <button class="btn1">One</button>
    </div>
    <div class="fixed-width">
        <button class="btn2">Two</button>
    </div>
</div> 
```

基础 CSS：

```
.container {
    margin:20px 0;
    width:100%;
    min-width:300px;
    background:#eee;
}

.fluid-width {
    min-width:200px;
    display:inline-block;
}

.fixed-width {
    width:100px;
    max-width:100px;
    min-width:100px;
    display:inline-block;
}

.no-wrapping {
    overflow: hidden; white-space: nowrap; text-overflow: ellipsis; word-break: break-all; word-wrap: break-word;
}
h2 {
    display:inline;
} 
```

无需猜测......如果你想玩，一切都在小提琴上：http: [//jsfiddle.net/8ZtU5/](http://jsfiddle.net/8ZtU5/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T00:41:00.413

得到这个工作，也许这就是你的意思。[jsfiddle](http://jsfiddle.net/8ZtU5/2/) 编辑`html structure`了一下

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T01:00:34.653

这大致是一个解决方案，您可以通过更改 h2 的最大宽度来改变标题中显示的文本量。

[http://jsfiddle.net/QJg8X/](http://jsfiddle.net/QJg8X/)

**标记**

```
<div class="container">
    <div class="fluid-width">
        <h2>This header is really really really really really really long</h2>
        <button class="btn1">One</button>
        <button class="btn2">Two</button>
    </div>
</div>
<div class="container">
    <div class="fixed-width">
         <h2>This header is short</h2>
        <button class="btn1">One</button>
        <button class="btn2">Two</button>
    </div>
</div> 
```

**css**

```
.container {
    margin:20px 0;
    width:100%;
    min-width:300px;
    background:#eee;
}

.fluid-width {
    display: inline-block;
    overflow: hidden;
    min-width: 200px;
}

.fixed-width {
    display: inline-block;
    overflow: hidden;
    width: 400px;
}

h2 {
    float: left;
    margin: 0;
    padding: 0;
    display: block;
    white-space: nowrap;
    max-width: 80%;
    overflow: hidden;
    text-overflow: ellipsis;
}

button.btn1 { float: left; }
button.btn2 { float: right; } 
```

然而，我只用现代浏览器测试了上述内容。

啊.. 与 AzDesign 的答案非常相似（+1），除了它使用浮动而不是绝对定位的事实。

### 更新

解决相同问题的另一种方法是为您的按钮设置一个固定宽度的区域，这意味着标记略有改变，但意味着您不必指定最大宽度：

[http://jsfiddle.net/QJg8X/2/](http://jsfiddle.net/QJg8X/2/)

**标记**

```
<div class="container">
    <div class="fluid-width">
       <div class="buttons">
            <button class="btn1">One</button>
            <button class="btn2">Two</button>
       </div>
       <h2>This header is really really really really really really long</h2>
    </div>
</div>
<div class="container">
    <div class="fixed-width">
        <div class="buttons">
            <button class="btn1">One</button>
            <button class="btn2">Two</button>
        </div>
        <h2>This header is short</h2>
    </div>
</div> 
```

**css**

```
.container {
    margin:20px 0;
    width:100%;
    min-width:300px;
    background:#eee;
}

.fluid-width {
    display: block;
    overflow: hidden;
    min-width: 200px;
}

.fixed-width {
    display: block;
    overflow: hidden;
    width: 400px;
}

h2 {
    margin: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.buttons {
    display: block;
    width: 150px;
    float: right;
}

button.btn2 { float: right; } 
```

# python - Django 转储数据 django.contrib.auth

> ID：16126586
> 
> 赞同：25
> 
> 时间：2013-04-21T00:06:48.777
> 
> 标签：python, django, manage.py

我想要应用程序的转储数据`django.contrib.auth`。

我试过了：

```
>> python manage.py dumpdata django.contrib.auth > 'django.contrib.admin.json'
Error: Unknown application: django.contrib.auth
>> python manage.py dumpdata 'django.contrib.auth' > 'django.contrib.admin.json'
Error: Unknown application: django.contrib.auth 
```

没有任何效果。需要你的帮助。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-21T02:03:01.730

解决方案比一个想法容易得多。赶紧跑

```
python manage.py dumpdata auth 
```

# javascript - IE 上的画布透明度

> ID：16126588
> 
> 赞同：1
> 
> 时间：2013-04-21T00:06:52.303
> 
> 标签：javascript, html, canvas, transparency, kineticjs

当我在画布上绘制一个矩形或其他形状（使用 kineticJS，创建一个`new Kinetic.Path`），并设置`fill: none`如下：

```
var rect = new Kinetic.Path({
            x: 0,
            y: 0,
            data: 'm 2.0012417,2.0057235 125.7664883,0 0,105.8016465 -125.7664883,0 z',
            fill: 'none',
            stroke: 'black',
            scale: 1
}); 
```

...然后在 Chrome 和 Firefox 中，形状应该是透明的。但是在 IE9 中，形状是黑色的。

参见例如 [http://jsfiddle.net/T8m64/107/](http://jsfiddle.net/T8m64/107/) 查看该示例左上角的黑色矩形——它在 Chrome/Firefox 中是透明的，带有黑色边框，在 IE 中是黑色填充黑色边框。

有人有解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T00:54:30.327

而不是这个：

```
fill: 'none', 
```

用这个：

```
fill: null, 
```

# php - 将表单数据传递给控制器

> ID：16126589
> 
> 赞同：0
> 
> 时间：2013-04-21T00:06:57.710
> 
> 标签：php, javascript, jquery, ajax, codeigniter

所以在我的Javascript中我使用表单序列化输出是正确的

> (issubmit=1&username=tester&password=test&cpassword=test&firstname=sdfds&lastname=fsdfdsf&gender=&email=pie%40aol.com&phone=&address=&phone=&address=)

当我尝试将它传递给我的控制器时，我什么也没得到，`result = ""`. 我究竟做错了什么？

**查询：**

```
var dataString = $("form").serialize();
    $.ajax({
        url: '<?php echo base_url();?>index.php/welcome/submit_form/',
        async: false,
        type: 'POST',
        data: dataString,
        dataType: 'html',
        success: function(data) {
        $('#ajax-content-container').html(data);
    }
}); 
```

**控制器：**

```
function submit_form() {
    $data = $this->input->post('dataString');
    echo "<p>result= ".$data."</p>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T00:48:51.213

您的控制器似乎正在检查名为“dataString”的 post 参数。但是这个参数似乎没有在您的 ajax 请求中发送。当您序列化您的表单时，它会将所有表单字段组合成一个 url 编码的字符串。这里没有对“dataString”参数的引用。

您可能想要在表单中做的是像这样包装每个输入字段的 name 属性：

```
<input type="text" name="dataString[username]" value="" />
<input type="text" name="dataString[password]" value="" /> 
```

完成此操作后，我相信您应该能够在控制器中检查一个名为“dataString”的参数。它应该是一个包含键/值格式的所有字段的数组。例如

```
function submit_form() {
    $data = $this->input->post('dataString');
    echo var_dump($data);
} 
```

# perl - 如何正确使用数组，而不是使用动态标量变量

> ID：16126594
> 
> 赞同：0
> 
> 时间：2013-04-21T00:07:20.240
> 
> 标签：perl

我有这种数据，需要（1）检索每个集群中的第一个元素（每个“数字簇”中的 5 个元素，用“：”分隔），（2）每组每 3 个元素对检索到的元素进行分组。

```
chr1    69270   .   A   G   1/1:208,34:244:14.96:118,15,0   0/1:186,51:241:8.72:80,0,9  0/0:226,1:236:3.01:0,3,30   ./. 1/1:209,35:250:12:116,12,0  ./. 1/1:186,53:242:14.97:126,15,0   0/0:245,0:248:3.01:0,3,33   1/1:182,60:243:23.95:201,24,0 
```

我相信有更好的方法来做到这一点。但到现在为止，我只能想到使用野蛮的武力，这总是不好的。另一种选择是使用动态标量，但本质上动态标量将完全按照下面的坏代码所做的事情。我没有看到太多改进，stackoverflow 的其他人说使用动态标量（也）总是不好的。

我仍在阅读 perl 开始，所以不知道还有哪些其他选项可用。任何帮助将不胜感激。

```
my @genotype1 = split (/:/, $original_line[6]);
my @genotype2 = split (/:/, $original_line[7]);
my @genotype3 = split (/:/, $original_line[8]);
my @genotype4 = split (/:/, $original_line[9]);
my @genotype5 = split (/:/, $original_line[10]);
my @genotype6 = split (/:/, $original_line[11]);
my @genotype7 = split (/:/, $original_line[12]);
my @genotype8 = split (/:/, $original_line[13]);
my @genotype9 = split (/:/, $original_line[14]);
my @trio1 = ($genotype1[0], $genotype2[0], $genotype3[0]);
my @trio2 = ($genotype4[0], $genotype5[0], $genotype6[0]);
my @trio3 = ($genotype7[0], $genotype8[0], $genotype9[0]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T00:21:10.700

有几种不同的方法可以使您的代码更高效；大多数（全部？）将利用您只使用每个`@genotype`列表的第一个元素这一事实。一个例子：

```
my @elements = map { (split /:/)[0] } @original_line[6..14];
my @trio1 = @elements[0,1,2];
my @trio2 = @elements[3,4,5];
my @trio3 = @elements[6,7,8]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T00:32:24.847

如果您使用的是“动态变量”，您将拥有

```
for (6..14) {
   @{ "genotype".($i-6) } = split (/:/, $original_line[$i]);
} 
```

只需将其更改为

```
my @genotypes;
for (6..14) {
   @{ $genotypes[$i-6] } = split (/:/, $original_line[$i]);
} 
```

这可能更干净一些

```
my @genotypes;
for (6..14) {
   $genotypes[$i-6] = [ split (/:/, $original_line[$i]) ];
} 
```

或者

```
my @genotypes;
for (6..14) {
   push @genotypes, [ split (/:/, $original_line[$i]) ];
} 
```

或者

```
my @genotypes;
for (@original_line[6..14]) {
   push @genotypes, [ split /:/ ];
} 
```

或者

```
my @genotypes = map { [ split /:/ ] } @original_line[6..14]; 
```

但是你只需要第一个元素，所以你可以使用

```
my @genotypes = map { ( split /:/ )[0] } @original_line[6..14]; 
```

然后，您只需要一次从该数组中获取三个元素，这样您就可以得到：

```
my @genotypes = map { ( split /:/ )[0] } @original_line[6..14];

my @trioes;
while (@genotypes) {
   push @trios, [ splice @genotypes, 0, 3 ];
} 
```

# html - CSS 容器定位

> ID：16126596
> 
> 赞同：0
> 
> 时间：2013-04-21T00:07:49.513
> 
> 标签：html, css, jsp

我在使用 css 时遇到了一点问题

我的 jsp 网页中有一个容器，它使用 div 进行样式设置，并且可以完美运行，直到我放入另一个 div 标记来设置某些元素的样式，然后由于某种原因这些元素被放置在容器之外。

这是CSS代码：

```
.container 
{
position: relative;
width:1000px;
margin:0 auto 0 auto;
padding:5px;
border:1px solid #cccccc;
background:#ffffff; 
}

div.ex1
{
position: absolute;
top: 300px;
left: 150px;
width:150px;
padding:5px;
border:1px solid gray;
} 
```

这是jsp代码：

```
<%@ page import="java.util.*" %>
<%@ page import="DTO.Product" %>
<%@ page import="DAO.ListTabletsDao" %>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-    8859-1"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>

<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>

    <link rel="stylesheet" type="text/css" href="styles.css">

</head>
<body>

    <div class="container">

    <img src="computer_banner_blue.gif" alt="banner">

    <div class="nav">
    <ul> <li><a href="home.jsp">Home</a></li><li><a href="tablets.jsp">Tablets</a></li>
        <li><a href="laptops.jsp">Laptops</a></li><li><a   href="computers.jsp">Computers</a></li>
        <li><a href="printers.jsp">Printers</a></li>
        <li><a href="contact.jsp">Contact</a></li> <li><a href="about.jsp">About</a>      </li>   </ul>
    </div>

    <form action="UserActionServlet" method="post" name="searchForm">

        <input type="text" size="20" name="searchProduct">

        <input type="hidden" name="action" value="search" />
        <input type="submit" value="Search">

    </form>

    <div class ="tabHeader">
    <h1>Tablets</h1>
    </div>

<%
ListTabletsDao prod = new ListTabletsDao();

List<Product> prods = prod.getDesc();
request.getSession().setAttribute("Prods", prods);
prods = (List)(request.getSession().getAttribute("Prods"));

int numId;
int y = 0;
if (prods != null){

for (Product p: prods){
  numId = p.getProduct_id();
  y++;
%>
<div class="ex<%=y%>">

 <center>
     <%=p.getTitle()%> <br> <img width="100" height="100" src="<%=p.getImageUrl()%>"> 
 <a href="productInfo.jsp?productId=<%=(numId)%>"><button>more info</button></a>

  <%=p.getPrice()%>
</center>

      </div>
<%
}
}
%>

</body>
<div>
</html> 
```

对此有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:23:48.450

我做了一个测试，似乎正在工作。问题是您可能需要添加高度，否则容器 div 正在折叠。把相对的想象成固定的，它没有高度，所以它被“冰冻”到位。它与使用相对和绝对有关。

这是进一步教育的链接，可能有助于进一步解释。[http://www.w3.org/wiki/CSS_static_and_relative_positioning](http://www.w3.org/wiki/CSS_static_and_relative_positioning)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>

<style>
.container 
{
position: relative;
width:1000px;
margin:0 auto 0 auto;
padding:5px;
border:1px solid #cccccc;
background:#ffffff; 
height:400px;
}

div.ex1
{
position: absolute;
top: 300px;
left: 150px;
width:150px;
padding:5px;
border:1px solid gray;
}
</style>
</head>
  <div class="container">
    <div class="ex1"> This is the inside div</div>
  </div>
<body>
</body>
</html> 
```

让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T00:23:07.543

这里使用 CSS 中的盒子模型概念。这可以进一步扩展。由于几个原因，我不是 w3schools 的忠实粉丝，但这里有一个链接可以进一步解释。[http://www.w3schools.com/css/css_boxmodel.asp](http://www.w3schools.com/css/css_boxmodel.asp)

我希望这个对你有用。你需要从我所知道的情况下进一步深入研究 CSS。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>

<style>
.container 
{
width:1000px;
margin:0 auto 0 auto;
padding:5px 30px 5px 30px;
background:#ffffff; 
height:100%;
border:green 1px solid;
}

div.ex1
{
margin:0 0 0 0;
padding:10px 5px 10px 5px;
width:150px;
border:1px solid gray;
}
#outterWrapper{
    border:solid red 1px;
    padding:20px;
    }
</style>
</head>
<div id="outterWrapper">
  <div class="container">
    <div class="ex1"> This is the inside div</div>
    <!-- ADDING 10PX BETWEEN THE DIV'S USING CSS -->
    <div class="ex1"> This is the inside div</div>
    <div class="ex1"> This is the inside div</div>
    <div class="ex1"> This is the inside div</div>
    <div class="ex1"> This is the inside div</div>
  </div><!-- END CONTAINER -->
</div><!-- END OUTTER WRAPPER -->
<body>
</body>
</html> 
```

# c# - StreamSocket 意外关闭

> ID：16126599
> 
> 赞同：2
> 
> 时间：2013-04-21T00:08:46.523
> 
> 标签：c#, .net, proxy, windows-runtime, windows-phone-8

我正在尝试使用 StreamSocket 和 StreamSocketListener 来创建代理。目标是让代理做点什么，但现在我什至做不到那么远。当我尝试将来自原始目的地的响应写入连接到代理的客户端时，连接不断关闭。奇怪的是它有时有效，但有时无效，这可能意味着某种线程或问题？目前这个代理一次只服务一个请求。

```
StreamSocketListener server = new StreamSocketListener();
server.ConnectionReceived += this.server_ConnectionReceivedAsync;
await server.BindServiceNameAsync("9000"); 
```

这是处理连接的代码

```
await originalDestination.ConnectAsync(new EndpointPair(null, string.Empty, this.hostName, this.port));
// Read client data, and forward on to the original destination
await ForwardStream(client.InputStream, originalDestination.OutputStream);
// Get the response from the original destination, and forward it to the client
await ForwardStream(originalDestination.InputStream, client.OutputStream); 
```

这是 ForwardStream 函数

```
bool readMore;
do
{
    Windows.Storage.Streams.Buffer buffer = new Windows.Storage.Streams.Buffer(1024);
    await reader.ReadAsync(buffer, 1024, InputStreamOptions.Partial);
    readMore = buffer.Length == 1024 ? true : false;
    if (buffer.Length != 0)
    {
        // This is where I get the socket closed exception
        await writer.WriteAsync(buffer);
    }
    else
    {
        return;
    }
}
while (readMore); 
```

# c# - 将 DataGridView 内容复制到多个 TextBoxes

> ID：16126605
> 
> 赞同：1
> 
> 时间：2013-04-21T00:10:00.603
> 
> 标签：c#, sql, winforms, datagridview, textbox

我有一个包含 3 列的 DataGridView，我希望当我单击一个单元格时，它的内容将被复制到 2 个不同的文本框和 1 个组合框。到目前为止，我遇到的唯一事情是这样的：

```
 private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
    {
        dataGridView1.Rows.CopyTo = txtCveMun.Text;
    } 
```

以上根本不起作用，这只是我在图书馆乱搞的东西。所以我该怎么做？谢谢！

如果有人在乎，这是我填充 DataGridView 的方法：

```
private void CargaDataGridView()
    {
        conexion.Open();
        try
        {
            cmd.CommandText = "SELECT m.cvemunicipio, m.nombre AS NombreA, e.nombre AS NombreB FROM tbMunicipios m INNER JOIN tbEstados e ON m.CveEstado = e.CVeEstado";
            rd = cmd.ExecuteReader();
            while (rd.Read())
            {
                this.dataGridView1.Rows.Add(rd.GetValue(0), rd.GetValue(1), rd.GetValue(2));
            }
            conexion.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    } 
```

**编辑**

完整的答案是

```
private void dataGridView1_DoubleClick(object sender, EventArgs e)
    {
        txtCveMun.Text = dataGridView1.SelectedRows[0].Cells["Column1"].Value.ToString();
        txtNomMun.Text = dataGridView1.SelectedRows[0].Cells["Column2"].Value.ToString();
        cbEstado.Text = dataGridView1.SelectedRows[0].Cells["Column3"].FormattedValue.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:15:50.857

首先，您必须将 DatagridView 选择模式设置为，`FullRowSelect`然后您可以通过以下方式获取列的值：

```
dataGridView1.SelectedRows[0].Cells["ColummName"].Value.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T00:18:40.543

如果您想将内容从[DataGridView](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.aspx)复制到您的控件，例如文本框，您可以使用行和单元格集合来获取[CellContentClick](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellcontentclick.aspx)事件中单元格的值。

```
private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
{
    txtCveMun.Text = dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString();
} 
```

如果要从单击的当前行中获取单元格的值，则可以使用列名。

```
private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
{
    txtCveMun.Text = dataGridView1.Rows[e.RowIndex].Cells["gridViewColumnName1"].Value.ToString();
    txtSomeControl.Text = dataGridView1.Rows[e.RowIndex].Cells["gridViewColumnName2"].Value.ToString();    
} 
```

# vb.net - 如何使用这些代码更改 IP 地址？

> ID：16126613
> 
> 赞同：0
> 
> 时间：2013-04-21T00:11:06.017
> 
> 标签：vb.net, static-ip-address

我正在使用此代码更改 IP 地址、子网掩码和默认网关，但似乎只有默认网关更改，而 IP 地址和子网掩码没有。你能帮我么？我正在使用 Windows 7

```
Dim IPAddress As String = "192.168.2.130"
Dim SubnetMask As String = "255.0.0.0"
Dim Gateway As String = "192.168.2.1"
Dim objMC As ManagementClass = New ManagementClass("Win32_NetworkAdapterConfiguration")
Dim objMOC As ManagementObjectCollection = objMC.GetInstances()

For Each objMO As ManagementObject In objMOC
    If (Not CBool(objMO("IPEnabled"))) Then
        Continue For
    End If

    Try
        Dim objNewIP As ManagementBaseObject = Nothing
        Dim objSetIP As ManagementBaseObject = Nothing
        Dim objNewGate As ManagementBaseObject = Nothing
        objNewIP = objMO.GetMethodParameters("EnableStatic")
        objNewGate = objMO.GetMethodParameters("SetGateways")

        'Set DefaultGateway
        objNewGate("DefaultIPGateway") = New String() {Gateway}
        objNewGate("GatewayCostMetric") = New Integer() {1}

        'Set IPAddress and Subnet Mask
        objNewIP("IPAddress") = New String() {IPAddress}
        objNewIP("SubnetMask") = New String() {SubnetMask}
        objSetIP = objMO.InvokeMethod("EnableStatic", objNewIP, Nothing)
        objSetIP = objMO.InvokeMethod("SetGateways", objNewGate, Nothing)

        MessageBox.Show("Updated IPAddress, SubnetMask and Default Gateway!")
    Catch ex As Exception
        MessageBox.Show("Unable to Set IP : " & ex.Message)
    End Try
Next objMO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:40:21.833

右键单击 bin 中的 exe 并以管理员身份运行，因为更改 IP 地址需要管理员权限，而在 Windows 7 中要拥有这种权限，您必须以管理员身份运行它。

# python - 根据列名获取熊猫数据框的子集

> ID：16126614
> 
> 赞同：2
> 
> 时间：2013-04-21T00:11:17.300
> 
> 标签：python, regex, pandas

我有一个包含 140 个样本（列）和约 27000 个 SNP（行）的 pd.DataFrame。每个列名都有一个群体名称和一个数字（例如“FLFL04”或“MI03”），其中包含6 个不同的群体和群体中不同数量的样本。

我想根据人口名称对各个人口的子集进行进一步计算（Hardy-Weinberg 精确检验）；我可以用循环和正则表达式来做到这一点，但希望有一个更快的解决方案。有没有办法根据列名（而不是它们的内容）创建子集？

编辑：我目前的方法如下：

（任何 pd.DataFrame 都可以，具有以下列：

```
data.columns = ['FLFL04', 'FLFL08', 'FLFL08replicate', 'FLFL10', 'FLFL13', 'FLFL14', 'FLFL15', 'FLFL15replicate', 'FLFL16', 'FLFL17', 'FLFL17replicate', 'FLFL19', 'FLFL20', 'FLFL20replicate', 'FLFL21', 'FLFL23', 'FLFL26', 'FLFL28', 'FLFL28replicate', 'FLFL29', 'FLFL29replicate', 'FLFL30', 'HSPQ01', 'HSPQ01replicate', 'HSPQ01replicate2', 'HSPQ02', 'HSPQ02replicate', 'HSPQ02replicate2', 'HSPQ03', 'HSPQ04', 'HSPQ04replicate', 'HSPQ04replicate2', 'HSPQ06', 'HSPQ07', 'HSPQ08', 'HSPQ09', 'HSPQ09replicate', 'HSPQ10', 'HSPQ10replicate', 'HSPQ11', 'HSPQ12', 'HSPQ13', 'HSPQ14', 'HSPQ15', 'HSPQ16', 'HSPQ17', 'HSPQ18', 'HSPQ19', 'HSPQ21', 'HSPQ22', 'HSPQ22replicate', 'KFO1', 'KFO2', 'KFO3', 'KFO4', 'KFO5', 'KFO8', 'MI01', 'MI02', 'MI03', 'MI03replicate', 'MI03replicate2', 'MI04', 'MI05', 'MI06', 'MI06replicate', 'MI06replicate2', 'MI08', 'MI09', 'MI09replicate', 'MI09replicate2', 'MI10', 'MI11', 'MI12', 'MI12replicate', 'MI13', 'MI13replicate', 'MI14', 'MI15', 'MI16', 'MI16replicate', 'MI17', 'MI18', 'MI19', 'MI20', 'MI21', 'SFQ01', 'SFQ02', 'SFQ03', 'SFQ03replicate', 'SFQ05', 'SFQ05replicate', 'SFQ06', 'SFQ06replicate', 'SFQ07', 'SFQ08', 'SFQ08replicate', 'SFQ09', 'SFQ09replicate', 'SFQ10', 'SFQ10replicate', 'SFQ11', 'SFQ13', 'SFQ14', 'SFQ15', 'SFQ16', 'SFQ17', 'SFQ21', 'SFQ23', 'SFQ24', 'SFQ25', 'SFQ26', 'WWA01', 'WWA01replicate', 'WWA01replicate2', 'WWA03', 'WWA03replicate', 'WWA03replicate2', 'WWA04', 'WWA05', 'WWA05replicate', 'WWA05replicate2', 'WWA07', 'WWA08', 'WWA08replicate', 'WWA09', 'WWA10', 'WWA12', 'WWA17', 'WWA17replicate', 'WWA18', 'WWA21', 'WWA23', 'WWA24', 'WWA25', 'WWA25replicate', 'WWA26', 'WWA27', 'WWA28', 'WWA30']

def get_pop_subset(pop_list, pop_name): 
    pop_result_list = []
    for i, pop in enumerate(data.columns):
    curr_pop = re.findall('([A-Z]+)', pop)[0]
    if curr_pop == pop_name:
        pop_result_list.append(pop)
    return pop_result_list

pops = ['FLFL', 'HSPQ', 'KFO', 'MI', 'SFQ', 'WWA']
subsets = []
for val in pops:
    subsets.append(get_pop_subset(data.columns, val))

for val in subsets:
    print data[val] 
```

然后我调用其他函数而不是

```
 print data[val] 
```

并将每个附加到一个新的df。虽然这可行，但我希望能得到一个更快、可能更有效的解决方案

谢谢，马丁

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-13T22:48:33.200

难道你不能使用带有参数“regex”的内置 DataFrame 方法“filter”来实现同样的事情吗？例如，

```
df2 = df.filter(regex='FLFL') 
```

返回一个新的 DataFrame，其中所有列都以 FLFL 开头。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-21T01:38:04.590

好的，对于您的情况，我会使用`groupby`. 您可以将函数传递给它`axis=1`以循环遍历列（请参阅文档中的[此处）：](http://pandas.pydata.org/pandas-docs/dev/groupby.html#splitting-an-object-into-groups)

```
>>> df 
   FLFL04  FLFL29rep  HSPQ12  MI03repl  MI16repl  SFQ10re  WWA05r
0       0          3       6         9        12       15      18
1       1          4       7        10        13       16      19
2       2          5       8        11        14       17      20
>>> df.groupby(lambda x: re.match("[A-Z]+", x).group(), axis=1)
<pandas.core.groupby.DataFrameGroupBy object at 0x9ae660c>
>>> grouped = df.groupby(lambda x: re.match("[A-Z]+", x).group(), axis=1) 
```

然后我们可以遍历这些组：

```
>>> for name, group in grouped:
    print 'group name:', name
    print 'dataframe:'
    print group
...     
group name: FLFL
dataframe:
   FLFL04  FLFL29rep
0       0          3
1       1          4
2       2          5
group name: HSPQ
dataframe:
   HSPQ12
0       6
1       7
2       8
group name: MI
dataframe:
   MI03repl  MI16repl
0         9        12
1        10        13
2        11        14
group name: SFQ
dataframe:
   SFQ10re
0       15
1       16
2       17
group name: WWA
dataframe:
   WWA05r
0      18
1      19
2      20 
```

或者把它变成字典：

```
>>> pprint.pprint(dict(list(grouped)))
{'FLFL':    FLFL04  FLFL29rep
0       0          3
1       1          4
2       2          5,
 'HSPQ':    HSPQ12
0       6
1       7
2       8,
 'MI':    MI03repl  MI16repl
0         9        12
1        10        13
2        11        14,
 'SFQ':    SFQ10re
0       15
1       16
2       17,
 'WWA':    WWA05r
0      18
1      19
2      20} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-27T18:58:26.233

使用正则表达式获取列名的任何子字符串，以“FLFL”开头，后跟两位数字，删除所有不匹配项 (NA)，删除重复项并排序。

```
df.columns.str.extract(r'(FLFL\d\d)', expand=False).dropna().drop_duplicates().sort_values() 
```

# asp.net-mvc-3 - WebAPI 控制器中的授权代码和授权属性

> ID：16126618
> 
> 赞同：0
> 
> 时间：2013-04-21T00:11:35.633
> 
> 标签：asp.net-mvc-3, web-applications, asp.net-web-api

我有以下方法来检索文件夹：

```
 [HttpGet]
    [Authorize]
    public HttpResponseMessage GetFolder(int id)
    {
        FolderDto folder = _service.GetFolder(id);
        if (folder == null)
        {
            return Request.CreateResponse(HttpStatusCode.NotFound);
        }

        return Request.CreateResponse(HttpStatusCode.Found, folder);
    } 
```

我有授权工作 - 如果用户登录并通过有效 cookie 传递请求，则操作继续。但我只想允许用户获取属于他的文件夹 - 即成员表中具有其用户 ID 的 UserId 的文件夹。

我是否应该在控制器中为我的每个 WebAPI 控制器方法执行此检查，或者这里是否有我尚未了解的标准方法。我的直觉告诉我这样做：

```
 [HttpGet]
    [Authorize]
    public HttpResponseMessage GetFolder(int id)
    {
        FolderDto folder = _service.GetFolder(id);
        if (folder == null || folder.UserId != <userId>) // Or just add another check for HTTPUnauthorized
        {
            return Request.CreateResponse(HttpStatusCode.NotFound);
        }

        return Request.CreateResponse(HttpStatusCode.Found, folder);
    } 
```

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:16:59.800

如果您只需要在执行其中一个操作期间执行此授权，那么我只需将该代码放入该操作代码中。但是，如果您有多个操作，那么我可能会通过扩展`AuthorizeAttribute`和移动该过滤器中的文件夹授权代码来创建一个授权过滤器。

# javascript - jQuery .scroll 像电影一样改变背景

> ID：16126619
> 
> 赞同：0
> 
> 时间：2013-04-21T00:11:37.243
> 
> 标签：javascript, jquery, css, scroll, preload

我正在尝试使用 200 张图像更改网页的背景图像并像电影一样播放它们。我的代码正在运行，但是当图片在滚动时发生变化时，过渡会闪烁。似乎在滚动期间 CSS 更新并且我得到了闪烁。它在 Chrome 和 Safari 中非常明显，但在 FF 中也是如此。在 FF 中看起来更流畅。奇怪的。需要帮助解决问题。我正在使用下面的代码。拜托，任何有助于平滑过渡并使其更像电影的帮助都会很棒。我是 jquery 的新手，但有编程背景。非常感谢任何和所有建议！

我研究了将近三天。有人提到更新 .htaccess 文件有助于将文件的标题设置为不会过期，并且浏览器正在发送 304。我不知道如何测试，但下面是我的代码。

```
var pics = []; // CREATE PICS ARRAY

    //PRELOAD FUNCTION TO SET UP PICS ARRAY IN MEMORY USING IMAGE OBJECT
function preload(){
    for(i = 0; i < arguments.length; i++) {
        pics[i] = new Image();
        pics[i].src = arguments[i]; 
    }
};
preload(
'bgImage/1.jpg'
,'bgImage/2.jpg'
,'bgImage/3.jpg'
,'bgImage/4.jpg'
,'bgImage/5.jpg'
); // THERE ARE 200 TOTAL IMAGES THAT WE ARE LOADING...

function switchImage() {
var s = $(window).scrollTop();
var index = 0;
if(s>   10  ){index =   1   ;}
if(s>   20  ){index =   2   ;}
if(s>   30  ){index =   3   ;}
if(s>   40  ){index =   4   ;}
if(s>   50  ){index =   5   ;}
// THERE IS 200 IF STATEMENTS IN TOTAL
// THE ODER OF THE IMAGES STARTS IN THE MIDDLE AND WE HAVE TO ADJUST DEPENDING ON POSITION
// USING THE IF STATEMENTS WAS THE EASIEST SOLUTION
$("body").css('background-image', 'url(' + pics[index].src + ')');
};

$(document).ready(function () {
switchImage();
//alert("images and dom loaded");
});

$(window).scroll(function () {
switchImage();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:24:38.010

如果您的图像被命名为#.jpg，则将预加载函数包装到适配器中，该适配器接收图像数量并迭代预加载字符串，如'bgImage/' + i + '.jpg'。

通过这种方式，您可以立即获得可重用的数组，以结合所有 200 个段的 switch 语句在滚动时使用，这在 A 中是真正的痛苦......或者只是调用：

```
index = $(window).scrollTop()/10; 
```

这一行应该替换所有索引，并且每次滚动时都会将正确的图像放入背景中。

至于在 javascript/jQuery 事件上更改 css，我建议使用 jQuery animate 快速转换几毫秒，但仍然是一个转换。

# sql - 在 SQL 中调用视图以查找记录

> ID：16126628
> 
> 赞同：0
> 
> 时间：2013-04-21T00:12:52.000
> 
> 标签：sql, oracle

我创建了一个视图`article_avis_favorable`，但是当我进行此查询以搜索文章但使用一些规范时：

```
SELECT blabla
FROM Table
WHERE id_article in article_avis_favorable; 
```

它显示一条错误消息`Erreur SQL : ORA-00904: "ARTICLE_AVIS_FAVORABLE" : identificateur non valide 00904\. 00000 - "%s: invalid identifier"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:15:33.290

只需将您的视图视为表格

```
SELECT blabla
FROM Table t
INNER JOIN article_avis_favorable v ON t. id_article = v. id_article 
```

或者

```
SELECT blabla
FROM Table 
WHERE id_article in (SELECT id_article FROM article_avis_favorable); 
```

# php - SQLite 将 NULL 值添加到 NOT NULL 列中

> ID：16126637
> 
> 赞同：0
> 
> 时间：2013-04-21T00:13:40.743
> 
> 标签：php, sqlite, null

我正在创建一个包含 NOT NULL 列的表，如下所示：

`CREATE TABLE IF NOT EXISTS Users (Id INTEGER PRIMARY KEY, Username TEXT UNIQUE NOT NULL, Password TEXT NOT NULL);`

但 SQLite 很乐意为这些列添加 NULL 值：

```
<?php

error_reporting(E_ALL);
date_default_timezone_set('Europe/Helsinki');
ini_set('default_charset', 'UTF-8');
mb_internal_encoding("UTF-8");
header('Content-Type: text/html; charset=UTF-8');

// ---

const DB_FILE = "auth.db";
//$username = "john";
//$password = "secret";
$username = '';
$password = '';

// ---

// open db
//$db = new PDO('sqlite:'.DB_FILE);
$db = new PDO('sqlite::memory:');

// set attributes
$db->setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION);

// create the table
$db->exec("CREATE TABLE IF NOT EXISTS Users (Id INTEGER PRIMARY KEY, Username TEXT UNIQUE NOT NULL, Password TEXT NOT NULL);");

$statement = "INSERT INTO Users (Username, Password) VALUES (:Username,:Password);";    
$query = $db->prepare($statement);
$query->bindValue(':Username', $username, SQLITE3_TEXT);
$query->bindValue(':Password', $password, SQLITE3_TEXT);
$ok = $query->execute();

$result = $db->query('SELECT * FROM Users');
if (!$result) die ("oops!"); // will not produce anything when errormode is on

echo "<pre>\n";

foreach($result as $row)
{
    echo "Id: " . $row['Id'] . "\n";
    echo "Username: " . $row['Username'] . "\n";
    echo "Password: " . $row['Password'] . "\n";
}

$db = NULL;

?> 
```

SQLite 不应该允许这样做。我究竟做错了什么？

**更新于 2013-04-23 ~00:35 Z**

以下是对 Diamond Geezer 回答的评论。

SQLite 停止执行这些语句：

```
$db->exec("INSERT INTO Users (Username, Password) VALUES ('','');");
$db->exec("INSERT INTO Users (Username, Password) VALUES ('a','aa');");
$db->exec("SELECT * FROM Users;"); 
```

但不是这些：

```
$username = '';
$password = '';
$statement = "INSERT INTO Users (Username, Password) VALUES (:Username,:Password);";    
$query = $db->prepare($statement);
$query->bindValue(':Username', $username, SQLITE3_TEXT);
$query->bindValue(':Password', $password, SQLITE3_TEXT);
$ok = $query->execute(); 
```

我认为这一定与准备声明有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T00:18:01.720

用户名和密码不为 NULL；它们是零长度字符串：

```
$username = '';
$password = ''; 
```

这就是他们被插入的原因。

作为对您的评论的回应，您可以使用如下所示的 CHECK 约束来停止插入零长度字符串。

```
CREATE TABLE IF NOT EXISTS Users 
(
  Id INTEGER PRIMARY KEY, 
  Username TEXT UNIQUE NOT NULL CHECK(Username<>''), 
  Password TEXT NOT NULL CHECK(Password<>'')
); 
```

这是在[SQL Fiddle](http://sqlfiddle.com/#!7/36bcd/4)中。语句：`INSERT INTO Users (Username, Password) VALUES ('','');`失败并出现错误：*由于约束失败（19 约束失败）无法执行语句*，而语句：`INSERT INTO Users (Username, Password) VALUES ('a','aa');`成功。

# paypal - Paypal 购物车 - 添加法律免责声明

> ID：16126640
> 
> 赞同：0
> 
> 时间：2013-04-21T00:13:56.790
> 
> 标签：paypal, shopping-cart

我想在我的贝宝购物车底部添加一般法律免责声明。有没有办法将文本添加到贝宝购物车的底部？有点像页脚而不是页眉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:53:49.843

无法通过使用页脚将其添加到购物车页面的底部。一些商家过去所做的是为法律免责声明创建图像，然后将其用于结帐页面上的业务标题图像。

# xslt - XSLT：复制节点并修改它们

> ID：16126641
> 
> 赞同：1
> 
> 时间：2013-04-21T00:14:06.083
> 
> 标签：xslt, xslt-1.0

输入：

```
<xsl:variable name="nodelist">
<root>
    <a size="12" number="11">
        <sex>male</sex>
        Jens
    </a>
    <a size="12" number="11">
        <sex>male</sex>
        Hulk
    </a>
    <a size="12" number="11">
        <sex>male</sex>
        Steven XXXXXXXXXXX
    </a>
    <a size="12" number="11">
        <sex>male</sex>
        Joschua
    </a>
    <a size="12" number="11"> 
       <sex>female</sex>
        Angelina
    </a>
</root>
</variable> 
```

期望的输出：

```
<root>
    <a size="12" number="11">
        <sex>male</sex>
        Jens
    </a>
    <a size="12" number="11">
        <sex>male</sex>
        Hulk
    </a>
    <a size="12" number="11">
        <sex>male</sex>
        Steven YYYYYYYYYYYY
    </a>
    <a size="12" number="11">
        <sex>male</sex>
        Joschua
    </a>
    <a size="12" number="11"> 
       <sex>female</sex>
        Angelina
    </a>
</root> 
```

我想用 XXXXXXXXXXX 更改 a 节点。我可以复制第一个和最后两个节点，更改第三个，然后像这样重新组合在一起吗？(XLST 1.0)

```
<xsl:variable name="begin">
    <xsl:value-of select="substring-before($nodelist, 'XXXXXXXXXXX')"/>
</xsl:variable>

<xsl:variable name="replaceString">
    YYYYYYYYYYYY
</xsl:variable>

<xsl:variable name="end">
    <xsl:value-of select="substring-after($nodelist, 'xxxxx')"/>
</xsl:variable>

<xsl:variable name="all">
    <xsl:copy-of select="$begin"/>
    <xsl:copy-of select="$replaceString"/>
    <xsl:copy-of select="$end"/>
</xsl:variable> 
```

使用子字符串，我丢失了有关节点的所有信息。这是子字符串的结果

```
<root>
  male Jens
  male Hulk
  male Steven YYYYYYYYYYYY
  male Joschua
  female Angelina
</root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:02:39.153

你需要让你的样式表更有针对性。仅更改`text()`包含需要替换的值的值。对于其他所有内容，身份模板将确保复制内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <!--Identity template will copy all matched nodes and apply-templates-->
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <!--Specialized template to match on text nodes that contain the "findString" value-->
    <xsl:template match="text()[contains(.,'XXXXXXXXXXX')]">
        <xsl:variable name="findString" select="'XXXXXXXXXXX'"/>
        <xsl:variable name="replaceString" select="'YYYYYYYYYYYY'"/>
        <xsl:value-of select="concat(substring-before(., $findString), 
                                    $replaceString, 
                                    substring-after(., $findString))"/>
    </xsl:template>
</xsl:stylesheet> 
```

# javascript - 表格行表现得像一个链接

> ID：16126647
> 
> 赞同：2
> 
> 时间：2013-04-21T00:14:32.663
> 
> 标签：javascript, html, css, hyperlink, html-table

我有这个代码：

```
$('.table-striped tr').click( function() {
    var link = $(this).find('a').attr('href');
    if(link != 'undefined') {
        window.location = link;
    }
}).hover( function() {
    $(this).toggleClass('hover');
}); 
```

它运行良好（`<a>`隐藏）。我还有一个很好的 CSS 规则来`td:hover`突出显示整行。

我现在想念的是：

*   右键单击能够“在新选项卡/窗口中打开”
*   中键单击

你知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:55:39.213

上下文菜单和中间单击操作是浏览器在链接 ( `<a/>`) 上的默认行为。所以一般来说，你不能在其他元素上模拟这种行为。但是你可以用一些 JavaScript 来接近。

例如，要在中键单击时在新选项卡中打开链接（就像大多数浏览器默认所做的那样），请使用此事件：

```
$("#foo").live('click', function(e) { 
    if (e.which == 2) {
        e.preventDefault();

        // open new tab/window
        window.open('path');
    }
}); 
```

上下文菜单是一个更大的问题，因为很难（不可能）让它看起来像原来的一样，但你可以创建自己的。为此有几个 jQuery 插件。只是[谷歌](https://www.google.com/search?q=jquery%20context%20menu)。

# jquery - jQuery 字符数，限制为两个文本框

> ID：16126648
> 
> 赞同：0
> 
> 时间：2013-04-21T00:14:36.733
> 
> 标签：jquery, character-limit

我正在处理一个接受进入单个文本区域的页面，然后如果它达到一定的字符限制（第一个带有 0 - x 字符，第二个带有 x - end），则将包含的文本实时拆分到两个输出文本区域中。我的复制过程正在运行，但不知道如何处理除法并让第一个文本框停止接受输入，同时继续实时输入第二个文本框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:23:37.473

我认为您应该能够调用`.focus()`第二个框以强制光标进入其中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T00:27:37.450

您可以通过使用在文本框之间移动光标。

```
$('newTextBox').focus(); 
```

对于字符限制，使用它。

```
<textarea maxlength="50">

</textarea> 
```

请注意，它不适用于 Internet Explorer 9 及更早版本或 Opera。

# asp.net-mvc-4 - 我如何设计具有受保护/私有成员 DDD 样式的 EF5 代码优先实体

> ID：16126650
> 
> 赞同：0
> 
> 时间：2013-04-21T00:14:37.997
> 
> 标签：asp.net-mvc-4, ef-code-first, domain-driven-design, entity-framework-5, entities

所以我正在阅读这本 DDD 书，同时设计一个新系统。在 DDD 书中，他们有一个示例，其中实体具有私有成员，例如 ID 和其他值。

举个例子，我们有一个用户实体，它有 id 和一组它有权参加的课程。

然后在 DDD 风格中，如果我们说在用户实体上，他们会使用 GrantRightTo(Course c) 之类的东西。这一切都很好，因为在该功能中，我现在可以检查任何业务规则，例如用户是否注册了太多课程。聪明的！

另一种选择是任何人都有权收集课程，但控制器需要知道不好的业务规则。

现在首先是 EF 代码的问题，我无法像我的书那样让我的课程集合成为私有/受保护的并且仍然被持久化 (dbcontext) 那么该怎么办？

我当然可以将集合公开，并且仍然有像 GrantRightTo 这样的方法，但是其他开发人员可能会以错误的方式执行此操作，因此并不理想。

该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T00:24:08.600

最好的方法是将数据库模型与 DTO（数据传输对象）映射。

您将使用 DTO 模型创建一个额外的层。然后，您的真实域模型可以基于此 DB 模型。在您的领域模型中，您可以抽象出底层模型中的差异。

这也有一个缺点，即如果您的项目发生垂直变化，您需要同时维护这两个模型。但是，它还允许您的域模型独立于您的物理数据库模型进行更改。

# ruby - RubyMine 中的“获取可用生成器列表”警告。我该如何摆脱这个？

> ID：16126657
> 
> 赞同：7
> 
> 时间：2013-04-21T00:15:44.887
> 
> 标签：ruby, ruby-on-rails-3, rake, rubymine

我正在使用 RubyMine 5.4.1 并正在`3.2.9`使用 ruby​​ 创建一个新的 rails 应用程序`1.9.3-p0`，并收到以下警告。我相信捆绑器当时正在运行`install`。警告标题为“获取可用生成器列表”，并吐出以下警告，其中第一个是“获取可用生成器脚本执行错误”：

![RubyMine 警告：获取可用的生成器脚本执行时出现错误..."></p> <p>这是否告诉我我必须提供一个“秘密”以使未来版本的 rake 一切正常，或者它是否告诉我提供“秘密”只是临时修复，但不适用于未来版本的 rake？</p> <p>我如何永久修复此警告，以便我可以使用 rake，并注意漏洞？</p>     </div>

        <div class=](https://i.stack.imgur.com/v10OD.png)

[ruby](/tags/ruby "show questions tagged 'ruby'")[ruby-on-rails-3](/tags/ruby-on-rails-3 "show questions tagged 'ruby-on-rails-3'")[rake](/tags/rake "show questions tagged 'rake'")[rubymine](/tags/rubymine "show questions tagged 'rubymine'")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-15T19:41:21.287

如果您不使用 RVM 或类似的 ruby​​ 版本工具，这可能无法回答您的问题。我相信它也`bundler`与宝石有关。

在我设置 Preferences > Languages and Frameworks 然后选择安装在我的机器上的几个 RVM 管理的环境之一之前，我也在一个新项目中得到了这个。

默认情况下，RubyMine 似乎选择了 RVM 环境的@global 版本，除非我另有说明。我几乎总是使用`bundler`and安装 gem `Gemfile`，因此在一个项目中，有一个特定的 gemset（我认为这是正确的术语）与它相关联，其中包含已安装且特定于该项目的 gem。这些 gem 不会在项目及其 gemset 的范围之外可用。您可以通过选中“忽略全局 gempath”来进一步隔离您的项目，我建议您这样做——这意味着您的项目将在本地使用与稍后将它们部署到生产环境时使用的完全相同的 gem 版本。

当然，您需要全局安装几个 gem（使用`gem install`） -- `bundler`、`rake`和`rails`，也许还有一些其他的。

当您开始一个新项目时，我对如何防止这种情况发生没有任何答案，但是项目已经加载，您可以选择正确的环境，一切都应该按预期工作。

# r - 如何在ggplot2中绘制多列？

> ID：16126663
> 
> 赞同：1
> 
> 时间：2013-04-21T00:16:51.187
> 
> 标签：r, ggplot2

我刚从 Excel 来到 R，对 ggplot2 图表质量的优雅感到兴奋。由于它们是不同的工具，因此具有不同的做事方式。我必须训练我的大脑以 R（ggplot2）的方式思考。

我想知道，如何在 ggplot2 中绘制多列数据。我想以以下数据为例：

```
State           Quarter 1   Quarter 2   Quarter 3   Total
Connecticut     385         410         521         1,316
Pennsylvania    545         416         598         1,559
Delaware        506         515         731         1,752
New Jersey      591         781         617         1,989
Maryland        946         436         895         2,277
Vermont         945         816         895         2,656
New York        910         867         946         2,723

Total           4,828       4,241       5,203       14,272 
```

**问题：**

1.  我可以将每个季度数据绘制到一个条形图上，如何在同一张图表上绘制所有季度？
2.  这可能是 Excel 的方式，有没有更好的方法在 R 中表示这些数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T04:10:33.707

```
df <- read.csv(text="State,Quarter1,Quarter2,Quarter3,Total
Connecticut,385, 410, 521, 1316
Pennsylvania, 545, 416, 598, 1559
Delaware,506, 515, 731, 1752
New Jersey,591, 781, 617, 1989
Maryland,946, 436, 895, 2277
Vermont, 945, 816, 895, 2656
New York,910, 867, 946, 2723
", header=T)

library(reshape2)

df <- melt(df, variable.name="Quarter")

library(ggplot2)

ggplot(df[df$Quarter != "Total",]) + 
geom_bar(aes(State, value, fill = Quarter), stat="identity") 
```

这将创建以下图表：

![在此处输入图像描述](https://i.stack.imgur.com/CC3Qg.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T05:30:40.233

正如评论中所建议的，首先`melt`是数据框：

```
require(reshape2)
require(ggplot2)

data = read.table(text="
State,   Quarter1,   Quarter2,   Quarter3,   Total
Connecticut,     385,         410,         521,         1316
Pennsylvania,    545,         416,         598,         1559
Delaware,        506,         515,         731,         1752
New Jersey,      591,         781,         617,         1989
Maryland,        946,         436,         895,        2277
Vermont,         945,         816,         895,         2656
New York,        910,         867,         946,         2723
Total,           4828,       4241,       5203,       14272",header=T,sep=',')

data.new <- melt(head(data,-1)) 
```

现在对于堆积条形图：

```
ggplot(head(data.new,-1), aes(State,value,fill=variable)) + geom_bar(position="dodge") 
```

![在此处输入图像描述](https://i.stack.imgur.com/F55YU.png)

对于并排条形图：

```
ggplot(head(data.new,-1), aes(State,value,fill=variable)) + geom_bar() 
```

![在此处输入图像描述](https://i.stack.imgur.com/0EWeU.png)

# php - 多维数组内爆

> ID：16126664
> 
> 赞同：1
> 
> 时间：2013-04-21T00:16:53.773
> 
> 标签：php, multidimensional-array, implode

这是我正在处理的多维数组的示例格式：

```
 Array ( 
    [1] => Array ( [code] => PPJ3 [street] => 34412 Fake Street [city] => Detroit [state] => MI [zip] => 48223 [county] => Wayne [cost] => 432.00 ) 

    [2] => Array ( [code] => PLK3 [street] => 73517 Fake Street [city] => Detroit [state] => MI [zip] => 48223 [county] => Wayne [cost] => 54.00 ) 

    [3] => Array ( [code] => HYK2 [street] => 55224 Fake Street [city] => Detroit [state] => MI [zip] => 48208 [county] => Wayne [cost] => 345.00 ) 
 ) 
```

我正在尝试将隐藏字段设置为仅代码值并用逗号分隔。数组也需要循环，因为它总是会改变。这就是我希望它看起来的样子：

$myHiddenField = PPJ3、PLK3、HYK2

对此进行编码的简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T00:21:05.347

只要您可以引用原始数组..

> ```
> <?PHP
> $myHiddenField = array();
> foreach($array as $row) {
>     $myHiddenField [] = $row['code'];
> }
> ?> 
> ```

或对于 csv

> ```
> <?PHP
> foreach($array as $row) {
>     $myHiddenField .= ",".$row['code'];
> }
> $myHiddenField = substr($myHiddenField,1);
> ?> 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T00:24:10.953

会有[array_column](https://wiki.php.net/rfc/array_column)函数是PHP 5.5，你就能做到这一点

```
$myHiddenField = implode(',', array_column($yourMainArray, 'code')); 
```

现在你必须使用你自己的循环

```
$values = array();
foreach ($yourMainArray as $address)
{
  $values[] = $address['code'];
}
$myHiddenField = implode(',', $values); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T00:23:37.967

那么使用循环有什么问题呢？

```
$myHiddenField = '';
$c = count($array);

for($i=0;$i<$c;$i++){
  if($i == $c -1){
     $myHiddenField .= $val['code'];
  }else{
     $myHiddenField .= $val['code'].', ';
  }
} 
```

如果您使用的是 PHP 5.3+：

```
$tmp = array_map(function($v){return($v['code']);}, $array);
$myHiddenField = implode(', ', $tmp); 
```

# css - 在动画后应用悬停效果

> ID：16126668
> 
> 赞同：0
> 
> 时间：2013-04-21T00:17:00.343
> 
> 标签：css, animation, hover

我有一个动画应用到

```
`une
 {margin-top: 245px;margin-left: 545px; -webkit-animation:move ease 1 forwards 15s 3s;  -moz-animation:move ease 1 forwards 15s 3s ;animation:move ease 1 forwards 15s 3s ;

-webkit-transition: all 1s ease; -moz-transition: all 1s ease; -o-transition: all 1s ease;}` 
```

所以在此之后我希望能够将鼠标悬停在这个元素（这是一个图像）上，以便改变它的比例或制作另一个图像，但是无论我做什么它都不起作用。所以让我们说 une:hover{-webkit-transform:scale(1;1)} 对任何人都没有任何想法/解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:49:04.167

我必须为我的网站做类似的事情，看看 - [http://jsfiddle.net/apaul34208/v7k7f/10/](http://jsfiddle.net/apaul34208/v7k7f/10/)

这是一个更简单的版本-http [://jsfiddle.net/apaul34208/MzSkJ/1/](http://jsfiddle.net/apaul34208/MzSkJ/1/)

```
.une {
    position:absolute; /* use position rather than margin */
    top:--px;
    left:--px;
    -webkit-animation:lightSpeedIn 1s;
    -moz-animation:lightSpeedIn 1s;
    animation:lightSpeedIn 1s;
    -webkit-transition: all 1s ease;
    -moz-transition: all 1s ease;
    -o-transition: all 1s ease;
}
.une:hover {
    transform-origin:top; /* keeps it on the viewable screen */
    transform:scale(2.5);
} 
```

我认为`transform-origin`and`position`可能是缺失的部分，但我需要看动画才能确定。

动画语法看起来也有点不对劲。[尝试使用正式语法](https://developer.mozilla.org/en-US/docs/CSS/animation)-

```
animation: name duration easing delay iteration-count direction fill-mode; 
```

# jquery - 使用 Jquery 返回 CSS 高度，未计算，但已声明

> ID：16126670
> 
> 赞同：8
> 
> 时间：2013-04-21T00:17:51.620
> 
> 标签：jquery, html, css

我认为这可能是以前版本的 jquery 中的默认值，但是当我调用`.css("height")`and时`.height()`，它返回计算出的高度，这不是我想要的——如果它在 CSS 文件中明确声明，我只想要一个高度值对于那个元素。

就像它没有在任何地方声明一样，也许它`'auto'`有时会像 top 和 left 一样返回......

例如，我的 CSS 如下所示：

```
.element{
    margin-left:5px;
    color:red;
} 
```

`.css("margin-left")`return `"5px"`, while即使没有特别设置也会返回...`.css("height")``20`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:20:00.933

浏览器会自动计算 CSS 高度和宽度。

例如，您可以在 Chrome 开发人员工具 (F12) 的“计算样式”选项卡中看到它们

和文档：

[jQuery.width()](http://api.jquery.com/width/)

> 获取匹配元素集中第一个元素的当前计算宽度或设置每个匹配元素的宽度。
> 
> .css(width) 和 .width() 的区别在于后者返回一个没有单位的像素值（例如，400），而前者返回一个没有单位的值（例如，400px）

但如果你想获得正确的 CSS 值，我建议不要使用 jQuery

如果我们有 HTML：

```
<div id="elem" style="height: auto"></div> 
```

我们可以写JS：

```
$('#elem').get(0).style.height    // "auto" 
```

如果我们有 HTML：

```
<div id="elem"></div> 
```

JS：

```
$('#elem').get(0).style.height    // "" 
```

**通用功能：**

```
var height = function(elem){
      return $(elem).get(0).style.height === "" ? $(elem).height() : $(elem).get(0).style.height;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-11T08:23:24.803

您所要做的就是为`id`元素提供一个，然后尝试以下代码：

```
if (document.getElementById("element").style.height == null || document.getElementById("element").style.height == "") {
  alert("no height");
}else{
  alert(document.getElementById("element").style.height);
}
```

```
.element {
  width: 100%;
  color: red;
  word-break: break-all;
}
```

```
<div id="element" class="element">
  Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis,
  sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus
  elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum.
  Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit
  vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget eros faucibus tincidunt. Duis leo. Sed fringilla mauris sit amet nibh.
  Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc,
</div>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-09T05:56:50.983

您也可以使用类名在 JavaScript 中执行此操作。例如：

```
alert(document.getElementsByClassName("YourClassName")[0].style.height) 
```

它将提醒高度的实际值，而不是返回计算的高度。

# java - 我无法让我的 android 应用程序连接到我的 xampp 服务器上的外部数据库

> ID：16126674
> 
> 赞同：1
> 
> 时间：2013-04-21T00:18:10.197
> 
> 标签：java, android, jdbc, xampp

我一直在尝试制作一个应用程序来连接到在 xampp 服务器上运行的数据库。过去我制作了一个 java 应用程序来执行此操作，我使用 JDBC 连接到数据库。我检查了这是否适用于android，我找到了一个在android上使用JDBC的教程，但它对我不起作用。我另外两次连接数据库的尝试是 HttpURLConnection 和 HttpClient 方法。我通过浏览找到的解决方案尚未解决我的问题。我尝试的两个解决方案是，编辑 xampp httpd-xampp.conf 以允许任何连接。第二个是在 PhpMyAdmin 权限部分为电话添加用户。我不知道我可以尝试哪些其他选择。谁能给我任何关于这个问题的建议。一个普通的java应用程序可以毫无问题地连接到服务器，我也可以在我的手机网络浏览器上访问服务器。只是应用程序无法建立连接。

**编辑**在我在[这里](https://stackoverflow.com/questions/13037730/java-android-asynctask-mysql-connection)找到的一个问题之后。我尝试使用 AsyncTask 使用 JDBC 连接到我的数据库，发布该问题的用户在建立连接时没有遇到问题。所以如果全班，我看不出我的代码在哪里出错了

**应用代码**

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.TextView;

public class ViewCarsEntered extends Activity implements OnTouchListener 
{

private TextView displayCars;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_view_cars_entered);
    displayCars = (TextView)findViewById(R.id.carSpaceDisplay);
    displayCars.setOnTouchListener(this);
}

/**
 * Connect to the database 
 * @return String
 */
private class ConnectToDatabase extends AsyncTask<String,Void,String>
{
    @Override
    protected String doInBackground(String... arg0) 
    {
        String response = " ";
        String total = "";
        int rowCounter = 0;

        try
        {
            Class.forName("com.mysql.jdbc.Driver");
            Connection connection = DriverManager.getConnection("jdbc:mysql://server_ip:3306/dbname", "username", "password");
            Statement statement = connection.createStatement();
            ResultSet resultSet = statement.executeQuery("SELECT VehicleDetected FROM entry");

            while(resultSet.next())
            {
                rowCounter++;
            }

            total = Integer.toString(rowCounter);

            response = " I am connected to the database";       
            Log.d("DebugTag", response);

        }catch(Exception e){
            response = "Couldn't get a connection";
            Log.e("Error_Tag", response);
        }
        return response;
    }

    @Override
    protected void onPostExecute(String result)
    {
        displayCars.setText(result);
    }   
}

/**
 * Constructor for the AsynchronousTask inner Class
 */
public void ConnectToDatabase()
{
     ConnectToDatabase connect = new ConnectToDatabase();
     connect.execute();
}

@Override
public boolean onTouch(View v, MotionEvent event) 
{
    ConnectToDatabase();
    return false;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.view_cars_entered, menu);
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:50:24.867

我让应用程序正常工作。我使用了 HttpClient 方法。我将该代码添加到 AsyncTask 内部类中。在 PHP 端，我没有给出运行服务器的 pc 的 ip，而是使用本地主机。这是下面的代码，希望这对将来的某人有所帮助。

**connect_to_database.php**

```
<?php

//Parameters for connecting to the database
$hostname = "localhost";
$database_name = "dbname";
$username = "user";
$password = "pass";

//Connection String. If it fails causes error message
$connection = mysql_connect($hostname,$username,$password) or trigger_error(mysql_error(),E_USER_ERROR);

//Access the database
mysql_select_db($database_name, $connection);

/*Query to get number of cars and execute the query
 *If there is a problem with the query an error is returned */
$get_number_of_cars = "SELECT VehicleDetected FROM entry ";
$query_runner = mysql_query($get_number_of_cars) or die(mysql_error());
$counter = 0;

while($row = mysql_fetch_array($query_runner))
{
    $counter++;
}

echo $counter;
?> 
```

**ViewCarsEntered.java**

```
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.Activity;
import android.app.ProgressDialog;
import android.graphics.Color;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.TextView;

public class ViewCarsEntered extends Activity implements OnTouchListener
{

private TextView displayCars;
private TextView displaySuggestionMessage;
private HttpPost post;
private HttpResponse httpResponse;
private HttpClient client;
private ProgressDialog dialog = null;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_view_cars_entered);
    displayCars = (TextView)findViewById(R.id.carSpaceDisplay);
    displaySuggestionMessage = (TextView)findViewById(R.id.carSpaceSuggestionsBox);
    displayCars.setOnTouchListener(this);
}

/**
 * Connect to the database 
 * @return String
 */
private class ConnectToDatabase extends AsyncTask<String,Void,String>
{
    @Override
    protected String doInBackground(String... arg0) 
    {
        String serverResponse = " ";

        try
        {
            client = new DefaultHttpClient();
            post = new HttpPost("http://server_ip/folder_for_php_script/connect_to_database.php");
            httpResponse = client.execute(post);

            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            serverResponse = client.execute(post, responseHandler);

        }catch(Exception e){
            serverResponse = "Could not connect to Database";
            Log.e("Error_Tag", e.toString());
        }
        return serverResponse;
    }

    @Override
    protected void onPostExecute(String result)
    {
        displayCars.setText(result);

        int responseCheck = Integer.parseInt(result);

        if( responseCheck <= 7 )
        {
            displayCars.setTextColor(Color.BLACK);
            displaySuggestionMessage.setText("It is ok to park in the main car park");
        }

        else if( responseCheck <= 11)
        {
            displayCars.setTextColor(Color.YELLOW);
            displaySuggestionMessage.setText("You may want to try the B block");
        }

        else if( responseCheck >= 12)
        {
            displayCars.setTextColor(Color.RED);
            displaySuggestionMessage.setText("Consider Alternate Parking");
        }
    }   
}

/**
 * Constructor for the AsynchronousTask inner Class
 */
public void ConnectToDatabase()
{
    ConnectToDatabase connect = new ConnectToDatabase();
    connect.execute();
}

@Override
public boolean onTouch(View v, MotionEvent event) 
{
    ConnectToDatabase();
    return true;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.view_cars_entered, menu);
    return true;
}
} 
```

# nginx - 使用 Sinatra、MiniMagick 和 nginx 缓存生成的图像

> ID：16126677
> 
> 赞同：2
> 
> 时间：2013-04-21T00:18:50.443
> 
> 标签：nginx, imagemagick, sinatra, minimagick, sinatra-assetpack

我正在建立一个占位符图片网站 - 类似于[http://placekitten.com/](http://placekitten.com/)

我有一个使用大图像目录的快速而肮脏的版本，以及一个随机选择图像并将其调整到正确尺寸的 Sinatra 路由。

```
get '/p/:width' do
  width = params[:width].to_i
  path = Dir.glob('raw/top100/*.jpg').shuffle[0]
  image = ImageResizer.new(path)
  image.width= width
  content_type("image/#{image.image_format}")
  image.to_s
end 
```

*   这个 ImageResizer 类[https://gist.github.com/EvilScott/2431343#file-image_resizer-rb](https://gist.github.com/EvilScott/2431343#file-image_resizer-rb)

这可行，但有点糟糕 - 在我链接到它之前让它有点可扩展的最佳方法是什么？我听说过 nginx 缓存，但以前从未这样做过（& 无法看到如何将它与我正在生成的图像相匹配） - 或者当我将图像添加到服务器和缓存那些？

谢谢

# php - 使用 PHP MYSQL 除以计数结果

> ID：16126678
> 
> 赞同：0
> 
> 时间：2013-04-21T00:19:04.083
> 
> 标签：php, mysql, count, divide

我正在尝试除以表中的行数，此时我正在输入要手动除以的值：

```
<?php
$result10 = $result10 * 100 / 10 (<-- Result from count)
?> 
```

我想我需要计算行数并用 $query_result 替换 10 但我已经尝试过这个并且不确定该怎么做以及是否可能？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:45:41.827

作为如何在查询中执行此操作的示例：

```
select result10 / (select count(*) from <yourquery>)
from <your query> 
```

如果您正在做一个简单的平均，那么这可能是最合适的解决方案：

```
select avg(colx)
from t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T00:57:01.093

另一种你可以做到的方式

```
 <?php
define('HOST','hostdetails');
define('USER','userdetails');
define('PASS','passdetails');
define('DB','dbdetails');

$mysqli = new mysqli(HOST,USER,PASS,DB);
$sql = "SELECT COUNT(*) FROM table";
$stmt = $mysqli->prepare($sql);
$stmt->execute();
$rowcount = $stmt->num_rows;
//$result10 -> add your variable for result10 here, however you are generating it...

$result10 = (($result10*100)/$rowcount);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T05:18:03.867

```
$link = mysql_connect("localhost", "mysql_user", "mysql_password");
mysql_select_db("database", $link);

$result = mysql_query("SELECT * FROM my_table", $link);
$num_rows = mysql_num_rows($result);
$result10 = $result10 * 100 / $num_rows (<-- Result from count) 
```

# eclipse - 我可以在同一项目中与其他人同时使用 Java 编程吗？

> ID：16126682
> 
> 赞同：0
> 
> 时间：2013-04-21T00:19:34.573
> 
> 标签：eclipse, java

是否有诸如 eclipse 插件之类的允许代码在服务器上更新和使用的东西，允许我在同一时间与其他人在同一个 Java 项目上工作？为了解释更多，假设我和其他人需要很多游戏角色类，我们想同时编程两个不同的角色来加快速度，这可能没有人在 eclipse 中开发，而其他人在记事本++并将它们加在一起？抱歉，如果已经问过这个问题，我无法向谷歌解释这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T00:21:30.737

是的，它被称为版本控制

链接：

*   [Git](http://git-scm.com)（开源）
*   [CVS](http://www.nongnu.org/cvs/)（开源）
*   [颠覆](http://subversion.tigris.org)（开源

只需用谷歌搜索它们，您就会发现很多关于它们以及如何使用它们的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T00:31:10.203

有许多解决方案可以帮助解决问题的许多方面。正如其他人指出的那样[GIT](http://git-scm.com/)、[SVN](http://subversion.tigris.org/)和其他 [版本控制] 解决方案。

但是，如果您想同时进行编码（就像在字面上一样，就像你们两个人坐在同一台计算机上一样（但当然你们​​在不同的计算机上），那么有像[Saros](http://www.saros-project.org)和[Xpairtise](http://xpairtise.sourceforge.net)这样的解决方案可以插入 eclipse 和帮助您进行结对编程。

看看这些是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T00:22:50.593

当然。使用源代码/版本控制软件，如 SVN。

它在中央存储库上存储和更新代码，并提供对版本控制的附加控制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T03:51:39.917

您还可以尝试使用允许屏幕共享和键盘/鼠标共享的 TeamViewer。

# javascript - Chrome 扩展安装错误信息

> ID：16126692
> 
> 赞同：5
> 
> 时间：2013-04-21T00:21:09.680
> 
> 标签：javascript, google-chrome-extension, manifest

我构建了一个小型 Chrome 扩展程序——它显示了您的 IP 和地理位置信息。我对其进行了多次测试，将其打包（使用 Grunt）并上传到 Chrome 网上商店。我多次验证生成的 zip 文件包含应用程序所需的所有文件 + 清单。

然后我删除了我的本地版本，并尝试从网上商店安装。即使在刷新并重新启动浏览器几次之后，我仍然会收到此错误：

> “将此项目添加到 Chrome 时出现问题。请刷新页面并重试。”

![在此处输入图像描述](https://i.stack.imgur.com/3lcSy.png)

如何调试/解决此问题？

*   我的扩展代码非常简单，实际上是在[GitHub 上](https://github.com/TravelingTechGuy/myipextension)打开的。
*   清单文件可[在此处](https://github.com/TravelingTechGuy/myipextension/blob/master/app/manifest.json)获得。
*   该扩展程序可在[此处](https://chrome.google.com/webstore/detail/my-ip/lejbibljgiojigkpkhmdgdhmiaddgidd?hl=en-US&gl=US)的 Chrome 商店中找到。

**更新**：

查看 JS 控制台，每次点击安装按钮时都会看到一个错误：

> webstorePrivate.beginInstallWithManifest3：清单无效

没有更多信息，对我来说清单文件看起来不错（并且在本地加载时可以工作）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T01:33:55.057

好的，花了一段时间，但我找到了罪魁祸首并修复了它。我使用 Yeoman 和[Generator-Chrome-Extension](https://github.com/yeoman/generator-chrome-extension)来引导扩展。Gruntfile.js 中的一项任务如下所示：

```
grunt.registerTask('manifest', function() {
        var manifest = grunt.file.readJSON(yeomanConfig.app + '/manifest.json');
        //manifest.background.scripts = ['scripts/background.js'];
        grunt.file.write(yeomanConfig.dist + '/manifest.json', JSON.stringify(manifest, null, 2));
    }); 
```

正如您在第三行（已注释）中看到的那样，即使您不需要，该任务也会注入一个 background.js 脚本。此外，如果您像我一样使用背景**页面**，这会使清单无效。

出于某种原因，它将在本地工作，而不是在商店中工作。一旦我评论了该行，清单就有效，并且扩展可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-25T19:22:50.733

我有同样的问题。我删除了：

```
"app": {
    "urls": [
    ], 
```

从 Manifest.json 文件中，它可以工作。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-07T06:07:32.753

我遇到了同样的问题，我使用[代理](https://chrome.google.com/webstore/detail/browsec/omghfjlpggmjjaagoclmmobgdodcjboh?hl=en)登录并解决了问题。

试试我猜的代理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-19T01:32:36.267

> 请尝试注销/退出网上应用店并重新登录。

来源：[https ://productforums.google.com/forum/#!topic/chrome/vFBudQDy5UE](https://productforums.google.com/forum/#!topic/chrome/vFBudQDy5UE)

# c# - 如何在 Word 2010 插件中添加鼠标悬停效果

> ID：16126697
> 
> 赞同：1
> 
> 时间：2013-04-21T00:21:55.397
> 
> 标签：c#, ms-word, ms-office, office-addins

我希望在 word 插件的字体悬停菜单底部添加文本：

![这是我要使用的菜单](https://i.stack.imgur.com/5ne44.jpg)

但我找不到有关此特定菜单的任何文档。

**添加**

我的目标是在选定文本上悬停时获得鼠标悬停效果，并且由于选择不提供任何事件，我认为迷你菜单可能是我的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T00:56:42.770

这就是所谓的`Word Mini Toolbar`（命名对于获得正确的搜索结果很重要 - 提示，总是找到足够的名称:)。

无论如何，我认为您不走运，我从未见过与此相关的任何内容（我知道如何更改上下文菜单，这没问题）。坦率地说，这似乎不太可能，因为这似乎是一个“可爱的小”工具栏，专门格式化以适应小格式、大小/外观。

检查此 MS 链接[Developer Overview of the User Interface for the 2007 Microsoft Office System](http://msdn.microsoft.com/en-us/library/aa338198.aspx)

它里面的某个地方说

> 您不能以编程方式修改浮动工具栏。

这个问题/答案证实了几乎所有的
[MS Word 插件，添加了一个在右键单击选定文本时弹出的按钮](https://stackoverflow.com/questions/684438/ms-word-plugin-adding-a-button-which-pops-up-on-right-click-on-selected-text/715944#715944)

# list - Sencha Touch - 动态设置存储代理 url 并在列表项点击时加载存储

> ID：16126699
> 
> 赞同：3
> 
> 时间：2013-04-21T00:22:34.680
> 
> 标签：list, dynamic, extjs, sencha-touch, store

我是 Sencha 的新手，虽然我已经完成了我需要的大部分工作，但我正在努力完成一项特定的任务——当用户点击一个项目时动态设置商店的代理 URL，并加载/服务商店一个列表。

我在这里找到了使用 setProxy 以各种方式解决此问题的答案，并且代码看起来很简单，但我只是无法弄清楚如何将任何建议的代码片段成功地集成到我自己的代码中。因此，我在下面包含了我的代码，如果有人能准确地告诉我我需要包含什么以及在哪里包含，我将不胜感激。

原始记录列表 (#grList) 保存在导航视图 (Main.js) 中。

```
Ext.define('Groups.view.Main', {
extend: 'Ext.navigation.View',
xtype: 'main',
requires: [
],
config: {
    id: 'Main',
    items: [
    {
            xtype: 'tabpanel',
            title: 'User Groups',
            ui: 'light',
            layout: {
                animation: 'fade',
                type: 'card'
            },
            tabBar: {
                docked: 'top',
                layout: {
                    pack: 'center',
                    type: 'hbox'
                }
            },
            items: [
                {
                    xtype: 'list',
                    title: 'News',
                    id: 'rssList',
                    itemTpl: [
                        '{title}<br/><small>{contentSnippet}'
                    ],
                    store: 'Feeds'
                },
                {
                    xtype: 'list',
                    title: 'Profiles',
                    id: 'grList',
                    itemTpl: [
                        '<img class="photo" src="{grCountryFlagURL}" align="center" width="40" height="40"/>{grHandle}<br/><small>{grCountry}</small>'
                    ],
                    store: 'Groups'
                },
                {
                    xtype: 'carousel',
                    title: 'About',
                    items: [
                        {
                            xtype: 'component',
                            html: '1'
                        },
                        {
                            xtype: 'component',
                            html: '2'
                        }
                    ]
                }
            ]
        }

    ]
} 
```

});

在点击记录项时，控制器 (MainController.js) 会将详细信息面板 (GroupDetail.js) 推送到导航视图。

```
Ext.define('Groups.controller.MainController', {
extend: 'Ext.app.Controller',

config: {
    refs: {
        main: '#Main'
    },

    control: {
        "#grList": {
            itemtap: 'showGRDetail'
        },
        "#rssList": {
            itemtap: 'showRSSDetail'
        }
    }
},

showGRDetail: function(dataview, index, target, record, e, eOpts) {
    var GRdetail = Ext.create('Groups.view.GroupDetail');
    this.getMain().push(GRdetail);
    GRdetail.setData(record.data);
    GRdetail.getAt(0).setData(record.data);
    GRdetail.getAt(1).setData(record.data);
},
showRSSDetail: function(dataview, index, target, record, e, eOpts) {
    var RSSdetail = Ext.create('Groups.view.NewsDetail');
    this.getMain().push(RSSdetail);
    RSSdetail.setData(record.data);
} 
```

});

详细信息面板包含两个选项卡。第一个是显示记录数据的简单容器，并且工作正常。第二个（#rssGroup）是一个列表，我想在其中显示特定于被点击的记录项的 RSS 提要，但这是我无法开始工作的地方。

```
Ext.define('Groups.view.GroupDetail', {
extend: 'Ext.tab.Panel',

config: {
    id: 'GroupDetail',
    items: [
        {
            xtype: 'container',
            padding: 30,
            title: 'Profile',
            iconCls: 'search',
            id: 'grProfile',
            tpl: [
                '<img class="photo" src="{grCountryFlagURL}" align="center" width="80" height="50"/>{grHandle}<br/><small>{grProfile}</small>'
            ],
            layout: {
                type: 'fit'
            }
        },
        {
            xtype: 'list',
            title: 'News',
            id: 'rssGroup',
            iconCls: 'info',
            itemTpl: [
            '{title}<br/><small>{contentSnippet}'
            ],
            store: 'GroupNews'
                }
    ],
    tabBar: {
        docked: 'bottom',
        layout: {
            pack: 'center',
            type: 'hbox'
        }
    }
} 
```

});

RSS 列表使用商店 (GroupNews.js) 和模型 (Feed.js)，如果我在商店上设置 autoload=true 并硬编码静态代理 URL，则工作正常，但如果我关闭自动加载并删除 prxy url ，我在动态设置、加载和服务这家商店的实验都没有奏效。

```
Ext.define('Groups.store.GroupNews', {
extend: 'Ext.data.Store',
alias: 'store.GroupNews',

requires: [
    'Groups.model.Feed'
],

config: {
    autoLoad: false,
    model: 'Groups.model.Feed',
    storeId: 'GroupNews',
    proxy: {
        type: 'jsonp',
        url: '',
        reader: {
            type: 'json',
            rootProperty: 'responseData.feed.entries'
        }
    }
} 
```

});

NB。我没有在上面的代码示例中包含任何动态设置/加载 GroupNews 存储的尝试，这正是我到目前为止所做的工作。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T08:39:00.060

你试过这个吗？--

```
var group_store = Ext.getStore("GroupNews");
group_store.getProxy().setUrl('new_url_here');    
group_store.load(); 
```

并再次将商店分配给您的列表-

```
your_list.setStore(group_store); 
```

如果存储代理 url 已更改并已加载，则您可以使用`group_store.getCount()`方法查看项目数，以确保您拥有正确的数据。

# objective-c - Objective C 组件SeparatedByCharactersInSet

> ID：16126702
> 
> 赞同：3
> 
> 时间：2013-04-21T00:23:00.600
> 
> 标签：objective-c

我正在使用`componentsSeparatedByCharactersInSet`Objective C 中的方法从数组中读取数据。当我的数组包含多个带有分隔符的参数时，它可以正常工作，但是当我的数组只有一个参数时，该方法什么也不返回。例如：

```
array = [x*y*z];

newAray = [array componentsSeparatedByCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"*"]];

//returns newArray = [x,y,z] - this is good

array = [x];

newAray = [array componentsSeparatedByCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"*"]];

//returns nothing - this is bad 
```

有没有办法解决这个问题，所以第二个例子会在`newArray = [x]`不改变第一个数组格式的情况下返回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T00:25:24.490

" `componentsSeparatedByCharactersInSet`" 是存在于 " " 中的一个方法`NSString`，所以为了让你能够使用它，你的 " `array`" 对象需要是一个 " `NSString`" 对象。

我的解决方案是在 NSString 上添加一个类别，该类别返回由字符串中的字符分隔的组件数组，或者如果该调用返回的数组为空则返回整个字符串（如果没有匹配项允许分隔组件，则会发生这种情况） .

这是类别在 NSString 上的样子：

```
@interface NSString (AlwaysReturnSomething)

- (NSArray *) alwaysReturnSomethingForComponentsSeparatedByCharactersInSet: (NSCharacterSet *) characterSet;

@end

@implementation NSString (AlwaysReturnSomething)

- (NSArray *) alwaysReturnSomethingForComponentsSeparatedByCharactersInSet: (NSCharacterSet *) characterSet
{
    NSArray * arrayToReturn = [self componentsSeparatedByCharactersInSet: characterSet];
    if(arrayToReturn == NULL) || ([arrayToReturn count] == 0)
    {
        arrayToReturn = [NSArray arrayWithObject: self];
    }
    return(arrayToReturn);
}

@end 
```

# python - 将文件列表连接成 Python 中的字符串列表

> ID：16126704
> 
> 赞同：1
> 
> 时间：2013-04-21T00:23:09.950
> 
> 标签：python, file, concatenation

我正在尝试创建一个类对象，其构造函数接收文件列表，将每个文件转换为字符串列表（每行一个）并将所有列表连接在一起并存储它。此类还包含一个成员函数，它从列表中输出随机行

```
class randline:
    def __init__(self, filename = [] ):
        #def __init__(self, filename = [] , *args):

        #for i in range(len(filename)):
        self.lines = []

        for path in filename:
           with open(path, 'r') as f:
                self.lines + f.readlines()
                f.close()

    def chooseline(self):
      if self.lines:
        return random.choice(self.lines)

def main():
#...
    try:
        generator = randline(args)
        for index in range(numlines):
            sys.stdout.write(generator.chooseline())
    except IOError as (errno, strerror):
        parser.error("I/O error({0}): {1}".
                     format(errno, strerror)) 
```

这会产生错误消息：

```
Traceback (most recent call last):
  File "./1randline.py", line 59, in <module>
    main()
  File "./1randline.py", line 53, in main
    sys.stdout.write(generator.chooseline())
TypeError: expected a character buffer object 
```

但是chooseline() 从连接的文件字符串列表中生成一个字符串，不是吗？所以我很难弄清楚问题是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:26:00.897

应该

```
self.lines += f.readlines() # notice the += 
# self.lines.extend(f.readlines()) is equivalent 
```

但是，您可以仅用`fileinput`于此

```
import fileinput
lines = list(fileinput.input(paths)) 
```

# java - JavaFx - 组之间元素的转换

> ID：16126705
> 
> 赞同：0
> 
> 时间：2013-04-21T00:23:22.243
> 
> 标签：java, user-interface, javafx

我正在开发一个 JavaFx 应用程序。我有一个组，其中有两个矩形。如果我为一个矩形进行转换，例如我想将第一个矩形（x 坐标）移动到第二个矩形，该组将自动调整大小，并且当转换结束时，两个矩形都将位于中心。你知道怎么解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:36:16.343

从任何“自组织”组件（例如垂直或水平框、flowPanes、gridPanes）中删除这两个矩形，如果您仍想对它们进行分组，请将它们放入常规 Pane 或 AnchorPane 中。或者你可以尝试使用最大和最小宽度/高度，也许将 resizeable 设置为 false。但这些都是猜测，希望对您有所帮助。

# backbone.js - 是否有一种主干方式来格式化视图中的数字？

> ID：16126706
> 
> 赞同：6
> 
> 时间：2013-04-21T00:23:25.417
> 
> 标签：backbone.js, numbers, format, decimal, points

是否有一种特殊的主干方式来格式化数字？我想用两个小数点显示它们，比如“2”变成“2.00”。

这应该在模板中完成吗？

这是模板中的一个示例：

```
<td><input value="<%- price %>"></td> 
```

在 Angular.js 中，您可以使用表达式和过滤器来实现这一点，这在主干中如何？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-02T16:55:26.323

使用内置的 toFixed 方法。

```
<td><input value="<%- price.toFixed(2) %>"></td> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T06:03:46.547

Backbone 是一个 MVC 库，因此它的重点是应用程序的 MVC 组件。格式化确实是您想要查看另一个库的内容。

一种选择是[Underscore.String](https://github.com/epeli/underscore.string#readme)库。如果您使用 Backbone，那么您也在使用 Underscore，因为 Backbone 需要它。Underscore.String 是 Underscore 的一个子库，它添加了许多格式化函数，包括一个可以像这样使用的数字格式化函数：

```
_.numberFormat(1000, 2) // == "1,000.00" 
```

# java - Java - Servlet，在整个项目中携带登录信息（会话 bean）

> ID：16126709
> 
> 赞同：1
> 
> 时间：2013-04-21T00:23:38.700
> 
> 标签：java, jsp, session, netbeans, javabeans

我有一个登录 servlet，它工作正常。但我希望多个 servlet 能够访问 userID、valid 和 FacultyCB 值以执行不同的功能。我知道最好的方法是使用会话，请提供一个编写示例，并使用我的 Login Servlet 和 ViewRegisteredCoursesServlet 从会话中调用。如果一个对象（bean）存储在：

```
session.setAttribute("currentSessionUser", user); 
```

如何在 servlet 中从中获取不同的值？前任。用户 ID 和教员CB。

```
HttpSession session = request.getSession();
session.getAttribute("currentSessionUser"); 
```

此外，据我了解，需要转发会话（这不是一个选项，因为单击哪个导航栏会调用 diff servlet）。正确的？

登录Servlet：

```
 LoginBean user = new LoginBean();

    try {
        String checkBox = request.getParameter("facultyCB");

        user.setID(request.getParameter("id"));
        user.setPassword(request.getParameter("password"));

        if (checkBox != null) {
            user.setFacultyCB(true);
        } else {
            user.setFacultyCB(false);
        }

        user = LoginDAO.login(user);

        if (user.isValid()) {
            HttpSession session = request.getSession(true);
            if (checkBox != null) {
                user.setFacultyCB(true);
            } else {
                user.setFacultyCB(false);
            }

            session.setAttribute("currentSessionUser", user);
            response.sendRedirect("success_login.jsp"); //logged-in page

        } else {
            response.sendRedirect("invalid_login.jsp"); //error page 
        } 
```

查看RegisteredCoursesServlet：

```
String userID = "100000001";

    //Created code to determine term based on course dates
    String year = "2012";
    String term = "FALL";

    try {

        List<RegisteredCoursesBean> registeredCoursesArray = ViewRegisteredCoursesDAO.viewRegisteredCourses(userID, year, term);

        request.setAttribute("registeredCoursesBean", registeredCoursesArray);

        request.getRequestDispatcher("registered_courses.jsp").forward(request, response);

    } catch (Throwable theException) {
        System.out.println(theException);
    } 
```

登录豆：

```
private String id;
private String password;
private boolean facultyCB;
public boolean valid; 
```

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:18:07.567

如果你想存储一个 bean 并在其他 servlet 中访问它。您可以做的最好的方法是将该 bean 存储在会话对象中。

```
HttpSession session = request.getSession();
session.setAttribute("BEANNAMEHERE", yourBeanObjectHere); 
```

在其他 servlet 中访问它

```
HttpSession session = request.getSession();
YourBeanObject myBean =  (YourBeanObjectClass) session.getAttribute("BEANNAMEHERE"); 
```

**旁注** 我认为将用户登录信息存储在会话中并不是一个好主意，也许只是存储他的 ID 并使用该 ID 从数据库中检索他的数据。

# python - Django 独立数据库脚本 - 连接太多错误

> ID：16126711
> 
> 赞同：0
> 
> 时间：2013-04-21T00:23:48.333
> 
> 标签：python, mysql, django, orm

我不知道在独立脚本中保存或查询 django 对象的约定，因此下面的代码中可能存在一些明显的错误。

几乎，该脚本是一个独立的 .py 文件，它将一些模型保存到 MySQL 数据库中。

在此脚本之前，我调用了 export DJANGO_SETTINGS_MODULE = App.settings 如果这有任何改变。

这是脚本：

```
 from Model.models import Model

    for a in stuff:
        Model(a.property, a.property, a.property).save() 
```

也许一些相关的提示，我使用的格式

```
for model in models:
    model.save() 
```

之前很多次。他们工作了。但是，它们都不是独立的脚本，它们都在视图中。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:01:03.697

尝试编写[管理命令](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)来避免这种情况。当 ORM 没有正确设置并且每个 save() 都会导致新的数据库连接时，可能会发生这种情况。

# audio - MP3 样本大小？

> ID：16126716
> 
> 赞同：2
> 
> 时间：2013-04-21T00:24:25.790
> 
> 标签：audio

我正在尝试编写 ac# 程序，该程序使用 .wav 和 .mp3 等音频文件执行**隐写术。**.wav 文件样本大小很容易计算，但我很难弄清楚如何计算**MP3 文件的样本大小**。

有人可以提供一个公式来计算 MP3 文件的样本大小，即“**每个样本的比特**”、“**比特深度**”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:45:24.667

听起来您正在寻找 MP3 将解码到的 PCM 音频的实际位深度。不幸的是，这取决于记录的材料。

MP3 不使用硬设置的位深度。它在内部使用浮点样本。由解码器选择输出位深度。对于大多数节目材料，这将是 16 位的。

# javascript - 计算的百分比宽度

> ID：16126719
> 
> 赞同：0
> 
> 时间：2013-04-21T00:24:44.750
> 
> 标签：javascript, jquery, css, percentage

我基本上拥有的是在基于百分比的布局上并排站立的两列。左栏**总是 175px 宽**。右列是**可用宽度的剩余部分**。当然，由于浏览器窗口可以调整大小，所以右列的宽度会发生变化。是否有 Javascript 或 Jquery 脚本可用于将左列设置为 175px 宽，然后计算浏览器窗口宽度的剩余部分以应用于右列？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:32:44.833

你可以使用简单的 div / css 吗？

```
<div id="columns">
    <div id="static_left" style="float:left;width:175px;"></div>
    <div id="remaining_right" style="float:left;"></div>
    <div style="clear:both;"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T00:53:51.823

一个非常简单的示例来演示 CSS 的使用（请参阅[此处](http://jsfiddle.net/fxFFs/3/)的工作 JSFiddle ）：

```
<div id="columns" style="width: 100%;">
    <div id="left_col" style="float:left;width:175px; height: 200px; border: 1px solid black;">Left column</div>
    <div id="right_col" style="height: 200px; border: 1px solid red;">Remaining column</div>
</div> 
```

# jquery - 表格输入值的加法、减法和乘法

> ID：16126720
> 
> 赞同：0
> 
> 时间：2013-04-21T00:24:45.723
> 
> 标签：jquery, forms, input

基于这里的这篇文章，[JQuery 将表行的输入值相乘](https://stackoverflow.com/questions/11789683/jquery-multiply-input-values-of-table-rows)，我使用相同的表单字段名称并添加了税字段和折扣字段。

```
 <tr class="txtMult">
        <td>
            <input name="txtEmmail" class="val1"  />
        </td>
        <td>
            <input name="txtEmmail" class="val2"/>
        </td>
        <td>
            <span class="multTotal">0.00</span>
        </td>
    </tr>
        <tr class="txtMult">
        <td>
            <input name="txttax" class="val1"  />%
        </td>
        <td>

        </td>
        <td>
            <span class="multTax">0.00</span>
        </td>
    </tr> 
```

这个税需要乘以，比如我输入 10 (%)

```
var $tax = ($val1 * 1) * ($total * 1)/100;
$('.multTax', this).text($tax); 
```

然后将其作为税额我将 txttax 类值更改为 val3 并添加上面的 jquery

再次，我需要减去折扣，我尝试了所有可能的方法，但没有运气。

这是功能（已编辑）

```
$(document).ready(function () {
   $(".txtMult input").keyup(multInputs);
   function multInputs() {
       var mult = 0;
       $("tr.txtMult").each(function () {
           var $val1 = $('.val1', this).val();
           var $val2 = $('.val2', this).val();
           var $val3 = $('.val3', this).val();
           var $total = ($val1 * 1) * ($val2 * 1);
           var $tax = ($val1 * 1) * ($total * 1)/100;
           $('.multTotal', this).text($total);
           $('.multTax', this).text($tax);
           mult += $total;
       });
       $("#grandTotal").text(mult);
   }
}); 
```

请指教。（花了一整天）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T00:50:02.607

[**jsFiddle 解决方案**](http://jsfiddle.net/KCjHb/1/)

HTML

```
 <table>
 <tr class="txtMult">
    <td>
        <input name="txtEmmail" class="val1"  />
    </td>
    <td>
        <input name="txtEmmail" class="val2"/>
    </td>
    <td>
        <span class="multTotal">0.00</span>
    </td>
</tr>
    <tr class="txtMult odd">
    <td>
        <input name="txttax" class="val3"  />%
    </td>
    <td>

    </td>
    <td>
        <span class="multTax">0.00</span>
    </td>
 </tr>
 </table>

 <span id="grandTotal"></span> 
```

JS

```
 $(document).ready(function () {

   $("input").keyup(multInputs);
   function multInputs() {
       var mult = 0;
       $("tr.txtMult").not('.odd').each(function () {           
           var $val1 = $('.val1', this).val();
           var $val2 = $('.val2', this).val();
           var $val3 = $('.val3', $(this).next()).val();

           var $total = $val1 * $val2;
           var $tax = $val3 * ($total / 100);

           $('.multTotal', this).text($total);
           $('.multTax', $(this).next()).text($tax);

           mult += $total - $tax;
       });

       $("#grandTotal").text(mult);
   }
}); 
```

# sql - 如何在特定列值中明确提及 NONE？

> ID：16126721
> 
> 赞同：0
> 
> 时间：2013-04-21T00:25:03.800
> 
> 标签：sql, oracle, oracle11g

以下查询：

```
SELECT e.ename , e.empno, m.ename as manager
FROM emp e LEFT OUTER JOIN emp m 
ON e.mgr = m.empno; 
```

列出员工姓名、员工编号和他们的经理，并列出没有任何经理的员工。就我而言，总统没有任何经理。如果是总裁雇员，我想在经理列中提到 NONE，因为他没有任何经理。如何在上述查询中实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T00:27:42.223

您可以将 替换`null`为`none`using `COALESCE`：

```
SELECT e.ename, 
  e.empno, 
  coalesce(m.ename, 'none') as manager
FROM emp e 
LEFT OUTER JOIN emp m 
  ON e.mgr = m.empno; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/77c49/1)

# php - 如何强制 curl 等待

> ID：16126725
> 
> 赞同：0
> 
> 时间：2013-04-21T00:25:47.367
> 
> 标签：php, curl, timing

我正在从事一个大学经济学项目，我试图从许多来源中收集少量数据。我的代码如下所示：

```
<?php
$ca = curl_init ("http://www.website.com/page.aspx?part1=1&part2=2");
curl_setopt ($ca, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ca, CURLOPT_FOLLOWLOCATION, true);
$data = curl_exec ($ca);
echo $data;
?> 
```

它适用于某些站点，而在其他站点上则失败。问题是 curl 在某些情况下不会“等待”页面完成加载。这些页面的行为有点像 kayak.com，页面会随着时间的推移而更新，然后在一段时间后完成。我怎样才能让 curl 等待这种事情结束？谢谢！

# c - 将 system() 调用执行的命令的输出复制到 char 数组

> ID：16126727
> 
> 赞同：2
> 
> 时间：2013-04-21T00:26:13.390
> 
> 标签：c, linux, datetime

是否可以复制`system()`Linux 上函数上使用的命令的输出？例如，如果我跑

```
#include <stdlib.h>

int main(int argc,char *argv[]){
    char date[8]; //e.g., 20130421 yyyymmdd
    char time[4]; // e.g., 0204 hhmm
    system("ntpdate");
    return 0;
} 
```

它输出：

`21 Apr 02:12:56 ntpdate[32680]: no servers can be used, exiting`

是否可以将输出复制到字符串？如何将日期和时间信息复制到 char 数组，例如`char *date`；`char *time`在 C 上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T00:28:42.847

`system`不允许这样的事情，你必须使用`popen("ntpdate", "r")`，它返回一个`FILE *`你可以从中读取命令输出的。

# ruby-on-rails - 仅添加设计 :confirmable 到模型

> ID：16126728
> 
> 赞同：1
> 
> 时间：2013-04-21T00:26:14.483
> 
> 标签：ruby-on-rails, ruby, devise, devise-confirmable

我需要向 Rails 应用程序中的模型添加确认电子邮件功能，但仅此而已。它不是一个用户模型，它是不可验证的。

我添加`devise :confirmable`到模型中，并运行迁移：

```
class AddConfirmableToProjects < ActiveRecord::Migration
  def up
    add_column :projects, :confirmation_token, :string
    add_column :projects, :confirmed_at, :datetime
    add_column :projects, :confirmation_sent_at, :datetime
    add_index :projects, :confirmation_token, :unique => true
  end

  def down
    remove_column :projects, :confirmation_token, :confirmed_at, :confirmation_sent_at
  end
end 
```

但是当我创建一个新项目时，我得到：`Could not find a valid mapping for #<Project...`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:52:59.340

将 :confirmable 添加到不是您的用户模型的模型听起来有点奇怪。你确定吗？

> ```
> # Confirmable is responsible to verify if an account is already confirmed to
> # sign in, and to send emails with confirmation instructions. 
> ```

如果**是**，这是运行规范/测试后返回的错误吗？如果您使用 RSpec 运行 FactoryGirl，请尝试添加`config.cache_classes = true`test.rb 文件。这有点阴暗，但看起来是唯一的解决方案。

如果**没有**，请提供更多代码（模型、控制器、视图）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T13:05:27.337

是的，我们可以为任何型号设置可确认的。以下是执行此操作的步骤。假设我有模型 a `Invitation`：

1.  添加`devise :confirmable`到`Invitation`
2.  这个模型应该有属性`:email`
3.  使用以下列创建迁移：

    ```
    t.string   "email"
    t.string   "confirmation_token"
    t.datetime "confirmed_at"
    t.datetime "confirmation_sent_at" 
    ```

4.  创建一个需要扩展的控制器`Devise::ConfirmationsController`。在该控制器中添加以下代码：

    ```
    def create
      self.resource = resource_class.send_confirmation_instructions(params[resource_name])
      if successful_and_sane?(resource)
        respond_with({}, :location => root_url)
      else
        # code your logic
      end
    end

    def new; end

    def show; end 
    ```

    *   `confirmation_instruction.html.erb`在“app/views/devise/mailer/”下创建一个电子邮件视图

    *   以下行将在您的电子邮件中创建确认 URL：`<%= confirmation_url(@resource, :confirmation_token => @resource.confirmation_token) %>`

    *   现在创建您的模型“邀请”的新记录`Invitation.create(:email => params[:email]`

    *   现在成功创建后，记录将保存在数据库中，电子邮件也将发送到该电子邮件。

# python - 直接调用 __init__ 的目的是什么？

> ID：16126734
> 
> 赞同：9
> 
> 时间：2013-04-21T00:27:16.513
> 
> 标签：python, init

我很难弄清楚我遇到的一些代码的目的。

代码有一个 class `Foo`，它有一个`__init__`接受多个参数的方法。根据我目前对 Python 的了解，通过调用`Foo('bar')`，它会将此字符串作为参数传递给`__init__`（我认为它应该相当于构造函数）。

但是我遇到的问题是我正在查看的代码是`Foo.__init__('bar')`直接调用的。这样做的目的是什么？我几乎觉得我在背后失去了一些其他的目的`__init__`。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-21T00:31:39.790

当您实例化一个类时，该`__init__()`方法会为您调用。但是，`__init__()`父类中的方法不会被自动调用，所以如果你想扩展它的功能，你需要直接调用它：

```
class A:

     def __init__(self, x):
          self.x = x

class B(A):

     def __init__(self, x, y):
          A.__init__(self, x)
          self.y = y 
```

注意，上面的调用也可以使用[*super*](http://docs.python.org/3/library/functions.html#super)编写：

```
class B(A):

     def __init__(self, x, y):
          super().__init__(x)
          self.y = y 
```

该方法的*目的*是`__init__()`初始化类。它通常负责填充实例变量。因此，您希望为`__init__()`类层次结构中的所有类调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T00:29:29.870

Python 允许您直接调用构造函数 ( `__init__`)。通过调用`Foo.__init__(obj, 'bar')`，您正在对`obj`

请参阅此代码：

```
class Foo:
    def __init__(self, s):
        self.s = s

f = Foo('abc')
print(f.s) # prints 'abc'
Foo.__init__(f, 'def')
print(f.s) # prints 'def' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T00:31:14.170

是 - 当继承`__init__()`父类​​的类调用时。AFAIK，这是唯一有效的`__init__()`显式调用情况。

# ruby-on-rails - Rails - 仅在显示特定页面时呈现部分

> ID：16126738
> 
> 赞同：0
> 
> 时间：2013-04-21T00:27:29.640
> 
> 标签：ruby-on-rails, ajax, partial

我有一个使用 Ajax 的应用程序，这很有帮助，因为每次用户单击链接时都不必刷新整个页面。

在 application.html.erb 文件中我有：

```
<body>
  <%= render :partial => 'layouts/user_page_with_map' if @show_map %> 

  <div class ='page-content'>     
     <%= content_for?(:body) ? yield(:body) : yield %>
  </div>

</body> 
```

我的控制器中的 Show 方法是：

```
 def show  
    @show_map = true  
    @review = Review.new
    @reviews = @user.reviews
  end 
```

问题是部分内容一直停留在我的页面上——收益内容出现在其下方。因此，如果一个人点击“联系我们”或“关于我们”或其他任何内容，它会出现在地图内容下方，即使它与“联系我们”或“关于我们”无关。

我远非 Ajax 专家——得到了很多帮助，但它在消除需求方面非常有用——希望如此！- 对于所有这些页面重新加载。有没有办法对其进行编码，以便仅在单击的链接激活“显示”页面时才能看到部分内容？任何其他相关建议将不胜感激，谢谢。

克里斯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T01:53:18.623

您可以在收到页面内容后，在 ajax 方法中将其截断。我假设您正在使用 jQuery：

```
$.ajax({
  type: "GET",
  #...
  success: function(data) {
    $(".page-content").replaceWith($(data).find(".page-content"));
  }
}); 
```

我的意见，它是你最好的方式。在这种情况下，您的后端并不关心“是否应该使用布局进行渲染”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-23T00:14:12.397

假设您的控制器被调用`FooController`，而您通过 Ajax 调用的操作是`bar`. 以下是一个合适的解决方案。

**配置/路由.rb：**

```
get 'bar', to: 'foos#bar' 
```

**应用程序/控制器/foos_controller.rb：**

```
class FoosController < ApplicationController
    layout false, only: [:bar]                    # <-- layout false is key

    def bar
        @results = Foo.get_results(bar_params)
    end

private

        def bar_params
            params.permit(:utf8, :query, :attribute1, :attribute2)
        end
end 
```

**应用程序/视图/foos/bar.html.erb：**

```
<% @results.each do |result| %>
    <p><%= result.inspect %></p>
<% end %> 
```

# java - JTabbedPane showing Blank in GUI

> ID：16126739
> 
> 赞同：1
> 
> 时间：2013-04-21T00:27:36.160
> 
> 标签：java, swing, jtabbedpane

I had some Java GUI code already, but then decided I wanted to wrap the whole thing in a JTabbedPane, as I have other GUI stuff that will go in other tabs.

I have followed the [tutorials here](http://goo.gl/95b1f), but when I run my GUI, all I see is a blank JFrame!

![enter image description here](https://i.stack.imgur.com/oevA5.png)

How can I get my JTabbedPane to show? Here is the GUI initialization code:

```
/**
 * Create the frame.
 * @param The RMC.
 */
public RMCGUI(final RMCServant r0) {
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setTitle("Regional Monitoring Centre " + "[" + r0.rmcid() + "]");
    lmsPanels = new HashMap<String, LMSPanel>();
    rmc = r0;
    setBounds(100, 100, 450, 300);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(15, 15, 5, 15));
    setContentPane(contentPane);
    contentPane.setLayout(new BorderLayout(0, 0));
    JTabbedPane contentTabs = new JTabbedPane();
    ImageIcon monitorTab = createImageIcon("/images/panel.png", "An Icon of a generic panel.");

    final JPanel geoCoveragePanel = new JPanel();
    JScrollPane jspane = new JScrollPane(geoCoveragePanel);
    jspane.setBorder(BorderFactory.createEmptyBorder());
    contentPane.add(jspane);
    geoCoveragePanel.setLayout(new GridLayout(1, 1, 5, 5));
    geoCoveragePanel.setBorder(new TitledBorder("Geographical Coverage"));
    final JPanel paddedPanel = new JPanel(new GridLayout(0, 2, 5, 5));
    paddedPanel.setBorder(BorderFactory.createEmptyBorder(20, 20, 20, 20));
    geoCoveragePanel.add(paddedPanel);

    JPanel buttonsPanel = new JPanel(new FlowLayout(FlowLayout.TRAILING));
    contentPane.add(buttonsPanel, BorderLayout.SOUTH);

    JButton btnRegisterLms = new JButton("Register LMS");
    btnRegisterLms.setFocusPainted(false);
    final JButton btnRegisterSensor = new JButton("Register Sensor");
    btnRegisterSensor.setVisible(false);
    btnRegisterSensor.setFocusPainted(false);
    buttonsPanel.add(btnRegisterLms);
    buttonsPanel.add(btnRegisterSensor);

    btnRegisterLms.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent arg0) {
            String lmsid = JOptionPane.showInputDialog("Please enter the LMS ID name below.");
            System.out.println(lmsid);
            if(lmsid != null)
            {
                lmsid = lmsid.toUpperCase();
                if(rmc.lmsExists(lmsid))
                {
                    rmc.registerLMS(lmsid);
                    paddedPanel.add(createNewLMSPanel(lmsid));
                    //SwingUtilities.getWindowAncestor(paddedPanel).pack();

                    if(lmsPanels.size() != 0)
                    {
                        btnRegisterSensor.setVisible(true);
                    }
                    paddedPanel.revalidate();
                } else {
                    JOptionPane.showMessageDialog(paddedPanel, "Unable to Find LMS Device with ID: " + lmsid);
                }
            }
        }
    });

    btnRegisterSensor.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            JTextField lmsField = new JTextField(5);
            JTextField zoneField = new JTextField(5);
            JTextField sensorField = new JTextField(5);
            JPanel inputPanel = new JPanel();
            inputPanel.setLayout(new BoxLayout(inputPanel, BoxLayout.Y_AXIS));
            inputPanel.add(new JLabel("LMS ID:"));
            inputPanel.add(lmsField);
            inputPanel.add(new JLabel("Zone No:"));
            inputPanel.add(zoneField);
            inputPanel.add(new JLabel("Sensor ID:"));
            inputPanel.add(sensorField);
            lmsField.requestFocusInWindow();

            int result = JOptionPane.showConfirmDialog(geoCoveragePanel, inputPanel, "Please enter the ID of the LMS you want the Sensor added to, along with the Sensor ID", JOptionPane.OK_CANCEL_OPTION);

            if (result == JOptionPane.OK_OPTION) {
                String lmsid = lmsField.getText().toUpperCase();
                String zoneid = zoneField.getText().toUpperCase();
                String sensorid = sensorField.getText().toUpperCase();
                System.out.println("lmsField value: " + lmsid);
                System.out.println("zoneField value: " + zoneid);
                System.out.println("sensorField value: " + sensorid);
                try {
                    if(rmc.registerSensorWithLMS(lmsid, zoneid, sensorid))
                    {
                        System.out.println("Successfully registered the Sensor.");
                        lmsPanels.get(lmsid).justAddedLbl(zoneid, sensorid);

                        if(rmc.hasZoneTwoSensors(lmsid, zoneid))
                        {
                            lmsPanels.get(lmsid).removeAll();
                            lmsPanels.get(lmsid).addZonePanel(zoneid);
                            revalidate();
                        }
                    }
                } catch (AlreadyHasTwoSensors e1) {
                    JOptionPane.showMessageDialog(geoCoveragePanel, "Sorry, Only 2 Sensor devices per zone are allowed.");
                } catch (ZoneAlreadyExists e2) {
                    JOptionPane.showMessageDialog(geoCoveragePanel, "Sorry, That zone already exists for this LMS.");
                }
            }
        }
    });

    contentTabs.addTab("Monitor", monitorTab, contentPane, "Monitor Zones");
    contentTabs.setVisible(true);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T00:32:10.877

You never add your contentTabs component to anything. Solution: add it to the contentPane.

And next time you have a similar problem, seriously consider creating and posting an [sscce](http://sscce.org) as it greatly simplifies our ability to analyze and solve your problem. You've posted a *lot* of code, and most of it is completely unrelated to the problem at hand and does little but make it harder for us to understand the problem.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T00:32:41.147

You need to actually add the JTabbedPane to the frame, in order for it to show... As far as I can see, you never actually add it to the frame. Try:

```
contentPane.add(contentTabs); 
```

Also, there is probably no need to `contentTabs.setVisible(true);` at the end there.

# sql - SQL 存储过程 OUTPUT 返回多行

> ID：16126746
> 
> 赞同：5
> 
> 时间：2013-04-21T00:29:32.087
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures

我需要返回一个报告表中尚未处理的所有报告的列表。我正在为此过程使用存储过程。

这是我的存储过程创建：

```
CREATE PROCEDURE spGetAllUntouchedReportID
@ReportID int OUTPUT

AS
BEGIN
    SELECT @ReportID=Report.ReportID
    FROM Report
    WHERE Report.Status IS NULL
END 
```

这就是我调用存储过程的方式：

```
DECLARE @ReportID int
EXECUTE spGetNextReportID
@ReportID OUTPUT
Print @ReportID 
```

本质上，一个 C# 应用程序将连接并获取结果集，但我正在使用调用对其进行测试。我的问题是对存储过程的调用只打印它找到的最后一个结果。

以下是为报告表设置的示例：

```
ReportID  Status
1         NULL
2         Incomplete
3         NULL 
```

对该过程的调用打印出：

```
3 
```

代替：

```
1
3 
```

如何让我的存储过程存储它从存储过程返回的集合并调用它来打印每一个？这也可能出现在其他存储过程中，我需要执行具有多列的 Select * 并且需要返回整个集合

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-21T00:34:33.763

OUTPUT 可以保存一个值。如果要返回值列表，则应将过程更改为以下内容：

```
CREATE PROCEDURE spGetAllUntouchedReportID

AS
BEGIN
    SELECT Report.ReportID
    FROM Report
    WHERE Report.Status IS NULL
END 
```

这将返回所有具有`Status`of 的值`null`。

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/bd796/1)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-21T00:43:04.410

我的建议是将您的存储过程变成一个函数：

```
CREATE function spGetAllUntouchedReportID
@ReportID int OUTPUT
returns table as
    return (SELECT @ReportID=Report.ReportID
            FROM Report
            WHERE Report.Status IS NULL
           ) 
```

在存储过程之间返回和共享值的主题提供了许多解决方案。Erland Sommerskog 有一篇关于这个主题的[优秀博客文章。](http://www.sommarskog.se/share_data.html)

# python-sphinx - 使用 self 在 sphinx 中创建带有 toctree 的站点地图似乎坏了？

> ID：16126747
> 
> 赞同：7
> 
> 时间：2013-04-21T00:29:38.443
> 
> 标签：python-sphinx, sections, tableofcontents, toctree

我正在更新一个相当大的项目的常见问题解答，我想在页面顶部添加问题索引，以便用户更容易找到他们正在寻找的内容。

Sphinx 文档[toctree 文章](http://sphinx-doc.org/markup/toctree.html)指出*“特殊条目名称 self 代表包含 toctree 指令的文档。如果您想从 toctree 生成“站点地图”，这很有用。”* 这就是我要的。问题是 self 似乎坏了，只包括当前文档的标题而不是字幕。当我在另一个文档中并引用常见问题解答时，它可以正常工作，只有在文档本身中它才会失败。

展示

```
.. toctree::
   :maxdepth: 3

   faq 
```

在其他文件中导致

*   经常问的问题
    *   常问问题
        *   问题 1
        *   问题2
        *   问题 3
    *   不明显的行为和其他需要知道的

内部常见问题

```
.. toctree::
   :maxdepth: 3

   self 
```

结果是

*   经常问的问题

我认为这可能是因为 sphinx 在转换目录树并尝试将目录树移动到页面底部时不知道字幕。没变。

任何关于如何使用 sphinx 在页面本身中包含页面索引的想法将不胜感激

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-20T11:09:07.653

您正在寻找的是[内容](http://docutils.sourceforge.net/docs/ref/rst/directives.html#table-of-contents)指令。

在页面标题后插入以下块以构建问题列表：

```
.. contents::
   :local:
   :depth: 1 
```

它将产生：

*   问题 1
*   问题2
*   问题 3

# c++ - RemoveDuplicates 仅在位置为 1 和 2 时删除

> ID：16126748
> 
> 赞同：0
> 
> 时间：2013-04-21T00:29:50.180
> 
> 标签：c++

这是[从 DoublyLinkedList 中删除重复项的延续](https://stackoverflow.com/questions/16126160/removing-duplicates-from-a-doublylinkedlist-c/16126231?noredirect=1#comment23034655_16126231)。无论如何，我已经删除了重复项，但如果位置是一两个，它只会删除重复项。任何人都可以看到任何会导致这种情况发生的事情。这是他的功能：

```
void RemoveDuplicates(DoublyLinkedListIterator<Datatype> m_itr, string searchByFirstName, string searchBySecondName)
{
    for (m_itr.Start(); m_itr.Valid(); m_itr.Forth())
        {
            if ((m_itr.Item().getFirstName() == searchByFirstName )&& (m_itr.Item().getSecondName() == searchBySecondName))
            {
                DoublyLinkedListIterator<Datatype> toDelete = m_itr; 
                m_itr.Forth(); 
                Remove(toDelete);
            }   
            break;
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:32:58.723

您在`break`循环的第一次迭代之后调用，所以它只会进行一次迭代。

# string - 使用 sed 删除一行中的字符

> ID：16126749
> 
> 赞同：0
> 
> 时间：2013-04-21T00:29:56.647
> 
> 标签：string, bash, unix, sed

假设我有以下字符串：

```
variable number of characters -> information information information WORD: info 
```

如何删除“信息”之前和最后一个“信息”字符串之后的所有内容以及如何获取“信息”（删除“->”和空格之前的所有内容，然后删除“WORD：”之前的所有内容和空格键）。例如。

```
var1="information information information"
var2="info" 
```

另外我想了解更多关于“sed”的信息，我尝试在网上搜索一些客观的文章，但没有找到。如果您有一篇好文章的链接，如果您与我分享，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T00:35:26.417

Bash 有一个内置的正则表达式操作符`=~`。匹配项存储在`BASH_REMATCH`( **r** eg **e** x **match** ) 数组中。

```
regex='^.* -> (.*) WORD: (.*)$'

if [[ $string =~ $regex ]]; then
    var1=${BASH_REMATCH[1]}
    var2=${BASH_REMATCH[2]}
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T03:45:46.303

Eric Pement 页面上的 sed one liner 和 sed FAQ 很有用。

[http://www.pement.org/sed/index.htm](http://www.pement.org/sed/index.htm)

# python - Python 3 是否有任何理由会执行一条语句两次？

> ID：16126752
> 
> 赞同：2
> 
> 时间：2013-04-21T00:30:20.743
> 
> 标签：python, pdb, statements

我有一个功能：

```
def turn(self, keyEvent):

    if (keyEvent.key == pygame.locals.K_UP) and \
       (self.body[0].direction != Directions.DOWN):
        self._pivotPoints.append(PivotPoint(self.body[0].location, \
        Directions.UP))
        print("Placing pivot point up")

    #elif chain for the down left and right button presses omitted
    #code is the same for each input 
```

创建以下类的实例：

```
class PivotPoint:
    def __init__(self, location, \
                 direction):
        """When a body part reaches a pivot point, it changes directions"""
        pdb.set_trace()
        self.location = location
        self.direction = direction 
```

当我运行这段代码时，pdb 启动，我得到以下 I/O 序列：

```
> /home/ryan/Snake/snake.py(50)__init__()
-> self.location = location
(Pdb) step
> /home/ryan/Snake/snake.py(51)__init__()
-> self.direction = direction
(Pdb) step
--Return--
> /home/ryan/Snake/snake.py(51)__init__()->None
-> self.direction = direction
(Pdb) step
> /home/ryan/Snake/snake.py(89)turn()
-> print("Placing pivot point right") 
```

第 51 行的语句被执行了两次。为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T00:46:27.513

**该行不再被执行。**

```
> /home/ryan/Snake/snake.py(51)__init__()->None 
```

这意味着：这是函数的返回点，因为您没有添加 a `return`（因为`__init__`方法应该只返回 None 无论如何）。

如果您检查字节码，它会在最后显示类似的内容：

```
 28 LOAD_CONST               1 (None) 
         31 RETURN_VALUE 
```

`None`这意味着即使未指定该函数也会实际返回。

所以，`pdb`告诉你函数正在返回给它的调用者，它将显示所述函数的最后一行来表示它。

# javascript - 使用 jquery 问题和版本控制延迟 javascript

> ID：16126759
> 
> 赞同：0
> 
> 时间：2013-04-21T00:32:09.127
> 
> 标签：javascript, jquery, versioning

我在延迟 javascript 时遇到了一些问题。从[谷歌关于延迟 js 的文档](https://developers.google.com/speed/docs/best-practices/payload#DeferLoadingJS)中，我发现了以下代码，根据我的需要进行了编辑：

```
<script type='text/javascript'>
function downloadJSAtOnload() {
    var element = document.createElement("script");
    element.src = "//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js";
    document.body.appendChild(element);
    var element2 = document.createElement("script");
    element2.src = "jquery.validate.js";
    document.body.appendChild(element2);
    var element3 = document.createElement("script");
    element3.src = "fancybox/jquery.fancybox.pack.2.1.4.js";
    document.body.appendChild(element3);
 }

if (window.addEventListener)
    window.addEventListener("load", downloadJSAtOnload, false);
else if (window.attachEvent)
    window.attachEvent("onload", downloadJSAtOnload);
else window.onload = downloadJSAtOnload;
</script> 
```

此代码将 3 个 .js 文件添加到页面，它们会显示在检查器中。现在的问题是我的页面上有更多代码，使用 jquery 和谷歌分析

```
<script type='text/javascript'>
$(document).ready(function(){
   //some code
});
var _gaq = _gaq || [];
_gaq.push(['_setAccount', '*********']);
_gaq.push(['_trackPageview']);
(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script> 
```

现在我已经把我所有的代码都放到了这个`//some code`部分，所以是初始化fancybox和添加事件监听器的代码。现在我遇到的一个问题是刷新时，有时我会得到**`Uncaught ReferenceError: jQuery is not defined`**. 我只能假设这是因为**其他文件是在 jQuery 文件之前加载的**。我应该如何解决这个问题？

此外，`main.js`（包含页面上所需的所有其他 js 代码的 .js 文件）中的代码是否仍需要在其中`$(document).ready(function(){...});`？我曾经在 php 中的代码之间放置了很多 javascript，因此如果不需要它就不需要将其发送到页面，但我猜使用外部 .js 文件可能会因为可缓存而受益。

在旁注中：显然使用**版本控制**`bar.js?v=1.0`是不好的（根据 El Goog，因为某些代理不会缓存它），所以最好的方法是始终更改文件名，如下所示：**`bar.1.0.js`**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:43:00.917

调用“$(document).ready(function(){”时不会加载 jQuery，因为它尚未包含在页面中，而是在页面加载后加载。

这可以通过在 jquery 文件加载完成后执行所有代码来解决：

```
<script type='text/javascript'>
var element = document.createElement("script");
function downloadJSAtOnload() {
    element.src = "//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js";
    document.body.appendChild(element);
    var element2 = document.createElement("script");
    element2.src = "jquery.validate.js";
    document.body.appendChild(element2);
    var element3 = document.createElement("script");
    element3.src = "fancybox/jquery.fancybox.pack.2.1.4.js";
    document.body.appendChild(element3);
}

if (window.addEventListener)
    window.addEventListener("load", downloadJSAtOnload, false);
else if (window.attachEvent)
    window.attachEvent("onload", downloadJSAtOnload);
else window.onload = downloadJSAtOnload;
</script>

<script type="text/javascript">
// Quick and dirty implementation, you should check for all the included files to be done loading, and create some sort of object that triggers an event that is called when alle the files are loaded
element.onload = function {
  $(document).ready(function() { ... });
}
</script> 
```

[编辑]：在 jQuery 之前加载 jQuery 依赖的文件：您必须在 jQuery 脚本 onload 事件触发后应用相同的方法并创建其他文件的脚本对象。您确实不必再使用 $(document).ready() 了，因为文件包含在 onload 中，它总是在 domready 之后。

```
<script type='text/javascript'>
function downloadJSAtOnload() {
    var element = document.createElement("script");
    element.src = "//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js";
    document.body.appendChild(element);

    element.onload = function() {
      /jQuery is ready, now load the files that build on the jQuery framework
      var element2 = document.createElement("script");
      element2.src = "jquery.validate.js";
      document.body.appendChild(element2);
      var element3 = document.createElement("script");
      element3.src = "fancybox/jquery.fancybox.pack.2.1.4.js";
      document.body.appendChild(element3);
   }
}

if (window.addEventListener)
    window.addEventListener("load", downloadJSAtOnload, false);
else if (window.attachEvent)
    window.attachEvent("onload", downloadJSAtOnload);
else window.onload = downloadJSAtOnload;
</script> 
```**

# php - 年龄计算器不显示计算的年龄

> ID：16126763
> 
> 赞同：0
> 
> 时间：2013-04-21T00:32:29.457
> 
> 标签：php, javascript, html

此代码用于根据使用组合框的用户的选定值计算年龄，它必须在下面提供的文本框中显示年龄。每次用户更改组合框中的选定值时，必须刷新年龄。但我当前的代码没有显示计算的年龄。

```
<?php
                $month = date("m"); //without leading zero(o)
                $year = date("Y"); //four digit format
                $day = date("d");
                $st_year = "1950"; //Starting Year
                $month_names = array("January", "February", "March","April", "May", "June", "July", "August", "September", "October", "November", "December");
            ?>

            <form name="Month_Year" id="Month_Year"  method="post">
            <select name="month" id="month">
            <?php
            for ($i=1; $i<=12; $i++) {
                echo "<option ";
                if ($i == $month) {
                    echo "selected=\"selected\" ";
                }
                echo "value=\"$i\">", $month_names[$i-1], "</option>\n";
            }
            ?>
            </select>
            <select name="year" id="year">
            <?php
            for ($i=$st_year; $i<=$year; $i++) {
                echo "<option ";
                if ($i == $year) {
                    echo "selected=\"selected\" ";
                }
                echo "value=\"$i\">$i</option>\n";
            }
            ?>
            </select>
            <select name="day" id="day">
            <?php
            for ($i=1; $i<=31; $i++) {
                echo "<option> ";
                if ($i == $day) {
                    echo "selected=\"selected\" ";
                }
                echo "value=\"$i\">$i</option>\n";
            }
            ?>
            </select>
            // I used this code to combine the selected value in the combo box.
            <?php $Convertdays = $month."/".$day."/".$year; 

            echo $Convertdays;
            ?>
            <script type="text/javascript">
            var birth = new Date( <?php '$Convertdays'?>);
            var check = new Date();
            var milliDay = 1000 * 60 * 60 * 24; // a day in milliseconds;
            var ageInDays = (check - birth) / milliDay;
            var ageInYears =  Math.floor(ageInDays / 365 );
            var age =  ageInDays / 365 ;
            </script> 
```

每次我更改组合框的值时，文本框都会显示 0。假设文本框的值是 1991 年 10 月 19 日，它应该显示 21

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:40:14.710

将javascript向上移动并使其成为一个函数，以便您可以引用它

然后添加 onChange() 以在您更改选择元素时触发该功能

最后让函数将您的计算输出到页面上的某个位置

```
<?php
    $month = date("m"); //without leading zero(o)
    $year = date("Y"); //four digit format
    $day = date("d");
    $st_year = "1950"; //Starting Year
    $month_names = array("January", "February", "March","April", "May", "June", "July", "August", "September", "October", "November", "December");
    $Convertdays = $month."/".$day."/".$year; 
?>
<script type="text/javascript">
    function update() {
        var e = document.getElementById("month");
        var month = e.options[e.selectedIndex].value;
        e = document.getElementById("day");
        var day = e.options[e.selectedIndex].value;
        e = document.getElementById("year");
        var year = e.options[e.selectedIndex].value;
        var birthDate = month + "/" + day + "/" + year
        var birth = new Date(year,month,day,0,0,0);
        var check = new Date();
        var milliDay = 1000 * 60 * 60 * 24; // a day in milliseconds;
        var ageInDays = (check - birth) / milliDay;
        var ageInYears =  Math.floor(ageInDays / 365 );
        var age = parseInt(ageInDays / 365) ;
        if (age < 3) {
            document.getElementById('Calculated').innerHTML = "You are under 3 years old, why are you on the computer?";
        } else {
            document.getElementById('Calculated').innerHTML = "You are " + age;
        }
    }
</script>
Enter your birth Date:
<div style="height:15px;"></div>
<form name="Month_Year" id="Month_Year"  method="post">
    <select name="month" id="month" style="margin-right: 30px;" onChange="update();">
        <?php
            for ($i=1; $i<=12; $i++) {
                echo "<option ";
                if ($i == $month) {
                    echo "selected=\"selected\" ";
                }
                echo "value=\"$i\">", $month_names[$i-1], "</option>\n";
            }
        ?>
    </select>
    <select name="day" id="day" style="margin-right: 30px;" onChange="update();">
        <?php
            for ($i=1; $i<=31; $i++) {
                echo "<option ";
                if ($i == $day) {
                    echo "selected=\"selected\" ";
                }
                echo "value=\"$i\">$i</option>\n";
            }
        ?>
    </select>
    <select name="year" id="year" onChange="update();">
        <?php
            for ($i=$st_year; $i<=$year; $i++) {
                echo "<option ";
                if ($i == $year) {
                    echo "selected=\"selected\" ";
                }
                echo "value=\"$i\">$i</option>\n";
            }
        ?>
    </select>
    <br>
</form>
<div id="Calculated">
    calculated age goes here<br>
</div> 
```

# android - Android：在后台更改活动

> ID：16126767
> 
> 赞同：0
> 
> 时间：2013-04-21T00:33:07.137
> 
> 标签：android

我想在我的应用程序中制作 2 页：

1.  **主页**- 获取推送通知并显示数据
2.  **聊天页面**- 获取聊天的推送通知

是否可以同时运行 2 个活动（两者都有一个`BroadcastReceiver`用于推送）并用于`FLAG_ACTIVITY_REORDER_TO_FRONT`在活动之间切换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:27:22.203

我认为您应该为在后台运行的所有操作使用[服务](http://developer.android.com/guide/components/services.html)。

（服务是一个应用程序组件，它代表应用程序希望在不与用户交互的情况下执行更长时间运行的操作，或提供功能供其他应用程序使用。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T02:09:31.167

对的，这是可能的。您可以简单地在活动之间切换，活动也可以从后台执行操作。但最好将服务用于后台工作。

# python - 获取用户输入为 int 或 str

> ID：16126769
> 
> 赞同：1
> 
> 时间：2013-04-21T00:33:52.917
> 
> 标签：python, string, input, int, 2d

我对python很陌生，相信我，我一直在无休止地寻找解决方案，但我就是无法得到它。

我有一个带有监控图列表的 csv。使用下面的代码，我已经能够显示 2dlist 并让用户根据列表索引输入一个数字来选择一个特定的图（其中有 11 个）。

但是当提示用户选择时，我想包括一个选项'....或按'q'退出'。现在显然 raw_input 设置为仅接收整数，但我怎样才能接受列表中的数字或“q”？

如果我从 raw_ 输入中删除“int”，它会不断提示再次输入，打印异常行。我可以让它接受索引号（0-9）或'q'吗？

```
for item in enumerate(dataList[1:]):            
    print "[%d] %s" % item

while True:
    try:
        plotSelect = int(raw_input("Select a monitoring plot from the list: "))
        selected = dataList[plotSelect+1]

        print 'You selected : ', selected[1]
        break
    except Exception:
        print "Error: Please enter a number between 0 and 9" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:40:30.053

```
choice = raw_input("Select a monitoring plot from the list: ")

if choice == 'q':
    break

plotSelect = int(choice)
selected = dataList[plotSelect+1] 
```

检查用户是否进入`q`并明确退出循环（而不是依赖于抛出的异常）。仅在此检查后将其输入转换为 int。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T00:41:19.837

检查它不是后将其转换为整数`'q'`：

```
try:
    response = raw_input("Select a monitoring plot from the list: ")

    if response == 'q':
        break

    selected = dataList[int(plotSelect) + 1]

    print 'You selected : ', selected[1]
    break
except ValueError:
    print "Error: Please enter a number between 0 and 9" 
```

# javascript - 在 AngularJS 中，jquery append 方法似乎不适用于指令

> ID：16126772
> 
> 赞同：1
> 
> 时间：2013-04-21T00:34:22.997
> 
> 标签：javascript, jquery, angularjs

我想实现我自己的 ng-repeat 版本。但不知何故，我无法让它工作，因为 jquery append 方法似乎不起作用。

**脚本.js：**

```
var app = angular.module("app", []);

app.directive("myRepeat", function() {
  return {
    restrict: 'E',
    compile: function(element, attrs) {
      var c = element.children()[0];
      console.log(c)
      for(var i=0; i<attrs.times; i++) {
        element.append(c);
      }
      return function(scope, element, attrs) {
        $(element).click(function() {
          console.log("hi");
        })
      }
    }
  }
}) 
```

**索引.html：**

```
<body ng-app="app">
    <my-repeat times="5"><p>hello world</p></my-repeat>
</body> 
```

[plnkr.co 使用的代码](http://plnkr.co/edit/4Plxmm7u7AOOfyZQk9ig?p=preview)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:45:10.230

在阅读了一些 jquery 代码后，我找到了答案。Append 将在附加 DOM 元素时检查并删除重复项。我打包`c`到一个 dom 列表中，并将我的 for 循环中的附加行更改为：

```
element.append(c.clone()); 
```

问题消失了。

# javascript - 通过 JavaScript 设置列表框的元素

> ID：16126775
> 
> 赞同：0
> 
> 时间：2013-04-21T00:35:18.053
> 
> 标签：javascript

如何设置为我生成的列表框 jsf 的各个元素？我想通过JS设置它。

```
HTML generated: <select id="pageForm:effectiveDateListbox" name="pageForm:effectiveDateListbox" multiple="multiple" size="0"></select>   

var listBox = document.getElementById('pageForm:effectiveDateListbox');
            for (i = 0; i!= length; i++) 
            {
                var date = arrDates[i];
                var displayMonth = date.getMonth() + 1;
                var displayYear = date.getFullYear();
                var displayDate = date.getDate();
                tokenizedDates = displayMonth.toString(10) + "/" + displayDate.toString(10) + "/" + displayYear.toString(10);
                listBox.options[i].value = tokenizedDates;
                i++;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:41:19.893

在循环长度应该是 arrDates.length

不要加倍我

用 var 声明 i 和 tokenizedDates 或污染全局命名空间

这是进行 dom 操作的链接：http: [//www.w3schools.com/jsref/met_select_add.asp](http://www.w3schools.com/jsref/met_select_add.asp)

这是使用 jquery 的方法，因为 dom 操作很难让它们跨浏览器工作：

[使用 jQuery 向 <select> 添加选项？](https://stackoverflow.com/questions/740195/adding-options-to-a-select-using-jquery-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T01:07:53.060

```
var listBox = document.getElementById('pageForm:effectiveDateListbox');
var dates = [new Date(2013,01,01), new Date(2013,02,03), new Date(2013,03,03)];    
for (i = 0; i != dates.length; i++) {
    var option = document.createElement("option");
    var optionText = [dates[i].getMonth() + 1, dates[i].getDate(), dates[i].getFullYear()];
    option.text = optionText.join("/");
    listBox.add(option, null);
} 
```

# c++ - 多线程编程中如何保证执行顺序？

> ID：16126778
> 
> 赞同：2
> 
> 时间：2013-04-21T00:35:33.703
> 
> 标签：c++, c, multithreading, openmp

下面的多线程代码有什么问题吗？它总是给我不一致的结果。看起来编译器优化可能会将标志设置行移到数据处理行之前，这会导致严重的数据竞争情况。

有没有办法在不增加障碍的情况下避免这种情况？

```
#pragma omp parallel num_threads(16)

int tid=omp_get_thread_num();

if (tid<8)
{
   copydata(arrayofPtrs[tid]);

   flag[tid]=1;//flag is an array of volatile int where its initial values are all 0.

}
else
{
   for (int i=0; i<100000; ++i)
   {
     if (flag[tid-8]==1)
      {
       processingdata(arrayofPtrs[tid-8]);
       break;
       }
     else
       Sleep(200);
   };
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:44:23.070

您可以在处理线程的标志测试周围使用循环，以便它们在标志上旋转锁定直到它被设置。但是，这部分代码看起来是连续的，那么为什么要使用多个线程进行复制/处理呢？您可以使用线程复制并继续使用同一线程处理该块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T07:51:14.377

据我了解您的代码，除非数据已被复制，否则数据处理无法继续，因此并行执行是没有意义的 - 处理线程将浪费 CPU 时间等待复制线程完成并设置旗帜。为什么不将这两个操作合并到一个块中：

```
#pragma omp parallel num_threads(8)
{
   int tid = omp_get_thread_num();

   copydata(arrayofPtrs[tid]);
   processingdata(arrayofPtrs[tid]);
} 
```

如果您仍想保留最初的想法，可能如果复制和处理都异步且以重复的方式发生，那么您需要使用 Open MP`atomic`操作同步对标志的访问：

```
#pragma omp parallel num_threads(16)
{
   int tid = omp_get_thread_num();

   if (tid < 8)
   {
      copydata(arrayofPtrs[tid]);

      #pragma omp atomic write
      flag[tid] = 1;//flag is an array of volatile int where its initial values are all 0.
   }
   else
   {
      for (int i = 0; i < 100000; ++i)
      {
         #pragma omp atomic read
         int ready = flag[tid-8];
         if (ready == 1)
         {
            processingdata(arrayofPtrs[tid-8]);
            break;
         }
         else
            Sleep(200);
      }
   }
} 
```

对于大多数编译器，该`atomic`构造具有所引用的变量变得易变的副作用。您还可以使用以下命令显式更新内存视图`flush`：

```
#pragma omp atomic write
flag[tid] = 1;
#pragma omp flush(flag) 
```

`read`and`write`子句仅在最近的 OpenMP 版本上受支持。这`Sleep()`看起来像您使用的是 Win32 API，因此可能使用了 MSVC，它不支持`read`和`write`修饰符，因为它只实现 OpenMP 2.0，但代码仍应按预期编译和工作。

另一种没有繁忙循环的可能方法是使用 OpenMP 锁。初始化一个锁数组，在复制线程中获取它们，然后让每个处理线程等待获取锁：

```
omp_lock_t locks[8];
for (int i = 0; i < 8; i++)
   omp_init_lock(&locks[i]);

#pragma omp parallel num_threads(16)
{
    int tid = omp_get_thread_num();

    // Have the first 8 threads acquire the locks
    if (tid < 8)
       omp_set_lock(&locks[tid]);

    #pragma omp barrier

    // Now locks are set and processing can continue

    if (tid < 8)
    {
       copydata(arrayofPtrs[tid]);
       omp_unset_lock(&locks[tid]);
    }
    else
    {
       omp_set_lock(&locks[tid-8]);
       processingdata(arrayofPtrs[tid-8]);
       omp_unset_lock(&locks[tid-8]);
    }
 }

 for (int i = 0; i < 8; i++)
    omp_destroy_lock(&locks[i]); 
```

您也可以使用 POSIX 信号量的 Win32 事件而不是 OpenMP 锁来实现相同的功能。这种方法的优点是您在等待设置标志时不需要显式循环。相反，`omp_set_lock()`调用将阻塞，直到复制线程释放它的锁。使用 Win32 事件，您可以`WaitForSingleObject(hEvent, INFINITE);`用来等待复制线程发出信号。

# asp.net-mvc - JetBrain 的 DotTrace Performance Pro 5.3 能否再次用于 DiscountASP 服务器？有这方面经验的人吗？

> ID：16126785
> 
> 赞同：0
> 
> 时间：2013-04-21T00:36:18.413
> 
> 标签：asp.net-mvc, asp.net-mvc-3, dottrace, discountasp

新的 DotTrace Performance Pro V5.3 现在可以通过 HTTP 连接到远程进程，因此我应该可以将它用于我在 DiscountASP 上托管的站点。有没有人有这方面的经验。希望它有效吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:45:45.877

我使用 DiscountASP，公平地说，他们的支持非常好 - 向他们提出有关问题的票，您通常会在 24 小时内得到答复。

他们还有一个知识库： https: [//support.discountasp.net/KB/browse.aspx](https://support.discountasp.net/KB/browse.aspx)

# jquery - 如何在页面加载时自动弹出 CSS3 模态窗口？

> ID：16126788
> 
> 赞同：3
> 
> 时间：2013-04-21T00:37:00.600
> 
> 标签：jquery, css

我正在尝试解决这个问题。如何让它在页面加载上工作。

我的 CSS

```
.modalDialog {
    position: fixed;
    font-family: Arial, Helvetica, sans-serif;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background: rgba(0,0,0,0.8);
    z-index: 99999;
    opacity:0;
    -webkit-transition: opacity 400ms ease-in;
    -moz-transition: opacity 400ms ease-in;
    transition: opacity 400ms ease-in;
    pointer-events: none;
}

.modalDialog:target {
    opacity:1;
    pointer-events: auto;
}

.modalDialog > div {
    width: 400px;
    position: relative;
    margin: 10% auto;
    padding: 5px 20px 13px 20px;
    border-radius: 10px;
    background: #fff;
    background: -moz-linear-gradient(#fff, #999);
    background: -webkit-linear-gradient(#fff, #999);
    background: -o-linear-gradient(#fff, #999);
}

.close {
    background: #606061;
    color: #FFFFFF;
    line-height: 25px;
    position: absolute;
    right: -12px;
    text-align: center;
    top: -10px;
    width: 24px;
    text-decoration: none;
    font-weight: bold;
    -webkit-border-radius: 12px;
    -moz-border-radius: 12px;
    border-radius: 12px;
    -moz-box-shadow: 1px 1px 3px #000;
    -webkit-box-shadow: 1px 1px 3px #000;
    box-shadow: 1px 1px 3px #000;
}

.close:hover { background: #00d9ff; } 
```

要打开弹出窗口，我们有这个链接

```
<a href="#openModal">Open Modal</a> 
```

我尝试了这种技术[如何在 HTML5 和 CSS3 中自动弹出一个模态窗口，](https://stackoverflow.com/questions/14413982/how-to-make-a-modal-window-in-html5-and-css3-popup-automatically) 但它不起作用.. 请帮助.t 谢谢

ps：我也尝试使用jQuery链接点击页面加载，但这也没有用:(这里是jquery代码。

```
$(window).load(function () {
$("#preloader").delay(1000).fadeOut(1000);
$('#notLoggedModalClick').click(); 
```

});

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T02:12:56.590

设置一个div

```
<div id="popup">
        text here...
</div> 
```

在样式集显示：隐藏

```
#popup
{
    position:absolute;
    display:none;
    top:200px;
    left:50%;
    width:500px; 
    margin-left:-250px;
    border:1px solid blue; 
    padding:20px;
    background-color:white;
} 
```

页面加载时刚刚设置`display:block`

```
<script type="text/javascript">
    function show_popup()
    {
      document.getElementById('popup').style.display = 'block'; 
    }

    window.onload = show_popup;
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-18T03:44:11.277

回答 1 种作品，在 Firefox 中它会显示模态，但是它不允许它正确关闭。在 chrome 中，它根本不会在加载时打开。最后，即使它可以工作，它也只是再次启动动画序列并以不允许关闭的方式加载它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T01:05:23.097

`load()`已弃用为 1.8 版，我的建议：

```
window.onload = function (){
    $("#preloader").delay(1000).fadeOut(1000);
    $('#notLoggedModalClick').click();
} 
```

但如果您直接触发弹出窗口而不是单击触发器，效果会更好。

# c# - 在 C# 中呈现 HTML 标签

> ID：16126791
> 
> 赞同：0
> 
> 时间：2013-04-21T00:37:38.553
> 
> 标签：c#, html, wpf, rendering

是否有一个易于使用的库或其他方法可以将 HTML 作为字符串传递（带有 <table> 或 <div> 等标签），然后应用程序将在屏幕上正确显示它？

到目前为止，我只找到了 HTML Agility Pack，但它似乎对新手不太友好。

一个例子：

```
submitted by <a href="http://www.reddit.com/user/kiransran"> kiransran </a> 
to <a href="http://www.reddit.com/r/news/"> news</a> 
<br/> 
<a href="http://imgur.com/GtDN6rz">[link]</a> 
<a href="http://www.reddit.com/r/news/comments/1cretq/infrared_image_of_boston_marathon_suspect_hiding/">[976 comments]</a> 
```

它来自一个 RSS 提要。我需要在 WPF 中显示结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:49:00.173

如果您只想渲染它，请使用 Web 浏览器控件：

```
<WebBrowser HorizontalAlignment="Left" Height="203" VerticalAlignment="Top" Width="335" Margin="46,52,0,0" Name="wb1"/> 
```

然后调用 NavigateToString 方法：

```
string s = @"<html><body>Hello <b>World</b></body></html>";
wb1.NavigateToString(s); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T00:46:28.193

使用字符串操作来提取感兴趣的 html 开始和结束，包装它并使用浏览器控件显示它：

[http://www.c-sharpcorner.com/uploadfile/rahul4_saxena/webbrowser-control-in-wpf/](http://www.c-sharpcorner.com/uploadfile/rahul4_saxena/webbrowser-control-in-wpf/)

无论如何，字符串操作 API 是您将要学习的东西，如果您只想显示 HTML，那么您只需要为浏览器控件提供合适的 html。

您可能首先需要一个 WebRequest 来获取 RSS，但您还没有问过这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T01:59:36.460

看看 Geckofx：

[http://code.google.com/p/geckofx/](http://code.google.com/p/geckofx/)

但是，如果您愿意，您可以使用 Webbrowser 控件，但请记住，这只是 IE。

# c# - 使用 Kinect 录制 RGB 视频

> ID：16126792
> 
> 赞同：0
> 
> 时间：2013-04-21T00:37:48.887
> 
> 标签：c#, video, kinect, directshow, kinect-sdk

我在我的项目（最新版本 - 1.7）中使用 Microsoft Kinect SDK 和 C# WPF。

我正在尝试使用我的 Kinect 传感器录制视频（RGB+音频，无红外或深度），

虽然 Windows 将 Kinect 识别为有效麦克风，但它不会将其识别为标准网络摄像头。

我该如何解决这个问题？

附言

我尝试将 RGB 图像一一保存并将它们合并到视频中，但这种方法会导致低帧率和同步问题（与声音流有关）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T07:55:04.170

您可以使用[OpenKinect](http://openkinect.org/wiki/Main_Page)驱动程序。

# java - Java Swing由于延迟绘制错误的图片

> ID：16126794
> 
> 赞同：1
> 
> 时间：2013-04-21T00:38:04.213
> 
> 标签：java, swing, synchronization

我是摇摆程序的新手，我在线程同步方面遇到了一些困难。

我正在尝试遍历一个数组并在每个索引处创建一个 JPanel 和一个 JFrame，并希望在每个面板上绘制一张图片。与存储在数组中的值相关的图片。但是所有的框架/面板只保存最后一个数组条目的图片。我认为这是由于单独的 swing-Thread（？），但我不知道如何更改它。你能帮助我吗？

```
package help;

import java.awt.Graphics;
import java.awt.image.BufferedImage; 
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class SwingSynchro{

private JPanel jPanel;
private JFrame jFrame;
int array[] = {1,2,3,4};
int current;
private BufferedImage image1;
private BufferedImage image2;
private BufferedImage image3;
private BufferedImage image4;

public SwingSynchro(){

    //try{
    //    image1 = ImageIO.read(new File("someFilePath1.png"));
    //    image2 = ImageIO.read(new File("someFilePath2.png"));
    //    image3 = ImageIO.read(new File("someFilePath3.png"));
    //    image4 = ImageIO.read(new File("someFilePath4.png"));
    //} catch(IOException e){
    //    e.printStackTrace();
    //    System.out.println("wrong file path");
    //}// try catch

    for(int i = 0 ; i < array.length ; i++){

        current = array[i];
            System.out.println("current Number: "+ current + " at array index:" +i);

            jPanel = new JPanel(){
                private static final long serialVersionUID = 6859593162185621113L;

                @Override
                protected void paintComponent(Graphics g){
                    super.paintComponent(g);

                    switch(current){
                        case 1:
                            System.out.println("case 1");
                            //g.drawImage(image1, 10, 10, getWidth() - 20, getHeight() - 20, this);
                            break;
                        case 2:
                            System.out.println("case 2");
                           // g.drawImage(image2, 20, 20, getWidth() - 40, getHeight() - 40, this);
                            break;
                        case 3:
                            System.out.println("case 3");
                            //g.drawImage(image3, 10, 10, getWidth() - 20, getHeight() - 20, this);
                            break;
                        case 4:
                            System.out.println("case 4");
                            //g.drawImage(image4, 10, 10, getWidth() - 20, getHeight() - 20, this);
                            break;
                        default:
                            System.out.println("RELEASE THE KRAKEN!");
                            break;
                    }// switch
                }// paintComponent()
            };// anonymous class(extends JPanel)

        jFrame = new JFrame(String.valueOf(current));
        jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        jFrame.setResizable(false);
        jFrame.getContentPane().add(jPanel);
        jFrame.setSize(200, 250);
        jFrame.setLocation(i * 203, 0);
        jFrame.setVisible(true);
    }
}
} 
```

我注释掉了图片，因为控制台输出可以清楚地看到 drawImage 方法在整个 for 循环之后被调用。

编辑：看起来没有其他线程，但在那种情况下，我不明白为什么图纸（或案例陈述）有这种延迟。你能解释一下为什么代码没有像往常一样执行吗？

这是输出：

```
current Number: 1 at array index:0
current Number: 2 at array index:1
current Number: 3 at array index:2
current Number: 4 at array index:3
case 4
case 4
case 4
case 4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T00:41:38.947

Swing 是单线程的。如果您想实时查看 GUI 更新，请使用[Swing Timer 。](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T00:55:40.270

您可以将 JPanel 设为内部类并使用字段来保存变量的值，而不是将 JPanel 实例化为匿名类`current`。

```
private static class CustomJPanel extends JPanel {
    private static final long serialVersionUID = 6859593162185621113L;
    private final int current;

    private CustomJPanel(int current) {
        this.current = current;
    }

    @Override
    protected void paintComponent(Graphics g){
        super.paintComponent(g);

        switch(current){
            case 1:
                System.out.println("case 1");
                //g.drawImage(image1, 10, 10, getWidth() - 20, getHeight() - 20, this);
                break;
            case 2:
                System.out.println("case 2");
                // g.drawImage(image2, 20, 20, getWidth() - 40, getHeight() - 40, this);
                break;
            case 3:
                System.out.println("case 3");
                //g.drawImage(image3, 10, 10, getWidth() - 20, getHeight() - 20, this);
                break;
            case 4:
                System.out.println("case 4");
                //g.drawImage(image4, 10, 10, getWidth() - 20, getHeight() - 20, this);
                break;
            default:
                System.out.println("RELEASE THE KRAKEN!");
                break;
        }// switch
    }// paintComponent()
} 
```

然后将其实例化为

```
jPanel = new CustomJPanel(current); 
```

这样，您可以确保它已被传递给`current`JPanel 实例化时变量所具有的值。

# r - 如何在包加载时加载主题和默认值

> ID：16126799
> 
> 赞同：2
> 
> 时间：2013-04-21T00:39:51.800
> 
> 标签：r

我创建了具有特定于与我合作的不同公司的功能的便利包。当我加载这些库时，我希望能够加载 ggplot2 主题和 geom 默认值。

例如：

```
update_geom_defaults("line",   list(size = 2))
update_geom_defaults("bar",    list(fill="#BEBADA",colour="#000000"))
update_geom_defaults("text",   list(colour="#333333"))
scale_colour_discrete <- function(...) scale_colour_brewer(..., palette="Set2")
scale_fill_discrete <- function(...) scale_fill_brewer(... , palette="Set2") 
```

现在，我必须记住每次进行快速分析时都要重新输入，我想让它更干。

当包加载时，我将如何强制这些元素加载？

伪代码：

```
library(convenience.lib)
## run the above ## 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T05:30:16.010

简单地将 .onLoad 函数添加到您的包中，例如：

```
.onLoad <- function(libname = find.package("mypackage"), pkgname = "mypackage") {
    update_geom_defaults("line",   list(size = 2))
    update_geom_defaults("bar",    list(fill="#BEBADA",colour="#000000"))
    update_geom_defaults("text",   list(colour="#333333"))
    scale_colour_discrete <- function(...) scale_colour_brewer(..., palette="Set2")
    scale_fill_discrete <- function(...) scale_fill_brewer(... , palette="Set2")
} 
```

# bash - 递归 Grep 仅显示总匹配计数

> ID：16126808
> 
> 赞同：14
> 
> 时间：2013-04-21T00:41:58.027
> 
> 标签：bash, shell, grep

我正在尝试进行递归 grep 搜索，例如：

```
grep -r -c "foo" /some/directory 
```

这给了我输出如下：

```
/some/directory/somefile_2013-04-08.txt:0
/some/directory/somefile_2013-04-09.txt:1
/some/directory/somefile_2013-04-10.txt:4
...etc 
```

但是，我只想获取所有文件中的匹配总数，例如：

```
Total matches:    5 
```

我玩过一些其他的例子，比如[在这个线程](https://stackoverflow.com/questions/884591/grep-recursive-and-count)中，虽然我似乎无法做应该如此简单的事情。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-21T00:49:55.380

```
grep -ro "foo" /some/directory | wc -l | xargs echo "Total matches :" 
```

`-o`选项`grep`打印文件中字符串的所有现有出现*。*

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-24T02:35:02.013

只需管道到 grep。

```
grep -r "foo" /some/directory | grep -c "foo" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-21T00:44:31.900

```
matches=$(grep -rch "foo" /some/directory | paste -sd+ - | bc)
echo "Total matches: $matches" 
```

paste/bc 部分总结了一个数字列表。请参阅：[Bash 命令对一列数字求和](https://stackoverflow.com/questions/3096259/bash-command-to-sum-a-column-of-numbers)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-21T00:49:29.920

如果您只需要总数，则可以跳过获取每个文件的计数，而只需获取匹配行的总数：

```
grep -r "foo" /some/directory | wc -l 
```

# java - Java Platforming Game Land on Platform

> ID：16126810
> 
> 赞同：1
> 
> 时间：2013-04-21T00:42:01.960
> 
> 标签：java, collision

我的 Player 类中的平台碰撞代码不起作用，有时会出现故障。我创建了不同的方法来应用重力等等。

当玩家在平台下跳跃时，我希望他们与平台底部碰撞并使用我创建的重力方法回落。

当玩家走进平台的两端时，我希望他们停在平台旁边。

我想始终确保玩家无法通过平台，这似乎是我的失败。

如果有人可以帮助我，我将不胜感激。

这是我的 Player 类，小程序屏幕大小为 600x400：

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

public class Player implements KeyListener
{
int x, y, width, height;

boolean jump, left, right;

PlayerThread playerThread;

int maxHeight = 40;
double heightC = 0;
boolean onPlatform = false;
boolean landed = true;
int prevY;

public Player()
{
    x = 500;
    y = 350;
    width = 40;
    height = 50;
    playerThread = new PlayerThread();
    playerThread.start();
}

public void paint(Graphics g)
{
    String str = String.valueOf(x);
    String str2 = String.valueOf(y);

    g.setColor(Color.RED);
    g.fillRect(x, y, width, height);

    g.drawString("X: " + str + ", Y: " + str2, 100, 100);
}

public void update(Platform p)
{
    CheckForCollision(p);
}

public void CheckForCollision(Platform p)
{
    int pX = p.getX();
    int pY = p.getY();
    int pWidth = p.getWidth();
    int pHeight = p.getHeight();

    //THIS IS COLLISION DETECTION CODE THAT DOES NOT WORK
    if (y + height > pY && y  < pY + pHeight && x + width > pX && x < pX + pWidth)
    {
        y = prevY;
        landed = true;
    }
}

public class PlayerThread extends Thread implements Runnable
{
    public void run()
    {
        while (true)
        {
            if (left)
            {
                x -= 2;
            }

            if (right)
            {
                x += 2;
            }

            if (jump)
            {
                if (heightC >= maxHeight)
                {
                    System.out.println(heightC);
                    jump = false;
                    heightC = 0;
                }
                else
                {
                    heightC += 1.5;
                    prevY = y;
                    y -= 5;
                    landed = false;
                }
            }

                            //GRAVITY CODE
            if (!jump)
            {
                if (y < 400 - height && !landed)
                {
                    prevY = y;
                    y += 5;
                    landed = false;
                }
            }

            if (y >= 400 - height)
            {
                y = 400 - height;
                landed = true;
            }

            try
            {
                sleep(17);
            } 
            catch (InterruptedException e)
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
}

@Override
public void keyPressed(KeyEvent e)
{
    switch (e.getKeyCode())
    {
    case KeyEvent.VK_LEFT:
        left = true;
        break;
    case KeyEvent.VK_RIGHT:
        right = true;
        break;
    case KeyEvent.VK_SPACE:
        if (landed)
        {
        jump = true;
        }
        break;
    }
}

@Override
public void keyReleased(KeyEvent e)
{
    switch (e.getKeyCode())
    {
    case KeyEvent.VK_LEFT:
        left = false;
        break;
    case KeyEvent.VK_RIGHT:
        right = false;
        break;
    case KeyEvent.VK_SPACE:
        break;
    }
}

public int getX()
{
    return x;
}

public void setX(int x)
{
    this.x = x;
}

public int getY()
{
    return y;
}

public void setY(int y)
{
    this.y = y;
}

public int getWidth()
{
    return width;
}

public void setWidth(int width)
{
    this.width = width;
}

public int getHeight()
{
    return height;
}

public void setHeight(int height)
{
    this.height = height;
}

@Override
public void keyTyped(KeyEvent e)
{
    // TODO Auto-generated method stub

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:41:26.907

您的问题在于您的检测代码。我假设，您正在使用基于 if 语句的基本矩形碰撞，但是您的子句似乎有点奇怪。

让我们分解它们： `y + height > pY`- 如果播放器的底部低于平台的顶部。 `y < pY + pHeight`- 如果玩家的顶部高于平台的底部 `x + width > pX`- 如果玩家的右侧在平台左侧的右侧 `x < pX + pWidth`- 玩家的左侧在平台右侧的左侧

现在注意这里的逻辑：这只会在玩家*完全*进入平台时触发，我认为这不是你想要的。您可能想要的更类似于否定证明：

```
if(!(y > pY + pHeight || y + height < pY || x > pX + pWidth || x + width < pX)){
    //There is a collision
} 
```

附带说明一下，虽然我通常同意 D 先生和他关于使用游戏引擎的评论，但从学习的角度来看，了解这些东西是如何工作的通常很有用，这样你就不会受限于其他人的代码库。

# java - 如何标记来自给定输入的一组行？

> ID：16126813
> 
> 赞同：2
> 
> 时间：2013-04-21T00:42:56.237
> 
> 标签：java, loops, input

我正在尝试一些非常简单的东西。

我必须逐行阅读以下输入并`ArrayList`为每一行创建一个整数。

```
2 5 10
3 5 15 
```

我正在尝试使用以下代码处理它

```
while((newLine=f.readLine()) != null){
    for(int k=0; k<newLine.length(); k++){
        StringTokenizer st = new StringTokenizer(newLine);
        int i1 = Integer.parseInt(st.nextToken()); 
        System.out.println("Adding to list"+i1);
        input.add(i1);
    }
} 
```

如您所见，我每次都重新初始化，而不是移动到下一个令牌`st`。`newLine`关于如何实现我的目标的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:58:07.027

您不需要遍历行长度。相反，您需要遍历标记器返回的所有标记并将它们放入一个列表中，在您完成一行后将该列表放入另一个列表中，因此您最终会得到一个列表列表

```
List<List<Integer>> linesOfIntegers = new ArrayList<>(); 

while((newLine = f.readLine()) != null) {
    StringTokenizer st = new StringTokenizer(newLine);
    List<Integer> lineOfIntegers = new ArrayList<>();
    while(st.hasMoreTokens()) {
        lineOfIntegers.add(Integer.parseInt(st.nextToken()));
    }
    linesOfIntegers.add(lineOfIntegers);
}

for(List<Integer> lineOfIntegers : linesOfIntegers) {
    System.out.println(lineOfIntegers);
} 
```

**输出**

```
[2, 5, 10]
[2, 5, 15] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T00:55:40.383

您将第一个令牌添加到循环`ArrayList`中的多次。`for`只需遍历令牌：

```
while ((newLine=f.readLine()) != null){
   StringTokenizer st = new StringTokenizer(newLine);
   while (st.hasMoreTokens()) {
      int number = Integer.parseInt(st.nextToken()); 
      input.add(number);
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T00:56:17.227

分词器语句必须直接在外循环中。

```
while((newLine=f.readLine())!=null){
     StringTokenizer st = new StringTokenizer(newLine);  //this must be once for every line. not for every character in each line
     while(st.hasNext()){

         int i1 = Integer.parseInt(st.nextToken()); 
         System.out.println("Adding to list"+i1);
         input.add(i1);
     }
} 
```

# java - actionperformed 没有感应到按钮点击

> ID：16126816
> 
> 赞同：-1
> 
> 时间：2013-04-21T00:43:10.033
> 
> 标签：java, swing, action, jbutton, actionlistener

所以我有一些按钮：
`static JButton rpsls = new JButton(new ImageIcon(rpslsscaled));`
rpslsscaled 是一些图像。所以我试着拿到按钮

```
public class SomeClass implements ActionListener{
    ...
    static JButton rpsls = new JButton(new ImageIcon(rpslsscaled));
    ...
    class SomeInnerClass implements ActionListener{
    ...
        public void actionPerformed(ActionEvent e){
            if (e.getSource() == rpsls) {
                JOptionPane.showMessageDialog(null,"You clicked rpsls!");
            }
        }
    }
    ...
    public void actionPerformed(ActionEvent e){
    ...
    }
} 
```

当我按下按钮`rpsls`时，什么也没有发生。它不会打印“您点击了 rpsls！”。这是因为这两种`actionPerformed`方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:44:48.377

问题：

*   你在哪里将你的 ActionListener 添加到你的 JButton 中？
*   为什么要使用静态变量？没有必要，事实上有一个强有力的论据*不*这样做。

* * *

解决方案：

*   `addActionListener(...)`如果您希望按钮通过调用JButton 实例来响应，请将您的 ActionListener 添加到您的 JButton。
*   摆脱所有不必要的静态修饰符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T00:47:30.050

您错过了使用侦听器设置按钮：

```
SomeInnerClass instance = new SomeInnerClass();
rpsls.adddActionListener(instance);//Using the inner class 
```

或者

```
rpsls.adddActionListener(this);//for the main Class 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T00:53:40.840

您可能没有在外部类的按钮上添加 ActionListener。做这个：

```
rpsls.adddActionListener(new SomeInnerClass()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T00:56:35.043

在您的按钮上设置一个 actionperformed 这将在您单击时捕获事件 e 并且您可以将您的 actionPerfomed 定义为任何其他方法或您拥有的内部

# python - python os.system 似乎无缘无故挂起

> ID：16126817
> 
> 赞同：1
> 
> 时间：2013-04-21T00:43:17.653
> 
> 标签：python, ssh, os.system

所以我正在监控大量文件的修改时间。文件更新后，我通过 ssh 将其复制到另一台机器。这是我所拥有的SSCCE：

```
import os
import time

send = "/home/pi/PythonScripts/tempData.txt"
check = "/home/pi/PythonScripts/check.txt"

statbuf = os.stat(send)
print "Modification time:",statbuf.st_mtime 

def wr2(data):
    file2 = open(check, 'w')
    file2.write(str(data))
    file2.close()
    return 0

def rd():
    file = open(send, 'r')
    line2 = file.readline()
    file.close()
    return line2

def rd2():
    file2 = open(check, 'r')
    line2 = file2.readline()
    file2.close()
    return line2

while(run):
   try:
    statbuf = os.stat(send)
    line2 = rd2()
    print line2

    if (str(statbuf.st_mtime) == line2):
       print "File has not changed...\n"
       time.sleep(1)
    else:
       data = rd()
       print "Data in File: " + data
       os.system("sudo scp /home/pix/PythonScripts/tempData.txt server1:/home/tix/Server1_SSH/Real_Data.txt")
       wr2(statbuf.st_mtime)
       print "New Modification Time:",statbuf.st_mtime 
       time.sleep(1)

   except (KeyboardInterrupt, SystemExit):
        print '\nKeyboard Interrupt Caught!'
        run = 0
        raise 
```

因此，当它到达`os.system()`命令时它挂在那里没有做任何事情......但是当我在 python 解释器上运行相同的确切代码时，它工作得很好。我似乎无法理解问题是什么......任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T00:46:53.600

*sudo*可能是罪魁祸首，并且可能要求输入密码。

代替*os.system*，尝试使用[*subprocess*模块](http://docs.python.org/2.7/library/subprocess.html#module-subprocess)。这将让您看到*stdout*和*stderr*流以了解发生了什么。

另外，我会质疑在脚本中使用*sudo的做法。*通常，使用*sudo*的决定将留给调用 Python 脚本的人。

# android - 导出 C 局部变量：JNI 运行时行为问题

> ID：16126818
> 
> 赞同：1
> 
> 时间：2013-04-21T00:43:18.887
> 
> 标签：android, c++, java-native-interface, extern, memcpy

我想在 C 库（例如 libA）中导出一些静态变量，以便在其他 C 文件中从外部使用它们。

我曾经为桌面应用程序使用`extern`关键字并且它正在工作，但是当我转移到 JNI 和 Android 时，`extern`关键字无法解决问题，因为在尝试构建 libA 的 *.so 时，无论我的其他 C 文件如何（它使用 libA 静态变量），对于 libA 的所有“外部变量”，我得到了“未定义引用”的编译器错误。

为此，我在生成 libA 的 *.so 时尝试链接 C 文件，但在运行时，我注意到变量具有不同的地址，这不是`extern`关键字的正常结果。（这意味着我正在操作不同的地址<=>不同的变量而不是相同的地址<=>“相同的变量”）。

那么，有没有办法解决这个问题？也许使用 memcpy 或 memset 如果它是正确的方法，请怎么做？

提前致谢。

BR

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:29:26.047

在 JNI 文件中设置环境变量对您有帮助吗？

例如： `setenv("GLOBALVARIABLE", "ON", 1);`

# r - 比较组 x 和 y 在 R 中随时间变化的增长率

> ID：16126820
> 
> 赞同：-3
> 
> 时间：2013-04-21T00:43:40.847
> 
> 标签：r

*如果有两组数据“x”和“y”随“时间”变化，比较“x”和“y”随时间的增加率是否相同。*

我的问题是它如何开始这个问题，我需要执行哪些步骤？这个问题在过去一周一直困扰着我，我不知道如何解决它。感谢您的帮助。我将在 R 中为这个项目工作

我所做的是`plot(x~time)`，`plot(y~time)`X 和 Y 都是线性的，它们从图表的左下角到右上角。由此我如何告诉 R 找到从 X 到 y 的增长率？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T01:49:05.877

Here's some ideas to get started, though I would recommend taking a look at the link Ricardo provided in the comments if you want to get started with time series analysis in R. If this is the first thing you are doing with R, you may also benefit from some general reading at a site like: [http://www.statmethods.net](http://www.statmethods.net)

I read your data in and saved it to a `data.frame` named `test` using

```
test <- read.table(file="insert.your.file.here",header=TRUE) 
```

You can then plot the trends over `time` against one another, using `plot` and `lines` or the `matplot` function which can plot multiple columns at once.

```
matplot(test["time"],test[c("x","y")],type="l") 
```

You should end up with something like this:

![enter image description here](https://i.stack.imgur.com/PFmO8.png)

Just by eye-balling it, you can see that `y` has increased more than `x` over the period.

If you want to plot the linear trend, you can try using the `lm` function to get the relationship between `time` and the values for each of `x` and `y`. Like so:

```
lm(y ~ time, data=test), col="red")
lm(x ~ time, data=test), col="black") 
```

This will give you the gradient and intercept for the trend. The gradient is the average increase over time. You can add these lines to your plot like so:

```
abline(lm(y ~ time, data=test), col="red"))
abline(lm(x ~ time, data=test), col="black")) 
```

![enter image description here](https://i.stack.imgur.com/fOquF.png)

This is a pretty naive analysis though, and you should consider the possibility of seasonal trends in your data or other influences. I suggest you read this: [http://a-little-book-of-r-for-time-series.readthedocs.org/en/latest/src/timeseries.html](http://a-little-book-of-r-for-time-series.readthedocs.org/en/latest/src/timeseries.html)

# jquery - jQuery 并不总是加载

> ID：16126823
> 
> 赞同：-2
> 
> 时间：2013-04-21T00:44:30.913
> 
> 标签：jquery, ajax, menu, loading

我在这个特定网站上一直遇到这个问题，但是它开始影响整体体验。jQuery 并不总是正常工作。例如，我有一个使用 Jquery 的自定义下拉页面。大多数情况下，它会加载，但是有 10% 的时间是您单击按钮并且 div 不显示。我真的不知道我的网站发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:52:12.463

您是否在 Google 的 CDN 上链接到 jquery？如果不是你，你应该在[这里看到为什么。](http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/)

Google 的 CDN 几乎总是在运行，但始终保留 jquery 的备份本地副本仍然是一个好习惯。这个片段首先链接到谷歌的 CDN 版本。如果由于某种原因失败，它将加载您的本地副本。这应该可以解决 jquery 无法加载的任何可能性。

如上所述，您还应该确保在文档准备好之前不要启动自定义下拉菜单。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
if (!window.jQuery) {
    document.write('<script src="/path/to/your/jquery.min.js"><\/script>');
}

$(document).ready(function () {
    $('#yourDropdown').customDropdown();
});
</script> 
```

# python - Python更改类函数

> ID：16126828
> 
> 赞同：2
> 
> 时间：2013-04-21T00:45:05.790
> 
> 标签：python, class

在 Python 中，是否可以获取一个类并删除其成员函数之一？即：A类有7个成员函数。其他五个类继承自类 A。现在，假设其中一个类不想要类 A 的成员函数之一。有没有办法保持该功能的出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T01:06:06.510

> 现在，假设其中一个类不需要 A 类的成员函数之一。有没有办法保持该功能的出现？

__dir__[方法](http://docs.python.org/2.7/library/functions.html#dir)允许您控制“显示”哪些方法。它不会禁用该方法，它只是允许您控制所看到的内容。

理想情况下，这种努力应该伴随着覆盖有问题的方法并让它引发[*NotImplementedError*](http://docs.python.org/2.7/library/exceptions.html#exceptions.NotImplementedError)（例如，这是 Python 的[*collections.Counter.fromkeys()*](http://hg.python.org/cpython/file/0c308d65d7bc/Lib/collections.py#l490)方法中使用的方法。

根据方法的不同，还有其他禁用它的方法。例如，可以通过将继承的 __hash__ 方法设置为*None*来禁用它（例如，这是在集合抽象基类中使用的方法，例如[*collections.Mapping*](http://hg.python.org/cpython/file/0c308d65d7bc/Lib/_abcoll.py#l225)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T01:10:43.353

一般来说，您不应该在子类中删除部分基类的 API。这是因为继承的要点之一是子类*的*实例是基类的实例。如果他们缺少方法，事情可能会以尴尬的方式打破。

也就是说，如果调用不合适，有时可以覆盖继承的方法并引发异常。这可能只是在参数不是子类需要的情况下，但在某些情况下它可能适用于所有调用。不过，请尝试使异常有用，因为程序员`AttributeError`在调用已记录的方法时遇到意外或其他常见错误是没有乐趣的。

这是一个子类的示例，它覆盖了其超类的部分 API 以禁止其使用。请注意，我使用的是 getter 和 setter 方法，这通常不是很 Pythonic，但易于理解（最好使用`property`s）。

基类：

```
class Rectangle(object):
    def __init__(self, width, height):
        self._width = width
        self._height = height

    def get_width(self):
        return self._width

    def set_width(self, value):
        self._width = value)

    def get_height (self):
        return self._height 

    def set_height (self, value):
        self._height = value)

    def area(self):
        return self.get_width() * self.get_height() 
```

和一个子类：

```
class Square(Rectangle):
    def __init__(self, side):
        self._side = side

    def get_side(self):
        return self._side

    def set_side(self, value):
        self._side = value

    get_width = get_height = get_side

    def set_width(self, value):
        raise TypeError("Squares cannot have their sides changed individually")

    set_height = set_width 
```

该`area`方法是继承的，并且仍然可以在`Square`类中按预期工作，其他仅调用实例的 getter 方法而不是 setter 方法的 Rectangles 代码也是如此。

# awk - 如何将 awk 限制为仅搜索包含在某个 HTML 标记内的项目？

> ID：16126831
> 
> 赞同：1
> 
> 时间：2013-04-21T00:45:12.393
> 
> 标签：awk, replace

我有一个这样的 AWK 脚本，我将在一个文件上运行它：

```
cat input.txt | awk 'gsub(/[^ ]*(fish|shark|whale)[^ ]*/,"(&)")' >> output.txt 
```

这会为所有包含单词“fish”、“shark”或“whale”的行添加括号，例如：

```
The whale asked the shark to swim elsewhere.
The fish were unhappy. 
```

通过脚本运行后，文件变为：

```
The (whale) asked the (shark) to swim elsewhere.
The (fish) were unhappy. 
```

该文件标有 HTML 标签，我需要让替换只发生在`<b>`和`</b>`标签之间。

```
The whale asked <b>the shark to swim</b> elsewhere.
<b>The fish were</b> unhappy. 
```

这变成：

```
The whale asked <b> the (shark) to swim </b> elsewhere.
<b> The (fish) were </b> unhappy. 
```

*   匹配的粗体标签永远不会放在不同的行上。开始`<b>`标签总是与结束标签出现在同一行`</b>`。

如何将`awk`的搜索限制为仅搜索和修改在`<b>`和`</b>`标签之间找到的文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:09:23.877

这是一种使用的技术`awk`：

```
awk '/<b>/{f=1}/<\/b>/{f=0}f{gsub(/fish|shark|whale/,"(&)")}1' RS=' ' ORS=' ' file
The whale asked <b>the (shark) to swim</b> elsewhere.
<b>The (fish) were</b> unhappy. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T02:31:39.633

只要 HTML 标记不比这差，并且`<b> ... </b>`span 不包含任何其他 HTML 标记，那么在 Perl 中就相对容易了：

```
$ cat data
The whale asked <b>the shark to swim</b> elsewhere.
<b>The fish were</b> unhappy.
The <b> dogfish and the sharkfin soup</b> were unscathed.
$ perl -pe 's/(<b>[^<]*)\b(fish|shark|whale)\b([^<]*<\/b>)/\1(\2)\3/g'  data | so
The whale asked <b>the (shark) to swim</b> elsewhere.
<b>The (fish) were</b> unhappy.
The <b> dogfish and the sharkfin soup</b> were unscathed.
$ 
```

我尝试将其调整为`awk`（和`gawk`），但没有成功；匹配部分有效，但替换表达式没有。与 Perl 不同，阅读手册后，您无法识别括号中的单独匹配子表达式。

# java - Json如何从具有特殊字符的键中获取值 - json-simple

> ID：16126837
> 
> 赞同：2
> 
> 时间：2013-04-21T00:45:46.623
> 
> 标签：java, json, parsing, json-simple

我无法从键中获取值，因为键中有一个`$`。这是json对象：

```
JSONParser parser = new JSONParser();
String str = "{\"$oid\":\"5168d0e0b280f084c3742800\"}";
JSONObject obj = (JSONObject)parser.parse(str);

String oid = (String) obj.get("$oid");
System.out.println("oid: " + oid); 
```

但是输出是：

```
oid: null 
```

如何处理带有特殊字符的键`$`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:50:50.657

字符串`str`未正确形成。您需要转义引号。尝试这个：

```
String str = "{\"$oid\":\"5168d0e0b280f084c3742800\"}"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T01:07:50.433

这行得通。但我没有使用 JSONParser。

```
 String str = "{\"$oid\":\"5168d0e0b280f084c3742800\"}";
    JSONObject obj;
    try 
    {
        obj = new JSONObject(str);
        String oid = (String) obj.get("$oid");
        System.out.println("oid: " + oid);
        Toast.makeText(this, oid, Toast.LENGTH_SHORT).show();

    } 
    catch (JSONException e) {
        e.printStackTrace();
    } 
```

# java - javax.crypto 受出口管制；这意味着什么？

> ID：16126839
> 
> 赞同：7
> 
> 时间：2013-04-21T00:46:14.647
> 
> 标签：java, security

根据[http://docs.oracle.com/javase/6/docs/technotes/guides/security/overview/jsoverview.html](http://docs.oracle.com/javase/6/docs/technotes/guides/security/overview/jsoverview.html)：

> 出于历史（出口控制）的原因，密码学 API 被组织成两个不同的包。该 `java.security`包包含 *不受*出口控制的类（如`Signature` 和`MessageDigest`）。该`javax.crypto` 包包含受出口控制的类（如 `Cipher`和`KeyAgreement`）。

这是什么意思？
有什么区别？

**注意：**此文档参考在安全部分的 Java EE 文档中引用 >> [http://docs.oracle.com/javaee/6/tutorial/doc/bnbwj.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnbwj.html) | 这个参考过时了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T01:16:43.893

首先要注意的是，您引用的文本以“出于历史原因”开头。

美国对某些超过特定密钥长度的加密算法和实施实施了出口管制。它们大多在克林顿政府时期被放弃：当然是那些影响 Java 的。你读到的关于 Java 密码学的任何参考资料都是过时的。

然而，Java 受到加密*导入*策略的影响，这就是存在无限强度加密策略下载的原因。如果它在您的管辖范围内是合法的，您可以下载并安装它。它所做的只是启用已存在于 JRE 中并因此已导出的代码。量子点

# database - 在同一个 csv 文件中导出两个表

> ID：16126842
> 
> 赞同：0
> 
> 时间：2013-04-21T00:46:23.473
> 
> 标签：database, sqlite, export-to-csv

如果我的 test.db 是一个 sqlite 数据库，我有两个表，比如 tabA 和 tabB，是否可以将两个表的数据导出到一个 myFile.csv 中？

我知道如何单独导出表，但我想知道是否可以将它们导出到同一个文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T01:02:42.947

最好的答案取决于表之间的关系是什么。表中的行是否包含 1:1 映射？一张表与另一张表是否存在外键关系？

这很重要的原因是因为它关键地决定了您如何进行下一步，即将表组合（或联接）在一起。连接表后，您可以轻松地从 ResultSet 中导出所需的数据。

例如，如果 tabB 包含为 tabA 的行中包含的订单订购的项目，那么您的 tabB 很可能与 tabA 具有外键多对一关系，并且可以像这样连接在一起。

```
SELECT a.* b.*
FROM tabA AS a
JOIN tabB AS b ON a.primary_key = b.foreign_key 
```

这假设您的表格式正确并且具有明确定义的关系，您可以使用该关系以一种有意义的方式将它们连接在一起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T01:40:40.410

如果 tabA 有 A、B、C 列，而 tabB 有 A、B、C 列（即一对一映射）

```
SELECT A, B, C from tabA 
union  
SELECT A, B, C from tabB 
```

您可以对不匹配的列使用常量

```
SELECT A, B, NULL from tabA 
union  
SELECT A, NULL, C from tabB 
```

# matlab - 如何让子字符串在 matlab 中工作？

> ID：16126847
> 
> 赞同：7
> 
> 时间：2013-04-21T00:46:54.220
> 
> 标签：matlab

如果这是一个新手问题，我深表歉意，但我已经阅读了[这里](http://www.mathworks.com/help/symbolic/mupad_ref/substring.html)的文档，它没有说明在使用子字符串之前必须输入任何命令。

但是，当我尝试按如下方式调用它时：

> 子字符串（'你好世界'，2）

它给了我错误

> ？？？'char' 类型的输入参数的未定义函数或方法 'substring'。

调用 this 的正确方法是什么`substring`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-21T08:20:48.680

不要减损 OP 的答案，它实际上更直接地解决了您提出的问题，但假设您想要做的只是从字符串中提取一定数量的字符，那么您只需要 MATLAB 的索引：

```
myString = 'Hello, world!';
mySubstring = myString(3:end)
mySubstring =

llo, world! 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T00:55:07.330

substring 根本不是 MATLAB 函数，至少在 MATLAB 中是这样。有一个子字符串 JAVA 函数，但我不知道这是否是你要问的。

```
>> which substring
substring is a Java method  % java.lang.String method 
```

以上还告诉你你需要做什么。看[这里](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)。（谷歌是你的朋友。当然，你可以很容易地完成我刚才所做的事情，并且更快地得到这个答案。）

您可能还在谈论一些自定义代码，由您的某个同事编写。在这种情况下，请与您的朋友交谈。我经常听到有人编写的工具，然后作为遗留代码留下，不受支持。最终，当安装新版本的 MATLAB 时，它会因为路径问题而消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-27T16:47:02.660

你可能真的想要strsplit。这将通过给定或默认分隔符解析 char 数据，并返回片段的单元格数组。

# java - 基于枚举值的屏幕 ComboBoxModel

> ID：16126852
> 
> 赞同：0
> 
> 时间：2013-04-21T00:48:21.890
> 
> 标签：java, swing, enums, jcombobox

我正在尝试使用基于玩家枚举的枚举来填充组合框。

例如，在初始化游戏时，玩家选择一个派系（FactionType）。FactionType 枚举用于每个单元（ShipType）的枚举值。ShipType(FactionType) 枚举，以便每艘船都可以切换为适当的对象并实例化。我遇到的问题是如何仅使用玩家选择的那个派系的单位来填充组合框。下面的示例代码：

```
public enum FactionType {
faction1, faction2, faction3
}

public enum ShipType {
Ship1(faction1), Ship2(faction2), Ship3(faction3)

private FactionType faction;

private ShipType(FactionType faction)
this.faction = faction;
}

public FactionType getFaction() {
return this.faction
} 
```

那么是否可以在过滤掉任何不属于玩家派系的单位类型后创建一个 ComboBoxModel ？通常我只会做一个条件语句来检查 player.faction = faction 但不完全确定如何创建 ComboBoxModel 所以任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:26:40.697

如此处所述，请考虑为每个派系设置一个而不是单独[的](https://stackoverflow.com/a/6559541/230513)`enum`类。`EnumSet`

```
public enum Ship {

    Unit1, Unit2, Unit3, Unit4, Unit5, Unit6;
    public static Set<Ship> factionOne = EnumSet.range(Unit1, Unit5);
    public static Set<Ship> factionTwo = EnumSet.allOf(Ship.class);
}
...
DefaultComboBoxModel modelOne = new DefaultComboBoxModel();
for (Ship ship : Ship.factionOne) {
    modelOne.addElement(ship);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T01:50:55.817

I believe I've over complicated my code.

Instead of having a FactionType and ShipType, it would be simpler to split the factions into separate enums. so that each factions data is better encapsulated and simpler to set for the combo box model. so now my enums will look like so:

```
public enum factionOne {

unit1, unit2, unit3, unit4, unit5;

}

public enum factionTwo {

unit1, unit2, unit3, unit4, unit5, unit6;

}

etc...... 
```

# emacs - Clojure Emacs 连接到远程 REPL

> ID：16126853
> 
> 赞同：1
> 
> 时间：2013-04-21T00:48:25.370
> 
> 标签：emacs, clojure, nrepl

当使用普通 repl 时，`tramp`我可以导航到远程目录并执行 `inferior-lisp`，它会在远程启动一个`inferior-lisp`进程。使用 nrepl，我可以在远程机器上启动 repl，而`lein repl`不是使用连接到它，`nrepl-jack-in`但问题在于 nrepl 我必须设置防火墙规则或使用 ssh 和转发端口，以便我可以插上。使用劣质lisp和tramp方法我做不需要做任何特别的事情`M-x inferior-lisp`，我就准备好了。有没有办法使用 nrepl 和 tramp 实现类似的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:41:12.290

根据您的设置，很可能会`inferior-lisp`调用本地进程。如果您只想在本地处理 Clojure 项目，我建议您从远程计算机下载项目文件夹并在本地使用`nrepl-jack-in`.

# ios - imageView 不显示来自 UIImagePickerController 的图像

> ID：16126859
> 
> 赞同：0
> 
> 时间：2013-04-21T00:49:12.010
> 
> 标签：ios, objective-c

我正在尝试以编程方式在一个视图控制器中使用来自 UIImagePickerController 的图像，并将其作为另一个视图控制器中的 imageView。这是来自 viewController A 的方法

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{
UIImage *image = info[UIImagePickerControllerOriginalImage];

 bandCropViewController *viewController = [[bandCropViewController alloc]init];
 viewController.imageOriginal = image;
[self dismissViewControllerAnimated:YES completion:^{
 // Move to Crop View Controller
 [self presentViewController:viewController animated:YES completion:nil];
}];
} 
```

ViewController B 看起来像这样：

```
- (void)viewDidLoad
{
  [super viewDidLoad];
  imageView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 100, 320, 280)];
  [self.imageView setImage:imageOriginal];
  imageView.backgroundColor = [UIColor redColor];
  [self.view addSubview:imageView];
} 
```

viewController B 以应有的红色显示 imageView 框架。但形象并没有延续。

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:46:04.990

强烈推荐[这个教程](http://blog.hanpo.tw/2012/01/uiimagepickercontroller-and-simple.html)

它应该可以帮助你。看起来你可能在做一些不必要的事情

`- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{`

# ruby - 我怎样才能在逻辑上 OR 两个包含？红宝石的条件？

> ID：16126863
> 
> 赞同：11
> 
> 时间：2013-04-21T00:49:47.297
> 
> 标签：ruby

我开始学习 Ruby，在包含方面需要一些帮助吗？方法。

下面的代码工作得很好：

```
x = 'ab.c'
if x.include? "." 
    puts 'hello'
else
    puts 'no'
end 
```

但是当我这样编码时：

```
x = 'ab.c'
y = 'xyz'
if x.include? "." || y.include? "."
    puts 'hello'
else
    puts 'no'
end 
```

如果在我运行它时给我错误：

```
test.rb:3: syntax error, unexpected tSTRING_BEG, expecting keyword_then or ';' o
r '\n'
if x.include? "." || y.include? "."
                                 ^
test.rb:5: syntax error, unexpected keyword_else, expecting end-of-input 
```

这是因为包含吗？方法不能有句柄逻辑运算符？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-21T00:58:33.513

其他答案和评论是正确的，由于 Ruby 的语言解析规则，您只需要在参数周围加上括号，例如，

```
if x.include?(".") || y.include?(".") 
```

您也可以像这样构造您的条件，当您添加更多数组进行搜索时，它会更容易扩展：

```
if [x, y].any? {|array| array.include? "." }
  puts 'hello'
else
  puts 'no'
end 
```

有关[`Enumerable#any?`](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-any-3F)更多详细信息，请参阅。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-21T00:52:48.443

这是因为 Ruby 解析器，它无法识别传递参数和逻辑运算符之间的区别。

只需稍微修改您的代码以区分 Ruby 解析器的参数和运算符。

```
if x.include?(".") || y.include?(".")
    puts 'hello'
else
    puts 'no'
end 
```

# clojure - 在 clojure 中检查 NaN

> ID：16126871
> 
> 赞同：7
> 
> 时间：2013-04-21T00:50:58.463
> 
> 标签：clojure, floating-point, nan

我有一些算法出于某种原因会吐出 NaN，我都想暂时过滤掉这些不好的结果，稍后再去找出问题所在。因此，我需要检查一个值是否为 NaN，我该怎么做？

我想我可以使用 NaN 是唯一不等于自身的值的技巧，所以我编写了以下函数

```
(defn NaN?
  "Test if this number is nan"
  [x]
  ; Nan is the only value for which equality is false
  (false? (= x x))) 
```

如果我问这行得通`(NaN? Double/NaN Double/NaN`）。但是，如果值 NaN 在某些数据结构中（就像这种情况一样），并且在某种意义上都已准备好进行评估，那么这不起作用。例如

```
(def test Double/Nan)
(NaN? test) 
```

返回假。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-21T07:58:27.713

使用 java 静态函数进行这些测试没有任何问题，试试吧。

```
(Double/isNaN x) 
```

正如您发现的那样，NaN 不等于包括其自身在内的任何东西，如果您想忽略 NaN 值的相等性，您可以删除、替换（参见 clojure.walk/prewalk-replace）或显式测试它们，例如。

```
(let [nan? #(and (number? %) (Double/isNaN %))
      vec-data [1 Double/NaN]
      map-data {:a 1 :b Double/NaN}]

    [;; compare vectors without NaN values
    (= (remove nan? vec-data) (remove nan? vec-data))

    ;; check that all differences in 2 maps are nan? 
    (every? nan? (mapcat vals (take 2 (clojure.data/diff map-data map-data))))])

     ;; => [true true] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T01:12:08.900

==的以下使用做到了

```
(defn NaN?
  "Test if this number is nan"
  [x]
  ; Nan is the only value for which equality is false
  (false? (== x x))) 
```

更简单地说，我们可以只使用 Double/isNaN

# visual-c++ - OpenCV 将图像存储在对象中 (OOP)

> ID：16126873
> 
> 赞同：0
> 
> 时间：2013-04-21T00:51:09.703
> 
> 标签：visual-c++, opencv

我在面向对象的方法中使用 OpenCV 在 C++ 中编程。基本上我有一个名为 People[8] 的对象数组。对于每个数组，我想通过使用网络摄像头拍照来为其分配一个图像。我做了这样的事情：

```
for (int i=0; i<8; i++){
    cvWaitKey(0);                         //wait for input then take picture
    Mat grabbed = cam1.CamCapture();
    People[i].setImage(grabbed);
    imshow("picture", grabbed);
    cvWaitKey(1);
} 
```

我在这里面临两个问题：1）imshow 不显示捕获的“最新”图像，它显示以前拍摄的图像，即（i-1）而不是 i。2）当我将所有图像一起显示时，会出现8个窗口，它们都在显示相机上拍摄的最后一张图像。

我不知道出了什么问题，有人可以请教吗？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:57:32.847

我有一段时间没有使用 OpenCV，但我会在 cvWaitKey(1) 周围移动，我也不会有 2 次调用它，据我记得它类似于 glFlush()。此外，我会将 1 更改为 10。出于某种原因，我记得 1 不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T08:37:26.143

“他们都在显示相机上拍摄的最后一张图像。”

您从捕获点获得的图像到驱动程序内存。所以前一个图像被后者覆盖。

您需要存储您获得的垫子的 clone()，例如：

```
People[i].setImage( grabbed.clone() ); 
```

# zurb-foundation - 基础 4 中的 UL 手风琴

> ID：16126876
> 
> 赞同：0
> 
> 时间：2013-04-21T00:51:32.337
> 
> 标签：zurb-foundation

我是foundation 4的新手，我们目前在我们的项目MVC4 + Foundation 4中使用foundation 4（通过NuGet包）

我们想在我们的观点上使用手风琴。

基础 4 提供部分；[http://foundation.zurb.com/docs/components/section.html](http://foundation.zurb.com/docs/components/section.html) 但是因为这在网站上看起来太平淡了，我们查看了我们认为适合我们网站的foundation 3手风琴；[http://foundation.zurb.com/old-docs/f3/elements.php](http://foundation.zurb.com/old-docs/f3/elements.php)。需要专家帮助了解我们如何使手风琴部分的外观和感觉类似于基础 3 中可用的部分。

我们知道foundation 4不再提供图像，那么我们如何实现右侧的小图标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T08:30:59.183

SCSS 始终是最佳选择。但是，对于尚未准备好深入 SCSS 的其他人，您可以通过 CSS 来完成。在您的 CSS 文件中，只需包含以下内容：

```
.section-container.accordion > section > .title:after,
.section-container.accordion > .section > .title:after {
    content: '\25B8';
    position:absolute;
    right:10px;
    font-size:22px;
}
.section-container.accordion > section.active > .title:after,
.section-container.accordion > .section.active > .title:after {
    content: '\25BE';
    position:absolute;
    right:10px;
    font-size:22px;
} 
```

当然，您可以根据需要更改字体大小，也可以简单地省略它。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T22:48:46.917

我不是专家，但如果我理解正确，您只想在右侧添加小三角形图像。首先，您使用的是 scss 文件吗？如果不是，您绝对应该在[这里查看](http://sass-lang.com/)。您只需安装[此](http://visualstudiogallery.msdn.microsoft.com/2b96d16a-c986-4501-8f97-8008f9db141a)Visual Studio 插件，然后下载[zurb-foundation scss 文件](https://github.com/zurb/foundation/tree/master/scss)并将其添加到您的项目中。

接下来，转到 _section.scss 文件并查找这部分代码：

```
@mixin section($section-type:accordion) {

  // Accordion styles
  @if $section-type == accordion {

    border-top: $section-border-size $section-border-style $section-border-color;
    position: relative;

    .title {
      top: 0;
      cursor: pointer;
      width: 100%;
      margin: 0;
      background-color: $section-title-bg;

      ***********************************
      *** add a background image here ***
      ***********************************

      a {
        padding: $section-padding;
        display: inline-block;
        color: $section-title-color;
        font-size: emCalc(14px);
        white-space: nowrap;
        width: 100%;
      }
      &:hover { background-color: darken($section-title-bg, $section-function-factor/2); }
    }

    .content {
      display: none;
      padding: $section-padding;
      background-color: $section-content-bg;

      &>*:last-child { margin-bottom: 0; }
      &>*:first-child { padding-top: 0; }
      &>*:last-child { padding-bottom: 0; }
    }

    &.active {
      .content { display: block; }
      .title { background: $section-title-bg-active; 

    **********************************************
    *** add the "active" background image here ***
    **********************************************
             }

    }

  } 
```

添加三角形有两种方法，使用您选择的图像，或者更好的是，使用创建三角形的基础 css 函数！

```
@include css-triangle(5px, #aaaaaa, top); 
```

注意我没有测试过修改基础部分，但我很确定这应该可以解决问题。

# java - ListView 仅在滚动时显示行

> ID：16126882
> 
> 赞同：0
> 
> 时间：2013-04-21T00:52:41.480
> 
> 标签：java, android, listview

现在我的 ListView 出现问题，当我加载列表活动时，第一行显示，但其他行为空白，当我向下滚动并返回更多行时弹出。我的列表视图正在获取正确的数据而且我的删除方法仍然有效，但唯一的问题是在我向下滚动和向上滚动之前没有行，并且只有 2-3 行显示，除非我使 textSize 更大，然后会显示更多行。

管理类

```
package com.fullfrontalgames.numberfighter;

import android.app.ListActivity;
import android.content.Context;
import android.database.Cursor;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.ListAdapter;
import android.widget.TextView;

public class Admin extends ListActivity {
    private DBAdapter db;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.admin);

        DBAdapter db = new DBAdapter(this);
        db.open();
        getListView().setAdapter(new PlayerAdapter(this, db.getAllPlayers()));
    }

    private class PlayerAdapter extends BaseAdapter implements OnClickListener, ListAdapter {
        private Cursor mPlayers;

        private Context mContext;

        public PlayerAdapter(Context context, Cursor players) {
            mContext = context;
            mPlayers = players;
        }

        @Override
        public int getCount() {
            return mPlayers.getCount();
        }

        @Override
        public PlayerInfo getItem(int position) {
            if (mPlayers.moveToPosition(position)) {
                String name = mPlayers.getString(mPlayers.getColumnIndex("USERNAME"));
                String password = mPlayers.getString(mPlayers.getColumnIndex("PASSWORD"));
                String email = mPlayers.getString(mPlayers.getColumnIndex("EMAIL"));

                return new PlayerInfo(name, password, email);
            }

            return null;
        }

        @Override
        public long getItemId(int position) {
            mPlayers.moveToPosition(position);
            return mPlayers.getLong(mPlayers.getColumnIndex("_id"));
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            if (convertView == null) {
                convertView = LayoutInflater.from(mContext).inflate(R.layout.list_items, parent,
                        false);
            }

            PlayerInfo playerInfo = getItem(position);
            TextView nameTextView = ViewHolder.get(convertView, R.id.AdminUsername);
            TextView passwordTextView = ViewHolder.get(convertView, R.id.AdminPassword);
            TextView emailTextView = ViewHolder.get(convertView, R.id.AdminEmail);
            Button deleteButton = ViewHolder.get(convertView, R.id.PlayerDelete, position);
            deleteButton.setOnClickListener(this);

            nameTextView.setText(playerInfo.getName());
            passwordTextView.setText(playerInfo.getPassword());
            emailTextView.setText(playerInfo.getEmail());
            return convertView;
        }

        @Override
        public void onClick(View v) {

            db.open();

            int position = (Integer)v.getTag();
            mPlayers.moveToPosition(position);
            long id = mPlayers.getLong(mPlayers.getColumnIndex("_id"));
            db.deleteFriend();
            mPlayers = db.getAllPlayers();
            notifyDataSetChanged();

            db.close();

        }
    }

} 
```

管理员 xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@color/black" >

    <ListView 
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center" >

    </ListView>

</LinearLayout> 
```

管理列表项 xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"
android:weightSum="4"
android:padding="5dp" >

<LinearLayout
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="3"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/AdminUsername"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textIsSelectable="false" />

    <TextView 
        android:id="@+id/AdminPassword"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textIsSelectable="false" />

    <TextView 
        android:id="@+id/AdminEmail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textIsSelectable="false" />

</LinearLayout>

<Button
        android:id="@+id/PlayerDelete"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Delete" />

</LinearLayout> 
```

ViewHolder 类

```
 package com.fullfrontalgames.numberfighter;

import android.util.SparseArray;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

@SuppressWarnings("unchecked")
public class ViewHolder {

    private static final String TAG = "View Holder";

    public static <T extends View> T get(View view, int id) {
        SparseArray<View> viewHolder = (SparseArray<View>)view.getTag();
        if (viewHolder == null) {
            viewHolder = new SparseArray<View>();
            view.setTag(viewHolder);
        }
        View childView = viewHolder.get(id);
        if (childView == null) {
            childView = view.findViewById(id);
            viewHolder.put(id, childView);
        }
        return (T)childView;
    }

    public static <T extends View> T get(View view, int id, int position) {
        SparseArray<View> viewHolder = (SparseArray<View>)view.getTag();
        if (viewHolder == null) {
            viewHolder = new SparseArray<View>();
            view.setTag(viewHolder);
        }
        View childView = viewHolder.get(id);

        if (childView == null) {
            childView = view.findViewById(id);
            viewHolder.put(id, childView);
        }
        childView.setTag(position);
        return (T)childView;
    }

    public TextView text1;

    public Button button;
} 
```

PlayerInfo 类

```
package com.fullfrontalgames.numberfighter;

public class PlayerInfo {
    private String mName;

    private String mPassword;

    private String mEmail;

    public PlayerInfo(String name, String password, String email) {
        mName = name;
        mPassword = password;
        mEmail = email;
    }

    public String getName() {
        return mName;
    }

    public String getPassword() {
        return mPassword;
    }

    public String getEmail() {
        return mEmail;
    }

} 
```

日志猫

```
 04-21 02:23:21.563: E/AndroidRuntime(23401): FATAL EXCEPTION: main
04-21 02:23:21.563: E/AndroidRuntime(23401): java.lang.NullPointerException
04-21 02:23:21.563: E/AndroidRuntime(23401):    at com.fullfrontalgames.numberfighter.ViewHolder.get(ViewHolder.java:40)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at com.fullfrontalgames.numberfighter.Admin$PlayerAdapter.getView(Admin.java:75)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.widget.AbsListView.obtainView(AbsListView.java:2402)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.widget.ListView.makeAndAddView(ListView.java:1769)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.widget.ListView.fillDown(ListView.java:672)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.widget.ListView.fillFromTop(ListView.java:733)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.widget.ListView.layoutChildren(ListView.java:1622)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.widget.AbsListView.onLayout(AbsListView.java:2237)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.view.View.layout(View.java:13840)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.view.ViewGroup.layout(ViewGroup.java:4372)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1649)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1507)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1420)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.view.View.layout(View.java:13840)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.view.ViewGroup.layout(ViewGroup.java:4372)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.view.View.layout(View.java:13840)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.view.ViewGroup.layout(ViewGroup.java:4372)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1649)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1507)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1420)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.view.View.layout(View.java:13840)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.view.ViewGroup.layout(ViewGroup.java:4372)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.view.View.layout(View.java:13840)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.view.ViewGroup.layout(ViewGroup.java:4372)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.view.ViewRootImpl.performLayout(ViewRootImpl.java:1948)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1758)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1042)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4329)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.view.Choreographer.doCallbacks(Choreographer.java:555)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.view.Choreographer.doFrame(Choreographer.java:525)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.os.Handler.handleCallback(Handler.java:615)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.os.Looper.loop(Looper.java:137)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at android.app.ActivityThread.main(ActivityThread.java:5059)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at java.lang.reflect.Method.invokeNative(Native Method)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at java.lang.reflect.Method.invoke(Method.java:511)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:792)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:555)
04-21 02:23:21.563: E/AndroidRuntime(23401):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T05:34:26.043

类 ViewHolder

```
import android.util.SparseArray;
import android.view.View;

@SuppressWarnings("unchecked")
public class ViewHolder
{

private static final String TAG = "View Holder";

public static <T extends View> T get(View view, int id) 
{
    SparseArray<View> viewHolder = (SparseArray<View>) view.getTag();
    if (viewHolder == null) 
    {
        viewHolder = new SparseArray<View>();
        view.setTag(viewHolder);
    }
    View childView = viewHolder.get(id);
    if (childView == null) 
    {
        childView = view.findViewById(id);
        viewHolder.put(id, childView);
    }
    return (T) childView;
}

public static <T extends View> T get(View view, int id, int position) 
{
    SparseArray<View> viewHolder = (SparseArray<View>) view.getTag();
    if (viewHolder == null) 
    {
        viewHolder = new SparseArray<View>();
        view.setTag(viewHolder);
    }
    View childView = viewHolder.get(id);

    if (childView == null) 
    {
        childView = view.findViewById(id);
        viewHolder.put(id, childView);
    }
    childView.setTag(position);
    return (T) childView;
}
} 
```

班级管理员

```
public class Admin extends ListActivity
{
    private DBAdapter mDbAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.admin);

        mDbAdapter =  = new DBAdapter(this);
        mDbAdapter.open();

        getListView().setAdapter(new PlayerAdapter(this, mDbAdapter..getAllPlayers()));
    }

    private class PlayerAdapter extends BaseAdapter implements OnClickListener
    {
        private Cursor mPlayers;
        private Context mContext;

        public PlayerAdapter(Context context, Cursor players)
        {
            mContext = context; 
            mPlayers = players;
        }

        @Override
        public int getCount()
        {
            return mPlayers.getCount();
        }

        @Override
        public PlayerInfo getItem(int position)
        {
            if (mPlayers.moveToPosition(position))
            {
                String name = mPlayers.getString(mPlayers.getColumnIndex("USERNAME"));
                String password = mPlayers.getString(mPlayers.getColumnIndex("PASSWORD"));
                String email = mPlayers.getString(mPlayers.getColumnIndex("EMAIL");

                return new PlayerInfo(name, password, email);
            }

            return null;
        }

        @Override
        public long getItemId(int position)
        {
            mPlayers.moveToPosition(position);
            return mPlayers.getLong(mPlayers.getColumnIndex("_id");
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent)
        {
            if (convertView == null)
            {
                convertView = LayoutInflater.from(mContext)
                            .inflate(R.layout.list_items, parent, false);
            }

            PlayerInfo playerInfo = getItem(position);
            TextView nameTextView = ViewHolder.get(convertView, R.id.AdminUsername);
            TextView passwordTextView = ViewHolder.get(convertView, R.id.AdminPassword);
            TextView emailTextView = ViewHolder.get(convertView, R.id.AdminEmail);
            Button deleteButton = ViewHolder.get(convertView, R.id.PlayerDelete, position);
            deleteButton.setOnClickListener(this);

            nameTextView.setText(playerInfo.getName());
            passwordTextView.setText(playerInfo.getPassword());
            emailTextView.setText(playerInfo.getEmail());
            return convertView;
        }

        @Override
        public void onClick(View v)
        {
             int position = (Integer) v.getTag();
                mPlayers.moveToPosition(position);
                long id = mPlayers.getLong(mPlayers.getColumnIndex("_id"));
                mDbAdapter.deletePlayer(id);
                mPlayers = mDbAdapter.getAllPlayers();
                notifyDataSetChanged();
                break;
        }
    }

}

    public class PlayerInfo
    {
        private String mName;
        private String mPassword;
        private String mEmail;

        public PlayerInfo(String name, String password, String email)
        {
            mName = name;
            mPassword = password;
            mEmail = email;
        }

        public String getName()
        {
            return mName;
        }

        public String getPassword()
        {
            return mPassword;
        }

        public String getEmail()
        {
            return mEmail;
        }

    }
} 
```

list_items xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"
android:weightSum="4"
android:padding="5dp" >

<LinearLayout
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="3"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/AdminUsername"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textIsSelectable="false" />

    <TextView 
        android:id="@+id/AdminPassword"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textIsSelectable="false" />

    <TextView 
        android:id="@+id/AdminEmail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textIsSelectable="false" />

</LinearLayout>

<Button
        android:id="@+id/PlayerDelete"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Delete" />

</LinearLayout> 
```

# python - python scipy.odrpack.odr 示例（带有示例输入/输出）？

> ID：16126884
> 
> 赞同：11
> 
> 时间：2013-04-21T00:52:46.440
> 
> 标签：python, scipy

我是一个满意的用户`scipy.optimize.leastsq`。

我现在——真的一直都有——带有可变误差线的 x,y 数据，看起来我需要使用 scipy.odrpack.odr 来尊重某些数据中更大的不确定性。

不幸的是，我找不到包含示例输入和输出示例代码的在线教程。（我试图让这尽可能简单。）

如果有人可以发布带有示例 I/O 的示例代码，我将不胜感激。对于经常使用例程的人来说，这很容易。

谢谢！账单

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-21T02:21:52.620

[这是文档](http://www.scipy.org/doc/api_docs/SciPy.odr.odrpack.html)中示例的充实版本：

```
import numpy as np
import scipy.odr.odrpack as odrpack
np.random.seed(1)

N = 100
x = np.linspace(0,10,N)
y = 3*x - 1 + np.random.random(N)
sx = np.random.random(N)
sy = np.random.random(N)

def f(B, x):
    return B[0]*x + B[1]
linear = odrpack.Model(f)
# mydata = odrpack.Data(x, y, wd=1./np.power(sx,2), we=1./np.power(sy,2))
mydata = odrpack.RealData(x, y, sx=sx, sy=sy)

myodr = odrpack.ODR(mydata, linear, beta0=[1., 2.])
myoutput = myodr.run()
myoutput.pprint()
# Beta: [ 3.02012862 -0.63168734]
# Beta Std Error: [ 0.01188347  0.05616458]
# Beta Covariance: [[ 0.00067276 -0.00267082]
#  [-0.00267082  0.01502792]]
# Residual Variance: 0.209906660703
# Inverse Condition #: 0.105981202542
# Reason(s) for Halting:
#   Sum of squares convergence 
```

# c++ - C++ 将华氏温度转换为摄氏温度

> ID：16126886
> 
> 赞同：-1
> 
> 时间：2013-04-21T00:52:52.133
> 
> 标签：c++

这是帮助说明我的问题的屏幕截图：

![截屏](https://imageshack.us/scaled/large/37/helpvr.jpg)

我正在运行 Apache 服务器。现在，用户将在 html 页面中输入华氏度数，然后将他们带到该程序进行转换。如您所见，它的计算不正确。它采用华氏度数，出于某种原因在其上添加了额外的数字甚至字母？无论如何，任何人都可以帮我编辑我的代码以使其正常工作吗？非常感谢！！

```
#include <iostream>
    #include <string.h>
    #include <stdlib.h>
    #include <stdio.h>
    #include <time.h>
    #include <windows.h>

    using namespace std;

    //(Include the c++ getvar comment block and code here)

    int getvar(char *var, char *dest, char *stream)
    {  
        char *vptr;
        int size, i=0, j=0, hex; /* ptr+i to src, ptr+j to dest */ 

        vptr=strstr(stream, var);  

        if(vptr) ; 
        else return(1); /* 1 for a checkbox thats off */

        if((vptr==stream)||(*(vptr-1)=='&')) ; 
        else return(-1); /* -1 for a var that appears in error */

        size=(int) strlen(var)+1; /* +1 accounts for the = */

        while(*(vptr+size+i)!='&') 
        {      
                if(*(vptr+size+i)=='+') /* output a space */           
                    *(dest+j)=' ';     
                else if(*(vptr+size+i)=='%') /* hex character */           
                        {              
                            sscanf(vptr+size+i+1,"%2x",&hex);              
                            *(dest+j)=(char)hex;               
                            i+=2;          
                        }      
            else *(dest+j)=*(vptr+size+i);     
                i++; j++;  
            }  
        *(dest+j)='\0';
            return(0);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T00:56:49.273

```
cout << "Fahrenheit Temperature = " <<(fahrenheitTemp)<<
cout << "Celsius Temperature = " <<(celsiustemp)<<
cout << "</body></html>\n"; 
```

奇怪的字符是因为这都是一个长语句，而不是三个单独的语句。它打印`cout`了两次地址！

```
cout << "Fahrenheit Temperature = " <<(fahrenheitTemp)<< "<br/>\n"
     << "Celsius Temperature = " <<(celsiustemp)
     << "</body></html>\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T03:57:09.510

我不知道您的额外字符问题，但由于操作顺序，您的公式是错误的。

你有：

```
celsiustemp = fahrenheitTemp - 32.0 * (5.0/9.0); 
```

这相当于：

```
 celsiustemp = fahrenheitTemp - (32.0 * (5.0/9.0)); 
```

这不是正确的转换公式。

你应该使用：

```
 celsiustemp = (fahrenheitTemp - 32.0) * (5.0/9.0); 
```

在 C++ 中，乘法和除法运算符的优先级高于加法和减法，与科学计数法相同。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-10-23T16:58:58.583

```
#include<iostream>
#include<string>
#include<math.h>
#include<iomanip>
using namespace std;

double ferentocelsious(double feren)
{
    return 5 * (feren - 32) / 9;
}
int main(void)
{
    double ferenhit;
    cout << "Enter the temprature in ferenhit:\t";
    cin >> ferenhit;
    cout << ferenhit << " ferenhit temprature to celcious is:  " << ferentocelsious(ferenhit) << endl;
    return 0;
} 
```

# c# - 如何使用 Request.CreateResponse 控制 xml 中的节点名称？

> ID：16126889
> 
> 赞同：0
> 
> 时间：2013-04-21T00:53:01.300
> 
> 标签：c#, asp.net-web-api

我正在使用 asp.net web api，尽管我个人喜欢使用 json 处理我的数据，`HttpResponseMessage`但`Request.CreateResponse`我可以让客户决定他们宁愿做什么。

但是，当查看 xml 数据时，我发现节点名称很糟糕。我想知道除了更改文件名之外可以更改它们吗？例如，我尝试了 xmlRoot，但什么也没做。

例如我做这样的回报

```
return Request.CreateResponse<ResponseResult<List<PersonSearchDto>>>(HttpStatusCode.OK, p); 
```

我得到一个这样命名的根节点

```
ResponseResultOfArrayOfPersonSearchK0AojvId 
```

如果我可以重命名为类似`Persons`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:57:59.237

将此行添加到您的`Global.asax.cs`：

```
GlobalConfiguration.Configuration.Formatters.XmlDataContractSerializer = true; 
```

[然后按照MSDN 文章](http://msdn.microsoft.com/en-us/library/ms733127.aspx)中的说明使用`[DataMember]`和装饰您的类和属性：`[DataContract]`

```
namespace MyTypes
{
    [DataContract]
    public class PurchaseOrder
    {
        private int poId_value;

        // Apply the DataMemberAttribute to the property.
        [DataMember]
        public int PurchaseOrderId
        {

            get { return poId_value; }
            set { poId_value = value; }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:15:17.243

解决问题的正确方法是使用 CollectionDataContractAttribute：

[http://msdn.microsoft.com/en-us/library/system.runtime.serialization.collectiondatacontractattribute.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.collectiondatacontractattribute.aspx)

所以在你的情况下，你可以有这样的类型：

```
[CollectionDataContract(Name = "Persons")]
public class PersonResults : List<PersonSearchDto>
{
} 
```

# ruby-on-rails - Nokogiri - 解析 HTML并仅显示部分 URL

> ID：16126890
> 
> 赞同：1
> 
> 时间：2013-04-21T00:53:25.743
> 
> 标签：ruby-on-rails, ruby, nokogiri

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T04:43:09.127

当你处理 URL 时，你应该从 URI 开始，然后，为了弄乱路径，切换到使用`File.dirname`和/或`File.basename`：

```
require 'uri'
uri = URI.parse('http://www.yadaya.com/nyc/sales/manhattan')
dir = File.dirname(uri.path).split('/').last 
```

设置`dir`为`"sales"`.

不需要正则表达式，除了在内部做什么`parse`和`split`做什么。

在代码的上下文中使用它：

```
File.dirname(URI.parse(listings.css('a').text).path).split('/').last 
```

但是，就个人而言，为了清晰和可读性，我会将其分成两行，这意味着更容易维护。

一个警告虽然：

```
listings.css('a') 
```

返回一个类似于数组的 NodeSet。如果您正在搜索的 DOM 有多个`<a>`标签，您将获得多个 Node 传递给`text`，然后将其连接到您视为 URL 的文本中。这是等待中的一个错误：

```
require 'nokogiri'

html = '<div><a href="foo">foo</a><a href="bar">bar</a></div>'
doc = Nokogiri::HTML(html)

doc.at('div').css('a').text 
```

结果是：

```
"foobar" 
```

相反，您的代码需要是：

```
listings.at('a') 
```

或者

```
listings.at_css('a') 
```

所以只返回一个节点。在我的示例代码的上下文中：

```
doc.at('div').at('a').text
# => "foo" 
```

即使设置的代码`listings`仅导致单个`<a>`节点可见，也请使用`at`or`at_css`以确保正确性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T01:16:57.257

由于您有完整的 URL using ，您可以使用[URI](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html)`listings.css('a').text`类和正则表达式的组合解析出路径的一部分，使用如下所示：

```
require 'uri'

uri = URI.parse(listings.css('a').text)
 => #<URI::HTTP:0x007f91a39255b8 URL:http://www.yadaya.com/nyc/sales/manhattan>

match = %r{^/nyc/([^/]+)/}.match(uri.path)
 => #<MatchData "/nyc/sales/" 1:"sales">

match[1]
 => "sales" 
```

您可能需要调整正则表达式以满足您的需要，但这就是要点。

# android - 以编程方式更改 @drawable xml 中的 LAYOUT 颜色

> ID：16126892
> 
> 赞同：0
> 
> 时间：2013-04-21T00:53:40.860
> 
> 标签：android

我在这里阅读了很多关于以编程方式更改可绘制对象颜色的问题，但它们似乎与实际布局无关。当我尝试这个时：

```
RelativeLayout firstWord = (RelativeLayout)getActivity().findViewById(R.id.topBG);
Drawable layoutBG = firstWord.getDrawable();
firstWord = buttonBackground.mutate();
firstWord.setColorFilter(0xFFFF0000,Mode.MULTIPLY); 
```

我收到此错误：

> 对于 RelativeLayout 类型，方法 getDrawable() 未定义

我使用了一个drawable来给我的布局圆角，但应用程序的一部分是每次点击时背景颜色都会改变，所以我需要知道如何在代码中改变颜色。

在移动到可绘制对象之前，我使用的是：

```
firstWord.setBackgroundColor(color); 
```

这是我的可绘制对象：

round_corners.xml

```
<shape 
    xmlns:android="http://schemas.android.com/apk/res/android">

    <stroke 
        android:width="1dp" 
        android:color="#000000" />

    <padding 
        android:left="1dp" 
        android:top="1dp"
        android:right="1dp" 
        android:bottom="1dp" />

    <corners 
        android:radius="25dp" />

</shape> 
```

这是我的布局 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".VulgarActivity" 
    android:id="@+id/bottomBG"
    android:background="#ffffff"
    >
    <View
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/drop_shadow"
        >
    </View> 
    <RelativeLayout
        android:id="@+id/topBG"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginRight="10dp"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="10dp"
        android:background="@drawable/round_corners" 
        >
    <TextView
        android:id="@+id/leftWord"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="Push"
        android:textColor="#ffffff"
        android:textSize="50sp" 
        android:shadowColor="#080808"
        android:shadowRadius="10.0"
        android:shadowDx="5"
        android:shadowDy="5"
        />
    </RelativeLayout>

</RelativeLayout> 
```

在此先感谢您提供的所有帮助:)

只是一个想法：

我可以将“round_corners.xml”中的颜色值更改为@color 参考（例如：

```
android:color="@color/switcher" 
```

并将其放在值的“颜色”文件夹中

```
<color name="switcher">#000000</color> 
```

以这种方式以编程方式更改颜色会更容易吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:20:19.483

你能用这些线代替吗，我在第二行得到背景可绘制：

```
RelativeLayout firstWord = (RelativeLayout)getActivity().findViewById(R.id.topBG);
Drawable layoutBG = firstWord.getBackground();
buttonBackground = buttonBackground.mutate();
buttonBackground.setColorFilter(0xFFFF0000,Mode.MULTIPLY); 
```

# symfony1 - $sf_user->getGuardUser() 不起作用

> ID：16126898
> 
> 赞同：0
> 
> 时间：2013-04-21T00:54:54.073
> 
> 标签：symfony1, symfony-1.4

我正在使用 sf1.4 开发一个项目，我将此代码放在模板中：

```
<p class="welcome"><?php echo $sf_user->getGuardUser()->getProfile()->getFirstName().' '.$sf_user->getGuardUser()->getProfile()->getLastName()?></p>
<p class="logout"><a href="<?php echo url_for("@sf_guard_signout"); ?>
">Log Out</a></p> 
```

然后`$sf_user->getGuardUser()`单击时似乎不起作用`Logout`，并且出现此错误：

```
 Fatal error: Call to a member function getProfile() on a non-object in...on line 3 
```

编辑 ：

在 apps/myapp/config/app.yml 中，我添加：

```
all:
  sf_guard_plugin:
    profile_class:      sfGuardUserProfile
    profile_field_name: user_id 
```

编辑 2：

我发现这段代码工作得很好，是相同的模板，它给了我其他人的错误！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:20:34.863

如果您查看 sfGuardUser 对象的 getProfile() 方法，您会看到它会检查您的 app.yml 文件中的默认 Profile 类：

```
$profileClass = sfConfig::get('app_sf_guard_plugin_profile_class', 'defaultClassName'); 
```

所以请确保你的 app.yml 中有这些信息

```
// apps\myApp\config\app.yml
sf_guard_plugin:
   profile_class: MyProfileClassName 
```

# durandal - 使用 durandaljs hottowel - 我想动态更改视图但激活不允许我这样做

> ID：16126903
> 
> 赞同：0
> 
> 时间：2013-04-21T00:55:35.570
> 
> 标签：durandal, hottowel

我正在使用 Durandal，热毛巾。想要动态更改视图，根据 cookie 值隐藏一些 div。但是，如果我这样在“激活”中编写代码

```
 $("#box1").hide();
  $("#box2").show(); 
```

两个框都显示了，隐藏不起作用。但是，如果我将相同的代码连接到单击事件，那么一切正常。难道“激活”不适合做这样的事情吗？做这种事情的最好方法是什么。

```
My view is simply as follows:
<section>
     <div id="box1">
            box1
    </div>
        <div id="box2">
               box2
        </div>
</section> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T08:48:56.503

更好的方法是使用 durandal 附带的淘汰赛绑定在视图中以声明方式执行此操作。

```
<section>
    <div data-bind="visible: box1Visible">
        box1
    </div>
    <div data-bind="visible: box2Visible">
        box2
    </div>
</section> 
```

虚拟机：

```
return {
    activate: activate,
    box1Visible: ko.observable(false),
    box2Visible: ko.observable(true)
} 
```

然后，显示或隐藏这些框所需要做的就是从视图模型中设置这些可观察对象的值。然后视图模型不需要知道视图中元素的结构或名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T14:50:01.020

I think I got the answer by using ViewAttached in my model. This method is called after view is bound. read more about it here [http://durandaljs.com/documentation/Composition/](http://durandaljs.com/documentation/Composition/) and [here](https://stackoverflow.com/questions/5206102/changing-the-content-view-dynamically)

# algorithm - 使用递归函数返回

> ID：16126907
> 
> 赞同：0
> 
> 时间：2013-04-21T00:55:57.743
> 
> 标签：algorithm, data-structures, recursion, factorial

我很好奇使用递归函数时 return 是如何工作的。例如，在下面的阶乘函数中，x 将在实际发生任何计算之前达到 1。

```
int factorial (int x){ 
    if (x==1){
        return 1;     
}else{
    return x * factorial(x - 1);
    }
} 
```

假设`x = 3`。按照逻辑，它似乎应该循环 3 次并返回 1：

*   `3 != 1`
*   所以其他：`3 * factorial (2)`。
*   是什么`factorial (2)`？
*   回到顶部：`2 != 1`
*   所以其他：`2 * factorial (1)`。
*   是什么`factorial (1)`？
*   返回顶部：`1 == 1`,
*   所以：`return 1`。

但是，当然它实际上会返回 6。那么它究竟是如何工作的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T01:00:37.513

每次你说“那么递归调用的价值是什么？”，你就是`x *`从上一次迭代中删除了。如果不这样做：

```
factorial(3)
3 * factorial(2)
3 * (2 * factorial(1))
3 * (2 * 1)
= 6 
```

递归调用不像`goto`函数的顶部再次使用新参数。¹我们用新的参数再次调用函数，但只有那个调用有新的参数值：调用者仍然有它的参数和变量的旧值。

¹除非我们谈论的是尾递归，否则我们不是，而且那只是一种优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T01:01:14.937

它不是**返回**顶部，而是在`factorial`函数内部调用`factorial`函数。

实际上，最后它返回 1，但它在行中将其作为结果返回

```
return x * factorial(x - 1); 
```

之前对 的调用`factorial`，where`x`是 2。这又将 2 * 1 返回到对`factorial`where`x`是 3 的先前调用。所以这给出了 3 * 2，将结果 - 6 - 返回到函数的第一次调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T01:03:12.523

递归函数调用与普通函数调用没有区别。`return`因此，一个呼叫的 和另一个呼叫之间没有联系`return`。

在示例中，第一个`return`语句是

```
return 3 * factorial(2) 
```

它将 3 乘以`factorial`参数为 2 的调用的返回值。

但是 factorial(2) 的返回值是

```
return 2 * factorial(1) 
```

它将 2 乘以`factorial`参数为 1 的调用的返回值。

但是 factorial(1) 的返回值为 1。

So`return 2 * factorial(1)`与 相同`return 2 * 1`，即 2。

`return 3 * factorial(2)`与 相同，`return 3 * 2`即 6。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T01:03:12.423

在第一步中，`x = 3`。然后你的函数返回`3 * factorial(2)`，它本身返回`2 * factorial(1)`（因为`x`仍然不等于 1），最后`factorial(1)`返回 1。

所以最后你得到了`3 * 2 * 1 = 6`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T03:43:15.557

**堆栈帧**是在运行时用于存储有关函数调用的信息的记录，包括参数、局部变量、寄存器值和返回地址。对于每个连续的函数调用，我们将堆栈帧推入堆栈，并且当任何活动函数（位于堆栈顶部的函数）获得返回调用时，它的堆栈帧从堆栈中弹出并且它下面的函数被激活。这是示例。

![在此处输入图像描述](https://i.stack.imgur.com/mLpI1.jpg)

**因此，函数 factorial(3) 最后返回值 6**。

# apache - 如何将本地主机映射到项目目录

> ID：16126909
> 
> 赞同：0
> 
> 时间：2013-04-21T00:56:05.320
> 
> 标签：apache, mod-rewrite, apache2

目前我将我的项目放在我`/www`的 Apache2 服务器的目录中，我可以通过`localhost/abc`
但是我希望 localhost 映射到这个项目来访问这个项目，我应该怎么做才能使 localhost 映射到我的项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T01:06:36.193

你可以试试这个`/etc/apache2/httpd.conf`或类似的（它特定于你的操作系统/发行版）。我不在本地运行 Apache，所以不确定这样的事情是否可行。

```
<VirtualHost ip:port>
    ServerName localhost
    DocumentRoot /www/your_project
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T01:11:48.753

如果您无权访问 httpd.conf，您可以将其放入 .htaccess 文件中：

```
RewriteEngine on
RewriteRule   ^/$  /abc/ 
```

[http://httpd.apache.org/docs/current/rewrite/remapping.html](http://httpd.apache.org/docs/current/rewrite/remapping.html)

祝你好运！

# c++ - 如何将语句 if(isalpha(c)) 从 C++ 转换为 MIPS？

> ID：16126911
> 
> 赞同：-1
> 
> 时间：2013-04-21T00:56:24.867
> 
> 标签：c++, function, mips, translate

我正在尝试将语句`if(isalpha(c))`（其中`c`是 char 变量）从 C++ 转换为 MIPS 程序集。我试图用谷歌搜索它，但我找不到答案。有人有什么主意吗？谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T01:48:53.067

I'm just going to demonstrate one possible way, which is not efficient or "cool", but it's simple.

So, you want an equivalent of this C block:

```
if (isalpha(c))
{
    /* Do stuff... */
} 
```

Which is like this, considering how `isalpha()` works:

```
if (('A' <= c && c <= 'Z') || ('a' <= c && c <= 'z'))
{
    /* Do stuff... */
} 
```

But there are no "block" structures in assembly. Everything is a *jump* (or a `goto` in C, which you should *never* use.) So, to get closer to the assembly version, we might modify our C code to use a jump:

```
if (!(('A' <= c && c <= 'Z') || ('a' <= c && c <= 'z')))
    goto AfterStuff;

/* Do stuff... */

AfterStuff: 
```

Note that we are jumping over the "Do stuff" part if the *reverse* of our condition was true. Now, assuming we know that `'A'` < `'Z'` < `'a'` < `'z'` (the ASCII codes are, respectively: 65, 90, 97, 122,) then we can rewrite the above code like this:

```
if (c < 65)
    goto AfterStuff;
if (c <= 90)
    goto DoStuff;
if (c < 97)
    goto AfterStuff;
if (c > 122)
    goto AfterStuff;

DoStuff:
/* Do stuff... */

AfterStuff: 
```

Note that if `c` is less than 'A', we jump after the stuff. But if after comparing c and 'A', we find out that c is not only greater or equal to 'A' (because we didn't jump away,) but it's also less than or equal to 'Z', we jump directly to the "stuff" and don't check anything else. Also, the operands of the last `blt` instruction are reversed.

The assembly gets a little complicated, because we have to load the required immediates into registers and whatnot. Here's the code:

```
 lb    $t0, ($s0)            # assuming address of c is in s0 register

  addi  $t1, $zero, 65        # set t1 = 'A'
  blt   $t0, $t1, AfterStuff  # if (c < 'A') goto AfterStuff

  addi  $t1, $zero, 90        # set t1 = 'Z'
  ble   $t0, $t1, DoStuff     # if (c <= 'Z') goto DoStuff

  addi  $t1, $zero, 97        # set t1 = 'a'
  blt   $t0, $t1, AfterStuff  # if (c < 'a') goto AfterStuff

  addi  $t1, $zero, 122       # set t1 = 'z'
  blt   $t1, $t0, AfterStuff  # if ('z' < c) goto AfterStuff

DoStuff:
  # Do whatever you want to do

AfterStuff: 
```

I believe the above works, but I absolutely can't be sure. It has been more than a decade since I wrote any MIPS assembly code (or any other code for a MIPS) and I was never very proficient anyways.

# vb.net - VB.NET比较两个文本文件并添加不足的行

> ID：16126916
> 
> 赞同：0
> 
> 时间：2013-04-21T00:57:26.967
> 
> 标签：vb.net

我正在寻找解决方案来比较两个文本文件并将第二个文件中不足的行添加到第一个文件中。这是一个例子。

第一个文件内容：

```
<category = Names>
Anton
Darell
Kate
</category>
<category = Job title>
Director
President
Manager
</category>
<category = other>
bla bla
lia lia
ohoho
</category> 
```

第二个文件内容：

```
<category = Names>
Anton
Frank
Thomas
</category>
<category = Job title>
Driver
President
Manager
</category>
<category = other>
bla bla
olia olia olia
</category> 
```

如果您注意到每个文件都有某种类型的类别，那么我想将 SECOND File 中的新对象添加到 First File 中的相同类别中，因此新文件应如下所示：

```
<category = Names>
Anton
Darell
Kate
Frank
Thomas
</category>
<category = Job title>
Director
President
Manager
Driver
</category>
<category = other>
bla bla
lia lia
ohoho
olia olia olia
</category> 
```

希望这是可以解决的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:13:49.337

```
Private mResult As New List(Of String)

Public Sub MergeFiles()
    ReadFile("C:\File1.txt")
    ReadFile("C:\File2.txt")
    WriteFile("C:\Result.txt")
    mResult.Clear()
End Sub

Private Sub ReadFile(ByVal Path As String)
    Dim mSR As New System.IO.StreamReader(Path)
    Dim mItem As String = ""
    Do While Not mSR.EndOfStream
        mItem = mSR.ReadLine
        If Not mResult.Contains(mItem) Then mResult.Add(mItem)
    Loop
    mSR.Close()
    mSR.Dispose()
End Sub

Public Sub WriteFile(ByVal Path As String)
    Dim mSW As New System.IO.StreamWriter(Path)
    For Each mItem As String In mResult
        mSW.WriteLine(mItem)
    Next
    mSW.Close()
    mSW.Dispose()
End Sub 
```

# java - Android视频录制错误

> ID：16126918
> 
> 赞同：7
> 
> 时间：2013-04-21T00:57:37.513
> 
> 标签：java, android, android-camera

谁能指出我正在做的错误？我正在尝试录制一个短视频，但不知何故它找到了崩溃的方法。

**源代码：**

```
public class Start_recording extends Activity implements SurfaceHolder.Callback
{
    MediaRecorder recorder;
    SurfaceHolder surfaceHolder;
    SurfaceView myVideoView;
    Camera camera;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        Intent intent = getIntent();
        String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);
        camera = Camera.open();
        camera.unlock();
        recorder = new MediaRecorder();
        setContentView(R.layout.activity_main_rst);
        myVideoView = (SurfaceView)findViewById(R.id.surface_camera);
        surfaceHolder = myVideoView.getHolder();
        surfaceHolder.addCallback(this);
        initMediaRecorder();
        boolean exists = (new File(android.os.Environment.getExternalStorageDirectory() + "/Record/")).exists();

        if (!exists)
        {
            new File(android.os.Environment.getExternalStorageDirectory() + "/Record/").mkdirs();
        }

        try
        {
            recorder.prepare();  // This is the line of error.
            recorder.start();
            Thread.sleep(36000);
            recorder.stop();
            setupActionBar();
        }
        catch(Exception e)
        {
            Log.v("Error is there : ",e.toString());
            e.printStackTrace();
        }
    }

    public void initMediaRecorder()
    {
        try
        {

            recorder.setPreviewDisplay(surfaceHolder.getSurface());
            recorder.setCamera(camera);
            recorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
            recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
            recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
            recorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
            recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
            recorder.setOutputFile(android.os.Environment.getExternalStorageDirectory()+"/Record/test.3gp");
            recorder.setMaxDuration(300000);
        }
        catch(Exception f)
        {
            Log.v("Exception here : ",f.toString());
            f.printStackTrace();
        }
    }
} 
```

错误 ：

```
E/MediaRecorderJNI(1575): Application lost the surface
V/Error is there :(1575): java.io.IOException: invalid preview surface
W/System.err(1575): java.io.IOException: invalid preview surface
W/System.err(1575):     at android.media.MediaRecorder._prepare(Native Method)
W/System.err(1575):     at android.media.MediaRecorder.prepare(MediaRecorder.java:666)
W/System.err(1575):     at com.example.project.Start_recording.onCreate(Start_recording.java:51) 
```

我已经在 Manifest 文件中正确添加了权限，并且还设置了 setPreviewDisplay()。但我得到了无效的预览表面。请纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-10T12:03:30.893

必须`SurfaceHolder.Callback`在真正创建表面后才能开始录制。

# c# - 将图像附加到视频

> ID：16126921
> 
> 赞同：0
> 
> 时间：2013-04-21T00:58:18.067
> 
> 标签：c#, opencv, video, avi

由于 Kinect 缺少 DirectShow 过滤器，我不得不单独捕获每个 RGB 位图并合并它们。

我目前正在使用脆弱的 AviFile [C# Wrapper](http://www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library)，这会导致帧速率变慢和音频同步问题。

您如何建议实时捕获位图并将其附加到视频中？

# .net - 人类可读的自描述实体和本地化

> ID：16126926
> 
> 赞同：0
> 
> 时间：2013-04-21T01:00:01.347
> 
> 标签：.net, domain-driven-design

我正在构建一个简单的 CRUD 系统来管理企业的客户帐户。没什么特别的 ：）

该应用程序分为两部分：一个与文化无关的模型层，它是保存 EF 实体类的位置。前端是一个执行所有本地化任务的 ASP.NET MVC 项目。

我有一系列类似的 EF 实体，它们代表每个帐户的附加服务，它们都实现了接口`IAccountService`，例如：

```
public interface IAccountService {

    String DisplayName { get; set; }
    String Overview    { get; set; }
}

public partial class IntenseAuditService : IAccountService {

    // Example database columns:
    public DateTime DateTimeOfAudit { get; set; }
    public Boolean ThreatenToReportThemToTheIrs { get; set; }
    public Int32 Iterations { get; set; }

    public String DisplayName { get { return "Intense audit"; } }

    public String Overview {
        get {
            String ret = "Audit on ";
            ret += this.DateTimeOfAudit.ToString();
            if( ThreatenToReportThemToTheIrs ) {
                ret += ", and report them to the feds"
            }
            if( Iterations == 1 ) ret += " and 1 iteration";
            else if( Iterations > 1 ) ret += " and " + Iterations + " iterations.";
            return ret;
        }
    }
} 
```

主要问题是文本没有本地化，也不容易本地化：简单地传入格式字符串并不能解决英语语法的复数问题，并且不需要与其他语言一起使用。

一种可能的解决方案是从模型库中删除 Overview 字符串生成逻辑并将其移动到消费者应用程序项目（无论如何都完成本地化），但是模型库还负责生成可能包含其中包含 Overview 消息的其他实体例如，系统的一部分会自动在表中生成条目，该`CalendarItem`表的一`Description`列填充了来自`IAccountService`. 我不知道如何解开这个结。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:02:00.480

看来您正朝着正确的方向前进 - 在 ASP.NET MVC 表示层中处理本地化。一种实现方式是在表示层中有效地维护一个类层次结构，该层次结构解决了相应域实体的本地化问题。域模型甚至不会公开诸如`DisplayName`和之类的属性`Overview`- 这些属性将完全在表示层中。

要本地化类似的东西`Overview`，`IntenseAuditService`您可以有一个`IntenseAuditServiceViewModel`概览属性检索本地化格式字符串的位置，您可以在其中提供“变量”，例如迭代次数、审计日期等。您可以通过同时使用复数和单数来显式处理变形字符串格式。因此，在这种情况下，您可以拥有 4 个本地化资源，称为 IntenseAuditServiceOverview_DoReport_Plural、IntenseAuditServiceOverview_DoReport_Singular、IntenseAuditServiceOverview_NoReport_Plural、IntenseAuditServiceOverview_NoReport_Singular，其中 en-US 中的第一个格式字符串类似于

> 审核 {0:yyyyMMdd}，并将其报告给联邦调查局和 {1:#,0} 迭代。

根据您的本地化需求，您可能能够以不同的方式考虑这一点。另一种方法是只拥有每个子字符串的本地化版本。您可能还需要对每种语言进行进一步定制。

# c++ - 在运行时将函数与 LD_PRELOAD 链接

> ID：16126931
> 
> 赞同：4
> 
> 时间：2013-04-21T01:01:11.827
> 
> 标签：c++, linux, gcc

我正在编写一个库，它通过运行程序来拦截对`malloc`和在运行时的调用。`free``LD_PRELOAD=mylib myexe`

`malloc`对和的调用可以`free`很好地拦截。我的问题是 mylib 中还有另一个函数，我也想在`LD_PRELOAD`使用时拦截它，我无法弄清楚为什么它不像调用`malloc`and那样“正常工作” `free`。

在 mylib.c 中：

```
void* malloc(size_t s)
{
    return doMyMalloc();
}

void free(void* p)
{
    doMyFree(p);
}

void otherThing(size_t)
{
    doThing();
} 
```

在 myexe.cpp 中：

```
#include <malloc.h>

extern "C" void otherThing(size_t);  // Compile with -Wl,--unresolved-symbols=ignore-all

int main(int argc, char* argv[])
{
    void* x = malloc(1000);   // Successfully intercepted.
    free(x);  // Successfully intercepted.
    otherThing(1);  // Segfault.
} 
```

我设法让它工作的一种方法是：

```
typedef void (*FUNC)(size_t);
FUNC otherThing = NULL;

int main(int argc, char* argv[])
{
    otherThing = (FUNC)dlsym(RTLD_NEXT, "otherThing");
    otherThing(1);  // Successfully calls mylib's otherThing().
} 
```

但我不想写所有这些代码；我不必为`malloc`and这样做`free`。`LD_PRELOAD`如果缺少前缀，程序崩溃也没关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:34:45.703

这有点棘手。互联网上有几篇与此相关的帖子，但我会尝试将其分解为“让它发挥作用”。

如果这是在 Linux 下，那么发生的情况是应用程序已被编译为无法使用外部符号。最快的解决方案是向主应用程序添加与库中使用的相同的编译标志，即将标志添加到主应用程序`-fPIC`的编译中，就像对库所做的那样。

而不是使用`-Wl,--unresolved-symbols=ignore-all`标志，您应该使用`__attribute__ ((weak))`for 函数，例如：

```
extern "C" void otherThing(size_t) __attribute__ ((weak); 
```

并在运行时检查它是否为 NULL，这将允许您确定它是否已设置。

通过以与 a 相同的方式编译主应用程序，您可以通过手册页`.so`隐式地将其本身用作 as 的目标：`LD_PRELOAD`

**LD_PRELOAD**

> 要在所有其他共享库之前加载的附加的、用户指定的 ELF 共享库的列表。列表中的项目可以用空格或冒号分隔。这可用于选择性地**覆盖其他共享库中的函数**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T06:03:26.007

我觉得您正在应用一个解决方案 ( `LD_PRELOAD`) 来解决两个不同的问题。首先，您要修补`malloc()`和`free()`. 你已经得到了那个工作 - 太棒了。接下来，您希望拥有一个运行时“插件”系统，在该系统中，您在构建时不链接任何库，而仅在运行时链接。这通常使用`dlopen()`and来完成`dlsym()`，我建议您使用它们。

这个想法是你不想`otherThing()`在构建时指定一个特定的实现，但你确实需要在运行时有一些实现（或者你理所当然地期望崩溃）。所以让我们明确一下，并`dlsym()`在运行时使用它来解析函数名称，当然还有错误检测，以防找不到它。

至于在哪里定义`otherThing()`，它可以在一个完全独立的文件中`dlopen()`，或者在`mylib`（在这种情况下将 NULL 作为文件名传递给`dlopen()`）。

# c# - 列表中的 C# 对象重复

> ID：16126935
> 
> 赞同：0
> 
> 时间：2013-04-21T01:02:23.647
> 
> 标签：c#, list, random

我正在尝试使用对象列表创建一个简单的模拟，并使其重复执行计算以代表农民。它有一种方法可以随机增加农民的钱数，每个农民从 100 美元开始

```
 public class Farmer
    {
    public decimal money { get; set; }

    public Farmer()
    {
        money = 100;
    }

    public void doOneYear() //Represents how much money the farmer earned
    {
        Random random = new Random();
        decimal growth = random.Next(0, 100);
        decimal percentage = (growth / 1000);
        money = money * (1 + percentage);
    }
} 
```

运行的代码是这样的

```
 List<Farmer> farmers = new List<Farmer>();

        int count = 0;

        while (count < 10)
        {
            Farmer newFarmer = new Farmer();
            farmers.Add(newFarmer);
            count++;
        }

        foreach(var farmer in farmers)
        {
            int years = 0;
            while (years < 10)
            {
                farmer.doOneYear();
                years++;
            }
        }

        foreach (var farmer in farmers)
        {
            MessageBox.Show(farmer.money.ToString());
        } 
```

然而，我得到的结果只是重复列表中的第一个对象。如果我在调试模式下逐步完成整个过程，它可以正常工作，但是当我让它运行时，对象似乎是重复的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T01:15:02.980

来自 MSDN：“默认种子值源自系统时钟并且具有有限分辨率。因此，通过调用默认构造函数连续创建的不同 Random 对象将具有相同的默认种子值，因此，将产生相同的随机数集。”

我个人只是将 Random 实例设为静态成员：

```
public class Farmer
{
    public decimal money { get; set; }
    private static Random random = new Random();

    public Farmer()
    {
        money = 100;
    }

    public void doOneYear() //Represents how much money the farmer earned
    {
        decimal growth = random.Next(0, 100);
        decimal percentage = (growth / 1000);
        money = money * (1 + percentage);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T01:11:59.780

因为程序运行得非常快，而且我相信 Random 类使用时间设置作为其默认种子，所以您需要自己将种子注入到 Random 调用中。（这也可能是您在调试时会看到不同数字的原因——您使程序运行速度变慢，因此 Random 类会输出不同的数字）。

我是这样做的，并且在输出中看到每个农民的不同数字。不过，您可能希望使用不同的种子代。

```
 public class Farmer
    {
        private static int seed = 17;

        public decimal money { get; set; }
        public int FarmerID { get; set; }
        public Farmer(int id)
        {
            money = 100;
            FarmerID = id;
        }

        public void doOneYear() //Represents how much money the farmer earned
        {
            seed++;
            Random random = new Random(seed);
            decimal growth = random.Next(0, 100);
            decimal percentage = (growth / 1000);
            money = money * (1 + percentage);
        }
    } 
```

# jquery - jQuery Mobile 对话框出现然后在 Phonegap 中消失

> ID：16126940
> 
> 赞同：1
> 
> 时间：2013-04-21T01:03:11.077
> 
> 标签：jquery, cordova, jquery-mobile

我有我的索引文件作为用户输入用户名和密码的对话框。该页面在它是一个时工作正常，`data-role="page`但作为一个对话框，该对话框显示并迅速消失。它基本上会在屏幕上闪烁，我不知道为什么。我的代码如下：

HTML

```
<body onload="init()">

<div id="home">

    <div id="launcherPage" data-role="page">
        <!-- I'm just here waiting for deviceReady -->
    </div>

    <div data-role="dialog" id="loginPage">

        <div data-role="header">
          <h1>CHUNE</h1>
        </div>

        <div data-role="content">    

            <form id="loginForm">
            <div data-role="fieldcontain" class="ui-hide-label">
                <label for="username">Username:</label>
                <input type="text" name="username" id="username" value="" placeholder="Username" />
            </div>

            <div data-role="fieldcontain" class="ui-hide-label">
                <label for="password">Password:</label>
                <input type="password" name="password" id="password" value="" placeholder="Password" />
            </div>

            <input type="submit" value="Login" id="submitButton">
            </form>
            <div style="text-align: center;">Or</div> <!--need to center-->
            <a href="./register.html" data-role="button">Register</a>

        </div>

        <div data-role="footer">
            <h4>&copy; KewsPlus</h4>
        </div>

    </div> 
```

jQuery

```
function deviceReady() {
console.log("deviceReady");
$("#loginPage").on("pageinit",function() {
    console.log("pageinit run");
    $("#loginForm").on("submit",handleLogin);
    checkPreAuth();
});
$.mobile.changePage("#loginPage"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T06:50:03.193

要在加载时以编程方式打开对话框，您需要设置超时以确保页面在打开之前完全加载到 DOM 中。

```
$(document).on('pageshow', '#myPage' ,function () {
 setTimeout(function () {
  $.mobile.changePage('#dialog');
 }, 100); // delay above zero
}); 
```

> **[类似问题](https://stackoverflow.com/questions/15692186/jquery-mobile-dialog-on-page-load)**

# javascript - angularjs动画的问题

> ID：16126944
> 
> 赞同：0
> 
> 时间：2013-04-21T01:03:40.430
> 
> 标签：javascript, angularjs, angularjs-directive, angularjs-service

```
Module.animation 'slide-down', ($rootScope) ->
      console.log 'animationInit'
      animation =
        setup: () ->
        start: (element, done, memo) ->
          $(element).slideDown()
          console.log 'animationrun' 
```

* * *

```
<div style="margin-top:10px; margin-bottom:0;" class="alert alert-error" data-ng-show="errorMessage" data-ng-animate="{enter: 'slide-down'}">
    <strong>Error!</strong><br/><span>{{errorMessage}}</span>
</div> 
```

* * *

我试图让上面的 div 在 angularjs 中显示时向下滑动，但是由于某种原因它不起作用。

在我的控制台中，当我的页面加载时，我会看到“animationInit”。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T05:30:27.903

`ngShow`并且`ngHide`支持`show`和的`hide`键`ngAnimate`，不支持`enter`；另外，不要忘记调用`done`该`start`函数，以便 Angular 知道动画何时完成。

```
Module.animation "slide-down", ->
  setup: (element) ->
    element.css(display: "none")

  start: (element, done, memo) ->
    element.slideDown(done) 
```

*   工作 JSFiddle：http: [//jsfiddle.net/BinaryMuse/CcwKz/](http://jsfiddle.net/BinaryMuse/CcwKz/)
*   CodePen 上的 CoffeeScript：http: [//codepen.io/BinaryMuse/pen/nCIfD](http://codepen.io/BinaryMuse/pen/nCIfD)

# mysql - 自动删除连接数据以及删除记录？

> ID：16126945
> 
> 赞同：1
> 
> 时间：2013-04-21T01:03:49.057
> 
> 标签：mysql, sql, foreign-keys, foreign-key-relationship, junction-table

我有用户，有优惠，还有一个联结表 users_offers。

是否可以使用外键关系进行设置，以确保在删除任何用户或优惠时自动删除联结数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T01:27:32.710

声明一个引用动作：ON DELETE CASCADE，例如：

```
CREATE TABLE user (
    user_id int PRIMARY KEY
);

CREATE TABLE offer (
    offer_id int PRIMARY KEY
);

CREATE TABLE user_offer (
    user_id int,
    offer_id int,
    PRIMARY KEY (user_id, offer_id),
    FOREIGN KEY (user_id) REFERENCES user (user_id) ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES offer (offer_id) ON DELETE CASCADE
); 
```

[[SQL 小提琴]](http://sqlfiddle.com/#!2/18f68/2)

有趣的是，似乎在“速记”外键语法中指定引用操作不起作用（在 MySQL 5.5.30、5.6.6 m9 下确认）。以下被解析，但是当`user`被删除时，相应的`user_offer`不会被删除：

```
CREATE TABLE user_offer (
    user_id int REFERENCES user (user_id) ON DELETE CASCADE,
    offer_id int REFERENCES offer (offer_id) ON DELETE CASCADE,
    PRIMARY KEY (user_id, offer_id)
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T01:25:56.000

您可以在模型创建中指定它：

```
CREATE TABLE users_offers (user_id INT NOT NULL,
                           offer_id INT NOT NULL,
                           PRIMARY KEY (user_id, offer_id),
                           FOREIGN KEY (user_id) REFERENCES users(id)
                               ON DELETE CASCADE,
                           FOREIGN KEY (offer_id) REFERENCES offers(id)
                               ON DELETE CASCADE); 
```

[您可以在这个 Fiddle](http://www.sqlfiddle.com/#!2/7d28b/2)中看到一个工作示例。

# javascript - 自定义 JavaScript 异常不会在 Google Chrome 的控制台中显示它们的消息

> ID：16126947
> 
> 赞同：1
> 
> 时间：2013-04-21T01:04:18.583
> 
> 标签：javascript, google-chrome

我在 Google Chrome 的控制台中显示自定义 JavaScript 异常的消息时遇到问题。我以以下方式声明并抛出我的异常：

```
var Foo = function(message) {
    Error.call(this);
    this.message = message;
    this.name = "Foo";
}
Foo.prototype = new Error();
Foo.prototype.constructor = Foo;

throw new Foo("Bar"); 
```

这在 Internet Explorer 和 Firefox 中正常工作，但在 Chrome（Windows 8 下的 v26.0.1410.64）中我只收到以下消息：

> 未捕获 [object 对象]

我期望得到的（以及当我抛出**Error**实例时得到的）是这样的：

> Uncaught Foo：酒吧

我尝试禁用所有扩展并覆盖**toString**方法无济于事。

我还能做些什么来使这些消息正确显示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T22:12:03.993

目前似乎它没有被 Chrome 修复/正确处理。

在 Chromium 存储库中查看此问题：[https ://code.google.com/p/chromium/issues/detail?id=228909](https://code.google.com/p/chromium/issues/detail?id=228909)

特别是，[最后一条评论](https://code.google.com/p/chromium/issues/detail?id=228909#c6)：

```
function AssertException(message)
{
    "use strict";
    var result = new Error(message);
    result.name = "AssertException";
    return result;
} 
```

# symfony - Symfony2 编译的 Assetic YUI

> ID：16126948
> 
> 赞同：0
> 
> 时间：2013-04-21T01:04:29.140
> 
> 标签：symfony, capistrano, yui, assetic, compiled

我创建了一个名为“staging”的新环境，它与“生产”环境的配置几乎相同，我正在尝试在我的 css 和 js 文件上使用 yui_compressor。请在下面查看我的 css 文件示例：

```
{% stylesheets output='css/compiled/main.css' filter='?yui_css' filter='cssrewrite'
    'bundles/xyz/lib/frontend/css/social_foundicons.css'
    'bundles/xyz/lib/frontend/css/general_enclosed_foundicons.css'
    'bundles/xyz/lib/frontend/css/general_foundicons.css'
    'bundles/xyz/lib/frontend/coda/css/coda-slider.css'
    %}
    <link rel="stylesheet" type="text/css" media="screen" href="{{ asset_url }}" />
    {% endstylesheets %}

    <!-- Google fonts -->
    {% stylesheets output='css/compiled/fonts.css' filter='?yui_css' filter='cssrewrite'
    'bundles/xyz/lib/frontend/css/fonts.css'
    %}
    <link rel="stylesheet" type="text/css" media="screen" href="{{ asset_url }}" />
    {% endstylesheets %}

    <!-- Included CSS Files -->
    {% stylesheets output='css/compiled/style.css' filter='?yui_css' filter='cssrewrite'
    'bundles/xyz/lib/frontend/css/style.css'
    %}
    <link rel="stylesheet" type="text/css" media="screen" href="{{ asset_url }}" />
    {% endstylesheets %} 
```

使用 capistrano 部署时，会创建以下文件：

*   /web/css/compiled/fonts.css
*   /web/css/compiled/main.css
*   /web/css/compiled/style.css

我认为这是正确的，但是我的应用程序中的标题呈现以下内容：

```
<link rel="stylesheet" type="text/css" media="screen" href="/css/compiled/main_social_foundicons_1.css" />
<link rel="stylesheet" type="text/css" media="screen" href="/css/compiled/main_general_enclosed_foundicons_2.css" />
<link rel="stylesheet" type="text/css" media="screen" href="/css/compiled/main_general_foundicons_3.css" />
<link rel="stylesheet" type="text/css" media="screen" href="/css/compiled/main_coda-slider_4.css" />

<link rel="stylesheet" type="text/css" media="screen" href="/css/compiled/fonts_fonts_1.css" />

<link rel="stylesheet" type="text/css" media="screen" href="/css/compiled/style_style_1.css" /> 
```

服务器上不存在上述文件，我认为它应该调用 /css/compiled/fonts.css、main.css 和 style.css。

有谁知道它为什么这样做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:29:17.720

问题是我将登台环境的调试模式设置为 true。

# javascript - 将 jQuery 传递给 .animate 回调

> ID：16126950
> 
> 赞同：4
> 
> 时间：2013-04-21T01:05:04.257
> 
> 标签：javascript, jquery, callback, jquery-animate

我已经设置了一个简单的动画方法，如下所示：

```
Animator: function (obj, aniArgs, duration, aniEasArgs, completeFunction) {
    obj.stop(true, true).animate(aniArgs, {
        duration: duration,
        queue: false,
        specialEasing: aniEasArgs,
        complete: function () {
            if (completeFunction !== null) {

            };
        }
    });
    return obj;
}, 
```

我想做的是能够传入 jQuery 字符串以在完整的回调中运行。其他一切正常。例如，我将如何通过

```
$('#someElement').hide(500); 
```

进入回调？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T01:21:51.620

首先，使用要运行的代码创建一个函数：

```
function complete() {
    $('#someElement').hide(500);
} 
```

然后，在调用 Animator 时传入该函数：

```
Animator( obj, aniArgs, duration, aniEasArgs, complete ); 
```

或者，您可以将函数内联：

```
Animator( obj, aniArgs, duration, aniEasArgs, function() {
    $('#someElement').hide(500);
}); 
```

它们都以相同的方式工作，您可以使用任何一种样式，具体取决于使您的代码更易于阅读的原因。

无论哪种方式，将您的 Animator 代码更改为：

```
 if( completeFunction ) {
            completeFunction();
        }; 
```

或者，你会经常看到这样写的：

```
 completeFunction && completeFunction(); 
```

他们都做同样的事情。这只是您使用的口味问题，只是想我会提到这两种变体，以便您在看到它们时会认出它们。

请注意，`!== null`这里不需要测试，实际上也不是您想要的。那是因为如果调用者没有传入 a `completeFunction`，则该变量的值将是`undefined`，而不是`null`，因此您的测试将无法进行。有趣的是，您可以`!= null`在这种情况下使用，因为这将对两者进行测试`null`并`undefined`以相同的方式对待它们。但实际上你根本不需要这个明确的测试，如果你唯一要检查的是调用者是否提供了`completeFunction`回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T01:21:54.067

尝试

```
Animator: function (obj, aniArgs, duration, aniEasArgs, completeFunction) {
    obj.stop(true, true).animate(aniArgs, {
        duration: duration,
        queue: false,
        specialEasing: aniEasArgs,
        complete: function () {
            if (jQuery.isFunction(completeFunction )) {
                completeFunction.apply(this, arguments);
            };
        }
    });
    return obj;
}, 
```

西伯利亚

```
x.Animator(obj, aniArgs, duration, aniEasArgs, function(){
    $('#someElement').hide(500);
}) 
```

# javascript - 加载 javascript 警报 onload 而不会阻止

> ID：16126957
> 
> 赞同：0
> 
> 时间：2013-04-21T01:06:30.397
> 
> 标签：javascript, ajax, jquery

我正在尝试加载重定向到另一个页面的警报，但问题是页面的背景没有加载。唯一要呈现的 html 是 javascript 警报。知道如何解决这个问题，以便在警报之前至少加载一些 html 吗？

也试过

```
var onFooEndFunc = function() 
{
    var delay = 50; /* milliseconds - vary as desired */
    var executionTimer;

    return function() 
    {
        if (executionTimer) 
        {
            clearTimeout(executionTimer);
        }

        executionTimer = setTimeout(function() 
        {
            window.alert('Please download a game');
            window.location.href='games.html';
        }, delay);
    };
}(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:47:46.527

Popup is what you need

just set a div

```
<div id="popup_download">
  Please download a game!
    <a href="game1.exe">Mario</a>
     <a href="game2.exe">Sonice Rider</a>
</div> 
```

at style set display:hidden

```
#popup_download
{
    position:absolute;
    display:none;
    top:200px;
    left:50%;
    width:500px; 
    margin-left:-250px;
    border:1px solid blue; 
    padding:20px;
    background-color:white;
} 
```

when page is loaded just set `display:block`

```
<script type="text/javascript">
    function show_popup()
    {
      document.getElementById('popup_download').style.display = 'block'; 
    }

    window.onload = show_popup;
</script> 
```

The benefit of it is you can add any HTML elements,css and even php or asp or any code inside and your background will continue working.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T01:11:18.827

由于您使用 jQuery 进行了标记，因此您可以这样做：

```
$(document).ready(function(){
  window.alert('Please download a game')
  window.location.href='games.html';
}); 
```

或本机：

```
window.onload=function(){
  window.alert('Please download a game')
  window.location.href='games.html';
}; 
```

# javascript - appendChild、insertAdjacentHTML 和 innerHTML 有什么区别

> ID：16126960
> 
> 赞同：19
> 
> 时间：2013-04-21T01:06:48.977
> 
> 标签：javascript

`appendChild`我想知道,`insertAdjacentHTML`和之间有什么区别`innerHTML`。

我认为它们的功能相似，但我想清楚地了解用法而不是执行速度。

1.  例如，我可以使用`innerHTML`将新标签或文本插入 HTML 中的另一个标签，但它会替换该标签中的当前内容而不是追加内容。
2.  如果我想这样做（而不是替换），我需要使用`insertAdjacentHTML`并且我可以管理我想要插入新元素的位置（`beforebegin`, `afterbegin`, `beforeend`, `afterend`）

3.  最后一个如果我想创建（不插入当前标签）一个新标签并将其插入我需要使用的 HTML 中`appendChild`。

* * *

我理解正确吗？或者这三个有什么区别？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-21T01:25:50.697

*   [`element.innerHTML`](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML)

    **来自 MDN：**

    > innerHTML 设置或获取描述元素后代的 HTML 语法。

    写入时*`innerHTML`*，它将覆盖源元素的内容。这意味着必须加载和重新解析 HTML。这不是很有效，尤其是在使用内部循环时。

*   [`node.appendChild`](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)

    **来自 MDN：**

    > 将一个节点添加到指定父节点的子节点列表的末尾。如果节点已经存在，则将其从当前父节点中删除，然后添加到新的父节点。

    所有浏览器都支持这种方法，是一种将节点、文本、数据等插入 DOM 的更简洁的方法。

*   [`element.insertAdjacentHTML`](https://developer.mozilla.org/en-US/docs/DOM/element.insertAdjacentHTML)

    **来自 MDN：**

    > 将指定的文本解析为 HTML 或 XML，并将生成的节点插入到 DOM 树中的指定位置。*[ ... ]*

    所有浏览器也支持此方法。

……

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-21T01:22:41.420

这些`appendChild`方法将元素添加到 DOM。

`innerHTML`属性和方法采用`insertAdjacentHTML`字符串而不是元素，因此它们必须解析字符串并从中创建元素，然后才能将它们放入 DOM。

该`innerHTML`属性可用于获取和设置元素内容的 HTML 代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-08T10:11:17.593

@Guffa 确实解释了主要区别，即 innerHTML 和 insertAdjacentHTML 需要在添加到 DOM 之前解析字符串。

此外，请参阅这个[jsPerf](http://jsperf.com/insertadjacenthtml-perf/3)，它会告诉您通常 appendChild 对于它提供的工作来说更快。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T01:11:41.057

我知道的一个`innerHTML`可以抓取“内部 html”，`appendChild`但`insertAdjacentHTML`不能；

例子：

```
<div id="example"><p>this is paragraph</p><div> 
```

js：

```
var foo = document.getElementById('example').innerHTML; 
```

现在结束

```
foo = '<p>this is paragraph</p>'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T01:11:55.793

**文档：**

[追加子](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)

[插入相邻HTML](https://developer.mozilla.org/en-US/docs/DOM/element.insertAdjacentHTML)

[内部HTML](https://developer.mozilla.org/en/docs/DOM/element.innerHTML)

[innerHTML vs appendChild() 性能](http://glowfilter.com/blog/javascript-performance-testing-innerhtml-vs-appendchild/)

[insertAdjacentHTML vs innerHTML vs appendChild 性能](http://jsperf.com/insertadjacenthtml-vs-innerhtml-vs-appendchild)

# solr - SOLR中edismax排名中的子查询评分和坐标

> ID：16126963
> 
> 赞同：3
> 
> 时间：2013-04-21T01:07:40.987
> 
> 标签：solr

我在 solr 4.1 中使用 edismax 排名。我有一个查询解析器，它在给定一个查询字符串的情况下生成几个子查询。当我查看具体的排名细节时（通过添加“debugQuery=on”），我发现了以下内容：

1> 看起来所有子查询的排名分数是先相加的 2> 然后是这个总分和坐标因子的乘积。看起来坐标因子是匹配子查询的比率。例如，如果一个查询变成了 3 个子查询，并且只有其中 1 个被命中，那么坐标因子将是 1/3。

我想知道 1> 我的观察是否正确。2> 如果是这样，是否有办法改变这些行为，如下所示：

1> 不用对子查询的分数求和，只取最大分数。2> 忽略坐标因子。

如果当前的 solr 4.1 实现不支持，那么任何要更改或用作参考的源代码的指针都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T18:11:46.737

检查控制行为的参数：-

[决胜局](http://wiki.apache.org/solr/DisMaxQParserPlugin#tie_.28Tie_breaker.29)-

> “0.0”的值使查询成为纯粹的“析取最大查询”——只有最大得分的子查询对最终得分有贡献。“1.0”的值使查询成为纯粹的“析取和查询”，其中最大得分子查询无关紧要，最终得分是子得分的总和。通常较低的值（即：0.1）是有用的。

[坐标](http://wiki.apache.org/solr/DisMaxQParserPlugin#mm_.28Minimum_.27Should.27_Match.29)-

> 在 Solr 1.4 及之前的版本中，如果您想要 q.op=OR 的等价物，则基本上应该设置 mm=0，如果您想要 q.op=AND 的等价物，则应设置 mm=100%。在 3.x 和 trunk 中，mm 的默认值由 q.op 参数决定（q.op=AND => mm=100%；q.op=OR => mm=0%）。请记住，默认运算符受您的 schema.xml 条目的影响。在旧版本的 Solr 中，默认值为 100%（所有子句必须匹配）

移除 mm 因子以移除坐标计算并将平局设置为 0 以考虑得分的最大值。

# python - Ctypes、C 扩展和外部库：将 Long 转换为 Void 指针

> ID：16126964
> 
> 赞同：2
> 
> 时间：2013-04-21T01:07:47.563
> 
> 标签：python, casting, ctypes, void-pointers

`ctypes`我使用我现在正在尝试改进的 C 库构建了一个瘦包装器。该库有一个`add_datum(*graph,int)`我已经包装好的函数（包括`Structure`for `graph`），并且它运行成功。

问题是我需要调用这个函数超过 200 万次，而且性能非常糟糕。我实现了一个简短的 C 函数`add_data(*graph, int[])`，它与重复调用`add_datum(*graph, int)`. 通过节省一些冗余的 C 级验证`*graph`和 2M+ python 函数调用，我大大缩短了执行时间。

我担心的是代码的可移植性，因为我必须将由 . 返回的 Python 整数`ctypes.addressof`转换为`*void`.

以下是相关的代码位（错误检查、去除引用）：

```
int extract_graph(PyObject* pygraph, graph** mygraph) {
  PyObject* ctypes_ptr, graph_obj, addr_obj;
  ctypes_ptr = PyObject_GetAttrString(pygraph, "graph_ptr");
  graph_obj = PyObject_GetAttrString(ctypes_ptr, "contents");
  addr_obj = PyObject_CallFunctionObjArgs(addressof, graph_obj);
  *mygraph = (graph*) PyLong_AsVoidPtr(addr_obj); /* <-------------------------- */ 
```

和 python 类定义：

```
class PyGraph(object):
    def __init__(self):
        self.graph_ptr = ctypes.pointer(c_Graph()) 
```

这是健壮和跨平台的吗？从我在 Google/SO 上找到的内容来看，它似乎`ctypes`没有更友好的 C API。

我只是担心[PEP 353](http://www.python.org/dev/peps/pep-0353/)，坦率地说，这让我有点过头了。

# php - 将表单数据从 VB.NET 发布到 PHP 脚本

> ID：16126968
> 
> 赞同：0
> 
> 时间：2013-04-21T01:08:26.610
> 
> 标签：php, mysql, vb.net, forms

因此，我试图在我的 vb.net 应用程序上创建一个登录表单，该表单将通过我的 php 脚本连接到我的 mysql 数据库中。所以我设置了一个 wampp 服务器来测试它。在下面得到我的php代码

```
 <?php
if($_POST)
{
    if(isset($_POST["username"]) && isset($_POST["password"]))
    {
        $connect = mysql_pconnect("localhost","root","");
        if($connect)
        {
            $select = mysql_select_db("ktmf",$connect);
            if($select)
            {
                $user = mysql_escape_string($_POST["username"]);
                $pwd = mysql_escape_string($_POST["password"]);
                $GetRows = mysql_query("SELECT * FROM users WHERE username='$user' AND password='$pwd'");
                $RowCount=mysql_num_rows($GetRows);
                if($RowCount>0)
                {
                    die("Correct !");
                }
                else
                {
                    die("Incorrect !");
                }
            }
            else
            {
                die("Unable to select database." . mysql_error());
            }
        }
        else
        {
            die("Unable connect to database." . mysql_error());
        }
    }
    else
    {
        die("Access Denied!");
    }
}
else
{
    die("Access Denied!");
}
?> 
```

然后我在那里得到了我的 vb.net 代码

```
Imports System.Net
Imports System.Text

Public Class login

    Function AuthUser(ByVal AuthenticationPage As String, ByVal Username As String, ByVal Password As String) As Boolean
        Dim wc As New WebClient()
        wc.Headers.Add("Content-Type", "application/x-www-form-urlencoded")
        Dim Data As String = String.Format("username={0}&password={1}", WebUtility.UrlEncode(Username), WebUtility.UrlEncode(Password))
        Dim ResponseBytes() As Byte = wc.UploadData(AuthenticationPage, "POST", Encoding.ASCII.GetBytes(Data))
        Dim Response As String = Encoding.ASCII.GetString(ResponseBytes)
        If Response.Contains("Correct") Then
            Return True
        Else
            Return False
        End If
    End Function

    Private Sub login_Load(sender As Object, e As EventArgs) Handles MyBase.Load

    End Sub

    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        If AuthUser("http://127.0.0.1/login.php", TextBox1.Text, TextBox2.Text) Then
            Me.Hide()
            works.Show()
        Else
            MsgBox("You have provided invalid username or password. Unable to login.")
        End If
    End Sub
End Class 
```

因此，当我尝试使用应用程序登录时，我收到错误“您提供的用户名或密码无效。无法登录。” 我指定了错误的情况。

我仍然不知道我做错了什么，但是如果有人可以帮助我，我会很感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T05:51:30.420

您的问题不包含太多信息，因此仅笼统地说：

1）检查您得到的实际响应（如果有）

2）如果您没有得到任何响应，请检查 Web 服务器日志以查看请求是否存在

3) 在 VB.NET 上独立测试您的 PHP 脚本。例如，简单的 HTML 表单就可以了。

如果您根据上述发现与我们分享您的发现，您可能会得到更具体的答案。

# javascript - html 语法错误，innerHTML 不起作用

> ID：16126969
> 
> 赞同：0
> 
> 时间：2013-04-21T01:08:35.203
> 
> 标签：javascript, html, innerhtml

这是我的代码：

```
<html>
    <style type="text/css">
        select {font-family: helvetica; font-size:24; text-align:center; width: 400px;}
        #message {font-family:helvetica; font-size:24; text-align:center;}
    </style>
    <table>
        <tr>
            <td>
                <select name="course" class="ddList">
                    <option value=""> (please select a course) </option>
                    <option value="physics">Physics</option>
                    <option value="calc">Calculus</option>
                    <option value="stats">Statistics</option>
                    <option value="engl">English</option>
                    <option value="hist">US History</option>
                    <option value="compsci">Computer Science</option>
                </select>
            </td>    
            <td>
                <button onClick="showCourse()">Describe me!</button>
            </td>
        </tr>
    </table>
    <div id="message">Please select a course.</div>

    <script>
        function showCourse(){
            var op = document.getElementById("course").value;
            var desc = "";
            if(op == "physics")
                desc = "Description of AP physics goes here...";
            else if(op == "calc")
                desc = "Description of AP calculus goes here...";
            else if(op == "stats")
                desc = "Description of AP statistics goes here...";
            else if(op == "engl")
                desc = "Description of AP english goes here...";
            else if(op == "hist")
                desc = "Description of AP US history goes here...";
            else if(op == "compsci")
                desc = "Description of AP computer science goes here...";
            else
                desc = "Please select a course to see the description."
            document.getElementById("message").innerHTML = desc;
        }
    </script>
</html> 
```

基本上我希望通过下拉菜单中选择的选项来修改 div“消息”。但是它不起作用，我不知道为什么。我已经多次查看代码。我认为另一双眼睛会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T01:16:06.033

您尝试从具有 id 的元素中获取值`course`，但没有这样的元素。

我假设这`select`是您要使用的：

```
<select name="course" id="course" class="ddList"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T01:14:45.277

我认为最好使用 jQuery click 事件来完成。使用点击事件有助于将您的设计与 JavaScript 分开，这总是一件好事。

这是一个有效的 JSFIDDLE：http: [//jsfiddle.net/paxm8/](http://jsfiddle.net/paxm8/)

HTML：

```
<select id='course' name="course" class="ddList">
            <option value=""> (please select a course) </option>
            <option value="physics">Physics</option>
            <option value="calc">Calculus</option>
            <option value="stats">Statistics</option>
        </select>
        <button id='showcourse' >Describe me!</button>

        <div id="message">Please select a course.</div> 
```

JS：

```
$(document).on("click","#showcourse",function(){
var op = document.getElementById('course').value
       if(op == "physics")
        desc = "Description of AP physics goes here...";
    else if(op == "calc")
        desc = "Description of AP calculus goes here...";
    else if(op == "stats")
        desc = "Description of AP statistics goes here...";
    else if(op == "engl")
        desc = "Description of AP english goes here...";
    else if(op == "hist")
        desc = "Description of AP US history goes here...";
    else if(op == "compsci")
        desc = "Description of AP computer science goes here...";
    else
        desc = "Please select a course to see the description."
    document.getElementById("message").innerHTML = desc;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T01:32:19.957

`script`首先，您应该在调用函数之前将标签移到顶部`showCourse()`：

```
<html>
<style type="text/css">
    select {font-family: helvetica; font-size:24; text-align:center; width: 400px;}
    #message {font-family:helvetica; font-size:24; text-align:center;}
</style>

<script>
    function showCourse(){
        var op = document.getElementById("course").value;
        var desc = "";
        if(op == "physics")
            desc = "Description of AP physics goes here...";
        else if(op == "calc")
            desc = "Description of AP calculus goes here...";
        else if(op == "stats")
            desc = "Description of AP statistics goes here...";
        else if(op == "engl")
            desc = "Description of AP english goes here...";
        else if(op == "hist")
            desc = "Description of AP US history goes here...";
        else if(op == "compsci")
            desc = "Description of AP computer science goes here...";
        else
            desc = "Please select a course to see the description."
        document.getElementById("message").innerHTML = desc;
    }
</script>
<table>
    <tr>
        <td>
            <select name="course" class="ddList">
                <option value=""> (please select a course) </option>
                <option value="physics">Physics</option>
                <option value="calc">Calculus</option>
                <option value="stats">Statistics</option>
                <option value="engl">English</option>
                <option value="hist">US History</option>
                <option value="compsci">Computer Science</option>
            </select>
        </td>   
        <td>
            <button onClick="showCourse()">Describe me!</button>
        </td>
    </tr>
</table>
<div id="message">Please select a course.</div>
</html> 
```

其次，您忘记在`select`标签中指定 id 属性：

```
<select name="course" id="course" class="ddList"> 
```

# c - 在 C 中输入字符时代码循环

> ID：16126971
> 
> 赞同：-3
> 
> 时间：2013-04-21T01:09:09.087
> 
> 标签：c

这主要是出于好奇为什么会发生这种情况，因为在我的情况下并不重要。如果我输入一个无效的数字，它会正确地转到重复标签并要求我再次输入一个数字，但如果我输入一个像“f”这样的字符，它将无限循环并且不会停止。为什么是这样？

这里的数组和所有变量都是 int 类型。

```
 repeat: 
    printf("Enter number of available space, you are %c: ", userXO);
    scanf("%d", user);

    switch (*user)
    {
        case 1: if (spaces[0][0] == 49){ spaces[0][0] = userXO;}else goto repeat; break;
        case 2: if (spaces[0][1] == 50){ spaces[0][1] = userXO;}else goto repeat; break;
        case 3: if (spaces[0][2] == 51){ spaces[0][2] = userXO;}else goto repeat; break;
        case 4: if (spaces[1][0] == 52){ spaces[1][0] = userXO;}else goto repeat; break;
        case 5: if (spaces[1][1] == 53){ spaces[1][1] = userXO;}else goto repeat; break;
        case 6: if (spaces[1][2] == 54){ spaces[1][2] = userXO;}else goto repeat; break;
        case 7: if (spaces[2][0] == 55){ spaces[2][0] = userXO;}else goto repeat; break;
        case 8: if (spaces[2][1] == 56){ spaces[2][1] = userXO;}else goto repeat; break;
        case 9: if (spaces[2][2] == 57){ spaces[2][2] = userXO;}else goto repeat; break;
        default: goto repeat; break;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T01:21:34.883

`scanf("%d", user);`尝试读取一个数字，找到一个 char( `f`)，将其留在缓冲区中并结束。然后循环循环并`scanf("%d", user);`再次执行。然后再次...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T01:56:44.887

这是我写你所做的事情的方式：

```
int rc, user;
char buf[100];

for (;;)  // repeat until explicitly broken out of
{ 
    printf ("Enter number of available space; you are %c: ", userXO);
    if (!fgets (buf, sizeof buf, stdin))  /* end of file or i/o error? */
        break;

    rc = sscanf(buf, "%d", &user);
    if (rc != 1)   /* other than one parsed input item is an error */
    {
        printf ("invalid number; try again\n");
        continue;
    }

    /*
     * this switch has the odd property of potentially
     * doing all 9 cases for case 1,  8 cases for case 2, etc.
     * Maybe explicit breaks for success are needed?
     */
    switch (user)
    {
    case 1: if (spaces[0][0] == 49) spaces[0][0] = userX0; else continue;
    case 2: if (spaces[0][1] == 50) spaces[0][1] = userX0; else continue;
    case 3: if (spaces[0][2] == 51) spaces[0][2] = userX0; else continue;
    case 4: if (spaces[1][0] == 52) spaces[1][0] = userX0; else continue;
    case 5: if (spaces[1][1] == 53) spaces[1][1] = userX0; else continue;
    case 6: if (spaces[1][2] == 54) spaces[1][2] = userX0; else continue;
    case 7: if (spaces[2][0] == 55) spaces[2][0] = userX0; else continue;
    case 8: if (spaces[2][1] == 56) spaces[2][1] = userX0; else continue;
    case 9: if (spaces[2][2] == 57) spaces[2][2] = userX0; else continue;
    default: continue;
    }
    break;  /* if valid case(s) taken, exits loop */
} 
```

如您所见，不需要标签或 goto。代码也更紧凑。

# java - 将字符串转换为字符时出现 StringIndexOutOfBoundsException。可能的原因？

> ID：16126974
> 
> 赞同：0
> 
> 时间：2013-04-21T01:10:19.887
> 
> 标签：java

下面的代码给出了问题，我只需要将字符串中的字母转换为字符，当我运行测试时，当代码到达时我不断收到错误`char c = t.charAt(0);` 确切的错误消息是：

> java.lang.StringIndexOutOfBoundsException：字符串索引超出范围：0

我无法将字符串字母变成字符。任何提示将非常感谢。

```
String[] zombies;
int num = 0;
Vector<Zombie> practice = new Vector<Zombie>();
String zombieString = "SZI1";
zombies = zombieString.split("");

for (String t : zombies) {
    if (isNumeric(t)) {
        int multiplier = Integer.parseInt(t);
        String extraZombie = zombies[num - 1];
        char x = extraZombie.charAt(0);
        for (int i = 0; i <= multiplier; i++) {
            Zombie zombie = Zombie.makeZombie(x);
            practice.add(zombie);
        }
    } else {
        char c = t.charAt(0);
        //Zombie zombie = Zombie.makeZombie(c);
        //practice.add(zombie);
        num++;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T01:16:13.060

你的 split("") 返回一个空字符串，如果你在一个空字符串上调用 charAt(0) 它会给出这个错误。

为了解决这个问题，你可以用 toCharArray() 替换 split("") 操作，这将直接生成一个字符数组：

```
char[] zombies = zombieString.toCharArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T01:14:08.403

由于它说“字符串索引超出范围 0”，那么您的字符串中没有字符。可能与您告诉 String.split() 在空字符串上拆分这一事实有关，当它需要一个要拆分的字符串分隔符时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T01:21:25.297

**引用：**
[https ://stackoverflow.com/a/5235439/2214674](https://stackoverflow.com/a/5235439/2214674)

```
"SZI1".toCharArray()
    But if you need strings

    "SZI1".split("")
    Edit: which will return an empty first value (extra empty String => [, S, Z, I,1].). 
```

# css - 两个固定宽度 div 之间的可变宽度 div（最小宽度）

> ID：16126976
> 
> 赞同：0
> 
> 时间：2013-04-21T01:10:29.520
> 
> 标签：css, html, variable-width

我正在尝试并排放置三个 div。

*   第一个 div 有一个固定的宽度，需要靠在屏幕的左侧（即：）`float:left;`。
*   下一个 div 也有固定的宽度，需要靠在屏幕的右侧（即：）`float:right;`。
*   最后一个div需要填充它们之间的空间，并根据浏览器窗口的宽度进行调整。

当中间的最后一个 div 达到某个最小宽度时，我需要它停止变小并在浏览器中显示滚动条。

这有可能实现吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T01:34:47.047

试试这个[链接](http://jsfiddle.net/sfxX8/)。基本上，有 3 个 div，其中 2 个放置在侧面是`fixed width absolute position`div，而中心是一个普通的 div `margin`。

# java - 如何使函数每 2 个刻度调用一次

> ID：16126978
> 
> 赞同：11
> 
> 时间：2013-04-21T01:10:53.163
> 
> 标签：java, repeat, bukkit

我正在为我的朋友制作一个 bukkit 插件，我想知道如何每 2 个滴答声（1/10 秒）调用一个函数。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-21T01:48:52.410

嗯，这可能不是你想看的地方。您应该将[其](http://forums.bukkit.org/forums/plugin-development.5/)用于您的任何开发需求。
不管怎样，我可以回答你的问题。您想使用内置的调度程序。您可以使用它访问它

```
server.getScheduler(); 
```

具体来说，您将要创建一个 Runnable 并使其每 2 个滴答声调用您的方法。

```
int id = server.getScheduler().scheduleSyncRepeatingTask(plugin, new Runnable() {
    public void run() {
        myMethod();
    }}, 0, 2); 
```

我将在一秒钟内解释同步和异步的区别，但这应该可以完成你想要的。第一个参数只是对插件的引用（通常是`this`或`plugin`）。第二个是runnable，你显然应该`myMethod`用你想要调用的方法替换。第三个参数是方法首次运行之前的延迟量（以滴答计）。我假设为 0，但也可能是 2，具体取决于您想要做什么。最后一个参数是运行之间的时间量，您希望是两次。
您会注意到该方法返回一个整数，您可以使用它来取消任务，如下所示：

```
server.getScheduler().cancelTask(id); 
```

讨论异步和同步之间的区别很重要。你会注意到我们一开始调用的方法是 schedule **Sync** RepeatingTask。同步意味着我们指定为第二个参数的 Runnable 将在服务器的主线程上运行。任何调用 Bukkit/CraftBukkit/Minecraft 方法的方法都必须作为同步运行。如果你运行一些东西，修改一个块，作为异步你可能会完全破坏服务器。只是不要这样做；）另一方面，异步为 Runnable 创建一个单独的线程，用于后台任务，例如复制和粘贴文件或检查时间。再一次，**永远不要**运行将世界修改为异步的方法。

最后，将来如果你只想运行一个方法一次然后不让它重复，你可以只使用 method `int id = scheduleSyncDelayedTask(plugin, Runnable, 2)`，前两个参数相同，第三个是运行 runnable 之前的延迟（Ticks）

祝你好运，
小贴士

# php - 在外部服务器上下载 CSV 文件

> ID：16126981
> 
> 赞同：0
> 
> 时间：2013-04-21T01:11:21.760
> 
> 标签：php, csv, fopen, fwrite, fputcsv

下面的代码在我的本地主机测试机器上工作，但我需要知道如何让它在外部服务器上工作。我需要能够下载 .csv 文件。有什么方法可以提示用户下载文件，还是我必须在服务器上选择一个位置？

```
<?php
    session_start();
    require ("../login.php");

    $success = false;

    include ("header.php");
    include ("adminnav.php");
?>

    <h2>Download Previews Totals</h2>

<?php

    $stmt = $db->prepare
    ("SELECT s.short_name, p.name, t.title, SUM(sub.quantity) AS quantity
    FROM store s
    JOIN users u
        ON s.short_name = u.store
    JOIN subscriptions sub
        ON u.id = sub.user
    JOIN titles t
        ON sub.title = t.id
    JOIN publishers p
        ON t.publisher = p.name
    GROUP BY s.short_name, p.name, t.title
    ORDER BY s.short_name, p.name, t.title");

    if ($stmt->execute()) {
        $rows = $stmt->fetchAll();

        // Pick a filename and destination directory for the file
        // Remember that the folder where you want to write the file has to be writable
        $filename = "C:/Previews_Files/previews".time().".csv";

        // Actually create the file
        // The w+ parameter will wipe out and overwrite any existing file with the same name
        $handle = fopen($filename, 'w+');
        if (!$handle)
            $errors[] = '<p>File failed to open';
        else {
            // Write the spreadsheet column titles / labels
            fputcsv($handle, array('Store','Publisher', 'Title', 'Quantity'));

            // Write all the user records to the spreadsheet
            foreach($rows as $row)
            {
                fputcsv($handle, array($row['short_name'], $row['name'], $row['title'], $row['quantity']));
            }

            // Finish writing the file
            fclose($handle);
            $success = true;
        }
    }
    else
        $errors[] = '<p>There are no previews totals to display.</p>';

    if ($success == true)
        echo '<p>Your file has successfully been downloaded to \'C:/Previews_Files\'</p>';
    else
        $errors[] = '<p>Your file could not be downloaded. Please make sure the directory \'C:/Previews_Files\' has been created and is writeable.';

        if (!empty($errors))
            foreach($errors as $error)
                echo $error;
?>

<?php   
    include ("footer.php");
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:19:26.327

您可以使用 CURL 从网络中获取数据。CURL 可以做很多事情。

[http://www.php.net/manual/en/intro.curl.php](http://www.php.net/manual/en/intro.curl.php)

但是，您需要将它安装在您的服务器/VPS 上。你不能在共享主机上做到这一点。由于默认情况下未安装 CURL。

# excel - 隔离一列中包含某些值的行 (Excel)

> ID：16126987
> 
> 赞同：0
> 
> 时间：2013-04-21T01:12:09.090
> 
> 标签：excel, spreadsheet, formula

我需要关于我认为是简单的 Excel 公式或函数的帮助。我有两列。作为一个简单的例子，假设第一列是数字，第二列是颜色：

```
| 1 | Red  |
| 2 | Blue |
| 3 | Red  |
| 4 | Red  |
| 5 | Green|
| 6 | Brown| 
```

假设我只想要第二列中带有红色的行，并删除工作表上的所有其他内容。我该怎么做？需要明确的是，我希望第一列中的值也保持不变。这就是我希望它看起来的样子：

```
| 1 | Red   |
| 3 | Red   |
| 4 | Red   | 
```

看起来它应该很简单，但我似乎找不到任何方法来做到这一点。论坛上有类似的问题，但它们比我问的更复杂，需要超长的公式。如果这是必需的，我想这就是我要做的，但只是想看看是否也有一种简单的方法可以做到这一点。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T02:13:09.040

您可以使用自动过滤器过滤第二列。然后仅选择并复制可见单元格，删除过滤器，删除所有内容并粘贴剪贴板中的内容。

还是您需要动态解决方案？然后，您可以在单独的工作表上构建数据透视表。将所需的颜色放入页面过滤器中，并在源数据发生更改时刷新数据透视表。

# iphone - iOS 重大位置更改是否应该在重启*锁定*手机后唤醒我的应用程序？

> ID：16126988
> 
> 赞同：2
> 
> 时间：2013-04-21T01:12:13.227
> 
> 标签：iphone, ios, core-location

我正在构建一个使用重大更改 API 的应用程序。除了非常特殊的情况外，一切正常：

如果用户的手机被锁定，并且用户重新启动了手机，那么重要位置更改 API 将在前几分钟唤醒手机并调用

```
- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations 
```

一切都很好，但此时，*如果用户尚未解锁手机*，即使我随后解锁手机，显着位置更改也*不会进一步尝试唤醒应用程序。*从本质上讲，重大位置变化监控被关闭。

请注意，如果我在 SLC 唤醒我的应用程序之前解锁（并重新锁定）手机，那么它将继续唤醒我的应用程序以及任何后续位置更改。

我的问题是：这真的是预期的行为吗？任何人都可以向我指出有关 SLC API 在手机锁定时的行为的文档，特别是当手机被锁定并重新启动设备时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-12T07:50:51.463

该应用程序确实会在位置发生重大变化时在后台启动。我只是去测试一下。

在发生重大位置更改时，我会在发生重大位置更改后出现本地推送通知，**即使手机已锁定**。

我还没有测试 10 分钟后会发生什么，设备被锁定，并且发生了显着的位置变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-24T08:40:51.427

我遇到了同样的问题（iOS8.1.1 / iPhone 5）-

我在我的应用程序中成功地使用了重要的位置变化监控。

场景 1) 手机启动后，如果我立即解锁手机，我的应用会使用 didFinishLaunchingWithOptions 中的 UIApplicationLaunchOptionsLocationKey 重新启动。

场景 2) 但是，如果我在启动后等待 > 3 分钟解锁手机，则应用程序不会重新启动。如果我带着手机去散步，我的应用程序不会重新启动。

在检查手机调试输出时，我注意到 life360 和 facebook 在场景 2 中都开始显着更改位置。

# java - 设置/更改文件的 ctime 或“更改时间”属性

> ID：16126992
> 
> 赞同：10
> 
> 时间：2013-04-21T01:12:59.110
> 
> 标签：java, linux, ext4, filemtime, java.nio.file

我希望使用`java.nio.Files`该类更改 Java 中文件的时间戳元数据。

我想更改所有 3 个 Linux/ext4 时间戳（上次修改、访问和更改）。

我可以更改前两个时间戳字段，如下所示：

```
Files.setLastModifiedTime(pathToMyFile, myCustomTime);
Files.setAttribute(pathToMyFile, "basic:lastAccessTime", myCustomTime); 
```

但是，我无法修改文件上的最后一个*更改：*时间。[此外，令人担忧的是文档](http://docs.oracle.com/javase/7/docs/api/java/nio/file/attribute/BasicFileAttributeView.html)中没有提到更改时间戳。最接近的可用属性是`creationTime`，我尝试过但没有成功。

关于如何`Change:`根据 Java 中的自定义时间戳修改文件元数据的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-06-12T13:05:49.907

我能够使用两种不同的方法修改 ctime：

1.  更改内核以`ctime`匹配`mtime`
2.  编写一个简单（但很老套）的 shell 脚本。

**第一种方法：更改内核。**

我在此修改中只调整了几行，`KERNEL_SRC/fs/attr.c` 只要“明确定义”了 mtime，就会更新 ctime 以匹配 mtime。

有很多方法可以“显式定义”mtime，例如：

在 Linux 中：

```
touch -m --date="Wed Jun 12 14:00:00 IDT 2013" filename 
```

在 Java 中（使用 Java 6 或 7，可能还有其他）：

```
long newModificationTime = TIME_IN_MILLIS_SINCE_EPOCH;
File myFile = new File(myPath);
newmeta.setLastModified(newModificationTime); 
```

`KERNEL_SRC/fs/attr.c`这是函数中的更改`notify_change`：

```
 now = current_fs_time(inode->i_sb);

    //attr->ia_ctime = now;  (1) Comment this out
    if (!(ia_valid & ATTR_ATIME_SET))
        attr->ia_atime = now;
    if (!(ia_valid & ATTR_MTIME_SET)) {
        attr->ia_mtime = now;
    }
    else { //mtime is modified to a specific time. (2) Add these lines
        attr->ia_ctime = attr->ia_mtime; //Sets the ctime
        attr->ia_atime = attr->ia_mtime; //Sets the atime (optional)
    } 
```

(1) 未注释的这一行将在文件更改时将 ctime 更新为当前时钟时间。我们不希望这样，因为我们想自己设置 ctime。因此，我们将这一行注释掉。（这不是强制性的）

(2) 这才是真正解决问题的症结所在。该`notify_change`函数在文件更改后执行，其中时间元数据需要更新。如果未指定 mtime，则将 mtime 设置为当前时间。否则，如果 mtime 设置为特定值，我们还将 ctime 和 atime 设置为该值。

**第二种方法：简单（但 hacky）的 shell 脚本。**

简要说明：

1.  将系统时间更改为您的目标时间
2.  对文件执行 chmod，文件 ctime 现在反映目标时间
3.  恢复系统时间。

**更改ctime.sh**

```
#!/bin/sh
now=$(date)
echo $now
sudo date --set="Sat May 11 06:00:00 IDT 2013"
chmod 777 $1
sudo date --set="$now" 
```

按如下方式运行：./changectime.sh MYFILE

文件的 ctime 现在将反映文件中的时间。

当然，您可能不想要具有 777 权限的文件。确保在使用之前根据需要修改此脚本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T02:48:29.910

根据您的情况调整[此答案](https://stackoverflow.com/a/4537602/2257172)：

```
// Warning: Disk must be unmounted before this operation
String disk = "/dev/sda1";
// Update ctime
Runtime.getRuntime().exec("debugfs -w -R 'set_inode_field "+pathToMyFile+" ctime "+myCustomTime+"' "+disk);
// Drop vm cache so ctime update is reflected
Runtime.getRuntime().exec("echo 2 > /proc/sys/vm/drop_caches"); 
```

我怀疑我们会在标准 Java API 中看到一种方便的方法来执行此操作，因为 Linux（man **touch**）和 Windows（ MSDN 上的**GetFileTime**函数）都不能轻松访问该字段。本机系统调用仅提供对创建/访问/修改时间戳的访问权限，Java 也是如此。

# javascript - phonegap Facebook 登录按钮哈希键问题

> ID：16126993
> 
> 赞同：1
> 
> 时间：2013-04-21T01:13:23.707
> 
> 标签：javascript, facebook, cordova, phonegap-build

我正在使用 facebook connect 插件来使用 facebook api 登录到我的应用程序，所以我使用了一个示例项目并创建了一个简单的 facebook 应用程序来获取应用程序 ID，并且 API 很好，直到我在 facebook 对话框中出现一条消息说密钥“AWiYld2HXlJFTSeTlXo9NY-CTAU”与您的应用程序中的任何散列键都不匹配。所以我去了 facebook 应用程序并添加了对于仍然没有工作的 android 哈希键所以我能做些什么来使它工作，所以你能帮我吗，我真的被锁定了。谢谢你提前帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T21:42:55.640

我通过卸载我的测试应用程序，然后重新安装它来解决这个问题。

我很确定“AWiYld2HXlJFTSeTlXo9NY-CTAU”意味着您没有分配密钥..因为那也是我的，当我最初构建没有 android 密钥的应用程序时..我一直在尝试添加密钥并重建它.. 水合作用.. 并不断收到此错误消息，说在我的 FB 应用程序设置中找不到我的密钥“AWiYld2HXlJFTSeTlXo9NY-CTAU”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-23T21:57:56.280

这是解决方案： - 创建自己的密钥库

你需要java的keytool（jre）

打开终端并输入：

```
keytool -genkey -v -keystore example.keystore -alias example -keyalg RSA -keysize 2048 -validity 10000 
```

按照步骤（密码、名称、位置）

然后输入：

```
keytool -exportcert -alias example -keystore C:\example.keystore | openssl sha1 -binary | openssl base64 
```

然后在 phonegap build 添加新的自动签名密钥

[https://build.phonegap.com/people/edit#new-android-key](https://build.phonegap.com/people/edit#new-android-key)

就这样

参考：

[http://circlecube.com/2013/02/keystore-for-android-app-development/](http://circlecube.com/2013/02/keystore-for-android-app-development/)

# ruby-on-rails - OmniAuth 捆绑安装错误

> ID：16126996
> 
> 赞同：0
> 
> 时间：2013-04-21T01:14:17.503
> 
> 标签：ruby-on-rails, rubygems, omniauth

我正在尝试在一个新项目中使用omniauth。我在我电脑上的其他项目上使用它没有问题。“宝石清单”确认：

```
rails 3.2.9 
omniauth 1.1.4 
```

一切都很好，直到我捆绑安装，此时我收到此错误消息：

```
Fetching gem metadata from https://rubygems.org/...........
Fetching gem metadata from https://rubygems.org/..
Could not find gem 'ominiauth (>= 0) ruby' in the gems available on this machine. 
```

这是我的 Gemfile：

```
source 'https://rubygems.org'
gem 'rails'
gem 'ominiauth' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:36:42.070

你拼错`omniauth`了`ominiauth`。

# javascript - 如何仅在 JavaScript 函数完成执行并执行其魔术后才加载页面？

> ID：16126998
> 
> 赞同：0
> 
> 时间：2013-04-21T01:14:27.913
> 
> 标签：javascript, jquery

**这是故事...**

我在尺寸为 1174px x 375px 的容器内有一个尺寸为 1174px x 660px 的图像。图像的高度被截断，当我将溢出设置在容器上时，只显示图像高度的 375 像素。

我创建了一个 JavaScript 函数，该函数获取此图像 (1174x660) 并将其垂直居中于其容器 (1174x 375) 中，以便图像的中心位于容器的中心。

```
function allFeaturesImagesResize () {
    var allFeatures = function () {
        var image = $('.all-features article img'),
            container = $('.all-features article'),
            container_height = container.height(),
            image_height = image.height(),
            container_center = .5 * container_height,
            image_center = .5 * image_height,
            center = (image_center - container_center);
            image.css('position','relative').css('bottom', center);

    }
    $(function () {
        $(window).resize(function () {
            allFeatures();
        }).resize();
    });
} 
```

我`$(document).ready(function() { //... });`在这个函数周围使用了一个包装器，但是，每当页面加载时，我都可以看到该函数正在完成将图像移动到中心点的工作。有没有办法将有效载荷延迟到重新定位完成之后？

**请记住，我的网站是流体响应的，这就是为什么我需要动态定位图像，因为我事先不知道用户的视口尺寸（特别是宽度）。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T01:38:54.703

使用`load`而不是`ready`事件。`$(window).load(function(){ ... your code }`会告诉代码应该在所有图像加载后才执行。`ready`即使图像未完成加载，也会在加载 DOM 时触发事件

请注意，您正在选择多个图像`$('.all-features article img')`。通过这样做`images.height()`只会获得第一个找到的图像的高度。选择多个容器的行也是如此。

您的代码应翻译为“对于找到的每个图像”：`$('.all-features article img').each (function(){...});`