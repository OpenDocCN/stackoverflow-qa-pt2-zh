# StackOverflow 问答 14682000-14682999

# xml - jsTree更改XML填充jsTree中子项的图标

> ID：14682000
> 
> 赞同：0
> 
> 时间：2013-02-04T07:17:16.093
> 
> 标签：xml, jstree

我用 XML 填充树。有没有办法改变孩子的图标？

![在此处输入图像描述](../Images/b29c02eba0d89a44407ff717e529de86.png)

附件是一个主要组，它应该有一个文件夹图标，但如果有另一个组，我想为孩子们提供其他东西，所以如果孩子不是叶子，它仍然应该保留文件夹图标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:28:38.367

我只需要`icon=''`在`name`标签中使用。

# android - GoogleMap 类对象抛出 Nullpointer 异常

> ID：14682001
> 
> 赞同：1
> 
> 时间：2013-02-04T07:17:19.607
> 
> 标签：android, google-maps

朋友们，我在**addMarker()上收到 NullPointer 错误**

下面是我的示例代码。

```
GoogleMap myMap;
android.support.v4.app.FragmentManager myFragmentManager = getSupportFragmentManager();
SupportMapFragment myMapFragment = (SupportMapFragment)myFragmentManager.findFragmentById(R.id.map);
myMap = myMapFragment.getMap();
myMap.addMarker(new MarkerOptions().position(new LatLng(0, 0)).title("Marker"));
myMap.setMyLocationEnabled(true);
myMap.getUiSettings().setZoomControlsEnabled(true);
myMap.getUiSettings().setCompassEnabled(true);
myMap.getUiSettings().setMyLocationButtonEnabled(true); 
```

错误信息如 NullPointer 在行

```
myMap.addMarker(new MarkerOptions().position(new LatLng(0, 0)).title("Marker")); 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".DemoMapActiviy" >

<TextView
    android:id="@+id/textView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<fragment
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment"/>
</LinearLayout> 
```

知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:02:38.417

我不久前经历了这个问题。首先检查片段管理器是否找到了您的片段。

如果不尝试替换您将片段放入视图的方式。如果您想要其他方式的示例，我在[此处发布了地图示例](https://github.com/ChristopherTulip/MapHomeTest)

如有更多问题，请随时发表评论，我将与您一起解决:)

**编辑**

你有正确的 API 密钥吗？如果您无法联系 Google 的服务器，那么这很可能是您的问题。否则可能是一个清单问题，请确保您具有 READ_GSERVICES 和 INTERNET 权限。

请参阅[Google Maps API V2 '加载地图失败。无法联系 Google 服务器](https://stackoverflow.com/questions/13727992/google-maps-api-v2-failed-to-load-map-could-not-contact-google-servers)

**编辑 2**

好的，所以我以前很懒，只是把你介绍给我的项目。如果您要连接到项目中的地图，请从那里开始。

我在最初的回复中建议的是检查是否`myMapFragment`为空。如果它很棒，请尝试按照以下方式进行操作：

```
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
SupportMapFragment myMapFragment = new SupportMapFragment();
ft.replace(R.id.map, myMapFragment, Constant.TAXI_FRAGMENT_ID);
ft.commit(); 
```

其中 R.id.map 为空`FrameLayout`

如果`myMapFragment`不为空，则尝试扩展`SupportMapFragment`并运行以下测试：

```
public class MyMapFragment extends SupportMapFragment {
    @Override
    public void onActivityCreated()
    {
        if (getMap() == null) Log.e("TAG", "There's something very wrong here";
    }
} 
```

此外，如果你这样做，请确保你正在膨胀一个`MyMapFragment`not of`SupportMapFragment`

# windows - 我可以通过 \\192.xx.xx.xx 等路径访问我的 ftp 服务器吗？

> ID：14682002
> 
> 赞同：-1
> 
> 时间：2013-02-04T07:17:33.427
> 
> 标签：windows, ftp, windows-xp, ipc

我基于 serv-u winxp 搭建了一个 ftp 服务器，现在可以通过[ftp://192.xx.xx.xx](ftp://192.xx.xx.xx)访问，可以直接通过 \192.xx.xx.xx 等路径访问吗？直接意味着可以通过 explorer 的路径来做，类似于 windows 共享文件夹，我想重定向目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:36:07.327

No.`\\192.xx.xx.xx`是 Windows 文件共享的 URI 语法。这与 FTP 不同。

从 Explorer 访问 FTP 服务器的唯一方法是使用`ftp://`URI 语法声明协议。

# language-agnostic - 为什么在 IEEE754 标准中除以零会导致无限值？

> ID：14682005
> 
> 赞同：47
> 
> 时间：2013-02-04T07:17:43.647
> 
> 标签：language-agnostic, floating-point, ieee-754

我只是好奇，为什么在`IEEE-754`任何非零浮点数除以零都会产生无限值？从数学的角度来看，这是无稽之谈。所以我认为这个操作的正确结果是 NaN。

如果 x 是实数，则当 x=0 时未定义函数 f(x) = 1/x。例如，函数 sqrt 没有为任何负数定义，如果 sqrt(-1.0f)`IEEE-754`产生一个`NaN`值。但是 1.0f/0 是`Inf`.

但由于某种原因，在`IEEE-754`. 这肯定是有原因的，可能是一些优化或兼容性的原因。

那么有什么意义呢？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-02-04T10:09:39.897

> 从数学的角度来看，这是无稽之谈。

是的。不，有点。

问题是：浮点数是近似值。您想使用范围广泛的指数和有限的位数，并获得并非完全错误的结果。:)

IEEE-754 背后的想法是，每个操作都可能触发指示可能存在问题的“陷阱”。他们是

*   非法（负数 sqrt 等无意义的操作）
*   溢出（太大）
*   下溢（太小）
*   除以零（你不喜欢的东西）
*   不精确（此操作可能会给您错误的结果，因为您正在失去精度）

现在许多像科学家和工程师这样的人不想被编写陷阱例程所困扰。因此，IEEE-754 的发明者 Kahan 决定，如果不存在陷阱例程，每个操作也应该返回一个合理的默认值。

他们是

*   NaN 表示非法值
*   为溢出签名无穷大
*   下溢的有符号零
*   不确定结果 (0/0) 的 NaN 和 (x/0 x != 0) 的无穷大
*   Inexact 的正常运行结果

问题是，在 99% 的情况下，零是由下溢引起的，因此在 99% 的情况下，Infinity 是“正确的”，即使从数学角度来看是错误的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-04T07:22:54.713

我不知道你为什么会认为这是胡说八道。

的简单定义`a / b`，至少对于非零而言，是在达到零之前必须减去`b`的唯一数量的s。`b``a`

将其扩展到`b`可以为零的情况，必须从任何非零数字中减去才能达到零的数字*确实是*无限的，因为你永远*不会达到*零。

另一种看待它的方式是从限制的角度来讨论。当正数`n`接近零时，表达式`1 / n`接近“无穷大”。你会注意到我引用了这个词，因为我坚信不传播无限实际上是一个具体数字的错觉:-)

`NaN`保留用于数字不能由任何其他值（包括无穷大）表示（甚至近似）的情况，它被认为与所有其他值不同。

例如，`0 / 0`（使用我们上面的简单定义）可以减去*任意*数量的s以达到 0。因此结果是不确定的 - 它可以是 1、7、42、3.14159 或任何其他值。`b``a`

类似地，负数的平方根之类的东西在 IEEE754 使用的实平面中没有值（您必须为此使用复平面），无法表示。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-06-14T06:00:50.243

在数学中，除以零是未定义的，因为零没有符号，因此两个结果同样可能且互斥：负无穷大或正无穷大（但不能两者兼有）。

在（大多数）计算中，0.0 有符号。因此，我们知道我们从哪个方向接近，以及无穷大将有什么符号。当 0.0 表示一个非零值太小而无法由系统表示时尤其如此，因为它经常出现这种情况。

唯一适合 NaN 的情况是系统确定分母确实是零。除非有一种特殊的方法来指定它，否则它不能这样做，这会增加开销。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-15T16:14:37.647

**注意**：我根据@Cubic 的宝贵评论重新写了这篇文章。

我认为这个问题的正确答案必须来自微积分和极限的概念。在 假设 下考虑`f(x)/g(x)`as的极限。这里有两个有趣的广泛案例：`x->0``g(0) == 0`

1.  如果`f(0) != 0`，则限制 as`x->0`是正无穷大或负无穷大，或者它是未定义的。如果`g(x)`在 附近取两个符号`x==0`，则极限未定义（左右极限不一致）。但是，如果`g(x)`在 0 附近只有一个符号，则限制将被定义为正无穷或负无穷。稍后再谈。
2.  如果`f(0) == 0`也是如此，那么限制可以是任何东西，包括正无穷大、负无穷大、有限数或未定义。

在第二种情况下，一般来说，你根本不能说什么。可以说，在第二种情况下`NaN`是唯一可行的答案。

现在在第一种情况下，为什么要在可能或未定义的情况下选择一个特定的符号？实际上，它在您确实了解分母符号的情况下为您提供了更大的灵活性，而在您不了解的情况下成本相对较低。例如，您可能有一个公式，您可以在其中分析地知道`g(x) >= 0`对于所有`x`，例如，`g(x) = x*x`。在这种情况下，极限是定义的，它是无穷大，符号等于 的符号`f(0)`。您可能希望在代码中利用它作为一种便利。在其他情况下，如果您对 的符号一无所知`g`，您通常无法利用它，但这里的成本只是您需要捕获一些额外的情况 - 正无穷大和负无穷大 - 除了`NaN`如果你想完全错误检查你的代码。那里有一些价格，但与其他情况下获得的灵活性相比，它并不大。

当问题是关于“简单除法”时，为什么要担心一般功能？一个常见的原因是，如果您通过其他算术运算计算分子和分母，则会累积舍入误差。这些错误的存在可以抽象为上面所示的通用公式格式。例如`f(x) = x + e`，哪里`x`是分析正确、准确的答案，`e`代表四舍五入的误差，并且`f(x)`是您在执行时机器上实际拥有的浮点数。

# xml - 如何在同一个 xml 文件中获取 xml 参数值？

> ID：14682013
> 
> 赞同：0
> 
> 时间：2013-02-04T07:18:09.790
> 
> 标签：xml

我的文件是这样的：

```
<argument name="a" value=1>
<argument name="b" value=(there I want to get the value of "a")> 
```

我怎么能得到这个？

# php - Drupal simplenews 成功消息不显示

> ID：14682018
> 
> 赞同：1
> 
> 时间：2013-02-04T07:18:22.467
> 
> 标签：php, drupal

在我的 drupal 站点中，当用户在右侧块的时事通讯中输入电子邮件地址时。因此没有显示成功消息，我检查了该 `simplenews_subscriptions_page_form_submit()`功能，它实际上正在设置消息，例如

```
 if (simplenews_confirmation_send_combined()) {
        drupal_set_message(t('You will receive a confirmation e-mail shortly containing further instructions on how to complete your subscription.'));

      } 
```

在我调试了 drupal_get_messages() 函数后，查看任何值是否为它返回的任何值，是的，它是

`Array ( [status] => Array ( [0] => You will receive a confirmation e-mail shortly containing further instructions on how to complete your subscription. )`

但是在字体主题中没有显示任何内容，我还检查了 theme_status_messages() 函数，它实际上最初检查了它， `$display = $variables['display'];`然后当我调试这个值时，它总是打印为空，但`$variables['display']`值已设置。

任何人都可以让我知道如何解决这个问题吗？

仅供参考：我正在使用 Drupal v7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T22:14:37.087

您确定在被调用的主题中提到了 $messages 变量吗？如果没有，请在 page.tpl.php 中提及

# android - 如何克服android中撇号strings.xml中的错误？

> ID：14682020
> 
> 赞同：0
> 
> 时间：2013-02-04T07:18:37.340
> 
> 标签：android

> **可能重复：**
> [Android 中的 strings.xml 文件出错](https://stackoverflow.com/questions/5657047/error-in-strings-xml-file-in-android)

我在strings.xml 中使用了三行或更多行。

例如：

```
<string name="menu_settings">Google's Android</string> 
```

它包含撇号。但它显示错误。当我删除它时，它会变得清晰。它是否不支持 android 中的撇号？如何克服？有什么解决办法吗？

提前致谢。

# java - 警报对话框不显示在 strings.xml 中定义的 HTML

> ID：14682026
> 
> 赞同：0
> 
> 时间：2013-02-04T07:19:32.460
> 
> 标签：java, android, eclipse, textview, android-alertdialog

请看下面的代码

**字符串.xml**

```
<string name="measurements_description"><html><font color="#FFFAF0">I want to have white color for the whole text. 
    <br/>This text comes in a new line<font color="red">This text is red </font>
    <br/>This is another line. Again, color is white </font></html></string> 
```

**male_layout.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <RelativeLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

        <TextView 
            android:id="@+id/measurementsDescription"
            android:text="@string/measurements_description"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
        />
    </RelativeLayout>
</ScrollView> 
```

**Form.java**（这个属于主布局activity_form）

```
public boolean onMenuItemSelected(int id, MenuItem item) {
    //Toast.makeText(this, item.getTitle(), Toast.LENGTH_LONG).show();

    TextView msg = new TextView(this);
    msg.setText("<html><u>Message</u></html>");

    AlertDialog.Builder alertBuilder = new AlertDialog.Builder(this);
    //alertBuilder.setMessage("<html><u>Message</u></html>");
    alertBuilder.setTitle("Male Measurement Instructions");
    LayoutInflater li = getLayoutInflater();
    View v = li.inflate(R.layout.male_layout, null);

    alertBuilder.setView(v);
    alertBuilder.setCancelable(false);
    alertBuilder.setPositiveButton("OK", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface arg0, int arg1) {
             //alertBuilder.finish();
        }
    });

    AlertDialog alertDialog = alertBuilder.create();
    alertDialog.show();

    return true;
} 
```

这就是它的显示方式，而不响应 string.xml 文件中的任何 HTML。为什么这没有改变它在 HTML 中编码的颜色？为什么它不保持 HTML 中编码的换行符？

![在此处输入图像描述](../Images/b11fb673cf05501bcc7913a8afb1ee81.png)

如何解决这个问题？请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T08:17:39.257

第一个问题是嵌套的`<font>`. `<font>`如果你有另一个，它就行不通了`<font>`。您可以将`android:textColor`属性设置为`#FFFFFF`，然后使用`<font>`可以更改某些文本的颜色。其次，您必须`CDATA`在您的字符串中使用，第三您必须设置`TextView`from 代码的文本，以便您可以使用 html 格式化字符串。所以你必须有

**male_layout.xml**

```
...
<TextView 
    android:id="@+id/measurementsDescription"

    android:textColor="#FFFFFF"

    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
/>
... 
```

**字符串.xml**

```
<string name="measurements_description">
<![CDATA[
    I want to have white color for the whole text. 
    <br/>This text comes in a new line <font color="red">This text is red </font>
    <br/>This is another line. Again, color is white
]]>    
</string> 
```

**表单.java**

```
...
String html = getString(R.string.measurements_description);
TextView tv = (TextView) findViewById(R.id.measurementsDescription);
tv.setText(Html.fromHtml(html));
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-04T12:11:00.140

您可以通过在**strings.xml**中声明一个字符串来使用**HTML 格式 + 格式字符串**：

 **```
<string name="key">
    <![CDATA[
    My text and tags <b>with or without</b> variables<br/><br/>
    Answer is <u>%1$s</u>
    ]]>
</string> 
```

并创建您的对话框：

```
String msg = String.format(getResources().getString(R.string.key), "42");
Spanned htmlMsg = Html.fromHtml(msg);
builder.setMessage(htmlMsg).show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T08:19:50.953

[Android](http://developer.android.com/guide/topics/resources/string-resource.html#FormattingAndStyling)文档说. _ `<b>`_ `<i>`_`<u>``TextView`

如果你想显示不同颜色的单词，你应该使用[SpannableString](http://developer.android.com/reference/android/text/SpannableString.html)

[这里](http://www.chrisumbel.com/article/android_textview_rich_text_spannablestring)有一个完整的例子。

希望能帮助到你。

**编辑：**

其他方法：

```
String text = "<font color=#cc0029>Erste Farbe</font> <font color=#ffcc00>zweite Farbe</font>";
yourtextview.setText(Html.fromHtml(text)); 
```**

# android - 使第一个 EditText 光标可见

> ID：14682028
> 
> 赞同：1
> 
> 时间：2013-02-04T07:19:32.817
> 
> 标签：android, android-listview, android-arrayadapter

我正在创建一个类似于 ContactEntry Activity 作为本机联系人应用程序的视图。我已成功完成此操作，但在编辑文本选择时遇到问题。我想首先将第一行的 EditText（组织名称）显示为光标可见，但 ListView 使第二行的 Edittext（电话号码）显示为光标可见，请同时查找附件图像。

请帮助我如何解决它。![在此处输入图像描述](../Images/3ed66ee69956420ad3c706c971bdab31.png)

这是我的适配器类。

```
private class CustomItemEntryAdapter extends BaseAdapter{

    private LayoutInflater mInflator;
    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return 4;
    }

    public CustomItemEntryAdapter(Context context){
        mInflator = getLayoutInflater();
    }
    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return getItem(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        ItemsToFillViewHolder holder = null;
        if(position==0){
            convertView = mInflator.inflate(R.layout.institution_name_cell, null);
            EditText edittext = (EditText)convertView.findViewById(R.id.editText_institution);
            edittext.setCursorVisible(true);
        }else{
            convertView = mInflator.inflate(R.layout.saving_account_cell, null);
        }

         if(position==1){
            if(map_CellView.containsKey(position)){
                convertView = map_CellView.get(position);

            }else{

                holder = new ItemsToFillViewHolder();
                convertView.setTag(position);
                holder.cellTitle = (TextView)convertView.findViewById(R.id.txt_saving_acc);
                holder.cellTitle.setText("Phone");
                holder.cellImage = (ImageView)convertView.findViewById(R.id.image_add);
                holder.cellImage.setTag(convertView);
                holder.cellImage.setOnClickListener(imageclickListener);
                AddDefaultCellToListView(convertView,position);
            }

        }else if(position==2){

            if(map_CellView.containsKey(position)){
                convertView = map_CellView.get(position);

            }else{

                holder = new ItemsToFillViewHolder();
                convertView.setTag(position);
                holder.cellTitle = (TextView)convertView.findViewById(R.id.txt_saving_acc);
                holder.cellTitle.setText("Email");
                holder.cellImage = (ImageView)convertView.findViewById(R.id.image_add);
                holder.cellImage.setTag(convertView);
                holder.cellImage.setOnClickListener(imageclickListener);
                AddDefaultCellToListView(convertView,position);
            }

        }else if(position==3){

            if(map_CellView.containsKey(position)){
                convertView = map_CellView.get(position);

            }else{

                holder = new ItemsToFillViewHolder();
                convertView.setTag(position);
                holder.cellTitle = (TextView)convertView.findViewById(R.id.txt_saving_acc);
                holder.cellTitle.setText("Address");
                holder.cellImage = (ImageView)convertView.findViewById(R.id.image_add);
                holder.cellImage.setTag(convertView);
                holder.cellImage.setOnClickListener(imageclickListener);
                AddDefaultCellToListView(convertView,position);
            }

        }
        return convertView;
    }

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T07:32:44.237

尝试这个...

```
EditText edittext = (EditText)convertView.findViewById(R.id.editText_institution);
edittext.requestFocus(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T08:11:04.173

如果第二个（工作）editText 具有“requestFocus”属性，还请检查您的 xml。如果是这样，请将其删除。（并将其移至第一个 editText ，如 Muni 建议的那样）。

# iphone - 如何在状态栏下方显示下载进度

> ID：14682029
> 
> 赞同：0
> 
> 时间：2013-02-04T07:19:40.687
> 
> 标签：iphone, ios, objective-c, xcode

我想在状态栏下方显示一个下载进度栏，方法是把它放在所有其他视图的顶部（隐藏它下面的内容）或挤压其余部分。该栏将只有 9 像素高。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:58:49.030

如果您的应用程序使用默认导航栏，那么您将无法在状态栏下方显示进度条，因为导航栏位置默认位于视图顶部。你无法改变这一点。但是如果你想用导航栏显示进度条，那么你需要自定义导航栏。

如果您的应用程序没有导航栏，那么您可以直接使用视图顶部的进度条，这样它就会出现在状态栏的正下方。希望这会帮助你。

# objective-c - 在 UITableViewCell 上添加一个按钮，同时点击按钮，它不起作用

> ID：14682033
> 
> 赞同：0
> 
> 时间：2013-02-04T07:19:46.993
> 
> 标签：objective-c, uibutton, uitableview

我`UIView`在指定的里面加了一个`UITableViewCell`，然后我在上面加了两个自定义按钮`UIView`。出现的问题是，当我点击按钮时，它没有响应该方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T07:23:43.257

在创建按钮时，您是否为内部事件（或您使用的任何事件）添加了目标？

```
[tempButton addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];

- (void) buttonPressed:(UIButton *) sender
{
//Your implementation
} 
```

# java - 在 JavaScript 和 JSP 中过滤数据

> ID：14682034
> 
> 赞同：0
> 
> 时间：2013-02-04T07:19:47.150
> 
> 标签：java, javascript, jsp, filter

我`JSP`用来提取一些数据，然后用`JavaScript`一些图表的形式显示数据。但现在我想过滤`eg: Filter data according to some manager or filter data on basis of salary`.

由于我从 获取数据`JSP`，因此我不想`JSP`每次需要过滤某些数据时都发送请求。如何使用 JavaScript 执行此操作，以及在`JavaScript`使用后可以将数据存储在何处以及以哪种格式存储`JSP`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:28:43.310

将数据存储为 JavaScript 对象。Java 中有很多 JSON 解析器/编组器。选择您最喜欢的一个，然后执行以下操作：

在 servlet/控制器中：

```
String json = transformToJSON(myGraphData);
request.setAttribute("json", json); 
```

在 JSP 中：

```
<script>
    var graphData = ${json};
    // graphData is a JavaScript object containing the graph data
</script> 
```

# php - jQuery绑定点击功能不起作用 - jQuery，PHP

> ID：14682037
> 
> 赞同：0
> 
> 时间：2013-02-04T07:19:55.667
> 
> 标签：php, jquery

我的 PHP 的一部分：

```
echo '<li rel="'.$rs['pic_id'].'"><a>'.$rs['name'].'</a> <a class="delete">Delete</a></li>'; 
```

jQuery：

```
$('#taglist li a.delete').bind('click', function(){
        pic_id = $(this).attr("rel");
        $.post('deletetag.php', pic_id, function(){
            viewtag();
          });
    }); 
```

该按钮不起作用，因为尽管我在 html 中明确包含了“a”标签，但它没有转换为按钮。问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:22:47.010

为什么不干。

```
$('#taglist li a.delete').click(function()
{
//Code Here
})); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:23:55.350

如果您使用的是 jQuery 1.7+

尝试这个

```
echo '<li rel="'.$rs['pic_id'].'"><a href="#">'.$rs['name'].'</a> <a href="#" class="delete">Delete</a></li>';

$("#taglist li a.delete").on("click", function(event){
    event.preventDefault();
    pic_id = $(this).attr("rel");
    $.post('deletetag.php', pic_id, function(){
        viewtag();
    });
}); 
```

或者

```
$("body").on("click", "#taglist li a.delete", function(event){
    event.preventDefault();
    pic_id = $(this).attr("rel");
    $.post('deletetag.php', pic_id, function(){
        viewtag();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T07:24:17.433

不确定您要做什么，但您的选择器是此处的按钮，并且 attr rel 是父级`<li>`..所以使用`parent()`...

尝试这个

```
$('#taglist li a.delete').on('click', function(){
    pic_id = $(this).parent().attr("rel");
    $.post('deletetag.php', {pic_id:pic_id}, function(){
        viewtag();
      });
}); 
```

如果您`<li>`是动态添加的，则在委托事件上使用..

```
$('#taglist').on('click','li a.delete', function(){.... 
```

如果您想了解有关 jquery 的更多信息，可以通过[链接](http://jq4you.blogspot.com/)`on()`

# android - Android gridview 在更改方向但需要更新视图时保持状态

> ID：14682040
> 
> 赞同：1
> 
> 时间：2013-02-04T07:20:05.983
> 
> 标签：android, android-view, android-gridview, android-adapter, android-adapterview

我有一个gridview，它根据gridview的大小和col宽度设置视图，当我们开始时一切都很好，但是当我改变方向时，视图被重新创建并且被选中的复选框被刷新，这是我不想要的。我需要保持滚动状态以及复选框状态。

这是我在getview中的代码：

```
public View getView(int position, View convertView, ViewGroup parent) {
            ViewHolder holder;
            if (convertView == null) {
                holder = new ViewHolder();
                convertView = mInflater.inflate(R.layout.galleryitem, null);
                holder.imageview = (ImageView) convertView.findViewById(R.id.thumbImage);
                holder.checkbox = (CheckBox) convertView.findViewById(R.id.itemCheckBox);

                convertView.setTag(holder);
            } else {
                holder = (ViewHolder) convertView.getTag();
            }
            ImageItem item = images.get(position);
            holder.checkbox.setId(position);
            holder.imageview.setId(position);
            holder.checkbox.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    CheckBox cb = (CheckBox) v;
                    int id = cb.getId();
                    if (images.get(id).selection) {
                        cb.setChecked(false);
                        images.get(id).selection = false;
                    } else {
                        cb.setChecked(true);
                        images.get(id).selection = true;
                    }
                }
            });
            holder.imageview.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    int id = v.getId();
                    ImageItem item = images.get(id);
                    Intent intent = new Intent();
                    intent.setAction(Intent.ACTION_VIEW);
                    final String[] columns = { MediaStore.Images.Media.DATA };
                    Cursor imagecursor = getContentResolver().query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                            columns, MediaStore.Images.Media._ID + " = " + item.id, null, MediaStore.Images.Media._ID);
                    if (imagecursor != null && imagecursor.getCount() > 0) {
                        imagecursor.moveToPosition(0);
                        String path = imagecursor.getString(imagecursor
                                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA));
                        File file = new File(path);
                        imagecursor.close();
                        intent.setDataAndType(Uri.fromFile(file), "image/*");
                        startActivityForResult(intent, VIEW_IMAGE);
                    }
                }
            });
            // holder.imageview.setImageBitmap(item.img);
            holder.imageview.setLayoutParams(mImageViewLayoutParams);

            // Check the height matches our calculated column width
            if (holder.imageview.getLayoutParams().height != mItemHeight) {
                holder.imageview.setLayoutParams(mImageViewLayoutParams);
            }
            bitmapFromId.DisplayImage(item.id, holder.imageview);
            // holder.imageview.setImageBitmap(item.img);
            holder.checkbox.setChecked(item.selection);
            return convertView;
        } 
```

如果我设置 android:configChanges="orientation" 它不会更新我在网格中的视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:23:36.647

您可以保留配置更改之前的状态并在更改后恢复它。您可以执行类似的操作，如下所示。

```
/*
 * (non-Javadoc)
 * 
 * @see android.app.Activity#onRestoreInstanceState(android.os.Bundle)
 */
@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
    int scrollTo = savedInstanceState.getInt("firstItem");
    gridView.setSelection(scrollTo);
    setSelectedItem(savedInstanceState.getInt("selectedItem"));//A method to set the selected Item
}

/* (non-Javadoc)
 * @see android.app.Activity#onSaveInstanceState(android.os.Bundle)
 */
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    int scrollTo = gridView.getFirstVisiblePosition();
    outState.putInt("firstItem", scrollTo);
    int selectedItem = getSelectedImageItem();//A method to retrieve the selected item from the adapter
    outState.putInt("selectedItem", selectedItem);
    /*additionally you can pass the entire collection into the bundle and retrieve it as well 
    using android.app.Activity#onRetainNonConfigurationInstance*/
} 
```

请通过以下链接了解更多信息，从长远来看，这将对您有所帮助。

[处理运行时配置更改](http://developer.android.com/guide/topics/resources/runtime-changes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:23:38.673

在 androidmanifest.xml 中添加在您的活动中爆炸的项目

```
android:configChanges="orientation|screenSize|keyboardHidden" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T07:55:05.937

将此添加到您的清单中

```
<activity
            android:name=".Your_Activity"
            android:configChanges="keyboardHidden|orientation" > 
```

并在 Java 代码中进行更改以更新视图 `Window.onOrientationChange`

# ruby-on-rails - 如何在 Ruby on Rails 2.3.8 中获取选定值？

> ID：14682041
> 
> 赞同：0
> 
> 时间：2013-02-04T07:20:12.753
> 
> 标签：ruby-on-rails

我的 select_tag 如下。

```
<%= select_tag "group", options_from_collection_for_select(@groups, "id", "gname") %> 
```

如何在我的控制器中获取选定的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:24:25.247

使用方括号。

```
select_tag "group[]", options_for .... 
```

注意 []。然后，Rails 会将其存储为 {"group" => [每个表单的一个选项]}。

如果知道哪个选择提供了哪个值很重要，您可以嵌套它们，所以

```
select_tag "group[bob]", ... 
```

会提供`{"group" => {"bob" => selected_option}}.`

基本上， [] 将其存储在一个数组中，而 [key] 将其存储在带有该键的哈希中。

然后在控制器中，您可以用作：

`params["group"]`，它应该是页面上各种选择的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:22:07.907

尝试`puts params`检查您的控制台以查看发送到控制器的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T07:27:25.683

那应该`params[:group]`在您的控制器中。

# html - CSS文本翻转效果？

> ID：14682048
> 
> 赞同：1
> 
> 时间：2013-02-04T07:21:11.727
> 
> 标签：html, css, hover, css-transitions

自从我使用 css 以来已经有很多年了（当时没有 css3 这样的东西）所以我很难理解如何，在下一页；

[http://www.webdesignerdepot.com/2013/01/how-to-build-a-threaded-comment-block-with-html5-and-css3/](http://www.webdesignerdepot.com/2013/01/how-to-build-a-threaded-comment-block-with-html5-and-css3/)

红色链接在悬停时进行了一种翻转操作，我尝试使用“检查元素”破译底层 css，但这就像意大利面条，我尝试将类粘贴到我的文件中，并以很少的结果分配它。

这种效果是否有正式名称，或者任何人都可以给我一个关于如何复制它的想法？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T07:52:33.027

“滚动链接”类在这里发挥了作用。过渡和变换属性正在做很酷的效果。当你看到 -webkit- 和 -moz- 和其他的时候，这意味着它是针对那些浏览器的，因为这些属性还不是标准的，但是一些浏览器无论如何都希望支持它们。

```
/* ROLL LINKS */
.roll-link {
    display: inline-block;
    overflow: hidden;

    vertical-align: top;

    -webkit-perspective: 600px;
       -moz-perspective: 600px;
       -ms-perspective: 600px;
       perspective: 600px;

    -webkit-perspective-origin: 50% 50%;
       -moz-perspective-origin: 50% 50%;
       -ms-perspective-origin: 50% 50%;
       perspective-origin: 50% 50%;

}

.roll-link:hover {text-decoration:none;}

.roll-link span {
    display: block;
    position: relative;
    padding: 0 2px;

    -webkit-transition: all 400ms ease;
       -moz-transition: all 400ms ease;
       -ms-transition: all 400ms ease;
       transition: all 400ms ease;

    -webkit-transform-origin: 50% 0%;
       -moz-transform-origin: 50% 0%;
       -ms-transform-origin: 50% 0%;
       transform-origin: 50% 0%;

    -webkit-transform-style: preserve-3d;
       -moz-transform-style: preserve-3d;
       -ms-transform-style: preserve-3d;
       transform-style: preserve-3d;
}
.roll-link:hover span {
        background: #DD4D42;

        -webkit-transform: translate3d( 0px, 0px, -30px ) rotateX( 90deg );
           -moz-transform: translate3d( 0px, 0px, -30px ) rotateX( 90deg );
           -ms-transform: translate3d( 0px, 0px, -30px ) rotateX( 90deg );
           transform: translate3d( 0px, 0px, -30px ) rotateX( 90deg );
}

.roll-link span:after {
    content: attr(data-title);

    display: block;
    position: absolute;
    left: 0;
    top: 0;
    padding: 0 2px;

    color: #fff;
    background: #DD4D42;

    -webkit-transform-origin: 50% 0%;
       -moz-transform-origin: 50% 0%;
       -ms-transform-origin: 50% 0%;
       transform-origin: 50% 0%;

    -webkit-transform: translate3d( 0px, 105%, 0px ) rotateX( -90deg );
       -moz-transform: translate3d( 0px, 105%, 0px ) rotateX( -90deg );
       -ms-transform: translate3d( 0px, 105%, 0px ) rotateX( -90deg );
       transform: translate3d( 0px, 105%, 0px ) rotateX( -90deg );
} 
```

这部分例如：

```
.roll-link:hover span {
        background: #DD4D42;

        -webkit-transform: translate3d( 0px, 0px, -30px ) rotateX( 90deg );
           -moz-transform: translate3d( 0px, 0px, -30px ) rotateX( 90deg );
           -ms-transform: translate3d( 0px, 0px, -30px ) rotateX( 90deg );
           transform: translate3d( 0px, 0px, -30px ) rotateX( 90deg );
} 
```

这意味着当悬停在具有滚动链接类的元素内的 span 元素时，将应用这些样式，但当不悬停在它们上时将停止应用这些样式。

CSS 变换属性有点复杂，有几个部分。这里的很多人不喜欢 w3schools，但它们是入门教育的良好起点。[http://www.w3schools.com/cssref/css3_pr_transform.asp](http://www.w3schools.com/cssref/css3_pr_transform.asp)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T08:29:30.520

以下是负责轮换的代码：

```
-webkit-transform: translate3d( 0px, 0px, -30px ) rotateX( 90deg );
-moz-transform: translate3d( 0px, 0px, -30px ) rotateX( 90deg );
-ms-transform: translate3d( 0px, 0px, -30px ) rotateX( 90deg );
transform: translate3d( 0px, 0px, -30px ) rotateX( 90deg ); 
```

### 这是一个有效的[JSFiddle](http://jsfiddle.net/3Nds4/)

# c++ - 将新添加的命令按钮添加到现有项目中的 VC6 MFC 错误

> ID：14682051
> 
> 赞同：1
> 
> 时间：2013-02-04T07:21:20.440
> 
> 标签：c++, visual-c++, mfc, mfc-feature-pack

我正在使用 VC6 MFC 项目。我试图在现有项目中添加一个命令按钮。当我双击新添加的按钮以触发单击事件时，我收到以下错误**“无法添加新成员”**。

当我使用项目中的现有命令按钮尝试此操作时，它正确映射到相应的功能。

我尝试为新添加的功能添加消息映射（手动）。但是当事件被触发时，它不会被调用。

当我尝试为对话框添加类向导时，即使项目包含所有文件，VC6 也无法找到项目文件和现有类，因此会引发错误。

我尝试了以下链接中提到的步骤，但它不起作用。

[如何从 MFC 错误“无法添加新成员”中恢复？](https://stackoverflow.com/questions/2065176/how-to-recover-from-mfc-error-cannot-add-new-member)

[http://msdn.microsoft.com/en-us/library/aa295101(v=vs.60).aspx](http://msdn.microsoft.com/en-us/library/aa295101(v=vs.60).aspx)

[http://social.msdn.microsoft.com/Forums/en-us/vclanguage/thread/1d4cb1f6-f471-46f9-abf3-fa9bb09d1e40](http://social.msdn.microsoft.com/Forums/en-us/vclanguage/thread/1d4cb1f6-f471-46f9-abf3-fa9bb09d1e40)

请向我建议有关如何将命令按钮添加到现有项目以及如何链接函数调用的解决方案，对应于添加的命令按钮。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:24:10.540

找到解决方案：资源 .h 包含一些默认值

**#define _APS_NEXT_CONTROL_VALUE 1025**

我们放置在表单中的下一个控件应该是在resource.h 中定义的_APS_NEXT_CONTROL_VALUE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:23:12.340

Visual C++ 6 附带的 MFC 版本（顺便说一句很*古老*）不支持命令按钮，直到很久以后才添加。如果您小心的话，您仍然可以使用命令按钮（即检测您的应用程序运行的平台是否支持命令按钮）并直接为特定命令按钮消息添加消息处理程序。

长话短说：获取新版本的 Visual C++。

# java - 使用 Java 自动登录 Magento OAuth

> ID：14682054
> 
> 赞同：1
> 
> 时间：2013-02-04T07:21:37.943
> 
> 标签：java, magento, rest, oauth

我正在尝试在 Magento 的 REST 服务中自动登录。一切正常。除了我总是需要手动输入授权 URL。我正在尝试查找服务或其他东西，我可以输入授权 URL 并从中获取验证码。无需手动操作。

我使用了这个代码/教程：[http ://blog.jerrysapps.com/2012/11/05/using-the-magento-rest-api-in-java-with-scribe/](http://blog.jerrysapps.com/2012/11/05/using-the-magento-rest-api-in-java-with-scribe/)

谢谢。

编辑：现在您需要手动执行授权步骤，您需要单击一个按钮来“批准”，并且需要登录到 Magento 的后端。我想自动执行此操作。所以授权和登录到后端的步骤需要自动进行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:33:53.483

我相信您正在寻找这样的东西： [Magento REST api authentication](https://stackoverflow.com/questions/14152764/magento-rest-api-authentication)

您应该保留 oauth_token 和 oauth_token_secret。如果您使用的是 java，您可以查看 scribe： [https ://github.com/fernandezpablo85/scribe-java](https://github.com/fernandezpablo85/scribe-java)

Magento 拉取请求： [https ://github.com/fernandezpablo85/scribe-java/pull/325](https://github.com/fernandezpablo85/scribe-java/pull/325)

Magento 连接： [https ://github.com/saleram1/scribe-java/commit/7fef61789236d4dff183bb35ff5ce3a5a01c153a](https://github.com/saleram1/scribe-java/commit/7fef61789236d4dff183bb35ff5ce3a5a01c153a)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-15T18:29:23.517

也许不是最好的方法，但这对我有用。据我了解，Magento 令牌不会过期。不过，它们可以手动撤销。Scribe（在其他答案中提到）是我能找到的最简单的获得授权的方法。我还使用了一个非常方便的库 Xstream，它带有一个小的 FileUtil 类，用于在 xml 中存储和检索令牌和服务对象，这样我就不必每次都授权和获取新令牌。也许不是使用的最佳实践和一些不必要的代码，但它只需要一次授权。首先，我使用 createService()，然后使用 Authorization 类的 start() 方法。以下是使用的 Java 类：

MagentoApi.java

```
package somepackage;

import org.scribe.builder.api.DefaultApi10a;
import org.scribe.model.Token;

public class MagentoApi extends DefaultApi10a {

private static final String AUTHORIZE_URL = "http://domain.com/admin/oauth_authorize";

@Override
public String getAccessTokenEndpoint() {
    return "http://domain.com/oauth/token";
}

@Override
public String getRequestTokenEndpoint() {
    return "http://domain.com/oauth/initiate";
}

@Override
public String getAuthorizationUrl(Token requestToken) {
    return AUTHORIZE_URL+"?oauth_token="+requestToken.getToken();
}

} 
```

授权.java

```
package somepackage;

import com.thoughtworks.xstream.XStream;
import java.io.File;
import java.util.Scanner;
import org.scribe.builder.ServiceBuilder;
import org.scribe.model.Token;
import org.scribe.model.Verifier;
import org.scribe.oauth.OAuthService;

public class Authorization {

private OAuthService service;
private Token requestToken;
private Token accessToken;
private String authUrl;

public Token start() {

    File f = new File("token.xml");
    if (f.exists()) {
        System.out.println("Feching Existing Token");
        loadToken();
        return accessToken;
    }

    Scanner in = new Scanner(System.in);

    System.out.println("--- Magento OAuth Authorization ---\n");
    System.out.println("Fetching The Request Token...");
    requestToken = service.getRequestToken();
    System.out.println("Got The Request Token!\n");
    System.out.println(" Go & Authorize Magento Here:");
    authUrl = service.getAuthorizationUrl(requestToken);
    System.out.println(authUrl);
    System.out.println("\nPaste The Verifier Here:");
    System.out.print(">> ");
    Verifier verifier = new Verifier(in.nextLine());
    System.out.println("\nTrading The Request Token For An Access Token...");
    accessToken = service.getAccessToken(requestToken, verifier);
    System.out.println("Got the Access Token!");
    saveToken();
    return accessToken;
}

public OAuthService createService() {

    File f = new File("service.xml");
    if (f.exists()) {
        System.out.println("Feching Existing Service");
        loadService();
        return service;
    }
    service = new ServiceBuilder()
            .provider(MagentoApi.class)
            .apiKey("Consumer Key")
            .apiSecret("Consumer Secret")
            .build();
    saveService()
    return service;
}

 public void saveService() {
    File file = new File("service.xml");
    XStream xstream = new XStream();
    xstream.alias("service", OAuthService.class);
    String xml = xstream.toXML(service);
    try {
        FileUtil.saveFile(xml, file);
    } catch (Exception e) {
    }
}

public void saveToken() {
    File file = new File("token.xml");
    XStream xstream = new XStream();
    xstream.alias("token", Token.class);
    String xml = xstream.toXML(accessToken);

    try {
        FileUtil.saveFile(xml, file);
    } catch (Exception e) {
    }
}

@SuppressWarnings("unchecked")
public void loadService() {

    File file = new File("service.xml");
    XStream xstream = new XStream();
    xstream.alias("service", OAuthService.class);
    try {
        String xml = FileUtil.readFile(file);
        service = (OAuthService) xstream.fromXML(xml);
    } catch (Exception e) {

    }
}

@SuppressWarnings("unchecked")
public void loadToken() {

    File file = new File("token.xml");
    XStream xstream = new XStream();
    xstream.alias("token", Token.class);
    try {
        String xml = FileUtil.readFile(file);
        accessToken = (Token) xstream.fromXML(xml);
    } catch (Exception e) {
    }
}

} 
```

FileUtil.Java

```
package somepackage;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.IOException;
import java.nio.charset.Charset;
import java.nio.file.Files;

public class FileUtil {

private static final Charset CHARSET = Charset.forName("UTF-8");

public static String readFile(File file) throws IOException {
    StringBuilder stringBuffer = new StringBuilder();
    BufferedReader reader = Files.newBufferedReader(file.toPath(), CHARSET);
    String line = null;
    while ((line = reader.readLine()) != null) {
        stringBuffer.append(line);
    }
    reader.close();
    return stringBuffer.toString();
}

public static void saveFile(String content, File file) throws IOException {
    BufferedWriter writer = Files.newBufferedWriter(file.toPath(), CHARSET);
    writer.write(content, 0, content.length());
    writer.close();
}
} 
```

# java - Java Weka：如何指定拆分百分比？

> ID：14682057
> 
> 赞同：14
> 
> 时间：2013-02-04T07:21:48.953
> 
> 标签：java, weka

我已经编写了代码来创建模型并保存它。它工作正常。我的理解是，默认情况下，数据被分成 10 折。我希望在创建模型时将数据分成两组（训练和测试）。在 Weka UI 上，我可以使用“百分比拆分”单选按钮来完成。我想知道如何通过代码来做到这一点。我希望它分为两部分，80% 是训练，20% 是测试。这是我的代码。

```
 FilteredClassifier model = new FilteredClassifier();
        model.setFilter(new StringToWordVector());
        model.setClassifier(new NaiveBayesMultinomial());
        try {
            model.buildClassifier(trainingSet);
        } catch (Exception e1) { // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        ObjectOutputStream oos = new ObjectOutputStream(
                new FileOutputStream(
                        "/Users/me/models/MyModel.model"));
        oos.writeObject(model);
        oos.flush();
        oos.close(); 
```

这里的 trainingSet 已经填充了 Instances 对象。有人可以帮我弄这个吗？

提前致谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-05T15:35:15.613

在 UI 类[`ClassifierPanel`](https://svn.cms.waikato.ac.nz/svn/weka/trunk/weka/src/main/java/weka/gui/explorer/ClassifierPanel.java)的方法`startClassifier()`中，我找到了以下代码：

```
// Percent split

int trainSize = (int) Math.round(inst.numInstances() * percent
    / 100);
int testSize = inst.numInstances() - trainSize;
Instances train = new Instances(inst, 0, trainSize);
Instances test = new Instances(inst, trainSize, testSize); 
```

所以在随机化你的数据集之后......

```
trainingSet.randomize(new java.util.Random(0)); 
```

...我建议你`trainingSet`以同样的方式分割你的：

```
int trainSize = (int) Math.round(trainingSet.numInstances() * 0.8);
int testSize = trainingSet.numInstances() - trainSize;
Instances train = new Instances(trainingSet, 0, trainSize);
Instances test = new Instances(trainingSet, trainSize, testSize); 
```

然后使用`Classifier#buildClassifier(Instances data)`80% 的集合实例来训练分类器：

```
model.buildClassifier(train); 
```

**更新**：感谢@ChengkunWu 的回答，我在上面添加了随机化步骤。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-20T18:52:57.517

您可能还想随机化拆分。

```
data.randomize(new java.util.Random(0)); 
```

# video - 如何在统一项目中添加和播放 .mov 文件

> ID：14682059
> 
> 赞同：2
> 
> 时间：2013-02-04T07:21:52.207
> 
> 标签：video, unity3d, .mov

我正在尝试将 .mov 文件添加到我的统一项目中，并想在场景中播放该视频文件。如何创建一个在统一 3d 中播放视频的场景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:13:36.910

谢谢，这是 Unity Pro 版本的问题。现在我正在使用 Unity Pro，视频工作正常。

将视频文件导入资产文件夹后，您可以使用以下 javascript。

//创建一个MovieTexture变量

var movTexture : 电影纹理；

函数开始（）{

renderer.material.mainTexture = movTexture; movTexture.Play();

}

函数更新（）{

```
 if(Input.GetButtonDown ("Jump")) {
    if (movTexture.isPlaying) {
        movTexture.Pause();
    }
    else {
        movTexture.Play();
    }
}

if(Input.GetKeyDown(KeyCode.Space))
    movTexture.Stop(); 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-18T21:30:49.547

如果您使用 Windows 进行开发，请不要忘记安装 QuickTime。否则，您将无法将 *.mov 文件导入您的项目。以下是如何在 Unity3d 中导入和播放视频的小说明：http: [//druss.co/2015/05/unity3d-how-to-play-video-in-unity-project-movietexture/](http://druss.co/2015/05/unity3d-how-to-play-video-in-unity-project-movietexture/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:57:11.683

是的，如果你有 Unity Pro，你可以做的是使用[Movie Textures](http://docs.unity3d.com/Documentation/Manual/VideoFiles.html)。

> 电影纹理是从视频文件创建的动画纹理。通过将视频文件放置在项目的资产文件夹中，您可以像使用常规纹理一样导入要使用的视频。

如果您没有 Unity Pro，那么除非您想尝试使用[此](http://answers.unity3d.com/questions/16296/movie-playback-any-way-to-get-around-not-having-un.html)答案中概述的方法之一，否则您很不走运，但是由于性能不佳，我不建议您这样做。

# c# - C# - 自动刷新 ListView

> ID：14682063
> 
> 赞同：0
> 
> 时间：2013-02-04T07:22:16.550
> 
> 标签：c#

我有一个`ListView`，`ListView`数据是从数据库中获取的。旁边`ListView`有一个按钮来添加记录。

如果按下按钮，它将显示一个对话框

代码 ：

```
private void bAddStudent_Click(object sender, EventArgs e) {
    fAddStudent addStudent = new fAddStudent();
    addStudent.ShowDialog();
} 
```

添加记录后，对话框将`close()`显示 ListView。但`ListView`不是更新数据。

有没有办法让它**自动更新**？

**编辑：** 这是我添加记录的方式：

```
private void btnAdd_Click(object sender, EventArgs e) {
    string studentID = tbStudentId.Text;
    string studentName = tbStudentName.Text;
    string gender = tbGender.Text;

    string connectionString = "Data Source=xxx\\SQLEXPRESS;Initial Catalog=TestApplication;Integrated Security=SSPI; User ID=xxx;Password=xxx";

    using (SqlConnection connection = new SqlConnection(connectionString)) {
        SqlCommand cmd = new SqlCommand("INSERT INTO student (student_id, student_name, student_gender) VALUES (@studentId, @studentname, @studentGender) ");
        cmd.CommandType = CommandType.Text;
        cmd.Connection = connection;
        cmd.Parameters.AddWithValue("@studentId", studentID);
        cmd.Parameters.AddWithValue("@studentName", studentName);
        cmd.Parameters.AddWithValue("@studentGender", gender);
        connection.Open();
        cmd.ExecuteNonQuery();
    }
} 
```

显示代码`ListView`：

```
List<string> myListHeader = new List<string>(new string[] { "ID", "Name", "Gender" });
myListHeader.ForEach(name => lvStudent.Columns.Add(name));

SqlConnection UGIcon = new SqlConnection();
UGIcon.ConnectionString = "Data Source=xxx\\SQLEXPRESS;Initial Catalog=TestApplication;Integrated Security=SSPI; User ID=xxx\\user;Password=xxx";
UGIcon.Open();

SqlCommand cmd = new SqlCommand("SELECT * FROM student", UGIcon);

SqlDataReader dr = cmd.ExecuteReader();
while (dr.Read()) {
    ListViewItem item = new ListViewItem(dr[0].ToString());
    item.SubItems.Add(dr[1].ToString());
    item.SubItems.Add(dr[2].ToString());
    lvStudent.Items.Add(item);
} 
```

**笔记**

**“添加数据”表单与显示`ListView`表单不同，因此我无法访问`ListView`“添加数据”表单**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:27:19.087

每次要刷新数据时，都需要调用 databind() 方法。

据我了解，a）显示数据，b）向数据库添加新记录，但未显示新记录。如果是这种情况，只需调用 DataBind() 方法，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:47:29.917

您将记录添加到 SQL Server 上的表中。由于您`ListView`的未绑定，因此不会更新。

您可以采用最简单的方法并创建一个 refresh 方法`ListView`：

```
private void RefreshListView()
{
// clear ListView
lvStudent.Items.Clear();
List<string> myListHeader = new List<string>(new string[] { "ID", "Name", "Gender" });
myListHeader.ForEach(name => lvStudent.Columns.Add(name));

SqlConnection UGIcon = new SqlConnection();
UGIcon.ConnectionString = "Data Source=xxx\\SQLEXPRESS;Initial Catalog=TestApplication;   Integrated Security=SSPI; User ID=xxx\\user;Password=xxx";
UGIcon.Open();

SqlCommand cmd = new SqlCommand("SELECT * FROM student", UGIcon);

SqlDataReader dr = cmd.ExecuteReader();
while (dr.Read()) {
    ListViewItem item = new ListViewItem(dr[0].ToString());
    item.SubItems.Add(dr[1].ToString());
    item.SubItems.Add(dr[2].ToString());
    lvStudent.Items.Add(item); }
} 
```

每次向 SQL Server 表添加新记录时调用此方法。这样做是不太可能的。我建议您使用[bindings](http://www.codeproject.com/Articles/10008/Data-binding-a-ListView)，但它更复杂。

# wcf - wcf 自托管服务和跨机器的 wcf 发现不起作用

> ID：14682064
> 
> 赞同：1
> 
> 时间：2013-02-04T07:22:17.320
> 
> 标签：wcf, ws-discovery

我花了 3 个小时寻找任何样本并浏览了许多文章。我正在尝试让 WCF 即席发现机制为自托管的 Windows 服务工作。如果我在同一台机器上运行客户端它可以工作，但在另一台机器上它不会。每个教程/示例（方便地）在同一台工作的机器上显示它。

*   我在两台机器上都禁用了防火墙。
*   如果我直接在客户端使用端点，它就可以工作。因此，只有服务发现不起作用。

这是我的服务器代码：

```
static void Main(string[] args)
    {
        Uri baseAddress = new Uri(string.Format("http://{0}:12345/discovery/Myservice/", System.Net.Dns.GetHostName()));
        Console.WriteLine(baseAddress);
        using (ServiceHost serviceHost = new ServiceHost(typeof(SampleService.Service1), baseAddress))
        {
            serviceHost.AddServiceEndpoint(typeof(SampleService.IService1), new BasicHttpBinding(), string.Empty);
            serviceHost.Description.Behaviors.Add(new ServiceDiscoveryBehavior());

            ServiceMetadataBehavior metaDataBehavior = new ServiceMetadataBehavior();
            metaDataBehavior.HttpGetEnabled = true;
            serviceHost.Description.Behaviors.Add(metaDataBehavior);

            serviceHost.AddServiceEndpoint(new UdpDiscoveryEndpoint());
            serviceHost.Open();
            Console.WriteLine("Press to terminate service.");
            Console.ReadLine();
        }
    } 
```

这是我的客户代码：

```
static void InvokeService()
    {
        Console.WriteLine("\nFinding Service ..");
        DiscoveryClientBindingElement discoveryClientBindingElement =
              new DiscoveryClientBindingElement();
        var Services =
             discoveryClientBindingElement.FindCriteria = new FindCriteria(typeof(ServiceReference1.IService1));

        discoveryClientBindingElement.DiscoveryEndpointProvider = new UdpDiscoveryEndpointProvider();

        // The service uses the BasicHttpBinding, so use that and insert the DiscoveryClientBindingElement at the 
        // top of the stack
        CustomBinding binding = new CustomBinding(new BasicHttpBinding());
        binding.Elements.Insert(0, discoveryClientBindingElement);

        ServiceReference1.Service1Client client = new ServiceReference1.Service1Client(binding, DiscoveryClientBindingElement.DiscoveryEndpointAddress);
        Console.WriteLine("Data = " + client.GetData(1));
    } 
```

任何帮助是极大的赞赏。

# jquery - 引导模式隐藏无法正常工作

> ID：14682066
> 
> 赞同：0
> 
> 时间：2013-02-04T07:22:24.600
> 
> 标签：jquery, ruby, twitter-bootstrap, haml

```
.row
  .span12
    .front-heading{:style => "width:80%;margin: auto;border-bottom: 2px dotted grey;"} The most innovative fundraising program since thin, minty cookies.
    .modal#myModal.hide.fade
      .modal-header
        Requesting an installation
        = link_to "X", "#", :class => "close", "data-dismiss" => "modal"

    = form_tag request_installation_path,{:method => :post,:remote => true, :style => "margin-bottom:0;", :class => "form-horizontal"} do
      .modal-body
        #sent_message
        %fieldset
          .control-group
            = label_tag "Name", nil, :class => "control-label"
            .controls
                = text_field_tag "name", nil, :class => "span2"
            .control-group
              = label_tag "Email", nil, :class => "control-label"
              .controls
                = email_field_tag "email", nil, :class => "span2"

        .modal-footer
          = submit_tag "request", :class => "btn btn-success"#, "data-dismiss" => "modal"

    .sticky-banner{:style => "position:relative;"}
      %h3 Coaches and Administrators
      %span{:style => "position:absolute;top: 10px;right: 5px;"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:08:18.303

```
$('#myModal').modal('toggle'); 
```

这将隐藏/显示模态窗口。说明在这里：http: [//twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:17:42.483

如果这不起作用。使用以下，这应该工作。

```
$(".modal").css("visibility", "hidden"); 
```

也改变用途

```
$(".modal").css("visibility", "visible"); 
```

# c# - 如何在没有数据透视的情况下创建像 CSV 这样的查询？

> ID：14682074
> 
> 赞同：0
> 
> 时间：2013-02-04T07:22:53.633
> 
> 标签：c#, sql-server, csv, pivot

当我想从表创建 csv 时遇到了麻烦。

这是我的表格样本...

```
ID  HEADER_row  Value_row
1   A             100
2   B             200
3   C             300
4   D             400
5   E             500
6   A             600
7   B             700
8   C             800
9   D             900
10  E             1000 
```

以及我要创建的 csv 数据模型，请查看以下内容：

```
A   B   C   D   E   A   B   C   D   E
100 200 300 400 500 600 700 800 900 1000 
```

和

```
A   B   C   D   E
1OO 2OO 3OO 4OO 5OO
600 700 800 900 1000 
```

我已经为我的第一个模型问题尝试了这个......

```
SELECT STUFF(
(SELECT ',' + s.ElementName
FROM tableName s
FOR XML PATH('')),1,1,'') 

UNION ALL

SELECT STUFF(
(SELECT ',' + s.Value
FROM tableName s
FOR XML PATH('')),1,1,'') 
```

但它给了我这样的结果：

```
A   B   C   D   E   A   B   C   D   E
100 200 300 400 500 600 700 800 900 1000 
```

现在我想得到这样的另一个结果

```
 A  B   C   D   E
    1OO 2OO 3OO 4OO 5OO
    600 700 800 900 1000 
```

除了使用 pivot 之外，我应该使用什么样的查询来解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:07:14.930

要将这些数据拆分为单独的行，您将`row_number()`在第二个查询中包含使用`Value_row`：

通过应用，`row_number()`您可以按值对数据进行分区`Header_row`以分配两个单独的数字：

```
select Value_row,
  row_number() over(partition by header_row order by id) rn
from yourtable 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/a018f/1)。此查询给出结果：

```
| VALUE_ROW | RN |
------------------
|       100 |  1 |
|       600 |  2 |
|       200 |  1 |
|       700 |  2 |
|       300 |  1 |
|       800 |  2 |
|       400 |  1 |
|       900 |  2 |
|       500 |  1 |
|      1000 |  2 | 
```

然后将其合并到现有查询中，因此代码将是：

```
SELECT STUFF(
            (SELECT ',' + s.HEADER_row
            FROM yourtable s
            FOR XML PATH('')),1,1,'') 
UNION ALL
SELECT DISTINCT 
  STUFF(
            (SELECT ',' + cast(Value_row as varchar(50))
            from
            (
              select Value_row,
                row_number() over(partition by header_row order by id) rn
              from yourtable
            ) src      
            where r.rn = src.rn
            FOR XML PATH('')),1,1,'')
FROM
(
  select Value_row,
    row_number() over(partition by header_row order by id) rn
  from yourtable
)r ; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/a018f/4)

这给出了结果：

```
|                 LIST |
------------------------
|  A,B,C,D,E,A,B,C,D,E |
|  100,200,300,400,500 |
| 600,700,800,900,1000 | 
```

# c# - 如何在 Msbuild 中调用第二个目标

> ID：14682077
> 
> 赞同：3
> 
> 时间：2013-02-04T07:23:00.473
> 
> 标签：c#, asp.net, msbuild

我需要在 msbuild 中调用第二个目标，但是当我在 cmd 中调用它时，它显示错误，我的代码如下所示

MsBuild.csproj

```
<?xml version="1.0" encoding="utf-8" ?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <alen>123456</alen>
  </PropertyGroup>

  <Target Name="FirstTarget">
    <Message Text="Hello World $(alen)" />
  </Target>
  <Target Name="SecondTarget">
    <Message Text="The second target" />
  </Target>

</Project> 
```

第一个目标调用成功，但我无法加载第二个目标...怎么可能？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T07:43:58.060

由于您尚未定义它，因此默认目标是文件中的第一个目标，FirstTarget。要从命令行调用第二个目标，您需要使用 . 显式调用它`/t:SecondTarget`。`/t:FirstTarget;SecondTarget`如果你想同时运行，你可以使用。

您还可以将 SecondTarget 定义为始终位于第一个目标之后。像这样使用`AfterTargets`属性：

```
 <Target Name="SecondTarget" AfterTargets="FirstTarget"> 
```

现在`msbuild msbuild.proj`将调用两个目标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T07:36:29.033

你有没有尝试过

```
%SystemRoot%\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe "D:\test_2\MsBuild\MsBuild\BuildScript\MsBuild.csproj" /t:SecondTarget 
```

?

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-04-08T22:08:38.173

我知道这是一篇很老的帖子，但您也可以让一个目标调用其他目标。

```
 <Target Name="Build">
    <CallTarget Targets="PreBuild"/>
    <CallTarget Targets="Main"/>
    <CallTarget Targets="AfterBuild"/>
  </Target> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-04T08:09:42.370

另一种选择是在构建文件中定义默认目标，然后使用以下命令定义目标的顺序`DependsOnTargets`：

```
<Project DefaultTargets="DefaultTarget" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="3.5">
<Target Name="DefaultTarget" DependsOnTargets="FirstTarget;SecondTarget">
  <Message Text="Executing DefaultTarget" />
</Target>

<!--  your targets -->

</Project> 
```

中定义的目标`DependsOnTargets`将在目标本身运行之前运行。这样做，您不需要`/t:`在调用中设置参数。

# jquery - jq为x轴绘制这么多标签

> ID：14682078
> 
> 赞同：1
> 
> 时间：2013-02-04T07:23:02.573
> 
> 标签：jquery, jqplot

我从使用 jqPlot 开始，但我不了解轴的某些选项（例如 numberTicks）。这条规则 ['time', value] 有很多值（大约 1000 个）。但是，如果我将所有这些值都放到图中，我还会看到所有 x 轴标签（时间标签），并且有 1000 个值，这有点混乱。那么我可以设置一些方法吗：只显示步骤中的标签。如果我有 1000 个值（所以 1000 个标签）并且我设置了 numberTicks：100，那么 numberTicks 对我不起作用。我只能看到 FIRST 100 个标签。我认为 numberTicks 表示范围内的刻度数（第一个 x 轴值，最后一个 x 轴值）。

![这是一张用于清除的图片](../Images/d8b6f64c582bf2122ee2f5785032bd49.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:21:01.157

尝试这样的事情：

[http://jsfiddle.net/pabloker/GsDMW/2/](http://jsfiddle.net/pabloker/GsDMW/2/)

```
$(document).ready(function(){
 var points = []; 
 for (var i=0; i<1000; i+=1){ 
 points.push([i, 1 + Math.floor(Math.random() * 60)]); 
 } 
 var plot1 = $.jqplot('chart1', [points], {  
  series:[{showMarker:false}],
  axes:{
    xaxis:{
        max: 1000,
        min: 0,
        numberTicks: 10
    }
  }
 });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:17:22.397

这就是我要找的，谢谢。但我需要这个时间x轴。所以经过一番测试，我终于找到了解决方案：

```
 var line1 = [['00:00:06',18.64],['00:01:06',18.73], ..... ];
  var plot1 = $.jqplot('chart1', [line1], {    
  title:'Living room - temperature',    
      axes: {      
        xaxis: {       
          renderer:$.jqplot.DateAxisRenderer,       
          tickOptions: {          
            formatString: '%H:%M:%S'
          },
          min: '00:00:01',
          max: '24:00:00',
          numberTicks: 25  
        }   
      } 
  }); 
```

现在，当滴答声每隔一小时时，我的绘图中有超过 1000 个温度值。

# java - java arraylist HashMap如何排序？

> ID：14682079
> 
> 赞同：2
> 
> 时间：2013-02-04T07:23:18.570
> 
> 标签：java, map, arraylist, hashmap

如何对数组进行排序？

## 前

```
{"A"=1, "B"=1, "C"=3}, 
{"A"=1, "B"=1, "C"=2},
{"A"=1, "B"=11, "C"=2},
{"A"=1, "B"=2, "C"=2},
{"A"=1, "B"=1, "C"=11} 
```

## 后

```
{"A"=1, "B"=1, "C"=2},
{"A"=1, "B"=1, "C"=3},
{"A"=1, "B"=1, "C"=11},
{"A"=1, "B"=2, "C"=2}, 
{"A"=1, "B"=11, "C"=2} 
```

## 代码

```
 ArrayList mylist = new ArrayList();

    Map<String,Integer> mMap = new HashMap<String,Integer>();
    mMap.put("A",1);
    mMap.put("B",1);
    mMap.put("C",3);
    mylist.add(mMap); 

    mMap = new HashMap<String,Integer>();
    mMap.put("A",1);
    mMap.put("B",1);
    mMap.put("C",2);
    mylist.add(mMap); 

    mMap = new HashMap<String,Integer>();
    mMap.put("A",1);
    mMap.put("B",11);
    mMap.put("C",2);
    mylist.add(mMap);

    mMap = new HashMap<String,Integer>();
    mMap.put("A",1);
    mMap.put("B",2);
    mMap.put("C",2);
    mylist.add(mMap);

    mMap = new HashMap<String,Integer>();
    mMap.put("A",1);
    mMap.put("B",1);
    mMap.put("C",11);       
    mylist.add(mMap); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T07:30:32.553

像这样定义自己的比较器：

```
public class MyMapComparator implements Comparator<Map <String, Integer>> 
{
    @Override
    public int compare (Map<String, Integer> o1, Map<String, Integer> o2) 
    {
        int c;

        c = o1.get ("A").compareTo(o2.get ("A"));
        if (c != 0) return c;

        c = o1.get ("B").compareTo(o2.get ("B"));
        if (c != 0) return c;

        return o1.get ("C").compareTo(o2.get ("C"));
    }
} 
```

然后使用它对您的列表进行排序：

```
Collections.sort (mylist, new MyComparator ()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-25T03:41:51.947

这是一个如何对编译和运行的 HashMaps 的 ArrayList 进行排序的示例 - 我找不到这样的示例 - 所以，除非我从我的 Dell mini 中搞砸了剪切和粘贴，这很容易做到，否则应该这样做。

```
import java.util.*;
import java.lang.*;

public class test {

public static class mySort implements Comparator<HashMap<String,Integer>> {

    @Override
    public int compare(HashMap<String, Integer> map1, HashMap<String, Integer> map2) {
        return map1.get("number").intValue() - map2.get("number").intValue();
    }
}

static void displayAL(ArrayList<HashMap> al) {

    Iterator it = al.iterator();
    HashMap<String,Integer> hm;

    while (it.hasNext()) {

      hm = (HashMap<String,Integer>)it.next();
      System.out.println(hm.get("number"));

    }

    System.out.println();

}

public static void main(String[] args) {

    ArrayList<HashMap> al = new ArrayList<HashMap>();
HashMap<String,Integer> hm = new HashMap<String,Integer>();

hm.put("number",10);
al.add(hm);
hm = new HashMap<String,Integer>();
hm.put("number",2);
al.add(hm);
hm = new HashMap<String,Integer>();
hm.put("number",0);
al.add(hm);
hm = new HashMap<String,Integer>();
hm.put("number",-3);
al.add(hm);

displayAL(al);

Collections.sort((ArrayList)al,new mySort());

System.out.println("sorted:\n");

displayAL(al);

  }
}

rick@rick-jolicloud:~/javaProjects$ java test
10
2
0
-3

sorted:

-3
0
2
10 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T07:29:33.663

您需要使用`Collections.sort(list, comparator)`where`Comparator<Map>`实现您的自定义比较逻辑

# apache-flex - 取消拖动 esc 按钮

> ID：14682081
> 
> 赞同：0
> 
> 时间：2013-02-04T07:23:36.627
> 
> 标签：apache-flex, flex4

我有一个启用拖动的列表控件。如何通过按键取消拖动`Esc`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:13:20.573

取消拖动没有默认行为，但您可以监听键盘并模拟鼠标向上事件。这是示例（解决方案取自[此处](http://meamit.wordpress.com/2011/08/30/cancelling-drag-drop-operation-when-user-hits-escape/)）：

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx"
               keyDown="onKeyDown(event)">

        <s:List  dataProvider="{dataProvider}"  dragEnabled="true" />

    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.managers.DragManager;
            import mx.managers.dragClasses.DragProxy;

            [Bindable]
            public var dataProvider:ArrayCollection = new ArrayCollection([{label: "name1"}, {label: "name2"}, {label: "name3"}, {label: "name4"}]);

            private function onKeyDown(event:KeyboardEvent):void
            {
                if (event.keyCode == Keyboard.ESCAPE)
                {
                    DragManager.acceptDragDrop(null);

                    // get drag proxy
                    var dragProxy: DragProxy = DragManager.mx_internal::dragProxy;
                    if (dragProxy != null) {
                        //provide some thing for mouse up
                        dragProxy.mouseUpHandler(new MouseEvent(MouseEvent.MOUSE_UP));
                    }
                }
            }
        ]]>
    </fx:Script>
</s:Application> 
```

# crystal-reports - 水晶报表中具有特定条件的 SUM

> ID：14682086
> 
> 赞同：0
> 
> 时间：2013-02-04T07:23:59.577
> 
> 标签：crystal-reports, crystal-reports-2010

基本上我想按特定条件对数据求和。这些是我的数据示例：

`Group 1 - Value: 10, 20, 30, Group 2-Value: 10, 20, 30, Group 3-Value: 10, 20, 30,`

我只想对第 1 组和第 3 组求和。如何做到这一点，就像在 sql 中我们可以编写一样。`select sum(group) from table1 where group <>'Group 2'`我们如何使用公式来做到这一点。或者还有其他方法可以做到这一点。

# java - 使用带有 accountmanager 令牌的 imap 访问 gmail

> ID：14682093
> 
> 赞同：3
> 
> 时间：2013-02-04T07:24:28.700
> 
> 标签：java, android, gmail, imap

我正在尝试使用从 Android 的 AccountManager 收到的令牌而不是使用用户名和密码来实现 IMAP gmail 客户端。

Google 提供了这个带有 oauth2 的 IMAP 示例[http://code.google.com/p/google-mail-oauth2-tools/source/browse/#svn%2Ftrunk%2Fjava%2Fcom%2Fgoogle%2Fcode%2Fsamples%2Foauth2](http://code.google.com/p/google-mail-oauth2-tools/source/browse/#svn%2Ftrunk%2Fjava%2Fcom%2Fgoogle%2Fcode%2Fsamples%2Foauth2) [http： //code.google.com/p/google-mail-oauth2-tools/wiki/JavaSampleCode](http://code.google.com/p/google-mail-oauth2-tools/wiki/JavaSampleCode)

```
public static IMAPStore connectToImap(String host,
                                    int port,
                                    String userEmail,
                                    String oauthToken,
                                    boolean debug) throws Exception {
Properties props = new Properties();
props.put("mail.imaps.sasl.enable", "true");
props.put("mail.imaps.sasl.mechanisms", "XOAUTH2");
props.put(OAuth2SaslClientFactory.OAUTH_TOKEN_PROP, oauthToken);
Session session = Session.getInstance(props);
session.setDebug(debug);

final URLName unusedUrlName = null;
IMAPSSLStore store = new IMAPSSLStore(session, unusedUrlName);
final String emptyPassword = "";
store.connect(host, port, userEmail, emptyPassword);
return store; 
```

}

```
public static void main(String args[]) throws Exception {
if (args.length != 2) {
  System.err.println(
      "Usage: OAuth2Authenticator <email> <oauthToken>");
  return;
}
String email = args[0];
String oauthToken = args[1];

initialize();

IMAPStore imapStore = connectToImap("imap.gmail.com",
                                    993,
                                    email,
                                    oauthToken,
                                    true);
System.out.println("Successfully authenticated to IMAP.\n"); 
```

}

但是，当我运行上面的代码时，我得到了“空用户名或密码”的异常。有人可以告诉我如何使用 imap 和 xoauth2 访问 gmail 吗？谢谢。

更新 2013/02/20，下面是调试日志

```
 02-19 17:27:20.098  1905: 1905 I/System.out : setDebug: JavaMail version 1.4.1    
 02-19 17:27:20.098  1905: 1905 I/System.out : mail.imap.fetchsize: 16384    
 02-19 17:27:20.106  1905: 1905 I/System.out : enable SASL    
 02-19 17:27:20.106  1905: 1905 I/System.out : SASL mechanisms allowed: XOAUTH2    
 02-19 17:27:21.340  1905: 1905 I/System.out : * OK Gimap ready for requests from 36.224.98.49 z8if14713202igb.53
 02-19 17:27:21.348  1905: 1905 I/System.out : A0 CAPABILITY
 02-19 17:27:21.598  1905: 1905 I/System.out : * CAPABILITY IMAP4rev1 UNSELECT IDLE NAMESPACE QUOTA ID XLIST CHILDREN X-GM-EXT-1 XYZZY SASL-IR AUTH=XOAUTH AUTH=XOAUTH2
 02-19 17:27:21.598  1905: 1905 I/System.out : A0 OK Thats all she wrote! z8if14713202igb.53
 02-19 17:27:21.614  1905: 1905 I/System.out : IMAP DEBUG: AUTH: XOAUTH    
 02-19 17:27:21.614  1905: 1905 I/System.out : IMAP DEBUG: AUTH: XOAUTH2    
 02-19 17:27:21.614  1905: 1905 I/System.out : DEBUG: protocolConnect login, host=imap.gmail.com, user=2104176@gmail.com, password=<non-null>    
 02-19 17:27:21.622  1905: 1905 I/System.out : IMAP SASL DEBUG: Mechanisms: XOAUTH2    
 02-19 17:27:21.817  1905: 1905 I/System.out : IMAP SASL DEBUG: Failed to create SASL client: myjavax.security.sasl.SaslException: Cannot instantiate class com.research.oauth.OAuth2SaslClientFactory [Caused by java.lang.InstantiationException: can't instantiate class com.research.oauth.OAuth2SaslClientFactory]
  02-19 17:27:21.817  1905: 1905 I/System.out : A1 LOGIN 2104176@gmail.com ""
 02-19 17:27:22.036  1905: 1905 I/System.out : A1 NO Empty username or password. z8if14713202igb.53
 02-19 17:27:22.044  1905: 1905 D/test       : javax.mail.AuthenticationFailedException: Empty username or password. z8if14713202igb.53 
```

我使用你的 mail.jar 和我的应用程序**无法创建 SASL 客户端：myjavax.security.sasl.SaslException: 无法实例化类 com.research.oauth.OAuth2SaslClientFactory**，然后应用程序使用空密码登录 gmail。请帮我解决问题，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T17:07:50.393

您是否记得在 OAuth2Provider 中更改了您的包名称？当我使用该代码进行测试时，我忘记了它。

```
public static final class OAuth2Provider extends Provider {
private static final long serialVersionUID = 1L;

public OAuth2Provider() {
  super("Google OAuth2 Provider", 1.0,
        "Provides the XOAUTH2 SASL Mechanism");
  put("SaslClientFactory.XOAUTH2",
      "com.example.testjavamail.OAuth2SaslClientFactory");
} 
```

}

正如我在另一个答案中所说，我只测试了连接，但它对我有用。

**更新**

这是我使用的代码，基本上是示例代码，真正改变了 Java Mail 中 SASL 支持的移植。

```
public class OAuth2Authenticator {
private static final Logger logger = Logger
        .getLogger(OAuth2Authenticator.class.getName());
private static Session mSession;

public static final class OAuth2Provider extends Provider {
    private static final long serialVersionUID = 1L;

    public OAuth2Provider() {
        super("Google OAuth2 Provider", 1.0,
                "Provides the XOAUTH2 SASL Mechanism");
        put("SaslClientFactory.XOAUTH2",
                "com.example.testjavamail.OAuth2SaslClientFactory");
    }
}

public static void initialize() {
    Security.addProvider(new OAuth2Provider());
}

public static IMAPStore connectToImap(String host, int port,
        String userEmail, String oauthToken, boolean debug)
        throws Exception {
    Properties props = new Properties();
    props.put("mail.imaps.sasl.enable", "true");
    props.put("mail.imaps.sasl.mechanisms", "XOAUTH2");
    props.put(OAuth2SaslClientFactory.OAUTH_TOKEN_PROP, oauthToken);
    Session session = Session.getInstance(props);
    session.setDebug(debug);

    final URLName unusedUrlName = null;
    IMAPSSLStore store = new IMAPSSLStore(session, unusedUrlName);
    final String emptyPassword = "";
    store.connect(host, port, userEmail, emptyPassword);
    return store;
}

public static SMTPTransport connectToSmtp(String host, int port,
        String userEmail, String oauthToken, boolean debug)
        throws Exception {
    Properties props = new Properties();
    props.put("mail.smtp.starttls.enable", "true");
    props.put("mail.smtp.starttls.required", "true");
    props.put("mail.smtp.sasl.enable", "true");
    props.put("mail.smtp.sasl.mechanisms", "XOAUTH2");
    props.put(OAuth2SaslClientFactory.OAUTH_TOKEN_PROP, oauthToken);
    mSession = Session.getInstance(props);
    mSession.setDebug(debug);

    final URLName unusedUrlName = null;
    SMTPTransport transport = new SMTPTransport(mSession, unusedUrlName);
    // If the password is non-null, SMTP tries to do AUTH LOGIN.
    final String emptyPassword = null;
    transport.connect(host, port, userEmail, emptyPassword);

    return transport;
}

public synchronized void testImap(String user, String oauthToken) {
    try {

        initialize();

        IMAPStore imapStore = connectToImap("imap.gmail.com", 993, user,
                oauthToken, true);

    } catch (Exception e) {
        Log.d("test", e.toString());
    }

}

public class ByteArrayDataSource implements DataSource {
    private byte[] data;
    private String type;

    public ByteArrayDataSource(byte[] data, String type) {
        super();
        this.data = data;
        this.type = type;
    }

    public ByteArrayDataSource(byte[] data) {
        super();
        this.data = data;
    }

    public void setType(String type) {
        this.type = type;
    }

    public String getContentType() {
        if (type == null)
            return "application/octet-stream";
        else
            return type;
    }

    public InputStream getInputStream() throws IOException {
        return new ByteArrayInputStream(data);
    }

    public String getName() {
        return "ByteArrayDataSource";
    }

    public OutputStream getOutputStream() throws IOException {
        throw new IOException("Not Supported");
    }
} 
```

}

这是来自 Java Mail 的调试。顺便说一句，发布您的调试日志，它应该有助于理解出了什么问题

```
02-06 10:18:11.805: I/System.out(7434): DEBUG: setDebug: JavaMail version 1.4.1
02-06 10:18:11.905: I/System.out(7434): DEBUG: mail.imap.fetchsize: 16384
02-06 10:18:12.025: I/System.out(7434): DEBUG: enable SASL
02-06 10:18:12.040: I/System.out(7434): DEBUG: SASL mechanisms allowed: XOAUTH2
02-06 10:18:12.600: I/System.out(7434): * OK Gimap ready for requests from 2.233.xxx.xxx  2if1471965eej.3
02-06 10:18:12.605: I/System.out(7434): A0 CAPABILITY
02-06 10:18:12.635: I/System.out(7434): * CAPABILITY IMAP4rev1 UNSELECT IDLE NAMESPACE QUOTA ID XLIST CHILDREN X-GM-EXT-1 XYZZY SASL-IR AUTH=XOAUTH AUTH=XOAUTH2
02-06 10:18:12.635: I/System.out(7434): A0 OK Thats all she wrote! 2if1471965eej.3
02-06 10:18:12.645: I/System.out(7434): IMAP DEBUG: AUTH: XOAUTH
02-06 10:18:12.645: I/System.out(7434): IMAP DEBUG: AUTH: XOAUTH2
02-06 10:18:12.645: I/System.out(7434): DEBUG: protocolConnect login, host=imap.gmail.com, user=xxx@gmail.com, password=<non-null>
02-06 10:18:12.650: I/System.out(7434): IMAP SASL DEBUG: Mechanisms: XOAUTH2
02-06 10:18:12.695: I/System.out(7434): IMAP SASL DEBUG: SASL client XOAUTH2
02-06 10:18:12.695: I/System.out(7434): A1 AUTHENTICATE XOAUTH2
02-06 10:18:12.720: I/System.out(7434): + 
02-06 10:18:12.720: I/System.out(7434): IMAP SASL DEBUG: challenge:  :
02-06 10:18:12.730: I/System.out(7434): IMAP SASL DEBUG: callback length: 1
02-06 10:18:12.730: I/System.out(7434): IMAP SASL DEBUG: callback 0: myjavax.security.auth.callback.NameCallback@41760f78
02-06 10:18:12.730: I/System.out(7434): IMAP SASL DEBUG: response: user=xxx@gmail.comauth=Bearer ya29.... :
02-06 10:18:12.735: I/System.out(7434): dXNlcj1hbGVhbGVtYXp6b3R0aUBnbWFpbC5jb20BYXV0aD1CZWFyZXIgeWEyOS5BSEVTNlpRYklPeU8xU09sR01WSEo3X2tqVzlVdzNYY1RvODBtQ0hyWFVacjRsYlhIdwEB
02-06 10:18:12.870: I/System.out(7434): * CAPABILITY IMAP4rev1 UNSELECT IDLE NAMESPACE QUOTA ID XLIST CHILDREN X-GM-EXT-1 UIDPLUS COMPRESS=DEFLATE
02-06 10:18:12.870: I/System.out(7434): A1 OK xxx@gmail.com My NAME authenticated (Success)
02-06 10:18:12.870: I/System.out(7434): A2 CAPABILITY
02-06 10:18:13.160: I/System.out(7434): * CAPABILITY IMAP4rev1 UNSELECT IDLE NAMESPACE QUOTA ID XLIST CHILDREN X-GM-EXT-1 UIDPLUS COMPRESS=DEFLATE
02-06 10:18:13.160: I/System.out(7434): A2 OK Success 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T21:21:53.497

我为解决相同问题所做的工作是重新编译java邮件包的源代码，将javax.security的调用替换为IMAPSaslAuthenticator文件中的asmack。IMAP 连接可以通过，

```
11-29 15:51:46.921: D/11.28(2759):  --> the token is ya29.1.
11-29 15:51:46.937: I/System.out(2759): DEBUG: setDebug: JavaMail version ${mail.version}
11-29 15:51:46.937: I/System.out(2759): DEBUG IMAPS: mail.imap.fetchsize: 16384
11-29 15:51:46.937: I/System.out(2759): DEBUG IMAPS: mail.imap.ignorebodystructuresize: false
11-29 15:51:46.937: I/System.out(2759): DEBUG IMAPS: mail.imap.statuscachetimeout: 1000
11-29 15:51:46.937: I/System.out(2759): DEBUG IMAPS: mail.imap.appendbuffersize: -1
11-29 15:51:46.937: I/System.out(2759): DEBUG IMAPS: mail.imap.minidletime: 10
11-29 15:51:46.937: I/System.out(2759): DEBUG IMAPS: enable SASL
11-29 15:51:46.937: I/System.out(2759): DEBUG IMAPS: SASL mechanisms allowed: XOAUTH2
11-29 15:51:46.937: I/System.out(2759): DEBUG IMAPS: trying to connect to host "imap.gmail.com", port 993, isSSL true
11-29 15:51:47.085: D/dalvikvm(2759): GC_CONCURRENT freed 410K, 53% free 8847K/18503K, paused 3ms+6ms, total 38ms
11-29 15:51:47.085: I/System.out(2759): A4 LOGOUT
11-29 15:51:47.093: I/System.out(2759): DEBUG IMAPS: IMAPStore connection dead
11-29 15:51:47.093: I/System.out(2759): DEBUG IMAPS: IMAPStore cleanup, force true
11-29 15:51:47.093: I/System.out(2759): DEBUG IMAPS: IMAPStore cleanup done
11-29 15:51:47.093: D/AbsListView(2759): [unregisterDoubleTapMotionListener]
11-29 15:51:47.093: I/MotionRecognitionManager(2759):   .unregisterListener : / listener count = 0->0, listener=android.widget.AbsListView$4@41d9a1b0
11-29 15:51:47.093: I/System.out(2759): A4 LOGOUT
11-29 15:51:47.132: I/System.out(2759): * BYE LOGOUT Requested
11-29 15:51:47.140: I/System.out(2759): A4 OK 73 good day (Success)
11-29 15:51:47.140: I/System.out(2759): DEBUG IMAPS: IMAPStore connection dead
11-29 15:51:47.140: I/System.out(2759): DEBUG IMAPS: IMAPStore cleanup, force false
11-29 15:51:47.140: I/System.out(2759): DEBUG IMAPS: IMAPStore cleanup done
11-29 15:51:47.140: D/AbsListView(2759): [unregisterDoubleTapMotionListener]
11-29 15:51:47.140: I/MotionRecognitionManager(2759):   .unregisterListener : / listener count = 0->0, listener=android.widget.AbsListView$4@41de2ba0
11-29 15:51:47.171: I/System.out(2759): * OK Gimap ready for requests from 216.16.246.195 q6if13300240veb.40
11-29 15:51:47.171: I/System.out(2759): A0 CAPABILITY
11-29 15:51:47.218: I/System.out(2759): * CAPABILITY IMAP4rev1 UNSELECT IDLE NAMESPACE QUOTA ID XLIST CHILDREN X-GM-EXT-1 XYZZY SASL-IR AUTH=XOAUTH AUTH=XOAUTH2 AUTH=PLAIN AUTH=PLAIN-CLIENTTOKEN
11-29 15:51:47.218: I/System.out(2759): A0 OK Thats all she wrote! q6if13300240veb.40
11-29 15:51:47.218: I/System.out(2759): DEBUG IMAPS: AUTH: XOAUTH
11-29 15:51:47.226: I/System.out(2759): DEBUG IMAPS: AUTH: XOAUTH2
11-29 15:51:47.226: I/System.out(2759): DEBUG IMAPS: AUTH: PLAIN
11-29 15:51:47.226: I/System.out(2759): DEBUG IMAPS: AUTH: PLAIN-CLIENTTOKEN
11-29 15:51:47.226: I/System.out(2759): DEBUG IMAPS: protocolConnect login, host=imap.gmail.com, user=xxxx@gmail.com, password=<non-null>
11-29 15:51:47.226: I/System.out(2759): DEBUG IMAPS: SASL authentication command trace suppressed
11-29 15:51:47.226: I/System.out(2759): DEBUG IMAPS: SASL Mechanisms:
11-29 15:51:47.226: I/System.out(2759): DEBUG IMAPS:  XOAUTH2
11-29 15:51:47.226: I/System.out(2759): DEBUG IMAPS: 
11-29 15:51:47.233: I/System.out(2759): DEBUG IMAPS: SASL client XOAUTH2
11-29 15:51:47.272: I/System.out(2759): DEBUG IMAPS: SASL challenge:  :
11-29 15:51:47.272: I/System.out(2759): DEBUG IMAPS: SASL callback length: 1
11-29 15:51:47.272: I/System.out(2759): DEBUG IMAPS: SASL callback 0: org.apache.harmony.javax.security.auth.callback.NameCallback@41e082c8
11-29 15:51:47.272: I/System.out(2759): DEBUG IMAPS: SASL response: user=xxxx@gmail.comauth=Bearer ya29.1...UhhyFDen9bUwcd5I :
11-29 15:51:48.101: I/System.out(2759): DEBUG IMAPS: SASL authentication succeeded
11-29 15:51:48.101: I/System.out(2759): A2 CAPABILITY
11-29 15:51:48.272: I/System.out(2759): * CAPABILITY IMAP4rev1 UNSELECT IDLE NAMESPACE QUOTA ID XLIST CHILDREN X-GM-EXT-1 UIDPLUS COMPRESS=DEFLATE ENABLE MOVE CONDSTORE ESEARCH
11-29 15:51:48.272: I/System.out(2759): A2 OK Success
11-29 15:51:48.280: I/System.out(2759): A3 NAMESPACE
11-29 15:51:48.452: I/System.out(2759): * NAMESPACE (("" "/")) NIL NIL
11-29 15:51:48.452: I/System.out(2759): A3 OK Success 
```

我下载了

1.  javamail-1.5.0-src
2.  asmack-android-8-0.8.9.jar
3.  激活.jar

我没有使用

1.  邮件.jar
2.  附加的.jar

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-01T13:39:13.537

如果我在 main 方法中运行测试代码，这对我有用，但是在 glassfish 服务器上部署它我遇到了其他问题。遵循来自[http://code.google.com/p/google-mail-oauth2-tools/的代码](http://code.google.com/p/google-mail-oauth2-tools/)

然后触发了下面的这个异常，我开始认为这与错误或其他问题有关，但无法找出原因。回调是否需要 Google API 控制台中的一些 ULR？或者为什么它在本地工作，但在 glassfish 部署时却不能。java.lang.IllegalStateException: WEB9031: WebappClassLoader 无法加载资源 [com.google.code.samples.oauth2.OAuth2SaslClientFactory]，因为它尚未启动或已停止

还查看了此错误是否与此有关：[https ://groups.google.com/forum/#!msg/google-appengine/OK3FuIPuA1I/dgov_VRffVgJ](https://groups.google.com/forum/#!msg/google-appengine/OK3FuIPuA1I/dgov_VRffVgJ)

# javascript - 在运行时运行 javascript 广告脚本

> ID：14682094
> 
> 赞同：1
> 
> 时间：2013-02-04T07:24:31.020
> 
> 标签：javascript

如何使用 jquery/javascript 将第三方广告脚本 (javascript) 插入空 div。问题是我通过 ajax 获取广告脚本。

```
<!-- begin ad tag (tile=1.....) -->
<script language="javascript"><!--
document.write('<scr'+'ipt language="javascript1.1" src="http://adserver.adtechus.com/addyn/3.0/5361.1/2130212/0/4417/ADTECH;loc=100;target=_blank;key=3104;grp=[group];misc='+new Date().getTime()+'"></scri'+'pt>');
//-->
</script><noscript><a href="http://adserver.adtechus.com/adlink/3.0/5361.1/2130212/0/4417/ADTECH;loc=300;key=3104;grp=[group]" target="_blank"><img src="http://adserver.adtechus.com/adserv/3.0/5361.1/2130212/0/4417/ADTECH;loc=300;key=3104;grp=[group]" border="0" width="670" height="200"></a></noscript>
<!-- End of JavaScript Tag --> 
```

问题是当我尝试将其加载到空 div (inline_ad_one) 时的页面加载：inlinead_1_code 是一个保存广告数据的变量。

```
$("#inline_ad_one").html(inlinead_1_code); 
```

它会加载他们跳转到仅包含已投放广告的新页面的页面。我怎样才能让它加载到空的div中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:10:59.020

将广告放在单独的 HTML 文件中，并使用如下内容：

```
$('.adcontainer').load('advert.html'); 
```

将文件加载到 div 中。

因为您正在使用`document.write`，所以我认为该页面正在被该行覆盖（尽管我从未使用过 document.write 所以我不是 100% 的）。

# php - 设置一个自动任务/一组 mysql 查询以在每个月的指定日期运行

> ID：14682099
> 
> 赞同：1
> 
> 时间：2013-02-04T07:24:53.093
> 
> 标签：php, mysql

我需要在每个月的 5 号更新数据库中的一些记录。我知道它依赖于时间，所以要么我将不得不依赖服务器时间或客户端时间。由于客户端时间不可靠并且我的服务器位于不同的时区和国家/地区，实现此目的的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:27:01.753

假设您的时间比服务器时间早 5 小时，并且您希望该作业在您的时间上午 10 点运行，那么您可以简单地安排它在每月 5 日的上午 5 点运行。现在，即使您更改计算机的时钟，这也不会影响服务器时间。除非你改变服务器时间。您可以安排一个 cron 作业以轻松运行。

**编辑：** 据我所知，没有其他可靠的调度方式。对于基于 NIX 的系统，它的 cron 作业和 Windows 的任务调度程序。但是，如果您依赖客户端连接在每 5 日上午 10 点打开，而不是手动进行，因为它不再像您要求的那样自动化。我真的不知道是否有更多方法，但对我来说，最好的肯定是 Cron Job。

此外，对于 cron 作业，您不需要编写任何代码。您可以通过 cron 作业管理器本身在预定时间调用现有的 PHP 脚本。它只需要查看要调用哪个程序，您的原因是哪个是 php，然后是要调用哪个文件。

**编辑**

既然你提到你使用 cPanel，这里是 cPanel 官方文档中的 cPanel 指南

[定时任务](http://docs.cpanel.net/twiki/bin/view/AllDocumentation/CpanelDocs/CronJobs)

# java - 修改此代码以仅采用一个参数（字符组合的长度）？

> ID：14682101
> 
> 赞同：1
> 
> 时间：2013-02-04T07:24:59.010
> 
> 标签：java, string, recursion

我正在尝试修改 [这里][在字符串中生成字符组合的答案 2 中的 java 代码不能完全正常工作，为什么？](https://stackoverflow.com/questions/9586589/generating-character-combination-in-a-string-doesnt-work-entirely-why)拥有一种方法来完成整个工作并且只采用一个参数，即组合中的字符数（即在 main 中作为方法（int）调用）。

这实际上是一个家庭作业，编写一个与上面链接中的代码相同的递归代码，即打印所需长度的所有字符组合，但在这种情况下，来自一组固定的字符，A、C、G 和 T（例如如果调用方法（2），它会打印 AA、AC、AG、AT、CA、CC...）。

到目前为止，我只有：

```
public static void printAllDNAs(int n) {
    String[] dna;
    dna = new String[4];
    dna[0] = "A";
    dna[1] = "C";
    dna[2] = "G";
    dna[3] = "T";

    String prfx = "";
    if (n == 0) {
        System.out.println(prfx);
    } else {
        for (int i = 0; i < dna.length; i++) {
            System.out.print(prfx + dna[i]);
            printAllDNAs(n - 1);
        }
    }
}

public static void main(String[] args) {
    printAllDNAs(3);
}
} 
```

这显然是不对的。我知道我需要依次给 prfx 集合中每个字母的值，并将集合中的一个或多个字符附加到它。有人可以给我一两个提示吗？非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:51:52.873

你可以试试这个解决方案：

```
public static void printDNARecursive(ArrayList<String> dnaCombinations, String prefix, String[] dnaArray, int depth) {
    if (prefix.length() == depth || dnaArray.length == 0) {
        return;
    }
    for (int i = 0; i < dnaArray.length; i++) {
        String dna = dnaArray[i];
        if (dna == null) {
            continue;
        }
        dnaCombinations.add(prefix + dna);
        String[] copyOf = Arrays.copyOf(dnaArray, dnaArray.length);
        copyOf[i] = null;
        printDNARecursive(dnaCombinations, prefix + dna, copyOf, depth);
    }
} 
```

它是如何工作的 - 此代码使用而不是打印 DNA 来筛选它将它们保存在`dnaCombinations`变量中。如果您的 DNA 达到最大深度的长度（作为`depth`变量），那么它不会走得更远。

它与您的略有不同，因为在内部`dnaCombinations`您也将拥有`"A", "C", "G", "T"`，但是您只能从`dnaCombinations`具有您选择的长度的字符串进行打印。

这里的小例子是如何工作的：

```
public static void main(String... args) {
    String[] dna = new String[] { "A", "C", "G", "T"};
    ArrayList<String> result = new ArrayList<String>();
    printDNARecursive(result, "", dna, 2);
    for (String d : result) {
        System.out.println(d);
    }
} 
```

结果是：`A AC AG AT C CA CG CT G GA GC GT T TA TC TG`

随意添加任何修改或将其用作模板

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:00:23.390

`String prfx`需要在函数之外。用 a 替换它`char[]`也使事情变得更容易和更快。请参阅下面的解决方案。

如果您只想要一个功能：

```
private static char arr[];
private static final char[] dna = "ACGT".toCharArray();
public static void printAllDNAs(int n)
{
   if (arr == null)
      arr = new char[n];
   if (n == 0)
   {
      System.out.println(String.valueOf(arr));
      return;
   }
   for (char c: dna)
   {
      arr[n-1] = c;
      printAllDNAs(n-1);
   }
   if (n == arr.length)
      arr = null;
} 
```

如果您不介意多个功能，这可能会更好（+ 稍微快一点）：

```
public static void printAllDNAs(int n)
{
  arr = new char[n];
  printAllDNAsInternal(n);
}

private static void printAllDNAsInternal(int n)
{
   if (n == 0)
   {
      System.out.println(String.valueOf(arr));
      return;
   }
   for (char c: dna)
   {
      arr[n-1] = c;
      printAllDNAs(n-1);
   }
} 
```

# jquery - struts2 jquery 指示器对话框

> ID：14682103
> 
> 赞同：2
> 
> 时间：2013-02-04T07:25:01.527
> 
> 标签：jquery, struts2, indicator

我正在使用 struts2 和 jquery 插件构建一个 Web 应用程序。我正在尝试使用 jquery 插件中包含的“指标”功能。实际上，当用户执行某些操作（按钮单击，列表选择...）时，我想触发一个弹出窗口，说“正在加载...”。

所以我有这个母版页 MasterPage.jsp：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%>  
<head>
<s:url id="customTheme" value="/template/themes" ></s:url>
<sj:head defaultIndicator="indictor" jqueryui="true" jquerytheme="warrtheme" customBasepath="%{customTheme}" />
</head>
<body>

<sj:dialog id="indicator"
           title="Loading"
           autoOpen="false"
           modal="true"
           resizable="false">
<table>
    <tr>
        <td>&nbsp;</td>
        <td><img src="<s:url value="/images/indicator.gif" />" /></td>
        <td>Loading...</td>
    </tr>
</table>
</sj:dialog>
</body>
</html> 
```

我有这个常规页面 User.jsp：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%>

<div class="content">
    <s:url var="openViewUser" namespace="/administration" action="administration_utilisateur_open" />
    <sj:a href="%{openViewUser}" id="divUserLink" targets="divUser" indicator="indicator">

    <div id="divUser"></div>
</div> 
```

当我点击上面代码中的链接时，弹出窗口没有出现。有什么线索吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:58:46.543

我想发布适合我的完整代码......

在 MasterPage.jsp 上：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%>  
<%@ taglib prefix="tiles" uri="http://tiles.apache.org/tags-tiles"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

<s:url id="customTheme" value="/template/themes" ></s:url>
<sj:head jqueryui="true" jquerytheme="warrtheme" customBasepath="%{customTheme}" />
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

<script type="text/javascript">
$.subscribe('onBeforeLoading', function(event,data) {
    $("#indicator").dialog('open');   
}); 

$.subscribe('onCompleteLoading', function(event,data) {  
    $("#indicator").dialog('close');   
}); 
</script>
</head>

<body>

<sj:dialog id="indicator"
       title="Warning"
       autoOpen="false"
       modal="true"
       resizable="false">
<table>
    <tr>
        <td>&nbsp;</td>
        <td><img src="<s:url value="/images/indicator.gif" />" /></td>
        <td>Loading, please wait...</td>
    </tr>
</table>
</sj:dialog>

</body>
</html> 
```

在 User.jsp 上：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%>

<div class="content">
    <s:url var="openViewUser" namespace="/administration" action="administration_utilisateur_open" />
    <sj:a href="%{openViewUser}" id="divUserLink" targets="divUser" onBeforeTopics="onBeforeLoading" onCompleteTopics="onCompleteLoading" >Click me</sj:a>
    <br/>
    <br/>
    <div id="divUser"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:49:44.253

你必须订阅**打开**的主题或者你必须捕获**onclick**事件。假设你想在点击时显示对话框

```
 function openDialog() 
    {
        $("#indicator").dialog('open');
    } 
```

成功加载 ajax 后，使用此关闭对话框

```
$("#indicator").dialog('close'); 
```

# php - mysql项目销售

> ID：14682104
> 
> 赞同：3
> 
> 时间：2013-02-04T07:25:06.343
> 
> 标签：php, mysql, sql, join

我想在这里问一个问题...让我解释一下...这里我有 3 个表，1\. transaction_table 2\. transaction_detail 3\. item

不，我的问题是我想知道本月（2013-01）的商品销售额，例如，这是我的表格结构......

1 事务表

```
--------------------------
idTransaction | date       | idUser | idCustomer  | total   | NOSC
--------------------------------------------------------------------
1             | 2013-01-01 | 3      | 4           | 500000  | 1CO
2             | 2013-01-01 | 3      | 5           | 450000  | 2CO
3             | 2013-01-01 | 3      | 6           | 250000  | 3CO 
```

2 交易细节

```
-----------------------------------------------------------------
idTransaction | idItem | qty | price
----------------------------------------
1             | 1      | 2   | 250000
2             | 2      | 1   | 250000
2             | 3      | 1   | 200000
3             | 1      | 1   | 250000 
```

3 项目表

```
idItem | Name Item
---------------------------------------
1      | glass
2      | Medicine A
3      | Medicine B 
```

4 客户

```
 idCustomer | Name Customer
    --------------------------------------
    4             | Abuh
    5             | Abeh
    6             | ABooh 
```

所以基于这些表我想得到这样的数据......

```
Name Item | Nosc | Customer | Sold Quantity | @ Price | Total
---------------------------------------------
Glass     | 1CO  | Abuh     |2              | 250000  | 500000
Glass     | 3CO  | ABooh    |1              | 250000  | 250000
Medicine A| 2CO  | Abeh     |1              | 250000  | 250000
Medicine B| 2CO  | Abeh     |1              | 200000  | 200000 
```

任何人都可以帮助我吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T07:29:30.527

```
SELECT  b.`name Item`,
        a.qty `Sold Quantity`,
        a.price `@ price`,
        (a.qty * a.price) Total
FROM    transaction_detail a    
        INNER JOIN Item b
            ON a.idItem = b.idItem 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/f7090/2)

上面的查询基于示例中给出的记录和结果。*后续问题：是否有可能以不同的价格出售某个商品？如果是这样，你如何计算它？*

**更新 1**

```
SELECT  b.`name Item`,
        SUM(a.qty) `Sold Quantity`,
        a.price `@ price`,
        (SUM(a.qty) * a.price) Total,
        c.Date
FROM    transaction_detail a    
        INNER JOIN Item b
            ON a.idItem = b.idItem
        INNER JOIN `transaction` c
            ON a.idtransaction = c.idTransaction
GROUP   BY b.idItem, b.`name Item`, a.price, c.Date 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/ab120/4)

**更新 2**

```
SELECT  b.`name Item`,
        SUM(a.qty) `Sold Quantity`,
        a.price `@ price`,
        (SUM(a.qty) * a.price) Total,
        d.`Name Customer`
FROM    transaction_detail a    
        INNER JOIN Item b
            ON a.idItem = b.idItem
        INNER JOIN `transaction` c
            ON a.idtransaction = c.idTransaction
        INNER JOIN Customer d
            ON d.idCustomer = c.idCustomer
GROUP   BY b.idItem, b.`name Item`, a.price, 
           MONTH(c.Date), YEAR(c.Date), d.`Name Customer` 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/5d648/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:40:46.857

```
select it.item_name,td.qty,td.price,t.total 
  from transaction as t,transaction_detail as td,item_table as it 
  where t.idTransaction=td.idTransaction 
    and td.idItem=it.idItem 
    and t.date between 'YEAR(CURDATE())."-".MONTH(CURDATE())."-"."01"' 
                   and 'YEAR(CURDATE())."-".MONTH(CURDATE())."-"."31"' 
```

# c# - AutoSize 垂直，而 AutoEllipsis 在标签控件上水平

> ID：14682106
> 
> 赞同：0
> 
> 时间：2013-02-04T07:25:11.277
> 
> 标签：c#, winforms, autosize

我想在用户控件的左下角放置一个标签。控件的大小可能会在水平和垂直方向上有所不同。当水平调整大小减小以致标签无法完全显示时，我希望 AutoEllipsis 启动。但另一方面，我不希望我的控件从左下角浮动，因为标签的高度不是自动调整的（这使文本保持在比自动调整大小的标签高几个像素的位置）。

所以我想知道如何水平设置 AutoEllipsis 但在标签控件上保持 AutoSize 垂直。帮帮我。

![自动尺寸=真； 自动省略号 = 假](../Images/250535ae54a1d2f115e049e279f03a11.png) ![自动尺寸=假； 自动省略号 = true](../Images/f3793ddf615487c653147d602cc714a1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T07:47:23.347

尝试为标签设置这些属性：

```
AutoEllipsis = true
Anchor = Top, Bottom, Left
AutoSize = false 
```

**更新：** 试试这些属性：

```
AutoEllipsis = true
TextAlign = TopLeft
Anchor = Bottom, Left, Right
AutoSize = false 
```

# linux - Linux - 转义键不起作用，常规转义绑定到 Shift-Escape

> ID：14682109
> 
> 赞同：1
> 
> 时间：2013-02-04T07:25:29.840
> 
> 标签：linux, keyboard

我今天安装了 Zenwalk Linux。我发现 Escape 键没有绑定到任何东西（至少据我所知），而是 Escape 通常会做的事情（关闭程序，打开 vim 命令行等） Shift-Escape 绑定到。

虽然这不是什么大问题，但这是一个额外的击键，我不习惯我对只为一台机器重新学习不感兴趣。

有没有人知道我该如何纠正这个问题？我正在使用 qwerty/us.map。

这是与 Escape 相关的转储密钥信息。

```
keymaps 0-2,4-6,8-9,12
keycode   1 = Escape          
        alt     keycode   1 = Meta_Escape     
        shift   alt     keycode   1 = Meta_Escape     
        control alt     keycode   1 = Meta_Escape 
```

**键盘没有坏。**

正如我在对@petesh 的（格式错误的）评论中提到的那样，我认为我需要将 Escape 设置为等于 Meta_Escape，以使转储键看起来像这样：

```
keymaps 0-2,4-6,8-9,12
keycode   1 = Escape     
        keycode   1 = Meta_Escape     
        alt     keycode   1 = Meta_Escape     
        shift   alt     keycode   1 = Meta_Escape     
        control alt     keycode   1 = Meta_Escape 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-01-05T12:40:43.313

我有类似的问题。如果您使用的是 KDE 等离子然后打开，`System Settings > Shortcuts`找到那里`Activity Manager`并删除`Esc`。`custom shortcuts`

# c++ - 在 C++ 中发送电子邮件错误

> ID：14682111
> 
> 赞同：0
> 
> 时间：2013-02-04T07:25:44.733
> 
> 标签：c++

我有一个简单的 C++ 发送电子邮件应用程序，但是当我运行它时，我有链接错误。问题是什么？另一个问题，错误是否与主机名参数有关？我将其设置为“smtp.google.com”？

```
 #include "io.h"
 #include "winsock2.h"      /* WSAGetLastError, WSAStartUp  */
 #include <iostream>
 using namespace std;
 #define snprintf _snprintf

 static void sendmail_write(
            const int  sock,
            const char *str,
            const char *arg
        ) {
 char buf[4096];

 if (arg != NULL)
    snprintf(buf, sizeof(buf), str, arg);
 else
    snprintf(buf, sizeof(buf), str);

 send(sock, buf, strlen(buf), 0);
}

static int sendmail(
            const char *from,
            const char *to,
            const char *subject,
            const char *body,
            const char *hostname,
            const int   port
        ) {

struct hostent *host;
struct sockaddr_in saddr_in;
int sock = 0;

WSADATA wsaData;
if (WSAStartup(MAKEWORD(2, 2), &wsaData) != 0) {
    return -1;
}

  sock = socket(AF_INET, SOCK_STREAM, 0);
host = gethostbyname(hostname);

saddr_in.sin_family      = AF_INET;
saddr_in.sin_port        = htons((u_short)port);
saddr_in.sin_addr.s_addr = 0;

memcpy((char*)&(saddr_in.sin_addr), host->h_addr, host->h_length);

if (connect(sock, (struct sockaddr*)&saddr_in, sizeof(saddr_in)) == -1) {
    return -2;
}

 sendmail_write(sock, "HELO %s\n",       from);    // greeting
 sendmail_write(sock, "MAIL FROM: %s\n", from);    // from
 sendmail_write(sock, "RCPT TO: %s\n",   to);      // to
 sendmail_write(sock, "DATA\n",          NULL);    // begin data

 // next comes mail headers
 sendmail_write(sock, "From: %s\n",      from);
 sendmail_write(sock, "To: %s\n",        to);
 sendmail_write(sock, "Subject: %s\n",   subject);

 sendmail_write(sock, "\n",              NULL);

 sendmail_write(sock, "%s\n",            body);    // data

 sendmail_write(sock, ".\n",             NULL);    // end data
 sendmail_write(sock, "QUIT\n",          NULL);    // terminate

 close(sock);

 return 0;
}

int main(int argc, char *argv[]) {

int ret = sendmail(
    "someone@gmail.com",  // from
    "someone@gmail.com", // to
    "Subject",
    "body",
    "smtp.google.com",
    25
);

if (ret != 0)
    cout<< "Failed to send mail (code: %i).\n";
else
    cout<<"Mail successfully sent.\n";

return ret;
} 
```

我的错误是这样的：

> 错误 LNK2019：函数“int __cdecl sendmail(char const *,char const *,char const *,char const *,char const *,int)”(?sendmail@@YAHPBD0000H@Z) 中引用了未解析的外部符号 __imp__connect@12

* * *

我尝试了“smtp.gmail.com”，现在也不例外，但它显示“邮件已成功发送”，而我在收件箱中看不到任何电子邮件。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:29:17.573

确保链接 Windows 套接字库：

```
#pragma comment(lib, "ws2_32.lib") 
```

或添加`ws2_32.lib`到项目链接设置。

请参阅[如何链接 WS2_32.lib](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/cfefa4a5-1f1a-4987-8bc7-f3197cb5826c/)

# sql-server-2008 - 如何在 SQL SERVER 中逐步执行存储过程

> ID：14682112
> 
> 赞同：0
> 
> 时间：2013-02-04T07:25:55.427
> 
> 标签：sql-server-2008

> **可能重复：**
> [调试 SQL Server 2008 中的存储过程](https://stackoverflow.com/questions/1793612/debugging-stored-procedure-in-sql-server-2008)

`SQL SERVER 2008`这有可能我们可以在像 Visual Studio .NET 代码中逐步执行存储过程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T07:30:24.833

对的，这是可能的。

1）在您的查询窗口类型`EXEC YourProcedureName 'Param1', 'Param2'`

2) 按 F11 - 连续

3) 检查“Locals”窗口并检查参数和声明变量的值

4）您可以右键单击变量，然后单击“添加观察”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:27:34.770

是的，您可以（前提是您至少拥有专业版的 Visual Studio），尽管它需要进行一些设置。完成此操作后，它与调试代码并没有太大区别。[MSDN 有一个基本的演练](http://msdn.microsoft.com/en-us/library/yet1b7by%28VS.80%29.aspx)。

**资料来源：** [调试 SQL Server 2008 中的存储过程](https://stackoverflow.com/questions/1793612/debugging-stored-procedure-in-sql-server-2008)

# r - 如何将字符串的每个元素与 R 中的单词列表进行比较？

> ID：14682115
> 
> 赞同：0
> 
> 时间：2013-02-04T07:26:05.077
> 
> 标签：r, list, merge, vectorization

比如说，我有一个字符向量

> a [1] “hi come asap, the show is awsome” “我感冒了”
> d [1] “asap” “awsome” “cold” “lol” “rofl”

如果在“a”中找到任何单词（来自“d”），我应该用空格替换。我如何在 R 中实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T07:34:51.567

也许像下面这样的东西对你有用：

```
a  <- c("hi come asap, the show is awsome", "I am suffering from cold")
d <- c("asap", "awsome", "cold", "lol", "rofl")
d[d %in% gsub("[[:punct:]]", "", unlist(strsplit(a, " ")))] <- " "
d
# [1] " "    " "    " "    "lol"  "rofl" 
```

或者，相反的方式：

```
a  <- c("hi come asap, the show is awsome", "I am suffering from cold")
d <- c("asap", "awsome", "cold", "lol", "rofl")
gsub(paste(d, collapse = "|"), " ", a)
# [1] "hi come  , the show is  " "I am suffering from  " 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T15:59:29.917

我想我理解但可能是错的。你可以试试：

```
a  <- c("hi come asap, the $#!+ show is awsome", "I am suffering from cold")
d <- c("asap", "awsome", "cold", "lol", "rofl")

library(qdap)
mgsub(d, "", a) 
```

产量：

```
> mgsub(d, "", a)
[1] "hi come , the $#!+ show is" "I am suffering from" 
```

# codeigniter - CodeIgniter：如何为跨页面的公共变量设置默认值？

> ID：14682116
> 
> 赞同：2
> 
> 时间：2013-02-04T07:26:13.537
> 
> 标签：codeigniter

我正在使用一个简单的模板系统使用 CI 构建一个网站。

这是我的基本模板：

```
$this->load->view('includes/header');
$this->load->view($main_content);
$this->load->view('includes/footer'); 
```

我有一组变量要传递给我的视图，我知道我可以这样做：

```
$data['title'] = 'title goes here';
$data['main_content'] = 'name of page goes here';
$this->load->view('template', $data); 
```

到现在为止还挺好。但是我希望上面的变量集具有默认值，因此我不必在每次加载模板时都声明整个变量集。

我想出的解决方案是在我的主控制器下声明公共静态变量，如下所示：

```
public static $default_data = array(
    'title' => 'Generic Title Goes Here',
    'main_content' => 'home_view'
); 
```

然后我可以像这样加载我的视图：

```
$data = Home::$default_data;
$data['main_content'] = 'member_login_view'; // I can now declare only the relevant variables. all the rest will have the default values
$this->load->view('includes/template', $data); 
```

这种方法工作正常，但我有一个问题：我想设置为默认值的一些变量不是静态的。例如，在标题中，我有一个统计数据行，显示我网站上的注册用户数量，以及我的数据库中的产品数量。所以我称之为

```
$data['stats'] = $this->products_model->get_stats(); 
```

有没有办法为这些变量设置默认值，所以我不必在每个页面加载之前调用模型中的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T09:07:06.943

找到了解决方案。希望这是一个好的。把它写下来，希望它可以帮助别人。

我扩展了主控制器，并把所有的公共变​​量放在那里——静态的和动态的。我将它们声明为受保护的，因此我可以在所有视图中使用它们。

这是`application/core/MY_Controller.php`：

```
class Home_Controller extends CI_Controller {

//Class-wide variable to store stats line
protected $stats;
protected $title;
protected $main_content;

public function __construct() {

    parent::__construct();

    //Put stats in Class-wide variable
    $this->stats = $this->products_model->get_stats();

    //Store stats in $data
    $data->stats = $this->stats;

    $data->title = 'Generic Website title';

    $data->main_content = 'home_view';

    //Load variables in all views
    $this->load->vars($data);

} 
```

}

我将主控制器的第一行更改为`class Home extends Home_Controller`而不是`class Home extends CI_Controller`.

# javascript - JavaScript OnClick 选择标记在移动浏览器上不起作用

> ID：14682119
> 
> 赞同：3
> 
> 时间：2013-02-04T07:26:21.923
> 
> 标签：javascript, jquery, select, onclick, onselect

我有这样的html和js（带有jquery）代码：

```
<label>Nationality</label>
<select name="user_nationality" class="input">
    <option value="1" selected onclick="$('#userphonearea').val('+62');">Indonesia</option>
    <optgroup label="Other Countries">
      <option value="2" onclick="$('#userphonearea').val('+44');">United Kingdom</option>
      <option value="3" onclick="$('#userphonearea').val('+1');">United States of America</option>
    </optgroup>
</select>

<label>Phone Number</label>
<input type="text" name="user_phone_area" id="userphonearea" maxlength="5" size="5" value="" placeholder="+" required />
<input type="text" name="user_phone_number" maxlength="30" size="10" required /> 
```

如果我选择**user_nationality**，我想自动输入**user_phone_area**。我使用了onclick，它适用于桌面浏览器。但它不适用于 android 或 iphone 等移动浏览器。

 **我尝试使用 OnSelect 更改 OnClick，但它不适用于桌面和移动设备

```
<select name="user_nationality" class="input">
    <option value="1" selected onselect="$('#userphonearea').val('+62');">Indonesia</option>
    <optgroup label="Other Countries">
      <option value="2" onselect="$('#userphonearea').val('+44');">United Kingdom</option>
      <option value="3" onselect="$('#userphonearea').val('+1');">United States of America</option>
    </optgroup>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T07:53:09.907

找到了我自己的问题的答案

```
<select name="user_nationality" id="changecountry" class="input">
<option value="1" phonecode="+62">Indonesia</option>
<optgroup label="Other Countries">
    <option value="2" phonecode="+44">United Kingdom</option>
    <option value="3" phonecode="+1">United States of America</option>
</optgroup> 
```

```
<script>
$('#changecountry').on('change', function() {
    var phonecode = $('option:selected', this).attr('phonecode');
    $('#userphonearea').val(phonecode);
});
</script> 
```**

# php - div 高度没有根据内容大小增长

> ID：14682121
> 
> 赞同：2
> 
> 时间：2013-02-04T07:26:24.407
> 
> 标签：php, css, html, styles

嗨，我有一个动态内容`$search_results`，我正在尝试将它显示在`<div>`. 但问题是高度`<div>`没有根据内容大小增加。`$search_results`是一个表格内容，如`<table><tr><td>Values</td></tr></table>`

这是代码。

```
<div  style="background:#CCC;">
<div style="height:500px;width:1000px;margin:auto;padding-top:20px;">
<div style="width:200px;float:left; background:#666;color:white;">
<form name="SearchForm" action="" method="post">
<ul class="SearchList">
<li class="firstlist">Search</li>

<li>
   <input  type="text"  class="text_medium" value="Keywords" name="KeywordsTextBox" onblur="if(this.value=='') this.value='Keywords'" onFocus="if(this.value =='Keywords' ) this.value=''" >
</li>

<li>
  <select name="SearchValues" class="select_medium">
     <option value="Search1">Search option 1</option>
     <option value="Search1">Search option 2</option>
     <option value="Search1">Search option 3</option>
     <option value="Search1">Search option 4</option>
  </select>
</li>

  <input type='submit' name='SearchButton' class='Small_Button'  value='Search'>
</li>

</ul>
</form>
</div>
<div style="width:800px;float:right; background:#C69;">
<form name="ResultForm" method="post" action="">
<?php 

//$serachObj =  new Search()

//$search_results = $serachObj->search();

echo $search_results; 
?>
</form>
</div>
</div>
</div> 
```

我已经尝试过`style="min-height:500px;"`，但它不起作用。有什么建议么 ？。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T07:31:01.977

你的孩子有**漂浮**`DIV's`物。所以，你必须清除它的父母。定义**溢出：隐藏**到父 DIV。例如这样写：

```
<div style="overflow:hidden;min-height:500;width:1000px;margin:auto;padding-top:20px;">
 <div style="float:left"></div>
 <div style="float:left"></div>
</div> 
```

**更新**

```
<div style="min-height:500;width:1000px;margin:auto;padding-top:20px;">
     <div style="float:left"></div>
     <div style="float:left"></div>
     <div style="clear:both"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:30:19.437

添加`overflow:auto`到父 div

**[演示](http://jsfiddle.net/b9kVC/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T07:37:09.603

将 div 高度设为自动。

```
height:auto; 
```

# r - 如何在 R 中使用地图？

> ID：14682123
> 
> 赞同：3
> 
> 时间：2013-02-04T07:26:27.323
> 
> 标签：r, map

我正在研究需要存储键值对的地图数据结构。

```
 map[key1]<-value1
 map[key2]<-value2
 map[key3]<-value3
 map[key4]<-value4 
```

我需要根据键获得价值。我如何在 R 中实现这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T07:54:50.747

使用列表，因为用 构造的简单向量`c`只能处理标量值：

```
> map = c(key1 = c(1,2,3), key2 = 2, key3 = 3)
> map[["key1"]]
Error in map[["key1"]] : subscript out of bounds 
```

为什么会失败？因为`map`现在是：

```
> map
key11 key12 key13  key2  key3 
    1     2     3     2     3 
```

改用 a `list`：

```
> map = list(key1 = c(1,2,3), key2 = 2, key3 = 3)
> map[["key1"]]
[1] 1 2 3 
```

也可以动态扩展：

```
> map[["key99"]]="Hello You!"
> map
$key1
[1] 1 2 3

$key2
[1] 2

$key3
[1] 3

$key99
[1] "Hello You!" 
```

`map=list()`如果你正在建立一个空的，从一个空的开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:30:00.887

您可以使用命名向量：

```
map = c(key1 = 1, key2 = 2, key3 = 3)
map[["key1"]] 
```

您可以轻松添加新的：

```
map[["key4"]] = 4
> map
key1 key2 key3 key4 
   1    2    3    4 
```

# javascript - AngularJS：特定部分的 $scope.flags.loading

> ID：14682124
> 
> 赞同：0
> 
> 时间：2013-02-04T07:26:34.700
> 
> 标签：javascript, angularjs, angularjs-directive

我正在尝试在进行 AJAX 调用或某些事件时为页面的特定部分添加加载图标（**注意：整个页面不应该有这个）。**我尝试编写一个指令并使该范围的 flags.loading = true。但这没有用。有任何想法吗？

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:16:54.233

在这里，您有将父作用域的变量`loading`从 value`no`更改为`yes`.

```
var app = angular.module('app', []);

app.directive('loadingDirective', function() {

    var linkFn = function(scope, element, attrs) {         
        scope.loading="yes";        
    };

    return {
        link: linkFn
    }

});

app.controller('TestController', function ($scope) {
    $scope.loading = "no";    
}); 
```

在这里，您还可以[使用 JSfiddle](http://jsfiddle.net/FDKVC/2/)。

# php - 将数组内的数组值存储到 PHP 变量中

> ID：14682128
> 
> 赞同：0
> 
> 时间：2013-02-04T07:26:41.973
> 
> 标签：php, multidimensional-array, xml-parsing

我正在使用 XML 解析器将 xml 提要数据存储到 mysql 表中，如果我将 XML 文件结果作为数组获取，则结果如下所示。如何将每个值存储到变量中。

不仅仅是这种类型的数组，如果我们使用不同的 XML 文件或 URL，它的结果可能不是多维数组。

如何将数组值存储在php变量中

```
 <?php
function objectsIntoArray($arrObjData, $arrSkipIndices = array())
{
    $arrData = array();

    // if input is object, convert into array
    if (is_object($arrObjData)) {
        $arrObjData = get_object_vars($arrObjData);
    }

    if (is_array($arrObjData)) {
        foreach ($arrObjData as $index => $value) {
            if (is_object($value) || is_array($value)) {
                $value = objectsIntoArray($value, $arrSkipIndices); // recursive call
            }
            if (in_array($index, $arrSkipIndices)) {
                continue;
            }
            $arrData[$index] = $value;
        }
    }
    return $arrData;
}

$xmlUrl = "testxmel.xml"; // XML feed file/URL
$xmlStr = file_get_contents($xmlUrl);
$xmlObj = simplexml_load_string($xmlStr);
$arrXml = objectsIntoArray($xmlObj); 
```

**测试xmel.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<everyone>
  <guest>
    <name>Joseph Needham</name>
    <age>53</age>
  </guest>
  <guest>
    <name>Lu Gwei-djen</name>
    <age>31</age>
  </guest>
</everyone> 
```

任何人都可以帮我解决这个 XML 解析器结果问题。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T07:37:35.187

```
// let's assume $myArray is your array

$guest = count( $myArray ); // no. of guests

foreach( $myArray as $guests ) {
   $name = $guests[ 'name' ];
   $age = $guests[ 'age' ];

   // work with this data here...
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:44:03.927

[使用pdo](http://docs.php.net/pdo)的独立示例

```
<?php
$pdo = new PDO('mysql:host=localhost;dbname=test;charset=utf8', 'localonly', 'localonly');
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
setup($pdo);

$stmt = $pdo->prepare('INSERT INTO soFoo (name, age) VALUES (:name, :age)');
$stmt->bindParam('name', $name);
$stmt->bindParam('age', $age);

$data = data();
// number of elements in $data['guest']
echo count($data['guest']), " new entries<br />\n";

// add data to mysql database
// iterate over elements in  $data['guest']
foreach( $data['guest'] as $row ) {
    // assign "values" to the previously bound parameters
    $name = $row['name'];
    $age = $row['age'];
    // execute preapred statement
    $stmt->execute();
}
$stmt = null;

// retrieve data: only count
// if you only want count the records do not transfer the data from the mysql server to your php process - use Count(*) instead
$row = $pdo->query('SELECT Count(*) from soFoo')->fetch();
echo $row[0], " entries in database<br />\n";

// retrieve data: actual data
$stmt = $pdo->query('SELECT name, age from soFoo', PDO::FETCH_ASSOC);
foreach( $stmt as $row ) {
    echo $row['name'], ' ', $row['age'], "<br />\n";
}
// stmt->rowCount() after a SELECT statement doesn't work with all pdo drivers, but for PDO_MySQL it does
echo $stmt->rowCount(), ' records fetched';

// boilerplate: create temporary database structure ...
function setup($pdo) {
    $pdo->exec('
        CREATE TEMPORARY TABLE soFoo (
            id int auto_increment,
            name varchar(32),
            age int,
            primary key(id)
        )
    ');
}

// boilerplate: a function returning example data to work on...
function data() {
    return array (
        'guest' => array (
            array (
                'name' => 'Joseph Needham',
                'age' => 53
            ),
            array (
                'name' => 'Lu Gwei-djen',
                'age' => 31
            )
        )
    );
} 
```

* * *

编辑：给定您的 xml，您可以执行类似的操作

```
<?php
$pdo = new PDO('mysql:host=localhost;dbname=test;charset=utf8', 'localonly', 'localonly');
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
setup($pdo);

$stmt = $pdo->prepare('INSERT INTO soFoo (name, age) VALUES (:name, :age)');
$stmt->bindParam('name', $name);
$stmt->bindParam('age', $age);

// insert data
$data = data();
echo count($data->guest), " new entries<br />\n";
foreach( $data->guest as $guest ) {
    $name = (string)$guest->name;
    $age = (string)$guest->age;
    $stmt->execute();
}
$stmt = null;

// retrieve data: only count
$row = $pdo->query('SELECT Count(*) from soFoo')->fetch();
echo $row[0], " entries in database<br />\n";

// retrieve data: actual data
$stmt = $pdo->query('SELECT name, age from soFoo', PDO::FETCH_ASSOC);
foreach( $stmt as $row ) {
    echo $row['name'], ' ', $row['age'], "<br />\n";
}
echo $stmt->rowCount(), ' records fetched';

function setup($pdo) {
    $pdo->exec('
        CREATE TEMPORARY TABLE soFoo (
            id int auto_increment,
            name varchar(32),
            age int,
            primary key(id)
        )
    ');
}

function data() {
    // return simplexml_load_file('...');
    return new SimpleXMLElement( <<< eox
<?xml version="1.0" encoding="utf-8"?>
<everyone>
  <guest>
    <name>Joseph Needham</name>
    <age>53</age>
  </guest>
  <guest>
    <name>Lu Gwei-djen</name>
    <age>31</age>
  </guest>
</everyone>
eox
    );
} 
```

输出是一样的。
但请记住 simplxml_load_file() 将整个 DOM 保存在内存中。如果您的数据源变得很大，这可能会成为问题，您最好切换到[XMLReadery](http://docs.php.net/xmlreader)，

# c# - 已安装程序列表未显示我的程序 C#

> ID：14682129
> 
> 赞同：3
> 
> 时间：2013-02-04T07:26:44.817
> 
> 标签：c#, batch-file, uninstallation, program-files

[我使用这篇文章来获取](https://stackoverflow.com/questions/908850/get-installed-applications-in-a-system)我在 C# 中安装的程序的列表

我在我的计算机上通过 Click once 安装了一个应用程序，现在想在用户不知情的情况下卸载。（静默）

但是我的程序没有出现在我生成的列表中。（虽然它在控制面板下的添加和删除程序菜单中）

我什至尝试过[这篇文章](http://community.spiceworks.com/how_to/show/1142-obtain-an-uninstall-string-for-any-application)和 [这篇文章](http://blog.fryhard.com/archive/2010/06/25/clickonce-uninstall-string.aspx)，看看我是否可以在注册表中找到它，也许可以使用批处理脚本来卸载它，但没有找到它。

如何使用 c# 代码找到未显示的应用程序以生成安装在我的计算机上的程序列表以将其卸载？

编辑 - 结果

我不知道这是否可能是发生这种情况的原因，但是通过使用第一个链接中的代码，我将结果输出到文本框，我得到了这个，（注意空格，也许这就是为什么？）

我有的代码：

```
textBox1.Text += subkey.GetValue("DisplayName") + "\r\n"; 
```

我得到的结果

> Windows 驱动程序包 - 联想 (ACPIVPC) 系统 (12/15/2011 7.1.0.1)
> 
> ```
> HP LaserJet Professional M1130-M1210 MFP Series
> 
> Microsoft SQL Server 2008 R2 (64-bit)
> Microsoft SQL Server 2008 R2 (64-bit)
> Microsoft Visual J# 2.0 Redistributable Package - SE (x64)
> Microsoft Visual Studio 2008 Remote Debugger - ENU
> Microsoft Visual Studio 2010 Tools for Office Runtime (x64)
> 
> Intel PROSet Wireless
> 
> Synaptics Pointing Device Driver
> 
> Exception Hunter 2 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:55:44.970

您还应该检查`HKLM\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall`64 位系统，因为应用程序也可以将其安装信息放在那里，并且它不是执行任何同步或重定向的注册表路径。

# visual-studio-2010 - 将 BeforeBuild 中生成的文件包含到编译列表中

> ID：14682130
> 
> 赞同：0
> 
> 时间：2013-02-04T07:26:47.820
> 
> 标签：visual-studio-2010, msbuild

以下是我的 MSBuild XML。BeforeBuild 中生成的文件不包含在 DLL 中。我期待该文件包含在内。我确实注意到在 BeforeBuild 中调用了 CoreBuild。如何再次进行重建，包括生成的文件。

谢谢

克里斯

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="Build">
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    ...
    <FileAlignment>512</FileAlignment>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <DebugSymbols>true</DebugSymbols>
    ...
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <DebugType>pdbonly</DebugType>
    ...
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <ItemGroup>
    <Reference Include=".\Resources\Assembly\*.dll" Condition="Exists('.\Resources\Assembly')" />
    ...
    <Reference Include="System.Xml.Linq" />
  </ItemGroup>
  <ItemGroup>
    <Compile Include=".\**\*.cs" />
  </ItemGroup>
  <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
  <UsingTask TaskName="EdmTasks.ViewRefreshTask" AssemblyFile=".\Resources\Assembly\EdmTasks.dll" />
  <Target Name="BeforeBuild">
    <MsBuild Projects="ForwardPAS.csproj" Targets="CoreBuild" />
    <ViewRefreshTask Assembly="$(TargetPath)" Lang="cs" DbContext="FranklinIndexedAnnuityDb" />
  </Target>
</Project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:36:40.147

```
<Target Name="BeforeBuild">
    <MsBuild Projects="MyProject.csproj" Targets="CoreBuild" />
    <ViewRefreshTask Assembly="$(TargetPath)" Lang="cs" DbContext="MyDatabaseContext" />
    <MsBuild Projects="MyProject.csproj" Targets="CoreBuild" Properties="Rerun=true" />
</Target> 
```

1.  在构建期间采取的步骤是：构建之前 b. 构建（包括 CoreBuild） c. 构建后
2.  由于我们需要在 MyProject.DLL 中构建 MyDatabase.Views.cs，因此我们必须在到达 Build (b) 之前生成它……所以我们将它放在 BeforeBuild (a) 中
3.  但是 ViewRefreskTask（生成这个文件）需要 MyProject.DLL 作为输入……所以在 ViewRefreskTask 之前我们调用“CoreBuild”（构建 MyProject.dll）
4.  我最初假设当 BeforeBuild 完成时，它将继续构建和重建项目（因为有一个新文件是 Compile ItemGroup）……但它没有……它只是给出了一条消息“目标“CoreBuild”已跳过。之前构建成功。”</li>
5.  所以我添加了一个新任务……这仍然让我跳过了“目标“CoreBuild”。之前构建成功。”</li>
6.  最后，感谢[http://social.msdn.microsoft.com/forums/en-US/msbuild/thread/8db6b9e4-16dd-48b2-b243-c6e4c9670982/](http://social.msdn.microsoft.com/forums/en-US/msbuild/thread/8db6b9e4-16dd-48b2-b243-c6e4c9670982/)我添加了 Properties="Rerun=true" 并且它起作用了。

它进行了重建，项目 DLL 具有我生成的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T10:00:57.410

直接在 csharp 目标行之后

```
<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" /> 
```

添加这个

```
<PropertyGroup>
  <UseHostCompilerIfAvailable>False</UseHostCompilerIfAvailable>
</PropertyGroup> 
```

VS 将再次抓取源代码进行编译，而不是使用构建过程开始时的缓存版本。

# html - 在电子邮件中重新定位的图像

> ID：14682137
> 
> 赞同：0
> 
> 时间：2013-02-04T07:27:18.603
> 
> 标签：html, jsp

我正在尝试使用 JSP 发送邮件。我能够发送 html 文件，并且图像也显示在电子邮件中，但图像的对齐方式不正确。（即从理想位置重新定位的图像）。我正在尝试编辑css，但没有运气。

谢谢 。

```
package mail;

 public class Emailer {

private static final String staticAbove = "<html><head>"
        + "<meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\">"
        + "<title>Insert title here</title>"
        + "</head><body>"
        + "<div class=\"background\" style=\"background-color: #d6d6d6; width: 510px; height: 980px; margin-left: 725px;\">"
        + "<font color=\"#868384\" size=\"2\" style=\"margin-left: 100px;\"><br>"
        + "If you are unable to see images <u><a href = \"emailer.html\">click here for HTML version</a></u>"
        + "</font>"
        + "<div class=\"foreground\" style=\"z-index: 5;\">"
        + "<div style=\"position: relative; left: 0; top: 0;\">"
        +           + "</div></div>"
        + "<div class=\"whiteAboveGray\" style=\"background-color: white; margin-right: 15px; margin-left: 15px; margin-bottom: 15px; height: 650px; margin-top: -54px;\">"
        + "<div class=\"content\">"
        + "<h1> <font color=\"388293\" size=\"4\" face=\"TImes New Roman\" style=\"margin-top: 8px; margin-right: 8px; margin-bottom: 8px; margin-left: 8px;\">Dear Customer ,</font>"
        + "</h1>"
        + "<hr class=\"hr\" style=\"background-color: silver;\">"
        + "<font color=\"928888\">"
        + "<p align=\"justify\" style=\"margin-top: 8px; margin-right: 8px; margin-bottom: 8px; margin-left: 8px;\">"
                    + "</p>"
        + "<p align=\"justify\" style=\"margin-top: 8px; margin-right: 8px; margin-bottom: 8px; margin-left: 8px;\">"

        + "<p align=\"justify\" style=\"margin-top: 8px; margin-right: 8px; margin-bottom: 8px; margin-left: 8px;\">"
        + "</font>";
;

private static final String dynamicContent = "<div class=\"dyanamicContent\">"

        + 
```

以上是html代码。有 3 个字符串。我在这里使用这些字符串..

```
 package mail;

  import java.util.List;
  import java.util.Properties;

   import javax.mail.Message;
   import javax.mail.MessagingException;
   import javax.mail.PasswordAuthentication;
   import javax.mail.Session;
   import javax.mail.Transport;
   import javax.mail.internet.InternetAddress;
   import javax.mail.internet.MimeMessage;

   import com.sun.mail.handlers.message_rfc822; 
```

公共类 MailUtility {

```
private static final String STATUS_ARCHIVE = "archive";

private CoverLetter coverLetter;
List<MailPropertiesInfo> successfullPropertiesList;

private static final String EMAIL_ID = "";
private static final String PASSWORD = "";

public void sendSuccessMail(List<MailPropertiesInfo> successfullPropertiesList, String sendToEmailId, String propertyId)
{
    Message message = initializeMailSetting(sendToEmailId);
    coverLetter = new CoverLetter();
    String messageForUSerHavingProperties = CoverLetter.getMessageforuserhavingproperties();
    StringBuilder content = getContent(successfullPropertiesList);

    try 
    {
        message.setSubject("");
        message.setContent(messageForUSerHavingProperties
                +"<b><u>Your Property ID is:  </b>"
                + propertyId+"</u>\n\n"+content,
                "text/html");

        Transport.send(message);
    //out.println("<b>Done</b>");
    } 
    catch(MessagingException me) {
        me.printStackTrace();
    }
}

private StringBuilder getContent(
        List<MailPropertiesInfo> successfullPropertiesList) {

    StringBuilder content = new StringBuilder();
    int count = 0;

    for(MailPropertiesInfo mailProp : successfullPropertiesList)
    {
        content.append(mailProp.toString());
        content.append("\n\n");
        count++;
        if(count == 5) 
        {
            break;
        }
    }   

    return content;
}

public void sendNoPropertiesMail(String sendToEmailId, String propertyId) 
{

    Message message = initializeMailSetting(sendToEmailId);

    coverLetter = new CoverLetter();
    String messageForUserNotHavingProperties = CoverLetter.getMessageforusernothavingproperties();
    try 
    {
        message.setSubject("Property Suggestion From DoMyDeal");
        message.setContent(Emailer.getStaticabove()+Emailer.getDynamiccontent()+Emailer.getStaticbelow() 
                +"<b><u>Your Property ID is: </b>"
                +propertyId,
                "text/html");
        Transport.send(message);
    } 
    catch(MessagingException me) {
        me.printStackTrace();
    }
}

private Message initializeMailSetting(String sendToEmailId) {
    Properties props = new Properties();
    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.smtp.socketFactory.port", "465");
    props.put("mail.smtp.socketFactory.class","javax.net.ssl.SSLSocketFactory");
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.port", "465");

    Session session123 = Session.getInstance(props,
        new javax.mail.Authenticator() {
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication(EMAIL_ID,PASSWORD);
            }
        });

    Message message = null ;

    try
    {
        message = new MimeMessage(session123);
        message.setFrom(new InternetAddress("domydealportal@gmail.com"));
        message.setRecipients(Message.RecipientType.TO,
        InternetAddress.parse(sendToEmailId));              

    }
    catch (MessagingException e)
    {
            e.printStackTrace();
    }

    return message;
}

public CoverLetter getCoverLetter() {
    return coverLetter;
}

public void setCoverLetter(CoverLetter coverLetter) {
    this.coverLetter = coverLetter;
}

public List<MailPropertiesInfo> getSuccessfullPropertiesList() {
    return successfullPropertiesList;
}

public void setSuccessfullPropertiesList(
        List<MailPropertiesInfo> successfullPropertiesList) {
    this.successfullPropertiesList = successfullPropertiesList;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:38:03.143

所以我的建议是，不要使用`div`s，只使用表格进行电子邮件设计。或者使用预先测试的电子邮件模板，例如来自[http://mailchimp.com/resources/html-email-templates/的模板](http://mailchimp.com/resources/html-email-templates/)

# c# - 我是否需要序列化一个对象来存储它，或者不需要序列化它可以使用 WP 7.1 SDK 存储在 C#.Net 中？

> ID：14682139
> 
> 赞同：0
> 
> 时间：2013-02-04T07:27:22.907
> 
> 标签：c#, windows-phone-7

我想在 WP7.1 应用程序中存储自`isolatedstoragesettings`定义**对象**。如果我对它进行硬编码，我的程序运行良好。但是如果没有硬编码，它会在类的 Save() 方法上给出异常`isolatedstoragesettings` 。

例外是：

> 无法序列化类型“PhoneApp4.Classes.Objects.Person”。考虑使用 DataContractAttribute 属性对其进行标记，并使用 DataMemberAttribute 属性标记您想要序列化的所有成员。

请提供一些示例代码或建议开始，因为我是 Windows Phone 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:34:56.260

是的，您应该使其可序列化。查看这篇文章： http: [//www.codeproject.com/Articles/268151/XML-Serialization-in-Windows-Phone-7-Tips-and-Tric](http://www.codeproject.com/Articles/268151/XML-Serialization-in-Windows-Phone-7-Tips-and-Tric)

# c++ - c++中使用异步的后台定时器

> ID：14682142
> 
> 赞同：2
> 
> 时间：2013-02-04T07:27:28.727
> 
> 标签：c++, asynchronous, atomic

我想在我做其他事情时在我的程序后台运行一个计时器。

我的程序看起来像：

```
void timer(int number)
{
    std::this_thread::sleep_for(std::chrono::seconds(number));
    std::cout << "executing someFunction()";
}

int function1()
{
    int number = 3;
    auto future = std::async(timer, number)

    int choice;
    std::cout << "please enter a number: ";
    std::cin >> choice;
    while (choice != 0)
    {
        std::cout << choice << std::endl;
        std::cout << "please enter a number: ";
        std::cin >> choice;
    }
    return 1;
}

int main()
{
    int num_rows = function1();
} 
```

标题是：

```
#include <iostream>
#include <chrono>
#include <future> 
```

问题是，在使用异步调用函数“计时器”后，它不会停止，这也会导致函数 1 被卡住。

我知道没有选项可以取消线程（还），为此我必须将“原子变量”标志传递给异步任务。有人可以给我举个例子吗？

其他来源：
[c++ 后台计时器（stackoverflow）](https://stackoverflow.com/questions/9777638/c-background-timer)
[有没有办法在 c++11 中取消/分离未来？（堆栈溢出）](https://stackoverflow.com/questions/12086622/is-there-a-way-to-cancel-detach-a-future-in-c11)

# html - BMobilize 对网站进行移动优化？

> ID：14682146
> 
> 赞同：0
> 
> 时间：2013-02-04T07:28:21.763
> 
> 标签：html, css, mobile

有人说，移动设备网站 SEO 的一个重要因素是该网站必须针对移动显示进行优化。选择 BMo​​bilized 服务是否是一个好的解决方案？它将您的网站转换为移动版本并将其存储在他们的服务器上。如果用户正在使用移动设备查看，我只需将我的网站重定向到此 URL。

优缺点都有什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:49:27.037

明显的优点和缺点

临：

*   没有开发时间
*   简单的

缺点：

*   价格（他们提供的东西很容易自己实现）
*   可定制性
*   质量

我没有特别使用 BMobilized 的经验。

# java-me - 用IMEI拨打另一部电话？

> ID：14682148
> 
> 赞同：-1
> 
> 时间：2013-02-04T07:28:26.060
> 
> 标签：java-me

我想通过 j2me 制作一个应用程序，通过它的 IMEI 呼叫另一部手机

这可能吗？

如果可能的话，我想要一些指导方针。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T08:35:41.743

我非常怀疑这在 J2ME 电话或任何其他移动平台上是否可行。

IMEI 号码是手机的唯一*序列*号。移动运营商知道哪些 IMEI 号码与哪些电话号码对应（尽管这种映射可能会改变，例如通过交换 SIM 卡）。但是，他们不会（至少在我居住的美国）给出 IMEI 和电话号码之间的映射。那将是对隐私的侵犯。

因此，您无法查找电话号码，因此无法拨打电话。

[有关此主题的更多讨论，请参见此处](http://community.flexispy.com/index.php?/topic/486-can-i-find-a-mobile-number-by-searching-the-imei/)

[……这里也是](http://www.cnet.com/8301-17918_1-20020198-85.html)

我还假设您没有在一个没有重要隐私权的国家与警察和移动运营商一起构建应用程序。如果你是，那么也许这是可能的。其他任何地方……不。

# java - JMX 客户端 Eclipse 问题

> ID：14682151
> 
> 赞同：0
> 
> 时间：2013-02-04T07:28:30.757
> 
> 标签：java, jmx

我正在尝试创建 JMX 客户端应用程序。

我使用以下命令运行我的 JMX 应用程序：

```
java -cp . -Dcom.sun.management.jmxremote.port=1234 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false MyJMXClass 
```

现在，当我从终端运行客户端应用程序时，它工作正常。

```
java -cp . MyJMXClient 
```

但是当我从 Eclipse 运行相同的程序时，我得到了以下异常。

```
Error: Exception thrown by the agent : java.rmi.server.ExportException: Port already in use: 1234; nested exception is: 
    java.net.BindException: Address already in use 
```

我很困惑为什么它在终端上可以正常工作，但在 Eclipse 中却不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:35:14.550

我刚刚遇到了这个问题，我之前在 Eclipse 中为 JMX 端口保存了运行配置，这就是它抛出这个异常的原因，一旦删除它就可以正常工作。

# kerberos - Kerberos 门票的生命周期

> ID：14682153
> 
> 赞同：34
> 
> 时间：2013-02-04T07:28:37.797
> 
> 标签：kerberos

我已经开始配置 kerberos。

谁能解释我们在 krb5.conf 文件中设置的票证生命周期和更新生命周期。

```
ticket_lifetime = 2d  
renew_lifetime = 7d 
```

是不是像

1.  2 天后客户会收到新的续订票吗？
2.  7 天后，我是否需要再次创建密钥选项卡并发送到客户端计算机？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-03-17T03:38:26.957

Kerberos 票证有两个生命周期：票证生命周期和可更新生命周期。票证有效期结束后，票证将无法再使用。但是，如果可更新的生命周期长于票证的生命周期，则持有票证的任何人都可以在*任*一生命周期到期之前的任何时间向 KDC 出示票证并请求新票证。该新票证通常具有从当前时间开始的新票证生命周期，尽管受到可更新票证生命周期的限制。

这意味着您必须在票证到期之前更新票证。票过期后不能续订。但是更新票证不需要重新输入凭据，例如密码或密钥表中的密钥。因此，它可以由程序以用户的名义悄悄地完成。（例如，一些用于 Windows、Linux 和 Mac OS X 的系统后台实用程序可以监视用户的 Kerberos 票证并根据需要将其更新到可更新的生命周期。）

在可更新的生命周期结束后，或者如果在票证生命周期到期之前没有更新票证，您必须重新输入凭据或使用密钥表中的密钥。

安全方面，可更新票证相对于仅具有较长生命周期的票证的优势在于 KDC 可以拒绝更新请求（例如，如果发现帐户被盗用并且可更新票证可能在手中攻击者）。

可再生生命周期与 keytab 没有任何关系。在您更改主体的密钥之前，密钥表是好的，可能永远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T05:57:48.073

其中有两个部分是票证最大寿命，默认情况下为 1 天，如 /etc/krb5.conf 文件中的 det。现在，当我们创建任何主体时，它的票证 maxlife 与 krb5.conf 票证_lifetime 的票证相同。如果我们可以更改用户的票证生命周期，则使用命令 modprinc -maxlife "10 hrs" username。

最后，在生成票证时，我们可以设置票证的生命周期。用 kinit 赋予票证生命。

所以有三生。

*   kerberos 票证寿命
*   主体最大票证生命周期将小于或等于 kerberos 生命周期。
*   kinit 生命周期小于或等于主票证生命周期。

# android - 当我在 android 中使用 ADB 时，如何获取恢复出厂设置的日期？

> ID：14682156
> 
> 赞同：1
> 
> 时间：2013-02-04T07:28:46.127
> 
> 标签：android, android-intent

我正在寻找为附加的 android 设备恢复出厂设置的日期。实际上我必须使用 ADB 命令从我的 java 代码中检查它。如果可能的话，我怎样才能得到它？

先感谢您！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T07:47:20.563

此信息非常特定于供应商，通常不应该提供。

在出厂重置（也称为主清除、主重置、硬重置）期间，设备上的所有内容都将重置为原始出厂状态，这样就不会保留以前设备用户的任何文件或设置。

这样做的目的是让您可以在硬重置后出售您的设备，而不必担心新所有者可以使用您的任何设置或图片。或者，您可能希望将设备退回制造商，但请确保您的任何个人数据都不会泄露。

显然，考虑到这一点，应该清楚的是所有设备用户分区​​都将被重新格式化，通常带有安全擦除选项（通常在 eMMC 设备上可用）。

获得最后一次硬重置时间的唯一希望是，如果供应商实现的硬重置例程在硬重置时将此时间戳存储在配置分区中的某个位置。但是，我认为实际上并没有多少供应商（如果有的话）愿意这样做。

# android - 从android中的资产读取epub文件时出现NullPointer异常

> ID：14682157
> 
> 赞同：3
> 
> 时间：2013-02-04T07:28:59.157
> 
> 标签：android, epub

我正在从 assets 文件夹中访问 epub 文件以读取 epub内容。我一步一步地跟随[siegmann 。](http://www.siegmann.nl/epublib/android)它在抛出 nulpointer 异常

```
 Book book = (new EpubReader()).readEpub(epubInputStream); 
```

我的代码片段是

```
public class MainActivity extends Activity {
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    AssetManager assetManager = getAssets();
    System.err.println("assetManager>>"+assetManager);
    try {
      // find InputStream for book
      InputStream epubInputStream = assetManager.open("ww.epub");

      // Load Book from inputStream
      Book book = (new EpubReader()).readEpub(epubInputStream);

      // Log the book's authors
      Log.i("epublib", "author(s): " + book.getMetadata().getAuthors());

      // Log the book's title
      Log.i("epublib", "title: " + book.getTitle());

      // Log the book's coverimage property
      Bitmap coverImage = BitmapFactory.decodeStream(book.getCoverImage().getInputStream());
     Log.i("epublib", "Coverimage is " + coverImage.getWidth() + " by " + coverImage.getHeight() + " pixels");

      // Log the tale of contents
      logTableOfContents(book.getTableOfContents().getTocReferences(), 0);
    } catch (IOException e) {
      Log.e("epublib", e.getMessage());
    }
  }

private void logTableOfContents(List<TOCReference> tocReferences, int depth) {
    if (tocReferences == null) {
      return;
    }
    for (TOCReference tocReference : tocReferences) {
      StringBuilder tocString = new StringBuilder();
      for (int i = 0; i < depth; i++) {
        tocString.append("\t");
      }
      tocString.append(tocReference.getTitle());
      Log.i("epublib", tocString.toString());

      logTableOfContents(tocReference.getChildren(), depth + 1);
    }
  }
 } 
```

`ww.epub`是我简单地保存在资产文件夹中的文件。谁能告诉我如何解决这个空指针异常？

Logcat 显示

```
02-04 13:22:57.189: W/System.err(22968): 1915 [main] ERROR nl.siegmann.epublib.epub.NCXDocument - null
02-04 13:22:57.189: W/System.err(22968): java.lang.NullPointerException
02-04 13:22:57.189: W/System.err(22968):    at nl.siegmann.epublib.epub.NCXDocument.read(NCXDocument.java:92)
02-04 13:22:57.189: W/System.err(22968):    at nl.siegmann.epublib.epub.EpubReader.processNcxResource(EpubReader.java:113)
02-04 13:22:57.189: W/System.err(22968):    at nl.siegmann.epublib.epub.EpubReader.readEpub(EpubReader.java:99)
02-04 13:22:57.189: W/System.err(22968):    at nl.siegmann.epublib.epub.EpubReader.readEpub(EpubReader.java:53)
02-04 13:22:57.189: W/System.err(22968):    at nl.siegmann.epublib.epub.EpubReader.readEpub(EpubReader.java:37)
02-04 13:22:57.189: W/System.err(22968):    at com.example.epub.MainActivity.onCreate(MainActivity.java:36)
02-04 13:22:57.189: W/System.err(22968):    at android.app.Activity.performCreate(Activity.java:5104)
02-04 13:22:57.189: W/System.err(22968):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-04 13:22:57.189: W/System.err(22968):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-04 13:22:57.189: W/System.err(22968):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-04 13:22:57.189: W/System.err(22968):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-04 13:22:57.189: W/System.err(22968):    at  android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-04 13:22:57.189: W/System.err(22968):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-04 13:22:57.189: W/System.err(22968):    at android.os.Looper.loop(Looper.java:137)
02-04 13:22:57.189: W/System.err(22968):    at android.app.ActivityThread.main(ActivityThread.java:5039)
02-04 13:22:57.189: W/System.err(22968):    at java.lang.reflect.Method.invokeNative(Native Method)
02-04 13:22:57.189: W/System.err(22968):    at java.lang.reflect.Method.invoke(Method.java:511)
02-04 13:22:57.189: W/System.err(22968):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-04 13:22:57.189: W/System.err(22968):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-04 13:22:57.189: W/System.err(22968):    at dalvik.system.NativeStart.main(Native Method)
02-04 13:22:57.189: I/epublib(22968): author(s): [Melville, Herman]
02-04 13:22:57.189: I/epublib(22968): title: Moby-Dick
02-04 13:22:57.189: D/AndroidRuntime(22968): Shutting down VM
02-04 13:22:57.189: W/dalvikvm(22968): threadid=1: thread exiting with uncaught exception (group=0x41e99930)
02-04 13:22:57.189: E/AndroidRuntime(22968): FATAL EXCEPTION: main
02-04 13:22:57.189: E/AndroidRuntime(22968): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.epub/com.example.epub.MainActivity}: java.lang.NullPointerException
02-04 13:22:57.189: E/AndroidRuntime(22968):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-04 13:22:57.189: E/AndroidRuntime(22968):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-04 13:22:57.189: E/AndroidRuntime(22968):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-04 13:22:57.189: E/AndroidRuntime(22968):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-04 13:22:57.189: E/AndroidRuntime(22968):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-04 13:22:57.189: E/AndroidRuntime(22968):    at android.os.Looper.loop(Looper.java:137)
02-04 13:22:57.189: E/AndroidRuntime(22968):    at android.app.ActivityThread.main(ActivityThread.java:5039)
02-04 13:22:57.189: E/AndroidRuntime(22968):    at java.lang.reflect.Method.invokeNative(Native Method)
02-04 13:22:57.189: E/AndroidRuntime(22968):    at java.lang.reflect.Method.invoke(Method.java:511)
02-04 13:22:57.189: E/AndroidRuntime(22968):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-04 13:22:57.189: E/AndroidRuntime(22968):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-04 13:22:57.189: E/AndroidRuntime(22968):    at dalvik.system.NativeStart.main(Native Method)
02-04 13:22:57.189: E/AndroidRuntime(22968): Caused by: java.lang.NullPointerException
02-04 13:22:57.189: E/AndroidRuntime(22968):    at com.example.epub.MainActivity.onCreate(MainActivity.java:45)
02-04 13:22:57.189: E/AndroidRuntime(22968):    at android.app.Activity.performCreate(Activity.java:5104)
02-04 13:22:57.189: E/AndroidRuntime(22968):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-04 13:22:57.189: E/AndroidRuntime(22968):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-04 13:22:57.189: E/AndroidRuntime(22968):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T06:07:25.663

空指针异常基本上是由于部分加载了 sl4j 和 epublib 等类。为此，您必须将 slf4-api 和 slf4-simple 等 slf4-android 的依赖项导入 libs 文件夹并将其放入构建路径。

# ruby - 虽然通过 crontab 邮件调用不是来自 ruby

> ID：14682162
> 
> 赞同：0
> 
> 时间：2013-02-04T07:29:25.303
> 
> 标签：ruby, shell, crontab, postfix-mta

我正在尝试通过 crontab 调用 shell 脚本。从 shellscript 我正在调用一个运行 ruby​​ 代码的命令。

~/process.sh

```
 ruby ~/program.rb 
```

在 ruby​​ 代码中，我正在检查一个进程是否正在运行，如果没有尝试发送邮件。

```
result = `ps aux | grep unicorn`
unless result.match(/unicorn_rails master -c config\/unicorn\/unicorn_development.rb -E   development -D/)
   `echo "Stopped" | mail -s "a subject" someone@somedomain.com`
end 
```

当我尝试从终端运行 shell 脚本时，它正在完美地发送邮件。但是从 crontab 呼叫正在发生，但邮件没有发送。

在 crontab 里面我调用 shell 脚本，比如

```
00 */1    * * *   ~/process.sh 
```

请帮我找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:22:21.317

运行程序前尝试进入指定目录：

```
cd /path/to/directory && ./process.sh 
```

# .net - 如何将 IE 浏览器之间的数据传递给 Dot NET Web 浏览器控件

> ID：14682166
> 
> 赞同：0
> 
> 时间：2013-02-04T07:29:41.253
> 
> 标签：.net, internet-explorer, browser, webbrowser-control

我已经从 DOT NET Web 浏览器控件中打开了 IE 浏览器。但我无法在两者之间传输数据。谁能告诉如何将 IE 浏览器控件之间的数据传递给 DOT NET Web 浏览器控件，反之亦然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:49:02.260

如何从 c# 设置 html（从 c# 到 WebBrowser 的数据）：

```
WebBrowser browser = new WebBrowser();
browser.Navigate("about:blank");
browser.Document.Write("<html><body>...</body></html>"); 
```

您可以通过使用 WebBrowser 的事件来控制 c#（从 webBrowser 控制到 c#）： http: [//www.dotnetperls.com/webbrowser](http://www.dotnetperls.com/webbrowser)

# java - 使用 JAVAX api 下载电子邮件附件

> ID：14682167
> 
> 赞同：1
> 
> 时间：2013-02-04T07:29:43.130
> 
> 标签：java, jakarta-mail

我有一个客户端程序（使用 javax API），它将从电子邮件中下载附件。不幸的是，无法从特定的发件人处下载相同的内容。

这是将附件保存到本地磁盘的客户端代码：

```
String disp = p.getDisposition();
String contentType = part.getContentType();
if (disposition == null) { 
 if ((contentType.length() >= 10) && (contentType.toLowerCase().substring(0, 10).equals("text/plain"))) {
  //handle plain text
 } else { 
  part.writeTo(System.out);
 }
} else if (disposition.equalsIgnoreCase(Part.ATTACHMENT)) {
 saveFile(part.getFileName(), part.getInputStream());
} else if (disposition.equalsIgnoreCase(Part.INLINE)) {
 saveFile(part.getFileName(), part.getInputStream());
} else { // Should never happen
 // handle else block
} 
```

请给我一个下载附件的方法..

以下是我对无法下载附件的电子邮件的调查结果：

*   'disp' 为**null**。
*   contentType 是**message/rfc822**。

下面是***part.writeTo(System.out)***的输出：

```
MIME-Version: 1.0
Content-Type: message/rfc822

Received: from  XXXXXX with ESMTP id XXXXXXX ;          Tue, 29 Jan 2013 13:53:39 -0500
From: XXXXXXX@XXXXX.com
To: XXXXXXX@XXXXX.com
Subject: XXXXXXX
Date: Tue, 29 Jan 2013 13:53:40 -0500
Message-ID: <XXXXX.XXXXXX-XXXXXXX.XXXXXXXX@LocalDomain>
X-Priority: 1 (High)
Return-Receipt-To: <XXXXX@XXXXXX.com>
Disposition-Notification-To: <XXXXXX@XXXXXXX.com>
MIME-Version: 1.0
X-MIMETrack: Itemize by SMTP Server on XXXXXXX/XXXXXX(Release 8.5.1FP1|January 05, 2010) at 01/29/2013 01:53:39 PM
X-Disclaimed: 56875
Content-Type: multipart/mixed; boundary="----=_NextPart_145_1257127098"

------=_NextPart_145_1257127098
Content-Type: application/pdf; name="attach1.pdf"; charset="iso-8859-1"
Content-Disposition: attachment; filename="attach1.pdf"
Content-Transfer-Encoding: base64

D1//AAVP/wCR8194f27kn/Q4yv8A8OGE/wDl3mvvIiCv3Qeevf6etAGcEgggjJPfFS7H/ut/3yf8
KNj/AN1v++T/AIUfVsT/ANA9f/wVP/5HzX3h/buSf9DjK/8Aw4YT/wCXea+8bSE4/P8AKn7H/ut/
3yf8KNjf3G/75P8AhR9WxP8A0D1//BU//kfNfeH9u5J/0OMr/wDDhhP/AJd5r7xmen480uPb/P8A
kU7Y39xv++T/AIUbH/ut/wB8n/Cj6tif+gev/wCCp/8AyPmvvD+3ck/6HGV/+HDCf/LvNfeNpMjp
kZp+x/7rf98n/Ck2N12HP+6f8KPq2J/6B6//AIKn/wDI+a+8P7dyT/ocZX/4cMJ/8u8194maQkgc
/wCP0f8ADtL9m/8A6F+D/wAAY/8A4/RRQFl2/rT/ACQf8O0v2b/+hfg/8AY//j9H/DtL9m//AKF+
D/wBj/8Aj9FFAWXb+tP8kH/DtL9m/wD6F+D/AMAY/wD4/R/w7S/Zv/6F+D/wBj/+P0UUBZdv60/y
Pg0Kc3RhcnR4cmVmDQoyNjY5Mg0KJSVFT0Y=

------=_NextPart_145_1257127098
Content-Type: application/pdf; name="attach-2.pdf"; charset="iso-8859-1"
Content-Disposition: attachment; filename="attach-2.pdf"
Content-Transfer-Encoding: base64

NBclCFEsQwtbRDmKbBROiSFXwAJrKJhPUAtYIG1qQGYhi2QojkKW7DAxMjXAkRaNTU1wpEUUGZQk
h2IabhnM1Ag00YieOXCQeNsQmNSx6DO21IOI4sqFyPowXA8PSAzXIwcxUn5DcwUOmaGXFY2BCkEc
jLyoAuKSmxeRTMWRGYGuQHM4MSKDJlUamVtiT5VmcOYwzY0mKFXVCCmEiIhurIUQij5U1yMHJKrr
0YIYUdSguwKHzNArhAyAZbk5tkKI7AIIycRhWgDh0GdkoQdRN1xzIg59w74AshiR5S7hVI693DU1
1DPGUrrmogYkin3oQYxUuiKbhltmyJW7RqZGcL+glbsGBqZGZJa9yKbiKHvJDhVDEyMcqdLIxAxH
qkSRQUl7KKbhlsFMlUATjeiZGQeJtw3M9Yyx6DO21IOI4sqMyPowXA8PSAzXIwcxUpZDcwUOmaGX
GY0s9QxAHIzMqGKuZ25CbmZEMhVHZgS6As3hxIgMmlRpaA4sgrGlSjM4c5jmRjOU6mqEFEJERDfW
QghFH6rrkQMS1fVoQYwoatBdgUNm6BVCBoZ6ZubYCiEzcgsgJBOHaQGEQ5+RhR5E3XDNiTj0DfsC
NQ0KL0luZm8gMSAwIFINCi9Sb290IDIgMCBSDQo+Pg0Kc3RhcnR4cmVmDQo0ODYzMA0KJSVFT0Y=

------=_NextPart_145_1257127098
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="iso-8859-1"

Dear XXXXXX,

Please see attached for your most recent attachments.  Please direct correspond=
ence and inquiries to accounts=XXXXX@XXXX.com.
=20
Thank you for your continued support, we appreciate it very much.
=20
=20
Sincerely,
=20
XXXXX, XXX.

------=_NextPart_145_1257127098-- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:17:40.113

我有一个解决我的问题的方法。

当 disposition 为 null 且 Content-type 为 'MESSAGE/XXXX' 时，将其视为新消息并迭代其内容。

```
else  if(disp == null && StringUtils.isNotBlank(contentType) && contentType.toLowerCase().substring(0, 7).equals("message")) {
    IMAPNestedMessage msg = (IMAPNestedMessage) p.getContent();
    Part p2 = (Part) msg;
    Multipart mp = (Multipart) p2.getContent();
    int count = mp.getCount();
    for (int i = 0; i < count; i++){
        addAttachment(mp.getBodyPart(i), fileNames, fileName);
    }
} 
```

# winforms - DevExpress MetroUI 问题

> ID：14682168
> 
> 赞同：1
> 
> 时间：2013-02-04T07:29:53.240
> 
> 标签：winforms, microsoft-metro, devexpress, devexpress-windows-ui

实际上，我已经使用 DevExpress MetroUIView 完成了我的应用程序。
我有一个 TileContainer，在单击磁贴时，它显示 GridView 页面，在 GridView 上双击时，它正在导航到详细信息页面。
到目前为止，一切正常。我的问题是：当我在详细信息页面单击后退按钮时，它直接导航到 TileContainer 页面而不是 GridView 页面。
我想以某种方式，当我从详细信息页面单击后退按钮时，它应该重定向到 GridView 页面，如果我单击 Gridview 页面上的后退按钮，它应该重定向到 TileContainer 屏幕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:46:08.850

这是 DevExpress [DocumentManager](http://help.devexpress.com/#WindowsForms/CustomDocument11359)版本 v12.2 的答案，它是[WindowsUIView](http://help.devexpress.com/#WindowsForms/CustomDocument11358) (MetroUIView)：

为了能够从当前屏幕（带有项目详细信息）导航回上层（带有网格），您应该通过[ContentConteiner.Parent](http://help.devexpress.com/#WindowsForms/DevExpressXtraBarsDocking2010ViewsWindowsUIBaseContentContainer_Parenttopic)属性使当前内容容器知道它的父容器。
因此，您的容器层次结构应如下所示：

```
// mainTileContainer(MainMenu) 
//  -> gridItemsPage(GridControl)
//    -> itemDetailPage(DetailForm)
//...
mainTileContainer.ActivationTarget = gridItemsPage;
gridItemsPage.Parent = mainTileContainer;
itemDetailPage.Parent = gridItemsPage; 
```

相关链接：

1.  [内容容器](http://help.devexpress.com/#WindowsForms/CustomDocument11771)
2.  [层次结构和屏幕](http://help.devexpress.com/#WindowsForms/CustomDocument11770)
3.  [如何：创建内容容器层次结构](http://help.devexpress.com/#WindowsForms/CustomDocument11812)

# java - Hibernate 与引用列的一对一映射（XML 映射）

> ID：14682169
> 
> 赞同：5
> 
> 时间：2013-02-04T07:29:59.350
> 
> 标签：java, database, hibernate, one-to-one

我有一个用户表和一个`user_detail`具有一对一映射`user_detail`表的表有一个`user_id`用于此关系的字段，该字段存储相应用户的 id 字段值。

如何`hbm`为这种关系编写休眠文件？

更新

我的问题是用户的主键是`id`，user_detail 的外键是`user_id`

我在互联网用户 user_id 中获得的所有示例作为用户主键，与其他表中的外键相同

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-07T04:09:27.073

在 User.hbm 中，您需要像这样声明与 UserDetails 的关系：

```
<one-to-one name="user_detail" foreign-key="user_id" class="UserDetail full name "/> 
```

希望这对你有帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T07:39:14.613

**对于用户映射......**

```
<?xml version="1.0"?>
        <!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
        <!-- Generated 25 April 2011 7:52:33 PM by Hibernate Tools 3.4.0.CR1 -->
        <hibernate-mapping>
            <class name="com.rais.User" table="USER" catalog="mydb">
                <id name="userId" type="java.lang.Integer">
                    <column name="USER_ID" />
                    <generator class="identity" />
                </id>
                <property name="userName" type="string">
                    <column name="USER_NAME" length="10" not-null="true" unique="true" />
                </property>
                <property name="userCode" type="string">
                    <column name="USER_CODE" length="20" not-null="true" unique="true" />
                </property>
                <one-to-one name="userDetail" class="com.rais.UserDetail"
                    cascade="save-update"></one-to-one>
            </class>
        </hibernate-mapping> 
```

**用于 UserDetail 映射。**

```
 <?xml version="1.0"?>
    <!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
    <!-- Generated 25 April 2011 7:52:33 PM by Hibernate Tools 3.4.0.CR1 -->
    <hibernate-mapping>
        <class name="com.rais.UserDetail" table="USER_DETAIL"
            catalog="mydb">
            <id name="userId" type="java.lang.Integer">
                <column name="USER_ID" />
                <generator class="foreign">
                    <param name="property">user</param>
                </generator>
            </id>
            <one-to-one name="user" class="com.rais.User"
                constrained="true"></one-to-one>
            <property name="compName" type="string">
                <column name="COMP_NAME" length="100" not-null="true" />
            </property>
            <property name="compDesc" type="string">
                <column name="COMP_DESC" not-null="true" />
            </property>
            <property name="remark" type="string">
                <column name="REMARK" not-null="true" />
            </property>
        </class>
    </hibernate-mapping> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-11-28T10:28:22.557

对于 UserDetail 的主键不是外键的一对一关联，我们必须将其表示为拥有方的多对一关联。

从休眠文档[https://docs.jboss.org/hibernate/orm/3.2/reference/en/html/mapping.html](https://docs.jboss.org/hibernate/orm/3.2/reference/en/html/mapping.html)

> 或者，具有唯一约束的外键，从 Employee 到 Person，可以表示为：

`<many-to-one name="person" class="Person" column="PERSON_ID" unique="true"/>`

> 并且可以通过将以下内容添加到 Person 映射来使这种关联成为双向的：

`<one-to-one name"employee" class="Employee" property-ref="person"/>`

因此，无法使用一对一映射此关联，您必须在拥有方（表持有外键）将映射更改为多对一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T07:35:49.290

```
<one-to-one name="user_detail" class="give the full specified className with package declaration" cascade="save-update"></one-to-one> 
```

这是一个很好的例子

[http://www.mkyong.com/hibernate/hibernate-one-to-one-relationship-example/](http://www.mkyong.com/hibernate/hibernate-one-to-one-relationship-example/)

请找到它。

# javascript - windows 8 确保启用事件日志记录

> ID：14682177
> 
> 赞同：0
> 
> 时间：2013-02-04T07:30:58.177
> 
> 标签：javascript, windows-8, visual-studio-2012

大家好，我使用 Visual Studio 2012 和 Metro 应用程序的 JavaScript 模板构建了一个应用程序**性能测试**。

```
 Bytecode generation

Error Found: The bytecode generation test detected the following errors:
    This package was deployed for development or authoring mode. Uninstall the package and re-install it normally.
Impact if not fixed: As a performance optimization to accelerate JavaScript execution time, JavaScript files ending in the ".js" extension generate bytecode when the app is deployed. This optimization significantly improves start-up and ongoing execution times for JavaScript.
How to fix: You may need consider one or more of these steps to fix the issue:
- Ensure that event logging is enabled
- All JavaScript files are syntactically valid; otherwise exclude the respective files from the package
- Please note that you should uninstall all previous versions of the app before deploying
Otherwise exclude the respective files from the package. 
```

我解决了许多错误，但最后说失败并没有解决，如何解决这个问题你能知道我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:19:29.633

要修复此错误，请检查 Visual Studio 中的所有 .html、.css 和 .js，并设置其高级保存选项以将文件更改为 UTF8 w/BOM。

打开文件后，执行：

```
1) file
2) advanced save options...
3) select the UTF8 encoding 
```

保存每个文件。

# javascript - jQplot统计

> ID：14682180
> 
> 赞同：1
> 
> 时间：2013-02-04T07:31:09.870
> 
> 标签：javascript, jquery, jqplot

我有一个 jQplot 图表，我需要将`month`标签（一月、二月、三月、四月、五月、六月、七月……）放在我的 X 轴上。

我尝试了一些教程中的示例，但它们不起作用。

有人可以帮助我吗？

* * *

这是我到目前为止所拥有的：

```
jQuery(document).ready(function(){
    jQuery.plot(jQuery("#chartplace2"), [{
        data : [[6, '0'], [5, '0'], [4, '0'], [3, '0'], [2, '0'], [1, '0'], [0, '32000']],
        label : "Mijolino",
        color : "#79755c"
    }, {
        data : [[6, '0'], [5, '0'], [4, '0'], [3, '0'], [2, '0'], [1, '0'], [0, '42500']],
        label : "Mija",
        color : "#78d6d0"
    }], {
        series : {
            lines : {
                show: true,
                fill : true,
                fillColor : {
                    colors : [{
                        opacity : 0.1
                    }, {
                        opacity : 0.20
                    }]
                }
            },
            points: {
                show : true
            }
        },
        legend: {
            position : 'nw'
        },
        grid: {
            hoverable : true,
            clickable : true,
            borderColor : '#ccc',
            borderWidth : 1,
            labelMargin : 10
        },
        yaxis : {
            min : 0,
            max : 100000
        },
        title : {
            text : 'Grafikon',
            show : true
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:23:57.007

看到这个

[**JSFIDDLE 演示**](http://jsfiddle.net/GsDMW/7/)

HTML

```
<div id="chartplace2" style="height: 300px; width: 650px; position: relative;" class="jqplot-target"> 
```

查询

```
var Mijolino = [['01/01/2013', '0'], ['02/01/2013', '0'], ['03/01/2013', '0'], ['04/01/2013', '0'], ['05/01/2013', '0'], ['06/01/2013', '0'], ['07/01/2013', '32000']];
var Mija = [['01/01/2013', '0'], ['02/01/2013', '0'], ['03/01/2013', '0'], ['04/01/2013', '0'], ['05/01/2013', '0'], ['06/01/2013', '0'], ['07/01/2013', '42500']];;

var plot1 = $.jqplot("chartplace2",
[Mijolino,Mija], {

  seriesDefaults: {

    lines: { 
        show: true, 
        fill: true
    },
    points: { 
        show: true 
    }
  },
   legend: { 
       position: 'nw',
       renderer: $.jqplot.EnhancedLegendRenderer,
    show:true
   },
   grid: { 
       hoverable: true, 
       clickable: true, 
       borderColor: '#ccc', 
       borderWidth: 1, 
       labelMargin: 10 
   },

    axes:{
        xaxis: { 
            renderer:$.jqplot.DateAxisRenderer        

        },
        yaxis: {
         min:0,
         max:50000
        }
    },

title: { 
    text: 'Grafikon', 
    show: true},
   seriesColors: [ "#D85252", "#F6BD0F"],
    series:[
    {
    label: "Mijolino",
    },
    {
    label: "Mija",
        }   
    ],
    highlighter: { show: false }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:02:46.480

尝试这样的事情：

[http://jsfiddle.net/pabloker/GsDMW/3/](http://jsfiddle.net/pabloker/GsDMW/3/)

```
var Mijolino = [['01/01/2013', '0'], ['02/01/2013', '0'], ['03/01/2013', '0'],   ['04/01/2013', '0'], ['05/01/2013', '0'], ['06/01/2013', '0'], ['07/01/2013', '32000']];
var Mija = [['01/01/2013', '0'], ['02/01/2013', '0'], ['03/01/2013', '0'], ['04/01/2013', '0'], ['05/01/2013', '0'], ['06/01/2013', '0'], ['07/01/2013', '42500']];;

var plot1 = $.jqplot("chartplace2",
[Mijolino,Mija], {
seriesDefaults: {
lines: { 
    show: true, 
    fill: true
},
points: { 
    show: true 
}
},
legend: { 
   position: 'nw'
},
grid: { 
   hoverable: true, 
   clickable: true, 
   borderColor: '#ccc', 
   borderWidth: 1, 
   labelMargin: 10 
},
axes:{
    xaxis: { 
        renderer:$.jqplot.DateAxisRenderer,
        tickOptions:{formatString:'%Y-%b'},
        min: '01/01/2013'
    },
    yaxis: {
     min:0,
     max:50000
    }
},

title: { 
text: 'Grafikon', 
show: true}
}); 
```

# arrays - 如何找到涉及超级比较的排序算法的下限？

> ID：14682181
> 
> 赞同：1
> 
> 时间：2013-02-04T07:31:10.540
> 
> 标签：arrays, algorithm, sorting

假设有一种*排序算法*，除了常规比较之外，还允许进行超级比较：超级比较接受三个元素并按从小到大的顺序输出这些元素。

我想找到一个下限。

由于与只有两种可能结果的常规比较不同，超级比较将有 3 个！可能的结果，我认为应该是`log3(n!)`。

我不确定，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T07:56:44.187

实际上，超级比较的数量是`log_6(n!)`，这是因为每个超级比较操作有 6 个可能的结果，而不是 3 个（3！= 6）。因此，通过在表示随机排列的树上重复调用这些超级比较，您可以在`log_6(n!)`比较操作中得到一个排序数组。

请注意，当涉及到*渐近*时间复杂度时 - 它仍然`O(nlogn)`是对数的底并不重要，因为您可以轻松地切换底：

```
log_6(n!) = log_2(n!)/log_2(6) = log_2(n!) / CONST 
=> log_6(n!) is in O(log_2(n!))
=> log_6(n!) is in O(nlogn) 
```

**PS**一个很好的直觉是看看在“无穷大”会发生什么，即你有一个对`n`元素进行分类的超级比较。显然，您将需要一个这样的操作来对数组进行排序，实际上是`log_n!(n!) = 1`while `log_n(n!) > 1`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T07:38:14.287

在 ocaml 中，

```
let rec quicksort = function
    | [] -> []
    | x::xs -> let smaller, larger = List.partition (fun y -> y < x) xs
               in quicksort smaller @ (x::quicksort larger) 
```

# linux-kernel - in_irq() 可靠吗？

> ID：14682183
> 
> 赞同：5
> 
> 时间：2013-02-04T07:31:13.820
> 
> 标签：linux-kernel, x86, kernel, irq

[不可靠的黑客指南 Linux 内核](http://www.kernel.org/doc/htmldocs/kernel-hacking.html)指出

> 您可以知道您处于硬件中断中，因为 in_irq() 返回 true。
> **小心**。请注意，如果禁用中断，这将返回误报（见下文）。

在 Linux 内核 2.6.32 或 x86 上的更新版本中，是否真的`in_irq()`可能返回非零而不是在 hardirq 上下文中？

在我对内核 2.6.32 (Debian 6) 和 3.4 (OpenSUSE 12.1) 的实验中，`in_irq()`从进程上下文调用时总是返回 0，即使它是在 和 之间调用`local_irq_disable()`的`local_irq_enable()`。当我使用禁用中断而不是`local_irq*`.

从内核的源代码中，我目前看不到如何`in_irq()`返回误报。有人可以澄清一下吗？

编辑：我也尝试了`*_irqsave()`和`*_irq()`spinlock API 以及`local_irq_save()`/ `local_irq_restore()`，结果是一样的，也就是说，`in_irq()`当中断被禁用时返回 0 。通过 x86 上的机器指令显式禁用中断`cli`也不会强制 in_irq() 返回非零值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T16:00:52.350

`in_irq()`是一个包装器，它[查看 中的一些位`preempt_count`](http://lxr.linux.no/linux+v2.6.32/include/linux/hardirq.h#L77)，它是`thread_info`结构中的一个 int，值 0 表示它没有被抢占，所以它不在 irq 中。

`local_irq_disable()`本身不会影响该计数，但[会](http://lxr.linux.no/linux+v2.6.32/include/linux/preempt.h#L30)影响，因此可能导致误报。你说你使用了自旋锁功能，你用过这个吗？如果是这样，请查看 preempt_count 的值是否在变化。[`spin_lock_irqsave()`](http://lxr.linux.no/linux+v2.6.32/include/linux/spinlock_api_smp.h#L241)

编辑：只是为了涵盖所有基础，检查以确保启用内核抢占。

# android - Android 应用程序超大屏幕

> ID：14682190
> 
> 赞同：0
> 
> 时间：2013-02-04T07:32:17.797
> 
> 标签：android, user-interface

我正在开发一个安卓应用程序。**我希望我的应用程序支持多个屏幕，并且它在所有屏幕上看起来都很好。当我在大小为10.1" WXGA 1280*800 mdpi**的模拟器上测试我的应用程序时 ，对于所有 xlarge 屏幕，屏幕看起来都不好，而且我的应用程序仅支持 potrait 模式。我无法理解为什么它在 xlarge 屏幕中看起来像这样。

**屏幕截图：1024 * 600** ![在此处输入图像描述](../Images/5880dc8db08df8534a0c0a80aa564c74.png)

我没有设备来测试这个应用程序我怎样才能解决 mt 问题任何人都可以建议我一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:44:47.390

我不确定你的应用应该是什么样子，但我猜你的内容应该更适合屏幕，而不是分散在周围有很多空间。

一种解决方案是使用另一个布局文件，使您的内容适应超大屏幕。因此，在资源中创建一个名为 layout-xlarge 的新文件夹，并在其中添加一个新的 xml 布局文件。如果它是一个超大屏幕，则将使用该屏幕。可绘制对象使用像素密度而不是屏幕尺寸，因此您仍然需要所有尺寸才能使图形看起来不错。好读：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

第二种解决方案是决定是否要支持超大屏幕。然后将其添加到您的清单中：

```
<supports-screens
 android:xlargeScreens="false"
 /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-24T06:38:53.563

在 res 文件夹中创建这样的文件夹

res/layout/my_layout.xml // 正常屏幕尺寸的布局（“默认”）

res/layout-small/my_layout.xml // 小屏幕布局

res/layout-large/my_layout.xml // 大屏幕布局

res/layout-xlarge/my_layout.xml // 超大屏幕的布局

res/layout-xlarge-land/my_layout.xml // 横向超大布局

# java - 隐藏或禁用 WebView 软键盘 Go/Done/Enter 按钮

> ID：14682193
> 
> 赞同：0
> 
> 时间：2013-02-04T07:32:35.843
> 
> 标签：java, android, android-softkeyboard

我整天都在寻找一个可行的例子，但没有找到任何真正有效的东西。

我有一个简单的在线反馈表，我用 WebView 设置了它，可以在 Android 设备上工作，特别是 Nexus 7（它只会在我们酒店的这些设备上本地使用）。

问题是 html 反馈表单有不同的字段集，有些带有单选按钮，有些带有文本字段和文本区域。表单是通过邮寄发送的，我有一个在表单中调用的 jquery 验证脚本：

```
<form name="form" method="post" action="feedback_manager/fb_save.php" onsubmit="return validateForm()" > 
```

一切正常，除了当用户填写文本字段时，软键盘中有一个明显的蓝色“开始”按钮，一旦他们完成输入，他们必须点击（或触摸），问题是它没有不要将它们带到下一个表单字段集，而是自动提交表单（或者在这种情况下首先运行我的验证脚本）。

KEYCODE_ENTER 按钮的默认操作不是应该将用户发送到下一个字段集而不是提交表单吗？

我将分享我的 html 表单和我的 webView 脚本，希望有人会发现我做错了什么：

```
<fieldset>
<legend>Food quality, taste &amp; presentation</legend>

    <input id="flavor4" name="flavor" value="excellent" type="radio" />
    <label for="flavor4"> Excellent</label><br>

    <input id="flavor3" name="flavor" value="good" type="radio" />
    <label for="flavor3"> Good</label><br>

    <input id="flavor2" name="flavor" value="average" type="radio" />
    <label for="flavor2"> Average</label><br>

    <input id="flavor1" name="flavor" value="bad" type="radio" />
    <label for="flavor1"> Needs improvement</label><br>

</fieldset>
<fieldset>
    <legend>Who was your waiter today?</legend>
    <input name="waiter" type="text">
</fieldset>

//then another fieldset with radio buttons and so on 
```

会不会是我的文本输入不是一个接一个地立即与单选按钮和组合框混合在一起？

这是我的 onKeyDown 代码：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    if ((event.getKeyCode() == KeyEvent.KEYCODE_BACK) && mWebView.canGoBack())
    {
        mWebView.goBack();
        return true;
    }
    if (keyCode == KeyEvent.KEYCODE_ENTER && event.getAction() == KeyEvent.ACTION_DOWN) {
        // do nothing
        return false;
    }
    return true;
} 
```

有趣的是，我的 KEYCODE_BACK 条件工作正常，但我希望 KEYCODE_ENTER 按钮不执行任何操作，只关闭软键盘或转到下一个字段但不提交表单。

我在这里看到了很多关于 SO 的答案，但他们似乎都没有在 Nexus7 上工作（还没有真正在其他设备上尝试过）。

综上所述，我所需要的只是让那个蓝色的“Go”按钮不做任何事情或转到下一个字段。

请帮忙。

****编辑****

今天早上我以全新的眼光看待这个问题，发现这个类似的帖子添加了一个 OnKeyListener 来检测密钥，然后返回 false。[在 EditText 上输入键，按两次 onKey](https://stackoverflow.com/questions/4513888/enter-key-on-edittext-hitting-onkey-twice)

```
mWebView = (WebView) findViewById(R.id.webview);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.loadUrl("http://some.url");
    mWebView.setWebViewClient(new virtuoWebViewClient());

    mWebView.setOnKeyListener(new View.OnKeyListener() {
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if (event.getAction() == KeyEvent.ACTION_DOWN) {
                if (keyCode == KeyEvent.KEYCODE_ENTER) {
                    // do nothing
                    return false;
                }
            }
            return false;
        }
    }); 
```

但仍然没有，“开始”按钮仍然提交表单:(，我会继续尝试，如果有人能指出我不同的方向或分享新想法，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-13T15:25:09.677

我花了很长时间寻找解决方案，但没有什么是完美的。这是我能找到的最佳解决方法，它将“返回”（提交）操作替换为“选项卡”操作，除非焦点位于文本区域或提交按钮上：

```
$("form").keydown(function(e){
    if (e.which != 13) return; // ENTER
    if (e.target.type == "textarea" || e.target.type == "button") return;
    if ($("input[type=submit]", this).length == 1) return; // autosubmit form

    var nextTabbable = null;
    var $tr = $(e.target).closest("tr, form");
    var narrowContext = $tr.length && e.target.tabIndex == undefined && !$tr.is("form");
    if (narrowContext) nextTabbable = getNextTabbable($tr.add($tr.next()), e.target);
    if (!nextTabbable) nextTabbable = getNextTabbable(this, e.target);

    if (nextTabbable) {
        if (nextTabbable.type == "text" && nextTabbable.value != "") nextTabbable.select();
            nextTabbable.focus();
        return false;
    }
});

function getNextTabbable(ctx, current) {
    var $t = $("input[tabindex!=-1]:visible, select[tabindex!=-1]:visible, textarea[tabindex!=-1]:visible", ctx).not(":disabled");
    var docIndex = {};
    $t.each(function(i,e){ docIndex[e] = i });
    $sorted = $t.sort(function(a,b){ return a.tabIndex==b.tabIndex ? docIndex[a]<docIndex[b] : a.tabIndex<b.tabIndex ? -1 : 1 });
    return $sorted.get($sorted.index(current)+1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T07:52:26.143

好的，我不得不让它慢慢沸腾，因为它有点令人沮丧，经过大量的试验和错误之后，WebView 本身似乎不允许我在没有 EditText 的情况下进行的行为。我真的不需要此应用程序的 EditText，我发现输入类型文本显示“开始”按钮，但 textareas 没有，他们用回车按钮替换它（不是蓝色的，不发送表单)，它既便宜又粗糙，但符合目的，所以我基本上最终使用了参数 rows="1" 的 textareas，所以它看起来像一个输入类型的文本。

```
<textarea rows="1" name="waiter"></textarea> 
```

隐藏“Go”、“Done”或“Enter”按钮的技术含量非常低的解决方案 XD。

# jquery - jQuery从匿名滑块获取滑块值

> ID：14682195
> 
> 赞同：0
> 
> 时间：2013-02-04T07:32:43.817
> 
> 标签：jquery, jquery-ui, sliders

我正在寻求帮助：

[http://jsfiddle.net/techii/9e2cJ/2/](http://jsfiddle.net/techii/9e2cJ/2/)

[这是对此](https://stackoverflow.com/questions/14671821/jquery-filter-with-multiple-criteria)的后续问题

但是因为这不是一个“带着你的问题来到这里，我们会为你解决”的网站，所以我特别有一个特别的问题

在上面的 jsfiddle 中，我使用了匿名滑块，并且对滑动/更改做出反应的函数应该过滤/匹配从 JSON 解析的餐馆。我正在尝试从我的四个滑块中提取值，但它们必须与它们各自的变量匹配，例如收集时的 ambienceSliderValue，以便我可以将它们与它们的 JSON 对应项进行比较（ambienceRating）

```
var refreshRestaurant = 
    $(".restaurant > div").each(function(){
            // Some code to extract things like spicyness, expensiveness
            // this part should maybe be in the JSON object constructor above to push data? Perhaps I should use .val(); instead?
            var ambienceRating = $(this).data("ambienceRating");
            var spicyRating = $(this).data("spicyRating");
            var garlicRating = $(this).data("garlicRating");
            var expensiveRating = $(this).data("expensiveRating");

               // Also some code to get the slider values...

            var isMatch = ambienceSliderValue <= ambienceRating && spicySliderValue <= spicyRating && garlicSliderValue <= garlicRating && expensiveSliderValue <= expensiveRating;
            $(this).toggle(isMatch);
    }) 
```

是我使用命名滑块的唯一解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:46:43.047

例如，我将显示回调函数中的变量更新：

HTML：

```
<div class="sliders">
    <div id='a'></div>
    <div id='b'></div>
    <div id='c'></div>
    <div id='d'></div>
</div> 
```

JS：

```
$(function () {
  var vars={};
    $('.sliders div').slider({
        orientation: "horizontal",
        range: false,
        min: 0,
        max: 100,
        step: 1,
        value: 0,
        slide: refreshRestaurant,
        change: refreshRestaurant
    }); 

    function refreshRestaurant() {
     vars[this.id]=$(this).slider('value'); 
      console.log(vars);
    }
}); 
```

[演示](http://jsbin.com/ilevem/4/)；

# c++ - 重新 C++ 范围迭代器：只有一个类是不是很糟糕？

> ID：14682197
> 
> 赞同：0
> 
> 时间：2013-02-04T07:32:50.510
> 
> 标签：c++, iterator

例如，是否应将以下类分为两部分：

```
class Range {
 public:
  Range(int end);

  Range begin();
  Range end();

  // Second class would contain these methods.
  bool operator!=(const Range& range);
  int operator*();
  void operator++();
};

// Print 012
// Almost as pretty as Python :D
for (int i : Range(3)) {
  std::cout << i;
} 
```

?

PS：标准库中有这样的类吗？

更新：

以下是替代设计的外观：

```
class Range;

class RangeIterator {
 public:
  bool operator!=(const RangeIterator& range_iterator);
  int operator*();
  void operator++();

 private:
  RangeIterator(const Range& range);
};

class Range {
 public:
  Range(int end);

  RangeIterator begin();
  RangeIterator end();

  friend class RangeIterator;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T08:55:08.553

就我个人而言，我会把它分开——C++ 中类型安全的要点是，当你将一个范围传递给一个应该采用迭代器的函数时，编译器会告诉你，反之亦然。如果同一个类同时扮演这两个角色，那么你就失去了这个，如果`myrange`和`myrange.begin()`具有相同的类型，这是一个现实的错误。也就是说，由于您也喜欢 Python，您可能不会认为这有什么大不了的，您已经习惯了存在`__iter__`返回的对象`self`。从 C++ POV 我会说这可能看起来有点不寻常/棘手/聪明。

不过，这并不意味着`RangeIterator`必须在您的界面中公开定义。您可以使用`Range::iterator_type`由私有嵌套类或命名空间中定义的类支持的 typedef 。`Range::iterator_type`无论哪种方式，有人可以检查头文件中的类定义，但除了“可以通过名称引用它，这就是你可以用它做什么”之外，您不会记录任何内容。

说到这一点，目前`Range`也不`RangeIterator`满足迭代器的要求。如果您决定要`Iterator`成为迭代器，那么您需要专门`std::iterator_traits`化，添加一些 typedef，或者（常用选项）派生自`std::iterator`. 因此，无论您采用哪种方式，都需要包含更多样板文件。这可能会影响你的决定。您开始编写的内容越多，按比例定义额外类的成本就越少。

这里`RangeIterator`变成了一个迭代器：

```
class RangeIterator : public std::iterator<std::input_iterator_tag, int> {
 public:
  bool operator!=(const RangeIterator& range_iterator) const;
  bool operator==(const RangeIterator& range_iterator) const;
  int operator*() const;
  RangeIterator &operator++();
  RangeIterator operator++(int);

 private:
  RangeIterator(const Range& range);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:38:59.857

是否应该将其分为两类在很大程度上取决于使用该软件的环境。

例如，如果软件的其余部分与这种类型的代码无关，那么将它们放在一起可能是有意义的，并且可以降低复杂性。另一方面，如果您正在努力拥有某种通用实用程序，那么将它们分开可能会更好地维护可维护性（或者可以说，为了简单起见）。

我认为您应该考虑可维护性和可读性，而不是对这样的代码片段制定硬性规则。从长远来看，您的设计选择会让事情更容易维护吗？它会降低项目的复杂性吗？

这就是软件架构设计中的一件很酷的事情！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T09:04:19.743

我会简单地坚持第二种方法，它有一些好处：

1.  您可能希望以`Range`不同的方式遍历，具体取决于您要完成的任务。但是您可能不希望 `Range`使用针对不同遍历的操作来使界面膨胀，即使您可以预料到您将需要的操作。

2.  将遍历机制与`Range`对象分离让我们可以为不同的遍历策略定义迭代器，而无需在`Range`接口中枚举它们。例如， `FilteringRangeIterator`可能只提供对那些满足特定过滤约束的元素的访问。

3.  您可能希望为 提供多态性`Range`，然后可以泛化迭代器概念以支持多态迭代。

# android - 在 Android 设备上下载后扩展文件的安全性

> ID：14682198
> 
> 赞同：3
> 
> 时间：2013-02-04T07:32:57.030
> 
> 标签：android, apk-expansion-files

由于我的 apk 大小，我正在搜索如何在 android 中实现扩展文件。现在的问题是扩展文件存储在设备存储中，因此在根据请求下载扩展文件后，任何人都可以复制这些文件或通过 USB 传输这些文件并使用这些扩展文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:48:35.453

有一个用于封装和加密的 JOBB 工具[http://developer.android.com/tools/help/jobb.html](http://developer.android.com/tools/help/jobb.html)

# matlab - 使用 MATLAB 绘制词频图

> ID：14682199
> 
> 赞同：1
> 
> 时间：2013-02-04T07:33:02.430
> 
> 标签：matlab, import, frequency, word-frequency

我有一个包含大约 1000 万个唯一单词的大型文本文件，它们在两列中出现频率，如下所示：

```
apple 10
banana 21
pineapple 7
orange 9
... 
```

我想绘制一个图表，Y 轴为频率，X 轴为单词。我使用了“加载”命令，但它似乎不起作用。我收到以下错误：

```
Error using ==> load
Unknown text on line number 1 of ASCII file C:\Users\..\Desktop\inputdata.txt
"aa" 
```

关于如何绘制图表的任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:38:47.550

试试[`importdata`](http://www.mathworks.com/help/matlab/ref/importdata.html)，例如：

```
 a=importdata('inputdata.txt') 
```

`a.data`- 将输出数值向量，`[10,21,...]`

`a.textdata` - 将输出一个包含单词、、 `apple`等`banana`的元胞数组

所以如果你想按频率排序：

```
[b idx]=sort(a.data,'descend')
plot(a.data(idx)); 
```

另一种选择是使用`barh`，如下所示：

```
[b idx]=sort(a.data)
barh(a.data(idx));
set(gca,'yticklabel',a.textdata(idx)) 
```

![在此处输入图像描述](../Images/4a7671c68bcaf0bee36d7e71227e7a2d.png)

但是，这仅适用于有限的单词列表，而不是 1000 万……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:38:49.820

您无法加载`.txt`文件。您需要使用文件 I/O 函数，例如`textscan`.

```
fid = fopen('inputdata.txt');
data = textscan(fid, '%s%f')
fclose(fid); 
```

`data`将是一个 1x2 单元格。内容将是：

```
<4x1 cell>  [10;21;7;9] 
```

`data{1,1}`，即 4x1 单元格将是：

```
'apple'
'banana'
'pineapple'
'orange' 
```

您可以像这样访问字符串：

```
data{1,1}(2) 
```

将输出`'banana'`.

并访问这样的数字：

```
data{1,2}(2) 
```

会给你 21，这是香蕉的对应数字。

# spring - Spring 与 Hibernate 4.1.9 的兼容性

> ID：14682200
> 
> 赞同：2
> 
> 时间：2013-02-04T07:33:07.013
> 
> 标签：spring, hibernate, compatibility

我使用最新的 spring 和 hibernate 版本（spring 3.2.1 和 hibernate 4.1.9）升级了我的项目，但它们似乎不兼容。其中一项更改是 Spring 的 jdbc 框架的一部分。

```
public <T> T execute(StatementCallback<T> action) throws DataAccessException {
    Assert.notNull(action, "Callback object must not be null");

    Connection con = DataSourceUtils.getConnection(getDataSource());
    Statement stmt = null;
    try {
        Connection conToUse = con;
        if (this.nativeJdbcExtractor != null &&
                this.nativeJdbcExtractor.isNativeConnectionNecessaryForNativeStatements()) {
            conToUse = this.nativeJdbcExtractor.getNativeConnection(con);
        }
        stmt = conToUse.createStatement();
        applyStatementSettings(stmt);
        Statement stmtToUse = stmt;
        if (this.nativeJdbcExtractor != null) {
            stmtToUse = this.nativeJdbcExtractor.getNativeStatement(stmt);
        }
        T result = action.doInStatement(stmtToUse);
        handleWarnings(stmt);
        return result;
    }
    catch (SQLException ex) {
        // Release Connection early, to avoid potential connection pool deadlock
        // in the case when the exception translator hasn't been initialized yet.
        JdbcUtils.closeStatement(stmt);
        stmt = null;
        DataSourceUtils.releaseConnection(con, getDataSource());
        con = null;
        throw getExceptionTranslator().translate("StatementCallback", getSql(action), ex);
    }
    finally {
        JdbcUtils.closeStatement(stmt);
        DataSourceUtils.releaseConnection(con, getDataSource());
    } 
```

Hibernate 4.1.9 现在代理 jdbc 语句，异常转换器现在启动，抛出运行时异常而不是检查异常。例如，现在抛出运行时异常而不是 SQLException - SQLGrammerException。

Spring 可能应该处理这种休眠变化，对吧？

**编辑**

我在 hibernate 论坛、hibernate jira 论坛和[开发邮件列表](http://lists.jboss.org/pipermail/hibernate-dev/2013-February/009399.html)上讨论过。他们声称，由于这是一个主要版本 (4.x)，因此预计会出现此类兼容性问题。他们要求客户更新他们的代码以解决问题。

我在[spring jira 论坛](https://jira.springsource.org/browse/SPR-10267)上发布了相同的问题，目前正在讨论中。

我想知道其他人是如何解决这个问题的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:33:57.260

Spring 同意为此添加补丁。[可能在 4.x 中](https://jira.springsource.org/browse/SPR-10267)。现在提到的解决方法之一是

> 目前，一个好的解决方案可能是定义一个 PersistenceExceptionTranslationPostProcessor 并使用 @Repository 注释标记您的 JDBC 访问类。这将自动检测您的 Hibernate LocalSessionFactoryBean 并使用它来转换基于 Hibernate 异常层次结构的异常，如您的案例中从 JDBC 调用引发的那样。同样的后处理器也适用于 Hibernate API 的使用（即在你的 Hibernate 访问类中的 sessionFactory.getCurrentSession() 使用）

我没有尝试过这个，因为在我们的例子中，用@Repository 注释标记所有的 jdbc 访问类可能不切实际。

# iphone - SQLITE：为什么我不能在设备（iphone）上写，但我可以在模拟器上写？

> ID：14682202
> 
> 赞同：1
> 
> 时间：2013-02-04T07:33:21.617
> 
> 标签：iphone, objective-c, xcode, sqlite

> **可能重复：**
> [我应该如何在 iPhone 项目中指定 sqlite db 的路径？](https://stackoverflow.com/questions/5042836/how-should-i-specify-the-path-for-an-sqlite-db-in-an-iphone-project)

我想知道为什么我只能在 iphone 上读取我的 Sqlite 数据库但不能写任何东西......在模拟器上一切正常......

是否有任何配置来设置权限或什么？

PS：当我更新或插入sqlite（从设备）时没有错误。

这是我的代码（打开 sqlite）：

```
- (id)init {
    if ((self = [super init])) {
        NSString *sqLiteDb = [[NSBundle mainBundle] pathForResource:@"test"
                                                             ofType:@"sqlite"];

        if (sqlite3_open([sqLiteDb UTF8String], &_database) != SQLITE_OK) {
            NSLog(@"Failed to open database!");
        }
    }
    return self;
}

@end 
```

和我的“更新”代码：

```
-(void)addCoin:(int)score
{
    NSString *query = @"select coin_user from user where id_user = '1'";
    //query = @"SELECT id_soal FROM soal where jawaban_soal = 'romin'";

    sqlite3_stmt *statement;
    int total;
    if (sqlite3_prepare(_database, [query UTF8String], -1, &statement, nil)
        == SQLITE_OK) {
        while (sqlite3_step(statement) == SQLITE_ROW) {
            total = sqlite3_column_int(statement, 0);
        }
        sqlite3_finalize(statement);
    }

    query = [NSString stringWithFormat:@"update user set coin_user = '%i' where id_user = '1'",total + score];

    if (sqlite3_prepare(_database, [query UTF8String], -1, &statement, nil)
        == SQLITE_OK) {
        sqlite3_step(statement);
        sqlite3_finalize(statement);
        }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T08:31:05.700

你不能写在你的主包中。您可以将数据保存到文档目录
您必须将数据库复制到文档目录，然后必须对文档目录中的数据库文件执行操作。

将此代码放在应用程序委托中以复制您的数据库

```
NSString* docPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
NSString* dbPath = [docPath stringByAppendingPathComponent:@"test.sqlite"];
NSFileManager *fm = [NSFileManager defaultManager];

// Check if the database is existed.
if(![fm fileExistsAtPath:dbPath])
{
    // If database is not existed, copy from the database template in the bundle
    NSString* dbTemplatePath = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"sqlite"];
    NSError* error = nil;
    [fm copyItemAtPath:dbTemplatePath toPath:dbPath error:&error];  
        if(error){
            NSLog(@"can't copy db.");
        }
} 
```

和init方法

```
- (id)init {
    if ((self = [super init])) {
            NSString* docPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
            NSString* dbPath = [docPath stringByAppendingPathComponent:@"test.sqlite"];

           if (sqlite3_open([dbPath UTF8String], &_database) != SQLITE_OK) {
               NSLog(@"Failed to open database!");
           }
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T08:54:02.150

您可以在任何地方创建您的 sqlite 数据库并提供数据库的路径。这对你来说很容易。检查下面给出的代码

```
{
        sqlite3_stmt *statement;

        NSString *lmk= @"Volumes/Outbox/test.sqlite";
        const char *dbpath=[lmk UTF8String];

        if (sqlite3_open(dbpath, &contactDB3)==SQLITE_OK)
        {
            NSLog(@"Database is connected sucessfully");
        }
            else
                NSLog(@"Not connected");
            sqlite3_close(contactDB3);
} 
```

现在您可以轻松地选择插入更新删除。

# c++ - 是否有一个网页，Microsoft 保留了最新的 VC++ 中实现的 C++11 功能的最新列表？

> ID：14682204
> 
> 赞同：2
> 
> 时间：2013-02-04T07:33:47.543
> 
> 标签：c++, visual-c++, c++11

是否有一个网页，Microsoft 保留了最新版本的 VC++ 中实现的 C++11 功能的最新列表（包括编译器更新，如 2012 年 11 月的更新）？

我最感兴趣的是 VS2012 和 VC++11。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T09:42:39.423

Google 搜索在 MSDN 中找到了一个表格，其中列出了 C++11 核心语言特性及其在 Visual C++ 2010 和 Visual C++ 中的 Visual Studio 2012 中的实现状态：[该文档描述了新 C++ 标准（也称为 C+）的特性+11——在 Visual C++ 中实现](http://msdn.microsoft.com/en-us/library/vstudio/hh567368.aspx)。该文章的评论部分有一个链接，该页面包含@michael-burr [C++11 评论中引用的更新表的链接 Visual C++ 11 中的功能](http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx)

# mysql - mysql复杂查询需要帮助

> ID：14682207
> 
> 赞同：-3
> 
> 时间：2013-02-04T07:34:11.170
> 
> 标签：mysql, sql

假设，我们有 2 个相关的表

```
Table1:
id item_id(References to Table2:id) rating

Table2:
id title day position 
```

我需要查询：对于所有 Table2 项目，检查 Table1:rating 并将其位置（ASC）放到 Table1:position 但仅针对特定日期。每天 - 新评级。1,2 ... 1000

```
Exmpl:
Table1:
id item_id rating
1  1       2
2  2       1555
3  3       280 
```

我们需要得到：

```
Table2:
 id title day position
 1  test1 1   1
 2  test2 1   3
 3  test3 1   2
 N  ....  2   ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:40:41.553

这个怎么样？

```
SELECT  a.*, b.*
FROM    table2 a
        INNER JOIN table1 b
            ON a.id = b.item_id
WHERE   day BETWEEN day_1 AND day_2
ORDER   BY a.position ASC 
```

试试这个，

```
UPDATE  table2 e
        INNER JOIN
        (
            SELECT  c.*, 
                    @rank:=@rank+1 row_rank
            FROM
                    (
                        SELECT  a.*, b.*
                        FROM    table2 a
                                INNER JOIN table1 b
                                    ON a.id = b.item_id
                        WHERE   day BETWEEN day_1 AND day_2
                    ) c, (SELECT @rank:=0) d
            ORDER   BY c.rating ASC
        ) f ON e.ID = f.ID
SET     e.position = f.row_rank 
```

# jquery - 用 jQuery 组合两个事件

> ID：14682210
> 
> 赞同：0
> 
> 时间：2013-02-04T07:34:20.063
> 
> 标签：jquery, css

我正在制作一个登陆页面，其中包括一个固定位置的导航栏，该导航栏会在某些滚动位置上改变颜色。目前我有这个：

```
// Change Nav Colors on Scrolldown
var scroll_pos = 0;
jQuery(document).scroll(function(){
    scroll_pos = jQuery(this).scrollTop();
    if(scroll_pos > 730){
        jQuery('.top-menu-navigation').css({'background-color' : '#000000'});
    } else if (scroll_pos < 730){
        jQuery('.top-menu-navigation').css({'background-color' : '#ffffff'});
    }
}); 
```

现在，我的班级`.top-menu-navigation`是我设置 div 的背景的地方。但是，我的链接的颜色设置为`.top-menu-navigation ul > li a`. 我在想我可以`jQuery('.top-menu-navigation ul > li a').css({'color' : '#ffffff'});`在声明中添加第二条规则`if`，但这根本不起作用。我怎样才能结合这两个事件？

编辑：稍后我将添加更多滚动位置，我只想让它先在一个上工作，其余的我可以自己解决。

对于奖励积分，我的整个文件如下所示：

```
jQuery(document).ready(function(){

    // Create jQuery Tabs
    jQuery("#tabs").tabs().addClass('ui-tabs-vertical');

    // Sticky Top Nav

    var NavTop = jQuery('.top-menu-navigation').offset().top;

    jQuery(window).scroll(function(){
        if( jQuery(window).scrollTop() > NavTop ) {
            jQuery('.top-menu-navigation').css({position: 'fixed', top: '0px'});
        } else {
            jQuery('.top-menu-navigation').css({position: 'static'});
        }
    });

    // Change Nav Colors on Scrolldown

    var scroll_pos = 0;

    jQuery(document).scroll(function(){
        scroll_pos = jQuery(this).scrollTop();
            if(scroll_pos > 730){
                jQuery('.top-menu-navigation').css({'background-color' : '#000000'});
            } else if (scroll_pos < 730){
                jQuery('.top-menu-navigation').css({'background-color' : '#ffffff'});
            }
        })
    }); 
```

我很想将`Sticky Top Nav`and`Color Change`功能结合起来，有什么办法吗？我在正确的事情（`document`，`window`）上调用 jQuery 吗？

我使用`jQuery`而不是`$`因为我计划将此作为 Wordpress 网站的静态登录页面。

相关html：

```
 <nav class="top-menu-navigation">

                <ul>
                    <li><a href="">Menu Item 1</a></li>
                    <li><a href="">Menu Item 2</a></li>
                    <li><a href="">Menu Item 3</a>
                        <ul>
                            <li><a href="">Submenu Item 1</a></li>
                            <li><a href="">Submenu Item 2</a>
                                <ul>
                                    <li><a href="">Link 1</a></li>
                                    <li><a href="">Link 2</a></li>
                                    <li><a href="">Link 3</a></li>
                                </ul>
                            </li>
                            <li><a href="">Submenu Item 3</a></li>
                        </ul>
                    </li>
                    <li><a href="">Menu Item 3</a></li>
                </ul>

            </nav> <!-- end top-menu-navigation --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:40:12.947

一个接一个地添加就可以了。

```
// Sticky Top Nav
var NavTop = jQuery('.top-menu-navigation').offset().top;

var scroll_pos = 0;
jQuery(window).scroll(function(){
    if( jQuery(window).scrollTop() > NavTop ) {
        jQuery('.top-menu-navigation').css({position: 'fixed', top: '0px'});
    } else {
        jQuery('.top-menu-navigation').css({position: 'static'});
    }

    // Change Nav Colors on Scrolldown

    scroll_pos = jQuery(this).scrollTop();
        if(scroll_pos > 730){
            jQuery('.top-menu-navigation').css({'background-color' : '#000000'});
        } else if (scroll_pos < 730){
            jQuery('.top-menu-navigation').css({'background-color' : '#ffffff'});
        }
}); 
```

# .net - 为什么 Web Api 返回带有“$ref=”的空 json 结果？

> ID：14682211
> 
> 赞同：6
> 
> 时间：2013-02-04T07:34:23.800
> 
> 标签：.net, json, asp.net-mvc-4, asp.net-web-api

在 Web Api 中返回任何结果之前，我在 EF5 中禁用了延迟加载和代理创建。一切正常。但是，当我开始对`Include()`其他实体进行渴望获取时，一些 JSON 对象看起来像这样：

```
{
$ref: "14"
},
.. correct objects ..
{
$ref: "6"
},
.. 
```

`"$ref"`结果列表中包含什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-04T07:38:33.273

它来自 JSON.NET 序列化程序。它保留了对象引用。看看[`following blog post`](http://johnnycode.com/2012/04/10/serializing-circular-references-with-json-net-and-entity-framework/)。我猜你的对象图中有一些循环引用，而 JSON.NET 正在尽最大努力序列化这个 EF 结构而不会崩溃（这是大多数 JSON 序列化程序无论如何都会做的）。虽然这不是一个标准。

个人建议：**永远不要**序列化你的 EF 实体。始终定义视图模型并让您的 Web API 方法返回仅包含您感兴趣的属性的视图模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-22T14:59:22.667

如果必须序列化 EF 实体，还可以禁用延迟加载。它对我有用。

转到 edmx 文件下的 context.cs 文件，并在构造函数中添加此行。

this.Configuration.LazyLoadingEnabled = false;

# wordpress - 在无需注册的情况下将简报集成到可定制的注册表单以及 wordpress 中的侧边栏

> ID：14682212
> 
> 赞同：0
> 
> 时间：2013-02-04T07:34:29.290
> 
> 标签：wordpress

我最近开始使用 wordpress，对使用的插件了解不多。我目前处于一种情况，我需要制作一个可定制的注册表单，其中包含一个复选框，说明用户是否要订阅时事通讯。此外，用户必须能够在不注册的情况下订阅时事通讯。

我可以在不注册的情况下制作时事通讯，并将时事通讯发送给那些使用电子邮件时事通讯插件订阅时事通讯的用户。

我遇到的另一个插件是 News-letter sign up ，我不确定注册表是否是可定制的，并且无法理解必须将操作定向到哪里......它太复杂了，我无法理解。

此外，当管理员登录时，他必须能够一次向订阅的时事通讯用户以及已选中时事通讯复选框的注册用户发送时事通讯。

我一直在寻找可定制的注册表单，但仍然很困惑如何一次将时事通讯发送给订阅的时事通讯用户以及已选中时事通讯复选框的注册用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:51:04.653

你应该看看重力形式 - [http://www.gravityforms.com/](http://www.gravityforms.com/)

我将在本月更新我的开发人员许可证，如果您参与 Wordpress，这将节省大量时间 - 如果您曾经使用过 Wufoo，那就是这样。通过计算和条件逻辑处理简单的表单到非常复杂的复杂表单。根据您获得的许可证，您可以将 MailChimp 和 Campaign Monitor 集成到您的表单中（您还没有说明您是如何处理时事通讯和订阅的）。

如果您愿意，还有两个不错的免费插件，它们得到了 Mailchimp 和 Campaign Monitor 的认可，并将添加一个注册小部件；

[http://wordpress.org/extend/plugins/mailchimp-widget/](http://wordpress.org/extend/plugins/mailchimp-widget/)

[http://wordpress.org/extend/plugins/ajax-campaign-monitor-forms/](http://wordpress.org/extend/plugins/ajax-campaign-monitor-forms/)

# php - 禁止访问！您无权访问请求的对象。它要么是读保护的，要么是服务器不可读的

> ID：14682216
> 
> 赞同：-1
> 
> 时间：2013-02-04T07:34:46.760
> 
> 标签：php, apache

在将我自己的 php 文件添加到 word press 主题中时，我遇到了这个问题。执行文件时出现以下错误：

> “禁止访问！
> 
> 您无权访问请求的对象。它要么是读保护的，要么是服务器不可读的。
> 
> 如果您认为这是服务器错误，请联系网站管理员。
> 错误 403
> localhost
> Apache/2.4.3 (Win32) OpenSSL/1.0.1c PHP/5.4.7 "

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T07:45:24.410

检查文件夹中是否有任何 .htaccess 文件。可能它本身就给你制造了问题。

# node.js - 确定哪些 node.js 程序正在运行

> ID：14682221
> 
> 赞同：0
> 
> 时间：2013-02-04T07:35:17.650
> 
> 标签：node.js, upstart

有没有办法检查机器上当前正在运行哪些 node.js 服务器？我使用 Upstart 脚本启动了一个 Web 服务器，并且希望在它崩溃时查看或获得某种通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:52:54.133

在 bash shell（终端窗口）中

类型：

ps辅助| grep 节点

:)

# php - 在更改 form_dropdown codeigniter

> ID：14682223
> 
> 赞同：-1
> 
> 时间：2013-02-04T07:35:22.070
> 
> 标签：php, codeigniter

我正在使用 codeigniter 中的 form_dropdown()。

我有表 countrystate(id, countryname, statename)

我填充了国家名称并填写了 form_dropdown('fd_country')。

现在我想根据选定的国名显示州名。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T09:41:15.430

就像我做的那样 [http://help.webhostel.org/h14682223](http://help.webhostel.org/h14682223)

控制器代码

```
public function index() {
        $this->load->database();
        $this->db->select('countryname');
        $this->db->group_by('countryname');
        $query = $this->db->get('country');

        foreach($query->result() as $item)
            $countries[$item->countryname] = $item->countryname;

        $data = array('department' => $countries);

        $this->load->helper('form');
        $this->load->view('welcome_message', $data);
}

public function get_subdepartment() {
    $this->load->database();
    $this->load->helper('form');
    $states = array();  
    if($this->input->post('dep_selected')) {
        $this->db->select('countrystate');
        $this->db->where(array('countryname' => $this->input->post('dep_selected')));
        $query = $this->db->get('country');

        foreach($query->result() as $item)
            $states[$item->countrystate] = $item->countrystate;
    }

    $output = form_dropdown('subdept', $states);
    echo $output;
} 
```

模板部分

```
<script type="text/javascript">
function get_subdepartment() {
    var dep_selected = $('select[name=txtDept]').val();
    $.ajax({
        data: {
            dep_selected: dep_selected,
        },
        type: 'POST',
        url: '/welcome/get_subdepartment',
        success: function(data){
            console.log(data);
            $('.subdepartment').html(data);
        }
    })
}
</script>
<div id="container">
<h1>Welcome to CodeIgniter</h1>
<div id="body">
<? echo form_open("addEmployee"); $newEmp = array('name' => 'newEmployee', 'id' => 'newEmployee', 'value' => set_value('ne')); ?>
    <div for='newEmp'><input type="text" name="txtEmpName" id="txtEmpName" maxlength="25" /></div> 
    <div for='newEmp'>
        <? echo form_dropdown($name = 'txtDept',$Options = $department, array($this->input->post('txtDept')),'onChange="get_subdepartment()"'); ?>
    </div>
    <div for='newEmp' class="subdepartment"></div>
<? echo form_submit('do_submit', 'Submit'); ?>
<? echo form_close(); ?>
</div> 
```

# java - 如何从 jdom 中删除空格或空行

> ID：14682228
> 
> 赞同：2
> 
> 时间：2013-02-04T07:35:33.320
> 
> 标签：java, eclipse-plugin, xml-parsing, jdom

我正在使用 XMLOutputter 类将 Document 对象的内容写入 xml 文件。

但我面临以下问题：当我删除任何子节点时，它会在 Document 对象中创建空白行，并且在将其内容保存到 xml 文件中时，它也会在 xml 文件中显示空白行。

所以这意味着如果我执行 10 次删除操作并保存其内容，那么 xml 文件中将有 10 个空白行。

我浏览了以下链接。这些链接建议使用以下 api：

1.  [http://www.jdom.org/pipermail/jdom-interest/2003-November/013035.html](http://www.jdom.org/pipermail/jdom-interest/2003-November/013035.html)

此链接建议：

```
XMLOutputter fmt = new XMLOutputter();
fmt.setTextTrim(true);  //this would remove all spaces
fmt.setIndent("  ");    // this will do indentation
fmt.setNewlines(true); 
```

1.  [http://www.ibm.com/developerworks/xml/tutorials/xmljava/section5.html](http://www.ibm.com/developerworks/xml/tutorials/xmljava/section5.html)

    SAXBuilder sb = new SAXBuilder();

    文档 doc = sb.build(new File(argv[0]));

    XMLOutputter xo = new XMLOutputter();

    xo.setTrimAllWhite(true);

    xo.output(doc, System.out);

有人可以帮我解决这个问题。

提前致谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:09:25.587

您想删除空格/空白行，还是希望输出格式正确并带有正确的缩进等？

要获得漂亮的缩进，请使用[“漂亮”](http://jdom.org/docs/apidocs/org/jdom2/output/Format.html#getPrettyFormat%28%29)格式？

```
xo.setFormat(Format.getPrettyFormat()); 
```

去除所有不必要的空白使用 Format.getCompactFormat()

滚滚

# android - 安卓注册表单验证

> ID：14682231
> 
> 赞同：0
> 
> 时间：2013-02-04T07:35:49.800
> 
> 标签：android, validation, registration

我应该使用什么方法来验证 android 中的登录注册表单？

一旦用户移动到下一个编辑文本，就应该进行验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:46:15.537

尝试使用EditText 的**setOnFocusChangeListener**。

在 setOnFocusChangeListener 的 onFocusChange 中设置验证码。一旦您的注意力转移，代码/您的验证将执行。

看看下面的代码。

```
edittext.setOnFocusChangeListener(new OnFocusChangeListener() 
{          

                    public void onFocusChange(View v, boolean hasFocus) 
                    {
                        if(!hasFocus)
                        {
                            // your validation code
                        }
                    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:38:38.157

我确定您想验证用户在 EditText 中输入的值，如果是这种情况，那么您可以为 EditText 实现**[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)**。

检查此线程：[如何在 Android 中使用 TextWatcher 类？](https://stackoverflow.com/questions/8543449/how-to-use-textwatcher-in-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T07:46:26.113

根据您的要求..当editText失去焦点时进行验证...

```
edit_Text.setOnFocusChangeListener(new OnFocusChangeListener() {
@Override
public void onFocusChange(View v, boolean hasFocus) {
  if(hasFocus){

  }else
      // Do validation here.....
  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T07:47:56.703

有两种验证方式

1.  在每次现场验证
2.  单击`Button`“类型一的验证”，您需要为`TextWatcher`以下每个字段示例片段实施

    ```
    EdittextFieldName.addTextChangedListener(new TextWatcher() 
    {                    
    @Override

      public void onTextChanged(CharSequence s, int start, int before, int count) {

                        // TODO Auto-generated method stub
                    }

                    @Override
                    public void beforeTextChanged(CharSequence s, int start, int count, int after) {

                        // TODO Auto-generated method stub
                    }

                    @Override
                    public void afterTextChanged(Editable s) {

                        // TODO Auto-generated method stub
                    }
                }); 
    ```

    对于类型 2，您需要根据字段类型检查字段数据验证，例如

    *   电子邮件格式无效
    *   未输入电子邮件
    *   空场
    *   不遵循序列等

# php - 如何使用 PHP 将数据从 .txt 文件复制到 .sql 文件或数据库表中

> ID：14682235
> 
> 赞同：-1
> 
> 时间：2013-02-04T07:36:08.093
> 
> 标签：php, mysql, import

> **可能重复：**
> [使用 php 将大型 csv 文件导入 mysql 数据库](https://stackoverflow.com/questions/3776192/import-large-csv-file-to-mysql-database-using-php)

**1.**我的 public_html 文件夹中有一个名为**un.txt**的 .txt 文件，其中有 4000 个用户名，排列如下：

> 用户名1，用户名2，用户名3，......

**2.**我在数据库**成员中创建了一个名为****oldusernames**的表。该表只有一列名为**oldusers**。我正在使用 MySql。

 ****如何**使用 PHP将文件****un.txt中的所有用户名导入到****oldusers**字段中的数据库（**成员**）表（**oldusernames**）？

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:42:59.270

**步骤（请记住，我们不应该为您编写大量代码）：**

1.  在 PHP 中加载文本文件（[查看 PHP 的文件函数](http://php.net/manual/en/function.fopen.php)）
2.  将字符串拆分为数组元素，用逗号分隔（[查看 PHP 的 explode 函数](http://www.php.net/manual/en/function.explode.php)）
3.  循环遍历每个数组元素并将其插入数据库。

我希望这可以帮助你。********

# excel - 如何在保存之前按住我的 Excel 屏幕

> ID：14682242
> 
> 赞同：0
> 
> 时间：2013-02-04T07:36:35.413
> 
> 标签：excel, vba

下面的代码是格式化在任务栏中打开的 excel 文件。它很好地完成了我的工作。屁股我想在突出显示的步骤上按住我的屏幕一段时间，以便我可以检查结果。谁能给点主意？？？

```
Sub OpenAllWorkbooksnew()
    Set destWB = ActiveWorkbook
    Dim DestCell As Range

    Dim cwb As Workbook
    For Each cwb In Workbooks

        **Call donemovementReport**
        ActiveWorkbook.Close True
        ActiveWorkbook.Close False
    Next cwb
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:41:10.697

你可以只使用一个断点： http: [//www.wiseowl.co.uk/blog/s196/breakpoints.htm](http://www.wiseowl.co.uk/blog/s196/breakpoints.htm)

这不是最干净的方法，但如果此电子表格仅供您使用，那么这是一种非常简单有效的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:06:55.033

如果您可以控制每个工作簿，则可以在每个工作簿中创建一个名为“已检查”的命名范围，并按如下方式更改您的代码...

```
Sub OpenAllWorkbooksnew()
    Set destWB = ActiveWorkbook
    Dim DestCell As Range

    Dim cwb As Workbook
    For Each cwb In Workbooks

        'ensure "Checked" flag is reset
        cwb.Names("Checked").RefersToRange.Value = "Unchecked"

        'bring workbook to focus
        cwb.Activate

        'wait until "Checked" flag is changed to "OK"
        Do Until cwb.Names("Checked").RefersToRange.Value <> "Unchecked"
            DoEvents
        Loop

        'check result and action accordingly
        If UCase(cwb.Names("Checked").RefersToRange.Value) = "OK" Then
            ActiveWorkbook.Close True
        ElseIf UCase(cwb.Names("Checked").RefersToRange.Value) = "ERROR" Then
            ActiveWorkbook.Close False
        End If
    Next cwb
End Sub 
```

如果您对循环通过的每个工作簿没有这样的控制级别，则可以使用相同的方法，但使用功能区/命令栏（取决于您的 Excel 版本）。如果没有关于如何准确调用此代码等的额外信息，就很难再具体化了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T08:47:53.120

您可以使用`Stop`暂停代码。例如

```
Option Explicit

Sub Sample()
    Debug.Print "1"

    Stop

    Debug.Print "2"
End Sub 
```

# github - 为什么在 GitHub 中分叉存储库的大小如此之大？

> ID：14682245
> 
> 赞同：4
> 
> 时间：2013-02-04T07:36:39.877
> 
> 标签：github, wireshark

我是[github](http://github.com/)的新手，需要通过分析[wireshark](http://github.com/avsej/wireshark)的源代码来了解它。源代码显然是**23 MB**左右，但如果我尝试从网站提供的链接中进行 git clone ，结果是大约**636 MB**。

有人可以解释一下为什么克隆与源代码相比如此之大吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T07:41:57.457

当您使用`git`... 克隆存储库时，这就是您正在做的事情；克隆*存储库*。您将获得所有分支及其历史记录，而不仅仅是`master`.

如果您真的想要，您可以获取`master`（或特定分支） - 请参阅：[仅克隆一个分支](https://stackoverflow.com/questions/4811434/git-clone-only-one-branch)

# mongodb - mongo db - 在 webapp 中实现类似功能的模式

> ID：14682249
> 
> 赞同：6
> 
> 时间：2013-02-04T07:36:51.373
> 
> 标签：mongodb, database, nosql

我有一个 mongodb 数据库，其中有 2 个集合。`posts`和`users`。

帖子json结构就像

```
{title:"Title", content:"content goes here", postedby: "userid"} 
```

用户就像

```
{username:"", name:""} 
```

现在我需要实现一个类似的功能，用户喜欢这些帖子。

**解决方案 1**

我可以在用户中放置一个内部数组，例如

```
{username:"", name:"", likes:[postid1,postid2..]} 
```

这里的问题是它很容易查询用户喜欢的帖子。但是很难得到喜欢文章的人。

**解决方案 2**

我可以在帖子中放置一个内部数组，例如

```
{title:"Title", content:"content goes here", postedby: "userid", like:[userid1,userid2 ..]} 
```

这里的问题是很容易获得喜欢文章的人。但很难查询用户喜欢的帖子。

我该如何解决这个问题？目前我正在考虑两种方式。就像在两个集合中保留内部数组一样。我知道我保留了冗余数据，这是解决此问题的最佳方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T09:50:42.800

我个人不会在这里选择类似的数组。

喜欢太多帖子的人喜欢失去控制是很常见的；以至于这可能会阻碍您可以存储在该文档中的顶级用户数据量。

您还必须在这里考虑您的查询模式。您很可能希望对多个用户的点赞数进行某种图形聚合。目前要动态地做这样的事情，你必须使用聚合框架：[http](http://docs.mongodb.org/manual/applications/aggregation/) ://docs.mongodb.org/manual/applications/aggregation/ （预聚合报告：[http ://docs.mongodb.org/manual/use- case/pre-aggregated-reports/](http://docs.mongodb.org/manual/use-cases/pre-aggregated-reports/)在这里也是一个有用的工具，但我会跳过它）使用`$unwind`.

`$unwind`是一种内存中操作，对于许多用户的远距离聚合可能会很慢，特别是如果每​​个用户至少有 1000 个喜欢（50x1000 已经在推动内存限制`$unwind`和 post`$group` `$sort`的内存限制为 10%系统内存）。总而言之，聚合框架不会是查询这些喜欢的性能方法。

MongoDB 可以很容易地存储这个结构，即使是在它的 gorwing 形式中，因为每个条目的子文档可能是 12 个字节，所以你可以使用 2 个大小的幂（[http://docs.mongodb.org/manual/reference/command/ collMod/#usePowerOf2Sizes](http://docs.mongodb.org/manual/reference/command/collMod/#usePowerOf2Sizes)）分配以解决使用该结构通常会遇到的问题（碎片化）。

所以考虑到这一点，我会把喜欢的东西放在一个单独的集合中。确实，您将失去用户文档中包含喜欢的单次往返表示，但我相信我上面所说的值得付出代价。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T20:19:37.140

要问自己的一个重要问题是获取这些数据需要哪些不同的方法？

您*可以*在第一种情况下查询喜欢特定页面的用户`user.find({"likes":postId})`，在第二种情况下查询与该页面相反的查询。但这是个好主意吗？您希望避免在 MongoDB 中不断增长的文档，而且您可能不想知道特定用户的*所有*他们喜欢的页面，以及特定页面的*所有*用户喜欢它。

那么如何将喜欢保存在他们自己的集合中，并且只在用户和页面集合中保留聚合（即计数）？您还可以选择在页面中保留最近的“N”个赞，或者对您的应用程序及其性能最有用的任何其他内容。

在不了解用例（即读写模式）以及围绕它的需求的情况下，很少有可能在 MongoDB 中设计“理想”模式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-04T08:49:58.067

我认为仅将喜欢的数组保留在 post 文档中就足够了。

您可以使用like 字段获取用户喜欢的帖子。如果您在类似字段上有索引，性能也会很好。

唯一的缺点是，使用这种方法，post 对象的大小会根据类似数组的长度而变化。Mongo 不是很擅长处理这类数据结构，所以如果你对一个帖子有数千个赞，保留所有 id 可能会降低查询性能，但一般来说帖子没有那么多赞，总的来说你的我相信系统会正常工作。您可能会考虑限制帖子的点赞 id 数量（例如，保留最后 1000 个用户 id）以确保文档的大小不会过度增长。

# openerp - openerp 按钮中 type="action" 的名称

> ID：14682253
> 
> 赞同：3
> 
> 时间：2013-02-04T07:37:16.537
> 
> 标签：openerp

我想在 中制作按钮时遇到问题`type="action"`，它与`type="object"`. 我只想制作可以将一个模块连接到另一个模块的按钮。它已经存在于 openerp 中，用于`type="action"`. 我只是想了解`"name"`这个按钮的作用是什么？

我有一个例子，我在后端销售文件夹中找到了这个 xml 脚本：

```
<button name="%(action_view_sale_advance_payment_inv)d"
 string="Create Invoice"
 type="action"
 states="manual"
 class="oe_highlight"
 groups="base.group_user"/> 
```

当我安装销售模块时，我在前端看到 xml 脚本`sale.order.form`，它已经变成：

```
<button name="278"
 string="Create Invoice"
 type="action"
 states="manual"
 class="oe_highlight"
 groups="base.group_user"/> 
```

发生了`"name"`什么？谁能给我一个简单的按钮`type="action"`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-04T08:11:01.940

按钮有三种类型： **对象**、**动作**和**工作流**。**工作流程**是默认设置。

现在让我们了解这三种类型的含义：

1.  `object`如果要调用写入文件中的**方法**`.py`，则使用。

2.  `action`如果您想调用写入文件中的任何**操作**`.xml`，则使用此选项。假设您想通过单击按钮打开向导，那么您可以使用`type="action"`.

3.  `workflow`如果要调用**workflow** ，则使用（默认值） 。

* * *

```
<button name="%(action_view_sale_advance_payment_inv)d"
 string="Create Invoice"
 type="action"> 
```

**单击创建发票**按钮时，您将看到一个向导。

```
<button name="278" string="Create Invoice" type="action"> 
```

这`278`是postgresql 操作数据库中的**ID**`action_view_sale_advance_payment_inv`。

# opengl - OpenGL - 将矢量传递到 glDrawElements()

> ID：14682254
> 
> 赞同：0
> 
> 时间：2013-02-04T07:37:21.140
> 
> 标签：opengl, vector

我试图将一个向量传递给 glDrawElements() 的最后一个参数。如果我使用数组，它工作得很好。但是，当我切换到矢量时，它只渲染了对象的一部分。

这工作得很好：

```
//TA_CartesianSys.h
class TA_CartesianSys
{
    private:
        int drawOrder[86];
    //the rest of the class
}

//---------------------------------
//TA_CartesianSys.cpp
TA_CartesianSys::TA_CartesianSys()
{
    GLfloat CartesianVertices[] = { ... };
    int tempOrder[] = { ... };
    for(int i = 0; i < sizeof(tempOrder) / sizeof(int); i++)
    {
         drawOrder[i] = tempOrder[i];
    }
    //Code to generate and bind vertex array and buffer
    glDrawElements(GL_LINES, sizeof(drawOrder)/sizeof(int), GL_UNSIGNED_INT, drawOrder);
} 
```

它按预期工作，这就是它的样子：

![在此处输入图像描述](../Images/3298e4803a376b7956c6db234570b0f7.png)

现在，我决定对 drawOrder[] 使用向量而不是数组。这是新代码：

```
//TA_CartesianSys.h
class TA_CartesianSys
{
    private:
    std::vector<int> drawOrder; //***NOTE: This is the change   
    //the rest of the class
}
//---------------------------------
//TA_CartesianSys.cpp
TA_CartesianSys::TA_CartesianSys()
{
    GLfloat CartesianVertices[] = { ... };
    int tempOrder[] = { ... };

    drawOrder.resize(sizeof(tempOrder) / sizeof(int));
    for(int i = 0; i < (sizeof(tempOrder) / sizeof(int)); i++)
    {
        drawOrder[i] = tempOrder[i];
    }

    //Code to generate and bind vertex array and buffer - Same as above

    glDrawElements(GL_LINES, sizeof(drawOrder)/sizeof(int), GL_UNSIGNED_INT, &drawOrder[0]);
} 
```

这就是我运行程序时得到的结果：

![在此处输入图像描述](../Images/5c082394292bc2e7faf8ecf31cf21906.png)

注意：中间的正方形不是这个对象的一部分。它属于一个完全不同的类别。

所以，基本上，当我将 drawOrder[] 更改为向量而不是数组时，只渲染了我的对象的一小部分（2 行）。其余的都没有看到。

我在 draw() 函数处设置了一个断点，它表明 drawOrder 向量已正确初始化，其值与其数组计数器部分完全相同。

![在此处输入图像描述](../Images/2a924978e42745af850106c89dc3cf5d.png)

那么，为什么我只得到 2 行而不是整个网格？我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T07:48:34.393

`sizeof`在矢量对象上只告诉您矢量类实例的大小，而不是元素的数量。你想要的是std::vector 的size 成员函数，它告诉你元素的数量（即你不能将std::vector::size 返回的数字除以元素sizeof）。

```
glDrawElements(
    GL_LINES,
    drawOrder.size(), // <<<<<
    GL_UNSIGNED_INT,
    &drawOrder[0] ); 
```

# php - 将 HTML 表单数据发布到 php（调试）

> ID：14682258
> 
> 赞同：0
> 
> 时间：2013-02-04T07:37:44.533
> 
> 标签：php, html, forms, post

我创建了一个简单的表单，它允许用户根据自己的选择添加和删除行。在用户决定添加多少行并相应地填充表单后，提交后，我想发布数据，以便我可以使用 .php 脚本将数据上传到服务器上。

我已经测试了添加和删除行的功能。当我单击提交按钮时，它会将我重定向到 upload.php，但在该页面上，我看到一个错误：“未定义索引：奖励”，这让我认为数据没有正确发送。

我下面的实现有问题吗？

HTML

```
<button onclick="addRow();">Add Row</button>
<form method="post" action="upload.php">
    <table border="1" id="optionsTable">
        <tr>
        <td>Header1</td>
        <td>Header2</td>
        <td>Delete</td>
        </tr>

        <tr id="templateRow" style="display:none">
        <td><input type="text" id="reward" /></td>
        <td><input type="text" id="duration" /></td>
    <td><input type="button" id="deleteOption" value="Delete"     onclick="delRow(this)"/></td>
        </tr>
    </table>

    <input type="submit" value="Submit" />
</form>

</body>
</html>

<script>
var maxID = 0;
function getTemplateRow() {
    var x = document.getElementById("templateRow").cloneNode(true);
    x.id = "";
    x.style.display = "";
    x.innerHTML = x.innerHTML.replace(/{id}/, ++maxID);
    return x;
}
function addRow() {
    var t = document.getElementById("optionsTable");
    var rows = t.getElementsByTagName("tr");
    var r = rows[rows.length - 1];
    r.parentNode.insertBefore(getTemplateRow(), r);
}
function delRow(row) {
    var i=row.parentNode.parentNode.rowIndex;
    document.getElementById('optionsTable').deleteRow(i);
}

</script> 
```

我现在只使用upload.php进行调试，所以那里只有一个命令：echo($_POST['reward']);

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T07:39:58.387

输入需要一个属性`name`。例如：

`<input type="text" id="reward" name="reward" />`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T07:40:20.243

您需要为输入定义名称。

```
<input type="text" id="reward" /> 
```

到

```
<input type="text" id="reward" name="reward"/> 
```

# c - 在 C 中解析逗号分隔的文件

> ID：14682266
> 
> 赞同：0
> 
> 时间：2013-02-04T07:38:18.203
> 
> 标签：c, parsing

我正在尝试解析 C 中的文件，该文件由一组数字（每行一个）组成。每组以逗号分隔。出于某种原因，我得到了不正确的输出。

示例输入：1,2,4,8,55,777 输出：一堆似乎是内存地址的东西。当我打印出字符串时，它的读数不是 55 或 777（或任何超过两位数的数字）。

```
int * parseFile(char *input, int *set, int line)
{
    char buf[BUF_SIZE];
    char *token = (char *) malloc(10 * sizeof(char));
    int i;

    FILE *f = fopen(input, "r");

    for (i = 1; i < line; i++)
        fgets(buf, BUF_SIZE, f);

    memset(buf, 0, BUF_SIZE); // Clear the buffer.
    i = 0;

    if (fgets(buf, BUF_SIZE, f) != NULL) {
        token = strtok(buf, ",");
        set[i] = atoi(token);
        i++;

       while (set[i] != 0) {
            printf("%d\n", set[i]);
            set[i] = atoi(token);
            i++;

            token = strtok(NULL, ",");
        }
    }

    fclose(f);

    return set;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:14:07.343

我喜欢这个

```
 if (fgets(buf, BUF_SIZE, f) != NULL) {
    token = strtok(buf, ",");
    for (i=0; token != NULL; i++) {
      set[i] = atoi(token);
      // Optional: if (set[i] == 0) break; // I don't know why to stop on 0
      printf("%d\n", set[i]);
      token = strtok(NULL, ",");
    }
  } 
```

休息有点难看，但总比

for (i=0; (token != NULL) && ((set[i] = atoi(token)) != 0); i++) {

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:54:11.600

在将 atoi 的值分配给它之前，您正在打印 set[i] 的值。考虑：

```
set[i] = atoi(token);
printf("%d,",set[i]); 

while (set[i] != 0) {
    i++;
    set[i] = atoi(token);
    printf("%d,",set[i]); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T07:54:23.143

我对此感到非常困惑：

```
set[i] = atoi(token); //i = 0
i++; //i = 1

while (set[i] != 0) { //set[1] = ???
  printf(...set[i]); 
  set[i] = atoi(token);
  i++;
  ... 
```

因此，根据数组“set”的先前内容，您决定是否读取下一个值。所以，如果你做了一个“memset(set, 0, sizeof(set));” 你实际上读了一行。如果你没有清除“set”，如果可能包含垃圾，你在读取下一个值之前“printf()”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T08:15:15.930

您可以使用`fscanf()`

在循环中使用以下内容`fscanf()`，直到到达文件末尾：

```
int a,b,c,d,e,x;
while (fscanf(f, " %d , %d , %d , %d, %d , %d", &a, &b, &c, &d, &e, &x) != EOF) {....} 
```

# ruby-on-rails - ！Heroku 推送被拒绝，无法编译 Ruby/rails 应用程序

> ID：14682267
> 
> 赞同：-3
> 
> 时间：2013-02-04T07:38:17.843
> 
> 标签：ruby-on-rails

```
 --with-opt-dir
   --without-opt-dir
   --with-opt-include
   --without-opt-include=${opt-dir}/include
   --with-opt-lib
   --without-opt-lib=${opt-dir}/lib
   --with-make-prog
   --without-make-prog
   --srcdir=.
   --curdir
   --ruby=/usr/local/bin/ruby
   --with-sqlite3-dir
   --without-sqlite3-dir
   --with-sqlite3-include
   --without-sqlite3-include=${sqlite3-dir}/include
   --with-sqlite3-lib
   --without-sqlite3-lib=${sqlite3-dir}/lib
   --enable-local
   --disable-local
   Gem files will remain installed in /tmp/build_3dsid22g5kvhv/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.7 for inspection.
   Results logged to /tmp/build_3dsid22g5kvhv/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.7/ext/sqlite3/gem_make.out
   An error occurred while installing sqlite3 (1.3.7), and Bundler cannot continue.
   Make sure that `gem install sqlite3 -v '1.3.7'` succeeds before bundling.

 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:06:00.457

如果您在系统上配置了 postgre，那么您可以替换

> 宝石“sqlite3”

和

> 宝石“pg”

否则，添加

> 组：开发做gem“sqlite3”结束组：生产做gem“pg”结束

并运行捆绑为

> 捆绑安装——不生产

然后推它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:41:02.253

heroku 使用 postgresql，所以如果你打算部署到 heroku，你也应该在开发时使用它。在您的 Gemfile 中，删除该行`gem 'sqlite3'`并将其替换为`gem 'pg'`. 您需要先安装 pg 服务器。

# node.js - 删除 mongo 记录

> ID：14682274
> 
> 赞同：1
> 
> 时间：2013-02-04T07:38:56.343
> 
> 标签：node.js, mongodb, mongoose

我有一个像父进程及其子进程这样的 mongo db 设计，我在 mongo 中只有一层关系，当父进程被删除时，我需要删除所有进程。

```
{
        "documentId" : ObjectId("510bb7eabc6f30f807043242318"),
        "processId" : 2206755353999,
        "parentProcessId" : null,
}

{
        "documentId" : ObjectId("510bba1f88c172f4153252301d"),
        "processId" : 2206755357078,
        "parentProcessId" : 2206755353999,
}

{
        "documentId" : ObjectId("510bba1f88c172f415005435435d"),
        "processId" : 2206755356068,
        "parentProcessId" : 2206755357078,
} 
```

**我想在删除第一个进程ID “processId”**的同时删除整个上述文档 ：2206755353999

 **我正在使用 node.js、mongooose 和 mongo。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T07:41:48.900

没有“级联删除”，特别是对于您的自定义树结构。您必须自己删除所有孩子（提示：首先发现孩子，*然后*开始删除记录）**

# android - 在 Android 中使用线程

> ID：14682277
> 
> 赞同：1
> 
> 时间：2013-02-04T07:39:05.893
> 
> 标签：android, multithreading

我想在这个程序中使用线程，因为它在当前状态下使用 UI 线程。当 UI 线程将控制权传递给新创建的线程时，我需要其他进程来使用 UI 线程。

如何在这段代码中使用线程结构？

```
public class Ping extends Activity implements OnClickListener 
{
  Button pingButton;
  TextView pingText;
  EditText pingCommand;
  String address;

  @Override
  protected void onCreate(Bundle savedInstanceState) 
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_ping);
    pingButton = (Button) findViewById(R.id.bPing);
    pingCommand = (EditText) findViewById(R.id.tPingCommand);
    pingText = (TextView) findViewById(R.id.tReturnResult);
    pingButton.setOnClickListener(this);
  }

  public void ping() 
  {
    try {
      Process process = Runtime.getRuntime().exec("ping -c 8 " + address);
      BufferedReader reader = 
           new BufferedReader(new InputStreamReader(process.getInputStream()));
      int i;
      char[] buffer = new char[4096];
      StringBuffer output = new StringBuffer();
      while ((i = reader.read(buffer)) > 0) {
        output.append(buffer, 0, i);
        pingText.setText(output);
      }
      reader.close();
    } catch (IOException e) {
      e.printStackTrace();
    }
  }

  @Override
  public void onClick(View arg0) {
    address = pingCommand.getText().toString();
    ping();
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:54:13.770

尝试这个：

```
new Thread(new Runnable(){ public void run(){
   try {
      address = pingCommand.getText().toString();
      int packetNum = packetNumber.getId();
      ping(address,packetNum);
      ping();
      Thread.sleep(5000);
      dialog.dismiss();
   } catch (InterruptedException e) {
      e.printStackTrace();
   }
 }
}).start() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:56:50.100

尝试使用[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)

在 UI 线程上运行指定的操作。如果当前线程是 UI 线程，则立即执行该操作。如果当前线程不是 UI 线程，则将动作发布到 UI 线程的事件队列中。

```
runOnUiThread(new Runnable(){
    @Override
    public void run(){
        // change UI elements here
        //ping()
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T07:42:23.613

通过使用[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)：

```
public YourTask extends AsyncTask<Object,Object,Object>{ 

    protected void doInBackground(Object o){
        ping();
    }
}

@Override
public void onClick(View arg0) {
    // TODO Auto-generated method stub
    address = pingCommand.getText().toString();
    // int packetNum = packetNumber.getId();
    // ping(address,packetNum);
    new YourTask().execute();
} 
```

# performance - perl如何在一个目录中搜索多个关键字

> ID：14682278
> 
> 赞同：0
> 
> 时间：2013-02-04T07:39:06.517
> 
> 标签：performance, perl, search, parallel-processing, multiprocessing

我在性能方面面临很大问题。我必须在包含大约 600 个子目录的巨大目录（30 gb）中的文件中搜索关键字（其中将再次包含许多子目录）。

目前我将子目录拆分为 50 个文本文件，因此每个文件将获得 12 个子目录名称并运行所有 50 个进程并行。

```
my $pm = Parallel::ForkManager->new($lines);

# Forks and returns the pid for the child:
my $pid = $pm->start and next;

# we are now in the child process
ucm5 ("-iinput.txt","-f$data"); - here $data will be text file names(text1,text2...text50)
--input.txt will have the multiple search keywords(hi , hello)

$pm->finish; # Terminates the child process

#!/usr/bin/perl
sub ucm5 {
local @ARGV = @_;
use strict;
use warnings;  
use File::Find;
use Getopt::Std;
#getting the input parameters
getopts('i:f:');

our($opt_i, $opt_f);
my $searchKeyword = $opt_i;                               #Search keyword file.
my $intfSplit = $opt_f;                               #split file
my $path = "C:/";                           #source directory
my $searchString;                                   #search keyword

open FH, ">>log.txt";                                          #open the log file to write

print FH "$intfSplit ". "started at ".(localtime)."\n";       #write the log file

open (FILE,$intfSplit);                                       #open the split file to read

while(<FILE>){

   my $intf= $_;                                              #setting the interface to intf
   chomp($intf);
   my $dir = $path.$intf;
   chomp($dir);
   print "$dir \n";                                              
   open(INP,$searchKeyword);                                  #open the search keyword file to read

   while (<INP>){      

   $searchString =$_;                                         #setting the search keyword to string
   chomp($searchString);
   print "$searchString \n";
   #open my $out, ">", "vob$intfSplit.txt" or die $!;          #open the vobintfSplit_* file to write
   open my $out, ">", "vob$intfSplit.txt" or die $!;
#calling subroutine printFile to find and print the path of element

#the subroutine will search for the keyword and print the path if keyword is exist in file.
my $printFile = sub {
   my $element = $_;

   if(-f $element && $element =~ /\.*$/){ 

      open my $in, "<", $element or die $!;
      while(<$in>) {
         if (/\Q$searchString\E/) {
            my $last_update_time = (stat($element))[9];
            my $timestamp  = localtime($last_update_time);
            print $out "$File::Find::name". "     $element"."     $timestamp". "     $searchString\n";
            last;
          }
        }
      }
    };
find(\&$printFile,$dir);  
  }
}
print FH "$intfSplit ". "ended at ".(localtime)."\n";         #write the log file
}
1; 
```

代码可能有点混乱，我将解释它在做什么 - 在第一个 while 循环中，它打开包含子目录的文本文件，然后在另一个 while 循环中打开包含搜索词 (hi,hello) 的文本文件。在该 file::find 中将被调用以搜索子目录中的关键字。

现在发生的事情是它进入第一个子目录并搜索第一个关键字（HI），一旦完成，它就会再次进入同一个目录并搜索下一个关键字（Hello），这意味着读取同一个目录两次。

但我想在第一次阅读时搜索这两个关键字，这将节省大量时间。我的输出应该有路径、文件名、搜索字。

例子

C:/aims/if/sp/abcd.sql abcd.sql 你好

C:/aims/if/sp/abcd.sql abcd.sql 你好

请在这个问题上帮助我。除了并行处理和线程之外，还有其他更好的方法来搜索具有多个关键字的所有 600 个子目录吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:08:16.067

您可能只想一次性匹配所有关键字，因此只需扫描文件一次。

下面的代码将查找“hello”或“test”并在输入中打印任何匹配的行。如果您想在关键字上使用 quotemeta() 以防止将正则表达式模式嵌入到您的单词中，可能值得考虑

```
while (<>) {
    if (/\b(hello|test)\b/i) { print "$1: $_" }
} 
```

\b 匹配单词边界（因此它不会匹配“testing”）并且 /i 使整个测试用例不敏感。匹配的单词以 $1 结尾。

* * *

编辑：更完整的示例显示如何处理多个匹配项。

假设我们有一个示例文件 /tmp/test.txt 和一个 perl 脚本 match.pl（在我的示例中它只处理一个文件）。

测试数据：

```
This is a test
Line two
And this is line three 
```

剧本：

```
#!perl
use v5.10;
use warnings;
use File::Slurp;
my $contents = read_file('/tmp/test.txt');

my @raw_matches = $contents =~ /(test|line)/gi;

my %match_counts;
foreach (@raw_matches) {
    $match_counts{ lc($_) }++;
}

my @unique_matches = sort keys %match_counts;
foreach (@unique_matches) {
    say "$_ : count = $match_counts{$_}";
} 
```

样本输出：

```
line : count = 2
test : count = 1 
```

现在，这确实依赖于能够将整个文件读入脚本中的内存，但是您没有提到任何大文件，只是需要处理很多文件。上面的例子可能会用更短的方式来表达，但希望每个部分都在做什么很清楚。

将上述内容转换为每个文件可以调用一次的函数应该足够简单。

# cookies - 以编程方式记录 Adword 转换

> ID：14682279
> 
> 赞同：4
> 
> 时间：2013-02-04T07:39:11.727
> 
> 标签：cookies, google-ads-api

我们的 Adword 广告系列存在访问者资格问题。具体来说，通常不知道我们销售的软件是做什么的访问者仍然*下载试用版*（尽管我们试图在登录页面上向他解释它的作用）并在我们的 Adword 统计信息中计为 +1 记录的转化。由于 Adword 似乎足够聪明，可以最大限度地提高转化率#，它最终为我们带来了大量不合格的访问者。*因此，我们需要在下载试*运行之后的某个时间以不同的方式定义什么是转换。

将转化定义为销售的选择并不好，因为我们的大多数用户都是专业员工。在这种情况下，大多数情况下购买产品的机器不是第一次下载的机器。

我能想到的最佳转换定义是我们产品的首次成功运行（我们称之为*评估*）。事实上，通过跟踪所发生的事情，我们已经断言只有合格的访问者/下载者才能正确评估我们的产品，大部分时间都在用于下载试用位的同一台机器上。

我们的产品是使用.NET平台开发的丰富的UI程序。为了实现*在评估中记录的转化*，我们需要以编程方式读取所有已安装的浏览器 cookie（有一个免费[库](http://www.codeproject.com/Articles/330142/Cookie-Quest-A-Quest-to-Read-Cookies-from-Four-Pop)），如果我们找到与我们的产品对应的**Adword 转化跟踪 cookie ，我们可以：**

*   *在感谢您评估*包含 Adword 转换 javascript（*浏览器内*场景）的产品页面上以编程方式启动相关浏览器。
*   或者，如果可能的话，最好使用 cookie 中的数据以编程方式 ping Adword 服务器（*浏览器外*场景）。

我不是这些技术的专家，所以我可能会遗漏一些东西。尽管在网络上进行了大量搜索，但在这种情况下我没有找到任何有价值的资源。任何帮助，将不胜感激。

# bluetooth-lowenergy - 蓝牙低功耗 TI CC2540 命令取消连接请求

> ID：14682283
> 
> 赞同：0
> 
> 时间：2013-02-04T07:39:19.777
> 
> 标签：bluetooth-lowenergy

我已经为 TI CC2540 蓝牙 LE 芯片开发了 c# 应用程序，它可以正常工作并像 btool 一样执行所有任务。我有一个困难是，在我的应用程序中，有一种情况是我需要连接到钥匙扣而不检查它是否是广告。在这种情况下，如果密钥卡未处于广告模式并且如果我发送连接它的命令，它会堆积在 USB 阅读器中，这就是为什么它也无法连接到其他密钥卡的下一个密钥卡连接命令...

那么有什么方法可以清空usb阅读器中的所有堆叠命令或至少有任何命令来取消连接请求......（如DeviceDiscovery和scanDeviceDiscoveryCancel）

谢谢你...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:26:48.883

是的，应该有，在蓝牙 HCI 级别有一个取消连接请求的 HCI 命令，因此您使用的工具也应该提供一个，您应该查看供应商的文档或询问他们。

# eclipse - 在 Eclipse 中自动更新格式化程序

> ID：14682286
> 
> 赞同：12
> 
> 时间：2013-02-04T07:39:28.560
> 
> 标签：eclipse, formatter, eclipse-formatter

我们在项目中依赖 Eclipse 格式化程序来为我们强制执行格式化约定。它工作得很好，我们真的很喜欢它。

我们将格式化程序文件与我们的项目一起保存在源代码控制中，并要求每个人将此格式化程序导入 Eclipse。唯一严重的问题是，每当有人修改格式化程序并提交更改时，每个团队成员都需要手动“重新导入”格式化程序。而且很容易忘记这样做，因此我们经常在团队中使用不同版本的格式化程序。

有没有办法让 Eclipse 在更新格式化程序文件时自动使用新版本的格式化程序？（我的意思是，我们可以对 Eclipse 说“这是格式化程序文件的路径，总是使用这个文件的当前版本作为格式化程序”吗？）那太好了！

有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-13T13:17:42.693

**介绍**

格式化程序、代码模板等可以作为*项目特定设置*存储在文件夹中`.settings/`。您不一定需要在*工作区*中重新导入 Formatter 。

您可以结合使用项目特定设置在项目中`svn:externals`“注入”格式化程序、代码模板等。

> **[svn：外部：](http://svnbook.red-bean.com/en/1.0/ch07s03.html)**
> 
> 有时构建一个由许多不同的结帐组成的工作副本很有用。例如，您可能希望不同的子目录来自存储库中的不同位置，或者可能完全来自不同的存储库。

**项目**

1.  我们有一个名为的 java 项目`com.xyz.codeconventions`，我们在其中添加了项目特定的格式化程序和代码模板。该项目受版本控制。
2.  对于所有其他项目，我们定义一个`svn:externals`属性来“注入”`.settings/`项目`com.xyz.codeconventions`中的文件夹（这是存储项目特定数据的文件夹）
3.  如果您现在想要更改格式化程序，您可以编辑项目`com.xyz.codeconventions`并使用`svn commit`来提交更改。团队必须`svn update`在所有项目上获得最新版本的代码格式化程序。

**配置**

对于应该使用此格式化程序的所有项目，您必须定义一个 svn:externals 属性。

com.xyz.project1 的示例：

```
核心价值
---- ------
svn:externals http://path/to/com.xyz.codeconventions/.settings .settings

```

在 Eclipse（在我的情况下是 Subversive）中，您可以使用`Team -> Set property...`.

![](../Images/d29f20b0c271973728a5ff7c03eb687a.png)

**存储库布局**

在我们的案例中，存储库结构如下所示：

```
<根>
   |
   +-- com.xyz.project1 # (svn:externals -> <root>/codeconventions/.settings .settings)
   | |
   | +-- 源代码
   | +-- <...>
   +-- com.xyz.project2 # (svn:externals -> <root>/codeconventions/.settings .settings)
   | |
   | +-- 源代码
   | +-- <...>
   +-- com.xyz.codeconventions
        |
        +-- .settings #（这个文件夹将在 project1 和 project2 中“注入”）
             |
             +-- org.eclipse.jdt.core.prefs
             +-- org.eclipse.jdt.ui.prefs

```

**附加评论/限制**

*   这种方法仅适用于`svn`用户，但如果您使用`git`类似于 svn:externals 的名称[Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)。
*   确保 project1 和 project2 中没有`.settings/`-folder，因为`svn:externals`无法覆盖现有文件。
*   如果您的 java 项目需要完全不同的格式化程序或文件`.settings/`夹中的不同文件，那么这种方法可能不是您想要的。我们的项目总是有相同的`.settings`文件。

**来源**

*   [SVN：外部定义](http://svnbook.red-bean.com/en/1.5/svn.advanced.externals.html)
*   [SVN：TortoiseSVN - 外部项目](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-externals.html)
*   [Git：工具 - 子模块](http://git-scm.com/book/en/Git-Tools-Submodules)
*   [Git：使用子树合并](https://help.github.com/articles/working-with-subtree-merge)
*   [Eclipse 帮助：代码格式化程序首选项](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/preferences/java/codestyle/ref-preferences-formatter.htm)
*   [Eclipse 提示：共享 Java 项目设置](http://www.vasanth.in/2005/07/13/eclipse-tip-sharing-java-project-settings/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:45:46.420

如果我正确理解你的问题，你想要：

1.  所有团队成员共享相同的 checkstyle 配置
2.  任何更改后，所有团队成员都会自动使用最新版本的配置

我的猜测是，每次修改时，你们每个人都会手动将配置导入到 eclipse 中。

您可以将 eclipse 配置为使用远程配置文件，而不是将文件直接导入 eclipse。

![eclipse checkstyle首选项](../Images/b49077f2900697429af1f3763918eb39.png)

该配置将适用于 eclipse 下的所有项目，并且将是最新的。整个过程在此处[使用团队通用 Checkstyle 规则进行](http://www.vogella.com/articles/Checkstyle/article.html#checkstyle_remoteaccess)说明。这需要所有团队成员设置一次 eclipse。

另一方面，如果您使用的是**maven ，则可以使用 maven-eclipse-plugin 来描述要使用的 checkstyle 文件。**只需将 maven 项目导入 eclipse 即可完成配置。

```
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-eclipse-plugin</artifactId>
<version>2.8</version>
<configuration>
    <additionalBuildcommands>
        <buildcommand>net.sf.eclipsecs.core.CheckstyleBuilder</buildcommand>
    </additionalBuildcommands>
    <additionalProjectnatures>
        <projectnature>net.sf.eclipsecs.core.CheckstyleNature</projectnature>
    </additionalProjectnatures>
    <additionalConfig>
        <file>
            <name>.checkstyle</name>
            <location>${URL}/eclipse-checkstyle.xml</location>
        </file>
    </additionalConfig>
</configuration>
.... 
```

您可以在以下文章[Maven Checkstyle 和 Eclipse中查看 maven 配置的完整详细信息](http://jgonian.wordpress.com/2010/12/12/maven-checkstyle-and-eclipse/)

# php - 在 HTTP Request 类中实现不同的请求方法

> ID：14682287
> 
> 赞同：0
> 
> 时间：2013-02-04T07:39:27.610
> 
> 标签：php, oop, http, httprequest

我目前正在编写自己的**HTTP 请求**类，但遇到了一个小问题。您可能知道，PHP 中有许多请求方法，例如*OPTIONS*、*GET*、*POST*、*PUT*、*HEAD*等，但您不能在一个请求中混合使用两个或多个。这就是我的问题开始的地方。

我有 HTTPRequest 类，它有两个静态方法，创建它的实例 - **create()**，创建自定义 HTTP 请求和**createFromGlobals()**，创建服务器收到的当前请求的实例。

所以有什么问题？问题是，我想找到一些方法来分离依赖于方法的请求附加函数***（例如，当请求方法是 PUT 或 POST 时，我不希望有 getQueryString() 函数）***并且我希望类这样做为了我。另外，我想保持类依赖松散，所以整个系统将保持灵活。

您是否知道任何可以解决像我这样的问题的设计模式，或者有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:13:45.603

我可能会实现您想要实现的目标，类似于此（但请记住我关于查询字符串对 POST 请求有效的评论。至少，据我所知）：

```
abstract class HTTPRequest
{
    public static function createFromGlobals()
    {
        $method = $_SERVER[ 'REQUEST_METHOD' ];

        /* initialize additional arguments from globals */

        return self::create( $method /*, additional arguments */ );
    }

    public static function create()
    {
        $arguments = func_get_args();
        $method = array_shift( $arguments );
        $method = ucfirst( strtolower( $method ) );

        $className = __CLASS__ . $method;
        if( !class_exists( $className ) )
        {
            throw new Exception( 'Implementation for method ' . $method . ' not found' );
        }

        $reflector = new ReflectionClass( $className );

        return $reflector->newInstanceArgs( $arguments );
    }

    /* implement common functionality */
}

class HTTPRequestGet
    extends HTTPRequest
{
    /* implement additional GET functionality */
}

class HTTPRequestPost
    extends HTTPRequest
{
    /* implement additional POST functionality */
}

/* etc... */ 
```

用法：

```
$requestFromGlobals = HTTPRequest::createFromGlobals();
$customRequest = HTTPRequest::create( 'post', array( 'additional', 'arguments' ) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:58:02.653

我正在考虑这样的事情：

```
<?php

class HTTPRequest
{
    protected $method;
    public $parameters
    // ...

    public static function create(/* ... */)
    {
        // ...
        switch ($this->method)
        {
            case 'GET':
                $this->parameters = new Parameters($_GET);
                break;
            case 'POST':
                $this->parameters = array(
                    'post' => new Parameters($_POST),
                    'files' => new Parameters($_FILES)
                );
                break;
            // ...
        }
        // ...
    }
} 
```

你怎么看待这件事？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T07:41:17.433

查看 Symfony 组件，它有一个非常好的 Request 类（以及许多其他东西），所以你不必重新发明轮子。

[http://api.symfony.com/2.0/Symfony/Component/HttpFoundation/Request.html](http://api.symfony.com/2.0/Symfony/Component/HttpFoundation/Request.html)

# xmpp - 在不设置 SRV 记录的情况下连接到 Google 帐户

> ID：14682290
> 
> 赞同：0
> 
> 时间：2013-02-04T07:39:47.970
> 
> 标签：xmpp, strophe, google-talk, punjab

有什么办法可以绕过设置 SRV 记录。如何在不设置 SRV 记录的情况下连接到 Google 帐户 mycompany.com。

我正在使用 Strophe + Punjab 的组合连接到 Google XMPP 服务以构建聊天应用程序。我能够使用 gmail 帐户 (my_mail@gmail.com) 成功连接。我想使用 Google 帐户 my_mail@mycompany.com 进行连接。我遇到过需要设置 SRV 记录的解决方案的帖子，这些记录用于将 jid 的域部分转换为主机名/端口以进行连接。

问候，尼蒂什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:21:50.583

解决了..

似乎问题出在使用密码进行身份验证时，它会引发`remote-connection-failed`异常。

使用从 OAuth2 机制检索到的令牌来验证 Google Talk Server 可以解决问题。

# ios - clang 失败退出，代码为 1

> ID：14682294
> 
> 赞同：-3
> 
> 时间：2013-02-04T07:40:04.290
> 
> 标签：ios, xcode4.2

我只是在 xcode 4.2 中复制应用程序。App 是在 xcode 4.5 中创建的。

当我在我的旧 mac 机器上编译它时，我得到了这个错误。

![错误按摩](../Images/b3f384a4a3ced5d8c5949e83834c41ff.png)

请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T07:44:16.073

它正在寻找前缀头文件。你删了吗？如果是这样，那么您应该在项目编辑器的 Build Settings 选项卡中删除 Prefix Header 设置。

# javascript - 使用 jQuery.html 插入包含脚本元素的 HTML 片段时出现 SyntaxError

> ID：14682307
> 
> 赞同：5
> 
> 时间：2013-02-04T07:41:08.573
> 
> 标签：javascript, jquery, syntax-error

我正在使用从后端代码获取 HTML 内容的 jquery ajax 请求。如果状态正常，我将 HTML 内容附加到 div。我正在使用以下代码使用 jquery ajax 附加 div。作为`$('#divElm').html(response.data);`. 但附加后我收到以下错误：

> SyntaxError：复合语句中缺少 }

从后端（即 response.data）呈现的 HTML 内容包含导致此错误的以下内容：

```
<script type="text/javascript"> 
function init() {
if(d.getElementById('normal')){
    window.normalPop= d.getElementById('normal');
    //complicated is local 
    var complicated= normalPop.parentNode.removeChild(normal);
    d.getElementsByTagName('body')[0].appendChild(complicated);
    }
}   
addLoadEvent(init);
</script> 
```

我不确定为什么会出现这个错误“SyntaxError: missing } in complex statement”。} 大括号在代码中正确关闭。

如果我使用它`innerHTML`而不是`html()`它工作正常。渲染没有错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:41:18.423

.html() 使用 .append() ，而 .append() 又使用 domManip() 进行脚本嗅探和执行。由于这个原因，来自后端的脚本代码执行并导致此错误“SyntaxError：复合语句中缺少}”。我通过脚本代码进行了调查，脚本代码中的注释行（//）也注释了一些JS代码。因此，将单行（//）更改为多行注释（/** **/）后。它得到固定。谢谢大家的时间。

# c# - 使用实体框架从 SQL 数据库中获取所有内容

> ID：14682310
> 
> 赞同：11
> 
> 时间：2013-02-04T07:41:17.297
> 
> 标签：c#, sql-server, linq, entity-framework, linq-to-entities

我有一个这样的产品列表

```
var r = db.Products.Where(x => x.Sites
                                .Where(z => z.Key == associatedProducts.Key)
                                .Any()
                  ).ToList() 
```

有一个名为 Products 的实体，我想从 products 中获取所有元素，除了那些存在于 associatedProducts.Products 中的元素

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-04T08:07:07.573

如果在 previos 查询中使用 EF 获取关联产品列表，则以下查询有效。

```
var temp = db.Products.ToList().Except(associatedProducts).ToList(); 
```

否则，如果`associatedProducts`是一个尚未使用 EF 获取的列表（假设`Key`是一个整数）；

```
List<int> tempIdList = associatedProducts.Select(q => q.Key ).ToList();
var temp = db.Products.Where(q => !tempIdList.Contains(q.Key)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:58:13.850

```
 var query = from p in db.Products
                        where !(from a in associatedProducts.Products
                                select a.Products)
                                .Contains(p.Key)
                        select p; 
```

我没有测试查询，但它应该看起来像这样。

您应该看看如何在 linq 中使用“not in”：
[如何使用 LINQ 进行“not in”查询？](https://stackoverflow.com/questions/183791/how-would-you-do-a-not-in-query-with-linq)

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-02-04T07:46:23.307

您可以加载要排除的产品列表，然后`.Exclude()`从所有产品列表中加载。

# python - PyQt 膨胀和 Pyinstaller

> ID：14682314
> 
> 赞同：2
> 
> 时间：2013-02-04T07:41:22.240
> 
> 标签：python, qt, pyqt4, binaryfiles, pyinstaller

我对 Qt 很陌生，并且一直在使用 Qt-Designer 生成代码来与我用 python 编写的程序进行交互。但是，当我想使用 pyinstall 将它们编译成二进制文件时，我得到`/dist/`的大小约为 60 mb。使用 --onefile 选项时，我可以将其降低到大约 20 mb。

我确定膨胀是由于 Qt 导入了不必要的库引起的。谁能指出我减少这种令人担忧的膨胀的正确方向？我很肯定 20 mb 对于我正在编写的微不足道的应用程序来说是严重的过剩。感谢您的帮助。

使用：Python 2.6.5、pyinstaller 2.0、Qt 4.6.2.、PyQt4

dist 中生成的文件列表：

```
 bz2.so
_codecs_cn.so
_codecs_hk.so
_codecs_iso2022.so
_codecs_jp.so
_codecs_kr.so
_codecs_tw.so
datetime.so
_heapq.so
libaudio.so.2
libbz2.so.1.0
libcrypto.so.0.9.8
libexpat.so.1
libfontconfig.so.1
libfreetype.so.6
libgcc_s.so.1
libGLcore.so.1
libglib-2.0.so.0
libgobject-2.0.so.0
libgthread-2.0.so.0
libICE.so.6
libjpeg.so.62
liblcms.so.1
libmng.so.1
libncurses.so.5
libncursesw.so.5
libnvidia-tls.so.1
libpcre.so.3
libpng12.so.0
libpython2.6.so.1.0
libQt3Support.so.4
libQtCore.so.4
libQtGui.so.4
libQtNetwork.so.4
libQtOpenGL.so.4
libQtSql.so.4
libQtSvg.so.4
libQtXml.so.4
libreadline.so.6
libSM.so.6
libssl.so.0.9.8
libstdc++.so.6
libtiff.so.4
libuuid.so.1
libX11.so.6
libXau.so.6
libxcb.so.1
libXdmcp.so.6
libXext.so.6
libXrender.so.1
libXt.so.6
libz.so.1
_multibytecodec.so
PyQt4.QtCore.so
PyQt4.QtGui.so
qt4_plugins
readline.so
sip.so 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T08:52:24.910

如果您要链接到 Qt4，那么“膨胀”的数量是不可避免的，因为这些库是 Qt4 的依赖项。

为了验证这一点，您可以使用`ldd`库来查看其共享依赖项。尝试运行`ldd libQtGui.so.4`并查看它依赖于多少个库。然后对所有其他共享库执行相同的操作。

我个人不会太担心可执行文件的大小。正如您所注意到的，这主要取决于 Qt，这意味着生成的二进制文件的大小几乎不会随着应用程序的增长而改变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-27T15:54:22.700

仅供参考， [Hatchet](https://github.com/rfk/pysidekick/blob/master/PySideKick/Hatchet.py)是一个 Github 项目，用于分析应用程序中的依赖关系并重建 PySide 绑定以适应。

Qt5 正朝着减少依赖的方向发展，将库分解为更小的库。也许 pyinstalled PyQt5 应用程序的膨胀较小。

即使您只导入您需要的模块，我也不确定 Pyinstaller 或 Hatchet 是否会像您所做的那样，分析 Python 直接绑定到的库是否依赖于 Python 不直接绑定到的库。

一个更糟糕的问题（对我来说）是 Pyinstaller 冻结了系统库，例如 libxcb，这些库与较新版本的操作系统上的其他库的较新版本（它不会冻结）不兼容。例如，我在 Ubuntu 13.04 上冻结的应用程序在 13.10 上崩溃，而在 13.10 上冻结的应用程序在 14.04beta 上崩溃。有解决方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T15:54:49.343

更好的是，我建立在 CadentOrange 的建议之上`ldd`，并使用了 command `ldd -u`，它实际上打印了未使用的直接依赖项。使用这种分析方法，我能够确定上面列出的大部分列表都是完全垃圾，并将列表缩减为区区 5 个文件。对于应用程序的单个目录部署，我能够将膨胀减少到 ~10 mb！希望对可能遇到同样问题的其他人有所帮助。

# for-loop - CMD For /f 循环将第一个字符放在第二个 (*) 令牌上

> ID：14682315
> 
> 赞同：1
> 
> 时间：2013-02-04T07:41:26.927
> 
> 标签：for-loop, windows-xp, cmd, ping

关于为什么下面`type`的批处理文件`for /f`循环不会`Windows XP`（仅）显示第二个标记（*）的第一个字符的任何想法？

注意：`set "test=%%a"`是为了解决问题`ping`¿ 只放入 a`<CR>`而不是`<CR><LF>`它的输出？`Windows XP`正如[jeb](https://stackoverflow.com/users/463115)在[对我的回答的评论中](https://stackoverflow.com/questions/8811992/dos-batch-for-loop-with-find-exe-is-stripping-out-blank-lines/14642856#comment20458405_14642856)所意识到的那样

![](../Images/5dbf18b725cdb1a3b1af7f2fa1a97107.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T09:07:23.357

看来，在 Windows XP 中，该命令会在行尾之前`ping`生成一个额外的（回车）字符。`0x0D`结果，当`%%b`接收到一个值时，它会与尾随的 CR 字符一起接收它。当你在打印时`%%b`，CR自然会导致“马车”返回到行首，因此结束`"`符和随后的空格字符（和之间的那个`"`）`&`会覆盖已经打印的前两个字符，即开始`"`和值的第一个字母。

`ping`您可以通过将输出重定向到文件然后在十六进制查看器中查看文件来轻松验证它。我使用 Far Manager 的内置查看器来确定事实：

*   这是文件的正常视图，其中突出显示了任意行结尾：

    ![在此处输入图像描述](../Images/75816f15827eb6c9536fb1b1a7fff439.png)

*   这是十六进制视图模式下的同一个文件，这里也突出显示了相同的区域，以显示该行实际以哪些字符结尾：

    ![在此处输入图像描述](../Images/b55a2b2041035a1366cca8eae7005f11.png)

抱歉，非英文内容，手边没有英文Win XP。希望这个问题仍然可以从镜头中明显看出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T08:01:28.830

有趣的。根据没有`@echo off`.

但是，如果您将参数传递给函数，如下所示，它似乎在 XP 和 Win7 中都可以正常工作：

```
@echo off
    goto :main

:xyzzy
    if "x%1"=="x""" goto :eof
    echo %1
    echo %2
    echo.
    goto :eof

:main
    echo.&echo.
    ping -n 1 google.com
    echo.&echo.
    for /f "tokens=1*" %%a in ('ping -n 1 google.com') do call :xyzzy "%%a" "%%b"
    echo.&echo. 
```

你会注意到我也放弃了`xyzzy`函数中的空白行，因为它们似乎没有增加任何价值。如果您真的希望它们输出，只需删除该函数的第一行。该脚本的输出保留了第一个字符，与原始脚本不同：

```
Pinging google.com [74.125.225.105] with 32 bytes of data:

Reply from 74.125.225.105: bytes=32 time=253ms TTL=43

Ping statistics for 74.125.225.105:
    Packets: Sent = 1, Received = 1, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 253ms, Maximum = 253ms, Average = 253ms

"Pinging"
"google.com [74.125.225.105] with 32 bytes of data:"

"Reply"
"from 74.125.225.105: bytes=32 time=267ms TTL=43"

"Ping"
"statistics for 74.125.225.105:"

"Packets:"
"Sent = 1, Received = 1, Lost = 0 (0 loss),"

"Approximate"
"round trip times in milli-seconds:"

"Minimum"
"= 267ms, Maximum = 267ms, Average = 267ms" 
```

# javascript - 解释器如何处理在全局对象中引用的局部函数？

> ID：14682318
> 
> 赞同：4
> 
> 时间：2013-02-04T07:41:31.977
> 
> 标签：javascript

```
window.onload = function() {
   var a = function(x) {
       console.log(x);
   };
   document.onclick = function() {
       a(1);
   };
   document.onkeyup = function() {
       a(2);
   };
}; 
```

我很清楚为什么会这样，但不知道如何。

当`window.onload` *ends* ,`a`被销毁，但它引用的函数仍然可供事件处理程序使用，因为如果我理解正确的话，它是在更高的范围内声明的。

解释器是否在后台保留对该函数的隐藏引用，或者解释器是否以某种方式*内联*该函数？这种避免全局变量的代码是否有效？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:17:06.077

> `window.onload`结束时，`a`被摧毁……

这种假设是错误的。每当您在另一个函数中创建函数时，这些内部函数都会阻止垃圾收集器清理外部函数的范围。

推荐阅读：[http ://www.ibm.com/developerworks/web/library/wa-memleak/](http://www.ibm.com/developerworks/web/library/wa-memleak/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:09:07.117

这不是您问题的完整答案，但如果有帮助... Javascript 中的对象生命周期通常通过*引用计数*来控制。

该语言实际上没有块作用域的概念（尽管它确实享有函数作用域）。只有当没有引用时，后台 GC 才会自动清理对象。因此，对象的行为`a`本质上是“安全的”：当函数作用域结束时，一个引用被删除，但另一个引用仍然存在。

更详细的答案必须复杂地探索特定 Javascript 引擎的实现，可能比我们在这里的时间或空间要详细得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T08:11:38.727

javascript 变量中的函数或对它们的引用是一种对象，就像常规对象一样，持有对它们的引用的函数或变量在没有对它们的引用之前不会被垃圾收集。在您的特定情况下，您创建了几个`a()`比处理程序持续时间更长的引用`.onload()`。因此，变量的`a`持续时间也比函数长得多。这个概念被称为“闭包”。

如果您在 Google 中搜索术语“javascript 中的闭包”，您会发现许多关于该主题的有用文章，例如[这篇](http://james.padolsey.com/javascript/closures-in-javascript/)文章。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T08:43:25.270

当您在处理程序中声明第一个函数时，JavaScript 会自动创建范围或上下文对象`window.onload`；这个范围对象保留了变量`a`，有效地使它对你的两个匿名函数都是专有的。

这种技术通常用于信息隐藏和避免创建全局变量。代码运行后`onload`，没有其他代码可以访问`a`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T08:06:33.747

这被称为“关闭”。简而言之，它意味着“一个函数可以访问定义它的范围内的所有变量”。

在您的示例中，两个处理程序是在`window.onload`函数内部定义的，因此它可以访问`a`也在该范围内的 。

是的，解释器将所有闭包保存在内存中。（afaik）
我不是专业程序员，所以我没有太多权限。但我通常这样做是为了避免全局变量。

[在 MDN 上关闭](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T08:16:45.760

**解释器是否在后台保留对该函数的隐藏引用，或者解释器是否以某种方式内联该函数？**

对于所有 javascript 引擎，这无法在全球范围内得到解答。但是解析器很可能必须为您在和`a`上定义的匿名函数保留对您的函数的引用。所以不会马上销毁，只能通过javascript变量作用域的限制才能访问。`document.onclick``document.onkeyup``a`

这就是为什么闭包会导致内存泄漏的原因，因为引擎很难真正`a`正确地取消引用。（这是[IE 引擎](http://web.archive.org/web/20070510000404/http://laurens.vd.oever.nl/weblog/items2005/closures/)的问题，如果不小心处理仍然存在）。而且由于您无法`a`手动取消引用，因为您无法访问变量，因此无法快速修复由这种模式引起的内存泄漏。

您的示例*也不*是[闭包](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)，因为它不返回函数，但它处理相同类型的变量范围问题，因为它引用了`a`不共享相同范围（`document.onclick`和`document.onkeyup`）的函数内部的局部变量。

我高度怀疑没有引擎会尝试内联函数`a`，因为这会不必要地复制函数对象。[`pointer`](http://www.cplusplus.com/doc/tutorial/pointers/)一旦引用计数降至 0（在您的示例中，当`document.onclick`和`document.onkeyup`被取消引用（设置为`null`or ）时，它很可能与 a和提到的引用计数一起被允许轻松销毁`undefined`。

**这种避免全局变量的代码是否有效？**

避免全局变量总是好的，所以总的来说：是的，这是避免全局变量的有效方法。每个好的引擎也应该销毁`a`一次`document.onclick`并被`document.onkeyup`取消引用。

# php - 让谷歌地图回到默认位置

> ID：14682319
> 
> 赞同：0
> 
> 时间：2013-02-04T07:41:32.610
> 
> 标签：php, google-maps, wordpress

我正在使用这个 WP 插件（Pazzey's Store Locator），为了我的目的，我做了很多修改。到目前为止一切都很好，但是，我对此感到很疯狂：如果我尝试搜索返回 NO RESULTS FOUND 的商店，那么地图会以太平洋中部为中心。我不知道为什么也找不到解决方案。需要明确的是：它在加载时完美运行，在找到的结果上完美运行，这只会在没有找到结果时发生。

代码如下：

```
var map;
var markers = [];
var side_bar_html = "";
var infoWindow;
var locationSelect;

function load() {
  map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(40, -100),
    zoom: 2,
    mapTypeId: 'roadmap',
    mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU}
  });
  infoWindow = new google.maps.InfoWindow();
  locationSelect = document.getElementById("locationSelect");
  locationSelect.onchange = function() {
    var markerNum = locationSelect.options[locationSelect.selectedIndex].value;
    if (markerNum != "none"){
      google.maps.event.trigger(markers[markerNum], 'click');
    }
  };
   }

function searchLocations() {
 var address = document.getElementById("addressInput").value;
 var geocoder = new google.maps.Geocoder();
 geocoder.geocode({address: address}, function(results, status) {
   if (status == google.maps.GeocoderStatus.OK) {
    searchLocationsNear(results[0].geometry.location);
   } else {
     alert(address + 'Please Enter a Location');
    }
 });
}

function clearLocations() {
 infoWindow.close();
 for (var i = 0; i < markers.length; i++) {
   markers[i].setMap(null);
 }
 markers.length = 0;
side_bar_html = "";
}

function searchLocationsNear(center) {
 clearLocations(); 

 var radius = document.getElementById('radiusSelect').value;
 var searchUrl = 'xmlmap.php?lat=' + center.lat() + '&lng=' + center.lng() +  '&radius=' + radius;
 downloadUrl(searchUrl, function(data) {
   var xml = parseXml(data);
   var markerNodes = xml.documentElement.getElementsByTagName("marker");
   var bounds = new google.maps.LatLngBounds();
   for (var i = 0; i < markerNodes.length; i++) {
     var name = markerNodes[i].getAttribute("name");
     var address = markerNodes[i].getAttribute("address");
     var distance = parseFloat(markerNodes[i].getAttribute("distance"));
     var moreinfo = markerNodes[i].getAttribute("moreinfo");
     var latlng = new google.maps.LatLng(
          parseFloat(markerNodes[i].getAttribute("lat")),
          parseFloat(markerNodes[i].getAttribute("lng")));

     createOption(name, distance, i);
     createMarker(latlng, name, address, moreinfo);
     bounds.extend(latlng);
   }
   map.fitBounds(bounds);
   if (side_bar_html == "") {
   document.getElementById("side_bar").innerHTML = '<strong>No Matches  Found</strong>';}
   else {
   document.getElementById("side_bar").innerHTML = side_bar_html;}
  });
}

function createMarker(latlng, name, address, moreinfo) {

  var html = "<b>" + name + "</b> <br/>" + address + "<br/>" + moreinfo;
  var cleanaddy = address.replace(/<\/?[^>]+(>|$)/g, "");
  html +='<form action="http://maps.google.com/maps" method="get"" target="_blank">'+
       '<INPUT value="Get Directions" TYPE="SUBMIT">' +
       '<input type="hidden" name="daddr" value="' + cleanaddy +
       '"/>';
  var marker = new google.maps.Marker({
    map: map,
    position: latlng
  });
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
  markers.push(marker);
side_bar_html += '<a href="javascript:myclick(' + (markers.length-1) + ')">' + name + '<\/a><br>'+ address +'<br><br>';
 }
function myclick(i) {
google.maps.event.trigger(markers[i], "click");
}

function createOption(name, distance, num) {
  var option = document.createElement("option");
  option.value = num;
  option.innerHTML = name + "(" + distance.toFixed(1) + ")";
  locationSelect.appendChild(option);
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request.responseText, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function parseXml(str) {
  if (window.ActiveXObject) {
    var doc = new ActiveXObject('Microsoft.XMLDOM');
    doc.loadXML(str);
    return doc;
  } else if (window.DOMParser) {
    return (new DOMParser).parseFromString(str, 'text/xml');
  }
}

function doNothing() {}

//Nothing here> 
```

有关如何解决此问题的任何提示或想法？我已经花了 3 天了，但找不到问题所在

先感谢您！

# jquery - jQuery建议不显示自动完成列表

> ID：14682321
> 
> 赞同：0
> 
> 时间：2013-02-04T07:41:44.443
> 
> 标签：jquery, autocomplete

我将自动完成数据源更改为我的 php 文件，并尝试了下面的代码。但它不起作用，有人可以建议如何解决它吗？

谢谢

```
$('#search').autocomplete({
    source: function( request, response ) {
        $.ajax({
            url: "/property_bldg.php",
            dataType: "jsonp",
            data: {
                query: request.term
            },
            success: function( data ) {
                response( $.map( data.suggestions, function( item ) {
                    return {
                        label: item.text,
                        value: item.text
                    }
                }));
            }
        });
    },
    minLength: 1
}) 
```

返回

```
{query:'A',par1:'',suggestions:['AUSTIN RD','ARCH','ARGYLE ST','AMOY GDN','ARIA','AQUAMARINE','ACADEMIC TERR','APEX','ALLWAY GDN','AP LEI CHAU DRIVE'],data:[]} 
```

更新：

```
$('#autocomplete_propSearch').autocomplete({
    source: function( request, response ) {
        $.ajax({
            url: "/property_bldg.php",
            dataType: "json",
            data: {
                query: request.term
            },
            complete: function (xhr, status) {
                if (status === 'error' || !xhr.responseText) {
                    alert('Error')
                }
                else {

                    response( $.map( xhr.responseText.suggestions, function( item ) {
                        return {
                            label: item,
                            value: item
                        }
                    }));
                }
            }
        });
    },
    minLength: 1
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:49:20.507

您正在迭代一个字符串数组，但试图访问`text`它们的属性。将您的地图主体更改为：

```
 return {
                    label: item,
                    value: item
                } 
```

[jsFiddle](http://jsfiddle.net/mgibsonbr/D7cyH/)的工作示例。如果这对您不起作用，请检查 ajax 调用是否真的成功完成（`data`例如，通过打印到控制台）。

**更新：**如果您的服务器返回的正是您发布的内容，那么它不是有效的**JSONP**响应。有关执行 JSONP 的正确方法，请参阅[本教程](http://www.jquery4u.com/json/jsonp-examples/)和 jQuery[文档](http://api.jquery.com/jQuery.ajax/)（不过，如果您正在查询为页面提供服务的同一个域，则使用它更简单 - 也更安全`json`）。

例如，如果您的服务器正在接收查询：

```
http://127.0.0.1:8080/property_bldg.php?callback=jQuery161006659467399874042_13‌​59964924178&query=a&_=1359964930143 
```

正确的反应应该是：

```
jQuery161006659467399874042_13‌​59964924178({query:'A',par1:'',suggestions:['AUSTIN RD','ARCH','ARGYLE ST','AMOY GDN','ARIA','AQUAMARINE','ACADEMIC TERR','APEX','ALLWAY GDN','AP LEI CHAU DRIVE'],data:[]}); 
```

它`content-type`应该是`text/javascript`（不是`application/json`）。如果需要，您可以自定义，阅读[文档](http://api.jquery.com/jQuery.ajax/)以获取更多信息。

# notepad++ - 在 Linux 文本编辑器中查看换行符和制表符

> ID：14682329
> 
> 赞同：3
> 
> 时间：2013-02-04T07:42:26.387
> 
> 标签：notepad++, gedit

在 Notepad++ 中，您可以转到查看 > 显示符号 > 显示所有字符并查看换行符和制表符的位置。这很有用，因为它可以让您轻松识别使用空格而不是制表符进行缩进的位置（在 Python 中非常重要），或者只是查看一行中有尾随空格等的位置（保持整洁）。

我想在 Linux 中使用相同的功能，但 gedit 似乎没有。是否有其他编辑器具有此功能，我没有看到该功能还是不可用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T07:51:47.087

尝试`vi <filename>`然后`command mode`输入`:set list`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T15:27:28.957

Gedit 有一个名为“Draw Spaces”的插件，它不显示换行符，但是，我相信您可以根据需要修改该插件。该插件在 Ubuntu 存储库的“gedit-plugins”包中可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T08:41:39.110

对于 Python 'SPE' 或 'ERIC3' 非常棒。

我确信 SPE 支持突出显示空白。也可能是 ERIC3。

您也可以让编辑器在没有尾随空格的情况下保存。

'kate' 支持突出显示空白和制表符，还可以删除尾随空格和/或突出显示它们。

目前我正在使用“KDevelop”，因为它支持垂直选择，这有时非常有用。

# java - 同步单例类的多个静态变量

> ID：14682330
> 
> 赞同：0
> 
> 时间：2013-02-04T07:42:26.120
> 
> 标签：java, variables, synchronization, singleton

我只需要同步以下单例类的 obj1 和 obj2，以便多个线程可以获取该类的单个实例，但是一次只有一个线程可以访问 obj1 或 obj2。

```
 public class Sample{

    private static LinkedHashMap<String, String> obj1;
    private static LinkedHashMap<String, String> obj2;

    public static Sample getInstance() {
        if (instance == null) {
            instance = new Sample();
        }
        return instance;
    }

    private Sample() {

    }

    public void add(LinkedHashMap lhm){
        //steps
        }

    public void remove(LinkedHashMap lhm){
        //steps
        }

} 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T07:46:55.503

首先，将 2 个变量设为实例变量而不是静态变量。

二、同步单例的方法：

```
public synchronized void add(LinkedHashMap lhm){
    //steps
} 
```

我会避免单例的惰性实例化。大多数时候，没有附加价值：

```
private static final Sample INSTANCE = new Sample();

public static Sample getInstance() {
    return INSTANCE;
} 
```

如果你真的想保持延迟初始化，那么`getInstance()`方法也应该同步，另外两个线程可能会得到你的单例的两个不同实例。

# c# - 在 wcf 服务中使用 ninject 注入依赖项

> ID：14682331
> 
> 赞同：0
> 
> 时间：2013-02-04T07:42:41.393
> 
> 标签：c#, wcf, ninject, datacontext

我正在使用 ninject (extensions) 在 wcf 服务中注入依赖项。我必须使用什么范围来注入`IDataContext`依赖项，因为我得到“创建模型时无法使用上下文”。使用时出错`InRequestScope()`？

```
Bind<IDataContext>().To<DataContext>().InRequestScope()
                .WithConstructorArgument("connectionString", "TestDB"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-07T15:26:45.910

看看[这个](http://www.aaronstannard.com/post/2011/08/16/dependency-injection-ninject-wcf-service.aspx)。我发现让 DI 通过 WCF 服务与 Ninject 一起工作非常有帮助。这是一个非常基本的示例，只需最少的代码即可帮助您入门。

# android - 无法在 doInBackground() 中使用监听器

> ID：14682333
> 
> 赞同：1
> 
> 时间：2013-02-04T07:42:46.920
> 
> 标签：android, android-asynctask, listener

在我的`asyncTask` `doInBackground()`方法中，我想通过敬酒来处理异常。但我不能这样做，这是我得到的例外。这是为什么？PS我可以在`onPreExecute()`和中做到这一点`onPostExecute()`。

```
02-04 09:43:45.190: E/AndroidRuntime(19308): FATAL EXCEPTION: AsyncTask #1
02-04 09:43:45.190: E/AndroidRuntime(19308): java.lang.RuntimeException: An error     occured while executing doInBackground()
02-04 09:43:45.190: E/AndroidRuntime(19308):    at android.os.AsyncTask$3.done(AsyncTask.java:278)
02-04 09:43:45.190: E/AndroidRuntime(19308):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
02-04 09:43:45.190: E/AndroidRuntime(19308):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
02-04 09:43:45.190: E/AndroidRuntime(19308):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
02-04 09:43:45.190: E/AndroidRuntime(19308):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
02-04 09:43:45.190: E/AndroidRuntime(19308):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
02-04 09:43:45.190: E/AndroidRuntime(19308):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
02-04 09:43:45.190: E/AndroidRuntime(19308):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
02-04 09:43:45.190: E/AndroidRuntime(19308):    at java.lang.Thread.run(Thread.java:856)
02-04 09:43:45.190: E/AndroidRuntime(19308): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
02-04 09:43:45.190: E/AndroidRuntime(19308):    at android.os.Handler.<init>(Handler.java:121)
02-04 09:43:45.190: E/AndroidRuntime(19308):    at android.widget.Toast$TN.<init>(Toast.java:317)
02-04 09:43:45.190: E/AndroidRuntime(19308):    at android.widget.Toast.<init>(Toast.java:91)
02-04 09:43:45.190: E/AndroidRuntime(19308):    at android.widget.Toast.makeText(Toast.java:233)
02-04 09:43:45.190: E/AndroidRuntime(19308):    at com.xxx.MenuActivity$ImageCount.setView(MenuActivity.java:208)
02-04 09:43:45.190: E/AndroidRuntime(19308):    at com.xxx.StringAsyncRetriever.getData(StringAsyncRetriever.java:101)
02-04 09:43:45.190: E/AndroidRuntime(19308):    at com.xxx.StringAsyncRetriever.getData(StringAsyncRetriever.java:95)
02-04 09:43:45.190: E/AndroidRuntime(19308):    at com.xxx.StringAsyncRetriever.doInBackground(StringAsyncRetriever.java:44)
02-04 09:43:45.190: E/AndroidRuntime(19308):    at com.xxx.StringAsyncRetriever.doInBackground(StringAsyncRetriever.java:1)
02-04 09:43:45.190: E/AndroidRuntime(19308):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
02-04 09:43:45.190: E/AndroidRuntime(19308):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T07:45:58.513

您不能在内部进行 ui 操作`doInBackground`，因此如果出现异常，则返回一个可以在`onPostExecute`.. 中检查的值，基于此值显示您的 toast

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:41:41.417

努努的回答是正确的。但是，如果您想在 doInBackground 方法中处理异常并显示一些 toast 并继续在 catch 子句或方法本身中进行一些其他操作，您应该使用 onProgressUpdate 方法。它也可以在 UI 线程上运行，并且可以在 doInBackground 中任意调用多次。您需要 publishProgress 来执行对 onProgressUpdate 方法的调用。

OnPostExecute 仅在 doInBackground 完成后调用一次。

这是 AsynchTask 的文档：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# android - NotificationCompat.Builder 不起作用，Android 2.2.1

> ID：14682335
> 
> 赞同：4
> 
> 时间：2013-02-04T07:43:03.437
> 
> 标签：android

我有下一个代码：

```
NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(
        this).setSmallIcon(R.drawable.ic_launcher)
        .setContentTitle("My notification")
        .setContentText("Hello World!"); 
```

为什么它不起作用？它什么也没显示。在 Android 2.2.1 上测试。

**更新。活动代码：**

```
import android.app.Activity;
import android.app.AlertDialog;
import android.os.Bundle;
import android.support.v4.app.NotificationCompat;
import android.view.Menu;
import android.view.View;

public class LoginActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login);
    }

    public void start(View view) {
        NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(
                this).setSmallIcon(R.drawable.ic_launcher)
                .setContentTitle("My notification")
                .setContentText("Hello World!");
    }
} 
```

布局中的按钮：

```
<Button
    android:id="@+id/startButton"
    android:layout_width="100dp"
    android:layout_height="wrap_content"
    android:layout_above="@+id/aboutButton"
    android:layout_alignLeft="@+id/aboutButton"
    android:layout_marginBottom="20dp"
    android:onClick="start"
    android:text="Start" /> 
```

**更新2。错误日志：**

```
02-04 11:40:40.752: D/dalvikvm(23054): GC_EXTERNAL_ALLOC freed 859 objects / 59168 bytes in 61ms
02-04 11:40:56.424: D/AndroidRuntime(23054): Shutting down VM
02-04 11:40:56.424: W/dalvikvm(23054): threadid=1: thread exiting with uncaught exception (group=0x4001d888)
02-04 11:40:56.432: E/AndroidRuntime(23054): FATAL EXCEPTION: main
02-04 11:40:56.432: E/AndroidRuntime(23054): java.lang.IllegalStateException: Could not execute method of the activity
02-04 11:40:56.432: E/AndroidRuntime(23054): at android.view.View$1.onClick(View.java:2082)
02-04 11:40:56.432: E/AndroidRuntime(23054): at android.view.View.performClick(View.java:2461)
02-04 11:40:56.432: E/AndroidRuntime(23054):    at android.view.View$PerformClick.run(View.java:8890)
02-04 11:40:56.432: E/AndroidRuntime(23054):    at android.os.Handler.handleCallback(Handler.java:587)
02-04 11:40:56.432: E/AndroidRuntime(23054):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-04 11:40:56.432: E/AndroidRuntime(23054):    at android.os.Looper.loop(Looper.java:123)
02-04 11:40:56.432: E/AndroidRuntime(23054):    at android.app.ActivityThread.main(ActivityThread.java:4632)
02-04 11:40:56.432: E/AndroidRuntime(23054):    at java.lang.reflect.Method.invokeNative(Native Method)
02-04 11:40:56.432: E/AndroidRuntime(23054):    at java.lang.reflect.Method.invoke(Method.java:521)
02-04 11:40:56.432: E/AndroidRuntime(23054):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
02-04 11:40:56.432: E/AndroidRuntime(23054):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
02-04 11:40:56.432: E/AndroidRuntime(23054):    at dalvik.system.NativeStart.main(Native Method)
02-04 11:40:56.432: E/AndroidRuntime(23054): Caused by: java.lang.reflect.InvocationTargetException
02-04 11:40:56.432: E/AndroidRuntime(23054):    at pckg.mywebsites.LoginActivity.start(LoginActivity.java:28)
02-04 11:40:56.432: E/AndroidRuntime(23054):    at java.lang.reflect.Method.invokeNative(Native Method)
02-04 11:40:56.432: E/AndroidRuntime(23054):    at java.lang.reflect.Method.invoke(Method.java:521)
02-04 11:40:56.432: E/AndroidRuntime(23054):    at android.view.View$1.onClick(View.java:2077)
02-04 11:40:56.432: E/AndroidRuntime(23054):    ... 11 more
02-04 11:40:56.432: E/AndroidRuntime(23054): Caused by: java.lang.IllegalArgumentException: contentIntent required: pkg=pckg.mywebsites id=222 notification=Notification(vibrate=null,sound=null,defaults=0x0)
02-04 11:40:56.432: E/AndroidRuntime(23054):    at android.os.Parcel.readException(Parcel.java:1264)
02-04 11:40:56.432: E/AndroidRuntime(23054):    at android.os.Parcel.readException(Parcel.java:1248)
02-04 11:40:56.432: E/AndroidRuntime(23054):    at android.app.INotificationManager$Stub$Proxy.enqueueNotificationWithTag(INotificationManager.java:274)
02-04 11:40:56.432: E/AndroidRuntime(23054):    at android.app.NotificationManager.notify(NotificationManager.java:110)
02-04 11:40:56.432: E/AndroidRuntime(23054):    at android.app.NotificationManager.notify(NotificationManager.java:90)
02-04 11:40:56.432: E/AndroidRuntime(23054):    ... 15 more 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-04T13:25:49.873

It works:

```
Intent resultIntent = new Intent(this, LoginActivity.class);
PendingIntent resultPendingIntent =
    PendingIntent.getActivity(
    this,
    0,
    resultIntent,
    PendingIntent.FLAG_UPDATE_CURRENT
);

NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(
        getApplicationContext()).setSmallIcon(R.drawable.ic_launcher)
        .setContentTitle("My notification")
        .setContentText("Hello World!")
        .setContentIntent(resultPendingIntent);

NotificationManager manager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
manager.notify(FM_NOTIFICATION_ID, mBuilder.build()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:03:34.793

在为 API 11 之前的版本编写代码时，您应该包含支持库，而不是调用`Notification.Builder`您需要调用的`NotificationCompact`。

尝试阅读[Android 支持库页面](https://developer.android.com/tools/extras/support-library.html)并查看这些内容的示例项目。

**编辑：**

试试下面的代码：

> ```
> NotificationCompat.Builder builder =
>         new NotificationCompat.Builder(this)
>         .setSmallIcon(R.drawable.ic_launcher)
>         .setContentTitle("Notifications Example")
>         .setContentText("This is a test notification");
> // Add as notification
> NotificationManager manager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
> manager.notify(FM_NOTIFICATION_ID, builder.build()); 
> ```

# system-verilog - 如何从系统verilog中的全局时钟派生本地时钟

> ID：14682336
> 
> 赞同：-1
> 
> 时间：2013-02-04T07:43:12.157
> 
> 标签：system-verilog

...基本上试图模仿真实芯片中会发生的情况，其中硬件与时钟速率无关，并且我们有一个时钟发生器来控制各种组件的时钟速率，例如对于 2GHz 时钟源，您可以传播对于 1 GHz 处理器工作频率，每 2 个周期向处理器发送一次信号，对于 500 MHz 工作频率，每 4 个周期向 NoC 发送信号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:02:38.867

网上已经有很多文档和很多书籍。在您最喜欢的搜索引擎中，搜索`verilog clock divider`. Verilog 和 System Verilog 之间没有足够的区别，这种设计是值得期待的。

如果您想让它看起来更像 System Verilog，请使用`always_ff @...`代替`always @...`and`always_comb begin`代替`always begin`or `assign`。良好的编码风格并没有真正的区别。使用 SV 关键字只会添加约束，以改进您的功能 RTL 可合成的更改。

# php - 正则表达式检查字符串是否包含某些值 php

> ID：14682343
> 
> 赞同：-1
> 
> 时间：2013-02-04T07:43:36.347
> 
> 标签：php, regex

有人可以帮助我使用 php 正则表达式吗？我需要匹配成对的括号。例如，它应该只匹配`"[abc #123]:"`

```
"Re: [abc #123]: question" 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:48:16.780

你可以使用这个

```
$str="Re: [abc #123]: question";
$strout=preg_replace_callback("~\[(.*)\]:~si",function($m){echo $m[1];return $m[1];}," ".$str." "); 
```

对于不同的输入

```
 $str="[tag1] / [tag2]";
 preg_replace_callback("#\[(.*?)\]#",function($m){print_r($m);return $m[1];}," ".$str." "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:56:26.030

如果您需要团体

```
/\[([a-z]+)\ \#([1-9]+)\]/g 
```

别的

```
/(\[[^\]]+\])/g 
```

# python - 如何在 webdriver (Python) 中打开新窗口或选项卡？

> ID：14682350
> 
> 赞同：3
> 
> 时间：2013-02-04T07:44:03.670
> 
> 标签：python, webdriver

我尝试过各种命令，例如

```
driver.switch_to_window("_blank") 
```

或者

```
driver.switch_to_window(None) 
```

但这些都不起作用。这应该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-05-20T03:30:14.750

经过大量的谷歌搜索，我发现了在 Firefox 中对我有用的东西，并且它是如此简单（优雅，也许？）以至于几乎可笑。这里是：

```
>>> from selenium import webdriver
>>> driver = webdriver.Firefox()
>>> driver.execute_script("window.open('');")  <--- JAVASCRIPT! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T08:33:42.937

看看[这个问题](https://stackoverflow.com/questions/6421988/webdriver-open-new-tab)。好像图书馆不支持标签管理atm。

但评分第二高的答案确实提供了解决方案。我认为您可以轻松地将其转换为 Python。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-23T11:15:56.910

我已经通过这种方式解决了这个问题：

```
a_elem = driver.find_element_by_link_text("Link with _blank")
self.driver.get(a_elem.get_attribute('href')) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-11T21:39:13.940

我遇到了同样的问题，我对找到的其他解决方案并不满意，所以我做了一个上下文管理器来处理。这允许：

```
with link_in_new_window(driver, link_element):
    driver.foo()  # this is in the new window opened from the link
driver.foo()  # this is back in the original window 
```

..我觉得这很方便。

```
from contextlib import contextmanager
from selenium.common import exceptions
from selenium.webdriver.common.action_chains import ActionChains
from selenium.webdriver.common.keys import Keys

# Fundamentally, this shift-clicks to open a new window, and
# hits ctrl-w to close it when done, using ActionChains.
@contextmanager
def link_in_new_window(driver, element):
    """Open a clickable element in a new window for this context

    This opens a clickable element in a new window, and switches
    `driver` to that window for the duration of the context.  
    The window is closed afterward, and the driver switched back
    to the original window.

    If the 'as' clause is used, the handle of the parent (original)
    window is provided as the value.

    Selenium doesn't provide a useful interface to firefox's tabs
    due to some technical complications, so we use new windows
    instead of new tabs. The memory hit isn't too significant.

    :type driver: selenium.webdriver.Firefox
    :type element: selenium.webdriver.remote.webelement.WebElement
    :returns: Parent's Window Handle
    """

    known_handles = set(driver.window_handles)
    original_handle = driver.current_window_handle
    action = ActionChains(driver)
    # Open link in new window (shift-click element)
    # Sometimes, shift would be ignored. move_to_element helped.
    action.move_to_element(element)
        .key_down(Keys.SHIFT)
        .click(element)
        .key_up(Keys.SHIFT)
        .perform()

    # Find the new window handle.  ..anyone know a better way?
    timeout = time.time() + 10
    new_handles = set(driver.window_handles) - known_handles
    while time.time() < timeout and not new_handles:
        new_handles = set(driver.window_handles) - known_handles
        time.sleep(0.5)
    if not new_handles or len(new_handles) != 1:
        msg = "Expected one handle, found {}"
        raise RuntimeError(msg.format(len(new_handles)), new_handles)
    new_handle = new_handles.pop()
    driver.switch_to.window(new_handle)
    try:
        # User code will be executed here
        yield original_handle
    finally:
        # close window, if it still exists (ctrl-w)
        try:
            driver.switch_to.window(new_handle)
            action = ActionChains(driver)
            action.key_down(Keys.CONTROL).send_keys('w').perform()
        except exceptions.NoSuchWindowException:
            pass
        # in any case, switch back to the original window
        driver.switch_to.window(original_handle) 
```

# ant - 从 ant 构建脚本问题运行 exe

> ID：14682352
> 
> 赞同：1
> 
> 时间：2013-02-04T07:44:26.820
> 
> 标签：ant, exec, executable, target

我正在尝试从 ant 构建脚本运行可执行文件并且没有任何乐趣。可执行文件运行但挂起。基本上，这个程序接收一个文件并将其转换为另一种格式，并将其拆分为有点像 zip 实用程序的部分。

我从命令行调用它： -

```
BCC FILE.NAME -d FOLDER 
```

借此

*   `BCC`是对可执行文件的调用
*   `FILE.NAME`是要转换的文件
*   `-d`是将输出文件放在特定位置的参数
*   `FOLDER`是文件的输出文件夹

因此，在 ant 脚本中，我使用 exec 可执行命令并将 FILE.NAME、-d 和 FOLDER 作为三个单独的参数传递，但无济于事

# php - php Rets 怎么执行只要？

> ID：14682353
> 
> 赞同：0
> 
> 时间：2013-02-04T07:44:31.407
> 
> 标签：php, mysql, syntax, rets

```
if(isset($_POST['update']))
{
$rets_login_url = $Fetch['rets_url'];
$rets_username = $Fetch['rets_user'];
$rets_password = $Fetch['rets_pass'];
require_once("../include/phrets.php");
$rets = new phRETS;

$connect = $rets->Connect($rets_login_url, $rets_username, $rets_password);
$search = $rets->SearchQuery("Property","ResidentialProperty","(Status=A)",
array( "Count" => 1, "Format" => "COMPACT", "Limit" => "1000", "Offset" => "2") 
);

$ins = $upd = 0;
while ($listing = $rets->FetchRow($search)) 
{
extract($listing);
        $photos = $rets->GetObject("Property", "Photo", $listing['Ml_num']);
        $tot_image = 0;
            foreach ($photos as $photo) 
            {
            $listing = $photo['Content-ID'];
            $number = $photo['Object-ID'];
                if ($photo['Success'] == true) 
                {
                file_put_contents("../../retsimages/image_{$listing}_{$number}.jpg", $photo['Data']);
                }
                else 
                {

                echo "({$listing}-{$number}): {$photo['ReplyCode']} = {$photo['ReplyText']}\n";

                }

            $tot_image++;

            }

$sql = "SELECT * FROM ".RETS." WHERE `mls` = '$Ml_num'";

$run = mysql_query($sql);

$num = mysql_num_rows($run);

    if($num == "")

    {

 $sql = "INSERT INTO ".RETS." (`id`, `status`, `address`, `description`, `bath`, `bed`, `street`, `country`, `extra`, `Municipality`, `zip`, `mls`, `broker`, `sale_lease`, `lot_price`, `build_year`, `sqft`,`tot_image`,`acres`,`addl_mo_fee`,`addr`,`a_c`,`all_inc`,`yr_built`,`apt_num`,`area`,`area_code`,`tv`,`ass_year`,`bsmt1_out`,`bsmt2_out`,`br`,`br_plus`,`cable`,`cac_inc`,`central_vac`,`comel_inc`,`community`,`community_code`,`cross_st`,`disp_addr`,`drive`,`elevator`,`constr1_out`,`constr2_out`,`den_fr`,`farm_agri`,`fpl_num`,`comp_pts`,`furnished`,`gar_spaces`,`gar_type`,`heat_inc`,`fuel`,`heating`,`hydro_inc`,`idx_dt`,`num_kit`,`kit_plus`,`laundry`,`laundry_lev`,`legal_desc`,`level1`,`level10`,`level11`,`level12`,`level2`,`level3`,`level4`,`level5`,`level6`,`level7`,`level8`,`level9`,`lp_dol`,`depth`,`front_ft`,`irreg`,`lotsz_code`,`mmap_page`,`mmap_col`,`mmap_row`,`municipality_district`,`municipality_code`,`oth_struc1_out`,`oth_struc2_out`,`outof_area`,`park_chgs`,`prkg_inc`,`park_spcs`,`parcel_id`,`pix_updt`,`pool`,`pvt_ent`,`prop_feat1_out`,`prop_feat2_out`,`prop_feat3_out`,`prop_feat4_out`,`prop_feat5_out`,`prop_feat6_out`,`ad_text`,`retirement`,`rm1_out`,`rm1_dc1_out`,`rm1_dc2_out`,`rm1_dc3_out`,`rm1_len`,`rm1_wth`,`rm10_out`,`rm10_dc1_out`,`rm10_dc2_out`,`rm10_dc3_out`,`rm10_len`,`rm10_wth`,`rm11_out`,`rm11_dc1_out`,`rm11_dc2_out`,`rm11_dc3_out`,`rm11_len`,`rm11_wth`,`rm12_out`,`rm12_dc1_out`,`rm12_dc2_out`,`rm12_dc3_out`,`rm12_len`,`rm12_wth`,`rm2_out`,`rm2_dc1_out`,`rm2_dc2_out`,`rm2_dc3_out`,`rm2_len`,`rm2_wth`,`rm3_out`,`rm3_dc1_out`,`rm3_dc2_out`,`rm3_dc3_out`,`rm3_len`,`rm3_wth`,`rm4_out`,`rm4_dc1_out`,`rm4_dc2_out`,`rm4_dc3_out`,`rm4_len`,`rm4_wth`,`rm5_out`,`rm5_dc1_out`,`rm5_dc2_out`,`rm5_dc3_out`,`rm5_len`,`rm5_wth`,`rm6_out`,`rm6_dc1_out`,`rm6_dc2_out`,`rm6_dc3_out`,`rm6_len`,`rm6_wth`,`rm7_out`,`rm7_dc1_out`,`rm7_dc2_out`,`rm7_dc3_out`,`rm7_len`,`rm7_wth`,`rm8_out`,`rm8_dc1_out`,`rm8_dc2_out`,`rm8_dc3_out`,`rm8_len`,`rm8_wth`,`rm9_out`,`rm9_dc1_out`,`rm9_dc2_out`,`rm9_dc3_out`,`rm9_len`,`rm9_wth`,`rms`,`rooms_plus`,`s_r`,`vend_pis`,`sewer`,`spec_des1_out`,`spec_des2_out`,`spec_des3_out`,`spec_des4_out`,`spec_des5_out`,`spec_des6_out`,`st_num`,`st_sfx`,`st_dir`,`st`,`style`,`yr`,`taxes`,`type_own_srch`,`type_own1_out`,`uffi`,`timestamp_sql`,`util_cable`,`gas`,`elec`,`util_tel`,`bath_tot`,`wcloset_t1`,`wcloset_t1lvl`,`wcloset_t2`,`wcloset_p2`,`wcloset_t2lvl`,`wcloset_t3`,`wcloset_p3`,`wcloset_t3lvl`,`wcloset_t4`,`wcloset_p4`,`wcloset_t4lvl`,`wcloset_t5`,`wcloset_p5`,`wcloset_t5lvl`,`water`,`water_inc`,`wtr_suptyp`,`waterfront`,`zoning`) 

  VALUES (NULL, 'Active', '$Addr', '$Ad_text', '$Bath_tot', '$Br', '$St', '$County', '$Extras', '$Municipality', '$Zip', '$Ml_num', '$Rltr', '$S_r', '$Lp_dol', '$Yr_built', '$Sqft','$tot_image','$Acres','$Addl_mo_fee','$Addr','$Area','$Area_code','$All_inc','$Yr_built','$Apt_num','$Area','$Area_code','$Tv','$Ass_year','$Bsmt1_out','$Bsmt2_out','$Br','$Br_plus','$Cable','$Cac_inc','$Central_vac','$Comel_inc','$Community','$Community_code','$Cross_st','$Disp_addr','$Drive','$Elevator','$Constr1_out','$Constr2_out','$Den_fr','$Farm_agri','$Fpl_num','$Comp_pts','$Furnished','$Gar_spaces','$Gar_type','$Heat_inc','$Fuel','$Heating','$Hydro_inc','$Idx_dt','$Num_kit','$Kit_plus','$Laundry','$Laundry_lev','$Legal_desc','$Level1','$Level10','$Level11','$Level12','$Level2','$Level3','$Level4','$Level5','$Level6','$Level7','$Level8','$Level9','$Lp_dol','$Depth','$Front_ft','$Irreg','$Lotsz_code','$Mmap_page','$Mmap_col','$Mmap_row','$Municipality_district','$Municipality_code','$Oth_struc1_out','$Oth_struc2_out','$Outof_area','$Park_chgs','$Prkg_inc','$Park_spcs','$Parcel_id','$Pix_updt','$Pool','$Pvt_ent','$Prop_feat1_out','$Prop_feat2_out','$Prop_feat3_out','$Prop_feat4_out','$Prop_feat5_out','$Prop_feat6_out','$Ad_text','$Retirement','$Rm1_out','$Rm1_dc1_out','$Rm1_dc2_out','$Rm1_dc3_out','$Rm1_len','$Rm1_wth','$Rm10_out','$Rm10_dc1_out','$Rm10_dc2_out','$Rm10_dc3_out','$Rm10_len','$Rm10_wth','$Rm11_out','$Rm11_dc1_out','$Rm11_dc2_out','$Rm11_dc3_out','$Rm11_len','$Rm11_wth','$Rm12_out','$Rm12_dc1_out','$Rm12_dc2_out','$Rm12_dc3_out','$Rm12_len','$Rm12_wth','$Rm2_out','$Rm2_dc1_out','$Rm2_dc2_out','$Rm2_dc3_out','$Rm2_len','$Rm2_wth','$Rm3_out','$Rm3_dc1_out','$Rm3_dc2_out','$Rm3_dc3_out','$Rm3_len','$Rm3_wth','$Rm4_out','$Rm4_dc1_out','$Rm4_dc2_out','$Rm4_dc3_out','$Rm4_len','$Rm4_wth','$Rm5_out','$Rm5_dc1_out','$Rm5_dc2_out','$Rm5_dc3_out','$Rm5_len','$Rm5_wth','$Rm6_out','$Rm6_dc1_out','$Rm6_dc2_out','$Rm6_dc3_out','$Rm6_len','$Rm6_wth','$Rm7_out','$Rm7_dc1_out','$Rm7_dc2_out','$Rm7_dc3_out','$Rm7_len','$Rm7_wth','$Rm8_out','$Rm8_dc1_out','$Rm8_dc2_out','$Rm8_dc3_out','$Rm8_len','$Rm8_wth','$Rm9_out','$Rm9_dc1_out','$Rm9_dc2_out','$Rm9_dc3_out','$Rm9_len','$Rm9_wth','$Rms','$Rooms_plus','$S_r','$Vend_pis','$Sewer','$Spec_des1_out','$Spec_des2_out','$Spec_des3_out','$Spec_des4_out','$Spec_des5_out','$Spec_des6_out','$St_num','$St_sfx','$St_dir','$St','$Style','$Yr','$Taxes','$Type_own_srch','$Type_own1_out','$Uffi','$Timestamp_sql','$Util_cable','$Gas','$Elec','$Util_tel','$Bath_tot','$Wcloset_t1','$Wcloset_t1lvl','$Wcloset_t2','$Wcloset_p2','$Wcloset_t2lvl','$Wcloset_t3','$Wcloset_p3','$Wcloset_t3lvl','$Wcloset_t4','$Wcloset_p4','$Wcloset_t4lvl','$Wcloset_t5','$Wcloset_p5','$Water','$Water_inc','$Wtr_suptyp','$Waterfront','$Zoning')";

    $ins++;

    }

    else

    {   

    $sql = "UPDATE ".RETS." SET `address` = '$Addr', `description` = '$Ad_text', `bath` = '$Bath_tot', `bed` = '$Br', `street` = '$St', `country` = '$County', `extra` = '$Extras', `Municipality` = '$Municipality', `zip` = '$Zip', `mls` = '$Ml_num', `broker` = '$Rltr', `sale_lease` = '$S_r', `lot_price` = '$Lp_dol', `build_year` = '$Yr_built', `sqft` = '$Sqft', `tot_image` = '$tot_image' WHERE `mls` = '$Ml_num'"; 

    $upd++;

    }   

mysql_query($sql) or die(mysql_error()); 
```

这是我从 RETS 服务器获取和插入 Prosperity 的代码，它有 200 多个字段，并且可能有 3000 多条记录要获取，所以当从我的本地运行这个查询时，它不会插入到我的表中，我知道查询和 RETS 连接没有错误，如何尽可能长地循环？直到插入所有记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:32:19.653

你的代码要么不完整，要么真的错了。尝试以下操作：

```
if(isset($_POST['update']))
{
    $rets_login_url = $Fetch['rets_url'];
    $rets_username = $Fetch['rets_user'];
    $rets_password = $Fetch['rets_pass'];
    require_once("../include/phrets.php");
    $rets = new phRETS;

    $connect = $rets->Connect($rets_login_url, $rets_username, $rets_password);

    // check for errors
    if ($connect) {
        echo "  + Connected<br>\n";
    } else {
        echo "  + Not connected:<br>\n";
        print_r($rets->Error());
        exit;
    }

    $search = $rets->SearchQuery("Property","ResidentialProperty","(Status=A)",
        array( "Count" => 1, "Format" => "COMPACT", "Limit" => "1000", "Offset" => "2") 
    );

    if ($rets->NumRows() > 0) {

        $ins = $upd = 0;
        while ($listing = $rets->FetchRow($search)) {
            extract($listing); 

            $photos = $rets->GetObject("Property", "Photo", $listing['Ml_num']);
            $tot_image = 0;
            foreach ($photos as $photo) {
                $listingid = $photo['Content-ID']; // don't redefine $listing!
                $number = $photo['Object-ID'];
                if ($photo['Success'] == true) {
                    file_put_contents("../../retsimages/image_{$listingid}_{$number}.jpg", $photo['Data']);
                } else {
                    echo "({$listing}-{$number}): {$photo['ReplyCode']} = {$photo['ReplyText']}\n";
                }
                $tot_image++;
            }

            // not needed if you do an INSERT ON DUPLICATE KEY UPDATE
            $sql = "SELECT * FROM ".RETS." WHERE `mls` = '$Ml_num'";
            $run = mysql_query($sql);
            $num = mysql_num_rows($run);
            // not needed
            if ($num == "") {
                $sql = "INSERT INTO ".RETS." (`id`, `status`, `address`, `description`, `bath`, `bed`, `street`, `country`, `extra`, `Municipality`, `zip`, `mls`, `broker`, `sale_lease`, `lot_price`, `build_year`, `sqft`,`tot_image`,`acres`,`addl_mo_fee`,`addr`,`a_c`,`all_inc`,`yr_built`,`apt_num`,`area`,`area_code`,`tv`,`ass_year`,`bsmt1_out`,`bsmt2_out`,`br`,`br_plus`,`cable`,`cac_inc`,`central_vac`,`comel_inc`,`community`,`community_code`,`cross_st`,`disp_addr`,`drive`,`elevator`,`constr1_out`,`constr2_out`,`den_fr`,`farm_agri`,`fpl_num`,`comp_pts`,`furnished`,`gar_spaces`,`gar_type`,`heat_inc`,`fuel`,`heating`,`hydro_inc`,`idx_dt`,`num_kit`,`kit_plus`,`laundry`,`laundry_lev`,`legal_desc`,`level1`,`level10`,`level11`,`level12`,`level2`,`level3`,`level4`,`level5`,`level6`,`level7`,`level8`,`level9`,`lp_dol`,`depth`,`front_ft`,`irreg`,`lotsz_code`,`mmap_page`,`mmap_col`,`mmap_row`,`municipality_district`,`municipality_code`,`oth_struc1_out`,`oth_struc2_out`,`outof_area`,`park_chgs`,`prkg_inc`,`park_spcs`,`parcel_id`,`pix_updt`,`pool`,`pvt_ent`,`prop_feat1_out`,`prop_feat2_out`,`prop_feat3_out`,`prop_feat4_out`,`prop_feat5_out`,`prop_feat6_out`,`ad_text`,`retirement`,`rm1_out`,`rm1_dc1_out`,`rm1_dc2_out`,`rm1_dc3_out`,`rm1_len`,`rm1_wth`,`rm10_out`,`rm10_dc1_out`,`rm10_dc2_out`,`rm10_dc3_out`,`rm10_len`,`rm10_wth`,`rm11_out`,`rm11_dc1_out`,`rm11_dc2_out`,`rm11_dc3_out`,`rm11_len`,`rm11_wth`,`rm12_out`,`rm12_dc1_out`,`rm12_dc2_out`,`rm12_dc3_out`,`rm12_len`,`rm12_wth`,`rm2_out`,`rm2_dc1_out`,`rm2_dc2_out`,`rm2_dc3_out`,`rm2_len`,`rm2_wth`,`rm3_out`,`rm3_dc1_out`,`rm3_dc2_out`,`rm3_dc3_out`,`rm3_len`,`rm3_wth`,`rm4_out`,`rm4_dc1_out`,`rm4_dc2_out`,`rm4_dc3_out`,`rm4_len`,`rm4_wth`,`rm5_out`,`rm5_dc1_out`,`rm5_dc2_out`,`rm5_dc3_out`,`rm5_len`,`rm5_wth`,`rm6_out`,`rm6_dc1_out`,`rm6_dc2_out`,`rm6_dc3_out`,`rm6_len`,`rm6_wth`,`rm7_out`,`rm7_dc1_out`,`rm7_dc2_out`,`rm7_dc3_out`,`rm7_len`,`rm7_wth`,`rm8_out`,`rm8_dc1_out`,`rm8_dc2_out`,`rm8_dc3_out`,`rm8_len`,`rm8_wth`,`rm9_out`,`rm9_dc1_out`,`rm9_dc2_out`,`rm9_dc3_out`,`rm9_len`,`rm9_wth`,`rms`,`rooms_plus`,`s_r`,`vend_pis`,`sewer`,`spec_des1_out`,`spec_des2_out`,`spec_des3_out`,`spec_des4_out`,`spec_des5_out`,`spec_des6_out`,`st_num`,`st_sfx`,`st_dir`,`st`,`style`,`yr`,`taxes`,`type_own_srch`,`type_own1_out`,`uffi`,`timestamp_sql`,`util_cable`,`gas`,`elec`,`util_tel`,`bath_tot`,`wcloset_t1`,`wcloset_t1lvl`,`wcloset_t2`,`wcloset_p2`,`wcloset_t2lvl`,`wcloset_t3`,`wcloset_p3`,`wcloset_t3lvl`,`wcloset_t4`,`wcloset_p4`,`wcloset_t4lvl`,`wcloset_t5`,`wcloset_p5`,`wcloset_t5lvl`,`water`,`water_inc`,`wtr_suptyp`,`waterfront`,`zoning`) 
                        VALUES (NULL, 'Active', '$Addr', '$Ad_text', '$Bath_tot', '$Br', '$St', '$County', '$Extras', '$Municipality', '$Zip', '$Ml_num', '$Rltr', '$S_r', '$Lp_dol', '$Yr_built', '$Sqft','$tot_image','$Acres','$Addl_mo_fee','$Addr','$Area','$Area_code','$All_inc','$Yr_built','$Apt_num','$Area','$Area_code','$Tv','$Ass_year','$Bsmt1_out','$Bsmt2_out','$Br','$Br_plus','$Cable','$Cac_inc','$Central_vac','$Comel_inc','$Community','$Community_code','$Cross_st','$Disp_addr','$Drive','$Elevator','$Constr1_out','$Constr2_out','$Den_fr','$Farm_agri','$Fpl_num','$Comp_pts','$Furnished','$Gar_spaces','$Gar_type','$Heat_inc','$Fuel','$Heating','$Hydro_inc','$Idx_dt','$Num_kit','$Kit_plus','$Laundry','$Laundry_lev','$Legal_desc','$Level1','$Level10','$Level11','$Level12','$Level2','$Level3','$Level4','$Level5','$Level6','$Level7','$Level8','$Level9','$Lp_dol','$Depth','$Front_ft','$Irreg','$Lotsz_code','$Mmap_page','$Mmap_col','$Mmap_row','$Municipality_district','$Municipality_code','$Oth_struc1_out','$Oth_struc2_out','$Outof_area','$Park_chgs','$Prkg_inc','$Park_spcs','$Parcel_id','$Pix_updt','$Pool','$Pvt_ent','$Prop_feat1_out','$Prop_feat2_out','$Prop_feat3_out','$Prop_feat4_out','$Prop_feat5_out','$Prop_feat6_out','$Ad_text','$Retirement','$Rm1_out','$Rm1_dc1_out','$Rm1_dc2_out','$Rm1_dc3_out','$Rm1_len','$Rm1_wth','$Rm10_out','$Rm10_dc1_out','$Rm10_dc2_out','$Rm10_dc3_out','$Rm10_len','$Rm10_wth','$Rm11_out','$Rm11_dc1_out','$Rm11_dc2_out','$Rm11_dc3_out','$Rm11_len','$Rm11_wth','$Rm12_out','$Rm12_dc1_out','$Rm12_dc2_out','$Rm12_dc3_out','$Rm12_len','$Rm12_wth','$Rm2_out','$Rm2_dc1_out','$Rm2_dc2_out','$Rm2_dc3_out','$Rm2_len','$Rm2_wth','$Rm3_out','$Rm3_dc1_out','$Rm3_dc2_out','$Rm3_dc3_out','$Rm3_len','$Rm3_wth','$Rm4_out','$Rm4_dc1_out','$Rm4_dc2_out','$Rm4_dc3_out','$Rm4_len','$Rm4_wth','$Rm5_out','$Rm5_dc1_out','$Rm5_dc2_out','$Rm5_dc3_out','$Rm5_len','$Rm5_wth','$Rm6_out','$Rm6_dc1_out','$Rm6_dc2_out','$Rm6_dc3_out','$Rm6_len','$Rm6_wth','$Rm7_out','$Rm7_dc1_out','$Rm7_dc2_out','$Rm7_dc3_out','$Rm7_len','$Rm7_wth','$Rm8_out','$Rm8_dc1_out','$Rm8_dc2_out','$Rm8_dc3_out','$Rm8_len','$Rm8_wth','$Rm9_out','$Rm9_dc1_out','$Rm9_dc2_out','$Rm9_dc3_out','$Rm9_len','$Rm9_wth','$Rms','$Rooms_plus','$S_r','$Vend_pis','$Sewer','$Spec_des1_out','$Spec_des2_out','$Spec_des3_out','$Spec_des4_out','$Spec_des5_out','$Spec_des6_out','$St_num','$St_sfx','$St_dir','$St','$Style','$Yr','$Taxes','$Type_own_srch','$Type_own1_out','$Uffi','$Timestamp_sql','$Util_cable','$Gas','$Elec','$Util_tel','$Bath_tot','$Wcloset_t1','$Wcloset_t1lvl','$Wcloset_t2','$Wcloset_p2','$Wcloset_t2lvl','$Wcloset_t3','$Wcloset_p3','$Wcloset_t3lvl','$Wcloset_t4','$Wcloset_p4','$Wcloset_t4lvl','$Wcloset_t5','$Wcloset_p5','$Water','$Water_inc','$Wtr_suptyp','$Waterfront','$Zoning')";
                $ins++;
            } else {
                $sql = "UPDATE ".RETS." SET `address` = '$Addr', `description` = '$Ad_text', `bath` = '$Bath_tot', `bed` = '$Br', `street` = '$St', `country` = '$County', `extra` = '$Extras', `Municipality` = '$Municipality', `zip` = '$Zip', `mls` = '$Ml_num', `broker` = '$Rltr', `sale_lease` = '$S_r', `lot_price` = '$Lp_dol', `build_year` = '$Yr_built', `sqft` = '$Sqft', `tot_image` = '$tot_image' WHERE `mls` = '$Ml_num'"; 
                $upd++;
            }   

            mysql_query($sql) or die(mysql_error());

        } // end while loop

    } // end of $rets->NumRows() check  

} // end of $_POST['update'] check 
```

我还考虑使用 a`INSERT ON DUPLICATE KEY UPDATE`而不是尝试编写两个不同的 sql 查询，具体取决于系统中是否存在该属性。

# django - 如何处理不验证的表单？

> ID：14682355
> 
> 赞同：0
> 
> 时间：2013-02-04T07:44:36.720
> 
> 标签：django, django-forms

所以我在我的 django 应用程序中处理一个表单，问题是，它根本没有验证。当我在不填写字段的情况下提交它时，它会重定向，即使它有错误的数据它仍然会重定向，这是我的表单，

```
class CheckoutForm(forms.ModelForm):
    def __init__(self,*args,**kwargs):
        super(CheckoutForm, self).__init__(*args, **kwargs)
        #overide default attributes
        for field in self.fields:
            self.fields[field].widget.attrs['size'] = '30'
        self.fields['credit_card_type'].widget.attrs['size'] ='1'
        self.fields['credit_card_expire_year'].widget.attrs['size'] = '1'
        self.fields['credit_card_expire_month'].widget.attrs['size'] = '1'
        self.fields['credit_card_cvv'].widget.attrs['size'] = '5'
    class Meta:
        model = Orders
        exclude = ('status','transaction_id',)

    credit_card_number = forms.CharField()
    credit_card_type = forms.CharField(widget=forms.Select(choices=CARD_TYPES))
    credit_card_expire_month = forms.CharField(widget=forms.Select(choices=cc_expire_months()))
    credit_card_expire_year = forms.CharField(widget=forms.Select(choices=cc_expire_years()))
    credit_card_cvv = forms.CharField() 
```

这是应该验证表单的视图，

```
def show_checkout(request):
    if order.is_empty(request):
        cart_url = urlresolvers.reverse('order_index')
        return HttpResponseRedirect(cart_url)
    if request.method == 'POST':
        postdata = request.POST.copy()
        form = forms.CheckoutForm(request.POST,postdata)
        if form.is_valid():
            response = checkout.process(request)
            order_number = response.get('order_number',0)
            error_message = response.get('message','')
            if order_number:            
                request.session['order_number'] = order_number
        if postdata['submit'] == 'place order':
            reciept_url = urlresolvers.reverse('checkout_reciept')
            return HttpResponseRedirect(reciept_url)
        else:
            error_message = u'Correct these errors'
    else:
        form = forms.CheckoutForm()
    context = {
        'form':form,
        'error_message':error_message
    }
    return render_to_response('checkout/checkout.html',context,context_instance=RequestContext(request)) 
```

这是模板中正在做的事情，

```
{% block content %}
<h1>Checkout</h1>{% if error_message %}
 <ul class="errorlist">
  <li>{{ error_message }}</li>
 </ul>
{% endif %}
<form action="." method = "post">
 <fieldset class="checkout">
  <legend>Contact Info</legend>
  <table>
  {% form_table_row form.email %}
  {% form_table_row form.phone %}
  </table>
 </fieldset>
 <fieldset class="checkout">
  <legend>Delivery Info</legend>
  <table>
  {% form_table_row form.delivery_name%}
  {% form_table_row form.delivery_address %}
  {% form_table_row form.delivery_city %}
  </table>
 </fieldset>
 <fieldset class="checkout">
  <legend>Billing Info</legend>
  <table>
  {% form_table_row form.billing_name %}
  {% form_table_row form.billing_address %}
  {% form_table_row form.billing_city %}
  </table>
 </fieldset>
 <fieldset class="checkout">
  <legend>Credit Card Info</legend>
  <table>
  {% form_table_row form.credit_card_number %}
  {% form_table_row form.credit_card_type %}
  {% form_table_row form.credit_card_expire_month %}
  {% form_table_row form.credit_card_expire_year %}
  {% form_table_row form.credit_card_cvv %}
  </table>
 </fieldset>
 <table>
 <tr>
 <form method="post" action=".">
  {% csrf_token %}
  <th colspan="2">  
   <input name="submit" type="submit" value="place order" class="submit" />
  </th>
 </form> 
 </tr>
 </table>
</form> 
```

现在我知道这似乎很多，但因为我不确定问题出在哪里，因为我从未遇到过它，也不清楚我一直在检查的几种解释。

# php - 相对命名空间和 call_user_func()

> ID：14682356
> 
> 赞同：9
> 
> 时间：2013-02-04T07:44:37.083
> 
> 标签：php, namespaces

代码胜于雄辩：

*命名空间.php*：

```
<?php

namespace foo;

use foo\models;

class factory
{
    public static function create($name)
    {
        /*
         * Note 1: FQN works!
         * return call_user_func("\\foo\\models\\$name::getInstance");
         *
         * Note 2: direct instantiation of relative namespaces works!
         * return models\test::getInstance();
         */

        // Dynamic instantiation of relative namespaces fails: class 'models\test' not found
        return call_user_func("models\\$name::getInstance");
    }
}

namespace foo\models;

class test
{
    public static $instance;

    public static function getInstance()
    {
        if (!self::$instance) {
            self::$instance = new self;
        }

        return self::$instance;
    }

    public function __construct()
    {
        var_dump($this);
    }
} 
```

*namespace_test.php*：

```
<?php

require_once 'namespaces.php';

foo\factory::create('test'); 
```

正如所评论的，如果我在其中使用完全限定名称，`call_user_func()`它会按预期工作，但如果我使用相对名称空间，它会说找不到该类——但直接实例化是有效的。我是否遗漏了某些东西，或者它的设计*很奇怪*？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-04T07:50:34.580

您必须在回调中使用完全限定的类名。

请参阅[使用命名空间名称的](http://www.php.net/manual/en/function.call-user-func.php)[示例 #3`call_user_func()`](http://www.php.net/manual/en/function.call-user-func.php)

```
<?php

namespace Foobar;

class Foo {
    static public function test() {
        print "Hello world!\n";
    }
}

call_user_func(__NAMESPACE__ .'\Foo::test'); // As of PHP 5.3.0
call_user_func(array(__NAMESPACE__ .'\Foo', 'test')); // As of PHP 5.3.0 
```

我相信这是因为`call_user_func`它是来自全局范围的函数，也执行来自全局范围的回调。无论如何，请参见第一句话。

另请参阅上面的注释[示例 #2 动态访问命名空间元素](http://php.net/namespaces.dynamic)，其中声明

> 必须使用完全限定名（带有命名空间前缀的类名）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T10:28:26.417

在当前版本的 PHP 中，你拥有它的方式就是它的方式——当使用一个字符串来引用一个类名时，它需要完全限定它的完整命名空间。这不是很好，但就是这样。

在即将发布的 PHP v5.5 中，它们将包含一个功能来解决这个问题，通过提供一种新`Classname::class`语法，您可以使用它来代替将 FQN 类名放在字符串中。

有关这方面的更多信息，请在此处查看相关的 PHP RFC 页面：[https ://wiki.php.net/rfc/class_name_scalars](https://wiki.php.net/rfc/class_name_scalars)

您的代码将如下所示：

```
return call_user_func([models\$name::class,"getInstance"]); 
```

这可能不准确；我没有 5.5 的副本可供测试以确认。但无论哪种方式，新语法都会让你的用例变得更好。

# javascript - Jquery UI 对话框 - 动态加载对话框，而不仅仅是它的内容

> ID：14682359
> 
> 赞同：2
> 
> 时间：2013-02-04T07:45:14.760
> 
> 标签：javascript, html, jquery-ui, jquery-ui-dialog

我从我的设计师那里收到了一个 html 文件，其中包含一个登录对话框（Jquery UI）。当我尝试动态加载它时，我在另一个对话框中看到了设计好的对话框。这是我的 HTML：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>groboot</title>
<link rel="stylesheet" type="text/css"  href="views/viewobjects/css/styles.css" />

</head>
<body>
<div id="loginViewDialog" class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable dialog-box transparent" tabindex="-1" role="dialog" aria-labelledby="ui-dialog-title-2">

<div class="innerbox">

<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">
<span class="ui-dialog-title" id="ui-dialog-title-2">Login</span>
<a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button">
<span class="ui-icon ui-icon-closethick">close</span>
</a>
</div><!-- end div ui-dialog-title-2 -->

<div class="ui-dialog-content ui-widget-content dialog clr" >

<div class="loginform">

<input id="emailTextField"  class="input-text" type="text" value="Email / User name:" />
<input class="input-text" id="passwordTextField" type="password" value="Password" />

</div>
<input id="keepLoginCheckBox" type="checkbox" /><label for="keepLoginCheckBox"> Keep me logged in</label><br />

<span id="loginMessageSpan" >message</span><br />
<a href="#" id="loginUserButton" class="floatlft" ><span>Login</span></a>
<a href="#" id="forgotPasswordButton" title="Forgot your password?" ><span>Forgot your password?</span></a>
</div><!--ui-dialog-content-->
</div><!--innerbox-->
<div class="center">
<a href="#" id="emailSupportButton" title="Forgot your password?" ><span>Email Support</span></a>
<a href="#" id="newUserButton" title="Register a New User (free)" ><span>Register a New User (free)</span></a>
</div><!--center-->
</div><!--loginViewDialog-->
</body>
</html> 
```

这是我在 AJAX 中加载它的方式：

```
_prototype.initView = function () {
    var self = this;
    $(self._currentDiv).load("views/viewobjects/LoginView.html", function () {

        self._defaultSettings = {
            title: "Login",
            hide: "fade",
            show: "fade",
            modal: true,
            resizable: false,
            autoOpen: true,
            minWidth: 465,
            maxWidth: 800,
            minHeight: 200,
            maxHeight: 200,
            //dialogClass: "loginDialogDiv",
            draggable: true
        };

            $(self._dialogDiv).html(self._currentDiv);
$(this._dialogDiv).dialog(this._defaultSettings);
        });
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:00:44.370

我认为问题在于您的 HTML 视图文件的 div 比您需要的多。如果仔细观察，您会在 HTML 中看到一些 JQueryUI 对话框类。

试试这个 HTML 文件：

```
<div class="innerbox">
    <div class="dialog clr" >
        <div class="loginform">
            <input id="emailTextField"  class="input-text" type="text" value="Email / User name:" />
            <input class="input-text" id="passwordTextField" type="password" value="Password" />

        </div>
        <input id="keepLoginCheckBox" type="checkbox" /><label for="keepLoginCheckBox"> Keep me logged in</label><br />
        <span id="loginMessageSpan" >message</span><br />
        <a href="#" id="loginUserButton" class="floatlft" ><span>Login</span></a>
        <a href="#" id="forgotPasswordButton" title="Forgot your password?" ><span>Forgot your password?</span></a>
    </div><!--ui-dialog-content-->
</div><!--innerbox-->
<div class="center">
    <a href="#" id="emailSupportButton" title="Forgot your password?" ><span>Email Support</span></a>
    <a href="#" id="newUserButton" title="Register a New User (free)" ><span>Register a New User (free)</span></a>
</div><!--center--> 
```

基本上，您的原始 HTML 文件有一些带有 JQueryUI 使用的类的 div，例如`ui-dialog-titlebar`或`ui-dialog-content`. 因此，您的页面呈现良好，但重复应用了 CSS 样式，因此您会在对话框中看到一个对话框。

# spring - spring3 和 struts2 集成

> ID：14682360
> 
> 赞同：2
> 
> 时间：2013-02-04T07:45:14.823
> 
> 标签：spring, spring-mvc, struts2, spring-integration

我在我的应用程序中使用 struts2 和休眠。我已将 ContextLoaderListener 添加到`web.xml`.

在`ApplicationContext.xml`中，我有 2 个这样的 bean：

```
<bean id="TestImpl"
      class="Service.Impl.TestImpl">
</bean>
<bean id="testaction"
      class="Action.TestAction">
     <property name="TestIml" ref="TestImpl"/>
</bean> 
```

在 TestAction 类中，我有一个对象和该对象的方法，如下所示：

```
private TestImpl test1;
String m = test1.testService(); 
```

它也有get和set。当我运行这个项目时，当谈到

```
String m = test1.testService() 
```

出现空指针异常。我不确定所有配置是否正确完成或遗漏了什么。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:43:40.163

既然你已经在使用 Struts2 + Spring，为什么不使用他们的插件呢？可以在[这里找到](http://struts.apache.org/2.2.3/docs/spring-and-struts-2.html)

通过使用该插件，您可以更紧密地集成到 Struts 2。这使您能够将 bean 注入到内部框架对象中，而不仅仅是注入到您自己的 bean 中。

例如，使用插件 Struts 2 将检查您的所有操作，当它创建它们以服务请求并注入它们时。默认情况下，Struts2-spring 插件按名称使用 autowire。因此，例如在您的操作类中，您有此代码。

```
public class LoginAction extends UserAction{

    public String execute() {
        return "success";
    }

    public AuthenticateLoginService getAuthenticateLoginService() {
        return authenticateLoginService;
    }

    public void setAuthenticateLoginService(
            AuthenticateLoginService authenticateLoginService) {
        this.authenticateLoginService = authenticateLoginService;
    }

    private AuthenticateLoginService authenticateLoginService;

} 
```

在您的 applicationContext.xml 中，您有此配置。

```
<bean id="authenticateLoginService" class="services.AuthenticateLoginService"
    scope="singleton">
    <... some properties here
</bean> 
```

所有具有名为“authenticateLoginService”的实例变量的Action Classes，然后spring会将`authenticateLoginService`bean注入到所有具有名为的实例变量的类中`authenticateLoginService`，前提是它具有setter和getter

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T09:28:20.840

你`test1`就是`null`为什么它`null pointer exception`在这`String m = test1.testService()`条线上抛出。

我不确定，但你可以试试这个。 `property name="test1"`代替`property name="TestIml"`

# oracle-adf - 如何更改 adf 中的数据库连接？

> ID：14682365
> 
> 赞同：0
> 
> 时间：2013-02-04T07:45:32.777
> 
> 标签：oracle-adf, jdeveloper

我有一个 adf 应用程序。我需要更改其数据库连接。我添加了一个新连接并删除了旧连接，但是当我尝试在按钮上执行某些操作时单击它给了我错误

```
ADF: Adding the following JSF error message: Connection name oldDBConn is not defined.
oracle.jbo.ConfigException: JBO-33003: Connection name oldDBConn is not defined. 
```

我的 jdev 版本是 11.1.1.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-19T12:10:32.677

转到 Model.jspx 并删除旧连接并尝试查看 Model.jspx 的源代码以查看旧连接是否存在

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:22:17.800

您能否转到应用程序模块 - 连接并确保已选择新的数据库连接。此外，一旦您创建了连接，您就可以对其进行一次测试，以确保 SID/服务名称没有弄乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T09:33:35.917

您的帖子不清楚的是当您从集成 WLS 运行或部署独立服务器后发生的错误？我假设前者。

另外假设您使用的是 ADF 业务组件，您应该右键单击模型项目，选择项目属性，然后选择 ADF 业务组件节点并确保连接选项已选择您的新连接。

# sql - 如何使用多输出参数调用 Oracle 函数

> ID：14682369
> 
> 赞同：-1
> 
> 时间：2013-02-04T07:45:47.617
> 
> 标签：sql, oracle, function, sql-function

> **可能重复：**
> [在 TOAD 中调用存储过程](https://stackoverflow.com/questions/14639604/calling-a-stored-procedure-in-toad)

我在 Oracle 中获得了一个函数，如下所示。但是我无法让它运行。

```
FUNCTION GetAdres (pCif        NUMBER,
                    pAddressno NUMBER DEFAULT 0,
                   pAdrSerino NUMBER ,
                    pRAdres      OUT T_ADRES%ROWTYPE,
                   pErrCode      OUT NUMBER,
                   pErrMes      OUT VARCHAR2
                     ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:53:55.910

认为您应该使用**Procedure**，而不是**Function**

Oracle 函数可以使用另一种语法返回一个且只有一个值。

```
CREATE FUNCTION GetAdres(parameter1  IN NUMBER, parameter2 IN NUMBER) 
   RETURN NUMBER 
```

事实上，您可以在 Oracle 函数中使用 OUT 参数（我的错），但无论如何您都需要一个唯一的返回类型。

但

**您可以在 Oracle过程**中完美地使用多个 OUT 参数...

所以

**解决方案**1（我会选择这个）

使用过程而不是函数

**解决方案2**

创建自定义类型并将其用作返回类型。

```
create a custom type
CREATE TYPE my_type as object
    (Adres      VARCHAR2(100), 
     ErrCode    NUMBER,
     ErrMes     VARCHAR2(250));

CREATE FUNCTION GetAdres (pCif        NUMBER,
                    pAddressno NUMBER DEFAULT 0,
                   pAdrSerino NUMBER)
  RETURN my_type; 
```

# javascript - 从一个 HTML5 画布中抓取并绘制到另一个

> ID：14682374
> 
> 赞同：0
> 
> 时间：2013-02-04T07:46:17.513
> 
> 标签：javascript, image-processing, html5-canvas

我正在尝试从一个画布元素中获取像素信息，对其进行操作，然后将其绘制到另一个画布元素上。当我在同一个画布上画画时，我已经能够完成这项工作。它也可以按特定顺序工作，但不是我需要的顺序。

这个想法是让隐藏的画布保存图像信息，我可以从中提取像素，进行操作，然后绘制到主画布。这在我从 myCanvas 绘制到 myCanvas2 时有效，但反之则不行。我从中获取数据的图像不需要是画布，事实上，如果它不是我想要的尽可能少的资源，我更喜欢它。

```
<!DOCTYPE html>
<html>
<body>

<canvas id="myCanvas" width="300" height="150" style="border:1px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag.</canvas>

<canvas id="myCanvas2" width="800" height="150" style="border:1px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag.</canvas>

<script>
var image = new Image();
image.src = 'http://timsterrible.net/gaming/pixelsweeper/images/bariumStrip.png';

var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
ctx.fillStyle="red";
ctx.fillRect(10,10,50,50);

var canRaw = document.getElementById("myCanvas2");
var canvas = canRaw.getContext("2d");

image.onload = canvas.drawImage(image, 0, 0);

function copy()
{
var imgData=ctx.getImageData(32,0,32,32);
canvas.putImageData(imgData,10,70);
}
</script>

<button onclick="copy()">Copy</button>

</body>
</html> 
```

我的目标是在混合时将一种化学品泄漏到另一种化学品中。现在它们非常坚固，当你[在这里玩](http://timsterrible.net/gaming/pixelsweeper/stack/pixelsweeper.html)时可以看到一些东西。

感谢您对这种令人困惑的烦恼提供的任何帮助。

[http://timsterrible.net/gaming/pixelsweeper/stack/notmixing.png](http://timsterrible.net/gaming/pixelsweeper/stack/notmixing.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:14:57.573

希望以下内容可以为您解决问题提供一些帮助。将函数 getPixel 作为一种方法添加到用于包含从中提取数据所需的图像的画布中。将函数 putPixel 作为方法添加到用于包含最终组合图像的画布中。

我添加了对函数的快速测试，以查看两个图像[summer.jpg](https://ed72560c-a-62cb3a1a-s-sites.googlegroups.com/site/jkgadgetstore/rolocu/summer.jpg?attachauth=ANoY7cow1whv64AcTzv7iR90s3PY1cTzUdT1FTQ5OKVCT_aOeEKvwYVqjPBVFuA2Sv9bA6HkhnqL2lDeow7HhxE9-1u-Nu0zvLJjk8dhtjKY4O8SAkNFvYQyskqeqzm3YmY_03Hk7nyAsrbghrBJIFM4P5DgvQtnhGslx1kFot99kjy6O3kd8cqaLaPOLaUrJiGN0Be7pMshMAp__t74gV8qJyHXkLQlVg%3D%3D&attredirects=0)和[winter.jpg](https://ed72560c-a-62cb3a1a-s-sites.googlegroups.com/site/jkgadgetstore/rolocu/winter.jpg?attachauth=ANoY7cqTSByJ3xaLV35ooyqG1cdXtNrjD5zLmkvM83vUf7Ixv_y_aY8hjRK8YoxHO-zcAzViPgIbcgliWHKy83D49117Psqw1U2Vzmp2oWZn-VxHCwDKLRePfcI0o4wMZFGXcHXZTJ7fHcQXNxp63kUvMT-GkJ6xH8RzzZMNs2148p_tzDyGWIvz21Ppi1gM4gNwsKYVUl-ABAPWiEIzdFn3_cHi90kSsw%3D%3D&attredirects=0)的中心部分是否正确组合。

下面代码的限制是画布和图像都具有相同的宽度和高度，但可以轻松更改。

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>pixel swap</title>
<style type="text/css">
    div, canvas, img {
        position: absolute;
    }

    img {
        top:0px;
        left:0px;
        visibility:hidden;
    }

    #imagedata {
        left:10px;
        top:10px;
        visibility:hidden;
    }
    #maincanvas {
        left:10px;
        top:10px;
        border:1px solid black;
    }

</style>
<script type="text/javascript">
    // abbreviation function for getElementById
    function $(id) {
      return document.getElementById(id);
    }

    //height and width for all canvases and images
    var W=100;
    var H=100;

    //variables for canvases
    var cid, cmain;

    /*getPixel gets an individual pixel from the image, img
     */
    function getPixel(x,y,img) {
        this.ctx.drawImage(img,0,0);
        var imdata=this.ctx.getImageData(0,0,this.width,this.height);
        var col=4*(y*this.width+x);
        var pix=new Pixel();
        pix.red=imdata.data[col++];
        pix.green=imdata.data[col++];
        pix.blue=imdata.data[col++];
        pix.alpha=imdata.data[col];
        return pix;
    }

    //Pixel Object
    function Pixel() {
        this.red;
        this.green;
        this.blue;
        this.alpha;
    }

    function putPixel(x,y,pixel){
        var imdata=this.ctx.getImageData(0,0,this.width,this.height);
        var col=4*(y*this.width+x);
        imdata.data[col++]=pixel.red;
        imdata.data[col++]=pixel.green;
        imdata.data[col++]=pixel.blue;
        imdata.data[col]=pixel.alpha;
        this.ctx.putImageData(imdata,0,0);
    }

    function main() {
        //set cid so that pixels are readable
        cid=$("imagedata");
        cid.width=W;
        cid.height=H;
        cid.ctx=cid.getContext('2d');
        cid.getPixel=getPixel;

        //set cmain so that pixels are settable to main canvas
        cmain=$("maincanvas");
        cmain.width=W;
        cmain.height=H;
        cmain.ctx=cmain.getContext('2d');
        cmain.putPixel=putPixel;

        var img; //image read from
        var pixel;//pixel data

        //testing getPixel and putPixel
        //should be alternating columns in the centre of the combined image in cmain canvas
        for(var x=30;x<70;x++) {
            for(var y=30;y<70;y++) {
                if(x%2==0) {
                    img=$("s")
                }
                else
                {
                    img=$("w")
                }
                pixel=cid.getPixel(x,y,img);
                cmain.putPixel(x,y,pixel);
            }
        }
    }
</script>
</head>
<body onload="main()">
    <!-- list of hidden images for reading data-->
    <img id="s" src="images/summer.jpg">
    <img id="w" src="images/winter.jpg">
    <!-- end of list of images  -->

    <canvas id="imagedata"></canvas>
    <canvas id="maincanvas"></canvas>   
</body>
</html> 
```

# android - 完成下一个按钮单击操作后如何清除单选按钮组？

> ID：14682378
> 
> 赞同：0
> 
> 时间：2013-02-04T07:46:29.840
> 
> 标签：android, radio-button

我是安卓新手。。

我在取消选中组中的单选按钮时遇到问题....

我的问题是......

我正在开发一个基于测验的应用程序。当用户打开此应用程序时，将有 1 个任务和 4 个选择（单选按钮）单选按钮将被取消选中，但当用户回答 1 个任务并且当他进行下一个任务单选按钮时，将出现问题。我想取消选中/重置每个任务的单选按钮。我该怎么做？

我面临的另一个问题是......如果假设用户选择了第一个按钮，他想再次更改选项，所以他选择了另一个按钮，那时他不应该选择..

如何实施？

任何帮助，将不胜感激。

> ```
>  protected void onPostExecute(String file_url) {
>         pDialog.dismiss();
>      ques1=new ArrayList<String>(new ArrayList<String>(ques1));
>         //  j=0;
>         TextView txtque = (TextView) findViewById(R.id.que_txt); 
>         txtque.setText(ques1.get(j));
> answ1=new ArrayList<String>(new ArrayList<String>(answ1));
>         btn_practice1.setText(answ1.get(0));
>         btn_practice2.setText(answ1.get(1));
>         btn_practice3.setText(answ1.get(2));
>         btn_practice4.setText(answ1.get(3));
>         btn_practicerg.setOnCheckedChangeListener(new OnCheckedChangeListener() {
>             @Override
>             public void onCheckedChanged(RadioGroup group, int checkedId) { 
>                 RadioButton radioButton = (RadioButton) findViewById(checkedId);
>                 String temp = radioButton.getText().toString();
>                 crrtans=new ArrayList<String>(new ArrayList<String>(crrtans));
>                 if (temp.equals(crrtans.get(l))){
>                 TextView txtRadio = (TextView) findViewById(R.id.rdtxt); 
>                 txtRadio.setText("" + radioButton.getText() + " IS CORRECT");   
>                 txtRadio.setTextColor(Color.parseColor("#008000"));
>             }else{
>                 //RadioButton radioButton1 = (RadioButton) findViewById(checkedId);
>                    // Toast.makeText(Question.this, "" + radioButton.getText(), 2000).show(); 
>                     TextView txtRadio = (TextView) findViewById(R.id.rdtxt); 
>                     txtRadio.setText("" + radioButton.getText() + "is INCORRECT");
>                     txtRadio.setTextColor(Color.parseColor("#FF0000"));
>             }
>             }
>      });
>     Button nextBtn = (Button) findViewById(R.id.nxt_btn);
>     nextBtn.setOnClickListener(new Button.OnClickListener(){
>       public void onClick(View v){  
>           if (j == ques1.size() -1) {
>                 finish();
>             }
>           else{ 
>             ++j;
>             TextView txtque = (TextView) findViewById(R.id.que_txt); 
>             txtque.setText(ques1.get(j));
>             ++k;
>             btn_practice1.setText(answ1.get((k*4)+0));
>             btn_practice2.setText(answ1.get((k*4)+1));
>             btn_practice3.setText(answ1.get((k*4)+2));
>             btn_practice4.setText(answ1.get((k*4)+3));
>           }
>           btn_practicerg.setOnCheckedChangeListener(new OnCheckedChangeListener() {
>                 @Override
>                 public void onCheckedChanged(RadioGroup group, int checkedId) { 
>                     RadioButton radioButton = (RadioButton) findViewById(checkedId);
>                     String temp = radioButton.getText().toString();
>                     l++;
>                     if (temp.equals(crrtans.get(l))){
>                     TextView txtRadio = (TextView) findViewById(R.id.rdtxt); 
>                     txtRadio.setText("" + radioButton.getText() + " IS CORRECT");   
>                     txtRadio.setTextColor(Color.parseColor("#008000"));
>                 }else{
>                     //RadioButton radioButton1 = (RadioButton) findViewById(checkedId);
>                        // Toast.makeText(Question.this, "" + radioButton.getText(), 2000).show(); 
>                         TextView txtRadio = (TextView) findViewById(R.id.rdtxt); 
>                         txtRadio.setText("" + radioButton.getText() + " IS INCORRECT");
>                         txtRadio.setTextColor(Color.parseColor("#FF0000"));
>                 }
>                 }      
>          });
>      }
> });   
>     Button previousbtn = (Button) findViewById(R.id.prv_btn);
>     previousbtn.setOnClickListener(new Button.OnClickListener(){
>     public void onClick(View v){
>         if (j <= 0) {
>             Toast.makeText(Question.this, "First Question",Toast.LENGTH_SHORT).show();
>             } else {
>             --j;
>             TextView txtque = (TextView) findViewById(R.id.que_txt); 
>             txtque.setText(ques1.get(j));
>             --k;
>             btn_practice1.setText(answ1.get((k*4)+0));
>             btn_practice2.setText(answ1.get((k*4)+1));
>             btn_practice3.setText(answ1.get((k*4)+2));
>             btn_practice4.setText(answ1.get((k*4)+3));
>             }
>          btn_practicerg.setOnCheckedChangeListener(new OnCheckedChangeListener() {
>                 @Override
>                 public void onCheckedChanged(RadioGroup group, int checkedId) { 
>                     RadioButton radioButton = (RadioButton) findViewById(checkedId);
>                     String temp = radioButton.getText().toString();
>                     l--;
>                     if (temp.equals(crrtans.get(l))){
>                     TextView txtRadio = (TextView) findViewById(R.id.rdtxt); 
>                     txtRadio.setText("" + radioButton.getText() + " IS CORRECT");   
>                     txtRadio.setTextColor(Color.parseColor("#008000"));
>                 }else{
>                     //RadioButton radioButton1 = (RadioButton) findViewById(checkedId);
>                        // Toast.makeText(Question.this, "" + radioButton.getText(), 2000).show(); 
>                         TextView txtRadio = (TextView) findViewById(R.id.rdtxt); 
>                         txtRadio.setText("" + radioButton.getText() + " IS INCORRECT");
>                         txtRadio.setTextColor(Color.parseColor("#FF0000"));
>                 }
>                 }      
>          });
>          }
>     });
>     } 
> ```
> 
> 原木猫

```
 E/AndroidRuntime(1457): FATAL EXCEPTION: main
             E/AndroidRuntime(1457): java.lang.NullPointerException
             E/AndroidRuntime(1457):    at 
           com.example.finalpractice.Question$LoadQuestions$1.onCheckedChanged(Question.java:205)
             E/AndroidRuntime(1457):    at 
           android.widget.RadioGroup.setCheckedId(RadioGroup.java:172)
             E/AndroidRuntime(1457):    at 
           android.widget.RadioGroup.check(RadioGroup.java:166)
             E/AndroidRuntime(1457):    at    
           android.widget.RadioGroup.clearCheck(RadioGroup.java:205)
             E/AndroidRuntime(1457):    at 
           com.example.finalpractice.Question$LoadQuestions$2.onClick(Question.java:238)
             E/AndroidRuntime(1457):    at android.view.View.performClick(View.java:2485)
             E/AndroidRuntime(1457):    at android.view.View$PerformClick.run(View.java:9080)
             E/AndroidRuntime(1457):    at 
           android.os.Handler.handleCallback(Handler.java:587)
             E/AndroidRuntime(1457):    at 
           android.os.Handler.dispatchMessage(Handler.java:92) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T07:55:27.723

用这个..

```
RadioGroup radiogrp = (RadioGroup)findViewById(R.id.radiogrp); 
```

点击里面

```
radiogrp.clearCheck(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:58:14.890

添加`radioGroup.clearCheck();`到您的下一步按钮。

```
 Button nextBtn = (Button) findViewById(R.id.nxt_btn);
nextBtn.setOnClickListener(new Button.OnClickListener(){
  public void onClick(View v){  
      if (j == ques1.size() -1) {
            finish();
        }
      else{ 
        ++j;
        TextView txtque = (TextView) findViewById(R.id.que_txt); 
        txtque.setText(ques1.get(j));
        ++k;
        btn_practicerg.clearCheck();
        btn_practice1.setText(answ1.get((k*4)+0));
        btn_practice2.setText(answ1.get((k*4)+1));
        btn_practice3.setText(answ1.get((k*4)+2));
        btn_practice4.setText(answ1.get((k*4)+3));
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T12:42:49.247

这是解决方案。

在 onCheckedChanged() 中添加以下 2 行代码。

```
int selectedId = group.getCheckedRadioButtonId();
RadioButton radioButton = (RadioButton) group.findViewById(selectedId); 
```

在您的代码中进行了相同的更改。

```
Button previousbtn = (Button) findViewById(R.id.prv_btn);
previousbtn.setOnClickListener(new Button.OnClickListener(){
public void onClick(View v){
    if (j <= 0) {
        Toast.makeText(Question.this, "First Question",Toast.LENGTH_SHORT).show();
        } else {
        --j;
        TextView txtque = (TextView) findViewById(R.id.que_txt); 
        txtque.setText(ques1.get(j));
        --k;
        btn_practice1.setText(answ1.get((k*4)+0));
        btn_practice2.setText(answ1.get((k*4)+1));
        btn_practice3.setText(answ1.get((k*4)+2));
        btn_practice4.setText(answ1.get((k*4)+3));
        }
     btn_practicerg.setOnCheckedChangeListener(new OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(RadioGroup group, int checkedId) { 
            int selectedId = group.getCheckedRadioButtonId();
        RadioButton radioButton = (RadioButton) group.findViewById(selectedId);
                String temp = radioButton.getText().toString();
                l--;
                if (temp.equals(crrtans.get(l))){
                TextView txtRadio = (TextView) findViewById(R.id.rdtxt); 
                txtRadio.setText("" + radioButton.getText() + " IS CORRECT");   
                txtRadio.setTextColor(Color.parseColor("#008000"));
            }else{
                //RadioButton radioButton1 = (RadioButton) findViewById(checkedId);
                   // Toast.makeText(Question.this, "" + radioButton.getText(), 2000).show(); 
                    TextView txtRadio = (TextView) findViewById(R.id.rdtxt); 
                    txtRadio.setText("" + radioButton.getText() + " IS INCORRECT");
                    txtRadio.setTextColor(Color.parseColor("#FF0000"));
            }
            }      
     });
     }
}); 
```

# java - 使用键盘的 Java 球碰撞检测

> ID：14682379
> 
> 赞同：0
> 
> 时间：2013-02-04T07:46:45.660
> 
> 标签：java, awt, collision-detection, java-2d

我创建了一个java程序来绘制2个圆圈并使用键盘移动..我需要测试碰撞......一旦两个球在一起......它会弹出消息“检测到碰撞”

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

class BallObject {
private int x;
private int y;
private int radius;

BallObject() {
    x=0;
    y=0;
    radius=0;
}

BallObject (int x,int y,int radius) {
    this.x=x;
    this.y=y;
    this.radius=radius;
}
public void setX(int x) {this.x=x;}
public void setY(int y) {this.y=y;}
public void setRadius(int r) {radius=r;}

public int getX() {return x;}
public int getY() {return y;}
public int getRadius() {return radius;}

}

class Ball extends JFrame implements KeyListener {
 BallObject ball1;
 BallObject ball2;

Ball() {
    super("COLLISION DETECTION BETWEEN TWO BALLS");

    setSize(800,600); //set screen resolution
    ball1 = new BallObject(getWidth()/2,getHeight()/2,20);
    ball2 = new BallObject(40,40,20);
    addKeyListener(this);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setVisible(true);
}

public void paint(Graphics g) {
    Graphics2D g2d = (Graphics2D)g;

    g2d.setColor(Color.BLACK);
    g2d.fill(new Rectangle(0,0,800,600));

    //drawing ball1
    g2d.setColor(Color.RED);
    g2d.fillOval(ball1.getX(),ball1.getY(),ball1.getRadius()*2,ball1.getRadius()*2);
    //drawing ball2
    g2d.setColor(Color.GREEN);
    g2d.fillOval(ball2.getX(),ball2.getY(),ball2.getRadius()*2,ball2.getRadius()*2);
}

public static void main (String args[]) {

   new Ball();
}

public void keyPressed(KeyEvent e) {
    if(e.getKeyCode()==KeyEvent.VK_LEFT)
        ball1.setX(ball1.getX()-2);

    if(e.getKeyCode()==KeyEvent.VK_RIGHT)
        ball1.setX(ball1.getX()+2);

    if(e.getKeyCode()==KeyEvent.VK_UP)
        ball1.setY(ball1.getY()-2);

    if(e.getKeyCode()==KeyEvent.VK_DOWN)
        ball1.setY(ball1.getY()+2);

    if(e.getKeyCode()==KeyEvent.VK_A){
            ball2.setX(ball2.getX()-2);
            //System.out.println("Hello");
    }

    if(e.getKeyCode()==KeyEvent.VK_D)
        ball2.setX(ball2.getX()+2);

    if(e.getKeyCode()==KeyEvent.VK_W)
        ball2.setY(ball2.getY()-2);

    if(e.getKeyCode()==KeyEvent.VK_S)
        ball2.setY(ball2.getY()+2);

        repaint();
}

            //redraw the screen to show the updated ball location
public void keyTyped(KeyEvent e) {}
public void keyReleased(KeyEvent e) {}

} 
```

所以现在我想测试两个圆圈之间的碰撞..

```
if (((ball2.getX()-ball1.getX())* (ball2.getX()-ball1.getX())) + ((ball2.getY()-ball1.getY())* (ball2.getY()-ball1.getY()))
            < ball1.getRadius() + ball2.getRadius()* ball1.getRadius() + ball2.getRadius() );

{
    System.out.println("The 2 circles are colliding!");
}
    } 
```

但是程序无法正常工作..请帮助..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T07:49:50.313

1）你为什么有这个词`ball2.getRadius()* ball1.getRadius()`？`(R1 + R2)*(R1 + R2)`应该是两者距离的平方。

2）请清理代码..

```
int dX = ball2.getRadius()* ball1.getRadius(), dY = ball2.getY()-ball1.getY();
int R = ball1.getRadius() + ball2.getRadius();

if( (dX*dX +dY*dY) < R*R){ 
```

或将所有这些移到成员函数中。

```
if( ball2.distanceSquared(ball1) <R*R){ 
```

或者

```
if(ball2.collide(ball1)){ 
```

# android - android:name 中的前导点是什么意思？

> ID：14682382
> 
> 赞同：3
> 
> 时间：2013-02-04T07:46:58.313
> 
> 标签：android, android-manifest

这两种设置 android:name 字段的方式有什么区别？

我看到了这两种类型，不知道为什么它们是用这两种不同的方式写的

我经常看到的一种方式是（注意“”和“服务器”之间的“。”）：

```
 android:name=".Server" 
```

没有额外的“。”的另一种方式 姓名前：

```
 android:name="Server" 
```

示例 xml

```
 <service
        android:name=".Server"
        android:icon="@drawable/ic_launcher"
        android:label="audioservice"
        android:process=":my_process" >
    </service>

     <activity android:name=".DBView"> 
        <intent-filter >
            <action android:name="com.example.test.DBVIEW"/>
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T07:53:41.700

看看[这个](http://developer.android.com/guide/topics/manifest/service-element.html#nm)。

> 实现服务的服务子类的名称。这应该是一个完全限定的类名（例如，“com.example.project.RoomService”）。但是，作为简写，如果名称的第一个字符是句点（例如，“.RoomService”），则将其附加到元素中指定的包名称中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-06T11:52:10.157

android:name 实现activity的类名，Activity的子类。属性值应该是完全限定的类名（例如，“com.example.project.ExtracurricularActivity”）。但是，作为简写，如果名称的第一个字符是句点（例如，“.ExtracurricularActivity”），则会将其附加到元素中指定的包名称中。发布应用程序后，不应更改此名称（除非您设置了 android:exported="false"）。

没有默认值。必须指定名称。

# javascript - 制作类似于 Zurbs 响应式表格的 HTML

> ID：14682383
> 
> 赞同：0
> 
> 时间：2013-02-04T07:47:04.133
> 
> 标签：javascript, jquery, html, css

所以，我希望有一个固定高度的表格，`<tr>'s`并且很长一段时间`<td>'s`都可以“继续”，类似于[Zurb 响应式表格](http://www.zurb.com/playground/playground/responsive-tables/index.html)，但适用于普通的网络浏览器（不是在手机上）。

```
<table>
    <tbody>
        <tr>
            <td>Hello</td>
            <td><div>This is a div in a td with a longer text</div></td>
            <td><div>This is aaaaaaaaaaaalso a td with a looong word</div></td>
            <td>Normal sized td</td>
        </tr>
    </tbody>
</table> 
```

这个新的例子正好说明了我的问题是什么：[jsfiddle](http://jsfiddle.net/emilhem/D4FUH/2/)

日期列必须尽可能小。

有谁知道如何做到这一点（最好没有任何javascript）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:22:19.630

我不确定您要做什么，但请看一下`white-space:nowrap`and `table-layout: fixed`。

你的CSS可能是这样的

```
table {
  table-layout: fixed;  
}    

td {
  overflow: hidden;
  border: 1px solid;
  height: 50px;
  padding: 5px;
  white-space:nowrap;
} 
```

例如，将 s 的固定宽度`<td>`添加`width: 30%`到`<td>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T09:54:21.283

不确定您要做什么，但是当您的意思是更长时，您是想让它水平宽还是垂直？由于上面的2个答案没有给你

```
 Width:75%; 
```

它将根据文本扩展而不分解为新行，这基本上会使您的网页仅水平移动，而不是在输入内容时将其分解为新行。

所以，基本上如果你也想广泛地扩展它，那么只需添加

```
 Width: [amount of px you want or % of page] 
```

在 .css 或内部

```
 <td width="75%"> 
```

不确定这是否是您正在寻找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T08:49:48.360

看看这个[小提琴](http://jsfiddle.net/rTR8M/6/)链接，这将帮助您获得像 [Zurb Responsive Tables](http://www.zurb.com/playground/playground/responsive-tables/index.html)这样的表格。我只是在css中做了一些改变

```
td {
  overflow: hidden;
  border: 1px;   
    border-color:none;
  height: 50px;
  padding: 5px;
  white-space:nowrap;
} 
```

对于备用行颜色，您可以使用它

```
$("tr:even").css("background-color", "rgb(225,225,225)");
$("tr:odd").css("background-color", "#ffffff"); 
```

我希望这会对你有更多帮助。

# jquery - 如何停止执行jquery函数

> ID：14682386
> 
> 赞同：-3
> 
> 时间：2013-02-04T07:47:21.017
> 
> 标签：jquery

您好，我有一个函数，它在每个 keyup 事件中测试输入值的长度是否为 ==3，如果是，则调用另一个函数；

我的问题是我想在长度>3时停止执行这个jquery函数

```
$('#txtInput').bind('keyup', lil); 
```

我试过解除绑定，但它不起作用；提前致谢

```
 var lil = function () 
             {
              var  strin = document.getElementById('txtInput').value;
              newstr = strin.replace(/[^\u0400-\u04FF0-9]/gi, '');
              alert (newstr);
              k = newstr.length;
             if (newstr.length==3)
             {triming();}

             }

$(function() 
{
     $('#txtInput').bind('keyup', lil);     

       /*if (k>3)
       $("txtInput").unbind("keyup", lil);  */ - this doesn't work

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T07:49:28.743

而不是取消绑定事件，只需使用 return 语句来停止函数中代码的进一步执行。

```
if (k>3)  return; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:00:22.823

主要问题是，当页面加载并且变量 k 仍然未定义时，您取消绑定事件处理程序的代码仅运行一次。每次 keyup 处理程序完成工作时，您都需要检查 k > 3：

```
var lil = function () 
{
    var  strin = document.getElementById('txtInput').value;
    var newstr = strin.replace(/[^\u0400-\u04FF0-9]/gi, '');
    alert (newstr);
    var k = newstr.length;
    if (k==3){
         triming();
    }
    if (k>3)
        $("txtInput").unbind("keyup", lil); 

$(function() 
{
    $('#txtInput').bind('keyup', lil);     
}); 
```

此外，您将函数 lil 绑定到 keyup 事件两次，第一次很可能是在浏览器解析文档之前。仅保留包装在（隐式）$(document).ready() 函数中的第二个绑定。

另请注意，我通过在它们前面加上“var”来创建 newstr 和 k 局部变量。如果你真的需要它们是全局的，你可能想要撤消它。

# jsp - JaCoCo - 从报告中排除 JSP

> ID：14682389
> 
> 赞同：9
> 
> 时间：2013-02-04T07:47:24.410
> 
> 标签：jsp, maven, jacoco

在 JaCoCo 生成的 Maven 站点报告中，我的覆盖率很差，因为我编译的所有 JSP 都包含在内（而且它们很长）。我尝试了以下内容`reporting`：

```
<plugin>
    <groupId>org.jacoco</groupId>
    <artifactId>jacoco-maven-plugin</artifactId>
    <configuration>
        <exclude>target/classes/jsp/**/*.class</exclude>
    </configuration>
</plugin> 
```

另一个外观相似的配置位于阶段`build`的 POM 部分`prepare-package`。这不会阻止 JSP 类包含在报告中。如何避免这种情况？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-05T09:35:32.250

这很容易。线索是，排除标签已经引用了类目录。所以你的 xml 片段应该是：

```
<plugin>
    <groupId>org.jacoco</groupId>
    <artifactId>jacoco-maven-plugin</artifactId>
    <configuration>
        <excludes>
            <exclude>jsp/**/*.class</exclude>
        </excludes>
    </configuration>
</plugin> 
```

还要注意周围排除元素中的单个排除标记！

# xaml - XAML 文本框在应用控制模板后变得不可编辑

> ID：14682391
> 
> 赞同：3
> 
> 时间：2013-02-04T07:47:35.283
> 
> 标签：xaml, winrt-xaml

我想要我的 Windows 商店应用程序（C++）的圆角边缘文本框。我已将控制模板应用于 XAML 文本框以使其成为圆角边缘。但在运行应用程序后，我得到了圆角边缘，但我无法编辑此文本框。我是 XAML 的新手。请帮助我找出此代码中缺少的内容以使其可编辑。

这是使其圆角边缘后的代码。

```
<TextBox HorizontalAlignment="Left" Margin="51,202,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Height="23" Width="246" Background="White" BorderBrush="#FF00AAA6" IsReadOnly="False">
        <TextBox.Resources>
            <ControlTemplate x:Key="TextBoxControlTemplate1" TargetType="TextBox">
                <Grid>
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="PointerOver"/>
                            <VisualState x:Name="Focused"/>
                            <VisualState x:Name="Disabled"/>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="ButtonStates">
                            <VisualState x:Name="ButtonCollapsed"/>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <Border BorderThickness="1" Padding="2" CornerRadius="3" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}"/>
                </Grid>
            </ControlTemplate>
        </TextBox.Resources>
        <TextBox.Template>
            <StaticResource ResourceKey="TextBoxControlTemplate1"/>
        </TextBox.Template>
    </TextBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:18:43.703

在您的示例代码中， ControlTemplate 不包含导致缺少可编辑输入元素的 ContentElement。

使用以下链接检查文本框的真实样式，仅更改相关边框“CornerRadius”属性以获得圆形视觉效果

[文本框样式](http://msdn.microsoft.com/en-us/library/cc645061%28v=vs.95%29.aspx)

# aptana3 - Aptanta Studio 3 无法加载

> ID：14682394
> 
> 赞同：0
> 
> 时间：2013-02-04T07:47:46.657
> 
> 标签：aptana3

我的 Aptana Studio 3 并非每次都启动。目前我无法使用，因为每次我启动应用程序时 IDE 都会冻结，我得到“无响应”并且必须关闭它。

在过去，我遇到了一些个人文件夹的问题，包括特殊字符（在我的例子中是“ä”）。我成功地重命名了windows用户并重新安装了aptana，所以我不知道这仍然是问题还是其他问题。

您可以在下面找到我的日志文件。

“无法运行程序“ruby”（找不到数据）行可能是一个提示？是否可以通过配置停用 ruby​​？我不需要它。

* * *

```
!SESSION 2013-02-04 08:25:42.610 -----------------------------------------------
eclipse.buildId=3.3.1.201212171919
java.version=1.6.0_24
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=de_DE
Command-line arguments:  -os win32 -ws win32 -arch x86

!ENTRY com.aptana.ruby.core 4 0 2013-02-04 08:25:58.244
!MESSAGE Cannot run program "ruby": CreateProcess error=2, Das System kann die angegebene Datei nicht finden

!ENTRY org.eclipse.osgi 2 0 2013-02-04 08:26:21.408
!MESSAGE While loading class "org.eclipse.debug.internal.core.Preferences", thread "Thread[Worker-14,5,main]" timed out waiting (5005ms) for thread "Thread[main,6,main]" to finish starting bundle "org.eclipse.debug.core_3.7.1.v20111129-2031 [167]". To avoid deadlock, thread "Thread[Worker-14,5,main]" is proceeding but "org.eclipse.debug.internal.core.Preferences" may not be fully initialized.
!STACK 0
org.osgi.framework.BundleException: State change in progress for bundle "reference:file:plugins/org.eclipse.debug.core_3.7.1.v20111129-2031.jar" by thread "main".
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.beginStateChange(AbstractBundle.java:1087)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:297)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:268)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:463)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:400)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:476)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.eclipse.debug.core.DebugPlugin$1.saving(DebugPlugin.java:663)
    at org.eclipse.core.internal.resources.SaveManager.executeLifecycle(SaveManager.java:383)
    at org.eclipse.core.internal.resources.SaveManager$1.run(SaveManager.java:192)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.resources.SaveManager.broadcastLifecycle(SaveManager.java:195)
    at org.eclipse.core.internal.resources.SaveManager.save(SaveManager.java:1130)
    at org.eclipse.core.internal.resources.SaveManager.save(SaveManager.java:1109)
    at org.eclipse.core.internal.resources.DelayedSnapshotJob.run(DelayedSnapshotJob.java:51)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
Caused by: org.eclipse.osgi.framework.internal.core.AbstractBundle$BundleStatusException
    ... 22 more
Root exception:
org.eclipse.osgi.framework.internal.core.AbstractBundle$BundleStatusException
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.beginStateChange(AbstractBundle.java:1087)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:297)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:268)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:463)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:400)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:476)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.eclipse.debug.core.DebugPlugin$1.saving(DebugPlugin.java:663)
    at org.eclipse.core.internal.resources.SaveManager.executeLifecycle(SaveManager.java:383)
    at org.eclipse.core.internal.resources.SaveManager$1.run(SaveManager.java:192)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.resources.SaveManager.broadcastLifecycle(SaveManager.java:195)
    at org.eclipse.core.internal.resources.SaveManager.save(SaveManager.java:1130)
    at org.eclipse.core.internal.resources.SaveManager.save(SaveManager.java:1109)
    at org.eclipse.core.internal.resources.DelayedSnapshotJob.run(DelayedSnapshotJob.java:51)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:26:15.243

我在开发 PHP 代码时看到了类似的错误。当我关闭 Aptana 时，我处于团队同步视图中（我通过 Subclipse 使用 Subversion）。当我重新启动 Aptana 时，我仍在 Team Sync 视图中，并且 IDE 完全没有响应。

我能够通过以下方式“解决”这个问题：

mv ~/Documents/Aptana Studio 3 工作区/.metadata ~/Documents/Aptana Studio 3 工作区/.metadata_old

并重新启动 Aptana。然后我被迫将我现有的 PHP 项目重新导入 Aptana。

我不知道问题是什么或为什么会这样。

# java - 用于标量查询的休眠缓存

> ID：14682395
> 
> 赞同：0
> 
> 时间：2013-02-04T07:47:54.520
> 
> 标签：java, hibernate, ehcache, second-level-cache, query-cache

我读过[这篇文章。](https://stackoverflow.com/questions/8480268/how-query-cache-works-for-scalar-results)我无法按照这篇文章中的建议获得整个对象。我得到 MIN,MAX,Count 值。于是发了新帖。以下是我想要的和我拥有的。

1.  我的 Spring 应用程序不会对 DB(MySQL) 进行任何更改。它只是读取数据。它不会知道对数据库中现有数据所做的更改。
2.  我所有的查询都返回标量数据。不是整个对象。（例如`Select employee.name,office.address,MIN(employee.rec) from ... where..`：）

3.  我希望我的查询被缓存。所以我在休眠配置中启用了查询缓存。并添加`cacheable="true"`到我的命名查询中。

4.我启用了二级缓存。

5.为持久性类添加了以下注释。

```
@Cacheable 
@Cache(usage = CacheConcurrencyStrategy.NONSTRICT_READ_WRITE) 
```

6.我想每24小时刷新一次缓存。因此`timeToLiveSeconds`在 ehcache.xml 中更新`defaultCache`。

这是正确的方法吗？如何从查询缓存中知道查询是否命中二级缓存？

更新：我添加了统计信息，二级缓存没有命中/未命中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:38:00.423

打开 SQL 日志记录和统计信息生成。如果您看到 SQL 查询日志记录，则表示缓存不起作用。

```
<property name="hibernate.show_sql" value="true"/>
<property name="hibernate.generate_statistics" value="true"/> 
```

为了查看二级缓存的命中计数：

```
session.getSessionFactory().getStatistics().getSecondLevelCacheHitCount() 
```

# python - unicodedata.normalize(form, unistr) 是如何工作的？

> ID：14682397
> 
> 赞同：22
> 
> 时间：2013-02-04T07:48:09.730
> 
> 标签：python, unicode, encoding, normalization, unicode-normalization

在 API 文档上，[http://docs.python.org/2/library/unicodedata.html#unicodedata.normalize](http://docs.python.org/2/library/unicodedata.html#unicodedata.normalize)。它说

> 返回Unicode 字符串*unistr的**范式*。表单的有效值为“NFC”、“NFKC”、“NFD”和“NFKD”。

 *文档比较模糊，有人可以`valid values`用一些例子来解释吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-04T07:56:43.707

我发现文档很清楚，但这里有一些代码示例：

```
from unicodedata import normalize

print '%r' % normalize('NFD', u'\u00C7')  # decompose: convert Ç to "C + ̧"
print '%r' % normalize('NFC', u'C\u0327') # compose: convert "C + ̧" to Ç 
```

两种 'D' (=decompose) 形式都将单个组合字符（如`ä`）转换为两个字符（`a`+ 两个点）。两种“C”（=compose）形式都相反。

出于兼容性目的，这两种“K”形式用于转换添加到 Unicode 的字符。例如，为了支持不能在符号周围画圆圈的软件，有一组“圆圈数字”，如①（unicode number 2460）。当我们对其应用规范分解 (NFD) 时，它什么也不做：

```
print '%r' % normalize('NFD', u'\u2460')     # u'\u2460' 
```

但是，兼容性分解（NFKD）将返回相应的“兼容”字符：

```
print '%r' % normalize('NFKD', u'\u2460')    # 1 
```

有关更多详细信息，请参阅[http://en.wikipedia.org/wiki/Unicode_equivalence](http://en.wikipedia.org/wiki/Unicode_equivalence)。*

# android - 尝试在外部设备上运行应用程序时，控制台说一切顺利，但没有任何反应。为什么？

> ID：14682399
> 
> 赞同：0
> 
> 时间：2013-02-04T07:48:15.360
> 
> 标签：android, eclipse, adb

所以现在我正在尝试运行[默认的 Hello World！](http://developer.android.com/training/basics/firstapp/creating-project.html)来自developers.android.com 的[应用程序。](http://developer.android.com/training/basics/firstapp/creating-project.html)我已经为我的 SGSII 安装了 USB 驱动程序，它显示为我可以用来运行应用程序的设备。当我选择它时，这就是控制台中出现的内容。这个，仅此而已：

```
[2013-02-03 23:41:14 - FirstApp] Android Launch!
[2013-02-03 23:41:14 - FirstApp] adb is running normally.
[2013-02-03 23:41:14 - FirstApp] Performing com.sweatyreptile.chee.firstapp.MainActivity activity launch
[2013-02-03 23:41:14 - FirstApp] Automatic Target Mode: Unable to detect device compatibility. Please select a target device.
[2013-02-03 23:41:16 - FirstApp] Uploading FirstApp.apk onto device '3afd08de'
[2013-02-03 23:41:16 - FirstApp] Installing FirstApp.apk...
[2013-02-03 23:41:45 - FirstApp] Success!
[2013-02-03 23:41:45 - FirstApp] Starting activity com.sweatyreptile.chee.firstapp.MainActivity on device 3afd08de 
```

设备上似乎没有发生任何事情。

编辑：就像我说的，我只是想运行通过创建一个新的 android 应用程序项目生成的默认应用程序。

编辑2：所以我第一次尝试就可以在平板电脑上运行该应用程序，但手机仍然无法使用。这可能与手机植根于自定义 rom 而平板电脑有库存有关吗？

# 代码：

MainActivity.java：

```
package com.sweatyreptile.chee.firstapp;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.sweatyreptile.chee.firstapp"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.sweatyreptile.chee.firstapp.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T21:26:55.250

我（有点）找到了问题所在。我为我的三星 Galaxy S2 使用了一个自定义 ROM，称为 Infamous。它一定有一些问题阻止了某些东西的工作。

安装一个股票（但仍然是根目录和 deodexed）ROM 后，adb 能够毫无问题地安装和启动我的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:34:31.417

要在您的模拟器中运行您的应用程序，请更改以下设置并根据目标或最低 api 级别选择您的模拟器：

右键单击您的应用程序并转到`Run As>Run Configurations...`

在`Run configuration`选择`Target`选项卡和该选项卡中检查单选按钮`Always prompt to pick device`，然后`Apply & Ok`。

完成上述操作后，您的 eclips 将始终要求您选择已经运行的模拟器，如果它们与您的应用程序 api 配置相同。

# c# - System.Diagnostics.Process：找不到指定的模块。(0x8007007E)

> ID：14682403
> 
> 赞同：0
> 
> 时间：2013-02-04T07:48:36.860
> 
> 标签：c#, command-line

我有以下代码：

```
 // Creating procesStartInfo obj
        System.Diagnostics.ProcessStartInfo procStartInfo
            = new System.Diagnostics.ProcessStartInfo();

        procStartInfo.RedirectStandardOutput = true;
        procStartInfo.UseShellExecute = false;

        // Do not create the black window.
        procStartInfo.CreateNoWindow = true;

        //Window state hidden .. so black windows will come inbetween
        procStartInfo.WindowStyle
            = System.Diagnostics.ProcessWindowStyle.Hidden;

        // Creating Process obj to run the net time cmd
        System.Diagnostics.Process p;
        string output;
        p = new System.Diagnostics.Process();

        p.StartInfo = procStartInfo;
        p.StartInfo.FileName = "w32tm";
        p.StartInfo.UseShellExecute = false;
        p.StartInfo.RedirectStandardOutput = true;

        p.StartInfo.Arguments = " /resync /computer:xxxxx977";
        p.Start();
        p.WaitForExit();

        output = p.StandardOutput.ReadLine().ToString();
        MessageBox.Show(output); 
```

当我执行此代码时，我收到一条错误消息：

> 发生以下错误：找不到指定的模块。(0x8007007E)。

如果我远程或本地运行命令`w32tm /resync /computer:xxxxx977`，它工作正常。为什么在使用代码而不是从命令行启动进程时会出现此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:25:21.370

尝试使用

```
procStartInfo.UseShellExecute = true; 
```

您没有指定在哪里可以找到“w32tm”，因此可能找不到该文件。我认为您必须提供完整路径和它的扩展名，否则 UseShellExecute。

顺便说一句：某些属性在您的代码中设置了两次。;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:36:12.853

使用该`DependencyWalker`工具找出哪些模块丢失并且在搜索 PATH 中找不到。`UseShellExecute`设置为 true可能会有所帮助。您将其设置为 false 的原因是什么？

# jsf - 我可以限制 JSF/PrimeFaces 中的下载/上传速度吗？

> ID：14682404
> 
> 赞同：0
> 
> 时间：2013-02-04T07:48:52.653
> 
> 标签：jsf, file-upload, primefaces, download, limit

我正在使用带有 PrimeFaces 的 JSF，上传/下载组件非常适合我的项目。但是，由于该软件将部署在一些低带宽环境中，我只是想知道是否可以限制这些组件将使用的上传/下载速度？

感谢您的建议和最好的问候帕斯卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:31:23.877

似乎没有开箱即用的方法。我最终编写了一个自己的“LimitedInputStream”实现。

有限输入流：

```
public class LimitedInputStream extends InputStream {
    public static InputStream create(ILimitedInputStreamPolicy policy, InputStream wrapped) {
        return new LimitedInputStream(policy, wrapped);
    }

    public static InputStream create(Logger log, InputStream wrapped) {
        final ILimitedInputStreamPolicy policy = BytesPerIntervalLimitedInputStreamPolicy.create(log);
        return new LimitedInputStream(policy, wrapped);
    }

    private final ILimitedInputStreamPolicy policy;
    private final InputStream wrapped;

    private LimitedInputStream(ILimitedInputStreamPolicy policy, InputStream wrapped) {
        this.policy = policy;
        this.wrapped = wrapped;
    }

    @Override
    public int available() throws IOException {
        return wrapped.available();
    }

    @Override
    public void close() throws IOException {
        wrapped.close();
    }

    @Override
    public boolean equals(Object obj) {
        return wrapped.equals(obj);
    }

    @Override
    public int hashCode() {
        return wrapped.hashCode();
    }

    @Override
    public void mark(int readlimit) {
        wrapped.mark(readlimit);
    }

    @Override
    public boolean markSupported() {
        return wrapped.markSupported();
    }

    @Override
    public int read() throws IOException {
        policy.waitForBytesToRead();
        final int result = wrapped.read();
        policy.bytesRead(1);
        return result;
    }

    @Override
    public int read(byte[] b, int off, int len) throws IOException {
        final long bytesLeft = policy.waitForBytesToRead();
        final int bytesToRead = Long.valueOf(Math.min(bytesLeft, len)).intValue();
        final int bytesRead = wrapped.read(b, off, bytesToRead);
        policy.bytesRead(bytesRead);
        return bytesRead;
    }

    @Override
    public void reset() throws IOException {
        wrapped.reset();
    }

    @Override
    public long skip(long n) throws IOException {
        return wrapped.skip(n);
    }
} 
```

ILimitedInputStreamPolicy.java：

```
/**
 * Implementing class provide information about in which intervals how much data
 * may be read from a stream.
 */
public interface ILimitedInputStreamPolicy {
    /**
     * Indicates that the given number of bytes have been read in any atomic
     * action.
     * 
     * @param numberOfBytes
     *            The number of bytes read.
     */
    public void bytesRead(int numberOfBytes);

    /**
     * Pauses the current thread until the implemented policy allows for the
     * returned amount of bytes to read,
     * 
     * @return The number of bytes allowed to read.
     */
    public int waitForBytesToRead();
} 
```

# eclipse - Tomcat 7.0：与 Eclipse 集成

> ID：14682409
> 
> 赞同：0
> 
> 时间：2013-02-04T07:49:25.000
> 
> 标签：eclipse, jsp, tomcat, servlets

我将 Tomcat 与 Eclipse 集成（根据正确的步骤）。但是当我尝试运行一个项目时，它会产生 404 错误。

没有Eclipse，当我手动运行项目时，项目运行成功。[这里](http://www.vogella.com/articles/EclipseWTP/article.html)给出了步骤。

![在这个项目树和DD](../Images/e6e34097fd3bab13b66defd7464f3b96.png)

![在服务器上运行项目](../Images/b31857596d8f306fcd398aa8f02a6aa5.png)

![但它会生成 404](../Images/4a7597eeab352ee0b3ff6d2244e532ba.png)

![即使我只输入 localhost:8080 但服务器在 eclipse 上运行，它也会再次生成错误](../Images/9a14f9a4916f2c6e5e32330d19392866.png)

如果没有 Eclipse，此代码将成功运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:09:28.993

好的，解决方案是：

复制你的`jsp folder in WEB-INF directory`然后在服务器上运行项目，你将通过

# ios - .ipa 文件安装在设备中但不会打开只是闪烁并退出

> ID：14682413
> 
> 赞同：1
> 
> 时间：2013-02-04T07:49:39.943
> 
> 标签：ios, objective-c, ipa, ad-hoc-distribution

.ipa 文件安装在设备中，但不会打开，只是闪烁并退出。此应用程序是临时应用程序。我在配置门户中添加了我的设备 UDID 并再次制作配置文件，应用程序成功安装但未打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:24:29.627

检查您的 .ipa 文件 verison.example 您的构建较低版本是 ios6.0 但您在 iPhone5 上运行意味着它不会运行。请检查它。

# .net - 如何将 IRfcTable 详细信息传输到 SQL Server 表？

> ID：14682415
> 
> 赞同：1
> 
> 时间：2013-02-04T07:49:44.487
> 
> 标签：.net, sql-server, saprfc

我正在使用 IRfcFunction 来从 SAP 获取某些值到我的 .net 应用程序。这些细节在 IRfcTable 结构中。我想知道如何将 IRfcTable 中的这些内容移动到 SQL Server 表中。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T06:40:14.673

您可以迭代 IRfcTable 表中返回的行，获取每行的值并将其手动插入到 SQL Server 表中。

```
for (var i = 0; i < rfcTable.RowCount; ++i)
{
    var fieldValue = rfcTable[i].GetString("FIELD_NAME");
    // get other fields values
    // inert into SQL Server table according to your application logic
} 
```

# apache - mod_security - IP 访问问题

> ID：14682417
> 
> 赞同：3
> 
> 时间：2013-02-04T07:49:50.143
> 
> 标签：apache, permissions, owasp, mod-security

我正在尝试使用它的 IP 地址访问我的网站，之前它工作正常。但是在我安装并配置了 mod_security 和 mod_security OWASP 之后，Apache 给出了 403 错误。

> **Forbidden**
> 您无权访问此服务器上的 /。

应该怎么做才能使用浏览器中的 IP 访问网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:26:34.020

阻止直接 IP 访问的规则在此处的 CRS 文件中：

```
base_rules/modsecurity_crs_21_protocol_anomalies.conf 
```

您需要获取规则的 ID 并使用禁用它`SecRuleRemoveById`

# javascript - attr 显示对象对象的值

> ID：14682420
> 
> 赞同：0
> 
> 时间：2013-02-04T07:50:20.947
> 
> 标签：javascript, jquery, attr, imagesource

我正在尝试自定义一个插件以满足我的需求。我想要做的是，当我从一组图像中单击图像时，我得到图像的 src 并使用该图像恢复插件。我遇到的问题是当我获得图像的来源时，它给了我 [object object] 而不是实际的来源。我使用 $(this).attr("src") 来获取图像源。

所以基本上我的代码看起来像这样：

```
 <div id="images">
      <img src="image1"/>
      <img src="image2"/>
      <img src="image3"/>
      <img src="image4"/>
    </div>

$(document).ready(function(){
  $("#images img").on("click", function(){
    var img_src=$(this).attr("src");
    $("#id").plugin({
      image:img_src
    });
});
}); 
```

编辑：我更新了我的代码，所以更清楚我在问什么。

更新：实际上，即使我从中删除了所有其他 js，该代码也不起作用。但它适用于jsfiddle

更新2：所以我在互联网上寻找解决方案，似乎我正在使用的插件以某种方式覆盖了 attr 函数。有没有办法阻止它这样做？或者也许创建一个不受插件影响的 jQuery 实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T07:55:16.147

尝试通过输出到控制台来探索该对象的内容。

通过 F12 使用 Firebug for Firefox 或 Chrome 集成开发人员控制台。

打开控制台，修改代码：

```
var img_src=$(this).attr("src");
console.log(img_src);
$("#id").plugin({
  image:img_src
}); 
```

并检查输出。

`$("img").attr("src")`应该是字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T08:07:02.440

这实际上是一个 CSS 选择器问题！

它不会工作，因为`#images img`不会像你预期的那样工作！！！应该是用 id`img#images`来引用。`img``images`

因此，如果您有这样的 HTML：

```
<img id="img1" class="useImg" src="http://fc01.deviantart.net/fs71/f/2013/032/8/3/papa_happy_by_ovilia1024-d5tfw0h.png" width="30px" height="30px" />
<img id="img2" class="useImg" src="http://fc01.deviantart.net/fs70/f/2013/032/a/b/papa_horrified_by_ovilia1024-d5tfwdt.png" width="30px" height="30px" /> 
```

你应该使用：

```
$('img.useImg').on('click', function() {
    alert($(this).attr('src'));
}); 
```

在此处运行演示：http: [//jsfiddle.net/aM4xw/2/](http://jsfiddle.net/aM4xw/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T09:53:32.830

attr 返回一个对象而不是源值的原因是我使用的插件覆盖了 attr 函数。我修改它以将 src 作为字符串而不是对象返回。删除它也解决了问题，但插件需要自定义的。感谢所有试图帮助我的人，我真的很感激。

# email - pine/alpines 通讯录中的 utf-8 字符

> ID：14682421
> 
> 赞同：0
> 
> 时间：2013-02-04T07:50:28.320
> 
> 标签：email, utf-8, syntax, alpine

pine/alpine 地址簿的语法对于 unicode 字符是如何工作的？说我想包含条目

```
Nickname  : søren
Fullname  : sørensen
Fcc       : 
Comment   : 
Addresses : soren@sorensen.something 
```

在我的高山通讯录中。当我打开地址簿文件时，此条目对应于以下行：

```
=?UTF-8?Q?s=C3=B8ren?=  =?UTF-8?Q?s=C3=B8rensen?=   soren@sorensen.something 
```

我想知道这种 utf-8 字符的语法是如何工作的。我对这个问题的动机如下：我希望能够（通过搜索和替换）生成一个地址簿文件，其中真正的 utf-8 字符出现（因为这更具可读性），然后编辑文件，然后然后将 utf-8 字符转换回 pine/alpines 语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:15:29.113

我已经非常了解语法了：

> 本地地址簿（或远程地址簿的本地缓存文件）是简单的文本文件，其行格式为：
> 
> ```
> <nickname>TAB<fullname>TAB<address>TAB<fcc>TAB<comments> 
> ```
> 
> 最后两个字段是可选的。一个“行”可以由文件中的多个实际行通过使用连续行（以空格字符开头的行）组成。换行符可能在制表符之后或在分发列表中的地址之间。文件中的每个实际行的长度必须少于 1000 个字符。

这直接引自页面： Alpine 官方消息传递系统主页上的[Alpine Technical Notes](http://www.washington.edu/alpine/tech-notes/low-level.html)页面。我不知道的部分，*现在有一个漂亮的上帝猜测*，是关于它如何处理 utf-8 字符的部分。似乎对于每个字段`<nickname>`、`<fullname>`、`<address>`、`<fcc>`和`<comments>`，如果该字段包含某些“特定”字符，例如 æ、ø 或 å，则`=?UTF-8?Q?`放置在该字段的开头和`?=`末尾。现在，在这两个标记之间放置字段的内容，但空格替换为og`_`替换“某些”字符，具体取决于字符 UTF-8 代码是或者只是`=XX=YY``=YY``XX YY``YY`. 作为一个例子`ø`被替换为`=C3=B8`，因为 UTF-8 代码`ø`是`C3 B8`. 此外，`å`、`!`和`;`分别被替换为`=C3=A5`、`=21`和`=3B`，因为它们的 UTF-8 代码分别是`C3 A5`、`21`和`3B`。

**注意：**我不确定是哪些字符使 Alpine 实现了标签`=?UTF-8?Q?`和`?=`，但我知道它的字符*数少于*转换为 UTF-8 代码的字符数。例如，一个字段包含

```
sorensen, soren 
```

只会写成 af `sorensen, soren`，但一个字段包含

```
sørensen, søren 
```

将被转换为

```
=?UTF-8?Q?s=C3=B8rensen=2C_s=C3=B8ren?= 
```

我并不完全确定这是否正确，但就我查看的地址簿而言，这似乎是一个非常好的猜测。

# c# - 如何在另一个按钮的 C# onClick 中动态创建按钮？然后让这些按钮也做同样的事情

> ID：14682424
> 
> 赞同：0
> 
> 时间：2013-02-04T07:50:45.430
> 
> 标签：c#, asp.net, button, dynamic, onclick

我正在尝试制作一个 C# 网页，该网页根据表单提交的内容动态创建按钮，但我一直跑到死胡同。问题是（显然？）您只能在 Page_Load 期间连接 EventHandlers，而不是在按钮的 Click 事件内？

基本上我有一些代码来创建一个按钮：

```
private Button CreateButton(string id, string text) {
    Button b = new Button();
    b.ID = id;
    b.Text = text;
    b.Command += new CommandEventHandler(Button_Command);
    b.CommandArgument = text;
    return b;
} 
```

当这些新按钮被点击时，它们应该传递命令参数，并根据这些命令参数创建新按钮

```
void Button_Command(object sender, CommandEventArgs e) {
    //Put code here that creates new buttons based on what's submitted
    DoThis(e.CommandArgument.ToString());
} 
```

但是当我在按钮的 Click 事件中运行此代码时，新创建的按钮的 EventHandler 不会被连接起来。

第一次点击页面时，只有一个文本输入和一个 GO 按钮。它应该创建一堆新按钮及其命令参数：

```
protected void bntGo_Click(object sender, e EventArgs){
    DoThis(txtInput.Text);
}

private void DoThis(string arg){
    //Do some logic to create a Dictionary<string, int> object (sortedDict) 
    //based on the arg passed, then for each KeyValuePair in the Dictionary, 
    //add a button to a panel on the page, setting each button's commandarguments 
    //to each string in the dictionary
    int count=1;
    foreach (KeyValuePair<string, int> pair in sortedDict) {
        pnlButtonsPanel.Controls.Add(CreateButton("Btn"+count.ToString(), pair.Key));
    }
} 
```

我该如何做到这一点？我不能在每次页面加载时只运行 DoThis() 函数，因为 DoThis() 需要从他们单击的按钮传递 CommandArguments，而这在 page_load 中不可用。

我究竟做错了什么？我需要一种新方法。我在想自己在这里。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:58:06.390

您不能注册处理程序，您必须实际提交表单并解析与服务器上的命令等效的字符串。因此，RunAt 服务器。呈现的页面和服务器之间没有神奇的连接，这就是所谓的 Javascript。

您是否遵循了这里的设计模式？

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.commandeventhandler.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.commandeventhandler.aspx)

```
 <asp:Button id="Button1"
       Text="Sort Ascending"
       CommandName="Sort"
       CommandArgument="Ascending"
       OnCommand="CommandBtn_Click" 
       runat="server"/> 
```

...

```
void CommandBtn_Click(Object sender, CommandEventArgs e) 
      {

         switch(e.CommandName)
         {

            case "Sort":

               // Call the method to sort the list.
               Sort_List((String)e.CommandArgument);
               break; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:05:16.010

需要在 Page_Init 或 Page_Load 中添加事件处理程序的原因如下：

每次回发到服务器都会导致页面从头开始重建（除非它是一个完全静态的页面并且它正在被缓存）。这会导致所有动态更改（添加按钮，...）丢失。因此，当您单击动态创建的按钮，并且不重新创建按钮和 Page_Init 或 Page_Load 中的所有处理程序时，出于所有意图和目的，该按钮不存在服务器端。

* * *

## 编辑：

如果您需要保存包含每个按钮详细信息的列表，只需使用`ViewState`

```
protected void Page_Init (object sender, EventArgs e)
{
    //do your stuff
    var buttonStuff = ViewState["MySaveButtonStuff"] as List<string>;
    if (buttonStuff != null)
    {
        //create button method(s)
    }
} 
```

# c# - 将数组列表中的数字相加

> ID：14682425
> 
> 赞同：-2
> 
> 时间：2013-02-04T07:50:53.680
> 
> 标签：c#, arrays, math

我正在制作一个应用程序，它将为我提供用户插入的数字的平均值、中值和范围。
但我似乎无法将数字相加，然后将它们除以二。
这是我尝试的：

```
 public static String Find_Mean()
    {
        int Number = 0;
        for (int size = 0; size < list.Count; size++)
        {
            Number = Convert.ToInt16(list[size].ToString());
            Number += Number;
        }
        int Final_Number = Number / 2;
        return Convert.ToString(Final_Number);
    } 
```

我想要做的是将arraylist中的所有数字加在一起，然后将它们除以2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T07:52:09.173

尝试使用 Linq：

```
 int[] x;
 x.Average();
 x.Max();
 x.Min(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T07:53:27.577

```
Number = Convert.ToInt32(list[size].ToString()); 
```

您在这里的每次迭代都会覆盖 number 的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T07:52:43.620

每次你`Number`在循环中设置你的数组列表元素并覆盖你的总数时，这就是你没有得到总数的原因。您需要使用单独的变量来维护总计。就像是：

```
int Number = 0;
int Total = 0;
for (int size = 0; size < list.Count; size++)
{
    Number = Convert.ToInt16(list[size].ToString());
    Total += Number;
}
int Final_Number = Total / 2; 
```

如果您使用的是**.Net 2.0 或更高版本，**那么最好使用[通用](http://msdn.microsoft.com/en-us/library/ms379564%28v=vs.80%29.aspx)列表`List<int>`。

您还可以将转换为循环中的数字更改为：

```
Number = Convert.ToInt32(list[0]); 
```

由于`Convert.ToInt32`对象类型也有重载，如果你的数字是 type `int`，那么它`Int32`不是`Int16`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T07:57:39.897

您在此处重新分配 Number 的值：

```
for (int size = 0; size < list.Count; size++)
{
    Number = Convert.ToInt16(list[size].ToString());
    Number += Number;
} 
```

试试这个：

```
for (int size = 0; size < list.Count; size++)
{
    Number += Convert.ToInt16(list[size].ToString());
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T08:07:20.757

这是我目前用来计算一些简单统计数据的方法：

```
private void CalculateStatistics(IEnumerable<Double> valuesToAggregate)
{
    // We need to iterate multiple times over the values, so it makes
    // sense to create a list to improve performance.
    var aggregateMe = valuesToAggregate.ToList();

    if (aggregateMe.Count > 0)
    {
        // To calculate the median, the simplest approach
        // is to sort the list.
        aggregateMe.Sort();

        // Cause we already sorted the list,
        // the min value must be available within the first element.
        Min = aggregateMe[0];

        // the max value must be available within the last element.
        Max = aggregateMe[aggregateMe.Count - 1];

        // The average has really to be calculated, by another iteration run.
        Mean = aggregateMe.Average();

        // Taking the median from a sorted list is easy.
        var midpoint = (aggregateMe.Count - 1) / 2;
        Median = aggregateMe[midpoint];

        // If the list contains a even number of element,
        // the median is the average of the two elements around the midpoint.
        if (aggregateMe.Count % 2 == 0)
            Median = (Median + aggregateMe[midpoint + 1]) / 2;
    }
    else
    {
        // There is no value available to calculate some statistic.
        Min = Double.NaN;
        Max = Double.NaN;
        Mean = Double.NaN;
        Median = Double.NaN;
    }
} 
```

请注意，您可能可以改进此特定实现，具体取决于您获取的数据类型（字符串、双精度值等）以及它们是如何存储的（它们是否已经作为允许操作的列表进入等等？ ）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T08:12:29.023

```
public static String Find_Mean()
{
    List<int> integerList = list.Select(q => int.Parse(q)).ToList();
    var result = integerList.Sum() / 2;
    return result.ToString();
} 
```

# iphone - 无需用户交互的推送通知

> ID：14682430
> 
> 赞同：1
> 
> 时间：2013-02-04T07:51:13.333
> 
> 标签：iphone, ios, push-notification, user-interaction

我想知道是否有任何方法可以在没有用户交互的情况下在 iOS 上使用推送通知。

我正在开发一种防盗应用程序。其中一种情况，当手机被盗时，我们应该能够远程发送命令。

我们目前采用的方法是持续监听通知端口，当我们收到通知时，查询服务器是否有任何变化。我们必须遵循这种方法，因为推送通知涉及用户交互，这在此处是不可取的。

但是，我们因此一直面临性能问题，并想重新考虑推送通知。那么有没有什么方法可以让我们在没有用户交互的情况下拥有它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:19:38.307

不，没有用户交互就无法处理推送通知。这简直是​​不可能的。您能否详细说明如何连续查询您的服务器？因为你不能让你的应用程序在后台停留更长时间。您可以在启动时查询您的服务器是否有任何更改，这是您唯一可以做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T09:17:12.557

当您的应用程序正在运行时，您可以在没有用户交互的情况下进行推送，但在股票 iphone 上，操作系统可能会在每次处于后台时杀死您的 IOS 应用程序。您可以在 info plist 中设置一个键来敦促操作系统让您运行，但这不是一种可靠的方式

# javascript - Jquery:Table Sorter- 刷新页面上的排序标准不应该改变

> ID：14682431
> 
> 赞同：0
> 
> 时间：2013-02-04T07:51:35.403
> 
> 标签：javascript, jquery, tablesorter

我正在使用 jquery [Table Sorter](http://tablesorter.com/docs/)插件对表格进行排序。我在该页面上有过滤器，具体取决于过滤器选择，“Go”按钮列表上的时钟将通过 ajax 调用填充。

现在，我希望在单击`Go`按钮时会填充一个新列表，该列表应保持以前的排序标准。修改过滤器和获取新列表时，排序标准不得更改。

有没有办法使用表格排序器插件来做到这一点？

jQuery代码

```
$(document).ready(function() {
   if(0 < $("#tablesorter tbody tr").length){ 
         $("#tablesorter") 
        .tablesorter({widthFixed: true,sortList: [[0,0]]}) 
    } 
} ); 
```

例如：如果我选择按降序对第 4 列进行排序并按下`Go`按钮以获取新列表，它应该加载列表并应用此排序顺序（即第 4 列按降序排列）

# qt - qmake 数值变量比较

> ID：14682441
> 
> 赞同：7
> 
> 时间：2013-02-04T07:52:16.443
> 
> 标签：qt, qmake, qt5

我已经下载了 Qt 5 并尝试构建我的项目。项目现在需要将小部件添加到 QT 变量，但这会在旧版本中产生警告：

> 项目消息：警告：未知 QT：小部件

简单的解决方案似乎添加了一个简单的检查：

```
equals( $$QT_MAJOR_VERSION, 5 ) {
  message(" ================ QT 5 ================ ")
  QT += widgets
} else {
  message(" ================ QT 4 ================ ")
} 
```

那没有用（打印了QT 4）。确实，equals 不是[qmake 函数参考](http://doc.qt.digia.com/4.7-snapshot/qmake-function-reference.html)的一部分，但包含。所以尝试了：

```
contains( $$QT_MAJOR_VERSION, 5 )   {
  message(" ================ QT 5 ================ ")
  QT += widgets
} else {
  message(" ================ QT 4 ================ ")
} 
```

但这也没有奏效。其他各种组合，如 contains("$$QT_MAJOR_VERSION", "5") 不起作用。

$$QT_MAJOR_VERSION 为 4 或 5 的假设通过如下行检查：

```
message( $$QT_MAJOR_VERSION ) 
```

以这种方式设置局部变量并测试其值是行不通的。

所有这一切的结论是我不了解关于 qmake 机制的一些基本知识。那么如何将变量与 qmake .pro 文件中的值进行比较呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T08:15:35.740

您可以使用：

```
greaterThan(QT_MAJOR_VERSION, 4): QT += widgets 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T08:22:51.373

除了 Zlatomir 所说的，`greaterThan`是一个严格的比较（不是“大于等于”）。您还可以`isEqual(QT_MAJOR_VERSION, 5)`用于测试数值相等性。

请注意，您不应指定`$$`for`QT_MAJOR_VERSION`和。`QT_MINOR_VERSION``QT_PATCH_VERSION`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-14T16:27:47.420

看起来

```
equals (QT_MAJOR_VERSION, 4)
{
   //some conditional stuff
} 
```

不起作用，但是

```
equals (QT_MAJOR_VERSION, 4) {
   //some conditional stuff
} 
```

工作......它对开口支架的位置很敏感！奇怪的

# sharepoint - 无法从 ssrs 中的参数获取值

> ID：14682447
> 
> 赞同：0
> 
> 时间：2013-02-04T07:52:56.357
> 
> 标签：sharepoint, reporting-services

我正在尝试将参数传递给我的 ssrs 报告。在报告中，我添加了参数并尝试显示报告，当我在“可用值”选项卡中选择“无”选项时它工作正常 ![在此处输入图像描述](../Images/ac4ed7326e138d48c047137f7475fe24.png)

和 ssrs 参数中“默认值”属性中的“无默认值”选项。

![在此处输入图像描述](../Images/72a12f89351dc1db36aad6d99b038c7e.png)

在上述情况下，报告运行正常。

但是，当我在“默认值”中提供来自共享点列表的字段值时，如下所示：

![在此处输入图像描述](../Images/4bd8a75baefef3a79fcb9d7e979454c5.png)

然后在报告预览期间抛出“未提供预期参数”的错误，如下所示：

![在此处输入图像描述](../Images/276bec847bb21e9a70ab4ab397e3059d.png)

应该是什么问题？请提供任何对此有任何解决方案的人。

提前致谢。埃什维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:48:07.580

从您的上述问题中，我只能推断您没有为`sp_New_HoursByCustomer`数据集提供`@fcTitle`参数。

您应该检查此数据集中的参数选项，并确保将其设置为比较`in`而不是`=`比较。

# mysql - 如何使用 mysqli 获取总行数

> ID：14682448
> 
> 赞同：6
> 
> 时间：2013-02-04T07:52:57.020
> 
> 标签：mysql, count, row

我正在尝试了解 mysqli 扩展并进行了谷歌搜索，但除了 php.net 之外得到的信息很少，这很有帮助。

毕竟现在我正在尝试使用mysql扩展来实现我能做到的事情，如下所示：

```
// MYSQL STYLE OF fetching array, query limit and perform total row count all at once

$sql = "SELECT SQL_CALC_FOUND_ROWS *, post.id as pid, bla bla FROM account ORDER BY pid ASC". $eb["array"]['querylimit'];

$result = mysql_query($sql, $eb["con"]);
$TotalRcount = mysql_fetch_row(mysql_query("SELECT FOUND_ROWS()"));

// Performing record count [current]
// $RecordCount = mysql_num_rows($result);

while($row = mysql_fetch_array($result)){
    // read columns
} 
```

用 mysqli 我怎么能做到这一点？我确定我错过了很多东西。请帮助我举例说明如何实现我的目标。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T12:05:40.710

你可以试试这个：

```
//Establish connection using mysqli api
$conn = mysqli_connect('hostname', 'username', 'password', 'database_name');

$sql = "SELECT SQL_CALC_FOUND_ROWS *, post.id as pid, bla bla FROM account ORDER BY pid ASC". $eb["array"]['querylimit'];

$sql2 = "SELECT FOUND_ROWS()";

$result1 = $conn->query($sql);
$result2 = $conn->query($sql2);
$TotalRcount = $result2->fetch_row();

// Performing record count [current]
// $RecordCount = $result->num_rows();

while($row = $result->fetch_array(MYSQLI_BOTH)){
    // read columns
} 
```

在 while 循环中，我使用了 MYSQLI_BOTH 常量，但您可以根据需要将其更改为 MYSQLI_NUM 或 MYSQLI_ASSOC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-26T16:13:56.653

SQL_CALC_FOUND_ROWS 通常用在带有 LIMIT 子句的 SELECT 语句中。

从 MySQL 手册（[https://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows](https://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows)）：

> 一个 SELECT 语句可能包含一个 LIMIT 子句来限制服务器返回给客户端的行数。在某些情况下，希望知道在没有 LIMIT 的情况下该语句将返回多少行，但无需再次运行该语句。要获取此行数，请在 SELECT 语句中包含 SQL_CALC_FOUND_ROWS 选项，然后调用 FOUND_ROWS()

在上面的示例中，您没有使用 LIMIT 来减少结果数量，因此使用 FOUND_ROWS() 只会意味着对数据库的额外回调。请在此处查看其他答案，以获取有关如何获取返回的行数的信息。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T07:54:35.640

使用 mysqli 你可以按照以下方式进行（假设 mysqli 对象已经创建——你也可以使用[过程方法，](http://www.php.net/manual/en/mysqli.quickstart.dual-interface.php)只是略有不同）：

```
$sql = "SELECT SQL_CALC_FOUND_ROWS *, post.id as pid, bla bla 
        FROM account ORDER BY pid ASC". $eb["array"]['querylimit'];
$result = $mysqli->query($sql);
$TotalRcount = $result->num_rows;
while($row=$result->fetch_assoc()){
    $col1 = $row['col1'];  // col1 is a placeholder for whatever column you are reading
    //read columns
} 
```

# c# - 如何将根节点添加到 xml？

> ID：14682451
> 
> 赞同：1
> 
> 时间：2013-02-04T07:53:06.223
> 
> 标签：c#, xml

我的代码生成的xml文件如下

```
<?xml version="1.0"?>
<DataClass xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <pathI>D:\POC\Input\2</pathI>
  <pathO>D:\POC\Output</pathO>
  <prefix>2_</prefix>
  <frequency>25</frequency>
</DataClass><?xml version="1.0"?>
<DataClass xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <pathI>D:\POC\Input\3</pathI>
  <pathO>D:\POC\Output</pathO>
  <prefix>3_</prefix>
  <frequency>33</frequency>
</DataClass> 
```

我想向 xml 添加一个根元素，以便我可以进一步使用 xml 来填充数据网格视图。如果可能的话，还想从每个节点中消除标签..需要帮助

```
DataClass data = new DataClass();
data.pathI = txt_input.Text;
data.pathO = txt_Output.Text;
data.frequency = Convert.ToInt32(txt_freq.Text);
data.prefix = txt_prefix.Text;
XmlDocument doc = new XmlDocument();

XmlSerializer xs = new XmlSerializer(typeof(DataClass));
if (!File.Exists("Data.xml"))
{
    using (FileStream fs = new FileStream("Data.xml", FileMode.Create))
    {
         xs.Serialize(fs, data);
         fs.Close();
         fs.Dispose();
         MessageBox.Show("Data loaded to the xml");
    }
}
else if (File.Exists("Data.xml"))
{
     using (FileStream fs = new FileStream("Data.xml",FileMode.Append))
     {
          xs.Serialize(fs, data);
          fs.Close();
          fs.Dispose();
          MessageBox.Show("Data loaded to the xml");
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:32:03.960

我不知道通过序列化以这种方式附加对象的方法。我知道的唯一选择是序列化一个对象数组。这看起来像：

```
DataClass[] objects = ...//get all your objects
if(xs == null) 
{
    xs = new XmlSerializer(typeof(DataClass[]), 
                           new XmlRootAttribute("Your root name"));
}
using (FileStream fs = new FileStream("Data.xml", FileMode.Create))
{
    xs.Serialize(fs, data);
    fs.Close();
} 
```

考虑将序列化程序声明为静态（阅读[识别并防止托管代码中的内存泄漏](http://msdn.microsoft.com/en-us/magazine/cc163491.aspx)以了解原因）：

```
private static readonly XmlSerializer xs; 
```

* * *

但是，如果您愿意改用 Linq to Xml，您可以获得所需的功能。但是，每次需要修改 xml 时，都必须将整个 xml 加载到内存中。

```
XElement x;
if (File.Exists("Data.xml"))
    x = XElement.Load("Data.xml");
else
    x = new XElement("Data");
x.Add(new XElement("DataClass",
                    new XElement("pathI", @"D:\POC\Input\2"),
                    new XElement("pathO", @"D:\POC\Output"),
                    new XElement("prefix", "2_"),
                    new XElement("frequency", "25")));
x.Save("Data.xml"); 
```

* * *

感谢 Arie 提供的链接（[Serialise object to XmlDocument](https://stackoverflow.com/questions/781442/serialise-object-to-xmldocument)），您可以执行以下操作：

```
XmlDocument temp = new XmlDocument();   //create a temporary xml document
var navigator = temp.CreateNavigator(); //use its navigator
using (var w = navigator.AppendChild()) //to get an XMLWriter
    xs.Serialize(w, data);              //serialize your data to it

XmlDocument xdoc = new XmlDocument();   //init the main xml document
string filename = "Data.xml";
if (File.Exists(filename))              //if file exists
    xdoc.Load(filename);                //load xml from it
else                                    //or 
{
    //add xml declaration to the top of the new xml document
    xdoc.AppendChild(xdoc.CreateXmlDeclaration("1.0", "utf-8", null));
    //create the root element
    xdoc.AppendChild(xdoc.CreateElement("Data"));
}

var newchild = xdoc.CreateElement("DataClass"); //the new element
newchild.InnerXml = temp.FirstChild.InnerXml;   //copy the serialized content

//append the new element to the root
xdoc.ChildNodes[1].AppendChild(newchild);       
//save the document
xdoc.Save(filename); 
```

# ios - UITextView 中的缩进

> ID：14682461
> 
> 赞同：3
> 
> 时间：2013-02-04T07:53:41.903
> 
> 标签：ios, uitextview, richtextbox, core-text, nsattributedstring

我有这样一段文字：

```
Hello World  Hello World  Hello World Hello World  Hello World  Hello World Hello World  Hello World  Hello World  Hello World  Hello World  Hello World-  Hello World  Hello World  Hello World Hello World  Hello World  Hello World Hello World  Hello World  Hello World -  Hello World  Hello World  Hello World  Hello World  Hello World  Hello World Hello World  Hello World  Hello World  Hello World  Hello World  Hello World 
```

是否有可能使用`NSAttributedString`得到这样的东西：

```
 Hello World  Hello World  Hello World Hello World  Hello World  Hello World
 Hello World  Hello World  Hello World  Hello World  Hello World  Hello World
 -  Hello World  Hello World  Hello World Hello World  Hello World  Hello World
    Hello World  Hello World  Hello World
 -  Hello World  Hello World  Hello World  Hello World  Hello World  Hello World 
    Hello World  Hello World  Hello World  Hello World  Hello World  Hello World 
```

对我来说，问题是在“-”之后的第二行缩进。目前我能够做到这一点：

```
 Hello World  Hello World  Hello World Hello World  Hello World  Hello World
 Hello World  Hello World  Hello World  Hello World  Hello World  Hello World
 -  Hello World  Hello World  Hello World Hello World  Hello World  Hello World
 Hello World  Hello World  Hello World
 -  Hello World  Hello World  Hello World  Hello World  Hello World  Hello World 
 Hello World  Hello World  Hello World  Hello World  Hello World  Hello World 
```

在示例中，我为每个“-”使用了 2 行，但可能更多，或者只有一个。

我虽然使用一个`UIWebView`或将文本分成不同的`UITextViews`，但我觉得它有点笨拙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:04:46.950

您需要使用 CoreText 框架来增强 TextView 的功能以及自由地玩文本。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:10:13.657

在搜索了无数的 3rd 方库之后，我选择了一个`UIWebView`. 我不认为我可以用其他一些东西来获得更好看的文本。我试过的一些：

*   [DTCoreText](https://github.com/Cocoanetics/DTCoreText)
*   [实时标签](https://github.com/honcheng/RTLabel)
*   [TTT属性标签](https://github.com/mattt/TTTAttributedLabel)
*   [核心文本标签](https://github.com/newsme/Core-Text-Label)

# ios - iOS：滚动 UITableView 时应用程序崩溃/内存被填充

> ID：14682464
> 
> 赞同：0
> 
> 时间：2013-02-04T07:53:52.837
> 
> 标签：ios, uitableview, hjcache

我的应用程序的一个视图显示了图像列表。当我多次滚动该列表时，我的应用程序崩溃了。我用仪器对其进行了分析，似乎列表的单元格在列表滚动时占用了更多内存。

从 tableView:cellForRowAtIndexPath: 返回时，自定义 UITableCell 是否应该“自动发布”？（如果我这样做了，我在 iOS 4.3 上会崩溃/在 iOS 5.0 和 6.1 上没问题）

这个自定义 UITableCell 有几张图片被绘制到它的“contentView”中。这些图片实际上是我在其中设置背景图像的自定义 UIButton。

使用[HJManagedImageV管理图像](https://github.com/markofjohnson/HJCache)

自定义 UIButton 的代码：

```
@implementation ProductTileButtonIpad

@synthesize product;

- (id)initWithFrame:(CGRect)frame andProduct:(Product *)aProduct {

    if (self = [super initWithFrame:frame]) {

        self.product = aProduct;

        self.productTileView = [[[HJManagedImageV alloc] initWithFrame:self.frame] autorelease];
        self.productTileView.callbackOnSetImage = self;
        self.productTileView.url = some picture url

        [[ImageManager instance] manage:self.productTileView];
    }

    return self;
}

#pragma mark -
#pragma mark HJManagedImageV delegate

-(void) managedImageSet:(HJManagedImageV*)mi {

    [self setBackgroundImage:mi.image forState:UIControlStateNormal];
}

-(void) managedImageCancelled:(HJManagedImageV*)mi {
}

- (void)dealloc {

    NSLog(@"deallocating ProductTileButtonIpad");

    [self.product release];
    [self.productTileView release];

    [super dealloc];
}

@end 
```

自定义单元格的代码

```
@implementation ProductGridCellIpad

@synthesize products, parentController;

- (void)initializeWithProducts:(NSMutableArray *)productsToShow{

    self.products = productsToShow;

    // clear possible old subviews
    for (UIView *v in self.contentView.subviews) {
        [v removeFromSuperview];
    }

    NSInteger width = 240;
    NSInteger height = 240;

    Product *product0 = [products objectAtIndex:0];

    self.productTile0 = [[[ProductTileButtonIpad alloc] initWithFrame:CGRectMake(12, 12, width, height) andProduct:product0] autorelease];

    [self.productTile0 addTarget:self.parentController action:@selector(selectedProduct:) forControlEvents:UIControlEventTouchUpInside];

    [self.contentView addSubview:self.productTile0];

    [self.productTile0 release];

    if ([self.products count] > 1) {

        Product *product1 = [products objectAtIndex:1];

        self.productTile1 = [[[ProductTileButtonIpad alloc] initWithFrame:CGRectMake(12 + width + 12, 12, width, height) andProduct:product1] autorelease];

        [self.productTile1 addTarget:self.parentController action:@selector(selectedProduct:) forControlEvents:UIControlEventTouchUpInside];

        [self.contentView addSubview:self.productTile1];

        [self.productTile1 release];
    }

    if ([self.products count] > 2) {

        Product *product2 = [products objectAtIndex:2];

        self.productTile2 = [[[ProductTileButtonIpad alloc] initWithFrame:CGRectMake(2*(12 + width) + 12, 12, width, height) andProduct:product2] autorelease];

        [self.productTile2 addTarget:self.parentController action:@selector(selectedProduct:) forControlEvents:UIControlEventTouchUpInside];

        [self.contentView addSubview:self.productTile2];

        [self.productTile2 release];
    }
}

- (void)dealloc {

    NSLog(@"deallocating ProductGridCellIpad");

    if(self.products)
        [self.products release];

    if(self.productTile0)
        [self.productTile0 release];

    if(self.productTile1)
        [self.productTile1 release];

    if(self.productTile2)
        [self.productTile2 release];

    [super dealloc];
}

@end 
```

这是创建单元格的代码：

```
 NSString *productGridCellIpadIdentifier = @"ProductGridCellIpadIdentifier";

    ProductGridCellIpad *cell = [tableView dequeueReusableCellWithIdentifier:productGridCellIpadIdentifier];

    if(cell == nil) {

        cell = [[ProductGridCellIpad alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:productGridCellIpadIdentifier];

        [cell setFrame:CGRectMake(0, 0, self.view.frame.size.width, 244)];
    }

    [cell setParentController:self];
    [cell initializeWithProducts:products];

    return cell; 
```

就像现在一样，代码在 iOS 4.3 上立即崩溃。它适用于 iOS 5 和 6，但应用程序在使用/滚动表格一段时间后仍然崩溃。

我不使用ARC。

我在 dealloc 方法中添加了一些 NSLog 以查看发生了什么，我可以看到很多“deallocating ProductTileButtonIpad”，但我从来没有看到“deallocating ProductGridCellIpad”

我的应用程序很容易达到 400Mb 的内存使用量。

我在这里做错了什么？

如果你们中的一些人有任何想法，可以帮助我理解的想法，将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T08:03:42.800

单元格被重复使用，因此您在滚动时不应该看到“dealloc ProductGridCellIpad”。而是验证回收是否真的有效，或者您是否一直在创建新单元：

```
ProductGridCellIpad *cell = [tableView dequeueReusableCellWithIdentifier:productGridCellIpadIdentifier];

if(cell == nil) {
    cell = [[ProductGridCellIpad alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:productGridCellIpadIdentifier];
    [cell setFrame:CGRectMake(0, 0, self.view.frame.size.width, 244)];
    NSLog("Cell created");
}
else {
    NSLog("Cell recycled");
} 
```

如果没问题，我会检查发布。例如，自动释放和释放都有“self.productTile2”，这可能会混淆内存管理。

另外我会仔细检查“parentController”，这可能会阻止东西被释放。您需要将其设置为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T09:37:19.893

是的，您显然必须在使用返回自动释放`autorelease`的单元格时使用您的单元格。`alloc] init..` `dequeueReusableCellWithIdentifier`

# python - 从不同子文件夹的子文件夹中相对导入python模块

> ID：14682466
> 
> 赞同：8
> 
> 时间：2013-02-04T07:53:56.457
> 
> 标签：python, import, python-module, alembic

我正在尝试使用 alembic，它是 python 中的一个 sqlalchemy 工具。您键入一个命令，它会生成一个文件夹“alembic”，其中包含 py 文件。里面的 py 文件需要在一个名为“myapp”的单独文件夹中链接到我的应用程序。但我无法链接它。它说它不存在并且相对导入不起作用。

所以我需要从**myapp/configs/config.py**文件中导入我的配置类。

```
/apps
+--/alembic
|----env.py <--- the calling file
+--/myapp
|----configs/__init__.py <--- has "DefaultConfig" class imported
|----configs/config.py <--- I want to import the class inside here. 
```

在 env.py 中：

```
from myapp.configs import DefaultConfig 
```

不工作。

我试过：

```
from ..myapp.configs import DefaultConfig 
```

没有成功。

alembic 文档中的示例代码说只使用“myapp.whatever”。

我什至在环境变量中将“/apps”和“/myapp”添加到 PYTHON_PATH 中。

示例错误：

```
File "D:\apps\myapp\lib\site-packages\alembic\command.p
y", line 97, in revision
    script.run_env()
  File "D:\apps\myapp\lib\site-packages\alembic\script.py
", line 191, in run_env
    util.load_python_file(self.dir, 'env.py')
  File "D:\apps\myapp\lib\site-packages\alembic\util.py",
 line 186, in load_python_file
    module = imp.load_source(module_id, path, open(path, 'rb'))
  File "alembic\env.py", line 5, in <module>
    from ..myapp.configs import DefaultConfig as conf
ValueError: Attempted relative import in non-package 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-13T16:27:15.697

您的问题有两种可能的解决方案：

## 修改您的 PYTHONPATH 环境变量

通过在终端中运行以下 BASH / SH shell 命令来添加应用程序目录的路径：

```
$ export PYTHONPATH=$PYTHONPATH:'/path/to/apps' 
```

请不要将其添加到 PATH 环境变量中不起作用。要了解有关 PYTHONPATH 的更多信息、如何管理它以及有关模块的友好信息：

[http://www.stereoplex.com/blog/understanding-imports-and-pythonpath](http://www.stereoplex.com/blog/understanding-imports-and-pythonpath)

但是请注意，这种方法确实会影响您系统的 PYTHONPATH。强烈建议使用 virtualenv - 以防万一出现问题，它不会影响您的所有系统和其他应用程序。使用 virtualenvwrapper 时：

```
$ add2virtualenv '/path/to/apps' 
```

更多在[这里](http://virtualenvwrapper.readthedocs.org/en/latest/command_ref.html#add2virtualenv)。

## 从 Python 脚本中附加路径

或者，您可以通过添加以下内容来执行相同的操作，但仅针对脚本运行时：

```
import sys
sys.path.append('/path/to/apps') 
```

到你的`apps/alembic/env.py`文件。

最后，在同一个文件中，进行以下更改：

```
from myapp.configs.config import DefaultConfig 
```

请注意，您的`apps/myapp`文件夹还应包含`__init__.py`文件（可能为空），以使 Python 将其视为 Demian Brecht 指出的模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:01:39.323

是`myapp`一个独立的应用程序，还是一个子应用程序，例如您可以使用 Django 找到的应用程序？如果它是一个独立的应用程序，那么你有点做错了。您真正想要做的是安装您的应用程序具有的依赖项，以便能够访问它们而不必使用相对导入等（这是不好的做法，*特别是*如果除了您之外的任何人都在使用该应用程序）。

您可能想要做的事情（同样，如果它是独立的）：

*   为您的应用程序设置一个虚拟环境（我*强烈*建议使用 virtualenvwrapper，我刚刚在我闪亮的新（和不完整）博客中写过它：http: [//demianbrecht.github.com/posts/2013/01/02/虚拟环境包装器/](http://demianbrecht.github.com/posts/2013/01/02/virtualenvwrapper/)
*   `alembic`作为依赖安装：`pip install alembic`
*   创建一个`requirements.txt`文件：`pip freeze > requirements.txt`

现在，您应该可以`import alembic`在项目中的任何位置使用 alembic via。

**编辑**：

您的目录结构也有点不稳定。您需要将所有特定于应用程序的模块放入另一个`myapp`子目录中：

```
myapp
    myapp
        __init__.py
        configs/__init__.py 
```

这样做的原因是您可以添加`myapp`到您`PYTHONPATH`的应用程序并能够通过`from myapp import foo`. 就目前而言，如果`myapp`位于您的`PYTHONPATH`，您将只能从第二个命名空间级别（即`import configs`）访问子模块，这显然是不好的原因。

# ruby - 派生类没有基类属性的值

> ID：14682467
> 
> 赞同：-2
> 
> 时间：2013-02-04T07:54:01.857
> 
> 标签：ruby

```
module Module1
  class Base1
    class << self
      attr_accessor :attr1, :attr2
      def configure
        yield(self) if block_given?
      end
    end
  end
end 

module Module1
  class Child1 < Base1
     def self.some_method1
       #... some stuff
       "#{attr1}_123"  #for some reason attr1 is nil
     end
  end
end 

  Module1::Base1.configure do |item|
    item.method1 = "43243243"
    item.method2 = "fdsfdsfd"
  end

  data1 = Module1::Child1.some_method1 #it doesn't return what I expect 
```

由于某种原因 `attr1`， in`Child1#some_method1` 与它的价值`nil`不同。`Module1::Base1.method1`我想知道为什么以及我应该怎么做才能摆脱它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:02:13.210

`attr_accessor`创建实例变量，因此您的代码正在创建类实例变量：因为类是对象，它们也可以具有实例变量。这些变量不是继承的。

还有类变量`@@foo`（

Ruby 没有一种变量类型，它的继承方式与方法继承的工作方式相同。诸如 active support 之类的库添加了一个版本`attr_accessor`（active support 调用它`class_attribute`），它设置了正确的钩子来创建行为像这样的访问器——你可以看看源代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T09:28:16.300

首先，我想应该有`s/method/attr/g`：

```
Module1::Base1.configure do |item|
  item.method1 = "43243243"
  item.method2 = "fdsfdsfd"
end 
```

次要的，在`some_method1`我们称之为 eigenclass 的 attr 中：

```
#... some stuff
"#{Base1.attr1}_123"  #for some reason attr1 is nil 
```

产生：

```
#!/usr/bin/ruby

module Module1
  class Base1
    class << self
      attr_accessor :attr1, :attr2
      def configure
        yield(self) if block_given?
      end
    end
  end
end 

module Module1
  class Child1 < Base1
     def self.some_method1
       #... some stuff
       "#{Base1.attr1}_123"  #for some reason attr1 is nil
     end
  end
end

Module1::Base1.configure do |item|
  item.attr1 = "43243243"
  item.attr2 = "fdsfdsfd"
end

puts Module1::Child1.some_method1 #it does return what I expect 
```

给出：

```
$ /tmp/a.rb
43243243_123 
```

# redis - Redis 和数据完整性

> ID：14682470
> 
> 赞同：14
> 
> 时间：2013-02-04T07:54:14.133
> 
> 标签：redis, integrity

我对 REDIS DB 有一些疑问：

*   如何保证数据的完整性？
*   有没有保证完整性的方法？
*   Redis有主键吗？或替代品
*   外键？
*   参照完整性？
*   ACID 属性如何实现？

感谢您提供可能的反馈

最好的问候 - SB -

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-11T10:42:29.183

Redis 是类固醇上的键/值存储，而不是关系数据库。

*如何保证数据的完整性？有没有保证完整性的方法？*

Redis 支持从“不安全但非常高效”到“安全但不是非常高效”的不同持久性选项。在以下位置查看更多信息：

*   [http://redis.io/topics/persistence](http://redis.io/topics/persistence)
*   [http://oldblog.antirez.com/post/redis-persistence-demystified.html](http://oldblog.antirez.com/post/redis-persistence-demystified.html)

Redis 还支持主从复制机制，以在完全节点故障的情况下保护数据。

单个 Redis 实例始终提供数据一致性（在 CAP 定理的意义上，而不是在 ACID 的意义上）。

*Redis有主键吗？或替代品*

Redis 是一个键/值存储。所有物品都有一把钥匙。没有主键或辅助键的概念。

*外键？参照完整性？*

这些是关系概念。Redis 不是关系数据库。外键没有任何意义（Redis 没有表的概念）。Redis 不维护引用完整性，必须由客户端应用程序强制执行。

*ACID 属性如何实现？*

它们不应该被实现，因为 Redis 不是事务数据库。Redis 没有回滚机制。但是，就 ACID 特性而言：

*   使用服务端 Lua 脚本可以保证一组命令的原子性和一致性
*   始终在命令级别保证隔离，也可以使用 MULTI/EXEC 块或 Lua 脚本来保证一组命令
*   激活 AOF 时可以保证持久性（使用系统 fsync）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-05T11:30:57.547

Redis Graph 是您需要更好的数据完整性和关系的模块

# php - 如何使用计算的变量值更新表字段

> ID：14682473
> 
> 赞同：1
> 
> 时间：2013-02-04T07:54:17.737
> 
> 标签：php, database

$average 是我想要替换/更新表中价格字段的变量。表结构为：

$key 是我得到这个表的 nid 的变量。

* * *

```
nid | sku     | price
7   |  prod-1 | 10
9   | prod-2  | 12 
```

* * *

我正在使用的更新查询是：

* * *

```
$query =db_query("UPDATE products a SET a.price = $average WHERE a.sku = $key"); 
```

* * *

但它给出了一个错误：

* * *

```
PDOException: SQLSTATE[22007]: Invalid datetime format: 1292 Truncated incorrect DOUBLE value: 'tshirtm': UPDATE products a SET a.price = 1.75 WHERE a.sku = 7; Array ( ) in formModule_form_submit() (line 233 of D:\xampp\htdocs\olinestore\store\sites\all\modules\formModule\formModule.module). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:05:14.623

$key 对应 nid 时，不应该使用 sku。尝试这个：

```
$query =db_query("UPDATE products a SET a.price = $average WHERE a.nid = $key"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:56:39.483

我注意到 WHERE 标准是 sku=7 - 但是在您的示例数据中，sku 是 varchar？这是故意的吗？

可能问题是您的价格列的数据类型是整数，但您正在尝试将其更新为小数。根据您的 RDBMS，这很容易解决。

祝你好运。

# asp.net-mvc - 如何通过 ftp 将 MVC3 网站部署到服务器

> ID：14682477
> 
> 赞同：0
> 
> 时间：2013-02-04T07:54:50.513
> 
> 标签：asp.net-mvc, deployment, iis-7, asp.net-mvc-4, filezilla

我能够将网站发布到本地计算机文件夹，其中有 bin、内容、脚本、视图、web、全局​​和包文件夹。在我使用 filezilla 将这些文件夹添加到我的 Web 服务器的根目录后，该网站无法正常工作。服务器确实支持asp.net 4、ii7。具体是什么步骤。我在谷歌上搜索了一些答案，但都没有帮助。如果您能帮我解决这个问题，我将不胜感激，谢谢

更新问题已修复：我的项目使用 .net 4.5 而不是 4.0 ......这导致我部署网站的服务器出现问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T08:28:37.293

部署应用程序有两个步骤：

```
1\. If ASP.NET MVC 3.0 is not installed on the server you should deploy the following set of assemblies in the bin folder of your web 
application:

Microsoft.Web.Infrastructure.dll
System.Web.Helpers.dll
System.Web.Mvc.dll
System.Web.Razor.dll
System.Web.WebPages.Deployment.dll
System.Web.WebPages.dll
System.Web.WebPages.Razor.dll
 you can set copy local to true but this is not available for all listed dll's or you can use some interesting future: right click on the project and select Add Deployable Dependencies with ASP.NET checkbox checked.A special folder named _bin_deployableAssemblies will be created with all necessary assemblies copied into this folder. When the project will be compiled all this assemblies will be copied into bin folder.

2\. Publish the application: in a local folder and copy it to your deployment server or directly via FTP. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T03:29:29.557

在属性窗口中将引用标记为复制到 Bin 目录将确保将 DLL 复制到 /bin 目录。

# c++ - 在不使用 USES_CONVERSTION 的情况下从 const char * 转换为 LPTSTR

> ID：14682480
> 
> 赞同：8
> 
> 时间：2013-02-04T07:54:55.893
> 
> 标签：c++, java-native-interface, lptstr

我正在尝试将 const char * 转换为 LPTSTR。但我不想使用USES_CONVERSION 来执行此操作。

以下是我使用USES_CONVERSION 转换的代码。有没有办法使用 sprintf 或 tcscpy 等进行转换？

```
USES_CONVERSION;
jstring JavaStringVal = (some value passed from other function);
const char *constCharStr = env->GetStringUTFChars(JavaStringVal, 0);    
LPTSTR lpwstrVal = CA2T(constCharStr); //I do not want to use the function CA2T.. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-04T08:22:09.290

`LPTSTR`有两种模式：

一个`LPWSTR`if`UNICODE`被定义，一个`LPSTR`else 。

```
#ifdef UNICODE
    typedef LPWSTR LPTSTR;
#else
    typedef LPSTR LPTSTR;
#endif 
```

或以另一种方式：

```
LPTSTR is wchar_t* or char* depending on _UNICODE 
```

如果你`LPTSTR`是非 unicode：

根据[MSDN Full MS-DTYP IDL](http://msdn.microsoft.com/en-us/library/cc230300.aspx)文档，`LPSTR`是`typedef`：`char *`

```
typedef char* PSTR, *LPSTR; 
```

所以你可以试试这个：

```
const char *ch = "some chars ...";
LPSTR lpstr = const_cast<LPSTR>(ch); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:19:22.647

USES_CONVERSION 和相关的宏是最简单的方法。为什么不使用它们？但是您总是可以检查是否定义了 UNICODE 或 _UNICODE 宏。如果它们都没有定义，则不需要转换。如果定义了其中之一，则可以使用[MultiByteToWideChar](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319072%28v=vs.85%29.aspx)执行转换。

实际上，这是一件愚蠢的事情。JNIEnv 已经有一种方法可以将字符获取为 Unicode：JNIEnv::GetStringChars。所以只需检查 UNICODE 和 _UNICODE 宏来找出使用哪种方法：

```
#if defined(UNICODE) || defined(_UNICODE)
    LPTSTR lpszVal = env->GetStringChars(JavaStringVal, 0);
#else
    LPTSTR lpszVal = env->GetStringUTFChars(JavaStringVal, 0);
#endif 
```

事实上，除非您想将字符串传递给需要 LPTSTR 的方法，否则您应该只使用 Unicode 版本。Java 字符串在内部存储为 Unicode，因此您不会获得转换的开销，而且 Unicode 字符串通常更好。

# python - 如何使用 Beautifulsoup/python 解析 html？

> ID：14682484
> 
> 赞同：0
> 
> 时间：2013-02-04T07:55:06.860
> 
> 标签：python, beautifulsoup

如何使用 beautifulsoup 解析日期开始和日期结束值？

```
<h2 name="PRM-013113-21017-0FSNS" class="pointer">
    <a name="PRM-013113-21017-0FSNS">Chinese New Year Sale<br>
       <span>February 8, 2013 - February 10, 2013</span>
    </a>
</h2> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:08:14.033

像这样的东西。

```
import re
from BeautifulSoup import BeautifulSoup

html = '<h2 name="PRM-013113-21017-0FSNS" class="pointer"><a name="PRM-013113-21017-0FSNS">Chinese New Year Sale<br><span>February 8, 2013 - February 10, 2013</span></a></h2>'
date_span = BeautifulSoup(html).findAll('h2', {'class' : 'pointer'})[0].findAll('span')[0]
date = re.findall(r'<span>(.+?)</span>', str(date_span))[0] 
```

*（PS：您也可以使用 BeautifulSoup 的`text=True`方法 with`findAll`来获取文本，而不是使用正则表达式，如下所示。）*

```
from BeautifulSoup import BeautifulSoup

html = '<h2 name="PRM-013113-21017-0FSNS" class="pointer"><a name="PRM-013113-21017-0FSNS">Chinese New Year Sale<br><span>February 8, 2013 - February 10, 2013</span></a></h2>'
date = BeautifulSoup(test).findAll('h2', {'class' : 'pointer'})[0].findAll('span')[0]
date = date.findAll(text=True)[0] 
```

### 更新：：

要将开始日期和结束日期作为单独的变量，您可以简单地拆分它们，您可以简单地拆分日期变量，如下所示：

```
from BeautifulSoup import BeautifulSoup

html = '<h2 name="PRM-013113-21017-0FSNS" class="pointer"><a name="PRM-013113-21017-0FSNS">Chinese New Year Sale<br><span>February 8, 2013 - February 10, 2013</span></a></h2>'
date = BeautifulSoup(test).findAll('h2', {'class' : 'pointer'})[0].findAll('span')[0]
date = date.findAll(text=True)[0]
# Get start and end date separately
date_start, date_end = date.split(' - ') 
```

now`date_start`变量包含开始日期，`date_end`变量包含结束日期。

# ssis - 将列从源动态映射到目标

> ID：14682486
> 
> 赞同：1
> 
> 时间：2013-02-04T07:55:25.350
> 
> 标签：ssis

我正在创建一个具有平面文件源和目标数据库的 SSIS 包。列之间的映射基于以下内容：

有一个表包含指示映射的记录，即：源列名和目标列名。这些表将基于平面文件的名称。

这样做的原因是可以在数据库中更改目标列名称，而不需要重新创建或编辑包。

请您建议我如何进行此“查找”并动态创建映射。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:44:38.103

无法动态创建映射。您需要以编程方式即时生成 SSIS 包，或使用其他方法（openrowset、bcp、批量插入...）。

# c# - 从 xml 中按文本获取节点

> ID：14682488
> 
> 赞同：-1
> 
> 时间：2013-02-04T07:55:28.360
> 
> 标签：c#, xml, .net-4.0

我的 XML 文档如下所示。我想使用像 Table,Table1,Table2 这样的元素头来获取元素块。我不能那样做。请帮助我做到这一点。

```
<?xml version="1.0" encoding="utf-8"?>
<NewDataSet>
    <Table>
        <Fld_ID></Fld_ID>
        <Fld_Name></Fld_Name>
        <Fld_Address></Fld_Address>
    </Table>
    <Table1>
        <Fld_Bank></Fld_Bank>
        <Fld_Account></Fld_Account>
        <Fld_Balance><</Fld_Balance>
    </Table1>
    <Table2>
        <Fld_Item1 name="xx" price="00" ></Fld_Item1>
        <Fld_Item2 name="xx" price="00" ></Fld_Item2>
    </Table2>
</NewDataSet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:00:34.773

```
var doc = XDocument.Load(path); // or .Parse(str)
var r = from e in doc.Element("NewDataSet") // root
                     .Elements() // first level child nodes
        // where e.Name.StartsWith("Table")
        select e; 
```

# java - 为java中已在@声明点初始化的数据成员分配的内存在哪里......？

> ID：14682491
> 
> 赞同：-3
> 
> 时间：2013-02-04T07:56:03.923
> 
> 标签：java, c++, datamember

在java中可以编写类似的代码

```
public class Print{
int n=10;
String path="C:\\file.txt";
} 
```

在创建对象之前，这些数据成员的内存分配在哪里？我想我们不能在 C++ 中做同样的事情！用 C++ 和 Java 解释我...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T08:11:55.070

在 Java 中，有一个名为 Class 的类，每个加载到运行时的类都有一个 Class 对象。这些类对象包含初始化所需的 10 和“C:\file.txt”等数据。

在 C++11 中，您*也可以*这样做，（至少它看起来是一样的，并且以 C++ 的方式具有相同的语义）：

```
class Print
{
  int n = 10;
  std::string path = "C:\\file.txt";
}; 
```

在 C++03 中这是不可能的，您必须在每个构造函数中初始化成员。C++11 中的实现方式与 Java 不同：与 Java 不同，C++ 中没有 Class 对象，运行时没有类加载。在 C++11 中，编译器将这种成员初始化器*视为*您在每个构造函数中手动编写了初始化器。在已编译的程序代码中的某处，您有 10 和“C:\file.txt”，并且每个构造函数的代码都包含一个部分，其中将要构造的对象的两个成员使用这些值进行初始化。也就是说，除非您在构造函数中显式初始化一个或两个成员，否则会覆盖默认初始化程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:02:48.647

在 java 中，在使用关键字“new”或字符串为其赋值之前，不会为对象分配内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T08:05:45.900

`n`在 Java和C++ 中，您不能`path`在创建类型**对象**`Print`之前访问变量。对象将在哪种内存中创建，在同一类型的内存中将创建它的所有字段。

在 C++ 中，当您创建这样的对象时

```
void foo() {
    Print obj;
} 
```

它将在堆栈中创建。如果你创建一个像这样的对象

```
void foo() {
    Print * obj = new Print;
} 
```

它将在堆中创建。

在 Java 中，您只能创建堆分配的对象，因此对象本身和它的字段都将被放入堆中。

请注意，在声明中初始化类的字段只允许在 C++11 中，而不是在 C++03 中

# java - java arraylist hashmap如何打印

> ID：14682492
> 
> 赞同：-4
> 
> 时间：2013-02-04T07:56:04.267
> 
> 标签：java, map, arraylist, hashmap

如何打印？？

LINE1 "A"=1, "B"=1, "C"=3
LINE2 "A"=1, "B"=1, "C"=2
LINE3 "A"=1, "B"=11, " C"=2
LINE4 "A"=1, "B"=2, "C"=2
LINE5 "A"=1, "B"=1, "C"=11

```
 ArrayList mylist = new ArrayList();

    Map<String,Integer> mMap = new HashMap<String,Integer>();
    mMap.put("A",1);
    mMap.put("B",1);
    mMap.put("C",3);
    mylist.add(mMap); 

    mMap = new HashMap<String,Integer>();
    mMap.put("A",1);
    mMap.put("B",1);
    mMap.put("C",2);
    mylist.add(mMap); 

    mMap = new HashMap<String,Integer>();
    mMap.put("A",1);
    mMap.put("B",11);
    mMap.put("C",2);
    mylist.add(mMap);

    mMap = new HashMap<String,Integer>();
    mMap.put("A",1);
    mMap.put("B",2);
    mMap.put("C",2);
    mylist.add(mMap);

    mMap = new HashMap<String,Integer>();
    mMap.put("A",1);
    mMap.put("B",1);
    mMap.put("C",11);       
    mylist.add(mMap); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:58:48.843

尝试这个 -

```
for (Map<String, Integer> map : mylist) {
    for (Entry<String, Integer> entry : map.entrySet()) {
        System.out.print("\""+entry.getKey()+"\"="+entry.getValue()+" ");
    }
    System.out.println("\n");
} 
```

输出 -

> “A”=1 “B”=1 “C”=2
> 
> “A”=1 “B”=1 “C”=3
> 
> “A”=1 “B”=1 “C”=11
> 
> “A”=1 “B”=2 “C”=2
> 
> “A”=1 “B”=11 “C”=2

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T08:07:43.607

```
int counter = 1;
StringBuffer buffer = new StringBuffer();

for (Map<String,Integer> map : mylist) {
    buffer.append("LINE");
    buffer.append(counter++);

    for (Entry<String, Integer> entry : map.entrySet()) {
        String key = entry.getKey();
        Object value = entry.getValue();

        buffer.append(" \"");
        buffer.append(key);
        buffer.append("\"=");
        buffer.append(value);
        buffer.append(", ");
    }

    String s = buffer.toString().trim().substring(0, buffer.length() - 2);
    System.out.println(s);
    buffer.delete(0, buffer.length());
} 
```

只需将其放在代码的末尾即可..

顺便说一句，将您的第一行更改为

```
ArrayList<Map<String,Integer>> mylist = new ArrayList<Map<String, Integer>>(); 
```

这将导致

```
LINE1 "A"=1, "B"=1, "C"=3
LINE2 "A"=1, "B"=1, "C"=2
LINE3 "A"=1, "B"=11, "C"=2
LINE4 "A"=1, "B"=2, "C"=2
LINE5 "A"=1, "B"=1, "C"=11 
```

**编辑：**在行号后添加空格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T08:03:38.317

略有不同的解决方案：

```
 final String A = "A";
   final String B = "B";
   final String C = "C"; 
   for (int i = 0; i < mylist.size(); i++) {
       Map<String, Integer> map = mylist.get(i);
       System.out.println(String.format("LINE%d \"A\"=%d,\"B\"=%d,\"C\"=%d", i, map.get(A), map.get(B), map.get(C)));
   } 
```

# vb.net - 如何在 AddHandler 中使用字符串？

> ID：14682495
> 
> 赞同：0
> 
> 时间：2013-02-04T07:56:32.020
> 
> 标签：vb.net

我有一种情况，我正在动态创建单选按钮，我需要在 CheckedChanged 上分配一个处理程序。在这里，我没有任何特定的功能或程序。所以我写了这个声明：

```
 AddHandler rb.CheckedChanged, AddressOf rb.Tag 
```

但它给出了错误。我怎样才能做到这一点？

编辑：

实际上，我正在为公司的其他程序员编写一个 DLL。所以他们可以在运行时设计一个特定的表格。现在我有一个创建所有控件的过程。所以现在，如果他们想创建一个单选按钮，他们会调用该过程

```
AddRadioButton(Text as string, Checked as boolean) 
```

现在应要求，我想在其中添加另一个参数，他们可以将过程名称作为字符串提供，我可以将处理程序添加到过程名称的地址。所以现在程序会变成这样

```
AddRadioButton(Text as string, Checked as boolean, OnCheckedProcedure as string) 
```

在我的代码中，我将使用

```
AddHandler rb.CheckedChanged, AddressOf OnCheckedProcedure 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:07:14.857

您添加的方法的处理程序必须与您尝试处理的事件具有相同的参数。就 RadioButton 而言，对于您要执行的操作，处理程序可能看起来像这样：

```
Private Sub CheckedChanged(sender As Object, e As EventArgs)

    Dim tempRB As RadioButton= CType(sender, RadioButton)

    tempRB.Tag = tempRB.Checked.ToString

End Sub 
```

然后你可以像这样添加你的处理程序：

```
 AddHandler rb.CheckedChanged, AddressOf CheckedChanged 
```

# android - 其他其他.java文件中的SQLite方法。如何使用

> ID：14682501
> 
> 赞同：0
> 
> 时间：2013-02-04T07:56:46.137
> 
> 标签：android, sqlite, methods

我想用 SQLite 编写一个应用程序。有两个 java 文件，一个是 Main.java，另一个是 MyDB.java。关于DB的所有方法，我想放在MyDB.java我不知道如何使用MyDB.java中的方法。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:09:51.417

我认为您必须阅读本教程。

[http://www.roseindia.net/java/javascript-array/call-method-another-class.shtml](http://www.roseindia.net/java/javascript-array/call-method-another-class.shtml) 或者这个

[Android：如何在不同的文件中使用类](https://stackoverflow.com/questions/9767657/android-how-to-use-classes-in-a-different-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:19:30.980

阅读有关[Java 类和对象](http://docs.oracle.com/javase/tutorial/java/javaOO/index.html)的信息。

基本上，您可以将 MyDB 设置为 Main 类的属性（如果它也是一个对象类），并在 Main 中对其进行初始化。然后您可以使用 MyDb 对象的方法。

或者只是在你的主函数（）中从 MyDb 创建一个对象`MyDB db = new MyDB(...)`并开始调用它的方法（例如`db.getConnection()`）

# joomla1.5 - Joomla 的 MobileESP

> ID：14682503
> 
> 赞同：2
> 
> 时间：2013-02-04T07:56:59.587
> 
> 标签：joomla1.5, joomla-extensions

我似乎无法在任何地方找到一个好的答案。在 Joomla 的 MobileESP 配置中使用“无/自定义”移动应用服务时！似乎您需要输入“使用的设备检测功能”。

不是专门输入每个移动设备（windows phone 7 os、ios、blackberry 等），难道没有一个设置可以覆盖“所有”移动设备吗？我还没有找到那个，但有点期望它存在。如果不是我会很失望...

我还没有安装 Weever 应用程序，因为我唯一需要的是重定向到移动站点并支持移动设备也可以查看完整版本（通过添加诸如“？full = 1”之类的 url 参数）。

任何帮助将不胜感激！我的 PHP 经验很少，尽管我知道您可以在标头中添加一些 PHP 代码来添加此功能，但我现在宁愿只使用插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T01:56:45.393

你联系过Weever的人吗？那将是最好的起点。

我是 MobileESP 代码库的创始人和维护者。但是，我不熟悉 Weever 如何将 MobileESP 支持集成到他们的插件中。

如果您对 MobileESP 本身感兴趣，那么我建议您使用其中一种通用检测方法，具体取决于您的目标。具体来说：

DetectIphoneTier()：仅当您想检测现代触摸屏智能手机（如 iPhone、Android、Windows Phone 等）时才使用此选项。

DetectMobileQuick()：如果您需要*任何*手机，包括旧的黑莓和 Symbian 智能手机以及功能手机，请使用此功能。

链接：

1.  Joomla 上的 Weever：[http ://extensions.joomla.org/extensions/mobile/mobile-apps/17890](http://extensions.joomla.org/extensions/mobile/mobile-apps/17890)
2.  MobileESP API 参考：[http ://blog.mobileesp.com/?page_id=53](http://blog.mobileesp.com/?page_id=53)

# visual-studio-2010 - 如何以编程方式更改 VS2010 属性表中的设置？

> ID：14682504
> 
> 赞同：1
> 
> 时间：2013-02-04T07:57:09.900
> 
> 标签：visual-studio-2010, visual-studio, propertysheet

我正在寻找一种方法（宏/插件/扩展）来更改特定属性表（已加载到解决方案中的每个项目中）中的值，而无需重新加载解决方案。有没有办法从宏或插件代码访问它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:46:57.867

编辑属性表并从宏 IDE 中查看其代码时录制宏。之后，您可以为其分配键绑定并随时播放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-04T05:33:37.217

这就是我开始工作的方式。您必须在项目中添加 VCEngine 引用。

```
VCProject project;
Projects projCollection = sol1.Projects;
project = (VCProject)projCollection.Item(1).Object;
VCConfiguration config = project.Configurations.Item("Test Release|Win32");
IVCRulePropertyStorage rule = config.Rules.Item("ConfigurationDirectories") as IVCRulePropertyStorage;

//Setting the Include directories
string rawValue = rule.GetUnevaluatedPropertyValue("IncludePath");
string evaluatedValue = rule.GetEvaluatedPropertyValue("IncludePath");
rule.SetPropertyValue("IncludePath", "Whatever you like to specify here");
//Setting the Executable Directory
rawValue = rule.GetUnevaluatedPropertyValue("ExecutablePath");
rule.SetPropertyValue("ExecutablePath", "Whatever you like to specify here"); 
```

# java - Ruby(rails/sinatra) + EJB jar 打包到 Torquebox 上的 EAR

> ID：14682509
> 
> 赞同：1
> 
> 时间：2013-02-04T07:57:41.873
> 
> 标签：java, ruby-on-rails, ruby, sinatra, torquebox

我正试图围绕扭矩箱部署选项。我有旧应用程序，其核心业务逻辑分离良好（在 jar 存档中：cdi、ebj 和所有这些东西）。我想用 ruby​​ (rails/sinatra) 为它编写前端并将其部署在扭矩箱上。

据我所知，我可以将我的 ejb-jar 放入`lib/`ruby​​ 应用程序的目录中，但是有没有办法将所有这些东西打包到耳朵存档中？我的意思是我可以将 ejb 模块和 ruby​​ web 模块作为 ear 应用程序的一部分吗？

我发现的唯一东西是[https://issues.jboss.org/browse/TORQUE-85](https://issues.jboss.org/browse/TORQUE-85)

还有类加载器呢？它们是否在每个应用程序中隔离在扭矩箱中？

# javascript - 使用角度将多维数组变成多列表

> ID：14682511
> 
> 赞同：1
> 
> 时间：2013-02-04T07:57:45.497
> 
> 标签：javascript, arrays, object, angularjs, ng-repeat

js`，我想将一个数组重复到一个列表中

**由此：** 这是在服务中：

```
var Response= [
        ["Article One"],
        ["Article Two"],
        ["Article Three"],
        ["Article Images", ["Images 1", "Images 2", "Images 3"] ],
        ["Article Five"]
    ]; 
```

并从控制器调用对象：

```
$scope.Response = function () {
        return ArtikelSucheService.Response;
    }; 
```

**我想这样重复：**

```
<ul ng-repeat="Article in Response()">
        <li>Article One</li>
        <li>Article Two</li>
        <li>Article Three</li>
        <li>Images 
            <ul ng-repeat="What must stay here?">
                <li>Images 1</li>
                <li>Images 2</li>
                <li>Images 3</li>
            </ul>
        </li>
        <li>Article Five</li>
   </ul> 
```

我不知道，我怎样才能在一个数组中重复一个数组。响应是一个数组。在响应中有 x 个图像。1 篇文章可以有很多图片。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:02:21.140

可能像下面这样？

```
<ul>
  <li ng-repeat="Article in Response()">
    {{ Article[0] }}
    <ul ng-show="Article[1]">
      <li ng-repeat="img in Article[1]">{{ img }}</li>
    </ul>
  </li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T09:55:45.500

```
var Response1= [
        ["Article One"],
        ["Article Two"],
        ["Article Three"],
        ["Article Images", ["Images 1", "Images 2", "Images 3"] ],
        ["Article Five"]
]; 
```

并在 html 中使用下面的模板

```
<ul>
  <li ng-repeat='option in responses1'>
      {{option[0]}}
      <ul>
      <li ng-repeat='suboption in option[1]'>{{suboption}}</li>
    </ul>
      </li>
    </ul> 
```

工作小提琴 [http://jsfiddle.net/jw5Qf/1/](http://jsfiddle.net/jw5Qf/1/)

# javascript - 每次单击 JQuery 按钮，显示/隐藏表单

> ID：14682512
> 
> 赞同：1
> 
> 时间：2013-02-04T07:57:46.323
> 
> 标签：javascript, jquery, button, hide, show

猜猜我刚刚从这里开始，所以不妨寻求任何帮助，因为我对这个新手问题感到非常沮丧......

我有一个显示我创建的表单的按钮，只需单击一次，但是当我想显示另一个按钮附带的另一个表单时，问题就来了。

我想要的，基本上就是`buttonA`显示`formA`，但是当我点击时`buttonB`，我想隐藏`formA`和显示`formB`。现在发生的事情是它覆盖`formA`和`formB`.

这是我当前的代码..

```
function runEffect() {
  $( "#effect" ).show( "drop");
};

function runEffect2() {
  $( "#effect2" ).show( "drop");
};

//callback function to bring a hidden box back
function hideEffect() {
    $( "#effect:visible" ).hide( "drop");

};

// set effect from select menu value

$( "#button" ).each(function(index) {
  $(this).click(function(){
  runEffect();
    });
});

$( "#button2" ).each(function(index) {
  $(this).click(function(){
  runEffect2();
    });
});

$( "#effect" ).hide();
$( "#effect2" ).hide(); 
```

我知道这很容易，但我似乎找不到答案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:03:40.067

尝试这个

```
function runEffect() {
  $( "#effect" ).show( "drop");
  $( "#effect2" ).hide( "drop");
};

function runEffect2() {
 $( "#effect2" ).show( "drop");
 $( "#effect" ).hide( "drop");
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:04:23.380

```
$('#buttonB').click(funciton()(
$('#formA').hide();
$('#formB').show();
}); 
```

像这样的东西？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T08:19:00.197

我还没有测试过，但也许你想要一个更动态的功能。按钮类必须是“formButton”之类的东西，id 应该是“form1Button”，然后表单 id 应该是“form1”等等。

（表单 2 将有一个按钮，其类为“formButton”，id 为“form2Button”，表单 2 需要 id 为“form2”

```
$(".formButton").click(function(e) {
    e.preventDefault(); //prevent default action

    var id = $(this).attr('id');
    var formId = id.replace('Button', '');

    $('#' + formId).show(); 
    $('form').not(document.getElementById(formId)).hide();

}); 
```

单击 formButton 时，将显示表单。所有其他没有请求 ID 的表格将被隐藏。

# c# - Task.Factory.StartNew 与异步方法

> ID：14682513
> 
> 赞同：24
> 
> 时间：2013-02-04T07:57:57.120
> 
> 标签：c#, task-parallel-library, async-await

可能是一个微不足道的问题，但它可能有助于我的基本理解。

以下两个实现之间有什么重要区别吗？

1.  `Task.Factory.StartNew`：

    ```
    public Task<string> ReadAllTextAsync(string path) {
        return Task.Factory.StartNew(() => File.ReadAllText(path));
    } 
    ```

2.  异步方法`StreamReader`：

    ```
    public async Task<string> ReadAllTextAsync(string path) {
        using (var stream = File.OpenRead(path))
        using (var reader = new StreamReader(stream)) {
            return await reader.ReadToEndAsync();
        }
    } 
    ```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-04T08:08:01.843

是的，有一个关键的区别：`Task.Factory.StartNew`不保留同步上下文，而在使用 async/await 时，会保留此上下文。例如，在 ASP.NET 应用程序中，这意味着如果您使用`Task.Factory.StartNew`HttpContext 可能无法在任务内部访问，而如果您使用 async/await，它将可用。

您提供的示例还有另一个重要区别。在第一种情况下，您使用的是阻塞 API：`File.ReadAllText(path)`而在第二种情况下，您使用的是具有真正异步 I/O 操作的 I/O 完成端口。这意味着在第一种情况下，您正在危及在该任务执行的整个时间内执行该任务的线程，而在第二种情况下，由于 I/O 完成端口，该线程是空闲的。

# java - netBeans 与 java 命令提示符冲突

> ID：14682515
> 
> 赞同：1
> 
> 时间：2013-02-04T07:58:07.900
> 
> 标签：java, netbeans

我在 netBeans 中使用此代码，这是编译错误。

```
public class Main
{
public static void main(String[] args)
{
int a2[]={2,3},a3={4,5,3},a4={1,2,3,4};
int a1[][]={a2,a3,a4};
System.out.println(a1[0][1]+","+a1[1][2]+","+a1[2][3]);
}} 
```

我使用命令提示符，并且没有发生任何错误..我得到了这个输出

> 3,3,4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:38:33.253

这段代码：

```
public class Main
{   public static void main(String[] args)
    {   int[] a2={2,3},a3={4,5,3},a4={1,2,3,4};
        int a1[][]={a2,a3,a4};
        System.out.println(a1[0][1]+","+a1[1][2]+","+a1[2][3]);
    }
} 
```

与此代码不同：

```
public class Main
{   public static void main(String[] args)
    {   int a2[]={2,3},a3={4,5,3},a4={1,2,3,4};
        int a1[][]={a2,a3,a4};
        System.out.println(a1[0][1]+","+a1[1][2]+","+a1[2][3]);
    }
} 
```

如果您查看每个代码中的第 3 行。

在第一个代码`int[] a2={2,3},a3=...`中表示`a2`是一个整数数组，并且`a3`也是一个整数数组。

在第二个代码`int a2[]={2,3},a3=...`中表示变量 a3 是一个整数，并且数组的每个元素`a2`都是一个整数。

看起来，您必须在命令行中运行第一个代码并在 netbeans 中运行第二个代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:01:57.077

`a3`并且`a4`两个变量都必须声明为数组，`[]`如`a3[]`and `a4[]`。

```
int a2[]={2,3},a4[]={1,2,3,4}, a3[]={4,5,3}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T08:02:18.137

我尝试在我的系统中编译你的程序，我得到了以下结果

![在此处输入图像描述](../Images/ed29b86f35a08933873c01ba817277db.png)

更改如下代码，则不会出现错误

```
public class Main
{
public static void main(String[] args)
{
int a2[]={2,3},a3[]={4,5,3},a4[]={1,2,3,4};
int a1[][]={ a2,a3,a4 };
System.out.println(a1[0][1]+","+a1[1][2]+","+a1[2][3]);
}} 
```

# html - 修复右侧的超链接

> ID：14682517
> 
> 赞同：0
> 
> 时间：2013-02-04T07:58:10.133
> 
> 标签：html

我有一个 php 文件，它将显示需要向下滚动才能完全查看的数据列表。

要创建超链接，我使用了以下内容：

```
<a href="http://localhost/test.php">Click here to go to main page</a> 
```

如何创建一个超链接，当用户向下滚动以查看数据时，该超链接将保持在右侧，以便用户无需再次向上滚动即可单击超链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:08:11.530

像这样使用

```
<div style="background-color:#eee; border:#ddd 1px solid; position:fixed; top:400px; right:0; padding:20px;"><a href="http://localhost/test.php">Click here to go to main page</a></div> 
```

现在你可以调整`top:`和`right`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:00:58.817

您需要使用 CSS 定位

```
position: fixed;

a
{
position: fixed;
} 
```

# angularjs - AngularJS ng:form——如何改变“输入”键的行为

> ID：14682520
> 
> 赞同：2
> 
> 时间：2013-02-04T07:58:19.643
> 
> 标签：angularjs

参考[ngForm 指令的 Angular 文档](http://docs.angularjs.org/api/ng.directive%3aform)：

> 如果表单只有一个输入字段，则在此字段中按 Enter 会触发表单提交 (ngSubmit)
> 
> 如果表单有 2 个以上的输入字段并且没有按钮或输入 [type=submit]，则按 Enter 不会触发提交
> 
> 如果表单具有一个或多个输入字段和一个或多个按钮或 input[type=submit]，则在任何输入字段中按 enter 将触发第*一个*按钮或 input[type=submit] (ngClick) 上的单击处理程序和封闭表单上的提交处理程序 (ngSubmit)

在我的表单中，我有一个[Bootstrap 按钮单选](http://twitter.github.com/bootstrap/javascript.html#buttons)，后跟一个`button[type=submit]`但是，当一个人从输入框中按下“输入”键时，第一个“按钮单选”被点击而不是`button[type=submit]`

我知道，根据文档，这应该发生（*第一个*按钮或输入 [type=submit]），但是有没有办法改变这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:44:21.087

如何在具有绑定功能的表单顶部放置一个隐藏按钮`submit`？

# java - java.net.SocketException：来自 SOCKS 服务器的格式错误的回复，使用 apache FTPClient

> ID：14682521
> 
> 赞同：3
> 
> 时间：2013-02-04T07:58:25.377
> 
> 标签：java, apache, sockets, ftp

我正在尝试在 java web start 应用程序中使用 Apache FTPCleint 连接到 FTP 服务器。下面是我正在使用的代码。

```
ftpInstance = new FTPClient();

ftpInstance.setRemoteVerificationEnabled(false);

ftpInstance.connect(<HostName>);
int rpyCode = ftpInstance.getReplyCode();

if(!FTPReply.isPositiveCompletion(rpyCode)){
    throw new Exception("Connection Rejected with reply code " + rpyCode + ". - " + <Hostname>);
} 
```

问题出在线路上 `ftpInstance.connect(<HostName>)`。抛出异常请查看堆栈跟踪

```
java.lang.RuntimeException: java.net.SocketException: Malformed reply from SOCKS server
at com.newgen.backend.Operation.call(Operation.java:91)
at filetransfermanager.FileTransferManagerView$1.windowOpened(FileTransferManagerView.java:48)
at java.awt.AWTEventMulticaster.windowOpened(Unknown Source)
at java.awt.Window.processWindowEvent(Unknown Source)
at javax.swing.JFrame.processWindowEvent(Unknown Source)
at java.awt.Window.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source)

Caused by: java.net.SocketException: Malformed reply from SOCKS server
at java.net.SocksSocketImpl.readSocksReply(Unknown Source)
at java.net.SocksSocketImpl.connect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at org.apache.commons.net.SocketClient.connect(SocketClient.java:171)
at org.apache.commons.net.SocketClient.connect(SocketClient.java:192)
at org.apache.commons.net.SocketClient.connect(SocketClient.java:285)
at com.newgen.ftp.FTPInstance.getInstance(FTPInstance.java:38)
at com.newgen.backend.Transport.<init>(Transport.java:58)
at com.newgen.backend.Operation.call(Operation.java:81)
... 27 more 
```

上面的代码在正常项目中运行良好，但在 java web start 中却不行。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T08:47:09.163

您已经配置了指向非 SOCKS 代理的 SOCKS 代理设置。

# android - 有没有更简单的方法来比较大量项目？

> ID：14682523
> 
> 赞同：1
> 
> 时间：2013-02-04T07:58:32.643
> 
> 标签：android, android-sdk-tools

我有一个非常长的项目列表（超过 200 个）和一个显示该列表的数据库。我有一个点击事件，它将比较如果第一个项目是“苹果”，那么当你点击它时，就会出现关于“苹果”的事实。问题是这个列表不是一个**SET**列表，这意味着“苹果”这个词可能在第 1 位，也可能在第 18 位。

我开始做一个比较像这样的**if**语句：

```
case 0:
if (text.equals("apple")) {  
[show facts about apple]
} else if (text.equals("orange")) {
[show facts about orange]
//this would continue on to compare the ENTIRE LIST (about 500 lines per case)
break; 
```

**问题**是我得到一个错误，指出：

```
The code of method onListItemClick(ListView, View, int, long) is exceeding the 65535 bytes limit 
```

必须有更简单的方法来做到这一点，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T08:30:14.630

您可以将*事实*放在数据库中并使用这些*项目*来索引表。然后，您`if`将由数据库评估。它看起来像`select fact from facts where item='apple'`。这可能有帮助吗？还可以轻松地添加、删除或更改信息。`if`此外，借助数据库索引，查找（ -评估）非常快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:57:58.590

首先，要解决您的“方法太长”问题，有几种方法。

**#1 将您的所有描述移动到 strings.xml 中。**

```
if (text.equals("apple")) {
    result = getResources().getString(R.string.apple_description);
} 
```

**#2 将你的 if-else 移动到一个单独的方法中。**

```
case 0:
    mydescription = getDescription(text); // getDescription() is the big if-else you have 
```

但是......以这种方式编码仍然**非常糟糕。**

请考虑以下内容：

**#1 为名称和描述创建一个 HashMap。**

*   苹果 - 苹果的描述
*   橙色 - 橙色的描述

**#2 在您的列表适配器中，将标签设置为指示符。**

```
view.setTag("apple"); 
```

**#3 在您的 onListItemClick 中，阅读此标签并获取说明。**

```
String text = view.getTag();
String description = myhashmap.get(text).toString();

// If your hashmap is mapping name and string resource id then:
String description = getResources().getString(Integer.parseInt(myhashmap.get(text))); 
```

# java - Java 邮件 PDF 附件不起作用

> ID：14682529
> 
> 赞同：0
> 
> 时间：2013-02-04T07:59:10.587
> 
> 标签：java, pdf, encoding, jakarta-mail, email-attachments

我正在生成 PDF 并尝试将其附加到邮件以及使用 java 从浏览器下载它。从浏览器下载工作正常，但附加到邮件是我面临的问题。该文件已附上。文件的附件名称和大小保持不变。问题是当我从邮件附件打开 PDF 时，它什么也没显示。没有内容的正确页数。当我通过硬编码附加从浏览器下载的文件时，它工作正常。所以我想问题不在于PDF生成。我尝试使用无法比较的比较工具打开两个文件（一个从浏览器下载，另一个从邮件下载）。从邮件中下载的显示转换错误。当我用记事本++打开时，两者都显示不同的编码。我对这些编码的东西不是很熟悉。我想这与编码有关。

我还观察到邮件下载中的内容与 PDF 生成中的内容相同。但是浏览器下载的那个是不同的。

我在浏览器下载中得到的摘录如下（内容太大，无法粘贴）

```
%PDF-1.4
%âãÏÓ
4 0 obj <</Type/XObject/ColorSpace/DeviceRGB/Subtype/Image/BitsPerComponent 8/Width 193/Length 11222/Height 58/Filter/DCTDecode>>stream
ÿØÿà 
```

我在邮件下载中得到的摘录如下

```
%PDF-1.4
%????
4 0 obj <</Type/XObject/ColorSpace/DeviceRGB/Subtype/Image/BitsPerComponent 8/Width 193/Length 11222/Height 58/Filter/DCTDecode>>stream
???? 
```

我正在使用 Spring MimeMessageHelper 发送消息。我正在使用以下方法添加附件

```
MimeMessageHelper.addAttachment(fileName, new ByteArrayResource(attachmentContent.getBytes()), "application/pdf"); 
```

我也尝试过另一种连接方式，但徒劳无功

```
DataSource dataSource = new ByteArrayDataSource(bytes, "application/pdf");
MimeBodyPart pdfBodyPart = new MimeBodyPart();
pdfBodyPart.addHeader("Content-Type", "application/pdf;charset=UTF-8");
pdfBodyPart.addHeader("Content-disposition", "attachment; filename="+fileName);
pdfBodyPart.setDataHandler(new DataHandler(dataSource));
pdfBodyPart.setFileName(fileName);
mimeMessageHelper.getMimeMultipart().addBodyPart(pdfBodyPart); 
```

任何帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:00:51.147

我发现了为什么它不起作用。这是一个编码问题，但与 MimeMessageHelper 无关。问题是我将 PDF 生成为 OutputStream 并将其转换为字符串，然后将其转换为字节数组。当我将其转换为 String 时，编码发生了变化，从而导致了问题。所以我通过从 outputStream 获取字节数组来修复它:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:22:57.530

您收到的消息中的附件使用什么 Content-Transfer-Encoding？通常 JavaMail 会选择一个合适的值，但如果文档包含纯文本和二进制的不寻常混合，就像您的文档看起来那样，JavaMail 可能不会选择最佳编码。您可以尝试添加 pdfBodyPart.setHeader("Content-Transfer-Encoding", "base64");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T08:11:54.443

我不确定这是否与它有关，但我注意到您没有在 中设置实际的字符集`pdfBodyPart.addHeader("Content-Type", "application/pdf;charset");`，也没有`attachmentContent.getBytes()`使用字符集作为参数进行调用。它应该如何知道您要使用哪一个？

# javascript - 如何在jquery中附加复选框

> ID：14682530
> 
> 赞同：0
> 
> 时间：2013-02-04T07:59:13.203
> 
> 标签：javascript, jquery

如何在下面的代码中在 span 之后添加复选框。

```
var aaa = $('<a/>')
.html("<span>"  "</span >" + " <span>""</span> ")                       
.attr('data-transition', 'slide') 
.appendTo(li); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:06:22.360

您`.html()`的连接有几个问题：

```
.html("<span>"  "</span >" + " <span>""</span> ")    
     //------^^^^--------------------^^--------useless quotes are here. 
```

这边走：

```
.html("<span></span ><input type='checkbox' value='' />" + " <span>""</span> ") 
```

这边走：

```
 .html("<span></span >" + " <span></span><input type='checkbox' value='' />") 
```

或两者之后：

```
.html("<span></span> <input type='checkbox' value='' />" + " <span></span><input type='checkbox' value='' />") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:05:39.440

只需在里面添加复选框的html标签`<span>` 试试这个

```
 .html("<span> <input type='checkbox' value='value' />test<input type='checkbox' value='value1' />test1</span >") ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T08:19:00.960

您也可以使用该`html`选项。

```
var $a = $("<a/>", {
  "data-transition": "slide",
  "html": $("<input>", {
    "type": "checkbox"
  })
})
.appendTo(li); 
```

它将呈现此 HTML：

```
<a data-transition="slide"><input type="checkbox"></a> 
```

# java - NullPointerException InAppBilling.IabHelper.launchPurchaseFlow（IabHelper.java:356）

> ID：14682533
> 
> 赞同：2
> 
> 时间：2013-02-04T07:59:50.987
> 
> 标签：java, android, nullpointerexception

我已经在我的项目中实现了应用内计费，但​​有时它会提供以下 NullPointerException IabHelper.launchPurchaseFlow() 方法。目前我使用保留的 ID 进行测试，并且 apk 未签名。

```
02-01 01:53:56.097: E/AndroidRuntime(9314): java.lang.NullPointerException
02-01 01:53:56.097: E/AndroidRuntime(9314):     at com.example.app.InAppBilling.IabHelper.launchPurchaseFlow(IabHelper.java:356)
02-01 01:53:56.097: E/AndroidRuntime(9314):     at com.example.app.InAppBilling.IabHelper.launchPurchaseFlow(IabHelper.java:307)
02-01 01:53:56.097: E/AndroidRuntime(9314):     at com.example.app.MYTabActivity$4.onClick(MYTabActivity.java:418)
02-01 01:53:56.097: E/AndroidRuntime(9314):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage
. 
```

. .

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T12:16:39.517

这*可能会对*您有所帮助：[http ://code.google.com/p/android/issues/detail?id=41407](http://code.google.com/p/android/issues/detail?id=41407)

```
// in IapHelper.java line 357
if (listener != null)
   listener.onIabPurchaseFinished(result, null);
flagEndAsync(); // Added
return; // Added 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-02-04T08:32:39.740

`NullPointerException`当你打电话时会来`method or varible on null refference.`

使用 Null Check 进行所有参考。

前任：

IabHelper labHelper = null;

如果你打电话

```
labHelper.getSomething(); // since labHelper is null this will cause NullPointerException 
```

避免 NullPointerException 的一些技巧

[http://www.javacodegeeks.com/2012/06/avoid-null-pointer-exception-in-java.html](http://www.javacodegeeks.com/2012/06/avoid-null-pointer-exception-in-java.html)

# php - 根据今天的下周php日期

> ID：14682534
> 
> 赞同：0
> 
> 时间：2013-02-04T07:59:57.337
> 
> 标签：php, date

我想在下周展示，如果它在星期四 13:00 之后它应该返回 +2 周（下周之后的一周）。如果不是周末，此代码可以正常工作。它在星期五之后给出错误的开始日期。什么会导致这个？

```
$current_time = strtotime('now');

if ($current_time < strtotime('thursday this week 13:00')) {
    $week_start = date('d/m/Y', strtotime('this week next monday', strtotime(date('d-m-Y'))));
    $week_end = date('d/m/Y', strtotime('next week next sunday', strtotime(date('d-m-Y'))));
} else {
    if (date('N') > 5) {
        $week_start = date('d/m/Y', strtotime('+2 week next monday', strtotime(date('d-m-Y'))));
    } else {
        $week_start = date('d/m/Y', strtotime('next week next monday', strtotime(date('d-m-Y'))));
    }

    $week_end = date('d/m/Y', strtotime('+2 week next sunday', strtotime(date('d-m-Y')))); 
} 

return $week_start." - ".$week_end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:56:31.670

即使您说您只测试日期是否在星期四 13:00 之前或之后，您的 if 语句也有 3 个分支。

似乎`+2 week next monday`应该是`next week next monday`，而读取的行`next week next monday`可能永远不会执行。

代码也可以这样简化：

```
if ($current_time < strtotime('thursday this week 13:00')){
    $week_start = strtotime('monday next week');
}else{
    $week_start = strtotime('monday +1 week');
}

$week_end = strtotime('next sunday', $week_start);

return date("Y/m/d", $week_start)." - ".date("Y/m/d", $week_end); 
```

# ios - 为什么以下代码中报告了性能滞后？

> ID：14682539
> 
> 赞同：0
> 
> 时间：2013-02-04T08:00:31.647
> 
> 标签：ios, objective-c, performance, instruments

我正在使用 EasyTableView 库，你能告诉我，当我为我的 Tableview 动态创建行时，为什么它在 Instruments 中显示出如此多的性能滞后？

上图中的代码如下：

```
CGRect buttonRect   = CGRectMake(10, 0, 473, 677);
    UIButton *button    = [UIButton buttonWithType:UIButtonTypeCustom];
    button.frame = buttonRect;
    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, button.frame.size.height-100, button.frame.size.width,50)];
    label.backgroundColor = [UIColor blackColor];
    label.textColor = [UIColor whiteColor];
    label.textAlignment = NSTextAlignmentCenter;
    [button addSubview:label];
    // Use a different color for the two different examples
    return button; 
```

![性能滞后](../Images/452f39fd7bd604b8991688c67731c73e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:10:45.217

看起来您正在为每个单元格重新生成一个单元格视图（即从不重用视图）。查看 EasyTableView 的文档，看起来 ETV 没有包含视图缓存机制，因此它为 tableview 的每一行生成新视图。

如果你的 tableview 有几十或几百行，你就有大麻烦了。我建议摆脱 EasyTableView 并使用具有单元格视图缓存和重用的 UITableViews。

或者，实现您自己的视图缓存和重用。因此，在您的情况下，您将拥有一个 UIButton 池，并且每次需要在中返回 UIButton 时`easyTableView:viewForRect:`，请检查是否有一个当前在屏幕上不可见。如果是这样，请重用它并更改您需要的任何内容（标签文本等......）。否则，创建一个新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:05:15.763

根据该屏幕截图，无法判断您是否有任何性能问题，所有按钮都需要 34% 的时间`viewForRect`，这可能很小。要获得更好的图片，请在 Instruments 中打开右侧边栏并查看时间流逝，或显示您的调用跟踪时间，而不是代码视图。

现在，一般来说，创建单元格视图不是瓶颈，但不在 UITableView 中重用它们是。

# c++ - IDXGISurface1 GetDC/ReleaseDC 的线程安全/同步规则？

> ID：14682541
> 
> 赞同：7
> 
> 时间：2013-02-04T08:00:37.643
> 
> 标签：c++, thread-safety, direct3d, dxgi

`IDXGISurface1` `GetDC/ReleaseDC`使用 创建的纹理的线程安全规则是`D3D11_RESOURCE_MISC_GDI_COMPATIBLE`什么？

我是否可以在另一个线程之间进行交互，`ID3D11Device`而不会由于隐式同步而导致数据争用或阻塞？或者我是为了避免 GPU 空闲被迫为执行 GDI 渲染的线程创建一个单独的线程，然后通过复制将其传输回“主” ？`ID3D11DeviceContext``GetDC``ReleaseDC``D3D11Device``D3D11Device``D3D11_RESOURCE_MISC_SHARED_KEYED_MUTEX`

即以下有效吗？

```
thread 1:

D3D11Device::CreateTexture2D // Create texture 1

IDXGISurface1::GetDC // Get DC for texture 1

... // Draw to texture1 using GDI

IDXGISurtface1::ReleaseDC // Release DC for texture1

thread 2:

// Is this valid if thread 1 is drawing using GDI?

D3D11DeviceContext::OMSetRenderTargets

D3D11DeviceContext::Draw // Draw texture2\. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:57:50.880

[来自MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ff471345%28v=vs.85%29.aspx)的以下两个要点似乎表明，该线程不仅不安全，而且在 HDC 非常出色时，设备的功能也会有所下降。

*   在发出任何新的 Direct3D 命令之前，您必须释放设备（它们指的是 HDC）并调用 IDXGISurface1::ReleaseDC 方法。

*   如果此方法已创建未完成的 DC，则此方法将失败。

从 DXGISurface 获取 HDC 本质上涉及到表面的父 D3D11 DC。也不支持 D3D11 DC 的多线程访问。来自此[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476891%28v=vs.85%29.aspx)页面：如果多个线程必须访问单个 ID3D11DeviceContext，它们必须使用一些同步机制（例如临界区）来同步对该 ID3D11DeviceContext 的访问。

如您所述，我将尝试在单独的线程上准备 GDI 绘图，但将其渲染到系统内存缓冲区。然后简单地将内容传送到 DXGI 表面。

另请注意，这些主题中的大多数都涉及直接上下文的行为，[D3D11 延迟上下文](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476505%28v=vs.85%29.aspx)可能具有不同的行为。

# java - java中是否有与C#中的DataSet等价的类型？

> ID：14682542
> 
> 赞同：2
> 
> 时间：2013-02-04T08:00:42.007
> 
> 标签：java, resultset

问题如标题。
当我在 Java 中使用 ResultSet 时，我发现连接和 PreparedStatement 是否已关闭，我无法从 ResultSet 中读取任何记录。
连接关闭时如何继续读取 ResultSet？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T08:05:01.363

您可能正在寻找[断开连接的行集](http://docs.oracle.com/javase/tutorial/jdbc/basics/rowset.html)。

但坦率地说，大多数时候，我只是将结果集中的数据转换为 Java 对象列表，然后关闭连接，稍后再使用这个对象列表。

# c++ - 如何为 const std::vector 释放内存

> ID：14682547
> 
> 赞同：2
> 
> 时间：2013-02-04T08:01:06.787
> 
> 标签：c++, memory-management, vector

我正在使用一个返回 const std::vector 的库 api。下面是代码

```
const std::vector<unsigned char> myvar = getData(); 
```

现在我有 myvar 的清理内存。如何用 C++ 做到这一点。

我正在尝试类似的东西

```
std::for_each(myvar.begin(), myvar.end(), [&](unsigned char mychar)
{
    cout<<mychar<<",";

    delete &mychar;

}); 
```

但是由于堆损坏而失败。

感谢您的输入。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T08:02:45.477

STL 使用[RAII 习惯用法，](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)它在必要时分配内存并自动释放。

您不需要手动 dealcoate `myvar`，只需放开`myvar`范围，所有内存将自动释放。

```
// new scope, maybe function, maybe if/while scope: 
{
    const std::vector<unsigned char> myvar = getData();
}
// myvar will be deallocated 
```

注意，总是调用`new/delete`，`new [] / delete[]`成对调用，你没有为任何`myvar`成员调用 new，你根本不需要调用`delete`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T08:02:55.260

您不必手动删除该向量的内容。向量的析构函数将负责所有必要的内存分配，并在对象超出范围时调用。例如，

```
{

  const std::vector<unsigned char> v('a', 1000); // size 1000 vector

} // v's destructor called here. 
```

这是使用标准库类型的众多原因之一。看看不是很恰当地命名的[资源获取是初始化，或 RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T08:03:12.200

```
void myFunc()
{
    const std::vector<unsigned char> myvar = getData();

} // <----- Like this 
```

当 Vector 在其包含范围的末尾被销毁时，Vector 将负责释放其自己的内容。记住，你不需要`delete`，除非你`new`。

# ios - IOS动画UINavigationController全局背景图片

> ID：14682548
> 
> 赞同：0
> 
> 时间：2013-02-04T08:01:16.177
> 
> 标签：ios, xcode

我的导航控制器加载事件中有以下内容...

```
UIImage *image = [UIImage imageNamed:@"Background.jpg"];
CGImageRef cgImg = CGImageCreateWithImageInRect(image.CGImage, CGRectMake(0, 0, 500, 620));
UIImage* part = [UIImage imageWithCGImage:cgImg];
UIImageView* imageView = [[UIImageView alloc] initWithImage:part];
[self.view insertSubview:imageView atIndex:0]; 
```

一旦我将嵌入视图设置为具有清晰的背景，这将设置背景图像并且工作正常。我的问题是加载后如何更改此图像？

我正在寻找的效果是，当不同的视图被推入堆栈时，我想裁剪图像的新部分。

我知道我可以为每个表格加载一个新图像，但我想要的效果是，当你推到下一个视图时，表格从右向左移动显示新表格，但背景从右向左移动一点少量。

结束了使用 NSTimer 和这结合

```
[[self.navigationController.view.subviews objectAtIndex:0] removeFromSuperview];
[self.navigationController.view insertSubview:imageView atIndex:0]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:16:00.933

使用标签来改变你的 backgroundView 和其他视图

```
#deifne BACKGROUNDVIEWTAG  999
if(![self.view subviews] || ((UIView *)[[self.view subviews] objectAtIndex:0]).tag != BACKGROUNDVIEWTAG)
{
    UIImage *image = [UIImage imageNamed:@"Background.jpg"];
    CGImageRef cgImg = CGImageCreateWithImageInRect(image.CGImage, CGRectMake(0, 0, 500, 620));
    UIImage* part = [UIImage imageWithCGImage:cgImg];
    UIImageView* imageView = [[UIImageView alloc] initWithImage:part];
    imageView.tag = BACKGROUNDVIEWTAG;
    [self.view insertSubview:imageView atIndex:0];
} 
```

# iphone - 获取进程 3695 的任务失败

> ID：14682549
> 
> 赞同：0
> 
> 时间：2013-02-04T08:01:22.893
> 
> 标签：iphone, xcode

尝试在我的朋友设备上启动我的应用程序时收到此消息：

“获取进程 3695 的任务失败”

有谁知道是什么意思？谷歌对我帮助不大......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T08:34:38.163

解决了，我想这是因为我尝试使用分发配置文件而不是开发运行它。

谢谢你们！

# android - 使用 Intent 在 android 中安装较新版本的应用程序

> ID：14682554
> 
> 赞同：0
> 
> 时间：2013-02-04T08:01:34.907
> 
> 标签：android

我有一个 android 应用程序，在启动时检查是否有新版本的应用程序可用。如果有更新的版本可用，应用程序会下载 .apk 文件并将其存储在 SD 卡中。现在我想请启动器安装这个新版本。我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T08:03:59.760

试试这个：

```
 Intent installIntent= new Intent(Intent.ACTION_VIEW)
    installIntent.setData(Uri.parse("file:///path/to/your.apk"))
    installIntent.setType("application/vnd.android.package-archive");
    installIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(installIntent); 
```

它将提示安装程序视图。如果您的应用未使用与 PackageManager 相同的密钥进行签名，则无法进行直接静默安装。

# javascript - 为什么无法使用 ajax 请求下载文件？

> ID：14682556
> 
> 赞同：47
> 
> 时间：2013-02-04T08:01:40.673
> 
> 标签：javascript, ajax, post, download

在我们的应用程序中，我们需要实现以下场景：

1.  从客户端发送请求
2.  服务器处理请求并生成文件
3.  服务器返回文件作为响应
4.  客户端浏览器显示文件下载弹出对话框并允许用户下载文件

我们的应用程序是基于 ajax 的应用程序，因此我们发送 ajax 请求（如使用`jquery.ajax()`函数）将非常容易和方便。

但是在 googilng 之后，事实证明只有在使用非 ajax POST 请求时才可以下载文件（就像在[这个流行的 SO 线程](https://stackoverflow.com/questions/133925/javascript-post-request-like-a-form-submit)中描述的那样）。所以我们需要实现更丑陋和更复杂的解决方案，需要构建`form`带有嵌套隐藏字段的 HTML 结构。

有人可以用简单的话解释为什么不能使用ajax请求来下载文件吗？这背后的机制是什么？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-04T08:52:46.127

这与 AJAX 无关。当然，您可以使用 AJAX 下载文件。但是文件将保存在内存中，即您不能将文件保存到磁盘。这是因为 JavaScript 无法与磁盘交互。这将是一个严重的安全问题，并且在所有主要浏览器中都被阻止。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-17T13:57:55.370

这可以使用称为 Blob 的新 HTML5 功能来完成。有一个库[FileSaver.js](https://github.com/eligrey/FileSaver.js/)可以用作该功能之上的包装器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T09:30:12.783

这是我两天前问自己的同一个问题。有一个项目，客户端使用 ExtJS 编写，服务器端实现在 ASP.Net 上。我必须将服务器端翻译成 Java。有一个下载 XML 文件的功能，该文件是服务器在客户端发出 Ajax 请求后生成的。我们都知道，Ajax 请求后不可能下载文件，只是存储在内存中。但是...在原始应用程序浏览器中显示通常的对话框，其中包含打开、保存和取消下载的选项。ASP.Net 以某种方式改变了标准行为......我花了两天时间再次证明 - 没有办法通过通常的方式请求下载文件......唯一的例外是 ASP.Net......这里是 ASP.Net代码

```
public static void WriteFileToResponse(byte[] fileData, string fileName)
    {
        var response = HttpContext.Current.Response;

        var returnFilename = Path.GetFileName(fileName);
        var headerValue = String.Format("attachment; filename={0}", 
            HttpUtility.UrlPathEncode(
                String.IsNullOrEmpty(returnFilename) 
                    ? "attachment" : returnFilename));
        response.AddHeader("content-disposition", headerValue);
        response.ContentType = "application/octet-stream";
        response.AddHeader("Pragma", "public");

        var utf8 = Encoding.UTF8;
        response.Charset = utf8.HeaderName;
        response.ContentEncoding = utf8;
        response.Flush();
        response.BinaryWrite(fileData);
        response.Flush();
        response.Close();
    } 
```

这个方法是从 WebMethod 调用的，而 WebMethod 又是从 ExtJS.Ajax.request 调用的。这就是魔法。对我来说是什么，我以 servlet 和隐藏的 iframe 结束......

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-03-17T13:36:49.327

您可以通过在下载页面中使用隐藏的 iframe 来做到这一点

只需在您的ajax成功响应中设置隐藏的ifame的src，您的任务就完成了......

```
 $.ajax({
        type: 'GET',
        url: './page.php',
        data: $("#myform").serialize(),
        success: function (data) {
          $("#middle").attr('src','url');
        },

}); 
```

# php - 在 foreach 循环中总是得到一个空数组

> ID：14682566
> 
> 赞同：0
> 
> 时间：2013-02-04T08:02:18.657
> 
> 标签：php, mysql

数据库表“system”中有两列。我有`systemId`并且想得到`mobileSystemId`. 但是我已经定义为全局的变量`$mobileSystemId`s 总是空的。

编辑：现在 array_map 不起作用。我总是得到我的异常输出“Arrayfehler ArrayMap”我有以下代码：

```
$mobileSystemIds=array();

function getMobileSystemId($systemId)
    {
        global $mysqli;
        global $mobileSystemIds;
        $query="SELECT mobileSystemId FROM system WHERE systemId ='" .$systemId ."'";
        if(!$result=$mysqli->query($query))
        {
            echo "Datenbankfehler DB-QUery";
            exit(0);
        }
        if (!$mobileSystemId=$result->fetch_assoc())
        {
            echo "Datenbankfehler DB-Fetch";
            exit(0);
        }
        $mobileSystemId=$mobileSystemId["mobileSystemId"];
        echo "mobile System ID: " .$mobileSystemId ."<br />";
        return $mobileSystemId; 
    }   

    if(!$mobileSystemIds=array_map("getMobileSystemId",$systemList))
    {
        echo "Arrayfehler ArrayMap";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:09:36.023

在这种情况下，`return`在你的函数中使用 a 会更干净。与您的问题无关，但您的`$systemId`var 是否受信任？（防止 SQL 注入）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:14:53.003

更新：

```
if(!$mobileSystemIds=array_map("getMobileSystemId",$systemList))
{
    echo "Arrayfehler ArrayMap";
} 
```

应该阅读（刚刚检查过；它对我有用）：

```
$mobileSystemIds = array_map('getMobileSystemId', $systemsList);
if (empty($mobileSystemIds))
{
    if (empty($systemsList) || !(is_array($systemsList)))
        echo "OK: no mobile IDs, but no systems either";
    else
        echo "THIS now is strange :-(";
}
else
{
    echo "Alles OK";
    var_dump($mobileSystemIds);
} 
```

我通过根据输入返回一个虚拟值来尝试这个；如果它对您不起作用，则数据库中一定有一些奇怪的东西。

（更新：下面的文字是指您的*原始*代码，没有使用数组映射）

您的代码*应该*可以正常工作。你把几个`$mobileSystemId`'s 到一个单一的`$mobileSystemId`。

它有效：我使用更简单的代码进行了测试，删除了数据库调用，但保留了您的代码和拼写，不受影响。

因此，错误必须在其他地方。我猜这个代码包含在其他东西中，并且：

*   `$mobileSystemIds = array();`声明**多次**执行，从而丢失所有数据；
*   `$mobileSystemIds = array();`声明本身包含在**更局部的范围内**，您从外部读取它，读取一个空值或完全不同的值。

尝试将代码的第一部分替换为：

```
GLOBAL $mobileSystemsIds;
if (defined($mobileSystemsIds))
    trigger_error("mobileSystemsId defined more than once", E_USER_ERROR);
else
    $mobileSystemsIds = array(); 
```

而且，在函数体中：

```
if (!defined($mobileSystemsId))
    trigger_error("mobileSystemsId should have been defined", E_USER_ERROR); 
```

# grails - 如何检查g select标签中的条件

> ID：14682567
> 
> 赞同：0
> 
> 时间：2013-02-04T08:02:21.137
> 
> 标签：grails, select, gsp

我是 Grails 和 GSP 的新手。
我需要使用 g:select 标记来实现以下代码

```
<select name="applaiances" style="width: 200px" onchange="selectedTC(this); ">
    <g:each in="${applaianceList}" var="appl">
       <g:if test="${appl == "TELEVISION"}">
          <option value="TELEVISION">TV</option>
       </g:if>
       <g:else>
          <option value="${appl}">${appl}</option>
       </g:else>
     </g:each>
</select> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:12:10.923

尚未在应用程序中尝试过此操作，但您可以尝试以下操作：

```
<g:select name="applaiances" onchange="selectedTC(this);" from="${applaianceList}" optionKey="${{it=='TELEVISION'?'TELEVISION':it}}" optionValue="${{it=='TELEVISION'?'TV':it}}"></g:select> 
```

不确定 optionKey，但您可以通过 optionValue 上的闭包应用转换。

更新：这[在此处](http://grails.org/doc/latest/ref/Tags/select.html)记录。只需搜索短语“如果您需要更多地控制每个人的方式”

# mysql - 查询为空时如何显示某些内容？

> ID：14682569
> 
> 赞同：1
> 
> 时间：2013-02-04T08:02:33.490
> 
> 标签：mysql, sql

如果查询完成，我有这段代码显示“1”，当查询为空时如何显示“0”。

```
SELECT  1 as 'access' 
FROM  `mytable` 
WHERE  `name` = 'Prophet Muhammad' and id = 1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T08:04:19.027

利用`COUNT`

```
SELECT  (COUNT(*) >= 1) as 'access' 
FROM    mytable
WHERE   name = 'Prophet Muhammad' and 
        id = 1; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/c824b/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T08:12:09.807

您可以使用它，当查询返回至少一行时显示 1，否则显示 0：

```
SELECT EXISTS (SELECT Null
               FROM  `mytable` 
               WHERE  `name` = 'Prophet Muhammad' and id = 1) as Status 
```

# localization - AOP可以用于国际化吗

> ID：14682574
> 
> 赞同：0
> 
> 时间：2013-02-04T08:02:54.697
> 
> 标签：localization, internationalization, aop

当您谈论 AOP（面向方面​​编程）时，您应该考虑一些可以应用它的横切关注点。

我认为这样的横切关注点之一就是国际化。

是否可以使用一些 AOP 框架来解决诸如国际化之类的问题？有没有人有使用它的经验？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T19:08:28.727

在某种程度上，一切都可以用于 I18n。然而，你很有可能会重新发明轮子，或者你会把事情搞砸。

现在，让我们考虑一下。横切关注点的典型示例，因此典型的用例是日志记录。但是当然你可以将它用于其他任何事情，唯一的先决条件是，你需要有你反复做的事情，或多或少相同的方式。

你可以这样做I18n吗？当然，您可以使用它来：

*   格式数字
*   格式化日期和时间

但是，我不太确定其他 I18n 问题，例如翻译字符串（可能，但是……等待它）和*消息（vel 字符串）格式*。实际上，我很难想象带有所有占位符、有效复数形式等的消息格式。这可能是可能的，但我目前看不到。

最后但并非最不重要的。仅仅因为您***可以***将 AOP 用于 I18n，并不意味着您***应该***. 对 AOP 的普遍批评是，它使代码更难（甚至不可能）理解。有时最好使用简单的、旧的（你知道的，时间过得很快）[控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)，而不是很少有人真正理解的概念。

还请记住，I18n 不仅是您可以随时添加的功能，而且需要从头到尾成为应用程序不可或缺的一部分。更糟糕的是，这不仅与代码有关，还与用户界面和整个国际用户体验有关。
您（或任何说实话的人）不太可能仅通过使用 AOP 或任何其他编程概念就能找到 I18n 编程的圣杯。这么容易解决的问题实在是太难了……

# regex - awk 命令根据条件在两个多行模式之间 grep 数据

> ID：14682575
> 
> 赞同：0
> 
> 时间：2013-02-04T08:02:53.810
> 
> 标签：regex, unix, sed, awk, grep

# 示例.xml：

` id 1 的 lvl3 测试点 id 1 的 lvl4

```
<tester>
   <level1 id="2"> test point </level1>
   <level2> </level2>
   <level3>lvl3 of id 2 </level3>
   <level4> lvl4 of id 2</level4>
   <level5> </level5>
</tester>

<tester>
   <level1 id="3"> test point </level1>
   <level2> </level2>
   <level3>lvl3 of id 3</level3>
   <level4>lvl4 of id 3</level4>
   <level5> </level5>
</tester>

<tester>
   <level1 id="2"> test point </level1>
   <level2> </level2>
   <level3>lvl3 of id 2 2nd occurance</level3>
   <level4>lvl4 of id 2 2nd occurance</level4>
   <level5> </level5>
</tester> 
```

`对于上面提到的sample.xml，只有在level1 中的**Id为****2**
时，我才需要获取level3 和level4 标记。例如：当我搜索**id=2时，我应该得到以下答案**

 ******```
<level3>lvl3 of id 2 </level3>
<level4> lvl4 of id 2</level4>

<level3>lvl3 of id 2 2nd occurance</level3>
<level4>lvl4 of id 2 2nd occurance</level4> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T08:30:29.157

使用 sed：

```
sed -n '/<tester>/{n;/<level1[ ]*id="2"/{n;n;N;p}}' input 
```

解释：

```
sed                  # execute sed
-n                   # do not print unless explicitly stated
/<tester>/           # if this line contains <tester>
{                    # then 
n;                   # skip the line (read new line over the old line)
/<level1[ ]*id="2"/  # if this line contains <level1 [spaces] id="2"
{                    # then
n;n;                 # skip it, and skip the next line
N;                   # read another line but this time append
p                    # print the buffer
}                    # end if
}                    # end if 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:30:26.980

我会推荐一个像[xmlstarlet](http://xmlstar.sourceforge.net/)这样的 xml 解析器。但是，这并不是说不能使用`awk`. 这是一种方法。像这样运行：

```
awk -f script.awk file 
```

内容`script.awk`：

```
/<tester>/ {
    r=""
    f=1
}

f && /<level1 id="2">/ {
    g=1
}

g && /<level[34]>/ {
    sub(/^[ \t]+/, "")
    r = r $0 ORS
}

/<\/tester>/ {
    if (g && r) {
        print r
    }
    f=g=0
} 
```

结果：

```
<level3>lvl3 of id 2 </level3>
<level4> lvl4 of id 2</level4>

<level3>lvl3 of id 2 2nd occurance</level3>
<level4>lvl4 of id 2 2nd occurance</level4> 
```

或者，这是单线：

```
awk '/<tester>/ { r=""; f=1 } f && /<level1 id="2">/ { g=1 } g && /<level[34]>/ { sub(/^[ \t]+/, ""); r = r $0 ORS } /<\/tester>/ { if (g && r) print r; f=g=0 }' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:29:19.390

在 awk 中使用块时，清除 RS 通常很方便。我相信这可以满足您的要求：

```
awk '/id="2"/{print ""; split( $0,a,"\n" ); for( i in a) 
    if( match( a[i], "level[34]" )) print(a[i])}' RS= input 
```******

# jquery - javascript 滑块，如“highstock 滑块”

> ID：14682577
> 
> 赞同：0
> 
> 时间：2013-02-04T08:03:06.610
> 
> 标签：jquery, highcharts, javascript, highstock

我怎样才能像**highstock 滑块一样获得滑块**

或者

如何自定义 highstock 以便我只能使用它的滑块而不使用图表。我想在滑块移动时更改页面内容，例如表格几个图表。

请参考图像以可视化问题

在移动或更改滑块时，我需要更改完整的页面数据，例如“表格数据和图表”

![在此处输入图像描述](../Images/5177cd690c4c176a702efdbe78e42172.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:53:44.747

您可以尝试使用[http://jsfiddle.net/f7Y9p/](http://jsfiddle.net/f7Y9p/)

```
yAxis: {
            height: 0,
            gridLineWidth: 0,
            labels: {
                enabled: false
            }
        },
        xAxis: {
            lineWidth: 0,
            tickLength : 0,
            labels: {
                enabled: false
            }                   
        },
series : [{
            name : 'AAPL',
            lineWidth: 0,
            marker: {
                enabled: false,
                states: {
                    hover: {
                        enabled: false
                    }
                }
            },
            data : data,
            tooltip: {
                valueDecimals: 2
            }
        }] 
```

只有导航器的空图表，然后捕获 afterSetExtremes() ( [http://api.highcharts.com/highstock#xAxis.events.afterSetExtremes](http://api.highcharts.com/highstock#xAxis.events.afterSetExtremes) )，如果您获得值，则通过 setExtreme() 函数将其设置在其他图表中[http:/ /api.highcharts.com/highstock#Axis.setExtremes()](http://api.highcharts.com/highstock#Axis.setExtremes())。

# spring - 什么是 Portlet 应用程序的根 Web 应用程序？

> ID：14682581
> 
> 赞同：1
> 
> 时间：2013-02-04T08:03:20.870
> 
> 标签：spring, liferay, applicationcontext

根 Web 应用程序上下文 XML 文件与 portlet 应用程序相关联。portlet 的 web 应用程序上下文 XML 文件包含特定于 portlet 的 beans，而 root web application context XML 文件包含 portlet 应用程序中的所有 portlet 都可以访问的 beans。根 Web 应用程序上下文 XML 中定义的 bean 可以通过定义具有相同 bean ID 的 bean 被特定于 portlet 的应用程序上下文 XML 文件覆盖。

它是用 Portles In Action 编写的。

它表示我们可以使用在 portlet 应用程序的根 Web 应用程序上下文 XML 文件中定义的 bean。

有什么例子吗？

我使用 Sping 框架在 Portlet A 中定义了一个测试 bean。

代码：web.xml

```
<listener>
    <listener-class>
      org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener> 
```

应用上下文：

```
<bean id="testA" class="org.format.liferay.study.TestA" /> 
```

我在 Portlet A 中得到 testA：

```
TestA test = (TestA)PortletApplicationContextUtils.getWebApplicationContext(getPortletContext()).getBean("testA"); 
```

这是成功。

当我创建 Portlet B

web.xml

```
<listener>
    <listener-class>
      org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener> 
```

applicationContext.xml 为空。

所以我无法在 Portlet B 中获得 testA。

我想知道如何在 liferay 中配置根应用程序上下文

# cordova - PhoneGAP，JQuery 移动应用程序无法在 ipad 3 ios 6 上运行

> ID：14682583
> 
> 赞同：0
> 
> 时间：2013-02-04T08:03:26.763
> 
> 标签：cordova, jquery-mobile, ios6

我正在为 ios 和 android 构建 phoneGap、jQuery 移动应用程序我正在使用带有 XCode 4.5.2 和 SDK 6 的 cordova 2.3，问题是当尝试在 ipad3（使用 ios 6.0.1）上运行该应用程序时，它无法正常运行，即使它在 ipad 2 上运行良好（使用 ios 5.1.1）

我的 HTML 页面：

```
<script src="js/cordova.js"></script>
<script src="js/myjs.js"></script>
<script>
 function init(){
  document.addEventListener("deviceready",getUserProfiles,false);
  }
</script>
</head>
<body onload="init()"> 
```

“getUserProfiles”函数是“myjs.js”中的一个函数，它有一个回调函数，如下所示：

```
function getUserProfiles(){
  readFile("directory","filename",callBackFunc);
}
function callbackfunc (){
 //do stuff
} 
```

这不适用于 ipad 3，但适用于 ipad 2，在 ipad3 上运行应用程序时的另一件事，如果我关闭应用程序然后重新输入它，每次我关闭它并重新打开它时，功能都会一个接一个地触发。

我想我的代码哪里出错了；

我已经研究了任何与我的问题相近的东西来构建它，我唯一得到的是“addEventListener”在 ios 6 上没有很好地触发我已经改变了很多次但仍然有相同的结果。

发生的情况是页面显示正常，但在 ipad3 上运行时未触发 java Script 和 JQuery 函数，因此页面看起来是空的，因为所有内容都是在页面加载或设备准备好时动态创建的。

提前谢谢。

****更新：readFile函数****

```
function readFile(directoryName,fileName,callBackFunc) {
alert("read = "+directoryName+"file = "+ fileName);
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSystem) {
                         var tmpPath = directoryName;
    fileSystem.root.getDirectory(tmpPath, {create: false, exclusive: false}, function (dirEntry) {
                                 var directoryReader = dirEntry;
        directoryReader.getFile(fileName, {create: false, exclusive: false}, function (fileEntry){
                                gotFileEntry(fileEntry,callBackFunc);
        }, fail);
    }, fail);
}, fail);
}

function gotFileEntry(fileEntry,callBackFunc) {
fileEntry.file(function (file){
               gotFile(file, callBackFunc);
}, fail);
 }

function gotFile(file,callBackFunc){
readAsText(file,callBackFunc);
}
function readAsText(file, callBackFunc) {
var reader = new FileReader();
reader.onloadend = function(evt) {
    console.log("Read as text");
    console.log(evt.target.result);
    jsonobject3 = evt.target.result;
    callBackFunc(evt.target.result);
};
reader.readAsText(file);
}

var fail = function(evt) {
 console.log("error in read from nested directory");
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:11:08.947

**很抱歉，我不得不就自己的问题发表答案；**

我在 IOS 6 上发现了什么

```
 document.addEventListener('deviceready',deviceReady, false) 
```

当应用程序打开时将被触发一次，“这就是我的应用程序出现故障的原因”。

所以我所做的是添加

```
addEventListener
```

第一页上的功能，并使用

```
jQuery.changePage('page.html')
```

浏览页面并插入我想要在页面打开时触发的任何 JS 代码的方法

```
  data-role="page" 
```

我的 html 页面中的元素，它将表现为

```
addEventListener
```

功能如下：

```
<div data-role="page">
    <script>
        //my script
    </script>
    <!-- the rest of my HTML element here -->
</div> 
```

我不知道这是否是最好的方法，但对我来说效果很好。

所以如果有人有更好的主意，请告诉。

# python - Python 代码在“if self.hp < 0”行返回语法错误

> ID：14682589
> 
> 赞同：0
> 
> 时间：2013-02-04T08:03:44.363
> 
> 标签：python, if-statement, syntax-error

我一直在关注[这一](http://www.youtube.com/watch?v=J25SnoX97-0)系列 youtube 视频，以便更多地了解 Python。我对某些代码的作用没有深入的了解，但我或多或少地了解了每个部分应该实现的目标，即使我可能不确定如何实现。

我在此处的最后一行收到语法错误：

```
class Character(object):
def __init__(self, name, hp):
    self.name = name
    self.hp = hp 

    self.dead = False
def attack(self, other):
    pass

def update(self):
    if self.hp < 0     #Error's on this line
        self.dead = True
        self.hp = 0 
```

这是回溯：

```
Traceback (most recent call last):   File "game.py", line 4, in
<module>
    from Characters.player import *   File "/Users/Devlin/Desktop/Dev/Python/rpg/Characters/player.py", line 2,
in <module>
    from character import *   File "/Users/Devlin/Desktop/Dev/Python/rpg/Characters/character.py", line
12
    if self.hp < 0
                 ^ SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T08:05:24.293

您忘记了行尾的冒号 ( `:`)：

```
if hp < 0: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T08:08:05.343

你`init`也*看起来*像一个构造函数。因此，它可能应该是`__init__`而不是`init`. 否则，您将遇到在对象实例化时不执行它的问题。

# android - 无法实例化接收器，java.lang.ClassCastException

> ID：14682591
> 
> 赞同：3
> 
> 时间：2013-02-04T08:04:06.103
> 
> 标签：android

```
Problem: AutoStart On Boot Up causing classcastexception.. 

I am doing Location based application , I want to run the app whenever the phone bootup,So that my app will be running continuously, I just want to start the service as soon as the phone loads all the service. 
```

我已经编写了广播接收器方法，并且在 mainfest xml 中甚至设置了接收器和权限，我正在编写以下代码，但出现运行时错误，我什至尝试删除活动并运行，但它导致了错误。请建议我一些解决方案。

**MainFest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.omkar_gpslocation"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.BATTERY_STATS" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
       <activity
            android:name="com.example.omkar_gpslocation.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.omkar_gpslocation.Activity_Settings"
            android:label="@string/title_activity_activity__settings" >
        </activity> 

<receiver android:enabled="true" android:name="com.example.omkar_gpslocation.MainActivity"
        android:permission="android.permission.RECEIVE_BOOT_COMPLETED">

        <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
</receiver>
    </application>

</manifest> 
```

**主要活动**

```
private BroadcastReceiver MyReceiver= new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        Intent serviceIntent = new Intent("com.example.omkar_gpslocation");
        context.startService(serviceIntent); 

    }
}; 
```

**日志猫：**

```
02-04 13:21:08.462: E/AndroidRuntime(503): FATAL EXCEPTION: main
02-04 13:21:08.462: E/AndroidRuntime(503): java.lang.RuntimeException: Unable to instantiate receiver com.example.omkar_gpslocation.MainActivity: java.lang.ClassCastException: com.example.omkar_gpslocation.MainActivity
02-04 13:21:08.462: E/AndroidRuntime(503):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:1873)
02-04 13:21:08.462: E/AndroidRuntime(503):  at android.app.ActivityThread.access$2400(ActivityThread.java:155)
02-04 13:21:08.462: E/AndroidRuntime(503):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1049)
02-04 13:21:08.462: E/AndroidRuntime(503):  at android.os.Handler.dispatchMessage(Handler.java:130)
02-04 13:21:08.462: E/AndroidRuntime(503):  at android.os.Looper.loop(SourceFile:351)
02-04 13:21:08.462: E/AndroidRuntime(503):  at android.app.ActivityThread.main(ActivityThread.java:3820)
02-04 13:21:08.462: E/AndroidRuntime(503):  at java.lang.reflect.Method.invokeNative(Native Method)
02-04 13:21:08.462: E/AndroidRuntime(503):  at java.lang.reflect.Method.invoke(Method.java:538)
02-04 13:21:08.462: E/AndroidRuntime(503):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:969)
02-04 13:21:08.462: E/AndroidRuntime(503):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:727)
02-04 13:21:08.462: E/AndroidRuntime(503):  at dalvik.system.NativeStart.main(Native Method)
02-04 13:21:08.462: E/AndroidRuntime(503): Caused by: java.lang.ClassCastException: com.example.omkar_gpslocation.MainActivity
02-04 13:21:08.462: E/AndroidRuntime(503):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:1864)
02-04 13:21:08.462: E/AndroidRuntime(503):  ... 10 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T08:09:28.787

你必须在自己的类中编写你的接收器。不要将其写为 Activity 中的字段。

如果你想在 Manifest 文件中注册一个接收器，它必须在它自己的文件中。创建一个`BroadcastReceiver`在新文件中扩展的新类。然后使用这个类的名称作为清单中的接收者名称，而不是 MainActivity。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:35:05.090

如果您在清单中声明接收器，则它必须在其自己的 java 文件中。在这里，您正在以编程方式在活动中创建接收器实例，因此您可以通过 registerReceiver 方法以编程方式注册它，或者在另一个文件中创建它并给出该文件的名称在 android:name 你的接收者标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-08T17:22:01.947

对于每个有问题的人：

**如何在没有清单的情况下接收广播并在活动中以编程方式声明它。**

1.  将接收器写为活动的内部类。
2.  在activity的onResume方法中注册receiver
3.  在 onPause 方法中取消注册接收器

IE

```
public class Simpleclass extends Activity
{
    public final String ACTION_BROADCAST = "com.example.intent.action.something";
    private aBroadcastReceiver mReceiver;

    private class aBroadcastReceiver extends BroadcastReceiver
        {
            @Override
            public void onReceive(Context context, Intent intent)
            {
                foo();
                //do something  
            }

        }

        //[...]

        @Override
        public void onPause()
        {
            getApplicationContext().unregisterReceiver(mReceiver);
            super.onPause();
        }

        @Override
        public void onResume()
        {
            final IntentFilter intentFilter = new IntentFilter(mReceiver);
            mReceiver= new aBroadcastReceiver();
            getApplicationContext().registerReceiver(mReceiver, intentFilter);
            super.onResume();
        }
} 
```

要发送广播：

```
final Intent broadcast = new Intent(Simpleclass.ACTION_BROADCAST);
getApplicationContext().sendBroadcast(broadcast); 
```

# ajax - 如何用yui3发布表格

> ID：14682595
> 
> 赞同：1
> 
> 时间：2013-02-04T08:04:20.443
> 
> 标签：ajax, yui

当我使用 yui3 的 io-form 模块发布表单时，我发现服务器接收的字段值为空......欢迎任何帮助。

```
<form  name='testajax' id="testajax1" >
  <input type="text" name="test1"  id="test1" ></input>
  <input type="text" name="test2"  >
  <input type="text" name="test3" id="result" >
  <input type="submit" value="submit" id="submit">
</form>

Y.io('/ajax/test',{
        method:'POST',
    form: {
            id:Y.one('#testajax1'),
            useDisabled: true,

          },
        on:{
                complete:function(id,response){
                                 Y.log(Y.one('#test1').get('value'));
                         },
                start:function(id,response){
                                 Y.log(Y.one('#test1').value);
                         }
        }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:56:03.520

您正在将 Y.Node 传递给 form.id 并且文档表明它需要一个字符串或一个“formObject”，我假设它是一个“表单元素”。我不相信 Y.Node 是有效的（如果为真，这是一个不幸的 API 选择）。尝试将您的代码切换为：

```
form: {
    id: "#testajax1"
} 
```

[http://yuilibrary.com/yui/docs/io/#serializing-html-form-as-data](http://yuilibrary.com/yui/docs/io/#serializing-html-form-as-data)

# iphone - 即使在重新启动我的开发 Mac 之后，实体仍然不符合键的键值编码

> ID：14682597
> 
> 赞同：1
> 
> 时间：2013-02-04T08:04:30.087
> 
> 标签：iphone, ios, cocoa-touch, core-data

```
 if (self.temp) 
    {
    NSDateFormatter *form = [[NSDateFormatter alloc] init];
    [form setDateFormat:@"dd/MM/yyyy"];
    dt1 = [form stringFromDate:[datePicker date]];
    [self.temp setValue:dt1 forKey:@"dateOne"];
    }
    else
    {
    NSDateFormatter *form = [[NSDateFormatter alloc] init];
    [form setDateFormat:@"dd/MM/yyyy"];``
    dt1 = [form stringFromDate:[datePicker date]];
    NSManagedObject *newGoalText = [NSEntityDescription insertNewObjectForEntityForName:@"Goal" inManagedObjectContext:context];
    [newGoalText setValue:dt1 forKey:@"dateOne"];
    } 
```

这是我编写的将日期作为字符串保存到我的核心数据模型中的代码。我创建了一个实体。目标“Goal”包含属性“goalText(String)”、“dateStr(string)”和“dateOne(String)”。当要编辑数据时，if 条件有效，否则 else 条件有效。那就是流量。因此，当我执行此代码时，我收到错误为“[setValue:forUndefinedKey:]：实体目标不是键值编码兼容键“dateOne”。'”。不过，前两个属性已成功保存和获取。还有一件事是第三个属性是从不同的视图设置的。

我已经按照[另一个问题](https://stackoverflow.com/q/3428323/30461)的答案重新启动了 Mac ，但没有得到任何结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:24:04.413

我已经解决了。在某个阶段，我删除了 name.xcdatamodel 并创建了一个具有相同名称的新模型。但是旧的一些仍然存在于我的项目中。删除那个旧的解决了我的问题。谢谢你的帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T08:30:01.080

不确定它是否会修复你的 pb，但上次我遇到这个问题是因为捆绑包中的一个搞砸了。（当我在 coredata 模型上添加属性并从模型重新生成类时发生）旧模型仍在使用中。

与问题中解释的几乎相同： [Entity is not key value coding-compliant for the key](https://stackoverflow.com/questions/3428323/entity-is-not-key-value-coding-compliant-for-the-key-objective-c-cocoatouch-co)

如果尚未完成，请尝试从管理器中清除项目的派生数据。这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-27T05:41:09.553

可能这是迟到的帖子。但希望它会帮助一些人。

我最近收到了这个错误。对我来说，在更改 Xcdatamodel 时，我缺少钥匙。我在实体中添加了密钥。然后它工作正常。

# lucene - 如何从 neo4j 返回所有最新节点？

> ID：14682598
> 
> 赞同：1
> 
> 时间：2013-02-04T08:04:31.910
> 
> 标签：lucene, neo4j, cypher, gremlin

是否可以查询 neo4j 的最新节点？在这种情况下，索引属性“timestamp”以毫秒为单位记录每个节点上的时间。

我发现的所有密码示例都涉及图形类型查询-“从节点 n 开始并遵循关系。返回按一个字段排序的结果集的一般最佳方法是什么？这在诸如 node4j 之类的图形数据库中是否可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T08:24:35.373

在嵌入式 Java API 中，可以使用 Lucene 构造添加排序。

[http://docs.neo4j.org/chunked/milestone/indexing-lucene-extras.html#indexing-lucene-query-objects](http://docs.neo4j.org/chunked/milestone/indexing-lucene-extras.html#indexing-lucene-query-objects) [http://blog.richeton.com/2009/05/12/lucene-sort-tips /](http://blog.richeton.com/2009/05/12/lucene-sort-tips/)

在服务器模式下，您可以将`?order`参数传递给 lucene 查找查询。

[http://docs.neo4j.org/chunked/milestone/rest-api-indexes.html#rest-api-find-node-by-query](http://docs.neo4j.org/chunked/milestone/rest-api-indexes.html#rest-api-find-node-by-query)

根据您索引数据的方式（不是数字，因为 lucene 查询语法解析器和数字搜索存在问题：（），在密码中您可以执行以下操作：

```
start n=node:myindes('time: [1 to 1000]') return n order by n.time asc 
```

还有更多的图形方法可以做到这一点，例如通过将事件与`NEXT`关系联系起来并从这个列表中返回头和下 n 个元素

[http://docs.neo4j.org/chunked/milestone/cypher-cookbook-newsfeed.html](http://docs.neo4j.org/chunked/milestone/cypher-cookbook-newsfeed.html)

或为时间创建一个树形结构：

[http://docs.neo4j.org/chunked/milestone/cypher-cookbook-path-tree.html](http://docs.neo4j.org/chunked/milestone/cypher-cookbook-path-tree.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T08:19:43.350

是的，这是可能的，并且有一些不同的方法可以做到这一点。

您可以使用时间戳属性和经典索引，并按该属性对结果集进行排序。或者你可以创建一个基于时间的图内索引，就像 Peter 的博客文章中描述的 fe：

[http://blog.neo4j.org/2012/02/modeling-multilevel-index-in-neoj4.html](http://blog.neo4j.org/2012/02/modeling-multilevel-index-in-neoj4.html)

# ruby - eventmachine：如何并发？

> ID：14682600
> 
> 赞同：0
> 
> 时间：2013-02-04T08:04:37.620
> 
> 标签：ruby, eventmachine

这是我的代码，我使用 sleep 来模拟长时间运行的请求

```
require 'eventmachine'

def test (i)
    puts "#{i} start to sleep..."
    sleep i
    puts "#{i} end..."
end

EventMachine.run do
    (1..3).each do |i|
        test i
    end
    Signal.trap("INT") do
        connection.close do
            EM.stop { exit }
        end
    end
end 
```

它给了我：

```
1 start to sleep...
#### after 1 second
1 end...
2 start to sleep...
#### after 2 seconds
2 end...
3 start to sleep...
#### after 3 seconds
3 end... 
```

我想得到：

```
#### immediately
1 start to sleep...
2 start to sleep...
3 start to sleep...
#### after 1 second
1 end...
#### after 1 second
2 end...
#### after 1 second
3 end... 
```

我的代码有什么问题？如何并发？或者我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:36:19.540

我认为您将并发与多线程混为一谈。事件机是单线程的……看例子如何模拟并发：
[https ://github.com/eventmachine/eventmachine/wiki/Code-Snippets](https://github.com/eventmachine/eventmachine/wiki/Code-Snippets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T09:11:41.077

您可能想使用[EventMachine#map](http://eventmachine.rubyforge.org/EventMachine/Iterator.html#map-instance_method)方法：

```
EM::Iterator.new(1..3).map(proc{ |num,iter|
  iter.return(test(num))
}, proc{ |results|
  p results
}) 
```

我没有测试代码，因为我这里没有环境，但它应该给你一个提示。希望能帮助到你。

# jquery - 将 BackboneRelational 作为 ajax 数据发送

> ID：14682602
> 
> 赞同：0
> 
> 时间：2013-02-04T08:04:45.623
> 
> 标签：jquery, backbone.js, backbone-relational

我有一个扩展的模型，`Backbone.RelationalModel`并且具有一对多的关系，当我尝试以该模型作为参数发送 ajax 请求时会出现问题。

```
$.ajax(
        url: 'save'
        type: 'POST'
        data:
          project: MyApp.project
      ) 
```

`Uncaught TypeError: Cannot read property '_permitsAvailable' of undefined`我在名为的方法中出现以下错误 ，`acquire` 有人可以告诉我为什么会这样吗？

编辑：

在挖掘错误原因后，我发现`jQuery.param`函数定义了`add(key, value)`函数，在某些时候这个`value`属性是`acquire`函数，这个函数将没有这个，所以我得到错误，我不知道为什么`_queue`Backbone.RelationalModel会被序列化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:37:23.747

我不知道为什么会这样。不过，这里有一些信息可以帮助您解决问题：

该`acquire`方法是 的一部分`Backbone.Semaphore`，它是用于 Backbone.Relational 中的队列和并发管理的 mixin。信号量 mixin 混合到几个不同的类中，包括`RelationalModel`.

私有`_permitsAvailable`属性只能在 mixin 内部访问，使用`this._permitsAvailable`. 您的错误消息告诉您发生错误，因为`this`未定义。这只有在使用`Function.call`or执行方法时才会发生`Function.apply`。

**编辑：**问题似乎是jQuery试图通过迭代它的每个属性来序列化模型，如果属性是一个函数，则调用该函数并序列化它的返回值。这对于 Backbone 模型来说是不行的，因为数据属性实际上并不在模型对象上，而是存储在`Model.attributes`属性中。

通过使用以下方法将模型对象转换为对序列化更友好的格式，应该可以轻松解决此问题`Model.toJSON`：

```
$.ajax(
  url: 'save'
  type: 'POST'
  data:
    project: MyApp.project.toJSON()
) 
```

引用[Model.toJSON 文档](http://backbonejs.org/#Model-toJSON)：

> 返回模型属性的副本以进行 JSON 字符串化。这可用于持久性、序列化或在发送到服务器之前进行扩充。这个方法的名字有点令人困惑，因为它实际上并不返回 JSON 字符串——但我担心它是 JSON.stringify 的 JavaScript API 的工作方式。

您还必须确保将主干关系中的`includeInJSON`选项`reverseRelation`设置为 false 以避免序列化`model.attributes`.

# r - 从空间多边形数据帧的栅格堆栈中提取值

> ID：14682606
> 
> 赞同：1
> 
> 时间：2013-02-04T08:05:08.503
> 
> 标签：r, geospatial, polygon, raster

我有一个包含 27 个栅格的栅格堆栈。我在空间多边形数据框中有 27 个相应的多边形。我想将多边形 [i] 覆盖在栅格 [i] 上，从栅格 [i] 中提取和求和值，获取多边形 [i] 内像元数的计数，然后将总和值除以 #的细胞。换句话说，栅格是利用率分布或内核使用密度。我想知道多边形与栅格重叠的区域有很多用途。我想除以多边形中的单元格数以考虑多边形的大小。

我有一个提供给我的脚本来执行此操作，只是它的编写目的是仅通过数据框中的任意数量的空间多边形从 1 个栅格中提取数据。它有效，它丑陋，我现在想把它转换成更流线的东西。我只希望我身边有人可以提供帮助，因为这可能需要一段时间？

这是我得到的代码，也是我对正在发生的事情的总结：

```
msum99Kern07 = SpatialPolygonDataFrame (many polygons)
KERNWolfPIX07m = Raster (this is a single raster, I have 27 rasters I put into a stack 
```

)

```
#Extracting value from raster to many polygons 
sRISK_Moose07m<- extract(KERNWolfPIX07m, msum99Kern07,df=FALSE,method='bilinear')

#Calculate THE SUM FOR EACH polygon#
sRISK_Moose07m<-unlist(lapply(sRISK_Moose07m, function(x) if (!is.null(x)) sum(x, na.rm=TRUE) else NA ))
sRISK_Moose07m<-as.data.frame(sRISK_Moose07m)

#Im not sure why these next commands are needed Im only guessing
#data.frame(levels) as there are many polygons creating a dataframe to put the info into
ID_SUM_07<-as.data.frame(levels(as.factor(msum07locs$ID2)))
#ADD ID TO THE risk data frame 
sRISK_Moose07m$ID<-ID_SUM_07[,1] 

#NUMBER OF CELLS WITHIN POLYGON EXTRACT CELLS/ POLYGON
NB_SUM2007m<-cellFromPolygon(KERNWolfPIX07m, msum99Kern07)
NB_SUM07m<-unlist(lapply(NB_SUM2007m, function(x) if (!is.null(x)) length(x) else NA ))

#####CONVERT TO DATA FRAME
NB_SUM07m<-as.data.frame(NB_SUM07m)

###ADD THE NB OF CELLS TO THE RISK_SUM FILE###
sRISK_Moose07m$NB_CELLS<-NB_SUM07m[,1]

###DIVIDING VALUE by NB CELLS##
sRISK_Moose07m$DIVID<-sRISK_Moose07m$sRISK_Moose07m/sRISK_Moose07m$NB_CELLS 
```

现在，我有包含 27 个多边形的空间多边形数据框和包含 27 个栅格的栅格堆栈。我想选择 raster[i] 和 polygon[i] 并提取、求和并计算重叠区域的核密度。要记住的一件事，我可能会收到一个错误，因为多边形和栅格可能不重叠......我根本不知道如何在 R 中检查这一点。

我的脚本我已经开始了：

```
moose99kern = spatial polygon data frame 27 moose
Rastwtrial = stack of 27 rasters having the same unique name as the ID in moose99kern

mkernID=unique(moose99kern$id)

for (i in length(mkernID)){
           r = Rastwtrial[Rastwtrial[[i]]== mkernID[i]] #pick frm Rasterstack the raster that has the same name
            mp = moose99kern[moose99kern$id == mkernID[i]] #pick from spatialpolygondataframe the polygon that has the same name 

            RISK_MooseTrial<- extract(r, mp, df=T, method'bilinear')
            risksum = (RISK_MooseTrial, function(x) if (!is.null(x)) sum(x, na.rm=TRUE) else NA )#sum all the values that were extracted from the raster 
```

我的脚本甚至没有开始工作，因为我不知道如何索引光栅堆栈。但即便如此，一次通过 1 个栅格/1 个多边形，我不确定接下来在代码中要做什么。如果这对 StackOverflow 来说太过分了，我深表歉意。我只是严重卡住，无处可去。
这是2个人的多边形测试数据

```
 dput(mtestpoly) 
    new("SpatialPolygonsDataFrame"
        , data = structure(list(id = structure(1:2, .Label = c("F01001_1", "F07002_1"
    ), class = "factor"), area = c(1259.93082578125, 966.364499511719
    )), .Names = c("id", "area"), row.names = c("F01001_1", "F07002_1"
    ), class = "data.frame")
        , polygons = list(<S4 object of class structure("Polygons", package = "sp")>, 
        <S4 object of class structure("Polygons", package = "sp")>)
        , plotOrder = 1:2
        , bbox = structure(c(6619693.77161797, 1480549.31292137, 6625570.48348294, 
    1485861.5586371), .Dim = c(2L, 2L), .Dimnames = list(c("x", "y"
    ), c("min", "max")))
        , proj4string = new("CRS"
        , projargs = NA_character_ 
```

输入（Rastwtest）

```
new("RasterStack"
    , filename = ""
    , layers = list(<S4 object of class structure("RasterLayer", package = "raster")>, 
    <S4 object of class structure("RasterLayer", package = "raster")>)
    , title = character(0)
    , extent = new("Extent"
    , xmin = 1452505.6959799
    , xmax = 1515444.7110552
    , ymin = 6575235.1959799
    , ymax = 6646756.8040201
)
    , rotated = FALSE
    , rotation = new(".Rotation"
    , geotrans = numeric(0)
    , transfun = function () 
NULL
)
    , ncols = 176L
    , nrows = 200L
    , crs = new("CRS"
    , projargs = NA_character_
)
    , z = list()
    , layernames = "Do not use the layernames slot (it is obsolete and will be removed)\nUse function 'names'"
) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T12:46:55.073

也许我错过了一些东西，但我认为你把问题复杂化了。对我来说，你有：

1.  栅格堆栈：栅格列表：`ss`
2.  与 ss 大小相同的多边形列表：`polys`

您需要`extract`从 (ss,polys) 申请每一对 (layer,poly)

```
sapply(1:nlayers(ss), function(i) {
     m <- extract(ss[[i]],polys[i], method='bilinear', na.rm= T)[[1]]
     d <- ifelse (!is.null(m) , sum(m)/length(m), NA)
     d
}) 
```

这是一个 2 长度的示例，因为您没有给出可重复的示例：

```
## generate some data
library(raster)
cds1 <- rbind(c(-180,-20), c(-160,5), c(-60, 0), c(-160,-60), c(-180,-20))
cds2 <- rbind(c(80,0), c(100,60), c(120,0), c(120,-55), c(80,0))
## In your case you need something like SpatialPolygons(moose99kern)
polys <- SpatialPolygons(list(Polygons(list(Polygon(cds1)), 1), 
                              Polygons(list(Polygon(cds2)), 2)))
r   <- raster(ncol=36, nrow=18)
r[] <- 1:ncell(r)
r1   <- raster(ncol=36, nrow=18)
r1[] <- seq(-1,-2,length.out=ncell(r1))
ss <- stack(r,r1)
## density compute
sapply(1:nlayers(ss), function(i) {
         ## sum of values of the cells of a Raster ss[[i]] covered by the poly polys[i]
         m <- extract(ss[[i]],polys[i], method='bilinear', na.rm= T)[[1]]
         d <- ifelse (!is.null(m) , sum(m)/length(m), NA)

})

[1] 387.815789  -1.494714 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T18:13:08.710

当您询问有关 R 的问题时，请始终使用简单的可重现示例，而不是您自己的数据；除非您想要做的事情可能适用于这样的示例，但不适用于您的数据，但仍然会显示有效的示例以及您收到的错误消息。您通常可以从帮助文件中的示例开始，如下面的 ?extract

```
r <- raster(ncol=36, nrow=18)
r[] <- 1:ncell(r)
s <- stack(r, r*2)
cds1 <- rbind(c(-180,-20), c(-160,5), c(-60, 0), c(-160,-60), c(-180,-20))
cds2 <- rbind(c(80,0), c(100,60), c(120,0), c(120,-55), c(80,0))
polys <- SpatialPolygons(list(Polygons(list(Polygon(cds1)), 1), 
                         Polygons(list(Polygon(cds2)), 2)))

v <- extract(s, polys, small=TRUE)

#cellnumbers for each polygon
sapply(v, NROW)

# mean for each polygon
sapply(v, function(x) apply(x, 2, mean, na.rm=T)) 
```

如果您的一些 polgyons 在栅格之外（即返回 NULL，但“small = TRUE”选项应该避免栅格内非常小的多边形出现问题，则 sapply 中的函数需要改进。另请注意，没有“方法" 使用 SpatialPolygon* 对象提取时的参数。

不要使用循环，除非为了防止内存问题，如果每个多边形有很多单元格。

# css - 两侧有两个 div 的居中 div - （非现有的完整作品）

> ID：14682613
> 
> 赞同：-1
> 
> 时间：2013-02-04T08:05:24.920
> 
> 标签：css, html, photoshop

好吧，这就是故事。我正在开发我的第一个网站，我遇到的第一个问题是制作主 div 的圆角，它将包含所有内容。CSS3 是一个很好的解决方案，但与 IE6-8 的不兼容让我望而却步。

此外，我需要将圆形 div（它实际上是矩形，950x1600，带有 30px 圆角）居中并在边框上有一个漂亮的阴影。

使用背景图像也不是一种选择，因为它计划使用无缝模式。

所以我想做的是：

1.  放置一个居中的 div。
2.  把从photoshop剪下来的图片放在角落里
3.  使用 1px 高的 PS 图案作为阴影。

一切都会好起来的，但是“有图案的”背景会弄乱一切。所以我在这里看到的唯一解决方案是在居中的 div 的两侧放置两个 div，从右上角制作正确的一个绘制图案，因此从 photoshop 切割的边框将与侧板 div 无缝匹配，用作背景图像。

现在告诉我，伙计们，我是想在这里发明一辆自行车，还是有更好的解决方案？

ps我发现的所有解决方案在某种程度上都是无用的。有些非常接近，但在 div 周围留下了 10px 的空白区域。或者在调整到必要的高度和宽度后不要滚动和掉出页面。有文本的表格没有文本是没有用的（不？如果我删除文本它就会消失）

是的，我是个菜鸟，所以请放纵=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:05:43.570

如果您主要关心的是旧版本 IE 中的圆角属性支持，那么可能值得查看 CSS3Pie (css3pie.com) 之类的插件。这使用了“行为”属性，因此它不会与您的其他浏览器混淆 - 为 90% 的当前浏览器添加过时的标记（即为最低公分母设计）是没有意义的。

[CSS3 派](http://www.css3pie.com)

老实说，我通常会完全放弃旧版本 IE 中的圆角——只要内容优雅地降级，这绝对没有坏处。但是，如果你真的想要一个一致的外观，我肯定会使用像上面这样的插件，而不是围绕应该在很久以前就不再使用的浏览器来构建你的整个页面。

# javascript - 单击时无法单击锚链接

> ID：14682614
> 
> 赞同：0
> 
> 时间：2013-02-04T08:05:28.537
> 
> 标签：javascript, jquery, anchor, hyperlink

我有这个 html 代码：

```
<link rel="stylesheet" type="text/css" href="css/style.css">
<link rel="stylesheet" href="assets/css/flexslider2.css" type="text/css" media="screen" />
 <script src="scripts/jquery.min.js"></script>
<script type="text/javascript" src="scripts/menu.js"></script> 
    <script defer src="assets/js/jquery.flexslider.js"></script>

  <script type="text/javascript">

    $(window).load(function(){
 $('.flexslider').flexslider({
        animation: "fade",
        randomize: true,
        controlNav: false,
        start: function(slider){
          $('body').removeClass('loading');
        }
      });
   });
  </script>
 <div class="flexslider">
  <ul class="slides">
        <li>
        <a href="#"><img src="images/alpine-chalet/1.jpg" /></a>
        <p class="flex-caption">Alpine Chalet</p>
        <p class="flex-id-num">1 / 6</p>
        </li>
        <li>
        <a href="#"><img src="images/alpine-chalet/2.jpg" /></a>
        <p class="flex-caption">Alpine Chalet</p>
        <p class="flex-id-num">2 / 6</p>
        </li>
        ....

  </ul>
</div>
<div class="info-container" style="display:none">

    <h2>Alpine Chalet</h2>
    <div class="info-content">
        <p>Lorem ipsum</p>

        <p>Lrem ipsum.</p>

        <p>lorem ipsum.</p>  

        <div id="names-by-group">
            <h5>Team (Architecture and Interior Design)</h5>    
            <p>Lrem ipsum</p>

            <h5>Construction</h5>
            <p>lorem ips</p>

            <h5>Photography </h5>   
            <p>Lorem ips</p>
        </div>
    </div>
</div>
<a href="#" class="info open" id="info">INFO</a> 
```

和我的 menu.js

```
$(document).ready(function() {
if($('a.info').length > 0) {
        $('a.info').click(function() {
            if ($(this).hasClass('open')) {
                $(this).removeClass('open');
                $(this).addClass('close');
                $('.flexslider').fadeOut(200);
                $(".info-container").fadeIn(200);
                //return false;
            } else {
                $(this).removeClass('close');
                $(this).addClass('open');
                $(".info-container").fadeOut(200);
                $('.flexslider').fadeIn(200);
                //return false;
            }           
        });

    }

}); 
```

我现在的问题是，当页面加载时，它会显示`flexslider`，当我单击`info`按钮时，它会隐藏`flexslider`并显示`info-container`，但`info`现在无法再单击链接了。我想知道为什么，我尝试突出显示文本但`info`无法选择。

有人知道我的案子吗？我做错了吗？

任何帮助表示赞赏...谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:12:55.360

您试图引用类，请根据您的 HTML 按 ID 引用它

```
 if($('a #info').length > 0) {
   $('a #info').click(function() { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:14:18.907

尝试这个

```
$(document).ready(function(e) {
   e.preventDefault();
  //if($('a.info').length > 0) {
    $('a.info').click(function() {
        if ($(this).hasClass('open')) {
            $(this).removeClass('open');
            $(this).addClass('close');
            $('.flexslider').fadeOut(200);
            $(".info-container").fadeIn(200);
            //return false;
        } else {
            $(this).removeClass('close');
            $(this).addClass('open');
            $(".info-container").fadeOut(200);
            $('.flexslider').fadeIn(200);
            //return false;
        }           
    });

//}

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T08:23:25.180

我的猜测是外部原因导致它不会多次触发，可能是 jquery.flexslider.js。如果该插件以某种方式重新创建链接，您可以尝试使用`live`或`on`取决于您的 jQuery 版本。

像这样的东西：

```
$('a.info').live('click', function() {

}); 
```

或者：

```
$(document).on('click', 'a.info', function(e){

}); 
```

而且我认为没有必要检查长度——无论如何，您都可以声明点击事件，所以我也会删除该 if 语句。

祝你好运。

# java - 用于 REST 服务的单个 MySql 数据库连接

> ID：14682616
> 
> 赞同：4
> 
> 时间：2013-02-04T08:05:31.600
> 
> 标签：java, rest, database-connection, database-concurrency

我正在开发通过 REST 服务获取和发布数据到数据库的 Android 应用程序。我已经用 Java 中的 Jersey 和 Tomcat 配置了 REST 服务。

我在 REST 服务启动时创建了单个数据库连接。现在所有的 android 客户端都使用单个数据库连接。现在我只想知道在我的场景中使用单个数据库连接是一种好习惯..单个数据库连接可以容纳多个并发请求？？

请建议....

**更新** 当我测试以下场景时，它给出了不同的结果..我刚刚使用带有 Get 注释的 Jersey 配置了简单的 REST 服务器，在这个注释中我编写了代码来使用数据库连接获取 id 为 300 的员工的姓名在 REST 启动时建立..所以当我 `http://192.168.15.9:8080/Rest/rest/person/sample`在我的网络浏览器上写字时，我得到了员工姓名......然后我创建了批处理文件以在 100 个选项卡中打开 url，我执行了批处理文件。同时，我从我的虚拟机打开 url 并立即获得员工姓名。员工姓名也在 20 秒后显示在 100 个选项卡中。如果单个数据库连接不能用于并发用户，那么为什么我会给出响应迅速？？谁能解释一下？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T08:07:41.000

不，不应将单个数据库连接用于并发请求。您应该创建一个**连接池**（基本上是一组可重用的连接），根据需要从池中获取一个连接，然后将其释放到池中。

不要自己做！

由于您有 Tomcat，您可以配置一个[JDBC 数据源](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html)，然后使用 JNDI 获取对该数据源的引用。数据源将为您提供连接，而无需您自己创建连接。Tomcat 将在后台汇集（激活、维护和处理）连接。
或者，您可以使用自定义连接池，如[c3p0](http://sourceforge.net/projects/c3p0/)，但我强烈建议您使用服务器提供的设施。

如果出于任何原因，您必须在几分钟内部署您的产品（因此您没有时间设置数据源），那么您最好为每个请求打开和关闭连接——这很浪费——而不是共享一个跨所有请求的单一连接。

# java - 如何从另一个包的文件中导入一个包？

> ID：14682623
> 
> 赞同：-2
> 
> 时间：2013-02-04T08:05:51.530
> 
> 标签：java, compilation, package

我有一个类 Car 扩展 Vehicle 并且在包 B 中

车辆在 A 包中

两个文件都在不同的文件夹中

当我编译不在包中的 main 时，它确实很好，但是当我在创建汽车对象后打印汽车对象时，我从车辆继承的每个变量都得到了值 0。

当我将文件 Car 移动到编译后创建的目录后尝试重新编译 Car 时，我无法编译它。当它在主文件夹中时，我可以出于某种奇怪的原因对其进行编译。

```
package Car;

import Vehicle.*;

public class Car extends Vehicle
{
  <some code>
} 
```

我收到以下错误：

“找不到符号”和“包不存在”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:16:15.493

你的源代码树是什么样的？java中的包名以小写字母开头，其中的类以大写字母开头。例如

包 mypkg；类 MyClass {}

将位于名为 mypkg 的文件夹中，而 java 类将名为 MyClass.java

要将其导入另一个类，您将使用：

导入 mypkg.MyClass；

无论如何，目前，尝试设置您拥有的东西可能是这样的：

src/ Vehicle.java Car.java

然后改变使 Vehicle.java 看起来像：

```
public class Vehicle { 
 <your code here>
} 
```

和 Car.java：

```
public class Car extends Vehicle {
 <some code>
} 
```

然后编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:17:15.240

这很简单：文件夹的层次结构必须与包的层次结构完全匹配。因此，假设 src 是所有源文件所在的文件夹，那么树应该是：

```
src
  Main.java
  Car
    Car.java
  Vehicle
    Vehicle.java 
```

要将所有类编译到文件夹 classes，您将使用以下命令（来自 src 目录）：

```
src> javac -d ..\classes Main.java Car\Car.java Vehicle\Vehicle.java 
```

这将创建以下文件，这些文件也尊重包层次结构：

```
classes
  Main.class
  Car
    Car.class
  Vehicle
    Vehicle.class 
```

然后，您可以使用仍然从 src 目录执行主类

```
src> java -cp ..\classes Main 
```

请注意，将类放在默认包中是一种不好的做法，应该避免。包也应该小写。

# c# - Windows 升级后的 Watin + HttpWatch 应用程序问题？

> ID：14682624
> 
> 赞同：0
> 
> 时间：2013-02-04T08:05:56.353
> 
> 标签：c#, watin, httpwatch

我们有一个应用程序使用`Watin`and`HttpWatch`来检查一些生产站点。我们会定期检查应用程序的响应时间，并为此使用此应用程序。

我们打开一个 IE 实例，并在设置一些配置后将该实例附加到`HttpWatch`插件中。该应用程序在 Windows Server 2003 中运行良好。

但是，当我们在 Windows Server 2008 中执行此应用程序时，会出现以下错误。

> 无法将“HttpWatch.ControllerClass”类型的 COM 对象转换为接口类型“HttpWatch.IController”。此操作失败，因为 IID 为“{21828BF3-DA77-4FC1-968E-FC7A46AEC19A}”的接口的 COM 组件上的 QueryInterface 调用失败，原因是以下错误：不支持此类接口（HRESULT 异常：0x80004002 (E_NOINTERFACE)） .

我们尝试了很多方法，但无法解决这个问题。此外，我们已经为所需的 Windows Server 2008 版本提供了最新的 DLL `Interop.HttpWatch.dll`，`Interop.SHDocVw.dll`因为我们通过链接了解它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:31:57.010

检查这是否是由于 2003 -> 2008 转换或 32 位 -> 64 位导致的错误。

我对 COM 有类似的错误 - 在某些情况下必须将编译更改为 32 位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:40:47.270

我终于解决了这个问题。

发生的问题如下：

该项目是为目标版本构建的——任何 CPU

该项目使用了Watin的InternetExplorer类，我们机器的IE目标版本是x86，而我的机器是x64。（Windows 服务器 2008 R2）

因此，当应用程序尝试将 x64 特定工作进程附加到 x86 IE 实例时，会出现上述错误。

**我为 x86 平台重建了项目，现在应用程序运行良好。**

如果您有同样的问题，请尝试这样做。如果有帮助，请告诉我！

问候，

Varun Shringarpure

# iphone - 如何在 MKMapView 上添加的自定义注解中添加标题和副标题？

> ID：14682626
> 
> 赞同：0
> 
> 时间：2013-02-04T08:06:01.733
> 
> 标签：iphone, mkmapview

我想在 Mk 地图视图上添加的注释中添加标题和子标题，我根据用户的当前位置添加注释（在核心数据表中存储纬度和经度值）注释正在添加正确我想要的方式，但我的问题是我需要获取这些相应注释的标题和副标题，我有标题和副标题的值（通过地标类）。我得到所有图钉的相同标题和副标题。如何自定义相应注释的标题和副标题？请指导我我是新手提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:40:28.700

当你打电话时，`[mapView addAnnotation:annotation]`你需要确保注释有标题和副标题，这里有一个简单的例子：

```
MyAnnotation *anno = {create your annotation here};
anno.title = @"Title 1";
anno.subtitle = "@subtitle 1";
[mapVoew addAnnotation:anno]; 
```

由于我不知道您是如何创建注释或从哪里获得标题的，因此我将由您自己弄清楚。如果您能弄清楚如何使多个注释具有正确的位置，那么您应该能够弄清楚如何同时获得匹配的标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-22T11:50:19.070

```
MKAnnonation *obj=[[MKAnnonation alloc]init];
obj.title = @"Title 1";
obj.subtitle = "@subtitle 1"; 
```

# asp.net - Gridview 行的行高与父表行的高度相同

> ID：14682628
> 
> 赞同：0
> 
> 时间：2013-02-04T08:06:17.570
> 
> 标签：asp.net, tablerow

我有一个 3 列 15 行的表。我给表格的行指定了 30px 的行高。第三列跨越所有行，里面是一个 div，里面是我的 asp.net gridview。在浏览器上渲染时，gridview 的行也设置为 30px。防止这种情况的最佳方法是什么，以便 gridview 行具有默认行高？这是CSS和html：

```
.tr-info {line-height:30px} 
```

* * *

```
<table>
  <tr class="tr-info">
    <td>
    </td>
    <td>
    </td>
    <td rowspan="15">
      <div>
        <asp:GridView runat="server" ID="gvPersonalInfo"></asp>
      </div>
    </td>
  </tr>
  <tr class="tr-info">
    <td>
    </td>
    <td>
    </td>
  </tr>
  <!-- And so on with 13 more rows -->
<table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:10:14.897

[`CssClass`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.style.cssclass.aspx)为您的`RowStyle`和`AlternateRowStyle`样式设置适当的`GridView`：

```
.smallRow {
  height: 15px;
}

<rowstyle CssClass="smallRow" />
<alternatingrowstyle CssClass="smallRow" /> 
```

# highslide - 使 Highslide 不可调整大小且可从所有 4 个侧面移动？

> ID：14682634
> 
> 赞同：0
> 
> 时间：2013-02-04T08:06:39.697
> 
> 标签：highslide

（继续：[http](http://highslide.com/forum/viewtopic.php?t=24327) ://highslide.com/forum/viewtopic.php?t=24327 ）

我想让 Highslide 可以从所有边缘移动并且不可调整大小。

我已经能够使它不可调整大小，但我不能让它从所有边缘移动。它只从顶部移动。

我将如何做到这一点？我试过发布在（遗憾的是现在关闭）论坛上的代码，但没有。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:58:01.097

您可以创建自定义包装器并将**.highslide-move类与****.highslide-html-content**类一起添加。[使用contentId](http://highslide.com/ref/hs.contentId)将自定义包装器绑定到您的弹出窗口。请参阅此演示： http: [//jsfiddle.net/WbDMs/](http://jsfiddle.net/WbDMs/)（请参阅下面的 jsFiddle 代码）
请注意，您不能从轮廓图形文件中移动弹出窗口（我在演示中使用黑色轮廓）。

如果您有实时页面，我可以查看它以了解您缺少什么。

**来自 jsFiddle 的代码**
在 head 部分：

```
<script type='text/javascript' src="highslide/highslide-with-html.js"></script>
<link rel="stylesheet" type="text/css" href="highslide/highslide.css"/>

<script type='text/javascript'>
//<![CDATA[ 
hs.graphicsDir = 'highslide/graphics/';
hs.outlineType = 'rounded-black';
hs.wrapperClassName = 'draggable-header';
hs.showCredits = false;
//]]>  
</script> 

<style type='text/css'>
 /* adjust the wrapper's padding */
.highslide-html-content {
  padding: 0 10px 10px 10px;
}

/* for demo purposes only */
.highslide-body {
  background: yellow
}
</style> 
```

在正文部分
（*将 href 中的 /roadrash/7AHX9/show/light/ 替换为您要在 iframe 弹出窗口中打开的页面*）：

```
<div>
  <a href="/roadrash/7AHX9/show/light/" onclick="return hs.htmlExpand(this, { objectType: 'iframe', contentId: 'highslide-html' } )">
    Content in iframe
  </a>
</div>

<div class="highslide-html-content highslide-move" id="highslide-html">
  <div class="highslide-header">
    <ul>
      <li class="highslide-close">
        <a href="javascript:;" onclick="return hs.close(this)" style="cursor: pointer;"></a>
      </li>
    </ul>
  </div>
  <div class="highslide-body"></div>
</div> 
```

# google-sheets - 在下拉列表中选择项目时参考其他工作表上的值

> ID：14682638
> 
> 赞同：2
> 
> 时间：2013-02-04T08:07:08.633
> 
> 标签：google-sheets, google-drive-api

我有一张 2 张的 Google 电子表格。“表 1”和“表 2”。表 1 如下所示：

A 列 = 名称 B 列 = 性别

在 table2 中，我在 cilum A 中创建了一个下拉列表，该列表从 Table1、column1、第 1-100 行获取所有值。（使用数据 > 验证 > 标准 > 列表中的项目）现在在表 2 的 B 列中，我想显示表 1 的 B 列中的值，该值与我在下拉列表中选择的值位于同一行。

所以，假设在 table1 我有

```
A       B
John    male
Kate    female
Steve   male 
```

如果我在 table2，A 列，第 1 行的下拉列表中选择“Steve”，我希望表 2，B 列，第 1 行显示“男性”。

我试着用 Index 来做，就像我在 Excel 中做的那样，但后来我得到一个值错误，说下拉列表中的值不是数字。

对这个有帮助吗？非常感谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T20:59:08.507

您要使用的功能是`VLOOKUP`. （[在这里阅读](https://support.google.com/drive/bin/static.py?hl=en&topic=25273&page=table.cs)）。

```
VLOOKUP(search_criterion, array, index, sort_order) 
```

所以你在第二张纸上的单元格，你会想要使用它。

```
=VLOOKUP(A2,Sheet1!A1:B9,2,FALSE)
                             ^ Set to TRUE if your data is sorted
                          ^ The column where "male" is stored relative to the array given.
              ^ The array where to lookup the value, and retrieve the result
         ^ The value that you want to lookup. 
```

以下示例表可能有助于解释“数组”参数。

```
 A      B
 joe    male
 dan    male
 mary female 
```

您的查找数组将是整个数据集。（注意：数组的第一列是它搜索的位置）。然后，您将提供`2`as ，`index`因为那是您要输出的数组中的列。

因此`VLOOKUP`，在数组的第一列中搜索您提供的任何值。当它找到它时，它会获取该行中的单元格，并在您指定的列中输出该单元格。

# c++ - 以十进制数的二进制格式计算 1 的个数

> ID：14682641
> 
> 赞同：6
> 
> 时间：2013-02-04T08:07:16.290
> 
> 标签：c++, binary, decimal

我试图找出一个大十进制数的二进制形式的 1 的数量（十进制数可以大到 1000000）。

我试过这段代码：

```
while(sum>0)  
{  
    if(sum%2 != 0)  
    {  
        c++;   // counting number of ones  
    }  
    sum=sum/2;  
} 
```

我想要一个更快的算法，因为大十进制输入需要很长时间。请建议我一个有效的算法。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-04T08:10:40.573

您正在寻找的是“popcount”，它在以后的 x64 CPU 上作为单个 CPU 指令实现，在速度上不会被打败：

```
#ifdef __APPLE__
#define NAME(name) _##name
#else
#define NAME(name) name
#endif

/*
 * Count the number of bits set in the bitboard.
 *
 * %rdi: bb
 */
.globl NAME(cpuPopcount);
NAME(cpuPopcount):
    popcnt %rdi, %rax
    ret 
```

但当然，您需要先测试 CPU 是否支持它：

```
/*
 * Test if the CPU has the popcnt instruction.
 */
.globl NAME(cpuHasPopcount);
NAME(cpuHasPopcount):
    pushq %rbx

    movl $1, %eax
    cpuid                   // ecx=feature info 1, edx=feature info 2

    xorl %eax, %eax

    testl $1 << 23, %ecx
    jz 1f
    movl $1, %eax

1:
    popq %rbx
    ret 
```

这是C中的一个实现：

```
unsigned cppPopcount(unsigned bb)
{
#define C55 0x5555555555555555ULL
#define C33 0x3333333333333333ULL
#define C0F 0x0f0f0f0f0f0f0f0fULL
#define C01 0x0101010101010101ULL

    bb -= (bb >> 1) & C55;              // put count of each 2 bits into those 2 bits
    bb = (bb & C33) + ((bb >> 2) & C33);// put count of each 4 bits into those 4 bits
    bb = (bb + (bb >> 4)) & C0F;        // put count of each 8 bits into those 8 bits
    return (bb * C01) >> 56;            // returns left 8 bits of x + (x<<8) + (x<<16) + (x<<24) + ...
} 
```

GNU C 编译器运行时包含一个“内置”，它可能比上面的实现更快（它可能使用 CPU popcnt 指令，但这是特定于实现的）：

```
unsigned builtinPopcount(unsigned bb)
{
    return __builtin_popcountll(bb);
} 
```

所有上述实现都在我的 C++ 国际象棋库中使用，因为当使用位板表示棋子位置时，popcount 在国际象棋移动生成中起着至关重要的作用。我使用函数指针，在库初始化期间设置，指向用户请求的实现，然后通过该指针使用 popcount 函数。

Google 将提供许多其他实现，因为这是一个有趣的问题，例如：[http](http://wiki.cs.pdx.edu/forge/popcount.html) ://wiki.cs.pdx.edu/forge/popcount.html 。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-04T08:16:30.320

在 C++ 中，您可以这样做。

```
#include <bitset>
#include <iostream>
#include <climits>

size_t popcount(size_t n) {
    std::bitset<sizeof(size_t) * CHAR_BIT> b(n);
    return b.count();
}

int main() {
    std::cout << popcount(1000000);
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-04T08:10:15.190

有很多方法。[Brian Kernighan 的方式](http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetKernighan)易于理解且速度非常快：

```
unsigned int v = value(); // count the number of bits set in v
unsigned int c; // c accumulates the total bits set in v
for (c = 0; v; c++)
{
  v &= v - 1; // clear the least significant bit set
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-04T08:23:54.763

使用右位移运算符

```
 int number = 15; // this is input number
    int oneCount = number & 1 ? 1 : 0;
    while(number = number >> 1)
    {
        if(number & 1)
            ++oneCount;
    }

    cout << "# of ones :"<< oneCount << endl; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-17T18:13:38.750

```
int count_1s_in_Num(int num)
{
    int count=0;
    while(num!=0)
    {
        num = num & (num-1);
        count++;
    }
    return count;
} 
```

如果对整数和减法结果应用 AND 运算，则结果是一个与原始整数相同的新数字，只是最右边的 1 现在是 0。例如，01110000 AND (01110000 – 1) = 01110000 和 01101111 = 01100000。

该解决方案的运行时间为 O(m)，其中 m 是解决方案中 1 的数量。

# wpf - Expression Blend 如何添加对第三方库主题中定义的外部资源字典的引用

> ID：14682649
> 
> 赞同：6
> 
> 时间：2013-02-04T08:07:55.697
> 
> 标签：wpf, expression-blend, expression-blend-4

我正在尝试添加对另一个项目（例如 Elysium）中定义的资源库的引用并在表达式混合中使用它。

这是我在 App.Xaml 文件中合并资源字典的方法。

```
 <Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml" />
            <ResourceDictionary Source="pack://application:,,,/MahApps.Metro.Resources;component/Icons.xaml" />
            <ResourceDictionary Source="pack://application:,,,/Telerik.Windows.Themes.Metro;component/Themes/System.Windows.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

但我似乎无法在 Expression Blend 4 的这些库中定义任何画笔资源。知道吗？

![在此处输入图像描述](../Images/6801374af6c396bb37fbdaf299ce8790.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T09:02:57.210

在 Expression Blend 论坛上找到我的答案：http: [//social.msdn.microsoft.com/Forums/en/blend/thread/21bdc8a1-4a58-49f9-ae4d-c736b8fd673a](http://social.msdn.microsoft.com/Forums/en/blend/thread/21bdc8a1-4a58-49f9-ae4d-c736b8fd673a)

**“项目>链接到现有项目>（导航到外部资源字典，选择它并单击确定。）重建。”**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:43:35.907

我认为 Source 属性设置不正确。

```
<Window.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary 
                   Source="/WpfControlLibrary1;component/BrushesInAssembly.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Window.Resources>
<Grid x:Name="LayoutRoot" Background="{DynamicResource RedBrush}"/> 
```

我做了什么来做到这一点：

作为示例，我在 Blend 中创建了一个新的 WPF 项目并添加了一个控件库。我从主项目中引用了程序集。

*我用一个画笔RedBrush*添加了一个资源字典。

![项目](../Images/6b7ffb57e513f87d90535d881298186a.png)

比我去 MainWindow.xaml 并打开资源面板。我在那里链接了字典。

![资源窗格](../Images/fae45b3b6d0cc091ecfa2b09d1548c1c.png)

链接后，它会显示在资源列表中。

![红画笔](../Images/2bf01cc1a5df64cb7da0b065b74e64f0.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:42:30.960

希望您已经找到了解决方案，但如果没有，我[将在此处使用此链接](http://projekt202.com/blog/2010/xaml-organization/)作为恒定参考。

它执行以下操作：展示如何在外部资源项目中链接 ResourceLibraries，如何命名样式并组织它们，以便团队中的任何人都知道发生了什么，等等。如此简单，如此伟大。

希望它可以帮助某人。

# jquery-chosen - jquery 选择的多级层次结构

> ID：14682653
> 
> 赞同：2
> 
> 时间：2013-02-04T08:08:08.987
> 
> 标签：jquery-chosen

我正在使用 jquery 选择的插件。[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/) 在选择的 jquery 中可以显示下拉菜单

*   - 选择 -
*   **主手册1**
    *   菜单1
    *   菜单2
*   **主手册2**
    *   菜单3
    *   菜单4

但我想显示下拉菜单

*   - 选择 -
*   **主菜单1**
    *   **子手册1**
        *   菜单1
        *   菜单2
*   **主菜单2**
    *   **子手册2**
        *   菜单1
        *   菜单2

可能吗？请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-14T16:28:42.387

要从选择的标签中删除空格 ( )，您可以修改 jq-Chosen 以修剪它们。

从第 173 行（选择 1.4.2）开始的函数***choice_label***中替换`item.html`为：`item.html.replace( /&nbsp;/g,'' )`

 *```
AbstractChosen.prototype.choice_label = function(item) {

  if (this.include_group_label_in_selected && (item.group_label != null)) {
    return "<b class='group-name'>" + item.group_label + "</b>" + item.html.replace( /&nbsp;/g,'' );
  } else {
    return item.html.replace( /&nbsp;/g,'' );
  }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:22:23.523

我很确定它不是，除非你以某种方式破解它。我最近自己需要这个，但得出的结论是没有支持。[他们的示例页面上](http://harvesthq.github.com/chosen/%20their%20page%20of%20examples)没有任何内容表明这是可能的，并且该段落

> 因为 selected 替换了普通的 html 选择字段，所以您不需要做任何特别的事情来使其适用于没有 JavaScript 的浏览器。您也不需要在后端做任何特殊的事情来处理数据——表单字段仍然可以正常提交。

似乎表明 Chosen 仅增强了本机选择框的用户体验，并没有真正增加它们的任何复杂性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-23T14:13:20.253

是的，这是可能的，但我仍然处于某种挣扎之中。

```
 <?php
            $args = array(
                'type'          => 'post',
                'orderby'       => 'term_group',
                'hide_empty'    => 0,
                'hierarchical'  => 0,
                'parent'        => 0,
                'exclude_tree'  => '49,1,63'
            );
            $topcats = get_categories( $args );
            ?>

            <select class="chosen-select" multiple>
                <?php
                    foreach ($topcats as $a) {
                        echo "<optgroup label='$a->name'>";
                        $args = array(
                            'child_of'       => $a->cat_ID,
                            'hide_empty'   => false
                        );
                        $children = get_terms('category', $args);
                        foreach ($children as $child) {
                            $cat = get_category($child->term_id);
                            $lvl = get_level($cat);
                            $space = "";
                            for ($i = 1; $i < $lvl; $i++) { $space .= "&nbsp;&nbsp;"; }
                            echo "<option>$space $child->name</option>";
                        }
                        echo "</optgouop>";
                    }
                ?>
            </select> 
```

我在 Wordpress 中工作，所以我加载了类别，并使用了我在互联网上找到的 get level hack（我真的很抱歉，但不记得在哪里，所以作者先生，请原谅我）

这是黑客：

```
function get_level($category, $level = 0)
{
    if ($category->category_parent == 0) {
        return $level;
    } else {
        $level++;
        $category = get_category($category->category_parent);
        return get_level($category, $level);
    }
} 
```

我仍然无法弄清楚的真正问题是如何从单选中删除这些空格。如果您使用此代码并选择一个选项，则空格将转移到多个选择框的选择行中。*

# git - 从命令行启动 vim-fugitive

> ID：14682659
> 
> 赞同：8
> 
> 时间：2013-02-04T08:08:35.057
> 
> 标签：git, vim, vim-fugitive

我真的很喜欢 Fugitive (VIM git wrapper plugin) 但是我想创建一个启动 vim 然后运行的脚本

```
:Gstatus 
```

立即地。但是，当我尝试

```
vim -c Gstatus 
```

我收到一条错误消息，指出**Gstatus 不是编辑器命令**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2020-03-18T16:03:01.567

`vim +Gstatus +only`作品。我有它的别名`vimg`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T08:27:12.667

这有效

```
gvim -c 'Gstatus | wincmd j | hide' . 
```

使逃逸窗口全尺寸并隐藏目录资源管理器缓冲区。当您退出临时缓冲区 vim 时，目录缓冲区也会隐藏

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-21T10:56:34.600

您可以这样做（假设您在项目根目录中）：

```
$ vim -c 'view .git/index' 
```

它以只读模式打开 git 索引（模仿 :Gstatus 命令的要点）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-06T10:01:47.450

作为对 bradgonesurfing 答案的轻微改进

```
vim -c 'Gstatus | wincmd o' . 
```

即使您已`splitbelow`设置，这也有效

# visual-studio-2010 - 应用程序在 Visual Studio 中崩溃，但仅在设置断点之后

> ID：14682662
> 
> 赞同：3
> 
> 时间：2013-02-04T08:08:47.520
> 
> 标签：visual-studio-2010, debugging, crash, breakpoints, access-violation

我的同事在他的电脑上有一个非常奇怪的问题。

当他在调试器（Visual Studio 2010）中运行他的应用程序时，一切运行良好。但是当他设置断点（任何地方，在哪里都无所谓），并且断点被命中时，下一个“步骤”将在应用程序中引发访问冲突。我们查看了反汇编，发现他抱怨的地址无法访问。如果我们第二步，我们会在调用堆栈的顶部看到“违规地址”，尽管我们没有看到对它的调用。

看起来有东西覆盖了调用堆栈，但显然只有在断点被击中之后。

PC已经重新启动，但这没有帮助。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:26:54.683

找到了。

在 Visual Studio 选项对话框中启用了“RPC 调试”，这导致了这种奇怪的行为。禁用它解决了这个问题。

# php - 处理和执行的区别？

> ID：14682663
> 
> 赞同：1
> 
> 时间：2013-02-04T08:08:48.253
> 
> 标签：php, return

我遇到了来自[php.net](http://www.php.net/manual/en/function.return.php)的注释（最后一个注释）。留下纸条的人说：

> 在全局范围内使用 return 它将结束执行但不处理。

我不知道“执行”和“处理”的确切含义以及它们之间的区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:10:50.913

请注意，这两个术语都是由用户编写的，并非来自 PHP 手册本身，但是相同的 PHP 页面回答了您的问题：

> 如果从全局范围调用，则结束当前脚本文件的执行。如果包含或需要当前脚本文件，则将控制权传递回调用文件。此外，如果包含当前脚本文件，则返回的值将作为包含调用的值返回。如果从主脚本文件中调用 return，则脚本执行结束。如果当前脚本文件由 php.ini 中的 auto_prepend_file 或 auto_append_file 配置选项命名，则该脚本文件的执行结束。

因此，即使在当前文件上完成处理并返回时，它也会将控制权返回给包含它的文件（如果是的话）。如果它没有包含在任何地方，那么处理和执行都将在那里停止

该网站上的一条重要评论也解释了

> 现在，php 的工作方式是在执行实际代码之前，它执行您所谓的“处理”实际上只是语法检查。每次执行该文件之前包含的每个文件都会执行此操作。这是一个很好的功能，因为它确保不运行非功能代码的任何部分。您的示例可能还说...是在执行此语法检查时，它不会执行代码，而只是在执行之前通过您的文件（或包含）检查语法错误。为了表明这一点，你应该把 echo "b"; 并回显“a”；在每个文件的开头。这将显示“b”被回显一次，然后“a”只被回显一次，因为它第一次语法检查a.php，它是好的。

两个报价的参考：[PHP手册](http://www.php.net/manual/en/function.return.php)

# perl - perl: 打印 $1, $2...直到最后

> ID：14682664
> 
> 赞同：2
> 
> 时间：2013-02-04T08:08:50.923
> 
> 标签：perl

如何打印 $3,$5,$7,...$n 到最后？

对于输入：来自参数的“ab3+cd1+cd2+cd3+cd4+cd5” 所需输出：“cd1 cd2 cd3 cd4 cd5”

我的代码是这样的：

```
$num=3;
if ($ARGV[0] =~ /(ab\d)(\+(cd\d))?+/i) {
    while(${$num}) {
        print ${$num}, " ";
        $num += 2;
    }
} 
```

我的输出：（警告/错误）不能使用字符串（“3”）作为标量引用，而“严格引用”正在使用...

我应该对代码进行哪些更改才能获得所需的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T08:16:35.603

单程：

```
#!/usr/bin/perl
use strict;
use warnings;

my @arr=split(/\+/,$ARGV[0]);
print join " ",@arr[1..$#arr]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:48:12.427

最简单的表达方式是：

```
my @args = $ARGV[0] =~ /cd\d+/g;
print "@args"; 
```

当使用`/g`不带捕获组的修饰符时，捕获括号隐含在整个匹配项周围，并返回匹配项列表。

在双引号字符串中插入数组时，值用空格分隔（或`$"`变量的任何值）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T09:05:38.737

这个怎么样：

```
my @matchedwords;
push (@matchedwords, $1) while ($ARGV[0] =~ /(\+cd\d+)/ig);
print "@matchedwords"; 
```

# android - SQLiteQueryBuilder 的偏好是什么？

> ID：14682670
> 
> 赞同：3
> 
> 时间：2013-02-04T08:09:25.810
> 
> 标签：android, sqlite, cursor, android-sqlite

`SQLiteQueryBuilder` 有方法：

```
 public Cursor query (SQLiteDatabase db, String[] projectionIn, String selection, String[] selectionArgs, String groupBy, String having, String sortOrder) 
```

也`SQLiteDataBase`有方法：

```
 public public Cursor query (String table, String[] columns, String selection, String[] selectionArgs, String groupBy, String having, String orderBy) 
```

有没有理由使用`SQLiteQueryBuilder.query`方法而不是`SQLiteDataBase.query`

它有哪些优势？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T08:27:03.103

这`SQLiteQueryBuilder`有助于构建比`SQLiteDatabase`函数支持的查询更复杂的查询（例如，子查询）。

如果您的特定查询不需要任何这些复杂功能，则无需使用`SQLiteQueryBuilder`. （但如果您的代码恰好被组织起来，这样如果所有查询都使用`SQLiteQueryBuilder`.

# android - 图片未显示在 Emulator 的图库中

> ID：14682679
> 
> 赞同：0
> 
> 时间：2013-02-04T08:10:02.413
> 
> 标签：android, android-emulator

我在 Android 中尝试过一个文件传输程序。它完美地工作。图像显示在 中`DDMS`，它也显示在 中`shell`，但它没有显示在模拟器的图库中。关于问题可能出在哪里的任何想法？澄清一下 - 我不是在问如何将文件推送到模拟器中。

以下是确认相同的快照： ![在此处输入图像描述](../Images/9e39a6cae1f4c585c96111c23ff68386.png)

![在此处输入图像描述](../Images/5e3a1086c08ab6b554b6983660b793be.png)

![在此处输入图像描述](../Images/5e278c7f4aa887a034b03954f330578d.png)

**编辑** 我什至试过这个：[https](https://stackoverflow.com/a/13003533/828625) ://stackoverflow.com/a/13003533/828625 。但它也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:58:19.457

您可以将图像移动到 /mnt/sdcard 然后尝试 mediaScanner 吗？而不是 /mnt/sdcard/saved_images。您也可以将它移到 /mnt/sdcard/Pictures 下。要创建它，您可以运行：

```
adb mkdir /Pictures 
```

从 /sdcard 目录

# android - 在 android 中访问可消耗列表视图中的 chechbox

> ID：14682680
> 
> 赞同：0
> 
> 时间：2013-02-04T08:10:03.383
> 
> 标签：android, listview, checkbox

我正在使用教程中的消耗性列表视图。

```
 public class ExpandableListDemo extends ExpandableListActivity {
private LayoutInflater inflater;
@SuppressWarnings("unchecked")
public void onCreate(Bundle savedInstanceState) {
    try{
         super.onCreate(savedInstanceState);
         setContentView(R.layout.main);

    SimpleExpandableListAdapter expListAdapter =
        new SimpleExpandableListAdapter(
                this,
                createGroupList(),              // Creating group List.
                R.layout.group_row,             // Group item layout XML.           
                new String[] { "Group Item" },  // the key of group item.
                new int[] { R.id.row_name },    // ID of each group item.-Data under the key goes into this TextView.                   
                createChildList(),              // childData describes second-level entries.
                R.layout.child_row,             // Layout for sub-level entries(second level).
                new String[] {"Sub Item"},      // Keys in childData maps to display.
                new int[] { R.id.grp_child}  // Data under the keys above go into these TextViews.
            );
        setListAdapter( expListAdapter );       // setting the adapter in the list.

    }catch(Exception e){
        System.out.println("Errrr +++ " + e.getMessage());
    }

}

/* Creating the Hashmap for the row */
@SuppressWarnings("unchecked")
private List createGroupList() {
      ArrayList result = new ArrayList();
      for( int i = 0 ; i < 15 ; ++i ) { // 15 groups........
        HashMap m = new HashMap();
        m.put( "Group Item","Group Item " + i ); // the key and it's value.
        result.add( m );
      }
      return (List)result;
}

/* creatin the HashMap for the children */
@SuppressWarnings("unchecked")
private List createChildList() {

    ArrayList result = new ArrayList();
    for( int i = 0 ; i < 15 ; ++i ) { // this -15 is the number of groups(Here it's fifteen)
      /* each group need each HashMap-Here for each group we have 3 subgroups */
      ArrayList secList = new ArrayList(); 
      for( int n = 0 ; n < 3 ; n++ ) {
        HashMap child = new HashMap();
        child.put( "Sub Item", "Sub Item " + n );           
        secList.add( child );
      }
     result.add( secList );
    }        
    return result;
}
public void  onContentChanged  () {
    System.out.println("onContentChanged");
    super.onContentChanged();         
}
/* This function is called on each child click */
public boolean onChildClick( ExpandableListView parent, View v, int groupPosition,int childPosition,long id) {
    System.out.println("Inside onChildClick at groupPosition = " + groupPosition +" Child clicked at position " + childPosition);
    return true;
}

/* This function is called on expansion of the group */ 
```

}

我在子项目中使用复选框，我搜索了很多但找不到访问子项目中复选框的解决方案。我想在选中的复选框上祝酒。此外，我想获得在按钮单击时选中的复选框。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:23:34.950

例如，您需要在 getChildView 方法中创建自定义适配器并访问子视图

```
public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
        ...

        holder.checkBox.setVisibility(View.VISIBLE);
        holder.checkBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                //

            }
        });

        holder.checkBox.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                //
            }
        });

        holder.checkBox.setChecked(episode.isChecked());

        convertView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                //
            }
        });

            return convertView;
        } 
```

[在此处](https://github.com/gobozov/myshows/blob/master/src/ru/myshows/fragments/EpisodesFragment.java)查看完整示例 您还可以在 ApiDemos 中的 ExpandableList 示例中查看

# android - 在不使用 GCM 的情况下为 android 创建推送通知服务器

> ID：14682686
> 
> 赞同：3
> 
> 时间：2013-02-04T08:10:27.907
> 
> 标签：android, push-notification

我们如何在不使用 GCM 将消息发送到单个 android 设备的情况下创建推送通知服务。我不需要使用 GCM，因为它非常慢并且是 beta 版本。

任何人都可以在这方面帮助我。

提前致谢。

萨蒂什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T08:23:57.613

Google Cloud Messaging 根本没有测试版。:)

如果你想避免使用谷歌的服务，最好不要重新实现它。尝试使用其他框架，例如 Amazon 的 SNS：

[http://aws.amazon.com/sdkforandroid/](http://aws.amazon.com/sdkforandroid/)

或者

[http://code.google.com/p/openmobster/wiki/PushFramework](http://code.google.com/p/openmobster/wiki/PushFramework)

或者是其他东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T04:11:28.443

您可以安装 PSB ( [http://pservicebus.codeplex.com/](http://pservicebus.codeplex.com/) ) 并使用 Java 客户端 API ( [https://github.com/rpgmaker/PServiceBus-Java-Client](https://github.com/rpgmaker/PServiceBus-Java-Client) ) 在您的 android 设备之间进行通信。

使用 Java Client API 创建应用程序时。您可以创建一条消息，例如。

```
public class Notification {
   public int Id;
   public String Message;
} 
```

在您的 Android 应用程序上订阅消息时，您只需在订阅时应用过滤器。

前任

```
PSBClient.Subscribe(Notification.class, new Action<Notification>() {
   public void execute(Notification msg){
      //Do something with message
   }
}, "Id = UniqueAndroidID"); 
```

将消息发布到特定设备时，您只需执行以下操作：

```
Notification message = new Notification();
message.Id = 10003432;//Unique Android ID
message.Message = "Hello Android Device";
PSBClient.publish(message); 
```

# jenkins - Jenkins iOS 作业中断，因为“致命：日志语句不同步：当前测试用例为空”

> ID：14682694
> 
> 赞同：5
> 
> 时间：2013-02-04T08:11:05.687
> 
> 标签：jenkins, ocunit, xcode4.6, ios6.1

我为我的 iOS 项目设置了 jenkins 工作。主机目标运行顺利，而单元测试目标因“jenkins 控制台输出”给出的一个非常奇怪的原因而失败，如下所示：

[DEBUG] 测试用例 '-[WhereYouAreTests testShowMainTopbar]' 已启动。测试用例“-[WhereYouAreTests testShowMainTopbar]”通过（0.000 秒）。致命：日志语句不同步：当前测试用例为空构建步骤“XCode”将构建标记为失败已完成：失败

为了清楚起见，WhereYouAre 是我的“主机目标”，而 WhereYouAreTests 当然是单元测试目标。在我提出这个问题之前，我确实到处搜索过。唯一的线索在这里：[http](http://baolei.tumblr.com/) ://baolei.tumblr.com/ ，其中说：

getschh 问：你好，宝。我尝试了关于使用 xcode 4.5 和 ios 6 使用 ruby​​ 脚本进行 ios 单元测试的方法。我重新配置了詹金斯的工作。首先我想：哇，这很好用。当我仔细观察它时，我发现了一个大问题。我总是收到以下错误：致命：日志语句不同步：当前测试用例是“testBarcodeUtilWithCorrectValues”。它总是发生在不同的单元测试中。此错误的结果：错误发生后，不再有单元测试是 testet。我能做些什么？

当您在本地机器上（而不是通过 Jenkins）运行脚本时，它是否有效？如果没有，也许您可​​以尝试仅使用一个简单的测试用例创建一个全新的项目，并使用该脚本。如果您可以让一个新项目正常工作，那么您可以尝试注释掉您实际项目中的大部分测试用例，只留下一些测试，然后看看会发生什么。iOS 测试设置很挑剔，有时你真的需要做很多实验才能让一切顺利进行。

我的单元测试在 Xcode 中运行良好。所以它显然对我没有帮助。

请有人给我一个方法或任何线索。提前致谢。

顺便说一句，我的环境为此配置：OS 10.7 XCode 4.6 Jenkins (brew install package) 1.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T00:33:09.590

我已经修补了 Jenkins Xcode 插件来解析行`[DEBUG]`in start 就好了（并且通常使它更宽松）：

[https://github.com/jenkinsci/xcode-plugin/pull/19](https://github.com/jenkinsci/xcode-plugin/pull/19)

希望你觉得它有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-08T03:30:22.360

我遇到了同样的问题，并设法通过`Erase all contents and settings`在模拟器上解决它，然后再次触发构建。

[https://medium.com/@lawrey/fixing-fatal-log-statements-out-of-sync-current-test-case-was-null-in-jenkins-xcode-f14c8b117641](https://medium.com/@lawrey/fixing-fatal-log-statements-out-of-sync-current-test-case-was-null-in-jenkins-xcode-f14c8b117641)

# android - 将图像添加到android中的sdcard文件夹

> ID：14682695
> 
> 赞同：0
> 
> 时间：2013-02-04T08:11:14.070
> 
> 标签：android, android-sdcard

我想开发一个可以选择多个图像并将它们保存在 sdcard 文件夹中的 android 应用程序。我可以选择多个文件，但是当我想将它们保存在 sdcard 文件夹中时，只有图像名称。当我尝试使用 GridView 显示这些图像时，我已经理解了，没有图像。这是我的代码......

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.image_selection);

    Bundle b=getIntent().getExtras();
    directoryName=b.getString("key");

    final String[] columns = { MediaStore.Images.Media.DATA, MediaStore.Images.Media._ID };
    final String orderBy = MediaStore.Images.Media._ID;
    Cursor imagecursor = managedQuery(
            MediaStore.Images.Media.EXTERNAL_CONTENT_URI, columns, null,
            null, orderBy);
    int image_column_index = imagecursor.getColumnIndex(MediaStore.Images.Media._ID);
    this.count = imagecursor.getCount();
    this.thumbnails = new Bitmap[this.count];
    this.arrPath = new String[this.count];
    this.thumbnailsselection = new boolean[this.count];
    for (int i = 0; i < this.count; i++) {
        imagecursor.moveToPosition(i);
        int id = imagecursor.getInt(image_column_index);
        int dataColumnIndex = imagecursor.getColumnIndex(MediaStore.Images.Media.DATA);
        thumbnails[i] = MediaStore.Images.Thumbnails.getThumbnail(
                getApplicationContext().getContentResolver(), id,
                MediaStore.Images.Thumbnails.MICRO_KIND, null);
        arrPath[i]= imagecursor.getString(dataColumnIndex);
    }
    GridView imagegrid = (GridView) findViewById(R.id.PhoneImageGrid);
    imageAdapter = new ImageAdapter();
    imagegrid.setAdapter(imageAdapter);
    imagecursor.close();

    final Button selectBtn = (Button) findViewById(R.id.selectBtn);
    selectBtn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) 
        {
            // TODO Auto-generated method stub
            final int len = thumbnailsselection.length;
            int cnt = 0;
            String selectImages = "";
            for (int i =0; i<len; i++)
            {
                if (thumbnailsselection[i])
                {
                    cnt++;
                    selectImages = selectImages + arrPath[i] + "|";
                    String sendString=extractString(arrPath[i]);
                    saveImageToSdCard(sendString,arrPath[i]);
                    Toast.makeText(getApplicationContext(),
                            sendString,
                            Toast.LENGTH_LONG).show();
                }
            }
        }
    });
}

public String extractString(String myString)
{
    String finalString="";
    int index = 0;
    int count=0;
    char newCharacter[]=new char[50];
    char[] charArray = myString.toCharArray();
    int length=myString.length();
    for (int i = 0; i < length; i++)
    {
        char charString=charArray[i];
        if(charString=='/')
        {
            index=i;
        }
    }

    for (int i = index+1; i < length; i++)
    {
        newCharacter[count]=charArray[i];
        count++;
    }

    finalString=String.valueOf(newCharacter);
    return finalString;
}

public void saveImageToSdCard(String imageName, String fullPath)
{
    String root = Environment.getExternalStorageDirectory().toString();
    File myDir = new File(root +"/"+directoryName);
    String fname = imageName;
    final File file = new File (myDir, fname);
    if (file.exists ())file.delete();

    try 
    {
        final Bitmap myBitmap=BitmapFactory.decodeFile(fullPath);
        new Thread() {
            public void run() 
            {
                ByteArrayOutputStream bytes = new ByteArrayOutputStream();
                if (myBitmap != null) 
                {
                    myBitmap.compress(Bitmap.CompressFormat.JPEG, 90, bytes);
                }
                try {
                    if (file.createNewFile()) {
                        //
                    } else {

                        //
                    }

                    FileOutputStream fo;
                    fo = new FileOutputStream(file);
                    fo.write(bytes.toByteArray());

                    fo.flush();
                    fo.close();
                    // result.recycle();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }.start();
        FileOutputStream stream=new FileOutputStream(file);

        myBitmap.compress(Bitmap.CompressFormat.JPEG, 90, stream);
        stream.flush();
        stream.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public class ImageAdapter extends BaseAdapter {
    private LayoutInflater mInflater;

    public ImageAdapter() {
        mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    public int getCount() {
        return count;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = mInflater.inflate(
                    R.layout.galleryitem, null);
            holder.imageview = (ImageView) convertView.findViewById(R.id.thumbImage);
            holder.checkbox = (CheckBox) convertView.findViewById(R.id.itemCheckBox);

            convertView.setTag(holder);
        }
        else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.checkbox.setId(position);
        holder.imageview.setId(position);
        holder.checkbox.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                CheckBox cb = (CheckBox) v;
                int id = cb.getId();
                if (thumbnailsselection[id]){
                    cb.setChecked(false);
                    thumbnailsselection[id] = false;
                } else {
                    cb.setChecked(true);
                    thumbnailsselection[id] = true;
                }
            }
        });
        holder.imageview.setOnClickListener(new OnClickListener() 
        {
            public void onClick(View v)
            {
                // TODO Auto-generated method stub
                int id = v.getId();
                Intent intent = new Intent();
                intent.setAction(Intent.ACTION_VIEW);
                intent.setDataAndType(Uri.parse("file://" + arrPath[id]), "image/*");
                startActivity(intent);
            }
        });
        holder.imageview.setImageBitmap(thumbnails[position]);
        holder.checkbox.setChecked(thumbnailsselection[position]);
        holder.id = position;
        return convertView;
    }
}
class ViewHolder 
{
    ImageView imageview;
    CheckBox checkbox;
    int id;
} 
```

我该如何解决这个问题。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:17:54.613

似乎有一个类似的，已经回答的问题：

[如何通过 MediaStore.Images.Media 获取路径](https://stackoverflow.com/questions/8737054/how-to-get-path-by-mediastore-images-media)

解决方案在答案的第一条评论中。

# java - 在 Listview 中滑动图像

> ID：14682698
> 
> 赞同：0
> 
> 时间：2013-02-04T08:11:42.143
> 
> 标签：java, android, android-intent, android-widget

我想在ListItem中从左到右和从右到左滑动图像，我在网上搜索了很多代码，没有一个适合我的解决方案，任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:39:35.087

如果我理解正确，您正在寻找像 ListView 这样水平滑动而不是垂直滑动的东西。

你想要一个 ViewPager：

这是一个例子：

[http://developer.android.com/training/animation/screen-slide.html](http://developer.android.com/training/animation/screen-slide.html)

在适配器的 instantiateItem() 方法（它或多或少地代替 ListView 适配器中的 getView() 方法）上，简单地扩展只包含图像的布局，而不是示例中显示的文本。

[http://developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

# properties - 建模 DateTime 原始类型

> ID：14682699
> 
> 赞同：3
> 
> 时间：2013-02-04T08:11:44.093
> 
> 标签：properties, uml, class-diagram, tool-uml

我想知道是否有人知道如何使用 UML 在属性中建模 DateTime 原始类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T12:53:39.193

我想这取决于日期的格式......请看下面的示例，其中我使用两个整数分别为日和年建模日期（作为 UML 数据类型）以及一个名为“月”的 UML 枚举。当然，你可以在 DateTime 处添加一些部分（UML 属性），表示小时、分钟等。你也可以选择将月份建模为整数

希望它有所帮助。 ![例子](../Images/1c60934c48d0cfc9a63b9dd4b5a4cd92.png)

# c# - 带有输入字段的 FolderBrowserDialog

> ID：14682702
> 
> 赞同：8
> 
> 时间：2013-02-04T08:11:55.420
> 
> 标签：c#, forms, openfiledialog, folderbrowserdialog, file-browser

我不知道在这里谷歌什么来解释我想做什么，所以我会在这里尝试：我在我的代码中使用`OpenFileDialog`和`FolderBrowserDialog`在我的代码中分别浏览文件和目录。

当对话框打开时，用户只能选择实际浏览文件/目录树。但是，在具有许多目录和子目录的树上，用户还希望可以选择手动隐式写入（或粘贴）希望去的完整路径。

如何在代码中实现它？

以下是使用对话框的两个函数：

**使用文件夹浏览器对话框：**

```
 private void buttonAddDirectory_Click(object sender, EventArgs e)
    {
        this.folderBrowserDialog = new System.Windows.Forms.FolderBrowserDialog();
        folderBrowserDialog.SelectedPath = "C:\\";

        if (folderBrowserDialog.ShowDialog() == DialogResult.OK)
        {
            string selectedPath = folderBrowserDialog.SelectedPath;

            if (!searchForFiles(selectedPath))
            {
                MessageBox.Show("The directory: " + selectedPath + " doesn't contain sequences.", "Error!");
                return;
            }

            testForm.enableNumOfProcesses();
            createNewCommand(runBatchScript, selectedPath, true);
        }
    } 
```

**使用 OpenFileDialog：**

```
 private void buttonAddFile_Click(object sender, EventArgs e)
    {
        this.openFileDialog = new System.Windows.Forms.OpenFileDialog();
        openFileDialog.InitialDirectory = "C:\\";
        openFileDialog.Filter = "PMD files (*" + sequenceExtenssion + ")|*" + sequenceExtenssion + "|All files (*.*)|*.*";
        if (openFileDialog.ShowDialog() == DialogResult.OK)
        {
            string selectedFile = openFileDialog.FileName;
            if (Path.GetExtension(selectedFile).CompareTo(sequenceExtenssion) != 0)
            {
                MessageBox.Show("The file: " + selectedFile + " is not a sequence file.", "Error!");
                return;
            }
            createNewCommand(batchRunExe, selectedFile, false);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:20:03.690

根据您的用户使用的操作系统，这样做会有所不同：

1.  Windows 7、Vista、XP 等 - 您只需在输入中键入元命令（如`D:`）`File name`，就会执行此元命令。或者您可以将路径放入顶部的框中（需要单击它以从导航视图切换到输入视图）

2.  如果您使用 Mono 和其他一些 GUI 标准对话框可能根本不提供此功能，因此您必须自己实现这些对话框。

# php - 无法设置 http_referer

> ID：14682704
> 
> 赞同：1
> 
> 时间：2013-02-04T08:12:02.723
> 
> 标签：php, http-referer

登录后如何`http_referer`在我的页面中设置我的位置`logout.php`（使用signin.php）检查并成功登录重定向到我提供注销链接（使用href）的joomla.php现在我想点击注销并转到`登录。php & 我得到 http_referer 是 joomla.php 所以我可以设置 logout.php

1.  **代码：Signin.php**

    ```
    $referer = $_SERVER['HTTP_REFERER'];
    echo $referer;
    if ($referer == 'http://localhost/MinProject/reg.php')
    {
        echo "Registration SuccessFully";
    }

    else if($referer=='http://localhost/MinProject/changepassword.php')
    {
        echo"Change Password SuccessFully";
    } 
    ```

2.  **joomla.php**

    ```
    <html>
        <body>
            <table width="100%">
                <tr>
                    <td width="20%" height="32" align="right" class="unm">
                        <?php
                        session_start();
                        if(isset($_SESSION['username']))
                        {
                            $name =$_SESSION['username'];
                            echo "Welcome ".$name;
                         }
                        ?>
                    </td>
                    <td width="64%" height="32" align="right">
                        <a href="changepassword.php">ChangePassword</a>
                    </td>
                    <td width="10%" align="right">
                        <a href="logout.php">logout</style></a>
                    </td>
                    <td width="11%"></td>
                    <td width="5%"></td>
                    <td width="5%"></td>
                    <td width="5%"></td>
                </tr>
            </table> 
        </body>
    </html> 
    ```

3.  **注销.php**

    ```
    session_start();
    unset($_SESSION['username']);
    session_destroy();
    response.setHeader("Location: http://localhost/MinProject/logout.php");
    header("Location: Signin.php");
    exit(); 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:54:29.097

HTTP_REFERER 可以被欺骗，所以你不应该使用它。

查看您的代码，我认为您正在努力实现。

```
$Message  = $_SESSION['MESSAGE'];//set the message Registration SuccessFully if registration else set it as Change Password SuccessFully or accordingly
if (isset($Message) and userhasidentity)
{
    echo $Message;
}else
{
   header('location:logout.php');
} 
```

# sencha-touch-2 - 从选项卡面板中隐藏项目

> ID：14682705
> 
> 赞同：1
> 
> 时间：2013-02-04T08:12:06.187
> 
> 标签：sencha-touch-2, tabpanel

我有标签面板

```
{
    xtype: 'tabpanel',
    tabBarPosition: 'bottom',
    docked: 'bottom',
    items: [
        {
            title: 'One',
            id: 'one'
        },
        {
            title: 'Two',
            id: 'two'
         }
    ],
} 
```

我可以以某种方式隐藏运行时的第一项吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T08:41:09.513

```
this.getTabPanel().getTabBar().getComponent(0).hide(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T16:34:32.593

您可以为您的第一个项目添加一个`activate`侦听器，并在它激活时将其隐藏。

```
{
    xtype: 'tabpanel',
    tabBarPosition: 'bottom',
    docked: 'bottom',
    items: [
        {
            title: 'One',
            id: 'one',
            listeners: {
                activate: function() {
                    this.setHidden(true);
                }
            }
        },
        {
            title: 'Two',
            id: 'two'
         }
    ],
} 
```

# vb.net - VB.net 类未注册错误

> ID：14682706
> 
> 赞同：0
> 
> 时间：2013-02-04T08:12:06.963
> 
> 标签：vb.net, shell32, clsid

我正在编写一个 VB 应用程序，但是每当我运行该应用程序时，我都会收到下面列出的错误：

“创建表单时出错。有关详细信息，请参阅 Exception.InnerException。错误是：检索具有 CLSID {11219420-1768-11D1-95BE-00609797EA4F} 的组件的 COM 类工厂失败，原因是以下错误：80040154 未注册类（来自 HRESULT 的异常：0x80040154 (REGDB_E_CLASSNOTREG)）。”

我已经尝试注册 shell32.dll 文件，我在注册表中查看了条目 {11219420-1768-11D1-95BE-00609797EA4F} 但它不存在，并且我尝试为 x86 编译此应用程序。

```
Imports Shell32
Imports System.IO
Public Class frmIconChanger
    Dim sh As ShellLinkObject = New ShellLinkObject
    Private Sub btnBackupAndChange_Click(sender As Object, e As EventArgs) Handles btnBackupAndChange.Click
        For Each desktopIcon In My.Computer.FileSystem.GetFiles("C:\Users\" + getUserName().ToString + "\Desktop")
            Dim fileExtension As String = Path.GetExtension(desktopIcon)
            If (fileExtension = ".lnk") Then
                MsgBox(sh.GetIconLocation(desktopIcon).ToString)
            End If
        Next
    End Sub
    Private Function getUserName() As String
        Return System.Environment.UserName.Trim
    End Function
End Class 
```

其他信息：我在 Windows 7 64 位机器上。我有 .Net 4.0 和以前的版本，并且在 Visual Studio 2012 中工作。我还在我的项目中添加了 shell32.dll 作为参考。任何解决此问题的帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:34:18.263

请参阅此链接[创建链接](http://www.codeproject.com/Articles/11467/How-to-create-short-cuts-link-files)。查看“C”代码并查找常量 CLSID_ShellLink IID_IShellLink

这些是类和接口所需的值。

这个其他链接很有用：[IShellLink interface](http://www.autohotkey.com/board/topic/74471-com-queryinterface/)

这应该是您需要的 GUID： CLSID := "{00021401-0000-0000-C000-000000000046}" IID := "{000214F9-0000-0000-C000-000000000046}"

# javascript - 使用 JavaScript KeyCode - 同时按下多个键

> ID：14682708
> 
> 赞同：1
> 
> 时间：2013-02-04T08:12:10.587
> 
> 标签：javascript, key, dom-events, keypress

我从用户 B1KMusic 中找到了这个解决方案：[如何使用 JavaScript 检测是否同时按下多个键？](https://stackoverflow.com/questions/5203407/javascript-multiple-keys-pressed-at-once/12444641#12444641)

编码：

```
map={}//I know most use an array, but the use of string indexes in arrays is questionable
onkeydown=onkeyup=function(e){
    e=e||event//to deal with IE
    map[e.keyCode]=e.type=='keydown'?true:false
    /*insert conditional here*/
}

if(map[17]&&map[16]&&map[65]){//CTRL+SHIFT+A
    alert('Control Shift A')
}else if(map[17]&&map[16]&&map[66]){//CTRL+SHIFT+B
    alert('Control Shift B')
}else if(map[17]&&map[16]&&map[67]){//CTRL+SHIFT+C
    alert('Control Shift C')
} 
```

这可行，但我有一个问题：在按`CTRL`+ `SHIFT`+后收到警报后，`B`我按任意键并再次收到警报。

B1KMusic 找到了这个解决方法：

```
 if(map[17]&&map[16]&&map[65]){//CTRL+SHIFT+A
    alert('Oh noes, a bug!')
}
//When you Press any key after executing this, it will alert again, even though you 
//are clearly NOT pressing CTRL+SHIFT+A
//The fix would look like this:

 if(map[17]&&map[16]&&map[65]){//CTRL+SHIFT+A
    alert('Take that, bug!')
    map={}
}
//The bug no longer happens since the map object is cleared 
```

我试过这个，问题仍然存在。

# database - 如何在 Firebird 中将字段声明为 varchar(max)

> ID：14682709
> 
> 赞同：3
> 
> 时间：2013-02-04T08:12:26.060
> 
> 标签：database, firebird, create-table

如何在 Firebird 中使用 varchar(max) 声明此表？

```
CREATE TABLE MyUser
(
Id   INT,   -- unique id of user
Signature   VARCHAR(max),  
Login   VARCHAR(50),   
UserPassword   VARCHAR(100),    
CONSTRAINT PK_MyUser PRIMARY KEY (Id) 
);
COMMIT; 
```

是否可以？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-04T10:39:55.007

Firebird 没有类型`VARCHAR(MAX)`。您需要使用`VARCHAR(32765)`假设您使用的是 1 字节字符集或`VARCHAR(8191)`（使用 UTF-8），或者您需要使用 a `BLOB SUB_TYPE TEXT`（这是文本数据的 blob 类型）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T08:19:59.597

据我所知，不是。

使用`VARCHAR(32765)`，Firebird 最多可以容纳 32,765 个字符（最多）。或者你也可以使用`BLOB`.

# java - 不同语言（即 Java 和 C++）的“随机”生成器如何比较？

> ID：14682715
> 
> 赞同：8
> 
> 时间：2013-02-04T08:12:47.450
> 
> 标签：java, c++, random

尽管标题很奇怪，但我想问一个合理的问题：哪个方法生成的数字更*随机*：Java 的`Random()`类`Math.random()`还是 C++ 的`rand()`？

我听说 PHP`rand()`很糟糕，也就是说，如果你映射它的结果，你可以清楚地看到一个模式；可悲的是，我不知道如何用 C++ 或 Java 绘制地图。

另外，只是出于兴趣，C# 呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T08:15:44.433

Java 和 C++ 都生成伪随机数，它们是：

*   足以胜任任何不是统计学家或密码学家的人^((a))；或者
*   可悲地不适合这两类人。

老实说，除非您*属于*其中一类，否则伪随机数生成器就可以了。

Java 还`SecureRandom`声称提供加密类的非确定性（我无法评论该论点的真实性），而 C++ 现在具有更广泛的随机数生成能力，而不仅仅是`rand()`- 请参阅[`<random>`](http://en.cppreference.com/w/cpp/numeric/random)详细信息。

特定的操作系统可能会为随机数生成器提供熵源，例如在 Windows 下或在 Linux[`CryptGenRandom`](http://msdn.microsoft.com/en-us/library/aa379942.aspx)下读取。`/dev/random`或者，您可以通过使用随机事件（例如用户输入时间）来添加熵。

* * *

^((a))实际上可能包含不是统计学家或密码学家的其他工作类型的痕迹:-)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T08:19:09.360

`java.util.Random`（由 内部使用`Math.random()`）使用[线性同余生成器](http://en.wikipedia.org/wiki/Linear_congruential_generator)，这是一个相当弱的 RNG，但对于简单的事情来说已经足够了。对于重要的应用程序，应该使用`java.security.SecureRandom`。

我不认为 C 或 C++ 语言规范禁止使用该算法，`rand()`但大多数实现也使用 LCG。C++11 添加了新的 API，可以产生更高质量的随机性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T09:01:16.447

可以在网上找到一个非常好的文档，由世界范围内的随机数生成器专家之一完成。

[这是文件](http://www.iro.umontreal.ca/~lecuyer/myftp/papers/testu01.pdf)

文档的第一部分是对测试的描述，除非您真的感兴趣，否则您可以跳过它。从第 27 页开始，有许多生成器的不同测试结果，包括 Java、C++、Matlab、Mathematica、Excel、Boost，...（它们在文本中进行了描述）。

看起来Java的生成器好一点，但两者都不是世界上最好的。C++11 的 MT19937 已经好很多了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T08:15:24.387

PHP 使用种子。如果种子在两个不同的时间相同，则 rand() 函数将始终输出相同的内容。（例如，这对于令牌来说可能非常糟糕）。我不知道 C++ 和 Java，但没有真正的随机性，这使得质量难以评估。安全性不能依赖这些功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T08:44:13.140

我不知道随机数真正随机的任何语言 - 我确信存在这样的事情，但一般来说，它是“你把种子放进去，你就会得到种子给出的序列”。如果你想制作一个简单的“射击”游戏、基本的扑克游戏、家用轮盘赌模拟器等，这很好。但是如果你有钱依赖于真正随机的游戏（例如，你正在给钱基于某些序列的结果）或您的秘密文件依赖于您的随机数，那么您肯定需要一些其他机制来查找随机数。

周围有一些“真正的”随机数生成器。他们不提供种子，因此基于您上次获得的数字的可预测性很低。我并不是说它是零，因为我不确定你是否可以通过以未使用的无线电频率、放射性衰变或任何最新的生成真随机数的方法来采样无线电波来获得它。

# sql - 交叉引用外键约束错误

> ID：14682718
> 
> 赞同：1
> 
> 时间：2013-02-04T08:13:06.793
> 
> 标签：sql, foreign-keys

当我尝试在 MySQL 中创建表时，我遇到了一个奇怪的问题。

我想要一个交叉引用两个多对多表，这是我创建表的代码

```
create table teacher(
t_id char(10) not null unique, 
name varchar(20) not null, 
sur_name varchar(20) not null, 
CONSTRAINT pk_teacher PRIMARY KEY(t_id))

create table student(
s_id char(10) not null unique,
name varchar(20) not null,
sur_name varchar(20) not null,
CONSTRAINT pk_student PRIMARY KEY(s_id))

create table teacher_student(
t_id char(10) not null,
s_id char(10) not null,
CONSTRAINT pk_teacher_student PRIMARY KEY(t_id, s_id)) 
```

为了添加外部约束，我使用了以下代码

```
ALTER TABLE teacher_student 
ADD CONSTRAINT fk_teacher_student FOREIGN KEY(s_id) REFERENCES student(s_id)
ALTER TABLE teacher_student 
ADD CONSTRAINT fk_student_teacher FOREIGN KEY(t_id) REFERENCES teacher(t_id)
ALTER TABLE student 
ADD CONSTRAINT fk_student_teacher_student 
FOREIGN KEY(s_id) REFERENCES teacher_student(s_id)
ALTER TABLE teacher 
ADD CONSTRAINT fk_teacher_teacher_student
FOREIGN KEY(t_id) REFERENCES teacher_student(t_id) 
```

效果很好，但是如果我尝试像这样以不同的顺序执行代码

```
ALTER TABLE student 
ADD CONSTRAINT fk_student_teacher_student 
FOREIGN KEY(s_id) REFERENCES teacher_student(s_id)
ALTER TABLE teacher 
ADD CONSTRAINT fk_teacher_teacher_student
FOREIGN KEY(t_id) REFERENCES teacher_student(t_id)
ALTER TABLE teacher_student 
ADD CONSTRAINT fk_teacher_student FOREIGN KEY(s_id) REFERENCES student(s_id)
ALTER TABLE teacher_student 
ADD CONSTRAINT fk_student_teacher FOREIGN KEY(t_id) REFERENCES teacher(t_id)
ALTER TABLE student 
```

我得到了例外

```
Can't create table 'test.#sql-44c_37' (errno: 150) 
```

我的问题是，为什么顺序很重要？这两种创建约束的方式有什么区别？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:17:07.893

您的某些外键似乎没有任何意义。

那些引用`student`和`teacher`（`fk_teacher_student`和`fk_student_teacher`）很好。这实际上是一个多对多表引用正在实现多对多关系的两个实体表中的每一个的典型案例。

现在，您对从这些表引用回多对多表有何建议？我承认我无法真正解释为什么使用第一个脚本成功添加了外键而在另一个脚本中失败了。对于那个很抱歉。尽管我有一些模糊的想法，但这并不是我回答的重点。关键是，您目前的设计将使您难以添加新数据。有了它，你就不能真正添加​​，比如说，一个学生，而不添加新学生和现有教师之间的关系。这是因为 in 中的一行`student`应该引用 中的现有学生`teacher_student`，但由于它是新学生，因此 in 中`teacher_student`还没有对应的行。新老师也一样。

所以，考虑放弃`fk_student_teacher_student`and的想法`fk_teacher_teacher_student`。您的设计不需要它们。它们已经使您解决了不必要的问题，并且将来可能会造成更多麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:19:37.670

“我尝试像这样以不同的顺序执行代码”你没有不同的顺序，你有非常不同的约束。你不能创建这样的约束。查看本文以获取更多信息

[**外键约束**](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

# wpf - 安装 CrystalReport SAP VS 2010 时出错

> ID：14682720
> 
> 赞同：0
> 
> 时间：2013-02-04T08:13:13.923
> 
> 标签：wpf, visual-studio-2010, crystal-reports

我使用 VS 2010。但是当我将水晶报告添加到我的 WPF 应用程序时，我得到一个带有消息的页面

> “Crystal Reports for Visual Studio 2010 是免费下载的，用于将演示文稿质量报告添加到 WPF、WinForms 和 ASP.Net 网站。
> 
> 主要新功能包括：
> 
> ```
> 64-bit runtime
> WPF viewer
> Enhanced embedded report designer
> Support for exporting to XLSX 
> ```
> 
> 了解更多信息并立即下载适用于 Visual Studio 2010 的 Crystal Reports

然后我尝试在我的 PC 上下载并[安装这个 SAP Crystal Report 版本。](http://scn.sap.com/people/coy.yonce/blog/2010/11/12/crystal-reports-for-visual-studio-2010-production-release-now-available)但是出现了这个错误：

![在此处输入图像描述](../Images/80dbf1ef21e86b1ca601eef09b971d37.png)

谁能帮我？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T04:01:55.157

我的第一个问题是您是否尝试为您的操作系统安装正确的位版本？但是，如果没有更多关于您的计算机设置的数据，我们将无计可施。

# javascript - 在 javascript/Jquery 中使用 freemarker 变量

> ID：14682723
> 
> 赞同：7
> 
> 时间：2013-02-04T08:13:31.753
> 
> 标签：javascript, jquery, freemarker

我在 freemarker 中声明了一个变量为

```
<#assign myvariable= "value"> 
```

我想在我的javascript函数中访问它，如下所示

```
function myfunction(){

    alert(myvariable);

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-04T08:17:13.447

我想，首先，您应该将该变量输出到您的 HTML/JavaScript 代码中，如下所示：

```
<script type="text/javascript">
var myvariable = "${myvariable}";
function myfunction(){
    alert(myvariable);
}
</script> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-10-08T09:43:10.087

您可以将 freemarker 变量分配给 HTML 输入字段，并使用 jquery 或文档在 JavaScript 中访问它 这里是如何

```
<input id=“freemarkervar” type=“text or hidden” value=“${myVariable}”/>
<script type="text/javascript">
var val = $(“#freemarkervar”).val();
alert(val);

// using JavaScript   
var val=document.getElementById("freemarkervar").value;  
alert(val);
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-20T15:23:45.290

您可以立即在 JavaScript 中使用 FreeMarker 代码。这是 FreeMarker 提供 Morris.js 图表数据的示例代码。我想你会明白的。

```
new Morris.Area({
    element: 'searchTrend',
    resize: true,
    data: [
    <#list searchCount as sc>
    {day: '${sc.date!?string("yyyy-MM-dd")}', count: ${sc.searches}} <#sep>,
    </#list>
    ],
    xkey: 'day',
    ykeys: ['count'],
    labels: ['Count'],
    xLabelFormat: function (x) { return x.getDate(); }
}); 
```

# c#-4.0 - 事件连续触发

> ID：14682728
> 
> 赞同：1
> 
> 时间：2013-02-04T08:14:18.300
> 
> 标签：c#-4.0, event-handling, devexpress

我写了一个方法，在 devexpress 中绘制 gridview 之前改变行的背景颜色。它工作正常，但我意识到我的代码开始变慢。然后我发现事件连续触发。它永远不会停止。我该如何处理？有没有办法在绘制gridview之后手动停止触发事件，或者我应该尝试用另一个事件或另一种方法解决这个问题？？？

这是我的活动：

```
private void gvStep_CustomDrawCell(object sender, DevExpress.XtraGrid.Views.Base.RowCellCustomDrawEventArgs e)
    {
        try
        {
            DataRowView drw = (DataRowView)gvStep.GetRow(e.RowHandle);
            byte actionTypeID = (byte)drw.Row["ActionType"];

            //string colorCode = (new DivaDs()).GetBackColor(actionTypeID);
            string colorCode = divaDs.GetBackColor(actionTypeID);
            Color backColor = ColorTranslator.FromHtml(colorCode);
            e.Appearance.BackColor = backColor;                
        }
        catch (Exception ex)
        {
            XtraMessageBox.Show(ex.Message);   
        }

    }

public string GetBackColor(byte actionTypeID)
    {
        string color = string.Empty;
        using (SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings[DivaSqlSiteConnString].ConnectionString))
        {
            using (SqlCommand cmd = new SqlCommand(@"Select BackColor from ActionTypes where ID = @actionTypeID"))
            {
                SqlParameter param = new SqlParameter("@actionTypeID", actionTypeID);

                cmd.Parameters.Add(param);
                cmd.Connection = conn;
                conn.Open();
                color = cmd.ExecuteScalar().ToString();
                conn.Close();
            }
        }
        return color;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T08:21:25.963

我最好的猜测是你的代码的某些部分真的很慢。

该事件仅针对网格中的每个可见单元格触发。如果您尝试调试事件，焦点将转移到调试器，当您返回应用程序时，需要重新绘制单元格，导致事件再次触发，从而给人以事件连续触发的*印象。*然而，事实并非如此。

以下是一些提高性能的建议：

*   `DivaDs`每次事件触发时， 您都在构建一个新的
    *   相反，请考虑重用类的相同实例作为成员变量
    *   构造函数中发生了什么？
*   仔细查看该`GetBackColor`方法，或者`ColorTranslator.FromHtml`看看是否可以进行任何修改以提高性能。

**更新**

您似乎正在为网格中的每个单元格查询数据库。这是一个非常糟糕的主意。

一个简单的解决方案是在设置网格的数据源之前预加载所有 ActionType 及其背景颜色（或至少在网格中显示的 ActionType 的子集）。

```
// member variable
private Dictionary<byte, Color> actionTypeColorDict;

void BuildActionTypeColorDictionary()
{
    string connectionString = ConfigurationManager
      .ConnectionStrings[DivaSqlSiteConnString].ConnectionString;

    using (SqlConnection conn = new SqlConnection(connectionString))
    using (SqlCommand cmd = conn.CreateCommand())
    using (SqlDataAdapter adapter = new SqlDataAdapter(cmd))
    {
       // load all action type IDs and corresponding background color:
       cmd.CommandText = @"SELECT ActionTypeID, BackColor FROM ActionTypes";       
       DataTable actionTypeTable = new DataTable();
       adapter.Fill(actionTypeTable);

       // build a dictionary consisting of action type IDs
       // and their corresponding colors
       actionTypeColorDict = actionTypeTable.AsEnumerable().ToDictionary(
           r => r.Field<byte>("ActionTypeID"),
           r => ColorTranslator.FromHtml(r.Field<string>("ColorCode")));
   }
} 
```

`BuildActionTypeColorDictionary`在设置网格的数据源之前调用该方法。在`RowStyle`or`CustomDrawCell`事件中，使用新的字典成员来确定背景颜色。请参阅以下修改后的`RowStyle`代码版本：

```
private void gvStep_RowStyle(object sender,DevExpress.XtraGrid.Views.Grid.RowStyleEventArgs e)
{
    try
    {
        DataRow row = gvStep.GetDataRow(e.RowHandle);
        if (row == null)
            return;

        byte actionTypeID = row.Field<byte>("ActionImage");

        // look up color in the dictionary:
        e.Appearance.BackColor = actionTypeColorDict[actionTypeID];
    }
    catch (Exception ex)
    {
        XtraMessageBox.Show(ex.Message);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T08:33:26.500

你怎么知道它在连续发射？你在调试吗？

每当重绘网格时，此代码就会运行，这意味着只要表单获得焦点。

1.  此事件针对每个单元运行 - 因此它将运行很多次。
2.  如果您在此事件中设置断点，您将永远无法摆脱它。它将中断，您将进行调试，完成后它将焦点返回到表单 - 导致使用此事件重绘表单并再次到达断点。

只是一个旁注-每当我使用该事件时，我都必须`e.Handled = true;`输入代码，这样单元格就不会被除我之外的任何人“绘制”:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:23:16.210

最后，我找到了。RowStyle 事件仅与 gridview 的行数同时触发

```
private void gvStep_RowStyle(object sender, DevExpress.XtraGrid.Views.Grid.RowStyleEventArgs e)
        {
            try
            {
                DataRowView drw = (DataRowView)gridView1.GetRow(e.RowHandle);
                if (drw == null)
                    return;

                byte actionTypeID = (byte)drw.Row["ActionImage"];

                string colorCode = divaDs.GetBackColor(actionTypeID);
                Color backColor = ColorTranslator.FromHtml(colorCode);
                e.Appearance.BackColor = backColor;
            }
            catch (Exception ex)
            {
                XtraMessageBox.Show(ex.Message);
            }
        } 
```

# javascript - 绑定两个输入，即使其中一个被用户更改，它们也会显示相同的文本

> ID：14682732
> 
> 赞同：0
> 
> 时间：2013-02-04T08:14:29.523
> 
> 标签：javascript, jquery, class, knockout.js, bind

jQuery 代码看起来像这样并且工作正常（可能看起来有点排序，所以请告诉我，我也会更改它）：[jsFiddle](http://jsfiddle.net/69UAT/)

jQuery：

```
$('.inputs').on('keyup',function(){
    $(this).parent().not(this).find('.inputs').val($(this).val());
}
); 
```

HTML：

```
<div>
    <input type="text" class="inputs" value="hello">
    <input type="text" class="inputs" value="John">
</div> 
```

如何为 knockout.js 重写此代码？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:36:17.043

只需将其绑定到同一个可观察对象：

**HTML**

```
<div>
    <input type="text" class="inputs" id="first" data-bind="value:foobar,valueUpdate:'keyup'">
    <input type="text" class="inputs" id="second" data-bind="value:foobar,valueUpdate:'keyup'">
</div> 
```

**视图模型**

```
function AppViewModel() {
    this.foobar = ko.observable('hello');
}
ko.applyBindings(new AppViewModel()); 
```

我使用`valueUpdate`绑定实时更新输入而不是模糊（另见：[https](https://stackoverflow.com/a/4391419/664108) ://stackoverflow.com/a/4391419/664108 ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T08:37:23.573

看看下面的代码片段，它适用于 ko。

```
var value = "Hello John";
var viewModel = {
  Name: ko.observable(value)
};
ko.applyBindings(viewModel);
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/2.0.0/knockout-min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div>
  <input type="text" data-bind="value:Name" class="inputs" id="first">
  <input type="text" data-bind="value:Name" class="inputs" id="second">
</div>
<span data-bind="text: Name"> </span>
```

希望，你会用更多的数据来做到这一点。在这种情况下，请查看[此示例](http://jqfaq.com/json-list-to-divs-using-ko/)，它将让您了解如何支持更多数据。

更多常见问题请访问[jqfaq.com](http://jqfaq.com/)

# c - 在 while 循环中使用 wait() 而不是 waitpid()

> ID：14682733
> 
> 赞同：2
> 
> 时间：2013-02-04T08:14:43.440
> 
> 标签：c, wait, zombie-process, waitpid

我知道 wait() 和 waitpid() 之间的区别之一是 waitpid 有一个 WNOHANG 选项，它告诉 waitpid 如果有运行的子进程尚未终止，则不要阻塞。如：

```
while (  (pid = waitpid(-1, &stat, WNOHANG)) > 0)
    printf("Child %d terminated\n", pid); 
```

如果我使用 wait() 而不是 waitpid()，如果有运行的子进程尚未终止，则无法阻止 wait() 阻塞。但是，我想知道 wait() 在这里是否可以正常工作，即使它可能会阻塞。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2016-10-26T03:36:47.570

我们不能在循环中调用**等待**，因为如果有运行的子进程尚未终止，则无法阻止**等待阻塞。**

# php - 如何根据另一个字段输入值更新存储的日期？

> ID：14682734
> 
> 赞同：0
> 
> 时间：2013-02-04T08:14:45.070
> 
> 标签：php, codeigniter-2

只是根据选择的月份数存储了注册日期和到期日期，它也是由数据库创建的，由主屏幕创建。现在我需要是否可以更改主屏幕到期日期中的月数，必须根据注册日期和更改时的月数更改日期。

例如：我创建了基本计划 - 3 个月，在注册时我选择了 reg。日期 2.1.2013 并选择了基本计划，以便我将到期日期存储在 2.4.2013 中。如果我将第 3 个月更改为 4 个月，我需要将到期日期更改为 2.5.2013。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:56:14.567

请查看此代码，我希望这会有所帮助：

```
$regdate = '2.1.2013';
$expiredate =  date("d.m.Y", strtotime('+3 month', strtotime($regdate)));
echo $expiredate; 
```

然后它的印刷品**02.04.2013**

# gridview - 如何强制 Gridview 换行

> ID：14682739
> 
> 赞同：0
> 
> 时间：2013-02-04T08:15:07.987
> 
> 标签：gridview, sqldatasource

我正在尝试使用 sqldatasource 对象来填充网格视图，但我希望将数据库中的两行合并为一行，并在网格视图中使用换行符（仅用于美观）。到目前为止，我所做的是将数据库的结果连接起来，如下所示：

```
SELECT Incidents.Title + '<br />' + Products.Name AS "Title/Product",
Technicians.Name + '<br />' +  Incidents.Description AS "Tech name /<br />Description",
Incidents.DateOpened,
Incidents.DateClosed
FROM Incidents
INNER JOIN Technicians ON Incidents.TechID = Technicians.TechID
INNER JOIN Products ON Incidents.ProductCode = Products.ProductCode
WHERE Incidents.CustomerID = @CustomerID 
```

如您所见，我将 HTML 换行符插入到污染和列名中，但遗憾的是，这`"Title<br />Product"`在 gridview 中显示。简而言之，它实际上并没有执行换行符，它只是插入文本。

所以我的问题是，无论如何都要强制执行换行符，最好是一个比我正在使用的方法更简单的换行符，如果没有那很好，我只是真的坚持我能做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:46:46.040

是的，当您在 SQL 查询中插入换行符时，您不会得到换行符。您还可以考虑使用 ListView 控件。[asp:ListView 控件](http://weblogs.asp.net/scottgu/archive/2007/08/10/the-asp-listview-control-part-1-building-a-product-listing-page-with-clean-css-ui.aspx)

> 您可以在表示层（aspx 页面）内做任何关于美学的事情。

根据您的要求，您可以做的是创建一个 gridview 模板字段列。在该模板字段列中，您可以删除一些标签并将换行符放在那里。您可以将标签与基础数据源绑定，例如

```
<asp:TemplateField HeaderText="My line break row">
<ItemTemplate>
<p>
  <asp:Label Id="lblTitle" Text='<%# Bind("Title")></asp:Label>
</p>
<p>
  <asp:Label Id="lblProduct" Text='<%# Bind("Product")></asp:Label>
</p>

</ItemTemplate>
</TemplateField> 
```

# php - 将值从 json_decode 转换为字符串

> ID：14682741
> 
> 赞同：0
> 
> 时间：2013-02-04T08:15:21.390
> 
> 标签：php

如何将我的值从 json_decode 转换为字符串，以便我可以传入字符串值以检查电子邮件是否存在这里是我的代码。

我的 json 是这种格式：

```
{email:'test@test.com' } 
```

PHP：

```
$var = json_decode($_REQUEST["email"], true);
$result = $membership->CheckEmailAddress($var); // get $var to become a string 
```

它看起来很丑我刚开始 php 和林没有走很远 aye 大声笑。

jQuery：

```
$('#checkemail').click(function () {
    var json = {
        email: $('#email').val()
    };
    $.post('http://' + location.host + '/buyme/include/getemailaddress.php', {
        'email': 'test@yahoo.co.nz'
    }, function (res) {
        var obj = JSON.parse(res);
        alert(obj.message)
    });
}); 
```

另外我如何将我的 json 变量放在我的 $.post 函数中，因为这就是我想要放在那里的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:18:34.790

$_REQUEST["email"] 中的什么值如果它是您在上面显示的 json 值然后尝试

您的 $var 是一个 json 对象，您可以获取电子邮件值，例如不使用 $var 它是一个数组

试过这个：-

```
$val = json_encode(array('email' =>'test@test.com'));
echo $val; //output {"email":"test@test.com"}
$var = json_decode($val, true);
print_r($var); // output Array ( [email] => test@test.com ) 
echo $var['email']; //output test@test.com 
```

# asp.net - 将 HttpFileCollection 转换为字节并将数据流式传输到 asp.net 中的图像控件

> ID：14682743
> 
> 赞同：0
> 
> 时间：2013-02-04T08:15:25.570
> 
> 标签：asp.net, byte, httpfilecollection

```
 HttpFileCollection oHttpFileCollection = e.PostedFiles;
    HttpPostedFile oHttpPostedFile = null;
    if (e.HasFiles)
    {
        for (int n = 0; n < e.Count; n++)
        {
            oHttpPostedFile = oHttpFileCollection[n];
            if (oHttpPostedFile.ContentLength <= 0)
                continue;
            else
                oHttpPostedFile.SaveAs(Server.MapPath("Files") + "\\" + System.IO.Path.GetFileName(oHttpPostedFile.FileName));
    } 
```

如何转换**`HttpFileCollection`**为字节并读取流，然后在 asp.net 中将图像显示到图像控件

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:04:52.590

```
HttpFileCollection oHttpFileCollection = e.PostedFiles;
HttpPostedFile oHttpPostedFile = null;
if (e.HasFiles)
{
    for (int n = 0; n < e.Count; n++)
    {
        oHttpPostedFile = oHttpFileCollection[n];
        if (oHttpPostedFile.ContentLength <= 0)
        {
            continue;
        }
        else
        {
            var filename = Path.GetFileName(oHttpPostedFile.FileName);
            var path = Path.Combine(Server.MapPath("~/Files/"), filename);
            oHttpPostedFile.SaveAs(path);

            // Now you could display each image in a dynamically added Image
            // control to the page:
            Image image = new Image();
            image.ImageUrl = "~/Files/" + filename;

            // I assume that you have a reference to the current page
            // so that you could append image controls to it.
            // You could also append the images to a placeholder or a Panel
            // on your WebForm
            this.Controls.Add(image);
        }
} 
```

# solr - 如何在索引时获取日期并进行比较

> ID：14682744
> 
> 赞同：1
> 
> 时间：2013-02-04T08:15:30.647
> 
> 标签：solr

我想在索引我的内容时为最新数据做一个半身像。例如，从现在到过去 6 个月的内容应该有 boost = 10，而从过去 6 个月到过去 12 个月的内容应该有 boost = 5 旧内容应该有 boost = 0

我的日期被保存为时间戳，所以唯一的问题是在索引时获取当前日期

我可以从函数中的参数行中获取内容的日期，但我不知道如何获取当前日期并进行比较。应该是这样的吗？

还有一个问题

有什么方法可以检查升压吗？我的意思是我可以监控什么是如何提升的吗？因为很难确定使用包含数千篇文章的结果列表

// 编辑答案

知道了

脚本应该是这样的（这是 1 岁及以上的

```
<script>
<![CDATA[
function s1(row)    {
var curTime = parseInt(new Date().getTime()/1000);
var itemDate = row.get('publication_date');
if(itemDate >= (curTime - 31104000)) {
    row.put('$docBoost', 40);
} else {
    row.put('$docBoost', 20);    
}

return row;
}
]]>
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T11:27:21.010

我建议您使用查询/搜索时间提升来代替您的用例。主要优点是您不需要定期重新索引文档来调整提升。请参阅[日期提升](http://wiki.apache.org/solr/FunctionQuery#Date_Boosting)和[“如何提高较新文档的分数”](http://wiki.apache.org/solr/SolrRelevancyFAQ#How_can_I_boost_the_score_of_newer_documents) wiki 提示

# android - android 中的 SAX Parser 加载图像和文本

> ID：14682745
> 
> 赞同：0
> 
> 时间：2013-02-04T08:15:30.590
> 
> 标签：android, parsing, saxparser

我想通过 SAX Parser 解析它并通过 url 加载图像并将其传递给下一个要显示的活动。但是，如果有任何人可以帮助我或给我一些可重用的代码，我将不胜感激。这是我的 xml 文件。这是我解析的数据类和适配器类不要将项目添加到arraylist。请帮忙。

解析数据类

公共类 ParseData 扩展 DefaultHandler { boolean title , cost , pubDate , link = false;

```
private String temp = "";

ArrayList<String> arrtitle = new ArrayList<String>();

ArrayList<String> arrcost = new ArrayList<String>();

ArrayList<String> arrpubDate = new ArrayList<String>();

ArrayList<String> arrlink = new ArrayList<String>();

//---------START ELEMENT----------//

@Override
public void startElement(String uri , String localName , String qName , Attributes attributes) throws SAXException 
{
    super.startElement(uri, localName, qName, attributes);

    if(localName.equalsIgnoreCase("title"))
    {
        title = true;

    }else if(localName.equalsIgnoreCase("cost"))
    {
        cost = true;

    }else if(localName.equalsIgnoreCase("pubDate"))
    {
        pubDate = true;

    }else if(localName.equalsIgnoreCase("link"))
    {
        link = true;
    }
}
//--------END ELEMENT----------//

@Override
public void endElement(String uri , String localName , String qName) throws SAXException 
{
    super.endElement(uri, localName, qName);
    if(localName.equalsIgnoreCase("title"))
    {
        title = false;

    }else if(localName.equalsIgnoreCase("cost"))
    {
        cost = false;

    }else if(localName.equalsIgnoreCase("pubDate"))
    {
        pubDate = false;

    }else if(localName.equalsIgnoreCase("link"))
        link = false;
}

@Override
public void characters(char[] ch, int start, int length)throws SAXException 
{
    super.characters(ch, start, length);

    if(title)
    {

    }

    if(cost)
    {

    }

    if(pubDate)
    {

    }

    if(link)
    {

    }
} 
```

}

连接器类

公共类 BindDataAdapter 扩展 BaseAdapter {

```
ArrayList<String> title;

ArrayList<String> cost;

ArrayList<String> pubDate;

LayoutInflater inflater;

//---------DEFAULT CONSTRUCTOR-----------//

public BindDataAdapter()
{

}

//-------PARAMETERIZED CONSTRUCTOR------//

public BindDataAdapter(Activity activity , ArrayList<String> title , ArrayList<String> cost , ArrayList<String> pubDate)
{
    this.title = title;

    this.cost = cost;

    this.pubDate = pubDate;

    inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

}

@Override
public int getCount() 
{
    return title.size();
}

@Override
public Object getItem(int position) 
{
    return position;
}

@Override
public long getItemId(int position) 
{
    return position;
}

@Override
public View getView(int position , View convertView , ViewGroup parent) 
{

    if(convertView == null)
    {
        convertView = inflater.inflate(R.layout.list_row , null);
    }

    TextView textViewtitle = (TextView) convertView.findViewById(R.id.type);

    TextView textViewcost = (TextView) convertView.findViewById(R.id.cost);

    TextView textViewdate = (TextView) convertView.findViewById(R.id.date);

    return convertView;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:33:14.323

使用与解析数据和图像相同的代码，[在此链接中](https://stackoverflow.com/questions/3178883/asynchronous-image-loader-on-listview-android)添加额外的变量和参数作为说明，并使用 ImageLoader 类在 listView 中加载图像。

您还可以参考[这个](http://androidimageloader.com/)，[Android 延迟图像加载器示例](http://www.android-ever.com/2011/06/android-lazy-image-loader-example.html)和[在 Android 链接上的 ListView 中加载远程图像以](http://ballardhack.wordpress.com/2010/04/05/loading-remote-images-in-a-listview-on-android/)供参考。

随意发表评论。

# maven - Artifactory 是否提供与 Sonatype Nexus Pro 中的采购套件类似的功能？

> ID：14682750
> 
> 赞同：1
> 
> 时间：2013-02-04T08:15:49.207
> 
> 标签：maven, nexus, artifactory

我正在研究 Artifactory 和 Nexus 的优缺点。

Nexus 中有一个我非常喜欢的功能——采购套件。它提供 GUI 来定义采购规则。在采购的存储库中填充了构建所需的所有工件后，管理员可以选择停止采购并将采购的存储库恢复为本地存储库。据我了解，Artifactory 在远程存储库中提供了包含/排除模式定义以实现类似的控制，但它比 Nexus 提供的要简陋得多。我不是 Artifactory 方面的专家。Artifactory 是否像采购套件那样提供更先进的功能来严格控制构建中使用的工件？

顺便说一句，我喜欢 Artifactory 的 Watch 功能，当在被监视的存储库中发生添加/删除/更新时发送电子邮件。Nexus 不提供电子邮件通知，但提供 RSS 提要。Artifactory 现在不支持 RSS 提要，但它表示此功能正在开发中。有时我只是希望有一种产品可以结合所有这些功能。:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:36:50.610

行。JFrog 的人给了我官方的答案，想分享给大家。我在原始问题中提到的包含/排除模式是 Artifactory 用于控制构建中的工件访问的主要机制。除此之外，Artifactory 还在其 Pro 版本中提供了名为 License Control Addon 的东西。它基本上允许您在从 CI 服务器部署 3rd 方库和依赖项的未经授权许可时对其进行管理并收到警报。它并不直接适用于我的用例，但很高兴知道。他们还指出，作为用户，我可以使用他们的用户插件 API 做任何我想做的事情。这也很好知道，但至少现在，我对自己为 Artifactory 开发插件不感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T14:47:07.043

自从我使用 artifactory 已经有一段时间了，但我认为当您配置 repo 时，您可以选择将正则表达式应用于它将拉取的工件。这可能会做你需要/想要的。

# key-value-store - 总数据大小为 80TB 的分布式键值存储

> ID：14682751
> 
> 赞同：6
> 
> 时间：2013-02-04T08:15:57.507
> 
> 标签：key-value-store, distributed-filesystem

# TL;博士：

我想为 avg 提供分布式键值存储的建议。条目大小最大为 50KB，可安装在 Linux 环境（专用服务器）上。
文件系统解决方案就可以了。
我找到了一些解决方案：Ceph、Cassandra、Riak 等等。

# 细节

我正在为我们的一个组件寻找一种存储解决方案，它应该是一个键值存储、平面命名空间。

# 设想

读/写模式非常简单：

写入键值后，在接下来的几个小时内会进行几次读取。

之后，没有任何东西触及给定的键值。我们想保留这些数据以供将来使用，“存储模式”。

## 其他使用方面

*   操作系统：Linux
*   Python 客户端/连接器
*   总大小：最大 80TB（这个值也代表未来的需求）。
*   平均条目大小（对于 kv 对中的单个值）：10 到 50 KB，未压缩，主要是文本数据
*   压缩：内置或外置。
*   加密：不需要
*   网络带宽：1Gb，单局域网
*   服务器：专用（不在云中）

# 最重要的要求

“基本”要求是：

*   操作系统：Linux
*   Python 客户端/连接器或通过 HTTP 的 RESTful API
*   可以轻松存储高达 80TB（这个数值也代表未来的需求）。
*   最大读取延迟：第一次读取几秒，“存储模式”30 秒（见上文解释）
*   内置复制（以便数据存储在多个节点上）

# 很高兴有

*   RESTful 网关
*   后台数据备份到另一个存储（用于在发生灾难时进行数据恢复）。
*   易于配置

# 到目前为止我发现了什么

*   头孢
*   高密度文件系统
*   HDFS 之上的 HBase
*   光泽
*   GlusterFS
*   Mongo 的 GridFS - 但我可以信任 Mongo 的基础架构吗？
*   Cassandra - 不是一个选项，因为合并过程消耗双倍磁盘大小
*   Riak - 看起来和 Cassandra 有同样的问题，需要更多的研究
*   Swift + OpenStack（实际存储可以在 Amazon S3 上）
*   伏地魔
*   还有几十个附加工具，但我不会在这里写它们，因为其中一些具有专有许可证，而另一些似乎不成熟。

对于我上面提到的任何工具（总容量超过 50TB）或您认为足够的工具，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-12T17:04:10.063

只需使用 Ceph（我的意思是直接使用 librados）。不要使用 GlusterFS——它很麻烦。

# eclipse - Eclipse插件开发| 包含：自然不存在

> ID：14682753
> 
> 赞同：1
> 
> 时间：2013-02-04T08:16:10.360
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我正在创建一个自定义的 eclipse 插件。

在向项目添加性质时，我遇到了这个异常：

```
org.eclipse.core.runtime.CoreException: Problems encountered while setting project description.
    at org.eclipse.core.internal.resources.Project.setDescription(Project.java:1351)
    at org.eclipse.core.internal.resources.Project.setDescription(Project.java:1378)
    at projectwizard.ProjectWizardManager.createProjectNature(ProjectWizardManager.java:72)
    at projectwizard.ProjectWizardManager.createProject(ProjectWizardManager.java:48)
    at projectwizard.NewMobilePlatformProjectWizard.performFinish(NewMobilePlatformProjectWizard.java:40)
    at org.eclipse.jface.wizard.WizardDialog.finishPressed(WizardDialog.java:827)
    at org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:432)
    at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:624)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
    at org.eclipse.jface.window.Window.runEventLoop(Window.java:825)
    at org.eclipse.jface.window.Window.open(Window.java:801)
    at org.eclipse.ui.internal.handlers.WizardHandler$New.executeHandler(WizardHandler.java:259)
    at org.eclipse.ui.internal.handlers.WizardHandler.execute(WizardHandler.java:279)
    at org.eclipse.ui.internal.handlers.HandlerProxy.execute(HandlerProxy.java:290)
    at org.eclipse.ui.internal.handlers.E4HandlerProxy.execute(E4HandlerProxy.java:76)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56)
    at org.eclipse.e4.core.internal.di.InjectorImpl.invokeUsingClass(InjectorImpl.java:231)
    at org.eclipse.e4.core.internal.di.InjectorImpl.invoke(InjectorImpl.java:212)
    at org.eclipse.e4.core.contexts.ContextInjectionFactory.invoke(ContextInjectionFactory.java:131)
    at org.eclipse.e4.core.commands.internal.HandlerServiceImpl.executeHandler(HandlerServiceImpl.java:171)
    at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.executeCommand(KeyBindingDispatcher.java:277)
    at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.press(KeyBindingDispatcher.java:496)
    at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.processKeyEvent(KeyBindingDispatcher.java:547)
    at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.filterKeySequenceBindings(KeyBindingDispatcher.java:368)
    at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.access$0(KeyBindingDispatcher.java:314)
    at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher$KeyDownFilter.handleEvent(KeyBindingDispatcher.java:83)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Display.filterEvent(Display.java:1262)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1052)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1077)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1062)
    at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1104)
    at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1100)
    at org.eclipse.swt.widgets.Widget.wmChar(Widget.java:1521)
    at org.eclipse.swt.widgets.Control.WM_CHAR(Control.java:4640)
    at org.eclipse.swt.widgets.Tree.WM_CHAR(Tree.java:5967)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4528)
    at org.eclipse.swt.widgets.Tree.windowProc(Tree.java:5963)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4989)
    at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:2546)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3756)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1022)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:587)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:542)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)
Contains: Nature does not exist: com.mobile.platform.application. 
```

这是我的 plugin.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<plugin>

   <extension
         id="com.mobile.platform.plugin.newprojectwizrd"
         point="org.eclipse.ui.newWizards" >
      <category
            id="eclipseplugin.com.mpp.ui.wizard" name="Mobile Platform">

      </category>
       <wizard
            category="eclipseplugin.com.mpp.ui.wizard"
            class="projectwizard.NewMobilePlatformProjectWizard"
            icon="icons/applogo.png"
            id="eclipseplugin.com.mpp.ui.wizard.NewApplicationWizard"
            name="Mobile Platform Application"
            project="true">
      </wizard>
   </extension>
   <extension
         id="com.mobile.platform.application"
         point="org.eclipse.core.resources.natures">
      <runtime>
         <run
               class="com.mobile.platform.plugin.ProjectNature">
         </run>
      </runtime>
   </extension>

</plugin> 
```

在新创建的项目中添加自然是代码：

```
private void createProjectNature(IProject project) throws CoreException {
        if (!project.hasNature(ProjectNature.NATURE_ID)) {
            IProjectDescription description = project.getDescription();
            String[] prevNatures = description.getNatureIds();
            String[] newNatures = new String[prevNatures.length + 1];
            System.arraycopy(prevNatures, 0, newNatures, 0, prevNatures.length);
            newNatures[prevNatures.length] = ProjectNature.NATURE_ID;
            description.setNatureIds(newNatures);
            project.setDescription(description, new NullProgressMonitor());
        }

    } 
```

在执行 project.setdescription 的创建项目性质时，它会抛出上述异常。

这是 ProjectNature 类：

```
public class ProjectNature implements IProjectNature {

    public static final String NATURE_ID = "com.mobile.platform.application";
    private IProject iProject;
    @Override
    public void configure() throws CoreException {
        // TODO Auto-generated method stub

    }

    @Override
    public void deconfigure() throws CoreException {
        // TODO Auto-generated method stub

    }

    @Override
    public IProject getProject() {
        return iProject;
    }

    @Override
    public void setProject(IProject project) {
        // TODO Auto-generated method stub
        this.iProject=project;
    }

} 
```

我没有得到这缺少的东西。请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:16:47.747

`com.mobile.platform.application`将扩展声明中的项目性质 ID 重命名为例如`mobileNature`：

```
<extension
     id="mobileNature"
     point="org.eclipse.core.resources.natures">
  <runtime>
     <run
           class="com.mobile.platform.plugin.ProjectNature">
     </run>
  </runtime> 
```

并`NATURE_ID`相应更新

```
public class ProjectNature implements IProjectNature {

    public static final String NATURE_ID = "com.mobile.platform.plugin.mobileNature"; 
```

# java - 弹簧表达式获取文件大小？

> ID：14682760
> 
> 赞同：0
> 
> 时间：2013-02-04T08:16:42.673
> 
> 标签：java, spring, spring-integration

我是春季集成的新手。我在网上看到了下面的例子。

```
<int:router input-channel="inChannel" expression="payload.paymentType">
    <int:mapping value="CASH" channel="cashPaymentChannel"/>
    <int:mapping value="CREDIT" channel="authorizePaymentChannel"/>
    <int:mapping value="DEBIT" channel="authorizePaymentChannel"/>
</int:router> 
```

类似于上面的逻辑，我的要求是如果有效载荷长度为零，那么它应该映射到一个通道，如果有效载荷大小大于一，那么它应该被定向到不同的通道。如何使用 SpEL 实现它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:20:36.467

如果您正在处理 a `Message<File>`，`payload`则在表达式中使用将指代`File`. 您可以访问`File`表达式中的任何 ' 方法。`outputChannelB`如果文件不存在或为零长度，则以下将路由到`outputChannelA`：

```
<int:router input-channel="inputChannel" expression="payload?.length() > 0 ? 'outputChannelA' : 'outputChannelB'" /> 
```

注意使用“安全导航”操作符`?.`来保证空值安全。

# selenium - 如何使用 Selenium Java WebDriver 选择复选框？

> ID：14682763
> 
> 赞同：45
> 
> 时间：2013-02-04T08:16:54.853
> 
> 标签：selenium, webdriver, selenium-webdriver, xpath

如何使用 id 或 XPath 表达式检查复选框？是否有类似于通过可见文本选择下拉菜单的方法？

通过为所有其他相关问题给出的示例，我找不到一个合适的解决方案，它以简洁的方式工作，通过几行或几行方法我可以检查一个复选框或单选按钮。

下面是一个示例 HTML 部分：

```
<tbody>
    <tr>
        <td>
            <span class="120927">
            <input id="ctl00_CM_ctl01_chkOptions_0" type="checkbox" name="ctl00$CM$ctl01$chkOptions$0"/>
            <label for="ctl00_CM_ctl01_chkOptions_0">housingmoves</label>
            </span>
        </td>
    </tr>

    <tr>
        <td>
            <span class="120928">
            <input id="ctl00_CM_ctl01_chkOptions_1" type="checkbox" name="ctl00$CM$ctl01$chkOptions$1"/>
            <label for="ctl00_CM_ctl01_chkOptions_1">Seaside & Country Homes</label>
            </span>
        </td>
    </tr>
</tbody> 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-02-04T09:54:53.393

选择复选框类似于单击按钮。

`driver.findElement(By.id("idOfTheElement")).click();`

会做。

但是，您还可以查看复选框是否已被选中。以下代码段检查复选框是否被选中。如果未选中，则选中。

```
if ( !driver.findElement(By.id("idOfTheElement")).isSelected() )
{
     driver.findElement(By.id("idOfTheElement")).click();
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-11-12T17:40:19.847

看起来 Internet Explorer 驱动程序与其他驱动程序的交互方式与其他驱动程序的交互方式不同，复选框就是其中一种情况。

复选框的诀窍是发送`Space`密钥而不是使用单击（仅在 Internet Explorer 上需要），就像在 C# 中一样：

```
if (driver.Capabilities.BrowserName.Equals(“internet explorer"))
    driver.findElement(By.id("idOfTheElement").SendKeys(Keys.Space);
else
    driver.findElement(By.id("idOfTheElement").Click(); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-02T08:50:00.180

如果您想一次单击所有复选框，则可以使用以下方法：

```
private void ClickAllCheckboxes()
{
    foreach (IWebElement e in driver.FindElements(By.xpath("//input[@type='checkbox']")))
    {
        if(!e.Selected)
            e.Click();
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-09-28T18:21:55.657

C#的解决方案

```
try
{
    IWebElement TargetElement = driver.FindElement(By.XPath(xPathVal));
    if (!TargetElement.Selected)
    {                    
        TargetElement.SendKeys(Keys.Space);
    }
}
catch (Exception e)
{
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-04T13:46:58.477

您可以使用以下代码：

```
List<WebElement> checkbox = driver.findElements(By.name("vehicle"));
((WebElement) checkbox.get(0)).click(); 
```

我的 HTML 代码如下：

```
<.input type="checkbox" name="vehicle" value="Bike">I have a bike<br/>
<.input type="checkbox" name="vehicle" value="Car">I have a car<br/> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-04T10:43:43.980

To get the checkbox for 'Seaside & Country Homes', use this XPath:

```
//label[text()='Seaside & Country Homes']/preceding-sibling::input[@type='checkbox'] 
```

To get the checkbox for 'housingmoves', use this XPath:

```
//label[text()='housingmoves']/preceding-sibling::input[@type='checkbox'] 
```

The principle here is to get the label with the text you want, then get the checkbox that is **before** the label, since that seems to be how your HTML is laid out.

To get all checkboxes, you would start a little higher up and then work down, so that is to say get the table, and then get any checkbox within a span:

```
//table/descendant::span/input[@type='checkbox'] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-02T03:59:53.327

下面是使用 WebDriver 和 C# 的解决方案。关键思想是从标签的“for”属性中获取复选框的 ID，并使用它来识别复选框。

只有在需要更改时，代码才会设置复选框状态。

```
public void SetCheckboxStatus(string value, bool toCheck)
{
    // Get the label containing the checkbox state
    IWebElement labelElement = this.Driver.FindElement(By.XPath(string.Format("//label[.='{0}']",value)));
    string checkboxId = labelElement.GetAttribute("for");

    IWebElement checkbox = this.Driver.FindElement(By.Id(checkboxId));

    if (toCheck != checkbox.Selected)
    {
        checkbox.Click();
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-04T09:28:30.923

这应该有帮助 -

```
IWebElement elementToClick = driver.findElement(By.xpath(""//input[contains(@id, 'lstCategory_0')]"));
elementToClick.Click(); 
```

你也可以传递一个id。

如果您想要诸如可见文本之类的内容，则可以按*名称“**查找元素*”（如果它们有名称）。

 ** * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-12-02T11:45:46.307

我发现有时 JavaScript 不允许我单击复选框，因为它是按`onchange`事件处理元素的。

这句话帮助我解决了这个问题：

```
driver.findElement(By.xpath(".//*[@id='theID']")).sendKeys(Keys.SPACE); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-04-15T08:57:17.420

下面的代码将首先获取页面上存在的所有复选框，然后取消选中所有复选框。

```
List<WebElement> allCheckbox = driver.findElements(By
    .xpath("//input[@type='checkbox']"));

for (WebElement ele : allCheckbox) {
    if (ele.isSelected()) {
        ele.click();
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-07-25T06:54:10.520

要选择一个复选框，请使用`"WebElement"`该类。

要对下拉列表进行操作，请使用`"Select"`该类。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-02-10T16:20:50.507

这是[Scott Crowe 答案](https://stackoverflow.com/questions/14682763/how-can-i-select-checkboxes-using-the-selenium-java-webdriver/19936164#19936164)的 C# 版本。我发现 IEDriver 和 ChromeDriver 都响应发送 Key.Space 而不是单击复选框。

```
if (((RemoteWebDriver)driver).Capabilities.BrowserName == "firefox")
{
    // Firefox
    driver.FindElement(By.Id("idOfTheElement")).Click();
}
else
{
    // Chrome and Internet Explorer
    driver.FindElement(By.Id("idOfTheElement")).SendKeys(Keys.Space);
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-02-27T02:26:58.653

运行这种方法实际上会切换复选框；`.isSelected()`在 Java/Selenium 2 中显然总是返回`false`（至少在我测试过的 Java、Selenium 和 Firefox 版本中）。

选择正确的复选框不是问题所在——而是正确区分初始状态以避免不必要地重新单击已选中的框。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-12-03T20:09:13.250

对于部分匹配，请执行以下操作：

```
getDriver().findElement(By.cssSelector("<tag name>[id*='id pattern to look for']")).click(); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-04-03T10:13:27.070

步骤1：

这里应该使用的*对象定位器是 XPath。*因此，为这两个复选框派生 XPath。

```
String housingmoves="//label[contains(text(),'housingmoves')]/preceding-sibling::input";
String season_country_homes="//label[contains(text(),'Seaside & Country Homes')]/preceding-sibling::input"; 
```

第2步：

单击复选框

```
driver.findElement(By.xpath(housingmoves)).click();
driver.findElement(By.xpath(season_country_homes)).click(); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-12-14T17:16:37.583

我尝试了各种方法，但没有任何效果。我不断收到“无法单击元素”或 ElementNotVisibleException。

我能够找到输入，但我无法检查它。现在，我单击包含复选框的 div，它适用于以下 HTML（基于[Bootstrap](https://en.wikipedia.org/wiki/Bootstrap_%28front-end_framework%29)的 CSS ）。

```
 @foreach (var item in Model)
 {
     <tr>
         <td>
             <div id="@item.Id" class="checkbox">
                 <label><input type="checkbox" class="selectone" value="@item.Id"></label>
             </div>
         </td>
         <td val="@item.Id">
             @item.Detail
         </td>
         <td>
             <div>@item.Desc
             </div>
         </td>
         <td>
             @Html.ActionLink("Edit", "Create", new { EditId = item.Id })
         </td>
     </tr>
 } 
```

这是 WebDriver 的代码：

```
var table = driver.FindElement(By.TagName("table"));
var tds = table.FindElements(By.TagName("td"));
var itemTds = tds.Where(t => t.Text == itemtocheck);
foreach (var td in itemTds)
{
    var CheckBoxTd = tds[tds.IndexOf(td) - 1];
    var val = td.GetAttribute("val");
    CheckBoxTd.FindElement(By.Id(val)).Click();
} 
```

在这种方法中，我将项目 id 作为 div 的 id，并为具有该 id 的 td 添加一个属性。一旦我找到需要检查的项目的 td，我可以找到该 td 之前的 div 并单击它。我们还可以使用之前支持的 XPath 查询（这里是示例[http://learn-automation.com/how-to-write-dynamic-xpath-in-selenium/](http://learn-automation.com/how-to-write-dynamic-xpath-in-selenium/)）。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-09-25T09:42:40.430

也许是一个很好的起点：

```
isChecked  = driver.findElement((By.id("idOftheElement"))).getAttribute("name");
if(!isChecked.contains("chkOptions$1"))
{
    driver.FindElement(By.Id("idOfTheElement")).Click();
} 
```*

# windows-8 - 在 Windows 8 上安装 WinPcap

> ID：14682772
> 
> 赞同：1
> 
> 时间：2013-02-04T08:17:28.687
> 
> 标签：windows-8, winpcap

有没有办法在 Windows 8 上安装 WinPcap？

由于兼容性问题，Windows 拒绝安装。尝试将兼容模式设置为“Windows 7”并以管理员身份运行，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T08:42:28.797

此问题已在WinPcap [4.1.3 版](http://www.winpcap.org/misc/changelog.htm#changelog_4_1_3)中解决- 添加了对 Windows 8 和 Server 2012 的支持

# jquery - 如何将我的控制器/功能集成到 jquery

> ID：14682775
> 
> 赞同：0
> 
> 时间：2013-02-04T08:17:54.797
> 
> 标签：jquery, codeigniter

我有这样的jquery，但它似乎无法读取控制器/函数

```
$('#submit').click(function(){

    $.ajax(
    {
    url:'controller/function',
    type:"POST",
    success:function(data){

         $(".content").load(url); 

        }
    }
    )
}); 
```

谁能告诉我出了什么问题或给出其他解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:28:19.133

这是我不久前想出的解决方案。

在你的 html 头标签中添加这个。

```
 <script>
      var site = "<?php echo site_url(); ?>";
 </script> 
```

然后在您的 .js 文件中，您可以执行以下操作：

```
$('#submit').click(function(){

    $.ajax(
    {
    url:base + 'controller/function',
    type:"POST",
    success:function(data){

         $(".content").load(url); 

        }
    }
    )
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:22:17.420

使用codeigniter 的[site_url()](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)函数...

```
<?php echo site_url('controllername/functionname') ?> 
```

> 上面的例子会返回类似：[http://example.com/index.php/controllername/functionname](http://example.com/index.php/controllername/functionname)；

尝试这个

```
$.ajax(
{
   url:<?php echo site_url('controllername/functionname') ?>,
   type:"POST",
   success:function(data){

     $(".content").load(url); 

    }
} 
```

**根据@kolby 评论更新**

如果你在单独的 js 文件中有这个脚本，那么 ..

在 head 中创建一个全局`base_url`变量，以便您在每个文件中获取此变量。

```
<head>
....//your stuff
<script>var base_url= <?php echo site_url();  ?></script>
</head> 
```

并在 ajax 中使用它

```
url:base_url+'controllername/functionname', 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T08:23:37.137

我相信你使用了错误的路径，你有firefox，你可以使用firebug来获取响应，响应代码是什么？如果你使用spring mvc和log4j，你可以将日志级别设置为调试，然后你可以看到你发送到服务器的url是什么以及它是否匹配？

# sql - 从 column1 中删除最后 2 位数字并将这 2 位数字附加到 column2

> ID：14682777
> 
> 赞同：2
> 
> 时间：2013-02-04T08:17:59.383
> 
> 标签：sql, sql-server, ssis

我有 2 列名为 column1 和 column2 的字符串数据类型。这两列都以下列方式包含数据。

**

```
Column1             Column2  
ABCD12              5678ABC  
ABCD99              2341KFJ
GDHF33              1233DFG 
```

**

现在我想从第 1 列中删除最后 2 位数字并将其附加到第 2 列。我的数据必须以这种方式。

**

```
Column1             Column2  
ABCD              12 5678ABC  
ABCD              99 2341KFJ
GDHF              33 1233DFG 
```

**

这如何在 SQL Server 和 SSIS 中完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T08:21:23.203

如果最后两位数是固定的，则可以使用`LEFT`和`RIGHT`功能。

```
SELECT LEFT(Column1, LEN(Column1) - 2) Edited_Column1,
       RIGHT(Column1, 2) + ' ' + Column2 Edited_Column2
FROM   table1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/308ee/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:49:43.050

```
SELECT LEFT(Column1, LEN(Column1) - 2) Column1,
       RIGHT(Column1, 2) + ' ' + Column2 Column2
FROM   table1 
```

# python - 从一个地方重定向到另一个地方

> ID：14682780
> 
> 赞同：1
> 
> 时间：2013-02-04T08:18:12.273
> 
> 标签：python, html, django, web

我在 html 文件中有一个按钮定义为；

```
<input type="submit" value="Log In" name="login_button" style="width: 109px; "/> 
```

此按钮位于 sample.com 上。用户来并单击此按钮，然后当前网页，`http://127.0.0.1:8000/sample`更改为`http://127.0.0.1:8000/sample2`，在 login.html 中定义。出于这个原因，我做了；

```
def auth(request):
  if 'login_button' in request.POST:
    // redirect the web page to the sample2.com
  return render_to_response('login.html', {} ) 
```

我试过`redirect("http://127.0.0.1:8000/sample2`），但它不起作用。我怎样才能转到另一个页面。

此函数上定义的其他网页

```
 def message(request):
          current_date_T = Template ("<p style=\"text-align: right;\">\
                                {{Date|truncatewords:\"8\"}}\
                            </p>")

          # --
          return HttpResponse(html) 
```

网址文件

```
 urlpatterns = patterns('',
            ('^sample2/$', message),
            ('^sample/$', auth),
  ) 
```

首先打开的页面是示例，其中有一个按钮。单击示例上的按钮后，将调用 Sample2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T08:40:12.360

你只需要[`redirect`](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#redirect)而不是`render_to_response`. 尝试以下操作：

```
def auth(request):
    if 'login_button' in request.POST:
        # redirect the web page to the /sample2
        return redirect('/sample2/')
    else:
        # Do something else 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T08:39:26.883

首先为您的网址定义名称：

```
urlpatterns = patterns('',
    url('^sample2/$', message, name="message_view"),
    url('^sample/$', authentication, name="auth_view"),
) 
```

然后使用 url 反向解析技术来获取使用 url 名称的视图的 url：

```
def auth(request):
    if request.method == 'POST':
        // redirect the web page to the sample2.com
        return redirect(reverse('message_view'))
    return render_to_response('login.html', {} ) 
```

我不知道这里重定向的目的是什么。但这就是它的工作原理。

# php - 使用 pdo 和 mysql 插入 3 个不同的表

> ID：14682781
> 
> 赞同：-1
> 
> 时间：2013-02-04T08:18:14.577
> 
> 标签：php, mysql

我正在使用 php mysql，我试图插入 3 个不同的表，但第三个表没有接收值，这是最后一个表。想法是我想在创建新表时将 user_id 插入到所有表中用户的帐户，这样当我想更新其他字段时，我只需引用那个 user_id，它是那些其他表中的外键。贝娄是我的代码：

```
<?php
    #connect to the db
    require_once('db.inc.php');
?>

<?php 
    $date_created = date('y-m-d h:i:s a');
    $username = (isset($_POST['username'])) ? trim($_POST['username']): '';
    $Previllage =(isset($_POST['Previllage']))? trim($_POST['Previllage']): '';

    #second tanble values 
    $title=(isset($_POST['title']))? trim($_POST['title']): '';
    $firstname=(isset($_POST['firstname']))? trim($_POST['firstname']): '';
    $lastname=(isset($_POST['lastname']))? trim($_POST['lastname']): '';
    $client_code=(isset($_POST['client_code']))? trim($_POST['client_code']): '';
    $job_approval=(isset($_POST['job_approval']))? trim($_POST['job_approval']): '';
    $address=(isset($_POST['address']))? trim($_POST['address']): '';
    $cell=(isset($_POST['cell']))? trim($_POST['cell']): '';
    $tel=(isset($_POST['tel']))? trim($_POST['tel']): '';
    $email=(isset($_POST['email']))? trim($_POST['email']): '';
    $company=(isset($_POST['company']))? trim($_POST['company']): '';
    $province=(isset($_POST['province']))? trim($_POST['province']): '';
    $ip_address=$SERVER['REMOTE_ADDR'];

    if(empty($_POST['firstname'])){
        exit();
    }

    #check box 
    if(isset($_POST['department_type'])) {
        $value = implode(",", $_POST['department_type']);   
    } else {
        $value = "";
    }
    #check box 

    #Image code 
    $target ='../t/images/';
    $target = $target.basename($_FILES['imagename']['name']);
    $pic = ($_FILES['imagename']['name']);
    ########################################################
    #end

    try {
        $query="INSERT INTO tish_user(username,Previllage,date_created)
                VALUES(:username,:Previllage,:date_created)";
        $insert = $con->prepare($query);
        $insert->execute(array(
                    ':username'=>$username,
                    ':Previllage'=>$Previllage,
                    ':date_created'=>$date_created)
                );

        # insert into another table
        $query="INSERT INTO tish_clientinfor(
                user_id,title,firstname,lastname,
                client_code,department_type,job_approval,province,
                company,address,cell,tel,email,date_registered)
                VALUES(
                LAST_INSERT_ID(),
                :title,:firstname,:lastname,
                :client_code,:department_type,:job_approval,:province,:company,:address,
                :cell,:tel,:email,
                :date_registered)";

        $insert = $con->prepare($query);
        $insert->execute(array(
                    ':title'=>$title,
                    ':firstname'=>$firstname,
                    ':lastname'=>$lastname,
                    ':client_code'=>$client_code,
                    ':department_type'=>$value,
                    ':job_approval'=>$job_approval,
                    ':province'=>$province,
                    ':company'=>$company,
                    ':address'=>$address,
                    ':cell'=>$cell,
                    ':tel'=>$tel,
                    ':email'=>$email,
                    ':date_registered'=>$date_created)
                );

        #intert into the security table 
        $query = "INSERT INTO tish_security(ip_address,user_id,date_registered)
                VALUES(
                :ip_address,
                LAST_INSERT_ID(),
                :date_registered)";
        $insert = $con->prepare($query);
        $insert->execute(array(
                    ':ip_address'=>$ip_address,
                    ':date_registered'=>$date_created)
                );

        # insert into another table
    } catch(PDOException $e) {
        echo $e->getMessage();
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:23:22.107

在您的第三个查询中，当您使用`LAST_INSERT_ID()`它时，它会获取之前插入查询中的记录的 ID，即第二个查询，而不是第一个查询。您需要在第一个查询之后进行单独的查询以获取`LAST_INSERT_ID()`，将其存储在 PHP 中的变量中，并在其他两个查询中使用它。

# qt - 加载共享库时出错：libstdc++.so ------ 困惑..？

> ID：14682783
> 
> 赞同：1
> 
> 时间：2013-02-04T08:18:20.737
> 
> 标签：qt, cross-compiling, raspberry-pi, raspbian, scratchbox

我已经使用以下链接构建了我的工具链，启用了交叉编译器 c++ 支持：----- [http://www.bootc.net/archives/2012/05/26/how-to-build-a-cross-compiler -为你的树莓派/](http://www.bootc.net/archives/2012/05/26/how-to-build-a-cross-compiler-for-your-raspberry-pi/)

我正在使用 Scratchbox 和 Qemu。

现在我在 Scratchbox2 中编译我的代码，c++ 代码正在编译但无法运行它会抛出这个错误：-------

```
./a.out: error while loading shared libraries: libstdc++.so 
```

编译器版本 :-----------------

```
[SB2 simple armhf] ignite@ignite testing $ g++ --version
arm-unknown-linux-gnueabi-g++ (crosstool-NG 1.17.0) 4.7.3 20121001 (prerelease)
Copyright (C) 2012 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

编译成功:----------------

> [SB2 简单 armhf] ignite@ignite 测试 $ g++ new.cpp

输出文件格式：----------------

```
[SB2 simple armhf] ignite@ignite testing $ file a.out
a.out: ELF 32-bit LSB executable, ARM, version 1 (SYSV), dynamically
linked (uses shared libs), for GNU/Linux 3.6.3, not stripped 
```

抛出错误：---------

```
[SB2 simple armhf] ignite@ignite testing $ ./a.out
./a.out: error while loading shared libraries: libstdc++.so.6: cannot
open shared object file: No such file or directory 
```

当我运行此命令时：--------- >>> whereis libstdc++.so 它显示了库

```
[SB2 simple armhf] ignite@ignite testing $ whereis libstdc++.so
libstdc++:
[SB2 simple armhf] ignite@ignite testing $ 
```

即使我运行 ldconfig -v 也有同样的错误：-----

```
[SB2 simple armhf] ignite@ignite testing $ ldconfig -v
/home/ignite/sbox2/rootfs/armhf/sbin/ldconfig: Can't open configuration file /home/ignite/sbox2/rootfs/armhf/etc/ld.so.conf: No such file or directory
/lib/arm-linux-gnueabihf:
    libpcprofile.so -> libpcprofile.so
    libcrypt.so.1 -> libcrypt-2.13.so
    libdl.so.2 -> libdl-2.13.so
    libSegFault.so -> libSegFault.so
    libmount.so.1 -> libmount.so.1.1.0
    libnsl.so.1 -> libnsl-2.13.so
    libncurses.so.5 -> libncurses.so.5.9
    libmemusage.so -> libmemusage.so
    libpamc.so.0 -> libpamc.so.0.82.1
    libz.so.1 -> libz.so.1.2.7
    libuuid.so.1 -> libuuid.so.1.3.0
    libattr.so.1 -> libattr.so.1.1.0
    libresolv.so.2 -> libresolv-2.13.so
    libncursesw.so.5 -> libncursesw.so.5.9
    libprocps.so.0 -> libprocps.so.0.0.1
    libcom_err.so.2 -> libcom_err.so.2.1
    libsepol.so.1 -> libsepol.so.1
    libbz2.so.1.0 -> libbz2.so.1.0.4
    libnss_files.so.2 -> libnss_files-2.13.so
    libpthread.so.0 -> libpthread-2.13.so
    libss.so.2 -> libss.so.2.0
    libdbus-1.so.3 -> libdbus-1.so.3.7.2
    libacl.so.1 -> libacl.so.1.1.0
    libpam.so.0 -> libpam.so.0.83.0
    libBrokenLocale.so.1 -> libBrokenLocale-2.13.so
    liblzma.so.5 -> liblzma.so.5.0.0
    librt.so.1 -> librt-2.13.so
    libudev.so.0 -> libudev.so.0.13.0
    libgcc_s.so.1 -> libgcc_s.so.1
    libanl.so.1 -> libanl-2.13.so
    libm.so.6 -> libm-2.13.so
    libnss_hesiod.so.2 -> libnss_hesiod-2.13.so
    libselinux.so.1 -> libselinux.so.1
    libpam_misc.so.0 -> libpam_misc.so.0.82.0
    libext2fs.so.2 -> libext2fs.so.2.4
    libnss_nisplus.so.2 -> libnss_nisplus-2.13.so
    libkmod.so.2 -> libkmod.so.2.1.3
    ld-linux-armhf.so.3 -> ld-2.13.so
    libply-splash-core.so.2 -> libply-splash-core.so.2.1.0
    libnss_compat.so.2 -> libnss_compat-2.13.so
    libslang.so.2 -> libslang.so.2.2.4
    libtinfo.so.5 -> libtinfo.so.5.9
    libnss_nis.so.2 -> libnss_nis-2.13.so
    libnss_dns.so.2 -> libnss_dns-2.13.so
    libc.so.6 -> libc-2.13.so
    libblkid.so.1 -> libblkid.so.1.1.0
    libutil.so.1 -> libutil-2.13.so
    libthread_db.so.1 -> libthread_db-1.0.so
    libcidn.so.1 -> libcidn-2.13.so
    libe2p.so.2 -> libe2p.so.2.3
    libply.so.2 -> libply.so.2.1.0
/usr/lib/arm-linux-gnueabihf:
    libpanel.so.5 -> libpanel.so.5.9
    libformw.so.5 -> libformw.so.5.9
    libsemanage.so.1 -> libsemanage.so.1
    libtic.so.5 -> libtic.so.5.9
    libustr-1.0.so.1 -> libustr-1.0.so.1.0.4
    libmenu.so.5 -> libmenu.so.5.9
    libmenuw.so.5 -> libmenuw.so.5.9
    libply-boot-client.so.2 -> libply-boot-client.so.2.1.0
    libdb-5.1.so -> libdb-5.1.so
    libform.so.5 -> libform.so.5.9
    libpanelw.so.5 -> libpanelw.so.5.9
/lib:
    libnih-dbus.so.1 -> libnih-dbus.so.1.0.0
    libnih.so.1 -> libnih.so.1.0.0
/usr/lib:
    libperl.so.5.14 -> libperl.so.5.14.2
[SB2 simple armhf] ignite@ignite testing $ g++ new.cpp
[SB2 simple armhf] ignite@ignite testing $ ./a.out 
./a.out: error while loading shared libraries: libstdc++.so.6: cannot open shared object file: No such file or directory
[SB2 simple armhf] ignite@ignite testing $ 
```

请建议做什么....？

任何建议为什么会出现此错误。请建议。

交叉编译器配置文件：-----
[http://www.bootc.net/archives/2012/05/26/how-to-build-a-cross-compiler-for-your-raspberry-pi/](http://www.bootc.net/archives/2012/05/26/how-to-build-a-cross-compiler-for-your-raspberry-pi/)

```
#
# Automatically generated make config: don't edit
# crosstool-NG 1.17.0 Configuration
# Mon Feb  4 10:09:28 2013
#
CT_CONFIGURE_has_xz=y
CT_MODULES=y

#
# Paths and misc options
#

#
# crosstool-NG behavior
#
# CT_OBSOLETE is not set
CT_EXPERIMENTAL=y
# CT_DEBUG_CT is not set

#
# Paths
#
CT_LOCAL_TARBALLS_DIR=""
CT_CUSTOM_LOCATION_ROOT_DIR=""
CT_WORK_DIR="${CT_TOP_DIR}/.build"
CT_PREFIX_DIR="/opt/cross/x-tools_4_13_libc/${CT_TARGET}"
CT_INSTALL_DIR="${CT_PREFIX_DIR}"
CT_RM_RF_PREFIX_DIR=y
CT_REMOVE_DOCS=y
CT_INSTALL_DIR_RO=y
CT_STRIP_ALL_TOOLCHAIN_EXECUTABLES=y

#
# Downloading
#
# CT_FORBID_DOWNLOAD is not set
# CT_FORCE_DOWNLOAD is not set
CT_CONNECT_TIMEOUT=10
# CT_ONLY_DOWNLOAD is not set
# CT_USE_MIRROR is not set

#
# Extracting
#
# CT_FORCE_EXTRACT is not set
CT_OVERIDE_CONFIG_GUESS_SUB=y
# CT_ONLY_EXTRACT is not set
CT_PATCH_BUNDLED=y
# CT_PATCH_LOCAL is not set
# CT_PATCH_BUNDLED_LOCAL is not set
# CT_PATCH_LOCAL_BUNDLED is not set
# CT_PATCH_BUNDLED_FALLBACK_LOCAL is not set
# CT_PATCH_LOCAL_FALLBACK_BUNDLED is not set
# CT_PATCH_NONE is not set
CT_PATCH_ORDER="bundled"

#
# Build behavior
#
CT_PARALLEL_JOBS=0
CT_LOAD=0
CT_USE_PIPES=y
CT_EXTRA_FLAGS_FOR_HOST=""
# CT_CONFIG_SHELL_SH is not set
# CT_CONFIG_SHELL_ASH is not set
CT_CONFIG_SHELL_BASH=y
# CT_CONFIG_SHELL_CUSTOM is not set
CT_CONFIG_SHELL="${bash}"

#
# Logging
#
# CT_LOG_ERROR is not set
# CT_LOG_WARN is not set
CT_LOG_INFO=y
# CT_LOG_EXTRA is not set
# CT_LOG_ALL is not set
# CT_LOG_DEBUG is not set
CT_LOG_LEVEL_MAX="INFO"
# CT_LOG_SEE_TOOLS_WARN is not set
CT_LOG_PROGRESS_BAR=y
CT_LOG_TO_FILE=y
CT_LOG_FILE_COMPRESS=y

#
# Target options
#
CT_ARCH="arm"
CT_ARCH_SUPPORTS_BOTH_MMU=y
CT_ARCH_SUPPORTS_BOTH_ENDIAN=y
CT_ARCH_SUPPORTS_32=y
CT_ARCH_SUPPORTS_WITH_ARCH=y
CT_ARCH_SUPPORTS_WITH_CPU=y
CT_ARCH_SUPPORTS_WITH_TUNE=y
CT_ARCH_SUPPORTS_WITH_FLOAT=y
CT_ARCH_SUPPORTS_WITH_FPU=y
CT_ARCH_SUPPORTS_SOFTFP=y
CT_ARCH_DEFAULT_HAS_MMU=y
CT_ARCH_DEFAULT_LE=y
CT_ARCH_DEFAULT_32=y
CT_ARCH_ARCH="armv6zk"
CT_ARCH_CPU="arm1176jzf-s"
CT_ARCH_TUNE="arm1176jzf-s"
CT_ARCH_FPU="vfp"
# CT_ARCH_BE is not set
CT_ARCH_LE=y
CT_ARCH_32=y
CT_ARCH_BITNESS=32
CT_ARCH_FLOAT_HW=y
# CT_ARCH_FLOAT_SW is not set
CT_TARGET_CFLAGS=""
CT_TARGET_LDFLAGS=""
# CT_ARCH_alpha is not set
CT_ARCH_arm=y
# CT_ARCH_avr32 is not set
# CT_ARCH_blackfin is not set
# CT_ARCH_m68k is not set
# CT_ARCH_microblaze is not set
# CT_ARCH_mips is not set
# CT_ARCH_powerpc is not set
# CT_ARCH_s390 is not set
# CT_ARCH_sh is not set
# CT_ARCH_sparc is not set
# CT_ARCH_x86 is not set
CT_ARCH_alpha_AVAILABLE=y
CT_ARCH_arm_AVAILABLE=y
CT_ARCH_avr32_AVAILABLE=y
CT_ARCH_blackfin_AVAILABLE=y
CT_ARCH_m68k_AVAILABLE=y
CT_ARCH_microblaze_AVAILABLE=y
CT_ARCH_mips_AVAILABLE=y
CT_ARCH_powerpc_AVAILABLE=y
CT_ARCH_s390_AVAILABLE=y
CT_ARCH_sh_AVAILABLE=y
CT_ARCH_sparc_AVAILABLE=y
CT_ARCH_x86_AVAILABLE=y

#
# Generic target options
#
# CT_MULTILIB is not set
CT_ARCH_USE_MMU=y
CT_ARCH_ENDIAN="little"

#
# Target optimisations
#
# CT_ARCH_FLOAT_SOFTFP is not set
CT_ARCH_FLOAT="hard"

#
# arm other options
#
CT_ARCH_ARM_MODE="arm"
CT_ARCH_ARM_MODE_ARM=y
# CT_ARCH_ARM_MODE_THUMB is not set
# CT_ARCH_ARM_INTERWORKING is not set
CT_ARCH_ARM_EABI=y

#
# Toolchain options
#

#
# General toolchain options
#
CT_FORCE_SYSROOT=y
CT_USE_SYSROOT=y
CT_SYSROOT_NAME="sysroot"
CT_SYSROOT_DIR_PREFIX=""
CT_WANTS_STATIC_LINK=y
# CT_STATIC_TOOLCHAIN is not set
CT_TOOLCHAIN_PKGVERSION=""
CT_TOOLCHAIN_BUGURL=""

#
# Tuple completion and aliasing
#
CT_TARGET_VENDOR="unknown"
CT_TARGET_ALIAS_SED_EXPR=""
CT_TARGET_ALIAS=""

#
# Toolchain type
#
# CT_NATIVE is not set
CT_CROSS=y
# CT_CROSS_NATIVE is not set
# CT_CANADIAN is not set
CT_TOOLCHAIN_TYPE="cross"

#
# Build system
#
CT_BUILD=""
CT_BUILD_PREFIX=""
CT_BUILD_SUFFIX=""

#
# Misc options
#
# CT_TOOLCHAIN_ENABLE_NLS is not set

#
# Operating System
#
CT_KERNEL_SUPPORTS_SHARED_LIBS=y
CT_KERNEL="linux"
CT_KERNEL_VERSION="3.6.3"
# CT_KERNEL_bare_metal is not set
CT_KERNEL_linux=y
CT_KERNEL_bare_metal_AVAILABLE=y
CT_KERNEL_linux_AVAILABLE=y
CT_KERNEL_V_3_6_3=y
# CT_KERNEL_V_3_6_2 is not set
# CT_KERNEL_V_3_6_1 is not set
# CT_KERNEL_V_3_6 is not set
# CT_KERNEL_V_3_5_7 is not set
# CT_KERNEL_V_3_4_15 is not set
# CT_KERNEL_V_3_3_8 is not set
# CT_KERNEL_V_3_2_32 is not set
# CT_KERNEL_V_3_1_10 is not set
# CT_KERNEL_V_3_0_48 is not set
# CT_KERNEL_V_2_6_39_4 is not set
# CT_KERNEL_V_2_6_38_8 is not set
# CT_KERNEL_V_2_6_37_6 is not set
# CT_KERNEL_V_2_6_36_4 is not set
# CT_KERNEL_V_2_6_33_20 is not set
# CT_KERNEL_V_2_6_32_60 is not set
# CT_KERNEL_V_2_6_31_14 is not set
# CT_KERNEL_V_2_6_27_62 is not set
# CT_KERNEL_LINUX_CUSTOM is not set
CT_KERNEL_mingw32_AVAILABLE=y

#
# Common kernel options
#
CT_SHARED_LIBS=y

#
# linux other options
#
CT_KERNEL_LINUX_VERBOSITY_0=y
# CT_KERNEL_LINUX_VERBOSITY_1 is not set
# CT_KERNEL_LINUX_VERBOSITY_2 is not set
CT_KERNEL_LINUX_VERBOSE_LEVEL=0
CT_KERNEL_LINUX_INSTALL_CHECK=y

#
# Binary utilities
#
CT_ARCH_BINFMT_ELF=y

#
# GNU binutils
#
# CT_BINUTILS_V_2_22 is not set
# CT_BINUTILS_V_2_21_53 is not set
CT_BINUTILS_V_2_21_1a=y
# CT_BINUTILS_V_2_20_1a is not set
# CT_BINUTILS_V_2_19_1a is not set
# CT_BINUTILS_V_2_18a is not set
# CT_BINUTILS_CUSTOM is not set
CT_BINUTILS_VERSION="2.21.1a"
CT_BINUTILS_2_21_or_later=y
CT_BINUTILS_2_20_or_later=y
CT_BINUTILS_2_19_or_later=y
CT_BINUTILS_2_18_or_later=y
CT_BINUTILS_HAS_HASH_STYLE=y
CT_BINUTILS_HAS_GOLD=y
CT_BINUTILS_GOLD_SUPPORTS_ARCH=y
CT_BINUTILS_HAS_PLUGINS=y
CT_BINUTILS_HAS_PKGVERSION_BUGURL=y
CT_BINUTILS_FORCE_LD_BFD=y
CT_BINUTILS_LINKER_LD=y
# CT_BINUTILS_LINKER_LD_GOLD is not set
# CT_BINUTILS_LINKER_GOLD_LD is not set
CT_BINUTILS_LINKERS_LIST="ld"
CT_BINUTILS_LINKER_DEFAULT="bfd"
# CT_BINUTILS_PLUGINS is not set
CT_BINUTILS_EXTRA_CONFIG_ARRAY=""
# CT_BINUTILS_FOR_TARGET is not set

#
# C compiler
#
CT_CC="gcc"
CT_CC_VERSION="linaro-4.7-2012.10"
CT_CC_gcc=y
CT_CC_GCC_SHOW_LINARO=y
CT_CC_V_linaro_4_7_2012_10=y
# CT_CC_V_4_7_2 is not set
# CT_CC_V_4_7_1 is not set
# CT_CC_V_4_7_0 is not set
# CT_CC_V_linaro_4_6_2012_10 is not set
# CT_CC_V_4_6_3 is not set
# CT_CC_V_4_6_2 is not set
# CT_CC_V_4_6_1 is not set
# CT_CC_V_4_6_0 is not set
# CT_CC_V_linaro_4_5_2012_03 is not set
# CT_CC_V_4_5_3 is not set
# CT_CC_V_4_5_2 is not set
# CT_CC_V_4_5_1 is not set
# CT_CC_V_4_5_0 is not set
# CT_CC_V_linaro_4_4_2011_02_0 is not set
# CT_CC_V_4_4_7 is not set
# CT_CC_V_4_4_6 is not set
# CT_CC_V_4_4_5 is not set
# CT_CC_V_4_4_4 is not set
# CT_CC_V_4_4_3 is not set
# CT_CC_V_4_4_2 is not set
# CT_CC_V_4_4_1 is not set
# CT_CC_V_4_4_0 is not set
# CT_CC_V_4_3_6 is not set
# CT_CC_V_4_3_5 is not set
# CT_CC_V_4_3_4 is not set
# CT_CC_V_4_3_3 is not set
# CT_CC_V_4_3_2 is not set
# CT_CC_V_4_3_1 is not set
# CT_CC_V_4_2_4 is not set
# CT_CC_V_4_2_2 is not set
# CT_CC_CUSTOM is not set
CT_CC_GCC_4_2_or_later=y
CT_CC_GCC_4_3_or_later=y
CT_CC_GCC_4_4_or_later=y
CT_CC_GCC_4_5_or_later=y
CT_CC_GCC_4_6_or_later=y
CT_CC_GCC_4_7=y
CT_CC_GCC_4_7_or_later=y
CT_CC_GCC_HAS_GRAPHITE=y
CT_CC_GCC_HAS_LTO=y
CT_CC_GCC_HAS_PKGVERSION_BUGURL=y
CT_CC_GCC_HAS_BUILD_ID=y
CT_CC_GCC_HAS_LNK_HASH_STYLE=y
CT_CC_GCC_USE_GMP_MPFR=y
CT_CC_GCC_USE_PPL_CLOOG=y
CT_CC_GCC_USE_MPC=y
CT_CC_GCC_HAS_LIBQUADMATH=y
# CT_CC_LANG_FORTRAN is not set
CT_CC_SUPPORT_CXX=y
CT_CC_SUPPORT_FORTRAN=y
CT_CC_SUPPORT_JAVA=y
CT_CC_SUPPORT_ADA=y
CT_CC_SUPPORT_OBJC=y
CT_CC_SUPPORT_OBJCXX=y

#
# Additional supported languages:
#
CT_CC_LANG_CXX=y
# CT_CC_LANG_JAVA is not set
# CT_CC_LANG_ADA is not set
# CT_CC_LANG_OBJC is not set
# CT_CC_LANG_OBJCXX is not set
CT_CC_LANG_OTHERS=""

#
# gcc other options
#
CT_CC_ENABLE_CXX_FLAGS=""
CT_CC_CORE_EXTRA_CONFIG_ARRAY=""
CT_CC_EXTRA_CONFIG_ARRAY=""
CT_CC_STATIC_LIBSTDCXX=y
# CT_CC_GCC_SYSTEM_ZLIB is not set

#
# Optimisation features
#
CT_CC_GCC_USE_GRAPHITE=y
CT_CC_GCC_USE_LTO=y

#
# Settings for libraries running on target
#
CT_CC_GCC_ENABLE_TARGET_OPTSPACE=y
# CT_CC_GCC_LIBMUDFLAP is not set
# CT_CC_GCC_LIBGOMP is not set
# CT_CC_GCC_LIBSSP is not set
# CT_CC_GCC_LIBQUADMATH is not set

#
# Misc. obscure options.
#
CT_CC_CXA_ATEXIT=y
# CT_CC_GCC_DISABLE_PCH is not set
CT_CC_GCC_SJLJ_EXCEPTIONS=m
CT_CC_GCC_LDBL_128=m
# CT_CC_GCC_BUILD_ID is not set
CT_CC_GCC_LNK_HASH_STYLE_DEFAULT=y
# CT_CC_GCC_LNK_HASH_STYLE_SYSV is not set
# CT_CC_GCC_LNK_HASH_STYLE_GNU is not set
# CT_CC_GCC_LNK_HASH_STYLE_BOTH is not set
CT_CC_GCC_LNK_HASH_STYLE=""

#
# C-library
#
CT_LIBC="eglibc"
CT_LIBC_VERSION="2_13"
CT_LIBC_eglibc=y
# CT_LIBC_glibc is not set
# CT_LIBC_uClibc is not set
CT_LIBC_eglibc_AVAILABLE=y
# CT_LIBC_EGLIBC_V_2_16 is not set
# CT_LIBC_EGLIBC_V_2_15 is not set
# CT_LIBC_EGLIBC_V_2_14 is not set
CT_LIBC_EGLIBC_V_2_13=y
# CT_LIBC_EGLIBC_V_2_12 is not set
# CT_LIBC_EGLIBC_V_2_11 is not set
# CT_LIBC_EGLIBC_V_2_10 is not set
# CT_LIBC_EGLIBC_V_2_9 is not set
# CT_LIBC_EGLIBC_V_TRUNK is not set
CT_LIBC_EGLIBC_2_13_or_later=y
CT_LIBC_EGLIBC_2_12_or_later=y
CT_LIBC_EGLIBC_2_11_or_later=y
CT_LIBC_EGLIBC_2_10_or_later=y
CT_LIBC_EGLIBC_2_9_or_later=y
CT_LIBC_EGLIBC_HAS_PKGVERSION_BUGURL=y

#
# svn is missing. You'll have to either:
#

#
#   - have a pre-downloaded local tarball
#

#
#   - or have a LAN mirror with a pre-downloaded tarball
#

#
# otherwise you won't be able to download eglibc
#
# CT_EGLIBC_OPT_SIZE is not set
# CT_EGLIBC_CUSTOM_CONFIG is not set
CT_LIBC_glibc_AVAILABLE=y
CT_LIBC_mingw_AVAILABLE=y
CT_LIBC_newlib_AVAILABLE=y
CT_LIBC_none_AVAILABLE=y
CT_LIBC_uClibc_AVAILABLE=y
CT_LIBC_SUPPORT_THREADS_ANY=y
CT_LIBC_SUPPORT_NPTL=y
CT_LIBC_SUPPORT_LINUXTHREADS=y
CT_THREADS="nptl"

#
# Common C library options
#
CT_THREADS_NPTL=y
# CT_THREADS_LINUXTHREADS is not set
CT_LIBC_XLDD=y

#
# eglibc other options
#
CT_LIBC_GLIBC_MAY_FORCE_PORTS=y
CT_LIBC_glibc_familly=y
CT_LIBC_GLIBC_EXTRA_CONFIG_ARRAY=""
CT_LIBC_GLIBC_CONFIGPARMS=""
CT_LIBC_GLIBC_EXTRA_CFLAGS=""
CT_LIBC_EXTRA_CC_ARGS=""
# CT_LIBC_ENABLE_FORTIFIED_BUILD is not set
# CT_LIBC_DISABLE_VERSIONING is not set
CT_LIBC_OLDEST_ABI=""
CT_LIBC_GLIBC_FORCE_UNWIND=y
CT_LIBC_GLIBC_USE_PORTS=y
CT_LIBC_ADDONS_LIST=""

#
# WARNING !!!                                            
#

#
#   For glibc >= 2.8, it can happen that the tarballs    
#

#
#   for the addons are not available for download.       
#

#
#   If that happens, bad luck... Try a previous version  
#

#
#   or try again later... :-(                            
#
# CT_LIBC_LOCALES is not set
# CT_LIBC_GLIBC_KERNEL_VERSION_NONE is not set
CT_LIBC_GLIBC_KERNEL_VERSION_AS_HEADERS=y
# CT_LIBC_GLIBC_KERNEL_VERSION_CHOSEN is not set
CT_LIBC_GLIBC_MIN_KERNEL="3.6.3"

#
# Debug facilities
#
# CT_DEBUG_dmalloc is not set
# CT_DEBUG_duma is not set
# CT_DEBUG_gdb is not set
# CT_DEBUG_ltrace is not set
# CT_DEBUG_strace is not set

#
# Companion libraries
#
CT_COMPLIBS_NEEDED=y
CT_GMP_NEEDED=y
CT_MPFR_NEEDED=y
CT_PPL_NEEDED=y
CT_CLOOG_NEEDED=y
CT_MPC_NEEDED=y
CT_COMPLIBS=y
CT_GMP=y
CT_MPFR=y
CT_PPL=y
CT_CLOOG=y
CT_MPC=y
CT_GMP_V_5_0_2=y
# CT_GMP_V_5_0_1 is not set
# CT_GMP_V_4_3_2 is not set
# CT_GMP_V_4_3_1 is not set
# CT_GMP_V_4_3_0 is not set
CT_GMP_VERSION="5.0.2"
CT_MPFR_V_3_1_0=y
# CT_MPFR_V_3_0_1 is not set
# CT_MPFR_V_3_0_0 is not set
# CT_MPFR_V_2_4_2 is not set
# CT_MPFR_V_2_4_1 is not set
# CT_MPFR_V_2_4_0 is not set
CT_MPFR_VERSION="3.1.0"
CT_PPL_V_0_11_2=y
# CT_PPL_V_0_11_1 is not set
# CT_PPL_V_0_11 is not set
# CT_PPL_V_0_10_2 is not set
CT_PPL_VERSION="0.11.2"
CT_PPL_0_11=y
CT_PPL_NEEDS_LIBPWL=y
CT_CLOOG_V_0_15_11=y
# CT_CLOOG_V_0_15_10 is not set
# CT_CLOOG_V_0_15_9 is not set
# CT_CLOOG_V_0_15_8 is not set
# CT_CLOOG_V_0_15_7 is not set
# CT_CLOOG_V_0_15_6 is not set
CT_CLOOG_VERSION="0.15.11"
CT_CLOOG_0_15_1x=y
CT_CLOOG_NEEDS_AUTORECONF=y
CT_MPC_V_0_9=y
# CT_MPC_V_0_8_2 is not set
# CT_MPC_V_0_8_1 is not set
# CT_MPC_V_0_7 is not set
CT_MPC_VERSION="0.9"

#
# Companion libraries common options
#
# CT_COMPLIBS_CHECK is not set

#
# Companion tools
#

#
# READ HELP before you say 'Y' below !!!
#
# CT_COMP_TOOLS is not set

#
# Test suite
#
# CT_TEST_SUITE_GCC is not set 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:24:04.717

看起来您根本没有目标 libstdc++.so.6。（“在目标上”的意思是“在 Raspberry Pi 上”。）

如果您的 Raspberry 运行 Debian 或 Ubuntu，请尝试`apt-get install libstdc++6`使用它。

您还可以尝试静态编译您的程序，`g++ -static -static-libstdc++ new.cpp`如果您在编译系统上有要链接的静态库，则应该使用该程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:28:30.120

您正在执行主机系统中的所有命令。您需要退出 Scratchbox 的命令模式并执行：

```
sb2 -e ./a.out 
```

在目标中执行文件。

您对“whereis libstdc++.so”的回复并未告诉您该库存在。这是一个空的位置集，表示它找不到这样的东西。例如，尝试“whereis ls”以查看显示命令路径的非空集。

要将 libstdc++6 安装到您需要发出的目标中：

```
sb2 -eR apt-get install libstdc++6 
```

# c# - 如何将二维数组分配给 datagridview？

> ID：14682784
> 
> 赞同：0
> 
> 时间：2013-02-04T08:18:21.243
> 
> 标签：c#, datagridview, multidimensional-array

我有 6 列，其中第一列是文本框单元格，其余的是复选框。我想把二维数组的值放到数据网格中。

```
string[,] debugger={{"name","0","0","1","1","0"}}; 
```

0=false 1=true（我从 datagridview 属性窗口分配了 false 值和 true 值。当我尝试这个时，它给了我一个格式异常？

```
grdFont.ColumnCount=6;
            var row = new DataGridViewRow();
            row.Cells.Add(new DataGridViewTextBoxCell()
            {
               Value = debugger[0] 
            });
            row.Cells.Add(new DataGridViewCheckBoxCell()
            {
                Value = debugger[1]
            });
            row.Cells.Add(new DataGridViewCheckBoxCell()
            {
                Value = debugger[2]
            });
            row.Cells.Add(new DataGridViewCheckBoxCell()
            {
                Value = debugger[3]
            });
            row.Cells.Add(new DataGridViewCheckBoxCell()
            {
                Value = debugger[4]
            });
            row.Cells.Add(new DataGridViewCheckBoxCell()
            {
                Value = debugger[5]
            });
            grdFont.Rows.Add(row); 
```

还有另一种方法可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:29:14.060

0`false`不等于 ， 1 不等于`true`。编写一个函数将这些数字转换为`Boolean`值：

```
public bool ConvertNumberToBoolean(int number)
{
    if (number == 0)
    {
        return false;
    }
    else
    {
        return true;
    }
} 
```

为单元格设置值时使用此函数：

```
row.Cells.Add(new DataGridViewCheckBoxCell()
{
    Value = ConvertNumberToBoolean(Convert.ToInt32(debugger[1]));
}); 
```

这是一个非常基本的认识，但我相信你明白了

# node.js - Node.js + 处理（.js）

> ID：14682786
> 
> 赞同：3
> 
> 时间：2013-02-04T08:18:22.830
> 
> 标签：node.js, processing

**node.js 新手**

我试图通过 node.js与[processing](http://processing.org/)和[processing.js交互，但没有成功。](http://processingjs.org/)

***如果我将 index.html 直接打开到浏览器中，我的测试工作正常***，但是当我尝试使用节点（localhost:8080 上的节点 sample.js）时，activity.pde 无法正确加载

我有一个这样的sample.js：

```
var http = require('http'),
    url = require('url'),
    fs = require('fs'),
    io = require('socket.io'),
    sys = require(process.binding('natives').util ? 'util' : 'sys');

send404 = function(res) {
    res.writeHead(404);
    res.write('404');
    res.end();
};

server = http.createServer(function(req, res) {
    // your normal server code
    var path = url.parse(req.url).pathname;
    switch(path) {
        //case '/json.js':
    case '/':
        fs.readFile(__dirname + "/index.html", function(err, data) {
            if(err) return send404(res);
            res.writeHead(200, {
                'Content-Type': path == 'json.js' ? 'text/javascript' : 'text/html'
            })
            res.write(data, 'utf8');
            res.end();
        });
        break;
    }
});
server.listen(8080);

// socket.io
var socket = io.listen(server); 
```

一个简单的 index.html：

```
<html>
  <head>
    <title></title>
  </head>
  <body>
  <script type="text/javascript" src="https://github.com/downloads/processing-js/processing-js/processing-1.4.1.min.js"></script>
  <canvas id="pippo" data-processing-sources="activity.pde"></canvas>

  <script type="application/javascript">
  function doIT() {
    var processingInstance;
    processingInstance = Processing.getInstanceById('pippo');
    processingInstance.myTest(0.8,51.5);
    processingInstance.myTest(9.19,45.27);
  }
  </script>

  <button onclick="doIT();">doit</button>

</body>
</html> 
```

还有一个像这样的简单 .pde 文件：

```
// @pjs preload must be used to preload the image

/* @pjs preload="image.png"; */
PImage backgroundMap;

float mapScreenWidth,mapScreenHeight;  // Dimension of map in pixels.

void setup()
{
 size(600,350);
 smooth();
 noLoop();
 backgroundMap   = loadImage("image.png");
 mapScreenWidth  = width;
 mapScreenHeight = height;
}

void draw()
{
 image(backgroundMap,0,0,mapScreenWidth,mapScreenHeight);
}

void myTest(float a, float b) {
 ellipse(a,b,5,5);
} 
```

如果我尝试将我的 sample.js 更新为：

```
case '/':
fs.readFile(__dirname + "/index.html", function(err, data) {
    if(err) return send404(res);
    res.writeHead(200, {
        'Content-Type': path == 'json.js' ? 'text/javascript' : 'text/html'
    })
    res.write(data, 'utf8');
    res.end();
});
break;
case '/activity.pde':
fs.readFile(__dirname + "/activity.pde", function(err, data) {
    if(err) return send404(res);
    res.writeHead(200, {
        'Content-Type': 'plain/text'
    })
    res.write(data, 'utf8');
    res.end();
});
break; 
```

活动 pde 似乎可以正确加载（200 OK 128ms），但是当我尝试使用“doIT”按钮时出现此错误：“TypeError: processingInstance.myTest is not a function processingInstance.myTest(0.8,51.5);”

您对使用此设置有什么建议吗？

PS：此代码不使用节点，通过处理加载图像并在按下按钮时在加载的图像上绘制一个椭圆

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:03:34.723

出于调试目的，您可能希望将 doIT 函数更改为：

```
<script type="application/javascript">
function doIT() {
  var processingInstance = Processing.getInstanceById('pippo');
  if(!processingInstance) {
    console.log("'pippo' instance not loaded (yet)");
    return;
  }
  if(!processingInstance.myTest) {
    console.log("'pippo' instance started loading, but hasn't completed yet");
    return;
  }
  // if we do get here, the instance should be ready to go.
  processingInstance.myTest(0.8,51.5);
  processingInstance.myTest(9.19,45.27);
}
</script> 
```

你的 doIT 函数失败有几个原因，第一个通常是在初始化之前尝试访问草图实例。当草图的引用被添加到实例列表中时也有短暂的间隔，但它还没有完成绑定所有函数，所以这就是为什么你通常想要测试你要调用的函数的原因。另一种选择是：

```
<script type="application/javascript">
var pippoSketch = false;

(function bindSketch() {
  pippoSketch = Processing.getInstanceById('pippo');
  if(!pippoSketch || !pippoSketch.myTest) {
    setTimeout(bindSketch, 250); }
}());

function doIT() {
  if (!pippoSketch) {
    console.log("pippoSketch not ready yet.");
    return;
  }
  pippoSketch.myTest(0.8,51.5);
  pippoSketch.myTest(9.19,45.27);
}
</script> 
```

这将尝试获取对您的草图的完整初始化引用，直到它通过每 250 毫秒安排一次尝试来表示引用。

# java - 通过 Ant 运行 JUnit 时找不到外部库中的资源包

> ID：14682787
> 
> 赞同：0
> 
> 时间：2013-02-04T08:18:27.697
> 
> 标签：java, ant, junit

我有以下情况：

JUnit 针对一些测试应用程序类的测试类进行测试。应用程序类依赖于一个库，其中包含一些资源包。库本身包含在类路径中，用于测试

```
<classpath>
    <!-- all modules -->
    <path refid="lib.app_modules.path" />
    ... 
```

在哪里

```
<path id="lib.app_modules.path">
    <path location="${myLib}" />
            ... 
```

效果：库中的所有类都由应用程序类找到，**但**不是它们的资源包（从库内部加载）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:21:43.673

“解决方案”（或解决方法）：

改变：

```
<path id="lib.app_modules.path">
    <path location="${myLib}" />
       ... 
```

至：

```
<path id="lib.app_modules.path">
    <pathelement path="${myLib}"/> 
```

一切运行良好。不知何故，*路径*下的*路径*似乎只包括类，而路径*元素*似乎包括罐子内的所有东西......

# yii - yii phpexcel文件阅读器无响应

> ID：14682797
> 
> 赞同：0
> 
> 时间：2013-02-04T08:19:15.953
> 
> 标签：yii, phpexcel

我有一段代码是

```
 $excelFile = '/tmp/sheet.xls' ;
    Yii::import('application.vendors.PHPExcel',true);
    $inputFileType = PHPExcel_IOFactory::identify($excelFile);
    $objReader = PHPExcel_IOFactory::createReader($inputFileType);
    $objPHPExcel = $objReader->load($excelFile);
    $objWorkSheet = $objPHPExcel->getActiveSheet();
    $highestRow = $objWorkSheet->getHighestRow();
    $hightestColumn = $objWorkSheet->getHightestColumn();
    $hightestColumnIndex = PHPExcel_Cell::columnIndexFromString($highestColumn);

    echo '<table>'."\n" ;
    for($row=2; $row<$highestRow ; ++$row){
    echo '<tr>'."\n" ;
    for($col=0; $col < $highestColumnIndex ; ++$col){
    echo '<td>'.$objWorksheet->getCellByColumnAndRow($col,$row)->getValue().'</td>'."\n";
    }
    echo '</tr>'."\n" ;
  }    
  echo '</table>'."\n" ; 
```

但是当这段代码执行时，我没有得到任何文件显示。我还尝试进行调试以检查失败的位置，我可以将错误本地化到 getActiveSheet。任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-29T21:04:30.750

这是我显示导入的 excel 文件和工作的方式：

```
 spl_autoload_unregister(array('YiiBase','autoload'));           
    Yii::import("application.vendors.phpexcel.Classes.PHPExcel", true);

    $inputFileType = PHPExcel_IOFactory::identify($path);
    $objReader = PHPExcel_IOFactory::createReader($inputFileType); //Excel5);
    $objPHPExcel = $objReader->load($path);

    spl_autoload_register(array('YiiBase','autoload'));  

    foreach ($objPHPExcel->getWorksheetIterator() as $worksheet) {
        foreach ($worksheet->getRowIterator() as $row) {
                $rowIndex=$row->getRowIndex();
                $cellIterator = $row->getCellIterator();
                $cellIterator->setIterateOnlyExistingCells(false); // Loop all cells, even if it is not set
                foreach ($cellIterator as $cellIndex=>$cell) {
                    if (!is_null($cell)) {
                        if($rowIndex >1 && $cellIndex<=55){
                            $cellVal=$cell->getCalculatedValue();
                                echo $cellVal;
                            }
                    }
                }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:41:56.620

尝试像这样导入 PHPExcel：

```
spl_autoload_unregister(array('YiiBase', 'autoload'));
Yii::import('application.vendors.PHPExcel', true);
$this->objPHPExcel = new PHPExcel();
spl_autoload_register(array('YiiBase', 'autoload')); 
```

# jsf - 一个目的是什么 ?

> ID：14682811
> 
> 赞同：1
> 
> 时间：2013-02-04T08:20:07.230
> 
> 标签：jsf, oracle-adf

我已经阅读了[有关 ADF 声明性组件的文档，](http://jdevadf.oracle.com/adf-richclient-demo/docs/tagdoc/af_declarativeComponent.html)但仍不清楚此类组件的意图。我想知道这个人的用途是什么，以及这样的组件在哪些情况下会变得有用？这与 JSF2.0 中的 ui:composition 有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:52:03.753

af:declarativeComponent 定义了一个动态声明性组件，在 ADF 中用作封装一些 UI 逻辑的轻量级形式。不将其视为模板，而是将其视为无需声明标签名称即可定义的组件（对于常规的声明性组件），并且比任务流轻得多。使用时，您可以将参数传递给此类组件（包括自 ADF 11.1.2 起的方法参数）。这样的组件也可以有一个在 backing bean 范围内执行的 backing bean，因此如果您在页面中有此组件的多个实例，您将在运行时拥有尽可能多的 backing bean 实例，因此执行的逻辑不会有从一个实例到另一个实例的干扰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T03:50:17.863

ADF 声明式组件是使用预定义的 ADF Faces 组件创建的复合组件。它可以包含在打包的 jar 文件中，也可以作为可重用组件包含在任何 ADF 页面或页面片段中。

示例：为用户登录创建声明性组件
User Name [ af:InputText ]
Passwork [ af:InputText ]
SubmitButton

该组件可以包含在任何应用程序的登录页面中

# vhdl - 用于循环类型错误和移位错误的 VHDL

> ID：14682814
> 
> 赞同：1
> 
> 时间：2013-02-04T08:20:30.147
> 
> 标签：vhdl

我正在尝试用 VHDL 编写一个 for 循环，但我相信循环语句中存在一些类型问题。我有一个接收 16 位字 A 作为输入的块，它指示我应该移位另一个输入 B 的次数。输出 C 显示 B 的移位版本。我的代码如下所示：

```
TEMP_C := B;
FOR I IN 1 TO UNSIGNED(A) LOOP
  TEMP_C := TEMP_C(15) & TEMP_C(15 DOWNTO 1);
END LOOP;
C <= TEMP_C; 
```

编译器抱怨第二行，并说“Range left bound type Integer is not the same as right bound type”。有人可以向我解释为什么这条线是错误的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:54:50.567

在左边你有'1'，是一个'整数'。在右侧，您有“无符号（std_logic_vector？）”，是一个“无符号”。无符号仍然与“整数”不同。无符号仍然是位的集合。 [此处](http://en.wikipedia.org/wiki/Numeric_std)了解有关“未签名”的更多信息。

无论如何[，此解决方案](https://stackoverflow.com/questions/9018087/shift-a-std-logic-vector-of-n-bit-to-right-or-left)将为您提供更多帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:30:04.683

```
FOR I IN 1 TO to_integer(UNSIGNED(A)) LOOP 
```

`unsigned`向量与不同`integer`。这不是 Verilog！

# django - 如何使 Django 表单向导的自定义模板正确显示验证错误？

> ID：14682817
> 
> 赞同：0
> 
> 时间：2013-02-04T08:20:48.027
> 
> 标签：django, django-forms, django-templates

这个问题是我在此处发布的问题及其收到的答案的后续：[如何更改 Django Form-Wizard 中模板的布局？](https://stackoverflow.com/questions/14670531/how-to-change-the-layout-for-templates-in-a-django-form-wizard)

我制作了一个 4 步表单向导。我已经连接了与每个表单对应的 4 个自定义模板。每个这样的模板都扩展了一个名为 form_base.html 的模板。

我想自定义每个表单的布局。所以我需要单独操作表单元素。第一个表单中的一个元素被命名为“comment1”。所以在模板中，我有：

```
<table>
    <tr>
        <th align="right">
            Comment #1
        </th>
        <td>
            {{ wizard.form.comment1 }}
        </td>
    </tr>
</table> 
```

这部分有效。如果用户在该字段中键入有效条目，它会正常工作。但是，如果用户键入无效数据，则不会出现错误消息。如何解决此问题以正确显示错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:17:37.990

文档对此进行了彻底的讨论（[https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#customizing-the-form-template](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#customizing-the-form-template)）。您可以通过分别直接从表单和字段访问它们来访问和显示表单错误和字段错误。这是一个例子。

```
{{ wizard.form.non_field_errors }}
<table>
    <tr>
        <th align="right">
            Comment #1
        </th>
        <td>
            {{ wizard.form.comment1 }}
        </td>
        {% if wizard.form.comment1.errors %}
        <td>{{ wizard.form.comment1.errors }}</td>
        {% endif %}
    </tr>
</table> 
```

# javascript - Android + phonegap +包管理器

> ID：14682818
> 
> 赞同：2
> 
> 时间：2013-02-04T08:20:48.160
> 
> 标签：javascript, android, cordova-2.0.0

我需要编写一个 cordova 插件来检索用于 Android 应用程序的应用程序名称、版本代码和版本名称。请尽快回复...在此先感谢 :)

这是我的代码....收到无效的操作错误消息。

在**My.js 中**

```
var AppInfo = function() {};
AppInfo.prototype.getVersionName = function(successCallback, failureCallback) {
    return cordova.exec(
        successCallback, 
        failureCallback, 
        'AppInfo', 
        'GetVersionName', 
        []
    );
}; 
```

在**AppInfo.java** *（插件）中*

```
package com.cordova.plugin.appInfo;
import org.json.JSONArray;
import org.json.JSONException;
import android.content.Context;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import org.apache.cordova.api.CordovaPlugin;
import org.apache.cordova.api.CallbackContext;
import org.apache.cordova.api.PluginResult;
import org.apache.cordova.api.PluginResult.Status;

public class AppInfo extends CordovaPlugin {
public final String ACTION_GET_VERSION_NAME = "GetVersionName";
Context ctx;
public PluginResult execute(String action, JSONArray args, String callbackId) {
    ctx = cordova.getContext();
    PluginResult result = new PluginResult(Status.INVALID_ACTION);
    PackageManager packageManager = this.ctx.getPackageManager();
    if(action.equals(ACTION_GET_VERSION_NAME)) {
        try {
            PackageInfo packageInfo = packageManager.getPackageInfo(
                                          this.ctx.getPackageName(), 0);
            result = new PluginResult(Status.OK, packageInfo.versionName);
        }
        catch (NameNotFoundException nnfe) {
            result = new PluginResult(Status.ERROR, nnfe.getMessage());
        }
    }
    return result;
}
} 
```

在**.html中**

```
<script>
function onDeviceReady () {
    $('#send').bind('click', function () {
        alert('Hello World'); 
        window.applicationInfo = new AppInfo();
        window.applicationInfo.getVersionName( function(versionName){
           alert("versionName" + versionName);
        },
        function (errorMessage){
           alert("Error is "+errorMessage);
        }
        ); 
    });                
}
document.addEventListener("deviceready", onDeviceReady, false);
</script> 
```

最后在plugin.xml中设置权限和插件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T08:50:51.733

这个帮助函数通过应用程序名称、包名称、版本号和代码以及图标检索所有已安装的应用程序。该方法`getPackages()`返回`ArrayList`所有应用程序。

> ```
> class PInfo {
> private String appname = "";
> private String pname = "";
> private String versionName = "";
> private int versionCode = 0;
> private Drawable icon;
> private void prettyPrint() {
>     Log.v(appname + "\t" + pname + "\t" + versionName + "\t" + versionCode);
> }
>  }
> private ArrayList<PInfo> getPackages() {
>     ArrayList<PInfo> apps = getInstalledApps(false); /* false = no system packages */
>    final int max = apps.size();
>     for (int i=0; i<max; i++) {
>        apps.get(i).prettyPrint();
>    }
>   return apps;
>    }       
> 
> private ArrayList<PInfo> getInstalledApps(boolean getSysPackages) {
>       ArrayList<PInfo> res = new ArrayList<PInfo>();        
>      List<PackageInfo> packs = getPackageManager().getInstalledPackages(0);
>       for(int i=0;i<packs.size();i++) {
>              PackageInfo p = packs.get(i);
>              if ((!getSysPackages) && (p.versionName == null)) {
>               continue ;
>        }
>     PInfo newInfo = new PInfo();
>     newInfo.appname = p.applicationInfo.loadLabel(getPackageManager()).toString();
>     newInfo.pname = p.packageName;
>     newInfo.versionName = p.versionName;
>     newInfo.versionCode = p.versionCode;
>     newInfo.icon = p.applicationInfo.loadIcon(getPackageManager());
>     res.add(newInfo);
> }
> return res; 
>  } 
> ```

我希望它会帮助你。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T09:07:45.300

您可以通过扩展PhoneGap的Plugin类为Package Manager编写插件，并在Plugin中添加包Info类并实现逻辑以获取已安装的应用程序。

# javascript - 无法在远程 Tomcat 服务器上运行 JSP

> ID：14682821
> 
> 赞同：0
> 
> 时间：2013-02-04T08:20:58.260
> 
> 标签：javascript

我的远程服务器上有 Tomcat7。我为我的应用程序开发了一个jsp，并将其设置为主页。当我在本地服务器（Localhost：Tomcat7）上运行它时，它工作正常......但我在远程服务器上运行，它只读取我文件的几行......但不是整个jsp。有人可以帮我解决这个问题吗..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:37:03.407

也许 Tomcat 看不到你的库，比如 jstl（如果你使用标签）......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T09:57:38.057

请发布引发异常的详细信息。您可能需要查看 tomcat/logs/catalina.out 以获取异常跟踪和消息。当您编码以填充数据库中的值以及在实时/远程服务器上找不到这些值时，通常会发生这种情况。

# c - 在linux中测量ac程序的经过时间

> ID：14682824
> 
> 赞同：7
> 
> 时间：2013-02-04T08:21:25.297
> 
> 标签：c, linux, time

我正在尝试在 Linux 中测量经过的时间。我的答案一直返回零，这对我来说毫无意义。以下是我在程序中测量时间的方式。

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <time.h>

main()
{
    double p16 = 1, pi = 0, precision = 1000;
    int k;
    unsigned long micros = 0;
    float millis = 0.0;
    clock_t start, end;
    start = clock();
    // This section calculates pi
    for(k = 0; k <= precision; k++)
    {
        pi += 1.0 / p16 * (4.0 / (8 * k + 1) - 2.0 / (8 * k + 4) - 1.0 / (8 * k + 5) - 1.0 / (8 * k + 6));
        p16 *= 16;
    }
    end = clock();
    micros = end - start;
    millis = micros / 1000;
    printf("%f\n", millis); //my time keeps being returned as 0

    printf("this value of pi is  : %f\n", pi);
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-07-03T09:09:50.083

三种选择

1.  `clock()`
2.  `gettimeofday()`
3.  `clock_gettime()`

`clock_gettime()`达到纳秒精度，并支持 4 个时钟。

*   **CLOCK_REALTIME**

    系统范围的实时时钟。设置此时钟需要适当的权限。

*   **CLOCK_MONOTONIC**

    无法设置的时钟，表示自某个未指定的起点以来的单调时间。

*   **CLOCK_PROCESS_CPUTIME_ID**

    来自 CPU 的高分辨率每进程计时器。

*   **CLOCK_THREAD_CPUTIME_ID**

    线程特定的 CPU 时间时钟。

您可以将其用作

```
#include <time.h>

struct timespec start, stop;

clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &start);

/// do something

clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &stop);

double result = (stop.tv_sec - start.tv_sec) * 1e6 + (stop.tv_nsec - start.tv_nsec) / 1e3;    // in microseconds 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-04T20:40:16.367

注意：clock() 函数返回进程的 CPU 时间，而不是挂钟时间。我相信这是 OP 感兴趣的。如果需要挂钟时间，那么 gettimeofday() 是一个不错的选择，正如先前答案所建议的那样。如果您的系统支持，clock_gettime() 可以做任何一个；在我的 linux 嵌入式系统上，不支持 clock_gettime()，但支持 clock() 和 gettimeofday()。

下面是使用 gettimeofday() 获取挂钟时间的代码

```
#include <stdio.h> // for printf()
#include <sys/time.h> // for clock_gettime()
#include <unistd.h> // for usleep()

int main() {
    struct timeval start, end;
    long secs_used,micros_used;

    gettimeofday(&start, NULL);
    usleep(1250000); // Do the stuff you want to time here
    gettimeofday(&end, NULL);

    printf("start: %d secs, %d usecs\n",start.tv_sec,start.tv_usec);
    printf("end: %d secs, %d usecs\n",end.tv_sec,end.tv_usec);

    secs_used=(end.tv_sec - start.tv_sec); //avoid overflow by subtracting first
    micros_used= ((secs_used*1000000) + end.tv_usec) - (start.tv_usec);

    printf("micros_used: %d\n",micros_used);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-04T08:25:58.837

首先，您需要使用浮点运算。任何整数值除以更大的整数值将始终为零。

当然，您实际上应该在获取开始时间和结束时间之间*做一些事情。*

* * *

顺便说一句，如果您可以访问[`gettimeofday`](http://linux.die.net/man/3/gettimeofday)它通常是首选，`clock`因为它具有更高的分辨率。或者可能[`clock_gettime`](http://linux.die.net/man/3/clock_gettime)具有更高的分辨率。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-16T17:51:01.087

您编写的代码有两个问题。

1.  根据`man 3 clock`， 的分辨率以每秒`clock()`为增量。`CLOCKS_PER_SEC`在最近的 Cygwin 系统上，它是 200。根据变量的名称，您期望该值为 1,000,000。

2.  这一行：

    ```
    millis = micros / 1000; 
    ```

    会将商计算为整数，因为两个操作数都是整数。对浮点类型的提升发生在对 的赋值`millis`时，此时小数部分已被丢弃。

要使用 计算经过的秒数`clock()`，您需要执行以下操作：

```
clock_t start, end;
float seconds;
start = clock();
// Your code here:
end = clock();
seconds = end - start; // time difference is now a float
seconds /= CLOCKS_PER_SEC; // this division is now floating point 
```

但是，您几乎肯定不会获得毫秒精度。为此，您需要使用`gettimeofday()`or `clock_gettime()`。此外，您可能想要使用`double`而不是`float`，因为您可能会以非常小的差异减去非常大的数字。使用的示例`clock_gettime()`是：

```
#include <time.h>
/* Floating point nanoseconds per second */
#define NANO_PER_SEC 1000000000.0

int main(void)
{
    struct timespec start, end;
    double start_sec, end_sec, elapsed_sec;
    clock_gettime(CLOCK_REALTIME, &start);
    // Your code here
    clock_gettime(CLOCK_REALTIME, &end);
    start_sec = start.tv_sec + start.tv_nsec / NANO_PER_SEC;
    end_sec = end.tv_sec + end.tv_nsec / NANO_PER_SEC;
    elapsed_sec = end_sec - start_sec;
    printf("The operation took %.3f seconds\n", elapsed_sec);

    return 0;
} 
```

由于`NANO_PER_SEC`是浮点数，除法运算以浮点数进行。

来源：、和
`man`的页面。*C**编程**语言**,* Kernighan 和 Ritchie`clock(3)``gettimeofday(3)``clock_gettime(3)`

 **** * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-04T08:27:49.680

当你除法时，你可能会得到一个小数，因此你需要一个浮点数来存储毫秒数。如果不使用浮点数，小数部分将被截断。在您的代码中，开始和结束几乎相同。因此，当存储在 long 中时，除法后的结果为“0”。

```
unsigned long micros = 0;
float millis = 0.0;
clock_t start, end;

start = clock();

//code goes here

end = clock();

micros = end - start;
millis = micros / 1000; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-09T07:07:45.137

尝试 Sunil D S 的答案，但将 micros 从 unsigned long 更改为 float 或 double 类型，如下所示：

```
double micros;
float seconds;

clock_t start, end;

start = clock();

/* Do something here */

end = clock();

micros = end - start;
seconds = micros / 1000000; 
```

或者，您可以使用 rusage，如下所示：

```
struct rusage before;

struct rusage after;

float a_cputime, b_cputime, e_cputime;

float a_systime, b_systime, e_systime;

getrusage(RUSAGE_SELF, &before);

/* Do something here! or put in loop and do many times */

getrusage(RUSAGE_SELF, &after);

a_cputime = after.ru_utime.tv_sec + after.ru_utime.tv_usec / 1000000.0;

b_cputime = before.ru_utime.tv_sec + before.ru_utime.tv_usec / 1000000.0;

e_cputime = a_cputime - b_cputime;

a_systime = after.ru_stime.tv_sec + after.ru_stime.tv_usec / 1000000.0;

b_systime = before.ru_stime.tv_sec + before.ru_stime.tv_usec / 1000000.0;

e_systime = a_systime - b_systime;

printf("CPU time (secs): user=%.4f; system=%.4f; real=%.4f\n",e_cputime, e_systime, seconds); 
```

单位和精度取决于您要测量多少时间，但其中任何一个都应该为 ms 提供合理的精度。***

# python - 如果字符串在 Unicode 3.2.0 NFD 中，将其组合成 Unicode 6.1.0 NFC 是否安全（使用 Python 3.3 的 unicodedata.normalize 函数）？

> ID：14682829
> 
> 赞同：2
> 
> 时间：2013-02-04T08:21:45.797
> 
> 标签：python, unicode, python-3.3, python-unicode, unicode-normalization

考虑 Python 3.3 中的这段代码：

```
import unicodedata

foo = 'some unicode string that contains characters decomposable to Unicode 3.2.0 NFD'
bar = unicodedata.ucd_3_2_0.normalize('NFD', foo)
bla = unicodedata.normalize('NFC', bar) 
```

最后一条语句是否保证有效？我想更好的问题是：Unicode 3.2.0 中是否有任何 NFD 序列未被 Unicode 6.1.0 覆盖（这是 Python 3.3 中的默认值）？

我意识到，在字节**级别****，**可能不`bla`完全相同**\u0307** . 我认为只要*看起来*与最终用户相同，而不是看起来损坏/混乱，就可以了。`foo``foo`****`bla` *`foo`*****

# php - 结合 Angularjs 和 CodeIgniter

> ID：14682830
> 
> 赞同：19
> 
> 时间：2013-02-04T08:21:53.383
> 
> 标签：php, javascript, codeigniter, angularjs

我正在开发一个用 CodeIgniter 编写的现有网站，我们正在考虑将 AngularJS 用于一些需要大量前端功能但我们不想替换所有 CodeIgniter 视图（一次（还））的页面。

所以我点击了一个由 Angular 的路由器控制的链接，它由 javascript 处理，但下一个链接可能是应该由 CodeIgniter 框架处理的“正常”请求。

有没有一些优雅的方法可以结合这两种方法？我真的不介意一些额外的客户端开销，因为该站点尚未在生产中运行。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-09-09T18:24:30.813

听起来您希望随着 Angular 应用程序的增长逐渐减少对 CodeIgniter (CI) 路由的使用。这并不难，但需要很多细节。哪种方法有效取决于您的项目结构。*注意：我从 Code Igniter URL 中删除了 index.php，因此下面的路径可能与默认路径不同。*

## 1) CodeIgniter 安装在根目录下

如果 CI 安装在服务器的根目录上，您可以在 CI 中创建一个文件夹（例如，我有一个“ng”文件夹）。您的项目将如下所示：

```
 /controllers
    /models
    /ng
    (etc)
    /index.php (code igniter index file) 
```

在其中放置一个 .htaccess 文件，`/ng`其中包含以下内容：

```
 Order allow, deny
    Allow from all 
```

这允许`/ng`直接访问其中的文件，而不是通过 CI 的路由系统将这些请求发回。例如，您现在可以直接加载它： `example.com/ng/partials/angular-view.html`

主网页仍将由 CodeIgniter 创建，但它现在可以包含 Angular 资产，例如部分视图等。最终，您可以通过返回一个简单页面并让 Angular 从`/ng`就像它的设计目的一样。

这个方法很好，因为 CodeIgniter 可以控制是否加载初始页面（通过 CI 控制器中的一些用户身份验证代码）。如果用户没有登录，他们将被重定向并且永远不会看到 Angular 应用程序。

## 2) 目录中的 CodeIgniter

如果 CI 安装在一个目录中，比如`example.com/myapp/(code igniter)`你可以简单地在它旁边创建一个目录，`example.com/myappNg/`

```
 /myapp/
    /myapp/controllers/
    /myapp/models/
    /myapp/(etc)
    /myapp/index.php (code igniter index file)
    /myappNg/
    /myappNg/partials/
    /myappNg/js/
    /myappNg/(etc) 
```

现在在您的 Angular 应用程序中，您可以通过使路径相对于域根而不是相对于 Angular 应用程序来从 CI 请求资源。例如，在 Angular 中，您将不再从 Angular 文件夹请求部分视图`partials/angular-view.html`，而是希望从 CI 请求视图`/myapp/someResource`。注意前导`/`。"someResource" 可以返回一个 html 文档，或者 JSON 或者任何你正在使用 Code Igniter 做的事情。

最终您可以替换引用的路径数`/myapp/`。一旦您不再将 CI 用于任何事情，您只需将 Angular index.html 放入`/myapp/`其中，它将继续引用您的路径`/myappNg/`。

TL;DR 使您的 Angular 应用程序完全可用，并将其与 CodeIgniter 分离。逐渐转向使用 Angular 部分视图和其他 JSON 源，而不是链接到 CodeIgniter 页面。最终用一个引导 Angular 的 HTML 文件替换你的 CodeIgniter 端点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-16T13:29:43.383

最好的选择是将后端代码与角度代码分开，并将 codeInginter 代码用作 API

/Codeigniter 代码 /Angular 代码

因为 CodeIgniter 带有它的安全功能，所以这应该是你最好的选择

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T08:46:34.523

我从未使用过 Angular——不过这可能会有所帮助。

> 所以我点击了一个由 Angular 的路由器控制的链接，它由 javascript 处理

此 JavaScript 是否向您的 CI 控制器之一发出 Ajax 请求？如果是这样，CI 现在有`is_ajax_request()`方法，它允许您检查请求（POST 或 GET）是否通过 ajax 来。您可以根据来自 Ajax 的请求与普通请求进行不同的处理。

用户指南（*页面底部*）：[http ://ellislab.com/codeigniter/user-guide/libraries/input.html](http://ellislab.com/codeigniter/user-guide/libraries/input.html)

希望能帮助到你！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-22T18:29:08.553

我继承了一个 CI 应用程序，我主要使用 Angular 和 CI 来路由请求。在我的情况下，我没有使用 Angular 模板，所以我在 $routeProvider 配置中使用 ' ' 空但带有空格参数作为模板选项。这使我可以在不对原始服务器端代码进行太多更改的情况下执行通常的 CI ajax 请求。

```
angular.module('my_app', []).
  config(['$routeProvider', function($routeProvider) {
  $routeProvider.
   when('/', { template: " ", controller: my_routes.mainpage}). 
   when('/design/:designId/:action', {template: " ", controller: my_routes.show_design}).
   when('/vote_design/:designId', {template: " ", controller: my_routes.vote_design}).
   otherwise({redirectTo: '/'});
}]); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-08T09:47:15.317

除了 Aaron Martin 给出的答案之外，还可以将其用作**客户端 - 服务器方法。**

假设我们在项目的根目录中创建了 2 个文件夹：

1.  客户

2.  服务器

**Client**文件夹将包含 AngularJS 的所有代码和客户端库，包括 Bower 和 Npm 库。客户端的路由也将由 AngularJS 路由器处理。

将有工厂或服务充当客户端 angularjs 的提供者。这些文件将包含从服务器端发送请求和接收响应的代码。

**服务器**文件夹将包含 Laravel 或 CodeIgniter 或任何其他 PHP 框架的代码。您将创建请求的所有 API 并相应地开发功能。因此，整个 PHP 部分（服务器目录）将存储所有媒体文件和数据库文件。此外，它还将具有 RSS 提要等的任何接收链接。

当客户端在其服务器上的任何 API 上请求时，客户端将只接收 JSON 或 XML 格式的所有响应。

在我看来，这是开发 Webapps 的最佳实践之一。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-21T15:33:58.093

我从另一个与我一起工作的程序员那里找到了一个 CI 站点，该站点正在休假几个月。由于其目的的性质，我们的网站主要是用很多角度构建的。我们的解决方案有点不同。

`js\angular\controllers`与标准 CI 框架不同的是几个文件夹：`js\angular\modules`在 CI 的应用程序文件夹中，保存所有角度模型和控制器文件。然后将角度文档加载到应用程序基础文件夹中。

# perl - Berkeley DBXML 的 Perl API 中的复合查询

> ID：14682833
> 
> 赞同：1
> 
> 时间：2013-02-04T08:22:09.567
> 
> 标签：perl, berkeley-db-xml

我需要从 Perl 对我的 dbxml 容器进行复合查询，但我负担不起。在 SQL 中应该是这样的：

```
select * from books where ISBN='123' AND year='1994'; 
```

`and`我写的是问题。我不知道如何在 Perl 的 bdbxml 中做到这一点。

# java - Vistor 模式和 Stategy 模式的区别？

> ID：14682840
> 
> 赞同：0
> 
> 时间：2013-02-04T08:22:23.310
> 
> 标签：java, design-patterns, strategy-pattern, visitor-pattern, bridge

[我在http://en.wikipedia.org/wiki/Visitor_pattern](http://en.wikipedia.org/wiki/Visitor_pattern)读到了访问者模式

对这种模式的初步理解给人的印象是访问者模式与桥/策略模式相同。

那么这个具体的例子是否会产生这样的印象？有人可以解释其中的区别吗？可能在 Java 中有明确的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:42:16.800

从 GOF 书中，意图非常不同：

访问者 - 对象行为 - 表示要对对象结构的元素执行的操作。Visitor 允许您定义一个新的操作，而无需更改它所操作的元素的类。

桥 - 对象结构 - 将抽象与其实现分离，以便两者可以独立变化。

策略 - 对象行为 - 定义一系列算法，封装每个算法，并使它们可互换。策略让算法独立于使用它的客户而变化。

周围有很多Java示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-16T08:23:39.913

**桥：**

*桥将抽象与实现分离。抽象和实现都可以独立变化。*

1.  创建桥实现接口
2.  创建具体的桥梁实现类
3.  创建一个包含接口的抽象类（组合是这里的关键）
4.  创建实现抽象类的具体类

如果您正在寻找示例，请查看[tutorialspoint](http://www.tutorialspoint.com/design_pattern/bridge_pattern.htm)文章。

**游客：**

*Visitor 允许您定义一个新的操作，而无需更改它所操作的元素的类。*

根据 GOF 定义：

> 允许在运行时将一个或多个操作应用于一组对象，从而将操作与对象结构分离。

实施过程如下。

1.  创建一个类层次结构，在抽象基类中为聚合节点层次结构中的每个具体派生类`Visitor`定义一个纯虚方法。`visit()`
2.  每个`visit()`方法都接受一个参数 - 指向原始 Element 派生类的指针或引用。
3.  要支持的每个操作都使用`Visitor`层次结构的具体派生类建模。现在，通过将原始实现中的“类型查询和转换”代码分配给适当的重载 visit() 方法，在每个派生子类中定义了在访问者基类中声明的`visit`() 方法。
4.  将单个纯虚`accept()`方法添加到 Element 层次结构的基类

对于工作 java 代码，请查看教程点文章和[dzone](https://dzone.com/articles/design-patterns-visitor)文章。

**战略：**

*策略允许在运行时动态地从一种算法切换到另一种算法（从一系列算法中）*。

看看这个 SE question 了解更多细节。

[策略模式的真实示例](https://stackoverflow.com/questions/370258/real-world-example-of-the-strategy-pattern)

# java - 接受另一个列表作为参数的链表构造函数？

> ID：14682843
> 
> 赞同：-1
> 
> 时间：2013-02-04T08:22:37.927
> 
> 标签：java, constructor

我正在上 Java 课，我的导师希望我们填写这个方法：

```
public LL( LL other )
{

} 
```

他没有告诉我们它的作用。这是像 C++ 中的复制构造函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:25:59.623

是的，它可能是一个复制构造函数。只有当讲师为您提供定义其合同的构造函数的 javadoc 时，您才会知道。

但很可能，这个构造函数应该创建一个新的链表，其中包含与作为参数传递的链表相同的元素。

旁注：`LL`对于一个班级来说是一个可怕的名字。为什么不`LinkedList`改用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:27:32.890

实际上，Java 中的标准 LinkedList 没有这样的构造函数，但是有一个构造函数可以接受任何**Collection**并从中创建一个新的 LinkedList。

此构造函数确实用于复制列表。

确保您遍历另一个列表并将每个元素附加到新列表中，然后您将获得原始列表的副本。

# android - 无法在应用程序中移动图像

> ID：14682844
> 
> 赞同：0
> 
> 时间：2013-02-04T08:22:40.283
> 
> 标签：android

我正在开发狩猎游戏，因为我必须在水平方向移动枪，我可以展示枪，但是无法移动枪。对于我采取`ontouchlistener`但无法移动的动作：

```
public class Touchmoveimage extends Activity {

    int x,y,x1,y1;

    RelativeLayout rl;

public void onCreate(Bundle savedInstanceState) 

{

    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    rl=(RelativeLayout)findViewById(R.id.bb);

    x = getWindowManager().getDefaultDisplay().getWidth();

    y = getWindowManager().getDefaultDisplay().getHeight();

    final ImageView balls = (ImageView)findViewById(R.id.ball);

    balls.setOnTouchListener(new View.OnTouchListener() 

    {

   public boolean onTouch(View v, MotionEvent event) 

                  {

                        if(event.getAction()==MotionEvent.ACTION_DOWN)

                        {
                            x1=(int) event.getX();

                            y1=(int) event.getY();

                            RelativeLayout.LayoutParams param=new        
                                RelativeLayout.LayoutParams(x1,y1);

                                 rl.addView(balls, param);
                        }
                        return false;

                    }
    }
    );
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:32:20.173

我建议您改用 SurfaceView。如何使用它的一个很好的例子是 Android SDK 示例中的 Lunar Lander。

# sql - 按班次分组时间戳

> ID：14682849
> 
> 赞同：3
> 
> 时间：2013-02-04T08:23:06.413
> 
> 标签：sql, tsql, datetime

在我们的工厂，我们有以下班次：

*   1：周一至周五：上午 5 点至下午 1 点
*   2：周一至周五：下午 1 点至晚上 9 点
*   3：周一至周五：晚上 9 点至凌晨 5 点
*   4a：周六：早上 5 点至下午 5 点
*   4b：周日：下午 5 点至周一凌晨 5 点

在某个表中，我们有几个日期时间条目，我想使用查询对其进行分组。对于班次 1、2 和 3，此查询可以正常工作::

```
 CASE
WHEN DATEPART(hh, c.date_time_stamp) >= 5 AND DATEPART(hh, c.date_time_stamp) < 13 THEN CONVERT(VARCHAR(10), c.date_time_stamp, 103) + ' shift 1'
WHEN DATEPART(hh, c.date_time_stamp) >= 13 AND DATEPART(hh, c.date_time_stamp) < 21 THEN CONVERT(VARCHAR(10), c.date_time_stamp, 103) + ' shift 2'
WHEN DATEPART(hh, c.date_time_stamp) >= 21 AND DATEPART(hh, c.date_time_stamp) < 24 THEN CONVERT(VARCHAR(10), c.date_time_stamp, 103) + ' shift 3'
WHEN DATEPART(hh, c.date_time_stamp) >= 00 AND DATEPART(hh, c.date_time_stamp) < 5 THEN CONVERT(VARCHAR(10), DATEADD(DAY, -1, c.date_time_stamp), 103)  + ' shift 3'  END AS shift, 
```

这给了我某种 shift_id。为了识别 shift 4a 和 4b，我可以扩展 case 语句，但我有点担心查询的性能。

谁能给我一个提示，如何创建一个以有效方式返回 shift_id 的函数？谢谢！

编辑：一些示例数据：

```
inventory_trans_number creation_dt             shift_id             shift_type container_code
---------------------- ----------------------- -------------------- ---------- ------------------
140952                 2013-02-04 01:03:19.043 20130203 03          3          154143591115247892
140956                 2013-02-04 01:07:20.343 20130203 03          3          154143591115247939
140962                 2013-02-04 01:10:56.417 20130203 03          3          154143591115247991
140968                 2013-02-04 01:14:55.250 20130203 03          3          154143591115248134
140970                 2013-02-04 01:17:18.883 20130203 03          3          154143591115248196
141070                 2013-02-04 02:12:59.327 20130203 03          3          154143591115248240
141076                 2013-02-04 02:16:27.480 20130203 03          3          154143591115248356
141092                 2013-02-04 02:22:44.067 20130203 03          3          154143591115248530
141096                 2013-02-04 02:25:02.157 20130203 03          3          154143591115248585
141102                 2013-02-04 02:33:51.253 20130203 03          3          154143591115248615 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:50:54.627

这将为您提供轮班。它的工作原理是意识到这是一个数学问题，而不是数据库问题。

每周有 21 个班次，我们创建一个表变量来保存班次名称 - 您可能希望为此创建一个永久表，并在 Number 列上使用索引。

通过在我们感兴趣的任何日期*之前*`DATEDIFF`的星期一设置为 5:00 的时间和日期时间之间的小时数，并以 24*7（一周中的小时数）取模，我们得到一个数字，表示星期一 5:00 后的几点钟（即班次 0）。将此除以 8 即可得到班次编号。

 *```
DECLARE @FirstEverShift datetime = CONVERT(datetime, '2011-12-26 05:00')

DECLARE @ShiftTypes TABLE
(Number int NOT NULL PRIMARY KEY,
 Shift  nvarchar(2) NOT NULL)

INSERT @ShiftTypes
VALUES
(0, '1'),
(1, '2'),
(2, '3'),
(3, '1'),
(4, '2'),
(5, '3'),
(6, '1'),
(7, '2'),
(8, '3'),
(9, '1'),
(10, '2'),
(11, '3'),
(12, '1'),
(13, '2'),
(14, '3'),
(15, '4a'),
(16, 'NA'),
(17, 'NA'),
(18, '4b'),
(19, 'NA'),
(20, 'NA')

SELECT  s.date_time_stamp
        ,st.Shift
FROM    shifts s
        INNER JOIN
        @ShiftTypes st ON st.Number=DATEDIFF(HOUR, @FirstEverShift, s.date_time_stamp) % (24*7) / 8 
```

**编辑**

我意识到周末轮班是 12 小时而不是 8 小时。这种方法有效，但需要修改，因为我在平板电脑上，所以我不会这样做！

不是除以 8，而是除以 4，这意味着表变量必须从 0 变为 40，并且每 8 小时轮班需要 2 个数字，每 12 小时需要 3。*

# python - 当我通过 pymongo 建立连接时，mongo 连接失败

> ID：14682851
> 
> 赞同：1
> 
> 时间：2013-02-04T08:23:22.493
> 
> 标签：python, mongodb, pymongo

我正在使用它进行插入：

```
import pymongo
import sys

def main():
    connection = pymongo.Connection("mongodb://localhost", safe=True)

    db = connection.m101
    people = db.people

    person ={'name': 'Barack Obama', 'role':'President',
             'address':{'address1': 'The White House',
                        'street': '1600 Pensylvania Avenue',
                        'state':'DC',
                        'city':'Washington'},
             'interests':['government', 'basketball', 'the middle east']

        }

    people.insert(person) 
```

当我尝试使用写作`mongo`命令时，它说

```
Could not connect to server 127.0.0.1:27017 src/mongo
shell mongo.js:91
exception: connection failed 
```

可以做什么？我正在关注他们的教程！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T08:33:35.397

您需要运行 mongo 守护进程服务器。

$蒙戈

您可以在此处查看更多信息： [mongodb 正在运行吗？](https://stackoverflow.com/questions/5091624/is-mongodb-running)

# php - Symfony2表单：如何在同一个视图中两次渲染同一个元素

> ID：14682852
> 
> 赞同：7
> 
> 时间：2013-02-04T08:23:22.380
> 
> 标签：php, symfony, twig

我有一个控制器，我在其中创建一个带有两个下拉列表的表单。

当我渲染我的视图时，我希望在页面的顶部和底部有相同的表单元素。问题是表单 elemetns（下拉列表）仅显示在页面顶部，即使我要求 twig 也将它们放在底部。

这是我想要的：

![在此处输入图像描述](../Images/da294fde04fc785feff374cb52cb40a1.png)

1 和 2 是下拉列表。我想在页面的顶部和底部复制它。

关于如何做到这一点的任何想法？

顶部内容和底部内容（两个下拉列表位于其中）位于一个单独的树枝文件（searchPanel.html.twig）中，并且该文件包含在页面中

```
{% include "MyBundle:Search:searchPanel.html.twig" %} 
```

这是 searchPanel.html.twig

```
<div class="searchPanel">

<form action="{{ path }}" method="POST" {{ form_enctype(form) }}>
    Papers per page
    {{ form_widget(form.papers_per_page, { 'class': 'ppp'}) }}

    / Sort by 
    {{ form_widget(form.sort_by, { 'class': 'sort'}) }}
    {{ form_rest(form) }}

    / Papers ({{ papers_number }} results)

 <input type="submit" class="updateSearchResults" value="Update"></input>
</form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T10:17:44.997

您的方法中的一个问题是 Symfony 的 Form-component 将呈现带有 id 的表单元素，如果您在页面上两次呈现相同的表单，则会复制这些元素。您可能还会遇到 csrf_token 问题。要点是表格不打算被复制。

这就是我要做的。在不使用 Symfony\Form 的情况下创建一个包含分页器表单的 twig-template，即静态创建所有表单元素并将其传递给分页器对象（或数组）以获取数据，而不是使用`form_widget()`. 像这样的东西：

```
<form action="{{ path(app.request.attributes.get('_route') }}" method="POST">
    <select name="paginator[per_page]">
        {% for per_page in paginator.papers_per_page %}
        <option value=""{{ per_page }}">{{ per_page }}</option>
        {% endfor %}
    </select>
</form> 
```

表单操作会自动将数据提交到您当前的路由，因此您可以将其嵌入到不同的操作中，并将数据提交到相同的操作。在 POST 上，您可以使用 post-data 创建一个分页器对象，然后将其添加为表单的数据。之后，您只需照常使用 isValid() 即可。

在您的控制器中，您可以获得如下数据：

```
use Symfony\Component\HttpFoundation\Request;
// ...

public function PaperController()
{
    public function listAction(Request $request)
    {
        if ($request->getMethod() == 'POST') {
            $data = $request->request->get('paginator');
            $paginator = new Paginator($data);

            $form = new PaginatorFormType();
            $form->setData($paginator);

            if ($form->isValid()) {
                // ...
            }
        }
    }
} 
```

您可以像这样轻松地将表单嵌入到您的视图中：

```
{{ include 'AcmeDemoBundle:Form:paginator.html.twig' with { 'paginator': paginator } }} 
```

基本上，您只需在控制器中使用 Form-component 进行验证。如果您想设置一些默认值或添加其他参数，您可能需要从该模板创建一个[宏](http://twig.sensiolabs.org/doc/tags/macro.html)，但对于您的用例，这应该足够了。也许其他人有更好的解决方案，但这就是我在一个项目中遇到类似问题的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-04T17:24:03.340

另一种选择是使用渲染树枝助手。这样就可以根据需要多次在页面中呈现相同的表单。不同之处在于，使用这个帮助器，也有必要将表单呈现作为一个独立的控制器操作，即：在你的树枝模板的每个地方，你想要在帮助器中渲染表单以调用表单，必须是这样的：

```
{{ render(controller('BundleNameBundle:Controller:Action', {
    'param': paramId
})) }} 
```

此后只是创建控制器的问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-09T05:42:55.640

另一个选项是在控制器中创建 2 个表单：

```
 //first form
 $form = $this->createForm(new MyFormType(), ...);

 //second form: must have different form name that default,
 //to render in twig the fields with different ids
 $formType = new MyFormType();
 $formType->setName('second_form_name');
 $formSecond = $this->createForm($formType, ...); 
```

渲染树枝表单时发送两者：

```
return $this->render( ... 
            'form' => $form->createView(), 'formSecond'=>$formSecond->createView())); 
```

然后将第二个名称定义为

> 形式第二

，并且会与第一个冲突。

# ios - 如何以编程方式在自定义表格视图中附加搜索栏

> ID：14682854
> 
> 赞同：0
> 
> 时间：2013-02-04T08:23:30.210
> 
> 标签：ios, xcode, uitableview

我已经使用自定义表格视图单元实现了表格视图。我想将搜索栏放在表格视图中。

有人可以告诉我如何以编程方式附加一个这样的搜索栏。请尽量不要提供外部链接。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:26:01.710

```
UISearchBar *tempSearchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, self.tableView.frame.size.width, 0)];
self.searchBar = tempSearchBar;
[tempSearchBar release];
self.searchBar.delegate = self; 
[self.searchBar sizeToFit];  
self.tableView.tableHeaderView = self.searchBar; 
```

希望这有帮助。

# java - 如何使 Java PieMenu 半圆

> ID：14682857
> 
> 赞同：1
> 
> 时间：2013-02-04T08:23:36.513
> 
> 标签：java, menu

我在我的 Java 项目中使用[PieMenu](http://dub.washington.edu:2007/projects/javadoc/edu/berkeley/guir/lib/satin/widgets/PieMenu.html)，但我不知道如何使它像这样的半圈。还有任何特定的方法可以将图标添加到每个 JMenuItem，因为正如他们的注释中所述，存在一些与向菜单添加项目相关的问题。

> 已知问题 不要这样做：
> 
> PieMenu pieMain = new PieMenu(); JMenuItem item = new JMenuItem("文件");
> 
> pieMain.add(item); item.setEnabled(false);
> 
> 尽管这应该可行，但由于此实现中的怪癖，它不会。但是，您可以改为执行以下操作：
> 
> PieMenu pieMain = new PieMenu(); JMenuItem item = pieMain.add("文件"); item.setEnabled(false);

![在此处输入图像描述](../Images/f0ee2dc3024653221f5ac61c861c074b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-11T12:22:44.437

[我在这个链接](http://www.cs.cmu.edu/~jasonh/projects/piemenu/PieMenu.java)中找到了一个馅饼菜单，我不得不操纵一些代码使它变成半个馅饼

# java - 如何阻止用户在 J2ME 应用程序的字段之外输入数据？

> ID：14682869
> 
> 赞同：0
> 
> 时间：2013-02-04T08:24:21.730
> 
> 标签：java, java-me

我有 J2ME 应用程序，包含很多表单和列表。

我在该应用程序中有以下问题。

每当我输入表单的详细信息并按下按钮时，光标就会到达表单字段和页脚之间的可用空间，之后如果我按下中间按钮，它就允许用户输入数据。

请帮助我，如何阻止用户在字段外输入数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:33:37.333

您可能在其中添加了一些字段。j2me 不允许在表单上进行编辑。请提供代码以便我们为您提供帮助

# extjs - EditorGridPanel：错误 Ext.reg 不是函数

> ID：14682874
> 
> 赞同：0
> 
> 时间：2013-02-04T08:24:36.550
> 
> 标签：extjs, combobox

我尝试使用 EditorGridPanel 在我的网格中添加一个组合框，但我收到一个我无法解决的错误。

错误： ***Ext.reg 不是函数 Ext.reg('editorgridpanel', Ext.ux.grid.EditorGridPanel);***

在我的文件 EditorGridPAnel.js 中，我这样做：

> Ext.define('Ext.ux.grid.EditorGridPanel' ,{ extend : 'Ext.grid.GridPanel', 别名: 'EditorGridPanel.editorgrid', -- -- -- Ext.reg('editorgridpanel', Ext.ux .grid.EditorGridPanel);

如果有人可以帮助我，请..从星期五开始，我试图解决它，但没有:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:13:37.613

如果您正在开发 MVC 应用程序并想要创建网格的扩展，然后想要将该网格的实例与 xtype 一起使用。您必须将别名设置为 widget.xtypename。

`Ext.define('AM.view.user.List' ,{ extend: 'Ext.grid.Panel', alias : 'widget.userlist' });`

# java - 在 Javafx 中绑定图像

> ID：14682881
> 
> 赞同：6
> 
> 时间：2013-02-04T08:25:06.293
> 
> 标签：java, javafx

在我的 Javafx 应用程序中，我有一个画廊。我想要做的是，只要文件夹中有可用的图像，它就应该在屏幕上显示该图像。

无论如何要绑定`Image`一个`IamgeView`。就像任何其他字符串或属性一样？我可以拥有一个名为 ImageProperty 的东西，它将绑定到 Image。因此，如果我更改 ImageProperty 中的图像，它将更新 UI

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T09:10:30.830

完毕。ImageView 有一个对象属性，可以绑定一个 ObjectProperty。

IE

```
private ObjectProperty<javafx.scene.image.Image> imageProperty = new SimpleObjectProperty<>();
@FXML
private ImageView imageDisplay;
Bindings.bindBidirectional(this.imageDisplay.imageProperty(), GlobalModel.getInstance().getProject().getImageProperty()); 
```

# c# - 如何从未知的 com 对象接口（例如连接点）获取 guid？

> ID：14682892
> 
> 赞同：2
> 
> 时间：2013-02-04T08:25:43.943
> 
> 标签：c#, com, interface, guid, connection-points

我有正在运行的服务，可通过 COM 获得。我可以使用`Activator`.

我连接 COM 库

```
using MyLib; 
```

然后通过 Instance 获取我的对象

```
Activator.CreateInstance((Type.GetTypeFromProgID("RunningInstance"))); 
```

这实际上是`IConnectionPointContainer`

有几个连接点，并且有一个

```
FindConnectionPoint(SomeGuidHere, out MyConnectionPoint); 
```

如果我在 cpp atl 中没记错的话`__uuid(IHelloWorld)`

问题是：如何在容器中获取一些“IHelloWorld”接口（连接点）的指南？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:09:57.407

`EnumConnectionPoints()`按照[此答案](https://stackoverflow.com/a/670585)中的说明使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T18:54:17.637

如果您有对接口的引用，则可以从类型中获取 GUID。

```
typeof(IHelloWorld).GUID
```

# asp.net-mvc - 认证用户和服务层

> ID：14682893
> 
> 赞同：2
> 
> 时间：2013-02-04T08:25:49.843
> 
> 标签：asp.net-mvc, model-view-controller, asp.net-mvc-4, separation-of-concerns, service-layer

我有一个 MVC 4 应用程序，它使用不同类库中的服务层。

对该服务层的一些调用需要知道哪些用途正在请求数据。

数据记录因用户角色而异。

**对于防止耦合问题**，我应该在请求中传递用户名 (HttpContext.User.Identity.Name) 还是应该使用相同的 HttpContext.User.Identity.Name 在服务层直接访问它。

我不确定是否应该从服务层隐藏 HttpContext。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T08:29:18.710

只需将当前经过身份验证的用户作为参数传递给您的服务层。永远不要`HttpContext.User.Identity.Name`在你的服务层中使用。

例如：

```
[Authorize]
public ActionResult SomeAction()
{
    string user = User.Identity.Name;
    this.someService.SomeOperation(user);
    ...
} 
```

您的服务层永远不应绑定到`HttpContext`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T08:34:00.323

将 HttpContext 传递给服务层可能看起来很诱人，但这是一个糟糕的选择。它会在 ASP.net 运行时服务和业务逻辑之间建立一个硬链接（这正是您要避免的，我假设）。最好的办法是创建类来表示登录用户，您可以将其填充到基本控制器中并将其传递给服务层。

这样，您可以两全其美

# ssl - Curl 中出现错误 - 对等证书无法使用已知 CA 证书进行身份验证

> ID：14682894
> 
> 赞同：12
> 
> 时间：2013-02-04T08:25:50.140
> 
> 标签：ssl, curl, openssl

使用自签名证书进行 ssl 连接时出现以下错误。“对等证书无法使用已知 CA 证书进行身份验证”

它与 CA 签名证书一起工作正常。我正在使用 curl_easy_setopt() 设置以下内容。

curl_easy_setopt(MyContext, CURLOPT_CAPATH, CA_CERTIFICATE_PATH) curl_easy_setopt(MyContext, CURLOPT_SSL_VERIFYPEER,TRUE);

curl 版本
libcurl-7.19.7-26

Openssl 版本是 0_9_8u。

请让我知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-01-27T13:56:57.053

> **安全问题**：此答案禁用安全功能。不要在生产中使用它！

对于 php，可以关闭 curl 对证书的验证（请参阅下面的警告），例如 curl_exec

```
 curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
```

[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

（您自己评估安全风险，在我的情况下，它位于合作伙伴公司的服务器上，并且所需的文件不包含安全信息 - 恰好位于安全服务器上）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-10T15:37:23.277

默认情况下，CURL 通常会验证 SSL 证书以查看其是否有效并由公认的 CA 颁发。为此，curl 使用一组捆绑的 CA 证书。

如果您想关闭 curl 对证书的验证，请使用 -k（或 --insecure）选项。这是一个例子：

```
curl --noproxy -k \* -D - https://127.0.0.1:443/some-secure-endpoint 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-10-26T15:11:29.957

我们通过将 curl 更新到标准存储库中可用的最新版本并安装最新的 ca-certificates 捆绑包，修复了 CentOS 6 上的类似问题：

```
yum update curl
yum install ca-certificates 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-22T10:02:19.800

libcurl 默认执行对等 SSL 证书验证。这是通过使用 SSL 库可以用来确保对等方的服务器证书有效的 CA 证书包来完成的。

如果您使用捆绑包中的 CA 签名的证书与 HTTPS 或 FTPS 服务器通信，您可以确定远程服务器确实是它声称的那个。

在 7.18.0 之前，curl 捆绑了默认安装的严重过时的 ca 捆绑文件。这些天来，curl 档案根本不包含 ca 证书。你需要把它们带到别处。例如，请参见下文。

有关对等 SSL 证书验证的更多信息，请访问[http://curl.haxx.se/docs/sslcerts.html](http://curl.haxx.se/docs/sslcerts.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-20T17:34:25.407

尽管此错误发生在 using`git clone`而不是 using的情况下`curl`，但我最近偶然发现了一条相同的错误消息：

> 对等证书无法使用已知 CA 证书进行身份验证

与[Arth 的发现](https://stackoverflow.com/a/40265963/1167750)类似，适用于 CentOS 6 *（为了成功将 HTTPS URL 与`git clone`相关 GitLab 存储库一起使用）*涉及更新服务器*（即使用 HTTPS 的服务器*）上的受信任证书，使用[以下步骤](https://briansnelson.com/How_to_add_trusted_root_certificates)：

1.  `sudo yum install ca-certificates`
2.  `sudo update-ca-trust enable`
3.  `sudo cp /path/to/your_new_cert.crt /etc/pki/ca-trust/source/anchors/`
4.  `sudo update-ca-trust extract`

将来可能在 CentOS 上的用户`curl` *（或其他类似场景）*的情况下可以应用相同的证书步骤。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-01-12T12:44:22.677

> **安全问题**：此答案禁用安全功能。不要在生产中使用它！

在'C'

```
curl_easy_setopt(curl_handle, CURLOPT_SSL_VERIFYPEER, 0); 
```

为我工作

# iphone - 如何在 iphone 中选择和取消选择缩略图

> ID：14682895
> 
> 赞同：0
> 
> 时间：2013-02-04T08:25:50.327
> 
> 标签：iphone, objective-c

我是手机编程的新手。如何选择和取消选择缩略图。现在我做了什么我已经使用自定义按钮，我正在向缩略图添加自定义图像，它主要用于我可以知道这些缩略图是selected.like that,如果选择任何缩略图意味着，自定义按钮将附加到每个选定的缩略图。现在我想要的意思是如果我再次单击同一图像意味着我想从选定的缩略图中删除自定义按钮图像。再次如果我选择意味着它已附加该自定义按钮图像并且如果再次在同一图像上选择意味着我已删除该自定义按钮图像形式的缩略图。任何人都可以告诉我在这里使用了什么逻辑。这是我的代码

```
- (void)handleThumbClick:(id)sender
{

        NSLog(@"yes selected");

        FGalleryPhotoView *photoView = (FGalleryPhotoView*)[(UIButton*)sender superview];

        customBadge1 = [CustomBadge customBadgeWithString:@"1" 
                                          withStringColor:[UIColor greenColor] 
                                           withInsetColor:[UIColor redColor] 
                                           withBadgeFrame:YES 
                                      withBadgeFrameColor:[UIColor grayColor] 
                                                withScale:1.0
                                              withShining:YES];     

        b =[UIButton buttonWithType:UIButtonTypeCustom];
        b.frame = CGRectMake(0,0, 100,100);
        [b setImage:[UIImage imageNamed:@"Overlay@2x.png"] forState:UIControlStateNormal];
        [b setTitle:@"1" forState:UIControlStateNormal];
       // [b setTag:4];

        NSLog(@"Thumb click Fgallerview controller");

        [photoView addSubview:b];
        [photoView addSubview:customBadge1];

} 
```

如果单击任何缩略图的上述代码意味着它将自定义按钮图像附加到该缩略图图像。现在我想要的意思是如果再次单击相同的缩略图我已经删除了该自定义缩略图图像。例如，在缩略图视图中，我现在显示了 10 个图像，如果单击任何 5 个缩略图意味着它将自定义按钮图像附加到 5 个选定的图像，我只想选择 5 个图像。现在我想要的意思是如果想要在选定的 5 个具有自定义的缩略图图像中按钮图像。现在，如果我选择任何选定的图像意味着我必须取消选中该选定的图像，这意味着我想从选定的缩略图中删除该自定义按钮图像。任何机构都可以告诉我如何做到这一点

我现在还有一件事，通过使用 ELCimagepickercontroller，我们可以选择多个图像，但只有画廊图像，但这里我从私人文档目录文件夹图像中显示..请帮助我谢谢 Aslam

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:46:09.340

设置缩略图为`setBackgroundImage`并设置初始标签=0；

```
-(IBAction)handleThumbClick:(id)sender
{
    UIButton *btn = (UIButton*)sender;

    if (btn.tag==0)
    {
        [btn setImage:[UIImage imageNamed:@"Default.png"] forState:UIControlStateNormal];
        btn.tag=1;
    }
    else{
        [btn setImage:nil forState:UIControlStateNormal];
        btn.tag=0;
    }

} 
```

# android - 在 android 中显示自定义 QuickAction 弹出窗口

> ID：14682896
> 
> 赞同：0
> 
> 时间：2013-02-04T08:25:51.903
> 
> 标签：android, popupwindow

我正在尝试在我的项目中构建快速操作。当我单击视图时，它会正确显示弹出窗口。但是指向父视图的箭头（向上箭头，向下箭头）没有显示。我在很多方面都试过了。如果有人有更好的解决方案或良好的逻辑，请帮助我谢谢：在这里你可以看到代码：

```
public void show (View anchor) {
        preShow();

        int[] location      = new int[2];

        anchor.getLocationOnScreen(location);

        Rect anchorRect     = new Rect(location[0], location[1], location[0] + anchor.getWidth(), location[1] 
                            + anchor.getHeight());

        mRootView.setLayoutParams(new LayoutParams(300, 400));
        mRootView.measure(200,300);

        int rootWidth       = mRootView.getMeasuredWidth();
        int rootHeight      = mRootView.getMeasuredHeight();

        int screenWidth     = mWindowManager.getDefaultDisplay().getWidth();

        int xPos            = (screenWidth - rootWidth) / 2;
        int yPos            = anchorRect.top - rootHeight;

        boolean onTop       = true;

        if (rootHeight > anchor.getTop()) {
            yPos    = anchorRect.bottom;
            onTop   = false;
        }
        if(onTop==true){
            showArrow(R.id.arrow_down, anchorRect.centerX());
        }
        else
        {
            showArrow( R.id.arrow_up, anchorRect.centerX());
        } 
```

showArrow 方法如下：

```
private void showArrow(int whichArrow, int requestedX) {
        final View showArrow;
        final View hideArrow;
        if(whichArrow==R.id.arrow_down)
        {
            showArrow=mArrowDown;
            hideArrow=mArrowUp;

        }
        else{
            showArrow=mArrowUp;
            hideArrow=mArrowDown;       
        }

        final int arrowWidth = mArrowUp.getMeasuredWidth();

        showArrow.setVisibility(View.VISIBLE);

        ViewGroup.MarginLayoutParams param = (ViewGroup.MarginLayoutParams)showArrow.getLayoutParams();

        param.leftMargin = requestedX - arrowWidth / 2;

        hideArrow.setVisibility(View.INVISIBLE);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:13:55.363

您的代码没有任何问题。可能，您的 xml 文件中有些问题。请检查您的 xml 文件。尝试修改您的 xml 文件。希望，您的问题将得到解决。

# javascript - 如何将默认 ScrollTop 和 ScrollLeft 设置为弹出窗口。打开

> ID：14682901
> 
> 赞同：-1
> 
> 时间：2013-02-04T08:26:22.463
> 
> 标签：javascript, jquery

所以，我有下面的代码，我想打开一个链接，`window.open()`我想设置默认值`ScrollTop()`并设置`ScrollLeft()`为弹出窗口。谢谢。

```
function DoLink(){
window.open('http://translate.google.com/#', '_blank'," width=400, height=400")
}

<input type="button" value="OpenLink" onclick="DoLink()"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:40:17.440

您应该找到您要打开的页面上是否有ID并以以下形式设置url：

```
http://xxxxxxx.xxx/#idOfElement 
```

# java - How to do qiuck lookup using EnumMap in Java?

> ID：14682904
> 
> 赞同：1
> 
> 时间：2013-02-04T08:26:45.203
> 
> 标签：java, map

I have about 30 handler routines to dispatch when given a routine name, in String form. So in a factory method, a natural way to dispatch routine is using a series of `if...else` to compare the routine name to fit in the slot. it works, but no doubt it is clumsy and inefficient as the number of routines rises up.

I came up with a fashion using enum and EnumMap: whenever I add a routine, I add an enum instance, and register it in EnumMap(the routine name and the routine class as key and value).

As what I know, when the number of instances is less than **64(the long type length)**, the EnumMap implementation uses a `long` as a **bit array** and use bit offset to do `put` and `get`, so it is extremely fast, and I could gain a O(1) performance when I dispatch the routine as long as the number of routine is less than 64(it quite suits for my situation).

However, a limit of **EnumMap** is that its `key type` can only be a `Enum`, instead of `String`, and I could not use the routine name(`string`) to do a quick lookup....

Is there any way to work around this ? Or if only I could do a reverse lookup using a value for a key :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T08:46:56.150

I would keep it simple and just use a `HashMap<String, Handler>` until you can prove that this is a serious bottleneck. I'm assuming here that there's a common superclass or interface that all your handlers extend, so you can just do

```
handlers.get(name).handle(...); 
```

EnumMap won't be any faster if you're starting from a String key as you first have to use `valueOf` to get the enum value corresponding to the string, and [this is itself implemented as a lookup in a HashMap](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Enum.java#Enum.valueOf%28java.lang.Class%2Cjava.lang.String%29)...

# regex - 如何否定正则表达式

> ID：14682905
> 
> 赞同：32
> 
> 时间：2013-02-04T08:27:01.883
> 
> 标签：regex, preg-match, regex-negation

> **可能重复：**
> [正则表达式匹配不包含单词的字符串？](https://stackoverflow.com/questions/406230/regular-expression-to-match-string-not-containing-a-word)
> [如何在 JavaScript 中反转正则表达式？](https://stackoverflow.com/questions/1538512/how-can-i-invert-a-regular-expression-in-javascript)

说我有正则表达式`foo123`。如何匹配**不是** *foo123*的所有内容？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-04T08:40:26.707

为此使用负前瞻。

```
(?!foo123).+ 
```

匹配任何字符串，除了`foo123`

如果您还想匹配空字符串，请使用`(?!foo123).*`

在您的情况下（根据评论），所需的正则表达式是`(?!P[0-9]{1,}).+`.

它匹配**P**和**123**，但不匹配**P123**。

# c# - 是否可以实现具有通用功能的索引运算符'[]'

> ID：14682911
> 
> 赞同：2
> 
> 时间：2013-02-04T08:27:37.373
> 
> 标签：c#, generics, indexing, brackets

> **可能重复：**
> [为什么不能在 .NET 中定义通用索引器？](https://stackoverflow.com/questions/494827/why-it-is-not-posible-to-define-generic-indexers-in-net)
> [如何编写函数以使用索引运算符获取任何对象](https://stackoverflow.com/questions/7544227/how-to-write-a-function-to-take-any-object-with-an-index-operator)

我从来没有见过这样的用法。但我只是想知道是否有可能做出像 bleow 这样的实现。我知道它不起作用。但我的意思是如果存在类似的用法。

```
public T this<T>[T param]
{
    get 
    {
        ....
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T08:33:17.743

不，通用属性和索引器（属性）*是*不可能的。

# asp.net - 使用 Web 服务的 Asp.net 中的 Jqgrid 中未显示数据

> ID：14682912
> 
> 赞同：0
> 
> 时间：2013-02-04T08:27:39.390
> 
> 标签：asp.net, jqgrid

我正在使用 Jqgrid 使用 asp.net 中的 Web 服务将我的数据显示到 jqgrid 中......但它仅在我在查询中给出限制时加载。如果我想在代码中使用第二个 commneted 查询加载所有数据然后它没有加载并给出错误“消息”：“使用 JSON JavaScriptSerializer 进行序列化或反序列化时出错。字符串的长度超过了 maxJsonLength 属性上设置的值。”

这是我的整个模块架构...

index.aspx 页面...

```
<script type="text/javascript">
    $(function () {
        $("#table").jqGrid({
            datatype: function (pdata) { getData(pdata); },
            height: 500,
            colNames: ['username', 'ordinal', 'authcode', 'extension', 'trunk', 'dialnumber', 'dialdate', 'dialtime', 'duration', 'destination', 'price', 'toc'],
            colModel: [
                    { name: 'username', width: 100, sortable: true, align: 'center' },
                    { name: 'ordinal', width: 100, sortable: true, align: 'center' },
                    { name: 'authcode', width: 100, sortable: true },
                    { name: 'extension', width: 100, sortable: true, align: 'center' },
                    { name: 'trunk', width: 100, sortable: true, align: 'center' },
                    { name: 'dialnumber', width: 100, sortable: true, align: 'center' },
                    { name: 'dialdate', width: 100, sortable: true, align: 'center' },
                    { name: 'dialtime', width: 100, sortable: true, align: 'center' },
                    { name: 'duration', width: 100, sortable: true, align: 'center' },
                    { name: 'destination', width: 100, sortable: true, align: 'center' },
                    { name: 'price', width: 100, sortable: true, align: 'center' },
                    { name: 'toc', width: 100, sortable: true, align: 'center' }
                ],
            rowNum: 100,
            rowList: [100, 200, 300],
            pager: '#UsersGridPager',
            sortname: 'username',
            sortable: true,
            viewrecords: true,
            sortorder: 'asc',
            shrinkToFit: false,
            rownumbers: true,
            loadtext: 'Loading..'

        });
        jQuery("#table").jqGrid('navGrid', '#UsersGridPager', { add: false, edit: false, del: false, search: true, refresh: true });
    });

    function getData(pData) {
        $.ajax({
            type: 'POST',
            contentType: "application/json; charset=utf-8",
            url: '<%= ResolveClientUrl("~/WebService.asmx/GetListOfPersons") %>',
            data: '{}',
            dataType: "json",
            success: function (data, textStatus) {
                if (textStatus == "success")
                    ReceivedClientData(JSON.parse(getMain(data)).rows);
            },
            error: function (data, textStatus) {
                alert('An error has occured retrieving data!');
            }
        });
    }

    function ReceivedClientData(data) {
        var thegrid = $("#table");
        thegrid.clearGridData();
        for (var i = 0; i < data.length; i++)
            thegrid.addRowData(i + 1, data[i]);
    }

    function getMain(dObj) {
        if (dObj.hasOwnProperty('d'))
            return dObj.d;
        else
            return dObj;
    }
</script> 
```

JsonHelper.cs 文件

```
// Convert Object to Json String
// <param name="obj">The object to convert</param>
// <returns>Json representation of the Object in string</returns>

public static string ToJson(object obj)
{
    return Newtonsoft.Json.JsonConvert.SerializeObject(obj);
}

public static List<Person> GetPersons()
{
    List<Person> persons = new List<Person>();
    string connectionString = "Server=localhost;Port=3306;Database=projecttt;UID=root;Pwd=techsoft;pooling=false";

    MySqlConnection conn;
    conn = new MySqlConnection(connectionString);
    conn.Open();

    string s = "SELECT username,ordinal,authcode,extension,trunk,dialnumber,dialdate,dialtime,duration,destination,price,toc FROM processeddata_table order by username limit 0,200";
   // string s = "SELECT username,ordinal,authcode,extension,trunk,dialnumber,dialdate,dialtime,duration,destination,price,toc FROM processeddata_table ";
    MySqlCommand cmd = new MySqlCommand(s,conn);

    cmd.ExecuteNonQuery();

    using (MySqlDataReader dr = cmd.ExecuteReader())
    {

        while (dr.Read())
        {
            persons.Add(new Person()
            {
                username = Convert.ToString(dr["username"]),
                ordinal = Convert.ToString(dr["ordinal"]),
                authcode = Convert.ToString(dr["authcode"]),
                extension = Convert.ToString(dr["extension"]),
                trunk = Convert.ToString(dr["trunk"]),
                dialnumber = Convert.ToString(dr["dialnumber"]),
                dialdate = Convert.ToString(dr["dialdate"]),
                dialtime = Convert.ToString(dr["dialtime"]),
                duration = Convert.ToString(dr["duration"]),
                destination = Convert.ToString(dr["destination"]),
                price = Convert.ToString(dr["price"]),
                toc = Convert.ToString(dr["toc"])

            });
        }

    }

    return persons;
} 
```

}

PagedList.cs 文件

```
IEnumerable _rows;
int _totalRecords;
int _pageIndex;
int _pageSize;
object _userData;

public PagedList(IEnumerable rows, int totalRecords, int pageIndex, int pageSize, object userData)
{
    _rows = rows;
    _totalRecords = totalRecords;
    _pageIndex = pageIndex;
    _pageSize = pageSize;
    _userData = userData;
}

public PagedList(IEnumerable rows, int totalRecords, int pageIndex, int pageSize)
    : this(rows, totalRecords, pageIndex, pageSize, null)
{
}

public int total { get { return (int)Math.Ceiling((decimal)_totalRecords / (decimal)_pageSize); } }

public int page { get { return _pageIndex; } }

public int records { get { return _totalRecords; } }

public IEnumerable rows { get { return _rows; } }

public object userData { get { return _userData; } }

public override string ToString()
{
    return Newtonsoft.Json.JsonConvert.SerializeObject(this);
} 
```

}

网络服务.cs

```
[WebMethod]
[ScriptMethod]

public string GetListOfPersons()
{
    List<Person> persons = JsonHelper.GetPersons();
    return Newtonsoft.Json.JsonConvert.SerializeObject(new PagedList(persons, persons.Count, 1, persons.Count));
} 
```

}

个人.cs

```
public string username { get; set; }
public string ordinal { get; set; }
public string authcode { get; set; }
public string extension { get; set; }
public string trunk { get; set; }
public string dialnumber { get; set; }
public string dialdate { get; set; }
public string dialtime { get; set; }
public string duration { get; set; }
public string destination { get; set; }
public string price { get; set; }
public string toc { get; set; } 
```

请大家帮我.Thanx提前..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:48:20.943

你为什么使用`ExecuteNonQuery()`for select ？试试`ExecuteReader()`方法。

看到这个：-[关于 MaxJsonLength 的问题](https://stackoverflow.com/questions/1151987/can-i-set-an-unlimited-length-for-maxjsonlength-in-web-config)

对于本地分页 loadonce: true 可以使用，但仍然会遇到与尝试加载过多数据时相同的错误，这是不建议的。此外，ajax 请求用于处理少量数据

# javascript - 事件侦听器未添加到 div 元素

> ID：14682914
> 
> 赞同：1
> 
> 时间：2013-02-04T08:27:59.993
> 
> 标签：javascript, addeventlistener

我有以下 JavaScript 代码：

```
this._incrementButtonProperties = {  
        "enabled": this.properties.incrementButtonConfig.enabled,  
        "enabledClass" : "SchedMainCtrlIncrementBtn_En",  
        "disabledClass" : "SchedMainCtrlIncrementBtn_Ds",  
        "appData" : this.properties.incrementButtonConfig.appData,  
        "text" : this.properties.incrementButtonConfig.text,  

        "incrementSelectCallback" : this._incrementButtonSelectHandler.bind(this),  
}; 
```

和

```
 this._incrementBtn = document.createElement('div');  
        this._incrementBtn .className = this._incrementButtonProperties.enabledClass;  
        this.divElt.appendChild(this._incrementBtn); 
```

&

```
this._incrementBtn.addEventListener('click', this._incrementButtonProperties.incrementSelectCallback, false); 
```

还，

```
this._prototype._incrementButtonSelectHandler = function(ctrlRef, appData, params)  
{  

     // + & -  
     alert("_incrementButtonSelectHandler called... ");
} 
```

但是没有添加事件侦听器:-(如果我写 document.addEventListener('click', this._incrementButtonProperties.incrementSelectCallback, false); - 那么侦听器将被添加但我只需要它用于“this._incrementBtn” div 元素。

知道出了什么问题吗？

注意：请不要建议使用 jQuery 等。我不想使用任何框架。

谢谢斯内哈
_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:39:24.937

它真的应该读 this._prototype._incrementButtonSelectHandler = ...吗？

不应该是this.prototype吗？否则我看不出 this._incrementButtonSelectHandler 如何对应 this._prototype._incrementButtonSelectHandler。

此外，您在 this._incrementButtonProperties {...} 中有一个尾随逗号，在 Ecmascript 5 之前它实际上是无效的，即使大多数浏览器都会接受它而没有任何抱怨。

# jquery - jQuery 动画：如何沿着指定的弧/贝泽曲线移动？

> ID：14682915
> 
> 赞同：3
> 
> 时间：2013-02-04T08:28:03.120
> 
> 标签：jquery, jquery-animate

我检查了[jQuery Path plugin](https://github.com/weepy/jquery.path)，并尝试沿路径为 DIV 设置动画。我成功地使 DIV 沿着路径移动，但我希望 DIV 根据路径方向前进（跟随 beizer 路径时旋转）。我该怎么做？

这是我当前的代码：

```
$('#car001').click(function() {
    var bezier_params = {
        start: { 
          x: 185, 
          y: 385, 
          angle: 50
        },  
        end: { 
          x:540,
          y:110, 
          angle: -10, 
          length: 0.25
        }
      }
      $("#car001").animate({path : new $.path.bezier(bezier_params)}, 1000);
}); 
```

其中`$('#car001')`仅包含 1 张图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-08T06:35:01.540

看起来 jquery.path 应该通过[调用`atan2`](https://github.com/weepy/jquery.path/blob/master/jquery.path.js#L109).

如果您切换到[https://github.com/heygrady/curve](https://github.com/heygrady/curve)，您可能会得到更好的服务，该网站还有[一篇博客文章，其中包含工作 jsfiddle 演示](http://heygrady.com/blog/2011/07/20/animating-with-curves-in-jquery/)。

我敢肯定还有很多其他的选择。如果您不依赖 HTML DOM，也可以尝试[使用众多 SVG 库之一](http://codepen.io/mattsince87/details/snqLy)。

# java - Java中的变量绑定和关键字this

> ID：14682918
> 
> 赞同：1
> 
> 时间：2013-02-04T08:28:16.050
> 
> 标签：java

在下面的代码中，getX() 方法中的变量 x 如何绑定到 A 类实例的成员字段，即使在运行时“this”指的是 B 类型的对象。这发生在编译时还是运行时时间。

```
class A {

    public void getX(){
        Class cls = this.getClass();  
        System.out.println("The type of the object is: " + cls.getName());
        System.out.format("value of x = %d\n", this.x);}

    public int x = 0;
}

public class B extends A {

    public static void main(String[] args) {
        B obj = new B();
        obj.getX();}

    public int x = 1;
} 
```

输出是：

```
The type of the object is: B
value of x = 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T08:32:56.473

字段不是多态解析的。在编译时，`this.x`静态解析为“获取类 A 中定义的字段 x 的值”。

# iphone - 当标签栏控制器支持iPhone中的所有方向时如何设置标签栏项目的图像

> ID：14682920
> 
> 赞同：0
> 
> 时间：2013-02-04T08:28:19.563
> 
> 标签：iphone, objective-c, ios6, uitabbarcontroller, uitabbaritem

我是IOS开发的新手。我在为 Tabbar 项目动态设置图像时遇到问题。我对 UITabbarItem 进行了分类。

```
@interface CustomTabBarItem : UITabBarItem
{
    UIImage *customHighlightedImage;
    UIImage *customStdImage;
}

@property (nonatomic, retain) UIImage *customHighlightedImage;
@property (nonatomic, retain) UIImage *customStdImage;

@end 
```

并将我的 tabbarcontroller 添加到窗口中。

```
[_tabBarController setViewControllers: [[NSArray alloc] initWithObjects:1,2,3,4,nil] animated: YES];
_tabBarController.selectedIndex = 0;
_tabBarController.delegate = self;
_tabBarController.view.backgroundColor=[UIColor colorWithPatternImage:[UIImage imageNamed:@"tabbarBackground.png"]];
[self.window addSubview:_tabBarController.view];
self.window.rootViewController = _tabBarController;
[self.window makeKeyAndVisible]; 
```

我的 Tabbar 控制器完美支持所有方向。但问题是当我旋转设备时，如何为设备的当前方向设置标签栏项目的图像。框架会自动为每个选项卡设置，但我的图像没有。我的应用程序中有四个选项卡。我通过该网站进行了很多搜索，但无法获得适当的解决方案。

编辑

这是我用于设置图像的代码。

```
 tabBarItemBrowse=[[CustomTabBarItem alloc] init];
    tabBarItemBrowse.imageInsets=UIEdgeInsetsMake(6, 0, -6, 0);
    //    tabBarItemBrowse.customStdImage=[UIImage imageNamed:@"browser.png"];
    //    tabBarItemBrowse.customHighlightedImage=[UIImage imageNamed:@"browser_act.png"];
    if ( [UIApplication sharedApplication].statusBarOrientation==UIInterfaceOrientationPortrait ||  [UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationPortraitUpsideDown)
    {
        tabBarItemBrowse.customStdImage=[UIImage imageNamed:@"browser.png"];
        tabBarItemBrowse.customHighlightedImage=[UIImage imageNamed:@"browser_act.png"];
    }

    else
    {
        tabBarItemBrowse.customStdImage=[UIImage imageNamed:@"browser568.png"];
        tabBarItemBrowse.customHighlightedImage=[UIImage imageNamed:@"browser_act568.png"];

    }
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    BrowseNav  = [[CustomNavigationControllerViewController alloc] initWithRootViewController:self.viewController];
    BrowseNav.tabBarItem = tabBarItemBrowse;
    BrowseNav.navigationBar.tintColor = [UIColor blackColor];
    BrowseNav.navigationBarHidden=YES;
    [tabBarItemBrowse release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:15:51.713

试试这个，首先，您必须拍摄两张图像，一张用于纵向模式，另一张用于横向模式。当您的设备更改方向时，应该调用 -(void)willRotateToInterfaceOrientation 方法。根据方向，您可以设置标签栏项目图像。

```
 -(void)willRotateToInterfaceOrientation: (UIInterfaceOrientation)orientation duration: (NSTimeInterval)duration
{
if (UIInterfaceOrientationIsPortrait(self.interfaceOrientation)) 
{

  yourViewController.tabBarItem.image = [UIImage imageNamed:@"portrait.png"] ;
}
 else

{

  yourViewController.tabBarItem.image = [UIImage imageNamed:@"Landscape.png"] ;

}

} 
```

# security - Meteor - 检查用户是否以管理员身份登录（客户端 - 端）

> ID：14682924
> 
> 赞同：2
> 
> 时间：2013-02-04T08:28:45.157
> 
> 标签：security, node.js, meteor, administrator

我目前正在开发一个需要用户和管理员的应用程序。我现在要做的是，我在客户端上创建了一个管理员帐户，用户名是“admin”，默认密码应该在帐户-ui 上更改。

我这样做是因为创建这样的用户：

```
Accounts.createUser({
    username    : 'admin',
    email       : 'test@test.com',
    password    : 'changethispasswordovertheuserinterface',
    profile     : { type : 'admin' }
}); 
```

在服务器端对我不起作用。这意味着我只需在我的 client.js 中创建管理员并使用此代码检查管理员是否已登录。

```
Template.admin.isAdmin = function () {
    var currentUser = Meteor.user();
    // Is this hackable?
    if (null !== currentUser) {
        if ('admin' === currentUser.username) {
            return true;
        }
    }
}; 
```

这是解决这个问题的最佳方法吗？最重要的是，我的网站可以像这样被黑客入侵吗（有人可以伪造它吗）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T13:44:54.460

是的，这是可破解的，可以拉起 chrome 检查器并很容易地对其进行修改。甚至更快，通过`Template.admin.isAdmin = function () { return true; }`在 Chrome 的网络控制台中输入类似的内容

如果用户是管理员，最好的方法是仅从服务器端向客户端提供信息。因此，如果从客户端执行操作，这将意味着使用`Meteor.allow`以确保只能由管理用户更改数据库。

这也取决于您想使用“isAdmin”做什么。如果它的内容，您可以在服务器端生成 html 并将其以`Meteor.methods`. 目前，模板系统不提供根据用户文档包含的内容锁定客户端上的 UI。

对于任何管理命令，您都可以使用 a`Meteor.call`在服务器上审查用户并在那里执行事务。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-08-03T14:01:19.693

[该线程](https://stackoverflow.com/questions/15936457/how-to-create-a-default-user-on-meteor)上的答案也有效，并且投票最多的答案具有服务器端 Meteor 方法调用的代码。

# struts2 - 如何使用显示表标签对具有空值的日期进行排序

> ID：14682926
> 
> 赞同：0
> 
> 时间：2013-02-04T08:28:49.810
> 
> 标签：struts2, displaytag

我有一个日期列表，其中一些可能包含空值。现在我想使用显示表标签显示它并使其可排序，并且日期显示为空的地方我想将其更改为字符串“NA”。如何我做吗？这是我的专栏（我使用的是 struts 2）

```
<display:column property="firstLoginTime" title="First timelogged onto site" sortable="true"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:37:44.687

添加属性 ie`firstLoginTimeHtml`以通过 getter 方法显示格式化日期。然后添加`sortProperty`您的原始日期。
`<display:column sortProperty="firstLoginTime" title="First timelogged onto site" sortable="true">`
`<c:out value="${row.firstLoginTimeHtml}"/>`
`</display:column>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T09:04:10.767

抱歉，我早些时候在我的 iPhone 上消磨时间。

注意。这只是基于查看 displaytag 文档，但是您是否尝试过编写自定义比较器？

```
public class CustomDateComparator implements Comparator<Date> {
    public int compare(Date date1, Date date2) {
        if (date1 == null) {
            return -1;
        }

        if (date2 == null) {
            return 1;
        }

        return date1.compareTo(date2);
    }
} 
```

在您的 jsp 中，displaytag 允许您指定这样的比较器 -

```
<display:column 
   property="firstLoginTime" 
   title="First timelogged onto site"
   sortable="true"
   comparator="your.project.CustomDateComparator"
/> 
```

# javascript - 如何在 Firefox/Chrome 扩展程序中访问 Evernote API？

> ID：14682927
> 
> 赞同：3
> 
> 时间：2013-02-04T08:29:00.823
> 
> 标签：javascript, google-chrome-extension, oauth-2.0, evernote

我愿意摆弄 Evernote API 并使用它的 Chrome/FF 扩展。我了解到到目前为止还没有可用的 JS API，这让我想到在 php/python 中创建一个中间层服务，并让我的扩展程序通过该服务访问 Evernote。

我感到困惑的地方是身份验证。如何让用户通过浏览器扩展通过 Evernote 进行身份验证？如果它显示一个 html 静态页面，然后重定向到 EverNote 登录页面并在服务器端存储访问令牌等。我的扩展程序将如何记住登录的详细信息并在我的 Chrome 扩展程序中调用服务和创建/检索笔记。

App的工作流程如下：

*   用户将能够通过扩展程序登录 Evernote（通过访问日志页面）。
*   成功记录后，将通过 Ajax 请求通过 Chrome 扩展中的中间层服务检索注释。
*   然后，用户可以通过 AJAX 调用服务发布笔记，然后最终通过其 API 存储在 Evernote

请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:45:51.957

没有官方的 javascript API。但是你可以找到一些非官方的。看看这里例如：[http](http://discussion.evernote.com/topic/22476-api-for-javascript/) ://discussion.evernote.com/topic/22476-api-for-javascript/ 但是不知道它们是如何工作的。

这是另一个解决方案：不确定这是不是正确的方法，但您可以模仿 evernote webclipper 的工作方式。基本上，它使用内部 customerKey / customerSecret 以及用户名和密码来检索 oauthToken。然后它将这个 OauthToken 用于所有 api 调用。

您可以在 webclipper 源代码的 Auth.js 文件中找到该过程。在 Mac 上，该文件位于 /Users/%user%/Library/Application Support/Google/Chrome/Default/Extensions/pioclpoplcdbaefihamjohnefbikjilc/5.9.5_0/js/main/Auth.js

我不知道在其他系统上，但在 Google 上应该不难找到。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-28T15:55:44.067

现在你可以找到一个官方的 JavaScript 库。（虽然我不确定 Chrome 扩展的限制）

[https://github.com/evernote/evernote-sdk-js](https://github.com/evernote/evernote-sdk-js)

我在这里找到它。 [http://discussion.evernote.com/topic/34619-how-to-access-evernote-api-in-firefoxchrome-extensions/#entry250743](http://discussion.evernote.com/topic/34619-how-to-access-evernote-api-in-firefoxchrome-extensions/#entry250743)

图书馆的常见问题解答说

```
Can I test my code in the browser

Yes. You can test your code in Chrome. Open Chrome using open /Applications/Google\ Chrome.app/ --args --disable-web-security . 
```

# ios - 应用程序不播放声音

> ID：14682928
> 
> 赞同：1
> 
> 时间：2013-02-04T08:29:07.463
> 
> 标签：ios, avfoundation, wav

我正在为 iOS 制作音板，并使用以下代码：

```
#import <AVFoundation/AVAudioPlayer.h>

...

 NSString *path = [[NSBundle mainBundle] pathForResource:@"bg" ofType:@"wav"];
AVAudioPlayer* theAudio=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];

theAudio.delegate=self;
[theAudio play];
NSLog(@"Audio Played"); 
```

我在日志中看到“已播放音频”，但我什么也没听到。

我会收到这个错误：

```
 Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-02-04 09:34:30.988 Ronald Goedemondt[461:1c03] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-02-04 09:34:31.051 Ronald Goedemondt[461:1c03] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-02-04 09:34:31.066 Ronald Goedemondt[461:1c03] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security 
```

谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:32:49.760

**编辑：该错误使这似乎是模拟器尝试在 iOS 5.1 或更低版本上播放声音时发生的已知错误。这不应该发生在实际设备或 iOS 6.0 模拟器上。**

在播放音频文件之前，您需要调用`[theAudio prepareToPlay];` 这似乎是这里的问题。

```
#import <AVFoundation/AVAudioPlayer.h>

...

 NSString *path = [[NSBundle mainBundle] pathForResource:@"bg" ofType:@"wav"];
AVAudioPlayer* theAudio=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];

theAudio.delegate=self;
[theAudio prepareToPlay];
[theAudio play];
NSLog(@"Audio Played"); 
```

除此之外，您可以检查音频文件的路径等。

```
if ((sound_file = [[NSBundle mainBundle] pathForResource:@"bg" ofType:@"wav"])
{
     //Audio Stuff
}
else{
     //Error
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:56:35.930

见这里：[这个 gdb 输出是什么意思？](https://stackoverflow.com/questions/7961840/what-does-this-gdb-output-mean/8317546#8317546)

此问题由 Apple 在 Bug ID# 10555404 下提交。已在 XCode 4.5、iOS 6.0 中修复

# android - 在Android中设置滚动条的大小和位置？

> ID：14682930
> 
> 赞同：1
> 
> 时间：2013-02-04T08:29:16.637
> 
> 标签：android, scrollbar

我正在研究一个 ListView，我必须在其中设置滚动条的大小。还有滚动条在屏幕左侧的位置。

我使用了带有代码的自定义滚动条：

```
 <?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <gradient
        android:angle="45"
        android:endColor="#33b8e9"
        android:startColor="#33b8e9" />

    <corners android:radius="1dp" />
    <size android:width="2dip"
        android:height="5dip"/>
</shape> 
```

但仍然得到一个巨大的滚动条，如图所示： ![在此处输入图像描述](../Images/039483f103fe498f0368c16ee0fd51d6.png)

但我需要像这张图片一样的滚动条。 ![在此处输入图像描述](../Images/b0530a569462c2f2f3f0ef1b893d0081.png)

# python - python中的中文和日文字符支持

> ID：14682933
> 
> 赞同：8
> 
> 时间：2013-02-04T08:29:37.483
> 
> 标签：python, python-2.5

如何正确阅读日文和中文字符。我正在使用python 2.5。输出显示为`"E:\Test\?????????"`

```
path = r"E:\Test\は最高のプログラマ"
t = path.encode()
print t
u = path.decode()
print u
t = path.encode("utf-8")
print t
t = path.decode("utf-8")
print t 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-04T08:55:08.263

请务必阅读[Python Unicode HOWTO](http://docs.python.org/2/howto/unicode.html)；它解释了如何在 Python 代码中处理和包含非 ASCII 文本。

如果您想在代码中包含日语文本文字，您有几种选择：

*   使用 unicode 文字（创建`unicode`对象而不是字节字符串），但任何非 ascii 代码点都由 unicode 转义字符表示。它们采用 的形式`\uabcd`，因此是反斜杠、a`u`和 4 个十六进制数字：

    ```
    ru = u'\u30EB' 
    ```

    将是一个字符，片假名“ru”代码点（“ル”）。

*   使用 unicode 文字，但以某种编码形式包含字符。您的文本编辑器将以给定的编码（例如 UTF-16）保存文件；您需要在源文件的顶部声明该编码：

    ```
    # encoding: utf-16

    ru = u'ル' 
    ```

    其中包含“ル”而不使用转义符。Python 2 文件的默认编码是 ASCII，因此通过声明编码，您可以直接使用日语。

*   使用字节字符串文字，准备好编码。通过其他方式对代码点进行编码，并将它们包含在您的字节字符串文字中。如果你要做的只是以编码形式使用它们，这应该没问题：

    ```
    ru = '\xeb\x30'  # ru encoded to UTF16 little-endian 
    ```

    我将“ル”编码为 UTF-16 little-endian，因为这是默认的 Windows NTFS 文件名编码。

下一个问题将是您的终端，Windows 控制台因不支持许多开箱即用的字符集而臭名昭著。您可能希望将其配置为处理 UTF-8。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/3578685/how-to-display-utf-8-in-windows-console)，但您需要在控制台中运行以下命令：

```
chcp 65001 
```

切换到 UTF-8，您可能需要切换到可以处理您的代码点的控制台字体（也许是 Lucida？）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T09:40:06.713

有两个独立的问题：

1.  如果您使用非 ascii 字符并为表示文本的数据使用 Unicode 文字，则应指定 Python 源编码，例如：

    ```
    # -*- coding: utf-8 -*-
    path = ur"E:\Test\は最高のプログラマ" 
    ```

2.  [将 Unicode 打印到 Windows 控制台很复杂](http://bugs.python.org/issue1602)，但如果您设置了正确的字体，那么只需：

    ```
    print path 
    ```

    可能会奏效。

不管你的控制台能否显示路径；将 Unicode 路径传递给文件系统函数应该没问题，例如：

```
entries = os.listdir(path) 
```

不要调用`.encode(char_enc)`字节字符串，而是调用 Unicode 字符串。
不要调用`.decode(char_enc)`Unicode 字符串，而是调用字节字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T08:37:31.093

您应该强制字符串成为`unicode`像

```
path = ur"E:\Test\は最高のプログラマ" 
```

与 2.5 相关的字符串文字的文档位于[此处](http://docs.python.org/2.5/ref/strings.html)

*编辑：*如果对象在 2.5 中，我不肯定，`unicode`但文档确实说明`\uXXXX[XXXX]`将被处理并且字符串将是“Unicode 字符串”。

# python - 通过打开另一个 QTableView，QTableView 数据消失

> ID：14682935
> 
> 赞同：1
> 
> 时间：2013-02-04T08:29:40.037
> 
> 标签：python, pyqt4, qtableview

我有一个使用 PyQt4 在 Python 中开发的应用程序，其中我使用 QTableView 来显示报告。当我用 QTableView 打开一个报告窗口时，它会正确显示结果。如果我用 QTableView 打开另一个报告窗口，它会正确显示结果。

现在两个窗口都在 QTableViews 中显示数据。

现在的问题是，当我选择第一个报告窗口时，其中的数据正在消失。

谁能告诉我我在做什么错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:03:29.110

`QtSql.QSqlDatabase` 检查您是否对创建的所有视图使用相同的实例。

# image - 如何在 Matlab 中显示 RGB 图像的直方图？

> ID：14682936
> 
> 赞同：18
> 
> 时间：2013-02-04T08:29:43.117
> 
> 标签：image, matlab, histogram

我在 matlab 中使用

```
input = imread ('sample.jpeg'); 
```

然后我做

```
imhist(input); 
```

它给出了这个错误：

```
??? Error using ==> iptcheckinput
Function IMHIST expected its first input, I or X, to be two-dimensional.

Error in ==> imhist>parse_inputs at 275
iptcheckinput(a, {'double','uint8','logical','uint16','int16','single'}, ...

Error in ==> imhist at 57
[a, n, isScaled, top, map] = parse_inputs(varargin{:}); 
```

运行后`size(input)`，我看到我的输入图像大小`300x200x3`。我知道第三维是用于颜色通道的，但是有什么方法可以显示直方图吗？谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-04T08:34:07.113

`imhist`显示*灰度*或*二值*图像的直方图。`rgb2gray`在图像上使用，或用于一次`imhist(input(:,:,1))`查看一个通道（在此示例中为红色）。

或者，您可以这样做：

```
hist(reshape(input,[],3),1:max(input(:))); 
colormap([1 0 0; 0 1 0; 0 0 1]); 
```

同时显示3个频道...

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-11-03T18:21:14.077

我喜欢在一个图中绘制红色、绿色和蓝色的直方图：

```
%Split into RGB Channels
Red = image(:,:,1);
Green = image(:,:,2);
Blue = image(:,:,3);

%Get histValues for each channel
[yRed, x] = imhist(Red);
[yGreen, x] = imhist(Green);
[yBlue, x] = imhist(Blue);

%Plot them together in one plot
plot(x, yRed, 'Red', x, yGreen, 'Green', x, yBlue, 'Blue'); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-24T09:53:17.073

直方图将具有强度级别的像素数。你的是 rgb 图像。因此，您首先需要将其转换为强度图像。

这里的代码将是：

```
input = imread ('sample.jpeg');

input=rgb2gray(input);

imhist(input);

imshow(input); 
```

您将能够获得图像的直方图。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-20T13:10:50.497

```
img1=imread('image.jpg');
img1=rgb2gray(img1);
subplot(2,2,1);
imshow(img1);
title('original image');
grayImg=mat2gray(img1);
subplot(2,2,2);
imhist(grayImg);
title('original histogram'); 
```

记得包含 mat2gray(); 因为它将矩阵A转换为强度图像grayImg。返回的矩阵 grayImg 包含 0.0（黑色）到 1.0（全强度或白色）范围内的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-16T10:44:35.293

直方图可用于分析图像中的像素分布。直方图绘制图像中相对于强度值的像素数。

```
img1=imread('image.jpg');
hist(img1); 
```

# php - PHP 内容未显示

> ID：14682943
> 
> 赞同：-1
> 
> 时间：2013-02-04T08:30:24.490
> 
> 标签：php, html, css

我在一个单独的 php 文件中有一些关于 PHP echo 命令的 HTML 内容。代码如下所示..

```
 <?php
echo "
    <div id="footer">
        <div id="footer-contact">
                <p><strong>Gardencrafts Heswall Limited</strong> <br> The Nurseries, Lower Thingwall Lane, Thingwall, <br> Wirral CH61 1AZ</p>
                <p><strong>Telephone :</strong> 0151 648 5840</p>
                <p><strong>Fax :</strong> 0151 648 5840</p>
                <p><strong>Email :</strong> gardencrafts1@gmail.com</p>
         </div>
         <div id="footer-icons">
            <div id="social-tab">
                <div id="twitter"><a href='https://twitter.com/GardencraftsUk' class='twitter-follow-button' data-show-count="false">Follow @GardencraftsUk</a></div>
                <div class="fb-like" data-href='https://www.facebook.com/pages/Gardencrafts/200615766704712?fref=ts' data-send="false" data-layout="button_count" data-width="200" data-show-faces="false" data-font="trebuchet ms"></div>
            </div>
            <div id="awards">
                    <img src="images/f1.jpg">
                    <img src="images/f2.jpg">
                    <img src="images/f3.jpg">
            </div>
            <div id="copy">
               <p>Copyright © 2011 Gardencrafts.</p>
            </div>
         </div>
    </div>
";
 ?> 
```

我将其包含在带有以下代码的 php 页面中。

```
 <?php include("../script/footer.php"); ?> 
```

脚本位于网站根目录中名为 scrpit 的文件夹中。但是当我包含这个时，内容没有显示！谁能帮帮我吗！

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T08:32:19.060

您的文件中有语法错误。添加`\`以转义引号或将它们更改为单个引号：

```
 <?php
echo "
    <div id=\"footer\">
        <div id=\"footer-contact\">
                <p><strong>Gardencrafts Heswall Limited</strong> <br> The Nurseries, Lower Thingwall Lane, Thingwall, <br> Wirral CH61 1AZ</p>
                <p><strong>Telephone :</strong> 0151 648 5840</p>
                <p><strong>Fax :</strong> 0151 648 5840</p>
                <p><strong>Email :</strong> gardencrafts1@gmail.com</p>
         </div>
         <div id=\"footer-icons\">
            <div id=\"social-tab\">
                <div id=\"twitter\"><a href='https://twitter.com/GardencraftsUk' class='twitter-follow-button' data-show-count=\"false\">Follow @GardencraftsUk</a></div>
                <div class=\"fb-like\" data-href='https://www.facebook.com/pages/Gardencrafts/200615766704712?fref=ts' data-send=\"false\" data-layout=\"button_count\" data-width=\"200\" data-show-faces=\"false\" data-font=\"trebuchet ms\"></div>
            </div>
            <div id=\"awards\">
                    <img src=\"images/f1.jpg\">
                    <img src=\"images/f2.jpg\">
                    <img src=\"images/f3.jpg\">
            </div>
            <div id=\"copy\">
               <p>Copyright © 2011 Gardencrafts.</p>
            </div>
         </div>
    </div>
";
 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:34:08.220

为什么要回显这样的 HTML 块？没有必要这样做。你的路对吗？（你描述的是 include('script/footer.php');）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T08:35:11.487

```
 <?php include("script/footer.php"); ?> 
```

像这样包括你的页脚文件。认为它会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T08:38:43.893

首先在 echo 之后，最后使用单引号而不是双引号，它将起作用，如下所示：

```
 <?php
echo '
    <div id="footer">
        <div id="footer-contact">
                <p><strong>Gardencrafts Heswall Limited</strong> <br> The Nurseries, Lower Thingwall Lane, Thingwall, <br> Wirral CH61 1AZ</p>
                <p><strong>Telephone :</strong> 0151 648 5840</p>
                <p><strong>Fax :</strong> 0151 648 5840</p>
                <p><strong>Email :</strong> gardencrafts1@gmail.com</p>
         </div>
         <div id="footer-icons">
            <div id="social-tab">
                <div id="twitter"><a href="https://twitter.com/GardencraftsUk" class="twitter-follow-button" data-show-count="false">Follow @GardencraftsUk</a></div>
                <div class="fb-like" data-href="https://www.facebook.com/pages/Gardencrafts/200615766704712?fref=ts" data-send="false" data-layout="button_count" data-width="200" data-show-faces="false" data-font="trebuchet ms"></div>
            </div>
            <div id="awards">
                    <img src="images/f1.jpg">
                    <img src="images/f2.jpg">
                    <img src="images/f3.jpg">
            </div>
            <div id="copy">
               <p>Copyright © 2011 Gardencrafts.</p>
            </div>
         </div>
    </div>
';
 ?> 
```

在里面你只需要有双引号或像 \' 那样转义单引号。

哈哈。或者只是简单地输出没有 echo 的 html 代码，如下所示：

```
<div id="footer">
    <div id="footer-contact">
            <p><strong>Gardencrafts Heswall Limited</strong> <br> The Nurseries, Lower Thingwall Lane, Thingwall, <br> Wirral CH61 1AZ</p>
            <p><strong>Telephone :</strong> 0151 648 5840</p>
            <p><strong>Fax :</strong> 0151 648 5840</p>
            <p><strong>Email :</strong> gardencrafts1@gmail.com</p>
     </div>
     <div id="footer-icons">
        <div id="social-tab">
            <div id="twitter"><a href="https://twitter.com/GardencraftsUk" class="twitter-follow-button" data-show-count="false">Follow @GardencraftsUk</a></div>
            <div class="fb-like" data-href="https://www.facebook.com/pages/Gardencrafts/200615766704712?fref=ts" data-send="false" data-layout="button_count" data-width="200" data-show-faces="false" data-font="trebuchet ms"></div>
        </div>
        <div id="awards">
                <img src="images/f1.jpg">
                <img src="images/f2.jpg">
                <img src="images/f3.jpg">
        </div>
        <div id="copy">
           <p>Copyright © 2011 Gardencrafts.</p>
        </div>
     </div>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T08:41:41.543

你为什么使用 php 标签和 echo ？这样做，只有该页面中的此内容（html）。如果您想在此处使用任何 php 内容，只需添加`<?php echo $content; ?>`是否需要。

```
<div id="footer">
    <div id="footer-contact">
            <p><strong>Gardencrafts Heswall Limited</strong> <br> The Nurseries, Lower Thingwall Lane, Thingwall, <br> Wirral CH61 1AZ</p>
            <p><strong>Telephone :</strong> 0151 648 5840</p>
            <p><strong>Fax :</strong> 0151 648 5840</p>
            <p><strong>Email :</strong> gardencrafts1@gmail.com</p>
     </div>
     <div id="footer-icons">
        <div id="social-tab">
            <div id="twitter"><a href='https://twitter.com/GardencraftsUk' class='twitter-follow-button' data-show-count="false">Follow @GardencraftsUk</a></div>
            <div class="fb-like" data-href='https://www.facebook.com/pages/Gardencrafts/200615766704712?fref=ts' data-send="false" data-layout="button_count" data-width="200" data-show-faces="false" data-font="trebuchet ms"></div>
        </div>
        <div id="awards">
                <img src="images/f1.jpg">
                <img src="images/f2.jpg">
                <img src="images/f3.jpg">
        </div>
        <div id="copy">
           <p>Copyright © 2011 Gardencrafts.</p>
        </div>
     </div>
</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T08:46:23.217

尝试在 div 中使用单引号而不是双引号，就像

```
<?php 
echo "<div id='footer'></div>"; 
```

?>

这也可能有帮助。

# sql-server - MSSQL：将执行语句的值与表中的另一个字符串一起插入

> ID：14682947
> 
> 赞同：1
> 
> 时间：2013-02-04T08:30:59.973
> 
> 标签：sql-server

**是）我有的**

我目前正在将当前目录中的所有 SQL 文件插入到临时表中：

```
create table #tmpSQLFiles(SQLFileName varchar(max))  
set @SqlStatement = 'master.dbo.xp_cmdshell ''dir /b "' + @DirPath + '*.sql"'''

insert into #tmpSQLFiles
execute (@SqlStatement) 
```

这很好用。

**我想要的是**

现在我希望表有一个额外的`varchar`列，我可以在其中存储某个所需的字符串：

```
create table #tmpSQLFiles(SQLFileName varchar(max), MyString varchar(max))
set @SqlStatement = 'master.dbo.xp_cmdshell ''dir /b "' + @DirPath+ '*.sql"''' 
```

**我试过的**

我该怎么做插入？我试过了 ：

```
insert into #tmpSQLFiles (SQLFileName, MyString) values (execute (@SqlStatement), 'aa') 
```

或者 ：

```
declare @ExecutedStmt varchar(max)
set @ExecutedStmt = execute (@SqlStatement)
-- But the above line is not correct. 
```

这两个中的任何一个都对我有用。我不想在第二列之后插入和更新。

关于如何实现这一目标的任何想法？谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:44:54.667

尝试使用表变量作为中介 - 不是最漂亮的，但可以完成工作：

```
create table #tmpSQLFiles(SQLFileName varchar(max), MyString varchar(max))
set @SqlStatement = 'master.dbo.xp_cmdshell ''dir /b "' + @DirPath + '*.pdf"'''

DECLARE @TempOutpt TABLE ([output] varchar(500))
insert into @TempOutpt ([output])
execute (@SqlStatement)

insert into #tmpSQLFiles (SQLFileName, MyString)
select [output], 'my string here' from @TempOutpt

select * from #tmpSQLFiles 
```

如果您没有使用扩展存储过程 ( `xp_cmdshell`)，您可能已经能够使用`OPENROWSET`来执行 SP：

```
SELECT *fields* 
FROM OPENROWSET('SQLNCLI', 
                'Server=*your_server*;Trusted_Connection=yes;Database=*your_database*', 
                'exec *stored_procedure* *parameters*') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T09:15:36.170

您需要使用输出参数，以便可以在下一个 INSERT 中使用结果：

```
 DECLARE @result INT, @sql NVARCHAR(512) 

    SET @sql = N'SELECT @result = COUNT(*) FROM ' + @dbname + '.INFORMATION_SCHEMA.TABLES' 

    EXEC sp_executesql 
        @query = @sql, 
        @params = N'@result INT OUTPUT', 
        @result = @result OUTPUT 

    PRINT @result 
```

# android - Jsoup 解析特定属性

> ID：14682951
> 
> 赞同：0
> 
> 时间：2013-02-04T08:31:35.130
> 
> 标签：android, parsing, jsoup

我是 Android 开发和 HTML 解析的新手。有特定的结构，例如

```
 <div class="submitted"> TEXT 1 <div class="class"> TEXT 2 </div></div> 
```

我只需要提取**TEXT 1**。

元素 a = doc.select("div[class]").get(x); 其中 x - 整数，不能按我的需要工作。此外，我无法指定 select("div[class="submitted"])。

如何仅从“提交”类中选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:34:37.090

您应该阅读[文档](http://jsoup.org/cookbook/extracting-data/selector-syntax)。您可以通过 选择班级`div.submitted`。

# java - Mockito 验证方法不检测方法调用

> ID：14682955
> 
> 赞同：5
> 
> 时间：2013-02-04T08:32:09.943
> 
> 标签：java, mockito

我正在尝试验证是否在我模拟的对象上调用了一个方法：

```
public class MyClass{
    public String someMethod(int arg){
        otherMethod();
        return "";
    }

    public void otherMethod(){ }
}    

public void testSomething(){
    MyClass myClass = Mockito.mock(MyClass.class);

    Mockito.when(myClass.someMethod(0)).thenReturn("test");

    assertEquals("test", myClass.someMethod(0));

    Mockito.verify(myClass).otherMethod(); // This would fail
} 
```

这不是我的确切代码，但它模拟了我正在尝试做的事情。尝试验证`otherMethod()`已调用时，代码将失败。这个对吗？我对该`verify`方法的理解是它应该检测在存根方法（`someMethod`）中调用的任何方法

我希望我的问题和代码很清楚

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T08:37:36.597

不，Mockito 模拟只会在所有调用上返回 null，除非你用例如覆盖。`thenReturn()`等等

您正在寻找的是一个`@Spy`，例如：

```
MyClass mc = new MyClass();
MyClass mySpy = Mockito.spy( mc );
...
mySpy.someMethod( 0 );
Mockito.verify( mySpy ).otherMethod();   // This should work, unless you .thenReturn() someMethod! 
```

如果您的问题是`someMethod()`包含您不想执行而是模拟的代码，那么注入模拟而不是模拟方法调用本身，例如：

```
OtherClass otherClass; // whose methods all throw exceptions in test environment.

public String someMethod(int arg){
    otherClass.methodWeWantMocked();
    otherMethod();
    return "";
} 
```

因此

```
MyClass mc = new MyClass();
OtherClass oc = Mockito.mock( OtherClass.class );
mc.setOtherClass( oc );
Mockito.when( oc.methodWeWantMocked() ).thenReturn( "dummy" ); 
```

我希望这是有道理的，并且对您有所帮助。

干杯，

# c# - 如何读写xls和xlsx？

> ID：14682961
> 
> 赞同：-3
> 
> 时间：2013-02-04T08:32:37.250
> 
> 标签：c#, xls, xlsx

请建议图书馆使用这两种类型。

我需要一个图书馆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:34:41.367

Microsoft.Office.Excel 或 Microsoft.Office.Interop

对于 XSLX，您可以使用 OpenXML，但工作量很大。优点是您无需安装 Office 即可使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:40:09.210

[NetOffice](http://netoffice.codeplex.com/ "网络办公")在 C# 中运行良好。

# javascript - 在IE7浏览器jQuery v1.7.1显示语法错误

> ID：14682963
> 
> 赞同：-8
> 
> 时间：2013-02-04T08:32:39.527
> 
> 标签：javascript, jquery, internet-explorer

在我的网站中，我使用 jquery v1.7.1
在其他浏览器（IE9，IE8）中它工作正常但在 IE7 中它显示以下语法错误。

```
SCRIPT5022: Syntax error, unrecognized expression: hover 
jquery.min.js, line 3 character 14659 
```

如果你们对此有任何想法，请打电话给我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T01:11:51.263

根据 jQuery [Ticket #11120](http://bugs.jquery.com/ticket/11120)，如果您有一个以 TAB 字符开头或结尾的选择器，除非选择器还包含类名，否则会发生这种情况。检查所有选择器并确保它们都不包含 TAB。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-03T05:34:37.927

你可以看看下面的链接。。

[http://www.thalesjacobi.com/Jquery_error_uncaught_exception_Syntax_error_unrecognized_expression](http://www.thalesjacobi.com/Jquery_error_uncaught_exception_Syntax_error_unrecognized_expression)

[http://jamesallen.name/index.cfm/2009/3/12/JQuery-selector-problem--Syntax-error-unrecognized-expression-fix](http://jamesallen.name/index.cfm/2009/3/12/JQuery-selector-problem--Syntax-error-unrecognized-expression-fix)

这些链接可能会对您有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-30T08:20:15.780

这是因为您的脚本中有语法错误。由于您没有提供脚本，因此我无法告诉您语法错误是什么，但您可能想看看：

*   [票证 #11120：某些选择器中的选项卡在 IE7 中中断](http://bugs.jquery.com/ticket/11120)（jQuery 1.7.1 中的错误已在 1.8 中修复）
*   [“jQuery 中不支持 :focus 和 :hover 选择器”](http://bugs.jquery.com/ticket/6881)
*   [未捕获的错误：语法错误，无法识别的表达式：悬停](https://stackoverflow.com/q/10704183/712765)
*   [“没有像样的方法来支持原生没有它的浏览器上的 :hover 选择器...... jQuery API 文档没有列出它，所以它不是我们承诺跨浏览器工作的选择器。”](http://bugs.jquery.com/ticket/4434)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-03T19:41:52.633

检查你所有的对象，也许最后一个属性后面有一个逗号。

```
...
},    
lastProperty: true, 
```

然后删除它..

# c# - PhotoCamera API：如何正确处理它？

> ID：14682964
> 
> 赞同：2
> 
> 时间：2013-02-04T08:32:40.937
> 
> 标签：c#, windows-phone-7, xaml, camera, windows-phone-8

我正在使用`PhotoCamera`API 构建一个二维码扫描页面（使用 ZXing）。但是，此页面只是应用程序的一小部分，因此并不总是显示。因此，应用程序在此页面和其他一些具有公共控件的页面之间导航。

问题是，有时，在扫描后，整个应用程序会在没有真正原因的情况下减慢到 30fps 而不是 60fps。我怀疑相机仍在后台运行，帧同步将应用程序锁定为 30fps，这是我的问题：**如何正确处理使用`PhotoCamera`API 的页面？**

我的 XAML：

```
<Grid Background="Black">
    <ProgressBar x:Name="PBar" IsIndeterminate="True" VerticalAlignment="Center" />

    <Rectangle x:Name="ScanRect">
        <Rectangle.Fill>
            <VideoBrush x:Name="ScanVideoBrush" />
        </Rectangle.Fill>
    </Rectangle>
</Grid> 
```

我的 C# 停止扫描过程：

```
 private void StopScan() {
        if (analysisTimer != null) {
            analysisTimer.Stop();
            analysisTimer = null;
        }

        if (focusTimer != null) {
            focusTimer.Stop();
            focusTimer = null;
        }

        if (camera != null) {
            camera.Dispose();
            camera.Initialized -= OnCameraInitialized;
            camera = null;
        }

        // Following two lines are a try to dispose stuff 
        // as much as possible, but the app still lags
        // sometimes after a scan...

        ScanVideoBrush.SetSource(new MediaElement());
        ScanRect.Fill = new SolidColorBrush(Colors.Black);
    } 
```

注意：我正在 Lumia 920 上测试该应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:33:27.227

调用`cam.Dispose();`应该释放 Camera 对象使用的图像源流和空闲资源，这样就可以了。

您确定要释放内存，即取消订阅 PhotoCamera 类事件吗？

`StopScan`什么时候调用你的方法？一个好的做法是`OnNavigatingFrom`在`PhoneApplicationPage`.

这是来自 MSDN 的处理 PhotoCamera 的代码示例：

```
protected override void OnNavigatingFrom(System.Windows.Navigation.NavigatingCancelEventArgs e)
{
    if (cam != null)
    {
        // Dispose camera to minimize power consumption and to expedite shutdown. 
        cam.Dispose();

        // Release memory, ensure garbage collection. 
        cam.Initialized -= cam_Initialized;
        cam.CaptureCompleted -= cam_CaptureCompleted;
        cam.CaptureImageAvailable -= cam_CaptureImageAvailable;
        cam.CaptureThumbnailAvailable -= cam_CaptureThumbnailAvailable;
        cam.AutoFocusCompleted -= cam_AutoFocusCompleted;
        CameraButtons.ShutterKeyHalfPressed -= OnButtonHalfPress;
        CameraButtons.ShutterKeyPressed -= OnButtonFullPress;
        CameraButtons.ShutterKeyReleased -= OnButtonRelease;
    }
} 
```

[资源](http://code.msdn.microsoft.com/wpapps/Basic-Camera-Sample-52dae359/sourcecode?fileId=62725&pathId=1134966225)

# android - URI VS ACTION_GET_CONTENT

> ID：14682967
> 
> 赞同：1
> 
> 时间：2013-02-04T08:32:56.787
> 
> 标签：android, image, android-intent, uri

何时使用

```
// to get image randomly
    public static Uri getRandomImage(ContentResolver resolver) {

        String[] projection = new String[] { BaseColumns._ID
        };
        Uri uri = new Random().nextInt(1) == 0 ? Media.EXTERNAL_CONTENT_URI
                : Media.INTERNAL_CONTENT_URI;

        Cursor cursor = Media.query(resolver, uri, projection, null,
                MediaColumns._ID);
        if (cursor == null || cursor.getCount() <= 0) {
            return null;
        }

        cursor.moveToPosition(new Random().nextInt(cursor.getCount()));

        return Uri.withAppendedPath(uri, cursor.getString(0));
    } 
```

以及何时使用 ACTION_GET_CONTENT 意图？

因为我想从 android 设备中选择一个图像！

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:42:26.760

如果您想从 teh android 库中选择图像，请尝试以下操作：

```
Intent intent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
startActivityForResult(intent, 100); 
```

要取回结果，您可以执行以下操作：

```
protected void onActivityResult(int requestCode, int resultCode, 
   Intent imageReturnedIntent) {
super.onActivityResult(requestCode, resultCode, imageReturnedIntent); 

switch(requestCode) { 
case REQ_CODE_PICK_IMAGE:
    if(resultCode == RESULT_OK){  
        Uri selectedImage = imageReturnedIntent.getData();
        String[] filePathColumn = {MediaStore.Images.Media.DATA};

        Cursor cursor = getContentResolver().query(
                           selectedImage, filePathColumn, null, null, null);
        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        String filePath = cursor.getString(columnIndex);
        cursor.close();

        Bitmap yourSelectedImage = BitmapFactory.decodeFile(filePath);
    }
} 
```

}

你也可以参考这个：

[如何为我的应用从图库（SD 卡）中选择图像？](https://stackoverflow.com/questions/2507898/how-to-pick-an-image-from-gallery-sd-card-for-my-app-in-android)

# javascript - 如何让 F12 开发者工具在模拟 IE 版本的 JavaScript 上下文中运行？

> ID：14682969
> 
> 赞同：1
> 
> 时间：2013-02-04T08:33:16.397
> 
> 标签：javascript, internet-explorer, windows-8, internet-explorer-10

使用 IE10 中的 F12 开发人员工具，可以像在早期 IE 版本中一样呈现网站。然而，这样做时，JavaScript 似乎仍然在 IE10 的上下文中运行。将页面设置为 IE7 并`'JSON' in window`在控制台中运行。它返回`true`。在实际的 IE7 浏览器中，它返回`false`.

基本上我想使用 F12 控制台来验证早期 IE 版本支持的 JavaScript 功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:09:09.500

您是否将“浏览器模式”和“文档模式”都设置为 IE7？当我进行测试时，IE7 的浏览器模式和 IE9 的文档模式比 JSON 给了我一个回报。当还将文档模式设置为 IE7（标准）时，我得到 JSON 未定义。

# javascript - 没有服务器端数据库的数据库

> ID：14682971
> 
> 赞同：-1
> 
> 时间：2013-02-04T08:33:18.697
> 
> 标签：javascript, database

我在一个以它们的名字为特征的网络服务器上有很多图像。每个文件都属于多个类别，每个人都属于一个类别组。例如：

```
group_fruit = ["apple", "banana", "pear"];
group_color = ["red", "blue", "yellow"];
group_origin = ["Italy", "France", "Portugal"];

a blue apple from Italy will be 00_01_00_uniqueid.jpg 
```

如果我想查找查找类别的图像（例如，我想要来自法国或葡萄牙的蓝色或黄色梨），我可以通过简单的方式在文件列表中查找文件。问题是当我有大量类别组（例如 10 个）时，每个类别都有很多类别（即 10 个），因为我一次只能下载**100 个项目**的文件列表。在这种情况下，我可以有一个查询生成 10^10 个可能的答案（最坏的情况）。

鉴于接近最坏情况的任何事情都将难以管理，我想按照以下步骤进行：

我制作了几个使用前五个组中的类别命名的 xml 文件，我在其中存储具有该类别的图像数量以及其余组中的其他五个类别。例如

```
01_00_03_00_04.xml contains:
    01_00_03_00_04_00_02_04_05_07 = 3
    01_00_03_00_04_04_04_03_00_08 = 12
    01_00_03_00_04_05_08_09_01_02 = 5 
```

这意味着我有 12 张图像，例如 01_00_03_00_04_04_04_03_00_08 类别。这样，如果我正在寻找特定的特征，我可以下载与我正在寻找的前五组特征兼容的 xml，然后我可以搜索每个 xml 以查找是否有每个可能组合的结果类别。在最坏的情况下，我将在 10^5 xml 中搜索 10^5 个类别。

对所有文件使用单个大 xml 的解决方案不适用，因为它太大而无法下载（大延迟）。为每个可能的类别组合下载列表的解决方案会太慢（因为我可以有几个组合没有结果，所以用户会期望太多时间来看到第一个结果）。这就是为什么我想采用中间解决方案的原因。

我知道最好的方法是使用数据库，但我想找到一个客户端解决方案，以免廉价服务器超载。

编辑：问题是：您对更有效的方法有任何想法吗？

感谢您的耐心等待

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:54:05.127

我认为最简单的解决方案是创建一个包含可能组合的对象：

```
var combinations = {
    1:{
        1:[1,2,3],
        2:[1,2,3],
        3:[1,2,3]
    },
    2:{
        1:[1,2,3],
        3:[1,2,3]
    },
    3:{
        1:[2,3],
        2:[1,3],
        3:[1,2]
    },
    /*
    fruit_number:{
        color_number:[origin, origin, origin],
        color_number:[origin, origin]
    }
    */
}
var fruit = ["apple", "banana", "pear"];
var color = ["red", "blue", "yellow"];
var origin = ["Italy", "France", "Portugal"];

for(var f in combinations){
    for(var c in combinations[f]){
        for(var o in combinations[f][c]){
            console.log("A",color[c-1],fruit[f-1],"from",origin[combinations[f][c][o]-1])
        }
    }
} 
```

它可能不漂亮，但我认为它和你会得到的一样有效。

# java - 比 Scrollpane 更大的 JPanel

> ID：14682972
> 
> 赞同：0
> 
> 时间：2013-02-04T08:33:26.133
> 
> 标签：java, swing, jpanel, jscrollpane, preferredsize

我已经实现了一个对话框，在其中我在一个 JPanel 中添加了许多复选框，该 JPanel 也有一个滚动条。对于我的程序的每次运行，复选框的数量不是固定的，但我在创建对话框之前就知道了。

不幸的是，当我有大量复选框来添加对话框时，如下所示：

![在此处输入图像描述](../Images/313173cecda57dd9aeb94de1fed52cf0.png)

我的代码是：

```
 JPanel listPanel = new JPanel(new GridLayout(files.size() + 2, 1));

        for (int i = 0; i < files.size(); i++) {
            listPanel.add(files.get(i));
        }

        listPanel.setPreferredSize(new Dimension(600, 1400));
        JScrollPane sp =
                new JScrollPane(listPanel, JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED,
                        JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
        sp.setPreferredSize(new Dimension(300, 200));

        mainPanel.add(sp, BorderLayout.CENTER);
        mainPanel.add(buttonPane, BorderLayout.EAST);

        getContentPane().setLayout(new FlowLayout());

        getContentPane().add(mainPanel);

        pack();
        setResizable(false); 
```

如何在不影响框架的情况下将 Scrollpane 内的 Panel 的大小设置为更大的大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T08:51:22.427

避免使用`setPreferredSize`，让布局管理器决定他们实际需要的大小......

**更新了示例**

滚动窗格的`JViewport`使用首选大小`listPane`来确定它需要多少可视空间，这是很多...

为了克服这个问题，您需要向视口提供更好的提示，以了解您的组件实际想要的可视大小。组件的`preferredSize`在这里不起作用，您需要`preferredScrollableViewportSize`从`Scrollable`接口提供

![在此处输入图像描述](../Images/039c45cfac364936be5919f946504f71.png)

```
public class BadList {

    public static void main(String[] args) {
        new BadList();
    }

    public BadList() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {

            List<String> files = new ArrayList<>(2000);
            for (int index = 0; index < 2000; index++) {
                files.add(Integer.toString(index));
            }

            ListPane listPanel = new ListPane();
            listPanel.setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.weightx = 1;
            gbc.fill = GridBagConstraints.HORIZONTAL;
            gbc.gridwidth = GridBagConstraints.REMAINDER;

            for (String file : files) {
                listPanel.add(new JCheckBox(file), gbc);
            }

            JScrollPane sp = new JScrollPane(listPanel);

            JPanel mainPanel = new JPanel(new BorderLayout());
            JPanel buttonPane = new JPanel(new GridBagLayout());
            buttonPane.add(new JButton("Select All"), gbc);
            buttonPane.add(new JButton("Deselect All"), gbc);
            gbc.weighty = 1;
            buttonPane.add(new JPanel(), gbc);

            mainPanel.add(sp, BorderLayout.CENTER);
            mainPanel.add(buttonPane, BorderLayout.EAST);

            setLayout(new BorderLayout());

            add(mainPanel);
        }
    }

    public class ListPane extends JPanel implements Scrollable {

        @Override
        public Dimension getPreferredScrollableViewportSize() {
            return new Dimension(200, 200);
        }

        @Override
        public int getScrollableUnitIncrement(Rectangle visibleRect, int orientation, int direction) {
            return 128;
        }

        @Override
        public int getScrollableBlockIncrement(Rectangle visibleRect, int orientation, int direction) {
            return 128;
        }

        @Override
        public boolean getScrollableTracksViewportWidth() {
            return false;
        }

        @Override
        public boolean getScrollableTracksViewportHeight() {
            return false;
        }

    }
} 
```

nb-我在这个例子中使用了一些任意的幻数，你将要为你的需要提供更现实的值

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T09:11:14.247

*   `JPanel`已实施`FlowLayout`，

*   `FlowLayout`只接受`PreferredSize`，那么你`JScrollPane`的铺设是正确的

*   使用`JTable`（放在那里`Boolean value`，代表`JCheckBox`）而不是向`JPanel`（非自然滚动，必须更改`scroll increment`）添加子项

*   `listPanel.setPreferredSize(new Dimension(600, 1400));`不好`Dimmension`，注释这个代码行，让它`pack()`

*   对于这项工作（此处发布的代码），我将被直接放入，`JScrollPane`而不是使用，否则发布[SSCCE](http://sscce.org/)`buttonPane``JFrame``mainPanel()`

# storage - 向量/列表与 lwuit 中的存储一起使用？

> ID：14682974
> 
> 赞同：0
> 
> 时间：2013-02-04T08:33:26.463
> 
> 标签：storage, lwuit

我尝试将矢量或默认列表保存在存储中。一切正常，直到我关闭应用程序并再次打开。当我调用 Storage 时，存储找不到这个向量。

在 lwuit 中将这些对象与 Storage 一起使用是否有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:41:03.713

writeObject 方法接受第二个参数作为对象。它返回真或假。如果你的对象适合存储，你会得到真实的。尝试放置这个向量，看看返回这个方法的是什么。

上周我尝试放置一个自定义对象，但它不起作用。我认为哈希表可以在 Storage 中，但 ListModels 不能。

[存储 API](http://lwuit.java.net/nonav/iodocs/com/sun/lwuit/io/Storage.html#writeObject%28java.lang.String,%20java.lang.Object%29)

# python - 如何为必须处理购买许可证的应用程序设计数据库/ Django 模型

> ID：14682975
> 
> 赞同：0
> 
> 时间：2013-02-04T08:33:30.363
> 
> 标签：python, database, django, database-design

我正在设计一个必须处理用户购买许可证的行为的应用程序。我不关注身份验证部分，而只关注过程的事务部分
基本上我会定义这些模型：

1) 用户 - 持有用户的数据
2) 许可证 - 持有许可证的数据。这将与用户具有多对一的关系，因为用户可以购买多个许可证，并且与交易是一对一的关系（一个许可证仅与一项交易相关）
3）付款方式 - 持有付款方式（基本上是信用卡）。这与用户 4) Transaction 有太多的关系
- 它保存交易的数据，并且与用户具有一对一的关系（一笔交易仅由一个用户完成）和与 Payment 的一对一关系方法（一笔交易与一种付款方式相关联）

你认为这是对的吗？
我通过添加用户和许可证之间的关系（只能通过事务连接）来增加一些冗余，但我认为它在 SQL 中保存了一些 JOINS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:37:47.477

您可以对任何类型的产品订单系统使用相同的模式：

*客户*方针对一个或多个*目录项*向*供应商方**下达销售订单*，其中之一可能是*销售协议*，例如软件许可。

 ***供应商方在*收单地址*一次或多次*向收单方*（可能与客户方相同）*开具发票*（要求付款） 。收单方针对该特定发票进行一次或多次*付款，直到发票被**支付*。

 ***付款不一定与销售订单项目的*装运*或*交付一致。*您可以在支付发票之前或之后运送销售订单项目。

销售订单项目通过*收货**地址*（可以是 IP 地址或电子邮件地址）运送到收货方，并有望*送达*，*此时*您会*产生收入*。

 ***这应该让你开始：

```
PARTY
id
type {organization, individual, automated_agent}
name
...

ADDRESS
id 
type {email, web, facility, telephone}
...

SALES_ORDER
id
order_date
customer_id -> party
vendor_id -> party
bill_to_id -> party
bill_to_address_id -> address

CATALOG_ITEM
id
type {good, service, agreement}
...

SALES_ORDER_ITEM
id
sales_order_id -> sales_order
catalog_item_id -> catalog_item
ship_to_id -> party
ship_to_address_id -> address
price
quantity

PAYMENT_METHOD
id
name

# whether payment has a key to invoice depends on whether you allow cross-invoice payments and/or partial payments
PAYMENT
id
payment_date 
payer_id -> party
payee_id -> party
amount
method -> payment_method 
```

省略：

```
shipment_request
shipment
delivery
invoice
invoice_payment 
```*********

# extjs - 使用 extjs 设计数独

> ID：14682976
> 
> 赞同：3
> 
> 时间：2013-02-04T08:33:33.027
> 
> 标签：extjs, extjs4, extjs4.1

我对 extjs 很陌生。

我正在尝试使用 extjs 设计数独游戏。到目前为止，我已经完成了以下工作：

```
Ext.onReady(function() {

    var i = 0,
        items = [],
        childItems = [];

    for (i = 0; i < 9; ++i) {
        childItems.push({
            xtype: 'container',
            height: 50,

            style: {
                borderColor: '#000000',
                borderStyle: 'solid',
                borderWidth: '1px',
                width: '40px'
            }
        });
    }
    for (i = 0; i < 9; ++i) {
        items.push({
            xtype: 'container',
            height: 150,
            layout: {
                type: 'column'
            },
            style: {
                borderColor: '#000000',
                borderStyle: 'solid',
                borderWidth: '1px',
                width: '143px'
            },
            items: childItems
        });
    }
    Ext.create('Ext.container.Container', {
        layout: {
            type: 'column'
        },
        width: 450,
        renderTo: Ext.getBody(),
        border: 1,
        height: 450,
        style: {
            borderColor: '#000000',
            borderStyle: 'solid',
            borderWidth: '1px',
            marginLeft: 'auto',
            marginRight: 'auto',
            marginTop: '30px'
        },

        items: items
    });
}); 
```

我的问题是，由于边框，块有一些空间，甚至这看起来类似于简单 HTML 的设计（div，可能是因为使用 css）。请帮忙..

***[jsfiddle](http://jsfiddle.net/X6kQK/)**中的设计看起来不同。*

编辑：我想尽可能避免使用 CSS（javascript 样式）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T10:21:49.100

请阅读**[边界](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.container.Container-cfg-border)**的 API 。不定义任何样式就不可能使用简单的容器。

> *对于默认没有边框的组件，设置此项不会使边框自行出现。您还需要指定边框颜色和样式*

但是你应该使用表格布局，我认为这对你来说更容易。

这是您使用表格布局的示例（快速而肮脏的变体，但它应该显示技巧）

**[JSFiddle](http://jsfiddle.net/X6kQK/2/)**

```
for (i = 0; i < 9; ++i) {
    childItems.push({
        xtype: 'container',
        width: 50,
        height: 50,
        html: i + '',
        style: {borderColor:'#000000', borderStyle:'solid', borderWidth:'1px'}
    });
}
for (i = 0; i < 9; ++i) {
    items.push({
        xtype: 'container',
        layout: {
            type: 'table',
            columns: 3
        },
        style: {borderColor:'#000000', borderStyle:'solid', borderWidth:'1px'},
        items: childItems
    });
}
Ext.create('Ext.container.Container', {
    layout: {
        type: 'table',
        // The total column count must be specified here
        columns: 3
    },
    renderTo: Ext.getBody(),    
    style: {borderColor:'#000000', borderStyle:'solid', borderWidth:'1px', margin: '30px'},
    items: items
}); 
```

# iphone - iPhone 相机上的叠加层

> ID：14682980
> 
> 赞同：0
> 
> 时间：2013-02-04T08:33:54.123
> 
> 标签：iphone, ios, camera, uiimagepickercontroller, video-capture

我想在我的 iphone 应用程序的相机上进行叠加。我已按照[本](http://www.devsrealm.com/objective-c/custom-camera-app-1/)教程进行操作

但它教的是捕捉图像，我需要在录制视频时实现它。

在教程中很简单

```
 - (void)takePicture
   {
    [picker takePicture];
   } 
```

但是我无法在录制视频时实现它，如果可以的话，请帮我举个例子

现在没有覆盖我正在使用这个编码来录制视频[我希望用上面的教程来实现它]

```
 -(void)ViewDidLoad
    {

     [[NSNotificationCenter defaultCenter] addObserver:self   selector:@selector(onUploadVideoProgress:) name:@"UPLOADPROGRESS"  object:nil];

       self.mediaTypes=[NSArray arrayWithObjects:(NSString *) kUTTypeMovie,nil];

        if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
    {
        videoRecorder = [[UIImagePickerController alloc] init];
        videoRecorder.sourceType = UIImagePickerControllerSourceTypeCamera;
        videoRecorder.delegate = self;
         NSArray *mediaTypes1 = [UIImagePickerController availableMediaTypesForSourceType:UIImagePickerControllerSourceTypeCamera];
        NSArray *videoMediaTypesOnly = [mediaTypes1 filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"(SELF contains %@)", @"movie"]];

         if ([videoMediaTypesOnly count] == 0)       
        {
            UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"Sorry but your device does not support video recording"
                                                                     delegate:nil
                                                            cancelButtonTitle:@"OK"

                                      destructiveButtonTitle:nil
                                                            otherButtonTitles:nil];
            [actionSheet showInView:[[self view] window]];
          }
         else
         {
             if ([UIImagePickerController isCameraDeviceAvailable:UIImagePickerControllerCameraDeviceRear])

            videoRecorder.cameraDevice = UIImagePickerControllerCameraDeviceRear;
            videoRecorder.mediaTypes = videoMediaTypesOnly;
            videoRecorder.videoQuality = UIImagePickerControllerQualityType640x480;
            videoRecorder.videoMaximumDuration = 30.0f;
            appDelegate.videoOrientation = @"portrait";

            [self presentModalViewController:videoRecorder animated:YES];
           }

          }
          else
          {
        UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"Sorry but your   device does not support video recording"
                                                                 delegate:nil
                                                        cancelButtonTitle:@"OK"
                                                   destructiveButtonTitle:nil
                                                        otherButtonTitles:nil];
                [actionSheet showInView:[[self view] window]];
                }

             }

          }

           - (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
           {
          self.videoURL=[[info objectForKey:UIImagePickerControllerMediaURL] path];
          self.videoData=[NSData dataWithContentsOfURL:[info objectForKey:UIImagePickerControllerMediaURL]];

           [self dismissModalViewControllerAnimated:YES];

       NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];
     if ([mediaType compare:(NSString*)kUTTypeMovie] == NSOrderedSame) {
        NSURL *mediaUrl = [info objectForKey:UIImagePickerControllerMediaURL];
        MPMoviePlayerController *moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:mediaUrl];
        moviePlayer.shouldAutoplay=NO;

        UIImage *thumbnail = [moviePlayer thumbnailImageAtTime:0.0 timeOption:MPMovieTimeOptionNearestKeyFrame];

        appDelegate.selectedVideo=[NSDictionary dictionaryWithObjectsAndKeys:
                                   self.videoURL,@"videourl",
                                   self.videoData,@"videodata",
                                   thumbnail,@"thumbdata",
                                   nil ];
           }

         AddOrEditVideoDetails *controller = [[AddOrEditVideoDetails alloc]initWithNibName:@"AddOrEditVideoView"bundle:nil];
    [[self navigationController] pushViewController:controller animated:YES];

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:22:47.653

`UIImagePickerController`已经有用于录制视频的 API。你可以打电话

```
– startVideoCapture
– stopVideoCapture 
```

录制视频。检查[API](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)